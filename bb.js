const _0x283e80=_0x4a8c;(function(_0xc0fb05,_0x205aff){const _0x4eac32=_0x4a8c,_0x8cd738=_0xc0fb05();while(!![]){try{const _0x207f17=-parseInt(_0x4eac32(0x2e1))/0x1*(-parseInt(_0x4eac32(0x259))/0x2)+parseInt(_0x4eac32(0x292))/0x3*(-parseInt(_0x4eac32(0x1cd))/0x4)+-parseInt(_0x4eac32(0x29a))/0x5*(-parseInt(_0x4eac32(0x295))/0x6)+-parseInt(_0x4eac32(0x227))/0x7*(-parseInt(_0x4eac32(0x2c8))/0x8)+-parseInt(_0x4eac32(0x2e8))/0x9*(-parseInt(_0x4eac32(0x27d))/0xa)+-parseInt(_0x4eac32(0x285))/0xb*(-parseInt(_0x4eac32(0x236))/0xc)+parseInt(_0x4eac32(0x254))/0xd*(-parseInt(_0x4eac32(0x1ef))/0xe);if(_0x207f17===_0x205aff)break;else _0x8cd738['push'](_0x8cd738['shift']());}catch(_0x267ac5){_0x8cd738['push'](_0x8cd738['shift']());}}}(_0x3f6b,0xe244d));const _0x21d6c5=function(){let _0x5930d6=!![];return function(_0xa8602d,_0x4165bd){const _0x4297fb=_0x5930d6?function(){const _0x58fe03=_0x4a8c;if(_0x4165bd){const _0x4cd359=_0x4165bd[_0x58fe03(0x216)](_0xa8602d,arguments);return _0x4165bd=null,_0x4cd359;}}:function(){};return _0x5930d6=![],_0x4297fb;};}(),_0x33bd5e=_0x21d6c5(this,function(){const _0x3d8ae0=_0x4a8c;return _0x33bd5e[_0x3d8ae0(0x1e5)]()['search'](_0x3d8ae0(0x24a))[_0x3d8ae0(0x1e5)]()['constructor'](_0x33bd5e)[_0x3d8ae0(0x263)](_0x3d8ae0(0x24a));});_0x33bd5e();'use strict';process[_0x283e80(0x27f)][_0x283e80(0x1d3)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x283e80(0x29d)),fs=require('fs'),fns=require('date-fns'),low=require(_0x283e80(0x2db)),path=require(_0x283e80(0x27a)),crypto=require(_0x283e80(0x1fb)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x283e80(0x2bb))[_0x283e80(0x210)],bcrypt=require(_0x283e80(0x24b)),jwt=require(_0x283e80(0x2a3)),analyticsLib=require('analytics')[_0x283e80(0x287)],googleAnalytics=require(_0x283e80(0x246))[_0x283e80(0x287)],ipaddr=require('ipaddr.js');let bbpath=_0x283e80(0x232);const botfile=_0x283e80(0x2ad),configfile='bb-config.json',settingsfile=_0x283e80(0x233),securefile=_0x283e80(0x224);!fs[_0x283e80(0x247)](bbpath+botfile)&&(bbpath='');const configpath=bbpath+'config/';!fs[_0x283e80(0x247)](configpath)&&fs[_0x283e80(0x28c)](configpath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x283e80(0x223)]({'bots':[]})[_0x283e80(0x20d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x283e80(0x223)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x283e80(0x1ff),'rsaStandard':_0x283e80(0x2d5)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+'version.json')[_0x283e80(0x205)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require(_0x283e80(0x274)),app=express(),http=require(_0x283e80(0x1fa))['createServer'](app);app[_0x283e80(0x237)](express[_0x283e80(0x2ba)](path[_0x283e80(0x1f5)](__dirname,bbpath,_0x283e80(0x207)))),app[_0x283e80(0x237)](express[_0x283e80(0x2ba)](path[_0x283e80(0x1f5)](__dirname,bbpath,'build'))),app['get']('/',function(_0x290b8a,_0x5e3430){const _0x3c5d48=_0x283e80;_0x5e3430[_0x3c5d48(0x2ee)](path[_0x3c5d48(0x1f5)](__dirname,bbpath,_0x3c5d48(0x207),_0x3c5d48(0x2e6)));}),app[_0x283e80(0x2be)](_0x283e80(0x213),function(_0x11c40e,_0x768f32){const _0x3ab8cc=_0x283e80;_0x768f32[_0x3ab8cc(0x2ee)](path['join'](__dirname,bbpath,_0x3ab8cc(0x281),_0x3ab8cc(0x2e6)));}),app['get'](_0x283e80(0x2ef),(_0x4e7a94,_0x11e35a)=>{const _0x2d0c3b=_0x283e80;_0x11e35a['sendFile'](path[_0x2d0c3b(0x1f5)](__dirname,bbpath,'build',_0x2d0c3b(0x2e6)));}),app[_0x283e80(0x2be)](_0x283e80(0x2cc),(_0x10f7f6,_0x31956d)=>{const _0x2d0fb7=_0x283e80;_0x31956d[_0x2d0fb7(0x2ee)](path[_0x2d0fb7(0x1f5)](__dirname,bbpath,_0x2d0fb7(0x281),_0x2d0fb7(0x2e6)));}),app[_0x283e80(0x2be)](_0x283e80(0x20f),(_0x567c83,_0x5a1e8b)=>{const _0x429f4b=_0x283e80;_0x5a1e8b[_0x429f4b(0x2ee)](path[_0x429f4b(0x1f5)](__dirname,bbpath,_0x429f4b(0x281),_0x429f4b(0x2e6)));}),app['get'](_0x283e80(0x2e4),(_0x538f72,_0x5876ba)=>{const _0x430339=_0x283e80;_0x5876ba['sendFile'](path[_0x430339(0x1f5)](__dirname,bbpath,_0x430339(0x281),_0x430339(0x2e6)));}),app['get'](_0x283e80(0x2b1),(_0x56214b,_0x2a7b63)=>{const _0x151ce9=_0x283e80;_0x2a7b63[_0x151ce9(0x2ee)](path[_0x151ce9(0x1f5)](__dirname,bbpath,_0x151ce9(0x281),_0x151ce9(0x2e6)));}),app[_0x283e80(0x2be)](_0x283e80(0x256),(_0x28efcc,_0x1e7144)=>{const _0x1d00a8=_0x283e80;_0x1e7144[_0x1d00a8(0x2ee)](path['join'](__dirname,bbpath,'build','index.html'));}),http[_0x283e80(0x1ce)](PORT);const analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x283e80(0x24e)})]}),TelegramBot=require(_0x283e80(0x1ec));let tgBot;if(settings['telegramToken']&&settings[_0x283e80(0x2d2)]!=''&&settings[_0x283e80(0x2b5)]&&settings[_0x283e80(0x2b5)]!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function startServer(){const _0x2757fd=_0x283e80;console['log'](''),console[_0x2757fd(0x248)](_0x2757fd(0x2af)),logging(_0x2757fd(0x240)+PORT),console[_0x2757fd(0x248)](_0x2757fd(0x2af));if(config['length']!=0x0)config['forEach'](_0x12460f=>{const _0x2cf6fd=_0x2757fd;if(_0x12460f[_0x2cf6fd(0x28e)]==_0x2cf6fd(0x1c6)||_0x12460f[_0x2cf6fd(0x28e)]==_0x2cf6fd(0x226))logging(_0x2cf6fd(0x26c)+_0x12460f['botID']+_0x2cf6fd(0x29e)+_0x12460f[_0x2cf6fd(0x27e)]),startBot([_0x12460f[_0x2cf6fd(0x255)]],{'cwd':bbpath},function(_0x268ad6){if(_0x268ad6)logging(_0x268ad6);});else(_0x12460f['status']==_0x2cf6fd(0x1ee)||_0x12460f[_0x2cf6fd(0x28e)]==_0x2cf6fd(0x200))&&logging(_0x2cf6fd(0x258)+_0x12460f['botID']+'\x20|\x20'+_0x12460f['botname']);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log']('-----------------------------------------------------------------------------------'),console[_0x2757fd(0x248)]('');}function startSocket(){const _0x4219c9=_0x283e80,_0xdb2899=require(_0x4219c9(0x234))(http,{});_0xdb2899['on']('connection',_0x4ce42b=>{const _0x4ca09a=_0x4219c9;let _0x1987fb,_0x1da918,_0x5b9858;const _0x265e4b=_0x4ce42b[_0x4ca09a(0x1d8)]['headers'][_0x4ca09a(0x1da)],_0x59e19e=_0x4ce42b[_0x4ca09a(0x1d8)][_0x4ca09a(0x266)][_0x4ca09a(0x276)];if(!_0x59e19e)_0x4ce42b['emit'](_0x4ca09a(0x28e),{'publicKey':secure['publicKey']});else{uuid=timelyDecrypt(_0x4ce42b[_0x4ca09a(0x1d8)][_0x4ca09a(0x266)][_0x4ca09a(0x276)],![]),_0x1da918=_0x265e4b[_0x4ca09a(0x1cb)](/bot[0-9]{3}/);if(_0x1da918)_0x5b9858=_0x1da918[0x0][_0x4ca09a(0x1cb)](/[0-9]{3}/);if(_0x5b9858)_0x1987fb=_0x5b9858[0x0];else _0x1987fb=_0x4ca09a(0x2a0);if(socket[_0x1987fb])socket[_0x1987fb][_0x4ca09a(0x1ed)](!![]);socket[_0x1987fb]=_0x4ce42b,setAccess(_0x1987fb);if(accessControl[_0x4ca09a(0x245)]){if(_0x1987fb==_0x4ca09a(0x2a0))initializeSocketBotManager();else initializeSocketBot(_0x1987fb);}if(!serverStatus[_0x1987fb])serverStatus[_0x1987fb]='connected';socket[_0x1987fb]['on']('login',_0x1bcd3e=>{const _0x106928=_0x4ca09a,_0x464691=timelyDecrypt(_0x1bcd3e[_0x106928(0x2e2)]);if(_0x464691){_0x1bcd3e={'username':_0x1bcd3e[_0x106928(0x2c6)],'password':_0x464691};let _0x1ef9d3=validateCredentials(_0x1bcd3e);if(_0x1ef9d3[_0x106928(0x245)]==![]&&_0x1ef9d3['reason']=='2FA\x20login\x20required')socket[_0x1987fb]['emit'](_0x106928(0x28e),{'access':_0x1ef9d3}),loginAccess2FA(externalip);else{if(_0x1ef9d3[_0x106928(0x245)]==![]&&_0x1ef9d3[_0x106928(0x2c9)]==_0x106928(0x288))socket[_0x1987fb][_0x106928(0x1e1)]('status',{'access':_0x1ef9d3});else{if(_0x1ef9d3[_0x106928(0x245)]&&_0x1ef9d3[_0x106928(0x2c9)]==_0x106928(0x2da)){token=_0x1ef9d3[_0x106928(0x206)];for(let _0x266368 in socket){if(_0x266368==_0x106928(0x2a0))initializeSocketBotManager();else initializeSocketBot(_0x266368);socket[_0x266368]['emit']('status',{'status':serverStatus[_0x266368]||_0x106928(0x1df),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x1ef9d3,'externalip':externalip,'publicKey':secure[_0x106928(0x231)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout('login');}}}}else logging(_0x106928(0x214));}),socket[_0x1987fb]['on']('reset-password',()=>{resetPassword();}),socket[_0x1987fb]['on'](_0x4ca09a(0x1ed),_0x3d231a=>{let _0x44590d=[];for(let _0xc77af5 in socket){if(_0xc77af5!=_0x1987fb)_0x44590d[_0xc77af5]=socket[_0xc77af5];}socket=_0x44590d;});if(_0x1987fb!=_0x4ca09a(0x2a0)&&config['apiKey']!=''){if(pid[_0x1987fb])pid[_0x1987fb][_0x4ca09a(0x25e)]({'function':_0x4ca09a(0x22c),'args':null});}}});}function setAccess(_0x55aa83){const _0x5e953b=_0x283e80;externalip=normalizeIP(socket[_0x55aa83][_0x5e953b(0x1e7)][_0x5e953b(0x215)])[_0x5e953b(0x209)],accessControl=validateAccess(token),accessControl[_0x5e953b(0x206)]&&accessControl[_0x5e953b(0x2c9)]==_0x5e953b(0x2e3)&&setSessionTimeout('2FA'),accessControl[_0x5e953b(0x206)]&&accessControl[_0x5e953b(0x2c9)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x5e953b(0x261)),socket[_0x55aa83][_0x5e953b(0x1e1)]('status',{'status':serverStatus[_0x55aa83]||_0x5e953b(0x1df),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure[_0x5e953b(0x231)],'loginNow':accessControl[_0x5e953b(0x2c9)]==_0x5e953b(0x2b0)||accessControl[_0x5e953b(0x2c9)]=='2FA\x20login\x20required'}),accessControl[_0x5e953b(0x245)]==![]&&accessControl[_0x5e953b(0x2c9)]==_0x5e953b(0x299)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x51f174){const _0x552d68=_0x283e80;let _0x590b6a;if(_0x51f174=='login')_0x590b6a=loginExpiry*0x3c*0x3e8;else _0x590b6a=telegramIpApproval[_0x552d68(0x1e0)]*0x3c*0x3e8-(new Date()['getTime']()-telegramIpApproval[_0x552d68(0x221)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x4d8e92=_0x552d68;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x3b950f=validateAccess(token);if(!(_0x3b950f[_0x4d8e92(0x245)]&&_0x3b950f['reason']=='login\x20not\x20required'))for(let _0x259288 in socket){socket[_0x259288][_0x4d8e92(0x1e1)](_0x4d8e92(0x28e),{'access':{'allow':![],'reason':_0x4d8e92(0x241),'token':null}});}token=null;},_0x590b6a);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x179029=_0x4a8c;let _0x127cad=refreshToken();for(let _0x42575b in socket){socket[_0x42575b][_0x179029(0x1e1)](_0x179029(0x28e),{'status':serverStatus[_0x42575b]||_0x179029(0x1df),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x127cad,'externalip':externalip,'publicKey':secure[_0x179029(0x231)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x18074c=_0x283e80;socket['botmanager'][_0x18074c(0x1e1)](_0x18074c(0x21b),config),socket[_0x18074c(0x2a0)][_0x18074c(0x1e1)]('settings',cleanSettings()),socket[_0x18074c(0x2a0)]['on'](_0x18074c(0x28b),_0x50d35e=>{const _0x2400e4=_0x18074c;if(validateAccess(_0x50d35e)['allow'])addBot();else logging(_0x2400e4(0x219));}),socket[_0x18074c(0x2a0)]['on']('update-bot',(_0x2765dc,_0x5b8c26)=>{const _0x40545c=_0x18074c;if(validateAccess(_0x5b8c26)[_0x40545c(0x245)])toggleBot(_0x2765dc[_0x40545c(0x255)],_0x2765dc[_0x40545c(0x28e)],_0x2765dc[_0x40545c(0x25c)]);else logging(_0x40545c(0x1d6));}),socket['botmanager']['on'](_0x18074c(0x1f1),(_0x3af493,_0x382ea8)=>{if(validateAccess(_0x382ea8)['allow'])deleteBot(_0x3af493);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),socket['botmanager']['on']('store-settings',(_0x452ecb,_0x3da449)=>{if(validateAccess(_0x3da449)['allow'])storeSettings(_0x452ecb,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),socket['botmanager']['on'](_0x18074c(0x28f),_0x478813=>{const _0x239645=_0x18074c;if(validateAccess(_0x478813)[_0x239645(0x245)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x77e049 in socket){socket[_0x77e049][_0x239645(0x1e1)]('status',{'access':{'allow':![],'reason':_0x239645(0x2e5),'token':null}});}}else logging(_0x239645(0x2b4));});}function initializeSocketBot(_0x2372ab){const _0xf951a4=_0x283e80;socket[_0x2372ab]['on'](_0xf951a4(0x228),(_0x277dcd,_0x1a7b34)=>{const _0x1e8407=_0xf951a4;if(validateAccess(_0x1a7b34)[_0x1e8407(0x245)]){if(pid[_0x2372ab])pid[_0x2372ab][_0x1e8407(0x25e)]({'function':_0x1e8407(0x283),'args':_0x277dcd});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),socket[_0x2372ab]['on']('get-portfolio',(_0x1f680f,_0x51cb5f)=>{const _0x29d9ef=_0xf951a4;if(validateAccess(_0x51cb5f)[_0x29d9ef(0x245)]){if(pid[_0x2372ab])pid[_0x2372ab][_0x29d9ef(0x25e)]({'function':'getPortfolio','args':_0x1f680f});}else logging(_0x29d9ef(0x1cc));}),socket[_0x2372ab]['on']('store-configuration',(_0x310485,_0x540d14)=>{const _0x301d46=_0xf951a4;if(validateAccess(_0x540d14)[_0x301d46(0x245)]){if(pid[_0x2372ab])pid[_0x2372ab][_0x301d46(0x25e)]({'function':_0x301d46(0x2d1),'args':_0x310485});}else logging(_0x301d46(0x26b));}),socket[_0x2372ab]['on'](_0xf951a4(0x1f9),(_0x1900f1,_0x16b6e7)=>{const _0x30101f=_0xf951a4;if(validateAccess(_0x16b6e7)[_0x30101f(0x245)]){if(pid[_0x2372ab])pid[_0x2372ab]['send']({'function':_0x30101f(0x260),'args':_0x1900f1});}else logging(_0x30101f(0x23c));}),socket[_0x2372ab]['on'](_0xf951a4(0x24f),_0x10db3e=>{const _0x6bb554=_0xf951a4;if(validateAccess(_0x10db3e)['allow']){if(pid[_0x2372ab])pid[_0x2372ab]['send']({'function':_0x6bb554(0x277),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),socket[_0x2372ab]['on'](_0xf951a4(0x2ce),(_0x153137,_0x5d955e)=>{const _0x279810=_0xf951a4;if(validateAccess(_0x5d955e)['allow']){if(pid[_0x2372ab])pid[_0x2372ab][_0x279810(0x25e)]({'function':_0x279810(0x28a),'args':_0x153137});}else logging(_0x279810(0x222));}),socket[_0x2372ab]['on'](_0xf951a4(0x28f),_0x421f55=>{const _0x57dffe=_0xf951a4;if(validateAccess(_0x421f55)[_0x57dffe(0x245)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x1aa189 in socket){socket[_0x1aa189]['emit'](_0x57dffe(0x28e),{'access':{'allow':![],'reason':_0x57dffe(0x2e5),'token':null}});}}else logging(_0x57dffe(0x2b4));});}function removeSocketListeners(){for(let _0x5b8136 in socket){socket[_0x5b8136]['removeAllListeners']();}}function cleanSettings(){const _0x5de0c9=_0x283e80;let _0x2a9304=settings;return settings[_0x5de0c9(0x2d2)]&&settings[_0x5de0c9(0x2d2)]!=''&&(_0x2a9304={..._0x2a9304,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x2a9304={..._0x2a9304,'bbPassword':'************'}),_0x2a9304;}function startBot(_0x1f1a43,_0x33f702,_0x198586){const _0x26c128=_0x283e80;let _0x143385=![];const _0x21ebf1=_0x1f1a43[0x0];_0x33f702={..._0x33f702,'stdio':[_0x26c128(0x264),_0x26c128(0x264),'inherit',_0x26c128(0x25d)]},pid[_0x21ebf1]=childProcess['fork'](botfile,_0x1f1a43,_0x33f702),pid[_0x21ebf1]['on']('message',_0x346ff0=>{const _0x373bae=_0x26c128;switch(Object[_0x373bae(0x294)](_0x346ff0)[0x0]){case _0x373bae(0x27e):updateBotName(_0x21ebf1,_0x346ff0['botname']);break;case _0x373bae(0x28e):updateStatus(_0x21ebf1,_0x346ff0['status']);break;case _0x373bae(0x25c):updateLive(_0x21ebf1,_0x346ff0[_0x373bae(0x25c)]);break;case'started':updateLive(_0x21ebf1,_0x346ff0[_0x373bae(0x28d)]);if(socket[_0x21ebf1])socket[_0x21ebf1]['emit'](_0x373bae(0x28e),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x346ff0[_0x373bae(0x2cd)]=='restart'&&stopBot(_0x21ebf1);_0x346ff0[_0x373bae(0x2cd)]==_0x373bae(0x2bf)&&toggleBot(_0x21ebf1,_0x373bae(0x1ee),'stopped');break;case _0x373bae(0x21d):sendTelegram(_0x21ebf1,_0x346ff0[_0x373bae(0x21d)]);break;case _0x373bae(0x293):if(socket[_0x21ebf1])socket[_0x21ebf1][_0x373bae(0x1e1)](_0x346ff0[_0x373bae(0x293)],_0x346ff0[_0x373bae(0x22a)]);break;}}),pid[_0x21ebf1]['on'](_0x26c128(0x2c1),function(_0x45db2a){if(_0x143385)return;_0x143385=!![],_0x198586(_0x45db2a);}),pid[_0x21ebf1]['on']('exit',function(_0xdc9ea2){const _0x55e7db=_0x26c128;if(_0x143385)return;_0x143385=!![],_0x198586(null);const _0x582087=dbConfig[_0x55e7db(0x2be)](_0x55e7db(0x21b))[_0x55e7db(0x217)]({'botID':_0x21ebf1})[_0x55e7db(0x225)]();_0x582087&&(_0x582087[_0x55e7db(0x28e)]==_0x55e7db(0x1c6)||_0x582087[_0x55e7db(0x28e)]=='new')&&(updateLive(_0x21ebf1,_0x55e7db(0x2e0)),logging('restarting\x20Bot\x20'+_0x21ebf1),startBot([_0x21ebf1],{'cwd':bbpath},function(_0x25bb1a){if(_0x25bb1a)logging(_0x25bb1a);}));});}function stopBot(_0x557d51){const _0x27aaeb=_0x283e80;if(socket[_0x557d51])socket[_0x557d51][_0x27aaeb(0x1ed)](!![]);if(pid[_0x557d51])pid[_0x557d51][_0x27aaeb(0x2bf)]();}function addBot(){const _0x1e1288=_0x283e80;let _0x2a558f;for(let _0x45c502=0x1;_0x45c502<0x3e9;_0x45c502++){_0x2a558f=_0x45c502[_0x1e1288(0x1e5)]()['padStart'](0x3,'0');let _0x5699f7=config[_0x1e1288(0x217)](_0x2c7649=>_0x2c7649[_0x1e1288(0x255)]==_0x2a558f);if(!_0x5699f7)break;}if(_0x2a558f==='1000'){logging(_0x1e1288(0x2ed));return;}logging(_0x1e1288(0x1c7)+_0x2a558f),dbConfig[_0x1e1288(0x2be)](_0x1e1288(0x21b))['push']({'botID':_0x2a558f,'botname':_0x1e1288(0x270)+_0x2a558f,'status':_0x1e1288(0x226),'live':''})[_0x1e1288(0x20d)](),startBot([_0x2a558f],{'cwd':bbpath},function(_0xbff837){if(_0xbff837)logging(_0xbff837);}),config=getConfiguration();if(socket[_0x1e1288(0x2a0)])socket[_0x1e1288(0x2a0)][_0x1e1288(0x1e1)](_0x1e1288(0x21b),config);}function deleteBot(_0x184a27){const _0x4b3fbc=_0x283e80;if(socket[_0x184a27])socket[_0x184a27][_0x4b3fbc(0x1ed)](!![]);dbConfig['get']('bots')['remove']({'botID':_0x184a27})[_0x4b3fbc(0x20d)](),logging(_0x4b3fbc(0x1c9)+_0x184a27),stopBot(_0x184a27);try{fs['unlinkSync'](path[_0x4b3fbc(0x1f5)](configpath,_0x4b3fbc(0x1fe)+_0x184a27+_0x4b3fbc(0x212))),fs[_0x4b3fbc(0x2ca)](path[_0x4b3fbc(0x1f5)](configpath,'bot-'+_0x184a27+_0x4b3fbc(0x275))),fs['unlinkSync'](path[_0x4b3fbc(0x1f5)](configpath,_0x4b3fbc(0x1fe)+_0x184a27+_0x4b3fbc(0x201))),fs[_0x4b3fbc(0x2ca)](path[_0x4b3fbc(0x1f5)](configpath,_0x4b3fbc(0x1fe)+_0x184a27+_0x4b3fbc(0x1e2)));}catch(_0x328129){if(_0x328129)logging('error\x20while\x20deleting\x20log\x20files:\x20',_0x328129);}config=getConfiguration();if(socket['botmanager'])socket[_0x4b3fbc(0x2a0)][_0x4b3fbc(0x1e1)](_0x4b3fbc(0x21b),config);}function toggleBot(_0x59ceb6,_0x4cc2db,_0x2bda8f){const _0x137630=_0x283e80;dbConfig[_0x137630(0x2be)]('bots')['find']({'botID':_0x59ceb6})['assign']({'status':_0x4cc2db})[_0x137630(0x1cf)]({'live':_0x2bda8f})[_0x137630(0x20d)]();if(_0x4cc2db==_0x137630(0x1c6)||_0x4cc2db=='new')logging(_0x137630(0x1f7)+_0x59ceb6),startBot([_0x59ceb6],{'cwd':bbpath},function(_0x420e2b){if(_0x420e2b)logging(_0x420e2b);});else(_0x4cc2db==_0x137630(0x1ee)||_0x4cc2db==_0x137630(0x200))&&(logging('disabled\x20Bot\x20'+_0x59ceb6),stopBot(_0x59ceb6));config=getConfiguration();if(socket[_0x137630(0x2a0)])socket[_0x137630(0x2a0)][_0x137630(0x1e1)](_0x137630(0x21b),config);}function _0x4a8c(_0x39ef93,_0x2051ac){const _0x13d79e=_0x3f6b();return _0x4a8c=function(_0x33bd5e,_0x21d6c5){_0x33bd5e=_0x33bd5e-0x1c6;let _0x3f6b0d=_0x13d79e[_0x33bd5e];return _0x3f6b0d;},_0x4a8c(_0x39ef93,_0x2051ac);}function toggleStatus(_0x52e95c){const _0x35e38a=_0x283e80;let _0x4ec3a2=dbConfig[_0x35e38a(0x2be)](_0x35e38a(0x21b))['find']({'botID':_0x52e95c})[_0x35e38a(0x225)](),_0x421f87;if(_0x4ec3a2[_0x35e38a(0x28e)]===_0x35e38a(0x1c6))_0x421f87=_0x35e38a(0x1ee);else{if(_0x4ec3a2['status']===_0x35e38a(0x226))_0x421f87=_0x35e38a(0x200);else{if(_0x4ec3a2['status']===_0x35e38a(0x200))_0x421f87='new';else{if(_0x4ec3a2['status']===_0x35e38a(0x1ee))_0x421f87=_0x35e38a(0x1c6);}}}return _0x421f87;}function updateStatus(_0x2a19c2,_0x553214){const _0x57b6ec=_0x283e80;dbConfig['get'](_0x57b6ec(0x21b))[_0x57b6ec(0x217)]({'botID':_0x2a19c2})[_0x57b6ec(0x1cf)]({'status':_0x553214})[_0x57b6ec(0x20d)](),config=getConfiguration();if(socket[_0x57b6ec(0x2a0)])socket[_0x57b6ec(0x2a0)]['emit'](_0x57b6ec(0x21b),config);}function updateLive(_0xe8269b,_0x142880){const _0x4489bb=_0x283e80;dbConfig[_0x4489bb(0x2be)](_0x4489bb(0x21b))[_0x4489bb(0x217)]({'botID':_0xe8269b})[_0x4489bb(0x1cf)]({'live':_0x142880})['write'](),config=getConfiguration();if(socket[_0x4489bb(0x2a0)])socket[_0x4489bb(0x2a0)][_0x4489bb(0x1e1)](_0x4489bb(0x21b),config);}function updateBotName(_0x561524,_0x236335){const _0x4bd860=_0x283e80;dbConfig[_0x4bd860(0x2be)](_0x4bd860(0x21b))['find']({'botID':_0x561524})[_0x4bd860(0x1cf)]({'botname':_0x236335})[_0x4bd860(0x20d)](),config=getConfiguration();if(socket[_0x4bd860(0x2a0)])socket[_0x4bd860(0x2a0)]['emit'](_0x4bd860(0x21b),config);}function telegramError(_0x1031ca){const _0x75fb04=_0x283e80;console[_0x75fb04(0x248)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x7fef0a){const _0x58bb2a=_0x283e80;if(_0x7fef0a[_0x58bb2a(0x2a7)][_0x58bb2a(0x2c6)]!=settings['telegramUsername']&&'@'+_0x7fef0a[_0x58bb2a(0x2a7)][_0x58bb2a(0x2c6)]!=settings[_0x58bb2a(0x2b5)])return tgBot[_0x58bb2a(0x22d)](_0x7fef0a[_0x58bb2a(0x2c7)]['id'],_0x58bb2a(0x23b),{'parse_mode':_0x58bb2a(0x1d2)})[_0x58bb2a(0x2a6)](_0x23cb09=>{telegramError(_0x23cb09);}),![];return!![];}async function initTelegram(){const _0x222c67=_0x283e80;if(tgBot)tgBot[_0x222c67(0x211)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x2794de=_0x222c67(0x1de);_0x2794de+='\x0a',_0x2794de+=_0x222c67(0x1d1),_0x2794de+='/disable\x20-\x20disable\x20notifications\x0a',_0x2794de+=_0x222c67(0x208),_0x2794de+=_0x222c67(0x278),_0x2794de+=_0x222c67(0x2a2),_0x2794de+=_0x222c67(0x20e),_0x2794de+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x2794de+=_0x222c67(0x296);let _0x21af4d=_0x222c67(0x26f);_0x21af4d+='\x0a',_0x21af4d+=_0x2794de,tgBot[_0x222c67(0x22f)](/\/start/,_0x3d5b20=>{const _0x579c2a=_0x222c67;if(!validateTelegram(_0x3d5b20))return;if(settings[_0x579c2a(0x269)]!=_0x3d5b20[_0x579c2a(0x2c7)]['id'])updateSetting(_0x579c2a(0x269),_0x3d5b20[_0x579c2a(0x2c7)]['id']);updateSetting(_0x579c2a(0x27c),!![]),tgBot['sendMessage'](_0x3d5b20[_0x579c2a(0x2c7)]['id'],_0x21af4d)['catch'](_0x455047=>{telegramError(_0x455047);});}),tgBot[_0x222c67(0x22f)](/\/enable/,_0x49f5ef=>{const _0x31881e=_0x222c67;if(!validateTelegram(_0x49f5ef))return;if(settings[_0x31881e(0x269)]!=_0x49f5ef[_0x31881e(0x2c7)]['id'])updateSetting('telegramChatId',_0x49f5ef[_0x31881e(0x2c7)]['id']);updateSetting(_0x31881e(0x27c),!![]),tgBot[_0x31881e(0x22d)](_0x49f5ef['chat']['id'],_0x31881e(0x297))['catch'](_0x3e0c07=>{telegramError(_0x3e0c07);});}),tgBot['onText'](/\/config/,async _0x1eca8a=>{const _0x535e97=_0x222c67;if(!validateTelegram(_0x1eca8a))return;tgBot[_0x535e97(0x273)](_0x535e97(0x1db)),tgBot[_0x535e97(0x22d)](_0x1eca8a[_0x535e97(0x2c7)]['id'],_0x535e97(0x2d3),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x535e97(0x2bc)},{'text':_0x535e97(0x242),'callback_data':_0x535e97(0x22e)},{'text':_0x535e97(0x2a8),'callback_data':_0x535e97(0x26e)}]]}})[_0x535e97(0x2a6)](_0x4c98c3=>{telegramError(_0x4c98c3);}),tgBot['on'](_0x535e97(0x1db),async _0x31ead5=>{const _0x9ac4a8=_0x535e97,_0x2ff24d=_0x31ead5[_0x9ac4a8(0x2d6)],_0x579499=_0x31ead5[_0x9ac4a8(0x2c5)];tgBot[_0x9ac4a8(0x229)](_0x31ead5['id'])[_0x9ac4a8(0x2eb)](async()=>{const _0x15f464=_0x9ac4a8;_0x2ff24d==_0x15f464(0x2bc)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x15f464(0x27c),!![]),await tgBot[_0x15f464(0x22d)](_0x579499[_0x15f464(0x2c7)]['id'],_0x15f464(0x257))[_0x15f464(0x2a6)](_0xfec608=>{telegramError(_0xfec608);}));_0x2ff24d==_0x15f464(0x22e)&&(updateSetting(_0x15f464(0x2e9),_0x15f464(0x22e)),updateSetting(_0x15f464(0x27c),!![]),await tgBot[_0x15f464(0x22d)](_0x579499[_0x15f464(0x2c7)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x15f464(0x2a6)](_0x4c2a6d=>{telegramError(_0x4c2a6d);}));_0x2ff24d=='all'&&(updateSetting('telegramEvents',_0x15f464(0x26e)),updateSetting(_0x15f464(0x27c),!![]),await tgBot[_0x15f464(0x22d)](_0x579499[_0x15f464(0x2c7)]['id'],_0x15f464(0x2ae))[_0x15f464(0x2a6)](_0x3fd5d5=>{telegramError(_0x3fd5d5);}));if(!settings[_0x15f464(0x269)])tgBot[_0x15f464(0x22d)](_0x579499['chat']['id'],_0x15f464(0x29b))[_0x15f464(0x2a6)](_0x311d40=>{telegramError(_0x311d40);});}),tgBot[_0x9ac4a8(0x273)]('callback_query');});}),tgBot[_0x222c67(0x22f)](/\/status/,_0x3496e5=>{const _0x4e505b=_0x222c67;if(!validateTelegram(_0x3496e5))return;let _0x37d637=_0x4e505b(0x2cb);config[_0x4e505b(0x204)](_0x1cda61=>{const _0x15f0b2=_0x4e505b;_0x37d637+=_0x15f0b2(0x270)+_0x1cda61['botID']+_0x15f0b2(0x29e)+_0x1cda61[_0x15f0b2(0x27e)]+':\x20'+_0x1cda61[_0x15f0b2(0x28e)]+'\x20/\x20'+_0x1cda61[_0x15f0b2(0x25c)]+'\x0a';}),_0x37d637+='\x0a',_0x37d637+=_0x4e505b(0x267),_0x37d637+=!settings[_0x4e505b(0x27c)]?_0x4e505b(0x2d8):'Notifications\x20enabled\x0a',_0x37d637+=settings['telegramEnabled']?settings['telegramEvents']==_0x4e505b(0x26e)?_0x4e505b(0x2bd):_0x4e505b(0x1e3)+settings[_0x4e505b(0x2e9)]+'\x20only\x0a':'',tgBot[_0x4e505b(0x22d)](_0x3496e5[_0x4e505b(0x2c7)]['id'],_0x37d637,{'parse_mode':_0x4e505b(0x1d2)})[_0x4e505b(0x2a6)](_0x3fde98=>{telegramError(_0x3fde98);});}),tgBot['onText'](/\/restart/,_0x12e0e7=>{const _0x3955a8=_0x222c67;if(!validateTelegram(_0x12e0e7))return;tgBot[_0x3955a8(0x273)](_0x3955a8(0x1db));const _0x22895d=getEnabledBots();if(_0x22895d[_0x3955a8(0x2a1)]==0x0)tgBot['sendMessage'](_0x12e0e7[_0x3955a8(0x2c7)]['id'],_0x3955a8(0x2c4))[_0x3955a8(0x2a6)](_0x30d845=>{telegramError(_0x30d845);});else{if(_0x22895d[_0x3955a8(0x2a1)]>0x1)_0x22895d[_0x3955a8(0x23a)]({'botID':'all'});let _0x1a4e60=[],_0x23b591=[];const _0x3520f5=_0x22895d['length']%0x4==0x0||_0x22895d[_0x3955a8(0x2a1)]%0x4==0x3||_0x22895d[_0x3955a8(0x2a1)]%0x3==0x1?0x4:0x3;let _0x24d1ab=0x0;_0x22895d[_0x3955a8(0x204)]((_0x50de25,_0xc313a9)=>{const _0x49b32c=_0x3955a8;if(_0xc313a9%_0x3520f5==0x0)_0x23b591=[];_0x23b591['push']({'text':_0x50de25[_0x49b32c(0x255)]=='all'?_0x49b32c(0x1f3):_0x49b32c(0x270)+_0x50de25['botID'],'callback_data':_0x50de25[_0x49b32c(0x255)]}),_0xc313a9%_0x3520f5==0x0&&(_0x1a4e60[_0x24d1ab]=_0x23b591,_0x24d1ab++);}),tgBot[_0x3955a8(0x22d)](_0x12e0e7[_0x3955a8(0x2c7)]['id'],_0x3955a8(0x253),{'reply_markup':{'inline_keyboard':_0x1a4e60}})[_0x3955a8(0x2a6)](_0x450e21=>{telegramError(_0x450e21);}),tgBot['on'](_0x3955a8(0x1db),async _0x17d81d=>{const _0x5b0cb1=_0x3955a8,_0x505593=_0x17d81d[_0x5b0cb1(0x2d6)],_0x4f0412=_0x17d81d[_0x5b0cb1(0x2c5)];tgBot['answerCallbackQuery'](_0x17d81d['id'])[_0x5b0cb1(0x2eb)](async()=>{const _0x4e44b4=_0x5b0cb1;if(_0x505593==_0x4e44b4(0x26e)){if(settings['telegramEvents']==_0x4e44b4(0x2bc))tgBot[_0x4e44b4(0x22d)](_0x4f0412[_0x4e44b4(0x2c7)]['id'],_0x4e44b4(0x1e8))[_0x4e44b4(0x2a6)](_0xa69934=>{telegramError(_0xa69934);});config[_0x4e44b4(0x204)](_0x3c900b=>{const _0x330051=_0x4e44b4;stopBot(_0x3c900b[_0x330051(0x255)]);});}else{if(settings[_0x4e44b4(0x2e9)]==_0x4e44b4(0x2bc))tgBot[_0x4e44b4(0x22d)](_0x4f0412[_0x4e44b4(0x2c7)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x505593)[_0x4e44b4(0x2a6)](_0x3053d8=>{telegramError(_0x3053d8);});stopBot(_0x505593);}}),tgBot['removeListener'](_0x5b0cb1(0x1db));});}}),tgBot['onText'](/\/on/,_0x300005=>{const _0x15cdf3=_0x222c67;if(!validateTelegram(_0x300005))return;tgBot[_0x15cdf3(0x273)]('callback_query');const _0x3600d2=getDisabledBots();if(_0x3600d2[_0x15cdf3(0x2a1)]==0x0)tgBot[_0x15cdf3(0x22d)](_0x300005['chat']['id'],_0x15cdf3(0x2d4))[_0x15cdf3(0x2a6)](_0x2d72db=>{telegramError(_0x2d72db);});else{if(_0x3600d2[_0x15cdf3(0x2a1)]>0x1)_0x3600d2[_0x15cdf3(0x23a)]({'botID':'all'});let _0x1a4682=[],_0x27c2ed=[];const _0x400481=_0x3600d2[_0x15cdf3(0x2a1)]%0x4==0x0||_0x3600d2[_0x15cdf3(0x2a1)]%0x4==0x3||_0x3600d2[_0x15cdf3(0x2a1)]%0x3==0x1?0x4:0x3;let _0x475a06=0x0;_0x3600d2[_0x15cdf3(0x204)]((_0x182c16,_0x2f9c87)=>{const _0x1ad79f=_0x15cdf3;if(_0x2f9c87%_0x400481==0x0)_0x27c2ed=[];_0x27c2ed[_0x1ad79f(0x23a)]({'text':_0x182c16[_0x1ad79f(0x255)]==_0x1ad79f(0x26e)?'All\x20bots':'Bot\x20'+_0x182c16[_0x1ad79f(0x255)],'callback_data':_0x182c16[_0x1ad79f(0x255)]}),_0x2f9c87%_0x400481==0x0&&(_0x1a4682[_0x475a06]=_0x27c2ed,_0x475a06++);}),tgBot['sendMessage'](_0x300005[_0x15cdf3(0x2c7)]['id'],_0x15cdf3(0x218),{'reply_markup':{'inline_keyboard':_0x1a4682}})[_0x15cdf3(0x2a6)](_0x4e3059=>{telegramError(_0x4e3059);}),tgBot['on'](_0x15cdf3(0x1db),async _0x581e2a=>{const _0x1046c3=_0x15cdf3,_0x4c9c23=_0x581e2a['data'],_0x4e3e8e=_0x581e2a[_0x1046c3(0x2c5)];tgBot[_0x1046c3(0x229)](_0x581e2a['id'])[_0x1046c3(0x2eb)](async()=>{const _0x2ca86e=_0x1046c3;if(_0x4c9c23==_0x2ca86e(0x26e)){if(settings['telegramEvents']==_0x2ca86e(0x2bc))tgBot[_0x2ca86e(0x22d)](_0x4e3e8e[_0x2ca86e(0x2c7)]['id'],_0x2ca86e(0x268))[_0x2ca86e(0x2a6)](_0x523937=>{telegramError(_0x523937);});_0x3600d2['forEach'](_0x100394=>{const _0x3132c9=_0x2ca86e;if(_0x100394[_0x3132c9(0x255)]!=_0x3132c9(0x26e))toggleBot(_0x100394[_0x3132c9(0x255)],toggleStatus(_0x100394[_0x3132c9(0x255)]),_0x3132c9(0x2e0));});}else{if(settings[_0x2ca86e(0x2e9)]=='orders')tgBot[_0x2ca86e(0x22d)](_0x4e3e8e[_0x2ca86e(0x2c7)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4c9c23)[_0x2ca86e(0x2a6)](_0x207f6d=>{telegramError(_0x207f6d);});toggleBot(_0x4c9c23,toggleStatus(_0x4c9c23),_0x2ca86e(0x2e0));}}),tgBot[_0x1046c3(0x273)](_0x1046c3(0x1db));});}}),tgBot[_0x222c67(0x22f)](/\/off/,_0x8c40ea=>{const _0xb7de46=_0x222c67;if(!validateTelegram(_0x8c40ea))return;tgBot[_0xb7de46(0x273)]('callback_query');const _0x4731cb=getEnabledBots();if(_0x4731cb['length']==0x0)tgBot[_0xb7de46(0x22d)](_0x8c40ea[_0xb7de46(0x2c7)]['id'],_0xb7de46(0x2c4))['catch'](_0x3fa94e=>{telegramError(_0x3fa94e);});else{if(_0x4731cb[_0xb7de46(0x2a1)]>0x1)_0x4731cb[_0xb7de46(0x23a)]({'botID':'all'});let _0xffbc33=[],_0xd5a4ac=[];const _0x1792fc=_0x4731cb[_0xb7de46(0x2a1)]%0x4==0x0||_0x4731cb[_0xb7de46(0x2a1)]%0x4==0x3||_0x4731cb[_0xb7de46(0x2a1)]%0x3==0x1?0x4:0x3;let _0x4849f8=0x0;_0x4731cb[_0xb7de46(0x204)]((_0x673d95,_0x5511b5)=>{const _0x2592ff=_0xb7de46;if(_0x5511b5%_0x1792fc==0x0)_0xd5a4ac=[];_0xd5a4ac[_0x2592ff(0x23a)]({'text':_0x673d95[_0x2592ff(0x255)]==_0x2592ff(0x26e)?_0x2592ff(0x1f3):_0x2592ff(0x270)+_0x673d95[_0x2592ff(0x255)],'callback_data':_0x673d95['botID']}),_0x5511b5%_0x1792fc==0x0&&(_0xffbc33[_0x4849f8]=_0xd5a4ac,_0x4849f8++);}),tgBot[_0xb7de46(0x22d)](_0x8c40ea[_0xb7de46(0x2c7)]['id'],_0xb7de46(0x20c),{'reply_markup':{'inline_keyboard':_0xffbc33}})[_0xb7de46(0x2a6)](_0x51d96b=>{telegramError(_0x51d96b);}),tgBot['on']('callback_query',async _0x58ddc8=>{const _0x2ad327=_0xb7de46,_0x29554c=_0x58ddc8[_0x2ad327(0x2d6)],_0x138a8c=_0x58ddc8[_0x2ad327(0x2c5)];tgBot['answerCallbackQuery'](_0x58ddc8['id'])[_0x2ad327(0x2eb)](async()=>{const _0x36ad4a=_0x2ad327;if(_0x29554c==_0x36ad4a(0x26e)){if(settings[_0x36ad4a(0x2e9)]=='orders')tgBot['sendMessage'](_0x138a8c[_0x36ad4a(0x2c7)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x36ad4a(0x2a6)](_0x1557ba=>{telegramError(_0x1557ba);});_0x4731cb[_0x36ad4a(0x204)](_0x2fbe20=>{const _0x41c654=_0x36ad4a;if(_0x2fbe20[_0x41c654(0x255)]!='all')toggleBot(_0x2fbe20['botID'],toggleStatus(_0x2fbe20['botID']),'stopped');});}else{if(settings['telegramEvents']==_0x36ad4a(0x2bc))tgBot['sendMessage'](_0x138a8c[_0x36ad4a(0x2c7)]['id'],_0x36ad4a(0x1e9)+_0x29554c)[_0x36ad4a(0x2a6)](_0x42b00a=>{telegramError(_0x42b00a);});toggleBot(_0x29554c,toggleStatus(_0x29554c),_0x36ad4a(0x2e0));}}),tgBot[_0x2ad327(0x273)]('callback_query');});}}),tgBot[_0x222c67(0x22f)](/\/disable/,_0x17c58e=>{const _0x1aa181=_0x222c67;if(!validateTelegram(_0x17c58e))return;tgBot[_0x1aa181(0x22d)](_0x17c58e[_0x1aa181(0x2c7)]['id'],_0x1aa181(0x21e))[_0x1aa181(0x2a6)](_0x841bfd=>{telegramError(_0x841bfd);}),updateSetting(_0x1aa181(0x27c),![]);}),tgBot[_0x222c67(0x22f)](/\/help/,_0x399eb8=>{const _0x5dd576=_0x222c67;if(!validateTelegram(_0x399eb8))return;tgBot[_0x5dd576(0x22d)](_0x399eb8['chat']['id'],_0x2794de)[_0x5dd576(0x2a6)](_0x9c605f=>{telegramError(_0x9c605f);});}),tgBot['on'](_0x222c67(0x1fc),_0x1bda3f=>{const _0x3d8f4f=_0x222c67;if(_0x1bda3f[_0x3d8f4f(0x1e5)]()['includes'](_0x3d8f4f(0x1e4))){logging(_0x3d8f4f(0x2b7)),tgBot['stopPolling'](),tgBot=null;if(socket['botmanager'])socket[_0x3d8f4f(0x2a0)]['emit'](_0x3d8f4f(0x238),_0x3d8f4f(0x2b7));}}),process[_0x222c67(0x265)](_0x222c67(0x2c0),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process['once'](_0x222c67(0x2d9),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){const _0x3ce2c5=_0x283e80;tgBot&&(tgBot[_0x3ce2c5(0x211)](),tgBot=null);}function _0x3f6b(){const _0x376570=['telegramChatId','decrypt','Unauthorized\x20attempt\x20to\x20store\x20configuration','starting\x20bot\x20|\x20Bot\x20','compareSync','all','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Bot\x20','15\x20min','page','removeListener','express','-events.json','encryptedUuid','getStartingBalances','/restart\x20-\x20restart\x20bot(s)\x0a','User\x20has\x20been\x20validated','path','map','telegramEnabled','2678790SAsyvP','botname','env','loginRequired','build','whitelistEnabled','emitHistory','generateKeyPairAsync','11spiaYP','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','default','invalid\x20credentials','login\x20not\x20required','placeOrder','add-bot','mkdirSync','started','status','logout','settings','split','24HBpSTQ','function','keys','564JBlOok','/help\x20-\x20show\x20avaiable\x20commands\x0a','Notifications\x20enabled','padStart','2FA\x20required','49685UcCWNI','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','bbUsername','lowdb/adapters/FileSync','\x20|\x20','sign','botmanager','length','/on\x20-\x20start\x20bot(s)\x0a','jsonwebtoken','bbPassword','secret','catch','from','All','isValid','add','success','temporaryAccessAllowed','bot.js','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','-----------------------------------------------------------------------------------','login\x20required','/:bot/configuration','exp','verify','Unauthorized\x20attempt\x20to\x20log\x20out','telegramUsername','secure','Invalid\x20Telegram\x20token','Token\x20blacklisted','hashSync','static','hybrid-crypto-js','orders','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','get','kill','SIGINT','error','Balance\x20Bot\x20Server','includes','No\x20bots\x20running\x20right\x20now','message','username','chat','248IxEIpG','reason','unlinkSync','<b>Balance\x20Bot\x20status:</b>\x0a','/:bot/performance','stop','place-order','Bot\x20Mgr\x20>\x20','getSeconds','storeConfiguration','telegramToken','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','All\x20bots\x20running\x20right\x20now','RSA-OAEP','data','showname','Notifications\x20disabled\x0a','SIGTERM','login\x20token\x20generated','lowdb','cloneDeep','running','f2aRequired','Allow\x20login\x20from\x20IP\x20address\x20<b>','stopped','97561nRcfPy','password','temporary\x20token\x20generated','/:bot/history','logged\x20out','index.html','getDate','27VmonNo','telegramEvents','reload','then','blacklist','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','sendFile','/:bot/portfolio','enabled','starting\x20new\x20bot\x20|\x20Bot\x20','https://hodlerhacks.com','deleted\x20Bot\x20','whitelist','match','Unauthorized\x20attempt\x20to\x20get\x20portfolio','40BIvnLn','listen','assign','Invalid\x20authentication\x20token\x20(1)','/enable\x20-\x20enable\x20notifications\x0a','HTML','NTBA_FIX_319','reject','yes','Unauthorized\x20attempt\x20to\x20update\x20bot','2FA\x20login\x20required','handshake','Access\x20enabled\x20for\x20','referer','callback_query','getTime',':\x20Bot\x20Mgr\x20>\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','starting','expiry','emit','-results.json','Notifications\x20types:\x20','404\x20Not\x20Found','toString','randomBytes','conn','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','</b>\x20?','event','node-telegram-bot-api','disconnect','disabled','1918JSmpil','************','delete-bot','getHours','All\x20bots','kind','join','No\x20authentication\x20token','enabled\x20Bot\x20','getMinutes','store-headless','http','crypto','polling_error','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bot-','sha256','new-disabled','-performance.json','toIPv4MappedAddress','sortBy','forEach','version','token','build2','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','store','Password\x20has\x20been\x20reset\x20to:\x20','::ffff:127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','write','/off\x20-\x20stop\x20bot(s)\x0a','/:bot/coins','RSA','stopPolling','-config.json','/:bot','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','remoteAddress','apply','find','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20add\x20bot','show','bots','timeshift','telegram','Notifications\x20disabled','::1','toIPv4Address','timestamp','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','defaults','bb-secure.json','value','new','173285gugDZF','get-logs','answerCallbackQuery','args','getMonth','initclient','sendMessage','alerts','onText','type','publicKey','bb/','bb-settings.json','socket.io','127.0.0.1','7312296RYQhOU','use','notification','ipv6','push','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','filter','settings.','clientip','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','access\x20timeout','Alerts','hasOwnProperty','hex','allow','@analytics/google-analytics','existsSync','log','remove','(((.+)+)+)+$','bcryptjs','5\x20min','privateKey','UA-192771731-1','get-starting-balances','Invalid\x20authentication\x20token\x20(2)','Invalid\x20username\x20or\x20IP\x20address','Login\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','364962CdWAhX','botID','/:bot/support','Ok,\x20will\x20send\x20order\x20notifications\x20only','idling\x20bot\x20\x20\x20|\x20Bot\x20','34vHUMbq','accept','\x20>\x20','live','ipc','send','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','storeHeadless','login','Temporary\x20access\x20rejected','search','inherit','once','auth','<b>Telegram\x20bot\x20status:</b>\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots'];_0x3f6b=function(){return _0x376570;};return _0x3f6b();}function sendTelegram(_0x354674,_0x1e17bf){const _0x1ce558=_0x283e80;if(settings[_0x1ce558(0x27c)]){if(settings['telegramEvents']==_0x1ce558(0x26e)||(_0x1e17bf['type']==_0x1ce558(0x2c1)||_0x1e17bf[_0x1ce558(0x230)]==_0x1ce558(0x2ab))&&settings[_0x1ce558(0x2e9)]==_0x1ce558(0x22e)||_0x1e17bf[_0x1ce558(0x230)]=='order'&&settings[_0x1ce558(0x2e9)]==_0x1ce558(0x2bc)){if(tgBot&&settings['telegramChatId']){if(_0x1e17bf[_0x1ce558(0x2d7)])tgBot[_0x1ce558(0x22d)](settings['telegramChatId'],_0x1e17bf['botname']+_0x1ce558(0x25b)+_0x1e17bf[_0x1ce558(0x1eb)])[_0x1ce558(0x2a6)](_0x347679=>{telegramError(_0x347679);});else tgBot['sendMessage'](settings[_0x1ce558(0x269)],'Bot\x20'+_0x354674+_0x1ce558(0x25b)+_0x1e17bf[_0x1ce558(0x1eb)])[_0x1ce558(0x2a6)](_0x29cfda=>{telegramError(_0x29cfda);});}}}}function temporaryAccess2FA(_0x53a5d3){const _0x52cea5=_0x283e80;let _0xf8887f=new Date(),_0x290088=![];if(lastIpApproval){if(_0xf8887f-lastIpApproval<0x1388)_0x290088=!![];}lastIpApproval=new Date();if(_0x290088)return;tgBot&&settings[_0x52cea5(0x269)]&&(tgBot[_0x52cea5(0x273)]('callback_query'),tgBot['sendMessage'](settings[_0x52cea5(0x269)],_0x52cea5(0x25f)+normalizeIP(_0x53a5d3)[_0x52cea5(0x21a)]+_0x52cea5(0x1ea),{'parse_mode':_0x52cea5(0x1d2),'reply_markup':{'inline_keyboard':[[{'text':_0x52cea5(0x24c),'callback_data':'5'},{'text':_0x52cea5(0x271),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x52cea5(0x1d4),'callback_data':_0x52cea5(0x1d4)}]]}})[_0x52cea5(0x2a6)](_0x55218e=>{telegramError(_0x55218e);}),tgBot['on'](_0x52cea5(0x1db),async _0x4d841c=>{const _0x35da89=_0x52cea5,_0x7ce8fb=_0x4d841c[_0x35da89(0x2d6)],_0x3b4425=_0x4d841c[_0x35da89(0x2c5)];tgBot['answerCallbackQuery'](_0x4d841c['id'])['then'](async()=>{const _0x67c717=_0x35da89;if(_0x7ce8fb!=_0x67c717(0x1d4)){telegramIpApproval={'clientip':_0x53a5d3,'timestamp':new Date()[_0x67c717(0x1dc)](),'expiry':_0x7ce8fb},await tgBot['sendMessage'](_0x3b4425[_0x67c717(0x2c7)]['id'],_0x67c717(0x1d9)+_0x7ce8fb+'\x20minutes',{'parse_mode':_0x67c717(0x1d2)})[_0x67c717(0x2a6)](_0x3978f9=>{telegramError(_0x3978f9);});for(let _0x2a49ed in socket){socket[_0x2a49ed][_0x67c717(0x1e1)](_0x67c717(0x28e),{'access':{'allow':![],'reason':_0x67c717(0x2ea),'token':null}});}}else await tgBot['sendMessage'](_0x3b4425[_0x67c717(0x2c7)]['id'],_0x67c717(0x262))[_0x67c717(0x2a6)](_0x4bb84f=>{telegramError(_0x4bb84f);});}),tgBot[_0x35da89(0x273)](_0x35da89(0x1db));}));}function loginAccess2FA(_0x166629){const _0x56eb93=_0x283e80;tgBot&&settings[_0x56eb93(0x269)]&&(tgBot[_0x56eb93(0x273)](_0x56eb93(0x1db)),tgBot[_0x56eb93(0x22d)](settings[_0x56eb93(0x269)],_0x56eb93(0x2df)+normalizeIP(_0x166629)['show']+_0x56eb93(0x1ea),{'parse_mode':_0x56eb93(0x1d2),'reply_markup':{'inline_keyboard':[[{'text':_0x56eb93(0x25a),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x56eb93(0x1d4)}]]}})[_0x56eb93(0x2a6)](_0x8b950c=>{telegramError(_0x8b950c);}),tgBot['on'](_0x56eb93(0x1db),async _0x547b52=>{const _0x3e4d7b=_0x56eb93,_0x437282=_0x547b52[_0x3e4d7b(0x2d6)],_0x5733b0=_0x547b52[_0x3e4d7b(0x2c5)];tgBot[_0x3e4d7b(0x229)](_0x547b52['id'])[_0x3e4d7b(0x2eb)](async()=>{const _0x5e765b=_0x3e4d7b;if(_0x437282!='reject'){telegram2FaApproval={'clientip':_0x166629,'timestamp':new Date()[_0x5e765b(0x1dc)](),'expiry':_0x437282},await tgBot[_0x5e765b(0x22d)](_0x5733b0[_0x5e765b(0x2c7)]['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0x5e765b(0x2a6)](_0x47fe61=>{telegramError(_0x47fe61);});for(let _0x221470 in socket){socket[_0x221470][_0x5e765b(0x1e1)]('status',{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0x5e765b(0x22d)](_0x5733b0[_0x5e765b(0x2c7)]['id'],_0x5e765b(0x252))[_0x5e765b(0x2a6)](_0x5101b7=>{telegramError(_0x5101b7);});}),tgBot[_0x3e4d7b(0x273)]('callback_query');}));}function getConfiguration(){const _0x52bc88=_0x283e80;return dbConfig[_0x52bc88(0x2be)](_0x52bc88(0x21b))[_0x52bc88(0x203)]('botID')[_0x52bc88(0x225)]()||[];}function getEnabledBots(){const _0x862216=_0x283e80;return dbConfig[_0x862216(0x2be)](_0x862216(0x21b))[_0x862216(0x203)](_0x862216(0x255))[_0x862216(0x23d)]({'status':_0x862216(0x1c6)})[_0x862216(0x225)]()||[];}function getDisabledBots(){const _0x3e275f=_0x283e80;return dbConfig['get']('bots')[_0x3e275f(0x203)](_0x3e275f(0x255))[_0x3e275f(0x23d)]({'status':_0x3e275f(0x1ee)})['value']()||[];}function getSettings(){const _0xd915c0=_0x283e80;return dbSettings['get']('settings')[_0xd915c0(0x225)]()||{'timeshift':0x0};}function getSecure(){const _0x111938=_0x283e80;return dbSecure[_0x111938(0x2be)]('secure')['value']()||{};}function getBlacklist(){const _0x20b07f=_0x283e80;return dbSecure[_0x20b07f(0x2be)](_0x20b07f(0x2ec))[_0x20b07f(0x225)]()||[];}function broadcastToBots(_0xb5f38f,_0xfd1788){config['forEach'](_0x42f82e=>{const _0x4444b=_0x4a8c;if(_0x42f82e['status']==_0x4444b(0x1c6)&&_0x42f82e[_0x4444b(0x25c)]==_0x4444b(0x2dd)){if(pid[_0x42f82e[_0x4444b(0x255)]])pid[_0x42f82e[_0x4444b(0x255)]]['send']({[_0xb5f38f]:_0xfd1788});}});}function storeSettings(_0x27502e,_0x4328fe=![]){const _0xcc477c=_0x283e80;_0x27502e={...settings,..._0x27502e};if(_0x4328fe&&_0x27502e[_0xcc477c(0x2a4)]!=_0xcc477c(0x1f0)&&_0x27502e[_0xcc477c(0x2a4)]!=''){const _0x49baef=crypt[_0xcc477c(0x26a)](secure[_0xcc477c(0x24d)],_0x27502e[_0xcc477c(0x2a4)])[_0xcc477c(0x2c5)][_0xcc477c(0x291)]('@')[0x0],_0x7d3140=bcrypt['hashSync'](_0x49baef,saltRounds);_0x27502e={..._0x27502e,'bbPassword':_0x7d3140};}if(_0x4328fe&&_0x27502e[_0xcc477c(0x2d2)]!=_0xcc477c(0x1f0)&&_0x27502e[_0xcc477c(0x2d2)]!=''){const _0xf0d572=crypt[_0xcc477c(0x26a)](secure['privateKey'],_0x27502e[_0xcc477c(0x2d2)])[_0xcc477c(0x2c5)]['split']('@')[0x0];_0x27502e={..._0x27502e,'telegramToken':_0xf0d572};}const _0x54c2d7=_0x27502e[_0xcc477c(0x2d2)]!='************'&&_0x27502e['telegramToken']!=settings[_0xcc477c(0x2d2)]||_0x27502e[_0xcc477c(0x2b5)]!=settings[_0xcc477c(0x2b5)],_0xbed12f=_0x27502e[_0xcc477c(0x2d2)]==''||_0x27502e[_0xcc477c(0x2b5)]=='';if(_0x54c2d7)_0x27502e[_0xcc477c(0x2e9)]=_0xcc477c(0x26e);for(const [_0x28d06f,_0x37e44e]of Object['entries'](_0x27502e)){if(_0x28d06f=='telegramToken'&&_0x37e44e==_0xcc477c(0x1f0)){_0x27502e[_0xcc477c(0x2d2)]=settings[_0xcc477c(0x2d2)];continue;};if(_0x28d06f=='bbPassword'&&_0x37e44e==_0xcc477c(0x1f0)){_0x27502e[_0xcc477c(0x2a4)]=settings[_0xcc477c(0x2a4)];continue;};dbSettings['set'](_0xcc477c(0x23e)+_0x28d06f,_0x37e44e)[_0xcc477c(0x20d)]();}settings=_0x27502e;if(socket[_0xcc477c(0x2a0)])socket[_0xcc477c(0x2a0)][_0xcc477c(0x1e1)](_0xcc477c(0x290),cleanSettings());broadcastToBots(_0xcc477c(0x21c),settings[_0xcc477c(0x21c)]);if(_0x54c2d7&&!_0xbed12f)initTelegram();if(_0x54c2d7&&_0xbed12f)disableTelegram();for(let _0x3579ab in socket){setAccess(_0x3579ab);}}function updateSetting(_0x509756,_0x3c4080){const _0xc3cd90=_0x283e80;dbSettings['set'](_0xc3cd90(0x23e)+_0x509756,_0x3c4080)['write'](),settings=getSettings();if(socket['botmanager'])socket[_0xc3cd90(0x2a0)][_0xc3cd90(0x1e1)](_0xc3cd90(0x290),cleanSettings());}function storeSecure(_0x22972c){const _0x59c8b3=_0x283e80;dbSecure[_0x59c8b3(0x2be)](_0x59c8b3(0x2b6))['push'](_0x22972c)[_0x59c8b3(0x20d)](),secure=_0x22972c;}function addBlacklist(){const _0x5e1441=_0x283e80;cleanBlacklist();let _0x469d3c;telegramIpApproval?_0x469d3c=Math['max'](telegramIpApproval[_0x5e1441(0x1e0)],loginExpiry):_0x469d3c=loginExpiry,dbSecure['get'](_0x5e1441(0x2ec))[_0x5e1441(0x23a)]({'expiry':new Date()[_0x5e1441(0x1dc)]()+_0x469d3c*0x3c*0x3e8,'token':token})[_0x5e1441(0x20d)](),blacklist=dbSecure[_0x5e1441(0x2be)](_0x5e1441(0x2ec))[_0x5e1441(0x225)]();}function cleanBlacklist(){const _0xff5f45=_0x283e80;let _0x6d9f1f=dbSecure[_0xff5f45(0x2be)](_0xff5f45(0x2ec))[_0xff5f45(0x2dc)]()[_0xff5f45(0x225)](),_0xc48b72=new Date()[_0xff5f45(0x1dc)]();_0x6d9f1f['forEach'](_0x10abd9=>{const _0x2d5a0f=_0xff5f45;_0x10abd9[_0x2d5a0f(0x1e0)]<_0xc48b72&&dbSecure[_0x2d5a0f(0x2be)](_0x2d5a0f(0x2ec))[_0x2d5a0f(0x249)]({'expiry':_0x10abd9[_0x2d5a0f(0x1e0)]})[_0x2d5a0f(0x20d)]();});}function initStates(){let _0x2c446d=getConfiguration();_0x2c446d['forEach'](_0x250b8b=>{const _0x1ab340=_0x4a8c;_0x250b8b[_0x1ab340(0x25c)]=_0x1ab340(0x2e0);}),storeConfiguration(_0x2c446d);}function onKeys(){const _0x2eaab7=new RSA();return new Promise(_0x22d2a8=>{const _0x14cd3f=_0x4a8c;_0x2eaab7[_0x14cd3f(0x284)]()[_0x14cd3f(0x2eb)](_0x46793e=>{_0x22d2a8(_0x46793e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x269a3=_0x283e80;let _0x8dfebc=getConfiguration(),_0x593e8c=![];_0x8dfebc['forEach'](_0x2ce29f=>{const _0x4f7a36=_0x4a8c;if(_0x2ce29f['status']==_0x4f7a36(0x2dd))_0x2ce29f[_0x4f7a36(0x28e)]='enabled',_0x593e8c=!![];else _0x2ce29f[_0x4f7a36(0x28e)]==_0x4f7a36(0x2e0)&&(_0x2ce29f[_0x4f7a36(0x28e)]=_0x4f7a36(0x1ee),_0x593e8c=!![]);});if(_0x593e8c)storeConfiguration(_0x8dfebc);let _0x550526=getSecure();if(!_0x550526[_0x269a3(0x243)](_0x269a3(0x2a5))){let _0x298a67=await generateKeys();_0x550526[_0x269a3(0x231)]=_0x298a67['publicKey'],_0x550526['privateKey']=_0x298a67[_0x269a3(0x24d)],_0x550526['secret']=crypto[_0x269a3(0x1e6)](0x20)['toString'](_0x269a3(0x244));;storeSecure(_0x550526);}let _0x17cb38=getSettings();_0x593e8c=![];!_0x17cb38[_0x269a3(0x243)](_0x269a3(0x280))&&(_0x17cb38[_0x269a3(0x280)]=![],_0x17cb38[_0x269a3(0x29c)]='',_0x17cb38[_0x269a3(0x2a4)]='',_0x17cb38[_0x269a3(0x2de)]=![],_0x593e8c=!![]);!_0x17cb38[_0x269a3(0x243)](_0x269a3(0x282))&&(_0x17cb38['whitelistEnabled']=![],_0x17cb38[_0x269a3(0x1ca)]=[],_0x17cb38[_0x269a3(0x2ac)]=![],_0x593e8c=!![]);if(!_0x17cb38[_0x269a3(0x243)](_0x269a3(0x27c))){if(_0x17cb38['telegramChatId'])_0x17cb38['telegramEnabled']=!![];else _0x17cb38[_0x269a3(0x27c)]=![];_0x593e8c=!![];}if(_0x593e8c)storeSettings(_0x17cb38);}function storeConfiguration(_0xf3683e){const _0x5682e1=_0x283e80;dbConfig['get']('bots')[_0x5682e1(0x249)]()[_0x5682e1(0x20d)](),dbConfig[_0x5682e1(0x2be)](_0x5682e1(0x21b))[_0x5682e1(0x23a)](..._0xf3683e)[_0x5682e1(0x20d)](),config=_0xf3683e;}function resetPassword(){const _0x2d949c=_0x283e80;tgBot&&settings[_0x2d949c(0x269)]&&(tgBot[_0x2d949c(0x273)](_0x2d949c(0x1db)),tgBot[_0x2d949c(0x22d)](settings['telegramChatId'],_0x2d949c(0x286),{'parse_mode':_0x2d949c(0x1d2),'reply_markup':{'inline_keyboard':[[{'text':_0x2d949c(0x1d5),'callback_data':_0x2d949c(0x1d5)},{'text':'no','callback_data':'no'}]]}})[_0x2d949c(0x2a6)](_0x2ed8fb=>{telegramError(_0x2ed8fb);}),tgBot['on'](_0x2d949c(0x1db),async _0x487e6b=>{const _0x109ec6=_0x2d949c,_0x125f7e=_0x487e6b[_0x109ec6(0x2d6)],_0x48d075=_0x487e6b[_0x109ec6(0x2c5)];tgBot['answerCallbackQuery'](_0x487e6b['id'])[_0x109ec6(0x2eb)](async()=>{const _0x1a1ecf=_0x109ec6;if(_0x125f7e!='no'){const _0x486cb4=0xf,_0x545d5a=_0x1a1ecf(0x1fd),_0x4075e9=Array[_0x1a1ecf(0x2a7)](crypto['randomFillSync'](new Uint32Array(_0x486cb4)))[_0x1a1ecf(0x27b)](_0xc96a7d=>_0x545d5a[_0xc96a7d%_0x545d5a[_0x1a1ecf(0x2a1)]])['join'](''),_0x45d3ca=bcrypt[_0x1a1ecf(0x2b9)](_0x4075e9,saltRounds);storeSettings({'bbPassword':_0x45d3ca}),await tgBot['sendMessage'](_0x48d075[_0x1a1ecf(0x2c7)]['id'],_0x1a1ecf(0x20a)+_0x4075e9,{'parse_mode':'HTML'})[_0x1a1ecf(0x2a6)](_0x3a384f=>{telegramError(_0x3a384f);});}else await tgBot[_0x1a1ecf(0x22d)](_0x48d075[_0x1a1ecf(0x2c7)]['id'],'Password\x20reset\x20rejected')[_0x1a1ecf(0x2a6)](_0x51ea3b=>{telegramError(_0x51ea3b);});}),tgBot[_0x109ec6(0x273)]('callback_query');}));}function logging(_0x374b61){const _0x59491f=_0x283e80;console[_0x59491f(0x248)](getTimeStamp()+_0x59491f(0x1dd)+_0x374b61);if(tgBot&&settings[_0x59491f(0x269)]&&settings[_0x59491f(0x2e9)]!=_0x59491f(0x2bc))tgBot['sendMessage'](settings[_0x59491f(0x269)],_0x59491f(0x2cf)+_0x374b61)[_0x59491f(0x2a6)](_0x175ac5=>{telegramError(_0x175ac5);});}function getServerTime(){const _0x3da391=_0x283e80,_0xc48d0d=new Date();return _0xc48d0d['getFullYear']()+'/'+(_0xc48d0d[_0x3da391(0x22b)]()+0x1)[_0x3da391(0x1e5)]()[_0x3da391(0x298)](0x2,'0')+'/'+_0xc48d0d[_0x3da391(0x2e7)]()[_0x3da391(0x1e5)]()[_0x3da391(0x298)](0x2,'0')+'\x20'+_0xc48d0d[_0x3da391(0x1f2)]()[_0x3da391(0x1e5)]()[_0x3da391(0x298)](0x2,'0')+':'+_0xc48d0d[_0x3da391(0x1f8)]()[_0x3da391(0x1e5)]()['padStart'](0x2,'0')+':'+_0xc48d0d[_0x3da391(0x2d0)]()['toString']()[_0x3da391(0x298)](0x2,'0');}function getTimeStamp(){const _0x292214=_0x283e80,_0x2733f4=shiftedTime();return _0x2733f4['getFullYear']()+'/'+(_0x2733f4[_0x292214(0x22b)]()+0x1)[_0x292214(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x2733f4['getDate']()[_0x292214(0x1e5)]()['padStart'](0x2,'0')+'\x20'+_0x2733f4[_0x292214(0x1f2)]()[_0x292214(0x1e5)]()[_0x292214(0x298)](0x2,'0')+':'+_0x2733f4['getMinutes']()[_0x292214(0x1e5)]()[_0x292214(0x298)](0x2,'0')+':'+_0x2733f4[_0x292214(0x2d0)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x2f8d9c=_0x283e80,_0x5e1d53=new Date();let _0x693747=_0x5e1d53;if(settings[_0x2f8d9c(0x21c)]&&settings[_0x2f8d9c(0x21c)]!==0x0)_0x693747=fns[_0x2f8d9c(0x2aa)](_0x5e1d53,{'hours':settings[_0x2f8d9c(0x21c)]});return _0x693747;}function startAnalytics(){let _0x1fd513=new Date()['getUTCHours']();_0x1fd513==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x53c683=_0x283e80;analytics[_0x53c683(0x272)]({'title':_0x53c683(0x2c2),'href':_0x53c683(0x1c8),'path':'/v'+serverversion});}function validateCredentials(_0x54f415){const _0x41fcde=_0x283e80;if(_0x54f415['username']==settings[_0x41fcde(0x29c)]&&bcrypt[_0x41fcde(0x26d)](_0x54f415[_0x41fcde(0x2e2)],settings[_0x41fcde(0x2a4)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x41fcde(0x1d7),'token':null};else{const _0x52c91a=generateLoginToken();return{'allow':!![],'reason':_0x41fcde(0x2da),'token':_0x52c91a};}}else return{'allow':![],'reason':_0x41fcde(0x288),'token':null};}function refreshToken(){const _0x1c3e73=_0x283e80,_0x266079=generateLoginToken();return{'allow':!![],'reason':_0x1c3e73(0x2da),'token':_0x266079};}function validateAccess(_0x49d4eb){const _0x4ab2e6=_0x283e80;let _0x5c888f;const _0x598bbf=_0x15329e=>{const _0x1638f4=_0x4a8c;if(settings[_0x1638f4(0x280)]){if(settings[_0x1638f4(0x2de)]){if(telegram2FaApproved()){const _0x40050c=generateLoginToken();return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x40050c};}else return{'allow':![],'reason':_0x1638f4(0x1d7),'token':null};}else return _0x5c888f=validToken(_0x15329e),_0x5c888f[_0x1638f4(0x243)](_0x1638f4(0x2ab))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x15329e}:{'allow':![],'reason':_0x1638f4(0x2b0),'token':null};}else return{'allow':!![],'reason':_0x1638f4(0x289),'token':null};};if(settings[_0x4ab2e6(0x282)]){let _0x44e467=[...settings[_0x4ab2e6(0x1ca)],_0x4ab2e6(0x21f),_0x4ab2e6(0x20b),_0x4ab2e6(0x235)];if(_0x44e467[_0x4ab2e6(0x2c3)](externalip))return _0x598bbf(_0x49d4eb);else{_0x5c888f=validToken(_0x49d4eb);if(_0x5c888f[_0x4ab2e6(0x243)]('success'))return _0x598bbf(_0x49d4eb);else{if(telegramIpApproved()){const _0x30a2a3=generateToken();return _0x5c888f=_0x598bbf(_0x49d4eb),_0x5c888f[_0x4ab2e6(0x245)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x30a2a3}:_0x5c888f;}else return settings[_0x4ab2e6(0x2ac)]?{'allow':![],'reason':_0x4ab2e6(0x299),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x598bbf(_0x49d4eb);}function timelyDecrypt(_0x1d0b8b,_0x57f437=!![]){const _0x1cdd01=_0x283e80;if(_0x1d0b8b)try{const _0x121259=crypt['decrypt'](secure[_0x1cdd01(0x24d)],_0x1d0b8b)[_0x1cdd01(0x2c5)],_0x12f776=_0x121259[_0x1cdd01(0x291)]('@')[0x0],_0x396078=_0x121259[_0x1cdd01(0x291)]('@')[0x1],_0x2887fb=new Date()[_0x1cdd01(0x1dc)]();if(_0x57f437){if(_0x2887fb-_0x396078<maxSecretAge*0x3e8)return _0x12f776;else return![];}else return _0x12f776;}catch{return![];}else return![];}const validToken=_0xdf5858=>{const _0x5e7d78=_0x283e80;if(!_0xdf5858)return{'error':_0x5e7d78(0x1f6)};for(let _0x11946c of blacklist){if(_0x11946c['token']==_0xdf5858)return{'error':_0x5e7d78(0x2b8)};}let _0x670dc9;try{_0x670dc9=jwt[_0x5e7d78(0x2b3)](_0xdf5858,secure[_0x5e7d78(0x2a5)]+uuid);}catch{return{'error':_0x5e7d78(0x1d0)};}if(!_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x23f))&&!_0x670dc9['hasOwnProperty'](_0x5e7d78(0x2c6))||!_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x2b2)))return{'error':_0x5e7d78(0x250)};if(!_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x2c6))&&_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x23f))){const {clientip:_0x58151e}=_0x670dc9;return externalip==_0x58151e?{'success':_0x5e7d78(0x279)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x2c6))&&_0x670dc9[_0x5e7d78(0x243)](_0x5e7d78(0x23f))){const {username:_0x3e8005,clientip:_0x2433c0}=_0x670dc9;return settings[_0x5e7d78(0x29c)]==_0x3e8005&&externalip==_0x2433c0?{'success':_0x5e7d78(0x279)}:{'error':_0x5e7d78(0x251)};}}},generateLoginToken=()=>{const _0x59fc0b=_0x283e80;if(uuid)return jwt[_0x59fc0b(0x29f)]({'username':settings[_0x59fc0b(0x29c)],'clientip':externalip},secure[_0x59fc0b(0x2a5)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x2228b3=_0x283e80;if(uuid)return jwt[_0x2228b3(0x29f)]({'clientip':externalip},secure[_0x2228b3(0x2a5)]+uuid,{'expiresIn':telegramIpApproval[_0x2228b3(0x1e0)]*0x3c});else return![];},telegramIpApproved=()=>{const _0x3bca8a=_0x283e80;let _0x48ae69=![];return telegramIpApproval&&telegramIpApproval[_0x3bca8a(0x1e0)]!='reject'&&(_0x48ae69=telegramIpApproval[_0x3bca8a(0x23f)]==externalip&&new Date()[_0x3bca8a(0x1dc)]()-telegramIpApproval[_0x3bca8a(0x221)]<telegramIpApproval['expiry']*0x3c*0x3e8),_0x48ae69;},telegram2FaApproved=()=>{const _0xf603cf=_0x283e80;let _0x3c31a8=![];return telegram2FaApproval&&telegram2FaApproval[_0xf603cf(0x1e0)]!=_0xf603cf(0x1d4)&&(_0x3c31a8=telegram2FaApproval['clientip']==externalip&&new Date()[_0xf603cf(0x1dc)]()-telegram2FaApproval[_0xf603cf(0x221)]<telegram2FaApproval[_0xf603cf(0x1e0)]*0x3c*0x3e8),_0x3c31a8;},normalizeIP=_0x3da703=>{const _0x8897ae=_0x283e80;let _0x37db2a=null,_0x50f6e3=null;if(ipaddr[_0x8897ae(0x2a9)](_0x3da703)){const _0x4d3a04=ipaddr['parse'](_0x3da703);_0x4d3a04[_0x8897ae(0x1f4)]()===_0x8897ae(0x239)?(_0x4d3a04['isIPv4MappedAddress']()&&(_0x37db2a=_0x4d3a04[_0x8897ae(0x220)]()['toString']()),_0x50f6e3=_0x4d3a04[_0x8897ae(0x1e5)]()):(_0x37db2a=_0x4d3a04[_0x8897ae(0x1e5)](),_0x50f6e3=_0x4d3a04[_0x8897ae(0x202)]()[_0x8897ae(0x1e5)]());}return{'show':_0x37db2a?_0x37db2a:_0x50f6e3,'store':_0x50f6e3};};