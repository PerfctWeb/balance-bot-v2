const _0x3c7834=_0x1d2e;(function(_0x4efc86,_0xbfe963){const _0x509bf8=_0x1d2e,_0x391240=_0x4efc86();while(!![]){try{const _0x3f67dd=parseInt(_0x509bf8(0x128))/0x1+-parseInt(_0x509bf8(0x125))/0x2+parseInt(_0x509bf8(0xf8))/0x3+parseInt(_0x509bf8(0x142))/0x4*(-parseInt(_0x509bf8(0x107))/0x5)+parseInt(_0x509bf8(0x146))/0x6*(parseInt(_0x509bf8(0xa6))/0x7)+parseInt(_0x509bf8(0xc2))/0x8*(-parseInt(_0x509bf8(0x10b))/0x9)+-parseInt(_0x509bf8(0xa9))/0xa;if(_0x3f67dd===_0xbfe963)break;else _0x391240['push'](_0x391240['shift']());}catch(_0x5107d9){_0x391240['push'](_0x391240['shift']());}}}(_0x43c1,0xcfd9e));const _0x247cb4=function(){let _0x549c96=!![];return function(_0x357ab6,_0x1db4f6){const _0x29d5e9=_0x549c96?function(){if(_0x1db4f6){const _0x640673=_0x1db4f6['apply'](_0x357ab6,arguments);return _0x1db4f6=null,_0x640673;}}:function(){};return _0x549c96=![],_0x29d5e9;};}(),_0xb83658=_0x247cb4(this,function(){const _0x3f6498=_0x1d2e;return _0xb83658[_0x3f6498(0xba)]()[_0x3f6498(0x6c)]('(((.+)+)+)+$')[_0x3f6498(0xba)]()[_0x3f6498(0x17f)](_0xb83658)['search']('(((.+)+)+)+$');});_0xb83658();'use strict';process['env'][_0x3c7834(0x1b0)]=0x1;const childProcess=require(_0x3c7834(0x14e)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3c7834(0xf1)),low=require(_0x3c7834(0x136)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x3c7834(0x9c))[_0x3c7834(0x158)],RSA=require(_0x3c7834(0x9c))[_0x3c7834(0x184)],bcrypt=require(_0x3c7834(0xe1)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x3c7834(0x160))[_0x3c7834(0x18e)],googleAnalytics=require(_0x3c7834(0x18b))['default'],ipaddr=require(_0x3c7834(0x180)),argv=require(_0x3c7834(0x123))(process[_0x3c7834(0x6f)][_0x3c7834(0x171)](0x2))[_0x3c7834(0x6f)],PORT=argv[_0x3c7834(0xd0)]||_0x3c7834(0x105),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log'](_0x3c7834(0xd1)+PORT+_0x3c7834(0x178)),process[_0x3c7834(0x17c)](0x1);const HOST=argv[_0x3c7834(0x141)]||null,userID=argv[_0x3c7834(0x114)]||'';let bbpath=_0x3c7834(0xe3);const botfile=_0x3c7834(0xf4),configfile='bb-config.json',settingsfile=_0x3c7834(0x7b),securefile=_0x3c7834(0x1a1);!fs[_0x3c7834(0x151)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+_0x3c7834(0x18f)),configpath=userID?bbpath+_0x3c7834(0xed)+userID+'/':bbpath+_0x3c7834(0xed),configbackuppath=configpath+_0x3c7834(0x82);!fs['existsSync'](configpath)&&fs[_0x3c7834(0x186)](configpath);!fs[_0x3c7834(0x151)](configbackuppath)&&fs[_0x3c7834(0x186)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3c7834(0x15a)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3c7834(0x15a)]({'settings':{'timeshift':0x0}})[_0x3c7834(0x19b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3c7834(0x15a)]({'secure':{},'blacklist':[]})[_0x3c7834(0x19b)]();function _0x1d2e(_0x46db30,_0x2815b2){const _0xa6b55=_0x43c1();return _0x1d2e=function(_0xb83658,_0x247cb4){_0xb83658=_0xb83658-0x67;let _0x43c170=_0xa6b55[_0xb83658];return _0x43c170;},_0x1d2e(_0x46db30,_0x2815b2);}let crypt=new Crypt({'md':_0x3c7834(0x15c),'rsaStandard':_0x3c7834(0x118)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+_0x3c7834(0x138))[_0x3c7834(0x10d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x3c7834(0x8a))[_0x3c7834(0xb5)](app);app['use'](express[_0x3c7834(0x97)](path[_0x3c7834(0x163)](__dirname,bbpath,'build2'))),app[_0x3c7834(0x197)](express[_0x3c7834(0x97)](path['join'](__dirname,bbpath,_0x3c7834(0x16c)))),app[_0x3c7834(0xbc)]('/',function(_0x5b46ef,_0x5a569d){const _0xc6b526=_0x3c7834;_0x5a569d[_0xc6b526(0x80)](path[_0xc6b526(0x163)](__dirname,bbpath,_0xc6b526(0x11a),_0xc6b526(0x67)));}),app[_0x3c7834(0xbc)](_0x3c7834(0x135),function(_0x4fb08a,_0x1b7454){const _0x1de54d=_0x3c7834;_0x1b7454[_0x1de54d(0x80)](path['join'](__dirname,bbpath,_0x1de54d(0x16c),'index.html'));}),app['get']('/:bot/portfolio',(_0x2e1ed1,_0x107090)=>{const _0x4b76ab=_0x3c7834;_0x107090['sendFile'](path[_0x4b76ab(0x163)](__dirname,bbpath,_0x4b76ab(0x16c),_0x4b76ab(0x67)));}),app[_0x3c7834(0xbc)](_0x3c7834(0xbe),(_0x436056,_0x1eeac0)=>{const _0x310429=_0x3c7834;_0x1eeac0[_0x310429(0x80)](path[_0x310429(0x163)](__dirname,bbpath,_0x310429(0x16c),'index.html'));}),app['get']('/:bot/coins',(_0x3a4115,_0x25f356)=>{const _0x3b7fce=_0x3c7834;_0x25f356[_0x3b7fce(0x80)](path['join'](__dirname,bbpath,_0x3b7fce(0x16c),_0x3b7fce(0x67)));}),app['get']('/:bot/history',(_0x5745b7,_0x2522c8)=>{const _0x2fb540=_0x3c7834;_0x2522c8[_0x2fb540(0x80)](path[_0x2fb540(0x163)](__dirname,bbpath,_0x2fb540(0x16c),_0x2fb540(0x67)));}),app[_0x3c7834(0xbc)](_0x3c7834(0x161),(_0x3af43f,_0x59f885)=>{const _0x469623=_0x3c7834;_0x59f885['sendFile'](path[_0x469623(0x163)](__dirname,bbpath,_0x469623(0x16c),_0x469623(0x67)));}),app[_0x3c7834(0xbc)](_0x3c7834(0x10f),(_0x3cc898,_0x414302)=>{const _0x21756c=_0x3c7834;_0x414302['sendFile'](path[_0x21756c(0x163)](__dirname,bbpath,_0x21756c(0x16c),_0x21756c(0x67)));});if(HOST)http[_0x3c7834(0xd7)](PORT,HOST);else http['listen'](PORT);const io=require(_0x3c7834(0xa1))(http,{}),analytics=analyticsLib({'app':_0x3c7834(0x134),'plugins':[googleAnalytics({'trackingId':_0x3c7834(0x176)})]}),TelegramBot=require(_0x3c7834(0x155));let tgBot;if(settings[_0x3c7834(0x13a)]&&settings[_0x3c7834(0x13a)]!=''&&settings[_0x3c7834(0x110)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x6a10c5=_0x3c7834;console[_0x6a10c5(0x17d)](''),console[_0x6a10c5(0x17d)](_0x6a10c5(0x16b)),logging(_0x6a10c5(0xcd)+PORT),console[_0x6a10c5(0x17d)](_0x6a10c5(0x16b));if(config[_0x6a10c5(0x100)]!=0x0)config[_0x6a10c5(0xc6)](_0x40f910=>{const _0x5d1424=_0x6a10c5;if(_0x40f910[_0x5d1424(0x90)]=='enabled'||_0x40f910['status']==_0x5d1424(0xe8))logging(_0x5d1424(0x13e)+_0x40f910['botID']+_0x5d1424(0x113)+_0x40f910[_0x5d1424(0xa4)]),startBot([_0x40f910[_0x5d1424(0xae)],userID],{'cwd':bbpath},function(_0x2db62a){if(_0x2db62a)logging(_0x2db62a);});else(_0x40f910[_0x5d1424(0x90)]==_0x5d1424(0xc3)||_0x40f910[_0x5d1424(0x90)]==_0x5d1424(0x12d))&&logging(_0x5d1424(0xd6)+_0x40f910['botID']+_0x5d1424(0x113)+_0x40f910[_0x5d1424(0xa4)]);});else!newBot&&console[_0x6a10c5(0x17d)](_0x6a10c5(0xa0));if(newBot)addBot();console[_0x6a10c5(0x17d)](_0x6a10c5(0x16b)),console[_0x6a10c5(0x17d)]('');}function startSocket(){const _0x173021=_0x3c7834;io['on'](_0x173021(0x131),_0x2aae0e=>{const _0x32cdf1=_0x173021;let _0x5e8e5f,_0x33c4f4,_0x4c5d34,_0x496c81,_0x204bf3;const _0x17601c=_0x2aae0e['handshake'][_0x32cdf1(0x193)]['referer'];_0x33c4f4=_0x17601c[_0x32cdf1(0x14d)](/bot[0-9]{3}/);if(_0x33c4f4)_0x4c5d34=_0x33c4f4[0x0][_0x32cdf1(0x14d)](/[0-9]{3}/);if(_0x4c5d34)_0x5e8e5f=_0x4c5d34[0x0];else _0x5e8e5f=_0x32cdf1(0x187);const _0x48b661=_0x2aae0e[_0x32cdf1(0x196)][_0x32cdf1(0x106)][_0x32cdf1(0x17b)];if(!_0x48b661)_0x2aae0e['emit'](_0x32cdf1(0x90),{'publicKey':secure[_0x32cdf1(0x149)]});else{_0x496c81=timelyDecrypt(_0x48b661,![]);if(!_0x496c81)logging(_0x32cdf1(0x152));else{_0x204bf3=normalizeIP(_0x2aae0e[_0x32cdf1(0x16e)]['remoteAddress'])['store'];if(!devices[_0x496c81])devices[_0x496c81]={'uuid':_0x496c81,'access':{'token':null}};devices[_0x496c81]['ip']=_0x204bf3;const _0x26e5ed=addClient(_0x2aae0e['id'],_0x496c81,_0x5e8e5f);setAccess(_0x26e5ed),_0x2aae0e['on']('login',_0x115a1e=>{const _0x5845eb=_0x32cdf1,_0x2f1b70=timelyDecrypt(_0x115a1e[_0x5845eb(0x76)]);if(_0x2f1b70){_0x115a1e={'username':_0x115a1e[_0x5845eb(0x14b)],'password':_0x2f1b70},devices[_0x496c81][_0x5845eb(0x147)]=validateCredentials(_0x115a1e,_0x496c81);if(devices[_0x496c81][_0x5845eb(0x147)][_0x5845eb(0x191)]==![]&&devices[_0x496c81][_0x5845eb(0x147)][_0x5845eb(0x109)]==_0x5845eb(0xf3))_0x2aae0e['emit'](_0x5845eb(0x90),{'access':devices[_0x496c81][_0x5845eb(0x147)]}),loginAccess2FA(_0x496c81,_0x204bf3);else{if(devices[_0x496c81][_0x5845eb(0x147)][_0x5845eb(0x191)]==![]&&devices[_0x496c81]['access']['reason']==_0x5845eb(0x133))_0x2aae0e[_0x5845eb(0xc1)]('status',{'access':devices[_0x496c81]['access']});else devices[_0x496c81][_0x5845eb(0x147)][_0x5845eb(0x191)]&&devices[_0x496c81][_0x5845eb(0x147)][_0x5845eb(0x109)]==_0x5845eb(0xa8)&&(getClientsWithUuid(_0x496c81)[_0x5845eb(0xc6)](_0x2de6df=>{setAccess(_0x2de6df);}),setTokenRefresh(_0x496c81),setSessionTimeout(_0x5845eb(0x195),_0x496c81));}}else logging(_0x5845eb(0x8d));}),_0x2aae0e['on'](_0x32cdf1(0x1a5),()=>{resetPassword();}),_0x2aae0e['on'](_0x32cdf1(0xa5),_0x491378=>{removeClient(_0x2aae0e['id']);});}}});}function initClient(_0x5ca4ad){const _0x509d94=_0x3c7834;if(_0x5ca4ad!=_0x509d94(0x187)&&config['apiKey']!=''){if(pid[_0x5ca4ad])pid[_0x5ca4ad]['send']({'function':_0x509d94(0x112),'args':null});}}function getSocket(_0x4f6a16){const _0x493f98=_0x3c7834;return io[_0x493f98(0xc5)][_0x493f98(0xc5)][_0x493f98(0xbc)](_0x4f6a16);}function setAccess(_0xc2f7da){const _0x2aecfa=_0x3c7834,_0x5c4fb8=getSocket(_0xc2f7da['id']),_0x2b1100=_0xc2f7da['uuid'],_0x23c9d0=_0xc2f7da[_0x2aecfa(0x17e)];devices[_0x2b1100]['access']=validateAccess(devices[_0x2b1100][_0x2aecfa(0x147)]['token'],_0x2b1100),_0x5c4fb8['join'](_0x2b1100);if(devices[_0x2b1100][_0x2aecfa(0x147)]['allow']){_0x5c4fb8[_0x2aecfa(0x163)](_0x23c9d0);if(_0x23c9d0=='botmanager')initializeSocketBotManager(_0x5c4fb8);else initializeSocketBot(_0x5c4fb8);initClient(_0x23c9d0);}devices[_0x2b1100][_0x2aecfa(0x147)][_0x2aecfa(0x78)]&&devices[_0x2b1100][_0x2aecfa(0x147)]['reason']==_0x2aecfa(0x177)&&setSessionTimeout(_0x2aecfa(0x165),_0x2b1100),devices[_0x2b1100][_0x2aecfa(0x147)][_0x2aecfa(0x78)]&&devices[_0x2b1100][_0x2aecfa(0x147)][_0x2aecfa(0x109)]==_0x2aecfa(0xb6)&&setSessionTimeout(_0x2aecfa(0x195),_0x2b1100),_0x5c4fb8[_0x2aecfa(0xc1)]('status',{'status':_0xc2f7da[_0x2aecfa(0x122)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2b1100][_0x2aecfa(0x147)],'externalip':devices[_0x2b1100]['ip'],'publicKey':secure[_0x2aecfa(0x149)]}),devices[_0x2b1100][_0x2aecfa(0x147)]['allow']==![]&&devices[_0x2b1100][_0x2aecfa(0x147)][_0x2aecfa(0x109)]==_0x2aecfa(0x7f)&&temporaryAccess2FA(_0x2b1100,devices[_0x2b1100]['ip']);}function setSessionTimeout(_0x291706,_0x4fb81a){const _0x3307be=_0x3c7834;let _0x268e34;if(_0x291706==_0x3307be(0x195))_0x268e34=loginExpiry*0x3c*0x3e8;else _0x268e34=devices[_0x4fb81a][_0x3307be(0x18c)][_0x3307be(0x148)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x4fb81a][_0x3307be(0x18c)][_0x3307be(0xeb)]);if(devices[_0x4fb81a][_0x3307be(0x115)])clearTimeout(devices[_0x4fb81a]['pidExpireLogin']);devices[_0x4fb81a][_0x3307be(0x115)]=setTimeout(()=>{const _0x43acbc=_0x3307be;if(devices[_0x4fb81a][_0x43acbc(0x1a8)])clearTimeout(devices[_0x4fb81a][_0x43acbc(0x1a8)]);removeSocketListeners(_0x4fb81a),addBlacklist(_0x4fb81a),devices[_0x4fb81a]['telegramIpApproval']=null,devices[_0x4fb81a][_0x43acbc(0x1ab)]=null,devices[_0x4fb81a][_0x43acbc(0x147)]['token']=null,devices[_0x4fb81a][_0x43acbc(0x147)]=validateAccess(devices[_0x4fb81a]['access']['token'],_0x4fb81a),!(devices[_0x4fb81a]['access'][_0x43acbc(0x191)]&&devices[_0x4fb81a]['access'][_0x43acbc(0x109)]==_0x43acbc(0xf9))&&(_0x291706==_0x43acbc(0x195)?io['to'](_0x4fb81a)[_0x43acbc(0xc1)]('status',{'access':{'allow':![],'reason':_0x43acbc(0x81),'token':null}}):io['to'](_0x4fb81a)[_0x43acbc(0xc1)](_0x43acbc(0x90),{'access':{'allow':![],'reason':_0x43acbc(0x16f),'token':null}})),devices[_0x4fb81a][_0x43acbc(0x147)][_0x43acbc(0x78)]=null;},_0x268e34);}function setTokenRefresh(_0x2f202f){const _0x2aea2b=_0x3c7834;if(devices[_0x2f202f][_0x2aea2b(0x1a8)])clearTimeout(devices[_0x2f202f][_0x2aea2b(0x1a8)]);devices[_0x2f202f][_0x2aea2b(0x1a8)]=setTimeout(()=>{const _0x169131=_0x2aea2b;getClientsWithUuid(_0x2f202f)[_0x169131(0x100)]!=0x0?(devices[_0x2f202f][_0x169131(0x147)]=refreshToken(_0x2f202f),io['to'](_0x2f202f)[_0x169131(0xc1)]('status',{'status':_0x169131(0xd2),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2f202f][_0x169131(0x147)],'externalip':devices[_0x2f202f]['ip'],'publicKey':secure[_0x169131(0x149)]}),setTokenRefresh(_0x2f202f)):clearTimeout(devices[_0x2f202f][_0x169131(0x1a8)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x19d819){const _0x2463b9=_0x3c7834,_0x3400f6=getClient(_0x19d819['id'])[_0x2463b9(0x183)];_0x19d819[_0x2463b9(0xc1)](_0x2463b9(0x181),config),_0x19d819['emit']('settings',cleanSettings()),_0x19d819['on'](_0x2463b9(0x169),_0x58d1b0=>{const _0x236d7e=_0x2463b9;if(validateAccess(_0x58d1b0,_0x3400f6)[_0x236d7e(0x191)])addBot();else logging(_0x236d7e(0xdb));}),_0x19d819['on']('update-bot',(_0x357b0a,_0x19f11f)=>{const _0x4c455b=_0x2463b9;if(validateAccess(_0x19f11f,_0x3400f6)['allow'])toggleBot(_0x357b0a[_0x4c455b(0xae)],_0x357b0a[_0x4c455b(0x90)],_0x357b0a[_0x4c455b(0x88)]);else logging(_0x4c455b(0x162));}),_0x19d819['on'](_0x2463b9(0x102),(_0x4e31e6,_0x1e334d)=>{const _0x4493ea=_0x2463b9;if(validateAccess(_0x1e334d,_0x3400f6)[_0x4493ea(0x191)])deleteBot(_0x4e31e6);else logging(_0x4493ea(0x167));}),_0x19d819['on'](_0x2463b9(0x121),(_0x44afdf,_0x5f3a23)=>{if(validateAccess(_0x5f3a23,_0x3400f6)['allow'])storeSettings(_0x44afdf,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x19d819['on'](_0x2463b9(0x130),_0x18639f=>{const _0x2a423a=_0x2463b9;if(validateAccess(_0x18639f,_0x3400f6)[_0x2a423a(0x191)]){if(devices[_0x3400f6][_0x2a423a(0x1a8)])clearTimeout(devices[_0x3400f6][_0x2a423a(0x1a8)]);if(devices[_0x3400f6][_0x2a423a(0x115)])clearTimeout(devices[_0x3400f6][_0x2a423a(0x115)]);removeSocketListeners(getClient(_0x19d819['id'])[_0x2a423a(0x183)]),addBlacklist(_0x3400f6),devices[_0x3400f6]['telegramIpApproval']=null,devices[_0x3400f6]['telegram2FaApproval']=null,devices[_0x3400f6][_0x2a423a(0x147)]['token']=null,io['to'](getClient(_0x19d819['id'])[_0x2a423a(0x183)])[_0x2a423a(0xc1)](_0x2a423a(0x90),{'access':{'allow':![],'reason':_0x2a423a(0xcc),'token':null}});}else logging(_0x2a423a(0x10e));});}function initializeSocketBot(_0x4b25e5){const _0x255b92=_0x3c7834,_0xd9df74=getClient(_0x4b25e5['id'])[_0x255b92(0x17e)],_0x4e7067=getClient(_0x4b25e5['id'])[_0x255b92(0x183)];_0x4b25e5['on'](_0x255b92(0x198),(_0x3185d1,_0x321ce3)=>{const _0x5c7f14=_0x255b92;if(validateAccess(_0x321ce3,_0x4e7067)['allow']){if(pid[_0xd9df74])pid[_0xd9df74][_0x5c7f14(0x11f)]({'function':_0x5c7f14(0xda),'args':_0x3185d1});}else logging(_0x5c7f14(0x1a9));}),_0x4b25e5['on'](_0x255b92(0x10c),(_0x3052c8,_0x5e5bb7)=>{const _0x32113a=_0x255b92;if(validateAccess(_0x5e5bb7,_0x4e7067)[_0x32113a(0x191)]){if(pid[_0xd9df74])pid[_0xd9df74][_0x32113a(0x11f)]({'function':_0x32113a(0x86),'args':_0x3052c8});}else logging(_0x32113a(0xf6));}),_0x4b25e5['on'](_0x255b92(0xac),(_0x57cfa1,_0x2da142)=>{const _0x4965de=_0x255b92;if(validateAccess(_0x2da142,_0x4e7067)[_0x4965de(0x191)]){if(pid[_0xd9df74])pid[_0xd9df74][_0x4965de(0x11f)]({'function':'storeConfiguration','args':_0x57cfa1});}else logging(_0x4965de(0x1af));}),_0x4b25e5['on'](_0x255b92(0xab),(_0x22071e,_0x524c7e)=>{const _0x2f9403=_0x255b92;if(validateAccess(_0x524c7e,_0x4e7067)[_0x2f9403(0x191)]){if(pid[_0xd9df74])pid[_0xd9df74][_0x2f9403(0x11f)]({'function':'storeHeadless','args':_0x22071e});}else logging(_0x2f9403(0x120));}),_0x4b25e5['on'](_0x255b92(0x111),_0x160464=>{const _0x3d1ed0=_0x255b92;if(validateAccess(_0x160464,_0x4e7067)['allow']){if(pid[_0xd9df74])pid[_0xd9df74][_0x3d1ed0(0x11f)]({'function':_0x3d1ed0(0x9a),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4b25e5['on'](_0x255b92(0xb7),(_0x2c5107,_0x4fb4da)=>{const _0x2a74ea=_0x255b92;if(validateAccess(_0x4fb4da,_0x4e7067)[_0x2a74ea(0x191)]){if(pid[_0xd9df74])pid[_0xd9df74][_0x2a74ea(0x11f)]({'function':'placeOrder','args':_0x2c5107});}else logging(_0x2a74ea(0xb1));}),_0x4b25e5['on'](_0x255b92(0xaa),_0x495a1b=>{const _0x38c569=_0x255b92;if(validateAccess(_0x495a1b,_0x4e7067)[_0x38c569(0x191)]){if(pid[_0xd9df74])pid[_0xd9df74][_0x38c569(0x11f)]({'function':_0x38c569(0xa2),'args':null});}else logging(_0x38c569(0xe4));}),_0x4b25e5['on'](_0x255b92(0x130),_0x3766a6=>{const _0x48b013=_0x255b92;if(validateAccess(_0x3766a6,_0x4e7067)['allow']){if(devices[_0x4e7067][_0x48b013(0x1a8)])clearTimeout(devices[_0x4e7067]['pidRefreshToken']);if(devices[_0x4e7067][_0x48b013(0x115)])clearTimeout(devices[_0x4e7067]['pidExpireLogin']);removeSocketListeners(getClient(_0x4b25e5['id'])[_0x48b013(0x183)]),addBlacklist(_0x4e7067),devices[_0x4e7067][_0x48b013(0x18c)]=null,devices[_0x4e7067][_0x48b013(0x1ab)]=null,devices[_0x4e7067]['access'][_0x48b013(0x78)]=null,io['to'](getClient(_0x4b25e5['id'])[_0x48b013(0x183)])['emit'](_0x48b013(0x90),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x48b013(0x10e));});}function removeSocketListeners(_0x6bdb62){const _0x3cb057=_0x3c7834;getClientsWithUuid(_0x6bdb62)[_0x3cb057(0xc6)](_0x563d61=>{const _0x47c80a=_0x3cb057;getSocket(_0x563d61['id'])[_0x47c80a(0x137)]();});}function cleanSettings(){const _0xec89dd=_0x3c7834;let _0x202850=settings;return settings[_0xec89dd(0x13a)]&&settings[_0xec89dd(0x13a)]!=''&&(_0x202850={..._0x202850,'telegramToken':_0xec89dd(0x157)}),settings['bbPassword']&&settings[_0xec89dd(0x9d)]!=''&&(_0x202850={..._0x202850,'bbPassword':_0xec89dd(0x157)}),_0x202850;}function startBot(_0x502940,_0xf86a38,_0x375654){const _0x580d05=_0x3c7834;let _0x288416=![];const _0x359b21=_0x502940[0x0];_0xf86a38={..._0xf86a38,'stdio':[_0x580d05(0x164),_0x580d05(0x164),'inherit',_0x580d05(0x104)]},pid[_0x359b21]=childProcess[_0x580d05(0x140)](botfile,_0x502940,_0xf86a38),pid[_0x359b21]['on'](_0x580d05(0xb3),_0x3cd474=>{const _0x48ba5b=_0x580d05;switch(Object['keys'](_0x3cd474)[0x0]){case _0x48ba5b(0xa4):updateBotName(_0x359b21,_0x3cd474['botname']);break;case _0x48ba5b(0x90):updateStatus(_0x359b21,_0x3cd474[_0x48ba5b(0x90)]);break;case'live':updateLive(_0x359b21,_0x3cd474[_0x48ba5b(0x88)]);break;case _0x48ba5b(0x192):updateLive(_0x359b21,_0x3cd474[_0x48ba5b(0x192)]),io['to'](_0x359b21)[_0x48ba5b(0xc1)](_0x48ba5b(0x90),{'access':{'allow':![],'reason':_0x48ba5b(0x8e),'token':null}});break;case'stop':_0x3cd474['stop']==_0x48ba5b(0xa7)&&stopBot(_0x359b21);_0x3cd474[_0x48ba5b(0x12c)]==_0x48ba5b(0x173)&&toggleBot(_0x359b21,_0x48ba5b(0xc3),_0x48ba5b(0x92));break;case _0x48ba5b(0xfb):sendTelegram(_0x359b21,_0x3cd474[_0x48ba5b(0xfb)]);break;case _0x48ba5b(0xe7):io['to'](_0x359b21)[_0x48ba5b(0xc1)](_0x3cd474['function'],_0x3cd474[_0x48ba5b(0xc9)]);break;}}),pid[_0x359b21]['on'](_0x580d05(0x12a),function(_0x26efaa){if(_0x288416)return;_0x288416=!![],_0x375654(_0x26efaa);}),pid[_0x359b21]['on'](_0x580d05(0x17c),function(_0x4de2fa){const _0x17350b=_0x580d05;if(_0x288416)return;_0x288416=!![],_0x375654(null);const _0x274e6e=dbConfig[_0x17350b(0xbc)](_0x17350b(0x181))[_0x17350b(0x16a)]({'botID':_0x359b21})['value']();_0x274e6e&&(_0x274e6e[_0x17350b(0x90)]=='enabled'||_0x274e6e[_0x17350b(0x90)]==_0x17350b(0xe8))&&(updateLive(_0x359b21,'stopped'),logging(_0x17350b(0x15d)+_0x359b21),startBot([_0x359b21,userID],{'cwd':bbpath},function(_0x1791e3){if(_0x1791e3)logging(_0x1791e3);}));});}function stopBot(_0x373766){const _0x363310=_0x3c7834;getClientsWithBotID(_0x373766)[_0x363310(0xc6)](_0x4f37bf=>{getSocket(_0x4f37bf['id'])['disconnect'](!![]),removeClient(_0x4f37bf['id']);});if(pid[_0x373766])pid[_0x373766][_0x363310(0x173)]();}function addBot(){const _0x35e154=_0x3c7834;let _0xeb4fc;for(let _0x43b9bf=0x1;_0x43b9bf<0x3e9;_0x43b9bf++){_0xeb4fc=_0x43b9bf['toString']()[_0x35e154(0xcb)](0x3,'0');let _0x15d7e3=config[_0x35e154(0x16a)](_0x167657=>_0x167657['botID']==_0xeb4fc);if(!_0x15d7e3)break;}if(_0xeb4fc===_0x35e154(0x8f)){logging(_0x35e154(0x83));return;}logging(_0x35e154(0x99)+_0xeb4fc),dbConfig[_0x35e154(0xbc)]('bots')[_0x35e154(0x69)]({'botID':_0xeb4fc,'botname':_0x35e154(0x103)+_0xeb4fc,'status':'new','live':''})[_0x35e154(0x19b)](),startBot([_0xeb4fc,userID],{'cwd':bbpath},function(_0x495c7d){if(_0x495c7d)logging(_0x495c7d);}),config=getConfiguration(),io['to']('botmanager')[_0x35e154(0xc1)]('bots',config);}function deleteBot(_0x33f33a){const _0x20af4c=_0x3c7834;getClientsWithBotID(_0x33f33a)[_0x20af4c(0xc6)](_0x521c7f=>{getSocket(_0x521c7f['id'])['disconnect'](!![]),removeClient(_0x521c7f['id']);}),dbConfig['get']('bots')[_0x20af4c(0x9e)]({'botID':_0x33f33a})[_0x20af4c(0x19b)](),logging(_0x20af4c(0xf5)+_0x33f33a),stopBot(_0x33f33a);try{fs['unlinkSync'](path['join'](configpath,_0x20af4c(0x18d)+_0x33f33a+_0x20af4c(0x6a))),fs[_0x20af4c(0x19a)](path[_0x20af4c(0x163)](configpath,_0x20af4c(0x18d)+_0x33f33a+_0x20af4c(0x79))),fs[_0x20af4c(0x19a)](path['join'](configpath,_0x20af4c(0x18d)+_0x33f33a+_0x20af4c(0x11b))),fs[_0x20af4c(0x19a)](path[_0x20af4c(0x163)](configpath,'bot-'+_0x33f33a+_0x20af4c(0x19f)));}catch(_0x1d8709){if(_0x1d8709)logging(_0x20af4c(0xc7),_0x1d8709);}config=getConfiguration(),io['to'](_0x20af4c(0x187))[_0x20af4c(0xc1)](_0x20af4c(0x181),config);}function toggleBot(_0x59b7d1,_0x30dd09,_0x4950c0){const _0x590646=_0x3c7834;dbConfig[_0x590646(0xbc)](_0x590646(0x181))[_0x590646(0x16a)]({'botID':_0x59b7d1})[_0x590646(0x117)]({'status':_0x30dd09})[_0x590646(0x117)]({'live':_0x4950c0})['write']();if(_0x30dd09==_0x590646(0x182)||_0x30dd09=='new')logging(_0x590646(0x170)+_0x59b7d1),startBot([_0x59b7d1,userID],{'cwd':bbpath},function(_0x462547){if(_0x462547)logging(_0x462547);});else(_0x30dd09==_0x590646(0xc3)||_0x30dd09==_0x590646(0x12d))&&(logging(_0x590646(0x199)+_0x59b7d1),stopBot(_0x59b7d1));config=getConfiguration(),io['to'](_0x590646(0x187))[_0x590646(0xc1)](_0x590646(0x181),config);}function toggleStatus(_0x322997){const _0x5337ae=_0x3c7834;let _0x1d1aba=dbConfig[_0x5337ae(0xbc)](_0x5337ae(0x181))[_0x5337ae(0x16a)]({'botID':_0x322997})[_0x5337ae(0xe2)](),_0x4cbaa8;if(_0x1d1aba['status']===_0x5337ae(0x182))_0x4cbaa8=_0x5337ae(0xc3);else{if(_0x1d1aba[_0x5337ae(0x90)]==='new')_0x4cbaa8=_0x5337ae(0x12d);else{if(_0x1d1aba['status']==='new-disabled')_0x4cbaa8=_0x5337ae(0xe8);else{if(_0x1d1aba['status']===_0x5337ae(0xc3))_0x4cbaa8='enabled';}}}return _0x4cbaa8;}function updateStatus(_0xb1db6e,_0x5267e8){const _0x30411e=_0x3c7834;dbConfig['get'](_0x30411e(0x181))[_0x30411e(0x16a)]({'botID':_0xb1db6e})['assign']({'status':_0x5267e8})[_0x30411e(0x19b)](),config=getConfiguration(),io['to'](_0x30411e(0x187))[_0x30411e(0xc1)]('bots',config);}function updateLive(_0x5caddb,_0x2f0fc2){const _0x2a337d=_0x3c7834;dbConfig[_0x2a337d(0xbc)]('bots')['find']({'botID':_0x5caddb})[_0x2a337d(0x117)]({'live':_0x2f0fc2})[_0x2a337d(0x19b)](),config=getConfiguration(),io['to'](_0x2a337d(0x187))[_0x2a337d(0xc1)](_0x2a337d(0x181),config);}function updateBotName(_0x525400,_0x3099f7){const _0x26b334=_0x3c7834;dbConfig[_0x26b334(0xbc)](_0x26b334(0x181))['find']({'botID':_0x525400})[_0x26b334(0x117)]({'botname':_0x3099f7})[_0x26b334(0x19b)](),config=getConfiguration(),io['to'](_0x26b334(0x187))[_0x26b334(0xc1)](_0x26b334(0x181),config);}function telegramError(_0x2ed1e3){const _0x493e8d=_0x3c7834;console[_0x493e8d(0x17d)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x449b55){const _0x134e28=_0x3c7834;if(_0x449b55[_0x134e28(0x9f)][_0x134e28(0x14b)]!=settings['telegramUsername']&&'@'+_0x449b55['from']['username']!=settings['telegramUsername'])return tgBot[_0x134e28(0x13d)](_0x449b55[_0x134e28(0xec)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x134e28(0x7a)})[_0x134e28(0xfa)](_0x5eab1e=>{telegramError(_0x5eab1e);}),![];return!![];}async function initTelegram(){const _0xcaa04a=_0x3c7834;if(tgBot)tgBot[_0xcaa04a(0xce)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xcaa04a(0x13a)],{'polling':!![]});let _0x38aec2='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x38aec2+='\x0a',_0x38aec2+=_0xcaa04a(0x156),_0x38aec2+=_0xcaa04a(0x96),_0x38aec2+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x38aec2+=_0xcaa04a(0x77),_0x38aec2+=_0xcaa04a(0x166),_0x38aec2+=_0xcaa04a(0x11c),_0x38aec2+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x38aec2+=_0xcaa04a(0x132);let _0x222c79='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x222c79+='\x0a',_0x222c79+=_0x38aec2,tgBot['onText'](/\/start/,_0x5a3e49=>{const _0xd87d00=_0xcaa04a;if(!validateTelegram(_0x5a3e49))return;if(settings[_0xd87d00(0x150)]!=_0x5a3e49[_0xd87d00(0xec)]['id'])updateSetting('telegramChatId',_0x5a3e49[_0xd87d00(0xec)]['id']);updateSetting(_0xd87d00(0x15f),!![]),tgBot[_0xd87d00(0x13d)](_0x5a3e49['chat']['id'],_0x222c79)[_0xd87d00(0xfa)](_0x56ad52=>{telegramError(_0x56ad52);});}),tgBot[_0xcaa04a(0xd9)](/\/enable/,_0x15bb2d=>{const _0x373087=_0xcaa04a;if(!validateTelegram(_0x15bb2d))return;if(settings[_0x373087(0x150)]!=_0x15bb2d[_0x373087(0xec)]['id'])updateSetting(_0x373087(0x150),_0x15bb2d[_0x373087(0xec)]['id']);updateSetting(_0x373087(0x15f),!![]),tgBot[_0x373087(0x13d)](_0x15bb2d[_0x373087(0xec)]['id'],_0x373087(0x12b))[_0x373087(0xfa)](_0x38787f=>{telegramError(_0x38787f);});}),tgBot['onText'](/\/config/,async _0x38b6c5=>{const _0x315964=_0xcaa04a;if(!validateTelegram(_0x38b6c5))return;tgBot['removeListener'](_0x315964(0x12f)),tgBot[_0x315964(0x13d)](_0x38b6c5[_0x315964(0xec)]['id'],_0x315964(0xb0),{'reply_markup':{'inline_keyboard':[[{'text':_0x315964(0xca),'callback_data':'orders'},{'text':_0x315964(0x15e),'callback_data':_0x315964(0x1ad)},{'text':_0x315964(0xdf),'callback_data':_0x315964(0xdd)}]]}})['catch'](_0x31ae9e=>{telegramError(_0x31ae9e);}),tgBot['on'](_0x315964(0x12f),async _0x38de60=>{const _0x5b28af=_0x315964,_0x41c6c3=_0x38de60[_0x5b28af(0x153)],_0x3f5c50=_0x38de60['message'];tgBot['answerCallbackQuery'](_0x38de60['id'])[_0x5b28af(0x12e)](async()=>{const _0xf7e9e6=_0x5b28af;_0x41c6c3=='orders'&&(updateSetting(_0xf7e9e6(0x14f),'orders'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3f5c50[_0xf7e9e6(0xec)]['id'],_0xf7e9e6(0x14c))['catch'](_0x13d00e=>{telegramError(_0x13d00e);}));_0x41c6c3==_0xf7e9e6(0x1ad)&&(updateSetting(_0xf7e9e6(0x14f),_0xf7e9e6(0x1ad)),updateSetting('telegramEnabled',!![]),await tgBot[_0xf7e9e6(0x13d)](_0x3f5c50[_0xf7e9e6(0xec)]['id'],_0xf7e9e6(0x68))[_0xf7e9e6(0xfa)](_0x174582=>{telegramError(_0x174582);}));_0x41c6c3==_0xf7e9e6(0xdd)&&(updateSetting('telegramEvents',_0xf7e9e6(0xdd)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3f5c50[_0xf7e9e6(0xec)]['id'],_0xf7e9e6(0xea))[_0xf7e9e6(0xfa)](_0xafa1ac=>{telegramError(_0xafa1ac);}));if(!settings[_0xf7e9e6(0x150)])tgBot[_0xf7e9e6(0x13d)](_0x3f5c50[_0xf7e9e6(0xec)]['id'],_0xf7e9e6(0xbf))[_0xf7e9e6(0xfa)](_0x2deb94=>{telegramError(_0x2deb94);});}),tgBot[_0x5b28af(0x19c)]('callback_query');});}),tgBot[_0xcaa04a(0xd9)](/\/status/,_0x5a4162=>{const _0xd95c6a=_0xcaa04a;if(!validateTelegram(_0x5a4162))return;let _0xa89c2d=_0xd95c6a(0x6b);config['forEach'](_0x538fa3=>{const _0x586ac9=_0xd95c6a;_0xa89c2d+='Bot\x20'+_0x538fa3['botID']+'\x20|\x20'+_0x538fa3[_0x586ac9(0xa4)]+':\x20'+_0x538fa3[_0x586ac9(0x90)]+_0x586ac9(0x145)+_0x538fa3[_0x586ac9(0x88)]+'\x0a';}),_0xa89c2d+='\x0a',_0xa89c2d+='<b>Telegram\x20bot\x20status:</b>\x0a',_0xa89c2d+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0xa89c2d+=settings[_0xd95c6a(0x15f)]?settings['telegramEvents']==_0xd95c6a(0xdd)?_0xd95c6a(0xf7):_0xd95c6a(0x95)+settings[_0xd95c6a(0x14f)]+_0xd95c6a(0x9b):'',tgBot[_0xd95c6a(0x13d)](_0x5a4162[_0xd95c6a(0xec)]['id'],_0xa89c2d,{'parse_mode':_0xd95c6a(0x7a)})[_0xd95c6a(0xfa)](_0x1cf8b4=>{telegramError(_0x1cf8b4);});}),tgBot[_0xcaa04a(0xd9)](/\/restart/,_0x2ad17c=>{const _0x28c587=_0xcaa04a;if(!validateTelegram(_0x2ad17c))return;tgBot[_0x28c587(0x19c)](_0x28c587(0x12f));const _0x13b9bb=getEnabledBots();if(_0x13b9bb[_0x28c587(0x100)]==0x0)tgBot[_0x28c587(0x13d)](_0x2ad17c['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x28c587(0xfa)](_0x1af0fc=>{telegramError(_0x1af0fc);});else{if(_0x13b9bb[_0x28c587(0x100)]>0x1)_0x13b9bb[_0x28c587(0x69)]({'botID':_0x28c587(0xdd)});let _0x17fa53=[],_0x548ee9=[];const _0x4a33df=_0x13b9bb[_0x28c587(0x100)]%0x4==0x0||_0x13b9bb['length']%0x4==0x3||_0x13b9bb['length']%0x3==0x1?0x4:0x3;let _0x4f8464=0x0;_0x13b9bb[_0x28c587(0xc6)]((_0x19a98e,_0x25bb2d)=>{const _0x2596b4=_0x28c587;if(_0x25bb2d%_0x4a33df==0x0)_0x548ee9=[];_0x548ee9[_0x2596b4(0x69)]({'text':_0x19a98e[_0x2596b4(0xae)]==_0x2596b4(0xdd)?_0x2596b4(0x8b):_0x2596b4(0x103)+_0x19a98e[_0x2596b4(0xae)],'callback_data':_0x19a98e[_0x2596b4(0xae)]}),_0x25bb2d%_0x4a33df==0x0&&(_0x17fa53[_0x4f8464]=_0x548ee9,_0x4f8464++);}),tgBot[_0x28c587(0x13d)](_0x2ad17c[_0x28c587(0xec)]['id'],_0x28c587(0x126),{'reply_markup':{'inline_keyboard':_0x17fa53}})[_0x28c587(0xfa)](_0x5500a4=>{telegramError(_0x5500a4);}),tgBot['on'](_0x28c587(0x12f),async _0x406daf=>{const _0xdf6e80=_0x28c587,_0x154cfa=_0x406daf[_0xdf6e80(0x153)],_0x159c77=_0x406daf[_0xdf6e80(0xb3)];tgBot[_0xdf6e80(0xd3)](_0x406daf['id'])[_0xdf6e80(0x12e)](async()=>{const _0x825907=_0xdf6e80;if(_0x154cfa==_0x825907(0xdd)){if(settings[_0x825907(0x14f)]=='orders')tgBot['sendMessage'](_0x159c77[_0x825907(0xec)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x825907(0xfa)](_0x11b350=>{telegramError(_0x11b350);});config['forEach'](_0x4ef01a=>{const _0x178ae4=_0x825907;stopBot(_0x4ef01a[_0x178ae4(0xae)]);});}else{if(settings['telegramEvents']==_0x825907(0x101))tgBot['sendMessage'](_0x159c77[_0x825907(0xec)]['id'],_0x825907(0x17a)+_0x154cfa)[_0x825907(0xfa)](_0x5c5b9c=>{telegramError(_0x5c5b9c);});stopBot(_0x154cfa);}}),tgBot[_0xdf6e80(0x19c)]('callback_query');});}}),tgBot[_0xcaa04a(0xd9)](/\/on/,_0x28cae3=>{const _0x48d280=_0xcaa04a;if(!validateTelegram(_0x28cae3))return;tgBot[_0x48d280(0x19c)](_0x48d280(0x12f));const _0x5b048b=getDisabledBots();if(_0x5b048b[_0x48d280(0x100)]==0x0)tgBot['sendMessage'](_0x28cae3[_0x48d280(0xec)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x43cb95=>{telegramError(_0x43cb95);});else{if(_0x5b048b[_0x48d280(0x100)]>0x1)_0x5b048b['push']({'botID':_0x48d280(0xdd)});let _0x29c936=[],_0x299049=[];const _0x3f3c78=_0x5b048b[_0x48d280(0x100)]%0x4==0x0||_0x5b048b[_0x48d280(0x100)]%0x4==0x3||_0x5b048b[_0x48d280(0x100)]%0x3==0x1?0x4:0x3;let _0x9f34a2=0x0;_0x5b048b['forEach']((_0x1cc255,_0x2755cf)=>{const _0x3d253f=_0x48d280;if(_0x2755cf%_0x3f3c78==0x0)_0x299049=[];_0x299049[_0x3d253f(0x69)]({'text':_0x1cc255['botID']=='all'?_0x3d253f(0x8b):_0x3d253f(0x103)+_0x1cc255[_0x3d253f(0xae)],'callback_data':_0x1cc255['botID']}),_0x2755cf%_0x3f3c78==0x0&&(_0x29c936[_0x9f34a2]=_0x299049,_0x9f34a2++);}),tgBot['sendMessage'](_0x28cae3[_0x48d280(0xec)]['id'],_0x48d280(0x7d),{'reply_markup':{'inline_keyboard':_0x29c936}})[_0x48d280(0xfa)](_0x10b8c9=>{telegramError(_0x10b8c9);}),tgBot['on'](_0x48d280(0x12f),async _0x28d8c0=>{const _0x1a1718=_0x48d280,_0x1edda2=_0x28d8c0['data'],_0x222951=_0x28d8c0[_0x1a1718(0xb3)];tgBot[_0x1a1718(0xd3)](_0x28d8c0['id'])[_0x1a1718(0x12e)](async()=>{const _0x4ea83b=_0x1a1718;if(_0x1edda2=='all'){if(settings[_0x4ea83b(0x14f)]==_0x4ea83b(0x101))tgBot[_0x4ea83b(0x13d)](_0x222951[_0x4ea83b(0xec)]['id'],_0x4ea83b(0x1a7))[_0x4ea83b(0xfa)](_0x4bafe8=>{telegramError(_0x4bafe8);});_0x5b048b[_0x4ea83b(0xc6)](_0x2ba27c=>{const _0x2547d1=_0x4ea83b;if(_0x2ba27c[_0x2547d1(0xae)]!=_0x2547d1(0xdd))toggleBot(_0x2ba27c[_0x2547d1(0xae)],toggleStatus(_0x2ba27c[_0x2547d1(0xae)]),_0x2547d1(0x92));});}else{if(settings[_0x4ea83b(0x14f)]=='orders')tgBot['sendMessage'](_0x222951[_0x4ea83b(0xec)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1edda2)[_0x4ea83b(0xfa)](_0x46670d=>{telegramError(_0x46670d);});toggleBot(_0x1edda2,toggleStatus(_0x1edda2),_0x4ea83b(0x92));}}),tgBot[_0x1a1718(0x19c)]('callback_query');});}}),tgBot[_0xcaa04a(0xd9)](/\/off/,_0x3c0ca7=>{const _0x477c33=_0xcaa04a;if(!validateTelegram(_0x3c0ca7))return;tgBot[_0x477c33(0x19c)](_0x477c33(0x12f));const _0x125e0d=getEnabledBots();if(_0x125e0d['length']==0x0)tgBot[_0x477c33(0x13d)](_0x3c0ca7[_0x477c33(0xec)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x477c33(0xfa)](_0x26aeb3=>{telegramError(_0x26aeb3);});else{if(_0x125e0d[_0x477c33(0x100)]>0x1)_0x125e0d[_0x477c33(0x69)]({'botID':_0x477c33(0xdd)});let _0x2353f1=[],_0x40adc8=[];const _0x1abc86=_0x125e0d[_0x477c33(0x100)]%0x4==0x0||_0x125e0d[_0x477c33(0x100)]%0x4==0x3||_0x125e0d[_0x477c33(0x100)]%0x3==0x1?0x4:0x3;let _0x435504=0x0;_0x125e0d['forEach']((_0x41f4cd,_0x1d6fa0)=>{const _0x5b00f2=_0x477c33;if(_0x1d6fa0%_0x1abc86==0x0)_0x40adc8=[];_0x40adc8[_0x5b00f2(0x69)]({'text':_0x41f4cd[_0x5b00f2(0xae)]==_0x5b00f2(0xdd)?'All\x20bots':_0x5b00f2(0x103)+_0x41f4cd['botID'],'callback_data':_0x41f4cd['botID']}),_0x1d6fa0%_0x1abc86==0x0&&(_0x2353f1[_0x435504]=_0x40adc8,_0x435504++);}),tgBot[_0x477c33(0x13d)](_0x3c0ca7[_0x477c33(0xec)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2353f1}})[_0x477c33(0xfa)](_0x1d8141=>{telegramError(_0x1d8141);}),tgBot['on'](_0x477c33(0x12f),async _0x44b0f4=>{const _0x197dcf=_0x477c33,_0x1ede63=_0x44b0f4[_0x197dcf(0x153)],_0x25beea=_0x44b0f4['message'];tgBot[_0x197dcf(0xd3)](_0x44b0f4['id'])[_0x197dcf(0x12e)](async()=>{const _0x405f65=_0x197dcf;if(_0x1ede63=='all'){if(settings[_0x405f65(0x14f)]==_0x405f65(0x101))tgBot[_0x405f65(0x13d)](_0x25beea['chat']['id'],_0x405f65(0x11e))[_0x405f65(0xfa)](_0x1bdd45=>{telegramError(_0x1bdd45);});_0x125e0d['forEach'](_0x511434=>{const _0x5269df=_0x405f65;if(_0x511434[_0x5269df(0xae)]!='all')toggleBot(_0x511434[_0x5269df(0xae)],toggleStatus(_0x511434[_0x5269df(0xae)]),_0x5269df(0x92));});}else{if(settings[_0x405f65(0x14f)]==_0x405f65(0x101))tgBot[_0x405f65(0x13d)](_0x25beea['chat']['id'],_0x405f65(0x85)+_0x1ede63)[_0x405f65(0xfa)](_0x4b758e=>{telegramError(_0x4b758e);});toggleBot(_0x1ede63,toggleStatus(_0x1ede63),'stopped');}}),tgBot[_0x197dcf(0x19c)](_0x197dcf(0x12f));});}}),tgBot[_0xcaa04a(0xd9)](/\/disable/,_0x29d49c=>{const _0x2134a6=_0xcaa04a;if(!validateTelegram(_0x29d49c))return;tgBot[_0x2134a6(0x13d)](_0x29d49c['chat']['id'],_0x2134a6(0xe0))[_0x2134a6(0xfa)](_0x45f4a2=>{telegramError(_0x45f4a2);}),updateSetting('telegramEnabled',![]);}),tgBot[_0xcaa04a(0xd9)](/\/help/,_0x3dedca=>{const _0x408788=_0xcaa04a;if(!validateTelegram(_0x3dedca))return;tgBot['sendMessage'](_0x3dedca[_0x408788(0xec)]['id'],_0x38aec2)['catch'](_0x123a9d=>{telegramError(_0x123a9d);});}),tgBot['on'](_0xcaa04a(0x143),_0x14b61c=>{const _0x9dd580=_0xcaa04a;_0x14b61c[_0x9dd580(0xba)]()[_0x9dd580(0x19e)](_0x9dd580(0x71))&&(logging(_0x9dd580(0x19d)),tgBot[_0x9dd580(0xce)](),tgBot=null,io['to'](_0x9dd580(0x187))[_0x9dd580(0xc1)](_0x9dd580(0xb8),_0x9dd580(0x19d)));}),process[_0xcaa04a(0x127)](_0xcaa04a(0x11d),()=>{const _0x412825=_0xcaa04a;if(tgBot)tgBot[_0x412825(0xce)]();process[_0x412825(0x17c)](0x1);}),process[_0xcaa04a(0x127)](_0xcaa04a(0xc8),()=>{const _0xae47f1=_0xcaa04a;if(tgBot)tgBot['stopPolling']();process[_0xae47f1(0x17c)](0x1);});}}function disableTelegram(){const _0x4044cf=_0x3c7834;tgBot&&(tgBot[_0x4044cf(0xce)](),tgBot=null);}function sendTelegram(_0x17b888,_0x46a1c2){const _0x1f5e3f=_0x3c7834;if(settings['telegramEnabled']){if(settings[_0x1f5e3f(0x14f)]==_0x1f5e3f(0xdd)||(_0x46a1c2['type']==_0x1f5e3f(0x12a)||_0x46a1c2['type']==_0x1f5e3f(0x70))&&settings[_0x1f5e3f(0x14f)]==_0x1f5e3f(0x1ad)||_0x46a1c2[_0x1f5e3f(0x87)]==_0x1f5e3f(0x98)&&settings['telegramEvents']==_0x1f5e3f(0x101)){if(tgBot&&settings['telegramChatId']){if(_0x46a1c2['showname'])tgBot[_0x1f5e3f(0x13d)](settings['telegramChatId'],_0x46a1c2[_0x1f5e3f(0xa4)]+_0x1f5e3f(0xa3)+_0x46a1c2['event'])['catch'](_0x1ced7e=>{telegramError(_0x1ced7e);});else tgBot[_0x1f5e3f(0x13d)](settings[_0x1f5e3f(0x150)],_0x1f5e3f(0x103)+_0x17b888+_0x1f5e3f(0xa3)+_0x46a1c2[_0x1f5e3f(0x93)])[_0x1f5e3f(0xfa)](_0x1a5008=>{telegramError(_0x1a5008);});}}}}function getDeviceWithIp(_0x481469){const _0x49280d=_0x3c7834;return devices[_0x49280d(0x16a)](_0x21ac06=>_0x21ac06['ip']===_0x481469);}function _0x43c1(){const _0x1a105f=['User\x20has\x20been\x20validated','kill','copyFileSync','Invalid\x20authentication\x20token\x20(2)','UA-192771731-1','temporary\x20token\x20generated',',\x20must\x20be\x20a\x204\x20digit\x20number','yes','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','encryptedUuid','exit','log','bot','constructor','ipaddr.js','bots','enabled','uuid','RSA','Login\x20accepted','mkdirSync','botmanager','temporaryAccessAllowed','Access\x20enabled\x20for\x20','2FA\x20login\x20rejected','@analytics/google-analytics','telegramIpApproval','bot-','default','clients','toIPv4MappedAddress','allow','started','headers','ipv6','login','handshake','use','get-logs','disabled\x20Bot\x20','unlinkSync','write','removeListener','Invalid\x20Telegram\x20token','includes','-results.json','running','bb-secure.json','login\x20token\x20valid','split','whitelistEnabled','reset-password','f2aRequired','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','pidRefreshToken','Unauthorized\x20attempt\x20to\x20get\x20logs','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegram2FaApproval','add','alerts','temporary\x20access\x20not\x20allowed','Unauthorized\x20attempt\x20to\x20store\x20configuration','NTBA_FIX_319','index.html','Ok,\x20will\x20send\x20alert\x20notifications\x20only','push','-config.json','<b>Balance\x20Bot\x20status:</b>\x0a','search','hashSync',':\x20Bot\x20Mgr\x20>\x20','argv','success','404\x20Not\x20Found','No\x20authentication\x20token','randomFillSync','secure','::1','password','/restart\x20-\x20restart\x20bot(s)\x0a','token','-events.json','HTML','bb-settings.json','secret','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','max','2FA\x20required','sendFile','access\x20timeout','backup/','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','isValid','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','getPortfolio','type','live','Invalid\x20username\x20or\x20IP\x20address','http','All\x20bots','getTime','Unauthorized\x20login\x20attempt\x20(timeout)','reload','1000','status','getDate','stopped','event','timeshift','Notifications\x20types:\x20','/disable\x20-\x20disable\x20notifications\x0a','static','order','starting\x20new\x20bot\x20|\x20Bot\x20','getStartingBalances','\x20only\x0a','hybrid-crypto-js','bbPassword','remove','from','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','socket.io','cancelLoading','\x20>\x20','botname','disconnect','174797vdKnpJ','restart','login\x20token\x20generated','284380brGoXu','cancel-loading','store-headless','store-configuration','set','botID','getUTCHours','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','privateKey','message','sign','createServer','2FA\x20login\x20token\x20generated','place-order','notification','reject','toString','getFullYear','get','decrypt','/:bot/performance','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','blacklist','emit','102016VFnBLN','disabled','entries','sockets','forEach','error\x20while\x20deleting\x20config\x20files:\x20','SIGTERM','args','Orders','padStart','logged\x20out','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','stopPolling','accept','port','Error:\x20Invalid\x20argument\x20','connected','answerCallbackQuery','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','settings','idling\x20bot\x20\x20\x20|\x20Bot\x20','listen','clientip','onText','emitHistory','Unauthorized\x20attempt\x20to\x20add\x20bot','getMonth','all','toIPv4Address','All','Notifications\x20disabled','bcryptjs','value','bb/','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','bbUsername','compareSync','function','new','generateKeyPairAsync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','timestamp','chat','config/','readdirSync','cloneDeep','hasOwnProperty','date-fns','Invalid\x20IP\x20address','2FA\x20login\x20required','bot.js','deleted\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','3130596qESjXa','login\x20not\x20required','catch','telegram','</b>\x20?','map','sortBy','isIPv4MappedAddress','length','orders','delete-bot','Bot\x20','ipc','3000','auth','984505prVCfL','127.0.0.1','reason','show','531sDOIBW','get-portfolio','version','Unauthorized\x20attempt\x20to\x20log\x20out','/:bot/support','telegramUsername','get-starting-balances','initclient','\x20|\x20','user','pidExpireLogin','login\x20required','assign','RSA-OAEP','getMinutes','build2','-performance.json','/off\x20-\x20stop\x20bot(s)\x0a','SIGINT','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','send','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','store-settings','server','yargs/yargs','isDirectory','2668862BQYmLs','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','once','446907EOiVha','getSeconds','error','Notifications\x20enabled','stop','new-disabled','then','callback_query','logout','connection','/help\x20-\x20show\x20available\x20commands\x0a','invalid\x20credentials','Balance\x20Bot','/:bot','lowdb','removeAllListeners','version.json','5\x20min','telegramToken','loginRequired','filter','sendMessage','starting\x20bot\x20|\x20Bot\x20','getHours','fork','host','4VrHNns','polling_error','30\x20min','\x20/\x20','402DqFYdo','access','expiry','publicKey','\x20minutes','username','Ok,\x20will\x20send\x20order\x20notifications\x20only','match','child_process','telegramEvents','telegramChatId','existsSync','Unauthorized\x20login\x20attempt\x20(public\x20key)','data','settings.','node-telegram-bot-api','/enable\x20-\x20enable\x20notifications\x0a','************','Crypt','kind','defaults','Bot\x20Mgr\x20>\x20','sha256','restarting\x20Bot\x20','Alerts','telegramEnabled','analytics','/:bot/configuration','Unauthorized\x20attempt\x20to\x20update\x20bot','join','inherit','2FA','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','Token\x20blacklisted','add-bot','find','-----------------------------------------------------------------------------------','build','name','conn','temporary\x20access\x20timeout','enabled\x20Bot\x20','slice'];_0x43c1=function(){return _0x1a105f;};return _0x43c1();}function temporaryAccess2FA(_0xed6064,_0x2c1746){const _0x446461=_0x3c7834;let _0x1b8d3c=new Date(),_0x520645=![];if(lastIpApproval){if(_0x1b8d3c-lastIpApproval<0x1388)_0x520645=!![];}lastIpApproval=new Date();if(_0x520645)return;tgBot&&settings[_0x446461(0x150)]&&(tgBot[_0x446461(0x19c)](_0x446461(0x12f)),tgBot['sendMessage'](settings[_0x446461(0x150)],_0x446461(0xd4)+normalizeIP(_0x2c1746)[_0x446461(0x10a)]+_0x446461(0xfc),{'parse_mode':_0x446461(0x7a),'reply_markup':{'inline_keyboard':[[{'text':_0x446461(0x139),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x446461(0x144),'callback_data':'30'},{'text':_0x446461(0xb9),'callback_data':'reject'}]]}})[_0x446461(0xfa)](_0x2d5693=>{telegramError(_0x2d5693);}),tgBot['on'](_0x446461(0x12f),async _0x5c6c14=>{const _0xd81eed=_0x446461,_0x5baa09=_0x5c6c14[_0xd81eed(0x153)],_0x23c4aa=_0x5c6c14[_0xd81eed(0xb3)];tgBot[_0xd81eed(0xd3)](_0x5c6c14['id'])[_0xd81eed(0x12e)](async()=>{const _0x5e6a69=_0xd81eed;devices[_0xed6064][_0x5e6a69(0x18c)]={'clientip':_0x2c1746,'timestamp':new Date()[_0x5e6a69(0x8c)](),'expiry':_0x5baa09},_0x5baa09!='reject'?(await tgBot[_0x5e6a69(0x13d)](_0x23c4aa[_0x5e6a69(0xec)]['id'],_0x5e6a69(0x189)+_0x5baa09+_0x5e6a69(0x14a),{'parse_mode':_0x5e6a69(0x7a)})[_0x5e6a69(0xfa)](_0x5a439c=>{telegramError(_0x5a439c);}),io['to'](_0xed6064)[_0x5e6a69(0xc1)](_0x5e6a69(0x90),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x5e6a69(0x13d)](_0x23c4aa['chat']['id'],'Temporary\x20access\x20rejected')['catch'](_0x264df3=>{telegramError(_0x264df3);}),io['to'](_0xed6064)[_0x5e6a69(0xc1)](_0x5e6a69(0x90),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0xd81eed(0x19c)](_0xd81eed(0x12f));}));}function loginAccess2FA(_0x4f0297,_0x2081f6){const _0x45fe3c=_0x3c7834;tgBot&&settings[_0x45fe3c(0x150)]&&(tgBot['removeListener'](_0x45fe3c(0x12f)),tgBot['sendMessage'](settings[_0x45fe3c(0x150)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x2081f6)[_0x45fe3c(0x10a)]+_0x45fe3c(0xfc),{'parse_mode':_0x45fe3c(0x7a),'reply_markup':{'inline_keyboard':[[{'text':_0x45fe3c(0xcf),'callback_data':loginExpiry},{'text':_0x45fe3c(0xb9),'callback_data':_0x45fe3c(0xb9)}]]}})['catch'](_0x33470b=>{telegramError(_0x33470b);}),tgBot['on'](_0x45fe3c(0x12f),async _0x4c33cc=>{const _0xe67d=_0x45fe3c,_0x28e219=_0x4c33cc[_0xe67d(0x153)],_0x258532=_0x4c33cc['message'];tgBot['answerCallbackQuery'](_0x4c33cc['id'])['then'](async()=>{const _0x1fbaff=_0xe67d;devices[_0x4f0297]['telegram2FaApproval']={'clientip':_0x2081f6,'timestamp':new Date()[_0x1fbaff(0x8c)](),'expiry':_0x28e219},_0x28e219!=_0x1fbaff(0xb9)?(await tgBot['sendMessage'](_0x258532['chat']['id'],_0x1fbaff(0x185),{'parse_mode':'HTML'})[_0x1fbaff(0xfa)](_0x5e28bb=>{telegramError(_0x5e28bb);}),io['to'](_0x4f0297)[_0x1fbaff(0xc1)](_0x1fbaff(0x90),{'access':{'allow':![],'reason':_0x1fbaff(0x8e),'token':null}})):(await tgBot[_0x1fbaff(0x13d)](_0x258532['chat']['id'],'Login\x20rejected')[_0x1fbaff(0xfa)](_0x259ace=>{telegramError(_0x259ace);}),io['to'](_0x4f0297)[_0x1fbaff(0xc1)](_0x1fbaff(0x90),{'access':{'allow':![],'reason':_0x1fbaff(0x18a),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){const _0x1c26c8=_0x3c7834;return dbConfig[_0x1c26c8(0xbc)]('bots')['sortBy'](_0x1c26c8(0xae))[_0x1c26c8(0xe2)]()||[];}function getEnabledBots(){const _0x3543e5=_0x3c7834;return dbConfig[_0x3543e5(0xbc)]('bots')[_0x3543e5(0xfe)](_0x3543e5(0xae))[_0x3543e5(0x13c)]({'status':_0x3543e5(0x182)})[_0x3543e5(0xe2)]()||[];}function getDisabledBots(){const _0xcbfd2d=_0x3c7834;return dbConfig[_0xcbfd2d(0xbc)](_0xcbfd2d(0x181))[_0xcbfd2d(0xfe)]('botID')[_0xcbfd2d(0x13c)]({'status':'disabled'})[_0xcbfd2d(0xe2)]()||[];}function getSettings(){const _0x3d1d96=_0x3c7834;return dbSettings[_0x3d1d96(0xbc)](_0x3d1d96(0xd5))[_0x3d1d96(0xe2)]()||{'timeshift':0x0};}function getSecure(){const _0x7cd272=_0x3c7834;return dbSecure[_0x7cd272(0xbc)](_0x7cd272(0x74))[_0x7cd272(0xe2)]()||{};}function getBlacklist(){const _0x21e8aa=_0x3c7834;return dbSecure[_0x21e8aa(0xbc)](_0x21e8aa(0xc0))[_0x21e8aa(0xe2)]()||[];}function broadcastToBots(_0x2a8a3e,_0x2e5781){const _0x18284d=_0x3c7834;config[_0x18284d(0xc6)](_0x1136c1=>{const _0x1a8f21=_0x18284d;if(_0x1136c1[_0x1a8f21(0x90)]==_0x1a8f21(0x182)&&_0x1136c1[_0x1a8f21(0x88)]==_0x1a8f21(0x1a0)){if(pid[_0x1136c1['botID']])pid[_0x1136c1[_0x1a8f21(0xae)]][_0x1a8f21(0x11f)]({[_0x2a8a3e]:_0x2e5781});}});}function storeSettings(_0x30cb94,_0x501a3=![]){const _0x2ef433=_0x3c7834;_0x30cb94={...settings,..._0x30cb94};if(_0x501a3&&_0x30cb94[_0x2ef433(0x9d)]!=_0x2ef433(0x157)&&_0x30cb94[_0x2ef433(0x9d)]!=''){const _0x4d1020=crypt[_0x2ef433(0xbd)](secure[_0x2ef433(0xb2)],_0x30cb94[_0x2ef433(0x9d)])[_0x2ef433(0xb3)]['split']('@')[0x0],_0x1ce368=bcrypt[_0x2ef433(0x6d)](_0x4d1020,saltRounds);_0x30cb94={..._0x30cb94,'bbPassword':_0x1ce368};}if(_0x501a3&&_0x30cb94[_0x2ef433(0x13a)]!=_0x2ef433(0x157)&&_0x30cb94[_0x2ef433(0x13a)]!=''){const _0xbbe0f1=crypt[_0x2ef433(0xbd)](secure[_0x2ef433(0xb2)],_0x30cb94[_0x2ef433(0x13a)])[_0x2ef433(0xb3)]['split']('@')[0x0];_0x30cb94={..._0x30cb94,'telegramToken':_0xbbe0f1};}const _0x1ac8e3=_0x30cb94[_0x2ef433(0x13a)]!=_0x2ef433(0x157)&&_0x30cb94[_0x2ef433(0x13a)]!=settings[_0x2ef433(0x13a)]||_0x30cb94[_0x2ef433(0x110)]!=settings[_0x2ef433(0x110)],_0x1269cd=_0x30cb94['telegramToken']==''||_0x30cb94[_0x2ef433(0x110)]=='';if(_0x1ac8e3)_0x30cb94[_0x2ef433(0x14f)]='all';for(const [_0x2f60ae,_0x2ef417]of Object[_0x2ef433(0xc4)](_0x30cb94)){if(_0x2f60ae==_0x2ef433(0x13a)&&_0x2ef417=='************'){_0x30cb94[_0x2ef433(0x13a)]=settings[_0x2ef433(0x13a)];continue;};if(_0x2f60ae==_0x2ef433(0x9d)&&_0x2ef417==_0x2ef433(0x157)){_0x30cb94['bbPassword']=settings[_0x2ef433(0x9d)];continue;};dbSettings[_0x2ef433(0xad)](_0x2ef433(0x154)+_0x2f60ae,_0x2ef417)[_0x2ef433(0x19b)]();}settings=_0x30cb94,io['to'](_0x2ef433(0x187))['emit'](_0x2ef433(0xd5),cleanSettings()),broadcastToBots(_0x2ef433(0x94),settings[_0x2ef433(0x94)]);if(_0x1ac8e3&&!_0x1269cd)initTelegram();if(_0x1ac8e3&&_0x1269cd)disableTelegram();getAllClients()[_0x2ef433(0xc6)](_0x4b38f9=>{const _0x5b1df8=_0x2ef433;getSocket(_0x4b38f9['id'])[_0x5b1df8(0xc1)](_0x5b1df8(0x90),{'access':{'allow':![],'reason':_0x5b1df8(0x8e),'token':null}});});}function updateSetting(_0x17a737,_0x591afd){const _0x24172c=_0x3c7834;dbSettings['set'](_0x24172c(0x154)+_0x17a737,_0x591afd)[_0x24172c(0x19b)](),settings=getSettings(),io['to']('botmanager')[_0x24172c(0xc1)]('settings',cleanSettings());}function storeSecure(_0x2f1c9e){const _0x5b6f02=_0x3c7834;dbSecure['get']('secure')[_0x5b6f02(0x69)](_0x2f1c9e)[_0x5b6f02(0x19b)](),secure=_0x2f1c9e;}function addBlacklist(_0x5a20fe){const _0x7fd338=_0x3c7834;cleanBlacklist();let _0x458aa9;devices[_0x5a20fe][_0x7fd338(0x18c)]?_0x458aa9=Math[_0x7fd338(0x7e)](devices[_0x5a20fe][_0x7fd338(0x18c)][_0x7fd338(0x148)],loginExpiry):_0x458aa9=loginExpiry,dbSecure[_0x7fd338(0xbc)](_0x7fd338(0xc0))[_0x7fd338(0x69)]({'expiry':new Date()[_0x7fd338(0x8c)]()+_0x458aa9*0x3c*0x3e8,'token':devices[_0x5a20fe][_0x7fd338(0x147)][_0x7fd338(0x78)]})[_0x7fd338(0x19b)](),blacklist=dbSecure[_0x7fd338(0xbc)](_0x7fd338(0xc0))[_0x7fd338(0xe2)]();}function cleanBlacklist(){const _0x1a5e00=_0x3c7834;let _0x183847=dbSecure[_0x1a5e00(0xbc)](_0x1a5e00(0xc0))[_0x1a5e00(0xef)]()[_0x1a5e00(0xe2)](),_0x397a9d=new Date()[_0x1a5e00(0x8c)]();_0x183847[_0x1a5e00(0xc6)](_0x479fc7=>{const _0x45ead9=_0x1a5e00;_0x479fc7['expiry']<_0x397a9d&&dbSecure[_0x45ead9(0xbc)](_0x45ead9(0xc0))[_0x45ead9(0x9e)]({'expiry':_0x479fc7[_0x45ead9(0x148)]})[_0x45ead9(0x19b)]();});}function initStates(){const _0x32771c=_0x3c7834;let _0x29e637=getConfiguration();_0x29e637[_0x32771c(0xc6)](_0x4a4cd8=>{const _0x343fe7=_0x32771c;_0x4a4cd8[_0x343fe7(0x88)]=_0x343fe7(0x92);}),storeConfiguration(_0x29e637);}function onKeys(){const _0x2b3cfa=new RSA();return new Promise(_0x2a20cf=>{const _0xaff65e=_0x1d2e;_0x2b3cfa[_0xaff65e(0xe9)]()['then'](_0x368c92=>{_0x2a20cf(_0x368c92);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2c5c65=_0x3c7834;let _0x195207=getConfiguration(),_0x278fea=![];_0x195207[_0x2c5c65(0xc6)](_0x4cee27=>{const _0x1f1247=_0x2c5c65;if(_0x4cee27[_0x1f1247(0x90)]==_0x1f1247(0x1a0))_0x4cee27[_0x1f1247(0x90)]=_0x1f1247(0x182),_0x278fea=!![];else _0x4cee27['status']==_0x1f1247(0x92)&&(_0x4cee27['status']=_0x1f1247(0xc3),_0x278fea=!![]);});if(_0x278fea)storeConfiguration(_0x195207);let _0x42c32=getSecure();if(!_0x42c32[_0x2c5c65(0xf0)]('secret')){let _0x3e3375=await generateKeys();_0x42c32[_0x2c5c65(0x149)]=_0x3e3375['publicKey'],_0x42c32[_0x2c5c65(0xb2)]=_0x3e3375['privateKey'],_0x42c32[_0x2c5c65(0x7c)]=crypto['randomBytes'](0x20)[_0x2c5c65(0xba)]('hex');;storeSecure(_0x42c32);}let _0x3c413f=getSettings();_0x278fea=![];!_0x3c413f[_0x2c5c65(0xf0)](_0x2c5c65(0x13b))&&(_0x3c413f[_0x2c5c65(0x13b)]=![],_0x3c413f[_0x2c5c65(0xe5)]='',_0x3c413f[_0x2c5c65(0x9d)]='',_0x3c413f['f2aRequired']=![],_0x278fea=!![]);!_0x3c413f[_0x2c5c65(0xf0)](_0x2c5c65(0x1a4))&&(_0x3c413f[_0x2c5c65(0x1a4)]=![],_0x3c413f['whitelist']=[],_0x3c413f[_0x2c5c65(0x188)]=![],_0x278fea=!![]);if(!_0x3c413f['hasOwnProperty'](_0x2c5c65(0x15f))){if(_0x3c413f[_0x2c5c65(0x150)])_0x3c413f[_0x2c5c65(0x15f)]=!![];else _0x3c413f[_0x2c5c65(0x15f)]=![];_0x278fea=!![];}if(_0x278fea)storeSettings(_0x3c413f);}function storeConfiguration(_0x44633e){const _0x217c47=_0x3c7834;dbConfig[_0x217c47(0xbc)](_0x217c47(0x181))[_0x217c47(0x9e)]()[_0x217c47(0x19b)](),dbConfig[_0x217c47(0xbc)](_0x217c47(0x181))['push'](..._0x44633e)['write'](),config=_0x44633e;}function resetPassword(){const _0x154794=_0x3c7834;tgBot&&settings[_0x154794(0x150)]&&(tgBot[_0x154794(0x19c)](_0x154794(0x12f)),tgBot[_0x154794(0x13d)](settings[_0x154794(0x150)],_0x154794(0x1aa),{'parse_mode':_0x154794(0x7a),'reply_markup':{'inline_keyboard':[[{'text':_0x154794(0x179),'callback_data':_0x154794(0x179)},{'text':'no','callback_data':'no'}]]}})[_0x154794(0xfa)](_0x1a9da0=>{telegramError(_0x1a9da0);}),tgBot['on']('callback_query',async _0x1c6abc=>{const _0x4216ed=_0x154794,_0x4916bc=_0x1c6abc['data'],_0x1802da=_0x1c6abc[_0x4216ed(0xb3)];tgBot[_0x4216ed(0xd3)](_0x1c6abc['id'])[_0x4216ed(0x12e)](async()=>{const _0x15488c=_0x4216ed;if(_0x4916bc!='no'){const _0x4b1c59=0xf,_0x25cb6b='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x544f9d=Array[_0x15488c(0x9f)](crypto[_0x15488c(0x73)](new Uint32Array(_0x4b1c59)))[_0x15488c(0xfd)](_0x5d8dcc=>_0x25cb6b[_0x5d8dcc%_0x25cb6b['length']])['join'](''),_0x228472=bcrypt[_0x15488c(0x6d)](_0x544f9d,saltRounds);storeSettings({'bbPassword':_0x228472}),await tgBot['sendMessage'](_0x1802da[_0x15488c(0xec)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x544f9d,{'parse_mode':'HTML'})[_0x15488c(0xfa)](_0x260f13=>{telegramError(_0x260f13);});}else await tgBot['sendMessage'](_0x1802da[_0x15488c(0xec)]['id'],'Password\x20reset\x20rejected')[_0x15488c(0xfa)](_0x3f74bf=>{telegramError(_0x3f74bf);});}),tgBot[_0x4216ed(0x19c)](_0x4216ed(0x12f));}));}function logging(_0x4c5ac1){const _0x5da7a9=_0x3c7834;console[_0x5da7a9(0x17d)](getTimeStamp()+_0x5da7a9(0x6e)+_0x4c5ac1);if(tgBot&&settings[_0x5da7a9(0x150)]&&settings[_0x5da7a9(0x14f)]!=_0x5da7a9(0x101))tgBot[_0x5da7a9(0x13d)](settings['telegramChatId'],_0x5da7a9(0x15b)+_0x4c5ac1)[_0x5da7a9(0xfa)](_0x9d5d59=>{telegramError(_0x9d5d59);});}function getServerTime(){const _0x7408fd=_0x3c7834,_0x2e7924=new Date();return _0x2e7924[_0x7408fd(0xbb)]()+'/'+(_0x2e7924[_0x7408fd(0xdc)]()+0x1)['toString']()[_0x7408fd(0xcb)](0x2,'0')+'/'+_0x2e7924[_0x7408fd(0x91)]()[_0x7408fd(0xba)]()[_0x7408fd(0xcb)](0x2,'0')+'\x20'+_0x2e7924[_0x7408fd(0x13f)]()[_0x7408fd(0xba)]()[_0x7408fd(0xcb)](0x2,'0')+':'+_0x2e7924[_0x7408fd(0x119)]()[_0x7408fd(0xba)]()['padStart'](0x2,'0')+':'+_0x2e7924['getSeconds']()[_0x7408fd(0xba)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xbaf2c7=_0x3c7834,_0x5b06f2=shiftedTime();return _0x5b06f2['getFullYear']()+'/'+(_0x5b06f2[_0xbaf2c7(0xdc)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5b06f2[_0xbaf2c7(0x91)]()[_0xbaf2c7(0xba)]()[_0xbaf2c7(0xcb)](0x2,'0')+'\x20'+_0x5b06f2[_0xbaf2c7(0x13f)]()['toString']()['padStart'](0x2,'0')+':'+_0x5b06f2[_0xbaf2c7(0x119)]()[_0xbaf2c7(0xba)]()[_0xbaf2c7(0xcb)](0x2,'0')+':'+_0x5b06f2[_0xbaf2c7(0x129)]()['toString']()[_0xbaf2c7(0xcb)](0x2,'0');}function shiftedTime(){const _0x3831bd=_0x3c7834,_0x4fa06c=new Date();let _0x48af17=_0x4fa06c;if(settings[_0x3831bd(0x94)]&&settings[_0x3831bd(0x94)]!==0x0)_0x48af17=fns[_0x3831bd(0x1ac)](_0x4fa06c,{'hours':settings[_0x3831bd(0x94)]});return _0x48af17;}function startScheduler(){const _0x3725c4=_0x3c7834;let _0xbfb77=new Date()[_0x3725c4(0xaf)]();_0xbfb77==0x1&&backupConfigFiles();_0xbfb77==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5e166c=_0x3c7834;fs[_0x5e166c(0xee)](configpath,{'withFileTypes':!![]})[_0x5e166c(0xc6)](_0x3331b7=>{const _0x2d0753=_0x5e166c;if(!_0x3331b7[_0x2d0753(0x124)]())fs[_0x2d0753(0x174)](configpath+_0x3331b7[_0x2d0753(0x16d)],configbackuppath+_0x3331b7[_0x2d0753(0x16d)]);});}function triggerAnalytics(){analytics['page']({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x2cf652,_0x168137){const _0x38bb2d=_0x3c7834;if(_0x2cf652[_0x38bb2d(0x14b)]==settings[_0x38bb2d(0xe5)]&&bcrypt[_0x38bb2d(0xe6)](_0x2cf652[_0x38bb2d(0x76)],settings[_0x38bb2d(0x9d)])){if(settings[_0x38bb2d(0x1a6)])return{'allow':![],'reason':_0x38bb2d(0xf3),'token':null};else{const _0x1d618b=generateLoginToken(_0x168137);return{'allow':!![],'reason':_0x38bb2d(0xa8),'token':_0x1d618b};}}else return{'allow':![],'reason':_0x38bb2d(0x133),'token':null};}function refreshToken(_0x4ae60f){const _0xb2d14f=generateLoginToken(_0x4ae60f);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xb2d14f};}function validateAccess(_0x930d99,_0x8072f8){const _0x3a50b9=_0x3c7834;let _0x32a3ab=devices[_0x8072f8]['ip'],_0x46281e;const _0xa710df=_0x48e63f=>{const _0x170677=_0x1d2e;if(settings[_0x170677(0x13b)]){if(settings[_0x170677(0x1a6)]){if(telegram2FaApproved(_0x8072f8)){const _0xfb899=generateLoginToken(_0x8072f8);return{'allow':!![],'reason':_0x170677(0xb6),'token':_0xfb899};}else return{'allow':![],'reason':_0x170677(0x116),'token':null};}else return _0x46281e=validToken(_0x48e63f,_0x8072f8),_0x46281e[_0x170677(0xf0)](_0x170677(0x70))?{'allow':!![],'reason':_0x170677(0x1a2),'token':_0x48e63f}:{'allow':![],'reason':_0x170677(0x116),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x3a50b9(0x1a4)]){let _0x2134a0=[...settings['whitelist'],_0x3a50b9(0x75),'::ffff:127.0.0.1',_0x3a50b9(0x108)];if(_0x2134a0[_0x3a50b9(0x19e)](_0x32a3ab))return _0xa710df(_0x930d99);else{_0x46281e=validToken(_0x930d99,_0x8072f8);if(_0x46281e['hasOwnProperty'](_0x3a50b9(0x70)))return _0xa710df(_0x930d99);else{if(telegramIpApproved(_0x8072f8)){const _0x3ddf6f=generateToken(_0x8072f8);return _0x46281e=_0xa710df(_0x930d99),_0x46281e['allow']?{'allow':!![],'reason':_0x3a50b9(0x177),'token':_0x3ddf6f}:_0x46281e;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x3a50b9(0x1ae),'token':null};}}}else return _0xa710df(_0x930d99);}function timelyDecrypt(_0x428b93,_0x3240e8=!![]){const _0x38302f=_0x3c7834;if(_0x428b93)try{const _0x38ee2b=crypt['decrypt'](secure['privateKey'],_0x428b93)[_0x38302f(0xb3)],_0x2f600b=_0x38ee2b['split']('@')[0x0],_0x30d9d1=_0x38ee2b[_0x38302f(0x1a3)]('@')[0x1],_0x134147=new Date()['getTime']();if(_0x3240e8){if(_0x134147-_0x30d9d1<maxSecretAge*0x3e8)return _0x2f600b;else return![];}else return _0x2f600b;}catch(_0x3209f3){return![];}else return![];}const validToken=(_0x39c26c,_0x5cf7fa)=>{const _0x3cbea4=_0x3c7834,_0x13fbda=devices[_0x5cf7fa]['ip'];if(!_0x39c26c)return{'error':_0x3cbea4(0x72)};for(let _0xfd9f4e of blacklist){if(_0xfd9f4e[_0x3cbea4(0x78)]==_0x39c26c)return{'error':_0x3cbea4(0x168)};}let _0x518544;try{_0x518544=jwt['verify'](_0x39c26c,secure[_0x3cbea4(0x7c)]+_0x5cf7fa);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x518544[_0x3cbea4(0xf0)](_0x3cbea4(0xd8))&&!_0x518544[_0x3cbea4(0xf0)](_0x3cbea4(0x14b))||!_0x518544[_0x3cbea4(0xf0)]('exp'))return{'error':_0x3cbea4(0x175)};if(!_0x518544[_0x3cbea4(0xf0)](_0x3cbea4(0x14b))&&_0x518544[_0x3cbea4(0xf0)](_0x3cbea4(0xd8))){const {clientip:_0x31a6f4}=_0x518544;return _0x13fbda==_0x31a6f4?{'success':_0x3cbea4(0x172)}:{'error':_0x3cbea4(0xf2)};}else{if(_0x518544['hasOwnProperty'](_0x3cbea4(0x14b))&&_0x518544[_0x3cbea4(0xf0)]('clientip')){const {username:_0xd3a6e6,clientip:_0x170632}=_0x518544;return settings[_0x3cbea4(0xe5)]==_0xd3a6e6&&_0x13fbda==_0x170632?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3cbea4(0x89)};}}},generateLoginToken=_0x5b2cd5=>{const _0x176dec=_0x3c7834;if(_0x5b2cd5){const _0x7672bb=devices[_0x5b2cd5]['ip'];return jwt[_0x176dec(0xb4)]({'username':settings[_0x176dec(0xe5)],'clientip':_0x7672bb},secure[_0x176dec(0x7c)]+_0x5b2cd5,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x108c8d=>{const _0xfa27fb=_0x3c7834;if(_0x108c8d){const _0x13353f=devices[_0x108c8d]['ip'];return jwt[_0xfa27fb(0xb4)]({'clientip':_0x13353f},secure[_0xfa27fb(0x7c)]+_0x108c8d,{'expiresIn':devices[_0x108c8d][_0xfa27fb(0x18c)][_0xfa27fb(0x148)]*0x3c});}else return![];},telegramIpApproved=_0x162a05=>{const _0x309842=_0x3c7834;let _0x2a5fe6=![];return devices[_0x162a05][_0x309842(0x18c)]&&devices[_0x162a05][_0x309842(0x18c)]['expiry']!=_0x309842(0xb9)&&(_0x2a5fe6=devices[_0x162a05][_0x309842(0x18c)][_0x309842(0xd8)]==devices[_0x162a05]['ip']&&new Date()['getTime']()-devices[_0x162a05]['telegramIpApproval'][_0x309842(0xeb)]<devices[_0x162a05][_0x309842(0x18c)][_0x309842(0x148)]*0x3c*0x3e8),_0x2a5fe6;},telegram2FaApproved=_0x596185=>{const _0x4c62d3=_0x3c7834;let _0x32aaad=![];return devices[_0x596185][_0x4c62d3(0x1ab)]&&devices[_0x596185][_0x4c62d3(0x1ab)][_0x4c62d3(0x148)]!='reject'&&(_0x32aaad=devices[_0x596185]['telegram2FaApproval'][_0x4c62d3(0xd8)]==devices[_0x596185]['ip']&&new Date()[_0x4c62d3(0x8c)]()-devices[_0x596185]['telegram2FaApproval']['timestamp']<devices[_0x596185]['telegram2FaApproval'][_0x4c62d3(0x148)]*0x3c*0x3e8),_0x32aaad;},normalizeIP=_0xdfcf05=>{const _0x3d51ff=_0x3c7834;let _0x134537=null,_0x4d624a=null;if(ipaddr[_0x3d51ff(0x84)](_0xdfcf05)){const _0x14abbb=ipaddr['parse'](_0xdfcf05);_0x14abbb[_0x3d51ff(0x159)]()===_0x3d51ff(0x194)?(_0x14abbb[_0x3d51ff(0xff)]()&&(_0x134537=_0x14abbb[_0x3d51ff(0xde)]()[_0x3d51ff(0xba)]()),_0x4d624a=_0x14abbb[_0x3d51ff(0xba)]()):(_0x134537=_0x14abbb[_0x3d51ff(0xba)](),_0x4d624a=_0x14abbb[_0x3d51ff(0x190)]()[_0x3d51ff(0xba)]());}return{'show':_0x134537?_0x134537:_0x4d624a,'store':_0x4d624a};};