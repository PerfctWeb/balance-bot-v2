const _0x3f8bde=_0x40e6;(function(_0x314303,_0x4a4a6e){const _0x2dfb7e=_0x40e6,_0x296d9b=_0x314303();while(!![]){try{const _0x4ba960=parseInt(_0x2dfb7e(0x22d))/0x1*(-parseInt(_0x2dfb7e(0x17f))/0x2)+-parseInt(_0x2dfb7e(0x25b))/0x3+parseInt(_0x2dfb7e(0x23f))/0x4*(parseInt(_0x2dfb7e(0x1f9))/0x5)+-parseInt(_0x2dfb7e(0x2b3))/0x6*(-parseInt(_0x2dfb7e(0x2c8))/0x7)+-parseInt(_0x2dfb7e(0x237))/0x8*(parseInt(_0x2dfb7e(0x18b))/0x9)+-parseInt(_0x2dfb7e(0x1a8))/0xa*(-parseInt(_0x2dfb7e(0x185))/0xb)+parseInt(_0x2dfb7e(0x1ae))/0xc;if(_0x4ba960===_0x4a4a6e)break;else _0x296d9b['push'](_0x296d9b['shift']());}catch(_0x51d5e7){_0x296d9b['push'](_0x296d9b['shift']());}}}(_0xf11f,0xccf2e));const _0x45e7b6=function(){let _0x2666b7=!![];return function(_0x16b8a0,_0x47691a){const _0x484561=_0x2666b7?function(){const _0x57fe0f=_0x40e6;if(_0x47691a){const _0x5d0ee7=_0x47691a[_0x57fe0f(0x2ac)](_0x16b8a0,arguments);return _0x47691a=null,_0x5d0ee7;}}:function(){};return _0x2666b7=![],_0x484561;};}(),_0x4c6424=_0x45e7b6(this,function(){const _0x402615=_0x40e6;return _0x4c6424[_0x402615(0x1bf)]()['search'](_0x402615(0x1c0))[_0x402615(0x1bf)]()['constructor'](_0x4c6424)[_0x402615(0x19d)](_0x402615(0x1c0));});_0x4c6424();'use strict';process['env'][_0x3f8bde(0x270)]=0x1;const childProcess=require(_0x3f8bde(0x212)),FileSync=require(_0x3f8bde(0x191)),fs=require('fs'),fns=require('date-fns'),low=require(_0x3f8bde(0x1e6)),path=require(_0x3f8bde(0x1cf)),crypto=require(_0x3f8bde(0x1e2)),Crypt=require(_0x3f8bde(0x198))['Crypt'],RSA=require(_0x3f8bde(0x198))[_0x3f8bde(0x2c6)],bcrypt=require('bcryptjs'),jwt=require(_0x3f8bde(0x1ba)),analyticsLib=require(_0x3f8bde(0x269))[_0x3f8bde(0x1bb)],googleAnalytics=require('@analytics/google-analytics')[_0x3f8bde(0x1bb)],ipaddr=require(_0x3f8bde(0x1eb)),argv=require(_0x3f8bde(0x22c))(process[_0x3f8bde(0x2c9)][_0x3f8bde(0x27e)](0x2))['argv'],PORT=argv[_0x3f8bde(0x293)]||_0x3f8bde(0x202),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x3f8bde(0x250)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x3f8bde(0x29b)),process['exit'](0x1);function _0xf11f(){const _0x3e5217=['Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','callback_query','removeAllListeners','clientip','\x20/\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','write','createServer','Ok,\x20will\x20send\x20order\x20notifications\x20only','storeConfiguration','listen','analytics','/off\x20-\x20stop\x20bot(s)\x0a','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Access\x20enabled\x20for\x20','error','404\x20Not\x20Found','NTBA_FIX_319','bb-config.json','/:bot/configuration','login\x20required',':\x20Bot\x20Mgr\x20>\x20','success','Alerts','sortBy','disabled','unlinkSync','store-configuration','Password\x20has\x20been\x20reset\x20to:\x20','Notifications\x20enabled\x0a','<b>Telegram\x20bot\x20status:</b>\x0a','slice','whitelist','enabled','length','password','-events.json','notification','/:bot/history','http','backup/','secure','Unauthorized\x20login\x20attempt\x20(timeout)','map','invalid\x20credentials','telegram2FaApproval','login','temporary\x20access\x20rejected','restart','getPortfolio','headers','Balance\x20Bot\x20Server','port','RSA-OAEP','whitelistEnabled','telegramEnabled','new-disabled','botmanager','enabled\x20Bot\x20','add',',\x20must\x20be\x20a\x204\x20digit\x20number','chat','/help\x20-\x20show\x20available\x20commands\x0a','getFullYear','then','\x20minutes','UA-192771731-1','Unauthorized\x20login\x20attempt\x20(public\x20key)','get','User\x20has\x20been\x20validated','store-headless','config/','orders','bot-','telegramUsername','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','ipc','apply','stopped','hasOwnProperty','existsSync','Balance\x20Bot','padStart','new','131292baXKMi','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','version.json','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','-----------------------------------------------------------------------------------','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','find','started','max','pidRefreshToken','page','pidExpireLogin','Notifications\x20disabled\x0a','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','\x20only\x0a','store-settings','telegramChatId','privateKey','Unauthorized\x20attempt\x20to\x20add\x20bot','RSA','disconnect','14mdStqf','argv','push','data','includes','30jNvZmy','type','-results.json','getDate','update-bot','::ffff:127.0.0.1','4167427zwYGuA','kill','/disable\x20-\x20disable\x20notifications\x0a','assign','2FA\x20login\x20required','\x20|\x20','846DntwyW','handshake','get-starting-balances','getMonth','Unauthorized\x20attempt\x20to\x20get\x20portfolio','running','lowdb/adapters/FileSync','Unauthorized\x20attempt\x20to\x20log\x20out','isValid','function','login\x20not\x20required','/enable\x20-\x20enable\x20notifications\x0a','defaults','hybrid-crypto-js','\x20>\x20','access','logged\x20out','reason','search','Allow\x20login\x20from\x20IP\x20address\x20<b>','accept','add-bot','order','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20update\x20settings','bb/','disabled\x20Bot\x20','bbUsername','telegramIpApproval','40NHyTJL','set','Bot\x20Mgr\x20>\x20starting\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Notifications\x20types:\x20','Invalid\x20authentication\x20token\x20(1)','13523760aSOUyC','node-telegram-bot-api','5\x20min','randomFillSync','2FA\x20login\x20rejected','remove','bb-settings.json','reset-password','catch','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','blacklist','All','jsonwebtoken','default','sign','************','timestamp','toString','(((.+)+)+)+$','isDirectory','error\x20while\x20deleting\x20config\x20files:\x20','version','</b>\x20?','sendMessage','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','kind','127.0.0.1','deleted\x20Bot\x20','token','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','place-order','temporaryAccessAllowed','get-portfolio','path','initclient','socket.io','sha256','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bbPassword','bots','reload','conn','toIPv4Address','getMinutes','getSeconds','telegram','https://hodlerhacks.com','once','Orders','2FA','exit','yes','crypto','starting\x20new\x20bot\x20|\x20Bot\x20','randomBytes','::1','lowdb','username','fork','botname','onText','ipaddr.js','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','build2','15\x20min','send','hex','delete-bot','/on\x20-\x20start\x20bot(s)\x0a','mkdirSync','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','show','telegramToken','No\x20authentication\x20token','30\x20min','1231550VoFSEt','status','showname','bot','index.html','expiry','hashSync','HTML','You\x20can\x20use\x20the\x20following\x20commands:\x0a','3000','polling_error','Unauthorized\x20attempt\x20to\x20store\x20configuration','express','value','logout','forEach','build','Bot\x20','Temporary\x20access\x20rejected','publicKey','Invalid\x20username\x20or\x20IP\x20address','live','Invalid\x20IP\x20address','No\x20bots\x20running\x20right\x20now','botID','child_process','answerCallbackQuery','decrypt','getUTCHours','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','SIGTERM','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','referer','message','emit','encryptedUuid','2FA\x20required','settings','exp','stopPolling','reject','getTime','cancel-loading','cancelLoading','from','getHours','inherit','Password\x20reset\x20rejected','Invalid\x20Telegram\x20token','auth','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','yargs/yargs','40927GsJzfN','all','allow','readdirSync','stop','emitHistory','match','telegramEvents','removeListener','login\x20token\x20generated','83896TUqapc','sendFile','timeshift','static','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Ok,\x20will\x20send\x20alert\x20notifications\x20only','All\x20bots','uuid','4DsMUVX','SIGINT','join','name','Notifications\x20enabled','secret','split','2FA\x20login\x20token\x20generated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/restart\x20-\x20restart\x20bot(s)\x0a','/:bot','copyFileSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','cloneDeep','-performance.json','Invalid\x20authentication\x20token\x20(2)','settings.','log','alerts','loginRequired','generateKeyPairAsync','isIPv4MappedAddress','user','filter','event','placeOrder','f2aRequired','sockets','1479987OHFPHk','verify','entries'];_0xf11f=function(){return _0x3e5217;};return _0xf11f();}const HOST=argv['host']||null,userID=argv[_0x3f8bde(0x255)]||'';let bbpath=_0x3f8bde(0x1a4);const botfile='bot.js',configfile=_0x3f8bde(0x271),settingsfile=_0x3f8bde(0x1b4),securefile='bb-secure.json';!fs[_0x3f8bde(0x2af)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+'clients'),configpath=userID?bbpath+_0x3f8bde(0x2a6)+userID+'/':bbpath+_0x3f8bde(0x2a6),configbackuppath=configpath+_0x3f8bde(0x287);!fs[_0x3f8bde(0x2af)](configpath)&&fs[_0x3f8bde(0x1f3)](configpath);!fs[_0x3f8bde(0x2af)](configbackuppath)&&fs[_0x3f8bde(0x1f3)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3f8bde(0x197)]({'bots':[]})[_0x3f8bde(0x264)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3f8bde(0x197)]({'secure':{},'blacklist':[]})[_0x3f8bde(0x264)]();let crypt=new Crypt({'md':_0x3f8bde(0x1d2),'rsaStandard':_0x3f8bde(0x294)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+_0x3f8bde(0x2b5))[_0x3f8bde(0x1c3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;function _0x40e6(_0x58869f,_0x2ec989){const _0x43aa7a=_0xf11f();return _0x40e6=function(_0x4c6424,_0x45e7b6){_0x4c6424=_0x4c6424-0x17d;let _0xf11fa=_0x43aa7a[_0x4c6424];return _0xf11fa;},_0x40e6(_0x58869f,_0x2ec989);}oneTimeMigration(),cleanBlacklist();const express=require(_0x3f8bde(0x205)),app=express(),http=require(_0x3f8bde(0x286))[_0x3f8bde(0x265)](app);app['use'](express[_0x3f8bde(0x23a)](path['join'](__dirname,bbpath,_0x3f8bde(0x1ed)))),app['use'](express[_0x3f8bde(0x23a)](path['join'](__dirname,bbpath,_0x3f8bde(0x209)))),app['get']('/',function(_0x665d4b,_0x4c560e){const _0x29b339=_0x3f8bde;_0x4c560e[_0x29b339(0x238)](path[_0x29b339(0x241)](__dirname,bbpath,_0x29b339(0x1ed),_0x29b339(0x1fd)));}),app[_0x3f8bde(0x2a3)](_0x3f8bde(0x249),function(_0x3591b0,_0x4f2b4c){const _0xe79f57=_0x3f8bde;_0x4f2b4c['sendFile'](path[_0xe79f57(0x241)](__dirname,bbpath,'build',_0xe79f57(0x1fd)));}),app[_0x3f8bde(0x2a3)]('/:bot/portfolio',(_0x57b24b,_0x1834fe)=>{const _0x11c7fe=_0x3f8bde;_0x1834fe[_0x11c7fe(0x238)](path[_0x11c7fe(0x241)](__dirname,bbpath,'build',_0x11c7fe(0x1fd)));}),app[_0x3f8bde(0x2a3)]('/:bot/performance',(_0x11c955,_0x3b6a48)=>{const _0x329748=_0x3f8bde;_0x3b6a48['sendFile'](path[_0x329748(0x241)](__dirname,bbpath,_0x329748(0x209),_0x329748(0x1fd)));}),app[_0x3f8bde(0x2a3)]('/:bot/coins',(_0x2a980b,_0x6a8c9d)=>{const _0x48c8e0=_0x3f8bde;_0x6a8c9d['sendFile'](path['join'](__dirname,bbpath,_0x48c8e0(0x209),_0x48c8e0(0x1fd)));}),app[_0x3f8bde(0x2a3)](_0x3f8bde(0x285),(_0x365a6b,_0x326eaa)=>{const _0x406c04=_0x3f8bde;_0x326eaa[_0x406c04(0x238)](path['join'](__dirname,bbpath,_0x406c04(0x209),_0x406c04(0x1fd)));}),app[_0x3f8bde(0x2a3)](_0x3f8bde(0x272),(_0x174336,_0x2dcd5a)=>{const _0x1ea656=_0x3f8bde;_0x2dcd5a[_0x1ea656(0x238)](path[_0x1ea656(0x241)](__dirname,bbpath,_0x1ea656(0x209),_0x1ea656(0x1fd)));}),app[_0x3f8bde(0x2a3)]('/:bot/support',(_0x1e8a46,_0x35cfe8)=>{const _0x419cf2=_0x3f8bde;_0x35cfe8[_0x419cf2(0x238)](path[_0x419cf2(0x241)](__dirname,bbpath,'build',_0x419cf2(0x1fd)));});if(HOST)http[_0x3f8bde(0x268)](PORT,HOST);else http[_0x3f8bde(0x268)](PORT);const io=require(_0x3f8bde(0x1d1))(http,{}),analytics=analyticsLib({'app':_0x3f8bde(0x2b0),'plugins':[googleAnalytics({'trackingId':_0x3f8bde(0x2a1)})]}),TelegramBot=require(_0x3f8bde(0x1af));let tgBot;if(settings[_0x3f8bde(0x1f6)]&&settings[_0x3f8bde(0x1f6)]!=''&&settings[_0x3f8bde(0x2a9)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x3205d7=_0x3f8bde;console[_0x3205d7(0x250)](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x3205d7(0x1ec)+PORT),console['log'](_0x3205d7(0x2b7));if(config[_0x3205d7(0x281)]!=0x0)config[_0x3205d7(0x208)](_0x1dc419=>{const _0x278813=_0x3205d7;if(_0x1dc419[_0x278813(0x1fa)]==_0x278813(0x280)||_0x1dc419[_0x278813(0x1fa)]==_0x278813(0x2b2))logging('starting\x20bot\x20|\x20Bot\x20'+_0x1dc419[_0x278813(0x211)]+_0x278813(0x18a)+_0x1dc419[_0x278813(0x1e9)]),startBot([_0x1dc419[_0x278813(0x211)],userID],{'cwd':bbpath},function(_0x5cfdb5){if(_0x5cfdb5)logging(_0x5cfdb5);});else(_0x1dc419[_0x278813(0x1fa)]==_0x278813(0x278)||_0x1dc419[_0x278813(0x1fa)]==_0x278813(0x297))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x1dc419['botID']+_0x278813(0x18a)+_0x1dc419[_0x278813(0x1e9)]);});else!newBot&&console['log'](_0x3205d7(0x1d3));if(newBot)addBot();console[_0x3205d7(0x250)](_0x3205d7(0x2b7)),console[_0x3205d7(0x250)]('');}function startSocket(){io['on']('connection',_0x57d3c1=>{const _0x46fb0c=_0x40e6;let _0x404fb3,_0x48f52f,_0x2d0009,_0x4e68ef,_0x2d520f;const _0x1fdf03=_0x57d3c1[_0x46fb0c(0x18c)][_0x46fb0c(0x291)][_0x46fb0c(0x219)];_0x48f52f=_0x1fdf03['match'](/bot[0-9]{3}/);if(_0x48f52f)_0x2d0009=_0x48f52f[0x0][_0x46fb0c(0x233)](/[0-9]{3}/);if(_0x2d0009)_0x404fb3=_0x2d0009[0x0];else _0x404fb3='botmanager';const _0x1cc5e3=_0x57d3c1['handshake'][_0x46fb0c(0x22a)][_0x46fb0c(0x21c)];if(!_0x1cc5e3)_0x57d3c1[_0x46fb0c(0x21b)](_0x46fb0c(0x1fa),{'publicKey':secure['publicKey']});else{_0x4e68ef=timelyDecrypt(_0x1cc5e3,![]);if(!_0x4e68ef)logging(_0x46fb0c(0x2a2));else{_0x2d520f=normalizeIP(_0x57d3c1[_0x46fb0c(0x1d7)]['remoteAddress'])['store'];if(!devices[_0x4e68ef])devices[_0x4e68ef]={'uuid':_0x4e68ef,'access':{'token':null}};devices[_0x4e68ef]['ip']=_0x2d520f;const _0x258085=addClient(_0x57d3c1['id'],_0x4e68ef,_0x404fb3);setAccess(_0x258085),_0x57d3c1['on'](_0x46fb0c(0x28d),_0x2bbf8b=>{const _0x38b5d5=_0x46fb0c,_0x4875d1=timelyDecrypt(_0x2bbf8b[_0x38b5d5(0x282)]);if(_0x4875d1){_0x2bbf8b={'username':_0x2bbf8b[_0x38b5d5(0x1e7)],'password':_0x4875d1},devices[_0x4e68ef][_0x38b5d5(0x19a)]=validateCredentials(_0x2bbf8b,_0x4e68ef);if(devices[_0x4e68ef]['access'][_0x38b5d5(0x22f)]==![]&&devices[_0x4e68ef][_0x38b5d5(0x19a)][_0x38b5d5(0x19c)]==_0x38b5d5(0x189))_0x57d3c1[_0x38b5d5(0x21b)](_0x38b5d5(0x1fa),{'access':devices[_0x4e68ef][_0x38b5d5(0x19a)]}),loginAccess2FA(_0x4e68ef,_0x2d520f);else{if(devices[_0x4e68ef][_0x38b5d5(0x19a)][_0x38b5d5(0x22f)]==![]&&devices[_0x4e68ef][_0x38b5d5(0x19a)][_0x38b5d5(0x19c)]==_0x38b5d5(0x28b))_0x57d3c1[_0x38b5d5(0x21b)](_0x38b5d5(0x1fa),{'access':devices[_0x4e68ef][_0x38b5d5(0x19a)]});else devices[_0x4e68ef][_0x38b5d5(0x19a)][_0x38b5d5(0x22f)]&&devices[_0x4e68ef]['access'][_0x38b5d5(0x19c)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x4e68ef)[_0x38b5d5(0x208)](_0x11f4b2=>{setAccess(_0x11f4b2);}),setTokenRefresh(_0x4e68ef),setSessionTimeout(_0x38b5d5(0x28d),_0x4e68ef));}}else logging(_0x38b5d5(0x289));}),_0x57d3c1['on'](_0x46fb0c(0x1b5),()=>{resetPassword();}),_0x57d3c1['on'](_0x46fb0c(0x2c7),_0x1ac224=>{removeClient(_0x57d3c1['id']);});}}});}function initClient(_0x26663b){const _0x53ab74=_0x3f8bde;if(_0x26663b!=_0x53ab74(0x298)&&config['apiKey']!=''){if(pid[_0x26663b])pid[_0x26663b][_0x53ab74(0x1ef)]({'function':_0x53ab74(0x1d0),'args':null});}}function getSocket(_0x4149b5){const _0xbb065b=_0x3f8bde;return io[_0xbb065b(0x25a)][_0xbb065b(0x25a)][_0xbb065b(0x2a3)](_0x4149b5);}function setAccess(_0x50a6c4){const _0x428bb8=_0x3f8bde,_0x15cd18=getSocket(_0x50a6c4['id']),_0x43336d=_0x50a6c4['uuid'],_0x12bc4c=_0x50a6c4['bot'];devices[_0x43336d][_0x428bb8(0x19a)]=validateAccess(devices[_0x43336d][_0x428bb8(0x19a)]['token'],_0x43336d),_0x15cd18['join'](_0x43336d);if(devices[_0x43336d][_0x428bb8(0x19a)][_0x428bb8(0x22f)]){_0x15cd18[_0x428bb8(0x241)](_0x12bc4c);if(_0x12bc4c==_0x428bb8(0x298))initializeSocketBotManager(_0x15cd18);else initializeSocketBot(_0x15cd18);initClient(_0x12bc4c);}devices[_0x43336d][_0x428bb8(0x19a)][_0x428bb8(0x1ca)]&&devices[_0x43336d][_0x428bb8(0x19a)]['reason']==_0x428bb8(0x1a2)&&setSessionTimeout(_0x428bb8(0x1df),_0x43336d),devices[_0x43336d][_0x428bb8(0x19a)][_0x428bb8(0x1ca)]&&devices[_0x43336d][_0x428bb8(0x19a)][_0x428bb8(0x19c)]==_0x428bb8(0x246)&&setSessionTimeout(_0x428bb8(0x28d),_0x43336d),_0x15cd18[_0x428bb8(0x21b)]('status',{'status':_0x50a6c4['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x43336d][_0x428bb8(0x19a)],'externalip':devices[_0x43336d]['ip'],'publicKey':secure[_0x428bb8(0x20c)]}),devices[_0x43336d][_0x428bb8(0x19a)][_0x428bb8(0x22f)]==![]&&devices[_0x43336d]['access']['reason']==_0x428bb8(0x21d)&&temporaryAccess2FA(_0x43336d,devices[_0x43336d]['ip']);}function setSessionTimeout(_0x47ce6c,_0x1f428f){const _0x577bfe=_0x3f8bde;let _0x1527ce;if(_0x47ce6c=='login')_0x1527ce=loginExpiry*0x3c*0x3e8;else _0x1527ce=devices[_0x1f428f][_0x577bfe(0x1a7)][_0x577bfe(0x1fe)]*0x3c*0x3e8-(new Date()[_0x577bfe(0x222)]()-devices[_0x1f428f]['telegramIpApproval']['timestamp']);if(devices[_0x1f428f]['pidExpireLogin'])clearTimeout(devices[_0x1f428f][_0x577bfe(0x2be)]);devices[_0x1f428f][_0x577bfe(0x2be)]=setTimeout(()=>{const _0x4cc094=_0x577bfe;if(devices[_0x1f428f][_0x4cc094(0x2bc)])clearTimeout(devices[_0x1f428f][_0x4cc094(0x2bc)]);removeSocketListeners(_0x1f428f),addBlacklist(_0x1f428f),devices[_0x1f428f][_0x4cc094(0x1a7)]=null,devices[_0x1f428f][_0x4cc094(0x28c)]=null,devices[_0x1f428f][_0x4cc094(0x19a)][_0x4cc094(0x1ca)]=null,devices[_0x1f428f]['access']=validateAccess(devices[_0x1f428f][_0x4cc094(0x19a)][_0x4cc094(0x1ca)],_0x1f428f),!(devices[_0x1f428f][_0x4cc094(0x19a)][_0x4cc094(0x22f)]&&devices[_0x1f428f][_0x4cc094(0x19a)][_0x4cc094(0x19c)]==_0x4cc094(0x195))&&(_0x47ce6c=='login'?io['to'](_0x1f428f)['emit'](_0x4cc094(0x1fa),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x1f428f)[_0x4cc094(0x21b)](_0x4cc094(0x1fa),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x1f428f][_0x4cc094(0x19a)][_0x4cc094(0x1ca)]=null;},_0x1527ce);}function setTokenRefresh(_0x32c68c){const _0x26383e=_0x3f8bde;if(devices[_0x32c68c][_0x26383e(0x2bc)])clearTimeout(devices[_0x32c68c][_0x26383e(0x2bc)]);devices[_0x32c68c][_0x26383e(0x2bc)]=setTimeout(()=>{const _0x3de98f=_0x26383e;getClientsWithUuid(_0x32c68c)[_0x3de98f(0x281)]!=0x0?(devices[_0x32c68c][_0x3de98f(0x19a)]=refreshToken(_0x32c68c),io['to'](_0x32c68c)[_0x3de98f(0x21b)](_0x3de98f(0x1fa),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x32c68c][_0x3de98f(0x19a)],'externalip':devices[_0x32c68c]['ip'],'publicKey':secure[_0x3de98f(0x20c)]}),setTokenRefresh(_0x32c68c)):clearTimeout(devices[_0x32c68c][_0x3de98f(0x2bc)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xb85de1){const _0x374990=_0x3f8bde,_0x14aadc=getClient(_0xb85de1['id'])[_0x374990(0x23e)];_0xb85de1[_0x374990(0x21b)](_0x374990(0x1d5),config),_0xb85de1[_0x374990(0x21b)]('settings',cleanSettings()),_0xb85de1['on'](_0x374990(0x1a0),_0x489b4b=>{const _0x36275e=_0x374990;if(validateAccess(_0x489b4b,_0x14aadc)['allow'])addBot();else logging(_0x36275e(0x2c5));}),_0xb85de1['on'](_0x374990(0x183),(_0x99f1cc,_0x1e129d)=>{const _0x35f902=_0x374990;if(validateAccess(_0x1e129d,_0x14aadc)[_0x35f902(0x22f)])toggleBot(_0x99f1cc[_0x35f902(0x211)],_0x99f1cc[_0x35f902(0x1fa)],_0x99f1cc[_0x35f902(0x20e)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0xb85de1['on'](_0x374990(0x1f1),(_0x32deae,_0x4ee318)=>{const _0x443fe6=_0x374990;if(validateAccess(_0x4ee318,_0x14aadc)[_0x443fe6(0x22f)])deleteBot(_0x32deae);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0xb85de1['on'](_0x374990(0x2c2),(_0xceb798,_0x17bbd9)=>{const _0x26e08e=_0x374990;if(validateAccess(_0x17bbd9,_0x14aadc)[_0x26e08e(0x22f)])storeSettings(_0xceb798,!![]);else logging(_0x26e08e(0x1a3));}),_0xb85de1['on']('logout',_0x58d924=>{const _0x569a78=_0x374990;if(validateAccess(_0x58d924,_0x14aadc)[_0x569a78(0x22f)]){if(devices[_0x14aadc][_0x569a78(0x2bc)])clearTimeout(devices[_0x14aadc][_0x569a78(0x2bc)]);if(devices[_0x14aadc][_0x569a78(0x2be)])clearTimeout(devices[_0x14aadc][_0x569a78(0x2be)]);removeSocketListeners(getClient(_0xb85de1['id'])['uuid']),addBlacklist(_0x14aadc),devices[_0x14aadc]['telegramIpApproval']=null,devices[_0x14aadc][_0x569a78(0x28c)]=null,devices[_0x14aadc][_0x569a78(0x19a)][_0x569a78(0x1ca)]=null,io['to'](getClient(_0xb85de1['id'])[_0x569a78(0x23e)])['emit'](_0x569a78(0x1fa),{'access':{'allow':![],'reason':_0x569a78(0x19b),'token':null}});}else logging(_0x569a78(0x192));});}function initializeSocketBot(_0x595192){const _0x10f0a3=_0x3f8bde,_0x16f8cc=getClient(_0x595192['id'])[_0x10f0a3(0x1fc)],_0x15ad05=getClient(_0x595192['id'])[_0x10f0a3(0x23e)];_0x595192['on']('get-logs',(_0x1f771d,_0x57c5cd)=>{const _0x3373d1=_0x10f0a3;if(validateAccess(_0x57c5cd,_0x15ad05)[_0x3373d1(0x22f)]){if(pid[_0x16f8cc])pid[_0x16f8cc][_0x3373d1(0x1ef)]({'function':_0x3373d1(0x232),'args':_0x1f771d});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x595192['on'](_0x10f0a3(0x1ce),(_0x1aeb3e,_0x47cec4)=>{const _0x2e9656=_0x10f0a3;if(validateAccess(_0x47cec4,_0x15ad05)['allow']){if(pid[_0x16f8cc])pid[_0x16f8cc][_0x2e9656(0x1ef)]({'function':_0x2e9656(0x290),'args':_0x1aeb3e});}else logging(_0x2e9656(0x18f));}),_0x595192['on'](_0x10f0a3(0x27a),(_0x407b76,_0x21426e)=>{const _0x56fc20=_0x10f0a3;if(validateAccess(_0x21426e,_0x15ad05)[_0x56fc20(0x22f)]){if(pid[_0x16f8cc])pid[_0x16f8cc]['send']({'function':_0x56fc20(0x267),'args':_0x407b76});}else logging(_0x56fc20(0x204));}),_0x595192['on'](_0x10f0a3(0x2a5),(_0x2735b5,_0x3451a0)=>{const _0x4273f9=_0x10f0a3;if(validateAccess(_0x3451a0,_0x15ad05)[_0x4273f9(0x22f)]){if(pid[_0x16f8cc])pid[_0x16f8cc][_0x4273f9(0x1ef)]({'function':'storeHeadless','args':_0x2735b5});}else logging(_0x4273f9(0x26c));}),_0x595192['on'](_0x10f0a3(0x18d),_0x2ed227=>{const _0xf129f4=_0x10f0a3;if(validateAccess(_0x2ed227,_0x15ad05)[_0xf129f4(0x22f)]){if(pid[_0x16f8cc])pid[_0x16f8cc][_0xf129f4(0x1ef)]({'function':'getStartingBalances','args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x595192['on'](_0x10f0a3(0x1cc),(_0x196822,_0xf7fd98)=>{const _0x53e79d=_0x10f0a3;if(validateAccess(_0xf7fd98,_0x15ad05)['allow']){if(pid[_0x16f8cc])pid[_0x16f8cc]['send']({'function':_0x53e79d(0x258),'args':_0x196822});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x595192['on'](_0x10f0a3(0x223),_0xc9d4be=>{const _0x1f8c4d=_0x10f0a3;if(validateAccess(_0xc9d4be,_0x15ad05)[_0x1f8c4d(0x22f)]){if(pid[_0x16f8cc])pid[_0x16f8cc][_0x1f8c4d(0x1ef)]({'function':_0x1f8c4d(0x224),'args':null});}else logging(_0x1f8c4d(0x25e));}),_0x595192['on'](_0x10f0a3(0x207),_0x2adb9a=>{const _0x541717=_0x10f0a3;if(validateAccess(_0x2adb9a,_0x15ad05)[_0x541717(0x22f)]){if(devices[_0x15ad05][_0x541717(0x2bc)])clearTimeout(devices[_0x15ad05]['pidRefreshToken']);if(devices[_0x15ad05][_0x541717(0x2be)])clearTimeout(devices[_0x15ad05][_0x541717(0x2be)]);removeSocketListeners(getClient(_0x595192['id'])['uuid']),addBlacklist(_0x15ad05),devices[_0x15ad05][_0x541717(0x1a7)]=null,devices[_0x15ad05][_0x541717(0x28c)]=null,devices[_0x15ad05][_0x541717(0x19a)][_0x541717(0x1ca)]=null,io['to'](getClient(_0x595192['id'])[_0x541717(0x23e)])[_0x541717(0x21b)](_0x541717(0x1fa),{'access':{'allow':![],'reason':_0x541717(0x19b),'token':null}});}else logging(_0x541717(0x192));});}function removeSocketListeners(_0x24d7cb){const _0x215bad=_0x3f8bde;getClientsWithUuid(_0x24d7cb)[_0x215bad(0x208)](_0x1cabae=>{const _0x32f7ad=_0x215bad;getSocket(_0x1cabae['id'])[_0x32f7ad(0x260)]();});}function cleanSettings(){const _0x1b68b4=_0x3f8bde;let _0x3db6d4=settings;return settings[_0x1b68b4(0x1f6)]&&settings[_0x1b68b4(0x1f6)]!=''&&(_0x3db6d4={..._0x3db6d4,'telegramToken':_0x1b68b4(0x1bd)}),settings[_0x1b68b4(0x1d4)]&&settings[_0x1b68b4(0x1d4)]!=''&&(_0x3db6d4={..._0x3db6d4,'bbPassword':_0x1b68b4(0x1bd)}),_0x3db6d4;}function startBot(_0x308063,_0x1b049e,_0xaca154){const _0x199416=_0x3f8bde;let _0x52b67b=![];const _0x311302=_0x308063[0x0];_0x1b049e={..._0x1b049e,'stdio':[_0x199416(0x227),_0x199416(0x227),'inherit',_0x199416(0x2ab)]},pid[_0x311302]=childProcess[_0x199416(0x1e8)](botfile,_0x308063,_0x1b049e),pid[_0x311302]['on']('message',_0x4a1ee8=>{const _0x46b8b5=_0x199416;switch(Object['keys'](_0x4a1ee8)[0x0]){case _0x46b8b5(0x1e9):updateBotName(_0x311302,_0x4a1ee8[_0x46b8b5(0x1e9)]);break;case _0x46b8b5(0x1fa):updateStatus(_0x311302,_0x4a1ee8[_0x46b8b5(0x1fa)]);break;case'live':updateLive(_0x311302,_0x4a1ee8['live']);break;case _0x46b8b5(0x2ba):updateLive(_0x311302,_0x4a1ee8[_0x46b8b5(0x2ba)]),io['to'](_0x311302)[_0x46b8b5(0x21b)]('status',{'access':{'allow':![],'reason':_0x46b8b5(0x1d6),'token':null}});break;case _0x46b8b5(0x231):_0x4a1ee8[_0x46b8b5(0x231)]==_0x46b8b5(0x28f)&&stopBot(_0x311302);_0x4a1ee8[_0x46b8b5(0x231)]==_0x46b8b5(0x186)&&toggleBot(_0x311302,_0x46b8b5(0x278),_0x46b8b5(0x2ad));break;case'telegram':sendTelegram(_0x311302,_0x4a1ee8[_0x46b8b5(0x1db)]);break;case'function':io['to'](_0x311302)[_0x46b8b5(0x21b)](_0x4a1ee8[_0x46b8b5(0x194)],_0x4a1ee8['args']);break;}}),pid[_0x311302]['on']('error',function(_0xf305d8){if(_0x52b67b)return;_0x52b67b=!![],_0xaca154(_0xf305d8);}),pid[_0x311302]['on'](_0x199416(0x1e0),function(_0x69d49b){const _0xe10cb4=_0x199416;if(_0x52b67b)return;_0x52b67b=!![],_0xaca154(null);const _0x4e710b=dbConfig[_0xe10cb4(0x2a3)](_0xe10cb4(0x1d5))['find']({'botID':_0x311302})[_0xe10cb4(0x206)]();_0x4e710b&&(_0x4e710b[_0xe10cb4(0x1fa)]=='enabled'||_0x4e710b[_0xe10cb4(0x1fa)]==_0xe10cb4(0x2b2))&&(updateLive(_0x311302,_0xe10cb4(0x2ad)),logging('restarting\x20Bot\x20'+_0x311302),startBot([_0x311302,userID],{'cwd':bbpath},function(_0x5125be){if(_0x5125be)logging(_0x5125be);}));});}function stopBot(_0x121bb6){const _0x3aaeac=_0x3f8bde;getClientsWithBotID(_0x121bb6)['forEach'](_0x48108b=>{const _0x5d05a1=_0x40e6;getSocket(_0x48108b['id'])[_0x5d05a1(0x2c7)](!![]),removeClient(_0x48108b['id']);});if(pid[_0x121bb6])pid[_0x121bb6][_0x3aaeac(0x186)]();}function addBot(){const _0x2cde12=_0x3f8bde;let _0xf15176;for(let _0x4c4673=0x1;_0x4c4673<0x3e9;_0x4c4673++){_0xf15176=_0x4c4673[_0x2cde12(0x1bf)]()[_0x2cde12(0x2b1)](0x3,'0');let _0x13c4e5=config[_0x2cde12(0x2b9)](_0x47bdca=>_0x47bdca[_0x2cde12(0x211)]==_0xf15176);if(!_0x13c4e5)break;}if(_0xf15176==='1000'){logging(_0x2cde12(0x2b4));return;}logging(_0x2cde12(0x1e3)+_0xf15176),dbConfig['get'](_0x2cde12(0x1d5))['push']({'botID':_0xf15176,'botname':_0x2cde12(0x20a)+_0xf15176,'status':_0x2cde12(0x2b2),'live':''})['write'](),startBot([_0xf15176,userID],{'cwd':bbpath},function(_0x22bdc5){if(_0x22bdc5)logging(_0x22bdc5);}),config=getConfiguration(),io['to'](_0x2cde12(0x298))[_0x2cde12(0x21b)](_0x2cde12(0x1d5),config);}function deleteBot(_0xbc2baf){const _0x56a11d=_0x3f8bde;getClientsWithBotID(_0xbc2baf)[_0x56a11d(0x208)](_0x4626a8=>{const _0x2b6dcb=_0x56a11d;getSocket(_0x4626a8['id'])[_0x2b6dcb(0x2c7)](!![]),removeClient(_0x4626a8['id']);}),dbConfig['get'](_0x56a11d(0x1d5))[_0x56a11d(0x1b3)]({'botID':_0xbc2baf})['write'](),logging(_0x56a11d(0x1c9)+_0xbc2baf),stopBot(_0xbc2baf);try{fs[_0x56a11d(0x279)](path[_0x56a11d(0x241)](configpath,_0x56a11d(0x2a8)+_0xbc2baf+'-config.json')),fs['unlinkSync'](path[_0x56a11d(0x241)](configpath,_0x56a11d(0x2a8)+_0xbc2baf+_0x56a11d(0x283))),fs[_0x56a11d(0x279)](path[_0x56a11d(0x241)](configpath,_0x56a11d(0x2a8)+_0xbc2baf+_0x56a11d(0x24d))),fs['unlinkSync'](path[_0x56a11d(0x241)](configpath,_0x56a11d(0x2a8)+_0xbc2baf+_0x56a11d(0x181)));}catch(_0x1565cf){if(_0x1565cf)logging(_0x56a11d(0x1c2),_0x1565cf);}config=getConfiguration(),io['to']('botmanager')[_0x56a11d(0x21b)](_0x56a11d(0x1d5),config);}function toggleBot(_0x173cec,_0x4ce9ce,_0x40e7dc){const _0x593bbb=_0x3f8bde;dbConfig[_0x593bbb(0x2a3)](_0x593bbb(0x1d5))[_0x593bbb(0x2b9)]({'botID':_0x173cec})[_0x593bbb(0x188)]({'status':_0x4ce9ce})[_0x593bbb(0x188)]({'live':_0x40e7dc})[_0x593bbb(0x264)]();if(_0x4ce9ce==_0x593bbb(0x280)||_0x4ce9ce==_0x593bbb(0x2b2))logging(_0x593bbb(0x299)+_0x173cec),startBot([_0x173cec,userID],{'cwd':bbpath},function(_0x267016){if(_0x267016)logging(_0x267016);});else(_0x4ce9ce==_0x593bbb(0x278)||_0x4ce9ce==_0x593bbb(0x297))&&(logging(_0x593bbb(0x1a5)+_0x173cec),stopBot(_0x173cec));config=getConfiguration(),io['to'](_0x593bbb(0x298))[_0x593bbb(0x21b)]('bots',config);}function toggleStatus(_0x3e9caf){const _0x3efa66=_0x3f8bde;let _0x5689e9=dbConfig[_0x3efa66(0x2a3)]('bots')['find']({'botID':_0x3e9caf})[_0x3efa66(0x206)](),_0x4caff5;if(_0x5689e9[_0x3efa66(0x1fa)]===_0x3efa66(0x280))_0x4caff5='disabled';else{if(_0x5689e9[_0x3efa66(0x1fa)]==='new')_0x4caff5=_0x3efa66(0x297);else{if(_0x5689e9['status']===_0x3efa66(0x297))_0x4caff5='new';else{if(_0x5689e9[_0x3efa66(0x1fa)]==='disabled')_0x4caff5=_0x3efa66(0x280);}}}return _0x4caff5;}function updateStatus(_0x1c20b5,_0xed5010){const _0x58b607=_0x3f8bde;dbConfig[_0x58b607(0x2a3)]('bots')[_0x58b607(0x2b9)]({'botID':_0x1c20b5})['assign']({'status':_0xed5010})[_0x58b607(0x264)](),config=getConfiguration(),io['to']('botmanager')[_0x58b607(0x21b)](_0x58b607(0x1d5),config);}function updateLive(_0x26099f,_0x5d418e){const _0x8d010c=_0x3f8bde;dbConfig[_0x8d010c(0x2a3)](_0x8d010c(0x1d5))[_0x8d010c(0x2b9)]({'botID':_0x26099f})[_0x8d010c(0x188)]({'live':_0x5d418e})[_0x8d010c(0x264)](),config=getConfiguration(),io['to'](_0x8d010c(0x298))[_0x8d010c(0x21b)](_0x8d010c(0x1d5),config);}function updateBotName(_0x3c06be,_0x1ff470){const _0x5a44a6=_0x3f8bde;dbConfig[_0x5a44a6(0x2a3)](_0x5a44a6(0x1d5))[_0x5a44a6(0x2b9)]({'botID':_0x3c06be})[_0x5a44a6(0x188)]({'botname':_0x1ff470})['write'](),config=getConfiguration(),io['to'](_0x5a44a6(0x298))[_0x5a44a6(0x21b)](_0x5a44a6(0x1d5),config);}function telegramError(_0x33c38f){const _0x4a4012=_0x3f8bde;console[_0x4a4012(0x250)](getTimeStamp()+_0x4a4012(0x1ab));}function validateTelegram(_0x1b3c08){const _0x38e953=_0x3f8bde;if(_0x1b3c08[_0x38e953(0x225)][_0x38e953(0x1e7)]!=settings[_0x38e953(0x2a9)]&&'@'+_0x1b3c08[_0x38e953(0x225)][_0x38e953(0x1e7)]!=settings[_0x38e953(0x2a9)])return tgBot['sendMessage'](_0x1b3c08[_0x38e953(0x29c)]['id'],_0x38e953(0x22b),{'parse_mode':'HTML'})[_0x38e953(0x1b6)](_0x480896=>{telegramError(_0x480896);}),![];return!![];}async function initTelegram(){const _0x1d70d0=_0x3f8bde;if(tgBot)tgBot[_0x1d70d0(0x220)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1d70d0(0x1f6)],{'polling':!![]});let _0x519e4f=_0x1d70d0(0x201);_0x519e4f+='\x0a',_0x519e4f+=_0x1d70d0(0x196),_0x519e4f+=_0x1d70d0(0x187),_0x519e4f+=_0x1d70d0(0x216),_0x519e4f+=_0x1d70d0(0x248),_0x519e4f+=_0x1d70d0(0x1f2),_0x519e4f+=_0x1d70d0(0x26a),_0x519e4f+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x519e4f+=_0x1d70d0(0x29d);let _0x4eb173=_0x1d70d0(0x2c0);_0x4eb173+='\x0a',_0x4eb173+=_0x519e4f,tgBot['onText'](/\/start/,_0x48ed71=>{const _0x150339=_0x1d70d0;if(!validateTelegram(_0x48ed71))return;if(settings[_0x150339(0x2c3)]!=_0x48ed71[_0x150339(0x29c)]['id'])updateSetting(_0x150339(0x2c3),_0x48ed71[_0x150339(0x29c)]['id']);updateSetting(_0x150339(0x296),!![]),tgBot[_0x150339(0x1c5)](_0x48ed71[_0x150339(0x29c)]['id'],_0x4eb173)[_0x150339(0x1b6)](_0x3df585=>{telegramError(_0x3df585);});}),tgBot[_0x1d70d0(0x1ea)](/\/enable/,_0x501594=>{const _0x4c9aed=_0x1d70d0;if(!validateTelegram(_0x501594))return;if(settings[_0x4c9aed(0x2c3)]!=_0x501594['chat']['id'])updateSetting(_0x4c9aed(0x2c3),_0x501594[_0x4c9aed(0x29c)]['id']);updateSetting(_0x4c9aed(0x296),!![]),tgBot[_0x4c9aed(0x1c5)](_0x501594[_0x4c9aed(0x29c)]['id'],_0x4c9aed(0x243))[_0x4c9aed(0x1b6)](_0x16bcc0=>{telegramError(_0x16bcc0);});}),tgBot[_0x1d70d0(0x1ea)](/\/config/,async _0x5826a3=>{const _0x11441a=_0x1d70d0;if(!validateTelegram(_0x5826a3))return;tgBot[_0x11441a(0x235)](_0x11441a(0x25f)),tgBot[_0x11441a(0x1c5)](_0x5826a3[_0x11441a(0x29c)]['id'],_0x11441a(0x26b),{'reply_markup':{'inline_keyboard':[[{'text':_0x11441a(0x1de),'callback_data':_0x11441a(0x2a7)},{'text':_0x11441a(0x276),'callback_data':_0x11441a(0x251)},{'text':_0x11441a(0x1b9),'callback_data':'all'}]]}})[_0x11441a(0x1b6)](_0x20b645=>{telegramError(_0x20b645);}),tgBot['on']('callback_query',async _0x812d66=>{const _0x5597fa=_0x11441a,_0x4c4209=_0x812d66['data'],_0x33e317=_0x812d66[_0x5597fa(0x21a)];tgBot[_0x5597fa(0x213)](_0x812d66['id'])[_0x5597fa(0x29f)](async()=>{const _0x3702eb=_0x5597fa;_0x4c4209==_0x3702eb(0x2a7)&&(updateSetting(_0x3702eb(0x234),_0x3702eb(0x2a7)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3702eb(0x1c5)](_0x33e317[_0x3702eb(0x29c)]['id'],_0x3702eb(0x266))[_0x3702eb(0x1b6)](_0x1e8768=>{telegramError(_0x1e8768);}));_0x4c4209==_0x3702eb(0x251)&&(updateSetting('telegramEvents',_0x3702eb(0x251)),updateSetting(_0x3702eb(0x296),!![]),await tgBot['sendMessage'](_0x33e317[_0x3702eb(0x29c)]['id'],_0x3702eb(0x23c))[_0x3702eb(0x1b6)](_0x5269dd=>{telegramError(_0x5269dd);}));_0x4c4209==_0x3702eb(0x22e)&&(updateSetting(_0x3702eb(0x234),_0x3702eb(0x22e)),updateSetting(_0x3702eb(0x296),!![]),await tgBot[_0x3702eb(0x1c5)](_0x33e317[_0x3702eb(0x29c)]['id'],_0x3702eb(0x24b))[_0x3702eb(0x1b6)](_0x5dcc96=>{telegramError(_0x5dcc96);}));if(!settings[_0x3702eb(0x2c3)])tgBot['sendMessage'](_0x33e317[_0x3702eb(0x29c)]['id'],_0x3702eb(0x263))[_0x3702eb(0x1b6)](_0x42c70e=>{telegramError(_0x42c70e);});}),tgBot[_0x5597fa(0x235)](_0x5597fa(0x25f));});}),tgBot[_0x1d70d0(0x1ea)](/\/status/,_0x168d51=>{const _0x12e9a5=_0x1d70d0;if(!validateTelegram(_0x168d51))return;let _0x1487e9='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x12e9a5(0x208)](_0x4cf78d=>{const _0x1cb00b=_0x12e9a5;_0x1487e9+=_0x1cb00b(0x20a)+_0x4cf78d['botID']+_0x1cb00b(0x18a)+_0x4cf78d[_0x1cb00b(0x1e9)]+':\x20'+_0x4cf78d[_0x1cb00b(0x1fa)]+_0x1cb00b(0x262)+_0x4cf78d[_0x1cb00b(0x20e)]+'\x0a';}),_0x1487e9+='\x0a',_0x1487e9+=_0x12e9a5(0x27d),_0x1487e9+=!settings['telegramEnabled']?_0x12e9a5(0x2bf):_0x12e9a5(0x27c),_0x1487e9+=settings[_0x12e9a5(0x296)]?settings[_0x12e9a5(0x234)]=='all'?_0x12e9a5(0x1c6):_0x12e9a5(0x1ac)+settings[_0x12e9a5(0x234)]+_0x12e9a5(0x2c1):'',tgBot['sendMessage'](_0x168d51[_0x12e9a5(0x29c)]['id'],_0x1487e9,{'parse_mode':'HTML'})[_0x12e9a5(0x1b6)](_0x4d796f=>{telegramError(_0x4d796f);});}),tgBot[_0x1d70d0(0x1ea)](/\/restart/,_0x383b8f=>{const _0x3d4e39=_0x1d70d0;if(!validateTelegram(_0x383b8f))return;tgBot[_0x3d4e39(0x235)](_0x3d4e39(0x25f));const _0x406c0a=getEnabledBots();if(_0x406c0a[_0x3d4e39(0x281)]==0x0)tgBot[_0x3d4e39(0x1c5)](_0x383b8f[_0x3d4e39(0x29c)]['id'],_0x3d4e39(0x210))[_0x3d4e39(0x1b6)](_0x535390=>{telegramError(_0x535390);});else{if(_0x406c0a[_0x3d4e39(0x281)]>0x1)_0x406c0a[_0x3d4e39(0x2ca)]({'botID':'all'});let _0x28db22=[],_0xd11535=[];const _0x2821e0=_0x406c0a['length']%0x4==0x0||_0x406c0a[_0x3d4e39(0x281)]%0x4==0x3||_0x406c0a[_0x3d4e39(0x281)]%0x3==0x1?0x4:0x3;let _0x1bd42a=0x0;_0x406c0a['forEach']((_0xf12ab6,_0x2fabb2)=>{const _0x34c62b=_0x3d4e39;if(_0x2fabb2%_0x2821e0==0x0)_0xd11535=[];_0xd11535[_0x34c62b(0x2ca)]({'text':_0xf12ab6['botID']==_0x34c62b(0x22e)?_0x34c62b(0x23d):_0x34c62b(0x20a)+_0xf12ab6[_0x34c62b(0x211)],'callback_data':_0xf12ab6['botID']}),_0x2fabb2%_0x2821e0==0x0&&(_0x28db22[_0x1bd42a]=_0xd11535,_0x1bd42a++);}),tgBot[_0x3d4e39(0x1c5)](_0x383b8f[_0x3d4e39(0x29c)]['id'],_0x3d4e39(0x1cb),{'reply_markup':{'inline_keyboard':_0x28db22}})[_0x3d4e39(0x1b6)](_0x3396cc=>{telegramError(_0x3396cc);}),tgBot['on'](_0x3d4e39(0x25f),async _0x1d6ba4=>{const _0x531f91=_0x3d4e39,_0x75ef64=_0x1d6ba4[_0x531f91(0x17d)],_0xa08c51=_0x1d6ba4[_0x531f91(0x21a)];tgBot[_0x531f91(0x213)](_0x1d6ba4['id'])[_0x531f91(0x29f)](async()=>{const _0x382c57=_0x531f91;if(_0x75ef64==_0x382c57(0x22e)){if(settings[_0x382c57(0x234)]=='orders')tgBot['sendMessage'](_0xa08c51[_0x382c57(0x29c)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x382c57(0x1b6)](_0x533fe3=>{telegramError(_0x533fe3);});config[_0x382c57(0x208)](_0x474dde=>{const _0x25a98b=_0x382c57;stopBot(_0x474dde[_0x25a98b(0x211)]);});}else{if(settings['telegramEvents']=='orders')tgBot[_0x382c57(0x1c5)](_0xa08c51['chat']['id'],_0x382c57(0x2b6)+_0x75ef64)['catch'](_0x16c09a=>{telegramError(_0x16c09a);});stopBot(_0x75ef64);}}),tgBot['removeListener'](_0x531f91(0x25f));});}}),tgBot['onText'](/\/on/,_0x15f936=>{const _0x2d4d19=_0x1d70d0;if(!validateTelegram(_0x15f936))return;tgBot[_0x2d4d19(0x235)](_0x2d4d19(0x25f));const _0x217b35=getDisabledBots();if(_0x217b35[_0x2d4d19(0x281)]==0x0)tgBot[_0x2d4d19(0x1c5)](_0x15f936[_0x2d4d19(0x29c)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0xb6f12a=>{telegramError(_0xb6f12a);});else{if(_0x217b35[_0x2d4d19(0x281)]>0x1)_0x217b35[_0x2d4d19(0x2ca)]({'botID':_0x2d4d19(0x22e)});let _0x395bd8=[],_0x49849d=[];const _0x3f2683=_0x217b35['length']%0x4==0x0||_0x217b35[_0x2d4d19(0x281)]%0x4==0x3||_0x217b35['length']%0x3==0x1?0x4:0x3;let _0xf3e7e=0x0;_0x217b35[_0x2d4d19(0x208)]((_0x12a8e0,_0x2998ef)=>{const _0x20a9a9=_0x2d4d19;if(_0x2998ef%_0x3f2683==0x0)_0x49849d=[];_0x49849d[_0x20a9a9(0x2ca)]({'text':_0x12a8e0[_0x20a9a9(0x211)]==_0x20a9a9(0x22e)?'All\x20bots':_0x20a9a9(0x20a)+_0x12a8e0['botID'],'callback_data':_0x12a8e0[_0x20a9a9(0x211)]}),_0x2998ef%_0x3f2683==0x0&&(_0x395bd8[_0xf3e7e]=_0x49849d,_0xf3e7e++);}),tgBot[_0x2d4d19(0x1c5)](_0x15f936[_0x2d4d19(0x29c)]['id'],_0x2d4d19(0x247),{'reply_markup':{'inline_keyboard':_0x395bd8}})[_0x2d4d19(0x1b6)](_0x59de3b=>{telegramError(_0x59de3b);}),tgBot['on'](_0x2d4d19(0x25f),async _0x2165b3=>{const _0x554388=_0x2d4d19,_0x109cf0=_0x2165b3[_0x554388(0x17d)],_0x2b0406=_0x2165b3[_0x554388(0x21a)];tgBot[_0x554388(0x213)](_0x2165b3['id'])['then'](async()=>{const _0x4f764b=_0x554388;if(_0x109cf0==_0x4f764b(0x22e)){if(settings[_0x4f764b(0x234)]==_0x4f764b(0x2a7))tgBot[_0x4f764b(0x1c5)](_0x2b0406[_0x4f764b(0x29c)]['id'],_0x4f764b(0x2aa))[_0x4f764b(0x1b6)](_0x1aa245=>{telegramError(_0x1aa245);});_0x217b35[_0x4f764b(0x208)](_0x2835c1=>{const _0x1fc367=_0x4f764b;if(_0x2835c1['botID']!=_0x1fc367(0x22e))toggleBot(_0x2835c1[_0x1fc367(0x211)],toggleStatus(_0x2835c1[_0x1fc367(0x211)]),_0x1fc367(0x2ad));});}else{if(settings['telegramEvents']==_0x4f764b(0x2a7))tgBot[_0x4f764b(0x1c5)](_0x2b0406[_0x4f764b(0x29c)]['id'],_0x4f764b(0x1aa)+_0x109cf0)[_0x4f764b(0x1b6)](_0x1ff551=>{telegramError(_0x1ff551);});toggleBot(_0x109cf0,toggleStatus(_0x109cf0),_0x4f764b(0x2ad));}}),tgBot['removeListener'](_0x554388(0x25f));});}}),tgBot['onText'](/\/off/,_0x5480f5=>{const _0x24325b=_0x1d70d0;if(!validateTelegram(_0x5480f5))return;tgBot['removeListener']('callback_query');const _0x166cb1=getEnabledBots();if(_0x166cb1['length']==0x0)tgBot[_0x24325b(0x1c5)](_0x5480f5[_0x24325b(0x29c)]['id'],_0x24325b(0x210))[_0x24325b(0x1b6)](_0x58cdea=>{telegramError(_0x58cdea);});else{if(_0x166cb1[_0x24325b(0x281)]>0x1)_0x166cb1[_0x24325b(0x2ca)]({'botID':'all'});let _0x3bd0a1=[],_0x3dedfe=[];const _0x25ea03=_0x166cb1['length']%0x4==0x0||_0x166cb1[_0x24325b(0x281)]%0x4==0x3||_0x166cb1['length']%0x3==0x1?0x4:0x3;let _0x2867cf=0x0;_0x166cb1[_0x24325b(0x208)]((_0x272f64,_0x238f49)=>{const _0x2d6ff9=_0x24325b;if(_0x238f49%_0x25ea03==0x0)_0x3dedfe=[];_0x3dedfe[_0x2d6ff9(0x2ca)]({'text':_0x272f64['botID']==_0x2d6ff9(0x22e)?_0x2d6ff9(0x23d):_0x2d6ff9(0x20a)+_0x272f64['botID'],'callback_data':_0x272f64[_0x2d6ff9(0x211)]}),_0x238f49%_0x25ea03==0x0&&(_0x3bd0a1[_0x2867cf]=_0x3dedfe,_0x2867cf++);}),tgBot[_0x24325b(0x1c5)](_0x5480f5[_0x24325b(0x29c)]['id'],_0x24325b(0x1f4),{'reply_markup':{'inline_keyboard':_0x3bd0a1}})[_0x24325b(0x1b6)](_0x1df03b=>{telegramError(_0x1df03b);}),tgBot['on']('callback_query',async _0x13b8a1=>{const _0x16d73a=_0x24325b,_0x41c71a=_0x13b8a1['data'],_0x2930a5=_0x13b8a1[_0x16d73a(0x21a)];tgBot['answerCallbackQuery'](_0x13b8a1['id'])['then'](async()=>{const _0x4db36a=_0x16d73a;if(_0x41c71a==_0x4db36a(0x22e)){if(settings[_0x4db36a(0x234)]==_0x4db36a(0x2a7))tgBot[_0x4db36a(0x1c5)](_0x2930a5[_0x4db36a(0x29c)]['id'],_0x4db36a(0x2b8))[_0x4db36a(0x1b6)](_0x4a7f5e=>{telegramError(_0x4a7f5e);});_0x166cb1[_0x4db36a(0x208)](_0x101162=>{const _0x2d8e11=_0x4db36a;if(_0x101162['botID']!=_0x2d8e11(0x22e))toggleBot(_0x101162[_0x2d8e11(0x211)],toggleStatus(_0x101162[_0x2d8e11(0x211)]),'stopped');});}else{if(settings[_0x4db36a(0x234)]==_0x4db36a(0x2a7))tgBot[_0x4db36a(0x1c5)](_0x2930a5['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x41c71a)[_0x4db36a(0x1b6)](_0x106b6d=>{telegramError(_0x106b6d);});toggleBot(_0x41c71a,toggleStatus(_0x41c71a),'stopped');}}),tgBot['removeListener'](_0x16d73a(0x25f));});}}),tgBot[_0x1d70d0(0x1ea)](/\/disable/,_0x377df9=>{const _0x289f97=_0x1d70d0;if(!validateTelegram(_0x377df9))return;tgBot[_0x289f97(0x1c5)](_0x377df9[_0x289f97(0x29c)]['id'],'Notifications\x20disabled')[_0x289f97(0x1b6)](_0x1fa552=>{telegramError(_0x1fa552);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x1d70d0(0x1ea)](/\/help/,_0x11dc69=>{const _0x42eaad=_0x1d70d0;if(!validateTelegram(_0x11dc69))return;tgBot['sendMessage'](_0x11dc69[_0x42eaad(0x29c)]['id'],_0x519e4f)[_0x42eaad(0x1b6)](_0x2933c2=>{telegramError(_0x2933c2);});}),tgBot['on'](_0x1d70d0(0x203),_0x2b9f28=>{const _0x2d4b02=_0x1d70d0;_0x2b9f28[_0x2d4b02(0x1bf)]()[_0x2d4b02(0x17e)](_0x2d4b02(0x26f))&&(logging(_0x2d4b02(0x229)),tgBot[_0x2d4b02(0x220)](),tgBot=null,io['to']('botmanager')[_0x2d4b02(0x21b)](_0x2d4b02(0x284),_0x2d4b02(0x229)));}),process[_0x1d70d0(0x1dd)](_0x1d70d0(0x240),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x1d70d0(0x1dd)](_0x1d70d0(0x217),()=>{const _0x11dbdc=_0x1d70d0;if(tgBot)tgBot[_0x11dbdc(0x220)]();process[_0x11dbdc(0x1e0)](0x1);});}}function disableTelegram(){const _0x2f032d=_0x3f8bde;tgBot&&(tgBot[_0x2f032d(0x220)](),tgBot=null);}function sendTelegram(_0x4d4bec,_0x2908a2){const _0x4d3376=_0x3f8bde;if(settings[_0x4d3376(0x296)]){if(settings[_0x4d3376(0x234)]==_0x4d3376(0x22e)||(_0x2908a2[_0x4d3376(0x180)]==_0x4d3376(0x26e)||_0x2908a2[_0x4d3376(0x180)]==_0x4d3376(0x275))&&settings[_0x4d3376(0x234)]==_0x4d3376(0x251)||_0x2908a2[_0x4d3376(0x180)]==_0x4d3376(0x1a1)&&settings['telegramEvents']==_0x4d3376(0x2a7)){if(tgBot&&settings[_0x4d3376(0x2c3)]){if(_0x2908a2[_0x4d3376(0x1fb)])tgBot[_0x4d3376(0x1c5)](settings[_0x4d3376(0x2c3)],_0x2908a2[_0x4d3376(0x1e9)]+_0x4d3376(0x199)+_0x2908a2['event'])[_0x4d3376(0x1b6)](_0x1f7233=>{telegramError(_0x1f7233);});else tgBot[_0x4d3376(0x1c5)](settings[_0x4d3376(0x2c3)],_0x4d3376(0x20a)+_0x4d4bec+_0x4d3376(0x199)+_0x2908a2[_0x4d3376(0x257)])['catch'](_0x41a576=>{telegramError(_0x41a576);});}}}}function getDeviceWithIp(_0x227464){const _0x5b73f7=_0x3f8bde;return devices[_0x5b73f7(0x2b9)](_0xae9a20=>_0xae9a20['ip']===_0x227464);}function temporaryAccess2FA(_0x2f080e,_0x31c1b0){const _0x55e4e0=_0x3f8bde;let _0x377f11=new Date(),_0x1a102c=![];if(lastIpApproval){if(_0x377f11-lastIpApproval<0x1388)_0x1a102c=!![];}lastIpApproval=new Date();if(_0x1a102c)return;tgBot&&settings[_0x55e4e0(0x2c3)]&&(tgBot[_0x55e4e0(0x235)](_0x55e4e0(0x25f)),tgBot[_0x55e4e0(0x1c5)](settings[_0x55e4e0(0x2c3)],_0x55e4e0(0x1b7)+normalizeIP(_0x31c1b0)[_0x55e4e0(0x1f5)]+_0x55e4e0(0x1c4),{'parse_mode':_0x55e4e0(0x200),'reply_markup':{'inline_keyboard':[[{'text':_0x55e4e0(0x1b0),'callback_data':'5'},{'text':_0x55e4e0(0x1ee),'callback_data':'15'},{'text':_0x55e4e0(0x1f8),'callback_data':'30'},{'text':_0x55e4e0(0x221),'callback_data':_0x55e4e0(0x221)}]]}})[_0x55e4e0(0x1b6)](_0x572f5e=>{telegramError(_0x572f5e);}),tgBot['on']('callback_query',async _0x1b3aa1=>{const _0x47b3ef=_0x55e4e0,_0x3fc831=_0x1b3aa1[_0x47b3ef(0x17d)],_0x19e052=_0x1b3aa1[_0x47b3ef(0x21a)];tgBot[_0x47b3ef(0x213)](_0x1b3aa1['id'])['then'](async()=>{const _0x272be6=_0x47b3ef;devices[_0x2f080e][_0x272be6(0x1a7)]={'clientip':_0x31c1b0,'timestamp':new Date()[_0x272be6(0x222)](),'expiry':_0x3fc831},_0x3fc831!=_0x272be6(0x221)?(await tgBot[_0x272be6(0x1c5)](_0x19e052[_0x272be6(0x29c)]['id'],_0x272be6(0x26d)+_0x3fc831+_0x272be6(0x2a0),{'parse_mode':_0x272be6(0x200)})[_0x272be6(0x1b6)](_0x4d565d=>{telegramError(_0x4d565d);}),io['to'](_0x2f080e)[_0x272be6(0x21b)]('status',{'access':{'allow':![],'reason':_0x272be6(0x1d6),'token':null}})):(await tgBot[_0x272be6(0x1c5)](_0x19e052['chat']['id'],_0x272be6(0x20b))[_0x272be6(0x1b6)](_0x41563b=>{telegramError(_0x41563b);}),io['to'](_0x2f080e)[_0x272be6(0x21b)](_0x272be6(0x1fa),{'access':{'allow':![],'reason':_0x272be6(0x28e),'token':null}}));}),tgBot[_0x47b3ef(0x235)]('callback_query');}));}function loginAccess2FA(_0x269716,_0x421238){const _0x52d37=_0x3f8bde;tgBot&&settings[_0x52d37(0x2c3)]&&(tgBot[_0x52d37(0x235)](_0x52d37(0x25f)),tgBot[_0x52d37(0x1c5)](settings[_0x52d37(0x2c3)],_0x52d37(0x19e)+normalizeIP(_0x421238)[_0x52d37(0x1f5)]+_0x52d37(0x1c4),{'parse_mode':_0x52d37(0x200),'reply_markup':{'inline_keyboard':[[{'text':_0x52d37(0x19f),'callback_data':loginExpiry},{'text':_0x52d37(0x221),'callback_data':_0x52d37(0x221)}]]}})[_0x52d37(0x1b6)](_0xc95de1=>{telegramError(_0xc95de1);}),tgBot['on']('callback_query',async _0x18cccf=>{const _0xaea3eb=_0x52d37,_0x3d7bb3=_0x18cccf[_0xaea3eb(0x17d)],_0x230376=_0x18cccf[_0xaea3eb(0x21a)];tgBot[_0xaea3eb(0x213)](_0x18cccf['id'])['then'](async()=>{const _0x3b6648=_0xaea3eb;devices[_0x269716][_0x3b6648(0x28c)]={'clientip':_0x421238,'timestamp':new Date()[_0x3b6648(0x222)](),'expiry':_0x3d7bb3},_0x3d7bb3!='reject'?(await tgBot[_0x3b6648(0x1c5)](_0x230376[_0x3b6648(0x29c)]['id'],'Login\x20accepted',{'parse_mode':_0x3b6648(0x200)})[_0x3b6648(0x1b6)](_0x35f1ff=>{telegramError(_0x35f1ff);}),io['to'](_0x269716)[_0x3b6648(0x21b)](_0x3b6648(0x1fa),{'access':{'allow':![],'reason':_0x3b6648(0x1d6),'token':null}})):(await tgBot[_0x3b6648(0x1c5)](_0x230376[_0x3b6648(0x29c)]['id'],'Login\x20rejected')[_0x3b6648(0x1b6)](_0x4438dc=>{telegramError(_0x4438dc);}),io['to'](_0x269716)['emit'](_0x3b6648(0x1fa),{'access':{'allow':![],'reason':_0x3b6648(0x1b2),'token':null}}));}),tgBot[_0xaea3eb(0x235)](_0xaea3eb(0x25f));}));}function getConfiguration(){const _0x4631b2=_0x3f8bde;return dbConfig[_0x4631b2(0x2a3)](_0x4631b2(0x1d5))[_0x4631b2(0x277)]('botID')[_0x4631b2(0x206)]()||[];}function getEnabledBots(){const _0x12bc5b=_0x3f8bde;return dbConfig['get'](_0x12bc5b(0x1d5))[_0x12bc5b(0x277)](_0x12bc5b(0x211))[_0x12bc5b(0x256)]({'status':_0x12bc5b(0x280)})[_0x12bc5b(0x206)]()||[];}function getDisabledBots(){const _0x2c5fff=_0x3f8bde;return dbConfig[_0x2c5fff(0x2a3)](_0x2c5fff(0x1d5))['sortBy']('botID')['filter']({'status':'disabled'})['value']()||[];}function getSettings(){const _0x175939=_0x3f8bde;return dbSettings[_0x175939(0x2a3)](_0x175939(0x21e))[_0x175939(0x206)]()||{'timeshift':0x0};}function getSecure(){const _0xfe8906=_0x3f8bde;return dbSecure[_0xfe8906(0x2a3)]('secure')[_0xfe8906(0x206)]()||{};}function getBlacklist(){const _0x1f27d8=_0x3f8bde;return dbSecure['get'](_0x1f27d8(0x1b8))[_0x1f27d8(0x206)]()||[];}function broadcastToBots(_0x18b636,_0x816eb3){const _0x492a2b=_0x3f8bde;config[_0x492a2b(0x208)](_0x5bfd0c=>{const _0x31e551=_0x492a2b;if(_0x5bfd0c['status']==_0x31e551(0x280)&&_0x5bfd0c[_0x31e551(0x20e)]=='running'){if(pid[_0x5bfd0c[_0x31e551(0x211)]])pid[_0x5bfd0c[_0x31e551(0x211)]][_0x31e551(0x1ef)]({[_0x18b636]:_0x816eb3});}});}function storeSettings(_0x2e9797,_0x652521=![]){const _0x33cdbf=_0x3f8bde;_0x2e9797={...settings,..._0x2e9797};if(_0x652521&&_0x2e9797['bbPassword']!=_0x33cdbf(0x1bd)&&_0x2e9797['bbPassword']!=''){const _0x56809e=crypt[_0x33cdbf(0x214)](secure['privateKey'],_0x2e9797[_0x33cdbf(0x1d4)])[_0x33cdbf(0x21a)][_0x33cdbf(0x245)]('@')[0x0],_0xbe608=bcrypt[_0x33cdbf(0x1ff)](_0x56809e,saltRounds);_0x2e9797={..._0x2e9797,'bbPassword':_0xbe608};}if(_0x652521&&_0x2e9797[_0x33cdbf(0x1f6)]!='************'&&_0x2e9797[_0x33cdbf(0x1f6)]!=''){const _0x126e90=crypt[_0x33cdbf(0x214)](secure['privateKey'],_0x2e9797[_0x33cdbf(0x1f6)])[_0x33cdbf(0x21a)][_0x33cdbf(0x245)]('@')[0x0];_0x2e9797={..._0x2e9797,'telegramToken':_0x126e90};}const _0x4718e9=_0x2e9797[_0x33cdbf(0x1f6)]!=_0x33cdbf(0x1bd)&&_0x2e9797['telegramToken']!=settings[_0x33cdbf(0x1f6)]||_0x2e9797[_0x33cdbf(0x2a9)]!=settings[_0x33cdbf(0x2a9)],_0x2052ba=_0x2e9797[_0x33cdbf(0x1f6)]==''||_0x2e9797[_0x33cdbf(0x2a9)]=='';if(_0x4718e9)_0x2e9797['telegramEvents']=_0x33cdbf(0x22e);for(const [_0x10b5a4,_0x3a606f]of Object[_0x33cdbf(0x25d)](_0x2e9797)){if(_0x10b5a4=='telegramToken'&&_0x3a606f==_0x33cdbf(0x1bd)){_0x2e9797[_0x33cdbf(0x1f6)]=settings[_0x33cdbf(0x1f6)];continue;};if(_0x10b5a4==_0x33cdbf(0x1d4)&&_0x3a606f=='************'){_0x2e9797[_0x33cdbf(0x1d4)]=settings['bbPassword'];continue;};dbSettings[_0x33cdbf(0x1a9)](_0x33cdbf(0x24f)+_0x10b5a4,_0x3a606f)[_0x33cdbf(0x264)]();}settings=_0x2e9797,io['to'](_0x33cdbf(0x298))[_0x33cdbf(0x21b)](_0x33cdbf(0x21e),cleanSettings()),broadcastToBots(_0x33cdbf(0x239),settings[_0x33cdbf(0x239)]);if(_0x4718e9&&!_0x2052ba)initTelegram();if(_0x4718e9&&_0x2052ba)disableTelegram();getAllClients()['forEach'](_0x27336a=>{const _0x5ad9bc=_0x33cdbf;getSocket(_0x27336a['id'])[_0x5ad9bc(0x21b)](_0x5ad9bc(0x1fa),{'access':{'allow':![],'reason':_0x5ad9bc(0x1d6),'token':null}});});}function updateSetting(_0x5deda3,_0x4ec441){const _0x14aec3=_0x3f8bde;dbSettings[_0x14aec3(0x1a9)]('settings.'+_0x5deda3,_0x4ec441)['write'](),settings=getSettings(),io['to'](_0x14aec3(0x298))[_0x14aec3(0x21b)](_0x14aec3(0x21e),cleanSettings());}function storeSecure(_0x50d8a3){const _0x35f936=_0x3f8bde;dbSecure['get'](_0x35f936(0x288))[_0x35f936(0x2ca)](_0x50d8a3)[_0x35f936(0x264)](),secure=_0x50d8a3;}function addBlacklist(_0x330823){const _0x46d3bd=_0x3f8bde;cleanBlacklist();let _0x18cc36;devices[_0x330823][_0x46d3bd(0x1a7)]?_0x18cc36=Math[_0x46d3bd(0x2bb)](devices[_0x330823][_0x46d3bd(0x1a7)][_0x46d3bd(0x1fe)],loginExpiry):_0x18cc36=loginExpiry,dbSecure['get'](_0x46d3bd(0x1b8))[_0x46d3bd(0x2ca)]({'expiry':new Date()['getTime']()+_0x18cc36*0x3c*0x3e8,'token':devices[_0x330823]['access'][_0x46d3bd(0x1ca)]})[_0x46d3bd(0x264)](),blacklist=dbSecure[_0x46d3bd(0x2a3)]('blacklist')[_0x46d3bd(0x206)]();}function cleanBlacklist(){const _0x2136d9=_0x3f8bde;let _0x3b9d50=dbSecure['get'](_0x2136d9(0x1b8))[_0x2136d9(0x24c)]()[_0x2136d9(0x206)](),_0x2174ef=new Date()[_0x2136d9(0x222)]();_0x3b9d50[_0x2136d9(0x208)](_0x1cf537=>{const _0x5cb917=_0x2136d9;_0x1cf537['expiry']<_0x2174ef&&dbSecure[_0x5cb917(0x2a3)](_0x5cb917(0x1b8))[_0x5cb917(0x1b3)]({'expiry':_0x1cf537[_0x5cb917(0x1fe)]})[_0x5cb917(0x264)]();});}function initStates(){const _0x3177d4=_0x3f8bde;let _0x2e76d5=getConfiguration();_0x2e76d5[_0x3177d4(0x208)](_0x7c28f4=>{const _0x24faf6=_0x3177d4;_0x7c28f4[_0x24faf6(0x20e)]='stopped';}),storeConfiguration(_0x2e76d5);}function onKeys(){const _0x590053=new RSA();return new Promise(_0x3606f3=>{const _0x4fc48e=_0x40e6;_0x590053[_0x4fc48e(0x253)]()[_0x4fc48e(0x29f)](_0x2c1dda=>{_0x3606f3(_0x2c1dda);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x418c51=_0x3f8bde;let _0x393481=getConfiguration(),_0x57b828=![];_0x393481[_0x418c51(0x208)](_0x3efcf1=>{const _0x200227=_0x418c51;if(_0x3efcf1[_0x200227(0x1fa)]==_0x200227(0x190))_0x3efcf1[_0x200227(0x1fa)]=_0x200227(0x280),_0x57b828=!![];else _0x3efcf1[_0x200227(0x1fa)]==_0x200227(0x2ad)&&(_0x3efcf1[_0x200227(0x1fa)]=_0x200227(0x278),_0x57b828=!![]);});if(_0x57b828)storeConfiguration(_0x393481);let _0xd78668=getSecure();if(!_0xd78668[_0x418c51(0x2ae)]('secret')){let _0x4835fd=await generateKeys();_0xd78668['publicKey']=_0x4835fd[_0x418c51(0x20c)],_0xd78668[_0x418c51(0x2c4)]=_0x4835fd[_0x418c51(0x2c4)],_0xd78668[_0x418c51(0x244)]=crypto[_0x418c51(0x1e4)](0x20)['toString'](_0x418c51(0x1f0));;storeSecure(_0xd78668);}let _0x58bb9b=getSettings();_0x57b828=![];!_0x58bb9b[_0x418c51(0x2ae)](_0x418c51(0x252))&&(_0x58bb9b['loginRequired']=![],_0x58bb9b[_0x418c51(0x1a6)]='',_0x58bb9b[_0x418c51(0x1d4)]='',_0x58bb9b[_0x418c51(0x259)]=![],_0x57b828=!![]);!_0x58bb9b[_0x418c51(0x2ae)]('whitelistEnabled')&&(_0x58bb9b[_0x418c51(0x295)]=![],_0x58bb9b[_0x418c51(0x27f)]=[],_0x58bb9b['temporaryAccessAllowed']=![],_0x57b828=!![]);if(!_0x58bb9b[_0x418c51(0x2ae)](_0x418c51(0x296))){if(_0x58bb9b[_0x418c51(0x2c3)])_0x58bb9b[_0x418c51(0x296)]=!![];else _0x58bb9b['telegramEnabled']=![];_0x57b828=!![];}if(_0x57b828)storeSettings(_0x58bb9b);}function storeConfiguration(_0x2ee3ca){const _0x247a1b=_0x3f8bde;dbConfig[_0x247a1b(0x2a3)](_0x247a1b(0x1d5))[_0x247a1b(0x1b3)]()[_0x247a1b(0x264)](),dbConfig[_0x247a1b(0x2a3)](_0x247a1b(0x1d5))[_0x247a1b(0x2ca)](..._0x2ee3ca)[_0x247a1b(0x264)](),config=_0x2ee3ca;}function resetPassword(){const _0x1f11d5=_0x3f8bde;tgBot&&settings['telegramChatId']&&(tgBot[_0x1f11d5(0x235)](_0x1f11d5(0x25f)),tgBot[_0x1f11d5(0x1c5)](settings[_0x1f11d5(0x2c3)],_0x1f11d5(0x23b),{'parse_mode':_0x1f11d5(0x200),'reply_markup':{'inline_keyboard':[[{'text':_0x1f11d5(0x1e1),'callback_data':_0x1f11d5(0x1e1)},{'text':'no','callback_data':'no'}]]}})[_0x1f11d5(0x1b6)](_0x266387=>{telegramError(_0x266387);}),tgBot['on']('callback_query',async _0xeabcb1=>{const _0x2c3f3a=_0x1f11d5,_0x44732f=_0xeabcb1[_0x2c3f3a(0x17d)],_0xa23521=_0xeabcb1['message'];tgBot['answerCallbackQuery'](_0xeabcb1['id'])[_0x2c3f3a(0x29f)](async()=>{const _0x3244eb=_0x2c3f3a;if(_0x44732f!='no'){const _0x5a80b0=0xf,_0x2c0fe2=_0x3244eb(0x218),_0x2e1802=Array[_0x3244eb(0x225)](crypto[_0x3244eb(0x1b1)](new Uint32Array(_0x5a80b0)))[_0x3244eb(0x28a)](_0x50989c=>_0x2c0fe2[_0x50989c%_0x2c0fe2[_0x3244eb(0x281)]])[_0x3244eb(0x241)](''),_0x50b19b=bcrypt['hashSync'](_0x2e1802,saltRounds);storeSettings({'bbPassword':_0x50b19b}),await tgBot['sendMessage'](_0xa23521[_0x3244eb(0x29c)]['id'],_0x3244eb(0x27b)+_0x2e1802,{'parse_mode':_0x3244eb(0x200)})[_0x3244eb(0x1b6)](_0x4e0ab2=>{telegramError(_0x4e0ab2);});}else await tgBot['sendMessage'](_0xa23521[_0x3244eb(0x29c)]['id'],_0x3244eb(0x228))[_0x3244eb(0x1b6)](_0x11b29d=>{telegramError(_0x11b29d);});}),tgBot[_0x2c3f3a(0x235)](_0x2c3f3a(0x25f));}));}function logging(_0x3f0b1a){const _0x41782a=_0x3f8bde;console[_0x41782a(0x250)](getTimeStamp()+_0x41782a(0x274)+_0x3f0b1a);if(tgBot&&settings[_0x41782a(0x2c3)]&&settings[_0x41782a(0x234)]!=_0x41782a(0x2a7))tgBot[_0x41782a(0x1c5)](settings[_0x41782a(0x2c3)],'Bot\x20Mgr\x20>\x20'+_0x3f0b1a)['catch'](_0x3b0ee8=>{telegramError(_0x3b0ee8);});}function getServerTime(){const _0x542163=_0x3f8bde,_0x1c7688=new Date();return _0x1c7688[_0x542163(0x29e)]()+'/'+(_0x1c7688['getMonth']()+0x1)['toString']()[_0x542163(0x2b1)](0x2,'0')+'/'+_0x1c7688[_0x542163(0x182)]()['toString']()[_0x542163(0x2b1)](0x2,'0')+'\x20'+_0x1c7688[_0x542163(0x226)]()['toString']()[_0x542163(0x2b1)](0x2,'0')+':'+_0x1c7688[_0x542163(0x1d9)]()[_0x542163(0x1bf)]()['padStart'](0x2,'0')+':'+_0x1c7688[_0x542163(0x1da)]()[_0x542163(0x1bf)]()[_0x542163(0x2b1)](0x2,'0');}function getTimeStamp(){const _0x5e2637=_0x3f8bde,_0x5a444c=shiftedTime();return _0x5a444c[_0x5e2637(0x29e)]()+'/'+(_0x5a444c[_0x5e2637(0x18e)]()+0x1)[_0x5e2637(0x1bf)]()[_0x5e2637(0x2b1)](0x2,'0')+'/'+_0x5a444c['getDate']()[_0x5e2637(0x1bf)]()[_0x5e2637(0x2b1)](0x2,'0')+'\x20'+_0x5a444c[_0x5e2637(0x226)]()['toString']()[_0x5e2637(0x2b1)](0x2,'0')+':'+_0x5a444c[_0x5e2637(0x1d9)]()[_0x5e2637(0x1bf)]()[_0x5e2637(0x2b1)](0x2,'0')+':'+_0x5a444c[_0x5e2637(0x1da)]()[_0x5e2637(0x1bf)]()[_0x5e2637(0x2b1)](0x2,'0');}function shiftedTime(){const _0x212874=_0x3f8bde,_0x230f0e=new Date();let _0x442e7d=_0x230f0e;if(settings['timeshift']&&settings[_0x212874(0x239)]!==0x0)_0x442e7d=fns[_0x212874(0x29a)](_0x230f0e,{'hours':settings[_0x212874(0x239)]});return _0x442e7d;}function startScheduler(){const _0x5822e1=_0x3f8bde;let _0xb62b73=new Date()[_0x5822e1(0x215)]();_0xb62b73==0x1&&backupConfigFiles();_0xb62b73==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x18e8c9=_0x3f8bde;fs[_0x18e8c9(0x230)](configpath,{'withFileTypes':!![]})[_0x18e8c9(0x208)](_0xd06146=>{const _0x50b0b8=_0x18e8c9;if(!_0xd06146[_0x50b0b8(0x1c1)]())fs[_0x50b0b8(0x24a)](configpath+_0xd06146[_0x50b0b8(0x242)],configbackuppath+_0xd06146[_0x50b0b8(0x242)]);});}function triggerAnalytics(){const _0x2642fb=_0x3f8bde;analytics[_0x2642fb(0x2bd)]({'title':_0x2642fb(0x292),'href':_0x2642fb(0x1dc),'path':'/v'+serverversion});}function validateCredentials(_0x4aae9c,_0x5562ef){const _0x5af2e4=_0x3f8bde;if(_0x4aae9c[_0x5af2e4(0x1e7)]==settings[_0x5af2e4(0x1a6)]&&bcrypt['compareSync'](_0x4aae9c[_0x5af2e4(0x282)],settings[_0x5af2e4(0x1d4)])){if(settings[_0x5af2e4(0x259)])return{'allow':![],'reason':_0x5af2e4(0x189),'token':null};else{const _0x3e4977=generateLoginToken(_0x5562ef);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3e4977};}}else return{'allow':![],'reason':_0x5af2e4(0x28b),'token':null};}function refreshToken(_0x20bfd1){const _0x176873=_0x3f8bde,_0x32cc6a=generateLoginToken(_0x20bfd1);return{'allow':!![],'reason':_0x176873(0x236),'token':_0x32cc6a};}function validateAccess(_0x45282c,_0x201a7b){const _0x5e8ce3=_0x3f8bde;let _0x53ebc9=devices[_0x201a7b]['ip'],_0x31e9de;const _0x4ba592=_0x5d9a3e=>{const _0x59d5ab=_0x40e6;if(settings[_0x59d5ab(0x252)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x201a7b)){const _0x3d5d06=generateLoginToken(_0x201a7b);return{'allow':!![],'reason':_0x59d5ab(0x246),'token':_0x3d5d06};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x31e9de=validToken(_0x5d9a3e,_0x201a7b),_0x31e9de[_0x59d5ab(0x2ae)](_0x59d5ab(0x275))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5d9a3e}:{'allow':![],'reason':_0x59d5ab(0x273),'token':null};}else return{'allow':!![],'reason':_0x59d5ab(0x195),'token':null};};if(settings[_0x5e8ce3(0x295)]){let _0x172553=[...settings[_0x5e8ce3(0x27f)],_0x5e8ce3(0x1e5),_0x5e8ce3(0x184),_0x5e8ce3(0x1c8)];if(_0x172553['includes'](_0x53ebc9))return _0x4ba592(_0x45282c);else{_0x31e9de=validToken(_0x45282c,_0x201a7b);if(_0x31e9de[_0x5e8ce3(0x2ae)](_0x5e8ce3(0x275)))return _0x4ba592(_0x45282c);else{if(telegramIpApproved(_0x201a7b)){const _0x22d4c9=generateToken(_0x201a7b);return _0x31e9de=_0x4ba592(_0x45282c),_0x31e9de['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x22d4c9}:_0x31e9de;}else return settings[_0x5e8ce3(0x1cd)]?{'allow':![],'reason':_0x5e8ce3(0x21d),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4ba592(_0x45282c);}function timelyDecrypt(_0x196955,_0x27de51=!![]){const _0x2d32d9=_0x3f8bde;if(_0x196955)try{const _0x51a6fc=crypt[_0x2d32d9(0x214)](secure['privateKey'],_0x196955)['message'],_0x309b30=_0x51a6fc[_0x2d32d9(0x245)]('@')[0x0],_0x2d4921=_0x51a6fc[_0x2d32d9(0x245)]('@')[0x1],_0x52c786=new Date()[_0x2d32d9(0x222)]();if(_0x27de51){if(_0x52c786-_0x2d4921<maxSecretAge*0x3e8)return _0x309b30;else return![];}else return _0x309b30;}catch(_0x4d3d98){return![];}else return![];}const validToken=(_0x203157,_0x1f05bb)=>{const _0x10de55=_0x3f8bde,_0x2115e9=devices[_0x1f05bb]['ip'];if(!_0x203157)return{'error':_0x10de55(0x1f7)};for(let _0xc7402 of blacklist){if(_0xc7402[_0x10de55(0x1ca)]==_0x203157)return{'error':'Token\x20blacklisted'};}let _0x21f53f;try{_0x21f53f=jwt[_0x10de55(0x25c)](_0x203157,secure[_0x10de55(0x244)]+_0x1f05bb);}catch{return{'error':_0x10de55(0x1ad)};}if(!_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x261))&&!_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x1e7))||!_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x21f)))return{'error':_0x10de55(0x24e)};if(!_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x1e7))&&_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x261))){const {clientip:_0xfda802}=_0x21f53f;return _0x2115e9==_0xfda802?{'success':_0x10de55(0x2a4)}:{'error':_0x10de55(0x20f)};}else{if(_0x21f53f['hasOwnProperty'](_0x10de55(0x1e7))&&_0x21f53f[_0x10de55(0x2ae)](_0x10de55(0x261))){const {username:_0x1c5cf4,clientip:_0x2bd392}=_0x21f53f;return settings[_0x10de55(0x1a6)]==_0x1c5cf4&&_0x2115e9==_0x2bd392?{'success':_0x10de55(0x2a4)}:{'error':_0x10de55(0x20d)};}}},generateLoginToken=_0x41b6d4=>{const _0x14b95a=_0x3f8bde;if(_0x41b6d4){const _0x4ae7fc=devices[_0x41b6d4]['ip'];return jwt[_0x14b95a(0x1bc)]({'username':settings['bbUsername'],'clientip':_0x4ae7fc},secure[_0x14b95a(0x244)]+_0x41b6d4,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x29ddec=>{const _0x2e6f3c=_0x3f8bde;if(_0x29ddec){const _0x508377=devices[_0x29ddec]['ip'];return jwt[_0x2e6f3c(0x1bc)]({'clientip':_0x508377},secure[_0x2e6f3c(0x244)]+_0x29ddec,{'expiresIn':devices[_0x29ddec]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x3de49c=>{const _0x187628=_0x3f8bde;let _0x11e242=![];return devices[_0x3de49c][_0x187628(0x1a7)]&&devices[_0x3de49c][_0x187628(0x1a7)][_0x187628(0x1fe)]!=_0x187628(0x221)&&(_0x11e242=devices[_0x3de49c][_0x187628(0x1a7)][_0x187628(0x261)]==devices[_0x3de49c]['ip']&&new Date()[_0x187628(0x222)]()-devices[_0x3de49c][_0x187628(0x1a7)][_0x187628(0x1be)]<devices[_0x3de49c][_0x187628(0x1a7)]['expiry']*0x3c*0x3e8),_0x11e242;},telegram2FaApproved=_0x2872bd=>{const _0x167484=_0x3f8bde;let _0x1c35eb=![];return devices[_0x2872bd][_0x167484(0x28c)]&&devices[_0x2872bd][_0x167484(0x28c)][_0x167484(0x1fe)]!=_0x167484(0x221)&&(_0x1c35eb=devices[_0x2872bd][_0x167484(0x28c)]['clientip']==devices[_0x2872bd]['ip']&&new Date()[_0x167484(0x222)]()-devices[_0x2872bd]['telegram2FaApproval'][_0x167484(0x1be)]<devices[_0x2872bd][_0x167484(0x28c)]['expiry']*0x3c*0x3e8),_0x1c35eb;},normalizeIP=_0x2322ef=>{const _0x91541e=_0x3f8bde;let _0x57f578=null,_0x42620b=null;if(ipaddr[_0x91541e(0x193)](_0x2322ef)){const _0x212975=ipaddr['parse'](_0x2322ef);_0x212975[_0x91541e(0x1c7)]()==='ipv6'?(_0x212975[_0x91541e(0x254)]()&&(_0x57f578=_0x212975[_0x91541e(0x1d8)]()[_0x91541e(0x1bf)]()),_0x42620b=_0x212975['toString']()):(_0x57f578=_0x212975['toString'](),_0x42620b=_0x212975['toIPv4MappedAddress']()[_0x91541e(0x1bf)]());}return{'show':_0x57f578?_0x57f578:_0x42620b,'store':_0x42620b};};