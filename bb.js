const _0x5995b8=_0xea73;(function(_0x4d8c4d,_0x21484e){const _0x9a898d=_0xea73,_0x282807=_0x4d8c4d();while(!![]){try{const _0x8e625=parseInt(_0x9a898d(0x22f))/0x1+parseInt(_0x9a898d(0x28c))/0x2+-parseInt(_0x9a898d(0x247))/0x3+-parseInt(_0x9a898d(0x1f3))/0x4*(parseInt(_0x9a898d(0x19f))/0x5)+parseInt(_0x9a898d(0x1f0))/0x6*(parseInt(_0x9a898d(0x23b))/0x7)+parseInt(_0x9a898d(0x27d))/0x8+parseInt(_0x9a898d(0x27b))/0x9*(-parseInt(_0x9a898d(0x202))/0xa);if(_0x8e625===_0x21484e)break;else _0x282807['push'](_0x282807['shift']());}catch(_0x477521){_0x282807['push'](_0x282807['shift']());}}}(_0x5485,0xe395a));const _0x352ad7=function(){let _0x3d4ef1=!![];return function(_0x2d4f96,_0x51d281){const _0x3504da=_0x3d4ef1?function(){const _0x4ca613=_0xea73;if(_0x51d281){const _0x36d5fc=_0x51d281[_0x4ca613(0x1be)](_0x2d4f96,arguments);return _0x51d281=null,_0x36d5fc;}}:function(){};return _0x3d4ef1=![],_0x3504da;};}(),_0xaa367=_0x352ad7(this,function(){const _0x5f557b=_0xea73;return _0xaa367[_0x5f557b(0x266)]()[_0x5f557b(0x21d)](_0x5f557b(0x2a2))[_0x5f557b(0x266)]()[_0x5f557b(0x212)](_0xaa367)[_0x5f557b(0x21d)]('(((.+)+)+)+$');});_0xaa367();'use strict';process[_0x5995b8(0x19e)][_0x5995b8(0x1f7)]=0x1;const childProcess=require(_0x5995b8(0x1a4)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x5995b8(0x2b6)),low=require(_0x5995b8(0x20c)),path=require(_0x5995b8(0x1e5)),crypto=require('crypto'),Crypt=require(_0x5995b8(0x1e0))[_0x5995b8(0x1a1)],RSA=require(_0x5995b8(0x1e0))['RSA'],bcrypt=require(_0x5995b8(0x25f)),jwt=require(_0x5995b8(0x1bd)),analyticsLib=require(_0x5995b8(0x272))[_0x5995b8(0x20e)],googleAnalytics=require('@analytics/google-analytics')[_0x5995b8(0x20e)],ipaddr=require(_0x5995b8(0x1d7));let bbpath=_0x5995b8(0x1f8);const botfile=_0x5995b8(0x207),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x5995b8(0x22d);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const configpath=bbpath+_0x5995b8(0x264);!fs[_0x5995b8(0x1fd)](configpath)&&fs[_0x5995b8(0x243)](configpath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5995b8(0x1c4)]({'bots':[]})[_0x5995b8(0x1a9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5995b8(0x1c4)]({'settings':{'timeshift':0x0}})[_0x5995b8(0x1a9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5995b8(0x1c4)]({'secure':{},'blacklist':[]})[_0x5995b8(0x1a9)]();let crypt=new Crypt({'md':_0x5995b8(0x27f),'rsaStandard':_0x5995b8(0x262)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+'version.json')[_0x5995b8(0x1ce)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require(_0x5995b8(0x1f2)),app=express(),http=require(_0x5995b8(0x1b7))[_0x5995b8(0x1db)](app);app[_0x5995b8(0x258)](express['static'](path['join'](__dirname,bbpath,'build2'))),app[_0x5995b8(0x258)](express['static'](path['join'](__dirname,bbpath,_0x5995b8(0x293)))),app[_0x5995b8(0x23e)]('/',function(_0x2e7288,_0x5ede47){const _0x40c6ee=_0x5995b8;_0x5ede47['sendFile'](path[_0x40c6ee(0x210)](__dirname,bbpath,_0x40c6ee(0x20a),_0x40c6ee(0x20f)));}),app[_0x5995b8(0x23e)](_0x5995b8(0x1e1),function(_0x1e221b,_0x494ae4){const _0x5e6d23=_0x5995b8;_0x494ae4['sendFile'](path[_0x5e6d23(0x210)](__dirname,bbpath,_0x5e6d23(0x293),'index.html'));}),app[_0x5995b8(0x23e)](_0x5995b8(0x268),(_0x360b76,_0xe8844d)=>{const _0x1e3a76=_0x5995b8;_0xe8844d['sendFile'](path[_0x1e3a76(0x210)](__dirname,bbpath,'build',_0x1e3a76(0x20f)));}),app[_0x5995b8(0x23e)]('/:bot/performance',(_0x433b5c,_0xa81516)=>{const _0x145fc5=_0x5995b8;_0xa81516[_0x145fc5(0x296)](path[_0x145fc5(0x210)](__dirname,bbpath,_0x145fc5(0x293),_0x145fc5(0x20f)));}),app['get'](_0x5995b8(0x27a),(_0x5220c0,_0x4bb78a)=>{const _0x4ef0ba=_0x5995b8;_0x4bb78a[_0x4ef0ba(0x296)](path[_0x4ef0ba(0x210)](__dirname,bbpath,_0x4ef0ba(0x293),_0x4ef0ba(0x20f)));}),app[_0x5995b8(0x23e)](_0x5995b8(0x1ff),(_0x30df1a,_0x2d3f08)=>{const _0x407b55=_0x5995b8;_0x2d3f08[_0x407b55(0x296)](path[_0x407b55(0x210)](__dirname,bbpath,_0x407b55(0x293),_0x407b55(0x20f)));}),app['get'](_0x5995b8(0x236),(_0x4b20f6,_0x277bc6)=>{const _0x4fa16b=_0x5995b8;_0x277bc6[_0x4fa16b(0x296)](path[_0x4fa16b(0x210)](__dirname,bbpath,'build',_0x4fa16b(0x20f)));}),app[_0x5995b8(0x23e)](_0x5995b8(0x298),(_0x4dfba5,_0x2a46c3)=>{const _0x447e1b=_0x5995b8;_0x2a46c3['sendFile'](path[_0x447e1b(0x210)](__dirname,bbpath,_0x447e1b(0x293),'index.html'));}),http[_0x5995b8(0x1d1)](PORT);const analytics=analyticsLib({'app':_0x5995b8(0x2af),'plugins':[googleAnalytics({'trackingId':_0x5995b8(0x19d)})]}),TelegramBot=require(_0x5995b8(0x204));let tgBot;function _0x5485(){const _0x59c372=['build2','order','lowdb','show','default','index.html','join','emit','constructor','expiry','yes','isIPv4MappedAddress','exit','function','reason','ipc','removeListener','store-headless','push','search','alerts','length','then','headers','15\x20min','Unauthorized\x20attempt\x20to\x20store\x20configuration','answerCallbackQuery','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','telegramChatId','error\x20while\x20deleting\x20log\x20files:\x20','store','error','getUTCHours','2FA\x20login\x20token\x20generated','Notifications\x20enabled\x0a','bb-secure.json','sendMessage','1092088aKQMHu','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20log\x20out','accept','temporaryAccessAllowed','starting','reset-password','/:bot/configuration','catch','add-bot','unlinkSync','sign','14sYjRut','telegramEnabled','running','get','\x20|\x20','\x20>\x20','clientip','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','mkdirSync','All','storeHeadless','telegramEvents','1831923AtTQfA','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','publicKey','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','data','/disable\x20-\x20disable\x20notifications\x0a','remove',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','page','orders','restarting\x20Bot\x20','Login\x20rejected','decrypt','/enable\x20-\x20enable\x20notifications\x0a','invalid\x20credentials','set','use','logged\x20out','************','parse','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','::ffff:127.0.0.1','login','bcryptjs','polling_error','privateKey','RSA-OAEP','add','config/','\x20/\x20','toString','Bot\x20','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20get\x20logs','Invalid\x20authentication\x20token\x20(1)','Invalid\x20username\x20or\x20IP\x20address','access\x20timeout','Unauthorized\x20attempt\x20to\x20update\x20settings','</b>\x20?','initclient','onText','Login\x20accepted','analytics','find','-performance.json','whitelist','encryptedUuid','2FA\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','generateKeyPairAsync','/:bot/coins','171ciuKsj','404\x20Not\x20Found','9110504MBRWMH','timeshift','sha256','disconnect','hashSync','value','max','secure','sortBy','telegramToken','30\x20min','connected','botmanager','logout','Balance\x20Bot\x20Server','2606686nSCmop','Token\x20blacklisted','<b>Telegram\x20bot\x20status:</b>\x0a','login\x20not\x20required','telegramUsername','-----------------------------------------------------------------------------------','Invalid\x20Telegram\x20token','build','\x20only\x0a','Alerts','sendFile','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/:bot/support','get-portfolio','settings.','stopPolling','Ok,\x20will\x20send\x20alert\x20notifications\x20only','<b>Balance\x20Bot\x20status:</b>\x0a','Notifications\x20enabled','get-starting-balances','auth','password','(((.+)+)+)+$','place-order','blacklist','reload','get-logs','Invalid\x20authentication\x20token\x20(2)','getDate','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','toIPv4Address','bbPassword','allow','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Balance\x20Bot','HTML','getSeconds','Notifications\x20types:\x20','compareSync','keys','storeConfiguration','date-fns','Allow\x20login\x20from\x20IP\x20address\x20<b>','event','whitelistEnabled','entries','User\x20has\x20been\x20validated','username','deleted\x20Bot\x20','exp','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','randomFillSync','log','message','fork','login\x20token\x20generated','disabled\x20Bot\x20','started','login\x20required','status','UA-192771731-1','env','10lnfeBk','botname','Crypt','chat','1000','child_process','No\x20bots\x20enabled\x20right\x20now','Invalid\x20IP\x20address','getFullYear','Unauthorized\x20attempt\x20to\x20get\x20portfolio','write','map','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a',':\x20Bot\x20Mgr\x20>\x20','getStartingBalances','notification','all','Unauthorized\x20attempt\x20to\x20update\x20bot','Ok,\x20will\x20send\x20order\x20notifications\x20only','randomBytes','bbUsername','SIGINT','starting\x20bot\x20|\x20Bot\x20','telegram','http','bots','removeAllListeners','Password\x20reset\x20rejected','stop','-results.json','jsonwebtoken','apply','type','conn','\x20minutes','2FA\x20login\x20required','botID','defaults','SIGTERM','inherit','Bot\x20Mgr\x20>\x20','send','Temporary\x20access\x20rejected','hasOwnProperty','disabled','token','f2aRequired','version','hex','::1','listen','Notifications\x20disabled\x0a','kind','new','No\x20authentication\x20token','handshake','ipaddr.js','toIPv4MappedAddress','loginRequired','bot-','createServer','once','Orders','getHours','ipv6','hybrid-crypto-js','/:bot','includes','live','split','path','secret','success','temporary\x20token\x20generated','Access\x20enabled\x20for\x20','filter','match','forEach','enabled','store-configuration','reject','401184eUANFq','referer','express','2927852FEVWro','stopped','https://hodlerhacks.com','new-disabled','NTBA_FIX_319','bb/','callback_query','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','getTime','assign','existsSync','from','/:bot/history','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','348010kXLqvi','/status\x20-\x20show\x20the\x20status\x20of\x20your\x20bots\x0a','node-telegram-bot-api','timestamp','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bot.js','settings','padStart'];_0x5485=function(){return _0x59c372;};return _0x5485();}if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x5995b8(0x290)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function startServer(){const _0x48bcbf=_0x5995b8;console[_0x48bcbf(0x2c1)](''),console[_0x48bcbf(0x2c1)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x48bcbf(0x2c1)](_0x48bcbf(0x291));if(config[_0x48bcbf(0x21f)]!=0x0)config[_0x48bcbf(0x1ec)](_0x447123=>{const _0x401243=_0x48bcbf;if(_0x447123[_0x401243(0x19c)]==_0x401243(0x1ed)||_0x447123['status']==_0x401243(0x1d4))logging(_0x401243(0x1b5)+_0x447123['botID']+'\x20|\x20'+_0x447123['botname']),startBot([_0x447123['botID']],{'cwd':bbpath},function(_0x1932f9){if(_0x1932f9)logging(_0x1932f9);});else(_0x447123[_0x401243(0x19c)]==_0x401243(0x1cb)||_0x447123['status']=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x447123['botID']+'\x20|\x20'+_0x447123['botname']);});else!newBot&&console['log'](_0x48bcbf(0x1fa));if(newBot)addBot();console[_0x48bcbf(0x2c1)](_0x48bcbf(0x291)),console[_0x48bcbf(0x2c1)]('');}function startSocket(){const _0x5460fd=require('socket.io')(http,{});_0x5460fd['on']('connection',_0x472914=>{const _0x1f2f4f=_0xea73;let _0x2a07a3,_0x402e9f,_0x18493b;const _0x43d748=_0x472914['handshake'][_0x1f2f4f(0x221)][_0x1f2f4f(0x1f1)],_0x2ef7e5=_0x472914[_0x1f2f4f(0x1d6)][_0x1f2f4f(0x2a0)][_0x1f2f4f(0x276)];if(!_0x2ef7e5)_0x472914[_0x1f2f4f(0x211)](_0x1f2f4f(0x19c),{'publicKey':secure[_0x1f2f4f(0x249)]});else{uuid=timelyDecrypt(_0x472914['handshake'][_0x1f2f4f(0x2a0)]['encryptedUuid'],![]),_0x402e9f=_0x43d748['match'](/bot[0-9]{3}/);if(_0x402e9f)_0x18493b=_0x402e9f[0x0][_0x1f2f4f(0x1eb)](/[0-9]{3}/);if(_0x18493b)_0x2a07a3=_0x18493b[0x0];else _0x2a07a3='botmanager';if(socket[_0x2a07a3])socket[_0x2a07a3][_0x1f2f4f(0x280)](!![]);socket[_0x2a07a3]=_0x472914,setAccess(_0x2a07a3);if(accessControl[_0x1f2f4f(0x2ad)]){if(_0x2a07a3==_0x1f2f4f(0x289))initializeSocketBotManager();else initializeSocketBot(_0x2a07a3);}if(!serverStatus[_0x2a07a3])serverStatus[_0x2a07a3]=_0x1f2f4f(0x288);socket[_0x2a07a3]['on'](_0x1f2f4f(0x25e),_0x4a14a4=>{const _0x5ae282=_0x1f2f4f,_0x1033a2=timelyDecrypt(_0x4a14a4[_0x5ae282(0x2a1)]);if(_0x1033a2){_0x4a14a4={'username':_0x4a14a4[_0x5ae282(0x2bc)],'password':_0x1033a2};let _0x10a608=validateCredentials(_0x4a14a4);if(_0x10a608['allow']==![]&&_0x10a608[_0x5ae282(0x218)]==_0x5ae282(0x1c2))socket[_0x2a07a3][_0x5ae282(0x211)](_0x5ae282(0x19c),{'access':_0x10a608}),loginAccess2FA(externalip);else{if(_0x10a608[_0x5ae282(0x2ad)]==![]&&_0x10a608[_0x5ae282(0x218)]==_0x5ae282(0x256))socket[_0x2a07a3][_0x5ae282(0x211)](_0x5ae282(0x19c),{'access':_0x10a608});else{if(_0x10a608['allow']&&_0x10a608[_0x5ae282(0x218)]=='login\x20token\x20generated'){token=_0x10a608[_0x5ae282(0x1cc)];for(let _0x29d771 in socket){if(_0x29d771==_0x5ae282(0x289))initializeSocketBotManager();else initializeSocketBot(_0x29d771);socket[_0x29d771][_0x5ae282(0x211)](_0x5ae282(0x19c),{'status':serverStatus[_0x29d771]||_0x5ae282(0x234),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x10a608,'externalip':externalip,'publicKey':secure[_0x5ae282(0x249)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout(_0x5ae282(0x25e));}}}}else logging(_0x5ae282(0x201));}),socket[_0x2a07a3]['on'](_0x1f2f4f(0x235),()=>{resetPassword();}),socket[_0x2a07a3]['on'](_0x1f2f4f(0x280),_0x543c25=>{let _0x142610=[];for(let _0x2f572e in socket){if(_0x2f572e!=_0x2a07a3)_0x142610[_0x2f572e]=socket[_0x2f572e];}socket=_0x142610;});if(_0x2a07a3!=_0x1f2f4f(0x289)&&config['apiKey']!=''){if(pid[_0x2a07a3])pid[_0x2a07a3][_0x1f2f4f(0x1c8)]({'function':_0x1f2f4f(0x26f),'args':null});}}});}function setAccess(_0x56181a){const _0x281c32=_0x5995b8;externalip=normalizeIP(socket[_0x56181a][_0x281c32(0x1c0)]['remoteAddress'])[_0x281c32(0x228)],accessControl=validateAccess(token),accessControl[_0x281c32(0x1cc)]&&accessControl[_0x281c32(0x218)]==_0x281c32(0x1e8)&&setSessionTimeout('2FA'),accessControl['token']&&accessControl['reason']==_0x281c32(0x22b)&&setSessionTimeout('login'),socket[_0x56181a][_0x281c32(0x211)]('status',{'status':serverStatus[_0x56181a]||_0x281c32(0x234),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':accessControl[_0x281c32(0x218)]=='login\x20required'||accessControl[_0x281c32(0x218)]==_0x281c32(0x1c2)}),accessControl[_0x281c32(0x2ad)]==![]&&accessControl[_0x281c32(0x218)]==_0x281c32(0x277)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x564741){const _0x5b7dfa=_0x5995b8;let _0x2d9f77;if(_0x564741==_0x5b7dfa(0x25e))_0x2d9f77=loginExpiry*0x3c*0x3e8;else _0x2d9f77=telegramIpApproval[_0x5b7dfa(0x213)]*0x3c*0x3e8-(new Date()[_0x5b7dfa(0x1fb)]()-telegramIpApproval[_0x5b7dfa(0x205)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x45cc55=_0x5b7dfa;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x5c9e0e=validateAccess(token);if(!(_0x5c9e0e[_0x45cc55(0x2ad)]&&_0x5c9e0e['reason']==_0x45cc55(0x28f)))for(let _0x516d22 in socket){socket[_0x516d22]['emit'](_0x45cc55(0x19c),{'access':{'allow':![],'reason':_0x45cc55(0x26c),'token':null}});}token=null;},_0x2d9f77);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x228694=_0xea73;let _0x1af770=refreshToken();for(let _0x53d448 in socket){socket[_0x53d448][_0x228694(0x211)](_0x228694(0x19c),{'status':serverStatus[_0x53d448]||_0x228694(0x234),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x1af770,'externalip':externalip,'publicKey':secure[_0x228694(0x249)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x116306=_0x5995b8;socket[_0x116306(0x289)][_0x116306(0x211)]('bots',config),socket[_0x116306(0x289)][_0x116306(0x211)](_0x116306(0x208),cleanSettings()),socket[_0x116306(0x289)]['on'](_0x116306(0x238),_0x2021c6=>{const _0x5b9639=_0x116306;if(validateAccess(_0x2021c6)[_0x5b9639(0x2ad)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),socket[_0x116306(0x289)]['on']('update-bot',(_0x5e41ad,_0x534db0)=>{const _0xbb09f=_0x116306;if(validateAccess(_0x534db0)[_0xbb09f(0x2ad)])toggleBot(_0x5e41ad[_0xbb09f(0x1c3)],_0x5e41ad['status'],_0x5e41ad[_0xbb09f(0x1e3)]);else logging(_0xbb09f(0x1b0));}),socket['botmanager']['on']('delete-bot',(_0x91105,_0x5b5824)=>{if(validateAccess(_0x5b5824)['allow'])deleteBot(_0x91105);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),socket[_0x116306(0x289)]['on']('store-settings',(_0x436bda,_0x1d1eb4)=>{const _0x34e84a=_0x116306;if(validateAccess(_0x1d1eb4)[_0x34e84a(0x2ad)])storeSettings(_0x436bda,!![]);else logging(_0x34e84a(0x26d));}),socket[_0x116306(0x289)]['on'](_0x116306(0x28a),_0x58d389=>{const _0x4e820d=_0x116306;if(validateAccess(_0x58d389)[_0x4e820d(0x2ad)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0xd95696 in socket){socket[_0xd95696][_0x4e820d(0x211)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging(_0x4e820d(0x231));});}function initializeSocketBot(_0x1b2003){const _0x4959dd=_0x5995b8;socket[_0x1b2003]['on'](_0x4959dd(0x2a6),(_0x2e831f,_0x45bddb)=>{const _0x5f58aa=_0x4959dd;if(validateAccess(_0x45bddb)[_0x5f58aa(0x2ad)]){if(pid[_0x1b2003])pid[_0x1b2003][_0x5f58aa(0x1c8)]({'function':'emitHistory','args':_0x2e831f});}else logging(_0x5f58aa(0x269));}),socket[_0x1b2003]['on'](_0x4959dd(0x299),(_0x521562,_0x25bbe2)=>{const _0x22cb02=_0x4959dd;if(validateAccess(_0x25bbe2)[_0x22cb02(0x2ad)]){if(pid[_0x1b2003])pid[_0x1b2003][_0x22cb02(0x1c8)]({'function':'getPortfolio','args':_0x521562});}else logging(_0x22cb02(0x1a8));}),socket[_0x1b2003]['on'](_0x4959dd(0x1ee),(_0x32c1d6,_0x413f73)=>{const _0x328f6f=_0x4959dd;if(validateAccess(_0x413f73)[_0x328f6f(0x2ad)]){if(pid[_0x1b2003])pid[_0x1b2003][_0x328f6f(0x1c8)]({'function':_0x328f6f(0x2b5),'args':_0x32c1d6});}else logging(_0x328f6f(0x223));}),socket[_0x1b2003]['on'](_0x4959dd(0x21b),(_0x5c4c9c,_0x35c17b)=>{const _0xa9c435=_0x4959dd;if(validateAccess(_0x35c17b)['allow']){if(pid[_0x1b2003])pid[_0x1b2003]['send']({'function':_0xa9c435(0x245),'args':_0x5c4c9c});}else logging(_0xa9c435(0x2aa));}),socket[_0x1b2003]['on'](_0x4959dd(0x29f),_0x57df67=>{const _0x7a0239=_0x4959dd;if(validateAccess(_0x57df67)[_0x7a0239(0x2ad)]){if(pid[_0x1b2003])pid[_0x1b2003][_0x7a0239(0x1c8)]({'function':_0x7a0239(0x1ad),'args':null});}else logging(_0x7a0239(0x297));}),socket[_0x1b2003]['on'](_0x4959dd(0x2a3),(_0xeeea15,_0x522f10)=>{const _0x4cd0a4=_0x4959dd;if(validateAccess(_0x522f10)[_0x4cd0a4(0x2ad)]){if(pid[_0x1b2003])pid[_0x1b2003][_0x4cd0a4(0x1c8)]({'function':'placeOrder','args':_0xeeea15});}else logging(_0x4cd0a4(0x225));}),socket[_0x1b2003]['on'](_0x4959dd(0x28a),_0x7a9709=>{const _0x355b4e=_0x4959dd;if(validateAccess(_0x7a9709)[_0x355b4e(0x2ad)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x10d553 in socket){socket[_0x10d553][_0x355b4e(0x211)](_0x355b4e(0x19c),{'access':{'allow':![],'reason':_0x355b4e(0x259),'token':null}});}}else logging(_0x355b4e(0x231));});}function removeSocketListeners(){const _0x36a5c2=_0x5995b8;for(let _0x5d2ea3 in socket){socket[_0x5d2ea3][_0x36a5c2(0x1b9)]();}}function cleanSettings(){const _0x31b898=_0x5995b8;let _0x2ac302=settings;return settings['telegramToken']&&settings[_0x31b898(0x286)]!=''&&(_0x2ac302={..._0x2ac302,'telegramToken':_0x31b898(0x25a)}),settings[_0x31b898(0x2ac)]&&settings[_0x31b898(0x2ac)]!=''&&(_0x2ac302={..._0x2ac302,'bbPassword':_0x31b898(0x25a)}),_0x2ac302;}function startBot(_0x4ffc73,_0x1fbad4,_0x37888d){const _0x23a385=_0x5995b8;let _0x45730=![];const _0x25ae8f=_0x4ffc73[0x0];_0x1fbad4={..._0x1fbad4,'stdio':[_0x23a385(0x1c6),_0x23a385(0x1c6),_0x23a385(0x1c6),_0x23a385(0x219)]},pid[_0x25ae8f]=childProcess[_0x23a385(0x2c3)](botfile,_0x4ffc73,_0x1fbad4),pid[_0x25ae8f]['on'](_0x23a385(0x2c2),_0x89d793=>{const _0x3e89aa=_0x23a385;switch(Object[_0x3e89aa(0x2b4)](_0x89d793)[0x0]){case _0x3e89aa(0x1a0):updateBotName(_0x25ae8f,_0x89d793[_0x3e89aa(0x1a0)]);break;case'status':updateStatus(_0x25ae8f,_0x89d793['status']);break;case _0x3e89aa(0x1e3):updateLive(_0x25ae8f,_0x89d793[_0x3e89aa(0x1e3)]);break;case _0x3e89aa(0x19a):updateLive(_0x25ae8f,_0x89d793[_0x3e89aa(0x19a)]);if(socket[_0x25ae8f])socket[_0x25ae8f][_0x3e89aa(0x211)](_0x3e89aa(0x19c),{'access':{'allow':![],'reason':_0x3e89aa(0x2a5),'token':null}});break;case _0x3e89aa(0x1bb):_0x89d793[_0x3e89aa(0x1bb)]=='restart'&&stopBot(_0x25ae8f);_0x89d793[_0x3e89aa(0x1bb)]=='kill'&&toggleBot(_0x25ae8f,_0x3e89aa(0x1cb),_0x3e89aa(0x1f4));break;case _0x3e89aa(0x1b6):sendTelegram(_0x25ae8f,_0x89d793[_0x3e89aa(0x1b6)]);break;case _0x3e89aa(0x217):if(socket[_0x25ae8f])socket[_0x25ae8f][_0x3e89aa(0x211)](_0x89d793['function'],_0x89d793['args']);break;}}),pid[_0x25ae8f]['on']('error',function(_0x2728cc){if(_0x45730)return;_0x45730=!![],_0x37888d(_0x2728cc);}),pid[_0x25ae8f]['on'](_0x23a385(0x216),function(_0x10eac5){const _0x13a44a=_0x23a385;if(_0x45730)return;_0x45730=!![],_0x37888d(null);const _0x3674ef=dbConfig['get']('bots')[_0x13a44a(0x273)]({'botID':_0x25ae8f})[_0x13a44a(0x282)]();_0x3674ef&&(_0x3674ef[_0x13a44a(0x19c)]=='enabled'||_0x3674ef['status']==_0x13a44a(0x1d4))&&(updateLive(_0x25ae8f,_0x13a44a(0x1f4)),logging(_0x13a44a(0x252)+_0x25ae8f),startBot([_0x25ae8f],{'cwd':bbpath},function(_0x457266){if(_0x457266)logging(_0x457266);}));});}function stopBot(_0x390ebe){const _0x111acf=_0x5995b8;if(socket[_0x390ebe])socket[_0x390ebe][_0x111acf(0x280)](!![]);if(pid[_0x390ebe])pid[_0x390ebe]['kill']();}function addBot(){const _0x16798c=_0x5995b8;let _0x480de7;for(let _0x144e94=0x1;_0x144e94<0x3e9;_0x144e94++){_0x480de7=_0x144e94['toString']()[_0x16798c(0x209)](0x3,'0');let _0x462ddc=config[_0x16798c(0x273)](_0xb942ca=>_0xb942ca[_0x16798c(0x1c3)]==_0x480de7);if(!_0x462ddc)break;}if(_0x480de7===_0x16798c(0x1a3)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x480de7),dbConfig[_0x16798c(0x23e)](_0x16798c(0x1b8))[_0x16798c(0x21c)]({'botID':_0x480de7,'botname':'Bot\x20'+_0x480de7,'status':_0x16798c(0x1d4),'live':''})[_0x16798c(0x1a9)](),startBot([_0x480de7],{'cwd':bbpath},function(_0x526805){if(_0x526805)logging(_0x526805);}),config=getConfiguration();if(socket[_0x16798c(0x289)])socket['botmanager'][_0x16798c(0x211)](_0x16798c(0x1b8),config);}function deleteBot(_0x4349d3){const _0x988a7a=_0x5995b8;if(socket[_0x4349d3])socket[_0x4349d3][_0x988a7a(0x280)](!![]);dbConfig[_0x988a7a(0x23e)]('bots')[_0x988a7a(0x24d)]({'botID':_0x4349d3})[_0x988a7a(0x1a9)](),logging(_0x988a7a(0x2bd)+_0x4349d3),stopBot(_0x4349d3);try{fs['unlinkSync'](path[_0x988a7a(0x210)](configpath,_0x988a7a(0x1da)+_0x4349d3+'-config.json')),fs[_0x988a7a(0x239)](path[_0x988a7a(0x210)](configpath,_0x988a7a(0x1da)+_0x4349d3+'-events.json')),fs['unlinkSync'](path[_0x988a7a(0x210)](configpath,_0x988a7a(0x1da)+_0x4349d3+_0x988a7a(0x274))),fs[_0x988a7a(0x239)](path[_0x988a7a(0x210)](configpath,_0x988a7a(0x1da)+_0x4349d3+_0x988a7a(0x1bc)));}catch(_0x310267){if(_0x310267)logging(_0x988a7a(0x227),_0x310267);}config=getConfiguration();if(socket['botmanager'])socket[_0x988a7a(0x289)][_0x988a7a(0x211)](_0x988a7a(0x1b8),config);}function toggleBot(_0x2b29c1,_0x5fe803,_0x2327cc){const _0x513f82=_0x5995b8;dbConfig[_0x513f82(0x23e)](_0x513f82(0x1b8))[_0x513f82(0x273)]({'botID':_0x2b29c1})['assign']({'status':_0x5fe803})['assign']({'live':_0x2327cc})['write']();if(_0x5fe803==_0x513f82(0x1ed)||_0x5fe803==_0x513f82(0x1d4))logging('enabled\x20Bot\x20'+_0x2b29c1),startBot([_0x2b29c1],{'cwd':bbpath},function(_0x215f6d){if(_0x215f6d)logging(_0x215f6d);});else(_0x5fe803==_0x513f82(0x1cb)||_0x5fe803==_0x513f82(0x1f6))&&(logging(_0x513f82(0x199)+_0x2b29c1),stopBot(_0x2b29c1));config=getConfiguration();if(socket[_0x513f82(0x289)])socket[_0x513f82(0x289)]['emit'](_0x513f82(0x1b8),config);}function updateStatus(_0x43686c,_0x554a09){const _0x1ea407=_0x5995b8;dbConfig[_0x1ea407(0x23e)](_0x1ea407(0x1b8))[_0x1ea407(0x273)]({'botID':_0x43686c})[_0x1ea407(0x1fc)]({'status':_0x554a09})[_0x1ea407(0x1a9)](),config=getConfiguration();if(socket[_0x1ea407(0x289)])socket[_0x1ea407(0x289)][_0x1ea407(0x211)](_0x1ea407(0x1b8),config);}function updateLive(_0x11e001,_0x343ed7){const _0x454201=_0x5995b8;dbConfig['get']('bots')[_0x454201(0x273)]({'botID':_0x11e001})[_0x454201(0x1fc)]({'live':_0x343ed7})['write'](),config=getConfiguration();if(socket[_0x454201(0x289)])socket[_0x454201(0x289)]['emit']('bots',config);}function updateBotName(_0x54342f,_0x3bcbe3){const _0x5d5ceb=_0x5995b8;dbConfig[_0x5d5ceb(0x23e)]('bots')['find']({'botID':_0x54342f})[_0x5d5ceb(0x1fc)]({'botname':_0x3bcbe3})[_0x5d5ceb(0x1a9)](),config=getConfiguration();if(socket[_0x5d5ceb(0x289)])socket[_0x5d5ceb(0x289)]['emit'](_0x5d5ceb(0x1b8),config);}function telegramError(_0x2e282b){const _0x3255af=_0x5995b8;console['log'](getTimeStamp()+_0x3255af(0x24e));}function validateTelegram(_0x58a3ad){const _0x58d062=_0x5995b8;if(_0x58a3ad[_0x58d062(0x1fe)][_0x58d062(0x2bc)]!=settings[_0x58d062(0x290)]&&'@'+_0x58a3ad[_0x58d062(0x1fe)]['username']!=settings[_0x58d062(0x290)])return tgBot[_0x58d062(0x22e)](_0x58a3ad[_0x58d062(0x1a2)]['id'],_0x58d062(0x2bf),{'parse_mode':'HTML'})[_0x58d062(0x237)](_0x565f0d=>{telegramError(_0x565f0d);}),![];return!![];}async function initTelegram(){const _0x304949=_0x5995b8;if(tgBot)tgBot[_0x304949(0x29b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x304949(0x286)],{'polling':!![]});let _0x4acd6c=_0x304949(0x278);_0x4acd6c+='\x0a',_0x4acd6c+=_0x304949(0x255),_0x4acd6c+=_0x304949(0x24c),_0x4acd6c+=_0x304949(0x206),_0x4acd6c+='/restart\x20-\x20restart\x20a\x20bot\x0a',_0x4acd6c+=_0x304949(0x203),_0x4acd6c+='/help\x20-\x20show\x20avaiable\x20commands\x0a';let _0x17242d=_0x304949(0x1ab);_0x17242d+='\x0a',_0x17242d+=_0x4acd6c,tgBot[_0x304949(0x270)](/\/start/,_0x4e4246=>{const _0x58c793=_0x304949;if(!validateTelegram(_0x4e4246))return;if(settings[_0x58c793(0x226)]!=_0x4e4246[_0x58c793(0x1a2)]['id'])updateSetting(_0x58c793(0x226),_0x4e4246['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x4e4246[_0x58c793(0x1a2)]['id'],_0x17242d)[_0x58c793(0x237)](_0xce5ccb=>{telegramError(_0xce5ccb);});}),tgBot[_0x304949(0x270)](/\/enable/,_0x55565e=>{const _0x5478c0=_0x304949;if(!validateTelegram(_0x55565e))return;if(settings[_0x5478c0(0x226)]!=_0x55565e[_0x5478c0(0x1a2)]['id'])updateSetting(_0x5478c0(0x226),_0x55565e[_0x5478c0(0x1a2)]['id']);updateSetting(_0x5478c0(0x23c),!![]),tgBot['sendMessage'](_0x55565e[_0x5478c0(0x1a2)]['id'],_0x5478c0(0x29e))['catch'](_0x2e68b3=>{telegramError(_0x2e68b3);});}),tgBot[_0x304949(0x270)](/\/config/,async _0x59be09=>{const _0x598a1c=_0x304949;if(!validateTelegram(_0x59be09))return;tgBot[_0x598a1c(0x21a)]('callback_query'),tgBot[_0x598a1c(0x22e)](_0x59be09[_0x598a1c(0x1a2)]['id'],_0x598a1c(0x230),{'reply_markup':{'inline_keyboard':[[{'text':_0x598a1c(0x1dd),'callback_data':'orders'},{'text':_0x598a1c(0x295),'callback_data':_0x598a1c(0x21e)},{'text':_0x598a1c(0x244),'callback_data':'all'}]]}})[_0x598a1c(0x237)](_0x5667ff=>{telegramError(_0x5667ff);}),tgBot['on'](_0x598a1c(0x1f9),async _0x156c29=>{const _0xbe2f3c=_0x598a1c,_0x19e2d7=_0x156c29[_0xbe2f3c(0x24b)],_0x549264=_0x156c29['message'];tgBot[_0xbe2f3c(0x224)](_0x156c29['id'])[_0xbe2f3c(0x220)](async()=>{const _0x3a1dcf=_0xbe2f3c;_0x19e2d7==_0x3a1dcf(0x251)&&(updateSetting(_0x3a1dcf(0x246),'orders'),updateSetting(_0x3a1dcf(0x23c),!![]),await tgBot[_0x3a1dcf(0x22e)](_0x549264[_0x3a1dcf(0x1a2)]['id'],_0x3a1dcf(0x1b1))[_0x3a1dcf(0x237)](_0x4a08c1=>{telegramError(_0x4a08c1);}));_0x19e2d7==_0x3a1dcf(0x21e)&&(updateSetting('telegramEvents','alerts'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x549264[_0x3a1dcf(0x1a2)]['id'],_0x3a1dcf(0x29c))['catch'](_0x47990f=>{telegramError(_0x47990f);}));_0x19e2d7=='all'&&(updateSetting(_0x3a1dcf(0x246),_0x3a1dcf(0x1af)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x549264[_0x3a1dcf(0x1a2)]['id'],_0x3a1dcf(0x2ae))[_0x3a1dcf(0x237)](_0x50442d=>{telegramError(_0x50442d);}));if(!settings['telegramChatId'])tgBot[_0x3a1dcf(0x22e)](_0x549264['chat']['id'],_0x3a1dcf(0x248))[_0x3a1dcf(0x237)](_0x475b3d=>{telegramError(_0x475b3d);});}),tgBot[_0xbe2f3c(0x21a)](_0xbe2f3c(0x1f9));});}),tgBot['onText'](/\/status/,_0x3f7a06=>{const _0x1c3e3e=_0x304949;if(!validateTelegram(_0x3f7a06))return;let _0x201796=_0x1c3e3e(0x29d);config[_0x1c3e3e(0x1ec)](_0x449203=>{const _0x51c874=_0x1c3e3e;_0x201796+=_0x51c874(0x267)+_0x449203['botID']+_0x51c874(0x23f)+_0x449203[_0x51c874(0x1a0)]+':\x20'+_0x449203['status']+_0x51c874(0x265)+_0x449203[_0x51c874(0x1e3)]+'\x0a';}),_0x201796+='\x0a',_0x201796+=_0x1c3e3e(0x28e),_0x201796+=!settings[_0x1c3e3e(0x23c)]?_0x1c3e3e(0x1d2):_0x1c3e3e(0x22c),_0x201796+=settings[_0x1c3e3e(0x23c)]?settings[_0x1c3e3e(0x246)]==_0x1c3e3e(0x1af)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x1c3e3e(0x2b2)+settings[_0x1c3e3e(0x246)]+_0x1c3e3e(0x294):'',tgBot[_0x1c3e3e(0x22e)](_0x3f7a06['chat']['id'],_0x201796,{'parse_mode':'HTML'})['catch'](_0x1b6f2e=>{telegramError(_0x1b6f2e);});}),tgBot[_0x304949(0x270)](/\/restart/,_0x7027ee=>{const _0x5bde7a=_0x304949;if(!validateTelegram(_0x7027ee))return;tgBot[_0x5bde7a(0x21a)]('callback_query');const _0x2cc128=getEnabledBots();if(_0x2cc128['length']==0x0)tgBot[_0x5bde7a(0x22e)](_0x7027ee[_0x5bde7a(0x1a2)]['id'],_0x5bde7a(0x1a5))[_0x5bde7a(0x237)](_0x50bff2=>{telegramError(_0x50bff2);});else{let _0x55e631=[],_0x1a9f03=[];const _0x3e8549=_0x2cc128['length']%0x4==0x0||_0x2cc128['length']%0x4==0x3||_0x2cc128[_0x5bde7a(0x21f)]%0x3==0x1?0x4:0x3;let _0x484028=0x0;_0x2cc128[_0x5bde7a(0x1ec)]((_0x3b9cec,_0x200332)=>{const _0xb6f324=_0x5bde7a;if(_0x200332%_0x3e8549==0x0)_0x1a9f03=[];_0x1a9f03[_0xb6f324(0x21c)]({'text':_0xb6f324(0x267)+_0x3b9cec[_0xb6f324(0x1c3)],'callback_data':_0x3b9cec[_0xb6f324(0x1c3)]}),_0x200332%_0x3e8549==0x0&&(_0x55e631[_0x484028]=_0x1a9f03,_0x484028++);}),tgBot['sendMessage'](_0x7027ee['chat']['id'],_0x5bde7a(0x24f),{'reply_markup':{'inline_keyboard':_0x55e631}})[_0x5bde7a(0x237)](_0x58c7df=>{telegramError(_0x58c7df);}),tgBot['on'](_0x5bde7a(0x1f9),async _0x5cbb0c=>{const _0x26fef7=_0x5bde7a,_0x2e2d8c=_0x5cbb0c['data'],_0x1d227c=_0x5cbb0c[_0x26fef7(0x2c2)];tgBot[_0x26fef7(0x224)](_0x5cbb0c['id'])['then'](async()=>{const _0x499a14=_0x26fef7;if(settings['telegramEvents']==_0x499a14(0x251))tgBot['sendMessage'](_0x1d227c[_0x499a14(0x1a2)]['id'],_0x499a14(0x24a)+_0x2e2d8c)[_0x499a14(0x237)](_0x13494a=>{telegramError(_0x13494a);});stopBot(_0x2e2d8c);}),tgBot[_0x26fef7(0x21a)](_0x26fef7(0x1f9));});}}),tgBot[_0x304949(0x270)](/\/disable/,_0x1a9c6d=>{const _0x3d3b43=_0x304949;if(!validateTelegram(_0x1a9c6d))return;tgBot[_0x3d3b43(0x22e)](_0x1a9c6d['chat']['id'],'Notifications\x20disabled')['catch'](_0x164b38=>{telegramError(_0x164b38);}),updateSetting(_0x3d3b43(0x23c),![]);}),tgBot[_0x304949(0x270)](/\/help/,_0x31bbb8=>{const _0x414f12=_0x304949;if(!validateTelegram(_0x31bbb8))return;tgBot[_0x414f12(0x22e)](_0x31bbb8[_0x414f12(0x1a2)]['id'],_0x4acd6c)['catch'](_0x5ec092=>{telegramError(_0x5ec092);});}),tgBot['on'](_0x304949(0x260),_0x5a3bee=>{const _0x10ecf7=_0x304949;if(_0x5a3bee['toString']()['includes'](_0x10ecf7(0x27c))){logging(_0x10ecf7(0x292)),tgBot[_0x10ecf7(0x29b)](),tgBot=null;if(socket[_0x10ecf7(0x289)])socket[_0x10ecf7(0x289)][_0x10ecf7(0x211)](_0x10ecf7(0x1ae),_0x10ecf7(0x292));}}),process[_0x304949(0x1dc)](_0x304949(0x1b4),()=>{const _0x5ebccb=_0x304949;if(tgBot)tgBot[_0x5ebccb(0x29b)]();process[_0x5ebccb(0x216)](0x1);}),process[_0x304949(0x1dc)](_0x304949(0x1c5),()=>{const _0xb1882d=_0x304949;if(tgBot)tgBot[_0xb1882d(0x29b)]();process[_0xb1882d(0x216)](0x1);});}}function disableTelegram(){const _0x522615=_0x5995b8;tgBot&&(tgBot[_0x522615(0x29b)](),tgBot=null);}function sendTelegram(_0x5e8389,_0x32fd83){const _0x2bfcff=_0x5995b8;if(settings[_0x2bfcff(0x23c)]){if(settings[_0x2bfcff(0x246)]==_0x2bfcff(0x1af)||(_0x32fd83[_0x2bfcff(0x1bf)]==_0x2bfcff(0x229)||_0x32fd83[_0x2bfcff(0x1bf)]==_0x2bfcff(0x1e7))&&settings['telegramEvents']==_0x2bfcff(0x21e)||_0x32fd83['type']==_0x2bfcff(0x20b)&&settings[_0x2bfcff(0x246)]==_0x2bfcff(0x251)){if(tgBot&&settings[_0x2bfcff(0x226)])tgBot[_0x2bfcff(0x22e)](settings[_0x2bfcff(0x226)],_0x2bfcff(0x267)+_0x5e8389+_0x2bfcff(0x240)+_0x32fd83[_0x2bfcff(0x2b8)])[_0x2bfcff(0x237)](_0x451418=>{telegramError(_0x451418);});}}}function temporaryAccess2FA(_0x2c9f19){const _0x879d25=_0x5995b8;let _0x10e225=new Date(),_0x32ba8d=![];if(lastIpApproval){if(_0x10e225-lastIpApproval<0x1388)_0x32ba8d=!![];}lastIpApproval=new Date();if(_0x32ba8d)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x879d25(0x21a)]('callback_query'),tgBot[_0x879d25(0x22e)](settings[_0x879d25(0x226)],_0x879d25(0x242)+normalizeIP(_0x2c9f19)[_0x879d25(0x20d)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x879d25(0x222),'callback_data':'15'},{'text':_0x879d25(0x287),'callback_data':'30'},{'text':_0x879d25(0x1ef),'callback_data':_0x879d25(0x1ef)}]]}})[_0x879d25(0x237)](_0x3c3d96=>{telegramError(_0x3c3d96);}),tgBot['on'](_0x879d25(0x1f9),async _0x20e9aa=>{const _0x4748fb=_0x879d25,_0x185b69=_0x20e9aa[_0x4748fb(0x24b)],_0x44dad=_0x20e9aa[_0x4748fb(0x2c2)];tgBot[_0x4748fb(0x224)](_0x20e9aa['id'])[_0x4748fb(0x220)](async()=>{const _0x44a2ee=_0x4748fb;if(_0x185b69!=_0x44a2ee(0x1ef)){telegramIpApproval={'clientip':_0x2c9f19,'timestamp':new Date()[_0x44a2ee(0x1fb)](),'expiry':_0x185b69},await tgBot[_0x44a2ee(0x22e)](_0x44dad['chat']['id'],_0x44a2ee(0x1e9)+_0x185b69+_0x44a2ee(0x1c1),{'parse_mode':_0x44a2ee(0x2b0)})[_0x44a2ee(0x237)](_0x287c20=>{telegramError(_0x287c20);});for(let _0x8c0b4a in socket){socket[_0x8c0b4a][_0x44a2ee(0x211)](_0x44a2ee(0x19c),{'access':{'allow':![],'reason':_0x44a2ee(0x2a5),'token':null}});}}else await tgBot[_0x44a2ee(0x22e)](_0x44dad['chat']['id'],_0x44a2ee(0x1c9))[_0x44a2ee(0x237)](_0x4ff8bb=>{telegramError(_0x4ff8bb);});}),tgBot[_0x4748fb(0x21a)](_0x4748fb(0x1f9));}));}function loginAccess2FA(_0x1e0fd7){const _0x4fac31=_0x5995b8;tgBot&&settings[_0x4fac31(0x226)]&&(tgBot[_0x4fac31(0x21a)]('callback_query'),tgBot[_0x4fac31(0x22e)](settings[_0x4fac31(0x226)],_0x4fac31(0x2b7)+normalizeIP(_0x1e0fd7)[_0x4fac31(0x20d)]+_0x4fac31(0x26e),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4fac31(0x232),'callback_data':loginExpiry},{'text':_0x4fac31(0x1ef),'callback_data':_0x4fac31(0x1ef)}]]}})[_0x4fac31(0x237)](_0x1fdae3=>{telegramError(_0x1fdae3);}),tgBot['on'](_0x4fac31(0x1f9),async _0x6ccb37=>{const _0x984125=_0x4fac31,_0x26e0ec=_0x6ccb37[_0x984125(0x24b)],_0x19d6be=_0x6ccb37[_0x984125(0x2c2)];tgBot['answerCallbackQuery'](_0x6ccb37['id'])[_0x984125(0x220)](async()=>{const _0x34057c=_0x984125;if(_0x26e0ec!=_0x34057c(0x1ef)){telegram2FaApproval={'clientip':_0x1e0fd7,'timestamp':new Date()[_0x34057c(0x1fb)](),'expiry':_0x26e0ec},await tgBot[_0x34057c(0x22e)](_0x19d6be[_0x34057c(0x1a2)]['id'],_0x34057c(0x271),{'parse_mode':'HTML'})[_0x34057c(0x237)](_0x35dc0f=>{telegramError(_0x35dc0f);});for(let _0x484e35 in socket){socket[_0x484e35]['emit'](_0x34057c(0x19c),{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0x34057c(0x22e)](_0x19d6be[_0x34057c(0x1a2)]['id'],_0x34057c(0x253))[_0x34057c(0x237)](_0x1f8ed7=>{telegramError(_0x1f8ed7);});}),tgBot[_0x984125(0x21a)](_0x984125(0x1f9));}));}function getConfiguration(){const _0x1d9cdd=_0x5995b8;return dbConfig['get'](_0x1d9cdd(0x1b8))[_0x1d9cdd(0x285)](_0x1d9cdd(0x1c3))['value']()||[];}function getEnabledBots(){const _0x172967=_0x5995b8;return dbConfig[_0x172967(0x23e)]('bots')[_0x172967(0x285)](_0x172967(0x1c3))[_0x172967(0x1ea)]({'status':'enabled'})[_0x172967(0x282)]()||[];}function getSettings(){const _0x1ee7c2=_0x5995b8;return dbSettings[_0x1ee7c2(0x23e)](_0x1ee7c2(0x208))['value']()||{'timeshift':0x0};}function _0xea73(_0x37b4e4,_0x5eba18){const _0x95eccc=_0x5485();return _0xea73=function(_0xaa367,_0x352ad7){_0xaa367=_0xaa367-0x199;let _0x5485dc=_0x95eccc[_0xaa367];return _0x5485dc;},_0xea73(_0x37b4e4,_0x5eba18);}function getSecure(){const _0x389b65=_0x5995b8;return dbSecure[_0x389b65(0x23e)](_0x389b65(0x284))[_0x389b65(0x282)]()||{};}function getBlacklist(){const _0x5f471a=_0x5995b8;return dbSecure[_0x5f471a(0x23e)](_0x5f471a(0x2a4))['value']()||[];}function broadcastToBots(_0x4dd038,_0x3b4f24){const _0x316d17=_0x5995b8;config[_0x316d17(0x1ec)](_0x252dac=>{const _0x1bdc97=_0x316d17;if(_0x252dac[_0x1bdc97(0x19c)]==_0x1bdc97(0x1ed)&&_0x252dac[_0x1bdc97(0x1e3)]==_0x1bdc97(0x23d)){if(pid[_0x252dac[_0x1bdc97(0x1c3)]])pid[_0x252dac[_0x1bdc97(0x1c3)]][_0x1bdc97(0x1c8)]({[_0x4dd038]:_0x3b4f24});}});}function storeSettings(_0x33fe95,_0x4792c6=![]){const _0x480931=_0x5995b8;_0x33fe95={...settings,..._0x33fe95};if(_0x4792c6&&_0x33fe95['bbPassword']!=_0x480931(0x25a)&&_0x33fe95['bbPassword']!=''){const _0x3f23d4=crypt[_0x480931(0x254)](secure[_0x480931(0x261)],_0x33fe95['bbPassword'])['message'][_0x480931(0x1e4)]('@')[0x0],_0x181a8a=bcrypt[_0x480931(0x281)](_0x3f23d4,saltRounds);_0x33fe95={..._0x33fe95,'bbPassword':_0x181a8a};}if(_0x4792c6&&_0x33fe95[_0x480931(0x286)]!=_0x480931(0x25a)&&_0x33fe95['telegramToken']!=''){const _0x2fcdea=crypt[_0x480931(0x254)](secure[_0x480931(0x261)],_0x33fe95[_0x480931(0x286)])[_0x480931(0x2c2)][_0x480931(0x1e4)]('@')[0x0];_0x33fe95={..._0x33fe95,'telegramToken':_0x2fcdea};}const _0x5c8532=_0x33fe95[_0x480931(0x286)]!=_0x480931(0x25a)&&_0x33fe95[_0x480931(0x286)]!=settings['telegramToken']||_0x33fe95[_0x480931(0x290)]!=settings[_0x480931(0x290)],_0x5577db=_0x33fe95[_0x480931(0x286)]==''||_0x33fe95[_0x480931(0x290)]=='';if(_0x5c8532)_0x33fe95[_0x480931(0x246)]=_0x480931(0x1af);for(const [_0x29ef54,_0x535faf]of Object[_0x480931(0x2ba)](_0x33fe95)){if(_0x29ef54==_0x480931(0x286)&&_0x535faf=='************'){_0x33fe95[_0x480931(0x286)]=settings[_0x480931(0x286)];continue;};if(_0x29ef54==_0x480931(0x2ac)&&_0x535faf==_0x480931(0x25a)){_0x33fe95['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x480931(0x257)](_0x480931(0x29a)+_0x29ef54,_0x535faf)['write']();}settings=_0x33fe95;if(socket['botmanager'])socket[_0x480931(0x289)][_0x480931(0x211)]('settings',cleanSettings());broadcastToBots('timeshift',settings[_0x480931(0x27e)]);if(_0x5c8532&&!_0x5577db)initTelegram();if(_0x5c8532&&_0x5577db)disableTelegram();for(let _0xc01853 in socket){setAccess(_0xc01853);}}function updateSetting(_0x56c565,_0x4f5e3e){const _0x2363a2=_0x5995b8;dbSettings[_0x2363a2(0x257)](_0x2363a2(0x29a)+_0x56c565,_0x4f5e3e)['write'](),settings=getSettings();if(socket['botmanager'])socket[_0x2363a2(0x289)][_0x2363a2(0x211)]('settings',cleanSettings());}function storeSecure(_0x22cc18){const _0x2e5512=_0x5995b8;dbSecure[_0x2e5512(0x23e)]('secure')[_0x2e5512(0x21c)](_0x22cc18)[_0x2e5512(0x1a9)](),secure=_0x22cc18;}function addBlacklist(){const _0x4e9425=_0x5995b8;cleanBlacklist();let _0x4ec339;telegramIpApproval?_0x4ec339=Math[_0x4e9425(0x283)](telegramIpApproval[_0x4e9425(0x213)],loginExpiry):_0x4ec339=loginExpiry,dbSecure[_0x4e9425(0x23e)](_0x4e9425(0x2a4))['push']({'expiry':new Date()[_0x4e9425(0x1fb)]()+_0x4ec339*0x3c*0x3e8,'token':token})[_0x4e9425(0x1a9)](),blacklist=dbSecure[_0x4e9425(0x23e)](_0x4e9425(0x2a4))['value']();}function cleanBlacklist(){const _0x293be1=_0x5995b8;let _0x1383c7=dbSecure['get'](_0x293be1(0x2a4))['cloneDeep']()[_0x293be1(0x282)](),_0x66eb10=new Date()[_0x293be1(0x1fb)]();_0x1383c7['forEach'](_0x4c4fbd=>{const _0x34780a=_0x293be1;_0x4c4fbd['expiry']<_0x66eb10&&dbSecure['get'](_0x34780a(0x2a4))['remove']({'expiry':_0x4c4fbd[_0x34780a(0x213)]})[_0x34780a(0x1a9)]();});}function initStates(){const _0x47f875=_0x5995b8;let _0x4b83a9=getConfiguration();_0x4b83a9[_0x47f875(0x1ec)](_0x5cf43f=>{const _0x25cbf4=_0x47f875;_0x5cf43f[_0x25cbf4(0x1e3)]=_0x25cbf4(0x1f4);}),storeConfiguration(_0x4b83a9);}function onKeys(){const _0x3e1cd4=new RSA();return new Promise(_0x133135=>{const _0x393348=_0xea73;_0x3e1cd4[_0x393348(0x279)]()[_0x393348(0x220)](_0x355bd3=>{_0x133135(_0x355bd3);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x54dc53=_0x5995b8;let _0x136e21=getConfiguration(),_0x5dc060=![];_0x136e21[_0x54dc53(0x1ec)](_0x4b2fc9=>{const _0x20038b=_0x54dc53;if(_0x4b2fc9[_0x20038b(0x19c)]==_0x20038b(0x23d))_0x4b2fc9['status']=_0x20038b(0x1ed),_0x5dc060=!![];else _0x4b2fc9[_0x20038b(0x19c)]==_0x20038b(0x1f4)&&(_0x4b2fc9[_0x20038b(0x19c)]=_0x20038b(0x1cb),_0x5dc060=!![]);});if(_0x5dc060)storeConfiguration(_0x136e21);let _0x3acbd4=getSecure();if(!_0x3acbd4[_0x54dc53(0x1ca)](_0x54dc53(0x1e6))){let _0x44d354=await generateKeys();_0x3acbd4[_0x54dc53(0x249)]=_0x44d354[_0x54dc53(0x249)],_0x3acbd4[_0x54dc53(0x261)]=_0x44d354[_0x54dc53(0x261)],_0x3acbd4[_0x54dc53(0x1e6)]=crypto[_0x54dc53(0x1b2)](0x20)['toString'](_0x54dc53(0x1cf));;storeSecure(_0x3acbd4);}let _0x40cd1f=getSettings();_0x5dc060=![];!_0x40cd1f[_0x54dc53(0x1ca)]('loginRequired')&&(_0x40cd1f[_0x54dc53(0x1d9)]=![],_0x40cd1f[_0x54dc53(0x1b3)]='',_0x40cd1f[_0x54dc53(0x2ac)]='',_0x40cd1f[_0x54dc53(0x1cd)]=![],_0x5dc060=!![]);!_0x40cd1f[_0x54dc53(0x1ca)](_0x54dc53(0x2b9))&&(_0x40cd1f[_0x54dc53(0x2b9)]=![],_0x40cd1f[_0x54dc53(0x275)]=[],_0x40cd1f[_0x54dc53(0x233)]=![],_0x5dc060=!![]);if(!_0x40cd1f[_0x54dc53(0x1ca)](_0x54dc53(0x23c))){if(_0x40cd1f[_0x54dc53(0x226)])_0x40cd1f['telegramEnabled']=!![];else _0x40cd1f[_0x54dc53(0x23c)]=![];_0x5dc060=!![];}if(_0x5dc060)storeSettings(_0x40cd1f);}function storeConfiguration(_0x443396){const _0x419482=_0x5995b8;dbConfig[_0x419482(0x23e)](_0x419482(0x1b8))['remove']()[_0x419482(0x1a9)](),dbConfig[_0x419482(0x23e)]('bots')[_0x419482(0x21c)](..._0x443396)[_0x419482(0x1a9)](),config=_0x443396;}function resetPassword(){const _0x1fa695=_0x5995b8;tgBot&&settings[_0x1fa695(0x226)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x1fa695(0x226)],_0x1fa695(0x25c),{'parse_mode':_0x1fa695(0x2b0),'reply_markup':{'inline_keyboard':[[{'text':_0x1fa695(0x214),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1fa695(0x237)](_0x15759d=>{telegramError(_0x15759d);}),tgBot['on'](_0x1fa695(0x1f9),async _0x3a7f37=>{const _0x2d853b=_0x1fa695,_0x36720f=_0x3a7f37[_0x2d853b(0x24b)],_0x41a688=_0x3a7f37[_0x2d853b(0x2c2)];tgBot[_0x2d853b(0x224)](_0x3a7f37['id'])[_0x2d853b(0x220)](async()=>{const _0x52a202=_0x2d853b;if(_0x36720f!='no'){const _0x18e6a7=0xf,_0x18e4f7=_0x52a202(0x200),_0xd950f8=Array[_0x52a202(0x1fe)](crypto[_0x52a202(0x2c0)](new Uint32Array(_0x18e6a7)))[_0x52a202(0x1aa)](_0x355c38=>_0x18e4f7[_0x355c38%_0x18e4f7['length']])[_0x52a202(0x210)](''),_0x27b8ea=bcrypt[_0x52a202(0x281)](_0xd950f8,saltRounds);storeSettings({'bbPassword':_0x27b8ea}),await tgBot[_0x52a202(0x22e)](_0x41a688[_0x52a202(0x1a2)]['id'],_0x52a202(0x2a9)+_0xd950f8,{'parse_mode':'HTML'})[_0x52a202(0x237)](_0xf61fc4=>{telegramError(_0xf61fc4);});}else await tgBot[_0x52a202(0x22e)](_0x41a688[_0x52a202(0x1a2)]['id'],_0x52a202(0x1ba))['catch'](_0x533324=>{telegramError(_0x533324);});}),tgBot[_0x2d853b(0x21a)](_0x2d853b(0x1f9));}));}function logging(_0x4248e2){const _0x40bbce=_0x5995b8;console[_0x40bbce(0x2c1)](getTimeStamp()+_0x40bbce(0x1ac)+_0x4248e2);if(tgBot&&settings['telegramChatId']&&settings[_0x40bbce(0x246)]!=_0x40bbce(0x251))tgBot['sendMessage'](settings[_0x40bbce(0x226)],_0x40bbce(0x1c7)+_0x4248e2)[_0x40bbce(0x237)](_0x2a38f2=>{telegramError(_0x2a38f2);});}function getServerTime(){const _0x5e9213=_0x5995b8,_0x4fd0f3=new Date();return _0x4fd0f3[_0x5e9213(0x1a7)]()+'/'+(_0x4fd0f3['getMonth']()+0x1)[_0x5e9213(0x266)]()[_0x5e9213(0x209)](0x2,'0')+'/'+_0x4fd0f3[_0x5e9213(0x2a8)]()[_0x5e9213(0x266)]()[_0x5e9213(0x209)](0x2,'0')+'\x20'+_0x4fd0f3[_0x5e9213(0x1de)]()[_0x5e9213(0x266)]()[_0x5e9213(0x209)](0x2,'0')+':'+_0x4fd0f3['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x4fd0f3[_0x5e9213(0x2b1)]()[_0x5e9213(0x266)]()[_0x5e9213(0x209)](0x2,'0');}function getTimeStamp(){const _0x1f23d5=_0x5995b8,_0xe420b8=shiftedTime();return _0xe420b8['getFullYear']()+'/'+(_0xe420b8['getMonth']()+0x1)[_0x1f23d5(0x266)]()[_0x1f23d5(0x209)](0x2,'0')+'/'+_0xe420b8[_0x1f23d5(0x2a8)]()[_0x1f23d5(0x266)]()[_0x1f23d5(0x209)](0x2,'0')+'\x20'+_0xe420b8['getHours']()[_0x1f23d5(0x266)]()[_0x1f23d5(0x209)](0x2,'0')+':'+_0xe420b8['getMinutes']()[_0x1f23d5(0x266)]()[_0x1f23d5(0x209)](0x2,'0')+':'+_0xe420b8['getSeconds']()[_0x1f23d5(0x266)]()[_0x1f23d5(0x209)](0x2,'0');}function shiftedTime(){const _0xdf7dec=_0x5995b8,_0x41dc53=new Date();let _0x2db4c5=_0x41dc53;if(settings[_0xdf7dec(0x27e)]&&settings[_0xdf7dec(0x27e)]!==0x0)_0x2db4c5=fns[_0xdf7dec(0x263)](_0x41dc53,{'hours':settings['timeshift']});return _0x2db4c5;}function startAnalytics(){const _0x3b1b4a=_0x5995b8;let _0x3af4f5=new Date()[_0x3b1b4a(0x22a)]();_0x3af4f5==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x34a522=_0x5995b8;analytics[_0x34a522(0x250)]({'title':_0x34a522(0x28b),'href':_0x34a522(0x1f5),'path':'/v'+serverversion});}function validateCredentials(_0x5baa2a){const _0x27f927=_0x5995b8;if(_0x5baa2a[_0x27f927(0x2bc)]==settings['bbUsername']&&bcrypt[_0x27f927(0x2b3)](_0x5baa2a[_0x27f927(0x2a1)],settings[_0x27f927(0x2ac)])){if(settings[_0x27f927(0x1cd)])return{'allow':![],'reason':_0x27f927(0x1c2),'token':null};else{const _0x51fa0c=generateLoginToken();return{'allow':!![],'reason':_0x27f927(0x2c4),'token':_0x51fa0c};}}else return{'allow':![],'reason':_0x27f927(0x256),'token':null};}function refreshToken(){const _0x359138=generateLoginToken();return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x359138};}function validateAccess(_0x51cb59){const _0x4d4481=_0x5995b8;let _0x288722;const _0x34573e=_0x201122=>{const _0x55df1a=_0xea73;if(settings['loginRequired']){if(settings[_0x55df1a(0x1cd)]){if(telegram2FaApproved()){const _0x4e59ec=generateLoginToken();return{'allow':!![],'reason':_0x55df1a(0x22b),'token':_0x4e59ec};}else return{'allow':![],'reason':_0x55df1a(0x1c2),'token':null};}else return _0x288722=validToken(_0x201122),_0x288722['hasOwnProperty'](_0x55df1a(0x1e7))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x201122}:{'allow':![],'reason':_0x55df1a(0x19b),'token':null};}else return{'allow':!![],'reason':_0x55df1a(0x28f),'token':null};};if(settings[_0x4d4481(0x2b9)]){let _0x5dcba0=[...settings[_0x4d4481(0x275)],_0x4d4481(0x1d0),_0x4d4481(0x25d),'127.0.0.1'];if(_0x5dcba0[_0x4d4481(0x1e2)](externalip))return _0x34573e(_0x51cb59);else{_0x288722=validToken(_0x51cb59);if(_0x288722[_0x4d4481(0x1ca)](_0x4d4481(0x1e7)))return _0x34573e(_0x51cb59);else{if(telegramIpApproved()){const _0x130942=generateToken();return _0x288722=_0x34573e(_0x51cb59),_0x288722[_0x4d4481(0x2ad)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x130942}:_0x288722;}else return settings[_0x4d4481(0x233)]?{'allow':![],'reason':_0x4d4481(0x277),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x34573e(_0x51cb59);}function timelyDecrypt(_0xaa66de,_0x378f10=!![]){const _0x4007c4=_0x5995b8;if(_0xaa66de)try{const _0x19e53b=crypt[_0x4007c4(0x254)](secure[_0x4007c4(0x261)],_0xaa66de)[_0x4007c4(0x2c2)],_0x2b199b=_0x19e53b[_0x4007c4(0x1e4)]('@')[0x0],_0x161df2=_0x19e53b[_0x4007c4(0x1e4)]('@')[0x1],_0x4cb8ad=new Date()['getTime']();if(_0x378f10){if(_0x4cb8ad-_0x161df2<maxSecretAge*0x3e8)return _0x2b199b;else return![];}else return _0x2b199b;}catch{return![];}else return![];}const validToken=_0x322a72=>{const _0x2a863a=_0x5995b8;if(!_0x322a72)return{'error':_0x2a863a(0x1d5)};for(let _0x5bf9fc of blacklist){if(_0x5bf9fc[_0x2a863a(0x1cc)]==_0x322a72)return{'error':_0x2a863a(0x28d)};}let _0x46998f;try{_0x46998f=jwt['verify'](_0x322a72,secure[_0x2a863a(0x1e6)]+uuid);}catch{return{'error':_0x2a863a(0x26a)};}if(!_0x46998f['hasOwnProperty'](_0x2a863a(0x241))&&!_0x46998f[_0x2a863a(0x1ca)](_0x2a863a(0x2bc))||!_0x46998f[_0x2a863a(0x1ca)](_0x2a863a(0x2be)))return{'error':_0x2a863a(0x2a7)};if(!_0x46998f[_0x2a863a(0x1ca)](_0x2a863a(0x2bc))&&_0x46998f[_0x2a863a(0x1ca)]('clientip')){const {clientip:_0x38a44b}=_0x46998f;return externalip==_0x38a44b?{'success':_0x2a863a(0x2bb)}:{'error':_0x2a863a(0x1a6)};}else{if(_0x46998f[_0x2a863a(0x1ca)](_0x2a863a(0x2bc))&&_0x46998f[_0x2a863a(0x1ca)]('clientip')){const {username:_0x155fec,clientip:_0x2b5e45}=_0x46998f;return settings[_0x2a863a(0x1b3)]==_0x155fec&&externalip==_0x2b5e45?{'success':_0x2a863a(0x2bb)}:{'error':_0x2a863a(0x26b)};}}},generateLoginToken=()=>{const _0xa61250=_0x5995b8;if(uuid)return jwt[_0xa61250(0x23a)]({'username':settings['bbUsername'],'clientip':externalip},secure['secret']+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x3585d3=_0x5995b8;if(uuid)return jwt['sign']({'clientip':externalip},secure[_0x3585d3(0x1e6)]+uuid,{'expiresIn':telegramIpApproval[_0x3585d3(0x213)]*0x3c});else return![];},telegramIpApproved=()=>{const _0x4669d5=_0x5995b8;let _0x42bdea=![];return telegramIpApproval&&telegramIpApproval['expiry']!='reject'&&(_0x42bdea=telegramIpApproval[_0x4669d5(0x241)]==externalip&&new Date()[_0x4669d5(0x1fb)]()-telegramIpApproval[_0x4669d5(0x205)]<telegramIpApproval['expiry']*0x3c*0x3e8),_0x42bdea;},telegram2FaApproved=()=>{const _0x9b7372=_0x5995b8;let _0x36371b=![];return telegram2FaApproval&&telegram2FaApproval[_0x9b7372(0x213)]!=_0x9b7372(0x1ef)&&(_0x36371b=telegram2FaApproval[_0x9b7372(0x241)]==externalip&&new Date()[_0x9b7372(0x1fb)]()-telegram2FaApproval[_0x9b7372(0x205)]<telegram2FaApproval[_0x9b7372(0x213)]*0x3c*0x3e8),_0x36371b;},normalizeIP=_0x178228=>{const _0x486f1a=_0x5995b8;let _0x4be3a1=null,_0x41e2f2=null;if(ipaddr['isValid'](_0x178228)){const _0x1541bd=ipaddr[_0x486f1a(0x25b)](_0x178228);_0x1541bd[_0x486f1a(0x1d3)]()===_0x486f1a(0x1df)?(_0x1541bd[_0x486f1a(0x215)]()&&(_0x4be3a1=_0x1541bd[_0x486f1a(0x2ab)]()['toString']()),_0x41e2f2=_0x1541bd[_0x486f1a(0x266)]()):(_0x4be3a1=_0x1541bd[_0x486f1a(0x266)](),_0x41e2f2=_0x1541bd[_0x486f1a(0x1d8)]()[_0x486f1a(0x266)]());}return{'show':_0x4be3a1?_0x4be3a1:_0x41e2f2,'store':_0x41e2f2};};