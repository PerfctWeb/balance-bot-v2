const _0x42d216=_0x5e37;(function(_0x13584d,_0x35cbd8){const _0x16ec28=_0x5e37,_0x310e96=_0x13584d();while(!![]){try{const _0x6361c7=parseInt(_0x16ec28(0x210))/0x1+-parseInt(_0x16ec28(0x2f9))/0x2+-parseInt(_0x16ec28(0x2bc))/0x3*(parseInt(_0x16ec28(0x337))/0x4)+parseInt(_0x16ec28(0x27c))/0x5+-parseInt(_0x16ec28(0x2c2))/0x6*(parseInt(_0x16ec28(0x264))/0x7)+-parseInt(_0x16ec28(0x33c))/0x8+parseInt(_0x16ec28(0x279))/0x9;if(_0x6361c7===_0x35cbd8)break;else _0x310e96['push'](_0x310e96['shift']());}catch(_0x1b3459){_0x310e96['push'](_0x310e96['shift']());}}}(_0x471a,0x4638d));const _0x40da8e=function(){let _0x128d67=!![];return function(_0x22fc83,_0xe6b68b){const _0x2a7fa2=_0x128d67?function(){const _0x4b610a=_0x5e37;if(_0xe6b68b){const _0x5b1fa7=_0xe6b68b[_0x4b610a(0x311)](_0x22fc83,arguments);return _0xe6b68b=null,_0x5b1fa7;}}:function(){};return _0x128d67=![],_0x2a7fa2;};}(),_0x7fd870=_0x40da8e(this,function(){const _0x12539b=_0x5e37;return _0x7fd870[_0x12539b(0x220)]()[_0x12539b(0x29e)](_0x12539b(0x2ab))[_0x12539b(0x220)]()[_0x12539b(0x26e)](_0x7fd870)['search']('(((.+)+)+)+$');});_0x7fd870();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),FileSync=require(_0x42d216(0x33d)),fs=require('fs'),fns=require(_0x42d216(0x314)),low=require(_0x42d216(0x2ac)),path=require(_0x42d216(0x25d)),crypto=require('crypto'),Crypt=require(_0x42d216(0x2a5))[_0x42d216(0x2ae)],RSA=require(_0x42d216(0x2a5))[_0x42d216(0x290)],bcrypt=require(_0x42d216(0x2d3)),jwt=require(_0x42d216(0x292)),analyticsLib=require(_0x42d216(0x227))['default'],googleAnalytics=require(_0x42d216(0x26b))[_0x42d216(0x262)],ipaddr=require('ipaddr.js'),argv=require(_0x42d216(0x221))(process[_0x42d216(0x2f6)][_0x42d216(0x32f)](0x2))[_0x42d216(0x2f6)],PORT=argv[_0x42d216(0x313)]||_0x42d216(0x271),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x42d216(0x28c)](PORT))return console[_0x42d216(0x29c)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x42d216(0x2cd)),process[_0x42d216(0x224)](0x1);const HOST=argv[_0x42d216(0x307)]||null,userID=argv['user']||'';let bbpath=_0x42d216(0x2ce);const botfile=_0x42d216(0x1fc),configfile=_0x42d216(0x30f),settingsfile=_0x42d216(0x2b7),securefile=_0x42d216(0x243);!fs[_0x42d216(0x2b5)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+_0x42d216(0x226)),configpath=userID?bbpath+_0x42d216(0x274)+userID+'/':bbpath+_0x42d216(0x274),configbackuppath=configpath+_0x42d216(0x266);!fs[_0x42d216(0x2b5)](configpath)&&fs['mkdirSync'](configpath);function _0x471a(){const _0x60c6f9=['inherit','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','https://hodlerhacks.com','Login\x20accepted','argv','polling_error','toIPv4MappedAddress','280692zjUnPX','version.json','Password\x20has\x20been\x20reset\x20to:\x20','settings.','telegramChatId','logout','copyFileSync','/help\x20-\x20show\x20available\x20commands\x0a','stopped','mkdirSync','allow','Allow\x20login\x20from\x20IP\x20address\x20<b>','SIGTERM','initclient','host','static','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','kill','write','/restart\x20-\x20restart\x20bot(s)\x0a','removeAllListeners','bb-config.json','conn','apply','join','port','date-fns','split','page','temporary\x20access\x20timeout','running','\x20only\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','sendFile','2FA\x20login\x20required','started','HTML','secret','/:bot/performance','No\x20bots\x20running\x20right\x20now','botID','readdirSync','build2','starting\x20bot\x20|\x20Bot\x20','parse','type','Ok,\x20will\x20send\x20order\x20notifications\x20only','sortBy','express','sendMessage','/:bot',':\x20Bot\x20Mgr\x20>\x20','removeListener','slice','\x20|\x20','Unauthorized\x20login\x20attempt\x20(timeout)','blacklist','hasOwnProperty','Invalid\x20authentication\x20token\x20(2)','/status\x20-\x20show\x20bot(s)\x20status\x0a','name','771196rSkQOX','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','\x20minutes','ipv6','yes','1829472xzaDvT','lowdb/adapters/FileSync','decrypt','Access\x20enabled\x20for\x20','disabled\x20Bot\x20','</b>\x20?','Notifications\x20disabled','Ok,\x20will\x20send\x20alert\x20notifications\x20only','handshake','version','defaults','disconnect','exp','Unauthorized\x20attempt\x20to\x20log\x20out','expiry','2FA\x20required','bot.js','temporary\x20access\x20not\x20allowed','includes','find','new','User\x20has\x20been\x20validated','-----------------------------------------------------------------------------------','data','2FA\x20login\x20token\x20generated','bot','/enable\x20-\x20enable\x20notifications\x0a','Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','send','restarting\x20Bot\x20','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','telegram2FaApproval','Bot\x20Mgr\x20>\x20','auth','Alerts','446991aYLFAZ','unlinkSync','onText','/:bot/support','Unauthorized\x20attempt\x20to\x20update\x20bot','whitelist','build','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','verify','match','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','args','chat','once','404\x20Not\x20Found','bots','toString','yargs/yargs','function','Unauthorized\x20login\x20attempt\x20(public\x20key)','exit','bbPassword','clients','analytics','/:bot/coins','\x20>\x20','/:bot/portfolio','All\x20bots\x20running\x20right\x20now','max','assign','answerCallbackQuery','bot-','new-disabled','temporary\x20token\x20generated','compareSync','storeHeadless','login\x20not\x20required','loginRequired','get-logs','catch','Orders','RSA-OAEP','2FA\x20login\x20rejected','message','map','remoteAddress','filter','event','forEach','set','randomBytes','bb-secure.json','hex','f2aRequired','toIPv4Address','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','secure','show','http','isValid','emitHistory','getPortfolio','You\x20can\x20use\x20the\x20following\x20commands:\x0a','telegramUsername','notification','publicKey','storeConfiguration','getTime','listen','pidExpireLogin','temporaryAccessAllowed','whitelistEnabled','fork','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','get-starting-balances','hashSync','getFullYear','path','socket.io','Invalid\x20Telegram\x20token','getMonth','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','default','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','1379RPERkn','2FA','backup/','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','login\x20token\x20generated','clientip','privateKey','@analytics/google-analytics','from',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','constructor','error\x20while\x20deleting\x20config\x20files:\x20','error','3000','telegramEnabled','placeOrder','config/','accept','-events.json','emit','add-bot','4872699hWZYXx','store-configuration','all','1703755BArjNf','Balance\x20Bot\x20Server','createServer','login\x20token\x20valid','push','/off\x20-\x20stop\x20bot(s)\x0a','status','sign','getDate','server','Unauthorized\x20attempt\x20to\x20delete\x20bot','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','enabled','login\x20required','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bbUsername','test','Balance\x20Bot','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','botmanager','RSA','telegram','jsonwebtoken','<b>Telegram\x20bot\x20status:</b>\x0a','stopPolling','use','logged\x20out','username','referer','************','showname','-performance.json','log','get','search','temporary\x20access\x20rejected','invalid\x20credentials','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','disabled','update-bot','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','hybrid-crypto-js','-results.json','store','apiKey','ipc','Unauthorized\x20attempt\x20to\x20store\x20configuration','(((.+)+)+)+$','lowdb','All\x20bots','Crypt','telegramToken','All','cancel-loading','orders','getHours','store-settings','existsSync','SIGINT','bb-settings.json','index.html','then','remove','getStartingBalances','3nktLiQ','-config.json','reason','Login\x20rejected','5\x20min','Notifications\x20types:\x20','14610tJMmpv','reload','alerts','keys','add','password','token','botname','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','length',',\x20must\x20be\x20a\x204\x20digit\x20number','bb/','telegramIpApproval','settings','uuid','Token\x20blacklisted','bcryptjs','Notifications\x20enabled\x0a','padStart','login','::ffff:127.0.0.1','Password\x20reset\x20rejected','encryptedUuid','Unauthorized\x20attempt\x20to\x20add\x20bot','Notifications\x20disabled\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','stop','success','idling\x20bot\x20\x20\x20|\x20Bot\x20','live','starting\x20new\x20bot\x20|\x20Bot\x20','Invalid\x20authentication\x20token\x20(1)','entries','timestamp','pidRefreshToken','reject','telegramEvents','sockets','callback_query','order','timeshift','value','::1','15\x20min','access','get-portfolio','getMinutes'];_0x471a=function(){return _0x60c6f9;};return _0x471a();}!fs[_0x42d216(0x2b5)](configbackuppath)&&fs[_0x42d216(0x302)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x42d216(0x1f6)]({'settings':{'timeshift':0x0}})[_0x42d216(0x30c)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x42d216(0x239)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+_0x42d216(0x2fa))[_0x42d216(0x1f5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x42d216(0x32a)),app=express(),http=require(_0x42d216(0x24a))[_0x42d216(0x27e)](app);app['use'](express[_0x42d216(0x308)](path[_0x42d216(0x312)](__dirname,bbpath,_0x42d216(0x324)))),app[_0x42d216(0x295)](express[_0x42d216(0x308)](path[_0x42d216(0x312)](__dirname,bbpath,'build'))),app['get']('/',function(_0x15e753,_0xab7729){const _0x51884d=_0x42d216;_0xab7729[_0x51884d(0x31b)](path[_0x51884d(0x312)](__dirname,bbpath,_0x51884d(0x324),_0x51884d(0x2b8)));}),app[_0x42d216(0x29d)](_0x42d216(0x32c),function(_0x5eff27,_0x1b408b){const _0x31104b=_0x42d216;_0x1b408b[_0x31104b(0x31b)](path[_0x31104b(0x312)](__dirname,bbpath,_0x31104b(0x216),_0x31104b(0x2b8)));}),app[_0x42d216(0x29d)](_0x42d216(0x22a),(_0x3d6657,_0x58a34f)=>{const _0xac10b0=_0x42d216;_0x58a34f[_0xac10b0(0x31b)](path['join'](__dirname,bbpath,'build','index.html'));}),app[_0x42d216(0x29d)](_0x42d216(0x320),(_0x1b874d,_0x4bd8c3)=>{const _0x187852=_0x42d216;_0x4bd8c3[_0x187852(0x31b)](path[_0x187852(0x312)](__dirname,bbpath,'build',_0x187852(0x2b8)));}),app['get'](_0x42d216(0x228),(_0x22f043,_0x5f144b)=>{const _0x322b4e=_0x42d216;_0x5f144b['sendFile'](path[_0x322b4e(0x312)](__dirname,bbpath,_0x322b4e(0x216),_0x322b4e(0x2b8)));}),app[_0x42d216(0x29d)]('/:bot/history',(_0x3558c6,_0x5d530f)=>{const _0x274e9d=_0x42d216;_0x5d530f[_0x274e9d(0x31b)](path['join'](__dirname,bbpath,_0x274e9d(0x216),'index.html'));}),app[_0x42d216(0x29d)]('/:bot/configuration',(_0x5b036,_0x19fc06)=>{const _0x33bf19=_0x42d216;_0x19fc06[_0x33bf19(0x31b)](path[_0x33bf19(0x312)](__dirname,bbpath,'build',_0x33bf19(0x2b8)));}),app['get'](_0x42d216(0x213),(_0x883687,_0x426073)=>{const _0x3071c5=_0x42d216;_0x426073[_0x3071c5(0x31b)](path['join'](__dirname,bbpath,_0x3071c5(0x216),'index.html'));});if(HOST)http[_0x42d216(0x254)](PORT,HOST);else http[_0x42d216(0x254)](PORT);const io=require(_0x42d216(0x25e))(http,{}),analytics=analyticsLib({'app':_0x42d216(0x28d),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;function _0x5e37(_0x278670,_0x488733){const _0x61ce35=_0x471a();return _0x5e37=function(_0x7fd870,_0x40da8e){_0x7fd870=_0x7fd870-0x1f4;let _0x471af2=_0x61ce35[_0x7fd870];return _0x471af2;},_0x5e37(_0x278670,_0x488733);}if(settings[_0x42d216(0x2af)]&&settings[_0x42d216(0x2af)]!=''&&settings['telegramUsername']&&settings[_0x42d216(0x24f)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2b4249=_0x42d216;console[_0x2b4249(0x29c)](''),console['log'](_0x2b4249(0x202)),logging(_0x2b4249(0x20b)+PORT),console['log'](_0x2b4249(0x202));if(config[_0x2b4249(0x2cc)]!=0x0)config[_0x2b4249(0x240)](_0x28b8ad=>{const _0x390989=_0x2b4249;if(_0x28b8ad[_0x390989(0x282)]==_0x390989(0x288)||_0x28b8ad[_0x390989(0x282)]==_0x390989(0x200))logging(_0x390989(0x325)+_0x28b8ad[_0x390989(0x322)]+_0x390989(0x330)+_0x28b8ad[_0x390989(0x2c9)]),startBot([_0x28b8ad['botID'],userID],{'cwd':bbpath},function(_0x4c9010){if(_0x4c9010)logging(_0x4c9010);});else(_0x28b8ad[_0x390989(0x282)]=='disabled'||_0x28b8ad['status']==_0x390989(0x230))&&logging(_0x390989(0x2df)+_0x28b8ad[_0x390989(0x322)]+_0x390989(0x330)+_0x28b8ad[_0x390989(0x2c9)]);});else!newBot&&console['log'](_0x2b4249(0x2a1));if(newBot)addBot();console[_0x2b4249(0x29c)]('-----------------------------------------------------------------------------------'),console[_0x2b4249(0x29c)]('');}function startSocket(){io['on']('connection',_0x4098f3=>{const _0x55ba93=_0x5e37;let _0x1cb382,_0x23142e,_0x4d0aa3,_0x152227,_0x4c0fd6;const _0x1cff74=_0x4098f3['handshake']['headers'][_0x55ba93(0x298)];_0x23142e=_0x1cff74[_0x55ba93(0x219)](/bot[0-9]{3}/);if(_0x23142e)_0x4d0aa3=_0x23142e[0x0]['match'](/[0-9]{3}/);if(_0x4d0aa3)_0x1cb382=_0x4d0aa3[0x0];else _0x1cb382=_0x55ba93(0x28f);const _0x52b57f=_0x4098f3[_0x55ba93(0x1f4)][_0x55ba93(0x20e)][_0x55ba93(0x2d9)];if(!_0x52b57f)_0x4098f3[_0x55ba93(0x277)](_0x55ba93(0x282),{'publicKey':secure[_0x55ba93(0x251)]});else{_0x152227=timelyDecrypt(_0x52b57f,![]);if(!_0x152227)logging(_0x55ba93(0x223));else{_0x4c0fd6=normalizeIP(_0x4098f3[_0x55ba93(0x310)][_0x55ba93(0x23d)])[_0x55ba93(0x2a7)];if(!devices[_0x152227])devices[_0x152227]={'uuid':_0x152227,'access':{'token':null}};devices[_0x152227]['ip']=_0x4c0fd6;const _0x507ceb=addClient(_0x4098f3['id'],_0x152227,_0x1cb382);setAccess(_0x507ceb),_0x4098f3['on']('login',_0x23681f=>{const _0x782081=_0x55ba93,_0x59d491=timelyDecrypt(_0x23681f[_0x782081(0x2c7)]);if(_0x59d491){_0x23681f={'username':_0x23681f[_0x782081(0x297)],'password':_0x59d491},devices[_0x152227][_0x782081(0x2ef)]=validateCredentials(_0x23681f,_0x152227);if(devices[_0x152227]['access'][_0x782081(0x303)]==![]&&devices[_0x152227][_0x782081(0x2ef)]['reason']==_0x782081(0x31c))_0x4098f3['emit'](_0x782081(0x282),{'access':devices[_0x152227][_0x782081(0x2ef)]}),loginAccess2FA(_0x152227,_0x4c0fd6);else{if(devices[_0x152227][_0x782081(0x2ef)][_0x782081(0x303)]==![]&&devices[_0x152227][_0x782081(0x2ef)][_0x782081(0x2be)]=='invalid\x20credentials')_0x4098f3[_0x782081(0x277)](_0x782081(0x282),{'access':devices[_0x152227][_0x782081(0x2ef)]});else devices[_0x152227][_0x782081(0x2ef)][_0x782081(0x303)]&&devices[_0x152227][_0x782081(0x2ef)][_0x782081(0x2be)]==_0x782081(0x268)&&(getClientsWithUuid(_0x152227)[_0x782081(0x240)](_0x27a3ba=>{setAccess(_0x27a3ba);}),setTokenRefresh(_0x152227),setSessionTimeout(_0x782081(0x2d6),_0x152227));}}else logging(_0x782081(0x331));}),_0x4098f3['on']('reset-password',()=>{resetPassword();}),_0x4098f3['on']('disconnect',_0x2d6d2e=>{removeClient(_0x4098f3['id']);});}}});}function initClient(_0x550cee){const _0x574c14=_0x42d216;if(_0x550cee!=_0x574c14(0x28f)&&config[_0x574c14(0x2a8)]!=''){if(pid[_0x550cee])pid[_0x550cee]['send']({'function':_0x574c14(0x306),'args':null});}}function getSocket(_0xf5cbe6){const _0x5366b4=_0x42d216;return io[_0x5366b4(0x2e8)]['sockets'][_0x5366b4(0x29d)](_0xf5cbe6);}function setAccess(_0x148624){const _0x12b6b1=_0x42d216,_0x37e6af=getSocket(_0x148624['id']),_0x7bccbf=_0x148624[_0x12b6b1(0x2d1)],_0x5c92df=_0x148624[_0x12b6b1(0x205)];devices[_0x7bccbf][_0x12b6b1(0x2ef)]=validateAccess(devices[_0x7bccbf][_0x12b6b1(0x2ef)]['token'],_0x7bccbf),_0x37e6af[_0x12b6b1(0x312)](_0x7bccbf);if(devices[_0x7bccbf]['access'][_0x12b6b1(0x303)]){_0x37e6af[_0x12b6b1(0x312)](_0x5c92df);if(_0x5c92df=='botmanager')initializeSocketBotManager(_0x37e6af);else initializeSocketBot(_0x37e6af);initClient(_0x5c92df);}devices[_0x7bccbf][_0x12b6b1(0x2ef)][_0x12b6b1(0x2c8)]&&devices[_0x7bccbf][_0x12b6b1(0x2ef)][_0x12b6b1(0x2be)]==_0x12b6b1(0x231)&&setSessionTimeout(_0x12b6b1(0x265),_0x7bccbf),devices[_0x7bccbf]['access']['token']&&devices[_0x7bccbf]['access']['reason']==_0x12b6b1(0x204)&&setSessionTimeout('login',_0x7bccbf),_0x37e6af[_0x12b6b1(0x277)](_0x12b6b1(0x282),{'status':_0x148624[_0x12b6b1(0x285)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x7bccbf][_0x12b6b1(0x2ef)],'externalip':devices[_0x7bccbf]['ip'],'publicKey':secure[_0x12b6b1(0x251)]}),devices[_0x7bccbf][_0x12b6b1(0x2ef)]['allow']==![]&&devices[_0x7bccbf][_0x12b6b1(0x2ef)][_0x12b6b1(0x2be)]==_0x12b6b1(0x1fb)&&temporaryAccess2FA(_0x7bccbf,devices[_0x7bccbf]['ip']);}function setSessionTimeout(_0x1da149,_0x11bde0){const _0x3cd059=_0x42d216;let _0x323c8a;if(_0x1da149==_0x3cd059(0x2d6))_0x323c8a=loginExpiry*0x3c*0x3e8;else _0x323c8a=devices[_0x11bde0]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x11bde0][_0x3cd059(0x2cf)]['timestamp']);if(devices[_0x11bde0][_0x3cd059(0x255)])clearTimeout(devices[_0x11bde0][_0x3cd059(0x255)]);devices[_0x11bde0]['pidExpireLogin']=setTimeout(()=>{const _0x1e4528=_0x3cd059;if(devices[_0x11bde0][_0x1e4528(0x2e5)])clearTimeout(devices[_0x11bde0]['pidRefreshToken']);removeSocketListeners(_0x11bde0),addBlacklist(_0x11bde0),devices[_0x11bde0][_0x1e4528(0x2cf)]=null,devices[_0x11bde0][_0x1e4528(0x20c)]=null,devices[_0x11bde0]['access']['token']=null,devices[_0x11bde0][_0x1e4528(0x2ef)]=validateAccess(devices[_0x11bde0][_0x1e4528(0x2ef)]['token'],_0x11bde0),!(devices[_0x11bde0][_0x1e4528(0x2ef)][_0x1e4528(0x303)]&&devices[_0x11bde0][_0x1e4528(0x2ef)]['reason']=='login\x20not\x20required')&&(_0x1da149==_0x1e4528(0x2d6)?io['to'](_0x11bde0)['emit'](_0x1e4528(0x282),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x11bde0)[_0x1e4528(0x277)]('status',{'access':{'allow':![],'reason':_0x1e4528(0x317),'token':null}})),devices[_0x11bde0][_0x1e4528(0x2ef)][_0x1e4528(0x2c8)]=null;},_0x323c8a);}function setTokenRefresh(_0x2c4768){const _0x54c408=_0x42d216;if(devices[_0x2c4768][_0x54c408(0x2e5)])clearTimeout(devices[_0x2c4768][_0x54c408(0x2e5)]);devices[_0x2c4768][_0x54c408(0x2e5)]=setTimeout(()=>{const _0x3243a9=_0x54c408;getClientsWithUuid(_0x2c4768)['length']!=0x0?(devices[_0x2c4768][_0x3243a9(0x2ef)]=refreshToken(_0x2c4768),io['to'](_0x2c4768)[_0x3243a9(0x277)](_0x3243a9(0x282),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2c4768][_0x3243a9(0x2ef)],'externalip':devices[_0x2c4768]['ip'],'publicKey':secure[_0x3243a9(0x251)]}),setTokenRefresh(_0x2c4768)):clearTimeout(devices[_0x2c4768][_0x3243a9(0x2e5)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5c32f8){const _0x2ac72a=_0x42d216,_0xe16816=getClient(_0x5c32f8['id'])[_0x2ac72a(0x2d1)];_0x5c32f8[_0x2ac72a(0x277)](_0x2ac72a(0x21f),config),_0x5c32f8[_0x2ac72a(0x277)]('settings',cleanSettings()),_0x5c32f8['on'](_0x2ac72a(0x278),_0x3e641e=>{const _0x52d5b1=_0x2ac72a;if(validateAccess(_0x3e641e,_0xe16816)['allow'])addBot();else logging(_0x52d5b1(0x2da));}),_0x5c32f8['on'](_0x2ac72a(0x2a3),(_0xefd366,_0x34fc18)=>{const _0x4aee55=_0x2ac72a;if(validateAccess(_0x34fc18,_0xe16816)['allow'])toggleBot(_0xefd366['botID'],_0xefd366[_0x4aee55(0x282)],_0xefd366[_0x4aee55(0x2e0)]);else logging(_0x4aee55(0x214));}),_0x5c32f8['on']('delete-bot',(_0x32d336,_0x4057c9)=>{const _0x370d6f=_0x2ac72a;if(validateAccess(_0x4057c9,_0xe16816)[_0x370d6f(0x303)])deleteBot(_0x32d336);else logging(_0x370d6f(0x286));}),_0x5c32f8['on'](_0x2ac72a(0x2b4),(_0x298c30,_0x2dd747)=>{const _0x2b6f4d=_0x2ac72a;if(validateAccess(_0x2dd747,_0xe16816)[_0x2b6f4d(0x303)])storeSettings(_0x298c30,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5c32f8['on'](_0x2ac72a(0x2fe),_0x1b0ccf=>{const _0x35b688=_0x2ac72a;if(validateAccess(_0x1b0ccf,_0xe16816)[_0x35b688(0x303)]){if(devices[_0xe16816][_0x35b688(0x2e5)])clearTimeout(devices[_0xe16816]['pidRefreshToken']);if(devices[_0xe16816][_0x35b688(0x255)])clearTimeout(devices[_0xe16816]['pidExpireLogin']);removeSocketListeners(getClient(_0x5c32f8['id'])[_0x35b688(0x2d1)]),addBlacklist(_0xe16816),devices[_0xe16816][_0x35b688(0x2cf)]=null,devices[_0xe16816][_0x35b688(0x20c)]=null,devices[_0xe16816][_0x35b688(0x2ef)][_0x35b688(0x2c8)]=null,io['to'](getClient(_0x5c32f8['id'])[_0x35b688(0x2d1)])[_0x35b688(0x277)](_0x35b688(0x282),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x35b688(0x1f9));});}function initializeSocketBot(_0x23338f){const _0x5a9d01=_0x42d216,_0x244f41=getClient(_0x23338f['id'])['bot'],_0x5868f5=getClient(_0x23338f['id'])[_0x5a9d01(0x2d1)];_0x23338f['on'](_0x5a9d01(0x236),(_0xde9aa0,_0x2eebb6)=>{const _0x3247f4=_0x5a9d01;if(validateAccess(_0x2eebb6,_0x5868f5)[_0x3247f4(0x303)]){if(pid[_0x244f41])pid[_0x244f41][_0x3247f4(0x209)]({'function':_0x3247f4(0x24c),'args':_0xde9aa0});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x23338f['on'](_0x5a9d01(0x2f0),(_0x235957,_0x187ee2)=>{const _0x117fd1=_0x5a9d01;if(validateAccess(_0x187ee2,_0x5868f5)['allow']){if(pid[_0x244f41])pid[_0x244f41][_0x117fd1(0x209)]({'function':_0x117fd1(0x24d),'args':_0x235957});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x23338f['on'](_0x5a9d01(0x27a),(_0x22c156,_0x246611)=>{const _0x13a1c3=_0x5a9d01;if(validateAccess(_0x246611,_0x5868f5)[_0x13a1c3(0x303)]){if(pid[_0x244f41])pid[_0x244f41]['send']({'function':_0x13a1c3(0x252),'args':_0x22c156});}else logging(_0x13a1c3(0x2aa));}),_0x23338f['on']('store-headless',(_0x2ea8c0,_0x2616a4)=>{const _0x301ef9=_0x5a9d01;if(validateAccess(_0x2616a4,_0x5868f5)[_0x301ef9(0x303)]){if(pid[_0x244f41])pid[_0x244f41][_0x301ef9(0x209)]({'function':_0x301ef9(0x233),'args':_0x2ea8c0});}else logging(_0x301ef9(0x28e));}),_0x23338f['on'](_0x5a9d01(0x25a),_0x527460=>{const _0x1239de=_0x5a9d01;if(validateAccess(_0x527460,_0x5868f5)[_0x1239de(0x303)]){if(pid[_0x244f41])pid[_0x244f41]['send']({'function':_0x1239de(0x2bb),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x23338f['on']('place-order',(_0x4aa0dd,_0x2d3408)=>{const _0x5b83a8=_0x5a9d01;if(validateAccess(_0x2d3408,_0x5868f5)[_0x5b83a8(0x303)]){if(pid[_0x244f41])pid[_0x244f41][_0x5b83a8(0x209)]({'function':_0x5b83a8(0x273),'args':_0x4aa0dd});}else logging(_0x5b83a8(0x30a));}),_0x23338f['on'](_0x5a9d01(0x2b1),_0x49c287=>{const _0x14b2b2=_0x5a9d01;if(validateAccess(_0x49c287,_0x5868f5)[_0x14b2b2(0x303)]){if(pid[_0x244f41])pid[_0x244f41][_0x14b2b2(0x209)]({'function':'cancelLoading','args':null});}else logging(_0x14b2b2(0x338));}),_0x23338f['on'](_0x5a9d01(0x2fe),_0x341244=>{const _0x312c3a=_0x5a9d01;if(validateAccess(_0x341244,_0x5868f5)[_0x312c3a(0x303)]){if(devices[_0x5868f5][_0x312c3a(0x2e5)])clearTimeout(devices[_0x5868f5][_0x312c3a(0x2e5)]);if(devices[_0x5868f5]['pidExpireLogin'])clearTimeout(devices[_0x5868f5]['pidExpireLogin']);removeSocketListeners(getClient(_0x23338f['id'])[_0x312c3a(0x2d1)]),addBlacklist(_0x5868f5),devices[_0x5868f5][_0x312c3a(0x2cf)]=null,devices[_0x5868f5][_0x312c3a(0x20c)]=null,devices[_0x5868f5][_0x312c3a(0x2ef)][_0x312c3a(0x2c8)]=null,io['to'](getClient(_0x23338f['id'])['uuid'])['emit']('status',{'access':{'allow':![],'reason':_0x312c3a(0x296),'token':null}});}else logging(_0x312c3a(0x1f9));});}function removeSocketListeners(_0x44ee19){const _0x3beb56=_0x42d216;getClientsWithUuid(_0x44ee19)[_0x3beb56(0x240)](_0x36d3e7=>{const _0x3085f8=_0x3beb56;getSocket(_0x36d3e7['id'])[_0x3085f8(0x30e)]();});}function cleanSettings(){const _0x44c863=_0x42d216;let _0x2550fc=settings;return settings[_0x44c863(0x2af)]&&settings[_0x44c863(0x2af)]!=''&&(_0x2550fc={..._0x2550fc,'telegramToken':_0x44c863(0x299)}),settings[_0x44c863(0x225)]&&settings['bbPassword']!=''&&(_0x2550fc={..._0x2550fc,'bbPassword':'************'}),_0x2550fc;}function startBot(_0x93bf01,_0xc6a8dd,_0x58f261){const _0x2e0ddf=_0x42d216;let _0x1ff5fb=![];const _0x2e578b=_0x93bf01[0x0];_0xc6a8dd={..._0xc6a8dd,'stdio':[_0x2e0ddf(0x2f2),_0x2e0ddf(0x2f2),'inherit',_0x2e0ddf(0x2a9)]},pid[_0x2e578b]=childProcess[_0x2e0ddf(0x258)](botfile,_0x93bf01,_0xc6a8dd),pid[_0x2e578b]['on'](_0x2e0ddf(0x23b),_0x432a10=>{const _0x1557c7=_0x2e0ddf;switch(Object[_0x1557c7(0x2c5)](_0x432a10)[0x0]){case'botname':updateBotName(_0x2e578b,_0x432a10['botname']);break;case _0x1557c7(0x282):updateStatus(_0x2e578b,_0x432a10[_0x1557c7(0x282)]);break;case _0x1557c7(0x2e0):updateLive(_0x2e578b,_0x432a10[_0x1557c7(0x2e0)]);break;case _0x1557c7(0x31d):updateLive(_0x2e578b,_0x432a10[_0x1557c7(0x31d)]),io['to'](_0x2e578b)[_0x1557c7(0x277)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x1557c7(0x2dd):_0x432a10[_0x1557c7(0x2dd)]=='restart'&&stopBot(_0x2e578b);_0x432a10[_0x1557c7(0x2dd)]==_0x1557c7(0x30b)&&toggleBot(_0x2e578b,_0x1557c7(0x2a2),_0x1557c7(0x301));break;case _0x1557c7(0x291):sendTelegram(_0x2e578b,_0x432a10[_0x1557c7(0x291)]);break;case _0x1557c7(0x222):io['to'](_0x2e578b)['emit'](_0x432a10[_0x1557c7(0x222)],_0x432a10[_0x1557c7(0x21b)]);break;}}),pid[_0x2e578b]['on'](_0x2e0ddf(0x270),function(_0x5311fa){if(_0x1ff5fb)return;_0x1ff5fb=!![],_0x58f261(_0x5311fa);}),pid[_0x2e578b]['on'](_0x2e0ddf(0x224),function(_0x4db98b){const _0x4678b4=_0x2e0ddf;if(_0x1ff5fb)return;_0x1ff5fb=!![],_0x58f261(null);const _0x3a3d4c=dbConfig[_0x4678b4(0x29d)](_0x4678b4(0x21f))[_0x4678b4(0x1ff)]({'botID':_0x2e578b})[_0x4678b4(0x2ec)]();_0x3a3d4c&&(_0x3a3d4c[_0x4678b4(0x282)]=='enabled'||_0x3a3d4c[_0x4678b4(0x282)]==_0x4678b4(0x200))&&(updateLive(_0x2e578b,_0x4678b4(0x301)),logging(_0x4678b4(0x20a)+_0x2e578b),startBot([_0x2e578b,userID],{'cwd':bbpath},function(_0x4a51db){if(_0x4a51db)logging(_0x4a51db);}));});}function stopBot(_0x5c983b){getClientsWithBotID(_0x5c983b)['forEach'](_0x2a55b2=>{const _0x4172b1=_0x5e37;getSocket(_0x2a55b2['id'])[_0x4172b1(0x1f7)](!![]),removeClient(_0x2a55b2['id']);});if(pid[_0x5c983b])pid[_0x5c983b]['kill']();}function addBot(){const _0x45ce19=_0x42d216;let _0x328a25;for(let _0x18cda3=0x1;_0x18cda3<0x3e9;_0x18cda3++){_0x328a25=_0x18cda3[_0x45ce19(0x220)]()[_0x45ce19(0x2d5)](0x3,'0');let _0x57ca64=config['find'](_0x153a1b=>_0x153a1b['botID']==_0x328a25);if(!_0x57ca64)break;}if(_0x328a25==='1000'){logging(_0x45ce19(0x247));return;}logging(_0x45ce19(0x2e1)+_0x328a25),dbConfig['get']('bots')[_0x45ce19(0x280)]({'botID':_0x328a25,'botname':'Bot\x20'+_0x328a25,'status':_0x45ce19(0x200),'live':''})['write'](),startBot([_0x328a25,userID],{'cwd':bbpath},function(_0x40da10){if(_0x40da10)logging(_0x40da10);}),config=getConfiguration(),io['to'](_0x45ce19(0x28f))[_0x45ce19(0x277)]('bots',config);}function deleteBot(_0x34feaf){const _0x43cfdb=_0x42d216;getClientsWithBotID(_0x34feaf)['forEach'](_0x58c1b2=>{const _0x522d95=_0x5e37;getSocket(_0x58c1b2['id'])[_0x522d95(0x1f7)](!![]),removeClient(_0x58c1b2['id']);}),dbConfig[_0x43cfdb(0x29d)]('bots')[_0x43cfdb(0x2ba)]({'botID':_0x34feaf})['write'](),logging('deleted\x20Bot\x20'+_0x34feaf),stopBot(_0x34feaf);try{fs[_0x43cfdb(0x211)](path[_0x43cfdb(0x312)](configpath,_0x43cfdb(0x22f)+_0x34feaf+_0x43cfdb(0x2bd))),fs[_0x43cfdb(0x211)](path['join'](configpath,_0x43cfdb(0x22f)+_0x34feaf+_0x43cfdb(0x276))),fs['unlinkSync'](path[_0x43cfdb(0x312)](configpath,_0x43cfdb(0x22f)+_0x34feaf+_0x43cfdb(0x29b))),fs[_0x43cfdb(0x211)](path[_0x43cfdb(0x312)](configpath,_0x43cfdb(0x22f)+_0x34feaf+_0x43cfdb(0x2a6)));}catch(_0x33b9fa){if(_0x33b9fa)logging(_0x43cfdb(0x26f),_0x33b9fa);}config=getConfiguration(),io['to'](_0x43cfdb(0x28f))[_0x43cfdb(0x277)](_0x43cfdb(0x21f),config);}function toggleBot(_0xe1ac5e,_0x2f92c6,_0x2e76ba){const _0x5c5512=_0x42d216;dbConfig[_0x5c5512(0x29d)]('bots')[_0x5c5512(0x1ff)]({'botID':_0xe1ac5e})[_0x5c5512(0x22d)]({'status':_0x2f92c6})[_0x5c5512(0x22d)]({'live':_0x2e76ba})['write']();if(_0x2f92c6==_0x5c5512(0x288)||_0x2f92c6==_0x5c5512(0x200))logging('enabled\x20Bot\x20'+_0xe1ac5e),startBot([_0xe1ac5e,userID],{'cwd':bbpath},function(_0x24340c){if(_0x24340c)logging(_0x24340c);});else(_0x2f92c6==_0x5c5512(0x2a2)||_0x2f92c6==_0x5c5512(0x230))&&(logging(_0x5c5512(0x340)+_0xe1ac5e),stopBot(_0xe1ac5e));config=getConfiguration(),io['to'](_0x5c5512(0x28f))[_0x5c5512(0x277)](_0x5c5512(0x21f),config);}function toggleStatus(_0x2520ea){const _0x163bb5=_0x42d216;let _0x1f5b1c=dbConfig[_0x163bb5(0x29d)](_0x163bb5(0x21f))[_0x163bb5(0x1ff)]({'botID':_0x2520ea})[_0x163bb5(0x2ec)](),_0x13ca08;if(_0x1f5b1c[_0x163bb5(0x282)]===_0x163bb5(0x288))_0x13ca08=_0x163bb5(0x2a2);else{if(_0x1f5b1c[_0x163bb5(0x282)]===_0x163bb5(0x200))_0x13ca08=_0x163bb5(0x230);else{if(_0x1f5b1c[_0x163bb5(0x282)]===_0x163bb5(0x230))_0x13ca08=_0x163bb5(0x200);else{if(_0x1f5b1c['status']==='disabled')_0x13ca08=_0x163bb5(0x288);}}}return _0x13ca08;}function updateStatus(_0x920012,_0x4c9c91){const _0x50e5db=_0x42d216;dbConfig[_0x50e5db(0x29d)](_0x50e5db(0x21f))[_0x50e5db(0x1ff)]({'botID':_0x920012})['assign']({'status':_0x4c9c91})[_0x50e5db(0x30c)](),config=getConfiguration(),io['to'](_0x50e5db(0x28f))['emit'](_0x50e5db(0x21f),config);}function updateLive(_0x10cd9c,_0x1310d4){const _0x5ae4f0=_0x42d216;dbConfig[_0x5ae4f0(0x29d)](_0x5ae4f0(0x21f))['find']({'botID':_0x10cd9c})[_0x5ae4f0(0x22d)]({'live':_0x1310d4})['write'](),config=getConfiguration(),io['to'](_0x5ae4f0(0x28f))['emit'](_0x5ae4f0(0x21f),config);}function updateBotName(_0x4210ea,_0x448747){const _0x41d312=_0x42d216;dbConfig[_0x41d312(0x29d)](_0x41d312(0x21f))[_0x41d312(0x1ff)]({'botID':_0x4210ea})[_0x41d312(0x22d)]({'botname':_0x448747})[_0x41d312(0x30c)](),config=getConfiguration(),io['to'](_0x41d312(0x28f))[_0x41d312(0x277)](_0x41d312(0x21f),config);}function telegramError(_0x55dd97){const _0x32f72e=_0x42d216;console['log'](getTimeStamp()+_0x32f72e(0x26d));}function validateTelegram(_0x297733){const _0x406ad3=_0x42d216;if(_0x297733[_0x406ad3(0x26c)][_0x406ad3(0x297)]!=settings[_0x406ad3(0x24f)]&&'@'+_0x297733[_0x406ad3(0x26c)][_0x406ad3(0x297)]!=settings[_0x406ad3(0x24f)])return tgBot[_0x406ad3(0x32b)](_0x297733[_0x406ad3(0x21c)]['id'],_0x406ad3(0x2a4),{'parse_mode':_0x406ad3(0x31e)})[_0x406ad3(0x237)](_0x32bc4e=>{telegramError(_0x32bc4e);}),![];return!![];}async function initTelegram(){const _0x241587=_0x42d216;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x241587(0x2af)],{'polling':!![]});let _0x174e90=_0x241587(0x24e);_0x174e90+='\x0a',_0x174e90+=_0x241587(0x206),_0x174e90+=_0x241587(0x309),_0x174e90+=_0x241587(0x28a),_0x174e90+=_0x241587(0x30d),_0x174e90+='/on\x20-\x20start\x20bot(s)\x0a',_0x174e90+=_0x241587(0x281),_0x174e90+=_0x241587(0x335),_0x174e90+=_0x241587(0x300);let _0x32998f='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x32998f+='\x0a',_0x32998f+=_0x174e90,tgBot[_0x241587(0x212)](/\/start/,_0xc1ad50=>{const _0x560dc2=_0x241587;if(!validateTelegram(_0xc1ad50))return;if(settings[_0x560dc2(0x2fd)]!=_0xc1ad50['chat']['id'])updateSetting(_0x560dc2(0x2fd),_0xc1ad50[_0x560dc2(0x21c)]['id']);updateSetting(_0x560dc2(0x272),!![]),tgBot[_0x560dc2(0x32b)](_0xc1ad50[_0x560dc2(0x21c)]['id'],_0x32998f)[_0x560dc2(0x237)](_0x3601fc=>{telegramError(_0x3601fc);});}),tgBot[_0x241587(0x212)](/\/enable/,_0x3d6361=>{const _0x270f94=_0x241587;if(!validateTelegram(_0x3d6361))return;if(settings[_0x270f94(0x2fd)]!=_0x3d6361['chat']['id'])updateSetting('telegramChatId',_0x3d6361[_0x270f94(0x21c)]['id']);updateSetting(_0x270f94(0x272),!![]),tgBot[_0x270f94(0x32b)](_0x3d6361[_0x270f94(0x21c)]['id'],'Notifications\x20enabled')[_0x270f94(0x237)](_0x260e85=>{telegramError(_0x260e85);});}),tgBot['onText'](/\/config/,async _0x39f426=>{const _0x53d7b6=_0x241587;if(!validateTelegram(_0x39f426))return;tgBot[_0x53d7b6(0x32e)](_0x53d7b6(0x2e9)),tgBot['sendMessage'](_0x39f426[_0x53d7b6(0x21c)]['id'],_0x53d7b6(0x261),{'reply_markup':{'inline_keyboard':[[{'text':_0x53d7b6(0x238),'callback_data':_0x53d7b6(0x2b2)},{'text':_0x53d7b6(0x20f),'callback_data':_0x53d7b6(0x2c4)},{'text':_0x53d7b6(0x2b0),'callback_data':'all'}]]}})['catch'](_0x34197b=>{telegramError(_0x34197b);}),tgBot['on'](_0x53d7b6(0x2e9),async _0x452798=>{const _0x1bb482=_0x53d7b6,_0x5464cf=_0x452798[_0x1bb482(0x203)],_0x21d452=_0x452798[_0x1bb482(0x23b)];tgBot[_0x1bb482(0x22e)](_0x452798['id'])[_0x1bb482(0x2b9)](async()=>{const _0x423a2c=_0x1bb482;_0x5464cf=='orders'&&(updateSetting(_0x423a2c(0x2e7),'orders'),updateSetting(_0x423a2c(0x272),!![]),await tgBot[_0x423a2c(0x32b)](_0x21d452['chat']['id'],_0x423a2c(0x328))[_0x423a2c(0x237)](_0xa8f183=>{telegramError(_0xa8f183);}));_0x5464cf==_0x423a2c(0x2c4)&&(updateSetting('telegramEvents','alerts'),updateSetting(_0x423a2c(0x272),!![]),await tgBot['sendMessage'](_0x21d452[_0x423a2c(0x21c)]['id'],_0x423a2c(0x343))['catch'](_0x2975ca=>{telegramError(_0x2975ca);}));_0x5464cf=='all'&&(updateSetting(_0x423a2c(0x2e7),_0x423a2c(0x27b)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x21d452['chat']['id'],_0x423a2c(0x2ca))[_0x423a2c(0x237)](_0x4c79bb=>{telegramError(_0x4c79bb);}));if(!settings[_0x423a2c(0x2fd)])tgBot['sendMessage'](_0x21d452[_0x423a2c(0x21c)]['id'],_0x423a2c(0x2f3))[_0x423a2c(0x237)](_0x5b2649=>{telegramError(_0x5b2649);});}),tgBot[_0x1bb482(0x32e)](_0x1bb482(0x2e9));});}),tgBot['onText'](/\/status/,_0x5a0d7d=>{const _0x30f2ff=_0x241587;if(!validateTelegram(_0x5a0d7d))return;let _0x11333b='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x30f2ff(0x240)](_0x24af49=>{const _0x5684bb=_0x30f2ff;_0x11333b+=_0x5684bb(0x207)+_0x24af49[_0x5684bb(0x322)]+_0x5684bb(0x330)+_0x24af49[_0x5684bb(0x2c9)]+':\x20'+_0x24af49[_0x5684bb(0x282)]+'\x20/\x20'+_0x24af49[_0x5684bb(0x2e0)]+'\x0a';}),_0x11333b+='\x0a',_0x11333b+=_0x30f2ff(0x293),_0x11333b+=!settings[_0x30f2ff(0x272)]?_0x30f2ff(0x2db):_0x30f2ff(0x2d4),_0x11333b+=settings['telegramEnabled']?settings[_0x30f2ff(0x2e7)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x30f2ff(0x2c1)+settings[_0x30f2ff(0x2e7)]+_0x30f2ff(0x319):'',tgBot[_0x30f2ff(0x32b)](_0x5a0d7d[_0x30f2ff(0x21c)]['id'],_0x11333b,{'parse_mode':_0x30f2ff(0x31e)})[_0x30f2ff(0x237)](_0x340502=>{telegramError(_0x340502);});}),tgBot[_0x241587(0x212)](/\/restart/,_0x11969d=>{const _0x297345=_0x241587;if(!validateTelegram(_0x11969d))return;tgBot['removeListener']('callback_query');const _0x5af67e=getEnabledBots();if(_0x5af67e[_0x297345(0x2cc)]==0x0)tgBot['sendMessage'](_0x11969d[_0x297345(0x21c)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x297345(0x237)](_0x3a15d5=>{telegramError(_0x3a15d5);});else{if(_0x5af67e['length']>0x1)_0x5af67e['push']({'botID':_0x297345(0x27b)});let _0xd6b293=[],_0x145ec2=[];const _0x5ea563=_0x5af67e[_0x297345(0x2cc)]%0x4==0x0||_0x5af67e[_0x297345(0x2cc)]%0x4==0x3||_0x5af67e['length']%0x3==0x1?0x4:0x3;let _0x5d974c=0x0;_0x5af67e['forEach']((_0x4c8d68,_0x46d670)=>{const _0x2cce9d=_0x297345;if(_0x46d670%_0x5ea563==0x0)_0x145ec2=[];_0x145ec2[_0x2cce9d(0x280)]({'text':_0x4c8d68[_0x2cce9d(0x322)]=='all'?'All\x20bots':_0x2cce9d(0x207)+_0x4c8d68[_0x2cce9d(0x322)],'callback_data':_0x4c8d68[_0x2cce9d(0x322)]}),_0x46d670%_0x5ea563==0x0&&(_0xd6b293[_0x5d974c]=_0x145ec2,_0x5d974c++);}),tgBot['sendMessage'](_0x11969d[_0x297345(0x21c)]['id'],_0x297345(0x31a),{'reply_markup':{'inline_keyboard':_0xd6b293}})[_0x297345(0x237)](_0x4da1c1=>{telegramError(_0x4da1c1);}),tgBot['on'](_0x297345(0x2e9),async _0x35984f=>{const _0x483550=_0x297345,_0x23d67d=_0x35984f['data'],_0x1c8011=_0x35984f[_0x483550(0x23b)];tgBot[_0x483550(0x22e)](_0x35984f['id'])['then'](async()=>{const _0x127f9e=_0x483550;if(_0x23d67d==_0x127f9e(0x27b)){if(settings[_0x127f9e(0x2e7)]==_0x127f9e(0x2b2))tgBot['sendMessage'](_0x1c8011[_0x127f9e(0x21c)]['id'],_0x127f9e(0x287))['catch'](_0x1efbcb=>{telegramError(_0x1efbcb);});config[_0x127f9e(0x240)](_0x387037=>{stopBot(_0x387037['botID']);});}else{if(settings[_0x127f9e(0x2e7)]==_0x127f9e(0x2b2))tgBot[_0x127f9e(0x32b)](_0x1c8011[_0x127f9e(0x21c)]['id'],_0x127f9e(0x2cb)+_0x23d67d)[_0x127f9e(0x237)](_0x25c1f0=>{telegramError(_0x25c1f0);});stopBot(_0x23d67d);}}),tgBot[_0x483550(0x32e)](_0x483550(0x2e9));});}}),tgBot['onText'](/\/on/,_0x5a95e7=>{const _0x11b94b=_0x241587;if(!validateTelegram(_0x5a95e7))return;tgBot['removeListener']('callback_query');const _0x2a3702=getDisabledBots();if(_0x2a3702[_0x11b94b(0x2cc)]==0x0)tgBot[_0x11b94b(0x32b)](_0x5a95e7[_0x11b94b(0x21c)]['id'],_0x11b94b(0x22b))['catch'](_0x359a13=>{telegramError(_0x359a13);});else{if(_0x2a3702['length']>0x1)_0x2a3702['push']({'botID':_0x11b94b(0x27b)});let _0x57880c=[],_0x58c780=[];const _0x101ce1=_0x2a3702['length']%0x4==0x0||_0x2a3702[_0x11b94b(0x2cc)]%0x4==0x3||_0x2a3702[_0x11b94b(0x2cc)]%0x3==0x1?0x4:0x3;let _0x6a1b1a=0x0;_0x2a3702['forEach']((_0x4995b3,_0x534090)=>{const _0x25de4b=_0x11b94b;if(_0x534090%_0x101ce1==0x0)_0x58c780=[];_0x58c780[_0x25de4b(0x280)]({'text':_0x4995b3[_0x25de4b(0x322)]==_0x25de4b(0x27b)?_0x25de4b(0x2ad):'Bot\x20'+_0x4995b3[_0x25de4b(0x322)],'callback_data':_0x4995b3[_0x25de4b(0x322)]}),_0x534090%_0x101ce1==0x0&&(_0x57880c[_0x6a1b1a]=_0x58c780,_0x6a1b1a++);}),tgBot[_0x11b94b(0x32b)](_0x5a95e7[_0x11b94b(0x21c)]['id'],_0x11b94b(0x263),{'reply_markup':{'inline_keyboard':_0x57880c}})[_0x11b94b(0x237)](_0xf9223f=>{telegramError(_0xf9223f);}),tgBot['on'](_0x11b94b(0x2e9),async _0x3c8852=>{const _0xb7916=_0x11b94b,_0x47782a=_0x3c8852[_0xb7916(0x203)],_0x528d7d=_0x3c8852[_0xb7916(0x23b)];tgBot['answerCallbackQuery'](_0x3c8852['id'])[_0xb7916(0x2b9)](async()=>{const _0x599de5=_0xb7916;if(_0x47782a==_0x599de5(0x27b)){if(settings['telegramEvents']==_0x599de5(0x2b2))tgBot[_0x599de5(0x32b)](_0x528d7d['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x599de5(0x237)](_0x191021=>{telegramError(_0x191021);});_0x2a3702[_0x599de5(0x240)](_0x103735=>{const _0x357d83=_0x599de5;if(_0x103735['botID']!=_0x357d83(0x27b))toggleBot(_0x103735[_0x357d83(0x322)],toggleStatus(_0x103735[_0x357d83(0x322)]),'stopped');});}else{if(settings['telegramEvents']==_0x599de5(0x2b2))tgBot[_0x599de5(0x32b)](_0x528d7d['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x47782a)[_0x599de5(0x237)](_0x4904c0=>{telegramError(_0x4904c0);});toggleBot(_0x47782a,toggleStatus(_0x47782a),_0x599de5(0x301));}}),tgBot[_0xb7916(0x32e)]('callback_query');});}}),tgBot[_0x241587(0x212)](/\/off/,_0x52afbb=>{const _0x1e7996=_0x241587;if(!validateTelegram(_0x52afbb))return;tgBot[_0x1e7996(0x32e)](_0x1e7996(0x2e9));const _0x29f9c3=getEnabledBots();if(_0x29f9c3[_0x1e7996(0x2cc)]==0x0)tgBot[_0x1e7996(0x32b)](_0x52afbb[_0x1e7996(0x21c)]['id'],_0x1e7996(0x321))[_0x1e7996(0x237)](_0x41d032=>{telegramError(_0x41d032);});else{if(_0x29f9c3['length']>0x1)_0x29f9c3['push']({'botID':_0x1e7996(0x27b)});let _0x58af84=[],_0x9e3682=[];const _0x380010=_0x29f9c3[_0x1e7996(0x2cc)]%0x4==0x0||_0x29f9c3[_0x1e7996(0x2cc)]%0x4==0x3||_0x29f9c3[_0x1e7996(0x2cc)]%0x3==0x1?0x4:0x3;let _0x53fe21=0x0;_0x29f9c3[_0x1e7996(0x240)]((_0x1e85f5,_0x474d94)=>{const _0x3631cb=_0x1e7996;if(_0x474d94%_0x380010==0x0)_0x9e3682=[];_0x9e3682[_0x3631cb(0x280)]({'text':_0x1e85f5[_0x3631cb(0x322)]==_0x3631cb(0x27b)?'All\x20bots':_0x3631cb(0x207)+_0x1e85f5[_0x3631cb(0x322)],'callback_data':_0x1e85f5[_0x3631cb(0x322)]}),_0x474d94%_0x380010==0x0&&(_0x58af84[_0x53fe21]=_0x9e3682,_0x53fe21++);}),tgBot['sendMessage'](_0x52afbb[_0x1e7996(0x21c)]['id'],_0x1e7996(0x259),{'reply_markup':{'inline_keyboard':_0x58af84}})[_0x1e7996(0x237)](_0x17ba68=>{telegramError(_0x17ba68);}),tgBot['on'](_0x1e7996(0x2e9),async _0x56242f=>{const _0x1a8903=_0x1e7996,_0x44952e=_0x56242f[_0x1a8903(0x203)],_0x52ac52=_0x56242f[_0x1a8903(0x23b)];tgBot[_0x1a8903(0x22e)](_0x56242f['id'])[_0x1a8903(0x2b9)](async()=>{const _0x5f3eb9=_0x1a8903;if(_0x44952e==_0x5f3eb9(0x27b)){if(settings[_0x5f3eb9(0x2e7)]==_0x5f3eb9(0x2b2))tgBot[_0x5f3eb9(0x32b)](_0x52ac52[_0x5f3eb9(0x21c)]['id'],_0x5f3eb9(0x21a))['catch'](_0x1a3621=>{telegramError(_0x1a3621);});_0x29f9c3['forEach'](_0x45bca6=>{const _0x9b4831=_0x5f3eb9;if(_0x45bca6['botID']!=_0x9b4831(0x27b))toggleBot(_0x45bca6[_0x9b4831(0x322)],toggleStatus(_0x45bca6[_0x9b4831(0x322)]),_0x9b4831(0x301));});}else{if(settings[_0x5f3eb9(0x2e7)]==_0x5f3eb9(0x2b2))tgBot['sendMessage'](_0x52ac52['chat']['id'],_0x5f3eb9(0x208)+_0x44952e)['catch'](_0x36f1d2=>{telegramError(_0x36f1d2);});toggleBot(_0x44952e,toggleStatus(_0x44952e),_0x5f3eb9(0x301));}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x241587(0x212)](/\/disable/,_0x7f7a9=>{const _0x1b58e8=_0x241587;if(!validateTelegram(_0x7f7a9))return;tgBot[_0x1b58e8(0x32b)](_0x7f7a9[_0x1b58e8(0x21c)]['id'],_0x1b58e8(0x342))[_0x1b58e8(0x237)](_0x464f19=>{telegramError(_0x464f19);}),updateSetting(_0x1b58e8(0x272),![]);}),tgBot[_0x241587(0x212)](/\/help/,_0x1052d1=>{const _0x62205f=_0x241587;if(!validateTelegram(_0x1052d1))return;tgBot[_0x62205f(0x32b)](_0x1052d1[_0x62205f(0x21c)]['id'],_0x174e90)['catch'](_0x1f9d51=>{telegramError(_0x1f9d51);});}),tgBot['on'](_0x241587(0x2f7),_0x2e20b9=>{const _0x3f7694=_0x241587;_0x2e20b9[_0x3f7694(0x220)]()[_0x3f7694(0x1fe)](_0x3f7694(0x21e))&&(logging(_0x3f7694(0x25f)),tgBot[_0x3f7694(0x294)](),tgBot=null,io['to']('botmanager')[_0x3f7694(0x277)](_0x3f7694(0x250),_0x3f7694(0x25f)));}),process[_0x241587(0x21d)](_0x241587(0x2b6),()=>{const _0x226912=_0x241587;if(tgBot)tgBot[_0x226912(0x294)]();process[_0x226912(0x224)](0x1);}),process[_0x241587(0x21d)](_0x241587(0x305),()=>{const _0x5c3f16=_0x241587;if(tgBot)tgBot['stopPolling']();process[_0x5c3f16(0x224)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x4f0ecf,_0x3d9ceb){const _0x4f0304=_0x42d216;if(settings[_0x4f0304(0x272)]){if(settings['telegramEvents']==_0x4f0304(0x27b)||(_0x3d9ceb[_0x4f0304(0x327)]==_0x4f0304(0x270)||_0x3d9ceb['type']=='success')&&settings['telegramEvents']=='alerts'||_0x3d9ceb[_0x4f0304(0x327)]==_0x4f0304(0x2ea)&&settings['telegramEvents']==_0x4f0304(0x2b2)){if(tgBot&&settings[_0x4f0304(0x2fd)]){if(_0x3d9ceb[_0x4f0304(0x29a)])tgBot['sendMessage'](settings[_0x4f0304(0x2fd)],_0x3d9ceb[_0x4f0304(0x2c9)]+_0x4f0304(0x229)+_0x3d9ceb[_0x4f0304(0x23f)])['catch'](_0x3b55b5=>{telegramError(_0x3b55b5);});else tgBot[_0x4f0304(0x32b)](settings['telegramChatId'],'Bot\x20'+_0x4f0ecf+_0x4f0304(0x229)+_0x3d9ceb[_0x4f0304(0x23f)])[_0x4f0304(0x237)](_0xc8dcdb=>{telegramError(_0xc8dcdb);});}}}}function getDeviceWithIp(_0x4888db){const _0x25977d=_0x42d216;return devices[_0x25977d(0x1ff)](_0x28bfdf=>_0x28bfdf['ip']===_0x4888db);}function temporaryAccess2FA(_0x1e80dd,_0x2714b9){const _0x43fa9d=_0x42d216;let _0x5941ae=new Date(),_0x201aaf=![];if(lastIpApproval){if(_0x5941ae-lastIpApproval<0x1388)_0x201aaf=!![];}lastIpApproval=new Date();if(_0x201aaf)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x43fa9d(0x2e9)),tgBot[_0x43fa9d(0x32b)](settings[_0x43fa9d(0x2fd)],_0x43fa9d(0x267)+normalizeIP(_0x2714b9)[_0x43fa9d(0x249)]+_0x43fa9d(0x341),{'parse_mode':_0x43fa9d(0x31e),'reply_markup':{'inline_keyboard':[[{'text':_0x43fa9d(0x2c0),'callback_data':'5'},{'text':_0x43fa9d(0x2ee),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x43fa9d(0x237)](_0x4f0be3=>{telegramError(_0x4f0be3);}),tgBot['on'](_0x43fa9d(0x2e9),async _0x291427=>{const _0x6ff5c8=_0x43fa9d,_0xd8b331=_0x291427[_0x6ff5c8(0x203)],_0x708c87=_0x291427['message'];tgBot[_0x6ff5c8(0x22e)](_0x291427['id'])[_0x6ff5c8(0x2b9)](async()=>{const _0x3b8fe0=_0x6ff5c8;devices[_0x1e80dd][_0x3b8fe0(0x2cf)]={'clientip':_0x2714b9,'timestamp':new Date()['getTime'](),'expiry':_0xd8b331},_0xd8b331!=_0x3b8fe0(0x2e6)?(await tgBot[_0x3b8fe0(0x32b)](_0x708c87[_0x3b8fe0(0x21c)]['id'],_0x3b8fe0(0x33f)+_0xd8b331+_0x3b8fe0(0x339),{'parse_mode':'HTML'})[_0x3b8fe0(0x237)](_0x5213a2=>{telegramError(_0x5213a2);}),io['to'](_0x1e80dd)[_0x3b8fe0(0x277)](_0x3b8fe0(0x282),{'access':{'allow':![],'reason':_0x3b8fe0(0x2c3),'token':null}})):(await tgBot['sendMessage'](_0x708c87[_0x3b8fe0(0x21c)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x259823=>{telegramError(_0x259823);}),io['to'](_0x1e80dd)[_0x3b8fe0(0x277)](_0x3b8fe0(0x282),{'access':{'allow':![],'reason':_0x3b8fe0(0x29f),'token':null}}));}),tgBot[_0x6ff5c8(0x32e)](_0x6ff5c8(0x2e9));}));}function loginAccess2FA(_0x2e8a18,_0xb63772){const _0x2f9c52=_0x42d216;tgBot&&settings['telegramChatId']&&(tgBot[_0x2f9c52(0x32e)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x2f9c52(0x304)+normalizeIP(_0xb63772)[_0x2f9c52(0x249)]+_0x2f9c52(0x341),{'parse_mode':_0x2f9c52(0x31e),'reply_markup':{'inline_keyboard':[[{'text':_0x2f9c52(0x275),'callback_data':loginExpiry},{'text':_0x2f9c52(0x2e6),'callback_data':_0x2f9c52(0x2e6)}]]}})[_0x2f9c52(0x237)](_0x19965f=>{telegramError(_0x19965f);}),tgBot['on'](_0x2f9c52(0x2e9),async _0x186645=>{const _0x4ca529=_0x2f9c52,_0x3c6e62=_0x186645[_0x4ca529(0x203)],_0xfa8c1c=_0x186645[_0x4ca529(0x23b)];tgBot[_0x4ca529(0x22e)](_0x186645['id'])['then'](async()=>{const _0x4871c0=_0x4ca529;devices[_0x2e8a18][_0x4871c0(0x20c)]={'clientip':_0xb63772,'timestamp':new Date()[_0x4871c0(0x253)](),'expiry':_0x3c6e62},_0x3c6e62!=_0x4871c0(0x2e6)?(await tgBot[_0x4871c0(0x32b)](_0xfa8c1c[_0x4871c0(0x21c)]['id'],_0x4871c0(0x2f5),{'parse_mode':_0x4871c0(0x31e)})[_0x4871c0(0x237)](_0x6f25a7=>{telegramError(_0x6f25a7);}),io['to'](_0x2e8a18)[_0x4871c0(0x277)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4871c0(0x32b)](_0xfa8c1c[_0x4871c0(0x21c)]['id'],_0x4871c0(0x2bf))[_0x4871c0(0x237)](_0x2b2d36=>{telegramError(_0x2b2d36);}),io['to'](_0x2e8a18)[_0x4871c0(0x277)](_0x4871c0(0x282),{'access':{'allow':![],'reason':_0x4871c0(0x23a),'token':null}}));}),tgBot[_0x4ca529(0x32e)](_0x4ca529(0x2e9));}));}function getConfiguration(){const _0x4ac4f8=_0x42d216;return dbConfig[_0x4ac4f8(0x29d)](_0x4ac4f8(0x21f))['sortBy']('botID')[_0x4ac4f8(0x2ec)]()||[];}function getEnabledBots(){const _0x25f6eb=_0x42d216;return dbConfig[_0x25f6eb(0x29d)](_0x25f6eb(0x21f))[_0x25f6eb(0x329)](_0x25f6eb(0x322))['filter']({'status':_0x25f6eb(0x288)})['value']()||[];}function getDisabledBots(){const _0x3f955c=_0x42d216;return dbConfig[_0x3f955c(0x29d)]('bots')[_0x3f955c(0x329)](_0x3f955c(0x322))[_0x3f955c(0x23e)]({'status':_0x3f955c(0x2a2)})[_0x3f955c(0x2ec)]()||[];}function getSettings(){const _0x1421cd=_0x42d216;return dbSettings['get'](_0x1421cd(0x2d0))['value']()||{'timeshift':0x0};}function getSecure(){const _0x53fe4a=_0x42d216;return dbSecure[_0x53fe4a(0x29d)](_0x53fe4a(0x248))['value']()||{};}function getBlacklist(){const _0x49dd8e=_0x42d216;return dbSecure[_0x49dd8e(0x29d)]('blacklist')[_0x49dd8e(0x2ec)]()||[];}function broadcastToBots(_0xba8a1e,_0x301777){config['forEach'](_0x3bbe8c=>{const _0x2d8be9=_0x5e37;if(_0x3bbe8c[_0x2d8be9(0x282)]==_0x2d8be9(0x288)&&_0x3bbe8c[_0x2d8be9(0x2e0)]==_0x2d8be9(0x318)){if(pid[_0x3bbe8c['botID']])pid[_0x3bbe8c[_0x2d8be9(0x322)]]['send']({[_0xba8a1e]:_0x301777});}});}function storeSettings(_0x27dd95,_0x4a6557=![]){const _0x2bb22c=_0x42d216;_0x27dd95={...settings,..._0x27dd95};if(_0x4a6557&&_0x27dd95['bbPassword']!=_0x2bb22c(0x299)&&_0x27dd95[_0x2bb22c(0x225)]!=''){const _0x5482b6=crypt[_0x2bb22c(0x33e)](secure[_0x2bb22c(0x26a)],_0x27dd95[_0x2bb22c(0x225)])['message'][_0x2bb22c(0x315)]('@')[0x0],_0x1a022e=bcrypt['hashSync'](_0x5482b6,saltRounds);_0x27dd95={..._0x27dd95,'bbPassword':_0x1a022e};}if(_0x4a6557&&_0x27dd95[_0x2bb22c(0x2af)]!=_0x2bb22c(0x299)&&_0x27dd95['telegramToken']!=''){const _0x2e2e8f=crypt[_0x2bb22c(0x33e)](secure[_0x2bb22c(0x26a)],_0x27dd95[_0x2bb22c(0x2af)])[_0x2bb22c(0x23b)]['split']('@')[0x0];_0x27dd95={..._0x27dd95,'telegramToken':_0x2e2e8f};}const _0x482c7d=_0x27dd95['telegramToken']!='************'&&_0x27dd95['telegramToken']!=settings[_0x2bb22c(0x2af)]||_0x27dd95[_0x2bb22c(0x24f)]!=settings[_0x2bb22c(0x24f)],_0x5c814b=_0x27dd95['telegramToken']==''||_0x27dd95['telegramUsername']=='';if(_0x482c7d)_0x27dd95[_0x2bb22c(0x2e7)]=_0x2bb22c(0x27b);for(const [_0x32571e,_0x21fec9]of Object[_0x2bb22c(0x2e3)](_0x27dd95)){if(_0x32571e==_0x2bb22c(0x2af)&&_0x21fec9==_0x2bb22c(0x299)){_0x27dd95[_0x2bb22c(0x2af)]=settings[_0x2bb22c(0x2af)];continue;};if(_0x32571e==_0x2bb22c(0x225)&&_0x21fec9==_0x2bb22c(0x299)){_0x27dd95[_0x2bb22c(0x225)]=settings[_0x2bb22c(0x225)];continue;};dbSettings[_0x2bb22c(0x241)]('settings.'+_0x32571e,_0x21fec9)['write']();}settings=_0x27dd95,io['to'](_0x2bb22c(0x28f))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x2bb22c(0x2eb)]);if(_0x482c7d&&!_0x5c814b)initTelegram();if(_0x482c7d&&_0x5c814b)disableTelegram();getAllClients()['forEach'](_0x55c914=>{const _0x10a036=_0x2bb22c;getSocket(_0x55c914['id'])[_0x10a036(0x277)](_0x10a036(0x282),{'access':{'allow':![],'reason':_0x10a036(0x2c3),'token':null}});});}function updateSetting(_0x5d2381,_0x10ee0d){const _0x23c713=_0x42d216;dbSettings[_0x23c713(0x241)](_0x23c713(0x2fc)+_0x5d2381,_0x10ee0d)['write'](),settings=getSettings(),io['to'](_0x23c713(0x28f))['emit'](_0x23c713(0x2d0),cleanSettings());}function storeSecure(_0x3703a0){const _0x401a75=_0x42d216;dbSecure['get']('secure')['push'](_0x3703a0)[_0x401a75(0x30c)](),secure=_0x3703a0;}function addBlacklist(_0x1f2de1){const _0x236213=_0x42d216;cleanBlacklist();let _0x24d53d;devices[_0x1f2de1]['telegramIpApproval']?_0x24d53d=Math[_0x236213(0x22c)](devices[_0x1f2de1]['telegramIpApproval'][_0x236213(0x1fa)],loginExpiry):_0x24d53d=loginExpiry,dbSecure[_0x236213(0x29d)](_0x236213(0x332))[_0x236213(0x280)]({'expiry':new Date()[_0x236213(0x253)]()+_0x24d53d*0x3c*0x3e8,'token':devices[_0x1f2de1][_0x236213(0x2ef)][_0x236213(0x2c8)]})[_0x236213(0x30c)](),blacklist=dbSecure[_0x236213(0x29d)](_0x236213(0x332))['value']();}function cleanBlacklist(){const _0x4dad9f=_0x42d216;let _0x2a600d=dbSecure[_0x4dad9f(0x29d)](_0x4dad9f(0x332))['cloneDeep']()['value'](),_0x528429=new Date()[_0x4dad9f(0x253)]();_0x2a600d[_0x4dad9f(0x240)](_0x3574fd=>{const _0x2d22f8=_0x4dad9f;_0x3574fd['expiry']<_0x528429&&dbSecure[_0x2d22f8(0x29d)]('blacklist')[_0x2d22f8(0x2ba)]({'expiry':_0x3574fd[_0x2d22f8(0x1fa)]})[_0x2d22f8(0x30c)]();});}function initStates(){const _0x4b3265=_0x42d216;let _0x155182=getConfiguration();_0x155182[_0x4b3265(0x240)](_0x2b93ec=>{const _0x2141d7=_0x4b3265;_0x2b93ec[_0x2141d7(0x2e0)]=_0x2141d7(0x301);}),storeConfiguration(_0x155182);}function onKeys(){const _0x67101b=new RSA();return new Promise(_0x1b109e=>{const _0x5dc7d3=_0x5e37;_0x67101b['generateKeyPairAsync']()[_0x5dc7d3(0x2b9)](_0x1002ea=>{_0x1b109e(_0x1002ea);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4b396e=_0x42d216;let _0x56d8b1=getConfiguration(),_0x1ad2a1=![];_0x56d8b1[_0x4b396e(0x240)](_0x4d804a=>{const _0x340d8c=_0x4b396e;if(_0x4d804a[_0x340d8c(0x282)]==_0x340d8c(0x318))_0x4d804a['status']=_0x340d8c(0x288),_0x1ad2a1=!![];else _0x4d804a[_0x340d8c(0x282)]==_0x340d8c(0x301)&&(_0x4d804a[_0x340d8c(0x282)]='disabled',_0x1ad2a1=!![]);});if(_0x1ad2a1)storeConfiguration(_0x56d8b1);let _0x4a2fad=getSecure();if(!_0x4a2fad['hasOwnProperty']('secret')){let _0x367abf=await generateKeys();_0x4a2fad[_0x4b396e(0x251)]=_0x367abf[_0x4b396e(0x251)],_0x4a2fad[_0x4b396e(0x26a)]=_0x367abf['privateKey'],_0x4a2fad['secret']=crypto[_0x4b396e(0x242)](0x20)[_0x4b396e(0x220)](_0x4b396e(0x244));;storeSecure(_0x4a2fad);}let _0x3e5f0c=getSettings();_0x1ad2a1=![];!_0x3e5f0c[_0x4b396e(0x333)](_0x4b396e(0x235))&&(_0x3e5f0c['loginRequired']=![],_0x3e5f0c['bbUsername']='',_0x3e5f0c[_0x4b396e(0x225)]='',_0x3e5f0c[_0x4b396e(0x245)]=![],_0x1ad2a1=!![]);!_0x3e5f0c[_0x4b396e(0x333)](_0x4b396e(0x257))&&(_0x3e5f0c[_0x4b396e(0x257)]=![],_0x3e5f0c[_0x4b396e(0x215)]=[],_0x3e5f0c[_0x4b396e(0x256)]=![],_0x1ad2a1=!![]);if(!_0x3e5f0c['hasOwnProperty'](_0x4b396e(0x272))){if(_0x3e5f0c['telegramChatId'])_0x3e5f0c[_0x4b396e(0x272)]=!![];else _0x3e5f0c[_0x4b396e(0x272)]=![];_0x1ad2a1=!![];}if(_0x1ad2a1)storeSettings(_0x3e5f0c);}function storeConfiguration(_0x496eac){const _0x345f44=_0x42d216;dbConfig['get'](_0x345f44(0x21f))[_0x345f44(0x2ba)]()[_0x345f44(0x30c)](),dbConfig[_0x345f44(0x29d)](_0x345f44(0x21f))[_0x345f44(0x280)](..._0x496eac)[_0x345f44(0x30c)](),config=_0x496eac;}function resetPassword(){const _0x5042f3=_0x42d216;tgBot&&settings[_0x5042f3(0x2fd)]&&(tgBot['removeListener'](_0x5042f3(0x2e9)),tgBot[_0x5042f3(0x32b)](settings[_0x5042f3(0x2fd)],_0x5042f3(0x217),{'parse_mode':_0x5042f3(0x31e),'reply_markup':{'inline_keyboard':[[{'text':_0x5042f3(0x33b),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x63b565=>{telegramError(_0x63b565);}),tgBot['on'](_0x5042f3(0x2e9),async _0x2790b5=>{const _0x56f2a3=_0x5042f3,_0x38d269=_0x2790b5[_0x56f2a3(0x203)],_0x17fc13=_0x2790b5[_0x56f2a3(0x23b)];tgBot[_0x56f2a3(0x22e)](_0x2790b5['id'])[_0x56f2a3(0x2b9)](async()=>{const _0x1ecb13=_0x56f2a3;if(_0x38d269!='no'){const _0x5c9a45=0xf,_0x131de3=_0x1ecb13(0x2dc),_0x45cc36=Array[_0x1ecb13(0x26c)](crypto['randomFillSync'](new Uint32Array(_0x5c9a45)))[_0x1ecb13(0x23c)](_0x23976a=>_0x131de3[_0x23976a%_0x131de3[_0x1ecb13(0x2cc)]])[_0x1ecb13(0x312)](''),_0x271e3b=bcrypt[_0x1ecb13(0x25b)](_0x45cc36,saltRounds);storeSettings({'bbPassword':_0x271e3b}),await tgBot['sendMessage'](_0x17fc13['chat']['id'],_0x1ecb13(0x2fb)+_0x45cc36,{'parse_mode':_0x1ecb13(0x31e)})[_0x1ecb13(0x237)](_0x237c48=>{telegramError(_0x237c48);});}else await tgBot[_0x1ecb13(0x32b)](_0x17fc13[_0x1ecb13(0x21c)]['id'],_0x1ecb13(0x2d8))[_0x1ecb13(0x237)](_0x4a0809=>{telegramError(_0x4a0809);});}),tgBot[_0x56f2a3(0x32e)](_0x56f2a3(0x2e9));}));}function logging(_0x40818a){const _0x587966=_0x42d216;console['log'](getTimeStamp()+_0x587966(0x32d)+_0x40818a);if(tgBot&&settings[_0x587966(0x2fd)]&&settings[_0x587966(0x2e7)]!='orders')tgBot[_0x587966(0x32b)](settings[_0x587966(0x2fd)],_0x587966(0x20d)+_0x40818a)[_0x587966(0x237)](_0x4cd694=>{telegramError(_0x4cd694);});}function getServerTime(){const _0x1bfa8c=_0x42d216,_0x163b3f=new Date();return _0x163b3f['getFullYear']()+'/'+(_0x163b3f[_0x1bfa8c(0x260)]()+0x1)[_0x1bfa8c(0x220)]()['padStart'](0x2,'0')+'/'+_0x163b3f['getDate']()[_0x1bfa8c(0x220)]()[_0x1bfa8c(0x2d5)](0x2,'0')+'\x20'+_0x163b3f['getHours']()[_0x1bfa8c(0x220)]()['padStart'](0x2,'0')+':'+_0x163b3f['getMinutes']()[_0x1bfa8c(0x220)]()['padStart'](0x2,'0')+':'+_0x163b3f['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x239733=_0x42d216,_0x541b27=shiftedTime();return _0x541b27[_0x239733(0x25c)]()+'/'+(_0x541b27['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x541b27[_0x239733(0x284)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x541b27[_0x239733(0x2b3)]()[_0x239733(0x220)]()[_0x239733(0x2d5)](0x2,'0')+':'+_0x541b27[_0x239733(0x2f1)]()[_0x239733(0x220)]()[_0x239733(0x2d5)](0x2,'0')+':'+_0x541b27['getSeconds']()[_0x239733(0x220)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x25372e=_0x42d216,_0x19fc25=new Date();let _0x43a839=_0x19fc25;if(settings[_0x25372e(0x2eb)]&&settings[_0x25372e(0x2eb)]!==0x0)_0x43a839=fns[_0x25372e(0x2c6)](_0x19fc25,{'hours':settings[_0x25372e(0x2eb)]});return _0x43a839;}function startScheduler(){let _0x1414a5=new Date()['getUTCHours']();_0x1414a5==0x1&&backupConfigFiles();_0x1414a5==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3b2267=_0x42d216;fs[_0x3b2267(0x323)](configpath,{'withFileTypes':!![]})[_0x3b2267(0x240)](_0x104a75=>{const _0x35886c=_0x3b2267;if(!_0x104a75['isDirectory']())fs[_0x35886c(0x2ff)](configpath+_0x104a75[_0x35886c(0x336)],configbackuppath+_0x104a75[_0x35886c(0x336)]);});}function triggerAnalytics(){const _0xc8db38=_0x42d216;analytics[_0xc8db38(0x316)]({'title':_0xc8db38(0x27d),'href':_0xc8db38(0x2f4),'path':'/v'+serverversion});}function validateCredentials(_0x3e130b,_0xd045ba){const _0x4c0b2=_0x42d216;if(_0x3e130b[_0x4c0b2(0x297)]==settings[_0x4c0b2(0x28b)]&&bcrypt[_0x4c0b2(0x232)](_0x3e130b['password'],settings[_0x4c0b2(0x225)])){if(settings[_0x4c0b2(0x245)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x1ff2d2=generateLoginToken(_0xd045ba);return{'allow':!![],'reason':_0x4c0b2(0x268),'token':_0x1ff2d2};}}else return{'allow':![],'reason':_0x4c0b2(0x2a0),'token':null};}function refreshToken(_0xf44fb3){const _0x272e30=_0x42d216,_0x32d58e=generateLoginToken(_0xf44fb3);return{'allow':!![],'reason':_0x272e30(0x268),'token':_0x32d58e};}function validateAccess(_0x34cd2e,_0x5da818){const _0x3767b4=_0x42d216;let _0x4291bb=devices[_0x5da818]['ip'],_0x680bc;const _0x175240=_0x2ecb13=>{const _0x5370d5=_0x5e37;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x5da818)){const _0x34c981=generateLoginToken(_0x5da818);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x34c981};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x680bc=validToken(_0x2ecb13,_0x5da818),_0x680bc[_0x5370d5(0x333)](_0x5370d5(0x2de))?{'allow':!![],'reason':_0x5370d5(0x27f),'token':_0x2ecb13}:{'allow':![],'reason':_0x5370d5(0x289),'token':null};}else return{'allow':!![],'reason':_0x5370d5(0x234),'token':null};};if(settings[_0x3767b4(0x257)]){let _0x5f1393=[...settings[_0x3767b4(0x215)],_0x3767b4(0x2ed),_0x3767b4(0x2d7),'127.0.0.1'];if(_0x5f1393[_0x3767b4(0x1fe)](_0x4291bb))return _0x175240(_0x34cd2e);else{_0x680bc=validToken(_0x34cd2e,_0x5da818);if(_0x680bc['hasOwnProperty'](_0x3767b4(0x2de)))return _0x175240(_0x34cd2e);else{if(telegramIpApproved(_0x5da818)){const _0x35cdb9=generateToken(_0x5da818);return _0x680bc=_0x175240(_0x34cd2e),_0x680bc['allow']?{'allow':!![],'reason':_0x3767b4(0x231),'token':_0x35cdb9}:_0x680bc;}else return settings[_0x3767b4(0x256)]?{'allow':![],'reason':_0x3767b4(0x1fb),'token':null}:{'allow':![],'reason':_0x3767b4(0x1fd),'token':null};}}}else return _0x175240(_0x34cd2e);}function timelyDecrypt(_0x119913,_0x21f985=!![]){const _0x5be51b=_0x42d216;if(_0x119913)try{const _0xbe3aff=crypt[_0x5be51b(0x33e)](secure[_0x5be51b(0x26a)],_0x119913)[_0x5be51b(0x23b)],_0x554c44=_0xbe3aff[_0x5be51b(0x315)]('@')[0x0],_0x2e97ab=_0xbe3aff[_0x5be51b(0x315)]('@')[0x1],_0xc95463=new Date()[_0x5be51b(0x253)]();if(_0x21f985){if(_0xc95463-_0x2e97ab<maxSecretAge*0x3e8)return _0x554c44;else return![];}else return _0x554c44;}catch(_0x5ad324){return![];}else return![];}const validToken=(_0x1b6122,_0x1394e1)=>{const _0x5c0152=_0x42d216,_0x44d2b0=devices[_0x1394e1]['ip'];if(!_0x1b6122)return{'error':'No\x20authentication\x20token'};for(let _0x4c57f0 of blacklist){if(_0x4c57f0['token']==_0x1b6122)return{'error':_0x5c0152(0x2d2)};}let _0x114f8d;try{_0x114f8d=jwt[_0x5c0152(0x218)](_0x1b6122,secure[_0x5c0152(0x31f)]+_0x1394e1);}catch{return{'error':_0x5c0152(0x2e2)};}if(!_0x114f8d[_0x5c0152(0x333)](_0x5c0152(0x269))&&!_0x114f8d['hasOwnProperty']('username')||!_0x114f8d[_0x5c0152(0x333)](_0x5c0152(0x1f8)))return{'error':_0x5c0152(0x334)};if(!_0x114f8d[_0x5c0152(0x333)]('username')&&_0x114f8d[_0x5c0152(0x333)]('clientip')){const {clientip:_0x416d52}=_0x114f8d;return _0x44d2b0==_0x416d52?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x114f8d[_0x5c0152(0x333)](_0x5c0152(0x297))&&_0x114f8d[_0x5c0152(0x333)](_0x5c0152(0x269))){const {username:_0x31a2e0,clientip:_0x1dc3fc}=_0x114f8d;return settings[_0x5c0152(0x28b)]==_0x31a2e0&&_0x44d2b0==_0x1dc3fc?{'success':_0x5c0152(0x201)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x5a5838=>{const _0x15de98=_0x42d216;if(_0x5a5838){const _0x18a3e1=devices[_0x5a5838]['ip'];return jwt['sign']({'username':settings[_0x15de98(0x28b)],'clientip':_0x18a3e1},secure[_0x15de98(0x31f)]+_0x5a5838,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4a1cc0=>{const _0x575c37=_0x42d216;if(_0x4a1cc0){const _0x253397=devices[_0x4a1cc0]['ip'];return jwt[_0x575c37(0x283)]({'clientip':_0x253397},secure[_0x575c37(0x31f)]+_0x4a1cc0,{'expiresIn':devices[_0x4a1cc0]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x15731c=>{const _0x5a8cb5=_0x42d216;let _0x1bb543=![];return devices[_0x15731c][_0x5a8cb5(0x2cf)]&&devices[_0x15731c]['telegramIpApproval'][_0x5a8cb5(0x1fa)]!=_0x5a8cb5(0x2e6)&&(_0x1bb543=devices[_0x15731c][_0x5a8cb5(0x2cf)][_0x5a8cb5(0x269)]==devices[_0x15731c]['ip']&&new Date()[_0x5a8cb5(0x253)]()-devices[_0x15731c]['telegramIpApproval']['timestamp']<devices[_0x15731c]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x1bb543;},telegram2FaApproved=_0x49bf6a=>{const _0x4c85eb=_0x42d216;let _0x55e14f=![];return devices[_0x49bf6a][_0x4c85eb(0x20c)]&&devices[_0x49bf6a][_0x4c85eb(0x20c)][_0x4c85eb(0x1fa)]!=_0x4c85eb(0x2e6)&&(_0x55e14f=devices[_0x49bf6a][_0x4c85eb(0x20c)][_0x4c85eb(0x269)]==devices[_0x49bf6a]['ip']&&new Date()[_0x4c85eb(0x253)]()-devices[_0x49bf6a][_0x4c85eb(0x20c)][_0x4c85eb(0x2e4)]<devices[_0x49bf6a]['telegram2FaApproval'][_0x4c85eb(0x1fa)]*0x3c*0x3e8),_0x55e14f;},normalizeIP=_0x267c9e=>{const _0x5a9b6a=_0x42d216;let _0x2b8fec=null,_0x5d0ef0=null;if(ipaddr[_0x5a9b6a(0x24b)](_0x267c9e)){const _0x49a0dc=ipaddr[_0x5a9b6a(0x326)](_0x267c9e);_0x49a0dc['kind']()===_0x5a9b6a(0x33a)?(_0x49a0dc['isIPv4MappedAddress']()&&(_0x2b8fec=_0x49a0dc[_0x5a9b6a(0x246)]()['toString']()),_0x5d0ef0=_0x49a0dc[_0x5a9b6a(0x220)]()):(_0x2b8fec=_0x49a0dc[_0x5a9b6a(0x220)](),_0x5d0ef0=_0x49a0dc[_0x5a9b6a(0x2f8)]()[_0x5a9b6a(0x220)]());}return{'show':_0x2b8fec?_0x2b8fec:_0x5d0ef0,'store':_0x5d0ef0};};