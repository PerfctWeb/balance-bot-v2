const _0x384e86=_0x35f3;(function(_0x59cdc3,_0x56fe40){const _0x1119a8=_0x35f3,_0x24be98=_0x59cdc3();while(!![]){try{const _0x328841=-parseInt(_0x1119a8(0x2e8))/0x1*(parseInt(_0x1119a8(0x2ad))/0x2)+parseInt(_0x1119a8(0x236))/0x3+parseInt(_0x1119a8(0x2db))/0x4+-parseInt(_0x1119a8(0x288))/0x5*(parseInt(_0x1119a8(0x268))/0x6)+parseInt(_0x1119a8(0x2b7))/0x7*(parseInt(_0x1119a8(0x2d5))/0x8)+parseInt(_0x1119a8(0x278))/0x9+parseInt(_0x1119a8(0x1f6))/0xa*(-parseInt(_0x1119a8(0x269))/0xb);if(_0x328841===_0x56fe40)break;else _0x24be98['push'](_0x24be98['shift']());}catch(_0x568963){_0x24be98['push'](_0x24be98['shift']());}}}(_0x4c55,0x9d94e));const _0x163712=function(){let _0x1ddd61=!![];return function(_0x3c0d63,_0x25e50e){const _0x564172=_0x1ddd61?function(){const _0x2fb8a4=_0x35f3;if(_0x25e50e){const _0x5bd835=_0x25e50e[_0x2fb8a4(0x28f)](_0x3c0d63,arguments);return _0x25e50e=null,_0x5bd835;}}:function(){};return _0x1ddd61=![],_0x564172;};}(),_0x1d2342=_0x163712(this,function(){const _0x20dace=_0x35f3;return _0x1d2342['toString']()[_0x20dace(0x1f4)](_0x20dace(0x2ec))[_0x20dace(0x2dc)]()[_0x20dace(0x276)](_0x1d2342)['search'](_0x20dace(0x2ec));});_0x1d2342();'use strict';process['env'][_0x384e86(0x205)]=0x1;const childProcess=require(_0x384e86(0x2ee)),FileSync=require(_0x384e86(0x213)),fs=require('fs'),fns=require('date-fns'),low=require(_0x384e86(0x301)),path=require(_0x384e86(0x25b)),crypto=require(_0x384e86(0x22d)),Crypt=require(_0x384e86(0x2ca))[_0x384e86(0x24a)],RSA=require('hybrid-crypto-js')[_0x384e86(0x2f1)],bcrypt=require('bcryptjs'),jwt=require(_0x384e86(0x25e)),analyticsLib=require(_0x384e86(0x273))[_0x384e86(0x1f2)],googleAnalytics=require(_0x384e86(0x1e5))['default'],ipaddr=require(_0x384e86(0x24d)),argv=require(_0x384e86(0x240))(process['argv'][_0x384e86(0x225)](0x2))[_0x384e86(0x25d)],PORT=argv[_0x384e86(0x261)]||_0x384e86(0x30c),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x384e86(0x283)](PORT))return console[_0x384e86(0x310)](_0x384e86(0x1e2)+PORT+_0x384e86(0x20f)),process[_0x384e86(0x281)](0x1);const HOST=argv['host']||null,userID=argv['user']||'';let bbpath=_0x384e86(0x262);const botfile=_0x384e86(0x2c2),configfile=_0x384e86(0x28d),settingsfile='bb-settings.json',securefile=_0x384e86(0x2a7);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+_0x384e86(0x2e0)),configpath=userID?bbpath+_0x384e86(0x2e7)+userID+'/':bbpath+_0x384e86(0x2e7),configbackuppath=configpath+_0x384e86(0x242);!fs['existsSync'](configpath)&&fs[_0x384e86(0x1db)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x384e86(0x291)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x384e86(0x280)]({'settings':{'timeshift':0x0}})[_0x384e86(0x291)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x384e86(0x280)]({'secure':{},'blacklist':[]})[_0x384e86(0x291)]();let crypt=new Crypt({'md':_0x384e86(0x299),'rsaStandard':_0x384e86(0x2bc)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+'version.json')[_0x384e86(0x303)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x384e86(0x1ed)),app=express(),http=require(_0x384e86(0x24e))[_0x384e86(0x224)](app);app[_0x384e86(0x20e)](express[_0x384e86(0x2d2)](path[_0x384e86(0x2a6)](__dirname,bbpath,_0x384e86(0x2d3)))),app[_0x384e86(0x20e)](express[_0x384e86(0x2d2)](path[_0x384e86(0x2a6)](__dirname,bbpath,_0x384e86(0x30e)))),app['get']('/',function(_0x57d58b,_0x344b3b){const _0x5680e2=_0x384e86;_0x344b3b['sendFile'](path[_0x5680e2(0x2a6)](__dirname,bbpath,_0x5680e2(0x2d3),_0x5680e2(0x228)));}),app['get'](_0x384e86(0x255),function(_0x1a97c0,_0x6e11d0){const _0xc56ba8=_0x384e86;_0x6e11d0[_0xc56ba8(0x222)](path[_0xc56ba8(0x2a6)](__dirname,bbpath,_0xc56ba8(0x30e),'index.html'));}),app['get'](_0x384e86(0x249),(_0x487b41,_0x5da4ae)=>{const _0x470604=_0x384e86;_0x5da4ae[_0x470604(0x222)](path['join'](__dirname,bbpath,_0x470604(0x30e),_0x470604(0x228)));}),app[_0x384e86(0x284)](_0x384e86(0x2c7),(_0x414d69,_0x5b8ac8)=>{const _0xbfca44=_0x384e86;_0x5b8ac8[_0xbfca44(0x222)](path[_0xbfca44(0x2a6)](__dirname,bbpath,_0xbfca44(0x30e),_0xbfca44(0x228)));}),app['get'](_0x384e86(0x2d1),(_0x4e5511,_0x24a9d7)=>{const _0x53b5d5=_0x384e86;_0x24a9d7['sendFile'](path[_0x53b5d5(0x2a6)](__dirname,bbpath,_0x53b5d5(0x30e),_0x53b5d5(0x228)));}),app['get'](_0x384e86(0x1e8),(_0x454615,_0x34b59a)=>{const _0x147088=_0x384e86;_0x34b59a[_0x147088(0x222)](path[_0x147088(0x2a6)](__dirname,bbpath,_0x147088(0x30e),'index.html'));}),app['get'](_0x384e86(0x1ff),(_0xfa8b83,_0x1c673a)=>{const _0xc1cad9=_0x384e86;_0x1c673a[_0xc1cad9(0x222)](path[_0xc1cad9(0x2a6)](__dirname,bbpath,_0xc1cad9(0x30e),_0xc1cad9(0x228)));}),app[_0x384e86(0x284)](_0x384e86(0x200),(_0x3a15fa,_0x24c3b8)=>{const _0x2b2f48=_0x384e86;_0x24c3b8[_0x2b2f48(0x222)](path[_0x2b2f48(0x2a6)](__dirname,bbpath,'build',_0x2b2f48(0x228)));});if(HOST)http[_0x384e86(0x2b1)](PORT,HOST);else http['listen'](PORT);const io=require(_0x384e86(0x1ee))(http,{}),analytics=analyticsLib({'app':_0x384e86(0x247),'plugins':[googleAnalytics({'trackingId':_0x384e86(0x2b5)})]}),TelegramBot=require(_0x384e86(0x30d));let tgBot;if(settings[_0x384e86(0x230)]&&settings['telegramToken']!=''&&settings[_0x384e86(0x26a)]&&settings[_0x384e86(0x26a)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x28b0b0=_0x384e86;console['log'](''),console[_0x28b0b0(0x310)](_0x28b0b0(0x2c3)),logging(_0x28b0b0(0x2da)+PORT),console[_0x28b0b0(0x310)](_0x28b0b0(0x2c3));if(config['length']!=0x0)config[_0x28b0b0(0x2ba)](_0x5355be=>{const _0xbdc700=_0x28b0b0;if(_0x5355be[_0xbdc700(0x23e)]=='enabled'||_0x5355be[_0xbdc700(0x23e)]=='new')logging(_0xbdc700(0x25f)+_0x5355be[_0xbdc700(0x23c)]+_0xbdc700(0x302)+_0x5355be[_0xbdc700(0x22f)]),startBot([_0x5355be[_0xbdc700(0x23c)],userID],{'cwd':bbpath},function(_0x1c0c6a){if(_0x1c0c6a)logging(_0x1c0c6a);});else(_0x5355be[_0xbdc700(0x23e)]=='disabled'||_0x5355be['status']==_0xbdc700(0x2cc))&&logging(_0xbdc700(0x2df)+_0x5355be[_0xbdc700(0x23c)]+_0xbdc700(0x302)+_0x5355be[_0xbdc700(0x22f)]);});else!newBot&&console[_0x28b0b0(0x310)](_0x28b0b0(0x29e));if(newBot)addBot();console[_0x28b0b0(0x310)]('-----------------------------------------------------------------------------------'),console[_0x28b0b0(0x310)]('');}function startSocket(){io['on']('connection',_0x129a46=>{const _0x48badd=_0x35f3;let _0x17efab,_0xc9779a,_0x374755,_0x538414,_0x92bdac;const _0x141a03=_0x129a46[_0x48badd(0x1d2)]['headers'][_0x48badd(0x30a)];_0xc9779a=_0x141a03['match'](/bot[0-9]{3}/);if(_0xc9779a)_0x374755=_0xc9779a[0x0][_0x48badd(0x1e4)](/[0-9]{3}/);if(_0x374755)_0x17efab=_0x374755[0x0];else _0x17efab='botmanager';const _0x513cdf=_0x129a46['handshake']['auth']['encryptedUuid'];if(!_0x513cdf)_0x129a46[_0x48badd(0x1de)](_0x48badd(0x23e),{'publicKey':secure[_0x48badd(0x2f4)]});else{_0x538414=timelyDecrypt(_0x513cdf,![]);if(!_0x538414)logging(_0x48badd(0x2b8));else{_0x92bdac=normalizeIP(_0x129a46[_0x48badd(0x1e0)][_0x48badd(0x294)])[_0x48badd(0x248)];if(!devices[_0x538414])devices[_0x538414]={'uuid':_0x538414,'access':{'token':null}};devices[_0x538414]['ip']=_0x92bdac;const _0x4d354a=addClient(_0x129a46['id'],_0x538414,_0x17efab);setAccess(_0x4d354a),_0x129a46['on'](_0x48badd(0x29b),_0x3a08db=>{const _0x1da66b=_0x48badd,_0x6a1b81=timelyDecrypt(_0x3a08db[_0x1da66b(0x306)]);if(_0x6a1b81){_0x3a08db={'username':_0x3a08db[_0x1da66b(0x2a8)],'password':_0x6a1b81},devices[_0x538414][_0x1da66b(0x1d3)]=validateCredentials(_0x3a08db,_0x538414);if(devices[_0x538414][_0x1da66b(0x1d3)][_0x1da66b(0x257)]==![]&&devices[_0x538414]['access']['reason']==_0x1da66b(0x206))_0x129a46[_0x1da66b(0x1de)](_0x1da66b(0x23e),{'access':devices[_0x538414][_0x1da66b(0x1d3)]}),loginAccess2FA(_0x538414,_0x92bdac);else{if(devices[_0x538414][_0x1da66b(0x1d3)][_0x1da66b(0x257)]==![]&&devices[_0x538414][_0x1da66b(0x1d3)][_0x1da66b(0x26c)]==_0x1da66b(0x1fc))_0x129a46['emit'](_0x1da66b(0x23e),{'access':devices[_0x538414]['access']});else devices[_0x538414][_0x1da66b(0x1d3)][_0x1da66b(0x257)]&&devices[_0x538414][_0x1da66b(0x1d3)][_0x1da66b(0x26c)]==_0x1da66b(0x238)&&(getClientsWithUuid(_0x538414)['forEach'](_0x4d9485=>{setAccess(_0x4d9485);}),setTokenRefresh(_0x538414),setSessionTimeout(_0x1da66b(0x29b),_0x538414));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x129a46['on'](_0x48badd(0x295),()=>{resetPassword();}),_0x129a46['on'](_0x48badd(0x2f8),_0x2b740a=>{removeClient(_0x129a46['id']);});}}});}function initClient(_0x14cfc1){const _0x261396=_0x384e86;if(_0x14cfc1!=_0x261396(0x2f3)&&config['apiKey']!=''){if(pid[_0x14cfc1])pid[_0x14cfc1]['send']({'function':_0x261396(0x237),'args':null});}}function getSocket(_0x1dc2e5){const _0x1af7d7=_0x384e86;return io['sockets'][_0x1af7d7(0x2b0)][_0x1af7d7(0x284)](_0x1dc2e5);}function setAccess(_0x4cc8b2){const _0x4a51b2=_0x384e86,_0x15a0fb=getSocket(_0x4cc8b2['id']),_0x36dd11=_0x4cc8b2[_0x4a51b2(0x1fb)],_0x3e6b82=_0x4cc8b2[_0x4a51b2(0x243)];devices[_0x36dd11]['access']=validateAccess(devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x2a9)],_0x36dd11),_0x15a0fb[_0x4a51b2(0x2a6)](_0x36dd11);if(devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x257)]){_0x15a0fb[_0x4a51b2(0x2a6)](_0x3e6b82);if(_0x3e6b82==_0x4a51b2(0x2f3))initializeSocketBotManager(_0x15a0fb);else initializeSocketBot(_0x15a0fb);initClient(_0x3e6b82);}devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x2a9)]&&devices[_0x36dd11]['access'][_0x4a51b2(0x26c)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x4a51b2(0x272),_0x36dd11),devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x2a9)]&&devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x26c)]==_0x4a51b2(0x21b)&&setSessionTimeout('login',_0x36dd11),_0x15a0fb[_0x4a51b2(0x1de)](_0x4a51b2(0x23e),{'status':_0x4cc8b2['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x36dd11][_0x4a51b2(0x1d3)],'externalip':devices[_0x36dd11]['ip'],'publicKey':secure[_0x4a51b2(0x2f4)]}),devices[_0x36dd11][_0x4a51b2(0x1d3)][_0x4a51b2(0x257)]==![]&&devices[_0x36dd11]['access']['reason']==_0x4a51b2(0x25a)&&temporaryAccess2FA(_0x36dd11,devices[_0x36dd11]['ip']);}function setSessionTimeout(_0x578362,_0x589a0d){const _0xe61b34=_0x384e86;let _0x23e7aa;if(_0x578362==_0xe61b34(0x29b))_0x23e7aa=loginExpiry*0x3c*0x3e8;else _0x23e7aa=devices[_0x589a0d]['telegramIpApproval'][_0xe61b34(0x2b2)]*0x3c*0x3e8-(new Date()[_0xe61b34(0x216)]()-devices[_0x589a0d][_0xe61b34(0x245)][_0xe61b34(0x28b)]);if(devices[_0x589a0d][_0xe61b34(0x290)])clearTimeout(devices[_0x589a0d]['pidExpireLogin']);devices[_0x589a0d]['pidExpireLogin']=setTimeout(()=>{const _0x11f0e1=_0xe61b34;if(devices[_0x589a0d]['pidRefreshToken'])clearTimeout(devices[_0x589a0d][_0x11f0e1(0x1e9)]);removeSocketListeners(_0x589a0d),addBlacklist(_0x589a0d),devices[_0x589a0d]['telegramIpApproval']=null,devices[_0x589a0d][_0x11f0e1(0x2c4)]=null,devices[_0x589a0d]['access'][_0x11f0e1(0x2a9)]=null,devices[_0x589a0d][_0x11f0e1(0x1d3)]=validateAccess(devices[_0x589a0d][_0x11f0e1(0x1d3)][_0x11f0e1(0x2a9)],_0x589a0d),!(devices[_0x589a0d][_0x11f0e1(0x1d3)][_0x11f0e1(0x257)]&&devices[_0x589a0d][_0x11f0e1(0x1d3)]['reason']==_0x11f0e1(0x251))&&(_0x578362==_0x11f0e1(0x29b)?io['to'](_0x589a0d)[_0x11f0e1(0x1de)](_0x11f0e1(0x23e),{'access':{'allow':![],'reason':_0x11f0e1(0x311),'token':null}}):io['to'](_0x589a0d)[_0x11f0e1(0x1de)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x589a0d][_0x11f0e1(0x1d3)][_0x11f0e1(0x2a9)]=null;},_0x23e7aa);}function _0x35f3(_0xa8d4c4,_0x2c6174){const _0x29be18=_0x4c55();return _0x35f3=function(_0x1d2342,_0x163712){_0x1d2342=_0x1d2342-0x1ca;let _0x4c5509=_0x29be18[_0x1d2342];return _0x4c5509;},_0x35f3(_0xa8d4c4,_0x2c6174);}function setTokenRefresh(_0x42f42f){const _0x1123af=_0x384e86;if(devices[_0x42f42f]['pidRefreshToken'])clearTimeout(devices[_0x42f42f]['pidRefreshToken']);devices[_0x42f42f][_0x1123af(0x1e9)]=setTimeout(()=>{const _0x558f10=_0x1123af;getClientsWithUuid(_0x42f42f)[_0x558f10(0x21f)]!=0x0?(devices[_0x42f42f][_0x558f10(0x1d3)]=refreshToken(_0x42f42f),io['to'](_0x42f42f)[_0x558f10(0x1de)]('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x42f42f][_0x558f10(0x1d3)],'externalip':devices[_0x42f42f]['ip'],'publicKey':secure[_0x558f10(0x2f4)]}),setTokenRefresh(_0x42f42f)):clearTimeout(devices[_0x42f42f]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xdf37cb){const _0x1809bb=_0x384e86,_0x2a91dc=getClient(_0xdf37cb['id'])[_0x1809bb(0x1fb)];_0xdf37cb['emit'](_0x1809bb(0x210),config),_0xdf37cb[_0x1809bb(0x1de)]('settings',cleanSettings()),_0xdf37cb['on']('add-bot',_0x58d943=>{const _0x2822a8=_0x1809bb;if(validateAccess(_0x58d943,_0x2a91dc)[_0x2822a8(0x257)])addBot();else logging(_0x2822a8(0x28a));}),_0xdf37cb['on'](_0x1809bb(0x1d7),(_0x428b99,_0x5ba2a0)=>{const _0x4de89c=_0x1809bb;if(validateAccess(_0x5ba2a0,_0x2a91dc)['allow'])toggleBot(_0x428b99[_0x4de89c(0x23c)],_0x428b99[_0x4de89c(0x23e)],_0x428b99[_0x4de89c(0x24b)]);else logging(_0x4de89c(0x2f9));}),_0xdf37cb['on'](_0x1809bb(0x263),(_0x1daf03,_0x2ca1fa)=>{const _0x38c797=_0x1809bb;if(validateAccess(_0x2ca1fa,_0x2a91dc)[_0x38c797(0x257)])deleteBot(_0x1daf03);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0xdf37cb['on']('store-settings',(_0x440ff0,_0x2e1fb7)=>{const _0x1685c9=_0x1809bb;if(validateAccess(_0x2e1fb7,_0x2a91dc)[_0x1685c9(0x257)])storeSettings(_0x440ff0,!![]);else logging(_0x1685c9(0x27e));}),_0xdf37cb['on'](_0x1809bb(0x23b),_0x511a43=>{const _0x5d09ce=_0x1809bb;if(validateAccess(_0x511a43,_0x2a91dc)['allow']){if(devices[_0x2a91dc][_0x5d09ce(0x1e9)])clearTimeout(devices[_0x2a91dc][_0x5d09ce(0x1e9)]);if(devices[_0x2a91dc]['pidExpireLogin'])clearTimeout(devices[_0x2a91dc][_0x5d09ce(0x290)]);removeSocketListeners(getClient(_0xdf37cb['id'])[_0x5d09ce(0x1fb)]),addBlacklist(_0x2a91dc),devices[_0x2a91dc][_0x5d09ce(0x245)]=null,devices[_0x2a91dc][_0x5d09ce(0x2c4)]=null,devices[_0x2a91dc]['access'][_0x5d09ce(0x2a9)]=null,io['to'](getClient(_0xdf37cb['id'])[_0x5d09ce(0x1fb)])[_0x5d09ce(0x1de)](_0x5d09ce(0x23e),{'access':{'allow':![],'reason':_0x5d09ce(0x23a),'token':null}});}else logging(_0x5d09ce(0x20a));});}function initializeSocketBot(_0x1df119){const _0x555109=_0x384e86,_0x488993=getClient(_0x1df119['id'])[_0x555109(0x243)],_0x4f4c36=getClient(_0x1df119['id'])['uuid'];_0x1df119['on'](_0x555109(0x203),(_0x492234,_0x58e8c9)=>{const _0x157138=_0x555109;if(validateAccess(_0x58e8c9,_0x4f4c36)[_0x157138(0x257)]){if(pid[_0x488993])pid[_0x488993][_0x157138(0x220)]({'function':_0x157138(0x27d),'args':_0x492234});}else logging(_0x157138(0x29c));}),_0x1df119['on'](_0x555109(0x2e6),(_0x34eb7a,_0x231980)=>{const _0x222f5c=_0x555109;if(validateAccess(_0x231980,_0x4f4c36)[_0x222f5c(0x257)]){if(pid[_0x488993])pid[_0x488993][_0x222f5c(0x220)]({'function':_0x222f5c(0x208),'args':_0x34eb7a});}else logging(_0x222f5c(0x2ef));}),_0x1df119['on']('store-configuration',(_0x443075,_0x6e1d1d)=>{const _0x31b27c=_0x555109;if(validateAccess(_0x6e1d1d,_0x4f4c36)[_0x31b27c(0x257)]){if(pid[_0x488993])pid[_0x488993][_0x31b27c(0x220)]({'function':_0x31b27c(0x1da),'args':_0x443075});}else logging(_0x31b27c(0x2fd));}),_0x1df119['on'](_0x555109(0x227),(_0x3a94e0,_0x39b7cf)=>{const _0x50785f=_0x555109;if(validateAccess(_0x39b7cf,_0x4f4c36)[_0x50785f(0x257)]){if(pid[_0x488993])pid[_0x488993][_0x50785f(0x220)]({'function':_0x50785f(0x2f2),'args':_0x3a94e0});}else logging(_0x50785f(0x274));}),_0x1df119['on'](_0x555109(0x271),_0x104f8a=>{const _0x5b0b19=_0x555109;if(validateAccess(_0x104f8a,_0x4f4c36)[_0x5b0b19(0x257)]){if(pid[_0x488993])pid[_0x488993]['send']({'function':_0x5b0b19(0x2b6),'args':null});}else logging(_0x5b0b19(0x2ce));}),_0x1df119['on']('place-order',(_0x24141c,_0x40dabd)=>{const _0x2cd5dc=_0x555109;if(validateAccess(_0x40dabd,_0x4f4c36)[_0x2cd5dc(0x257)]){if(pid[_0x488993])pid[_0x488993][_0x2cd5dc(0x220)]({'function':_0x2cd5dc(0x2a4),'args':_0x24141c});}else logging(_0x2cd5dc(0x256));}),_0x1df119['on'](_0x555109(0x1fe),_0x17339a=>{const _0xe310ec=_0x555109;if(validateAccess(_0x17339a,_0x4f4c36)[_0xe310ec(0x257)]){if(pid[_0x488993])pid[_0x488993][_0xe310ec(0x220)]({'function':_0xe310ec(0x2e4),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x1df119['on'](_0x555109(0x23b),_0x2c61ed=>{const _0x38385b=_0x555109;if(validateAccess(_0x2c61ed,_0x4f4c36)['allow']){if(devices[_0x4f4c36][_0x38385b(0x1e9)])clearTimeout(devices[_0x4f4c36][_0x38385b(0x1e9)]);if(devices[_0x4f4c36][_0x38385b(0x290)])clearTimeout(devices[_0x4f4c36][_0x38385b(0x290)]);removeSocketListeners(getClient(_0x1df119['id'])[_0x38385b(0x1fb)]),addBlacklist(_0x4f4c36),devices[_0x4f4c36][_0x38385b(0x245)]=null,devices[_0x4f4c36][_0x38385b(0x2c4)]=null,devices[_0x4f4c36][_0x38385b(0x1d3)][_0x38385b(0x2a9)]=null,io['to'](getClient(_0x1df119['id'])[_0x38385b(0x1fb)])[_0x38385b(0x1de)](_0x38385b(0x23e),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x38385b(0x20a));});}function removeSocketListeners(_0x118bd4){const _0x118964=_0x384e86;getClientsWithUuid(_0x118bd4)[_0x118964(0x2ba)](_0x1310f6=>{const _0x42d80b=_0x118964;getSocket(_0x1310f6['id'])[_0x42d80b(0x29d)]();});}function cleanSettings(){const _0xe87f3b=_0x384e86;let _0x3e66fc=settings;return settings['telegramToken']&&settings[_0xe87f3b(0x230)]!=''&&(_0x3e66fc={..._0x3e66fc,'telegramToken':_0xe87f3b(0x2dd)}),settings[_0xe87f3b(0x1ec)]&&settings[_0xe87f3b(0x1ec)]!=''&&(_0x3e66fc={..._0x3e66fc,'bbPassword':'************'}),_0x3e66fc;}function startBot(_0x467b0a,_0x59975f,_0x144c61){const _0x5ca659=_0x384e86;let _0x310237=![];const _0x34d938=_0x467b0a[0x0];_0x59975f={..._0x59975f,'stdio':[_0x5ca659(0x285),_0x5ca659(0x285),_0x5ca659(0x285),_0x5ca659(0x1f9)]},pid[_0x34d938]=childProcess[_0x5ca659(0x215)](botfile,_0x467b0a,_0x59975f),pid[_0x34d938]['on']('message',_0xd53a1=>{const _0x38dbc0=_0x5ca659;switch(Object[_0x38dbc0(0x244)](_0xd53a1)[0x0]){case'botname':updateBotName(_0x34d938,_0xd53a1[_0x38dbc0(0x22f)]);break;case _0x38dbc0(0x23e):updateStatus(_0x34d938,_0xd53a1[_0x38dbc0(0x23e)]);break;case _0x38dbc0(0x24b):updateLive(_0x34d938,_0xd53a1[_0x38dbc0(0x24b)]);break;case'started':updateLive(_0x34d938,_0xd53a1[_0x38dbc0(0x305)]),io['to'](_0x34d938)[_0x38dbc0(0x1de)](_0x38dbc0(0x23e),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0xd53a1['stop']==_0x38dbc0(0x22e)&&stopBot(_0x34d938);_0xd53a1[_0x38dbc0(0x277)]=='kill'&&toggleBot(_0x34d938,_0x38dbc0(0x1d5),'stopped');break;case _0x38dbc0(0x270):sendTelegram(_0x34d938,_0xd53a1[_0x38dbc0(0x270)]);break;case _0x38dbc0(0x2e3):io['to'](_0x34d938)[_0x38dbc0(0x1de)](_0xd53a1[_0x38dbc0(0x2e3)],_0xd53a1[_0x38dbc0(0x2aa)]);break;}}),pid[_0x34d938]['on'](_0x5ca659(0x1f8),function(_0x4ea1e2){if(_0x310237)return;_0x310237=!![],_0x144c61(_0x4ea1e2);}),pid[_0x34d938]['on'](_0x5ca659(0x281),function(_0x12e4bc){const _0x54963c=_0x5ca659;if(_0x310237)return;_0x310237=!![],_0x144c61(null);const _0x19f3fa=dbConfig[_0x54963c(0x284)](_0x54963c(0x210))['find']({'botID':_0x34d938})['value']();_0x19f3fa&&(_0x19f3fa[_0x54963c(0x23e)]==_0x54963c(0x30b)||_0x19f3fa[_0x54963c(0x23e)]==_0x54963c(0x24f))&&(updateLive(_0x34d938,'stopped'),logging('restarting\x20Bot\x20'+_0x34d938),startBot([_0x34d938,userID],{'cwd':bbpath},function(_0x462dc3){if(_0x462dc3)logging(_0x462dc3);}));});}function stopBot(_0x538df9){const _0x16c8a2=_0x384e86;getClientsWithBotID(_0x538df9)[_0x16c8a2(0x2ba)](_0xa31fe=>{getSocket(_0xa31fe['id'])['disconnect'](!![]),removeClient(_0xa31fe['id']);});if(pid[_0x538df9])pid[_0x538df9]['kill']();}function addBot(){const _0x9a36ec=_0x384e86;let _0x569aa6;for(let _0x18b51d=0x1;_0x18b51d<0x3e9;_0x18b51d++){_0x569aa6=_0x18b51d[_0x9a36ec(0x2dc)]()[_0x9a36ec(0x300)](0x3,'0');let _0x1b41c3=config[_0x9a36ec(0x26f)](_0x2c5d5a=>_0x2c5d5a[_0x9a36ec(0x23c)]==_0x569aa6);if(!_0x1b41c3)break;}if(_0x569aa6===_0x9a36ec(0x204)){logging(_0x9a36ec(0x2a5));return;}logging(_0x9a36ec(0x23d)+_0x569aa6),dbConfig[_0x9a36ec(0x284)](_0x9a36ec(0x210))['push']({'botID':_0x569aa6,'botname':'Bot\x20'+_0x569aa6,'status':_0x9a36ec(0x24f),'live':''})[_0x9a36ec(0x291)](),startBot([_0x569aa6,userID],{'cwd':bbpath},function(_0x425986){if(_0x425986)logging(_0x425986);}),config=getConfiguration(),io['to']('botmanager')[_0x9a36ec(0x1de)](_0x9a36ec(0x210),config);}function deleteBot(_0x4a0b4d){const _0x4d6739=_0x384e86;getClientsWithBotID(_0x4a0b4d)[_0x4d6739(0x2ba)](_0x3fa17c=>{const _0x2f571a=_0x4d6739;getSocket(_0x3fa17c['id'])[_0x2f571a(0x2f8)](!![]),removeClient(_0x3fa17c['id']);}),dbConfig[_0x4d6739(0x284)](_0x4d6739(0x210))[_0x4d6739(0x27a)]({'botID':_0x4a0b4d})[_0x4d6739(0x291)](),logging(_0x4d6739(0x2de)+_0x4a0b4d),stopBot(_0x4a0b4d);try{fs[_0x4d6739(0x20b)](path['join'](configpath,'bot-'+_0x4a0b4d+_0x4d6739(0x259))),fs[_0x4d6739(0x20b)](path[_0x4d6739(0x2a6)](configpath,'bot-'+_0x4a0b4d+_0x4d6739(0x1d4))),fs[_0x4d6739(0x20b)](path[_0x4d6739(0x2a6)](configpath,'bot-'+_0x4a0b4d+'-performance.json')),fs['unlinkSync'](path[_0x4d6739(0x2a6)](configpath,_0x4d6739(0x2eb)+_0x4a0b4d+_0x4d6739(0x2ea)));}catch(_0x2753a9){if(_0x2753a9)logging(_0x4d6739(0x1dd),_0x2753a9);}config=getConfiguration(),io['to'](_0x4d6739(0x2f3))['emit'](_0x4d6739(0x210),config);}function toggleBot(_0x5a041e,_0x29e53c,_0x2ad321){const _0x23e1f2=_0x384e86;dbConfig[_0x23e1f2(0x284)](_0x23e1f2(0x210))[_0x23e1f2(0x26f)]({'botID':_0x5a041e})[_0x23e1f2(0x254)]({'status':_0x29e53c})[_0x23e1f2(0x254)]({'live':_0x2ad321})[_0x23e1f2(0x291)]();if(_0x29e53c==_0x23e1f2(0x30b)||_0x29e53c=='new')logging('enabled\x20Bot\x20'+_0x5a041e),startBot([_0x5a041e,userID],{'cwd':bbpath},function(_0x302095){if(_0x302095)logging(_0x302095);});else(_0x29e53c==_0x23e1f2(0x1d5)||_0x29e53c==_0x23e1f2(0x2cc))&&(logging(_0x23e1f2(0x2a0)+_0x5a041e),stopBot(_0x5a041e));config=getConfiguration(),io['to'](_0x23e1f2(0x2f3))[_0x23e1f2(0x1de)](_0x23e1f2(0x210),config);}function toggleStatus(_0x144280){const _0x4c0be2=_0x384e86;let _0x1b6076=dbConfig[_0x4c0be2(0x284)](_0x4c0be2(0x210))[_0x4c0be2(0x26f)]({'botID':_0x144280})['value'](),_0x38bc36;if(_0x1b6076[_0x4c0be2(0x23e)]===_0x4c0be2(0x30b))_0x38bc36='disabled';else{if(_0x1b6076[_0x4c0be2(0x23e)]===_0x4c0be2(0x24f))_0x38bc36=_0x4c0be2(0x2cc);else{if(_0x1b6076['status']===_0x4c0be2(0x2cc))_0x38bc36=_0x4c0be2(0x24f);else{if(_0x1b6076[_0x4c0be2(0x23e)]==='disabled')_0x38bc36=_0x4c0be2(0x30b);}}}return _0x38bc36;}function updateStatus(_0x4c7ac5,_0x350048){const _0x5e23ff=_0x384e86;dbConfig[_0x5e23ff(0x284)]('bots')[_0x5e23ff(0x26f)]({'botID':_0x4c7ac5})[_0x5e23ff(0x254)]({'status':_0x350048})[_0x5e23ff(0x291)](),config=getConfiguration(),io['to'](_0x5e23ff(0x2f3))[_0x5e23ff(0x1de)](_0x5e23ff(0x210),config);}function updateLive(_0x52f617,_0x45f28c){const _0x4dd1cf=_0x384e86;dbConfig['get'](_0x4dd1cf(0x210))[_0x4dd1cf(0x26f)]({'botID':_0x52f617})[_0x4dd1cf(0x254)]({'live':_0x45f28c})[_0x4dd1cf(0x291)](),config=getConfiguration(),io['to'](_0x4dd1cf(0x2f3))['emit']('bots',config);}function _0x4c55(){const _0x1f1471=['Notifications\x20types:\x20orders\x20and\x20alerts\x0a','answerCallbackQuery','disconnect','Unauthorized\x20attempt\x20to\x20update\x20bot','temporary\x20token\x20generated','hashSync','all','Unauthorized\x20attempt\x20to\x20store\x20configuration','success','secret','padStart','lowdb','\x20|\x20','version','404\x20Not\x20Found','started','password','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','/status\x20-\x20show\x20bot(s)\x20status\x0a','then','referer','enabled','3000','node-telegram-bot-api','build',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','log','access\x20timeout','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','SIGTERM','No\x20bots\x20running\x20right\x20now','ipv6','30\x20min','getHours','All\x20bots','removeListener','decrypt','handshake','access','-events.json','disabled','callback_query','update-bot','\x20>\x20','whitelist','storeConfiguration','mkdirSync','\x20only\x0a','error\x20while\x20deleting\x20config\x20files:\x20','emit','set','conn','from','Error:\x20Invalid\x20argument\x20','hex','match','@analytics/google-analytics','isIPv4MappedAddress','toIPv4MappedAddress','/:bot/history','pidRefreshToken','isValid','getFullYear','bbPassword','express','socket.io','Balance\x20Bot\x20Server','getMinutes','\x20minutes','default','data','search','Notifications\x20disabled','680bdesdE','entries','error','ipc','<b>Balance\x20Bot\x20status:</b>\x0a','uuid','invalid\x20credentials','timeshift','cancel-loading','/:bot/configuration','/:bot/support','hasOwnProperty','filter','get-logs','1000','NTBA_FIX_319','2FA\x20login\x20required','onText','getPortfolio','getSeconds','Unauthorized\x20attempt\x20to\x20log\x20out','unlinkSync','Bot\x20','parse','use',',\x20must\x20be\x20a\x204\x20digit\x20number','bots','Invalid\x20authentication\x20token\x20(2)','Password\x20has\x20been\x20reset\x20to:\x20','lowdb/adapters/FileSync','</b>\x20?','fork','getTime','copyFileSync','sendMessage','sign','reload','2FA\x20login\x20token\x20generated','randomBytes','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','running','length','send','value','sendFile','/on\x20-\x20start\x20bot(s)\x0a','createServer','slice','split','store-headless','index.html','Login\x20rejected','bbUsername','blacklist','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','crypto','restart','botname','telegramToken','login\x20token\x20valid','generateKeyPairAsync','getDate','settings.','login\x20required','2861985cUonmK','initclient','login\x20token\x20generated','Notifications\x20disabled\x0a','logged\x20out','logout','botID','starting\x20new\x20bot\x20|\x20Bot\x20','status','stopped','yargs/yargs','Password\x20reset\x20rejected','backup/','bot','keys','telegramIpApproval','/disable\x20-\x20disable\x20notifications\x0a','Balance\x20Bot','store','/:bot/portfolio','Crypt','live','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','ipaddr.js','http','new','stopPolling','login\x20not\x20required','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','telegramChatId','assign','/:bot','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','allow','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','-config.json','2FA\x20required','path','showname','argv','jsonwebtoken','starting\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','port','bb/','delete-bot','telegramEnabled','/off\x20-\x20stop\x20bot(s)\x0a','Notifications\x20enabled\x0a','Notifications\x20enabled','6PAAzMy','33242BEkFvZ','telegramUsername','whitelistEnabled','reason','::1','order','find','telegram','get-starting-balances','2FA','analytics','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','type','constructor','stop','337923OQwCPU','You\x20can\x20use\x20the\x20following\x20commands:\x0a','remove','once','push','emitHistory','Unauthorized\x20attempt\x20to\x20update\x20settings','\x20/\x20','defaults','exit','sortBy','test','get','inherit','Allow\x20login\x20from\x20IP\x20address\x20<b>','Invalid\x20Telegram\x20token','4919935uuLhTD','max','Unauthorized\x20attempt\x20to\x20add\x20bot','timestamp','Login\x20accepted','bb-config.json','Ok,\x20will\x20send\x20order\x20notifications\x20only','apply','pidExpireLogin','write','<b>Telegram\x20bot\x20status:</b>\x0a','telegramEvents','remoteAddress','reset-password','https://hodlerhacks.com','getMonth','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','sha256','privateKey','login','Unauthorized\x20attempt\x20to\x20get\x20logs','removeAllListeners','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','HTML','disabled\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/enable\x20-\x20enable\x20notifications\x0a','event','placeOrder','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','join','bb-secure.json','username','token','args','/help\x20-\x20show\x20available\x20commands\x0a','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','1030508SarGrK','Invalid\x20IP\x20address','Notifications\x20types:\x20','sockets','listen','expiry','temporary\x20access\x20not\x20allowed','Alerts','UA-192771731-1','getStartingBalances','259qdzDUw','Unauthorized\x20login\x20attempt\x20(public\x20key)','clientip','forEach','Token\x20blacklisted','RSA-OAEP','randomFillSync','loginRequired','getUTCHours','show','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bot.js','-----------------------------------------------------------------------------------','telegram2FaApproval','alerts','f2aRequired','/:bot/performance','All','All\x20bots\x20running\x20right\x20now','hybrid-crypto-js','message','new-disabled','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','settings','verify','/:bot/coins','static','build2','catch','66824IOvTvg','accept','Access\x20enabled\x20for\x20','reject','includes','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','4198352AgIYUA','toString','************','deleted\x20Bot\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','clients','orders','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','function','cancelLoading','secure','get-portfolio','config/','1zUJxet','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','-results.json','bot-','(((.+)+)+)+$','chat','child_process','Unauthorized\x20attempt\x20to\x20get\x20portfolio','yes','RSA','storeHeadless','botmanager','publicKey','Invalid\x20username\x20or\x20IP\x20address'];_0x4c55=function(){return _0x1f1471;};return _0x4c55();}function updateBotName(_0x1d375a,_0x4a2c64){const _0x4c32cf=_0x384e86;dbConfig[_0x4c32cf(0x284)](_0x4c32cf(0x210))['find']({'botID':_0x1d375a})['assign']({'botname':_0x4a2c64})[_0x4c32cf(0x291)](),config=getConfiguration(),io['to']('botmanager')[_0x4c32cf(0x1de)](_0x4c32cf(0x210),config);}function telegramError(_0x3aa739){const _0x18d76d=_0x384e86;console[_0x18d76d(0x310)](getTimeStamp()+_0x18d76d(0x30f));}function validateTelegram(_0x5038db){const _0x7452f2=_0x384e86;if(_0x5038db[_0x7452f2(0x1e1)][_0x7452f2(0x2a8)]!=settings[_0x7452f2(0x26a)]&&'@'+_0x5038db[_0x7452f2(0x1e1)][_0x7452f2(0x2a8)]!=settings[_0x7452f2(0x26a)])return tgBot[_0x7452f2(0x218)](_0x5038db['chat']['id'],_0x7452f2(0x2e2),{'parse_mode':_0x7452f2(0x29f)})['catch'](_0x10b135=>{telegramError(_0x10b135);}),![];return!![];}async function initTelegram(){const _0x551318=_0x384e86;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x330dfc=_0x551318(0x279);_0x330dfc+='\x0a',_0x330dfc+=_0x551318(0x2a2),_0x330dfc+=_0x551318(0x246),_0x330dfc+=_0x551318(0x312),_0x330dfc+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x330dfc+=_0x551318(0x223),_0x330dfc+=_0x551318(0x265),_0x330dfc+=_0x551318(0x308),_0x330dfc+=_0x551318(0x2ab);let _0xd03339=_0x551318(0x24c);_0xd03339+='\x0a',_0xd03339+=_0x330dfc,tgBot[_0x551318(0x207)](/\/start/,_0x4bf5f4=>{const _0x5086ce=_0x551318;if(!validateTelegram(_0x4bf5f4))return;if(settings['telegramChatId']!=_0x4bf5f4[_0x5086ce(0x2ed)]['id'])updateSetting(_0x5086ce(0x253),_0x4bf5f4[_0x5086ce(0x2ed)]['id']);updateSetting(_0x5086ce(0x264),!![]),tgBot[_0x5086ce(0x218)](_0x4bf5f4['chat']['id'],_0xd03339)[_0x5086ce(0x2d4)](_0x2e084c=>{telegramError(_0x2e084c);});}),tgBot[_0x551318(0x207)](/\/enable/,_0x38cfa5=>{const _0x21d6df=_0x551318;if(!validateTelegram(_0x38cfa5))return;if(settings[_0x21d6df(0x253)]!=_0x38cfa5['chat']['id'])updateSetting(_0x21d6df(0x253),_0x38cfa5['chat']['id']);updateSetting(_0x21d6df(0x264),!![]),tgBot['sendMessage'](_0x38cfa5[_0x21d6df(0x2ed)]['id'],_0x21d6df(0x267))[_0x21d6df(0x2d4)](_0xe5143d=>{telegramError(_0xe5143d);});}),tgBot['onText'](/\/config/,async _0x58f185=>{const _0x21dc4b=_0x551318;if(!validateTelegram(_0x58f185))return;tgBot[_0x21dc4b(0x1d0)]('callback_query'),tgBot[_0x21dc4b(0x218)](_0x58f185['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x21dc4b(0x2e1)},{'text':_0x21dc4b(0x2b4),'callback_data':_0x21dc4b(0x2c5)},{'text':_0x21dc4b(0x2c8),'callback_data':_0x21dc4b(0x2fc)}]]}})[_0x21dc4b(0x2d4)](_0xd9072d=>{telegramError(_0xd9072d);}),tgBot['on'](_0x21dc4b(0x1d6),async _0x304a34=>{const _0x5cd7c0=_0x21dc4b,_0x51089b=_0x304a34['data'],_0xd3f24b=_0x304a34[_0x5cd7c0(0x2cb)];tgBot[_0x5cd7c0(0x2f7)](_0x304a34['id'])[_0x5cd7c0(0x309)](async()=>{const _0x1a0d66=_0x5cd7c0;_0x51089b==_0x1a0d66(0x2e1)&&(updateSetting(_0x1a0d66(0x293),_0x1a0d66(0x2e1)),updateSetting(_0x1a0d66(0x264),!![]),await tgBot['sendMessage'](_0xd3f24b[_0x1a0d66(0x2ed)]['id'],_0x1a0d66(0x28e))[_0x1a0d66(0x2d4)](_0xc977d6=>{telegramError(_0xc977d6);}));_0x51089b==_0x1a0d66(0x2c5)&&(updateSetting('telegramEvents',_0x1a0d66(0x2c5)),updateSetting(_0x1a0d66(0x264),!![]),await tgBot['sendMessage'](_0xd3f24b['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x1a0d66(0x2d4)](_0x3356ac=>{telegramError(_0x3356ac);}));_0x51089b==_0x1a0d66(0x2fc)&&(updateSetting(_0x1a0d66(0x293),_0x1a0d66(0x2fc)),updateSetting(_0x1a0d66(0x264),!![]),await tgBot[_0x1a0d66(0x218)](_0xd3f24b[_0x1a0d66(0x2ed)]['id'],_0x1a0d66(0x22c))['catch'](_0x1262e7=>{telegramError(_0x1262e7);}));if(!settings[_0x1a0d66(0x253)])tgBot[_0x1a0d66(0x218)](_0xd3f24b[_0x1a0d66(0x2ed)]['id'],_0x1a0d66(0x21d))[_0x1a0d66(0x2d4)](_0xcb23db=>{telegramError(_0xcb23db);});}),tgBot[_0x5cd7c0(0x1d0)](_0x5cd7c0(0x1d6));});}),tgBot[_0x551318(0x207)](/\/status/,_0x12393b=>{const _0x115622=_0x551318;if(!validateTelegram(_0x12393b))return;let _0x2d812f=_0x115622(0x1fa);config[_0x115622(0x2ba)](_0xcad8a1=>{const _0x59b817=_0x115622;_0x2d812f+=_0x59b817(0x20c)+_0xcad8a1[_0x59b817(0x23c)]+_0x59b817(0x302)+_0xcad8a1['botname']+':\x20'+_0xcad8a1['status']+_0x59b817(0x27f)+_0xcad8a1[_0x59b817(0x24b)]+'\x0a';}),_0x2d812f+='\x0a',_0x2d812f+=_0x115622(0x292),_0x2d812f+=!settings[_0x115622(0x264)]?_0x115622(0x239):_0x115622(0x266),_0x2d812f+=settings['telegramEnabled']?settings['telegramEvents']==_0x115622(0x2fc)?_0x115622(0x2f6):_0x115622(0x2af)+settings['telegramEvents']+_0x115622(0x1dc):'',tgBot[_0x115622(0x218)](_0x12393b['chat']['id'],_0x2d812f,{'parse_mode':'HTML'})['catch'](_0x5ebdc1=>{telegramError(_0x5ebdc1);});}),tgBot['onText'](/\/restart/,_0x36b82d=>{const _0x2ed336=_0x551318;if(!validateTelegram(_0x36b82d))return;tgBot[_0x2ed336(0x1d0)](_0x2ed336(0x1d6));const _0x239730=getEnabledBots();if(_0x239730[_0x2ed336(0x21f)]==0x0)tgBot['sendMessage'](_0x36b82d['chat']['id'],_0x2ed336(0x1cb))['catch'](_0x3ce4ea=>{telegramError(_0x3ce4ea);});else{if(_0x239730[_0x2ed336(0x21f)]>0x1)_0x239730[_0x2ed336(0x27c)]({'botID':_0x2ed336(0x2fc)});let _0x551bf0=[],_0x41caaa=[];const _0x4ee010=_0x239730[_0x2ed336(0x21f)]%0x4==0x0||_0x239730[_0x2ed336(0x21f)]%0x4==0x3||_0x239730[_0x2ed336(0x21f)]%0x3==0x1?0x4:0x3;let _0x1232e0=0x0;_0x239730[_0x2ed336(0x2ba)]((_0xc6575,_0x1c07e6)=>{const _0x1516aa=_0x2ed336;if(_0x1c07e6%_0x4ee010==0x0)_0x41caaa=[];_0x41caaa[_0x1516aa(0x27c)]({'text':_0xc6575[_0x1516aa(0x23c)]==_0x1516aa(0x2fc)?_0x1516aa(0x1cf):_0x1516aa(0x20c)+_0xc6575[_0x1516aa(0x23c)],'callback_data':_0xc6575[_0x1516aa(0x23c)]}),_0x1c07e6%_0x4ee010==0x0&&(_0x551bf0[_0x1232e0]=_0x41caaa,_0x1232e0++);}),tgBot[_0x2ed336(0x218)](_0x36b82d['chat']['id'],_0x2ed336(0x2a1),{'reply_markup':{'inline_keyboard':_0x551bf0}})['catch'](_0x5c238c=>{telegramError(_0x5c238c);}),tgBot['on'](_0x2ed336(0x1d6),async _0x4a3027=>{const _0x2142bb=_0x2ed336,_0x4e6c8e=_0x4a3027['data'],_0x4b4ae7=_0x4a3027['message'];tgBot[_0x2142bb(0x2f7)](_0x4a3027['id'])[_0x2142bb(0x309)](async()=>{const _0xf02da0=_0x2142bb;if(_0x4e6c8e==_0xf02da0(0x2fc)){if(settings[_0xf02da0(0x293)]==_0xf02da0(0x2e1))tgBot[_0xf02da0(0x218)](_0x4b4ae7['chat']['id'],_0xf02da0(0x260))[_0xf02da0(0x2d4)](_0x33c5ea=>{telegramError(_0x33c5ea);});config[_0xf02da0(0x2ba)](_0x49452e=>{stopBot(_0x49452e['botID']);});}else{if(settings[_0xf02da0(0x293)]==_0xf02da0(0x2e1))tgBot['sendMessage'](_0x4b4ae7[_0xf02da0(0x2ed)]['id'],_0xf02da0(0x258)+_0x4e6c8e)[_0xf02da0(0x2d4)](_0x283264=>{telegramError(_0x283264);});stopBot(_0x4e6c8e);}}),tgBot[_0x2142bb(0x1d0)](_0x2142bb(0x1d6));});}}),tgBot['onText'](/\/on/,_0x727814=>{const _0x20c8f4=_0x551318;if(!validateTelegram(_0x727814))return;tgBot[_0x20c8f4(0x1d0)](_0x20c8f4(0x1d6));const _0x51b682=getDisabledBots();if(_0x51b682[_0x20c8f4(0x21f)]==0x0)tgBot['sendMessage'](_0x727814[_0x20c8f4(0x2ed)]['id'],_0x20c8f4(0x2c9))[_0x20c8f4(0x2d4)](_0x985ef9=>{telegramError(_0x985ef9);});else{if(_0x51b682[_0x20c8f4(0x21f)]>0x1)_0x51b682[_0x20c8f4(0x27c)]({'botID':_0x20c8f4(0x2fc)});let _0x2ea571=[],_0x3608a3=[];const _0x40b139=_0x51b682[_0x20c8f4(0x21f)]%0x4==0x0||_0x51b682[_0x20c8f4(0x21f)]%0x4==0x3||_0x51b682[_0x20c8f4(0x21f)]%0x3==0x1?0x4:0x3;let _0x871077=0x0;_0x51b682[_0x20c8f4(0x2ba)]((_0x2586b0,_0x465d62)=>{const _0x31cabd=_0x20c8f4;if(_0x465d62%_0x40b139==0x0)_0x3608a3=[];_0x3608a3[_0x31cabd(0x27c)]({'text':_0x2586b0[_0x31cabd(0x23c)]==_0x31cabd(0x2fc)?_0x31cabd(0x1cf):_0x31cabd(0x20c)+_0x2586b0[_0x31cabd(0x23c)],'callback_data':_0x2586b0[_0x31cabd(0x23c)]}),_0x465d62%_0x40b139==0x0&&(_0x2ea571[_0x871077]=_0x3608a3,_0x871077++);}),tgBot['sendMessage'](_0x727814[_0x20c8f4(0x2ed)]['id'],_0x20c8f4(0x2e9),{'reply_markup':{'inline_keyboard':_0x2ea571}})[_0x20c8f4(0x2d4)](_0x48dbf2=>{telegramError(_0x48dbf2);}),tgBot['on'](_0x20c8f4(0x1d6),async _0x4c698d=>{const _0x310606=_0x20c8f4,_0x5bcdd9=_0x4c698d['data'],_0x588372=_0x4c698d[_0x310606(0x2cb)];tgBot[_0x310606(0x2f7)](_0x4c698d['id'])[_0x310606(0x309)](async()=>{const _0x5c9262=_0x310606;if(_0x5bcdd9==_0x5c9262(0x2fc)){if(settings[_0x5c9262(0x293)]==_0x5c9262(0x2e1))tgBot[_0x5c9262(0x218)](_0x588372[_0x5c9262(0x2ed)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')['catch'](_0x4a2850=>{telegramError(_0x4a2850);});_0x51b682['forEach'](_0x2a8045=>{const _0x405eec=_0x5c9262;if(_0x2a8045[_0x405eec(0x23c)]!='all')toggleBot(_0x2a8045[_0x405eec(0x23c)],toggleStatus(_0x2a8045[_0x405eec(0x23c)]),_0x405eec(0x23f));});}else{if(settings[_0x5c9262(0x293)]==_0x5c9262(0x2e1))tgBot[_0x5c9262(0x218)](_0x588372[_0x5c9262(0x2ed)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5bcdd9)[_0x5c9262(0x2d4)](_0x45567f=>{telegramError(_0x45567f);});toggleBot(_0x5bcdd9,toggleStatus(_0x5bcdd9),'stopped');}}),tgBot[_0x310606(0x1d0)](_0x310606(0x1d6));});}}),tgBot[_0x551318(0x207)](/\/off/,_0x192105=>{const _0x52b59c=_0x551318;if(!validateTelegram(_0x192105))return;tgBot[_0x52b59c(0x1d0)](_0x52b59c(0x1d6));const _0x1ad404=getEnabledBots();if(_0x1ad404[_0x52b59c(0x21f)]==0x0)tgBot[_0x52b59c(0x218)](_0x192105[_0x52b59c(0x2ed)]['id'],_0x52b59c(0x1cb))[_0x52b59c(0x2d4)](_0x1b3214=>{telegramError(_0x1b3214);});else{if(_0x1ad404[_0x52b59c(0x21f)]>0x1)_0x1ad404[_0x52b59c(0x27c)]({'botID':'all'});let _0x1ab2fa=[],_0x244bf6=[];const _0x2c5503=_0x1ad404[_0x52b59c(0x21f)]%0x4==0x0||_0x1ad404[_0x52b59c(0x21f)]%0x4==0x3||_0x1ad404[_0x52b59c(0x21f)]%0x3==0x1?0x4:0x3;let _0x5052a3=0x0;_0x1ad404[_0x52b59c(0x2ba)]((_0x3219d2,_0x245ec8)=>{const _0xb0319f=_0x52b59c;if(_0x245ec8%_0x2c5503==0x0)_0x244bf6=[];_0x244bf6[_0xb0319f(0x27c)]({'text':_0x3219d2[_0xb0319f(0x23c)]==_0xb0319f(0x2fc)?_0xb0319f(0x1cf):_0xb0319f(0x20c)+_0x3219d2['botID'],'callback_data':_0x3219d2[_0xb0319f(0x23c)]}),_0x245ec8%_0x2c5503==0x0&&(_0x1ab2fa[_0x5052a3]=_0x244bf6,_0x5052a3++);}),tgBot[_0x52b59c(0x218)](_0x192105[_0x52b59c(0x2ed)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x1ab2fa}})[_0x52b59c(0x2d4)](_0xd49f82=>{telegramError(_0xd49f82);}),tgBot['on'](_0x52b59c(0x1d6),async _0x5a6826=>{const _0x319a35=_0x52b59c,_0x44b93f=_0x5a6826['data'],_0x78563a=_0x5a6826[_0x319a35(0x2cb)];tgBot[_0x319a35(0x2f7)](_0x5a6826['id'])[_0x319a35(0x309)](async()=>{const _0x4081b5=_0x319a35;if(_0x44b93f==_0x4081b5(0x2fc)){if(settings['telegramEvents']=='orders')tgBot[_0x4081b5(0x218)](_0x78563a[_0x4081b5(0x2ed)]['id'],_0x4081b5(0x252))[_0x4081b5(0x2d4)](_0x9a62b4=>{telegramError(_0x9a62b4);});_0x1ad404[_0x4081b5(0x2ba)](_0x76808d=>{const _0xca0830=_0x4081b5;if(_0x76808d[_0xca0830(0x23c)]!=_0xca0830(0x2fc))toggleBot(_0x76808d[_0xca0830(0x23c)],toggleStatus(_0x76808d[_0xca0830(0x23c)]),_0xca0830(0x23f));});}else{if(settings['telegramEvents']==_0x4081b5(0x2e1))tgBot['sendMessage'](_0x78563a[_0x4081b5(0x2ed)]['id'],_0x4081b5(0x2ac)+_0x44b93f)['catch'](_0x4672c6=>{telegramError(_0x4672c6);});toggleBot(_0x44b93f,toggleStatus(_0x44b93f),'stopped');}}),tgBot['removeListener'](_0x319a35(0x1d6));});}}),tgBot[_0x551318(0x207)](/\/disable/,_0x181785=>{const _0x1bce8c=_0x551318;if(!validateTelegram(_0x181785))return;tgBot[_0x1bce8c(0x218)](_0x181785[_0x1bce8c(0x2ed)]['id'],_0x1bce8c(0x1f5))[_0x1bce8c(0x2d4)](_0x24de48=>{telegramError(_0x24de48);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x551318(0x207)](/\/help/,_0x25af96=>{const _0x24bf16=_0x551318;if(!validateTelegram(_0x25af96))return;tgBot['sendMessage'](_0x25af96[_0x24bf16(0x2ed)]['id'],_0x330dfc)['catch'](_0x207ee8=>{telegramError(_0x207ee8);});}),tgBot['on']('polling_error',_0x386983=>{const _0x4d3932=_0x551318;_0x386983[_0x4d3932(0x2dc)]()[_0x4d3932(0x2d9)](_0x4d3932(0x304))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x4d3932(0x250)](),tgBot=null,io['to'](_0x4d3932(0x2f3))[_0x4d3932(0x1de)]('notification',_0x4d3932(0x287)));}),process['once']('SIGINT',()=>{const _0x45c13d=_0x551318;if(tgBot)tgBot[_0x45c13d(0x250)]();process[_0x45c13d(0x281)](0x1);}),process[_0x551318(0x27b)](_0x551318(0x1ca),()=>{const _0x2d7b63=_0x551318;if(tgBot)tgBot[_0x2d7b63(0x250)]();process[_0x2d7b63(0x281)](0x1);});}}function disableTelegram(){const _0x10170b=_0x384e86;tgBot&&(tgBot[_0x10170b(0x250)](),tgBot=null);}function sendTelegram(_0x18872d,_0x286964){const _0x147da1=_0x384e86;if(settings[_0x147da1(0x264)]){if(settings['telegramEvents']==_0x147da1(0x2fc)||(_0x286964['type']==_0x147da1(0x1f8)||_0x286964[_0x147da1(0x275)]==_0x147da1(0x2fe))&&settings[_0x147da1(0x293)]==_0x147da1(0x2c5)||_0x286964[_0x147da1(0x275)]==_0x147da1(0x26e)&&settings[_0x147da1(0x293)]=='orders'){if(tgBot&&settings[_0x147da1(0x253)]){if(_0x286964[_0x147da1(0x25c)])tgBot[_0x147da1(0x218)](settings[_0x147da1(0x253)],_0x286964['botname']+_0x147da1(0x1d8)+_0x286964[_0x147da1(0x2a3)])['catch'](_0xe2c05=>{telegramError(_0xe2c05);});else tgBot[_0x147da1(0x218)](settings[_0x147da1(0x253)],_0x147da1(0x20c)+_0x18872d+_0x147da1(0x1d8)+_0x286964[_0x147da1(0x2a3)])['catch'](_0x4c575e=>{telegramError(_0x4c575e);});}}}}function getDeviceWithIp(_0x308a7f){const _0x4acfb9=_0x384e86;return devices[_0x4acfb9(0x26f)](_0x509cb6=>_0x509cb6['ip']===_0x308a7f);}function temporaryAccess2FA(_0x445077,_0x15c83f){const _0x5f0715=_0x384e86;let _0x42226a=new Date(),_0x3f3375=![];if(lastIpApproval){if(_0x42226a-lastIpApproval<0x1388)_0x3f3375=!![];}lastIpApproval=new Date();if(_0x3f3375)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x5f0715(0x1d0)]('callback_query'),tgBot[_0x5f0715(0x218)](settings['telegramChatId'],_0x5f0715(0x307)+normalizeIP(_0x15c83f)[_0x5f0715(0x2c0)]+_0x5f0715(0x214),{'parse_mode':_0x5f0715(0x29f),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x5f0715(0x1cd),'callback_data':'30'},{'text':_0x5f0715(0x2d8),'callback_data':'reject'}]]}})['catch'](_0x2b6866=>{telegramError(_0x2b6866);}),tgBot['on']('callback_query',async _0x4940bb=>{const _0x12f247=_0x5f0715,_0x487e8f=_0x4940bb[_0x12f247(0x1f3)],_0x32994d=_0x4940bb[_0x12f247(0x2cb)];tgBot[_0x12f247(0x2f7)](_0x4940bb['id'])[_0x12f247(0x309)](async()=>{const _0x3f43d2=_0x12f247;devices[_0x445077]['telegramIpApproval']={'clientip':_0x15c83f,'timestamp':new Date()[_0x3f43d2(0x216)](),'expiry':_0x487e8f},_0x487e8f!='reject'?(await tgBot[_0x3f43d2(0x218)](_0x32994d[_0x3f43d2(0x2ed)]['id'],_0x3f43d2(0x2d7)+_0x487e8f+_0x3f43d2(0x1f1),{'parse_mode':_0x3f43d2(0x29f)})['catch'](_0x46af39=>{telegramError(_0x46af39);}),io['to'](_0x445077)[_0x3f43d2(0x1de)](_0x3f43d2(0x23e),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3f43d2(0x218)](_0x32994d[_0x3f43d2(0x2ed)]['id'],'Temporary\x20access\x20rejected')[_0x3f43d2(0x2d4)](_0x1b3577=>{telegramError(_0x1b3577);}),io['to'](_0x445077)[_0x3f43d2(0x1de)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x12f247(0x1d6));}));}function loginAccess2FA(_0x227eac,_0x3e38b0){const _0x7a68a0=_0x384e86;tgBot&&settings[_0x7a68a0(0x253)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x7a68a0(0x218)](settings[_0x7a68a0(0x253)],_0x7a68a0(0x286)+normalizeIP(_0x3e38b0)[_0x7a68a0(0x2c0)]+_0x7a68a0(0x214),{'parse_mode':_0x7a68a0(0x29f),'reply_markup':{'inline_keyboard':[[{'text':_0x7a68a0(0x2d6),'callback_data':loginExpiry},{'text':_0x7a68a0(0x2d8),'callback_data':'reject'}]]}})['catch'](_0x4b40ba=>{telegramError(_0x4b40ba);}),tgBot['on']('callback_query',async _0x51691f=>{const _0x1ad319=_0x7a68a0,_0x14f9d9=_0x51691f[_0x1ad319(0x1f3)],_0x47f1c1=_0x51691f[_0x1ad319(0x2cb)];tgBot[_0x1ad319(0x2f7)](_0x51691f['id'])[_0x1ad319(0x309)](async()=>{const _0x481b37=_0x1ad319;devices[_0x227eac][_0x481b37(0x2c4)]={'clientip':_0x3e38b0,'timestamp':new Date()['getTime'](),'expiry':_0x14f9d9},_0x14f9d9!=_0x481b37(0x2d8)?(await tgBot[_0x481b37(0x218)](_0x47f1c1[_0x481b37(0x2ed)]['id'],_0x481b37(0x28c),{'parse_mode':_0x481b37(0x29f)})[_0x481b37(0x2d4)](_0x22d758=>{telegramError(_0x22d758);}),io['to'](_0x227eac)[_0x481b37(0x1de)](_0x481b37(0x23e),{'access':{'allow':![],'reason':_0x481b37(0x21a),'token':null}})):(await tgBot['sendMessage'](_0x47f1c1[_0x481b37(0x2ed)]['id'],_0x481b37(0x229))['catch'](_0x5bdb1c=>{telegramError(_0x5bdb1c);}),io['to'](_0x227eac)[_0x481b37(0x1de)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x1ad319(0x1d6));}));}function getConfiguration(){const _0x2bbabc=_0x384e86;return dbConfig[_0x2bbabc(0x284)](_0x2bbabc(0x210))[_0x2bbabc(0x282)]('botID')[_0x2bbabc(0x221)]()||[];}function getEnabledBots(){const _0xd5cf60=_0x384e86;return dbConfig[_0xd5cf60(0x284)](_0xd5cf60(0x210))[_0xd5cf60(0x282)](_0xd5cf60(0x23c))['filter']({'status':'enabled'})[_0xd5cf60(0x221)]()||[];}function getDisabledBots(){const _0x484fe8=_0x384e86;return dbConfig[_0x484fe8(0x284)](_0x484fe8(0x210))[_0x484fe8(0x282)](_0x484fe8(0x23c))[_0x484fe8(0x202)]({'status':_0x484fe8(0x1d5)})[_0x484fe8(0x221)]()||[];}function getSettings(){const _0x52c91c=_0x384e86;return dbSettings[_0x52c91c(0x284)](_0x52c91c(0x2cf))[_0x52c91c(0x221)]()||{'timeshift':0x0};}function getSecure(){const _0x56a175=_0x384e86;return dbSecure[_0x56a175(0x284)](_0x56a175(0x2e5))[_0x56a175(0x221)]()||{};}function getBlacklist(){const _0x105567=_0x384e86;return dbSecure['get'](_0x105567(0x22b))[_0x105567(0x221)]()||[];}function broadcastToBots(_0x3d847b,_0x5ac425){const _0x51759f=_0x384e86;config[_0x51759f(0x2ba)](_0x5b082a=>{const _0x1dc93f=_0x51759f;if(_0x5b082a[_0x1dc93f(0x23e)]=='enabled'&&_0x5b082a[_0x1dc93f(0x24b)]==_0x1dc93f(0x21e)){if(pid[_0x5b082a[_0x1dc93f(0x23c)]])pid[_0x5b082a[_0x1dc93f(0x23c)]][_0x1dc93f(0x220)]({[_0x3d847b]:_0x5ac425});}});}function storeSettings(_0x12998a,_0x16ebdf=![]){const _0x1b2543=_0x384e86;_0x12998a={...settings,..._0x12998a};if(_0x16ebdf&&_0x12998a[_0x1b2543(0x1ec)]!='************'&&_0x12998a[_0x1b2543(0x1ec)]!=''){const _0x152bf6=crypt[_0x1b2543(0x1d1)](secure[_0x1b2543(0x29a)],_0x12998a[_0x1b2543(0x1ec)])[_0x1b2543(0x2cb)][_0x1b2543(0x226)]('@')[0x0],_0x347a69=bcrypt[_0x1b2543(0x2fb)](_0x152bf6,saltRounds);_0x12998a={..._0x12998a,'bbPassword':_0x347a69};}if(_0x16ebdf&&_0x12998a[_0x1b2543(0x230)]!=_0x1b2543(0x2dd)&&_0x12998a['telegramToken']!=''){const _0x445731=crypt[_0x1b2543(0x1d1)](secure['privateKey'],_0x12998a[_0x1b2543(0x230)])[_0x1b2543(0x2cb)]['split']('@')[0x0];_0x12998a={..._0x12998a,'telegramToken':_0x445731};}const _0x306486=_0x12998a[_0x1b2543(0x230)]!=_0x1b2543(0x2dd)&&_0x12998a[_0x1b2543(0x230)]!=settings[_0x1b2543(0x230)]||_0x12998a[_0x1b2543(0x26a)]!=settings['telegramUsername'],_0x116122=_0x12998a[_0x1b2543(0x230)]==''||_0x12998a['telegramUsername']=='';if(_0x306486)_0x12998a[_0x1b2543(0x293)]=_0x1b2543(0x2fc);for(const [_0x2e409f,_0xc9fd61]of Object[_0x1b2543(0x1f7)](_0x12998a)){if(_0x2e409f==_0x1b2543(0x230)&&_0xc9fd61=='************'){_0x12998a[_0x1b2543(0x230)]=settings['telegramToken'];continue;};if(_0x2e409f=='bbPassword'&&_0xc9fd61=='************'){_0x12998a['bbPassword']=settings[_0x1b2543(0x1ec)];continue;};dbSettings[_0x1b2543(0x1df)](_0x1b2543(0x234)+_0x2e409f,_0xc9fd61)[_0x1b2543(0x291)]();}settings=_0x12998a,io['to'](_0x1b2543(0x2f3))[_0x1b2543(0x1de)](_0x1b2543(0x2cf),cleanSettings()),broadcastToBots(_0x1b2543(0x1fd),settings[_0x1b2543(0x1fd)]);if(_0x306486&&!_0x116122)initTelegram();if(_0x306486&&_0x116122)disableTelegram();getAllClients()['forEach'](_0x34ddfd=>{const _0x143091=_0x1b2543;getSocket(_0x34ddfd['id'])[_0x143091(0x1de)](_0x143091(0x23e),{'access':{'allow':![],'reason':_0x143091(0x21a),'token':null}});});}function updateSetting(_0x4241dc,_0x4621b1){const _0xb8c953=_0x384e86;dbSettings[_0xb8c953(0x1df)](_0xb8c953(0x234)+_0x4241dc,_0x4621b1)[_0xb8c953(0x291)](),settings=getSettings(),io['to'](_0xb8c953(0x2f3))[_0xb8c953(0x1de)](_0xb8c953(0x2cf),cleanSettings());}function storeSecure(_0x36d34a){const _0x4d0b47=_0x384e86;dbSecure[_0x4d0b47(0x284)]('secure')['push'](_0x36d34a)[_0x4d0b47(0x291)](),secure=_0x36d34a;}function addBlacklist(_0x1b52d5){const _0x74dcd1=_0x384e86;cleanBlacklist();let _0x2964cf;devices[_0x1b52d5][_0x74dcd1(0x245)]?_0x2964cf=Math[_0x74dcd1(0x289)](devices[_0x1b52d5][_0x74dcd1(0x245)][_0x74dcd1(0x2b2)],loginExpiry):_0x2964cf=loginExpiry,dbSecure[_0x74dcd1(0x284)]('blacklist')[_0x74dcd1(0x27c)]({'expiry':new Date()[_0x74dcd1(0x216)]()+_0x2964cf*0x3c*0x3e8,'token':devices[_0x1b52d5][_0x74dcd1(0x1d3)][_0x74dcd1(0x2a9)]})['write'](),blacklist=dbSecure[_0x74dcd1(0x284)]('blacklist')[_0x74dcd1(0x221)]();}function cleanBlacklist(){const _0x1d59e4=_0x384e86;let _0x280711=dbSecure['get'](_0x1d59e4(0x22b))['cloneDeep']()['value'](),_0x226f1b=new Date()['getTime']();_0x280711[_0x1d59e4(0x2ba)](_0x3d7dcc=>{const _0x3536fc=_0x1d59e4;_0x3d7dcc[_0x3536fc(0x2b2)]<_0x226f1b&&dbSecure[_0x3536fc(0x284)](_0x3536fc(0x22b))['remove']({'expiry':_0x3d7dcc[_0x3536fc(0x2b2)]})[_0x3536fc(0x291)]();});}function initStates(){const _0x236a77=_0x384e86;let _0x330b2a=getConfiguration();_0x330b2a[_0x236a77(0x2ba)](_0x471c13=>{const _0x47c5f7=_0x236a77;_0x471c13[_0x47c5f7(0x24b)]=_0x47c5f7(0x23f);}),storeConfiguration(_0x330b2a);}function onKeys(){const _0x3377ba=new RSA();return new Promise(_0x11f7c1=>{const _0x24bc35=_0x35f3;_0x3377ba[_0x24bc35(0x232)]()[_0x24bc35(0x309)](_0x4e8de7=>{_0x11f7c1(_0x4e8de7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x18d245=_0x384e86;let _0x187510=getConfiguration(),_0x1376c4=![];_0x187510[_0x18d245(0x2ba)](_0x11863f=>{const _0x3b6cd8=_0x18d245;if(_0x11863f[_0x3b6cd8(0x23e)]==_0x3b6cd8(0x21e))_0x11863f[_0x3b6cd8(0x23e)]='enabled',_0x1376c4=!![];else _0x11863f[_0x3b6cd8(0x23e)]==_0x3b6cd8(0x23f)&&(_0x11863f['status']=_0x3b6cd8(0x1d5),_0x1376c4=!![]);});if(_0x1376c4)storeConfiguration(_0x187510);let _0x35356b=getSecure();if(!_0x35356b['hasOwnProperty']('secret')){let _0x5d1f02=await generateKeys();_0x35356b[_0x18d245(0x2f4)]=_0x5d1f02[_0x18d245(0x2f4)],_0x35356b['privateKey']=_0x5d1f02[_0x18d245(0x29a)],_0x35356b[_0x18d245(0x2ff)]=crypto[_0x18d245(0x21c)](0x20)[_0x18d245(0x2dc)](_0x18d245(0x1e3));;storeSecure(_0x35356b);}let _0x2285b8=getSettings();_0x1376c4=![];!_0x2285b8[_0x18d245(0x201)](_0x18d245(0x2be))&&(_0x2285b8['loginRequired']=![],_0x2285b8[_0x18d245(0x22a)]='',_0x2285b8['bbPassword']='',_0x2285b8['f2aRequired']=![],_0x1376c4=!![]);!_0x2285b8[_0x18d245(0x201)](_0x18d245(0x26b))&&(_0x2285b8['whitelistEnabled']=![],_0x2285b8[_0x18d245(0x1d9)]=[],_0x2285b8[_0x18d245(0x2cd)]=![],_0x1376c4=!![]);if(!_0x2285b8[_0x18d245(0x201)](_0x18d245(0x264))){if(_0x2285b8[_0x18d245(0x253)])_0x2285b8[_0x18d245(0x264)]=!![];else _0x2285b8[_0x18d245(0x264)]=![];_0x1376c4=!![];}if(_0x1376c4)storeSettings(_0x2285b8);}function storeConfiguration(_0x1d5ecb){const _0x4cc533=_0x384e86;dbConfig[_0x4cc533(0x284)](_0x4cc533(0x210))[_0x4cc533(0x27a)]()[_0x4cc533(0x291)](),dbConfig[_0x4cc533(0x284)](_0x4cc533(0x210))['push'](..._0x1d5ecb)[_0x4cc533(0x291)](),config=_0x1d5ecb;}function resetPassword(){const _0x1e9c4c=_0x384e86;tgBot&&settings[_0x1e9c4c(0x253)]&&(tgBot[_0x1e9c4c(0x1d0)](_0x1e9c4c(0x1d6)),tgBot[_0x1e9c4c(0x218)](settings['telegramChatId'],_0x1e9c4c(0x298),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1e9c4c(0x2f0),'callback_data':_0x1e9c4c(0x2f0)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1b6f0a=>{telegramError(_0x1b6f0a);}),tgBot['on']('callback_query',async _0x1bb67f=>{const _0x3b9f7b=_0x1e9c4c,_0x3a6aae=_0x1bb67f['data'],_0x43cf5c=_0x1bb67f[_0x3b9f7b(0x2cb)];tgBot[_0x3b9f7b(0x2f7)](_0x1bb67f['id'])['then'](async()=>{const _0x223278=_0x3b9f7b;if(_0x3a6aae!='no'){const _0xf06d6b=0xf,_0x23943f=_0x223278(0x2c1),_0x2427fa=Array['from'](crypto[_0x223278(0x2bd)](new Uint32Array(_0xf06d6b)))['map'](_0x2b8196=>_0x23943f[_0x2b8196%_0x23943f[_0x223278(0x21f)]])[_0x223278(0x2a6)](''),_0x1b0ebc=bcrypt[_0x223278(0x2fb)](_0x2427fa,saltRounds);storeSettings({'bbPassword':_0x1b0ebc}),await tgBot[_0x223278(0x218)](_0x43cf5c[_0x223278(0x2ed)]['id'],_0x223278(0x212)+_0x2427fa,{'parse_mode':_0x223278(0x29f)})[_0x223278(0x2d4)](_0x260477=>{telegramError(_0x260477);});}else await tgBot[_0x223278(0x218)](_0x43cf5c[_0x223278(0x2ed)]['id'],_0x223278(0x241))[_0x223278(0x2d4)](_0x4ecbb5=>{telegramError(_0x4ecbb5);});}),tgBot['removeListener']('callback_query');}));}function logging(_0x5ef48c){const _0x5801e1=_0x384e86;console[_0x5801e1(0x310)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x5ef48c);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x5801e1(0x2e1))tgBot[_0x5801e1(0x218)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x5ef48c)[_0x5801e1(0x2d4)](_0x2cc2f8=>{telegramError(_0x2cc2f8);});}function getServerTime(){const _0x99d0a2=_0x384e86,_0x3be7a8=new Date();return _0x3be7a8['getFullYear']()+'/'+(_0x3be7a8[_0x99d0a2(0x297)]()+0x1)[_0x99d0a2(0x2dc)]()[_0x99d0a2(0x300)](0x2,'0')+'/'+_0x3be7a8[_0x99d0a2(0x233)]()[_0x99d0a2(0x2dc)]()[_0x99d0a2(0x300)](0x2,'0')+'\x20'+_0x3be7a8[_0x99d0a2(0x1ce)]()[_0x99d0a2(0x2dc)]()[_0x99d0a2(0x300)](0x2,'0')+':'+_0x3be7a8[_0x99d0a2(0x1f0)]()['toString']()['padStart'](0x2,'0')+':'+_0x3be7a8['getSeconds']()[_0x99d0a2(0x2dc)]()[_0x99d0a2(0x300)](0x2,'0');}function getTimeStamp(){const _0x1272a9=_0x384e86,_0x1ea6ec=shiftedTime();return _0x1ea6ec[_0x1272a9(0x1eb)]()+'/'+(_0x1ea6ec[_0x1272a9(0x297)]()+0x1)[_0x1272a9(0x2dc)]()[_0x1272a9(0x300)](0x2,'0')+'/'+_0x1ea6ec[_0x1272a9(0x233)]()[_0x1272a9(0x2dc)]()[_0x1272a9(0x300)](0x2,'0')+'\x20'+_0x1ea6ec[_0x1272a9(0x1ce)]()['toString']()[_0x1272a9(0x300)](0x2,'0')+':'+_0x1ea6ec[_0x1272a9(0x1f0)]()[_0x1272a9(0x2dc)]()[_0x1272a9(0x300)](0x2,'0')+':'+_0x1ea6ec[_0x1272a9(0x209)]()[_0x1272a9(0x2dc)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x4ec016=_0x384e86,_0x5a1d5a=new Date();let _0x162f3d=_0x5a1d5a;if(settings['timeshift']&&settings[_0x4ec016(0x1fd)]!==0x0)_0x162f3d=fns['add'](_0x5a1d5a,{'hours':settings[_0x4ec016(0x1fd)]});return _0x162f3d;}function startScheduler(){const _0x5c3922=_0x384e86;let _0x1b2bd5=new Date()[_0x5c3922(0x2bf)]();_0x1b2bd5==0x1&&backupConfigFiles();_0x1b2bd5==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1e0be9=_0x384e86;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x1e0be9(0x2ba)](_0xc11377=>{const _0x4c5324=_0x1e0be9;if(!_0xc11377['isDirectory']())fs[_0x4c5324(0x217)](configpath+_0xc11377['name'],configbackuppath+_0xc11377['name']);});}function triggerAnalytics(){const _0x4d86af=_0x384e86;analytics['page']({'title':_0x4d86af(0x1ef),'href':_0x4d86af(0x296),'path':'/v'+serverversion});}function validateCredentials(_0x4df080,_0x5e6194){const _0x16b300=_0x384e86;if(_0x4df080[_0x16b300(0x2a8)]==settings['bbUsername']&&bcrypt['compareSync'](_0x4df080[_0x16b300(0x306)],settings[_0x16b300(0x1ec)])){if(settings[_0x16b300(0x2c6)])return{'allow':![],'reason':_0x16b300(0x206),'token':null};else{const _0x1ed79a=generateLoginToken(_0x5e6194);return{'allow':!![],'reason':_0x16b300(0x238),'token':_0x1ed79a};}}else return{'allow':![],'reason':_0x16b300(0x1fc),'token':null};}function refreshToken(_0x38671b){const _0x13398a=_0x384e86,_0x4b1278=generateLoginToken(_0x38671b);return{'allow':!![],'reason':_0x13398a(0x238),'token':_0x4b1278};}function validateAccess(_0x2b9cf4,_0x3c0352){const _0x507b55=_0x384e86;let _0x570581=devices[_0x3c0352]['ip'],_0x3b3cd2;const _0x2467fc=_0x9c2304=>{const _0x227419=_0x35f3;if(settings['loginRequired']){if(settings[_0x227419(0x2c6)]){if(telegram2FaApproved(_0x3c0352)){const _0x5784a5=generateLoginToken(_0x3c0352);return{'allow':!![],'reason':_0x227419(0x21b),'token':_0x5784a5};}else return{'allow':![],'reason':_0x227419(0x235),'token':null};}else return _0x3b3cd2=validToken(_0x9c2304,_0x3c0352),_0x3b3cd2['hasOwnProperty'](_0x227419(0x2fe))?{'allow':!![],'reason':_0x227419(0x231),'token':_0x9c2304}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x227419(0x251),'token':null};};if(settings[_0x507b55(0x26b)]){let _0x4ed38a=[...settings[_0x507b55(0x1d9)],_0x507b55(0x26d),'::ffff:127.0.0.1','127.0.0.1'];if(_0x4ed38a[_0x507b55(0x2d9)](_0x570581))return _0x2467fc(_0x2b9cf4);else{_0x3b3cd2=validToken(_0x2b9cf4,_0x3c0352);if(_0x3b3cd2[_0x507b55(0x201)](_0x507b55(0x2fe)))return _0x2467fc(_0x2b9cf4);else{if(telegramIpApproved(_0x3c0352)){const _0x294f19=generateToken(_0x3c0352);return _0x3b3cd2=_0x2467fc(_0x2b9cf4),_0x3b3cd2[_0x507b55(0x257)]?{'allow':!![],'reason':_0x507b55(0x2fa),'token':_0x294f19}:_0x3b3cd2;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x507b55(0x25a),'token':null}:{'allow':![],'reason':_0x507b55(0x2b3),'token':null};}}}else return _0x2467fc(_0x2b9cf4);}function timelyDecrypt(_0x35f296,_0x57ad09=!![]){const _0x39c18c=_0x384e86;if(_0x35f296)try{const _0x409fa3=crypt['decrypt'](secure[_0x39c18c(0x29a)],_0x35f296)['message'],_0x16ccdd=_0x409fa3[_0x39c18c(0x226)]('@')[0x0],_0x5df0f7=_0x409fa3['split']('@')[0x1],_0x3bfbb=new Date()[_0x39c18c(0x216)]();if(_0x57ad09){if(_0x3bfbb-_0x5df0f7<maxSecretAge*0x3e8)return _0x16ccdd;else return![];}else return _0x16ccdd;}catch(_0x19b3c3){return![];}else return![];}const validToken=(_0x4ccc30,_0x39a862)=>{const _0x51493b=_0x384e86,_0x13092d=devices[_0x39a862]['ip'];if(!_0x4ccc30)return{'error':'No\x20authentication\x20token'};for(let _0xf4dd of blacklist){if(_0xf4dd[_0x51493b(0x2a9)]==_0x4ccc30)return{'error':_0x51493b(0x2bb)};}let _0x27cd2b;try{_0x27cd2b=jwt[_0x51493b(0x2d0)](_0x4ccc30,secure['secret']+_0x39a862);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x27cd2b[_0x51493b(0x201)](_0x51493b(0x2b9))&&!_0x27cd2b[_0x51493b(0x201)](_0x51493b(0x2a8))||!_0x27cd2b[_0x51493b(0x201)]('exp'))return{'error':_0x51493b(0x211)};if(!_0x27cd2b[_0x51493b(0x201)](_0x51493b(0x2a8))&&_0x27cd2b[_0x51493b(0x201)](_0x51493b(0x2b9))){const {clientip:_0x5ba5e2}=_0x27cd2b;return _0x13092d==_0x5ba5e2?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x51493b(0x2ae)};}else{if(_0x27cd2b[_0x51493b(0x201)]('username')&&_0x27cd2b[_0x51493b(0x201)](_0x51493b(0x2b9))){const {username:_0x17e873,clientip:_0x28dd70}=_0x27cd2b;return settings[_0x51493b(0x22a)]==_0x17e873&&_0x13092d==_0x28dd70?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x51493b(0x2f5)};}}},generateLoginToken=_0x48858a=>{const _0x220aca=_0x384e86;if(_0x48858a){const _0x311221=devices[_0x48858a]['ip'];return jwt[_0x220aca(0x219)]({'username':settings['bbUsername'],'clientip':_0x311221},secure['secret']+_0x48858a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5339a2=>{const _0x37fcb6=_0x384e86;if(_0x5339a2){const _0x2dcc93=devices[_0x5339a2]['ip'];return jwt[_0x37fcb6(0x219)]({'clientip':_0x2dcc93},secure[_0x37fcb6(0x2ff)]+_0x5339a2,{'expiresIn':devices[_0x5339a2]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x548b95=>{const _0x591807=_0x384e86;let _0x40ad86=![];return devices[_0x548b95]['telegramIpApproval']&&devices[_0x548b95]['telegramIpApproval'][_0x591807(0x2b2)]!=_0x591807(0x2d8)&&(_0x40ad86=devices[_0x548b95][_0x591807(0x245)]['clientip']==devices[_0x548b95]['ip']&&new Date()[_0x591807(0x216)]()-devices[_0x548b95]['telegramIpApproval'][_0x591807(0x28b)]<devices[_0x548b95][_0x591807(0x245)][_0x591807(0x2b2)]*0x3c*0x3e8),_0x40ad86;},telegram2FaApproved=_0x61a470=>{const _0x3e30cc=_0x384e86;let _0x49890b=![];return devices[_0x61a470]['telegram2FaApproval']&&devices[_0x61a470][_0x3e30cc(0x2c4)][_0x3e30cc(0x2b2)]!=_0x3e30cc(0x2d8)&&(_0x49890b=devices[_0x61a470]['telegram2FaApproval'][_0x3e30cc(0x2b9)]==devices[_0x61a470]['ip']&&new Date()['getTime']()-devices[_0x61a470][_0x3e30cc(0x2c4)]['timestamp']<devices[_0x61a470]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x49890b;},normalizeIP=_0x1aaffd=>{const _0x32194a=_0x384e86;let _0x13be3f=null,_0x67634c=null;if(ipaddr[_0x32194a(0x1ea)](_0x1aaffd)){const _0x4d6227=ipaddr[_0x32194a(0x20d)](_0x1aaffd);_0x4d6227['kind']()===_0x32194a(0x1cc)?(_0x4d6227[_0x32194a(0x1e6)]()&&(_0x13be3f=_0x4d6227['toIPv4Address']()[_0x32194a(0x2dc)]()),_0x67634c=_0x4d6227[_0x32194a(0x2dc)]()):(_0x13be3f=_0x4d6227[_0x32194a(0x2dc)](),_0x67634c=_0x4d6227[_0x32194a(0x1e7)]()['toString']());}return{'show':_0x13be3f?_0x13be3f:_0x67634c,'store':_0x67634c};};