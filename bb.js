const _0xa06f36=_0x5680;(function(_0x4b7df5,_0x31f6e2){const _0x38cc5b=_0x5680,_0x5e77b8=_0x4b7df5();while(!![]){try{const _0x3402ea=parseInt(_0x38cc5b(0x16e))/0x1*(-parseInt(_0x38cc5b(0x19d))/0x2)+parseInt(_0x38cc5b(0x20b))/0x3*(-parseInt(_0x38cc5b(0x169))/0x4)+parseInt(_0x38cc5b(0x16a))/0x5*(-parseInt(_0x38cc5b(0x1d5))/0x6)+-parseInt(_0x38cc5b(0x12a))/0x7+-parseInt(_0x38cc5b(0xcc))/0x8+-parseInt(_0x38cc5b(0x1f8))/0x9*(-parseInt(_0x38cc5b(0x1c6))/0xa)+parseInt(_0x38cc5b(0x131))/0xb*(parseInt(_0x38cc5b(0x187))/0xc);if(_0x3402ea===_0x31f6e2)break;else _0x5e77b8['push'](_0x5e77b8['shift']());}catch(_0x2f4cda){_0x5e77b8['push'](_0x5e77b8['shift']());}}}(_0x5bb2,0x8f1db));const _0x1d2a20=function(){let _0x1648eb=!![];return function(_0x3901f5,_0x2d64fe){const _0x45733c=_0x1648eb?function(){if(_0x2d64fe){const _0x52c4b9=_0x2d64fe['apply'](_0x3901f5,arguments);return _0x2d64fe=null,_0x52c4b9;}}:function(){};return _0x1648eb=![],_0x45733c;};}(),_0xc62b6f=_0x1d2a20(this,function(){const _0x15081=_0x5680;return _0xc62b6f['toString']()[_0x15081(0x1e1)](_0x15081(0x17b))[_0x15081(0x198)]()[_0x15081(0xe9)](_0xc62b6f)['search']('(((.+)+)+)+$');});_0xc62b6f();'use strict';process[_0xa06f36(0x109)][_0xa06f36(0x1ae)]=0x1;const childProcess=require(_0xa06f36(0x15b)),FileSync=require(_0xa06f36(0x1ef)),fs=require('fs'),fns=require('date-fns'),low=require(_0xa06f36(0x12d)),path=require(_0xa06f36(0x1f4)),crypto=require(_0xa06f36(0x122)),Crypt=require(_0xa06f36(0x11c))['Crypt'],RSA=require('hybrid-crypto-js')[_0xa06f36(0x1c9)],bcrypt=require(_0xa06f36(0xd7)),jwt=require('jsonwebtoken'),analyticsLib=require(_0xa06f36(0x19a))[_0xa06f36(0x159)],googleAnalytics=require('@analytics/google-analytics')[_0xa06f36(0x159)],ipaddr=require(_0xa06f36(0x163)),{addClient,existsClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./clients'),PORT=process[_0xa06f36(0x11e)][0x2]||_0xa06f36(0x12b),pattern=/^[0-9]{2,4}$/;if(!pattern[_0xa06f36(0x17d)](PORT))return console['log'](_0xa06f36(0x201)+PORT+_0xa06f36(0x16f)),process[_0xa06f36(0x14e)](0x1);const userID=process[_0xa06f36(0x11e)][0x3]||'';let bbpath=_0xa06f36(0x1cb);const botfile='bot.js',configfile=_0xa06f36(0x18e),settingsfile=_0xa06f36(0x119),securefile=_0xa06f36(0xcf);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0xa06f36(0x1e7),configbackuppath=configpath+_0xa06f36(0x197);!fs['existsSync'](configpath)&&fs[_0xa06f36(0x138)](configpath);!fs[_0xa06f36(0x1f3)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xa06f36(0x193)]({'bots':[]})[_0xa06f36(0x1d2)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0xa06f36(0x1d2)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0xa06f36(0x15e),'rsaStandard':_0xa06f36(0x101)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+'version.json')[_0xa06f36(0x181)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0xa06f36(0xc9)),app=express(),http=require(_0xa06f36(0xff))['createServer'](app);app[_0xa06f36(0x1e3)](express[_0xa06f36(0x1c5)](path[_0xa06f36(0x20e)](__dirname,bbpath,'build2'))),app[_0xa06f36(0x1e3)](express['static'](path['join'](__dirname,bbpath,'build'))),app[_0xa06f36(0x1ea)]('/',function(_0x35bcb7,_0x2a4828){const _0x30b3ec=_0xa06f36;_0x2a4828[_0x30b3ec(0x1e0)](path[_0x30b3ec(0x20e)](__dirname,bbpath,_0x30b3ec(0x182),_0x30b3ec(0xea)));}),app[_0xa06f36(0x1ea)](_0xa06f36(0x13d),function(_0x13c785,_0x2c322e){const _0x2e4d5b=_0xa06f36;_0x2c322e['sendFile'](path[_0x2e4d5b(0x20e)](__dirname,bbpath,_0x2e4d5b(0xd3),_0x2e4d5b(0xea)));}),app['get'](_0xa06f36(0x18f),(_0x13d8de,_0x5bc994)=>{const _0x2821ba=_0xa06f36;_0x5bc994[_0x2821ba(0x1e0)](path[_0x2821ba(0x20e)](__dirname,bbpath,_0x2821ba(0xd3),_0x2821ba(0xea)));}),app[_0xa06f36(0x1ea)](_0xa06f36(0x1f7),(_0x51cbb2,_0x11b114)=>{const _0x2e1b4a=_0xa06f36;_0x11b114[_0x2e1b4a(0x1e0)](path[_0x2e1b4a(0x20e)](__dirname,bbpath,_0x2e1b4a(0xd3),_0x2e1b4a(0xea)));}),app['get'](_0xa06f36(0x162),(_0x284a5f,_0x58c332)=>{const _0x51d0fe=_0xa06f36;_0x58c332['sendFile'](path[_0x51d0fe(0x20e)](__dirname,bbpath,_0x51d0fe(0xd3),'index.html'));}),app[_0xa06f36(0x1ea)](_0xa06f36(0x134),(_0x443a6c,_0x19e65c)=>{const _0x2a624d=_0xa06f36;_0x19e65c[_0x2a624d(0x1e0)](path['join'](__dirname,bbpath,_0x2a624d(0xd3),_0x2a624d(0xea)));}),app[_0xa06f36(0x1ea)]('/:bot/configuration',(_0x2a1e48,_0x2df070)=>{const _0x80e53e=_0xa06f36;_0x2df070[_0x80e53e(0x1e0)](path[_0x80e53e(0x20e)](__dirname,bbpath,_0x80e53e(0xd3),_0x80e53e(0xea)));}),app[_0xa06f36(0x1ea)](_0xa06f36(0x158),(_0x455987,_0x73e633)=>{const _0x1aef0a=_0xa06f36;_0x73e633[_0x1aef0a(0x1e0)](path['join'](__dirname,bbpath,_0x1aef0a(0xd3),_0x1aef0a(0xea)));}),http[_0xa06f36(0x1b1)](PORT);const io=require(_0xa06f36(0xc4))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0xa06f36(0x1a2));let tgBot;if(settings[_0xa06f36(0x1d0)]&&settings[_0xa06f36(0x1d0)]!=''&&settings[_0xa06f36(0x1db)]&&settings[_0xa06f36(0x1db)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x440d5=_0xa06f36;console['log'](''),console[_0x440d5(0xf8)](_0x440d5(0x116)),logging(_0x440d5(0x151)+PORT),console['log']('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x440d5(0x10d)](_0x247668=>{const _0x1f9dca=_0x440d5;if(_0x247668['status']==_0x1f9dca(0x1dd)||_0x247668[_0x1f9dca(0x112)]=='new')logging(_0x1f9dca(0x15d)+_0x247668[_0x1f9dca(0x177)]+'\x20|\x20'+_0x247668[_0x1f9dca(0x1a5)]),startBot([_0x247668['botID'],userID],{'cwd':bbpath},function(_0x272ad2){if(_0x272ad2)logging(_0x272ad2);});else(_0x247668[_0x1f9dca(0x112)]==_0x1f9dca(0x12f)||_0x247668[_0x1f9dca(0x112)]=='new-disabled')&&logging(_0x1f9dca(0x1d8)+_0x247668['botID']+_0x1f9dca(0x1ca)+_0x247668[_0x1f9dca(0x1a5)]);});else!newBot&&console[_0x440d5(0xf8)](_0x440d5(0x157));if(newBot)addBot();console[_0x440d5(0xf8)](_0x440d5(0x116)),console['log']('');}function startSocket(){const _0x57065f=_0xa06f36;io['on'](_0x57065f(0x1fd),_0x53ea09=>{const _0x2b6024=_0x57065f;let _0x46d8ba,_0x16b859,_0x47a36d,_0x34dc12,_0x594381;const _0x1c9a5f=_0x53ea09['handshake'][_0x2b6024(0x14d)][_0x2b6024(0x199)];_0x16b859=_0x1c9a5f['match'](/bot[0-9]{3}/);if(_0x16b859)_0x47a36d=_0x16b859[0x0][_0x2b6024(0x18a)](/[0-9]{3}/);if(_0x47a36d)_0x46d8ba=_0x47a36d[0x0];else _0x46d8ba=_0x2b6024(0xfb);const _0x5094d1=_0x53ea09[_0x2b6024(0x204)][_0x2b6024(0x1fe)][_0x2b6024(0x207)];if(!_0x5094d1)_0x53ea09[_0x2b6024(0x127)](_0x2b6024(0x112),{'publicKey':secure['publicKey']});else{_0x34dc12=timelyDecrypt(_0x5094d1,![]);if(!_0x34dc12)logging(_0x2b6024(0x1c8));else{_0x594381=normalizeIP(_0x53ea09[_0x2b6024(0x1b7)][_0x2b6024(0x150)])[_0x2b6024(0x19e)];if(!devices[_0x34dc12])devices[_0x34dc12]={'uuid':_0x34dc12,'access':{'token':null}};devices[_0x34dc12]['ip']=_0x594381;const _0x47c320=addClient(_0x53ea09['id'],_0x34dc12,_0x46d8ba);setAccess(_0x47c320),_0x53ea09['on'](_0x2b6024(0x137),_0x148166=>{const _0x31caad=_0x2b6024,_0x1d0376=timelyDecrypt(_0x148166['password']);if(_0x1d0376){_0x148166={'username':_0x148166[_0x31caad(0x196)],'password':_0x1d0376},devices[_0x34dc12][_0x31caad(0x139)]=validateCredentials(_0x148166,_0x34dc12);if(devices[_0x34dc12][_0x31caad(0x139)][_0x31caad(0xe8)]==![]&&devices[_0x34dc12][_0x31caad(0x139)][_0x31caad(0xd0)]==_0x31caad(0xf1))_0x53ea09['emit'](_0x31caad(0x112),{'access':devices[_0x34dc12]['access']}),loginAccess2FA(_0x34dc12,_0x594381);else{if(devices[_0x34dc12][_0x31caad(0x139)]['allow']==![]&&devices[_0x34dc12][_0x31caad(0x139)][_0x31caad(0xd0)]==_0x31caad(0x165))_0x53ea09[_0x31caad(0x127)](_0x31caad(0x112),{'access':devices[_0x34dc12][_0x31caad(0x139)]});else devices[_0x34dc12][_0x31caad(0x139)][_0x31caad(0xe8)]&&devices[_0x34dc12][_0x31caad(0x139)]['reason']==_0x31caad(0x14c)&&(getClientsWithUuid(_0x34dc12)['forEach'](_0x295ff8=>{setAccess(_0x295ff8);}),setTokenRefresh(_0x34dc12),setSessionTimeout('login',_0x34dc12));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x53ea09['on'](_0x2b6024(0x107),()=>{resetPassword();}),_0x53ea09['on'](_0x2b6024(0xfa),_0x4e1cd0=>{removeClient(_0x53ea09['id']);});}}});}function initClient(_0x34050a){const _0x4a1441=_0xa06f36;if(_0x34050a!='botmanager'&&config['apiKey']!=''){if(pid[_0x34050a])pid[_0x34050a][_0x4a1441(0x17a)]({'function':_0x4a1441(0x128),'args':null});}}function getSocket(_0x3d317e){const _0x4ee300=_0xa06f36;return io[_0x4ee300(0x17e)][_0x4ee300(0x17e)]['get'](_0x3d317e);}function setAccess(_0x424dcf){const _0x3f0f57=_0xa06f36,_0x43a969=getSocket(_0x424dcf['id']),_0x509b8f=_0x424dcf[_0x3f0f57(0xd8)],_0x4605fa=_0x424dcf[_0x3f0f57(0x160)];devices[_0x509b8f][_0x3f0f57(0x139)]=validateAccess(devices[_0x509b8f][_0x3f0f57(0x139)][_0x3f0f57(0x1cf)],_0x509b8f),_0x43a969['join'](_0x509b8f);if(devices[_0x509b8f][_0x3f0f57(0x139)]['allow']){_0x43a969['join'](_0x4605fa);if(_0x4605fa==_0x3f0f57(0xfb))initializeSocketBotManager(_0x43a969);else initializeSocketBot(_0x43a969);initClient(_0x4605fa);}devices[_0x509b8f][_0x3f0f57(0x139)][_0x3f0f57(0x1cf)]&&devices[_0x509b8f]['access'][_0x3f0f57(0xd0)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x509b8f),devices[_0x509b8f][_0x3f0f57(0x139)][_0x3f0f57(0x1cf)]&&devices[_0x509b8f][_0x3f0f57(0x139)]['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x3f0f57(0x137),_0x509b8f),_0x43a969['emit'](_0x3f0f57(0x112),{'status':_0x424dcf[_0x3f0f57(0x129)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x509b8f][_0x3f0f57(0x139)],'externalip':devices[_0x509b8f]['ip'],'publicKey':secure[_0x3f0f57(0xc5)]}),devices[_0x509b8f][_0x3f0f57(0x139)]['allow']==![]&&devices[_0x509b8f][_0x3f0f57(0x139)][_0x3f0f57(0xd0)]=='2FA\x20required'&&temporaryAccess2FA(_0x509b8f,devices[_0x509b8f]['ip']);}function setSessionTimeout(_0xb85b05,_0x4428bf){const _0x20a196=_0xa06f36;let _0x5072aa;if(_0xb85b05==_0x20a196(0x137))_0x5072aa=loginExpiry*0x3c*0x3e8;else _0x5072aa=devices[_0x4428bf][_0x20a196(0x118)][_0x20a196(0xed)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x4428bf][_0x20a196(0x118)][_0x20a196(0xd1)]);if(devices[_0x4428bf][_0x20a196(0x15f)])clearTimeout(devices[_0x4428bf][_0x20a196(0x15f)]);devices[_0x4428bf]['pidExpireLogin']=setTimeout(()=>{const _0x358a09=_0x20a196;if(devices[_0x4428bf][_0x358a09(0x110)])clearTimeout(devices[_0x4428bf][_0x358a09(0x110)]);removeSocketListeners(_0x4428bf),addBlacklist(_0x4428bf),devices[_0x4428bf][_0x358a09(0x118)]=null,devices[_0x4428bf][_0x358a09(0x170)]=null,devices[_0x4428bf]['access'][_0x358a09(0x1cf)]=null,devices[_0x4428bf][_0x358a09(0x139)]=validateAccess(devices[_0x4428bf][_0x358a09(0x139)][_0x358a09(0x1cf)],_0x4428bf),!(devices[_0x4428bf][_0x358a09(0x139)][_0x358a09(0xe8)]&&devices[_0x4428bf][_0x358a09(0x139)][_0x358a09(0xd0)]==_0x358a09(0xdc))&&(_0xb85b05==_0x358a09(0x137)?io['to'](_0x4428bf)[_0x358a09(0x127)](_0x358a09(0x112),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4428bf)[_0x358a09(0x127)](_0x358a09(0x112),{'access':{'allow':![],'reason':_0x358a09(0x174),'token':null}})),devices[_0x4428bf][_0x358a09(0x139)][_0x358a09(0x1cf)]=null;},_0x5072aa);}function setTokenRefresh(_0x5048e6){const _0x14b976=_0xa06f36;if(devices[_0x5048e6][_0x14b976(0x110)])clearTimeout(devices[_0x5048e6][_0x14b976(0x110)]);devices[_0x5048e6][_0x14b976(0x110)]=setTimeout(()=>{const _0x2c72c8=_0x14b976;getClientsWithUuid(_0x5048e6)[_0x2c72c8(0x1bd)]!=0x0?(devices[_0x5048e6][_0x2c72c8(0x139)]=refreshToken(_0x5048e6),io['to'](_0x5048e6)[_0x2c72c8(0x127)](_0x2c72c8(0x112),{'status':_0x2c72c8(0x133),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5048e6][_0x2c72c8(0x139)],'externalip':devices[_0x5048e6]['ip'],'publicKey':secure[_0x2c72c8(0xc5)]}),setTokenRefresh(_0x5048e6)):clearTimeout(devices[_0x5048e6][_0x2c72c8(0x110)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function _0x5680(_0x58f1be,_0x18851b){const _0x25dfcf=_0x5bb2();return _0x5680=function(_0xc62b6f,_0x1d2a20){_0xc62b6f=_0xc62b6f-0xc3;let _0x5bb203=_0x25dfcf[_0xc62b6f];return _0x5bb203;},_0x5680(_0x58f1be,_0x18851b);}function initializeSocketBotManager(_0x42052e){const _0x1fafbf=_0xa06f36,_0x90f0d5=getClient(_0x42052e['id'])[_0x1fafbf(0xd8)];_0x42052e[_0x1fafbf(0x127)](_0x1fafbf(0xe0),config),_0x42052e[_0x1fafbf(0x127)](_0x1fafbf(0x1c7),cleanSettings()),_0x42052e['on'](_0x1fafbf(0x10e),_0x4c4373=>{const _0x15bf55=_0x1fafbf;if(validateAccess(_0x4c4373,_0x90f0d5)[_0x15bf55(0xe8)])addBot();else logging(_0x15bf55(0x117));}),_0x42052e['on'](_0x1fafbf(0x19f),(_0x26540d,_0x3075f4)=>{const _0x253631=_0x1fafbf;if(validateAccess(_0x3075f4,_0x90f0d5)[_0x253631(0xe8)])toggleBot(_0x26540d[_0x253631(0x177)],_0x26540d[_0x253631(0x112)],_0x26540d['live']);else logging(_0x253631(0x1b8));}),_0x42052e['on'](_0x1fafbf(0x210),(_0x124975,_0x35c27a)=>{const _0x2a5fe3=_0x1fafbf;if(validateAccess(_0x35c27a,_0x90f0d5)[_0x2a5fe3(0xe8)])deleteBot(_0x124975);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x42052e['on'](_0x1fafbf(0x156),(_0xf532a4,_0x1bf67d)=>{const _0x281e58=_0x1fafbf;if(validateAccess(_0x1bf67d,_0x90f0d5)[_0x281e58(0xe8)])storeSettings(_0xf532a4,!![]);else logging(_0x281e58(0x186));}),_0x42052e['on']('logout',_0x398376=>{const _0x1d942e=_0x1fafbf;if(validateAccess(_0x398376,_0x90f0d5)[_0x1d942e(0xe8)]){if(devices[_0x90f0d5][_0x1d942e(0x110)])clearTimeout(devices[_0x90f0d5][_0x1d942e(0x110)]);if(devices[_0x90f0d5]['pidExpireLogin'])clearTimeout(devices[_0x90f0d5][_0x1d942e(0x15f)]);removeSocketListeners(getClient(_0x42052e['id'])[_0x1d942e(0xd8)]),addBlacklist(_0x90f0d5),devices[_0x90f0d5][_0x1d942e(0x118)]=null,devices[_0x90f0d5][_0x1d942e(0x170)]=null,devices[_0x90f0d5][_0x1d942e(0x139)]['token']=null,io['to'](getClient(_0x42052e['id'])[_0x1d942e(0xd8)])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x1d942e(0x126));});}function initializeSocketBot(_0x33a715){const _0x3198a0=_0xa06f36,_0xa88bf4=getClient(_0x33a715['id'])[_0x3198a0(0x160)],_0x5609c3=getClient(_0x33a715['id'])[_0x3198a0(0xd8)];_0x33a715['on'](_0x3198a0(0x1ed),(_0x56d116,_0xe494c7)=>{const _0x4e9013=_0x3198a0;if(validateAccess(_0xe494c7,_0x5609c3)[_0x4e9013(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4]['send']({'function':_0x4e9013(0xe3),'args':_0x56d116});}else logging(_0x4e9013(0x15a));}),_0x33a715['on'](_0x3198a0(0x13e),(_0x5218c7,_0x16b16c)=>{if(validateAccess(_0x16b16c,_0x5609c3)['allow']){if(pid[_0xa88bf4])pid[_0xa88bf4]['send']({'function':'getPortfolio','args':_0x5218c7});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x33a715['on'](_0x3198a0(0x1b3),(_0x463c20,_0x4f4595)=>{const _0x38e98e=_0x3198a0;if(validateAccess(_0x4f4595,_0x5609c3)[_0x38e98e(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4][_0x38e98e(0x17a)]({'function':_0x38e98e(0x17f),'args':_0x463c20});}else logging(_0x38e98e(0xe1));}),_0x33a715['on'](_0x3198a0(0x14b),(_0x27528e,_0x143104)=>{const _0x1171c3=_0x3198a0;if(validateAccess(_0x143104,_0x5609c3)[_0x1171c3(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4][_0x1171c3(0x17a)]({'function':_0x1171c3(0x1a1),'args':_0x27528e});}else logging(_0x1171c3(0x103));}),_0x33a715['on'](_0x3198a0(0x121),_0x153799=>{const _0x43640e=_0x3198a0;if(validateAccess(_0x153799,_0x5609c3)[_0x43640e(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4][_0x43640e(0x17a)]({'function':'getStartingBalances','args':null});}else logging(_0x43640e(0xe4));}),_0x33a715['on'](_0x3198a0(0x179),(_0x34e394,_0x52ee98)=>{const _0x3d4366=_0x3198a0;if(validateAccess(_0x52ee98,_0x5609c3)[_0x3d4366(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4][_0x3d4366(0x17a)]({'function':_0x3d4366(0x213),'args':_0x34e394});}else logging(_0x3d4366(0xd5));}),_0x33a715['on'](_0x3198a0(0x185),_0x3a5723=>{const _0x25af20=_0x3198a0;if(validateAccess(_0x3a5723,_0x5609c3)[_0x25af20(0xe8)]){if(pid[_0xa88bf4])pid[_0xa88bf4][_0x25af20(0x17a)]({'function':_0x25af20(0x1e5),'args':null});}else logging(_0x25af20(0x10a));}),_0x33a715['on'](_0x3198a0(0x209),_0x31f9c3=>{const _0x5b4a55=_0x3198a0;if(validateAccess(_0x31f9c3,_0x5609c3)[_0x5b4a55(0xe8)]){if(devices[_0x5609c3][_0x5b4a55(0x110)])clearTimeout(devices[_0x5609c3][_0x5b4a55(0x110)]);if(devices[_0x5609c3][_0x5b4a55(0x15f)])clearTimeout(devices[_0x5609c3][_0x5b4a55(0x15f)]);removeSocketListeners(getClient(_0x33a715['id'])[_0x5b4a55(0xd8)]),addBlacklist(_0x5609c3),devices[_0x5609c3][_0x5b4a55(0x118)]=null,devices[_0x5609c3][_0x5b4a55(0x170)]=null,devices[_0x5609c3][_0x5b4a55(0x139)][_0x5b4a55(0x1cf)]=null,io['to'](getClient(_0x33a715['id'])[_0x5b4a55(0xd8)])['emit'](_0x5b4a55(0x112),{'access':{'allow':![],'reason':_0x5b4a55(0x105),'token':null}});}else logging(_0x5b4a55(0x126));});}function removeSocketListeners(_0x57f0b4){const _0x39a137=_0xa06f36;getClientsWithUuid(_0x57f0b4)[_0x39a137(0x10d)](_0x4cd276=>{const _0x3e0d8a=_0x39a137;getSocket(_0x4cd276['id'])[_0x3e0d8a(0x1b9)]();});}function cleanSettings(){const _0xbe8412=_0xa06f36;let _0x49883b=settings;return settings[_0xbe8412(0x1d0)]&&settings['telegramToken']!=''&&(_0x49883b={..._0x49883b,'telegramToken':'************'}),settings['bbPassword']&&settings[_0xbe8412(0x10f)]!=''&&(_0x49883b={..._0x49883b,'bbPassword':'************'}),_0x49883b;}function startBot(_0x52b548,_0x1d112c,_0x58ba74){const _0x11572d=_0xa06f36;let _0x1ea740=![];const _0x31b0e1=_0x52b548[0x0];_0x1d112c={..._0x1d112c,'stdio':[_0x11572d(0x203),_0x11572d(0x203),_0x11572d(0x203),_0x11572d(0x125)]},pid[_0x31b0e1]=childProcess[_0x11572d(0xf9)](botfile,_0x52b548,_0x1d112c),pid[_0x31b0e1]['on'](_0x11572d(0x120),_0x403a59=>{const _0x549255=_0x11572d;switch(Object[_0x549255(0x144)](_0x403a59)[0x0]){case'botname':updateBotName(_0x31b0e1,_0x403a59[_0x549255(0x1a5)]);break;case _0x549255(0x112):updateStatus(_0x31b0e1,_0x403a59['status']);break;case'live':updateLive(_0x31b0e1,_0x403a59[_0x549255(0xee)]);break;case _0x549255(0x135):updateLive(_0x31b0e1,_0x403a59[_0x549255(0x135)]),io['to'](_0x31b0e1)['emit']('status',{'access':{'allow':![],'reason':_0x549255(0x1b2),'token':null}});break;case _0x549255(0xcb):_0x403a59[_0x549255(0xcb)]==_0x549255(0x142)&&stopBot(_0x31b0e1);_0x403a59[_0x549255(0xcb)]=='kill'&&toggleBot(_0x31b0e1,_0x549255(0x12f),_0x549255(0x146));break;case _0x549255(0x1f2):sendTelegram(_0x31b0e1,_0x403a59[_0x549255(0x1f2)]);break;case'function':io['to'](_0x31b0e1)[_0x549255(0x127)](_0x403a59[_0x549255(0x153)],_0x403a59[_0x549255(0x1c3)]);break;}}),pid[_0x31b0e1]['on'](_0x11572d(0x1d1),function(_0x274491){if(_0x1ea740)return;_0x1ea740=!![],_0x58ba74(_0x274491);}),pid[_0x31b0e1]['on']('exit',function(_0x3599ab){const _0x111561=_0x11572d;if(_0x1ea740)return;_0x1ea740=!![],_0x58ba74(null);const _0x251353=dbConfig[_0x111561(0x1ea)]('bots')['find']({'botID':_0x31b0e1})[_0x111561(0x1a9)]();_0x251353&&(_0x251353['status']==_0x111561(0x1dd)||_0x251353[_0x111561(0x112)]==_0x111561(0xec))&&(updateLive(_0x31b0e1,_0x111561(0x146)),logging(_0x111561(0x11a)+_0x31b0e1),startBot([_0x31b0e1,userID],{'cwd':bbpath},function(_0x50e7cd){if(_0x50e7cd)logging(_0x50e7cd);}));});}function stopBot(_0x591f0d){const _0x1ba55b=_0xa06f36;getClientsWithBotID(_0x591f0d)[_0x1ba55b(0x10d)](_0x419b6d=>{const _0x5c03d2=_0x1ba55b;getSocket(_0x419b6d['id'])[_0x5c03d2(0xfa)](!![]),removeClient(_0x419b6d['id']);});if(pid[_0x591f0d])pid[_0x591f0d][_0x1ba55b(0x13a)]();}function addBot(){const _0x4d2026=_0xa06f36;let _0x5906d5;for(let _0x347c9a=0x1;_0x347c9a<0x3e9;_0x347c9a++){_0x5906d5=_0x347c9a['toString']()['padStart'](0x3,'0');let _0x5d5d9d=config[_0x4d2026(0x1f1)](_0x40566a=>_0x40566a[_0x4d2026(0x177)]==_0x5906d5);if(!_0x5d5d9d)break;}if(_0x5906d5===_0x4d2026(0x1d4)){logging(_0x4d2026(0x1ff));return;}logging(_0x4d2026(0x188)+_0x5906d5),dbConfig['get'](_0x4d2026(0xe0))[_0x4d2026(0x1a0)]({'botID':_0x5906d5,'botname':_0x4d2026(0x1cd)+_0x5906d5,'status':_0x4d2026(0xec),'live':''})['write'](),startBot([_0x5906d5,userID],{'cwd':bbpath},function(_0x2bddd3){if(_0x2bddd3)logging(_0x2bddd3);}),config=getConfiguration(),io['to'](_0x4d2026(0xfb))['emit'](_0x4d2026(0xe0),config);}function deleteBot(_0x1ac3b1){const _0x18cf28=_0xa06f36;getClientsWithBotID(_0x1ac3b1)[_0x18cf28(0x10d)](_0x31520a=>{const _0x57c920=_0x18cf28;getSocket(_0x31520a['id'])[_0x57c920(0xfa)](!![]),removeClient(_0x31520a['id']);}),dbConfig[_0x18cf28(0x1ea)](_0x18cf28(0xe0))['remove']({'botID':_0x1ac3b1})[_0x18cf28(0x1d2)](),logging(_0x18cf28(0x1ad)+_0x1ac3b1),stopBot(_0x1ac3b1);try{fs[_0x18cf28(0x12c)](path['join'](configpath,_0x18cf28(0x189)+_0x1ac3b1+_0x18cf28(0x211))),fs['unlinkSync'](path[_0x18cf28(0x20e)](configpath,_0x18cf28(0x189)+_0x1ac3b1+_0x18cf28(0x1fb))),fs['unlinkSync'](path[_0x18cf28(0x20e)](configpath,_0x18cf28(0x189)+_0x1ac3b1+'-performance.json')),fs[_0x18cf28(0x12c)](path['join'](configpath,_0x18cf28(0x189)+_0x1ac3b1+_0x18cf28(0x1dc)));}catch(_0xd01393){if(_0xd01393)logging(_0x18cf28(0x1b0),_0xd01393);}config=getConfiguration(),io['to'](_0x18cf28(0xfb))['emit']('bots',config);}function toggleBot(_0x3e2821,_0x48bffd,_0x1a43c9){const _0x2d6aab=_0xa06f36;dbConfig[_0x2d6aab(0x1ea)]('bots')[_0x2d6aab(0x1f1)]({'botID':_0x3e2821})[_0x2d6aab(0x148)]({'status':_0x48bffd})[_0x2d6aab(0x148)]({'live':_0x1a43c9})[_0x2d6aab(0x1d2)]();if(_0x48bffd==_0x2d6aab(0x1dd)||_0x48bffd=='new')logging(_0x2d6aab(0x114)+_0x3e2821),startBot([_0x3e2821,userID],{'cwd':bbpath},function(_0x248f8d){if(_0x248f8d)logging(_0x248f8d);});else(_0x48bffd==_0x2d6aab(0x12f)||_0x48bffd==_0x2d6aab(0x1e8))&&(logging(_0x2d6aab(0x1aa)+_0x3e2821),stopBot(_0x3e2821));config=getConfiguration(),io['to'](_0x2d6aab(0xfb))['emit'](_0x2d6aab(0xe0),config);}function toggleStatus(_0x35a5aa){const _0x17ac08=_0xa06f36;let _0x109317=dbConfig[_0x17ac08(0x1ea)](_0x17ac08(0xe0))[_0x17ac08(0x1f1)]({'botID':_0x35a5aa})[_0x17ac08(0x1a9)](),_0x3f2101;if(_0x109317[_0x17ac08(0x112)]==='enabled')_0x3f2101=_0x17ac08(0x12f);else{if(_0x109317[_0x17ac08(0x112)]===_0x17ac08(0xec))_0x3f2101='new-disabled';else{if(_0x109317[_0x17ac08(0x112)]==='new-disabled')_0x3f2101=_0x17ac08(0xec);else{if(_0x109317[_0x17ac08(0x112)]==='disabled')_0x3f2101=_0x17ac08(0x1dd);}}}return _0x3f2101;}function updateStatus(_0x2d323a,_0x526396){const _0x194d2b=_0xa06f36;dbConfig[_0x194d2b(0x1ea)](_0x194d2b(0xe0))[_0x194d2b(0x1f1)]({'botID':_0x2d323a})[_0x194d2b(0x148)]({'status':_0x526396})[_0x194d2b(0x1d2)](),config=getConfiguration(),io['to'](_0x194d2b(0xfb))['emit'](_0x194d2b(0xe0),config);}function updateLive(_0x25b3e7,_0x213054){const _0x334056=_0xa06f36;dbConfig['get'](_0x334056(0xe0))[_0x334056(0x1f1)]({'botID':_0x25b3e7})[_0x334056(0x148)]({'live':_0x213054})[_0x334056(0x1d2)](),config=getConfiguration(),io['to'](_0x334056(0xfb))['emit'](_0x334056(0xe0),config);}function updateBotName(_0x22ee35,_0x20c081){const _0x262c2d=_0xa06f36;dbConfig['get'](_0x262c2d(0xe0))['find']({'botID':_0x22ee35})['assign']({'botname':_0x20c081})['write'](),config=getConfiguration(),io['to'](_0x262c2d(0xfb))['emit'](_0x262c2d(0xe0),config);}function telegramError(_0x123969){const _0xb2d79c=_0xa06f36;console[_0xb2d79c(0xf8)](getTimeStamp()+_0xb2d79c(0x166));}function validateTelegram(_0x54b0e9){const _0x2cbaba=_0xa06f36;if(_0x54b0e9['from'][_0x2cbaba(0x196)]!=settings[_0x2cbaba(0x1db)]&&'@'+_0x54b0e9[_0x2cbaba(0xce)][_0x2cbaba(0x196)]!=settings['telegramUsername'])return tgBot[_0x2cbaba(0xdf)](_0x54b0e9[_0x2cbaba(0x152)]['id'],_0x2cbaba(0x17c),{'parse_mode':_0x2cbaba(0x1e2)})[_0x2cbaba(0xdd)](_0x5a0cfc=>{telegramError(_0x5a0cfc);}),![];return!![];}async function initTelegram(){const _0x4fdcfa=_0xa06f36;if(tgBot)tgBot[_0x4fdcfa(0x13b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4fdcfa(0x1d0)],{'polling':!![]});let _0x2d699a=_0x4fdcfa(0x1de);_0x2d699a+='\x0a',_0x2d699a+=_0x4fdcfa(0x147),_0x2d699a+=_0x4fdcfa(0x192),_0x2d699a+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2d699a+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2d699a+='/on\x20-\x20start\x20bot(s)\x0a',_0x2d699a+=_0x4fdcfa(0x167),_0x2d699a+=_0x4fdcfa(0x143),_0x2d699a+='/help\x20-\x20show\x20available\x20commands\x0a';let _0xa45f92='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0xa45f92+='\x0a',_0xa45f92+=_0x2d699a,tgBot[_0x4fdcfa(0x14f)](/\/start/,_0x4bf5e5=>{const _0x447c1d=_0x4fdcfa;if(!validateTelegram(_0x4bf5e5))return;if(settings['telegramChatId']!=_0x4bf5e5[_0x447c1d(0x152)]['id'])updateSetting(_0x447c1d(0x195),_0x4bf5e5['chat']['id']);updateSetting(_0x447c1d(0x1c4),!![]),tgBot[_0x447c1d(0xdf)](_0x4bf5e5[_0x447c1d(0x152)]['id'],_0xa45f92)[_0x447c1d(0xdd)](_0xf95434=>{telegramError(_0xf95434);});}),tgBot[_0x4fdcfa(0x14f)](/\/enable/,_0x32985c=>{const _0x372fd8=_0x4fdcfa;if(!validateTelegram(_0x32985c))return;if(settings[_0x372fd8(0x195)]!=_0x32985c[_0x372fd8(0x152)]['id'])updateSetting(_0x372fd8(0x195),_0x32985c[_0x372fd8(0x152)]['id']);updateSetting(_0x372fd8(0x1c4),!![]),tgBot[_0x372fd8(0xdf)](_0x32985c[_0x372fd8(0x152)]['id'],_0x372fd8(0x1f9))[_0x372fd8(0xdd)](_0x37ef6d=>{telegramError(_0x37ef6d);});}),tgBot[_0x4fdcfa(0x14f)](/\/config/,async _0x4f3cf3=>{const _0x17200e=_0x4fdcfa;if(!validateTelegram(_0x4f3cf3))return;tgBot[_0x17200e(0x1ec)](_0x17200e(0x164)),tgBot[_0x17200e(0xdf)](_0x4f3cf3[_0x17200e(0x152)]['id'],_0x17200e(0x1a7),{'reply_markup':{'inline_keyboard':[[{'text':_0x17200e(0x1cc),'callback_data':_0x17200e(0x1bb)},{'text':_0x17200e(0x113),'callback_data':'alerts'},{'text':'All','callback_data':_0x17200e(0x161)}]]}})[_0x17200e(0xdd)](_0x2a4ad8=>{telegramError(_0x2a4ad8);}),tgBot['on'](_0x17200e(0x164),async _0x23796f=>{const _0x1539f5=_0x17200e,_0x1f642e=_0x23796f[_0x1539f5(0x20d)],_0x4ad22c=_0x23796f['message'];tgBot['answerCallbackQuery'](_0x23796f['id'])[_0x1539f5(0x13c)](async()=>{const _0x57d87f=_0x1539f5;_0x1f642e=='orders'&&(updateSetting(_0x57d87f(0x141),_0x57d87f(0x1bb)),updateSetting(_0x57d87f(0x1c4),!![]),await tgBot[_0x57d87f(0xdf)](_0x4ad22c['chat']['id'],_0x57d87f(0x175))['catch'](_0x593a1f=>{telegramError(_0x593a1f);}));_0x1f642e==_0x57d87f(0xf3)&&(updateSetting(_0x57d87f(0x141),_0x57d87f(0xf3)),updateSetting('telegramEnabled',!![]),await tgBot[_0x57d87f(0xdf)](_0x4ad22c[_0x57d87f(0x152)]['id'],_0x57d87f(0xeb))[_0x57d87f(0xdd)](_0x5cfe0a=>{telegramError(_0x5cfe0a);}));_0x1f642e==_0x57d87f(0x161)&&(updateSetting(_0x57d87f(0x141),_0x57d87f(0x161)),updateSetting(_0x57d87f(0x1c4),!![]),await tgBot[_0x57d87f(0xdf)](_0x4ad22c[_0x57d87f(0x152)]['id'],_0x57d87f(0xc8))['catch'](_0x1e2735=>{telegramError(_0x1e2735);}));if(!settings[_0x57d87f(0x195)])tgBot[_0x57d87f(0xdf)](_0x4ad22c[_0x57d87f(0x152)]['id'],_0x57d87f(0x16b))[_0x57d87f(0xdd)](_0x44c949=>{telegramError(_0x44c949);});}),tgBot[_0x1539f5(0x1ec)](_0x1539f5(0x164));});}),tgBot['onText'](/\/status/,_0x367b87=>{const _0x3a77a5=_0x4fdcfa;if(!validateTelegram(_0x367b87))return;let _0x4ab0bb=_0x3a77a5(0xde);config[_0x3a77a5(0x10d)](_0x4d71e9=>{const _0x20e8a1=_0x3a77a5;_0x4ab0bb+=_0x20e8a1(0x1cd)+_0x4d71e9[_0x20e8a1(0x177)]+_0x20e8a1(0x1ca)+_0x4d71e9[_0x20e8a1(0x1a5)]+':\x20'+_0x4d71e9[_0x20e8a1(0x112)]+_0x20e8a1(0x1af)+_0x4d71e9[_0x20e8a1(0xee)]+'\x0a';}),_0x4ab0bb+='\x0a',_0x4ab0bb+=_0x3a77a5(0x1bf),_0x4ab0bb+=!settings[_0x3a77a5(0x1c4)]?_0x3a77a5(0xf4):'Notifications\x20enabled\x0a',_0x4ab0bb+=settings['telegramEnabled']?settings['telegramEvents']==_0x3a77a5(0x161)?_0x3a77a5(0xfe):_0x3a77a5(0xc6)+settings[_0x3a77a5(0x141)]+_0x3a77a5(0x183):'',tgBot[_0x3a77a5(0xdf)](_0x367b87['chat']['id'],_0x4ab0bb,{'parse_mode':'HTML'})[_0x3a77a5(0xdd)](_0x3dc376=>{telegramError(_0x3dc376);});}),tgBot[_0x4fdcfa(0x14f)](/\/restart/,_0x51d356=>{const _0x762864=_0x4fdcfa;if(!validateTelegram(_0x51d356))return;tgBot['removeListener'](_0x762864(0x164));const _0x2b60e1=getEnabledBots();if(_0x2b60e1['length']==0x0)tgBot[_0x762864(0xdf)](_0x51d356[_0x762864(0x152)]['id'],_0x762864(0x16d))['catch'](_0x35c093=>{telegramError(_0x35c093);});else{if(_0x2b60e1[_0x762864(0x1bd)]>0x1)_0x2b60e1['push']({'botID':_0x762864(0x161)});let _0x5d755a=[],_0x3beebc=[];const _0x49661f=_0x2b60e1[_0x762864(0x1bd)]%0x4==0x0||_0x2b60e1['length']%0x4==0x3||_0x2b60e1[_0x762864(0x1bd)]%0x3==0x1?0x4:0x3;let _0x3d16ff=0x0;_0x2b60e1['forEach']((_0x2a59a0,_0x5b6e21)=>{const _0x2882b8=_0x762864;if(_0x5b6e21%_0x49661f==0x0)_0x3beebc=[];_0x3beebc[_0x2882b8(0x1a0)]({'text':_0x2a59a0[_0x2882b8(0x177)]=='all'?_0x2882b8(0x18c):_0x2882b8(0x1cd)+_0x2a59a0[_0x2882b8(0x177)],'callback_data':_0x2a59a0['botID']}),_0x5b6e21%_0x49661f==0x0&&(_0x5d755a[_0x3d16ff]=_0x3beebc,_0x3d16ff++);}),tgBot[_0x762864(0xdf)](_0x51d356[_0x762864(0x152)]['id'],_0x762864(0x172),{'reply_markup':{'inline_keyboard':_0x5d755a}})[_0x762864(0xdd)](_0x515b8c=>{telegramError(_0x515b8c);}),tgBot['on'](_0x762864(0x164),async _0x25e560=>{const _0x1ec09e=_0x762864,_0xe81d8e=_0x25e560[_0x1ec09e(0x20d)],_0x2944c4=_0x25e560['message'];tgBot[_0x1ec09e(0x1b4)](_0x25e560['id'])[_0x1ec09e(0x13c)](async()=>{const _0x3cdb94=_0x1ec09e;if(_0xe81d8e==_0x3cdb94(0x161)){if(settings[_0x3cdb94(0x141)]=='orders')tgBot['sendMessage'](_0x2944c4[_0x3cdb94(0x152)]['id'],_0x3cdb94(0x1a8))[_0x3cdb94(0xdd)](_0x4f9bff=>{telegramError(_0x4f9bff);});config[_0x3cdb94(0x10d)](_0x46df2c=>{const _0x38da2a=_0x3cdb94;stopBot(_0x46df2c[_0x38da2a(0x177)]);});}else{if(settings[_0x3cdb94(0x141)]==_0x3cdb94(0x1bb))tgBot['sendMessage'](_0x2944c4[_0x3cdb94(0x152)]['id'],_0x3cdb94(0x176)+_0xe81d8e)[_0x3cdb94(0xdd)](_0x1eaa4f=>{telegramError(_0x1eaa4f);});stopBot(_0xe81d8e);}}),tgBot[_0x1ec09e(0x1ec)](_0x1ec09e(0x164));});}}),tgBot[_0x4fdcfa(0x14f)](/\/on/,_0x3c69a8=>{const _0x1c8cd3=_0x4fdcfa;if(!validateTelegram(_0x3c69a8))return;tgBot[_0x1c8cd3(0x1ec)]('callback_query');const _0x377cb6=getDisabledBots();if(_0x377cb6[_0x1c8cd3(0x1bd)]==0x0)tgBot[_0x1c8cd3(0xdf)](_0x3c69a8[_0x1c8cd3(0x152)]['id'],_0x1c8cd3(0xe6))['catch'](_0xe26d38=>{telegramError(_0xe26d38);});else{if(_0x377cb6['length']>0x1)_0x377cb6[_0x1c8cd3(0x1a0)]({'botID':_0x1c8cd3(0x161)});let _0x8a581e=[],_0x44ebd2=[];const _0x8df56=_0x377cb6['length']%0x4==0x0||_0x377cb6[_0x1c8cd3(0x1bd)]%0x4==0x3||_0x377cb6[_0x1c8cd3(0x1bd)]%0x3==0x1?0x4:0x3;let _0x2b6512=0x0;_0x377cb6[_0x1c8cd3(0x10d)]((_0x25d9fe,_0x1ace20)=>{const _0x474336=_0x1c8cd3;if(_0x1ace20%_0x8df56==0x0)_0x44ebd2=[];_0x44ebd2[_0x474336(0x1a0)]({'text':_0x25d9fe[_0x474336(0x177)]==_0x474336(0x161)?_0x474336(0x18c):_0x474336(0x1cd)+_0x25d9fe[_0x474336(0x177)],'callback_data':_0x25d9fe[_0x474336(0x177)]}),_0x1ace20%_0x8df56==0x0&&(_0x8a581e[_0x2b6512]=_0x44ebd2,_0x2b6512++);}),tgBot[_0x1c8cd3(0xdf)](_0x3c69a8[_0x1c8cd3(0x152)]['id'],_0x1c8cd3(0x102),{'reply_markup':{'inline_keyboard':_0x8a581e}})[_0x1c8cd3(0xdd)](_0x24b0c1=>{telegramError(_0x24b0c1);}),tgBot['on'](_0x1c8cd3(0x164),async _0xdc16c=>{const _0x13cdb1=_0x1c8cd3,_0x29d916=_0xdc16c[_0x13cdb1(0x20d)],_0x436993=_0xdc16c[_0x13cdb1(0x120)];tgBot[_0x13cdb1(0x1b4)](_0xdc16c['id'])[_0x13cdb1(0x13c)](async()=>{const _0x3a948a=_0x13cdb1;if(_0x29d916==_0x3a948a(0x161)){if(settings[_0x3a948a(0x141)]==_0x3a948a(0x1bb))tgBot[_0x3a948a(0xdf)](_0x436993[_0x3a948a(0x152)]['id'],_0x3a948a(0xe2))[_0x3a948a(0xdd)](_0x2efd39=>{telegramError(_0x2efd39);});_0x377cb6['forEach'](_0x423d43=>{const _0x3c3554=_0x3a948a;if(_0x423d43[_0x3c3554(0x177)]!=_0x3c3554(0x161))toggleBot(_0x423d43['botID'],toggleStatus(_0x423d43[_0x3c3554(0x177)]),'stopped');});}else{if(settings[_0x3a948a(0x141)]==_0x3a948a(0x1bb))tgBot[_0x3a948a(0xdf)](_0x436993[_0x3a948a(0x152)]['id'],_0x3a948a(0x1ab)+_0x29d916)['catch'](_0x424db2=>{telegramError(_0x424db2);});toggleBot(_0x29d916,toggleStatus(_0x29d916),_0x3a948a(0x146));}}),tgBot[_0x13cdb1(0x1ec)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x48adea=>{const _0x5e22aa=_0x4fdcfa;if(!validateTelegram(_0x48adea))return;tgBot[_0x5e22aa(0x1ec)](_0x5e22aa(0x164));const _0x31904f=getEnabledBots();if(_0x31904f[_0x5e22aa(0x1bd)]==0x0)tgBot[_0x5e22aa(0xdf)](_0x48adea['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x5e22aa(0xdd)](_0x352aee=>{telegramError(_0x352aee);});else{if(_0x31904f[_0x5e22aa(0x1bd)]>0x1)_0x31904f[_0x5e22aa(0x1a0)]({'botID':_0x5e22aa(0x161)});let _0x5a7d03=[],_0x75a574=[];const _0x31c670=_0x31904f['length']%0x4==0x0||_0x31904f[_0x5e22aa(0x1bd)]%0x4==0x3||_0x31904f[_0x5e22aa(0x1bd)]%0x3==0x1?0x4:0x3;let _0x3a70da=0x0;_0x31904f[_0x5e22aa(0x10d)]((_0x2b5eb6,_0x119ae4)=>{const _0x26a94c=_0x5e22aa;if(_0x119ae4%_0x31c670==0x0)_0x75a574=[];_0x75a574[_0x26a94c(0x1a0)]({'text':_0x2b5eb6[_0x26a94c(0x177)]==_0x26a94c(0x161)?_0x26a94c(0x18c):_0x26a94c(0x1cd)+_0x2b5eb6['botID'],'callback_data':_0x2b5eb6[_0x26a94c(0x177)]}),_0x119ae4%_0x31c670==0x0&&(_0x5a7d03[_0x3a70da]=_0x75a574,_0x3a70da++);}),tgBot[_0x5e22aa(0xdf)](_0x48adea[_0x5e22aa(0x152)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5a7d03}})[_0x5e22aa(0xdd)](_0x35a875=>{telegramError(_0x35a875);}),tgBot['on'](_0x5e22aa(0x164),async _0x169bea=>{const _0x1db378=_0x5e22aa,_0x485faa=_0x169bea[_0x1db378(0x20d)],_0x5c9c40=_0x169bea[_0x1db378(0x120)];tgBot[_0x1db378(0x1b4)](_0x169bea['id'])[_0x1db378(0x13c)](async()=>{const _0x188e71=_0x1db378;if(_0x485faa=='all'){if(settings['telegramEvents']==_0x188e71(0x1bb))tgBot[_0x188e71(0xdf)](_0x5c9c40[_0x188e71(0x152)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x188e71(0xdd)](_0x5b17c6=>{telegramError(_0x5b17c6);});_0x31904f[_0x188e71(0x10d)](_0xcc5eca=>{const _0x39857a=_0x188e71;if(_0xcc5eca['botID']!='all')toggleBot(_0xcc5eca[_0x39857a(0x177)],toggleStatus(_0xcc5eca['botID']),_0x39857a(0x146));});}else{if(settings['telegramEvents']==_0x188e71(0x1bb))tgBot[_0x188e71(0xdf)](_0x5c9c40[_0x188e71(0x152)]['id'],_0x188e71(0x194)+_0x485faa)['catch'](_0x66f978=>{telegramError(_0x66f978);});toggleBot(_0x485faa,toggleStatus(_0x485faa),_0x188e71(0x146));}}),tgBot[_0x1db378(0x1ec)](_0x1db378(0x164));});}}),tgBot[_0x4fdcfa(0x14f)](/\/disable/,_0x503df1=>{const _0x567384=_0x4fdcfa;if(!validateTelegram(_0x503df1))return;tgBot['sendMessage'](_0x503df1[_0x567384(0x152)]['id'],_0x567384(0x1c2))[_0x567384(0xdd)](_0xaa5fef=>{telegramError(_0xaa5fef);}),updateSetting(_0x567384(0x1c4),![]);}),tgBot[_0x4fdcfa(0x14f)](/\/help/,_0x15ac62=>{const _0x4c2922=_0x4fdcfa;if(!validateTelegram(_0x15ac62))return;tgBot[_0x4c2922(0xdf)](_0x15ac62[_0x4c2922(0x152)]['id'],_0x2d699a)[_0x4c2922(0xdd)](_0x205e65=>{telegramError(_0x205e65);});}),tgBot['on']('polling_error',_0xf92c5=>{const _0x2ecfd=_0x4fdcfa;_0xf92c5[_0x2ecfd(0x198)]()[_0x2ecfd(0x180)](_0x2ecfd(0xc7))&&(logging(_0x2ecfd(0x154)),tgBot[_0x2ecfd(0x13b)](),tgBot=null,io['to'](_0x2ecfd(0xfb))['emit']('notification',_0x2ecfd(0x154)));}),process[_0x4fdcfa(0x155)]('SIGINT',()=>{const _0x3685e2=_0x4fdcfa;if(tgBot)tgBot[_0x3685e2(0x13b)]();process['exit'](0x1);}),process[_0x4fdcfa(0x155)](_0x4fdcfa(0x1da),()=>{const _0x162da0=_0x4fdcfa;if(tgBot)tgBot[_0x162da0(0x13b)]();process[_0x162da0(0x14e)](0x1);});}}function disableTelegram(){const _0x22d761=_0xa06f36;tgBot&&(tgBot[_0x22d761(0x13b)](),tgBot=null);}function sendTelegram(_0x3b8427,_0x138dba){const _0x56aa6e=_0xa06f36;if(settings['telegramEnabled']){if(settings[_0x56aa6e(0x141)]=='all'||(_0x138dba[_0x56aa6e(0x212)]==_0x56aa6e(0x1d1)||_0x138dba[_0x56aa6e(0x212)]=='success')&&settings[_0x56aa6e(0x141)]==_0x56aa6e(0xf3)||_0x138dba[_0x56aa6e(0x212)]=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x56aa6e(0x195)]){if(_0x138dba['showname'])tgBot[_0x56aa6e(0xdf)](settings[_0x56aa6e(0x195)],_0x138dba[_0x56aa6e(0x1a5)]+_0x56aa6e(0x10c)+_0x138dba['event'])[_0x56aa6e(0xdd)](_0x5ce4d4=>{telegramError(_0x5ce4d4);});else tgBot['sendMessage'](settings[_0x56aa6e(0x195)],_0x56aa6e(0x1cd)+_0x3b8427+_0x56aa6e(0x10c)+_0x138dba[_0x56aa6e(0xda)])[_0x56aa6e(0xdd)](_0x44697f=>{telegramError(_0x44697f);});}}}}function getDeviceWithIp(_0x1999e0){const _0x571af7=_0xa06f36;return devices[_0x571af7(0x1f1)](_0xf38545=>_0xf38545['ip']===_0x1999e0);}function temporaryAccess2FA(_0x89887a,_0x3ad62d){const _0x5d922f=_0xa06f36;let _0xbb3685=new Date(),_0x23841f=![];if(lastIpApproval){if(_0xbb3685-lastIpApproval<0x1388)_0x23841f=!![];}lastIpApproval=new Date();if(_0x23841f)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x5d922f(0x164)),tgBot[_0x5d922f(0xdf)](settings[_0x5d922f(0x195)],_0x5d922f(0x206)+normalizeIP(_0x3ad62d)['show']+_0x5d922f(0xf7),{'parse_mode':_0x5d922f(0x1e2),'reply_markup':{'inline_keyboard':[[{'text':_0x5d922f(0x184),'callback_data':'5'},{'text':_0x5d922f(0x1e6),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x5d922f(0x1fc),'callback_data':_0x5d922f(0x1fc)}]]}})[_0x5d922f(0xdd)](_0xa09262=>{telegramError(_0xa09262);}),tgBot['on'](_0x5d922f(0x164),async _0x2365e1=>{const _0xd6c84c=_0x5d922f,_0x58635e=_0x2365e1[_0xd6c84c(0x20d)],_0xc074a0=_0x2365e1[_0xd6c84c(0x120)];tgBot['answerCallbackQuery'](_0x2365e1['id'])[_0xd6c84c(0x13c)](async()=>{const _0x1c4a2e=_0xd6c84c;devices[_0x89887a]['telegramIpApproval']={'clientip':_0x3ad62d,'timestamp':new Date()[_0x1c4a2e(0x200)](),'expiry':_0x58635e},_0x58635e!=_0x1c4a2e(0x1fc)?(await tgBot['sendMessage'](_0xc074a0[_0x1c4a2e(0x152)]['id'],_0x1c4a2e(0x1f0)+_0x58635e+_0x1c4a2e(0x1ba),{'parse_mode':_0x1c4a2e(0x1e2)})[_0x1c4a2e(0xdd)](_0x1f3b77=>{telegramError(_0x1f3b77);}),io['to'](_0x89887a)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x1c4a2e(0xdf)](_0xc074a0[_0x1c4a2e(0x152)]['id'],'Temporary\x20access\x20rejected')[_0x1c4a2e(0xdd)](_0x564c51=>{telegramError(_0x564c51);}),io['to'](_0x89887a)[_0x1c4a2e(0x127)](_0x1c4a2e(0x112),{'access':{'allow':![],'reason':_0x1c4a2e(0xf5),'token':null}}));}),tgBot['removeListener'](_0xd6c84c(0x164));}));}function loginAccess2FA(_0xb83673,_0x526c2){const _0x1d22da=_0xa06f36;tgBot&&settings[_0x1d22da(0x195)]&&(tgBot[_0x1d22da(0x1ec)](_0x1d22da(0x164)),tgBot['sendMessage'](settings[_0x1d22da(0x195)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x526c2)['show']+_0x1d22da(0xf7),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1d22da(0x205),'callback_data':loginExpiry},{'text':_0x1d22da(0x1fc),'callback_data':_0x1d22da(0x1fc)}]]}})[_0x1d22da(0xdd)](_0x5c6395=>{telegramError(_0x5c6395);}),tgBot['on']('callback_query',async _0x4b4f3e=>{const _0x58cebb=_0x1d22da,_0x430b5c=_0x4b4f3e[_0x58cebb(0x20d)],_0x43bda3=_0x4b4f3e[_0x58cebb(0x120)];tgBot[_0x58cebb(0x1b4)](_0x4b4f3e['id'])['then'](async()=>{const _0x5d81d4=_0x58cebb;devices[_0xb83673]['telegram2FaApproval']={'clientip':_0x526c2,'timestamp':new Date()[_0x5d81d4(0x200)](),'expiry':_0x430b5c},_0x430b5c!=_0x5d81d4(0x1fc)?(await tgBot[_0x5d81d4(0xdf)](_0x43bda3[_0x5d81d4(0x152)]['id'],_0x5d81d4(0x1d7),{'parse_mode':_0x5d81d4(0x1e2)})[_0x5d81d4(0xdd)](_0x373639=>{telegramError(_0x373639);}),io['to'](_0xb83673)[_0x5d81d4(0x127)](_0x5d81d4(0x112),{'access':{'allow':![],'reason':_0x5d81d4(0x1b2),'token':null}})):(await tgBot[_0x5d81d4(0xdf)](_0x43bda3[_0x5d81d4(0x152)]['id'],_0x5d81d4(0xe7))['catch'](_0x19ca7a=>{telegramError(_0x19ca7a);}),io['to'](_0xb83673)[_0x5d81d4(0x127)](_0x5d81d4(0x112),{'access':{'allow':![],'reason':_0x5d81d4(0x19b),'token':null}}));}),tgBot[_0x58cebb(0x1ec)](_0x58cebb(0x164));}));}function getConfiguration(){const _0x3f0895=_0xa06f36;return dbConfig[_0x3f0895(0x1ea)](_0x3f0895(0xe0))['sortBy']('botID')['value']()||[];}function getEnabledBots(){const _0x2b0ef5=_0xa06f36;return dbConfig[_0x2b0ef5(0x1ea)](_0x2b0ef5(0xe0))[_0x2b0ef5(0xd4)](_0x2b0ef5(0x177))[_0x2b0ef5(0x145)]({'status':_0x2b0ef5(0x1dd)})[_0x2b0ef5(0x1a9)]()||[];}function getDisabledBots(){const _0x521e78=_0xa06f36;return dbConfig[_0x521e78(0x1ea)](_0x521e78(0xe0))[_0x521e78(0xd4)](_0x521e78(0x177))[_0x521e78(0x145)]({'status':_0x521e78(0x12f)})[_0x521e78(0x1a9)]()||[];}function getSettings(){const _0x15a504=_0xa06f36;return dbSettings[_0x15a504(0x1ea)]('settings')[_0x15a504(0x1a9)]()||{'timeshift':0x0};}function _0x5bb2(){const _0x4d9a68=['backup/','toString','referer','analytics','2FA\x20login\x20rejected','randomBytes','8sQhbgk','store','update-bot','push','storeHeadless','node-telegram-bot-api','login\x20token\x20valid','isIPv4MappedAddress','botname','getDate','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','value','disabled\x20Bot\x20','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','decrypt','deleted\x20Bot\x20','NTBA_FIX_319','\x20/\x20','error\x20while\x20deleting\x20config\x20files:\x20','listen','reload','store-configuration','answerCallbackQuery','cloneDeep','toIPv4MappedAddress','conn','Unauthorized\x20attempt\x20to\x20update\x20bot','removeAllListeners','\x20minutes','orders','ipv6','length','2FA\x20required','<b>Telegram\x20bot\x20status:</b>\x0a','privateKey','Bot\x20Mgr\x20>\x20','Notifications\x20disabled','args','telegramEnabled','static','4727020kIzSWD','settings','Unauthorized\x20login\x20attempt\x20(public\x20key)','RSA','\x20|\x20','bb/','Orders','Bot\x20','secure','token','telegramToken','error','write','f2aRequired','1000','3453294cMUOEO','whitelist','Login\x20accepted','idling\x20bot\x20\x20\x20|\x20Bot\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','SIGTERM','telegramUsername','-results.json','enabled','You\x20can\x20use\x20the\x20following\x20commands:\x0a','blacklist','sendFile','search','HTML','use','getMinutes','cancelLoading','15\x20min','config/','new-disabled','settings.','get','clientip','removeListener','get-logs','isDirectory','lowdb/adapters/FileSync','Access\x20enabled\x20for\x20','find','telegram','existsSync','path','copyFileSync','whitelistEnabled','/:bot/performance','9lcRfSR','Notifications\x20enabled','add','-events.json','reject','connection','auth','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getTime','Error:\x20Invalid\x20argument\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','inherit','handshake','accept','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','encryptedUuid','Password\x20has\x20been\x20reset\x20to:\x20','logout','name','479073DVgjAR','Invalid\x20authentication\x20token\x20(1)','data','join','password','delete-bot','-config.json','type','placeOrder','Token\x20blacklisted','socket.io','publicKey','Notifications\x20types:\x20','404\x20Not\x20Found','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','express','getHours','stop','6637712JzndPl','isValid','from','bb-secure.json','reason','timestamp','parse','build','sortBy','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','padStart','bcryptjs','uuid','No\x20authentication\x20token','event','Password\x20reset\x20rejected','login\x20not\x20required','catch','<b>Balance\x20Bot\x20status:</b>\x0a','sendMessage','bots','Unauthorized\x20attempt\x20to\x20store\x20configuration','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','emitHistory','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','https://hodlerhacks.com','All\x20bots\x20running\x20right\x20now','Login\x20rejected','allow','constructor','index.html','Ok,\x20will\x20send\x20alert\x20notifications\x20only','new','expiry','live','yes','running','2FA\x20login\x20required','loginRequired','alerts','Notifications\x20disabled\x0a','temporary\x20access\x20rejected','getFullYear','</b>\x20?','log','fork','disconnect','botmanager','::1','************','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','http','timeshift','RSA-OAEP','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','temporaryAccessAllowed','logged\x20out','compareSync','reset-password','kind','env','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','sign','\x20>\x20','forEach','add-bot','bbPassword','pidRefreshToken','verify','status','Alerts','enabled\x20Bot\x20','getSeconds','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20add\x20bot','telegramIpApproval','bb-settings.json','restarting\x20Bot\x20','127.0.0.1','hybrid-crypto-js','map','argv','2FA\x20login\x20token\x20generated','message','get-starting-balances','crypto','getMonth','set','ipc','Unauthorized\x20attempt\x20to\x20log\x20out','emit','initclient','server','6924848RpeSgs','3000','unlinkSync','lowdb','getUTCHours','disabled','Invalid\x20authentication\x20token\x20(2)','23465618lSfxGe','login\x20required','connected','/:bot/history','started','generateKeyPairAsync','login','mkdirSync','access','kill','stopPolling','then','/:bot','get-portfolio','temporary\x20token\x20generated','split','telegramEvents','restart','/status\x20-\x20show\x20bot(s)\x20status\x0a','keys','filter','stopped','/enable\x20-\x20enable\x20notifications\x0a','assign','page','toIPv4Address','store-headless','login\x20token\x20generated','headers','exit','onText','remoteAddress','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','chat','function','Invalid\x20Telegram\x20token','once','store-settings','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/:bot/support','default','Unauthorized\x20attempt\x20to\x20get\x20logs','child_process','max','starting\x20bot\x20|\x20Bot\x20','sha256','pidExpireLogin','bot','all','/:bot/coins','ipaddr.js','callback_query','invalid\x20credentials',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/off\x20-\x20stop\x20bot(s)\x0a','secret','4WAZJFf','10CultOM','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','success','No\x20bots\x20running\x20right\x20now','255802yLySgq',',\x20must\x20be\x20a\x204\x20digit\x20number','telegram2FaApproval','hasOwnProperty','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','::ffff:127.0.0.1','temporary\x20access\x20timeout','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','botID','hashSync','place-order','send','(((.+)+)+)+$','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','test','sockets','storeConfiguration','includes','version','build2','\x20only\x0a','5\x20min','cancel-loading','Unauthorized\x20attempt\x20to\x20update\x20settings','24hqUApc','starting\x20new\x20bot\x20|\x20Bot\x20','bot-','match',':\x20Bot\x20Mgr\x20>\x20','All\x20bots','bbUsername','bb-config.json','/:bot/portfolio','temporary\x20access\x20not\x20allowed','Balance\x20Bot\x20Server','/disable\x20-\x20disable\x20notifications\x0a','defaults','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','telegramChatId','username'];_0x5bb2=function(){return _0x4d9a68;};return _0x5bb2();}function getSecure(){const _0x46da2f=_0xa06f36;return dbSecure['get'](_0x46da2f(0x1ce))['value']()||{};}function getBlacklist(){const _0x40d3e4=_0xa06f36;return dbSecure[_0x40d3e4(0x1ea)](_0x40d3e4(0x1df))['value']()||[];}function broadcastToBots(_0x26ed20,_0x3c3457){const _0x68dc19=_0xa06f36;config[_0x68dc19(0x10d)](_0x56cffb=>{const _0x2bedf7=_0x68dc19;if(_0x56cffb[_0x2bedf7(0x112)]==_0x2bedf7(0x1dd)&&_0x56cffb[_0x2bedf7(0xee)]==_0x2bedf7(0xf0)){if(pid[_0x56cffb[_0x2bedf7(0x177)]])pid[_0x56cffb[_0x2bedf7(0x177)]][_0x2bedf7(0x17a)]({[_0x26ed20]:_0x3c3457});}});}function storeSettings(_0x5f499c,_0x54ce58=![]){const _0x4316b7=_0xa06f36;_0x5f499c={...settings,..._0x5f499c};if(_0x54ce58&&_0x5f499c[_0x4316b7(0x10f)]!=_0x4316b7(0xfd)&&_0x5f499c[_0x4316b7(0x10f)]!=''){const _0x3d4c40=crypt[_0x4316b7(0x1ac)](secure[_0x4316b7(0x1c0)],_0x5f499c[_0x4316b7(0x10f)])[_0x4316b7(0x120)][_0x4316b7(0x140)]('@')[0x0],_0x1f20fe=bcrypt[_0x4316b7(0x178)](_0x3d4c40,saltRounds);_0x5f499c={..._0x5f499c,'bbPassword':_0x1f20fe};}if(_0x54ce58&&_0x5f499c[_0x4316b7(0x1d0)]!=_0x4316b7(0xfd)&&_0x5f499c['telegramToken']!=''){const _0x2a69e3=crypt[_0x4316b7(0x1ac)](secure[_0x4316b7(0x1c0)],_0x5f499c[_0x4316b7(0x1d0)])['message']['split']('@')[0x0];_0x5f499c={..._0x5f499c,'telegramToken':_0x2a69e3};}const _0x487204=_0x5f499c[_0x4316b7(0x1d0)]!=_0x4316b7(0xfd)&&_0x5f499c['telegramToken']!=settings[_0x4316b7(0x1d0)]||_0x5f499c[_0x4316b7(0x1db)]!=settings[_0x4316b7(0x1db)],_0x4bda82=_0x5f499c[_0x4316b7(0x1d0)]==''||_0x5f499c[_0x4316b7(0x1db)]=='';if(_0x487204)_0x5f499c[_0x4316b7(0x141)]=_0x4316b7(0x161);for(const [_0x41fd16,_0x35962e]of Object['entries'](_0x5f499c)){if(_0x41fd16=='telegramToken'&&_0x35962e=='************'){_0x5f499c[_0x4316b7(0x1d0)]=settings[_0x4316b7(0x1d0)];continue;};if(_0x41fd16=='bbPassword'&&_0x35962e=='************'){_0x5f499c[_0x4316b7(0x10f)]=settings[_0x4316b7(0x10f)];continue;};dbSettings[_0x4316b7(0x124)](_0x4316b7(0x1e9)+_0x41fd16,_0x35962e)[_0x4316b7(0x1d2)]();}settings=_0x5f499c,io['to'](_0x4316b7(0xfb))[_0x4316b7(0x127)](_0x4316b7(0x1c7),cleanSettings()),broadcastToBots(_0x4316b7(0x100),settings['timeshift']);if(_0x487204&&!_0x4bda82)initTelegram();if(_0x487204&&_0x4bda82)disableTelegram();getAllClients()[_0x4316b7(0x10d)](_0x49ee0a=>{const _0x2fec27=_0x4316b7;getSocket(_0x49ee0a['id'])[_0x2fec27(0x127)](_0x2fec27(0x112),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x1dcb6a,_0x44d473){const _0x3d9586=_0xa06f36;dbSettings['set'](_0x3d9586(0x1e9)+_0x1dcb6a,_0x44d473)[_0x3d9586(0x1d2)](),settings=getSettings(),io['to'](_0x3d9586(0xfb))[_0x3d9586(0x127)](_0x3d9586(0x1c7),cleanSettings());}function storeSecure(_0x11da7a){const _0x2078c3=_0xa06f36;dbSecure[_0x2078c3(0x1ea)](_0x2078c3(0x1ce))[_0x2078c3(0x1a0)](_0x11da7a)['write'](),secure=_0x11da7a;}function addBlacklist(_0x492566){const _0x33b3f7=_0xa06f36;cleanBlacklist();let _0x24f1b4;devices[_0x492566]['telegramIpApproval']?_0x24f1b4=Math[_0x33b3f7(0x15c)](devices[_0x492566]['telegramIpApproval'][_0x33b3f7(0xed)],loginExpiry):_0x24f1b4=loginExpiry,dbSecure['get'](_0x33b3f7(0x1df))['push']({'expiry':new Date()[_0x33b3f7(0x200)]()+_0x24f1b4*0x3c*0x3e8,'token':devices[_0x492566][_0x33b3f7(0x139)][_0x33b3f7(0x1cf)]})[_0x33b3f7(0x1d2)](),blacklist=dbSecure[_0x33b3f7(0x1ea)](_0x33b3f7(0x1df))[_0x33b3f7(0x1a9)]();}function cleanBlacklist(){const _0x350b73=_0xa06f36;let _0x3e303c=dbSecure[_0x350b73(0x1ea)](_0x350b73(0x1df))[_0x350b73(0x1b5)]()[_0x350b73(0x1a9)](),_0x457fff=new Date()[_0x350b73(0x200)]();_0x3e303c['forEach'](_0x64c86c=>{const _0x406d68=_0x350b73;_0x64c86c[_0x406d68(0xed)]<_0x457fff&&dbSecure['get'](_0x406d68(0x1df))['remove']({'expiry':_0x64c86c[_0x406d68(0xed)]})[_0x406d68(0x1d2)]();});}function initStates(){const _0x4857e8=_0xa06f36;let _0x1ab3cb=getConfiguration();_0x1ab3cb[_0x4857e8(0x10d)](_0x2746a7=>{const _0x14fd28=_0x4857e8;_0x2746a7[_0x14fd28(0xee)]='stopped';}),storeConfiguration(_0x1ab3cb);}function onKeys(){const _0x2ab3bb=new RSA();return new Promise(_0xa60b47=>{const _0x243de3=_0x5680;_0x2ab3bb[_0x243de3(0x136)]()[_0x243de3(0x13c)](_0x1657ef=>{_0xa60b47(_0x1657ef);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x179043=_0xa06f36;let _0x4b17a0=getConfiguration(),_0x4955d8=![];_0x4b17a0[_0x179043(0x10d)](_0x54eadd=>{const _0x48ace6=_0x179043;if(_0x54eadd[_0x48ace6(0x112)]=='running')_0x54eadd[_0x48ace6(0x112)]=_0x48ace6(0x1dd),_0x4955d8=!![];else _0x54eadd[_0x48ace6(0x112)]=='stopped'&&(_0x54eadd[_0x48ace6(0x112)]='disabled',_0x4955d8=!![]);});if(_0x4955d8)storeConfiguration(_0x4b17a0);let _0x211f17=getSecure();if(!_0x211f17['hasOwnProperty'](_0x179043(0x168))){let _0x2290b7=await generateKeys();_0x211f17[_0x179043(0xc5)]=_0x2290b7[_0x179043(0xc5)],_0x211f17[_0x179043(0x1c0)]=_0x2290b7['privateKey'],_0x211f17['secret']=crypto[_0x179043(0x19c)](0x20)['toString']('hex');;storeSecure(_0x211f17);}let _0x1cc1c8=getSettings();_0x4955d8=![];!_0x1cc1c8[_0x179043(0x171)]('loginRequired')&&(_0x1cc1c8[_0x179043(0xf2)]=![],_0x1cc1c8[_0x179043(0x18d)]='',_0x1cc1c8['bbPassword']='',_0x1cc1c8[_0x179043(0x1d3)]=![],_0x4955d8=!![]);!_0x1cc1c8['hasOwnProperty'](_0x179043(0x1f6))&&(_0x1cc1c8[_0x179043(0x1f6)]=![],_0x1cc1c8[_0x179043(0x1d6)]=[],_0x1cc1c8[_0x179043(0x104)]=![],_0x4955d8=!![]);if(!_0x1cc1c8['hasOwnProperty'](_0x179043(0x1c4))){if(_0x1cc1c8[_0x179043(0x195)])_0x1cc1c8[_0x179043(0x1c4)]=!![];else _0x1cc1c8[_0x179043(0x1c4)]=![];_0x4955d8=!![];}if(_0x4955d8)storeSettings(_0x1cc1c8);}function storeConfiguration(_0x1395f5){const _0x13dbb0=_0xa06f36;dbConfig[_0x13dbb0(0x1ea)](_0x13dbb0(0xe0))['remove']()[_0x13dbb0(0x1d2)](),dbConfig[_0x13dbb0(0x1ea)](_0x13dbb0(0xe0))[_0x13dbb0(0x1a0)](..._0x1395f5)[_0x13dbb0(0x1d2)](),config=_0x1395f5;}function resetPassword(){const _0x49ab65=_0xa06f36;tgBot&&settings[_0x49ab65(0x195)]&&(tgBot[_0x49ab65(0x1ec)](_0x49ab65(0x164)),tgBot[_0x49ab65(0xdf)](settings[_0x49ab65(0x195)],_0x49ab65(0x202),{'parse_mode':_0x49ab65(0x1e2),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x49ab65(0xef)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4bb327=>{telegramError(_0x4bb327);}),tgBot['on']('callback_query',async _0x55ab9d=>{const _0x17d954=_0x49ab65,_0x2b7444=_0x55ab9d[_0x17d954(0x20d)],_0x455e7c=_0x55ab9d[_0x17d954(0x120)];tgBot[_0x17d954(0x1b4)](_0x55ab9d['id'])[_0x17d954(0x13c)](async()=>{const _0x25b82e=_0x17d954;if(_0x2b7444!='no'){const _0xcdf30b=0xf,_0x574f67=_0x25b82e(0x1d9),_0x3d4dd8=Array[_0x25b82e(0xce)](crypto['randomFillSync'](new Uint32Array(_0xcdf30b)))[_0x25b82e(0x11d)](_0x52512b=>_0x574f67[_0x52512b%_0x574f67[_0x25b82e(0x1bd)]])[_0x25b82e(0x20e)](''),_0xc99ea5=bcrypt[_0x25b82e(0x178)](_0x3d4dd8,saltRounds);storeSettings({'bbPassword':_0xc99ea5}),await tgBot[_0x25b82e(0xdf)](_0x455e7c[_0x25b82e(0x152)]['id'],_0x25b82e(0x208)+_0x3d4dd8,{'parse_mode':'HTML'})[_0x25b82e(0xdd)](_0x57aef1=>{telegramError(_0x57aef1);});}else await tgBot[_0x25b82e(0xdf)](_0x455e7c[_0x25b82e(0x152)]['id'],_0x25b82e(0xdb))['catch'](_0x4425b3=>{telegramError(_0x4425b3);});}),tgBot[_0x17d954(0x1ec)](_0x17d954(0x164));}));}function logging(_0x267628){const _0x2b2f52=_0xa06f36;console[_0x2b2f52(0xf8)](getTimeStamp()+_0x2b2f52(0x18b)+_0x267628);if(tgBot&&settings[_0x2b2f52(0x195)]&&settings[_0x2b2f52(0x141)]!=_0x2b2f52(0x1bb))tgBot[_0x2b2f52(0xdf)](settings[_0x2b2f52(0x195)],_0x2b2f52(0x1c1)+_0x267628)[_0x2b2f52(0xdd)](_0x43c4c4=>{telegramError(_0x43c4c4);});}function getServerTime(){const _0x165a27=_0xa06f36,_0x317a37=new Date();return _0x317a37[_0x165a27(0xf6)]()+'/'+(_0x317a37[_0x165a27(0x123)]()+0x1)['toString']()[_0x165a27(0xd6)](0x2,'0')+'/'+_0x317a37[_0x165a27(0x1a6)]()[_0x165a27(0x198)]()['padStart'](0x2,'0')+'\x20'+_0x317a37[_0x165a27(0xca)]()[_0x165a27(0x198)]()['padStart'](0x2,'0')+':'+_0x317a37[_0x165a27(0x1e4)]()['toString']()['padStart'](0x2,'0')+':'+_0x317a37[_0x165a27(0x115)]()[_0x165a27(0x198)]()[_0x165a27(0xd6)](0x2,'0');}function getTimeStamp(){const _0x1ad11b=_0xa06f36,_0x20aaa1=shiftedTime();return _0x20aaa1[_0x1ad11b(0xf6)]()+'/'+(_0x20aaa1[_0x1ad11b(0x123)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x20aaa1[_0x1ad11b(0x1a6)]()[_0x1ad11b(0x198)]()[_0x1ad11b(0xd6)](0x2,'0')+'\x20'+_0x20aaa1[_0x1ad11b(0xca)]()['toString']()[_0x1ad11b(0xd6)](0x2,'0')+':'+_0x20aaa1['getMinutes']()['toString']()[_0x1ad11b(0xd6)](0x2,'0')+':'+_0x20aaa1[_0x1ad11b(0x115)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x4b1708=_0xa06f36,_0x5e13ea=new Date();let _0x5a19c7=_0x5e13ea;if(settings['timeshift']&&settings[_0x4b1708(0x100)]!==0x0)_0x5a19c7=fns[_0x4b1708(0x1fa)](_0x5e13ea,{'hours':settings[_0x4b1708(0x100)]});return _0x5a19c7;}function startScheduler(){const _0x477885=_0xa06f36;let _0x20a1c6=new Date()[_0x477885(0x12e)]();_0x20a1c6==0x1&&backupConfigFiles();_0x20a1c6==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x140027=>{const _0x351e26=_0x5680;if(!_0x140027[_0x351e26(0x1ee)]())fs[_0x351e26(0x1f5)](configpath+_0x140027['name'],configbackuppath+_0x140027[_0x351e26(0x20a)]);});}function triggerAnalytics(){const _0x35941c=_0xa06f36;analytics[_0x35941c(0x149)]({'title':_0x35941c(0x191),'href':_0x35941c(0xe5),'path':'/v'+serverversion});}function validateCredentials(_0xc81a8e,_0x4fd297){const _0x2cea83=_0xa06f36;if(_0xc81a8e[_0x2cea83(0x196)]==settings['bbUsername']&&bcrypt[_0x2cea83(0x106)](_0xc81a8e[_0x2cea83(0x20f)],settings[_0x2cea83(0x10f)])){if(settings[_0x2cea83(0x1d3)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x496407=generateLoginToken(_0x4fd297);return{'allow':!![],'reason':_0x2cea83(0x14c),'token':_0x496407};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x556d9d){const _0x2b4446=generateLoginToken(_0x556d9d);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2b4446};}function validateAccess(_0x1a27f4,_0x42f338){const _0x33398d=_0xa06f36;let _0x31cdd1=devices[_0x42f338]['ip'],_0x474d41;const _0x378162=_0x49965e=>{const _0x4d02e8=_0x5680;if(settings[_0x4d02e8(0xf2)]){if(settings[_0x4d02e8(0x1d3)]){if(telegram2FaApproved(_0x42f338)){const _0x514632=generateLoginToken(_0x42f338);return{'allow':!![],'reason':_0x4d02e8(0x11f),'token':_0x514632};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x474d41=validToken(_0x49965e,_0x42f338),_0x474d41[_0x4d02e8(0x171)](_0x4d02e8(0x16c))?{'allow':!![],'reason':_0x4d02e8(0x1a3),'token':_0x49965e}:{'allow':![],'reason':_0x4d02e8(0x132),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x43862b=[...settings['whitelist'],_0x33398d(0xfc),_0x33398d(0x173),_0x33398d(0x11b)];if(_0x43862b[_0x33398d(0x180)](_0x31cdd1))return _0x378162(_0x1a27f4);else{_0x474d41=validToken(_0x1a27f4,_0x42f338);if(_0x474d41['hasOwnProperty'](_0x33398d(0x16c)))return _0x378162(_0x1a27f4);else{if(telegramIpApproved(_0x42f338)){const _0x1fe752=generateToken(_0x42f338);return _0x474d41=_0x378162(_0x1a27f4),_0x474d41[_0x33398d(0xe8)]?{'allow':!![],'reason':_0x33398d(0x13f),'token':_0x1fe752}:_0x474d41;}else return settings[_0x33398d(0x104)]?{'allow':![],'reason':_0x33398d(0x1be),'token':null}:{'allow':![],'reason':_0x33398d(0x190),'token':null};}}}else return _0x378162(_0x1a27f4);}function timelyDecrypt(_0xdea0f,_0x528361=!![]){const _0x4d217c=_0xa06f36;if(_0xdea0f)try{const _0x11f087=crypt['decrypt'](secure[_0x4d217c(0x1c0)],_0xdea0f)[_0x4d217c(0x120)],_0x3e9cec=_0x11f087[_0x4d217c(0x140)]('@')[0x0],_0x30df22=_0x11f087[_0x4d217c(0x140)]('@')[0x1],_0x54e141=new Date()[_0x4d217c(0x200)]();if(_0x528361){if(_0x54e141-_0x30df22<maxSecretAge*0x3e8)return _0x3e9cec;else return![];}else return _0x3e9cec;}catch(_0x4459c6){return![];}else return![];}const validToken=(_0x5351ea,_0x476a84)=>{const _0x43c59b=_0xa06f36,_0x568c07=devices[_0x476a84]['ip'];if(!_0x5351ea)return{'error':_0x43c59b(0xd9)};for(let _0x18e386 of blacklist){if(_0x18e386[_0x43c59b(0x1cf)]==_0x5351ea)return{'error':_0x43c59b(0xc3)};}let _0x37a724;try{_0x37a724=jwt[_0x43c59b(0x111)](_0x5351ea,secure[_0x43c59b(0x168)]+_0x476a84);}catch{return{'error':_0x43c59b(0x20c)};}if(!_0x37a724[_0x43c59b(0x171)](_0x43c59b(0x1eb))&&!_0x37a724[_0x43c59b(0x171)](_0x43c59b(0x196))||!_0x37a724['hasOwnProperty']('exp'))return{'error':_0x43c59b(0x130)};if(!_0x37a724[_0x43c59b(0x171)]('username')&&_0x37a724['hasOwnProperty'](_0x43c59b(0x1eb))){const {clientip:_0x246418}=_0x37a724;return _0x568c07==_0x246418?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x37a724[_0x43c59b(0x171)](_0x43c59b(0x196))&&_0x37a724['hasOwnProperty'](_0x43c59b(0x1eb))){const {username:_0x5612c1,clientip:_0x2ce832}=_0x37a724;return settings[_0x43c59b(0x18d)]==_0x5612c1&&_0x568c07==_0x2ce832?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x3bc123=>{const _0x4ab6fd=_0xa06f36;if(_0x3bc123){const _0x38222a=devices[_0x3bc123]['ip'];return jwt[_0x4ab6fd(0x10b)]({'username':settings[_0x4ab6fd(0x18d)],'clientip':_0x38222a},secure[_0x4ab6fd(0x168)]+_0x3bc123,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x538f51=>{const _0x263cc8=_0xa06f36;if(_0x538f51){const _0x5405ff=devices[_0x538f51]['ip'];return jwt[_0x263cc8(0x10b)]({'clientip':_0x5405ff},secure[_0x263cc8(0x168)]+_0x538f51,{'expiresIn':devices[_0x538f51][_0x263cc8(0x118)][_0x263cc8(0xed)]*0x3c});}else return![];},telegramIpApproved=_0x5266cc=>{const _0x472428=_0xa06f36;let _0x37b3d8=![];return devices[_0x5266cc][_0x472428(0x118)]&&devices[_0x5266cc]['telegramIpApproval'][_0x472428(0xed)]!=_0x472428(0x1fc)&&(_0x37b3d8=devices[_0x5266cc]['telegramIpApproval']['clientip']==devices[_0x5266cc]['ip']&&new Date()[_0x472428(0x200)]()-devices[_0x5266cc]['telegramIpApproval']['timestamp']<devices[_0x5266cc][_0x472428(0x118)][_0x472428(0xed)]*0x3c*0x3e8),_0x37b3d8;},telegram2FaApproved=_0x4969a5=>{const _0xe469a4=_0xa06f36;let _0x5b6fd1=![];return devices[_0x4969a5]['telegram2FaApproval']&&devices[_0x4969a5][_0xe469a4(0x170)]['expiry']!=_0xe469a4(0x1fc)&&(_0x5b6fd1=devices[_0x4969a5][_0xe469a4(0x170)][_0xe469a4(0x1eb)]==devices[_0x4969a5]['ip']&&new Date()[_0xe469a4(0x200)]()-devices[_0x4969a5][_0xe469a4(0x170)][_0xe469a4(0xd1)]<devices[_0x4969a5]['telegram2FaApproval'][_0xe469a4(0xed)]*0x3c*0x3e8),_0x5b6fd1;},normalizeIP=_0x40e609=>{const _0xfff493=_0xa06f36;let _0x55894e=null,_0x53f8f2=null;if(ipaddr[_0xfff493(0xcd)](_0x40e609)){const _0x150b64=ipaddr[_0xfff493(0xd2)](_0x40e609);_0x150b64[_0xfff493(0x108)]()===_0xfff493(0x1bc)?(_0x150b64[_0xfff493(0x1a4)]()&&(_0x55894e=_0x150b64[_0xfff493(0x14a)]()[_0xfff493(0x198)]()),_0x53f8f2=_0x150b64[_0xfff493(0x198)]()):(_0x55894e=_0x150b64['toString'](),_0x53f8f2=_0x150b64[_0xfff493(0x1b6)]()['toString']());}return{'show':_0x55894e?_0x55894e:_0x53f8f2,'store':_0x53f8f2};};