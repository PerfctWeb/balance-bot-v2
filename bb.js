const _0x284fa5=_0x138a;(function(_0x22848c,_0xe22a50){const _0x1a822f=_0x138a,_0x2b1e16=_0x22848c();while(!![]){try{const _0x1b3dc1=parseInt(_0x1a822f(0x180))/0x1+-parseInt(_0x1a822f(0x160))/0x2+parseInt(_0x1a822f(0x16b))/0x3+-parseInt(_0x1a822f(0x176))/0x4*(parseInt(_0x1a822f(0x187))/0x5)+-parseInt(_0x1a822f(0x16d))/0x6*(parseInt(_0x1a822f(0x181))/0x7)+parseInt(_0x1a822f(0x185))/0x8+parseInt(_0x1a822f(0x172))/0x9*(parseInt(_0x1a822f(0x177))/0xa);if(_0x1b3dc1===_0xe22a50)break;else _0x2b1e16['push'](_0x2b1e16['shift']());}catch(_0x453d7c){_0x2b1e16['push'](_0x2b1e16['shift']());}}}(_0x2b17,0xbabc5));const _0x51d274=function(){let _0x20f097=!![];return function(_0xc85800,_0x35970d){const _0x472c4c=_0x20f097?function(){const _0x2a4420=_0x138a;if(_0x35970d){const _0x1599fa=_0x35970d[_0x2a4420(0x171)](_0xc85800,arguments);return _0x35970d=null,_0x1599fa;}}:function(){};return _0x20f097=![],_0x472c4c;};}(),_0x593f4c=_0x51d274(this,function(){const _0x518aaf=_0x138a;return _0x593f4c[_0x518aaf(0x168)]()[_0x518aaf(0x18b)](_0x518aaf(0x170))[_0x518aaf(0x168)]()[_0x518aaf(0x15d)](_0x593f4c)[_0x518aaf(0x18b)]('(((.+)+)+)+$');});_0x593f4c();const fs=require('fs'),argv=require(_0x284fa5(0x166))(process['argv']['slice'](0x2))[_0x284fa5(0x18c)],childProcess=require(_0x284fa5(0x165)),nodeversion=process[_0x284fa5(0x16e)][_0x284fa5(0x167)],minversion=0x10;nodeversion[_0x284fa5(0x157)]('.')[0x0]<minversion&&(console[_0x284fa5(0x17a)](),console[_0x284fa5(0x17a)](_0x284fa5(0x17d)),console[_0x284fa5(0x17a)](_0x284fa5(0x179)+nodeversion+_0x284fa5(0x16a)+minversion+'\x20or\x20above\x20is\x20required'),console['log'](_0x284fa5(0x174)),console[_0x284fa5(0x17a)]('-----------------------------------------------------------------------------------'),console['log'](),process[_0x284fa5(0x17c)](0x1));if(argv[_0x284fa5(0x183)]){const pattern=/^[0-9]{2,4}$/;!pattern['test'](argv[_0x284fa5(0x183)])&&(console[_0x284fa5(0x17a)](_0x284fa5(0x17f)+argv['port']+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));}let args=[];argv[_0x284fa5(0x183)]&&(args[_0x284fa5(0x15a)](_0x284fa5(0x169)),args[_0x284fa5(0x15a)](argv[_0x284fa5(0x183)]));argv[_0x284fa5(0x175)]&&(args[_0x284fa5(0x15a)](_0x284fa5(0x16f)),args[_0x284fa5(0x15a)](argv[_0x284fa5(0x175)]));argv[_0x284fa5(0x164)]&&(args[_0x284fa5(0x15a)]('--user'),args[_0x284fa5(0x15a)](argv[_0x284fa5(0x164)]));const staging=argv['s']||![],debugging=argv['d']||![];debugging&&args['push']('-d');let bmpath=_0x284fa5(0x184);const bmfile='bm.js',updatefile=_0x284fa5(0x15e);!fs[_0x284fa5(0x161)](bmpath+bmfile)&&(bmpath='');let pid1,pid2,updating=![],terminating=![];process['on']('exit',async()=>{handleTerminate();}),process['on']('SIGTERM',async()=>{handleTerminate();}),process['on'](_0x284fa5(0x162),async()=>{handleTerminate();}),startBM();function startBM(){const _0x1a44c2=_0x284fa5;let _0x47a368=![];const _0x38fedc={'cwd':'','stdio':[_0x1a44c2(0x158),_0x1a44c2(0x158),_0x1a44c2(0x158),_0x1a44c2(0x182)]};pid1=childProcess[_0x1a44c2(0x18a)](bmpath+bmfile,args,_0x38fedc),pid1['on'](_0x1a44c2(0x15f),_0x5d79e2=>{const _0x1bd892=_0x1a44c2,_0x313589=Object[_0x1bd892(0x17e)](_0x5d79e2)[0x1]==_0x1bd892(0x159);switch(Object[_0x1bd892(0x17b)](_0x5d79e2)[0x0]){case'update':if(_0x313589)startUpdate('2s');else startUpdate('2');break;case _0x1bd892(0x186):if(_0x313589)startUpdate('3s');else startUpdate('3');break;case _0x1bd892(0x178):handleRestore();break;case _0x1bd892(0x15b):handleTerminate();break;}}),pid1['on']('error',function(_0x27f4ba){const _0x4bdb44=_0x1a44c2;if(_0x47a368)return;_0x47a368=!![],logging(_0x4bdb44(0x189),_0x27f4ba);}),pid1['on']('exit',function(_0x43b3c8){const _0x2b583e=_0x1a44c2;if(terminating)return;if(updating)return;if(_0x47a368)return;_0x47a368=!![],console[_0x2b583e(0x17a)](_0x2b583e(0x188)),startBM();});}async function handleTerminate(){stopBM(),await sleep(0x3e8),process['exit'](0x0);}function stopBM(){const _0x315439=_0x284fa5;terminating=!![];if(pid1)pid1[_0x315439(0x16c)]();pid1=null;}function startUpdate(_0x15e753){const _0x3fed70=_0x284fa5;updating=!![],stopBM();let _0x1ff001=![];const _0x2dcb3b={'cwd':'','stdio':[_0x3fed70(0x158),_0x3fed70(0x158),'inherit',_0x3fed70(0x182)]};let _0x29a866=[];if(staging)_0x29a866[_0x3fed70(0x15a)](_0x15e753+'s');else _0x29a866[_0x3fed70(0x15a)](_0x15e753);pid2=childProcess[_0x3fed70(0x18a)](updatefile,_0x29a866,_0x2dcb3b),pid2['on'](_0x3fed70(0x173),function(_0x3b5185){const _0x9bbe79=_0x3fed70;updating=![];if(_0x1ff001)return;_0x1ff001=!![],logging(_0x9bbe79(0x163),_0x3b5185);}),pid2['on']('exit',function(_0x1c3e73){updating=![];if(_0x1ff001)return;_0x1ff001=!![],terminating=![],startBM();});}function _0x138a(_0x5492d1,_0x3ad1e9){const _0x12e79b=_0x2b17();return _0x138a=function(_0x593f4c,_0x51d274){_0x593f4c=_0x593f4c-0x157;let _0x2b177c=_0x12e79b[_0x593f4c];return _0x2b177c;},_0x138a(_0x5492d1,_0x3ad1e9);}function handleRestore(){const _0x4cc869=_0x284fa5;if(pid1)pid1[_0x4cc869(0x16c)]();}function _0x2b17(){const _0x5c4d9=['port','bb/','4222144BLSoWJ','reinstall','2007220twizfx','Automatically\x20restarting\x20BM','Unexpected\x20error:','fork','search','argv','split','inherit','staging','push','terminate','Balance\x20Bot\x20>\x20','constructor','install.js','message','1053128cIgcXT','existsSync','SIGINT','Error\x20while\x20updating\x20Balance\x20Bot:','user','child_process','yargs/yargs','node','toString','--port',',\x20but\x20version\x20','4479471CvwEby','kill','3619884SJbuKk','versions','--host','(((.+)+)+)+$','apply','9CcnXSv','error','Please\x20install\x20a\x20recent\x20version\x20of\x20Node.js\x20and\x20then\x20start\x20Balance\x20Bot\x20again','host','8eiAkuK','5942370dTMCPL','restore','The\x20installed\x20Node.js\x20version\x20is\x20','log','keys','exit','-----------------------------------------------------------------------------------','values','Error:\x20Invalid\x20argument\x20','685787YWHAsn','14EarLdb','ipc'];_0x2b17=function(){return _0x5c4d9;};return _0x2b17();}function logging(_0x4efdd4){const _0x36466e=_0x284fa5;console[_0x36466e(0x17a)](_0x36466e(0x15c)+_0x4efdd4);}function sleep(_0x1e0007){return new Promise(_0x1f2f53=>setTimeout(_0x1f2f53,_0x1e0007));}