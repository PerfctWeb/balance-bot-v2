const _0x13c19a=_0x5778;(function(_0x4f35b9,_0x1d18c4){const _0x1dc100=_0x5778,_0x163304=_0x4f35b9();while(!![]){try{const _0x569d53=parseInt(_0x1dc100(0x2cc))/0x1*(parseInt(_0x1dc100(0x2a2))/0x2)+-parseInt(_0x1dc100(0x1d8))/0x3*(-parseInt(_0x1dc100(0x1cf))/0x4)+-parseInt(_0x1dc100(0x29d))/0x5*(-parseInt(_0x1dc100(0x254))/0x6)+-parseInt(_0x1dc100(0x263))/0x7+-parseInt(_0x1dc100(0x213))/0x8*(-parseInt(_0x1dc100(0x1d9))/0x9)+-parseInt(_0x1dc100(0x1da))/0xa*(parseInt(_0x1dc100(0x298))/0xb)+-parseInt(_0x1dc100(0x2d3))/0xc;if(_0x569d53===_0x1d18c4)break;else _0x163304['push'](_0x163304['shift']());}catch(_0x15312b){_0x163304['push'](_0x163304['shift']());}}}(_0xb25a,0x1eb79));function _0xb25a(){const _0x433013=['get-portfolio','toIPv4Address','Unauthorized\x20attempt\x20to\x20store\x20configuration','listen','All','hasOwnProperty','notification','defaults','telegramEvents','305756VjoKXw','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','clientip','password','add-bot','4055kwKzBy','catch','Bot\x20Mgr\x20>\x20','*Telegram\x20bot\x20status:\x0a*','success','80eLjofV','sortBy','toIPv4MappedAddress','starting\x20new\x20bot\x20|\x20Bot\x20','length','connected','static','live','Balance\x20Bot\x20Server','padStart','fork','expiry','\x20only\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','30\x20min','5\x20min','************','bots','whitelistEnabled','Crypt','127.0.0.1','getFullYear','Ok,\x20will\x20send\x20alert\x20notifications\x20only','new','2FA\x20required','remove','/:bot','http','mkdirSync','bbUsername','socket.io','getMinutes','-----------------------------------------------------------------------------------','secret','blacklist','bbPassword','decrypt','reload','generateKeyPairAsync','getStartingBalances','env','default','5790QDcDQF','get','find','alerts','map','publicKey','whitelist','2899128qslKjl','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','enabled\x20Bot\x20','error','sendFile','settings.','function','handshake','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','store-headless','UA-192771731-1','date-fns','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','createServer','assign','encryptedUuid','getDate','Ok,\x20will\x20send\x20order\x20notifications\x20only','NTBA_FIX_319','botmanager','@analytics/google-analytics','running','-config.json','privateKey','8RCyAHG','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','\x20minutes','starting\x20bot\x20|\x20Bot\x20','bb/','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20*','inherit','login','Invalid\x20IP\x20address','233286OMkvPQ','1765602SZfNAA','80OxXUvH','includes','Unauthorized\x20attempt\x20to\x20update\x20settings','getPortfolio','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','telegramToken','existsSync','Unauthorized\x20attempt\x20to\x20update\x20bot','starting','temporaryAccessAllowed','15\x20min','all','write','2FA','event','Markdown','access\x20timeout','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Temporary\x20access\x20rejected','filter','search','push','ipaddr.js','connection','/:bot/configuration','Token\x20blacklisted','timestamp','botID','1000','match','storeConfiguration','value','status','storeHeadless','disconnect','path','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bot.js','message','Password\x20has\x20been\x20reset\x20to:\x20','*\x20?','telegramUsername','No\x20authentication\x20token','stopPolling','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/enable\x20-\x20enable\x20notifications\x0a','2FA\x20login\x20token\x20generated','login\x20token\x20generated','allow','temporary\x20token\x20generated','send','hybrid-crypto-js','set','Unauthorized\x20attempt\x20to\x20log\x20out','telegramEnabled','(((.+)+)+)+$','/restart\x20-\x20restart\x20a\x20bot\x0a','8yyAnzm','SIGINT','Invalid\x20Telegram\x20token','User\x20has\x20been\x20validated','compareSync','/:bot/support','use','store-settings','stopped','child_process','jsonwebtoken','update-bot','index.html','hex','bot-','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','/:bot/history','sign','get-starting-balances','getMonth','getSeconds','bb-config.json','bb-secure.json','exit','enabled','auth','restarting\x20Bot\x20','-events.json','Access\x20enabled\x20for\x20','sendMessage','::ffff:127.0.0.1','reason','callback_query','headers','conn','build','getHours','Password\x20reset\x20rejected','timeshift','f2aRequired','disabled\x20Bot\x20','SIGTERM','Unauthorized\x20attempt\x20to\x20get\x20portfolio','RSA-OAEP','yes','Invalid\x20authentication\x20token\x20(2)','forEach','from','temporary\x20access\x20not\x20allowed','build2','remoteAddress','kill','idling\x20bot\x20\x20\x20|\x20Bot\x20','onText','removeListener','https://hodlerhacks.com','logged\x20out','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','referer','page','Notifications\x20disabled\x0a','getTime','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','new-disabled','token','792tqzRCB','disabled','orders','initclient','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','error\x20while\x20deleting\x20log\x20files:\x20','then','log','data','type','Notifications\x20types:\x20','/status\x20-\x20show\x20the\x20status\x20of\x20your\x20bots\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20*personal*\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','botname','lowdb/adapters/FileSync','704025FrccDL',':\x20Bot\x20Mgr\x20>\x20','login\x20not\x20required','version','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','reset-password','\x20>\x20','unlinkSync','show','2FA\x20login\x20required','Alerts','login\x20required','isValid','express','polling_error','chat','hashSync','reject','join','-performance.json','sha256','config/','invalid\x20credentials','ipv6','answerCallbackQuery','toString','Notifications\x20enabled\x0a','isIPv4MappedAddress','Invalid\x20authentication\x20token\x20(1)','Bot\x20','emit','cloneDeep','\x20|\x20','randomFillSync','username','split','/disable\x20-\x20disable\x20notifications\x0a','telegramChatId','keys','analytics','Unauthorized\x20attempt\x20to\x20delete\x20bot','loginRequired','settings','accept'];_0xb25a=function(){return _0x433013;};return _0xb25a();}const _0x2f8139=function(){let _0x57bd6c=!![];return function(_0x50aa20,_0x237e59){const _0xfb52d5=_0x57bd6c?function(){if(_0x237e59){const _0x1a5f8f=_0x237e59['apply'](_0x50aa20,arguments);return _0x237e59=null,_0x1a5f8f;}}:function(){};return _0x57bd6c=![],_0xfb52d5;};}(),_0x793c82=_0x2f8139(this,function(){const _0x142aad=_0x5778;return _0x793c82['toString']()[_0x142aad(0x1ee)]('(((.+)+)+)+$')['toString']()['constructor'](_0x793c82)[_0x142aad(0x1ee)](_0x142aad(0x211));});_0x793c82();'use strict';process[_0x13c19a(0x2ca)][_0x13c19a(0x1c9)]=0x1;const childProcess=require(_0x13c19a(0x21c)),FileSync=require(_0x13c19a(0x262)),fs=require('fs'),fns=require(_0x13c19a(0x1c2)),low=require('lowdb'),path=require(_0x13c19a(0x1fd)),crypto=require('crypto'),Crypt=require(_0x13c19a(0x20d))[_0x13c19a(0x2b5)],RSA=require(_0x13c19a(0x20d))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x13c19a(0x21d)),analyticsLib=require(_0x13c19a(0x28a))[_0x13c19a(0x2cb)],googleAnalytics=require(_0x13c19a(0x1cb))[_0x13c19a(0x2cb)],ipaddr=require(_0x13c19a(0x1f0));let bbpath=_0x13c19a(0x1d3);const botfile=_0x13c19a(0x1ff),configfile=_0x13c19a(0x228),settingsfile='bb-settings.json',securefile=_0x13c19a(0x229);!fs[_0x13c19a(0x1e0)](bbpath+botfile)&&(bbpath='');const configpath=bbpath+_0x13c19a(0x278);!fs['existsSync'](configpath)&&fs[_0x13c19a(0x2be)](configpath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x13c19a(0x1e6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x13c19a(0x296)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x13c19a(0x1e6)]();let crypt=new Crypt({'md':_0x13c19a(0x277),'rsaStandard':_0x13c19a(0x23e)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+'version.json')[_0x13c19a(0x266)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require(_0x13c19a(0x270)),app=express(),http=require(_0x13c19a(0x2bd))[_0x13c19a(0x1c4)](app);app[_0x13c19a(0x219)](express[_0x13c19a(0x2a8)](path[_0x13c19a(0x275)](__dirname,bbpath,_0x13c19a(0x244)))),app[_0x13c19a(0x219)](express[_0x13c19a(0x2a8)](path[_0x13c19a(0x275)](__dirname,bbpath,_0x13c19a(0x236)))),app[_0x13c19a(0x2cd)]('/',function(_0xa8fc50,_0x29f676){const _0x56c1b9=_0x13c19a;_0x29f676[_0x56c1b9(0x2d8)](path[_0x56c1b9(0x275)](__dirname,bbpath,_0x56c1b9(0x244),_0x56c1b9(0x21f)));}),app[_0x13c19a(0x2cd)](_0x13c19a(0x2bc),function(_0x4bb540,_0x4d0b2b){const _0x165b92=_0x13c19a;_0x4d0b2b[_0x165b92(0x2d8)](path[_0x165b92(0x275)](__dirname,bbpath,_0x165b92(0x236),'index.html'));}),app[_0x13c19a(0x2cd)]('/:bot/portfolio',(_0x3d5b6a,_0x22dd89)=>{const _0x5003ba=_0x13c19a;_0x22dd89[_0x5003ba(0x2d8)](path['join'](__dirname,bbpath,_0x5003ba(0x236),'index.html'));}),app[_0x13c19a(0x2cd)]('/:bot/performance',(_0x4bb84b,_0x4810bd)=>{const _0x293a5a=_0x13c19a;_0x4810bd[_0x293a5a(0x2d8)](path['join'](__dirname,bbpath,_0x293a5a(0x236),_0x293a5a(0x21f)));}),app[_0x13c19a(0x2cd)]('/:bot/coins',(_0x26e44d,_0x351dd6)=>{const _0x72bb95=_0x13c19a;_0x351dd6['sendFile'](path[_0x72bb95(0x275)](__dirname,bbpath,_0x72bb95(0x236),_0x72bb95(0x21f)));}),app[_0x13c19a(0x2cd)](_0x13c19a(0x223),(_0xf470db,_0x555014)=>{const _0x3e727e=_0x13c19a;_0x555014[_0x3e727e(0x2d8)](path['join'](__dirname,bbpath,_0x3e727e(0x236),_0x3e727e(0x21f)));}),app[_0x13c19a(0x2cd)](_0x13c19a(0x1f2),(_0x1d4cac,_0x4d4a3b)=>{const _0x47272c=_0x13c19a;_0x4d4a3b['sendFile'](path[_0x47272c(0x275)](__dirname,bbpath,_0x47272c(0x236),_0x47272c(0x21f)));}),app[_0x13c19a(0x2cd)](_0x13c19a(0x218),(_0x5c2c52,_0x543986)=>{const _0x52c94b=_0x13c19a;_0x543986[_0x52c94b(0x2d8)](path[_0x52c94b(0x275)](__dirname,bbpath,_0x52c94b(0x236),_0x52c94b(0x21f)));}),http[_0x13c19a(0x292)](PORT);const analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x13c19a(0x2de)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x13c19a(0x1df)]&&settings[_0x13c19a(0x1df)]!=''&&settings[_0x13c19a(0x203)]&&settings[_0x13c19a(0x203)]!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function startServer(){const _0x6481b9=_0x13c19a;console['log'](''),console[_0x6481b9(0x25b)](_0x6481b9(0x2c2)),logging(_0x6481b9(0x1d0)+PORT),console[_0x6481b9(0x25b)](_0x6481b9(0x2c2));if(config[_0x6481b9(0x2a6)]!=0x0)config[_0x6481b9(0x241)](_0x4ee02f=>{const _0x187fbc=_0x6481b9;if(_0x4ee02f[_0x187fbc(0x1fa)]==_0x187fbc(0x22b)||_0x4ee02f[_0x187fbc(0x1fa)]==_0x187fbc(0x2b9))logging(_0x187fbc(0x1d2)+_0x4ee02f['botID']+'\x20|\x20'+_0x4ee02f[_0x187fbc(0x261)]),startBot([_0x4ee02f[_0x187fbc(0x1f5)]],{'cwd':bbpath},function(_0x2618d6){if(_0x2618d6)logging(_0x2618d6);});else(_0x4ee02f[_0x187fbc(0x1fa)]==_0x187fbc(0x255)||_0x4ee02f['status']==_0x187fbc(0x252))&&logging(_0x187fbc(0x247)+_0x4ee02f[_0x187fbc(0x1f5)]+_0x187fbc(0x283)+_0x4ee02f[_0x187fbc(0x261)]);});else!newBot&&console[_0x6481b9(0x25b)](_0x6481b9(0x299));if(newBot)addBot();console[_0x6481b9(0x25b)](_0x6481b9(0x2c2)),console[_0x6481b9(0x25b)]('');}function startSocket(){const _0x4e1f6a=_0x13c19a,_0x4601d2=require(_0x4e1f6a(0x2c0))(http,{});_0x4601d2['on'](_0x4e1f6a(0x1f1),_0x54b9ea=>{const _0x54488f=_0x4e1f6a;let _0x487f61,_0x3f07c8,_0x43e7e3;const _0x7370ca=_0x54b9ea[_0x54488f(0x2db)][_0x54488f(0x234)][_0x54488f(0x24d)],_0x10f570=_0x54b9ea[_0x54488f(0x2db)][_0x54488f(0x22c)][_0x54488f(0x1c6)];if(!_0x10f570)_0x54b9ea[_0x54488f(0x281)](_0x54488f(0x1fa),{'publicKey':secure[_0x54488f(0x2d1)]});else{uuid=timelyDecrypt(_0x54b9ea[_0x54488f(0x2db)][_0x54488f(0x22c)][_0x54488f(0x1c6)],![]),_0x3f07c8=_0x7370ca['match'](/bot[0-9]{3}/);if(_0x3f07c8)_0x43e7e3=_0x3f07c8[0x0][_0x54488f(0x1f7)](/[0-9]{3}/);if(_0x43e7e3)_0x487f61=_0x43e7e3[0x0];else _0x487f61=_0x54488f(0x1ca);if(socket[_0x487f61])socket[_0x487f61][_0x54488f(0x1fc)](!![]);socket[_0x487f61]=_0x54b9ea,setAccess(_0x487f61);if(accessControl[_0x54488f(0x20a)]){if(_0x487f61=='botmanager')initializeSocketBotManager();else initializeSocketBot(_0x487f61);}if(!serverStatus[_0x487f61])serverStatus[_0x487f61]=_0x54488f(0x2a7);socket[_0x487f61]['on'](_0x54488f(0x1d6),_0x42fa25=>{const _0x2d7a02=_0x54488f,_0x283bae=timelyDecrypt(_0x42fa25[_0x2d7a02(0x29b)]);if(_0x283bae){_0x42fa25={'username':_0x42fa25['username'],'password':_0x283bae};let _0xa31011=validateCredentials(_0x42fa25);if(_0xa31011[_0x2d7a02(0x20a)]==![]&&_0xa31011[_0x2d7a02(0x232)]==_0x2d7a02(0x26c))socket[_0x487f61][_0x2d7a02(0x281)](_0x2d7a02(0x1fa),{'access':_0xa31011}),loginAccess2FA(externalip);else{if(_0xa31011[_0x2d7a02(0x20a)]==![]&&_0xa31011[_0x2d7a02(0x232)]==_0x2d7a02(0x279))socket[_0x487f61][_0x2d7a02(0x281)](_0x2d7a02(0x1fa),{'access':_0xa31011});else{if(_0xa31011[_0x2d7a02(0x20a)]&&_0xa31011[_0x2d7a02(0x232)]==_0x2d7a02(0x209)){token=_0xa31011[_0x2d7a02(0x253)];for(let _0x9304c1 in socket){if(_0x9304c1==_0x2d7a02(0x1ca))initializeSocketBotManager();else initializeSocketBot(_0x9304c1);socket[_0x9304c1][_0x2d7a02(0x281)](_0x2d7a02(0x1fa),{'status':serverStatus[_0x9304c1]||_0x2d7a02(0x1e2),'serverversion':serverversion,'servertime':getServerTime(),'access':_0xa31011,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':![]});}setTokenRefresh(),setSessionTimeout(_0x2d7a02(0x1d6));}}}}else logging(_0x2d7a02(0x222));}),socket[_0x487f61]['on'](_0x54488f(0x268),()=>{resetPassword();}),socket[_0x487f61]['on'](_0x54488f(0x1fc),_0x4f1ea9=>{let _0x264263=[];for(let _0x5570ae in socket){if(_0x5570ae!=_0x487f61)_0x264263[_0x5570ae]=socket[_0x5570ae];}socket=_0x264263;});if(_0x487f61!=_0x54488f(0x1ca)&&config['apiKey']!=''){if(pid[_0x487f61])pid[_0x487f61][_0x54488f(0x20c)]({'function':_0x54488f(0x257),'args':null});}}});}function setAccess(_0x316142){const _0x52c887=_0x13c19a;externalip=normalizeIP(socket[_0x316142][_0x52c887(0x235)][_0x52c887(0x245)])['store'],accessControl=validateAccess(token),accessControl[_0x52c887(0x253)]&&accessControl[_0x52c887(0x232)]==_0x52c887(0x20b)&&setSessionTimeout(_0x52c887(0x1e7)),accessControl[_0x52c887(0x253)]&&accessControl[_0x52c887(0x232)]==_0x52c887(0x208)&&setSessionTimeout(_0x52c887(0x1d6)),socket[_0x316142][_0x52c887(0x281)](_0x52c887(0x1fa),{'status':serverStatus[_0x316142]||_0x52c887(0x1e2),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':accessControl[_0x52c887(0x232)]==_0x52c887(0x26e)||accessControl[_0x52c887(0x232)]=='2FA\x20login\x20required'}),accessControl[_0x52c887(0x20a)]==![]&&accessControl[_0x52c887(0x232)]==_0x52c887(0x2ba)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x2bb2ed){const _0x5c46fe=_0x13c19a;let _0x720b0f;if(_0x2bb2ed==_0x5c46fe(0x1d6))_0x720b0f=loginExpiry*0x3c*0x3e8;else _0x720b0f=telegramIpApproval[_0x5c46fe(0x2ad)]*0x3c*0x3e8-(new Date()['getTime']()-telegramIpApproval[_0x5c46fe(0x1f4)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x41558b=_0x5c46fe;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x14aea9=validateAccess(token);if(!(_0x14aea9['allow']&&_0x14aea9[_0x41558b(0x232)]==_0x41558b(0x265)))for(let _0x66d5bd in socket){socket[_0x66d5bd][_0x41558b(0x281)]('status',{'access':{'allow':![],'reason':_0x41558b(0x1ea),'token':null}});}token=null;},_0x720b0f);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x30c6bc=_0x5778;let _0x56af23=refreshToken();for(let _0x11560e in socket){socket[_0x11560e][_0x30c6bc(0x281)](_0x30c6bc(0x1fa),{'status':serverStatus[_0x11560e]||_0x30c6bc(0x1e2),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x56af23,'externalip':externalip,'publicKey':secure[_0x30c6bc(0x2d1)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0xa2ae51=_0x13c19a;socket[_0xa2ae51(0x1ca)][_0xa2ae51(0x281)]('bots',config),socket[_0xa2ae51(0x1ca)][_0xa2ae51(0x281)]('settings',cleanSettings()),socket[_0xa2ae51(0x1ca)]['on'](_0xa2ae51(0x29c),_0x5da472=>{const _0x3d7134=_0xa2ae51;if(validateAccess(_0x5da472)[_0x3d7134(0x20a)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),socket[_0xa2ae51(0x1ca)]['on'](_0xa2ae51(0x21e),(_0x29acbf,_0xaa0fe4)=>{const _0x4ad63e=_0xa2ae51;if(validateAccess(_0xaa0fe4)['allow'])toggleBot(_0x29acbf[_0x4ad63e(0x1f5)],_0x29acbf[_0x4ad63e(0x1fa)],_0x29acbf[_0x4ad63e(0x2a9)]);else logging(_0x4ad63e(0x1e1));}),socket[_0xa2ae51(0x1ca)]['on']('delete-bot',(_0x5067fc,_0x40791b)=>{const _0x3de483=_0xa2ae51;if(validateAccess(_0x40791b)[_0x3de483(0x20a)])deleteBot(_0x5067fc);else logging(_0x3de483(0x28b));}),socket[_0xa2ae51(0x1ca)]['on'](_0xa2ae51(0x21a),(_0x7c262f,_0x2e90ed)=>{const _0x46597f=_0xa2ae51;if(validateAccess(_0x2e90ed)['allow'])storeSettings(_0x7c262f,!![]);else logging(_0x46597f(0x1dc));}),socket[_0xa2ae51(0x1ca)]['on']('logout',_0x211c25=>{const _0x1854d4=_0xa2ae51;if(validateAccess(_0x211c25)[_0x1854d4(0x20a)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x428754 in socket){socket[_0x428754][_0x1854d4(0x281)]('status',{'access':{'allow':![],'reason':_0x1854d4(0x24b),'token':null}});}}else logging(_0x1854d4(0x20f));});}function initializeSocketBot(_0x24f8f2){const _0x316bc2=_0x13c19a;socket[_0x24f8f2]['on']('get-logs',(_0x13b9f9,_0x3637d4)=>{const _0x411dd7=_0x5778;if(validateAccess(_0x3637d4)[_0x411dd7(0x20a)]){if(pid[_0x24f8f2])pid[_0x24f8f2]['send']({'function':'emitHistory','args':_0x13b9f9});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),socket[_0x24f8f2]['on'](_0x316bc2(0x28f),(_0x206e4b,_0x3755c8)=>{const _0x3913ba=_0x316bc2;if(validateAccess(_0x3755c8)['allow']){if(pid[_0x24f8f2])pid[_0x24f8f2][_0x3913ba(0x20c)]({'function':_0x3913ba(0x1dd),'args':_0x206e4b});}else logging(_0x3913ba(0x23d));}),socket[_0x24f8f2]['on']('store-configuration',(_0x20534d,_0x4dbf4b)=>{const _0x560c9a=_0x316bc2;if(validateAccess(_0x4dbf4b)['allow']){if(pid[_0x24f8f2])pid[_0x24f8f2][_0x560c9a(0x20c)]({'function':_0x560c9a(0x1f8),'args':_0x20534d});}else logging(_0x560c9a(0x291));}),socket[_0x24f8f2]['on'](_0x316bc2(0x2dd),(_0x4b1d2f,_0x188022)=>{const _0x1d971b=_0x316bc2;if(validateAccess(_0x188022)['allow']){if(pid[_0x24f8f2])pid[_0x24f8f2][_0x1d971b(0x20c)]({'function':_0x1d971b(0x1fb),'args':_0x4b1d2f});}else logging(_0x1d971b(0x206));}),socket[_0x24f8f2]['on'](_0x316bc2(0x225),_0x4796d9=>{const _0x2a2945=_0x316bc2;if(validateAccess(_0x4796d9)[_0x2a2945(0x20a)]){if(pid[_0x24f8f2])pid[_0x24f8f2][_0x2a2945(0x20c)]({'function':_0x2a2945(0x2c9),'args':null});}else logging(_0x2a2945(0x1c3));}),socket[_0x24f8f2]['on']('market-order',(_0x153f0a,_0x1e7ca2)=>{const _0x2b0c39=_0x316bc2;if(validateAccess(_0x1e7ca2)[_0x2b0c39(0x20a)]){if(pid[_0x24f8f2])pid[_0x24f8f2][_0x2b0c39(0x20c)]({'function':'placeMarketOrder','args':_0x153f0a});}else logging(_0x2b0c39(0x1eb));}),socket[_0x24f8f2]['on']('logout',_0x42e570=>{const _0x1a23f5=_0x316bc2;if(validateAccess(_0x42e570)[_0x1a23f5(0x20a)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x54a725 in socket){socket[_0x54a725]['emit'](_0x1a23f5(0x1fa),{'access':{'allow':![],'reason':_0x1a23f5(0x24b),'token':null}});}}else logging(_0x1a23f5(0x20f));});}function cleanSettings(){const _0x1dcde3=_0x13c19a;let _0x5f57b0=settings;return settings[_0x1dcde3(0x1df)]&&settings[_0x1dcde3(0x1df)]!=''&&(_0x5f57b0={..._0x5f57b0,'telegramToken':_0x1dcde3(0x2b2)}),settings['bbPassword']&&settings[_0x1dcde3(0x2c5)]!=''&&(_0x5f57b0={..._0x5f57b0,'bbPassword':'************'}),_0x5f57b0;}function startBot(_0x83a86d,_0x5ea74f,_0x32c153){const _0x2e0c40=_0x13c19a;let _0x31927a=![];const _0x3c23aa=_0x83a86d[0x0];_0x5ea74f={..._0x5ea74f,'stdio':[_0x2e0c40(0x1d5),_0x2e0c40(0x1d5),'inherit','ipc']},pid[_0x3c23aa]=childProcess[_0x2e0c40(0x2ac)](botfile,_0x83a86d,_0x5ea74f),pid[_0x3c23aa]['on'](_0x2e0c40(0x200),_0x529e4a=>{const _0x29d7f8=_0x2e0c40;switch(Object[_0x29d7f8(0x289)](_0x529e4a)[0x0]){case _0x29d7f8(0x261):updateBotName(_0x3c23aa,_0x529e4a[_0x29d7f8(0x261)]);break;case'status':updateStatus(_0x3c23aa,_0x529e4a[_0x29d7f8(0x1fa)]);break;case _0x29d7f8(0x2a9):updateLive(_0x3c23aa,_0x529e4a[_0x29d7f8(0x2a9)]);break;case'telegram':sendTelegram(_0x3c23aa,_0x529e4a['telegram']);break;case _0x29d7f8(0x2da):if(socket[_0x3c23aa])socket[_0x3c23aa]['emit'](_0x529e4a[_0x29d7f8(0x2da)],_0x529e4a['args']);break;}}),pid[_0x3c23aa]['on']('error',function(_0x84c67e){if(_0x31927a)return;_0x31927a=!![],_0x32c153(_0x84c67e);}),pid[_0x3c23aa]['on'](_0x2e0c40(0x22a),function(_0x504d6c){const _0x3bd505=_0x2e0c40;if(_0x31927a)return;_0x31927a=!![],_0x32c153(null);const _0x59e11a=dbConfig[_0x3bd505(0x2cd)](_0x3bd505(0x2b3))['find']({'botID':_0x3c23aa})[_0x3bd505(0x1f9)]();_0x59e11a&&(_0x59e11a['status']==_0x3bd505(0x22b)||_0x59e11a[_0x3bd505(0x1fa)]==_0x3bd505(0x2b9))&&(updateLive(_0x3c23aa,_0x3bd505(0x21b)),logging(_0x3bd505(0x22d)+_0x3c23aa),startBot([_0x3c23aa],{'cwd':bbpath},function(_0x549ba0){if(_0x549ba0)logging(_0x549ba0);}));});}function stopBot(_0x2f6ec9){const _0x4c9dab=_0x13c19a;if(pid[_0x2f6ec9])pid[_0x2f6ec9][_0x4c9dab(0x246)]();}function addBot(){const _0x4119c3=_0x13c19a;let _0x4eef4a;for(let _0x587cb6=0x1;_0x587cb6<0x3e9;_0x587cb6++){_0x4eef4a=_0x587cb6[_0x4119c3(0x27c)]()[_0x4119c3(0x2ab)](0x3,'0');let _0x5abb7e=config[_0x4119c3(0x2ce)](_0x39c13a=>_0x39c13a['botID']==_0x4eef4a);if(!_0x5abb7e)break;}if(_0x4eef4a===_0x4119c3(0x1f6)){logging(_0x4119c3(0x2d5));return;}logging(_0x4119c3(0x2a5)+_0x4eef4a),dbConfig[_0x4119c3(0x2cd)](_0x4119c3(0x2b3))['push']({'botID':_0x4eef4a,'botname':_0x4119c3(0x280)+_0x4eef4a,'status':'new','live':''})[_0x4119c3(0x1e6)](),startBot([_0x4eef4a],{'cwd':bbpath},function(_0x16c6ac){if(_0x16c6ac)logging(_0x16c6ac);}),config=getConfiguration();if(socket[_0x4119c3(0x1ca)])socket[_0x4119c3(0x1ca)]['emit'](_0x4119c3(0x2b3),config);}function deleteBot(_0x48dc22){const _0x719b4a=_0x13c19a;dbConfig[_0x719b4a(0x2cd)]('bots')[_0x719b4a(0x2bb)]({'botID':_0x48dc22})[_0x719b4a(0x1e6)](),logging('deleted\x20Bot\x20'+_0x48dc22),stopBot(_0x48dc22);try{fs[_0x719b4a(0x26a)](path[_0x719b4a(0x275)](configpath,_0x719b4a(0x221)+_0x48dc22+_0x719b4a(0x1cd))),fs[_0x719b4a(0x26a)](path[_0x719b4a(0x275)](configpath,_0x719b4a(0x221)+_0x48dc22+_0x719b4a(0x22e))),fs['unlinkSync'](path[_0x719b4a(0x275)](configpath,_0x719b4a(0x221)+_0x48dc22+_0x719b4a(0x276))),fs[_0x719b4a(0x26a)](path[_0x719b4a(0x275)](configpath,'bot-'+_0x48dc22+'-results.json'));}catch(_0x51cda9){if(_0x51cda9)logging(_0x719b4a(0x259),_0x51cda9);}config=getConfiguration();if(socket[_0x719b4a(0x1ca)])socket[_0x719b4a(0x1ca)][_0x719b4a(0x281)](_0x719b4a(0x2b3),config);}function toggleBot(_0x391fe8,_0xed9e11,_0x154318){const _0x2319ee=_0x13c19a;dbConfig[_0x2319ee(0x2cd)](_0x2319ee(0x2b3))['find']({'botID':_0x391fe8})[_0x2319ee(0x1c5)]({'status':_0xed9e11})['assign']({'live':_0x154318})[_0x2319ee(0x1e6)]();if(_0xed9e11==_0x2319ee(0x22b)||_0xed9e11==_0x2319ee(0x2b9))logging(_0x2319ee(0x2d6)+_0x391fe8),startBot([_0x391fe8],{'cwd':bbpath},function(_0x542450){if(_0x542450)logging(_0x542450);});else(_0xed9e11=='disabled'||_0xed9e11=='new-disabled')&&(logging(_0x2319ee(0x23b)+_0x391fe8),stopBot(_0x391fe8));config=getConfiguration();if(socket['botmanager'])socket['botmanager'][_0x2319ee(0x281)]('bots',config);}function updateStatus(_0x388012,_0x3e19af){const _0x17059b=_0x13c19a;dbConfig['get'](_0x17059b(0x2b3))[_0x17059b(0x2ce)]({'botID':_0x388012})['assign']({'status':_0x3e19af})['write'](),config=getConfiguration();if(socket['botmanager'])socket[_0x17059b(0x1ca)][_0x17059b(0x281)](_0x17059b(0x2b3),config);}function updateLive(_0x5a04e8,_0x125452){const _0x1bd64c=_0x13c19a;dbConfig[_0x1bd64c(0x2cd)]('bots')['find']({'botID':_0x5a04e8})[_0x1bd64c(0x1c5)]({'live':_0x125452})[_0x1bd64c(0x1e6)](),config=getConfiguration();if(socket[_0x1bd64c(0x1ca)])socket[_0x1bd64c(0x1ca)]['emit'](_0x1bd64c(0x2b3),config);}function updateBotName(_0x432ca0,_0x557018){const _0x4b5bb5=_0x13c19a;dbConfig[_0x4b5bb5(0x2cd)](_0x4b5bb5(0x2b3))[_0x4b5bb5(0x2ce)]({'botID':_0x432ca0})[_0x4b5bb5(0x1c5)]({'botname':_0x557018})[_0x4b5bb5(0x1e6)](),config=getConfiguration();if(socket[_0x4b5bb5(0x1ca)])socket[_0x4b5bb5(0x1ca)]['emit'](_0x4b5bb5(0x2b3),config);}function telegramError(_0x2a0871){const _0x358c7d=_0x13c19a;console[_0x358c7d(0x25b)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x1cba18){const _0x1bf598=_0x13c19a;if(_0x1cba18[_0x1bf598(0x242)]['username']!=settings[_0x1bf598(0x203)]&&'@'+_0x1cba18[_0x1bf598(0x242)][_0x1bf598(0x285)]!=settings[_0x1bf598(0x203)])return tgBot['sendMessage'](_0x1cba18[_0x1bf598(0x272)]['id'],_0x1bf598(0x260),{'parse_mode':_0x1bf598(0x1e9)})[_0x1bf598(0x29e)](_0x59726a=>{telegramError(_0x59726a);}),![];return!![];}function _0x5778(_0xc43eb,_0x7bdde8){const _0xad23a2=_0xb25a();return _0x5778=function(_0x793c82,_0x2f8139){_0x793c82=_0x793c82-0x1c2;let _0xb25a1e=_0xad23a2[_0x793c82];return _0xb25a1e;},_0x5778(_0xc43eb,_0x7bdde8);}async function initTelegram(){const _0x271750=_0x13c19a;if(tgBot)tgBot[_0x271750(0x205)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x271750(0x1df)],{'polling':!![]});let _0x406c19=_0x271750(0x2af);_0x406c19+='\x0a',_0x406c19+=_0x271750(0x207),_0x406c19+=_0x271750(0x287),_0x406c19+=_0x271750(0x2dc),_0x406c19+=_0x271750(0x212),_0x406c19+=_0x271750(0x25f),_0x406c19+='/help\x20-\x20show\x20avaiable\x20commands\x0a';let _0x3f3b52=_0x271750(0x24c);_0x3f3b52+='\x0a',_0x3f3b52+=_0x406c19,tgBot['onText'](/\/start/,_0x16c123=>{const _0x33297f=_0x271750;if(!validateTelegram(_0x16c123))return;if(settings['telegramChatId']!=_0x16c123[_0x33297f(0x272)]['id'])updateSetting(_0x33297f(0x288),_0x16c123['chat']['id']);updateSetting(_0x33297f(0x210),!![]),tgBot[_0x33297f(0x230)](_0x16c123[_0x33297f(0x272)]['id'],_0x3f3b52)[_0x33297f(0x29e)](_0x125f0a=>{telegramError(_0x125f0a);});}),tgBot[_0x271750(0x248)](/\/enable/,_0x2fbf24=>{const _0x5c7541=_0x271750;if(!validateTelegram(_0x2fbf24))return;if(settings[_0x5c7541(0x288)]!=_0x2fbf24[_0x5c7541(0x272)]['id'])updateSetting(_0x5c7541(0x288),_0x2fbf24[_0x5c7541(0x272)]['id']);updateSetting(_0x5c7541(0x210),!![]),tgBot[_0x5c7541(0x230)](_0x2fbf24[_0x5c7541(0x272)]['id'],'Notifications\x20enabled')[_0x5c7541(0x29e)](_0x2cab88=>{telegramError(_0x2cab88);});}),tgBot['onText'](/\/config/,async _0x326a14=>{const _0x53b8eb=_0x271750;if(!validateTelegram(_0x326a14))return;tgBot['removeListener'](_0x53b8eb(0x233)),tgBot[_0x53b8eb(0x230)](_0x326a14[_0x53b8eb(0x272)]['id'],_0x53b8eb(0x1de),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x53b8eb(0x256)},{'text':_0x53b8eb(0x26d),'callback_data':_0x53b8eb(0x2cf)},{'text':_0x53b8eb(0x293),'callback_data':_0x53b8eb(0x1e5)}]]}})[_0x53b8eb(0x29e)](_0x2fea15=>{telegramError(_0x2fea15);}),tgBot['on']('callback_query',async _0x4ed634=>{const _0x4ca1c6=_0x53b8eb,_0x340913=_0x4ed634[_0x4ca1c6(0x25c)],_0x43ad99=_0x4ed634[_0x4ca1c6(0x200)];tgBot[_0x4ca1c6(0x27b)](_0x4ed634['id'])[_0x4ca1c6(0x25a)](async()=>{const _0x34dcb7=_0x4ca1c6;_0x340913=='orders'&&(updateSetting('telegramEvents',_0x34dcb7(0x256)),updateSetting(_0x34dcb7(0x210),!![]),await tgBot[_0x34dcb7(0x230)](_0x43ad99[_0x34dcb7(0x272)]['id'],_0x34dcb7(0x1c8))['catch'](_0x16d3f7=>{telegramError(_0x16d3f7);}));_0x340913==_0x34dcb7(0x2cf)&&(updateSetting(_0x34dcb7(0x297),_0x34dcb7(0x2cf)),updateSetting(_0x34dcb7(0x210),!![]),await tgBot[_0x34dcb7(0x230)](_0x43ad99[_0x34dcb7(0x272)]['id'],_0x34dcb7(0x2b8))[_0x34dcb7(0x29e)](_0x756a3e=>{telegramError(_0x756a3e);}));_0x340913==_0x34dcb7(0x1e5)&&(updateSetting(_0x34dcb7(0x297),_0x34dcb7(0x1e5)),updateSetting(_0x34dcb7(0x210),!![]),await tgBot[_0x34dcb7(0x230)](_0x43ad99[_0x34dcb7(0x272)]['id'],_0x34dcb7(0x251))[_0x34dcb7(0x29e)](_0x17e53e=>{telegramError(_0x17e53e);}));if(!settings[_0x34dcb7(0x288)])tgBot[_0x34dcb7(0x230)](_0x43ad99['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x2a2737=>{telegramError(_0x2a2737);});}),tgBot['removeListener'](_0x4ca1c6(0x233));});}),tgBot['onText'](/\/status/,_0x5ec129=>{const _0x4934eb=_0x271750;if(!validateTelegram(_0x5ec129))return;let _0x2a5e47='*Balance\x20Bot\x20status:*\x0a';config[_0x4934eb(0x241)](_0x2a9123=>{const _0x20355d=_0x4934eb;_0x2a5e47+=_0x20355d(0x280)+_0x2a9123[_0x20355d(0x1f5)]+_0x20355d(0x283)+_0x2a9123[_0x20355d(0x261)]+':\x20'+_0x2a9123[_0x20355d(0x1fa)]+'\x20/\x20'+_0x2a9123[_0x20355d(0x2a9)]+'\x0a';}),_0x2a5e47+='\x0a',_0x2a5e47+=_0x4934eb(0x2a0),_0x2a5e47+=!settings[_0x4934eb(0x210)]?_0x4934eb(0x24f):_0x4934eb(0x27d),_0x2a5e47+=settings[_0x4934eb(0x210)]?settings[_0x4934eb(0x297)]==_0x4934eb(0x1e5)?_0x4934eb(0x258):_0x4934eb(0x25e)+settings[_0x4934eb(0x297)]+_0x4934eb(0x2ae):'',tgBot[_0x4934eb(0x230)](_0x5ec129[_0x4934eb(0x272)]['id'],_0x2a5e47,{'parse_mode':_0x4934eb(0x1e9)})['catch'](_0x4e24b0=>{telegramError(_0x4e24b0);});}),tgBot[_0x271750(0x248)](/\/restart/,_0x25329a=>{const _0x4561f1=_0x271750;if(!validateTelegram(_0x25329a))return;tgBot[_0x4561f1(0x249)](_0x4561f1(0x233));const _0x58dec1=getEnabledBots();if(_0x58dec1['length']==0x0)tgBot[_0x4561f1(0x230)](_0x25329a[_0x4561f1(0x272)]['id'],'No\x20bots\x20enabled\x20right\x20now')[_0x4561f1(0x29e)](_0x33f29b=>{telegramError(_0x33f29b);});else{let _0xd9652a=[],_0x3aa007=[];const _0x17a827=_0x58dec1['length']%0x4==0x0||_0x58dec1['length']%0x4==0x3||_0x58dec1[_0x4561f1(0x2a6)]%0x3==0x1?0x4:0x3;let _0xa45b94=0x0;_0x58dec1[_0x4561f1(0x241)]((_0x59027e,_0x3df750)=>{const _0x268905=_0x4561f1;if(_0x3df750%_0x17a827==0x0)_0x3aa007=[];_0x3aa007[_0x268905(0x1ef)]({'text':_0x268905(0x280)+_0x59027e[_0x268905(0x1f5)],'callback_data':_0x59027e[_0x268905(0x1f5)]}),_0x3df750%_0x17a827==0x0&&(_0xd9652a[_0xa45b94]=_0x3aa007,_0xa45b94++);}),tgBot[_0x4561f1(0x230)](_0x25329a['chat']['id'],_0x4561f1(0x1fe),{'reply_markup':{'inline_keyboard':_0xd9652a}})[_0x4561f1(0x29e)](_0xee76c5=>{telegramError(_0xee76c5);}),tgBot['on']('callback_query',async _0x45ff1b=>{const _0x425286=_0x4561f1,_0x346e4c=_0x45ff1b[_0x425286(0x25c)],_0x16ea51=_0x45ff1b[_0x425286(0x200)];tgBot[_0x425286(0x27b)](_0x45ff1b['id'])['then'](async()=>{const _0x15ff32=_0x425286;if(settings[_0x15ff32(0x297)]==_0x15ff32(0x256))tgBot[_0x15ff32(0x230)](_0x16ea51[_0x15ff32(0x272)]['id'],_0x15ff32(0x267)+_0x346e4c)[_0x15ff32(0x29e)](_0x3187c2=>{telegramError(_0x3187c2);});stopBot(_0x346e4c);}),tgBot[_0x425286(0x249)](_0x425286(0x233));});}}),tgBot[_0x271750(0x248)](/\/disable/,_0xb8612a=>{const _0x592635=_0x271750;if(!validateTelegram(_0xb8612a))return;tgBot[_0x592635(0x230)](_0xb8612a[_0x592635(0x272)]['id'],'Notifications\x20disabled')[_0x592635(0x29e)](_0x162e34=>{telegramError(_0x162e34);}),updateSetting(_0x592635(0x210),![]);}),tgBot[_0x271750(0x248)](/\/help/,_0x3b6f2d=>{const _0x5817fb=_0x271750;if(!validateTelegram(_0x3b6f2d))return;tgBot[_0x5817fb(0x230)](_0x3b6f2d[_0x5817fb(0x272)]['id'],_0x406c19)[_0x5817fb(0x29e)](_0x5082a7=>{telegramError(_0x5082a7);});}),tgBot['on'](_0x271750(0x271),_0x4781b1=>{const _0x1f8dff=_0x271750;if(_0x4781b1[_0x1f8dff(0x27c)]()[_0x1f8dff(0x1db)]('404\x20Not\x20Found')){logging('Invalid\x20Telegram\x20token'),tgBot[_0x1f8dff(0x205)](),tgBot=null;if(socket[_0x1f8dff(0x1ca)])socket[_0x1f8dff(0x1ca)]['emit'](_0x1f8dff(0x295),_0x1f8dff(0x215));}}),process['once'](_0x271750(0x214),()=>{const _0x395407=_0x271750;if(tgBot)tgBot[_0x395407(0x205)]();process[_0x395407(0x22a)](0x1);}),process['once'](_0x271750(0x23c),()=>{const _0x4370ec=_0x271750;if(tgBot)tgBot[_0x4370ec(0x205)]();process[_0x4370ec(0x22a)](0x1);});}}function disableTelegram(){const _0x2774aa=_0x13c19a;tgBot&&(tgBot[_0x2774aa(0x205)](),tgBot=null);}function sendTelegram(_0x2ae642,_0x14d1f3){const _0x29e1fc=_0x13c19a;if(settings[_0x29e1fc(0x210)]){if(settings[_0x29e1fc(0x297)]=='all'||(_0x14d1f3[_0x29e1fc(0x25d)]==_0x29e1fc(0x2d7)||_0x14d1f3[_0x29e1fc(0x25d)]==_0x29e1fc(0x2a1))&&settings[_0x29e1fc(0x297)]=='alerts'||_0x14d1f3[_0x29e1fc(0x25d)]=='order'&&settings[_0x29e1fc(0x297)]==_0x29e1fc(0x256)){if(tgBot&&settings[_0x29e1fc(0x288)])tgBot[_0x29e1fc(0x230)](settings[_0x29e1fc(0x288)],'Bot\x20'+_0x2ae642+_0x29e1fc(0x269)+_0x14d1f3[_0x29e1fc(0x1e8)])[_0x29e1fc(0x29e)](_0x3c03fe=>{telegramError(_0x3c03fe);});}}}function temporaryAccess2FA(_0x10de83){const _0x154cff=_0x13c19a;tgBot&&settings['telegramChatId']&&(tgBot[_0x154cff(0x249)](_0x154cff(0x233)),tgBot['sendMessage'](settings[_0x154cff(0x288)],_0x154cff(0x1d4)+normalizeIP(_0x10de83)[_0x154cff(0x26b)]+_0x154cff(0x202),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x154cff(0x2b1),'callback_data':'5'},{'text':_0x154cff(0x1e4),'callback_data':'15'},{'text':_0x154cff(0x2b0),'callback_data':'30'},{'text':'reject','callback_data':_0x154cff(0x274)}]]}})['catch'](_0x2cc764=>{telegramError(_0x2cc764);}),tgBot['on'](_0x154cff(0x233),async _0xca989d=>{const _0x549e9a=_0x154cff,_0x63da6f=_0xca989d['data'],_0x348d34=_0xca989d[_0x549e9a(0x200)];tgBot[_0x549e9a(0x27b)](_0xca989d['id'])['then'](async()=>{const _0x3cc807=_0x549e9a;if(_0x63da6f!='reject'){telegramIpApproval={'clientip':_0x10de83,'timestamp':new Date()['getTime'](),'expiry':_0x63da6f},await tgBot[_0x3cc807(0x230)](_0x348d34[_0x3cc807(0x272)]['id'],_0x3cc807(0x22f)+_0x63da6f+_0x3cc807(0x1d1),{'parse_mode':_0x3cc807(0x1e9)})[_0x3cc807(0x29e)](_0x3cb555=>{telegramError(_0x3cb555);});for(let _0x4851cf in socket){socket[_0x4851cf][_0x3cc807(0x281)]('status',{'access':{'allow':![],'reason':_0x3cc807(0x2c7),'token':null}});}}else await tgBot[_0x3cc807(0x230)](_0x348d34['chat']['id'],_0x3cc807(0x1ec))[_0x3cc807(0x29e)](_0x49d408=>{telegramError(_0x49d408);});}),tgBot[_0x549e9a(0x249)](_0x549e9a(0x233));}));}function loginAccess2FA(_0x1639cf){const _0x5df953=_0x13c19a;tgBot&&settings[_0x5df953(0x288)]&&(tgBot[_0x5df953(0x249)](_0x5df953(0x233)),tgBot['sendMessage'](settings[_0x5df953(0x288)],'Allow\x20login\x20from\x20IP\x20address\x20*'+normalizeIP(_0x1639cf)[_0x5df953(0x26b)]+_0x5df953(0x202),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x5df953(0x28e),'callback_data':loginExpiry},{'text':_0x5df953(0x274),'callback_data':'reject'}]]}})[_0x5df953(0x29e)](_0x4eb89d=>{telegramError(_0x4eb89d);}),tgBot['on']('callback_query',async _0x3e7872=>{const _0x22b963=_0x5df953,_0x503cda=_0x3e7872[_0x22b963(0x25c)],_0x3ba910=_0x3e7872[_0x22b963(0x200)];tgBot[_0x22b963(0x27b)](_0x3e7872['id'])['then'](async()=>{const _0x3776c9=_0x22b963;if(_0x503cda!='reject'){telegram2FaApproval={'clientip':_0x1639cf,'timestamp':new Date()[_0x3776c9(0x250)](),'expiry':_0x503cda},await tgBot['sendMessage'](_0x3ba910['chat']['id'],'Login\x20accepted',{'parse_mode':_0x3776c9(0x1e9)})[_0x3776c9(0x29e)](_0x3feba6=>{telegramError(_0x3feba6);});for(let _0x2070d8 in socket){socket[_0x2070d8][_0x3776c9(0x281)](_0x3776c9(0x1fa),{'access':{'allow':![],'reason':_0x3776c9(0x2c7),'token':null}});}}else await tgBot[_0x3776c9(0x230)](_0x3ba910[_0x3776c9(0x272)]['id'],'Login\x20rejected')[_0x3776c9(0x29e)](_0x400caa=>{telegramError(_0x400caa);});}),tgBot['removeListener'](_0x22b963(0x233));}));}function getConfiguration(){const _0x2396db=_0x13c19a;return dbConfig[_0x2396db(0x2cd)](_0x2396db(0x2b3))['sortBy'](_0x2396db(0x1f5))[_0x2396db(0x1f9)]()||[];}function getEnabledBots(){const _0x597094=_0x13c19a;return dbConfig[_0x597094(0x2cd)](_0x597094(0x2b3))[_0x597094(0x2a3)](_0x597094(0x1f5))[_0x597094(0x1ed)]({'status':_0x597094(0x22b)})[_0x597094(0x1f9)]()||[];}function getSettings(){const _0x1aaa54=_0x13c19a;return dbSettings[_0x1aaa54(0x2cd)](_0x1aaa54(0x28d))['value']()||{'timeshift':0x0};}function getSecure(){const _0x4a57ae=_0x13c19a;return dbSecure[_0x4a57ae(0x2cd)]('secure')[_0x4a57ae(0x1f9)]()||{};}function getBlacklist(){const _0x38cbdc=_0x13c19a;return dbSecure[_0x38cbdc(0x2cd)](_0x38cbdc(0x2c4))['value']()||[];}function broadcastToBots(_0x63bb56,_0x41c837){const _0x335ad4=_0x13c19a;config[_0x335ad4(0x241)](_0x5b5b5b=>{const _0x153669=_0x335ad4;if(_0x5b5b5b['status']==_0x153669(0x22b)&&_0x5b5b5b[_0x153669(0x2a9)]==_0x153669(0x1cc)){if(pid[_0x5b5b5b[_0x153669(0x1f5)]])pid[_0x5b5b5b['botID']][_0x153669(0x20c)]({[_0x63bb56]:_0x41c837});}});}function storeSettings(_0x4fccd7,_0x2f92ca=![]){const _0x120d3c=_0x13c19a;_0x4fccd7={...settings,..._0x4fccd7};if(_0x2f92ca&&_0x4fccd7[_0x120d3c(0x2c5)]!=_0x120d3c(0x2b2)&&_0x4fccd7[_0x120d3c(0x2c5)]!=''){const _0x2c434c=crypt[_0x120d3c(0x2c6)](secure[_0x120d3c(0x1ce)],_0x4fccd7[_0x120d3c(0x2c5)])['message'][_0x120d3c(0x286)]('@')[0x0],_0x2db538=bcrypt['hashSync'](_0x2c434c,saltRounds);_0x4fccd7={..._0x4fccd7,'bbPassword':_0x2db538};}if(_0x2f92ca&&_0x4fccd7[_0x120d3c(0x1df)]!='************'&&_0x4fccd7['telegramToken']!=''){const _0x248514=crypt[_0x120d3c(0x2c6)](secure[_0x120d3c(0x1ce)],_0x4fccd7['telegramToken'])['message'][_0x120d3c(0x286)]('@')[0x0];_0x4fccd7={..._0x4fccd7,'telegramToken':_0x248514};}const _0x4d6841=_0x4fccd7[_0x120d3c(0x1df)]!=_0x120d3c(0x2b2)&&_0x4fccd7[_0x120d3c(0x1df)]!=settings[_0x120d3c(0x1df)]||_0x4fccd7[_0x120d3c(0x203)]!=settings[_0x120d3c(0x203)],_0x37a4d6=_0x4fccd7[_0x120d3c(0x1df)]==''||_0x4fccd7[_0x120d3c(0x203)]=='';if(_0x4d6841)_0x4fccd7[_0x120d3c(0x297)]=_0x120d3c(0x1e5);for(const [_0x2e198b,_0x76a79e]of Object['entries'](_0x4fccd7)){if(_0x2e198b==_0x120d3c(0x1df)&&_0x76a79e==_0x120d3c(0x2b2)){_0x4fccd7[_0x120d3c(0x1df)]=settings[_0x120d3c(0x1df)];continue;};if(_0x2e198b=='bbPassword'&&_0x76a79e=='************'){_0x4fccd7[_0x120d3c(0x2c5)]=settings['bbPassword'];continue;};dbSettings[_0x120d3c(0x20e)](_0x120d3c(0x2d9)+_0x2e198b,_0x76a79e)[_0x120d3c(0x1e6)]();}settings=_0x4fccd7;if(socket[_0x120d3c(0x1ca)])socket['botmanager'][_0x120d3c(0x281)](_0x120d3c(0x28d),cleanSettings());broadcastToBots('timeshift',settings[_0x120d3c(0x239)]);if(_0x4d6841&&!_0x37a4d6)initTelegram();if(_0x4d6841&&_0x37a4d6)disableTelegram();for(let _0x2e4603 in socket){setAccess(_0x2e4603);}}function updateSetting(_0xc5cb6e,_0xecda23){const _0x30c49d=_0x13c19a;dbSettings[_0x30c49d(0x20e)](_0x30c49d(0x2d9)+_0xc5cb6e,_0xecda23)[_0x30c49d(0x1e6)](),settings=getSettings();if(socket[_0x30c49d(0x1ca)])socket[_0x30c49d(0x1ca)][_0x30c49d(0x281)](_0x30c49d(0x28d),cleanSettings());}function storeSecure(_0x5807fa){const _0x308b39=_0x13c19a;dbSecure[_0x308b39(0x2cd)]('secure')[_0x308b39(0x1ef)](_0x5807fa)[_0x308b39(0x1e6)](),secure=_0x5807fa;}function addBlacklist(){const _0x4ea275=_0x13c19a;cleanBlacklist();let _0x3f55ee;telegramIpApproval?_0x3f55ee=Math['max'](telegramIpApproval[_0x4ea275(0x2ad)],loginExpiry):_0x3f55ee=loginExpiry,dbSecure[_0x4ea275(0x2cd)](_0x4ea275(0x2c4))['push']({'expiry':new Date()[_0x4ea275(0x250)]()+_0x3f55ee*0x3c*0x3e8,'token':token})[_0x4ea275(0x1e6)](),blacklist=dbSecure[_0x4ea275(0x2cd)](_0x4ea275(0x2c4))['value']();}function cleanBlacklist(){const _0xb64e=_0x13c19a;let _0x32b627=dbSecure[_0xb64e(0x2cd)](_0xb64e(0x2c4))[_0xb64e(0x282)]()[_0xb64e(0x1f9)](),_0x3d26e8=new Date()[_0xb64e(0x250)]();_0x32b627[_0xb64e(0x241)](_0x290270=>{const _0x45a9a1=_0xb64e;_0x290270['expiry']<_0x3d26e8&&dbSecure[_0x45a9a1(0x2cd)]('blacklist')[_0x45a9a1(0x2bb)]({'expiry':_0x290270['expiry']})['write']();});}function initStates(){let _0x570dc2=getConfiguration();_0x570dc2['forEach'](_0x9843f6=>{const _0x5f1a22=_0x5778;_0x9843f6[_0x5f1a22(0x2a9)]=_0x5f1a22(0x21b);}),storeConfiguration(_0x570dc2);}function onKeys(){const _0x3ade3d=new RSA();return new Promise(_0x333c86=>{const _0x18e2a7=_0x5778;_0x3ade3d[_0x18e2a7(0x2c8)]()[_0x18e2a7(0x25a)](_0xc16cf9=>{_0x333c86(_0xc16cf9);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x42250c=_0x13c19a;let _0x4818c7=getConfiguration(),_0x1fb45d=![];_0x4818c7[_0x42250c(0x241)](_0x535f8c=>{const _0x73e3ce=_0x42250c;if(_0x535f8c[_0x73e3ce(0x1fa)]=='running')_0x535f8c['status']='enabled',_0x1fb45d=!![];else _0x535f8c['status']==_0x73e3ce(0x21b)&&(_0x535f8c[_0x73e3ce(0x1fa)]=_0x73e3ce(0x255),_0x1fb45d=!![]);});if(_0x1fb45d)storeConfiguration(_0x4818c7);let _0x5e845c=getSecure();if(!_0x5e845c['hasOwnProperty'](_0x42250c(0x2c3))){let _0xa971f6=await generateKeys();_0x5e845c[_0x42250c(0x2d1)]=_0xa971f6['publicKey'],_0x5e845c['privateKey']=_0xa971f6[_0x42250c(0x1ce)],_0x5e845c[_0x42250c(0x2c3)]=crypto['randomBytes'](0x20)[_0x42250c(0x27c)](_0x42250c(0x220));;storeSecure(_0x5e845c);}let _0x485238=getSettings();_0x1fb45d=![];!_0x485238['hasOwnProperty'](_0x42250c(0x28c))&&(_0x485238[_0x42250c(0x28c)]=![],_0x485238[_0x42250c(0x2bf)]='',_0x485238['bbPassword']='',_0x485238['f2aRequired']=![],_0x1fb45d=!![]);!_0x485238[_0x42250c(0x294)](_0x42250c(0x2b4))&&(_0x485238['whitelistEnabled']=![],_0x485238[_0x42250c(0x2d2)]=[],_0x485238['temporaryAccessAllowed']=![],_0x1fb45d=!![]);if(!_0x485238['hasOwnProperty'](_0x42250c(0x210))){if(_0x485238[_0x42250c(0x288)])_0x485238[_0x42250c(0x210)]=!![];else _0x485238['telegramEnabled']=![];_0x1fb45d=!![];}if(_0x1fb45d)storeSettings(_0x485238);}function storeConfiguration(_0x2babfc){const _0x1f1f22=_0x13c19a;dbConfig[_0x1f1f22(0x2cd)](_0x1f1f22(0x2b3))['remove']()['write'](),dbConfig[_0x1f1f22(0x2cd)]('bots')[_0x1f1f22(0x1ef)](..._0x2babfc)['write'](),config=_0x2babfc;}function resetPassword(){const _0x4ccdbd=_0x13c19a;tgBot&&settings['telegramChatId']&&(tgBot[_0x4ccdbd(0x249)](_0x4ccdbd(0x233)),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x4ccdbd(0x1e9),'reply_markup':{'inline_keyboard':[[{'text':_0x4ccdbd(0x23f),'callback_data':_0x4ccdbd(0x23f)},{'text':'no','callback_data':'no'}]]}})[_0x4ccdbd(0x29e)](_0x421e34=>{telegramError(_0x421e34);}),tgBot['on'](_0x4ccdbd(0x233),async _0x31a1c2=>{const _0x39ccbe=_0x4ccdbd,_0x1483bd=_0x31a1c2[_0x39ccbe(0x25c)],_0x48c999=_0x31a1c2[_0x39ccbe(0x200)];tgBot[_0x39ccbe(0x27b)](_0x31a1c2['id'])[_0x39ccbe(0x25a)](async()=>{const _0x2817ff=_0x39ccbe;if(_0x1483bd!='no'){const _0x20bd6a=0xf,_0x50a24d=_0x2817ff(0x2d4),_0x2c8d17=Array[_0x2817ff(0x242)](crypto[_0x2817ff(0x284)](new Uint32Array(_0x20bd6a)))[_0x2817ff(0x2d0)](_0x4238d1=>_0x50a24d[_0x4238d1%_0x50a24d[_0x2817ff(0x2a6)]])[_0x2817ff(0x275)](''),_0x14a692=bcrypt[_0x2817ff(0x273)](_0x2c8d17,saltRounds);storeSettings({'bbPassword':_0x14a692}),await tgBot[_0x2817ff(0x230)](_0x48c999[_0x2817ff(0x272)]['id'],_0x2817ff(0x201)+_0x2c8d17,{'parse_mode':_0x2817ff(0x1e9)})[_0x2817ff(0x29e)](_0x5d743d=>{telegramError(_0x5d743d);});}else await tgBot[_0x2817ff(0x230)](_0x48c999[_0x2817ff(0x272)]['id'],_0x2817ff(0x238))[_0x2817ff(0x29e)](_0xa50232=>{telegramError(_0xa50232);});}),tgBot[_0x39ccbe(0x249)](_0x39ccbe(0x233));}));}function logging(_0x5a37fd){const _0x470fd0=_0x13c19a;console[_0x470fd0(0x25b)](getTimeStamp()+_0x470fd0(0x264)+_0x5a37fd);if(tgBot&&settings[_0x470fd0(0x288)]&&settings[_0x470fd0(0x297)]!=_0x470fd0(0x256))tgBot[_0x470fd0(0x230)](settings[_0x470fd0(0x288)],_0x470fd0(0x29f)+_0x5a37fd)[_0x470fd0(0x29e)](_0x12c8f8=>{telegramError(_0x12c8f8);});}function getServerTime(){const _0x2d8c02=_0x13c19a,_0x16d418=new Date();return _0x16d418[_0x2d8c02(0x2b7)]()+'/'+(_0x16d418[_0x2d8c02(0x226)]()+0x1)[_0x2d8c02(0x27c)]()[_0x2d8c02(0x2ab)](0x2,'0')+'/'+_0x16d418[_0x2d8c02(0x1c7)]()[_0x2d8c02(0x27c)]()[_0x2d8c02(0x2ab)](0x2,'0')+'\x20'+_0x16d418[_0x2d8c02(0x237)]()['toString']()[_0x2d8c02(0x2ab)](0x2,'0')+':'+_0x16d418[_0x2d8c02(0x2c1)]()['toString']()[_0x2d8c02(0x2ab)](0x2,'0')+':'+_0x16d418[_0x2d8c02(0x227)]()[_0x2d8c02(0x27c)]()[_0x2d8c02(0x2ab)](0x2,'0');}function getTimeStamp(){const _0xd0c6fd=_0x13c19a,_0x15cd81=shiftedTime();return _0x15cd81[_0xd0c6fd(0x2b7)]()+'/'+(_0x15cd81['getMonth']()+0x1)[_0xd0c6fd(0x27c)]()[_0xd0c6fd(0x2ab)](0x2,'0')+'/'+_0x15cd81[_0xd0c6fd(0x1c7)]()[_0xd0c6fd(0x27c)]()[_0xd0c6fd(0x2ab)](0x2,'0')+'\x20'+_0x15cd81['getHours']()['toString']()[_0xd0c6fd(0x2ab)](0x2,'0')+':'+_0x15cd81[_0xd0c6fd(0x2c1)]()['toString']()['padStart'](0x2,'0')+':'+_0x15cd81[_0xd0c6fd(0x227)]()[_0xd0c6fd(0x27c)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x368f12=new Date();let _0x2c3a04=_0x368f12;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x2c3a04=fns['add'](_0x368f12,{'hours':settings['timeshift']});return _0x2c3a04;}function startAnalytics(){let _0xc62939=new Date()['getUTCHours']();_0xc62939==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x280984=_0x13c19a;analytics[_0x280984(0x24e)]({'title':_0x280984(0x2aa),'href':_0x280984(0x24a),'path':'/v'+serverversion});}function validateCredentials(_0x571afb){const _0x4d53da=_0x13c19a;if(_0x571afb['username']==settings[_0x4d53da(0x2bf)]&&bcrypt[_0x4d53da(0x217)](_0x571afb[_0x4d53da(0x29b)],settings[_0x4d53da(0x2c5)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x4d53da(0x26c),'token':null};else{const _0x7d6f74=generateLoginToken();return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x7d6f74};}}else return{'allow':![],'reason':_0x4d53da(0x279),'token':null};}function refreshToken(){const _0x440b6f=_0x13c19a,_0xabc3b5=generateLoginToken();return{'allow':!![],'reason':_0x440b6f(0x209),'token':_0xabc3b5};}function validateAccess(_0x1a34c8){const _0x3874ec=_0x13c19a;let _0x3fb5d7;const _0x5c5466=_0x2d9689=>{const _0x1df2c5=_0x5778;if(settings[_0x1df2c5(0x28c)]){if(settings[_0x1df2c5(0x23a)]){if(telegram2FaApproved()){const _0x48e401=generateLoginToken();return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x48e401};}else return{'allow':![],'reason':_0x1df2c5(0x26c),'token':null};}else return _0x3fb5d7=validToken(_0x2d9689),_0x3fb5d7['hasOwnProperty'](_0x1df2c5(0x2a1))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x2d9689}:{'allow':![],'reason':_0x1df2c5(0x26e),'token':null};}else return{'allow':!![],'reason':_0x1df2c5(0x265),'token':null};};if(settings[_0x3874ec(0x2b4)]){let _0xe4152d=[...settings[_0x3874ec(0x2d2)],'::1',_0x3874ec(0x231),_0x3874ec(0x2b6)];if(_0xe4152d[_0x3874ec(0x1db)](externalip))return _0x5c5466(_0x1a34c8);else{_0x3fb5d7=validToken(_0x1a34c8);if(_0x3fb5d7['hasOwnProperty'](_0x3874ec(0x2a1)))return _0x5c5466(_0x1a34c8);else{if(telegramIpApproved()){const _0x57c3c3=generateToken();return _0x3fb5d7=_0x5c5466(_0x1a34c8),_0x3fb5d7[_0x3874ec(0x20a)]?{'allow':!![],'reason':_0x3874ec(0x20b),'token':_0x57c3c3}:_0x3fb5d7;}else return settings[_0x3874ec(0x1e3)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x3874ec(0x243),'token':null};}}}else return _0x5c5466(_0x1a34c8);}function timelyDecrypt(_0x3309b0,_0x27019c=!![]){const _0x26948=_0x13c19a;if(_0x3309b0)try{const _0x454c74=crypt[_0x26948(0x2c6)](secure[_0x26948(0x1ce)],_0x3309b0)['message'],_0x1b8529=_0x454c74[_0x26948(0x286)]('@')[0x0],_0x55ea58=_0x454c74[_0x26948(0x286)]('@')[0x1],_0x5f257c=new Date()[_0x26948(0x250)]();if(_0x27019c){if(_0x5f257c-_0x55ea58<maxSecretAge*0x3e8)return _0x1b8529;else return![];}else return _0x1b8529;}catch{return![];}else return![];}const validToken=_0x527605=>{const _0xcd9db3=_0x13c19a;if(!_0x527605)return{'error':_0xcd9db3(0x204)};for(let _0x4214 of blacklist){if(_0x4214['token']==_0x527605)return{'error':_0xcd9db3(0x1f3)};}let _0x5ed5bb;try{_0x5ed5bb=jwt['verify'](_0x527605,secure['secret']+uuid);}catch{return{'error':_0xcd9db3(0x27f)};}if(!_0x5ed5bb['hasOwnProperty'](_0xcd9db3(0x29a))&&!_0x5ed5bb['hasOwnProperty']('username')||!_0x5ed5bb[_0xcd9db3(0x294)]('exp'))return{'error':_0xcd9db3(0x240)};if(!_0x5ed5bb[_0xcd9db3(0x294)]('username')&&_0x5ed5bb['hasOwnProperty'](_0xcd9db3(0x29a))){const {clientip:_0x578c90}=_0x5ed5bb;return externalip==_0x578c90?{'success':'User\x20has\x20been\x20validated'}:{'error':_0xcd9db3(0x1d7)};}else{if(_0x5ed5bb[_0xcd9db3(0x294)](_0xcd9db3(0x285))&&_0x5ed5bb[_0xcd9db3(0x294)](_0xcd9db3(0x29a))){const {username:_0x2df72c,clientip:_0x4e3dad}=_0x5ed5bb;return settings[_0xcd9db3(0x2bf)]==_0x2df72c&&externalip==_0x4e3dad?{'success':_0xcd9db3(0x216)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=()=>{const _0x5976ff=_0x13c19a;if(uuid)return jwt[_0x5976ff(0x224)]({'username':settings[_0x5976ff(0x2bf)],'clientip':externalip},secure[_0x5976ff(0x2c3)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x353292=_0x13c19a;if(uuid)return jwt[_0x353292(0x224)]({'clientip':externalip},secure[_0x353292(0x2c3)]+uuid,{'expiresIn':telegramIpApproval['expiry']*0x3c});else return![];},telegramIpApproved=()=>{const _0x574621=_0x13c19a;let _0x4f65c8=![];return telegramIpApproval&&telegramIpApproval[_0x574621(0x2ad)]!=_0x574621(0x274)&&(_0x4f65c8=telegramIpApproval['clientip']==externalip&&new Date()['getTime']()-telegramIpApproval[_0x574621(0x1f4)]<telegramIpApproval[_0x574621(0x2ad)]*0x3c*0x3e8),_0x4f65c8;},telegram2FaApproved=()=>{const _0x35e7a5=_0x13c19a;let _0x33bd58=![];return telegram2FaApproval&&telegram2FaApproval[_0x35e7a5(0x2ad)]!=_0x35e7a5(0x274)&&(_0x33bd58=telegram2FaApproval[_0x35e7a5(0x29a)]==externalip&&new Date()[_0x35e7a5(0x250)]()-telegram2FaApproval['timestamp']<telegram2FaApproval[_0x35e7a5(0x2ad)]*0x3c*0x3e8),_0x33bd58;},normalizeIP=_0x48716d=>{const _0x1bab50=_0x13c19a;let _0x526aab=null,_0x547a1d=null;if(ipaddr[_0x1bab50(0x26f)](_0x48716d)){const _0x11fede=ipaddr['parse'](_0x48716d);_0x11fede['kind']()===_0x1bab50(0x27a)?(_0x11fede[_0x1bab50(0x27e)]()&&(_0x526aab=_0x11fede[_0x1bab50(0x290)]()[_0x1bab50(0x27c)]()),_0x547a1d=_0x11fede[_0x1bab50(0x27c)]()):(_0x526aab=_0x11fede[_0x1bab50(0x27c)](),_0x547a1d=_0x11fede[_0x1bab50(0x2a4)]()[_0x1bab50(0x27c)]());}return{'show':_0x526aab?_0x526aab:_0x547a1d,'store':_0x547a1d};};