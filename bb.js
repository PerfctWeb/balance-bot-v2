const _0x3bbeaa=_0x47a6;(function(_0x5da569,_0x59bde7){const _0x2b470f=_0x47a6,_0x2eabe7=_0x5da569();while(!![]){try{const _0x374e32=parseInt(_0x2b470f(0x10d))/0x1*(parseInt(_0x2b470f(0x1dc))/0x2)+-parseInt(_0x2b470f(0x1d0))/0x3*(parseInt(_0x2b470f(0x1d4))/0x4)+parseInt(_0x2b470f(0x202))/0x5*(parseInt(_0x2b470f(0x210))/0x6)+-parseInt(_0x2b470f(0x1c4))/0x7*(-parseInt(_0x2b470f(0x143))/0x8)+-parseInt(_0x2b470f(0x1d9))/0x9+parseInt(_0x2b470f(0x178))/0xa*(-parseInt(_0x2b470f(0x207))/0xb)+parseInt(_0x2b470f(0x155))/0xc;if(_0x374e32===_0x59bde7)break;else _0x2eabe7['push'](_0x2eabe7['shift']());}catch(_0x49d1e6){_0x2eabe7['push'](_0x2eabe7['shift']());}}}(_0x22db,0x67868));const _0x240379=function(){let _0x5b41a5=!![];return function(_0x20fed0,_0x51de71){const _0x4dd04c=_0x5b41a5?function(){const _0x26634b=_0x47a6;if(_0x51de71){const _0x3e9b3e=_0x51de71[_0x26634b(0x160)](_0x20fed0,arguments);return _0x51de71=null,_0x3e9b3e;}}:function(){};return _0x5b41a5=![],_0x4dd04c;};}(),_0x47852f=_0x240379(this,function(){const _0x1ef6c5=_0x47a6;return _0x47852f['toString']()[_0x1ef6c5(0x221)](_0x1ef6c5(0x184))[_0x1ef6c5(0x200)]()[_0x1ef6c5(0x21b)](_0x47852f)[_0x1ef6c5(0x221)]('(((.+)+)+)+$');});_0x47852f();'use strict';process[_0x3bbeaa(0x1d3)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x3bbeaa(0x17e)),FileSync=require(_0x3bbeaa(0x1af)),fs=require('fs'),fns=require(_0x3bbeaa(0x1ef)),low=require(_0x3bbeaa(0x188)),path=require(_0x3bbeaa(0x135)),crypto=require(_0x3bbeaa(0x1b5)),Crypt=require(_0x3bbeaa(0x176))['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x3bbeaa(0x186)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x3bbeaa(0x136))[_0x3bbeaa(0x110)],googleAnalytics=require(_0x3bbeaa(0x163))[_0x3bbeaa(0x110)],ipaddr=require(_0x3bbeaa(0x14d));let bbpath='bb/';const botfile=_0x3bbeaa(0x1f8),configfile=_0x3bbeaa(0x157),settingsfile=_0x3bbeaa(0x149),securefile='bb-secure.json';!fs[_0x3bbeaa(0x18b)](bbpath+botfile)&&(bbpath='');const configpath=bbpath+_0x3bbeaa(0x124);!fs[_0x3bbeaa(0x18b)](configpath)&&fs[_0x3bbeaa(0x201)](configpath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3bbeaa(0x118)]({'bots':[]})[_0x3bbeaa(0x1bd)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3bbeaa(0x118)]({'settings':{'timeshift':0x0}})[_0x3bbeaa(0x1bd)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x3bbeaa(0x1bd)]();let crypt=new Crypt({'md':_0x3bbeaa(0x14f),'rsaStandard':_0x3bbeaa(0x20b)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+_0x3bbeaa(0x203))['version'],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require('express'),app=express(),http=require(_0x3bbeaa(0x195))['createServer'](app);app[_0x3bbeaa(0x227)](express['static'](path['join'](__dirname,bbpath,_0x3bbeaa(0x206)))),app[_0x3bbeaa(0x227)](express[_0x3bbeaa(0x16c)](path['join'](__dirname,bbpath,'build'))),app[_0x3bbeaa(0x148)]('/',function(_0x6074e4,_0x556fc3){const _0x10a5f3=_0x3bbeaa;_0x556fc3[_0x10a5f3(0x1fa)](path['join'](__dirname,bbpath,_0x10a5f3(0x206),_0x10a5f3(0x120)));}),app[_0x3bbeaa(0x148)](_0x3bbeaa(0x161),function(_0x48e0b7,_0x3fc00e){const _0x1cb6a8=_0x3bbeaa;_0x3fc00e['sendFile'](path[_0x1cb6a8(0x1be)](__dirname,bbpath,_0x1cb6a8(0x112),'index.html'));}),app[_0x3bbeaa(0x148)](_0x3bbeaa(0x11d),(_0x334903,_0x51623e)=>{const _0x5ed66e=_0x3bbeaa;_0x51623e[_0x5ed66e(0x1fa)](path[_0x5ed66e(0x1be)](__dirname,bbpath,_0x5ed66e(0x112),'index.html'));}),app[_0x3bbeaa(0x148)](_0x3bbeaa(0x13e),(_0x270459,_0x43644b)=>{const _0x43abbd=_0x3bbeaa;_0x43644b[_0x43abbd(0x1fa)](path[_0x43abbd(0x1be)](__dirname,bbpath,_0x43abbd(0x112),_0x43abbd(0x120)));}),app['get']('/:bot/coins',(_0x1d4719,_0x223e7a)=>{const _0x5ba518=_0x3bbeaa;_0x223e7a[_0x5ba518(0x1fa)](path[_0x5ba518(0x1be)](__dirname,bbpath,_0x5ba518(0x112),_0x5ba518(0x120)));}),app[_0x3bbeaa(0x148)](_0x3bbeaa(0x14a),(_0x5c4b39,_0x2820bc)=>{const _0x143632=_0x3bbeaa;_0x2820bc[_0x143632(0x1fa)](path[_0x143632(0x1be)](__dirname,bbpath,_0x143632(0x112),_0x143632(0x120)));}),app[_0x3bbeaa(0x148)](_0x3bbeaa(0x21f),(_0x501f84,_0x11d54e)=>{const _0x5a81d7=_0x3bbeaa;_0x11d54e[_0x5a81d7(0x1fa)](path[_0x5a81d7(0x1be)](__dirname,bbpath,_0x5a81d7(0x112),_0x5a81d7(0x120)));}),app['get'](_0x3bbeaa(0x13a),(_0x5e7e4a,_0x50ff14)=>{const _0x44ff3b=_0x3bbeaa;_0x50ff14['sendFile'](path[_0x44ff3b(0x1be)](__dirname,bbpath,_0x44ff3b(0x112),_0x44ff3b(0x120)));}),http['listen'](PORT);const analytics=analyticsLib({'app':_0x3bbeaa(0x140),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x3bbeaa(0x222));let tgBot;if(settings[_0x3bbeaa(0x220)]&&settings['telegramToken']!=''&&settings[_0x3bbeaa(0x152)]&&settings[_0x3bbeaa(0x152)]!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function startServer(){const _0x2d2596=_0x3bbeaa;console['log'](''),console[_0x2d2596(0x127)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x2d2596(0x127)](_0x2d2596(0x1b7));if(config[_0x2d2596(0x20d)]!=0x0)config[_0x2d2596(0x1a4)](_0x507ed6=>{const _0x9686cb=_0x2d2596;if(_0x507ed6[_0x9686cb(0x1f2)]=='enabled'||_0x507ed6[_0x9686cb(0x1f2)]=='new')logging('starting\x20bot\x20|\x20Bot\x20'+_0x507ed6[_0x9686cb(0x18f)]+_0x9686cb(0x122)+_0x507ed6[_0x9686cb(0x1a8)]),startBot([_0x507ed6[_0x9686cb(0x18f)]],{'cwd':bbpath},function(_0x7a7378){if(_0x7a7378)logging(_0x7a7378);});else(_0x507ed6[_0x9686cb(0x1f2)]==_0x9686cb(0x213)||_0x507ed6['status']==_0x9686cb(0x14e))&&logging(_0x9686cb(0x1e3)+_0x507ed6[_0x9686cb(0x18f)]+_0x9686cb(0x122)+_0x507ed6[_0x9686cb(0x1a8)]);});else!newBot&&console[_0x2d2596(0x127)](_0x2d2596(0x19d));if(newBot)addBot();console[_0x2d2596(0x127)](_0x2d2596(0x1b7)),console[_0x2d2596(0x127)]('');}function startSocket(){const _0x33e5d7=_0x3bbeaa,_0x2ef902=require(_0x33e5d7(0x12a))(http,{});_0x2ef902['on'](_0x33e5d7(0x1b3),_0x45ab01=>{const _0x503973=_0x33e5d7;let _0x1de51a,_0x46bb1e,_0x357f20;const _0x334266=_0x45ab01['handshake'][_0x503973(0x1ab)][_0x503973(0x12f)],_0x5f5c36=_0x45ab01['handshake'][_0x503973(0x211)]['encryptedUuid'];if(!_0x5f5c36)_0x45ab01['emit'](_0x503973(0x1f2),{'publicKey':secure[_0x503973(0x1a1)]});else{uuid=timelyDecrypt(_0x45ab01[_0x503973(0x214)][_0x503973(0x211)][_0x503973(0x1e5)],![]),_0x46bb1e=_0x334266[_0x503973(0x191)](/bot[0-9]{3}/);if(_0x46bb1e)_0x357f20=_0x46bb1e[0x0][_0x503973(0x191)](/[0-9]{3}/);if(_0x357f20)_0x1de51a=_0x357f20[0x0];else _0x1de51a='botmanager';if(socket[_0x1de51a])socket[_0x1de51a][_0x503973(0x1f7)](!![]);socket[_0x1de51a]=_0x45ab01,setAccess(_0x1de51a);if(accessControl['allow']){if(_0x1de51a==_0x503973(0x1d5))initializeSocketBotManager();else initializeSocketBot(_0x1de51a);}if(!serverStatus[_0x1de51a])serverStatus[_0x1de51a]=_0x503973(0x158);socket[_0x1de51a]['on'](_0x503973(0x196),_0x5a2131=>{const _0x1c61e9=_0x503973,_0x2a69a5=timelyDecrypt(_0x5a2131[_0x1c61e9(0x1c3)]);if(_0x2a69a5){_0x5a2131={'username':_0x5a2131[_0x1c61e9(0x108)],'password':_0x2a69a5};let _0x5286fd=validateCredentials(_0x5a2131);if(_0x5286fd['allow']==![]&&_0x5286fd[_0x1c61e9(0x167)]==_0x1c61e9(0x14b))socket[_0x1de51a]['emit'](_0x1c61e9(0x1f2),{'access':_0x5286fd}),loginAccess2FA(externalip);else{if(_0x5286fd[_0x1c61e9(0x1dd)]==![]&&_0x5286fd[_0x1c61e9(0x167)]=='invalid\x20credentials')socket[_0x1de51a][_0x1c61e9(0x1f5)](_0x1c61e9(0x1f2),{'access':_0x5286fd});else{if(_0x5286fd['allow']&&_0x5286fd[_0x1c61e9(0x167)]=='login\x20token\x20generated'){token=_0x5286fd['token'];for(let _0x4df651 in socket){if(_0x4df651==_0x1c61e9(0x1d5))initializeSocketBotManager();else initializeSocketBot(_0x4df651);socket[_0x4df651][_0x1c61e9(0x1f5)]('status',{'status':serverStatus[_0x4df651]||'starting','serverversion':serverversion,'servertime':getServerTime(),'access':_0x5286fd,'externalip':externalip,'publicKey':secure[_0x1c61e9(0x1a1)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout(_0x1c61e9(0x196));}}}}else logging(_0x1c61e9(0x1fe));}),socket[_0x1de51a]['on'](_0x503973(0x174),()=>{resetPassword();}),socket[_0x1de51a]['on'](_0x503973(0x1f7),_0x3b5a08=>{let _0x5ae72f=[];for(let _0x202770 in socket){if(_0x202770!=_0x1de51a)_0x5ae72f[_0x202770]=socket[_0x202770];}socket=_0x5ae72f;});if(_0x1de51a!=_0x503973(0x1d5)&&config[_0x503973(0x1a6)]!=''){if(pid[_0x1de51a])pid[_0x1de51a][_0x503973(0x15a)]({'function':'initclient','args':null});}}});}function setAccess(_0x298d9b){const _0x4e2394=_0x3bbeaa;externalip=normalizeIP(socket[_0x298d9b]['conn'][_0x4e2394(0x1a0)])[_0x4e2394(0x16a)],accessControl=validateAccess(token),accessControl['token']&&accessControl[_0x4e2394(0x167)]==_0x4e2394(0x1cc)&&setSessionTimeout(_0x4e2394(0x179)),accessControl[_0x4e2394(0x1b2)]&&accessControl[_0x4e2394(0x167)]==_0x4e2394(0x17c)&&setSessionTimeout(_0x4e2394(0x196)),socket[_0x298d9b][_0x4e2394(0x1f5)](_0x4e2394(0x1f2),{'status':serverStatus[_0x298d9b]||_0x4e2394(0x141),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':accessControl[_0x4e2394(0x167)]=='login\x20required'||accessControl['reason']==_0x4e2394(0x14b)}),accessControl[_0x4e2394(0x1dd)]==![]&&accessControl[_0x4e2394(0x167)]=='2FA\x20required'&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x5498b0){const _0x3a1165=_0x3bbeaa;let _0x16ac01;if(_0x5498b0==_0x3a1165(0x196))_0x16ac01=loginExpiry*0x3c*0x3e8;else _0x16ac01=telegramIpApproval[_0x3a1165(0x166)]*0x3c*0x3e8-(new Date()[_0x3a1165(0x205)]()-telegramIpApproval['timestamp']);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x23633e=_0x3a1165;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x5db3f1=validateAccess(token);if(!(_0x5db3f1[_0x23633e(0x1dd)]&&_0x5db3f1[_0x23633e(0x167)]==_0x23633e(0x156)))for(let _0x2b71f0 in socket){socket[_0x2b71f0][_0x23633e(0x1f5)](_0x23633e(0x1f2),{'access':{'allow':![],'reason':_0x23633e(0x1de),'token':null}});}token=null;},_0x16ac01);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x194532=_0x47a6;let _0x356b81=refreshToken();for(let _0x1337e1 in socket){socket[_0x1337e1][_0x194532(0x1f5)](_0x194532(0x1f2),{'status':serverStatus[_0x1337e1]||_0x194532(0x141),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x356b81,'externalip':externalip,'publicKey':secure[_0x194532(0x1a1)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x823e18=_0x3bbeaa;socket['botmanager'][_0x823e18(0x1f5)](_0x823e18(0x192),config),socket['botmanager']['emit'](_0x823e18(0x15b),cleanSettings()),socket[_0x823e18(0x1d5)]['on']('add-bot',_0x18d73a=>{const _0x21c90b=_0x823e18;if(validateAccess(_0x18d73a)['allow'])addBot();else logging(_0x21c90b(0x11c));}),socket[_0x823e18(0x1d5)]['on'](_0x823e18(0x131),(_0x1e94f2,_0x514538)=>{const _0x2b06e4=_0x823e18;if(validateAccess(_0x514538)[_0x2b06e4(0x1dd)])toggleBot(_0x1e94f2[_0x2b06e4(0x18f)],_0x1e94f2[_0x2b06e4(0x1f2)],_0x1e94f2[_0x2b06e4(0x170)]);else logging(_0x2b06e4(0x147));}),socket[_0x823e18(0x1d5)]['on'](_0x823e18(0x1fc),(_0x5115fa,_0x3982ce)=>{const _0x3e6046=_0x823e18;if(validateAccess(_0x3982ce)[_0x3e6046(0x1dd)])deleteBot(_0x5115fa);else logging(_0x3e6046(0x209));}),socket[_0x823e18(0x1d5)]['on'](_0x823e18(0x134),(_0x2a7b70,_0x18da10)=>{const _0x1e0f42=_0x823e18;if(validateAccess(_0x18da10)[_0x1e0f42(0x1dd)])storeSettings(_0x2a7b70,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),socket[_0x823e18(0x1d5)]['on']('logout',_0x20554b=>{const _0x12e38c=_0x823e18;if(validateAccess(_0x20554b)[_0x12e38c(0x1dd)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x89ab39 in socket){socket[_0x89ab39][_0x12e38c(0x1f5)](_0x12e38c(0x1f2),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging(_0x12e38c(0x150));});}function initializeSocketBot(_0x411d5b){const _0x535084=_0x3bbeaa;socket[_0x411d5b]['on'](_0x535084(0x1c8),(_0x2b48b2,_0x48956d)=>{const _0x43cc7c=_0x535084;if(validateAccess(_0x48956d)[_0x43cc7c(0x1dd)]){if(pid[_0x411d5b])pid[_0x411d5b]['send']({'function':_0x43cc7c(0x20a),'args':_0x2b48b2});}else logging(_0x43cc7c(0x1ce));}),socket[_0x411d5b]['on'](_0x535084(0x169),(_0xe5bff,_0x3e87e7)=>{const _0x211ca6=_0x535084;if(validateAccess(_0x3e87e7)[_0x211ca6(0x1dd)]){if(pid[_0x411d5b])pid[_0x411d5b][_0x211ca6(0x15a)]({'function':_0x211ca6(0x132),'args':_0xe5bff});}else logging(_0x211ca6(0x21d));}),socket[_0x411d5b]['on']('store-configuration',(_0x567af2,_0x56049d)=>{const _0x3c504e=_0x535084;if(validateAccess(_0x56049d)['allow']){if(pid[_0x411d5b])pid[_0x411d5b][_0x3c504e(0x15a)]({'function':'storeConfiguration','args':_0x567af2});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),socket[_0x411d5b]['on']('store-headless',(_0x31b19c,_0x3793d5)=>{const _0x757022=_0x535084;if(validateAccess(_0x3793d5)[_0x757022(0x1dd)]){if(pid[_0x411d5b])pid[_0x411d5b][_0x757022(0x15a)]({'function':'storeHeadless','args':_0x31b19c});}else logging(_0x757022(0x1cd));}),socket[_0x411d5b]['on'](_0x535084(0x215),_0x10afe8=>{const _0xf86a0a=_0x535084;if(validateAccess(_0x10afe8)['allow']){if(pid[_0x411d5b])pid[_0x411d5b][_0xf86a0a(0x15a)]({'function':_0xf86a0a(0x139),'args':null});}else logging(_0xf86a0a(0x18a));}),socket[_0x411d5b]['on']('place-order',(_0x5a7066,_0x54ac29)=>{const _0x3cb270=_0x535084;if(validateAccess(_0x54ac29)[_0x3cb270(0x1dd)]){if(pid[_0x411d5b])pid[_0x411d5b][_0x3cb270(0x15a)]({'function':_0x3cb270(0x125),'args':_0x5a7066});}else logging(_0x3cb270(0x1a9));}),socket[_0x411d5b]['on'](_0x535084(0x11e),_0xd52979=>{const _0x14d826=_0x535084;if(validateAccess(_0xd52979)[_0x14d826(0x1dd)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x7e92e8 in socket){socket[_0x7e92e8][_0x14d826(0x1f5)]('status',{'access':{'allow':![],'reason':_0x14d826(0x162),'token':null}});}}else logging(_0x14d826(0x150));});}function removeSocketListeners(){const _0x53ed59=_0x3bbeaa;for(let _0x2d583d in socket){socket[_0x2d583d][_0x53ed59(0x226)]();}}function cleanSettings(){const _0x5ab7f0=_0x3bbeaa;let _0x2a738d=settings;return settings[_0x5ab7f0(0x220)]&&settings[_0x5ab7f0(0x220)]!=''&&(_0x2a738d={..._0x2a738d,'telegramToken':_0x5ab7f0(0x1b1)}),settings['bbPassword']&&settings[_0x5ab7f0(0x204)]!=''&&(_0x2a738d={..._0x2a738d,'bbPassword':_0x5ab7f0(0x1b1)}),_0x2a738d;}function startBot(_0x1f3453,_0xd248a9,_0x2bc956){const _0x176113=_0x3bbeaa;let _0x239ed9=![];const _0x399f58=_0x1f3453[0x0];_0xd248a9={..._0xd248a9,'stdio':[_0x176113(0x15f),_0x176113(0x15f),_0x176113(0x15f),'ipc']},pid[_0x399f58]=childProcess['fork'](botfile,_0x1f3453,_0xd248a9),pid[_0x399f58]['on'](_0x176113(0x117),_0x3504f4=>{const _0x44b908=_0x176113;switch(Object[_0x44b908(0x13d)](_0x3504f4)[0x0]){case _0x44b908(0x1a8):updateBotName(_0x399f58,_0x3504f4[_0x44b908(0x1a8)]);break;case'status':updateStatus(_0x399f58,_0x3504f4[_0x44b908(0x1f2)]);break;case _0x44b908(0x170):updateLive(_0x399f58,_0x3504f4[_0x44b908(0x170)]);break;case _0x44b908(0x1cf):updateLive(_0x399f58,_0x3504f4[_0x44b908(0x1cf)]);if(socket[_0x399f58])socket[_0x399f58]['emit'](_0x44b908(0x1f2),{'access':{'allow':![],'reason':_0x44b908(0x171),'token':null}});break;case _0x44b908(0x1db):sendTelegram(_0x399f58,_0x3504f4[_0x44b908(0x1db)]);break;case _0x44b908(0x11f):if(socket[_0x399f58])socket[_0x399f58][_0x44b908(0x1f5)](_0x3504f4[_0x44b908(0x11f)],_0x3504f4[_0x44b908(0x126)]);break;}}),pid[_0x399f58]['on'](_0x176113(0x1c7),function(_0x465bf0){if(_0x239ed9)return;_0x239ed9=!![],_0x2bc956(_0x465bf0);}),pid[_0x399f58]['on']('exit',function(_0x3eea77){const _0x236750=_0x176113;if(_0x239ed9)return;_0x239ed9=!![],_0x2bc956(null);const _0x2462c1=dbConfig['get'](_0x236750(0x192))[_0x236750(0x180)]({'botID':_0x399f58})[_0x236750(0x13c)]();_0x2462c1&&(_0x2462c1['status']=='enabled'||_0x2462c1[_0x236750(0x1f2)]==_0x236750(0x1e6))&&(updateLive(_0x399f58,_0x236750(0x138)),_0x3eea77!=0x4d&&(logging(_0x236750(0x11a)+_0x399f58),startBot([_0x399f58],{'cwd':bbpath},function(_0xf52efa){if(_0xf52efa)logging(_0xf52efa);})));});}function stopBot(_0x48bcf5){const _0x3eba76=_0x3bbeaa;if(socket[_0x48bcf5])socket[_0x48bcf5][_0x3eba76(0x1f7)](!![]);if(pid[_0x48bcf5])pid[_0x48bcf5]['kill']();}function addBot(){const _0x5ce0fa=_0x3bbeaa;let _0x26c047;for(let _0x2b92a7=0x1;_0x2b92a7<0x3e9;_0x2b92a7++){_0x26c047=_0x2b92a7['toString']()[_0x5ce0fa(0x18e)](0x3,'0');let _0x1210c5=config['find'](_0x2505ad=>_0x2505ad[_0x5ce0fa(0x18f)]==_0x26c047);if(!_0x1210c5)break;}if(_0x26c047===_0x5ce0fa(0x1e8)){logging(_0x5ce0fa(0x129));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x26c047),dbConfig[_0x5ce0fa(0x148)]('bots')['push']({'botID':_0x26c047,'botname':_0x5ce0fa(0x216)+_0x26c047,'status':_0x5ce0fa(0x1e6),'live':''})[_0x5ce0fa(0x1bd)](),startBot([_0x26c047],{'cwd':bbpath},function(_0x19dfa3){if(_0x19dfa3)logging(_0x19dfa3);}),config=getConfiguration();if(socket[_0x5ce0fa(0x1d5)])socket[_0x5ce0fa(0x1d5)]['emit'](_0x5ce0fa(0x192),config);}function deleteBot(_0x107df2){const _0x2fd401=_0x3bbeaa;if(socket[_0x107df2])socket[_0x107df2][_0x2fd401(0x1f7)](!![]);dbConfig['get'](_0x2fd401(0x192))['remove']({'botID':_0x107df2})['write'](),logging(_0x2fd401(0x19f)+_0x107df2),stopBot(_0x107df2);try{fs[_0x2fd401(0x1c2)](path[_0x2fd401(0x1be)](configpath,_0x2fd401(0x1b4)+_0x107df2+_0x2fd401(0x10e))),fs['unlinkSync'](path['join'](configpath,_0x2fd401(0x1b4)+_0x107df2+'-events.json')),fs[_0x2fd401(0x1c2)](path['join'](configpath,'bot-'+_0x107df2+_0x2fd401(0x159))),fs['unlinkSync'](path['join'](configpath,_0x2fd401(0x1b4)+_0x107df2+_0x2fd401(0x199)));}catch(_0x455d7c){if(_0x455d7c)logging(_0x2fd401(0x16d),_0x455d7c);}config=getConfiguration();if(socket[_0x2fd401(0x1d5)])socket['botmanager'][_0x2fd401(0x1f5)](_0x2fd401(0x192),config);}function toggleBot(_0x58d776,_0x37020e,_0x53b312){const _0x192667=_0x3bbeaa;dbConfig[_0x192667(0x148)]('bots')['find']({'botID':_0x58d776})['assign']({'status':_0x37020e})[_0x192667(0x109)]({'live':_0x53b312})[_0x192667(0x1bd)]();if(_0x37020e==_0x192667(0x1ee)||_0x37020e==_0x192667(0x1e6))logging('enabled\x20Bot\x20'+_0x58d776),startBot([_0x58d776],{'cwd':bbpath},function(_0x4e211a){if(_0x4e211a)logging(_0x4e211a);});else(_0x37020e=='disabled'||_0x37020e=='new-disabled')&&(logging(_0x192667(0x218)+_0x58d776),stopBot(_0x58d776));config=getConfiguration();if(socket[_0x192667(0x1d5)])socket[_0x192667(0x1d5)][_0x192667(0x1f5)](_0x192667(0x192),config);}function updateStatus(_0x374f70,_0xc8acc7){const _0x4c8467=_0x3bbeaa;dbConfig[_0x4c8467(0x148)](_0x4c8467(0x192))['find']({'botID':_0x374f70})['assign']({'status':_0xc8acc7})['write'](),config=getConfiguration();if(socket['botmanager'])socket[_0x4c8467(0x1d5)][_0x4c8467(0x1f5)](_0x4c8467(0x192),config);}function updateLive(_0x806cdf,_0x120452){const _0x41bd2d=_0x3bbeaa;dbConfig[_0x41bd2d(0x148)](_0x41bd2d(0x192))['find']({'botID':_0x806cdf})[_0x41bd2d(0x109)]({'live':_0x120452})['write'](),config=getConfiguration();if(socket['botmanager'])socket[_0x41bd2d(0x1d5)][_0x41bd2d(0x1f5)](_0x41bd2d(0x192),config);}function updateBotName(_0x157932,_0x2c950f){const _0x5f26a0=_0x3bbeaa;dbConfig[_0x5f26a0(0x148)](_0x5f26a0(0x192))[_0x5f26a0(0x180)]({'botID':_0x157932})[_0x5f26a0(0x109)]({'botname':_0x2c950f})[_0x5f26a0(0x1bd)](),config=getConfiguration();if(socket[_0x5f26a0(0x1d5)])socket['botmanager'][_0x5f26a0(0x1f5)]('bots',config);}function telegramError(_0x51a253){const _0x2803fd=_0x3bbeaa;console[_0x2803fd(0x127)](getTimeStamp()+_0x2803fd(0x219));}function validateTelegram(_0x43b46f){const _0x23d4d9=_0x3bbeaa;if(_0x43b46f['from'][_0x23d4d9(0x108)]!=settings[_0x23d4d9(0x152)]&&'@'+_0x43b46f['from']['username']!=settings[_0x23d4d9(0x152)])return tgBot[_0x23d4d9(0x111)](_0x43b46f['chat']['id'],_0x23d4d9(0x20e),{'parse_mode':_0x23d4d9(0x182)})[_0x23d4d9(0x21a)](_0x2917f9=>{telegramError(_0x2917f9);}),![];return!![];}async function initTelegram(){const _0x2f1f26=_0x3bbeaa;if(tgBot)tgBot[_0x2f1f26(0x1da)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2f1f26(0x220)],{'polling':!![]});let _0x30e573=_0x2f1f26(0x21c);_0x30e573+='\x0a',_0x30e573+='/enable\x20-\x20enable\x20notifications\x0a',_0x30e573+=_0x2f1f26(0x10a),_0x30e573+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x30e573+=_0x2f1f26(0x19a),_0x30e573+=_0x2f1f26(0x20f),_0x30e573+=_0x2f1f26(0x15c);let _0xc8edae=_0x2f1f26(0x1f4);_0xc8edae+='\x0a',_0xc8edae+=_0x30e573,tgBot[_0x2f1f26(0x1cb)](/\/start/,_0xbac6=>{const _0x332b5b=_0x2f1f26;if(!validateTelegram(_0xbac6))return;if(settings['telegramChatId']!=_0xbac6['chat']['id'])updateSetting('telegramChatId',_0xbac6['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x332b5b(0x111)](_0xbac6[_0x332b5b(0x1c1)]['id'],_0xc8edae)['catch'](_0x4766ab=>{telegramError(_0x4766ab);});}),tgBot[_0x2f1f26(0x1cb)](/\/enable/,_0x1ab27c=>{const _0x2e5cc5=_0x2f1f26;if(!validateTelegram(_0x1ab27c))return;if(settings[_0x2e5cc5(0x1e9)]!=_0x1ab27c['chat']['id'])updateSetting(_0x2e5cc5(0x1e9),_0x1ab27c['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2e5cc5(0x111)](_0x1ab27c[_0x2e5cc5(0x1c1)]['id'],_0x2e5cc5(0x1e7))[_0x2e5cc5(0x21a)](_0x27e818=>{telegramError(_0x27e818);});}),tgBot[_0x2f1f26(0x1cb)](/\/config/,async _0x3f53c0=>{const _0xf88bc2=_0x2f1f26;if(!validateTelegram(_0x3f53c0))return;tgBot[_0xf88bc2(0x17f)](_0xf88bc2(0x1d7)),tgBot[_0xf88bc2(0x111)](_0x3f53c0[_0xf88bc2(0x1c1)]['id'],_0xf88bc2(0x1fb),{'reply_markup':{'inline_keyboard':[[{'text':_0xf88bc2(0x146),'callback_data':_0xf88bc2(0x1d1)},{'text':_0xf88bc2(0x15e),'callback_data':'alerts'},{'text':_0xf88bc2(0x1df),'callback_data':_0xf88bc2(0x12e)}]]}})[_0xf88bc2(0x21a)](_0x4ea389=>{telegramError(_0x4ea389);}),tgBot['on']('callback_query',async _0xaeed83=>{const _0x3a8b31=_0xf88bc2,_0x5c69a=_0xaeed83['data'],_0x5baf66=_0xaeed83[_0x3a8b31(0x117)];tgBot[_0x3a8b31(0x17a)](_0xaeed83['id'])['then'](async()=>{const _0x26b03f=_0x3a8b31;_0x5c69a==_0x26b03f(0x1d1)&&(updateSetting('telegramEvents',_0x26b03f(0x1d1)),updateSetting(_0x26b03f(0x1b8),!![]),await tgBot[_0x26b03f(0x111)](_0x5baf66[_0x26b03f(0x1c1)]['id'],_0x26b03f(0x17d))['catch'](_0xf1b3be=>{telegramError(_0xf1b3be);}));_0x5c69a=='alerts'&&(updateSetting('telegramEvents','alerts'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x5baf66[_0x26b03f(0x1c1)]['id'],_0x26b03f(0x1ad))[_0x26b03f(0x21a)](_0x4ba485=>{telegramError(_0x4ba485);}));_0x5c69a=='all'&&(updateSetting(_0x26b03f(0x17b),_0x26b03f(0x12e)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x5baf66[_0x26b03f(0x1c1)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x26b03f(0x21a)](_0x209419=>{telegramError(_0x209419);}));if(!settings[_0x26b03f(0x1e9)])tgBot[_0x26b03f(0x111)](_0x5baf66[_0x26b03f(0x1c1)]['id'],_0x26b03f(0x1ba))['catch'](_0x41e8ca=>{telegramError(_0x41e8ca);});}),tgBot[_0x3a8b31(0x17f)]('callback_query');});}),tgBot[_0x2f1f26(0x1cb)](/\/status/,_0x428299=>{const _0x2d4bf3=_0x2f1f26;if(!validateTelegram(_0x428299))return;let _0x5a26a6=_0x2d4bf3(0x228);config[_0x2d4bf3(0x1a4)](_0x31dd1a=>{const _0x421c2b=_0x2d4bf3;_0x5a26a6+=_0x421c2b(0x216)+_0x31dd1a[_0x421c2b(0x18f)]+_0x421c2b(0x122)+_0x31dd1a[_0x421c2b(0x1a8)]+':\x20'+_0x31dd1a[_0x421c2b(0x1f2)]+_0x421c2b(0x142)+_0x31dd1a[_0x421c2b(0x170)]+'\x0a';}),_0x5a26a6+='\x0a',_0x5a26a6+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x5a26a6+=!settings[_0x2d4bf3(0x1b8)]?_0x2d4bf3(0x1b6):_0x2d4bf3(0x168),_0x5a26a6+=settings[_0x2d4bf3(0x1b8)]?settings[_0x2d4bf3(0x17b)]==_0x2d4bf3(0x12e)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2d4bf3(0x137)+settings[_0x2d4bf3(0x17b)]+_0x2d4bf3(0x115):'',tgBot[_0x2d4bf3(0x111)](_0x428299[_0x2d4bf3(0x1c1)]['id'],_0x5a26a6,{'parse_mode':_0x2d4bf3(0x182)})['catch'](_0x1478bc=>{telegramError(_0x1478bc);});}),tgBot['onText'](/\/restart/,_0x542547=>{const _0x4ac0f5=_0x2f1f26;if(!validateTelegram(_0x542547))return;tgBot[_0x4ac0f5(0x17f)](_0x4ac0f5(0x1d7));const _0x343374=getEnabledBots();if(_0x343374['length']==0x0)tgBot[_0x4ac0f5(0x111)](_0x542547[_0x4ac0f5(0x1c1)]['id'],'No\x20bots\x20enabled\x20right\x20now')[_0x4ac0f5(0x21a)](_0x14a122=>{telegramError(_0x14a122);});else{let _0x14df6c=[],_0x131d3a=[];const _0x1ba8d2=_0x343374[_0x4ac0f5(0x20d)]%0x4==0x0||_0x343374[_0x4ac0f5(0x20d)]%0x4==0x3||_0x343374['length']%0x3==0x1?0x4:0x3;let _0x4c29d8=0x0;_0x343374[_0x4ac0f5(0x1a4)]((_0x1ffec5,_0x2fcab9)=>{const _0x1e4e18=_0x4ac0f5;if(_0x2fcab9%_0x1ba8d2==0x0)_0x131d3a=[];_0x131d3a[_0x1e4e18(0x229)]({'text':_0x1e4e18(0x216)+_0x1ffec5[_0x1e4e18(0x18f)],'callback_data':_0x1ffec5['botID']}),_0x2fcab9%_0x1ba8d2==0x0&&(_0x14df6c[_0x4c29d8]=_0x131d3a,_0x4c29d8++);}),tgBot['sendMessage'](_0x542547[_0x4ac0f5(0x1c1)]['id'],_0x4ac0f5(0x1e2),{'reply_markup':{'inline_keyboard':_0x14df6c}})[_0x4ac0f5(0x21a)](_0x51aeab=>{telegramError(_0x51aeab);}),tgBot['on'](_0x4ac0f5(0x1d7),async _0x18e9bd=>{const _0x5b3ce5=_0x4ac0f5,_0x3d0bf7=_0x18e9bd[_0x5b3ce5(0x1d8)],_0x54b3a3=_0x18e9bd[_0x5b3ce5(0x117)];tgBot['answerCallbackQuery'](_0x18e9bd['id'])[_0x5b3ce5(0x153)](async()=>{const _0x5e91c2=_0x5b3ce5;if(settings[_0x5e91c2(0x17b)]==_0x5e91c2(0x1d1))tgBot[_0x5e91c2(0x111)](_0x54b3a3[_0x5e91c2(0x1c1)]['id'],_0x5e91c2(0x1aa)+_0x3d0bf7)[_0x5e91c2(0x21a)](_0x106600=>{telegramError(_0x106600);});stopBot(_0x3d0bf7);}),tgBot[_0x5b3ce5(0x17f)](_0x5b3ce5(0x1d7));});}}),tgBot[_0x2f1f26(0x1cb)](/\/disable/,_0x1aae27=>{const _0x5b589c=_0x2f1f26;if(!validateTelegram(_0x1aae27))return;tgBot[_0x5b589c(0x111)](_0x1aae27[_0x5b589c(0x1c1)]['id'],_0x5b589c(0x154))[_0x5b589c(0x21a)](_0x3f9b8f=>{telegramError(_0x3f9b8f);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2f1f26(0x1cb)](/\/help/,_0x3a1f00=>{const _0x5cf126=_0x2f1f26;if(!validateTelegram(_0x3a1f00))return;tgBot[_0x5cf126(0x111)](_0x3a1f00[_0x5cf126(0x1c1)]['id'],_0x30e573)[_0x5cf126(0x21a)](_0x44877f=>{telegramError(_0x44877f);});}),tgBot['on'](_0x2f1f26(0x130),_0x2ec108=>{const _0x10e605=_0x2f1f26;if(_0x2ec108[_0x10e605(0x200)]()[_0x10e605(0x1ed)](_0x10e605(0x223))){logging(_0x10e605(0x1bc)),tgBot['stopPolling'](),tgBot=null;if(socket[_0x10e605(0x1d5)])socket[_0x10e605(0x1d5)][_0x10e605(0x1f5)](_0x10e605(0x1f1),_0x10e605(0x1bc));}}),process[_0x2f1f26(0x177)](_0x2f1f26(0x12c),()=>{const _0x54e0ac=_0x2f1f26;if(tgBot)tgBot[_0x54e0ac(0x1da)]();process[_0x54e0ac(0x1ea)](0x1);}),process['once'](_0x2f1f26(0x1bb),()=>{const _0x137e22=_0x2f1f26;if(tgBot)tgBot[_0x137e22(0x1da)]();process[_0x137e22(0x1ea)](0x1);});}}function _0x47a6(_0x107324,_0x22556d){const _0x489112=_0x22db();return _0x47a6=function(_0x47852f,_0x240379){_0x47852f=_0x47852f-0x108;let _0x22db59=_0x489112[_0x47852f];return _0x22db59;},_0x47a6(_0x107324,_0x22556d);}function disableTelegram(){const _0x465150=_0x3bbeaa;tgBot&&(tgBot[_0x465150(0x1da)](),tgBot=null);}function sendTelegram(_0x59c888,_0x3081ca){const _0x528862=_0x3bbeaa;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x528862(0x12e)||(_0x3081ca[_0x528862(0x10f)]==_0x528862(0x1c7)||_0x3081ca[_0x528862(0x10f)]=='success')&&settings[_0x528862(0x17b)]=='alerts'||_0x3081ca['type']=='order'&&settings[_0x528862(0x17b)]==_0x528862(0x1d1)){if(tgBot&&settings['telegramChatId'])tgBot[_0x528862(0x111)](settings['telegramChatId'],'Bot\x20'+_0x59c888+_0x528862(0x20c)+_0x3081ca[_0x528862(0x175)])[_0x528862(0x21a)](_0x17f1f7=>{telegramError(_0x17f1f7);});}}}function temporaryAccess2FA(_0x3154d3){const _0x3a195b=_0x3bbeaa;let _0x1184f3=new Date(),_0x5c6c2d=![];if(lastIpApproval){if(_0x1184f3-lastIpApproval<0x1388)_0x5c6c2d=!![];}lastIpApproval=new Date();if(_0x5c6c2d)return;tgBot&&settings[_0x3a195b(0x1e9)]&&(tgBot['removeListener'](_0x3a195b(0x1d7)),tgBot[_0x3a195b(0x111)](settings[_0x3a195b(0x1e9)],_0x3a195b(0x1b0)+normalizeIP(_0x3154d3)[_0x3a195b(0x1e4)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3a195b(0x198),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x3a195b(0x217)}]]}})[_0x3a195b(0x21a)](_0x330c7e=>{telegramError(_0x330c7e);}),tgBot['on'](_0x3a195b(0x1d7),async _0x1f5130=>{const _0x1dff9c=_0x3a195b,_0x1f69eb=_0x1f5130['data'],_0x1c4ff3=_0x1f5130[_0x1dff9c(0x117)];tgBot['answerCallbackQuery'](_0x1f5130['id'])[_0x1dff9c(0x153)](async()=>{const _0x4231b3=_0x1dff9c;if(_0x1f69eb!=_0x4231b3(0x217)){telegramIpApproval={'clientip':_0x3154d3,'timestamp':new Date()['getTime'](),'expiry':_0x1f69eb},await tgBot[_0x4231b3(0x111)](_0x1c4ff3[_0x4231b3(0x1c1)]['id'],_0x4231b3(0x1e1)+_0x1f69eb+_0x4231b3(0x10c),{'parse_mode':'HTML'})[_0x4231b3(0x21a)](_0x327a2c=>{telegramError(_0x327a2c);});for(let _0x38f9f3 in socket){socket[_0x38f9f3][_0x4231b3(0x1f5)](_0x4231b3(0x1f2),{'access':{'allow':![],'reason':_0x4231b3(0x171),'token':null}});}}else await tgBot['sendMessage'](_0x1c4ff3[_0x4231b3(0x1c1)]['id'],'Temporary\x20access\x20rejected')[_0x4231b3(0x21a)](_0x5bbd48=>{telegramError(_0x5bbd48);});}),tgBot[_0x1dff9c(0x17f)](_0x1dff9c(0x1d7));}));}function loginAccess2FA(_0x4eae45){const _0x5ebf5d=_0x3bbeaa;tgBot&&settings[_0x5ebf5d(0x1e9)]&&(tgBot[_0x5ebf5d(0x17f)](_0x5ebf5d(0x1d7)),tgBot[_0x5ebf5d(0x111)](settings['telegramChatId'],_0x5ebf5d(0x10b)+normalizeIP(_0x4eae45)[_0x5ebf5d(0x1e4)]+_0x5ebf5d(0x1f9),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5ebf5d(0x128),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x5ebf5d(0x217)}]]}})[_0x5ebf5d(0x21a)](_0x21f61d=>{telegramError(_0x21f61d);}),tgBot['on'](_0x5ebf5d(0x1d7),async _0x45dca1=>{const _0x46449d=_0x5ebf5d,_0x5444d5=_0x45dca1[_0x46449d(0x1d8)],_0x2a9e48=_0x45dca1[_0x46449d(0x117)];tgBot[_0x46449d(0x17a)](_0x45dca1['id'])[_0x46449d(0x153)](async()=>{const _0x2fb32c=_0x46449d;if(_0x5444d5!=_0x2fb32c(0x217)){telegram2FaApproval={'clientip':_0x4eae45,'timestamp':new Date()[_0x2fb32c(0x205)](),'expiry':_0x5444d5},await tgBot[_0x2fb32c(0x111)](_0x2a9e48[_0x2fb32c(0x1c1)]['id'],_0x2fb32c(0x1ca),{'parse_mode':_0x2fb32c(0x182)})['catch'](_0x568e11=>{telegramError(_0x568e11);});for(let _0x1a8d71 in socket){socket[_0x1a8d71]['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0x2fb32c(0x111)](_0x2a9e48[_0x2fb32c(0x1c1)]['id'],_0x2fb32c(0x1ae))['catch'](_0x41dc11=>{telegramError(_0x41dc11);});}),tgBot[_0x46449d(0x17f)](_0x46449d(0x1d7));}));}function getConfiguration(){const _0x4456e4=_0x3bbeaa;return dbConfig[_0x4456e4(0x148)]('bots')[_0x4456e4(0x18d)](_0x4456e4(0x18f))['value']()||[];}function getEnabledBots(){const _0x590890=_0x3bbeaa;return dbConfig['get'](_0x590890(0x192))['sortBy'](_0x590890(0x18f))['filter']({'status':_0x590890(0x1ee)})['value']()||[];}function getSettings(){const _0x3aec66=_0x3bbeaa;return dbSettings['get'](_0x3aec66(0x15b))[_0x3aec66(0x13c)]()||{'timeshift':0x0};}function getSecure(){const _0x2c693b=_0x3bbeaa;return dbSecure[_0x2c693b(0x148)](_0x2c693b(0x1d2))[_0x2c693b(0x13c)]()||{};}function getBlacklist(){const _0x571067=_0x3bbeaa;return dbSecure[_0x571067(0x148)]('blacklist')[_0x571067(0x13c)]()||[];}function broadcastToBots(_0xfee4cc,_0x5c18b7){const _0x4959d1=_0x3bbeaa;config[_0x4959d1(0x1a4)](_0x7923a7=>{const _0x49250a=_0x4959d1;if(_0x7923a7[_0x49250a(0x1f2)]==_0x49250a(0x1ee)&&_0x7923a7[_0x49250a(0x170)]=='running'){if(pid[_0x7923a7['botID']])pid[_0x7923a7['botID']][_0x49250a(0x15a)]({[_0xfee4cc]:_0x5c18b7});}});}function storeSettings(_0x18cc04,_0x3b32c4=![]){const _0x109401=_0x3bbeaa;_0x18cc04={...settings,..._0x18cc04};if(_0x3b32c4&&_0x18cc04[_0x109401(0x204)]!=_0x109401(0x1b1)&&_0x18cc04[_0x109401(0x204)]!=''){const _0x351b0b=crypt[_0x109401(0x1e0)](secure[_0x109401(0x208)],_0x18cc04[_0x109401(0x204)])[_0x109401(0x117)][_0x109401(0x12b)]('@')[0x0],_0x3a87fc=bcrypt[_0x109401(0x121)](_0x351b0b,saltRounds);_0x18cc04={..._0x18cc04,'bbPassword':_0x3a87fc};}if(_0x3b32c4&&_0x18cc04[_0x109401(0x220)]!=_0x109401(0x1b1)&&_0x18cc04[_0x109401(0x220)]!=''){const _0x553f09=crypt['decrypt'](secure[_0x109401(0x208)],_0x18cc04['telegramToken'])[_0x109401(0x117)][_0x109401(0x12b)]('@')[0x0];_0x18cc04={..._0x18cc04,'telegramToken':_0x553f09};}const _0x68512e=_0x18cc04[_0x109401(0x220)]!='************'&&_0x18cc04[_0x109401(0x220)]!=settings[_0x109401(0x220)]||_0x18cc04[_0x109401(0x152)]!=settings['telegramUsername'],_0x406260=_0x18cc04[_0x109401(0x220)]==''||_0x18cc04['telegramUsername']=='';if(_0x68512e)_0x18cc04[_0x109401(0x17b)]=_0x109401(0x12e);for(const [_0x1236ff,_0x1de0f3]of Object[_0x109401(0x14c)](_0x18cc04)){if(_0x1236ff==_0x109401(0x220)&&_0x1de0f3==_0x109401(0x1b1)){_0x18cc04[_0x109401(0x220)]=settings['telegramToken'];continue;};if(_0x1236ff==_0x109401(0x204)&&_0x1de0f3=='************'){_0x18cc04[_0x109401(0x204)]=settings['bbPassword'];continue;};dbSettings[_0x109401(0x1c6)](_0x109401(0x189)+_0x1236ff,_0x1de0f3)[_0x109401(0x1bd)]();}settings=_0x18cc04;if(socket[_0x109401(0x1d5)])socket['botmanager'][_0x109401(0x1f5)](_0x109401(0x15b),cleanSettings());broadcastToBots(_0x109401(0x123),settings[_0x109401(0x123)]);if(_0x68512e&&!_0x406260)initTelegram();if(_0x68512e&&_0x406260)disableTelegram();for(let _0x516cbe in socket){setAccess(_0x516cbe);}}function updateSetting(_0xb175a6,_0xd46bbd){const _0x2ad7cd=_0x3bbeaa;dbSettings['set'](_0x2ad7cd(0x189)+_0xb175a6,_0xd46bbd)[_0x2ad7cd(0x1bd)](),settings=getSettings();if(socket[_0x2ad7cd(0x1d5)])socket['botmanager']['emit'](_0x2ad7cd(0x15b),cleanSettings());}function storeSecure(_0x10a535){const _0x10fe26=_0x3bbeaa;dbSecure[_0x10fe26(0x148)](_0x10fe26(0x1d2))[_0x10fe26(0x229)](_0x10a535)['write'](),secure=_0x10a535;}function addBlacklist(){const _0x1f5a82=_0x3bbeaa;cleanBlacklist();let _0x48a8be;telegramIpApproval?_0x48a8be=Math[_0x1f5a82(0x1a2)](telegramIpApproval[_0x1f5a82(0x166)],loginExpiry):_0x48a8be=loginExpiry,dbSecure[_0x1f5a82(0x148)]('blacklist')[_0x1f5a82(0x229)]({'expiry':new Date()['getTime']()+_0x48a8be*0x3c*0x3e8,'token':token})['write'](),blacklist=dbSecure[_0x1f5a82(0x148)](_0x1f5a82(0x15d))[_0x1f5a82(0x13c)]();}function cleanBlacklist(){const _0x53616c=_0x3bbeaa;let _0x251510=dbSecure['get'](_0x53616c(0x15d))[_0x53616c(0x164)]()[_0x53616c(0x13c)](),_0x45ca76=new Date()[_0x53616c(0x205)]();_0x251510['forEach'](_0x345b0a=>{const _0x164d4f=_0x53616c;_0x345b0a[_0x164d4f(0x166)]<_0x45ca76&&dbSecure['get'](_0x164d4f(0x15d))[_0x164d4f(0x13f)]({'expiry':_0x345b0a[_0x164d4f(0x166)]})[_0x164d4f(0x1bd)]();});}function initStates(){const _0x476a85=_0x3bbeaa;let _0x99def6=getConfiguration();_0x99def6[_0x476a85(0x1a4)](_0x41ab79=>{const _0x5c1f41=_0x476a85;_0x41ab79[_0x5c1f41(0x170)]=_0x5c1f41(0x138);}),storeConfiguration(_0x99def6);}function onKeys(){const _0x3b5332=new RSA();return new Promise(_0x5d14a4=>{_0x3b5332['generateKeyPairAsync']()['then'](_0xa7d2d7=>{_0x5d14a4(_0xa7d2d7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5a76bc=_0x3bbeaa;let _0x2c0c6a=getConfiguration(),_0x234ea4=![];_0x2c0c6a['forEach'](_0x5304ed=>{const _0x21ebd9=_0x47a6;if(_0x5304ed[_0x21ebd9(0x1f2)]==_0x21ebd9(0x1bf))_0x5304ed[_0x21ebd9(0x1f2)]=_0x21ebd9(0x1ee),_0x234ea4=!![];else _0x5304ed['status']=='stopped'&&(_0x5304ed['status']='disabled',_0x234ea4=!![]);});if(_0x234ea4)storeConfiguration(_0x2c0c6a);let _0x94444b=getSecure();if(!_0x94444b[_0x5a76bc(0x151)](_0x5a76bc(0x119))){let _0x2ed55a=await generateKeys();_0x94444b[_0x5a76bc(0x1a1)]=_0x2ed55a['publicKey'],_0x94444b[_0x5a76bc(0x208)]=_0x2ed55a[_0x5a76bc(0x208)],_0x94444b[_0x5a76bc(0x119)]=crypto[_0x5a76bc(0x190)](0x20)[_0x5a76bc(0x200)](_0x5a76bc(0x1c5));;storeSecure(_0x94444b);}let _0x561d6d=getSettings();_0x234ea4=![];!_0x561d6d[_0x5a76bc(0x151)](_0x5a76bc(0x16f))&&(_0x561d6d[_0x5a76bc(0x16f)]=![],_0x561d6d[_0x5a76bc(0x193)]='',_0x561d6d[_0x5a76bc(0x204)]='',_0x561d6d[_0x5a76bc(0x181)]=![],_0x234ea4=!![]);!_0x561d6d[_0x5a76bc(0x151)](_0x5a76bc(0x12d))&&(_0x561d6d['whitelistEnabled']=![],_0x561d6d['whitelist']=[],_0x561d6d['temporaryAccessAllowed']=![],_0x234ea4=!![]);if(!_0x561d6d[_0x5a76bc(0x151)]('telegramEnabled')){if(_0x561d6d[_0x5a76bc(0x1e9)])_0x561d6d[_0x5a76bc(0x1b8)]=!![];else _0x561d6d['telegramEnabled']=![];_0x234ea4=!![];}if(_0x234ea4)storeSettings(_0x561d6d);}function storeConfiguration(_0xcd1594){const _0x283fa3=_0x3bbeaa;dbConfig['get'](_0x283fa3(0x192))['remove']()[_0x283fa3(0x1bd)](),dbConfig['get'](_0x283fa3(0x192))[_0x283fa3(0x229)](..._0xcd1594)[_0x283fa3(0x1bd)](),config=_0xcd1594;}function resetPassword(){const _0x177bbb=_0x3bbeaa;tgBot&&settings[_0x177bbb(0x1e9)]&&(tgBot[_0x177bbb(0x17f)](_0x177bbb(0x1d7)),tgBot[_0x177bbb(0x111)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x177bbb(0x182),'reply_markup':{'inline_keyboard':[[{'text':_0x177bbb(0x19e),'callback_data':_0x177bbb(0x19e)},{'text':'no','callback_data':'no'}]]}})[_0x177bbb(0x21a)](_0x237211=>{telegramError(_0x237211);}),tgBot['on']('callback_query',async _0x1959a1=>{const _0x2119db=_0x177bbb,_0x3cb9e1=_0x1959a1[_0x2119db(0x1d8)],_0x5106c6=_0x1959a1[_0x2119db(0x117)];tgBot[_0x2119db(0x17a)](_0x1959a1['id'])[_0x2119db(0x153)](async()=>{const _0x28dcb2=_0x2119db;if(_0x3cb9e1!='no'){const _0x14b888=0xf,_0x3d9027=_0x28dcb2(0x144),_0x2aeb20=Array[_0x28dcb2(0x1a7)](crypto['randomFillSync'](new Uint32Array(_0x14b888)))[_0x28dcb2(0x224)](_0x2973a8=>_0x3d9027[_0x2973a8%_0x3d9027['length']])['join'](''),_0x235ea6=bcrypt['hashSync'](_0x2aeb20,saltRounds);storeSettings({'bbPassword':_0x235ea6}),await tgBot[_0x28dcb2(0x111)](_0x5106c6[_0x28dcb2(0x1c1)]['id'],_0x28dcb2(0x1f6)+_0x2aeb20,{'parse_mode':_0x28dcb2(0x182)})[_0x28dcb2(0x21a)](_0x7f116=>{telegramError(_0x7f116);});}else await tgBot['sendMessage'](_0x5106c6[_0x28dcb2(0x1c1)]['id'],'Password\x20reset\x20rejected')[_0x28dcb2(0x21a)](_0x15912c=>{telegramError(_0x15912c);});}),tgBot[_0x2119db(0x17f)]('callback_query');}));}function logging(_0x2a8a8b){const _0x21d9ef=_0x3bbeaa;console[_0x21d9ef(0x127)](getTimeStamp()+_0x21d9ef(0x11b)+_0x2a8a8b);if(tgBot&&settings[_0x21d9ef(0x1e9)]&&settings['telegramEvents']!='orders')tgBot[_0x21d9ef(0x111)](settings[_0x21d9ef(0x1e9)],_0x21d9ef(0x1ff)+_0x2a8a8b)['catch'](_0x5c4d4e=>{telegramError(_0x5c4d4e);});}function getServerTime(){const _0x11e088=_0x3bbeaa,_0x54e2e5=new Date();return _0x54e2e5[_0x11e088(0x1c9)]()+'/'+(_0x54e2e5['getMonth']()+0x1)[_0x11e088(0x200)]()[_0x11e088(0x18e)](0x2,'0')+'/'+_0x54e2e5[_0x11e088(0x133)]()[_0x11e088(0x200)]()[_0x11e088(0x18e)](0x2,'0')+'\x20'+_0x54e2e5['getHours']()[_0x11e088(0x200)]()['padStart'](0x2,'0')+':'+_0x54e2e5[_0x11e088(0x1f0)]()[_0x11e088(0x200)]()[_0x11e088(0x18e)](0x2,'0')+':'+_0x54e2e5[_0x11e088(0x13b)]()['toString']()[_0x11e088(0x18e)](0x2,'0');}function getTimeStamp(){const _0xe5be30=_0x3bbeaa,_0xd6d0fb=shiftedTime();return _0xd6d0fb[_0xe5be30(0x1c9)]()+'/'+(_0xd6d0fb[_0xe5be30(0x16e)]()+0x1)['toString']()[_0xe5be30(0x18e)](0x2,'0')+'/'+_0xd6d0fb['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0xd6d0fb['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0xd6d0fb[_0xe5be30(0x1f0)]()[_0xe5be30(0x200)]()[_0xe5be30(0x18e)](0x2,'0')+':'+_0xd6d0fb[_0xe5be30(0x13b)]()['toString']()[_0xe5be30(0x18e)](0x2,'0');}function shiftedTime(){const _0x57f806=_0x3bbeaa,_0x51f266=new Date();let _0x4f0be7=_0x51f266;if(settings[_0x57f806(0x123)]&&settings['timeshift']!==0x0)_0x4f0be7=fns[_0x57f806(0x113)](_0x51f266,{'hours':settings['timeshift']});return _0x4f0be7;}function startAnalytics(){let _0x583153=new Date()['getUTCHours']();_0x583153==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x109360=_0x3bbeaa;analytics[_0x109360(0x18c)]({'title':'Balance\x20Bot\x20Server','href':_0x109360(0x212),'path':'/v'+serverversion});}function validateCredentials(_0x1def81){const _0x5d407d=_0x3bbeaa;if(_0x1def81[_0x5d407d(0x108)]==settings['bbUsername']&&bcrypt[_0x5d407d(0x19c)](_0x1def81['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x5d407d(0x14b),'token':null};else{const _0x17d194=generateLoginToken();return{'allow':!![],'reason':_0x5d407d(0x16b),'token':_0x17d194};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(){const _0x465809=generateLoginToken();return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x465809};}function validateAccess(_0x2d427f){const _0x4d0046=_0x3bbeaa;let _0xfa0f;const _0x3cfbe5=_0x5df2bc=>{const _0x49f9cb=_0x47a6;if(settings['loginRequired']){if(settings[_0x49f9cb(0x181)]){if(telegram2FaApproved()){const _0x367a9c=generateLoginToken();return{'allow':!![],'reason':_0x49f9cb(0x17c),'token':_0x367a9c};}else return{'allow':![],'reason':_0x49f9cb(0x14b),'token':null};}else return _0xfa0f=validToken(_0x5df2bc),_0xfa0f[_0x49f9cb(0x151)]('success')?{'allow':!![],'reason':_0x49f9cb(0x197),'token':_0x5df2bc}:{'allow':![],'reason':_0x49f9cb(0x145),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x3ff413=[...settings[_0x4d0046(0x172)],'::1',_0x4d0046(0x1ac),_0x4d0046(0x1c0)];if(_0x3ff413[_0x4d0046(0x1ed)](externalip))return _0x3cfbe5(_0x2d427f);else{_0xfa0f=validToken(_0x2d427f);if(_0xfa0f[_0x4d0046(0x151)]('success'))return _0x3cfbe5(_0x2d427f);else{if(telegramIpApproved()){const _0xf060ba=generateToken();return _0xfa0f=_0x3cfbe5(_0x2d427f),_0xfa0f[_0x4d0046(0x1dd)]?{'allow':!![],'reason':_0x4d0046(0x1cc),'token':_0xf060ba}:_0xfa0f;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x4d0046(0x114),'token':null}:{'allow':![],'reason':_0x4d0046(0x1f3),'token':null};}}}else return _0x3cfbe5(_0x2d427f);}function timelyDecrypt(_0x249f30,_0x55a901=!![]){const _0x1c123c=_0x3bbeaa;if(_0x249f30)try{const _0x5854ad=crypt['decrypt'](secure[_0x1c123c(0x208)],_0x249f30)[_0x1c123c(0x117)],_0x4081a4=_0x5854ad[_0x1c123c(0x12b)]('@')[0x0],_0x3b8a6b=_0x5854ad[_0x1c123c(0x12b)]('@')[0x1],_0x44639b=new Date()['getTime']();if(_0x55a901){if(_0x44639b-_0x3b8a6b<maxSecretAge*0x3e8)return _0x4081a4;else return![];}else return _0x4081a4;}catch{return![];}else return![];}function _0x22db(){const _0xd56964=['getDate','store-settings','path','analytics','Notifications\x20types:\x20','stopped','getStartingBalances','/:bot/support','getSeconds','value','keys','/:bot/performance','remove','Balance\x20Bot','starting','\x20/\x20','456vcFqRH','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','login\x20required','Orders','Unauthorized\x20attempt\x20to\x20update\x20bot','get','bb-settings.json','/:bot/history','2FA\x20login\x20required','entries','ipaddr.js','new-disabled','sha256','Unauthorized\x20attempt\x20to\x20log\x20out','hasOwnProperty','telegramUsername','then','Notifications\x20disabled','5391144GQrghq','login\x20not\x20required','bb-config.json','connected','-performance.json','send','settings','/help\x20-\x20show\x20avaiable\x20commands\x0a','blacklist','Alerts','inherit','apply','/:bot','logged\x20out','@analytics/google-analytics','cloneDeep','User\x20has\x20been\x20validated','expiry','reason','Notifications\x20enabled\x0a','get-portfolio','store','login\x20token\x20generated','static','error\x20while\x20deleting\x20log\x20files:\x20','getMonth','loginRequired','live','reload','whitelist','exp','reset-password','event','hybrid-crypto-js','once','730knqeOQ','2FA','answerCallbackQuery','telegramEvents','2FA\x20login\x20token\x20generated','Ok,\x20will\x20send\x20order\x20notifications\x20only','child_process','removeListener','find','f2aRequired','HTML','timestamp','(((.+)+)+)+$','toIPv4Address','bcryptjs','Token\x20blacklisted','lowdb','settings.','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','existsSync','page','sortBy','padStart','botID','randomBytes','match','bots','bbUsername','Invalid\x20authentication\x20token\x20(2)','http','login','login\x20token\x20valid','5\x20min','-results.json','/restart\x20-\x20restart\x20a\x20bot\x0a','toIPv4MappedAddress','compareSync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','yes','deleted\x20Bot\x20','remoteAddress','publicKey','max','isIPv4MappedAddress','forEach','Invalid\x20IP\x20address','apiKey','from','botname','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','headers','::ffff:127.0.0.1','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Login\x20rejected','lowdb/adapters/FileSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','************','token','connection','bot-','crypto','Notifications\x20disabled\x0a','-----------------------------------------------------------------------------------','telegramEnabled','parse','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','SIGTERM','Invalid\x20Telegram\x20token','write','join','running','127.0.0.1','chat','unlinkSync','password','3619mtDOmW','hex','set','error','get-logs','getFullYear','Login\x20accepted','onText','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20get\x20logs','started','35403zQLKal','orders','secure','env','228koYGzW','botmanager','No\x20authentication\x20token','callback_query','data','1333521ATrPbf','stopPolling','telegram','22586GtZCSu','allow','access\x20timeout','All','decrypt','Access\x20enabled\x20for\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','idling\x20bot\x20\x20\x20|\x20Bot\x20','show','encryptedUuid','new','Notifications\x20enabled','1000','telegramChatId','exit','Invalid\x20authentication\x20token\x20(1)','Invalid\x20username\x20or\x20IP\x20address','includes','enabled','date-fns','getMinutes','notification','status','temporary\x20access\x20not\x20allowed','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','emit','Password\x20has\x20been\x20reset\x20to:\x20','disconnect','bot.js','</b>\x20?','sendFile','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','delete-bot','sign','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','Bot\x20Mgr\x20>\x20','toString','mkdirSync','5YPupSW','version.json','bbPassword','getTime','build2','54681LdKFZi','privateKey','Unauthorized\x20attempt\x20to\x20delete\x20bot','emitHistory','RSA-OAEP','\x20>\x20','length','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','/status\x20-\x20show\x20the\x20status\x20of\x20your\x20bots\x0a','2369838GCVnNn','auth','https://hodlerhacks.com','disabled','handshake','get-starting-balances','Bot\x20','reject','disabled\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','catch','constructor','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','clientip','/:bot/configuration','telegramToken','search','node-telegram-bot-api','404\x20Not\x20Found','map','isValid','removeAllListeners','use','<b>Balance\x20Bot\x20status:</b>\x0a','push','username','assign','/disable\x20-\x20disable\x20notifications\x0a','Allow\x20login\x20from\x20IP\x20address\x20<b>','\x20minutes','65NNbvFH','-config.json','type','default','sendMessage','build','add','2FA\x20required','\x20only\x0a','ipv6','message','defaults','secret','restarting\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20add\x20bot','/:bot/portfolio','logout','function','index.html','hashSync','\x20|\x20','timeshift','config/','placeOrder','args','log','accept','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','socket.io','split','SIGINT','whitelistEnabled','all','referer','polling_error','update-bot','getPortfolio'];_0x22db=function(){return _0xd56964;};return _0x22db();}const validToken=_0x553b60=>{const _0x427612=_0x3bbeaa;if(!_0x553b60)return{'error':_0x427612(0x1d6)};for(let _0x2c3b67 of blacklist){if(_0x2c3b67[_0x427612(0x1b2)]==_0x553b60)return{'error':_0x427612(0x187)};}let _0x4ff919;try{_0x4ff919=jwt['verify'](_0x553b60,secure['secret']+uuid);}catch{return{'error':_0x427612(0x1eb)};}if(!_0x4ff919[_0x427612(0x151)]('clientip')&&!_0x4ff919[_0x427612(0x151)](_0x427612(0x108))||!_0x4ff919[_0x427612(0x151)](_0x427612(0x173)))return{'error':_0x427612(0x194)};if(!_0x4ff919[_0x427612(0x151)](_0x427612(0x108))&&_0x4ff919[_0x427612(0x151)](_0x427612(0x21e))){const {clientip:_0x28db88}=_0x4ff919;return externalip==_0x28db88?{'success':_0x427612(0x165)}:{'error':_0x427612(0x1a5)};}else{if(_0x4ff919[_0x427612(0x151)]('username')&&_0x4ff919[_0x427612(0x151)](_0x427612(0x21e))){const {username:_0x217ad5,clientip:_0x3d109e}=_0x4ff919;return settings[_0x427612(0x193)]==_0x217ad5&&externalip==_0x3d109e?{'success':_0x427612(0x165)}:{'error':_0x427612(0x1ec)};}}},generateLoginToken=()=>{const _0x249056=_0x3bbeaa;if(uuid)return jwt[_0x249056(0x1fd)]({'username':settings[_0x249056(0x193)],'clientip':externalip},secure[_0x249056(0x119)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x35324b=_0x3bbeaa;if(uuid)return jwt[_0x35324b(0x1fd)]({'clientip':externalip},secure[_0x35324b(0x119)]+uuid,{'expiresIn':telegramIpApproval[_0x35324b(0x166)]*0x3c});else return![];},telegramIpApproved=()=>{const _0x42f75b=_0x3bbeaa;let _0x16c2f1=![];return telegramIpApproval&&telegramIpApproval[_0x42f75b(0x166)]!='reject'&&(_0x16c2f1=telegramIpApproval[_0x42f75b(0x21e)]==externalip&&new Date()[_0x42f75b(0x205)]()-telegramIpApproval[_0x42f75b(0x183)]<telegramIpApproval['expiry']*0x3c*0x3e8),_0x16c2f1;},telegram2FaApproved=()=>{const _0x529ba0=_0x3bbeaa;let _0x3851f2=![];return telegram2FaApproval&&telegram2FaApproval[_0x529ba0(0x166)]!=_0x529ba0(0x217)&&(_0x3851f2=telegram2FaApproval[_0x529ba0(0x21e)]==externalip&&new Date()[_0x529ba0(0x205)]()-telegram2FaApproval['timestamp']<telegram2FaApproval[_0x529ba0(0x166)]*0x3c*0x3e8),_0x3851f2;},normalizeIP=_0x40b68a=>{const _0x125643=_0x3bbeaa;let _0x1d881d=null,_0x18bab2=null;if(ipaddr[_0x125643(0x225)](_0x40b68a)){const _0x1d582c=ipaddr[_0x125643(0x1b9)](_0x40b68a);_0x1d582c['kind']()===_0x125643(0x116)?(_0x1d582c[_0x125643(0x1a3)]()&&(_0x1d881d=_0x1d582c[_0x125643(0x185)]()[_0x125643(0x200)]()),_0x18bab2=_0x1d582c[_0x125643(0x200)]()):(_0x1d881d=_0x1d582c[_0x125643(0x200)](),_0x18bab2=_0x1d582c[_0x125643(0x19b)]()[_0x125643(0x200)]());}return{'show':_0x1d881d?_0x1d881d:_0x18bab2,'store':_0x18bab2};};