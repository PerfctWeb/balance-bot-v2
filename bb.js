const _0x25e0dc=_0x2d86;(function(_0x389543,_0x29a9cf){const _0x278895=_0x2d86,_0x408fe3=_0x389543();while(!![]){try{const _0x40af46=parseInt(_0x278895(0x241))/0x1+-parseInt(_0x278895(0x189))/0x2*(-parseInt(_0x278895(0x26c))/0x3)+parseInt(_0x278895(0x182))/0x4*(parseInt(_0x278895(0x1a6))/0x5)+-parseInt(_0x278895(0x269))/0x6+-parseInt(_0x278895(0x1ce))/0x7+parseInt(_0x278895(0x292))/0x8*(parseInt(_0x278895(0x1dd))/0x9)+-parseInt(_0x278895(0x1da))/0xa;if(_0x40af46===_0x29a9cf)break;else _0x408fe3['push'](_0x408fe3['shift']());}catch(_0x38efc5){_0x408fe3['push'](_0x408fe3['shift']());}}}(_0x1271,0xe8866));const _0x498517=function(){let _0x58f4b1=!![];return function(_0x5c4d04,_0x4cedef){const _0x1abf3a=_0x58f4b1?function(){if(_0x4cedef){const _0x5e66d2=_0x4cedef['apply'](_0x5c4d04,arguments);return _0x4cedef=null,_0x5e66d2;}}:function(){};return _0x58f4b1=![],_0x1abf3a;};}(),_0x1dac07=_0x498517(this,function(){const _0xda4c6d=_0x2d86;return _0x1dac07[_0xda4c6d(0x272)]()[_0xda4c6d(0x255)]('(((.+)+)+)+$')['toString']()[_0xda4c6d(0x1b2)](_0x1dac07)['search']('(((.+)+)+)+$');});_0x1dac07();'use strict';process['env'][_0x25e0dc(0x27d)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x25e0dc(0x274)),fs=require('fs'),fns=require(_0x25e0dc(0x181)),low=require(_0x25e0dc(0x20f)),path=require(_0x25e0dc(0x1f8)),crypto=require(_0x25e0dc(0x1e0)),Crypt=require('hybrid-crypto-js')[_0x25e0dc(0x1fc)],RSA=require(_0x25e0dc(0x214))[_0x25e0dc(0x28b)],bcrypt=require(_0x25e0dc(0x1c2)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x25e0dc(0x275))[_0x25e0dc(0x18d)],googleAnalytics=require(_0x25e0dc(0x1db))[_0x25e0dc(0x18d)],ipaddr=require(_0x25e0dc(0x161)),PORT=process[_0x25e0dc(0x234)][0x2]||_0x25e0dc(0x239),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x25e0dc(0x1cf)](PORT))return console[_0x25e0dc(0x1de)](_0x25e0dc(0x1ac)+PORT+_0x25e0dc(0x254)),process[_0x25e0dc(0x24a)](0x1);const userID=process[_0x25e0dc(0x234)][0x3]||'';let bbpath=_0x25e0dc(0x235);const botfile=_0x25e0dc(0x1c8),configfile='bb-config.json',settingsfile=_0x25e0dc(0x1ed),securefile='bb-secure.json';!fs[_0x25e0dc(0x22d)](bbpath+botfile)&&(bbpath='');const configpath=userID?bbpath+_0x25e0dc(0x18f)+userID+'/':bbpath+_0x25e0dc(0x18f),configbackuppath=configpath+_0x25e0dc(0x1ee);!fs[_0x25e0dc(0x22d)](configpath)&&fs['mkdirSync'](configpath);function _0x2d86(_0x47f8d9,_0x1ce624){const _0x349d8b=_0x1271();return _0x2d86=function(_0x1dac07,_0x498517){_0x1dac07=_0x1dac07-0x15f;let _0x12719c=_0x349d8b[_0x1dac07];return _0x12719c;},_0x2d86(_0x47f8d9,_0x1ce624);}!fs[_0x25e0dc(0x22d)](configbackuppath)&&fs[_0x25e0dc(0x1cc)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x25e0dc(0x1b4)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x25e0dc(0x211)]({'settings':{'timeshift':0x0}})[_0x25e0dc(0x1b4)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x25e0dc(0x211)]({'secure':{},'blacklist':[]})[_0x25e0dc(0x1b4)]();let crypt=new Crypt({'md':_0x25e0dc(0x1ae),'rsaStandard':_0x25e0dc(0x25b)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+_0x25e0dc(0x253))['version'],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x25e0dc(0x16e)),app=express(),http=require('http')[_0x25e0dc(0x16c)](app);app[_0x25e0dc(0x1d4)](express[_0x25e0dc(0x174)](path[_0x25e0dc(0x228)](__dirname,bbpath,_0x25e0dc(0x1b3)))),app[_0x25e0dc(0x1d4)](express[_0x25e0dc(0x174)](path[_0x25e0dc(0x228)](__dirname,bbpath,_0x25e0dc(0x29b)))),app[_0x25e0dc(0x16f)]('/',function(_0x1fca16,_0x4b29b3){const _0x52ee01=_0x25e0dc;_0x4b29b3[_0x52ee01(0x263)](path[_0x52ee01(0x228)](__dirname,bbpath,_0x52ee01(0x1b3),_0x52ee01(0x248)));}),app[_0x25e0dc(0x16f)](_0x25e0dc(0x279),function(_0x357669,_0x397f88){const _0xd1ec76=_0x25e0dc;_0x397f88[_0xd1ec76(0x263)](path[_0xd1ec76(0x228)](__dirname,bbpath,'build',_0xd1ec76(0x248)));}),app[_0x25e0dc(0x16f)](_0x25e0dc(0x1c9),(_0x3c534b,_0x2ce7f0)=>{const _0x7c55f8=_0x25e0dc;_0x2ce7f0[_0x7c55f8(0x263)](path[_0x7c55f8(0x228)](__dirname,bbpath,_0x7c55f8(0x29b),_0x7c55f8(0x248)));}),app['get'](_0x25e0dc(0x19c),(_0x54f59e,_0x50cf77)=>{const _0x2c8222=_0x25e0dc;_0x50cf77[_0x2c8222(0x263)](path['join'](__dirname,bbpath,_0x2c8222(0x29b),_0x2c8222(0x248)));}),app[_0x25e0dc(0x16f)](_0x25e0dc(0x273),(_0x2a0832,_0x41b193)=>{const _0x1ffc74=_0x25e0dc;_0x41b193[_0x1ffc74(0x263)](path[_0x1ffc74(0x228)](__dirname,bbpath,_0x1ffc74(0x29b),_0x1ffc74(0x248)));}),app[_0x25e0dc(0x16f)](_0x25e0dc(0x209),(_0x4a9424,_0x3119ef)=>{const _0xc11e1=_0x25e0dc;_0x3119ef[_0xc11e1(0x263)](path[_0xc11e1(0x228)](__dirname,bbpath,_0xc11e1(0x29b),_0xc11e1(0x248)));}),app['get'](_0x25e0dc(0x203),(_0x19328e,_0x5d5ff9)=>{const _0x2a3a1f=_0x25e0dc;_0x5d5ff9[_0x2a3a1f(0x263)](path[_0x2a3a1f(0x228)](__dirname,bbpath,'build',_0x2a3a1f(0x248)));}),app[_0x25e0dc(0x16f)](_0x25e0dc(0x236),(_0x57095e,_0x348b64)=>{const _0x576d4c=_0x25e0dc;_0x348b64[_0x576d4c(0x263)](path[_0x576d4c(0x228)](__dirname,bbpath,_0x576d4c(0x29b),'index.html'));}),http['listen'](PORT);const analytics=analyticsLib({'app':_0x25e0dc(0x197),'plugins':[googleAnalytics({'trackingId':_0x25e0dc(0x245)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x25e0dc(0x164)]&&settings[_0x25e0dc(0x164)]!=''&&settings[_0x25e0dc(0x223)]&&settings[_0x25e0dc(0x223)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x4b42b1=_0x25e0dc;console['log'](''),console[_0x4b42b1(0x1de)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x4b42b1(0x27b));if(config[_0x4b42b1(0x24c)]!=0x0)config[_0x4b42b1(0x1d5)](_0x1d240c=>{const _0x36ff72=_0x4b42b1;if(_0x1d240c[_0x36ff72(0x243)]==_0x36ff72(0x216)||_0x1d240c[_0x36ff72(0x243)]==_0x36ff72(0x1ba))logging(_0x36ff72(0x21d)+_0x1d240c[_0x36ff72(0x1b1)]+_0x36ff72(0x289)+_0x1d240c['botname']),startBot([_0x1d240c[_0x36ff72(0x1b1)],userID],{'cwd':bbpath},function(_0x3a8874){if(_0x3a8874)logging(_0x3a8874);});else(_0x1d240c[_0x36ff72(0x243)]==_0x36ff72(0x17c)||_0x1d240c['status']=='new-disabled')&&logging(_0x36ff72(0x1a0)+_0x1d240c[_0x36ff72(0x1b1)]+_0x36ff72(0x289)+_0x1d240c['botname']);});else!newBot&&console[_0x4b42b1(0x1de)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x4b42b1(0x1de)](_0x4b42b1(0x27b)),console[_0x4b42b1(0x1de)]('');}function startSocket(){const _0x14aa19=_0x25e0dc,_0xf3a1ea=require(_0x14aa19(0x1e1))(http,{});_0xf3a1ea['on']('connection',_0x501558=>{const _0x2bc6eb=_0x14aa19;let _0x14ebc3,_0x3d3995,_0x55cabb;const _0x16b4e1=_0x501558[_0x2bc6eb(0x175)][_0x2bc6eb(0x290)]['referer'],_0x8edd17=_0x501558['handshake'][_0x2bc6eb(0x177)][_0x2bc6eb(0x24e)];if(!_0x8edd17)_0x501558['emit']('status',{'publicKey':secure['publicKey']});else{uuid=timelyDecrypt(_0x501558[_0x2bc6eb(0x175)][_0x2bc6eb(0x177)][_0x2bc6eb(0x24e)],![]),_0x3d3995=_0x16b4e1[_0x2bc6eb(0x285)](/bot[0-9]{3}/);if(_0x3d3995)_0x55cabb=_0x3d3995[0x0][_0x2bc6eb(0x285)](/[0-9]{3}/);if(_0x55cabb)_0x14ebc3=_0x55cabb[0x0];else _0x14ebc3=_0x2bc6eb(0x226);if(socket[_0x14ebc3])socket[_0x14ebc3][_0x2bc6eb(0x282)](!![]);socket[_0x14ebc3]=_0x501558,setAccess(_0x14ebc3);if(accessControl[_0x2bc6eb(0x213)]){if(_0x14ebc3==_0x2bc6eb(0x226))initializeSocketBotManager();else initializeSocketBot(_0x14ebc3);}if(!serverStatus[_0x14ebc3])serverStatus[_0x14ebc3]=_0x2bc6eb(0x23c);socket[_0x14ebc3]['on']('login',_0x3a0ee0=>{const _0x9e9e37=_0x2bc6eb,_0x2d1606=timelyDecrypt(_0x3a0ee0[_0x9e9e37(0x1fb)]);if(_0x2d1606){_0x3a0ee0={'username':_0x3a0ee0[_0x9e9e37(0x18a)],'password':_0x2d1606};let _0x4cceb5=validateCredentials(_0x3a0ee0);if(_0x4cceb5[_0x9e9e37(0x213)]==![]&&_0x4cceb5['reason']=='2FA\x20login\x20required')socket[_0x14ebc3][_0x9e9e37(0x17a)](_0x9e9e37(0x243),{'access':_0x4cceb5}),loginAccess2FA(externalip);else{if(_0x4cceb5[_0x9e9e37(0x213)]==![]&&_0x4cceb5[_0x9e9e37(0x215)]==_0x9e9e37(0x1c3))socket[_0x14ebc3][_0x9e9e37(0x17a)]('status',{'access':_0x4cceb5});else{if(_0x4cceb5[_0x9e9e37(0x213)]&&_0x4cceb5[_0x9e9e37(0x215)]==_0x9e9e37(0x1ab)){token=_0x4cceb5[_0x9e9e37(0x278)];for(let _0x27197b in socket){if(_0x27197b==_0x9e9e37(0x226))initializeSocketBotManager();else initializeSocketBot(_0x27197b);socket[_0x27197b][_0x9e9e37(0x17a)](_0x9e9e37(0x243),{'status':serverStatus[_0x27197b]||'starting','serverversion':serverversion,'servertime':getServerTime(),'access':_0x4cceb5,'externalip':externalip,'publicKey':secure[_0x9e9e37(0x258)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout('login');}}}}else logging(_0x9e9e37(0x296));}),socket[_0x14ebc3]['on'](_0x2bc6eb(0x252),()=>{resetPassword();}),socket[_0x14ebc3]['on'](_0x2bc6eb(0x282),_0x3c6200=>{let _0x1e579b=[];for(let _0x40bc27 in socket){if(_0x40bc27!=_0x14ebc3)_0x1e579b[_0x40bc27]=socket[_0x40bc27];}socket=_0x1e579b;});if(_0x14ebc3!=_0x2bc6eb(0x226)&&config[_0x2bc6eb(0x19a)]!=''){if(pid[_0x14ebc3])pid[_0x14ebc3]['send']({'function':_0x2bc6eb(0x179),'args':null});}}});}function setAccess(_0xf8d157){const _0x359093=_0x25e0dc;externalip=normalizeIP(socket[_0xf8d157][_0x359093(0x1c6)][_0x359093(0x23b)])[_0x359093(0x1c5)],accessControl=validateAccess(token),accessControl['token']&&accessControl[_0x359093(0x215)]==_0x359093(0x16a)&&setSessionTimeout(_0x359093(0x1e4)),accessControl['token']&&accessControl['reason']==_0x359093(0x286)&&setSessionTimeout(_0x359093(0x180)),socket[_0xf8d157]['emit'](_0x359093(0x243),{'status':serverStatus[_0xf8d157]||_0x359093(0x231),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':accessControl[_0x359093(0x215)]==_0x359093(0x1b7)||accessControl[_0x359093(0x215)]==_0x359093(0x210)}),accessControl[_0x359093(0x213)]==![]&&accessControl['reason']==_0x359093(0x27e)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x12750e){const _0x5ddc6b=_0x25e0dc;let _0x320176;if(_0x12750e==_0x5ddc6b(0x180))_0x320176=loginExpiry*0x3c*0x3e8;else _0x320176=telegramIpApproval[_0x5ddc6b(0x1cd)]*0x3c*0x3e8-(new Date()[_0x5ddc6b(0x23f)]()-telegramIpApproval[_0x5ddc6b(0x18e)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x584212=_0x5ddc6b;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x4fcdac=validateAccess(token);if(!(_0x4fcdac[_0x584212(0x213)]&&_0x4fcdac[_0x584212(0x215)]==_0x584212(0x1d6)))for(let _0x49638a in socket){socket[_0x49638a][_0x584212(0x17a)]('status',{'access':{'allow':![],'reason':_0x584212(0x178),'token':null}});}token=null;},_0x320176);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x3b689b=_0x2d86;let _0x5346b4=refreshToken();for(let _0x13aba7 in socket){socket[_0x13aba7][_0x3b689b(0x17a)](_0x3b689b(0x243),{'status':serverStatus[_0x13aba7]||_0x3b689b(0x231),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x5346b4,'externalip':externalip,'publicKey':secure[_0x3b689b(0x258)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x428903=_0x25e0dc;socket['botmanager'][_0x428903(0x17a)](_0x428903(0x1ef),config),socket[_0x428903(0x226)][_0x428903(0x17a)](_0x428903(0x167),cleanSettings()),socket[_0x428903(0x226)]['on']('add-bot',_0x303204=>{const _0x22ea5f=_0x428903;if(validateAccess(_0x303204)['allow'])addBot();else logging(_0x22ea5f(0x1e2));}),socket['botmanager']['on'](_0x428903(0x276),(_0xb16eb3,_0x4cbb23)=>{const _0x23605a=_0x428903;if(validateAccess(_0x4cbb23)[_0x23605a(0x213)])toggleBot(_0xb16eb3['botID'],_0xb16eb3[_0x23605a(0x243)],_0xb16eb3[_0x23605a(0x1ec)]);else logging(_0x23605a(0x1f2));}),socket[_0x428903(0x226)]['on']('delete-bot',(_0x4276f,_0x30c07c)=>{const _0x136711=_0x428903;if(validateAccess(_0x30c07c)['allow'])deleteBot(_0x4276f);else logging(_0x136711(0x270));}),socket[_0x428903(0x226)]['on'](_0x428903(0x1ea),(_0x1df7bb,_0x327a05)=>{const _0x378816=_0x428903;if(validateAccess(_0x327a05)[_0x378816(0x213)])storeSettings(_0x1df7bb,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),socket[_0x428903(0x226)]['on'](_0x428903(0x20e),_0x369999=>{const _0x45857d=_0x428903;if(validateAccess(_0x369999)[_0x45857d(0x213)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x54a82e in socket){socket[_0x54a82e][_0x45857d(0x17a)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging(_0x45857d(0x202));});}function initializeSocketBot(_0x5988b3){const _0x237b06=_0x25e0dc;socket[_0x5988b3]['on'](_0x237b06(0x294),(_0x1415cc,_0x344930)=>{const _0x5bf9e4=_0x237b06;if(validateAccess(_0x344930)[_0x5bf9e4(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3]['send']({'function':_0x5bf9e4(0x217),'args':_0x1415cc});}else logging(_0x5bf9e4(0x26a));}),socket[_0x5988b3]['on'](_0x237b06(0x21b),(_0x436c2e,_0x56bea0)=>{const _0x106bf0=_0x237b06;if(validateAccess(_0x56bea0)[_0x106bf0(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3]['send']({'function':_0x106bf0(0x168),'args':_0x436c2e});}else logging(_0x106bf0(0x160));}),socket[_0x5988b3]['on'](_0x237b06(0x1fd),(_0x45a953,_0x1df109)=>{const _0x1f3a93=_0x237b06;if(validateAccess(_0x1df109)[_0x1f3a93(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3][_0x1f3a93(0x1a8)]({'function':_0x1f3a93(0x1f9),'args':_0x45a953});}else logging(_0x1f3a93(0x1af));}),socket[_0x5988b3]['on'](_0x237b06(0x28a),(_0x2a3986,_0x520a87)=>{const _0x201e00=_0x237b06;if(validateAccess(_0x520a87)[_0x201e00(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3][_0x201e00(0x1a8)]({'function':_0x201e00(0x1f1),'args':_0x2a3986});}else logging(_0x201e00(0x1b8));}),socket[_0x5988b3]['on']('get-starting-balances',_0x8aa9b8=>{const _0x2ca2ef=_0x237b06;if(validateAccess(_0x8aa9b8)[_0x2ca2ef(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3][_0x2ca2ef(0x1a8)]({'function':_0x2ca2ef(0x17e),'args':null});}else logging(_0x2ca2ef(0x198));}),socket[_0x5988b3]['on']('place-order',(_0x573256,_0x43a029)=>{const _0x263d25=_0x237b06;if(validateAccess(_0x43a029)['allow']){if(pid[_0x5988b3])pid[_0x5988b3]['send']({'function':_0x263d25(0x23e),'args':_0x573256});}else logging(_0x263d25(0x1e9));}),socket[_0x5988b3]['on'](_0x237b06(0x169),_0x158024=>{const _0xbe502e=_0x237b06;if(validateAccess(_0x158024)[_0xbe502e(0x213)]){if(pid[_0x5988b3])pid[_0x5988b3][_0xbe502e(0x1a8)]({'function':'cancelLoading','args':null});}else logging(_0xbe502e(0x162));}),socket[_0x5988b3]['on'](_0x237b06(0x20e),_0x507666=>{const _0x5526b3=_0x237b06;if(validateAccess(_0x507666)[_0x5526b3(0x213)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x18c5e7 in socket){socket[_0x18c5e7][_0x5526b3(0x17a)](_0x5526b3(0x243),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(){const _0x24cfc3=_0x25e0dc;for(let _0x2c59a7 in socket){socket[_0x2c59a7][_0x24cfc3(0x293)]();}}function cleanSettings(){const _0x3b7a8c=_0x25e0dc;let _0x595ed5=settings;return settings[_0x3b7a8c(0x164)]&&settings[_0x3b7a8c(0x164)]!=''&&(_0x595ed5={..._0x595ed5,'telegramToken':_0x3b7a8c(0x1ad)}),settings[_0x3b7a8c(0x1d1)]&&settings[_0x3b7a8c(0x1d1)]!=''&&(_0x595ed5={..._0x595ed5,'bbPassword':'************'}),_0x595ed5;}function startBot(_0x13f013,_0x4e41ad,_0x114dbe){const _0x3c7337=_0x25e0dc;let _0x314546=![];const _0x3cce0a=_0x13f013[0x0];_0x4e41ad={..._0x4e41ad,'stdio':[_0x3c7337(0x1bf),_0x3c7337(0x1bf),_0x3c7337(0x1bf),_0x3c7337(0x299)]},pid[_0x3cce0a]=childProcess[_0x3c7337(0x22a)](botfile,_0x13f013,_0x4e41ad),pid[_0x3cce0a]['on'](_0x3c7337(0x298),_0x6529eb=>{const _0xed04d6=_0x3c7337;switch(Object[_0xed04d6(0x251)](_0x6529eb)[0x0]){case _0xed04d6(0x201):updateBotName(_0x3cce0a,_0x6529eb[_0xed04d6(0x201)]);break;case'status':updateStatus(_0x3cce0a,_0x6529eb[_0xed04d6(0x243)]);break;case _0xed04d6(0x1ec):updateLive(_0x3cce0a,_0x6529eb[_0xed04d6(0x1ec)]);break;case _0xed04d6(0x1d9):updateLive(_0x3cce0a,_0x6529eb[_0xed04d6(0x1d9)]);if(socket[_0x3cce0a])socket[_0x3cce0a][_0xed04d6(0x17a)](_0xed04d6(0x243),{'access':{'allow':![],'reason':_0xed04d6(0x288),'token':null}});break;case'stop':_0x6529eb[_0xed04d6(0x24f)]==_0xed04d6(0x238)&&stopBot(_0x3cce0a);_0x6529eb[_0xed04d6(0x24f)]==_0xed04d6(0x260)&&toggleBot(_0x3cce0a,_0xed04d6(0x17c),_0xed04d6(0x24b));break;case _0xed04d6(0x1a1):sendTelegram(_0x3cce0a,_0x6529eb[_0xed04d6(0x1a1)]);break;case'function':if(socket[_0x3cce0a])socket[_0x3cce0a]['emit'](_0x6529eb[_0xed04d6(0x265)],_0x6529eb[_0xed04d6(0x244)]);break;}}),pid[_0x3cce0a]['on'](_0x3c7337(0x26f),function(_0x20b760){if(_0x314546)return;_0x314546=!![],_0x114dbe(_0x20b760);}),pid[_0x3cce0a]['on'](_0x3c7337(0x24a),function(_0x5d147e){const _0x1a086b=_0x3c7337;if(_0x314546)return;_0x314546=!![],_0x114dbe(null);const _0xcc1180=dbConfig[_0x1a086b(0x16f)](_0x1a086b(0x1ef))[_0x1a086b(0x1cb)]({'botID':_0x3cce0a})[_0x1a086b(0x267)]();_0xcc1180&&(_0xcc1180[_0x1a086b(0x243)]==_0x1a086b(0x216)||_0xcc1180[_0x1a086b(0x243)]==_0x1a086b(0x1ba))&&(updateLive(_0x3cce0a,_0x1a086b(0x24b)),logging('restarting\x20Bot\x20'+_0x3cce0a),startBot([_0x3cce0a,userID],{'cwd':bbpath},function(_0x150a24){if(_0x150a24)logging(_0x150a24);}));});}function stopBot(_0x17cf66){const _0x108b35=_0x25e0dc;if(socket[_0x17cf66])socket[_0x17cf66]['disconnect'](!![]);if(pid[_0x17cf66])pid[_0x17cf66][_0x108b35(0x260)]();}function addBot(){const _0x2d4da6=_0x25e0dc;let _0xd2ee4;for(let _0x53ea34=0x1;_0x53ea34<0x3e9;_0x53ea34++){_0xd2ee4=_0x53ea34['toString']()[_0x2d4da6(0x15f)](0x3,'0');let _0x375ea2=config['find'](_0x42efe1=>_0x42efe1[_0x2d4da6(0x1b1)]==_0xd2ee4);if(!_0x375ea2)break;}if(_0xd2ee4==='1000'){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0xd2ee4),dbConfig[_0x2d4da6(0x16f)](_0x2d4da6(0x1ef))[_0x2d4da6(0x280)]({'botID':_0xd2ee4,'botname':'Bot\x20'+_0xd2ee4,'status':'new','live':''})[_0x2d4da6(0x1b4)](),startBot([_0xd2ee4,userID],{'cwd':bbpath},function(_0xd51a49){if(_0xd51a49)logging(_0xd51a49);}),config=getConfiguration();if(socket[_0x2d4da6(0x226)])socket['botmanager']['emit']('bots',config);}function deleteBot(_0x961cb8){const _0x2f98b0=_0x25e0dc;if(socket[_0x961cb8])socket[_0x961cb8]['disconnect'](!![]);dbConfig[_0x2f98b0(0x16f)](_0x2f98b0(0x1ef))['remove']({'botID':_0x961cb8})[_0x2f98b0(0x1b4)](),logging('deleted\x20Bot\x20'+_0x961cb8),stopBot(_0x961cb8);try{fs[_0x2f98b0(0x27f)](path['join'](configpath,'bot-'+_0x961cb8+'-config.json')),fs[_0x2f98b0(0x27f)](path[_0x2f98b0(0x228)](configpath,_0x2f98b0(0x249)+_0x961cb8+_0x2f98b0(0x26b))),fs[_0x2f98b0(0x27f)](path[_0x2f98b0(0x228)](configpath,_0x2f98b0(0x249)+_0x961cb8+_0x2f98b0(0x19e))),fs[_0x2f98b0(0x27f)](path['join'](configpath,_0x2f98b0(0x249)+_0x961cb8+_0x2f98b0(0x1b0)));}catch(_0x4e1a4a){if(_0x4e1a4a)logging(_0x2f98b0(0x1a2),_0x4e1a4a);}config=getConfiguration();if(socket[_0x2f98b0(0x226)])socket[_0x2f98b0(0x226)][_0x2f98b0(0x17a)]('bots',config);}function toggleBot(_0x14fdde,_0x219909,_0x56e406){const _0x1fdfa2=_0x25e0dc;dbConfig[_0x1fdfa2(0x16f)](_0x1fdfa2(0x1ef))['find']({'botID':_0x14fdde})[_0x1fdfa2(0x193)]({'status':_0x219909})[_0x1fdfa2(0x193)]({'live':_0x56e406})[_0x1fdfa2(0x1b4)]();if(_0x219909==_0x1fdfa2(0x216)||_0x219909==_0x1fdfa2(0x1ba))logging('enabled\x20Bot\x20'+_0x14fdde),startBot([_0x14fdde,userID],{'cwd':bbpath},function(_0x125026){if(_0x125026)logging(_0x125026);});else(_0x219909=='disabled'||_0x219909==_0x1fdfa2(0x19d))&&(logging(_0x1fdfa2(0x1d3)+_0x14fdde),stopBot(_0x14fdde));config=getConfiguration();if(socket[_0x1fdfa2(0x226)])socket['botmanager'][_0x1fdfa2(0x17a)](_0x1fdfa2(0x1ef),config);}function toggleStatus(_0x5da328){const _0x4d6310=_0x25e0dc;let _0x30fc5b=dbConfig[_0x4d6310(0x16f)](_0x4d6310(0x1ef))[_0x4d6310(0x1cb)]({'botID':_0x5da328})['value'](),_0x352c2e;if(_0x30fc5b[_0x4d6310(0x243)]==='enabled')_0x352c2e=_0x4d6310(0x17c);else{if(_0x30fc5b['status']===_0x4d6310(0x1ba))_0x352c2e='new-disabled';else{if(_0x30fc5b[_0x4d6310(0x243)]===_0x4d6310(0x19d))_0x352c2e='new';else{if(_0x30fc5b[_0x4d6310(0x243)]===_0x4d6310(0x17c))_0x352c2e=_0x4d6310(0x216);}}}return _0x352c2e;}function updateStatus(_0x28dcd1,_0x17dc9b){const _0x3d2b7d=_0x25e0dc;dbConfig[_0x3d2b7d(0x16f)](_0x3d2b7d(0x1ef))[_0x3d2b7d(0x1cb)]({'botID':_0x28dcd1})[_0x3d2b7d(0x193)]({'status':_0x17dc9b})['write'](),config=getConfiguration();if(socket[_0x3d2b7d(0x226)])socket[_0x3d2b7d(0x226)][_0x3d2b7d(0x17a)](_0x3d2b7d(0x1ef),config);}function updateLive(_0x2e5f55,_0x3424a5){const _0x21c287=_0x25e0dc;dbConfig[_0x21c287(0x16f)](_0x21c287(0x1ef))[_0x21c287(0x1cb)]({'botID':_0x2e5f55})[_0x21c287(0x193)]({'live':_0x3424a5})[_0x21c287(0x1b4)](),config=getConfiguration();if(socket[_0x21c287(0x226)])socket['botmanager'][_0x21c287(0x17a)]('bots',config);}function updateBotName(_0x434c26,_0x54427d){const _0x139b62=_0x25e0dc;dbConfig[_0x139b62(0x16f)](_0x139b62(0x1ef))[_0x139b62(0x1cb)]({'botID':_0x434c26})[_0x139b62(0x193)]({'botname':_0x54427d})['write'](),config=getConfiguration();if(socket[_0x139b62(0x226)])socket['botmanager']['emit'](_0x139b62(0x1ef),config);}function telegramError(_0x205e52){const _0xed2d2f=_0x25e0dc;console[_0xed2d2f(0x1de)](getTimeStamp()+_0xed2d2f(0x22c));}function validateTelegram(_0x2b7c7c){const _0x5a7126=_0x25e0dc;if(_0x2b7c7c[_0x5a7126(0x23a)]['username']!=settings[_0x5a7126(0x223)]&&'@'+_0x2b7c7c[_0x5a7126(0x23a)][_0x5a7126(0x18a)]!=settings[_0x5a7126(0x223)])return tgBot[_0x5a7126(0x291)](_0x2b7c7c[_0x5a7126(0x176)]['id'],_0x5a7126(0x1e8),{'parse_mode':_0x5a7126(0x281)})[_0x5a7126(0x23d)](_0x1f441d=>{telegramError(_0x1f441d);}),![];return!![];}async function initTelegram(){const _0x3ddb54=_0x25e0dc;if(tgBot)tgBot[_0x3ddb54(0x261)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3ddb54(0x164)],{'polling':!![]});let _0x20c507='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x20c507+='\x0a',_0x20c507+=_0x3ddb54(0x16b),_0x20c507+=_0x3ddb54(0x1eb),_0x20c507+=_0x3ddb54(0x1e6),_0x20c507+=_0x3ddb54(0x26d),_0x20c507+=_0x3ddb54(0x1a5),_0x20c507+='/off\x20-\x20stop\x20bot(s)\x0a',_0x20c507+=_0x3ddb54(0x20b),_0x20c507+=_0x3ddb54(0x1d2);let _0x2505e6=_0x3ddb54(0x1f4);_0x2505e6+='\x0a',_0x2505e6+=_0x20c507,tgBot[_0x3ddb54(0x200)](/\/start/,_0x266b3e=>{const _0x13e91d=_0x3ddb54;if(!validateTelegram(_0x266b3e))return;if(settings['telegramChatId']!=_0x266b3e[_0x13e91d(0x176)]['id'])updateSetting('telegramChatId',_0x266b3e[_0x13e91d(0x176)]['id']);updateSetting(_0x13e91d(0x1ca),!![]),tgBot[_0x13e91d(0x291)](_0x266b3e[_0x13e91d(0x176)]['id'],_0x2505e6)[_0x13e91d(0x23d)](_0x3b807c=>{telegramError(_0x3b807c);});}),tgBot[_0x3ddb54(0x200)](/\/enable/,_0x4396ce=>{const _0x1461b0=_0x3ddb54;if(!validateTelegram(_0x4396ce))return;if(settings['telegramChatId']!=_0x4396ce[_0x1461b0(0x176)]['id'])updateSetting(_0x1461b0(0x22b),_0x4396ce['chat']['id']);updateSetting(_0x1461b0(0x1ca),!![]),tgBot[_0x1461b0(0x291)](_0x4396ce[_0x1461b0(0x176)]['id'],_0x1461b0(0x25c))[_0x1461b0(0x23d)](_0x108b13=>{telegramError(_0x108b13);});}),tgBot[_0x3ddb54(0x200)](/\/config/,async _0x1c35d9=>{const _0x169c0d=_0x3ddb54;if(!validateTelegram(_0x1c35d9))return;tgBot['removeListener'](_0x169c0d(0x218)),tgBot[_0x169c0d(0x291)](_0x1c35d9[_0x169c0d(0x176)]['id'],_0x169c0d(0x1e5),{'reply_markup':{'inline_keyboard':[[{'text':_0x169c0d(0x284),'callback_data':_0x169c0d(0x24d)},{'text':_0x169c0d(0x1a3),'callback_data':_0x169c0d(0x259)},{'text':'All','callback_data':_0x169c0d(0x224)}]]}})[_0x169c0d(0x23d)](_0x446e82=>{telegramError(_0x446e82);}),tgBot['on'](_0x169c0d(0x218),async _0xd1cba3=>{const _0x48c427=_0x169c0d,_0x386842=_0xd1cba3[_0x48c427(0x208)],_0xc5a673=_0xd1cba3['message'];tgBot[_0x48c427(0x205)](_0xd1cba3['id'])[_0x48c427(0x1c1)](async()=>{const _0x30f24c=_0x48c427;_0x386842==_0x30f24c(0x24d)&&(updateSetting('telegramEvents',_0x30f24c(0x24d)),updateSetting(_0x30f24c(0x1ca),!![]),await tgBot[_0x30f24c(0x291)](_0xc5a673[_0x30f24c(0x176)]['id'],_0x30f24c(0x247))[_0x30f24c(0x23d)](_0x32b357=>{telegramError(_0x32b357);}));_0x386842==_0x30f24c(0x259)&&(updateSetting(_0x30f24c(0x21e),_0x30f24c(0x259)),updateSetting(_0x30f24c(0x1ca),!![]),await tgBot[_0x30f24c(0x291)](_0xc5a673[_0x30f24c(0x176)]['id'],_0x30f24c(0x1ff))[_0x30f24c(0x23d)](_0x5256b7=>{telegramError(_0x5256b7);}));_0x386842=='all'&&(updateSetting(_0x30f24c(0x21e),_0x30f24c(0x224)),updateSetting(_0x30f24c(0x1ca),!![]),await tgBot[_0x30f24c(0x291)](_0xc5a673[_0x30f24c(0x176)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x30f24c(0x23d)](_0x2a5a45=>{telegramError(_0x2a5a45);}));if(!settings[_0x30f24c(0x22b)])tgBot[_0x30f24c(0x291)](_0xc5a673['chat']['id'],_0x30f24c(0x256))[_0x30f24c(0x23d)](_0x48f4a5=>{telegramError(_0x48f4a5);});}),tgBot[_0x48c427(0x1d7)](_0x48c427(0x218));});}),tgBot['onText'](/\/status/,_0x2a3813=>{const _0x286410=_0x3ddb54;if(!validateTelegram(_0x2a3813))return;let _0x53a0b7='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x286410(0x1d5)](_0x23c42a=>{const _0x2827cf=_0x286410;_0x53a0b7+='Bot\x20'+_0x23c42a[_0x2827cf(0x1b1)]+'\x20|\x20'+_0x23c42a[_0x2827cf(0x201)]+':\x20'+_0x23c42a[_0x2827cf(0x243)]+_0x2827cf(0x283)+_0x23c42a[_0x2827cf(0x1ec)]+'\x0a';}),_0x53a0b7+='\x0a',_0x53a0b7+=_0x286410(0x19b),_0x53a0b7+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x286410(0x1e3),_0x53a0b7+=settings[_0x286410(0x1ca)]?settings['telegramEvents']==_0x286410(0x224)?_0x286410(0x26e):_0x286410(0x1d0)+settings['telegramEvents']+_0x286410(0x186):'',tgBot[_0x286410(0x291)](_0x2a3813[_0x286410(0x176)]['id'],_0x53a0b7,{'parse_mode':'HTML'})['catch'](_0x178fd5=>{telegramError(_0x178fd5);});}),tgBot[_0x3ddb54(0x200)](/\/restart/,_0x4b4a44=>{const _0x1f5a57=_0x3ddb54;if(!validateTelegram(_0x4b4a44))return;tgBot[_0x1f5a57(0x1d7)]('callback_query');const _0x4d212e=getEnabledBots();if(_0x4d212e[_0x1f5a57(0x24c)]==0x0)tgBot[_0x1f5a57(0x291)](_0x4b4a44[_0x1f5a57(0x176)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x24cc9c=>{telegramError(_0x24cc9c);});else{if(_0x4d212e[_0x1f5a57(0x24c)]>0x1)_0x4d212e['push']({'botID':_0x1f5a57(0x224)});let _0x2599a0=[],_0x451437=[];const _0x1a4826=_0x4d212e[_0x1f5a57(0x24c)]%0x4==0x0||_0x4d212e[_0x1f5a57(0x24c)]%0x4==0x3||_0x4d212e[_0x1f5a57(0x24c)]%0x3==0x1?0x4:0x3;let _0x1f5e09=0x0;_0x4d212e[_0x1f5a57(0x1d5)]((_0xc9dc4b,_0x3099f0)=>{const _0x55d3c2=_0x1f5a57;if(_0x3099f0%_0x1a4826==0x0)_0x451437=[];_0x451437[_0x55d3c2(0x280)]({'text':_0xc9dc4b[_0x55d3c2(0x1b1)]==_0x55d3c2(0x224)?_0x55d3c2(0x1d8):'Bot\x20'+_0xc9dc4b[_0x55d3c2(0x1b1)],'callback_data':_0xc9dc4b[_0x55d3c2(0x1b1)]}),_0x3099f0%_0x1a4826==0x0&&(_0x2599a0[_0x1f5e09]=_0x451437,_0x1f5e09++);}),tgBot[_0x1f5a57(0x291)](_0x4b4a44[_0x1f5a57(0x176)]['id'],_0x1f5a57(0x1bc),{'reply_markup':{'inline_keyboard':_0x2599a0}})['catch'](_0x2cb696=>{telegramError(_0x2cb696);}),tgBot['on'](_0x1f5a57(0x218),async _0x11ae38=>{const _0xb8a0a5=_0x1f5a57,_0xdae9c7=_0x11ae38[_0xb8a0a5(0x208)],_0x233ca9=_0x11ae38[_0xb8a0a5(0x298)];tgBot[_0xb8a0a5(0x205)](_0x11ae38['id'])['then'](async()=>{const _0x17502d=_0xb8a0a5;if(_0xdae9c7==_0x17502d(0x224)){if(settings['telegramEvents']=='orders')tgBot[_0x17502d(0x291)](_0x233ca9['chat']['id'],_0x17502d(0x1bd))[_0x17502d(0x23d)](_0x2aa1f1=>{telegramError(_0x2aa1f1);});config[_0x17502d(0x1d5)](_0x3d0fd5=>{stopBot(_0x3d0fd5['botID']);});}else{if(settings[_0x17502d(0x21e)]=='orders')tgBot[_0x17502d(0x291)](_0x233ca9[_0x17502d(0x176)]['id'],_0x17502d(0x19f)+_0xdae9c7)[_0x17502d(0x23d)](_0x2f7095=>{telegramError(_0x2f7095);});stopBot(_0xdae9c7);}}),tgBot[_0xb8a0a5(0x1d7)](_0xb8a0a5(0x218));});}}),tgBot[_0x3ddb54(0x200)](/\/on/,_0x2c33d7=>{const _0x4b96d1=_0x3ddb54;if(!validateTelegram(_0x2c33d7))return;tgBot['removeListener']('callback_query');const _0x460e73=getDisabledBots();if(_0x460e73[_0x4b96d1(0x24c)]==0x0)tgBot[_0x4b96d1(0x291)](_0x2c33d7[_0x4b96d1(0x176)]['id'],_0x4b96d1(0x199))[_0x4b96d1(0x23d)](_0x17abdd=>{telegramError(_0x17abdd);});else{if(_0x460e73['length']>0x1)_0x460e73[_0x4b96d1(0x280)]({'botID':_0x4b96d1(0x224)});let _0x1f524d=[],_0x2c550e=[];const _0xba1775=_0x460e73[_0x4b96d1(0x24c)]%0x4==0x0||_0x460e73['length']%0x4==0x3||_0x460e73['length']%0x3==0x1?0x4:0x3;let _0x2f33cb=0x0;_0x460e73[_0x4b96d1(0x1d5)]((_0x57f412,_0x2640db)=>{const _0x684b4a=_0x4b96d1;if(_0x2640db%_0xba1775==0x0)_0x2c550e=[];_0x2c550e[_0x684b4a(0x280)]({'text':_0x57f412[_0x684b4a(0x1b1)]==_0x684b4a(0x224)?_0x684b4a(0x1d8):'Bot\x20'+_0x57f412[_0x684b4a(0x1b1)],'callback_data':_0x57f412['botID']}),_0x2640db%_0xba1775==0x0&&(_0x1f524d[_0x2f33cb]=_0x2c550e,_0x2f33cb++);}),tgBot['sendMessage'](_0x2c33d7['chat']['id'],_0x4b96d1(0x25f),{'reply_markup':{'inline_keyboard':_0x1f524d}})['catch'](_0x2e1e60=>{telegramError(_0x2e1e60);}),tgBot['on']('callback_query',async _0x2a0c92=>{const _0x517df2=_0x4b96d1,_0xba13ec=_0x2a0c92[_0x517df2(0x208)],_0x53c2e1=_0x2a0c92[_0x517df2(0x298)];tgBot[_0x517df2(0x205)](_0x2a0c92['id'])[_0x517df2(0x1c1)](async()=>{const _0x8557ff=_0x517df2;if(_0xba13ec=='all'){if(settings['telegramEvents']=='orders')tgBot[_0x8557ff(0x291)](_0x53c2e1[_0x8557ff(0x176)]['id'],_0x8557ff(0x21c))[_0x8557ff(0x23d)](_0x47ec0f=>{telegramError(_0x47ec0f);});_0x460e73['forEach'](_0x2330b3=>{const _0x5e9a76=_0x8557ff;if(_0x2330b3[_0x5e9a76(0x1b1)]!='all')toggleBot(_0x2330b3[_0x5e9a76(0x1b1)],toggleStatus(_0x2330b3['botID']),_0x5e9a76(0x24b));});}else{if(settings['telegramEvents']==_0x8557ff(0x24d))tgBot['sendMessage'](_0x53c2e1[_0x8557ff(0x176)]['id'],_0x8557ff(0x172)+_0xba13ec)[_0x8557ff(0x23d)](_0x3e2a9f=>{telegramError(_0x3e2a9f);});toggleBot(_0xba13ec,toggleStatus(_0xba13ec),_0x8557ff(0x24b));}}),tgBot[_0x517df2(0x1d7)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x2cfa31=>{const _0x5dcbc7=_0x3ddb54;if(!validateTelegram(_0x2cfa31))return;tgBot[_0x5dcbc7(0x1d7)](_0x5dcbc7(0x218));const _0x832729=getEnabledBots();if(_0x832729['length']==0x0)tgBot[_0x5dcbc7(0x291)](_0x2cfa31['chat']['id'],_0x5dcbc7(0x227))[_0x5dcbc7(0x23d)](_0x538c70=>{telegramError(_0x538c70);});else{if(_0x832729[_0x5dcbc7(0x24c)]>0x1)_0x832729[_0x5dcbc7(0x280)]({'botID':_0x5dcbc7(0x224)});let _0x348e28=[],_0x24a1da=[];const _0x51190c=_0x832729[_0x5dcbc7(0x24c)]%0x4==0x0||_0x832729['length']%0x4==0x3||_0x832729[_0x5dcbc7(0x24c)]%0x3==0x1?0x4:0x3;let _0x56bd96=0x0;_0x832729[_0x5dcbc7(0x1d5)]((_0x22f263,_0x56613c)=>{const _0x112709=_0x5dcbc7;if(_0x56613c%_0x51190c==0x0)_0x24a1da=[];_0x24a1da[_0x112709(0x280)]({'text':_0x22f263[_0x112709(0x1b1)]=='all'?'All\x20bots':_0x112709(0x1fa)+_0x22f263[_0x112709(0x1b1)],'callback_data':_0x22f263['botID']}),_0x56613c%_0x51190c==0x0&&(_0x348e28[_0x56bd96]=_0x24a1da,_0x56bd96++);}),tgBot['sendMessage'](_0x2cfa31[_0x5dcbc7(0x176)]['id'],_0x5dcbc7(0x28e),{'reply_markup':{'inline_keyboard':_0x348e28}})[_0x5dcbc7(0x23d)](_0x4410f5=>{telegramError(_0x4410f5);}),tgBot['on'](_0x5dcbc7(0x218),async _0x35f68c=>{const _0x357c02=_0x5dcbc7,_0x5bef1b=_0x35f68c['data'],_0x4fbf71=_0x35f68c[_0x357c02(0x298)];tgBot['answerCallbackQuery'](_0x35f68c['id'])[_0x357c02(0x1c1)](async()=>{const _0x4a8004=_0x357c02;if(_0x5bef1b==_0x4a8004(0x224)){if(settings[_0x4a8004(0x21e)]==_0x4a8004(0x24d))tgBot[_0x4a8004(0x291)](_0x4fbf71[_0x4a8004(0x176)]['id'],_0x4a8004(0x166))[_0x4a8004(0x23d)](_0x176d3f=>{telegramError(_0x176d3f);});_0x832729[_0x4a8004(0x1d5)](_0x1b8547=>{const _0x46c392=_0x4a8004;if(_0x1b8547[_0x46c392(0x1b1)]!=_0x46c392(0x224))toggleBot(_0x1b8547[_0x46c392(0x1b1)],toggleStatus(_0x1b8547[_0x46c392(0x1b1)]),_0x46c392(0x24b));});}else{if(settings[_0x4a8004(0x21e)]==_0x4a8004(0x24d))tgBot[_0x4a8004(0x291)](_0x4fbf71[_0x4a8004(0x176)]['id'],_0x4a8004(0x1c7)+_0x5bef1b)[_0x4a8004(0x23d)](_0x4cacc1=>{telegramError(_0x4cacc1);});toggleBot(_0x5bef1b,toggleStatus(_0x5bef1b),_0x4a8004(0x24b));}}),tgBot[_0x357c02(0x1d7)]('callback_query');});}}),tgBot[_0x3ddb54(0x200)](/\/disable/,_0x2a5d24=>{const _0x483128=_0x3ddb54;if(!validateTelegram(_0x2a5d24))return;tgBot[_0x483128(0x291)](_0x2a5d24[_0x483128(0x176)]['id'],_0x483128(0x28c))['catch'](_0x34cb19=>{telegramError(_0x34cb19);}),updateSetting(_0x483128(0x1ca),![]);}),tgBot['onText'](/\/help/,_0x260e30=>{const _0x11602d=_0x3ddb54;if(!validateTelegram(_0x260e30))return;tgBot['sendMessage'](_0x260e30[_0x11602d(0x176)]['id'],_0x20c507)['catch'](_0x55bcca=>{telegramError(_0x55bcca);});}),tgBot['on']('polling_error',_0x167bf1=>{const _0x7b0768=_0x3ddb54;if(_0x167bf1[_0x7b0768(0x272)]()['includes']('404\x20Not\x20Found')){logging(_0x7b0768(0x250)),tgBot[_0x7b0768(0x261)](),tgBot=null;if(socket[_0x7b0768(0x226)])socket['botmanager'][_0x7b0768(0x17a)](_0x7b0768(0x185),'Invalid\x20Telegram\x20token');}}),process[_0x3ddb54(0x225)](_0x3ddb54(0x1bb),()=>{const _0x3f6b4c=_0x3ddb54;if(tgBot)tgBot[_0x3f6b4c(0x261)]();process[_0x3f6b4c(0x24a)](0x1);}),process[_0x3ddb54(0x225)](_0x3ddb54(0x170),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){const _0x220463=_0x25e0dc;tgBot&&(tgBot[_0x220463(0x261)](),tgBot=null);}function sendTelegram(_0x58a36f,_0x47d7d4){const _0x439b9a=_0x25e0dc;if(settings[_0x439b9a(0x1ca)]){if(settings[_0x439b9a(0x21e)]==_0x439b9a(0x224)||(_0x47d7d4[_0x439b9a(0x242)]=='error'||_0x47d7d4[_0x439b9a(0x242)]=='success')&&settings['telegramEvents']==_0x439b9a(0x259)||_0x47d7d4[_0x439b9a(0x242)]==_0x439b9a(0x1df)&&settings['telegramEvents']==_0x439b9a(0x24d)){if(tgBot&&settings[_0x439b9a(0x22b)]){if(_0x47d7d4[_0x439b9a(0x1c0)])tgBot[_0x439b9a(0x291)](settings['telegramChatId'],_0x47d7d4[_0x439b9a(0x201)]+_0x439b9a(0x1e7)+_0x47d7d4[_0x439b9a(0x29a)])['catch'](_0x4256d6=>{telegramError(_0x4256d6);});else tgBot[_0x439b9a(0x291)](settings[_0x439b9a(0x22b)],_0x439b9a(0x1fa)+_0x58a36f+'\x20>\x20'+_0x47d7d4[_0x439b9a(0x29a)])[_0x439b9a(0x23d)](_0x34211b=>{telegramError(_0x34211b);});}}}}function temporaryAccess2FA(_0x3e0059){const _0x2b5024=_0x25e0dc;let _0x14661c=new Date(),_0x34eef0=![];if(lastIpApproval){if(_0x14661c-lastIpApproval<0x1388)_0x34eef0=!![];}lastIpApproval=new Date();if(_0x34eef0)return;tgBot&&settings[_0x2b5024(0x22b)]&&(tgBot[_0x2b5024(0x1d7)](_0x2b5024(0x218)),tgBot['sendMessage'](settings[_0x2b5024(0x22b)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3e0059)['show']+_0x2b5024(0x21f),{'parse_mode':_0x2b5024(0x281),'reply_markup':{'inline_keyboard':[[{'text':_0x2b5024(0x22e),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2b5024(0x20c),'callback_data':'30'},{'text':_0x2b5024(0x18b),'callback_data':_0x2b5024(0x18b)}]]}})[_0x2b5024(0x23d)](_0x384e8c=>{telegramError(_0x384e8c);}),tgBot['on'](_0x2b5024(0x218),async _0xb65696=>{const _0x10fad0=_0x2b5024,_0x24ea5e=_0xb65696['data'],_0xa51466=_0xb65696[_0x10fad0(0x298)];tgBot[_0x10fad0(0x205)](_0xb65696['id'])[_0x10fad0(0x1c1)](async()=>{const _0x37d8ac=_0x10fad0;if(_0x24ea5e!=_0x37d8ac(0x18b)){telegramIpApproval={'clientip':_0x3e0059,'timestamp':new Date()[_0x37d8ac(0x23f)](),'expiry':_0x24ea5e},await tgBot[_0x37d8ac(0x291)](_0xa51466[_0x37d8ac(0x176)]['id'],_0x37d8ac(0x187)+_0x24ea5e+'\x20minutes',{'parse_mode':'HTML'})['catch'](_0x5a4ba0=>{telegramError(_0x5a4ba0);});for(let _0x1b46a2 in socket){socket[_0x1b46a2]['emit'](_0x37d8ac(0x243),{'access':{'allow':![],'reason':_0x37d8ac(0x288),'token':null}});}}else await tgBot[_0x37d8ac(0x291)](_0xa51466[_0x37d8ac(0x176)]['id'],_0x37d8ac(0x268))[_0x37d8ac(0x23d)](_0x63b5de=>{telegramError(_0x63b5de);});}),tgBot['removeListener'](_0x10fad0(0x218));}));}function loginAccess2FA(_0x1fe0c3){const _0x45355c=_0x25e0dc;tgBot&&settings[_0x45355c(0x22b)]&&(tgBot[_0x45355c(0x1d7)](_0x45355c(0x218)),tgBot[_0x45355c(0x291)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1fe0c3)['show']+_0x45355c(0x21f),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x45355c(0x25a),'callback_data':loginExpiry},{'text':_0x45355c(0x18b),'callback_data':'reject'}]]}})[_0x45355c(0x23d)](_0x13b9d3=>{telegramError(_0x13b9d3);}),tgBot['on'](_0x45355c(0x218),async _0x25eb09=>{const _0x28dbea=_0x45355c,_0x34cd10=_0x25eb09[_0x28dbea(0x208)],_0x2e22df=_0x25eb09[_0x28dbea(0x298)];tgBot[_0x28dbea(0x205)](_0x25eb09['id'])[_0x28dbea(0x1c1)](async()=>{const _0x4285e2=_0x28dbea;if(_0x34cd10!=_0x4285e2(0x18b)){telegram2FaApproval={'clientip':_0x1fe0c3,'timestamp':new Date()[_0x4285e2(0x23f)](),'expiry':_0x34cd10},await tgBot['sendMessage'](_0x2e22df[_0x4285e2(0x176)]['id'],'Login\x20accepted',{'parse_mode':_0x4285e2(0x281)})[_0x4285e2(0x23d)](_0x4e143a=>{telegramError(_0x4e143a);});for(let _0x6e5845 in socket){socket[_0x6e5845]['emit'](_0x4285e2(0x243),{'access':{'allow':![],'reason':_0x4285e2(0x288),'token':null}});}}else await tgBot['sendMessage'](_0x2e22df['chat']['id'],_0x4285e2(0x212))['catch'](_0x19e72c=>{telegramError(_0x19e72c);});}),tgBot['removeListener'](_0x28dbea(0x218));}));}function getConfiguration(){const _0x4d95a0=_0x25e0dc;return dbConfig['get'](_0x4d95a0(0x1ef))[_0x4d95a0(0x27a)](_0x4d95a0(0x1b1))['value']()||[];}function getEnabledBots(){const _0x3366a2=_0x25e0dc;return dbConfig[_0x3366a2(0x16f)]('bots')[_0x3366a2(0x27a)](_0x3366a2(0x1b1))[_0x3366a2(0x1be)]({'status':_0x3366a2(0x216)})[_0x3366a2(0x267)]()||[];}function getDisabledBots(){const _0x2ada3d=_0x25e0dc;return dbConfig[_0x2ada3d(0x16f)](_0x2ada3d(0x1ef))[_0x2ada3d(0x27a)]('botID')[_0x2ada3d(0x1be)]({'status':_0x2ada3d(0x17c)})[_0x2ada3d(0x267)]()||[];}function getSettings(){const _0x5cb382=_0x25e0dc;return dbSettings['get']('settings')[_0x5cb382(0x267)]()||{'timeshift':0x0};}function getSecure(){const _0x131485=_0x25e0dc;return dbSecure[_0x131485(0x16f)](_0x131485(0x17b))[_0x131485(0x267)]()||{};}function getBlacklist(){const _0x1d7e07=_0x25e0dc;return dbSecure[_0x1d7e07(0x16f)](_0x1d7e07(0x22f))[_0x1d7e07(0x267)]()||[];}function broadcastToBots(_0x4d3206,_0x1152b5){const _0x36c850=_0x25e0dc;config[_0x36c850(0x1d5)](_0x387fa4=>{const _0x37f6ca=_0x36c850;if(_0x387fa4[_0x37f6ca(0x243)]=='enabled'&&_0x387fa4[_0x37f6ca(0x1ec)]==_0x37f6ca(0x264)){if(pid[_0x387fa4[_0x37f6ca(0x1b1)]])pid[_0x387fa4[_0x37f6ca(0x1b1)]]['send']({[_0x4d3206]:_0x1152b5});}});}function storeSettings(_0x107616,_0x17d456=![]){const _0x14a14c=_0x25e0dc;_0x107616={...settings,..._0x107616};if(_0x17d456&&_0x107616['bbPassword']!=_0x14a14c(0x1ad)&&_0x107616[_0x14a14c(0x1d1)]!=''){const _0x2a062f=crypt[_0x14a14c(0x1dc)](secure[_0x14a14c(0x184)],_0x107616[_0x14a14c(0x1d1)])[_0x14a14c(0x298)][_0x14a14c(0x1a4)]('@')[0x0],_0x283fd2=bcrypt[_0x14a14c(0x220)](_0x2a062f,saltRounds);_0x107616={..._0x107616,'bbPassword':_0x283fd2};}if(_0x17d456&&_0x107616[_0x14a14c(0x164)]!=_0x14a14c(0x1ad)&&_0x107616[_0x14a14c(0x164)]!=''){const _0x493a78=crypt[_0x14a14c(0x1dc)](secure['privateKey'],_0x107616['telegramToken'])['message']['split']('@')[0x0];_0x107616={..._0x107616,'telegramToken':_0x493a78};}const _0x593d04=_0x107616['telegramToken']!=_0x14a14c(0x1ad)&&_0x107616[_0x14a14c(0x164)]!=settings[_0x14a14c(0x164)]||_0x107616[_0x14a14c(0x223)]!=settings[_0x14a14c(0x223)],_0x2773fc=_0x107616['telegramToken']==''||_0x107616['telegramUsername']=='';if(_0x593d04)_0x107616['telegramEvents']=_0x14a14c(0x224);for(const [_0x11b949,_0x229029]of Object[_0x14a14c(0x165)](_0x107616)){if(_0x11b949==_0x14a14c(0x164)&&_0x229029==_0x14a14c(0x1ad)){_0x107616[_0x14a14c(0x164)]=settings[_0x14a14c(0x164)];continue;};if(_0x11b949==_0x14a14c(0x1d1)&&_0x229029==_0x14a14c(0x1ad)){_0x107616['bbPassword']=settings[_0x14a14c(0x1d1)];continue;};dbSettings[_0x14a14c(0x1f0)](_0x14a14c(0x196)+_0x11b949,_0x229029)[_0x14a14c(0x1b4)]();}settings=_0x107616;if(socket[_0x14a14c(0x226)])socket[_0x14a14c(0x226)][_0x14a14c(0x17a)]('settings',cleanSettings());broadcastToBots(_0x14a14c(0x190),settings['timeshift']);if(_0x593d04&&!_0x2773fc)initTelegram();if(_0x593d04&&_0x2773fc)disableTelegram();for(let _0x25f31e in socket){setAccess(_0x25f31e);}}function updateSetting(_0x2e53f6,_0x4047fd){const _0xc842ec=_0x25e0dc;dbSettings['set'](_0xc842ec(0x196)+_0x2e53f6,_0x4047fd)[_0xc842ec(0x1b4)](),settings=getSettings();if(socket[_0xc842ec(0x226)])socket[_0xc842ec(0x226)]['emit'](_0xc842ec(0x167),cleanSettings());}function storeSecure(_0x21fac5){const _0x42b79c=_0x25e0dc;dbSecure['get'](_0x42b79c(0x17b))[_0x42b79c(0x280)](_0x21fac5)['write'](),secure=_0x21fac5;}function addBlacklist(){const _0x5cc8a5=_0x25e0dc;cleanBlacklist();let _0x3c7326;telegramIpApproval?_0x3c7326=Math[_0x5cc8a5(0x229)](telegramIpApproval['expiry'],loginExpiry):_0x3c7326=loginExpiry,dbSecure['get'](_0x5cc8a5(0x22f))[_0x5cc8a5(0x280)]({'expiry':new Date()[_0x5cc8a5(0x23f)]()+_0x3c7326*0x3c*0x3e8,'token':token})[_0x5cc8a5(0x1b4)](),blacklist=dbSecure['get'](_0x5cc8a5(0x22f))['value']();}function cleanBlacklist(){const _0x135c9c=_0x25e0dc;let _0x5dae40=dbSecure[_0x135c9c(0x16f)](_0x135c9c(0x22f))['cloneDeep']()['value'](),_0xf4c9fc=new Date()[_0x135c9c(0x23f)]();_0x5dae40[_0x135c9c(0x1d5)](_0x6bef03=>{const _0x5381bf=_0x135c9c;_0x6bef03[_0x5381bf(0x1cd)]<_0xf4c9fc&&dbSecure[_0x5381bf(0x16f)](_0x5381bf(0x22f))[_0x5381bf(0x1f5)]({'expiry':_0x6bef03[_0x5381bf(0x1cd)]})[_0x5381bf(0x1b4)]();});}function initStates(){const _0x75b3a0=_0x25e0dc;let _0x4ce8b0=getConfiguration();_0x4ce8b0[_0x75b3a0(0x1d5)](_0x16c8eb=>{const _0x1dba20=_0x75b3a0;_0x16c8eb[_0x1dba20(0x1ec)]=_0x1dba20(0x24b);}),storeConfiguration(_0x4ce8b0);}function onKeys(){const _0x276a22=new RSA();return new Promise(_0x45c46b=>{const _0x514412=_0x2d86;_0x276a22[_0x514412(0x1f7)]()[_0x514412(0x1c1)](_0x299963=>{_0x45c46b(_0x299963);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x348b6a=_0x25e0dc;let _0x599b3e=getConfiguration(),_0x1faa7e=![];_0x599b3e['forEach'](_0x1ab602=>{const _0x3ec92c=_0x2d86;if(_0x1ab602[_0x3ec92c(0x243)]==_0x3ec92c(0x264))_0x1ab602[_0x3ec92c(0x243)]=_0x3ec92c(0x216),_0x1faa7e=!![];else _0x1ab602[_0x3ec92c(0x243)]==_0x3ec92c(0x24b)&&(_0x1ab602[_0x3ec92c(0x243)]=_0x3ec92c(0x17c),_0x1faa7e=!![]);});if(_0x1faa7e)storeConfiguration(_0x599b3e);let _0x5c18ac=getSecure();if(!_0x5c18ac[_0x348b6a(0x297)](_0x348b6a(0x1b6))){let _0x43aaee=await generateKeys();_0x5c18ac[_0x348b6a(0x258)]=_0x43aaee[_0x348b6a(0x258)],_0x5c18ac[_0x348b6a(0x184)]=_0x43aaee[_0x348b6a(0x184)],_0x5c18ac['secret']=crypto['randomBytes'](0x20)['toString'](_0x348b6a(0x18c));;storeSecure(_0x5c18ac);}let _0x4d62ab=getSettings();_0x1faa7e=![];!_0x4d62ab[_0x348b6a(0x297)](_0x348b6a(0x1aa))&&(_0x4d62ab[_0x348b6a(0x1aa)]=![],_0x4d62ab['bbUsername']='',_0x4d62ab[_0x348b6a(0x1d1)]='',_0x4d62ab[_0x348b6a(0x1f6)]=![],_0x1faa7e=!![]);!_0x4d62ab['hasOwnProperty']('whitelistEnabled')&&(_0x4d62ab['whitelistEnabled']=![],_0x4d62ab[_0x348b6a(0x1b9)]=[],_0x4d62ab[_0x348b6a(0x1f3)]=![],_0x1faa7e=!![]);if(!_0x4d62ab[_0x348b6a(0x297)](_0x348b6a(0x1ca))){if(_0x4d62ab[_0x348b6a(0x22b)])_0x4d62ab[_0x348b6a(0x1ca)]=!![];else _0x4d62ab['telegramEnabled']=![];_0x1faa7e=!![];}if(_0x1faa7e)storeSettings(_0x4d62ab);}function _0x1271(){const _0x3876d5=['exp','answerCallbackQuery','getUTCHours','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','data','/:bot/history','getMonth','/status\x20-\x20show\x20bot(s)\x20status\x0a','30\x20min','Invalid\x20authentication\x20token\x20(2)','logout','lowdb','2FA\x20login\x20required','defaults','Login\x20rejected','allow','hybrid-crypto-js','reason','enabled','emitHistory','callback_query','getMinutes','127.0.0.1','get-portfolio','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','starting\x20bot\x20|\x20Bot\x20','telegramEvents','</b>\x20?','hashSync','Invalid\x20IP\x20address','name','telegramUsername','all','once','botmanager','No\x20bots\x20running\x20right\x20now','join','max','fork','telegramChatId',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','existsSync','5\x20min','blacklist','readdirSync','starting','toIPv4Address','::1','argv','bb/','/:bot/support','copyFileSync','restart','3000','from','remoteAddress','connected','catch','placeOrder','getTime','sign','1728446FaCrkG','type','status','args','UA-192771731-1','isValid','Ok,\x20will\x20send\x20order\x20notifications\x20only','index.html','bot-','exit','stopped','length','orders','encryptedUuid','stop','Invalid\x20Telegram\x20token','keys','reset-password','version.json',',\x20must\x20be\x20a\x204\x20digit\x20number','search','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','ipv6','publicKey','alerts','accept','RSA-OAEP','Notifications\x20enabled','bbUsername','Invalid\x20authentication\x20token\x20(1)','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','kill','stopPolling','Token\x20blacklisted','sendFile','running','function','isIPv4MappedAddress','value','Temporary\x20access\x20rejected','10846896iSjJco','Unauthorized\x20attempt\x20to\x20get\x20logs','-events.json','3WuXsFp','/restart\x20-\x20restart\x20bot(s)\x0a','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','error','Unauthorized\x20attempt\x20to\x20delete\x20bot','User\x20has\x20been\x20validated','toString','/:bot/coins','lowdb/adapters/FileSync','analytics','update-bot','add','token','/:bot','sortBy','-----------------------------------------------------------------------------------','No\x20authentication\x20token','NTBA_FIX_319','2FA\x20required','unlinkSync','push','HTML','disconnect','\x20/\x20','Orders','match','2FA\x20login\x20token\x20generated','getFullYear','reload','\x20|\x20','store-headless','RSA','Notifications\x20disabled','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Bot\x20Mgr\x20>\x20','headers','sendMessage','10480144reViYw','removeAllListeners','get-logs','toIPv4MappedAddress','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','hasOwnProperty','message','ipc','event','build','padStart','Unauthorized\x20attempt\x20to\x20get\x20portfolio','ipaddr.js','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','getHours','telegramToken','entries','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','settings','getPortfolio','cancel-loading','temporary\x20token\x20generated','/enable\x20-\x20enable\x20notifications\x0a','createServer','https://hodlerhacks.com','express','get','SIGTERM','temporary\x20access\x20not\x20allowed','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','includes','static','handshake','chat','auth','access\x20timeout','initclient','emit','secure','disabled','Balance\x20Bot\x20Server','getStartingBalances','Password\x20reset\x20rejected','login','date-fns','4403452hAnKle','isDirectory','privateKey','notification','\x20only\x0a','Access\x20enabled\x20for\x20','login\x20token\x20valid','1862726DSTRsA','username','reject','hex','default','timestamp','config/','timeshift','compareSync','clientip','assign',':\x20Bot\x20Mgr\x20>\x20','getDate','settings.','Balance\x20Bot','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','All\x20bots\x20running\x20right\x20now','apiKey','<b>Telegram\x20bot\x20status:</b>\x0a','/:bot/performance','new-disabled','-performance.json','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','telegram','error\x20while\x20deleting\x20config\x20files:\x20','Alerts','split','/on\x20-\x20start\x20bot(s)\x0a','5NgCaOX','map','send','success','loginRequired','login\x20token\x20generated','Error:\x20Invalid\x20argument\x20','************','sha256','Unauthorized\x20attempt\x20to\x20store\x20configuration','-results.json','botID','constructor','build2','write','verify','secret','login\x20required','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','whitelist','new','SIGINT','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','filter','inherit','showname','then','bcryptjs','invalid\x20credentials','randomFillSync','store','conn','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','bot.js','/:bot/portfolio','telegramEnabled','find','mkdirSync','expiry','7430066nafFNv','test','Notifications\x20types:\x20','bbPassword','/help\x20-\x20show\x20avaiable\x20commands\x0a','disabled\x20Bot\x20','use','forEach','login\x20not\x20required','removeListener','All\x20bots','started','12490140kpdkkD','@analytics/google-analytics','decrypt','9dSAYbK','log','order','crypto','socket.io','Unauthorized\x20attempt\x20to\x20add\x20bot','Notifications\x20enabled\x0a','2FA','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20>\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','store-settings','/disable\x20-\x20disable\x20notifications\x0a','live','bb-settings.json','backup/','bots','set','storeHeadless','Unauthorized\x20attempt\x20to\x20update\x20bot','temporaryAccessAllowed','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','remove','f2aRequired','generateKeyPairAsync','path','storeConfiguration','Bot\x20','password','Crypt','store-configuration','getSeconds','Ok,\x20will\x20send\x20alert\x20notifications\x20only','onText','botname','Unauthorized\x20attempt\x20to\x20log\x20out','/:bot/configuration'];_0x1271=function(){return _0x3876d5;};return _0x1271();}function storeConfiguration(_0xc213bf){const _0x497ea9=_0x25e0dc;dbConfig[_0x497ea9(0x16f)](_0x497ea9(0x1ef))['remove']()[_0x497ea9(0x1b4)](),dbConfig[_0x497ea9(0x16f)](_0x497ea9(0x1ef))['push'](..._0xc213bf)[_0x497ea9(0x1b4)](),config=_0xc213bf;}function resetPassword(){const _0x15b544=_0x25e0dc;tgBot&&settings['telegramChatId']&&(tgBot[_0x15b544(0x1d7)](_0x15b544(0x218)),tgBot[_0x15b544(0x291)](settings['telegramChatId'],_0x15b544(0x28d),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x15b544(0x23d)](_0xae9720=>{telegramError(_0xae9720);}),tgBot['on'](_0x15b544(0x218),async _0x2e4634=>{const _0x8bed00=_0x15b544,_0x159c82=_0x2e4634[_0x8bed00(0x208)],_0x589b3d=_0x2e4634['message'];tgBot['answerCallbackQuery'](_0x2e4634['id'])[_0x8bed00(0x1c1)](async()=>{const _0x5506fd=_0x8bed00;if(_0x159c82!='no'){const _0x5d9fcd=0xf,_0x41a0c7=_0x5506fd(0x207),_0x3611a2=Array[_0x5506fd(0x23a)](crypto[_0x5506fd(0x1c4)](new Uint32Array(_0x5d9fcd)))[_0x5506fd(0x1a7)](_0x4c8b44=>_0x41a0c7[_0x4c8b44%_0x41a0c7[_0x5506fd(0x24c)]])[_0x5506fd(0x228)](''),_0x4b8b6e=bcrypt['hashSync'](_0x3611a2,saltRounds);storeSettings({'bbPassword':_0x4b8b6e}),await tgBot['sendMessage'](_0x589b3d[_0x5506fd(0x176)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3611a2,{'parse_mode':_0x5506fd(0x281)})['catch'](_0x3d9d53=>{telegramError(_0x3d9d53);});}else await tgBot[_0x5506fd(0x291)](_0x589b3d[_0x5506fd(0x176)]['id'],_0x5506fd(0x17f))[_0x5506fd(0x23d)](_0x578a7a=>{telegramError(_0x578a7a);});}),tgBot[_0x8bed00(0x1d7)](_0x8bed00(0x218));}));}function logging(_0x18a8af){const _0x416bb5=_0x25e0dc;console[_0x416bb5(0x1de)](getTimeStamp()+_0x416bb5(0x194)+_0x18a8af);if(tgBot&&settings[_0x416bb5(0x22b)]&&settings['telegramEvents']!=_0x416bb5(0x24d))tgBot[_0x416bb5(0x291)](settings[_0x416bb5(0x22b)],_0x416bb5(0x28f)+_0x18a8af)[_0x416bb5(0x23d)](_0x1cdd7a=>{telegramError(_0x1cdd7a);});}function getServerTime(){const _0x10a30d=_0x25e0dc,_0x32e024=new Date();return _0x32e024[_0x10a30d(0x287)]()+'/'+(_0x32e024['getMonth']()+0x1)[_0x10a30d(0x272)]()[_0x10a30d(0x15f)](0x2,'0')+'/'+_0x32e024[_0x10a30d(0x195)]()[_0x10a30d(0x272)]()[_0x10a30d(0x15f)](0x2,'0')+'\x20'+_0x32e024[_0x10a30d(0x163)]()[_0x10a30d(0x272)]()[_0x10a30d(0x15f)](0x2,'0')+':'+_0x32e024[_0x10a30d(0x219)]()[_0x10a30d(0x272)]()[_0x10a30d(0x15f)](0x2,'0')+':'+_0x32e024[_0x10a30d(0x1fe)]()['toString']()[_0x10a30d(0x15f)](0x2,'0');}function getTimeStamp(){const _0x2ccfd9=_0x25e0dc,_0x623db7=shiftedTime();return _0x623db7['getFullYear']()+'/'+(_0x623db7[_0x2ccfd9(0x20a)]()+0x1)[_0x2ccfd9(0x272)]()[_0x2ccfd9(0x15f)](0x2,'0')+'/'+_0x623db7[_0x2ccfd9(0x195)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x623db7[_0x2ccfd9(0x163)]()[_0x2ccfd9(0x272)]()[_0x2ccfd9(0x15f)](0x2,'0')+':'+_0x623db7[_0x2ccfd9(0x219)]()[_0x2ccfd9(0x272)]()[_0x2ccfd9(0x15f)](0x2,'0')+':'+_0x623db7[_0x2ccfd9(0x1fe)]()[_0x2ccfd9(0x272)]()[_0x2ccfd9(0x15f)](0x2,'0');}function shiftedTime(){const _0x4461e0=_0x25e0dc,_0x4ebe4c=new Date();let _0x2a103a=_0x4ebe4c;if(settings[_0x4461e0(0x190)]&&settings[_0x4461e0(0x190)]!==0x0)_0x2a103a=fns[_0x4461e0(0x277)](_0x4ebe4c,{'hours':settings['timeshift']});return _0x2a103a;}function startScheduler(){const _0x215a65=_0x25e0dc;let _0x16dbeb=new Date()[_0x215a65(0x206)]();_0x16dbeb==0x1&&backupConfigFiles();_0x16dbeb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3202f3=_0x25e0dc;fs[_0x3202f3(0x230)](configpath,{'withFileTypes':!![]})[_0x3202f3(0x1d5)](_0x48de65=>{const _0x1972c5=_0x3202f3;if(!_0x48de65[_0x1972c5(0x183)]())fs[_0x1972c5(0x237)](configpath+_0x48de65[_0x1972c5(0x222)],configbackuppath+_0x48de65['name']);});}function triggerAnalytics(){const _0x141721=_0x25e0dc;analytics['page']({'title':_0x141721(0x17d),'href':_0x141721(0x16d),'path':'/v'+serverversion});}function validateCredentials(_0x4a0efb){const _0x3dbed4=_0x25e0dc;if(_0x4a0efb[_0x3dbed4(0x18a)]==settings[_0x3dbed4(0x25d)]&&bcrypt[_0x3dbed4(0x191)](_0x4a0efb[_0x3dbed4(0x1fb)],settings[_0x3dbed4(0x1d1)])){if(settings[_0x3dbed4(0x1f6)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x49e233=generateLoginToken();return{'allow':!![],'reason':_0x3dbed4(0x1ab),'token':_0x49e233};}}else return{'allow':![],'reason':_0x3dbed4(0x1c3),'token':null};}function refreshToken(){const _0x548aac=_0x25e0dc,_0x5404b8=generateLoginToken();return{'allow':!![],'reason':_0x548aac(0x1ab),'token':_0x5404b8};}function validateAccess(_0xf64231){const _0x3b88ef=_0x25e0dc;let _0x3dffe5;const _0xbab37f=_0x363ad5=>{const _0x425aa4=_0x2d86;if(settings['loginRequired']){if(settings[_0x425aa4(0x1f6)]){if(telegram2FaApproved()){const _0x186ceb=generateLoginToken();return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x186ceb};}else return{'allow':![],'reason':_0x425aa4(0x210),'token':null};}else return _0x3dffe5=validToken(_0x363ad5),_0x3dffe5[_0x425aa4(0x297)](_0x425aa4(0x1a9))?{'allow':!![],'reason':_0x425aa4(0x188),'token':_0x363ad5}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x425aa4(0x1d6),'token':null};};if(settings['whitelistEnabled']){let _0x2bed30=[...settings['whitelist'],_0x3b88ef(0x233),'::ffff:127.0.0.1',_0x3b88ef(0x21a)];if(_0x2bed30[_0x3b88ef(0x173)](externalip))return _0xbab37f(_0xf64231);else{_0x3dffe5=validToken(_0xf64231);if(_0x3dffe5[_0x3b88ef(0x297)](_0x3b88ef(0x1a9)))return _0xbab37f(_0xf64231);else{if(telegramIpApproved()){const _0x1e725e=generateToken();return _0x3dffe5=_0xbab37f(_0xf64231),_0x3dffe5[_0x3b88ef(0x213)]?{'allow':!![],'reason':_0x3b88ef(0x16a),'token':_0x1e725e}:_0x3dffe5;}else return settings[_0x3b88ef(0x1f3)]?{'allow':![],'reason':_0x3b88ef(0x27e),'token':null}:{'allow':![],'reason':_0x3b88ef(0x171),'token':null};}}}else return _0xbab37f(_0xf64231);}function timelyDecrypt(_0x21549e,_0x4eeb0f=!![]){const _0x587fa0=_0x25e0dc;if(_0x21549e)try{const _0x51ecdb=crypt[_0x587fa0(0x1dc)](secure[_0x587fa0(0x184)],_0x21549e)[_0x587fa0(0x298)],_0x3f1cbb=_0x51ecdb['split']('@')[0x0],_0x48019e=_0x51ecdb['split']('@')[0x1],_0x19e3c7=new Date()[_0x587fa0(0x23f)]();if(_0x4eeb0f){if(_0x19e3c7-_0x48019e<maxSecretAge*0x3e8)return _0x3f1cbb;else return![];}else return _0x3f1cbb;}catch{return![];}else return![];}const validToken=_0x1a2517=>{const _0x6f3225=_0x25e0dc;if(!_0x1a2517)return{'error':_0x6f3225(0x27c)};for(let _0x4ed7ef of blacklist){if(_0x4ed7ef['token']==_0x1a2517)return{'error':_0x6f3225(0x262)};}let _0x5bfb3e;try{_0x5bfb3e=jwt[_0x6f3225(0x1b5)](_0x1a2517,secure[_0x6f3225(0x1b6)]+uuid);}catch{return{'error':_0x6f3225(0x25e)};}if(!_0x5bfb3e[_0x6f3225(0x297)](_0x6f3225(0x192))&&!_0x5bfb3e[_0x6f3225(0x297)](_0x6f3225(0x18a))||!_0x5bfb3e[_0x6f3225(0x297)](_0x6f3225(0x204)))return{'error':_0x6f3225(0x20d)};if(!_0x5bfb3e['hasOwnProperty'](_0x6f3225(0x18a))&&_0x5bfb3e[_0x6f3225(0x297)](_0x6f3225(0x192))){const {clientip:_0x30ceda}=_0x5bfb3e;return externalip==_0x30ceda?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x6f3225(0x221)};}else{if(_0x5bfb3e[_0x6f3225(0x297)](_0x6f3225(0x18a))&&_0x5bfb3e[_0x6f3225(0x297)]('clientip')){const {username:_0x3b8ab5,clientip:_0x52cc71}=_0x5bfb3e;return settings['bbUsername']==_0x3b8ab5&&externalip==_0x52cc71?{'success':_0x6f3225(0x271)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=()=>{const _0x31356b=_0x25e0dc;if(uuid)return jwt['sign']({'username':settings[_0x31356b(0x25d)],'clientip':externalip},secure[_0x31356b(0x1b6)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x11419d=_0x25e0dc;if(uuid)return jwt[_0x11419d(0x240)]({'clientip':externalip},secure[_0x11419d(0x1b6)]+uuid,{'expiresIn':telegramIpApproval[_0x11419d(0x1cd)]*0x3c});else return![];},telegramIpApproved=()=>{const _0x34913c=_0x25e0dc;let _0x16d0e2=![];return telegramIpApproval&&telegramIpApproval[_0x34913c(0x1cd)]!=_0x34913c(0x18b)&&(_0x16d0e2=telegramIpApproval[_0x34913c(0x192)]==externalip&&new Date()[_0x34913c(0x23f)]()-telegramIpApproval[_0x34913c(0x18e)]<telegramIpApproval[_0x34913c(0x1cd)]*0x3c*0x3e8),_0x16d0e2;},telegram2FaApproved=()=>{const _0x27b953=_0x25e0dc;let _0x3f3674=![];return telegram2FaApproval&&telegram2FaApproval['expiry']!=_0x27b953(0x18b)&&(_0x3f3674=telegram2FaApproval[_0x27b953(0x192)]==externalip&&new Date()[_0x27b953(0x23f)]()-telegram2FaApproval['timestamp']<telegram2FaApproval[_0x27b953(0x1cd)]*0x3c*0x3e8),_0x3f3674;},normalizeIP=_0x2643eb=>{const _0x34fc81=_0x25e0dc;let _0x1ae8bc=null,_0x4a3b42=null;if(ipaddr[_0x34fc81(0x246)](_0x2643eb)){const _0x5024d6=ipaddr['parse'](_0x2643eb);_0x5024d6['kind']()===_0x34fc81(0x257)?(_0x5024d6[_0x34fc81(0x266)]()&&(_0x1ae8bc=_0x5024d6[_0x34fc81(0x232)]()[_0x34fc81(0x272)]()),_0x4a3b42=_0x5024d6[_0x34fc81(0x272)]()):(_0x1ae8bc=_0x5024d6[_0x34fc81(0x272)](),_0x4a3b42=_0x5024d6[_0x34fc81(0x295)]()[_0x34fc81(0x272)]());}return{'show':_0x1ae8bc?_0x1ae8bc:_0x4a3b42,'store':_0x4a3b42};};