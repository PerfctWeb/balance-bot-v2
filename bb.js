const _0x1f7aa7=_0x2d59;(function(_0x3962c9,_0xb5b3be){const _0x3725d3=_0x2d59,_0x10949e=_0x3962c9();while(!![]){try{const _0x2d400b=-parseInt(_0x3725d3(0x143))/0x1*(-parseInt(_0x3725d3(0x149))/0x2)+parseInt(_0x3725d3(0xb9))/0x3+-parseInt(_0x3725d3(0xfb))/0x4*(-parseInt(_0x3725d3(0x194))/0x5)+parseInt(_0x3725d3(0x142))/0x6*(parseInt(_0x3725d3(0x19a))/0x7)+-parseInt(_0x3725d3(0x123))/0x8+-parseInt(_0x3725d3(0xec))/0x9*(-parseInt(_0x3725d3(0x199))/0xa)+-parseInt(_0x3725d3(0x13a))/0xb;if(_0x2d400b===_0xb5b3be)break;else _0x10949e['push'](_0x10949e['shift']());}catch(_0x3bd688){_0x10949e['push'](_0x10949e['shift']());}}}(_0x4136,0x49aad));const _0x245192=function(){let _0x30a712=!![];return function(_0x26cac9,_0x4809af){const _0x4c3e24=_0x30a712?function(){const _0x280abb=_0x2d59;if(_0x4809af){const _0x5574e5=_0x4809af[_0x280abb(0xc4)](_0x26cac9,arguments);return _0x4809af=null,_0x5574e5;}}:function(){};return _0x30a712=![],_0x4c3e24;};}(),_0x114459=_0x245192(this,function(){const _0x4d2530=_0x2d59;return _0x114459[_0x4d2530(0xad)]()[_0x4d2530(0xfa)](_0x4d2530(0x13c))['toString']()[_0x4d2530(0x1c5)](_0x114459)['search']('(((.+)+)+)+$');});_0x114459();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x1f7aa7(0xca)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1f7aa7(0x131)),low=require('lowdb'),path=require('path'),crypto=require('crypto'),Crypt=require(_0x1f7aa7(0x146))[_0x1f7aa7(0x1c3)],RSA=require('hybrid-crypto-js')[_0x1f7aa7(0x167)],bcrypt=require(_0x1f7aa7(0xc5)),jwt=require(_0x1f7aa7(0xd3)),analyticsLib=require(_0x1f7aa7(0x17d))['default'],googleAnalytics=require(_0x1f7aa7(0x12d))[_0x1f7aa7(0x101)],ipaddr=require('ipaddr.js');let bbpath='bb/';function _0x2d59(_0x23b22c,_0x44b022){const _0x450ca9=_0x4136();return _0x2d59=function(_0x114459,_0x245192){_0x114459=_0x114459-0xa6;let _0x41362d=_0x450ca9[_0x114459];return _0x41362d;},_0x2d59(_0x23b22c,_0x44b022);}const botfile=_0x1f7aa7(0x1a7),configfile=_0x1f7aa7(0x1b3),settingsfile=_0x1f7aa7(0x150),securefile=_0x1f7aa7(0x11e);!fs[_0x1f7aa7(0x14d)](bbpath+botfile)&&(bbpath='');const configpath=bbpath+'config/';!fs[_0x1f7aa7(0x14d)](configpath)&&fs['mkdirSync'](configpath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1f7aa7(0x108)]({'settings':{'timeshift':0x0}})[_0x1f7aa7(0x10a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1f7aa7(0x108)]({'secure':{},'blacklist':[]})[_0x1f7aa7(0x10a)]();let crypt=new Crypt({'md':_0x1f7aa7(0x1b7),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+_0x1f7aa7(0x128))[_0x1f7aa7(0xbe)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require(_0x1f7aa7(0x192)),app=express(),http=require(_0x1f7aa7(0x15e))[_0x1f7aa7(0xb1)](app);app[_0x1f7aa7(0xa7)](express['static'](path[_0x1f7aa7(0xd4)](__dirname,bbpath,_0x1f7aa7(0x13d)))),app[_0x1f7aa7(0xa7)](express[_0x1f7aa7(0xf8)](path[_0x1f7aa7(0xd4)](__dirname,bbpath,_0x1f7aa7(0x1c4)))),app['get']('/',function(_0x3abb2e,_0x4a0573){const _0x2bf9f8=_0x1f7aa7;_0x4a0573[_0x2bf9f8(0x12f)](path['join'](__dirname,bbpath,_0x2bf9f8(0x13d),_0x2bf9f8(0x100)));}),app[_0x1f7aa7(0xbd)](_0x1f7aa7(0xe9),function(_0xd90083,_0x4a550c){const _0x3a703e=_0x1f7aa7;_0x4a550c[_0x3a703e(0x12f)](path['join'](__dirname,bbpath,_0x3a703e(0x1c4),'index.html'));}),app[_0x1f7aa7(0xbd)](_0x1f7aa7(0xe8),(_0x2ac4bf,_0x3c2c64)=>{const _0x14fd5d=_0x1f7aa7;_0x3c2c64[_0x14fd5d(0x12f)](path['join'](__dirname,bbpath,'build',_0x14fd5d(0x100)));}),app[_0x1f7aa7(0xbd)](_0x1f7aa7(0x183),(_0xf9ac0,_0x1856e6)=>{const _0x12b7c2=_0x1f7aa7;_0x1856e6[_0x12b7c2(0x12f)](path[_0x12b7c2(0xd4)](__dirname,bbpath,'build',_0x12b7c2(0x100)));}),app[_0x1f7aa7(0xbd)](_0x1f7aa7(0xdd),(_0x5c2a6b,_0x1f2643)=>{const _0x4af5dd=_0x1f7aa7;_0x1f2643[_0x4af5dd(0x12f)](path[_0x4af5dd(0xd4)](__dirname,bbpath,_0x4af5dd(0x1c4),'index.html'));}),app['get'](_0x1f7aa7(0x10e),(_0x724e20,_0x46bec6)=>{const _0x3121d4=_0x1f7aa7;_0x46bec6[_0x3121d4(0x12f)](path[_0x3121d4(0xd4)](__dirname,bbpath,_0x3121d4(0x1c4),_0x3121d4(0x100)));}),app['get'](_0x1f7aa7(0x122),(_0x46f5c7,_0x57bd05)=>{const _0x5478ba=_0x1f7aa7;_0x57bd05[_0x5478ba(0x12f)](path[_0x5478ba(0xd4)](__dirname,bbpath,'build',_0x5478ba(0x100)));}),app[_0x1f7aa7(0xbd)]('/:bot/support',(_0x5612d2,_0x3f7eb2)=>{const _0x2ea840=_0x1f7aa7;_0x3f7eb2[_0x2ea840(0x12f)](path['join'](__dirname,bbpath,_0x2ea840(0x1c4),_0x2ea840(0x100)));}),http[_0x1f7aa7(0x15d)](PORT);const analytics=analyticsLib({'app':_0x1f7aa7(0xab),'plugins':[googleAnalytics({'trackingId':_0x1f7aa7(0x170)})]}),TelegramBot=require(_0x1f7aa7(0x19d));let tgBot;if(settings[_0x1f7aa7(0x1c1)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x1f7aa7(0xed)]!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function _0x4136(){const _0x416e59=['http','/disable\x20-\x20disable\x20notifications\x0a','Invalid\x20Telegram\x20token','polling_error','getUTCHours','accept','stopPolling','Invalid\x20authentication\x20token\x20(1)','\x20minutes','RSA','Unauthorized\x20attempt\x20to\x20delete\x20bot','************','push','Invalid\x20authentication\x20token\x20(2)','allow','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','function','once','UA-192771731-1','removeListener','f2aRequired','temporary\x20token\x20generated','new-disabled','Markdown','connected','status','store-configuration','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Ok,\x20will\x20send\x20order\x20notifications\x20only','event','send','analytics','args','Unauthorized\x20attempt\x20to\x20update\x20settings','generateKeyPairAsync','then',':\x20Bot\x20Mgr\x20>\x20','/:bot/performance','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','remoteAddress','expiry','reason','\x20|\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','getMonth','delete-bot','stopped','answerCallbackQuery','sortBy','reject','15\x20min','express','getSeconds','5fLecIO','get-portfolio','value','get-starting-balances','storeConfiguration','2685610MHPpxV','1393ltKShz','404\x20Not\x20Found','getMinutes','node-telegram-bot-api','started','placeMarketOrder','User\x20has\x20been\x20validated','blacklist','all','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','live','30\x20min','ipv6','bot.js','disabled','Invalid\x20IP\x20address','All','kill','referer','match','log','removeAllListeners','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20add\x20bot','Token\x20blacklisted','bb-config.json','update-bot','password','2FA\x20login\x20token\x20generated','sha256','Ok,\x20will\x20send\x20alert\x20notifications\x20only','remove','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','from','Bot\x20Mgr\x20>\x20','disconnect','\x20/\x20','-----------------------------------------------------------------------------------','SIGTERM','telegramToken','getTime','Crypt','build','constructor','login\x20token\x20generated','use','telegramChatId','padStart','decrypt','Balance\x20Bot','bots','toString','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','::1','inherit','createServer','Alerts','unlinkSync','success','sendMessage','2FA\x20login\x20required','*Balance\x20Bot\x20status:*\x0a','loginRequired','328248YASfQX','Access\x20enabled\x20for\x20','message','bbPassword','get','version','split',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','hex','Notifications\x20enabled\x0a','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','apply','bcryptjs','starting','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','handshake','\x20only\x0a','child_process','encryptedUuid','max','parse','disabled\x20Bot\x20','orders','127.0.0.1','*\x20?','whitelistEnabled','jsonwebtoken','join','\x20>\x20','sign','SIGINT','timestamp','data','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20*','length','Unauthorized\x20attempt\x20to\x20get\x20logs','/:bot/coins','whitelist','Notifications\x20types:\x20','5\x20min','getStartingBalances','publicKey','catch','hasOwnProperty','idling\x20bot\x20\x20\x20|\x20Bot\x20','restarting\x20Bot\x20','secure','/:bot/portfolio','/:bot','onText','set','9mEMyiH','telegramUsername','-config.json','assign','-performance.json','botmanager','reset-password','callback_query','type','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Bot\x20','secret','static','randomFillSync','search','2410316GLhRyI','headers','telegramEnabled','botID','2FA','index.html','default','show','new','telegram','getDate','filter','privateKey','defaults','Allow\x20login\x20from\x20IP\x20address\x20*','write','hashSync','username','temporaryAccessAllowed','/:bot/history','entries','auth','timeshift','chat','error','enabled','exp','bbUsername','login','running','bot-','Orders','get-logs','keys','login\x20token\x20valid','bb-secure.json','deleted\x20Bot\x20','login\x20required','exit','/:bot/configuration','2327312SJBoJG','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','starting\x20bot\x20|\x20Bot\x20','forEach','settings','version.json','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','clientip','alerts','*Telegram\x20bot\x20status:\x0a*','@analytics/google-analytics','emit','sendFile','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','date-fns','botname','Unauthorized\x20attempt\x20to\x20log\x20out','store','https://hodlerhacks.com','isValid','reload','invalid\x20credentials','settings.','5783877uhgCLk','login\x20not\x20required','(((.+)+)+)+$','build2','storeHeadless','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20*personal*\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','logout','1000','3318SRYRHE','27859gfelmR','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','find','hybrid-crypto-js','Password\x20has\x20been\x20reset\x20to:\x20','add','2wEwjdo','logged\x20out','telegramEvents','Invalid\x20username\x20or\x20IP\x20address','existsSync','apiKey','getHours','bb-settings.json','Login\x20rejected','compareSync','yes','token','-results.json','Notifications\x20enabled','Notifications\x20disabled','fork','randomBytes','add-bot','2FA\x20required','getFullYear','listen'];_0x4136=function(){return _0x416e59;};return _0x4136();}function startServer(){const _0xa5526c=_0x1f7aa7;console[_0xa5526c(0x1ae)](''),console[_0xa5526c(0x1ae)](_0xa5526c(0x1bf)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0xa5526c(0x1ae)](_0xa5526c(0x1bf));if(config['length']!=0x0)config[_0xa5526c(0x126)](_0x3a79a0=>{const _0x12c779=_0xa5526c;if(_0x3a79a0['status']==_0x12c779(0x114)||_0x3a79a0['status']=='new')logging(_0x12c779(0x125)+_0x3a79a0[_0x12c779(0xfe)]+_0x12c779(0x188)+_0x3a79a0[_0x12c779(0x132)]),startBot([_0x3a79a0[_0x12c779(0xfe)]],{'cwd':bbpath},function(_0x1531dc){if(_0x1531dc)logging(_0x1531dc);});else(_0x3a79a0[_0x12c779(0x177)]==_0x12c779(0x1a8)||_0x3a79a0[_0x12c779(0x177)]==_0x12c779(0x174))&&logging(_0x12c779(0xe5)+_0x3a79a0[_0x12c779(0xfe)]+_0x12c779(0x188)+_0x3a79a0['botname']);});else!newBot&&console[_0xa5526c(0x1ae)](_0xa5526c(0xae));if(newBot)addBot();console[_0xa5526c(0x1ae)](_0xa5526c(0x1bf)),console[_0xa5526c(0x1ae)]('');}function startSocket(){const _0x43e23a=require('socket.io')(http,{});_0x43e23a['on']('connection',_0x53db84=>{const _0x34b311=_0x2d59;let _0x3d4054,_0x4753b2,_0x357230;const _0x1da429=_0x53db84[_0x34b311(0xc8)][_0x34b311(0xfc)][_0x34b311(0x1ac)],_0x10112f=_0x53db84['handshake'][_0x34b311(0x110)][_0x34b311(0xcb)];if(!_0x10112f)_0x53db84[_0x34b311(0x12e)](_0x34b311(0x177),{'publicKey':secure[_0x34b311(0xe2)]});else{uuid=timelyDecrypt(_0x53db84[_0x34b311(0xc8)][_0x34b311(0x110)][_0x34b311(0xcb)],![]),_0x4753b2=_0x1da429[_0x34b311(0x1ad)](/bot[0-9]{3}/);if(_0x4753b2)_0x357230=_0x4753b2[0x0][_0x34b311(0x1ad)](/[0-9]{3}/);if(_0x357230)_0x3d4054=_0x357230[0x0];else _0x3d4054=_0x34b311(0xf1);if(socket[_0x3d4054])socket[_0x3d4054][_0x34b311(0x1bd)](!![]);socket[_0x3d4054]=_0x53db84,setAccess(_0x3d4054);if(accessControl[_0x34b311(0x16c)]){if(_0x3d4054==_0x34b311(0xf1))initializeSocketBotManager();else initializeSocketBot(_0x3d4054);}if(!serverStatus[_0x3d4054])serverStatus[_0x3d4054]=_0x34b311(0x176);socket[_0x3d4054]['on']('login',_0x5dd341=>{const _0x154fc3=_0x34b311,_0x17b4ff=timelyDecrypt(_0x5dd341[_0x154fc3(0x1b5)]);if(_0x17b4ff){_0x5dd341={'username':_0x5dd341[_0x154fc3(0x10c)],'password':_0x17b4ff};let _0x520e40=validateCredentials(_0x5dd341);if(_0x520e40[_0x154fc3(0x16c)]==![]&&_0x520e40['reason']==_0x154fc3(0xb6))socket[_0x3d4054]['emit'](_0x154fc3(0x177),{'access':_0x520e40}),loginAccess2FA(externalip);else{if(_0x520e40[_0x154fc3(0x16c)]==![]&&_0x520e40[_0x154fc3(0x187)]==_0x154fc3(0x138))socket[_0x3d4054]['emit'](_0x154fc3(0x177),{'access':_0x520e40});else{if(_0x520e40[_0x154fc3(0x16c)]&&_0x520e40[_0x154fc3(0x187)]==_0x154fc3(0xa6)){token=_0x520e40[_0x154fc3(0x154)];for(let _0x2f36b5 in socket){if(_0x2f36b5==_0x154fc3(0xf1))initializeSocketBotManager();else initializeSocketBot(_0x2f36b5);socket[_0x2f36b5][_0x154fc3(0x12e)]('status',{'status':serverStatus[_0x2f36b5]||_0x154fc3(0xc6),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x520e40,'externalip':externalip,'publicKey':secure[_0x154fc3(0xe2)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout('login');}}}}else logging(_0x154fc3(0x184));}),socket[_0x3d4054]['on'](_0x34b311(0xf2),()=>{resetPassword();}),socket[_0x3d4054]['on']('disconnect',_0x316b32=>{let _0x2b729a=[];for(let _0x20a4d9 in socket){if(_0x20a4d9!=_0x3d4054)_0x2b729a[_0x20a4d9]=socket[_0x20a4d9];}socket=_0x2b729a;});if(_0x3d4054!=_0x34b311(0xf1)&&config[_0x34b311(0x14e)]!=''){if(pid[_0x3d4054])pid[_0x3d4054]['send']({'function':'initclient','args':null});}}});}function setAccess(_0x56485c){const _0x224087=_0x1f7aa7;externalip=normalizeIP(socket[_0x56485c]['conn'][_0x224087(0x185)])[_0x224087(0x134)],accessControl=validateAccess(token),accessControl['token']&&accessControl[_0x224087(0x187)]==_0x224087(0x173)&&setSessionTimeout(_0x224087(0xff)),accessControl[_0x224087(0x154)]&&accessControl[_0x224087(0x187)]==_0x224087(0x1b6)&&setSessionTimeout('login'),socket[_0x56485c][_0x224087(0x12e)](_0x224087(0x177),{'status':serverStatus[_0x56485c]||_0x224087(0xc6),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure[_0x224087(0xe2)],'loginNow':accessControl['reason']=='login\x20required'||accessControl[_0x224087(0x187)]==_0x224087(0xb6)}),accessControl[_0x224087(0x16c)]==![]&&accessControl[_0x224087(0x187)]==_0x224087(0x15b)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x2d7440){const _0xd653ec=_0x1f7aa7;let _0x38a500;if(_0x2d7440==_0xd653ec(0x117))_0x38a500=loginExpiry*0x3c*0x3e8;else _0x38a500=telegramIpApproval[_0xd653ec(0x186)]*0x3c*0x3e8-(new Date()[_0xd653ec(0x1c2)]()-telegramIpApproval[_0xd653ec(0xd8)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x55419c=_0xd653ec;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x32d98e=validateAccess(token);if(!(_0x32d98e[_0x55419c(0x16c)]&&_0x32d98e[_0x55419c(0x187)]==_0x55419c(0x13b)))for(let _0x38ab1a in socket){socket[_0x38ab1a][_0x55419c(0x12e)](_0x55419c(0x177),{'access':{'allow':![],'reason':'access\x20timeout','token':null}});}token=null;},_0x38a500);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x5d61fc=_0x2d59;let _0x4377d7=refreshToken();for(let _0xa8985a in socket){socket[_0xa8985a][_0x5d61fc(0x12e)](_0x5d61fc(0x177),{'status':serverStatus[_0xa8985a]||_0x5d61fc(0xc6),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x4377d7,'externalip':externalip,'publicKey':secure[_0x5d61fc(0xe2)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x5373be=_0x1f7aa7;socket['botmanager'][_0x5373be(0x12e)](_0x5373be(0xac),config),socket[_0x5373be(0xf1)][_0x5373be(0x12e)](_0x5373be(0x127),cleanSettings()),socket[_0x5373be(0xf1)]['on'](_0x5373be(0x15a),_0x308e16=>{const _0xfe2744=_0x5373be;if(validateAccess(_0x308e16)[_0xfe2744(0x16c)])addBot();else logging(_0xfe2744(0x1b1));}),socket[_0x5373be(0xf1)]['on'](_0x5373be(0x1b4),(_0x5cb2da,_0x18709a)=>{const _0x436996=_0x5373be;if(validateAccess(_0x18709a)[_0x436996(0x16c)])toggleBot(_0x5cb2da['botID'],_0x5cb2da[_0x436996(0x177)],_0x5cb2da[_0x436996(0x1a4)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),socket['botmanager']['on'](_0x5373be(0x18c),(_0x26d8d6,_0x4c8e14)=>{const _0x1575cc=_0x5373be;if(validateAccess(_0x4c8e14)[_0x1575cc(0x16c)])deleteBot(_0x26d8d6);else logging(_0x1575cc(0x168));}),socket[_0x5373be(0xf1)]['on']('store-settings',(_0xc9bee2,_0x16c8d0)=>{const _0x40586d=_0x5373be;if(validateAccess(_0x16c8d0)[_0x40586d(0x16c)])storeSettings(_0xc9bee2,!![]);else logging(_0x40586d(0x17f));}),socket['botmanager']['on'](_0x5373be(0x140),_0x372c6d=>{const _0x2a28bc=_0x5373be;if(validateAccess(_0x372c6d)[_0x2a28bc(0x16c)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x3459df in socket){socket[_0x3459df][_0x2a28bc(0x12e)]('status',{'access':{'allow':![],'reason':_0x2a28bc(0x14a),'token':null}});}}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x169584){const _0x1fb7d6=_0x1f7aa7;socket[_0x169584]['on'](_0x1fb7d6(0x11b),(_0x4671be,_0x46f40f)=>{const _0x2164b7=_0x1fb7d6;if(validateAccess(_0x46f40f)['allow']){if(pid[_0x169584])pid[_0x169584][_0x2164b7(0x17c)]({'function':'emitHistory','args':_0x4671be});}else logging(_0x2164b7(0xdc));}),socket[_0x169584]['on'](_0x1fb7d6(0x195),(_0xb6214,_0x3934a2)=>{const _0x47493b=_0x1fb7d6;if(validateAccess(_0x3934a2)[_0x47493b(0x16c)]){if(pid[_0x169584])pid[_0x169584]['send']({'function':'getPortfolio','args':_0xb6214});}else logging(_0x47493b(0xf5));}),socket[_0x169584]['on'](_0x1fb7d6(0x178),(_0x39f6ad,_0x2f5ec6)=>{const _0x513eec=_0x1fb7d6;if(validateAccess(_0x2f5ec6)[_0x513eec(0x16c)]){if(pid[_0x169584])pid[_0x169584]['send']({'function':_0x513eec(0x198),'args':_0x39f6ad});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),socket[_0x169584]['on']('store-headless',(_0x14ab6c,_0x376f9c)=>{const _0x2e8bd7=_0x1fb7d6;if(validateAccess(_0x376f9c)[_0x2e8bd7(0x16c)]){if(pid[_0x169584])pid[_0x169584]['send']({'function':_0x2e8bd7(0x13e),'args':_0x14ab6c});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),socket[_0x169584]['on'](_0x1fb7d6(0x197),_0x23d583=>{const _0x266673=_0x1fb7d6;if(validateAccess(_0x23d583)[_0x266673(0x16c)]){if(pid[_0x169584])pid[_0x169584][_0x266673(0x17c)]({'function':_0x266673(0xe1),'args':null});}else logging(_0x266673(0x129));}),socket[_0x169584]['on']('market-order',(_0x44bb86,_0x4ad23e)=>{const _0x77c3d4=_0x1fb7d6;if(validateAccess(_0x4ad23e)['allow']){if(pid[_0x169584])pid[_0x169584][_0x77c3d4(0x17c)]({'function':_0x77c3d4(0x19f),'args':_0x44bb86});}else logging(_0x77c3d4(0x1ba));}),socket[_0x169584]['on'](_0x1fb7d6(0x140),_0x4c2b54=>{const _0x184190=_0x1fb7d6;if(validateAccess(_0x4c2b54)[_0x184190(0x16c)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x39266a in socket){socket[_0x39266a][_0x184190(0x12e)](_0x184190(0x177),{'access':{'allow':![],'reason':_0x184190(0x14a),'token':null}});}}else logging(_0x184190(0x133));});}function removeSocketListeners(){const _0x414f5a=_0x1f7aa7;for(let _0x2ed4dc in socket){socket[_0x2ed4dc][_0x414f5a(0x1af)]();}}function cleanSettings(){const _0x5ddea3=_0x1f7aa7;let _0x3aa36e=settings;return settings['telegramToken']&&settings[_0x5ddea3(0x1c1)]!=''&&(_0x3aa36e={..._0x3aa36e,'telegramToken':_0x5ddea3(0x169)}),settings[_0x5ddea3(0xbc)]&&settings[_0x5ddea3(0xbc)]!=''&&(_0x3aa36e={..._0x3aa36e,'bbPassword':'************'}),_0x3aa36e;}function startBot(_0x4cd616,_0xa9d2e0,_0x36e49d){const _0x2804c7=_0x1f7aa7;let _0xb31f0c=![];const _0xe233e6=_0x4cd616[0x0];_0xa9d2e0={..._0xa9d2e0,'stdio':[_0x2804c7(0xb0),'inherit',_0x2804c7(0xb0),'ipc']},pid[_0xe233e6]=childProcess[_0x2804c7(0x158)](botfile,_0x4cd616,_0xa9d2e0),pid[_0xe233e6]['on'](_0x2804c7(0xbb),_0x9d026b=>{const _0x28b108=_0x2804c7;switch(Object[_0x28b108(0x11c)](_0x9d026b)[0x0]){case _0x28b108(0x132):updateBotName(_0xe233e6,_0x9d026b[_0x28b108(0x132)]);break;case _0x28b108(0x177):updateStatus(_0xe233e6,_0x9d026b['status']);break;case'live':updateLive(_0xe233e6,_0x9d026b[_0x28b108(0x1a4)]);break;case'started':updateLive(_0xe233e6,_0x9d026b[_0x28b108(0x19e)]);if(socket[_0xe233e6])socket[_0xe233e6][_0x28b108(0x12e)](_0x28b108(0x177),{'access':{'allow':![],'reason':_0x28b108(0x137),'token':null}});break;case'telegram':sendTelegram(_0xe233e6,_0x9d026b[_0x28b108(0x104)]);break;case'function':if(socket[_0xe233e6])socket[_0xe233e6]['emit'](_0x9d026b[_0x28b108(0x16e)],_0x9d026b[_0x28b108(0x17e)]);break;}}),pid[_0xe233e6]['on'](_0x2804c7(0x113),function(_0x338dd6){if(_0xb31f0c)return;_0xb31f0c=!![],_0x36e49d(_0x338dd6);}),pid[_0xe233e6]['on'](_0x2804c7(0x121),function(_0x20fd21){const _0x401f0e=_0x2804c7;if(_0xb31f0c)return;_0xb31f0c=!![],_0x36e49d(null);const _0x6bc643=dbConfig[_0x401f0e(0xbd)]('bots')['find']({'botID':_0xe233e6})[_0x401f0e(0x196)]();_0x6bc643&&(_0x6bc643['status']==_0x401f0e(0x114)||_0x6bc643[_0x401f0e(0x177)]==_0x401f0e(0x103))&&(updateLive(_0xe233e6,_0x401f0e(0x18d)),_0x20fd21!=0x4d&&(logging(_0x401f0e(0xe6)+_0xe233e6),startBot([_0xe233e6],{'cwd':bbpath},function(_0x44cdf1){if(_0x44cdf1)logging(_0x44cdf1);})));});}function stopBot(_0x33c926){const _0x2b4d19=_0x1f7aa7;if(socket[_0x33c926])socket[_0x33c926][_0x2b4d19(0x1bd)](!![]);if(pid[_0x33c926])pid[_0x33c926][_0x2b4d19(0x1ab)]();}function addBot(){const _0x2a85c2=_0x1f7aa7;let _0x22a2b8;for(let _0x3906f7=0x1;_0x3906f7<0x3e9;_0x3906f7++){_0x22a2b8=_0x3906f7[_0x2a85c2(0xad)]()[_0x2a85c2(0xa9)](0x3,'0');let _0x55e056=config['find'](_0xbe0fcf=>_0xbe0fcf['botID']==_0x22a2b8);if(!_0x55e056)break;}if(_0x22a2b8===_0x2a85c2(0x141)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x22a2b8),dbConfig[_0x2a85c2(0xbd)](_0x2a85c2(0xac))[_0x2a85c2(0x16a)]({'botID':_0x22a2b8,'botname':_0x2a85c2(0xf6)+_0x22a2b8,'status':_0x2a85c2(0x103),'live':''})['write'](),startBot([_0x22a2b8],{'cwd':bbpath},function(_0x332f51){if(_0x332f51)logging(_0x332f51);}),config=getConfiguration();if(socket[_0x2a85c2(0xf1)])socket[_0x2a85c2(0xf1)][_0x2a85c2(0x12e)](_0x2a85c2(0xac),config);}function deleteBot(_0x20df92){const _0x2c6d54=_0x1f7aa7;if(socket[_0x20df92])socket[_0x20df92][_0x2c6d54(0x1bd)](!![]);dbConfig[_0x2c6d54(0xbd)](_0x2c6d54(0xac))['remove']({'botID':_0x20df92})[_0x2c6d54(0x10a)](),logging(_0x2c6d54(0x11f)+_0x20df92),stopBot(_0x20df92);try{fs['unlinkSync'](path[_0x2c6d54(0xd4)](configpath,_0x2c6d54(0x119)+_0x20df92+_0x2c6d54(0xee))),fs[_0x2c6d54(0xb3)](path[_0x2c6d54(0xd4)](configpath,_0x2c6d54(0x119)+_0x20df92+'-events.json')),fs[_0x2c6d54(0xb3)](path['join'](configpath,_0x2c6d54(0x119)+_0x20df92+_0x2c6d54(0xf0))),fs[_0x2c6d54(0xb3)](path[_0x2c6d54(0xd4)](configpath,_0x2c6d54(0x119)+_0x20df92+_0x2c6d54(0x155)));}catch(_0x57bc6a){if(_0x57bc6a)logging('error\x20while\x20deleting\x20log\x20files:\x20',_0x57bc6a);}config=getConfiguration();if(socket[_0x2c6d54(0xf1)])socket[_0x2c6d54(0xf1)][_0x2c6d54(0x12e)](_0x2c6d54(0xac),config);}function toggleBot(_0x39753c,_0x49f79f,_0x28975f){const _0x1d8e15=_0x1f7aa7;dbConfig[_0x1d8e15(0xbd)]('bots')[_0x1d8e15(0x145)]({'botID':_0x39753c})[_0x1d8e15(0xef)]({'status':_0x49f79f})[_0x1d8e15(0xef)]({'live':_0x28975f})[_0x1d8e15(0x10a)]();if(_0x49f79f==_0x1d8e15(0x114)||_0x49f79f=='new')logging('enabled\x20Bot\x20'+_0x39753c),startBot([_0x39753c],{'cwd':bbpath},function(_0x3b8ee0){if(_0x3b8ee0)logging(_0x3b8ee0);});else(_0x49f79f==_0x1d8e15(0x1a8)||_0x49f79f==_0x1d8e15(0x174))&&(logging(_0x1d8e15(0xce)+_0x39753c),stopBot(_0x39753c));config=getConfiguration();if(socket['botmanager'])socket['botmanager']['emit'](_0x1d8e15(0xac),config);}function updateStatus(_0x2572a6,_0x5f051f){const _0x2dce7d=_0x1f7aa7;dbConfig[_0x2dce7d(0xbd)](_0x2dce7d(0xac))[_0x2dce7d(0x145)]({'botID':_0x2572a6})[_0x2dce7d(0xef)]({'status':_0x5f051f})['write'](),config=getConfiguration();if(socket[_0x2dce7d(0xf1)])socket['botmanager']['emit']('bots',config);}function updateLive(_0x5e385d,_0x3327b2){const _0x2bfc6e=_0x1f7aa7;dbConfig[_0x2bfc6e(0xbd)](_0x2bfc6e(0xac))[_0x2bfc6e(0x145)]({'botID':_0x5e385d})[_0x2bfc6e(0xef)]({'live':_0x3327b2})[_0x2bfc6e(0x10a)](),config=getConfiguration();if(socket['botmanager'])socket[_0x2bfc6e(0xf1)][_0x2bfc6e(0x12e)](_0x2bfc6e(0xac),config);}function updateBotName(_0x127059,_0x29c6b8){const _0x55fc74=_0x1f7aa7;dbConfig[_0x55fc74(0xbd)](_0x55fc74(0xac))['find']({'botID':_0x127059})[_0x55fc74(0xef)]({'botname':_0x29c6b8})[_0x55fc74(0x10a)](),config=getConfiguration();if(socket['botmanager'])socket[_0x55fc74(0xf1)][_0x55fc74(0x12e)](_0x55fc74(0xac),config);}function telegramError(_0xf245b0){const _0x40369b=_0x1f7aa7;console[_0x40369b(0x1ae)](getTimeStamp()+_0x40369b(0xc0));}function validateTelegram(_0x50131d){const _0x58057d=_0x1f7aa7;if(_0x50131d[_0x58057d(0x1bb)][_0x58057d(0x10c)]!=settings[_0x58057d(0xed)]&&'@'+_0x50131d[_0x58057d(0x1bb)][_0x58057d(0x10c)]!=settings[_0x58057d(0xed)])return tgBot['sendMessage'](_0x50131d['chat']['id'],_0x58057d(0x13f),{'parse_mode':_0x58057d(0x175)})[_0x58057d(0xe3)](_0x2df847=>{telegramError(_0x2df847);}),![];return!![];}async function initTelegram(){const _0x527059=_0x1f7aa7;if(tgBot)tgBot[_0x527059(0x164)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x527059(0x1c1)],{'polling':!![]});let _0x1d6eb3=_0x527059(0x189);_0x1d6eb3+='\x0a',_0x1d6eb3+='/enable\x20-\x20enable\x20notifications\x0a',_0x1d6eb3+=_0x527059(0x15f),_0x1d6eb3+=_0x527059(0x1a3),_0x1d6eb3+='/restart\x20-\x20restart\x20a\x20bot\x0a',_0x1d6eb3+='/status\x20-\x20show\x20the\x20status\x20of\x20your\x20bots\x0a',_0x1d6eb3+='/help\x20-\x20show\x20avaiable\x20commands\x0a';let _0x37b98b=_0x527059(0x124);_0x37b98b+='\x0a',_0x37b98b+=_0x1d6eb3,tgBot[_0x527059(0xea)](/\/start/,_0x173995=>{const _0xc38e89=_0x527059;if(!validateTelegram(_0x173995))return;if(settings[_0xc38e89(0xa8)]!=_0x173995[_0xc38e89(0x112)]['id'])updateSetting(_0xc38e89(0xa8),_0x173995[_0xc38e89(0x112)]['id']);updateSetting(_0xc38e89(0xfd),!![]),tgBot[_0xc38e89(0xb5)](_0x173995[_0xc38e89(0x112)]['id'],_0x37b98b)[_0xc38e89(0xe3)](_0xea0aba=>{telegramError(_0xea0aba);});}),tgBot['onText'](/\/enable/,_0x3b0423=>{const _0x347284=_0x527059;if(!validateTelegram(_0x3b0423))return;if(settings[_0x347284(0xa8)]!=_0x3b0423[_0x347284(0x112)]['id'])updateSetting(_0x347284(0xa8),_0x3b0423[_0x347284(0x112)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x3b0423[_0x347284(0x112)]['id'],_0x347284(0x156))[_0x347284(0xe3)](_0x2523bb=>{telegramError(_0x2523bb);});}),tgBot[_0x527059(0xea)](/\/config/,async _0x392028=>{const _0x905048=_0x527059;if(!validateTelegram(_0x392028))return;tgBot['removeListener'](_0x905048(0xf3)),tgBot['sendMessage'](_0x392028[_0x905048(0x112)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x905048(0x11a),'callback_data':_0x905048(0xcf)},{'text':_0x905048(0xb2),'callback_data':_0x905048(0x12b)},{'text':_0x905048(0x1aa),'callback_data':'all'}]]}})['catch'](_0x2e37b2=>{telegramError(_0x2e37b2);}),tgBot['on']('callback_query',async _0x4f80ad=>{const _0xa6b8fc=_0x905048,_0x50835e=_0x4f80ad['data'],_0x5267d3=_0x4f80ad['message'];tgBot[_0xa6b8fc(0x18e)](_0x4f80ad['id'])['then'](async()=>{const _0x4b2bc3=_0xa6b8fc;_0x50835e==_0x4b2bc3(0xcf)&&(updateSetting('telegramEvents',_0x4b2bc3(0xcf)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4b2bc3(0xb5)](_0x5267d3[_0x4b2bc3(0x112)]['id'],_0x4b2bc3(0x17a))[_0x4b2bc3(0xe3)](_0x322749=>{telegramError(_0x322749);}));_0x50835e==_0x4b2bc3(0x12b)&&(updateSetting(_0x4b2bc3(0x14b),_0x4b2bc3(0x12b)),updateSetting(_0x4b2bc3(0xfd),!![]),await tgBot[_0x4b2bc3(0xb5)](_0x5267d3[_0x4b2bc3(0x112)]['id'],_0x4b2bc3(0x1b8))['catch'](_0x940313=>{telegramError(_0x940313);}));_0x50835e==_0x4b2bc3(0x1a2)&&(updateSetting(_0x4b2bc3(0x14b),_0x4b2bc3(0x1a2)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4b2bc3(0xb5)](_0x5267d3[_0x4b2bc3(0x112)]['id'],_0x4b2bc3(0x144))['catch'](_0x3d9f24=>{telegramError(_0x3d9f24);}));if(!settings[_0x4b2bc3(0xa8)])tgBot[_0x4b2bc3(0xb5)](_0x5267d3[_0x4b2bc3(0x112)]['id'],_0x4b2bc3(0x130))['catch'](_0x32e191=>{telegramError(_0x32e191);});}),tgBot[_0xa6b8fc(0x171)](_0xa6b8fc(0xf3));});}),tgBot[_0x527059(0xea)](/\/status/,_0xbeb410=>{const _0x43a044=_0x527059;if(!validateTelegram(_0xbeb410))return;let _0x42be98=_0x43a044(0xb7);config['forEach'](_0x25bff4=>{const _0x4a167d=_0x43a044;_0x42be98+=_0x4a167d(0xf6)+_0x25bff4[_0x4a167d(0xfe)]+_0x4a167d(0x188)+_0x25bff4['botname']+':\x20'+_0x25bff4[_0x4a167d(0x177)]+_0x4a167d(0x1be)+_0x25bff4['live']+'\x0a';}),_0x42be98+='\x0a',_0x42be98+=_0x43a044(0x12c),_0x42be98+=!settings[_0x43a044(0xfd)]?'Notifications\x20disabled\x0a':_0x43a044(0xc2),_0x42be98+=settings[_0x43a044(0xfd)]?settings[_0x43a044(0x14b)]==_0x43a044(0x1a2)?_0x43a044(0xc3):_0x43a044(0xdf)+settings['telegramEvents']+_0x43a044(0xc9):'',tgBot[_0x43a044(0xb5)](_0xbeb410[_0x43a044(0x112)]['id'],_0x42be98,{'parse_mode':_0x43a044(0x175)})['catch'](_0x322fd8=>{telegramError(_0x322fd8);});}),tgBot[_0x527059(0xea)](/\/restart/,_0x3c1948=>{const _0x42427b=_0x527059;if(!validateTelegram(_0x3c1948))return;tgBot[_0x42427b(0x171)]('callback_query');const _0x17159c=getEnabledBots();if(_0x17159c[_0x42427b(0xdb)]==0x0)tgBot['sendMessage'](_0x3c1948[_0x42427b(0x112)]['id'],'No\x20bots\x20enabled\x20right\x20now')[_0x42427b(0xe3)](_0x1e1266=>{telegramError(_0x1e1266);});else{let _0x2e4478=[],_0x29d2af=[];const _0x16901a=_0x17159c[_0x42427b(0xdb)]%0x4==0x0||_0x17159c[_0x42427b(0xdb)]%0x4==0x3||_0x17159c['length']%0x3==0x1?0x4:0x3;let _0x191c79=0x0;_0x17159c['forEach']((_0xc9d8d0,_0x1e8576)=>{const _0x237bbf=_0x42427b;if(_0x1e8576%_0x16901a==0x0)_0x29d2af=[];_0x29d2af['push']({'text':_0x237bbf(0xf6)+_0xc9d8d0[_0x237bbf(0xfe)],'callback_data':_0xc9d8d0[_0x237bbf(0xfe)]}),_0x1e8576%_0x16901a==0x0&&(_0x2e4478[_0x191c79]=_0x29d2af,_0x191c79++);}),tgBot[_0x42427b(0xb5)](_0x3c1948[_0x42427b(0x112)]['id'],_0x42427b(0x179),{'reply_markup':{'inline_keyboard':_0x2e4478}})[_0x42427b(0xe3)](_0x38e262=>{telegramError(_0x38e262);}),tgBot['on'](_0x42427b(0xf3),async _0x2986b0=>{const _0x571613=_0x42427b,_0x22cdc7=_0x2986b0[_0x571613(0xd9)],_0x1c1f57=_0x2986b0[_0x571613(0xbb)];tgBot['answerCallbackQuery'](_0x2986b0['id'])[_0x571613(0x181)](async()=>{const _0x642b18=_0x571613;if(settings[_0x642b18(0x14b)]=='orders')tgBot[_0x642b18(0xb5)](_0x1c1f57[_0x642b18(0x112)]['id'],_0x642b18(0x16d)+_0x22cdc7)[_0x642b18(0xe3)](_0x55afa3=>{telegramError(_0x55afa3);});stopBot(_0x22cdc7);}),tgBot[_0x571613(0x171)](_0x571613(0xf3));});}}),tgBot['onText'](/\/disable/,_0x39bf99=>{const _0x5e71a3=_0x527059;if(!validateTelegram(_0x39bf99))return;tgBot[_0x5e71a3(0xb5)](_0x39bf99[_0x5e71a3(0x112)]['id'],_0x5e71a3(0x157))[_0x5e71a3(0xe3)](_0x768d68=>{telegramError(_0x768d68);}),updateSetting(_0x5e71a3(0xfd),![]);}),tgBot[_0x527059(0xea)](/\/help/,_0x232a18=>{const _0x59e370=_0x527059;if(!validateTelegram(_0x232a18))return;tgBot[_0x59e370(0xb5)](_0x232a18['chat']['id'],_0x1d6eb3)[_0x59e370(0xe3)](_0x2eecc6=>{telegramError(_0x2eecc6);});}),tgBot['on'](_0x527059(0x161),_0x419986=>{const _0x511e67=_0x527059;if(_0x419986[_0x511e67(0xad)]()['includes'](_0x511e67(0x19b))){logging(_0x511e67(0x160)),tgBot[_0x511e67(0x164)](),tgBot=null;if(socket[_0x511e67(0xf1)])socket[_0x511e67(0xf1)]['emit']('notification','Invalid\x20Telegram\x20token');}}),process[_0x527059(0x16f)](_0x527059(0xd7),()=>{const _0x5edc45=_0x527059;if(tgBot)tgBot['stopPolling']();process[_0x5edc45(0x121)](0x1);}),process[_0x527059(0x16f)](_0x527059(0x1c0),()=>{const _0x22a8a4=_0x527059;if(tgBot)tgBot[_0x22a8a4(0x164)]();process[_0x22a8a4(0x121)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x4cf82a,_0x886ac4){const _0x2dd14e=_0x1f7aa7;if(settings['telegramEnabled']){if(settings[_0x2dd14e(0x14b)]==_0x2dd14e(0x1a2)||(_0x886ac4[_0x2dd14e(0xf4)]==_0x2dd14e(0x113)||_0x886ac4[_0x2dd14e(0xf4)]==_0x2dd14e(0xb4))&&settings[_0x2dd14e(0x14b)]==_0x2dd14e(0x12b)||_0x886ac4['type']=='order'&&settings[_0x2dd14e(0x14b)]==_0x2dd14e(0xcf)){if(tgBot&&settings[_0x2dd14e(0xa8)])tgBot[_0x2dd14e(0xb5)](settings[_0x2dd14e(0xa8)],_0x2dd14e(0xf6)+_0x4cf82a+_0x2dd14e(0xd5)+_0x886ac4[_0x2dd14e(0x17b)])[_0x2dd14e(0xe3)](_0x21d3b7=>{telegramError(_0x21d3b7);});}}}function temporaryAccess2FA(_0x4d116d){const _0xf55e1e=_0x1f7aa7;tgBot&&settings[_0xf55e1e(0xa8)]&&(tgBot[_0xf55e1e(0x171)]('callback_query'),tgBot['sendMessage'](settings[_0xf55e1e(0xa8)],_0xf55e1e(0xda)+normalizeIP(_0x4d116d)[_0xf55e1e(0x102)]+_0xf55e1e(0xd1),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0xf55e1e(0xe0),'callback_data':'5'},{'text':_0xf55e1e(0x191),'callback_data':'15'},{'text':_0xf55e1e(0x1a5),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0xf55e1e(0xe3)](_0x3adb1e=>{telegramError(_0x3adb1e);}),tgBot['on'](_0xf55e1e(0xf3),async _0x18eb15=>{const _0xdb1082=_0xf55e1e,_0x4ca5e7=_0x18eb15[_0xdb1082(0xd9)],_0x5cb20c=_0x18eb15[_0xdb1082(0xbb)];tgBot['answerCallbackQuery'](_0x18eb15['id'])[_0xdb1082(0x181)](async()=>{const _0x5b527b=_0xdb1082;if(_0x4ca5e7!=_0x5b527b(0x190)){telegramIpApproval={'clientip':_0x4d116d,'timestamp':new Date()[_0x5b527b(0x1c2)](),'expiry':_0x4ca5e7},await tgBot['sendMessage'](_0x5cb20c[_0x5b527b(0x112)]['id'],_0x5b527b(0xba)+_0x4ca5e7+_0x5b527b(0x166),{'parse_mode':_0x5b527b(0x175)})[_0x5b527b(0xe3)](_0x2c737c=>{telegramError(_0x2c737c);});for(let _0x2e9ec9 in socket){socket[_0x2e9ec9]['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0x5b527b(0xb5)](_0x5cb20c[_0x5b527b(0x112)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x480156=>{telegramError(_0x480156);});}),tgBot[_0xdb1082(0x171)](_0xdb1082(0xf3));}));}function loginAccess2FA(_0x2aa35e){const _0x1d6150=_0x1f7aa7;tgBot&&settings[_0x1d6150(0xa8)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x1d6150(0xb5)](settings['telegramChatId'],_0x1d6150(0x109)+normalizeIP(_0x2aa35e)[_0x1d6150(0x102)]+_0x1d6150(0xd1),{'parse_mode':_0x1d6150(0x175),'reply_markup':{'inline_keyboard':[[{'text':_0x1d6150(0x163),'callback_data':loginExpiry},{'text':_0x1d6150(0x190),'callback_data':_0x1d6150(0x190)}]]}})[_0x1d6150(0xe3)](_0x562f54=>{telegramError(_0x562f54);}),tgBot['on']('callback_query',async _0x235769=>{const _0x23bf8d=_0x1d6150,_0x418908=_0x235769[_0x23bf8d(0xd9)],_0x80946f=_0x235769['message'];tgBot[_0x23bf8d(0x18e)](_0x235769['id'])[_0x23bf8d(0x181)](async()=>{const _0xcd0198=_0x23bf8d;if(_0x418908!='reject'){telegram2FaApproval={'clientip':_0x2aa35e,'timestamp':new Date()[_0xcd0198(0x1c2)](),'expiry':_0x418908},await tgBot[_0xcd0198(0xb5)](_0x80946f[_0xcd0198(0x112)]['id'],'Login\x20accepted',{'parse_mode':_0xcd0198(0x175)})[_0xcd0198(0xe3)](_0x4be095=>{telegramError(_0x4be095);});for(let _0x31c8b9 in socket){socket[_0x31c8b9]['emit'](_0xcd0198(0x177),{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0xcd0198(0xb5)](_0x80946f[_0xcd0198(0x112)]['id'],_0xcd0198(0x151))[_0xcd0198(0xe3)](_0x59a248=>{telegramError(_0x59a248);});}),tgBot['removeListener'](_0x23bf8d(0xf3));}));}function getConfiguration(){const _0x5b8037=_0x1f7aa7;return dbConfig[_0x5b8037(0xbd)](_0x5b8037(0xac))[_0x5b8037(0x18f)](_0x5b8037(0xfe))[_0x5b8037(0x196)]()||[];}function getEnabledBots(){const _0xcd17ca=_0x1f7aa7;return dbConfig['get']('bots')[_0xcd17ca(0x18f)](_0xcd17ca(0xfe))[_0xcd17ca(0x106)]({'status':'enabled'})['value']()||[];}function getSettings(){const _0x3dc6b4=_0x1f7aa7;return dbSettings[_0x3dc6b4(0xbd)]('settings')[_0x3dc6b4(0x196)]()||{'timeshift':0x0};}function getSecure(){const _0x2e79a6=_0x1f7aa7;return dbSecure[_0x2e79a6(0xbd)]('secure')[_0x2e79a6(0x196)]()||{};}function getBlacklist(){const _0x36743f=_0x1f7aa7;return dbSecure[_0x36743f(0xbd)](_0x36743f(0x1a1))[_0x36743f(0x196)]()||[];}function broadcastToBots(_0x3a222b,_0x48616d){const _0x1f1aca=_0x1f7aa7;config[_0x1f1aca(0x126)](_0x551848=>{const _0x429246=_0x1f1aca;if(_0x551848[_0x429246(0x177)]==_0x429246(0x114)&&_0x551848[_0x429246(0x1a4)]==_0x429246(0x118)){if(pid[_0x551848['botID']])pid[_0x551848[_0x429246(0xfe)]][_0x429246(0x17c)]({[_0x3a222b]:_0x48616d});}});}function storeSettings(_0xdeaeec,_0x19eea2=![]){const _0x54770c=_0x1f7aa7;_0xdeaeec={...settings,..._0xdeaeec};if(_0x19eea2&&_0xdeaeec['bbPassword']!=_0x54770c(0x169)&&_0xdeaeec[_0x54770c(0xbc)]!=''){const _0x4209ad=crypt[_0x54770c(0xaa)](secure[_0x54770c(0x107)],_0xdeaeec['bbPassword'])[_0x54770c(0xbb)][_0x54770c(0xbf)]('@')[0x0],_0x5dabf8=bcrypt[_0x54770c(0x10b)](_0x4209ad,saltRounds);_0xdeaeec={..._0xdeaeec,'bbPassword':_0x5dabf8};}if(_0x19eea2&&_0xdeaeec[_0x54770c(0x1c1)]!=_0x54770c(0x169)&&_0xdeaeec[_0x54770c(0x1c1)]!=''){const _0x571999=crypt[_0x54770c(0xaa)](secure[_0x54770c(0x107)],_0xdeaeec[_0x54770c(0x1c1)])[_0x54770c(0xbb)][_0x54770c(0xbf)]('@')[0x0];_0xdeaeec={..._0xdeaeec,'telegramToken':_0x571999};}const _0x4166a9=_0xdeaeec[_0x54770c(0x1c1)]!=_0x54770c(0x169)&&_0xdeaeec['telegramToken']!=settings[_0x54770c(0x1c1)]||_0xdeaeec['telegramUsername']!=settings[_0x54770c(0xed)],_0x592433=_0xdeaeec[_0x54770c(0x1c1)]==''||_0xdeaeec['telegramUsername']=='';if(_0x4166a9)_0xdeaeec[_0x54770c(0x14b)]=_0x54770c(0x1a2);for(const [_0x18f6ba,_0x3a091f]of Object[_0x54770c(0x10f)](_0xdeaeec)){if(_0x18f6ba=='telegramToken'&&_0x3a091f=='************'){_0xdeaeec[_0x54770c(0x1c1)]=settings[_0x54770c(0x1c1)];continue;};if(_0x18f6ba=='bbPassword'&&_0x3a091f==_0x54770c(0x169)){_0xdeaeec[_0x54770c(0xbc)]=settings[_0x54770c(0xbc)];continue;};dbSettings[_0x54770c(0xeb)]('settings.'+_0x18f6ba,_0x3a091f)['write']();}settings=_0xdeaeec;if(socket[_0x54770c(0xf1)])socket[_0x54770c(0xf1)][_0x54770c(0x12e)](_0x54770c(0x127),cleanSettings());broadcastToBots(_0x54770c(0x111),settings[_0x54770c(0x111)]);if(_0x4166a9&&!_0x592433)initTelegram();if(_0x4166a9&&_0x592433)disableTelegram();for(let _0x35f678 in socket){setAccess(_0x35f678);}}function updateSetting(_0x2bda0e,_0x5543b6){const _0x3f2525=_0x1f7aa7;dbSettings['set'](_0x3f2525(0x139)+_0x2bda0e,_0x5543b6)[_0x3f2525(0x10a)](),settings=getSettings();if(socket[_0x3f2525(0xf1)])socket[_0x3f2525(0xf1)]['emit'](_0x3f2525(0x127),cleanSettings());}function storeSecure(_0x5ba2e4){const _0x4b9f33=_0x1f7aa7;dbSecure['get'](_0x4b9f33(0xe7))[_0x4b9f33(0x16a)](_0x5ba2e4)['write'](),secure=_0x5ba2e4;}function addBlacklist(){const _0x21e8db=_0x1f7aa7;cleanBlacklist();let _0x1f832f;telegramIpApproval?_0x1f832f=Math[_0x21e8db(0xcc)](telegramIpApproval[_0x21e8db(0x186)],loginExpiry):_0x1f832f=loginExpiry,dbSecure['get'](_0x21e8db(0x1a1))['push']({'expiry':new Date()[_0x21e8db(0x1c2)]()+_0x1f832f*0x3c*0x3e8,'token':token})[_0x21e8db(0x10a)](),blacklist=dbSecure[_0x21e8db(0xbd)](_0x21e8db(0x1a1))[_0x21e8db(0x196)]();}function cleanBlacklist(){const _0x35eaef=_0x1f7aa7;let _0x364699=dbSecure['get']('blacklist')['cloneDeep']()[_0x35eaef(0x196)](),_0x537ea7=new Date()['getTime']();_0x364699['forEach'](_0x8558=>{const _0x19e601=_0x35eaef;_0x8558[_0x19e601(0x186)]<_0x537ea7&&dbSecure[_0x19e601(0xbd)](_0x19e601(0x1a1))[_0x19e601(0x1b9)]({'expiry':_0x8558[_0x19e601(0x186)]})[_0x19e601(0x10a)]();});}function initStates(){let _0x51a15d=getConfiguration();_0x51a15d['forEach'](_0x78fe70=>{const _0x2d1423=_0x2d59;_0x78fe70[_0x2d1423(0x1a4)]=_0x2d1423(0x18d);}),storeConfiguration(_0x51a15d);}function onKeys(){const _0xe31b53=new RSA();return new Promise(_0x22b23d=>{const _0x38a434=_0x2d59;_0xe31b53[_0x38a434(0x180)]()[_0x38a434(0x181)](_0x106acf=>{_0x22b23d(_0x106acf);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x765fda=_0x1f7aa7;let _0x265409=getConfiguration(),_0x40a404=![];_0x265409[_0x765fda(0x126)](_0x5bc5a6=>{const _0x2d2d95=_0x765fda;if(_0x5bc5a6[_0x2d2d95(0x177)]=='running')_0x5bc5a6['status']=_0x2d2d95(0x114),_0x40a404=!![];else _0x5bc5a6[_0x2d2d95(0x177)]=='stopped'&&(_0x5bc5a6[_0x2d2d95(0x177)]=_0x2d2d95(0x1a8),_0x40a404=!![]);});if(_0x40a404)storeConfiguration(_0x265409);let _0x3b57e5=getSecure();if(!_0x3b57e5[_0x765fda(0xe4)]('secret')){let _0x25a8c7=await generateKeys();_0x3b57e5['publicKey']=_0x25a8c7[_0x765fda(0xe2)],_0x3b57e5[_0x765fda(0x107)]=_0x25a8c7['privateKey'],_0x3b57e5[_0x765fda(0xf7)]=crypto[_0x765fda(0x159)](0x20)[_0x765fda(0xad)](_0x765fda(0xc1));;storeSecure(_0x3b57e5);}let _0x83ae13=getSettings();_0x40a404=![];!_0x83ae13[_0x765fda(0xe4)](_0x765fda(0xb8))&&(_0x83ae13[_0x765fda(0xb8)]=![],_0x83ae13[_0x765fda(0x116)]='',_0x83ae13['bbPassword']='',_0x83ae13[_0x765fda(0x172)]=![],_0x40a404=!![]);!_0x83ae13['hasOwnProperty'](_0x765fda(0xd2))&&(_0x83ae13[_0x765fda(0xd2)]=![],_0x83ae13[_0x765fda(0xde)]=[],_0x83ae13[_0x765fda(0x10d)]=![],_0x40a404=!![]);if(!_0x83ae13[_0x765fda(0xe4)]('telegramEnabled')){if(_0x83ae13[_0x765fda(0xa8)])_0x83ae13[_0x765fda(0xfd)]=!![];else _0x83ae13[_0x765fda(0xfd)]=![];_0x40a404=!![];}if(_0x40a404)storeSettings(_0x83ae13);}function storeConfiguration(_0x545e73){const _0x288b55=_0x1f7aa7;dbConfig[_0x288b55(0xbd)]('bots')[_0x288b55(0x1b9)]()['write'](),dbConfig['get'](_0x288b55(0xac))[_0x288b55(0x16a)](..._0x545e73)[_0x288b55(0x10a)](),config=_0x545e73;}function resetPassword(){const _0x157bca=_0x1f7aa7;tgBot&&settings['telegramChatId']&&(tgBot[_0x157bca(0x171)](_0x157bca(0xf3)),tgBot[_0x157bca(0xb5)](settings['telegramChatId'],_0x157bca(0xc7),{'parse_mode':_0x157bca(0x175),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x157bca(0x153)},{'text':'no','callback_data':'no'}]]}})[_0x157bca(0xe3)](_0x32620d=>{telegramError(_0x32620d);}),tgBot['on']('callback_query',async _0x1dd476=>{const _0x52d900=_0x157bca,_0x218edd=_0x1dd476[_0x52d900(0xd9)],_0x130658=_0x1dd476[_0x52d900(0xbb)];tgBot[_0x52d900(0x18e)](_0x1dd476['id'])[_0x52d900(0x181)](async()=>{const _0x329d08=_0x52d900;if(_0x218edd!='no'){const _0x34357f=0xf,_0x278640=_0x329d08(0x18a),_0x5689fd=Array[_0x329d08(0x1bb)](crypto[_0x329d08(0xf9)](new Uint32Array(_0x34357f)))['map'](_0x15701b=>_0x278640[_0x15701b%_0x278640[_0x329d08(0xdb)]])['join'](''),_0x36040f=bcrypt['hashSync'](_0x5689fd,saltRounds);storeSettings({'bbPassword':_0x36040f}),await tgBot[_0x329d08(0xb5)](_0x130658[_0x329d08(0x112)]['id'],_0x329d08(0x147)+_0x5689fd,{'parse_mode':_0x329d08(0x175)})[_0x329d08(0xe3)](_0x3a8cf2=>{telegramError(_0x3a8cf2);});}else await tgBot[_0x329d08(0xb5)](_0x130658[_0x329d08(0x112)]['id'],'Password\x20reset\x20rejected')[_0x329d08(0xe3)](_0x1f5afc=>{telegramError(_0x1f5afc);});}),tgBot[_0x52d900(0x171)](_0x52d900(0xf3));}));}function logging(_0x5f5861){const _0xe6ef4f=_0x1f7aa7;console['log'](getTimeStamp()+_0xe6ef4f(0x182)+_0x5f5861);if(tgBot&&settings['telegramChatId']&&settings[_0xe6ef4f(0x14b)]!=_0xe6ef4f(0xcf))tgBot[_0xe6ef4f(0xb5)](settings[_0xe6ef4f(0xa8)],_0xe6ef4f(0x1bc)+_0x5f5861)['catch'](_0x515d3d=>{telegramError(_0x515d3d);});}function getServerTime(){const _0x273117=_0x1f7aa7,_0x4f90c3=new Date();return _0x4f90c3['getFullYear']()+'/'+(_0x4f90c3[_0x273117(0x18b)]()+0x1)[_0x273117(0xad)]()[_0x273117(0xa9)](0x2,'0')+'/'+_0x4f90c3[_0x273117(0x105)]()[_0x273117(0xad)]()['padStart'](0x2,'0')+'\x20'+_0x4f90c3[_0x273117(0x14f)]()[_0x273117(0xad)]()[_0x273117(0xa9)](0x2,'0')+':'+_0x4f90c3[_0x273117(0x19c)]()[_0x273117(0xad)]()[_0x273117(0xa9)](0x2,'0')+':'+_0x4f90c3[_0x273117(0x193)]()[_0x273117(0xad)]()[_0x273117(0xa9)](0x2,'0');}function getTimeStamp(){const _0x2e92e0=_0x1f7aa7,_0x3d9087=shiftedTime();return _0x3d9087[_0x2e92e0(0x15c)]()+'/'+(_0x3d9087['getMonth']()+0x1)[_0x2e92e0(0xad)]()['padStart'](0x2,'0')+'/'+_0x3d9087[_0x2e92e0(0x105)]()[_0x2e92e0(0xad)]()[_0x2e92e0(0xa9)](0x2,'0')+'\x20'+_0x3d9087[_0x2e92e0(0x14f)]()[_0x2e92e0(0xad)]()['padStart'](0x2,'0')+':'+_0x3d9087['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x3d9087[_0x2e92e0(0x193)]()[_0x2e92e0(0xad)]()[_0x2e92e0(0xa9)](0x2,'0');}function shiftedTime(){const _0x5637d4=_0x1f7aa7,_0x4a2dd1=new Date();let _0x525196=_0x4a2dd1;if(settings['timeshift']&&settings[_0x5637d4(0x111)]!==0x0)_0x525196=fns[_0x5637d4(0x148)](_0x4a2dd1,{'hours':settings['timeshift']});return _0x525196;}function startAnalytics(){const _0x36f8d2=_0x1f7aa7;let _0x18f10c=new Date()[_0x36f8d2(0x162)]();_0x18f10c==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x3d2fea=_0x1f7aa7;analytics['page']({'title':'Balance\x20Bot\x20Server','href':_0x3d2fea(0x135),'path':'/v'+serverversion});}function validateCredentials(_0x100d2c){const _0x6117ca=_0x1f7aa7;if(_0x100d2c[_0x6117ca(0x10c)]==settings['bbUsername']&&bcrypt[_0x6117ca(0x152)](_0x100d2c[_0x6117ca(0x1b5)],settings[_0x6117ca(0xbc)])){if(settings[_0x6117ca(0x172)])return{'allow':![],'reason':_0x6117ca(0xb6),'token':null};else{const _0x18be8b=generateLoginToken();return{'allow':!![],'reason':_0x6117ca(0xa6),'token':_0x18be8b};}}else return{'allow':![],'reason':_0x6117ca(0x138),'token':null};}function refreshToken(){const _0x2b875e=_0x1f7aa7,_0x3ee5b0=generateLoginToken();return{'allow':!![],'reason':_0x2b875e(0xa6),'token':_0x3ee5b0};}function validateAccess(_0x3292f0){const _0x4a76be=_0x1f7aa7;let _0x1aada9;const _0x4599d9=_0x681586=>{const _0x1ffcb7=_0x2d59;if(settings[_0x1ffcb7(0xb8)]){if(settings[_0x1ffcb7(0x172)]){if(telegram2FaApproved()){const _0x354742=generateLoginToken();return{'allow':!![],'reason':_0x1ffcb7(0x1b6),'token':_0x354742};}else return{'allow':![],'reason':_0x1ffcb7(0xb6),'token':null};}else return _0x1aada9=validToken(_0x681586),_0x1aada9[_0x1ffcb7(0xe4)]('success')?{'allow':!![],'reason':_0x1ffcb7(0x11d),'token':_0x681586}:{'allow':![],'reason':_0x1ffcb7(0x120),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x4a76be(0xd2)]){let _0x1377a6=[...settings[_0x4a76be(0xde)],_0x4a76be(0xaf),'::ffff:127.0.0.1',_0x4a76be(0xd0)];if(_0x1377a6['includes'](externalip))return _0x4599d9(_0x3292f0);else{_0x1aada9=validToken(_0x3292f0);if(_0x1aada9['hasOwnProperty'](_0x4a76be(0xb4)))return _0x4599d9(_0x3292f0);else{if(telegramIpApproved()){const _0x2fba4b=generateToken();return _0x1aada9=_0x4599d9(_0x3292f0),_0x1aada9[_0x4a76be(0x16c)]?{'allow':!![],'reason':_0x4a76be(0x173),'token':_0x2fba4b}:_0x1aada9;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x4a76be(0x15b),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4599d9(_0x3292f0);}function timelyDecrypt(_0x3fbb23,_0xc18d51=!![]){const _0x511927=_0x1f7aa7;if(_0x3fbb23)try{const _0x1ab75d=crypt[_0x511927(0xaa)](secure[_0x511927(0x107)],_0x3fbb23)[_0x511927(0xbb)],_0x105312=_0x1ab75d[_0x511927(0xbf)]('@')[0x0],_0x1d0660=_0x1ab75d[_0x511927(0xbf)]('@')[0x1],_0x2f85e2=new Date()['getTime']();if(_0xc18d51){if(_0x2f85e2-_0x1d0660<maxSecretAge*0x3e8)return _0x105312;else return![];}else return _0x105312;}catch{return![];}else return![];}const validToken=_0x327c69=>{const _0x306ac9=_0x1f7aa7;if(!_0x327c69)return{'error':'No\x20authentication\x20token'};for(let _0x4c3812 of blacklist){if(_0x4c3812[_0x306ac9(0x154)]==_0x327c69)return{'error':_0x306ac9(0x1b2)};}let _0x306086;try{_0x306086=jwt['verify'](_0x327c69,secure[_0x306ac9(0xf7)]+uuid);}catch{return{'error':_0x306ac9(0x165)};}if(!_0x306086[_0x306ac9(0xe4)]('clientip')&&!_0x306086[_0x306ac9(0xe4)]('username')||!_0x306086[_0x306ac9(0xe4)](_0x306ac9(0x115)))return{'error':_0x306ac9(0x16b)};if(!_0x306086[_0x306ac9(0xe4)](_0x306ac9(0x10c))&&_0x306086[_0x306ac9(0xe4)](_0x306ac9(0x12a))){const {clientip:_0x39bf46}=_0x306086;return externalip==_0x39bf46?{'success':_0x306ac9(0x1a0)}:{'error':_0x306ac9(0x1a9)};}else{if(_0x306086[_0x306ac9(0xe4)](_0x306ac9(0x10c))&&_0x306086[_0x306ac9(0xe4)](_0x306ac9(0x12a))){const {username:_0xade9db,clientip:_0x44b778}=_0x306086;return settings[_0x306ac9(0x116)]==_0xade9db&&externalip==_0x44b778?{'success':_0x306ac9(0x1a0)}:{'error':_0x306ac9(0x14c)};}}},generateLoginToken=()=>{const _0x45a737=_0x1f7aa7;if(uuid)return jwt[_0x45a737(0xd6)]({'username':settings[_0x45a737(0x116)],'clientip':externalip},secure[_0x45a737(0xf7)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x55570e=_0x1f7aa7;if(uuid)return jwt[_0x55570e(0xd6)]({'clientip':externalip},secure[_0x55570e(0xf7)]+uuid,{'expiresIn':telegramIpApproval['expiry']*0x3c});else return![];},telegramIpApproved=()=>{const _0x42f6bd=_0x1f7aa7;let _0xcabfd8=![];return telegramIpApproval&&telegramIpApproval['expiry']!=_0x42f6bd(0x190)&&(_0xcabfd8=telegramIpApproval[_0x42f6bd(0x12a)]==externalip&&new Date()[_0x42f6bd(0x1c2)]()-telegramIpApproval[_0x42f6bd(0xd8)]<telegramIpApproval[_0x42f6bd(0x186)]*0x3c*0x3e8),_0xcabfd8;},telegram2FaApproved=()=>{const _0xb1ce87=_0x1f7aa7;let _0xb12eef=![];return telegram2FaApproval&&telegram2FaApproval[_0xb1ce87(0x186)]!='reject'&&(_0xb12eef=telegram2FaApproval['clientip']==externalip&&new Date()['getTime']()-telegram2FaApproval[_0xb1ce87(0xd8)]<telegram2FaApproval['expiry']*0x3c*0x3e8),_0xb12eef;},normalizeIP=_0x2d577a=>{const _0x5532be=_0x1f7aa7;let _0x35ef02=null,_0x3c9480=null;if(ipaddr[_0x5532be(0x136)](_0x2d577a)){const _0x5d47fa=ipaddr[_0x5532be(0xcd)](_0x2d577a);_0x5d47fa['kind']()===_0x5532be(0x1a6)?(_0x5d47fa['isIPv4MappedAddress']()&&(_0x35ef02=_0x5d47fa['toIPv4Address']()['toString']()),_0x3c9480=_0x5d47fa['toString']()):(_0x35ef02=_0x5d47fa[_0x5532be(0xad)](),_0x3c9480=_0x5d47fa[_0x5532be(0x1b0)]()[_0x5532be(0xad)]());}return{'show':_0x35ef02?_0x35ef02:_0x3c9480,'store':_0x3c9480};};