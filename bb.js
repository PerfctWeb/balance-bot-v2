const _0x3f6d8b=_0x2c5e;(function(_0x28c54d,_0x385172){const _0xb5454b=_0x2c5e,_0x283c44=_0x28c54d();while(!![]){try{const _0x100a07=-parseInt(_0xb5454b(0x124))/0x1*(-parseInt(_0xb5454b(0x127))/0x2)+parseInt(_0xb5454b(0x12b))/0x3+parseInt(_0xb5454b(0x106))/0x4+-parseInt(_0xb5454b(0x115))/0x5*(-parseInt(_0xb5454b(0x130))/0x6)+-parseInt(_0xb5454b(0x109))/0x7+-parseInt(_0xb5454b(0x11f))/0x8*(parseInt(_0xb5454b(0x11a))/0x9)+-parseInt(_0xb5454b(0x128))/0xa;if(_0x100a07===_0x385172)break;else _0x283c44['push'](_0x283c44['shift']());}catch(_0x4df172){_0x283c44['push'](_0x283c44['shift']());}}}(_0x1409,0x9fbee));const _0x18b07b=function(){let _0x362437=!![];return function(_0xf3e1f,_0x3c6eaa){const _0x2e7202=_0x362437?function(){const _0x171b6e=_0x2c5e;if(_0x3c6eaa){const _0x13161b=_0x3c6eaa[_0x171b6e(0x120)](_0xf3e1f,arguments);return _0x3c6eaa=null,_0x13161b;}}:function(){};return _0x362437=![],_0x2e7202;};}(),_0x344f8f=_0x18b07b(this,function(){const _0x2f91dc=_0x2c5e;return _0x344f8f[_0x2f91dc(0x10e)]()[_0x2f91dc(0x103)](_0x2f91dc(0x123))[_0x2f91dc(0x10e)]()[_0x2f91dc(0x116)](_0x344f8f)[_0x2f91dc(0x103)](_0x2f91dc(0x123));});function _0x2c5e(_0x13be3c,_0x1cd299){const _0x5f3bb9=_0x1409();return _0x2c5e=function(_0x344f8f,_0x18b07b){_0x344f8f=_0x344f8f-0xf9;let _0x14093f=_0x5f3bb9[_0x344f8f];return _0x14093f;},_0x2c5e(_0x13be3c,_0x1cd299);}_0x344f8f();function _0x1409(){const _0x5bbeb9=['message','778205scbRIN','constructor','split','values','host','30546fmWWEo','bm.js','update','Please\x20install\x20a\x20recent\x20version\x20of\x20Node.js\x20and\x20then\x20start\x20Balance\x20Bot\x20again','inherit','2128kxkqSL','apply','Balance\x20Bot\x20>\x20','existsSync','(((.+)+)+)+$','4513utqzYR','install.js','Starting\x20update','54ngnwyb','6580870bVFXFD','-----------------------------------------------------------------------------------','argv','1683627FQimqy','bb/','--port','exit','node','24NQTSBj','restore','user','--host','staging','--user','fork','ipc','log','Process\x20SIGTERM','SIGINT','push','search','Error\x20while\x20updating\x20Balance\x20Bot:','versions','3692260cwiCIQ','port','yargs/yargs','94360pNslXR','child_process','The\x20installed\x20Node.js\x20version\x20is\x20','\x20or\x20above\x20is\x20required',',\x20must\x20be\x20a\x204\x20digit\x20number','toString','error','Process\x20SIGINT','\x20-\x20stopping\x20BM','kill','Process\x20exit'];_0x1409=function(){return _0x5bbeb9;};return _0x1409();}const fs=require('fs'),argv=require(_0x3f6d8b(0x108))(process[_0x3f6d8b(0x12a)]['slice'](0x2))['argv'],childProcess=require(_0x3f6d8b(0x10a)),nodeversion=process[_0x3f6d8b(0x105)][_0x3f6d8b(0x12f)],minversion=0x10;nodeversion[_0x3f6d8b(0x117)]('.')[0x0]<minversion&&(console[_0x3f6d8b(0xff)](),console[_0x3f6d8b(0xff)](_0x3f6d8b(0x129)),console['log'](_0x3f6d8b(0x10b)+nodeversion+',\x20but\x20version\x20'+minversion+_0x3f6d8b(0x10c)),console['log'](_0x3f6d8b(0x11d)),console[_0x3f6d8b(0xff)]('-----------------------------------------------------------------------------------'),console[_0x3f6d8b(0xff)](),process['exit'](0x1));if(argv['port']){const pattern=/^[0-9]{2,4}$/;!pattern['test'](argv[_0x3f6d8b(0x107)])&&(console[_0x3f6d8b(0xff)]('Error:\x20Invalid\x20argument\x20'+argv['port']+_0x3f6d8b(0x10d)),process['exit'](0x1));}let args=[];argv[_0x3f6d8b(0x107)]&&(args['push'](_0x3f6d8b(0x12d)),args[_0x3f6d8b(0x102)](argv['port']));argv[_0x3f6d8b(0x119)]&&(args[_0x3f6d8b(0x102)](_0x3f6d8b(0xfa)),args['push'](argv['host']));argv[_0x3f6d8b(0xf9)]&&(args['push'](_0x3f6d8b(0xfc)),args[_0x3f6d8b(0x102)](argv['user']));const staging=argv['s']||![],debugging=argv['d']||![];debugging&&args[_0x3f6d8b(0x102)]('-d');let bmpath=_0x3f6d8b(0x12c);const bmfile=_0x3f6d8b(0x11b),updatefile=_0x3f6d8b(0x125);!fs[_0x3f6d8b(0x122)](bmpath+bmfile)&&(bmpath='');let pid1,pid2,updating=![],terminating=![];process['on'](_0x3f6d8b(0x12e),async()=>{const _0x4fed3b=_0x3f6d8b;stopBM(_0x4fed3b(0x113)),await sleep(0x3e8),process['exit'](0x0);}),process['on']('SIGTERM',async()=>{const _0x2e570d=_0x3f6d8b;stopBM(_0x2e570d(0x100)),await sleep(0x3e8),process['exit'](0x0);}),process['on'](_0x3f6d8b(0x101),async()=>{const _0x3d7250=_0x3f6d8b;stopBM(_0x3d7250(0x110)),await sleep(0x3e8),process[_0x3d7250(0x12e)](0x0);}),startBM();function startBM(){const _0x221d4e=_0x3f6d8b;let _0x480728=![];const _0x58f10d={'cwd':'','stdio':[_0x221d4e(0x11e),_0x221d4e(0x11e),_0x221d4e(0x11e),_0x221d4e(0xfe)]};pid1=childProcess[_0x221d4e(0xfd)](bmpath+bmfile,args,_0x58f10d),pid1['on'](_0x221d4e(0x114),_0x183074=>{const _0x4ff66a=_0x221d4e,_0x1d3a7c=Object[_0x4ff66a(0x118)](_0x183074)[0x1]==_0x4ff66a(0xfb);switch(Object['keys'](_0x183074)[0x0]){case _0x4ff66a(0x11c):if(_0x1d3a7c)startUpdate('2s');else startUpdate('2');break;case'reinstall':if(_0x1d3a7c)startUpdate('3s');else startUpdate('3');break;case _0x4ff66a(0x131):handleRestore();break;}}),pid1['on'](_0x221d4e(0x10f),function(_0x14eae9){if(_0x480728)return;_0x480728=!![],logging('Unexpected\x20error:',_0x14eae9);}),pid1['on'](_0x221d4e(0x12e),function(_0x24453f){if(terminating)return;if(updating)return;if(_0x480728)return;_0x480728=!![],console['log']('Automatically\x20restarting\x20BM'),startBM();});}function stopBM(_0x5d4710){const _0x2f85c3=_0x3f6d8b;console['log'](_0x5d4710+_0x2f85c3(0x111)),terminating=!![];if(pid1)pid1[_0x2f85c3(0x112)]();pid1=null;}function startUpdate(_0x19159e){const _0x3b2be5=_0x3f6d8b;updating=!![],stopBM(_0x3b2be5(0x126));let _0x22d46b=![];const _0x20cdbd={'cwd':'','stdio':[_0x3b2be5(0x11e),'inherit','inherit','ipc']};let _0x380dc7=[];if(staging)_0x380dc7[_0x3b2be5(0x102)](_0x19159e+'s');else _0x380dc7[_0x3b2be5(0x102)](_0x19159e);pid2=childProcess[_0x3b2be5(0xfd)](updatefile,_0x380dc7,_0x20cdbd),pid2['on']('error',function(_0x49b7ad){const _0x28f647=_0x3b2be5;updating=![];if(_0x22d46b)return;_0x22d46b=!![],logging(_0x28f647(0x104),_0x49b7ad);}),pid2['on'](_0x3b2be5(0x12e),function(_0x12033e){updating=![];if(_0x22d46b)return;_0x22d46b=!![],terminating=![],startBM();});}function handleRestore(){const _0x35dcae=_0x3f6d8b;if(pid1)pid1[_0x35dcae(0x112)]();}function logging(_0x5bb32f){const _0x20238c=_0x3f6d8b;console['log'](_0x20238c(0x121)+_0x5bb32f);}function sleep(_0x2473ad){return new Promise(_0x22e4e7=>setTimeout(_0x22e4e7,_0x2473ad));}