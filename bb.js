const _0x261112=_0x6eb6;(function(_0x3b2d05,_0x5cbce4){const _0x24f3a7=_0x6eb6,_0xf30d9e=_0x3b2d05();while(!![]){try{const _0x5053d6=parseInt(_0x24f3a7(0x265))/0x1+-parseInt(_0x24f3a7(0x255))/0x2+parseInt(_0x24f3a7(0x2ef))/0x3+parseInt(_0x24f3a7(0x2df))/0x4+parseInt(_0x24f3a7(0x32b))/0x5*(parseInt(_0x24f3a7(0x231))/0x6)+parseInt(_0x24f3a7(0x2d5))/0x7*(-parseInt(_0x24f3a7(0x2e5))/0x8)+-parseInt(_0x24f3a7(0x2ee))/0x9;if(_0x5053d6===_0x5cbce4)break;else _0xf30d9e['push'](_0xf30d9e['shift']());}catch(_0x3d0ba4){_0xf30d9e['push'](_0xf30d9e['shift']());}}}(_0x12f7,0xe06d0));const _0x1e30f1=function(){let _0x1814b1=!![];return function(_0x4dd55d,_0x37ba67){const _0x3571e6=_0x1814b1?function(){const _0x2495b7=_0x6eb6;if(_0x37ba67){const _0x521880=_0x37ba67[_0x2495b7(0x1fb)](_0x4dd55d,arguments);return _0x37ba67=null,_0x521880;}}:function(){};return _0x1814b1=![],_0x3571e6;};}(),_0x2c7e8a=_0x1e30f1(this,function(){const _0x32ab92=_0x6eb6;return _0x2c7e8a['toString']()[_0x32ab92(0x2f1)](_0x32ab92(0x210))[_0x32ab92(0x2c0)]()[_0x32ab92(0x271)](_0x2c7e8a)['search']('(((.+)+)+)+$');});_0x2c7e8a();'use strict';process['env'][_0x261112(0x23c)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x261112(0x1fa)),fs=require('fs'),fns=require(_0x261112(0x30f)),low=require(_0x261112(0x304)),path=require(_0x261112(0x246)),crypto=require('crypto'),Crypt=require(_0x261112(0x24f))[_0x261112(0x2ab)],RSA=require(_0x261112(0x24f))[_0x261112(0x284)],bcrypt=require(_0x261112(0x2f7)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x261112(0x2da))['default'],googleAnalytics=require(_0x261112(0x212))[_0x261112(0x241)],ipaddr=require(_0x261112(0x1fc)),PORT=process['argv'][0x2]||_0x261112(0x282),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x261112(0x2c3)](PORT))return console[_0x261112(0x2eb)](_0x261112(0x244)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x261112(0x307)](0x1);const userID=process[_0x261112(0x24d)][0x3]||'';let bbpath=_0x261112(0x2be);const botfile=_0x261112(0x2bc),configfile=_0x261112(0x2b2),settingsfile=_0x261112(0x2e9),securefile=_0x261112(0x30a);!fs[_0x261112(0x235)](bbpath+botfile)&&(bbpath='');const configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x261112(0x225),configbackuppath=configpath+_0x261112(0x31e);!fs['existsSync'](configpath)&&fs[_0x261112(0x28f)](configpath);!fs[_0x261112(0x235)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x261112(0x290)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x261112(0x290)]({'settings':{'timeshift':0x0}})[_0x261112(0x27e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x261112(0x290)]({'secure':{},'blacklist':[]})[_0x261112(0x27e)]();let crypt=new Crypt({'md':_0x261112(0x1fd),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+_0x261112(0x21d))[_0x261112(0x29a)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x261112(0x2d2)),app=express(),http=require(_0x261112(0x2bd))[_0x261112(0x216)](app);app['use'](express[_0x261112(0x26a)](path[_0x261112(0x22e)](__dirname,bbpath,'build2'))),app['use'](express[_0x261112(0x26a)](path[_0x261112(0x22e)](__dirname,bbpath,_0x261112(0x23b)))),app[_0x261112(0x309)]('/',function(_0xd83755,_0x45d083){const _0x50cda0=_0x261112;_0x45d083['sendFile'](path[_0x50cda0(0x22e)](__dirname,bbpath,_0x50cda0(0x2bb),_0x50cda0(0x233)));}),app[_0x261112(0x309)]('/:bot',function(_0x1290f1,_0x48ec61){const _0x1d1d92=_0x261112;_0x48ec61['sendFile'](path[_0x1d1d92(0x22e)](__dirname,bbpath,'build',_0x1d1d92(0x233)));}),app[_0x261112(0x309)]('/:bot/portfolio',(_0x4b3122,_0x3af8e8)=>{const _0x45f82a=_0x261112;_0x3af8e8[_0x45f82a(0x263)](path[_0x45f82a(0x22e)](__dirname,bbpath,_0x45f82a(0x23b),_0x45f82a(0x233)));}),app[_0x261112(0x309)](_0x261112(0x275),(_0xc0119c,_0x42cf7a)=>{const _0x2c161d=_0x261112;_0x42cf7a[_0x2c161d(0x263)](path[_0x2c161d(0x22e)](__dirname,bbpath,_0x2c161d(0x23b),_0x2c161d(0x233)));}),app[_0x261112(0x309)]('/:bot/coins',(_0x4d76c1,_0x4bc751)=>{const _0x4b9f1d=_0x261112;_0x4bc751[_0x4b9f1d(0x263)](path[_0x4b9f1d(0x22e)](__dirname,bbpath,_0x4b9f1d(0x23b),_0x4b9f1d(0x233)));}),app[_0x261112(0x309)](_0x261112(0x2af),(_0x164053,_0x21ed92)=>{const _0xc55c17=_0x261112;_0x21ed92[_0xc55c17(0x263)](path[_0xc55c17(0x22e)](__dirname,bbpath,'build',_0xc55c17(0x233)));}),app[_0x261112(0x309)](_0x261112(0x2ac),(_0x18fa3a,_0x1c06be)=>{const _0x3d1056=_0x261112;_0x1c06be[_0x3d1056(0x263)](path['join'](__dirname,bbpath,_0x3d1056(0x23b),_0x3d1056(0x233)));}),app[_0x261112(0x309)](_0x261112(0x267),(_0x5afc15,_0x38f250)=>{const _0x58469f=_0x261112;_0x38f250[_0x58469f(0x263)](path[_0x58469f(0x22e)](__dirname,bbpath,_0x58469f(0x23b),'index.html'));}),http[_0x261112(0x25e)](PORT);const analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x261112(0x322)})]}),TelegramBot=require(_0x261112(0x2c1));let tgBot;if(settings['telegramToken']&&settings[_0x261112(0x2f3)]!=''&&settings[_0x261112(0x25b)]&&settings[_0x261112(0x25b)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x7d1657=_0x261112;console[_0x7d1657(0x2eb)](''),console[_0x7d1657(0x2eb)](_0x7d1657(0x31f)),logging(_0x7d1657(0x2dd)+PORT),console[_0x7d1657(0x2eb)](_0x7d1657(0x31f));if(config['length']!=0x0)config[_0x7d1657(0x24a)](_0x3e0f2b=>{const _0x308349=_0x7d1657;if(_0x3e0f2b[_0x308349(0x310)]==_0x308349(0x24e)||_0x3e0f2b['status']==_0x308349(0x2ed))logging(_0x308349(0x269)+_0x3e0f2b[_0x308349(0x2d4)]+_0x308349(0x22a)+_0x3e0f2b[_0x308349(0x25a)]),startBot([_0x3e0f2b[_0x308349(0x2d4)],userID],{'cwd':bbpath},function(_0x7e1821){if(_0x7e1821)logging(_0x7e1821);});else(_0x3e0f2b['status']=='disabled'||_0x3e0f2b[_0x308349(0x310)]==_0x308349(0x2b5))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x3e0f2b[_0x308349(0x2d4)]+_0x308349(0x22a)+_0x3e0f2b[_0x308349(0x25a)]);});else!newBot&&console[_0x7d1657(0x2eb)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x7d1657(0x2eb)](_0x7d1657(0x31f)),console[_0x7d1657(0x2eb)]('');}function startSocket(){const _0x3fabc0=_0x261112,_0x2cf646=require(_0x3fabc0(0x308))(http,{});_0x2cf646['on'](_0x3fabc0(0x2fb),_0x18f36c=>{const _0x11dc30=_0x3fabc0;let _0x230541,_0x56dd92,_0x25ec14;const _0x1fd726=_0x18f36c[_0x11dc30(0x257)][_0x11dc30(0x24c)][_0x11dc30(0x23a)],_0x494bac=_0x18f36c[_0x11dc30(0x257)][_0x11dc30(0x2e4)][_0x11dc30(0x2a2)];if(!_0x494bac)_0x18f36c[_0x11dc30(0x224)](_0x11dc30(0x310),{'publicKey':secure[_0x11dc30(0x31a)]});else{uuid=timelyDecrypt(_0x18f36c['handshake'][_0x11dc30(0x2e4)][_0x11dc30(0x2a2)],![]),_0x56dd92=_0x1fd726[_0x11dc30(0x200)](/bot[0-9]{3}/);if(_0x56dd92)_0x25ec14=_0x56dd92[0x0][_0x11dc30(0x200)](/[0-9]{3}/);if(_0x25ec14)_0x230541=_0x25ec14[0x0];else _0x230541='botmanager';if(socket[_0x230541])socket[_0x230541][_0x11dc30(0x2ba)](!![]);socket[_0x230541]=_0x18f36c,setAccess(_0x230541);if(accessControl[_0x11dc30(0x260)]){if(_0x230541==_0x11dc30(0x2a7))initializeSocketBotManager();else initializeSocketBot(_0x230541);}if(!serverStatus[_0x230541])serverStatus[_0x230541]='connected';socket[_0x230541]['on'](_0x11dc30(0x21a),_0x250401=>{const _0x566d7b=_0x11dc30,_0x18fa25=timelyDecrypt(_0x250401['password']);if(_0x18fa25){_0x250401={'username':_0x250401['username'],'password':_0x18fa25};let _0x11e3b5=validateCredentials(_0x250401);if(_0x11e3b5['allow']==![]&&_0x11e3b5[_0x566d7b(0x2d3)]=='2FA\x20login\x20required')socket[_0x230541][_0x566d7b(0x224)](_0x566d7b(0x310),{'access':_0x11e3b5}),loginAccess2FA(externalip);else{if(_0x11e3b5[_0x566d7b(0x260)]==![]&&_0x11e3b5[_0x566d7b(0x2d3)]=='invalid\x20credentials')socket[_0x230541][_0x566d7b(0x224)](_0x566d7b(0x310),{'access':_0x11e3b5});else{if(_0x11e3b5[_0x566d7b(0x260)]&&_0x11e3b5[_0x566d7b(0x2d3)]==_0x566d7b(0x273)){token=_0x11e3b5[_0x566d7b(0x22f)];for(let _0x297c6f in socket){if(_0x297c6f==_0x566d7b(0x2a7))initializeSocketBotManager();else initializeSocketBot(_0x297c6f);socket[_0x297c6f][_0x566d7b(0x224)](_0x566d7b(0x310),{'status':serverStatus[_0x297c6f]||'starting','serverversion':serverversion,'servertime':getServerTime(),'access':_0x11e3b5,'externalip':externalip,'publicKey':secure[_0x566d7b(0x31a)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout(_0x566d7b(0x21a));}}}}else logging('Unauthorized\x20attempt\x20logging\x20in\x20(timeout)');}),socket[_0x230541]['on'](_0x11dc30(0x230),()=>{resetPassword();}),socket[_0x230541]['on'](_0x11dc30(0x2ba),_0x4cffaa=>{let _0x3cfd2c=[];for(let _0x3ce1c1 in socket){if(_0x3ce1c1!=_0x230541)_0x3cfd2c[_0x3ce1c1]=socket[_0x3ce1c1];}socket=_0x3cfd2c;});if(_0x230541!='botmanager'&&config['apiKey']!=''){if(pid[_0x230541])pid[_0x230541][_0x11dc30(0x2e3)]({'function':'initclient','args':null});}}});}function setAccess(_0x181d52){const _0x587dc7=_0x261112;externalip=normalizeIP(socket[_0x181d52][_0x587dc7(0x29e)][_0x587dc7(0x2c2)])[_0x587dc7(0x214)],accessControl=validateAccess(token),accessControl[_0x587dc7(0x22f)]&&accessControl[_0x587dc7(0x2d3)]==_0x587dc7(0x2f0)&&setSessionTimeout(_0x587dc7(0x324)),accessControl[_0x587dc7(0x22f)]&&accessControl[_0x587dc7(0x2d3)]==_0x587dc7(0x28b)&&setSessionTimeout(_0x587dc7(0x21a)),socket[_0x181d52][_0x587dc7(0x224)](_0x587dc7(0x310),{'status':serverStatus[_0x181d52]||_0x587dc7(0x2cd),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':accessControl[_0x587dc7(0x2d3)]==_0x587dc7(0x293)||accessControl[_0x587dc7(0x2d3)]==_0x587dc7(0x25f)}),accessControl['allow']==![]&&accessControl['reason']==_0x587dc7(0x26e)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0xa892d2){const _0x2b0381=_0x261112;let _0x1b986c;if(_0xa892d2==_0x2b0381(0x21a))_0x1b986c=loginExpiry*0x3c*0x3e8;else _0x1b986c=telegramIpApproval[_0x2b0381(0x2f6)]*0x3c*0x3e8-(new Date()[_0x2b0381(0x291)]()-telegramIpApproval[_0x2b0381(0x245)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x4471f6=_0x2b0381;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x204596=validateAccess(token);if(!(_0x204596['allow']&&_0x204596[_0x4471f6(0x2d3)]==_0x4471f6(0x303)))for(let _0x1b2e46 in socket){socket[_0x1b2e46][_0x4471f6(0x224)](_0x4471f6(0x310),{'access':{'allow':![],'reason':_0x4471f6(0x266),'token':null}});}token=null;},_0x1b986c);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0x17bbbc=_0x6eb6;let _0xa6e965=refreshToken();for(let _0x35e0cd in socket){socket[_0x35e0cd][_0x17bbbc(0x224)](_0x17bbbc(0x310),{'status':serverStatus[_0x35e0cd]||_0x17bbbc(0x2cd),'serverversion':serverversion,'servertime':getServerTime(),'access':_0xa6e965,'externalip':externalip,'publicKey':secure['publicKey'],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0x4d00ee=_0x261112;socket[_0x4d00ee(0x2a7)]['emit'](_0x4d00ee(0x227),config),socket[_0x4d00ee(0x2a7)]['emit']('settings',cleanSettings()),socket[_0x4d00ee(0x2a7)]['on']('add-bot',_0x5d5490=>{const _0x2b4602=_0x4d00ee;if(validateAccess(_0x5d5490)['allow'])addBot();else logging(_0x2b4602(0x30e));}),socket['botmanager']['on']('update-bot',(_0x20ace9,_0x553130)=>{const _0x17d558=_0x4d00ee;if(validateAccess(_0x553130)[_0x17d558(0x260)])toggleBot(_0x20ace9[_0x17d558(0x2d4)],_0x20ace9[_0x17d558(0x310)],_0x20ace9[_0x17d558(0x2ff)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),socket[_0x4d00ee(0x2a7)]['on'](_0x4d00ee(0x2fd),(_0xa124b9,_0x2b10cb)=>{if(validateAccess(_0x2b10cb)['allow'])deleteBot(_0xa124b9);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),socket[_0x4d00ee(0x2a7)]['on']('store-settings',(_0x61a753,_0xc2fb6a)=>{const _0x4e4554=_0x4d00ee;if(validateAccess(_0xc2fb6a)[_0x4e4554(0x260)])storeSettings(_0x61a753,!![]);else logging(_0x4e4554(0x2e1));}),socket[_0x4d00ee(0x2a7)]['on'](_0x4d00ee(0x2ec),_0x4dff2b=>{const _0x5db0a6=_0x4d00ee;if(validateAccess(_0x4dff2b)[_0x5db0a6(0x260)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x648214 in socket){socket[_0x648214][_0x5db0a6(0x224)](_0x5db0a6(0x310),{'access':{'allow':![],'reason':_0x5db0a6(0x305),'token':null}});}}else logging(_0x5db0a6(0x1f5));});}function initializeSocketBot(_0x29ae77){const _0x404008=_0x261112;socket[_0x29ae77]['on']('get-logs',(_0x1827db,_0x533cb8)=>{const _0x2cdc1c=_0x6eb6;if(validateAccess(_0x533cb8)[_0x2cdc1c(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77][_0x2cdc1c(0x2e3)]({'function':_0x2cdc1c(0x253),'args':_0x1827db});}else logging(_0x2cdc1c(0x239));}),socket[_0x29ae77]['on']('get-portfolio',(_0x591610,_0x4ecc18)=>{const _0x28fb95=_0x6eb6;if(validateAccess(_0x4ecc18)[_0x28fb95(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77][_0x28fb95(0x2e3)]({'function':_0x28fb95(0x270),'args':_0x591610});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),socket[_0x29ae77]['on']('store-configuration',(_0xb19097,_0x3e86d6)=>{const _0x435e3d=_0x6eb6;if(validateAccess(_0x3e86d6)['allow']){if(pid[_0x29ae77])pid[_0x29ae77][_0x435e3d(0x2e3)]({'function':_0x435e3d(0x30c),'args':_0xb19097});}else logging(_0x435e3d(0x319));}),socket[_0x29ae77]['on']('store-headless',(_0x329db4,_0x54c7cc)=>{const _0x507b8d=_0x6eb6;if(validateAccess(_0x54c7cc)[_0x507b8d(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77]['send']({'function':_0x507b8d(0x302),'args':_0x329db4});}else logging(_0x507b8d(0x280));}),socket[_0x29ae77]['on'](_0x404008(0x27b),_0x1412b2=>{const _0x13974a=_0x404008;if(validateAccess(_0x1412b2)[_0x13974a(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77][_0x13974a(0x2e3)]({'function':_0x13974a(0x20e),'args':null});}else logging(_0x13974a(0x2cf));}),socket[_0x29ae77]['on']('place-order',(_0x31d569,_0x4febde)=>{const _0x636365=_0x404008;if(validateAccess(_0x4febde)[_0x636365(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77][_0x636365(0x2e3)]({'function':'placeOrder','args':_0x31d569});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),socket[_0x29ae77]['on'](_0x404008(0x232),_0x3d4520=>{const _0x17784c=_0x404008;if(validateAccess(_0x3d4520)[_0x17784c(0x260)]){if(pid[_0x29ae77])pid[_0x29ae77][_0x17784c(0x2e3)]({'function':_0x17784c(0x221),'args':null});}else logging(_0x17784c(0x28e));}),socket[_0x29ae77]['on']('logout',_0x2e40c2=>{const _0x15d086=_0x404008;if(validateAccess(_0x2e40c2)[_0x15d086(0x260)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x29f76b in socket){socket[_0x29f76b][_0x15d086(0x224)](_0x15d086(0x310),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging(_0x15d086(0x1f5));});}function removeSocketListeners(){const _0x574d90=_0x261112;for(let _0x4ab739 in socket){socket[_0x4ab739][_0x574d90(0x213)]();}}function cleanSettings(){const _0x3c084a=_0x261112;let _0x2bda7b=settings;return settings[_0x3c084a(0x2f3)]&&settings[_0x3c084a(0x2f3)]!=''&&(_0x2bda7b={..._0x2bda7b,'telegramToken':_0x3c084a(0x238)}),settings[_0x3c084a(0x2db)]&&settings[_0x3c084a(0x2db)]!=''&&(_0x2bda7b={..._0x2bda7b,'bbPassword':_0x3c084a(0x238)}),_0x2bda7b;}function startBot(_0x341202,_0x26bf5c,_0x19e9a4){const _0x5ae512=_0x261112;let _0x43b0a7=![];const _0x232433=_0x341202[0x0];_0x26bf5c={..._0x26bf5c,'stdio':[_0x5ae512(0x30b),_0x5ae512(0x30b),_0x5ae512(0x30b),_0x5ae512(0x313)]},pid[_0x232433]=childProcess['fork'](botfile,_0x341202,_0x26bf5c),pid[_0x232433]['on'](_0x5ae512(0x2d6),_0x4521f0=>{const _0x2ff13d=_0x5ae512;switch(Object[_0x2ff13d(0x204)](_0x4521f0)[0x0]){case _0x2ff13d(0x25a):updateBotName(_0x232433,_0x4521f0['botname']);break;case _0x2ff13d(0x310):updateStatus(_0x232433,_0x4521f0['status']);break;case _0x2ff13d(0x2ff):updateLive(_0x232433,_0x4521f0[_0x2ff13d(0x2ff)]);break;case _0x2ff13d(0x26b):updateLive(_0x232433,_0x4521f0[_0x2ff13d(0x26b)]);if(socket[_0x232433])socket[_0x232433]['emit'](_0x2ff13d(0x310),{'access':{'allow':![],'reason':_0x2ff13d(0x298),'token':null}});break;case _0x2ff13d(0x316):_0x4521f0[_0x2ff13d(0x316)]==_0x2ff13d(0x2b8)&&stopBot(_0x232433);_0x4521f0[_0x2ff13d(0x316)]==_0x2ff13d(0x29b)&&toggleBot(_0x232433,_0x2ff13d(0x2e7),_0x2ff13d(0x2c6));break;case'telegram':sendTelegram(_0x232433,_0x4521f0[_0x2ff13d(0x262)]);break;case _0x2ff13d(0x20b):if(socket[_0x232433])socket[_0x232433][_0x2ff13d(0x224)](_0x4521f0['function'],_0x4521f0['args']);break;}}),pid[_0x232433]['on'](_0x5ae512(0x29c),function(_0x48901f){if(_0x43b0a7)return;_0x43b0a7=!![],_0x19e9a4(_0x48901f);}),pid[_0x232433]['on'](_0x5ae512(0x307),function(_0x36e175){const _0x5239e4=_0x5ae512;if(_0x43b0a7)return;_0x43b0a7=!![],_0x19e9a4(null);const _0x17d78e=dbConfig[_0x5239e4(0x309)](_0x5239e4(0x227))['find']({'botID':_0x232433})['value']();_0x17d78e&&(_0x17d78e[_0x5239e4(0x310)]==_0x5239e4(0x24e)||_0x17d78e[_0x5239e4(0x310)]=='new')&&(updateLive(_0x232433,_0x5239e4(0x2c6)),logging(_0x5239e4(0x1f7)+_0x232433),startBot([_0x232433,userID],{'cwd':bbpath},function(_0x3e39a1){if(_0x3e39a1)logging(_0x3e39a1);}));});}function stopBot(_0x246f91){const _0x1b97b3=_0x261112;if(socket[_0x246f91])socket[_0x246f91][_0x1b97b3(0x2ba)](!![]);if(pid[_0x246f91])pid[_0x246f91][_0x1b97b3(0x29b)]();}function addBot(){const _0x28230b=_0x261112;let _0x9f67a6;for(let _0x4a0bde=0x1;_0x4a0bde<0x3e9;_0x4a0bde++){_0x9f67a6=_0x4a0bde['toString']()[_0x28230b(0x23f)](0x3,'0');let _0x4d4396=config[_0x28230b(0x2b4)](_0x43ae7e=>_0x43ae7e[_0x28230b(0x2d4)]==_0x9f67a6);if(!_0x4d4396)break;}if(_0x9f67a6===_0x28230b(0x27f)){logging(_0x28230b(0x2c8));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x9f67a6),dbConfig['get']('bots')[_0x28230b(0x2ce)]({'botID':_0x9f67a6,'botname':'Bot\x20'+_0x9f67a6,'status':'new','live':''})[_0x28230b(0x27e)](),startBot([_0x9f67a6,userID],{'cwd':bbpath},function(_0x19822b){if(_0x19822b)logging(_0x19822b);}),config=getConfiguration();if(socket[_0x28230b(0x2a7)])socket[_0x28230b(0x2a7)]['emit']('bots',config);}function deleteBot(_0xd7f22d){const _0x5e414b=_0x261112;if(socket[_0xd7f22d])socket[_0xd7f22d]['disconnect'](!![]);dbConfig[_0x5e414b(0x309)]('bots')[_0x5e414b(0x278)]({'botID':_0xd7f22d})[_0x5e414b(0x27e)](),logging(_0x5e414b(0x2fa)+_0xd7f22d),stopBot(_0xd7f22d);try{fs[_0x5e414b(0x251)](path[_0x5e414b(0x22e)](configpath,'bot-'+_0xd7f22d+_0x5e414b(0x220))),fs['unlinkSync'](path[_0x5e414b(0x22e)](configpath,_0x5e414b(0x219)+_0xd7f22d+_0x5e414b(0x287))),fs[_0x5e414b(0x251)](path['join'](configpath,_0x5e414b(0x219)+_0xd7f22d+_0x5e414b(0x236))),fs['unlinkSync'](path[_0x5e414b(0x22e)](configpath,_0x5e414b(0x219)+_0xd7f22d+_0x5e414b(0x258)));}catch(_0x330e86){if(_0x330e86)logging(_0x5e414b(0x2ae),_0x330e86);}config=getConfiguration();if(socket[_0x5e414b(0x2a7)])socket[_0x5e414b(0x2a7)][_0x5e414b(0x224)](_0x5e414b(0x227),config);}function _0x6eb6(_0xc08fe1,_0x4d096c){const _0x359cc2=_0x12f7();return _0x6eb6=function(_0x2c7e8a,_0x1e30f1){_0x2c7e8a=_0x2c7e8a-0x1f2;let _0x12f790=_0x359cc2[_0x2c7e8a];return _0x12f790;},_0x6eb6(_0xc08fe1,_0x4d096c);}function toggleBot(_0x5e4d3c,_0x3527be,_0x427312){const _0x2cf5be=_0x261112;dbConfig[_0x2cf5be(0x309)](_0x2cf5be(0x227))['find']({'botID':_0x5e4d3c})[_0x2cf5be(0x201)]({'status':_0x3527be})[_0x2cf5be(0x201)]({'live':_0x427312})[_0x2cf5be(0x27e)]();if(_0x3527be==_0x2cf5be(0x24e)||_0x3527be=='new')logging(_0x2cf5be(0x2cc)+_0x5e4d3c),startBot([_0x5e4d3c,userID],{'cwd':bbpath},function(_0x223cba){if(_0x223cba)logging(_0x223cba);});else(_0x3527be=='disabled'||_0x3527be=='new-disabled')&&(logging(_0x2cf5be(0x208)+_0x5e4d3c),stopBot(_0x5e4d3c));config=getConfiguration();if(socket[_0x2cf5be(0x2a7)])socket['botmanager']['emit']('bots',config);}function toggleStatus(_0x287318){const _0x16abb8=_0x261112;let _0x41d920=dbConfig[_0x16abb8(0x309)]('bots')[_0x16abb8(0x2b4)]({'botID':_0x287318})[_0x16abb8(0x326)](),_0xee29ec;if(_0x41d920['status']===_0x16abb8(0x24e))_0xee29ec=_0x16abb8(0x2e7);else{if(_0x41d920[_0x16abb8(0x310)]==='new')_0xee29ec=_0x16abb8(0x2b5);else{if(_0x41d920[_0x16abb8(0x310)]===_0x16abb8(0x2b5))_0xee29ec=_0x16abb8(0x2ed);else{if(_0x41d920[_0x16abb8(0x310)]===_0x16abb8(0x2e7))_0xee29ec=_0x16abb8(0x24e);}}}return _0xee29ec;}function updateStatus(_0x9fbe22,_0xe172e3){const _0x37c7db=_0x261112;dbConfig[_0x37c7db(0x309)](_0x37c7db(0x227))['find']({'botID':_0x9fbe22})['assign']({'status':_0xe172e3})[_0x37c7db(0x27e)](),config=getConfiguration();if(socket[_0x37c7db(0x2a7)])socket['botmanager'][_0x37c7db(0x224)](_0x37c7db(0x227),config);}function updateLive(_0x1d5834,_0xd84366){const _0x5e247f=_0x261112;dbConfig[_0x5e247f(0x309)](_0x5e247f(0x227))['find']({'botID':_0x1d5834})[_0x5e247f(0x201)]({'live':_0xd84366})['write'](),config=getConfiguration();if(socket[_0x5e247f(0x2a7)])socket[_0x5e247f(0x2a7)][_0x5e247f(0x224)](_0x5e247f(0x227),config);}function updateBotName(_0x24841e,_0x4e67c6){const _0x15154e=_0x261112;dbConfig[_0x15154e(0x309)]('bots')['find']({'botID':_0x24841e})['assign']({'botname':_0x4e67c6})[_0x15154e(0x27e)](),config=getConfiguration();if(socket[_0x15154e(0x2a7)])socket['botmanager'][_0x15154e(0x224)](_0x15154e(0x227),config);}function telegramError(_0x267bea){const _0xbf089b=_0x261112;console[_0xbf089b(0x2eb)](getTimeStamp()+_0xbf089b(0x242));}function validateTelegram(_0x5867bc){const _0x80faea=_0x261112;if(_0x5867bc['from'][_0x80faea(0x250)]!=settings[_0x80faea(0x25b)]&&'@'+_0x5867bc['from'][_0x80faea(0x250)]!=settings[_0x80faea(0x25b)])return tgBot[_0x80faea(0x285)](_0x5867bc[_0x80faea(0x2bf)]['id'],_0x80faea(0x314),{'parse_mode':_0x80faea(0x217)})[_0x80faea(0x2b0)](_0x32fbf2=>{telegramError(_0x32fbf2);}),![];return!![];}async function initTelegram(){const _0xdedb5f=_0x261112;if(tgBot)tgBot[_0xdedb5f(0x277)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xdedb5f(0x2f3)],{'polling':!![]});let _0x228b29='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x228b29+='\x0a',_0x228b29+=_0xdedb5f(0x2aa),_0x228b29+=_0xdedb5f(0x315),_0x228b29+=_0xdedb5f(0x27d),_0x228b29+=_0xdedb5f(0x2ad),_0x228b29+=_0xdedb5f(0x247),_0x228b29+='/off\x20-\x20stop\x20bot(s)\x0a',_0x228b29+=_0xdedb5f(0x211),_0x228b29+=_0xdedb5f(0x28c);let _0x40798a=_0xdedb5f(0x21f);_0x40798a+='\x0a',_0x40798a+=_0x228b29,tgBot[_0xdedb5f(0x296)](/\/start/,_0x24e48d=>{const _0x1f85fc=_0xdedb5f;if(!validateTelegram(_0x24e48d))return;if(settings['telegramChatId']!=_0x24e48d['chat']['id'])updateSetting(_0x1f85fc(0x248),_0x24e48d[_0x1f85fc(0x2bf)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x1f85fc(0x285)](_0x24e48d[_0x1f85fc(0x2bf)]['id'],_0x40798a)[_0x1f85fc(0x2b0)](_0x42b501=>{telegramError(_0x42b501);});}),tgBot['onText'](/\/enable/,_0x39c25f=>{const _0x27af69=_0xdedb5f;if(!validateTelegram(_0x39c25f))return;if(settings[_0x27af69(0x248)]!=_0x39c25f[_0x27af69(0x2bf)]['id'])updateSetting(_0x27af69(0x248),_0x39c25f['chat']['id']);updateSetting(_0x27af69(0x29f),!![]),tgBot[_0x27af69(0x285)](_0x39c25f['chat']['id'],_0x27af69(0x203))[_0x27af69(0x2b0)](_0x3b082a=>{telegramError(_0x3b082a);});}),tgBot['onText'](/\/config/,async _0xd7d5a5=>{const _0x18790a=_0xdedb5f;if(!validateTelegram(_0xd7d5a5))return;tgBot[_0x18790a(0x28d)]('callback_query'),tgBot[_0x18790a(0x285)](_0xd7d5a5[_0x18790a(0x2bf)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x18790a(0x2e2),'callback_data':'orders'},{'text':'Alerts','callback_data':_0x18790a(0x254)},{'text':_0x18790a(0x312),'callback_data':_0x18790a(0x240)}]]}})[_0x18790a(0x2b0)](_0xb7de1f=>{telegramError(_0xb7de1f);}),tgBot['on'](_0x18790a(0x2cb),async _0x87fad=>{const _0x1975a0=_0x18790a,_0x4ad3a7=_0x87fad['data'],_0x6793ba=_0x87fad[_0x1975a0(0x2d6)];tgBot[_0x1975a0(0x2a1)](_0x87fad['id'])[_0x1975a0(0x328)](async()=>{const _0x5d56c2=_0x1975a0;_0x4ad3a7=='orders'&&(updateSetting(_0x5d56c2(0x29d),_0x5d56c2(0x2ca)),updateSetting(_0x5d56c2(0x29f),!![]),await tgBot[_0x5d56c2(0x285)](_0x6793ba['chat']['id'],_0x5d56c2(0x24b))[_0x5d56c2(0x2b0)](_0x2eb333=>{telegramError(_0x2eb333);}));_0x4ad3a7==_0x5d56c2(0x254)&&(updateSetting(_0x5d56c2(0x29d),'alerts'),updateSetting(_0x5d56c2(0x29f),!![]),await tgBot[_0x5d56c2(0x285)](_0x6793ba['chat']['id'],_0x5d56c2(0x2f9))[_0x5d56c2(0x2b0)](_0x4162ff=>{telegramError(_0x4162ff);}));_0x4ad3a7==_0x5d56c2(0x240)&&(updateSetting('telegramEvents',_0x5d56c2(0x240)),updateSetting(_0x5d56c2(0x29f),!![]),await tgBot['sendMessage'](_0x6793ba[_0x5d56c2(0x2bf)]['id'],_0x5d56c2(0x20c))[_0x5d56c2(0x2b0)](_0x488c03=>{telegramError(_0x488c03);}));if(!settings[_0x5d56c2(0x248)])tgBot[_0x5d56c2(0x285)](_0x6793ba['chat']['id'],_0x5d56c2(0x206))[_0x5d56c2(0x2b0)](_0x5761d3=>{telegramError(_0x5761d3);});}),tgBot[_0x1975a0(0x28d)](_0x1975a0(0x2cb));});}),tgBot[_0xdedb5f(0x296)](/\/status/,_0x2b1623=>{const _0x3d3916=_0xdedb5f;if(!validateTelegram(_0x2b1623))return;let _0x7cff90=_0x3d3916(0x2b3);config[_0x3d3916(0x24a)](_0x26f181=>{const _0x2ef609=_0x3d3916;_0x7cff90+=_0x2ef609(0x2a0)+_0x26f181[_0x2ef609(0x2d4)]+_0x2ef609(0x22a)+_0x26f181[_0x2ef609(0x25a)]+':\x20'+_0x26f181[_0x2ef609(0x310)]+_0x2ef609(0x274)+_0x26f181[_0x2ef609(0x2ff)]+'\x0a';}),_0x7cff90+='\x0a',_0x7cff90+=_0x3d3916(0x1f8),_0x7cff90+=!settings[_0x3d3916(0x29f)]?_0x3d3916(0x2e0):'Notifications\x20enabled\x0a',_0x7cff90+=settings[_0x3d3916(0x29f)]?settings[_0x3d3916(0x29d)]==_0x3d3916(0x240)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3d3916(0x23d)+settings[_0x3d3916(0x29d)]+_0x3d3916(0x2d7):'',tgBot['sendMessage'](_0x2b1623[_0x3d3916(0x2bf)]['id'],_0x7cff90,{'parse_mode':_0x3d3916(0x217)})[_0x3d3916(0x2b0)](_0x1480ed=>{telegramError(_0x1480ed);});}),tgBot[_0xdedb5f(0x296)](/\/restart/,_0x37dd2f=>{const _0x1115aa=_0xdedb5f;if(!validateTelegram(_0x37dd2f))return;tgBot[_0x1115aa(0x28d)](_0x1115aa(0x2cb));const _0x40055c=getEnabledBots();if(_0x40055c[_0x1115aa(0x2d8)]==0x0)tgBot['sendMessage'](_0x37dd2f[_0x1115aa(0x2bf)]['id'],_0x1115aa(0x23e))['catch'](_0x3f728b=>{telegramError(_0x3f728b);});else{if(_0x40055c[_0x1115aa(0x2d8)]>0x1)_0x40055c[_0x1115aa(0x2ce)]({'botID':'all'});let _0x3bbab0=[],_0x9a0072=[];const _0x32522f=_0x40055c[_0x1115aa(0x2d8)]%0x4==0x0||_0x40055c['length']%0x4==0x3||_0x40055c['length']%0x3==0x1?0x4:0x3;let _0x3a91e6=0x0;_0x40055c[_0x1115aa(0x24a)]((_0x28435a,_0x4d3550)=>{const _0x4b7409=_0x1115aa;if(_0x4d3550%_0x32522f==0x0)_0x9a0072=[];_0x9a0072['push']({'text':_0x28435a['botID']==_0x4b7409(0x240)?_0x4b7409(0x256):_0x4b7409(0x2a0)+_0x28435a[_0x4b7409(0x2d4)],'callback_data':_0x28435a[_0x4b7409(0x2d4)]}),_0x4d3550%_0x32522f==0x0&&(_0x3bbab0[_0x3a91e6]=_0x9a0072,_0x3a91e6++);}),tgBot[_0x1115aa(0x285)](_0x37dd2f[_0x1115aa(0x2bf)]['id'],_0x1115aa(0x2a4),{'reply_markup':{'inline_keyboard':_0x3bbab0}})[_0x1115aa(0x2b0)](_0x4b4aa9=>{telegramError(_0x4b4aa9);}),tgBot['on']('callback_query',async _0x596e7d=>{const _0x23cc9d=_0x1115aa,_0x27e115=_0x596e7d['data'],_0x1c05f8=_0x596e7d[_0x23cc9d(0x2d6)];tgBot[_0x23cc9d(0x2a1)](_0x596e7d['id'])['then'](async()=>{const _0x4e4b98=_0x23cc9d;if(_0x27e115=='all'){if(settings[_0x4e4b98(0x29d)]=='orders')tgBot['sendMessage'](_0x1c05f8[_0x4e4b98(0x2bf)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x4e4b98(0x2b0)](_0xfcf3f=>{telegramError(_0xfcf3f);});config[_0x4e4b98(0x24a)](_0x11ecff=>{const _0x4b29b6=_0x4e4b98;stopBot(_0x11ecff[_0x4b29b6(0x2d4)]);});}else{if(settings[_0x4e4b98(0x29d)]==_0x4e4b98(0x2ca))tgBot[_0x4e4b98(0x285)](_0x1c05f8[_0x4e4b98(0x2bf)]['id'],_0x4e4b98(0x27a)+_0x27e115)[_0x4e4b98(0x2b0)](_0x2cbdf3=>{telegramError(_0x2cbdf3);});stopBot(_0x27e115);}}),tgBot[_0x23cc9d(0x28d)](_0x23cc9d(0x2cb));});}}),tgBot[_0xdedb5f(0x296)](/\/on/,_0x3255be=>{const _0x2dafe1=_0xdedb5f;if(!validateTelegram(_0x3255be))return;tgBot[_0x2dafe1(0x28d)]('callback_query');const _0x1554d6=getDisabledBots();if(_0x1554d6['length']==0x0)tgBot[_0x2dafe1(0x285)](_0x3255be[_0x2dafe1(0x2bf)]['id'],_0x2dafe1(0x226))[_0x2dafe1(0x2b0)](_0x219b6c=>{telegramError(_0x219b6c);});else{if(_0x1554d6[_0x2dafe1(0x2d8)]>0x1)_0x1554d6[_0x2dafe1(0x2ce)]({'botID':_0x2dafe1(0x240)});let _0x531cd3=[],_0x719624=[];const _0x1deefc=_0x1554d6[_0x2dafe1(0x2d8)]%0x4==0x0||_0x1554d6[_0x2dafe1(0x2d8)]%0x4==0x3||_0x1554d6['length']%0x3==0x1?0x4:0x3;let _0xb743fe=0x0;_0x1554d6['forEach']((_0xa4dcd5,_0x52e886)=>{const _0xe97af7=_0x2dafe1;if(_0x52e886%_0x1deefc==0x0)_0x719624=[];_0x719624[_0xe97af7(0x2ce)]({'text':_0xa4dcd5[_0xe97af7(0x2d4)]=='all'?'All\x20bots':_0xe97af7(0x2a0)+_0xa4dcd5[_0xe97af7(0x2d4)],'callback_data':_0xa4dcd5[_0xe97af7(0x2d4)]}),_0x52e886%_0x1deefc==0x0&&(_0x531cd3[_0xb743fe]=_0x719624,_0xb743fe++);}),tgBot[_0x2dafe1(0x285)](_0x3255be[_0x2dafe1(0x2bf)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x531cd3}})[_0x2dafe1(0x2b0)](_0x212f55=>{telegramError(_0x212f55);}),tgBot['on']('callback_query',async _0x1dcbef=>{const _0x400796=_0x2dafe1,_0x4d9946=_0x1dcbef[_0x400796(0x222)],_0xeb2984=_0x1dcbef[_0x400796(0x2d6)];tgBot[_0x400796(0x2a1)](_0x1dcbef['id'])[_0x400796(0x328)](async()=>{const _0x17c19c=_0x400796;if(_0x4d9946==_0x17c19c(0x240)){if(settings[_0x17c19c(0x29d)]==_0x17c19c(0x2ca))tgBot['sendMessage'](_0xeb2984[_0x17c19c(0x2bf)]['id'],_0x17c19c(0x25c))[_0x17c19c(0x2b0)](_0x2ddef4=>{telegramError(_0x2ddef4);});_0x1554d6[_0x17c19c(0x24a)](_0x47509d=>{const _0x234986=_0x17c19c;if(_0x47509d['botID']!=_0x234986(0x240))toggleBot(_0x47509d['botID'],toggleStatus(_0x47509d[_0x234986(0x2d4)]),_0x234986(0x2c6));});}else{if(settings['telegramEvents']==_0x17c19c(0x2ca))tgBot[_0x17c19c(0x285)](_0xeb2984[_0x17c19c(0x2bf)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4d9946)[_0x17c19c(0x2b0)](_0xc64670=>{telegramError(_0xc64670);});toggleBot(_0x4d9946,toggleStatus(_0x4d9946),'stopped');}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0xdedb5f(0x296)](/\/off/,_0x3b3364=>{const _0x4166e0=_0xdedb5f;if(!validateTelegram(_0x3b3364))return;tgBot[_0x4166e0(0x28d)](_0x4166e0(0x2cb));const _0x303f43=getEnabledBots();if(_0x303f43[_0x4166e0(0x2d8)]==0x0)tgBot[_0x4166e0(0x285)](_0x3b3364['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x4166e0(0x2b0)](_0x4d4e71=>{telegramError(_0x4d4e71);});else{if(_0x303f43[_0x4166e0(0x2d8)]>0x1)_0x303f43['push']({'botID':'all'});let _0x50e71c=[],_0x1bf385=[];const _0x1ec71d=_0x303f43[_0x4166e0(0x2d8)]%0x4==0x0||_0x303f43[_0x4166e0(0x2d8)]%0x4==0x3||_0x303f43['length']%0x3==0x1?0x4:0x3;let _0x1717ab=0x0;_0x303f43[_0x4166e0(0x24a)]((_0x4066d5,_0x891e0f)=>{const _0x21f51=_0x4166e0;if(_0x891e0f%_0x1ec71d==0x0)_0x1bf385=[];_0x1bf385[_0x21f51(0x2ce)]({'text':_0x4066d5['botID']==_0x21f51(0x240)?_0x21f51(0x256):_0x21f51(0x2a0)+_0x4066d5[_0x21f51(0x2d4)],'callback_data':_0x4066d5['botID']}),_0x891e0f%_0x1ec71d==0x0&&(_0x50e71c[_0x1717ab]=_0x1bf385,_0x1717ab++);}),tgBot[_0x4166e0(0x285)](_0x3b3364['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x50e71c}})[_0x4166e0(0x2b0)](_0x5f3f36=>{telegramError(_0x5f3f36);}),tgBot['on'](_0x4166e0(0x2cb),async _0x27e6b2=>{const _0x337808=_0x4166e0,_0x3aa0c5=_0x27e6b2[_0x337808(0x222)],_0x2209e0=_0x27e6b2['message'];tgBot['answerCallbackQuery'](_0x27e6b2['id'])['then'](async()=>{const _0x31cf9a=_0x337808;if(_0x3aa0c5==_0x31cf9a(0x240)){if(settings[_0x31cf9a(0x29d)]=='orders')tgBot['sendMessage'](_0x2209e0[_0x31cf9a(0x2bf)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x31cf9a(0x2b0)](_0x482ea1=>{telegramError(_0x482ea1);});_0x303f43[_0x31cf9a(0x24a)](_0x5a58d8=>{const _0x357fb7=_0x31cf9a;if(_0x5a58d8['botID']!=_0x357fb7(0x240))toggleBot(_0x5a58d8[_0x357fb7(0x2d4)],toggleStatus(_0x5a58d8['botID']),'stopped');});}else{if(settings[_0x31cf9a(0x29d)]=='orders')tgBot[_0x31cf9a(0x285)](_0x2209e0[_0x31cf9a(0x2bf)]['id'],_0x31cf9a(0x288)+_0x3aa0c5)[_0x31cf9a(0x2b0)](_0x3b817e=>{telegramError(_0x3b817e);});toggleBot(_0x3aa0c5,toggleStatus(_0x3aa0c5),_0x31cf9a(0x2c6));}}),tgBot['removeListener'](_0x337808(0x2cb));});}}),tgBot[_0xdedb5f(0x296)](/\/disable/,_0x1b69b5=>{const _0x2bb9db=_0xdedb5f;if(!validateTelegram(_0x1b69b5))return;tgBot[_0x2bb9db(0x285)](_0x1b69b5['chat']['id'],_0x2bb9db(0x31b))[_0x2bb9db(0x2b0)](_0x46ffc8=>{telegramError(_0x46ffc8);}),updateSetting(_0x2bb9db(0x29f),![]);}),tgBot['onText'](/\/help/,_0x1aff4c=>{const _0x5968e5=_0xdedb5f;if(!validateTelegram(_0x1aff4c))return;tgBot['sendMessage'](_0x1aff4c[_0x5968e5(0x2bf)]['id'],_0x228b29)[_0x5968e5(0x2b0)](_0x4c89b6=>{telegramError(_0x4c89b6);});}),tgBot['on'](_0xdedb5f(0x2f2),_0x477d21=>{const _0x4dbb11=_0xdedb5f;if(_0x477d21[_0x4dbb11(0x2c0)]()[_0x4dbb11(0x21c)](_0x4dbb11(0x2d1))){logging('Invalid\x20Telegram\x20token'),tgBot[_0x4dbb11(0x277)](),tgBot=null;if(socket['botmanager'])socket['botmanager'][_0x4dbb11(0x224)]('notification',_0x4dbb11(0x2fc));}}),process[_0xdedb5f(0x261)]('SIGINT',()=>{const _0x101650=_0xdedb5f;if(tgBot)tgBot['stopPolling']();process[_0x101650(0x307)](0x1);}),process['once'](_0xdedb5f(0x321),()=>{const _0xf1da1a=_0xdedb5f;if(tgBot)tgBot[_0xf1da1a(0x277)]();process['exit'](0x1);});}}function disableTelegram(){const _0x4ed07e=_0x261112;tgBot&&(tgBot[_0x4ed07e(0x277)](),tgBot=null);}function sendTelegram(_0x200e5b,_0x223b9c){const _0x24ad51=_0x261112;if(settings[_0x24ad51(0x29f)]){if(settings[_0x24ad51(0x29d)]==_0x24ad51(0x240)||(_0x223b9c[_0x24ad51(0x292)]==_0x24ad51(0x29c)||_0x223b9c[_0x24ad51(0x292)]==_0x24ad51(0x329))&&settings['telegramEvents']==_0x24ad51(0x254)||_0x223b9c[_0x24ad51(0x292)]==_0x24ad51(0x2c4)&&settings[_0x24ad51(0x29d)]=='orders'){if(tgBot&&settings[_0x24ad51(0x248)]){if(_0x223b9c[_0x24ad51(0x223)])tgBot[_0x24ad51(0x285)](settings['telegramChatId'],_0x223b9c[_0x24ad51(0x25a)]+_0x24ad51(0x289)+_0x223b9c[_0x24ad51(0x1f6)])['catch'](_0x1147a4=>{telegramError(_0x1147a4);});else tgBot[_0x24ad51(0x285)](settings[_0x24ad51(0x248)],_0x24ad51(0x2a0)+_0x200e5b+_0x24ad51(0x289)+_0x223b9c[_0x24ad51(0x1f6)])[_0x24ad51(0x2b0)](_0x194e7b=>{telegramError(_0x194e7b);});}}}}function temporaryAccess2FA(_0x3193af){const _0x33e40f=_0x261112;let _0x51f43a=new Date(),_0x1a9669=![];if(lastIpApproval){if(_0x51f43a-lastIpApproval<0x1388)_0x1a9669=!![];}lastIpApproval=new Date();if(_0x1a9669)return;tgBot&&settings[_0x33e40f(0x248)]&&(tgBot[_0x33e40f(0x28d)](_0x33e40f(0x2cb)),tgBot[_0x33e40f(0x285)](settings[_0x33e40f(0x248)],_0x33e40f(0x32c)+normalizeIP(_0x3193af)['show']+'</b>\x20?',{'parse_mode':_0x33e40f(0x217),'reply_markup':{'inline_keyboard':[[{'text':_0x33e40f(0x218),'callback_data':'5'},{'text':_0x33e40f(0x2b1),'callback_data':'15'},{'text':_0x33e40f(0x286),'callback_data':'30'},{'text':_0x33e40f(0x32d),'callback_data':_0x33e40f(0x32d)}]]}})[_0x33e40f(0x2b0)](_0x42b708=>{telegramError(_0x42b708);}),tgBot['on']('callback_query',async _0x3af903=>{const _0x44e994=_0x33e40f,_0x27cba3=_0x3af903[_0x44e994(0x222)],_0x5bbdd9=_0x3af903['message'];tgBot['answerCallbackQuery'](_0x3af903['id'])[_0x44e994(0x328)](async()=>{const _0x530561=_0x44e994;if(_0x27cba3!=_0x530561(0x32d)){telegramIpApproval={'clientip':_0x3193af,'timestamp':new Date()[_0x530561(0x291)](),'expiry':_0x27cba3},await tgBot[_0x530561(0x285)](_0x5bbdd9[_0x530561(0x2bf)]['id'],_0x530561(0x2ea)+_0x27cba3+_0x530561(0x2a6),{'parse_mode':'HTML'})[_0x530561(0x2b0)](_0xe3f5e8=>{telegramError(_0xe3f5e8);});for(let _0x32ef31 in socket){socket[_0x32ef31][_0x530561(0x224)](_0x530561(0x310),{'access':{'allow':![],'reason':_0x530561(0x298),'token':null}});}}else await tgBot[_0x530561(0x285)](_0x5bbdd9[_0x530561(0x2bf)]['id'],_0x530561(0x205))[_0x530561(0x2b0)](_0x56e4b4=>{telegramError(_0x56e4b4);});}),tgBot[_0x44e994(0x28d)](_0x44e994(0x2cb));}));}function loginAccess2FA(_0x32e515){const _0x18f411=_0x261112;tgBot&&settings['telegramChatId']&&(tgBot[_0x18f411(0x28d)](_0x18f411(0x2cb)),tgBot['sendMessage'](settings['telegramChatId'],_0x18f411(0x283)+normalizeIP(_0x32e515)['show']+_0x18f411(0x320),{'parse_mode':_0x18f411(0x217),'reply_markup':{'inline_keyboard':[[{'text':_0x18f411(0x295),'callback_data':loginExpiry},{'text':_0x18f411(0x32d),'callback_data':_0x18f411(0x32d)}]]}})[_0x18f411(0x2b0)](_0x66660f=>{telegramError(_0x66660f);}),tgBot['on'](_0x18f411(0x2cb),async _0x14f3e8=>{const _0x23846f=_0x18f411,_0x3bf2d2=_0x14f3e8[_0x23846f(0x222)],_0x31e763=_0x14f3e8[_0x23846f(0x2d6)];tgBot[_0x23846f(0x2a1)](_0x14f3e8['id'])['then'](async()=>{const _0x568818=_0x23846f;if(_0x3bf2d2!=_0x568818(0x32d)){telegram2FaApproval={'clientip':_0x32e515,'timestamp':new Date()[_0x568818(0x291)](),'expiry':_0x3bf2d2},await tgBot[_0x568818(0x285)](_0x31e763['chat']['id'],_0x568818(0x31d),{'parse_mode':_0x568818(0x217)})[_0x568818(0x2b0)](_0x396e85=>{telegramError(_0x396e85);});for(let _0x5501d5 in socket){socket[_0x5501d5][_0x568818(0x224)](_0x568818(0x310),{'access':{'allow':![],'reason':_0x568818(0x298),'token':null}});}}else await tgBot[_0x568818(0x285)](_0x31e763['chat']['id'],_0x568818(0x1ff))[_0x568818(0x2b0)](_0x4ea10d=>{telegramError(_0x4ea10d);});}),tgBot[_0x23846f(0x28d)](_0x23846f(0x2cb));}));}function getConfiguration(){const _0x2c4de0=_0x261112;return dbConfig[_0x2c4de0(0x309)](_0x2c4de0(0x227))[_0x2c4de0(0x252)]('botID')[_0x2c4de0(0x326)]()||[];}function getEnabledBots(){const _0x4ca511=_0x261112;return dbConfig[_0x4ca511(0x309)](_0x4ca511(0x227))[_0x4ca511(0x252)](_0x4ca511(0x2d4))[_0x4ca511(0x32a)]({'status':_0x4ca511(0x24e)})['value']()||[];}function getDisabledBots(){const _0x500517=_0x261112;return dbConfig[_0x500517(0x309)]('bots')[_0x500517(0x252)]('botID')[_0x500517(0x32a)]({'status':_0x500517(0x2e7)})['value']()||[];}function getSettings(){const _0x362446=_0x261112;return dbSettings['get'](_0x362446(0x279))['value']()||{'timeshift':0x0};}function getSecure(){const _0xd9c09e=_0x261112;return dbSecure[_0xd9c09e(0x309)](_0xd9c09e(0x228))[_0xd9c09e(0x326)]()||{};}function getBlacklist(){const _0x2abfc6=_0x261112;return dbSecure['get'](_0x2abfc6(0x311))['value']()||[];}function broadcastToBots(_0x5a3fe7,_0x239741){const _0x5ae0bb=_0x261112;config[_0x5ae0bb(0x24a)](_0xf2b093=>{const _0x38b6d5=_0x5ae0bb;if(_0xf2b093[_0x38b6d5(0x310)]==_0x38b6d5(0x24e)&&_0xf2b093[_0x38b6d5(0x2ff)]=='running'){if(pid[_0xf2b093[_0x38b6d5(0x2d4)]])pid[_0xf2b093[_0x38b6d5(0x2d4)]][_0x38b6d5(0x2e3)]({[_0x5a3fe7]:_0x239741});}});}function storeSettings(_0x5db49a,_0x3027b0=![]){const _0x36c71c=_0x261112;_0x5db49a={...settings,..._0x5db49a};if(_0x3027b0&&_0x5db49a[_0x36c71c(0x2db)]!='************'&&_0x5db49a[_0x36c71c(0x2db)]!=''){const _0x4f5f3d=crypt[_0x36c71c(0x28a)](secure[_0x36c71c(0x1fe)],_0x5db49a['bbPassword'])['message'][_0x36c71c(0x21e)]('@')[0x0],_0x2e6cf5=bcrypt[_0x36c71c(0x27c)](_0x4f5f3d,saltRounds);_0x5db49a={..._0x5db49a,'bbPassword':_0x2e6cf5};}if(_0x3027b0&&_0x5db49a[_0x36c71c(0x2f3)]!='************'&&_0x5db49a[_0x36c71c(0x2f3)]!=''){const _0x4032ab=crypt[_0x36c71c(0x28a)](secure[_0x36c71c(0x1fe)],_0x5db49a['telegramToken'])['message'][_0x36c71c(0x21e)]('@')[0x0];_0x5db49a={..._0x5db49a,'telegramToken':_0x4032ab};}const _0x590267=_0x5db49a[_0x36c71c(0x2f3)]!=_0x36c71c(0x238)&&_0x5db49a['telegramToken']!=settings[_0x36c71c(0x2f3)]||_0x5db49a['telegramUsername']!=settings[_0x36c71c(0x25b)],_0x56f283=_0x5db49a['telegramToken']==''||_0x5db49a[_0x36c71c(0x25b)]=='';if(_0x590267)_0x5db49a['telegramEvents']=_0x36c71c(0x240);for(const [_0x6fec81,_0x527227]of Object[_0x36c71c(0x268)](_0x5db49a)){if(_0x6fec81==_0x36c71c(0x2f3)&&_0x527227==_0x36c71c(0x238)){_0x5db49a[_0x36c71c(0x2f3)]=settings[_0x36c71c(0x2f3)];continue;};if(_0x6fec81==_0x36c71c(0x2db)&&_0x527227=='************'){_0x5db49a[_0x36c71c(0x2db)]=settings['bbPassword'];continue;};dbSettings[_0x36c71c(0x2dc)]('settings.'+_0x6fec81,_0x527227)[_0x36c71c(0x27e)]();}settings=_0x5db49a;if(socket[_0x36c71c(0x2a7)])socket['botmanager'][_0x36c71c(0x224)](_0x36c71c(0x279),cleanSettings());broadcastToBots(_0x36c71c(0x2b9),settings['timeshift']);if(_0x590267&&!_0x56f283)initTelegram();if(_0x590267&&_0x56f283)disableTelegram();for(let _0x4cd305 in socket){setAccess(_0x4cd305);}}function updateSetting(_0xbc25eb,_0x2c16c6){const _0x4912ca=_0x261112;dbSettings['set'](_0x4912ca(0x2b7)+_0xbc25eb,_0x2c16c6)[_0x4912ca(0x27e)](),settings=getSettings();if(socket[_0x4912ca(0x2a7)])socket[_0x4912ca(0x2a7)][_0x4912ca(0x224)]('settings',cleanSettings());}function storeSecure(_0x1cd27e){const _0x14c06a=_0x261112;dbSecure[_0x14c06a(0x309)](_0x14c06a(0x228))['push'](_0x1cd27e)[_0x14c06a(0x27e)](),secure=_0x1cd27e;}function addBlacklist(){const _0x20bfcf=_0x261112;cleanBlacklist();let _0x4a3ce4;telegramIpApproval?_0x4a3ce4=Math[_0x20bfcf(0x2a5)](telegramIpApproval[_0x20bfcf(0x2f6)],loginExpiry):_0x4a3ce4=loginExpiry,dbSecure[_0x20bfcf(0x309)](_0x20bfcf(0x311))['push']({'expiry':new Date()[_0x20bfcf(0x291)]()+_0x4a3ce4*0x3c*0x3e8,'token':token})[_0x20bfcf(0x27e)](),blacklist=dbSecure['get'](_0x20bfcf(0x311))[_0x20bfcf(0x326)]();}function cleanBlacklist(){const _0x2bfc18=_0x261112;let _0xd0e7bc=dbSecure[_0x2bfc18(0x309)]('blacklist')[_0x2bfc18(0x1f9)]()[_0x2bfc18(0x326)](),_0xf6cbb9=new Date()[_0x2bfc18(0x291)]();_0xd0e7bc[_0x2bfc18(0x24a)](_0x42ba3d=>{const _0x28e4da=_0x2bfc18;_0x42ba3d[_0x28e4da(0x2f6)]<_0xf6cbb9&&dbSecure[_0x28e4da(0x309)](_0x28e4da(0x311))[_0x28e4da(0x278)]({'expiry':_0x42ba3d[_0x28e4da(0x2f6)]})['write']();});}function initStates(){const _0x2fb0d8=_0x261112;let _0x34b4fb=getConfiguration();_0x34b4fb[_0x2fb0d8(0x24a)](_0x1ebd7d=>{const _0x267908=_0x2fb0d8;_0x1ebd7d[_0x267908(0x2ff)]=_0x267908(0x2c6);}),storeConfiguration(_0x34b4fb);}function onKeys(){const _0x3e2ce6=new RSA();return new Promise(_0x1bbc6f=>{const _0xc7f593=_0x6eb6;_0x3e2ce6[_0xc7f593(0x276)]()[_0xc7f593(0x328)](_0xdaccd7=>{_0x1bbc6f(_0xdaccd7);});});}function _0x12f7(){const _0x5bfd68=['write','1000','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','copyFileSync','3000','Allow\x20login\x20from\x20IP\x20address\x20<b>','RSA','sendMessage','30\x20min','-events.json','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','\x20>\x20','decrypt','2FA\x20login\x20token\x20generated','/help\x20-\x20show\x20avaiable\x20commands\x0a','removeListener','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','mkdirSync','defaults','getTime','type','login\x20required','login\x20token\x20valid','accept','onText','getSeconds','reload','https://hodlerhacks.com','version','kill','error','telegramEvents','conn','telegramEnabled','Bot\x20','answerCallbackQuery','encryptedUuid','isDirectory','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','max','\x20minutes','botmanager','isIPv4MappedAddress','getUTCHours','/enable\x20-\x20enable\x20notifications\x0a','Crypt','/:bot/configuration','/restart\x20-\x20restart\x20bot(s)\x0a','error\x20while\x20deleting\x20log\x20files:\x20','/:bot/history','catch','15\x20min','bb-config.json','<b>Balance\x20Bot\x20status:</b>\x0a','find','new-disabled','User\x20has\x20been\x20validated','settings.','restart','timeshift','disconnect','build2','bot.js','http','bb/','chat','toString','node-telegram-bot-api','remoteAddress','test','order','getMinutes','stopped','password','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','randomFillSync','orders','callback_query','enabled\x20Bot\x20','starting','push','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Password\x20reset\x20rejected','404\x20Not\x20Found','express','reason','botID','469oUAaeY','message','\x20only\x0a','length','::1','analytics','bbPassword','set','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','f2aRequired','6290260JneLGJ','Notifications\x20disabled\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','Orders','send','auth','39048UIzOdi','No\x20authentication\x20token','disabled','ipv6','bb-settings.json','Access\x20enabled\x20for\x20','log','logout','new','37678869cajuAy','4811946EDacfn','temporary\x20token\x20generated','search','polling_error','telegramToken','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',':\x20Bot\x20Mgr\x20>\x20','expiry','bcryptjs','name','Ok,\x20will\x20send\x20alert\x20notifications\x20only','deleted\x20Bot\x20','connection','Invalid\x20Telegram\x20token','delete-bot','clientip','live','temporaryAccessAllowed','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','storeHeadless','login\x20not\x20required','lowdb','logged\x20out','whitelist','exit','socket.io','get','bb-secure.json','inherit','storeConfiguration','randomBytes','Unauthorized\x20attempt\x20to\x20add\x20bot','date-fns','status','blacklist','All','ipc','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','/disable\x20-\x20disable\x20notifications\x0a','stop','exp','loginRequired','Unauthorized\x20attempt\x20to\x20store\x20configuration','publicKey','Notifications\x20disabled','getHours','Login\x20accepted','backup/','-----------------------------------------------------------------------------------','</b>\x20?','SIGTERM','UA-192771731-1','temporary\x20access\x20not\x20allowed','2FA','yes','value','hex','then','success','filter','170035IAtuJt','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','reject','Invalid\x20IP\x20address','compareSync','hasOwnProperty','Unauthorized\x20attempt\x20to\x20log\x20out','event','restarting\x20Bot\x20','<b>Telegram\x20bot\x20status:</b>\x0a','cloneDeep','lowdb/adapters/FileSync','apply','ipaddr.js','sha256','privateKey','Login\x20rejected','match','assign','::ffff:127.0.0.1','Notifications\x20enabled','keys','Temporary\x20access\x20rejected','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','sign','disabled\x20Bot\x20','invalid\x20credentials','bbUsername','function','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','verify','getStartingBalances','getDate','(((.+)+)+)+$','/status\x20-\x20show\x20bot(s)\x20status\x0a','@analytics/google-analytics','removeAllListeners','store','add','createServer','HTML','5\x20min','bot-','login','Balance\x20Bot\x20Server','includes','version.json','split','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','-config.json','cancelLoading','data','showname','emit','config/','All\x20bots\x20running\x20right\x20now','bots','secure','page','\x20|\x20','parse','toIPv4MappedAddress','isValid','join','token','reset-password','318UcGLVE','cancel-loading','index.html','from','existsSync','-performance.json','getMonth','************','Unauthorized\x20attempt\x20to\x20get\x20logs','referer','build','NTBA_FIX_319','Notifications\x20types:\x20','No\x20bots\x20running\x20right\x20now','padStart','all','default',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Bot\x20Mgr\x20>\x20','Error:\x20Invalid\x20argument\x20','timestamp','path','/on\x20-\x20start\x20bot(s)\x0a','telegramChatId','Invalid\x20username\x20or\x20IP\x20address','forEach','Ok,\x20will\x20send\x20order\x20notifications\x20only','headers','argv','enabled','hybrid-crypto-js','username','unlinkSync','sortBy','emitHistory','alerts','635468XpfnvN','All\x20bots','handshake','-results.json','getFullYear','botname','telegramUsername','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','kind','listen','2FA\x20login\x20required','allow','once','telegram','sendFile','Password\x20has\x20been\x20reset\x20to:\x20','771632MIBIyH','access\x20timeout','/:bot/support','entries','starting\x20bot\x20|\x20Bot\x20','static','started','Invalid\x20authentication\x20token\x20(2)','whitelistEnabled','2FA\x20required','secret','getPortfolio','constructor','Invalid\x20authentication\x20token\x20(1)','login\x20token\x20generated','\x20/\x20','/:bot/performance','generateKeyPairAsync','stopPolling','remove','settings','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','get-starting-balances','hashSync','/config\x20-\x20notification\x20types\x20to\x20receive\x0a'];_0x12f7=function(){return _0x5bfd68;};return _0x12f7();}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x571e67=_0x261112;let _0x2221d3=getConfiguration(),_0x12363c=![];_0x2221d3[_0x571e67(0x24a)](_0x3951ec=>{const _0x6b309=_0x571e67;if(_0x3951ec[_0x6b309(0x310)]=='running')_0x3951ec['status']=_0x6b309(0x24e),_0x12363c=!![];else _0x3951ec[_0x6b309(0x310)]==_0x6b309(0x2c6)&&(_0x3951ec[_0x6b309(0x310)]=_0x6b309(0x2e7),_0x12363c=!![]);});if(_0x12363c)storeConfiguration(_0x2221d3);let _0x57e4e4=getSecure();if(!_0x57e4e4['hasOwnProperty'](_0x571e67(0x26f))){let _0x4b0faf=await generateKeys();_0x57e4e4[_0x571e67(0x31a)]=_0x4b0faf['publicKey'],_0x57e4e4[_0x571e67(0x1fe)]=_0x4b0faf['privateKey'],_0x57e4e4[_0x571e67(0x26f)]=crypto[_0x571e67(0x30d)](0x20)[_0x571e67(0x2c0)](_0x571e67(0x327));;storeSecure(_0x57e4e4);}let _0x2322e5=getSettings();_0x12363c=![];!_0x2322e5[_0x571e67(0x1f4)](_0x571e67(0x318))&&(_0x2322e5[_0x571e67(0x318)]=![],_0x2322e5['bbUsername']='',_0x2322e5[_0x571e67(0x2db)]='',_0x2322e5[_0x571e67(0x2de)]=![],_0x12363c=!![]);!_0x2322e5['hasOwnProperty']('whitelistEnabled')&&(_0x2322e5[_0x571e67(0x26d)]=![],_0x2322e5[_0x571e67(0x306)]=[],_0x2322e5[_0x571e67(0x300)]=![],_0x12363c=!![]);if(!_0x2322e5[_0x571e67(0x1f4)](_0x571e67(0x29f))){if(_0x2322e5['telegramChatId'])_0x2322e5[_0x571e67(0x29f)]=!![];else _0x2322e5[_0x571e67(0x29f)]=![];_0x12363c=!![];}if(_0x12363c)storeSettings(_0x2322e5);}function storeConfiguration(_0x5e02da){const _0x1e029d=_0x261112;dbConfig[_0x1e029d(0x309)](_0x1e029d(0x227))[_0x1e029d(0x278)]()[_0x1e029d(0x27e)](),dbConfig[_0x1e029d(0x309)](_0x1e029d(0x227))['push'](..._0x5e02da)[_0x1e029d(0x27e)](),config=_0x5e02da;}function resetPassword(){const _0x6cf430=_0x261112;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0x6cf430(0x285)](settings[_0x6cf430(0x248)],_0x6cf430(0x301),{'parse_mode':_0x6cf430(0x217),'reply_markup':{'inline_keyboard':[[{'text':_0x6cf430(0x325),'callback_data':_0x6cf430(0x325)},{'text':'no','callback_data':'no'}]]}})[_0x6cf430(0x2b0)](_0x29ac4f=>{telegramError(_0x29ac4f);}),tgBot['on'](_0x6cf430(0x2cb),async _0x54c038=>{const _0x497ae1=_0x6cf430,_0x52e310=_0x54c038['data'],_0x6f6515=_0x54c038[_0x497ae1(0x2d6)];tgBot[_0x497ae1(0x2a1)](_0x54c038['id'])[_0x497ae1(0x328)](async()=>{const _0x1d4f7f=_0x497ae1;if(_0x52e310!='no'){const _0x4e4034=0xf,_0x215b4d=_0x1d4f7f(0x2f4),_0x26b9cc=Array[_0x1d4f7f(0x234)](crypto[_0x1d4f7f(0x2c9)](new Uint32Array(_0x4e4034)))['map'](_0xe18edc=>_0x215b4d[_0xe18edc%_0x215b4d[_0x1d4f7f(0x2d8)]])[_0x1d4f7f(0x22e)](''),_0x24a441=bcrypt[_0x1d4f7f(0x27c)](_0x26b9cc,saltRounds);storeSettings({'bbPassword':_0x24a441}),await tgBot[_0x1d4f7f(0x285)](_0x6f6515[_0x1d4f7f(0x2bf)]['id'],_0x1d4f7f(0x264)+_0x26b9cc,{'parse_mode':'HTML'})[_0x1d4f7f(0x2b0)](_0x49c586=>{telegramError(_0x49c586);});}else await tgBot[_0x1d4f7f(0x285)](_0x6f6515[_0x1d4f7f(0x2bf)]['id'],_0x1d4f7f(0x2d0))[_0x1d4f7f(0x2b0)](_0x2aa15e=>{telegramError(_0x2aa15e);});}),tgBot[_0x497ae1(0x28d)]('callback_query');}));}function logging(_0x55ee20){const _0x22728a=_0x261112;console[_0x22728a(0x2eb)](getTimeStamp()+_0x22728a(0x2f5)+_0x55ee20);if(tgBot&&settings[_0x22728a(0x248)]&&settings['telegramEvents']!=_0x22728a(0x2ca))tgBot[_0x22728a(0x285)](settings['telegramChatId'],_0x22728a(0x243)+_0x55ee20)['catch'](_0x1daff4=>{telegramError(_0x1daff4);});}function getServerTime(){const _0xb48f7=_0x261112,_0x1d656e=new Date();return _0x1d656e[_0xb48f7(0x259)]()+'/'+(_0x1d656e[_0xb48f7(0x237)]()+0x1)['toString']()[_0xb48f7(0x23f)](0x2,'0')+'/'+_0x1d656e[_0xb48f7(0x20f)]()['toString']()[_0xb48f7(0x23f)](0x2,'0')+'\x20'+_0x1d656e['getHours']()[_0xb48f7(0x2c0)]()[_0xb48f7(0x23f)](0x2,'0')+':'+_0x1d656e[_0xb48f7(0x2c5)]()[_0xb48f7(0x2c0)]()[_0xb48f7(0x23f)](0x2,'0')+':'+_0x1d656e[_0xb48f7(0x297)]()[_0xb48f7(0x2c0)]()[_0xb48f7(0x23f)](0x2,'0');}function getTimeStamp(){const _0x42af71=_0x261112,_0x21b359=shiftedTime();return _0x21b359[_0x42af71(0x259)]()+'/'+(_0x21b359[_0x42af71(0x237)]()+0x1)[_0x42af71(0x2c0)]()['padStart'](0x2,'0')+'/'+_0x21b359[_0x42af71(0x20f)]()[_0x42af71(0x2c0)]()[_0x42af71(0x23f)](0x2,'0')+'\x20'+_0x21b359[_0x42af71(0x31c)]()['toString']()[_0x42af71(0x23f)](0x2,'0')+':'+_0x21b359['getMinutes']()[_0x42af71(0x2c0)]()[_0x42af71(0x23f)](0x2,'0')+':'+_0x21b359[_0x42af71(0x297)]()['toString']()[_0x42af71(0x23f)](0x2,'0');}function shiftedTime(){const _0x424c48=_0x261112,_0x48fa42=new Date();let _0x3429d9=_0x48fa42;if(settings['timeshift']&&settings[_0x424c48(0x2b9)]!==0x0)_0x3429d9=fns[_0x424c48(0x215)](_0x48fa42,{'hours':settings[_0x424c48(0x2b9)]});return _0x3429d9;}function startScheduler(){const _0x5e676c=_0x261112;let _0x928dd7=new Date()[_0x5e676c(0x2a9)]();_0x928dd7==0x1&&backupConfigFiles();_0x928dd7==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1d84d7=_0x261112;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x1d84d7(0x24a)](_0x508aa6=>{const _0x3c6fa9=_0x1d84d7;if(!_0x508aa6[_0x3c6fa9(0x2a3)]())fs[_0x3c6fa9(0x281)](configpath+_0x508aa6[_0x3c6fa9(0x2f8)],configbackuppath+_0x508aa6[_0x3c6fa9(0x2f8)]);});}function triggerAnalytics(){const _0x543dff=_0x261112;analytics[_0x543dff(0x229)]({'title':_0x543dff(0x21b),'href':_0x543dff(0x299),'path':'/v'+serverversion});}function validateCredentials(_0x2129e7){const _0x1fea03=_0x261112;if(_0x2129e7[_0x1fea03(0x250)]==settings[_0x1fea03(0x20a)]&&bcrypt[_0x1fea03(0x1f3)](_0x2129e7[_0x1fea03(0x2c7)],settings['bbPassword'])){if(settings[_0x1fea03(0x2de)])return{'allow':![],'reason':_0x1fea03(0x25f),'token':null};else{const _0x2fb29e=generateLoginToken();return{'allow':!![],'reason':_0x1fea03(0x273),'token':_0x2fb29e};}}else return{'allow':![],'reason':_0x1fea03(0x209),'token':null};}function refreshToken(){const _0x53bb8f=_0x261112,_0x3e03c9=generateLoginToken();return{'allow':!![],'reason':_0x53bb8f(0x273),'token':_0x3e03c9};}function validateAccess(_0x3baa88){const _0x2c6507=_0x261112;let _0x1076d0;const _0x307a26=_0x2e7ede=>{const _0xeddfea=_0x6eb6;if(settings[_0xeddfea(0x318)]){if(settings[_0xeddfea(0x2de)]){if(telegram2FaApproved()){const _0xddfa8f=generateLoginToken();return{'allow':!![],'reason':_0xeddfea(0x28b),'token':_0xddfa8f};}else return{'allow':![],'reason':'2FA\x20login\x20required','token':null};}else return _0x1076d0=validToken(_0x2e7ede),_0x1076d0['hasOwnProperty'](_0xeddfea(0x329))?{'allow':!![],'reason':_0xeddfea(0x294),'token':_0x2e7ede}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xeddfea(0x303),'token':null};};if(settings[_0x2c6507(0x26d)]){let _0x2781e9=[...settings[_0x2c6507(0x306)],_0x2c6507(0x2d9),_0x2c6507(0x202),'127.0.0.1'];if(_0x2781e9[_0x2c6507(0x21c)](externalip))return _0x307a26(_0x3baa88);else{_0x1076d0=validToken(_0x3baa88);if(_0x1076d0[_0x2c6507(0x1f4)]('success'))return _0x307a26(_0x3baa88);else{if(telegramIpApproved()){const _0x514f1f=generateToken();return _0x1076d0=_0x307a26(_0x3baa88),_0x1076d0[_0x2c6507(0x260)]?{'allow':!![],'reason':_0x2c6507(0x2f0),'token':_0x514f1f}:_0x1076d0;}else return settings[_0x2c6507(0x300)]?{'allow':![],'reason':_0x2c6507(0x26e),'token':null}:{'allow':![],'reason':_0x2c6507(0x323),'token':null};}}}else return _0x307a26(_0x3baa88);}function timelyDecrypt(_0x18ff0b,_0x2d0e4a=!![]){const _0x29ab05=_0x261112;if(_0x18ff0b)try{const _0x4729ef=crypt[_0x29ab05(0x28a)](secure[_0x29ab05(0x1fe)],_0x18ff0b)[_0x29ab05(0x2d6)],_0x229641=_0x4729ef[_0x29ab05(0x21e)]('@')[0x0],_0x572abe=_0x4729ef['split']('@')[0x1],_0x56c693=new Date()['getTime']();if(_0x2d0e4a){if(_0x56c693-_0x572abe<maxSecretAge*0x3e8)return _0x229641;else return![];}else return _0x229641;}catch{return![];}else return![];}const validToken=_0x4404c5=>{const _0x4d72c1=_0x261112;if(!_0x4404c5)return{'error':_0x4d72c1(0x2e6)};for(let _0x32513d of blacklist){if(_0x32513d[_0x4d72c1(0x22f)]==_0x4404c5)return{'error':'Token\x20blacklisted'};}let _0x3a7695;try{_0x3a7695=jwt[_0x4d72c1(0x20d)](_0x4404c5,secure['secret']+uuid);}catch{return{'error':_0x4d72c1(0x272)};}if(!_0x3a7695[_0x4d72c1(0x1f4)](_0x4d72c1(0x2fe))&&!_0x3a7695[_0x4d72c1(0x1f4)](_0x4d72c1(0x250))||!_0x3a7695['hasOwnProperty'](_0x4d72c1(0x317)))return{'error':_0x4d72c1(0x26c)};if(!_0x3a7695[_0x4d72c1(0x1f4)]('username')&&_0x3a7695[_0x4d72c1(0x1f4)](_0x4d72c1(0x2fe))){const {clientip:_0x7fd61a}=_0x3a7695;return externalip==_0x7fd61a?{'success':_0x4d72c1(0x2b6)}:{'error':_0x4d72c1(0x1f2)};}else{if(_0x3a7695[_0x4d72c1(0x1f4)]('username')&&_0x3a7695[_0x4d72c1(0x1f4)](_0x4d72c1(0x2fe))){const {username:_0x32feca,clientip:_0x3f777a}=_0x3a7695;return settings['bbUsername']==_0x32feca&&externalip==_0x3f777a?{'success':_0x4d72c1(0x2b6)}:{'error':_0x4d72c1(0x249)};}}},generateLoginToken=()=>{const _0x1e071b=_0x261112;if(uuid)return jwt[_0x1e071b(0x207)]({'username':settings[_0x1e071b(0x20a)],'clientip':externalip},secure['secret']+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{if(uuid)return jwt['sign']({'clientip':externalip},secure['secret']+uuid,{'expiresIn':telegramIpApproval['expiry']*0x3c});else return![];},telegramIpApproved=()=>{const _0x1f167f=_0x261112;let _0x406e5f=![];return telegramIpApproval&&telegramIpApproval[_0x1f167f(0x2f6)]!=_0x1f167f(0x32d)&&(_0x406e5f=telegramIpApproval['clientip']==externalip&&new Date()[_0x1f167f(0x291)]()-telegramIpApproval['timestamp']<telegramIpApproval[_0x1f167f(0x2f6)]*0x3c*0x3e8),_0x406e5f;},telegram2FaApproved=()=>{const _0x50fc3b=_0x261112;let _0x5eab63=![];return telegram2FaApproval&&telegram2FaApproval[_0x50fc3b(0x2f6)]!=_0x50fc3b(0x32d)&&(_0x5eab63=telegram2FaApproval[_0x50fc3b(0x2fe)]==externalip&&new Date()[_0x50fc3b(0x291)]()-telegram2FaApproval[_0x50fc3b(0x245)]<telegram2FaApproval[_0x50fc3b(0x2f6)]*0x3c*0x3e8),_0x5eab63;},normalizeIP=_0x41a08a=>{const _0x32ab62=_0x261112;let _0x562f84=null,_0x4f5b7b=null;if(ipaddr[_0x32ab62(0x22d)](_0x41a08a)){const _0x40a30c=ipaddr[_0x32ab62(0x22b)](_0x41a08a);_0x40a30c[_0x32ab62(0x25d)]()===_0x32ab62(0x2e8)?(_0x40a30c[_0x32ab62(0x2a8)]()&&(_0x562f84=_0x40a30c['toIPv4Address']()[_0x32ab62(0x2c0)]()),_0x4f5b7b=_0x40a30c['toString']()):(_0x562f84=_0x40a30c['toString'](),_0x4f5b7b=_0x40a30c[_0x32ab62(0x22c)]()[_0x32ab62(0x2c0)]());}return{'show':_0x562f84?_0x562f84:_0x4f5b7b,'store':_0x4f5b7b};};