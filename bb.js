const _0x13baf0=_0x5cce;(function(_0x1e78d0,_0x2d6425){const _0x3c4def=_0x5cce,_0x2d8766=_0x1e78d0();while(!![]){try{const _0x2530cd=-parseInt(_0x3c4def(0x21f))/0x1*(-parseInt(_0x3c4def(0x16e))/0x2)+-parseInt(_0x3c4def(0x1d2))/0x3+-parseInt(_0x3c4def(0x16b))/0x4+-parseInt(_0x3c4def(0x17c))/0x5+-parseInt(_0x3c4def(0x13f))/0x6*(parseInt(_0x3c4def(0x11b))/0x7)+parseInt(_0x3c4def(0x1f6))/0x8+parseInt(_0x3c4def(0x1f3))/0x9*(parseInt(_0x3c4def(0x159))/0xa);if(_0x2530cd===_0x2d6425)break;else _0x2d8766['push'](_0x2d8766['shift']());}catch(_0x51a309){_0x2d8766['push'](_0x2d8766['shift']());}}}(_0x4a4d,0x7158f));const _0x24f5fd=function(){let _0xfb96ab=!![];return function(_0x21128a,_0x20d21e){const _0x4cc538=_0xfb96ab?function(){const _0x2c349a=_0x5cce;if(_0x20d21e){const _0x5ddc34=_0x20d21e[_0x2c349a(0x17e)](_0x21128a,arguments);return _0x20d21e=null,_0x5ddc34;}}:function(){};return _0xfb96ab=![],_0x4cc538;};}(),_0x3b5aa1=_0x24f5fd(this,function(){const _0x3c837b=_0x5cce;return _0x3b5aa1[_0x3c837b(0x1d9)]()[_0x3c837b(0x228)](_0x3c837b(0x12f))[_0x3c837b(0x1d9)]()[_0x3c837b(0x202)](_0x3b5aa1)[_0x3c837b(0x228)](_0x3c837b(0x12f));});_0x3b5aa1();'use strict';process['env'][_0x13baf0(0x221)]=0x1;const childProcess=require(_0x13baf0(0x1df)),FileSync=require(_0x13baf0(0x20e)),fs=require('fs'),fns=require(_0x13baf0(0x1c6)),low=require(_0x13baf0(0x151)),path=require('path'),crypto=require(_0x13baf0(0x1d4)),Crypt=require(_0x13baf0(0x1b6))[_0x13baf0(0x18b)],RSA=require('hybrid-crypto-js')[_0x13baf0(0x154)],bcrypt=require(_0x13baf0(0x13a)),jwt=require('jsonwebtoken'),analyticsLib=require('analytics')['default'],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x13baf0(0x1f8));let bbpath=_0x13baf0(0x1c8);const botfile=_0x13baf0(0x233),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x13baf0(0x232);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const configpath=bbpath+_0x13baf0(0x127);!fs[_0x13baf0(0x17d)](configpath)&&fs[_0x13baf0(0x11a)](configpath);function _0x4a4d(){const _0x7e8a5a=['reject','all','push','delete-bot','343857SZGMsy','enabled\x20Bot\x20','crypto','node-telegram-bot-api','/:bot','headers','args','toString','Invalid\x20authentication\x20token\x20(2)','status','add','telegramEvents','telegramEnabled','child_process','assign','verify','encryptedUuid','stopPolling','callback_query','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','getDate','error\x20while\x20deleting\x20log\x20files:\x20','handshake','Access\x20enabled\x20for\x20','Invalid\x20authentication\x20token\x20(1)','showname','-performance.json','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','temporary\x20token\x20generated','\x20|\x20','bbUsername','-----------------------------------------------------------------------------------','User\x20has\x20been\x20validated','414vSAkCl','getFullYear','find','5954344HMhSLG','Bot\x20Mgr\x20>\x20','ipaddr.js','connection','loginRequired','storeConfiguration','get','Unauthorized\x20attempt\x20to\x20store\x20configuration','new-disabled','fork','Balance\x20Bot','compareSync','constructor','remove','getHours','defaults','1000','30\x20min','get-portfolio','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','kill','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','f2aRequired','lowdb/adapters/FileSync','reason','version.json','/:bot/configuration','5\x20min','use','\x20only\x0a','/:bot/performance','type','Notifications\x20enabled','generateKeyPairAsync','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','expiry','timeshift','yes','hex','match','2VNKBsU','join','NTBA_FIX_319','/:bot/coins','invalid\x20credentials','<b>Telegram\x20bot\x20status:</b>\x0a','login','disabled','index.html','search','write','entries','2FA\x20required','telegramUsername','clientip','blacklist','restarting\x20Bot\x20','ipv6','max','bb-secure.json','bot.js','botname','::1','::ffff:127.0.0.1','exp','socket.io','Notifications\x20disabled','map','2FA','removeAllListeners','idling\x20bot\x20\x20\x20|\x20Bot\x20','cloneDeep','value','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','auth','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Invalid\x20username\x20or\x20IP\x20address','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','publicKey','starting\x20bot\x20|\x20Bot\x20','mkdirSync','406399gURkVM','forEach','log','Notifications\x20enabled\x0a','bots','restart','isIPv4MappedAddress','createServer','exit','referer','parse','hasOwnProperty','config/','Unauthorized\x20attempt\x20to\x20delete\x20bot','All','padStart','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','deleted\x20Bot\x20','polling_error','login\x20token\x20generated','(((.+)+)+)+$','placeOrder','success','build','conn','bbPassword','404\x20Not\x20Found','update-bot','temporary\x20access\x20not\x20allowed','onText','send','bcryptjs','UA-192771731-1','<b>Balance\x20Bot\x20status:</b>\x0a','Balance\x20Bot\x20Server','/off\x20-\x20stop\x20bot(s)\x0a','90TfQLCF','privateKey','version','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20get\x20logs','error','inherit','getTime','2FA\x20login\x20token\x20generated','static','password','Invalid\x20IP\x20address','getMonth','started','enabled','from','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Login\x20accepted','lowdb','Bot\x20','store-headless','RSA','message','toIPv4Address','settings.','access\x20timeout','301090HQxomk','sendFile','Unauthorized\x20attempt\x20logging\x20in\x20(timeout)','event','alerts','data','answerCallbackQuery','disabled\x20Bot\x20','HTML','sha256','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','telegramToken','secure','************','sortBy','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Ok,\x20will\x20send\x20order\x20notifications\x20only','350364EknJYO','username','listen','91812nasKrd','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','login\x20required','bot-','emit','allow','stopped','token','length','randomBytes','sendMessage','Password\x20has\x20been\x20reset\x20to:\x20','function','chat','3418915cSjwEN','existsSync','apply','sign','</b>\x20?','starting','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Invalid\x20Telegram\x20token','127.0.0.1','getSeconds','store-configuration','ipc','No\x20bots\x20running\x20right\x20now','filter','Crypt','live','order','You\x20can\x20use\x20the\x20following\x20commands:\x0a','initclient','removeListener','getMinutes','\x20>\x20','/on\x20-\x20start\x20bot(s)\x0a','stop','logout','Unauthorized\x20attempt\x20to\x20log\x20out','whitelist','build2','/:bot/support','reload','botmanager','disconnect','once','express','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','keys','decrypt','timestamp','store-settings','settings','telegramChatId','Notifications\x20types:\x20','https://hodlerhacks.com','login\x20not\x20required','accept','All\x20bots\x20running\x20right\x20now','unlinkSync','SIGTERM','remoteAddress','set','telegram','reset-password','starting\x20new\x20bot\x20|\x20Bot\x20','running','catch','emitHistory','2FA\x20login\x20required','hybrid-crypto-js','Password\x20reset\x20rejected','then','show','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','place-order','logged\x20out','Alerts','All\x20bots','Token\x20blacklisted','botID','new','store','Orders','add-bot','orders','date-fns','secret','bb/','whitelistEnabled','get-starting-balances','storeHeadless','split','-events.json'];_0x4a4d=function(){return _0x7e8a5a;};return _0x4a4d();}const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x13baf0(0x205)]({'bots':[]})[_0x13baf0(0x229)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x13baf0(0x205)]({'settings':{'timeshift':0x0}})[_0x13baf0(0x229)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x13baf0(0x205)]({'secure':{},'blacklist':[]})[_0x13baf0(0x229)]();let crypt=new Crypt({'md':_0x13baf0(0x162),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[],socket=[],serverStatus=[];const serverversion=require('./'+bbpath+_0x13baf0(0x210))[_0x13baf0(0x141)],maxSecretAge=0xa,loginExpiry=0x3c,tokenRefresh=0x5;let lastIpApproval,telegramIpApproval,telegram2FaApproval,accessControl,token,uuid,externalip,pidExpireLogin,pidRefreshToken,pidAnalytics;oneTimeMigration(),cleanBlacklist();const PORT=0xbb8,express=require(_0x13baf0(0x19e)),app=express(),http=require('http')[_0x13baf0(0x122)](app);app[_0x13baf0(0x213)](express['static'](path[_0x13baf0(0x220)](__dirname,bbpath,_0x13baf0(0x198)))),app[_0x13baf0(0x213)](express[_0x13baf0(0x148)](path[_0x13baf0(0x220)](__dirname,bbpath,_0x13baf0(0x132)))),app['get']('/',function(_0x249660,_0x15ae4e){const _0x267165=_0x13baf0;_0x15ae4e[_0x267165(0x15a)](path['join'](__dirname,bbpath,'build2',_0x267165(0x227)));}),app[_0x13baf0(0x1fc)](_0x13baf0(0x1d6),function(_0x3dde83,_0x3f223c){const _0x2a99d1=_0x13baf0;_0x3f223c[_0x2a99d1(0x15a)](path['join'](__dirname,bbpath,_0x2a99d1(0x132),_0x2a99d1(0x227)));}),app[_0x13baf0(0x1fc)]('/:bot/portfolio',(_0x470fb3,_0x4bfe02)=>{const _0x22ee42=_0x13baf0;_0x4bfe02['sendFile'](path['join'](__dirname,bbpath,_0x22ee42(0x132),'index.html'));}),app[_0x13baf0(0x1fc)](_0x13baf0(0x215),(_0x2579ab,_0x5e6798)=>{const _0x77ed36=_0x13baf0;_0x5e6798[_0x77ed36(0x15a)](path['join'](__dirname,bbpath,_0x77ed36(0x132),_0x77ed36(0x227)));}),app[_0x13baf0(0x1fc)](_0x13baf0(0x222),(_0x5df09f,_0x31c09d)=>{const _0x24d4a7=_0x13baf0;_0x31c09d[_0x24d4a7(0x15a)](path[_0x24d4a7(0x220)](__dirname,bbpath,_0x24d4a7(0x132),_0x24d4a7(0x227)));}),app[_0x13baf0(0x1fc)]('/:bot/history',(_0x3a1373,_0x486f50)=>{const _0x357744=_0x13baf0;_0x486f50[_0x357744(0x15a)](path[_0x357744(0x220)](__dirname,bbpath,'build',_0x357744(0x227)));}),app[_0x13baf0(0x1fc)](_0x13baf0(0x211),(_0x420d67,_0x3c1f84)=>{const _0x176027=_0x13baf0;_0x3c1f84['sendFile'](path[_0x176027(0x220)](__dirname,bbpath,'build',_0x176027(0x227)));}),app[_0x13baf0(0x1fc)](_0x13baf0(0x199),(_0xe58113,_0x2f5ef9)=>{const _0x711019=_0x13baf0;_0x2f5ef9[_0x711019(0x15a)](path[_0x711019(0x220)](__dirname,bbpath,_0x711019(0x132),_0x711019(0x227)));}),http[_0x13baf0(0x16d)](PORT);const analytics=analyticsLib({'app':_0x13baf0(0x200),'plugins':[googleAnalytics({'trackingId':_0x13baf0(0x13b)})]}),TelegramBot=require(_0x13baf0(0x1d5));let tgBot;if(settings['telegramToken']&&settings[_0x13baf0(0x164)]!=''&&settings['telegramUsername']&&settings[_0x13baf0(0x22c)]!='')initTelegram();initStates(),startServer(),startSocket(),startAnalytics();function startServer(){const _0x2eac81=_0x13baf0;console[_0x2eac81(0x11d)](''),console[_0x2eac81(0x11d)](_0x2eac81(0x1f1)),logging(_0x2eac81(0x14f)+PORT),console[_0x2eac81(0x11d)](_0x2eac81(0x1f1));if(config[_0x2eac81(0x176)]!=0x0)config[_0x2eac81(0x11c)](_0x1c3efa=>{const _0xc52776=_0x2eac81;if(_0x1c3efa[_0xc52776(0x1db)]=='enabled'||_0x1c3efa[_0xc52776(0x1db)]==_0xc52776(0x1c1))logging(_0xc52776(0x119)+_0x1c3efa[_0xc52776(0x1c0)]+_0xc52776(0x1ef)+_0x1c3efa[_0xc52776(0x234)]),startBot([_0x1c3efa[_0xc52776(0x1c0)]],{'cwd':bbpath},function(_0xffb556){if(_0xffb556)logging(_0xffb556);});else(_0x1c3efa[_0xc52776(0x1db)]==_0xc52776(0x226)||_0x1c3efa[_0xc52776(0x1db)]==_0xc52776(0x1fe))&&logging(_0xc52776(0x23d)+_0x1c3efa[_0xc52776(0x1c0)]+_0xc52776(0x1ef)+_0x1c3efa[_0xc52776(0x234)]);});else!newBot&&console['log'](_0x2eac81(0x19f));if(newBot)addBot();console[_0x2eac81(0x11d)](_0x2eac81(0x1f1)),console[_0x2eac81(0x11d)]('');}function startSocket(){const _0x2995ce=_0x13baf0,_0xe9b3e3=require(_0x2995ce(0x238))(http,{});_0xe9b3e3['on'](_0x2995ce(0x1f9),_0x52b9a3=>{const _0x32f56f=_0x2995ce;let _0x10a16f,_0x5dc1a6,_0x26831d;const _0x24f101=_0x52b9a3[_0x32f56f(0x1e8)][_0x32f56f(0x1d7)][_0x32f56f(0x124)],_0x2fecf2=_0x52b9a3['handshake'][_0x32f56f(0x241)]['encryptedUuid'];if(!_0x2fecf2)_0x52b9a3[_0x32f56f(0x172)]('status',{'publicKey':secure['publicKey']});else{uuid=timelyDecrypt(_0x52b9a3[_0x32f56f(0x1e8)][_0x32f56f(0x241)][_0x32f56f(0x1e2)],![]),_0x5dc1a6=_0x24f101[_0x32f56f(0x21e)](/bot[0-9]{3}/);if(_0x5dc1a6)_0x26831d=_0x5dc1a6[0x0]['match'](/[0-9]{3}/);if(_0x26831d)_0x10a16f=_0x26831d[0x0];else _0x10a16f=_0x32f56f(0x19b);if(socket[_0x10a16f])socket[_0x10a16f][_0x32f56f(0x19c)](!![]);socket[_0x10a16f]=_0x52b9a3,setAccess(_0x10a16f);if(accessControl[_0x32f56f(0x173)]){if(_0x10a16f==_0x32f56f(0x19b))initializeSocketBotManager();else initializeSocketBot(_0x10a16f);}if(!serverStatus[_0x10a16f])serverStatus[_0x10a16f]='connected';socket[_0x10a16f]['on'](_0x32f56f(0x225),_0x4c2d8=>{const _0x5ccb0f=_0x32f56f,_0x18a794=timelyDecrypt(_0x4c2d8[_0x5ccb0f(0x149)]);if(_0x18a794){_0x4c2d8={'username':_0x4c2d8[_0x5ccb0f(0x16c)],'password':_0x18a794};let _0x470fb5=validateCredentials(_0x4c2d8);if(_0x470fb5[_0x5ccb0f(0x173)]==![]&&_0x470fb5[_0x5ccb0f(0x20f)]==_0x5ccb0f(0x1b5))socket[_0x10a16f][_0x5ccb0f(0x172)](_0x5ccb0f(0x1db),{'access':_0x470fb5}),loginAccess2FA(externalip);else{if(_0x470fb5['allow']==![]&&_0x470fb5[_0x5ccb0f(0x20f)]==_0x5ccb0f(0x223))socket[_0x10a16f][_0x5ccb0f(0x172)](_0x5ccb0f(0x1db),{'access':_0x470fb5});else{if(_0x470fb5[_0x5ccb0f(0x173)]&&_0x470fb5[_0x5ccb0f(0x20f)]==_0x5ccb0f(0x12e)){token=_0x470fb5[_0x5ccb0f(0x175)];for(let _0x572020 in socket){if(_0x572020=='botmanager')initializeSocketBotManager();else initializeSocketBot(_0x572020);socket[_0x572020]['emit'](_0x5ccb0f(0x1db),{'status':serverStatus[_0x572020]||_0x5ccb0f(0x181),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x470fb5,'externalip':externalip,'publicKey':secure[_0x5ccb0f(0x118)],'loginNow':![]});}setTokenRefresh(),setSessionTimeout(_0x5ccb0f(0x225));}}}}else logging(_0x5ccb0f(0x15b));}),socket[_0x10a16f]['on'](_0x32f56f(0x1b0),()=>{resetPassword();}),socket[_0x10a16f]['on'](_0x32f56f(0x19c),_0x19fb07=>{let _0x1732e7=[];for(let _0x4fc3db in socket){if(_0x4fc3db!=_0x10a16f)_0x1732e7[_0x4fc3db]=socket[_0x4fc3db];}socket=_0x1732e7;});if(_0x10a16f!=_0x32f56f(0x19b)&&config['apiKey']!=''){if(pid[_0x10a16f])pid[_0x10a16f][_0x32f56f(0x139)]({'function':_0x32f56f(0x18f),'args':null});}}});}function setAccess(_0x31a2c9){const _0xee5356=_0x13baf0;externalip=normalizeIP(socket[_0x31a2c9][_0xee5356(0x133)][_0xee5356(0x1ad)])[_0xee5356(0x1c2)],accessControl=validateAccess(token),accessControl[_0xee5356(0x175)]&&accessControl[_0xee5356(0x20f)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0xee5356(0x23b)),accessControl[_0xee5356(0x175)]&&accessControl[_0xee5356(0x20f)]==_0xee5356(0x147)&&setSessionTimeout('login'),socket[_0x31a2c9][_0xee5356(0x172)]('status',{'status':serverStatus[_0x31a2c9]||_0xee5356(0x181),'serverversion':serverversion,'servertime':getServerTime(),'access':accessControl,'externalip':externalip,'publicKey':secure[_0xee5356(0x118)],'loginNow':accessControl[_0xee5356(0x20f)]==_0xee5356(0x170)||accessControl['reason']==_0xee5356(0x1b5)}),accessControl['allow']==![]&&accessControl[_0xee5356(0x20f)]==_0xee5356(0x22b)&&temporaryAccess2FA(externalip);}function setSessionTimeout(_0x4eb4e5){const _0xbebbc8=_0x13baf0;let _0x23d428;if(_0x4eb4e5==_0xbebbc8(0x225))_0x23d428=loginExpiry*0x3c*0x3e8;else _0x23d428=telegramIpApproval[_0xbebbc8(0x21a)]*0x3c*0x3e8-(new Date()[_0xbebbc8(0x146)]()-telegramIpApproval[_0xbebbc8(0x1a2)]);if(pidExpireLogin)clearTimeout(pidExpireLogin);pidExpireLogin=setTimeout(()=>{const _0x37f135=_0xbebbc8;if(pidRefreshToken)clearTimeout(pidRefreshToken);addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null;let _0x56a7cf=validateAccess(token);if(!(_0x56a7cf[_0x37f135(0x173)]&&_0x56a7cf['reason']=='login\x20not\x20required'))for(let _0x2d0e9b in socket){socket[_0x2d0e9b][_0x37f135(0x172)](_0x37f135(0x1db),{'access':{'allow':![],'reason':_0x37f135(0x158),'token':null}});}token=null;},_0x23d428);}function setTokenRefresh(){if(pidRefreshToken)clearTimeout(pidRefreshToken);pidRefreshToken=setTimeout(()=>{const _0xe95eb7=_0x5cce;let _0x4d8f35=refreshToken();for(let _0x4b86b2 in socket){socket[_0x4b86b2][_0xe95eb7(0x172)](_0xe95eb7(0x1db),{'status':serverStatus[_0x4b86b2]||_0xe95eb7(0x181),'serverversion':serverversion,'servertime':getServerTime(),'access':_0x4d8f35,'externalip':externalip,'publicKey':secure[_0xe95eb7(0x118)],'loginNow':![]});}setTokenRefresh();},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(){const _0xf71337=_0x13baf0;socket['botmanager'][_0xf71337(0x172)](_0xf71337(0x11f),config),socket[_0xf71337(0x19b)][_0xf71337(0x172)](_0xf71337(0x1a4),cleanSettings()),socket[_0xf71337(0x19b)]['on'](_0xf71337(0x1c4),_0x3622f7=>{const _0xf74422=_0xf71337;if(validateAccess(_0x3622f7)[_0xf74422(0x173)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),socket[_0xf71337(0x19b)]['on'](_0xf71337(0x136),(_0x3d128a,_0x3a373d)=>{const _0x5d0b3c=_0xf71337;if(validateAccess(_0x3a373d)['allow'])toggleBot(_0x3d128a['botID'],_0x3d128a['status'],_0x3d128a[_0x5d0b3c(0x18c)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),socket[_0xf71337(0x19b)]['on'](_0xf71337(0x1d1),(_0x5e0c06,_0x3531c9)=>{const _0x2c62eb=_0xf71337;if(validateAccess(_0x3531c9)[_0x2c62eb(0x173)])deleteBot(_0x5e0c06);else logging(_0x2c62eb(0x128));}),socket['botmanager']['on'](_0xf71337(0x1a3),(_0x1abfd1,_0x1669ec)=>{const _0x26aee0=_0xf71337;if(validateAccess(_0x1669ec)[_0x26aee0(0x173)])storeSettings(_0x1abfd1,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),socket['botmanager']['on'](_0xf71337(0x195),_0x583f46=>{const _0x2735f2=_0xf71337;if(validateAccess(_0x583f46)[_0x2735f2(0x173)]){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x1f5bfe in socket){socket[_0x1f5bfe][_0x2735f2(0x172)](_0x2735f2(0x1db),{'access':{'allow':![],'reason':_0x2735f2(0x1bc),'token':null}});}}else logging(_0x2735f2(0x196));});}function initializeSocketBot(_0x585e86){const _0x81ea36=_0x13baf0;socket[_0x585e86]['on']('get-logs',(_0x4ccdb8,_0x5120d2)=>{const _0x1489ed=_0x5cce;if(validateAccess(_0x5120d2)[_0x1489ed(0x173)]){if(pid[_0x585e86])pid[_0x585e86]['send']({'function':_0x1489ed(0x1b4),'args':_0x4ccdb8});}else logging(_0x1489ed(0x143));}),socket[_0x585e86]['on'](_0x81ea36(0x208),(_0x2cb437,_0x3e11e9)=>{const _0x4e1359=_0x81ea36;if(validateAccess(_0x3e11e9)['allow']){if(pid[_0x585e86])pid[_0x585e86][_0x4e1359(0x139)]({'function':'getPortfolio','args':_0x2cb437});}else logging(_0x4e1359(0x117));}),socket[_0x585e86]['on'](_0x81ea36(0x187),(_0x11c070,_0x47eb2f)=>{const _0x181664=_0x81ea36;if(validateAccess(_0x47eb2f)['allow']){if(pid[_0x585e86])pid[_0x585e86][_0x181664(0x139)]({'function':_0x181664(0x1fb),'args':_0x11c070});}else logging(_0x181664(0x1fd));}),socket[_0x585e86]['on'](_0x81ea36(0x153),(_0x119d51,_0x5282bc)=>{const _0x32bfd7=_0x81ea36;if(validateAccess(_0x5282bc)[_0x32bfd7(0x173)]){if(pid[_0x585e86])pid[_0x585e86][_0x32bfd7(0x139)]({'function':_0x32bfd7(0x1cb),'args':_0x119d51});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),socket[_0x585e86]['on'](_0x81ea36(0x1ca),_0x46c603=>{const _0x28acfc=_0x81ea36;if(validateAccess(_0x46c603)[_0x28acfc(0x173)]){if(pid[_0x585e86])pid[_0x585e86][_0x28acfc(0x139)]({'function':'getStartingBalances','args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),socket[_0x585e86]['on'](_0x81ea36(0x1bb),(_0x50502c,_0x5cbb97)=>{const _0x205aa0=_0x81ea36;if(validateAccess(_0x5cbb97)[_0x205aa0(0x173)]){if(pid[_0x585e86])pid[_0x585e86][_0x205aa0(0x139)]({'function':_0x205aa0(0x130),'args':_0x50502c});}else logging(_0x205aa0(0x240));}),socket[_0x585e86]['on'](_0x81ea36(0x195),_0x4756a2=>{if(validateAccess(_0x4756a2)['allow']){if(pidRefreshToken)clearTimeout(pidRefreshToken);if(pidExpireLogin)clearTimeout(pidExpireLogin);removeSocketListeners(),addBlacklist(),telegramIpApproval=null,telegram2FaApproval=null,token=null;for(let _0x571ea3 in socket){socket[_0x571ea3]['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(){const _0x356c17=_0x13baf0;for(let _0x141fc8 in socket){socket[_0x141fc8][_0x356c17(0x23c)]();}}function cleanSettings(){const _0x2d7608=_0x13baf0;let _0x26cbf2=settings;return settings[_0x2d7608(0x164)]&&settings[_0x2d7608(0x164)]!=''&&(_0x26cbf2={..._0x26cbf2,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x26cbf2={..._0x26cbf2,'bbPassword':_0x2d7608(0x166)}),_0x26cbf2;}function startBot(_0x463553,_0xeb7e6a,_0x7bc87){const _0x152aee=_0x13baf0;let _0x3fb6c7=![];const _0x4694f9=_0x463553[0x0];_0xeb7e6a={..._0xeb7e6a,'stdio':[_0x152aee(0x145),_0x152aee(0x145),_0x152aee(0x145),_0x152aee(0x188)]},pid[_0x4694f9]=childProcess[_0x152aee(0x1ff)](botfile,_0x463553,_0xeb7e6a),pid[_0x4694f9]['on'](_0x152aee(0x155),_0x5ce3d9=>{const _0x29295c=_0x152aee;switch(Object[_0x29295c(0x1a0)](_0x5ce3d9)[0x0]){case _0x29295c(0x234):updateBotName(_0x4694f9,_0x5ce3d9['botname']);break;case _0x29295c(0x1db):updateStatus(_0x4694f9,_0x5ce3d9[_0x29295c(0x1db)]);break;case _0x29295c(0x18c):updateLive(_0x4694f9,_0x5ce3d9[_0x29295c(0x18c)]);break;case _0x29295c(0x14c):updateLive(_0x4694f9,_0x5ce3d9[_0x29295c(0x14c)]);if(socket[_0x4694f9])socket[_0x4694f9][_0x29295c(0x172)](_0x29295c(0x1db),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x29295c(0x194):_0x5ce3d9['stop']==_0x29295c(0x120)&&stopBot(_0x4694f9);_0x5ce3d9['stop']==_0x29295c(0x20b)&&toggleBot(_0x4694f9,_0x29295c(0x226),_0x29295c(0x174));break;case'telegram':sendTelegram(_0x4694f9,_0x5ce3d9[_0x29295c(0x1af)]);break;case'function':if(socket[_0x4694f9])socket[_0x4694f9][_0x29295c(0x172)](_0x5ce3d9[_0x29295c(0x17a)],_0x5ce3d9[_0x29295c(0x1d8)]);break;}}),pid[_0x4694f9]['on'](_0x152aee(0x144),function(_0x9d3de5){if(_0x3fb6c7)return;_0x3fb6c7=!![],_0x7bc87(_0x9d3de5);}),pid[_0x4694f9]['on'](_0x152aee(0x123),function(_0x54c35f){const _0x29dcbb=_0x152aee;if(_0x3fb6c7)return;_0x3fb6c7=!![],_0x7bc87(null);const _0x1b67e7=dbConfig['get'](_0x29dcbb(0x11f))[_0x29dcbb(0x1f5)]({'botID':_0x4694f9})[_0x29dcbb(0x23f)]();_0x1b67e7&&(_0x1b67e7[_0x29dcbb(0x1db)]==_0x29dcbb(0x14d)||_0x1b67e7[_0x29dcbb(0x1db)]==_0x29dcbb(0x1c1))&&(updateLive(_0x4694f9,_0x29dcbb(0x174)),logging(_0x29dcbb(0x22f)+_0x4694f9),startBot([_0x4694f9],{'cwd':bbpath},function(_0x3e0462){if(_0x3e0462)logging(_0x3e0462);}));});}function stopBot(_0x3f58c6){const _0x230c67=_0x13baf0;if(socket[_0x3f58c6])socket[_0x3f58c6][_0x230c67(0x19c)](!![]);if(pid[_0x3f58c6])pid[_0x3f58c6][_0x230c67(0x20b)]();}function addBot(){const _0x34a795=_0x13baf0;let _0x4ba9c7;for(let _0x11b275=0x1;_0x11b275<0x3e9;_0x11b275++){_0x4ba9c7=_0x11b275[_0x34a795(0x1d9)]()[_0x34a795(0x12a)](0x3,'0');let _0x12950e=config['find'](_0x206301=>_0x206301[_0x34a795(0x1c0)]==_0x4ba9c7);if(!_0x12950e)break;}if(_0x4ba9c7===_0x34a795(0x206)){logging(_0x34a795(0x209));return;}logging(_0x34a795(0x1b1)+_0x4ba9c7),dbConfig[_0x34a795(0x1fc)](_0x34a795(0x11f))[_0x34a795(0x1d0)]({'botID':_0x4ba9c7,'botname':_0x34a795(0x152)+_0x4ba9c7,'status':_0x34a795(0x1c1),'live':''})[_0x34a795(0x229)](),startBot([_0x4ba9c7],{'cwd':bbpath},function(_0x2a9cf8){if(_0x2a9cf8)logging(_0x2a9cf8);}),config=getConfiguration();if(socket[_0x34a795(0x19b)])socket['botmanager'][_0x34a795(0x172)](_0x34a795(0x11f),config);}function deleteBot(_0x3f1bf6){const _0x5560d5=_0x13baf0;if(socket[_0x3f1bf6])socket[_0x3f1bf6][_0x5560d5(0x19c)](!![]);dbConfig[_0x5560d5(0x1fc)]('bots')[_0x5560d5(0x203)]({'botID':_0x3f1bf6})['write'](),logging(_0x5560d5(0x12c)+_0x3f1bf6),stopBot(_0x3f1bf6);try{fs[_0x5560d5(0x1ab)](path['join'](configpath,_0x5560d5(0x171)+_0x3f1bf6+'-config.json')),fs[_0x5560d5(0x1ab)](path['join'](configpath,_0x5560d5(0x171)+_0x3f1bf6+_0x5560d5(0x1cd))),fs[_0x5560d5(0x1ab)](path[_0x5560d5(0x220)](configpath,_0x5560d5(0x171)+_0x3f1bf6+_0x5560d5(0x1ec))),fs[_0x5560d5(0x1ab)](path[_0x5560d5(0x220)](configpath,_0x5560d5(0x171)+_0x3f1bf6+'-results.json'));}catch(_0x3eb14f){if(_0x3eb14f)logging(_0x5560d5(0x1e7),_0x3eb14f);}config=getConfiguration();if(socket['botmanager'])socket['botmanager'][_0x5560d5(0x172)](_0x5560d5(0x11f),config);}function toggleBot(_0x41cbb3,_0x189840,_0x43b4a4){const _0x53c04f=_0x13baf0;dbConfig['get'](_0x53c04f(0x11f))[_0x53c04f(0x1f5)]({'botID':_0x41cbb3})[_0x53c04f(0x1e0)]({'status':_0x189840})[_0x53c04f(0x1e0)]({'live':_0x43b4a4})[_0x53c04f(0x229)]();if(_0x189840==_0x53c04f(0x14d)||_0x189840==_0x53c04f(0x1c1))logging(_0x53c04f(0x1d3)+_0x41cbb3),startBot([_0x41cbb3],{'cwd':bbpath},function(_0x909b05){if(_0x909b05)logging(_0x909b05);});else(_0x189840==_0x53c04f(0x226)||_0x189840==_0x53c04f(0x1fe))&&(logging(_0x53c04f(0x160)+_0x41cbb3),stopBot(_0x41cbb3));config=getConfiguration();if(socket['botmanager'])socket[_0x53c04f(0x19b)][_0x53c04f(0x172)](_0x53c04f(0x11f),config);}function toggleStatus(_0x12048c){const _0x2479d2=_0x13baf0;let _0x11d414=dbConfig[_0x2479d2(0x1fc)](_0x2479d2(0x11f))[_0x2479d2(0x1f5)]({'botID':_0x12048c})[_0x2479d2(0x23f)](),_0x2faf4d;if(_0x11d414[_0x2479d2(0x1db)]===_0x2479d2(0x14d))_0x2faf4d=_0x2479d2(0x226);else{if(_0x11d414[_0x2479d2(0x1db)]===_0x2479d2(0x1c1))_0x2faf4d='new-disabled';else{if(_0x11d414[_0x2479d2(0x1db)]===_0x2479d2(0x1fe))_0x2faf4d=_0x2479d2(0x1c1);else{if(_0x11d414[_0x2479d2(0x1db)]===_0x2479d2(0x226))_0x2faf4d='enabled';}}}return _0x2faf4d;}function updateStatus(_0x18025d,_0x180c3f){const _0x51fff5=_0x13baf0;dbConfig[_0x51fff5(0x1fc)](_0x51fff5(0x11f))[_0x51fff5(0x1f5)]({'botID':_0x18025d})[_0x51fff5(0x1e0)]({'status':_0x180c3f})[_0x51fff5(0x229)](),config=getConfiguration();if(socket[_0x51fff5(0x19b)])socket[_0x51fff5(0x19b)][_0x51fff5(0x172)](_0x51fff5(0x11f),config);}function updateLive(_0x46f9d1,_0x59e1ea){const _0x3d1a91=_0x13baf0;dbConfig[_0x3d1a91(0x1fc)](_0x3d1a91(0x11f))[_0x3d1a91(0x1f5)]({'botID':_0x46f9d1})[_0x3d1a91(0x1e0)]({'live':_0x59e1ea})[_0x3d1a91(0x229)](),config=getConfiguration();if(socket['botmanager'])socket[_0x3d1a91(0x19b)][_0x3d1a91(0x172)](_0x3d1a91(0x11f),config);}function updateBotName(_0x286dc0,_0x561433){const _0x5f5dab=_0x13baf0;dbConfig[_0x5f5dab(0x1fc)]('bots')[_0x5f5dab(0x1f5)]({'botID':_0x286dc0})[_0x5f5dab(0x1e0)]({'botname':_0x561433})['write'](),config=getConfiguration();if(socket[_0x5f5dab(0x19b)])socket[_0x5f5dab(0x19b)][_0x5f5dab(0x172)]('bots',config);}function telegramError(_0x28c7b7){const _0x5fcfe3=_0x13baf0;console[_0x5fcfe3(0x11d)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x2d3a03){const _0x4d166e=_0x13baf0;if(_0x2d3a03[_0x4d166e(0x14e)][_0x4d166e(0x16c)]!=settings['telegramUsername']&&'@'+_0x2d3a03['from'][_0x4d166e(0x16c)]!=settings[_0x4d166e(0x22c)])return tgBot[_0x4d166e(0x178)](_0x2d3a03[_0x4d166e(0x17b)]['id'],_0x4d166e(0x183),{'parse_mode':'HTML'})[_0x4d166e(0x1b3)](_0x3e6051=>{telegramError(_0x3e6051);}),![];return!![];}async function initTelegram(){const _0x30ee08=_0x13baf0;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x30ee08(0x164)],{'polling':!![]});let _0x2979ce=_0x30ee08(0x18e);_0x2979ce+='\x0a',_0x2979ce+='/enable\x20-\x20enable\x20notifications\x0a',_0x2979ce+=_0x30ee08(0x116),_0x2979ce+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2979ce+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2979ce+=_0x30ee08(0x193),_0x2979ce+=_0x30ee08(0x13e),_0x2979ce+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x2979ce+='/help\x20-\x20show\x20avaiable\x20commands\x0a';let _0x59093b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x59093b+='\x0a',_0x59093b+=_0x2979ce,tgBot['onText'](/\/start/,_0x3c3a0c=>{const _0x349b11=_0x30ee08;if(!validateTelegram(_0x3c3a0c))return;if(settings['telegramChatId']!=_0x3c3a0c[_0x349b11(0x17b)]['id'])updateSetting(_0x349b11(0x1a5),_0x3c3a0c[_0x349b11(0x17b)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x349b11(0x178)](_0x3c3a0c[_0x349b11(0x17b)]['id'],_0x59093b)[_0x349b11(0x1b3)](_0xd96aef=>{telegramError(_0xd96aef);});}),tgBot[_0x30ee08(0x138)](/\/enable/,_0x36a82c=>{const _0x3f289b=_0x30ee08;if(!validateTelegram(_0x36a82c))return;if(settings[_0x3f289b(0x1a5)]!=_0x36a82c[_0x3f289b(0x17b)]['id'])updateSetting(_0x3f289b(0x1a5),_0x36a82c[_0x3f289b(0x17b)]['id']);updateSetting(_0x3f289b(0x1de),!![]),tgBot[_0x3f289b(0x178)](_0x36a82c['chat']['id'],_0x3f289b(0x217))[_0x3f289b(0x1b3)](_0x465af5=>{telegramError(_0x465af5);});}),tgBot[_0x30ee08(0x138)](/\/config/,async _0x1956fc=>{const _0x2fadab=_0x30ee08;if(!validateTelegram(_0x1956fc))return;tgBot['removeListener'](_0x2fadab(0x1e4)),tgBot[_0x2fadab(0x178)](_0x1956fc[_0x2fadab(0x17b)]['id'],_0x2fadab(0x20a),{'reply_markup':{'inline_keyboard':[[{'text':_0x2fadab(0x1c3),'callback_data':_0x2fadab(0x1c5)},{'text':_0x2fadab(0x1bd),'callback_data':_0x2fadab(0x15d)},{'text':_0x2fadab(0x129),'callback_data':_0x2fadab(0x1cf)}]]}})['catch'](_0x4336df=>{telegramError(_0x4336df);}),tgBot['on'](_0x2fadab(0x1e4),async _0x5ee283=>{const _0x868f49=_0x2fadab,_0x473291=_0x5ee283['data'],_0x45bae6=_0x5ee283[_0x868f49(0x155)];tgBot[_0x868f49(0x15f)](_0x5ee283['id'])['then'](async()=>{const _0x1a6ed9=_0x868f49;_0x473291==_0x1a6ed9(0x1c5)&&(updateSetting(_0x1a6ed9(0x1dd),_0x1a6ed9(0x1c5)),updateSetting(_0x1a6ed9(0x1de),!![]),await tgBot[_0x1a6ed9(0x178)](_0x45bae6[_0x1a6ed9(0x17b)]['id'],_0x1a6ed9(0x16a))['catch'](_0x2fe9de=>{telegramError(_0x2fe9de);}));_0x473291==_0x1a6ed9(0x15d)&&(updateSetting('telegramEvents',_0x1a6ed9(0x15d)),updateSetting('telegramEnabled',!![]),await tgBot[_0x1a6ed9(0x178)](_0x45bae6[_0x1a6ed9(0x17b)]['id'],_0x1a6ed9(0x168))['catch'](_0x34c21d=>{telegramError(_0x34c21d);}));_0x473291==_0x1a6ed9(0x1cf)&&(updateSetting('telegramEvents',_0x1a6ed9(0x1cf)),updateSetting(_0x1a6ed9(0x1de),!![]),await tgBot[_0x1a6ed9(0x178)](_0x45bae6['chat']['id'],_0x1a6ed9(0x1ba))[_0x1a6ed9(0x1b3)](_0x1b856b=>{telegramError(_0x1b856b);}));if(!settings[_0x1a6ed9(0x1a5)])tgBot[_0x1a6ed9(0x178)](_0x45bae6[_0x1a6ed9(0x17b)]['id'],_0x1a6ed9(0x114))[_0x1a6ed9(0x1b3)](_0x3b7b8f=>{telegramError(_0x3b7b8f);});}),tgBot['removeListener'](_0x868f49(0x1e4));});}),tgBot[_0x30ee08(0x138)](/\/status/,_0xe78133=>{const _0x56795c=_0x30ee08;if(!validateTelegram(_0xe78133))return;let _0x1ecf11=_0x56795c(0x13c);config[_0x56795c(0x11c)](_0x4e5284=>{const _0x53c306=_0x56795c;_0x1ecf11+=_0x53c306(0x152)+_0x4e5284[_0x53c306(0x1c0)]+_0x53c306(0x1ef)+_0x4e5284[_0x53c306(0x234)]+':\x20'+_0x4e5284[_0x53c306(0x1db)]+'\x20/\x20'+_0x4e5284[_0x53c306(0x18c)]+'\x0a';}),_0x1ecf11+='\x0a',_0x1ecf11+=_0x56795c(0x224),_0x1ecf11+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x56795c(0x11e),_0x1ecf11+=settings[_0x56795c(0x1de)]?settings[_0x56795c(0x1dd)]==_0x56795c(0x1cf)?_0x56795c(0x1e5):_0x56795c(0x1a6)+settings['telegramEvents']+_0x56795c(0x214):'',tgBot['sendMessage'](_0xe78133[_0x56795c(0x17b)]['id'],_0x1ecf11,{'parse_mode':_0x56795c(0x161)})[_0x56795c(0x1b3)](_0x5922a2=>{telegramError(_0x5922a2);});}),tgBot['onText'](/\/restart/,_0x1f806e=>{const _0x3dae7e=_0x30ee08;if(!validateTelegram(_0x1f806e))return;tgBot[_0x3dae7e(0x190)](_0x3dae7e(0x1e4));const _0x141123=getEnabledBots();if(_0x141123[_0x3dae7e(0x176)]==0x0)tgBot[_0x3dae7e(0x178)](_0x1f806e[_0x3dae7e(0x17b)]['id'],_0x3dae7e(0x189))[_0x3dae7e(0x1b3)](_0x44ffd8=>{telegramError(_0x44ffd8);});else{if(_0x141123[_0x3dae7e(0x176)]>0x1)_0x141123[_0x3dae7e(0x1d0)]({'botID':'all'});let _0x42a309=[],_0xff672b=[];const _0x52e501=_0x141123[_0x3dae7e(0x176)]%0x4==0x0||_0x141123[_0x3dae7e(0x176)]%0x4==0x3||_0x141123[_0x3dae7e(0x176)]%0x3==0x1?0x4:0x3;let _0xc03ec3=0x0;_0x141123[_0x3dae7e(0x11c)]((_0x58efb5,_0x5732b9)=>{const _0x4c6b39=_0x3dae7e;if(_0x5732b9%_0x52e501==0x0)_0xff672b=[];_0xff672b[_0x4c6b39(0x1d0)]({'text':_0x58efb5['botID']==_0x4c6b39(0x1cf)?'All\x20bots':_0x4c6b39(0x152)+_0x58efb5[_0x4c6b39(0x1c0)],'callback_data':_0x58efb5[_0x4c6b39(0x1c0)]}),_0x5732b9%_0x52e501==0x0&&(_0x42a309[_0xc03ec3]=_0xff672b,_0xc03ec3++);}),tgBot['sendMessage'](_0x1f806e[_0x3dae7e(0x17b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x42a309}})[_0x3dae7e(0x1b3)](_0x515df4=>{telegramError(_0x515df4);}),tgBot['on'](_0x3dae7e(0x1e4),async _0x52e98c=>{const _0x498f3f=_0x3dae7e,_0x163678=_0x52e98c[_0x498f3f(0x15e)],_0x2c7586=_0x52e98c[_0x498f3f(0x155)];tgBot[_0x498f3f(0x15f)](_0x52e98c['id'])[_0x498f3f(0x1b8)](async()=>{const _0x11952a=_0x498f3f;if(_0x163678==_0x11952a(0x1cf)){if(settings[_0x11952a(0x1dd)]==_0x11952a(0x1c5))tgBot[_0x11952a(0x178)](_0x2c7586[_0x11952a(0x17b)]['id'],_0x11952a(0x219))[_0x11952a(0x1b3)](_0x471252=>{telegramError(_0x471252);});config[_0x11952a(0x11c)](_0x6e3f51=>{const _0x1c621f=_0x11952a;stopBot(_0x6e3f51[_0x1c621f(0x1c0)]);});}else{if(settings[_0x11952a(0x1dd)]=='orders')tgBot[_0x11952a(0x178)](_0x2c7586[_0x11952a(0x17b)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x163678)['catch'](_0x254850=>{telegramError(_0x254850);});stopBot(_0x163678);}}),tgBot['removeListener'](_0x498f3f(0x1e4));});}}),tgBot[_0x30ee08(0x138)](/\/on/,_0x44696c=>{const _0x38369b=_0x30ee08;if(!validateTelegram(_0x44696c))return;tgBot[_0x38369b(0x190)](_0x38369b(0x1e4));const _0xccade3=getDisabledBots();if(_0xccade3['length']==0x0)tgBot['sendMessage'](_0x44696c[_0x38369b(0x17b)]['id'],_0x38369b(0x1aa))[_0x38369b(0x1b3)](_0xc38766=>{telegramError(_0xc38766);});else{if(_0xccade3['length']>0x1)_0xccade3[_0x38369b(0x1d0)]({'botID':_0x38369b(0x1cf)});let _0x53025e=[],_0x472962=[];const _0x3fef5d=_0xccade3[_0x38369b(0x176)]%0x4==0x0||_0xccade3[_0x38369b(0x176)]%0x4==0x3||_0xccade3['length']%0x3==0x1?0x4:0x3;let _0x4c68a2=0x0;_0xccade3[_0x38369b(0x11c)]((_0x3d977c,_0x28c881)=>{const _0x54ca16=_0x38369b;if(_0x28c881%_0x3fef5d==0x0)_0x472962=[];_0x472962[_0x54ca16(0x1d0)]({'text':_0x3d977c[_0x54ca16(0x1c0)]==_0x54ca16(0x1cf)?_0x54ca16(0x1be):'Bot\x20'+_0x3d977c[_0x54ca16(0x1c0)],'callback_data':_0x3d977c['botID']}),_0x28c881%_0x3fef5d==0x0&&(_0x53025e[_0x4c68a2]=_0x472962,_0x4c68a2++);}),tgBot[_0x38369b(0x178)](_0x44696c[_0x38369b(0x17b)]['id'],_0x38369b(0x142),{'reply_markup':{'inline_keyboard':_0x53025e}})[_0x38369b(0x1b3)](_0x23dcc3=>{telegramError(_0x23dcc3);}),tgBot['on'](_0x38369b(0x1e4),async _0x195ef3=>{const _0x58483b=_0x38369b,_0x3b7b0c=_0x195ef3[_0x58483b(0x15e)],_0x29a340=_0x195ef3['message'];tgBot[_0x58483b(0x15f)](_0x195ef3['id'])[_0x58483b(0x1b8)](async()=>{const _0x251cc9=_0x58483b;if(_0x3b7b0c=='all'){if(settings['telegramEvents']==_0x251cc9(0x1c5))tgBot[_0x251cc9(0x178)](_0x29a340['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')['catch'](_0x4842dd=>{telegramError(_0x4842dd);});_0xccade3[_0x251cc9(0x11c)](_0x2347a6=>{const _0x29b95e=_0x251cc9;if(_0x2347a6[_0x29b95e(0x1c0)]!=_0x29b95e(0x1cf))toggleBot(_0x2347a6['botID'],toggleStatus(_0x2347a6[_0x29b95e(0x1c0)]),_0x29b95e(0x174));});}else{if(settings[_0x251cc9(0x1dd)]==_0x251cc9(0x1c5))tgBot[_0x251cc9(0x178)](_0x29a340[_0x251cc9(0x17b)]['id'],_0x251cc9(0x1ed)+_0x3b7b0c)[_0x251cc9(0x1b3)](_0x53d626=>{telegramError(_0x53d626);});toggleBot(_0x3b7b0c,toggleStatus(_0x3b7b0c),_0x251cc9(0x174));}}),tgBot[_0x58483b(0x190)](_0x58483b(0x1e4));});}}),tgBot['onText'](/\/off/,_0xcccf80=>{const _0x28e1d9=_0x30ee08;if(!validateTelegram(_0xcccf80))return;tgBot[_0x28e1d9(0x190)](_0x28e1d9(0x1e4));const _0x50c053=getEnabledBots();if(_0x50c053[_0x28e1d9(0x176)]==0x0)tgBot[_0x28e1d9(0x178)](_0xcccf80[_0x28e1d9(0x17b)]['id'],_0x28e1d9(0x189))[_0x28e1d9(0x1b3)](_0xbc0c84=>{telegramError(_0xbc0c84);});else{if(_0x50c053[_0x28e1d9(0x176)]>0x1)_0x50c053['push']({'botID':_0x28e1d9(0x1cf)});let _0x4fbbfb=[],_0x5ebfba=[];const _0x16bdca=_0x50c053['length']%0x4==0x0||_0x50c053['length']%0x4==0x3||_0x50c053['length']%0x3==0x1?0x4:0x3;let _0x30c3be=0x0;_0x50c053[_0x28e1d9(0x11c)]((_0xfac146,_0x13d364)=>{const _0x3c8114=_0x28e1d9;if(_0x13d364%_0x16bdca==0x0)_0x5ebfba=[];_0x5ebfba['push']({'text':_0xfac146['botID']=='all'?_0x3c8114(0x1be):'Bot\x20'+_0xfac146[_0x3c8114(0x1c0)],'callback_data':_0xfac146[_0x3c8114(0x1c0)]}),_0x13d364%_0x16bdca==0x0&&(_0x4fbbfb[_0x30c3be]=_0x5ebfba,_0x30c3be++);}),tgBot['sendMessage'](_0xcccf80['chat']['id'],_0x28e1d9(0x12b),{'reply_markup':{'inline_keyboard':_0x4fbbfb}})[_0x28e1d9(0x1b3)](_0x34beeb=>{telegramError(_0x34beeb);}),tgBot['on'](_0x28e1d9(0x1e4),async _0x2855ce=>{const _0x1cd4d7=_0x28e1d9,_0x40b046=_0x2855ce[_0x1cd4d7(0x15e)],_0xa0e2b0=_0x2855ce[_0x1cd4d7(0x155)];tgBot[_0x1cd4d7(0x15f)](_0x2855ce['id'])[_0x1cd4d7(0x1b8)](async()=>{const _0x270289=_0x1cd4d7;if(_0x40b046==_0x270289(0x1cf)){if(settings[_0x270289(0x1dd)]=='orders')tgBot[_0x270289(0x178)](_0xa0e2b0[_0x270289(0x17b)]['id'],_0x270289(0x16f))[_0x270289(0x1b3)](_0x23f2a5=>{telegramError(_0x23f2a5);});_0x50c053[_0x270289(0x11c)](_0x4dd381=>{const _0xd992dc=_0x270289;if(_0x4dd381[_0xd992dc(0x1c0)]!=_0xd992dc(0x1cf))toggleBot(_0x4dd381[_0xd992dc(0x1c0)],toggleStatus(_0x4dd381[_0xd992dc(0x1c0)]),'stopped');});}else{if(settings[_0x270289(0x1dd)]==_0x270289(0x1c5))tgBot[_0x270289(0x178)](_0xa0e2b0[_0x270289(0x17b)]['id'],_0x270289(0x163)+_0x40b046)[_0x270289(0x1b3)](_0x1fb572=>{telegramError(_0x1fb572);});toggleBot(_0x40b046,toggleStatus(_0x40b046),_0x270289(0x174));}}),tgBot[_0x1cd4d7(0x190)]('callback_query');});}}),tgBot[_0x30ee08(0x138)](/\/disable/,_0x379e6f=>{const _0x5100cd=_0x30ee08;if(!validateTelegram(_0x379e6f))return;tgBot[_0x5100cd(0x178)](_0x379e6f['chat']['id'],_0x5100cd(0x239))[_0x5100cd(0x1b3)](_0x49cd82=>{telegramError(_0x49cd82);}),updateSetting(_0x5100cd(0x1de),![]);}),tgBot[_0x30ee08(0x138)](/\/help/,_0x486a67=>{const _0x4b49b4=_0x30ee08;if(!validateTelegram(_0x486a67))return;tgBot[_0x4b49b4(0x178)](_0x486a67['chat']['id'],_0x2979ce)['catch'](_0x10b0fb=>{telegramError(_0x10b0fb);});}),tgBot['on'](_0x30ee08(0x12d),_0x71370e=>{const _0x5362a0=_0x30ee08;if(_0x71370e[_0x5362a0(0x1d9)]()['includes'](_0x5362a0(0x135))){logging(_0x5362a0(0x184)),tgBot[_0x5362a0(0x1e3)](),tgBot=null;if(socket[_0x5362a0(0x19b)])socket[_0x5362a0(0x19b)][_0x5362a0(0x172)]('notification','Invalid\x20Telegram\x20token');}}),process[_0x30ee08(0x19d)]('SIGINT',()=>{const _0x15301f=_0x30ee08;if(tgBot)tgBot[_0x15301f(0x1e3)]();process['exit'](0x1);}),process['once'](_0x30ee08(0x1ac),()=>{const _0x3197d9=_0x30ee08;if(tgBot)tgBot[_0x3197d9(0x1e3)]();process['exit'](0x1);});}}function disableTelegram(){const _0x2151e4=_0x13baf0;tgBot&&(tgBot[_0x2151e4(0x1e3)](),tgBot=null);}function sendTelegram(_0x4011d2,_0x16d908){const _0x52274b=_0x13baf0;if(settings['telegramEnabled']){if(settings[_0x52274b(0x1dd)]==_0x52274b(0x1cf)||(_0x16d908[_0x52274b(0x216)]==_0x52274b(0x144)||_0x16d908[_0x52274b(0x216)]==_0x52274b(0x131))&&settings[_0x52274b(0x1dd)]==_0x52274b(0x15d)||_0x16d908[_0x52274b(0x216)]==_0x52274b(0x18d)&&settings[_0x52274b(0x1dd)]==_0x52274b(0x1c5)){if(tgBot&&settings[_0x52274b(0x1a5)]){if(_0x16d908[_0x52274b(0x1eb)])tgBot[_0x52274b(0x178)](settings[_0x52274b(0x1a5)],_0x16d908[_0x52274b(0x234)]+'\x20>\x20'+_0x16d908['event'])['catch'](_0x5a807c=>{telegramError(_0x5a807c);});else tgBot[_0x52274b(0x178)](settings['telegramChatId'],_0x52274b(0x152)+_0x4011d2+_0x52274b(0x192)+_0x16d908[_0x52274b(0x15c)])[_0x52274b(0x1b3)](_0x17564a=>{telegramError(_0x17564a);});}}}}function temporaryAccess2FA(_0x3591ee){const _0xa01d2d=_0x13baf0;let _0x439828=new Date(),_0x21e5c7=![];if(lastIpApproval){if(_0x439828-lastIpApproval<0x1388)_0x21e5c7=!![];}lastIpApproval=new Date();if(_0x21e5c7)return;tgBot&&settings[_0xa01d2d(0x1a5)]&&(tgBot['removeListener'](_0xa01d2d(0x1e4)),tgBot['sendMessage'](settings[_0xa01d2d(0x1a5)],_0xa01d2d(0x169)+normalizeIP(_0x3591ee)[_0xa01d2d(0x1b9)]+_0xa01d2d(0x180),{'parse_mode':_0xa01d2d(0x161),'reply_markup':{'inline_keyboard':[[{'text':_0xa01d2d(0x212),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0xa01d2d(0x207),'callback_data':'30'},{'text':_0xa01d2d(0x1ce),'callback_data':_0xa01d2d(0x1ce)}]]}})[_0xa01d2d(0x1b3)](_0x2940df=>{telegramError(_0x2940df);}),tgBot['on']('callback_query',async _0x4426d5=>{const _0x46cfc4=_0xa01d2d,_0x268fc2=_0x4426d5[_0x46cfc4(0x15e)],_0x233be0=_0x4426d5[_0x46cfc4(0x155)];tgBot[_0x46cfc4(0x15f)](_0x4426d5['id'])[_0x46cfc4(0x1b8)](async()=>{const _0x56613c=_0x46cfc4;if(_0x268fc2!=_0x56613c(0x1ce)){telegramIpApproval={'clientip':_0x3591ee,'timestamp':new Date()['getTime'](),'expiry':_0x268fc2},await tgBot[_0x56613c(0x178)](_0x233be0[_0x56613c(0x17b)]['id'],_0x56613c(0x1e9)+_0x268fc2+'\x20minutes',{'parse_mode':'HTML'})[_0x56613c(0x1b3)](_0x1d9cf2=>{telegramError(_0x1d9cf2);});for(let _0x4908f7 in socket){socket[_0x4908f7]['emit'](_0x56613c(0x1db),{'access':{'allow':![],'reason':_0x56613c(0x19a),'token':null}});}}else await tgBot[_0x56613c(0x178)](_0x233be0[_0x56613c(0x17b)]['id'],'Temporary\x20access\x20rejected')[_0x56613c(0x1b3)](_0x87bcb0=>{telegramError(_0x87bcb0);});}),tgBot[_0x46cfc4(0x190)](_0x46cfc4(0x1e4));}));}function loginAccess2FA(_0x5721b5){const _0x34bf34=_0x13baf0;tgBot&&settings[_0x34bf34(0x1a5)]&&(tgBot['removeListener'](_0x34bf34(0x1e4)),tgBot[_0x34bf34(0x178)](settings[_0x34bf34(0x1a5)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5721b5)[_0x34bf34(0x1b9)]+_0x34bf34(0x180),{'parse_mode':_0x34bf34(0x161),'reply_markup':{'inline_keyboard':[[{'text':_0x34bf34(0x1a9),'callback_data':loginExpiry},{'text':_0x34bf34(0x1ce),'callback_data':_0x34bf34(0x1ce)}]]}})[_0x34bf34(0x1b3)](_0x2ea668=>{telegramError(_0x2ea668);}),tgBot['on'](_0x34bf34(0x1e4),async _0x1ef942=>{const _0x3399f4=_0x34bf34,_0x3bfd53=_0x1ef942[_0x3399f4(0x15e)],_0x4b59fc=_0x1ef942[_0x3399f4(0x155)];tgBot['answerCallbackQuery'](_0x1ef942['id'])['then'](async()=>{const _0x281da9=_0x3399f4;if(_0x3bfd53!='reject'){telegram2FaApproval={'clientip':_0x5721b5,'timestamp':new Date()['getTime'](),'expiry':_0x3bfd53},await tgBot[_0x281da9(0x178)](_0x4b59fc[_0x281da9(0x17b)]['id'],_0x281da9(0x150),{'parse_mode':'HTML'})[_0x281da9(0x1b3)](_0x48968b=>{telegramError(_0x48968b);});for(let _0x15e9c2 in socket){socket[_0x15e9c2][_0x281da9(0x172)]('status',{'access':{'allow':![],'reason':'reload','token':null}});}}else await tgBot[_0x281da9(0x178)](_0x4b59fc[_0x281da9(0x17b)]['id'],'Login\x20rejected')[_0x281da9(0x1b3)](_0x45413e=>{telegramError(_0x45413e);});}),tgBot[_0x3399f4(0x190)](_0x3399f4(0x1e4));}));}function getConfiguration(){const _0x200760=_0x13baf0;return dbConfig[_0x200760(0x1fc)]('bots')[_0x200760(0x167)]('botID')[_0x200760(0x23f)]()||[];}function getEnabledBots(){const _0x2508c3=_0x13baf0;return dbConfig[_0x2508c3(0x1fc)](_0x2508c3(0x11f))[_0x2508c3(0x167)](_0x2508c3(0x1c0))[_0x2508c3(0x18a)]({'status':_0x2508c3(0x14d)})['value']()||[];}function getDisabledBots(){const _0x2ada80=_0x13baf0;return dbConfig[_0x2ada80(0x1fc)](_0x2ada80(0x11f))[_0x2ada80(0x167)](_0x2ada80(0x1c0))[_0x2ada80(0x18a)]({'status':'disabled'})['value']()||[];}function getSettings(){const _0x35adcd=_0x13baf0;return dbSettings['get'](_0x35adcd(0x1a4))['value']()||{'timeshift':0x0};}function getSecure(){const _0x2df249=_0x13baf0;return dbSecure[_0x2df249(0x1fc)](_0x2df249(0x165))['value']()||{};}function getBlacklist(){const _0x38a31d=_0x13baf0;return dbSecure['get']('blacklist')[_0x38a31d(0x23f)]()||[];}function broadcastToBots(_0x1a7958,_0x49f0c1){config['forEach'](_0x1e09d0=>{const _0x602d=_0x5cce;if(_0x1e09d0['status']==_0x602d(0x14d)&&_0x1e09d0[_0x602d(0x18c)]==_0x602d(0x1b2)){if(pid[_0x1e09d0[_0x602d(0x1c0)]])pid[_0x1e09d0[_0x602d(0x1c0)]][_0x602d(0x139)]({[_0x1a7958]:_0x49f0c1});}});}function storeSettings(_0x5b1520,_0x43b55f=![]){const _0x1f15f0=_0x13baf0;_0x5b1520={...settings,..._0x5b1520};if(_0x43b55f&&_0x5b1520[_0x1f15f0(0x134)]!='************'&&_0x5b1520[_0x1f15f0(0x134)]!=''){const _0x136627=crypt[_0x1f15f0(0x1a1)](secure[_0x1f15f0(0x140)],_0x5b1520[_0x1f15f0(0x134)])['message'][_0x1f15f0(0x1cc)]('@')[0x0],_0x5ba78f=bcrypt['hashSync'](_0x136627,saltRounds);_0x5b1520={..._0x5b1520,'bbPassword':_0x5ba78f};}if(_0x43b55f&&_0x5b1520['telegramToken']!='************'&&_0x5b1520['telegramToken']!=''){const _0x49e9c9=crypt['decrypt'](secure['privateKey'],_0x5b1520['telegramToken'])[_0x1f15f0(0x155)][_0x1f15f0(0x1cc)]('@')[0x0];_0x5b1520={..._0x5b1520,'telegramToken':_0x49e9c9};}const _0x103c3e=_0x5b1520['telegramToken']!=_0x1f15f0(0x166)&&_0x5b1520[_0x1f15f0(0x164)]!=settings['telegramToken']||_0x5b1520['telegramUsername']!=settings[_0x1f15f0(0x22c)],_0x4d8313=_0x5b1520[_0x1f15f0(0x164)]==''||_0x5b1520['telegramUsername']=='';if(_0x103c3e)_0x5b1520[_0x1f15f0(0x1dd)]=_0x1f15f0(0x1cf);for(const [_0x36496a,_0x131a9f]of Object[_0x1f15f0(0x22a)](_0x5b1520)){if(_0x36496a==_0x1f15f0(0x164)&&_0x131a9f=='************'){_0x5b1520['telegramToken']=settings[_0x1f15f0(0x164)];continue;};if(_0x36496a==_0x1f15f0(0x134)&&_0x131a9f==_0x1f15f0(0x166)){_0x5b1520['bbPassword']=settings[_0x1f15f0(0x134)];continue;};dbSettings[_0x1f15f0(0x1ae)](_0x1f15f0(0x157)+_0x36496a,_0x131a9f)[_0x1f15f0(0x229)]();}settings=_0x5b1520;if(socket[_0x1f15f0(0x19b)])socket['botmanager']['emit'](_0x1f15f0(0x1a4),cleanSettings());broadcastToBots(_0x1f15f0(0x21b),settings['timeshift']);if(_0x103c3e&&!_0x4d8313)initTelegram();if(_0x103c3e&&_0x4d8313)disableTelegram();for(let _0xec8ed7 in socket){setAccess(_0xec8ed7);}}function updateSetting(_0x451eee,_0x1b0c24){const _0x2e79f5=_0x13baf0;dbSettings[_0x2e79f5(0x1ae)]('settings.'+_0x451eee,_0x1b0c24)['write'](),settings=getSettings();if(socket[_0x2e79f5(0x19b)])socket['botmanager'][_0x2e79f5(0x172)](_0x2e79f5(0x1a4),cleanSettings());}function storeSecure(_0xbc2a82){const _0x3085c9=_0x13baf0;dbSecure['get'](_0x3085c9(0x165))[_0x3085c9(0x1d0)](_0xbc2a82)['write'](),secure=_0xbc2a82;}function addBlacklist(){const _0x3e2f40=_0x13baf0;cleanBlacklist();let _0x5dec45;telegramIpApproval?_0x5dec45=Math[_0x3e2f40(0x231)](telegramIpApproval['expiry'],loginExpiry):_0x5dec45=loginExpiry,dbSecure[_0x3e2f40(0x1fc)](_0x3e2f40(0x22e))[_0x3e2f40(0x1d0)]({'expiry':new Date()[_0x3e2f40(0x146)]()+_0x5dec45*0x3c*0x3e8,'token':token})['write'](),blacklist=dbSecure['get']('blacklist')[_0x3e2f40(0x23f)]();}function cleanBlacklist(){const _0x17735d=_0x13baf0;let _0x32f894=dbSecure[_0x17735d(0x1fc)]('blacklist')[_0x17735d(0x23e)]()[_0x17735d(0x23f)](),_0x321d3d=new Date()[_0x17735d(0x146)]();_0x32f894[_0x17735d(0x11c)](_0x2fdac0=>{const _0x67f2f4=_0x17735d;_0x2fdac0[_0x67f2f4(0x21a)]<_0x321d3d&&dbSecure[_0x67f2f4(0x1fc)](_0x67f2f4(0x22e))[_0x67f2f4(0x203)]({'expiry':_0x2fdac0['expiry']})['write']();});}function initStates(){const _0x1c2847=_0x13baf0;let _0x1da79c=getConfiguration();_0x1da79c[_0x1c2847(0x11c)](_0x291f3b=>{const _0x211986=_0x1c2847;_0x291f3b[_0x211986(0x18c)]=_0x211986(0x174);}),storeConfiguration(_0x1da79c);}function onKeys(){const _0x16e3fb=new RSA();return new Promise(_0x2e86a4=>{const _0x540e4c=_0x5cce;_0x16e3fb[_0x540e4c(0x218)]()[_0x540e4c(0x1b8)](_0x773d30=>{_0x2e86a4(_0x773d30);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2aefb9=_0x13baf0;let _0x3d38a6=getConfiguration(),_0x3d27f7=![];_0x3d38a6[_0x2aefb9(0x11c)](_0x4605a7=>{const _0x546481=_0x2aefb9;if(_0x4605a7['status']=='running')_0x4605a7['status']='enabled',_0x3d27f7=!![];else _0x4605a7['status']==_0x546481(0x174)&&(_0x4605a7[_0x546481(0x1db)]=_0x546481(0x226),_0x3d27f7=!![]);});if(_0x3d27f7)storeConfiguration(_0x3d38a6);let _0x5217a8=getSecure();if(!_0x5217a8[_0x2aefb9(0x126)](_0x2aefb9(0x1c7))){let _0x1c7efd=await generateKeys();_0x5217a8['publicKey']=_0x1c7efd['publicKey'],_0x5217a8[_0x2aefb9(0x140)]=_0x1c7efd[_0x2aefb9(0x140)],_0x5217a8[_0x2aefb9(0x1c7)]=crypto[_0x2aefb9(0x177)](0x20)[_0x2aefb9(0x1d9)](_0x2aefb9(0x21d));;storeSecure(_0x5217a8);}let _0x4bca92=getSettings();_0x3d27f7=![];!_0x4bca92['hasOwnProperty']('loginRequired')&&(_0x4bca92[_0x2aefb9(0x1fa)]=![],_0x4bca92[_0x2aefb9(0x1f0)]='',_0x4bca92['bbPassword']='',_0x4bca92[_0x2aefb9(0x20d)]=![],_0x3d27f7=!![]);!_0x4bca92[_0x2aefb9(0x126)](_0x2aefb9(0x1c9))&&(_0x4bca92['whitelistEnabled']=![],_0x4bca92[_0x2aefb9(0x197)]=[],_0x4bca92['temporaryAccessAllowed']=![],_0x3d27f7=!![]);if(!_0x4bca92['hasOwnProperty'](_0x2aefb9(0x1de))){if(_0x4bca92[_0x2aefb9(0x1a5)])_0x4bca92[_0x2aefb9(0x1de)]=!![];else _0x4bca92[_0x2aefb9(0x1de)]=![];_0x3d27f7=!![];}if(_0x3d27f7)storeSettings(_0x4bca92);}function storeConfiguration(_0x48bae7){const _0x4ae3b8=_0x13baf0;dbConfig['get'](_0x4ae3b8(0x11f))[_0x4ae3b8(0x203)]()['write'](),dbConfig[_0x4ae3b8(0x1fc)](_0x4ae3b8(0x11f))[_0x4ae3b8(0x1d0)](..._0x48bae7)[_0x4ae3b8(0x229)](),config=_0x48bae7;}function _0x5cce(_0x3b90b9,_0x423140){const _0x46e7dc=_0x4a4d();return _0x5cce=function(_0x3b5aa1,_0x24f5fd){_0x3b5aa1=_0x3b5aa1-0x114;let _0x4a4dc1=_0x46e7dc[_0x3b5aa1];return _0x4a4dc1;},_0x5cce(_0x3b90b9,_0x423140);}function resetPassword(){const _0x3ddd48=_0x13baf0;tgBot&&settings[_0x3ddd48(0x1a5)]&&(tgBot[_0x3ddd48(0x190)](_0x3ddd48(0x1e4)),tgBot['sendMessage'](settings[_0x3ddd48(0x1a5)],_0x3ddd48(0x182),{'parse_mode':_0x3ddd48(0x161),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x3ddd48(0x21c)},{'text':'no','callback_data':'no'}]]}})[_0x3ddd48(0x1b3)](_0x211c59=>{telegramError(_0x211c59);}),tgBot['on'](_0x3ddd48(0x1e4),async _0x353e90=>{const _0x41682e=_0x3ddd48,_0x3c929f=_0x353e90[_0x41682e(0x15e)],_0xeaef65=_0x353e90[_0x41682e(0x155)];tgBot['answerCallbackQuery'](_0x353e90['id'])[_0x41682e(0x1b8)](async()=>{const _0x25d8a7=_0x41682e;if(_0x3c929f!='no'){const _0x462f83=0xf,_0x459e2f=_0x25d8a7(0x20c),_0xccacd2=Array[_0x25d8a7(0x14e)](crypto['randomFillSync'](new Uint32Array(_0x462f83)))[_0x25d8a7(0x23a)](_0x5655a5=>_0x459e2f[_0x5655a5%_0x459e2f[_0x25d8a7(0x176)]])[_0x25d8a7(0x220)](''),_0x533981=bcrypt['hashSync'](_0xccacd2,saltRounds);storeSettings({'bbPassword':_0x533981}),await tgBot[_0x25d8a7(0x178)](_0xeaef65['chat']['id'],_0x25d8a7(0x179)+_0xccacd2,{'parse_mode':_0x25d8a7(0x161)})[_0x25d8a7(0x1b3)](_0xeadf9d=>{telegramError(_0xeadf9d);});}else await tgBot[_0x25d8a7(0x178)](_0xeaef65[_0x25d8a7(0x17b)]['id'],_0x25d8a7(0x1b7))[_0x25d8a7(0x1b3)](_0x423a01=>{telegramError(_0x423a01);});}),tgBot['removeListener'](_0x41682e(0x1e4));}));}function logging(_0x53611f){const _0x365046=_0x13baf0;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x53611f);if(tgBot&&settings['telegramChatId']&&settings[_0x365046(0x1dd)]!='orders')tgBot[_0x365046(0x178)](settings['telegramChatId'],_0x365046(0x1f7)+_0x53611f)[_0x365046(0x1b3)](_0x1eb371=>{telegramError(_0x1eb371);});}function getServerTime(){const _0x29cbb5=_0x13baf0,_0xae0285=new Date();return _0xae0285[_0x29cbb5(0x1f4)]()+'/'+(_0xae0285[_0x29cbb5(0x14b)]()+0x1)['toString']()[_0x29cbb5(0x12a)](0x2,'0')+'/'+_0xae0285[_0x29cbb5(0x1e6)]()[_0x29cbb5(0x1d9)]()[_0x29cbb5(0x12a)](0x2,'0')+'\x20'+_0xae0285[_0x29cbb5(0x204)]()['toString']()[_0x29cbb5(0x12a)](0x2,'0')+':'+_0xae0285['getMinutes']()[_0x29cbb5(0x1d9)]()[_0x29cbb5(0x12a)](0x2,'0')+':'+_0xae0285[_0x29cbb5(0x186)]()[_0x29cbb5(0x1d9)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1f50aa=_0x13baf0,_0x74b672=shiftedTime();return _0x74b672[_0x1f50aa(0x1f4)]()+'/'+(_0x74b672[_0x1f50aa(0x14b)]()+0x1)[_0x1f50aa(0x1d9)]()['padStart'](0x2,'0')+'/'+_0x74b672[_0x1f50aa(0x1e6)]()['toString']()[_0x1f50aa(0x12a)](0x2,'0')+'\x20'+_0x74b672[_0x1f50aa(0x204)]()[_0x1f50aa(0x1d9)]()[_0x1f50aa(0x12a)](0x2,'0')+':'+_0x74b672[_0x1f50aa(0x191)]()[_0x1f50aa(0x1d9)]()[_0x1f50aa(0x12a)](0x2,'0')+':'+_0x74b672[_0x1f50aa(0x186)]()[_0x1f50aa(0x1d9)]()[_0x1f50aa(0x12a)](0x2,'0');}function shiftedTime(){const _0x54a8aa=_0x13baf0,_0x1328ea=new Date();let _0x1e45f7=_0x1328ea;if(settings[_0x54a8aa(0x21b)]&&settings[_0x54a8aa(0x21b)]!==0x0)_0x1e45f7=fns[_0x54a8aa(0x1dc)](_0x1328ea,{'hours':settings['timeshift']});return _0x1e45f7;}function startAnalytics(){let _0x65cf4=new Date()['getUTCHours']();_0x65cf4==0x9&&triggerAnalytics();if(pidAnalytics)clearTimeout(pidAnalytics);pidAnalytics=setTimeout(()=>{startAnalytics();},0x3c*0x3c*0x3e8);}function triggerAnalytics(){const _0x4af075=_0x13baf0;analytics['page']({'title':_0x4af075(0x13d),'href':_0x4af075(0x1a7),'path':'/v'+serverversion});}function validateCredentials(_0x2dc48a){const _0x1cc4b3=_0x13baf0;if(_0x2dc48a[_0x1cc4b3(0x16c)]==settings[_0x1cc4b3(0x1f0)]&&bcrypt[_0x1cc4b3(0x201)](_0x2dc48a['password'],settings[_0x1cc4b3(0x134)])){if(settings[_0x1cc4b3(0x20d)])return{'allow':![],'reason':_0x1cc4b3(0x1b5),'token':null};else{const _0x55a448=generateLoginToken();return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x55a448};}}else return{'allow':![],'reason':_0x1cc4b3(0x223),'token':null};}function refreshToken(){const _0x4c4f4b=_0x13baf0,_0x5ca5a0=generateLoginToken();return{'allow':!![],'reason':_0x4c4f4b(0x12e),'token':_0x5ca5a0};}function validateAccess(_0x4aae7a){const _0x553c24=_0x13baf0;let _0x116603;const _0x2cf335=_0x4e1bbd=>{const _0x4e702b=_0x5cce;if(settings[_0x4e702b(0x1fa)]){if(settings['f2aRequired']){if(telegram2FaApproved()){const _0x2aa71d=generateLoginToken();return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x2aa71d};}else return{'allow':![],'reason':_0x4e702b(0x1b5),'token':null};}else return _0x116603=validToken(_0x4e1bbd),_0x116603[_0x4e702b(0x126)](_0x4e702b(0x131))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x4e1bbd}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4e702b(0x1a8),'token':null};};if(settings[_0x553c24(0x1c9)]){let _0x1dd1fc=[...settings[_0x553c24(0x197)],_0x553c24(0x235),_0x553c24(0x236),_0x553c24(0x185)];if(_0x1dd1fc['includes'](externalip))return _0x2cf335(_0x4aae7a);else{_0x116603=validToken(_0x4aae7a);if(_0x116603[_0x553c24(0x126)](_0x553c24(0x131)))return _0x2cf335(_0x4aae7a);else{if(telegramIpApproved()){const _0x3f25f9=generateToken();return _0x116603=_0x2cf335(_0x4aae7a),_0x116603['allow']?{'allow':!![],'reason':_0x553c24(0x1ee),'token':_0x3f25f9}:_0x116603;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x553c24(0x22b),'token':null}:{'allow':![],'reason':_0x553c24(0x137),'token':null};}}}else return _0x2cf335(_0x4aae7a);}function timelyDecrypt(_0x27346c,_0x297d27=!![]){const _0x4547ce=_0x13baf0;if(_0x27346c)try{const _0x2c7c76=crypt[_0x4547ce(0x1a1)](secure[_0x4547ce(0x140)],_0x27346c)[_0x4547ce(0x155)],_0x5ba42d=_0x2c7c76[_0x4547ce(0x1cc)]('@')[0x0],_0x3b72f8=_0x2c7c76[_0x4547ce(0x1cc)]('@')[0x1],_0x16ea82=new Date()[_0x4547ce(0x146)]();if(_0x297d27){if(_0x16ea82-_0x3b72f8<maxSecretAge*0x3e8)return _0x5ba42d;else return![];}else return _0x5ba42d;}catch{return![];}else return![];}const validToken=_0x86eb31=>{const _0x3365ad=_0x13baf0;if(!_0x86eb31)return{'error':'No\x20authentication\x20token'};for(let _0x1efb02 of blacklist){if(_0x1efb02[_0x3365ad(0x175)]==_0x86eb31)return{'error':_0x3365ad(0x1bf)};}let _0xabae43;try{_0xabae43=jwt[_0x3365ad(0x1e1)](_0x86eb31,secure[_0x3365ad(0x1c7)]+uuid);}catch{return{'error':_0x3365ad(0x1ea)};}if(!_0xabae43[_0x3365ad(0x126)]('clientip')&&!_0xabae43['hasOwnProperty']('username')||!_0xabae43[_0x3365ad(0x126)](_0x3365ad(0x237)))return{'error':_0x3365ad(0x1da)};if(!_0xabae43[_0x3365ad(0x126)](_0x3365ad(0x16c))&&_0xabae43['hasOwnProperty'](_0x3365ad(0x22d))){const {clientip:_0x5bf47c}=_0xabae43;return externalip==_0x5bf47c?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3365ad(0x14a)};}else{if(_0xabae43['hasOwnProperty'](_0x3365ad(0x16c))&&_0xabae43['hasOwnProperty'](_0x3365ad(0x22d))){const {username:_0x4f39bf,clientip:_0x5b6c85}=_0xabae43;return settings[_0x3365ad(0x1f0)]==_0x4f39bf&&externalip==_0x5b6c85?{'success':_0x3365ad(0x1f2)}:{'error':_0x3365ad(0x115)};}}},generateLoginToken=()=>{const _0x5aa318=_0x13baf0;if(uuid)return jwt[_0x5aa318(0x17f)]({'username':settings[_0x5aa318(0x1f0)],'clientip':externalip},secure[_0x5aa318(0x1c7)]+uuid,{'expiresIn':tokenRefresh*0x3c});else return![];},generateToken=()=>{const _0x4693c1=_0x13baf0;if(uuid)return jwt[_0x4693c1(0x17f)]({'clientip':externalip},secure[_0x4693c1(0x1c7)]+uuid,{'expiresIn':telegramIpApproval[_0x4693c1(0x21a)]*0x3c});else return![];},telegramIpApproved=()=>{const _0x183a4d=_0x13baf0;let _0x27ed27=![];return telegramIpApproval&&telegramIpApproval[_0x183a4d(0x21a)]!=_0x183a4d(0x1ce)&&(_0x27ed27=telegramIpApproval[_0x183a4d(0x22d)]==externalip&&new Date()[_0x183a4d(0x146)]()-telegramIpApproval['timestamp']<telegramIpApproval[_0x183a4d(0x21a)]*0x3c*0x3e8),_0x27ed27;},telegram2FaApproved=()=>{const _0x1d8a5d=_0x13baf0;let _0xd46cb5=![];return telegram2FaApproval&&telegram2FaApproval[_0x1d8a5d(0x21a)]!='reject'&&(_0xd46cb5=telegram2FaApproval[_0x1d8a5d(0x22d)]==externalip&&new Date()[_0x1d8a5d(0x146)]()-telegram2FaApproval[_0x1d8a5d(0x1a2)]<telegram2FaApproval[_0x1d8a5d(0x21a)]*0x3c*0x3e8),_0xd46cb5;},normalizeIP=_0x47c53f=>{const _0x4bcd8e=_0x13baf0;let _0x55bac3=null,_0x650689=null;if(ipaddr['isValid'](_0x47c53f)){const _0x4404af=ipaddr[_0x4bcd8e(0x125)](_0x47c53f);_0x4404af['kind']()===_0x4bcd8e(0x230)?(_0x4404af[_0x4bcd8e(0x121)]()&&(_0x55bac3=_0x4404af[_0x4bcd8e(0x156)]()[_0x4bcd8e(0x1d9)]()),_0x650689=_0x4404af[_0x4bcd8e(0x1d9)]()):(_0x55bac3=_0x4404af[_0x4bcd8e(0x1d9)](),_0x650689=_0x4404af['toIPv4MappedAddress']()['toString']());}return{'show':_0x55bac3?_0x55bac3:_0x650689,'store':_0x650689};};