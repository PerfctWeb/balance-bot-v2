const _0x102588=_0x163f;(function(_0xa9cd80,_0x4a7dc8){const _0x227df3=_0x163f,_0x4af906=_0xa9cd80();while(!![]){try{const _0x831e41=parseInt(_0x227df3(0xff))/0x1+parseInt(_0x227df3(0xfe))/0x2+-parseInt(_0x227df3(0x103))/0x3*(-parseInt(_0x227df3(0xdb))/0x4)+-parseInt(_0x227df3(0x18b))/0x5+parseInt(_0x227df3(0x1dd))/0x6+parseInt(_0x227df3(0x110))/0x7+-parseInt(_0x227df3(0xcf))/0x8;if(_0x831e41===_0x4a7dc8)break;else _0x4af906['push'](_0x4af906['shift']());}catch(_0x4caf5d){_0x4af906['push'](_0x4af906['shift']());}}}(_0x259b,0x7b867));const _0x2769ab=function(){let _0x173c6e=!![];return function(_0x3f24a0,_0x337aa6){const _0x5f3eec=_0x173c6e?function(){const _0x592386=_0x163f;if(_0x337aa6){const _0x3e61b8=_0x337aa6[_0x592386(0x111)](_0x3f24a0,arguments);return _0x337aa6=null,_0x3e61b8;}}:function(){};return _0x173c6e=![],_0x5f3eec;};}(),_0x4611f1=_0x2769ab(this,function(){const _0xb04b1c=_0x163f;return _0x4611f1[_0xb04b1c(0x1ba)]()[_0xb04b1c(0x1ac)](_0xb04b1c(0x1f0))[_0xb04b1c(0x1ba)]()['constructor'](_0x4611f1)['search']('(((.+)+)+)+$');});_0x4611f1();'use strict';process[_0x102588(0x1d9)][_0x102588(0x1c6)]=0x1;const childProcess=require('child_process'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x102588(0xd2)),low=require(_0x102588(0x1e6)),path=require('path'),crypto=require(_0x102588(0xc0)),Crypt=require(_0x102588(0xfa))[_0x102588(0x11b)],RSA=require(_0x102588(0xfa))[_0x102588(0x19c)],bcrypt=require(_0x102588(0x173)),jwt=require(_0x102588(0x190)),analyticsLib=require(_0x102588(0xe6))[_0x102588(0x196)],googleAnalytics=require(_0x102588(0x1e3))[_0x102588(0x196)],ipaddr=require(_0x102588(0x11e)),argv=require(_0x102588(0xe0))(process['argv'][_0x102588(0x134)](0x2))['argv'],PORT=argv[_0x102588(0x113)]||_0x102588(0x122),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x102588(0x137)](_0x102588(0x186)+PORT+_0x102588(0x1bc)),process[_0x102588(0x119)](0x1);const HOST=argv[_0x102588(0x13d)]||null,userID=argv[_0x102588(0x136)]||'';let bbpath='bb/';const botfile='bot.js',configfile=_0x102588(0x1b5),settingsfile=_0x102588(0x126),securefile=_0x102588(0x135);!fs[_0x102588(0x154)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x102588(0x12e),configbackuppath=configpath+_0x102588(0x15e);!fs[_0x102588(0x154)](configpath)&&fs[_0x102588(0xda)](configpath);!fs[_0x102588(0x154)](configbackuppath)&&fs[_0x102588(0xda)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x102588(0xe7)]({'settings':{'timeshift':0x0}})[_0x102588(0x1cd)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x102588(0xe7)]({'secure':{},'blacklist':[]})[_0x102588(0x1cd)]();let crypt=new Crypt({'md':_0x102588(0x13a),'rsaStandard':_0x102588(0x14e)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+'version.json')[_0x102588(0x11a)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x102588(0x143)](app);app['use'](express['static'](path[_0x102588(0x139)](__dirname,bbpath,_0x102588(0xbd)))),app[_0x102588(0x10b)](express[_0x102588(0x1c9)](path['join'](__dirname,bbpath,_0x102588(0x167)))),app[_0x102588(0x132)]('/',function(_0x307a9d,_0x27d543){const _0x5f0abf=_0x102588;_0x27d543[_0x5f0abf(0x1b6)](path[_0x5f0abf(0x139)](__dirname,bbpath,'build2',_0x5f0abf(0x181)));}),app[_0x102588(0x132)]('/:bot',function(_0x1feb06,_0x27cbd0){const _0x1bcfd1=_0x102588;_0x27cbd0[_0x1bcfd1(0x1b6)](path[_0x1bcfd1(0x139)](__dirname,bbpath,_0x1bcfd1(0x167),_0x1bcfd1(0x181)));}),app[_0x102588(0x132)]('/:bot/portfolio',(_0x35beb8,_0x50c82e)=>{const _0x4164f5=_0x102588;_0x50c82e[_0x4164f5(0x1b6)](path[_0x4164f5(0x139)](__dirname,bbpath,'build',_0x4164f5(0x181)));}),app[_0x102588(0x132)](_0x102588(0x147),(_0x5073ef,_0x151299)=>{const _0x430179=_0x102588;_0x151299['sendFile'](path[_0x430179(0x139)](__dirname,bbpath,'build','index.html'));}),app[_0x102588(0x132)](_0x102588(0x18c),(_0x1e34a0,_0x439394)=>{const _0x1cd771=_0x102588;_0x439394[_0x1cd771(0x1b6)](path[_0x1cd771(0x139)](__dirname,bbpath,'build','index.html'));}),app[_0x102588(0x132)]('/:bot/history',(_0x4cc8c3,_0x29bdc1)=>{const _0x59936a=_0x102588;_0x29bdc1[_0x59936a(0x1b6)](path[_0x59936a(0x139)](__dirname,bbpath,_0x59936a(0x167),_0x59936a(0x181)));}),app['get']('/:bot/configuration',(_0x464d78,_0x2583bf)=>{const _0x28d6f3=_0x102588;_0x2583bf[_0x28d6f3(0x1b6)](path[_0x28d6f3(0x139)](__dirname,bbpath,_0x28d6f3(0x167),_0x28d6f3(0x181)));}),app[_0x102588(0x132)](_0x102588(0x11c),(_0x1de56b,_0x1aca99)=>{const _0x53558c=_0x102588;_0x1aca99[_0x53558c(0x1b6)](path[_0x53558c(0x139)](__dirname,bbpath,_0x53558c(0x167),_0x53558c(0x181)));});if(HOST)http[_0x102588(0x1e2)](PORT,HOST);else http[_0x102588(0x1e2)](PORT);const io=require(_0x102588(0x17f))(http,{}),analytics=analyticsLib({'app':_0x102588(0x116),'plugins':[googleAnalytics({'trackingId':_0x102588(0x140)})]}),TelegramBot=require(_0x102588(0xc7));let tgBot;if(settings[_0x102588(0x1cf)]&&settings['telegramToken']!=''&&settings[_0x102588(0x1f6)]&&settings[_0x102588(0x1f6)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x3dca63=_0x102588;console[_0x3dca63(0x137)](''),console[_0x3dca63(0x137)](_0x3dca63(0x17e)),logging(_0x3dca63(0xdf)+PORT),console[_0x3dca63(0x137)](_0x3dca63(0x17e));if(config[_0x3dca63(0x158)]!=0x0)config[_0x3dca63(0x112)](_0xf960fc=>{const _0xa0089b=_0x3dca63;if(_0xf960fc[_0xa0089b(0x1b0)]=='enabled'||_0xf960fc[_0xa0089b(0x1b0)]==_0xa0089b(0x1c7))logging(_0xa0089b(0x172)+_0xf960fc[_0xa0089b(0x121)]+'\x20|\x20'+_0xf960fc['botname']),startBot([_0xf960fc[_0xa0089b(0x121)],userID],{'cwd':bbpath},function(_0x504920){if(_0x504920)logging(_0x504920);});else(_0xf960fc['status']=='disabled'||_0xf960fc[_0xa0089b(0x1b0)]==_0xa0089b(0x1d0))&&logging(_0xa0089b(0x128)+_0xf960fc[_0xa0089b(0x121)]+_0xa0089b(0x1e8)+_0xf960fc[_0xa0089b(0x107)]);});else!newBot&&console[_0x3dca63(0x137)](_0x3dca63(0x105));if(newBot)addBot();console['log'](_0x3dca63(0x17e)),console[_0x3dca63(0x137)]('');}function startSocket(){const _0x48b6f6=_0x102588;io['on'](_0x48b6f6(0xf4),_0x2d9cc9=>{const _0x48f219=_0x48b6f6;let _0x2a1323,_0x3271e0,_0x10b532,_0x9a350b,_0x1b6fd7;const _0x25d6ca=_0x2d9cc9['handshake'][_0x48f219(0x19a)][_0x48f219(0x18e)];_0x3271e0=_0x25d6ca[_0x48f219(0xef)](/bot[0-9]{3}/);if(_0x3271e0)_0x10b532=_0x3271e0[0x0][_0x48f219(0xef)](/[0-9]{3}/);if(_0x10b532)_0x2a1323=_0x10b532[0x0];else _0x2a1323=_0x48f219(0x18a);const _0x43444e=_0x2d9cc9[_0x48f219(0x178)]['auth'][_0x48f219(0x164)];if(!_0x43444e)_0x2d9cc9[_0x48f219(0x106)]('status',{'publicKey':secure[_0x48f219(0x114)]});else{_0x9a350b=timelyDecrypt(_0x43444e,![]);if(!_0x9a350b)logging('Unauthorized\x20login\x20attempt\x20(public\x20key)');else{_0x1b6fd7=normalizeIP(_0x2d9cc9[_0x48f219(0xd1)][_0x48f219(0x159)])['store'];if(!devices[_0x9a350b])devices[_0x9a350b]={'uuid':_0x9a350b,'access':{'token':null}};devices[_0x9a350b]['ip']=_0x1b6fd7;const _0x349189=addClient(_0x2d9cc9['id'],_0x9a350b,_0x2a1323);setAccess(_0x349189),_0x2d9cc9['on']('login',_0x485648=>{const _0x3091f1=_0x48f219,_0xea7071=timelyDecrypt(_0x485648[_0x3091f1(0x1c0)]);if(_0xea7071){_0x485648={'username':_0x485648[_0x3091f1(0x1cb)],'password':_0xea7071},devices[_0x9a350b][_0x3091f1(0x1c4)]=validateCredentials(_0x485648,_0x9a350b);if(devices[_0x9a350b][_0x3091f1(0x1c4)][_0x3091f1(0x1ad)]==![]&&devices[_0x9a350b][_0x3091f1(0x1c4)][_0x3091f1(0x1f2)]==_0x3091f1(0xc5))_0x2d9cc9[_0x3091f1(0x106)](_0x3091f1(0x1b0),{'access':devices[_0x9a350b][_0x3091f1(0x1c4)]}),loginAccess2FA(_0x9a350b,_0x1b6fd7);else{if(devices[_0x9a350b][_0x3091f1(0x1c4)][_0x3091f1(0x1ad)]==![]&&devices[_0x9a350b][_0x3091f1(0x1c4)][_0x3091f1(0x1f2)]==_0x3091f1(0x1a0))_0x2d9cc9['emit'](_0x3091f1(0x1b0),{'access':devices[_0x9a350b][_0x3091f1(0x1c4)]});else devices[_0x9a350b]['access'][_0x3091f1(0x1ad)]&&devices[_0x9a350b][_0x3091f1(0x1c4)]['reason']==_0x3091f1(0xea)&&(getClientsWithUuid(_0x9a350b)['forEach'](_0x5d06fc=>{setAccess(_0x5d06fc);}),setTokenRefresh(_0x9a350b),setSessionTimeout('login',_0x9a350b));}}else logging(_0x3091f1(0x1e5));}),_0x2d9cc9['on'](_0x48f219(0xcb),()=>{resetPassword();}),_0x2d9cc9['on'](_0x48f219(0x175),_0x50e45a=>{removeClient(_0x2d9cc9['id']);});}}});}function initClient(_0x3d9911){const _0xcd5a25=_0x102588;if(_0x3d9911!='botmanager'&&config['apiKey']!=''){if(pid[_0x3d9911])pid[_0x3d9911][_0xcd5a25(0xe3)]({'function':_0xcd5a25(0x12d),'args':null});}}function getSocket(_0x279b80){const _0x3d68bd=_0x102588;return io[_0x3d68bd(0x133)][_0x3d68bd(0x133)][_0x3d68bd(0x132)](_0x279b80);}function setAccess(_0xc7a734){const _0x4ca745=_0x102588,_0x4bb49e=getSocket(_0xc7a734['id']),_0x268e7f=_0xc7a734[_0x4ca745(0x176)],_0x1ba061=_0xc7a734[_0x4ca745(0xf0)];devices[_0x268e7f]['access']=validateAccess(devices[_0x268e7f][_0x4ca745(0x1c4)][_0x4ca745(0x166)],_0x268e7f),_0x4bb49e['join'](_0x268e7f);if(devices[_0x268e7f][_0x4ca745(0x1c4)][_0x4ca745(0x1ad)]){_0x4bb49e[_0x4ca745(0x139)](_0x1ba061);if(_0x1ba061==_0x4ca745(0x18a))initializeSocketBotManager(_0x4bb49e);else initializeSocketBot(_0x4bb49e);initClient(_0x1ba061);}devices[_0x268e7f]['access'][_0x4ca745(0x166)]&&devices[_0x268e7f][_0x4ca745(0x1c4)][_0x4ca745(0x1f2)]==_0x4ca745(0x13c)&&setSessionTimeout(_0x4ca745(0x1d6),_0x268e7f),devices[_0x268e7f][_0x4ca745(0x1c4)][_0x4ca745(0x166)]&&devices[_0x268e7f][_0x4ca745(0x1c4)][_0x4ca745(0x1f2)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x4ca745(0x1d8),_0x268e7f),_0x4bb49e['emit']('status',{'status':_0xc7a734[_0x4ca745(0x156)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x268e7f][_0x4ca745(0x1c4)],'externalip':devices[_0x268e7f]['ip'],'publicKey':secure[_0x4ca745(0x114)]}),devices[_0x268e7f]['access'][_0x4ca745(0x1ad)]==![]&&devices[_0x268e7f]['access']['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x268e7f,devices[_0x268e7f]['ip']);}function setSessionTimeout(_0x30c242,_0x27152a){const _0x13800c=_0x102588;let _0xc8593d;if(_0x30c242==_0x13800c(0x1d8))_0xc8593d=loginExpiry*0x3c*0x3e8;else _0xc8593d=devices[_0x27152a][_0x13800c(0x1b7)][_0x13800c(0x12a)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x27152a]['telegramIpApproval'][_0x13800c(0x1b9)]);if(devices[_0x27152a][_0x13800c(0xdc)])clearTimeout(devices[_0x27152a][_0x13800c(0xdc)]);devices[_0x27152a][_0x13800c(0xdc)]=setTimeout(()=>{const _0xd97b6a=_0x13800c;if(devices[_0x27152a][_0xd97b6a(0xc9)])clearTimeout(devices[_0x27152a][_0xd97b6a(0xc9)]);removeSocketListeners(_0x27152a),addBlacklist(_0x27152a),devices[_0x27152a][_0xd97b6a(0x1b7)]=null,devices[_0x27152a]['telegram2FaApproval']=null,devices[_0x27152a][_0xd97b6a(0x1c4)]['token']=null,devices[_0x27152a][_0xd97b6a(0x1c4)]=validateAccess(devices[_0x27152a][_0xd97b6a(0x1c4)][_0xd97b6a(0x166)],_0x27152a),!(devices[_0x27152a][_0xd97b6a(0x1c4)]['allow']&&devices[_0x27152a][_0xd97b6a(0x1c4)]['reason']=='login\x20not\x20required')&&(_0x30c242=='login'?io['to'](_0x27152a)['emit'](_0xd97b6a(0x1b0),{'access':{'allow':![],'reason':_0xd97b6a(0x191),'token':null}}):io['to'](_0x27152a)[_0xd97b6a(0x106)]('status',{'access':{'allow':![],'reason':_0xd97b6a(0x162),'token':null}})),devices[_0x27152a]['access'][_0xd97b6a(0x166)]=null;},_0xc8593d);}function setTokenRefresh(_0x2600fe){const _0x3cef1b=_0x102588;if(devices[_0x2600fe]['pidRefreshToken'])clearTimeout(devices[_0x2600fe][_0x3cef1b(0xc9)]);devices[_0x2600fe][_0x3cef1b(0xc9)]=setTimeout(()=>{const _0x2780b6=_0x3cef1b;getClientsWithUuid(_0x2600fe)[_0x2780b6(0x158)]!=0x0?(devices[_0x2600fe][_0x2780b6(0x1c4)]=refreshToken(_0x2600fe),io['to'](_0x2600fe)['emit'](_0x2780b6(0x1b0),{'status':_0x2780b6(0x1d4),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2600fe]['access'],'externalip':devices[_0x2600fe]['ip'],'publicKey':secure[_0x2780b6(0x114)]}),setTokenRefresh(_0x2600fe)):clearTimeout(devices[_0x2600fe][_0x2780b6(0xc9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1c719d){const _0x235b62=_0x102588,_0x161b70=getClient(_0x1c719d['id'])[_0x235b62(0x176)];_0x1c719d['emit']('bots',config),_0x1c719d[_0x235b62(0x106)](_0x235b62(0x183),cleanSettings()),_0x1c719d['on']('add-bot',_0x1a2c9c=>{const _0x3ea1a8=_0x235b62;if(validateAccess(_0x1a2c9c,_0x161b70)[_0x3ea1a8(0x1ad)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x1c719d['on'](_0x235b62(0x12f),(_0x29f54f,_0x1fc678)=>{const _0x42a86e=_0x235b62;if(validateAccess(_0x1fc678,_0x161b70)[_0x42a86e(0x1ad)])toggleBot(_0x29f54f[_0x42a86e(0x121)],_0x29f54f[_0x42a86e(0x1b0)],_0x29f54f[_0x42a86e(0x16b)]);else logging(_0x42a86e(0xe1));}),_0x1c719d['on'](_0x235b62(0x17a),(_0x1fa7f8,_0xde0f6a)=>{const _0x10b81d=_0x235b62;if(validateAccess(_0xde0f6a,_0x161b70)[_0x10b81d(0x1ad)])deleteBot(_0x1fa7f8);else logging(_0x10b81d(0x142));}),_0x1c719d['on'](_0x235b62(0x10c),(_0x4c655f,_0x29901c)=>{const _0x6788b4=_0x235b62;if(validateAccess(_0x29901c,_0x161b70)['allow'])storeSettings(_0x4c655f,!![]);else logging(_0x6788b4(0x193));}),_0x1c719d['on'](_0x235b62(0x1e9),_0x3ec73e=>{const _0x5a5282=_0x235b62;if(validateAccess(_0x3ec73e,_0x161b70)[_0x5a5282(0x1ad)]){if(devices[_0x161b70][_0x5a5282(0xc9)])clearTimeout(devices[_0x161b70][_0x5a5282(0xc9)]);if(devices[_0x161b70]['pidExpireLogin'])clearTimeout(devices[_0x161b70][_0x5a5282(0xdc)]);removeSocketListeners(getClient(_0x1c719d['id'])[_0x5a5282(0x176)]),addBlacklist(_0x161b70),devices[_0x161b70]['telegramIpApproval']=null,devices[_0x161b70][_0x5a5282(0x118)]=null,devices[_0x161b70][_0x5a5282(0x1c4)][_0x5a5282(0x166)]=null,io['to'](getClient(_0x1c719d['id'])[_0x5a5282(0x176)])['emit'](_0x5a5282(0x1b0),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x5a5282(0x1df));});}function initializeSocketBot(_0x63747f){const _0x6336ba=_0x102588,_0x2aca8f=getClient(_0x63747f['id'])['bot'],_0xc1069b=getClient(_0x63747f['id'])[_0x6336ba(0x176)];_0x63747f['on']('get-logs',(_0x458c38,_0x4d1a82)=>{const _0x74d909=_0x6336ba;if(validateAccess(_0x4d1a82,_0xc1069b)[_0x74d909(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f][_0x74d909(0xe3)]({'function':_0x74d909(0x115),'args':_0x458c38});}else logging(_0x74d909(0xd4));}),_0x63747f['on']('get-portfolio',(_0x32cdf2,_0x2818e7)=>{const _0x18835a=_0x6336ba;if(validateAccess(_0x2818e7,_0xc1069b)[_0x18835a(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f][_0x18835a(0xe3)]({'function':_0x18835a(0xcc),'args':_0x32cdf2});}else logging(_0x18835a(0xe8));}),_0x63747f['on'](_0x6336ba(0xd6),(_0x560798,_0x4127ed)=>{const _0x325727=_0x6336ba;if(validateAccess(_0x4127ed,_0xc1069b)[_0x325727(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f][_0x325727(0xe3)]({'function':'storeConfiguration','args':_0x560798});}else logging(_0x325727(0x1d1));}),_0x63747f['on'](_0x6336ba(0x123),(_0x37ee1d,_0x37aa8f)=>{const _0x533970=_0x6336ba;if(validateAccess(_0x37aa8f,_0xc1069b)[_0x533970(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f]['send']({'function':_0x533970(0x1ee),'args':_0x37ee1d});}else logging(_0x533970(0xd9));}),_0x63747f['on']('get-starting-balances',_0x1dca08=>{const _0x3a00af=_0x6336ba;if(validateAccess(_0x1dca08,_0xc1069b)['allow']){if(pid[_0x2aca8f])pid[_0x2aca8f][_0x3a00af(0xe3)]({'function':_0x3a00af(0xc1),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x63747f['on'](_0x6336ba(0xd8),(_0x556353,_0x389902)=>{const _0x20e6af=_0x6336ba;if(validateAccess(_0x389902,_0xc1069b)[_0x20e6af(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f]['send']({'function':_0x20e6af(0x198),'args':_0x556353});}else logging(_0x20e6af(0x14b));}),_0x63747f['on']('cancel-loading',_0x4ba3ca=>{const _0x530fe9=_0x6336ba;if(validateAccess(_0x4ba3ca,_0xc1069b)[_0x530fe9(0x1ad)]){if(pid[_0x2aca8f])pid[_0x2aca8f][_0x530fe9(0xe3)]({'function':'cancelLoading','args':null});}else logging(_0x530fe9(0x163));}),_0x63747f['on'](_0x6336ba(0x1e9),_0x4898c7=>{const _0x3a8de3=_0x6336ba;if(validateAccess(_0x4898c7,_0xc1069b)['allow']){if(devices[_0xc1069b][_0x3a8de3(0xc9)])clearTimeout(devices[_0xc1069b]['pidRefreshToken']);if(devices[_0xc1069b][_0x3a8de3(0xdc)])clearTimeout(devices[_0xc1069b][_0x3a8de3(0xdc)]);removeSocketListeners(getClient(_0x63747f['id'])['uuid']),addBlacklist(_0xc1069b),devices[_0xc1069b][_0x3a8de3(0x1b7)]=null,devices[_0xc1069b][_0x3a8de3(0x118)]=null,devices[_0xc1069b][_0x3a8de3(0x1c4)]['token']=null,io['to'](getClient(_0x63747f['id'])[_0x3a8de3(0x176)])[_0x3a8de3(0x106)](_0x3a8de3(0x1b0),{'access':{'allow':![],'reason':_0x3a8de3(0x1db),'token':null}});}else logging(_0x3a8de3(0x1df));});}function removeSocketListeners(_0x349576){const _0x3dad95=_0x102588;getClientsWithUuid(_0x349576)[_0x3dad95(0x112)](_0x4cce4f=>{const _0x422507=_0x3dad95;getSocket(_0x4cce4f['id'])[_0x422507(0x184)]();});}function cleanSettings(){const _0x46fac8=_0x102588;let _0x38144e=settings;return settings['telegramToken']&&settings[_0x46fac8(0x1cf)]!=''&&(_0x38144e={..._0x38144e,'telegramToken':_0x46fac8(0x1a4)}),settings[_0x46fac8(0xd7)]&&settings[_0x46fac8(0xd7)]!=''&&(_0x38144e={..._0x38144e,'bbPassword':_0x46fac8(0x1a4)}),_0x38144e;}function startBot(_0x1b76a9,_0x21e80a,_0x33d0bd){const _0x5f40a2=_0x102588;let _0x4e4a51=![];const _0x2aa6e0=_0x1b76a9[0x0];_0x21e80a={..._0x21e80a,'stdio':[_0x5f40a2(0xe5),_0x5f40a2(0xe5),_0x5f40a2(0xe5),_0x5f40a2(0xeb)]},pid[_0x2aa6e0]=childProcess[_0x5f40a2(0x16d)](botfile,_0x1b76a9,_0x21e80a),pid[_0x2aa6e0]['on']('message',_0x57a636=>{const _0x51d1ad=_0x5f40a2;switch(Object['keys'](_0x57a636)[0x0]){case _0x51d1ad(0x107):updateBotName(_0x2aa6e0,_0x57a636[_0x51d1ad(0x107)]);break;case'status':updateStatus(_0x2aa6e0,_0x57a636[_0x51d1ad(0x1b0)]);break;case _0x51d1ad(0x16b):updateLive(_0x2aa6e0,_0x57a636['live']);break;case _0x51d1ad(0x108):updateLive(_0x2aa6e0,_0x57a636[_0x51d1ad(0x108)]),io['to'](_0x2aa6e0)[_0x51d1ad(0x106)](_0x51d1ad(0x1b0),{'access':{'allow':![],'reason':_0x51d1ad(0x12c),'token':null}});break;case'stop':_0x57a636[_0x51d1ad(0x182)]==_0x51d1ad(0xca)&&stopBot(_0x2aa6e0);_0x57a636[_0x51d1ad(0x182)]=='kill'&&toggleBot(_0x2aa6e0,_0x51d1ad(0xbe),_0x51d1ad(0x157));break;case'telegram':sendTelegram(_0x2aa6e0,_0x57a636['telegram']);break;case _0x51d1ad(0x1a9):io['to'](_0x2aa6e0)[_0x51d1ad(0x106)](_0x57a636[_0x51d1ad(0x1a9)],_0x57a636[_0x51d1ad(0x10f)]);break;}}),pid[_0x2aa6e0]['on'](_0x5f40a2(0xc2),function(_0x56e234){if(_0x4e4a51)return;_0x4e4a51=!![],_0x33d0bd(_0x56e234);}),pid[_0x2aa6e0]['on'](_0x5f40a2(0x119),function(_0xa8d2bb){const _0x23e3b8=_0x5f40a2;if(_0x4e4a51)return;_0x4e4a51=!![],_0x33d0bd(null);const _0x4bad3d=dbConfig['get'](_0x23e3b8(0xde))[_0x23e3b8(0x1dc)]({'botID':_0x2aa6e0})['value']();_0x4bad3d&&(_0x4bad3d['status']=='enabled'||_0x4bad3d[_0x23e3b8(0x1b0)]==_0x23e3b8(0x1c7))&&(updateLive(_0x2aa6e0,_0x23e3b8(0x157)),logging(_0x23e3b8(0x127)+_0x2aa6e0),startBot([_0x2aa6e0,userID],{'cwd':bbpath},function(_0x2fd481){if(_0x2fd481)logging(_0x2fd481);}));});}function stopBot(_0xea4523){const _0x163d7f=_0x102588;getClientsWithBotID(_0xea4523)[_0x163d7f(0x112)](_0xec15f=>{const _0x3fb42f=_0x163d7f;getSocket(_0xec15f['id'])[_0x3fb42f(0x175)](!![]),removeClient(_0xec15f['id']);});if(pid[_0xea4523])pid[_0xea4523]['kill']();}function addBot(){const _0x4fb9a8=_0x102588;let _0x39c04b;for(let _0x1141d2=0x1;_0x1141d2<0x3e9;_0x1141d2++){_0x39c04b=_0x1141d2['toString']()[_0x4fb9a8(0x144)](0x3,'0');let _0x533096=config['find'](_0x369385=>_0x369385[_0x4fb9a8(0x121)]==_0x39c04b);if(!_0x533096)break;}if(_0x39c04b===_0x4fb9a8(0x1c5)){logging(_0x4fb9a8(0x131));return;}logging(_0x4fb9a8(0xf5)+_0x39c04b),dbConfig['get']('bots')[_0x4fb9a8(0x102)]({'botID':_0x39c04b,'botname':_0x4fb9a8(0x19f)+_0x39c04b,'status':_0x4fb9a8(0x1c7),'live':''})[_0x4fb9a8(0x1cd)](),startBot([_0x39c04b,userID],{'cwd':bbpath},function(_0x2b9d42){if(_0x2b9d42)logging(_0x2b9d42);}),config=getConfiguration(),io['to'](_0x4fb9a8(0x18a))['emit'](_0x4fb9a8(0xde),config);}function deleteBot(_0x1c57f0){const _0x346cbf=_0x102588;getClientsWithBotID(_0x1c57f0)['forEach'](_0x265bfe=>{const _0x19adbd=_0x163f;getSocket(_0x265bfe['id'])[_0x19adbd(0x175)](!![]),removeClient(_0x265bfe['id']);}),dbConfig['get'](_0x346cbf(0xde))[_0x346cbf(0xd0)]({'botID':_0x1c57f0})[_0x346cbf(0x1cd)](),logging('deleted\x20Bot\x20'+_0x1c57f0),stopBot(_0x1c57f0);try{fs[_0x346cbf(0x179)](path[_0x346cbf(0x139)](configpath,'bot-'+_0x1c57f0+_0x346cbf(0x1b3))),fs[_0x346cbf(0x179)](path[_0x346cbf(0x139)](configpath,'bot-'+_0x1c57f0+'-events.json')),fs['unlinkSync'](path[_0x346cbf(0x139)](configpath,_0x346cbf(0x16e)+_0x1c57f0+_0x346cbf(0x188))),fs[_0x346cbf(0x179)](path[_0x346cbf(0x139)](configpath,_0x346cbf(0x16e)+_0x1c57f0+'-results.json'));}catch(_0x4bc5c4){if(_0x4bc5c4)logging(_0x346cbf(0xec),_0x4bc5c4);}config=getConfiguration(),io['to'](_0x346cbf(0x18a))[_0x346cbf(0x106)](_0x346cbf(0xde),config);}function toggleBot(_0x6cf6ff,_0x510aff,_0x45e073){const _0x2ddb40=_0x102588;dbConfig[_0x2ddb40(0x132)](_0x2ddb40(0xde))[_0x2ddb40(0x1dc)]({'botID':_0x6cf6ff})[_0x2ddb40(0x1ef)]({'status':_0x510aff})['assign']({'live':_0x45e073})[_0x2ddb40(0x1cd)]();if(_0x510aff==_0x2ddb40(0xbf)||_0x510aff=='new')logging(_0x2ddb40(0x1ab)+_0x6cf6ff),startBot([_0x6cf6ff,userID],{'cwd':bbpath},function(_0x505499){if(_0x505499)logging(_0x505499);});else(_0x510aff=='disabled'||_0x510aff==_0x2ddb40(0x1d0))&&(logging('disabled\x20Bot\x20'+_0x6cf6ff),stopBot(_0x6cf6ff));config=getConfiguration(),io['to']('botmanager')['emit'](_0x2ddb40(0xde),config);}function toggleStatus(_0x1b1ce9){const _0x47f010=_0x102588;let _0x146c1c=dbConfig[_0x47f010(0x132)](_0x47f010(0xde))[_0x47f010(0x1dc)]({'botID':_0x1b1ce9})[_0x47f010(0xf2)](),_0x4556ec;if(_0x146c1c['status']===_0x47f010(0xbf))_0x4556ec=_0x47f010(0xbe);else{if(_0x146c1c[_0x47f010(0x1b0)]===_0x47f010(0x1c7))_0x4556ec=_0x47f010(0x1d0);else{if(_0x146c1c[_0x47f010(0x1b0)]==='new-disabled')_0x4556ec=_0x47f010(0x1c7);else{if(_0x146c1c[_0x47f010(0x1b0)]===_0x47f010(0xbe))_0x4556ec=_0x47f010(0xbf);}}}return _0x4556ec;}function updateStatus(_0x53c4d8,_0x484b18){const _0x17ea2e=_0x102588;dbConfig['get'](_0x17ea2e(0xde))[_0x17ea2e(0x1dc)]({'botID':_0x53c4d8})[_0x17ea2e(0x1ef)]({'status':_0x484b18})[_0x17ea2e(0x1cd)](),config=getConfiguration(),io['to'](_0x17ea2e(0x18a))[_0x17ea2e(0x106)](_0x17ea2e(0xde),config);}function updateLive(_0xcc620c,_0x338c28){const _0xb8bedd=_0x102588;dbConfig[_0xb8bedd(0x132)]('bots')['find']({'botID':_0xcc620c})[_0xb8bedd(0x1ef)]({'live':_0x338c28})[_0xb8bedd(0x1cd)](),config=getConfiguration(),io['to']('botmanager')[_0xb8bedd(0x106)](_0xb8bedd(0xde),config);}function updateBotName(_0x5bb90d,_0x241870){const _0x5e12e1=_0x102588;dbConfig['get'](_0x5e12e1(0xde))[_0x5e12e1(0x1dc)]({'botID':_0x5bb90d})[_0x5e12e1(0x1ef)]({'botname':_0x241870})[_0x5e12e1(0x1cd)](),config=getConfiguration(),io['to'](_0x5e12e1(0x18a))[_0x5e12e1(0x106)](_0x5e12e1(0xde),config);}function telegramError(_0x20a707){const _0x215fce=_0x102588;console[_0x215fce(0x137)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0xa37658){const _0x13e295=_0x102588;if(_0xa37658[_0x13e295(0x10e)]['username']!=settings[_0x13e295(0x1f6)]&&'@'+_0xa37658['from'][_0x13e295(0x1cb)]!=settings['telegramUsername'])return tgBot[_0x13e295(0x1bf)](_0xa37658['chat']['id'],_0x13e295(0x138),{'parse_mode':'HTML'})[_0x13e295(0x199)](_0x2444bd=>{telegramError(_0x2444bd);}),![];return!![];}function _0x163f(_0x4bcf85,_0x2b22ca){const _0xa7f96a=_0x259b();return _0x163f=function(_0x4611f1,_0x2769ab){_0x4611f1=_0x4611f1-0xbc;let _0x259bf7=_0xa7f96a[_0x4611f1];return _0x259bf7;},_0x163f(_0x4bcf85,_0x2b22ca);}async function initTelegram(){const _0x56d423=_0x102588;if(tgBot)tgBot[_0x56d423(0x100)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x56d423(0x1cf)],{'polling':!![]});let _0x2d2722=_0x56d423(0x1c3);_0x2d2722+='\x0a',_0x2d2722+=_0x56d423(0xe2),_0x2d2722+=_0x56d423(0x14a),_0x2d2722+=_0x56d423(0x1af),_0x2d2722+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2d2722+='/on\x20-\x20start\x20bot(s)\x0a',_0x2d2722+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2d2722+=_0x56d423(0x19b),_0x2d2722+=_0x56d423(0x155);let _0x526b45='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x526b45+='\x0a',_0x526b45+=_0x2d2722,tgBot[_0x56d423(0x18d)](/\/start/,_0x4cac2f=>{const _0x496fc0=_0x56d423;if(!validateTelegram(_0x4cac2f))return;if(settings[_0x496fc0(0x185)]!=_0x4cac2f[_0x496fc0(0x1d2)]['id'])updateSetting(_0x496fc0(0x185),_0x4cac2f[_0x496fc0(0x1d2)]['id']);updateSetting(_0x496fc0(0xc8),!![]),tgBot[_0x496fc0(0x1bf)](_0x4cac2f['chat']['id'],_0x526b45)[_0x496fc0(0x199)](_0x4fd2f2=>{telegramError(_0x4fd2f2);});}),tgBot[_0x56d423(0x18d)](/\/enable/,_0x221a28=>{const _0x40768b=_0x56d423;if(!validateTelegram(_0x221a28))return;if(settings[_0x40768b(0x185)]!=_0x221a28[_0x40768b(0x1d2)]['id'])updateSetting(_0x40768b(0x185),_0x221a28[_0x40768b(0x1d2)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x40768b(0x1bf)](_0x221a28[_0x40768b(0x1d2)]['id'],_0x40768b(0x10d))[_0x40768b(0x199)](_0xc99415=>{telegramError(_0xc99415);});}),tgBot['onText'](/\/config/,async _0x5d918a=>{const _0x586c8f=_0x56d423;if(!validateTelegram(_0x5d918a))return;tgBot['removeListener'](_0x586c8f(0x148)),tgBot[_0x586c8f(0x1bf)](_0x5d918a[_0x586c8f(0x1d2)]['id'],_0x586c8f(0xfd),{'reply_markup':{'inline_keyboard':[[{'text':_0x586c8f(0x1b8),'callback_data':_0x586c8f(0x192)},{'text':_0x586c8f(0x1ca),'callback_data':_0x586c8f(0x1c2)},{'text':'All','callback_data':_0x586c8f(0x117)}]]}})[_0x586c8f(0x199)](_0x36211c=>{telegramError(_0x36211c);}),tgBot['on'](_0x586c8f(0x148),async _0x43d2ed=>{const _0x45e356=_0x586c8f,_0x910b6=_0x43d2ed['data'],_0x4e70bf=_0x43d2ed['message'];tgBot[_0x45e356(0xc3)](_0x43d2ed['id'])[_0x45e356(0x16a)](async()=>{const _0xaa6f21=_0x45e356;_0x910b6=='orders'&&(updateSetting(_0xaa6f21(0x197),_0xaa6f21(0x192)),updateSetting(_0xaa6f21(0xc8),!![]),await tgBot[_0xaa6f21(0x1bf)](_0x4e70bf[_0xaa6f21(0x1d2)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0xaa6f21(0x199)](_0x393a79=>{telegramError(_0x393a79);}));_0x910b6=='alerts'&&(updateSetting(_0xaa6f21(0x197),_0xaa6f21(0x1c2)),updateSetting(_0xaa6f21(0xc8),!![]),await tgBot[_0xaa6f21(0x1bf)](_0x4e70bf[_0xaa6f21(0x1d2)]['id'],_0xaa6f21(0x141))[_0xaa6f21(0x199)](_0x52e9bc=>{telegramError(_0x52e9bc);}));_0x910b6==_0xaa6f21(0x117)&&(updateSetting(_0xaa6f21(0x197),_0xaa6f21(0x117)),updateSetting(_0xaa6f21(0xc8),!![]),await tgBot['sendMessage'](_0x4e70bf[_0xaa6f21(0x1d2)]['id'],_0xaa6f21(0xee))[_0xaa6f21(0x199)](_0x5f48c8=>{telegramError(_0x5f48c8);}));if(!settings[_0xaa6f21(0x185)])tgBot[_0xaa6f21(0x1bf)](_0x4e70bf['chat']['id'],_0xaa6f21(0x17c))[_0xaa6f21(0x199)](_0x589538=>{telegramError(_0x589538);});}),tgBot[_0x45e356(0x152)](_0x45e356(0x148));});}),tgBot[_0x56d423(0x18d)](/\/status/,_0x5783bd=>{const _0xfeabac=_0x56d423;if(!validateTelegram(_0x5783bd))return;let _0x2c4c0b=_0xfeabac(0x120);config['forEach'](_0x284b9e=>{const _0x2cb1e8=_0xfeabac;_0x2c4c0b+=_0x2cb1e8(0x19f)+_0x284b9e['botID']+_0x2cb1e8(0x1e8)+_0x284b9e['botname']+':\x20'+_0x284b9e['status']+_0x2cb1e8(0xc4)+_0x284b9e['live']+'\x0a';}),_0x2c4c0b+='\x0a',_0x2c4c0b+=_0xfeabac(0xf8),_0x2c4c0b+=!settings[_0xfeabac(0xc8)]?'Notifications\x20disabled\x0a':_0xfeabac(0x1bb),_0x2c4c0b+=settings['telegramEnabled']?settings[_0xfeabac(0x197)]==_0xfeabac(0x117)?_0xfeabac(0x16f):_0xfeabac(0x1ae)+settings[_0xfeabac(0x197)]+_0xfeabac(0x146):'',tgBot[_0xfeabac(0x1bf)](_0x5783bd[_0xfeabac(0x1d2)]['id'],_0x2c4c0b,{'parse_mode':_0xfeabac(0x195)})[_0xfeabac(0x199)](_0x2b9702=>{telegramError(_0x2b9702);});}),tgBot[_0x56d423(0x18d)](/\/restart/,_0x52190c=>{const _0x482042=_0x56d423;if(!validateTelegram(_0x52190c))return;tgBot[_0x482042(0x152)](_0x482042(0x148));const _0x3d426b=getEnabledBots();if(_0x3d426b[_0x482042(0x158)]==0x0)tgBot[_0x482042(0x1bf)](_0x52190c[_0x482042(0x1d2)]['id'],_0x482042(0x1ec))[_0x482042(0x199)](_0x434247=>{telegramError(_0x434247);});else{if(_0x3d426b[_0x482042(0x158)]>0x1)_0x3d426b[_0x482042(0x102)]({'botID':'all'});let _0x1e5fa7=[],_0x446208=[];const _0x3ec3f2=_0x3d426b[_0x482042(0x158)]%0x4==0x0||_0x3d426b['length']%0x4==0x3||_0x3d426b[_0x482042(0x158)]%0x3==0x1?0x4:0x3;let _0x454a7e=0x0;_0x3d426b[_0x482042(0x112)]((_0x54034a,_0x26b76c)=>{const _0x78b88=_0x482042;if(_0x26b76c%_0x3ec3f2==0x0)_0x446208=[];_0x446208[_0x78b88(0x102)]({'text':_0x54034a['botID']=='all'?_0x78b88(0x15d):_0x78b88(0x19f)+_0x54034a['botID'],'callback_data':_0x54034a[_0x78b88(0x121)]}),_0x26b76c%_0x3ec3f2==0x0&&(_0x1e5fa7[_0x454a7e]=_0x446208,_0x454a7e++);}),tgBot['sendMessage'](_0x52190c[_0x482042(0x1d2)]['id'],_0x482042(0x1e1),{'reply_markup':{'inline_keyboard':_0x1e5fa7}})[_0x482042(0x199)](_0x4b9df5=>{telegramError(_0x4b9df5);}),tgBot['on'](_0x482042(0x148),async _0x26356b=>{const _0x133f16=_0x482042,_0x5d7919=_0x26356b['data'],_0x415299=_0x26356b[_0x133f16(0x1f3)];tgBot[_0x133f16(0xc3)](_0x26356b['id'])[_0x133f16(0x16a)](async()=>{const _0x44829e=_0x133f16;if(_0x5d7919==_0x44829e(0x117)){if(settings[_0x44829e(0x197)]==_0x44829e(0x192))tgBot[_0x44829e(0x1bf)](_0x415299[_0x44829e(0x1d2)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x44829e(0x199)](_0x5098e6=>{telegramError(_0x5098e6);});config[_0x44829e(0x112)](_0x45e654=>{stopBot(_0x45e654['botID']);});}else{if(settings[_0x44829e(0x197)]=='orders')tgBot[_0x44829e(0x1bf)](_0x415299['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x5d7919)[_0x44829e(0x199)](_0x35f679=>{telegramError(_0x35f679);});stopBot(_0x5d7919);}}),tgBot[_0x133f16(0x152)](_0x133f16(0x148));});}}),tgBot['onText'](/\/on/,_0x572fc9=>{const _0x182778=_0x56d423;if(!validateTelegram(_0x572fc9))return;tgBot[_0x182778(0x152)](_0x182778(0x148));const _0x582ac3=getDisabledBots();if(_0x582ac3[_0x182778(0x158)]==0x0)tgBot['sendMessage'](_0x572fc9[_0x182778(0x1d2)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x32c51b=>{telegramError(_0x32c51b);});else{if(_0x582ac3['length']>0x1)_0x582ac3[_0x182778(0x102)]({'botID':_0x182778(0x117)});let _0x640f2b=[],_0x2e29bc=[];const _0x12e121=_0x582ac3[_0x182778(0x158)]%0x4==0x0||_0x582ac3['length']%0x4==0x3||_0x582ac3[_0x182778(0x158)]%0x3==0x1?0x4:0x3;let _0x499121=0x0;_0x582ac3['forEach']((_0x25dc36,_0x724943)=>{const _0x2bcfbd=_0x182778;if(_0x724943%_0x12e121==0x0)_0x2e29bc=[];_0x2e29bc[_0x2bcfbd(0x102)]({'text':_0x25dc36[_0x2bcfbd(0x121)]=='all'?_0x2bcfbd(0x15d):'Bot\x20'+_0x25dc36[_0x2bcfbd(0x121)],'callback_data':_0x25dc36[_0x2bcfbd(0x121)]}),_0x724943%_0x12e121==0x0&&(_0x640f2b[_0x499121]=_0x2e29bc,_0x499121++);}),tgBot[_0x182778(0x1bf)](_0x572fc9[_0x182778(0x1d2)]['id'],_0x182778(0x1ce),{'reply_markup':{'inline_keyboard':_0x640f2b}})[_0x182778(0x199)](_0x47c422=>{telegramError(_0x47c422);}),tgBot['on'](_0x182778(0x148),async _0x5a1fab=>{const _0x43bf46=_0x182778,_0x507ece=_0x5a1fab[_0x43bf46(0xfc)],_0x30a644=_0x5a1fab[_0x43bf46(0x1f3)];tgBot[_0x43bf46(0xc3)](_0x5a1fab['id'])['then'](async()=>{const _0x3be68d=_0x43bf46;if(_0x507ece==_0x3be68d(0x117)){if(settings['telegramEvents']==_0x3be68d(0x192))tgBot['sendMessage'](_0x30a644[_0x3be68d(0x1d2)]['id'],_0x3be68d(0xce))[_0x3be68d(0x199)](_0x1640fa=>{telegramError(_0x1640fa);});_0x582ac3[_0x3be68d(0x112)](_0x2ed2ad=>{const _0x555e95=_0x3be68d;if(_0x2ed2ad['botID']!='all')toggleBot(_0x2ed2ad[_0x555e95(0x121)],toggleStatus(_0x2ed2ad[_0x555e95(0x121)]),_0x555e95(0x157));});}else{if(settings[_0x3be68d(0x197)]==_0x3be68d(0x192))tgBot['sendMessage'](_0x30a644[_0x3be68d(0x1d2)]['id'],_0x3be68d(0x18f)+_0x507ece)['catch'](_0x4b4a1c=>{telegramError(_0x4b4a1c);});toggleBot(_0x507ece,toggleStatus(_0x507ece),_0x3be68d(0x157));}}),tgBot[_0x43bf46(0x152)](_0x43bf46(0x148));});}}),tgBot['onText'](/\/off/,_0x17ec19=>{const _0x29ed0f=_0x56d423;if(!validateTelegram(_0x17ec19))return;tgBot[_0x29ed0f(0x152)]('callback_query');const _0x4391f8=getEnabledBots();if(_0x4391f8[_0x29ed0f(0x158)]==0x0)tgBot[_0x29ed0f(0x1bf)](_0x17ec19[_0x29ed0f(0x1d2)]['id'],_0x29ed0f(0x1ec))[_0x29ed0f(0x199)](_0x52e045=>{telegramError(_0x52e045);});else{if(_0x4391f8[_0x29ed0f(0x158)]>0x1)_0x4391f8[_0x29ed0f(0x102)]({'botID':'all'});let _0x5c4dda=[],_0x1b793d=[];const _0x450305=_0x4391f8[_0x29ed0f(0x158)]%0x4==0x0||_0x4391f8[_0x29ed0f(0x158)]%0x4==0x3||_0x4391f8[_0x29ed0f(0x158)]%0x3==0x1?0x4:0x3;let _0x58c058=0x0;_0x4391f8[_0x29ed0f(0x112)]((_0x407953,_0x8a8386)=>{const _0x210e2e=_0x29ed0f;if(_0x8a8386%_0x450305==0x0)_0x1b793d=[];_0x1b793d['push']({'text':_0x407953[_0x210e2e(0x121)]==_0x210e2e(0x117)?_0x210e2e(0x15d):_0x210e2e(0x19f)+_0x407953['botID'],'callback_data':_0x407953[_0x210e2e(0x121)]}),_0x8a8386%_0x450305==0x0&&(_0x5c4dda[_0x58c058]=_0x1b793d,_0x58c058++);}),tgBot[_0x29ed0f(0x1bf)](_0x17ec19[_0x29ed0f(0x1d2)]['id'],_0x29ed0f(0x1a1),{'reply_markup':{'inline_keyboard':_0x5c4dda}})[_0x29ed0f(0x199)](_0x17de5a=>{telegramError(_0x17de5a);}),tgBot['on'](_0x29ed0f(0x148),async _0x2ee8dd=>{const _0x27141c=_0x29ed0f,_0x51d362=_0x2ee8dd['data'],_0x33613b=_0x2ee8dd[_0x27141c(0x1f3)];tgBot[_0x27141c(0xc3)](_0x2ee8dd['id'])[_0x27141c(0x16a)](async()=>{const _0x478b22=_0x27141c;if(_0x51d362=='all'){if(settings[_0x478b22(0x197)]==_0x478b22(0x192))tgBot[_0x478b22(0x1bf)](_0x33613b[_0x478b22(0x1d2)]['id'],_0x478b22(0xf3))[_0x478b22(0x199)](_0x42ba94=>{telegramError(_0x42ba94);});_0x4391f8['forEach'](_0x4fecbb=>{const _0x4bec46=_0x478b22;if(_0x4fecbb['botID']!=_0x4bec46(0x117))toggleBot(_0x4fecbb[_0x4bec46(0x121)],toggleStatus(_0x4fecbb[_0x4bec46(0x121)]),'stopped');});}else{if(settings[_0x478b22(0x197)]==_0x478b22(0x192))tgBot[_0x478b22(0x1bf)](_0x33613b[_0x478b22(0x1d2)]['id'],_0x478b22(0x1f4)+_0x51d362)[_0x478b22(0x199)](_0xa3e9eb=>{telegramError(_0xa3e9eb);});toggleBot(_0x51d362,toggleStatus(_0x51d362),_0x478b22(0x157));}}),tgBot['removeListener'](_0x27141c(0x148));});}}),tgBot[_0x56d423(0x18d)](/\/disable/,_0x4ea000=>{const _0x48c32d=_0x56d423;if(!validateTelegram(_0x4ea000))return;tgBot['sendMessage'](_0x4ea000['chat']['id'],_0x48c32d(0x1f1))[_0x48c32d(0x199)](_0x490f44=>{telegramError(_0x490f44);}),updateSetting(_0x48c32d(0xc8),![]);}),tgBot['onText'](/\/help/,_0x5dc957=>{const _0x950c09=_0x56d423;if(!validateTelegram(_0x5dc957))return;tgBot[_0x950c09(0x1bf)](_0x5dc957['chat']['id'],_0x2d2722)[_0x950c09(0x199)](_0x4fd005=>{telegramError(_0x4fd005);});}),tgBot['on']('polling_error',_0x490691=>{const _0x22b1c5=_0x56d423;_0x490691[_0x22b1c5(0x1ba)]()[_0x22b1c5(0x187)](_0x22b1c5(0x11f))&&(logging(_0x22b1c5(0x19d)),tgBot[_0x22b1c5(0x100)](),tgBot=null,io['to'](_0x22b1c5(0x18a))[_0x22b1c5(0x106)](_0x22b1c5(0x1bd),'Invalid\x20Telegram\x20token'));}),process[_0x56d423(0x1e7)](_0x56d423(0x11d),()=>{const _0x5427ac=_0x56d423;if(tgBot)tgBot[_0x5427ac(0x100)]();process[_0x5427ac(0x119)](0x1);}),process[_0x56d423(0x1e7)](_0x56d423(0x1a5),()=>{const _0x4ad001=_0x56d423;if(tgBot)tgBot['stopPolling']();process[_0x4ad001(0x119)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x27440f,_0x3e819a){const _0xc17821=_0x102588;if(settings[_0xc17821(0xc8)]){if(settings[_0xc17821(0x197)]=='all'||(_0x3e819a[_0xc17821(0x1b1)]==_0xc17821(0xc2)||_0x3e819a[_0xc17821(0x1b1)]==_0xc17821(0xe4))&&settings[_0xc17821(0x197)]=='alerts'||_0x3e819a[_0xc17821(0x1b1)]==_0xc17821(0xe9)&&settings[_0xc17821(0x197)]==_0xc17821(0x192)){if(tgBot&&settings[_0xc17821(0x185)]){if(_0x3e819a[_0xc17821(0x1b2)])tgBot[_0xc17821(0x1bf)](settings['telegramChatId'],_0x3e819a['botname']+_0xc17821(0x149)+_0x3e819a[_0xc17821(0x1ea)])['catch'](_0x1bfc35=>{telegramError(_0x1bfc35);});else tgBot[_0xc17821(0x1bf)](settings[_0xc17821(0x185)],_0xc17821(0x19f)+_0x27440f+_0xc17821(0x149)+_0x3e819a[_0xc17821(0x1ea)])['catch'](_0x2dd737=>{telegramError(_0x2dd737);});}}}}function getDeviceWithIp(_0x4ef25a){const _0x4cc86a=_0x102588;return devices[_0x4cc86a(0x1dc)](_0x361b1e=>_0x361b1e['ip']===_0x4ef25a);}function temporaryAccess2FA(_0x3d5791,_0x5d32dd){const _0x1c2363=_0x102588;let _0x3db9e7=new Date(),_0x2b7835=![];if(lastIpApproval){if(_0x3db9e7-lastIpApproval<0x1388)_0x2b7835=!![];}lastIpApproval=new Date();if(_0x2b7835)return;tgBot&&settings[_0x1c2363(0x185)]&&(tgBot['removeListener'](_0x1c2363(0x148)),tgBot[_0x1c2363(0x1bf)](settings['telegramChatId'],_0x1c2363(0x1ed)+normalizeIP(_0x5d32dd)[_0x1c2363(0x1de)]+_0x1c2363(0x1da),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1c2363(0x1a7),'callback_data':'5'},{'text':_0x1c2363(0x1eb),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x1c2363(0x12b),'callback_data':_0x1c2363(0x12b)}]]}})[_0x1c2363(0x199)](_0x2ac474=>{telegramError(_0x2ac474);}),tgBot['on']('callback_query',async _0x510138=>{const _0xd4b4=_0x1c2363,_0x5dc35f=_0x510138['data'],_0x555461=_0x510138[_0xd4b4(0x1f3)];tgBot[_0xd4b4(0xc3)](_0x510138['id'])[_0xd4b4(0x16a)](async()=>{const _0x2fe2d6=_0xd4b4;devices[_0x3d5791][_0x2fe2d6(0x1b7)]={'clientip':_0x5d32dd,'timestamp':new Date()[_0x2fe2d6(0x145)](),'expiry':_0x5dc35f},_0x5dc35f!=_0x2fe2d6(0x12b)?(await tgBot[_0x2fe2d6(0x1bf)](_0x555461[_0x2fe2d6(0x1d2)]['id'],'Access\x20enabled\x20for\x20'+_0x5dc35f+_0x2fe2d6(0xdd),{'parse_mode':_0x2fe2d6(0x195)})[_0x2fe2d6(0x199)](_0x310532=>{telegramError(_0x310532);}),io['to'](_0x3d5791)[_0x2fe2d6(0x106)](_0x2fe2d6(0x1b0),{'access':{'allow':![],'reason':_0x2fe2d6(0x12c),'token':null}})):(await tgBot[_0x2fe2d6(0x1bf)](_0x555461[_0x2fe2d6(0x1d2)]['id'],_0x2fe2d6(0x17b))['catch'](_0x576f19=>{telegramError(_0x576f19);}),io['to'](_0x3d5791)[_0x2fe2d6(0x106)](_0x2fe2d6(0x1b0),{'access':{'allow':![],'reason':_0x2fe2d6(0x14f),'token':null}}));}),tgBot[_0xd4b4(0x152)](_0xd4b4(0x148));}));}function loginAccess2FA(_0x4979,_0x3f133c){const _0x383de5=_0x102588;tgBot&&settings[_0x383de5(0x185)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x383de5(0x1bf)](settings['telegramChatId'],_0x383de5(0x151)+normalizeIP(_0x3f133c)[_0x383de5(0x1de)]+_0x383de5(0x1da),{'parse_mode':_0x383de5(0x195),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x383de5(0x12b),'callback_data':_0x383de5(0x12b)}]]}})[_0x383de5(0x199)](_0x4f5dd1=>{telegramError(_0x4f5dd1);}),tgBot['on']('callback_query',async _0x30f497=>{const _0x10d73e=_0x383de5,_0x2e7b4b=_0x30f497[_0x10d73e(0xfc)],_0x458e32=_0x30f497[_0x10d73e(0x1f3)];tgBot['answerCallbackQuery'](_0x30f497['id'])['then'](async()=>{const _0xbeeee0=_0x10d73e;devices[_0x4979][_0xbeeee0(0x118)]={'clientip':_0x3f133c,'timestamp':new Date()[_0xbeeee0(0x145)](),'expiry':_0x2e7b4b},_0x2e7b4b!=_0xbeeee0(0x12b)?(await tgBot[_0xbeeee0(0x1bf)](_0x458e32[_0xbeeee0(0x1d2)]['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0xbeeee0(0x199)](_0x29bb6f=>{telegramError(_0x29bb6f);}),io['to'](_0x4979)[_0xbeeee0(0x106)](_0xbeeee0(0x1b0),{'access':{'allow':![],'reason':_0xbeeee0(0x12c),'token':null}})):(await tgBot['sendMessage'](_0x458e32[_0xbeeee0(0x1d2)]['id'],'Login\x20rejected')[_0xbeeee0(0x199)](_0x368060=>{telegramError(_0x368060);}),io['to'](_0x4979)[_0xbeeee0(0x106)](_0xbeeee0(0x1b0),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x10d73e(0x152)](_0x10d73e(0x148));}));}function getConfiguration(){const _0x40947a=_0x102588;return dbConfig[_0x40947a(0x132)]('bots')[_0x40947a(0x1d5)](_0x40947a(0x121))[_0x40947a(0xf2)]()||[];}function getEnabledBots(){const _0x4c4977=_0x102588;return dbConfig[_0x4c4977(0x132)](_0x4c4977(0xde))['sortBy'](_0x4c4977(0x121))[_0x4c4977(0x168)]({'status':_0x4c4977(0xbf)})[_0x4c4977(0xf2)]()||[];}function getDisabledBots(){const _0x12eff7=_0x102588;return dbConfig['get']('bots')[_0x12eff7(0x1d5)]('botID')[_0x12eff7(0x168)]({'status':_0x12eff7(0xbe)})[_0x12eff7(0xf2)]()||[];}function getSettings(){const _0x45e918=_0x102588;return dbSettings[_0x45e918(0x132)]('settings')[_0x45e918(0xf2)]()||{'timeshift':0x0};}function getSecure(){const _0x2137a9=_0x102588;return dbSecure[_0x2137a9(0x132)](_0x2137a9(0x189))['value']()||{};}function getBlacklist(){const _0x29775e=_0x102588;return dbSecure[_0x29775e(0x132)](_0x29775e(0xbc))[_0x29775e(0xf2)]()||[];}function broadcastToBots(_0x1b3d85,_0x187af8){const _0x3fe301=_0x102588;config[_0x3fe301(0x112)](_0x11417d=>{const _0x414f7e=_0x3fe301;if(_0x11417d[_0x414f7e(0x1b0)]=='enabled'&&_0x11417d[_0x414f7e(0x16b)]==_0x414f7e(0x15f)){if(pid[_0x11417d[_0x414f7e(0x121)]])pid[_0x11417d['botID']]['send']({[_0x1b3d85]:_0x187af8});}});}function storeSettings(_0x270fdd,_0x592f71=![]){const _0x54793c=_0x102588;_0x270fdd={...settings,..._0x270fdd};if(_0x592f71&&_0x270fdd[_0x54793c(0xd7)]!=_0x54793c(0x1a4)&&_0x270fdd[_0x54793c(0xd7)]!=''){const _0x7a3645=crypt[_0x54793c(0x150)](secure[_0x54793c(0x1d7)],_0x270fdd[_0x54793c(0xd7)])[_0x54793c(0x1f3)][_0x54793c(0x1f5)]('@')[0x0],_0x5032a8=bcrypt[_0x54793c(0xf6)](_0x7a3645,saltRounds);_0x270fdd={..._0x270fdd,'bbPassword':_0x5032a8};}if(_0x592f71&&_0x270fdd[_0x54793c(0x1cf)]!='************'&&_0x270fdd[_0x54793c(0x1cf)]!=''){const _0x54933c=crypt[_0x54793c(0x150)](secure['privateKey'],_0x270fdd[_0x54793c(0x1cf)])[_0x54793c(0x1f3)][_0x54793c(0x1f5)]('@')[0x0];_0x270fdd={..._0x270fdd,'telegramToken':_0x54933c};}const _0x4d1d8e=_0x270fdd[_0x54793c(0x1cf)]!='************'&&_0x270fdd[_0x54793c(0x1cf)]!=settings[_0x54793c(0x1cf)]||_0x270fdd[_0x54793c(0x1f6)]!=settings[_0x54793c(0x1f6)],_0x260da1=_0x270fdd[_0x54793c(0x1cf)]==''||_0x270fdd['telegramUsername']=='';if(_0x4d1d8e)_0x270fdd[_0x54793c(0x197)]='all';for(const [_0x363e22,_0x18d487]of Object[_0x54793c(0xc6)](_0x270fdd)){if(_0x363e22==_0x54793c(0x1cf)&&_0x18d487==_0x54793c(0x1a4)){_0x270fdd[_0x54793c(0x1cf)]=settings[_0x54793c(0x1cf)];continue;};if(_0x363e22==_0x54793c(0xd7)&&_0x18d487=='************'){_0x270fdd['bbPassword']=settings[_0x54793c(0xd7)];continue;};dbSettings[_0x54793c(0x1c8)](_0x54793c(0x15c)+_0x363e22,_0x18d487)['write']();}settings=_0x270fdd,io['to'](_0x54793c(0x18a))['emit'](_0x54793c(0x183),cleanSettings()),broadcastToBots(_0x54793c(0x15a),settings[_0x54793c(0x15a)]);if(_0x4d1d8e&&!_0x260da1)initTelegram();if(_0x4d1d8e&&_0x260da1)disableTelegram();getAllClients()[_0x54793c(0x112)](_0x1419b0=>{const _0x365be2=_0x54793c;getSocket(_0x1419b0['id'])[_0x365be2(0x106)](_0x365be2(0x1b0),{'access':{'allow':![],'reason':_0x365be2(0x12c),'token':null}});});}function updateSetting(_0x529ec7,_0x358a55){const _0x5e23c7=_0x102588;dbSettings['set'](_0x5e23c7(0x15c)+_0x529ec7,_0x358a55)['write'](),settings=getSettings(),io['to']('botmanager')[_0x5e23c7(0x106)]('settings',cleanSettings());}function storeSecure(_0x4be02e){const _0x714787=_0x102588;dbSecure[_0x714787(0x132)](_0x714787(0x189))[_0x714787(0x102)](_0x4be02e)[_0x714787(0x1cd)](),secure=_0x4be02e;}function addBlacklist(_0x26d81c){const _0xeadd1=_0x102588;cleanBlacklist();let _0x48ebd8;devices[_0x26d81c]['telegramIpApproval']?_0x48ebd8=Math[_0xeadd1(0x1a6)](devices[_0x26d81c]['telegramIpApproval']['expiry'],loginExpiry):_0x48ebd8=loginExpiry,dbSecure[_0xeadd1(0x132)](_0xeadd1(0xbc))['push']({'expiry':new Date()[_0xeadd1(0x145)]()+_0x48ebd8*0x3c*0x3e8,'token':devices[_0x26d81c][_0xeadd1(0x1c4)]['token']})['write'](),blacklist=dbSecure[_0xeadd1(0x132)](_0xeadd1(0xbc))[_0xeadd1(0xf2)]();}function cleanBlacklist(){const _0x22d917=_0x102588;let _0x4b8f49=dbSecure[_0x22d917(0x132)](_0x22d917(0xbc))[_0x22d917(0x194)]()[_0x22d917(0xf2)](),_0x2dd640=new Date()[_0x22d917(0x145)]();_0x4b8f49[_0x22d917(0x112)](_0x5a21db=>{const _0x31bc13=_0x22d917;_0x5a21db[_0x31bc13(0x12a)]<_0x2dd640&&dbSecure[_0x31bc13(0x132)]('blacklist')['remove']({'expiry':_0x5a21db['expiry']})[_0x31bc13(0x1cd)]();});}function _0x259b(){const _0x276965=['restarting\x20Bot\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','getMonth','expiry','reject','reload','initclient','config/','update-bot','getHours','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','get','sockets','slice','bb-secure.json','user','log','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','join','sha256','getFullYear','temporary\x20token\x20generated','host','kind','sign','UA-192771731-1','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20delete\x20bot','createServer','padStart','getTime','\x20only\x0a','/:bot/performance','callback_query','\x20>\x20','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','No\x20authentication\x20token','Invalid\x20authentication\x20token\x20(1)','RSA-OAEP','temporary\x20access\x20rejected','decrypt','Allow\x20login\x20from\x20IP\x20address\x20<b>','removeListener','bbUsername','existsSync','/help\x20-\x20show\x20available\x20commands\x0a','server','stopped','length','remoteAddress','timeshift','map','settings.','All\x20bots','backup/','running','2FA\x20required','clientip','temporary\x20access\x20timeout','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','encryptedUuid','127.0.0.1','token','build','filter','toIPv4MappedAddress','then','live','Balance\x20Bot\x20Server','fork','bot-','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','getMinutes','name','starting\x20bot\x20|\x20Bot\x20','bcryptjs','secret','disconnect','uuid','readdirSync','handshake','unlinkSync','delete-bot','Temporary\x20access\x20rejected','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Invalid\x20authentication\x20token\x20(2)','-----------------------------------------------------------------------------------','socket.io','temporary\x20access\x20not\x20allowed','index.html','stop','settings','removeAllListeners','telegramChatId','Error:\x20Invalid\x20argument\x20','includes','-performance.json','secure','botmanager','4584765fcMNar','/:bot/coins','onText','referer','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','jsonwebtoken','access\x20timeout','orders','Unauthorized\x20attempt\x20to\x20update\x20settings','cloneDeep','HTML','default','telegramEvents','placeOrder','catch','headers','/status\x20-\x20show\x20bot(s)\x20status\x0a','RSA','Invalid\x20Telegram\x20token','::ffff:127.0.0.1','Bot\x20','invalid\x20credentials','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','parse','login\x20required','************','SIGTERM','max','5\x20min','copyFileSync','function','getDate','enabled\x20Bot\x20','search','allow','Notifications\x20types:\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','status','type','showname','-config.json','Invalid\x20username\x20or\x20IP\x20address','bb-config.json','sendFile','telegramIpApproval','Orders','timestamp','toString','Notifications\x20enabled\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','notification','loginRequired','sendMessage','password','temporaryAccessAllowed','alerts','You\x20can\x20use\x20the\x20following\x20commands:\x0a','access','1000','NTBA_FIX_319','new','set','static','Alerts','username','hasOwnProperty','write','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','telegramToken','new-disabled','Unauthorized\x20attempt\x20to\x20store\x20configuration','chat','generateKeyPairAsync','connected','sortBy','2FA','privateKey','login','env','</b>\x20?','logged\x20out','find','2812452FuhbIK','show','Unauthorized\x20attempt\x20to\x20log\x20out','2FA\x20login\x20token\x20generated','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','listen','@analytics/google-analytics','https://hodlerhacks.com','Unauthorized\x20login\x20attempt\x20(timeout)','lowdb','once','\x20|\x20','logout','event','15\x20min','No\x20bots\x20running\x20right\x20now','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','storeHeadless','assign','(((.+)+)+)+$','Notifications\x20disabled','reason','message','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','split','telegramUsername','blacklist','build2','disabled','enabled','crypto','getStartingBalances','error','answerCallbackQuery','\x20/\x20','2FA\x20login\x20required','entries','node-telegram-bot-api','telegramEnabled','pidRefreshToken','restart','reset-password','getPortfolio','exp','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','5694896sKjltJ','remove','conn','date-fns','randomBytes','Unauthorized\x20attempt\x20to\x20get\x20logs','User\x20has\x20been\x20validated','store-configuration','bbPassword','place-order','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','mkdirSync','12dJaWgi','pidExpireLogin','\x20minutes','bots','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','yargs/yargs','Unauthorized\x20attempt\x20to\x20update\x20bot','/enable\x20-\x20enable\x20notifications\x0a','send','success','inherit','analytics','defaults','Unauthorized\x20attempt\x20to\x20get\x20portfolio','order','login\x20token\x20generated','ipc','error\x20while\x20deleting\x20config\x20files:\x20','whitelist','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','match','bot','page','value','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','connection','starting\x20new\x20bot\x20|\x20Bot\x20','hashSync','isDirectory','<b>Telegram\x20bot\x20status:</b>\x0a','whitelistEnabled','hybrid-crypto-js','f2aRequired','data','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','1213884yUrXEb','16388TyKdYP','stopPolling',':\x20Bot\x20Mgr\x20>\x20','push','227313QDPtHR','Password\x20reset\x20rejected','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','emit','botname','started','getSeconds','getUTCHours','use','store-settings','Notifications\x20enabled','from','args','5707723JZZSJi','apply','forEach','port','publicKey','emitHistory','Balance\x20Bot','all','telegram2FaApproval','exit','version','Crypt','/:bot/support','SIGINT','ipaddr.js','404\x20Not\x20Found','<b>Balance\x20Bot\x20status:</b>\x0a','botID','3000','store-headless','Bot\x20Mgr\x20>\x20','yes','bb-settings.json'];_0x259b=function(){return _0x276965;};return _0x259b();}function initStates(){const _0x1fc5f5=_0x102588;let _0x35674e=getConfiguration();_0x35674e[_0x1fc5f5(0x112)](_0x6c7717=>{const _0x1dcf56=_0x1fc5f5;_0x6c7717[_0x1dcf56(0x16b)]=_0x1dcf56(0x157);}),storeConfiguration(_0x35674e);}function onKeys(){const _0xedf370=new RSA();return new Promise(_0x4b502f=>{const _0x7cd8f5=_0x163f;_0xedf370[_0x7cd8f5(0x1d3)]()[_0x7cd8f5(0x16a)](_0xfde284=>{_0x4b502f(_0xfde284);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x13245f=_0x102588;let _0x4f055a=getConfiguration(),_0x3d16ab=![];_0x4f055a[_0x13245f(0x112)](_0x4dbbb=>{const _0x37c0ee=_0x13245f;if(_0x4dbbb[_0x37c0ee(0x1b0)]==_0x37c0ee(0x15f))_0x4dbbb[_0x37c0ee(0x1b0)]=_0x37c0ee(0xbf),_0x3d16ab=!![];else _0x4dbbb[_0x37c0ee(0x1b0)]=='stopped'&&(_0x4dbbb[_0x37c0ee(0x1b0)]=_0x37c0ee(0xbe),_0x3d16ab=!![]);});if(_0x3d16ab)storeConfiguration(_0x4f055a);let _0x7be7d9=getSecure();if(!_0x7be7d9[_0x13245f(0x1cc)](_0x13245f(0x174))){let _0x19b138=await generateKeys();_0x7be7d9[_0x13245f(0x114)]=_0x19b138['publicKey'],_0x7be7d9[_0x13245f(0x1d7)]=_0x19b138[_0x13245f(0x1d7)],_0x7be7d9['secret']=crypto[_0x13245f(0xd3)](0x20)['toString']('hex');;storeSecure(_0x7be7d9);}let _0x20ed48=getSettings();_0x3d16ab=![];!_0x20ed48[_0x13245f(0x1cc)](_0x13245f(0x1be))&&(_0x20ed48[_0x13245f(0x1be)]=![],_0x20ed48[_0x13245f(0x153)]='',_0x20ed48[_0x13245f(0xd7)]='',_0x20ed48[_0x13245f(0xfb)]=![],_0x3d16ab=!![]);!_0x20ed48[_0x13245f(0x1cc)]('whitelistEnabled')&&(_0x20ed48[_0x13245f(0xf9)]=![],_0x20ed48[_0x13245f(0xed)]=[],_0x20ed48['temporaryAccessAllowed']=![],_0x3d16ab=!![]);if(!_0x20ed48[_0x13245f(0x1cc)](_0x13245f(0xc8))){if(_0x20ed48[_0x13245f(0x185)])_0x20ed48[_0x13245f(0xc8)]=!![];else _0x20ed48[_0x13245f(0xc8)]=![];_0x3d16ab=!![];}if(_0x3d16ab)storeSettings(_0x20ed48);}function storeConfiguration(_0xb52762){const _0x5d5b7a=_0x102588;dbConfig[_0x5d5b7a(0x132)](_0x5d5b7a(0xde))['remove']()[_0x5d5b7a(0x1cd)](),dbConfig['get']('bots')[_0x5d5b7a(0x102)](..._0xb52762)[_0x5d5b7a(0x1cd)](),config=_0xb52762;}function resetPassword(){const _0x1a1aef=_0x102588;tgBot&&settings['telegramChatId']&&(tgBot[_0x1a1aef(0x152)](_0x1a1aef(0x148)),tgBot[_0x1a1aef(0x1bf)](settings[_0x1a1aef(0x185)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1a1aef(0x125),'callback_data':_0x1a1aef(0x125)},{'text':'no','callback_data':'no'}]]}})[_0x1a1aef(0x199)](_0x2ecd53=>{telegramError(_0x2ecd53);}),tgBot['on'](_0x1a1aef(0x148),async _0x30c2f1=>{const _0x279440=_0x1a1aef,_0x48c875=_0x30c2f1[_0x279440(0xfc)],_0x3688c8=_0x30c2f1['message'];tgBot[_0x279440(0xc3)](_0x30c2f1['id'])[_0x279440(0x16a)](async()=>{const _0x5d2214=_0x279440;if(_0x48c875!='no'){const _0x506b9e=0xf,_0x11c456='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x43475c=Array[_0x5d2214(0x10e)](crypto['randomFillSync'](new Uint32Array(_0x506b9e)))[_0x5d2214(0x15b)](_0x80b26=>_0x11c456[_0x80b26%_0x11c456[_0x5d2214(0x158)]])['join'](''),_0x440e4b=bcrypt['hashSync'](_0x43475c,saltRounds);storeSettings({'bbPassword':_0x440e4b}),await tgBot[_0x5d2214(0x1bf)](_0x3688c8[_0x5d2214(0x1d2)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x43475c,{'parse_mode':_0x5d2214(0x195)})['catch'](_0x2b4c74=>{telegramError(_0x2b4c74);});}else await tgBot['sendMessage'](_0x3688c8['chat']['id'],_0x5d2214(0x104))[_0x5d2214(0x199)](_0x4aa6f2=>{telegramError(_0x4aa6f2);});}),tgBot[_0x279440(0x152)](_0x279440(0x148));}));}function logging(_0x570ccb){const _0x551b99=_0x102588;console[_0x551b99(0x137)](getTimeStamp()+_0x551b99(0x101)+_0x570ccb);if(tgBot&&settings[_0x551b99(0x185)]&&settings[_0x551b99(0x197)]!=_0x551b99(0x192))tgBot['sendMessage'](settings[_0x551b99(0x185)],_0x551b99(0x124)+_0x570ccb)['catch'](_0x5d31f8=>{telegramError(_0x5d31f8);});}function getServerTime(){const _0x134908=_0x102588,_0x512d6e=new Date();return _0x512d6e[_0x134908(0x13b)]()+'/'+(_0x512d6e[_0x134908(0x129)]()+0x1)[_0x134908(0x1ba)]()[_0x134908(0x144)](0x2,'0')+'/'+_0x512d6e[_0x134908(0x1aa)]()['toString']()[_0x134908(0x144)](0x2,'0')+'\x20'+_0x512d6e[_0x134908(0x130)]()['toString']()[_0x134908(0x144)](0x2,'0')+':'+_0x512d6e[_0x134908(0x170)]()['toString']()[_0x134908(0x144)](0x2,'0')+':'+_0x512d6e['getSeconds']()[_0x134908(0x1ba)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x539b5a=_0x102588,_0x490534=shiftedTime();return _0x490534[_0x539b5a(0x13b)]()+'/'+(_0x490534[_0x539b5a(0x129)]()+0x1)[_0x539b5a(0x1ba)]()[_0x539b5a(0x144)](0x2,'0')+'/'+_0x490534[_0x539b5a(0x1aa)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x490534['getHours']()[_0x539b5a(0x1ba)]()[_0x539b5a(0x144)](0x2,'0')+':'+_0x490534[_0x539b5a(0x170)]()[_0x539b5a(0x1ba)]()[_0x539b5a(0x144)](0x2,'0')+':'+_0x490534[_0x539b5a(0x109)]()[_0x539b5a(0x1ba)]()[_0x539b5a(0x144)](0x2,'0');}function shiftedTime(){const _0x2bda5f=_0x102588,_0x3dd081=new Date();let _0x2b5461=_0x3dd081;if(settings['timeshift']&&settings[_0x2bda5f(0x15a)]!==0x0)_0x2b5461=fns['add'](_0x3dd081,{'hours':settings[_0x2bda5f(0x15a)]});return _0x2b5461;}function startScheduler(){const _0x362428=_0x102588;let _0x1354be=new Date()[_0x362428(0x10a)]();_0x1354be==0x1&&backupConfigFiles();_0x1354be==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2a44f1=_0x102588;fs[_0x2a44f1(0x177)](configpath,{'withFileTypes':!![]})['forEach'](_0x56657d=>{const _0x4748c9=_0x2a44f1;if(!_0x56657d[_0x4748c9(0xf7)]())fs[_0x4748c9(0x1a8)](configpath+_0x56657d[_0x4748c9(0x171)],configbackuppath+_0x56657d['name']);});}function triggerAnalytics(){const _0x2c47ac=_0x102588;analytics[_0x2c47ac(0xf1)]({'title':_0x2c47ac(0x16c),'href':_0x2c47ac(0x1e4),'path':'/v'+serverversion});}function validateCredentials(_0x56d01a,_0x1cc4af){const _0x58065e=_0x102588;if(_0x56d01a['username']==settings[_0x58065e(0x153)]&&bcrypt['compareSync'](_0x56d01a['password'],settings['bbPassword'])){if(settings[_0x58065e(0xfb)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x590660=generateLoginToken(_0x1cc4af);return{'allow':!![],'reason':_0x58065e(0xea),'token':_0x590660};}}else return{'allow':![],'reason':_0x58065e(0x1a0),'token':null};}function refreshToken(_0x325349){const _0xa321a0=generateLoginToken(_0x325349);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xa321a0};}function validateAccess(_0x1820a8,_0x46d10c){const _0x289d74=_0x102588;let _0x491cef=devices[_0x46d10c]['ip'],_0x5abed7;const _0x4e3db6=_0x5c41ae=>{const _0x43e101=_0x163f;if(settings[_0x43e101(0x1be)]){if(settings[_0x43e101(0xfb)]){if(telegram2FaApproved(_0x46d10c)){const _0x57a471=generateLoginToken(_0x46d10c);return{'allow':!![],'reason':_0x43e101(0x1e0),'token':_0x57a471};}else return{'allow':![],'reason':_0x43e101(0x1a3),'token':null};}else return _0x5abed7=validToken(_0x5c41ae,_0x46d10c),_0x5abed7['hasOwnProperty']('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5c41ae}:{'allow':![],'reason':_0x43e101(0x1a3),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x49f36c=[...settings[_0x289d74(0xed)],'::1',_0x289d74(0x19e),_0x289d74(0x165)];if(_0x49f36c[_0x289d74(0x187)](_0x491cef))return _0x4e3db6(_0x1820a8);else{_0x5abed7=validToken(_0x1820a8,_0x46d10c);if(_0x5abed7['hasOwnProperty']('success'))return _0x4e3db6(_0x1820a8);else{if(telegramIpApproved(_0x46d10c)){const _0x2fa99a=generateToken(_0x46d10c);return _0x5abed7=_0x4e3db6(_0x1820a8),_0x5abed7['allow']?{'allow':!![],'reason':_0x289d74(0x13c),'token':_0x2fa99a}:_0x5abed7;}else return settings[_0x289d74(0x1c1)]?{'allow':![],'reason':_0x289d74(0x160),'token':null}:{'allow':![],'reason':_0x289d74(0x180),'token':null};}}}else return _0x4e3db6(_0x1820a8);}function timelyDecrypt(_0x2df0a7,_0x33b6d2=!![]){const _0x2a77be=_0x102588;if(_0x2df0a7)try{const _0x104284=crypt['decrypt'](secure['privateKey'],_0x2df0a7)['message'],_0x4bcf01=_0x104284['split']('@')[0x0],_0x2ae6d2=_0x104284['split']('@')[0x1],_0x52310a=new Date()[_0x2a77be(0x145)]();if(_0x33b6d2){if(_0x52310a-_0x2ae6d2<maxSecretAge*0x3e8)return _0x4bcf01;else return![];}else return _0x4bcf01;}catch(_0x188128){return![];}else return![];}const validToken=(_0x27bcf2,_0x540155)=>{const _0x52f84c=_0x102588,_0x1283b8=devices[_0x540155]['ip'];if(!_0x27bcf2)return{'error':_0x52f84c(0x14c)};for(let _0x219068 of blacklist){if(_0x219068[_0x52f84c(0x166)]==_0x27bcf2)return{'error':'Token\x20blacklisted'};}let _0x41327f;try{_0x41327f=jwt['verify'](_0x27bcf2,secure[_0x52f84c(0x174)]+_0x540155);}catch{return{'error':_0x52f84c(0x14d)};}if(!_0x41327f['hasOwnProperty'](_0x52f84c(0x161))&&!_0x41327f['hasOwnProperty']('username')||!_0x41327f[_0x52f84c(0x1cc)](_0x52f84c(0xcd)))return{'error':_0x52f84c(0x17d)};if(!_0x41327f['hasOwnProperty'](_0x52f84c(0x1cb))&&_0x41327f[_0x52f84c(0x1cc)](_0x52f84c(0x161))){const {clientip:_0x4568bc}=_0x41327f;return _0x1283b8==_0x4568bc?{'success':_0x52f84c(0xd5)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x41327f[_0x52f84c(0x1cc)](_0x52f84c(0x1cb))&&_0x41327f['hasOwnProperty'](_0x52f84c(0x161))){const {username:_0x3c6471,clientip:_0x5840d7}=_0x41327f;return settings[_0x52f84c(0x153)]==_0x3c6471&&_0x1283b8==_0x5840d7?{'success':_0x52f84c(0xd5)}:{'error':_0x52f84c(0x1b4)};}}},generateLoginToken=_0x39263b=>{const _0x4a5311=_0x102588;if(_0x39263b){const _0x3e2d9e=devices[_0x39263b]['ip'];return jwt['sign']({'username':settings[_0x4a5311(0x153)],'clientip':_0x3e2d9e},secure[_0x4a5311(0x174)]+_0x39263b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x34bbde=>{const _0x3a4a7d=_0x102588;if(_0x34bbde){const _0x176fb3=devices[_0x34bbde]['ip'];return jwt[_0x3a4a7d(0x13f)]({'clientip':_0x176fb3},secure[_0x3a4a7d(0x174)]+_0x34bbde,{'expiresIn':devices[_0x34bbde]['telegramIpApproval'][_0x3a4a7d(0x12a)]*0x3c});}else return![];},telegramIpApproved=_0x11c82a=>{const _0x489f83=_0x102588;let _0xce0051=![];return devices[_0x11c82a][_0x489f83(0x1b7)]&&devices[_0x11c82a]['telegramIpApproval'][_0x489f83(0x12a)]!=_0x489f83(0x12b)&&(_0xce0051=devices[_0x11c82a][_0x489f83(0x1b7)][_0x489f83(0x161)]==devices[_0x11c82a]['ip']&&new Date()[_0x489f83(0x145)]()-devices[_0x11c82a][_0x489f83(0x1b7)][_0x489f83(0x1b9)]<devices[_0x11c82a][_0x489f83(0x1b7)][_0x489f83(0x12a)]*0x3c*0x3e8),_0xce0051;},telegram2FaApproved=_0x1a40d7=>{const _0x4d9be9=_0x102588;let _0x2e4853=![];return devices[_0x1a40d7][_0x4d9be9(0x118)]&&devices[_0x1a40d7][_0x4d9be9(0x118)][_0x4d9be9(0x12a)]!='reject'&&(_0x2e4853=devices[_0x1a40d7][_0x4d9be9(0x118)][_0x4d9be9(0x161)]==devices[_0x1a40d7]['ip']&&new Date()[_0x4d9be9(0x145)]()-devices[_0x1a40d7][_0x4d9be9(0x118)][_0x4d9be9(0x1b9)]<devices[_0x1a40d7][_0x4d9be9(0x118)][_0x4d9be9(0x12a)]*0x3c*0x3e8),_0x2e4853;},normalizeIP=_0x2d28ed=>{const _0x21123a=_0x102588;let _0x143119=null,_0x23f096=null;if(ipaddr['isValid'](_0x2d28ed)){const _0x186031=ipaddr[_0x21123a(0x1a2)](_0x2d28ed);_0x186031[_0x21123a(0x13e)]()==='ipv6'?(_0x186031['isIPv4MappedAddress']()&&(_0x143119=_0x186031['toIPv4Address']()[_0x21123a(0x1ba)]()),_0x23f096=_0x186031['toString']()):(_0x143119=_0x186031[_0x21123a(0x1ba)](),_0x23f096=_0x186031[_0x21123a(0x169)]()['toString']());}return{'show':_0x143119?_0x143119:_0x23f096,'store':_0x23f096};};