const _0x48e50a=_0x5bef;function _0x5743(){const _0xe5d47d=['10412hyWrIL','--port','1644226kqeKAc','Unexpected\x20error:','reinstall','Error\x20while\x20updating\x20Balance\x20Bot:','fork','constructor','staging','378mgjnKJ','kill','-----------------------------------------------------------------------------------','user','Balance\x20Bot\x20>\x20','log',',\x20but\x20version\x20','push','Automatically\x20restarting\x20BM','162310TNimJf','yargs/yargs','keys','bb/','port','host','5133728vamfug','(((.+)+)+)+$','message','update','SIGINT','values','917jMunxS','inherit','Error:\x20Invalid\x20argument\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','split','apply','SIGTERM','3479215eoGZtl','node','\x20or\x20above\x20is\x20required','ipc','argv','exit','toString','install.js','bm.js','error','slice','search','534676fhPKij','child_process','existsSync','terminate','657iNCitd','19302qnDbRP'];_0x5743=function(){return _0xe5d47d;};return _0x5743();}(function(_0x43a809,_0x9c26e4){const _0x507b60=_0x5bef,_0x768d30=_0x43a809();while(!![]){try{const _0x40867b=-parseInt(_0x507b60(0x122))/0x1+parseInt(_0x507b60(0x12a))/0x2+-parseInt(_0x507b60(0x126))/0x3*(-parseInt(_0x507b60(0x128))/0x4)+parseInt(_0x507b60(0x14d))/0x5+parseInt(_0x507b60(0x127))/0x6*(parseInt(_0x507b60(0x146))/0x7)+-parseInt(_0x507b60(0x140))/0x8+parseInt(_0x507b60(0x131))/0x9*(-parseInt(_0x507b60(0x13a))/0xa);if(_0x40867b===_0x9c26e4)break;else _0x768d30['push'](_0x768d30['shift']());}catch(_0x253f1f){_0x768d30['push'](_0x768d30['shift']());}}}(_0x5743,0x9f052));const _0x84d653=function(){let _0x580780=!![];return function(_0x5c0115,_0x424a70){const _0x3634d1=_0x580780?function(){const _0xa7bc71=_0x5bef;if(_0x424a70){const _0x501a62=_0x424a70[_0xa7bc71(0x14b)](_0x5c0115,arguments);return _0x424a70=null,_0x501a62;}}:function(){};return _0x580780=![],_0x3634d1;};}(),_0x21948e=_0x84d653(this,function(){const _0x2ce110=_0x5bef;return _0x21948e['toString']()[_0x2ce110(0x121)](_0x2ce110(0x141))[_0x2ce110(0x11c)]()[_0x2ce110(0x12f)](_0x21948e)[_0x2ce110(0x121)](_0x2ce110(0x141));});_0x21948e();const fs=require('fs'),argv=require(_0x48e50a(0x13b))(process[_0x48e50a(0x151)][_0x48e50a(0x120)](0x2))['argv'],childProcess=require(_0x48e50a(0x123)),nodeversion=process['versions'][_0x48e50a(0x14e)],minversion=0x10;nodeversion[_0x48e50a(0x14a)]('.')[0x0]<minversion&&(console[_0x48e50a(0x136)](),console['log'](_0x48e50a(0x133)),console[_0x48e50a(0x136)]('The\x20installed\x20Node.js\x20version\x20is\x20'+nodeversion+_0x48e50a(0x137)+minversion+_0x48e50a(0x14f)),console['log']('Please\x20install\x20a\x20recent\x20version\x20of\x20Node.js\x20and\x20then\x20start\x20Balance\x20Bot\x20again'),console[_0x48e50a(0x136)](_0x48e50a(0x133)),console[_0x48e50a(0x136)](),process[_0x48e50a(0x11b)](0x1));function _0x5bef(_0x498885,_0x25de3b){const _0xc40d47=_0x5743();return _0x5bef=function(_0x21948e,_0x84d653){_0x21948e=_0x21948e-0x11b;let _0x5743b6=_0xc40d47[_0x21948e];return _0x5743b6;},_0x5bef(_0x498885,_0x25de3b);}if(argv[_0x48e50a(0x13e)]){const pattern=/^[0-9]{2,4}$/;!pattern['test'](argv[_0x48e50a(0x13e)])&&(console[_0x48e50a(0x136)](_0x48e50a(0x148)+argv[_0x48e50a(0x13e)]+_0x48e50a(0x149)),process[_0x48e50a(0x11b)](0x1));}let args=[];argv['port']&&(args[_0x48e50a(0x138)](_0x48e50a(0x129)),args[_0x48e50a(0x138)](argv[_0x48e50a(0x13e)]));argv[_0x48e50a(0x13f)]&&(args[_0x48e50a(0x138)]('--host'),args['push'](argv[_0x48e50a(0x13f)]));argv[_0x48e50a(0x134)]&&(args['push']('--user'),args['push'](argv['user']));const staging=argv['s']||![],debugging=argv['d']||![];debugging&&args[_0x48e50a(0x138)]('-d');let bmpath=_0x48e50a(0x13d);const bmfile=_0x48e50a(0x11e),updatefile=_0x48e50a(0x11d);!fs[_0x48e50a(0x124)](bmpath+bmfile)&&(bmpath='');let pid1,pid2,updating=![],terminating=![];process['on'](_0x48e50a(0x11b),async()=>{handleTerminate();}),process['on'](_0x48e50a(0x14c),async()=>{handleTerminate();}),process['on'](_0x48e50a(0x144),async()=>{handleTerminate();}),startBM();function startBM(){const _0x98d6a4=_0x48e50a;let _0x501115=![];const _0x469695={'cwd':'','stdio':[_0x98d6a4(0x147),_0x98d6a4(0x147),'inherit',_0x98d6a4(0x150)]};pid1=childProcess[_0x98d6a4(0x12e)](bmpath+bmfile,args,_0x469695),pid1['on'](_0x98d6a4(0x142),_0x48c77f=>{const _0x54e4f0=_0x98d6a4,_0x99c83b=Object[_0x54e4f0(0x145)](_0x48c77f)[0x1]==_0x54e4f0(0x130);switch(Object[_0x54e4f0(0x13c)](_0x48c77f)[0x0]){case _0x54e4f0(0x143):if(_0x99c83b)startUpdate('2s');else startUpdate('2');break;case _0x54e4f0(0x12c):if(_0x99c83b)startUpdate('3s');else startUpdate('3');break;case'restore':handleRestore();break;case _0x54e4f0(0x125):handleTerminate();break;}}),pid1['on'](_0x98d6a4(0x11f),function(_0x20f097){const _0x568fac=_0x98d6a4;if(_0x501115)return;_0x501115=!![],logging(_0x568fac(0x12b),_0x20f097);}),pid1['on']('exit',function(_0x13ce1d){const _0x3b7759=_0x98d6a4;if(terminating)return;if(updating)return;if(_0x501115)return;_0x501115=!![],console[_0x3b7759(0x136)](_0x3b7759(0x139)),startBM();});}async function handleTerminate(){const _0x2b07d4=_0x48e50a;stopBM(),await sleep(0x3e8),process[_0x2b07d4(0x11b)](0x0);}function stopBM(){const _0x1ec77d=_0x48e50a;terminating=!![];if(pid1)pid1[_0x1ec77d(0x132)]();pid1=null;}function startUpdate(_0x422147){const _0x4719d0=_0x48e50a;updating=!![],stopBM();let _0x8dfdd0=![];const _0x10fa23={'cwd':'','stdio':[_0x4719d0(0x147),_0x4719d0(0x147),'inherit','ipc']};let _0x6a9a6a=[];if(staging)_0x6a9a6a['push'](_0x422147+'s');else _0x6a9a6a[_0x4719d0(0x138)](_0x422147);pid2=childProcess[_0x4719d0(0x12e)](updatefile,_0x6a9a6a,_0x10fa23),pid2['on']('error',function(_0x77e461){const _0x46f0ad=_0x4719d0;updating=![];if(_0x8dfdd0)return;_0x8dfdd0=!![],logging(_0x46f0ad(0x12d),_0x77e461);}),pid2['on'](_0x4719d0(0x11b),function(_0x489553){updating=![];if(_0x8dfdd0)return;_0x8dfdd0=!![],terminating=![],startBM();});}function handleRestore(){const _0x530782=_0x48e50a;if(pid1)pid1[_0x530782(0x132)]();}function logging(_0x5dd781){const _0x3c006e=_0x48e50a;console[_0x3c006e(0x136)](_0x3c006e(0x135)+_0x5dd781);}function sleep(_0x50e139){return new Promise(_0x4c1a65=>setTimeout(_0x4c1a65,_0x50e139));}