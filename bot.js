const _0x415a02=_0x57a3;(function(_0xac2634,_0x3c8504){const _0x1b310c=_0x57a3,_0x1e71c0=_0xac2634();while(!![]){try{const _0x71ff14=-parseInt(_0x1b310c(0x1a5))/0x1*(-parseInt(_0x1b310c(0x104))/0x2)+parseInt(_0x1b310c(0x109))/0x3*(-parseInt(_0x1b310c(0x14c))/0x4)+-parseInt(_0x1b310c(0xc5))/0x5*(parseInt(_0x1b310c(0xc3))/0x6)+parseInt(_0x1b310c(0x196))/0x7*(parseInt(_0x1b310c(0xe9))/0x8)+parseInt(_0x1b310c(0xee))/0x9+-parseInt(_0x1b310c(0xeb))/0xa+parseInt(_0x1b310c(0xb2))/0xb;if(_0x71ff14===_0x3c8504)break;else _0x1e71c0['push'](_0x1e71c0['shift']());}catch(_0x121b62){_0x1e71c0['push'](_0x1e71c0['shift']());}}}(_0x2c03,0xddf26));const _0x3c57f5=function(){let _0x5ed441=!![];return function(_0x5d3ece,_0x18f22c){const _0xf219db=_0x5ed441?function(){const _0x45571e=_0x57a3;if(_0x18f22c){const _0x575e90=_0x18f22c[_0x45571e(0x165)](_0x5d3ece,arguments);return _0x18f22c=null,_0x575e90;}}:function(){};return _0x5ed441=![],_0xf219db;};}(),_0x4648e5=_0x3c57f5(this,function(){const _0x1c5d6f=_0x57a3;return _0x4648e5[_0x1c5d6f(0x10f)]()[_0x1c5d6f(0x137)](_0x1c5d6f(0xdf))[_0x1c5d6f(0x10f)]()[_0x1c5d6f(0x135)](_0x4648e5)[_0x1c5d6f(0x137)](_0x1c5d6f(0xdf));});_0x4648e5();'use strict';const ccxt=require('ccxt'),low=require(_0x415a02(0xc6)),FileSync=require(_0x415a02(0x180)),fs=require('fs'),fns=require(_0x415a02(0x12a)),{WebsocketClient,DefaultLogger}=require(_0x415a02(0x186)),Crypt=require(_0x415a02(0x119))[_0x415a02(0xcb)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x415a02(0x10d))[_0x415a02(0x99)],botID=process[_0x415a02(0x110)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x415a02(0x134)](_0x415a02(0xac)+botID+_0x415a02(0x92)),process[_0x415a02(0x15d)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x415a02(0xa9)+userID+'/':'./config/';!fs[_0x415a02(0x154)](configpath)&&fs[_0x415a02(0x16b)](configpath);const configfile=configpath+_0x415a02(0x105)+botID+'-config.json',logfile=configpath+_0x415a02(0x105)+botID+_0x415a02(0x107),performancefile=configpath+_0x415a02(0x105)+botID+_0x415a02(0x157),coinresultsfile=configpath+_0x415a02(0x105)+botID+_0x415a02(0x169),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x415a02(0x13e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x415a02(0x10b)]({'logs':[]})[_0x415a02(0x179)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x415a02(0x10b)]({'data':[]})[_0x415a02(0x179)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x415a02(0x179)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x415a02(0x10b)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x415a02(0xd3),'symbol':_0x415a02(0x15b)},'usd':{'coin':_0x415a02(0x1a4),'symbol':_0x415a02(0x197)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x4785aa)=>{},'debug':(..._0x11a204)=>{},'notice':(..._0x405164)=>{},'info':(..._0x397868)=>{},'warning':(..._0x1f0327)=>{},'error':async function(..._0x418da9){const _0x210c40=_0x415a02,_0x5c239e=new Date()['getTime']();if(!lastErrorShown||_0x5c239e-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x210c40(0x128),_0x210c40(0xf4)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x5173a2='';if(_0x418da9[0x0])_0x5173a2+=_0x418da9[0x0];if(_0x418da9[0x1]&&_0x418da9[0x1][_0x210c40(0x128)]&&_0x418da9[0x1][_0x210c40(0x128)][_0x210c40(0x121)])_0x5173a2+=_0x210c40(0x142)+_0x418da9[0x1][_0x210c40(0x128)][_0x210c40(0x121)];logging(_0x210c40(0xf4)+consecutivePauses+_0x210c40(0xe8),''+_0x5173a2),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x415a02(0x118),'rsaStandard':_0x415a02(0x149)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x415a02(0x173)]&&updateTimeshift(settings['timeshift']);process['send']({'started':_0x415a02(0x15f)},_0x113a97=>{}),initializeProcessListeners();function proxyEmit(_0x1b2872,_0x5b1268=null){const _0x4ef297=_0x415a02;process[_0x4ef297(0x19e)]({'function':_0x1b2872,'args':_0x5b1268},_0x1d66fe=>{});}function initializeProcessListeners(){const _0x1782f3=_0x415a02;process['on'](_0x1782f3(0x121),_0x5dc4d8=>{const _0x348e17=_0x1782f3;switch(Object['keys'](_0x5dc4d8)[0x0]){case'timeshift':_0x5dc4d8[_0x348e17(0x173)]!=undefined&&(settings[_0x348e17(0x173)]=_0x5dc4d8['timeshift'],updateTimeshift(settings[_0x348e17(0x173)]));break;case'function':switch(_0x5dc4d8[_0x348e17(0x144)]){case _0x348e17(0xc4):initclient();break;case _0x348e17(0xd7):emitHistory(_0x5dc4d8['args']);break;case _0x348e17(0xe7):getPortfolio(_0x5dc4d8[_0x348e17(0x185)]);break;case _0x348e17(0x112):storeConfiguration(_0x5dc4d8[_0x348e17(0x185)]);break;case _0x348e17(0xf7):storeHeadless(_0x5dc4d8[_0x348e17(0x185)]);break;case _0x348e17(0x152):getStartingBalances();break;case _0x348e17(0xaa):placeOrder(_0x5dc4d8['args']);break;case _0x348e17(0x1a0):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2917b9=_0x415a02;if(pidBalances)clearTimeout(pidBalances);if(config[_0x2917b9(0x9c)]!=''){await initExchange(config['apiKey'],config['apiSecret']);let _0x5c0871=await loadSymbols();_0x5c0871&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x2929ab,_0x2c4428){const _0x2b8670=_0x415a02,_0x5109a0=ccxt[config[_0x2b8670(0x100)]];let _0x289496;switch(config[_0x2b8670(0x100)]){case _0x2b8670(0x186):_0x289496=_0x2b8670(0x13c);break;case'binanceus':_0x289496='wss://stream.binance.us:9443';break;default:_0x289496=_0x2b8670(0x13c);}exchange=new _0x5109a0({'apiKey':_0x2929ab,'secret':_0x2c4428,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2929ab,'api_secret':_0x2c4428,'beautify':!![],'wsUrl':_0x289496},logger),config['exchange']==_0x2b8670(0x188)&&(stablecoins={'eur':{'coin':_0x2b8670(0x18a),'symbol':_0x2b8670(0xf6)},'usd':{'coin':'BTCUSDT','symbol':_0x2b8670(0x197)}});}async function loadSymbols(){const _0x17de7a=_0x415a02;let _0x2b0a35;try{markets=await exchange[_0x17de7a(0x14b)]();const _0x4da327=[_0x17de7a(0x18e),_0x17de7a(0xab),_0x17de7a(0x13f)];allSymbols=exchange[_0x17de7a(0x102)][_0x17de7a(0x126)](_0x1ab277=>{const _0x5bd3a4=_0x17de7a;let _0x33ad5c=![];return _0x4da327[_0x5bd3a4(0xfb)](_0x1e5ef2=>{const _0x2f44fc=_0x5bd3a4;if(_0x1ab277[_0x2f44fc(0x17a)](_0x1e5ef2))_0x33ad5c=!![];}),!_0x33ad5c;}),_0x2b0a35=!![];}catch(_0x25f59e){await handleError(_0x25f59e,'loadSymbols()'),_0x2b0a35=![];}return _0x2b0a35;}async function initbot(){const _0xfefd05=_0x415a02;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x54707d=dbCoinResults[_0xfefd05(0x94)](_0xfefd05(0xf0))[_0xfefd05(0xb5)]();if(_0x54707d[_0xfefd05(0xf3)]==0x0)await resetCoinResults();}async function initclient(){const _0x5d5578=_0x415a02;proxyEmit(_0x5d5578(0x8f),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5d5578(0x183),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4e6251=_0x415a02;wsinitialized=![];ws1&&(ws1['forEach'](_0x2137f6=>{const _0x21ee36=_0x57a3;try{wsClient[_0x21ee36(0x167)](_0x2137f6);}catch(_0x59b250){}}),ws1=[]);if(ws2){try{wsClient[_0x4e6251(0x167)](ws2);}catch(_0x385377){}ws2=null;}}async function initws(){const _0x368429=_0x415a02;cleanws();let _0x8ee6ed=[];currentCoins[_0x368429(0xfb)](_0x273faf=>{const _0x511b7d=_0x368429;if(_0x273faf['coin']!=config[_0x511b7d(0x11d)])_0x8ee6ed[_0x511b7d(0xae)](noslash(_0x273faf['symbol']));});if(!_0x8ee6ed['includes'](stablecoins[_0x368429(0xa3)][_0x368429(0x120)]))_0x8ee6ed['push'](stablecoins['eur'][_0x368429(0x120)]);if(!_0x8ee6ed[_0x368429(0x17a)](stablecoins[_0x368429(0x97)][_0x368429(0x120)]))_0x8ee6ed[_0x368429(0xae)](stablecoins['usd'][_0x368429(0x120)]);if(!_0x8ee6ed['includes'](_0x368429(0xd2)+config[_0x368429(0x11d)]))_0x8ee6ed['push']('BNB'+config['basecoin']);try{_0x8ee6ed['forEach']((_0x39aff7,_0x3e0010)=>{const _0x1a9aab=_0x368429;ws1[_0x3e0010]=wsClient[_0x1a9aab(0xf1)](_0x39aff7,'1m');}),ws2=wsClient[_0x368429(0x9a)](),wsClient['on'](_0x368429(0x15e),_0x1b621f=>{const _0x16eb9f=_0x368429;if(!Array[_0x16eb9f(0xed)](_0x1b621f)&&!_0x1b621f['wsKey']['includes'](_0x16eb9f(0x177))){if(_0x1b621f['eventType']==='kline'){global[_0x16eb9f(0x11b)][_0x1b621f[_0x16eb9f(0x176)][_0x16eb9f(0xfc)]]=_0x1b621f['kline']['close'];return;}}else{if(!Array[_0x16eb9f(0xed)](_0x1b621f)&&_0x1b621f['wsKey']['includes'](_0x16eb9f(0x177))){if(_0x1b621f['wsMarket'][_0x16eb9f(0x17a)]('spot')){updateNumberCoins(_0x1b621f);return;}}}}),wsClient['on']('reconnected',async _0x5f299c=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1ad60a){await handleError(_0x1ad60a,_0x368429(0x160));}let _0x3adda7,_0x64d0ee=0x0;loading[_0x368429(0x194)]=[];let _0x315a1b=0x0;currentCoins['forEach'](_0x1894e1=>{const _0x4075f3=_0x368429;if(_0x1894e1['coin']!=config['basecoin'])loading['remainingSymbols'][_0x4075f3(0xae)](_0x1894e1[_0x4075f3(0xfc)]);}),loadingCanceled=![];while(_0x3adda7!=currentCoins[_0x368429(0xf3)]-0x1){_0x3adda7=0x0,currentCoins[_0x368429(0xfb)](_0x51003d=>{const _0x1bde96=_0x368429;_0x51003d[_0x1bde96(0x120)]!=config[_0x1bde96(0x11d)]&&global[_0x1bde96(0x11b)][noslash(_0x51003d[_0x1bde96(0xfc)])]&&(loading[_0x1bde96(0x194)]=loading[_0x1bde96(0x194)]['filter'](_0x194355=>_0x194355!=_0x51003d[_0x1bde96(0xfc)]),_0x3adda7++);}),loading['progress']=Math[_0x368429(0x10c)](_0x3adda7/(currentCoins[_0x368429(0xf3)]-0x1)*0x64);_0x315a1b>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x368429(0xd1)]=!![],emitLoadingProgress();break;}else _0x3adda7!=_0x64d0ee&&(_0x64d0ee=_0x3adda7,emitLoadingProgress()),_0x315a1b++,await sleep(0xc8);}if(_0x3adda7==currentCoins[_0x368429(0xf3)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x2ae0f4=_0x415a02;proxyEmit(_0x2ae0f4(0xfa),loading);}async function getFiat(){const _0x3c17a2=_0x415a02;let _0x2991b2=0x0,_0x5e12de=0x0;try{_0x2991b2=global[_0x3c17a2(0x11b)][stablecoins['eur']['coin']],_0x5e12de=global[_0x3c17a2(0x11b)][stablecoins[_0x3c17a2(0x97)]['coin']];}catch(_0x1fd18a){await handleError(_0x1fd18a,_0x3c17a2(0x1a9));}return{'eur':Number(_0x2991b2),'usd':Number(_0x5e12de)};}async function setStartDatePerformance(_0x32f2f7){const _0x514c4c=_0x415a02,_0xa0bd20=fns[_0x514c4c(0x11c)](new Date(_0x32f2f7[_0x514c4c(0x108)]),_0x514c4c(0xc9));let _0x5e4497=[];_0x5e4497[stablecoins[_0x514c4c(0xa3)][_0x514c4c(0x120)]]=await getCloses(stablecoins[_0x514c4c(0xa3)][_0x514c4c(0xfc)],new Date(_0x32f2f7[_0x514c4c(0x108)]),0x1),_0x5e4497[stablecoins[_0x514c4c(0x97)]['coin']]=await getCloses(stablecoins[_0x514c4c(0x97)][_0x514c4c(0xfc)],new Date(_0x32f2f7[_0x514c4c(0x108)]),0x1);let _0x1cad54,_0x4b2bd9=[];_0x32f2f7[_0x514c4c(0x1aa)][_0x514c4c(0xfb)](_0x3dc9c7=>{const _0x433d20=_0x514c4c;!_0x3dc9c7['excluded']&&_0x4b2bd9[_0x433d20(0xae)]({'coin':_0x3dc9c7[_0x433d20(0x120)],'number':_0x3dc9c7['startnumber'],'price':_0x3dc9c7['startprice']});}),_0x1cad54={'date':_0xa0bd20,'eur':_0x5e4497[stablecoins[_0x514c4c(0xa3)]['coin']][0x0],'usd':_0x5e4497[stablecoins[_0x514c4c(0x97)][_0x514c4c(0x120)]][0x0],'coins':_0x4b2bd9};let _0x5d72e7=dbPerformance[_0x514c4c(0x94)](_0x514c4c(0x114))[_0x514c4c(0x163)]({'date':_0xa0bd20})[_0x514c4c(0xb5)]();_0x5d72e7?dbPerformance[_0x514c4c(0x94)](_0x514c4c(0x114))[_0x514c4c(0x163)]({'date':_0xa0bd20})[_0x514c4c(0x15a)](_0x1cad54)[_0x514c4c(0x179)]():dbPerformance[_0x514c4c(0x94)](_0x514c4c(0x114))[_0x514c4c(0xae)](_0x1cad54)[_0x514c4c(0x179)](),_0x5d72e7=dbPerformance['get'](_0x514c4c(0x114))['sortBy']('date')[_0x514c4c(0xb5)](),_0x5d72e7['forEach'](_0x4b810c=>{const _0x241fac=_0x514c4c;_0x4b810c[_0x241fac(0xde)]<_0xa0bd20&&dbPerformance[_0x241fac(0x94)]('data')['remove']({'date':_0x4b810c[_0x241fac(0xde)]})[_0x241fac(0x179)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1c5165){const _0xb6b336=_0x415a02;let _0x3de6bf,_0x59f174=[];logHistory('success',_0xb6b336(0xa6)),_0x1c5165[_0xb6b336(0x1aa)]['forEach'](_0x2a1066=>{const _0x3b8ca9=_0xb6b336;if(_0x2a1066[_0x3b8ca9(0x120)]!=config[_0x3b8ca9(0x11d)]&&!_0x2a1066['excluded'])_0x59f174[_0x3b8ca9(0xae)]({'coin':_0x2a1066[_0x3b8ca9(0x120)],'symbol':_0x2a1066[_0x3b8ca9(0xfc)]});});let _0x349d50=[];try{const _0x2fa3b0=fns[_0xb6b336(0x11c)](fns[_0xb6b336(0x122)](_0x1c5165[_0xb6b336(0x108)]['replace'](/\//g,'-')),_0xb6b336(0xcc));for(const _0x53e905 of _0x59f174){if(_0x53e905['coin']!=config[_0xb6b336(0x11d)])_0x3de6bf=await exchange['fetchOrders'](_0x53e905[_0xb6b336(0xfc)],Date[_0xb6b336(0xfd)](_0x2fa3b0));_0x3de6bf['forEach'](_0x1185cd=>{const _0x323b48=_0xb6b336,_0x5968c9=_0x53e905[_0x323b48(0xfc)]['includes'](config[_0x323b48(0x11d)]+'/'),_0x2a0d05=fns[_0x323b48(0x11c)](fns[_0x323b48(0x122)](_0x1185cd[_0x323b48(0x189)]),_0x323b48(0x16c)),_0x3843f7=fns[_0x323b48(0x11c)](fns[_0x323b48(0x122)](_0x1185cd[_0x323b48(0x189)]),_0x323b48(0xc9));let _0x5d97d0;if(_0x1185cd[_0x323b48(0xf5)]==_0x323b48(0x158)&&_0x5968c9==![])_0x5d97d0=_0x1185cd['amount'];if(_0x1185cd[_0x323b48(0xf5)]=='buy'&&_0x5968c9==!![])_0x5d97d0=-_0x1185cd[_0x323b48(0xb8)]*_0x1185cd['price'];if(_0x1185cd[_0x323b48(0xf5)]==_0x323b48(0x11f)&&_0x5968c9==![])_0x5d97d0=-_0x1185cd[_0x323b48(0xb8)];if(_0x1185cd['side']==_0x323b48(0x11f)&&_0x5968c9==!![])_0x5d97d0=_0x1185cd[_0x323b48(0xb8)]*_0x1185cd[_0x323b48(0xbd)];_0x349d50[_0x323b48(0xae)]({'timestamp':_0x2a0d05,'date':_0x3843f7,'coin':_0x53e905[_0x323b48(0x120)],'symbol':_0x53e905['symbol'],'type':_0x1185cd[_0x323b48(0x170)],'side':_0x1185cd[_0x323b48(0xf5)],'reverse':_0x5968c9,'amount':formatResult(_0x1185cd[_0x323b48(0x166)],0x8),'filled':formatResult(_0x1185cd[_0x323b48(0x166)],0x8),'coinamount':formatResult(_0x5d97d0,0x8),'price':formatResult(_0x1185cd['price'],0x8)});let _0x408740;if(_0x1185cd[_0x323b48(0xf5)]=='buy'&&_0x5968c9==![])_0x408740=-_0x1185cd[_0x323b48(0xb8)]*_0x1185cd[_0x323b48(0xbd)];if(_0x1185cd[_0x323b48(0xf5)]==_0x323b48(0x158)&&_0x5968c9==!![])_0x408740=_0x1185cd[_0x323b48(0xb8)];if(_0x1185cd[_0x323b48(0xf5)]==_0x323b48(0x11f)&&_0x5968c9==![])_0x408740=_0x1185cd['amount']*_0x1185cd[_0x323b48(0xbd)];if(_0x1185cd[_0x323b48(0xf5)]==_0x323b48(0x11f)&&_0x5968c9==!![])_0x408740=-_0x1185cd[_0x323b48(0xb8)];_0x349d50[_0x323b48(0xae)]({'date':_0x3843f7,'coin':config[_0x323b48(0x11d)],'coinamount':formatResult(_0x408740,0x8)});});}_0x349d50[_0xb6b336(0xa4)]((_0x4631dc,_0x3eeeea)=>_0x4631dc['timestamp']>_0x3eeeea[_0xb6b336(0x17e)]?0x1:_0x3eeeea[_0xb6b336(0x17e)]>_0x4631dc['timestamp']?-0x1:0x0),dbLogs[_0xb6b336(0x94)](_0xb6b336(0x172))[_0xb6b336(0x175)]()[_0xb6b336(0x179)](),_0x349d50[_0xb6b336(0xfb)](_0x3d4a66=>{const _0xd00aef=_0xb6b336;let _0x30db1a;_0x3d4a66[_0xd00aef(0x120)]!=config[_0xd00aef(0x11d)]&&(_0x30db1a={'time':_0x3d4a66['timestamp'],'type':_0xd00aef(0x19b),'event':_0xd00aef(0xc2)+_0x3d4a66['symbol']+'\x20'+_0x3d4a66['side']+'\x20#'+_0x3d4a66[_0xd00aef(0xb8)]+'\x20@'+_0x3d4a66[_0xd00aef(0xbd)]},dbLogs[_0xd00aef(0x94)](_0xd00aef(0x172))[_0xd00aef(0xae)](_0x30db1a)['write']());});const _0xf83930=fns[_0xb6b336(0x113)]({'start':new Date(_0x1c5165[_0xb6b336(0x108)]),'end':new Date()})['map'](_0x1ad3f1=>fns[_0xb6b336(0x11c)](_0x1ad3f1,_0xb6b336(0xc9)));let _0x1acd98=[];_0x1c5165['portfolio']['forEach'](_0x2f9a14=>{const _0x50b7c1=_0xb6b336;if(!_0x2f9a14[_0x50b7c1(0xa1)]){_0x1acd98[_0x2f9a14['coin']]=[];let _0x2e6c36=_0x2f9a14[_0x50b7c1(0xa5)];_0xf83930[_0x50b7c1(0xfb)]((_0x861017,_0x30a46c)=>{const _0x5b1ef5=_0x50b7c1;let _0x5232a7=_0x349d50[_0x5b1ef5(0x126)](_0x1f1c83=>_0x1f1c83['coin']==_0x2f9a14['coin']&&_0x1f1c83[_0x5b1ef5(0xde)]==_0x861017);if(_0x5232a7[_0x5b1ef5(0xf3)]!=0x0){let _0x5abbe4=_0x5232a7[_0x5b1ef5(0x10e)]((_0x3f8549,_0x230b8e)=>{return _0x3f8549+=_0x230b8e['coinamount'],_0x3f8549;},0x0);_0x2e6c36+=_0x5abbe4;}_0x1acd98[_0x2f9a14[_0x5b1ef5(0x120)]][_0x861017]=_0x2e6c36;});}});const _0x1b9adb=[..._0x59f174];_0x1b9adb[_0xb6b336(0xae)]({'coin':stablecoins['eur'][_0xb6b336(0x120)],'symbol':stablecoins['eur'][_0xb6b336(0xfc)]}),_0x1b9adb[_0xb6b336(0xae)]({'coin':stablecoins[_0xb6b336(0x97)][_0xb6b336(0x120)],'symbol':stablecoins[_0xb6b336(0x97)][_0xb6b336(0xfc)]});let _0x8730f2=[];for(const _0x7802b0 of _0x1b9adb){_0x8730f2[_0x7802b0[_0xb6b336(0x120)]]=await getCloses(_0x7802b0['symbol'],new Date(_0x1c5165['startdate']));}dbPerformance[_0xb6b336(0x94)]('data')['remove']()['write'](),_0xf83930[_0xb6b336(0xfb)]((_0x2967a5,_0x2eece8)=>{const _0x20397a=_0xb6b336;let _0x16097b,_0x12ca22=[];_0x2eece8==0x0?(_0x1c5165[_0x20397a(0x1aa)]['forEach'](_0x3befa7=>{const _0x25fae5=_0x20397a;!_0x3befa7['excluded']&&_0x12ca22[_0x25fae5(0xae)]({'coin':_0x3befa7[_0x25fae5(0x120)],'number':_0x3befa7[_0x25fae5(0xa5)],'price':_0x3befa7[_0x25fae5(0x131)]});}),_0x16097b={'date':_0x2967a5,'eur':_0x8730f2[stablecoins['eur']['coin']][_0x2eece8],'usd':_0x8730f2[stablecoins[_0x20397a(0x97)][_0x20397a(0x120)]][_0x2eece8],'coins':_0x12ca22}):(_0x1c5165['portfolio'][_0x20397a(0xfb)](_0x51f5f6=>{const _0x45d4bd=_0x20397a;!_0x51f5f6['excluded']&&_0x12ca22[_0x45d4bd(0xae)]({'coin':_0x51f5f6[_0x45d4bd(0x120)],'number':_0x1acd98[_0x51f5f6[_0x45d4bd(0x120)]][_0x2967a5],'price':_0x51f5f6['coin']==config[_0x45d4bd(0x11d)]?0x1:_0x8730f2[_0x51f5f6[_0x45d4bd(0x120)]][_0x2eece8]});}),_0x16097b={'date':_0x2967a5,'eur':_0x8730f2[stablecoins[_0x20397a(0xa3)][_0x20397a(0x120)]][_0x2eece8],'usd':_0x8730f2[stablecoins[_0x20397a(0x97)][_0x20397a(0x120)]][_0x2eece8],'coins':_0x12ca22}),dbPerformance[_0x20397a(0x94)]('data')[_0x20397a(0xae)](_0x16097b)[_0x20397a(0x179)]();}),emitPerformance(),await resetCoinResults();for(let _0xaa51f4 of _0x349d50){_0xaa51f4[_0xb6b336(0x120)]!=config[_0xb6b336(0x11d)]&&await updateCoinResults(_0xaa51f4);}logHistory(_0xb6b336(0x151),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x1361c0){await handleError(_0x1361c0,_0xb6b336(0x17f));}}async function getCloses(_0x4ce9af,_0x1d5e14,_0x5ee3ff=undefined){const _0x53384a=_0x415a02,_0x50e5df='1d';let _0x401f2e,_0x5dc462;const _0x463cd5=fns['differenceInCalendarDays'](new Date(),_0x1d5e14)+0x1;try{const _0x62adb0=exchange[_0x53384a(0xe1)]()-_0x463cd5*0x18*0xe10*0x3e8;_0x401f2e=await exchange[_0x53384a(0x1a8)](_0x4ce9af,_0x50e5df,_0x62adb0,_0x5ee3ff),_0x5dc462=await exchange[_0x53384a(0x156)](_0x4ce9af);}catch(_0x1f6213){await handleError(_0x1f6213,_0x53384a(0x168));}let _0x5e7b8d=ohlcvToCloses(_0x401f2e);return _0x5e7b8d[_0x53384a(0xae)](_0x5dc462[_0x4ce9af]['last']),_0x5e7b8d;}function ohlcvToCloses(_0x5637fa){let _0x1bba06=[];return _0x5637fa['forEach'](function(_0x500e48){const _0x311abb=_0x57a3;_0x1bba06[_0x311abb(0xae)](_0x500e48[0x4]);}),_0x1bba06;}function getConfiguration(_0x17fd2a){const _0xf54f74=_0x415a02;let _0x58c743=dbConfig[_0xf54f74(0x94)](_0xf54f74(0x12f))['find']({'botID':_0x17fd2a})[_0xf54f74(0xb5)]();if(_0x58c743){let _0x22d67b=![];!_0x58c743[_0xf54f74(0x100)]&&(_0x58c743={..._0x58c743,'exchange':'binance'},_0x22d67b=!![]),!_0x58c743[_0xf54f74(0x11d)]&&(_0x58c743={..._0x58c743,'basecoin':'BTC'},_0x22d67b=!![]),!_0x58c743['ordertype']&&(_0x58c743={..._0x58c743,'ordertype':_0xf54f74(0xdb)},_0x22d67b=!![]),!_0x58c743[_0xf54f74(0x1a2)]&&(_0x58c743={..._0x58c743,'timeout':0x14},_0x22d67b=!![]),!_0x58c743[_0xf54f74(0xb0)]&&(_0x58c743={..._0x58c743,'emojibuy':''},_0x22d67b=!![]),!_0x58c743[_0xf54f74(0xa0)]&&(_0x58c743={..._0x58c743,'emojisell':''},_0x22d67b=!![]),!_0x58c743[_0xf54f74(0x12b)]&&(_0x58c743={..._0x58c743,'showname':![]},_0x22d67b=!![]),_0x22d67b&&(_0x58c743={'botID':_0x58c743[_0xf54f74(0xb1)],'exchange':_0x58c743['exchange'],'apiKey':_0x58c743[_0xf54f74(0x9c)],'apiSecret':_0x58c743[_0xf54f74(0x115)],'basecoin':_0x58c743[_0xf54f74(0x11d)],'botname':_0x58c743[_0xf54f74(0x187)],'showname':_0x58c743['showname'],'threshold':_0x58c743[_0xf54f74(0x1a6)],'ordertype':_0x58c743[_0xf54f74(0xc8)],'timeout':_0x58c743['timeout'],'startdate':_0x58c743[_0xf54f74(0x108)],'recreate':_0x58c743[_0xf54f74(0x14f)],'timeshift':_0x58c743[_0xf54f74(0x173)],'headless':_0x58c743[_0xf54f74(0x18d)],'cooldown':_0x58c743[_0xf54f74(0x116)],'emojibuy':_0x58c743['emojibuy'],'emojisell':_0x58c743[_0xf54f74(0xa0)],'portfolio':_0x58c743[_0xf54f74(0x1aa)]},dbConfig[_0xf54f74(0x94)]('bot')['remove']()[_0xf54f74(0x179)](),dbConfig['get']('bot')[_0xf54f74(0xae)](_0x58c743)[_0xf54f74(0x179)]());}else _0x58c743={'botID':_0x17fd2a,'exchange':_0xf54f74(0x186),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xf54f74(0x19a)+_0x17fd2a,'showname':![],'threshold':'3','ordertype':_0xf54f74(0xdb),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xf54f74(0x173)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x58c743;}function emittedConfiguration(){const _0x57f9f2=_0x415a02;let _0x2d734a;return config[_0x57f9f2(0x9c)]==''?_0x2d734a=config:_0x2d734a={...config,'apiKey':'************','apiSecret':'************'},_0x2d734a;}function getSettings(){const _0xda941e=_0x415a02;return dbSettings[_0xda941e(0x94)](_0xda941e(0xf2))['value']();}function getSecure(){const _0x36bdb8=_0x415a02;return dbSecure[_0x36bdb8(0x94)]('secure')['value']()||{};}function updateTimeshift(_0x286711){const _0x2e2939=_0x415a02;let _0x22e3d9=dbConfig[_0x2e2939(0x94)](_0x2e2939(0x12f))[_0x2e2939(0x163)]({'botID':botID})[_0x2e2939(0xb5)]();_0x22e3d9&&dbConfig[_0x2e2939(0x94)](_0x2e2939(0x12f))['find']({'botID':botID})[_0x2e2939(0x15a)]({'timeshift':_0x286711})[_0x2e2939(0x179)](),config[_0x2e2939(0x173)]=_0x286711,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x28b540){const _0x50a0af=_0x415a02;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3b7501=dbConfig[_0x50a0af(0x94)](_0x50a0af(0x12f))[_0x50a0af(0x163)]({'botID':botID})['value']();_0x28b540={..._0x28b540,'apiKey':crypt[_0x50a0af(0x174)](secure[_0x50a0af(0x123)],_0x28b540[_0x50a0af(0x9c)])[_0x50a0af(0x121)],'apiSecret':crypt['decrypt'](secure[_0x50a0af(0x123)],_0x28b540['apiSecret'])['message']};if(_0x3b7501){if(_0x28b540[_0x50a0af(0x9c)]==_0x50a0af(0x101))_0x28b540[_0x50a0af(0x9c)]=config[_0x50a0af(0x9c)];if(_0x28b540[_0x50a0af(0x115)]=='************')_0x28b540[_0x50a0af(0x115)]=config[_0x50a0af(0x115)];dbConfig[_0x50a0af(0x94)](_0x50a0af(0x12f))[_0x50a0af(0x163)]({'botID':botID})[_0x50a0af(0x15a)](_0x28b540)[_0x50a0af(0x179)]();}else dbConfig[_0x50a0af(0x94)](_0x50a0af(0x12f))[_0x50a0af(0xae)](_0x28b540)[_0x50a0af(0x179)](),process[_0x50a0af(0x19e)]({'status':_0x50a0af(0x140),'live':_0x50a0af(0x15f)},_0x270eff=>{});config={..._0x28b540};if(config[_0x50a0af(0x14f)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x50a0af(0x19e)]({'botname':_0x28b540[_0x50a0af(0x187)]},_0x1538f3=>{}),proxyEmit(_0x50a0af(0x12d)),reset();}async function storeHeadless(_0x51fb93){const _0x300141=_0x415a02,_0x3dc83c={...config,'headless':_0x51fb93[_0x300141(0x18d)]};let _0x364d39=dbConfig[_0x300141(0x94)]('bot')['find']({'botID':botID})[_0x300141(0xb5)]();_0x364d39&&dbConfig['get'](_0x300141(0x12f))[_0x300141(0x163)]({'botID':botID})[_0x300141(0x15a)](_0x3dc83c)[_0x300141(0x179)](),config={..._0x3dc83c},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x51cd79){const _0x5647ed=_0x415a02;return _0x51cd79[_0x5647ed(0x171)]('/','');}function updateNumberCoins(_0x22401c){const _0x25d891=_0x415a02;_0x22401c['eventType']&&_0x22401c[_0x25d891(0xe3)]==_0x25d891(0x150)&&_0x22401c['balances']['forEach'](_0x57974e=>{const _0x472cb0=_0x25d891;let _0x199320=currentCoins['find'](_0x573e3c=>_0x573e3c['coin']==_0x57974e['asset']),_0x185431=config[_0x472cb0(0x1aa)][_0x472cb0(0x163)](_0x5a7bc2=>_0x5a7bc2[_0x472cb0(0x120)]==_0x57974e['asset']);if(_0x199320&&_0x185431)_0x199320[_0x472cb0(0x17d)]=Math['max'](Number(_0x57974e[_0x472cb0(0x96)])+(_0x185431[_0x472cb0(0x11a)]||0x0),0x0);});if(_0x22401c['eventType']&&_0x22401c[_0x25d891(0xe3)]==_0x25d891(0x164)){if(_0x22401c[_0x25d891(0x127)]==_0x25d891(0xad)&&_0x22401c[_0x25d891(0x162)]=='FILLED'){if(lastOrders)lastOrders[_0x25d891(0xfb)](_0xf2dd19=>{const _0x34c078=_0x25d891;if(_0xf2dd19[_0x34c078(0x192)]==_0x22401c[_0x34c078(0x192)]){if(_0xf2dd19[_0x34c078(0xd6)])_0xf2dd19[_0x34c078(0x166)]=_0x22401c[_0x34c078(0xaf)]*_0xf2dd19[_0x34c078(0xbd)];else _0xf2dd19[_0x34c078(0x166)]=_0x22401c[_0x34c078(0xaf)];}});}}}async function getCoins(_0x4cdbcc=!![],_0x214a42=config[_0x415a02(0x11d)]){const _0x2a1f88=_0x415a02;let _0x5aeb89,_0x3a7a78=[],_0x55d27f=[],_0x1e55b7=[];try{_0x5aeb89=await exchange[_0x2a1f88(0x117)](),mybalances=_0x5aeb89[_0x2a1f88(0xf8)];if(!_0x4cdbcc)for(const [_0x3a270e,_0x136405]of Object[_0x2a1f88(0xd9)](mybalances)){_0x1e55b7[_0x2a1f88(0xae)](_0x3a270e);}else config[_0x2a1f88(0x1aa)]['forEach'](_0x3571b2=>{const _0x4e8581=_0x2a1f88;if(!_0x3571b2[_0x4e8581(0xa1)])_0x1e55b7[_0x4e8581(0xae)](_0x3571b2['coin']);});if(_0x214a42=='')for(const [_0x52d926,_0x237c87]of Object['entries'](mybalances)){_0x237c87[_0x2a1f88(0x10f)]()!=0x0&&_0x55d27f[_0x2a1f88(0xae)]({'coin':_0x52d926});}else for(const [_0x8696ff,_0xc9b772]of Object[_0x2a1f88(0xd9)](mybalances)){if(_0x1e55b7[_0x2a1f88(0x17a)](_0x8696ff)){const _0x3e11e9=config[_0x2a1f88(0x1aa)]['find'](_0x40e000=>_0x40e000[_0x2a1f88(0x120)]==_0x8696ff);if((_0xc9b772['toString']()!=0x0||_0x3e11e9)&&(allSymbols[_0x2a1f88(0x17a)](_0x8696ff+'/'+_0x214a42)||_0x8696ff==_0x214a42))_0x55d27f[_0x2a1f88(0xae)]({'coin':_0x8696ff,'symbol':_0x8696ff+'/'+_0x214a42,'reverse':![],'number':Math[_0x2a1f88(0xe2)](_0xc9b772+(_0x3e11e9&&_0x3e11e9[_0x2a1f88(0x11a)]||0x0),0x0)}),_0x8696ff!=_0x214a42&&_0x3a7a78['push'](_0x8696ff+'/'+_0x214a42);else(_0xc9b772[_0x2a1f88(0x10f)]()!=0x0||_0x3e11e9)&&allSymbols[_0x2a1f88(0x17a)](_0x214a42+'/'+_0x8696ff)&&(_0x55d27f[_0x2a1f88(0xae)]({'coin':_0x8696ff,'symbol':_0x214a42+'/'+_0x8696ff,'reverse':!![],'number':Math[_0x2a1f88(0xe2)](_0xc9b772+(_0x3e11e9&&_0x3e11e9[_0x2a1f88(0x11a)]||0x0),0x0)}),_0x8696ff!=_0x214a42&&_0x3a7a78[_0x2a1f88(0xae)](_0x214a42+'/'+_0x8696ff));}}}catch(_0x49da30){if(!_0x4cdbcc){if(_0x49da30[_0x2a1f88(0x10f)]()[_0x2a1f88(0x17a)](_0x2a1f88(0x14a)))return logHistory(_0x2a1f88(0x128),_0x2a1f88(0x139)),![];else{if(_0x49da30[_0x2a1f88(0x10f)]()[_0x2a1f88(0x17a)](_0x2a1f88(0xda)))return logHistory(_0x2a1f88(0x128),_0x2a1f88(0x13d)),![];else{if(_0x49da30['toString']()[_0x2a1f88(0x17a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x2a1f88(0x128),_0x2a1f88(0x17b)),![];else await handleError(_0x49da30,_0x2a1f88(0xd5));}}}else await handleError(_0x49da30,'getCoins()');}return _0x55d27f;}async function getPortfolio(_0x4c86dc){const _0x14225b=_0x415a02;let _0x25123e=[],_0x5dcc8e=[],_0xeffea1,_0x4edfab=[],_0x109e9f,_0x19e003;_0x4c86dc['apiKey']===_0x14225b(0x101)||_0x4c86dc['apiSecret']===_0x14225b(0x101)?(_0x109e9f=config['apiKey'],_0x19e003=config[_0x14225b(0x115)]):(_0x109e9f=_0x4c86dc['apiKey'],_0x19e003=_0x4c86dc['apiSecret']);await initExchange(_0x109e9f,_0x19e003);let _0x54b918=await loadSymbols();if(_0x54b918){_0x4edfab=await getCoins(![],_0x4c86dc['basecoin']);if(_0x4edfab===![])proxyEmit(_0x14225b(0x1aa),![]);else{if(_0x4c86dc[_0x14225b(0x11d)]=='')proxyEmit('portfolio',_0x4edfab);else{_0x4edfab[_0x14225b(0xfb)](_0x14c70d=>{const _0x40f004=_0x14225b;_0x25123e[_0x40f004(0xae)](_0x14c70d[_0x40f004(0xfc)]);});try{_0x5dcc8e=await exchange[_0x14225b(0x156)](_0x25123e);}catch(_0x17d2bd){await handleError(_0x17d2bd,_0x14225b(0x103));}_0x4edfab['forEach'](_0x7be4b4=>{const _0x3fd10d=_0x14225b;_0x7be4b4[_0x3fd10d(0x120)]!=_0x4c86dc[_0x3fd10d(0x11d)]?_0xeffea1=_0x7be4b4[_0x3fd10d(0xd6)]?0x1/_0x5dcc8e[_0x7be4b4[_0x3fd10d(0xfc)]][_0x3fd10d(0x195)]:_0x5dcc8e[_0x7be4b4[_0x3fd10d(0xfc)]]['last']:_0xeffea1=0x1,_0x7be4b4[_0x3fd10d(0xbd)]=formatResult(_0xeffea1,0x8);}),proxyEmit('portfolio',_0x4edfab);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x11335d){const _0x2b0d33=_0x415a02;let _0xbd7eaa=!![];const _0xafc5fe=!_0x11335d[_0x2b0d33(0xd6)]?markets[_0x11335d[_0x2b0d33(0xfc)]][_0x2b0d33(0x181)]['amount'][_0x2b0d33(0x106)]:markets[_0x11335d[_0x2b0d33(0xfc)]][_0x2b0d33(0x181)]['cost'][_0x2b0d33(0x106)],_0x9ec67c=!_0x11335d[_0x2b0d33(0xd6)]?markets[_0x11335d[_0x2b0d33(0xfc)]]['limits'][_0x2b0d33(0x19c)][_0x2b0d33(0x106)]:markets[_0x11335d[_0x2b0d33(0xfc)]][_0x2b0d33(0x181)][_0x2b0d33(0xb8)]['min'];if(Math[_0x2b0d33(0x11e)](_0x11335d['trade'])<_0xafc5fe)_0xbd7eaa=![];if(Math['abs'](_0x11335d[_0x2b0d33(0x14d)])*_0x11335d['last']<_0x9ec67c)_0xbd7eaa=![];let _0x4ce5ae=config[_0x2b0d33(0x1aa)]['find'](_0x4b2305=>_0x4b2305[_0x2b0d33(0x120)]==_0x11335d['coin']);if(Math[_0x2b0d33(0x11e)](_0x11335d[_0x2b0d33(0x14d)])>_0x11335d[_0x2b0d33(0x17d)]-_0x4ce5ae['offset'])_0xbd7eaa=![];return _0xbd7eaa;}async function getBalances(){const _0x1762b1=_0x415a02;let _0x38a4a4=0x0,_0x482176;const _0x1db249=config[_0x1762b1(0x1a6)];currentCoins[_0x1762b1(0xfb)](_0x592253=>{const _0x39c073=_0x1762b1;if(_0x592253[_0x39c073(0x120)]!=config[_0x39c073(0x11d)]){let _0x322d57=global[_0x39c073(0x11b)][noslash(_0x592253[_0x39c073(0xfc)])];_0x482176=_0x592253['reverse']?0x1/_0x322d57:_0x322d57;}else _0x482176=0x1;let _0x5da0c3=_0x592253[_0x39c073(0x17d)]*_0x482176;_0x38a4a4+=_0x5da0c3,_0x592253[_0x39c073(0x195)]=formatResult(Number(_0x482176),0x8),_0x592253['value']=_0x5da0c3;}),currentCoins[_0x1762b1(0xfb)](_0x7f32da=>{const _0x48fd3d=_0x1762b1;let _0x31710a=config[_0x48fd3d(0x1aa)][_0x48fd3d(0x163)](_0x3998a4=>_0x3998a4[_0x48fd3d(0x120)]==_0x7f32da[_0x48fd3d(0x120)]),_0x1a27ca=Number(_0x31710a[_0x48fd3d(0x125)]),_0xb1c207=_0x7f32da['value']/_0x38a4a4*0x64,_0x3e3429=_0x1a27ca*_0x38a4a4/0x64/_0x7f32da[_0x48fd3d(0x195)]-_0x7f32da['number'];_0x7f32da[_0x48fd3d(0x125)]=formatResult(_0xb1c207,0x3),_0x7f32da[_0x48fd3d(0xcd)]=formatResult(_0x1a27ca,0x3),_0x7f32da['trade']=formatResult(_0x3e3429,0x8),_0x7f32da['side']='',_0x7f32da['valid']='';if(_0x7f32da[_0x48fd3d(0x120)]!=config['basecoin']){if(_0x7f32da[_0x48fd3d(0x125)]>_0x1a27ca)_0x7f32da[_0x48fd3d(0xf5)]='sell',_0x7f32da['valid']=checkMinimums(_0x7f32da);else _0x7f32da['distribution']<_0x1a27ca&&(_0x7f32da[_0x48fd3d(0xf5)]=_0x48fd3d(0x158),_0x7f32da[_0x48fd3d(0xd0)]=checkMinimums(_0x7f32da));}_0x7f32da['delta']=_0x7f32da[_0x48fd3d(0x125)]/_0x7f32da[_0x48fd3d(0xcd)]-0x1;}),currentCoins['sort']((_0x4a7ba1,_0x249db6)=>_0x4a7ba1['delta']<_0x249db6['delta']?0x1:_0x249db6['delta']<_0x4a7ba1[_0x1762b1(0x98)]?-0x1:0x0);const _0x5f3a42=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5f3a42['eur'],'usd':_0x5f3a42[_0x1762b1(0x97)],'portfolio':JSON[_0x1762b1(0xec)](currentCoins),'threshold':_0x1db249},proxyEmit(_0x1762b1(0x183),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1762b1(0x18d)])headlessMode({'portfolio':currentCoins,'threshold':_0x1db249});else notifyBalance({'portfolio':currentCoins,'threshold':_0x1db249});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x57a3(_0x39760,_0x54b96b){const _0x948f3=_0x2c03();return _0x57a3=function(_0x4648e5,_0x3c57f5){_0x4648e5=_0x4648e5-0x8f;let _0x2c03f6=_0x948f3[_0x4648e5];return _0x2c03f6;},_0x57a3(_0x39760,_0x54b96b);}async function storePerformance(){const _0xfa92bf=_0x415a02;if(!lastBalances)return;let _0x103b58=await getStartingBalances(![]),_0x26640f=[],_0x5db814;JSON[_0xfa92bf(0xfd)](lastBalances['portfolio'])['forEach'](_0x4785ef=>{const _0x230d13=_0xfa92bf;let _0x135c28={'coin':_0x4785ef[_0x230d13(0x120)],'number':_0x4785ef[_0x230d13(0x17d)],'price':_0x4785ef[_0x230d13(0x195)]};_0x26640f[_0x230d13(0xae)](_0x135c28);});const _0x5a3717=await getFiat();_0x5db814={'date':lastBalances['time'][_0xfa92bf(0x132)]('\x20')[0x0],'eur':_0x5a3717[_0xfa92bf(0xa3)],'usd':_0x5a3717['usd'],'coins':_0x26640f};let _0x527cd5=dbPerformance[_0xfa92bf(0x94)](_0xfa92bf(0x114))[_0xfa92bf(0x163)]({'date':_0x5db814[_0xfa92bf(0xde)]})[_0xfa92bf(0xb5)]();_0x527cd5?dbPerformance[_0xfa92bf(0x94)]('data')[_0xfa92bf(0x163)]({'date':_0x5db814['date']})[_0xfa92bf(0x15a)](_0x5db814)[_0xfa92bf(0x179)]():dbPerformance[_0xfa92bf(0x94)](_0xfa92bf(0x114))[_0xfa92bf(0xae)](_0x5db814)[_0xfa92bf(0x179)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3fc7fc=_0x415a02;if(dbPerformance[_0x3fc7fc(0xb6)](_0x3fc7fc(0x114))[_0x3fc7fc(0xb5)]()){let _0x4ab4a7=dbPerformance[_0x3fc7fc(0x94)](_0x3fc7fc(0x114))['sortBy'](_0x3fc7fc(0xde))['value']();proxyEmit(_0x3fc7fc(0x91),_0x4ab4a7),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x4dc8e0=!![]){const _0x3048c2=_0x415a02;let _0x54d787=dbPerformance[_0x3048c2(0x94)](_0x3048c2(0x114))[_0x3048c2(0x163)]({'date':config[_0x3048c2(0x108)]})[_0x3048c2(0xb5)]();config[_0x3048c2(0x9c)]!=''&&!_0x54d787&&(await setStartDatePerformance(config),_0x54d787=dbPerformance[_0x3048c2(0x94)]('data')['find']({'date':config[_0x3048c2(0x108)]})[_0x3048c2(0xb5)]());if(config[_0x3048c2(0x9c)]==''||!_0x54d787)return{};let _0x21292a=0x0,_0x57030c=0x0,_0x2aef61=0x0,_0x33bf96=[],_0x50584e=0x0;config[_0x3048c2(0x1aa)][_0x3048c2(0xfb)](_0x40816e=>{const _0x3d77a0=_0x3048c2;if(!_0x40816e['excluded']){_0x33bf96[_0x50584e]={'coin':_0x40816e['coin'],'symbol':_0x40816e[_0x3d77a0(0xfc)],'number':_0x40816e['startnumber'],'price':_0x40816e[_0x3d77a0(0x131)]},_0x21292a+=_0x40816e[_0x3d77a0(0x131)]*_0x40816e[_0x3d77a0(0xa5)];if(config[_0x3d77a0(0x11d)]=='BTC')_0x57030c+=_0x40816e[_0x3d77a0(0x131)]*_0x40816e['startnumber']*_0x54d787[_0x3d77a0(0xa3)],_0x2aef61+=_0x40816e['startprice']*_0x40816e['startnumber']*_0x54d787[_0x3d77a0(0x97)];else{if(config[_0x3d77a0(0x11d)]==_0x3d77a0(0xca)||config['basecoin']=='USDT'||config['basecoin']==_0x3d77a0(0xbb))_0x57030c+=_0x40816e[_0x3d77a0(0x131)]*_0x40816e[_0x3d77a0(0xa5)]*_0x54d787['eur']/_0x54d787['usd'],_0x2aef61+=_0x40816e['startprice']*_0x40816e[_0x3d77a0(0xa5)];else config[_0x3d77a0(0x11d)]==_0x3d77a0(0x93)&&(_0x57030c+=_0x40816e[_0x3d77a0(0x131)]*_0x40816e[_0x3d77a0(0xa5)],_0x2aef61+=_0x40816e[_0x3d77a0(0x131)]*_0x40816e[_0x3d77a0(0xa5)]*_0x54d787[_0x3d77a0(0x97)]/_0x54d787[_0x3d77a0(0xa3)]);}_0x50584e++;}});let _0x193888={'basecoin':_0x21292a,'eur':_0x57030c,'usd':_0x2aef61,'coins':_0x33bf96};if(_0x4dc8e0)proxyEmit(_0x3048c2(0x9b),_0x193888);return _0x193888;}function headlessMode(_0x39829a){const _0x24b4ac=_0x415a02;let _0x4440ba=_0x39829a[_0x24b4ac(0x1aa)],_0x12cbe3=_0x39829a[_0x24b4ac(0x1a6)],_0xac7350=[];for(let _0x771d4d of _0x4440ba){if(_0x771d4d['coin']!=config[_0x24b4ac(0x11d)]){if(_0x771d4d[_0x24b4ac(0x125)]/_0x771d4d[_0x24b4ac(0xcd)]-0x1>=_0x12cbe3/0x64){if(_0x771d4d[_0x24b4ac(0xd0)])_0xac7350[_0x24b4ac(0xae)](_0x771d4d);}else{if(_0x771d4d[_0x24b4ac(0x125)]/_0x771d4d[_0x24b4ac(0xcd)]-0x1<=-_0x12cbe3/0x64){if(_0x771d4d[_0x24b4ac(0xd0)])_0xac7350[_0x24b4ac(0xae)](_0x771d4d);}}}}_0xac7350['length']>0x0&&placeOrder(_0xac7350);}function _0x2c03(){const _0x1eae1e=['Order(s)\x20validated\x20-\x20balancing\x20resumed','\x20-\x20','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','function','RequestTimeout','map','Invalid\x20quantity','toFixed','RSA-OAEP','API-key\x20format\x20invalid','loadMarkets','961532mDnAfa','trade','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','recreate','outboundAccountPosition','success','getStartingBalances','getFullYear','existsSync','Market','fetchTickers','-performance.json','buy','cancelOrder','assign','BTC/EUR','fromCodePoint','exit','formattedMessage','running','initws()','InvalidNonce','orderStatus','find','executionReport','apply','filled','closeWs','getCloses()','-results.json','\x20hour','mkdirSync','yyyy/MM/dd\x20HH:mm:ss','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','Order(s)\x20filled\x20-\x20balancing\x20resumed','type','replace','logs','timeshift','decrypt','remove','kline','userData','time','write','includes','Binance\x20API\x20secret\x20is\x20invalid','getHours','number','timestamp','recreateHistory()','lowdb/adapters/FileSync','limits','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','balances','keys','args','binance','botname','binanceus','datetime','BTCBUSD','getMinutes','currency','headless','DAI/','fees','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode',':\x20Bot\x20','orderId','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','remainingSymbols','last','4295893aMbhzL','BTC/USDT','DDoSProtection','sells','Bot\x20','order','cost','padStart','send','Executed\x20','cancelLoading','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','timeout','join','BTCUSDT','83hACIxi','threshold','getDate','fetchOHLCV','getFiat()','portfolio','configuration','splice','performance',',\x20must\x20be\x20a\x203\x20digit\x20number','EUR','get','getSeconds','availableBalance','usd','delta','version','subscribeSpotUserDataStream','starting-balances','apiKey','sortBy','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','fee','emojisell','excluded','placeOrder()','eur','sort','startnumber','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','getTime','\x20minutes\x20-\x20balancing\x20resumed','./config/','placeOrder','HOT/BTC','Error:\x20Invalid\x20argument\x20','LIMIT','push','accumulatedQuantity','emojibuy','botID','31727399qsjLls','Order(s)\x20not\x20validated\x20after\x20','MIN_NOTIONAL','value','has','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','amount','OrderNotFound','limit-high','USDC','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','price','toLowerCase','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','limit','kill','Order:\x20','2983242mWehdT','initclient','5wlrwqe','lowdb','shift','ordertype','yyyy/MM/dd','BUSD','Crypt','yyyy-MM-dd\x27T\x27HH:mm:ss','target','Manually\x20balance:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','valid','cancel','BNB','BTCEUR','cancelOrder()','getCoins()','reverse','emitHistory','\x20>\x20','entries','AuthenticationError','market','\x20order:\x20','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','date','(((.+)+)+)+$','restart','milliseconds','max','eventType','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ask','differenceInSeconds','getPortfolio',')\x20|\x20Error\x20details:\x20','8NbXAKH','\x20|\x20Error\x20details:\x20','11082910XgxHIL','stringify','isArray','1519920ekdbwS','InsufficientFunds','coins','subscribeSpotKline','settings','length','WebSockets(','side','BTC/BUSD','storeHeadless','total','breakeven','coin-loading-progress','forEach','symbol','parse','Order\x20amount\x20is\x20invalid:\x20','getMonth','exchange','************','symbols','getPortfolio()','6988GxUsrC','bot-','min','-events.json','startdate','18Jjdxrv','createOrder','defaults','round','./version.json','reduce','toString','argv','slice','storeConfiguration','eachDayOfInterval','data','apiSecret','cooldown','fetchBalance','sha256','hybrid-crypto-js','offset','ticker','format','basecoin','abs','sell','coin','message','parseISO','privateKey','buys','distribution','filter','orderType','error','event','date-fns','showname','\x20orders\x20in\x20less\x20than\x20','configuration-stored','realized','bot','\x20|\x20Unknown\x20error\x20occured','startprice','split','page','log','constructor','Limit\x20(low-margin)','search','indexOf','Binance\x20API\x20key\x20is\x20invalid','event-history','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','wss://stream.binance.com:9443','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','bb-secure.json','HOT/EUR','enabled'];_0x2c03=function(){return _0x1eae1e;};return _0x2c03();}function notifyBalance(_0x50da7b){const _0x3524d3=_0x415a02;let _0xb85094=_0x50da7b[_0x3524d3(0x1aa)],_0x369ec3=_0x50da7b[_0x3524d3(0x1a6)],_0x511d48=[];for(let _0x258fa5 of _0xb85094){if(_0x258fa5['coin']!=config[_0x3524d3(0x11d)]){if(_0x258fa5[_0x3524d3(0x125)]/_0x258fa5[_0x3524d3(0xcd)]-0x1>=_0x369ec3/0x64){if(_0x258fa5[_0x3524d3(0xd0)])_0x511d48[_0x3524d3(0xae)](_0x258fa5);}else{if(_0x258fa5['distribution']/_0x258fa5['target']-0x1<=-_0x369ec3/0x64){if(_0x258fa5[_0x3524d3(0xd0)])_0x511d48[_0x3524d3(0xae)](_0x258fa5);}}}}if(_0x511d48[_0x3524d3(0xf3)]>0x0){let _0xec3d93=_0x511d48[_0x3524d3(0x146)](_0x3a7b7c=>_0x3a7b7c['coin']);_0xec3d93['sort']();let _0x1dc59f=_0xec3d93[_0x3524d3(0x1a3)](',\x20');if(lastCoinsToBalance!==_0x1dc59f)logHistory(_0x3524d3(0x19b),_0x3524d3(0xce)+_0x1dc59f);lastCoinsToBalance=_0x1dc59f;}}function symbolToCoin(_0x176443){const _0x4c1952=_0x415a02;let _0x16e97d;if(_0x176443[_0x4c1952(0x17a)]('/'+config[_0x4c1952(0x11d)]))_0x16e97d=_0x176443[_0x4c1952(0x171)]('/'+config[_0x4c1952(0x11d)],'');if(_0x176443[_0x4c1952(0x17a)](config['basecoin']+'/'))_0x16e97d=_0x176443[_0x4c1952(0x171)](config[_0x4c1952(0x11d)]+'/','');return _0x16e97d;}async function validateOrders(_0x39724f=0x0){const _0x1c8713=_0x415a02;let _0x305161=[],_0x2467fa=config[_0x1c8713(0xc8)]==_0x1c8713(0xdb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1c8713(0x1a2)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x1c8713(0xfb)](_0x782623=>{const _0x50a106=_0x1c8713;let _0x5b936e=previousCoins[_0x50a106(0x163)](_0x4f94ae=>_0x4f94ae[_0x50a106(0x120)]==symbolToCoin(_0x782623[_0x50a106(0xfc)])),_0x49ec1a=currentCoins[_0x50a106(0x163)](_0x2956e2=>_0x2956e2[_0x50a106(0x120)]==symbolToCoin(_0x782623[_0x50a106(0xfc)])),_0x4ca7fa,_0x4aeb90;_0x782623['side']==_0x50a106(0x158)&&!_0x782623[_0x50a106(0xd6)]||_0x782623[_0x50a106(0xf5)]==_0x50a106(0x11f)&&_0x782623[_0x50a106(0xd6)]?(_0x4ca7fa=_0x5b936e['number']+0.9*_0x782623[_0x50a106(0x166)],_0x4aeb90=_0x5b936e[_0x50a106(0x17d)]+1.1*_0x782623[_0x50a106(0x166)]):(_0x4ca7fa=_0x5b936e['number']-1.1*_0x782623[_0x50a106(0x166)],_0x4aeb90=_0x5b936e['number']-0.9*_0x782623['filled']);const _0x50d31f=_0x782623[_0x50a106(0x166)]!=0x0&&_0x49ec1a[_0x50a106(0x17d)]>=_0x4ca7fa&&_0x49ec1a['number']<=_0x4aeb90;_0x305161[_0x50a106(0xae)](_0x50d31f);if(_0x50d31f&&config[_0x50a106(0xc8)]!='market'){if(_0x782623[_0x50a106(0xd6)])logHistory(_0x50a106(0x19b),'Order\x20filled:\x20'+_0x782623[_0x50a106(0xfc)]+'\x20'+_0x782623[_0x50a106(0xf5)]+'\x20#'+formatResult(_0x782623[_0x50a106(0x166)]/_0x782623[_0x50a106(0xbd)],0x8)+'\x20@'+formatResult(_0x782623[_0x50a106(0xbd)],0x8));else logHistory(_0x50a106(0x19b),'Order\x20filled:\x20'+_0x782623[_0x50a106(0xfc)]+'\x20'+_0x782623[_0x50a106(0xf5)]+'\x20#'+formatResult(_0x782623['filled'],0x8)+'\x20@'+formatResult(_0x782623['price'],0x8));}}),_0x305161[_0x1c8713(0xfb)]((_0x20313a,_0x37f831)=>{if(_0x20313a)lastOrders['splice'](_0x37f831,0x1);});if(_0x39724f<_0x2467fa&&_0x305161[_0x1c8713(0x17a)](![])){if(_0x39724f==0x0){config[_0x1c8713(0xc8)]=='market'?logHistory(_0x1c8713(0x128),_0x1c8713(0x13b)):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x39724f);},0xa*0x3e8);}else{(_0x39724f==0x1||_0x39724f==Math[_0x1c8713(0x10c)](_0x2467fa/0x2)||_0x39724f==_0x2467fa-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x39724f);},validateOrderInterval);}}else{lockOrders=![];if(_0x39724f>0x0&&!_0x305161['includes'](![]))config[_0x1c8713(0xc8)]==_0x1c8713(0xdb)?logHistory(_0x1c8713(0x151),_0x1c8713(0x141)):logHistory(_0x1c8713(0x151),_0x1c8713(0x16f));else _0x39724f>0x0&&_0x305161[_0x1c8713(0x17a)](![])&&(config[_0x1c8713(0xc8)]==_0x1c8713(0xdb)?logHistory(_0x1c8713(0x151),_0x1c8713(0xb3)+Math[_0x1c8713(0x10c)](_0x2467fa*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x1c8713(0xfb)](async _0x5d8da3=>{const _0x1d13b5=_0x1c8713;try{const _0x30db69=await exchange[_0x1d13b5(0x159)](_0x5d8da3[_0x1d13b5(0x192)],_0x5d8da3[_0x1d13b5(0xfc)]);}catch(_0x3e81d5){if(_0x3e81d5[_0x1d13b5(0x10f)]()[_0x1d13b5(0x17a)](_0x1d13b5(0xb9))){}else await handleError(_0x3e81d5,_0x1d13b5(0xd4));}}),logHistory(_0x1c8713(0x151),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x1c8713(0x10c)](_0x2467fa*validateOrderInterval/0xea60)+_0x1c8713(0xa8))));}}async function resetCoinResults(){const _0x262efc=_0x415a02;dbCoinResults[_0x262efc(0x94)](_0x262efc(0xf0))[_0x262efc(0x175)]()['write']();let _0xe7f902=await getStartingBalances(![]);_0xe7f902[_0x262efc(0xf0)][_0x262efc(0xfb)](_0x17a8de=>{const _0x4274b3=_0x262efc,_0x2fdf39=_0x17a8de[_0x4274b3(0xfc)][_0x4274b3(0x17a)](config[_0x4274b3(0x11d)]+'/');if(_0x17a8de[_0x4274b3(0x120)]!=config[_0x4274b3(0x11d)]){let _0x4b2b5d={'coin':_0x17a8de[_0x4274b3(0x120)],'number':_0x17a8de[_0x4274b3(0x17d)],'breakeven':_0x17a8de[_0x4274b3(0xbd)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4274b3(0x94)](_0x4274b3(0xf0))[_0x4274b3(0xae)](_0x4b2b5d)['write']();}});}async function updateCoinResults(_0x1584a1){const _0x1458cd=_0x415a02;let _0x4f8c4a,_0x2c4f1b,_0x332dff,_0x5b39e4,_0x3f9566,_0x34517a,_0x14f32c=dbCoinResults['get'](_0x1458cd(0xf0))[_0x1458cd(0x163)]({'coin':_0x1584a1[_0x1458cd(0x120)]})[_0x1458cd(0xb5)]();if(!_0x14f32c)return;if(_0x1584a1[_0x1458cd(0x9f)]&&_0x1584a1[_0x1458cd(0x9f)][_0x1458cd(0x18c)]==config['basecoin'])_0x4f8c4a=_0x1584a1[_0x1458cd(0x9f)]['cost'];else{if(_0x1584a1[_0x1458cd(0x9f)]&&_0x1584a1[_0x1458cd(0x9f)][_0x1458cd(0x18c)]=='BNB')_0x4f8c4a=_0x1584a1[_0x1458cd(0x9f)][_0x1458cd(0x19c)]*global['ticker']['BNB'+config['basecoin']];else _0x4f8c4a=0.001*_0x1584a1[_0x1458cd(0x166)];}const _0x1bb4da=_0x1584a1[_0x1458cd(0xfc)][_0x1458cd(0x17a)](config[_0x1458cd(0x11d)]+'/');_0x1bb4da&&(_0x34517a={'coin':_0x1584a1[_0x1458cd(0x120)],'symbol':_0x1584a1[_0x1458cd(0xfc)],'filled':_0x1584a1['filled']*_0x1584a1[_0x1458cd(0xbd)],'side':_0x1584a1[_0x1458cd(0xf5)]==_0x1458cd(0x11f)?_0x1458cd(0x158):_0x1458cd(0x11f),'price':0x1/_0x1584a1[_0x1458cd(0xbd)]},_0x1584a1={..._0x34517a});_0x1584a1[_0x1458cd(0xf5)]==_0x1458cd(0x158)?_0x332dff=(_0x14f32c['breakeven']*_0x14f32c[_0x1458cd(0x17d)]+_0x1584a1[_0x1458cd(0xbd)]*_0x1584a1[_0x1458cd(0x166)])/(_0x14f32c['number']+_0x1584a1[_0x1458cd(0x166)]):_0x332dff=(_0x14f32c[_0x1458cd(0xf9)]*_0x14f32c[_0x1458cd(0x17d)]-_0x1584a1[_0x1458cd(0xbd)]*_0x1584a1[_0x1458cd(0x166)])/(_0x14f32c[_0x1458cd(0x17d)]-_0x1584a1['filled']);_0x1584a1['side']==_0x1458cd(0x158)?_0x5b39e4=_0x14f32c[_0x1458cd(0x12e)]:_0x5b39e4=_0x14f32c['realized']+(_0x1584a1[_0x1458cd(0xbd)]-_0x14f32c[_0x1458cd(0xf9)])*_0x1584a1[_0x1458cd(0x166)];_0x2c4f1b=_0x1584a1[_0x1458cd(0xf5)]==_0x1458cd(0x11f)?_0x14f32c[_0x1458cd(0x17d)]-_0x1584a1['filled']:_0x14f32c[_0x1458cd(0x17d)]+_0x1584a1[_0x1458cd(0x166)],_0x3f9566=(_0x1584a1['price']-_0x332dff)*_0x2c4f1b;let _0x31fb55={'coin':_0x1584a1[_0x1458cd(0x120)],'number':_0x2c4f1b,'breakeven':formatResult(_0x332dff,0x8),'realized':formatResult(_0x5b39e4,0x8),'unrealized':formatResult(_0x3f9566,0x8),'fees':formatResult(_0x14f32c[_0x1458cd(0x18f)]+_0x4f8c4a,0x8),'sells':_0x1584a1['side']=='sell'?_0x14f32c[_0x1458cd(0x199)]+0x1:_0x14f32c['sells'],'buys':_0x1584a1[_0x1458cd(0xf5)]=='buy'?_0x14f32c[_0x1458cd(0x124)]+0x1:_0x14f32c['buys']};dbCoinResults[_0x1458cd(0x94)](_0x1458cd(0xf0))[_0x1458cd(0x163)]({'coin':_0x1584a1[_0x1458cd(0x120)]})[_0x1458cd(0x15a)](_0x31fb55)[_0x1458cd(0x179)]();}async function placeOrder(_0x1cab66){const _0x4c5a64=_0x415a02,_0x5871d6=config['ordertype']==_0x4c5a64(0xdb)?_0x4c5a64(0xdb):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x4c5a64(0xfd)](JSON[_0x4c5a64(0xec)](currentCoins));for(const _0x5b1716 of _0x1cab66){let _0x19e19b,_0x3d2d98,_0x71c416,_0x4a44a1,_0x839978,_0x3aa927=_0x5b1716[_0x4c5a64(0xfc)];try{const _0x4dccbe=await exchange[_0x4c5a64(0x156)](_0x3aa927),_0x267896=_0x4dccbe[_0x3aa927];_0x19e19b=_0x267896[_0x4c5a64(0x195)],_0x3d2d98=_0x267896['bid'],_0x71c416=_0x267896[_0x4c5a64(0xe5)];_0x5b1716[_0x4c5a64(0xd6)]?(_0x4a44a1=_0x5b1716['side']==_0x4c5a64(0x158)?'sell':_0x4c5a64(0x158),_0x839978=Math[_0x4c5a64(0x11e)](_0x5b1716[_0x4c5a64(0x14d)])/_0x19e19b):(_0x4a44a1=_0x5b1716[_0x4c5a64(0xf5)],_0x839978=Math['abs'](_0x5b1716['trade']));_0x5871d6==_0x4c5a64(0xc0)&&(config[_0x4c5a64(0xc8)]==_0x4c5a64(0xba)&&(_0x19e19b=_0x4a44a1=='buy'?_0x3d2d98:_0x71c416),config[_0x4c5a64(0xc8)]=='limit-low'&&(_0x19e19b=_0x4a44a1==_0x4c5a64(0x158)?_0x71c416:_0x3d2d98));_0x839978=formatResult(_0x839978,0x8),_0x19e19b=formatResult(_0x19e19b,0x8);const _0xa69cf4=await exchange[_0x4c5a64(0x10a)](_0x3aa927,_0x5871d6,_0x4a44a1,_0x839978,_0x19e19b);lastOrders[_0x4c5a64(0xae)]({'orderId':_0xa69cf4['id'],'symbol':_0x3aa927,'side':_0x4a44a1,'reverse':_0x5b1716[_0x4c5a64(0xd6)],'amount':_0x5b1716[_0x4c5a64(0xd6)]?_0xa69cf4['amount']*_0xa69cf4['price']:_0xa69cf4['amount'],'filled':_0x5b1716[_0x4c5a64(0xd6)]?_0xa69cf4[_0x4c5a64(0x166)]*_0xa69cf4[_0x4c5a64(0xbd)]:_0xa69cf4['filled'],'price':_0xa69cf4['price']});const _0x5188f4=_0x4a44a1=='sell'?config[_0x4c5a64(0xa0)]?String[_0x4c5a64(0x15c)]('0x'+config['emojisell'])+'\x20':'':config[_0x4c5a64(0xb0)]?String[_0x4c5a64(0x15c)]('0x'+config[_0x4c5a64(0xb0)])+'\x20':'',_0x3be4ae=_0x5871d6=='market'?_0x4c5a64(0x155):config[_0x4c5a64(0xc8)]==_0x4c5a64(0xba)?'Limit\x20(high-margin)':_0x4c5a64(0x136);if(_0x5871d6==_0x4c5a64(0xdb))logHistory(_0x4c5a64(0x19b),''+_0x5188f4+_0x3be4ae+_0x4c5a64(0xdc)+_0x3aa927+'\x20'+_0x4a44a1+'\x20#'+formatResult(_0xa69cf4[_0x4c5a64(0x166)],0x8)+'\x20@'+formatResult(_0xa69cf4[_0x4c5a64(0xbd)],0x8));else logHistory(_0x4c5a64(0x19b),''+_0x5188f4+_0x3be4ae+_0x4c5a64(0xdc)+_0x3aa927+'\x20'+_0x4a44a1+'\x20#'+formatResult(_0xa69cf4[_0x4c5a64(0xb8)],0x8)+'\x20@'+formatResult(_0xa69cf4['price'],0x8));_0xa69cf4['coin']=_0x5b1716[_0x4c5a64(0x120)],await updateCoinResults(_0xa69cf4);if(config[_0x4c5a64(0x116)]!=0x0){let _0x93d44b=null;if(cooldownTracker[_0x4c5a64(0xf3)]==config[_0x4c5a64(0x116)]-0x1)_0x93d44b=cooldownTracker[_0x4c5a64(0xc7)]();const _0x3e0b0b=getTimeStamp();cooldownTracker['push'](_0x3e0b0b);if(_0x93d44b){const _0x505a3e=fns[_0x4c5a64(0xe6)](new Date(_0x3e0b0b),new Date(_0x93d44b));_0x505a3e<cooldownInterval&&(logHistory('error',_0x4c5a64(0x19f)+config[_0x4c5a64(0x116)]+_0x4c5a64(0x12c)+cooldownInterval/0x3c+_0x4c5a64(0xcf)+cooldownPeriod/(0xe10*0x3e8)+_0x4c5a64(0x16a)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1d3a53){if(_0x1d3a53[_0x4c5a64(0x10f)]()[_0x4c5a64(0x17a)](_0x4c5a64(0xb4)))logHistory(_0x4c5a64(0x128),_0x4c5a64(0xe4)+_0x3aa927);else{if(_0x1d3a53['toString']()['includes'](_0x4c5a64(0x147)))logHistory('error',_0x4c5a64(0xfe)+_0x3aa927);else await handleError(_0x1d3a53,_0x4c5a64(0xa2));}}}if(lastOrders[_0x4c5a64(0xf3)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x4c5a64(0x18d)]&&(config[_0x4c5a64(0xc8)]=='market'?logHistory(_0x4c5a64(0x128),_0x4c5a64(0x14e)):logHistory(_0x4c5a64(0x128),_0x4c5a64(0xb7)));else coolingDown&&(!config['headless']&&logHistory(_0x4c5a64(0x128),_0x4c5a64(0x190)));}}function logHistory(_0x3930f0,_0x3844ef,_0x4f5fd8=''){const _0x5ad3f0=_0x415a02;let _0x1401f2={'time':getTimeStamp(),'type':_0x3930f0,'event':_0x3844ef,'botname':config[_0x5ad3f0(0x187)],'showname':config['showname']};dbLogs[_0x5ad3f0(0x94)]('logs')[_0x5ad3f0(0xae)](_0x1401f2)[_0x5ad3f0(0x179)]();if(_0x4f5fd8=='')_0x4f5fd8=_0x3844ef;proxyEmit(_0x5ad3f0(0x129),{'log':_0x1401f2,'summary':_0x4f5fd8}),process[_0x5ad3f0(0x19e)]({'telegram':_0x1401f2},_0x1f382b=>{}),logging(''+_0x1401f2[_0x5ad3f0(0x129)]);}function emitHistory(_0x1083eb={}){const _0x407164=_0x415a02;Object[_0x407164(0x184)](_0x1083eb)[_0x407164(0xf3)]==0x0&&(_0x1083eb={'type':['order',_0x407164(0x129)],'event':'','page':0x1});if(_0x1083eb[_0x407164(0x170)][_0x407164(0x17a)]('event'))_0x1083eb[_0x407164(0x170)][_0x407164(0x90)](_0x1083eb[_0x407164(0x170)][_0x407164(0x138)](_0x407164(0x129)),0x1,_0x407164(0x128),'success');if(dbLogs[_0x407164(0xb6)]('logs')[_0x407164(0xb5)]()){let _0x19359a=dbLogs[_0x407164(0x94)]('logs')[_0x407164(0x126)](_0x5a2f97=>{const _0xc09939=_0x407164;if(_0x1083eb[_0xc09939(0x170)][_0xc09939(0xf3)]==0x0)return![];else return _0x1083eb[_0xc09939(0x170)]['includes'](_0x5a2f97[_0xc09939(0x170)]);})[_0x407164(0x126)](_0x3770be=>{const _0x7de477=_0x407164;if(_0x1083eb[_0x7de477(0x129)]=='')return!![];else return _0x3770be['event'][_0x7de477(0xbe)]()[_0x7de477(0x17a)](_0x1083eb[_0x7de477(0x129)][_0x7de477(0xbe)]());})[_0x407164(0x9d)](_0x407164(0x178)),_0x4746e0=_0x19359a['value']()[_0x407164(0xf3)];_0x19359a=_0x19359a[_0x407164(0xd6)]()[_0x407164(0x111)]((_0x1083eb[_0x407164(0x133)]-0x1)*logPageSize,_0x1083eb[_0x407164(0x133)]*logPageSize-0x1)[_0x407164(0xd6)]()[_0x407164(0xb5)](),proxyEmit(_0x407164(0x13a),{'logs':_0x19359a,'total':_0x4746e0});}else proxyEmit(_0x407164(0x13a),{'logs':[],'total':0x0});}async function pauseBot(_0x97d9db){const _0x98c6db=_0x415a02,_0x242e8c=new Date()[_0x98c6db(0xa7)]();if(!lastBotPause)lastBotPause=new Date()[_0x98c6db(0xa7)](),consecutivePauses=0x1;else{if(_0x242e8c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x98c6db(0x19e)]({'stop':_0x98c6db(0xe0)},_0x5ca6af=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x98c6db(0xa7)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x98c6db(0x128),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x97d9db),botPaused=![],reset();}}async function handleError(_0x340770,_0x38b1e8,_0x8a7652=''){const _0x1b552e=_0x415a02;if(_0x340770['toString']()[_0x1b552e(0x17a)](_0x1b552e(0x198)))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0x193)),await pauseBot(pauseBotInterval);else{if(_0x340770[_0x1b552e(0x10f)]()[_0x1b552e(0x17a)]('ExchangeNotAvailable'))logHistory('error',_0x38b1e8+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x340770['toString']()[_0x1b552e(0x17a)](_0x1b552e(0x145)))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0xbf)),await pauseBot(pauseBotInterval);else{if(_0x340770[_0x1b552e(0x10f)]()[_0x1b552e(0x17a)](_0x1b552e(0x14a)))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0x143)),logHistory('error',_0x1b552e(0x182)),process[_0x1b552e(0x19e)]({'stop':_0x1b552e(0xc1)},_0x547627=>{});else{if(_0x340770['toString']()['includes'](_0x1b552e(0xda)))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0x9e)),logHistory(_0x1b552e(0x128),_0x1b552e(0x182)),process[_0x1b552e(0x19e)]({'stop':'kill'},_0x16ebdd=>{});else{if(_0x340770[_0x1b552e(0x10f)]()[_0x1b552e(0x17a)](_0x1b552e(0x1a1)))logHistory('error',_0x38b1e8+_0x1b552e(0x16e)),logHistory(_0x1b552e(0x128),_0x1b552e(0x182)),process[_0x1b552e(0x19e)]({'stop':_0x1b552e(0xc1)},_0x53a49a=>{});else{if(_0x340770[_0x1b552e(0x10f)]()[_0x1b552e(0x17a)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0xdd)),logHistory(_0x1b552e(0x128),_0x1b552e(0x182)),process[_0x1b552e(0x19e)]({'stop':_0x1b552e(0xc1)},_0x4d8ec5=>{});else{if(_0x340770[_0x1b552e(0x10f)]()['includes'](_0x1b552e(0x161)))logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0xbc)),await pauseBot(pauseBotInterval),process[_0x1b552e(0x19e)]({'stop':'restart'},_0x52a4e8=>{});else _0x340770[_0x1b552e(0x10f)]()[_0x1b552e(0x17a)](_0x1b552e(0xef))?logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0x16d)):(logHistory(_0x1b552e(0x128),_0x38b1e8+_0x1b552e(0x130)),logging(_0x38b1e8+_0x1b552e(0xea),_0x340770),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x4129e7,_0x978817){const _0x311578=_0x415a02;return parseFloat(_0x4129e7[_0x311578(0x148)](_0x978817));}function logging(_0xa9652e,_0x3971e9=''){const _0x117b15=_0x415a02;if(config[_0x117b15(0x12b)])console[_0x117b15(0x134)](getTimeStamp()+':\x20'+config[_0x117b15(0x187)]+_0x117b15(0xd8)+_0xa9652e,_0x3971e9);else console[_0x117b15(0x134)](getTimeStamp()+_0x117b15(0x191)+botID+_0x117b15(0xd8)+_0xa9652e,_0x3971e9);}function getServerTime(){const _0x88248=_0x415a02,_0x4f04cb=new Date();return _0x4f04cb[_0x88248(0x153)]()+'/'+(_0x4f04cb[_0x88248(0xff)]()+0x1)[_0x88248(0x10f)]()['padStart'](0x2,'0')+'/'+_0x4f04cb[_0x88248(0x1a7)]()[_0x88248(0x10f)]()['padStart'](0x2,'0')+'\x20'+_0x4f04cb[_0x88248(0x17c)]()[_0x88248(0x10f)]()[_0x88248(0x19d)](0x2,'0')+':'+_0x4f04cb['getMinutes']()['toString']()[_0x88248(0x19d)](0x2,'0')+':'+_0x4f04cb[_0x88248(0x95)]()[_0x88248(0x10f)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x55c12c=_0x415a02,_0x321ac1=shiftedTime();return _0x321ac1[_0x55c12c(0x153)]()+'/'+(_0x321ac1['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x321ac1[_0x55c12c(0x1a7)]()[_0x55c12c(0x10f)]()['padStart'](0x2,'0')+'\x20'+_0x321ac1['getHours']()[_0x55c12c(0x10f)]()[_0x55c12c(0x19d)](0x2,'0')+':'+_0x321ac1[_0x55c12c(0x18b)]()[_0x55c12c(0x10f)]()[_0x55c12c(0x19d)](0x2,'0')+':'+_0x321ac1['getSeconds']()['toString']()[_0x55c12c(0x19d)](0x2,'0');}function getDate(){const _0x80d0bc=_0x415a02,_0x82442d=shiftedTime();return _0x82442d[_0x80d0bc(0x153)]()+'/'+(_0x82442d['getMonth']()+0x1)[_0x80d0bc(0x10f)]()['padStart'](0x2,'0')+'/'+_0x82442d[_0x80d0bc(0x1a7)]()[_0x80d0bc(0x10f)]()[_0x80d0bc(0x19d)](0x2,'0');}function getHour(){const _0x14185a=_0x415a02,_0x32af58=shiftedTime();return _0x32af58['getHours']()[_0x14185a(0x10f)]()[_0x14185a(0x19d)](0x2,'0');}function sleep(_0x41c5bd){return new Promise(_0x37f6c0=>setTimeout(_0x37f6c0,_0x41c5bd));}function shiftedTime(){const _0x22e0ed=_0x415a02,_0x12967f=new Date();let _0x3c93d6=_0x12967f;if(config&&config[_0x22e0ed(0x173)]!==0x0)_0x3c93d6=fns['add'](_0x12967f,{'hours':config[_0x22e0ed(0x173)]});return _0x3c93d6;}