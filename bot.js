const _0x16db37=_0x1ae8;(function(_0x111843,_0x22e00d){const _0x26799f=_0x1ae8,_0x3bd5aa=_0x111843();while(!![]){try{const _0x39c1a9=parseInt(_0x26799f(0x10f))/0x1+-parseInt(_0x26799f(0xea))/0x2*(parseInt(_0x26799f(0x1c6))/0x3)+-parseInt(_0x26799f(0x150))/0x4+parseInt(_0x26799f(0x185))/0x5+-parseInt(_0x26799f(0x12f))/0x6*(-parseInt(_0x26799f(0x105))/0x7)+parseInt(_0x26799f(0x1d6))/0x8*(parseInt(_0x26799f(0x122))/0x9)+-parseInt(_0x26799f(0x100))/0xa;if(_0x39c1a9===_0x22e00d)break;else _0x3bd5aa['push'](_0x3bd5aa['shift']());}catch(_0x22a03e){_0x3bd5aa['push'](_0x3bd5aa['shift']());}}}(_0x1e48,0xb66b4));const _0x4d5db4=function(){let _0x2e211d=!![];return function(_0x1b5fc8,_0x5cff56){const _0x4168bc=_0x2e211d?function(){if(_0x5cff56){const _0x28857a=_0x5cff56['apply'](_0x1b5fc8,arguments);return _0x5cff56=null,_0x28857a;}}:function(){};return _0x2e211d=![],_0x4168bc;};}(),_0x1992db=_0x4d5db4(this,function(){const _0x9f244=_0x1ae8;return _0x1992db[_0x9f244(0x228)]()[_0x9f244(0xe5)](_0x9f244(0xe4))[_0x9f244(0x228)]()[_0x9f244(0x21b)](_0x1992db)[_0x9f244(0xe5)]('(((.+)+)+)+$');});_0x1992db();'use strict';const ccxt=require(_0x16db37(0x11d)),low=require(_0x16db37(0xd4)),FileSync=require(_0x16db37(0x1cb)),fs=require('fs'),fns=require(_0x16db37(0xfd)),Crypt=require(_0x16db37(0x131))['Crypt'],util=require(_0x16db37(0x154)),argv=require(_0x16db37(0xfe))(process['argv'][_0x16db37(0x152)](0x2))[_0x16db37(0x121)],path=require(_0x16db37(0x1fe));let exchange;global[_0x16db37(0x170)]={},global[_0x16db37(0x1d7)]={};const usdBasecoins=[_0x16db37(0x159),_0x16db37(0x1e1),'TUSD',_0x16db37(0x204),'USDC',_0x16db37(0x94)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x16db37(0xfb)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x16db37(0x13c))[_0x16db37(0x19b)],botID=process[_0x16db37(0x121)][0x2]||_0x16db37(0x19d),pattern=/^[0-9]{3}$/;!pattern[_0x16db37(0x119)](botID)&&(console[_0x16db37(0x10d)](_0x16db37(0x15c)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x16db37(0x121)][0x3]||'',configpath=userID?_0x16db37(0x194)+userID+'/':'./config/',logspath=userID?_0x16db37(0x140)+userID+'/':_0x16db37(0x140),loggerfile=fs[_0x16db37(0x187)](logspath+_0x16db37(0xf8),{'flags':'a'});!fs[_0x16db37(0x180)](configpath)&&fs['mkdirSync'](configpath);function _0x1e48(){const _0x3d50dd=['Portfolio\x20change\x20detected:\x20','spot','value','ExchangeError','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','1055320AzHrEf','Limit\x20(high-margin)','slice','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','util','BTC','Net\x20effect','filled','\x20minutes','USD','excluded','timeout','Error:\x20Invalid\x20argument\x20','delta','parseISO','ORDERS.UNLOCKED','No\x20more\x20open\x20orders\x20-\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','2.3.5','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','status','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','toggleBotMode','buys','API-key\x20format\x20invalid','write','MIN_NOTIONAL','add','net-basecoin','startprice','Cooldown\x20ended\x20-\x20balancing\x20resumed','ticker','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','change24h','\x20>\x20[DEBUG]\x20','message','Huobi','emojisell','getMinutes','cancelOrders()','\x20metrics:</b>\x20\x0a\x0a','2\x20-\x20Handled\x20open\x20orders','parse','currency','BadSymbol','push','progress','existsSync','Order\x20is\x20invalid:\x20','getPortfolio','Initializing\x20coin\x20results','watchTransactions()','7253195GGFCwp','Failed\x20to\x20load\x20coin\x20data\x20for\x20','createWriteStream','BNB/','configuration-stored','watchOrders()','none','threshold','LOCKED','remove','amount','trade','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','event-history','\x20orders\x20in\x20less\x20than\x20','./config/','2\x20-\x20Orders\x20unlocked','has','string','2.6.0','reverse','Resetting\x20bot\x20history','version','closed','001','toUpperCase','sortBy','sell','fetchTickers','Exception\x20thrown\x20in\x20','exchange\x20not\x20reloaded','apiKey','************','</pre>','length','debug','headless','exchanges','getCoins()','botname','isEqual','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','starting-balances','abs','orderstatus','breakeven','RateLimitExceeded','showConfig','random','fetchOpenOrders','error','getHours','NetworkError','timestamp','\x20:\x20','***','highest','unlinkSync','kill','cost','initTickers()','running','valid','remainingSymbols','max','6YRSyuP','-config.json','coin-loading-progress','market','DDoSProtection','lowdb/adapters/FileSync','padStart','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','3\x20-\x20handling\x20FILLED\x20order:\x20','amountToPrecision','\x20order:\x20','round','showname','no\x20additional\x20symbols','Loading\x20completed','fiat','16EIYxxG','change','open','cancelLoading','leftTxt','Error\x20while\x20deleting\x20files:\x20','assign','1\x20-\x20Validate\x20orders:\x20','privateKey','ORDERS.UNLOCKING','milliseconds','BUSD','filter','mkdirSync','password','settings','concat','Resetting\x20coin\x20results:\x20','usd','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ExchangeNotAvailable','exchange','symbol','sendPortfolioTelegram','storeHeadless','recreate','yyyy-MM-dd\x27T\x27HH:mm:ss','coin','2\x20-\x20FILLED\x20known\x20order:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','<pre>','\x20minutes\x20-\x20','exec','\x20not\x20responding','bot','success','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','1\x20-\x20FILLED:\x20','decrypt','2.5.0','path','liquidity',':\x20timer\x20>','send','loadSymbols()','/EUR','USDT','Pausing\x20bot\x20for\x20','coins','fetchTickers()','replace','date','includes','Executed\x20','join','ETH','performance','Invalid\x20symbol:\x20','Cex','getMonth','BNB','Pausing\x20for\x20','getOpenOrders()','bots','Order\x20amount\x20is\x20invalid:\x20','recovery','watchOrders','getTime','rightTxt','constructor','warning','limit-high','yyyy/MM/dd','fetchBalance','portfolio','cooldown','get','.json','deleteHistoryAlerts',':\x20Bot\x20','Market','storeFiat','toString','startsWith','EUR','loadMarkets','\x20>\x20','-events.json','1\x20-\x20Handle\x20open\x20orders','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20|\x20lock\x20orders:\x20','side','\x20change','getFullYear','getPortfolio(1)','bot-','USDP','distribution','<b>Bot\x20','Order\x20filled:\x20','removed','-------------------------------\x0a','\x20exchange\x20error','padEnd','fetchClosedOrders','map','UNLOCKING','Initiating\x20exchange\x20reload','last','restart','\x20|\x20','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','bb-secure.json','data','Invalid\x20API\x20key\x20or\x20secret\x20entered','apiPassword','starting-balance-','substring','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','ORDERS.LOCKED','basecoinvalue','added','min','getDate','createOrder','function','changes','InvalidNonce','Bot\x20','no\x20open\x20orders','limits','stringify','initial','split','placeOrder','-results.json','initclient','Transaction\x20detection\x20blocked','net-fiat','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20network\x20error','fetchTicker','fee','InvalidOrder','Binance','Huobipro','emojibuy','set','buy','resetHistory','writeFile','exchange\x20reloaded','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','orderId','0\x20-\x20EXECUTION:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','recent20','forEach','red_yellow_blue','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','lowdb','pro','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','%\x20(','uncaughtException','cancel','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20|\x20exchange:\x20','Error\x20details:','\x20API\x20key\x20is\x20invalid','format','sells','offset','startdate','autoliquidity','target','(((.+)+)+)+$','search','balancing\x20resumed','RSA-OAEP','/USD','order','1156666pKOzVb','Net\x20','configuration','find','Manual\x20balancing\x20required','price','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','startnumber','\x20-\x20bot\x20not\x20started','full','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Saving\x20configuration','\x20value','basecoin','/output-000.log','Limit\x20(low-margin)','logs','freeze','limit','date-fns','yargs/yargs','eur','16797320zKFquc','<b>','Unknown\x20error\x20occured','active','getSeconds','36001lVwdlL','final','getPortfolio(0)','ID:\x20','toFixed','toLowerCase','balancing\x20resumes\x20when\x20cooldown\x20ends','ongoing','log','InsufficientFunds','1052326rGVdMc','colorscheme','indexOf','recreateCoinResults()','page','time','percentage','Fee\x20discount\x20refund\x20detected:\x20','bb-settings.json','Transaction\x20detection\x20unblocked','test','timeshift','realized','args','ccxt','ordertype','cloneDeep','UNLOCKED','argv','5980599MVUVGV','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','splice','datetime','Exchange','sendMetricsTelegram','RequestTimeout','netoffset','cancelOrder','shift','enabled','placeOrder()','close','18FqdReY','entries','hybrid-crypto-js','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','number','ask','AuthenticationError','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','emitHistory','defaults','\x20portfolio:</b>\x20\x0a\x0a','getAllOrders()','sort','./version.json','type','findIndex','getCoinNumber()','./logs/','canceled','onepagemode','event','total','getPortfolio(2)','secure','balances','\x20exchange','apiSecret','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'];_0x1e48=function(){return _0x3d50dd;};return _0x1e48();}!fs['existsSync'](logspath)&&fs[_0x16db37(0x1e3)](logspath);const configfile=configpath+'bot-'+botID+_0x16db37(0x1c7),logfile=configpath+_0x16db37(0x93)+botID+_0x16db37(0x8b),performancefile=configpath+_0x16db37(0x93)+botID+'-performance.json',coinresultsfile=configpath+_0x16db37(0x93)+botID+_0x16db37(0xbb),settingsfile=configpath+_0x16db37(0x117),securefile=configpath+_0x16db37(0xa4),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x16db37(0x138)]({'logs':[],'version':serverversion})[_0x16db37(0x16a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x16db37(0x138)]({'data':[],'version':serverversion})[_0x16db37(0x16a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x16db37(0x138)]({'bot':[],'version':serverversion})[_0x16db37(0x16a)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x16db37(0x138)]({'coins':[],'version':serverversion})[_0x16db37(0x16a)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x16db37(0xe7)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2ee9b9=>{const _0x290c22=_0x16db37;console[_0x290c22(0x10d)](_0x2ee9b9);},'simple':_0x53e121=>{const _0x1ff053=_0x16db37;console[_0x1ff053(0x10d)](_0x53e121),loggerfile['write'](util[_0x1ff053(0xde)](_0x53e121)+'\x0a');},'full':async(_0x523daf,_0x4ea597='')=>{const _0x2fc9d3=_0x16db37;let _0x4188e4;if(config[_0x2fc9d3(0x1d2)])_0x4188e4=getTimeStamp()+':\x20'+config['botname']+_0x2fc9d3(0x8a)+_0x523daf;else _0x4188e4=getTimeStamp()+_0x2fc9d3(0x225)+botID+_0x2fc9d3(0x8a)+_0x523daf;console[_0x2fc9d3(0x10d)](_0x4188e4),loggerfile[_0x2fc9d3(0x16a)](util['format'](_0x4188e4)+'\x0a'),_0x4ea597&&(console[_0x2fc9d3(0x10d)](_0x4ea597),loggerfile[_0x2fc9d3(0x16a)](util[_0x2fc9d3(0xde)](_0x4ea597)+'\x0a'));},'debug':async(_0x585a5c,_0x20cb85='')=>{const _0x571a47=_0x16db37;let _0x2a712a;if(config['showname'])_0x2a712a=getTimeStamp()+':\x20'+config[_0x571a47(0x1ac)]+'\x20>\x20[DEBUG]\x20'+_0x585a5c;else _0x2a712a=getTimeStamp()+_0x571a47(0x225)+botID+_0x571a47(0x173)+_0x585a5c;if(debugging)console[_0x571a47(0x10d)](_0x2a712a);loggerfile[_0x571a47(0x16a)](util[_0x571a47(0xde)](_0x2a712a)+'\x0a');if(_0x20cb85){if(debugging)console['log'](_0x20cb85);loggerfile['write'](util['format'](_0x20cb85)+'\x0a');}}};process['on'](_0x16db37(0xd8),function(_0x55c7ee){const _0x3825b7=_0x16db37;logHistory(_0x3825b7(0x1b7),_0x3825b7(0x14a)),logger[_0x3825b7(0x1a8)]('Uncaught\x20Exception:',_0x55c7ee);});settings[_0x16db37(0x11a)]!=config[_0x16db37(0x11a)]&&updateTimeshift(settings['timeshift']);settings[_0x16db37(0x142)]!=config['onepagemode']&&updateOnepagemode(settings[_0x16db37(0x142)]);process[_0x16db37(0x201)]({'started':'running'},_0x19e8da=>{}),initializeProcessListeners();function proxyEmit(_0x432bac,_0x5486fe=null){const _0x2fe0ff=_0x16db37;process[_0x2fe0ff(0x201)]({'function':_0x432bac,'args':_0x5486fe},_0x23fd69=>{});}function initializeProcessListeners(){const _0x1fa3ae=_0x16db37;process['on'](_0x1fa3ae(0x174),_0x2d172f=>{const _0x37b135=_0x1fa3ae;switch(Object['keys'](_0x2d172f)[0x0]){case _0x37b135(0x11a):_0x2d172f[_0x37b135(0x11a)]!=undefined&&(settings[_0x37b135(0x11a)]=_0x2d172f[_0x37b135(0x11a)],updateTimeshift(settings[_0x37b135(0x11a)]));break;case _0x37b135(0x142):_0x2d172f[_0x37b135(0x142)]!=undefined&&(settings['onepagemode']=_0x2d172f[_0x37b135(0x142)],updateOnepagemode(settings[_0x37b135(0x142)]));break;case _0x37b135(0x215):_0x2d172f[_0x37b135(0x215)]!=undefined&&(bots=JSON['parse'](_0x2d172f[_0x37b135(0x215)]),proxyEmit(_0x37b135(0x215),bots));break;case'function':switch(_0x2d172f[_0x37b135(0xb1)]){case _0x37b135(0xbc):initclient();break;case _0x37b135(0x167):toggleBotMode();break;case _0x37b135(0x137):emitHistory(_0x2d172f[_0x37b135(0x11c)]);break;case _0x37b135(0x224):deleteHistoryAlerts(_0x2d172f[_0x37b135(0x11c)]);break;case _0x37b135(0x182):getPortfolio(_0x2d172f[_0x37b135(0x11c)]);break;case'storeConfiguration':storeConfiguration(_0x2d172f[_0x37b135(0x11c)]);break;case _0x37b135(0x1ee):storeHeadless(_0x2d172f[_0x37b135(0x11c)]);break;case _0x37b135(0x227):storeFiat(_0x2d172f[_0x37b135(0x11c)]);break;case _0x37b135(0xc9):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x37b135(0xba):placeOrder(_0x2d172f['args']);break;case _0x37b135(0x1d9):cancelLoading();break;case _0x37b135(0x1b4):showConfig();break;case _0x37b135(0x127):sendMetricsTelegram();break;case _0x37b135(0x1ed):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x314ab0=null,_0x2fc60c=![]){const _0x1aa66b=_0x16db37;logger['debug']('Reset\x20|\x20'+(_0x314ab0&&_0x314ab0[_0x1aa66b(0x1a7)]>0x0?'additional\x20symbols\x20'+_0x314ab0[_0x1aa66b(0x20c)](','):_0x1aa66b(0x1d3))+'\x20|\x20'+(_0x2fc60c?_0x1aa66b(0xcb):_0x1aa66b(0x1a3))+_0x1aa66b(0xdb)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2fc60c)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x1aa66b(0x1a4)]!=_0x1aa66b(0x1bc)){loadingProgress=0x0;if(_0x2fc60c){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2b1fe8){handleErrorNoStop(_0x2b1fe8,_0x1aa66b(0x202));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x314ab0);const _0x3a8e18=await getCoins();[currentCoins,currentCoinsAll]=_0x3a8e18,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x1aa66b(0xf3)](_0x1aa66b(0x1d4)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x1aa66b(0x1a7)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x142f72=_0x16db37;exchangeStopped=!![];try{await exchange[_0x142f72(0x12e)]();}catch(_0x1b795c){await handleError(_0x1b795c,'stopExchange()');}}async function reloadExchange(){const _0x3413d7=_0x16db37;logger['debug'](_0x3413d7(0x9f));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3413d7(0x1a8)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x2f681a=config[_0x16db37(0x1eb)],_0x2aa0bb=config[_0x16db37(0x1a4)],_0x8ee3f1=config[_0x16db37(0x149)],_0x307ffa=config[_0x16db37(0xa7)]){const _0x2bd4f6=_0x16db37;exchange&&await stopExchange();!supportedExchanges()[_0x2bd4f6(0x20a)](_0x2f681a)&&(logHistory('error',_0x2bd4f6(0x153)+_0x2f681a+_0x2bd4f6(0x148)),killBot());const _0xa3d993=ccxt['pro'][_0x2f681a['toLowerCase']()];exchange=new _0xa3d993({'apiKey':_0x2aa0bb,'secret':_0x8ee3f1,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2bd4f6(0x14c)}});if(_0x307ffa)exchange[_0x2bd4f6(0x1e4)]=_0x307ffa;}function setStableCoins(){const _0x4ebde7=_0x16db37;let _0xd63717=config[_0x4ebde7(0xf7)]==_0x4ebde7(0x20d)?_0x4ebde7(0x20d):_0x4ebde7(0x155),_0x467700=!allSymbols[_0x4ebde7(0x20a)](_0xd63717+_0x4ebde7(0xe8))?_0x4ebde7(0x204):_0x4ebde7(0x159),_0x386e80=!allSymbols['includes'](_0xd63717+_0x4ebde7(0x203))?_0x467700:_0x4ebde7(0x22a);stablecoins={'eur':{'coin':''+_0xd63717+_0x386e80,'symbol':_0xd63717+'/'+_0x386e80},'usd':{'coin':''+_0xd63717+_0x467700,'symbol':_0xd63717+'/'+_0x467700}};}async function initwsCcxt(_0x2011df){const _0x25eb17=_0x16db37;_0x2011df==null&&(_0x2011df=[],config[_0x25eb17(0x220)][_0x25eb17(0xd1)](_0x3ed538=>{const _0x5929ef=_0x25eb17;if(!_0x3ed538[_0x5929ef(0x15a)]&&_0x3ed538[_0x5929ef(0x1f1)]!=config[_0x5929ef(0xf7)])_0x2011df[_0x5929ef(0x17e)](_0x3ed538[_0x5929ef(0x1ec)]);}));if(!_0x2011df[_0x25eb17(0x20a)](stablecoins[_0x25eb17(0xff)][_0x25eb17(0x1ec)]))_0x2011df['push'](stablecoins[_0x25eb17(0xff)][_0x25eb17(0x1ec)]);if(!_0x2011df[_0x25eb17(0x20a)](stablecoins[_0x25eb17(0x1e8)][_0x25eb17(0x1ec)]))_0x2011df[_0x25eb17(0x17e)](stablecoins[_0x25eb17(0x1e8)][_0x25eb17(0x1ec)]);if(config['exchange'][_0x25eb17(0x229)]('Binance')){if(!_0x2011df[_0x25eb17(0x20a)](_0x25eb17(0x188)+config[_0x25eb17(0xf7)]))_0x2011df[_0x25eb17(0x17e)](_0x25eb17(0x188)+config['basecoin']);}loadCoins(_0x2011df),_0x2011df=validateSymbols(_0x2011df);const _0x47048e=async _0x7afbe0=>{const _0x99805d=_0x25eb17;let _0x38e6b0;try{const _0x27e307=await exchange['fetchTickers'](_0x7afbe0);Object['entries'](_0x27e307)[_0x99805d(0xd1)](_0x26fb03=>{const _0x5f1076=_0x99805d;_0x38e6b0=_0x26fb03[0x1][_0x5f1076(0x1ec)],global['ticker'][noslash(_0x38e6b0)]=_0x26fb03[0x1][_0x5f1076(0xa0)];});}catch(_0x2f6dd3){await handleError(_0x2f6dd3,_0x99805d(0x1c1),_0x38e6b0);}},_0x34ce29=async _0x49dff0=>{const _0x1ffe7a=_0x25eb17;while(!![]){if(!botPaused)try{const _0x3bc89d=await exchange['watchTrades'](_0x49dff0);global[_0x1ffe7a(0x170)][noslash(_0x3bc89d[0x0][_0x1ffe7a(0x1ec)])]=_0x3bc89d[0x0][_0x1ffe7a(0xef)],await sleep(0x3e8);}catch(_0x2f06d1){if(!exchangeStopped)await handleError(_0x2f06d1,'watchTrades()',_0x49dff0);}else await sleep(0x64);}},_0x1c1c96=async _0x5aca97=>{const _0x3cd265=_0x25eb17;while(!![]){if(!botPaused)try{const _0x118e45=await exchange['fetchTicker'](_0x5aca97);global['change'][_0x118e45['symbol']]=_0x118e45[_0x3cd265(0x115)],await sleep(0x3c*0x3e8);}catch(_0x114642){if(!exchangeStopped)await handleError(_0x114642,_0x3cd265(0x207),_0x5aca97);}else await sleep(0x64);}},_0x7db772=async _0x18fbc2=>{const _0x3219b3=_0x25eb17;while(!![]){if(!botPaused)try{const _0x1b47b3=await exchange['watchOrders'](_0x18fbc2);_0x1b47b3['forEach'](_0x549d70=>{updateNumberCoinsCcxt(_0x549d70);});}catch(_0x5d7a9a){if(!exchangeStopped)await handleError(_0x5d7a9a,_0x3219b3(0x18a));}else await sleep(0x64);}};_0x47048e(_0x2011df),_0x2011df[_0x25eb17(0xd1)](_0x29065e=>{_0x34ce29(_0x29065e),_0x1c1c96(_0x29065e),_0x7db772(_0x29065e);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x313025=_0x16db37;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x115b2a=await getCoins(),[_0x41b116,_0x2a237c]=_0x115b2a;let _0x1d7dae=[];currentCoins[_0x313025(0xd1)](_0x3bdade=>{const _0x2577bb=_0x313025,_0x15e48e=_0x41b116[_0x2577bb(0xed)](_0x4938fd=>_0x4938fd[_0x2577bb(0x1f1)]==_0x3bdade[_0x2577bb(0x1f1)]);if(_0x15e48e){if(_0x3bdade[_0x2577bb(0x133)]!=_0x15e48e[_0x2577bb(0x133)]){let _0xa7961e;if(_0x3bdade[_0x2577bb(0x1f1)]!=config['basecoin']){const _0x567ef7=global[_0x2577bb(0x170)][noslash(_0x3bdade['symbol'])];_0xa7961e=_0x3bdade[_0x2577bb(0x199)]?0x1/_0x567ef7:_0x567ef7;}else _0xa7961e=0x1;_0x1d7dae[_0x2577bb(0x17e)]({'coin':_0x3bdade[_0x2577bb(0x1f1)],'symbol':_0x3bdade[_0x2577bb(0x1ec)],'price':_0xa7961e,'number':Number(formatResult(_0x15e48e[_0x2577bb(0x133)]-_0x3bdade[_0x2577bb(0x133)],0x8)),'basecoinvalue':_0xa7961e*(_0x15e48e[_0x2577bb(0x133)]-_0x3bdade[_0x2577bb(0x133)])});}}});if(_0x1d7dae[_0x313025(0x1a7)]==0x1&&!blockTransactionDetection){if(config[_0x313025(0xe2)]){logger[_0x313025(0x1a8)](_0x313025(0x166)+_0x1d7dae[0x0][_0x313025(0xac)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x313025(0x1bd)]==0x0||Math[_0x313025(0x1b0)](_0x1d7dae[0x0]['basecoinvalue'])>lastFees[_0x313025(0x1bd)]){delete _0x1d7dae[0x0][_0x313025(0x1ec)],delete _0x1d7dae[0x0][_0x313025(0xac)];let _0xb662d4=[],_0x4ffd2c=[...config[_0x313025(0x1ff)]]||[],_0xb8ab0e=config['liquidity'];_0x4ffd2c[_0x313025(0x13b)]((_0x248789,_0x52d636)=>_0x248789[_0x313025(0x209)]>_0x52d636[_0x313025(0x209)]?-0x1:_0x52d636[_0x313025(0x209)]>_0x248789[_0x313025(0x209)]?0x1:0x0);const _0x2398cf=getDate();if(_0x4ffd2c[0x0]){const _0x10113b=fns[_0x313025(0x17b)](_0x4ffd2c[0x0][_0x313025(0x209)],_0x313025(0x21e),new Date()),_0x3e0a27=fns['parse'](_0x2398cf,_0x313025(0x21e),new Date());if(fns[_0x313025(0x1ad)](_0x10113b,_0x3e0a27)){_0xb662d4=_0x4ffd2c[0x0][_0x313025(0xb2)];const _0x331c0e=_0xb662d4['find'](_0x109c2b=>_0x109c2b[_0x313025(0x1f1)]==_0x1d7dae[0x0][_0x313025(0x1f1)]);_0x331c0e?(_0x331c0e[_0x313025(0x133)]+=_0x1d7dae[0x0][_0x313025(0x133)],_0x331c0e[_0x313025(0x133)]==0x0&&(_0xb662d4=_0xb662d4['filter'](_0x33bb7e=>{const _0x347fd0=_0x313025;return _0x33bb7e[_0x347fd0(0x1f1)]!=_0x1d7dae[0x0][_0x347fd0(0x1f1)];}))):_0xb662d4[_0x313025(0x17e)](_0x1d7dae[0x0]);const _0x351baa=_0xb8ab0e[_0x313025(0xed)](_0x5352b5=>_0x5352b5[_0x313025(0x209)]==_0x2398cf);_0x351baa[_0x313025(0xb2)]=_0xb662d4;}else _0xb8ab0e[_0x313025(0x17e)]({'date':_0x2398cf,'changes':[_0x1d7dae[0x0]]});}const _0x5be626=_0xb8ab0e[_0x313025(0xed)](_0x49ca3d=>_0x49ca3d['date']==_0x2398cf);if(_0x5be626){let _0x23a2eb=!![];_0x5be626[_0x313025(0xb2)][_0x313025(0xd1)](_0x5dbf04=>{const _0x29bf4a=_0x313025;if(_0x5dbf04[_0x29bf4a(0x133)]!=0x0)_0x23a2eb=![];}),_0x23a2eb&&(_0xb8ab0e=_0xb8ab0e[_0x313025(0x1e2)](_0x4f3efb=>{return _0x4f3efb['date']!=_0x2398cf;}));}let _0xa96b4b=dbConfig[_0x313025(0x222)](_0x313025(0x1f8))[_0x313025(0xed)]({'botID':botID})[_0x313025(0x14d)]();_0xa96b4b&&(dbConfig[_0x313025(0x222)](_0x313025(0x1f8))[_0x313025(0xed)]({'botID':botID})[_0x313025(0x1dc)]({'liquidity':_0xb8ab0e})[_0x313025(0x16a)](),config[_0x313025(0x1ff)]=_0xb8ab0e),logHistory(_0x313025(0x1f9),_0x313025(0x14b)+Math[_0x313025(0x1b0)](_0x1d7dae[0x0][_0x313025(0x133)])+'\x20'+_0x1d7dae[0x0][_0x313025(0x1f1)]+'\x20'+(_0x1d7dae[0x0][_0x313025(0x133)]>0x0?_0x313025(0xad):_0x313025(0x98))+_0x313025(0x171)),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x313025(0x116)+Math[_0x313025(0x1b0)](_0x1d7dae[0x0][_0x313025(0x133)])+'\x20'+_0x1d7dae[0x0][_0x313025(0x1f1)]+'\x20'+(_0x1d7dae[0x0][_0x313025(0x133)]>0x0?_0x313025(0xad):_0x313025(0x98)));transactionDetected=!![],currentCoins=_0x41b116,currentCoinsAll=_0x2a237c;}else logger[_0x313025(0x1a8)]('Portfolio\x20change\x20detected:\x20'+Math[_0x313025(0x1b0)](_0x1d7dae[0x0][_0x313025(0x133)])+'\x20'+_0x1d7dae[0x0]['coin']+'\x20'+(_0x1d7dae[0x0][_0x313025(0x133)]>0x0?_0x313025(0xad):'removed')+_0x313025(0x1cd)),currentCoins=_0x41b116,currentCoinsAll=_0x2a237c;}await sleep(watchTransactionsInterval);}catch(_0x18bcfe){if(!exchangeStopped)await handleError(_0x18bcfe,_0x313025(0x184));}else await sleep(0x64);}}async function loadSymbols(){const _0x22bb2d=_0x16db37;try{markets=await exchange[_0x22bb2d(0x22b)](),allSymbols=[],Object['entries'](markets)[_0x22bb2d(0xd1)](_0x13b535=>{const _0x550e8a=_0x22bb2d;_0x13b535[0x1][_0x550e8a(0x103)]&&_0x13b535[0x1][_0x550e8a(0x14c)]&&allSymbols[_0x550e8a(0x17e)](_0x13b535[0x0]);});}catch(_0x421a8e){throw _0x421a8e;}}function validateSymbols(_0x194788){const _0x574b92=_0x16db37;let _0x344b14=[];return _0x194788[_0x574b92(0xd1)](_0x117d5e=>{const _0x52dee4=_0x574b92;!allSymbols[_0x52dee4(0x20a)](_0x117d5e)?logHistory('error',_0x52dee4(0x20f)+_0x117d5e+_0x52dee4(0x8d)):_0x344b14[_0x52dee4(0x17e)](_0x117d5e);}),_0x344b14;}async function initclient(){const _0x1a9c3d=_0x16db37;proxyEmit(_0x1a9c3d(0xec),emittedConfiguration()),proxyEmit(_0x1a9c3d(0x1aa),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1a9c3d(0x147),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5ea9da=getNormalizedPerformance();emitPerformance(_0x5ea9da),getStartingBalances(_0x5ea9da);}async function toggleBotMode(){const _0x37203d=_0x16db37;let _0x527fdc=dbConfig[_0x37203d(0x222)]('bot')[_0x37203d(0xed)]({'botID':botID})['value']();if(_0x527fdc){const _0x5d21fe=!_0x527fdc['headless'];dbConfig['get'](_0x37203d(0x1f8))[_0x37203d(0xed)]({'botID':botID})[_0x37203d(0x1dc)]({'headless':_0x5d21fe})[_0x37203d(0x16a)](),config[_0x37203d(0x1a9)]=_0x5d21fe,proxyEmit(_0x37203d(0xec),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x580dce=>{});}async function loadCoins(_0x29090e){const _0x3c37f9=_0x16db37;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x570105,_0x44819e=0x0,_0x571db0=0x0;_0x29090e['forEach'](_0x3a2fb9=>{const _0x3fdbd6=_0x1ae8;loading[_0x3fdbd6(0x1c4)][_0x3fdbd6(0x17e)](_0x3a2fb9);}),loadingCanceled=![];let _0x23622f=![];while(_0x570105!=_0x29090e[_0x3c37f9(0x1a7)]+maxLoadingProgress){_0x570105=loadingProgress,_0x29090e['forEach'](_0x261291=>{const _0x16cff8=_0x3c37f9;if(global[_0x16cff8(0x170)][noslash(_0x261291)]){loading[_0x16cff8(0x1c4)]=loading[_0x16cff8(0x1c4)][_0x16cff8(0x1e2)](_0x252fc6=>_0x252fc6!=_0x261291);if(!watchedSymbols[_0x16cff8(0x20a)](_0x261291))watchedSymbols[_0x16cff8(0x17e)](_0x261291);_0x570105++;}}),loading[_0x3c37f9(0x17f)]=Math[_0x3c37f9(0x1d1)](_0x570105/(_0x29090e[_0x3c37f9(0x1a7)]+maxLoadingProgress)*0x64);loading[_0x3c37f9(0x17f)]!=0x64&&(_0x571db0>0x1e*0x5&&(loading[_0x3c37f9(0x15b)]=!![],emitLoadingProgress()),_0x571db0>0x78*0x5&&!_0x23622f&&(loading[_0x3c37f9(0xd9)]=!![],emitLoadingProgress(),_0x23622f=!![],logHistory('error',_0x3c37f9(0x186)+loading[_0x3c37f9(0x1c4)]['join'](',\x20')+_0x3c37f9(0xf2)),logHistory(_0x3c37f9(0x1b7),_0x3c37f9(0x213)+loadCoinsRetryInterval/0xea60+_0x3c37f9(0xf4)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x181aa6=_0x3c37f9;process[_0x181aa6(0x201)]({'stop':_0x181aa6(0xa1)},_0x14b7e5=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3c37f9(0xd9)]=!![],emitLoadingProgress();break;}else _0x44819e!=loading[_0x3c37f9(0x17f)]&&(_0x44819e=loading[_0x3c37f9(0x17f)],emitLoadingProgress()),_0x571db0++,await sleep(0xc8);}_0x570105==_0x29090e[_0x3c37f9(0x1a7)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3c37f9(0x201)]({'status':'enabled','live':_0x3c37f9(0x1c2)},_0x36863b=>{}),_0x23622f&&logHistory(_0x3c37f9(0x1f9),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x57e972=_0x16db37;proxyEmit(_0x57e972(0x1c8),loading);}async function getFiat(){const _0x5e344=_0x16db37;let _0x56c8d0=global[_0x5e344(0x170)][stablecoins[_0x5e344(0xff)][_0x5e344(0x1f1)]],_0x5443c2=global[_0x5e344(0x170)][stablecoins['usd'][_0x5e344(0x1f1)]];return{'eur':Number(_0x56c8d0),'usd':Number(_0x5443c2)};}function capitalize(_0x272ec6){const _0x518d07=_0x16db37;return _0x272ec6[_0x518d07(0xa9)](0x0,0x1)[_0x518d07(0x19e)]()+_0x272ec6[_0x518d07(0xa9)](0x1);}function supportedExchanges(){const _0xa86f2e=_0x16db37,_0x5488e6=['ws','fetchTickers',_0xa86f2e(0xc1),'watchTrades',_0xa86f2e(0x218),'cancelOrder',_0xa86f2e(0xb0),_0xa86f2e(0x1b6),'fetchClosedOrders',_0xa86f2e(0x21f)];let _0x19783d=[],_0x5128e9=[],_0x11c5d4=ccxt[_0xa86f2e(0xd5)][_0xa86f2e(0x1aa)];_0x11c5d4[_0xa86f2e(0xd1)](_0x4c2fda=>{const _0x49f807=_0xa86f2e;try{const _0x163295=new ccxt[(_0x49f807(0xd5))][_0x4c2fda]();_0x5128e9[_0x49f807(0x17e)](_0x163295);}catch(_0x1280b1){}}),_0x5128e9[_0xa86f2e(0xd1)](_0x1ecdaa=>{const _0x1b6cfd=_0xa86f2e;let _0x206a9e=0x0;_0x5488e6[_0x1b6cfd(0xd1)](_0x4a219b=>{_0x4a219b in _0x1ecdaa['has']&&_0x1ecdaa['has'][_0x4a219b]&&_0x206a9e++;}),_0x206a9e==_0x5488e6[_0x1b6cfd(0x1a7)]&&_0x19783d[_0x1b6cfd(0x17e)](capitalize(_0x1ecdaa['id']));});let _0x2d9faa=[];return _0x11c5d4['forEach'](_0x2d8d5e=>{const _0x251f67=_0xa86f2e;_0x2d8d5e=capitalize(_0x2d8d5e);if(!_0x19783d[_0x251f67(0x20a)](_0x2d8d5e))_0x2d9faa[_0x251f67(0x17e)](_0x2d8d5e);}),_0x19783d;}function setStartDatePerformance(){const _0x6324a6=_0x16db37;if(config&&config['liquidity'][0x0][_0x6324a6(0xb2)][_0x6324a6(0x1a7)]!=0x0){const _0x5350fa=config[_0x6324a6(0x1ff)][0x0][_0x6324a6(0xb2)];dbPerformance[_0x6324a6(0x222)]('data')[_0x6324a6(0xed)]({'date':config['startdate']})['assign']({'coins':_0x5350fa})[_0x6324a6(0x16a)]();}}async function recreateCoinResults(){const _0x57e2c9=_0x16db37;let _0x27ebd7,_0x3c3688=[];try{const _0xe2013c=fns[_0x57e2c9(0xde)](fns[_0x57e2c9(0x15e)](config[_0x57e2c9(0xe1)][_0x57e2c9(0x208)](/\//g,'-')),_0x57e2c9(0x1f0));for(const _0x20c608 of currentCoins){if(_0x20c608['coin']!=config[_0x57e2c9(0xf7)]){let _0x40aab8=0x0,_0x1cec33,_0xbe5682;_0x27ebd7=await getAllEventOrders(_0x20c608[_0x57e2c9(0x1ec)]);if(_0x27ebd7[_0x57e2c9(0x1a7)]>0x0)_0x27ebd7[_0x57e2c9(0xd1)](_0x5623e3=>{const _0x56634f=_0x57e2c9,_0x2a3d74=_0x20c608[_0x56634f(0x1ec)][_0x56634f(0x20a)](config[_0x56634f(0xf7)]+'/');_0x3c3688[_0x56634f(0x17e)]({'datetime':_0x5623e3[_0x56634f(0x125)],'coin':_0x20c608[_0x56634f(0x1f1)],'symbol':_0x20c608[_0x56634f(0x1ec)],'side':_0x5623e3['side'],'reverse':_0x2a3d74,'amount':formatResult(_0x5623e3[_0x56634f(0x157)],0x8),'filled':formatResult(_0x5623e3[_0x56634f(0x157)],0x8),'price':formatResult(_0x5623e3[_0x56634f(0xef)],0x8)}),_0x40aab8=_0x5623e3['side']==_0x56634f(0xc8)?_0x40aab8+_0x5623e3['filled']:_0x40aab8-_0x5623e3[_0x56634f(0x157)];if(!_0xbe5682)_0xbe5682=_0x5623e3[_0x56634f(0xef)];});_0x1cec33=_0x20c608[_0x57e2c9(0x133)]-_0x40aab8;let _0x118e5d;config['liquidity'][_0x57e2c9(0xd1)](_0x2f8060=>{const _0x570723=_0x57e2c9;!_0x118e5d&&(_0x118e5d=_0x2f8060[_0x570723(0xb2)]['find'](_0x29d0e6=>_0x29d0e6[_0x570723(0x1f1)]==_0x20c608[_0x570723(0x1f1)]),_0x118e5d&&(_0x1cec33=_0x118e5d['number'],_0xbe5682=_0x118e5d['price']));});let _0x2db7a6=dbCoinResults['get'](_0x57e2c9(0x206))[_0x57e2c9(0xed)]({'coin':_0x20c608[_0x57e2c9(0x1f1)]})[_0x57e2c9(0x14d)]();_0x2db7a6={'coin':_0x20c608['coin'],'number':_0x1cec33,'breakeven':_0xbe5682,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x57e2c9(0x222)](_0x57e2c9(0x206))[_0x57e2c9(0xed)]({'coin':_0x20c608[_0x57e2c9(0x1f1)]})[_0x57e2c9(0x1dc)](_0x2db7a6)[_0x57e2c9(0x16a)]();}}_0x3c3688['sort']((_0x47b67f,_0x4ce598)=>_0x47b67f[_0x57e2c9(0x125)]>_0x4ce598[_0x57e2c9(0x125)]?0x1:_0x4ce598[_0x57e2c9(0x125)]>_0x47b67f['datetime']?-0x1:0x0);let _0x11aee0=0x0;for(let _0x243857 of _0x3c3688){await updateCoinResults(_0x243857,!![]);}}catch(_0x43a471){await handleError(_0x43a471,_0x57e2c9(0x112));}}async function getAllEventOrders(_0x318fb2){const _0xd1c80d=_0x16db37;let _0x2c4ecc=[],_0x58dfae=dbLogs['get'](_0xd1c80d(0xfa))[_0xd1c80d(0x1e2)](_0x1d09ab=>{const _0x50c3bf=_0xd1c80d,_0x3ec161=_0x1d09ab[_0x50c3bf(0x143)][_0x50c3bf(0x10a)]();return _0x3ec161[_0x50c3bf(0x20a)](_0x318fb2[_0x50c3bf(0x10a)]())&&(_0x3ec161[_0x50c3bf(0x20a)](_0x50c3bf(0x1c9))&&_0x3ec161[_0x50c3bf(0x20a)](_0x50c3bf(0xe9))||_0x3ec161[_0x50c3bf(0x20a)]('filled')&&_0x3ec161[_0x50c3bf(0x20a)](_0x50c3bf(0xe9)));})[_0xd1c80d(0x19f)]('time')[_0xd1c80d(0x14d)]();return _0x58dfae[_0xd1c80d(0xd1)](_0x2a25cd=>{const _0x18c924=_0xd1c80d,_0x355ccc=_0x2a25cd[_0x18c924(0x143)][_0x18c924(0x20a)](_0x18c924(0x1a0))?_0x18c924(0x1a0):_0x18c924(0xc8),_0x4d2e54=/#([0-9]|\.)+\s/i,_0x49e354=Number(_0x4d2e54[_0x18c924(0x1f6)](_0x2a25cd[_0x18c924(0x143)])[0x0][_0x18c924(0x152)](0x1)),_0x30db34=/@([0-9]|\.)+$/i,_0x9e7ae9=Number(_0x30db34[_0x18c924(0x1f6)](_0x2a25cd[_0x18c924(0x143)])[0x0]['slice'](0x1));_0x2c4ecc[_0x18c924(0x17e)]({'datetime':_0x2a25cd[_0x18c924(0x114)],'coin':symbolToCoin(_0x318fb2),'symbol':_0x318fb2,'side':_0x355ccc,'amount':_0x49e354,'filled':_0x49e354,'price':_0x9e7ae9});}),_0x2c4ecc;}async function getAllOrders(_0x431dc4,_0x193be4){const _0x5be908=_0x16db37;let _0x5d556a=[];while(_0x193be4<exchange[_0x5be908(0x1e0)]()){const _0x20d8c9=0x1f4;try{const _0x4b02f4=await exchange[_0x5be908(0x9c)](_0x431dc4,_0x193be4,_0x20d8c9);if(_0x4b02f4[_0x5be908(0x1a7)])_0x193be4=_0x4b02f4[_0x4b02f4['length']-0x1][_0x5be908(0x1ba)]+0x1,_0x5d556a=_0x5d556a[_0x5be908(0x1e6)](_0x4b02f4);else break;}catch(_0x53cba6){await handleError(_0x53cba6,_0x5be908(0x13a),_0x431dc4);}}return _0x5d556a;}async function validate24hChanges(){const _0x3345bc=_0x16db37;for(const _0x570c47 of currentCoins){if(_0x570c47[_0x3345bc(0x1f1)]!=config[_0x3345bc(0xf7)]){let _0x5e8ea0;_0x570c47[_0x3345bc(0x199)]?_0x5e8ea0=formatResult((0x1/(global[_0x3345bc(0x1d7)][noslash(_0x570c47[_0x3345bc(0x1ec)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5e8ea0=global[_0x3345bc(0x1d7)][noslash(_0x570c47[_0x3345bc(0x1ec)])],_0x5e8ea0<config['change24h']&&(logHistory(_0x3345bc(0x1b7),_0x570c47[_0x3345bc(0x1f1)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x5e8ea0+'%'),logHistory(_0x3345bc(0x1b7),_0x3345bc(0x1e9)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xe15d5a,_0x11ac18){const _0x4831fd=_0x16db37;if(!_0xe15d5a)return!![];const _0x1c68e6=_0x11ac18['split']('.'),_0x53c507=_0xe15d5a[_0x4831fd(0xb9)]('.');for(var _0x363e90=0x0;_0x363e90<_0x53c507[_0x4831fd(0x1a7)];_0x363e90++){const _0x3362d5=~~_0x53c507[_0x363e90],_0x216243=~~_0x1c68e6[_0x363e90];if(_0x3362d5<_0x216243)return!![];if(_0x3362d5>_0x216243)return![];}return![];}async function oneTimeMigration(){const _0x701d65=_0x16db37;let _0x146e99=dbLogs[_0x701d65(0x222)]('version')[_0x701d65(0x14d)]();if(isOlderVersion(_0x146e99,_0x701d65(0x162))){let _0x240015=[];const _0x5a5d79=dbLogs[_0x701d65(0x222)](_0x701d65(0xfa))[_0x701d65(0x14d)]();_0x5a5d79['forEach'](_0x31a5c2=>{const _0x2a4f62=_0x701d65;_0x240015[_0x2a4f62(0x17e)]({'time':_0x31a5c2[_0x2a4f62(0x114)],'type':_0x31a5c2[_0x2a4f62(0x13d)],'event':_0x31a5c2[_0x2a4f62(0x143)]});}),dbLogs['get'](_0x701d65(0xfa))[_0x701d65(0x1dc)](_0x240015)[_0x701d65(0x16a)]();}let _0x2942af=dbConfig[_0x701d65(0x222)](_0x701d65(0x19b))[_0x701d65(0x14d)]();if(isOlderVersion(_0x2942af,_0x701d65(0x162))){let _0x23665e=dbConfig['get'](_0x701d65(0x1f8))[_0x701d65(0xed)]({'botID':botID})['value']();if(_0x23665e){let _0x55fadb=[];_0x23665e['portfolio'][_0x701d65(0xd1)](_0x1a8976=>{const _0x172aa0=_0x701d65;_0x55fadb[_0x172aa0(0x17e)]({'coin':_0x1a8976[_0x172aa0(0x1f1)],'number':_0x1a8976['startnumber'],'price':_0x1a8976[_0x172aa0(0x16e)]}),delete _0x1a8976[_0x172aa0(0xf1)],delete _0x1a8976[_0x172aa0(0x16e)];});if(_0x55fadb[_0x701d65(0x1a7)]!==0x0)fs[_0x701d65(0xca)](configbackuppath+(_0x701d65(0xa8)+botID+_0x701d65(0x223)),JSON[_0x701d65(0xb7)](_0x55fadb,null,0x4),function(_0x184366){if(_0x184366){}});const _0x27cfbb=(_0x699426,_0x3eed89)=>{const _0x261f69=_0x701d65;let _0x557d99=[];_0x3eed89['forEach'](_0x570b8c=>{const _0x1cfade=_0x1ae8,_0x5e1c6d=_0x699426[_0x1cfade(0xed)](_0x2d771e=>_0x2d771e['coin']==_0x570b8c['coin']);if(!_0x5e1c6d)_0x557d99['push'](_0x570b8c);});let _0x57c72f=[];return _0x699426[_0x261f69(0xd1)](_0x78cd45=>{const _0x2833cc=_0x261f69,_0x29294f=_0x3eed89[_0x2833cc(0xed)](_0x2ef7b9=>_0x2ef7b9[_0x2833cc(0x1f1)]==_0x78cd45[_0x2833cc(0x1f1)]);if(!_0x29294f||_0x29294f[_0x2833cc(0x133)]==0x0&&_0x78cd45['number']!=0x0)_0x57c72f['push'](_0x78cd45);}),{'missingDay1':_0x557d99,'notInDay2':_0x57c72f};},_0x4d057b=dbPerformance[_0x701d65(0x222)](_0x701d65(0xa5))[_0x701d65(0x11f)]()[_0x701d65(0x14d)]();if(_0x4d057b[_0x701d65(0x1a7)]>0x1){const {missingDay1:_0x1f2e9c,notInDay2:_0x491c56}=_0x27cfbb(_0x55fadb,_0x4d057b[0x1][_0x701d65(0x206)]);_0x55fadb=[..._0x55fadb,..._0x1f2e9c],_0x491c56['forEach'](_0x340e20=>{const _0x58ffc2=_0x701d65;let _0x3c626e=_0x55fadb[_0x58ffc2(0x13e)](_0x4b7ac0=>_0x4b7ac0[_0x58ffc2(0x1f1)]==_0x340e20[_0x58ffc2(0x1f1)]);_0x3c626e!=-0x1&&_0x55fadb[_0x58ffc2(0x124)](_0x3c626e,0x1);});}_0x55fadb[_0x701d65(0x13b)]((_0x2c0bcd,_0x12491a)=>_0x2c0bcd[_0x701d65(0x1f1)]>_0x12491a[_0x701d65(0x1f1)]?0x1:_0x12491a[_0x701d65(0x1f1)]>_0x2c0bcd[_0x701d65(0x1f1)]?-0x1:0x0);let _0x5b689e=[{'date':_0x23665e[_0x701d65(0xe1)],'changes':_0x55fadb}];_0x4d057b[_0x701d65(0x1a7)]>0x2&&_0x4d057b[_0x701d65(0xd1)]((_0x56e3ff,_0x5663f6)=>{const _0x10a4a4=_0x701d65;if(_0x5663f6>0x0&&_0x5663f6<_0x4d057b[_0x10a4a4(0x1a7)]-0x1){const {missingDay1:_0x13f3a1,notInDay2:_0x2be69f}=_0x27cfbb(_0x4d057b[_0x5663f6][_0x10a4a4(0x206)],_0x4d057b[_0x5663f6+0x1][_0x10a4a4(0x206)]);_0x55fadb=[],(_0x13f3a1[_0x10a4a4(0x1a7)]!=0x0||_0x2be69f[_0x10a4a4(0x1a7)]!=0x0)&&(_0x13f3a1[_0x10a4a4(0x1a7)]!=0x0&&_0x55fadb[_0x10a4a4(0x17e)](..._0x13f3a1),_0x2be69f[_0x10a4a4(0x1a7)]!=0x0&&(_0x2be69f[_0x10a4a4(0xd1)](_0x3d7d33=>{const _0x49c534=_0x10a4a4;_0x3d7d33[_0x49c534(0x133)]=-_0x3d7d33[_0x49c534(0x133)];}),_0x55fadb[_0x10a4a4(0x17e)](..._0x2be69f)),_0x55fadb['sort']((_0x18c9f0,_0x40f6de)=>_0x18c9f0[_0x10a4a4(0x1f1)]>_0x40f6de[_0x10a4a4(0x1f1)]?0x1:_0x40f6de['coin']>_0x18c9f0[_0x10a4a4(0x1f1)]?-0x1:0x0),_0x5b689e[_0x10a4a4(0x17e)]({'date':_0x4d057b[_0x5663f6+0x1][_0x10a4a4(0x209)],'changes':_0x55fadb}));}}),dbConfig[_0x701d65(0x222)](_0x701d65(0x1f8))[_0x701d65(0xed)]({'botID':botID})[_0x701d65(0x1dc)]({..._0x23665e,'liquidity':_0x5b689e})[_0x701d65(0x16a)]();}}if(isOlderVersion(_0x2942af,_0x701d65(0x198))){let _0x51c48d=dbConfig[_0x701d65(0x222)](_0x701d65(0x1f8))['find']({'botID':botID})[_0x701d65(0x14d)]();if(_0x51c48d){const _0x38b6fc=_0x51c48d[_0x701d65(0x1eb)],_0x1cb5d9=_0x38b6fc?capitalize(_0x38b6fc):_0x701d65(0xc4);dbConfig[_0x701d65(0x222)](_0x701d65(0x1f8))[_0x701d65(0xed)]({'botID':botID})[_0x701d65(0x1dc)]({'exchange':_0x1cb5d9})[_0x701d65(0x16a)]();}}let _0x236b64=dbPerformance[_0x701d65(0x222)](_0x701d65(0x19b))['value']();isOlderVersion(_0x236b64,'2.3.5')&&setStartDatePerformance();let _0x431305=dbCoinResults[_0x701d65(0x222)](_0x701d65(0x19b))[_0x701d65(0x14d)]();if(isOlderVersion(_0x431305,_0x701d65(0x1fd))){let _0x58add8=dbCoinResults[_0x701d65(0x222)](_0x701d65(0x206))[_0x701d65(0x14d)]();if(_0x58add8[_0x701d65(0x1a7)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x217e1e=_0x16db37;dbConfig[_0x217e1e(0xc7)](_0x217e1e(0x19b),serverversion)[_0x217e1e(0x16a)](),dbPerformance[_0x217e1e(0xc7)](_0x217e1e(0x19b),serverversion)['write'](),dbLogs['set'](_0x217e1e(0x19b),serverversion)[_0x217e1e(0x16a)](),dbCoinResults[_0x217e1e(0xc7)](_0x217e1e(0x19b),serverversion)[_0x217e1e(0x16a)]();}function getConfiguration(_0x3737d8){const _0x2f8106=_0x16db37;let _0x562c82=dbConfig[_0x2f8106(0x222)]('bot')[_0x2f8106(0xed)]({'botID':_0x3737d8})[_0x2f8106(0x14d)]();if(_0x562c82){let _0x34f089=![];typeof _0x562c82[_0x2f8106(0x18c)]==_0x2f8106(0x197)&&(_0x562c82={..._0x562c82,'threshold':Number(_0x562c82['threshold'])},_0x34f089=!![]),_0x562c82['change24h']==undefined&&(_0x562c82={..._0x562c82,'change24h':-0x14},_0x34f089=!![]),_0x562c82[_0x2f8106(0x1d5)]==undefined&&(_0x562c82={..._0x562c82,'fiat':_0x2f8106(0x159)},_0x34f089=!![]),_0x562c82[_0x2f8106(0x142)]==undefined&&(_0x562c82={..._0x562c82,'onepagemode':settings[_0x2f8106(0x142)]},_0x34f089=!![]),_0x562c82[_0x2f8106(0x110)]==undefined&&(_0x562c82={..._0x562c82,'colorscheme':_0x2f8106(0xd2)},_0x34f089=!![]),_0x562c82[_0x2f8106(0xe2)]==undefined&&(_0x562c82={..._0x562c82,'autoliquidity':!![]},_0x34f089=!![]),_0x34f089&&(_0x562c82={'botID':_0x562c82['botID'],'exchange':_0x562c82['exchange'],'apiKey':_0x562c82[_0x2f8106(0x1a4)],'apiSecret':_0x562c82['apiSecret'],'apiPassword':_0x562c82[_0x2f8106(0xa7)],'basecoin':_0x562c82['basecoin'],'botname':_0x562c82[_0x2f8106(0x1ac)],'showname':_0x562c82['showname'],'threshold':_0x562c82[_0x2f8106(0x18c)],'ordertype':_0x562c82[_0x2f8106(0x11e)],'timeout':_0x562c82[_0x2f8106(0x15b)],'fiat':_0x562c82[_0x2f8106(0x1d5)],'startdate':_0x562c82['startdate'],'recreate':_0x562c82[_0x2f8106(0x1ef)],'timeshift':_0x562c82[_0x2f8106(0x11a)],'onepagemode':_0x562c82[_0x2f8106(0x142)],'headless':_0x562c82[_0x2f8106(0x1a9)],'cooldown':_0x562c82[_0x2f8106(0x221)],'change24h':_0x562c82[_0x2f8106(0x172)],'emojibuy':_0x562c82[_0x2f8106(0xc6)],'emojisell':_0x562c82['emojisell'],'colorscheme':_0x562c82[_0x2f8106(0x110)],'portfolio':_0x562c82[_0x2f8106(0x220)],'autoliquidity':_0x562c82[_0x2f8106(0xe2)],'liquidity':_0x562c82[_0x2f8106(0x1ff)],'openOrders':_0x562c82['openOrders']},dbConfig[_0x2f8106(0x222)]('bot')['remove']()[_0x2f8106(0x16a)](),dbConfig[_0x2f8106(0x222)](_0x2f8106(0x1f8))[_0x2f8106(0x17e)](_0x562c82)[_0x2f8106(0x16a)]());}else _0x562c82={'botID':_0x3737d8,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2f8106(0xb4)+_0x3737d8,'showname':![],'threshold':0x3,'ordertype':_0x2f8106(0x1c9),'timeout':0x14,'fiat':_0x2f8106(0x159),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2f8106(0x11a)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2f8106(0xd2),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x562c82;}function emittedConfiguration(){const _0x5649e8=_0x16db37;let _0x34c8f6;if(config['apiKey']=='')_0x34c8f6={...config,'configstate':'initial'};else config[_0x5649e8(0x1a4)]==_0x5649e8(0x1bc)?_0x34c8f6={...config,'configstate':_0x5649e8(0x217)}:(_0x34c8f6={...config,'apiKey':'************','apiSecret':_0x5649e8(0x1a5)},config['apiPassword']&&(_0x34c8f6['apiPassword']=_0x5649e8(0x1a5)));return _0x34c8f6;}function getSettings(){const _0x29bc3c=_0x16db37;return dbSettings[_0x29bc3c(0x222)](_0x29bc3c(0x1e5))[_0x29bc3c(0x14d)]();}function getSecure(){const _0x4a71fb=_0x16db37;return dbSecure['get'](_0x4a71fb(0x146))[_0x4a71fb(0x14d)]()||{};}function updateTimeshift(_0x387f8b){const _0x49511b=_0x16db37;let _0x57281a=dbConfig[_0x49511b(0x222)](_0x49511b(0x1f8))[_0x49511b(0xed)]({'botID':botID})[_0x49511b(0x14d)]();_0x57281a&&dbConfig[_0x49511b(0x222)](_0x49511b(0x1f8))[_0x49511b(0xed)]({'botID':botID})[_0x49511b(0x1dc)]({'timeshift':_0x387f8b})[_0x49511b(0x16a)](),config['timeshift']=_0x387f8b,proxyEmit(_0x49511b(0xec),emittedConfiguration());}function updateOnepagemode(_0x27942f){const _0x52ac9c=_0x16db37;let _0x4b38e9=dbConfig['get'](_0x52ac9c(0x1f8))[_0x52ac9c(0xed)]({'botID':botID})[_0x52ac9c(0x14d)]();_0x4b38e9&&dbConfig[_0x52ac9c(0x222)]('bot')['find']({'botID':botID})[_0x52ac9c(0x1dc)]({'onepagemode':_0x27942f})[_0x52ac9c(0x16a)](),config[_0x52ac9c(0x142)]=_0x27942f,proxyEmit(_0x52ac9c(0xec),emittedConfiguration());}async function storeConfiguration(_0x1c1737){const _0x13bb25=_0x16db37;logger[_0x13bb25(0x1a8)](_0x13bb25(0xf5));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x13bb25(0x1a8)](_0x13bb25(0xbd));let _0x49f4bc=[],_0x4d3602=![],_0x3582af=![],_0x23a702=[];_0x1c1737[_0x13bb25(0x220)][_0x13bb25(0xd1)](_0x2da0ce=>{const _0x38e38d=_0x13bb25;if(!_0x2da0ce[_0x38e38d(0x15a)]&&_0x2da0ce[_0x38e38d(0x1f1)]!=_0x1c1737['basecoin'])_0x23a702[_0x38e38d(0x17e)](_0x2da0ce[_0x38e38d(0x1ec)]);}),_0x23a702[_0x13bb25(0xd1)](_0x4bd8cc=>{const _0x4486e6=_0x13bb25,_0x5ea7b9=watchedSymbols[_0x4486e6(0x20a)](_0x4bd8cc);!_0x5ea7b9&&_0x49f4bc[_0x4486e6(0x17e)](_0x4bd8cc);}),_0x23a702[_0x13bb25(0xd1)](_0x1e338c=>{const _0x2af48c=_0x13bb25,_0x5925f6=currentCoins[_0x2af48c(0xed)](_0x28a66e=>_0x28a66e[_0x2af48c(0x1ec)]==_0x1e338c);!_0x5925f6&&(_0x4d3602=!![]);}),currentCoins[_0x13bb25(0xd1)](_0x49d993=>{const _0x2df340=_0x13bb25;if(_0x49d993['coin']!=config['basecoin']){const _0x12611d=_0x23a702[_0x2df340(0xed)](_0x16caf9=>_0x16caf9==_0x49d993[_0x2df340(0x1ec)]);!_0x12611d&&(_0x4d3602=!![]);}}),_0x1c1737[_0x13bb25(0x220)][_0x13bb25(0xd1)](_0x1535ad=>{const _0x12af3c=_0x13bb25,_0x21de3a=config[_0x12af3c(0x220)][_0x12af3c(0xed)](_0x1afeb3=>_0x1afeb3[_0x12af3c(0x1f1)]==_0x1535ad['coin']);if(_0x21de3a&&_0x1535ad[_0x12af3c(0xe0)]!=_0x21de3a[_0x12af3c(0xe0)])_0x3582af=!![];});let _0x333475=dbConfig[_0x13bb25(0x222)](_0x13bb25(0x1f8))['find']({'botID':botID})[_0x13bb25(0x14d)]();_0x1c1737={..._0x1c1737,'apiKey':crypt[_0x13bb25(0x1fc)](secure[_0x13bb25(0x1de)],_0x1c1737[_0x13bb25(0x1a4)])[_0x13bb25(0x174)],'apiSecret':crypt[_0x13bb25(0x1fc)](secure['privateKey'],_0x1c1737['apiSecret'])[_0x13bb25(0x174)]};_0x1c1737['apiPassword']&&(_0x1c1737['apiPassword']=crypt['decrypt'](secure['privateKey'],_0x1c1737['apiPassword'])['message']);let _0x554fa1=![];if(_0x333475){_0x1c1737[_0x13bb25(0x1a4)]==_0x13bb25(0x1a5)?_0x1c1737['apiKey']=config[_0x13bb25(0x1a4)]:_0x554fa1=!![];_0x1c1737['apiSecret']=='************'?_0x1c1737[_0x13bb25(0x149)]=config[_0x13bb25(0x149)]:_0x554fa1=!![];if(_0x1c1737[_0x13bb25(0xa7)]==_0x13bb25(0x1a5))_0x1c1737[_0x13bb25(0xa7)]=config[_0x13bb25(0xa7)];else{if(_0x1c1737[_0x13bb25(0xa7)])_0x554fa1=!![];}dbConfig[_0x13bb25(0x222)](_0x13bb25(0x1f8))[_0x13bb25(0xed)]({'botID':botID})[_0x13bb25(0x1dc)](_0x1c1737)[_0x13bb25(0x16a)]();}else dbConfig[_0x13bb25(0x222)]('bot')[_0x13bb25(0x17e)](_0x1c1737)[_0x13bb25(0x16a)](),_0x554fa1=!![],process['send']({'status':_0x13bb25(0x12c),'live':'running'},_0x4541f6=>{});process['send']({'botname':_0x1c1737[_0x13bb25(0x1ac)]},_0xa54bb3=>{}),updateBotManager(),config={..._0x1c1737},proxyEmit(_0x13bb25(0x189)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x554fa1)await reset(_0x49f4bc,!![]);else _0x4d3602||_0x3582af?await reset(_0x49f4bc,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x13bb25(0x118));}async function storeHeadless(_0x17f3cc){const _0x1ef23c=_0x16db37,_0x74364a={...config,'headless':_0x17f3cc[_0x1ef23c(0x1a9)]};let _0x52c171=dbConfig['get'](_0x1ef23c(0x1f8))[_0x1ef23c(0xed)]({'botID':botID})['value']();_0x52c171&&dbConfig['get'](_0x1ef23c(0x1f8))[_0x1ef23c(0xed)]({'botID':botID})[_0x1ef23c(0x1dc)](_0x74364a)[_0x1ef23c(0x16a)](),config={..._0x74364a},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0xda8c9c){const _0x17364d=_0x16db37,_0x3e0fbe={...config,'fiat':_0xda8c9c};let _0xdaa38f=dbConfig['get']('bot')['find']({'botID':botID})[_0x17364d(0x14d)]();_0xdaa38f&&dbConfig[_0x17364d(0x222)]('bot')['find']({'botID':botID})[_0x17364d(0x1dc)](_0x3e0fbe)['write'](),config={..._0x3e0fbe},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x13e387=_0x16db37;logger[_0x13e387(0xf3)](_0x13e387(0x19a));try{if(fs['existsSync'](path[_0x13e387(0x20c)](configpath,_0x13e387(0x93)+botID+_0x13e387(0x8b))))fs[_0x13e387(0x1be)](path[_0x13e387(0x20c)](configpath,_0x13e387(0x93)+botID+_0x13e387(0x8b)));if(fs[_0x13e387(0x180)](path[_0x13e387(0x20c)](configpath,'bot-'+botID+'-performance.json')))fs[_0x13e387(0x1be)](path['join'](configpath,_0x13e387(0x93)+botID+'-performance.json'));if(fs[_0x13e387(0x180)](path[_0x13e387(0x20c)](configpath,_0x13e387(0x93)+botID+_0x13e387(0xbb))))fs[_0x13e387(0x1be)](path[_0x13e387(0x20c)](configpath,_0x13e387(0x93)+botID+'-results.json'));}catch(_0x54582b){if(_0x54582b)logger[_0x13e387(0xf3)](_0x13e387(0x1db),_0x54582b);}const _0x585086=getDate();let _0x2a7739=[];currentCoins[_0x13e387(0xd1)](_0x15374b=>{const _0x5d8d36=_0x13e387;_0x2a7739['push']({'coin':_0x15374b[_0x5d8d36(0x1f1)],'number':_0x15374b['number'],'price':_0x15374b['last']});});let _0x5c803d=dbConfig[_0x13e387(0x222)]('bot')['find']({'botID':botID})[_0x13e387(0x14d)]();_0x5c803d&&(dbConfig[_0x13e387(0x222)]('bot')[_0x13e387(0xed)]({'botID':botID})[_0x13e387(0x1dc)]({'liquidity':[{'date':_0x585086,'changes':_0x2a7739}]})[_0x13e387(0x16a)](),config[_0x13e387(0x1ff)]=[]),process['send']({'stop':'restart'},_0x5ee4ac=>{});}function noslash(_0x80638a){const _0x2f34a5=_0x16db37;return _0x80638a[_0x2f34a5(0x208)]('/','');}function updateHighestFee(_0x7d43d8){const _0x2ba256=_0x16db37;if(_0x7d43d8[_0x2ba256(0x199)]){let _0x28cda8={'filled':_0x7d43d8['filled']*_0x7d43d8[_0x2ba256(0xef)],'amount':_0x7d43d8[_0x2ba256(0x157)]*_0x7d43d8[_0x2ba256(0xef)],'side':_0x7d43d8['side']=='sell'?_0x2ba256(0xc8):_0x2ba256(0x1a0),'price':0x1/_0x7d43d8[_0x2ba256(0xef)]};_0x7d43d8={..._0x7d43d8,..._0x28cda8};}const _0x324ffa=defaultFee*_0x7d43d8['filled']*_0x7d43d8[_0x2ba256(0xef)];lastFees[_0x2ba256(0xd0)][_0x2ba256(0x1a7)]===0x14&&lastFees['recent20'][_0x2ba256(0x12b)](),lastFees[_0x2ba256(0xd0)][_0x2ba256(0x17e)](_0x324ffa),lastFees['highest']=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x43c605){const _0x33b384=_0x16db37;logger[_0x33b384(0x1a8)](_0x33b384(0xce)+_0x43c605[_0x33b384(0x1ec)]+_0x33b384(0xa2)+_0x43c605[_0x33b384(0x165)]+_0x33b384(0xa2)+_0x43c605['id']);let _0x233687=_0x43c605['status'],_0x21d49c=![];currentCoins[_0x33b384(0xd1)](_0x182852=>{const _0x5c6cb5=_0x33b384;_0x182852[_0x5c6cb5(0x1ec)]==_0x43c605[_0x5c6cb5(0x1ec)]&&(_0x21d49c=!![]);});if(!_0x21d49c)return;const _0x5ceed0=currentCoins[_0x33b384(0xed)](_0xc40c82=>_0xc40c82[_0x33b384(0x1ec)]==_0x43c605['symbol']),_0x46459d=_0x10d8a8=>{const _0x270031=_0x33b384;if(_0x5ceed0)_0x5ceed0[_0x270031(0x1b1)]=_0x10d8a8;};if(_0x233687==_0x33b384(0x1d8))_0x46459d(_0x33b384(0x1d8));else{if(_0x233687==_0x33b384(0x141)){_0x46459d(_0x33b384(0x141));const _0xb370fb=await getCoins();[currentCoins,currentCoinsAll]=_0xb370fb,await getOpenOrders(),handleOpenOrders();}else{if(_0x233687==_0x33b384(0x19c)){logger[_0x33b384(0x1a8)](_0x33b384(0x1fb)+_0x43c605[_0x33b384(0x1ec)]+'\x20|\x20'+_0x43c605[_0x33b384(0x157)]+_0x33b384(0xa2)+_0x43c605['id']);let _0x50f84f=![];if(lastOrders)for(const _0x56a0dd of lastOrders){const _0x4db6d3=0xc8,_0x35a55c=0x1388;let _0x27ef58=0x0;while(!_0x56a0dd[_0x33b384(0xcd)]&&_0x27ef58*_0x4db6d3<_0x35a55c){_0x27ef58++,await sleep(_0x4db6d3);}if(_0x27ef58>0x0)logger[_0x33b384(0x1a8)]('Waited\x20'+_0x27ef58*_0x4db6d3/0x3e8+_0x33b384(0x1f3));if(_0x56a0dd[_0x33b384(0xcd)]==_0x43c605['id']){logger['debug'](_0x33b384(0x1f2)+_0x43c605['id']),_0x50f84f=!![];if(_0x56a0dd[_0x33b384(0x157)]==0x0){logger[_0x33b384(0x1a8)](_0x33b384(0x1ce)+_0x43c605['id']);if(_0x43c605['average'])_0x56a0dd[_0x33b384(0xef)]=_0x43c605['average'];else{if(_0x43c605[_0x33b384(0xef)])_0x56a0dd[_0x33b384(0xef)]=_0x43c605[_0x33b384(0xef)];else{}}_0x56a0dd[_0x33b384(0x157)]=_0x43c605[_0x33b384(0x157)],updateHighestFee(_0x56a0dd),_0x46459d('filled'),await validateOrders();if(lockOrders==ORDERS[_0x33b384(0x18d)]){const _0x198947=await getCoins();[currentCoins,currentCoinsAll]=_0x198947;}_0x56a0dd[_0x33b384(0xc2)]={'currency':_0x43c605[_0x33b384(0xc2)]?_0x43c605['fee'][_0x33b384(0x17c)]:null,'cost':_0x43c605[_0x33b384(0xc2)]?_0x43c605[_0x33b384(0xc2)][_0x33b384(0x1c0)]:0x0},await updateCoinResults(_0x56a0dd);}}}if(!_0x50f84f){logger[_0x33b384(0x1a8)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x43c605['id']),_0x46459d('filled');const _0x156e80=await getCoins();[currentCoins,currentCoinsAll]=_0x156e80,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x2eda9d=JSON[_0x33b384(0x17b)](lastBalances[_0x33b384(0x220)]);const _0xa02259=_0x2eda9d['find'](_0x24d5b1=>_0x24d5b1[_0x33b384(0x1ec)]==_0x43c605[_0x33b384(0x1ec)]);if(_0xa02259){if(_0x233687==_0x33b384(0x1d8))_0xa02259[_0x33b384(0x1b1)]=_0xa02259[_0x33b384(0x1b1)]==_0x33b384(0x157)?_0x33b384(0x157):_0x33b384(0x1d8);else{if(_0x233687==_0x33b384(0x141))_0xa02259['orderstatus']=_0xa02259['orderstatus']==_0x33b384(0x157)?_0x33b384(0x157):_0x33b384(0x141);else _0x233687==_0x33b384(0x19c)&&(_0xa02259['orderstatus']=_0x33b384(0x157));}}lastBalances={...lastBalances,'portfolio':JSON[_0x33b384(0xb7)](_0x2eda9d)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xd88ae5=_0x16db37;await getOpenOrders();let _0x59c28f=![];currentCoins[_0xd88ae5(0xd1)](_0x150a63=>{const _0x3b60a9=_0xd88ae5;_0x59c28f=allOpenOrders[_0x3b60a9(0xed)](_0x33a6ea=>_0x33a6ea[_0x3b60a9(0x1ec)]==_0x150a63[_0x3b60a9(0x1ec)]),_0x150a63[_0x3b60a9(0x1b1)]=_0x59c28f?_0x3b60a9(0x1d8):_0x3b60a9(0x18b);});}async function getCoins(_0x33625d=!![],_0x24ab31=config[_0x16db37(0xf7)]){const _0xd23f48=_0x16db37;let _0x5b8144,_0x256e33=[],_0x573aa5=[],_0x5c53ad=[],_0x5e69e6=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5b8144=await exchange[_0xd23f48(0x21f)](),mybalances=_0x5b8144[_0xd23f48(0x144)];for(const [_0x397b8f,_0x43f860]of Object[_0xd23f48(0x130)](mybalances)){_0x5e69e6['push'](_0x397b8f);}config['portfolio'][_0xd23f48(0xd1)](_0x3dafa7=>{const _0x883b1f=_0xd23f48;!_0x5e69e6['includes'](_0x3dafa7['coin'])&&(mybalances[_0x3dafa7[_0x883b1f(0x1f1)]]=0x0);});if(_0x24ab31=='')for(const [_0x1f94bb,_0x116770]of Object[_0xd23f48(0x130)](mybalances)){_0x116770!=0x0&&_0x573aa5[_0xd23f48(0x17e)]({'coin':_0x1f94bb});}else{let _0x11ceea=![];for(const [_0x267479,_0x21b907]of Object[_0xd23f48(0x130)](mybalances)){const _0x3dc98f=config[_0xd23f48(0x220)][_0xd23f48(0xed)](_0x1f7119=>_0x1f7119[_0xd23f48(0x1f1)]==_0x267479),_0x29a965=_0x267479+'/'+_0x24ab31,_0x558ef=_0x24ab31+'/'+_0x267479,_0x3ad3f1=currentCoins[_0xd23f48(0xed)](_0x5cf55f=>_0x5cf55f['coin']==_0x267479);_0x11ceea=![];if((_0x21b907!=0x0||_0x3dc98f)&&(allSymbols['includes'](_0x29a965)||_0x267479==_0x24ab31))_0x573aa5[_0xd23f48(0x17e)]({'coin':_0x267479,'symbol':_0x29a965,'reverse':![],'number':Math[_0xd23f48(0x1c5)](_0x21b907+(_0x3dc98f&&_0x3dc98f[_0xd23f48(0xe0)]||0x0),0x0),'orderstatus':_0x3ad3f1?_0x3ad3f1[_0xd23f48(0x1b1)]:_0xd23f48(0x18b)});else{if((_0x21b907!=0x0||_0x3dc98f)&&allSymbols['includes'](_0x558ef))_0x573aa5[_0xd23f48(0x17e)]({'coin':_0x267479,'symbol':_0x558ef,'reverse':!![],'number':Math[_0xd23f48(0x1c5)](_0x21b907+(_0x3dc98f&&_0x3dc98f['offset']||0x0),0x0),'orderstatus':_0x3ad3f1?_0x3ad3f1[_0xd23f48(0x1b1)]:_0xd23f48(0x18b)});else _0x3dc98f&&_0x573aa5[_0xd23f48(0x17e)]({'coin':_0x3dc98f[_0xd23f48(0x1f1)],'symbol':_0x3dc98f['symbol'],'reverse':_0x3dc98f['reverse'],'number':0x0,'orderstatus':_0xd23f48(0x18b)});}}}}catch(_0x514ce9){if(!_0x33625d)handleErrorNoStop(_0x514ce9,'getCoins()');else await handleError(_0x514ce9,_0xd23f48(0x1ab));}return _0x5c53ad=cloneDeep(_0x573aa5),_0x573aa5=_0x573aa5['filter'](_0x5e6e0c=>{const _0x5636dc=_0xd23f48,_0xfb974=config['portfolio'][_0x5636dc(0xed)](_0x41988c=>_0x41988c[_0x5636dc(0x1f1)]==_0x5e6e0c[_0x5636dc(0x1f1)]);return _0xfb974&&!_0xfb974[_0x5636dc(0x15a)];}),[_0x573aa5,_0x5c53ad];}function _0x1ae8(_0x1d4686,_0x25764c){const _0x6605d2=_0x1e48();return _0x1ae8=function(_0x1992db,_0x4d5db4){_0x1992db=_0x1992db-0x8a;let _0x1e4813=_0x6605d2[_0x1992db];return _0x1e4813;},_0x1ae8(_0x1d4686,_0x25764c);}async function getCoinNumber(_0x1cede6){const _0xe2d178=_0x16db37;let _0x543b5c;try{const _0x163c25=await exchange[_0xe2d178(0x21f)]();_0x543b5c=_0x163c25['total'][_0x1cede6];}catch(_0x606297){await handleError(_0x606297,_0xe2d178(0x13f));}return _0x543b5c;}async function getOpenOrders(){const _0x9d7de8=_0x16db37;let _0x40da88;allOpenOrders=[];try{for(const _0x540bb3 of config[_0x9d7de8(0x220)]){!_0x540bb3[_0x9d7de8(0x15a)]&&_0x540bb3[_0x9d7de8(0x1f1)]!=config[_0x9d7de8(0xf7)]&&(_0x40da88=await exchange['fetchOpenOrders'](_0x540bb3[_0x9d7de8(0x1ec)]),_0x40da88['length']>0x0&&allOpenOrders[_0x9d7de8(0x17e)](_0x40da88[0x0]));}}catch(_0x3c8d79){await handleError(_0x3c8d79,_0x9d7de8(0x214));}}async function handleOpenOrders(_0x545dd5=0x0){const _0x4a9a4c=_0x16db37;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x545dd5==0x0?(logger[_0x4a9a4c(0x1a8)](_0x4a9a4c(0x8c)),_0x545dd5++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4a9a4c(0x1a8)](_0x4a9a4c(0x17a)),validateOrders(_0x4a9a4c(0xb5))));}async function testAPI(_0x4d7b30){const _0x561c40=_0x16db37,_0x42dcbe=ccxt[_0x561c40(0xd5)][_0x4d7b30[_0x561c40(0x1eb)]['toLowerCase']()],_0xd10671=new _0x42dcbe({'apiKey':_0x4d7b30[_0x561c40(0x1a4)],'secret':_0x4d7b30[_0x561c40(0x149)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x4d7b30[_0x561c40(0xa7)])_0xd10671['password']=_0x4d7b30[_0x561c40(0xa7)];try{await _0xd10671[_0x561c40(0x22b)]();}catch(_0x4bb740){throw _0x4bb740;}}function cloneDeep(_0x9573da){const _0x2b9241=_0x16db37;return JSON[_0x2b9241(0x17b)](JSON[_0x2b9241(0xb7)](_0x9573da));}async function getPortfolio(_0x2da30e){const _0x18b3fb=_0x16db37;let _0x4c2957=[],_0x34bb8b=[],_0x1aa128=[],_0x2368f1;if(_0x2da30e[_0x18b3fb(0x1a4)]!==_0x18b3fb(0x1a5)||_0x2da30e[_0x18b3fb(0x149)]!==_0x18b3fb(0x1a5)||_0x2da30e[_0x18b3fb(0xa7)]&&_0x2da30e['apiPassword']!=='************'){if(config[_0x18b3fb(0x1eb)]){if(_0x2da30e[_0x18b3fb(0x1a4)]==_0x18b3fb(0x1a5))_0x2da30e[_0x18b3fb(0x1a4)]=config['apiKey'];if(_0x2da30e[_0x18b3fb(0x149)]==_0x18b3fb(0x1a5))_0x2da30e[_0x18b3fb(0x149)]=config[_0x18b3fb(0x149)];if(_0x2da30e[_0x18b3fb(0xa7)]==_0x18b3fb(0x1a5))_0x2da30e['apiPassword']=config[_0x18b3fb(0xa7)];try{await testAPI(_0x2da30e);}catch(_0x114b0c){if(_0x114b0c[_0x18b3fb(0x228)]()[_0x18b3fb(0x20a)](_0x18b3fb(0x135))){logger[_0x18b3fb(0x1a8)](_0x18b3fb(0xa6)),proxyEmit(_0x18b3fb(0x220),![]);return;}else{handleError(_0x114b0c,_0x18b3fb(0x107));return;}}}await initExchange(_0x2da30e[_0x18b3fb(0x1eb)],_0x2da30e[_0x18b3fb(0x1a4)],_0x2da30e['apiSecret'],_0x2da30e[_0x18b3fb(0xa7)]);try{await loadSymbols();}catch(_0x3faa82){if(_0x3faa82['toString']()[_0x18b3fb(0x20a)](_0x18b3fb(0x135))){proxyEmit(_0x18b3fb(0x220),![]);return;}else{handleError(_0x3faa82,_0x18b3fb(0x92));return;}}const _0x13c8d8=await getCoins(![],_0x2da30e['basecoin']);_0x1aa128=cloneDeep(_0x13c8d8[0x1]);}else _0x1aa128=cloneDeep(currentCoinsAll);if(_0x2da30e[_0x18b3fb(0xf7)]=='')proxyEmit('portfolio',_0x1aa128);else{_0x1aa128['forEach'](_0x1532d3=>{const _0x404cf6=_0x18b3fb;if(_0x1532d3['coin']!=_0x2da30e[_0x404cf6(0xf7)])_0x4c2957[_0x404cf6(0x17e)](_0x1532d3[_0x404cf6(0x1ec)]);});if(_0x4c2957[_0x18b3fb(0x1a7)]==0x0)logHistory('error',_0x18b3fb(0xf0));else{try{_0x34bb8b=await exchange[_0x18b3fb(0x1a1)](_0x4c2957);}catch(_0x49a64f){if(_0x49a64f['toString']()['includes'](_0x18b3fb(0x135))){proxyEmit(_0x18b3fb(0x220),![]);return;}else{if(!_0x49a64f[_0x18b3fb(0x228)]()['includes'](_0x18b3fb(0x17d)))handleError(_0x49a64f,_0x18b3fb(0x145));}}_0x1aa128[_0x18b3fb(0xd1)](_0x545ff1=>{const _0x3a7a79=_0x18b3fb;_0x545ff1[_0x3a7a79(0x1f1)]!=_0x2da30e[_0x3a7a79(0xf7)]?_0x34bb8b[_0x545ff1['symbol']]?_0x2368f1=_0x545ff1[_0x3a7a79(0x199)]?0x1/_0x34bb8b[_0x545ff1[_0x3a7a79(0x1ec)]][_0x3a7a79(0xa0)]:_0x34bb8b[_0x545ff1[_0x3a7a79(0x1ec)]][_0x3a7a79(0xa0)]:_0x2368f1=0x0:_0x2368f1=0x1,_0x545ff1['price']=formatResult(_0x2368f1,0x8);}),proxyEmit(_0x18b3fb(0x220),_0x1aa128);}}}function truncateTradeAmount(_0x5e51b8,_0x1f0d17){const _0x485199=_0x16db37;let _0xb3651=0x0;try{_0xb3651=exchange[_0x485199(0x1cf)](_0x5e51b8,_0x1f0d17);}catch(_0x1c552e){}return _0xb3651;}function checkMinimums(_0x548009){const _0x1bfd97=_0x16db37;let _0x2570ff=!![];const _0x5f1389=!_0x548009['reverse']?markets[_0x548009[_0x1bfd97(0x1ec)]]['limits'][_0x1bfd97(0x18f)]['min']:markets[_0x548009['symbol']][_0x1bfd97(0xb6)][_0x1bfd97(0x1c0)]['min'],_0x2884fd=!_0x548009[_0x1bfd97(0x199)]?markets[_0x548009[_0x1bfd97(0x1ec)]][_0x1bfd97(0xb6)][_0x1bfd97(0x1c0)][_0x1bfd97(0xae)]:markets[_0x548009[_0x1bfd97(0x1ec)]]['limits'][_0x1bfd97(0x18f)]['min'],_0x86914=truncateTradeAmount(_0x548009[_0x1bfd97(0x1ec)],_0x548009[_0x1bfd97(0x190)]);_0x548009['trade']=_0x86914;if(Math[_0x1bfd97(0x1b0)](_0x86914)<_0x5f1389)_0x2570ff=![];if(Math[_0x1bfd97(0x1b0)](_0x86914)*_0x548009[_0x1bfd97(0xa0)]<_0x2884fd)_0x2570ff=![];if(_0x548009[_0x1bfd97(0x8f)]=='sell'){let _0x31bc66=config['portfolio'][_0x1bfd97(0xed)](_0x3cbd2e=>_0x3cbd2e[_0x1bfd97(0x1f1)]==_0x548009[_0x1bfd97(0x1f1)]);if(_0x31bc66[_0x1bfd97(0xe0)]>0x0){if(Math[_0x1bfd97(0x1b0)](_0x86914)>_0x548009[_0x1bfd97(0x133)]-_0x31bc66[_0x1bfd97(0xe0)])_0x2570ff=![];}else{if(Math[_0x1bfd97(0x1b0)](_0x86914)>_0x548009[_0x1bfd97(0x133)])_0x2570ff=![];}}if(_0x548009[_0x1bfd97(0x8f)]=='buy'){let _0x25a73c=config[_0x1bfd97(0x220)]['find'](_0x2eef9b=>_0x2eef9b['coin']==config['basecoin']),_0x581720=currentCoins[_0x1bfd97(0xed)](_0x4ef4ce=>_0x4ef4ce[_0x1bfd97(0x1f1)]==config['basecoin']);if(_0x25a73c['offset']>0x0){if(Math[_0x1bfd97(0x1b0)](_0x86914)*_0x548009[_0x1bfd97(0xa0)]>_0x581720[_0x1bfd97(0x133)]-_0x25a73c[_0x1bfd97(0xe0)])_0x2570ff=![];}else{if(Math[_0x1bfd97(0x1b0)](_0x86914)*_0x548009[_0x1bfd97(0xa0)]>_0x581720[_0x1bfd97(0x133)])_0x2570ff=![];}}return _0x2570ff;}async function getBalances(_0x2b5c06=!![]){const _0x3f85ff=_0x16db37;let _0x5b21d6=0x0,_0x376b57;const _0x3b5282=config['threshold'];if(config[_0x3f85ff(0x1a9)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x5159e6=>{const _0x307e5f=_0x3f85ff;if(_0x5159e6[_0x307e5f(0x1f1)]!=config[_0x307e5f(0xf7)]){let _0x364327=global[_0x307e5f(0x170)][noslash(_0x5159e6[_0x307e5f(0x1ec)])];_0x376b57=_0x5159e6[_0x307e5f(0x199)]?0x1/_0x364327:_0x364327;}else _0x376b57=0x1;let _0x39898f=_0x5159e6[_0x307e5f(0x133)]*_0x376b57;_0x5b21d6+=_0x39898f,_0x5159e6[_0x307e5f(0xa0)]=formatResult(Number(_0x376b57),0x8),_0x5159e6[_0x307e5f(0x14d)]=_0x39898f;}),currentCoins[_0x3f85ff(0xd1)](_0x38b0d7=>{const _0x2a44ac=_0x3f85ff;let _0x5d22e0=config['portfolio'][_0x2a44ac(0xed)](_0xacc384=>_0xacc384[_0x2a44ac(0x1f1)]==_0x38b0d7[_0x2a44ac(0x1f1)]),_0x547b38=Number(_0x5d22e0[_0x2a44ac(0x95)]),_0x135aec=_0x38b0d7['value']/_0x5b21d6*0x64,_0x16fc2f=_0x547b38*_0x5b21d6/0x64/_0x38b0d7[_0x2a44ac(0xa0)]-_0x38b0d7[_0x2a44ac(0x133)];_0x38b0d7[_0x2a44ac(0x95)]=formatResult(_0x135aec,0x3),_0x38b0d7[_0x2a44ac(0xe3)]=formatResult(_0x547b38,0x3),_0x38b0d7[_0x2a44ac(0x190)]=formatResult(_0x16fc2f,0x8),_0x38b0d7[_0x2a44ac(0x8f)]='',_0x38b0d7[_0x2a44ac(0x1c3)]=![];if(_0x38b0d7[_0x2a44ac(0x1f1)]!=config[_0x2a44ac(0xf7)]){if(_0x38b0d7['distribution']>_0x547b38)_0x38b0d7[_0x2a44ac(0x8f)]=_0x2a44ac(0x1a0),_0x38b0d7[_0x2a44ac(0x1c3)]=checkMinimums(_0x38b0d7);else _0x38b0d7['distribution']<_0x547b38&&(_0x38b0d7[_0x2a44ac(0x8f)]='buy',_0x38b0d7[_0x2a44ac(0x1c3)]=checkMinimums(_0x38b0d7));}_0x38b0d7[_0x2a44ac(0x15d)]=_0x38b0d7['distribution']/_0x38b0d7[_0x2a44ac(0xe3)]-0x1;if(_0x38b0d7['orderstatus']==_0x2a44ac(0x157)||_0x38b0d7[_0x2a44ac(0x1b1)]=='canceled')_0x38b0d7[_0x2a44ac(0x1b1)]=_0x2a44ac(0x18b);}),currentCoins[_0x3f85ff(0x13b)]((_0x456ee9,_0x38f6bc)=>_0x456ee9[_0x3f85ff(0x15d)]<_0x38f6bc[_0x3f85ff(0x15d)]?0x1:_0x38f6bc['delta']<_0x456ee9['delta']?-0x1:0x0);const _0xef5fb2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xef5fb2[_0x3f85ff(0xff)],'usd':_0xef5fb2[_0x3f85ff(0x1e8)],'portfolio':JSON[_0x3f85ff(0xb7)](currentCoins),'threshold':_0x3b5282},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x2b5c06){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3b5282});else{if(lockOrders==ORDERS[_0x3f85ff(0x120)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3b5282});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x16b5e8=getNormalizedPerformance();getStartingBalances(_0x16b5e8),emitPerformance(_0x16b5e8);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x313c4e=getNormalizedPerformance();emitPerformance(_0x313c4e),getStartingBalances(_0x313c4e),logger[_0x3f85ff(0x1a8)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x210af3=_0x16db37;if(!lastBalances)return;let _0xf3e18e=[],_0x3a1efb,_0x8e070a=JSON['parse'](lastBalances[_0x210af3(0x220)]);_0x8e070a['sort']((_0x2f125f,_0x5a8dc6)=>_0x2f125f[_0x210af3(0x1f1)]>_0x5a8dc6[_0x210af3(0x1f1)]?0x1:_0x5a8dc6[_0x210af3(0x1f1)]>_0x2f125f['coin']?-0x1:0x0),_0x8e070a[_0x210af3(0xd1)](_0x1efbf9=>{const _0x4e2cc8=_0x210af3;let _0x26bc1e={'coin':_0x1efbf9['coin'],'number':_0x1efbf9[_0x4e2cc8(0x133)],'price':_0x1efbf9[_0x4e2cc8(0xa0)]};_0xf3e18e[_0x4e2cc8(0x17e)](_0x26bc1e);});const _0x1d0a5c=await getFiat();_0x3a1efb={'date':lastBalances[_0x210af3(0x114)][_0x210af3(0xb9)]('\x20')[0x0],'eur':_0x1d0a5c[_0x210af3(0xff)],'usd':_0x1d0a5c[_0x210af3(0x1e8)],'coins':_0xf3e18e};let _0x13ce5b=dbPerformance[_0x210af3(0x222)](_0x210af3(0xa5))[_0x210af3(0xed)]({'date':_0x3a1efb[_0x210af3(0x209)]})[_0x210af3(0x14d)]();_0x13ce5b?_0x3a1efb[_0x210af3(0x209)]!=config[_0x210af3(0xe1)]&&dbPerformance[_0x210af3(0x222)]('data')[_0x210af3(0xed)]({'date':_0x3a1efb[_0x210af3(0x209)]})[_0x210af3(0x1dc)](_0x3a1efb)[_0x210af3(0x16a)]():dbPerformance['get'](_0x210af3(0xa5))[_0x210af3(0x17e)](_0x3a1efb)[_0x210af3(0x16a)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2a3492=_0x16db37;let _0x4823ae=[];if(dbPerformance[_0x2a3492(0x196)](_0x2a3492(0xa5))['value']()){let _0x591544=dbPerformance[_0x2a3492(0x222)](_0x2a3492(0xa5))[_0x2a3492(0x11f)]()['filter'](_0xe6d72d=>{const _0x1aac32=_0x2a3492;if(_0xe6d72d[_0x1aac32(0x206)][_0x1aac32(0x1a7)]==0x0)return![];else return!![];})['sortBy'](_0x2a3492(0x209))['value'](),_0x360eb0=[...config[_0x2a3492(0x1ff)]];_0x360eb0[_0x2a3492(0x13b)]((_0x5dfb53,_0x32fcdf)=>_0x5dfb53[_0x2a3492(0x209)]>_0x32fcdf[_0x2a3492(0x209)]?-0x1:_0x32fcdf[_0x2a3492(0x209)]>_0x5dfb53[_0x2a3492(0x209)]?0x1:0x0);let _0x813a71=0x1,_0x1d0f22=[],_0x3246fd=0x0;_0x591544['slice']()[_0x2a3492(0x199)]()[_0x2a3492(0xd1)]((_0x287064,_0x1ea19b)=>{const _0x240b6a=_0x2a3492;if(_0x360eb0[_0x3246fd]){if(_0x591544[_0x591544[_0x240b6a(0x1a7)]-_0x1ea19b]&&_0x360eb0[_0x3246fd][_0x240b6a(0x209)]==_0x591544[_0x591544['length']-_0x1ea19b]['date']){if(_0x1ea19b<_0x591544[_0x240b6a(0x1a7)]){let _0x34d15f=0x0,_0x551fe1=0x0;_0x591544[_0x591544['length']-_0x1ea19b][_0x240b6a(0x206)][_0x240b6a(0xd1)](_0x29f44a=>{const _0xb5d503=_0x240b6a;_0x551fe1+=_0x29f44a[_0xb5d503(0x133)]*_0x29f44a[_0xb5d503(0xef)];}),_0x360eb0[_0x3246fd][_0x240b6a(0xb2)][_0x240b6a(0xd1)](_0x444041=>{_0x34d15f+=_0x444041['number']*_0x444041['price'];}),_0x813a71*=_0x34d15f/(_0x551fe1-_0x34d15f)+0x1;}_0x3246fd++;}}let _0x44c330=0x0;_0x287064[_0x240b6a(0x206)][_0x240b6a(0xd1)](_0x428856=>{const _0x2a4900=_0x240b6a;_0x44c330+=_0x428856[_0x2a4900(0x133)]*_0x428856[_0x2a4900(0xef)];}),_0x1d0f22[_0x591544[_0x240b6a(0x1a7)]-_0x1ea19b-0x1]=_0x44c330*(_0x813a71-0x1);});let _0x4f7036=[];_0x360eb0=[...config[_0x2a3492(0x1ff)]]||[];let _0x6dc5e0=0x0;_0x3246fd=0x0,_0x591544[_0x2a3492(0xd1)]((_0x36c84c,_0x25507c)=>{const _0x2cbc09=_0x2a3492;if(_0x360eb0[_0x3246fd]){const _0x2991ad=fns[_0x2cbc09(0x17b)](_0x360eb0[_0x3246fd][_0x2cbc09(0x209)],'yyyy/MM/dd',new Date()),_0x91fc17=fns[_0x2cbc09(0x17b)](_0x36c84c[_0x2cbc09(0x209)],_0x2cbc09(0x21e),new Date());if(fns[_0x2cbc09(0x1ad)](_0x2991ad,_0x91fc17)){let _0x499452=0x0;_0x360eb0[_0x3246fd]['changes'][_0x2cbc09(0xd1)](_0x5e6e5a=>{const _0x465212=_0x2cbc09;!_0x4f7036[_0x5e6e5a[_0x465212(0x1f1)]]?_0x4f7036[_0x5e6e5a['coin']]=_0x5e6e5a[_0x465212(0x133)]:(_0x499452=_0x4f7036[_0x5e6e5a[_0x465212(0x1f1)]],_0x4f7036[_0x5e6e5a[_0x465212(0x1f1)]]+=_0x5e6e5a[_0x465212(0x133)]);const _0xf25ad=_0x36c84c[_0x465212(0x206)]['find'](_0x4cef47=>_0x4cef47['coin']==_0x5e6e5a['coin']);(!_0xf25ad||_0xf25ad[_0x465212(0x133)]==0x0)&&(_0x6dc5e0+=(-_0x5e6e5a['number']-_0x499452)*_0x5e6e5a['price']);}),_0x3246fd++;}}_0x36c84c[_0x2cbc09(0x206)]['forEach']((_0x4e046e,_0x28119e)=>{const _0x3a2490=_0x2cbc09;_0x4f7036[_0x4e046e[_0x3a2490(0x1f1)]]&&(_0x4e046e[_0x3a2490(0xb8)]=_0x4f7036[_0x4e046e['coin']]);}),_0x4823ae['push']({'date':_0x36c84c[_0x2cbc09(0x209)],'eur':_0x36c84c[_0x2cbc09(0xff)],'usd':_0x36c84c[_0x2cbc09(0x1e8)],'offset':_0x1d0f22[_0x25507c],'netoffset':_0x6dc5e0,'coins':_0x36c84c[_0x2cbc09(0x206)]});});}return _0x4823ae;}function emitPerformance(_0x47e1c8){const _0x4b1414=_0x16db37;_0x47e1c8[_0x4b1414(0x1a7)]!==0x0?(proxyEmit(_0x4b1414(0x20e),_0x47e1c8),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x44a4bf,_0xa2b61a){const _0x6df2a3=_0x16db37;let _0x525e8d=0x0,_0x1c7b04=0x0,_0x4160c6=0x0;_0x44a4bf[_0x6df2a3(0x206)][_0x6df2a3(0xd1)](_0x381b4d=>{const _0x411527=_0x6df2a3;_0x525e8d+=_0x381b4d['number']*_0x381b4d[_0x411527(0xef)];});_0xa2b61a&&(_0x525e8d+=_0x44a4bf['offset']);if(config['basecoin']===_0x6df2a3(0x155)||config['basecoin']===_0x6df2a3(0x20d))_0x1c7b04=_0x525e8d*_0x44a4bf[_0x6df2a3(0xff)],_0x4160c6=_0x525e8d*_0x44a4bf[_0x6df2a3(0x1e8)];else{if(usdBasecoins[_0x6df2a3(0x20a)](config[_0x6df2a3(0xf7)]))_0x1c7b04=_0x525e8d*_0x44a4bf[_0x6df2a3(0xff)]/_0x44a4bf[_0x6df2a3(0x1e8)],_0x4160c6=_0x525e8d;else config[_0x6df2a3(0xf7)]===_0x6df2a3(0x22a)&&(_0x1c7b04=_0x525e8d,_0x4160c6=_0x525e8d*_0x44a4bf[_0x6df2a3(0x1e8)]/_0x44a4bf[_0x6df2a3(0xff)]);}return[_0x525e8d,_0x1c7b04,_0x4160c6];}function getKPIs(_0x19ca5d,_0x238343=_0x16db37(0x22a)){const _0x195bce=_0x16db37,_0x320015=config[_0x195bce(0xf7)],_0x2d47af=lastBalances,_0x588dae=currentCoins,_0x207a6d=getNormalizedPerformance(),_0x3aec6c=_0x19ca5d===_0x195bce(0xf7)?_0x320015:_0x19ca5d===_0x195bce(0x1d5)||_0x19ca5d===_0x195bce(0xbe)?_0x238343:_0x195bce(0xeb)+_0x320015,_0x1c7a5a=_0x19ca5d===_0x195bce(0x16d)?_0x195bce(0x156):_0x19ca5d===_0x195bce(0xbe)?_0x195bce(0x156):_0x3aec6c+_0x195bce(0xf6),_0x41cce8=_0x19ca5d==='net-basecoin'||_0x19ca5d===_0x195bce(0xbe)?_0x195bce(0x156):_0x3aec6c+_0x195bce(0x90);let _0x4802bd=0x0;_0x588dae[_0x195bce(0xd1)](_0x5c78db=>{const _0x24039b=_0x195bce;_0x4802bd+=_0x5c78db[_0x24039b(0x133)]*_0x5c78db[_0x24039b(0xa0)];});if(_0x19ca5d===_0x195bce(0x1d5)||_0x19ca5d===_0x195bce(0xbe)){if(_0x320015===_0x195bce(0x155)||_0x320015===_0x195bce(0x20d))_0x4802bd=_0x4802bd*(_0x238343===_0x195bce(0x22a)?_0x2d47af[_0x195bce(0xff)]:_0x2d47af['usd']);else{if(usdBasecoins[_0x195bce(0x20a)](_0x320015))_0x4802bd=_0x4802bd*(_0x238343===_0x195bce(0x22a)?_0x2d47af[_0x195bce(0xff)]/_0x2d47af[_0x195bce(0x1e8)]:0x1);else _0x320015===_0x195bce(0x22a)&&(_0x4802bd=_0x4802bd*(_0x238343===_0x195bce(0x22a)?0x1:_0x2d47af['usd']/_0x2d47af['eur']));}}let _0x5ddc97;if(_0x4802bd!==0x0){if(_0x19ca5d===_0x195bce(0xf7))_0x5ddc97=(_0x4802bd/startingBalances['basecoin']-0x1)*0x64;else{if(_0x238343===_0x195bce(0x22a))_0x5ddc97=(_0x4802bd/startingBalances[_0x195bce(0xff)]-0x1)*0x64;else _0x5ddc97=(_0x4802bd/startingBalances[_0x195bce(0x1e8)]-0x1)*0x64;}let _0x1a8e38=0x0;if(startingBalances[_0x195bce(0x206)])_0x588dae[_0x195bce(0xd1)](_0x3290f2=>{const _0x1792ac=_0x195bce;let _0xde6daa=startingBalances[_0x1792ac(0x206)][_0x1792ac(0xed)](_0x138ad2=>_0x138ad2[_0x1792ac(0x1f1)]===_0x3290f2['coin']);if(_0xde6daa&&_0xde6daa[_0x1792ac(0x1f1)]&&_0x3290f2[_0x1792ac(0x133)]!==0x0)_0x1a8e38+=_0xde6daa['number']*_0x3290f2[_0x1792ac(0xa0)];});let _0x2b27fe=0x0;if(_0x207a6d['length']!==0x0){let _0x2b0d9f=_0x207a6d[_0x207a6d[_0x195bce(0x1a7)]-0x1];_0x2b27fe=_0x2b0d9f[_0x195bce(0x129)];}_0x1a8e38-=_0x2b27fe;_0x19ca5d===_0x195bce(0x16d)&&(_0x5ddc97=(_0x4802bd-_0x1a8e38)/startingBalances[_0x195bce(0xf7)]*0x64,_0x4802bd=_0x4802bd-_0x1a8e38);if(_0x19ca5d==='net-fiat'){let _0x58c96b=_0x238343===_0x195bce(0x22a)?startingBalances[_0x195bce(0xff)]:startingBalances[_0x195bce(0x1e8)];if(_0x320015===_0x195bce(0x155)||_0x320015===_0x195bce(0x20d))_0x1a8e38=_0x238343===_0x195bce(0x22a)?_0x1a8e38*_0x2d47af[_0x195bce(0xff)]:_0x1a8e38*_0x2d47af['usd'];else{if(usdBasecoins[_0x195bce(0x20a)](_0x320015))_0x1a8e38=_0x238343===_0x195bce(0x22a)?_0x1a8e38*_0x2d47af['eur']/_0x2d47af[_0x195bce(0x1e8)]:_0x1a8e38;else _0x320015===_0x195bce(0x22a)&&(_0x1a8e38=_0x238343==='EUR'?_0x1a8e38:_0x1a8e38*_0x2d47af[_0x195bce(0x1e8)]/_0x2d47af[_0x195bce(0xff)]);}_0x5ddc97=(_0x4802bd-_0x1a8e38)/_0x58c96b*0x64,_0x4802bd=_0x4802bd-_0x1a8e38;}if(_0x5ddc97){if(_0x5ddc97<0x64)_0x5ddc97=_0x5ddc97[_0x195bce(0x109)](0x2);else{if(_0x5ddc97<0x3e8)_0x5ddc97=_0x5ddc97[_0x195bce(0x109)](0x1);else _0x5ddc97=_0x5ddc97[_0x195bce(0x109)](0x0);}}else _0x5ddc97=Number('0')['toFixed'](0x2);if(_0x4802bd){if(Math[_0x195bce(0x1b0)](_0x4802bd)<0.000001)_0x4802bd=_0x4802bd[_0x195bce(0x109)](0x2);else{if(Math[_0x195bce(0x1b0)](_0x4802bd)<0.1)_0x4802bd=_0x4802bd['toFixed'](0x6);else{if(Math[_0x195bce(0x1b0)](_0x4802bd)<0x1)_0x4802bd=_0x4802bd[_0x195bce(0x109)](0x5);else{if(Math[_0x195bce(0x1b0)](_0x4802bd)<0xa)_0x4802bd=_0x4802bd[_0x195bce(0x109)](0x4);else{if(Math[_0x195bce(0x1b0)](_0x4802bd)<0x64)_0x4802bd=_0x4802bd[_0x195bce(0x109)](0x3);else{if(Math[_0x195bce(0x1b0)](_0x4802bd)<0x3e8)_0x4802bd=_0x4802bd[_0x195bce(0x109)](0x2);else _0x4802bd=_0x4802bd['toFixed'](0x2);}}}}}}else _0x4802bd=Number('0')[_0x195bce(0x109)](0x2);}else _0x5ddc97=Number('0')[_0x195bce(0x109)](0x2);return{'value':_0x4802bd,'change':_0x5ddc97,'leftTxt':_0x1c7a5a,'rightTxt':_0x41cce8};}async function getStartingBalances(_0xc520d9,_0x2f2639=!![]){const _0x9a1ce6=_0x16db37;if(_0xc520d9[_0x9a1ce6(0x1a7)]!==0x0){const [_0x38a31a,_0x165fce,_0x1af16c]=getPerf(_0xc520d9[0x0],!![]);let _0x4d6bed=[];config[_0x9a1ce6(0x220)][_0x9a1ce6(0xd1)](_0x2d392e=>{const _0x1495c6=_0x9a1ce6;let _0x58975b=0x0,_0x90077b;config[_0x1495c6(0x1ff)][_0x1495c6(0xd1)](_0x2ed117=>{const _0x51f91b=_0x1495c6;let _0x3b6598=_0x2ed117['changes'][_0x51f91b(0xed)](_0xf9ce7d=>_0xf9ce7d[_0x51f91b(0x1f1)]==_0x2d392e[_0x51f91b(0x1f1)]);if(_0x3b6598){_0x58975b+=_0x3b6598[_0x51f91b(0x133)];if(!_0x90077b)_0x90077b=_0x3b6598[_0x51f91b(0xef)];}}),_0x4d6bed[_0x1495c6(0x17e)]({'coin':_0x2d392e[_0x1495c6(0x1f1)],'number':_0x58975b,'initialprice':_0x90077b});});const _0x17fe81={'basecoin':_0x38a31a,'eur':_0x165fce,'usd':_0x1af16c,'coins':_0x4d6bed};if(_0x2f2639)proxyEmit(_0x9a1ce6(0x1af),_0x17fe81);startingBalances=_0x17fe81;}}function headlessMode(_0x54096e){const _0x1a87c9=_0x16db37;let _0x3edc73=_0x54096e['portfolio'],_0x49eea4=_0x54096e['threshold'],_0x174ccf=[];for(let _0x10a5d2 of _0x3edc73){if(_0x10a5d2[_0x1a87c9(0x1f1)]!=config[_0x1a87c9(0xf7)]){if(_0x10a5d2[_0x1a87c9(0x15d)]>=_0x49eea4/0x64){if(_0x10a5d2[_0x1a87c9(0x1c3)])_0x174ccf[_0x1a87c9(0x17e)](_0x10a5d2);}else{if(_0x10a5d2[_0x1a87c9(0x15d)]<=-_0x49eea4/0x64){if(_0x10a5d2[_0x1a87c9(0x1c3)])_0x174ccf[_0x1a87c9(0x17e)](_0x10a5d2);}}}}_0x174ccf['length']>0x0&&placeOrder(_0x174ccf);}function notifyBalance(_0x5d365f){const _0x295cab=_0x16db37;let _0x324583=_0x5d365f[_0x295cab(0x220)],_0x12f52b=_0x5d365f[_0x295cab(0x18c)],_0x3fdd2b=[];for(let _0x86f42c of _0x324583){if(_0x86f42c[_0x295cab(0x1f1)]!=config[_0x295cab(0xf7)]){if(_0x86f42c[_0x295cab(0x15d)]>=_0x12f52b/0x64){if(_0x86f42c[_0x295cab(0x1c3)])_0x3fdd2b[_0x295cab(0x17e)](_0x86f42c);}else{if(_0x86f42c['delta']<=-_0x12f52b/0x64){if(_0x86f42c[_0x295cab(0x1c3)])_0x3fdd2b['push'](_0x86f42c);}}}}if(_0x3fdd2b[_0x295cab(0x1a7)]>0x0){let _0x435802=_0x3fdd2b[_0x295cab(0x9d)](_0x536256=>_0x536256[_0x295cab(0x1f1)]);_0x435802[_0x295cab(0x13b)]();let _0x4075d2=_0x435802['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x295cab(0x21c),_0x295cab(0xee));lastCoinsToBalance=_0x4075d2;}}function symbolToCoin(_0x52c95f){const _0x4630bd=_0x16db37;let _0x5a09b3;if(_0x52c95f[_0x4630bd(0x20a)]('/'+config[_0x4630bd(0xf7)]))_0x5a09b3=_0x52c95f['replace']('/'+config[_0x4630bd(0xf7)],'');if(_0x52c95f[_0x4630bd(0x20a)](config[_0x4630bd(0xf7)]+'/'))_0x5a09b3=_0x52c95f[_0x4630bd(0x208)](config[_0x4630bd(0xf7)]+'/','');return _0x5a09b3;}async function unlockOrders(){const _0x250353=_0x16db37;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x250353(0x1a8)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x250353(0x9e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x48f872=await getCoins();[currentCoins,currentCoinsAll]=_0x48f872,validateOrdersState=_0x250353(0xb8),persistOpenOrders([]),lockOrders=ORDERS[_0x250353(0x120)],logger[_0x250353(0x1a8)](_0x250353(0x195));}}async function validateOrders(_0x4320c9){const _0x57fe40=_0x16db37;if(_0x4320c9)validateOrdersState=_0x4320c9;logger[_0x57fe40(0x1a8)](_0x57fe40(0x1dd)+validateOrdersState+_0x57fe40(0x8e)+(lockOrders==0x1?_0x57fe40(0xab):lockOrders==0x2?_0x57fe40(0x1df):_0x57fe40(0x15f)));let _0x2061f1=[],_0x3539be=config[_0x57fe40(0x11e)]==_0x57fe40(0x1c9)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x57fe40(0x15b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x57fe40(0x1a8)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x30903e=>{const _0x3e2438=_0x57fe40;let _0x2edf2e=![];_0x30903e[_0x3e2438(0x157)]>0x0&&(_0x2edf2e=!![]),_0x2061f1[_0x3e2438(0x17e)](_0x2edf2e),_0x2edf2e&&config[_0x3e2438(0x11e)]!=_0x3e2438(0x1c9)&&logHistory('order',_0x3e2438(0x97)+_0x30903e[_0x3e2438(0x1ec)]+'\x20'+_0x30903e[_0x3e2438(0x8f)]+'\x20#'+formatResult(_0x30903e['filled'],0x8)+'\x20@'+formatResult(_0x30903e[_0x3e2438(0xef)],0x8));}),_0x2061f1[_0x57fe40(0xd1)]((_0x185eb8,_0x45e652)=>{if(_0x185eb8)lastOrders['splice'](_0x45e652,0x1);}),persistOpenOrders(lastOrders);const _0x7887cf=coolingDown?_0x57fe40(0x10b):_0x57fe40(0xe6);if(validateOrdersState==_0x57fe40(0xb8)){validateOrdersState=_0x57fe40(0x10c);if(_0x2061f1[_0x57fe40(0x20a)](![])){if(config['ordertype']==_0x57fe40(0x1c9)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x57fe40(0x10c)){if(_0x2061f1[_0x57fe40(0x20a)](![])){}else{if(allOrdersPlaced){if(config[_0x57fe40(0x11e)]==_0x57fe40(0x1c9)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x57fe40(0x106))_0x2061f1[_0x57fe40(0x20a)](![])&&(config[_0x57fe40(0x11e)]=='market'?logHistory(_0x57fe40(0x1f9),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x3539be*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x7887cf):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x57fe40(0x1d1)](_0x3539be*validateOrderInterval/0xea60)+_0x57fe40(0x1f5)+_0x7887cf))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x57fe40(0x11e)]!=_0x57fe40(0x1c9))logHistory(_0x57fe40(0x1f9),_0x57fe40(0x160)+_0x7887cf);await unlockOrders();}}}}}async function cancelOrders(){const _0x377ae9=_0x16db37;lastOrders[_0x377ae9(0xd1)](async _0x5be78c=>{const _0xd4019c=_0x377ae9;try{const _0x323e21=await exchange[_0xd4019c(0x12a)](_0x5be78c[_0xd4019c(0xcd)],_0x5be78c[_0xd4019c(0x1ec)]);}catch(_0x4dd4fe){if(_0x4dd4fe[_0xd4019c(0x228)]()[_0xd4019c(0x20a)]('OrderNotFound')){}else await handleError(_0x4dd4fe,_0xd4019c(0x178));}});}async function initCoinResults(_0x5be530){const _0x53ba9f=_0x16db37;_0x5be530?logger[_0x53ba9f(0x1a8)](_0x53ba9f(0x1e7)+_0x5be530):logger['debug'](_0x53ba9f(0x183)),config[_0x53ba9f(0x220)][_0x53ba9f(0xd1)](_0x1b74b9=>{const _0x59a51a=_0x53ba9f;if(!_0x1b74b9[_0x59a51a(0x15a)]&&_0x1b74b9[_0x59a51a(0x1f1)]!=config[_0x59a51a(0xf7)]){const _0x322af3=currentCoins[_0x59a51a(0xed)](_0x365d91=>_0x365d91[_0x59a51a(0x1f1)]==_0x1b74b9[_0x59a51a(0x1f1)]),_0x443ca3=global[_0x59a51a(0x170)][noslash(_0x1b74b9[_0x59a51a(0x1ec)])];let _0xa17895=_0x322af3?_0x322af3[_0x59a51a(0x133)]:null,_0x3feb81=_0x1b74b9[_0x59a51a(0x199)]?0x1/_0x443ca3:_0x443ca3,_0x518486;config[_0x59a51a(0x1ff)]['forEach'](_0x3716a6=>{const _0x2903d4=_0x59a51a;!_0x518486&&(_0x518486=_0x3716a6['changes']['find'](_0x21d195=>_0x21d195['coin']==_0x1b74b9[_0x2903d4(0x1f1)]),_0x518486&&(_0xa17895=_0x518486['number'],_0x3feb81=_0x518486[_0x2903d4(0xef)]));});let _0x272b3d=dbCoinResults[_0x59a51a(0x222)](_0x59a51a(0x206))[_0x59a51a(0xed)]({'coin':_0x1b74b9[_0x59a51a(0x1f1)]})[_0x59a51a(0x14d)]();if(!_0x272b3d){const _0x548166={'coin':_0x1b74b9[_0x59a51a(0x1f1)],'number':_0xa17895,'breakeven':_0x3feb81,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x59a51a(0x222)]('coins')['push'](_0x548166)[_0x59a51a(0x16a)]();}else{if(_0x5be530&&_0x1b74b9[_0x59a51a(0x1f1)]==_0x5be530){const _0x55d0f9={'coin':_0x1b74b9['coin'],'number':_0xa17895,'breakeven':_0x3feb81,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x59a51a(0x222)]('coins')['find']({'coin':_0x1b74b9[_0x59a51a(0x1f1)]})[_0x59a51a(0x1dc)](_0x55d0f9)[_0x59a51a(0x16a)]();}}}});}async function updateCoinResults(_0x31074d,_0x14f910=![]){const _0x42856c=_0x16db37;let _0x160801,_0x20baa9,_0x1a5ccf,_0x571d30,_0x36a943,_0x2ddda6,_0x5060b9=dbCoinResults[_0x42856c(0x222)]('coins')[_0x42856c(0xed)]({'coin':_0x31074d[_0x42856c(0x1f1)]})[_0x42856c(0x14d)](),_0x3154cc=![];_0x5060b9&&Object[_0x42856c(0x130)](_0x5060b9)['forEach'](([_0x20bda6,_0x204556])=>{if(_0x204556==null)_0x3154cc=!![];});(!_0x5060b9||_0x3154cc)&&(await initCoinResults(_0x31074d[_0x42856c(0x1f1)]),_0x5060b9=dbCoinResults[_0x42856c(0x222)]('coins')['find']({'coin':_0x31074d[_0x42856c(0x1f1)]})['value']());_0x31074d['reverse']&&(_0x2ddda6={'filled':_0x31074d[_0x42856c(0x157)]*_0x31074d[_0x42856c(0xef)],'amount':_0x31074d['filled']*_0x31074d[_0x42856c(0xef)],'side':_0x31074d[_0x42856c(0x8f)]==_0x42856c(0x1a0)?_0x42856c(0xc8):'sell','price':0x1/_0x31074d[_0x42856c(0xef)]},_0x31074d={..._0x31074d,..._0x2ddda6});_0x14f910?_0x20baa9=_0x31074d['side']=='buy'?_0x5060b9['number']+_0x31074d[_0x42856c(0x157)]:_0x5060b9[_0x42856c(0x133)]-_0x31074d['filled']:_0x20baa9=await getCoinNumber(_0x31074d['coin']);if(_0x31074d[_0x42856c(0xc2)]&&_0x31074d[_0x42856c(0xc2)]['currency']==config[_0x42856c(0xf7)])_0x160801=_0x31074d[_0x42856c(0xc2)][_0x42856c(0x1c0)];else{if(_0x31074d['fee']&&_0x31074d[_0x42856c(0xc2)][_0x42856c(0x17c)]=='BNB'&&!_0x14f910)_0x160801=_0x31074d[_0x42856c(0xc2)]['cost']*global[_0x42856c(0x170)][_0x42856c(0x212)+config[_0x42856c(0xf7)]];else _0x160801=defaultFee*_0x31074d[_0x42856c(0x157)]*_0x31074d[_0x42856c(0xef)];}_0x31074d[_0x42856c(0x8f)]=='buy'?(_0x1a5ccf=_0x20baa9!=0x0?(_0x5060b9[_0x42856c(0x1b2)]*_0x5060b9[_0x42856c(0x133)]+_0x31074d['price']*(_0x20baa9-_0x5060b9[_0x42856c(0x133)])+_0x160801)/_0x20baa9:0x0,_0x571d30=_0x5060b9[_0x42856c(0x11b)]):(_0x1a5ccf=_0x20baa9!=0x0?(_0x5060b9[_0x42856c(0x1b2)]*_0x5060b9[_0x42856c(0x133)]-_0x31074d[_0x42856c(0xef)]*(_0x5060b9['number']-_0x20baa9)+_0x160801)/_0x20baa9:0x0,_0x571d30=_0x5060b9['realized']+(_0x31074d[_0x42856c(0xef)]-_0x5060b9[_0x42856c(0x1b2)])*_0x31074d[_0x42856c(0x157)]);_0x36a943=(_0x31074d['price']-_0x1a5ccf-_0x160801/_0x31074d[_0x42856c(0x157)])*_0x20baa9;let _0x2bf65c={'coin':_0x31074d[_0x42856c(0x1f1)],'number':_0x20baa9,'breakeven':formatResult(_0x1a5ccf,0x8),'realized':formatResult(_0x571d30,0x8),'unrealized':formatResult(_0x36a943,0x8),'fees':formatResult(_0x5060b9['fees']+_0x160801,0x8),'sells':_0x31074d[_0x42856c(0x8f)]==_0x42856c(0x1a0)?_0x5060b9[_0x42856c(0xdf)]+0x1:_0x5060b9[_0x42856c(0xdf)],'buys':_0x31074d[_0x42856c(0x8f)]==_0x42856c(0xc8)?_0x5060b9['buys']+0x1:_0x5060b9[_0x42856c(0x168)]};dbCoinResults[_0x42856c(0x222)](_0x42856c(0x206))[_0x42856c(0xed)]({'coin':_0x31074d[_0x42856c(0x1f1)]})[_0x42856c(0x1dc)](_0x2bf65c)[_0x42856c(0x16a)]();if(!_0x14f910){if(_0x31074d['fee']&&_0x31074d[_0x42856c(0xc2)][_0x42856c(0x17c)]=='BNB'){const _0x2d8f93=currentCoins[_0x42856c(0xed)](_0x45f815=>_0x45f815['coin']==_0x42856c(0x212));if(_0x2d8f93){let _0x2a905c=dbCoinResults[_0x42856c(0x222)](_0x42856c(0x206))[_0x42856c(0xed)]({'coin':_0x42856c(0x212)})[_0x42856c(0x14d)]();_0x2bf65c={..._0x2a905c,'number':_0x2d8f93[_0x42856c(0x133)]},dbCoinResults[_0x42856c(0x222)](_0x42856c(0x206))[_0x42856c(0xed)]({'coin':'BNB'})[_0x42856c(0x1dc)](_0x2bf65c)[_0x42856c(0x16a)]();}}}}async function placeOrder(_0x3e25a9){const _0x2dfb2d=_0x16db37,_0x5e61ed=config[_0x2dfb2d(0x11e)]==_0x2dfb2d(0x1c9)?_0x2dfb2d(0x1c9):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2dfb2d(0x18d)],allOrdersPlaced=![],validateOrdersState=_0x2dfb2d(0xb8);let _0x580aba=![];lastOrders=[];for(const _0x5a8e62 of _0x3e25a9){let _0x141ead,_0x20857b,_0x2e8201,_0x30e4f8,_0x3a4fc2,_0x188e37=_0x5a8e62[_0x2dfb2d(0x1ec)];try{const _0x49133d=await exchange[_0x2dfb2d(0xc1)](_0x188e37);_0x141ead=_0x5a8e62[_0x2dfb2d(0x199)]?0x1/_0x5a8e62[_0x2dfb2d(0xa0)]:_0x5a8e62[_0x2dfb2d(0xa0)],_0x20857b=_0x49133d['bid'],_0x2e8201=_0x49133d[_0x2dfb2d(0x134)];_0x5a8e62[_0x2dfb2d(0x199)]?(_0x30e4f8=_0x5a8e62['side']==_0x2dfb2d(0xc8)?_0x2dfb2d(0x1a0):_0x2dfb2d(0xc8),_0x3a4fc2=Math['abs'](_0x5a8e62[_0x2dfb2d(0x190)])/_0x141ead):(_0x30e4f8=_0x5a8e62[_0x2dfb2d(0x8f)],_0x3a4fc2=Math[_0x2dfb2d(0x1b0)](_0x5a8e62[_0x2dfb2d(0x190)]));_0x5e61ed==_0x2dfb2d(0xfc)&&(config[_0x2dfb2d(0x11e)]=='limit-high'&&(_0x141ead=_0x30e4f8==_0x2dfb2d(0xc8)?_0x20857b:_0x2e8201),config[_0x2dfb2d(0x11e)]=='limit-low'&&(_0x141ead=_0x30e4f8==_0x2dfb2d(0xc8)?_0x2e8201:_0x20857b));_0x3a4fc2=formatResult(_0x3a4fc2,0x8),_0x141ead=formatResult(_0x141ead,0x8);const _0x28edc8=_0x30e4f8==_0x2dfb2d(0x1a0)?config[_0x2dfb2d(0x176)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x2dfb2d(0xc6)])+'\x20':'',_0x56c15e=_0x5e61ed==_0x2dfb2d(0x1c9)?_0x2dfb2d(0x226):config[_0x2dfb2d(0x11e)]==_0x2dfb2d(0x21d)?_0x2dfb2d(0x151):_0x2dfb2d(0xf9),_0x3dfe9a=(Math['floor'](Math[_0x2dfb2d(0x1b5)]()*0x35a4e900)+0x5f5e100)[_0x2dfb2d(0x228)]();lastOrders['push']({'customId':_0x3dfe9a,'symbol':_0x188e37,'coin':_0x5a8e62[_0x2dfb2d(0x1f1)],'amount':_0x3a4fc2,'price':_0x141ead,'side':_0x30e4f8,'reverse':_0x5a8e62[_0x2dfb2d(0x199)],'filled':0x0});if(_0x5e61ed==_0x2dfb2d(0x1c9))logHistory(_0x2dfb2d(0xe9),''+_0x28edc8+_0x56c15e+_0x2dfb2d(0x1d0)+_0x188e37+'\x20'+_0x30e4f8+'\x20#'+formatResult(_0x3a4fc2,0x8)+'\x20@'+formatResult(_0x141ead,0x8));else logHistory('order',''+_0x28edc8+_0x56c15e+_0x2dfb2d(0x1d0)+_0x188e37+'\x20'+_0x30e4f8+'\x20#'+formatResult(_0x3a4fc2,0x8)+'\x20@'+formatResult(_0x141ead,0x8));let _0x1033ca;_0x5e61ed==_0x2dfb2d(0x1c9)?_0x30e4f8==_0x2dfb2d(0xc8)&&['Bybit','Bitget',_0x2dfb2d(0x210),_0x2dfb2d(0x175),_0x2dfb2d(0xc5)][_0x2dfb2d(0x20a)](config[_0x2dfb2d(0x1eb)])?_0x1033ca=await exchange[_0x2dfb2d(0xb0)](_0x188e37,_0x5e61ed,_0x30e4f8,_0x3a4fc2,_0x141ead):_0x1033ca=await exchange[_0x2dfb2d(0xb0)](_0x188e37,_0x5e61ed,_0x30e4f8,_0x3a4fc2,undefined):_0x1033ca=await exchange[_0x2dfb2d(0xb0)](_0x188e37,_0x5e61ed,_0x30e4f8,_0x3a4fc2,_0x141ead);logger[_0x2dfb2d(0x1a8)](_0x2dfb2d(0x108)+_0x1033ca['id']+'\x20|\x20Custom\x20ID:\x20'+_0x3dfe9a);const _0x2112a5=lastOrders[_0x2dfb2d(0x1a7)]-0x1;if(_0x2112a5>=0x0&&lastOrders[_0x2112a5]['customId']==_0x3dfe9a){lastOrders[_0x2112a5][_0x2dfb2d(0xcd)]=_0x1033ca['id'];if(_0x1033ca[_0x2dfb2d(0x18f)])lastOrders[_0x2112a5][_0x2dfb2d(0x18f)]=_0x1033ca['amount'];if(_0x1033ca[_0x2dfb2d(0xef)])lastOrders[_0x2112a5]['price']=_0x1033ca['price'];lastOrders[_0x2112a5][_0x2dfb2d(0xc2)]=_0x1033ca[_0x2dfb2d(0xc2)];}if(config[_0x2dfb2d(0x221)]!=0x0){let _0x1a8546=null;if(cooldownTracker[_0x2dfb2d(0x1a7)]==config[_0x2dfb2d(0x221)]-0x1)_0x1a8546=cooldownTracker['shift']();const _0x4a58a9=getTimeStamp();cooldownTracker[_0x2dfb2d(0x17e)](_0x4a58a9);if(_0x1a8546){const _0x13fdca=fns['differenceInSeconds'](new Date(_0x4a58a9),new Date(_0x1a8546));if(_0x13fdca<cooldownInterval){logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x20b)+config[_0x2dfb2d(0x221)]+_0x2dfb2d(0x193)+cooldownInterval/0x3c+_0x2dfb2d(0x163)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x191cc1){if(_0x191cc1['toString']()[_0x2dfb2d(0x20a)](_0x2dfb2d(0x16b)))lastOrders=lastOrders['filter'](_0x33fb33=>_0x33fb33['symbol']!=_0x188e37),logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x132)+_0x188e37),_0x580aba=!![];else{if(_0x191cc1[_0x2dfb2d(0x228)]()[_0x2dfb2d(0x20a)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x2dfb2d(0x1e2)](_0x45eddf=>_0x45eddf['symbol']!=_0x188e37),logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x216)+_0x188e37),_0x580aba=!![];else{if(_0x191cc1[_0x2dfb2d(0x228)]()[_0x2dfb2d(0x20a)](_0x2dfb2d(0xc3)))lastOrders=lastOrders[_0x2dfb2d(0x1e2)](_0x1a090c=>_0x1a090c[_0x2dfb2d(0x1ec)]!=_0x188e37),logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x181)+_0x188e37),logger[_0x2dfb2d(0x1a8)](_0x191cc1),_0x580aba=!![];else _0x191cc1[_0x2dfb2d(0x228)]()[_0x2dfb2d(0x20a)](_0x2dfb2d(0xcf))?(lastOrders=lastOrders[_0x2dfb2d(0x1e2)](_0x33c457=>_0x33c457[_0x2dfb2d(0x1ec)]!=_0x188e37),logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x132)+_0x188e37),_0x580aba=!![]):(lastOrders=lastOrders[_0x2dfb2d(0x1e2)](_0x2241c3=>_0x2241c3[_0x2dfb2d(0x1ec)]!=_0x188e37),await handleError(_0x191cc1,_0x2dfb2d(0x12d),_0x188e37));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2dfb2d(0x1a7)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x531625=config['ordertype']==_0x2dfb2d(0x1c9)?validateOrderTimeout*0x3c*0x3e8:config[_0x2dfb2d(0x15b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x531625);}else unlockOrders();_0x580aba&&config[_0x2dfb2d(0x1a9)]&&(logHistory(_0x2dfb2d(0x1b7),'Avoiding\x20continuous\x20order\x20attempts'),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2dfb2d(0x1f9),_0x2dfb2d(0x16f)));}else{if(coolingDown)!config[_0x2dfb2d(0x1a9)]&&logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0x161));else lockOrders!=ORDERS[_0x2dfb2d(0x120)]&&(!config[_0x2dfb2d(0x1a9)]&&(config['ordertype']==_0x2dfb2d(0x1c9)?logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0xbf)):logHistory(_0x2dfb2d(0x1b7),_0x2dfb2d(0xda))));}}function persistOpenOrders(_0x49a172){const _0x7d523f=_0x16db37,_0x407b21={...config,'openOrders':_0x49a172};let _0x38ffeb=dbConfig[_0x7d523f(0x222)](_0x7d523f(0x1f8))[_0x7d523f(0xed)]({'botID':botID})[_0x7d523f(0x14d)]();_0x38ffeb&&dbConfig[_0x7d523f(0x222)]('bot')[_0x7d523f(0xed)]({'botID':botID})[_0x7d523f(0x1dc)](_0x407b21)[_0x7d523f(0x16a)]();}function restoreOrders(){const _0x1fa5f5=_0x16db37;let _0x5caa69;config['openOrders']&&allOpenOrders['forEach'](_0x478a63=>{const _0x403ee3=_0x1ae8,_0xaafce8=config['openOrders'][_0x403ee3(0xed)](_0x3ee5b9=>_0x3ee5b9['orderId']==_0x478a63['id']);_0xaafce8&&(lastOrders[_0x403ee3(0x17e)](_0xaafce8),_0x5caa69=_0x478a63[_0x403ee3(0x1ba)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x1fa5f5(0x18d)],validateOrdersState=_0x1fa5f5(0x10c),allOrdersPlaced=!![];const _0x425b8f=new Date()[_0x1fa5f5(0x219)](),_0x5c57ab=config['ordertype']==_0x1fa5f5(0x1c9)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5caa69+_0x5c57ab>_0x425b8f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5caa69+_0x5c57ab-_0x425b8f);}else validateOrders(_0x1fa5f5(0x106));}}async function sendMetricsTelegram(){const _0x5ebdd3=_0x16db37;if(!coinsLoaded){process[_0x5ebdd3(0x201)]({'telegrammsg':_0x5ebdd3(0x123)},_0x2c5ad8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2d0e14='';if(config[_0x5ebdd3(0x1d2)])_0x2d0e14=_0x5ebdd3(0x101)+config[_0x5ebdd3(0x1ac)]+_0x5ebdd3(0x179);else _0x2d0e14=_0x5ebdd3(0x96)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2b20a9=getKPIs(_0x5ebdd3(0xf7)),_0x2e95a7=getKPIs(_0x5ebdd3(0x1d5),config[_0x5ebdd3(0x1d5)]),_0x2b95ab=getKPIs('net-basecoin'),_0x41ff23=getKPIs(_0x5ebdd3(0xbe),config[_0x5ebdd3(0x1d5)]);_0x2d0e14+=_0x5ebdd3(0x1f4),_0x2d0e14+=_0x2b20a9[_0x5ebdd3(0x1da)]+_0x5ebdd3(0x1bb)+_0x2b20a9[_0x5ebdd3(0x14d)]+'\x0a',_0x2d0e14+=_0x2b20a9[_0x5ebdd3(0x21a)]+':\x20'+_0x2b20a9[_0x5ebdd3(0x1d7)]+'%\x0a',_0x2d0e14+=_0x2e95a7['leftTxt']+_0x5ebdd3(0x1bb)+_0x2e95a7['value']+'\x0a',_0x2d0e14+=_0x2e95a7[_0x5ebdd3(0x21a)]+':\x20'+_0x2e95a7[_0x5ebdd3(0x1d7)]+'%\x0a',_0x2d0e14+=_0x2b95ab['leftTxt']+':\x20'+_0x2b95ab[_0x5ebdd3(0x14d)]+'\x20('+config['basecoin']+')\x0a',_0x2d0e14+=_0x2b95ab[_0x5ebdd3(0x21a)]+':\x20'+_0x2b95ab[_0x5ebdd3(0x1d7)]+'%\x20('+config['basecoin']+')\x0a',_0x2d0e14+=_0x41ff23[_0x5ebdd3(0x1da)]+':\x20'+_0x41ff23[_0x5ebdd3(0x14d)]+'\x20('+config['fiat']+')\x0a',_0x2d0e14+=_0x41ff23[_0x5ebdd3(0x21a)]+':\x20'+_0x41ff23[_0x5ebdd3(0x1d7)]+_0x5ebdd3(0xd7)+config['fiat']+')\x0a',_0x2d0e14+='</pre>',process[_0x5ebdd3(0x201)]({'telegrammsg':_0x2d0e14},_0x2d95c3=>{});}async function sendPortfolioTelegram(){const _0x561f9d=_0x16db37;if(!coinsLoaded){process[_0x561f9d(0x201)]({'telegrammsg':_0x561f9d(0x123)},_0x2516f1=>{});return;}let _0x182514='';if(config[_0x561f9d(0x1d2)])_0x182514=_0x561f9d(0x101)+config[_0x561f9d(0x1ac)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x182514=_0x561f9d(0x96)+botID+_0x561f9d(0x139);_0x182514+=_0x561f9d(0x1f4),_0x182514+=_0x561f9d(0x99),_0x182514+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x182514+=_0x561f9d(0x99),currentCoins[_0x561f9d(0xd1)](_0x442696=>{const _0x4d4900=_0x561f9d;_0x182514+=_0x442696['coin'][_0x4d4900(0x9b)](0x7)+'|\x20'+formatPad(_0x442696[_0x4d4900(0x95)],0x2,0x6)+'|\x20'+formatPad(_0x442696[_0x4d4900(0xe3)],0x2,0x6)+'|\x20'+formatPad(_0x442696[_0x4d4900(0x15d)]*0x64,0x2,0x6)+'\x0a';}),_0x182514+=_0x561f9d(0x1a6),process[_0x561f9d(0x201)]({'telegrammsg':_0x182514},_0xee5ea2=>{});}function formatPad(_0x2a8253,_0x2b375d,_0x32f839){const _0x11bb8e=_0x16db37,_0x16ba2a=formatResultString(_0x2a8253,_0x2b375d);return _0x16ba2a?_0x16ba2a['padStart'](_0x32f839):''[_0x11bb8e(0x1cc)](_0x32f839);}function logHistory(_0x5e1adb,_0x2a2407,_0x5c24d0=''){const _0x5d51f8=_0x16db37;logger['full'](''+_0x2a2407);let _0x5d7954={'time':getTimeStamp(),'type':_0x5e1adb,'event':_0x2a2407};dbLogs[_0x5d51f8(0x222)](_0x5d51f8(0xfa))[_0x5d51f8(0x17e)](_0x5d7954)[_0x5d51f8(0x16a)]();if(_0x5c24d0=='')_0x5c24d0=_0x2a2407;proxyEmit(_0x5d51f8(0x143),{'log':_0x5d7954,'summary':_0x5c24d0}),process[_0x5d51f8(0x201)]({'telegram':{..._0x5d7954,'botname':config[_0x5d51f8(0x1ac)],'showname':config[_0x5d51f8(0x1d2)]}},_0x4ab671=>{});}function emitHistory(_0x43e181={}){const _0x301436=_0x16db37;Object['keys'](_0x43e181)[_0x301436(0x1a7)]==0x0&&(_0x43e181={'type':[_0x301436(0xe9),_0x301436(0x143)],'event':'','page':0x1});if(_0x43e181[_0x301436(0x13d)]['includes']('event'))_0x43e181['type'][_0x301436(0x124)](_0x43e181[_0x301436(0x13d)][_0x301436(0x111)](_0x301436(0x143)),0x1,'error',_0x301436(0x21c),_0x301436(0x1f9));if(dbLogs[_0x301436(0x196)]('logs')[_0x301436(0x14d)]()){let _0x3126bf=dbLogs['get'](_0x301436(0xfa))[_0x301436(0x1e2)](_0x5b0147=>{const _0x3fea16=_0x301436;if(_0x43e181['type'][_0x3fea16(0x1a7)]==0x0)return![];else return _0x43e181[_0x3fea16(0x13d)][_0x3fea16(0x20a)](_0x5b0147[_0x3fea16(0x13d)]);})[_0x301436(0x1e2)](_0x132c75=>{const _0xecf731=_0x301436;if(_0x43e181[_0xecf731(0x143)]=='')return!![];else return _0x132c75[_0xecf731(0x143)][_0xecf731(0x10a)]()[_0xecf731(0x20a)](_0x43e181[_0xecf731(0x143)][_0xecf731(0x10a)]());})['sortBy']('time'),_0x476955=_0x3126bf[_0x301436(0x14d)]()[_0x301436(0x1a7)];_0x3126bf=_0x3126bf[_0x301436(0x199)]()[_0x301436(0x152)]((_0x43e181[_0x301436(0x113)]-0x1)*logPageSize,_0x43e181[_0x301436(0x113)]*logPageSize-0x1)['reverse']()[_0x301436(0x14d)](),proxyEmit('event-history',{'logs':_0x3126bf,'total':_0x476955});}else proxyEmit(_0x301436(0x192),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1b58a2){const _0x575142=_0x16db37;if(dbLogs[_0x575142(0x196)]('logs')[_0x575142(0x14d)]()){const _0x10279b=dbLogs[_0x575142(0x222)]('logs')['sortBy']('time')[_0x575142(0x1e2)](_0x467efa=>{const _0x35292e=_0x575142;return _0x467efa[_0x35292e(0x13d)]==_0x35292e(0xe9);})[_0x575142(0x14d)]();dbLogs[_0x575142(0x222)](_0x575142(0xfa))[_0x575142(0x18e)]()[_0x575142(0x16a)](),dbLogs[_0x575142(0x222)](_0x575142(0xfa))[_0x575142(0x1dc)](_0x10279b)[_0x575142(0x16a)](),emitHistory(_0x1b58a2);}}async function pauseBot(){const _0x8c213c=_0x16db37,_0x2a30fb=new Date()[_0x8c213c(0x219)]();if(!lastErrorShown||_0x2a30fb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2a30fb;!lastBotPause?(lastBotPause=_0x2a30fb,consecutivePauses=0x1):(_0x2a30fb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x8c213c(0x201)]({'stop':_0x8c213c(0xa1)},_0x61462e=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x8c213c(0x219)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory(_0x8c213c(0x1b7),_0x8c213c(0x205)+pauseBotInterval/0xea60+_0x8c213c(0x158)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x2293a4=_0x16db37;botPaused=!![],await sleep(0x3e8),process[_0x2293a4(0x201)]({'stop':_0x2293a4(0x1bf)},_0x45c0d6=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x631dc8,_0x1718e2){const _0x222577=_0x16db37;if(botPaused)return;const _0x11de1a=config[_0x222577(0x1eb)]||_0x222577(0x126);if(_0x1718e2)logger[_0x222577(0x1a8)]('Exception\x20thrown\x20in\x20'+_0x1718e2);if(_0x631dc8['toString']()[_0x222577(0x20a)](_0x222577(0x169)))logHistory(_0x222577(0x1b7),_0x11de1a+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration');else{if(_0x631dc8[_0x222577(0x228)]()['includes'](_0x222577(0x14f)))logHistory('error',_0x11de1a+_0x222577(0x1fa));else _0x631dc8[_0x222577(0x228)]()[_0x222577(0x20a)]('AuthenticationError')?(logHistory(_0x222577(0x1b7),_0x11de1a+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x222577(0x1b7),_0x222577(0xcc))):await handleError(_0x631dc8,null);}}async function handleError(_0x9dfc70,_0x2cd52f,_0x42b3ce=''){const _0x50b7ee=_0x16db37;if(botPaused)return;const _0x57cf1b=config[_0x50b7ee(0x1eb)]||_0x50b7ee(0x126);if(_0x2cd52f)logger[_0x50b7ee(0x1a8)](_0x50b7ee(0x1a2)+_0x2cd52f);if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x1ca))||_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x1b3)))logHistory('error',_0x57cf1b+_0x50b7ee(0x136)),await pauseBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x1ea))||_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)]('OnMaintenance'))logHistory('error',_0x57cf1b+'\x20not\x20available'),await pauseBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x128)))logHistory(_0x50b7ee(0x1b7),_0x57cf1b+_0x50b7ee(0x1f7)),await pauseBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x191)))logHistory('error',_0x57cf1b+'\x20closed\x20the\x20connection'),await pauseBot();else{if(_0x9dfc70['toString']()[_0x50b7ee(0x20a)](_0x50b7ee(0x1ae)))logHistory(_0x50b7ee(0x1b7),_0x50b7ee(0xa3)),logHistory('error',_0x50b7ee(0xaa)),await killBot();else{if(_0x9dfc70['toString']()[_0x50b7ee(0x20a)](_0x50b7ee(0xb3)))logHistory('error',_0x50b7ee(0xd3)),logHistory(_0x50b7ee(0x1b7),_0x50b7ee(0xaa)),await killBot();else{if(_0x9dfc70 instanceof ccxt[_0x50b7ee(0x1b9)])logHistory(_0x50b7ee(0x1b7),_0x57cf1b+_0x50b7ee(0xc0)),logger['debug'](_0x50b7ee(0xdc),_0x9dfc70),await pauseBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x50b7ee(0x1b7),_0x57cf1b+_0x50b7ee(0xdd)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x50b7ee(0x1b7),_0x57cf1b+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x50b7ee(0x1b7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x9dfc70['toString']()['includes']('AuthenticationError'))logHistory('error',_0x57cf1b+_0x50b7ee(0xd6)),logHistory('error',_0x50b7ee(0xaa)),await killBot();else{if(_0x9dfc70[_0x50b7ee(0x228)]()[_0x50b7ee(0x20a)](_0x50b7ee(0x10e)))logHistory(_0x50b7ee(0x1b7),_0x50b7ee(0x164)+_0x42b3ce);else _0x9dfc70 instanceof ccxt[_0x50b7ee(0x14e)]?(logHistory(_0x50b7ee(0x1b7),_0x57cf1b+_0x50b7ee(0x9a)),logger[_0x50b7ee(0x1a8)](_0x50b7ee(0xdc),_0x9dfc70)):(logHistory('error',_0x50b7ee(0x102)),logger[_0x50b7ee(0x1a8)](_0x50b7ee(0xdc),_0x9dfc70),await pauseBot());}}}}}}}}}}}function formatResult(_0x5753b5,_0x4845e2){const _0x589d5a=_0x16db37;return parseFloat(_0x5753b5[_0x589d5a(0x109)](_0x4845e2));}function formatResultTruncate(_0x1d5c1b,_0x31ed0f){const _0x2c00e1=_0x16db37;let _0x1611f9=formatResultString(_0x1d5c1b,0xa),_0x1b303a=_0x1611f9[_0x2c00e1(0x111)]('.');return _0x1b303a!=-0x1&&(_0x1611f9=_0x1611f9[_0x2c00e1(0x152)](0x0,_0x1b303a+_0x31ed0f+0x1)),Number(_0x1611f9);}function formatResultString(_0x399e71,_0x13eba9){const _0x5f2761=_0x16db37;let _0x2a3537;if(!(''+_0x399e71)['includes']('e'))_0x2a3537=+(Math[_0x5f2761(0x1d1)](_0x399e71+'e+'+_0x13eba9)+'e-'+_0x13eba9);else{let _0x42048b=(''+_0x399e71)[_0x5f2761(0xb9)]('e'),_0x1d5e64='';+_0x42048b[0x1]+_0x13eba9>0x0&&(_0x1d5e64='+'),_0x2a3537=+(Math['round'](+_0x42048b[0x0]+'e'+_0x1d5e64+(+_0x42048b[0x1]+_0x13eba9))+'e-'+_0x13eba9);}return Number(_0x2a3537)[_0x5f2761(0x109)](_0x13eba9);}function getServerTime(){const _0x2e29a8=_0x16db37,_0x11ebbc=new Date();return _0x11ebbc[_0x2e29a8(0x91)]()+'/'+(_0x11ebbc[_0x2e29a8(0x211)]()+0x1)[_0x2e29a8(0x228)]()[_0x2e29a8(0x1cc)](0x2,'0')+'/'+_0x11ebbc[_0x2e29a8(0xaf)]()[_0x2e29a8(0x228)]()['padStart'](0x2,'0')+'\x20'+_0x11ebbc[_0x2e29a8(0x1b8)]()['toString']()['padStart'](0x2,'0')+':'+_0x11ebbc[_0x2e29a8(0x177)]()[_0x2e29a8(0x228)]()[_0x2e29a8(0x1cc)](0x2,'0')+':'+_0x11ebbc['getSeconds']()['toString']()[_0x2e29a8(0x1cc)](0x2,'0');}function getTimeStamp(){const _0x2498f2=_0x16db37,_0x68627b=shiftedTime();return _0x68627b[_0x2498f2(0x91)]()+'/'+(_0x68627b[_0x2498f2(0x211)]()+0x1)[_0x2498f2(0x228)]()['padStart'](0x2,'0')+'/'+_0x68627b[_0x2498f2(0xaf)]()[_0x2498f2(0x228)]()[_0x2498f2(0x1cc)](0x2,'0')+'\x20'+_0x68627b['getHours']()[_0x2498f2(0x228)]()['padStart'](0x2,'0')+':'+_0x68627b['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x68627b[_0x2498f2(0x104)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x2b03c8=_0x16db37,_0x2363b7=shiftedTime();return _0x2363b7[_0x2b03c8(0x91)]()+'/'+(_0x2363b7[_0x2b03c8(0x211)]()+0x1)[_0x2b03c8(0x228)]()['padStart'](0x2,'0')+'/'+_0x2363b7[_0x2b03c8(0xaf)]()[_0x2b03c8(0x228)]()['padStart'](0x2,'0');}function getHour(){const _0x4af582=_0x16db37,_0x33252e=shiftedTime();return _0x33252e[_0x4af582(0x1b8)]()[_0x4af582(0x228)]()[_0x4af582(0x1cc)](0x2,'0');}function sleep(_0x194b74){return new Promise(_0x4c461a=>setTimeout(_0x4c461a,_0x194b74));}function shiftedTime(){const _0x33b3ea=_0x16db37,_0xb8c585=new Date();let _0x54971a=_0xb8c585;if(config&&config[_0x33b3ea(0x11a)]!==0x0)_0x54971a=fns[_0x33b3ea(0x16c)](_0xb8c585,{'hours':config[_0x33b3ea(0x11a)]});return _0x54971a;}function timer(_0x330695){const _0x5b8c5e=_0x16db37,_0x3212d5=new Date();!lasttime?console['log'](getTimeStamp()+_0x5b8c5e(0x200),_0x330695,_0x3212d5):console[_0x5b8c5e(0x10d)](getTimeStamp()+_0x5b8c5e(0x200),_0x330695,(_0x3212d5-lasttime)/0x3e8),lasttime=_0x3212d5;}