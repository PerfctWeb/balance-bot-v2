const _0xb1ac74=_0x578f;(function(_0x2236f7,_0x5235a7){const _0x373c26=_0x578f,_0x167e76=_0x2236f7();while(!![]){try{const _0x5ace3a=-parseInt(_0x373c26(0x118))/0x1+parseInt(_0x373c26(0x165))/0x2+parseInt(_0x373c26(0x193))/0x3*(-parseInt(_0x373c26(0x11a))/0x4)+parseInt(_0x373c26(0x167))/0x5*(-parseInt(_0x373c26(0x11e))/0x6)+parseInt(_0x373c26(0x170))/0x7+-parseInt(_0x373c26(0x20c))/0x8*(parseInt(_0x373c26(0x125))/0x9)+parseInt(_0x373c26(0x191))/0xa;if(_0x5ace3a===_0x5235a7)break;else _0x167e76['push'](_0x167e76['shift']());}catch(_0x1726b9){_0x167e76['push'](_0x167e76['shift']());}}}(_0x12ff,0xb9292));const _0x13997b=function(){let _0x1d92f5=!![];return function(_0x4e0e21,_0xef4f74){const _0x473986=_0x1d92f5?function(){if(_0xef4f74){const _0x1ef0d0=_0xef4f74['apply'](_0x4e0e21,arguments);return _0xef4f74=null,_0x1ef0d0;}}:function(){};return _0x1d92f5=![],_0x473986;};}(),_0x2a00d6=_0x13997b(this,function(){const _0x17c555=_0x578f;return _0x2a00d6[_0x17c555(0x16a)]()[_0x17c555(0x196)](_0x17c555(0x137))['toString']()['constructor'](_0x2a00d6)[_0x17c555(0x196)](_0x17c555(0x137));});_0x2a00d6();'use strict';const ccxt=require(_0xb1ac74(0x15a)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xb1ac74(0x180)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require(_0xb1ac74(0x17d))[_0xb1ac74(0x185)];let exchange,wsClient;global[_0xb1ac74(0x1c8)]={},global['change']={};let ws1=[],ws2=null,ws3=[];const exceptions=['DAI/','HOT/BTC',_0xb1ac74(0x1d2),_0xb1ac74(0x1f1),'NANO/',_0xb1ac74(0x141)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0xb1ac74(0x138))[_0xb1ac74(0x136)],botID=process[_0xb1ac74(0x12c)][0x2]||_0xb1ac74(0x13c),pattern=/^[0-9]{3}$/;!pattern[_0xb1ac74(0x17c)](botID)&&(console[_0xb1ac74(0x1ea)](_0xb1ac74(0x10d)+botID+_0xb1ac74(0x159)),process[_0xb1ac74(0x105)](0x1));const userID=process[_0xb1ac74(0x12c)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/';!fs[_0xb1ac74(0x20f)](configpath)&&fs[_0xb1ac74(0x1fa)](configpath);function _0x12ff(){const _0x48aa93=['cost','2717532MMNLve','abs','150HdrVOn','sell','basecoin','toString','assign','length','cloneDeep','closeWs','priceChangePercent','8573635suwLeB','Pausing\x20for\x20','secure','fetchOpenOrders','balancing\x20resumed','\x20minutes\x20-\x20','\x20|\x20Binance\x20API\x20key\x20invalid','min','shift','buys','time','eventTime','test','hybrid-crypto-js','send','reconnected','date-fns','orderStatus','balancing\x20resumes\x20when\x20cooldown\x20ends','datetime','valid','Crypt','fetchClosedOrders','AuthenticationError','MIN_NOTIONAL','************','Recreation\x20completed\x20successfully','/backup/','spot','cumulativeQuoteAssetTransactedQty','replace','ETH','coin','8702020WBpgDZ','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','552579FTJMtQ','recreateCoinResults()','WebSockets(','search','API-key\x20format\x20invalid','Binance\x20not\x20available\x20(1)','commissionAsset','indexOf','parseISO','delta','total','startnumber','decrypt','</pre>','initws()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getHours','Market','botname','RequestTimeout','subscribeSymbol24hrTicker','wsMarket','find','eur','sortBy','botID','-performance.json','\x20has\x20a\x2024h\x20drop\x20of\x20','add','data','isArray','subscribeSpotKline','type','ordertype','outboundAccountPosition','keys','\x20portfolio:\x20\x0a\x0a','breakeven','eventType','last','accumulatedQuantity','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','date','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','function','portfolio','ongoing','getFullYear','isEqual','FILLED','map','apiKey','privateKey','ticker','changes','orderId','sendPortfolioTelegram','coins','toggleBotMode','coin-loading-progress','USDT','Order(s)\x20filled\x20-\x20','slice','HOT/EUR','liquidity','Manual\x20balancing\x20required:\x20','emitHistory','Bot\x20','target','set','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','balances','realized','symbols','subscribeSpotUserDataStream','\x20hour','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','parse','reverse','buy','running','findIndex','error','concat','apiSecret','splice','price','log','amount','currency','offset','event-history','excluded','page','XEM/BUSD','storeConfiguration','usd','bot','headless','startdate','Binance\x20not\x20available\x20(2)','placeOrder','sha256','mkdirSync','initclient','BNB/','writeFile','no\x20open\x20orders','stringify','starting-balances','wss://stream.binance.com:9443','showname','change','fromCodePoint','kline','milliseconds','\x20>\x20','exchange','Limit\x20(high-margin)','wss://stream.binance.us:9443','bb-settings.json','8dJCMtc','EUR','fetchTickers','existsSync','getFiat()','filled','timeout','Binance\x20API\x20secret\x20is\x20invalid','settings','sells','getMinutes','remainingSymbols','kill','initial','differenceInSeconds','getMonth','timestamp','emojibuy','getPortfolio','toFixed','push','final','binance','loadMarkets','configuration','emojisell','placeOrder()','exec','event','trade','message','loadSymbols()','distribution','side','symbol','-results.json','change24h','exit','cancel','DDoSProtection','createOrder','/USDT','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getTime','Error:\x20Invalid\x20argument\x20','threshold','restart','split','toLowerCase','InsufficientFunds','startprice','getStartingBalances','Invalid\x20quantity','\x20order:\x20','get','140982SApNIN','limit-high','8uzTAfF','recreate','yyyy-MM-dd\x27T\x27HH:mm:ss','fetchBalance','158658wpnDdl','\x20|\x20Error\x20details:\x20','market','args','padEnd','executionReport','Unfilled\x20order(s)\x20canceled\x20after\x20','12534273TjRriR','bb-secure.json','Order(s)\x20not\x20validated\x20after\x20','-events.json','string','2.3.5','-config.json','argv','limits','enabled','round','padStart','has','join','entries','Order\x20amount\x20is\x20invalid:\x20',')\x20|\x20Error\x20details:\x20','version','(((.+)+)+)+$','./version.json','progress','commission','success','001','value','includes','number','API\x20or\x20clock\x20sync\x20issue','YOYOW/','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','max','order','Limit\x20(low-margin)','getCoins()','Cooldown\x20ended\x20-\x20balancing\x20resumed','BUSD','sort','defaults','performance','Binance\x20not\x20responding','OrderNotFound','binanceus','close','BNB','forEach','getDate','remove','logs','RSA-OAEP','cancelOrder','No\x20more\x20open\x20orders\x20-\x20','bot-',',\x20must\x20be\x20a\x203\x20digit\x20number','ccxt','yyyy/MM/dd','timeshift','fee','filter','write','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','cooldown','\x20orders\x20in\x20less\x20than\x20','cancelLoading'];_0x12ff=function(){return _0x48aa93;};return _0x12ff();}const configfile=configpath+_0xb1ac74(0x158)+botID+_0xb1ac74(0x12b),logfile=configpath+_0xb1ac74(0x158)+botID+_0xb1ac74(0x128),performancefile=configpath+_0xb1ac74(0x158)+botID+_0xb1ac74(0x1ad),coinresultsfile=configpath+_0xb1ac74(0x158)+botID+_0xb1ac74(0x103),settingsfile=configpath+_0xb1ac74(0x20b),securefile=configpath+_0xb1ac74(0x126),configbackuppath=configpath+_0xb1ac74(0x18b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xb1ac74(0x14a)]({'logs':[]})[_0xb1ac74(0x15f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xb1ac74(0x14a)]({'data':[]})[_0xb1ac74(0x15f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xb1ac74(0x14a)]({'bot':[]})[_0xb1ac74(0x15f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xb1ac74(0x14a)]({'coins':[]})[_0xb1ac74(0x15f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x22596c)=>{},'debug':(..._0x132c6d)=>{},'notice':(..._0x2fe16d)=>{},'info':(..._0x3d1576)=>{},'warning':(..._0x25a9e2)=>{},'error':async function(..._0x1509f6){const _0x1423c9=_0xb1ac74,_0x135942=new Date()[_0x1423c9(0x10c)]();if(!lastErrorShown||_0x135942-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1423c9(0x10c)]();let _0x347e53='';if(_0x1509f6[0x0])_0x347e53+=_0x1509f6[0x0];if(_0x1509f6[0x1]&&_0x1509f6[0x1][_0x1423c9(0x1e5)]&&_0x1509f6[0x1]['error'][_0x1423c9(0x22a)])_0x347e53+='\x20-\x20'+_0x1509f6[0x1][_0x1423c9(0x1e5)][_0x1423c9(0x22a)];logging(_0x1423c9(0x195)+consecutivePauses+_0x1423c9(0x135),''+_0x347e53),await pauseBot(_0x1423c9(0x198));}}},crypt=new Crypt({'md':_0xb1ac74(0x1f9),'rsaStandard':_0xb1ac74(0x155)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings['timeshift']!=config[_0xb1ac74(0x15c)]&&updateTimeshift(settings[_0xb1ac74(0x15c)]);process[_0xb1ac74(0x17e)]({'started':'running'},_0x344d82=>{}),initializeProcessListeners();function proxyEmit(_0x2d64e6,_0x491fe6=null){const _0x29d773=_0xb1ac74;process[_0x29d773(0x17e)]({'function':_0x2d64e6,'args':_0x491fe6},_0x52b797=>{});}function initializeProcessListeners(){const _0x1c432a=_0xb1ac74;process['on'](_0x1c432a(0x22a),_0x4a7eff=>{const _0x2a9724=_0x1c432a;switch(Object['keys'](_0x4a7eff)[0x0]){case'timeshift':_0x4a7eff['timeshift']!=undefined&&(settings[_0x2a9724(0x15c)]=_0x4a7eff[_0x2a9724(0x15c)],updateTimeshift(settings[_0x2a9724(0x15c)]));break;case'function':switch(_0x4a7eff[_0x2a9724(0x1bf)]){case _0x2a9724(0x1fb):initclient();break;case _0x2a9724(0x1cd):toggleBotMode();break;case _0x2a9724(0x1d5):emitHistory(_0x4a7eff['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4a7eff[_0x2a9724(0x121)]);break;case _0x2a9724(0x21e):getPortfolio(_0x4a7eff[_0x2a9724(0x121)]);break;case _0x2a9724(0x1f2):storeConfiguration(_0x4a7eff[_0x2a9724(0x121)]);break;case'storeHeadless':storeHeadless(_0x4a7eff['args']);break;case _0x2a9724(0x114):getStartingBalances(getNormalizedPerformance());break;case _0x2a9724(0x1f8):placeOrder(_0x4a7eff['args']);break;case _0x2a9724(0x163):cancelLoading();break;case _0x2a9724(0x1cb):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xf92619=_0xb1ac74;if(pidBalances)clearTimeout(pidBalances);if(config[_0xf92619(0x1c6)]!=''){await initExchange(config[_0xf92619(0x1c6)],config[_0xf92619(0x1e7)]);let _0x3ede3f=await loadSymbols();if(_0x3ede3f){currentCoins=await getCoins(),await initws();if(allOpenOrders[_0xf92619(0x16c)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x253e5b,_0x202681){const _0x2cc303=_0xb1ac74,_0x47afc6=ccxt[config['exchange']];let _0x1cc3c1;switch(config[_0x2cc303(0x208)]){case _0x2cc303(0x222):_0x1cc3c1=_0x2cc303(0x201);break;case _0x2cc303(0x14e):_0x1cc3c1=_0x2cc303(0x20a);break;default:_0x1cc3c1=_0x2cc303(0x201);}exchange=new _0x47afc6({'apiKey':_0x253e5b,'secret':_0x202681,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x253e5b,'api_secret':_0x202681,'beautify':!![],'wsUrl':_0x1cc3c1},logger);let _0x273cd8=config['exchange']==_0x2cc303(0x14e)?_0x2cc303(0x1cf):_0x2cc303(0x20d),_0x1b5f85=config[_0x2cc303(0x169)]==_0x2cc303(0x18f)?_0x2cc303(0x18f):'BTC';stablecoins={'eur':{'coin':''+_0x1b5f85+_0x273cd8,'symbol':_0x1b5f85+'/'+_0x273cd8},'usd':{'coin':_0x1b5f85+_0x2cc303(0x1cf),'symbol':_0x1b5f85+_0x2cc303(0x109)}};}async function loadSymbols(){const _0x140dda=_0xb1ac74;let _0x2835fa;try{markets=await exchange[_0x140dda(0x223)](),allSymbols=exchange[_0x140dda(0x1dc)][_0x140dda(0x15e)](_0xc89a42=>{const _0x277b66=_0x140dda;let _0x10afcc=![];return exceptions[_0x277b66(0x151)](_0x206287=>{const _0xb3e9ca=_0x277b66;if(_0xc89a42[_0xb3e9ca(0x13e)](_0x206287))_0x10afcc=!![];}),!_0x10afcc;}),_0x2835fa=!![];}catch(_0x164c15){await handleError(_0x164c15,_0x140dda(0x22b)),_0x2835fa=![];}return _0x2835fa;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x380edc=_0xb1ac74;proxyEmit(_0x380edc(0x224),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x10494c=getNormalizedPerformance();emitPerformance(_0x10494c),await getStartingBalances(_0x10494c);}async function toggleBotMode(){const _0x52b7b6=_0xb1ac74;let _0x29827b=dbConfig[_0x52b7b6(0x117)](_0x52b7b6(0x1f4))[_0x52b7b6(0x1a9)]({'botID':botID})['value']();if(_0x29827b){const _0x3777ff=!_0x29827b[_0x52b7b6(0x1f5)];dbConfig['get'](_0x52b7b6(0x1f4))['find']({'botID':botID})[_0x52b7b6(0x16b)]({'headless':_0x3777ff})[_0x52b7b6(0x15f)](),config[_0x52b7b6(0x1f5)]=_0x3777ff,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x37e00a=_0xb1ac74;process[_0x37e00a(0x17e)]({'updatebotmanager':!![]},_0x15ce16=>{});}function cleanws(){const _0x47650a=_0xb1ac74;wsinitialized=![];ws1&&(ws1[_0x47650a(0x151)](_0x51e102=>{const _0x9d2f50=_0x47650a;try{wsClient[_0x9d2f50(0x16e)](_0x51e102);}catch(_0x8ff23b){}}),ws1=[]);if(ws2){try{wsClient[_0x47650a(0x16e)](ws2);}catch(_0x1f4e45){}ws2=null;}ws3&&(ws3['forEach'](_0x1fffb5=>{try{wsClient['closeWs'](_0x1fffb5);}catch(_0x42412b){}}),ws3=[]);}async function initws(){const _0x28072f=_0xb1ac74;cleanws();let _0x2b3e9f=[];currentCoins[_0x28072f(0x151)](_0x4ca25f=>{const _0xd5d710=_0x28072f;if(_0x4ca25f['coin']!=config['basecoin'])_0x2b3e9f[_0xd5d710(0x220)](_0x4ca25f[_0xd5d710(0x22e)]);});if(!_0x2b3e9f[_0x28072f(0x13e)](stablecoins['eur'][_0x28072f(0x22e)]))_0x2b3e9f['push'](stablecoins[_0x28072f(0x1aa)]['symbol']);if(!_0x2b3e9f[_0x28072f(0x13e)](stablecoins[_0x28072f(0x1f3)][_0x28072f(0x22e)]))_0x2b3e9f[_0x28072f(0x220)](stablecoins[_0x28072f(0x1f3)][_0x28072f(0x22e)]);if(!_0x2b3e9f['includes'](_0x28072f(0x1fc)+config['basecoin']))_0x2b3e9f['push']('BNB/'+config['basecoin']);try{_0x2b3e9f[_0x28072f(0x151)]((_0x52db8e,_0x2f7643)=>{const _0x271191=_0x28072f;ws1[_0x2f7643]=wsClient[_0x271191(0x1b2)](noslash(_0x52db8e),'1m'),ws3[_0x2f7643]=wsClient[_0x271191(0x1a7)](noslash(_0x52db8e),_0x271191(0x18c));}),ws2=wsClient[_0x28072f(0x1dd)](),wsClient['on']('formattedMessage',_0x404833=>{const _0x7d3054=_0x28072f;if(isWsFormattedKline(_0x404833)){global[_0x7d3054(0x1c8)][_0x404833[_0x7d3054(0x205)][_0x7d3054(0x22e)]]=_0x404833[_0x7d3054(0x205)][_0x7d3054(0x14f)];return;}else{if(isWsFormatted24hrTicker(_0x404833)){global['change'][_0x404833['symbol']]=_0x404833[_0x7d3054(0x16f)];return;}else{if(!Array[_0x7d3054(0x1b1)](_0x404833)&&_0x404833['wsKey'][_0x7d3054(0x13e)]('userData')){if(_0x404833[_0x7d3054(0x1a8)][_0x7d3054(0x13e)](_0x7d3054(0x18c))){updateNumberCoins(_0x404833);return;}}}}}),wsClient['on'](_0x28072f(0x17f),async _0x2f1975=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x207ab7){await handleError(_0x207ab7,_0x28072f(0x1a1));}let _0x3b5b1c,_0x3dbf58=0x0;loading[_0x28072f(0x217)]=[];let _0x341244=0x0;_0x2b3e9f['forEach'](_0x35c702=>{loading['remainingSymbols']['push'](_0x35c702);}),loadingCanceled=![];while(_0x3b5b1c!=_0x2b3e9f[_0x28072f(0x16c)]){_0x3b5b1c=0x0,_0x2b3e9f[_0x28072f(0x151)](_0x3a6a7d=>{const _0x5b1934=_0x28072f;global[_0x5b1934(0x1c8)][noslash(_0x3a6a7d)]&&(loading[_0x5b1934(0x217)]=loading[_0x5b1934(0x217)][_0x5b1934(0x15e)](_0x4a1de0=>_0x4a1de0!=_0x3a6a7d),_0x3b5b1c++);}),loading[_0x28072f(0x139)]=Math[_0x28072f(0x12f)](_0x3b5b1c/_0x2b3e9f[_0x28072f(0x16c)]*0x64);_0x341244>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x28072f(0x106)]=!![],emitLoadingProgress();break;}else _0x3b5b1c!=_0x3dbf58&&(_0x3dbf58=_0x3b5b1c,emitLoadingProgress()),_0x341244++,await sleep(0xc8);}if(_0x3b5b1c==_0x2b3e9f[_0x28072f(0x16c)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x2e8328=_0xb1ac74;proxyEmit(_0x2e8328(0x1ce),loading);}async function getFiat(){const _0x12143a=_0xb1ac74;let _0x3459f3=0x0,_0x265164=0x0;try{_0x3459f3=global['ticker'][stablecoins[_0x12143a(0x1aa)][_0x12143a(0x190)]],_0x265164=global[_0x12143a(0x1c8)][stablecoins['usd']['coin']];}catch(_0x5e434c){await handleError(_0x5e434c,_0x12143a(0x210));}return{'eur':Number(_0x3459f3),'usd':Number(_0x265164)};}function setStartDatePerformance(){const _0x10884b=_0xb1ac74;if(config&&config[_0x10884b(0x1d3)][0x0][_0x10884b(0x1c9)]['length']!=0x0){const _0x5db4cc=config[_0x10884b(0x1d3)][0x0][_0x10884b(0x1c9)];dbPerformance[_0x10884b(0x117)](_0x10884b(0x1b0))[_0x10884b(0x1a9)]({'date':config[_0x10884b(0x1f6)]})['assign']({'coins':_0x5db4cc})[_0x10884b(0x15f)]();}}async function recreateCoinResults(){const _0xf06436=_0xb1ac74;let _0x5b27e5;logHistory(_0xf06436(0x13b),'Coin\x20results\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20a\x20minute');let _0x14b177=[];try{const _0x278e7e=fns['format'](fns[_0xf06436(0x19b)](config[_0xf06436(0x1f6)][_0xf06436(0x18e)](/\//g,'-')),_0xf06436(0x11c));for(const _0xf51d13 of currentCoins){if(_0xf51d13['coin']!=config['basecoin']){let _0x4f66b2=0x0,_0x54767c=0x0;_0x5b27e5=await getAllEventOrders(_0xf51d13['symbol']);if(_0x5b27e5[_0xf06436(0x16c)]>0x0)_0x5b27e5[_0xf06436(0x151)](_0x369eba=>{const _0x9c8581=_0xf06436,_0x5ce305=_0xf51d13[_0x9c8581(0x22e)][_0x9c8581(0x13e)](config[_0x9c8581(0x169)]+'/');_0x14b177[_0x9c8581(0x220)]({'datetime':_0x369eba[_0x9c8581(0x183)],'coin':_0xf51d13['coin'],'symbol':_0xf51d13['symbol'],'side':_0x369eba['side'],'reverse':_0x5ce305,'amount':formatResult(_0x369eba['filled'],0x8),'filled':formatResult(_0x369eba['filled'],0x8),'price':formatResult(_0x369eba[_0x9c8581(0x1e9)],0x8)}),_0x4f66b2=_0x369eba[_0x9c8581(0x22d)]=='buy'?_0x4f66b2+_0x369eba[_0x9c8581(0x211)]:_0x4f66b2-_0x369eba[_0x9c8581(0x211)];if(!_0x54767c)_0x54767c=_0x369eba[_0x9c8581(0x1e9)];});let _0x123fde=dbCoinResults[_0xf06436(0x117)](_0xf06436(0x1cc))[_0xf06436(0x1a9)]({'coin':_0xf51d13[_0xf06436(0x190)]})[_0xf06436(0x13d)]();_0x123fde={'coin':_0xf51d13[_0xf06436(0x190)],'number':_0xf51d13[_0xf06436(0x13f)]-_0x4f66b2,'breakeven':_0x54767c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0xf06436(0x1cc))[_0xf06436(0x1a9)]({'coin':_0xf51d13[_0xf06436(0x190)]})[_0xf06436(0x16b)](_0x123fde)['write']();}}_0x14b177[_0xf06436(0x149)]((_0xb9f11d,_0x122550)=>_0xb9f11d[_0xf06436(0x183)]>_0x122550[_0xf06436(0x183)]?0x1:_0x122550['datetime']>_0xb9f11d['datetime']?-0x1:0x0);let _0x345c01=0x0;for(let _0x1e77f0 of _0x14b177){console['log'](_0x345c01++,_0x1e77f0[_0xf06436(0x183)],_0x1e77f0[_0xf06436(0x190)],_0x1e77f0[_0xf06436(0x22d)],_0x1e77f0['reverse'],_0x1e77f0['amount'],_0x1e77f0[_0xf06436(0x1e9)]),await updateCoinResults(_0x1e77f0,!![]);}logHistory(_0xf06436(0x13b),_0xf06436(0x18a));}catch(_0x1b14c4){await handleError(_0x1b14c4,_0xf06436(0x194));}}async function getAllEventOrders(_0x30a768){const _0x56160d=_0xb1ac74;let _0x43fd84=[],_0x58dde0=dbLogs['get']('logs')[_0x56160d(0x15e)](_0x49cb2a=>{const _0x2072d8=_0x56160d,_0x42870b=_0x49cb2a[_0x2072d8(0x228)]['toLowerCase']();return _0x42870b[_0x2072d8(0x13e)](_0x30a768[_0x2072d8(0x111)]())&&(_0x42870b[_0x2072d8(0x13e)](_0x2072d8(0x120))&&_0x42870b[_0x2072d8(0x13e)](_0x2072d8(0x144))||_0x42870b['includes']('filled')&&_0x42870b[_0x2072d8(0x13e)]('order'));})[_0x56160d(0x1ab)]('time')[_0x56160d(0x13d)]();return _0x58dde0[_0x56160d(0x151)](_0x50f95c=>{const _0x546275=_0x56160d,_0x3d1162=_0x50f95c['event'][_0x546275(0x13e)](_0x546275(0x168))?_0x546275(0x168):_0x546275(0x1e2),_0x385447=/#([0-9]|\.)+\s/i,_0x384b9f=Number(_0x385447[_0x546275(0x227)](_0x50f95c['event'])[0x0]['slice'](0x1)),_0x3560c6=/@([0-9]|\.)+$/i,_0x4ade9c=Number(_0x3560c6[_0x546275(0x227)](_0x50f95c[_0x546275(0x228)])[0x0]['slice'](0x1));_0x43fd84['push']({'datetime':_0x50f95c[_0x546275(0x17a)],'coin':symbolToCoin(_0x30a768),'symbol':_0x30a768,'side':_0x3d1162,'amount':_0x384b9f,'filled':_0x384b9f,'price':_0x4ade9c});}),_0x43fd84;}async function getAllOrders(_0x3ff0cc,_0x5e7a4f){const _0x20698b=_0xb1ac74;let _0x3f4b46=[];while(_0x5e7a4f<exchange[_0x20698b(0x206)]()){const _0x503a13=0x1f4,_0x464cbb=await exchange[_0x20698b(0x186)](_0x3ff0cc,_0x5e7a4f,_0x503a13);if(_0x464cbb[_0x20698b(0x16c)])_0x5e7a4f=_0x464cbb[_0x464cbb[_0x20698b(0x16c)]-0x1][_0x20698b(0x21c)]+0x1,_0x3f4b46=_0x3f4b46[_0x20698b(0x1e6)](_0x464cbb);else break;}return _0x3f4b46;}async function validate24hChanges(){const _0x3edd2a=_0xb1ac74;let _0x5b7b57;for(const _0x27e8a2 of currentCoins){if(_0x27e8a2['coin']!=config['basecoin']){let _0x12e821;_0x27e8a2[_0x3edd2a(0x1e1)]?_0x12e821=formatResult((0x1/(global[_0x3edd2a(0x203)][noslash(_0x27e8a2[_0x3edd2a(0x22e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x12e821=global['change'][noslash(_0x27e8a2[_0x3edd2a(0x22e)])],_0x12e821<config[_0x3edd2a(0x104)]&&(logHistory(_0x3edd2a(0x1e5),_0x27e8a2[_0x3edd2a(0x190)]+_0x3edd2a(0x1ae)+_0x12e821+'%'),logHistory(_0x3edd2a(0x1e5),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x3edd2a(0x1e5),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x4bcf2a=_0xb1ac74;let _0xbb83d6=dbLogs[_0x4bcf2a(0x117)](_0x4bcf2a(0x136))[_0x4bcf2a(0x13d)]();if(_0xbb83d6!=_0x4bcf2a(0x12a)){dbLogs['set'](_0x4bcf2a(0x136),_0x4bcf2a(0x12a))[_0x4bcf2a(0x15f)]();let _0x20454b=[];const _0x3b983d=dbLogs['get'](_0x4bcf2a(0x154))[_0x4bcf2a(0x13d)]();_0x3b983d[_0x4bcf2a(0x151)](_0x390b24=>{const _0x42d80a=_0x4bcf2a;_0x20454b[_0x42d80a(0x220)]({'time':_0x390b24['time'],'type':_0x390b24[_0x42d80a(0x1b3)],'event':_0x390b24[_0x42d80a(0x228)]});}),dbLogs[_0x4bcf2a(0x117)]('logs')[_0x4bcf2a(0x16b)](_0x20454b)[_0x4bcf2a(0x15f)]();}let _0x54ae80=dbConfig[_0x4bcf2a(0x117)](_0x4bcf2a(0x136))['value']();if(_0x54ae80!='2.3.5'){dbConfig['set'](_0x4bcf2a(0x136),_0x4bcf2a(0x12a))[_0x4bcf2a(0x15f)]();let _0x2e5863=dbConfig[_0x4bcf2a(0x117)](_0x4bcf2a(0x1f4))[_0x4bcf2a(0x1a9)]({'botID':botID})['value']();if(_0x2e5863){let _0x129ec7=[];_0x2e5863[_0x4bcf2a(0x1c0)][_0x4bcf2a(0x151)](_0x74033=>{const _0x3afadc=_0x4bcf2a;_0x129ec7[_0x3afadc(0x220)]({'coin':_0x74033[_0x3afadc(0x190)],'number':_0x74033['startnumber'],'price':_0x74033['startprice']}),delete _0x74033[_0x3afadc(0x19e)],delete _0x74033[_0x3afadc(0x113)];});if(_0x129ec7[_0x4bcf2a(0x16c)]!==0x0)fs[_0x4bcf2a(0x1fd)](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x4bcf2a(0x1ff)](_0x129ec7,null,0x4),function(_0x568d1e){if(_0x568d1e){}});const _0x38cabe=(_0x2ce83a,_0x1f52fa)=>{const _0x1ace3b=_0x4bcf2a;let _0x3fde45=[];_0x1f52fa[_0x1ace3b(0x151)](_0x9d2995=>{const _0x849951=_0x1ace3b,_0x4ce01a=_0x2ce83a[_0x849951(0x1a9)](_0x14f526=>_0x14f526[_0x849951(0x190)]==_0x9d2995[_0x849951(0x190)]);if(!_0x4ce01a)_0x3fde45['push'](_0x9d2995);});let _0x59a4f9=[];return _0x2ce83a['forEach'](_0x105127=>{const _0x199c7=_0x1ace3b,_0x527d6c=_0x1f52fa['find'](_0x36619a=>_0x36619a['coin']==_0x105127[_0x199c7(0x190)]);if(!_0x527d6c||_0x527d6c[_0x199c7(0x13f)]==0x0&&_0x105127[_0x199c7(0x13f)]!=0x0)_0x59a4f9[_0x199c7(0x220)](_0x105127);}),{'missingDay1':_0x3fde45,'notInDay2':_0x59a4f9};},_0x5ac87e=dbPerformance['get'](_0x4bcf2a(0x1b0))[_0x4bcf2a(0x16d)]()[_0x4bcf2a(0x13d)]();if(_0x5ac87e['length']>0x1){const {missingDay1:_0x15f935,notInDay2:_0x4c3625}=_0x38cabe(_0x129ec7,_0x5ac87e[0x1]['coins']);_0x129ec7=[..._0x129ec7,..._0x15f935],_0x4c3625[_0x4bcf2a(0x151)](_0x2e2735=>{const _0x262bd6=_0x4bcf2a;let _0x567836=_0x129ec7[_0x262bd6(0x1e4)](_0x2e1fdd=>_0x2e1fdd[_0x262bd6(0x190)]==_0x2e2735[_0x262bd6(0x190)]);_0x567836!=-0x1&&_0x129ec7[_0x262bd6(0x1e8)](_0x567836,0x1);});}_0x129ec7[_0x4bcf2a(0x149)]((_0x43694a,_0x400a16)=>_0x43694a[_0x4bcf2a(0x190)]>_0x400a16[_0x4bcf2a(0x190)]?0x1:_0x400a16[_0x4bcf2a(0x190)]>_0x43694a[_0x4bcf2a(0x190)]?-0x1:0x0);let _0x47bec1=[{'date':_0x2e5863['startdate'],'changes':_0x129ec7}];_0x5ac87e[_0x4bcf2a(0x16c)]>0x2&&_0x5ac87e[_0x4bcf2a(0x151)]((_0x1e79a8,_0x174feb)=>{const _0x1a65d3=_0x4bcf2a;if(_0x174feb>0x0&&_0x174feb<_0x5ac87e[_0x1a65d3(0x16c)]-0x1){const {missingDay1:_0x450d77,notInDay2:_0x5367dd}=_0x38cabe(_0x5ac87e[_0x174feb][_0x1a65d3(0x1cc)],_0x5ac87e[_0x174feb+0x1]['coins']);_0x129ec7=[],(_0x450d77[_0x1a65d3(0x16c)]!=0x0||_0x5367dd[_0x1a65d3(0x16c)]!=0x0)&&(_0x450d77['length']!=0x0&&_0x129ec7[_0x1a65d3(0x220)](..._0x450d77),_0x5367dd[_0x1a65d3(0x16c)]!=0x0&&(_0x5367dd[_0x1a65d3(0x151)](_0x24c9ae=>{const _0x55b45f=_0x1a65d3;_0x24c9ae[_0x55b45f(0x13f)]=-_0x24c9ae[_0x55b45f(0x13f)];}),_0x129ec7['push'](..._0x5367dd)),_0x129ec7['sort']((_0x2341fe,_0x246458)=>_0x2341fe[_0x1a65d3(0x190)]>_0x246458[_0x1a65d3(0x190)]?0x1:_0x246458[_0x1a65d3(0x190)]>_0x2341fe[_0x1a65d3(0x190)]?-0x1:0x0),_0x47bec1[_0x1a65d3(0x220)]({'date':_0x5ac87e[_0x174feb+0x1][_0x1a65d3(0x1bd)],'changes':_0x129ec7}));}}),dbConfig[_0x4bcf2a(0x117)](_0x4bcf2a(0x1f4))[_0x4bcf2a(0x1a9)]({'botID':botID})['assign']({..._0x2e5863,'liquidity':_0x47bec1})['write']();}}config=getConfiguration(botID);let _0x778f0d=dbPerformance[_0x4bcf2a(0x117)](_0x4bcf2a(0x136))[_0x4bcf2a(0x13d)]();_0x778f0d!='2.3.5'&&(dbPerformance[_0x4bcf2a(0x1d8)](_0x4bcf2a(0x136),_0x4bcf2a(0x12a))['write'](),setStartDatePerformance());let _0x3c88e2=dbCoinResults[_0x4bcf2a(0x117)](_0x4bcf2a(0x136))['value']();}function getConfiguration(_0x22c842){const _0x5a246c=_0xb1ac74;let _0x1672f8=dbConfig[_0x5a246c(0x117)](_0x5a246c(0x1f4))['find']({'botID':_0x22c842})['value']();if(_0x1672f8){let _0x106880=![];typeof _0x1672f8[_0x5a246c(0x10e)]==_0x5a246c(0x129)&&(_0x1672f8={..._0x1672f8,'threshold':Number(_0x1672f8['threshold'])},_0x106880=!![]),_0x1672f8['change24h']==null&&(_0x1672f8={..._0x1672f8,'change24h':-0x14},_0x106880=!![]),_0x106880&&(_0x1672f8={'botID':_0x1672f8[_0x5a246c(0x1ac)],'exchange':_0x1672f8[_0x5a246c(0x208)],'apiKey':_0x1672f8[_0x5a246c(0x1c6)],'apiSecret':_0x1672f8['apiSecret'],'basecoin':_0x1672f8[_0x5a246c(0x169)],'botname':_0x1672f8['botname'],'showname':_0x1672f8[_0x5a246c(0x202)],'threshold':_0x1672f8[_0x5a246c(0x10e)],'ordertype':_0x1672f8[_0x5a246c(0x1b4)],'timeout':_0x1672f8[_0x5a246c(0x212)],'startdate':_0x1672f8[_0x5a246c(0x1f6)],'recreate':_0x1672f8[_0x5a246c(0x11b)],'timeshift':_0x1672f8['timeshift'],'headless':_0x1672f8[_0x5a246c(0x1f5)],'cooldown':_0x1672f8['cooldown'],'change24h':_0x1672f8['change24h'],'emojibuy':_0x1672f8[_0x5a246c(0x21d)],'emojisell':_0x1672f8[_0x5a246c(0x225)],'portfolio':_0x1672f8[_0x5a246c(0x1c0)],'liquidity':_0x1672f8[_0x5a246c(0x1d3)]},dbConfig['get'](_0x5a246c(0x1f4))['remove']()[_0x5a246c(0x15f)](),dbConfig['get'](_0x5a246c(0x1f4))[_0x5a246c(0x220)](_0x1672f8)[_0x5a246c(0x15f)]());}else _0x1672f8={'botID':_0x22c842,'exchange':_0x5a246c(0x222),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x22c842,'showname':![],'threshold':0x3,'ordertype':_0x5a246c(0x120),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x1672f8;}function emittedConfiguration(){const _0x5c31f7=_0xb1ac74;let _0x4e5307;return config[_0x5c31f7(0x1c6)]==''?_0x4e5307=config:_0x4e5307={...config,'apiKey':'************','apiSecret':_0x5c31f7(0x189)},_0x4e5307;}function getSettings(){const _0x1cbecb=_0xb1ac74;return dbSettings[_0x1cbecb(0x117)](_0x1cbecb(0x214))['value']();}function getSecure(){const _0x262169=_0xb1ac74;return dbSecure['get'](_0x262169(0x172))[_0x262169(0x13d)]()||{};}function updateTimeshift(_0x39f30b){const _0x397b25=_0xb1ac74;let _0x3f92fb=dbConfig['get'](_0x397b25(0x1f4))[_0x397b25(0x1a9)]({'botID':botID})[_0x397b25(0x13d)]();_0x3f92fb&&dbConfig[_0x397b25(0x117)](_0x397b25(0x1f4))[_0x397b25(0x1a9)]({'botID':botID})[_0x397b25(0x16b)]({'timeshift':_0x39f30b})[_0x397b25(0x15f)](),config[_0x397b25(0x15c)]=_0x39f30b,proxyEmit(_0x397b25(0x224),emittedConfiguration());}async function storeConfiguration(_0x5077a7){const _0x4c8263=_0xb1ac74;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3a5758=dbConfig[_0x4c8263(0x117)](_0x4c8263(0x1f4))['find']({'botID':botID})['value']();_0x5077a7={..._0x5077a7,'apiKey':crypt[_0x4c8263(0x19f)](secure[_0x4c8263(0x1c7)],_0x5077a7[_0x4c8263(0x1c6)])[_0x4c8263(0x22a)],'apiSecret':crypt[_0x4c8263(0x19f)](secure[_0x4c8263(0x1c7)],_0x5077a7[_0x4c8263(0x1e7)])[_0x4c8263(0x22a)]};if(_0x3a5758){if(_0x5077a7[_0x4c8263(0x1c6)]=='************')_0x5077a7['apiKey']=config[_0x4c8263(0x1c6)];if(_0x5077a7[_0x4c8263(0x1e7)]==_0x4c8263(0x189))_0x5077a7[_0x4c8263(0x1e7)]=config[_0x4c8263(0x1e7)];dbConfig[_0x4c8263(0x117)](_0x4c8263(0x1f4))[_0x4c8263(0x1a9)]({'botID':botID})[_0x4c8263(0x16b)](_0x5077a7)[_0x4c8263(0x15f)]();}else dbConfig[_0x4c8263(0x117)]('bot')['push'](_0x5077a7)[_0x4c8263(0x15f)](),process[_0x4c8263(0x17e)]({'status':_0x4c8263(0x12e),'live':_0x4c8263(0x1e3)},_0xee4d30=>{});config={..._0x5077a7},setStartDatePerformance(),process[_0x4c8263(0x17e)]({'botname':_0x5077a7[_0x4c8263(0x1a5)]},_0x235d66=>{}),updateBotManager();const _0x10d4ee=getNormalizedPerformance();getStartingBalances(_0x10d4ee),emitPerformance(_0x10d4ee),proxyEmit('configuration-stored'),await initCoinResults(),reset();}async function storeHeadless(_0x397657){const _0x1910c1=_0xb1ac74,_0x13054d={...config,'headless':_0x397657[_0x1910c1(0x1f5)]};let _0x150523=dbConfig[_0x1910c1(0x117)]('bot')[_0x1910c1(0x1a9)]({'botID':botID})['value']();_0x150523&&dbConfig[_0x1910c1(0x117)](_0x1910c1(0x1f4))[_0x1910c1(0x1a9)]({'botID':botID})['assign'](_0x13054d)[_0x1910c1(0x15f)](),config={..._0x13054d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x34238e){return _0x34238e['replace']('/','');}function _0x578f(_0x2526eb,_0x5d684e){const _0x4a2c09=_0x12ff();return _0x578f=function(_0x2a00d6,_0x13997b){_0x2a00d6=_0x2a00d6-0x103;let _0x12ff5a=_0x4a2c09[_0x2a00d6];return _0x12ff5a;},_0x578f(_0x2526eb,_0x5d684e);}async function updateNumberCoins(_0x34521e){const _0x54baa7=_0xb1ac74;_0x34521e[_0x54baa7(0x1b9)]&&_0x34521e['eventType']==_0x54baa7(0x1b5)&&(_0x34521e[_0x54baa7(0x17b)]!=lastOutboundEventTime&&(lastOutboundEventTime=_0x34521e['eventTime'],currentCoins=await getCoins(),validateOrders()));if(_0x34521e[_0x54baa7(0x1b9)]&&_0x34521e[_0x54baa7(0x1b9)]==_0x54baa7(0x123)){if(_0x34521e[_0x54baa7(0x181)]==_0x54baa7(0x1c4)){if(lastOrders)lastOrders[_0x54baa7(0x151)](async _0x4b9207=>{const _0x4d5f0e=_0x54baa7;_0x4b9207['orderId']==_0x34521e[_0x4d5f0e(0x1ca)]&&_0x4b9207['filled']==0x0&&(_0x4b9207[_0x4d5f0e(0x1e9)]=_0x34521e[_0x4d5f0e(0x18d)]/_0x34521e[_0x4d5f0e(0x1bb)],_0x4b9207['filled']=_0x34521e[_0x4d5f0e(0x1bb)],_0x4b9207[_0x4d5f0e(0x15d)]={'cost':_0x34521e[_0x4d5f0e(0x13a)],'currency':_0x34521e[_0x4d5f0e(0x199)]},validateOrders(),await updateCoinResults(_0x4b9207),currentCoins=await getCoins());});}}}async function getCoins(_0x1dfa11=!![],_0x35b3aa=config['basecoin']){const _0x2977cb=_0xb1ac74;let _0x5c285c,_0x2eb3ea=[],_0xa4dc14=[],_0x56ddf7=[];try{_0x5c285c=await exchange[_0x2977cb(0x11d)](),mybalances=_0x5c285c[_0x2977cb(0x19d)];if(!_0x1dfa11)for(const [_0x2d201d,_0x367387]of Object[_0x2977cb(0x133)](mybalances)){_0x56ddf7[_0x2977cb(0x220)](_0x2d201d);}else config['portfolio']['forEach'](_0x483ae8=>{const _0x48849f=_0x2977cb;if(!_0x483ae8['excluded'])_0x56ddf7[_0x48849f(0x220)](_0x483ae8[_0x48849f(0x190)]);});if(_0x35b3aa=='')for(const [_0x2baf99,_0x971e3a]of Object[_0x2977cb(0x133)](mybalances)){_0x971e3a[_0x2977cb(0x16a)]()!=0x0&&_0xa4dc14[_0x2977cb(0x220)]({'coin':_0x2baf99});}else{let _0x46da8f=![],_0xed65a9;allOpenOrders=[];for(const [_0x556a1b,_0x5a0d02]of Object[_0x2977cb(0x133)](mybalances)){if(_0x56ddf7[_0x2977cb(0x13e)](_0x556a1b)){const _0x3a62a4=config[_0x2977cb(0x1c0)][_0x2977cb(0x1a9)](_0x4eedc2=>_0x4eedc2[_0x2977cb(0x190)]==_0x556a1b),_0x378ffc=_0x556a1b+'/'+_0x35b3aa,_0x2dca79=_0x35b3aa+'/'+_0x556a1b;_0x46da8f=![];if((_0x5a0d02['toString']()!=0x0||_0x3a62a4)&&(allSymbols[_0x2977cb(0x13e)](_0x378ffc)||_0x556a1b==_0x35b3aa))_0x556a1b!=_0x35b3aa&&(_0x2eb3ea[_0x2977cb(0x220)](_0x378ffc),_0xed65a9=await exchange[_0x2977cb(0x173)](_0x378ffc),_0xed65a9[_0x2977cb(0x16c)]>0x0&&(_0x46da8f=!![])),_0xa4dc14[_0x2977cb(0x220)]({'coin':_0x556a1b,'symbol':_0x378ffc,'reverse':![],'number':Math[_0x2977cb(0x143)](_0x5a0d02+(_0x3a62a4&&_0x3a62a4[_0x2977cb(0x1ed)]||0x0),0x0),'order':_0x46da8f});else(_0x5a0d02[_0x2977cb(0x16a)]()!=0x0||_0x3a62a4)&&allSymbols[_0x2977cb(0x13e)](_0x2dca79)&&(_0x556a1b!=_0x35b3aa&&(_0x2eb3ea[_0x2977cb(0x220)](_0x2dca79),_0xed65a9=await exchange[_0x2977cb(0x173)](_0x2dca79),_0xed65a9[_0x2977cb(0x16c)]>0x0&&(_0x46da8f=!![])),_0xa4dc14[_0x2977cb(0x220)]({'coin':_0x556a1b,'symbol':_0x2dca79,'reverse':!![],'number':Math[_0x2977cb(0x143)](_0x5a0d02+(_0x3a62a4&&_0x3a62a4[_0x2977cb(0x1ed)]||0x0),0x0),'order':_0x46da8f}));}_0x46da8f&&allOpenOrders[_0x2977cb(0x220)](_0xed65a9[0x0]);}allOpenOrders[_0x2977cb(0x16c)]==0x0&&(lockOrders&&validateOrders(_0x2977cb(0x1fe)));}}catch(_0x2e6488){if(!_0x1dfa11){if(_0x2e6488[_0x2977cb(0x16a)]()['includes'](_0x2977cb(0x197)))return logHistory(_0x2977cb(0x1e5),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x2e6488['toString']()[_0x2977cb(0x13e)]('AuthenticationError'))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x2e6488[_0x2977cb(0x16a)]()[_0x2977cb(0x13e)](_0x2977cb(0x1be)))return logHistory(_0x2977cb(0x1e5),_0x2977cb(0x213)),![];else await handleError(_0x2e6488,'getCoins()');}}}else await handleError(_0x2e6488,_0x2977cb(0x146));}return _0xa4dc14;}async function getPortfolio(_0xc29c13){const _0x7fc0db=_0xb1ac74;let _0x4a3d3d=[],_0x4c0eac=[],_0x2da1dd,_0x1b5f6e=[],_0x59cdd4,_0x31aa07;_0xc29c13[_0x7fc0db(0x1c6)]===_0x7fc0db(0x189)||_0xc29c13[_0x7fc0db(0x1e7)]===_0x7fc0db(0x189)?(_0x59cdd4=config[_0x7fc0db(0x1c6)],_0x31aa07=config['apiSecret']):(_0x59cdd4=_0xc29c13[_0x7fc0db(0x1c6)],_0x31aa07=_0xc29c13['apiSecret']);await initExchange(_0x59cdd4,_0x31aa07);let _0x40d8c0=await loadSymbols();if(_0x40d8c0){_0x1b5f6e=await getCoins(![],_0xc29c13['basecoin']);if(_0x1b5f6e===![])proxyEmit(_0x7fc0db(0x1c0),![]);else{if(_0xc29c13[_0x7fc0db(0x169)]=='')proxyEmit(_0x7fc0db(0x1c0),_0x1b5f6e);else{_0x1b5f6e[_0x7fc0db(0x151)](_0x3b4187=>{const _0x2e7c4f=_0x7fc0db;if(_0x3b4187[_0x2e7c4f(0x190)]!=_0xc29c13[_0x2e7c4f(0x169)])_0x4a3d3d[_0x2e7c4f(0x220)](_0x3b4187[_0x2e7c4f(0x22e)]);});try{_0x4c0eac=await exchange[_0x7fc0db(0x20e)](_0x4a3d3d);}catch(_0x11b3f4){await handleError(_0x11b3f4,'getPortfolio()');}_0x1b5f6e[_0x7fc0db(0x151)](_0x43d8be=>{const _0xd91086=_0x7fc0db;_0x43d8be['coin']!=_0xc29c13[_0xd91086(0x169)]?_0x2da1dd=_0x43d8be['reverse']?0x1/_0x4c0eac[_0x43d8be[_0xd91086(0x22e)]][_0xd91086(0x1ba)]:_0x4c0eac[_0x43d8be[_0xd91086(0x22e)]][_0xd91086(0x1ba)]:_0x2da1dd=0x1,_0x43d8be[_0xd91086(0x1e9)]=formatResult(_0x2da1dd,0x8);}),proxyEmit(_0x7fc0db(0x1c0),_0x1b5f6e);}}}else proxyEmit(_0x7fc0db(0x1c0),![]);}function checkMinimums(_0x140f18){const _0xdc981d=_0xb1ac74;let _0x58b918=!![];const _0x43425c=!_0x140f18[_0xdc981d(0x1e1)]?markets[_0x140f18['symbol']][_0xdc981d(0x12d)][_0xdc981d(0x1eb)][_0xdc981d(0x177)]:markets[_0x140f18['symbol']][_0xdc981d(0x12d)][_0xdc981d(0x164)][_0xdc981d(0x177)],_0x36634c=!_0x140f18['reverse']?markets[_0x140f18[_0xdc981d(0x22e)]][_0xdc981d(0x12d)][_0xdc981d(0x164)][_0xdc981d(0x177)]:markets[_0x140f18['symbol']][_0xdc981d(0x12d)]['amount']['min'],_0x546a11=markets[_0x140f18[_0xdc981d(0x22e)]]['precision'][_0xdc981d(0x1eb)];_0x140f18[_0xdc981d(0x229)]=formatResultTruncate(_0x140f18[_0xdc981d(0x229)],_0x546a11);if(Math['abs'](_0x140f18[_0xdc981d(0x229)])<_0x43425c)_0x58b918=![];if(Math[_0xdc981d(0x166)](_0x140f18[_0xdc981d(0x229)])*_0x140f18[_0xdc981d(0x1ba)]<_0x36634c)_0x58b918=![];if(_0x140f18[_0xdc981d(0x22d)]=='sell'){let _0x3ae7f5=config['portfolio'][_0xdc981d(0x1a9)](_0x4ed124=>_0x4ed124[_0xdc981d(0x190)]==_0x140f18[_0xdc981d(0x190)]);if(_0x3ae7f5[_0xdc981d(0x1ed)]>0x0){if(Math[_0xdc981d(0x166)](_0x140f18['trade'])>_0x140f18[_0xdc981d(0x13f)]-_0x3ae7f5['offset'])_0x58b918=![];}else{if(Math[_0xdc981d(0x166)](_0x140f18[_0xdc981d(0x229)])>_0x140f18['number'])_0x58b918=![];}}if(_0x140f18[_0xdc981d(0x22d)]==_0xdc981d(0x1e2)){let _0x3c7e6c=config[_0xdc981d(0x1c0)][_0xdc981d(0x1a9)](_0x5974c5=>_0x5974c5[_0xdc981d(0x190)]==config['basecoin']),_0x3662b8=currentCoins['find'](_0x586549=>_0x586549[_0xdc981d(0x190)]==config[_0xdc981d(0x169)]);if(_0x3c7e6c['offset']>0x0){if(Math[_0xdc981d(0x166)](_0x140f18['trade'])*_0x140f18[_0xdc981d(0x1ba)]>_0x3662b8[_0xdc981d(0x13f)]-_0x3c7e6c[_0xdc981d(0x1ed)])_0x58b918=![];}else{if(Math['abs'](_0x140f18['trade'])*_0x140f18[_0xdc981d(0x1ba)]>_0x3662b8[_0xdc981d(0x13f)])_0x58b918=![];}}return _0x58b918;}async function getBalances(){const _0x42beac=_0xb1ac74;let _0xee5dba=0x0,_0x2c0bb5;const _0x36eb21=config[_0x42beac(0x10e)];if(config[_0x42beac(0x1f5)]&&config[_0x42beac(0x104)]<0x0)await validate24hChanges();currentCoins[_0x42beac(0x151)](_0x2685c7=>{const _0x478b16=_0x42beac;if(_0x2685c7[_0x478b16(0x190)]!=config[_0x478b16(0x169)]){let _0x229611=global['ticker'][noslash(_0x2685c7[_0x478b16(0x22e)])];_0x2c0bb5=_0x2685c7[_0x478b16(0x1e1)]?0x1/_0x229611:_0x229611;}else _0x2c0bb5=0x1;let _0x3cccf7=_0x2685c7[_0x478b16(0x13f)]*_0x2c0bb5;_0xee5dba+=_0x3cccf7,_0x2685c7['last']=formatResult(Number(_0x2c0bb5),0x8),_0x2685c7['value']=_0x3cccf7;}),currentCoins[_0x42beac(0x151)](_0xa490d=>{const _0x179c6b=_0x42beac;let _0x24c63c=config[_0x179c6b(0x1c0)]['find'](_0x385a69=>_0x385a69[_0x179c6b(0x190)]==_0xa490d[_0x179c6b(0x190)]),_0x160d5b=Number(_0x24c63c['distribution']),_0x5818f2=_0xa490d[_0x179c6b(0x13d)]/_0xee5dba*0x64,_0x25335e=_0x160d5b*_0xee5dba/0x64/_0xa490d[_0x179c6b(0x1ba)]-_0xa490d[_0x179c6b(0x13f)];_0xa490d[_0x179c6b(0x22c)]=formatResult(_0x5818f2,0x3),_0xa490d[_0x179c6b(0x1d7)]=formatResult(_0x160d5b,0x3),_0xa490d[_0x179c6b(0x229)]=formatResult(_0x25335e,0x8),_0xa490d[_0x179c6b(0x22d)]='',_0xa490d[_0x179c6b(0x184)]=![];if(_0xa490d[_0x179c6b(0x190)]!=config['basecoin']){if(_0xa490d[_0x179c6b(0x22c)]>_0x160d5b)_0xa490d[_0x179c6b(0x22d)]=_0x179c6b(0x168),_0xa490d['valid']=checkMinimums(_0xa490d);else _0xa490d[_0x179c6b(0x22c)]<_0x160d5b&&(_0xa490d[_0x179c6b(0x22d)]=_0x179c6b(0x1e2),_0xa490d[_0x179c6b(0x184)]=checkMinimums(_0xa490d));}_0xa490d[_0x179c6b(0x19c)]=_0xa490d[_0x179c6b(0x22c)]/_0xa490d[_0x179c6b(0x1d7)]-0x1;}),currentCoins[_0x42beac(0x149)]((_0x1aa518,_0x3181f1)=>_0x1aa518[_0x42beac(0x19c)]<_0x3181f1[_0x42beac(0x19c)]?0x1:_0x3181f1[_0x42beac(0x19c)]<_0x1aa518[_0x42beac(0x19c)]?-0x1:0x0);const _0x4ae028=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4ae028[_0x42beac(0x1aa)],'usd':_0x4ae028[_0x42beac(0x1f3)],'portfolio':JSON[_0x42beac(0x1ff)](currentCoins),'threshold':_0x36eb21},proxyEmit(_0x42beac(0x1da),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x42beac(0x1f5)])headlessMode({'portfolio':currentCoins,'threshold':_0x36eb21});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x36eb21});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x39ea4c=_0xb1ac74;if(!lastBalances)return;let _0x5237dc=[],_0x366faf,_0xb8d155=JSON['parse'](lastBalances[_0x39ea4c(0x1c0)]);_0xb8d155[_0x39ea4c(0x149)]((_0x269c02,_0x5ee7d9)=>_0x269c02[_0x39ea4c(0x190)]>_0x5ee7d9[_0x39ea4c(0x190)]?0x1:_0x5ee7d9[_0x39ea4c(0x190)]>_0x269c02[_0x39ea4c(0x190)]?-0x1:0x0),_0xb8d155['forEach'](_0x45de81=>{const _0xfb7885=_0x39ea4c;let _0x2d618d={'coin':_0x45de81['coin'],'number':_0x45de81[_0xfb7885(0x13f)],'price':_0x45de81[_0xfb7885(0x1ba)]};_0x5237dc['push'](_0x2d618d);});const _0x36b88a=await getFiat();_0x366faf={'date':lastBalances[_0x39ea4c(0x17a)][_0x39ea4c(0x110)]('\x20')[0x0],'eur':_0x36b88a[_0x39ea4c(0x1aa)],'usd':_0x36b88a[_0x39ea4c(0x1f3)],'coins':_0x5237dc};let _0x5b763b=dbPerformance[_0x39ea4c(0x117)](_0x39ea4c(0x1b0))[_0x39ea4c(0x1a9)]({'date':_0x366faf[_0x39ea4c(0x1bd)]})['value']();_0x5b763b?_0x366faf[_0x39ea4c(0x1bd)]!=config['startdate']&&dbPerformance[_0x39ea4c(0x117)]('data')[_0x39ea4c(0x1a9)]({'date':_0x366faf['date']})['assign'](_0x366faf)[_0x39ea4c(0x15f)]():dbPerformance['get']('data')[_0x39ea4c(0x220)](_0x366faf)[_0x39ea4c(0x15f)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1e50aa=_0xb1ac74;let _0x2ddd51=[];if(dbPerformance[_0x1e50aa(0x131)](_0x1e50aa(0x1b0))['value']()){let _0x228309=dbPerformance[_0x1e50aa(0x117)](_0x1e50aa(0x1b0))[_0x1e50aa(0x16d)]()[_0x1e50aa(0x1ab)]('date')[_0x1e50aa(0x13d)](),_0x51ac28=[...config[_0x1e50aa(0x1d3)]];_0x51ac28['sort']((_0x42eb71,_0x12af6a)=>_0x42eb71[_0x1e50aa(0x1bd)]>_0x12af6a['date']?-0x1:_0x12af6a['date']>_0x42eb71[_0x1e50aa(0x1bd)]?0x1:0x0);let _0xd336d8=0x1,_0x5e78f6=[],_0x111432=0x0;_0x228309[_0x1e50aa(0x1d1)]()['reverse']()[_0x1e50aa(0x151)]((_0x51255f,_0x5548b9)=>{const _0x366e90=_0x1e50aa;if(_0x51ac28[_0x111432]){if(_0x228309[_0x228309[_0x366e90(0x16c)]-_0x5548b9]&&_0x51ac28[_0x111432][_0x366e90(0x1bd)]==_0x228309[_0x228309[_0x366e90(0x16c)]-_0x5548b9][_0x366e90(0x1bd)]){if(_0x5548b9<_0x228309[_0x366e90(0x16c)]){let _0x5a0e75=0x0,_0x53c46f=0x0;_0x228309[_0x228309[_0x366e90(0x16c)]-_0x5548b9][_0x366e90(0x1cc)][_0x366e90(0x151)](_0x32ee69=>{const _0x196c9c=_0x366e90;_0x53c46f+=_0x32ee69[_0x196c9c(0x13f)]*_0x32ee69[_0x196c9c(0x1e9)];}),_0x51ac28[_0x111432][_0x366e90(0x1c9)]['forEach'](_0x4e2701=>{const _0x4ed89e=_0x366e90;_0x5a0e75+=_0x4e2701['number']*_0x4e2701[_0x4ed89e(0x1e9)];}),_0xd336d8*=_0x5a0e75/(_0x53c46f-_0x5a0e75)+0x1;}_0x111432++;}}let _0x784172=0x0;_0x51255f['coins'][_0x366e90(0x151)](_0x8caa9b=>{_0x784172+=_0x8caa9b['number']*_0x8caa9b['price'];}),_0x5e78f6[_0x228309[_0x366e90(0x16c)]-_0x5548b9-0x1]=_0x784172*(_0xd336d8-0x1);});let _0x8ef918=[];_0x51ac28=[...config[_0x1e50aa(0x1d3)]]||[];let _0xa6f4ff=0x0;_0x111432=0x0,_0x228309[_0x1e50aa(0x151)]((_0x504010,_0x32969f)=>{const _0x32f017=_0x1e50aa;if(_0x51ac28[_0x111432]){const _0x18aa80=fns['parse'](_0x51ac28[_0x111432][_0x32f017(0x1bd)],'yyyy/MM/dd',new Date()),_0x2e5585=fns[_0x32f017(0x1e0)](_0x504010[_0x32f017(0x1bd)],_0x32f017(0x15b),new Date());if(fns[_0x32f017(0x1c3)](_0x18aa80,_0x2e5585)){let _0x16f5bf=0x0;_0x51ac28[_0x111432][_0x32f017(0x1c9)][_0x32f017(0x151)](_0x3632b2=>{const _0x15d7a2=_0x32f017;!_0x8ef918[_0x3632b2[_0x15d7a2(0x190)]]?_0x8ef918[_0x3632b2[_0x15d7a2(0x190)]]=_0x3632b2[_0x15d7a2(0x13f)]:(_0x16f5bf=_0x8ef918[_0x3632b2[_0x15d7a2(0x190)]],_0x8ef918[_0x3632b2[_0x15d7a2(0x190)]]+=_0x3632b2['number']);const _0x5f0e53=_0x504010['coins'][_0x15d7a2(0x1a9)](_0x1e1620=>_0x1e1620[_0x15d7a2(0x190)]==_0x3632b2[_0x15d7a2(0x190)]);(!_0x5f0e53||_0x5f0e53[_0x15d7a2(0x13f)]==0x0)&&(_0xa6f4ff+=(-_0x3632b2[_0x15d7a2(0x13f)]-_0x16f5bf)*_0x3632b2[_0x15d7a2(0x1e9)]);}),_0x111432++;}}_0x504010[_0x32f017(0x1cc)][_0x32f017(0x151)]((_0x231581,_0x32ec69)=>{const _0x556d0b=_0x32f017;_0x8ef918[_0x231581[_0x556d0b(0x190)]]&&(_0x231581={..._0x231581,'initial':_0x8ef918[_0x231581[_0x556d0b(0x190)]]}),_0x504010[_0x556d0b(0x1cc)][_0x32ec69]=_0x231581;}),_0x2ddd51[_0x32f017(0x220)]({'date':_0x504010[_0x32f017(0x1bd)],'eur':_0x504010['eur'],'usd':_0x504010[_0x32f017(0x1f3)],'offset':_0x5e78f6[_0x32969f],'netoffset':_0xa6f4ff,'coins':_0x504010[_0x32f017(0x1cc)]});});}return _0x2ddd51;}function emitPerformance(_0x239823){const _0x18c1f2=_0xb1ac74;_0x239823[_0x18c1f2(0x16c)]!==0x0?(proxyEmit(_0x18c1f2(0x14b),_0x239823),lastPerformanceEmitted=getDate()):proxyEmit(_0x18c1f2(0x14b),[]);}function getPerf(_0x57809f,_0x576fe0){const _0x4d02d1=_0xb1ac74;let _0x37818c=0x0,_0x2ea500=0x0,_0x26926f=0x0;_0x57809f[_0x4d02d1(0x1cc)][_0x4d02d1(0x151)](_0x3544ed=>{const _0xdfa6ed=_0x4d02d1;_0x37818c+=_0x3544ed[_0xdfa6ed(0x13f)]*_0x3544ed[_0xdfa6ed(0x1e9)];});_0x576fe0&&(_0x37818c+=_0x57809f[_0x4d02d1(0x1ed)]);if(config[_0x4d02d1(0x169)]==='BTC'||config[_0x4d02d1(0x169)]==='ETH')_0x2ea500=_0x37818c*_0x57809f[_0x4d02d1(0x1aa)],_0x26926f=_0x37818c*_0x57809f[_0x4d02d1(0x1f3)];else{if(config['basecoin']===_0x4d02d1(0x148)||config[_0x4d02d1(0x169)]==='USDT')_0x2ea500=_0x37818c*_0x57809f['eur']/_0x57809f[_0x4d02d1(0x1f3)],_0x26926f=_0x37818c;else config[_0x4d02d1(0x169)]==='EUR'&&(_0x2ea500=_0x37818c,_0x26926f=_0x37818c*_0x57809f['usd']/_0x57809f[_0x4d02d1(0x1aa)]);}return[_0x37818c,_0x2ea500,_0x26926f];}async function getStartingBalances(_0x30b8c6,_0x11a42c=!![]){const _0x42c44f=_0xb1ac74;if(_0x30b8c6['length']!==0x0){const [_0x58236e,_0x30282b,_0x2b6054]=getPerf(_0x30b8c6[0x0],!![]);let _0x7e680d=[];config[_0x42c44f(0x1c0)][_0x42c44f(0x151)](_0x270ec9=>{const _0x234f85=_0x42c44f;let _0x416e36=0x0,_0x5021e9;config['liquidity'][_0x234f85(0x151)](_0x2875ac=>{const _0x3bb223=_0x234f85;let _0x2da3ba=_0x2875ac[_0x3bb223(0x1c9)][_0x3bb223(0x1a9)](_0x279c6c=>_0x279c6c[_0x3bb223(0x190)]==_0x270ec9[_0x3bb223(0x190)]);if(_0x2da3ba){_0x416e36+=_0x2da3ba[_0x3bb223(0x13f)];if(!_0x5021e9)_0x5021e9=_0x2da3ba[_0x3bb223(0x1e9)];}}),_0x7e680d[_0x234f85(0x220)]({'coin':_0x270ec9[_0x234f85(0x190)],'number':_0x416e36,'initialprice':_0x5021e9});});const _0x5654e4={'basecoin':_0x58236e,'eur':_0x30282b,'usd':_0x2b6054,'coins':_0x7e680d};if(_0x11a42c)proxyEmit(_0x42c44f(0x200),_0x5654e4);return _0x5654e4;}}function headlessMode(_0x1f15bf){const _0x11ec62=_0xb1ac74;let _0x323e25=_0x1f15bf[_0x11ec62(0x1c0)],_0x421b2d=_0x1f15bf[_0x11ec62(0x10e)],_0x5d711e=[];for(let _0x1e21cb of _0x323e25){if(_0x1e21cb[_0x11ec62(0x190)]!=config['basecoin']){if(_0x1e21cb['delta']>=_0x421b2d/0x64){if(_0x1e21cb[_0x11ec62(0x184)])_0x5d711e['push'](_0x1e21cb);}else{if(_0x1e21cb[_0x11ec62(0x19c)]<=-_0x421b2d/0x64){if(_0x1e21cb[_0x11ec62(0x184)])_0x5d711e[_0x11ec62(0x220)](_0x1e21cb);}}}}_0x5d711e[_0x11ec62(0x16c)]>0x0&&placeOrder(_0x5d711e);}function notifyBalance(_0x51b91b){const _0x16a8db=_0xb1ac74;let _0x26ff04=_0x51b91b['portfolio'],_0x43c695=_0x51b91b[_0x16a8db(0x10e)],_0x27297a=[];for(let _0x47a1a7 of _0x26ff04){if(_0x47a1a7[_0x16a8db(0x190)]!=config[_0x16a8db(0x169)]){if(_0x47a1a7['delta']>=_0x43c695/0x64){if(_0x47a1a7[_0x16a8db(0x184)])_0x27297a[_0x16a8db(0x220)](_0x47a1a7);}else{if(_0x47a1a7[_0x16a8db(0x19c)]<=-_0x43c695/0x64){if(_0x47a1a7[_0x16a8db(0x184)])_0x27297a[_0x16a8db(0x220)](_0x47a1a7);}}}}if(_0x27297a[_0x16a8db(0x16c)]>0x0){let _0x44eb23=_0x27297a[_0x16a8db(0x1c5)](_0x2b8248=>_0x2b8248[_0x16a8db(0x190)]);_0x44eb23[_0x16a8db(0x149)]();let _0x19fa71=_0x44eb23[_0x16a8db(0x132)](',\x20');if(lastCoinsToBalance!==_0x19fa71)logHistory(_0x16a8db(0x13b),_0x16a8db(0x1d4)+_0x19fa71);lastCoinsToBalance=_0x19fa71;}}function symbolToCoin(_0x460cce){const _0x40b60e=_0xb1ac74;let _0x5349ba;if(_0x460cce['includes']('/'+config[_0x40b60e(0x169)]))_0x5349ba=_0x460cce[_0x40b60e(0x18e)]('/'+config[_0x40b60e(0x169)],'');if(_0x460cce[_0x40b60e(0x13e)](config[_0x40b60e(0x169)]+'/'))_0x5349ba=_0x460cce[_0x40b60e(0x18e)](config['basecoin']+'/','');return _0x5349ba;}async function validateOrders(_0x45768f){const _0x3e650f=_0xb1ac74;if(_0x45768f)validateOrdersState=_0x45768f;let _0x3b751e=[],_0xcd682a=config[_0x3e650f(0x1b4)]==_0x3e650f(0x120)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3e650f(0x212)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x3e650f(0x151)](_0x31a744=>{const _0x61a12b=_0x3e650f;let _0xa59e4e=![];_0x31a744[_0x61a12b(0x211)]>0x0&&(_0xa59e4e=!![]),_0x3b751e[_0x61a12b(0x220)](_0xa59e4e),_0xa59e4e&&config[_0x61a12b(0x1b4)]!=_0x61a12b(0x120)&&logHistory(_0x61a12b(0x144),'Order\x20filled:\x20'+_0x31a744[_0x61a12b(0x22e)]+'\x20'+_0x31a744['side']+'\x20#'+formatResult(_0x31a744[_0x61a12b(0x211)],0x8)+'\x20@'+formatResult(_0x31a744[_0x61a12b(0x1e9)],0x8));}),_0x3b751e[_0x3e650f(0x151)]((_0x5de7b4,_0xf6ce9d)=>{const _0x341d0b=_0x3e650f;if(_0x5de7b4)lastOrders[_0x341d0b(0x1e8)](_0xf6ce9d,0x1);});const _0x3bc21a=coolingDown?_0x3e650f(0x182):_0x3e650f(0x174);if(validateOrdersState==_0x3e650f(0x219))validateOrdersState=_0x3e650f(0x1c1),_0x3b751e[_0x3e650f(0x13e)](![])?config[_0x3e650f(0x1b4)]==_0x3e650f(0x120)?logHistory(_0x3e650f(0x1e5),_0x3e650f(0x160)):logHistory(_0x3e650f(0x1e5),_0x3e650f(0x1bc)):lockOrders=![];else{if(validateOrdersState==_0x3e650f(0x1c1)){if(_0x3b751e[_0x3e650f(0x13e)](![])){}else lockOrders=![],config[_0x3e650f(0x1b4)]=='market'?logHistory(_0x3e650f(0x13b),'Order(s)\x20validated\x20-\x20'+_0x3bc21a):logHistory(_0x3e650f(0x13b),_0x3e650f(0x1d0)+_0x3bc21a);}else{if(validateOrdersState==_0x3e650f(0x221))lockOrders=![],_0x3b751e[_0x3e650f(0x13e)](![])?config['ordertype']==_0x3e650f(0x120)?logHistory(_0x3e650f(0x13b),_0x3e650f(0x127)+Math[_0x3e650f(0x12f)](_0xcd682a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3bc21a):(await cancelOrders(),logHistory(_0x3e650f(0x13b),_0x3e650f(0x124)+Math[_0x3e650f(0x12f)](_0xcd682a*validateOrderInterval/0xea60)+_0x3e650f(0x175)+_0x3bc21a)):logHistory('success',_0x3e650f(0x157)+_0x3bc21a),currentCoins=await getCoins();else{if(validateOrdersState==_0x3e650f(0x1fe)){lockOrders=![];if(config['ordertype']!=_0x3e650f(0x120))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x3bc21a);}}}}}async function cancelOrders(){const _0x293d9a=_0xb1ac74;lastOrders[_0x293d9a(0x151)](async _0x4f012b=>{const _0x7f9e53=_0x293d9a;try{const _0x3afe8f=await exchange[_0x7f9e53(0x156)](_0x4f012b['orderId'],_0x4f012b[_0x7f9e53(0x22e)]);}catch(_0x331d31){if(_0x331d31[_0x7f9e53(0x16a)]()[_0x7f9e53(0x13e)](_0x7f9e53(0x14d))){}else await handleError(_0x331d31,'cancelOrders()');}});}async function initCoinResults(){const _0x347e75=_0xb1ac74;let _0x1a4fd2=[];config['portfolio'][_0x347e75(0x151)](_0x5e2d4c=>{const _0x5ea1b4=_0x347e75;if(!_0x5e2d4c[_0x5ea1b4(0x1ef)]&&_0x5e2d4c[_0x5ea1b4(0x190)]!=config['basecoin']){let _0x462f67=dbCoinResults[_0x5ea1b4(0x117)](_0x5ea1b4(0x1cc))['find']({'coin':_0x5e2d4c[_0x5ea1b4(0x190)]})['value']();if(!_0x462f67){const _0x1034e5=currentCoins[_0x5ea1b4(0x1a9)](_0x422e01=>_0x422e01['coin']==_0x5e2d4c['coin']),_0x81692=global[_0x5ea1b4(0x1c8)][noslash(_0x5e2d4c['symbol'])];let _0x3a274a=_0x1034e5?_0x1034e5['number']:null,_0x39713f=_0x5e2d4c[_0x5ea1b4(0x1e1)]?0x1/_0x81692:_0x81692,_0x2c3191;config['liquidity']['forEach'](_0x2388ea=>{const _0x35e43d=_0x5ea1b4;!_0x2c3191&&(_0x2c3191=_0x2388ea['changes'][_0x35e43d(0x1a9)](_0x10865e=>_0x10865e['coin']==_0x5e2d4c[_0x35e43d(0x190)]),_0x2c3191&&(_0x3a274a=_0x2c3191[_0x35e43d(0x13f)],_0x39713f=_0x2c3191[_0x35e43d(0x1e9)]));}),_0x1a4fd2[_0x5ea1b4(0x220)]({'coin':_0x5e2d4c[_0x5ea1b4(0x190)],'number':_0x3a274a,'price':_0x39713f});}}}),_0x1a4fd2[_0x347e75(0x151)](_0x5e1bf9=>{const _0x5639e4=_0x347e75,_0x3074aa={'coin':_0x5e1bf9['coin'],'number':_0x5e1bf9[_0x5639e4(0x13f)],'breakeven':_0x5e1bf9[_0x5639e4(0x1e9)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5639e4(0x117)](_0x5639e4(0x1cc))[_0x5639e4(0x220)](_0x3074aa)['write']();});}async function updateCoinResults(_0x2ca94a,_0x196f6a=![]){const _0x10af98=_0xb1ac74;let _0x288a03,_0x20e1a2,_0x520271,_0x8da072,_0x40e235,_0x2e77a4,_0x460d4f=dbCoinResults[_0x10af98(0x117)](_0x10af98(0x1cc))[_0x10af98(0x1a9)]({'coin':_0x2ca94a[_0x10af98(0x190)]})[_0x10af98(0x13d)]();!_0x460d4f&&await initCoinResults();if(_0x2ca94a[_0x10af98(0x15d)]&&_0x2ca94a[_0x10af98(0x15d)][_0x10af98(0x1ec)]==config[_0x10af98(0x169)])_0x288a03=_0x2ca94a[_0x10af98(0x15d)][_0x10af98(0x164)];else{if(_0x2ca94a['fee']&&_0x2ca94a[_0x10af98(0x15d)][_0x10af98(0x1ec)]==_0x10af98(0x150)&&!_0x196f6a)_0x288a03=_0x2ca94a[_0x10af98(0x15d)][_0x10af98(0x164)]*global['ticker']['BNB'+config[_0x10af98(0x169)]];else _0x288a03=defaultFee*_0x2ca94a[_0x10af98(0x211)];}_0x2ca94a[_0x10af98(0x1e1)]&&(_0x2e77a4={'coin':_0x2ca94a[_0x10af98(0x190)],'symbol':_0x2ca94a[_0x10af98(0x22e)],'filled':_0x2ca94a['filled']*_0x2ca94a[_0x10af98(0x1e9)],'amount':_0x2ca94a[_0x10af98(0x211)]*_0x2ca94a[_0x10af98(0x1e9)],'side':_0x2ca94a[_0x10af98(0x22d)]==_0x10af98(0x168)?_0x10af98(0x1e2):'sell','price':0x1/_0x2ca94a['price']},_0x2ca94a={..._0x2ca94a,..._0x2e77a4});if(_0x196f6a)_0x20e1a2=_0x2ca94a[_0x10af98(0x22d)]==_0x10af98(0x1e2)?_0x460d4f['number']+_0x2ca94a[_0x10af98(0x211)]:_0x460d4f[_0x10af98(0x13f)]-_0x2ca94a[_0x10af98(0x211)];else{const _0x9be2b7=currentCoins[_0x10af98(0x1a9)](_0x190bca=>_0x190bca[_0x10af98(0x190)]==_0x2ca94a[_0x10af98(0x190)]);_0x20e1a2=_0x9be2b7['number'];}_0x2ca94a[_0x10af98(0x22d)]==_0x10af98(0x1e2)?_0x520271=(_0x460d4f['breakeven']*_0x460d4f[_0x10af98(0x13f)]+_0x2ca94a['price']*(_0x20e1a2-_0x460d4f[_0x10af98(0x13f)]))/_0x20e1a2+_0x288a03:_0x520271=(_0x460d4f[_0x10af98(0x1b8)]*_0x460d4f[_0x10af98(0x13f)]-_0x2ca94a[_0x10af98(0x1e9)]*(_0x460d4f[_0x10af98(0x13f)]-_0x20e1a2))/_0x20e1a2+_0x288a03;_0x2ca94a[_0x10af98(0x22d)]==_0x10af98(0x1e2)?_0x8da072=_0x460d4f[_0x10af98(0x1db)]:_0x8da072=_0x460d4f[_0x10af98(0x1db)]+(_0x2ca94a['price']-_0x460d4f['breakeven'])*_0x2ca94a[_0x10af98(0x211)];_0x40e235=(_0x2ca94a[_0x10af98(0x1e9)]-_0x520271)*_0x20e1a2;let _0x2ffc9f={'coin':_0x2ca94a[_0x10af98(0x190)],'number':_0x20e1a2,'breakeven':formatResult(_0x520271,0x8),'realized':formatResult(_0x8da072,0x8),'unrealized':formatResult(_0x40e235,0x8),'fees':formatResult(_0x460d4f['fees']+_0x288a03,0x8),'sells':_0x2ca94a['side']==_0x10af98(0x168)?_0x460d4f['sells']+0x1:_0x460d4f[_0x10af98(0x215)],'buys':_0x2ca94a[_0x10af98(0x22d)]=='buy'?_0x460d4f[_0x10af98(0x179)]+0x1:_0x460d4f[_0x10af98(0x179)]};dbCoinResults[_0x10af98(0x117)]('coins')[_0x10af98(0x1a9)]({'coin':_0x2ca94a['coin']})[_0x10af98(0x16b)](_0x2ffc9f)[_0x10af98(0x15f)]();if(!_0x196f6a){if(_0x2ca94a[_0x10af98(0x15d)]&&_0x2ca94a[_0x10af98(0x15d)][_0x10af98(0x1ec)]==_0x10af98(0x150)){const _0x53cfe6=currentCoins[_0x10af98(0x1a9)](_0x24a60b=>_0x24a60b[_0x10af98(0x190)]=='BNB');if(_0x53cfe6){_0x20e1a2=_0x53cfe6[_0x10af98(0x13f)];let _0x570b11=dbCoinResults[_0x10af98(0x117)](_0x10af98(0x1cc))[_0x10af98(0x1a9)]({'coin':_0x10af98(0x150)})[_0x10af98(0x13d)]();_0x2ffc9f={..._0x570b11,'number':_0x20e1a2},dbCoinResults[_0x10af98(0x117)](_0x10af98(0x1cc))[_0x10af98(0x1a9)]({'coin':_0x10af98(0x150)})['assign'](_0x2ffc9f)[_0x10af98(0x15f)]();}}}}async function placeOrder(_0x45c496){const _0xb8268d=_0xb1ac74,_0x29729b=config[_0xb8268d(0x1b4)]==_0xb8268d(0x120)?_0xb8268d(0x120):'limit';if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x3f103c of _0x45c496){let _0x3cc8e9,_0x30f795,_0x269bc0,_0x304628,_0x31a33a,_0x204ccd=_0x3f103c['symbol'];try{const _0x495e2b=await exchange[_0xb8268d(0x20e)]([_0x204ccd]),_0x328358=_0x495e2b[_0x204ccd];_0x3cc8e9=_0x3f103c['reverse']?0x1/_0x3f103c[_0xb8268d(0x1ba)]:_0x3f103c[_0xb8268d(0x1ba)],_0x30f795=_0x328358['bid'],_0x269bc0=_0x328358['ask'];_0x3f103c['reverse']?(_0x304628=_0x3f103c[_0xb8268d(0x22d)]==_0xb8268d(0x1e2)?_0xb8268d(0x168):'buy',_0x31a33a=Math[_0xb8268d(0x166)](_0x3f103c['trade'])/_0x3cc8e9):(_0x304628=_0x3f103c['side'],_0x31a33a=Math[_0xb8268d(0x166)](_0x3f103c[_0xb8268d(0x229)]));_0x29729b=='limit'&&(config[_0xb8268d(0x1b4)]=='limit-high'&&(_0x3cc8e9=_0x304628=='buy'?_0x30f795:_0x269bc0),config['ordertype']=='limit-low'&&(_0x3cc8e9=_0x304628==_0xb8268d(0x1e2)?_0x269bc0:_0x30f795));_0x31a33a=formatResult(_0x31a33a,0x8),_0x3cc8e9=formatResult(_0x3cc8e9,0x8);const _0x5cf5c0=await exchange[_0xb8268d(0x108)](_0x204ccd,_0x29729b,_0x304628,_0x31a33a,_0x3cc8e9);lastOrders[_0xb8268d(0x220)]({'orderId':_0x5cf5c0['id'],'symbol':_0x204ccd,'coin':_0x3f103c[_0xb8268d(0x190)],'side':_0x304628,'reverse':_0x3f103c[_0xb8268d(0x1e1)],'amount':_0x5cf5c0['amount'],'filled':0x0,'price':_0x5cf5c0[_0xb8268d(0x1e9)],'fee':_0x5cf5c0[_0xb8268d(0x15d)]});const _0x17c3b4=_0x304628==_0xb8268d(0x168)?config[_0xb8268d(0x225)]?String[_0xb8268d(0x204)]('0x'+config['emojisell'])+'\x20':'':config[_0xb8268d(0x21d)]?String[_0xb8268d(0x204)]('0x'+config[_0xb8268d(0x21d)])+'\x20':'',_0x14d045=_0x29729b==_0xb8268d(0x120)?_0xb8268d(0x1a4):config[_0xb8268d(0x1b4)]==_0xb8268d(0x119)?_0xb8268d(0x209):_0xb8268d(0x145);if(_0x29729b==_0xb8268d(0x120))logHistory(_0xb8268d(0x144),''+_0x17c3b4+_0x14d045+_0xb8268d(0x116)+_0x204ccd+'\x20'+_0x304628+'\x20#'+formatResult(_0x5cf5c0[_0xb8268d(0x211)],0x8)+'\x20@'+formatResult(_0x5cf5c0[_0xb8268d(0x1e9)],0x8));else logHistory(_0xb8268d(0x144),''+_0x17c3b4+_0x14d045+_0xb8268d(0x116)+_0x204ccd+'\x20'+_0x304628+'\x20#'+formatResult(_0x5cf5c0[_0xb8268d(0x1eb)],0x8)+'\x20@'+formatResult(_0x5cf5c0[_0xb8268d(0x1e9)],0x8));let _0x845237=currentCoins[_0xb8268d(0x1a9)](_0x5682cd=>_0x5682cd[_0xb8268d(0x190)]==_0x3f103c['coin']);_0x845237[_0xb8268d(0x144)]=!![];if(config[_0xb8268d(0x161)]!=0x0){let _0x54a859=null;if(cooldownTracker['length']==config[_0xb8268d(0x161)]-0x1)_0x54a859=cooldownTracker[_0xb8268d(0x178)]();const _0x5881d9=getTimeStamp();cooldownTracker[_0xb8268d(0x220)](_0x5881d9);if(_0x54a859){const _0x3f99e7=fns[_0xb8268d(0x21a)](new Date(_0x5881d9),new Date(_0x54a859));if(_0x3f99e7<cooldownInterval){logHistory(_0xb8268d(0x1e5),'Executed\x20'+config[_0xb8268d(0x161)]+_0xb8268d(0x162)+cooldownInterval/0x3c+_0xb8268d(0x1a2)+cooldownPeriod/(0xe10*0x3e8)+_0xb8268d(0x1de)),coolingDown=!![];break;}}}}catch(_0xd0c519){if(_0xd0c519[_0xb8268d(0x16a)]()['includes'](_0xb8268d(0x188)))logHistory(_0xb8268d(0x1e5),_0xb8268d(0x1d9)+_0x204ccd);else{if(_0xd0c519[_0xb8268d(0x16a)]()[_0xb8268d(0x13e)](_0xb8268d(0x115)))logHistory(_0xb8268d(0x1e5),_0xb8268d(0x134)+_0x204ccd);else await handleError(_0xd0c519,_0xb8268d(0x226),_0x204ccd);}}}if(lastOrders[_0xb8268d(0x16c)]!=0x0){lockOrders=!![],validateOrdersState=_0xb8268d(0x219);const _0x26548e=config[_0xb8268d(0x1b4)]==_0xb8268d(0x120)?validateOrderTimeout*0x3c*0x3e8:config[_0xb8268d(0x212)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x26548e);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xb8268d(0x13b),_0xb8268d(0x147)));}else{if(coolingDown)!config['headless']&&logHistory(_0xb8268d(0x1e5),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders&&(!config[_0xb8268d(0x1f5)]&&(config[_0xb8268d(0x1b4)]==_0xb8268d(0x120)?logHistory(_0xb8268d(0x1e5),_0xb8268d(0x1df)):logHistory(_0xb8268d(0x1e5),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x3c8ef0=_0xb1ac74;let _0x5d0141;lockOrders=!![],validateOrdersState=_0x3c8ef0(0x1c1),currentCoins[_0x3c8ef0(0x151)](_0x6f7256=>{const _0x20ba45=_0x3c8ef0,_0x8c1916=allOpenOrders[_0x20ba45(0x1a9)](_0x2b7c89=>_0x2b7c89[_0x20ba45(0x22e)]==_0x6f7256['symbol']);_0x8c1916&&(lastOrders['push']({'orderId':_0x8c1916['id'],'symbol':_0x6f7256[_0x20ba45(0x22e)],'coin':_0x6f7256[_0x20ba45(0x190)],'side':_0x8c1916[_0x20ba45(0x22d)],'reverse':_0x6f7256[_0x20ba45(0x1e1)],'amount':_0x8c1916[_0x20ba45(0x1eb)],'filled':0x0,'price':_0x8c1916['price'],'fee':_0x8c1916[_0x20ba45(0x15d)]}),_0x6f7256[_0x20ba45(0x144)]=!![],_0x5d0141=_0x8c1916[_0x20ba45(0x21c)]);});const _0x1ae2b6=new Date()[_0x3c8ef0(0x10c)](),_0x9671a6=config[_0x3c8ef0(0x1b4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3c8ef0(0x212)]*0x3c*0x3e8;if(_0x5d0141+_0x9671a6>_0x1ae2b6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3ed6db=_0x3c8ef0;validateOrders(_0x3ed6db(0x221));},_0x5d0141+_0x9671a6-_0x1ae2b6);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x1fc72f=_0xb1ac74,_0x2490f8=[_0x1fc72f(0x20d),'BUSD',_0x1fc72f(0x1cf)],_0xeb8d4b=_0x2490f8[_0x1fc72f(0x13e)](config[_0x1fc72f(0x169)])?0x2:0x8;let _0x32174e='';if(config[_0x1fc72f(0x202)])_0x32174e=config['botname']+_0x1fc72f(0x1b7);else _0x32174e=_0x1fc72f(0x1d6)+botID+_0x1fc72f(0x1b7);_0x32174e+='<pre>',_0x32174e+=_0x1fc72f(0x10b),_0x32174e+='-------------------------------\x0a',currentCoins[_0x1fc72f(0x151)](_0x3a1599=>{const _0x1cc390=_0x1fc72f;_0x32174e+=_0x3a1599[_0x1cc390(0x190)][_0x1cc390(0x122)](0x7)+'|\x20'+formatPad(_0x3a1599['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x3a1599[_0x1cc390(0x1d7)],0x2,0x6)+'|\x20'+formatPad(_0x3a1599['delta']*0x64,0x2,0x6)+'\x0a';}),_0x32174e+=_0x1fc72f(0x1a0),process[_0x1fc72f(0x17e)]({'telegrammsg':_0x32174e},_0x531c21=>{});}function formatPad(_0x4614cb,_0x1817b9,_0xf08b14){const _0x4102b3=_0xb1ac74,_0x5d0cad=formatResultString(_0x4614cb,_0x1817b9);return _0x5d0cad?_0x5d0cad[_0x4102b3(0x130)](_0xf08b14):''[_0x4102b3(0x130)](_0xf08b14);}function logHistory(_0x4d37ae,_0x1c0b14,_0x245698=''){const _0x45a1a3=_0xb1ac74;let _0x381367={'time':getTimeStamp(),'type':_0x4d37ae,'event':_0x1c0b14};dbLogs[_0x45a1a3(0x117)](_0x45a1a3(0x154))[_0x45a1a3(0x220)](_0x381367)[_0x45a1a3(0x15f)]();if(_0x245698=='')_0x245698=_0x1c0b14;proxyEmit('event',{'log':_0x381367,'summary':_0x245698}),process[_0x45a1a3(0x17e)]({'telegram':{..._0x381367,'botname':config[_0x45a1a3(0x1a5)],'showname':config['showname']}},_0x3c23f3=>{}),logging(''+_0x381367[_0x45a1a3(0x228)]);}function emitHistory(_0x45d6f2={}){const _0x1b5982=_0xb1ac74;Object[_0x1b5982(0x1b6)](_0x45d6f2)['length']==0x0&&(_0x45d6f2={'type':[_0x1b5982(0x144),_0x1b5982(0x228)],'event':'','page':0x1});if(_0x45d6f2[_0x1b5982(0x1b3)][_0x1b5982(0x13e)](_0x1b5982(0x228)))_0x45d6f2[_0x1b5982(0x1b3)][_0x1b5982(0x1e8)](_0x45d6f2['type'][_0x1b5982(0x19a)](_0x1b5982(0x228)),0x1,_0x1b5982(0x1e5),_0x1b5982(0x13b));if(dbLogs[_0x1b5982(0x131)]('logs')[_0x1b5982(0x13d)]()){let _0x4c1497=dbLogs[_0x1b5982(0x117)](_0x1b5982(0x154))['filter'](_0xb08dc=>{const _0xfd9be2=_0x1b5982;if(_0x45d6f2[_0xfd9be2(0x1b3)]['length']==0x0)return![];else return _0x45d6f2['type'][_0xfd9be2(0x13e)](_0xb08dc[_0xfd9be2(0x1b3)]);})['filter'](_0x4cf4d3=>{const _0x36fbb7=_0x1b5982;if(_0x45d6f2[_0x36fbb7(0x228)]=='')return!![];else return _0x4cf4d3['event'][_0x36fbb7(0x111)]()[_0x36fbb7(0x13e)](_0x45d6f2[_0x36fbb7(0x228)][_0x36fbb7(0x111)]());})[_0x1b5982(0x1ab)](_0x1b5982(0x17a)),_0x36ace1=_0x4c1497[_0x1b5982(0x13d)]()[_0x1b5982(0x16c)];_0x4c1497=_0x4c1497[_0x1b5982(0x1e1)]()[_0x1b5982(0x1d1)]((_0x45d6f2[_0x1b5982(0x1f0)]-0x1)*logPageSize,_0x45d6f2['page']*logPageSize-0x1)[_0x1b5982(0x1e1)]()[_0x1b5982(0x13d)](),proxyEmit(_0x1b5982(0x1ee),{'logs':_0x4c1497,'total':_0x36ace1});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1c7565){const _0x59a6c5=_0xb1ac74;if(dbLogs[_0x59a6c5(0x131)](_0x59a6c5(0x154))[_0x59a6c5(0x13d)]()){const _0x473a10=dbLogs['get'](_0x59a6c5(0x154))[_0x59a6c5(0x1ab)](_0x59a6c5(0x17a))[_0x59a6c5(0x15e)](_0x1993be=>{const _0x3db998=_0x59a6c5;return _0x1993be[_0x3db998(0x1b3)]=='order';})[_0x59a6c5(0x13d)]();dbLogs[_0x59a6c5(0x117)](_0x59a6c5(0x154))[_0x59a6c5(0x153)]()[_0x59a6c5(0x15f)](),dbLogs[_0x59a6c5(0x117)](_0x59a6c5(0x154))[_0x59a6c5(0x16b)](_0x473a10)['write'](),emitHistory(_0x1c7565);}}async function pauseBot(_0x26e8c9=''){const _0x37a4d5=_0xb1ac74,_0x5ee948=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x37a4d5(0x10c)](),consecutivePauses=0x1;else{if(_0x5ee948-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x37a4d5(0x17e)]({'stop':_0x37a4d5(0x10f)},_0x4811cd=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x37a4d5(0x10c)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x26e8c9)_0x26e8c9+='\x20|\x20';logHistory(_0x37a4d5(0x1e5),_0x26e8c9+_0x37a4d5(0x171)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0xf508e=_0xb1ac74;process[_0xf508e(0x17e)]({'stop':_0xf508e(0x218)},_0x11cb86=>{}),await sleep(0x7d0);}async function handleError(_0x4379fe,_0x51e30b,_0x1f5141=''){const _0x1d4fb6=_0xb1ac74;if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x107)))await pauseBot('Binance\x20API\x20blocked');else{if(_0x4379fe['toString']()[_0x1d4fb6(0x13e)]('ExchangeNotAvailable'))await pauseBot(_0x1d4fb6(0x1f7));else{if(_0x4379fe['toString']()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x1a6)))await pauseBot(_0x1d4fb6(0x14c));else{if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x197)))logHistory(_0x1d4fb6(0x1e5),_0x51e30b+_0x1d4fb6(0x176)),logHistory('error',_0x1d4fb6(0x142)),await killBot();else{if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x187)))logHistory(_0x1d4fb6(0x1e5),_0x51e30b+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x1d4fb6(0x1e5),_0x1d4fb6(0x142)),await killBot();else{if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x1be)))logHistory(_0x1d4fb6(0x1e5),_0x51e30b+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x51e30b+_0x1d4fb6(0x192)),logHistory('error',_0x1d4fb6(0x142)),await killBot();else{if(_0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)]('InvalidNonce'))await pauseBot(_0x1d4fb6(0x140)),process[_0x1d4fb6(0x17e)]({'stop':_0x1d4fb6(0x10f)},_0x2044b1=>{});else _0x4379fe[_0x1d4fb6(0x16a)]()[_0x1d4fb6(0x13e)](_0x1d4fb6(0x112))?logHistory('error',_0x51e30b+_0x1d4fb6(0x10a)+_0x1f5141):(logging(_0x51e30b+_0x1d4fb6(0x11f),_0x4379fe),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x446fa3,_0x540989){const _0x40fc7c=_0xb1ac74;return _0x446fa3?parseFloat(_0x446fa3[_0x40fc7c(0x21f)](_0x540989)):null;}function formatResultTruncate(_0x5737cc,_0x38e40f){const _0xea4908=_0xb1ac74;let _0x1b5cde=formatResultString(_0x5737cc,0xa),_0x4de36f=_0x1b5cde[_0xea4908(0x19a)]('.');return _0x4de36f!=-0x1&&(_0x1b5cde=_0x1b5cde[_0xea4908(0x1d1)](0x0,_0x4de36f+_0x38e40f+0x1)),Number(_0x1b5cde);}function formatResultString(_0x3b2d2e,_0x366103){const _0x21ad20=_0xb1ac74;if(!_0x3b2d2e)return null;let _0x4e3f1f;if(!(''+_0x3b2d2e)[_0x21ad20(0x13e)]('e'))_0x4e3f1f=+(Math[_0x21ad20(0x12f)](_0x3b2d2e+'e+'+_0x366103)+'e-'+_0x366103);else{let _0x96116d=(''+_0x3b2d2e)[_0x21ad20(0x110)]('e'),_0x9ee22b='';+_0x96116d[0x1]+_0x366103>0x0&&(_0x9ee22b='+'),_0x4e3f1f=+(Math[_0x21ad20(0x12f)](+_0x96116d[0x0]+'e'+_0x9ee22b+(+_0x96116d[0x1]+_0x366103))+'e-'+_0x366103);}return Number(_0x4e3f1f)[_0x21ad20(0x21f)](_0x366103);}function logging(_0x2bcaf1,_0x4f2a9a=''){const _0x3a46aa=_0xb1ac74;if(config[_0x3a46aa(0x202)])console[_0x3a46aa(0x1ea)](getTimeStamp()+':\x20'+config[_0x3a46aa(0x1a5)]+'\x20>\x20'+_0x2bcaf1,_0x4f2a9a);else console[_0x3a46aa(0x1ea)](getTimeStamp()+':\x20Bot\x20'+botID+_0x3a46aa(0x207)+_0x2bcaf1,_0x4f2a9a);}function getServerTime(){const _0xed946d=_0xb1ac74,_0xbd414c=new Date();return _0xbd414c[_0xed946d(0x1c2)]()+'/'+(_0xbd414c[_0xed946d(0x21b)]()+0x1)[_0xed946d(0x16a)]()[_0xed946d(0x130)](0x2,'0')+'/'+_0xbd414c[_0xed946d(0x152)]()['toString']()[_0xed946d(0x130)](0x2,'0')+'\x20'+_0xbd414c[_0xed946d(0x1a3)]()[_0xed946d(0x16a)]()[_0xed946d(0x130)](0x2,'0')+':'+_0xbd414c[_0xed946d(0x216)]()[_0xed946d(0x16a)]()[_0xed946d(0x130)](0x2,'0')+':'+_0xbd414c['getSeconds']()[_0xed946d(0x16a)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5938cd=_0xb1ac74,_0x514cf6=shiftedTime();return _0x514cf6['getFullYear']()+'/'+(_0x514cf6[_0x5938cd(0x21b)]()+0x1)[_0x5938cd(0x16a)]()['padStart'](0x2,'0')+'/'+_0x514cf6[_0x5938cd(0x152)]()[_0x5938cd(0x16a)]()[_0x5938cd(0x130)](0x2,'0')+'\x20'+_0x514cf6[_0x5938cd(0x1a3)]()[_0x5938cd(0x16a)]()[_0x5938cd(0x130)](0x2,'0')+':'+_0x514cf6[_0x5938cd(0x216)]()['toString']()[_0x5938cd(0x130)](0x2,'0')+':'+_0x514cf6['getSeconds']()[_0x5938cd(0x16a)]()[_0x5938cd(0x130)](0x2,'0');}function getDate(){const _0x207015=_0xb1ac74,_0x480067=shiftedTime();return _0x480067[_0x207015(0x1c2)]()+'/'+(_0x480067[_0x207015(0x21b)]()+0x1)[_0x207015(0x16a)]()[_0x207015(0x130)](0x2,'0')+'/'+_0x480067['getDate']()['toString']()[_0x207015(0x130)](0x2,'0');}function getHour(){const _0x3db5b1=_0xb1ac74,_0x276c28=shiftedTime();return _0x276c28['getHours']()[_0x3db5b1(0x16a)]()[_0x3db5b1(0x130)](0x2,'0');}function sleep(_0x258d1e){return new Promise(_0x175073=>setTimeout(_0x175073,_0x258d1e));}function shiftedTime(){const _0x558669=_0xb1ac74,_0x34ff64=new Date();let _0x1add26=_0x34ff64;if(config&&config[_0x558669(0x15c)]!==0x0)_0x1add26=fns[_0x558669(0x1af)](_0x34ff64,{'hours':config['timeshift']});return _0x1add26;}