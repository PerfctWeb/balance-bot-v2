const _0x4c340f=_0x456f;(function(_0x1771a9,_0x2efe6b){const _0x2999c5=_0x456f,_0x3e164c=_0x1771a9();while(!![]){try{const _0x2f0828=-parseInt(_0x2999c5(0x310))/0x1+-parseInt(_0x2999c5(0x1f5))/0x2+parseInt(_0x2999c5(0x245))/0x3+parseInt(_0x2999c5(0x346))/0x4+parseInt(_0x2999c5(0x242))/0x5*(parseInt(_0x2999c5(0x20a))/0x6)+-parseInt(_0x2999c5(0x1e9))/0x7+parseInt(_0x2999c5(0x32b))/0x8;if(_0x2f0828===_0x2efe6b)break;else _0x3e164c['push'](_0x3e164c['shift']());}catch(_0x4ccb94){_0x3e164c['push'](_0x3e164c['shift']());}}}(_0x1cab,0xe109d));const _0x3ac532=function(){let _0x471227=!![];return function(_0x4c75d2,_0x25c8d1){const _0x55804b=_0x471227?function(){const _0x284e80=_0x456f;if(_0x25c8d1){const _0x260518=_0x25c8d1[_0x284e80(0x221)](_0x4c75d2,arguments);return _0x25c8d1=null,_0x260518;}}:function(){};return _0x471227=![],_0x55804b;};}(),_0x520a5c=_0x3ac532(this,function(){const _0x126538=_0x456f;return _0x520a5c['toString']()[_0x126538(0x2c9)](_0x126538(0x287))[_0x126538(0x352)]()[_0x126538(0x2f8)](_0x520a5c)['search'](_0x126538(0x287));});_0x520a5c();'use strict';const ccxt=require(_0x4c340f(0x222))[_0x4c340f(0x2a8)],low=require(_0x4c340f(0x29f)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4c340f(0x316)),Crypt=require(_0x4c340f(0x1fb))[_0x4c340f(0x30e)],util=require('util'),argv=require(_0x4c340f(0x2f5))(process[_0x4c340f(0x249)][_0x4c340f(0x1ea)](0x2))['argv'],path=require(_0x4c340f(0x305));let exchange;global[_0x4c340f(0x298)]={},global[_0x4c340f(0x2fa)]={};const usdBasecoins=[_0x4c340f(0x25c),_0x4c340f(0x2ce),_0x4c340f(0x2b7),_0x4c340f(0x27d),'USDC','USDP'],exceptions={'binance':[_0x4c340f(0x224),_0x4c340f(0x2f2),'XEM/BUSD',_0x4c340f(0x2b3),_0x4c340f(0x1de)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4c340f(0x239)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4c340f(0x2a1)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x4c340f(0x27a)],botID=process[_0x4c340f(0x249)][0x2]||_0x4c340f(0x248),pattern=/^[0-9]{3}$/;!pattern[_0x4c340f(0x23e)](botID)&&(console[_0x4c340f(0x2fb)](_0x4c340f(0x214)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x4c340f(0x28a)+userID+'/':_0x4c340f(0x28a),loggerfile=fs['createWriteStream'](logspath+_0x4c340f(0x259),{'flags':'a'});!fs[_0x4c340f(0x32e)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x4c340f(0x32e)](logspath)&&fs[_0x4c340f(0x2f4)](logspath);const configfile=configpath+_0x4c340f(0x202)+botID+_0x4c340f(0x235),logfile=configpath+_0x4c340f(0x202)+botID+_0x4c340f(0x264),performancefile=configpath+_0x4c340f(0x202)+botID+_0x4c340f(0x2d9),coinresultsfile=configpath+_0x4c340f(0x202)+botID+_0x4c340f(0x335),settingsfile=configpath+_0x4c340f(0x269),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x4c340f(0x342),adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x1cab(){const _0x179ba9=['existsSync','showname','closed','limit-low','openOrders','InvalidNonce','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','-results.json','getOpenOrders()','join','limits','deleteHistoryAlerts','parse','order','realized','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','watchTrades','headless','event','buy','/backup/','Waited\x20','cancel','abs','5001924rrzNRG','Unknown\x20error\x20occured','trade','error','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','InvalidOrder','Uncaught\x20Exception:','secure','BNB/','watchOrders','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','sendPortfolioTelegram','toString','offset','enabled','2\x20-\x20Validate\x20orders:\x20','sort','ordertype','cancelLoading','YOYOW/','symbol','<b>Bot\x20','eur','Initiating\x20exchange\x20reload','remove','price','limit-high','MIN_NOTIONAL','1\x20-\x20Handle\x20open\x20orders','none','8013740TynAMo','slice','push','fetchClosedOrders','emitHistory','exchanges','removed','fee','1\x20-\x20Validate\x20orders:\x20','ORDERS.LOCKED','liquidity','getTime','1311160Kzspjv','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','emojisell','Fees\x20|\x20currency:\x20','BTC','data','hybrid-crypto-js','startprice','colorscheme','sha256','getMonth','Order(s)\x20not\x20validated\x20after\x20','recreateCoinResults()','bot-','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20value','decrypt','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','date','market','1248678QEJxFx','fetchBalance','ExchangeNotAvailable','apiSecret','configuration-stored','/EUR','includes','usd','Manual\x20balancing\x20required','Resetting\x20bot\x20history','Error:\x20Invalid\x20argument\x20','filled','exchange\x20reloaded','Cooldown\x20ended\x20-\x20balancing\x20resumed','assign','ETH','cancelOrder','recent20','Bot\x20','value','recovery','toFixed','\x20|\x20','apply','ccxt','distribution','DAI/','replace','sendMetricsTelegram','indexOf','Avoiding\x20continuous\x20order\x20attempts','format','startnumber','Binance','Order\x20filled:\x20','\x20|\x20lock\x20orders:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20-\x20bot\x20not\x20started','parseISO','substring','Market','Failed\x20to\x20load\x20coin\x20data\x20for\x20','changes','-config.json','cost','apiKey','additional\x20symbols\x20','freeze','amount','0\x20-\x20EXECUTION:\x20','set','differenceInSeconds','test','open','ongoing','\x20hour','5oUBkbK','timeshift','\x20|\x20highest:\x20','1810575ZWEzEI','Resetting\x20coin\x20results:\x20','string','001','argv','Portfolio\x20change\x20detected:\x20','getCoins()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','basecoin','target','defaults',':\x20timer\x20>','yyyy/MM/dd','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','canceled','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','length','Net\x20effect','getStartingBalances','progress','/output-000.log','warning','InsufficientFunds','USD','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','apiPassword','balances','recreate','\x20closed\x20the\x20connection','uncaughtException','splice','-events.json','shift','no\x20open\x20orders','spot','\x20exchange','bb-settings.json','\x20minutes\x20-\x20','time','fetchOpenOrders','timeout','<pre>','currency','net-basecoin','\x20:\x20','sells','percentage','2\x20-\x20Handled\x20open\x20orders','privateKey','DDoSProtection','ORDERS.UNLOCKED','Error\x20while\x20deleting\x20files:\x20','RSA-OAEP','version','bots','\x20portfolio:</b>\x20\x0a\x0a','USDT','1\x20-\x20FILLED:\x20','type','net-fiat','stringify','amountToPrecision','***','************','<b>','number','(((.+)+)+)+$','breakeven','emojibuy','./logs/','cooldown','limit','concat','Pausing\x20for\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','average','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','last','autoliquidity','remainingSymbols','debug','coin','valid','ticker','showConfig','password','split','options','\x20API\x20key\x20is\x20invalid','storeConfiguration','lowdb','restart','UNLOCKED','%\x20(','placeOrder()','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getHours','reverse','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','pro','\x20|\x20Exchange:\x20','coin-loading-progress','balancing\x20resumed','Executing\x20exchange\x20reload','total','\x20not\x20responding',':\x20Bot\x20','Bybit','full','close','NANO/','buys','logs','side','TUSD','storeHeadless','Initializing\x20coin\x20results','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','leftTxt','Limit\x20(low-margin)','fetchTickers','rightTxt','entries','added','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','starting-balances','datetime','exchange','LOCKED','delta','Exchange','fiat','search','\x20>\x20[DEBUG]\x20','unlinkSync','coins','orderstatus','BUSD','sortBy','page','botname','portfolio','highest','message','Saving\x20configuration','fetchTicker','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','-performance.json','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','max','getSeconds','Executed\x20','Order\x20is\x20invalid:\x20','get','settings','function','sell','</pre>','\x20metrics:</b>\x20\x0a\x0a','milliseconds','orderId','resetHistory','send','success','round','EUR','isEqual','startdate','Unfilled\x20order(s)\x20canceled\x20after\x20','configuration','threshold','toggleBotMode','HOT/BTC','padStart','mkdirSync','yargs/yargs','Reset\x20|\x20','final','constructor','BNB','change','log','change24h','event-history','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ask','exec','\x20>\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','running','padEnd','path','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20Custom\x20ID:\x20','toLowerCase','createOrder','getDate','2.5.0','status','has','Crypt','bot','559877vKSAuc','timestamp','getMinutes','customId','excluded','2.3.5','date-fns','getFullYear','args','2\x20-\x20Orders\x20unlocked','bid','write','filter','min','forEach','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','API-key\x20format\x20invalid','find','getPortfolio','AuthenticationError','toUpperCase','initclient','onepagemode','cloneDeep','random','-------------------------------\x0a','3\x20-\x20handling\x20FILLED\x20order:\x20','9759320fNWcsf','initial','Invalid\x20quantity'];_0x1cab=function(){return _0x179ba9;};return _0x1cab();}dbLogs[_0x4c340f(0x24f)]({'logs':[],'version':serverversion})[_0x4c340f(0x31b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4c340f(0x24f)]({'bot':[],'version':serverversion})[_0x4c340f(0x31b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4c340f(0x24f)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4c340f(0x1fe),'rsaStandard':_0x4c340f(0x279)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x44dbf3=>{const _0x5cf379=_0x4c340f;console[_0x5cf379(0x2fb)](_0x44dbf3);},'simple':_0x2d5aa0=>{const _0x198c50=_0x4c340f;console[_0x198c50(0x2fb)](_0x2d5aa0),loggerfile['write'](util[_0x198c50(0x229)](_0x2d5aa0)+'\x0a');},'full':async(_0x387ca7,_0x27508d='')=>{const _0x234f36=_0x4c340f;let _0x2b51ed;if(config['showname'])_0x2b51ed=getTimeStamp()+':\x20'+config[_0x234f36(0x2d1)]+_0x234f36(0x301)+_0x387ca7;else _0x2b51ed=getTimeStamp()+_0x234f36(0x2af)+botID+_0x234f36(0x301)+_0x387ca7;console[_0x234f36(0x2fb)](_0x2b51ed),loggerfile[_0x234f36(0x31b)](util[_0x234f36(0x229)](_0x2b51ed)+'\x0a'),_0x27508d&&(console['log'](_0x27508d),loggerfile[_0x234f36(0x31b)](util[_0x234f36(0x229)](_0x27508d)+'\x0a'));},'debug':async(_0x379386,_0x38943e='')=>{const _0x2cae2a=_0x4c340f;let _0x53e25b;if(config[_0x2cae2a(0x32f)])_0x53e25b=getTimeStamp()+':\x20'+config['botname']+_0x2cae2a(0x2ca)+_0x379386;else _0x53e25b=getTimeStamp()+_0x2cae2a(0x2af)+botID+'\x20>\x20[DEBUG]\x20'+_0x379386;if(debugging)console[_0x2cae2a(0x2fb)](_0x53e25b);loggerfile[_0x2cae2a(0x31b)](util['format'](_0x53e25b)+'\x0a');if(_0x38943e){if(debugging)console['log'](_0x38943e);loggerfile['write'](util['format'](_0x38943e)+'\x0a');}}};process['on'](_0x4c340f(0x262),function(_0x52b9d7){const _0xbf7f92=_0x4c340f;logger[_0xbf7f92(0x295)](_0xbf7f92(0x34c),_0x52b9d7);});settings['timeshift']!=config[_0x4c340f(0x243)]&&updateTimeshift(settings[_0x4c340f(0x243)]);settings[_0x4c340f(0x326)]!=config[_0x4c340f(0x326)]&&updateOnepagemode(settings[_0x4c340f(0x326)]);process[_0x4c340f(0x2e8)]({'started':_0x4c340f(0x303)},_0x5331c8=>{}),initializeProcessListeners();function proxyEmit(_0xfee164,_0x39c9db=null){const _0x1c0a9f=_0x4c340f;process[_0x1c0a9f(0x2e8)]({'function':_0xfee164,'args':_0x39c9db},_0x300e61=>{});}function initializeProcessListeners(){const _0x46df14=_0x4c340f;process['on'](_0x46df14(0x2d4),_0x1da8a9=>{const _0x13a68c=_0x46df14;switch(Object['keys'](_0x1da8a9)[0x0]){case _0x13a68c(0x243):_0x1da8a9[_0x13a68c(0x243)]!=undefined&&(settings[_0x13a68c(0x243)]=_0x1da8a9[_0x13a68c(0x243)],updateTimeshift(settings[_0x13a68c(0x243)]));break;case _0x13a68c(0x326):_0x1da8a9[_0x13a68c(0x326)]!=undefined&&(settings[_0x13a68c(0x326)]=_0x1da8a9[_0x13a68c(0x326)],updateOnepagemode(settings[_0x13a68c(0x326)]));break;case _0x13a68c(0x27b):_0x1da8a9[_0x13a68c(0x27b)]!=undefined&&(bots=JSON[_0x13a68c(0x33a)](_0x1da8a9[_0x13a68c(0x27b)]),proxyEmit(_0x13a68c(0x27b),bots));break;case _0x13a68c(0x2e1):switch(_0x1da8a9[_0x13a68c(0x2e1)]){case _0x13a68c(0x325):initclient();break;case _0x13a68c(0x2f1):toggleBotMode();break;case _0x13a68c(0x1ed):emitHistory(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x339):deleteHistoryAlerts(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x322):getPortfolio(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x29e):storeConfiguration(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x2b8):storeHeadless(_0x1da8a9[_0x13a68c(0x318)]);break;case'storeFiat':storeFiat(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x2e7):resetHistory();break;case _0x13a68c(0x257):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1da8a9[_0x13a68c(0x318)]);break;case _0x13a68c(0x1dd):cancelLoading();break;case _0x13a68c(0x299):showConfig();break;case _0x13a68c(0x226):sendMetricsTelegram();break;case _0x13a68c(0x351):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3ebebc=null,_0x390e34=![]){const _0x58e7d8=_0x4c340f;logger['debug'](_0x58e7d8(0x2f6)+(_0x3ebebc&&_0x3ebebc['length']>0x0?_0x58e7d8(0x238)+_0x3ebebc[_0x58e7d8(0x337)](','):'no\x20additional\x20symbols')+_0x58e7d8(0x220)+(_0x390e34?_0x58e7d8(0x216):'exchange\x20not\x20reloaded')+_0x58e7d8(0x2a9)+config[_0x58e7d8(0x2c4)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x390e34)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x58e7d8(0x237)]!=''&&config['apiKey']!=_0x58e7d8(0x283)){if(_0x390e34){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x38f802){handleErrorNoStop(_0x38f802,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3ebebc);const _0x5d6b80=await getCoins();[currentCoins,currentCoinsAll]=_0x5d6b80,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x58e7d8(0x255)]==0x0&&allOpenOrders[_0x58e7d8(0x255)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x31c245=_0x4c340f;exchangeStopped=!![],await exchange[_0x31c245(0x2b2)]();}async function reloadExchange(){const _0x1c45e1=_0x4c340f;logger[_0x1c45e1(0x295)](_0x1c45e1(0x1e2));while(lockOrders!=ORDERS[_0x1c45e1(0x2a1)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1c45e1(0x295)](_0x1c45e1(0x2ac)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x1a1221=config[_0x4c340f(0x2c4)],_0x30c8a4=config['apiKey'],_0x20b15f=config[_0x4c340f(0x20d)],_0x185474=config[_0x4c340f(0x25e)]){const _0x5bbc31=_0x4c340f;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x1a1221)&&(logHistory(_0x5bbc31(0x349),_0x5bbc31(0x203)+_0x1a1221+_0x5bbc31(0x268)),killBot());const _0x2f151d=ccxt[_0x1a1221['toLowerCase']()];exchange=new _0x2f151d({'apiKey':_0x30c8a4,'secret':_0x20b15f,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x1a1221==_0x5bbc31(0x2b0)&&(exchange[_0x5bbc31(0x29c)]={'defaultType':_0x5bbc31(0x267),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x185474)exchange[_0x5bbc31(0x29a)]=_0x185474;}function setStableCoins(){const _0x413397=_0x4c340f;let _0x2af80c=config[_0x413397(0x24d)]==_0x413397(0x219)?_0x413397(0x219):_0x413397(0x1f9),_0x14714b=!allSymbols[_0x413397(0x210)](_0x2af80c+'/USD')?_0x413397(0x27d):_0x413397(0x25c),_0x2a04d1=!allSymbols['includes'](_0x2af80c+_0x413397(0x20f))?_0x14714b:_0x413397(0x2eb);stablecoins={'eur':{'coin':''+_0x2af80c+_0x2a04d1,'symbol':_0x2af80c+'/'+_0x2a04d1},'usd':{'coin':''+_0x2af80c+_0x14714b,'symbol':_0x2af80c+'/'+_0x14714b}};}async function initwsCcxt(_0x3dc031){const _0x293124=_0x4c340f;_0x3dc031==null&&(_0x3dc031=[],config[_0x293124(0x2d2)][_0x293124(0x31e)](_0x347fff=>{const _0x485197=_0x293124;if(!_0x347fff[_0x485197(0x314)]&&_0x347fff['coin']!=config[_0x485197(0x24d)])_0x3dc031['push'](_0x347fff[_0x485197(0x1df)]);}));if(!_0x3dc031[_0x293124(0x210)](stablecoins[_0x293124(0x1e1)]['symbol']))_0x3dc031['push'](stablecoins[_0x293124(0x1e1)][_0x293124(0x1df)]);if(!_0x3dc031[_0x293124(0x210)](stablecoins[_0x293124(0x211)][_0x293124(0x1df)]))_0x3dc031[_0x293124(0x1eb)](stablecoins[_0x293124(0x211)][_0x293124(0x1df)]);if(config[_0x293124(0x2c4)]['startsWith'](_0x293124(0x22b))){if(!_0x3dc031['includes'](_0x293124(0x34e)+config[_0x293124(0x24d)]))_0x3dc031['push'](_0x293124(0x34e)+config[_0x293124(0x24d)]);}loadCoins(_0x3dc031);const _0x2cb45d=async _0xa8b4a=>{const _0x42012d=_0x293124,_0x2ecf51=await exchange[_0x42012d(0x2d6)](_0xa8b4a);global['ticker'][noslash(_0x2ecf51[_0x42012d(0x1df)])]=_0x2ecf51[_0x42012d(0x292)];while(!![]){if(!botPaused)try{const _0x21cb78=await exchange[_0x42012d(0x33e)](_0xa8b4a);global[_0x42012d(0x298)][noslash(_0x21cb78[0x0]['symbol'])]=_0x21cb78[0x0][_0x42012d(0x1e4)],await sleep(0x3e8);}catch(_0x31a696){if(!exchangeStopped)await handleError(_0x31a696,'watchTrades',_0xa8b4a);}else await sleep(0x64);}},_0x17c7b8=async _0x5eafa2=>{const _0x575c44=_0x293124;while(!![]){if(!botPaused)try{const _0x28415e=await exchange[_0x575c44(0x2d6)](_0x5eafa2);global[_0x575c44(0x2fa)][_0x28415e[_0x575c44(0x1df)]]=_0x28415e[_0x575c44(0x273)],await sleep(0x3c*0x3e8);}catch(_0x260aca){if(!exchangeStopped)await handleError(_0x260aca,'fetchTickers',_0x5eafa2);}else await sleep(0x64);}},_0x13c274=async()=>{const _0x1938cb=_0x293124;while(!![]){if(!botPaused)try{const _0x5ac3a5=await exchange[_0x1938cb(0x34f)]();_0x5ac3a5['forEach'](_0x374879=>{updateNumberCoinsCcxt(_0x374879);});}catch(_0x325860){if(!exchangeStopped)await handleError(_0x325860,_0x1938cb(0x34f));}else await sleep(0x64);}};_0x3dc031[_0x293124(0x31e)](_0xd0de70=>{_0x2cb45d(_0xd0de70),_0x17c7b8(_0xd0de70);}),!wsEventsSet&&(wsEventsSet=!![],_0x13c274(),watchTransactions());}async function watchTransactions(){const _0x359fcd=_0x4c340f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x104953=await getCoins(),[_0x5999ec,_0x458314]=_0x104953;let _0x3dd20f=[];currentCoins[_0x359fcd(0x31e)](_0xeb7ea6=>{const _0x972af1=_0x359fcd,_0x24e930=_0x5999ec[_0x972af1(0x321)](_0x3bf5e1=>_0x3bf5e1[_0x972af1(0x296)]==_0xeb7ea6[_0x972af1(0x296)]);_0x24e930&&(_0xeb7ea6[_0x972af1(0x286)]!=_0x24e930[_0x972af1(0x286)]&&_0x3dd20f[_0x972af1(0x1eb)]({'coin':_0xeb7ea6[_0x972af1(0x296)],'symbol':_0xeb7ea6[_0x972af1(0x1df)],'number':Number(formatResult(_0x24e930[_0x972af1(0x286)]-_0xeb7ea6[_0x972af1(0x286)],0x8))}));});if(_0x3dd20f[_0x359fcd(0x255)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x359fcd(0x1f8)+lastFees[_0x359fcd(0x26f)]+_0x359fcd(0x244)+lastFees['highest']);if(!lastFees[_0x359fcd(0x26f)]||_0x3dd20f[0x0]['coin']!=lastFees[_0x359fcd(0x26f)]||_0x3dd20f[0x0][_0x359fcd(0x286)]>lastFees['highest']){let _0x56d86f;if(_0x3dd20f[0x0][_0x359fcd(0x296)]!=config[_0x359fcd(0x24d)]){let _0x1d60f0=global['ticker'][noslash(_0x3dd20f[0x0][_0x359fcd(0x1df)])];_0x56d86f=_0x3dd20f[0x0][_0x359fcd(0x2a6)]?0x1/_0x1d60f0:_0x1d60f0;}else _0x56d86f=0x1;_0x3dd20f[0x0][_0x359fcd(0x1e4)]=_0x56d86f,delete _0x3dd20f[0x0]['symbol'];let _0x1b76c2=[],_0x507c4c=[...config[_0x359fcd(0x1f3)]]||[],_0x5d1a45=config[_0x359fcd(0x1f3)];_0x507c4c['sort']((_0x1812f3,_0x405bc6)=>_0x1812f3[_0x359fcd(0x208)]>_0x405bc6[_0x359fcd(0x208)]?-0x1:_0x405bc6[_0x359fcd(0x208)]>_0x1812f3[_0x359fcd(0x208)]?0x1:0x0);const _0x247fb0=getDate();if(_0x507c4c[0x0]){const _0x5a4d51=fns[_0x359fcd(0x33a)](_0x507c4c[0x0]['date'],_0x359fcd(0x251),new Date()),_0x4e85eb=fns[_0x359fcd(0x33a)](_0x247fb0,_0x359fcd(0x251),new Date());if(fns[_0x359fcd(0x2ec)](_0x5a4d51,_0x4e85eb)){_0x1b76c2=_0x507c4c[0x0][_0x359fcd(0x234)];const _0x25ff6d=_0x1b76c2[_0x359fcd(0x321)](_0x3533f7=>_0x3533f7['coin']==_0x3dd20f[0x0]['coin']);_0x25ff6d?(_0x25ff6d['number']+=_0x3dd20f[0x0][_0x359fcd(0x286)],_0x25ff6d['number']==0x0&&(_0x1b76c2=_0x1b76c2['filter'](_0xb4d99a=>{const _0x5ae42a=_0x359fcd;return _0xb4d99a['coin']!=_0x3dd20f[0x0][_0x5ae42a(0x296)];}))):_0x1b76c2[_0x359fcd(0x1eb)](_0x3dd20f[0x0]);const _0x39ddb6=_0x5d1a45[_0x359fcd(0x321)](_0x5b4007=>_0x5b4007[_0x359fcd(0x208)]==_0x247fb0);_0x39ddb6[_0x359fcd(0x234)]=_0x1b76c2;}else _0x5d1a45[_0x359fcd(0x1eb)]({'date':_0x247fb0,'changes':[_0x3dd20f[0x0]]});}const _0x4823e3=_0x5d1a45['find'](_0x505a0c=>_0x505a0c[_0x359fcd(0x208)]==_0x247fb0);if(_0x4823e3){let _0x6020f8=!![];_0x4823e3[_0x359fcd(0x234)][_0x359fcd(0x31e)](_0x1a948b=>{const _0x5bd20e=_0x359fcd;if(_0x1a948b[_0x5bd20e(0x286)]!=0x0)_0x6020f8=![];}),_0x6020f8&&(_0x5d1a45=_0x5d1a45[_0x359fcd(0x31c)](_0x31f5a0=>{const _0x173967=_0x359fcd;return _0x31f5a0[_0x173967(0x208)]!=_0x247fb0;}));}let _0x63b45c=dbConfig['get'](_0x359fcd(0x30f))['find']({'botID':botID})[_0x359fcd(0x21d)]();_0x63b45c&&(dbConfig[_0x359fcd(0x2df)]('bot')[_0x359fcd(0x321)]({'botID':botID})[_0x359fcd(0x218)]({'liquidity':_0x5d1a45})[_0x359fcd(0x31b)](),config['liquidity']=_0x5d1a45),logHistory(_0x359fcd(0x2e9),_0x359fcd(0x24a)+Math['abs'](_0x3dd20f[0x0][_0x359fcd(0x286)])+'\x20'+_0x3dd20f[0x0][_0x359fcd(0x296)]+'\x20'+(_0x3dd20f[0x0]['number']>0x0?_0x359fcd(0x2c0):_0x359fcd(0x1ef))+_0x359fcd(0x2d8)),proxyEmit(_0x359fcd(0x2ef),emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x359fcd(0x345)](_0x3dd20f[0x0]['number'])+'\x20'+_0x3dd20f[0x0][_0x359fcd(0x296)]+'\x20'+(_0x3dd20f[0x0]['number']>0x0?_0x359fcd(0x2c0):'removed'));transactionDetected=!![],currentCoins=_0x5999ec,currentCoinsAll=_0x458314;}else logger[_0x359fcd(0x295)]('Portfolio\x20change\x20detected:\x20'+Math[_0x359fcd(0x345)](_0x3dd20f[0x0]['number'])+'\x20'+_0x3dd20f[0x0][_0x359fcd(0x296)]+'\x20'+(_0x3dd20f[0x0]['number']>0x0?'added':'removed')+_0x359fcd(0x28f)),currentCoins=_0x5999ec,currentCoinsAll=_0x458314;}await sleep(watchTransactionsInterval);}catch(_0x19a472){if(!exchangeStopped)await handleError(_0x19a472,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x531d63=config[_0x4c340f(0x2c4)],_0x1de4d6=![]){const _0x2a8e5f=_0x4c340f;if(allSymbols&&!_0x1de4d6)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange['symbols'][_0x2a8e5f(0x31c)](_0x135de9=>{const _0x386e33=_0x2a8e5f;let _0x3ba08d=![];const _0x140928=exceptions[_0x531d63[_0x386e33(0x308)]()]||[];return _0x140928[_0x386e33(0x31e)](_0x104bb0=>{const _0x15a7e5=_0x386e33;if(_0x135de9[_0x15a7e5(0x210)](_0x104bb0))_0x3ba08d=!![];}),!_0x3ba08d;});}catch(_0x30b73b){throw _0x30b73b;}}async function initclient(){const _0x659de=_0x4c340f;emitLoadingProgress(),proxyEmit(_0x659de(0x2ef),emittedConfiguration()),proxyEmit(_0x659de(0x1ee),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x172c7a=getNormalizedPerformance();emitPerformance(_0x172c7a),getStartingBalances(_0x172c7a);}async function toggleBotMode(){const _0x5a8a78=_0x4c340f;let _0x449dde=dbConfig['get'](_0x5a8a78(0x30f))[_0x5a8a78(0x321)]({'botID':botID})[_0x5a8a78(0x21d)]();if(_0x449dde){const _0x438602=!_0x449dde[_0x5a8a78(0x33f)];dbConfig[_0x5a8a78(0x2df)](_0x5a8a78(0x30f))['find']({'botID':botID})['assign']({'headless':_0x438602})[_0x5a8a78(0x31b)](),config['headless']=_0x438602,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3e8eee=_0x4c340f;process[_0x3e8eee(0x2e8)]({'updatebotmanager':!![]},_0x4d1ac9=>{});}async function loadCoins(_0x5b0383){const _0x189480=_0x4c340f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x5d457a,_0x2d0ee3=0x0,_0x305252=0x0;_0x5b0383['forEach'](_0x5adca9=>{const _0x3e6195=_0x456f;loading[_0x3e6195(0x294)][_0x3e6195(0x1eb)](_0x5adca9);}),loadingCanceled=![];let _0x5602f3=![];while(_0x5d457a!=_0x5b0383[_0x189480(0x255)]){_0x5d457a=0x0,_0x5b0383[_0x189480(0x31e)](_0x2302d6=>{const _0x118554=_0x189480;if(global[_0x118554(0x298)][noslash(_0x2302d6)]){loading['remainingSymbols']=loading[_0x118554(0x294)][_0x118554(0x31c)](_0x261ce8=>_0x261ce8!=_0x2302d6);if(!watchedSymbols[_0x118554(0x210)](_0x2302d6))watchedSymbols['push'](_0x2302d6);_0x5d457a++;}}),loading[_0x189480(0x258)]=Math['round'](_0x5d457a/_0x5b0383[_0x189480(0x255)]*0x64);loading[_0x189480(0x258)]!=0x64&&(_0x305252>0x1e*0x5&&(loading[_0x189480(0x26d)]=!![],emitLoadingProgress()),_0x305252>0x78*0x5&&!_0x5602f3&&(loading[_0x189480(0x344)]=!![],emitLoadingProgress(),_0x5602f3=!![],logHistory(_0x189480(0x349),_0x189480(0x233)+loading[_0x189480(0x294)]['join'](',\x20')+_0x189480(0x22f)),logHistory('error',_0x189480(0x28e)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x23b367=_0x189480;process['send']({'stop':_0x23b367(0x2a0)},_0x51e7a1=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x5d457a!=_0x2d0ee3&&(_0x2d0ee3=_0x5d457a,emitLoadingProgress()),_0x305252++,await sleep(0xc8);}_0x5d457a==_0x5b0383[_0x189480(0x255)]&&(coinsLoaded=!![],process['send']({'status':_0x189480(0x354),'live':_0x189480(0x303)},_0x4f5f58=>{}),_0x5602f3&&logHistory('success',_0x189480(0x2c1)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x58bbee=_0x4c340f;proxyEmit(_0x58bbee(0x2aa),loading);}async function getFiat(){const _0x3fc779=_0x4c340f;let _0x591dcc=global[_0x3fc779(0x298)][stablecoins[_0x3fc779(0x1e1)][_0x3fc779(0x296)]],_0x54869c=global[_0x3fc779(0x298)][stablecoins[_0x3fc779(0x211)][_0x3fc779(0x296)]];return{'eur':Number(_0x591dcc),'usd':Number(_0x54869c)};}function capitalize(_0x1353c4){const _0x47561e=_0x4c340f;return _0x1353c4[_0x47561e(0x231)](0x0,0x1)[_0x47561e(0x324)]()+_0x1353c4[_0x47561e(0x231)](0x1);}function supportedExchanges(){const _0xcece67=_0x4c340f,_0x1fb70d=['ws','fetchTickers',_0xcece67(0x2d6),_0xcece67(0x33e),_0xcece67(0x34f),_0xcece67(0x21a),_0xcece67(0x309),_0xcece67(0x26c),_0xcece67(0x1ec),_0xcece67(0x20b)];let _0x520ff1=[],_0x1e106=[],_0x101a4a=ccxt[_0xcece67(0x1ee)];_0x101a4a['forEach'](_0x394b05=>{try{const _0x3392a8=new ccxt[_0x394b05]();if(_0x3392a8['has']['ws'])_0x1e106['push'](_0x3392a8);}catch(_0x3bbcb2){}}),_0x1e106[_0xcece67(0x31e)](_0x564633=>{const _0x5e2377=_0xcece67;let _0x4d69fc=0x0;_0x1fb70d[_0x5e2377(0x31e)](_0x13aff1=>{const _0x5c6e42=_0x5e2377;_0x13aff1 in _0x564633[_0x5c6e42(0x30d)]&&_0x564633[_0x5c6e42(0x30d)][_0x13aff1]&&_0x4d69fc++;}),_0x4d69fc==_0x1fb70d[_0x5e2377(0x255)]&&_0x520ff1[_0x5e2377(0x1eb)](capitalize(_0x564633['id']));});let _0x1eed49=[];return _0x101a4a[_0xcece67(0x31e)](_0x4b864f=>{const _0x4b2771=_0xcece67;_0x4b864f=capitalize(_0x4b864f);if(!_0x520ff1[_0x4b2771(0x210)](_0x4b864f))_0x1eed49['push'](_0x4b864f);}),_0x520ff1;}function setStartDatePerformance(){const _0x239944=_0x4c340f;if(config&&config[_0x239944(0x1f3)][0x0][_0x239944(0x234)][_0x239944(0x255)]!=0x0){const _0x3f20a4=config[_0x239944(0x1f3)][0x0][_0x239944(0x234)];dbPerformance[_0x239944(0x2df)]('data')['find']({'date':config[_0x239944(0x2ed)]})[_0x239944(0x218)]({'coins':_0x3f20a4})[_0x239944(0x31b)]();}}async function recreateCoinResults(){const _0x476d6e=_0x4c340f;let _0x35174e,_0x4f6c56=[];try{const _0x1cd595=fns[_0x476d6e(0x229)](fns[_0x476d6e(0x230)](config[_0x476d6e(0x2ed)][_0x476d6e(0x225)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x91adc1 of currentCoins){if(_0x91adc1[_0x476d6e(0x296)]!=config['basecoin']){let _0xbca838=0x0,_0x5822b6,_0x5c4456;_0x35174e=await getAllEventOrders(_0x91adc1['symbol']);if(_0x35174e['length']>0x0)_0x35174e[_0x476d6e(0x31e)](_0x31ef5c=>{const _0x3dc926=_0x476d6e,_0x32503f=_0x91adc1[_0x3dc926(0x1df)][_0x3dc926(0x210)](config[_0x3dc926(0x24d)]+'/');_0x4f6c56['push']({'datetime':_0x31ef5c['datetime'],'coin':_0x91adc1[_0x3dc926(0x296)],'symbol':_0x91adc1[_0x3dc926(0x1df)],'side':_0x31ef5c['side'],'reverse':_0x32503f,'amount':formatResult(_0x31ef5c[_0x3dc926(0x215)],0x8),'filled':formatResult(_0x31ef5c[_0x3dc926(0x215)],0x8),'price':formatResult(_0x31ef5c[_0x3dc926(0x1e4)],0x8)}),_0xbca838=_0x31ef5c[_0x3dc926(0x2b6)]==_0x3dc926(0x341)?_0xbca838+_0x31ef5c[_0x3dc926(0x215)]:_0xbca838-_0x31ef5c[_0x3dc926(0x215)];if(!_0x5c4456)_0x5c4456=_0x31ef5c['price'];});_0x5822b6=_0x91adc1[_0x476d6e(0x286)]-_0xbca838;let _0x54958b;config['liquidity'][_0x476d6e(0x31e)](_0xddb4d0=>{const _0xa59713=_0x476d6e;!_0x54958b&&(_0x54958b=_0xddb4d0[_0xa59713(0x234)][_0xa59713(0x321)](_0x5b7cb3=>_0x5b7cb3[_0xa59713(0x296)]==_0x91adc1[_0xa59713(0x296)]),_0x54958b&&(_0x5822b6=_0x54958b['number'],_0x5c4456=_0x54958b['price']));});let _0x27f1c3=dbCoinResults[_0x476d6e(0x2df)](_0x476d6e(0x2cc))['find']({'coin':_0x91adc1['coin']})[_0x476d6e(0x21d)]();_0x27f1c3={'coin':_0x91adc1[_0x476d6e(0x296)],'number':_0x5822b6,'breakeven':_0x5c4456,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x476d6e(0x2df)]('coins')[_0x476d6e(0x321)]({'coin':_0x91adc1['coin']})[_0x476d6e(0x218)](_0x27f1c3)['write']();}}_0x4f6c56[_0x476d6e(0x1db)]((_0x4c24f8,_0x37c95e)=>_0x4c24f8[_0x476d6e(0x2c3)]>_0x37c95e[_0x476d6e(0x2c3)]?0x1:_0x37c95e[_0x476d6e(0x2c3)]>_0x4c24f8[_0x476d6e(0x2c3)]?-0x1:0x0);let _0x36d5c0=0x0;for(let _0x5f273d of _0x4f6c56){await updateCoinResults(_0x5f273d,!![]);}}catch(_0x32c2ce){await handleError(_0x32c2ce,_0x476d6e(0x201));}}async function getAllEventOrders(_0x1c8a00){const _0x3aaabf=_0x4c340f;let _0x69511=[],_0xbfaf12=dbLogs[_0x3aaabf(0x2df)](_0x3aaabf(0x2b5))[_0x3aaabf(0x31c)](_0x8c4e8d=>{const _0x2cae8f=_0x3aaabf,_0x48e089=_0x8c4e8d[_0x2cae8f(0x340)][_0x2cae8f(0x308)]();return _0x48e089[_0x2cae8f(0x210)](_0x1c8a00['toLowerCase']())&&(_0x48e089[_0x2cae8f(0x210)](_0x2cae8f(0x209))&&_0x48e089[_0x2cae8f(0x210)](_0x2cae8f(0x33b))||_0x48e089[_0x2cae8f(0x210)]('filled')&&_0x48e089['includes'](_0x2cae8f(0x33b)));})[_0x3aaabf(0x2cf)](_0x3aaabf(0x26b))['value']();return _0xbfaf12[_0x3aaabf(0x31e)](_0xa74cf3=>{const _0x696a76=_0x3aaabf,_0x34babc=_0xa74cf3[_0x696a76(0x340)][_0x696a76(0x210)]('sell')?_0x696a76(0x2e2):'buy',_0x2b2801=/#([0-9]|\.)+\s/i,_0x50b40c=Number(_0x2b2801[_0x696a76(0x300)](_0xa74cf3[_0x696a76(0x340)])[0x0][_0x696a76(0x1ea)](0x1)),_0xb0dd83=/@([0-9]|\.)+$/i,_0x22b977=Number(_0xb0dd83[_0x696a76(0x300)](_0xa74cf3['event'])[0x0][_0x696a76(0x1ea)](0x1));_0x69511['push']({'datetime':_0xa74cf3[_0x696a76(0x26b)],'coin':symbolToCoin(_0x1c8a00),'symbol':_0x1c8a00,'side':_0x34babc,'amount':_0x50b40c,'filled':_0x50b40c,'price':_0x22b977});}),_0x69511;}async function getAllOrders(_0x4639c4,_0x4f5d26){const _0x4e2d90=_0x4c340f;let _0x56f2d3=[];while(_0x4f5d26<exchange[_0x4e2d90(0x2e5)]()){const _0xa7c100=0x1f4,_0x2bab24=await exchange[_0x4e2d90(0x1ec)](_0x4639c4,_0x4f5d26,_0xa7c100);if(_0x2bab24[_0x4e2d90(0x255)])_0x4f5d26=_0x2bab24[_0x2bab24[_0x4e2d90(0x255)]-0x1]['timestamp']+0x1,_0x56f2d3=_0x56f2d3[_0x4e2d90(0x28d)](_0x2bab24);else break;}return _0x56f2d3;}async function validate24hChanges(){const _0x3b7141=_0x4c340f;for(const _0x1dfc22 of currentCoins){if(_0x1dfc22['coin']!=config[_0x3b7141(0x24d)]){let _0x505524;_0x1dfc22[_0x3b7141(0x2a6)]?_0x505524=formatResult((0x1/(global['change'][noslash(_0x1dfc22[_0x3b7141(0x1df)])]/0x64+0x1)-0x1)*0x64,0x3):_0x505524=global[_0x3b7141(0x2fa)][noslash(_0x1dfc22['symbol'])],_0x505524<config[_0x3b7141(0x2fc)]&&(logHistory(_0x3b7141(0x349),_0x1dfc22[_0x3b7141(0x296)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x505524+'%'),logHistory(_0x3b7141(0x349),_0x3b7141(0x350)),logHistory(_0x3b7141(0x349),_0x3b7141(0x2da)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x400ee0,_0x3767e8){const _0x33c044=_0x4c340f;if(!_0x400ee0)return!![];const _0x39e687=_0x3767e8[_0x33c044(0x29b)]('.'),_0x1e3802=_0x400ee0[_0x33c044(0x29b)]('.');for(var _0x373eef=0x0;_0x373eef<_0x1e3802[_0x33c044(0x255)];_0x373eef++){const _0x3d1a97=~~_0x1e3802[_0x373eef],_0x578ba8=~~_0x39e687[_0x373eef];if(_0x3d1a97<_0x578ba8)return!![];if(_0x3d1a97>_0x578ba8)return![];}return![];}async function oneTimeMigration(){const _0x18cbda=_0x4c340f;let _0x1e1b18=dbLogs[_0x18cbda(0x2df)](_0x18cbda(0x27a))[_0x18cbda(0x21d)]();if(isOlderVersion(_0x1e1b18,_0x18cbda(0x315))){let _0x447646=[];const _0x5d8257=dbLogs[_0x18cbda(0x2df)](_0x18cbda(0x2b5))[_0x18cbda(0x21d)]();_0x5d8257[_0x18cbda(0x31e)](_0x3d5c14=>{const _0x48723e=_0x18cbda;_0x447646[_0x48723e(0x1eb)]({'time':_0x3d5c14['time'],'type':_0x3d5c14[_0x48723e(0x27f)],'event':_0x3d5c14['event']});}),dbLogs['get'](_0x18cbda(0x2b5))[_0x18cbda(0x218)](_0x447646)[_0x18cbda(0x31b)]();}let _0x9ad201=dbConfig[_0x18cbda(0x2df)]('version')['value']();if(isOlderVersion(_0x9ad201,_0x18cbda(0x315))){let _0x5e3205=dbConfig[_0x18cbda(0x2df)](_0x18cbda(0x30f))[_0x18cbda(0x321)]({'botID':botID})[_0x18cbda(0x21d)]();if(_0x5e3205){let _0x6442ee=[];_0x5e3205['portfolio'][_0x18cbda(0x31e)](_0x10f0b5=>{const _0x56ebe0=_0x18cbda;_0x6442ee[_0x56ebe0(0x1eb)]({'coin':_0x10f0b5[_0x56ebe0(0x296)],'number':_0x10f0b5[_0x56ebe0(0x22a)],'price':_0x10f0b5[_0x56ebe0(0x1fc)]}),delete _0x10f0b5[_0x56ebe0(0x22a)],delete _0x10f0b5[_0x56ebe0(0x1fc)];});if(_0x6442ee[_0x18cbda(0x255)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x18cbda(0x281)](_0x6442ee,null,0x4),function(_0x400714){if(_0x400714){}});const _0x71baec=(_0x2e80c5,_0x4c161b)=>{const _0x880e14=_0x18cbda;let _0x217cf7=[];_0x4c161b[_0x880e14(0x31e)](_0x28b77c=>{const _0x2c4758=_0x880e14,_0x3ba344=_0x2e80c5['find'](_0x34d51a=>_0x34d51a[_0x2c4758(0x296)]==_0x28b77c[_0x2c4758(0x296)]);if(!_0x3ba344)_0x217cf7[_0x2c4758(0x1eb)](_0x28b77c);});let _0x23ea3d=[];return _0x2e80c5[_0x880e14(0x31e)](_0x1783b5=>{const _0x1d41aa=_0x880e14,_0x5bb416=_0x4c161b['find'](_0x371694=>_0x371694[_0x1d41aa(0x296)]==_0x1783b5[_0x1d41aa(0x296)]);if(!_0x5bb416||_0x5bb416['number']==0x0&&_0x1783b5[_0x1d41aa(0x286)]!=0x0)_0x23ea3d[_0x1d41aa(0x1eb)](_0x1783b5);}),{'missingDay1':_0x217cf7,'notInDay2':_0x23ea3d};},_0x1f223a=dbPerformance[_0x18cbda(0x2df)](_0x18cbda(0x1fa))[_0x18cbda(0x327)]()[_0x18cbda(0x21d)]();if(_0x1f223a[_0x18cbda(0x255)]>0x1){const {missingDay1:_0x591ad7,notInDay2:_0x18de9d}=_0x71baec(_0x6442ee,_0x1f223a[0x1][_0x18cbda(0x2cc)]);_0x6442ee=[..._0x6442ee,..._0x591ad7],_0x18de9d['forEach'](_0x5ef6bb=>{const _0x35e47e=_0x18cbda;let _0x5545f8=_0x6442ee['findIndex'](_0x247c30=>_0x247c30[_0x35e47e(0x296)]==_0x5ef6bb['coin']);_0x5545f8!=-0x1&&_0x6442ee['splice'](_0x5545f8,0x1);});}_0x6442ee[_0x18cbda(0x1db)]((_0x1462cb,_0x21455b)=>_0x1462cb[_0x18cbda(0x296)]>_0x21455b[_0x18cbda(0x296)]?0x1:_0x21455b[_0x18cbda(0x296)]>_0x1462cb['coin']?-0x1:0x0);let _0x2ad788=[{'date':_0x5e3205[_0x18cbda(0x2ed)],'changes':_0x6442ee}];_0x1f223a[_0x18cbda(0x255)]>0x2&&_0x1f223a['forEach']((_0x5c3c31,_0x2372dd)=>{const _0x199cb0=_0x18cbda;if(_0x2372dd>0x0&&_0x2372dd<_0x1f223a[_0x199cb0(0x255)]-0x1){const {missingDay1:_0xf75b14,notInDay2:_0x2afc6c}=_0x71baec(_0x1f223a[_0x2372dd][_0x199cb0(0x2cc)],_0x1f223a[_0x2372dd+0x1]['coins']);_0x6442ee=[],(_0xf75b14[_0x199cb0(0x255)]!=0x0||_0x2afc6c[_0x199cb0(0x255)]!=0x0)&&(_0xf75b14['length']!=0x0&&_0x6442ee['push'](..._0xf75b14),_0x2afc6c[_0x199cb0(0x255)]!=0x0&&(_0x2afc6c[_0x199cb0(0x31e)](_0x2f2f3f=>{const _0x2191fc=_0x199cb0;_0x2f2f3f[_0x2191fc(0x286)]=-_0x2f2f3f['number'];}),_0x6442ee[_0x199cb0(0x1eb)](..._0x2afc6c)),_0x6442ee[_0x199cb0(0x1db)]((_0x1d2be8,_0x554ee4)=>_0x1d2be8[_0x199cb0(0x296)]>_0x554ee4[_0x199cb0(0x296)]?0x1:_0x554ee4[_0x199cb0(0x296)]>_0x1d2be8[_0x199cb0(0x296)]?-0x1:0x0),_0x2ad788[_0x199cb0(0x1eb)]({'date':_0x1f223a[_0x2372dd+0x1][_0x199cb0(0x208)],'changes':_0x6442ee}));}}),dbConfig[_0x18cbda(0x2df)]('bot')[_0x18cbda(0x321)]({'botID':botID})[_0x18cbda(0x218)]({..._0x5e3205,'liquidity':_0x2ad788})[_0x18cbda(0x31b)]();}}if(isOlderVersion(_0x9ad201,'2.6.0')){let _0x41fc67=dbConfig[_0x18cbda(0x2df)]('bot')[_0x18cbda(0x321)]({'botID':botID})[_0x18cbda(0x21d)]();if(_0x41fc67){const _0x4a2691=_0x41fc67[_0x18cbda(0x2c4)],_0x4958bb=_0x4a2691?capitalize(_0x4a2691):'Binance';dbConfig['get'](_0x18cbda(0x30f))[_0x18cbda(0x321)]({'botID':botID})['assign']({'exchange':_0x4958bb})['write']();}}let _0xe0b461=dbPerformance[_0x18cbda(0x2df)]('version')[_0x18cbda(0x21d)]();isOlderVersion(_0xe0b461,'2.3.5')&&setStartDatePerformance();let _0x476cef=dbCoinResults['get'](_0x18cbda(0x27a))[_0x18cbda(0x21d)]();if(isOlderVersion(_0x476cef,_0x18cbda(0x30b))){let _0x58d532=dbCoinResults['get']('coins')[_0x18cbda(0x21d)]();if(_0x58d532[_0x18cbda(0x255)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3abbb6=_0x4c340f;dbConfig[_0x3abbb6(0x23c)]('version',serverversion)[_0x3abbb6(0x31b)](),dbPerformance[_0x3abbb6(0x23c)](_0x3abbb6(0x27a),serverversion)[_0x3abbb6(0x31b)](),dbLogs[_0x3abbb6(0x23c)](_0x3abbb6(0x27a),serverversion)[_0x3abbb6(0x31b)](),dbCoinResults['set'](_0x3abbb6(0x27a),serverversion)['write']();}function getConfiguration(_0x191189){const _0xda96fe=_0x4c340f;let _0x2dcdea=dbConfig[_0xda96fe(0x2df)](_0xda96fe(0x30f))['find']({'botID':_0x191189})[_0xda96fe(0x21d)]();if(_0x2dcdea){let _0x26eefb=![];typeof _0x2dcdea[_0xda96fe(0x2f0)]==_0xda96fe(0x247)&&(_0x2dcdea={..._0x2dcdea,'threshold':Number(_0x2dcdea['threshold'])},_0x26eefb=!![]),_0x2dcdea['change24h']==null&&(_0x2dcdea={..._0x2dcdea,'change24h':-0x14},_0x26eefb=!![]),!_0x2dcdea[_0xda96fe(0x2c8)]&&(_0x2dcdea={..._0x2dcdea,'fiat':'USD'},_0x26eefb=!![]),!_0x2dcdea['onepagemode']&&(_0x2dcdea={..._0x2dcdea,'onepagemode':settings[_0xda96fe(0x326)]},_0x26eefb=!![]),!_0x2dcdea[_0xda96fe(0x1fd)]&&(_0x2dcdea={..._0x2dcdea,'colorscheme':'red_yellow_blue'},_0x26eefb=!![]),!_0x2dcdea[_0xda96fe(0x293)]&&(_0x2dcdea={..._0x2dcdea,'autoliquidity':!![]},_0x26eefb=!![]),_0x26eefb&&(_0x2dcdea={'botID':_0x2dcdea['botID'],'exchange':_0x2dcdea[_0xda96fe(0x2c4)],'apiKey':_0x2dcdea['apiKey'],'apiSecret':_0x2dcdea[_0xda96fe(0x20d)],'apiPassword':_0x2dcdea['apiPassword'],'basecoin':_0x2dcdea['basecoin'],'botname':_0x2dcdea[_0xda96fe(0x2d1)],'showname':_0x2dcdea['showname'],'threshold':_0x2dcdea['threshold'],'ordertype':_0x2dcdea[_0xda96fe(0x1dc)],'timeout':_0x2dcdea[_0xda96fe(0x26d)],'fiat':_0x2dcdea[_0xda96fe(0x2c8)],'startdate':_0x2dcdea[_0xda96fe(0x2ed)],'recreate':_0x2dcdea[_0xda96fe(0x260)],'timeshift':_0x2dcdea[_0xda96fe(0x243)],'onepagemode':_0x2dcdea[_0xda96fe(0x326)],'headless':_0x2dcdea[_0xda96fe(0x33f)],'cooldown':_0x2dcdea['cooldown'],'change24h':_0x2dcdea[_0xda96fe(0x2fc)],'emojibuy':_0x2dcdea[_0xda96fe(0x289)],'emojisell':_0x2dcdea['emojisell'],'colorscheme':_0x2dcdea[_0xda96fe(0x1fd)],'portfolio':_0x2dcdea['portfolio'],'autoliquidity':_0x2dcdea['autoliquidity'],'liquidity':_0x2dcdea['liquidity'],'openOrders':_0x2dcdea[_0xda96fe(0x332)]},dbConfig['get'](_0xda96fe(0x30f))['remove']()['write'](),dbConfig['get'](_0xda96fe(0x30f))['push'](_0x2dcdea)[_0xda96fe(0x31b)]());}else _0x2dcdea={'botID':_0x191189,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xda96fe(0x21c)+_0x191189,'showname':![],'threshold':0x3,'ordertype':_0xda96fe(0x209),'timeout':0x14,'fiat':_0xda96fe(0x25c),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xda96fe(0x243)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2dcdea;}function emittedConfiguration(){const _0x4e82dc=_0x4c340f;let _0x2888b8;if(config[_0x4e82dc(0x237)]=='')_0x2888b8={...config,'configstate':'initial'};else config[_0x4e82dc(0x237)]==_0x4e82dc(0x283)?_0x2888b8={...config,'configstate':_0x4e82dc(0x21e)}:(_0x2888b8={...config,'apiKey':_0x4e82dc(0x284),'apiSecret':'************'},config[_0x4e82dc(0x25e)]&&(_0x2888b8[_0x4e82dc(0x25e)]='************'));return _0x2888b8;}function getSettings(){const _0xafc527=_0x4c340f;return dbSettings[_0xafc527(0x2df)](_0xafc527(0x2e0))[_0xafc527(0x21d)]();}function getSecure(){const _0x598b90=_0x4c340f;return dbSecure[_0x598b90(0x2df)](_0x598b90(0x34d))[_0x598b90(0x21d)]()||{};}function updateTimeshift(_0x1cec94){const _0x1ae71f=_0x4c340f;let _0x434a69=dbConfig[_0x1ae71f(0x2df)](_0x1ae71f(0x30f))[_0x1ae71f(0x321)]({'botID':botID})['value']();_0x434a69&&dbConfig[_0x1ae71f(0x2df)](_0x1ae71f(0x30f))[_0x1ae71f(0x321)]({'botID':botID})['assign']({'timeshift':_0x1cec94})[_0x1ae71f(0x31b)](),config['timeshift']=_0x1cec94,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x392833){const _0x44cc92=_0x4c340f;let _0x8d8fb4=dbConfig[_0x44cc92(0x2df)]('bot')[_0x44cc92(0x321)]({'botID':botID})[_0x44cc92(0x21d)]();_0x8d8fb4&&dbConfig['get'](_0x44cc92(0x30f))[_0x44cc92(0x321)]({'botID':botID})[_0x44cc92(0x218)]({'onepagemode':_0x392833})[_0x44cc92(0x31b)](),config[_0x44cc92(0x326)]=_0x392833,proxyEmit(_0x44cc92(0x2ef),emittedConfiguration());}async function storeConfiguration(_0x15d7d7){const _0x5bd3a7=_0x4c340f;logger[_0x5bd3a7(0x295)](_0x5bd3a7(0x2d5));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5bd3a7(0x295)]('Transaction\x20detection\x20blocked');let _0x1fe3c5=[],_0x18f640=![],_0x4b7cf0=![],_0x24878f=[];_0x15d7d7[_0x5bd3a7(0x2d2)]['forEach'](_0x5c3ab7=>{const _0x8dfb0=_0x5bd3a7;if(!_0x5c3ab7['excluded']&&_0x5c3ab7[_0x8dfb0(0x296)]!=_0x15d7d7[_0x8dfb0(0x24d)])_0x24878f[_0x8dfb0(0x1eb)](_0x5c3ab7[_0x8dfb0(0x1df)]);}),_0x24878f[_0x5bd3a7(0x31e)](_0x1133b0=>{const _0x15821e=_0x5bd3a7,_0x173ac5=watchedSymbols[_0x15821e(0x210)](_0x1133b0);!_0x173ac5&&_0x1fe3c5['push'](_0x1133b0);}),_0x24878f[_0x5bd3a7(0x31e)](_0x279c02=>{const _0x171d42=_0x5bd3a7,_0x177ed0=currentCoins[_0x171d42(0x321)](_0x15815a=>_0x15815a[_0x171d42(0x1df)]==_0x279c02);!_0x177ed0&&(_0x18f640=!![]);}),currentCoins[_0x5bd3a7(0x31e)](_0x56934e=>{const _0x4c4a33=_0x5bd3a7;if(_0x56934e[_0x4c4a33(0x296)]!=config[_0x4c4a33(0x24d)]){const _0x475fc4=_0x24878f['find'](_0x532e30=>_0x532e30==_0x56934e[_0x4c4a33(0x1df)]);!_0x475fc4&&(_0x18f640=!![]);}}),_0x15d7d7[_0x5bd3a7(0x2d2)][_0x5bd3a7(0x31e)](_0x332729=>{const _0x1e505d=_0x5bd3a7,_0xdd62d1=config[_0x1e505d(0x2d2)]['find'](_0x2c013e=>_0x2c013e[_0x1e505d(0x296)]==_0x332729[_0x1e505d(0x296)]);if(_0xdd62d1&&_0x332729['offset']!=_0xdd62d1['offset'])_0x4b7cf0=!![];});let _0x403e37=dbConfig[_0x5bd3a7(0x2df)](_0x5bd3a7(0x30f))[_0x5bd3a7(0x321)]({'botID':botID})['value']();_0x15d7d7={..._0x15d7d7,'apiKey':crypt[_0x5bd3a7(0x206)](secure['privateKey'],_0x15d7d7['apiKey'])[_0x5bd3a7(0x2d4)],'apiSecret':crypt[_0x5bd3a7(0x206)](secure['privateKey'],_0x15d7d7[_0x5bd3a7(0x20d)])[_0x5bd3a7(0x2d4)]};_0x15d7d7[_0x5bd3a7(0x25e)]&&(_0x15d7d7[_0x5bd3a7(0x25e)]=crypt[_0x5bd3a7(0x206)](secure[_0x5bd3a7(0x275)],_0x15d7d7[_0x5bd3a7(0x25e)])[_0x5bd3a7(0x2d4)]);let _0x2dda51=![];if(_0x403e37){_0x15d7d7[_0x5bd3a7(0x237)]=='************'?_0x15d7d7[_0x5bd3a7(0x237)]=config[_0x5bd3a7(0x237)]:_0x2dda51=!![];_0x15d7d7[_0x5bd3a7(0x20d)]=='************'?_0x15d7d7[_0x5bd3a7(0x20d)]=config[_0x5bd3a7(0x20d)]:_0x2dda51=!![];if(_0x15d7d7[_0x5bd3a7(0x25e)]=='************')_0x15d7d7[_0x5bd3a7(0x25e)]=config[_0x5bd3a7(0x25e)];else{if(_0x15d7d7[_0x5bd3a7(0x25e)])_0x2dda51=!![];}dbConfig[_0x5bd3a7(0x2df)]('bot')['find']({'botID':botID})[_0x5bd3a7(0x218)](_0x15d7d7)[_0x5bd3a7(0x31b)]();}else dbConfig[_0x5bd3a7(0x2df)]('bot')['push'](_0x15d7d7)['write'](),_0x2dda51=!![],process[_0x5bd3a7(0x2e8)]({'status':'enabled','live':_0x5bd3a7(0x303)},_0x379f35=>{});process[_0x5bd3a7(0x2e8)]({'botname':_0x15d7d7[_0x5bd3a7(0x2d1)]},_0x154f43=>{}),updateBotManager(),config={..._0x15d7d7},proxyEmit(_0x5bd3a7(0x20e)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2dda51)await reset(_0x1fe3c5,!![]);else _0x18f640||_0x4b7cf0?await reset(_0x1fe3c5,![]):getBalances();blockTransactionDetection=![],logger[_0x5bd3a7(0x295)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x48442f){const _0x1f312c=_0x4c340f,_0x34f3d8={...config,'headless':_0x48442f[_0x1f312c(0x33f)]};let _0x1bfb78=dbConfig['get'](_0x1f312c(0x30f))[_0x1f312c(0x321)]({'botID':botID})['value']();_0x1bfb78&&dbConfig[_0x1f312c(0x2df)]('bot')[_0x1f312c(0x321)]({'botID':botID})[_0x1f312c(0x218)](_0x34f3d8)['write'](),config={..._0x34f3d8},updateBotManager(),proxyEmit(_0x1f312c(0x2ef),emittedConfiguration());}async function storeFiat(_0x451c19){const _0x4c2d5f=_0x4c340f,_0x1196d9={...config,'fiat':_0x451c19};let _0xfcafe4=dbConfig[_0x4c2d5f(0x2df)](_0x4c2d5f(0x30f))[_0x4c2d5f(0x321)]({'botID':botID})[_0x4c2d5f(0x21d)]();_0xfcafe4&&dbConfig[_0x4c2d5f(0x2df)](_0x4c2d5f(0x30f))[_0x4c2d5f(0x321)]({'botID':botID})[_0x4c2d5f(0x218)](_0x1196d9)['write'](),config={..._0x1196d9},proxyEmit(_0x4c2d5f(0x2ef),emittedConfiguration());}function resetHistory(){const _0x4f4f30=_0x4c340f;logger[_0x4f4f30(0x2b1)](_0x4f4f30(0x213));try{if(fs['existsSync'](path['join'](configpath,_0x4f4f30(0x202)+botID+_0x4f4f30(0x264))))fs[_0x4f4f30(0x2cb)](path[_0x4f4f30(0x337)](configpath,_0x4f4f30(0x202)+botID+_0x4f4f30(0x264)));if(fs[_0x4f4f30(0x32e)](path[_0x4f4f30(0x337)](configpath,_0x4f4f30(0x202)+botID+'-performance.json')))fs[_0x4f4f30(0x2cb)](path[_0x4f4f30(0x337)](configpath,_0x4f4f30(0x202)+botID+_0x4f4f30(0x2d9)));if(fs['existsSync'](path['join'](configpath,_0x4f4f30(0x202)+botID+_0x4f4f30(0x335))))fs[_0x4f4f30(0x2cb)](path[_0x4f4f30(0x337)](configpath,_0x4f4f30(0x202)+botID+_0x4f4f30(0x335)));}catch(_0x3b98c6){if(_0x3b98c6)logger['full'](_0x4f4f30(0x278),_0x3b98c6);}const _0x20d11f=getDate();let _0x4a3cdb=[];currentCoins[_0x4f4f30(0x31e)](_0x115afc=>{const _0x2a4f88=_0x4f4f30;_0x4a3cdb['push']({'coin':_0x115afc[_0x2a4f88(0x296)],'number':_0x115afc[_0x2a4f88(0x286)],'price':_0x115afc[_0x2a4f88(0x292)]});});let _0x5a4a73=dbConfig[_0x4f4f30(0x2df)](_0x4f4f30(0x30f))[_0x4f4f30(0x321)]({'botID':botID})['value']();_0x5a4a73&&(dbConfig['get'](_0x4f4f30(0x30f))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x20d11f,'changes':_0x4a3cdb}]})['write'](),config[_0x4f4f30(0x1f3)]=[]),process[_0x4f4f30(0x2e8)]({'stop':_0x4f4f30(0x2a0)},_0x2f5739=>{});}function noslash(_0x32dcbf){const _0x435636=_0x4c340f;return _0x32dcbf[_0x435636(0x225)]('/','');}function updateHighestFee(_0x538f84,_0x4d3de1){const _0x2cd971=_0x4c340f;lastFees[_0x2cd971(0x26f)]=_0x538f84,lastFees[_0x2cd971(0x21b)][_0x2cd971(0x255)]===0x14&&lastFees['recent20'][_0x2cd971(0x265)](),lastFees[_0x2cd971(0x21b)][_0x2cd971(0x1eb)](_0x4d3de1),lastFees[_0x2cd971(0x2d3)]=Math[_0x2cd971(0x2db)](...lastFees[_0x2cd971(0x21b)]);}async function updateNumberCoinsCcxt(_0x18566a){const _0x112e3c=_0x4c340f;logger[_0x112e3c(0x295)](_0x112e3c(0x23b)+_0x18566a[_0x112e3c(0x1df)]+_0x112e3c(0x220)+_0x18566a[_0x112e3c(0x30c)]+_0x112e3c(0x220)+_0x18566a['id']);let _0xf72f41=_0x18566a[_0x112e3c(0x30c)],_0x206708=![];currentCoins['forEach'](_0x403a20=>{const _0x5db06b=_0x112e3c;_0x403a20['symbol']==_0x18566a[_0x5db06b(0x1df)]&&(_0x206708=!![]);});if(!_0x206708)return;const _0x1c2a27=currentCoins[_0x112e3c(0x321)](_0x178c83=>_0x178c83['symbol']==_0x18566a[_0x112e3c(0x1df)]),_0x2f5b7d=_0x23e0c7=>{const _0x5020b2=_0x112e3c;if(_0x1c2a27)_0x1c2a27[_0x5020b2(0x2cd)]=_0x23e0c7;};if(_0xf72f41==_0x112e3c(0x23f))_0x2f5b7d(_0x112e3c(0x23f));else{if(_0xf72f41=='canceled'){_0x2f5b7d(_0x112e3c(0x253));const _0x209231=await getCoins();[currentCoins,currentCoinsAll]=_0x209231,await getOpenOrders(),handleOpenOrders();}else{if(_0xf72f41==_0x112e3c(0x330)){logger['debug'](_0x112e3c(0x27e)+_0x18566a[_0x112e3c(0x1df)]+_0x112e3c(0x220)+_0x18566a[_0x112e3c(0x215)]+'\x20|\x20'+_0x18566a['id']);let _0x58a1cf=![];if(lastOrders)for(const _0x3a02ce of lastOrders){const _0x304816=0xc8,_0x59c134=0x1388;let _0x20b465=0x0;while(!_0x3a02ce[_0x112e3c(0x2e6)]&&_0x20b465*_0x304816<_0x59c134){_0x20b465++,await sleep(_0x304816);}if(_0x20b465>0x0)logger[_0x112e3c(0x295)](_0x112e3c(0x343)+_0x20b465*_0x304816/0x3e8+_0x112e3c(0x25d));if(_0x3a02ce[_0x112e3c(0x2e6)]==_0x18566a['id']){logger[_0x112e3c(0x295)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x18566a['id']),_0x58a1cf=!![];if(_0x3a02ce[_0x112e3c(0x215)]==0x0){logger[_0x112e3c(0x295)](_0x112e3c(0x32a)+_0x18566a['id']);if(_0x18566a[_0x112e3c(0x290)])_0x3a02ce['price']=_0x18566a[_0x112e3c(0x290)];else{if(_0x18566a[_0x112e3c(0x1e4)])_0x3a02ce[_0x112e3c(0x1e4)]=_0x18566a[_0x112e3c(0x1e4)];else{}}_0x3a02ce[_0x112e3c(0x215)]=_0x18566a['filled'],_0x3a02ce[_0x112e3c(0x1f0)]={'currency':_0x18566a['fee']?_0x18566a[_0x112e3c(0x1f0)][_0x112e3c(0x26f)]:null,'cost':_0x18566a[_0x112e3c(0x1f0)]?_0x18566a[_0x112e3c(0x1f0)]['cost']:0x0},updateHighestFee(_0x3a02ce[_0x112e3c(0x1f0)][_0x112e3c(0x26f)],_0x3a02ce['fee'][_0x112e3c(0x236)]),_0x2f5b7d(_0x112e3c(0x215)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x5adf75=await getCoins();[currentCoins,currentCoinsAll]=_0x5adf75;}await updateCoinResults(_0x3a02ce);}}}if(!_0x58a1cf){logger['debug']('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x18566a['id']),_0x2f5b7d(_0x112e3c(0x215));const _0x403849=await getCoins();[currentCoins,currentCoinsAll]=_0x403849,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x7ae1c2=JSON[_0x112e3c(0x33a)](lastBalances[_0x112e3c(0x2d2)]);const _0x14638f=_0x7ae1c2[_0x112e3c(0x321)](_0x48ad2e=>_0x48ad2e[_0x112e3c(0x1df)]==_0x18566a[_0x112e3c(0x1df)]);if(_0x14638f){if(_0xf72f41=='open')_0x14638f['orderstatus']=_0x14638f['orderstatus']=='filled'?_0x112e3c(0x215):_0x112e3c(0x23f);else{if(_0xf72f41==_0x112e3c(0x253))_0x14638f[_0x112e3c(0x2cd)]=_0x14638f[_0x112e3c(0x2cd)]==_0x112e3c(0x215)?_0x112e3c(0x215):_0x112e3c(0x253);else _0xf72f41=='closed'&&(_0x14638f['orderstatus']=_0x112e3c(0x215));}}lastBalances={...lastBalances,'portfolio':JSON[_0x112e3c(0x281)](_0x7ae1c2)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1e52f7=_0x4c340f;await getOpenOrders();let _0x20029a=![];currentCoins[_0x1e52f7(0x31e)](_0x127bb3=>{const _0x5be7ba=_0x1e52f7;_0x20029a=allOpenOrders[_0x5be7ba(0x321)](_0x363e7b=>_0x363e7b['symbol']==_0x127bb3[_0x5be7ba(0x1df)]),_0x127bb3['orderstatus']=_0x20029a?'open':_0x5be7ba(0x1e8);});}async function getCoins(_0x594334=!![],_0xc0e9cd=config[_0x4c340f(0x24d)]){const _0x35e64b=_0x4c340f;let _0x4692fc,_0x48e308=[],_0x31dbae=[],_0x8d1087=[],_0x54f315=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4692fc=await exchange[_0x35e64b(0x20b)](),mybalances=_0x4692fc[_0x35e64b(0x2ad)];for(const [_0x160252,_0x54bc88]of Object[_0x35e64b(0x2bf)](mybalances)){_0x54f315[_0x35e64b(0x1eb)](_0x160252);}if(_0xc0e9cd=='')for(const [_0x5beb09,_0x70ee0d]of Object[_0x35e64b(0x2bf)](mybalances)){_0x70ee0d[_0x35e64b(0x352)]()!=0x0&&_0x31dbae[_0x35e64b(0x1eb)]({'coin':_0x5beb09});}else{let _0x477ea1=![];for(const [_0xfbdfc0,_0x564e48]of Object['entries'](mybalances)){if(_0x54f315[_0x35e64b(0x210)](_0xfbdfc0)){const _0x16ca08=config[_0x35e64b(0x2d2)][_0x35e64b(0x321)](_0x27aeef=>_0x27aeef['coin']==_0xfbdfc0),_0x4ae81d=_0xfbdfc0+'/'+_0xc0e9cd,_0x23c1b2=_0xc0e9cd+'/'+_0xfbdfc0,_0x19e6e0=currentCoins[_0x35e64b(0x321)](_0x39e2e7=>_0x39e2e7[_0x35e64b(0x296)]==_0xfbdfc0);_0x477ea1=![];if((_0x564e48['toString']()!=0x0||_0x16ca08)&&(allSymbols[_0x35e64b(0x210)](_0x4ae81d)||_0xfbdfc0==_0xc0e9cd))_0xfbdfc0!=_0xc0e9cd&&_0x48e308[_0x35e64b(0x1eb)](_0x4ae81d),_0x31dbae[_0x35e64b(0x1eb)]({'coin':_0xfbdfc0,'symbol':_0x4ae81d,'reverse':![],'number':Math[_0x35e64b(0x2db)](_0x564e48+(_0x16ca08&&_0x16ca08[_0x35e64b(0x353)]||0x0),0x0),'orderstatus':_0x19e6e0?_0x19e6e0[_0x35e64b(0x2cd)]:_0x35e64b(0x1e8)});else(_0x564e48[_0x35e64b(0x352)]()!=0x0||_0x16ca08)&&allSymbols['includes'](_0x23c1b2)&&(_0xfbdfc0!=_0xc0e9cd&&_0x48e308[_0x35e64b(0x1eb)](_0x23c1b2),_0x31dbae['push']({'coin':_0xfbdfc0,'symbol':_0x23c1b2,'reverse':!![],'number':Math[_0x35e64b(0x2db)](_0x564e48+(_0x16ca08&&_0x16ca08[_0x35e64b(0x353)]||0x0),0x0),'orderstatus':_0x19e6e0?_0x19e6e0[_0x35e64b(0x2cd)]:_0x35e64b(0x1e8)}));}}}}catch(_0x1e4159){if(!_0x594334)handleErrorNoStop(_0x1e4159,_0x35e64b(0x24b));else await handleError(_0x1e4159,_0x35e64b(0x24b));}return _0x8d1087=cloneDeep(_0x31dbae),_0x31dbae=_0x31dbae['filter'](_0x16dcc9=>{const _0x23adb6=_0x35e64b,_0x5e3c62=config[_0x23adb6(0x2d2)][_0x23adb6(0x321)](_0x463089=>_0x463089[_0x23adb6(0x296)]==_0x16dcc9['coin']);return _0x5e3c62&&!_0x5e3c62['excluded'];}),[_0x31dbae,_0x8d1087];}async function getCoinNumber(_0x7eda16){const _0x30edf6=_0x4c340f;let _0x344267;try{const _0x2c0cde=await exchange[_0x30edf6(0x20b)]();_0x344267=_0x2c0cde[_0x30edf6(0x2ad)][_0x7eda16];}catch(_0x3af123){await handleError(_0x3af123,'getCoinNumber()');}return _0x344267;}async function getOpenOrders(){const _0x5f3eae=_0x4c340f;let _0x46eb29;allOpenOrders=[];try{for(const _0x3db8bc of config[_0x5f3eae(0x2d2)]){!_0x3db8bc['excluded']&&_0x3db8bc['coin']!=config[_0x5f3eae(0x24d)]&&(_0x46eb29=await exchange[_0x5f3eae(0x26c)](_0x3db8bc[_0x5f3eae(0x1df)]),_0x46eb29[_0x5f3eae(0x255)]>0x0&&allOpenOrders[_0x5f3eae(0x1eb)](_0x46eb29[0x0]));}}catch(_0x4ba53b){await handleError(_0x4ba53b,_0x5f3eae(0x336));}}async function handleOpenOrders(_0x20f3a5=0x0){const _0x50a383=_0x4c340f;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x50a383(0x2c5)]&&allOrdersPlaced&&(_0x20f3a5==0x0?(logger[_0x50a383(0x295)](_0x50a383(0x1e7)),_0x20f3a5++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x50a383(0x295)](_0x50a383(0x274)),validateOrders(_0x50a383(0x266))));}async function testAPI(_0x5a5d13){const _0x5ac784=_0x4c340f,_0x1f4881=ccxt[_0x5a5d13['exchange'][_0x5ac784(0x308)]()],_0x183a7a=new _0x1f4881({'apiKey':_0x5a5d13[_0x5ac784(0x237)],'secret':_0x5a5d13[_0x5ac784(0x20d)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x5a5d13['exchange']==_0x5ac784(0x2b0)&&(_0x183a7a[_0x5ac784(0x29c)]={'defaultType':_0x5ac784(0x267),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x5a5d13['apiPassword'])_0x183a7a['password']=_0x5a5d13[_0x5ac784(0x25e)];try{await _0x183a7a['loadMarkets']();}catch(_0x45ce16){throw _0x45ce16;}}function cloneDeep(_0x5b2f36){const _0x161592=_0x4c340f;return JSON[_0x161592(0x33a)](JSON[_0x161592(0x281)](_0x5b2f36));}async function getPortfolio(_0x4bbb85){const _0x41ee0d=_0x4c340f;let _0x2410ee=[],_0x49c24f=[],_0xe137aa=[],_0x2138b9;if(_0x4bbb85[_0x41ee0d(0x237)]!==_0x41ee0d(0x284)||_0x4bbb85['apiSecret']!==_0x41ee0d(0x284)||_0x4bbb85[_0x41ee0d(0x25e)]&&_0x4bbb85['apiPassword']!=='************'){if(config[_0x41ee0d(0x2c4)]){if(_0x4bbb85[_0x41ee0d(0x237)]==_0x41ee0d(0x284))_0x4bbb85[_0x41ee0d(0x237)]=config[_0x41ee0d(0x237)];if(_0x4bbb85['apiSecret']==_0x41ee0d(0x284))_0x4bbb85[_0x41ee0d(0x20d)]=config[_0x41ee0d(0x20d)];if(_0x4bbb85[_0x41ee0d(0x25e)]==_0x41ee0d(0x284))_0x4bbb85[_0x41ee0d(0x25e)]=config[_0x41ee0d(0x25e)];try{await testAPI(_0x4bbb85);}catch(_0x4c9107){if(_0x4c9107['toString']()[_0x41ee0d(0x210)](_0x41ee0d(0x323))){logger[_0x41ee0d(0x295)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x41ee0d(0x2d2),![]);return;}else{handleError(_0x4c9107,'getPortfolio(0)');return;}}}await initExchange(_0x4bbb85[_0x41ee0d(0x2c4)],_0x4bbb85[_0x41ee0d(0x237)],_0x4bbb85['apiSecret'],_0x4bbb85[_0x41ee0d(0x25e)]);try{await loadSymbols(_0x4bbb85[_0x41ee0d(0x2c4)],!![]);}catch(_0x2e8768){if(_0x2e8768[_0x41ee0d(0x352)]()['includes'](_0x41ee0d(0x323))){proxyEmit(_0x41ee0d(0x2d2),![]);return;}else{handleError(_0x2e8768,'getPortfolio(1)');return;}}const _0x12b8c1=await getCoins(![],_0x4bbb85['basecoin']);_0xe137aa=cloneDeep(_0x12b8c1[0x1]);}else _0xe137aa=cloneDeep(currentCoinsAll);if(_0x4bbb85[_0x41ee0d(0x24d)]=='')proxyEmit(_0x41ee0d(0x2d2),_0xe137aa);else{_0xe137aa['forEach'](_0x3b238b=>{const _0x578461=_0x41ee0d;if(_0x3b238b['coin']!=_0x4bbb85[_0x578461(0x24d)])_0x2410ee[_0x578461(0x1eb)](_0x3b238b[_0x578461(0x1df)]);});try{_0x49c24f=await exchange[_0x41ee0d(0x2bd)](_0x2410ee);}catch(_0x58c1e5){if(_0x58c1e5[_0x41ee0d(0x352)]()['includes']('AuthenticationError')){proxyEmit(_0x41ee0d(0x2d2),![]);return;}else{handleError(_0x58c1e5,'getPortfolio(2)');return;}}_0xe137aa['forEach'](_0x17a040=>{const _0x35c8c6=_0x41ee0d;_0x17a040[_0x35c8c6(0x296)]!=_0x4bbb85[_0x35c8c6(0x24d)]?_0x2138b9=_0x17a040['reverse']?0x1/_0x49c24f[_0x17a040['symbol']][_0x35c8c6(0x292)]:_0x49c24f[_0x17a040[_0x35c8c6(0x1df)]][_0x35c8c6(0x292)]:_0x2138b9=0x1,_0x17a040[_0x35c8c6(0x1e4)]=formatResult(_0x2138b9,0x8);}),proxyEmit(_0x41ee0d(0x2d2),_0xe137aa);}}function truncateTradeAmount(_0x32dd4c,_0x5e5769){const _0xea5dfd=_0x4c340f;let _0x1568aa=0x0;try{_0x1568aa=exchange[_0xea5dfd(0x282)](_0x32dd4c,_0x5e5769);}catch(_0x140837){}return _0x1568aa;}function checkMinimums(_0xf0ba2c){const _0x2f6b18=_0x4c340f;let _0x75fc=!![];const _0x40bec6=!_0xf0ba2c[_0x2f6b18(0x2a6)]?markets[_0xf0ba2c[_0x2f6b18(0x1df)]]['limits'][_0x2f6b18(0x23a)]['min']:markets[_0xf0ba2c[_0x2f6b18(0x1df)]]['limits'][_0x2f6b18(0x236)]['min'],_0x1eed5f=!_0xf0ba2c[_0x2f6b18(0x2a6)]?markets[_0xf0ba2c[_0x2f6b18(0x1df)]][_0x2f6b18(0x338)][_0x2f6b18(0x236)][_0x2f6b18(0x31d)]:markets[_0xf0ba2c[_0x2f6b18(0x1df)]][_0x2f6b18(0x338)][_0x2f6b18(0x23a)][_0x2f6b18(0x31d)],_0x6aad3a=truncateTradeAmount(_0xf0ba2c['symbol'],_0xf0ba2c[_0x2f6b18(0x348)]);_0xf0ba2c['trade']=_0x6aad3a;if(Math['abs'](_0x6aad3a)<_0x40bec6)_0x75fc=![];if(Math[_0x2f6b18(0x345)](_0x6aad3a)*_0xf0ba2c[_0x2f6b18(0x292)]<_0x1eed5f)_0x75fc=![];if(_0xf0ba2c[_0x2f6b18(0x2b6)]==_0x2f6b18(0x2e2)){let _0x1f45d6=config[_0x2f6b18(0x2d2)]['find'](_0x340606=>_0x340606[_0x2f6b18(0x296)]==_0xf0ba2c[_0x2f6b18(0x296)]);if(_0x1f45d6[_0x2f6b18(0x353)]>0x0){if(Math['abs'](_0x6aad3a)>_0xf0ba2c['number']-_0x1f45d6[_0x2f6b18(0x353)])_0x75fc=![];}else{if(Math['abs'](_0x6aad3a)>_0xf0ba2c[_0x2f6b18(0x286)])_0x75fc=![];}}if(_0xf0ba2c[_0x2f6b18(0x2b6)]==_0x2f6b18(0x341)){let _0x488492=config[_0x2f6b18(0x2d2)][_0x2f6b18(0x321)](_0x2d343e=>_0x2d343e['coin']==config[_0x2f6b18(0x24d)]),_0x548c68=currentCoins['find'](_0x1d8d27=>_0x1d8d27['coin']==config['basecoin']);if(_0x488492[_0x2f6b18(0x353)]>0x0){if(Math[_0x2f6b18(0x345)](_0x6aad3a)*_0xf0ba2c[_0x2f6b18(0x292)]>_0x548c68[_0x2f6b18(0x286)]-_0x488492[_0x2f6b18(0x353)])_0x75fc=![];}else{if(Math[_0x2f6b18(0x345)](_0x6aad3a)*_0xf0ba2c[_0x2f6b18(0x292)]>_0x548c68[_0x2f6b18(0x286)])_0x75fc=![];}}return _0x75fc;}async function getBalances(_0xa02243=!![]){const _0x4d1850=_0x4c340f;let _0x2fe672=0x0,_0x63293b;const _0x3feddc=config[_0x4d1850(0x2f0)];if(config[_0x4d1850(0x33f)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x1dff8a=>{const _0x3909b9=_0x4d1850;if(_0x1dff8a['coin']!=config[_0x3909b9(0x24d)]){let _0x2740a1=global['ticker'][noslash(_0x1dff8a[_0x3909b9(0x1df)])];_0x63293b=_0x1dff8a[_0x3909b9(0x2a6)]?0x1/_0x2740a1:_0x2740a1;}else _0x63293b=0x1;let _0x37d947=_0x1dff8a[_0x3909b9(0x286)]*_0x63293b;_0x2fe672+=_0x37d947,_0x1dff8a['last']=formatResult(Number(_0x63293b),0x8),_0x1dff8a[_0x3909b9(0x21d)]=_0x37d947;}),currentCoins[_0x4d1850(0x31e)](_0x5415b9=>{const _0x139d1a=_0x4d1850;let _0x3e699d=config[_0x139d1a(0x2d2)][_0x139d1a(0x321)](_0x440bfc=>_0x440bfc['coin']==_0x5415b9['coin']),_0x1f47b5=Number(_0x3e699d['distribution']),_0x82ca7d=_0x5415b9[_0x139d1a(0x21d)]/_0x2fe672*0x64,_0x4459da=_0x1f47b5*_0x2fe672/0x64/_0x5415b9['last']-_0x5415b9[_0x139d1a(0x286)];_0x5415b9[_0x139d1a(0x223)]=formatResult(_0x82ca7d,0x3),_0x5415b9['target']=formatResult(_0x1f47b5,0x3),_0x5415b9[_0x139d1a(0x348)]=formatResult(_0x4459da,0x8),_0x5415b9[_0x139d1a(0x2b6)]='',_0x5415b9[_0x139d1a(0x297)]=![];if(_0x5415b9[_0x139d1a(0x296)]!=config[_0x139d1a(0x24d)]){if(_0x5415b9[_0x139d1a(0x223)]>_0x1f47b5)_0x5415b9[_0x139d1a(0x2b6)]=_0x139d1a(0x2e2),_0x5415b9[_0x139d1a(0x297)]=checkMinimums(_0x5415b9);else _0x5415b9['distribution']<_0x1f47b5&&(_0x5415b9[_0x139d1a(0x2b6)]=_0x139d1a(0x341),_0x5415b9[_0x139d1a(0x297)]=checkMinimums(_0x5415b9));}_0x5415b9[_0x139d1a(0x2c6)]=_0x5415b9[_0x139d1a(0x223)]/_0x5415b9[_0x139d1a(0x24e)]-0x1;if(_0x5415b9['orderstatus']==_0x139d1a(0x215)||_0x5415b9[_0x139d1a(0x2cd)]==_0x139d1a(0x253))_0x5415b9['orderstatus']=_0x139d1a(0x1e8);}),currentCoins[_0x4d1850(0x1db)]((_0x32b16e,_0x44ffe3)=>_0x32b16e[_0x4d1850(0x2c6)]<_0x44ffe3[_0x4d1850(0x2c6)]?0x1:_0x44ffe3[_0x4d1850(0x2c6)]<_0x32b16e[_0x4d1850(0x2c6)]?-0x1:0x0);const _0x65b689=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x65b689[_0x4d1850(0x1e1)],'usd':_0x65b689[_0x4d1850(0x211)],'portfolio':JSON[_0x4d1850(0x281)](currentCoins),'threshold':_0x3feddc},proxyEmit(_0x4d1850(0x25f),{'serverversion':serverversion,'balances':lastBalances});if(_0xa02243){if(config[_0x4d1850(0x33f)])headlessMode({'portfolio':currentCoins,'threshold':_0x3feddc});else{if(lockOrders==ORDERS[_0x4d1850(0x2a1)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3feddc});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1084b0=getNormalizedPerformance();getStartingBalances(_0x1084b0),emitPerformance(_0x1084b0);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x126b77=getNormalizedPerformance();emitPerformance(_0x126b77),getStartingBalances(_0x126b77),logger[_0x4d1850(0x295)](_0x4d1850(0x2ba));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xca2e5f=_0x4c340f;if(!lastBalances)return;let _0x264ca4=[],_0xf7cd62,_0x579033=JSON['parse'](lastBalances[_0xca2e5f(0x2d2)]);_0x579033[_0xca2e5f(0x1db)]((_0x1efabc,_0x1a81cb)=>_0x1efabc[_0xca2e5f(0x296)]>_0x1a81cb[_0xca2e5f(0x296)]?0x1:_0x1a81cb[_0xca2e5f(0x296)]>_0x1efabc[_0xca2e5f(0x296)]?-0x1:0x0),_0x579033[_0xca2e5f(0x31e)](_0x741cd8=>{const _0x1b1e68=_0xca2e5f;let _0x554628={'coin':_0x741cd8[_0x1b1e68(0x296)],'number':_0x741cd8[_0x1b1e68(0x286)],'price':_0x741cd8[_0x1b1e68(0x292)]};_0x264ca4[_0x1b1e68(0x1eb)](_0x554628);});const _0x194bdf=await getFiat();_0xf7cd62={'date':lastBalances[_0xca2e5f(0x26b)][_0xca2e5f(0x29b)]('\x20')[0x0],'eur':_0x194bdf[_0xca2e5f(0x1e1)],'usd':_0x194bdf[_0xca2e5f(0x211)],'coins':_0x264ca4};let _0x206116=dbPerformance['get']('data')[_0xca2e5f(0x321)]({'date':_0xf7cd62[_0xca2e5f(0x208)]})[_0xca2e5f(0x21d)]();_0x206116?_0xf7cd62[_0xca2e5f(0x208)]!=config[_0xca2e5f(0x2ed)]&&dbPerformance['get'](_0xca2e5f(0x1fa))[_0xca2e5f(0x321)]({'date':_0xf7cd62['date']})['assign'](_0xf7cd62)[_0xca2e5f(0x31b)]():dbPerformance['get'](_0xca2e5f(0x1fa))[_0xca2e5f(0x1eb)](_0xf7cd62)[_0xca2e5f(0x31b)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3ec18f=_0x4c340f;let _0x202759=[];if(dbPerformance[_0x3ec18f(0x30d)]('data')[_0x3ec18f(0x21d)]()){let _0x4a82f4=dbPerformance[_0x3ec18f(0x2df)](_0x3ec18f(0x1fa))['cloneDeep']()[_0x3ec18f(0x31c)](_0x10aed5=>{const _0x4ae818=_0x3ec18f;if(_0x10aed5[_0x4ae818(0x2cc)]['length']==0x0)return![];else return!![];})[_0x3ec18f(0x2cf)](_0x3ec18f(0x208))['value'](),_0x1af751=[...config[_0x3ec18f(0x1f3)]];_0x1af751[_0x3ec18f(0x1db)]((_0x33978,_0x38158d)=>_0x33978['date']>_0x38158d[_0x3ec18f(0x208)]?-0x1:_0x38158d[_0x3ec18f(0x208)]>_0x33978[_0x3ec18f(0x208)]?0x1:0x0);let _0x22dda0=0x1,_0x461f8c=[],_0x2b5ba2=0x0;_0x4a82f4[_0x3ec18f(0x1ea)]()[_0x3ec18f(0x2a6)]()[_0x3ec18f(0x31e)]((_0x2e82fe,_0x341435)=>{const _0x5b02c8=_0x3ec18f;if(_0x1af751[_0x2b5ba2]){if(_0x4a82f4[_0x4a82f4[_0x5b02c8(0x255)]-_0x341435]&&_0x1af751[_0x2b5ba2][_0x5b02c8(0x208)]==_0x4a82f4[_0x4a82f4[_0x5b02c8(0x255)]-_0x341435][_0x5b02c8(0x208)]){if(_0x341435<_0x4a82f4['length']){let _0x25f467=0x0,_0x31e131=0x0;_0x4a82f4[_0x4a82f4[_0x5b02c8(0x255)]-_0x341435][_0x5b02c8(0x2cc)][_0x5b02c8(0x31e)](_0x24798a=>{const _0x2f1c6a=_0x5b02c8;_0x31e131+=_0x24798a[_0x2f1c6a(0x286)]*_0x24798a[_0x2f1c6a(0x1e4)];}),_0x1af751[_0x2b5ba2][_0x5b02c8(0x234)][_0x5b02c8(0x31e)](_0x1c0f96=>{const _0x51da88=_0x5b02c8;_0x25f467+=_0x1c0f96['number']*_0x1c0f96[_0x51da88(0x1e4)];}),_0x22dda0*=_0x25f467/(_0x31e131-_0x25f467)+0x1;}_0x2b5ba2++;}}let _0x3f77d9=0x0;_0x2e82fe[_0x5b02c8(0x2cc)]['forEach'](_0xa5f5ee=>{const _0x205702=_0x5b02c8;_0x3f77d9+=_0xa5f5ee[_0x205702(0x286)]*_0xa5f5ee[_0x205702(0x1e4)];}),_0x461f8c[_0x4a82f4[_0x5b02c8(0x255)]-_0x341435-0x1]=_0x3f77d9*(_0x22dda0-0x1);});let _0x27c550=[];_0x1af751=[...config['liquidity']]||[];let _0x331416=0x0;_0x2b5ba2=0x0,_0x4a82f4['forEach']((_0x2740c8,_0x4a9f06)=>{const _0x3edc14=_0x3ec18f;if(_0x1af751[_0x2b5ba2]){const _0x58523f=fns[_0x3edc14(0x33a)](_0x1af751[_0x2b5ba2]['date'],_0x3edc14(0x251),new Date()),_0x428b2f=fns[_0x3edc14(0x33a)](_0x2740c8['date'],_0x3edc14(0x251),new Date());if(fns[_0x3edc14(0x2ec)](_0x58523f,_0x428b2f)){let _0x5d3cdf=0x0;_0x1af751[_0x2b5ba2]['changes'][_0x3edc14(0x31e)](_0x5d00f0=>{const _0x147094=_0x3edc14;!_0x27c550[_0x5d00f0[_0x147094(0x296)]]?_0x27c550[_0x5d00f0[_0x147094(0x296)]]=_0x5d00f0[_0x147094(0x286)]:(_0x5d3cdf=_0x27c550[_0x5d00f0[_0x147094(0x296)]],_0x27c550[_0x5d00f0[_0x147094(0x296)]]+=_0x5d00f0[_0x147094(0x286)]);const _0x1f7ddf=_0x2740c8[_0x147094(0x2cc)][_0x147094(0x321)](_0x2e00bf=>_0x2e00bf['coin']==_0x5d00f0[_0x147094(0x296)]);(!_0x1f7ddf||_0x1f7ddf[_0x147094(0x286)]==0x0)&&(_0x331416+=(-_0x5d00f0['number']-_0x5d3cdf)*_0x5d00f0[_0x147094(0x1e4)]);}),_0x2b5ba2++;}}_0x2740c8[_0x3edc14(0x2cc)][_0x3edc14(0x31e)]((_0xfff847,_0x573a7a)=>{const _0x1e7003=_0x3edc14;_0x27c550[_0xfff847['coin']]&&(_0xfff847[_0x1e7003(0x32c)]=_0x27c550[_0xfff847[_0x1e7003(0x296)]]);}),_0x202759[_0x3edc14(0x1eb)]({'date':_0x2740c8[_0x3edc14(0x208)],'eur':_0x2740c8['eur'],'usd':_0x2740c8[_0x3edc14(0x211)],'offset':_0x461f8c[_0x4a9f06],'netoffset':_0x331416,'coins':_0x2740c8[_0x3edc14(0x2cc)]});});}return _0x202759;}function emitPerformance(_0x272d7c){const _0x2dbc81=_0x4c340f;_0x272d7c[_0x2dbc81(0x255)]!==0x0?(proxyEmit('performance',_0x272d7c),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3a8de6,_0xe7b315){const _0x32e6b9=_0x4c340f;let _0x20486b=0x0,_0x392d43=0x0,_0x5206c5=0x0;_0x3a8de6['coins'][_0x32e6b9(0x31e)](_0x37c9b0=>{const _0x512d48=_0x32e6b9;_0x20486b+=_0x37c9b0[_0x512d48(0x286)]*_0x37c9b0[_0x512d48(0x1e4)];});_0xe7b315&&(_0x20486b+=_0x3a8de6[_0x32e6b9(0x353)]);if(config['basecoin']===_0x32e6b9(0x1f9)||config['basecoin']===_0x32e6b9(0x219))_0x392d43=_0x20486b*_0x3a8de6[_0x32e6b9(0x1e1)],_0x5206c5=_0x20486b*_0x3a8de6['usd'];else{if(usdBasecoins[_0x32e6b9(0x210)](config['basecoin']))_0x392d43=_0x20486b*_0x3a8de6[_0x32e6b9(0x1e1)]/_0x3a8de6[_0x32e6b9(0x211)],_0x5206c5=_0x20486b;else config[_0x32e6b9(0x24d)]==='EUR'&&(_0x392d43=_0x20486b,_0x5206c5=_0x20486b*_0x3a8de6['usd']/_0x3a8de6['eur']);}return[_0x20486b,_0x392d43,_0x5206c5];}function _0x456f(_0x2fd548,_0x445971){const _0x1234b7=_0x1cab();return _0x456f=function(_0x520a5c,_0x3ac532){_0x520a5c=_0x520a5c-0x1da;let _0x1cab6d=_0x1234b7[_0x520a5c];return _0x1cab6d;},_0x456f(_0x2fd548,_0x445971);}function getKPIs(_0xdf3801,_0x2c37e2='EUR'){const _0x1f0d86=_0x4c340f,_0x8443f1=config[_0x1f0d86(0x24d)],_0x13e4a9=lastBalances,_0x18da7a=currentCoins,_0x2a03db=getNormalizedPerformance(),_0x4a045b=_0xdf3801===_0x1f0d86(0x24d)?_0x8443f1:_0xdf3801===_0x1f0d86(0x2c8)||_0xdf3801===_0x1f0d86(0x280)?_0x2c37e2:'Net\x20'+_0x8443f1,_0x269f6e=_0xdf3801===_0x1f0d86(0x270)?_0x1f0d86(0x256):_0xdf3801===_0x1f0d86(0x280)?_0x1f0d86(0x256):_0x4a045b+_0x1f0d86(0x205),_0x246d6e=_0xdf3801===_0x1f0d86(0x270)||_0xdf3801===_0x1f0d86(0x280)?'Net\x20effect':_0x4a045b+'\x20change';let _0xb4ebd0=0x0;_0x18da7a[_0x1f0d86(0x31e)](_0x4185b4=>{const _0x418df6=_0x1f0d86;_0xb4ebd0+=_0x4185b4[_0x418df6(0x286)]*_0x4185b4[_0x418df6(0x292)];});if(_0xdf3801===_0x1f0d86(0x2c8)||_0xdf3801===_0x1f0d86(0x280)){if(_0x8443f1==='BTC'||_0x8443f1===_0x1f0d86(0x219))_0xb4ebd0=_0xb4ebd0*(_0x2c37e2==='EUR'?_0x13e4a9[_0x1f0d86(0x1e1)]:_0x13e4a9[_0x1f0d86(0x211)]);else{if(usdBasecoins[_0x1f0d86(0x210)](_0x8443f1))_0xb4ebd0=_0xb4ebd0*(_0x2c37e2==='EUR'?_0x13e4a9[_0x1f0d86(0x1e1)]/_0x13e4a9[_0x1f0d86(0x211)]:0x1);else _0x8443f1==='EUR'&&(_0xb4ebd0=_0xb4ebd0*(_0x2c37e2===_0x1f0d86(0x2eb)?0x1:_0x13e4a9[_0x1f0d86(0x211)]/_0x13e4a9[_0x1f0d86(0x1e1)]));}}let _0x28e347;if(_0xb4ebd0!==0x0){if(_0xdf3801==='basecoin')_0x28e347=(_0xb4ebd0/startingBalances['basecoin']-0x1)*0x64;else{if(_0x2c37e2===_0x1f0d86(0x2eb))_0x28e347=(_0xb4ebd0/startingBalances[_0x1f0d86(0x1e1)]-0x1)*0x64;else _0x28e347=(_0xb4ebd0/startingBalances[_0x1f0d86(0x211)]-0x1)*0x64;}let _0x1dd6cc=0x0;if(startingBalances[_0x1f0d86(0x2cc)])_0x18da7a[_0x1f0d86(0x31e)](_0x15384=>{const _0x16a3d8=_0x1f0d86;let _0x8e1a3e=startingBalances[_0x16a3d8(0x2cc)][_0x16a3d8(0x321)](_0x3eba71=>_0x3eba71['coin']===_0x15384[_0x16a3d8(0x296)]);if(_0x8e1a3e&&_0x8e1a3e[_0x16a3d8(0x296)]&&_0x15384[_0x16a3d8(0x286)]!==0x0)_0x1dd6cc+=_0x8e1a3e[_0x16a3d8(0x286)]*_0x15384[_0x16a3d8(0x292)];});let _0x4a9245=0x0;if(_0x2a03db['length']!==0x0){let _0x41bb46=_0x2a03db[_0x2a03db[_0x1f0d86(0x255)]-0x1];_0x4a9245=_0x41bb46['netoffset'];}_0x1dd6cc-=_0x4a9245;_0xdf3801===_0x1f0d86(0x270)&&(_0x28e347=(_0xb4ebd0-_0x1dd6cc)/startingBalances[_0x1f0d86(0x24d)]*0x64,_0xb4ebd0=_0xb4ebd0-_0x1dd6cc);if(_0xdf3801===_0x1f0d86(0x280)){let _0x56da99=_0x2c37e2===_0x1f0d86(0x2eb)?startingBalances[_0x1f0d86(0x1e1)]:startingBalances[_0x1f0d86(0x211)];if(_0x8443f1===_0x1f0d86(0x1f9)||_0x8443f1==='ETH')_0x1dd6cc=_0x2c37e2===_0x1f0d86(0x2eb)?_0x1dd6cc*_0x13e4a9[_0x1f0d86(0x1e1)]:_0x1dd6cc*_0x13e4a9[_0x1f0d86(0x211)];else{if(usdBasecoins[_0x1f0d86(0x210)](_0x8443f1))_0x1dd6cc=_0x2c37e2===_0x1f0d86(0x2eb)?_0x1dd6cc*_0x13e4a9[_0x1f0d86(0x1e1)]/_0x13e4a9['usd']:_0x1dd6cc;else _0x8443f1===_0x1f0d86(0x2eb)&&(_0x1dd6cc=_0x2c37e2===_0x1f0d86(0x2eb)?_0x1dd6cc:_0x1dd6cc*_0x13e4a9['usd']/_0x13e4a9[_0x1f0d86(0x1e1)]);}_0x28e347=(_0xb4ebd0-_0x1dd6cc)/_0x56da99*0x64,_0xb4ebd0=_0xb4ebd0-_0x1dd6cc;}if(_0x28e347){if(_0x28e347<0x64)_0x28e347=_0x28e347[_0x1f0d86(0x21f)](0x2);else{if(_0x28e347<0x3e8)_0x28e347=_0x28e347['toFixed'](0x1);else _0x28e347=_0x28e347[_0x1f0d86(0x21f)](0x0);}}else _0x28e347=Number('0')[_0x1f0d86(0x21f)](0x2);if(_0xb4ebd0){if(Math['abs'](_0xb4ebd0)<0.000001)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x2);else{if(Math[_0x1f0d86(0x345)](_0xb4ebd0)<0.1)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x6);else{if(Math['abs'](_0xb4ebd0)<0x1)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x5);else{if(Math[_0x1f0d86(0x345)](_0xb4ebd0)<0xa)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x4);else{if(Math['abs'](_0xb4ebd0)<0x64)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x3);else{if(Math['abs'](_0xb4ebd0)<0x3e8)_0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x2);else _0xb4ebd0=_0xb4ebd0[_0x1f0d86(0x21f)](0x2);}}}}}}else _0xb4ebd0=Number('0')['toFixed'](0x2);}else _0x28e347=Number('0')[_0x1f0d86(0x21f)](0x2);return{'value':_0xb4ebd0,'change':_0x28e347,'leftTxt':_0x269f6e,'rightTxt':_0x246d6e};}async function getStartingBalances(_0x38a964,_0x58dc7d=!![]){const _0x7cc48=_0x4c340f;if(_0x38a964['length']!==0x0){const [_0x5808e2,_0x41b3d2,_0x70c3c2]=getPerf(_0x38a964[0x0],!![]);let _0x2d7947=[];config[_0x7cc48(0x2d2)][_0x7cc48(0x31e)](_0x36581e=>{const _0x48149e=_0x7cc48;let _0x3b44ed=0x0,_0x469c9d;config['liquidity'][_0x48149e(0x31e)](_0xc0dc9d=>{const _0x3143fa=_0x48149e;let _0x507424=_0xc0dc9d[_0x3143fa(0x234)][_0x3143fa(0x321)](_0x3f925b=>_0x3f925b[_0x3143fa(0x296)]==_0x36581e[_0x3143fa(0x296)]);if(_0x507424){_0x3b44ed+=_0x507424[_0x3143fa(0x286)];if(!_0x469c9d)_0x469c9d=_0x507424[_0x3143fa(0x1e4)];}}),_0x2d7947['push']({'coin':_0x36581e[_0x48149e(0x296)],'number':_0x3b44ed,'initialprice':_0x469c9d});});const _0xc009d5={'basecoin':_0x5808e2,'eur':_0x41b3d2,'usd':_0x70c3c2,'coins':_0x2d7947};if(_0x58dc7d)proxyEmit(_0x7cc48(0x2c2),_0xc009d5);startingBalances=_0xc009d5;}}function headlessMode(_0xb6ab8c){const _0x2f94a1=_0x4c340f;let _0x2c90a7=_0xb6ab8c['portfolio'],_0x13aa32=_0xb6ab8c[_0x2f94a1(0x2f0)],_0x2806ec=[];for(let _0x4c7b54 of _0x2c90a7){if(_0x4c7b54[_0x2f94a1(0x296)]!=config[_0x2f94a1(0x24d)]){if(_0x4c7b54[_0x2f94a1(0x2c6)]>=_0x13aa32/0x64){if(_0x4c7b54[_0x2f94a1(0x297)])_0x2806ec['push'](_0x4c7b54);}else{if(_0x4c7b54['delta']<=-_0x13aa32/0x64){if(_0x4c7b54[_0x2f94a1(0x297)])_0x2806ec['push'](_0x4c7b54);}}}}_0x2806ec[_0x2f94a1(0x255)]>0x0&&placeOrder(_0x2806ec);}function notifyBalance(_0xb78b4){const _0x5a37ed=_0x4c340f;let _0x4d5116=_0xb78b4[_0x5a37ed(0x2d2)],_0x1c65be=_0xb78b4['threshold'],_0x58893e=[];for(let _0x4e551f of _0x4d5116){if(_0x4e551f['coin']!=config['basecoin']){if(_0x4e551f[_0x5a37ed(0x2c6)]>=_0x1c65be/0x64){if(_0x4e551f['valid'])_0x58893e[_0x5a37ed(0x1eb)](_0x4e551f);}else{if(_0x4e551f['delta']<=-_0x1c65be/0x64){if(_0x4e551f[_0x5a37ed(0x297)])_0x58893e[_0x5a37ed(0x1eb)](_0x4e551f);}}}}if(_0x58893e['length']>0x0){let _0x2f8722=_0x58893e['map'](_0x206b4c=>_0x206b4c['coin']);_0x2f8722[_0x5a37ed(0x1db)]();let _0x1e9269=_0x2f8722[_0x5a37ed(0x337)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5a37ed(0x25a),_0x5a37ed(0x212));lastCoinsToBalance=_0x1e9269;}}function symbolToCoin(_0x3ba2d9){const _0x500621=_0x4c340f;let _0x130542;if(_0x3ba2d9[_0x500621(0x210)]('/'+config[_0x500621(0x24d)]))_0x130542=_0x3ba2d9[_0x500621(0x225)]('/'+config[_0x500621(0x24d)],'');if(_0x3ba2d9['includes'](config[_0x500621(0x24d)]+'/'))_0x130542=_0x3ba2d9[_0x500621(0x225)](config['basecoin']+'/','');return _0x130542;}async function unlockOrders(){const _0x285b36=_0x4c340f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x285b36(0x2c5)]){logger[_0x285b36(0x295)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x28de26=await getCoins();[currentCoins,currentCoinsAll]=_0x28de26,validateOrdersState=_0x285b36(0x32c),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x285b36(0x295)](_0x285b36(0x319));}}async function validateOrders(_0x596ee5){const _0x1aba8c=_0x4c340f;if(_0x596ee5)validateOrdersState=_0x596ee5;logger['debug'](_0x1aba8c(0x1f1)+validateOrdersState+_0x1aba8c(0x22d)+(lockOrders==0x1?_0x1aba8c(0x1f2):lockOrders==0x2?'ORDERS.UNLOCKING':_0x1aba8c(0x277)));let _0x11b44c=[],_0x2ad809=config[_0x1aba8c(0x1dc)]==_0x1aba8c(0x209)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1aba8c(0x26d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1aba8c(0x2c5)])return;logger[_0x1aba8c(0x295)](_0x1aba8c(0x1da)+validateOrdersState),lastOrders[_0x1aba8c(0x31e)](_0x27bc9d=>{const _0x328b8b=_0x1aba8c;let _0x3f94fc=![];_0x27bc9d[_0x328b8b(0x215)]>0x0&&(_0x3f94fc=!![]),_0x11b44c['push'](_0x3f94fc),_0x3f94fc&&config[_0x328b8b(0x1dc)]!=_0x328b8b(0x209)&&logHistory('order',_0x328b8b(0x22c)+_0x27bc9d['symbol']+'\x20'+_0x27bc9d[_0x328b8b(0x2b6)]+'\x20#'+formatResult(_0x27bc9d[_0x328b8b(0x215)],0x8)+'\x20@'+formatResult(_0x27bc9d['price'],0x8));}),_0x11b44c[_0x1aba8c(0x31e)]((_0x5a01d3,_0x334763)=>{const _0x422a74=_0x1aba8c;if(_0x5a01d3)lastOrders[_0x422a74(0x263)](_0x334763,0x1);}),persistOpenOrders(lastOrders);const _0x40a111=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x1aba8c(0x2ab);if(validateOrdersState=='initial'){validateOrdersState=_0x1aba8c(0x240);if(_0x11b44c[_0x1aba8c(0x210)](![])){if(config['ordertype']==_0x1aba8c(0x209)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x11b44c[_0x1aba8c(0x210)](![])){}else{if(allOrdersPlaced){if(config[_0x1aba8c(0x1dc)]==_0x1aba8c(0x209)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x11b44c[_0x1aba8c(0x210)](![])&&(config[_0x1aba8c(0x1dc)]==_0x1aba8c(0x209)?logHistory(_0x1aba8c(0x2e9),_0x1aba8c(0x200)+Math[_0x1aba8c(0x2ea)](_0x2ad809*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x40a111):(await cancelOrders(),logHistory(_0x1aba8c(0x2e9),_0x1aba8c(0x2ee)+Math[_0x1aba8c(0x2ea)](_0x2ad809*validateOrderInterval/0xea60)+_0x1aba8c(0x26a)+_0x40a111))),await unlockOrders();else{if(validateOrdersState==_0x1aba8c(0x266)){if(config[_0x1aba8c(0x1dc)]!=_0x1aba8c(0x209))logHistory(_0x1aba8c(0x2e9),'No\x20more\x20open\x20orders\x20-\x20'+_0x40a111);await unlockOrders();}}}}}async function cancelOrders(){const _0xed5117=_0x4c340f;lastOrders[_0xed5117(0x31e)](async _0x587542=>{const _0x26f448=_0xed5117;try{const _0x4521b5=await exchange[_0x26f448(0x21a)](_0x587542[_0x26f448(0x2e6)],_0x587542['symbol']);}catch(_0x131ac7){if(_0x131ac7[_0x26f448(0x352)]()[_0x26f448(0x210)]('OrderNotFound')){}else await handleError(_0x131ac7,'cancelOrders()');}});}async function initCoinResults(_0x2e9f2b){const _0xa56def=_0x4c340f;_0x2e9f2b?logger[_0xa56def(0x295)](_0xa56def(0x246)+_0x2e9f2b):logger[_0xa56def(0x295)](_0xa56def(0x2b9)),config[_0xa56def(0x2d2)]['forEach'](_0x249570=>{const _0x2e28a5=_0xa56def;if(!_0x249570['excluded']&&_0x249570[_0x2e28a5(0x296)]!=config[_0x2e28a5(0x24d)]){const _0x4c2dc3=currentCoins[_0x2e28a5(0x321)](_0x158589=>_0x158589[_0x2e28a5(0x296)]==_0x249570[_0x2e28a5(0x296)]),_0x266e09=global[_0x2e28a5(0x298)][noslash(_0x249570['symbol'])];let _0x5786f1=_0x4c2dc3?_0x4c2dc3[_0x2e28a5(0x286)]:null,_0x331a18=_0x249570[_0x2e28a5(0x2a6)]?0x1/_0x266e09:_0x266e09,_0x3a2246;config[_0x2e28a5(0x1f3)]['forEach'](_0x54576e=>{const _0x80ec6=_0x2e28a5;!_0x3a2246&&(_0x3a2246=_0x54576e[_0x80ec6(0x234)][_0x80ec6(0x321)](_0x2c2473=>_0x2c2473[_0x80ec6(0x296)]==_0x249570[_0x80ec6(0x296)]),_0x3a2246&&(_0x5786f1=_0x3a2246[_0x80ec6(0x286)],_0x331a18=_0x3a2246[_0x80ec6(0x1e4)]));});let _0x1cbfab=dbCoinResults[_0x2e28a5(0x2df)]('coins')[_0x2e28a5(0x321)]({'coin':_0x249570[_0x2e28a5(0x296)]})['value']();if(!_0x1cbfab){const _0x4c384b={'coin':_0x249570[_0x2e28a5(0x296)],'number':_0x5786f1,'breakeven':_0x331a18,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e28a5(0x2df)](_0x2e28a5(0x2cc))[_0x2e28a5(0x1eb)](_0x4c384b)['write']();}else{if(_0x2e9f2b&&_0x249570['coin']==_0x2e9f2b){const _0x1cc591={'coin':_0x249570['coin'],'number':_0x5786f1,'breakeven':_0x331a18,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e28a5(0x2df)](_0x2e28a5(0x2cc))[_0x2e28a5(0x321)]({'coin':_0x249570[_0x2e28a5(0x296)]})[_0x2e28a5(0x218)](_0x1cc591)[_0x2e28a5(0x31b)]();}}}});}async function updateCoinResults(_0x20426d,_0x297f75=![]){const _0x2ff57d=_0x4c340f;let _0x12a782,_0x456f35,_0x8d2055,_0x49d0db,_0x269492,_0x360876,_0x352120=dbCoinResults[_0x2ff57d(0x2df)](_0x2ff57d(0x2cc))[_0x2ff57d(0x321)]({'coin':_0x20426d[_0x2ff57d(0x296)]})[_0x2ff57d(0x21d)](),_0x1a5cee=![];Object['entries'](_0x352120)[_0x2ff57d(0x31e)](([_0x33efca,_0x78b99e])=>{if(_0x78b99e==null)_0x1a5cee=!![];});(!_0x352120||_0x1a5cee)&&(await initCoinResults(_0x20426d[_0x2ff57d(0x296)]),_0x352120=dbCoinResults[_0x2ff57d(0x2df)](_0x2ff57d(0x2cc))[_0x2ff57d(0x321)]({'coin':_0x20426d['coin']})['value']());_0x20426d[_0x2ff57d(0x2a6)]&&(_0x360876={'filled':_0x20426d[_0x2ff57d(0x215)]*_0x20426d[_0x2ff57d(0x1e4)],'amount':_0x20426d[_0x2ff57d(0x215)]*_0x20426d[_0x2ff57d(0x1e4)],'side':_0x20426d[_0x2ff57d(0x2b6)]==_0x2ff57d(0x2e2)?_0x2ff57d(0x341):_0x2ff57d(0x2e2),'price':0x1/_0x20426d['price']},_0x20426d={..._0x20426d,..._0x360876});_0x297f75?_0x456f35=_0x20426d[_0x2ff57d(0x2b6)]=='buy'?_0x352120[_0x2ff57d(0x286)]+_0x20426d['filled']:_0x352120[_0x2ff57d(0x286)]-_0x20426d['filled']:_0x456f35=await getCoinNumber(_0x20426d['coin']);if(_0x20426d[_0x2ff57d(0x1f0)]&&_0x20426d[_0x2ff57d(0x1f0)][_0x2ff57d(0x26f)]==config[_0x2ff57d(0x24d)])_0x12a782=_0x20426d[_0x2ff57d(0x1f0)]['cost'];else{if(_0x20426d[_0x2ff57d(0x1f0)]&&_0x20426d[_0x2ff57d(0x1f0)][_0x2ff57d(0x26f)]==_0x2ff57d(0x2f9)&&!_0x297f75)_0x12a782=_0x20426d['fee'][_0x2ff57d(0x236)]*global[_0x2ff57d(0x298)][_0x2ff57d(0x2f9)+config[_0x2ff57d(0x24d)]];else _0x12a782=defaultFee*_0x20426d[_0x2ff57d(0x215)]*_0x20426d['price'];}_0x20426d[_0x2ff57d(0x2b6)]==_0x2ff57d(0x341)?(_0x8d2055=_0x456f35!=0x0?(_0x352120['breakeven']*_0x352120[_0x2ff57d(0x286)]+_0x20426d['price']*(_0x456f35-_0x352120['number'])+_0x12a782)/_0x456f35:0x0,_0x49d0db=_0x352120[_0x2ff57d(0x33c)]):(_0x8d2055=_0x456f35!=0x0?(_0x352120[_0x2ff57d(0x288)]*_0x352120[_0x2ff57d(0x286)]-_0x20426d[_0x2ff57d(0x1e4)]*(_0x352120[_0x2ff57d(0x286)]-_0x456f35)+_0x12a782)/_0x456f35:0x0,_0x49d0db=_0x352120[_0x2ff57d(0x33c)]+(_0x20426d[_0x2ff57d(0x1e4)]-_0x352120[_0x2ff57d(0x288)])*_0x20426d[_0x2ff57d(0x215)]);_0x269492=(_0x20426d[_0x2ff57d(0x1e4)]-_0x8d2055-_0x12a782/_0x20426d['filled'])*_0x456f35;let _0x5b7c7e={'coin':_0x20426d[_0x2ff57d(0x296)],'number':_0x456f35,'breakeven':formatResult(_0x8d2055,0x8),'realized':formatResult(_0x49d0db,0x8),'unrealized':formatResult(_0x269492,0x8),'fees':formatResult(_0x352120['fees']+_0x12a782,0x8),'sells':_0x20426d[_0x2ff57d(0x2b6)]==_0x2ff57d(0x2e2)?_0x352120['sells']+0x1:_0x352120[_0x2ff57d(0x272)],'buys':_0x20426d[_0x2ff57d(0x2b6)]=='buy'?_0x352120[_0x2ff57d(0x2b4)]+0x1:_0x352120['buys']};dbCoinResults[_0x2ff57d(0x2df)]('coins')[_0x2ff57d(0x321)]({'coin':_0x20426d[_0x2ff57d(0x296)]})['assign'](_0x5b7c7e)[_0x2ff57d(0x31b)]();if(!_0x297f75){if(_0x20426d[_0x2ff57d(0x1f0)]&&_0x20426d[_0x2ff57d(0x1f0)][_0x2ff57d(0x26f)]=='BNB'){const _0x341f5f=currentCoins[_0x2ff57d(0x321)](_0x3050ef=>_0x3050ef['coin']==_0x2ff57d(0x2f9));if(_0x341f5f){let _0x11ac5c=dbCoinResults['get'](_0x2ff57d(0x2cc))['find']({'coin':_0x2ff57d(0x2f9)})[_0x2ff57d(0x21d)]();_0x5b7c7e={..._0x11ac5c,'number':_0x341f5f[_0x2ff57d(0x286)]},dbCoinResults['get']('coins')[_0x2ff57d(0x321)]({'coin':_0x2ff57d(0x2f9)})[_0x2ff57d(0x218)](_0x5b7c7e)[_0x2ff57d(0x31b)]();}}}}async function placeOrder(_0x51e14c){const _0x417a7f=_0x4c340f,_0x5a1005=config[_0x417a7f(0x1dc)]==_0x417a7f(0x209)?_0x417a7f(0x209):'limit';if(lockOrders==ORDERS[_0x417a7f(0x2a1)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x417a7f(0x2c5)],allOrdersPlaced=![],validateOrdersState='initial';let _0x51fd58=![];lastOrders=[];for(const _0x477248 of _0x51e14c){let _0x514c83,_0x59d1a8,_0x5c38da,_0x2ac900,_0x5251bc,_0x1ddea1=_0x477248['symbol'];try{const _0x764547=await exchange[_0x417a7f(0x2d6)](_0x1ddea1);_0x514c83=_0x477248[_0x417a7f(0x2a6)]?0x1/_0x477248[_0x417a7f(0x292)]:_0x477248['last'],_0x59d1a8=_0x764547[_0x417a7f(0x31a)],_0x5c38da=_0x764547[_0x417a7f(0x2ff)];_0x477248['reverse']?(_0x2ac900=_0x477248['side']==_0x417a7f(0x341)?_0x417a7f(0x2e2):_0x417a7f(0x341),_0x5251bc=Math['abs'](_0x477248[_0x417a7f(0x348)])/_0x514c83):(_0x2ac900=_0x477248[_0x417a7f(0x2b6)],_0x5251bc=Math[_0x417a7f(0x345)](_0x477248[_0x417a7f(0x348)]));_0x5a1005==_0x417a7f(0x28c)&&(config['ordertype']==_0x417a7f(0x1e5)&&(_0x514c83=_0x2ac900=='buy'?_0x59d1a8:_0x5c38da),config[_0x417a7f(0x1dc)]==_0x417a7f(0x331)&&(_0x514c83=_0x2ac900=='buy'?_0x5c38da:_0x59d1a8));_0x5251bc=formatResult(_0x5251bc,0x8),_0x514c83=formatResult(_0x514c83,0x8);const _0x3cdb96=_0x2ac900==_0x417a7f(0x2e2)?config[_0x417a7f(0x1f7)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x417a7f(0x289)]?String['fromCodePoint']('0x'+config[_0x417a7f(0x289)])+'\x20':'',_0x4ab130=_0x5a1005==_0x417a7f(0x209)?_0x417a7f(0x232):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x417a7f(0x2bc),_0x46c81d=(Math['floor'](Math[_0x417a7f(0x328)]()*0x35a4e900)+0x5f5e100)[_0x417a7f(0x352)]();lastOrders[_0x417a7f(0x1eb)]({'customId':_0x46c81d,'symbol':_0x1ddea1,'coin':_0x477248[_0x417a7f(0x296)],'amount':_0x5251bc,'price':_0x514c83,'side':_0x2ac900,'reverse':_0x477248['reverse'],'filled':0x0});if(_0x5a1005==_0x417a7f(0x209))logHistory(_0x417a7f(0x33b),''+_0x3cdb96+_0x4ab130+'\x20order:\x20'+_0x1ddea1+'\x20'+_0x2ac900+'\x20#'+formatResult(_0x5251bc,0x8)+'\x20@'+formatResult(_0x514c83,0x8));else logHistory(_0x417a7f(0x33b),''+_0x3cdb96+_0x4ab130+'\x20order:\x20'+_0x1ddea1+'\x20'+_0x2ac900+'\x20#'+formatResult(_0x5251bc,0x8)+'\x20@'+formatResult(_0x514c83,0x8));const _0x395f37=await exchange['createOrder'](_0x1ddea1,_0x5a1005,_0x2ac900,_0x5251bc,_0x514c83);logger['debug']('ID:\x20'+_0x395f37['id']+_0x417a7f(0x307)+_0x46c81d);const _0x15e31c=lastOrders['length']-0x1;if(_0x15e31c>=0x0&&lastOrders[_0x15e31c][_0x417a7f(0x313)]==_0x46c81d){lastOrders[_0x15e31c][_0x417a7f(0x2e6)]=_0x395f37['id'];if(_0x395f37['amount'])lastOrders[_0x15e31c][_0x417a7f(0x23a)]=_0x395f37[_0x417a7f(0x23a)];if(_0x395f37['price'])lastOrders[_0x15e31c][_0x417a7f(0x1e4)]=_0x395f37[_0x417a7f(0x1e4)];lastOrders[_0x15e31c][_0x417a7f(0x1f0)]=_0x395f37[_0x417a7f(0x1f0)];}if(config[_0x417a7f(0x28b)]!=0x0){let _0x14de20=null;if(cooldownTracker[_0x417a7f(0x255)]==config[_0x417a7f(0x28b)]-0x1)_0x14de20=cooldownTracker[_0x417a7f(0x265)]();const _0x3ec1f4=getTimeStamp();cooldownTracker[_0x417a7f(0x1eb)](_0x3ec1f4);if(_0x14de20){const _0x5e02b5=fns[_0x417a7f(0x23d)](new Date(_0x3ec1f4),new Date(_0x14de20));if(_0x5e02b5<cooldownInterval){logHistory('error',_0x417a7f(0x2dd)+config[_0x417a7f(0x28b)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x417a7f(0x302)+cooldownPeriod/(0xe10*0x3e8)+_0x417a7f(0x241)),coolingDown=!![];break;}}}}catch(_0x3aefe4){if(_0x3aefe4[_0x417a7f(0x352)]()[_0x417a7f(0x210)](_0x417a7f(0x1e6)))lastOrders=lastOrders[_0x417a7f(0x31c)](_0xe67846=>_0xe67846[_0x417a7f(0x1df)]!=_0x1ddea1),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1ddea1),_0x51fd58=!![];else{if(_0x3aefe4['toString']()[_0x417a7f(0x210)](_0x417a7f(0x32d)))lastOrders=lastOrders[_0x417a7f(0x31c)](_0x48c002=>_0x48c002[_0x417a7f(0x1df)]!=_0x1ddea1),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1ddea1),_0x51fd58=!![];else{if(_0x3aefe4['toString']()[_0x417a7f(0x210)](_0x417a7f(0x34b)))lastOrders=lastOrders[_0x417a7f(0x31c)](_0x17365a=>_0x17365a[_0x417a7f(0x1df)]!=_0x1ddea1),logHistory(_0x417a7f(0x349),_0x417a7f(0x2de)+_0x1ddea1),_0x51fd58=!![];else _0x3aefe4[_0x417a7f(0x352)]()[_0x417a7f(0x210)](_0x417a7f(0x204))?(lastOrders=lastOrders[_0x417a7f(0x31c)](_0xb3a37e=>_0xb3a37e[_0x417a7f(0x1df)]!=_0x1ddea1),logHistory(_0x417a7f(0x349),_0x417a7f(0x2fe)+_0x1ddea1),_0x51fd58=!![]):(lastOrders=lastOrders[_0x417a7f(0x31c)](_0x261b28=>_0x261b28[_0x417a7f(0x1df)]!=_0x1ddea1),await handleError(_0x3aefe4,_0x417a7f(0x2a3),_0x1ddea1));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x417a7f(0x255)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x6aa971=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x417a7f(0x26d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x6aa971);}else unlockOrders();_0x51fd58&&config[_0x417a7f(0x33f)]&&await pauseBot(_0x417a7f(0x228)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x417a7f(0x2e9),_0x417a7f(0x217)));}else{if(coolingDown)!config[_0x417a7f(0x33f)]&&logHistory(_0x417a7f(0x349),_0x417a7f(0x1f6));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config['ordertype']=='market'?logHistory(_0x417a7f(0x349),_0x417a7f(0x334)):logHistory(_0x417a7f(0x349),_0x417a7f(0x24c))));}}function persistOpenOrders(_0x3eaf5f){const _0x46a4de=_0x4c340f,_0x5dd91={...config,'openOrders':_0x3eaf5f};let _0x4a807a=dbConfig[_0x46a4de(0x2df)](_0x46a4de(0x30f))['find']({'botID':botID})[_0x46a4de(0x21d)]();_0x4a807a&&dbConfig[_0x46a4de(0x2df)](_0x46a4de(0x30f))[_0x46a4de(0x321)]({'botID':botID})[_0x46a4de(0x218)](_0x5dd91)[_0x46a4de(0x31b)]();}function restoreOrders(){const _0x2abebd=_0x4c340f;let _0x2ad2bc;config[_0x2abebd(0x332)]&&allOpenOrders[_0x2abebd(0x31e)](_0x1fc06f=>{const _0x1f650f=_0x2abebd,_0x1c9174=config[_0x1f650f(0x332)][_0x1f650f(0x321)](_0x193170=>_0x193170[_0x1f650f(0x2e6)]==_0x1fc06f['id']);_0x1c9174&&(lastOrders[_0x1f650f(0x1eb)](_0x1c9174),_0x2ad2bc=_0x1fc06f[_0x1f650f(0x311)]);});if(lastOrders[_0x2abebd(0x255)]>0x0){lockOrders=ORDERS[_0x2abebd(0x2c5)],validateOrdersState=_0x2abebd(0x240),allOrdersPlaced=!![];const _0x3c5ee7=new Date()[_0x2abebd(0x1f4)](),_0x440579=config['ordertype']==_0x2abebd(0x209)?validateOrderTimeout*0x3c*0x3e8:config[_0x2abebd(0x26d)]*0x3c*0x3e8;if(_0x2ad2bc+_0x440579>_0x3c5ee7){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1fe5b2=_0x2abebd;validateOrders(_0x1fe5b2(0x2f7));},_0x2ad2bc+_0x440579-_0x3c5ee7);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x1e015c=_0x4c340f;if(!coinsLoaded){process[_0x1e015c(0x2e8)]({'telegrammsg':_0x1e015c(0x2a4)},_0x4193ce=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x289d43='';if(config[_0x1e015c(0x32f)])_0x289d43=_0x1e015c(0x285)+config[_0x1e015c(0x2d1)]+_0x1e015c(0x2e4);else _0x289d43=_0x1e015c(0x1e0)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2ada2c=getKPIs(_0x1e015c(0x24d)),_0x56aa84=getKPIs(_0x1e015c(0x2c8),config['fiat']),_0x5293c2=getKPIs(_0x1e015c(0x270)),_0x1ae9e1=getKPIs(_0x1e015c(0x280),config[_0x1e015c(0x2c8)]);_0x289d43+=_0x1e015c(0x26e),_0x289d43+=_0x2ada2c['leftTxt']+_0x1e015c(0x271)+_0x2ada2c['value']+'\x0a',_0x289d43+=_0x2ada2c[_0x1e015c(0x2be)]+':\x20'+_0x2ada2c[_0x1e015c(0x2fa)]+'%\x0a',_0x289d43+=_0x56aa84[_0x1e015c(0x2bb)]+_0x1e015c(0x271)+_0x56aa84['value']+'\x0a',_0x289d43+=_0x56aa84[_0x1e015c(0x2be)]+':\x20'+_0x56aa84[_0x1e015c(0x2fa)]+'%\x0a',_0x289d43+=_0x5293c2[_0x1e015c(0x2bb)]+':\x20'+_0x5293c2['value']+'\x20('+config[_0x1e015c(0x24d)]+')\x0a',_0x289d43+=_0x5293c2[_0x1e015c(0x2be)]+':\x20'+_0x5293c2[_0x1e015c(0x2fa)]+'%\x20('+config['basecoin']+')\x0a',_0x289d43+=_0x1ae9e1[_0x1e015c(0x2bb)]+':\x20'+_0x1ae9e1['value']+'\x20('+config[_0x1e015c(0x2c8)]+')\x0a',_0x289d43+=_0x1ae9e1[_0x1e015c(0x2be)]+':\x20'+_0x1ae9e1[_0x1e015c(0x2fa)]+_0x1e015c(0x2a2)+config[_0x1e015c(0x2c8)]+')\x0a',_0x289d43+=_0x1e015c(0x2e3),process[_0x1e015c(0x2e8)]({'telegrammsg':_0x289d43},_0x37014c=>{});}async function sendPortfolioTelegram(){const _0x2a928f=_0x4c340f;if(!coinsLoaded){process['send']({'telegrammsg':_0x2a928f(0x2a4)},_0x31cc7b=>{});return;}let _0x165738='';if(config[_0x2a928f(0x32f)])_0x165738=_0x2a928f(0x285)+config[_0x2a928f(0x2d1)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x165738=_0x2a928f(0x1e0)+botID+_0x2a928f(0x27c);_0x165738+='<pre>',_0x165738+=_0x2a928f(0x329),_0x165738+=_0x2a928f(0x22e),_0x165738+='-------------------------------\x0a',currentCoins[_0x2a928f(0x31e)](_0x296316=>{const _0x1c2cf0=_0x2a928f;_0x165738+=_0x296316['coin'][_0x1c2cf0(0x304)](0x7)+'|\x20'+formatPad(_0x296316[_0x1c2cf0(0x223)],0x2,0x6)+'|\x20'+formatPad(_0x296316[_0x1c2cf0(0x24e)],0x2,0x6)+'|\x20'+formatPad(_0x296316[_0x1c2cf0(0x2c6)]*0x64,0x2,0x6)+'\x0a';}),_0x165738+=_0x2a928f(0x2e3),process[_0x2a928f(0x2e8)]({'telegrammsg':_0x165738},_0x548876=>{});}function formatPad(_0x100392,_0x2114cd,_0x24d2f4){const _0x1d8635=_0x4c340f,_0x23ba0d=formatResultString(_0x100392,_0x2114cd);return _0x23ba0d?_0x23ba0d[_0x1d8635(0x2f3)](_0x24d2f4):''[_0x1d8635(0x2f3)](_0x24d2f4);}function logHistory(_0x162830,_0x10e5ba,_0x17369d=''){const _0x154e6c=_0x4c340f;let _0x49bff2={'time':getTimeStamp(),'type':_0x162830,'event':_0x10e5ba};dbLogs[_0x154e6c(0x2df)](_0x154e6c(0x2b5))[_0x154e6c(0x1eb)](_0x49bff2)[_0x154e6c(0x31b)]();if(_0x17369d=='')_0x17369d=_0x10e5ba;proxyEmit(_0x154e6c(0x340),{'log':_0x49bff2,'summary':_0x17369d}),process[_0x154e6c(0x2e8)]({'telegram':{..._0x49bff2,'botname':config['botname'],'showname':config['showname']}},_0x4e85af=>{}),logger[_0x154e6c(0x2b1)](''+_0x49bff2[_0x154e6c(0x340)]);}function emitHistory(_0x323336={}){const _0x56e86a=_0x4c340f;Object['keys'](_0x323336)[_0x56e86a(0x255)]==0x0&&(_0x323336={'type':['order',_0x56e86a(0x340)],'event':'','page':0x1});if(_0x323336[_0x56e86a(0x27f)]['includes'](_0x56e86a(0x340)))_0x323336['type'][_0x56e86a(0x263)](_0x323336['type'][_0x56e86a(0x227)]('event'),0x1,_0x56e86a(0x349),_0x56e86a(0x25a),'success');if(dbLogs[_0x56e86a(0x30d)](_0x56e86a(0x2b5))[_0x56e86a(0x21d)]()){let _0x3e950e=dbLogs[_0x56e86a(0x2df)]('logs')[_0x56e86a(0x31c)](_0x514c79=>{const _0x3a0de9=_0x56e86a;if(_0x323336[_0x3a0de9(0x27f)][_0x3a0de9(0x255)]==0x0)return![];else return _0x323336[_0x3a0de9(0x27f)][_0x3a0de9(0x210)](_0x514c79[_0x3a0de9(0x27f)]);})[_0x56e86a(0x31c)](_0x1a24c8=>{const _0x29e4b3=_0x56e86a;if(_0x323336[_0x29e4b3(0x340)]=='')return!![];else return _0x1a24c8[_0x29e4b3(0x340)][_0x29e4b3(0x308)]()[_0x29e4b3(0x210)](_0x323336[_0x29e4b3(0x340)][_0x29e4b3(0x308)]());})[_0x56e86a(0x2cf)](_0x56e86a(0x26b)),_0x559cca=_0x3e950e[_0x56e86a(0x21d)]()['length'];_0x3e950e=_0x3e950e['reverse']()[_0x56e86a(0x1ea)]((_0x323336[_0x56e86a(0x2d0)]-0x1)*logPageSize,_0x323336[_0x56e86a(0x2d0)]*logPageSize-0x1)[_0x56e86a(0x2a6)]()[_0x56e86a(0x21d)](),proxyEmit(_0x56e86a(0x2fd),{'logs':_0x3e950e,'total':_0x559cca});}else proxyEmit(_0x56e86a(0x2fd),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x38d9dc){const _0x241e79=_0x4c340f;if(dbLogs[_0x241e79(0x30d)]('logs')[_0x241e79(0x21d)]()){const _0x5c7411=dbLogs[_0x241e79(0x2df)](_0x241e79(0x2b5))['sortBy'](_0x241e79(0x26b))[_0x241e79(0x31c)](_0x19056a=>{const _0x17043b=_0x241e79;return _0x19056a[_0x17043b(0x27f)]=='order';})['value']();dbLogs[_0x241e79(0x2df)]('logs')[_0x241e79(0x1e3)]()[_0x241e79(0x31b)](),dbLogs['get']('logs')[_0x241e79(0x218)](_0x5c7411)['write'](),emitHistory(_0x38d9dc);}}async function pauseBot(_0x3e8a7c=''){const _0x31aad3=_0x4c340f,_0x35d429=new Date()[_0x31aad3(0x1f4)]();if(!lastErrorShown||_0x35d429-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x35d429;!lastBotPause?(lastBotPause=_0x35d429,consecutivePauses=0x1):(_0x35d429-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x31aad3(0x2e8)]({'stop':_0x31aad3(0x2a0)},_0x18598d=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x31aad3(0x1f4)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3e8a7c)_0x3e8a7c+=_0x31aad3(0x220);logHistory('error',_0x3e8a7c+_0x31aad3(0x28e)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){process['send']({'stop':'kill'},_0x224ff8=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1fabdb,_0x415add){const _0x3559b2=_0x4c340f;if(_0x1fabdb['toString']()['includes'](_0x3559b2(0x320)))return logHistory('error',config['exchange']+_0x3559b2(0x33d)),![];else{if(_0x1fabdb[_0x3559b2(0x352)]()['includes'](_0x3559b2(0x207)))return logHistory('error',config[_0x3559b2(0x2c4)]+_0x3559b2(0x34a)),![];else{if(_0x1fabdb['toString']()['includes'](_0x3559b2(0x323)))return logHistory(_0x3559b2(0x349),config[_0x3559b2(0x2c4)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x3559b2(0x349),_0x3559b2(0x2d7)),![];else await handleError(_0x1fabdb,_0x415add);}}}async function handleError(_0x39ff10,_0x336477,_0xbe36f1=''){const _0x4d955a=_0x4c340f,_0x50bf9e=config['exchange']||_0x4d955a(0x2c7);if(_0x39ff10['toString']()[_0x4d955a(0x210)](_0x4d955a(0x276)))await pauseBot(config['exchange']+_0x4d955a(0x31f));else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)](_0x4d955a(0x20c)))await pauseBot(config[_0x4d955a(0x2c4)]+'\x20not\x20available');else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)]('RequestTimeout'))await pauseBot(config[_0x4d955a(0x2c4)]+_0x4d955a(0x2ae));else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)](_0x4d955a(0x254)))await pauseBot(config['exchange']+_0x4d955a(0x261));else{if(_0x39ff10[_0x4d955a(0x352)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x4d955a(0x349),_0x336477+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x4d955a(0x349),_0x4d955a(0x291)),await killBot();else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)](_0x4d955a(0x333)))logHistory(_0x4d955a(0x349),_0x336477+_0x4d955a(0x2a7)),logHistory('error',_0x4d955a(0x291)),await killBot();else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)](_0x4d955a(0x320)))logHistory(_0x4d955a(0x349),_0x336477+_0x4d955a(0x220)+config[_0x4d955a(0x2c4)]+_0x4d955a(0x29d)),logHistory('error',_0x4d955a(0x291)),await killBot();else{if(_0x39ff10['toString']()[_0x4d955a(0x210)](_0x4d955a(0x207)))logHistory('error',_0x336477+'\x20|\x20'+config[_0x4d955a(0x2c4)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x4d955a(0x349),_0x4d955a(0x291)),await killBot();else{if(_0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)]('AuthenticationError'))logHistory(_0x4d955a(0x349),_0x336477+'\x20|\x20'+config[_0x4d955a(0x2c4)]+_0x4d955a(0x306)),logHistory(_0x4d955a(0x349),_0x4d955a(0x291)),await killBot();else _0x39ff10[_0x4d955a(0x352)]()[_0x4d955a(0x210)](_0x4d955a(0x25b))?logHistory(_0x4d955a(0x349),_0x336477+_0x4d955a(0x252)+_0xbe36f1):(logger['full'](_0x336477+'\x20|\x20Error\x20details:\x20',_0x39ff10),await pauseBot(_0x4d955a(0x347)));}}}}}}}}}function formatResult(_0x34966a,_0x4b2ce8){const _0xfd99f8=_0x4c340f;return parseFloat(_0x34966a[_0xfd99f8(0x21f)](_0x4b2ce8));}function formatResultTruncate(_0x22f851,_0x2a3d42){const _0x110ef4=_0x4c340f;let _0x135184=formatResultString(_0x22f851,0xa),_0x486c5e=_0x135184['indexOf']('.');return _0x486c5e!=-0x1&&(_0x135184=_0x135184[_0x110ef4(0x1ea)](0x0,_0x486c5e+_0x2a3d42+0x1)),Number(_0x135184);}function formatResultString(_0x43f5d8,_0x151fc4){const _0x17f628=_0x4c340f;let _0x3c6163;if(!(''+_0x43f5d8)['includes']('e'))_0x3c6163=+(Math[_0x17f628(0x2ea)](_0x43f5d8+'e+'+_0x151fc4)+'e-'+_0x151fc4);else{let _0x2ddce2=(''+_0x43f5d8)[_0x17f628(0x29b)]('e'),_0x50764d='';+_0x2ddce2[0x1]+_0x151fc4>0x0&&(_0x50764d='+'),_0x3c6163=+(Math['round'](+_0x2ddce2[0x0]+'e'+_0x50764d+(+_0x2ddce2[0x1]+_0x151fc4))+'e-'+_0x151fc4);}return Number(_0x3c6163)[_0x17f628(0x21f)](_0x151fc4);}function getServerTime(){const _0x37b804=_0x4c340f,_0x42e9b2=new Date();return _0x42e9b2[_0x37b804(0x317)]()+'/'+(_0x42e9b2[_0x37b804(0x1ff)]()+0x1)[_0x37b804(0x352)]()[_0x37b804(0x2f3)](0x2,'0')+'/'+_0x42e9b2[_0x37b804(0x30a)]()[_0x37b804(0x352)]()[_0x37b804(0x2f3)](0x2,'0')+'\x20'+_0x42e9b2['getHours']()[_0x37b804(0x352)]()[_0x37b804(0x2f3)](0x2,'0')+':'+_0x42e9b2[_0x37b804(0x312)]()[_0x37b804(0x352)]()[_0x37b804(0x2f3)](0x2,'0')+':'+_0x42e9b2[_0x37b804(0x2dc)]()[_0x37b804(0x352)]()[_0x37b804(0x2f3)](0x2,'0');}function getTimeStamp(){const _0x2bb674=_0x4c340f,_0x24e2ac=shiftedTime();return _0x24e2ac[_0x2bb674(0x317)]()+'/'+(_0x24e2ac[_0x2bb674(0x1ff)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x24e2ac[_0x2bb674(0x30a)]()[_0x2bb674(0x352)]()[_0x2bb674(0x2f3)](0x2,'0')+'\x20'+_0x24e2ac['getHours']()[_0x2bb674(0x352)]()[_0x2bb674(0x2f3)](0x2,'0')+':'+_0x24e2ac['getMinutes']()['toString']()[_0x2bb674(0x2f3)](0x2,'0')+':'+_0x24e2ac[_0x2bb674(0x2dc)]()[_0x2bb674(0x352)]()[_0x2bb674(0x2f3)](0x2,'0');}function getDate(){const _0x30faa8=_0x4c340f,_0x37780f=shiftedTime();return _0x37780f[_0x30faa8(0x317)]()+'/'+(_0x37780f[_0x30faa8(0x1ff)]()+0x1)[_0x30faa8(0x352)]()['padStart'](0x2,'0')+'/'+_0x37780f[_0x30faa8(0x30a)]()[_0x30faa8(0x352)]()['padStart'](0x2,'0');}function getHour(){const _0x5309fb=_0x4c340f,_0x42348b=shiftedTime();return _0x42348b[_0x5309fb(0x2a5)]()[_0x5309fb(0x352)]()[_0x5309fb(0x2f3)](0x2,'0');}function sleep(_0x4d753f){return new Promise(_0x58aa35=>setTimeout(_0x58aa35,_0x4d753f));}function shiftedTime(){const _0x19dc27=new Date();let _0x4460b4=_0x19dc27;if(config&&config['timeshift']!==0x0)_0x4460b4=fns['add'](_0x19dc27,{'hours':config['timeshift']});return _0x4460b4;}function timer(_0x4c3017){const _0x560208=_0x4c340f,_0x2d7f0f=new Date();!lasttime?console['log'](getTimeStamp()+_0x560208(0x250),_0x4c3017,_0x2d7f0f):console[_0x560208(0x2fb)](getTimeStamp()+_0x560208(0x250),_0x4c3017,(_0x2d7f0f-lasttime)/0x3e8),lasttime=_0x2d7f0f;}