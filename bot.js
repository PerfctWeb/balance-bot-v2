const _0x1ef07e=_0x2395;(function(_0x474b29,_0x59f8ea){const _0x556427=_0x2395,_0x470b42=_0x474b29();while(!![]){try{const _0x3c5ee9=-parseInt(_0x556427(0x103))/0x1*(parseInt(_0x556427(0x19b))/0x2)+parseInt(_0x556427(0x19e))/0x3+-parseInt(_0x556427(0x1a7))/0x4+parseInt(_0x556427(0x1da))/0x5*(-parseInt(_0x556427(0x115))/0x6)+parseInt(_0x556427(0x16a))/0x7*(parseInt(_0x556427(0x13e))/0x8)+-parseInt(_0x556427(0x121))/0x9*(-parseInt(_0x556427(0x14b))/0xa)+-parseInt(_0x556427(0x12d))/0xb;if(_0x3c5ee9===_0x59f8ea)break;else _0x470b42['push'](_0x470b42['shift']());}catch(_0x79585f){_0x470b42['push'](_0x470b42['shift']());}}}(_0x477d,0x9450a));const _0x496e15=function(){let _0x2e5a6d=!![];return function(_0xffcd5a,_0x499f0b){const _0x8d7546=_0x2e5a6d?function(){const _0x25f7a8=_0x2395;if(_0x499f0b){const _0x1a144c=_0x499f0b[_0x25f7a8(0x175)](_0xffcd5a,arguments);return _0x499f0b=null,_0x1a144c;}}:function(){};return _0x2e5a6d=![],_0x8d7546;};}(),_0x1184bd=_0x496e15(this,function(){const _0x50c8d5=_0x2395;return _0x1184bd['toString']()['search'](_0x50c8d5(0x1c3))[_0x50c8d5(0x158)]()['constructor'](_0x1184bd)[_0x50c8d5(0x19f)](_0x50c8d5(0x1c3));});_0x1184bd();'use strict';const ccxt=require(_0x1ef07e(0x122)),low=require(_0x1ef07e(0x1cf)),FileSync=require(_0x1ef07e(0x1de)),fs=require('fs'),fns=require(_0x1ef07e(0x1c2)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x1ef07e(0x1a8))[_0x1ef07e(0x1e0)];let exchange,wsClient;global[_0x1ef07e(0x1c0)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x1ef07e(0x1aa))[_0x1ef07e(0x144)],botID=process[_0x1ef07e(0x191)][0x2]||_0x1ef07e(0x106),pattern=/^[0-9]{3}$/;if(!pattern[_0x1ef07e(0x114)](botID))return console[_0x1ef07e(0x113)](_0x1ef07e(0x179)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x1ef07e(0x1e3)](0x1);const configpath=_0x1ef07e(0x124);!fs['existsSync'](configpath)&&fs[_0x1ef07e(0x110)](configpath);const configfile=configpath+'bot-'+botID+_0x1ef07e(0x142),logfile=configpath+_0x1ef07e(0x104)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x1ef07e(0x104)+botID+_0x1ef07e(0x161),settingsfile=configpath+_0x1ef07e(0x1be),securefile=configpath+_0x1ef07e(0x1af),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1ef07e(0x1b3)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1ef07e(0x1b3)]({'data':[]})[_0x1ef07e(0x15c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1ef07e(0x1b3)]({'bot':[]})[_0x1ef07e(0x15c)]();function _0x477d(){const _0x4ae755=['padStart','distribution','coin-loading-progress','order','cooldown','placeOrder()','AuthenticationError','decrypt','DAI/','remove','timeout','createOrder','yyyy/MM/dd\x20HH:mm:ss','push','trade','argv','WebSockets(','botID','time','BTC',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','\x20-\x20','indexOf','getHours','limit','5272EpTtgS','sortBy','limit-high','2667753xbLhtI','search','Order:\x20','\x20hour','BTC/EUR','error','delta','asset','kline','682124TXiTPT','hybrid-crypto-js','value','./version.json','BTCBUSD','stringify','Now\x20\x20\x20:\x20','headless','bb-secure.json','getFullYear','price','BTC/BUSD','defaults','sell','enabled','find','data','min','botname','datetime','wsKey','usd','getMonth','bb-settings.json','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','ticker','symbols','date-fns','(((.+)+)+)+$','last','getPortfolio','getTime','buy','FILLED','currency','success','startprice','getSeconds','cost','Pauses:\x20','lowdb','coin','DDoSProtection','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','emitHistory','subscribeSpotKline','page','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','coins','loadMarkets','Limit\x20(high-margin)','5KVZtzs','abs','Order\x20amount\x20is\x20invalid:\x20','orderType','lowdb/adapters/FileSync','differenceInSeconds','Crypt','splice','************','exit','event','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','eachDayOfInterval','send','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','portfolio','reverse','Delta\x20:\x20','ordertype','event-history','BTCUSDT','shift','side','includes','InsufficientFunds','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','getCoins()','args','configuration','fees','toLowerCase','Executed\x20','privateKey','target','BTC/','\x20|\x20Error\x20details:\x20','ExchangeNotAvailable','running','binance','round','settings','isArray','Order\x20filled:\x20','33HpGZoo','bot-','message','001','configuration-stored','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','accumulatedQuantity','wss://stream.binance.us:9443','getPortfolio()','total','has','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','apiSecret','mkdirSync','fetchOHLCV','getFiat()','log','test','6391452DwQOKS','spot','format','breakeven','API-key\x20format\x20invalid','timeshift','RequestTimeout','eur','number','sort','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','filter','640323kNtfOY','ccxt','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','./config/','filled','exchange','yyyy/MM/dd','outboundAccountPosition','OrderNotFound','\x20order:\x20','binanceus','initws()','2827121FIyNhe','eventType','\x20orders\x20in\x20less\x20than\x20','userData','excluded','Binance\x20API\x20key\x20is\x20invalid','type','symbol','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','threshold','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Performance\x20recreation\x20completed\x20successfully','bot','executionReport','cancelOrder()','market','sells','639992pByhgZ','get','assign','add','-config.json','fetchOrders','version','forEach','fee','apiKey','balances','loadSymbols()','BTC/USDT','70ouOlNa','InvalidNonce','close','BNBBTC','length','orderStatus','coinamount','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limits','parseISO','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','wsMarket','getDate','toString','logs','amount','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','write','LIMIT','slice','Bot\x20','getStartingBalances','-results.json','timestamp','bid','realized','performance','Market','date','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','valid','70TWAhOE','keys','replace','recreate','formattedMessage','getMinutes','entries','/BTC','limit-low','startdate','buys','apply','closeWs','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','orderId','Error:\x20Invalid\x20argument\x20','function','Order(s)\x20filled\x20-\x20balancing\x20resumed','fetchTickers','startnumber','differenceInCalendarDays','wss://stream.binance.com:9443','cancelOrder','parse'];_0x477d=function(){return _0x4ae755;};return _0x477d();}const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1ef07e(0x1b3)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x1ef07e(0x1a2)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x40032c)=>{},'debug':(..._0x4546df)=>{},'notice':(..._0x57d360)=>{},'info':(..._0x27d74c)=>{},'warning':(..._0x4f4399)=>{},'error':async function(..._0x4556a4){const _0x2902dd=_0x1ef07e,_0x5cc804=new Date()[_0x2902dd(0x1c6)]();if(!lastErrorShown||_0x5cc804-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x2902dd(0x1c6)](),logHistory(_0x2902dd(0x1a3),_0x2902dd(0x192)+consecutivePauses+_0x2902dd(0x196));let _0x517caa='';if(_0x4556a4[0x0])_0x517caa+=_0x4556a4[0x0];if(_0x4556a4[0x1]?.[_0x2902dd(0x1a3)]?.['message'])_0x517caa+=_0x2902dd(0x197)+_0x4556a4[0x1][_0x2902dd(0x1a3)]['message'];logging(_0x2902dd(0x192)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x517caa),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1ef07e(0x11a)]!=config[_0x1ef07e(0x11a)]&&updateTimeshift(settings[_0x1ef07e(0x11a)]);process[_0x1ef07e(0x1e7)]({'started':_0x1ef07e(0xfd)}),initializeProcessListeners();function proxyEmit(_0xd1024a,_0x10aaa0=null){const _0x579398=_0x1ef07e;process[_0x579398(0x1e7)]({'function':_0xd1024a,'args':_0x10aaa0});}function initializeProcessListeners(){const _0x1f3c27=_0x1ef07e;process['on'](_0x1f3c27(0x105),_0x375236=>{const _0x4eae6c=_0x1f3c27;switch(Object['keys'](_0x375236)[0x0]){case _0x4eae6c(0x11a):_0x375236['timeshift']!=undefined&&(settings['timeshift']=_0x375236[_0x4eae6c(0x11a)],updateTimeshift(settings[_0x4eae6c(0x11a)]));break;case _0x4eae6c(0x17a):switch(_0x375236[_0x4eae6c(0x17a)]){case'initclient':initclient();break;case _0x4eae6c(0x1d3):emitHistory(_0x375236['args']);break;case _0x4eae6c(0x1c5):getPortfolio(_0x375236[_0x4eae6c(0xf3)]);break;case'storeConfiguration':storeConfiguration(_0x375236[_0x4eae6c(0xf3)]);break;case'storeHeadless':storeHeadless(_0x375236[_0x4eae6c(0xf3)]);break;case _0x4eae6c(0x160):getStartingBalances();break;case'placeOrder':placeOrder(_0x375236[_0x4eae6c(0xf3)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x18494a=_0x1ef07e;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x18494a(0x147)],config['apiSecret']);let _0x32d491=await loadSymbols();_0x32d491&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x366021,_0x358464){const _0x23b738=_0x1ef07e,_0x5c4917=ccxt[config[_0x23b738(0x126)]];let _0x450513;switch(config[_0x23b738(0x126)]){case _0x23b738(0xfe):_0x450513='wss://stream.binance.com:9443';break;case'binanceus':_0x450513=_0x23b738(0x10a);break;default:_0x450513=_0x23b738(0x17f);}exchange=new _0x5c4917({'apiKey':_0x366021,'secret':_0x358464,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x366021,'api_secret':_0x358464,'beautify':!![],'wsUrl':_0x450513},logger),config[_0x23b738(0x126)]==_0x23b738(0x12b)&&(stablecoins={'eur':{'coin':_0x23b738(0x1ab),'symbol':_0x23b738(0x1b2)},'usd':{'coin':_0x23b738(0x1ee),'symbol':_0x23b738(0x14a)}});}async function loadSymbols(){const _0x5a76b8=_0x1ef07e;let _0x5ab68b;try{markets=await exchange[_0x5a76b8(0x1d8)](),allSymbols=exchange[_0x5a76b8(0x1c1)][_0x5a76b8(0x120)](_0x4b52eb=>{const _0x1ba972=_0x5a76b8;return _0x4b52eb[_0x1ba972(0x1f1)](_0x1ba972(0x195))&&!_0x4b52eb[_0x1ba972(0x1f1)](_0x1ba972(0x18a));}),_0x5ab68b=!![];}catch(_0x3e36bd){await handleError(_0x3e36bd,_0x5a76b8(0x149)),_0x5ab68b=![];}return _0x5ab68b;}async function initbot(){const _0x2ed5cb=_0x1ef07e;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1282e3=dbCoinResults[_0x2ed5cb(0x13f)]('coins')[_0x2ed5cb(0x1a9)]();if(_0x1282e3['length']==0x0)await resetCoinResults();}async function initclient(){const _0x57a8c8=_0x1ef07e;proxyEmit(_0x57a8c8(0xf4),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x57a8c8(0x148),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x40e534=_0x1ef07e;wsinitialized=![];ws1&&(ws1[_0x40e534(0x145)](_0x4e5666=>{const _0x3bb305=_0x40e534;try{wsClient[_0x3bb305(0x176)](_0x4e5666);}catch(_0x323e69){}}),ws1=[]);if(ws2){try{wsClient[_0x40e534(0x176)](ws2);}catch(_0x27d1e4){}ws2=null;}}async function initws(){const _0x35ffc3=_0x1ef07e;cleanws();let _0x55333e=[];currentCoins[_0x35ffc3(0x145)](_0x13da61=>{const _0x43f185=_0x35ffc3;if(_0x13da61[_0x43f185(0x1d0)]!=_0x43f185(0x195))_0x55333e[_0x43f185(0x18f)](noslash(_0x13da61['symbol']));});if(!_0x55333e[_0x35ffc3(0x1f1)](stablecoins['eur'][_0x35ffc3(0x1d0)]))_0x55333e[_0x35ffc3(0x18f)](stablecoins['eur'][_0x35ffc3(0x1d0)]);if(!_0x55333e[_0x35ffc3(0x1f1)](stablecoins[_0x35ffc3(0x1bc)][_0x35ffc3(0x1d0)]))_0x55333e[_0x35ffc3(0x18f)](stablecoins[_0x35ffc3(0x1bc)]['coin']);if(!_0x55333e[_0x35ffc3(0x1f1)](_0x35ffc3(0x14e)))_0x55333e[_0x35ffc3(0x18f)]('BNBBTC');try{_0x55333e[_0x35ffc3(0x145)]((_0x54d869,_0x26d815)=>{const _0x47001c=_0x35ffc3;ws1[_0x26d815]=wsClient[_0x47001c(0x1d4)](_0x54d869,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x35ffc3(0x16e),_0x3fd2eb=>{const _0x268aff=_0x35ffc3;if(!Array[_0x268aff(0x101)](_0x3fd2eb)&&!_0x3fd2eb[_0x268aff(0x1bb)]['includes'](_0x268aff(0x130))){if(_0x3fd2eb[_0x268aff(0x12e)]===_0x268aff(0x1a6)){global[_0x268aff(0x1c0)][_0x3fd2eb[_0x268aff(0x1a6)][_0x268aff(0x134)]]=_0x3fd2eb['kline'][_0x268aff(0x14d)];return;}}else{if(!Array['isArray'](_0x3fd2eb)&&_0x3fd2eb[_0x268aff(0x1bb)][_0x268aff(0x1f1)](_0x268aff(0x130))){if(_0x3fd2eb[_0x268aff(0x156)][_0x268aff(0x1f1)](_0x268aff(0x116))){updateNumberCoins(_0x3fd2eb);return;}}}}),wsClient['on']('reconnected',async _0x51d88f=>{currentCoins=await getCoins();});}catch(_0x5d9859){await handleError(_0x5d9859,_0x35ffc3(0x12c));}let _0x598456;while(_0x598456!=currentCoins['length']-0x1){_0x598456=0x0,currentCoins['forEach'](_0x52dbfc=>{const _0x15abfa=_0x35ffc3;if(_0x52dbfc['coin']!=_0x15abfa(0x195)&&global[_0x15abfa(0x1c0)][noslash(_0x52dbfc[_0x15abfa(0x134)])])_0x598456++;});let _0x590653=Math[_0x35ffc3(0xff)](_0x598456/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x35ffc3(0x184),_0x590653),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x5a3866=_0x1ef07e;let _0x127a81=0x0,_0x27c1a1=0x0;try{_0x127a81=global[_0x5a3866(0x1c0)][stablecoins[_0x5a3866(0x11c)]['coin']],_0x27c1a1=global[_0x5a3866(0x1c0)][stablecoins['usd'][_0x5a3866(0x1d0)]];}catch(_0x55b7e2){await handleError(_0x55b7e2,_0x5a3866(0x112));}return{'eur':Number(_0x127a81),'usd':Number(_0x27c1a1)};}async function setStartDatePerformance(_0x86559e){const _0x195c75=_0x1ef07e,_0x197f8c=fns[_0x195c75(0x117)](new Date(_0x86559e['startdate']),_0x195c75(0x127));let _0x3325b2=[];_0x3325b2[stablecoins[_0x195c75(0x11c)][_0x195c75(0x1d0)]]=await getCloses(stablecoins['eur'][_0x195c75(0x134)],new Date(_0x86559e[_0x195c75(0x173)]),0x1),_0x3325b2[stablecoins[_0x195c75(0x1bc)][_0x195c75(0x1d0)]]=await getCloses(stablecoins[_0x195c75(0x1bc)][_0x195c75(0x134)],new Date(_0x86559e[_0x195c75(0x173)]),0x1);let _0x5bcfa5,_0x180089=[];_0x86559e[_0x195c75(0x1e9)][_0x195c75(0x145)](_0x493c5d=>{const _0x4e6d2f=_0x195c75;!_0x493c5d[_0x4e6d2f(0x131)]&&_0x180089[_0x4e6d2f(0x18f)]({'coin':_0x493c5d['coin'],'number':_0x493c5d[_0x4e6d2f(0x17d)],'price':_0x493c5d[_0x4e6d2f(0x1cb)]});}),_0x5bcfa5={'date':_0x197f8c,'eur':_0x3325b2[stablecoins[_0x195c75(0x11c)][_0x195c75(0x1d0)]][0x0],'usd':_0x3325b2[stablecoins[_0x195c75(0x1bc)][_0x195c75(0x1d0)]][0x0],'coins':_0x180089};let _0x4ae164=dbPerformance[_0x195c75(0x13f)](_0x195c75(0x1b7))[_0x195c75(0x1b6)]({'date':_0x197f8c})[_0x195c75(0x1a9)]();_0x4ae164?dbPerformance[_0x195c75(0x13f)](_0x195c75(0x1b7))[_0x195c75(0x1b6)]({'date':_0x197f8c})[_0x195c75(0x140)](_0x5bcfa5)[_0x195c75(0x15c)]():dbPerformance[_0x195c75(0x13f)](_0x195c75(0x1b7))['push'](_0x5bcfa5)['write'](),_0x4ae164=dbPerformance[_0x195c75(0x13f)](_0x195c75(0x1b7))[_0x195c75(0x19c)](_0x195c75(0x167))[_0x195c75(0x1a9)](),_0x4ae164['forEach'](_0x1f7d7d=>{const _0x399136=_0x195c75;_0x1f7d7d['date']<_0x197f8c&&dbPerformance[_0x399136(0x13f)]('data')[_0x399136(0x18b)]({'date':_0x1f7d7d[_0x399136(0x167)]})[_0x399136(0x15c)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0xe73afe){const _0x6a5adb=_0x1ef07e;let _0x46b1ad,_0x57c642=[];logHistory(_0x6a5adb(0x1ca),_0x6a5adb(0x1e5)),_0xe73afe[_0x6a5adb(0x1e9)]['forEach'](_0x5f2603=>{const _0x4ef78c=_0x6a5adb;if(_0x5f2603[_0x4ef78c(0x1d0)]!=_0x4ef78c(0x195)&&!_0x5f2603[_0x4ef78c(0x131)])_0x57c642['push']({'coin':_0x5f2603[_0x4ef78c(0x1d0)],'symbol':_0x5f2603[_0x4ef78c(0x134)]});});let _0x395b0d=[];try{const _0x3ab56e=fns[_0x6a5adb(0x117)](fns[_0x6a5adb(0x154)](_0xe73afe[_0x6a5adb(0x173)]['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x39cd35 of _0x57c642){if(_0x39cd35[_0x6a5adb(0x1d0)]!=_0x6a5adb(0x195))_0x46b1ad=await exchange[_0x6a5adb(0x143)](_0x39cd35[_0x6a5adb(0x134)],Date[_0x6a5adb(0x181)](_0x3ab56e));_0x46b1ad[_0x6a5adb(0x145)](_0x16d0cb=>{const _0x1ca65d=_0x6a5adb,_0x5b474f=_0x39cd35[_0x1ca65d(0x134)]['includes']('BTC/'),_0x18dbce=fns[_0x1ca65d(0x117)](fns[_0x1ca65d(0x154)](_0x16d0cb[_0x1ca65d(0x1ba)]),_0x1ca65d(0x18e)),_0x881a92=fns[_0x1ca65d(0x117)](fns[_0x1ca65d(0x154)](_0x16d0cb['datetime']),'yyyy/MM/dd');let _0x1a8eea;if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1c7)&&_0x5b474f==![])_0x1a8eea=_0x16d0cb[_0x1ca65d(0x15a)];if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1c7)&&_0x5b474f==!![])_0x1a8eea=-_0x16d0cb['amount']*_0x16d0cb[_0x1ca65d(0x1b1)];if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1b4)&&_0x5b474f==![])_0x1a8eea=-_0x16d0cb[_0x1ca65d(0x15a)];if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1b4)&&_0x5b474f==!![])_0x1a8eea=_0x16d0cb[_0x1ca65d(0x15a)]*_0x16d0cb['price'];_0x395b0d[_0x1ca65d(0x18f)]({'timestamp':_0x18dbce,'date':_0x881a92,'coin':_0x39cd35[_0x1ca65d(0x1d0)],'symbol':_0x39cd35['symbol'],'type':_0x16d0cb[_0x1ca65d(0x133)],'side':_0x16d0cb[_0x1ca65d(0x1f0)],'reverse':_0x5b474f,'amount':formatResult(_0x16d0cb['filled'],0x8),'filled':formatResult(_0x16d0cb[_0x1ca65d(0x125)],0x8),'coinamount':formatResult(_0x1a8eea,0x8),'price':formatResult(_0x16d0cb[_0x1ca65d(0x1b1)],0x8)});let _0x5a86e0;if(_0x16d0cb['side']==_0x1ca65d(0x1c7)&&_0x5b474f==![])_0x5a86e0=-_0x16d0cb[_0x1ca65d(0x15a)]*_0x16d0cb[_0x1ca65d(0x1b1)];if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1c7)&&_0x5b474f==!![])_0x5a86e0=_0x16d0cb['amount'];if(_0x16d0cb[_0x1ca65d(0x1f0)]=='sell'&&_0x5b474f==![])_0x5a86e0=_0x16d0cb[_0x1ca65d(0x15a)]*_0x16d0cb['price'];if(_0x16d0cb[_0x1ca65d(0x1f0)]==_0x1ca65d(0x1b4)&&_0x5b474f==!![])_0x5a86e0=-_0x16d0cb['amount'];_0x395b0d[_0x1ca65d(0x18f)]({'date':_0x881a92,'coin':_0x1ca65d(0x195),'coinamount':formatResult(_0x5a86e0,0x8)});});}_0x395b0d['sort']((_0xf9c431,_0x5ba59c)=>_0xf9c431[_0x6a5adb(0x162)]>_0x5ba59c[_0x6a5adb(0x162)]?0x1:_0x5ba59c[_0x6a5adb(0x162)]>_0xf9c431[_0x6a5adb(0x162)]?-0x1:0x0),dbLogs[_0x6a5adb(0x13f)](_0x6a5adb(0x159))[_0x6a5adb(0x18b)]()[_0x6a5adb(0x15c)](),_0x395b0d['forEach'](_0x185cff=>{const _0x46e84e=_0x6a5adb;let _0x250291;_0x185cff[_0x46e84e(0x1d0)]!=_0x46e84e(0x195)&&(_0x250291={'time':_0x185cff[_0x46e84e(0x162)],'type':'order','event':_0x46e84e(0x1a0)+_0x185cff[_0x46e84e(0x134)]+'\x20'+_0x185cff[_0x46e84e(0x1f0)]+'\x20#'+_0x185cff[_0x46e84e(0x15a)]+'\x20@'+_0x185cff[_0x46e84e(0x1b1)]},dbLogs[_0x46e84e(0x13f)](_0x46e84e(0x159))[_0x46e84e(0x18f)](_0x250291)['write']());});const _0x138b06=fns[_0x6a5adb(0x1e6)]({'start':new Date(_0xe73afe[_0x6a5adb(0x173)]),'end':new Date()})['map'](_0x12bed0=>fns[_0x6a5adb(0x117)](_0x12bed0,'yyyy/MM/dd'));let _0x2de180=[];_0xe73afe[_0x6a5adb(0x1e9)][_0x6a5adb(0x145)](_0x4d92b3=>{const _0x29da8c=_0x6a5adb;if(!_0x4d92b3[_0x29da8c(0x131)]){_0x2de180[_0x4d92b3[_0x29da8c(0x1d0)]]=[];let _0x5c6286=_0x4d92b3[_0x29da8c(0x17d)];_0x138b06['forEach']((_0x3975bf,_0x5d6253)=>{const _0x5d9ab8=_0x29da8c;let _0x292012=_0x395b0d[_0x5d9ab8(0x120)](_0x128dd6=>_0x128dd6[_0x5d9ab8(0x1d0)]==_0x4d92b3[_0x5d9ab8(0x1d0)]&&_0x128dd6['date']==_0x3975bf);if(_0x292012[_0x5d9ab8(0x14f)]!=0x0){let _0x2c6848=_0x292012['reduce']((_0x4cbf58,_0x1c0750)=>{const _0x1a9bb5=_0x5d9ab8;return _0x4cbf58+=_0x1c0750[_0x1a9bb5(0x151)],_0x4cbf58;},0x0);_0x5c6286+=_0x2c6848;}_0x2de180[_0x4d92b3[_0x5d9ab8(0x1d0)]][_0x3975bf]=_0x5c6286;});}});const _0x2f7e11=[..._0x57c642];_0x2f7e11[_0x6a5adb(0x18f)]({'coin':stablecoins[_0x6a5adb(0x11c)][_0x6a5adb(0x1d0)],'symbol':stablecoins['eur'][_0x6a5adb(0x134)]}),_0x2f7e11[_0x6a5adb(0x18f)]({'coin':stablecoins[_0x6a5adb(0x1bc)][_0x6a5adb(0x1d0)],'symbol':stablecoins[_0x6a5adb(0x1bc)][_0x6a5adb(0x134)]});let _0x2fb1ea=[];for(const _0x140370 of _0x2f7e11){_0x2fb1ea[_0x140370[_0x6a5adb(0x1d0)]]=await getCloses(_0x140370[_0x6a5adb(0x134)],new Date(_0xe73afe['startdate']));}dbPerformance[_0x6a5adb(0x13f)]('data')['remove']()[_0x6a5adb(0x15c)](),_0x138b06['forEach']((_0x4c45c7,_0x549b0f)=>{const _0x3f7a64=_0x6a5adb;let _0xb1bd20,_0x217c29=[];_0x549b0f==0x0?(_0xe73afe['portfolio']['forEach'](_0x194156=>{const _0x4ab666=_0x2395;!_0x194156[_0x4ab666(0x131)]&&_0x217c29[_0x4ab666(0x18f)]({'coin':_0x194156[_0x4ab666(0x1d0)],'number':_0x194156['startnumber'],'price':_0x194156[_0x4ab666(0x1cb)]});}),_0xb1bd20={'date':_0x4c45c7,'eur':_0x2fb1ea[stablecoins['eur']['coin']][_0x549b0f],'usd':_0x2fb1ea[stablecoins['usd'][_0x3f7a64(0x1d0)]][_0x549b0f],'coins':_0x217c29}):(_0xe73afe[_0x3f7a64(0x1e9)]['forEach'](_0x3cd355=>{const _0x26835c=_0x3f7a64;!_0x3cd355[_0x26835c(0x131)]&&_0x217c29[_0x26835c(0x18f)]({'coin':_0x3cd355[_0x26835c(0x1d0)],'number':_0x2de180[_0x3cd355[_0x26835c(0x1d0)]][_0x4c45c7],'price':_0x3cd355[_0x26835c(0x1d0)]==_0x26835c(0x195)?0x1:_0x2fb1ea[_0x3cd355[_0x26835c(0x1d0)]][_0x549b0f]});}),_0xb1bd20={'date':_0x4c45c7,'eur':_0x2fb1ea[stablecoins[_0x3f7a64(0x11c)][_0x3f7a64(0x1d0)]][_0x549b0f],'usd':_0x2fb1ea[stablecoins[_0x3f7a64(0x1bc)][_0x3f7a64(0x1d0)]][_0x549b0f],'coins':_0x217c29}),dbPerformance['get'](_0x3f7a64(0x1b7))[_0x3f7a64(0x18f)](_0xb1bd20)[_0x3f7a64(0x15c)]();}),emitPerformance(),await resetCoinResults();for(let _0x20f86b of _0x395b0d){_0x20f86b['coin']!='BTC'&&await updateCoinResults(_0x20f86b);}logHistory(_0x6a5adb(0x1ca),_0x6a5adb(0x138));}catch(_0x59009e){await handleError(_0x59009e,'recreateHistory()');}}async function getCloses(_0x270aa0,_0x12165a,_0x1f5e96=undefined){const _0x3adff2=_0x1ef07e,_0x11d0eb='1d';let _0x191d06,_0x18ae7f;const _0x4ed675=fns[_0x3adff2(0x17e)](new Date(),_0x12165a)+0x1;try{const _0x3c8eb4=exchange['milliseconds']()-_0x4ed675*0x18*0xe10*0x3e8;_0x191d06=await exchange[_0x3adff2(0x111)](_0x270aa0,_0x11d0eb,_0x3c8eb4,_0x1f5e96),_0x18ae7f=await exchange[_0x3adff2(0x17c)](_0x270aa0);}catch(_0x467810){await handleError(_0x467810,'getCloses()');}let _0x2d3742=ohlcvToCloses(_0x191d06);return _0x2d3742['push'](_0x18ae7f[_0x270aa0][_0x3adff2(0x1c4)]),_0x2d3742;}function ohlcvToCloses(_0x4e9e52){const _0x555078=_0x1ef07e;let _0x3b8b4f=[];return _0x4e9e52[_0x555078(0x145)](function(_0x1ea3f6){const _0x544a7b=_0x555078;_0x3b8b4f[_0x544a7b(0x18f)](_0x1ea3f6[0x4]);}),_0x3b8b4f;}function getConfiguration(_0x688224){const _0x2004e3=_0x1ef07e;let _0x5a9016=dbConfig[_0x2004e3(0x13f)](_0x2004e3(0x139))[_0x2004e3(0x1b6)]({'botID':_0x688224})[_0x2004e3(0x1a9)]();if(_0x5a9016){let _0x1adbf4=![];!_0x5a9016[_0x2004e3(0x126)]&&(_0x5a9016={..._0x5a9016,'exchange':_0x2004e3(0xfe)},_0x1adbf4=!![]),!_0x5a9016[_0x2004e3(0x1ec)]&&(_0x5a9016={..._0x5a9016,'ordertype':_0x2004e3(0x13c)},_0x1adbf4=!![]),!_0x5a9016[_0x2004e3(0x18c)]&&(_0x5a9016={..._0x5a9016,'timeout':0x14},_0x1adbf4=!![]),_0x1adbf4&&(_0x5a9016={'botID':_0x5a9016[_0x2004e3(0x193)],'exchange':_0x5a9016[_0x2004e3(0x126)],'apiKey':_0x5a9016[_0x2004e3(0x147)],'apiSecret':_0x5a9016[_0x2004e3(0x10f)],'botname':_0x5a9016[_0x2004e3(0x1b9)],'threshold':_0x5a9016[_0x2004e3(0x136)],'ordertype':_0x5a9016[_0x2004e3(0x1ec)],'timeout':_0x5a9016[_0x2004e3(0x18c)],'startdate':_0x5a9016[_0x2004e3(0x173)],'recreate':_0x5a9016[_0x2004e3(0x16d)],'timeshift':_0x5a9016[_0x2004e3(0x11a)],'headless':_0x5a9016['headless'],'cooldown':_0x5a9016[_0x2004e3(0x186)],'portfolio':_0x5a9016[_0x2004e3(0x1e9)]},dbConfig[_0x2004e3(0x13f)](_0x2004e3(0x139))[_0x2004e3(0x18b)]()[_0x2004e3(0x15c)](),dbConfig[_0x2004e3(0x13f)](_0x2004e3(0x139))['push'](_0x5a9016)[_0x2004e3(0x15c)]());}else _0x5a9016={'botID':_0x688224,'exchange':'binance','apiKey':'','apiSecret':'','botname':_0x2004e3(0x15f)+_0x688224,'threshold':'3','ordertype':_0x2004e3(0x13c),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2004e3(0x11a)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x5a9016;}function emittedConfiguration(){const _0x596990=_0x1ef07e;let _0x1abda2;return config['apiKey']==''?_0x1abda2=config:_0x1abda2={...config,'apiKey':_0x596990(0x1e2),'apiSecret':_0x596990(0x1e2)},_0x1abda2;}function getSettings(){const _0xfa9ba2=_0x1ef07e;return dbSettings[_0xfa9ba2(0x13f)](_0xfa9ba2(0x100))[_0xfa9ba2(0x1a9)]();}function getSecure(){const _0x59b565=_0x1ef07e;return dbSecure[_0x59b565(0x13f)]('secure')[_0x59b565(0x1a9)]()||{};}function updateTimeshift(_0x288b47){const _0x1ffba8=_0x1ef07e;let _0x4e3c07=dbConfig[_0x1ffba8(0x13f)](_0x1ffba8(0x139))['find']({'botID':botID})['value']();_0x4e3c07&&dbConfig[_0x1ffba8(0x13f)](_0x1ffba8(0x139))['find']({'botID':botID})[_0x1ffba8(0x140)]({'timeshift':_0x288b47})['write'](),config[_0x1ffba8(0x11a)]=_0x288b47,proxyEmit(_0x1ffba8(0xf4),emittedConfiguration());}async function storeConfiguration(_0x3c5334){const _0x587854=_0x1ef07e;let _0x54d8ff=dbConfig['get'](_0x587854(0x139))[_0x587854(0x1b6)]({'botID':botID})[_0x587854(0x1a9)]();_0x3c5334={..._0x3c5334,'apiKey':crypt[_0x587854(0x189)](secure[_0x587854(0xf8)],_0x3c5334[_0x587854(0x147)])['message'],'apiSecret':crypt['decrypt'](secure[_0x587854(0xf8)],_0x3c5334['apiSecret'])['message']};if(_0x54d8ff){if(_0x3c5334[_0x587854(0x147)]==_0x587854(0x1e2))_0x3c5334['apiKey']=config['apiKey'];if(_0x3c5334[_0x587854(0x10f)]==_0x587854(0x1e2))_0x3c5334[_0x587854(0x10f)]=config[_0x587854(0x10f)];dbConfig['get']('bot')[_0x587854(0x1b6)]({'botID':botID})[_0x587854(0x140)](_0x3c5334)[_0x587854(0x15c)]();}else dbConfig[_0x587854(0x13f)]('bot')[_0x587854(0x18f)](_0x3c5334)[_0x587854(0x15c)](),process[_0x587854(0x1e7)]({'status':_0x587854(0x1b5),'live':_0x587854(0xfd)});config={..._0x3c5334};if(config[_0x587854(0x16d)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x587854(0x1e7)]({'botname':_0x3c5334['botname']}),proxyEmit(_0x587854(0x107)),reset();}async function storeHeadless(_0x2ca2b4){const _0x27a4cf=_0x1ef07e,_0x171439={...config,'headless':_0x2ca2b4[_0x27a4cf(0x1ae)]};let _0x459cb0=dbConfig[_0x27a4cf(0x13f)](_0x27a4cf(0x139))[_0x27a4cf(0x1b6)]({'botID':botID})['value']();_0x459cb0&&dbConfig[_0x27a4cf(0x13f)](_0x27a4cf(0x139))['find']({'botID':botID})[_0x27a4cf(0x140)](_0x171439)[_0x27a4cf(0x15c)](),config={..._0x171439},proxyEmit(_0x27a4cf(0xf4),emittedConfiguration());}function noslash(_0xbefcf5){const _0x2ffed6=_0x1ef07e;return _0xbefcf5[_0x2ffed6(0x16c)]('/','');}function updateNumberCoins(_0x2585d8){const _0x26e0c6=_0x1ef07e;_0x2585d8[_0x26e0c6(0x12e)]&&_0x2585d8['eventType']==_0x26e0c6(0x128)&&_0x2585d8['balances'][_0x26e0c6(0x145)](_0x276f84=>{const _0x5ec950=_0x26e0c6;let _0x14f9ee=currentCoins['find'](_0x294f9f=>_0x294f9f['coin']==_0x276f84[_0x5ec950(0x1a5)]);if(_0x14f9ee)_0x14f9ee[_0x5ec950(0x11d)]=Number(_0x276f84['availableBalance']);}),_0x2585d8[_0x26e0c6(0x12e)]&&_0x2585d8[_0x26e0c6(0x12e)]==_0x26e0c6(0x13a)&&(_0x2585d8[_0x26e0c6(0x1dd)]==_0x26e0c6(0x15d)&&_0x2585d8[_0x26e0c6(0x150)]==_0x26e0c6(0x1c8)&&lastOrders[_0x26e0c6(0x145)](_0x22b735=>{const _0x5282db=_0x26e0c6;if(_0x22b735[_0x5282db(0x178)]==_0x2585d8['orderId']){if(_0x22b735[_0x5282db(0x1ea)])_0x22b735[_0x5282db(0x125)]=_0x2585d8['accumulatedQuantity']*_0x22b735[_0x5282db(0x1b1)];else _0x22b735['filled']=_0x2585d8[_0x5282db(0x109)];}}));}async function getCoins(_0x5b0660=!![]){const _0x1386b9=_0x1ef07e;let _0xe0e19,_0x11ccde=[],_0x26999e=[],_0x46f61d=[];try{_0xe0e19=await exchange['fetchBalance'](),mybalances=_0xe0e19[_0x1386b9(0x10c)];if(!_0x5b0660)for(const [_0x55e459,_0x5a2ecd]of Object[_0x1386b9(0x170)](mybalances)){_0x46f61d[_0x1386b9(0x18f)](_0x55e459);}else config[_0x1386b9(0x1e9)][_0x1386b9(0x145)](_0xb49b14=>{const _0x185d84=_0x1386b9;if(!_0xb49b14[_0x185d84(0x131)])_0x46f61d['push'](_0xb49b14[_0x185d84(0x1d0)]);});for(const [_0x429d17,_0x4e67f3]of Object[_0x1386b9(0x170)](mybalances)){if(_0x46f61d['includes'](_0x429d17)){if((_0x4e67f3[_0x1386b9(0x158)]()!=0x0||config[_0x1386b9(0x1e9)]['find'](_0x67dcfd=>_0x67dcfd[_0x1386b9(0x1d0)]==_0x429d17))&&(allSymbols[_0x1386b9(0x1f1)](_0x429d17+_0x1386b9(0x171))||_0x429d17==_0x1386b9(0x195)))_0x26999e[_0x1386b9(0x18f)]({'coin':_0x429d17,'symbol':_0x429d17+_0x1386b9(0x171),'reverse':![],'number':_0x4e67f3}),_0x429d17!='BTC'&&_0x11ccde[_0x1386b9(0x18f)](_0x429d17+_0x1386b9(0x171));else(_0x4e67f3[_0x1386b9(0x158)]()!=0x0||config['portfolio'][_0x1386b9(0x1b6)](_0x39458b=>_0x39458b[_0x1386b9(0x1d0)]==_0x429d17))&&allSymbols[_0x1386b9(0x1f1)](_0x1386b9(0xfa)+_0x429d17)&&(_0x26999e['push']({'coin':_0x429d17,'symbol':'BTC/'+_0x429d17,'reverse':!![],'number':_0x4e67f3}),_0x429d17!=_0x1386b9(0x195)&&_0x11ccde[_0x1386b9(0x18f)]('BTC/'+_0x429d17));}}}catch(_0x366736){if(!_0x5b0660){if(_0x366736[_0x1386b9(0x158)]()[_0x1386b9(0x1f1)](_0x1386b9(0x119)))return logHistory(_0x1386b9(0x1a3),_0x1386b9(0x132)),![];else{if(_0x366736[_0x1386b9(0x158)]()[_0x1386b9(0x1f1)]('AuthenticationError'))return logHistory(_0x1386b9(0x1a3),_0x1386b9(0x123)),![];else{if(_0x366736[_0x1386b9(0x158)]()['includes'](_0x1386b9(0x152)))return logHistory(_0x1386b9(0x1a3),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x366736,_0x1386b9(0xf2));}}}else await handleError(_0x366736,_0x1386b9(0xf2));}return _0x26999e;}async function getPortfolio(_0x27961a){const _0x448821=_0x1ef07e;let _0x2e37f1=[],_0x3dd47f=[],_0x5e4bac,_0x4cbe94=[],_0x3a4cd0,_0x796ba8;_0x27961a['apiKey']===_0x448821(0x1e2)||_0x27961a[_0x448821(0x10f)]===_0x448821(0x1e2)?(_0x3a4cd0=config[_0x448821(0x147)],_0x796ba8=config[_0x448821(0x10f)]):(_0x3a4cd0=_0x27961a[_0x448821(0x147)],_0x796ba8=_0x27961a[_0x448821(0x10f)]);await initExchange(_0x3a4cd0,_0x796ba8);let _0x3ccd47=await loadSymbols();if(_0x3ccd47){_0x4cbe94=await getCoins(![]);if(_0x4cbe94===![])proxyEmit(_0x448821(0x1e9),![]);else{_0x4cbe94[_0x448821(0x145)](_0x563e6e=>{const _0x399afb=_0x448821;_0x2e37f1[_0x399afb(0x18f)](_0x563e6e[_0x399afb(0x134)]);});try{_0x3dd47f=await exchange[_0x448821(0x17c)](_0x2e37f1);}catch(_0xff405e){await handleError(_0xff405e,_0x448821(0x10b));}_0x4cbe94[_0x448821(0x145)](_0x51dd22=>{const _0x23030e=_0x448821;_0x51dd22['coin']!='BTC'?_0x5e4bac=_0x51dd22['reverse']?0x1/_0x3dd47f[_0x51dd22[_0x23030e(0x134)]][_0x23030e(0x1c4)]:_0x3dd47f[_0x51dd22['symbol']][_0x23030e(0x1c4)]:_0x5e4bac=0x1,_0x51dd22[_0x23030e(0x1b1)]=formatResult(_0x5e4bac,0x8);}),proxyEmit(_0x448821(0x1e9),_0x4cbe94);}}else proxyEmit(_0x448821(0x1e9),![]);}function checkMinimums(_0x47d8cc){const _0x3d4737=_0x1ef07e;let _0x351ee4=!![];const _0x4a1f33=!_0x47d8cc[_0x3d4737(0x1ea)]?markets[_0x47d8cc['symbol']][_0x3d4737(0x153)][_0x3d4737(0x15a)][_0x3d4737(0x1b8)]:markets[_0x47d8cc[_0x3d4737(0x134)]][_0x3d4737(0x153)][_0x3d4737(0x1cd)][_0x3d4737(0x1b8)],_0x3f1e9e=!_0x47d8cc[_0x3d4737(0x1ea)]?markets[_0x47d8cc['symbol']][_0x3d4737(0x153)][_0x3d4737(0x1cd)][_0x3d4737(0x1b8)]:markets[_0x47d8cc[_0x3d4737(0x134)]][_0x3d4737(0x153)][_0x3d4737(0x15a)]['min'];if(Math[_0x3d4737(0x1db)](_0x47d8cc[_0x3d4737(0x190)])<_0x4a1f33)_0x351ee4=![];if(Math['abs'](_0x47d8cc[_0x3d4737(0x190)])*_0x47d8cc['last']<_0x3f1e9e)_0x351ee4=![];return _0x351ee4;}async function getBalances(){const _0x34313d=_0x1ef07e;let _0x17374f=0x0,_0x5846f8;const _0x1c5563=config[_0x34313d(0x136)];currentCoins[_0x34313d(0x145)](_0x4d7426=>{const _0x5b498a=_0x34313d;if(_0x4d7426[_0x5b498a(0x1d0)]!=_0x5b498a(0x195)){let _0x553aee=global[_0x5b498a(0x1c0)][noslash(_0x4d7426[_0x5b498a(0x134)])];_0x5846f8=_0x4d7426[_0x5b498a(0x1ea)]?0x1/_0x553aee:_0x553aee;}else _0x5846f8=0x1;let _0x4fb590=_0x4d7426['number']*_0x5846f8;_0x17374f+=_0x4fb590,_0x4d7426[_0x5b498a(0x1c4)]=formatResult(Number(_0x5846f8),0x8),_0x4d7426[_0x5b498a(0x1a9)]=_0x4fb590;}),currentCoins['forEach'](_0x1b5cf6=>{const _0x480cac=_0x34313d;let _0x3129b3=config[_0x480cac(0x1e9)][_0x480cac(0x1b6)](_0xb3dc03=>_0xb3dc03['coin']==_0x1b5cf6[_0x480cac(0x1d0)]),_0x367725=Number(_0x3129b3[_0x480cac(0x183)]),_0x429df1=_0x1b5cf6[_0x480cac(0x1a9)]/_0x17374f*0x64,_0x3bc348=_0x367725*_0x17374f/0x64/_0x1b5cf6[_0x480cac(0x1c4)]-_0x1b5cf6[_0x480cac(0x11d)];_0x1b5cf6[_0x480cac(0x183)]=formatResult(_0x429df1,0x3),_0x1b5cf6[_0x480cac(0xf9)]=formatResult(_0x367725,0x3),_0x1b5cf6[_0x480cac(0x190)]=formatResult(_0x3bc348,0x8),_0x1b5cf6[_0x480cac(0x1f0)]='',_0x1b5cf6[_0x480cac(0x169)]='';if(_0x1b5cf6[_0x480cac(0x1d0)]!=_0x480cac(0x195)){if(_0x1b5cf6[_0x480cac(0x183)]>_0x367725)_0x1b5cf6[_0x480cac(0x1f0)]=_0x480cac(0x1b4),_0x1b5cf6[_0x480cac(0x169)]=checkMinimums(_0x1b5cf6);else _0x1b5cf6[_0x480cac(0x183)]<_0x367725&&(_0x1b5cf6[_0x480cac(0x1f0)]='buy',_0x1b5cf6[_0x480cac(0x169)]=checkMinimums(_0x1b5cf6));}_0x1b5cf6['delta']=_0x1b5cf6['distribution']/_0x1b5cf6['target']-0x1;}),currentCoins[_0x34313d(0x11e)]((_0x39667b,_0x366472)=>_0x39667b['delta']<_0x366472[_0x34313d(0x1a4)]?0x1:_0x366472[_0x34313d(0x1a4)]<_0x39667b[_0x34313d(0x1a4)]?-0x1:0x0);const _0x1346dd=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1346dd['eur'],'usd':_0x1346dd[_0x34313d(0x1bc)],'portfolio':JSON[_0x34313d(0x1ac)](currentCoins),'threshold':_0x1c5563},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x34313d(0x1ae)])headlessMode({'portfolio':currentCoins,'threshold':_0x1c5563});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x26a96c=_0x1ef07e;if(!lastBalances)return;let _0x2b9c0f=await getStartingBalances(![]),_0x200ec9=[],_0x2f264b=[],_0x1f1d79;JSON[_0x26a96c(0x181)](lastBalances[_0x26a96c(0x1e9)])[_0x26a96c(0x145)](_0x69f49=>{const _0x53ca9f=_0x26a96c;let _0x35c444={'coin':_0x69f49[_0x53ca9f(0x1d0)],'number':_0x69f49[_0x53ca9f(0x11d)],'price':_0x69f49[_0x53ca9f(0x1c4)]};_0x200ec9[_0x53ca9f(0x18f)](_0x35c444);if(!_0x2b9c0f[_0x53ca9f(0x1d7)]||!_0x2b9c0f[_0x53ca9f(0x1d7)]['find'](_0x4b1c50=>_0x4b1c50[_0x53ca9f(0x1d0)]==_0x69f49[_0x53ca9f(0x1d0)]&&_0x4b1c50[_0x53ca9f(0x11d)]!=0x0))_0x2f264b[_0x53ca9f(0x18f)](_0x35c444);});const _0x22df06=await getFiat();_0x1f1d79={'date':lastBalances[_0x26a96c(0x194)]['split']('\x20')[0x0],'eur':_0x22df06[_0x26a96c(0x11c)],'usd':_0x22df06[_0x26a96c(0x1bc)],'coins':_0x200ec9};let _0x28831b=dbPerformance[_0x26a96c(0x13f)]('data')[_0x26a96c(0x1b6)]({'date':_0x1f1d79[_0x26a96c(0x167)]})[_0x26a96c(0x1a9)]();_0x28831b?dbPerformance[_0x26a96c(0x13f)](_0x26a96c(0x1b7))['find']({'date':_0x1f1d79['date']})[_0x26a96c(0x140)](_0x1f1d79)[_0x26a96c(0x15c)]():dbPerformance[_0x26a96c(0x13f)](_0x26a96c(0x1b7))['push'](_0x1f1d79)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0xdef91=_0x1ef07e;if(dbPerformance[_0xdef91(0x10d)](_0xdef91(0x1b7))[_0xdef91(0x1a9)]()){let _0x573aef=dbPerformance[_0xdef91(0x13f)](_0xdef91(0x1b7))[_0xdef91(0x19c)](_0xdef91(0x167))[_0xdef91(0x1a9)]();proxyEmit(_0xdef91(0x165),_0x573aef),lastPerformanceEmitted=getDate();}else proxyEmit(_0xdef91(0x165),[]);}async function getStartingBalances(_0xac7568=!![]){const _0x29e346=_0x1ef07e;let _0xe51bda=dbPerformance[_0x29e346(0x13f)](_0x29e346(0x1b7))[_0x29e346(0x1b6)]({'date':config[_0x29e346(0x173)]})[_0x29e346(0x1a9)]();config[_0x29e346(0x147)]!=''&&!_0xe51bda&&(await setStartDatePerformance(config),_0xe51bda=dbPerformance[_0x29e346(0x13f)](_0x29e346(0x1b7))['find']({'date':config[_0x29e346(0x173)]})[_0x29e346(0x1a9)]());if(config[_0x29e346(0x147)]==''||!_0xe51bda)return{};let _0x23e57d=0x0,_0x2fd367=0x0,_0x25dbc2=0x0,_0x70f5f6=[],_0x545e50=0x0;config[_0x29e346(0x1e9)][_0x29e346(0x145)](_0x538379=>{const _0x44a418=_0x29e346;!_0x538379['excluded']&&(_0x70f5f6[_0x545e50]={'coin':_0x538379[_0x44a418(0x1d0)],'symbol':_0x538379[_0x44a418(0x134)],'number':_0x538379[_0x44a418(0x17d)],'price':_0x538379[_0x44a418(0x1cb)]},_0x23e57d+=_0x538379[_0x44a418(0x1cb)]*_0x538379['startnumber'],_0x2fd367+=_0x538379[_0x44a418(0x1cb)]*_0x538379['startnumber']*_0xe51bda[_0x44a418(0x11c)],_0x25dbc2+=_0x538379[_0x44a418(0x1cb)]*_0x538379[_0x44a418(0x17d)]*_0xe51bda[_0x44a418(0x1bc)],_0x545e50++);});let _0xae5a13={'btc':_0x23e57d,'eur':_0x2fd367,'usd':_0x25dbc2,'coins':_0x70f5f6};if(_0xac7568)proxyEmit('starting-balances',_0xae5a13);return _0xae5a13;}function headlessMode(_0x58303b){const _0x231b74=_0x1ef07e;let _0x2f2393=_0x58303b[_0x231b74(0x1e9)],_0x56a7e0=_0x58303b['threshold'],_0x1613bf=[];for(let _0x1f093e of _0x2f2393){if(_0x1f093e['coin']!=_0x231b74(0x195)){if(_0x1f093e[_0x231b74(0x183)]/_0x1f093e[_0x231b74(0xf9)]-0x1>=_0x56a7e0/0x64){if(_0x1f093e[_0x231b74(0x169)])_0x1613bf[_0x231b74(0x18f)](_0x1f093e);}else{if(_0x1f093e[_0x231b74(0x183)]/_0x1f093e['target']-0x1<=-_0x56a7e0/0x64){if(_0x1f093e[_0x231b74(0x169)])_0x1613bf[_0x231b74(0x18f)](_0x1f093e);}}}}_0x1613bf['length']>0x0&&placeOrder(_0x1613bf);}function symbolToCoin(_0x364e90){const _0x5cc3ea=_0x1ef07e;let _0x4c4cc8;if(_0x364e90['includes'](_0x5cc3ea(0x171)))_0x4c4cc8=_0x364e90['replace'](_0x5cc3ea(0x171),'');if(_0x364e90[_0x5cc3ea(0x1f1)](_0x5cc3ea(0xfa)))_0x4c4cc8=_0x364e90['replace'](_0x5cc3ea(0xfa),'');return _0x4c4cc8;}async function validateOrders(_0x11fc88=0x0){const _0x3e50ce=_0x1ef07e;let _0x252efb=[],_0x344a06=config[_0x3e50ce(0x1ec)]==_0x3e50ce(0x13c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3e50ce(0x18c)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x3e50ce(0x145)](_0x104c2a=>{const _0x326810=_0x3e50ce;let _0x249842=previousCoins[_0x326810(0x1b6)](_0x2410f7=>_0x2410f7[_0x326810(0x1d0)]==symbolToCoin(_0x104c2a[_0x326810(0x134)])),_0x4e40c8=currentCoins[_0x326810(0x1b6)](_0x39ad50=>_0x39ad50['coin']==symbolToCoin(_0x104c2a[_0x326810(0x134)])),_0x3f99fe,_0x2d08c0;_0x104c2a['side']==_0x326810(0x1c7)&&!_0x104c2a[_0x326810(0x1ea)]||_0x104c2a[_0x326810(0x1f0)]=='sell'&&_0x104c2a['reverse']?(_0x3f99fe=_0x249842['number']+0.9*_0x104c2a[_0x326810(0x125)],_0x2d08c0=_0x249842[_0x326810(0x11d)]+1.1*_0x104c2a[_0x326810(0x125)]):(_0x3f99fe=_0x249842[_0x326810(0x11d)]-1.1*_0x104c2a[_0x326810(0x125)],_0x2d08c0=_0x249842[_0x326810(0x11d)]-0.9*_0x104c2a[_0x326810(0x125)]);const _0x563fe8=_0x104c2a[_0x326810(0x125)]!=0x0&&_0x4e40c8[_0x326810(0x11d)]>=_0x3f99fe&&_0x4e40c8[_0x326810(0x11d)]<=_0x2d08c0;_0x252efb['push'](_0x563fe8);if(_0x563fe8&&config[_0x326810(0x1ec)]!='market'){if(_0x104c2a['reverse'])logHistory(_0x326810(0x185),_0x326810(0x102)+_0x104c2a[_0x326810(0x134)]+'\x20'+_0x104c2a[_0x326810(0x1f0)]+'\x20#'+formatResult(_0x104c2a[_0x326810(0x125)]/_0x104c2a['price'],0x8)+'\x20@'+formatResult(_0x104c2a[_0x326810(0x1b1)],0x8));else logHistory('order',_0x326810(0x102)+_0x104c2a[_0x326810(0x134)]+'\x20'+_0x104c2a[_0x326810(0x1f0)]+'\x20#'+formatResult(_0x104c2a[_0x326810(0x125)],0x8)+'\x20@'+formatResult(_0x104c2a['price'],0x8));}}),_0x252efb['forEach']((_0x3c02d2,_0x462576)=>{const _0x1130ce=_0x3e50ce;if(_0x3c02d2)lastOrders[_0x1130ce(0x1e1)](_0x462576,0x1);});if(_0x11fc88<_0x344a06&&_0x252efb[_0x3e50ce(0x1f1)](![])){if(_0x11fc88==0x0){config[_0x3e50ce(0x1ec)]==_0x3e50ce(0x13c)?logHistory(_0x3e50ce(0x1a3),_0x3e50ce(0x10e)):logHistory(_0x3e50ce(0x1a3),_0x3e50ce(0x135));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11fc88);},0xa*0x3e8);}else{(_0x11fc88==0x1||_0x11fc88==Math[_0x3e50ce(0xff)](_0x344a06/0x2)||_0x11fc88==_0x344a06-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11fc88);},validateOrderInterval);}}else{lockOrders=![];if(_0x11fc88>0x0&&!_0x252efb[_0x3e50ce(0x1f1)](![]))config[_0x3e50ce(0x1ec)]==_0x3e50ce(0x13c)?logHistory(_0x3e50ce(0x1ca),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x3e50ce(0x1ca),_0x3e50ce(0x17b));else _0x11fc88>0x0&&_0x252efb[_0x3e50ce(0x1f1)](![])&&(config[_0x3e50ce(0x1ec)]==_0x3e50ce(0x13c)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3e50ce(0xff)](_0x344a06*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x3e50ce(0x145)](async _0x243a2a=>{const _0x1e915a=_0x3e50ce;try{const _0x30b96c=await exchange[_0x1e915a(0x180)](_0x243a2a[_0x1e915a(0x178)],_0x243a2a[_0x1e915a(0x134)]);}catch(_0x532645){if(_0x532645[_0x1e915a(0x158)]()['includes'](_0x1e915a(0x129))){}else await handleError(_0x532645,_0x1e915a(0x13b));}}),logHistory(_0x3e50ce(0x1ca),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x344a06*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x2305ae=_0x1ef07e;dbCoinResults['get'](_0x2305ae(0x1d7))[_0x2305ae(0x18b)]()[_0x2305ae(0x15c)]();let _0x26bb1a=await getStartingBalances(![]);_0x26bb1a[_0x2305ae(0x1d7)][_0x2305ae(0x145)](_0x5e5ba3=>{const _0x2bb7be=_0x2305ae,_0x2e4922=_0x5e5ba3[_0x2bb7be(0x134)][_0x2bb7be(0x1f1)]('BTC/');if(_0x5e5ba3[_0x2bb7be(0x1d0)]!=_0x2bb7be(0x195)){let _0x374df8={'coin':_0x5e5ba3['coin'],'number':_0x5e5ba3[_0x2bb7be(0x11d)],'breakeven':_0x5e5ba3['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2bb7be(0x13f)]('coins')[_0x2bb7be(0x18f)](_0x374df8)['write']();}});}async function updateCoinResults(_0x55d8a8){const _0x12033a=_0x1ef07e;let _0x3c160b,_0x193f6c,_0x27aa14,_0x28f085,_0x4beaff,_0x11773e,_0x522b31=dbCoinResults[_0x12033a(0x13f)](_0x12033a(0x1d7))[_0x12033a(0x1b6)]({'coin':_0x55d8a8[_0x12033a(0x1d0)]})['value']();if(!_0x522b31)return;if(_0x55d8a8[_0x12033a(0x146)]&&_0x55d8a8[_0x12033a(0x146)][_0x12033a(0x1c9)]==_0x12033a(0x195))_0x3c160b=_0x55d8a8['fee'][_0x12033a(0x1cd)];else{if(_0x55d8a8[_0x12033a(0x146)]&&_0x55d8a8[_0x12033a(0x146)][_0x12033a(0x1c9)]=='BNB')_0x3c160b=_0x55d8a8[_0x12033a(0x146)][_0x12033a(0x1cd)]*global['ticker']['BNBBTC'];else _0x3c160b=0.001*_0x55d8a8[_0x12033a(0x125)];}const _0x5dfa41=_0x55d8a8[_0x12033a(0x134)][_0x12033a(0x1f1)](_0x12033a(0xfa));_0x5dfa41&&(_0x11773e={'coin':_0x55d8a8[_0x12033a(0x1d0)],'symbol':_0x55d8a8['symbol'],'filled':_0x55d8a8['filled']*_0x55d8a8[_0x12033a(0x1b1)],'side':_0x55d8a8['side']==_0x12033a(0x1b4)?_0x12033a(0x1c7):_0x12033a(0x1b4),'price':0x1/_0x55d8a8[_0x12033a(0x1b1)]},_0x55d8a8={..._0x11773e});_0x55d8a8[_0x12033a(0x1f0)]==_0x12033a(0x1c7)?_0x27aa14=(_0x522b31['breakeven']*_0x522b31['number']+_0x55d8a8[_0x12033a(0x1b1)]*_0x55d8a8[_0x12033a(0x125)])/(_0x522b31[_0x12033a(0x11d)]+_0x55d8a8[_0x12033a(0x125)]):_0x27aa14=(_0x522b31[_0x12033a(0x118)]*_0x522b31[_0x12033a(0x11d)]-_0x55d8a8[_0x12033a(0x1b1)]*_0x55d8a8['filled'])/(_0x522b31['number']-_0x55d8a8[_0x12033a(0x125)]);_0x55d8a8[_0x12033a(0x1f0)]=='buy'?_0x28f085=_0x522b31[_0x12033a(0x164)]:_0x28f085=_0x522b31[_0x12033a(0x164)]+(_0x55d8a8[_0x12033a(0x1b1)]-_0x522b31[_0x12033a(0x118)])*_0x55d8a8[_0x12033a(0x125)];_0x193f6c=_0x55d8a8[_0x12033a(0x1f0)]==_0x12033a(0x1b4)?_0x522b31[_0x12033a(0x11d)]-_0x55d8a8[_0x12033a(0x125)]:_0x522b31[_0x12033a(0x11d)]+_0x55d8a8['filled'],_0x4beaff=(_0x55d8a8[_0x12033a(0x1b1)]-_0x27aa14)*_0x193f6c;let _0x29b233={'coin':_0x55d8a8[_0x12033a(0x1d0)],'number':_0x193f6c,'breakeven':formatResult(_0x27aa14,0x8),'realized':formatResult(_0x28f085,0x8),'unrealized':formatResult(_0x4beaff,0x8),'fees':formatResult(_0x522b31[_0x12033a(0xf5)]+_0x3c160b,0x8),'sells':_0x55d8a8['side']=='sell'?_0x522b31[_0x12033a(0x13d)]+0x1:_0x522b31[_0x12033a(0x13d)],'buys':_0x55d8a8[_0x12033a(0x1f0)]==_0x12033a(0x1c7)?_0x522b31['buys']+0x1:_0x522b31[_0x12033a(0x174)]};dbCoinResults[_0x12033a(0x13f)](_0x12033a(0x1d7))[_0x12033a(0x1b6)]({'coin':_0x55d8a8[_0x12033a(0x1d0)]})[_0x12033a(0x140)](_0x29b233)['write']();}function _0x2395(_0x4fca11,_0x14a0ae){const _0x44d9b7=_0x477d();return _0x2395=function(_0x1184bd,_0x496e15){_0x1184bd=_0x1184bd-0xf2;let _0x477d39=_0x44d9b7[_0x1184bd];return _0x477d39;},_0x2395(_0x4fca11,_0x14a0ae);}async function placeOrder(_0x3eac81){const _0x56fe05=_0x1ef07e,_0x2adf8d=config[_0x56fe05(0x1ec)]==_0x56fe05(0x13c)?_0x56fe05(0x13c):_0x56fe05(0x19a);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x56fe05(0x181)](JSON['stringify'](currentCoins));for(const _0x356959 of _0x3eac81){let _0x3566f9,_0x1573ef,_0x1fe753,_0x447724,_0x6f9a30,_0x38fc29=_0x356959[_0x56fe05(0x134)];try{const _0x3bbdea=await exchange[_0x56fe05(0x17c)](_0x38fc29),_0x445019=_0x3bbdea[_0x38fc29];_0x3566f9=_0x445019[_0x56fe05(0x1c4)],_0x1573ef=_0x445019[_0x56fe05(0x163)],_0x1fe753=_0x445019['ask'];_0x356959['reverse']?(_0x447724=_0x356959[_0x56fe05(0x1f0)]==_0x56fe05(0x1c7)?'sell':_0x56fe05(0x1c7),_0x6f9a30=Math[_0x56fe05(0x1db)](_0x356959[_0x56fe05(0x190)])/_0x3566f9):(_0x447724=_0x356959['side'],_0x6f9a30=Math[_0x56fe05(0x1db)](_0x356959[_0x56fe05(0x190)]));_0x2adf8d==_0x56fe05(0x19a)&&(config['ordertype']==_0x56fe05(0x19d)&&(_0x3566f9=_0x447724==_0x56fe05(0x1c7)?_0x1573ef:_0x1fe753),config[_0x56fe05(0x1ec)]==_0x56fe05(0x172)&&(_0x3566f9=_0x447724==_0x56fe05(0x1c7)?_0x1fe753:_0x1573ef));_0x6f9a30=formatResult(_0x6f9a30,0x8),_0x3566f9=formatResult(_0x3566f9,0x8);const _0xe2863d=await exchange[_0x56fe05(0x18d)](_0x38fc29,_0x2adf8d,_0x447724,_0x6f9a30,_0x3566f9);lastOrders[_0x56fe05(0x18f)]({'orderId':_0xe2863d['id'],'symbol':_0x38fc29,'side':_0x447724,'reverse':_0x356959[_0x56fe05(0x1ea)],'amount':_0x356959['reverse']?_0xe2863d[_0x56fe05(0x15a)]*_0xe2863d[_0x56fe05(0x1b1)]:_0xe2863d['amount'],'filled':_0x356959[_0x56fe05(0x1ea)]?_0xe2863d[_0x56fe05(0x125)]*_0xe2863d[_0x56fe05(0x1b1)]:_0xe2863d[_0x56fe05(0x125)],'price':_0xe2863d[_0x56fe05(0x1b1)]});const _0x332710=_0x2adf8d=='market'?_0x56fe05(0x166):config[_0x56fe05(0x1ec)]=='limit-high'?_0x56fe05(0x1d9):'Limit\x20(low-margin)';if(_0x2adf8d==_0x56fe05(0x13c))logHistory(_0x56fe05(0x185),_0x332710+'\x20order:\x20'+_0x38fc29+'\x20'+_0x447724+'\x20#'+formatResult(_0xe2863d[_0x56fe05(0x125)],0x8)+'\x20@'+formatResult(_0xe2863d[_0x56fe05(0x1b1)],0x8));else logHistory(_0x56fe05(0x185),_0x332710+_0x56fe05(0x12a)+_0x38fc29+'\x20'+_0x447724+'\x20#'+formatResult(_0xe2863d[_0x56fe05(0x15a)],0x8)+'\x20@'+formatResult(_0xe2863d[_0x56fe05(0x1b1)],0x8));_0xe2863d[_0x56fe05(0x1d0)]=_0x356959[_0x56fe05(0x1d0)],await updateCoinResults(_0xe2863d);if(config[_0x56fe05(0x186)]!=0x0){let _0x203c92=null;if(cooldownTracker['length']==config[_0x56fe05(0x186)]-0x1)_0x203c92=cooldownTracker[_0x56fe05(0x1ef)]();const _0x105b00=getTimeStamp();cooldownTracker[_0x56fe05(0x18f)](_0x105b00);if(_0x203c92){const _0x359288=fns[_0x56fe05(0x1df)](new Date(_0x105b00),new Date(_0x203c92));_0x359288<cooldownInterval&&(logHistory(_0x56fe05(0x1a3),_0x56fe05(0xf7)+config['cooldown']+_0x56fe05(0x12f)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x56fe05(0x1a1)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x27a598){if(_0x27a598['toString']()[_0x56fe05(0x1f1)]('MIN_NOTIONAL'))logHistory(_0x56fe05(0x1a3),_0x56fe05(0x1e8)+_0x38fc29);else{if(_0x27a598[_0x56fe05(0x158)]()[_0x56fe05(0x1f1)]('Invalid\x20quantity'))logHistory(_0x56fe05(0x1a3),_0x56fe05(0x1dc)+_0x38fc29);else await handleError(_0x27a598,_0x56fe05(0x187));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x56fe05(0x1ae)]&&(config[_0x56fe05(0x1ec)]==_0x56fe05(0x13c)?logHistory(_0x56fe05(0x1a3),_0x56fe05(0x108)):logHistory('error',_0x56fe05(0x137)));else coolingDown&&(!config[_0x56fe05(0x1ae)]&&logHistory(_0x56fe05(0x1a3),_0x56fe05(0x1d6)));}}function logHistory(_0x4decac,_0x2bf966,_0xbf3e63=''){const _0x37835b=_0x1ef07e;let _0x24408d={'time':getTimeStamp(),'type':_0x4decac,'event':_0x2bf966};dbLogs[_0x37835b(0x13f)](_0x37835b(0x159))[_0x37835b(0x18f)](_0x24408d)['write']();if(_0xbf3e63=='')_0xbf3e63=_0x2bf966;proxyEmit(_0x37835b(0x1e4),{'log':_0x24408d,'summary':_0xbf3e63}),process[_0x37835b(0x1e7)]({'telegram':_0x24408d}),logging(''+_0x24408d[_0x37835b(0x1e4)]);}function emitHistory(_0x575e3d={}){const _0x12c9ea=_0x1ef07e;Object[_0x12c9ea(0x16b)](_0x575e3d)[_0x12c9ea(0x14f)]==0x0&&(_0x575e3d={'type':[_0x12c9ea(0x185),_0x12c9ea(0x1e4)],'event':'','page':0x1});if(_0x575e3d[_0x12c9ea(0x133)][_0x12c9ea(0x1f1)](_0x12c9ea(0x1e4)))_0x575e3d[_0x12c9ea(0x133)][_0x12c9ea(0x1e1)](_0x575e3d['type'][_0x12c9ea(0x198)](_0x12c9ea(0x1e4)),0x1,'error','success');if(dbLogs[_0x12c9ea(0x10d)](_0x12c9ea(0x159))[_0x12c9ea(0x1a9)]()){let _0x4f6e00=dbLogs[_0x12c9ea(0x13f)](_0x12c9ea(0x159))['filter'](_0x57f429=>{const _0x44c723=_0x12c9ea;if(_0x575e3d[_0x44c723(0x133)][_0x44c723(0x14f)]==0x0)return![];else return _0x575e3d[_0x44c723(0x133)][_0x44c723(0x1f1)](_0x57f429[_0x44c723(0x133)]);})[_0x12c9ea(0x120)](_0x1fc2ed=>{const _0x53db96=_0x12c9ea;if(_0x575e3d[_0x53db96(0x1e4)]=='')return!![];else return _0x1fc2ed['event']['toLowerCase']()['includes'](_0x575e3d[_0x53db96(0x1e4)][_0x53db96(0xf6)]());})['sortBy'](_0x12c9ea(0x194)),_0xbb58fc=_0x4f6e00[_0x12c9ea(0x1a9)]()[_0x12c9ea(0x14f)];_0x4f6e00=_0x4f6e00[_0x12c9ea(0x1ea)]()[_0x12c9ea(0x15e)]((_0x575e3d[_0x12c9ea(0x1d5)]-0x1)*logPageSize,_0x575e3d[_0x12c9ea(0x1d5)]*logPageSize-0x1)[_0x12c9ea(0x1ea)]()[_0x12c9ea(0x1a9)](),proxyEmit(_0x12c9ea(0x1ed),{'logs':_0x4f6e00,'total':_0xbb58fc});}else proxyEmit(_0x12c9ea(0x1ed),{'logs':[],'total':0x0});}async function pauseBot(_0xe53269){const _0x14372d=_0x1ef07e,_0x28a763=new Date()['getTime']();console[_0x14372d(0x113)](_0x14372d(0x1ad),_0x28a763),console['log'](_0x14372d(0x1eb),_0x28a763-lastBotPause),console[_0x14372d(0x113)](_0x14372d(0x1ce),consecutivePauses);if(!lastBotPause)lastBotPause=new Date()[_0x14372d(0x1c6)](),consecutivePauses=0x1;else{if(_0x28a763-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x14372d(0x1e3)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x14372d(0x1c6)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0xe53269),botPaused=![],reset();}}async function handleError(_0x25f8f9,_0x593ff1,_0x385f44=''){const _0x44f634=_0x1ef07e;if(_0x25f8f9[_0x44f634(0x158)]()['includes'](_0x44f634(0x1d1)))logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x168)),await pauseBot(pauseBotInterval);else{if(_0x25f8f9[_0x44f634(0x158)]()[_0x44f634(0x1f1)](_0x44f634(0xfc)))logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x1d2)),await pauseBot(pauseBotInterval);else{if(_0x25f8f9['toString']()['includes'](_0x44f634(0x11b)))logHistory(_0x44f634(0x1a3),_0x593ff1+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x25f8f9['toString']()[_0x44f634(0x1f1)](_0x44f634(0x119)))logHistory(_0x44f634(0x1a3),_0x593ff1+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory('error','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['exit'](0x4d);else{if(_0x25f8f9[_0x44f634(0x158)]()[_0x44f634(0x1f1)](_0x44f634(0x188)))logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x155)),logHistory(_0x44f634(0x1a3),_0x44f634(0x11f)),process['exit'](0x4d);else{if(_0x25f8f9['toString']()[_0x44f634(0x1f1)](_0x44f634(0x152)))logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x1f3)),logHistory('error','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x44f634(0x1e3)](0x4d);else{if(_0x25f8f9['toString']()['includes'](_0x44f634(0x15b)))logHistory(_0x44f634(0x1a3),_0x593ff1+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x44f634(0x1a3),_0x44f634(0x11f)),process['exit'](0x4d);else{if(_0x25f8f9[_0x44f634(0x158)]()[_0x44f634(0x1f1)](_0x44f634(0x14c)))logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x177)),logHistory(_0x44f634(0x1a3),_0x44f634(0x11f)),process[_0x44f634(0x1e3)](0x4d);else _0x25f8f9[_0x44f634(0x158)]()[_0x44f634(0x1f1)](_0x44f634(0x1f2))?logHistory(_0x44f634(0x1a3),_0x593ff1+_0x44f634(0x1bf)):(logHistory(_0x44f634(0x1a3),_0x593ff1+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0x593ff1+_0x44f634(0xfb),_0x25f8f9),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x591d5f,_0x32a08a){return parseFloat(_0x591d5f['toFixed'](_0x32a08a));}function logging(_0x400b99,_0x8ae889=''){const _0x5cfde4=_0x1ef07e;console[_0x5cfde4(0x113)](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x400b99,_0x8ae889);}function getServerTime(){const _0x42430b=_0x1ef07e,_0x14f52f=new Date();return _0x14f52f[_0x42430b(0x1b0)]()+'/'+(_0x14f52f[_0x42430b(0x1bd)]()+0x1)[_0x42430b(0x158)]()[_0x42430b(0x182)](0x2,'0')+'/'+_0x14f52f[_0x42430b(0x157)]()[_0x42430b(0x158)]()['padStart'](0x2,'0')+'\x20'+_0x14f52f[_0x42430b(0x199)]()[_0x42430b(0x158)]()['padStart'](0x2,'0')+':'+_0x14f52f[_0x42430b(0x16f)]()[_0x42430b(0x158)]()[_0x42430b(0x182)](0x2,'0')+':'+_0x14f52f[_0x42430b(0x1cc)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0xe170f6=_0x1ef07e,_0x44ce76=shiftedTime();return _0x44ce76[_0xe170f6(0x1b0)]()+'/'+(_0x44ce76[_0xe170f6(0x1bd)]()+0x1)[_0xe170f6(0x158)]()[_0xe170f6(0x182)](0x2,'0')+'/'+_0x44ce76[_0xe170f6(0x157)]()[_0xe170f6(0x158)]()[_0xe170f6(0x182)](0x2,'0')+'\x20'+_0x44ce76['getHours']()[_0xe170f6(0x158)]()[_0xe170f6(0x182)](0x2,'0')+':'+_0x44ce76['getMinutes']()[_0xe170f6(0x158)]()[_0xe170f6(0x182)](0x2,'0')+':'+_0x44ce76[_0xe170f6(0x1cc)]()[_0xe170f6(0x158)]()['padStart'](0x2,'0');}function getDate(){const _0x1d62d2=_0x1ef07e,_0x4dc419=shiftedTime();return _0x4dc419[_0x1d62d2(0x1b0)]()+'/'+(_0x4dc419['getMonth']()+0x1)[_0x1d62d2(0x158)]()[_0x1d62d2(0x182)](0x2,'0')+'/'+_0x4dc419['getDate']()[_0x1d62d2(0x158)]()[_0x1d62d2(0x182)](0x2,'0');}function getHour(){const _0x1534c5=_0x1ef07e,_0x3d2708=shiftedTime();return _0x3d2708['getHours']()['toString']()[_0x1534c5(0x182)](0x2,'0');}function sleep(_0x43e8e1){return new Promise(_0x5264de=>setTimeout(_0x5264de,_0x43e8e1));}function shiftedTime(){const _0x32c793=_0x1ef07e,_0x441497=new Date();let _0x4cf44d=_0x441497;if(config&&config[_0x32c793(0x11a)]!==0x0)_0x4cf44d=fns[_0x32c793(0x141)](_0x441497,{'hours':config[_0x32c793(0x11a)]});return _0x4cf44d;}