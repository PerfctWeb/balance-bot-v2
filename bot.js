const _0x100187=_0x2249;(function(_0x305919,_0x564581){const _0xbf3252=_0x2249,_0x26713c=_0x305919();while(!![]){try{const _0x2dd0d6=-parseInt(_0xbf3252(0x7e))/0x1+-parseInt(_0xbf3252(0xef))/0x2*(-parseInt(_0xbf3252(0x1a4))/0x3)+-parseInt(_0xbf3252(0xf1))/0x4+-parseInt(_0xbf3252(0x18c))/0x5+-parseInt(_0xbf3252(0xdb))/0x6*(parseInt(_0xbf3252(0x1d1))/0x7)+parseInt(_0xbf3252(0x162))/0x8*(-parseInt(_0xbf3252(0xa3))/0x9)+parseInt(_0xbf3252(0x1c1))/0xa*(parseInt(_0xbf3252(0x14a))/0xb);if(_0x2dd0d6===_0x564581)break;else _0x26713c['push'](_0x26713c['shift']());}catch(_0x43fcdb){_0x26713c['push'](_0x26713c['shift']());}}}(_0x57a1,0x5f750));const _0x2ba14c=function(){let _0xd43ffb=!![];return function(_0x4eedea,_0x24467b){const _0x222151=_0xd43ffb?function(){const _0x1d3d82=_0x2249;if(_0x24467b){const _0x120dd5=_0x24467b[_0x1d3d82(0x101)](_0x4eedea,arguments);return _0x24467b=null,_0x120dd5;}}:function(){};return _0xd43ffb=![],_0x222151;};}(),_0xf20fe5=_0x2ba14c(this,function(){const _0x41563f=_0x2249;return _0xf20fe5['toString']()[_0x41563f(0x107)](_0x41563f(0x190))['toString']()[_0x41563f(0x15b)](_0xf20fe5)[_0x41563f(0x107)](_0x41563f(0x190));});_0xf20fe5();'use strict';const ccxt=require(_0x100187(0x1b9))[_0x100187(0x141)],low=require(_0x100187(0xc8)),FileSync=require(_0x100187(0x1de)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x100187(0xa9))[_0x100187(0x1e2)],util=require(_0x100187(0x1bf)),argv=require(_0x100187(0x8a))(process[_0x100187(0x183)][_0x100187(0x13d)](0x2))[_0x100187(0x183)],path=require(_0x100187(0x191));let exchange;global[_0x100187(0xeb)]={},global[_0x100187(0x9b)]={};const usdBasecoins=[_0x100187(0xba),_0x100187(0xfb),'TUSD',_0x100187(0x197),'USDC',_0x100187(0x16e)],exceptions={'binance':[_0x100187(0x154),'HOT/BTC','XEM/BUSD','NANO/','YOYOW/']},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x100187(0xcb)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x100187(0x7f))[_0x100187(0x148)],environment=require(_0x100187(0x7f))[_0x100187(0x1f9)]||_0x100187(0x18f),botID=process[_0x100187(0x183)][0x2]||_0x100187(0x1b8),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x100187(0xf2)](_0x100187(0x83)+botID+_0x100187(0x1f8)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x100187(0x1c5)+userID+'/':_0x100187(0x1c5),logspath=userID?_0x100187(0x8d)+userID+'/':_0x100187(0x8d),loggerfile=fs[_0x100187(0x12b)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x100187(0x16d)](configpath);!fs[_0x100187(0x124)](logspath)&&fs[_0x100187(0x16d)](logspath);const configfile=configpath+'bot-'+botID+_0x100187(0x169),logfile=configpath+_0x100187(0xf4)+botID+'-events.json',performancefile=configpath+_0x100187(0xf4)+botID+'-performance.json',coinresultsfile=configpath+_0x100187(0xf4)+botID+'-results.json',settingsfile=configpath+_0x100187(0x13b),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x100187(0xfe),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x100187(0xcf)]({'logs':[],'version':serverversion})[_0x100187(0xe5)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x100187(0xcf)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x100187(0xcf)]({'bot':[],'version':serverversion})[_0x100187(0xe5)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x100187(0xcf)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x100187(0x18d),'rsaStandard':_0x100187(0x1db)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2c0bf7=>{const _0x6cfb64=_0x100187;console[_0x6cfb64(0xf2)](_0x2c0bf7);},'simple':_0xfb35fd=>{const _0xcb678=_0x100187;console[_0xcb678(0xf2)](_0xfb35fd),loggerfile['write'](util[_0xcb678(0x19e)](_0xfb35fd)+'\x0a');},'full':async(_0x365bf2,_0x224e78='')=>{const _0x283797=_0x100187;let _0x38f14e;if(config[_0x283797(0x102)])_0x38f14e=getTimeStamp()+':\x20'+config[_0x283797(0x137)]+_0x283797(0x99)+_0x365bf2;else _0x38f14e=getTimeStamp()+_0x283797(0x119)+botID+_0x283797(0x99)+_0x365bf2;console[_0x283797(0xf2)](_0x38f14e),loggerfile['write'](util['format'](_0x38f14e)+'\x0a'),_0x224e78&&(console[_0x283797(0xf2)](_0x224e78),loggerfile[_0x283797(0xe5)](util[_0x283797(0x19e)](_0x224e78)+'\x0a'));},'debug':async(_0x484662,_0x1f3f81='')=>{const _0x4348b8=_0x100187;let _0x44de23;if(config[_0x4348b8(0x102)])_0x44de23=getTimeStamp()+':\x20'+config[_0x4348b8(0x137)]+_0x4348b8(0x17d)+_0x484662;else _0x44de23=getTimeStamp()+_0x4348b8(0x119)+botID+_0x4348b8(0x17d)+_0x484662;if(debugging)console['log'](_0x44de23);loggerfile[_0x4348b8(0xe5)](util[_0x4348b8(0x19e)](_0x44de23)+'\x0a');if(_0x1f3f81){if(debugging)console[_0x4348b8(0xf2)](_0x1f3f81);loggerfile[_0x4348b8(0xe5)](util[_0x4348b8(0x19e)](_0x1f3f81)+'\x0a');}}};process['on'](_0x100187(0x11a),function(_0x27a394){const _0x19aef2=_0x100187;logger[_0x19aef2(0x187)](_0x19aef2(0x1fc),_0x27a394);});settings[_0x100187(0x1ca)]!=config[_0x100187(0x1ca)]&&updateTimeshift(settings[_0x100187(0x1ca)]);settings[_0x100187(0x111)]!=config[_0x100187(0x111)]&&updateOnepagemode(settings[_0x100187(0x111)]);process['send']({'started':'running'},_0x571cd7=>{}),initializeProcessListeners();function proxyEmit(_0x3917e8,_0x57bfda=null){const _0x1c577e=_0x100187;process[_0x1c577e(0x146)]({'function':_0x3917e8,'args':_0x57bfda},_0x5ab97e=>{});}function initializeProcessListeners(){const _0x53042a=_0x100187;process['on'](_0x53042a(0x94),_0x2b82d6=>{const _0x347d9f=_0x53042a;switch(Object[_0x347d9f(0x1ea)](_0x2b82d6)[0x0]){case _0x347d9f(0x1ca):_0x2b82d6[_0x347d9f(0x1ca)]!=undefined&&(settings[_0x347d9f(0x1ca)]=_0x2b82d6[_0x347d9f(0x1ca)],updateTimeshift(settings[_0x347d9f(0x1ca)]));break;case _0x347d9f(0x111):_0x2b82d6['onepagemode']!=undefined&&(settings['onepagemode']=_0x2b82d6[_0x347d9f(0x111)],updateOnepagemode(settings['onepagemode']));break;case _0x347d9f(0x186):_0x2b82d6[_0x347d9f(0x186)]!=undefined&&(bots=JSON['parse'](_0x2b82d6[_0x347d9f(0x186)]),proxyEmit(_0x347d9f(0x186),bots));break;case'function':switch(_0x2b82d6[_0x347d9f(0x19d)]){case _0x347d9f(0x1c9):initclient();break;case _0x347d9f(0x17b):toggleBotMode();break;case _0x347d9f(0x157):emitHistory(_0x2b82d6['args']);break;case _0x347d9f(0x73):deleteHistoryAlerts(_0x2b82d6[_0x347d9f(0xfd)]);break;case _0x347d9f(0x143):getPortfolio(_0x2b82d6[_0x347d9f(0xfd)]);break;case _0x347d9f(0x72):storeConfiguration(_0x2b82d6['args']);break;case _0x347d9f(0xff):storeHeadless(_0x2b82d6['args']);break;case'storeFiat':storeFiat(_0x2b82d6[_0x347d9f(0xfd)]);break;case _0x347d9f(0x132):resetHistory();break;case _0x347d9f(0x88):getStartingBalances(getNormalizedPerformance());break;case _0x347d9f(0x1cf):placeOrder(_0x2b82d6[_0x347d9f(0xfd)]);break;case _0x347d9f(0xca):cancelLoading();break;case _0x347d9f(0x147):showConfig();break;case _0x347d9f(0xe2):sendMetricsTelegram();break;case _0x347d9f(0x79):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x24caed=null,_0x3008de=![]){const _0x5892f2=_0x100187;logger['debug'](_0x5892f2(0xe9)+(_0x24caed&&_0x24caed[_0x5892f2(0x1a0)]>0x0?_0x5892f2(0x76)+_0x24caed['join'](','):_0x5892f2(0x98))+_0x5892f2(0x1da)+(_0x3008de?'exchange\x20reloaded':_0x5892f2(0xfa))+_0x5892f2(0xb2)+config[_0x5892f2(0xf0)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3008de)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5892f2(0x1dc)]!=''&&config[_0x5892f2(0x1dc)]!='***'){if(_0x3008de){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x46cc3f){handleErrorNoStop(_0x46cc3f,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x24caed);const _0x2ef90e=await getCoins();[currentCoins,currentCoinsAll]=_0x2ef90e,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5892f2(0x1a0)]==0x0&&allOpenOrders[_0x5892f2(0x1a0)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x508fa4=_0x100187;logger['debug'](_0x508fa4(0x188));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x508fa4(0x187)](_0x508fa4(0xc3)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x419899=config[_0x100187(0xf0)],_0x26fcc8=config[_0x100187(0x1dc)],_0x3c4caa=config[_0x100187(0x109)],_0x2f6782=config[_0x100187(0x10c)]){const _0x53c0b3=_0x100187;exchange&&await stopExchange();!supportedExchanges()[_0x53c0b3(0x1cb)](_0x419899)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x419899+_0x53c0b3(0x12e)),killBot());const _0x43d87f=ccxt[_0x419899[_0x53c0b3(0x1f1)]()];exchange=new _0x43d87f({'apiKey':_0x26fcc8,'secret':_0x3c4caa,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x419899==_0x53c0b3(0x70)&&(exchange[_0x53c0b3(0x125)]={'defaultType':_0x53c0b3(0x1e5)});if(_0x2f6782)exchange[_0x53c0b3(0x17e)]=_0x2f6782;}function setStableCoins(){const _0x8c15d4=_0x100187;let _0x57b197=config['basecoin']==_0x8c15d4(0xbb)?_0x8c15d4(0xbb):_0x8c15d4(0x1fb),_0x5c74a0=!allSymbols['includes'](_0x57b197+_0x8c15d4(0x134))?_0x8c15d4(0x197):_0x8c15d4(0xba),_0x388633=!allSymbols['includes'](_0x57b197+_0x8c15d4(0xf8))?_0x5c74a0:_0x8c15d4(0x1d4);stablecoins={'eur':{'coin':''+_0x57b197+_0x388633,'symbol':_0x57b197+'/'+_0x388633},'usd':{'coin':''+_0x57b197+_0x5c74a0,'symbol':_0x57b197+'/'+_0x5c74a0}};}async function initwsCcxt(_0x1d6dc8){const _0x76c7aa=_0x100187;_0x1d6dc8==null&&(_0x1d6dc8=[],config[_0x76c7aa(0x1a9)][_0x76c7aa(0x16b)](_0x189111=>{const _0x2224aa=_0x76c7aa;if(!_0x189111['excluded']&&_0x189111['coin']!=config[_0x2224aa(0xcd)])_0x1d6dc8['push'](_0x189111['symbol']);}));if(!_0x1d6dc8[_0x76c7aa(0x1cb)](stablecoins[_0x76c7aa(0x6c)][_0x76c7aa(0x9e)]))_0x1d6dc8['push'](stablecoins[_0x76c7aa(0x6c)][_0x76c7aa(0x9e)]);if(!_0x1d6dc8['includes'](stablecoins[_0x76c7aa(0x175)][_0x76c7aa(0x9e)]))_0x1d6dc8[_0x76c7aa(0x184)](stablecoins[_0x76c7aa(0x175)][_0x76c7aa(0x9e)]);if(config[_0x76c7aa(0xf0)][_0x76c7aa(0x11c)](_0x76c7aa(0xd8))){if(!_0x1d6dc8['includes'](_0x76c7aa(0x16a)+config[_0x76c7aa(0xcd)]))_0x1d6dc8[_0x76c7aa(0x184)](_0x76c7aa(0x16a)+config[_0x76c7aa(0xcd)]);}loadCoins(_0x1d6dc8);const _0x55a22c=async _0xe16012=>{const _0x52af80=_0x76c7aa,_0x422794=await exchange[_0x52af80(0x93)](_0xe16012);global[_0x52af80(0xeb)][noslash(_0x422794[_0x52af80(0x9e)])]=_0x422794[_0x52af80(0xea)];while(!![]){if(!botPaused)try{const _0x3dcbcd=await exchange[_0x52af80(0x152)](_0xe16012);global['ticker'][noslash(_0x3dcbcd[0x0]['symbol'])]=_0x3dcbcd[0x0]['price'],await sleep(0x3e8);}catch(_0x421197){if(!exchangeStopped)await handleError(_0x421197,_0x52af80(0x152),_0xe16012);}else await sleep(0x64);}},_0x5be324=async _0x599f3d=>{const _0x36c7eb=_0x76c7aa;while(!![]){if(!botPaused)try{const _0x32319d=await exchange['fetchTicker'](_0x599f3d);global[_0x36c7eb(0x9b)][_0x32319d[_0x36c7eb(0x9e)]]=_0x32319d['percentage'],await sleep(0x3c*0x3e8);}catch(_0x38ba90){if(!exchangeStopped)await handleError(_0x38ba90,_0x36c7eb(0x12d),_0x599f3d);}else await sleep(0x64);}},_0x2cfdf0=async()=>{const _0x117896=_0x76c7aa;while(!![]){if(!botPaused)try{const _0x2b8856=await exchange[_0x117896(0x15a)]();_0x2b8856['forEach'](_0x22aeb8=>{updateNumberCoinsCcxt(_0x22aeb8);});}catch(_0x46ca38){if(!exchangeStopped)await handleError(_0x46ca38,_0x117896(0x15a));}else await sleep(0x64);}};_0x1d6dc8[_0x76c7aa(0x16b)](_0x43e94a=>{_0x55a22c(_0x43e94a),_0x5be324(_0x43e94a);}),!wsEventsSet&&(wsEventsSet=!![],_0x2cfdf0(),watchTransactions());}async function watchTransactions(){const _0x128bc5=_0x100187;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5d99a4=await getCoins(),[_0x94eb8,_0x3b3687]=_0x5d99a4;let _0xa7e60a=[];currentCoins[_0x128bc5(0x16b)](_0x46f465=>{const _0x4b094c=_0x128bc5,_0x3e2eb5=_0x94eb8['find'](_0x4c4cdb=>_0x4c4cdb['coin']==_0x46f465['coin']);_0x3e2eb5&&(_0x46f465[_0x4b094c(0x1e6)]!=_0x3e2eb5[_0x4b094c(0x1e6)]&&_0xa7e60a[_0x4b094c(0x184)]({'coin':_0x46f465['coin'],'symbol':_0x46f465[_0x4b094c(0x9e)],'number':Number(formatResult(_0x3e2eb5['number']-_0x46f465[_0x4b094c(0x1e6)],0x8))}));});if(_0xa7e60a[_0x128bc5(0x1a0)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x128bc5(0x1a5)+lastFees[_0x128bc5(0x127)]+_0x128bc5(0xe1)+lastFees[_0x128bc5(0x89)]);if(!lastFees[_0x128bc5(0x127)]||_0xa7e60a[0x0][_0x128bc5(0xf3)]!=lastFees[_0x128bc5(0x127)]||_0xa7e60a[0x0][_0x128bc5(0x1e6)]>lastFees[_0x128bc5(0x89)]){let _0x5b7b83;if(_0xa7e60a[0x0]['coin']!=config[_0x128bc5(0xcd)]){let _0x475a0=global[_0x128bc5(0xeb)][noslash(_0xa7e60a[0x0][_0x128bc5(0x9e)])];_0x5b7b83=_0xa7e60a[0x0][_0x128bc5(0x176)]?0x1/_0x475a0:_0x475a0;}else _0x5b7b83=0x1;_0xa7e60a[0x0][_0x128bc5(0xed)]=_0x5b7b83,delete _0xa7e60a[0x0][_0x128bc5(0x9e)];let _0xd3e606=[],_0x1c2308=[...config[_0x128bc5(0x97)]]||[],_0x376d1c=config[_0x128bc5(0x97)];_0x1c2308[_0x128bc5(0x17f)]((_0x2ee997,_0x41f257)=>_0x2ee997[_0x128bc5(0x82)]>_0x41f257['date']?-0x1:_0x41f257[_0x128bc5(0x82)]>_0x2ee997[_0x128bc5(0x82)]?0x1:0x0);const _0x3ec13d=getDate();if(_0x1c2308[0x0]){const _0x3fa1f8=fns[_0x128bc5(0x198)](_0x1c2308[0x0]['date'],_0x128bc5(0xd1),new Date()),_0x20826c=fns['parse'](_0x3ec13d,_0x128bc5(0xd1),new Date());if(fns[_0x128bc5(0x1ad)](_0x3fa1f8,_0x20826c)){_0xd3e606=_0x1c2308[0x0][_0x128bc5(0x19f)];const _0x107795=_0xd3e606['find'](_0x4445f7=>_0x4445f7['coin']==_0xa7e60a[0x0][_0x128bc5(0xf3)]);_0x107795?(_0x107795[_0x128bc5(0x1e6)]+=_0xa7e60a[0x0][_0x128bc5(0x1e6)],_0x107795['number']==0x0&&(_0xd3e606=_0xd3e606['filter'](_0x591c97=>{const _0x3c8e5f=_0x128bc5;return _0x591c97[_0x3c8e5f(0xf3)]!=_0xa7e60a[0x0][_0x3c8e5f(0xf3)];}))):_0xd3e606['push'](_0xa7e60a[0x0]);const _0x3dd3dd=_0x376d1c[_0x128bc5(0xde)](_0x16f68f=>_0x16f68f[_0x128bc5(0x82)]==_0x3ec13d);_0x3dd3dd['changes']=_0xd3e606;}else _0x376d1c[_0x128bc5(0x184)]({'date':_0x3ec13d,'changes':[_0xa7e60a[0x0]]});}const _0x444127=_0x376d1c[_0x128bc5(0xde)](_0x289e9f=>_0x289e9f[_0x128bc5(0x82)]==_0x3ec13d);if(_0x444127){let _0x1dc726=!![];_0x444127[_0x128bc5(0x19f)][_0x128bc5(0x16b)](_0x40e152=>{if(_0x40e152['number']!=0x0)_0x1dc726=![];}),_0x1dc726&&(_0x376d1c=_0x376d1c['filter'](_0x8d60fc=>{const _0x11be8f=_0x128bc5;return _0x8d60fc[_0x11be8f(0x82)]!=_0x3ec13d;}));}let _0x3da934=dbConfig['get'](_0x128bc5(0x155))['find']({'botID':botID})['value']();_0x3da934&&(dbConfig['get'](_0x128bc5(0x155))[_0x128bc5(0xde)]({'botID':botID})['assign']({'liquidity':_0x376d1c})[_0x128bc5(0xe5)](),config[_0x128bc5(0x97)]=_0x376d1c),logHistory(_0x128bc5(0xf7),_0x128bc5(0x92)+Math[_0x128bc5(0x96)](_0xa7e60a[0x0][_0x128bc5(0x1e6)])+'\x20'+_0xa7e60a[0x0][_0x128bc5(0xf3)]+'\x20'+(_0xa7e60a[0x0]['number']>0x0?_0x128bc5(0x1b7):_0x128bc5(0x156))+_0x128bc5(0xe4)),proxyEmit(_0x128bc5(0x179),emittedConfiguration());}else logger[_0x128bc5(0x187)](_0x128bc5(0x1a3)+Math[_0x128bc5(0x96)](_0xa7e60a[0x0]['number'])+'\x20'+_0xa7e60a[0x0][_0x128bc5(0xf3)]+'\x20'+(_0xa7e60a[0x0][_0x128bc5(0x1e6)]>0x0?_0x128bc5(0x1b7):_0x128bc5(0x156)));transactionDetected=!![],currentCoins=_0x94eb8,currentCoinsAll=_0x3b3687;}else logger['debug'](_0x128bc5(0x92)+Math[_0x128bc5(0x96)](_0xa7e60a[0x0][_0x128bc5(0x1e6)])+'\x20'+_0xa7e60a[0x0]['coin']+'\x20'+(_0xa7e60a[0x0][_0x128bc5(0x1e6)]>0x0?'added':_0x128bc5(0x156))+_0x128bc5(0x8c)),currentCoins=_0x94eb8,currentCoinsAll=_0x3b3687;}await sleep(watchTransactionsInterval);}catch(_0x53fb46){if(!exchangeStopped)await handleError(_0x53fb46,_0x128bc5(0x1cd));}else await sleep(0x64);}}async function loadSymbols(_0x5716dc=config[_0x100187(0xf0)],_0x1c2223=![]){const _0x2580b9=_0x100187;if(allSymbols&&!_0x1c2223)return;try{markets=await exchange[_0x2580b9(0x84)](),allSymbols=exchange[_0x2580b9(0x145)][_0x2580b9(0x1b5)](_0x452739=>{const _0x235cde=_0x2580b9;let _0x4dd82b=![];const _0x370188=exceptions[_0x5716dc[_0x235cde(0x1f1)]()]||[];return _0x370188[_0x235cde(0x16b)](_0x5f08c8=>{if(_0x452739['includes'](_0x5f08c8))_0x4dd82b=!![];}),!_0x4dd82b;});}catch(_0x319178){throw _0x319178;}}async function initclient(){const _0x172901=_0x100187;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x172901(0x13e),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'environment':environment,'balances':lastBalances});emitHistory();const _0x1652cc=getNormalizedPerformance();emitPerformance(_0x1652cc),getStartingBalances(_0x1652cc);}async function toggleBotMode(){const _0x416d24=_0x100187;let _0x48f968=dbConfig[_0x416d24(0x123)]('bot')['find']({'botID':botID})[_0x416d24(0x1dd)]();if(_0x48f968){const _0x348f50=!_0x48f968[_0x416d24(0x136)];dbConfig[_0x416d24(0x123)]('bot')[_0x416d24(0xde)]({'botID':botID})[_0x416d24(0xb1)]({'headless':_0x348f50})[_0x416d24(0xe5)](),config[_0x416d24(0x136)]=_0x348f50,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4f0601=_0x100187;process[_0x4f0601(0x146)]({'updatebotmanager':!![]},_0x591a24=>{});}async function loadCoins(_0x125718){const _0x7e047c=_0x100187;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3e3fbb,_0x2707f9=0x0,_0x3ff93e=0x0;_0x125718[_0x7e047c(0x16b)](_0x17a67b=>{const _0x4ecb31=_0x7e047c;loading[_0x4ecb31(0x13f)][_0x4ecb31(0x184)](_0x17a67b);}),loadingCanceled=![];let _0x3f02c9=![];while(_0x3e3fbb!=_0x125718['length']){_0x3e3fbb=0x0,_0x125718['forEach'](_0x51a128=>{const _0x1e6c72=_0x7e047c;if(global[_0x1e6c72(0xeb)][noslash(_0x51a128)]){loading['remainingSymbols']=loading['remainingSymbols'][_0x1e6c72(0x1b5)](_0x1f0888=>_0x1f0888!=_0x51a128);if(!watchedSymbols[_0x1e6c72(0x1cb)](_0x51a128))watchedSymbols[_0x1e6c72(0x184)](_0x51a128);_0x3e3fbb++;}}),loading[_0x7e047c(0xe8)]=Math[_0x7e047c(0x1bd)](_0x3e3fbb/_0x125718[_0x7e047c(0x1a0)]*0x64);loading[_0x7e047c(0xe8)]!=0x64&&(_0x3ff93e>0x1e*0x5&&(loading[_0x7e047c(0x1e1)]=!![],emitLoadingProgress()),_0x3ff93e>0x78*0x5&&!_0x3f02c9&&(loading['cancel']=!![],emitLoadingProgress(),_0x3f02c9=!![],logHistory(_0x7e047c(0x1bc),_0x7e047c(0x181)+loading['remainingSymbols'][_0x7e047c(0x1d5)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x7e047c(0x1c7)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x238fdf=_0x7e047c;process[_0x238fdf(0x146)]({'stop':_0x238fdf(0xb7)},_0x2839d1=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x7e047c(0x1f4)]=!![],emitLoadingProgress();break;}else _0x3e3fbb!=_0x2707f9&&(_0x2707f9=_0x3e3fbb,emitLoadingProgress()),_0x3ff93e++,await sleep(0xc8);}_0x3e3fbb==_0x125718[_0x7e047c(0x1a0)]&&(coinsLoaded=!![],process[_0x7e047c(0x146)]({'status':_0x7e047c(0x151),'live':_0x7e047c(0x10f)},_0x255458=>{}),_0x3f02c9&&logHistory(_0x7e047c(0xf7),_0x7e047c(0xa7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x278827=_0x100187;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x278827(0x87)});}function emitLoadingProgress(){const _0x5a4fa2=_0x100187;proxyEmit(_0x5a4fa2(0x14c),loading);}async function getFiat(){const _0x4894f8=_0x100187;let _0x30f126=global['ticker'][stablecoins[_0x4894f8(0x6c)]['coin']],_0x52fec8=global['ticker'][stablecoins[_0x4894f8(0x175)][_0x4894f8(0xf3)]];return{'eur':Number(_0x30f126),'usd':Number(_0x52fec8)};}function capitalize(_0x3ab365){const _0x4c8536=_0x100187;return _0x3ab365[_0x4c8536(0x110)](0x0,0x1)[_0x4c8536(0x80)]()+_0x3ab365[_0x4c8536(0x110)](0x1);}function supportedExchanges(){const _0x2f66da=_0x100187,_0x47b488=['ws',_0x2f66da(0x12d),_0x2f66da(0x93),'watchTrades','watchOrders',_0x2f66da(0x15c),_0x2f66da(0xc5),_0x2f66da(0xc2),_0x2f66da(0xa0),'fetchBalance'];let _0x15fb0f=[],_0x40e103=[],_0x45ba28=ccxt[_0x2f66da(0x13e)];_0x45ba28[_0x2f66da(0x16b)](_0x51f538=>{const _0x4fd860=_0x2f66da;try{const _0x5299a0=new ccxt[_0x51f538]();if(_0x5299a0[_0x4fd860(0x185)]['ws'])_0x40e103[_0x4fd860(0x184)](_0x5299a0);}catch(_0x357669){}}),_0x40e103['forEach'](_0x271234=>{const _0x14c049=_0x2f66da;let _0x5a6c3b=0x0;_0x47b488[_0x14c049(0x16b)](_0x43f59d=>{_0x43f59d in _0x271234['has']&&_0x271234['has'][_0x43f59d]&&_0x5a6c3b++;}),_0x5a6c3b==_0x47b488[_0x14c049(0x1a0)]&&_0x15fb0f[_0x14c049(0x184)](capitalize(_0x271234['id']));});let _0x29e846=[];return _0x45ba28['forEach'](_0x15a622=>{const _0x395b43=_0x2f66da;_0x15a622=capitalize(_0x15a622);if(!_0x15fb0f[_0x395b43(0x1cb)](_0x15a622))_0x29e846[_0x395b43(0x184)](_0x15a622);}),_0x15fb0f;}function setStartDatePerformance(){const _0x49e95c=_0x100187;if(config&&config['liquidity'][0x0]['changes'][_0x49e95c(0x1a0)]!=0x0){const _0x252a82=config['liquidity'][0x0][_0x49e95c(0x19f)];dbPerformance[_0x49e95c(0x123)](_0x49e95c(0x18a))[_0x49e95c(0xde)]({'date':config[_0x49e95c(0xbe)]})[_0x49e95c(0xb1)]({'coins':_0x252a82})[_0x49e95c(0xe5)]();}}async function recreateCoinResults(){const _0xa926cd=_0x100187;let _0x5279bd,_0x555491=[];try{const _0x295eaa=fns[_0xa926cd(0x19e)](fns['parseISO'](config['startdate'][_0xa926cd(0xc7)](/\//g,'-')),_0xa926cd(0x126));for(const _0x15f316 of currentCoins){if(_0x15f316[_0xa926cd(0xf3)]!=config[_0xa926cd(0xcd)]){let _0xc56dea=0x0,_0x24e528,_0x40deca;_0x5279bd=await getAllEventOrders(_0x15f316['symbol']);if(_0x5279bd['length']>0x0)_0x5279bd['forEach'](_0x21b32f=>{const _0x9e1866=_0xa926cd,_0x25ee93=_0x15f316[_0x9e1866(0x9e)][_0x9e1866(0x1cb)](config[_0x9e1866(0xcd)]+'/');_0x555491[_0x9e1866(0x184)]({'datetime':_0x21b32f[_0x9e1866(0x1f7)],'coin':_0x15f316[_0x9e1866(0xf3)],'symbol':_0x15f316[_0x9e1866(0x9e)],'side':_0x21b32f[_0x9e1866(0x150)],'reverse':_0x25ee93,'amount':formatResult(_0x21b32f[_0x9e1866(0x19b)],0x8),'filled':formatResult(_0x21b32f[_0x9e1866(0x19b)],0x8),'price':formatResult(_0x21b32f[_0x9e1866(0xed)],0x8)}),_0xc56dea=_0x21b32f[_0x9e1866(0x150)]==_0x9e1866(0x74)?_0xc56dea+_0x21b32f[_0x9e1866(0x19b)]:_0xc56dea-_0x21b32f[_0x9e1866(0x19b)];if(!_0x40deca)_0x40deca=_0x21b32f[_0x9e1866(0xed)];});_0x24e528=_0x15f316[_0xa926cd(0x1e6)]-_0xc56dea;let _0x393b9d;config['liquidity'][_0xa926cd(0x16b)](_0x15647d=>{const _0x103713=_0xa926cd;!_0x393b9d&&(_0x393b9d=_0x15647d[_0x103713(0x19f)][_0x103713(0xde)](_0xd7abaa=>_0xd7abaa[_0x103713(0xf3)]==_0x15f316[_0x103713(0xf3)]),_0x393b9d&&(_0x24e528=_0x393b9d[_0x103713(0x1e6)],_0x40deca=_0x393b9d['price']));});let _0x3eed16=dbCoinResults[_0xa926cd(0x123)](_0xa926cd(0x128))[_0xa926cd(0xde)]({'coin':_0x15f316['coin']})[_0xa926cd(0x1dd)]();_0x3eed16={'coin':_0x15f316['coin'],'number':_0x24e528,'breakeven':_0x40deca,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xa926cd(0x123)](_0xa926cd(0x128))[_0xa926cd(0xde)]({'coin':_0x15f316[_0xa926cd(0xf3)]})[_0xa926cd(0xb1)](_0x3eed16)[_0xa926cd(0xe5)]();}}_0x555491[_0xa926cd(0x17f)]((_0x5c30b1,_0x267cd5)=>_0x5c30b1[_0xa926cd(0x1f7)]>_0x267cd5['datetime']?0x1:_0x267cd5[_0xa926cd(0x1f7)]>_0x5c30b1['datetime']?-0x1:0x0);let _0x36ed25=0x0;for(let _0x4818cd of _0x555491){await updateCoinResults(_0x4818cd,!![]);}}catch(_0x551256){await handleError(_0x551256,'recreateCoinResults()');}}async function getAllEventOrders(_0x370052){const _0xe28634=_0x100187;let _0x145394=[],_0x3b3c95=dbLogs[_0xe28634(0x123)](_0xe28634(0x1d9))[_0xe28634(0x1b5)](_0x52b4c4=>{const _0x569bef=_0xe28634,_0x3ebeb2=_0x52b4c4[_0x569bef(0xdd)][_0x569bef(0x1f1)]();return _0x3ebeb2[_0x569bef(0x1cb)](_0x370052[_0x569bef(0x1f1)]())&&(_0x3ebeb2[_0x569bef(0x1cb)](_0x569bef(0xdf))&&_0x3ebeb2[_0x569bef(0x1cb)](_0x569bef(0xc9))||_0x3ebeb2[_0x569bef(0x1cb)](_0x569bef(0x19b))&&_0x3ebeb2[_0x569bef(0x1cb)]('order'));})[_0xe28634(0x6b)](_0xe28634(0xa6))[_0xe28634(0x1dd)]();return _0x3b3c95[_0xe28634(0x16b)](_0x124090=>{const _0x50cddd=_0xe28634,_0x4febff=_0x124090[_0x50cddd(0xdd)][_0x50cddd(0x1cb)]('sell')?_0x50cddd(0xae):_0x50cddd(0x74),_0x2da76e=/#([0-9]|\.)+\s/i,_0x3f9343=Number(_0x2da76e[_0x50cddd(0x8f)](_0x124090[_0x50cddd(0xdd)])[0x0][_0x50cddd(0x13d)](0x1)),_0x305ba5=/@([0-9]|\.)+$/i,_0x38291c=Number(_0x305ba5[_0x50cddd(0x8f)](_0x124090[_0x50cddd(0xdd)])[0x0]['slice'](0x1));_0x145394[_0x50cddd(0x184)]({'datetime':_0x124090['time'],'coin':symbolToCoin(_0x370052),'symbol':_0x370052,'side':_0x4febff,'amount':_0x3f9343,'filled':_0x3f9343,'price':_0x38291c});}),_0x145394;}async function getAllOrders(_0x4700bb,_0x3dcb83){const _0x16ca20=_0x100187;let _0x51a972=[];while(_0x3dcb83<exchange[_0x16ca20(0x1a6)]()){const _0x47e4a=0x1f4,_0x53071a=await exchange[_0x16ca20(0xa0)](_0x4700bb,_0x3dcb83,_0x47e4a);if(_0x53071a['length'])_0x3dcb83=_0x53071a[_0x53071a[_0x16ca20(0x1a0)]-0x1][_0x16ca20(0x1ce)]+0x1,_0x51a972=_0x51a972[_0x16ca20(0x1a1)](_0x53071a);else break;}return _0x51a972;}async function validate24hChanges(){const _0x137544=_0x100187;for(const _0x36f588 of currentCoins){if(_0x36f588[_0x137544(0xf3)]!=config['basecoin']){let _0x8121c7;_0x36f588['reverse']?_0x8121c7=formatResult((0x1/(global[_0x137544(0x9b)][noslash(_0x36f588['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x8121c7=global[_0x137544(0x9b)][noslash(_0x36f588[_0x137544(0x9e)])],_0x8121c7<config[_0x137544(0xd2)]&&(logHistory(_0x137544(0x1bc),_0x36f588[_0x137544(0xf3)]+_0x137544(0x7d)+_0x8121c7+'%'),logHistory(_0x137544(0x1bc),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x137544(0x1bc),_0x137544(0x1b2)),await storeHeadless({'headless':![]}));}}}function _0x2249(_0x53ef3e,_0x2c7e23){const _0x3d2f56=_0x57a1();return _0x2249=function(_0xf20fe5,_0x2ba14c){_0xf20fe5=_0xf20fe5-0x6b;let _0x57a19f=_0x3d2f56[_0xf20fe5];return _0x57a19f;},_0x2249(_0x53ef3e,_0x2c7e23);}function isOlderVersion(_0x46c87c,_0xafd4fa){const _0xe16f94=_0x100187;if(!_0x46c87c)return!![];const _0x37aa9e=_0xafd4fa['split']('.'),_0x34a997=_0x46c87c[_0xe16f94(0x170)]('.');for(var _0x25e8a0=0x0;_0x25e8a0<_0x34a997[_0xe16f94(0x1a0)];_0x25e8a0++){const _0x1f9b95=~~_0x34a997[_0x25e8a0],_0x1a213d=~~_0x37aa9e[_0x25e8a0];if(_0x1f9b95<_0x1a213d)return!![];if(_0x1f9b95>_0x1a213d)return![];}return![];}async function oneTimeMigration(){const _0x148208=_0x100187;let _0x4fef5b=dbLogs['get'](_0x148208(0x148))[_0x148208(0x1dd)]();if(isOlderVersion(_0x4fef5b,_0x148208(0x6f))){let _0x5da4e4=[];const _0x2ef005=dbLogs[_0x148208(0x123)](_0x148208(0x1d9))['value']();_0x2ef005[_0x148208(0x16b)](_0x593df4=>{const _0x212ec7=_0x148208;_0x5da4e4[_0x212ec7(0x184)]({'time':_0x593df4[_0x212ec7(0xa6)],'type':_0x593df4[_0x212ec7(0xa8)],'event':_0x593df4[_0x212ec7(0xdd)]});}),dbLogs[_0x148208(0x123)](_0x148208(0x1d9))[_0x148208(0xb1)](_0x5da4e4)[_0x148208(0xe5)]();}let _0x599cde=dbConfig[_0x148208(0x123)](_0x148208(0x148))['value']();if(isOlderVersion(_0x599cde,'2.3.5')){let _0x27da16=dbConfig[_0x148208(0x123)](_0x148208(0x155))[_0x148208(0xde)]({'botID':botID})['value']();if(_0x27da16){let _0x4ed2e0=[];_0x27da16[_0x148208(0x1a9)]['forEach'](_0x2a8d1a=>{const _0x21cf9d=_0x148208;_0x4ed2e0[_0x21cf9d(0x184)]({'coin':_0x2a8d1a[_0x21cf9d(0xf3)],'number':_0x2a8d1a[_0x21cf9d(0x158)],'price':_0x2a8d1a[_0x21cf9d(0x1c6)]}),delete _0x2a8d1a[_0x21cf9d(0x158)],delete _0x2a8d1a[_0x21cf9d(0x1c6)];});if(_0x4ed2e0['length']!==0x0)fs[_0x148208(0x11d)](configbackuppath+(_0x148208(0x11e)+botID+_0x148208(0xbf)),JSON[_0x148208(0x113)](_0x4ed2e0,null,0x4),function(_0x515567){if(_0x515567){}});const _0x58755d=(_0x5be339,_0x30a17a)=>{const _0x3d9494=_0x148208;let _0x596549=[];_0x30a17a[_0x3d9494(0x16b)](_0x2006b8=>{const _0x174970=_0x3d9494,_0x2d555a=_0x5be339[_0x174970(0xde)](_0x5dd1f5=>_0x5dd1f5[_0x174970(0xf3)]==_0x2006b8['coin']);if(!_0x2d555a)_0x596549['push'](_0x2006b8);});let _0x12eb5a=[];return _0x5be339[_0x3d9494(0x16b)](_0x505c9a=>{const _0x572817=_0x3d9494,_0x51c327=_0x30a17a['find'](_0x248f85=>_0x248f85[_0x572817(0xf3)]==_0x505c9a['coin']);if(!_0x51c327||_0x51c327[_0x572817(0x1e6)]==0x0&&_0x505c9a[_0x572817(0x1e6)]!=0x0)_0x12eb5a[_0x572817(0x184)](_0x505c9a);}),{'missingDay1':_0x596549,'notInDay2':_0x12eb5a};},_0x476369=dbPerformance[_0x148208(0x123)](_0x148208(0x18a))['cloneDeep']()['value']();if(_0x476369[_0x148208(0x1a0)]>0x1){const {missingDay1:_0x34c7bd,notInDay2:_0x456d2d}=_0x58755d(_0x4ed2e0,_0x476369[0x1][_0x148208(0x128)]);_0x4ed2e0=[..._0x4ed2e0,..._0x34c7bd],_0x456d2d[_0x148208(0x16b)](_0x48652f=>{const _0x8d9ee5=_0x148208;let _0x12df16=_0x4ed2e0[_0x8d9ee5(0x16f)](_0xd6e79a=>_0xd6e79a[_0x8d9ee5(0xf3)]==_0x48652f[_0x8d9ee5(0xf3)]);_0x12df16!=-0x1&&_0x4ed2e0['splice'](_0x12df16,0x1);});}_0x4ed2e0[_0x148208(0x17f)]((_0x53eae8,_0x1f814a)=>_0x53eae8[_0x148208(0xf3)]>_0x1f814a[_0x148208(0xf3)]?0x1:_0x1f814a['coin']>_0x53eae8[_0x148208(0xf3)]?-0x1:0x0);let _0x383b90=[{'date':_0x27da16[_0x148208(0xbe)],'changes':_0x4ed2e0}];_0x476369[_0x148208(0x1a0)]>0x2&&_0x476369[_0x148208(0x16b)]((_0x56b184,_0x273262)=>{const _0x1f33ea=_0x148208;if(_0x273262>0x0&&_0x273262<_0x476369[_0x1f33ea(0x1a0)]-0x1){const {missingDay1:_0xbc6bf0,notInDay2:_0x542946}=_0x58755d(_0x476369[_0x273262][_0x1f33ea(0x128)],_0x476369[_0x273262+0x1][_0x1f33ea(0x128)]);_0x4ed2e0=[],(_0xbc6bf0[_0x1f33ea(0x1a0)]!=0x0||_0x542946[_0x1f33ea(0x1a0)]!=0x0)&&(_0xbc6bf0[_0x1f33ea(0x1a0)]!=0x0&&_0x4ed2e0[_0x1f33ea(0x184)](..._0xbc6bf0),_0x542946[_0x1f33ea(0x1a0)]!=0x0&&(_0x542946[_0x1f33ea(0x16b)](_0x418f03=>{const _0x9d1c94=_0x1f33ea;_0x418f03[_0x9d1c94(0x1e6)]=-_0x418f03[_0x9d1c94(0x1e6)];}),_0x4ed2e0['push'](..._0x542946)),_0x4ed2e0[_0x1f33ea(0x17f)]((_0x55fb61,_0x5be9c6)=>_0x55fb61['coin']>_0x5be9c6[_0x1f33ea(0xf3)]?0x1:_0x5be9c6[_0x1f33ea(0xf3)]>_0x55fb61['coin']?-0x1:0x0),_0x383b90[_0x1f33ea(0x184)]({'date':_0x476369[_0x273262+0x1][_0x1f33ea(0x82)],'changes':_0x4ed2e0}));}}),dbConfig[_0x148208(0x123)](_0x148208(0x155))['find']({'botID':botID})['assign']({..._0x27da16,'liquidity':_0x383b90})[_0x148208(0xe5)]();}}if(isOlderVersion(_0x599cde,_0x148208(0x104))){let _0x377e41=dbConfig['get'](_0x148208(0x155))[_0x148208(0xde)]({'botID':botID})['value']();if(_0x377e41){const _0x5b9ff3=_0x377e41['exchange'],_0x5bd74a=_0x5b9ff3?capitalize(_0x5b9ff3):'Binance';dbConfig['get']('bot')[_0x148208(0xde)]({'botID':botID})[_0x148208(0xb1)]({'exchange':_0x5bd74a})[_0x148208(0xe5)]();}}let _0x5760e5=dbPerformance[_0x148208(0x123)](_0x148208(0x148))[_0x148208(0x1dd)]();isOlderVersion(_0x5760e5,'2.3.5')&&setStartDatePerformance();let _0x899c29=dbCoinResults[_0x148208(0x123)](_0x148208(0x148))[_0x148208(0x1dd)]();if(isOlderVersion(_0x899c29,'2.5.0')){let _0x15933a=dbCoinResults['get']('coins')[_0x148208(0x1dd)]();if(_0x15933a[_0x148208(0x1a0)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3500bb=_0x100187;dbConfig[_0x3500bb(0x133)](_0x3500bb(0x148),serverversion)[_0x3500bb(0xe5)](),dbPerformance[_0x3500bb(0x133)]('version',serverversion)[_0x3500bb(0xe5)](),dbLogs[_0x3500bb(0x133)]('version',serverversion)[_0x3500bb(0xe5)](),dbCoinResults[_0x3500bb(0x133)]('version',serverversion)['write']();}function getConfiguration(_0x4d9a3d){const _0x25c873=_0x100187;let _0x7ce27c=dbConfig[_0x25c873(0x123)](_0x25c873(0x155))['find']({'botID':_0x4d9a3d})[_0x25c873(0x1dd)]();if(_0x7ce27c){let _0x49f493=![];typeof _0x7ce27c['threshold']=='string'&&(_0x7ce27c={..._0x7ce27c,'threshold':Number(_0x7ce27c['threshold'])},_0x49f493=!![]),_0x7ce27c[_0x25c873(0xd2)]==null&&(_0x7ce27c={..._0x7ce27c,'change24h':-0x14},_0x49f493=!![]),!_0x7ce27c[_0x25c873(0x1e8)]&&(_0x7ce27c={..._0x7ce27c,'fiat':'USD'},_0x49f493=!![]),!_0x7ce27c[_0x25c873(0x111)]&&(_0x7ce27c={..._0x7ce27c,'onepagemode':settings['onepagemode']},_0x49f493=!![]),!_0x7ce27c[_0x25c873(0x1fd)]&&(_0x7ce27c={..._0x7ce27c,'colorscheme':'red_yellow_blue'},_0x49f493=!![]),!_0x7ce27c[_0x25c873(0x10b)]&&(_0x7ce27c={..._0x7ce27c,'autoliquidity':!![]},_0x49f493=!![]),_0x49f493&&(_0x7ce27c={'botID':_0x7ce27c[_0x25c873(0x95)],'exchange':_0x7ce27c['exchange'],'apiKey':_0x7ce27c['apiKey'],'apiSecret':_0x7ce27c[_0x25c873(0x109)],'apiPassword':_0x7ce27c[_0x25c873(0x10c)],'basecoin':_0x7ce27c[_0x25c873(0xcd)],'botname':_0x7ce27c[_0x25c873(0x137)],'showname':_0x7ce27c[_0x25c873(0x102)],'threshold':_0x7ce27c[_0x25c873(0x7b)],'ordertype':_0x7ce27c[_0x25c873(0x77)],'timeout':_0x7ce27c[_0x25c873(0x1e1)],'fiat':_0x7ce27c[_0x25c873(0x1e8)],'startdate':_0x7ce27c[_0x25c873(0xbe)],'recreate':_0x7ce27c[_0x25c873(0xe6)],'timeshift':_0x7ce27c[_0x25c873(0x1ca)],'onepagemode':_0x7ce27c[_0x25c873(0x111)],'headless':_0x7ce27c[_0x25c873(0x136)],'cooldown':_0x7ce27c[_0x25c873(0x1d2)],'change24h':_0x7ce27c[_0x25c873(0xd2)],'emojibuy':_0x7ce27c['emojibuy'],'emojisell':_0x7ce27c[_0x25c873(0x81)],'colorscheme':_0x7ce27c[_0x25c873(0x1fd)],'portfolio':_0x7ce27c['portfolio'],'autoliquidity':_0x7ce27c[_0x25c873(0x10b)],'liquidity':_0x7ce27c['liquidity'],'openOrders':_0x7ce27c[_0x25c873(0xa5)]},dbConfig[_0x25c873(0x123)](_0x25c873(0x155))['remove']()[_0x25c873(0xe5)](),dbConfig[_0x25c873(0x123)](_0x25c873(0x155))['push'](_0x7ce27c)[_0x25c873(0xe5)]());}else _0x7ce27c={'botID':_0x4d9a3d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x25c873(0x14b)+_0x4d9a3d,'showname':![],'threshold':0x3,'ordertype':_0x25c873(0xdf),'timeout':0x14,'fiat':_0x25c873(0xba),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x25c873(0x111)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x25c873(0xce),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x7ce27c;}function emittedConfiguration(){const _0xe06e2a=_0x100187;let _0x17a947;if(config[_0xe06e2a(0x1dc)]=='')_0x17a947={...config,'configstate':_0xe06e2a(0x18b)};else config[_0xe06e2a(0x1dc)]=='***'?_0x17a947={...config,'configstate':_0xe06e2a(0x8e)}:(_0x17a947={...config,'apiKey':_0xe06e2a(0x180),'apiSecret':_0xe06e2a(0x180)},config[_0xe06e2a(0x10c)]&&(_0x17a947[_0xe06e2a(0x10c)]=_0xe06e2a(0x180)));return _0x17a947;}function getSettings(){const _0x5f42f2=_0x100187;return dbSettings[_0x5f42f2(0x123)]('settings')['value']();}function getSecure(){const _0x43a2c1=_0x100187;return dbSecure[_0x43a2c1(0x123)]('secure')['value']()||{};}function updateTimeshift(_0x39659d){const _0x354825=_0x100187;let _0x4dea6e=dbConfig[_0x354825(0x123)](_0x354825(0x155))[_0x354825(0xde)]({'botID':botID})[_0x354825(0x1dd)]();_0x4dea6e&&dbConfig[_0x354825(0x123)](_0x354825(0x155))[_0x354825(0xde)]({'botID':botID})[_0x354825(0xb1)]({'timeshift':_0x39659d})[_0x354825(0xe5)](),config['timeshift']=_0x39659d,proxyEmit(_0x354825(0x179),emittedConfiguration());}function updateOnepagemode(_0x8e5765){const _0x37b4ca=_0x100187;let _0x2c3336=dbConfig['get'](_0x37b4ca(0x155))[_0x37b4ca(0xde)]({'botID':botID})[_0x37b4ca(0x1dd)]();_0x2c3336&&dbConfig['get'](_0x37b4ca(0x155))[_0x37b4ca(0xde)]({'botID':botID})[_0x37b4ca(0xb1)]({'onepagemode':_0x8e5765})[_0x37b4ca(0xe5)](),config[_0x37b4ca(0x111)]=_0x8e5765,proxyEmit(_0x37b4ca(0x179),emittedConfiguration());}async function storeConfiguration(_0x58c122){const _0x2e2918=_0x100187;logger[_0x2e2918(0x187)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2e2918(0x187)](_0x2e2918(0x100));let _0x593f5e=[],_0x302862=![],_0x59997e=![],_0x39d9a4=[];_0x58c122[_0x2e2918(0x1a9)][_0x2e2918(0x16b)](_0x52c2b9=>{const _0x3e3b1c=_0x2e2918;if(!_0x52c2b9[_0x3e3b1c(0x1bb)]&&_0x52c2b9[_0x3e3b1c(0xf3)]!=_0x58c122['basecoin'])_0x39d9a4[_0x3e3b1c(0x184)](_0x52c2b9[_0x3e3b1c(0x9e)]);}),_0x39d9a4[_0x2e2918(0x16b)](_0x28be39=>{const _0x359a0f=_0x2e2918,_0x1f0651=watchedSymbols[_0x359a0f(0x1cb)](_0x28be39);!_0x1f0651&&_0x593f5e[_0x359a0f(0x184)](_0x28be39);}),_0x39d9a4['forEach'](_0x2f531d=>{const _0x17c93f=_0x2e2918,_0x3a27c0=currentCoins[_0x17c93f(0xde)](_0x1289ab=>_0x1289ab[_0x17c93f(0x9e)]==_0x2f531d);!_0x3a27c0&&(_0x302862=!![]);}),currentCoins[_0x2e2918(0x16b)](_0x3fabc9=>{const _0x2d4698=_0x2e2918;if(_0x3fabc9['coin']!=config[_0x2d4698(0xcd)]){const _0x3ded92=_0x39d9a4['find'](_0x31c4a3=>_0x31c4a3==_0x3fabc9[_0x2d4698(0x9e)]);!_0x3ded92&&(_0x302862=!![]);}}),_0x58c122[_0x2e2918(0x1a9)]['forEach'](_0x508de6=>{const _0x47ea45=_0x2e2918,_0x635514=config[_0x47ea45(0x1a9)][_0x47ea45(0xde)](_0xa752e9=>_0xa752e9[_0x47ea45(0xf3)]==_0x508de6[_0x47ea45(0xf3)]);if(_0x635514&&_0x508de6[_0x47ea45(0x1be)]!=_0x635514[_0x47ea45(0x1be)])_0x59997e=!![];});let _0x1de3a2=dbConfig['get'](_0x2e2918(0x155))['find']({'botID':botID})[_0x2e2918(0x1dd)]();_0x58c122={..._0x58c122,'apiKey':crypt[_0x2e2918(0x140)](secure[_0x2e2918(0x1b6)],_0x58c122['apiKey'])[_0x2e2918(0x94)],'apiSecret':crypt[_0x2e2918(0x140)](secure[_0x2e2918(0x1b6)],_0x58c122['apiSecret'])[_0x2e2918(0x94)]};_0x58c122[_0x2e2918(0x10c)]&&(_0x58c122['apiPassword']=crypt[_0x2e2918(0x140)](secure[_0x2e2918(0x1b6)],_0x58c122[_0x2e2918(0x10c)])[_0x2e2918(0x94)]);let _0x4ce132=![];if(_0x1de3a2){_0x58c122['apiKey']==_0x2e2918(0x180)?_0x58c122['apiKey']=config['apiKey']:_0x4ce132=!![];_0x58c122[_0x2e2918(0x109)]==_0x2e2918(0x180)?_0x58c122[_0x2e2918(0x109)]=config[_0x2e2918(0x109)]:_0x4ce132=!![];if(_0x58c122[_0x2e2918(0x10c)]==_0x2e2918(0x180))_0x58c122[_0x2e2918(0x10c)]=config[_0x2e2918(0x10c)];else{if(_0x58c122['apiPassword'])_0x4ce132=!![];}dbConfig['get'](_0x2e2918(0x155))[_0x2e2918(0xde)]({'botID':botID})[_0x2e2918(0xb1)](_0x58c122)[_0x2e2918(0xe5)]();}else dbConfig[_0x2e2918(0x123)](_0x2e2918(0x155))[_0x2e2918(0x184)](_0x58c122)[_0x2e2918(0xe5)](),_0x4ce132=!![],process['send']({'status':_0x2e2918(0x151),'live':_0x2e2918(0x10f)},_0x416aa0=>{});process['send']({'botname':_0x58c122[_0x2e2918(0x137)]},_0x17c35c=>{}),updateBotManager(),config={..._0x58c122},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4ce132)await reset(_0x593f5e,!![]);else _0x302862||_0x59997e?await reset(_0x593f5e,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x470945){const _0x20098f=_0x100187,_0x4dd0eb={...config,'headless':_0x470945[_0x20098f(0x136)]};let _0x5911c9=dbConfig[_0x20098f(0x123)](_0x20098f(0x155))[_0x20098f(0xde)]({'botID':botID})[_0x20098f(0x1dd)]();_0x5911c9&&dbConfig['get'](_0x20098f(0x155))[_0x20098f(0xde)]({'botID':botID})['assign'](_0x4dd0eb)[_0x20098f(0xe5)](),config={..._0x4dd0eb},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x20593a){const _0x53a349=_0x100187,_0xf213b1={...config,'fiat':_0x20593a};let _0x333277=dbConfig[_0x53a349(0x123)](_0x53a349(0x155))[_0x53a349(0xde)]({'botID':botID})[_0x53a349(0x1dd)]();_0x333277&&dbConfig['get'](_0x53a349(0x155))[_0x53a349(0xde)]({'botID':botID})[_0x53a349(0xb1)](_0xf213b1)[_0x53a349(0xe5)](),config={..._0xf213b1},proxyEmit(_0x53a349(0x179),emittedConfiguration());}function resetHistory(){const _0xf25759=_0x100187;logger[_0xf25759(0xbc)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0xf25759(0x1d5)](configpath,_0xf25759(0xf4)+botID+_0xf25759(0x1c0))))fs[_0xf25759(0x117)](path[_0xf25759(0x1d5)](configpath,_0xf25759(0xf4)+botID+_0xf25759(0x1c0)));if(fs[_0xf25759(0x124)](path['join'](configpath,'bot-'+botID+_0xf25759(0x194))))fs[_0xf25759(0x117)](path[_0xf25759(0x1d5)](configpath,'bot-'+botID+_0xf25759(0x194)));if(fs[_0xf25759(0x124)](path['join'](configpath,'bot-'+botID+'-results.json')))fs[_0xf25759(0x117)](path[_0xf25759(0x1d5)](configpath,_0xf25759(0xf4)+botID+_0xf25759(0x196)));}catch(_0x1a05a9){if(_0x1a05a9)logger[_0xf25759(0xbc)](_0xf25759(0x1ab),_0x1a05a9);}const _0x55faaa=getDate();let _0x7c9cf2=[];currentCoins[_0xf25759(0x16b)](_0x2b8225=>{const _0x17fffd=_0xf25759;_0x7c9cf2[_0x17fffd(0x184)]({'coin':_0x2b8225[_0x17fffd(0xf3)],'number':_0x2b8225[_0x17fffd(0x1e6)],'price':_0x2b8225[_0x17fffd(0xea)]});});let _0x2e90a7=dbConfig['get'](_0xf25759(0x155))[_0xf25759(0xde)]({'botID':botID})[_0xf25759(0x1dd)]();_0x2e90a7&&(dbConfig['get']('bot')[_0xf25759(0xde)]({'botID':botID})[_0xf25759(0xb1)]({'liquidity':[{'date':_0x55faaa,'changes':_0x7c9cf2}]})[_0xf25759(0xe5)](),config[_0xf25759(0x97)]=[]),process['send']({'stop':_0xf25759(0xb7)},_0x383c1f=>{});}function noslash(_0x2ac33b){return _0x2ac33b['replace']('/','');}function updateHighestFee(_0x346c24,_0x200d28){const _0x3a5658=_0x100187;lastFees['currency']=_0x346c24,lastFees[_0x3a5658(0x1b4)][_0x3a5658(0x1a0)]===0x14&&lastFees[_0x3a5658(0x1b4)][_0x3a5658(0x1ee)](),lastFees['recent20'][_0x3a5658(0x184)](_0x200d28),lastFees[_0x3a5658(0x89)]=Math[_0x3a5658(0x1a8)](...lastFees[_0x3a5658(0x1b4)]);}async function updateNumberCoinsCcxt(_0x38145e){const _0x2171ed=_0x100187;logger['debug'](_0x2171ed(0x1e9)+_0x38145e['symbol']+'\x20|\x20'+_0x38145e[_0x2171ed(0x1d6)]+_0x2171ed(0x1da)+_0x38145e['id']);let _0xd0a7f9=_0x38145e[_0x2171ed(0x1d6)],_0x39a491=![];currentCoins[_0x2171ed(0x16b)](_0x43bf2e=>{const _0x5e8fc6=_0x2171ed;_0x43bf2e[_0x5e8fc6(0x9e)]==_0x38145e[_0x5e8fc6(0x9e)]&&(_0x39a491=!![]);});if(!_0x39a491)return;const _0x25da44=currentCoins[_0x2171ed(0xde)](_0x6f38e1=>_0x6f38e1[_0x2171ed(0x9e)]==_0x38145e[_0x2171ed(0x9e)]),_0x2d97b4=_0x1d5186=>{const _0xc70814=_0x2171ed;if(_0x25da44)_0x25da44[_0xc70814(0x168)]=_0x1d5186;};if(_0xd0a7f9==_0x2171ed(0x1ac))_0x2d97b4(_0x2171ed(0x1ac));else{if(_0xd0a7f9==_0x2171ed(0x13c)){_0x2d97b4(_0x2171ed(0x13c));const _0x9d87af=await getCoins();[currentCoins,currentCoinsAll]=_0x9d87af,await getOpenOrders(),handleOpenOrders();}else{if(_0xd0a7f9==_0x2171ed(0xd0)){logger['debug'](_0x2171ed(0x10d)+_0x38145e[_0x2171ed(0x9e)]+_0x2171ed(0x1da)+_0x38145e[_0x2171ed(0x19b)]+'\x20|\x20'+_0x38145e['id']);let _0x2abab8=![];if(lastOrders)for(const _0x2c6e83 of lastOrders){const _0x1cc697=0xc8,_0x24cd5b=0x1388;let _0x1b5835=0x0;while(!_0x2c6e83['orderId']&&_0x1b5835*_0x1cc697<_0x24cd5b){_0x1b5835++,await sleep(_0x1cc697);}if(_0x1b5835>0x0)logger[_0x2171ed(0x187)](_0x2171ed(0xb6)+_0x1b5835*_0x1cc697/0x3e8+_0x2171ed(0x7a));if(_0x2c6e83[_0x2171ed(0xd7)]==_0x38145e['id']){logger[_0x2171ed(0x187)](_0x2171ed(0x195)+_0x38145e['id']),_0x2abab8=!![];if(_0x2c6e83[_0x2171ed(0x19b)]==0x0){logger['debug'](_0x2171ed(0x167)+_0x38145e['id']);if(_0x38145e[_0x2171ed(0x18e)])_0x2c6e83[_0x2171ed(0xed)]=_0x38145e[_0x2171ed(0x18e)];else{if(_0x38145e[_0x2171ed(0xed)])_0x2c6e83[_0x2171ed(0xed)]=_0x38145e[_0x2171ed(0xed)];else{}}_0x2c6e83[_0x2171ed(0x19b)]=_0x38145e[_0x2171ed(0x19b)],_0x2c6e83[_0x2171ed(0x122)]={'currency':_0x38145e['fee']?_0x38145e['fee']['currency']:null,'cost':_0x38145e[_0x2171ed(0x122)]?_0x38145e[_0x2171ed(0x122)][_0x2171ed(0x165)]:0x0},updateHighestFee(_0x2c6e83[_0x2171ed(0x122)][_0x2171ed(0x127)],_0x2c6e83[_0x2171ed(0x122)][_0x2171ed(0x165)]),_0x2d97b4(_0x2171ed(0x19b)),await validateOrders();if(lockOrders==ORDERS[_0x2171ed(0xac)]){const _0x1fa478=await getCoins();[currentCoins,currentCoinsAll]=_0x1fa478;}await updateCoinResults(_0x2c6e83);}}}if(!_0x2abab8){logger[_0x2171ed(0x187)](_0x2171ed(0x1f2)+_0x38145e['id']),_0x2d97b4('filled');const _0x2958fc=await getCoins();[currentCoins,currentCoinsAll]=_0x2958fc,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xf1604d=JSON[_0x2171ed(0x198)](lastBalances[_0x2171ed(0x1a9)]);const _0x588ef2=_0xf1604d[_0x2171ed(0xde)](_0x135a95=>_0x135a95['symbol']==_0x38145e[_0x2171ed(0x9e)]);if(_0x588ef2){if(_0xd0a7f9==_0x2171ed(0x1ac))_0x588ef2['orderstatus']=_0x588ef2[_0x2171ed(0x168)]==_0x2171ed(0x19b)?_0x2171ed(0x19b):_0x2171ed(0x1ac);else{if(_0xd0a7f9==_0x2171ed(0x13c))_0x588ef2['orderstatus']=_0x588ef2['orderstatus']==_0x2171ed(0x19b)?_0x2171ed(0x19b):_0x2171ed(0x13c);else _0xd0a7f9==_0x2171ed(0xd0)&&(_0x588ef2[_0x2171ed(0x168)]=_0x2171ed(0x19b));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2171ed(0x113)](_0xf1604d)},proxyEmit(_0x2171ed(0x10e),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});}}async function updateOpenOrders(){const _0x64448f=_0x100187;await getOpenOrders();let _0x603e7b=![];currentCoins[_0x64448f(0x16b)](_0x4aab29=>{const _0x4e4e95=_0x64448f;_0x603e7b=allOpenOrders[_0x4e4e95(0xde)](_0x126166=>_0x126166['symbol']==_0x4aab29['symbol']),_0x4aab29[_0x4e4e95(0x168)]=_0x603e7b?_0x4e4e95(0x1ac):_0x4e4e95(0x12c);});}async function getCoins(_0x2d70a2=!![],_0x453a00=config[_0x100187(0xcd)]){const _0x1d34e3=_0x100187;let _0x275b2c,_0x54b7d7=[],_0x1dc4cb=[],_0x43977a=[],_0x3cd65b=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x275b2c=await exchange[_0x1d34e3(0x9c)](),mybalances=_0x275b2c[_0x1d34e3(0x164)];for(const [_0x43425c,_0x3da027]of Object['entries'](mybalances)){_0x3cd65b[_0x1d34e3(0x184)](_0x43425c);}if(_0x453a00=='')for(const [_0x382c3b,_0xc1db3e]of Object[_0x1d34e3(0xa4)](mybalances)){_0xc1db3e!=0x0&&_0x1dc4cb[_0x1d34e3(0x184)]({'coin':_0x382c3b});}else{let _0x5d2533=![];for(const [_0x138aa4,_0x6e639b]of Object[_0x1d34e3(0xa4)](mybalances)){if(_0x3cd65b[_0x1d34e3(0x1cb)](_0x138aa4)){const _0x7244d8=config['portfolio']['find'](_0x7cde7f=>_0x7cde7f[_0x1d34e3(0xf3)]==_0x138aa4),_0x3ee154=_0x138aa4+'/'+_0x453a00,_0x5977eb=_0x453a00+'/'+_0x138aa4,_0x262ada=currentCoins['find'](_0x4cc269=>_0x4cc269[_0x1d34e3(0xf3)]==_0x138aa4);_0x5d2533=![];if((_0x6e639b!=0x0||_0x7244d8)&&(allSymbols[_0x1d34e3(0x1cb)](_0x3ee154)||_0x138aa4==_0x453a00))_0x138aa4!=_0x453a00&&_0x54b7d7[_0x1d34e3(0x184)](_0x3ee154),_0x1dc4cb[_0x1d34e3(0x184)]({'coin':_0x138aa4,'symbol':_0x3ee154,'reverse':![],'number':Math[_0x1d34e3(0x1a8)](_0x6e639b+(_0x7244d8&&_0x7244d8['offset']||0x0),0x0),'orderstatus':_0x262ada?_0x262ada['orderstatus']:_0x1d34e3(0x12c)});else(_0x6e639b!=0x0||_0x7244d8)&&allSymbols[_0x1d34e3(0x1cb)](_0x5977eb)&&(_0x138aa4!=_0x453a00&&_0x54b7d7[_0x1d34e3(0x184)](_0x5977eb),_0x1dc4cb[_0x1d34e3(0x184)]({'coin':_0x138aa4,'symbol':_0x5977eb,'reverse':!![],'number':Math[_0x1d34e3(0x1a8)](_0x6e639b+(_0x7244d8&&_0x7244d8[_0x1d34e3(0x1be)]||0x0),0x0),'orderstatus':_0x262ada?_0x262ada[_0x1d34e3(0x168)]:_0x1d34e3(0x12c)}));}}}}catch(_0x11efd6){if(!_0x2d70a2)handleErrorNoStop(_0x11efd6,_0x1d34e3(0x12f));else await handleError(_0x11efd6,'getCoins()');}return _0x43977a=cloneDeep(_0x1dc4cb),_0x1dc4cb=_0x1dc4cb[_0x1d34e3(0x1b5)](_0x44cc1e=>{const _0x3d0135=_0x1d34e3,_0x11908d=config['portfolio'][_0x3d0135(0xde)](_0x2356a7=>_0x2356a7[_0x3d0135(0xf3)]==_0x44cc1e[_0x3d0135(0xf3)]);return _0x11908d&&!_0x11908d[_0x3d0135(0x1bb)];}),[_0x1dc4cb,_0x43977a];}async function getCoinNumber(_0x3b2ef6){const _0x2309c7=_0x100187;let _0x26662e;try{const _0x4cab7c=await exchange[_0x2309c7(0x9c)]();_0x26662e=_0x4cab7c['total'][_0x3b2ef6];}catch(_0x2fca09){await handleError(_0x2fca09,_0x2309c7(0x174));}return _0x26662e;}async function getOpenOrders(){const _0x26da84=_0x100187;let _0x42be1e;allOpenOrders=[];try{for(const _0x39cc98 of config['portfolio']){!_0x39cc98['excluded']&&_0x39cc98[_0x26da84(0xf3)]!=config[_0x26da84(0xcd)]&&(_0x42be1e=await exchange[_0x26da84(0xc2)](_0x39cc98[_0x26da84(0x9e)]),_0x42be1e[_0x26da84(0x1a0)]>0x0&&allOpenOrders['push'](_0x42be1e[0x0]));}}catch(_0x392522){await handleError(_0x392522,'getOpenOrders()');}}async function handleOpenOrders(_0x1ad838=0x0){const _0x496865=_0x100187;allOpenOrders[_0x496865(0x1a0)]==0x0&&lockOrders==ORDERS[_0x496865(0xac)]&&allOrdersPlaced&&(_0x1ad838==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x1ad838++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x496865(0x187)](_0x496865(0xd3)),validateOrders(_0x496865(0xb3))));}async function testAPI(_0x4fe335){const _0x2fc2d5=_0x100187,_0x56f5f6=ccxt[_0x4fe335[_0x2fc2d5(0xf0)][_0x2fc2d5(0x1f1)]()],_0x52d9bf=new _0x56f5f6({'apiKey':_0x4fe335['apiKey'],'secret':_0x4fe335['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x4fe335[_0x2fc2d5(0xf0)]==_0x2fc2d5(0x70)&&(_0x52d9bf['options']={'defaultType':'spot'});if(_0x4fe335['apiPassword'])_0x52d9bf[_0x2fc2d5(0x17e)]=_0x4fe335[_0x2fc2d5(0x10c)];try{await _0x52d9bf[_0x2fc2d5(0x84)]();}catch(_0x2edd22){throw _0x2edd22;}}function cloneDeep(_0x1eb8d1){const _0x4d2aac=_0x100187;return JSON[_0x4d2aac(0x198)](JSON[_0x4d2aac(0x113)](_0x1eb8d1));}async function getPortfolio(_0x5c9e45){const _0x29b5e5=_0x100187;let _0x243c99=[],_0x1404db=[],_0x581b21=[],_0x365caa;if(_0x5c9e45[_0x29b5e5(0x1dc)]!==_0x29b5e5(0x180)||_0x5c9e45[_0x29b5e5(0x109)]!=='************'||_0x5c9e45[_0x29b5e5(0x10c)]&&_0x5c9e45[_0x29b5e5(0x10c)]!==_0x29b5e5(0x180)){if(config[_0x29b5e5(0xf0)]){if(_0x5c9e45[_0x29b5e5(0x1dc)]==_0x29b5e5(0x180))_0x5c9e45[_0x29b5e5(0x1dc)]=config[_0x29b5e5(0x1dc)];if(_0x5c9e45[_0x29b5e5(0x109)]==_0x29b5e5(0x180))_0x5c9e45['apiSecret']=config[_0x29b5e5(0x109)];if(_0x5c9e45[_0x29b5e5(0x10c)]=='************')_0x5c9e45[_0x29b5e5(0x10c)]=config[_0x29b5e5(0x10c)];try{await testAPI(_0x5c9e45);}catch(_0x5c7a52){if(_0x5c7a52[_0x29b5e5(0x1f5)]()[_0x29b5e5(0x1cb)]('AuthenticationError')){logger['debug'](_0x29b5e5(0x1d7)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5c7a52,_0x29b5e5(0x91));return;}}}await initExchange(_0x5c9e45['exchange'],_0x5c9e45['apiKey'],_0x5c9e45[_0x29b5e5(0x109)],_0x5c9e45[_0x29b5e5(0x10c)]);try{await loadSymbols(_0x5c9e45['exchange'],!![]);}catch(_0xd9c1cc){if(_0xd9c1cc[_0x29b5e5(0x1f5)]()['includes']('AuthenticationError')){proxyEmit(_0x29b5e5(0x1a9),![]);return;}else{handleError(_0xd9c1cc,_0x29b5e5(0x108));return;}}const _0x58c781=await getCoins(![],_0x5c9e45[_0x29b5e5(0xcd)]);_0x581b21=cloneDeep(_0x58c781[0x1]);}else _0x581b21=cloneDeep(currentCoinsAll);if(_0x5c9e45[_0x29b5e5(0xcd)]=='')proxyEmit(_0x29b5e5(0x1a9),_0x581b21);else{_0x581b21[_0x29b5e5(0x16b)](_0x49417e=>{const _0x2b06a0=_0x29b5e5;if(_0x49417e['coin']!=_0x5c9e45[_0x2b06a0(0xcd)])_0x243c99[_0x2b06a0(0x184)](_0x49417e[_0x2b06a0(0x9e)]);});try{_0x1404db=await exchange[_0x29b5e5(0x12d)](_0x243c99);}catch(_0x143181){if(_0x143181[_0x29b5e5(0x1f5)]()['includes'](_0x29b5e5(0x1fa))){proxyEmit(_0x29b5e5(0x1a9),![]);return;}else{handleError(_0x143181,_0x29b5e5(0x17c));return;}}_0x581b21[_0x29b5e5(0x16b)](_0x27ee79=>{const _0x62982c=_0x29b5e5;_0x27ee79[_0x62982c(0xf3)]!=_0x5c9e45[_0x62982c(0xcd)]?_0x365caa=_0x27ee79['reverse']?0x1/_0x1404db[_0x27ee79[_0x62982c(0x9e)]][_0x62982c(0xea)]:_0x1404db[_0x27ee79[_0x62982c(0x9e)]][_0x62982c(0xea)]:_0x365caa=0x1,_0x27ee79[_0x62982c(0xed)]=formatResult(_0x365caa,0x8);}),proxyEmit(_0x29b5e5(0x1a9),_0x581b21);}}function truncateTradeAmount(_0x363b5b,_0x445364){const _0x5b7523=_0x100187;let _0xc1f44e=0x0;try{_0xc1f44e=exchange[_0x5b7523(0x106)](_0x363b5b,_0x445364);}catch(_0xe9b6b0){}return _0xc1f44e;}function checkMinimums(_0x2001d2){const _0x57cb72=_0x100187;let _0x15a2e3=!![];const _0x40251e=!_0x2001d2[_0x57cb72(0x176)]?markets[_0x2001d2[_0x57cb72(0x9e)]]['limits']['amount'][_0x57cb72(0x14e)]:markets[_0x2001d2['symbol']]['limits'][_0x57cb72(0x165)]['min'],_0x290a08=!_0x2001d2[_0x57cb72(0x176)]?markets[_0x2001d2[_0x57cb72(0x9e)]]['limits'][_0x57cb72(0x165)][_0x57cb72(0x14e)]:markets[_0x2001d2['symbol']][_0x57cb72(0x1d3)]['amount'][_0x57cb72(0x14e)],_0x21888e=truncateTradeAmount(_0x2001d2[_0x57cb72(0x9e)],_0x2001d2['trade']);_0x2001d2[_0x57cb72(0x16c)]=_0x21888e;if(Math[_0x57cb72(0x96)](_0x21888e)<_0x40251e)_0x15a2e3=![];if(Math[_0x57cb72(0x96)](_0x21888e)*_0x2001d2['last']<_0x290a08)_0x15a2e3=![];if(_0x2001d2[_0x57cb72(0x150)]==_0x57cb72(0xae)){let _0x2d7453=config[_0x57cb72(0x1a9)][_0x57cb72(0xde)](_0x3f0877=>_0x3f0877[_0x57cb72(0xf3)]==_0x2001d2[_0x57cb72(0xf3)]);if(_0x2d7453[_0x57cb72(0x1be)]>0x0){if(Math[_0x57cb72(0x96)](_0x21888e)>_0x2001d2[_0x57cb72(0x1e6)]-_0x2d7453['offset'])_0x15a2e3=![];}else{if(Math[_0x57cb72(0x96)](_0x21888e)>_0x2001d2[_0x57cb72(0x1e6)])_0x15a2e3=![];}}if(_0x2001d2[_0x57cb72(0x150)]=='buy'){let _0x3cc8c1=config[_0x57cb72(0x1a9)][_0x57cb72(0xde)](_0x46a19b=>_0x46a19b[_0x57cb72(0xf3)]==config[_0x57cb72(0xcd)]),_0x178868=currentCoins[_0x57cb72(0xde)](_0x224f38=>_0x224f38[_0x57cb72(0xf3)]==config[_0x57cb72(0xcd)]);if(_0x3cc8c1['offset']>0x0){if(Math[_0x57cb72(0x96)](_0x21888e)*_0x2001d2['last']>_0x178868['number']-_0x3cc8c1[_0x57cb72(0x1be)])_0x15a2e3=![];}else{if(Math[_0x57cb72(0x96)](_0x21888e)*_0x2001d2[_0x57cb72(0xea)]>_0x178868[_0x57cb72(0x1e6)])_0x15a2e3=![];}}return _0x15a2e3;}async function getBalances(_0x331361=!![]){const _0x9d7b6e=_0x100187;let _0x1bf7b2=0x0,_0x3db0ea;const _0x441682=config['threshold'];if(config[_0x9d7b6e(0x136)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x9d7b6e(0x16b)](_0x161228=>{const _0x2726b0=_0x9d7b6e;if(_0x161228[_0x2726b0(0xf3)]!=config['basecoin']){let _0x441261=global['ticker'][noslash(_0x161228[_0x2726b0(0x9e)])];_0x3db0ea=_0x161228[_0x2726b0(0x176)]?0x1/_0x441261:_0x441261;}else _0x3db0ea=0x1;let _0x15e51b=_0x161228[_0x2726b0(0x1e6)]*_0x3db0ea;_0x1bf7b2+=_0x15e51b,_0x161228[_0x2726b0(0xea)]=formatResult(Number(_0x3db0ea),0x8),_0x161228['value']=_0x15e51b;}),currentCoins[_0x9d7b6e(0x16b)](_0x89a372=>{const _0x1bc5d6=_0x9d7b6e;let _0x5612b1=config[_0x1bc5d6(0x1a9)][_0x1bc5d6(0xde)](_0xfd399e=>_0xfd399e[_0x1bc5d6(0xf3)]==_0x89a372[_0x1bc5d6(0xf3)]),_0x3d7ba9=Number(_0x5612b1[_0x1bc5d6(0x1ed)]),_0x175633=_0x89a372['value']/_0x1bf7b2*0x64,_0x567a79=_0x3d7ba9*_0x1bf7b2/0x64/_0x89a372[_0x1bc5d6(0xea)]-_0x89a372[_0x1bc5d6(0x1e6)];_0x89a372[_0x1bc5d6(0x1ed)]=formatResult(_0x175633,0x3),_0x89a372[_0x1bc5d6(0xaa)]=formatResult(_0x3d7ba9,0x3),_0x89a372[_0x1bc5d6(0x16c)]=formatResult(_0x567a79,0x8),_0x89a372['side']='',_0x89a372['valid']=![];if(_0x89a372[_0x1bc5d6(0xf3)]!=config['basecoin']){if(_0x89a372['distribution']>_0x3d7ba9)_0x89a372[_0x1bc5d6(0x150)]='sell',_0x89a372[_0x1bc5d6(0x120)]=checkMinimums(_0x89a372);else _0x89a372[_0x1bc5d6(0x1ed)]<_0x3d7ba9&&(_0x89a372[_0x1bc5d6(0x150)]='buy',_0x89a372[_0x1bc5d6(0x120)]=checkMinimums(_0x89a372));}_0x89a372[_0x1bc5d6(0x1b1)]=_0x89a372[_0x1bc5d6(0x1ed)]/_0x89a372['target']-0x1;if(_0x89a372['orderstatus']==_0x1bc5d6(0x19b)||_0x89a372['orderstatus']==_0x1bc5d6(0x13c))_0x89a372[_0x1bc5d6(0x168)]=_0x1bc5d6(0x12c);}),currentCoins[_0x9d7b6e(0x17f)]((_0x789a59,_0x214b81)=>_0x789a59[_0x9d7b6e(0x1b1)]<_0x214b81[_0x9d7b6e(0x1b1)]?0x1:_0x214b81[_0x9d7b6e(0x1b1)]<_0x789a59['delta']?-0x1:0x0);const _0x218c01=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x218c01[_0x9d7b6e(0x6c)],'usd':_0x218c01[_0x9d7b6e(0x175)],'portfolio':JSON[_0x9d7b6e(0x113)](currentCoins),'threshold':_0x441682},proxyEmit(_0x9d7b6e(0x10e),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});if(_0x331361){if(config[_0x9d7b6e(0x136)])headlessMode({'portfolio':currentCoins,'threshold':_0x441682});else{if(lockOrders==ORDERS[_0x9d7b6e(0x171)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x441682});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5f4dc6=getNormalizedPerformance();getStartingBalances(_0x5f4dc6),emitPerformance(_0x5f4dc6);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x21f152=getNormalizedPerformance();emitPerformance(_0x21f152),getStartingBalances(_0x21f152),logger[_0x9d7b6e(0x187)](_0x9d7b6e(0xfc));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4f8c7a=_0x100187;if(!lastBalances)return;let _0x343d1=[],_0x554458,_0x233b90=JSON[_0x4f8c7a(0x198)](lastBalances[_0x4f8c7a(0x1a9)]);_0x233b90[_0x4f8c7a(0x17f)]((_0x1c4702,_0x57fc8e)=>_0x1c4702[_0x4f8c7a(0xf3)]>_0x57fc8e['coin']?0x1:_0x57fc8e[_0x4f8c7a(0xf3)]>_0x1c4702[_0x4f8c7a(0xf3)]?-0x1:0x0),_0x233b90[_0x4f8c7a(0x16b)](_0x4c52e3=>{const _0x588a82=_0x4f8c7a;let _0x34489a={'coin':_0x4c52e3['coin'],'number':_0x4c52e3['number'],'price':_0x4c52e3['last']};_0x343d1[_0x588a82(0x184)](_0x34489a);});const _0x40bb09=await getFiat();_0x554458={'date':lastBalances[_0x4f8c7a(0xa6)][_0x4f8c7a(0x170)]('\x20')[0x0],'eur':_0x40bb09['eur'],'usd':_0x40bb09[_0x4f8c7a(0x175)],'coins':_0x343d1};let _0x4efad8=dbPerformance['get'](_0x4f8c7a(0x18a))[_0x4f8c7a(0xde)]({'date':_0x554458[_0x4f8c7a(0x82)]})[_0x4f8c7a(0x1dd)]();_0x4efad8?_0x554458['date']!=config['startdate']&&dbPerformance[_0x4f8c7a(0x123)]('data')[_0x4f8c7a(0xde)]({'date':_0x554458['date']})['assign'](_0x554458)[_0x4f8c7a(0xe5)]():dbPerformance[_0x4f8c7a(0x123)](_0x4f8c7a(0x18a))[_0x4f8c7a(0x184)](_0x554458)[_0x4f8c7a(0xe5)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x36b865=_0x100187;let _0x5eb9f9=[];if(dbPerformance['has'](_0x36b865(0x18a))[_0x36b865(0x1dd)]()){let _0x384227=dbPerformance['get'](_0x36b865(0x18a))[_0x36b865(0x1e7)]()['filter'](_0x5413d3=>{if(_0x5413d3['coins']['length']==0x0)return![];else return!![];})['sortBy'](_0x36b865(0x82))['value'](),_0x594376=[...config['liquidity']];_0x594376[_0x36b865(0x17f)]((_0x2cb3ff,_0xfaad49)=>_0x2cb3ff[_0x36b865(0x82)]>_0xfaad49[_0x36b865(0x82)]?-0x1:_0xfaad49['date']>_0x2cb3ff[_0x36b865(0x82)]?0x1:0x0);let _0xfe5def=0x1,_0x23aee0=[],_0x45fae8=0x0;_0x384227['slice']()[_0x36b865(0x176)]()[_0x36b865(0x16b)]((_0x2ca438,_0x2336c5)=>{const _0x46a2d8=_0x36b865;if(_0x594376[_0x45fae8]){if(_0x384227[_0x384227['length']-_0x2336c5]&&_0x594376[_0x45fae8][_0x46a2d8(0x82)]==_0x384227[_0x384227[_0x46a2d8(0x1a0)]-_0x2336c5]['date']){if(_0x2336c5<_0x384227[_0x46a2d8(0x1a0)]){let _0xfd6330=0x0,_0x53581d=0x0;_0x384227[_0x384227[_0x46a2d8(0x1a0)]-_0x2336c5]['coins']['forEach'](_0x5959be=>{const _0x38daeb=_0x46a2d8;_0x53581d+=_0x5959be[_0x38daeb(0x1e6)]*_0x5959be[_0x38daeb(0xed)];}),_0x594376[_0x45fae8]['changes'][_0x46a2d8(0x16b)](_0x437a8b=>{const _0x421bee=_0x46a2d8;_0xfd6330+=_0x437a8b[_0x421bee(0x1e6)]*_0x437a8b[_0x421bee(0xed)];}),_0xfe5def*=_0xfd6330/(_0x53581d-_0xfd6330)+0x1;}_0x45fae8++;}}let _0x11dd5b=0x0;_0x2ca438['coins'][_0x46a2d8(0x16b)](_0x6b3d8=>{const _0x1faac9=_0x46a2d8;_0x11dd5b+=_0x6b3d8[_0x1faac9(0x1e6)]*_0x6b3d8['price'];}),_0x23aee0[_0x384227[_0x46a2d8(0x1a0)]-_0x2336c5-0x1]=_0x11dd5b*(_0xfe5def-0x1);});let _0x42a4e1=[];_0x594376=[...config[_0x36b865(0x97)]]||[];let _0x83eda0=0x0;_0x45fae8=0x0,_0x384227['forEach']((_0x29e48d,_0x23058c)=>{const _0xd66919=_0x36b865;if(_0x594376[_0x45fae8]){const _0x59f8ef=fns[_0xd66919(0x198)](_0x594376[_0x45fae8][_0xd66919(0x82)],'yyyy/MM/dd',new Date()),_0x44c799=fns[_0xd66919(0x198)](_0x29e48d[_0xd66919(0x82)],_0xd66919(0xd1),new Date());if(fns['isEqual'](_0x59f8ef,_0x44c799)){let _0xeffde6=0x0;_0x594376[_0x45fae8][_0xd66919(0x19f)][_0xd66919(0x16b)](_0x5ad117=>{const _0x52e682=_0xd66919;!_0x42a4e1[_0x5ad117[_0x52e682(0xf3)]]?_0x42a4e1[_0x5ad117[_0x52e682(0xf3)]]=_0x5ad117[_0x52e682(0x1e6)]:(_0xeffde6=_0x42a4e1[_0x5ad117[_0x52e682(0xf3)]],_0x42a4e1[_0x5ad117[_0x52e682(0xf3)]]+=_0x5ad117[_0x52e682(0x1e6)]);const _0x660030=_0x29e48d['coins']['find'](_0xb04477=>_0xb04477['coin']==_0x5ad117[_0x52e682(0xf3)]);(!_0x660030||_0x660030[_0x52e682(0x1e6)]==0x0)&&(_0x83eda0+=(-_0x5ad117[_0x52e682(0x1e6)]-_0xeffde6)*_0x5ad117[_0x52e682(0xed)]);}),_0x45fae8++;}}_0x29e48d[_0xd66919(0x128)][_0xd66919(0x16b)]((_0x480e5f,_0x2555e9)=>{const _0x1870f5=_0xd66919;_0x42a4e1[_0x480e5f['coin']]&&(_0x480e5f[_0x1870f5(0x18b)]=_0x42a4e1[_0x480e5f[_0x1870f5(0xf3)]]);}),_0x5eb9f9[_0xd66919(0x184)]({'date':_0x29e48d[_0xd66919(0x82)],'eur':_0x29e48d[_0xd66919(0x6c)],'usd':_0x29e48d[_0xd66919(0x175)],'offset':_0x23aee0[_0x23058c],'netoffset':_0x83eda0,'coins':_0x29e48d[_0xd66919(0x128)]});});}return _0x5eb9f9;}function emitPerformance(_0x4407a3){const _0x1e7203=_0x100187;_0x4407a3[_0x1e7203(0x1a0)]!==0x0?(proxyEmit(_0x1e7203(0x129),_0x4407a3),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x543c6d,_0x3657b1){const _0x13f140=_0x100187;let _0x5e2804=0x0,_0x19b4f5=0x0,_0x27d00d=0x0;_0x543c6d[_0x13f140(0x128)]['forEach'](_0x371328=>{const _0x1e3403=_0x13f140;_0x5e2804+=_0x371328[_0x1e3403(0x1e6)]*_0x371328[_0x1e3403(0xed)];});_0x3657b1&&(_0x5e2804+=_0x543c6d['offset']);if(config[_0x13f140(0xcd)]===_0x13f140(0x1fb)||config['basecoin']==='ETH')_0x19b4f5=_0x5e2804*_0x543c6d[_0x13f140(0x6c)],_0x27d00d=_0x5e2804*_0x543c6d[_0x13f140(0x175)];else{if(usdBasecoins[_0x13f140(0x1cb)](config['basecoin']))_0x19b4f5=_0x5e2804*_0x543c6d[_0x13f140(0x6c)]/_0x543c6d[_0x13f140(0x175)],_0x27d00d=_0x5e2804;else config[_0x13f140(0xcd)]===_0x13f140(0x1d4)&&(_0x19b4f5=_0x5e2804,_0x27d00d=_0x5e2804*_0x543c6d[_0x13f140(0x175)]/_0x543c6d[_0x13f140(0x6c)]);}return[_0x5e2804,_0x19b4f5,_0x27d00d];}function getKPIs(_0xc52487,_0x4b6c05=_0x100187(0x1d4)){const _0x3ac176=_0x100187,_0x2a181e=config[_0x3ac176(0xcd)],_0xd0f2b5=lastBalances,_0x4b2881=currentCoins,_0x16332b=getNormalizedPerformance(),_0x1567c3=_0xc52487==='basecoin'?_0x2a181e:_0xc52487===_0x3ac176(0x1e8)||_0xc52487==='net-fiat'?_0x4b6c05:'Net\x20'+_0x2a181e,_0x21054a=_0xc52487===_0x3ac176(0x182)?_0x3ac176(0xb8):_0xc52487==='net-fiat'?_0x3ac176(0xb8):_0x1567c3+_0x3ac176(0x15d),_0x2a702b=_0xc52487===_0x3ac176(0x182)||_0xc52487==='net-fiat'?_0x3ac176(0xb8):_0x1567c3+_0x3ac176(0x1aa);let _0x4e49e6=0x0;_0x4b2881['forEach'](_0x80fa95=>{const _0x1ac659=_0x3ac176;_0x4e49e6+=_0x80fa95[_0x1ac659(0x1e6)]*_0x80fa95[_0x1ac659(0xea)];});if(_0xc52487===_0x3ac176(0x1e8)||_0xc52487===_0x3ac176(0x121)){if(_0x2a181e===_0x3ac176(0x1fb)||_0x2a181e===_0x3ac176(0xbb))_0x4e49e6=_0x4e49e6*(_0x4b6c05===_0x3ac176(0x1d4)?_0xd0f2b5['eur']:_0xd0f2b5[_0x3ac176(0x175)]);else{if(usdBasecoins[_0x3ac176(0x1cb)](_0x2a181e))_0x4e49e6=_0x4e49e6*(_0x4b6c05===_0x3ac176(0x1d4)?_0xd0f2b5[_0x3ac176(0x6c)]/_0xd0f2b5[_0x3ac176(0x175)]:0x1);else _0x2a181e===_0x3ac176(0x1d4)&&(_0x4e49e6=_0x4e49e6*(_0x4b6c05===_0x3ac176(0x1d4)?0x1:_0xd0f2b5[_0x3ac176(0x175)]/_0xd0f2b5[_0x3ac176(0x6c)]));}}let _0x1a0354;if(_0x4e49e6!==0x0){if(_0xc52487==='basecoin')_0x1a0354=(_0x4e49e6/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4b6c05===_0x3ac176(0x1d4))_0x1a0354=(_0x4e49e6/startingBalances['eur']-0x1)*0x64;else _0x1a0354=(_0x4e49e6/startingBalances['usd']-0x1)*0x64;}let _0x36fa81=0x0;if(startingBalances['coins'])_0x4b2881[_0x3ac176(0x16b)](_0x5ed4d1=>{const _0xf2c087=_0x3ac176;let _0xcd5349=startingBalances['coins'][_0xf2c087(0xde)](_0x148445=>_0x148445['coin']===_0x5ed4d1[_0xf2c087(0xf3)]);if(_0xcd5349&&_0xcd5349[_0xf2c087(0xf3)]&&_0x5ed4d1[_0xf2c087(0x1e6)]!==0x0)_0x36fa81+=_0xcd5349['number']*_0x5ed4d1['last'];});let _0x33f149=0x0;if(_0x16332b[_0x3ac176(0x1a0)]!==0x0){let _0x10034f=_0x16332b[_0x16332b[_0x3ac176(0x1a0)]-0x1];_0x33f149=_0x10034f['netoffset'];}_0x36fa81-=_0x33f149;_0xc52487===_0x3ac176(0x182)&&(_0x1a0354=(_0x4e49e6-_0x36fa81)/startingBalances['basecoin']*0x64,_0x4e49e6=_0x4e49e6-_0x36fa81);if(_0xc52487===_0x3ac176(0x121)){let _0x2121bd=_0x4b6c05==='EUR'?startingBalances[_0x3ac176(0x6c)]:startingBalances[_0x3ac176(0x175)];if(_0x2a181e===_0x3ac176(0x1fb)||_0x2a181e===_0x3ac176(0xbb))_0x36fa81=_0x4b6c05==='EUR'?_0x36fa81*_0xd0f2b5[_0x3ac176(0x6c)]:_0x36fa81*_0xd0f2b5[_0x3ac176(0x175)];else{if(usdBasecoins[_0x3ac176(0x1cb)](_0x2a181e))_0x36fa81=_0x4b6c05===_0x3ac176(0x1d4)?_0x36fa81*_0xd0f2b5[_0x3ac176(0x6c)]/_0xd0f2b5[_0x3ac176(0x175)]:_0x36fa81;else _0x2a181e===_0x3ac176(0x1d4)&&(_0x36fa81=_0x4b6c05===_0x3ac176(0x1d4)?_0x36fa81:_0x36fa81*_0xd0f2b5['usd']/_0xd0f2b5[_0x3ac176(0x6c)]);}_0x1a0354=(_0x4e49e6-_0x36fa81)/_0x2121bd*0x64,_0x4e49e6=_0x4e49e6-_0x36fa81;}if(_0x1a0354){if(_0x1a0354<0x64)_0x1a0354=_0x1a0354[_0x3ac176(0x159)](0x2);else{if(_0x1a0354<0x3e8)_0x1a0354=_0x1a0354[_0x3ac176(0x159)](0x1);else _0x1a0354=_0x1a0354[_0x3ac176(0x159)](0x0);}}else _0x1a0354=Number('0')[_0x3ac176(0x159)](0x2);if(_0x4e49e6){if(Math[_0x3ac176(0x96)](_0x4e49e6)<0.000001)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x2);else{if(Math['abs'](_0x4e49e6)<0.1)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x6);else{if(Math[_0x3ac176(0x96)](_0x4e49e6)<0x1)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x5);else{if(Math[_0x3ac176(0x96)](_0x4e49e6)<0xa)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x4);else{if(Math['abs'](_0x4e49e6)<0x64)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x3);else{if(Math[_0x3ac176(0x96)](_0x4e49e6)<0x3e8)_0x4e49e6=_0x4e49e6[_0x3ac176(0x159)](0x2);else _0x4e49e6=_0x4e49e6['toFixed'](0x2);}}}}}}else _0x4e49e6=Number('0')[_0x3ac176(0x159)](0x2);}else _0x1a0354=Number('0')[_0x3ac176(0x159)](0x2);return{'value':_0x4e49e6,'change':_0x1a0354,'leftTxt':_0x21054a,'rightTxt':_0x2a702b};}async function getStartingBalances(_0xd719f6,_0x13afb5=!![]){const _0xb71f57=_0x100187;if(_0xd719f6[_0xb71f57(0x1a0)]!==0x0){const [_0x430e77,_0x2401f6,_0x2bea12]=getPerf(_0xd719f6[0x0],!![]);let _0x1950e3=[];config[_0xb71f57(0x1a9)][_0xb71f57(0x16b)](_0x56d08f=>{const _0x265f73=_0xb71f57;let _0x1418da=0x0,_0x31838c;config[_0x265f73(0x97)][_0x265f73(0x16b)](_0x14e4fc=>{const _0x496424=_0x265f73;let _0x2434e2=_0x14e4fc[_0x496424(0x19f)]['find'](_0x24cede=>_0x24cede[_0x496424(0xf3)]==_0x56d08f[_0x496424(0xf3)]);if(_0x2434e2){_0x1418da+=_0x2434e2[_0x496424(0x1e6)];if(!_0x31838c)_0x31838c=_0x2434e2[_0x496424(0xed)];}}),_0x1950e3[_0x265f73(0x184)]({'coin':_0x56d08f[_0x265f73(0xf3)],'number':_0x1418da,'initialprice':_0x31838c});});const _0x5e4264={'basecoin':_0x430e77,'eur':_0x2401f6,'usd':_0x2bea12,'coins':_0x1950e3};if(_0x13afb5)proxyEmit(_0xb71f57(0x1e0),_0x5e4264);startingBalances=_0x5e4264;}}function _0x57a1(){const _0x18200a=['apiSecret','page','autoliquidity','apiPassword','1\x20-\x20FILLED:\x20','balances','running','substring','onepagemode','breakeven','stringify','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','differenceInSeconds','ORDERS.UNLOCKING','unlinkSync','balancing\x20resumed',':\x20Bot\x20','uncaughtException','splice','startsWith','writeFile','starting-balance-','kill','valid','net-fiat','fee','get','existsSync','options','yyyy-MM-dd\x27T\x27HH:mm:ss','currency','coins','performance','\x20connection\x20problem','createWriteStream','none','fetchTickers','\x20exchange','getCoins()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20hour','resetHistory','set','/USD','\x20|\x20lock\x20orders:\x20','headless','botname','\x20order:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','-------------------------------\x0a','bb-settings.json','canceled','slice','exchanges','remainingSymbols','decrypt','pro','amount','getPortfolio','padEnd','symbols','send','showConfig','version','ask','9444391soqbjJ','Bot\x20','coin-loading-progress','Resetting\x20coin\x20results:\x20','min','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','side','enabled','watchTrades',':\x20timer\x20>','DAI/','bot','removed','emitHistory','startnumber','toFixed','watchOrders','constructor','cancelOrder','\x20value','warning','getFullYear','\x20API\x20key\x20is\x20invalid','fromCodePoint','264408CYodhM','ongoing','total','cost','getTime','3\x20-\x20handling\x20FILLED\x20order:\x20','orderstatus','-config.json','BNB/','forEach','trade','mkdirSync','USDP','findIndex','split','UNLOCKED','2\x20-\x20Orders\x20unlocked','realized','getCoinNumber()','usd','reverse','getMinutes','API-key\x20format\x20invalid','configuration','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','toggleBotMode','getPortfolio(2)','\x20>\x20[DEBUG]\x20','password','sort','************','Failed\x20to\x20load\x20coin\x20data\x20for\x20','net-basecoin','argv','push','has','bots','debug','Initiating\x20exchange\x20reload','Unknown\x20error\x20occured','data','initial','1065290VPODUW','sha256','average','production','(((.+)+)+)+$','path','RequestTimeout','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','-performance.json','2\x20-\x20FILLED\x20known\x20order:\x20','-results.json','USDT','parse','Order\x20amount\x20is\x20invalid:\x20','bid','filled','floor','function','format','changes','length','concat','\x20minutes\x20-\x20','Fee\x20discount\x20refund\x20detected:\x20','1996377mbEdDX','Fees\x20|\x20currency:\x20','milliseconds','NetworkError','max','portfolio','\x20change','Error\x20while\x20deleting\x20files:\x20','open','isEqual','Limit\x20(high-margin)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','delta','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','limit-low','recent20','filter','privateKey','added','001','ccxt','balancing\x20resumes\x20when\x20cooldown\x20ends','excluded','error','round','offset','util','-events.json','10NVzzsw','\x20API\x20secret\x20is\x20invalid','getDate','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','./config/','startprice','Pausing\x20for\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','initclient','timeshift','includes','getSeconds','watchTransactions','timestamp','placeOrder','No\x20more\x20open\x20orders\x20-\x20','14EXPGFV','cooldown','limits','EUR','join','status','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','logs','\x20|\x20','RSA-OAEP','apiKey','value','lowdb/adapters/FileSync','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','starting-balances','timeout','Crypt','UNLOCKING','\x20portfolio:</b>\x20\x0a\x0a','spot','number','cloneDeep','fiat','0\x20-\x20EXECUTION:\x20','keys','event-history','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','distribution','shift','Order\x20filled:\x20','padStart','toLowerCase','2\x20-\x20FILLED\x20unknown\x20order:\x20','InsufficientFunds','cancel','toString','cancelOrders()','datetime',',\x20must\x20be\x20a\x203\x20digit\x20number','environment','AuthenticationError','BTC','Uncaught\x20Exception:','colorscheme','sortBy','eur','ExchangeNotAvailable','ID:\x20','2.3.5','Bybit','rightTxt','storeConfiguration','deleteHistoryAlerts','buy','Exchange','additional\x20symbols\x20','ordertype','MIN_NOTIONAL','sendPortfolioTelegram','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','threshold','ORDERS.LOCKED','\x20has\x20a\x2024h\x20drop\x20of\x20','252214VPKHLJ','./version.json','toUpperCase','emojisell','date','Error:\x20Invalid\x20argument\x20','loadMarkets','getHours','</pre>','loading-canceled','getStartingBalances','highest','yargs/yargs','final','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','./logs/','recovery','exec','Invalid\x20quantity','getPortfolio(0)','Portfolio\x20change\x20detected:\x20','fetchTicker','message','botID','abs','liquidity','no\x20additional\x20symbols','\x20>\x20','<b>Bot\x20','change','fetchBalance','leftTxt','symbol','Market','fetchClosedOrders','indexOf','customId','117kVGYYz','entries','openOrders','time','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','type','hybrid-crypto-js','target','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','LOCKED','getMonth','sell','InvalidOrder','\x20|\x20Error\x20details:\x20','assign','\x20|\x20exchange:\x20','no\x20open\x20orders','\x20orders\x20in\x20less\x20than\x20','random','Waited\x20','restart','Net\x20effect','OrderNotFound','USD','ETH','full','map','startdate','.json','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Executed\x20','fetchOpenOrders','Executing\x20exchange\x20reload','Manual\x20balancing\x20required','createOrder','limit','replace','lowdb','order','cancelLoading','freeze','InvalidNonce','basecoin','red_yellow_blue','defaults','closed','yyyy/MM/dd','change24h','2\x20-\x20Handled\x20open\x20orders','1\x20-\x20Unlock\x20orders','buys','<pre>','orderId','Binance','must\x20be\x20greater\x20than\x20minimum\x20amount','BNB','95154hwNTvI','Order(s)\x20not\x20validated\x20after\x20','event','find','market','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20|\x20highest:\x20','sendMetricsTelegram','\x20:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','write','recreate','sells','progress','Reset\x20|\x20','last','ticker','Order\x20is\x20invalid:\x20','price','limit-high','2WJtHPz','exchange','825580mbnttF','log','coin','bot-','emojibuy','\x20not\x20available','success','/EUR','<b>','exchange\x20not\x20reloaded','BUSD','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','args','/backup/','storeHeadless','Transaction\x20detection\x20blocked','apply','showname','%\x20(','2.6.0','Avoiding\x20continuous\x20order\x20attempts','amountToPrecision','search','getPortfolio(1)'];_0x57a1=function(){return _0x18200a;};return _0x57a1();}function headlessMode(_0x27ad42){const _0x3d86b6=_0x100187;let _0x38b814=_0x27ad42[_0x3d86b6(0x1a9)],_0x55d7f2=_0x27ad42['threshold'],_0x3d5541=[];for(let _0x23e21c of _0x38b814){if(_0x23e21c[_0x3d86b6(0xf3)]!=config[_0x3d86b6(0xcd)]){if(_0x23e21c[_0x3d86b6(0x1b1)]>=_0x55d7f2/0x64){if(_0x23e21c['valid'])_0x3d5541[_0x3d86b6(0x184)](_0x23e21c);}else{if(_0x23e21c[_0x3d86b6(0x1b1)]<=-_0x55d7f2/0x64){if(_0x23e21c[_0x3d86b6(0x120)])_0x3d5541[_0x3d86b6(0x184)](_0x23e21c);}}}}_0x3d5541['length']>0x0&&placeOrder(_0x3d5541);}function notifyBalance(_0x38b031){const _0x5efdfe=_0x100187;let _0x40ea90=_0x38b031[_0x5efdfe(0x1a9)],_0x5c70ed=_0x38b031[_0x5efdfe(0x7b)],_0x411ec1=[];for(let _0x2d65d2 of _0x40ea90){if(_0x2d65d2[_0x5efdfe(0xf3)]!=config['basecoin']){if(_0x2d65d2[_0x5efdfe(0x1b1)]>=_0x5c70ed/0x64){if(_0x2d65d2[_0x5efdfe(0x120)])_0x411ec1[_0x5efdfe(0x184)](_0x2d65d2);}else{if(_0x2d65d2[_0x5efdfe(0x1b1)]<=-_0x5c70ed/0x64){if(_0x2d65d2[_0x5efdfe(0x120)])_0x411ec1['push'](_0x2d65d2);}}}}if(_0x411ec1[_0x5efdfe(0x1a0)]>0x0){let _0x5ac18b=_0x411ec1[_0x5efdfe(0xbd)](_0x4e4de7=>_0x4e4de7[_0x5efdfe(0xf3)]);_0x5ac18b[_0x5efdfe(0x17f)]();let _0x138431=_0x5ac18b[_0x5efdfe(0x1d5)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5efdfe(0x15e),_0x5efdfe(0xc4));lastCoinsToBalance=_0x138431;}}function symbolToCoin(_0xd3d0d5){const _0xc2426d=_0x100187;let _0x46473e;if(_0xd3d0d5[_0xc2426d(0x1cb)]('/'+config[_0xc2426d(0xcd)]))_0x46473e=_0xd3d0d5[_0xc2426d(0xc7)]('/'+config['basecoin'],'');if(_0xd3d0d5['includes'](config['basecoin']+'/'))_0x46473e=_0xd3d0d5['replace'](config[_0xc2426d(0xcd)]+'/','');return _0x46473e;}async function unlockOrders(){const _0x18bd80=_0x100187;if(allOrdersPlaced&&lockOrders==ORDERS[_0x18bd80(0xac)]){logger[_0x18bd80(0x187)](_0x18bd80(0xd4)),lockOrders=ORDERS[_0x18bd80(0x1e3)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x38a4dc=await getCoins();[currentCoins,currentCoinsAll]=_0x38a4dc,validateOrdersState=_0x18bd80(0x18b),persistOpenOrders([]),lockOrders=ORDERS[_0x18bd80(0x171)],logger[_0x18bd80(0x187)](_0x18bd80(0x172));}}async function validateOrders(_0x10c7b6){const _0x2bf5c5=_0x100187;if(_0x10c7b6)validateOrdersState=_0x10c7b6;logger[_0x2bf5c5(0x187)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x2bf5c5(0x135)+(lockOrders==0x1?_0x2bf5c5(0x7c):lockOrders==0x2?_0x2bf5c5(0x116):'ORDERS.UNLOCKED'));let _0x4972db=[],_0x3cf431=config[_0x2bf5c5(0x77)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2bf5c5(0xac)])return;logger[_0x2bf5c5(0x187)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x2bf5c5(0x16b)](_0x16d239=>{const _0x3f9440=_0x2bf5c5;let _0x25dfe6=![];_0x16d239[_0x3f9440(0x19b)]>0x0&&(_0x25dfe6=!![]),_0x4972db[_0x3f9440(0x184)](_0x25dfe6),_0x25dfe6&&config['ordertype']!='market'&&logHistory('order',_0x3f9440(0x1ef)+_0x16d239[_0x3f9440(0x9e)]+'\x20'+_0x16d239[_0x3f9440(0x150)]+'\x20#'+formatResult(_0x16d239[_0x3f9440(0x19b)],0x8)+'\x20@'+formatResult(_0x16d239[_0x3f9440(0xed)],0x8));}),_0x4972db['forEach']((_0x3eb388,_0x22fe1c)=>{if(_0x3eb388)lastOrders['splice'](_0x22fe1c,0x1);}),persistOpenOrders(lastOrders);const _0x4cde34=coolingDown?_0x2bf5c5(0x1ba):_0x2bf5c5(0x118);if(validateOrdersState==_0x2bf5c5(0x18b)){validateOrdersState=_0x2bf5c5(0x163);if(_0x4972db['includes'](![])){if(config[_0x2bf5c5(0x77)]==_0x2bf5c5(0xdf)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x4972db[_0x2bf5c5(0x1cb)](![])){}else{if(allOrdersPlaced){if(config[_0x2bf5c5(0x77)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x4972db[_0x2bf5c5(0x1cb)](![])&&(config[_0x2bf5c5(0x77)]==_0x2bf5c5(0xdf)?logHistory(_0x2bf5c5(0xf7),_0x2bf5c5(0xdc)+Math[_0x2bf5c5(0x1bd)](_0x3cf431*validateOrderInterval/0xea60)+_0x2bf5c5(0x1a2)+_0x4cde34):(await cancelOrders(),logHistory(_0x2bf5c5(0xf7),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x2bf5c5(0x1bd)](_0x3cf431*validateOrderInterval/0xea60)+_0x2bf5c5(0x1a2)+_0x4cde34))),await unlockOrders();else{if(validateOrdersState==_0x2bf5c5(0xb3)){if(config[_0x2bf5c5(0x77)]!=_0x2bf5c5(0xdf))logHistory(_0x2bf5c5(0xf7),_0x2bf5c5(0x1d0)+_0x4cde34);await unlockOrders();}}}}}async function cancelOrders(){const _0x18c885=_0x100187;lastOrders[_0x18c885(0x16b)](async _0x3f6a96=>{const _0xeb5656=_0x18c885;try{const _0x5d6218=await exchange['cancelOrder'](_0x3f6a96['orderId'],_0x3f6a96[_0xeb5656(0x9e)]);}catch(_0x56bf42){if(_0x56bf42['toString']()[_0xeb5656(0x1cb)](_0xeb5656(0xb9))){}else await handleError(_0x56bf42,_0xeb5656(0x1f6));}});}async function initCoinResults(_0x2ecd88){const _0xe39bcf=_0x100187;_0x2ecd88?logger[_0xe39bcf(0x187)](_0xe39bcf(0x14d)+_0x2ecd88):logger[_0xe39bcf(0x187)]('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0xba831c=>{const _0x4a9e90=_0xe39bcf;if(!_0xba831c[_0x4a9e90(0x1bb)]&&_0xba831c[_0x4a9e90(0xf3)]!=config['basecoin']){const _0x4446ab=currentCoins[_0x4a9e90(0xde)](_0x188be3=>_0x188be3[_0x4a9e90(0xf3)]==_0xba831c['coin']),_0x2d497f=global[_0x4a9e90(0xeb)][noslash(_0xba831c['symbol'])];let _0x1bdc8d=_0x4446ab?_0x4446ab['number']:null,_0x211dc4=_0xba831c[_0x4a9e90(0x176)]?0x1/_0x2d497f:_0x2d497f,_0x45f3ac;config[_0x4a9e90(0x97)][_0x4a9e90(0x16b)](_0x1599b0=>{const _0x1b480b=_0x4a9e90;!_0x45f3ac&&(_0x45f3ac=_0x1599b0['changes']['find'](_0x28d355=>_0x28d355[_0x1b480b(0xf3)]==_0xba831c[_0x1b480b(0xf3)]),_0x45f3ac&&(_0x1bdc8d=_0x45f3ac[_0x1b480b(0x1e6)],_0x211dc4=_0x45f3ac[_0x1b480b(0xed)]));});let _0x245e2f=dbCoinResults[_0x4a9e90(0x123)]('coins')[_0x4a9e90(0xde)]({'coin':_0xba831c[_0x4a9e90(0xf3)]})[_0x4a9e90(0x1dd)]();if(!_0x245e2f){const _0x1ba4a3={'coin':_0xba831c[_0x4a9e90(0xf3)],'number':_0x1bdc8d,'breakeven':_0x211dc4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4a9e90(0x123)]('coins')[_0x4a9e90(0x184)](_0x1ba4a3)[_0x4a9e90(0xe5)]();}else{if(_0x2ecd88&&_0xba831c[_0x4a9e90(0xf3)]==_0x2ecd88){const _0x5cafae={'coin':_0xba831c[_0x4a9e90(0xf3)],'number':_0x1bdc8d,'breakeven':_0x211dc4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4a9e90(0x123)](_0x4a9e90(0x128))[_0x4a9e90(0xde)]({'coin':_0xba831c['coin']})['assign'](_0x5cafae)[_0x4a9e90(0xe5)]();}}}});}async function updateCoinResults(_0x490bf4,_0x40bf53=![]){const _0x1e6d5a=_0x100187;let _0x221482,_0x4da838,_0x14b2e8,_0x5d270e,_0x2e832e,_0x4c1210,_0x5e87e4=dbCoinResults[_0x1e6d5a(0x123)](_0x1e6d5a(0x128))[_0x1e6d5a(0xde)]({'coin':_0x490bf4[_0x1e6d5a(0xf3)]})[_0x1e6d5a(0x1dd)](),_0x358dff=![];Object[_0x1e6d5a(0xa4)](_0x5e87e4)[_0x1e6d5a(0x16b)](([_0x3b852e,_0x241767])=>{if(_0x241767==null)_0x358dff=!![];});(!_0x5e87e4||_0x358dff)&&(await initCoinResults(_0x490bf4[_0x1e6d5a(0xf3)]),_0x5e87e4=dbCoinResults['get']('coins')[_0x1e6d5a(0xde)]({'coin':_0x490bf4[_0x1e6d5a(0xf3)]})[_0x1e6d5a(0x1dd)]());_0x490bf4[_0x1e6d5a(0x176)]&&(_0x4c1210={'filled':_0x490bf4[_0x1e6d5a(0x19b)]*_0x490bf4[_0x1e6d5a(0xed)],'amount':_0x490bf4[_0x1e6d5a(0x19b)]*_0x490bf4[_0x1e6d5a(0xed)],'side':_0x490bf4[_0x1e6d5a(0x150)]=='sell'?_0x1e6d5a(0x74):_0x1e6d5a(0xae),'price':0x1/_0x490bf4[_0x1e6d5a(0xed)]},_0x490bf4={..._0x490bf4,..._0x4c1210});_0x40bf53?_0x4da838=_0x490bf4[_0x1e6d5a(0x150)]=='buy'?_0x5e87e4[_0x1e6d5a(0x1e6)]+_0x490bf4[_0x1e6d5a(0x19b)]:_0x5e87e4['number']-_0x490bf4[_0x1e6d5a(0x19b)]:_0x4da838=await getCoinNumber(_0x490bf4[_0x1e6d5a(0xf3)]);if(_0x490bf4['fee']&&_0x490bf4[_0x1e6d5a(0x122)][_0x1e6d5a(0x127)]==config[_0x1e6d5a(0xcd)])_0x221482=_0x490bf4[_0x1e6d5a(0x122)]['cost'];else{if(_0x490bf4['fee']&&_0x490bf4[_0x1e6d5a(0x122)]['currency']==_0x1e6d5a(0xda)&&!_0x40bf53)_0x221482=_0x490bf4[_0x1e6d5a(0x122)][_0x1e6d5a(0x165)]*global['ticker'][_0x1e6d5a(0xda)+config[_0x1e6d5a(0xcd)]];else _0x221482=defaultFee*_0x490bf4[_0x1e6d5a(0x19b)]*_0x490bf4['price'];}_0x490bf4[_0x1e6d5a(0x150)]==_0x1e6d5a(0x74)?(_0x14b2e8=_0x4da838!=0x0?(_0x5e87e4['breakeven']*_0x5e87e4[_0x1e6d5a(0x1e6)]+_0x490bf4[_0x1e6d5a(0xed)]*(_0x4da838-_0x5e87e4[_0x1e6d5a(0x1e6)])+_0x221482)/_0x4da838:0x0,_0x5d270e=_0x5e87e4['realized']):(_0x14b2e8=_0x4da838!=0x0?(_0x5e87e4[_0x1e6d5a(0x112)]*_0x5e87e4[_0x1e6d5a(0x1e6)]-_0x490bf4[_0x1e6d5a(0xed)]*(_0x5e87e4[_0x1e6d5a(0x1e6)]-_0x4da838)+_0x221482)/_0x4da838:0x0,_0x5d270e=_0x5e87e4[_0x1e6d5a(0x173)]+(_0x490bf4[_0x1e6d5a(0xed)]-_0x5e87e4[_0x1e6d5a(0x112)])*_0x490bf4[_0x1e6d5a(0x19b)]);_0x2e832e=(_0x490bf4['price']-_0x14b2e8-_0x221482/_0x490bf4[_0x1e6d5a(0x19b)])*_0x4da838;let _0x5741d2={'coin':_0x490bf4[_0x1e6d5a(0xf3)],'number':_0x4da838,'breakeven':formatResult(_0x14b2e8,0x8),'realized':formatResult(_0x5d270e,0x8),'unrealized':formatResult(_0x2e832e,0x8),'fees':formatResult(_0x5e87e4['fees']+_0x221482,0x8),'sells':_0x490bf4[_0x1e6d5a(0x150)]=='sell'?_0x5e87e4[_0x1e6d5a(0xe7)]+0x1:_0x5e87e4[_0x1e6d5a(0xe7)],'buys':_0x490bf4[_0x1e6d5a(0x150)]==_0x1e6d5a(0x74)?_0x5e87e4[_0x1e6d5a(0xd5)]+0x1:_0x5e87e4[_0x1e6d5a(0xd5)]};dbCoinResults['get']('coins')['find']({'coin':_0x490bf4[_0x1e6d5a(0xf3)]})[_0x1e6d5a(0xb1)](_0x5741d2)[_0x1e6d5a(0xe5)]();if(!_0x40bf53){if(_0x490bf4[_0x1e6d5a(0x122)]&&_0x490bf4['fee'][_0x1e6d5a(0x127)]==_0x1e6d5a(0xda)){const _0x388739=currentCoins[_0x1e6d5a(0xde)](_0x5f346b=>_0x5f346b[_0x1e6d5a(0xf3)]==_0x1e6d5a(0xda));if(_0x388739){let _0x5d669f=dbCoinResults[_0x1e6d5a(0x123)]('coins')[_0x1e6d5a(0xde)]({'coin':_0x1e6d5a(0xda)})[_0x1e6d5a(0x1dd)]();_0x5741d2={..._0x5d669f,'number':_0x388739[_0x1e6d5a(0x1e6)]},dbCoinResults[_0x1e6d5a(0x123)](_0x1e6d5a(0x128))['find']({'coin':_0x1e6d5a(0xda)})[_0x1e6d5a(0xb1)](_0x5741d2)[_0x1e6d5a(0xe5)]();}}}}async function placeOrder(_0x5c59e1){const _0x599c79=_0x100187,_0x26110c=config[_0x599c79(0x77)]==_0x599c79(0xdf)?_0x599c79(0xdf):'limit';if(lockOrders==ORDERS[_0x599c79(0x171)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x599c79(0xac)],allOrdersPlaced=![],validateOrdersState=_0x599c79(0x18b);let _0x4a63a5=![];lastOrders=[];for(const _0x5d4c61 of _0x5c59e1){let _0x3011fa,_0x85ce2c,_0x35354f,_0x14cf29,_0x2c79a4,_0x265030=_0x5d4c61['symbol'];try{const _0x4e86cb=await exchange['fetchTicker'](_0x265030);_0x3011fa=_0x5d4c61[_0x599c79(0x176)]?0x1/_0x5d4c61[_0x599c79(0xea)]:_0x5d4c61[_0x599c79(0xea)],_0x85ce2c=_0x4e86cb[_0x599c79(0x19a)],_0x35354f=_0x4e86cb[_0x599c79(0x149)];_0x5d4c61['reverse']?(_0x14cf29=_0x5d4c61[_0x599c79(0x150)]=='buy'?_0x599c79(0xae):'buy',_0x2c79a4=Math['abs'](_0x5d4c61['trade'])/_0x3011fa):(_0x14cf29=_0x5d4c61[_0x599c79(0x150)],_0x2c79a4=Math['abs'](_0x5d4c61['trade']));_0x26110c==_0x599c79(0xc6)&&(config[_0x599c79(0x77)]==_0x599c79(0xee)&&(_0x3011fa=_0x14cf29==_0x599c79(0x74)?_0x85ce2c:_0x35354f),config[_0x599c79(0x77)]==_0x599c79(0x1b3)&&(_0x3011fa=_0x14cf29=='buy'?_0x35354f:_0x85ce2c));_0x2c79a4=formatResult(_0x2c79a4,0x8),_0x3011fa=formatResult(_0x3011fa,0x8);const _0x2cfc64=_0x14cf29==_0x599c79(0xae)?config[_0x599c79(0x81)]?String[_0x599c79(0x161)]('0x'+config[_0x599c79(0x81)])+'\x20':'':config['emojibuy']?String[_0x599c79(0x161)]('0x'+config[_0x599c79(0xf5)])+'\x20':'',_0xe5aed3=_0x26110c==_0x599c79(0xdf)?_0x599c79(0x9f):config[_0x599c79(0x77)]=='limit-high'?_0x599c79(0x1ae):'Limit\x20(low-margin)',_0x389558=(Math[_0x599c79(0x19c)](Math[_0x599c79(0xb5)]()*0x35a4e900)+0x5f5e100)[_0x599c79(0x1f5)]();lastOrders[_0x599c79(0x184)]({'customId':_0x389558,'symbol':_0x265030,'coin':_0x5d4c61['coin'],'amount':_0x2c79a4,'price':_0x3011fa,'side':_0x14cf29,'reverse':_0x5d4c61[_0x599c79(0x176)],'filled':0x0});if(_0x26110c==_0x599c79(0xdf))logHistory(_0x599c79(0xc9),''+_0x2cfc64+_0xe5aed3+_0x599c79(0x138)+_0x265030+'\x20'+_0x14cf29+'\x20#'+formatResult(_0x2c79a4,0x8)+'\x20@'+formatResult(_0x3011fa,0x8));else logHistory(_0x599c79(0xc9),''+_0x2cfc64+_0xe5aed3+_0x599c79(0x138)+_0x265030+'\x20'+_0x14cf29+'\x20#'+formatResult(_0x2c79a4,0x8)+'\x20@'+formatResult(_0x3011fa,0x8));const _0x4bf233=await exchange[_0x599c79(0xc5)](_0x265030,_0x26110c,_0x14cf29,_0x2c79a4,_0x3011fa);logger[_0x599c79(0x187)](_0x599c79(0x6e)+_0x4bf233['id']+'\x20|\x20Custom\x20ID:\x20'+_0x389558);const _0x24ea80=lastOrders[_0x599c79(0x1a0)]-0x1;if(_0x24ea80>=0x0&&lastOrders[_0x24ea80][_0x599c79(0xa2)]==_0x389558){lastOrders[_0x24ea80][_0x599c79(0xd7)]=_0x4bf233['id'];if(_0x4bf233[_0x599c79(0x142)])lastOrders[_0x24ea80][_0x599c79(0x142)]=_0x4bf233[_0x599c79(0x142)];if(_0x4bf233[_0x599c79(0xed)])lastOrders[_0x24ea80][_0x599c79(0xed)]=_0x4bf233[_0x599c79(0xed)];lastOrders[_0x24ea80][_0x599c79(0x122)]=_0x4bf233[_0x599c79(0x122)];}if(config[_0x599c79(0x1d2)]!=0x0){let _0xc035f5=null;if(cooldownTracker[_0x599c79(0x1a0)]==config[_0x599c79(0x1d2)]-0x1)_0xc035f5=cooldownTracker['shift']();const _0x383e8e=getTimeStamp();cooldownTracker[_0x599c79(0x184)](_0x383e8e);if(_0xc035f5){const _0x225901=fns[_0x599c79(0x115)](new Date(_0x383e8e),new Date(_0xc035f5));if(_0x225901<cooldownInterval){logHistory(_0x599c79(0x1bc),_0x599c79(0xc1)+config[_0x599c79(0x1d2)]+_0x599c79(0xb4)+cooldownInterval/0x3c+_0x599c79(0x14f)+cooldownPeriod/(0xe10*0x3e8)+_0x599c79(0x131)),coolingDown=!![];break;}}}}catch(_0x3aeca1){if(_0x3aeca1[_0x599c79(0x1f5)]()[_0x599c79(0x1cb)](_0x599c79(0x78)))lastOrders=lastOrders['filter'](_0x387852=>_0x387852[_0x599c79(0x9e)]!=_0x265030),logHistory(_0x599c79(0x1bc),_0x599c79(0x1af)+_0x265030),_0x4a63a5=!![];else{if(_0x3aeca1[_0x599c79(0x1f5)]()['includes'](_0x599c79(0x90)))lastOrders=lastOrders[_0x599c79(0x1b5)](_0x14f1e7=>_0x14f1e7[_0x599c79(0x9e)]!=_0x265030),logHistory('error',_0x599c79(0x199)+_0x265030),_0x4a63a5=!![];else{if(_0x3aeca1[_0x599c79(0x1f5)]()[_0x599c79(0x1cb)](_0x599c79(0xaf)))lastOrders=lastOrders[_0x599c79(0x1b5)](_0x139407=>_0x139407[_0x599c79(0x9e)]!=_0x265030),logHistory(_0x599c79(0x1bc),_0x599c79(0xec)+_0x265030),_0x4a63a5=!![];else _0x3aeca1[_0x599c79(0x1f5)]()[_0x599c79(0x1cb)](_0x599c79(0xd9))?(lastOrders=lastOrders[_0x599c79(0x1b5)](_0x46f283=>_0x46f283['symbol']!=_0x265030),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x265030),_0x4a63a5=!![]):(lastOrders=lastOrders[_0x599c79(0x1b5)](_0x3049c0=>_0x3049c0[_0x599c79(0x9e)]!=_0x265030),await handleError(_0x3aeca1,'placeOrder()',_0x265030));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x599c79(0x1a0)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2d66f5=config['ordertype']==_0x599c79(0xdf)?validateOrderTimeout*0x3c*0x3e8:config[_0x599c79(0x1e1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1caf13=_0x599c79;validateOrders(_0x1caf13(0x8b));},_0x2d66f5);}else unlockOrders();_0x4a63a5&&config[_0x599c79(0x136)]&&await pauseBot(_0x599c79(0x105)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x599c79(0xf7),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x599c79(0x136)]&&logHistory(_0x599c79(0x1bc),_0x599c79(0x17a));else lockOrders!=ORDERS[_0x599c79(0x171)]&&(!config[_0x599c79(0x136)]&&(config[_0x599c79(0x77)]==_0x599c79(0xdf)?logHistory('error',_0x599c79(0xab)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x2333b2){const _0x6c47a2=_0x100187,_0x28f2d6={...config,'openOrders':_0x2333b2};let _0x37c0cb=dbConfig['get'](_0x6c47a2(0x155))['find']({'botID':botID})['value']();_0x37c0cb&&dbConfig[_0x6c47a2(0x123)](_0x6c47a2(0x155))[_0x6c47a2(0xde)]({'botID':botID})[_0x6c47a2(0xb1)](_0x28f2d6)[_0x6c47a2(0xe5)]();}function restoreOrders(){const _0x2d7f8b=_0x100187;let _0x15bf5c;config[_0x2d7f8b(0xa5)]&&allOpenOrders[_0x2d7f8b(0x16b)](_0x163e16=>{const _0x4f81af=_0x2d7f8b,_0x23aec6=config['openOrders'][_0x4f81af(0xde)](_0x422c2f=>_0x422c2f[_0x4f81af(0xd7)]==_0x163e16['id']);_0x23aec6&&(lastOrders['push'](_0x23aec6),_0x15bf5c=_0x163e16[_0x4f81af(0x1ce)]);});if(lastOrders[_0x2d7f8b(0x1a0)]>0x0){lockOrders=ORDERS[_0x2d7f8b(0xac)],validateOrdersState=_0x2d7f8b(0x163),allOrdersPlaced=!![];const _0x4d1b9b=new Date()[_0x2d7f8b(0x166)](),_0x4b6633=config['ordertype']==_0x2d7f8b(0xdf)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x15bf5c+_0x4b6633>_0x4d1b9b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x163b0b=_0x2d7f8b;validateOrders(_0x163b0b(0x8b));},_0x15bf5c+_0x4b6633-_0x4d1b9b);}else validateOrders(_0x2d7f8b(0x8b));}}async function sendMetricsTelegram(){const _0xf1deb5=_0x100187;if(!coinsLoaded){process[_0xf1deb5(0x146)]({'telegrammsg':_0xf1deb5(0x1c4)},_0x300574=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x145d9c='';if(config[_0xf1deb5(0x102)])_0x145d9c=_0xf1deb5(0xf9)+config[_0xf1deb5(0x137)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x145d9c=_0xf1deb5(0x9a)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x25ac92=getKPIs(_0xf1deb5(0xcd)),_0x493d1c=getKPIs(_0xf1deb5(0x1e8),config[_0xf1deb5(0x1e8)]),_0xcbb96=getKPIs('net-basecoin'),_0x3fd6be=getKPIs(_0xf1deb5(0x121),config['fiat']);_0x145d9c+=_0xf1deb5(0xd6),_0x145d9c+=_0x25ac92[_0xf1deb5(0x9d)]+_0xf1deb5(0xe3)+_0x25ac92[_0xf1deb5(0x1dd)]+'\x0a',_0x145d9c+=_0x25ac92[_0xf1deb5(0x71)]+':\x20'+_0x25ac92[_0xf1deb5(0x9b)]+'%\x0a',_0x145d9c+=_0x493d1c[_0xf1deb5(0x9d)]+_0xf1deb5(0xe3)+_0x493d1c[_0xf1deb5(0x1dd)]+'\x0a',_0x145d9c+=_0x493d1c[_0xf1deb5(0x71)]+':\x20'+_0x493d1c[_0xf1deb5(0x9b)]+'%\x0a',_0x145d9c+=_0xcbb96[_0xf1deb5(0x9d)]+':\x20'+_0xcbb96['value']+'\x20('+config[_0xf1deb5(0xcd)]+')\x0a',_0x145d9c+=_0xcbb96[_0xf1deb5(0x71)]+':\x20'+_0xcbb96['change']+_0xf1deb5(0x103)+config[_0xf1deb5(0xcd)]+')\x0a',_0x145d9c+=_0x3fd6be['leftTxt']+':\x20'+_0x3fd6be[_0xf1deb5(0x1dd)]+'\x20('+config[_0xf1deb5(0x1e8)]+')\x0a',_0x145d9c+=_0x3fd6be[_0xf1deb5(0x71)]+':\x20'+_0x3fd6be[_0xf1deb5(0x9b)]+_0xf1deb5(0x103)+config[_0xf1deb5(0x1e8)]+')\x0a',_0x145d9c+=_0xf1deb5(0x86),process[_0xf1deb5(0x146)]({'telegrammsg':_0x145d9c},_0x5d7d55=>{});}async function sendPortfolioTelegram(){const _0x3e40a4=_0x100187;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5da1b7=>{});return;}let _0x2e282b='';if(config[_0x3e40a4(0x102)])_0x2e282b=_0x3e40a4(0xf9)+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x2e282b=_0x3e40a4(0x9a)+botID+_0x3e40a4(0x1e4);_0x2e282b+='<pre>',_0x2e282b+=_0x3e40a4(0x13a),_0x2e282b+=_0x3e40a4(0xe0),_0x2e282b+=_0x3e40a4(0x13a),currentCoins[_0x3e40a4(0x16b)](_0x1aa71a=>{const _0x301bae=_0x3e40a4;_0x2e282b+=_0x1aa71a[_0x301bae(0xf3)][_0x301bae(0x144)](0x7)+'|\x20'+formatPad(_0x1aa71a[_0x301bae(0x1ed)],0x2,0x6)+'|\x20'+formatPad(_0x1aa71a[_0x301bae(0xaa)],0x2,0x6)+'|\x20'+formatPad(_0x1aa71a[_0x301bae(0x1b1)]*0x64,0x2,0x6)+'\x0a';}),_0x2e282b+='</pre>',process['send']({'telegrammsg':_0x2e282b},_0x63d422=>{});}function formatPad(_0x8aa487,_0x4bfed5,_0x5048ae){const _0x3bbce2=_0x100187,_0xb1162=formatResultString(_0x8aa487,_0x4bfed5);return _0xb1162?_0xb1162['padStart'](_0x5048ae):''[_0x3bbce2(0x1f0)](_0x5048ae);}function logHistory(_0x471de0,_0x282ae4,_0x1af56a=''){const _0x190adb=_0x100187;let _0x404283={'time':getTimeStamp(),'type':_0x471de0,'event':_0x282ae4};dbLogs[_0x190adb(0x123)](_0x190adb(0x1d9))[_0x190adb(0x184)](_0x404283)['write']();if(_0x1af56a=='')_0x1af56a=_0x282ae4;proxyEmit(_0x190adb(0xdd),{'log':_0x404283,'summary':_0x1af56a}),process[_0x190adb(0x146)]({'telegram':{..._0x404283,'botname':config[_0x190adb(0x137)],'showname':config[_0x190adb(0x102)]}},_0x593ad8=>{}),logger[_0x190adb(0xbc)](''+_0x404283['event']);}function emitHistory(_0x39b348={}){const _0x522391=_0x100187;Object[_0x522391(0x1ea)](_0x39b348)[_0x522391(0x1a0)]==0x0&&(_0x39b348={'type':[_0x522391(0xc9),_0x522391(0xdd)],'event':'','page':0x1});if(_0x39b348['type']['includes'](_0x522391(0xdd)))_0x39b348[_0x522391(0xa8)][_0x522391(0x11b)](_0x39b348[_0x522391(0xa8)][_0x522391(0xa1)](_0x522391(0xdd)),0x1,'error',_0x522391(0x15e),_0x522391(0xf7));if(dbLogs[_0x522391(0x185)](_0x522391(0x1d9))[_0x522391(0x1dd)]()){let _0x37a621=dbLogs[_0x522391(0x123)](_0x522391(0x1d9))[_0x522391(0x1b5)](_0x49eee0=>{const _0x565b7d=_0x522391;if(_0x39b348[_0x565b7d(0xa8)][_0x565b7d(0x1a0)]==0x0)return![];else return _0x39b348['type']['includes'](_0x49eee0['type']);})['filter'](_0x28bb53=>{const _0x252959=_0x522391;if(_0x39b348[_0x252959(0xdd)]=='')return!![];else return _0x28bb53['event'][_0x252959(0x1f1)]()[_0x252959(0x1cb)](_0x39b348[_0x252959(0xdd)][_0x252959(0x1f1)]());})[_0x522391(0x6b)](_0x522391(0xa6)),_0x146184=_0x37a621[_0x522391(0x1dd)]()[_0x522391(0x1a0)];_0x37a621=_0x37a621['reverse']()[_0x522391(0x13d)]((_0x39b348['page']-0x1)*logPageSize,_0x39b348[_0x522391(0x10a)]*logPageSize-0x1)[_0x522391(0x176)]()['value'](),proxyEmit(_0x522391(0x1eb),{'logs':_0x37a621,'total':_0x146184});}else proxyEmit(_0x522391(0x1eb),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4cc8a9){const _0x21443b=_0x100187;if(dbLogs[_0x21443b(0x185)](_0x21443b(0x1d9))['value']()){const _0x32ec9b=dbLogs[_0x21443b(0x123)](_0x21443b(0x1d9))['sortBy']('time')[_0x21443b(0x1b5)](_0x3ed7ce=>{const _0x160751=_0x21443b;return _0x3ed7ce[_0x160751(0xa8)]=='order';})[_0x21443b(0x1dd)]();dbLogs['get'](_0x21443b(0x1d9))['remove']()['write'](),dbLogs['get'](_0x21443b(0x1d9))['assign'](_0x32ec9b)[_0x21443b(0xe5)](),emitHistory(_0x4cc8a9);}}async function pauseBot(_0xe3f557=''){const _0x1bceac=_0x100187,_0x28fde2=new Date()[_0x1bceac(0x166)]();if(!lastErrorShown||_0x28fde2-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x28fde2;!lastBotPause?(lastBotPause=_0x28fde2,consecutivePauses=0x1):(_0x28fde2-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x1bceac(0xb7)},_0x29d634=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1bceac(0x166)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xe3f557)_0xe3f557+='\x20|\x20';logHistory(_0x1bceac(0x1bc),_0xe3f557+_0x1bceac(0x1c7)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x30807b=_0x100187;process[_0x30807b(0x146)]({'stop':_0x30807b(0x11f)},_0x55874b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xcefc5b,_0x212e76){const _0x3d1210=_0x100187;if(_0xcefc5b[_0x3d1210(0x1f5)]()[_0x3d1210(0x1cb)](_0x3d1210(0x178)))return logHistory(_0x3d1210(0x1bc),config[_0x3d1210(0xf0)]+_0x3d1210(0xc0)),![];else{if(_0xcefc5b[_0x3d1210(0x1f5)]()['includes'](_0x3d1210(0x139)))return logHistory(_0x3d1210(0x1bc),config[_0x3d1210(0xf0)]+_0x3d1210(0x1d8)),![];else{if(_0xcefc5b[_0x3d1210(0x1f5)]()[_0x3d1210(0x1cb)](_0x3d1210(0x1fa)))return logHistory(_0x3d1210(0x1bc),config[_0x3d1210(0xf0)]+_0x3d1210(0x1df)),logHistory(_0x3d1210(0x1bc),_0x3d1210(0x130)),![];else await handleError(_0xcefc5b,_0x212e76);}}}async function handleError(_0x369f02,_0x24fdef,_0x40f8d2=''){const _0x4f724b=_0x100187,_0x2d685e=config[_0x4f724b(0xf0)]||_0x4f724b(0x75);if(_0x369f02['toString']()['includes']('DDoSProtection'))await pauseBot(config[_0x4f724b(0xf0)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x369f02[_0x4f724b(0x1f5)]()[_0x4f724b(0x1cb)](_0x4f724b(0x6d)))await pauseBot(config[_0x4f724b(0xf0)]+_0x4f724b(0xf6));else{if(_0x369f02[_0x4f724b(0x1f5)]()['includes'](_0x4f724b(0x192)))await pauseBot(config[_0x4f724b(0xf0)]+'\x20not\x20responding');else{if(_0x369f02[_0x4f724b(0x1f5)]()[_0x4f724b(0x1cb)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+'\x20closed\x20the\x20connection');else{if(_0x369f02['toString']()[_0x4f724b(0x1cb)](_0x4f724b(0x1a7)))logger[_0x4f724b(0x187)]('Uncaught\x20NetworkError:',_0x369f02),await pauseBot(config['exchange']+_0x4f724b(0x12a));else{if(_0x369f02['toString']()['includes'](_0x4f724b(0x1ec)))logHistory('error',_0x24fdef+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x4f724b(0x1bc),_0x4f724b(0x114)),await killBot();else{if(_0x369f02[_0x4f724b(0x1f5)]()['includes'](_0x4f724b(0xcc)))logHistory('error',_0x24fdef+_0x4f724b(0x193)),logHistory(_0x4f724b(0x1bc),_0x4f724b(0x114)),await killBot();else{if(_0x369f02['toString']()[_0x4f724b(0x1cb)](_0x4f724b(0x178)))logHistory(_0x4f724b(0x1bc),_0x24fdef+_0x4f724b(0x1da)+config[_0x4f724b(0xf0)]+_0x4f724b(0x160)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x369f02[_0x4f724b(0x1f5)]()[_0x4f724b(0x1cb)](_0x4f724b(0x139)))logHistory(_0x4f724b(0x1bc),_0x24fdef+_0x4f724b(0x1da)+config['exchange']+_0x4f724b(0x1c2)),logHistory(_0x4f724b(0x1bc),_0x4f724b(0x114)),await killBot();else{if(_0x369f02[_0x4f724b(0x1f5)]()['includes']('AuthenticationError'))logHistory(_0x4f724b(0x1bc),_0x24fdef+_0x4f724b(0x1da)+config[_0x4f724b(0xf0)]+_0x4f724b(0x1c8)),logHistory(_0x4f724b(0x1bc),_0x4f724b(0x114)),await killBot();else _0x369f02[_0x4f724b(0x1f5)]()[_0x4f724b(0x1cb)](_0x4f724b(0x1f3))?logHistory(_0x4f724b(0x1bc),_0x24fdef+_0x4f724b(0x1b0)+_0x40f8d2):(logger[_0x4f724b(0xbc)](_0x24fdef+_0x4f724b(0xb0),_0x369f02),await pauseBot(_0x4f724b(0x189)));}}}}}}}}}}function formatResult(_0x195f04,_0x2c9047){const _0x4b9b99=_0x100187;return parseFloat(_0x195f04[_0x4b9b99(0x159)](_0x2c9047));}function formatResultTruncate(_0x19e110,_0x444494){const _0x2eb38e=_0x100187;let _0x1dbd75=formatResultString(_0x19e110,0xa),_0x5209f0=_0x1dbd75[_0x2eb38e(0xa1)]('.');return _0x5209f0!=-0x1&&(_0x1dbd75=_0x1dbd75[_0x2eb38e(0x13d)](0x0,_0x5209f0+_0x444494+0x1)),Number(_0x1dbd75);}function formatResultString(_0x5ba959,_0x3fc337){const _0x30a5e7=_0x100187;let _0x5247ee;if(!(''+_0x5ba959)['includes']('e'))_0x5247ee=+(Math['round'](_0x5ba959+'e+'+_0x3fc337)+'e-'+_0x3fc337);else{let _0x466742=(''+_0x5ba959)['split']('e'),_0x588889='';+_0x466742[0x1]+_0x3fc337>0x0&&(_0x588889='+'),_0x5247ee=+(Math[_0x30a5e7(0x1bd)](+_0x466742[0x0]+'e'+_0x588889+(+_0x466742[0x1]+_0x3fc337))+'e-'+_0x3fc337);}return Number(_0x5247ee)[_0x30a5e7(0x159)](_0x3fc337);}function getServerTime(){const _0x2d6830=_0x100187,_0x1e79a7=new Date();return _0x1e79a7['getFullYear']()+'/'+(_0x1e79a7['getMonth']()+0x1)[_0x2d6830(0x1f5)]()[_0x2d6830(0x1f0)](0x2,'0')+'/'+_0x1e79a7[_0x2d6830(0x1c3)]()[_0x2d6830(0x1f5)]()[_0x2d6830(0x1f0)](0x2,'0')+'\x20'+_0x1e79a7[_0x2d6830(0x85)]()[_0x2d6830(0x1f5)]()['padStart'](0x2,'0')+':'+_0x1e79a7[_0x2d6830(0x177)]()[_0x2d6830(0x1f5)]()['padStart'](0x2,'0')+':'+_0x1e79a7[_0x2d6830(0x1cc)]()[_0x2d6830(0x1f5)]()[_0x2d6830(0x1f0)](0x2,'0');}function getTimeStamp(){const _0x22d4db=_0x100187,_0x381213=shiftedTime();return _0x381213['getFullYear']()+'/'+(_0x381213[_0x22d4db(0xad)]()+0x1)[_0x22d4db(0x1f5)]()[_0x22d4db(0x1f0)](0x2,'0')+'/'+_0x381213[_0x22d4db(0x1c3)]()[_0x22d4db(0x1f5)]()['padStart'](0x2,'0')+'\x20'+_0x381213['getHours']()[_0x22d4db(0x1f5)]()[_0x22d4db(0x1f0)](0x2,'0')+':'+_0x381213[_0x22d4db(0x177)]()[_0x22d4db(0x1f5)]()[_0x22d4db(0x1f0)](0x2,'0')+':'+_0x381213[_0x22d4db(0x1cc)]()[_0x22d4db(0x1f5)]()['padStart'](0x2,'0');}function getDate(){const _0x13b65b=_0x100187,_0x5302d8=shiftedTime();return _0x5302d8[_0x13b65b(0x15f)]()+'/'+(_0x5302d8[_0x13b65b(0xad)]()+0x1)[_0x13b65b(0x1f5)]()[_0x13b65b(0x1f0)](0x2,'0')+'/'+_0x5302d8[_0x13b65b(0x1c3)]()[_0x13b65b(0x1f5)]()[_0x13b65b(0x1f0)](0x2,'0');}function getHour(){const _0x3e142e=shiftedTime();return _0x3e142e['getHours']()['toString']()['padStart'](0x2,'0');}function sleep(_0x3af0f5){return new Promise(_0x4bc447=>setTimeout(_0x4bc447,_0x3af0f5));}function shiftedTime(){const _0x29bfff=_0x100187,_0x20f73c=new Date();let _0x299698=_0x20f73c;if(config&&config[_0x29bfff(0x1ca)]!==0x0)_0x299698=fns['add'](_0x20f73c,{'hours':config[_0x29bfff(0x1ca)]});return _0x299698;}function timer(_0x32298b){const _0x2a19ff=_0x100187,_0x333a1b=new Date();!lasttime?console[_0x2a19ff(0xf2)](getTimeStamp()+_0x2a19ff(0x153),_0x32298b,_0x333a1b):console[_0x2a19ff(0xf2)](getTimeStamp()+_0x2a19ff(0x153),_0x32298b,(_0x333a1b-lasttime)/0x3e8),lasttime=_0x333a1b;}