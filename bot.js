const _0x2667df=_0x46ce;(function(_0x239df0,_0x3098f2){const _0x2166d3=_0x46ce,_0xe6b1c8=_0x239df0();while(!![]){try{const _0xcdca95=-parseInt(_0x2166d3(0x239))/0x1+-parseInt(_0x2166d3(0x2ff))/0x2+parseInt(_0x2166d3(0x23b))/0x3*(parseInt(_0x2166d3(0x2e2))/0x4)+parseInt(_0x2166d3(0x2a0))/0x5+parseInt(_0x2166d3(0x274))/0x6*(parseInt(_0x2166d3(0x32d))/0x7)+parseInt(_0x2166d3(0x1de))/0x8*(-parseInt(_0x2166d3(0x291))/0x9)+-parseInt(_0x2166d3(0x2eb))/0xa;if(_0xcdca95===_0x3098f2)break;else _0xe6b1c8['push'](_0xe6b1c8['shift']());}catch(_0x338fb5){_0xe6b1c8['push'](_0xe6b1c8['shift']());}}}(_0x545d,0x4951a));const _0x5f97b2=function(){let _0x4840ef=!![];return function(_0x15e3c7,_0x1949dc){const _0x212597=_0x4840ef?function(){if(_0x1949dc){const _0x431eb3=_0x1949dc['apply'](_0x15e3c7,arguments);return _0x1949dc=null,_0x431eb3;}}:function(){};return _0x4840ef=![],_0x212597;};}(),_0x3a570a=_0x5f97b2(this,function(){const _0x256c7b=_0x46ce;return _0x3a570a[_0x256c7b(0x22d)]()['search'](_0x256c7b(0x34d))[_0x256c7b(0x22d)]()[_0x256c7b(0x231)](_0x3a570a)[_0x256c7b(0x211)](_0x256c7b(0x34d));});_0x3a570a();'use strict';const ccxt=require('ccxt'),low=require(_0x2667df(0x1dd)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x2667df(0x2db))['Crypt'],util=require(_0x2667df(0x1f1)),argv=require(_0x2667df(0x285))(process[_0x2667df(0x2d1)][_0x2667df(0x2e9)](0x2))[_0x2667df(0x2d1)],path=require('path');let exchange;global['ticker']={},global['change']={};const usdBasecoins=['USD','BUSD','TUSD',_0x2667df(0x319),_0x2667df(0x2aa),_0x2667df(0x284)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2667df(0x1f2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2667df(0x1fc)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x545d(){const _0x3dd398=['splice','isEqual','type','additional\x20symbols\x20','none','sells','data','fetchTickers','hybrid-crypto-js','Binance','length','\x20order:\x20','password','page','number','923784TdJWkb','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','remove','No\x20more\x20open\x20orders\x20-\x20','performance','/USD','total','slice','price','673180fWHAwO','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','round','date','parse','placeOrder','ticker','Portfolio\x20change\x20detected:\x20','storeFiat','fetchBalance','value','deleteHistoryAlerts','excluded','final','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','toggleBotMode','ongoing','\x20-\x20bot\x20not\x20started','.json','delta','4962xOcAeI','emitHistory','has','close','\x20minutes','Exchange','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','-events.json','error','getPortfolio(1)','getSeconds','random','average','uncaughtException','\x20has\x20a\x2024h\x20drop\x20of\x20','rightTxt','event-history','getCoins()','findIndex','\x20|\x20highest\x20fee:\x20','floor','shift','ExchangeNotAvailable','Executed\x20','sort','/EUR','USDT','map','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','last','\x20|\x20lock\x20orders:\x20','onepagemode','leftTxt','balancing\x20resumed','basecoin','net-basecoin','usd','API-key\x20format\x20invalid','set','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ordertype','fetchOpenOrders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','2\x20-\x20FILLED\x20known\x20order:\x20','order','entries','581HnnTvY','replace','bot','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Transaction\x20detection\x20blocked','join','ORDERS.UNLOCKED','-config.json','Order\x20filled:\x20','2.3.5','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20portfolio:</b>\x20\x0a\x0a','\x20exchange','cloneDeep','exec','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','yyyy/MM/dd','\x20:\x20','ask','warning','Error:\x20Invalid\x20argument\x20','realized','differenceInSeconds','Unknown\x20error\x20occured','2\x20-\x20Orders\x20unlocked','<b>Bot\x20','configuration-stored','running','bid','decrypt','RSA-OAEP','initTickers()','(((.+)+)+)+$','apiPassword','parseISO','InsufficientFunds','netoffset','limit-high','headless','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','ExchangeError','emojisell','\x20-\x20exclude\x20from\x20balancing\x20in\x20the\x20configuration','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','string','get','active','\x20change','timeshift','getStartingBalances','keys','\x20orders\x20in\x20less\x20than\x20','milliseconds','1\x20-\x20Validate\x20orders:\x20','stringify','Error\x20details:','target','\x20minutes\x20-\x20','EUR','3\x20-\x20handling\x20FILLED\x20order:\x20','exchange\x20not\x20reloaded','-results.json','\x20|\x20','MIN_NOTIONAL','lowdb','94480nNEBtD','<b>','sell','fiat','Error\x20while\x20deleting\x20files:\x20','toUpperCase','openOrders','time','ID:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','side','sendPortfolioTelegram','\x20value','stopExchange()','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','getFullYear','datetime','limit','BNB/','util','freeze','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','offset','Invalid\x20API\x20key\x20or\x20secret\x20entered','Failed\x20to\x20load\x20coin\x20data\x20for\x20','logs','sendMetricsTelegram','\x20exchange\x20error','\x20closed\x20the\x20connection','1\x20-\x20Handle\x20open\x20orders','UNLOCKED','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','BTC','Insufficient\x20funds\x20to\x20execute\x20order:\x20','exchange','sortBy','trade','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','added','getHours','fetchTickers()','change24h','padEnd','must\x20be\x20greater\x20than\x20minimum\x20amount','initial','Fee\x20discount\x20refund\x20detected:\x20','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','format','./version.json','message',':\x20Bot\x20','search','createWriteStream','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','log','progress','changes','mkdirSync','abs','full','initclient','Order\x20amount\x20is\x20invalid:\x20','amountToPrecision','writeFile','no\x20open\x20orders','test','cost','colorscheme','balances','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','push','NetworkError','getPortfolio','Bitget','kill','fromCodePoint','OnMaintenance','toLowerCase','open','toString','status','coins','function','constructor','-performance.json','success','fees','net-fiat','exchanges','%\x20(','\x20>\x20','221380wcPMzN','debug','6iucgfQ','spot','getPortfolio(0)','threshold','DDoSProtection','toFixed','indexOf','Net\x20','AuthenticationError','portfolio','Waited\x20','***','defaults','Huobi','0\x20-\x20EXECUTION:\x20','cooldown','recovery','watchTransactions()','botname','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Resetting\x20bot\x20history','Pausing\x20for\x20','LOCKED','cancelLoading','emojibuy','bots','Net\x20effect','assign','Limit\x20(low-margin)','/output-000.log','liquidity','startprice','event','currency','limit-low','change','Loading\x20completed','recreate','write','forEach','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','coin','orderstatus','Cex','filter','getDate','apiSecret','exchange\x20reloaded','args','highest','timeout','configuration','</pre>','pro','bb-settings.json','loadSymbols()','getMonth','12648RwRsIj','2\x20-\x20Handled\x20open\x20orders','eur','min','startdate','timestamp','closed','distribution','2.5.0','getAllOrders()','coin-loading-progress','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Saving\x20configuration','bot-','startsWith','watchTrades','USDP','yargs/yargs','amount','USD','Huobipro','add','privateKey','fetchTicker','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','basecoinvalue','getTime','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Exception\x20thrown\x20in\x20','63Ssacba','RequestTimeout','balancing\x20resumes\x20when\x20cooldown\x20ends','version','includes','watchOrders','padStart','market','orderId','recent20','fee','2\x20-\x20Validate\x20orders:\x20','symbol','./config/','watchOrders()','186535pmEJae','buy','limits','send','Order\x20is\x20invalid:\x20','getMinutes','<pre>','reverse','ETH','\x20hour','USDC','existsSync','Limit\x20(high-margin)','removed','unlinkSync','canceled','buys','botID','split','substring','restart','Order(s)\x20not\x20validated\x20after\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','recreateCoinResults()','\x20API\x20key\x20is\x20invalid','filled','Initiating\x20exchange\x20reload','************','showname','/backup/','BNB','enabled','settings','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','resetHistory','Avoiding\x20continuous\x20order\x20attempts','createOrder','apiKey','no\x20additional\x20symbols','loadMarkets','percentage','startnumber','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','remainingSymbols','./logs/','autoliquidity','find','1\x20-\x20FILLED:\x20','valid','argv','cancel'];_0x545d=function(){return _0x3dd398;};return _0x545d();}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2667df(0x20e))[_0x2667df(0x294)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x2667df(0x21f)](botID)&&(console[_0x2667df(0x214)](_0x2667df(0x341)+botID+_0x2667df(0x1e7)),killBot());const userID=process[_0x2667df(0x2d1)][0x3]||'',configpath=userID?_0x2667df(0x29e)+userID+'/':_0x2667df(0x29e),logspath=userID?'./logs/'+userID+'/':_0x2667df(0x2cc),loggerfile=fs[_0x2667df(0x212)](logspath+_0x2667df(0x258),{'flags':'a'});!fs[_0x2667df(0x2ab)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x2667df(0x2ab)](logspath)&&fs[_0x2667df(0x217)](logspath);const configfile=configpath+_0x2667df(0x281)+botID+_0x2667df(0x334),logfile=configpath+_0x2667df(0x281)+botID+_0x2667df(0x306),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x2667df(0x281)+botID+_0x2667df(0x1da),settingsfile=configpath+_0x2667df(0x271),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2667df(0x2bd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2667df(0x247)]({'logs':[],'version':serverversion})[_0x2667df(0x261)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2667df(0x247)]({'data':[],'version':serverversion})[_0x2667df(0x261)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2667df(0x247)]({'bot':[],'version':serverversion})[_0x2667df(0x261)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2667df(0x247)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x2667df(0x34b)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x11a5c7=>{const _0x2ffc7f=_0x2667df;console[_0x2ffc7f(0x214)](_0x11a5c7);},'simple':_0x3f0db7=>{const _0x586fec=_0x2667df;console[_0x586fec(0x214)](_0x3f0db7),loggerfile[_0x586fec(0x261)](util[_0x586fec(0x20d)](_0x3f0db7)+'\x0a');},'full':async(_0x469cbf,_0x521933='')=>{const _0x592d4b=_0x2667df;let _0x4f61b4;if(config[_0x592d4b(0x2bc)])_0x4f61b4=getTimeStamp()+':\x20'+config[_0x592d4b(0x24d)]+_0x592d4b(0x238)+_0x469cbf;else _0x4f61b4=getTimeStamp()+_0x592d4b(0x210)+botID+_0x592d4b(0x238)+_0x469cbf;console['log'](_0x4f61b4),loggerfile[_0x592d4b(0x261)](util['format'](_0x4f61b4)+'\x0a'),_0x521933&&(console[_0x592d4b(0x214)](_0x521933),loggerfile['write'](util[_0x592d4b(0x20d)](_0x521933)+'\x0a'));},'debug':async(_0x3f130d,_0x52dd9c='')=>{const _0x405680=_0x2667df;let _0x1788fd;if(config[_0x405680(0x2bc)])_0x1788fd=getTimeStamp()+':\x20'+config[_0x405680(0x24d)]+'\x20>\x20[DEBUG]\x20'+_0x3f130d;else _0x1788fd=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x3f130d;if(debugging)console[_0x405680(0x214)](_0x1788fd);loggerfile[_0x405680(0x261)](util[_0x405680(0x20d)](_0x1788fd)+'\x0a');if(_0x52dd9c){if(debugging)console[_0x405680(0x214)](_0x52dd9c);loggerfile[_0x405680(0x261)](util[_0x405680(0x20d)](_0x52dd9c)+'\x0a');}}};process['on'](_0x2667df(0x30c),function(_0xe80762){const _0x3c9049=_0x2667df;logHistory('error',_0x3c9049(0x33c)),logger[_0x3c9049(0x23a)]('Uncaught\x20Exception:',_0xe80762);});settings[_0x2667df(0x1cd)]!=config[_0x2667df(0x1cd)]&&updateTimeshift(settings[_0x2667df(0x1cd)]);settings['onepagemode']!=config[_0x2667df(0x31e)]&&updateOnepagemode(settings[_0x2667df(0x31e)]);process[_0x2667df(0x2a3)]({'started':'running'},_0x5b9e0b=>{}),initializeProcessListeners();function proxyEmit(_0x504705,_0x11638e=null){const _0x4084cb=_0x2667df;process[_0x4084cb(0x2a3)]({'function':_0x504705,'args':_0x11638e},_0x9811b1=>{});}function initializeProcessListeners(){const _0x33e50d=_0x2667df;process['on'](_0x33e50d(0x20f),_0x54cd86=>{const _0x1426c4=_0x33e50d;switch(Object[_0x1426c4(0x1cf)](_0x54cd86)[0x0]){case'timeshift':_0x54cd86[_0x1426c4(0x1cd)]!=undefined&&(settings[_0x1426c4(0x1cd)]=_0x54cd86[_0x1426c4(0x1cd)],updateTimeshift(settings['timeshift']));break;case _0x1426c4(0x31e):_0x54cd86[_0x1426c4(0x31e)]!=undefined&&(settings[_0x1426c4(0x31e)]=_0x54cd86[_0x1426c4(0x31e)],updateOnepagemode(settings['onepagemode']));break;case _0x1426c4(0x254):_0x54cd86[_0x1426c4(0x254)]!=undefined&&(bots=JSON[_0x1426c4(0x2ef)](_0x54cd86[_0x1426c4(0x254)]),proxyEmit('bots',bots));break;case _0x1426c4(0x230):switch(_0x54cd86[_0x1426c4(0x230)]){case _0x1426c4(0x21a):initclient();break;case _0x1426c4(0x2fa):toggleBotMode();break;case _0x1426c4(0x300):emitHistory(_0x54cd86[_0x1426c4(0x26b)]);break;case _0x1426c4(0x2f6):deleteHistoryAlerts(_0x54cd86[_0x1426c4(0x26b)]);break;case _0x1426c4(0x226):getPortfolio(_0x54cd86[_0x1426c4(0x26b)]);break;case'storeConfiguration':storeConfiguration(_0x54cd86['args']);break;case'storeHeadless':storeHeadless(_0x54cd86[_0x1426c4(0x26b)]);break;case _0x1426c4(0x2f3):storeFiat(_0x54cd86[_0x1426c4(0x26b)]);break;case _0x1426c4(0x2c2):resetHistory();break;case _0x1426c4(0x1ce):getStartingBalances(getNormalizedPerformance());break;case _0x1426c4(0x2f0):placeOrder(_0x54cd86[_0x1426c4(0x26b)]);break;case _0x1426c4(0x252):cancelLoading();break;case'showConfig':showConfig();break;case _0x1426c4(0x1f8):sendMetricsTelegram();break;case _0x1426c4(0x1e9):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x5c8988=null,_0x452137=![]){const _0x173aa6=_0x2667df;logger['debug']('Reset\x20|\x20'+(_0x5c8988&&_0x5c8988['length']>0x0?_0x173aa6(0x2d6)+_0x5c8988[_0x173aa6(0x332)](','):_0x173aa6(0x2c6))+_0x173aa6(0x1db)+(_0x452137?_0x173aa6(0x26a):_0x173aa6(0x1d9))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x452137)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x173aa6(0x2c5)]!=''&&config['apiKey']!='***'){loadingProgress=0x0;if(_0x452137){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1244ae){handleErrorNoStop(_0x1244ae,_0x173aa6(0x272));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x5c8988);const _0x1ed465=await getCoins();[currentCoins,currentCoinsAll]=_0x1ed465,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['full'](_0x173aa6(0x25f)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x173aa6(0x2dd)]==0x0&&allOpenOrders[_0x173aa6(0x2dd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}function _0x46ce(_0x2f820e,_0x8fbe4a){const _0x4458c0=_0x545d();return _0x46ce=function(_0x3a570a,_0x5f97b2){_0x3a570a=_0x3a570a-0x1cb;let _0x545d92=_0x4458c0[_0x3a570a];return _0x545d92;},_0x46ce(_0x2f820e,_0x8fbe4a);}async function stopExchange(){const _0x50c252=_0x2667df;exchangeStopped=!![];try{await exchange[_0x50c252(0x302)]();}catch(_0x107d6b){await handleError(_0x107d6b,_0x50c252(0x1eb));}}async function reloadExchange(){const _0x236c59=_0x2667df;logger['debug'](_0x236c59(0x2ba));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x236c59(0x23a)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x3e2e7a=config['exchange'],_0x5548e8=config[_0x2667df(0x2c5)],_0x43c63a=config[_0x2667df(0x269)],_0x4647a5=config[_0x2667df(0x34e)]){const _0x171cad=_0x2667df;exchange&&await stopExchange();!supportedExchanges()[_0x171cad(0x295)](_0x3e2e7a)&&(logHistory('error',_0x171cad(0x223)+_0x3e2e7a+_0x171cad(0x339)),killBot());const _0x387c94=ccxt[_0x171cad(0x270)][_0x3e2e7a['toLowerCase']()];exchange=new _0x387c94({'apiKey':_0x5548e8,'secret':_0x43c63a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x171cad(0x23c)}});if(_0x4647a5)exchange[_0x171cad(0x2df)]=_0x4647a5;}function setStableCoins(){const _0x5b97c3=_0x2667df;let _0x5dfe41=config[_0x5b97c3(0x321)]==_0x5b97c3(0x2a8)?_0x5b97c3(0x2a8):_0x5b97c3(0x1fe),_0x6cc80d=!allSymbols[_0x5b97c3(0x295)](_0x5dfe41+_0x5b97c3(0x2e7))?_0x5b97c3(0x319):'USD',_0x4a730e=!allSymbols['includes'](_0x5dfe41+_0x5b97c3(0x318))?_0x6cc80d:_0x5b97c3(0x1d7);stablecoins={'eur':{'coin':''+_0x5dfe41+_0x4a730e,'symbol':_0x5dfe41+'/'+_0x4a730e},'usd':{'coin':''+_0x5dfe41+_0x6cc80d,'symbol':_0x5dfe41+'/'+_0x6cc80d}};}async function initwsCcxt(_0x4c701a){const _0x2d38c6=_0x2667df;_0x4c701a==null&&(_0x4c701a=[],config[_0x2d38c6(0x244)][_0x2d38c6(0x262)](_0x310045=>{const _0x571d18=_0x2d38c6;if(!_0x310045[_0x571d18(0x2f7)]&&_0x310045['coin']!=config[_0x571d18(0x321)])_0x4c701a['push'](_0x310045[_0x571d18(0x29d)]);}));if(!_0x4c701a[_0x2d38c6(0x295)](stablecoins[_0x2d38c6(0x276)][_0x2d38c6(0x29d)]))_0x4c701a[_0x2d38c6(0x224)](stablecoins[_0x2d38c6(0x276)][_0x2d38c6(0x29d)]);if(!_0x4c701a[_0x2d38c6(0x295)](stablecoins[_0x2d38c6(0x323)][_0x2d38c6(0x29d)]))_0x4c701a[_0x2d38c6(0x224)](stablecoins['usd'][_0x2d38c6(0x29d)]);if(config['exchange'][_0x2d38c6(0x282)](_0x2d38c6(0x2dc))){if(!_0x4c701a['includes'](_0x2d38c6(0x1f0)+config[_0x2d38c6(0x321)]))_0x4c701a[_0x2d38c6(0x224)](_0x2d38c6(0x1f0)+config[_0x2d38c6(0x321)]);}loadCoins(_0x4c701a),_0x4c701a=validateSymbols(_0x4c701a);const _0x41fb64=async _0x5be640=>{const _0x24af65=_0x2d38c6;let _0x1fd68b;try{const _0x553880=await exchange[_0x24af65(0x2da)](_0x5be640);Object[_0x24af65(0x32c)](_0x553880)['forEach'](_0x49ec6e=>{const _0x2ae61d=_0x24af65;_0x1fd68b=_0x49ec6e[0x1][_0x2ae61d(0x29d)],global['ticker'][noslash(_0x1fd68b)]=_0x49ec6e[0x1][_0x2ae61d(0x31c)];});}catch(_0x29099c){await handleError(_0x29099c,_0x24af65(0x34c),_0x1fd68b);}},_0x5550ef=async _0x2b5d61=>{const _0x447c5f=_0x2d38c6;while(!![]){if(!botPaused)try{const _0x426839=await exchange[_0x447c5f(0x283)](_0x2b5d61);global['ticker'][noslash(_0x426839[0x0][_0x447c5f(0x29d)])]=_0x426839[0x0]['price'],await sleep(0x3e8);}catch(_0x255895){if(!exchangeStopped)await handleError(_0x255895,'watchTrades()',_0x2b5d61);}else await sleep(0x64);}},_0x1cf4b6=async _0x4c691f=>{const _0x417e9f=_0x2d38c6;while(!![]){if(!botPaused)try{const _0x3c4e1f=await exchange[_0x417e9f(0x28b)](_0x4c691f);global['change'][_0x3c4e1f[_0x417e9f(0x29d)]]=_0x3c4e1f[_0x417e9f(0x2c8)],await sleep(0x3c*0x3e8);}catch(_0x34d3c6){if(!exchangeStopped)await handleError(_0x34d3c6,_0x417e9f(0x206),_0x4c691f);}else await sleep(0x64);}},_0x5970f1=async _0x5bc03c=>{const _0x549bd6=_0x2d38c6;while(!![]){if(!botPaused)try{const _0x32d727=await exchange[_0x549bd6(0x296)](_0x5bc03c);_0x32d727[_0x549bd6(0x262)](_0x2ab56a=>{updateNumberCoinsCcxt(_0x2ab56a);});}catch(_0x4f7f07){if(!exchangeStopped)await handleError(_0x4f7f07,_0x549bd6(0x29f));}else await sleep(0x64);}};_0x41fb64(_0x4c701a),_0x4c701a[_0x2d38c6(0x262)](_0x1d7003=>{_0x5550ef(_0x1d7003),_0x1cf4b6(_0x1d7003),_0x5970f1(_0x1d7003);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x253822=_0x2667df;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x370610=await getCoins(),[_0x6ff092,_0x20f5f0]=_0x370610;let _0x1e0c9b=[];currentCoins[_0x253822(0x262)](_0x25f5bb=>{const _0x3be9d8=_0x253822,_0x59c2c8=_0x6ff092[_0x3be9d8(0x2ce)](_0x2f2bcf=>_0x2f2bcf['coin']==_0x25f5bb[_0x3be9d8(0x264)]);if(_0x59c2c8){if(_0x25f5bb[_0x3be9d8(0x2e1)]!=_0x59c2c8[_0x3be9d8(0x2e1)]){let _0x589091;if(_0x25f5bb[_0x3be9d8(0x264)]!=config[_0x3be9d8(0x321)]){const _0xa2bb2e=global[_0x3be9d8(0x2f1)][noslash(_0x25f5bb[_0x3be9d8(0x29d)])];_0x589091=_0x25f5bb['reverse']?0x1/_0xa2bb2e:_0xa2bb2e;}else _0x589091=0x1;_0x1e0c9b[_0x3be9d8(0x224)]({'coin':_0x25f5bb['coin'],'symbol':_0x25f5bb['symbol'],'price':_0x589091,'number':Number(formatResult(_0x59c2c8[_0x3be9d8(0x2e1)]-_0x25f5bb[_0x3be9d8(0x2e1)],0x8)),'basecoinvalue':_0x589091*(_0x59c2c8['number']-_0x25f5bb['number'])});}}});if(_0x1e0c9b[_0x253822(0x2dd)]==0x1&&!blockTransactionDetection){if(config[_0x253822(0x2cd)]){logger[_0x253822(0x23a)](_0x253822(0x1ec)+_0x1e0c9b[0x0]['basecoinvalue']+_0x253822(0x312)+lastFees[_0x253822(0x26c)]);if(lastFees['highest']==0x0||Math[_0x253822(0x218)](_0x1e0c9b[0x0][_0x253822(0x28d)])>lastFees[_0x253822(0x26c)]){delete _0x1e0c9b[0x0]['symbol'],delete _0x1e0c9b[0x0][_0x253822(0x28d)];let _0x5974af=[],_0x2098a3=[...config['liquidity']]||[],_0x496a01=config[_0x253822(0x259)];_0x2098a3['sort']((_0x4dea41,_0x598d0d)=>_0x4dea41['date']>_0x598d0d[_0x253822(0x2ee)]?-0x1:_0x598d0d[_0x253822(0x2ee)]>_0x4dea41[_0x253822(0x2ee)]?0x1:0x0);const _0x470e4f=getDate();if(_0x2098a3[0x0]){const _0xdb45b6=fns[_0x253822(0x2ef)](_0x2098a3[0x0]['date'],_0x253822(0x33d),new Date()),_0x286a14=fns[_0x253822(0x2ef)](_0x470e4f,_0x253822(0x33d),new Date());if(fns[_0x253822(0x2d4)](_0xdb45b6,_0x286a14)){_0x5974af=_0x2098a3[0x0]['changes'];const _0x1c2d29=_0x5974af[_0x253822(0x2ce)](_0x1eae83=>_0x1eae83[_0x253822(0x264)]==_0x1e0c9b[0x0][_0x253822(0x264)]);_0x1c2d29?(_0x1c2d29[_0x253822(0x2e1)]+=_0x1e0c9b[0x0][_0x253822(0x2e1)],_0x1c2d29[_0x253822(0x2e1)]==0x0&&(_0x5974af=_0x5974af[_0x253822(0x267)](_0x166037=>{const _0x1a9bb9=_0x253822;return _0x166037[_0x1a9bb9(0x264)]!=_0x1e0c9b[0x0][_0x1a9bb9(0x264)];}))):_0x5974af[_0x253822(0x224)](_0x1e0c9b[0x0]);const _0x388ccf=_0x496a01[_0x253822(0x2ce)](_0x42d593=>_0x42d593['date']==_0x470e4f);_0x388ccf[_0x253822(0x216)]=_0x5974af;}else _0x496a01[_0x253822(0x224)]({'date':_0x470e4f,'changes':[_0x1e0c9b[0x0]]});}const _0x51cf74=_0x496a01[_0x253822(0x2ce)](_0x7de92=>_0x7de92[_0x253822(0x2ee)]==_0x470e4f);if(_0x51cf74){let _0x3a542c=!![];_0x51cf74[_0x253822(0x216)][_0x253822(0x262)](_0x4c4df7=>{if(_0x4c4df7['number']!=0x0)_0x3a542c=![];}),_0x3a542c&&(_0x496a01=_0x496a01[_0x253822(0x267)](_0x97dc9b=>{const _0x2f92fa=_0x253822;return _0x97dc9b[_0x2f92fa(0x2ee)]!=_0x470e4f;}));}let _0x8221d0=dbConfig['get'](_0x253822(0x32f))['find']({'botID':botID})[_0x253822(0x2f5)]();_0x8221d0&&(dbConfig[_0x253822(0x35a)]('bot')[_0x253822(0x2ce)]({'botID':botID})['assign']({'liquidity':_0x496a01})[_0x253822(0x261)](),config[_0x253822(0x259)]=_0x496a01),logHistory(_0x253822(0x233),'Portfolio\x20change\x20detected:\x20'+Math[_0x253822(0x218)](_0x1e0c9b[0x0][_0x253822(0x2e1)])+'\x20'+_0x1e0c9b[0x0][_0x253822(0x264)]+'\x20'+(_0x1e0c9b[0x0][_0x253822(0x2e1)]>0x0?_0x253822(0x204):_0x253822(0x2ad))+_0x253822(0x337)),proxyEmit(_0x253822(0x26e),emittedConfiguration());}else logger[_0x253822(0x23a)](_0x253822(0x20b)+Math[_0x253822(0x218)](_0x1e0c9b[0x0][_0x253822(0x2e1)])+'\x20'+_0x1e0c9b[0x0]['coin']+'\x20'+(_0x1e0c9b[0x0][_0x253822(0x2e1)]>0x0?'added':_0x253822(0x2ad)));transactionDetected=!![],currentCoins=_0x6ff092,currentCoinsAll=_0x20f5f0;}else logger[_0x253822(0x23a)](_0x253822(0x2f2)+Math[_0x253822(0x218)](_0x1e0c9b[0x0][_0x253822(0x2e1)])+'\x20'+_0x1e0c9b[0x0][_0x253822(0x264)]+'\x20'+(_0x1e0c9b[0x0][_0x253822(0x2e1)]>0x0?_0x253822(0x204):_0x253822(0x2ad))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x6ff092,currentCoinsAll=_0x20f5f0;}await sleep(watchTransactionsInterval);}catch(_0x55f419){if(!exchangeStopped)await handleError(_0x55f419,_0x253822(0x24c));}else await sleep(0x64);}}async function loadSymbols(){const _0x56e608=_0x2667df;try{markets=await exchange[_0x56e608(0x2c7)](),allSymbols=[],Object[_0x56e608(0x32c)](markets)[_0x56e608(0x262)](_0x405e5e=>{const _0x457d03=_0x56e608;_0x405e5e[0x1][_0x457d03(0x1cb)]&&_0x405e5e[0x1][_0x457d03(0x23c)]&&allSymbols[_0x457d03(0x224)](_0x405e5e[0x0]);});}catch(_0x3e5d3c){throw _0x3e5d3c;}}function validateSymbols(_0x4e6bc5){const _0x3910c0=_0x2667df;let _0x104e97=[];return _0x4e6bc5[_0x3910c0(0x262)](_0xe172ea=>{const _0xce5cb0=_0x3910c0;!allSymbols['includes'](_0xe172ea)?logHistory('error','Invalid\x20symbol:\x20'+_0xe172ea+_0xce5cb0(0x357)):_0x104e97[_0xce5cb0(0x224)](_0xe172ea);}),_0x104e97;}async function initclient(){const _0x5e56de=_0x2667df;proxyEmit(_0x5e56de(0x26e),emittedConfiguration()),proxyEmit(_0x5e56de(0x236),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5e56de(0x222),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x11337d=getNormalizedPerformance();emitPerformance(_0x11337d),getStartingBalances(_0x11337d);}async function toggleBotMode(){const _0x2c0256=_0x2667df;let _0x3c6c62=dbConfig[_0x2c0256(0x35a)](_0x2c0256(0x32f))[_0x2c0256(0x2ce)]({'botID':botID})['value']();if(_0x3c6c62){const _0x2d573f=!_0x3c6c62[_0x2c0256(0x353)];dbConfig[_0x2c0256(0x35a)](_0x2c0256(0x32f))[_0x2c0256(0x2ce)]({'botID':botID})[_0x2c0256(0x256)]({'headless':_0x2d573f})[_0x2c0256(0x261)](),config[_0x2c0256(0x353)]=_0x2d573f,proxyEmit(_0x2c0256(0x26e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x1dfc3f=>{});}async function loadCoins(_0x42ecb7){const _0x4be8e0=_0x2667df;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x488ae5,_0x183160=0x0,_0x57be85=0x0;_0x42ecb7[_0x4be8e0(0x262)](_0x5a0bec=>{const _0x46facf=_0x4be8e0;loading[_0x46facf(0x2cb)][_0x46facf(0x224)](_0x5a0bec);}),loadingCanceled=![];let _0x4d8c11=![];while(_0x488ae5!=_0x42ecb7[_0x4be8e0(0x2dd)]+maxLoadingProgress){_0x488ae5=loadingProgress,_0x42ecb7[_0x4be8e0(0x262)](_0x5298d0=>{const _0x2b611a=_0x4be8e0;if(global[_0x2b611a(0x2f1)][noslash(_0x5298d0)]){loading[_0x2b611a(0x2cb)]=loading[_0x2b611a(0x2cb)][_0x2b611a(0x267)](_0x1401e0=>_0x1401e0!=_0x5298d0);if(!watchedSymbols[_0x2b611a(0x295)](_0x5298d0))watchedSymbols[_0x2b611a(0x224)](_0x5298d0);_0x488ae5++;}}),loading[_0x4be8e0(0x215)]=Math[_0x4be8e0(0x2ed)](_0x488ae5/(_0x42ecb7[_0x4be8e0(0x2dd)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x57be85>0x1e*0x5&&(loading[_0x4be8e0(0x26d)]=!![],emitLoadingProgress()),_0x57be85>0x78*0x5&&!_0x4d8c11&&(loading[_0x4be8e0(0x2d2)]=!![],emitLoadingProgress(),_0x4d8c11=!![],logHistory(_0x4be8e0(0x307),_0x4be8e0(0x1f6)+loading[_0x4be8e0(0x2cb)][_0x4be8e0(0x332)](',\x20')+_0x4be8e0(0x2fc)),logHistory(_0x4be8e0(0x307),_0x4be8e0(0x250)+loadCoinsRetryInterval/0xea60+_0x4be8e0(0x358)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x1811fd=_0x4be8e0;process['send']({'stop':_0x1811fd(0x2b4)},_0x24bb11=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4be8e0(0x2d2)]=!![],emitLoadingProgress();break;}else _0x183160!=loading['progress']&&(_0x183160=loading[_0x4be8e0(0x215)],emitLoadingProgress()),_0x57be85++,await sleep(0xc8);}_0x488ae5==_0x42ecb7['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x4be8e0(0x2bf),'live':_0x4be8e0(0x348)},_0x5e08bc=>{}),_0x4d8c11&&logHistory(_0x4be8e0(0x233),_0x4be8e0(0x330)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x342500=_0x2667df;proxyEmit(_0x342500(0x27e),loading);}async function getFiat(){const _0x43436b=_0x2667df;let _0x6036c=global[_0x43436b(0x2f1)][stablecoins['eur']['coin']],_0x5c8053=global[_0x43436b(0x2f1)][stablecoins[_0x43436b(0x323)]['coin']];return{'eur':Number(_0x6036c),'usd':Number(_0x5c8053)};}function capitalize(_0x2a209e){const _0x5d559a=_0x2667df;return _0x2a209e['substring'](0x0,0x1)[_0x5d559a(0x1e3)]()+_0x2a209e[_0x5d559a(0x2b3)](0x1);}function supportedExchanges(){const _0x564e8b=_0x2667df,_0x5412e5=['ws',_0x564e8b(0x2da),_0x564e8b(0x28b),_0x564e8b(0x283),_0x564e8b(0x296),'cancelOrder',_0x564e8b(0x2c4),'fetchOpenOrders','fetchClosedOrders',_0x564e8b(0x2f4)];let _0x5a27f9=[],_0x277a01=[],_0x1291c8=ccxt['pro'][_0x564e8b(0x236)];_0x1291c8[_0x564e8b(0x262)](_0x9a358=>{const _0x2fcca6=_0x564e8b;try{const _0x11f8f9=new ccxt[(_0x2fcca6(0x270))][_0x9a358]();_0x277a01[_0x2fcca6(0x224)](_0x11f8f9);}catch(_0x39faaa){}}),_0x277a01[_0x564e8b(0x262)](_0x2b2f2a=>{const _0x4a39af=_0x564e8b;let _0x8c49d=0x0;_0x5412e5[_0x4a39af(0x262)](_0x54ed66=>{const _0x2049f5=_0x4a39af;_0x54ed66 in _0x2b2f2a[_0x2049f5(0x301)]&&_0x2b2f2a['has'][_0x54ed66]&&_0x8c49d++;}),_0x8c49d==_0x5412e5['length']&&_0x5a27f9[_0x4a39af(0x224)](capitalize(_0x2b2f2a['id']));});let _0x3d25f7=[];return _0x1291c8[_0x564e8b(0x262)](_0xfe72c7=>{const _0x3da834=_0x564e8b;_0xfe72c7=capitalize(_0xfe72c7);if(!_0x5a27f9[_0x3da834(0x295)](_0xfe72c7))_0x3d25f7[_0x3da834(0x224)](_0xfe72c7);}),_0x5a27f9;}function setStartDatePerformance(){const _0x575449=_0x2667df;if(config&&config[_0x575449(0x259)][0x0]['changes']['length']!=0x0){const _0x21c4bf=config['liquidity'][0x0][_0x575449(0x216)];dbPerformance[_0x575449(0x35a)](_0x575449(0x2d9))[_0x575449(0x2ce)]({'date':config[_0x575449(0x278)]})[_0x575449(0x256)]({'coins':_0x21c4bf})[_0x575449(0x261)]();}}async function recreateCoinResults(){const _0x901098=_0x2667df;let _0x4f1ef7,_0x1e38d1=[];try{const _0x2f3f8f=fns[_0x901098(0x20d)](fns[_0x901098(0x34f)](config[_0x901098(0x278)][_0x901098(0x32e)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x46d355 of currentCoins){if(_0x46d355[_0x901098(0x264)]!=config[_0x901098(0x321)]){let _0x22a374=0x0,_0x4c351e,_0x404190;_0x4f1ef7=await getAllEventOrders(_0x46d355[_0x901098(0x29d)]);if(_0x4f1ef7[_0x901098(0x2dd)]>0x0)_0x4f1ef7[_0x901098(0x262)](_0x549109=>{const _0xb6d1e0=_0x901098,_0x9ea7c=_0x46d355[_0xb6d1e0(0x29d)][_0xb6d1e0(0x295)](config[_0xb6d1e0(0x321)]+'/');_0x1e38d1[_0xb6d1e0(0x224)]({'datetime':_0x549109['datetime'],'coin':_0x46d355[_0xb6d1e0(0x264)],'symbol':_0x46d355['symbol'],'side':_0x549109[_0xb6d1e0(0x1e8)],'reverse':_0x9ea7c,'amount':formatResult(_0x549109[_0xb6d1e0(0x2b9)],0x8),'filled':formatResult(_0x549109['filled'],0x8),'price':formatResult(_0x549109['price'],0x8)}),_0x22a374=_0x549109[_0xb6d1e0(0x1e8)]==_0xb6d1e0(0x2a1)?_0x22a374+_0x549109[_0xb6d1e0(0x2b9)]:_0x22a374-_0x549109['filled'];if(!_0x404190)_0x404190=_0x549109[_0xb6d1e0(0x2ea)];});_0x4c351e=_0x46d355['number']-_0x22a374;let _0x74c72f;config[_0x901098(0x259)]['forEach'](_0x43ded8=>{const _0x1066f2=_0x901098;!_0x74c72f&&(_0x74c72f=_0x43ded8['changes']['find'](_0x430a04=>_0x430a04[_0x1066f2(0x264)]==_0x46d355[_0x1066f2(0x264)]),_0x74c72f&&(_0x4c351e=_0x74c72f[_0x1066f2(0x2e1)],_0x404190=_0x74c72f[_0x1066f2(0x2ea)]));});let _0x2cc066=dbCoinResults[_0x901098(0x35a)](_0x901098(0x22f))['find']({'coin':_0x46d355[_0x901098(0x264)]})[_0x901098(0x2f5)]();_0x2cc066={'coin':_0x46d355[_0x901098(0x264)],'number':_0x4c351e,'breakeven':_0x404190,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x901098(0x22f))[_0x901098(0x2ce)]({'coin':_0x46d355[_0x901098(0x264)]})[_0x901098(0x256)](_0x2cc066)[_0x901098(0x261)]();}}_0x1e38d1[_0x901098(0x317)]((_0x317d93,_0x53d9a5)=>_0x317d93['datetime']>_0x53d9a5['datetime']?0x1:_0x53d9a5['datetime']>_0x317d93[_0x901098(0x1ee)]?-0x1:0x0);let _0xde7266=0x0;for(let _0xfc73e4 of _0x1e38d1){await updateCoinResults(_0xfc73e4,!![]);}}catch(_0x5605df){await handleError(_0x5605df,_0x901098(0x2b7));}}async function getAllEventOrders(_0x3702be){const _0x347c0d=_0x2667df;let _0x30ef77=[],_0x56be49=dbLogs['get'](_0x347c0d(0x1f7))[_0x347c0d(0x267)](_0x123f49=>{const _0x3e7972=_0x347c0d,_0x565b92=_0x123f49[_0x3e7972(0x25b)][_0x3e7972(0x22b)]();return _0x565b92[_0x3e7972(0x295)](_0x3702be[_0x3e7972(0x22b)]())&&(_0x565b92['includes']('market')&&_0x565b92[_0x3e7972(0x295)](_0x3e7972(0x32b))||_0x565b92[_0x3e7972(0x295)](_0x3e7972(0x2b9))&&_0x565b92[_0x3e7972(0x295)](_0x3e7972(0x32b)));})[_0x347c0d(0x201)](_0x347c0d(0x1e5))[_0x347c0d(0x2f5)]();return _0x56be49[_0x347c0d(0x262)](_0xf9b6d0=>{const _0x228bad=_0x347c0d,_0xed952c=_0xf9b6d0[_0x228bad(0x25b)][_0x228bad(0x295)](_0x228bad(0x1e0))?'sell':_0x228bad(0x2a1),_0x5a6bfd=/#([0-9]|\.)+\s/i,_0x3ed50d=Number(_0x5a6bfd[_0x228bad(0x33b)](_0xf9b6d0[_0x228bad(0x25b)])[0x0]['slice'](0x1)),_0x329922=/@([0-9]|\.)+$/i,_0x305028=Number(_0x329922[_0x228bad(0x33b)](_0xf9b6d0['event'])[0x0][_0x228bad(0x2e9)](0x1));_0x30ef77[_0x228bad(0x224)]({'datetime':_0xf9b6d0['time'],'coin':symbolToCoin(_0x3702be),'symbol':_0x3702be,'side':_0xed952c,'amount':_0x3ed50d,'filled':_0x3ed50d,'price':_0x305028});}),_0x30ef77;}async function getAllOrders(_0x266370,_0x562f39){const _0x1bed05=_0x2667df;let _0x3d9d5e=[];while(_0x562f39<exchange[_0x1bed05(0x1d1)]()){const _0x5312b4=0x1f4;try{const _0x1a380=await exchange['fetchClosedOrders'](_0x266370,_0x562f39,_0x5312b4);if(_0x1a380['length'])_0x562f39=_0x1a380[_0x1a380[_0x1bed05(0x2dd)]-0x1][_0x1bed05(0x279)]+0x1,_0x3d9d5e=_0x3d9d5e['concat'](_0x1a380);else break;}catch(_0x5efc9b){await handleError(_0x5efc9b,_0x1bed05(0x27d),_0x266370);}}return _0x3d9d5e;}async function validate24hChanges(){const _0x32539b=_0x2667df;for(const _0x18be5d of currentCoins){if(_0x18be5d[_0x32539b(0x264)]!=config['basecoin']){let _0x1673e5;_0x18be5d[_0x32539b(0x2a7)]?_0x1673e5=formatResult((0x1/(global[_0x32539b(0x25e)][noslash(_0x18be5d['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1673e5=global['change'][noslash(_0x18be5d[_0x32539b(0x29d)])],_0x1673e5<config['change24h']&&(logHistory(_0x32539b(0x307),_0x18be5d['coin']+_0x32539b(0x30d)+_0x1673e5+'%'),logHistory('error',_0x32539b(0x263)),logHistory(_0x32539b(0x307),_0x32539b(0x1fd)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x158e53,_0x9be6d0){const _0x28c828=_0x2667df;if(!_0x158e53)return!![];const _0x3fa8ad=_0x9be6d0[_0x28c828(0x2b2)]('.'),_0x4ee6ec=_0x158e53[_0x28c828(0x2b2)]('.');for(var _0x59360c=0x0;_0x59360c<_0x4ee6ec['length'];_0x59360c++){const _0x2ee81e=~~_0x4ee6ec[_0x59360c],_0x3f6bba=~~_0x3fa8ad[_0x59360c];if(_0x2ee81e<_0x3f6bba)return!![];if(_0x2ee81e>_0x3f6bba)return![];}return![];}async function oneTimeMigration(){const _0x16e838=_0x2667df;let _0x26ff18=dbLogs['get'](_0x16e838(0x294))[_0x16e838(0x2f5)]();if(isOlderVersion(_0x26ff18,_0x16e838(0x336))){let _0xe65a5b=[];const _0x3e8801=dbLogs['get']('logs')[_0x16e838(0x2f5)]();_0x3e8801[_0x16e838(0x262)](_0x41c905=>{const _0x4035b6=_0x16e838;_0xe65a5b['push']({'time':_0x41c905['time'],'type':_0x41c905['type'],'event':_0x41c905[_0x4035b6(0x25b)]});}),dbLogs[_0x16e838(0x35a)]('logs')[_0x16e838(0x256)](_0xe65a5b)[_0x16e838(0x261)]();}let _0x592392=dbConfig[_0x16e838(0x35a)](_0x16e838(0x294))[_0x16e838(0x2f5)]();if(isOlderVersion(_0x592392,_0x16e838(0x336))){let _0x176e93=dbConfig['get'](_0x16e838(0x32f))[_0x16e838(0x2ce)]({'botID':botID})[_0x16e838(0x2f5)]();if(_0x176e93){let _0x4aa474=[];_0x176e93[_0x16e838(0x244)][_0x16e838(0x262)](_0x224101=>{const _0x38f0f2=_0x16e838;_0x4aa474['push']({'coin':_0x224101[_0x38f0f2(0x264)],'number':_0x224101['startnumber'],'price':_0x224101[_0x38f0f2(0x25a)]}),delete _0x224101[_0x38f0f2(0x2c9)],delete _0x224101[_0x38f0f2(0x25a)];});if(_0x4aa474[_0x16e838(0x2dd)]!==0x0)fs[_0x16e838(0x21d)](configbackuppath+('starting-balance-'+botID+_0x16e838(0x2fd)),JSON[_0x16e838(0x1d3)](_0x4aa474,null,0x4),function(_0x2b3911){if(_0x2b3911){}});const _0x5e7171=(_0x44800c,_0xc9de7d)=>{const _0x676461=_0x16e838;let _0x3331b1=[];_0xc9de7d[_0x676461(0x262)](_0x1d81be=>{const _0x54fd4b=_0x676461,_0x418bc1=_0x44800c[_0x54fd4b(0x2ce)](_0x448bb6=>_0x448bb6['coin']==_0x1d81be[_0x54fd4b(0x264)]);if(!_0x418bc1)_0x3331b1['push'](_0x1d81be);});let _0x4c4a6a=[];return _0x44800c[_0x676461(0x262)](_0x1ee4b7=>{const _0x4ef40d=_0x676461,_0x550230=_0xc9de7d[_0x4ef40d(0x2ce)](_0x56e656=>_0x56e656[_0x4ef40d(0x264)]==_0x1ee4b7[_0x4ef40d(0x264)]);if(!_0x550230||_0x550230[_0x4ef40d(0x2e1)]==0x0&&_0x1ee4b7['number']!=0x0)_0x4c4a6a[_0x4ef40d(0x224)](_0x1ee4b7);}),{'missingDay1':_0x3331b1,'notInDay2':_0x4c4a6a};},_0x592d36=dbPerformance[_0x16e838(0x35a)](_0x16e838(0x2d9))[_0x16e838(0x33a)]()['value']();if(_0x592d36[_0x16e838(0x2dd)]>0x1){const {missingDay1:_0x4a4a98,notInDay2:_0x5183a4}=_0x5e7171(_0x4aa474,_0x592d36[0x1][_0x16e838(0x22f)]);_0x4aa474=[..._0x4aa474,..._0x4a4a98],_0x5183a4[_0x16e838(0x262)](_0x2d5383=>{const _0x1c32cb=_0x16e838;let _0x395833=_0x4aa474[_0x1c32cb(0x311)](_0x4535b4=>_0x4535b4[_0x1c32cb(0x264)]==_0x2d5383[_0x1c32cb(0x264)]);_0x395833!=-0x1&&_0x4aa474[_0x1c32cb(0x2d3)](_0x395833,0x1);});}_0x4aa474[_0x16e838(0x317)]((_0x4e83b0,_0xcf01d1)=>_0x4e83b0[_0x16e838(0x264)]>_0xcf01d1[_0x16e838(0x264)]?0x1:_0xcf01d1['coin']>_0x4e83b0[_0x16e838(0x264)]?-0x1:0x0);let _0x43f7d1=[{'date':_0x176e93[_0x16e838(0x278)],'changes':_0x4aa474}];_0x592d36['length']>0x2&&_0x592d36[_0x16e838(0x262)]((_0xcd7301,_0x45d49c)=>{const _0x509fc1=_0x16e838;if(_0x45d49c>0x0&&_0x45d49c<_0x592d36[_0x509fc1(0x2dd)]-0x1){const {missingDay1:_0x124b71,notInDay2:_0x3ec613}=_0x5e7171(_0x592d36[_0x45d49c][_0x509fc1(0x22f)],_0x592d36[_0x45d49c+0x1][_0x509fc1(0x22f)]);_0x4aa474=[],(_0x124b71[_0x509fc1(0x2dd)]!=0x0||_0x3ec613[_0x509fc1(0x2dd)]!=0x0)&&(_0x124b71['length']!=0x0&&_0x4aa474[_0x509fc1(0x224)](..._0x124b71),_0x3ec613[_0x509fc1(0x2dd)]!=0x0&&(_0x3ec613['forEach'](_0x55b22e=>{const _0x5f52c=_0x509fc1;_0x55b22e['number']=-_0x55b22e[_0x5f52c(0x2e1)];}),_0x4aa474[_0x509fc1(0x224)](..._0x3ec613)),_0x4aa474[_0x509fc1(0x317)]((_0x562e12,_0x343db0)=>_0x562e12[_0x509fc1(0x264)]>_0x343db0[_0x509fc1(0x264)]?0x1:_0x343db0[_0x509fc1(0x264)]>_0x562e12[_0x509fc1(0x264)]?-0x1:0x0),_0x43f7d1[_0x509fc1(0x224)]({'date':_0x592d36[_0x45d49c+0x1]['date'],'changes':_0x4aa474}));}}),dbConfig[_0x16e838(0x35a)](_0x16e838(0x32f))[_0x16e838(0x2ce)]({'botID':botID})['assign']({..._0x176e93,'liquidity':_0x43f7d1})[_0x16e838(0x261)]();}}if(isOlderVersion(_0x592392,'2.6.0')){let _0xe55c3d=dbConfig[_0x16e838(0x35a)]('bot')[_0x16e838(0x2ce)]({'botID':botID})[_0x16e838(0x2f5)]();if(_0xe55c3d){const _0x37b994=_0xe55c3d[_0x16e838(0x200)],_0x47cc21=_0x37b994?capitalize(_0x37b994):_0x16e838(0x2dc);dbConfig[_0x16e838(0x35a)](_0x16e838(0x32f))[_0x16e838(0x2ce)]({'botID':botID})[_0x16e838(0x256)]({'exchange':_0x47cc21})['write']();}}let _0x430500=dbPerformance[_0x16e838(0x35a)](_0x16e838(0x294))[_0x16e838(0x2f5)]();isOlderVersion(_0x430500,_0x16e838(0x336))&&setStartDatePerformance();let _0x572bdd=dbCoinResults[_0x16e838(0x35a)](_0x16e838(0x294))[_0x16e838(0x2f5)]();if(isOlderVersion(_0x572bdd,_0x16e838(0x27c))){let _0x4dc876=dbCoinResults['get']('coins')[_0x16e838(0x2f5)]();if(_0x4dc876[_0x16e838(0x2dd)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x56c32a=_0x2667df;dbConfig[_0x56c32a(0x325)](_0x56c32a(0x294),serverversion)['write'](),dbPerformance[_0x56c32a(0x325)]('version',serverversion)[_0x56c32a(0x261)](),dbLogs['set']('version',serverversion)[_0x56c32a(0x261)](),dbCoinResults[_0x56c32a(0x325)](_0x56c32a(0x294),serverversion)[_0x56c32a(0x261)]();}function getConfiguration(_0x3b0e5e){const _0x5f2d36=_0x2667df;let _0x4d15b4=dbConfig[_0x5f2d36(0x35a)]('bot')[_0x5f2d36(0x2ce)]({'botID':_0x3b0e5e})[_0x5f2d36(0x2f5)]();if(_0x4d15b4){let _0x256a0f=![];typeof _0x4d15b4['threshold']==_0x5f2d36(0x359)&&(_0x4d15b4={..._0x4d15b4,'threshold':Number(_0x4d15b4[_0x5f2d36(0x23e)])},_0x256a0f=!![]),_0x4d15b4[_0x5f2d36(0x207)]==undefined&&(_0x4d15b4={..._0x4d15b4,'change24h':-0x14},_0x256a0f=!![]),_0x4d15b4['fiat']==undefined&&(_0x4d15b4={..._0x4d15b4,'fiat':'USD'},_0x256a0f=!![]),_0x4d15b4['onepagemode']==undefined&&(_0x4d15b4={..._0x4d15b4,'onepagemode':settings[_0x5f2d36(0x31e)]},_0x256a0f=!![]),_0x4d15b4[_0x5f2d36(0x221)]==undefined&&(_0x4d15b4={..._0x4d15b4,'colorscheme':'red_yellow_blue'},_0x256a0f=!![]),_0x4d15b4['autoliquidity']==undefined&&(_0x4d15b4={..._0x4d15b4,'autoliquidity':!![]},_0x256a0f=!![]),_0x256a0f&&(_0x4d15b4={'botID':_0x4d15b4[_0x5f2d36(0x2b1)],'exchange':_0x4d15b4[_0x5f2d36(0x200)],'apiKey':_0x4d15b4[_0x5f2d36(0x2c5)],'apiSecret':_0x4d15b4[_0x5f2d36(0x269)],'apiPassword':_0x4d15b4[_0x5f2d36(0x34e)],'basecoin':_0x4d15b4['basecoin'],'botname':_0x4d15b4[_0x5f2d36(0x24d)],'showname':_0x4d15b4[_0x5f2d36(0x2bc)],'threshold':_0x4d15b4[_0x5f2d36(0x23e)],'ordertype':_0x4d15b4[_0x5f2d36(0x327)],'timeout':_0x4d15b4[_0x5f2d36(0x26d)],'fiat':_0x4d15b4[_0x5f2d36(0x1e1)],'startdate':_0x4d15b4[_0x5f2d36(0x278)],'recreate':_0x4d15b4[_0x5f2d36(0x260)],'timeshift':_0x4d15b4['timeshift'],'onepagemode':_0x4d15b4[_0x5f2d36(0x31e)],'headless':_0x4d15b4['headless'],'cooldown':_0x4d15b4['cooldown'],'change24h':_0x4d15b4['change24h'],'emojibuy':_0x4d15b4[_0x5f2d36(0x253)],'emojisell':_0x4d15b4['emojisell'],'colorscheme':_0x4d15b4[_0x5f2d36(0x221)],'portfolio':_0x4d15b4['portfolio'],'autoliquidity':_0x4d15b4[_0x5f2d36(0x2cd)],'liquidity':_0x4d15b4[_0x5f2d36(0x259)],'openOrders':_0x4d15b4[_0x5f2d36(0x1e4)]},dbConfig[_0x5f2d36(0x35a)](_0x5f2d36(0x32f))[_0x5f2d36(0x2e4)]()[_0x5f2d36(0x261)](),dbConfig['get'](_0x5f2d36(0x32f))['push'](_0x4d15b4)['write']());}else _0x4d15b4={'botID':_0x3b0e5e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3b0e5e,'showname':![],'threshold':0x3,'ordertype':_0x5f2d36(0x298),'timeout':0x14,'fiat':_0x5f2d36(0x287),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5f2d36(0x1cd)],'onepagemode':settings[_0x5f2d36(0x31e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4d15b4;}function emittedConfiguration(){const _0x19d2c5=_0x2667df;let _0xf20c90;if(config[_0x19d2c5(0x2c5)]=='')_0xf20c90={...config,'configstate':_0x19d2c5(0x20a)};else config[_0x19d2c5(0x2c5)]==_0x19d2c5(0x246)?_0xf20c90={...config,'configstate':_0x19d2c5(0x24b)}:(_0xf20c90={...config,'apiKey':_0x19d2c5(0x2bb),'apiSecret':'************'},config['apiPassword']&&(_0xf20c90[_0x19d2c5(0x34e)]=_0x19d2c5(0x2bb)));return _0xf20c90;}function getSettings(){const _0x53197f=_0x2667df;return dbSettings[_0x53197f(0x35a)](_0x53197f(0x2c0))[_0x53197f(0x2f5)]();}function getSecure(){const _0x5af664=_0x2667df;return dbSecure[_0x5af664(0x35a)]('secure')[_0x5af664(0x2f5)]()||{};}function updateTimeshift(_0x1e846d){const _0x283152=_0x2667df;let _0x47e5df=dbConfig[_0x283152(0x35a)](_0x283152(0x32f))[_0x283152(0x2ce)]({'botID':botID})[_0x283152(0x2f5)]();_0x47e5df&&dbConfig['get'](_0x283152(0x32f))['find']({'botID':botID})[_0x283152(0x256)]({'timeshift':_0x1e846d})[_0x283152(0x261)](),config[_0x283152(0x1cd)]=_0x1e846d,proxyEmit(_0x283152(0x26e),emittedConfiguration());}function updateOnepagemode(_0x1b6147){const _0x41d7d3=_0x2667df;let _0x3f6813=dbConfig['get'](_0x41d7d3(0x32f))['find']({'botID':botID})[_0x41d7d3(0x2f5)]();_0x3f6813&&dbConfig['get'](_0x41d7d3(0x32f))['find']({'botID':botID})['assign']({'onepagemode':_0x1b6147})[_0x41d7d3(0x261)](),config[_0x41d7d3(0x31e)]=_0x1b6147,proxyEmit(_0x41d7d3(0x26e),emittedConfiguration());}async function storeConfiguration(_0x263dff){const _0x52fe90=_0x2667df;logger[_0x52fe90(0x23a)](_0x52fe90(0x280));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x52fe90(0x23a)](_0x52fe90(0x331));let _0x4f3a84=[],_0x5cd026=![],_0xddb285=![],_0x2f2d5b=[];_0x263dff[_0x52fe90(0x244)]['forEach'](_0x1c73fa=>{const _0x32e3f5=_0x52fe90;if(!_0x1c73fa[_0x32e3f5(0x2f7)]&&_0x1c73fa[_0x32e3f5(0x264)]!=_0x263dff[_0x32e3f5(0x321)])_0x2f2d5b[_0x32e3f5(0x224)](_0x1c73fa[_0x32e3f5(0x29d)]);}),_0x2f2d5b[_0x52fe90(0x262)](_0x23e152=>{const _0x56c96a=_0x52fe90,_0x189572=watchedSymbols[_0x56c96a(0x295)](_0x23e152);!_0x189572&&_0x4f3a84[_0x56c96a(0x224)](_0x23e152);}),_0x2f2d5b[_0x52fe90(0x262)](_0x4307be=>{const _0x5cea7c=_0x52fe90,_0x1034e1=currentCoins[_0x5cea7c(0x2ce)](_0x1d0d6b=>_0x1d0d6b[_0x5cea7c(0x29d)]==_0x4307be);!_0x1034e1&&(_0x5cd026=!![]);}),currentCoins[_0x52fe90(0x262)](_0x94aabe=>{const _0x49f649=_0x52fe90;if(_0x94aabe[_0x49f649(0x264)]!=config[_0x49f649(0x321)]){const _0x1786bc=_0x2f2d5b[_0x49f649(0x2ce)](_0x536540=>_0x536540==_0x94aabe[_0x49f649(0x29d)]);!_0x1786bc&&(_0x5cd026=!![]);}}),_0x263dff[_0x52fe90(0x244)][_0x52fe90(0x262)](_0x5ad150=>{const _0x1bdb68=_0x52fe90,_0x153091=config[_0x1bdb68(0x244)][_0x1bdb68(0x2ce)](_0x258cee=>_0x258cee['coin']==_0x5ad150['coin']);if(_0x153091&&_0x5ad150[_0x1bdb68(0x1f4)]!=_0x153091[_0x1bdb68(0x1f4)])_0xddb285=!![];});let _0x2ea501=dbConfig[_0x52fe90(0x35a)](_0x52fe90(0x32f))[_0x52fe90(0x2ce)]({'botID':botID})[_0x52fe90(0x2f5)]();_0x263dff={..._0x263dff,'apiKey':crypt[_0x52fe90(0x34a)](secure[_0x52fe90(0x28a)],_0x263dff[_0x52fe90(0x2c5)])['message'],'apiSecret':crypt[_0x52fe90(0x34a)](secure[_0x52fe90(0x28a)],_0x263dff[_0x52fe90(0x269)])['message']};_0x263dff[_0x52fe90(0x34e)]&&(_0x263dff[_0x52fe90(0x34e)]=crypt[_0x52fe90(0x34a)](secure[_0x52fe90(0x28a)],_0x263dff['apiPassword'])[_0x52fe90(0x20f)]);let _0x5760bf=![];if(_0x2ea501){_0x263dff[_0x52fe90(0x2c5)]==_0x52fe90(0x2bb)?_0x263dff[_0x52fe90(0x2c5)]=config[_0x52fe90(0x2c5)]:_0x5760bf=!![];_0x263dff[_0x52fe90(0x269)]==_0x52fe90(0x2bb)?_0x263dff[_0x52fe90(0x269)]=config['apiSecret']:_0x5760bf=!![];if(_0x263dff['apiPassword']==_0x52fe90(0x2bb))_0x263dff[_0x52fe90(0x34e)]=config[_0x52fe90(0x34e)];else{if(_0x263dff[_0x52fe90(0x34e)])_0x5760bf=!![];}dbConfig[_0x52fe90(0x35a)](_0x52fe90(0x32f))[_0x52fe90(0x2ce)]({'botID':botID})['assign'](_0x263dff)[_0x52fe90(0x261)]();}else dbConfig[_0x52fe90(0x35a)](_0x52fe90(0x32f))['push'](_0x263dff)[_0x52fe90(0x261)](),_0x5760bf=!![],process['send']({'status':_0x52fe90(0x2bf),'live':_0x52fe90(0x348)},_0x949fe7=>{});process[_0x52fe90(0x2a3)]({'botname':_0x263dff[_0x52fe90(0x24d)]},_0x55b69b=>{}),updateBotManager(),config={..._0x263dff},proxyEmit(_0x52fe90(0x347)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5760bf)await reset(_0x4f3a84,!![]);else _0x5cd026||_0xddb285?await reset(_0x4f3a84,![]):getBalances();blockTransactionDetection=![],logger[_0x52fe90(0x23a)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x21cde4){const _0x2f376c=_0x2667df,_0x4ff3de={...config,'headless':_0x21cde4[_0x2f376c(0x353)]};let _0x2365b0=dbConfig[_0x2f376c(0x35a)]('bot')['find']({'botID':botID})[_0x2f376c(0x2f5)]();_0x2365b0&&dbConfig[_0x2f376c(0x35a)](_0x2f376c(0x32f))['find']({'botID':botID})[_0x2f376c(0x256)](_0x4ff3de)[_0x2f376c(0x261)](),config={..._0x4ff3de},updateBotManager(),proxyEmit(_0x2f376c(0x26e),emittedConfiguration());}async function storeFiat(_0x3b09cf){const _0x4c3589=_0x2667df,_0x250cd9={...config,'fiat':_0x3b09cf};let _0x1fa683=dbConfig['get'](_0x4c3589(0x32f))[_0x4c3589(0x2ce)]({'botID':botID})['value']();_0x1fa683&&dbConfig[_0x4c3589(0x35a)](_0x4c3589(0x32f))[_0x4c3589(0x2ce)]({'botID':botID})[_0x4c3589(0x256)](_0x250cd9)['write'](),config={..._0x250cd9},proxyEmit(_0x4c3589(0x26e),emittedConfiguration());}function resetHistory(){const _0x443d4b=_0x2667df;logger[_0x443d4b(0x219)](_0x443d4b(0x24f));try{if(fs[_0x443d4b(0x2ab)](path[_0x443d4b(0x332)](configpath,_0x443d4b(0x281)+botID+_0x443d4b(0x306))))fs[_0x443d4b(0x2ae)](path[_0x443d4b(0x332)](configpath,_0x443d4b(0x281)+botID+'-events.json'));if(fs[_0x443d4b(0x2ab)](path[_0x443d4b(0x332)](configpath,'bot-'+botID+_0x443d4b(0x232))))fs[_0x443d4b(0x2ae)](path[_0x443d4b(0x332)](configpath,'bot-'+botID+_0x443d4b(0x232)));if(fs[_0x443d4b(0x2ab)](path[_0x443d4b(0x332)](configpath,_0x443d4b(0x281)+botID+_0x443d4b(0x1da))))fs[_0x443d4b(0x2ae)](path[_0x443d4b(0x332)](configpath,_0x443d4b(0x281)+botID+_0x443d4b(0x1da)));}catch(_0x5d38c7){if(_0x5d38c7)logger['full'](_0x443d4b(0x1e2),_0x5d38c7);}const _0x1730f6=getDate();let _0x23ece4=[];currentCoins['forEach'](_0x2c4814=>{const _0x4191e8=_0x443d4b;_0x23ece4[_0x4191e8(0x224)]({'coin':_0x2c4814[_0x4191e8(0x264)],'number':_0x2c4814['number'],'price':_0x2c4814[_0x4191e8(0x31c)]});});let _0xc071b=dbConfig[_0x443d4b(0x35a)]('bot')[_0x443d4b(0x2ce)]({'botID':botID})['value']();_0xc071b&&(dbConfig[_0x443d4b(0x35a)](_0x443d4b(0x32f))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x1730f6,'changes':_0x23ece4}]})[_0x443d4b(0x261)](),config['liquidity']=[]),process[_0x443d4b(0x2a3)]({'stop':_0x443d4b(0x2b4)},_0x7f265b=>{});}function noslash(_0x4dbc2d){const _0x2c5c5f=_0x2667df;return _0x4dbc2d[_0x2c5c5f(0x32e)]('/','');}function updateHighestFee(_0x185349){const _0xd0bab5=_0x2667df;if(_0x185349[_0xd0bab5(0x2a7)]){let _0x1ba83f={'filled':_0x185349[_0xd0bab5(0x2b9)]*_0x185349[_0xd0bab5(0x2ea)],'amount':_0x185349[_0xd0bab5(0x2b9)]*_0x185349[_0xd0bab5(0x2ea)],'side':_0x185349[_0xd0bab5(0x1e8)]==_0xd0bab5(0x1e0)?'buy':_0xd0bab5(0x1e0),'price':0x1/_0x185349[_0xd0bab5(0x2ea)]};_0x185349={..._0x185349,..._0x1ba83f};}const _0x10e06d=defaultFee*_0x185349['filled']*_0x185349[_0xd0bab5(0x2ea)];lastFees[_0xd0bab5(0x29a)][_0xd0bab5(0x2dd)]===0x14&&lastFees[_0xd0bab5(0x29a)]['shift'](),lastFees[_0xd0bab5(0x29a)][_0xd0bab5(0x224)](_0x10e06d),lastFees[_0xd0bab5(0x26c)]=Math['max'](...lastFees[_0xd0bab5(0x29a)]);}async function updateNumberCoinsCcxt(_0x3fcaaa){const _0x25009b=_0x2667df;logger[_0x25009b(0x23a)](_0x25009b(0x249)+_0x3fcaaa[_0x25009b(0x29d)]+_0x25009b(0x1db)+_0x3fcaaa[_0x25009b(0x22e)]+_0x25009b(0x1db)+_0x3fcaaa['id']);let _0x57ed09=_0x3fcaaa['status'],_0x1cae70=![];currentCoins[_0x25009b(0x262)](_0x33be3c=>{const _0x475ac4=_0x25009b;_0x33be3c['symbol']==_0x3fcaaa[_0x475ac4(0x29d)]&&(_0x1cae70=!![]);});if(!_0x1cae70)return;const _0x55ee98=currentCoins[_0x25009b(0x2ce)](_0x61272=>_0x61272[_0x25009b(0x29d)]==_0x3fcaaa['symbol']),_0x2a3c1c=_0x2a6060=>{if(_0x55ee98)_0x55ee98['orderstatus']=_0x2a6060;};if(_0x57ed09==_0x25009b(0x22c))_0x2a3c1c(_0x25009b(0x22c));else{if(_0x57ed09==_0x25009b(0x2af)){_0x2a3c1c(_0x25009b(0x2af));const _0x54311f=await getCoins();[currentCoins,currentCoinsAll]=_0x54311f,await getOpenOrders(),handleOpenOrders();}else{if(_0x57ed09==_0x25009b(0x27a)){logger[_0x25009b(0x23a)](_0x25009b(0x2cf)+_0x3fcaaa['symbol']+_0x25009b(0x1db)+_0x3fcaaa[_0x25009b(0x2b9)]+_0x25009b(0x1db)+_0x3fcaaa['id']);let _0xe8bdb2=![];if(lastOrders)for(const _0x56832f of lastOrders){const _0x8eda07=0xc8,_0x4b6a2=0x1388;let _0x204571=0x0;while(!_0x56832f[_0x25009b(0x299)]&&_0x204571*_0x8eda07<_0x4b6a2){_0x204571++,await sleep(_0x8eda07);}if(_0x204571>0x0)logger[_0x25009b(0x23a)](_0x25009b(0x245)+_0x204571*_0x8eda07/0x3e8+_0x25009b(0x329));if(_0x56832f[_0x25009b(0x299)]==_0x3fcaaa['id']){logger[_0x25009b(0x23a)](_0x25009b(0x32a)+_0x3fcaaa['id']),_0xe8bdb2=!![];if(_0x56832f['filled']==0x0){logger[_0x25009b(0x23a)](_0x25009b(0x1d8)+_0x3fcaaa['id']);if(_0x3fcaaa['average'])_0x56832f['price']=_0x3fcaaa[_0x25009b(0x30b)];else{if(_0x3fcaaa['price'])_0x56832f[_0x25009b(0x2ea)]=_0x3fcaaa[_0x25009b(0x2ea)];else{}}_0x56832f[_0x25009b(0x2b9)]=_0x3fcaaa[_0x25009b(0x2b9)],updateHighestFee(_0x56832f),_0x2a3c1c(_0x25009b(0x2b9)),await validateOrders();if(lockOrders==ORDERS[_0x25009b(0x251)]){const _0x19053f=await getCoins();[currentCoins,currentCoinsAll]=_0x19053f;}_0x56832f[_0x25009b(0x29b)]={'currency':_0x3fcaaa[_0x25009b(0x29b)]?_0x3fcaaa[_0x25009b(0x29b)]['currency']:null,'cost':_0x3fcaaa[_0x25009b(0x29b)]?_0x3fcaaa[_0x25009b(0x29b)][_0x25009b(0x220)]:0x0},await updateCoinResults(_0x56832f);}}}if(!_0xe8bdb2){logger[_0x25009b(0x23a)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x3fcaaa['id']),_0x2a3c1c(_0x25009b(0x2b9));const _0x3e213d=await getCoins();[currentCoins,currentCoinsAll]=_0x3e213d,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3cf068=JSON[_0x25009b(0x2ef)](lastBalances[_0x25009b(0x244)]);const _0x4c74ec=_0x3cf068[_0x25009b(0x2ce)](_0xac08b6=>_0xac08b6[_0x25009b(0x29d)]==_0x3fcaaa[_0x25009b(0x29d)]);if(_0x4c74ec){if(_0x57ed09==_0x25009b(0x22c))_0x4c74ec['orderstatus']=_0x4c74ec[_0x25009b(0x265)]=='filled'?_0x25009b(0x2b9):'open';else{if(_0x57ed09==_0x25009b(0x2af))_0x4c74ec[_0x25009b(0x265)]=_0x4c74ec['orderstatus']==_0x25009b(0x2b9)?_0x25009b(0x2b9):_0x25009b(0x2af);else _0x57ed09==_0x25009b(0x27a)&&(_0x4c74ec[_0x25009b(0x265)]=_0x25009b(0x2b9));}}lastBalances={...lastBalances,'portfolio':JSON[_0x25009b(0x1d3)](_0x3cf068)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x4c74ee=![];currentCoins['forEach'](_0x594fc1=>{const _0x66e4f5=_0x46ce;_0x4c74ee=allOpenOrders[_0x66e4f5(0x2ce)](_0x242939=>_0x242939[_0x66e4f5(0x29d)]==_0x594fc1[_0x66e4f5(0x29d)]),_0x594fc1[_0x66e4f5(0x265)]=_0x4c74ee?_0x66e4f5(0x22c):'none';});}async function getCoins(_0x3b0fdc=!![],_0x57b872=config['basecoin']){const _0x1f4e9d=_0x2667df;let _0x4c86f2,_0x12a31e=[],_0x1e78a6=[],_0x35593f=[],_0x49dea7=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4c86f2=await exchange[_0x1f4e9d(0x2f4)](),mybalances=_0x4c86f2[_0x1f4e9d(0x2e8)];for(const [_0x321c21,_0x5b8c68]of Object[_0x1f4e9d(0x32c)](mybalances)){_0x49dea7[_0x1f4e9d(0x224)](_0x321c21);}if(_0x57b872=='')for(const [_0x27d36f,_0x1a09e6]of Object[_0x1f4e9d(0x32c)](mybalances)){_0x1a09e6!=0x0&&_0x1e78a6[_0x1f4e9d(0x224)]({'coin':_0x27d36f});}else{let _0x57db9b=![];for(const [_0x5666ad,_0x3016d5]of Object[_0x1f4e9d(0x32c)](mybalances)){if(_0x49dea7['includes'](_0x5666ad)){const _0x15fe53=config[_0x1f4e9d(0x244)]['find'](_0x38ca0b=>_0x38ca0b['coin']==_0x5666ad),_0x182ede=_0x5666ad+'/'+_0x57b872,_0x5dd2b7=_0x57b872+'/'+_0x5666ad,_0x96ad09=currentCoins[_0x1f4e9d(0x2ce)](_0x144f66=>_0x144f66['coin']==_0x5666ad);_0x57db9b=![];if((_0x3016d5!=0x0||_0x15fe53)&&(allSymbols[_0x1f4e9d(0x295)](_0x182ede)||_0x5666ad==_0x57b872))_0x5666ad!=_0x57b872&&_0x12a31e['push'](_0x182ede),_0x1e78a6[_0x1f4e9d(0x224)]({'coin':_0x5666ad,'symbol':_0x182ede,'reverse':![],'number':Math['max'](_0x3016d5+(_0x15fe53&&_0x15fe53[_0x1f4e9d(0x1f4)]||0x0),0x0),'orderstatus':_0x96ad09?_0x96ad09[_0x1f4e9d(0x265)]:_0x1f4e9d(0x2d7)});else(_0x3016d5!=0x0||_0x15fe53)&&allSymbols['includes'](_0x5dd2b7)&&(_0x5666ad!=_0x57b872&&_0x12a31e[_0x1f4e9d(0x224)](_0x5dd2b7),_0x1e78a6[_0x1f4e9d(0x224)]({'coin':_0x5666ad,'symbol':_0x5dd2b7,'reverse':!![],'number':Math['max'](_0x3016d5+(_0x15fe53&&_0x15fe53[_0x1f4e9d(0x1f4)]||0x0),0x0),'orderstatus':_0x96ad09?_0x96ad09[_0x1f4e9d(0x265)]:_0x1f4e9d(0x2d7)}));}}}}catch(_0x12dae0){if(!_0x3b0fdc)handleErrorNoStop(_0x12dae0,_0x1f4e9d(0x310));else await handleError(_0x12dae0,'getCoins()');}return _0x35593f=cloneDeep(_0x1e78a6),_0x1e78a6=_0x1e78a6['filter'](_0x338008=>{const _0x394db9=_0x1f4e9d,_0x165c4a=config['portfolio'][_0x394db9(0x2ce)](_0x28d33a=>_0x28d33a[_0x394db9(0x264)]==_0x338008[_0x394db9(0x264)]);return _0x165c4a&&!_0x165c4a['excluded'];}),[_0x1e78a6,_0x35593f];}async function getCoinNumber(_0x3508fd){const _0x1cbcb0=_0x2667df;let _0x3f1ce8;try{const _0xde30c7=await exchange['fetchBalance']();_0x3f1ce8=_0xde30c7[_0x1cbcb0(0x2e8)][_0x3508fd];}catch(_0x388021){await handleError(_0x388021,'getCoinNumber()');}return _0x3f1ce8;}async function getOpenOrders(){const _0x4f1f71=_0x2667df;let _0x1e65f2;allOpenOrders=[];try{for(const _0x57887c of config[_0x4f1f71(0x244)]){!_0x57887c['excluded']&&_0x57887c['coin']!=config[_0x4f1f71(0x321)]&&(_0x1e65f2=await exchange[_0x4f1f71(0x328)](_0x57887c[_0x4f1f71(0x29d)]),_0x1e65f2['length']>0x0&&allOpenOrders[_0x4f1f71(0x224)](_0x1e65f2[0x0]));}}catch(_0x506b08){await handleError(_0x506b08,'getOpenOrders()');}}async function handleOpenOrders(_0x7db244=0x0){const _0x5e934a=_0x2667df;allOpenOrders[_0x5e934a(0x2dd)]==0x0&&lockOrders==ORDERS[_0x5e934a(0x251)]&&allOrdersPlaced&&(_0x7db244==0x0?(logger[_0x5e934a(0x23a)](_0x5e934a(0x1fb)),_0x7db244++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5e934a(0x23a)](_0x5e934a(0x275)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x5aac07){const _0x598470=_0x2667df,_0x4076af=ccxt[_0x598470(0x270)][_0x5aac07[_0x598470(0x200)][_0x598470(0x22b)]()],_0x535cd0=new _0x4076af({'apiKey':_0x5aac07['apiKey'],'secret':_0x5aac07[_0x598470(0x269)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x598470(0x23c)}});if(_0x5aac07['apiPassword'])_0x535cd0['password']=_0x5aac07['apiPassword'];try{await _0x535cd0['loadMarkets']();}catch(_0x13275e){throw _0x13275e;}}function cloneDeep(_0x104b5d){const _0x143198=_0x2667df;return JSON[_0x143198(0x2ef)](JSON['stringify'](_0x104b5d));}async function getPortfolio(_0x138a59){const _0x1f13a5=_0x2667df;let _0x42f67e=[],_0x515e07=[],_0x217e51=[],_0x5737df;if(_0x138a59[_0x1f13a5(0x2c5)]!==_0x1f13a5(0x2bb)||_0x138a59[_0x1f13a5(0x269)]!==_0x1f13a5(0x2bb)||_0x138a59[_0x1f13a5(0x34e)]&&_0x138a59['apiPassword']!==_0x1f13a5(0x2bb)){if(config[_0x1f13a5(0x200)]){if(_0x138a59[_0x1f13a5(0x2c5)]==_0x1f13a5(0x2bb))_0x138a59[_0x1f13a5(0x2c5)]=config[_0x1f13a5(0x2c5)];if(_0x138a59[_0x1f13a5(0x269)]==_0x1f13a5(0x2bb))_0x138a59['apiSecret']=config[_0x1f13a5(0x269)];if(_0x138a59[_0x1f13a5(0x34e)]==_0x1f13a5(0x2bb))_0x138a59[_0x1f13a5(0x34e)]=config[_0x1f13a5(0x34e)];try{await testAPI(_0x138a59);}catch(_0x270fcc){if(_0x270fcc[_0x1f13a5(0x22d)]()['includes'](_0x1f13a5(0x243))){logger[_0x1f13a5(0x23a)](_0x1f13a5(0x1f5)),proxyEmit(_0x1f13a5(0x244),![]);return;}else{handleError(_0x270fcc,_0x1f13a5(0x23d));return;}}}await initExchange(_0x138a59[_0x1f13a5(0x200)],_0x138a59[_0x1f13a5(0x2c5)],_0x138a59[_0x1f13a5(0x269)],_0x138a59[_0x1f13a5(0x34e)]);try{await loadSymbols();}catch(_0xc129fd){if(_0xc129fd[_0x1f13a5(0x22d)]()[_0x1f13a5(0x295)](_0x1f13a5(0x243))){proxyEmit('portfolio',![]);return;}else{handleError(_0xc129fd,_0x1f13a5(0x308));return;}}const _0x39b09c=await getCoins(![],_0x138a59[_0x1f13a5(0x321)]);_0x217e51=cloneDeep(_0x39b09c[0x1]);}else _0x217e51=cloneDeep(currentCoinsAll);if(_0x138a59[_0x1f13a5(0x321)]=='')proxyEmit(_0x1f13a5(0x244),_0x217e51);else{_0x217e51['forEach'](_0x4fa36c=>{const _0xedd976=_0x1f13a5;if(_0x4fa36c['coin']!=_0x138a59[_0xedd976(0x321)])_0x42f67e[_0xedd976(0x224)](_0x4fa36c[_0xedd976(0x29d)]);});if(_0x42f67e[_0x1f13a5(0x2dd)]==0x0)logHistory(_0x1f13a5(0x307),_0x1f13a5(0x1f3));else{try{_0x515e07=await exchange[_0x1f13a5(0x2da)](_0x42f67e);}catch(_0x593df2){if(_0x593df2[_0x1f13a5(0x22d)]()['includes'](_0x1f13a5(0x243))){proxyEmit(_0x1f13a5(0x244),![]);return;}else{handleError(_0x593df2,'getPortfolio(2)');return;}}_0x217e51[_0x1f13a5(0x262)](_0x5122d2=>{const _0x259541=_0x1f13a5;_0x5122d2[_0x259541(0x264)]!=_0x138a59[_0x259541(0x321)]?_0x5737df=_0x5122d2[_0x259541(0x2a7)]?0x1/_0x515e07[_0x5122d2[_0x259541(0x29d)]][_0x259541(0x31c)]:_0x515e07[_0x5122d2[_0x259541(0x29d)]][_0x259541(0x31c)]:_0x5737df=0x1,_0x5122d2[_0x259541(0x2ea)]=formatResult(_0x5737df,0x8);}),proxyEmit('portfolio',_0x217e51);}}}function truncateTradeAmount(_0xd9c414,_0x20166f){const _0x4e20cc=_0x2667df;let _0x2cb14e=0x0;try{_0x2cb14e=exchange[_0x4e20cc(0x21c)](_0xd9c414,_0x20166f);}catch(_0x514755){}return _0x2cb14e;}function checkMinimums(_0x38939e){const _0x130b40=_0x2667df;let _0x32d2cd=!![];const _0x11245f=!_0x38939e[_0x130b40(0x2a7)]?markets[_0x38939e[_0x130b40(0x29d)]][_0x130b40(0x2a2)][_0x130b40(0x286)][_0x130b40(0x277)]:markets[_0x38939e[_0x130b40(0x29d)]]['limits'][_0x130b40(0x220)][_0x130b40(0x277)],_0xa9b1fd=!_0x38939e[_0x130b40(0x2a7)]?markets[_0x38939e[_0x130b40(0x29d)]][_0x130b40(0x2a2)][_0x130b40(0x220)][_0x130b40(0x277)]:markets[_0x38939e[_0x130b40(0x29d)]][_0x130b40(0x2a2)]['amount']['min'],_0x4152fa=truncateTradeAmount(_0x38939e[_0x130b40(0x29d)],_0x38939e[_0x130b40(0x202)]);_0x38939e['trade']=_0x4152fa;if(Math['abs'](_0x4152fa)<_0x11245f)_0x32d2cd=![];if(Math[_0x130b40(0x218)](_0x4152fa)*_0x38939e[_0x130b40(0x31c)]<_0xa9b1fd)_0x32d2cd=![];if(_0x38939e[_0x130b40(0x1e8)]==_0x130b40(0x1e0)){let _0x1d85ae=config['portfolio'][_0x130b40(0x2ce)](_0x2ad67f=>_0x2ad67f[_0x130b40(0x264)]==_0x38939e[_0x130b40(0x264)]);if(_0x1d85ae['offset']>0x0){if(Math[_0x130b40(0x218)](_0x4152fa)>_0x38939e[_0x130b40(0x2e1)]-_0x1d85ae[_0x130b40(0x1f4)])_0x32d2cd=![];}else{if(Math[_0x130b40(0x218)](_0x4152fa)>_0x38939e[_0x130b40(0x2e1)])_0x32d2cd=![];}}if(_0x38939e[_0x130b40(0x1e8)]==_0x130b40(0x2a1)){let _0x1fa362=config[_0x130b40(0x244)][_0x130b40(0x2ce)](_0x13edb0=>_0x13edb0[_0x130b40(0x264)]==config['basecoin']),_0x156f9d=currentCoins['find'](_0x1c52f1=>_0x1c52f1['coin']==config[_0x130b40(0x321)]);if(_0x1fa362[_0x130b40(0x1f4)]>0x0){if(Math[_0x130b40(0x218)](_0x4152fa)*_0x38939e[_0x130b40(0x31c)]>_0x156f9d[_0x130b40(0x2e1)]-_0x1fa362[_0x130b40(0x1f4)])_0x32d2cd=![];}else{if(Math['abs'](_0x4152fa)*_0x38939e[_0x130b40(0x31c)]>_0x156f9d[_0x130b40(0x2e1)])_0x32d2cd=![];}}return _0x32d2cd;}async function getBalances(_0x33ddd0=!![]){const _0xc1ae83=_0x2667df;let _0x413ad4=0x0,_0x9a8e7d;const _0x42cfbc=config[_0xc1ae83(0x23e)];if(config[_0xc1ae83(0x353)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0xc1ae83(0x262)](_0x9ea6dd=>{const _0x13ef8c=_0xc1ae83;if(_0x9ea6dd['coin']!=config['basecoin']){let _0x478c48=global[_0x13ef8c(0x2f1)][noslash(_0x9ea6dd[_0x13ef8c(0x29d)])];_0x9a8e7d=_0x9ea6dd['reverse']?0x1/_0x478c48:_0x478c48;}else _0x9a8e7d=0x1;let _0x473087=_0x9ea6dd[_0x13ef8c(0x2e1)]*_0x9a8e7d;_0x413ad4+=_0x473087,_0x9ea6dd[_0x13ef8c(0x31c)]=formatResult(Number(_0x9a8e7d),0x8),_0x9ea6dd[_0x13ef8c(0x2f5)]=_0x473087;}),currentCoins['forEach'](_0x51484a=>{const _0x4a5af4=_0xc1ae83;let _0x3971bc=config[_0x4a5af4(0x244)][_0x4a5af4(0x2ce)](_0x3cf85c=>_0x3cf85c[_0x4a5af4(0x264)]==_0x51484a[_0x4a5af4(0x264)]),_0x33e87b=Number(_0x3971bc[_0x4a5af4(0x27b)]),_0x356c76=_0x51484a['value']/_0x413ad4*0x64,_0x1a8dd4=_0x33e87b*_0x413ad4/0x64/_0x51484a[_0x4a5af4(0x31c)]-_0x51484a['number'];_0x51484a['distribution']=formatResult(_0x356c76,0x3),_0x51484a['target']=formatResult(_0x33e87b,0x3),_0x51484a[_0x4a5af4(0x202)]=formatResult(_0x1a8dd4,0x8),_0x51484a[_0x4a5af4(0x1e8)]='',_0x51484a['valid']=![];if(_0x51484a[_0x4a5af4(0x264)]!=config['basecoin']){if(_0x51484a[_0x4a5af4(0x27b)]>_0x33e87b)_0x51484a[_0x4a5af4(0x1e8)]=_0x4a5af4(0x1e0),_0x51484a['valid']=checkMinimums(_0x51484a);else _0x51484a[_0x4a5af4(0x27b)]<_0x33e87b&&(_0x51484a[_0x4a5af4(0x1e8)]=_0x4a5af4(0x2a1),_0x51484a[_0x4a5af4(0x2d0)]=checkMinimums(_0x51484a));}_0x51484a[_0x4a5af4(0x2fe)]=_0x51484a[_0x4a5af4(0x27b)]/_0x51484a['target']-0x1;if(_0x51484a[_0x4a5af4(0x265)]==_0x4a5af4(0x2b9)||_0x51484a[_0x4a5af4(0x265)]==_0x4a5af4(0x2af))_0x51484a[_0x4a5af4(0x265)]=_0x4a5af4(0x2d7);}),currentCoins[_0xc1ae83(0x317)]((_0x191dc3,_0x215c30)=>_0x191dc3[_0xc1ae83(0x2fe)]<_0x215c30[_0xc1ae83(0x2fe)]?0x1:_0x215c30['delta']<_0x191dc3[_0xc1ae83(0x2fe)]?-0x1:0x0);const _0x3dbd4f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3dbd4f['eur'],'usd':_0x3dbd4f[_0xc1ae83(0x323)],'portfolio':JSON[_0xc1ae83(0x1d3)](currentCoins),'threshold':_0x42cfbc},proxyEmit(_0xc1ae83(0x222),{'serverversion':serverversion,'balances':lastBalances});if(_0x33ddd0){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x42cfbc});else{if(lockOrders==ORDERS[_0xc1ae83(0x1fc)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x42cfbc});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x529d07=getNormalizedPerformance();getStartingBalances(_0x529d07),emitPerformance(_0x529d07);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x32704=getNormalizedPerformance();emitPerformance(_0x32704),getStartingBalances(_0x32704),logger['debug'](_0xc1ae83(0x28c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x403042=_0x2667df;if(!lastBalances)return;let _0x3b5007=[],_0xe0775a,_0x529c0a=JSON[_0x403042(0x2ef)](lastBalances[_0x403042(0x244)]);_0x529c0a[_0x403042(0x317)]((_0x4ab243,_0x1cc86e)=>_0x4ab243[_0x403042(0x264)]>_0x1cc86e[_0x403042(0x264)]?0x1:_0x1cc86e['coin']>_0x4ab243['coin']?-0x1:0x0),_0x529c0a[_0x403042(0x262)](_0x2607dd=>{const _0x2a538d=_0x403042;let _0x1e8026={'coin':_0x2607dd['coin'],'number':_0x2607dd[_0x2a538d(0x2e1)],'price':_0x2607dd[_0x2a538d(0x31c)]};_0x3b5007['push'](_0x1e8026);});const _0x38adf5=await getFiat();_0xe0775a={'date':lastBalances[_0x403042(0x1e5)]['split']('\x20')[0x0],'eur':_0x38adf5[_0x403042(0x276)],'usd':_0x38adf5[_0x403042(0x323)],'coins':_0x3b5007};let _0x4434fc=dbPerformance[_0x403042(0x35a)](_0x403042(0x2d9))[_0x403042(0x2ce)]({'date':_0xe0775a[_0x403042(0x2ee)]})[_0x403042(0x2f5)]();_0x4434fc?_0xe0775a[_0x403042(0x2ee)]!=config['startdate']&&dbPerformance[_0x403042(0x35a)](_0x403042(0x2d9))[_0x403042(0x2ce)]({'date':_0xe0775a[_0x403042(0x2ee)]})[_0x403042(0x256)](_0xe0775a)[_0x403042(0x261)]():dbPerformance[_0x403042(0x35a)](_0x403042(0x2d9))[_0x403042(0x224)](_0xe0775a)[_0x403042(0x261)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x262e69=_0x2667df;let _0x4eaf75=[];if(dbPerformance[_0x262e69(0x301)]('data')[_0x262e69(0x2f5)]()){let _0x452f03=dbPerformance[_0x262e69(0x35a)](_0x262e69(0x2d9))[_0x262e69(0x33a)]()[_0x262e69(0x267)](_0xc9fe26=>{const _0xae4073=_0x262e69;if(_0xc9fe26['coins'][_0xae4073(0x2dd)]==0x0)return![];else return!![];})[_0x262e69(0x201)](_0x262e69(0x2ee))['value'](),_0x4730c9=[...config[_0x262e69(0x259)]];_0x4730c9['sort']((_0x2b79de,_0x4ae483)=>_0x2b79de[_0x262e69(0x2ee)]>_0x4ae483['date']?-0x1:_0x4ae483[_0x262e69(0x2ee)]>_0x2b79de[_0x262e69(0x2ee)]?0x1:0x0);let _0x2c705a=0x1,_0x2d961f=[],_0x2e910e=0x0;_0x452f03[_0x262e69(0x2e9)]()[_0x262e69(0x2a7)]()[_0x262e69(0x262)]((_0x3ecb5b,_0x335af4)=>{const _0x261ea0=_0x262e69;if(_0x4730c9[_0x2e910e]){if(_0x452f03[_0x452f03['length']-_0x335af4]&&_0x4730c9[_0x2e910e]['date']==_0x452f03[_0x452f03[_0x261ea0(0x2dd)]-_0x335af4][_0x261ea0(0x2ee)]){if(_0x335af4<_0x452f03[_0x261ea0(0x2dd)]){let _0x14b612=0x0,_0x2bec55=0x0;_0x452f03[_0x452f03[_0x261ea0(0x2dd)]-_0x335af4][_0x261ea0(0x22f)][_0x261ea0(0x262)](_0x5912b2=>{const _0xee24dc=_0x261ea0;_0x2bec55+=_0x5912b2[_0xee24dc(0x2e1)]*_0x5912b2[_0xee24dc(0x2ea)];}),_0x4730c9[_0x2e910e]['changes'][_0x261ea0(0x262)](_0x189de=>{const _0x43b4ff=_0x261ea0;_0x14b612+=_0x189de[_0x43b4ff(0x2e1)]*_0x189de[_0x43b4ff(0x2ea)];}),_0x2c705a*=_0x14b612/(_0x2bec55-_0x14b612)+0x1;}_0x2e910e++;}}let _0x5c8488=0x0;_0x3ecb5b[_0x261ea0(0x22f)][_0x261ea0(0x262)](_0x1de179=>{const _0x24b287=_0x261ea0;_0x5c8488+=_0x1de179[_0x24b287(0x2e1)]*_0x1de179[_0x24b287(0x2ea)];}),_0x2d961f[_0x452f03['length']-_0x335af4-0x1]=_0x5c8488*(_0x2c705a-0x1);});let _0x2bbe7f=[];_0x4730c9=[...config[_0x262e69(0x259)]]||[];let _0x113e40=0x0;_0x2e910e=0x0,_0x452f03[_0x262e69(0x262)]((_0x1e3a35,_0x571b11)=>{const _0x1c2806=_0x262e69;if(_0x4730c9[_0x2e910e]){const _0xd38ea6=fns['parse'](_0x4730c9[_0x2e910e][_0x1c2806(0x2ee)],'yyyy/MM/dd',new Date()),_0x2dd61f=fns['parse'](_0x1e3a35[_0x1c2806(0x2ee)],'yyyy/MM/dd',new Date());if(fns[_0x1c2806(0x2d4)](_0xd38ea6,_0x2dd61f)){let _0x5389b1=0x0;_0x4730c9[_0x2e910e][_0x1c2806(0x216)][_0x1c2806(0x262)](_0x181245=>{const _0x1e669c=_0x1c2806;!_0x2bbe7f[_0x181245['coin']]?_0x2bbe7f[_0x181245[_0x1e669c(0x264)]]=_0x181245['number']:(_0x5389b1=_0x2bbe7f[_0x181245['coin']],_0x2bbe7f[_0x181245[_0x1e669c(0x264)]]+=_0x181245['number']);const _0x3142a9=_0x1e3a35[_0x1e669c(0x22f)][_0x1e669c(0x2ce)](_0x465d2d=>_0x465d2d[_0x1e669c(0x264)]==_0x181245[_0x1e669c(0x264)]);(!_0x3142a9||_0x3142a9[_0x1e669c(0x2e1)]==0x0)&&(_0x113e40+=(-_0x181245[_0x1e669c(0x2e1)]-_0x5389b1)*_0x181245['price']);}),_0x2e910e++;}}_0x1e3a35[_0x1c2806(0x22f)][_0x1c2806(0x262)]((_0x842ff0,_0xa8e51c)=>{const _0x3e196d=_0x1c2806;_0x2bbe7f[_0x842ff0[_0x3e196d(0x264)]]&&(_0x842ff0['initial']=_0x2bbe7f[_0x842ff0[_0x3e196d(0x264)]]);}),_0x4eaf75[_0x1c2806(0x224)]({'date':_0x1e3a35['date'],'eur':_0x1e3a35[_0x1c2806(0x276)],'usd':_0x1e3a35['usd'],'offset':_0x2d961f[_0x571b11],'netoffset':_0x113e40,'coins':_0x1e3a35[_0x1c2806(0x22f)]});});}return _0x4eaf75;}function emitPerformance(_0x32693f){const _0x16d26b=_0x2667df;_0x32693f[_0x16d26b(0x2dd)]!==0x0?(proxyEmit(_0x16d26b(0x2e6),_0x32693f),lastPerformanceEmitted=getDate()):proxyEmit(_0x16d26b(0x2e6),[]);}function getPerf(_0x3bfa3d,_0x127f1d){const _0x237a82=_0x2667df;let _0x515b61=0x0,_0x510103=0x0,_0x2dfaf8=0x0;_0x3bfa3d[_0x237a82(0x22f)][_0x237a82(0x262)](_0x95fdca=>{const _0xe63e47=_0x237a82;_0x515b61+=_0x95fdca[_0xe63e47(0x2e1)]*_0x95fdca[_0xe63e47(0x2ea)];});_0x127f1d&&(_0x515b61+=_0x3bfa3d[_0x237a82(0x1f4)]);if(config[_0x237a82(0x321)]==='BTC'||config['basecoin']===_0x237a82(0x2a8))_0x510103=_0x515b61*_0x3bfa3d[_0x237a82(0x276)],_0x2dfaf8=_0x515b61*_0x3bfa3d[_0x237a82(0x323)];else{if(usdBasecoins[_0x237a82(0x295)](config['basecoin']))_0x510103=_0x515b61*_0x3bfa3d[_0x237a82(0x276)]/_0x3bfa3d[_0x237a82(0x323)],_0x2dfaf8=_0x515b61;else config[_0x237a82(0x321)]===_0x237a82(0x1d7)&&(_0x510103=_0x515b61,_0x2dfaf8=_0x515b61*_0x3bfa3d['usd']/_0x3bfa3d[_0x237a82(0x276)]);}return[_0x515b61,_0x510103,_0x2dfaf8];}function getKPIs(_0x232060,_0x193533=_0x2667df(0x1d7)){const _0x311b79=_0x2667df,_0x4c934f=config['basecoin'],_0xf691d4=lastBalances,_0x312c45=currentCoins,_0x30f943=getNormalizedPerformance(),_0x21d01a=_0x232060===_0x311b79(0x321)?_0x4c934f:_0x232060==='fiat'||_0x232060==='net-fiat'?_0x193533:_0x311b79(0x242)+_0x4c934f,_0x1c6fda=_0x232060===_0x311b79(0x322)?_0x311b79(0x255):_0x232060===_0x311b79(0x235)?'Net\x20effect':_0x21d01a+_0x311b79(0x1ea),_0x521073=_0x232060===_0x311b79(0x322)||_0x232060===_0x311b79(0x235)?'Net\x20effect':_0x21d01a+_0x311b79(0x1cc);let _0x29ef0b=0x0;_0x312c45[_0x311b79(0x262)](_0x3d9584=>{const _0x48ad4f=_0x311b79;_0x29ef0b+=_0x3d9584[_0x48ad4f(0x2e1)]*_0x3d9584[_0x48ad4f(0x31c)];});if(_0x232060===_0x311b79(0x1e1)||_0x232060===_0x311b79(0x235)){if(_0x4c934f===_0x311b79(0x1fe)||_0x4c934f===_0x311b79(0x2a8))_0x29ef0b=_0x29ef0b*(_0x193533===_0x311b79(0x1d7)?_0xf691d4['eur']:_0xf691d4[_0x311b79(0x323)]);else{if(usdBasecoins['includes'](_0x4c934f))_0x29ef0b=_0x29ef0b*(_0x193533===_0x311b79(0x1d7)?_0xf691d4[_0x311b79(0x276)]/_0xf691d4[_0x311b79(0x323)]:0x1);else _0x4c934f==='EUR'&&(_0x29ef0b=_0x29ef0b*(_0x193533===_0x311b79(0x1d7)?0x1:_0xf691d4[_0x311b79(0x323)]/_0xf691d4[_0x311b79(0x276)]));}}let _0x486132;if(_0x29ef0b!==0x0){if(_0x232060===_0x311b79(0x321))_0x486132=(_0x29ef0b/startingBalances['basecoin']-0x1)*0x64;else{if(_0x193533===_0x311b79(0x1d7))_0x486132=(_0x29ef0b/startingBalances[_0x311b79(0x276)]-0x1)*0x64;else _0x486132=(_0x29ef0b/startingBalances['usd']-0x1)*0x64;}let _0x18fb19=0x0;if(startingBalances[_0x311b79(0x22f)])_0x312c45[_0x311b79(0x262)](_0x139e62=>{const _0x49fac2=_0x311b79;let _0x2932c1=startingBalances[_0x49fac2(0x22f)][_0x49fac2(0x2ce)](_0x5df418=>_0x5df418[_0x49fac2(0x264)]===_0x139e62['coin']);if(_0x2932c1&&_0x2932c1['coin']&&_0x139e62[_0x49fac2(0x2e1)]!==0x0)_0x18fb19+=_0x2932c1[_0x49fac2(0x2e1)]*_0x139e62[_0x49fac2(0x31c)];});let _0x126e94=0x0;if(_0x30f943[_0x311b79(0x2dd)]!==0x0){let _0x32ea81=_0x30f943[_0x30f943[_0x311b79(0x2dd)]-0x1];_0x126e94=_0x32ea81[_0x311b79(0x351)];}_0x18fb19-=_0x126e94;_0x232060===_0x311b79(0x322)&&(_0x486132=(_0x29ef0b-_0x18fb19)/startingBalances[_0x311b79(0x321)]*0x64,_0x29ef0b=_0x29ef0b-_0x18fb19);if(_0x232060==='net-fiat'){let _0x4b071b=_0x193533===_0x311b79(0x1d7)?startingBalances[_0x311b79(0x276)]:startingBalances[_0x311b79(0x323)];if(_0x4c934f==='BTC'||_0x4c934f===_0x311b79(0x2a8))_0x18fb19=_0x193533===_0x311b79(0x1d7)?_0x18fb19*_0xf691d4[_0x311b79(0x276)]:_0x18fb19*_0xf691d4['usd'];else{if(usdBasecoins[_0x311b79(0x295)](_0x4c934f))_0x18fb19=_0x193533===_0x311b79(0x1d7)?_0x18fb19*_0xf691d4['eur']/_0xf691d4[_0x311b79(0x323)]:_0x18fb19;else _0x4c934f==='EUR'&&(_0x18fb19=_0x193533===_0x311b79(0x1d7)?_0x18fb19:_0x18fb19*_0xf691d4[_0x311b79(0x323)]/_0xf691d4[_0x311b79(0x276)]);}_0x486132=(_0x29ef0b-_0x18fb19)/_0x4b071b*0x64,_0x29ef0b=_0x29ef0b-_0x18fb19;}if(_0x486132){if(_0x486132<0x64)_0x486132=_0x486132[_0x311b79(0x240)](0x2);else{if(_0x486132<0x3e8)_0x486132=_0x486132[_0x311b79(0x240)](0x1);else _0x486132=_0x486132['toFixed'](0x0);}}else _0x486132=Number('0')['toFixed'](0x2);if(_0x29ef0b){if(Math[_0x311b79(0x218)](_0x29ef0b)<0.000001)_0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x2);else{if(Math[_0x311b79(0x218)](_0x29ef0b)<0.1)_0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x6);else{if(Math[_0x311b79(0x218)](_0x29ef0b)<0x1)_0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x5);else{if(Math[_0x311b79(0x218)](_0x29ef0b)<0xa)_0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x4);else{if(Math[_0x311b79(0x218)](_0x29ef0b)<0x64)_0x29ef0b=_0x29ef0b['toFixed'](0x3);else{if(Math['abs'](_0x29ef0b)<0x3e8)_0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x2);else _0x29ef0b=_0x29ef0b[_0x311b79(0x240)](0x2);}}}}}}else _0x29ef0b=Number('0')[_0x311b79(0x240)](0x2);}else _0x486132=Number('0')[_0x311b79(0x240)](0x2);return{'value':_0x29ef0b,'change':_0x486132,'leftTxt':_0x1c6fda,'rightTxt':_0x521073};}async function getStartingBalances(_0x3e8d39,_0x19af5b=!![]){const _0x153f27=_0x2667df;if(_0x3e8d39['length']!==0x0){const [_0xb8613d,_0x377986,_0x43f466]=getPerf(_0x3e8d39[0x0],!![]);let _0x425b5e=[];config[_0x153f27(0x244)][_0x153f27(0x262)](_0x359bf7=>{const _0x39edb4=_0x153f27;let _0x11dc56=0x0,_0x178039;config[_0x39edb4(0x259)][_0x39edb4(0x262)](_0x10135c=>{const _0x4e813c=_0x39edb4;let _0x4f7333=_0x10135c['changes'][_0x4e813c(0x2ce)](_0x5b65e6=>_0x5b65e6[_0x4e813c(0x264)]==_0x359bf7[_0x4e813c(0x264)]);if(_0x4f7333){_0x11dc56+=_0x4f7333[_0x4e813c(0x2e1)];if(!_0x178039)_0x178039=_0x4f7333[_0x4e813c(0x2ea)];}}),_0x425b5e[_0x39edb4(0x224)]({'coin':_0x359bf7[_0x39edb4(0x264)],'number':_0x11dc56,'initialprice':_0x178039});});const _0x5a5fb8={'basecoin':_0xb8613d,'eur':_0x377986,'usd':_0x43f466,'coins':_0x425b5e};if(_0x19af5b)proxyEmit('starting-balances',_0x5a5fb8);startingBalances=_0x5a5fb8;}}function headlessMode(_0x464cee){const _0x5107c2=_0x2667df;let _0x42c9ab=_0x464cee[_0x5107c2(0x244)],_0x34b5d1=_0x464cee[_0x5107c2(0x23e)],_0x3eebd6=[];for(let _0x1eef95 of _0x42c9ab){if(_0x1eef95[_0x5107c2(0x264)]!=config[_0x5107c2(0x321)]){if(_0x1eef95[_0x5107c2(0x2fe)]>=_0x34b5d1/0x64){if(_0x1eef95['valid'])_0x3eebd6[_0x5107c2(0x224)](_0x1eef95);}else{if(_0x1eef95[_0x5107c2(0x2fe)]<=-_0x34b5d1/0x64){if(_0x1eef95[_0x5107c2(0x2d0)])_0x3eebd6['push'](_0x1eef95);}}}}_0x3eebd6[_0x5107c2(0x2dd)]>0x0&&placeOrder(_0x3eebd6);}function notifyBalance(_0x22d944){const _0x16cfcc=_0x2667df;let _0xbdd2b8=_0x22d944[_0x16cfcc(0x244)],_0x3107e5=_0x22d944[_0x16cfcc(0x23e)],_0x3b117d=[];for(let _0x473c7a of _0xbdd2b8){if(_0x473c7a['coin']!=config[_0x16cfcc(0x321)]){if(_0x473c7a[_0x16cfcc(0x2fe)]>=_0x3107e5/0x64){if(_0x473c7a['valid'])_0x3b117d[_0x16cfcc(0x224)](_0x473c7a);}else{if(_0x473c7a[_0x16cfcc(0x2fe)]<=-_0x3107e5/0x64){if(_0x473c7a[_0x16cfcc(0x2d0)])_0x3b117d[_0x16cfcc(0x224)](_0x473c7a);}}}}if(_0x3b117d['length']>0x0){let _0x397d96=_0x3b117d[_0x16cfcc(0x31a)](_0x3f78fa=>_0x3f78fa[_0x16cfcc(0x264)]);_0x397d96[_0x16cfcc(0x317)]();let _0x442f1a=_0x397d96[_0x16cfcc(0x332)](',\x20');if(!lastCoinsToBalance)logHistory(_0x16cfcc(0x340),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x442f1a;}}function symbolToCoin(_0x13bcf7){const _0x35b662=_0x2667df;let _0x1be214;if(_0x13bcf7['includes']('/'+config[_0x35b662(0x321)]))_0x1be214=_0x13bcf7['replace']('/'+config[_0x35b662(0x321)],'');if(_0x13bcf7[_0x35b662(0x295)](config['basecoin']+'/'))_0x1be214=_0x13bcf7[_0x35b662(0x32e)](config[_0x35b662(0x321)]+'/','');return _0x1be214;}async function unlockOrders(){const _0x427e0e=_0x2667df;if(allOrdersPlaced&&lockOrders==ORDERS[_0x427e0e(0x251)]){logger[_0x427e0e(0x23a)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x57f42d=await getCoins();[currentCoins,currentCoinsAll]=_0x57f42d,validateOrdersState=_0x427e0e(0x20a),persistOpenOrders([]),lockOrders=ORDERS[_0x427e0e(0x1fc)],logger['debug'](_0x427e0e(0x345));}}async function validateOrders(_0x5cb697){const _0x1ce104=_0x2667df;if(_0x5cb697)validateOrdersState=_0x5cb697;logger['debug'](_0x1ce104(0x1d2)+validateOrdersState+_0x1ce104(0x31d)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x1ce104(0x333)));let _0x1553de=[],_0xb1aa1c=config['ordertype']==_0x1ce104(0x298)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1ce104(0x26d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1ce104(0x251)])return;logger[_0x1ce104(0x23a)](_0x1ce104(0x29c)+validateOrdersState),lastOrders['forEach'](_0x179820=>{const _0x357e2a=_0x1ce104;let _0x1d061f=![];_0x179820['filled']>0x0&&(_0x1d061f=!![]),_0x1553de[_0x357e2a(0x224)](_0x1d061f),_0x1d061f&&config['ordertype']!='market'&&logHistory(_0x357e2a(0x32b),_0x357e2a(0x335)+_0x179820[_0x357e2a(0x29d)]+'\x20'+_0x179820[_0x357e2a(0x1e8)]+'\x20#'+formatResult(_0x179820['filled'],0x8)+'\x20@'+formatResult(_0x179820[_0x357e2a(0x2ea)],0x8));}),_0x1553de[_0x1ce104(0x262)]((_0x32303e,_0x4f94ae)=>{if(_0x32303e)lastOrders['splice'](_0x4f94ae,0x1);}),persistOpenOrders(lastOrders);const _0x3d469d=coolingDown?_0x1ce104(0x293):_0x1ce104(0x320);if(validateOrdersState=='initial'){validateOrdersState=_0x1ce104(0x2fb);if(_0x1553de[_0x1ce104(0x295)](![])){if(config[_0x1ce104(0x327)]==_0x1ce104(0x298)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1553de['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x1ce104(0x327)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x1ce104(0x2f8))_0x1553de['includes'](![])&&(config[_0x1ce104(0x327)]==_0x1ce104(0x298)?logHistory(_0x1ce104(0x233),_0x1ce104(0x2b5)+Math['round'](_0xb1aa1c*validateOrderInterval/0xea60)+_0x1ce104(0x1d6)+_0x3d469d):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x1ce104(0x2ed)](_0xb1aa1c*validateOrderInterval/0xea60)+_0x1ce104(0x1d6)+_0x3d469d))),await unlockOrders();else{if(validateOrdersState==_0x1ce104(0x21e)){if(config[_0x1ce104(0x327)]!=_0x1ce104(0x298))logHistory(_0x1ce104(0x233),_0x1ce104(0x2e5)+_0x3d469d);await unlockOrders();}}}}}async function cancelOrders(){const _0x458c38=_0x2667df;lastOrders[_0x458c38(0x262)](async _0x602b9c=>{const _0x5a63a3=_0x458c38;try{const _0x2e21f8=await exchange['cancelOrder'](_0x602b9c[_0x5a63a3(0x299)],_0x602b9c['symbol']);}catch(_0xd3f56){if(_0xd3f56['toString']()['includes']('OrderNotFound')){}else await handleError(_0xd3f56,'cancelOrders()');}});}async function initCoinResults(_0x50d013){const _0x327252=_0x2667df;_0x50d013?logger[_0x327252(0x23a)]('Resetting\x20coin\x20results:\x20'+_0x50d013):logger[_0x327252(0x23a)]('Initializing\x20coin\x20results'),config[_0x327252(0x244)]['forEach'](_0x12a35a=>{const _0x2b8a34=_0x327252;if(!_0x12a35a[_0x2b8a34(0x2f7)]&&_0x12a35a[_0x2b8a34(0x264)]!=config[_0x2b8a34(0x321)]){const _0x1f5ceb=currentCoins[_0x2b8a34(0x2ce)](_0x4b6b85=>_0x4b6b85[_0x2b8a34(0x264)]==_0x12a35a[_0x2b8a34(0x264)]),_0x31d4e1=global[_0x2b8a34(0x2f1)][noslash(_0x12a35a[_0x2b8a34(0x29d)])];let _0x4d3a83=_0x1f5ceb?_0x1f5ceb[_0x2b8a34(0x2e1)]:null,_0x46d690=_0x12a35a[_0x2b8a34(0x2a7)]?0x1/_0x31d4e1:_0x31d4e1,_0x28b2e0;config[_0x2b8a34(0x259)][_0x2b8a34(0x262)](_0x4f6b72=>{const _0x3781d9=_0x2b8a34;!_0x28b2e0&&(_0x28b2e0=_0x4f6b72[_0x3781d9(0x216)]['find'](_0x3cb463=>_0x3cb463[_0x3781d9(0x264)]==_0x12a35a['coin']),_0x28b2e0&&(_0x4d3a83=_0x28b2e0[_0x3781d9(0x2e1)],_0x46d690=_0x28b2e0[_0x3781d9(0x2ea)]));});let _0x11a587=dbCoinResults[_0x2b8a34(0x35a)]('coins')[_0x2b8a34(0x2ce)]({'coin':_0x12a35a['coin']})[_0x2b8a34(0x2f5)]();if(!_0x11a587){const _0x509f26={'coin':_0x12a35a['coin'],'number':_0x4d3a83,'breakeven':_0x46d690,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2b8a34(0x35a)](_0x2b8a34(0x22f))[_0x2b8a34(0x224)](_0x509f26)[_0x2b8a34(0x261)]();}else{if(_0x50d013&&_0x12a35a[_0x2b8a34(0x264)]==_0x50d013){const _0x270bb2={'coin':_0x12a35a[_0x2b8a34(0x264)],'number':_0x4d3a83,'breakeven':_0x46d690,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2b8a34(0x35a)](_0x2b8a34(0x22f))['find']({'coin':_0x12a35a[_0x2b8a34(0x264)]})['assign'](_0x270bb2)[_0x2b8a34(0x261)]();}}}});}async function updateCoinResults(_0x464542,_0x551230=![]){const _0x3904cd=_0x2667df;let _0x59c5aa,_0x55d85c,_0x122c09,_0x31f44f,_0x3f7c14,_0x36df62,_0x366a77=dbCoinResults[_0x3904cd(0x35a)]('coins')['find']({'coin':_0x464542[_0x3904cd(0x264)]})[_0x3904cd(0x2f5)](),_0x12717e=![];_0x366a77&&Object[_0x3904cd(0x32c)](_0x366a77)[_0x3904cd(0x262)](([_0x2a6fc4,_0x32ae02])=>{if(_0x32ae02==null)_0x12717e=!![];});(!_0x366a77||_0x12717e)&&(await initCoinResults(_0x464542[_0x3904cd(0x264)]),_0x366a77=dbCoinResults['get']('coins')['find']({'coin':_0x464542['coin']})['value']());_0x464542[_0x3904cd(0x2a7)]&&(_0x36df62={'filled':_0x464542[_0x3904cd(0x2b9)]*_0x464542['price'],'amount':_0x464542[_0x3904cd(0x2b9)]*_0x464542[_0x3904cd(0x2ea)],'side':_0x464542[_0x3904cd(0x1e8)]==_0x3904cd(0x1e0)?_0x3904cd(0x2a1):'sell','price':0x1/_0x464542[_0x3904cd(0x2ea)]},_0x464542={..._0x464542,..._0x36df62});_0x551230?_0x55d85c=_0x464542[_0x3904cd(0x1e8)]=='buy'?_0x366a77['number']+_0x464542[_0x3904cd(0x2b9)]:_0x366a77['number']-_0x464542['filled']:_0x55d85c=await getCoinNumber(_0x464542[_0x3904cd(0x264)]);if(_0x464542[_0x3904cd(0x29b)]&&_0x464542[_0x3904cd(0x29b)][_0x3904cd(0x25c)]==config[_0x3904cd(0x321)])_0x59c5aa=_0x464542[_0x3904cd(0x29b)][_0x3904cd(0x220)];else{if(_0x464542['fee']&&_0x464542[_0x3904cd(0x29b)]['currency']==_0x3904cd(0x2be)&&!_0x551230)_0x59c5aa=_0x464542[_0x3904cd(0x29b)][_0x3904cd(0x220)]*global[_0x3904cd(0x2f1)][_0x3904cd(0x2be)+config[_0x3904cd(0x321)]];else _0x59c5aa=defaultFee*_0x464542['filled']*_0x464542[_0x3904cd(0x2ea)];}_0x464542[_0x3904cd(0x1e8)]==_0x3904cd(0x2a1)?(_0x122c09=_0x55d85c!=0x0?(_0x366a77['breakeven']*_0x366a77[_0x3904cd(0x2e1)]+_0x464542[_0x3904cd(0x2ea)]*(_0x55d85c-_0x366a77[_0x3904cd(0x2e1)])+_0x59c5aa)/_0x55d85c:0x0,_0x31f44f=_0x366a77[_0x3904cd(0x342)]):(_0x122c09=_0x55d85c!=0x0?(_0x366a77['breakeven']*_0x366a77['number']-_0x464542[_0x3904cd(0x2ea)]*(_0x366a77['number']-_0x55d85c)+_0x59c5aa)/_0x55d85c:0x0,_0x31f44f=_0x366a77['realized']+(_0x464542[_0x3904cd(0x2ea)]-_0x366a77['breakeven'])*_0x464542[_0x3904cd(0x2b9)]);_0x3f7c14=(_0x464542['price']-_0x122c09-_0x59c5aa/_0x464542[_0x3904cd(0x2b9)])*_0x55d85c;let _0x391199={'coin':_0x464542[_0x3904cd(0x264)],'number':_0x55d85c,'breakeven':formatResult(_0x122c09,0x8),'realized':formatResult(_0x31f44f,0x8),'unrealized':formatResult(_0x3f7c14,0x8),'fees':formatResult(_0x366a77[_0x3904cd(0x234)]+_0x59c5aa,0x8),'sells':_0x464542['side']=='sell'?_0x366a77[_0x3904cd(0x2d8)]+0x1:_0x366a77['sells'],'buys':_0x464542[_0x3904cd(0x1e8)]==_0x3904cd(0x2a1)?_0x366a77[_0x3904cd(0x2b0)]+0x1:_0x366a77[_0x3904cd(0x2b0)]};dbCoinResults['get'](_0x3904cd(0x22f))[_0x3904cd(0x2ce)]({'coin':_0x464542[_0x3904cd(0x264)]})[_0x3904cd(0x256)](_0x391199)[_0x3904cd(0x261)]();if(!_0x551230){if(_0x464542['fee']&&_0x464542[_0x3904cd(0x29b)][_0x3904cd(0x25c)]==_0x3904cd(0x2be)){const _0x5911ac=currentCoins[_0x3904cd(0x2ce)](_0x227670=>_0x227670[_0x3904cd(0x264)]==_0x3904cd(0x2be));if(_0x5911ac){let _0x368b54=dbCoinResults[_0x3904cd(0x35a)](_0x3904cd(0x22f))[_0x3904cd(0x2ce)]({'coin':_0x3904cd(0x2be)})[_0x3904cd(0x2f5)]();_0x391199={..._0x368b54,'number':_0x5911ac['number']},dbCoinResults[_0x3904cd(0x35a)](_0x3904cd(0x22f))[_0x3904cd(0x2ce)]({'coin':_0x3904cd(0x2be)})[_0x3904cd(0x256)](_0x391199)[_0x3904cd(0x261)]();}}}}async function placeOrder(_0x210225){const _0x43e861=_0x2667df,_0x556de8=config['ordertype']==_0x43e861(0x298)?_0x43e861(0x298):_0x43e861(0x1ef);if(lockOrders==ORDERS[_0x43e861(0x1fc)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x43e861(0x251)],allOrdersPlaced=![],validateOrdersState=_0x43e861(0x20a);let _0x201a9d=![];lastOrders=[];for(const _0x5e8d43 of _0x210225){let _0x343d10,_0x190288,_0x12ac18,_0x410cc0,_0x300846,_0x205c14=_0x5e8d43['symbol'];try{const _0x7cb4f9=await exchange[_0x43e861(0x28b)](_0x205c14);_0x343d10=_0x5e8d43[_0x43e861(0x2a7)]?0x1/_0x5e8d43[_0x43e861(0x31c)]:_0x5e8d43[_0x43e861(0x31c)],_0x190288=_0x7cb4f9[_0x43e861(0x349)],_0x12ac18=_0x7cb4f9[_0x43e861(0x33f)];_0x5e8d43[_0x43e861(0x2a7)]?(_0x410cc0=_0x5e8d43[_0x43e861(0x1e8)]==_0x43e861(0x2a1)?_0x43e861(0x1e0):_0x43e861(0x2a1),_0x300846=Math[_0x43e861(0x218)](_0x5e8d43['trade'])/_0x343d10):(_0x410cc0=_0x5e8d43[_0x43e861(0x1e8)],_0x300846=Math['abs'](_0x5e8d43[_0x43e861(0x202)]));_0x556de8==_0x43e861(0x1ef)&&(config['ordertype']==_0x43e861(0x352)&&(_0x343d10=_0x410cc0==_0x43e861(0x2a1)?_0x190288:_0x12ac18),config['ordertype']==_0x43e861(0x25d)&&(_0x343d10=_0x410cc0=='buy'?_0x12ac18:_0x190288));_0x300846=formatResult(_0x300846,0x8),_0x343d10=formatResult(_0x343d10,0x8);const _0x2264ac=_0x410cc0==_0x43e861(0x1e0)?config[_0x43e861(0x356)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x43e861(0x253)]?String[_0x43e861(0x229)]('0x'+config[_0x43e861(0x253)])+'\x20':'',_0x4ddd4d=_0x556de8==_0x43e861(0x298)?'Market':config[_0x43e861(0x327)]==_0x43e861(0x352)?_0x43e861(0x2ac):_0x43e861(0x257),_0x3402de=(Math[_0x43e861(0x313)](Math[_0x43e861(0x30a)]()*0x35a4e900)+0x5f5e100)[_0x43e861(0x22d)]();lastOrders[_0x43e861(0x224)]({'customId':_0x3402de,'symbol':_0x205c14,'coin':_0x5e8d43['coin'],'amount':_0x300846,'price':_0x343d10,'side':_0x410cc0,'reverse':_0x5e8d43[_0x43e861(0x2a7)],'filled':0x0});if(_0x556de8==_0x43e861(0x298))logHistory(_0x43e861(0x32b),''+_0x2264ac+_0x4ddd4d+'\x20order:\x20'+_0x205c14+'\x20'+_0x410cc0+'\x20#'+formatResult(_0x300846,0x8)+'\x20@'+formatResult(_0x343d10,0x8));else logHistory('order',''+_0x2264ac+_0x4ddd4d+_0x43e861(0x2de)+_0x205c14+'\x20'+_0x410cc0+'\x20#'+formatResult(_0x300846,0x8)+'\x20@'+formatResult(_0x343d10,0x8));let _0x25c11c;_0x556de8=='market'?_0x410cc0==_0x43e861(0x2a1)&&['Bybit',_0x43e861(0x227),_0x43e861(0x266),_0x43e861(0x248),_0x43e861(0x288)][_0x43e861(0x295)](config[_0x43e861(0x200)])?_0x25c11c=await exchange[_0x43e861(0x2c4)](_0x205c14,_0x556de8,_0x410cc0,_0x300846,_0x343d10):_0x25c11c=await exchange[_0x43e861(0x2c4)](_0x205c14,_0x556de8,_0x410cc0,_0x300846,undefined):_0x25c11c=await exchange[_0x43e861(0x2c4)](_0x205c14,_0x556de8,_0x410cc0,_0x300846,_0x343d10);logger[_0x43e861(0x23a)](_0x43e861(0x1e6)+_0x25c11c['id']+'\x20|\x20Custom\x20ID:\x20'+_0x3402de);const _0x1a7687=lastOrders[_0x43e861(0x2dd)]-0x1;if(_0x1a7687>=0x0&&lastOrders[_0x1a7687]['customId']==_0x3402de){lastOrders[_0x1a7687]['orderId']=_0x25c11c['id'];if(_0x25c11c[_0x43e861(0x286)])lastOrders[_0x1a7687][_0x43e861(0x286)]=_0x25c11c['amount'];if(_0x25c11c[_0x43e861(0x2ea)])lastOrders[_0x1a7687][_0x43e861(0x2ea)]=_0x25c11c[_0x43e861(0x2ea)];lastOrders[_0x1a7687][_0x43e861(0x29b)]=_0x25c11c[_0x43e861(0x29b)];}if(config[_0x43e861(0x24a)]!=0x0){let _0x21f19f=null;if(cooldownTracker[_0x43e861(0x2dd)]==config['cooldown']-0x1)_0x21f19f=cooldownTracker[_0x43e861(0x314)]();const _0x56e22f=getTimeStamp();cooldownTracker['push'](_0x56e22f);if(_0x21f19f){const _0x3c539c=fns[_0x43e861(0x343)](new Date(_0x56e22f),new Date(_0x21f19f));if(_0x3c539c<cooldownInterval){logHistory(_0x43e861(0x307),_0x43e861(0x316)+config[_0x43e861(0x24a)]+_0x43e861(0x1d0)+cooldownInterval/0x3c+_0x43e861(0x213)+cooldownPeriod/(0xe10*0x3e8)+_0x43e861(0x2a9)),coolingDown=!![];break;}}}}catch(_0x3d5e9d){if(_0x3d5e9d[_0x43e861(0x22d)]()[_0x43e861(0x295)](_0x43e861(0x1dc)))lastOrders=lastOrders[_0x43e861(0x267)](_0x5cb661=>_0x5cb661[_0x43e861(0x29d)]!=_0x205c14),logHistory(_0x43e861(0x307),_0x43e861(0x305)+_0x205c14),_0x201a9d=!![];else{if(_0x3d5e9d[_0x43e861(0x22d)]()[_0x43e861(0x295)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x43e861(0x267)](_0x1289ac=>_0x1289ac[_0x43e861(0x29d)]!=_0x205c14),logHistory('error',_0x43e861(0x21b)+_0x205c14),_0x201a9d=!![];else{if(_0x3d5e9d[_0x43e861(0x22d)]()['includes']('InvalidOrder'))lastOrders=lastOrders['filter'](_0x2d1f35=>_0x2d1f35[_0x43e861(0x29d)]!=_0x205c14),logHistory(_0x43e861(0x307),_0x43e861(0x2a4)+_0x205c14),logger[_0x43e861(0x23a)](_0x3d5e9d),_0x201a9d=!![];else _0x3d5e9d[_0x43e861(0x22d)]()['includes'](_0x43e861(0x209))?(lastOrders=lastOrders[_0x43e861(0x267)](_0x55c0a9=>_0x55c0a9[_0x43e861(0x29d)]!=_0x205c14),logHistory(_0x43e861(0x307),_0x43e861(0x305)+_0x205c14),_0x201a9d=!![]):(lastOrders=lastOrders[_0x43e861(0x267)](_0x34bba6=>_0x34bba6[_0x43e861(0x29d)]!=_0x205c14),await handleError(_0x3d5e9d,'placeOrder()',_0x205c14));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x43e861(0x2dd)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xad82a6=config[_0x43e861(0x327)]==_0x43e861(0x298)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x9d6d1a=_0x43e861;validateOrders(_0x9d6d1a(0x2f8));},_0xad82a6);}else unlockOrders();_0x201a9d&&config[_0x43e861(0x353)]&&(logHistory(_0x43e861(0x307),_0x43e861(0x2c3)),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43e861(0x233),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x43e861(0x353)]&&logHistory(_0x43e861(0x307),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x43e861(0x1fc)]&&(!config['headless']&&(config[_0x43e861(0x327)]==_0x43e861(0x298)?logHistory(_0x43e861(0x307),_0x43e861(0x326)):logHistory(_0x43e861(0x307),_0x43e861(0x2f9))));}}function persistOpenOrders(_0x2b19ea){const _0x42bb7c=_0x2667df,_0x5092ac={...config,'openOrders':_0x2b19ea};let _0x2367b1=dbConfig[_0x42bb7c(0x35a)](_0x42bb7c(0x32f))['find']({'botID':botID})[_0x42bb7c(0x2f5)]();_0x2367b1&&dbConfig[_0x42bb7c(0x35a)](_0x42bb7c(0x32f))[_0x42bb7c(0x2ce)]({'botID':botID})['assign'](_0x5092ac)['write']();}function restoreOrders(){const _0x4e276b=_0x2667df;let _0x65e4a7;config[_0x4e276b(0x1e4)]&&allOpenOrders['forEach'](_0x1e0e3d=>{const _0x4a0246=_0x4e276b,_0x23356b=config[_0x4a0246(0x1e4)][_0x4a0246(0x2ce)](_0x541f7b=>_0x541f7b['orderId']==_0x1e0e3d['id']);_0x23356b&&(lastOrders[_0x4a0246(0x224)](_0x23356b),_0x65e4a7=_0x1e0e3d[_0x4a0246(0x279)]);});if(lastOrders[_0x4e276b(0x2dd)]>0x0){lockOrders=ORDERS[_0x4e276b(0x251)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x345d5a=new Date()[_0x4e276b(0x28e)](),_0x51720b=config[_0x4e276b(0x327)]==_0x4e276b(0x298)?validateOrderTimeout*0x3c*0x3e8:config[_0x4e276b(0x26d)]*0x3c*0x3e8;if(_0x65e4a7+_0x51720b>_0x345d5a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4dc405=_0x4e276b;validateOrders(_0x4dc405(0x2f8));},_0x65e4a7+_0x51720b-_0x345d5a);}else validateOrders(_0x4e276b(0x2f8));}}async function sendMetricsTelegram(){const _0x4c75cf=_0x2667df;if(!coinsLoaded){process[_0x4c75cf(0x2a3)]({'telegrammsg':_0x4c75cf(0x203)},_0x2da17c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xcdd831='';if(config['showname'])_0xcdd831=_0x4c75cf(0x1df)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0xcdd831='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1c3b8c=getKPIs(_0x4c75cf(0x321)),_0x5ca4b1=getKPIs(_0x4c75cf(0x1e1),config[_0x4c75cf(0x1e1)]),_0x419cc5=getKPIs(_0x4c75cf(0x322)),_0x3b37d3=getKPIs(_0x4c75cf(0x235),config[_0x4c75cf(0x1e1)]);_0xcdd831+=_0x4c75cf(0x2a6),_0xcdd831+=_0x1c3b8c[_0x4c75cf(0x31f)]+_0x4c75cf(0x33e)+_0x1c3b8c[_0x4c75cf(0x2f5)]+'\x0a',_0xcdd831+=_0x1c3b8c['rightTxt']+':\x20'+_0x1c3b8c[_0x4c75cf(0x25e)]+'%\x0a',_0xcdd831+=_0x5ca4b1[_0x4c75cf(0x31f)]+_0x4c75cf(0x33e)+_0x5ca4b1[_0x4c75cf(0x2f5)]+'\x0a',_0xcdd831+=_0x5ca4b1[_0x4c75cf(0x30e)]+':\x20'+_0x5ca4b1[_0x4c75cf(0x25e)]+'%\x0a',_0xcdd831+=_0x419cc5[_0x4c75cf(0x31f)]+':\x20'+_0x419cc5['value']+'\x20('+config[_0x4c75cf(0x321)]+')\x0a',_0xcdd831+=_0x419cc5['rightTxt']+':\x20'+_0x419cc5['change']+_0x4c75cf(0x237)+config['basecoin']+')\x0a',_0xcdd831+=_0x3b37d3[_0x4c75cf(0x31f)]+':\x20'+_0x3b37d3[_0x4c75cf(0x2f5)]+'\x20('+config['fiat']+')\x0a',_0xcdd831+=_0x3b37d3[_0x4c75cf(0x30e)]+':\x20'+_0x3b37d3[_0x4c75cf(0x25e)]+'%\x20('+config['fiat']+')\x0a',_0xcdd831+=_0x4c75cf(0x26f),process[_0x4c75cf(0x2a3)]({'telegrammsg':_0xcdd831},_0x50b6fa=>{});}async function sendPortfolioTelegram(){const _0x357c89=_0x2667df;if(!coinsLoaded){process[_0x357c89(0x2a3)]({'telegrammsg':_0x357c89(0x203)},_0x4d7b05=>{});return;}let _0x442f3c='';if(config['showname'])_0x442f3c=_0x357c89(0x1df)+config[_0x357c89(0x24d)]+_0x357c89(0x338);else _0x442f3c=_0x357c89(0x346)+botID+_0x357c89(0x338);_0x442f3c+=_0x357c89(0x2a6),_0x442f3c+='-------------------------------\x0a',_0x442f3c+=_0x357c89(0x354),_0x442f3c+='-------------------------------\x0a',currentCoins[_0x357c89(0x262)](_0x36353c=>{const _0x14d278=_0x357c89;_0x442f3c+=_0x36353c[_0x14d278(0x264)][_0x14d278(0x208)](0x7)+'|\x20'+formatPad(_0x36353c[_0x14d278(0x27b)],0x2,0x6)+'|\x20'+formatPad(_0x36353c[_0x14d278(0x1d5)],0x2,0x6)+'|\x20'+formatPad(_0x36353c[_0x14d278(0x2fe)]*0x64,0x2,0x6)+'\x0a';}),_0x442f3c+='</pre>',process[_0x357c89(0x2a3)]({'telegrammsg':_0x442f3c},_0x1c7d40=>{});}function formatPad(_0x2a292c,_0x1498c2,_0x2ea996){const _0x53181e=_0x2667df,_0x249eb2=formatResultString(_0x2a292c,_0x1498c2);return _0x249eb2?_0x249eb2[_0x53181e(0x297)](_0x2ea996):''['padStart'](_0x2ea996);}function logHistory(_0x4f0781,_0x53e38f,_0x4b84b3=''){const _0x1306d3=_0x2667df;logger[_0x1306d3(0x219)](''+_0x53e38f);let _0x2764d1={'time':getTimeStamp(),'type':_0x4f0781,'event':_0x53e38f};dbLogs[_0x1306d3(0x35a)]('logs')[_0x1306d3(0x224)](_0x2764d1)[_0x1306d3(0x261)]();if(_0x4b84b3=='')_0x4b84b3=_0x53e38f;proxyEmit(_0x1306d3(0x25b),{'log':_0x2764d1,'summary':_0x4b84b3}),process['send']({'telegram':{..._0x2764d1,'botname':config['botname'],'showname':config[_0x1306d3(0x2bc)]}},_0x45d0b3=>{});}function emitHistory(_0x5d82f6={}){const _0x5721e4=_0x2667df;Object[_0x5721e4(0x1cf)](_0x5d82f6)[_0x5721e4(0x2dd)]==0x0&&(_0x5d82f6={'type':[_0x5721e4(0x32b),_0x5721e4(0x25b)],'event':'','page':0x1});if(_0x5d82f6['type']['includes'](_0x5721e4(0x25b)))_0x5d82f6[_0x5721e4(0x2d5)][_0x5721e4(0x2d3)](_0x5d82f6[_0x5721e4(0x2d5)]['indexOf'](_0x5721e4(0x25b)),0x1,_0x5721e4(0x307),'warning',_0x5721e4(0x233));if(dbLogs[_0x5721e4(0x301)](_0x5721e4(0x1f7))['value']()){let _0x41b0d1=dbLogs[_0x5721e4(0x35a)]('logs')[_0x5721e4(0x267)](_0x142c8c=>{const _0x3d5bf8=_0x5721e4;if(_0x5d82f6[_0x3d5bf8(0x2d5)][_0x3d5bf8(0x2dd)]==0x0)return![];else return _0x5d82f6[_0x3d5bf8(0x2d5)][_0x3d5bf8(0x295)](_0x142c8c[_0x3d5bf8(0x2d5)]);})['filter'](_0x894102=>{const _0x1eac52=_0x5721e4;if(_0x5d82f6['event']=='')return!![];else return _0x894102[_0x1eac52(0x25b)][_0x1eac52(0x22b)]()[_0x1eac52(0x295)](_0x5d82f6[_0x1eac52(0x25b)][_0x1eac52(0x22b)]());})[_0x5721e4(0x201)](_0x5721e4(0x1e5)),_0x4074e1=_0x41b0d1['value']()[_0x5721e4(0x2dd)];_0x41b0d1=_0x41b0d1['reverse']()[_0x5721e4(0x2e9)]((_0x5d82f6[_0x5721e4(0x2e0)]-0x1)*logPageSize,_0x5d82f6[_0x5721e4(0x2e0)]*logPageSize-0x1)[_0x5721e4(0x2a7)]()[_0x5721e4(0x2f5)](),proxyEmit(_0x5721e4(0x30f),{'logs':_0x41b0d1,'total':_0x4074e1});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1acef3){const _0x1423bd=_0x2667df;if(dbLogs[_0x1423bd(0x301)](_0x1423bd(0x1f7))[_0x1423bd(0x2f5)]()){const _0x344926=dbLogs[_0x1423bd(0x35a)](_0x1423bd(0x1f7))[_0x1423bd(0x201)](_0x1423bd(0x1e5))[_0x1423bd(0x267)](_0x5cd2d5=>{const _0x53f1ce=_0x1423bd;return _0x5cd2d5[_0x53f1ce(0x2d5)]==_0x53f1ce(0x32b);})[_0x1423bd(0x2f5)]();dbLogs['get'](_0x1423bd(0x1f7))[_0x1423bd(0x2e4)]()['write'](),dbLogs[_0x1423bd(0x35a)](_0x1423bd(0x1f7))[_0x1423bd(0x256)](_0x344926)[_0x1423bd(0x261)](),emitHistory(_0x1acef3);}}async function pauseBot(){const _0x1d6a97=_0x2667df,_0x942cc1=new Date()['getTime']();if(!lastErrorShown||_0x942cc1-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x942cc1;!lastBotPause?(lastBotPause=_0x942cc1,consecutivePauses=0x1):(_0x942cc1-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1d6a97(0x2a3)]({'stop':_0x1d6a97(0x2b4)},_0x10105c=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1d6a97(0x28e)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory('error','Pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x1d6a97(0x303)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x3aba39=_0x2667df;botPaused=!![],await sleep(0x3e8),process[_0x3aba39(0x2a3)]({'stop':_0x3aba39(0x228)},_0x54738d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xb6f4bb,_0x449849){const _0x3f8bd4=_0x2667df;if(botPaused)return;const _0x26611d=config[_0x3f8bd4(0x200)]||_0x3f8bd4(0x304);if(_0x449849)logger[_0x3f8bd4(0x23a)](_0x3f8bd4(0x290)+_0x449849);if(_0xb6f4bb[_0x3f8bd4(0x22d)]()['includes'](_0x3f8bd4(0x324)))logHistory(_0x3f8bd4(0x307),_0x26611d+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration');else{if(_0xb6f4bb[_0x3f8bd4(0x22d)]()[_0x3f8bd4(0x295)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x26611d+_0x3f8bd4(0x27f));else _0xb6f4bb[_0x3f8bd4(0x22d)]()['includes'](_0x3f8bd4(0x243))?(logHistory(_0x3f8bd4(0x307),_0x26611d+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x3f8bd4(0x307),_0x3f8bd4(0x2ec))):await handleError(_0xb6f4bb,null);}}async function handleError(_0x35ed8b,_0x10c951,_0xc6453a=''){const _0x194176=_0x2667df;if(botPaused)return;const _0x36c5e4=config[_0x194176(0x200)]||_0x194176(0x304);if(_0x10c951)logger['debug'](_0x194176(0x290)+_0x10c951);if(_0x35ed8b[_0x194176(0x22d)]()['includes'](_0x194176(0x23f))||_0x35ed8b['toString']()[_0x194176(0x295)]('RateLimitExceeded'))logHistory(_0x194176(0x307),_0x36c5e4+_0x194176(0x24e)),await pauseBot();else{if(_0x35ed8b['toString']()[_0x194176(0x295)](_0x194176(0x315))||_0x35ed8b[_0x194176(0x22d)]()['includes'](_0x194176(0x22a)))logHistory(_0x194176(0x307),_0x36c5e4+'\x20not\x20available'),await pauseBot();else{if(_0x35ed8b[_0x194176(0x22d)]()['includes'](_0x194176(0x292)))logHistory('error',_0x36c5e4+'\x20not\x20responding'),await pauseBot();else{if(_0x35ed8b[_0x194176(0x22d)]()[_0x194176(0x295)](_0x194176(0x2ca)))logHistory(_0x194176(0x307),_0x36c5e4+_0x194176(0x1fa)),await pauseBot();else{if(_0x35ed8b[_0x194176(0x22d)]()[_0x194176(0x295)](_0x194176(0x28f)))logHistory(_0x194176(0x307),_0x194176(0x20c)),logHistory(_0x194176(0x307),_0x194176(0x31b)),await killBot();else{if(_0x35ed8b[_0x194176(0x22d)]()[_0x194176(0x295)]('InvalidNonce'))logHistory(_0x194176(0x307),_0x194176(0x2c1)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x35ed8b instanceof ccxt[_0x194176(0x225)])logHistory(_0x194176(0x307),_0x36c5e4+'\x20network\x20error'),logger[_0x194176(0x23a)](_0x194176(0x1d4),_0x35ed8b),await pauseBot();else{if(_0x35ed8b[_0x194176(0x22d)]()[_0x194176(0x295)](_0x194176(0x324)))logHistory(_0x194176(0x307),_0x36c5e4+_0x194176(0x2b8)),logHistory(_0x194176(0x307),_0x194176(0x31b)),await killBot();else{if(_0x35ed8b['toString']()['includes'](_0x194176(0x2b6)))logHistory(_0x194176(0x307),_0x36c5e4+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x194176(0x307),_0x194176(0x31b)),await killBot();else{if(_0x35ed8b[_0x194176(0x22d)]()['includes']('AuthenticationError'))logHistory(_0x194176(0x307),_0x36c5e4+_0x194176(0x2e3)),logHistory(_0x194176(0x307),_0x194176(0x31b)),await killBot();else{if(_0x35ed8b['toString']()[_0x194176(0x295)](_0x194176(0x350)))logHistory(_0x194176(0x307),_0x194176(0x1ff)+_0xc6453a);else _0x35ed8b instanceof ccxt[_0x194176(0x355)]?(logHistory(_0x194176(0x307),_0x36c5e4+_0x194176(0x1f9)),logger['debug'](_0x194176(0x1d4),_0x35ed8b)):(logHistory(_0x194176(0x307),_0x194176(0x344)),logger[_0x194176(0x23a)]('Error\x20details:',_0x35ed8b),await pauseBot());}}}}}}}}}}}function formatResult(_0x152603,_0x4eddb8){const _0x2af39f=_0x2667df;return parseFloat(_0x152603[_0x2af39f(0x240)](_0x4eddb8));}function formatResultTruncate(_0x1453b7,_0x4219b0){const _0x118b92=_0x2667df;let _0x2280cc=formatResultString(_0x1453b7,0xa),_0x1a6e9a=_0x2280cc[_0x118b92(0x241)]('.');return _0x1a6e9a!=-0x1&&(_0x2280cc=_0x2280cc['slice'](0x0,_0x1a6e9a+_0x4219b0+0x1)),Number(_0x2280cc);}function formatResultString(_0x3efff6,_0x41917b){const _0x8ac1c0=_0x2667df;let _0x4ea1b0;if(!(''+_0x3efff6)[_0x8ac1c0(0x295)]('e'))_0x4ea1b0=+(Math[_0x8ac1c0(0x2ed)](_0x3efff6+'e+'+_0x41917b)+'e-'+_0x41917b);else{let _0x2d1a03=(''+_0x3efff6)[_0x8ac1c0(0x2b2)]('e'),_0x5a714b='';+_0x2d1a03[0x1]+_0x41917b>0x0&&(_0x5a714b='+'),_0x4ea1b0=+(Math[_0x8ac1c0(0x2ed)](+_0x2d1a03[0x0]+'e'+_0x5a714b+(+_0x2d1a03[0x1]+_0x41917b))+'e-'+_0x41917b);}return Number(_0x4ea1b0)[_0x8ac1c0(0x240)](_0x41917b);}function getServerTime(){const _0x101d73=_0x2667df,_0x40b33f=new Date();return _0x40b33f[_0x101d73(0x1ed)]()+'/'+(_0x40b33f[_0x101d73(0x273)]()+0x1)[_0x101d73(0x22d)]()[_0x101d73(0x297)](0x2,'0')+'/'+_0x40b33f[_0x101d73(0x268)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x40b33f[_0x101d73(0x205)]()[_0x101d73(0x22d)]()[_0x101d73(0x297)](0x2,'0')+':'+_0x40b33f[_0x101d73(0x2a5)]()[_0x101d73(0x22d)]()[_0x101d73(0x297)](0x2,'0')+':'+_0x40b33f[_0x101d73(0x309)]()[_0x101d73(0x22d)]()[_0x101d73(0x297)](0x2,'0');}function getTimeStamp(){const _0x1f2f70=_0x2667df,_0x42f7c2=shiftedTime();return _0x42f7c2[_0x1f2f70(0x1ed)]()+'/'+(_0x42f7c2[_0x1f2f70(0x273)]()+0x1)['toString']()[_0x1f2f70(0x297)](0x2,'0')+'/'+_0x42f7c2['getDate']()[_0x1f2f70(0x22d)]()[_0x1f2f70(0x297)](0x2,'0')+'\x20'+_0x42f7c2[_0x1f2f70(0x205)]()['toString']()[_0x1f2f70(0x297)](0x2,'0')+':'+_0x42f7c2[_0x1f2f70(0x2a5)]()['toString']()[_0x1f2f70(0x297)](0x2,'0')+':'+_0x42f7c2['getSeconds']()[_0x1f2f70(0x22d)]()[_0x1f2f70(0x297)](0x2,'0');}function getDate(){const _0x5630a0=_0x2667df,_0x39e2af=shiftedTime();return _0x39e2af['getFullYear']()+'/'+(_0x39e2af[_0x5630a0(0x273)]()+0x1)[_0x5630a0(0x22d)]()['padStart'](0x2,'0')+'/'+_0x39e2af[_0x5630a0(0x268)]()[_0x5630a0(0x22d)]()[_0x5630a0(0x297)](0x2,'0');}function getHour(){const _0x59066e=_0x2667df,_0x2d98cd=shiftedTime();return _0x2d98cd[_0x59066e(0x205)]()[_0x59066e(0x22d)]()[_0x59066e(0x297)](0x2,'0');}function sleep(_0x533299){return new Promise(_0x412a0a=>setTimeout(_0x412a0a,_0x533299));}function shiftedTime(){const _0x9f36d7=_0x2667df,_0x1e2dff=new Date();let _0x33fd86=_0x1e2dff;if(config&&config[_0x9f36d7(0x1cd)]!==0x0)_0x33fd86=fns[_0x9f36d7(0x289)](_0x1e2dff,{'hours':config[_0x9f36d7(0x1cd)]});return _0x33fd86;}function timer(_0x4a4a5f){const _0x3fdec7=_0x2667df,_0x17ae51=new Date();!lasttime?console[_0x3fdec7(0x214)](getTimeStamp()+':\x20timer\x20>',_0x4a4a5f,_0x17ae51):console[_0x3fdec7(0x214)](getTimeStamp()+':\x20timer\x20>',_0x4a4a5f,(_0x17ae51-lasttime)/0x3e8),lasttime=_0x17ae51;}