const _0xea94=_0x41bd;(function(_0x33c89f,_0xf77053){const _0x1f1022=_0x41bd,_0x347b78=_0x33c89f();while(!![]){try{const _0x5cf19c=parseInt(_0x1f1022(0x27c))/0x1+-parseInt(_0x1f1022(0x2af))/0x2*(parseInt(_0x1f1022(0x26f))/0x3)+parseInt(_0x1f1022(0x1cc))/0x4*(parseInt(_0x1f1022(0x1bb))/0x5)+parseInt(_0x1f1022(0x275))/0x6*(parseInt(_0x1f1022(0x23e))/0x7)+-parseInt(_0x1f1022(0x1b6))/0x8+parseInt(_0x1f1022(0x298))/0x9*(parseInt(_0x1f1022(0x276))/0xa)+-parseInt(_0x1f1022(0x1f0))/0xb*(parseInt(_0x1f1022(0x204))/0xc);if(_0x5cf19c===_0xf77053)break;else _0x347b78['push'](_0x347b78['shift']());}catch(_0x36970a){_0x347b78['push'](_0x347b78['shift']());}}}(_0x1d32,0x80f5e));const _0x22bda3=function(){let _0x46c69c=!![];return function(_0x36c48e,_0x1e4f61){const _0x10cf01=_0x46c69c?function(){if(_0x1e4f61){const _0x8f8e7d=_0x1e4f61['apply'](_0x36c48e,arguments);return _0x1e4f61=null,_0x8f8e7d;}}:function(){};return _0x46c69c=![],_0x10cf01;};}(),_0x38fb1b=_0x22bda3(this,function(){const _0x541a0e=_0x41bd;return _0x38fb1b[_0x541a0e(0x2b1)]()[_0x541a0e(0x1fb)]('(((.+)+)+)+$')[_0x541a0e(0x2b1)]()['constructor'](_0x38fb1b)[_0x541a0e(0x1fb)](_0x541a0e(0x27e));});_0x38fb1b();'use strict';const ccxt=require(_0xea94(0x208)),low=require(_0xea94(0x254)),FileSync=require(_0xea94(0x20b)),fs=require('fs'),fns=require(_0xea94(0x285)),{WebsocketClient,DefaultLogger}=require(_0xea94(0x250)),Crypt=require(_0xea94(0x224))[_0xea94(0x21a)];let exchange,wsClient;global[_0xea94(0x268)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0xea94(0x222)],botID=process['argv'][0x2]||_0xea94(0x1c4),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0xea94(0x2b6)](_0xea94(0x235)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0xea94(0x1b2)](0x1);const userID=process[_0xea94(0x210)][0x3]||'',configpath=userID?_0xea94(0x1c8)+userID+'/':_0xea94(0x1c8);!fs['existsSync'](configpath)&&fs[_0xea94(0x1f7)](configpath);const configfile=configpath+_0xea94(0x25d)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0xea94(0x1f5),performancefile=configpath+'bot-'+botID+_0xea94(0x1d5),coinresultsfile=configpath+_0xea94(0x25d)+botID+_0xea94(0x1f1),settingsfile=configpath+_0xea94(0x1e8),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xea94(0x283)]({'logs':[]})[_0xea94(0x1da)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xea94(0x283)]({'data':[]})[_0xea94(0x1da)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0xea94(0x1da)]();function _0x1d32(){const _0x5b9c73=['timestamp','(((.+)+)+)+$','wsKey','cost','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','running','defaults','parseISO','date-fns','getCloses()','loadMarkets','currency','Binance\x20API\x20secret\x20is\x20invalid','type','side','distribution','kline','find','getTime','performance','length','Order(s)\x20validated\x20-\x20balancing\x20resumed','buy','timeshift','fee','market','BTC/USDT','4761MrKWUG','differenceInSeconds','event','createOrder','wss://stream.binance.com:9443','last','cancel','stringify','starting-balances','add','breakeven','userData','forEach','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','datetime','success','Unfilled\x20order(s)\x20canceled\x20after\x20','getMonth','outboundAccountPosition','cancelLoading','\x20minutes\x20-\x20balancing\x20resumed','InvalidNonce','\x20>\x20','7266BKbvBP','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','toString','yyyy/MM/dd','accumulatedQuantity','assign','HOT/EUR','log','fromCodePoint','price','\x20orders\x20in\x20less\x20than\x20','differenceInCalendarDays','getSeconds','event-history','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','reverse','map','date','exit','exchange','toLowerCase','fees','2019440njxkJq','getHours','loadSymbols()','number','args','471490ATTBmz','threshold','yyyy/MM/dd\x20HH:mm:ss','Order\x20filled:\x20','wsMarket','subscribeSpotKline','startprice','usd','Pausing\x20bot\x20for\x205\x20minutes\x20(','001','BUSD','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','configuration','./config/','format','balances','coin','8lUkJDO','milliseconds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','min','basecoin','portfolio','RSA-OAEP','parse','Invalid\x20quantity','-performance.json','Limit\x20(low-margin)','push','sell','filled','write','excluded','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','AuthenticationError','data','botID','asset','apiKey','slice','fetchOrders','sells','configuration-stored','ordertype','indexOf','bb-settings.json','limits','BTC/EUR','orderType','Order:\x20','emojibuy','fetchBalance','bot','469337UhNBHW','-results.json','headless','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','restart','-events.json','coins','mkdirSync','decrypt','time','binanceus','search','isArray','************','DAI/','startnumber','sort','target','secure','logs','156xIzVyY','InsufficientFunds','Order(s)\x20not\x20validated\x20after\x20','API-key\x20format\x20invalid','ccxt','spot','keys','lowdb/adapters/FileSync','getFullYear','cancelOrder()','delta','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','argv','message','cooldown',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','apiSecret','BTCUSDT','\x20order:\x20','BTC','max','HOT/BTC','Crypt','order','cancelOrder','\x20|\x20Error\x20details:\x20','reduce','entries','fetchOHLCV','buys','version','has','hybrid-crypto-js','abs','WebSockets(','storeConfiguration','Limit\x20(high-margin)','padStart','round','remainingSymbols','replace','splice','initclient','remove','availableBalance','shift','yyyy-MM-dd\x27T\x27HH:mm:ss','Binance\x20API\x20key\x20is\x20invalid','progress','Error:\x20Invalid\x20argument\x20','settings','value','offset','includes','eventType','BTC/BUSD','formattedMessage','eur','1841tsveOy','orderId','coinamount','FILLED','reconnected','recreateHistory()','initws()','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Bot\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchTickers','kill','botname','getPortfolio','error','limit-high','Order\x20amount\x20is\x20invalid:\x20','limit','binance','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','eachDayOfInterval','sha256','lowdb','realized','sortBy','MIN_NOTIONAL','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','symbol','BNB','filter','getMinutes','bot-','split','subscribeSpotUserDataStream','startdate','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','showname','trade','timeout','get','recreate','function','ticker','limit-low','amount','Order(s)\x20filled\x20-\x20balancing\x20resumed','valid','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','DDoSProtection','309csRNcz','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','USDC','emojisell','page','send','1902xQfbCq','8700XHlpmC','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','\x20|\x20Unknown\x20error\x20occured','closeWs','close','getDate','977325kCkeux'];_0x1d32=function(){return _0x5b9c73;};return _0x1d32();}const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xea94(0x283)]({'coins':[]})[_0xea94(0x1da)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0xea94(0x1ea)},'usd':{'coin':_0xea94(0x215),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x23a162)=>{},'debug':(..._0x5695a5)=>{},'notice':(..._0x234e48)=>{},'info':(..._0x3ba804)=>{},'warning':(..._0x32cb27)=>{},'error':async function(..._0x13e1b6){const _0x7a70b2=_0xea94,_0x11923f=new Date()[_0x7a70b2(0x28f)]();if(!lastErrorShown||_0x11923f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x7a70b2(0x28f)](),logHistory(_0x7a70b2(0x24c),'WebSockets('+consecutivePauses+_0x7a70b2(0x213));let _0x4e557f='';if(_0x13e1b6[0x0])_0x4e557f+=_0x13e1b6[0x0];if(_0x13e1b6[0x1]&&_0x13e1b6[0x1]['error']&&_0x13e1b6[0x1][_0x7a70b2(0x24c)][_0x7a70b2(0x211)])_0x4e557f+='\x20-\x20'+_0x13e1b6[0x1][_0x7a70b2(0x24c)][_0x7a70b2(0x211)];logging(_0x7a70b2(0x226)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x4e557f),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xea94(0x253),'rsaStandard':_0xea94(0x1d2)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0xea94(0x294)]&&updateTimeshift(settings[_0xea94(0x294)]);process[_0xea94(0x274)]({'started':_0xea94(0x282)},_0x470d90=>{}),initializeProcessListeners();function proxyEmit(_0x1d0683,_0x2152f6=null){process['send']({'function':_0x1d0683,'args':_0x2152f6},_0x119ebe=>{});}function initializeProcessListeners(){const _0x49efaf=_0xea94;process['on'](_0x49efaf(0x211),_0x226b1e=>{const _0x38b142=_0x49efaf;switch(Object[_0x38b142(0x20a)](_0x226b1e)[0x0]){case _0x38b142(0x294):_0x226b1e[_0x38b142(0x294)]!=undefined&&(settings[_0x38b142(0x294)]=_0x226b1e[_0x38b142(0x294)],updateTimeshift(settings[_0x38b142(0x294)]));break;case _0x38b142(0x267):switch(_0x226b1e[_0x38b142(0x267)]){case _0x38b142(0x22e):initclient();break;case'emitHistory':emitHistory(_0x226b1e[_0x38b142(0x1ba)]);break;case _0x38b142(0x24b):getPortfolio(_0x226b1e[_0x38b142(0x1ba)]);break;case _0x38b142(0x227):storeConfiguration(_0x226b1e[_0x38b142(0x1ba)]);break;case'storeHeadless':storeHeadless(_0x226b1e[_0x38b142(0x1ba)]);break;case'getStartingBalances':getStartingBalances();break;case'placeOrder':placeOrder(_0x226b1e[_0x38b142(0x1ba)]);break;case _0x38b142(0x2ab):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x44c34a=_0xea94;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x44c34a(0x1e1)],config[_0x44c34a(0x214)]);let _0x524297=await loadSymbols();_0x524297&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x481e1e,_0x225a36){const _0x5810c6=_0xea94,_0x5a263e=ccxt[config['exchange']];let _0xeb006a;switch(config[_0x5810c6(0x1b3)]){case _0x5810c6(0x250):_0xeb006a=_0x5810c6(0x29c);break;case _0x5810c6(0x1fa):_0xeb006a='wss://stream.binance.us:9443';break;default:_0xeb006a=_0x5810c6(0x29c);}exchange=new _0x5a263e({'apiKey':_0x481e1e,'secret':_0x225a36,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x481e1e,'api_secret':_0x225a36,'beautify':!![],'wsUrl':_0xeb006a},logger),config['exchange']==_0x5810c6(0x1fa)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x5810c6(0x23b)},'usd':{'coin':_0x5810c6(0x215),'symbol':_0x5810c6(0x297)}});}async function loadSymbols(){const _0x18b07e=_0xea94;let _0x43cd9f;try{markets=await exchange[_0x18b07e(0x287)]();const _0x5469e6=[_0x18b07e(0x1fe),_0x18b07e(0x219),_0x18b07e(0x2b5)];allSymbols=exchange['symbols'][_0x18b07e(0x25b)](_0x2349c3=>{const _0x239107=_0x18b07e;let _0x7c7866=![];return _0x5469e6[_0x239107(0x2a4)](_0x1a1b3c=>{const _0x44804c=_0x239107;if(_0x2349c3[_0x44804c(0x239)](_0x1a1b3c))_0x7c7866=!![];}),!_0x7c7866;}),_0x43cd9f=!![];}catch(_0x5a93be){await handleError(_0x5a93be,_0x18b07e(0x1b8)),_0x43cd9f=![];}return _0x43cd9f;}async function initbot(){const _0x2c9ced=_0xea94;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3cac9e=dbCoinResults[_0x2c9ced(0x265)](_0x2c9ced(0x1f6))['value']();if(_0x3cac9e[_0x2c9ced(0x291)]==0x0)await resetCoinResults();}async function initclient(){const _0x491302=_0xea94;proxyEmit(_0x491302(0x1c7),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x43adb1=_0xea94;wsinitialized=![];ws1&&(ws1[_0x43adb1(0x2a4)](_0x171571=>{const _0x1380ca=_0x43adb1;try{wsClient[_0x1380ca(0x279)](_0x171571);}catch(_0x5154ef){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x523c02){}ws2=null;}}async function initws(){const _0x33992d=_0xea94;cleanws();let _0x36464b=[];currentCoins['forEach'](_0x26bcd1=>{const _0x1be952=_0x41bd;if(_0x26bcd1['coin']!=config[_0x1be952(0x1d0)])_0x36464b['push'](noslash(_0x26bcd1[_0x1be952(0x259)]));});if(!_0x36464b['includes'](stablecoins[_0x33992d(0x23d)][_0x33992d(0x1cb)]))_0x36464b[_0x33992d(0x1d7)](stablecoins['eur'][_0x33992d(0x1cb)]);if(!_0x36464b['includes'](stablecoins[_0x33992d(0x1c2)]['coin']))_0x36464b[_0x33992d(0x1d7)](stablecoins['usd'][_0x33992d(0x1cb)]);if(!_0x36464b['includes'](_0x33992d(0x25a)+config[_0x33992d(0x1d0)]))_0x36464b['push'](_0x33992d(0x25a)+config[_0x33992d(0x1d0)]);try{_0x36464b[_0x33992d(0x2a4)]((_0x3584be,_0x53007e)=>{const _0x356187=_0x33992d;ws1[_0x53007e]=wsClient[_0x356187(0x1c0)](_0x3584be,'1m');}),ws2=wsClient[_0x33992d(0x25f)](),wsClient['on'](_0x33992d(0x23c),_0x58c6ed=>{const _0x393508=_0x33992d;if(!Array[_0x393508(0x1fc)](_0x58c6ed)&&!_0x58c6ed[_0x393508(0x27f)][_0x393508(0x239)](_0x393508(0x2a3))){if(_0x58c6ed[_0x393508(0x23a)]===_0x393508(0x28d)){global[_0x393508(0x268)][_0x58c6ed['kline'][_0x393508(0x259)]]=_0x58c6ed[_0x393508(0x28d)][_0x393508(0x27a)];return;}}else{if(!Array['isArray'](_0x58c6ed)&&_0x58c6ed['wsKey']['includes'](_0x393508(0x2a3))){if(_0x58c6ed[_0x393508(0x1bf)]['includes'](_0x393508(0x209))){updateNumberCoins(_0x58c6ed);return;}}}}),wsClient['on'](_0x33992d(0x242),async _0xa92dcb=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x420621){await handleError(_0x420621,_0x33992d(0x244));}let _0x5cd2ec,_0x54e326=0x0;loading[_0x33992d(0x22b)]=[];let _0x5e29d5=0x0;currentCoins[_0x33992d(0x2a4)](_0x28b54d=>{const _0x5d7f8b=_0x33992d;if(_0x28b54d[_0x5d7f8b(0x1cb)]!=config[_0x5d7f8b(0x1d0)])loading[_0x5d7f8b(0x22b)][_0x5d7f8b(0x1d7)](_0x28b54d[_0x5d7f8b(0x259)]);}),loadingCanceled=![];while(_0x5cd2ec!=currentCoins[_0x33992d(0x291)]-0x1){_0x5cd2ec=0x0,currentCoins['forEach'](_0x3c9bf3=>{const _0x3cb01e=_0x33992d;_0x3c9bf3[_0x3cb01e(0x1cb)]!=config['basecoin']&&global[_0x3cb01e(0x268)][noslash(_0x3c9bf3[_0x3cb01e(0x259)])]&&(loading[_0x3cb01e(0x22b)]=loading['remainingSymbols'][_0x3cb01e(0x25b)](_0x14caf2=>_0x14caf2!=_0x3c9bf3[_0x3cb01e(0x259)]),_0x5cd2ec++);}),loading[_0x33992d(0x234)]=Math['round'](_0x5cd2ec/(currentCoins[_0x33992d(0x291)]-0x1)*0x64);_0x5e29d5>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x33992d(0x29e)]=!![],emitLoadingProgress();break;}else _0x5cd2ec!=_0x54e326&&(_0x54e326=_0x5cd2ec,emitLoadingProgress()),_0x5e29d5++,await sleep(0xc8);}if(_0x5cd2ec==currentCoins[_0x33992d(0x291)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x43d260=_0xea94;let _0x57f69d=0x0,_0x13d98d=0x0;try{_0x57f69d=global['ticker'][stablecoins['eur'][_0x43d260(0x1cb)]],_0x13d98d=global[_0x43d260(0x268)][stablecoins[_0x43d260(0x1c2)][_0x43d260(0x1cb)]];}catch(_0x51a48a){await handleError(_0x51a48a,'getFiat()');}return{'eur':Number(_0x57f69d),'usd':Number(_0x13d98d)};}async function setStartDatePerformance(_0x5d6534){const _0x4499b4=_0xea94,_0x57f63b=fns['format'](new Date(_0x5d6534[_0x4499b4(0x260)]),'yyyy/MM/dd');let _0x111d6f=[];_0x111d6f[stablecoins['eur']['coin']]=await getCloses(stablecoins[_0x4499b4(0x23d)][_0x4499b4(0x259)],new Date(_0x5d6534[_0x4499b4(0x260)]),0x1),_0x111d6f[stablecoins[_0x4499b4(0x1c2)][_0x4499b4(0x1cb)]]=await getCloses(stablecoins['usd'][_0x4499b4(0x259)],new Date(_0x5d6534[_0x4499b4(0x260)]),0x1);let _0x8037ea,_0x47ae7a=[];_0x5d6534['portfolio']['forEach'](_0x2b0377=>{const _0x4355d5=_0x4499b4;!_0x2b0377[_0x4355d5(0x1db)]&&_0x47ae7a['push']({'coin':_0x2b0377[_0x4355d5(0x1cb)],'number':_0x2b0377[_0x4355d5(0x1ff)],'price':_0x2b0377[_0x4355d5(0x1c1)]});}),_0x8037ea={'date':_0x57f63b,'eur':_0x111d6f[stablecoins['eur']['coin']][0x0],'usd':_0x111d6f[stablecoins[_0x4499b4(0x1c2)]['coin']][0x0],'coins':_0x47ae7a};let _0x32188e=dbPerformance[_0x4499b4(0x265)]('data')[_0x4499b4(0x28e)]({'date':_0x57f63b})[_0x4499b4(0x237)]();_0x32188e?dbPerformance[_0x4499b4(0x265)](_0x4499b4(0x1de))[_0x4499b4(0x28e)]({'date':_0x57f63b})['assign'](_0x8037ea)[_0x4499b4(0x1da)]():dbPerformance['get'](_0x4499b4(0x1de))[_0x4499b4(0x1d7)](_0x8037ea)[_0x4499b4(0x1da)](),_0x32188e=dbPerformance[_0x4499b4(0x265)](_0x4499b4(0x1de))[_0x4499b4(0x256)](_0x4499b4(0x1b1))[_0x4499b4(0x237)](),_0x32188e[_0x4499b4(0x2a4)](_0x19caa8=>{const _0x2d4eb8=_0x4499b4;_0x19caa8[_0x2d4eb8(0x1b1)]<_0x57f63b&&dbPerformance[_0x2d4eb8(0x265)]('data')[_0x2d4eb8(0x22f)]({'date':_0x19caa8[_0x2d4eb8(0x1b1)]})[_0x2d4eb8(0x1da)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x5d0da9){const _0x135292=_0xea94;let _0x19c7ee,_0x276384=[];logHistory(_0x135292(0x2a7),_0x135292(0x1dc)),_0x5d0da9[_0x135292(0x1d1)][_0x135292(0x2a4)](_0x1e76fe=>{const _0x53d59b=_0x135292;if(_0x1e76fe[_0x53d59b(0x1cb)]!=config['basecoin']&&!_0x1e76fe[_0x53d59b(0x1db)])_0x276384[_0x53d59b(0x1d7)]({'coin':_0x1e76fe['coin'],'symbol':_0x1e76fe[_0x53d59b(0x259)]});});let _0x46dd1c=[];try{const _0x145ec2=fns[_0x135292(0x1c9)](fns[_0x135292(0x284)](_0x5d0da9['startdate'][_0x135292(0x22c)](/\//g,'-')),_0x135292(0x232));for(const _0x3c8c2b of _0x276384){if(_0x3c8c2b[_0x135292(0x1cb)]!=config[_0x135292(0x1d0)])_0x19c7ee=await exchange[_0x135292(0x1e3)](_0x3c8c2b['symbol'],Date[_0x135292(0x1d3)](_0x145ec2));_0x19c7ee[_0x135292(0x2a4)](_0x3e2652=>{const _0x2684bb=_0x135292,_0x3ee60a=_0x3c8c2b['symbol'][_0x2684bb(0x239)](config[_0x2684bb(0x1d0)]+'/'),_0x4a94c2=fns['format'](fns[_0x2684bb(0x284)](_0x3e2652[_0x2684bb(0x2a6)]),_0x2684bb(0x1bd)),_0x42685e=fns[_0x2684bb(0x1c9)](fns[_0x2684bb(0x284)](_0x3e2652[_0x2684bb(0x2a6)]),_0x2684bb(0x2b2));let _0x2b5e66;if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x293)&&_0x3ee60a==![])_0x2b5e66=_0x3e2652[_0x2684bb(0x26a)];if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x293)&&_0x3ee60a==!![])_0x2b5e66=-_0x3e2652[_0x2684bb(0x26a)]*_0x3e2652[_0x2684bb(0x2b8)];if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x1d8)&&_0x3ee60a==![])_0x2b5e66=-_0x3e2652[_0x2684bb(0x26a)];if(_0x3e2652[_0x2684bb(0x28b)]=='sell'&&_0x3ee60a==!![])_0x2b5e66=_0x3e2652['amount']*_0x3e2652[_0x2684bb(0x2b8)];_0x46dd1c[_0x2684bb(0x1d7)]({'timestamp':_0x4a94c2,'date':_0x42685e,'coin':_0x3c8c2b[_0x2684bb(0x1cb)],'symbol':_0x3c8c2b[_0x2684bb(0x259)],'type':_0x3e2652[_0x2684bb(0x28a)],'side':_0x3e2652[_0x2684bb(0x28b)],'reverse':_0x3ee60a,'amount':formatResult(_0x3e2652[_0x2684bb(0x1d9)],0x8),'filled':formatResult(_0x3e2652[_0x2684bb(0x1d9)],0x8),'coinamount':formatResult(_0x2b5e66,0x8),'price':formatResult(_0x3e2652[_0x2684bb(0x2b8)],0x8)});let _0x3f7dea;if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x293)&&_0x3ee60a==![])_0x3f7dea=-_0x3e2652[_0x2684bb(0x26a)]*_0x3e2652['price'];if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x293)&&_0x3ee60a==!![])_0x3f7dea=_0x3e2652[_0x2684bb(0x26a)];if(_0x3e2652[_0x2684bb(0x28b)]==_0x2684bb(0x1d8)&&_0x3ee60a==![])_0x3f7dea=_0x3e2652[_0x2684bb(0x26a)]*_0x3e2652['price'];if(_0x3e2652[_0x2684bb(0x28b)]=='sell'&&_0x3ee60a==!![])_0x3f7dea=-_0x3e2652[_0x2684bb(0x26a)];_0x46dd1c[_0x2684bb(0x1d7)]({'date':_0x42685e,'coin':config[_0x2684bb(0x1d0)],'coinamount':formatResult(_0x3f7dea,0x8)});});}_0x46dd1c[_0x135292(0x200)]((_0x27e6bd,_0x169684)=>_0x27e6bd['timestamp']>_0x169684['timestamp']?0x1:_0x169684[_0x135292(0x27d)]>_0x27e6bd[_0x135292(0x27d)]?-0x1:0x0),dbLogs[_0x135292(0x265)](_0x135292(0x203))['remove']()[_0x135292(0x1da)](),_0x46dd1c['forEach'](_0x1ba6c6=>{const _0x29cea0=_0x135292;let _0x4cfc97;_0x1ba6c6[_0x29cea0(0x1cb)]!=config[_0x29cea0(0x1d0)]&&(_0x4cfc97={'time':_0x1ba6c6[_0x29cea0(0x27d)],'type':_0x29cea0(0x21b),'event':_0x29cea0(0x1ec)+_0x1ba6c6[_0x29cea0(0x259)]+'\x20'+_0x1ba6c6[_0x29cea0(0x28b)]+'\x20#'+_0x1ba6c6['amount']+'\x20@'+_0x1ba6c6['price']},dbLogs[_0x29cea0(0x265)]('logs')[_0x29cea0(0x1d7)](_0x4cfc97)[_0x29cea0(0x1da)]());});const _0xf7f38b=fns[_0x135292(0x252)]({'start':new Date(_0x5d0da9[_0x135292(0x260)]),'end':new Date()})[_0x135292(0x1b0)](_0x7ff4=>fns[_0x135292(0x1c9)](_0x7ff4,'yyyy/MM/dd'));let _0x92815f=[];_0x5d0da9[_0x135292(0x1d1)][_0x135292(0x2a4)](_0x3b95a4=>{const _0x376886=_0x135292;if(!_0x3b95a4[_0x376886(0x1db)]){_0x92815f[_0x3b95a4[_0x376886(0x1cb)]]=[];let _0x2df498=_0x3b95a4[_0x376886(0x1ff)];_0xf7f38b[_0x376886(0x2a4)]((_0x23116f,_0x345d83)=>{const _0x1edc44=_0x376886;let _0x435fe0=_0x46dd1c[_0x1edc44(0x25b)](_0x5331fe=>_0x5331fe[_0x1edc44(0x1cb)]==_0x3b95a4[_0x1edc44(0x1cb)]&&_0x5331fe['date']==_0x23116f);if(_0x435fe0[_0x1edc44(0x291)]!=0x0){let _0x24c983=_0x435fe0[_0x1edc44(0x21e)]((_0x2c6427,_0x21ecea)=>{const _0x157a05=_0x1edc44;return _0x2c6427+=_0x21ecea[_0x157a05(0x240)],_0x2c6427;},0x0);_0x2df498+=_0x24c983;}_0x92815f[_0x3b95a4[_0x1edc44(0x1cb)]][_0x23116f]=_0x2df498;});}});const _0x5b46b7=[..._0x276384];_0x5b46b7[_0x135292(0x1d7)]({'coin':stablecoins[_0x135292(0x23d)][_0x135292(0x1cb)],'symbol':stablecoins[_0x135292(0x23d)][_0x135292(0x259)]}),_0x5b46b7[_0x135292(0x1d7)]({'coin':stablecoins[_0x135292(0x1c2)][_0x135292(0x1cb)],'symbol':stablecoins['usd'][_0x135292(0x259)]});let _0x1fa75a=[];for(const _0x4fab18 of _0x5b46b7){_0x1fa75a[_0x4fab18[_0x135292(0x1cb)]]=await getCloses(_0x4fab18['symbol'],new Date(_0x5d0da9[_0x135292(0x260)]));}dbPerformance[_0x135292(0x265)]('data')[_0x135292(0x22f)]()[_0x135292(0x1da)](),_0xf7f38b[_0x135292(0x2a4)]((_0x5c8601,_0x14f66e)=>{const _0x21a131=_0x135292;let _0x1c68dc,_0xfbdc88=[];_0x14f66e==0x0?(_0x5d0da9[_0x21a131(0x1d1)][_0x21a131(0x2a4)](_0x67e84d=>{const _0x328af3=_0x21a131;!_0x67e84d[_0x328af3(0x1db)]&&_0xfbdc88[_0x328af3(0x1d7)]({'coin':_0x67e84d[_0x328af3(0x1cb)],'number':_0x67e84d[_0x328af3(0x1ff)],'price':_0x67e84d[_0x328af3(0x1c1)]});}),_0x1c68dc={'date':_0x5c8601,'eur':_0x1fa75a[stablecoins[_0x21a131(0x23d)]['coin']][_0x14f66e],'usd':_0x1fa75a[stablecoins[_0x21a131(0x1c2)][_0x21a131(0x1cb)]][_0x14f66e],'coins':_0xfbdc88}):(_0x5d0da9[_0x21a131(0x1d1)][_0x21a131(0x2a4)](_0x4404c5=>{const _0x23faa3=_0x21a131;!_0x4404c5[_0x23faa3(0x1db)]&&_0xfbdc88[_0x23faa3(0x1d7)]({'coin':_0x4404c5[_0x23faa3(0x1cb)],'number':_0x92815f[_0x4404c5[_0x23faa3(0x1cb)]][_0x5c8601],'price':_0x4404c5['coin']==config['basecoin']?0x1:_0x1fa75a[_0x4404c5[_0x23faa3(0x1cb)]][_0x14f66e]});}),_0x1c68dc={'date':_0x5c8601,'eur':_0x1fa75a[stablecoins['eur'][_0x21a131(0x1cb)]][_0x14f66e],'usd':_0x1fa75a[stablecoins[_0x21a131(0x1c2)][_0x21a131(0x1cb)]][_0x14f66e],'coins':_0xfbdc88}),dbPerformance['get'](_0x21a131(0x1de))[_0x21a131(0x1d7)](_0x1c68dc)[_0x21a131(0x1da)]();}),emitPerformance(),await resetCoinResults();for(let _0x25cec4 of _0x46dd1c){_0x25cec4[_0x135292(0x1cb)]!=config[_0x135292(0x1d0)]&&await updateCoinResults(_0x25cec4);}logHistory(_0x135292(0x2a7),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x5ec850){await handleError(_0x5ec850,_0x135292(0x243));}}async function getCloses(_0x4fd74b,_0x41723c,_0x556b2c=undefined){const _0x377147=_0xea94,_0x105ac5='1d';let _0x34ddef,_0x23dab8;const _0x3e2646=fns[_0x377147(0x2ba)](new Date(),_0x41723c)+0x1;try{const _0x4376ae=exchange[_0x377147(0x1cd)]()-_0x3e2646*0x18*0xe10*0x3e8;_0x34ddef=await exchange[_0x377147(0x220)](_0x4fd74b,_0x105ac5,_0x4376ae,_0x556b2c),_0x23dab8=await exchange[_0x377147(0x248)](_0x4fd74b);}catch(_0x48aa89){await handleError(_0x48aa89,_0x377147(0x286));}let _0x4329c5=ohlcvToCloses(_0x34ddef);return _0x4329c5[_0x377147(0x1d7)](_0x23dab8[_0x4fd74b][_0x377147(0x29d)]),_0x4329c5;}function ohlcvToCloses(_0x132bc0){const _0x2ef8ac=_0xea94;let _0x2c2859=[];return _0x132bc0[_0x2ef8ac(0x2a4)](function(_0x70bf33){const _0x2a2043=_0x2ef8ac;_0x2c2859[_0x2a2043(0x1d7)](_0x70bf33[0x4]);}),_0x2c2859;}function getConfiguration(_0x10af45){const _0x1c5db6=_0xea94;let _0x1916b7=dbConfig[_0x1c5db6(0x265)]('bot')[_0x1c5db6(0x28e)]({'botID':_0x10af45})[_0x1c5db6(0x237)]();if(_0x1916b7){let _0x40ed45=![];!_0x1916b7[_0x1c5db6(0x1b3)]&&(_0x1916b7={..._0x1916b7,'exchange':'binance'},_0x40ed45=!![]),!_0x1916b7[_0x1c5db6(0x1d0)]&&(_0x1916b7={..._0x1916b7,'basecoin':_0x1c5db6(0x217)},_0x40ed45=!![]),!_0x1916b7[_0x1c5db6(0x1e6)]&&(_0x1916b7={..._0x1916b7,'ordertype':_0x1c5db6(0x296)},_0x40ed45=!![]),!_0x1916b7[_0x1c5db6(0x264)]&&(_0x1916b7={..._0x1916b7,'timeout':0x14},_0x40ed45=!![]),!_0x1916b7[_0x1c5db6(0x1ed)]&&(_0x1916b7={..._0x1916b7,'emojibuy':''},_0x40ed45=!![]),!_0x1916b7[_0x1c5db6(0x272)]&&(_0x1916b7={..._0x1916b7,'emojisell':''},_0x40ed45=!![]),!_0x1916b7['showname']&&(_0x1916b7={..._0x1916b7,'showname':![]},_0x40ed45=!![]),_0x40ed45&&(_0x1916b7={'botID':_0x1916b7[_0x1c5db6(0x1df)],'exchange':_0x1916b7[_0x1c5db6(0x1b3)],'apiKey':_0x1916b7[_0x1c5db6(0x1e1)],'apiSecret':_0x1916b7['apiSecret'],'basecoin':_0x1916b7[_0x1c5db6(0x1d0)],'botname':_0x1916b7[_0x1c5db6(0x24a)],'showname':_0x1916b7[_0x1c5db6(0x262)],'threshold':_0x1916b7[_0x1c5db6(0x1bc)],'ordertype':_0x1916b7[_0x1c5db6(0x1e6)],'timeout':_0x1916b7[_0x1c5db6(0x264)],'startdate':_0x1916b7[_0x1c5db6(0x260)],'recreate':_0x1916b7[_0x1c5db6(0x266)],'timeshift':_0x1916b7[_0x1c5db6(0x294)],'headless':_0x1916b7[_0x1c5db6(0x1f2)],'cooldown':_0x1916b7[_0x1c5db6(0x212)],'emojibuy':_0x1916b7[_0x1c5db6(0x1ed)],'emojisell':_0x1916b7['emojisell'],'portfolio':_0x1916b7[_0x1c5db6(0x1d1)]},dbConfig[_0x1c5db6(0x265)](_0x1c5db6(0x1ef))[_0x1c5db6(0x22f)]()[_0x1c5db6(0x1da)](),dbConfig[_0x1c5db6(0x265)]('bot')[_0x1c5db6(0x1d7)](_0x1916b7)[_0x1c5db6(0x1da)]());}else _0x1916b7={'botID':_0x10af45,'exchange':_0x1c5db6(0x250),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1c5db6(0x246)+_0x10af45,'showname':![],'threshold':'3','ordertype':_0x1c5db6(0x296),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1c5db6(0x294)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1916b7;}function emittedConfiguration(){const _0x1c467a=_0xea94;let _0x26c19f;return config[_0x1c467a(0x1e1)]==''?_0x26c19f=config:_0x26c19f={...config,'apiKey':_0x1c467a(0x1fd),'apiSecret':_0x1c467a(0x1fd)},_0x26c19f;}function getSettings(){const _0x289536=_0xea94;return dbSettings[_0x289536(0x265)](_0x289536(0x236))[_0x289536(0x237)]();}function getSecure(){const _0x48ed8d=_0xea94;return dbSecure[_0x48ed8d(0x265)](_0x48ed8d(0x202))[_0x48ed8d(0x237)]()||{};}function updateTimeshift(_0x46d106){const _0x5d54c0=_0xea94;let _0x24f670=dbConfig[_0x5d54c0(0x265)](_0x5d54c0(0x1ef))['find']({'botID':botID})['value']();_0x24f670&&dbConfig['get']('bot')[_0x5d54c0(0x28e)]({'botID':botID})[_0x5d54c0(0x2b4)]({'timeshift':_0x46d106})[_0x5d54c0(0x1da)](),config[_0x5d54c0(0x294)]=_0x46d106,proxyEmit(_0x5d54c0(0x1c7),emittedConfiguration());}async function storeConfiguration(_0xa7bc22){const _0x450cc9=_0xea94;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x44b8c3=dbConfig[_0x450cc9(0x265)](_0x450cc9(0x1ef))[_0x450cc9(0x28e)]({'botID':botID})[_0x450cc9(0x237)]();_0xa7bc22={..._0xa7bc22,'apiKey':crypt[_0x450cc9(0x1f8)](secure['privateKey'],_0xa7bc22[_0x450cc9(0x1e1)])[_0x450cc9(0x211)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0xa7bc22[_0x450cc9(0x214)])[_0x450cc9(0x211)]};if(_0x44b8c3){if(_0xa7bc22['apiKey']=='************')_0xa7bc22[_0x450cc9(0x1e1)]=config[_0x450cc9(0x1e1)];if(_0xa7bc22['apiSecret']==_0x450cc9(0x1fd))_0xa7bc22[_0x450cc9(0x214)]=config[_0x450cc9(0x214)];dbConfig['get'](_0x450cc9(0x1ef))[_0x450cc9(0x28e)]({'botID':botID})[_0x450cc9(0x2b4)](_0xa7bc22)[_0x450cc9(0x1da)]();}else dbConfig[_0x450cc9(0x265)](_0x450cc9(0x1ef))[_0x450cc9(0x1d7)](_0xa7bc22)['write'](),process[_0x450cc9(0x274)]({'status':'enabled','live':_0x450cc9(0x282)},_0x50970b=>{});config={..._0xa7bc22};if(config[_0x450cc9(0x266)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x450cc9(0x274)]({'botname':_0xa7bc22[_0x450cc9(0x24a)]},_0x14292e=>{}),proxyEmit(_0x450cc9(0x1e5)),reset();}async function storeHeadless(_0x506358){const _0x5ed1f4=_0xea94,_0x4b3c90={...config,'headless':_0x506358[_0x5ed1f4(0x1f2)]};let _0x133e14=dbConfig['get'](_0x5ed1f4(0x1ef))[_0x5ed1f4(0x28e)]({'botID':botID})['value']();_0x133e14&&dbConfig[_0x5ed1f4(0x265)](_0x5ed1f4(0x1ef))[_0x5ed1f4(0x28e)]({'botID':botID})[_0x5ed1f4(0x2b4)](_0x4b3c90)[_0x5ed1f4(0x1da)](),config={..._0x4b3c90},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x419f57){return _0x419f57['replace']('/','');}function updateNumberCoins(_0x21d637){const _0x11f9be=_0xea94;_0x21d637[_0x11f9be(0x23a)]&&_0x21d637[_0x11f9be(0x23a)]==_0x11f9be(0x2aa)&&_0x21d637[_0x11f9be(0x1ca)][_0x11f9be(0x2a4)](_0x216bc6=>{const _0x6bbefd=_0x11f9be;let _0x5f454c=currentCoins['find'](_0x3f2dd0=>_0x3f2dd0[_0x6bbefd(0x1cb)]==_0x216bc6['asset']),_0x25ed77=config['portfolio'][_0x6bbefd(0x28e)](_0x42474f=>_0x42474f[_0x6bbefd(0x1cb)]==_0x216bc6[_0x6bbefd(0x1e0)]);if(_0x5f454c&&_0x25ed77)_0x5f454c['number']=Math[_0x6bbefd(0x218)](Number(_0x216bc6[_0x6bbefd(0x230)])+(_0x25ed77[_0x6bbefd(0x238)]||0x0),0x0);});if(_0x21d637[_0x11f9be(0x23a)]&&_0x21d637[_0x11f9be(0x23a)]=='executionReport'){if(_0x21d637[_0x11f9be(0x1eb)]=='LIMIT'&&_0x21d637['orderStatus']==_0x11f9be(0x241)){if(lastOrders)lastOrders[_0x11f9be(0x2a4)](_0x3ad9b1=>{const _0x5d7a68=_0x11f9be;if(_0x3ad9b1['orderId']==_0x21d637['orderId']){if(_0x3ad9b1[_0x5d7a68(0x1af)])_0x3ad9b1[_0x5d7a68(0x1d9)]=_0x21d637[_0x5d7a68(0x2b3)]*_0x3ad9b1['price'];else _0x3ad9b1['filled']=_0x21d637['accumulatedQuantity'];}});}}}async function getCoins(_0xc0cf38=!![],_0xa33b56=config[_0xea94(0x1d0)]){const _0xf19525=_0xea94;let _0x3b5656,_0x45e009=[],_0x26a666=[],_0x39a3b6=[];try{_0x3b5656=await exchange[_0xf19525(0x1ee)](),mybalances=_0x3b5656['total'];if(!_0xc0cf38)for(const [_0x266c72,_0x2acbb9]of Object['entries'](mybalances)){_0x39a3b6['push'](_0x266c72);}else config['portfolio']['forEach'](_0x188bf6=>{const _0x3d4d2f=_0xf19525;if(!_0x188bf6[_0x3d4d2f(0x1db)])_0x39a3b6[_0x3d4d2f(0x1d7)](_0x188bf6['coin']);});if(_0xa33b56=='')for(const [_0xa80c6f,_0x18ae49]of Object[_0xf19525(0x21f)](mybalances)){_0x18ae49[_0xf19525(0x2b1)]()!=0x0&&_0x26a666['push']({'coin':_0xa80c6f});}else for(const [_0x29cff7,_0xe7d7b3]of Object[_0xf19525(0x21f)](mybalances)){if(_0x39a3b6[_0xf19525(0x239)](_0x29cff7)){const _0x2929b4=config[_0xf19525(0x1d1)]['find'](_0x3d3f1d=>_0x3d3f1d[_0xf19525(0x1cb)]==_0x29cff7);if((_0xe7d7b3[_0xf19525(0x2b1)]()!=0x0||_0x2929b4)&&(allSymbols[_0xf19525(0x239)](_0x29cff7+'/'+_0xa33b56)||_0x29cff7==_0xa33b56))_0x26a666['push']({'coin':_0x29cff7,'symbol':_0x29cff7+'/'+_0xa33b56,'reverse':![],'number':Math[_0xf19525(0x218)](_0xe7d7b3+(_0x2929b4&&_0x2929b4[_0xf19525(0x238)]||0x0),0x0)}),_0x29cff7!=_0xa33b56&&_0x45e009[_0xf19525(0x1d7)](_0x29cff7+'/'+_0xa33b56);else(_0xe7d7b3[_0xf19525(0x2b1)]()!=0x0||_0x2929b4)&&allSymbols[_0xf19525(0x239)](_0xa33b56+'/'+_0x29cff7)&&(_0x26a666[_0xf19525(0x1d7)]({'coin':_0x29cff7,'symbol':_0xa33b56+'/'+_0x29cff7,'reverse':!![],'number':Math[_0xf19525(0x218)](_0xe7d7b3+(_0x2929b4&&_0x2929b4['offset']||0x0),0x0)}),_0x29cff7!=_0xa33b56&&_0x45e009[_0xf19525(0x1d7)](_0xa33b56+'/'+_0x29cff7));}}}catch(_0x4b86ad){if(!_0xc0cf38){if(_0x4b86ad[_0xf19525(0x2b1)]()[_0xf19525(0x239)]('API-key\x20format\x20invalid'))return logHistory(_0xf19525(0x24c),_0xf19525(0x233)),![];else{if(_0x4b86ad['toString']()[_0xf19525(0x239)](_0xf19525(0x1dd)))return logHistory(_0xf19525(0x24c),_0xf19525(0x277)),![];else{if(_0x4b86ad[_0xf19525(0x2b1)]()[_0xf19525(0x239)](_0xf19525(0x2bd)))return logHistory(_0xf19525(0x24c),_0xf19525(0x289)),![];else await handleError(_0x4b86ad,'getCoins()');}}}else await handleError(_0x4b86ad,'getCoins()');}return _0x26a666;}async function getPortfolio(_0x11fef1){const _0x56bca8=_0xea94;let _0x387ca7=[],_0x12d5d4=[],_0x5fa920,_0x14af73=[],_0x1a9a06,_0x4675fd;_0x11fef1[_0x56bca8(0x1e1)]===_0x56bca8(0x1fd)||_0x11fef1[_0x56bca8(0x214)]===_0x56bca8(0x1fd)?(_0x1a9a06=config[_0x56bca8(0x1e1)],_0x4675fd=config[_0x56bca8(0x214)]):(_0x1a9a06=_0x11fef1[_0x56bca8(0x1e1)],_0x4675fd=_0x11fef1[_0x56bca8(0x214)]);await initExchange(_0x1a9a06,_0x4675fd);let _0x2fddcb=await loadSymbols();if(_0x2fddcb){_0x14af73=await getCoins(![],_0x11fef1[_0x56bca8(0x1d0)]);if(_0x14af73===![])proxyEmit(_0x56bca8(0x1d1),![]);else{if(_0x11fef1['basecoin']=='')proxyEmit(_0x56bca8(0x1d1),_0x14af73);else{_0x14af73[_0x56bca8(0x2a4)](_0x54315d=>{const _0x1270c8=_0x56bca8;_0x387ca7[_0x1270c8(0x1d7)](_0x54315d[_0x1270c8(0x259)]);});try{_0x12d5d4=await exchange[_0x56bca8(0x248)](_0x387ca7);}catch(_0x1c4eb9){await handleError(_0x1c4eb9,'getPortfolio()');}_0x14af73[_0x56bca8(0x2a4)](_0x18ae15=>{const _0x3abfe2=_0x56bca8;_0x18ae15['coin']!=_0x11fef1[_0x3abfe2(0x1d0)]?_0x5fa920=_0x18ae15[_0x3abfe2(0x1af)]?0x1/_0x12d5d4[_0x18ae15[_0x3abfe2(0x259)]]['last']:_0x12d5d4[_0x18ae15[_0x3abfe2(0x259)]][_0x3abfe2(0x29d)]:_0x5fa920=0x1,_0x18ae15[_0x3abfe2(0x2b8)]=formatResult(_0x5fa920,0x8);}),proxyEmit(_0x56bca8(0x1d1),_0x14af73);}}}else proxyEmit(_0x56bca8(0x1d1),![]);}function checkMinimums(_0x8f813f){const _0x4718b3=_0xea94;let _0x42bdb9=!![];const _0x4576bd=!_0x8f813f['reverse']?markets[_0x8f813f[_0x4718b3(0x259)]][_0x4718b3(0x1e9)][_0x4718b3(0x26a)][_0x4718b3(0x1cf)]:markets[_0x8f813f[_0x4718b3(0x259)]]['limits'][_0x4718b3(0x280)][_0x4718b3(0x1cf)],_0x5d2c9a=!_0x8f813f[_0x4718b3(0x1af)]?markets[_0x8f813f['symbol']][_0x4718b3(0x1e9)][_0x4718b3(0x280)][_0x4718b3(0x1cf)]:markets[_0x8f813f[_0x4718b3(0x259)]]['limits'][_0x4718b3(0x26a)][_0x4718b3(0x1cf)];if(Math[_0x4718b3(0x225)](_0x8f813f['trade'])<_0x4576bd)_0x42bdb9=![];if(Math[_0x4718b3(0x225)](_0x8f813f[_0x4718b3(0x263)])*_0x8f813f[_0x4718b3(0x29d)]<_0x5d2c9a)_0x42bdb9=![];let _0x4b2ee5=config['portfolio'][_0x4718b3(0x28e)](_0x5caf59=>_0x5caf59['coin']==_0x8f813f[_0x4718b3(0x1cb)]);if(Math[_0x4718b3(0x225)](_0x8f813f[_0x4718b3(0x263)])>_0x8f813f['number']-_0x4b2ee5['offset'])_0x42bdb9=![];return _0x42bdb9;}function _0x41bd(_0xe3696a,_0x4fa0c){const _0x24994d=_0x1d32();return _0x41bd=function(_0x38fb1b,_0x22bda3){_0x38fb1b=_0x38fb1b-0x1af;let _0x1d320a=_0x24994d[_0x38fb1b];return _0x1d320a;},_0x41bd(_0xe3696a,_0x4fa0c);}async function getBalances(){const _0x26b599=_0xea94;let _0x3a2016=0x0,_0x5d5c3a;const _0x4f7ed1=config[_0x26b599(0x1bc)];currentCoins['forEach'](_0x504a1d=>{const _0x5acf01=_0x26b599;if(_0x504a1d[_0x5acf01(0x1cb)]!=config[_0x5acf01(0x1d0)]){let _0x5912d7=global['ticker'][noslash(_0x504a1d[_0x5acf01(0x259)])];_0x5d5c3a=_0x504a1d['reverse']?0x1/_0x5912d7:_0x5912d7;}else _0x5d5c3a=0x1;let _0x34a1fb=_0x504a1d[_0x5acf01(0x1b9)]*_0x5d5c3a;_0x3a2016+=_0x34a1fb,_0x504a1d[_0x5acf01(0x29d)]=formatResult(Number(_0x5d5c3a),0x8),_0x504a1d[_0x5acf01(0x237)]=_0x34a1fb;}),currentCoins[_0x26b599(0x2a4)](_0x1810ce=>{const _0x498c0c=_0x26b599;let _0x407c7c=config[_0x498c0c(0x1d1)][_0x498c0c(0x28e)](_0x5aef22=>_0x5aef22[_0x498c0c(0x1cb)]==_0x1810ce['coin']),_0x34deba=Number(_0x407c7c[_0x498c0c(0x28c)]),_0x6efa55=_0x1810ce[_0x498c0c(0x237)]/_0x3a2016*0x64,_0x5934f9=_0x34deba*_0x3a2016/0x64/_0x1810ce[_0x498c0c(0x29d)]-_0x1810ce['number'];_0x1810ce[_0x498c0c(0x28c)]=formatResult(_0x6efa55,0x3),_0x1810ce[_0x498c0c(0x201)]=formatResult(_0x34deba,0x3),_0x1810ce[_0x498c0c(0x263)]=formatResult(_0x5934f9,0x8),_0x1810ce[_0x498c0c(0x28b)]='',_0x1810ce[_0x498c0c(0x26c)]='';if(_0x1810ce['coin']!=config[_0x498c0c(0x1d0)]){if(_0x1810ce[_0x498c0c(0x28c)]>_0x34deba)_0x1810ce['side']=_0x498c0c(0x1d8),_0x1810ce[_0x498c0c(0x26c)]=checkMinimums(_0x1810ce);else _0x1810ce[_0x498c0c(0x28c)]<_0x34deba&&(_0x1810ce[_0x498c0c(0x28b)]=_0x498c0c(0x293),_0x1810ce[_0x498c0c(0x26c)]=checkMinimums(_0x1810ce));}_0x1810ce['delta']=_0x1810ce[_0x498c0c(0x28c)]/_0x1810ce[_0x498c0c(0x201)]-0x1;}),currentCoins[_0x26b599(0x200)]((_0x1e7f3a,_0xdc5f19)=>_0x1e7f3a[_0x26b599(0x20e)]<_0xdc5f19[_0x26b599(0x20e)]?0x1:_0xdc5f19[_0x26b599(0x20e)]<_0x1e7f3a[_0x26b599(0x20e)]?-0x1:0x0);const _0x45ec92=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x45ec92[_0x26b599(0x23d)],'usd':_0x45ec92[_0x26b599(0x1c2)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4f7ed1},proxyEmit(_0x26b599(0x1ca),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4f7ed1});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xbe6923=_0xea94;if(!lastBalances)return;let _0x44e32a=await getStartingBalances(![]),_0xa61394=[],_0x34d7e8;JSON[_0xbe6923(0x1d3)](lastBalances[_0xbe6923(0x1d1)])[_0xbe6923(0x2a4)](_0x32571a=>{const _0x1ea1b2=_0xbe6923;let _0x13d731={'coin':_0x32571a['coin'],'number':_0x32571a[_0x1ea1b2(0x1b9)],'price':_0x32571a['last']};_0xa61394[_0x1ea1b2(0x1d7)](_0x13d731);});const _0xa09ac2=await getFiat();_0x34d7e8={'date':lastBalances[_0xbe6923(0x1f9)][_0xbe6923(0x25e)]('\x20')[0x0],'eur':_0xa09ac2[_0xbe6923(0x23d)],'usd':_0xa09ac2[_0xbe6923(0x1c2)],'coins':_0xa61394};let _0x2fbab4=dbPerformance[_0xbe6923(0x265)](_0xbe6923(0x1de))[_0xbe6923(0x28e)]({'date':_0x34d7e8[_0xbe6923(0x1b1)]})[_0xbe6923(0x237)]();_0x2fbab4?dbPerformance[_0xbe6923(0x265)](_0xbe6923(0x1de))[_0xbe6923(0x28e)]({'date':_0x34d7e8[_0xbe6923(0x1b1)]})['assign'](_0x34d7e8)[_0xbe6923(0x1da)]():dbPerformance[_0xbe6923(0x265)](_0xbe6923(0x1de))[_0xbe6923(0x1d7)](_0x34d7e8)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x457a8a=_0xea94;if(dbPerformance[_0x457a8a(0x223)](_0x457a8a(0x1de))[_0x457a8a(0x237)]()){let _0x3f1685=dbPerformance[_0x457a8a(0x265)](_0x457a8a(0x1de))[_0x457a8a(0x256)](_0x457a8a(0x1b1))[_0x457a8a(0x237)]();proxyEmit(_0x457a8a(0x290),_0x3f1685),lastPerformanceEmitted=getDate();}else proxyEmit(_0x457a8a(0x290),[]);}async function getStartingBalances(_0x31fcbf=!![]){const _0x418c5c=_0xea94;let _0x296bc7=dbPerformance['get'](_0x418c5c(0x1de))[_0x418c5c(0x28e)]({'date':config[_0x418c5c(0x260)]})[_0x418c5c(0x237)]();config[_0x418c5c(0x1e1)]!=''&&!_0x296bc7&&(await setStartDatePerformance(config),_0x296bc7=dbPerformance[_0x418c5c(0x265)](_0x418c5c(0x1de))[_0x418c5c(0x28e)]({'date':config['startdate']})[_0x418c5c(0x237)]());if(config[_0x418c5c(0x1e1)]==''||!_0x296bc7)return{};let _0x5dc6f0=0x0,_0x5a23c0=0x0,_0x3c63d9=0x0,_0x4be22e=[],_0xd2079e=0x0;config[_0x418c5c(0x1d1)][_0x418c5c(0x2a4)](_0x3da693=>{const _0x16bb6c=_0x418c5c;if(!_0x3da693[_0x16bb6c(0x1db)]){_0x4be22e[_0xd2079e]={'coin':_0x3da693['coin'],'symbol':_0x3da693[_0x16bb6c(0x259)],'number':_0x3da693[_0x16bb6c(0x1ff)],'price':_0x3da693[_0x16bb6c(0x1c1)]},_0x5dc6f0+=_0x3da693[_0x16bb6c(0x1c1)]*_0x3da693[_0x16bb6c(0x1ff)];if(config[_0x16bb6c(0x1d0)]==_0x16bb6c(0x217))_0x5a23c0+=_0x3da693['startprice']*_0x3da693['startnumber']*_0x296bc7[_0x16bb6c(0x23d)],_0x3c63d9+=_0x3da693['startprice']*_0x3da693[_0x16bb6c(0x1ff)]*_0x296bc7['usd'];else{if(config[_0x16bb6c(0x1d0)]==_0x16bb6c(0x1c5)||config[_0x16bb6c(0x1d0)]=='USDT'||config[_0x16bb6c(0x1d0)]==_0x16bb6c(0x271))_0x5a23c0+=_0x3da693[_0x16bb6c(0x1c1)]*_0x3da693[_0x16bb6c(0x1ff)]*_0x296bc7[_0x16bb6c(0x23d)]/_0x296bc7['usd'],_0x3c63d9+=_0x3da693['startprice']*_0x3da693[_0x16bb6c(0x1ff)];else config[_0x16bb6c(0x1d0)]=='EUR'&&(_0x5a23c0+=_0x3da693['startprice']*_0x3da693['startnumber'],_0x3c63d9+=_0x3da693[_0x16bb6c(0x1c1)]*_0x3da693[_0x16bb6c(0x1ff)]*_0x296bc7[_0x16bb6c(0x1c2)]/_0x296bc7[_0x16bb6c(0x23d)]);}_0xd2079e++;}});let _0x4572f2={'basecoin':_0x5dc6f0,'eur':_0x5a23c0,'usd':_0x3c63d9,'coins':_0x4be22e};if(_0x31fcbf)proxyEmit(_0x418c5c(0x2a0),_0x4572f2);return _0x4572f2;}function headlessMode(_0x26b600){const _0xe5452f=_0xea94;let _0x11809a=_0x26b600[_0xe5452f(0x1d1)],_0x448301=_0x26b600['threshold'],_0x537804=[];for(let _0x4d90e0 of _0x11809a){if(_0x4d90e0[_0xe5452f(0x1cb)]!=config['basecoin']){if(_0x4d90e0[_0xe5452f(0x28c)]/_0x4d90e0[_0xe5452f(0x201)]-0x1>=_0x448301/0x64){if(_0x4d90e0[_0xe5452f(0x26c)])_0x537804[_0xe5452f(0x1d7)](_0x4d90e0);}else{if(_0x4d90e0[_0xe5452f(0x28c)]/_0x4d90e0['target']-0x1<=-_0x448301/0x64){if(_0x4d90e0[_0xe5452f(0x26c)])_0x537804['push'](_0x4d90e0);}}}}_0x537804[_0xe5452f(0x291)]>0x0&&placeOrder(_0x537804);}function symbolToCoin(_0x2dabc2){const _0x3a1eaa=_0xea94;let _0x380bd6;if(_0x2dabc2[_0x3a1eaa(0x239)]('/'+config[_0x3a1eaa(0x1d0)]))_0x380bd6=_0x2dabc2['replace']('/'+config[_0x3a1eaa(0x1d0)],'');if(_0x2dabc2[_0x3a1eaa(0x239)](config[_0x3a1eaa(0x1d0)]+'/'))_0x380bd6=_0x2dabc2[_0x3a1eaa(0x22c)](config[_0x3a1eaa(0x1d0)]+'/','');return _0x380bd6;}async function validateOrders(_0x84aa08=0x0){const _0x3be095=_0xea94;let _0xa7feec=[],_0x23e98a=config[_0x3be095(0x1e6)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3be095(0x264)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x3be095(0x2a4)](_0x9e4ba0=>{const _0xa65e3e=_0x3be095;let _0x4713cc=previousCoins[_0xa65e3e(0x28e)](_0x20fbb8=>_0x20fbb8[_0xa65e3e(0x1cb)]==symbolToCoin(_0x9e4ba0['symbol'])),_0x4cd3bf=currentCoins[_0xa65e3e(0x28e)](_0x3c8c06=>_0x3c8c06['coin']==symbolToCoin(_0x9e4ba0[_0xa65e3e(0x259)])),_0x5b55b4,_0x237996;_0x9e4ba0['side']==_0xa65e3e(0x293)&&!_0x9e4ba0[_0xa65e3e(0x1af)]||_0x9e4ba0[_0xa65e3e(0x28b)]==_0xa65e3e(0x1d8)&&_0x9e4ba0[_0xa65e3e(0x1af)]?(_0x5b55b4=_0x4713cc[_0xa65e3e(0x1b9)]+0.9*_0x9e4ba0[_0xa65e3e(0x1d9)],_0x237996=_0x4713cc['number']+1.1*_0x9e4ba0[_0xa65e3e(0x1d9)]):(_0x5b55b4=_0x4713cc['number']-1.1*_0x9e4ba0['filled'],_0x237996=_0x4713cc['number']-0.9*_0x9e4ba0['filled']);const _0x392525=_0x9e4ba0['filled']!=0x0&&_0x4cd3bf[_0xa65e3e(0x1b9)]>=_0x5b55b4&&_0x4cd3bf[_0xa65e3e(0x1b9)]<=_0x237996;_0xa7feec[_0xa65e3e(0x1d7)](_0x392525);if(_0x392525&&config['ordertype']!=_0xa65e3e(0x296)){if(_0x9e4ba0['reverse'])logHistory(_0xa65e3e(0x21b),_0xa65e3e(0x1be)+_0x9e4ba0[_0xa65e3e(0x259)]+'\x20'+_0x9e4ba0[_0xa65e3e(0x28b)]+'\x20#'+formatResult(_0x9e4ba0['filled']/_0x9e4ba0[_0xa65e3e(0x2b8)],0x8)+'\x20@'+formatResult(_0x9e4ba0[_0xa65e3e(0x2b8)],0x8));else logHistory('order',_0xa65e3e(0x1be)+_0x9e4ba0[_0xa65e3e(0x259)]+'\x20'+_0x9e4ba0[_0xa65e3e(0x28b)]+'\x20#'+formatResult(_0x9e4ba0['filled'],0x8)+'\x20@'+formatResult(_0x9e4ba0[_0xa65e3e(0x2b8)],0x8));}}),_0xa7feec[_0x3be095(0x2a4)]((_0x4e88c7,_0x32aab0)=>{const _0x18dde0=_0x3be095;if(_0x4e88c7)lastOrders[_0x18dde0(0x22d)](_0x32aab0,0x1);});if(_0x84aa08<_0x23e98a&&_0xa7feec[_0x3be095(0x239)](![])){if(_0x84aa08==0x0){config[_0x3be095(0x1e6)]==_0x3be095(0x296)?logHistory('error',_0x3be095(0x261)):logHistory('error',_0x3be095(0x245));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x84aa08);},0xa*0x3e8);}else{(_0x84aa08==0x1||_0x84aa08==Math[_0x3be095(0x22a)](_0x23e98a/0x2)||_0x84aa08==_0x23e98a-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x84aa08);},validateOrderInterval);}}else{lockOrders=![];if(_0x84aa08>0x0&&!_0xa7feec[_0x3be095(0x239)](![]))config[_0x3be095(0x1e6)]==_0x3be095(0x296)?logHistory(_0x3be095(0x2a7),_0x3be095(0x292)):logHistory(_0x3be095(0x2a7),_0x3be095(0x26b));else _0x84aa08>0x0&&_0xa7feec[_0x3be095(0x239)](![])&&(config[_0x3be095(0x1e6)]=='market'?logHistory(_0x3be095(0x2a7),_0x3be095(0x206)+Math[_0x3be095(0x22a)](_0x23e98a*validateOrderInterval/0xea60)+_0x3be095(0x2ac)):(lastOrders[_0x3be095(0x2a4)](async _0x192340=>{const _0x5c7eda=_0x3be095;try{const _0x1885d0=await exchange[_0x5c7eda(0x21c)](_0x192340[_0x5c7eda(0x23f)],_0x192340['symbol']);}catch(_0xe5704d){if(_0xe5704d[_0x5c7eda(0x2b1)]()[_0x5c7eda(0x239)]('OrderNotFound')){}else await handleError(_0xe5704d,_0x5c7eda(0x20d));}}),logHistory(_0x3be095(0x2a7),_0x3be095(0x2a8)+Math['round'](_0x23e98a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x187c38=_0xea94;dbCoinResults[_0x187c38(0x265)]('coins')[_0x187c38(0x22f)]()[_0x187c38(0x1da)]();let _0x38f984=await getStartingBalances(![]);_0x38f984['coins'][_0x187c38(0x2a4)](_0x5c79e5=>{const _0x4d41cb=_0x187c38,_0x1af6d1=_0x5c79e5['symbol'][_0x4d41cb(0x239)](config[_0x4d41cb(0x1d0)]+'/');if(_0x5c79e5[_0x4d41cb(0x1cb)]!=config[_0x4d41cb(0x1d0)]){let _0x4ffe01={'coin':_0x5c79e5[_0x4d41cb(0x1cb)],'number':_0x5c79e5['number'],'breakeven':_0x5c79e5[_0x4d41cb(0x2b8)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d41cb(0x265)]('coins')[_0x4d41cb(0x1d7)](_0x4ffe01)[_0x4d41cb(0x1da)]();}});}async function updateCoinResults(_0x5afd34){const _0x166cda=_0xea94;let _0x4e79aa,_0x10600b,_0x361521,_0x4ef394,_0x4bfb45,_0x4a2e38,_0x52110d=dbCoinResults[_0x166cda(0x265)](_0x166cda(0x1f6))['find']({'coin':_0x5afd34['coin']})[_0x166cda(0x237)]();if(!_0x52110d)return;if(_0x5afd34[_0x166cda(0x295)]&&_0x5afd34['fee'][_0x166cda(0x288)]==config[_0x166cda(0x1d0)])_0x4e79aa=_0x5afd34[_0x166cda(0x295)][_0x166cda(0x280)];else{if(_0x5afd34[_0x166cda(0x295)]&&_0x5afd34['fee'][_0x166cda(0x288)]==_0x166cda(0x25a))_0x4e79aa=_0x5afd34[_0x166cda(0x295)][_0x166cda(0x280)]*global[_0x166cda(0x268)][_0x166cda(0x25a)+config[_0x166cda(0x1d0)]];else _0x4e79aa=0.001*_0x5afd34[_0x166cda(0x1d9)];}const _0x1d0638=_0x5afd34[_0x166cda(0x259)][_0x166cda(0x239)](config[_0x166cda(0x1d0)]+'/');_0x1d0638&&(_0x4a2e38={'coin':_0x5afd34[_0x166cda(0x1cb)],'symbol':_0x5afd34[_0x166cda(0x259)],'filled':_0x5afd34[_0x166cda(0x1d9)]*_0x5afd34[_0x166cda(0x2b8)],'side':_0x5afd34[_0x166cda(0x28b)]==_0x166cda(0x1d8)?_0x166cda(0x293):_0x166cda(0x1d8),'price':0x1/_0x5afd34[_0x166cda(0x2b8)]},_0x5afd34={..._0x4a2e38});_0x5afd34['side']==_0x166cda(0x293)?_0x361521=(_0x52110d[_0x166cda(0x2a2)]*_0x52110d[_0x166cda(0x1b9)]+_0x5afd34['price']*_0x5afd34[_0x166cda(0x1d9)])/(_0x52110d['number']+_0x5afd34[_0x166cda(0x1d9)]):_0x361521=(_0x52110d[_0x166cda(0x2a2)]*_0x52110d['number']-_0x5afd34[_0x166cda(0x2b8)]*_0x5afd34[_0x166cda(0x1d9)])/(_0x52110d[_0x166cda(0x1b9)]-_0x5afd34[_0x166cda(0x1d9)]);_0x5afd34[_0x166cda(0x28b)]=='buy'?_0x4ef394=_0x52110d['realized']:_0x4ef394=_0x52110d[_0x166cda(0x255)]+(_0x5afd34[_0x166cda(0x2b8)]-_0x52110d[_0x166cda(0x2a2)])*_0x5afd34[_0x166cda(0x1d9)];_0x10600b=_0x5afd34[_0x166cda(0x28b)]==_0x166cda(0x1d8)?_0x52110d[_0x166cda(0x1b9)]-_0x5afd34[_0x166cda(0x1d9)]:_0x52110d[_0x166cda(0x1b9)]+_0x5afd34[_0x166cda(0x1d9)],_0x4bfb45=(_0x5afd34[_0x166cda(0x2b8)]-_0x361521)*_0x10600b;let _0x371fe0={'coin':_0x5afd34[_0x166cda(0x1cb)],'number':_0x10600b,'breakeven':formatResult(_0x361521,0x8),'realized':formatResult(_0x4ef394,0x8),'unrealized':formatResult(_0x4bfb45,0x8),'fees':formatResult(_0x52110d[_0x166cda(0x1b5)]+_0x4e79aa,0x8),'sells':_0x5afd34[_0x166cda(0x28b)]==_0x166cda(0x1d8)?_0x52110d[_0x166cda(0x1e4)]+0x1:_0x52110d['sells'],'buys':_0x5afd34['side']==_0x166cda(0x293)?_0x52110d[_0x166cda(0x221)]+0x1:_0x52110d[_0x166cda(0x221)]};dbCoinResults['get']('coins')[_0x166cda(0x28e)]({'coin':_0x5afd34[_0x166cda(0x1cb)]})['assign'](_0x371fe0)[_0x166cda(0x1da)]();}async function placeOrder(_0x533c3a){const _0x3c286e=_0xea94,_0x128e0e=config[_0x3c286e(0x1e6)]==_0x3c286e(0x296)?'market':_0x3c286e(0x24f);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x3c286e(0x29f)](currentCoins));for(const _0x3684dd of _0x533c3a){let _0x6dd4e2,_0x52d3a6,_0x5b07fa,_0x2161aa,_0x86c32c,_0x4e9b34=_0x3684dd[_0x3c286e(0x259)];try{const _0x56a2c2=await exchange['fetchTickers'](_0x4e9b34),_0x52c976=_0x56a2c2[_0x4e9b34];_0x6dd4e2=_0x52c976['last'],_0x52d3a6=_0x52c976['bid'],_0x5b07fa=_0x52c976['ask'];_0x3684dd['reverse']?(_0x2161aa=_0x3684dd['side']==_0x3c286e(0x293)?'sell':_0x3c286e(0x293),_0x86c32c=Math[_0x3c286e(0x225)](_0x3684dd[_0x3c286e(0x263)])/_0x6dd4e2):(_0x2161aa=_0x3684dd[_0x3c286e(0x28b)],_0x86c32c=Math[_0x3c286e(0x225)](_0x3684dd[_0x3c286e(0x263)]));_0x128e0e=='limit'&&(config[_0x3c286e(0x1e6)]==_0x3c286e(0x24d)&&(_0x6dd4e2=_0x2161aa==_0x3c286e(0x293)?_0x52d3a6:_0x5b07fa),config['ordertype']==_0x3c286e(0x269)&&(_0x6dd4e2=_0x2161aa=='buy'?_0x5b07fa:_0x52d3a6));_0x86c32c=formatResult(_0x86c32c,0x8),_0x6dd4e2=formatResult(_0x6dd4e2,0x8);const _0x33416f=await exchange[_0x3c286e(0x29b)](_0x4e9b34,_0x128e0e,_0x2161aa,_0x86c32c,_0x6dd4e2);lastOrders['push']({'orderId':_0x33416f['id'],'symbol':_0x4e9b34,'side':_0x2161aa,'reverse':_0x3684dd[_0x3c286e(0x1af)],'amount':_0x3684dd[_0x3c286e(0x1af)]?_0x33416f[_0x3c286e(0x26a)]*_0x33416f[_0x3c286e(0x2b8)]:_0x33416f[_0x3c286e(0x26a)],'filled':_0x3684dd[_0x3c286e(0x1af)]?_0x33416f[_0x3c286e(0x1d9)]*_0x33416f[_0x3c286e(0x2b8)]:_0x33416f[_0x3c286e(0x1d9)],'price':_0x33416f['price']});const _0x26920e=_0x2161aa==_0x3c286e(0x1d8)?config[_0x3c286e(0x272)]?String[_0x3c286e(0x2b7)]('0x'+config['emojisell'])+'\x20':'':config[_0x3c286e(0x1ed)]?String['fromCodePoint']('0x'+config[_0x3c286e(0x1ed)])+'\x20':'',_0x4e97a1=_0x128e0e==_0x3c286e(0x296)?'Market':config[_0x3c286e(0x1e6)]=='limit-high'?_0x3c286e(0x228):_0x3c286e(0x1d6);if(_0x128e0e==_0x3c286e(0x296))logHistory(_0x3c286e(0x21b),''+_0x26920e+_0x4e97a1+_0x3c286e(0x216)+_0x4e9b34+'\x20'+_0x2161aa+'\x20#'+formatResult(_0x33416f[_0x3c286e(0x1d9)],0x8)+'\x20@'+formatResult(_0x33416f[_0x3c286e(0x2b8)],0x8));else logHistory(_0x3c286e(0x21b),''+_0x26920e+_0x4e97a1+_0x3c286e(0x216)+_0x4e9b34+'\x20'+_0x2161aa+'\x20#'+formatResult(_0x33416f['amount'],0x8)+'\x20@'+formatResult(_0x33416f[_0x3c286e(0x2b8)],0x8));_0x33416f[_0x3c286e(0x1cb)]=_0x3684dd[_0x3c286e(0x1cb)],await updateCoinResults(_0x33416f);if(config['cooldown']!=0x0){let _0xc0321=null;if(cooldownTracker[_0x3c286e(0x291)]==config[_0x3c286e(0x212)]-0x1)_0xc0321=cooldownTracker[_0x3c286e(0x231)]();const _0x41192e=getTimeStamp();cooldownTracker['push'](_0x41192e);if(_0xc0321){const _0x636f26=fns[_0x3c286e(0x299)](new Date(_0x41192e),new Date(_0xc0321));_0x636f26<cooldownInterval&&(logHistory(_0x3c286e(0x24c),'Executed\x20'+config[_0x3c286e(0x212)]+_0x3c286e(0x2b9)+cooldownInterval/0x3c+_0x3c286e(0x251)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x262460){if(_0x262460[_0x3c286e(0x2b1)]()[_0x3c286e(0x239)](_0x3c286e(0x257)))logHistory(_0x3c286e(0x24c),_0x3c286e(0x281)+_0x4e9b34);else{if(_0x262460[_0x3c286e(0x2b1)]()[_0x3c286e(0x239)](_0x3c286e(0x1d4)))logHistory(_0x3c286e(0x24c),_0x3c286e(0x24e)+_0x4e9b34);else await handleError(_0x262460,'placeOrder()');}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x3c286e(0x1f2)]&&(config[_0x3c286e(0x1e6)]==_0x3c286e(0x296)?logHistory(_0x3c286e(0x24c),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3c286e(0x24c),_0x3c286e(0x1ce)));else coolingDown&&(!config[_0x3c286e(0x1f2)]&&logHistory(_0x3c286e(0x24c),_0x3c286e(0x1c6)));}}function logHistory(_0x534572,_0x525377,_0x4fc01b=''){const _0x5d7ffe=_0xea94;let _0x4d73c9={'time':getTimeStamp(),'type':_0x534572,'event':_0x525377,'botname':config[_0x5d7ffe(0x24a)],'showname':config[_0x5d7ffe(0x262)]};dbLogs[_0x5d7ffe(0x265)](_0x5d7ffe(0x203))[_0x5d7ffe(0x1d7)](_0x4d73c9)[_0x5d7ffe(0x1da)]();if(_0x4fc01b=='')_0x4fc01b=_0x525377;proxyEmit(_0x5d7ffe(0x29a),{'log':_0x4d73c9,'summary':_0x4fc01b}),process['send']({'telegram':_0x4d73c9},_0x32f611=>{}),logging(''+_0x4d73c9[_0x5d7ffe(0x29a)]);}function emitHistory(_0xfd3829={}){const _0x3497ad=_0xea94;Object[_0x3497ad(0x20a)](_0xfd3829)[_0x3497ad(0x291)]==0x0&&(_0xfd3829={'type':[_0x3497ad(0x21b),_0x3497ad(0x29a)],'event':'','page':0x1});if(_0xfd3829[_0x3497ad(0x28a)][_0x3497ad(0x239)](_0x3497ad(0x29a)))_0xfd3829[_0x3497ad(0x28a)]['splice'](_0xfd3829['type'][_0x3497ad(0x1e7)]('event'),0x1,'error',_0x3497ad(0x2a7));if(dbLogs['has']('logs')['value']()){let _0x37890e=dbLogs[_0x3497ad(0x265)](_0x3497ad(0x203))[_0x3497ad(0x25b)](_0x4beb11=>{const _0x2370f8=_0x3497ad;if(_0xfd3829[_0x2370f8(0x28a)][_0x2370f8(0x291)]==0x0)return![];else return _0xfd3829['type'][_0x2370f8(0x239)](_0x4beb11['type']);})[_0x3497ad(0x25b)](_0x5492b5=>{const _0x23696b=_0x3497ad;if(_0xfd3829[_0x23696b(0x29a)]=='')return!![];else return _0x5492b5[_0x23696b(0x29a)]['toLowerCase']()[_0x23696b(0x239)](_0xfd3829['event'][_0x23696b(0x1b4)]());})[_0x3497ad(0x256)](_0x3497ad(0x1f9)),_0x47b18b=_0x37890e['value']()[_0x3497ad(0x291)];_0x37890e=_0x37890e[_0x3497ad(0x1af)]()[_0x3497ad(0x1e2)]((_0xfd3829[_0x3497ad(0x273)]-0x1)*logPageSize,_0xfd3829['page']*logPageSize-0x1)[_0x3497ad(0x1af)]()['value'](),proxyEmit(_0x3497ad(0x2bc),{'logs':_0x37890e,'total':_0x47b18b});}else proxyEmit(_0x3497ad(0x2bc),{'logs':[],'total':0x0});}async function pauseBot(_0x46264e){const _0x5485ce=_0xea94,_0x14f827=new Date()[_0x5485ce(0x28f)]();if(!lastBotPause)lastBotPause=new Date()[_0x5485ce(0x28f)](),consecutivePauses=0x1;else{if(_0x14f827-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x5485ce(0x274)]({'stop':_0x5485ce(0x1f4)},_0x249b3e=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x5485ce(0x28f)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x5485ce(0x24c),_0x5485ce(0x1c3)+consecutivePauses+')'),await sleep(_0x46264e),botPaused=![],reset();}}async function handleError(_0x595b1e,_0x86612b,_0x1fb932=''){const _0x5fc3d5=_0xea94;if(_0x595b1e['toString']()[_0x5fc3d5(0x239)](_0x5fc3d5(0x26e)))logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x2a5)),await pauseBot(pauseBotInterval);else{if(_0x595b1e['toString']()[_0x5fc3d5(0x239)]('ExchangeNotAvailable'))logHistory(_0x5fc3d5(0x24c),_0x86612b+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x595b1e['toString']()[_0x5fc3d5(0x239)]('RequestTimeout'))logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x1f3)),await pauseBot(pauseBotInterval);else{if(_0x595b1e['toString']()[_0x5fc3d5(0x239)](_0x5fc3d5(0x207)))logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x20f)),logHistory(_0x5fc3d5(0x24c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x5fc3d5(0x249)},_0x52c6c7=>{});else{if(_0x595b1e[_0x5fc3d5(0x2b1)]()[_0x5fc3d5(0x239)](_0x5fc3d5(0x1dd)))logHistory('error',_0x86612b+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x5fc3d5(0x24c),_0x5fc3d5(0x247)),process[_0x5fc3d5(0x274)]({'stop':_0x5fc3d5(0x249)},_0x1f1353=>{});else{if(_0x595b1e[_0x5fc3d5(0x2b1)]()[_0x5fc3d5(0x239)](_0x5fc3d5(0x2bd)))logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x258)),logHistory(_0x5fc3d5(0x24c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x5fc3d5(0x249)},_0x180db0=>{});else{if(_0x595b1e[_0x5fc3d5(0x2b1)]()[_0x5fc3d5(0x239)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x2b0)),logHistory(_0x5fc3d5(0x24c),_0x5fc3d5(0x247)),process[_0x5fc3d5(0x274)]({'stop':_0x5fc3d5(0x249)},_0x3e08ab=>{});else{if(_0x595b1e[_0x5fc3d5(0x2b1)]()[_0x5fc3d5(0x239)](_0x5fc3d5(0x2ad)))logHistory('error',_0x86612b+_0x5fc3d5(0x26d)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x5fc3d5(0x1f4)},_0x305455=>{});else _0x595b1e['toString']()['includes'](_0x5fc3d5(0x205))?logHistory('error',_0x86612b+_0x5fc3d5(0x270)):(logHistory(_0x5fc3d5(0x24c),_0x86612b+_0x5fc3d5(0x278)),logging(_0x86612b+_0x5fc3d5(0x21d),_0x595b1e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x291d67,_0x780040){return parseFloat(_0x291d67['toFixed'](_0x780040));}function logging(_0x54c9d9,_0x532a92=''){const _0x311083=_0xea94;if(config[_0x311083(0x262)])console['log'](getTimeStamp()+':\x20'+config[_0x311083(0x24a)]+_0x311083(0x2ae)+_0x54c9d9,_0x532a92);else console[_0x311083(0x2b6)](getTimeStamp()+':\x20Bot\x20'+botID+_0x311083(0x2ae)+_0x54c9d9,_0x532a92);}function getServerTime(){const _0x29fdfe=_0xea94,_0x3d52e4=new Date();return _0x3d52e4['getFullYear']()+'/'+(_0x3d52e4[_0x29fdfe(0x2a9)]()+0x1)[_0x29fdfe(0x2b1)]()[_0x29fdfe(0x229)](0x2,'0')+'/'+_0x3d52e4['getDate']()[_0x29fdfe(0x2b1)]()[_0x29fdfe(0x229)](0x2,'0')+'\x20'+_0x3d52e4[_0x29fdfe(0x1b7)]()[_0x29fdfe(0x2b1)]()['padStart'](0x2,'0')+':'+_0x3d52e4[_0x29fdfe(0x25c)]()['toString']()[_0x29fdfe(0x229)](0x2,'0')+':'+_0x3d52e4[_0x29fdfe(0x2bb)]()['toString']()[_0x29fdfe(0x229)](0x2,'0');}function getTimeStamp(){const _0x12d7e4=_0xea94,_0xae906b=shiftedTime();return _0xae906b[_0x12d7e4(0x20c)]()+'/'+(_0xae906b[_0x12d7e4(0x2a9)]()+0x1)['toString']()[_0x12d7e4(0x229)](0x2,'0')+'/'+_0xae906b[_0x12d7e4(0x27b)]()[_0x12d7e4(0x2b1)]()['padStart'](0x2,'0')+'\x20'+_0xae906b[_0x12d7e4(0x1b7)]()[_0x12d7e4(0x2b1)]()[_0x12d7e4(0x229)](0x2,'0')+':'+_0xae906b['getMinutes']()[_0x12d7e4(0x2b1)]()[_0x12d7e4(0x229)](0x2,'0')+':'+_0xae906b[_0x12d7e4(0x2bb)]()['toString']()[_0x12d7e4(0x229)](0x2,'0');}function getDate(){const _0x3cf597=_0xea94,_0x2456c4=shiftedTime();return _0x2456c4[_0x3cf597(0x20c)]()+'/'+(_0x2456c4[_0x3cf597(0x2a9)]()+0x1)['toString']()[_0x3cf597(0x229)](0x2,'0')+'/'+_0x2456c4['getDate']()['toString']()[_0x3cf597(0x229)](0x2,'0');}function getHour(){const _0x48762e=_0xea94,_0x58dee2=shiftedTime();return _0x58dee2[_0x48762e(0x1b7)]()[_0x48762e(0x2b1)]()[_0x48762e(0x229)](0x2,'0');}function sleep(_0x161e88){return new Promise(_0x6cd7ec=>setTimeout(_0x6cd7ec,_0x161e88));}function shiftedTime(){const _0x3b8220=_0xea94,_0x3985f7=new Date();let _0x2e39ff=_0x3985f7;if(config&&config['timeshift']!==0x0)_0x2e39ff=fns[_0x3b8220(0x2a1)](_0x3985f7,{'hours':config[_0x3b8220(0x294)]});return _0x2e39ff;}