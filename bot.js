const _0x1c937b=_0x2a84;(function(_0x59b04e,_0x424158){const _0x1ceb28=_0x2a84,_0x5a2bff=_0x59b04e();while(!![]){try{const _0x459815=-parseInt(_0x1ceb28(0x172))/0x1*(-parseInt(_0x1ceb28(0x150))/0x2)+-parseInt(_0x1ceb28(0x12b))/0x3*(parseInt(_0x1ceb28(0x11f))/0x4)+-parseInt(_0x1ceb28(0xf4))/0x5*(-parseInt(_0x1ceb28(0x20e))/0x6)+parseInt(_0x1ceb28(0x121))/0x7*(parseInt(_0x1ceb28(0x11c))/0x8)+-parseInt(_0x1ceb28(0x1f4))/0x9*(-parseInt(_0x1ceb28(0x25a))/0xa)+-parseInt(_0x1ceb28(0x1bf))/0xb*(parseInt(_0x1ceb28(0x19a))/0xc)+-parseInt(_0x1ceb28(0x1f5))/0xd*(-parseInt(_0x1ceb28(0x21a))/0xe);if(_0x459815===_0x424158)break;else _0x5a2bff['push'](_0x5a2bff['shift']());}catch(_0x1dec8a){_0x5a2bff['push'](_0x5a2bff['shift']());}}}(_0x1eb8,0x76b56));const _0x17e431=function(){let _0x3c01fd=!![];return function(_0x56cf0f,_0x57db8a){const _0x433096=_0x3c01fd?function(){if(_0x57db8a){const _0x42a073=_0x57db8a['apply'](_0x56cf0f,arguments);return _0x57db8a=null,_0x42a073;}}:function(){};return _0x3c01fd=![],_0x433096;};}(),_0x125568=_0x17e431(this,function(){const _0x1e39e8=_0x2a84;return _0x125568['toString']()['search']('(((.+)+)+)+$')[_0x1e39e8(0x1ce)]()[_0x1e39e8(0x222)](_0x125568)[_0x1e39e8(0x23b)](_0x1e39e8(0x1f2));});_0x125568();'use strict';const ccxt=require(_0x1c937b(0x134)),low=require(_0x1c937b(0x1f0)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1c937b(0x253)),Crypt=require(_0x1c937b(0x25c))['Crypt'],util=require(_0x1c937b(0x11b)),argv=require(_0x1c937b(0x262))(process[_0x1c937b(0x1ec)]['slice'](0x2))[_0x1c937b(0x1ec)],path=require(_0x1c937b(0xe1));let exchange;global[_0x1c937b(0x1e0)]={},global['change']={};const usdBasecoins=['USD',_0x1c937b(0x248),_0x1c937b(0x164),_0x1c937b(0x13c),'USDC',_0x1c937b(0x1fd)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1c937b(0xfb)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x1c937b(0x139)],botID=process[_0x1c937b(0x1ec)][0x2]||_0x1c937b(0x10a),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x1c937b(0x136)+botID+_0x1c937b(0x189)),killBot());const userID=process[_0x1c937b(0x1ec)][0x3]||'',configpath=userID?_0x1c937b(0x1ee)+userID+'/':'./config/',logspath=userID?_0x1c937b(0xdc)+userID+'/':_0x1c937b(0xdc),loggerfile=fs['createWriteStream'](logspath+_0x1c937b(0x182),{'flags':'a'});!fs[_0x1c937b(0x218)](configpath)&&fs[_0x1c937b(0x1d6)](configpath);!fs[_0x1c937b(0x218)](logspath)&&fs[_0x1c937b(0x1d6)](logspath);const configfile=configpath+_0x1c937b(0x198)+botID+'-config.json',logfile=configpath+_0x1c937b(0x198)+botID+_0x1c937b(0x1a5),performancefile=configpath+'bot-'+botID+_0x1c937b(0x24f),coinresultsfile=configpath+_0x1c937b(0x198)+botID+_0x1c937b(0x1d0),settingsfile=configpath+_0x1c937b(0x152),securefile=configpath+_0x1c937b(0x191),configbackuppath=configpath+_0x1c937b(0x17b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1c937b(0x1b8)]({'logs':[],'version':serverversion})[_0x1c937b(0x1a1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1c937b(0x1b8)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1c937b(0x1b8)]({'bot':[],'version':serverversion})[_0x1c937b(0x1a1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1c937b(0x1b8)]({'coins':[],'version':serverversion})[_0x1c937b(0x1a1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1c937b(0x132),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();function _0x2a84(_0x399bb5,_0x438855){const _0x19a6c5=_0x1eb8();return _0x2a84=function(_0x125568,_0x17e431){_0x125568=_0x125568-0xd1;let _0x1eb8c9=_0x19a6c5[_0x125568];return _0x1eb8c9;},_0x2a84(_0x399bb5,_0x438855);}oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x10dd95=>{console['log'](_0x10dd95);},'simple':_0x4d4a45=>{const _0x1c89c5=_0x1c937b;console[_0x1c89c5(0xfe)](_0x4d4a45),loggerfile[_0x1c89c5(0x1a1)](util['format'](_0x4d4a45)+'\x0a');},'full':async(_0x55f2e8,_0x3088fd='')=>{const _0x21393c=_0x1c937b;let _0x349a81;if(config[_0x21393c(0x1bc)])_0x349a81=getTimeStamp()+':\x20'+config['botname']+_0x21393c(0x1e1)+_0x55f2e8;else _0x349a81=getTimeStamp()+_0x21393c(0x256)+botID+'\x20>\x20'+_0x55f2e8;console[_0x21393c(0xfe)](_0x349a81),loggerfile['write'](util[_0x21393c(0x1d2)](_0x349a81)+'\x0a'),_0x3088fd&&(console[_0x21393c(0xfe)](_0x3088fd),loggerfile[_0x21393c(0x1a1)](util[_0x21393c(0x1d2)](_0x3088fd)+'\x0a'));},'debug':async(_0x5b8251,_0x5a2997='')=>{const _0x24e6ac=_0x1c937b;let _0x3d9827;if(config['showname'])_0x3d9827=getTimeStamp()+':\x20'+config['botname']+_0x24e6ac(0x17a)+_0x5b8251;else _0x3d9827=getTimeStamp()+_0x24e6ac(0x256)+botID+_0x24e6ac(0x17a)+_0x5b8251;if(debugging)console['log'](_0x3d9827);loggerfile['write'](util[_0x24e6ac(0x1d2)](_0x3d9827)+'\x0a');if(_0x5a2997){if(debugging)console[_0x24e6ac(0xfe)](_0x5a2997);loggerfile[_0x24e6ac(0x1a1)](util[_0x24e6ac(0x1d2)](_0x5a2997)+'\x0a');}}};process['on']('uncaughtException',function(_0x22d6b0){const _0x1869cb=_0x1c937b;logHistory('error',_0x1869cb(0x107)),logger['debug'](_0x1869cb(0x120),_0x22d6b0);});settings[_0x1c937b(0x1af)]!=config[_0x1c937b(0x1af)]&&updateTimeshift(settings[_0x1c937b(0x1af)]);settings[_0x1c937b(0x1cc)]!=config[_0x1c937b(0x1cc)]&&updateOnepagemode(settings[_0x1c937b(0x1cc)]);process['send']({'started':_0x1c937b(0x129)},_0xd284=>{}),initializeProcessListeners();function proxyEmit(_0x226a98,_0x353478=null){const _0xfbc11a=_0x1c937b;process[_0xfbc11a(0x1df)]({'function':_0x226a98,'args':_0x353478},_0x215ae4=>{});}function initializeProcessListeners(){const _0x1cc0c4=_0x1c937b;process['on'](_0x1cc0c4(0x113),_0x1e58e4=>{const _0x5e3208=_0x1cc0c4;switch(Object['keys'](_0x1e58e4)[0x0]){case'timeshift':_0x1e58e4[_0x5e3208(0x1af)]!=undefined&&(settings[_0x5e3208(0x1af)]=_0x1e58e4['timeshift'],updateTimeshift(settings[_0x5e3208(0x1af)]));break;case _0x5e3208(0x1cc):_0x1e58e4['onepagemode']!=undefined&&(settings[_0x5e3208(0x1cc)]=_0x1e58e4[_0x5e3208(0x1cc)],updateOnepagemode(settings[_0x5e3208(0x1cc)]));break;case _0x5e3208(0x261):_0x1e58e4[_0x5e3208(0x261)]!=undefined&&(bots=JSON['parse'](_0x1e58e4[_0x5e3208(0x261)]),proxyEmit(_0x5e3208(0x261),bots));break;case _0x5e3208(0x19f):switch(_0x1e58e4['function']){case _0x5e3208(0x100):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x5e3208(0x11e):emitHistory(_0x1e58e4[_0x5e3208(0xf3)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x1e58e4[_0x5e3208(0xf3)]);break;case _0x5e3208(0x228):getPortfolio(_0x1e58e4[_0x5e3208(0xf3)]);break;case _0x5e3208(0x180):storeConfiguration(_0x1e58e4[_0x5e3208(0xf3)]);break;case _0x5e3208(0x149):storeHeadless(_0x1e58e4[_0x5e3208(0xf3)]);break;case'storeFiat':storeFiat(_0x1e58e4[_0x5e3208(0xf3)]);break;case _0x5e3208(0x187):resetHistory();break;case _0x5e3208(0x15e):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1e58e4[_0x5e3208(0xf3)]);break;case _0x5e3208(0xe0):cancelLoading();break;case _0x5e3208(0x1c3):showConfig();break;case _0x5e3208(0x14f):sendMetricsTelegram();break;case _0x5e3208(0x212):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x18ded2=null,_0x182fd5=![]){const _0x523d5c=_0x1c937b;logger[_0x523d5c(0x181)](_0x523d5c(0x237)+(_0x18ded2&&_0x18ded2['length']>0x0?_0x523d5c(0x1dc)+_0x18ded2[_0x523d5c(0x1b0)](','):_0x523d5c(0x16a))+'\x20|\x20'+(_0x182fd5?_0x523d5c(0x10f):_0x523d5c(0x19d))+_0x523d5c(0x163)+config[_0x523d5c(0x242)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x182fd5)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x523d5c(0x104)]!=''&&config[_0x523d5c(0x104)]!='***'){loadingProgress=0x0;if(_0x182fd5){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4c6204){handleErrorNoStop(_0x4c6204,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x18ded2);const _0xfc6308=await getCoins();[currentCoins,currentCoinsAll]=_0xfc6308,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x523d5c(0x15f)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x523d5c(0x1f7)]==0x0&&allOpenOrders[_0x523d5c(0x1f7)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4c4ce8=_0x1c937b;exchangeStopped=!![];try{await exchange['close']();}catch(_0x43edad){await handleError(_0x43edad,_0x4c4ce8(0x158));}}async function reloadExchange(){const _0x51b11d=_0x1c937b;logger[_0x51b11d(0x181)](_0x51b11d(0x127));while(lockOrders!=ORDERS[_0x51b11d(0xfb)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x51b11d(0x181)](_0x51b11d(0x241)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xf4ae6d=config[_0x1c937b(0x242)],_0x4ca38f=config[_0x1c937b(0x104)],_0x3e6b8b=config[_0x1c937b(0x112)],_0x1a3b30=config[_0x1c937b(0x194)]){const _0xb31026=_0x1c937b;exchange&&await stopExchange();!supportedExchanges()[_0xb31026(0x118)](_0xf4ae6d)&&(logHistory(_0xb31026(0x1d7),_0xb31026(0x1e9)+_0xf4ae6d+_0xb31026(0xe3)),killBot());const _0x5e5296=ccxt[_0xb31026(0x224)][_0xf4ae6d['toLowerCase']()];exchange=new _0x5e5296({'apiKey':_0x4ca38f,'secret':_0x3e6b8b,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xb31026(0x157)}});if(_0x1a3b30)exchange[_0xb31026(0x1a2)]=_0x1a3b30;}function setStableCoins(){const _0xbc8d23=_0x1c937b;let _0x4759fe=config['basecoin']==_0xbc8d23(0x201)?_0xbc8d23(0x201):'BTC',_0x3598b3=!allSymbols[_0xbc8d23(0x118)](_0x4759fe+_0xbc8d23(0x10d))?_0xbc8d23(0x13c):_0xbc8d23(0xdb),_0x5ec645=!allSymbols[_0xbc8d23(0x118)](_0x4759fe+_0xbc8d23(0x114))?_0x3598b3:_0xbc8d23(0x1eb);stablecoins={'eur':{'coin':''+_0x4759fe+_0x5ec645,'symbol':_0x4759fe+'/'+_0x5ec645},'usd':{'coin':''+_0x4759fe+_0x3598b3,'symbol':_0x4759fe+'/'+_0x3598b3}};}async function initwsCcxt(_0x169f2b){const _0x45ec96=_0x1c937b;_0x169f2b==null&&(_0x169f2b=[],config[_0x45ec96(0xfa)][_0x45ec96(0x24e)](_0x29a57a=>{const _0x2ac4b4=_0x45ec96;if(!_0x29a57a[_0x2ac4b4(0x185)]&&_0x29a57a['coin']!=config[_0x2ac4b4(0x20c)])_0x169f2b[_0x2ac4b4(0x190)](_0x29a57a[_0x2ac4b4(0x1f3)]);}));if(!_0x169f2b['includes'](stablecoins['eur'][_0x45ec96(0x1f3)]))_0x169f2b[_0x45ec96(0x190)](stablecoins[_0x45ec96(0x206)][_0x45ec96(0x1f3)]);if(!_0x169f2b[_0x45ec96(0x118)](stablecoins[_0x45ec96(0xed)][_0x45ec96(0x1f3)]))_0x169f2b[_0x45ec96(0x190)](stablecoins[_0x45ec96(0xed)][_0x45ec96(0x1f3)]);if(config[_0x45ec96(0x242)][_0x45ec96(0x123)](_0x45ec96(0x1e4))){if(!_0x169f2b[_0x45ec96(0x118)](_0x45ec96(0x1c4)+config[_0x45ec96(0x20c)]))_0x169f2b[_0x45ec96(0x190)]('BNB/'+config[_0x45ec96(0x20c)]);}loadCoins(_0x169f2b),_0x169f2b=validateSymbols(_0x169f2b);const _0x2d83ec=async _0x2e445c=>{const _0xa7d06a=_0x45ec96;let _0x2e9e61;try{const _0x319395=await exchange[_0xa7d06a(0x207)](_0x2e445c);Object[_0xa7d06a(0x209)](_0x319395)[_0xa7d06a(0x24e)](_0xd93793=>{const _0x5f1654=_0xa7d06a;_0x2e9e61=_0xd93793[0x1][_0x5f1654(0x1f3)],global['ticker'][noslash(_0x2e9e61)]=_0xd93793[0x1][_0x5f1654(0x140)];});}catch(_0x4c2b4f){await handleError(_0x4c2b4f,'initTickers()',_0x2e9e61);}},_0xbfbc00=async _0x1e9c78=>{const _0x5aa865=_0x45ec96;while(!![]){if(!botPaused)try{const _0x341b77=await exchange['watchTrades'](_0x1e9c78);global['ticker'][noslash(_0x341b77[0x0][_0x5aa865(0x1f3)])]=_0x341b77[0x0][_0x5aa865(0x22c)],await sleep(0x3e8);}catch(_0x2ea7d8){if(!exchangeStopped)await handleError(_0x2ea7d8,_0x5aa865(0x122),_0x1e9c78);}else await sleep(0x64);}},_0x14e7ef=async _0x1312ee=>{const _0x4e6a35=_0x45ec96;while(!![]){if(!botPaused)try{const _0x5ef047=await exchange[_0x4e6a35(0x217)](_0x1312ee);global['change'][_0x5ef047[_0x4e6a35(0x1f3)]]=_0x5ef047['percentage'],await sleep(0x3c*0x3e8);}catch(_0x3e8bbb){if(!exchangeStopped)await handleError(_0x3e8bbb,_0x4e6a35(0x17f),_0x1312ee);}else await sleep(0x64);}},_0x3d1bc5=async _0x15c3cf=>{const _0x5b38fa=_0x45ec96;while(!![]){if(!botPaused)try{const _0x561742=await exchange[_0x5b38fa(0x130)](_0x15c3cf);_0x561742['forEach'](_0x8c0842=>{updateNumberCoinsCcxt(_0x8c0842);});}catch(_0x368e9f){if(!exchangeStopped)await handleError(_0x368e9f,_0x5b38fa(0x25e));}else await sleep(0x64);}};_0x2d83ec(_0x169f2b),_0x169f2b['forEach'](_0x9a11bf=>{_0xbfbc00(_0x9a11bf),_0x14e7ef(_0x9a11bf),_0x3d1bc5(_0x9a11bf);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x478bad=_0x1c937b;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2d464a=await getCoins(),[_0xfb03b9,_0x4d94df]=_0x2d464a;let _0x24e812=[];currentCoins[_0x478bad(0x24e)](_0x2b709a=>{const _0x342cfb=_0x478bad,_0x150c4d=_0xfb03b9[_0x342cfb(0xe4)](_0x522941=>_0x522941[_0x342cfb(0x1f9)]==_0x2b709a[_0x342cfb(0x1f9)]);if(_0x150c4d){if(_0x2b709a['number']!=_0x150c4d[_0x342cfb(0x199)]){let _0x3a5d41;if(_0x2b709a[_0x342cfb(0x1f9)]!=config['basecoin']){const _0x2d35be=global[_0x342cfb(0x1e0)][noslash(_0x2b709a[_0x342cfb(0x1f3)])];_0x3a5d41=_0x2b709a['reverse']?0x1/_0x2d35be:_0x2d35be;}else _0x3a5d41=0x1;_0x24e812[_0x342cfb(0x190)]({'coin':_0x2b709a[_0x342cfb(0x1f9)],'symbol':_0x2b709a[_0x342cfb(0x1f3)],'price':_0x3a5d41,'number':Number(formatResult(_0x150c4d[_0x342cfb(0x199)]-_0x2b709a[_0x342cfb(0x199)],0x8)),'basecoinvalue':_0x3a5d41*(_0x150c4d['number']-_0x2b709a[_0x342cfb(0x199)])});}}});if(_0x24e812[_0x478bad(0x1f7)]==0x1&&!blockTransactionDetection){if(config[_0x478bad(0x1bb)]){logger[_0x478bad(0x181)](_0x478bad(0x18d)+_0x24e812[0x0][_0x478bad(0x204)]+_0x478bad(0x13f)+lastFees[_0x478bad(0x210)]);if(lastFees[_0x478bad(0x210)]==0x0||Math[_0x478bad(0xd1)](_0x24e812[0x0][_0x478bad(0x204)])>lastFees[_0x478bad(0x210)]){delete _0x24e812[0x0][_0x478bad(0x1f3)],delete _0x24e812[0x0]['basecoinvalue'];let _0x8c5e46=[],_0x45c882=[...config['liquidity']]||[],_0x329e27=config[_0x478bad(0xe9)];_0x45c882[_0x478bad(0x25d)]((_0x18d219,_0x402760)=>_0x18d219[_0x478bad(0x1ba)]>_0x402760[_0x478bad(0x1ba)]?-0x1:_0x402760[_0x478bad(0x1ba)]>_0x18d219[_0x478bad(0x1ba)]?0x1:0x0);const _0x287e79=getDate();if(_0x45c882[0x0]){const _0x481afd=fns[_0x478bad(0x1b7)](_0x45c882[0x0][_0x478bad(0x1ba)],_0x478bad(0x216),new Date()),_0x5fa0d5=fns['parse'](_0x287e79,_0x478bad(0x216),new Date());if(fns[_0x478bad(0x1d1)](_0x481afd,_0x5fa0d5)){_0x8c5e46=_0x45c882[0x0][_0x478bad(0x221)];const _0x3c3e5d=_0x8c5e46['find'](_0x3889fb=>_0x3889fb['coin']==_0x24e812[0x0][_0x478bad(0x1f9)]);_0x3c3e5d?(_0x3c3e5d['number']+=_0x24e812[0x0][_0x478bad(0x199)],_0x3c3e5d[_0x478bad(0x199)]==0x0&&(_0x8c5e46=_0x8c5e46['filter'](_0x2063e3=>{const _0x53c6b5=_0x478bad;return _0x2063e3['coin']!=_0x24e812[0x0][_0x53c6b5(0x1f9)];}))):_0x8c5e46[_0x478bad(0x190)](_0x24e812[0x0]);const _0x11548f=_0x329e27[_0x478bad(0xe4)](_0x41af75=>_0x41af75[_0x478bad(0x1ba)]==_0x287e79);_0x11548f[_0x478bad(0x221)]=_0x8c5e46;}else _0x329e27[_0x478bad(0x190)]({'date':_0x287e79,'changes':[_0x24e812[0x0]]});}const _0x391bbc=_0x329e27[_0x478bad(0xe4)](_0x25224e=>_0x25224e[_0x478bad(0x1ba)]==_0x287e79);if(_0x391bbc){let _0x2701b7=!![];_0x391bbc[_0x478bad(0x221)]['forEach'](_0x57574f=>{const _0x133e8a=_0x478bad;if(_0x57574f[_0x133e8a(0x199)]!=0x0)_0x2701b7=![];}),_0x2701b7&&(_0x329e27=_0x329e27[_0x478bad(0x1ad)](_0xcd1e3a=>{const _0xd512fb=_0x478bad;return _0xcd1e3a[_0xd512fb(0x1ba)]!=_0x287e79;}));}let _0x7e7983=dbConfig[_0x478bad(0x1b9)](_0x478bad(0x126))[_0x478bad(0xe4)]({'botID':botID})[_0x478bad(0x18f)]();_0x7e7983&&(dbConfig[_0x478bad(0x1b9)](_0x478bad(0x126))[_0x478bad(0xe4)]({'botID':botID})[_0x478bad(0x20f)]({'liquidity':_0x329e27})[_0x478bad(0x1a1)](),config[_0x478bad(0xe9)]=_0x329e27),logHistory('success',_0x478bad(0x1f1)+Math[_0x478bad(0xd1)](_0x24e812[0x0][_0x478bad(0x199)])+'\x20'+_0x24e812[0x0][_0x478bad(0x1f9)]+'\x20'+(_0x24e812[0x0][_0x478bad(0x199)]>0x0?_0x478bad(0x232):_0x478bad(0x240))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x478bad(0x178),emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x478bad(0xd1)](_0x24e812[0x0]['number'])+'\x20'+_0x24e812[0x0][_0x478bad(0x1f9)]+'\x20'+(_0x24e812[0x0]['number']>0x0?_0x478bad(0x232):_0x478bad(0x240)));transactionDetected=!![],currentCoins=_0xfb03b9,currentCoinsAll=_0x4d94df;}else logger[_0x478bad(0x181)](_0x478bad(0x1f1)+Math[_0x478bad(0xd1)](_0x24e812[0x0][_0x478bad(0x199)])+'\x20'+_0x24e812[0x0]['coin']+'\x20'+(_0x24e812[0x0]['number']>0x0?'added':'removed')+_0x478bad(0x22f)),currentCoins=_0xfb03b9,currentCoinsAll=_0x4d94df;}await sleep(watchTransactionsInterval);}catch(_0x123c5e){if(!exchangeStopped)await handleError(_0x123c5e,_0x478bad(0x162));}else await sleep(0x64);}}async function loadSymbols(){const _0x209315=_0x1c937b;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x209315(0x209)](markets)[_0x209315(0x24e)](_0x95f79e=>{const _0x32e8cb=_0x209315;_0x95f79e[0x1][_0x32e8cb(0x12d)]&&_0x95f79e[0x1][_0x32e8cb(0x157)]&&allSymbols[_0x32e8cb(0x190)](_0x95f79e[0x0]);});}catch(_0x5aa21e){throw _0x5aa21e;}}function validateSymbols(_0x1616c1){let _0x5c3348=[];return _0x1616c1['forEach'](_0x3f253b=>{const _0x4dd9c2=_0x2a84;!allSymbols['includes'](_0x3f253b)?logHistory(_0x4dd9c2(0x1d7),'Invalid\x20symbol:\x20'+_0x3f253b+'\x20-\x20exclude\x20from\x20balancing\x20in\x20the\x20configuration'):_0x5c3348['push'](_0x3f253b);}),_0x5c3348;}async function initclient(){const _0x4cdf33=_0x1c937b;proxyEmit(_0x4cdf33(0x178),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x736069=getNormalizedPerformance();emitPerformance(_0x736069),getStartingBalances(_0x736069);}async function toggleBotMode(){const _0xee1478=_0x1c937b;let _0x1722d8=dbConfig['get'](_0xee1478(0x126))[_0xee1478(0xe4)]({'botID':botID})[_0xee1478(0x18f)]();if(_0x1722d8){const _0x116215=!_0x1722d8[_0xee1478(0x171)];dbConfig[_0xee1478(0x1b9)](_0xee1478(0x126))['find']({'botID':botID})[_0xee1478(0x20f)]({'headless':_0x116215})[_0xee1478(0x1a1)](),config[_0xee1478(0x171)]=_0x116215,proxyEmit(_0xee1478(0x178),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x23e371=_0x1c937b;process[_0x23e371(0x1df)]({'updatebotmanager':!![]},_0x4112ff=>{});}async function loadCoins(_0x49bc60){const _0x11160f=_0x1c937b;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x871403,_0x39b81d=0x0,_0x47141c=0x0;_0x49bc60['forEach'](_0x191327=>{const _0x3cb887=_0x2a84;loading[_0x3cb887(0x24b)][_0x3cb887(0x190)](_0x191327);}),loadingCanceled=![];let _0x453b61=![];while(_0x871403!=_0x49bc60[_0x11160f(0x1f7)]+maxLoadingProgress){_0x871403=loadingProgress,_0x49bc60[_0x11160f(0x24e)](_0xb6f06a=>{const _0x46c500=_0x11160f;if(global[_0x46c500(0x1e0)][noslash(_0xb6f06a)]){loading[_0x46c500(0x24b)]=loading[_0x46c500(0x24b)][_0x46c500(0x1ad)](_0xc0338f=>_0xc0338f!=_0xb6f06a);if(!watchedSymbols[_0x46c500(0x118)](_0xb6f06a))watchedSymbols[_0x46c500(0x190)](_0xb6f06a);_0x871403++;}}),loading[_0x11160f(0xe6)]=Math[_0x11160f(0x249)](_0x871403/(_0x49bc60['length']+maxLoadingProgress)*0x64);loading[_0x11160f(0xe6)]!=0x64&&(_0x47141c>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x47141c>0x78*0x5&&!_0x453b61&&(loading['cancel']=!![],emitLoadingProgress(),_0x453b61=!![],logHistory(_0x11160f(0x1d7),_0x11160f(0xf0)+loading[_0x11160f(0x24b)][_0x11160f(0x1b0)](',\x20')+_0x11160f(0x20d)),logHistory('error',_0x11160f(0xe2)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x387f6f=_0x11160f;process[_0x387f6f(0x1df)]({'stop':_0x387f6f(0x233)},_0x485b0f=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x11160f(0x1ae)]=!![],emitLoadingProgress();break;}else _0x39b81d!=loading[_0x11160f(0xe6)]&&(_0x39b81d=loading[_0x11160f(0xe6)],emitLoadingProgress()),_0x47141c++,await sleep(0xc8);}_0x871403==_0x49bc60[_0x11160f(0x1f7)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x11160f(0x1df)]({'status':'enabled','live':_0x11160f(0x129)},_0x1b3a3a=>{}),_0x453b61&&logHistory(_0x11160f(0xe5),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x81d65b=_0x1c937b;proxyEmit(_0x81d65b(0x178),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1ce2fc=_0x1c937b;proxyEmit(_0x1ce2fc(0x22d),loading);}async function getFiat(){const _0x50b6d2=_0x1c937b;let _0x5924d8=global['ticker'][stablecoins[_0x50b6d2(0x206)][_0x50b6d2(0x1f9)]],_0x1db3aa=global[_0x50b6d2(0x1e0)][stablecoins[_0x50b6d2(0xed)][_0x50b6d2(0x1f9)]];return{'eur':Number(_0x5924d8),'usd':Number(_0x1db3aa)};}function capitalize(_0x49726d){const _0x240f83=_0x1c937b;return _0x49726d[_0x240f83(0x143)](0x0,0x1)['toUpperCase']()+_0x49726d['substring'](0x1);}function supportedExchanges(){const _0x153460=_0x1c937b,_0x466cf2=['ws',_0x153460(0x207),_0x153460(0x217),_0x153460(0x23d),_0x153460(0x130),'cancelOrder',_0x153460(0x24a),_0x153460(0x170),_0x153460(0x1c9),'fetchBalance'];let _0x598a06=[],_0xe4764a=[],_0x3fe20a=ccxt[_0x153460(0x224)]['exchanges'];_0x3fe20a['forEach'](_0x196e3a=>{const _0x58eba7=_0x153460;try{const _0x1169bb=new ccxt[(_0x58eba7(0x224))][_0x196e3a]();_0xe4764a['push'](_0x1169bb);}catch(_0x23f6ad){}}),_0xe4764a[_0x153460(0x24e)](_0x39a07d=>{const _0x5118f4=_0x153460;let _0xace4d3=0x0;_0x466cf2[_0x5118f4(0x24e)](_0x3f0b84=>{const _0x2b9208=_0x5118f4;_0x3f0b84 in _0x39a07d[_0x2b9208(0x1a8)]&&_0x39a07d[_0x2b9208(0x1a8)][_0x3f0b84]&&_0xace4d3++;}),_0xace4d3==_0x466cf2[_0x5118f4(0x1f7)]&&_0x598a06[_0x5118f4(0x190)](capitalize(_0x39a07d['id']));});let _0x57616b=[];return _0x3fe20a[_0x153460(0x24e)](_0x56830c=>{const _0x5be269=_0x153460;_0x56830c=capitalize(_0x56830c);if(!_0x598a06['includes'](_0x56830c))_0x57616b[_0x5be269(0x190)](_0x56830c);}),_0x598a06;}function setStartDatePerformance(){const _0x4db816=_0x1c937b;if(config&&config['liquidity'][0x0][_0x4db816(0x221)]['length']!=0x0){const _0xf3ac06=config['liquidity'][0x0][_0x4db816(0x221)];dbPerformance[_0x4db816(0x1b9)](_0x4db816(0x159))[_0x4db816(0xe4)]({'date':config['startdate']})[_0x4db816(0x20f)]({'coins':_0xf3ac06})[_0x4db816(0x1a1)]();}}async function recreateCoinResults(){const _0x2f454d=_0x1c937b;let _0x50b478,_0x58e669=[];try{const _0x595d3c=fns[_0x2f454d(0x1d2)](fns['parseISO'](config[_0x2f454d(0x239)][_0x2f454d(0x137)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5066bf of currentCoins){if(_0x5066bf['coin']!=config[_0x2f454d(0x20c)]){let _0x1200ec=0x0,_0x690cd,_0x3d00e5;_0x50b478=await getAllEventOrders(_0x5066bf[_0x2f454d(0x1f3)]);if(_0x50b478[_0x2f454d(0x1f7)]>0x0)_0x50b478['forEach'](_0x2e834f=>{const _0x1ce0df=_0x2f454d,_0x454cf3=_0x5066bf[_0x1ce0df(0x1f3)]['includes'](config[_0x1ce0df(0x20c)]+'/');_0x58e669[_0x1ce0df(0x190)]({'datetime':_0x2e834f['datetime'],'coin':_0x5066bf[_0x1ce0df(0x1f9)],'symbol':_0x5066bf[_0x1ce0df(0x1f3)],'side':_0x2e834f['side'],'reverse':_0x454cf3,'amount':formatResult(_0x2e834f[_0x1ce0df(0x160)],0x8),'filled':formatResult(_0x2e834f[_0x1ce0df(0x160)],0x8),'price':formatResult(_0x2e834f[_0x1ce0df(0x22c)],0x8)}),_0x1200ec=_0x2e834f['side']==_0x1ce0df(0x167)?_0x1200ec+_0x2e834f[_0x1ce0df(0x160)]:_0x1200ec-_0x2e834f[_0x1ce0df(0x160)];if(!_0x3d00e5)_0x3d00e5=_0x2e834f[_0x1ce0df(0x22c)];});_0x690cd=_0x5066bf[_0x2f454d(0x199)]-_0x1200ec;let _0x1a737e;config[_0x2f454d(0xe9)][_0x2f454d(0x24e)](_0xcbece6=>{const _0xdc096a=_0x2f454d;!_0x1a737e&&(_0x1a737e=_0xcbece6[_0xdc096a(0x221)][_0xdc096a(0xe4)](_0x430562=>_0x430562[_0xdc096a(0x1f9)]==_0x5066bf[_0xdc096a(0x1f9)]),_0x1a737e&&(_0x690cd=_0x1a737e[_0xdc096a(0x199)],_0x3d00e5=_0x1a737e[_0xdc096a(0x22c)]));});let _0x104f12=dbCoinResults[_0x2f454d(0x1b9)](_0x2f454d(0x161))[_0x2f454d(0xe4)]({'coin':_0x5066bf[_0x2f454d(0x1f9)]})[_0x2f454d(0x18f)]();_0x104f12={'coin':_0x5066bf[_0x2f454d(0x1f9)],'number':_0x690cd,'breakeven':_0x3d00e5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2f454d(0x1b9)]('coins')['find']({'coin':_0x5066bf[_0x2f454d(0x1f9)]})['assign'](_0x104f12)['write']();}}_0x58e669[_0x2f454d(0x25d)]((_0x14ce91,_0x11e2d3)=>_0x14ce91[_0x2f454d(0x15a)]>_0x11e2d3[_0x2f454d(0x15a)]?0x1:_0x11e2d3[_0x2f454d(0x15a)]>_0x14ce91['datetime']?-0x1:0x0);let _0xcee6a2=0x0;for(let _0x18dc22 of _0x58e669){await updateCoinResults(_0x18dc22,!![]);}}catch(_0x25b399){await handleError(_0x25b399,'recreateCoinResults()');}}async function getAllEventOrders(_0x2a34fe){const _0x5de140=_0x1c937b;let _0x4307b9=[],_0x560c69=dbLogs[_0x5de140(0x1b9)](_0x5de140(0xd2))[_0x5de140(0x1ad)](_0x3af5e9=>{const _0x49e50f=_0x5de140,_0x44f77a=_0x3af5e9[_0x49e50f(0x1c1)]['toLowerCase']();return _0x44f77a[_0x49e50f(0x118)](_0x2a34fe[_0x49e50f(0x1a3)]())&&(_0x44f77a[_0x49e50f(0x118)]('market')&&_0x44f77a['includes'](_0x49e50f(0xfd))||_0x44f77a[_0x49e50f(0x118)](_0x49e50f(0x160))&&_0x44f77a['includes'](_0x49e50f(0xfd)));})[_0x5de140(0x236)]('time')[_0x5de140(0x18f)]();return _0x560c69[_0x5de140(0x24e)](_0x30eeff=>{const _0x2011f3=_0x5de140,_0x89d10=_0x30eeff[_0x2011f3(0x1c1)][_0x2011f3(0x118)]('sell')?_0x2011f3(0x238):_0x2011f3(0x167),_0x3be926=/#([0-9]|\.)+\s/i,_0x48ae03=Number(_0x3be926[_0x2011f3(0xf7)](_0x30eeff[_0x2011f3(0x1c1)])[0x0][_0x2011f3(0x186)](0x1)),_0xd41104=/@([0-9]|\.)+$/i,_0xe2ff91=Number(_0xd41104[_0x2011f3(0xf7)](_0x30eeff[_0x2011f3(0x1c1)])[0x0][_0x2011f3(0x186)](0x1));_0x4307b9[_0x2011f3(0x190)]({'datetime':_0x30eeff['time'],'coin':symbolToCoin(_0x2a34fe),'symbol':_0x2a34fe,'side':_0x89d10,'amount':_0x48ae03,'filled':_0x48ae03,'price':_0xe2ff91});}),_0x4307b9;}async function getAllOrders(_0x32098d,_0x552509){const _0x28cc85=_0x1c937b;let _0x5a411b=[];while(_0x552509<exchange[_0x28cc85(0x1c6)]()){const _0x55c987=0x1f4;try{const _0x47bc4d=await exchange[_0x28cc85(0x1c9)](_0x32098d,_0x552509,_0x55c987);if(_0x47bc4d[_0x28cc85(0x1f7)])_0x552509=_0x47bc4d[_0x47bc4d['length']-0x1][_0x28cc85(0x115)]+0x1,_0x5a411b=_0x5a411b[_0x28cc85(0x230)](_0x47bc4d);else break;}catch(_0x4bc9d7){await handleError(_0x4bc9d7,_0x28cc85(0x166),_0x32098d);}}return _0x5a411b;}async function validate24hChanges(){const _0x494d86=_0x1c937b;for(const _0x26b10a of currentCoins){if(_0x26b10a[_0x494d86(0x1f9)]!=config[_0x494d86(0x20c)]){let _0xb03109;_0x26b10a[_0x494d86(0x16f)]?_0xb03109=formatResult((0x1/(global[_0x494d86(0x15d)][noslash(_0x26b10a[_0x494d86(0x1f3)])]/0x64+0x1)-0x1)*0x64,0x3):_0xb03109=global[_0x494d86(0x15d)][noslash(_0x26b10a[_0x494d86(0x1f3)])],_0xb03109<config['change24h']&&(logHistory(_0x494d86(0x1d7),_0x26b10a['coin']+_0x494d86(0x19b)+_0xb03109+'%'),logHistory(_0x494d86(0x1d7),_0x494d86(0x13a)),logHistory(_0x494d86(0x1d7),_0x494d86(0x246)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1bcb0d,_0x2144bb){if(!_0x1bcb0d)return!![];const _0x14b7c4=_0x2144bb['split']('.'),_0x49857b=_0x1bcb0d['split']('.');for(var _0x4c5a45=0x0;_0x4c5a45<_0x49857b['length'];_0x4c5a45++){const _0x53cac8=~~_0x49857b[_0x4c5a45],_0x3c1982=~~_0x14b7c4[_0x4c5a45];if(_0x53cac8<_0x3c1982)return!![];if(_0x53cac8>_0x3c1982)return![];}return![];}async function oneTimeMigration(){const _0x4728e7=_0x1c937b;let _0x16bd02=dbLogs[_0x4728e7(0x1b9)](_0x4728e7(0x139))[_0x4728e7(0x18f)]();if(isOlderVersion(_0x16bd02,'2.3.5')){let _0x472360=[];const _0x254d5d=dbLogs['get']('logs')[_0x4728e7(0x18f)]();_0x254d5d['forEach'](_0x43ae10=>{const _0x3e3205=_0x4728e7;_0x472360[_0x3e3205(0x190)]({'time':_0x43ae10['time'],'type':_0x43ae10[_0x3e3205(0xdf)],'event':_0x43ae10[_0x3e3205(0x1c1)]});}),dbLogs[_0x4728e7(0x1b9)]('logs')[_0x4728e7(0x20f)](_0x472360)[_0x4728e7(0x1a1)]();}let _0x41e6e1=dbConfig[_0x4728e7(0x1b9)](_0x4728e7(0x139))[_0x4728e7(0x18f)]();if(isOlderVersion(_0x41e6e1,_0x4728e7(0x196))){let _0x4a9bb9=dbConfig[_0x4728e7(0x1b9)](_0x4728e7(0x126))['find']({'botID':botID})[_0x4728e7(0x18f)]();if(_0x4a9bb9){let _0x11f0ce=[];_0x4a9bb9[_0x4728e7(0xfa)][_0x4728e7(0x24e)](_0x3f99cb=>{const _0x2d8ab6=_0x4728e7;_0x11f0ce['push']({'coin':_0x3f99cb[_0x2d8ab6(0x1f9)],'number':_0x3f99cb[_0x2d8ab6(0x138)],'price':_0x3f99cb[_0x2d8ab6(0x215)]}),delete _0x3f99cb[_0x2d8ab6(0x138)],delete _0x3f99cb[_0x2d8ab6(0x215)];});if(_0x11f0ce[_0x4728e7(0x1f7)]!==0x0)fs[_0x4728e7(0x151)](configbackuppath+(_0x4728e7(0x128)+botID+_0x4728e7(0x109)),JSON[_0x4728e7(0x251)](_0x11f0ce,null,0x4),function(_0x165061){if(_0x165061){}});const _0x5743a2=(_0xf3c500,_0x5b9be2)=>{let _0x5e6480=[];_0x5b9be2['forEach'](_0x665cd9=>{const _0x2af99c=_0x2a84,_0x361062=_0xf3c500[_0x2af99c(0xe4)](_0x5b91ba=>_0x5b91ba[_0x2af99c(0x1f9)]==_0x665cd9[_0x2af99c(0x1f9)]);if(!_0x361062)_0x5e6480['push'](_0x665cd9);});let _0x334177=[];return _0xf3c500['forEach'](_0x3e71e8=>{const _0x14f161=_0x2a84,_0x1245f6=_0x5b9be2[_0x14f161(0xe4)](_0x2c2d26=>_0x2c2d26['coin']==_0x3e71e8[_0x14f161(0x1f9)]);if(!_0x1245f6||_0x1245f6['number']==0x0&&_0x3e71e8[_0x14f161(0x199)]!=0x0)_0x334177['push'](_0x3e71e8);}),{'missingDay1':_0x5e6480,'notInDay2':_0x334177};},_0x2d9767=dbPerformance[_0x4728e7(0x1b9)](_0x4728e7(0x159))[_0x4728e7(0x208)]()[_0x4728e7(0x18f)]();if(_0x2d9767[_0x4728e7(0x1f7)]>0x1){const {missingDay1:_0x3365eb,notInDay2:_0xd6b276}=_0x5743a2(_0x11f0ce,_0x2d9767[0x1][_0x4728e7(0x161)]);_0x11f0ce=[..._0x11f0ce,..._0x3365eb],_0xd6b276[_0x4728e7(0x24e)](_0x130474=>{const _0x3569f5=_0x4728e7;let _0x148ded=_0x11f0ce[_0x3569f5(0x192)](_0x2d9c8b=>_0x2d9c8b['coin']==_0x130474[_0x3569f5(0x1f9)]);_0x148ded!=-0x1&&_0x11f0ce[_0x3569f5(0x1ef)](_0x148ded,0x1);});}_0x11f0ce[_0x4728e7(0x25d)]((_0x19f6f5,_0x4395dd)=>_0x19f6f5[_0x4728e7(0x1f9)]>_0x4395dd[_0x4728e7(0x1f9)]?0x1:_0x4395dd[_0x4728e7(0x1f9)]>_0x19f6f5[_0x4728e7(0x1f9)]?-0x1:0x0);let _0x20f677=[{'date':_0x4a9bb9[_0x4728e7(0x239)],'changes':_0x11f0ce}];_0x2d9767['length']>0x2&&_0x2d9767[_0x4728e7(0x24e)]((_0xe91e99,_0x1a4420)=>{const _0x5b755b=_0x4728e7;if(_0x1a4420>0x0&&_0x1a4420<_0x2d9767[_0x5b755b(0x1f7)]-0x1){const {missingDay1:_0x18a3c3,notInDay2:_0x421270}=_0x5743a2(_0x2d9767[_0x1a4420][_0x5b755b(0x161)],_0x2d9767[_0x1a4420+0x1]['coins']);_0x11f0ce=[],(_0x18a3c3[_0x5b755b(0x1f7)]!=0x0||_0x421270[_0x5b755b(0x1f7)]!=0x0)&&(_0x18a3c3[_0x5b755b(0x1f7)]!=0x0&&_0x11f0ce[_0x5b755b(0x190)](..._0x18a3c3),_0x421270[_0x5b755b(0x1f7)]!=0x0&&(_0x421270['forEach'](_0x12826d=>{const _0x1fc96b=_0x5b755b;_0x12826d[_0x1fc96b(0x199)]=-_0x12826d[_0x1fc96b(0x199)];}),_0x11f0ce[_0x5b755b(0x190)](..._0x421270)),_0x11f0ce[_0x5b755b(0x25d)]((_0x5d59a4,_0x24914d)=>_0x5d59a4[_0x5b755b(0x1f9)]>_0x24914d[_0x5b755b(0x1f9)]?0x1:_0x24914d[_0x5b755b(0x1f9)]>_0x5d59a4[_0x5b755b(0x1f9)]?-0x1:0x0),_0x20f677[_0x5b755b(0x190)]({'date':_0x2d9767[_0x1a4420+0x1][_0x5b755b(0x1ba)],'changes':_0x11f0ce}));}}),dbConfig['get'](_0x4728e7(0x126))['find']({'botID':botID})['assign']({..._0x4a9bb9,'liquidity':_0x20f677})['write']();}}if(isOlderVersion(_0x41e6e1,_0x4728e7(0x16b))){let _0x406f3f=dbConfig[_0x4728e7(0x1b9)](_0x4728e7(0x126))[_0x4728e7(0xe4)]({'botID':botID})['value']();if(_0x406f3f){const _0x350ca0=_0x406f3f[_0x4728e7(0x242)],_0x5a251d=_0x350ca0?capitalize(_0x350ca0):'Binance';dbConfig['get'](_0x4728e7(0x126))[_0x4728e7(0xe4)]({'botID':botID})['assign']({'exchange':_0x5a251d})[_0x4728e7(0x1a1)]();}}let _0x1c98e9=dbPerformance[_0x4728e7(0x1b9)](_0x4728e7(0x139))[_0x4728e7(0x18f)]();isOlderVersion(_0x1c98e9,_0x4728e7(0x196))&&setStartDatePerformance();let _0x55a544=dbCoinResults['get'](_0x4728e7(0x139))[_0x4728e7(0x18f)]();if(isOlderVersion(_0x55a544,_0x4728e7(0x252))){let _0x4a9566=dbCoinResults[_0x4728e7(0x1b9)](_0x4728e7(0x161))[_0x4728e7(0x18f)]();if(_0x4a9566[_0x4728e7(0x1f7)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0xcc978e=_0x1c937b;dbConfig['set'](_0xcc978e(0x139),serverversion)[_0xcc978e(0x1a1)](),dbPerformance['set']('version',serverversion)['write'](),dbLogs[_0xcc978e(0x1ea)]('version',serverversion)[_0xcc978e(0x1a1)](),dbCoinResults[_0xcc978e(0x1ea)](_0xcc978e(0x139),serverversion)['write']();}function getConfiguration(_0x4ec57a){const _0x102ec9=_0x1c937b;let _0x5f0fc9=dbConfig[_0x102ec9(0x1b9)]('bot')[_0x102ec9(0xe4)]({'botID':_0x4ec57a})['value']();if(_0x5f0fc9){let _0x52d3ad=![];typeof _0x5f0fc9[_0x102ec9(0x202)]==_0x102ec9(0x1d8)&&(_0x5f0fc9={..._0x5f0fc9,'threshold':Number(_0x5f0fc9['threshold'])},_0x52d3ad=!![]),_0x5f0fc9[_0x102ec9(0x1b2)]==undefined&&(_0x5f0fc9={..._0x5f0fc9,'change24h':-0x14},_0x52d3ad=!![]),_0x5f0fc9[_0x102ec9(0x1dd)]==undefined&&(_0x5f0fc9={..._0x5f0fc9,'fiat':_0x102ec9(0xdb)},_0x52d3ad=!![]),_0x5f0fc9[_0x102ec9(0x1cc)]==undefined&&(_0x5f0fc9={..._0x5f0fc9,'onepagemode':settings[_0x102ec9(0x1cc)]},_0x52d3ad=!![]),_0x5f0fc9['colorscheme']==undefined&&(_0x5f0fc9={..._0x5f0fc9,'colorscheme':'red_yellow_blue'},_0x52d3ad=!![]),_0x5f0fc9[_0x102ec9(0x1bb)]==undefined&&(_0x5f0fc9={..._0x5f0fc9,'autoliquidity':!![]},_0x52d3ad=!![]),_0x52d3ad&&(_0x5f0fc9={'botID':_0x5f0fc9['botID'],'exchange':_0x5f0fc9[_0x102ec9(0x242)],'apiKey':_0x5f0fc9[_0x102ec9(0x104)],'apiSecret':_0x5f0fc9[_0x102ec9(0x112)],'apiPassword':_0x5f0fc9['apiPassword'],'basecoin':_0x5f0fc9['basecoin'],'botname':_0x5f0fc9[_0x102ec9(0x13d)],'showname':_0x5f0fc9[_0x102ec9(0x1bc)],'threshold':_0x5f0fc9['threshold'],'ordertype':_0x5f0fc9['ordertype'],'timeout':_0x5f0fc9[_0x102ec9(0x1ac)],'fiat':_0x5f0fc9[_0x102ec9(0x1dd)],'startdate':_0x5f0fc9[_0x102ec9(0x239)],'recreate':_0x5f0fc9[_0x102ec9(0x1d4)],'timeshift':_0x5f0fc9[_0x102ec9(0x1af)],'onepagemode':_0x5f0fc9['onepagemode'],'headless':_0x5f0fc9[_0x102ec9(0x171)],'cooldown':_0x5f0fc9[_0x102ec9(0x1e2)],'change24h':_0x5f0fc9[_0x102ec9(0x1b2)],'emojibuy':_0x5f0fc9[_0x102ec9(0x168)],'emojisell':_0x5f0fc9['emojisell'],'colorscheme':_0x5f0fc9[_0x102ec9(0x13b)],'portfolio':_0x5f0fc9[_0x102ec9(0xfa)],'autoliquidity':_0x5f0fc9[_0x102ec9(0x1bb)],'liquidity':_0x5f0fc9[_0x102ec9(0xe9)],'openOrders':_0x5f0fc9[_0x102ec9(0xe8)]},dbConfig[_0x102ec9(0x1b9)](_0x102ec9(0x126))[_0x102ec9(0xd6)]()['write'](),dbConfig[_0x102ec9(0x1b9)](_0x102ec9(0x126))[_0x102ec9(0x190)](_0x5f0fc9)[_0x102ec9(0x1a1)]());}else _0x5f0fc9={'botID':_0x4ec57a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x102ec9(0x23f)+_0x4ec57a,'showname':![],'threshold':0x3,'ordertype':_0x102ec9(0x19c),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x102ec9(0x1af)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x102ec9(0x200),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5f0fc9;}function emittedConfiguration(){const _0x4f0aa4=_0x1c937b;let _0x25a402;if(config['apiKey']=='')_0x25a402={...config,'configstate':_0x4f0aa4(0x214)};else config[_0x4f0aa4(0x104)]==_0x4f0aa4(0x258)?_0x25a402={...config,'configstate':_0x4f0aa4(0xd3)}:(_0x25a402={...config,'apiKey':_0x4f0aa4(0xea),'apiSecret':_0x4f0aa4(0xea)},config[_0x4f0aa4(0x194)]&&(_0x25a402[_0x4f0aa4(0x194)]=_0x4f0aa4(0xea)));return _0x25a402;}function getSettings(){const _0x37e458=_0x1c937b;return dbSettings[_0x37e458(0x1b9)](_0x37e458(0x153))[_0x37e458(0x18f)]();}function getSecure(){const _0x213bf7=_0x1c937b;return dbSecure['get'](_0x213bf7(0x203))['value']()||{};}function updateTimeshift(_0xd53782){const _0x5c630e=_0x1c937b;let _0x1a8f6e=dbConfig[_0x5c630e(0x1b9)](_0x5c630e(0x126))[_0x5c630e(0xe4)]({'botID':botID})[_0x5c630e(0x18f)]();_0x1a8f6e&&dbConfig[_0x5c630e(0x1b9)](_0x5c630e(0x126))['find']({'botID':botID})['assign']({'timeshift':_0xd53782})[_0x5c630e(0x1a1)](),config[_0x5c630e(0x1af)]=_0xd53782,proxyEmit(_0x5c630e(0x178),emittedConfiguration());}function updateOnepagemode(_0x3feef5){const _0x23a689=_0x1c937b;let _0x56be76=dbConfig['get']('bot')[_0x23a689(0xe4)]({'botID':botID})['value']();_0x56be76&&dbConfig[_0x23a689(0x1b9)](_0x23a689(0x126))[_0x23a689(0xe4)]({'botID':botID})[_0x23a689(0x20f)]({'onepagemode':_0x3feef5})[_0x23a689(0x1a1)](),config[_0x23a689(0x1cc)]=_0x3feef5,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2d13dc){const _0x4f5037=_0x1c937b;logger[_0x4f5037(0x181)](_0x4f5037(0x144));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4f5037(0x181)]('Transaction\x20detection\x20blocked');let _0x1405ba=[],_0xca56e=![],_0x23d508=![],_0x344490=[];_0x2d13dc[_0x4f5037(0xfa)][_0x4f5037(0x24e)](_0x263008=>{const _0x5d0d9e=_0x4f5037;if(!_0x263008[_0x5d0d9e(0x185)]&&_0x263008['coin']!=_0x2d13dc['basecoin'])_0x344490[_0x5d0d9e(0x190)](_0x263008[_0x5d0d9e(0x1f3)]);}),_0x344490[_0x4f5037(0x24e)](_0x5a9a49=>{const _0x11174d=_0x4f5037,_0xbed001=watchedSymbols[_0x11174d(0x118)](_0x5a9a49);!_0xbed001&&_0x1405ba[_0x11174d(0x190)](_0x5a9a49);}),_0x344490[_0x4f5037(0x24e)](_0x131d98=>{const _0x174b27=_0x4f5037,_0x207777=currentCoins[_0x174b27(0xe4)](_0x19d915=>_0x19d915[_0x174b27(0x1f3)]==_0x131d98);!_0x207777&&(_0xca56e=!![]);}),currentCoins[_0x4f5037(0x24e)](_0x16beb8=>{const _0x21392e=_0x4f5037;if(_0x16beb8[_0x21392e(0x1f9)]!=config[_0x21392e(0x20c)]){const _0x3b061a=_0x344490['find'](_0x2fdcb8=>_0x2fdcb8==_0x16beb8[_0x21392e(0x1f3)]);!_0x3b061a&&(_0xca56e=!![]);}}),_0x2d13dc[_0x4f5037(0xfa)][_0x4f5037(0x24e)](_0x58e603=>{const _0x4419d4=_0x4f5037,_0x358acb=config[_0x4419d4(0xfa)]['find'](_0x34ca96=>_0x34ca96[_0x4419d4(0x1f9)]==_0x58e603[_0x4419d4(0x1f9)]);if(_0x358acb&&_0x58e603[_0x4419d4(0x14b)]!=_0x358acb['offset'])_0x23d508=!![];});let _0x4b3b9b=dbConfig[_0x4f5037(0x1b9)]('bot')[_0x4f5037(0xe4)]({'botID':botID})[_0x4f5037(0x18f)]();_0x2d13dc={..._0x2d13dc,'apiKey':crypt[_0x4f5037(0x131)](secure[_0x4f5037(0x235)],_0x2d13dc[_0x4f5037(0x104)])['message'],'apiSecret':crypt['decrypt'](secure[_0x4f5037(0x235)],_0x2d13dc[_0x4f5037(0x112)])[_0x4f5037(0x113)]};_0x2d13dc[_0x4f5037(0x194)]&&(_0x2d13dc[_0x4f5037(0x194)]=crypt[_0x4f5037(0x131)](secure[_0x4f5037(0x235)],_0x2d13dc[_0x4f5037(0x194)])[_0x4f5037(0x113)]);let _0x44dec9=![];if(_0x4b3b9b){_0x2d13dc[_0x4f5037(0x104)]==_0x4f5037(0xea)?_0x2d13dc['apiKey']=config[_0x4f5037(0x104)]:_0x44dec9=!![];_0x2d13dc[_0x4f5037(0x112)]==_0x4f5037(0xea)?_0x2d13dc['apiSecret']=config[_0x4f5037(0x112)]:_0x44dec9=!![];if(_0x2d13dc[_0x4f5037(0x194)]==_0x4f5037(0xea))_0x2d13dc[_0x4f5037(0x194)]=config[_0x4f5037(0x194)];else{if(_0x2d13dc['apiPassword'])_0x44dec9=!![];}dbConfig['get'](_0x4f5037(0x126))['find']({'botID':botID})[_0x4f5037(0x20f)](_0x2d13dc)[_0x4f5037(0x1a1)]();}else dbConfig[_0x4f5037(0x1b9)](_0x4f5037(0x126))[_0x4f5037(0x190)](_0x2d13dc)[_0x4f5037(0x1a1)](),_0x44dec9=!![],process['send']({'status':_0x4f5037(0x25b),'live':_0x4f5037(0x129)},_0x4a2030=>{});process[_0x4f5037(0x1df)]({'botname':_0x2d13dc['botname']},_0x1d7d4c=>{}),updateBotManager(),config={..._0x2d13dc},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x44dec9)await reset(_0x1405ba,!![]);else _0xca56e||_0x23d508?await reset(_0x1405ba,![]):getBalances();blockTransactionDetection=![],logger[_0x4f5037(0x181)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x44cb42){const _0x352ecc=_0x1c937b,_0x413352={...config,'headless':_0x44cb42[_0x352ecc(0x171)]};let _0x44f507=dbConfig['get'](_0x352ecc(0x126))[_0x352ecc(0xe4)]({'botID':botID})[_0x352ecc(0x18f)]();_0x44f507&&dbConfig[_0x352ecc(0x1b9)](_0x352ecc(0x126))[_0x352ecc(0xe4)]({'botID':botID})[_0x352ecc(0x20f)](_0x413352)[_0x352ecc(0x1a1)](),config={..._0x413352},updateBotManager(),proxyEmit(_0x352ecc(0x178),emittedConfiguration());}async function storeFiat(_0x155123){const _0x24fbc6=_0x1c937b,_0x279726={...config,'fiat':_0x155123};let _0x2ea00c=dbConfig[_0x24fbc6(0x1b9)](_0x24fbc6(0x126))['find']({'botID':botID})[_0x24fbc6(0x18f)]();_0x2ea00c&&dbConfig[_0x24fbc6(0x1b9)]('bot')['find']({'botID':botID})['assign'](_0x279726)[_0x24fbc6(0x1a1)](),config={..._0x279726},proxyEmit(_0x24fbc6(0x178),emittedConfiguration());}function resetHistory(){const _0x71d9a1=_0x1c937b;logger[_0x71d9a1(0x15f)](_0x71d9a1(0x245));try{if(fs[_0x71d9a1(0x218)](path['join'](configpath,_0x71d9a1(0x198)+botID+_0x71d9a1(0x1a5))))fs[_0x71d9a1(0x11d)](path['join'](configpath,_0x71d9a1(0x198)+botID+_0x71d9a1(0x1a5)));if(fs[_0x71d9a1(0x218)](path['join'](configpath,_0x71d9a1(0x198)+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x71d9a1(0x218)](path['join'](configpath,'bot-'+botID+_0x71d9a1(0x1d0))))fs['unlinkSync'](path[_0x71d9a1(0x1b0)](configpath,'bot-'+botID+_0x71d9a1(0x1d0)));}catch(_0x106273){if(_0x106273)logger[_0x71d9a1(0x15f)]('Error\x20while\x20deleting\x20files:\x20',_0x106273);}const _0x36afdd=getDate();let _0x217bd4=[];currentCoins[_0x71d9a1(0x24e)](_0x1e23b4=>{const _0x12f04f=_0x71d9a1;_0x217bd4[_0x12f04f(0x190)]({'coin':_0x1e23b4[_0x12f04f(0x1f9)],'number':_0x1e23b4[_0x12f04f(0x199)],'price':_0x1e23b4[_0x12f04f(0x140)]});});let _0x21d5d9=dbConfig[_0x71d9a1(0x1b9)]('bot')[_0x71d9a1(0xe4)]({'botID':botID})[_0x71d9a1(0x18f)]();_0x21d5d9&&(dbConfig[_0x71d9a1(0x1b9)]('bot')['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x36afdd,'changes':_0x217bd4}]})['write'](),config['liquidity']=[]),process[_0x71d9a1(0x1df)]({'stop':_0x71d9a1(0x233)},_0x36e7cf=>{});}function noslash(_0x220265){const _0x564946=_0x1c937b;return _0x220265[_0x564946(0x137)]('/','');}function _0x1eb8(){const _0x33f89f=['Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getPortfolio(0)','util','8QrBRbs','unlinkSync','emitHistory','53420oSSTfx','Uncaught\x20Exception:','547141IZabeu','watchTrades()','startsWith','loadMarkets','\x20orders\x20in\x20less\x20than\x20','bot','Initiating\x20exchange\x20reload','starting-balance-','running','Initializing\x20coin\x20results','129vyMqQk','total','active','ExchangeNotAvailable','\x20:\x20','watchOrders','decrypt','sha256','\x20not\x20responding','ccxt','limit-low','Error:\x20Invalid\x20argument\x20','replace','startnumber','version','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','colorscheme','USDT','botname','ongoing','\x20|\x20highest\x20fee:\x20','last','%\x20(','</pre>','substring','Saving\x20configuration','BNB','sells','net-fiat','getCoinNumber()','storeHeadless','padEnd','offset','\x20metrics:</b>\x20\x0a\x0a','ORDERS.LOCKED','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','sendMetricsTelegram','974NCfTbR','writeFile','bb-settings.json','settings','BTC','DDoSProtection','Huobipro','spot','stopExchange()','data','datetime','balances','Limit\x20(high-margin)','change','getStartingBalances','full','filled','coins','watchTransactions()','\x20|\x20exchange:\x20','TUSD','NetworkError','getAllOrders()','buy','emojibuy','getFullYear','no\x20additional\x20symbols','2.6.0','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20|\x20Custom\x20ID:\x20','reverse','fetchOpenOrders','headless','674AVofMf','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','recent20','add','fetchBalance','canceled','configuration','Waited\x20','\x20>\x20[DEBUG]\x20','/backup/','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','ordertype','\x20hour','fetchTickers()','storeConfiguration','debug','/output-000.log','valid','rightTxt','excluded','slice','resetHistory','trade',',\x20must\x20be\x20a\x203\x20digit\x20number','limits','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getHours','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','max','value','push','bb-secure.json','findIndex','2\x20-\x20Validate\x20orders:\x20','apiPassword','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','2.3.5','\x20value','bot-','number','12uuGmYW','\x20has\x20a\x2024h\x20drop\x20of\x20','market','exchange\x20not\x20reloaded','1\x20-\x20FILLED:\x20','function','\x20|\x20','write','password','toLowerCase','Invalid\x20quantity','-events.json','placeOrder()','Bitget','has','getTime','\x20closed\x20the\x20connection','InsufficientFunds','timeout','filter','cancel','timeshift','join','orderstatus','change24h','delta','RequestTimeout',':\x20timer\x20>','indexOf','parse','defaults','get','date','autoliquidity','showname','getSeconds','open','7703399WaAzJu','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','event','Limit\x20(low-margin)','showConfig','BNB/','Executed\x20','milliseconds','toFixed','2\x20-\x20FILLED\x20unknown\x20order:\x20','fetchClosedOrders','getDate','Cex','onepagemode','starting-balances','toString','OrderNotFound','-results.json','isEqual','format','Error\x20details:','recreate','padStart','mkdirSync','error','string','2\x20-\x20Handled\x20open\x20orders','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','none','additional\x20symbols\x20','fiat','\x20API\x20key\x20is\x20invalid','send','ticker','\x20>\x20','cooldown','differenceInSeconds','Binance','ID:\x20','currency','getOpenOrders()','limit-high','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','set','EUR','argv','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','./config/','splice','lowdb','Portfolio\x20change\x20detected:\x20','(((.+)+)+)+$','symbol','2835pFXxXR','13vtzUgO','\x20minutes\x20-\x20','length','2\x20-\x20FILLED\x20known\x20order:\x20','coin','-------------------------------\x0a','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','status','USDP','no\x20open\x20orders','UNLOCKING','red_yellow_blue','ETH','threshold','secure','basecoinvalue','Pausing\x20bot\x20for\x20','eur','fetchTickers','cloneDeep','entries','ORDERS.UNLOCKING','1\x20-\x20Validate\x20orders:\x20','basecoin','\x20-\x20bot\x20not\x20started','6ggzomS','assign','highest','shift','sendPortfolioTelegram','fromCodePoint','initial','startprice','yyyy/MM/dd','fetchTicker','existsSync','Unfilled\x20order(s)\x20canceled\x20after\x20','4975418urQXEf','orderId','side','emojisell','fee','Net\x20effect','leftTxt','changes','constructor','realized','pro','target','Order\x20amount\x20is\x20invalid:\x20','\x20portfolio:</b>\x20\x0a\x0a','getPortfolio','Order\x20filled:\x20','min','Exception\x20thrown\x20in\x20','price','coin-loading-progress','buys','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','concat','amount','added','restart','1\x20-\x20Unlock\x20orders','privateKey','sortBy','Reset\x20|\x20','sell','startdate','breakeven','search','Exchange','watchTrades','customId','Bot\x20','removed','Executing\x20exchange\x20reload','exchange','random','Unknown\x20error\x20occured','Resetting\x20bot\x20history','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','<b>','BUSD','round','createOrder','remainingSymbols','Net\x20','\x20network\x20error','forEach','-performance.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','stringify','2.5.0','date-fns','closed','cancelOrder',':\x20Bot\x20','AuthenticationError','***','warning','22190bpvFgn','enabled','hybrid-crypto-js','sort','watchOrders()','1\x20-\x20Handle\x20open\x20orders','floor','bots','yargs/yargs','map','abs','logs','recovery','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','LOCKED','remove','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20API\x20secret\x20is\x20invalid','<pre>','Huobi','USD','./logs/','average','Avoiding\x20continuous\x20order\x20attempts','type','cancelLoading','path','Pausing\x20for\x20','\x20exchange','find','success','progress','split','openOrders','liquidity','************','bid','fees','usd','cost','final','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','distribution','args','1500155xKGXfI','performance','API-key\x20format\x20invalid','exec','getCoins()','time','portfolio','UNLOCKED','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','order','log','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','initclient','getMinutes','Order(s)\x20not\x20validated\x20after\x20','getPortfolio(1)','apiKey','getMonth','\x20order:\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','2\x20-\x20Orders\x20unlocked','.json','001','net-basecoin','event-history','/USD','limit','exchange\x20reloaded','cancelOrders()','\x20not\x20available','apiSecret','message','/EUR','timestamp','\x20minutes','RateLimitExceeded','includes'];_0x1eb8=function(){return _0x33f89f;};return _0x1eb8();}function updateHighestFee(_0x5bd9b5){const _0x21a5ff=_0x1c937b;if(_0x5bd9b5[_0x21a5ff(0x16f)]){let _0x5c7b22={'filled':_0x5bd9b5['filled']*_0x5bd9b5[_0x21a5ff(0x22c)],'amount':_0x5bd9b5['filled']*_0x5bd9b5['price'],'side':_0x5bd9b5[_0x21a5ff(0x21c)]==_0x21a5ff(0x238)?_0x21a5ff(0x167):_0x21a5ff(0x238),'price':0x1/_0x5bd9b5['price']};_0x5bd9b5={..._0x5bd9b5,..._0x5c7b22};}const _0x508b9f=defaultFee*_0x5bd9b5[_0x21a5ff(0x160)]*_0x5bd9b5['price'];lastFees[_0x21a5ff(0x174)][_0x21a5ff(0x1f7)]===0x14&&lastFees[_0x21a5ff(0x174)][_0x21a5ff(0x211)](),lastFees[_0x21a5ff(0x174)][_0x21a5ff(0x190)](_0x508b9f),lastFees[_0x21a5ff(0x210)]=Math[_0x21a5ff(0x18e)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1ad862){const _0x52203f=_0x1c937b;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x1ad862[_0x52203f(0x1f3)]+_0x52203f(0x1a0)+_0x1ad862[_0x52203f(0x1fc)]+'\x20|\x20'+_0x1ad862['id']);let _0x41a602=_0x1ad862[_0x52203f(0x1fc)],_0x1aef5f=![];currentCoins['forEach'](_0x2f0f57=>{const _0x50f42a=_0x52203f;_0x2f0f57[_0x50f42a(0x1f3)]==_0x1ad862[_0x50f42a(0x1f3)]&&(_0x1aef5f=!![]);});if(!_0x1aef5f)return;const _0x5aadc1=currentCoins[_0x52203f(0xe4)](_0x5e075e=>_0x5e075e[_0x52203f(0x1f3)]==_0x1ad862['symbol']),_0x3b094=_0x2b1f44=>{const _0x49de97=_0x52203f;if(_0x5aadc1)_0x5aadc1[_0x49de97(0x1b1)]=_0x2b1f44;};if(_0x41a602==_0x52203f(0x1be))_0x3b094(_0x52203f(0x1be));else{if(_0x41a602==_0x52203f(0x177)){_0x3b094(_0x52203f(0x177));const _0x1297f5=await getCoins();[currentCoins,currentCoinsAll]=_0x1297f5,await getOpenOrders(),handleOpenOrders();}else{if(_0x41a602==_0x52203f(0x254)){logger[_0x52203f(0x181)](_0x52203f(0x19e)+_0x1ad862[_0x52203f(0x1f3)]+_0x52203f(0x1a0)+_0x1ad862[_0x52203f(0x160)]+_0x52203f(0x1a0)+_0x1ad862['id']);let _0x33a184=![];if(lastOrders)for(const _0x31af45 of lastOrders){const _0x6796e7=0xc8,_0x3f36c4=0x1388;let _0x8207aa=0x0;while(!_0x31af45[_0x52203f(0x21b)]&&_0x8207aa*_0x6796e7<_0x3f36c4){_0x8207aa++,await sleep(_0x6796e7);}if(_0x8207aa>0x0)logger[_0x52203f(0x181)](_0x52203f(0x179)+_0x8207aa*_0x6796e7/0x3e8+_0x52203f(0xfc));if(_0x31af45[_0x52203f(0x21b)]==_0x1ad862['id']){logger[_0x52203f(0x181)](_0x52203f(0x1f8)+_0x1ad862['id']),_0x33a184=!![];if(_0x31af45[_0x52203f(0x160)]==0x0){logger[_0x52203f(0x181)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x1ad862['id']);if(_0x1ad862['average'])_0x31af45['price']=_0x1ad862[_0x52203f(0xdd)];else{if(_0x1ad862[_0x52203f(0x22c)])_0x31af45[_0x52203f(0x22c)]=_0x1ad862[_0x52203f(0x22c)];else{}}_0x31af45[_0x52203f(0x160)]=_0x1ad862[_0x52203f(0x160)],updateHighestFee(_0x31af45),_0x3b094(_0x52203f(0x160)),await validateOrders();if(lockOrders==ORDERS[_0x52203f(0xd5)]){const _0x25d9c1=await getCoins();[currentCoins,currentCoinsAll]=_0x25d9c1;}_0x31af45[_0x52203f(0x21e)]={'currency':_0x1ad862[_0x52203f(0x21e)]?_0x1ad862['fee']['currency']:null,'cost':_0x1ad862[_0x52203f(0x21e)]?_0x1ad862[_0x52203f(0x21e)][_0x52203f(0xee)]:0x0},await updateCoinResults(_0x31af45);}}}if(!_0x33a184){logger[_0x52203f(0x181)](_0x52203f(0x1c8)+_0x1ad862['id']),_0x3b094(_0x52203f(0x160));const _0x3617b8=await getCoins();[currentCoins,currentCoinsAll]=_0x3617b8,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x25aaed=JSON[_0x52203f(0x1b7)](lastBalances[_0x52203f(0xfa)]);const _0xac783=_0x25aaed[_0x52203f(0xe4)](_0x34accf=>_0x34accf[_0x52203f(0x1f3)]==_0x1ad862[_0x52203f(0x1f3)]);if(_0xac783){if(_0x41a602==_0x52203f(0x1be))_0xac783[_0x52203f(0x1b1)]=_0xac783[_0x52203f(0x1b1)]==_0x52203f(0x160)?_0x52203f(0x160):_0x52203f(0x1be);else{if(_0x41a602==_0x52203f(0x177))_0xac783['orderstatus']=_0xac783[_0x52203f(0x1b1)]==_0x52203f(0x160)?_0x52203f(0x160):_0x52203f(0x177);else _0x41a602==_0x52203f(0x254)&&(_0xac783[_0x52203f(0x1b1)]=_0x52203f(0x160));}}lastBalances={...lastBalances,'portfolio':JSON[_0x52203f(0x251)](_0x25aaed)},proxyEmit(_0x52203f(0x15b),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4d2dba=_0x1c937b;await getOpenOrders();let _0x1fc367=![];currentCoins[_0x4d2dba(0x24e)](_0x4293ec=>{const _0x5ad493=_0x4d2dba;_0x1fc367=allOpenOrders[_0x5ad493(0xe4)](_0x140de4=>_0x140de4[_0x5ad493(0x1f3)]==_0x4293ec['symbol']),_0x4293ec[_0x5ad493(0x1b1)]=_0x1fc367?_0x5ad493(0x1be):_0x5ad493(0x1db);});}async function getCoins(_0x317f58=!![],_0x76240a=config[_0x1c937b(0x20c)]){const _0xb6835a=_0x1c937b;let _0x499c98,_0x1f4395=[],_0x5ae662=[],_0x8e183a=[],_0x226aba=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x499c98=await exchange[_0xb6835a(0x176)](),mybalances=_0x499c98[_0xb6835a(0x12c)];for(const [_0x50cf37,_0x3a4648]of Object[_0xb6835a(0x209)](mybalances)){_0x226aba[_0xb6835a(0x190)](_0x50cf37);}if(_0x76240a=='')for(const [_0x119615,_0x173c14]of Object[_0xb6835a(0x209)](mybalances)){_0x173c14!=0x0&&_0x5ae662[_0xb6835a(0x190)]({'coin':_0x119615});}else{let _0x313568=![];for(const [_0x9c0e70,_0x138fc9]of Object['entries'](mybalances)){if(_0x226aba[_0xb6835a(0x118)](_0x9c0e70)){const _0x4d26b5=config[_0xb6835a(0xfa)][_0xb6835a(0xe4)](_0x4a2cff=>_0x4a2cff['coin']==_0x9c0e70),_0x391a29=_0x9c0e70+'/'+_0x76240a,_0x226873=_0x76240a+'/'+_0x9c0e70,_0x470a2e=currentCoins[_0xb6835a(0xe4)](_0x1bd671=>_0x1bd671[_0xb6835a(0x1f9)]==_0x9c0e70);_0x313568=![];if((_0x138fc9!=0x0||_0x4d26b5)&&(allSymbols[_0xb6835a(0x118)](_0x391a29)||_0x9c0e70==_0x76240a))_0x9c0e70!=_0x76240a&&_0x1f4395[_0xb6835a(0x190)](_0x391a29),_0x5ae662[_0xb6835a(0x190)]({'coin':_0x9c0e70,'symbol':_0x391a29,'reverse':![],'number':Math['max'](_0x138fc9+(_0x4d26b5&&_0x4d26b5[_0xb6835a(0x14b)]||0x0),0x0),'orderstatus':_0x470a2e?_0x470a2e['orderstatus']:_0xb6835a(0x1db)});else(_0x138fc9!=0x0||_0x4d26b5)&&allSymbols[_0xb6835a(0x118)](_0x226873)&&(_0x9c0e70!=_0x76240a&&_0x1f4395[_0xb6835a(0x190)](_0x226873),_0x5ae662['push']({'coin':_0x9c0e70,'symbol':_0x226873,'reverse':!![],'number':Math['max'](_0x138fc9+(_0x4d26b5&&_0x4d26b5['offset']||0x0),0x0),'orderstatus':_0x470a2e?_0x470a2e[_0xb6835a(0x1b1)]:_0xb6835a(0x1db)}));}}}}catch(_0x150dcb){if(!_0x317f58)handleErrorNoStop(_0x150dcb,_0xb6835a(0xf8));else await handleError(_0x150dcb,'getCoins()');}return _0x8e183a=cloneDeep(_0x5ae662),_0x5ae662=_0x5ae662[_0xb6835a(0x1ad)](_0x35f595=>{const _0x28f3a1=_0xb6835a,_0x52621f=config['portfolio'][_0x28f3a1(0xe4)](_0x56ff9d=>_0x56ff9d[_0x28f3a1(0x1f9)]==_0x35f595[_0x28f3a1(0x1f9)]);return _0x52621f&&!_0x52621f['excluded'];}),[_0x5ae662,_0x8e183a];}async function getCoinNumber(_0x2b5f6e){const _0xfd8967=_0x1c937b;let _0xb6decc;try{const _0x36323b=await exchange[_0xfd8967(0x176)]();_0xb6decc=_0x36323b[_0xfd8967(0x12c)][_0x2b5f6e];}catch(_0x42a5ac){await handleError(_0x42a5ac,_0xfd8967(0x148));}return _0xb6decc;}async function getOpenOrders(){const _0xa0cfaa=_0x1c937b;let _0x440dee;allOpenOrders=[];try{for(const _0x43c550 of config[_0xa0cfaa(0xfa)]){!_0x43c550[_0xa0cfaa(0x185)]&&_0x43c550[_0xa0cfaa(0x1f9)]!=config[_0xa0cfaa(0x20c)]&&(_0x440dee=await exchange['fetchOpenOrders'](_0x43c550[_0xa0cfaa(0x1f3)]),_0x440dee[_0xa0cfaa(0x1f7)]>0x0&&allOpenOrders[_0xa0cfaa(0x190)](_0x440dee[0x0]));}}catch(_0x5cf8dd){await handleError(_0x5cf8dd,_0xa0cfaa(0x1e7));}}async function handleOpenOrders(_0x7cc381=0x0){const _0x22ebb3=_0x1c937b;allOpenOrders[_0x22ebb3(0x1f7)]==0x0&&lockOrders==ORDERS[_0x22ebb3(0xd5)]&&allOrdersPlaced&&(_0x7cc381==0x0?(logger[_0x22ebb3(0x181)](_0x22ebb3(0x25f)),_0x7cc381++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x22ebb3(0x1d9)),validateOrders(_0x22ebb3(0x1fe))));}async function testAPI(_0x132f9e){const _0x1e8e78=_0x1c937b,_0x258066=ccxt[_0x1e8e78(0x224)][_0x132f9e[_0x1e8e78(0x242)][_0x1e8e78(0x1a3)]()],_0x19da41=new _0x258066({'apiKey':_0x132f9e[_0x1e8e78(0x104)],'secret':_0x132f9e[_0x1e8e78(0x112)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x132f9e[_0x1e8e78(0x194)])_0x19da41[_0x1e8e78(0x1a2)]=_0x132f9e[_0x1e8e78(0x194)];try{await _0x19da41[_0x1e8e78(0x124)]();}catch(_0x2e2101){throw _0x2e2101;}}function cloneDeep(_0x460ead){const _0x36e362=_0x1c937b;return JSON[_0x36e362(0x1b7)](JSON['stringify'](_0x460ead));}async function getPortfolio(_0x256afa){const _0x8ecf30=_0x1c937b;let _0x1c01f3=[],_0x220fc3=[],_0xce323b=[],_0x280926;if(_0x256afa[_0x8ecf30(0x104)]!==_0x8ecf30(0xea)||_0x256afa[_0x8ecf30(0x112)]!=='************'||_0x256afa[_0x8ecf30(0x194)]&&_0x256afa[_0x8ecf30(0x194)]!==_0x8ecf30(0xea)){if(config[_0x8ecf30(0x242)]){if(_0x256afa['apiKey']==_0x8ecf30(0xea))_0x256afa[_0x8ecf30(0x104)]=config[_0x8ecf30(0x104)];if(_0x256afa[_0x8ecf30(0x112)]==_0x8ecf30(0xea))_0x256afa[_0x8ecf30(0x112)]=config['apiSecret'];if(_0x256afa[_0x8ecf30(0x194)]==_0x8ecf30(0xea))_0x256afa[_0x8ecf30(0x194)]=config[_0x8ecf30(0x194)];try{await testAPI(_0x256afa);}catch(_0x45b029){if(_0x45b029[_0x8ecf30(0x1ce)]()[_0x8ecf30(0x118)](_0x8ecf30(0x257))){logger[_0x8ecf30(0x181)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x8ecf30(0xfa),![]);return;}else{handleError(_0x45b029,_0x8ecf30(0x11a));return;}}}await initExchange(_0x256afa[_0x8ecf30(0x242)],_0x256afa[_0x8ecf30(0x104)],_0x256afa[_0x8ecf30(0x112)],_0x256afa[_0x8ecf30(0x194)]);try{await loadSymbols();}catch(_0x3d1045){if(_0x3d1045[_0x8ecf30(0x1ce)]()[_0x8ecf30(0x118)](_0x8ecf30(0x257))){proxyEmit(_0x8ecf30(0xfa),![]);return;}else{handleError(_0x3d1045,_0x8ecf30(0x103));return;}}const _0xfe352f=await getCoins(![],_0x256afa[_0x8ecf30(0x20c)]);_0xce323b=cloneDeep(_0xfe352f[0x1]);}else _0xce323b=cloneDeep(currentCoinsAll);if(_0x256afa[_0x8ecf30(0x20c)]=='')proxyEmit(_0x8ecf30(0xfa),_0xce323b);else{_0xce323b[_0x8ecf30(0x24e)](_0x2f62bf=>{const _0x1831c4=_0x8ecf30;if(_0x2f62bf['coin']!=_0x256afa[_0x1831c4(0x20c)])_0x1c01f3[_0x1831c4(0x190)](_0x2f62bf[_0x1831c4(0x1f3)]);});if(_0x1c01f3['length']==0x0)logHistory(_0x8ecf30(0x1d7),_0x8ecf30(0xf1));else{try{_0x220fc3=await exchange['fetchTickers'](_0x1c01f3);}catch(_0x19979b){if(_0x19979b[_0x8ecf30(0x1ce)]()[_0x8ecf30(0x118)]('AuthenticationError')){proxyEmit(_0x8ecf30(0xfa),![]);return;}else{handleError(_0x19979b,'getPortfolio(2)');return;}}_0xce323b[_0x8ecf30(0x24e)](_0xcdccb7=>{const _0x5f2bdf=_0x8ecf30;_0xcdccb7[_0x5f2bdf(0x1f9)]!=_0x256afa[_0x5f2bdf(0x20c)]?_0x280926=_0xcdccb7[_0x5f2bdf(0x16f)]?0x1/_0x220fc3[_0xcdccb7[_0x5f2bdf(0x1f3)]]['last']:_0x220fc3[_0xcdccb7[_0x5f2bdf(0x1f3)]][_0x5f2bdf(0x140)]:_0x280926=0x1,_0xcdccb7['price']=formatResult(_0x280926,0x8);}),proxyEmit('portfolio',_0xce323b);}}}function truncateTradeAmount(_0x40d6d4,_0x57a66e){let _0x2960c7=0x0;try{_0x2960c7=exchange['amountToPrecision'](_0x40d6d4,_0x57a66e);}catch(_0x3d1b6a){}return _0x2960c7;}function checkMinimums(_0x463c59){const _0x3cfb2e=_0x1c937b;let _0x5174bf=!![];const _0x3a3cb4=!_0x463c59[_0x3cfb2e(0x16f)]?markets[_0x463c59[_0x3cfb2e(0x1f3)]][_0x3cfb2e(0x18a)][_0x3cfb2e(0x231)][_0x3cfb2e(0x22a)]:markets[_0x463c59[_0x3cfb2e(0x1f3)]][_0x3cfb2e(0x18a)][_0x3cfb2e(0xee)][_0x3cfb2e(0x22a)],_0x3a5b09=!_0x463c59[_0x3cfb2e(0x16f)]?markets[_0x463c59[_0x3cfb2e(0x1f3)]]['limits'][_0x3cfb2e(0xee)]['min']:markets[_0x463c59[_0x3cfb2e(0x1f3)]][_0x3cfb2e(0x18a)][_0x3cfb2e(0x231)][_0x3cfb2e(0x22a)],_0x2c9443=truncateTradeAmount(_0x463c59['symbol'],_0x463c59[_0x3cfb2e(0x188)]);_0x463c59[_0x3cfb2e(0x188)]=_0x2c9443;if(Math[_0x3cfb2e(0xd1)](_0x2c9443)<_0x3a3cb4)_0x5174bf=![];if(Math['abs'](_0x2c9443)*_0x463c59[_0x3cfb2e(0x140)]<_0x3a5b09)_0x5174bf=![];if(_0x463c59['side']==_0x3cfb2e(0x238)){let _0x5fbd3f=config[_0x3cfb2e(0xfa)][_0x3cfb2e(0xe4)](_0x416a47=>_0x416a47[_0x3cfb2e(0x1f9)]==_0x463c59['coin']);if(_0x5fbd3f[_0x3cfb2e(0x14b)]>0x0){if(Math[_0x3cfb2e(0xd1)](_0x2c9443)>_0x463c59['number']-_0x5fbd3f[_0x3cfb2e(0x14b)])_0x5174bf=![];}else{if(Math[_0x3cfb2e(0xd1)](_0x2c9443)>_0x463c59[_0x3cfb2e(0x199)])_0x5174bf=![];}}if(_0x463c59[_0x3cfb2e(0x21c)]=='buy'){let _0x136e39=config[_0x3cfb2e(0xfa)][_0x3cfb2e(0xe4)](_0x2dc898=>_0x2dc898[_0x3cfb2e(0x1f9)]==config[_0x3cfb2e(0x20c)]),_0x4bebe0=currentCoins[_0x3cfb2e(0xe4)](_0x19dc54=>_0x19dc54[_0x3cfb2e(0x1f9)]==config[_0x3cfb2e(0x20c)]);if(_0x136e39['offset']>0x0){if(Math[_0x3cfb2e(0xd1)](_0x2c9443)*_0x463c59['last']>_0x4bebe0[_0x3cfb2e(0x199)]-_0x136e39[_0x3cfb2e(0x14b)])_0x5174bf=![];}else{if(Math[_0x3cfb2e(0xd1)](_0x2c9443)*_0x463c59[_0x3cfb2e(0x140)]>_0x4bebe0['number'])_0x5174bf=![];}}return _0x5174bf;}async function getBalances(_0x55b04f=!![]){const _0x8a874a=_0x1c937b;let _0x9b7b8a=0x0,_0x13aba7;const _0xde64d7=config['threshold'];if(config[_0x8a874a(0x171)]&&config[_0x8a874a(0x1b2)]<0x0)await validate24hChanges();currentCoins[_0x8a874a(0x24e)](_0x38e830=>{const _0x2bb50e=_0x8a874a;if(_0x38e830['coin']!=config[_0x2bb50e(0x20c)]){let _0x3dfbdc=global[_0x2bb50e(0x1e0)][noslash(_0x38e830[_0x2bb50e(0x1f3)])];_0x13aba7=_0x38e830[_0x2bb50e(0x16f)]?0x1/_0x3dfbdc:_0x3dfbdc;}else _0x13aba7=0x1;let _0x4375cd=_0x38e830[_0x2bb50e(0x199)]*_0x13aba7;_0x9b7b8a+=_0x4375cd,_0x38e830[_0x2bb50e(0x140)]=formatResult(Number(_0x13aba7),0x8),_0x38e830[_0x2bb50e(0x18f)]=_0x4375cd;}),currentCoins[_0x8a874a(0x24e)](_0x525d5d=>{const _0x335544=_0x8a874a;let _0x20a88e=config[_0x335544(0xfa)][_0x335544(0xe4)](_0x54ef3d=>_0x54ef3d[_0x335544(0x1f9)]==_0x525d5d['coin']),_0x552181=Number(_0x20a88e[_0x335544(0xf2)]),_0x300ea1=_0x525d5d[_0x335544(0x18f)]/_0x9b7b8a*0x64,_0x5b6280=_0x552181*_0x9b7b8a/0x64/_0x525d5d[_0x335544(0x140)]-_0x525d5d[_0x335544(0x199)];_0x525d5d['distribution']=formatResult(_0x300ea1,0x3),_0x525d5d[_0x335544(0x225)]=formatResult(_0x552181,0x3),_0x525d5d[_0x335544(0x188)]=formatResult(_0x5b6280,0x8),_0x525d5d[_0x335544(0x21c)]='',_0x525d5d[_0x335544(0x183)]=![];if(_0x525d5d[_0x335544(0x1f9)]!=config[_0x335544(0x20c)]){if(_0x525d5d[_0x335544(0xf2)]>_0x552181)_0x525d5d[_0x335544(0x21c)]=_0x335544(0x238),_0x525d5d[_0x335544(0x183)]=checkMinimums(_0x525d5d);else _0x525d5d[_0x335544(0xf2)]<_0x552181&&(_0x525d5d[_0x335544(0x21c)]=_0x335544(0x167),_0x525d5d[_0x335544(0x183)]=checkMinimums(_0x525d5d));}_0x525d5d[_0x335544(0x1b3)]=_0x525d5d[_0x335544(0xf2)]/_0x525d5d[_0x335544(0x225)]-0x1;if(_0x525d5d[_0x335544(0x1b1)]=='filled'||_0x525d5d[_0x335544(0x1b1)]==_0x335544(0x177))_0x525d5d[_0x335544(0x1b1)]=_0x335544(0x1db);}),currentCoins[_0x8a874a(0x25d)]((_0x1b05e8,_0x39d000)=>_0x1b05e8[_0x8a874a(0x1b3)]<_0x39d000[_0x8a874a(0x1b3)]?0x1:_0x39d000[_0x8a874a(0x1b3)]<_0x1b05e8[_0x8a874a(0x1b3)]?-0x1:0x0);const _0x36d12e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x36d12e[_0x8a874a(0x206)],'usd':_0x36d12e[_0x8a874a(0xed)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0xde64d7},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x55b04f){if(config[_0x8a874a(0x171)])headlessMode({'portfolio':currentCoins,'threshold':_0xde64d7});else{if(lockOrders==ORDERS[_0x8a874a(0xfb)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xde64d7});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x114aa3=getNormalizedPerformance();getStartingBalances(_0x114aa3),emitPerformance(_0x114aa3);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2a70d5=getNormalizedPerformance();emitPerformance(_0x2a70d5),getStartingBalances(_0x2a70d5),logger[_0x8a874a(0x181)](_0x8a874a(0xd4));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x40b420=_0x1c937b;if(!lastBalances)return;let _0x172592=[],_0x516985,_0x515d66=JSON['parse'](lastBalances[_0x40b420(0xfa)]);_0x515d66['sort']((_0x50376f,_0x287716)=>_0x50376f['coin']>_0x287716[_0x40b420(0x1f9)]?0x1:_0x287716['coin']>_0x50376f[_0x40b420(0x1f9)]?-0x1:0x0),_0x515d66[_0x40b420(0x24e)](_0x8e8527=>{const _0x4f83f5=_0x40b420;let _0x40ec58={'coin':_0x8e8527['coin'],'number':_0x8e8527[_0x4f83f5(0x199)],'price':_0x8e8527[_0x4f83f5(0x140)]};_0x172592[_0x4f83f5(0x190)](_0x40ec58);});const _0x4a0c68=await getFiat();_0x516985={'date':lastBalances['time'][_0x40b420(0xe7)]('\x20')[0x0],'eur':_0x4a0c68[_0x40b420(0x206)],'usd':_0x4a0c68['usd'],'coins':_0x172592};let _0x5270e6=dbPerformance['get'](_0x40b420(0x159))[_0x40b420(0xe4)]({'date':_0x516985[_0x40b420(0x1ba)]})[_0x40b420(0x18f)]();_0x5270e6?_0x516985[_0x40b420(0x1ba)]!=config[_0x40b420(0x239)]&&dbPerformance[_0x40b420(0x1b9)]('data')[_0x40b420(0xe4)]({'date':_0x516985[_0x40b420(0x1ba)]})['assign'](_0x516985)['write']():dbPerformance['get'](_0x40b420(0x159))[_0x40b420(0x190)](_0x516985)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x337570=_0x1c937b;let _0x450d53=[];if(dbPerformance['has'](_0x337570(0x159))[_0x337570(0x18f)]()){let _0x13c0fe=dbPerformance[_0x337570(0x1b9)]('data')[_0x337570(0x208)]()[_0x337570(0x1ad)](_0x491ff1=>{const _0x4e54c7=_0x337570;if(_0x491ff1[_0x4e54c7(0x161)][_0x4e54c7(0x1f7)]==0x0)return![];else return!![];})[_0x337570(0x236)](_0x337570(0x1ba))[_0x337570(0x18f)](),_0x617fb6=[...config['liquidity']];_0x617fb6[_0x337570(0x25d)]((_0x197254,_0x5898b8)=>_0x197254['date']>_0x5898b8['date']?-0x1:_0x5898b8[_0x337570(0x1ba)]>_0x197254[_0x337570(0x1ba)]?0x1:0x0);let _0x327bf1=0x1,_0x547139=[],_0x2aba7c=0x0;_0x13c0fe['slice']()[_0x337570(0x16f)]()[_0x337570(0x24e)]((_0x537af6,_0x35008b)=>{const _0x2165c6=_0x337570;if(_0x617fb6[_0x2aba7c]){if(_0x13c0fe[_0x13c0fe[_0x2165c6(0x1f7)]-_0x35008b]&&_0x617fb6[_0x2aba7c][_0x2165c6(0x1ba)]==_0x13c0fe[_0x13c0fe[_0x2165c6(0x1f7)]-_0x35008b]['date']){if(_0x35008b<_0x13c0fe[_0x2165c6(0x1f7)]){let _0x47a606=0x0,_0x2061b8=0x0;_0x13c0fe[_0x13c0fe[_0x2165c6(0x1f7)]-_0x35008b][_0x2165c6(0x161)][_0x2165c6(0x24e)](_0x32a769=>{const _0x39126b=_0x2165c6;_0x2061b8+=_0x32a769[_0x39126b(0x199)]*_0x32a769[_0x39126b(0x22c)];}),_0x617fb6[_0x2aba7c][_0x2165c6(0x221)][_0x2165c6(0x24e)](_0x38ae99=>{const _0x2965f3=_0x2165c6;_0x47a606+=_0x38ae99['number']*_0x38ae99[_0x2965f3(0x22c)];}),_0x327bf1*=_0x47a606/(_0x2061b8-_0x47a606)+0x1;}_0x2aba7c++;}}let _0x5429e3=0x0;_0x537af6[_0x2165c6(0x161)][_0x2165c6(0x24e)](_0xa66b03=>{const _0x194c8b=_0x2165c6;_0x5429e3+=_0xa66b03['number']*_0xa66b03[_0x194c8b(0x22c)];}),_0x547139[_0x13c0fe['length']-_0x35008b-0x1]=_0x5429e3*(_0x327bf1-0x1);});let _0xbc52f4=[];_0x617fb6=[...config[_0x337570(0xe9)]]||[];let _0x277d28=0x0;_0x2aba7c=0x0,_0x13c0fe[_0x337570(0x24e)]((_0x5ecfd6,_0x3341ac)=>{const _0x507ae8=_0x337570;if(_0x617fb6[_0x2aba7c]){const _0x24083c=fns[_0x507ae8(0x1b7)](_0x617fb6[_0x2aba7c]['date'],_0x507ae8(0x216),new Date()),_0x11c890=fns[_0x507ae8(0x1b7)](_0x5ecfd6[_0x507ae8(0x1ba)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x24083c,_0x11c890)){let _0x576097=0x0;_0x617fb6[_0x2aba7c]['changes'][_0x507ae8(0x24e)](_0x23d430=>{const _0x3cdd80=_0x507ae8;!_0xbc52f4[_0x23d430[_0x3cdd80(0x1f9)]]?_0xbc52f4[_0x23d430[_0x3cdd80(0x1f9)]]=_0x23d430[_0x3cdd80(0x199)]:(_0x576097=_0xbc52f4[_0x23d430[_0x3cdd80(0x1f9)]],_0xbc52f4[_0x23d430[_0x3cdd80(0x1f9)]]+=_0x23d430[_0x3cdd80(0x199)]);const _0x44f433=_0x5ecfd6[_0x3cdd80(0x161)][_0x3cdd80(0xe4)](_0x3d9f2f=>_0x3d9f2f[_0x3cdd80(0x1f9)]==_0x23d430[_0x3cdd80(0x1f9)]);(!_0x44f433||_0x44f433['number']==0x0)&&(_0x277d28+=(-_0x23d430['number']-_0x576097)*_0x23d430['price']);}),_0x2aba7c++;}}_0x5ecfd6['coins'][_0x507ae8(0x24e)]((_0x2f8ee7,_0x260f54)=>{const _0x3ad39d=_0x507ae8;_0xbc52f4[_0x2f8ee7['coin']]&&(_0x2f8ee7[_0x3ad39d(0x214)]=_0xbc52f4[_0x2f8ee7[_0x3ad39d(0x1f9)]]);}),_0x450d53[_0x507ae8(0x190)]({'date':_0x5ecfd6[_0x507ae8(0x1ba)],'eur':_0x5ecfd6['eur'],'usd':_0x5ecfd6['usd'],'offset':_0x547139[_0x3341ac],'netoffset':_0x277d28,'coins':_0x5ecfd6[_0x507ae8(0x161)]});});}return _0x450d53;}function emitPerformance(_0x4a8437){const _0x47d994=_0x1c937b;_0x4a8437['length']!==0x0?(proxyEmit(_0x47d994(0xf5),_0x4a8437),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3854c8,_0x480aa0){const _0x5250c0=_0x1c937b;let _0x277647=0x0,_0x1725d5=0x0,_0x1993d5=0x0;_0x3854c8[_0x5250c0(0x161)][_0x5250c0(0x24e)](_0x2611d6=>{const _0x29e34a=_0x5250c0;_0x277647+=_0x2611d6[_0x29e34a(0x199)]*_0x2611d6[_0x29e34a(0x22c)];});_0x480aa0&&(_0x277647+=_0x3854c8[_0x5250c0(0x14b)]);if(config['basecoin']==='BTC'||config[_0x5250c0(0x20c)]===_0x5250c0(0x201))_0x1725d5=_0x277647*_0x3854c8[_0x5250c0(0x206)],_0x1993d5=_0x277647*_0x3854c8[_0x5250c0(0xed)];else{if(usdBasecoins[_0x5250c0(0x118)](config[_0x5250c0(0x20c)]))_0x1725d5=_0x277647*_0x3854c8[_0x5250c0(0x206)]/_0x3854c8[_0x5250c0(0xed)],_0x1993d5=_0x277647;else config[_0x5250c0(0x20c)]==='EUR'&&(_0x1725d5=_0x277647,_0x1993d5=_0x277647*_0x3854c8['usd']/_0x3854c8[_0x5250c0(0x206)]);}return[_0x277647,_0x1725d5,_0x1993d5];}function getKPIs(_0x49b629,_0x962084=_0x1c937b(0x1eb)){const _0x18b544=_0x1c937b,_0x3136c3=config[_0x18b544(0x20c)],_0x56c71a=lastBalances,_0x31f259=currentCoins,_0x1310d6=getNormalizedPerformance(),_0x261335=_0x49b629===_0x18b544(0x20c)?_0x3136c3:_0x49b629===_0x18b544(0x1dd)||_0x49b629===_0x18b544(0x147)?_0x962084:_0x18b544(0x24c)+_0x3136c3,_0x5788eb=_0x49b629===_0x18b544(0x10b)?_0x18b544(0x21f):_0x49b629===_0x18b544(0x147)?_0x18b544(0x21f):_0x261335+_0x18b544(0x197),_0xef81a0=_0x49b629==='net-basecoin'||_0x49b629===_0x18b544(0x147)?_0x18b544(0x21f):_0x261335+'\x20change';let _0x395121=0x0;_0x31f259[_0x18b544(0x24e)](_0x1ed69d=>{const _0x23139e=_0x18b544;_0x395121+=_0x1ed69d['number']*_0x1ed69d[_0x23139e(0x140)];});if(_0x49b629===_0x18b544(0x1dd)||_0x49b629===_0x18b544(0x147)){if(_0x3136c3===_0x18b544(0x154)||_0x3136c3==='ETH')_0x395121=_0x395121*(_0x962084===_0x18b544(0x1eb)?_0x56c71a[_0x18b544(0x206)]:_0x56c71a[_0x18b544(0xed)]);else{if(usdBasecoins[_0x18b544(0x118)](_0x3136c3))_0x395121=_0x395121*(_0x962084===_0x18b544(0x1eb)?_0x56c71a[_0x18b544(0x206)]/_0x56c71a[_0x18b544(0xed)]:0x1);else _0x3136c3===_0x18b544(0x1eb)&&(_0x395121=_0x395121*(_0x962084===_0x18b544(0x1eb)?0x1:_0x56c71a[_0x18b544(0xed)]/_0x56c71a[_0x18b544(0x206)]));}}let _0x4c6158;if(_0x395121!==0x0){if(_0x49b629===_0x18b544(0x20c))_0x4c6158=(_0x395121/startingBalances['basecoin']-0x1)*0x64;else{if(_0x962084===_0x18b544(0x1eb))_0x4c6158=(_0x395121/startingBalances['eur']-0x1)*0x64;else _0x4c6158=(_0x395121/startingBalances[_0x18b544(0xed)]-0x1)*0x64;}let _0x35eaf3=0x0;if(startingBalances['coins'])_0x31f259['forEach'](_0x173f94=>{const _0x58e60c=_0x18b544;let _0x4159f7=startingBalances[_0x58e60c(0x161)][_0x58e60c(0xe4)](_0xd4a528=>_0xd4a528[_0x58e60c(0x1f9)]===_0x173f94['coin']);if(_0x4159f7&&_0x4159f7['coin']&&_0x173f94['number']!==0x0)_0x35eaf3+=_0x4159f7[_0x58e60c(0x199)]*_0x173f94['last'];});let _0x5eb29a=0x0;if(_0x1310d6[_0x18b544(0x1f7)]!==0x0){let _0x5c6a41=_0x1310d6[_0x1310d6[_0x18b544(0x1f7)]-0x1];_0x5eb29a=_0x5c6a41['netoffset'];}_0x35eaf3-=_0x5eb29a;_0x49b629==='net-basecoin'&&(_0x4c6158=(_0x395121-_0x35eaf3)/startingBalances[_0x18b544(0x20c)]*0x64,_0x395121=_0x395121-_0x35eaf3);if(_0x49b629===_0x18b544(0x147)){let _0x1b5f21=_0x962084==='EUR'?startingBalances['eur']:startingBalances[_0x18b544(0xed)];if(_0x3136c3===_0x18b544(0x154)||_0x3136c3===_0x18b544(0x201))_0x35eaf3=_0x962084==='EUR'?_0x35eaf3*_0x56c71a[_0x18b544(0x206)]:_0x35eaf3*_0x56c71a[_0x18b544(0xed)];else{if(usdBasecoins[_0x18b544(0x118)](_0x3136c3))_0x35eaf3=_0x962084===_0x18b544(0x1eb)?_0x35eaf3*_0x56c71a['eur']/_0x56c71a[_0x18b544(0xed)]:_0x35eaf3;else _0x3136c3===_0x18b544(0x1eb)&&(_0x35eaf3=_0x962084==='EUR'?_0x35eaf3:_0x35eaf3*_0x56c71a['usd']/_0x56c71a[_0x18b544(0x206)]);}_0x4c6158=(_0x395121-_0x35eaf3)/_0x1b5f21*0x64,_0x395121=_0x395121-_0x35eaf3;}if(_0x4c6158){if(_0x4c6158<0x64)_0x4c6158=_0x4c6158[_0x18b544(0x1c7)](0x2);else{if(_0x4c6158<0x3e8)_0x4c6158=_0x4c6158[_0x18b544(0x1c7)](0x1);else _0x4c6158=_0x4c6158[_0x18b544(0x1c7)](0x0);}}else _0x4c6158=Number('0')[_0x18b544(0x1c7)](0x2);if(_0x395121){if(Math['abs'](_0x395121)<0.000001)_0x395121=_0x395121[_0x18b544(0x1c7)](0x2);else{if(Math[_0x18b544(0xd1)](_0x395121)<0.1)_0x395121=_0x395121['toFixed'](0x6);else{if(Math['abs'](_0x395121)<0x1)_0x395121=_0x395121['toFixed'](0x5);else{if(Math['abs'](_0x395121)<0xa)_0x395121=_0x395121[_0x18b544(0x1c7)](0x4);else{if(Math['abs'](_0x395121)<0x64)_0x395121=_0x395121['toFixed'](0x3);else{if(Math[_0x18b544(0xd1)](_0x395121)<0x3e8)_0x395121=_0x395121[_0x18b544(0x1c7)](0x2);else _0x395121=_0x395121[_0x18b544(0x1c7)](0x2);}}}}}}else _0x395121=Number('0')[_0x18b544(0x1c7)](0x2);}else _0x4c6158=Number('0')['toFixed'](0x2);return{'value':_0x395121,'change':_0x4c6158,'leftTxt':_0x5788eb,'rightTxt':_0xef81a0};}async function getStartingBalances(_0x1cd609,_0x2ece64=!![]){const _0x3ad50d=_0x1c937b;if(_0x1cd609[_0x3ad50d(0x1f7)]!==0x0){const [_0x15b1a3,_0x54cce3,_0x1a9216]=getPerf(_0x1cd609[0x0],!![]);let _0x27023b=[];config[_0x3ad50d(0xfa)][_0x3ad50d(0x24e)](_0x13cc81=>{const _0x492c67=_0x3ad50d;let _0x5b7921=0x0,_0x29dbdc;config['liquidity']['forEach'](_0x5d2030=>{const _0x57ad27=_0x2a84;let _0x3c636e=_0x5d2030[_0x57ad27(0x221)][_0x57ad27(0xe4)](_0x19fed2=>_0x19fed2[_0x57ad27(0x1f9)]==_0x13cc81['coin']);if(_0x3c636e){_0x5b7921+=_0x3c636e[_0x57ad27(0x199)];if(!_0x29dbdc)_0x29dbdc=_0x3c636e[_0x57ad27(0x22c)];}}),_0x27023b[_0x492c67(0x190)]({'coin':_0x13cc81['coin'],'number':_0x5b7921,'initialprice':_0x29dbdc});});const _0x166da0={'basecoin':_0x15b1a3,'eur':_0x54cce3,'usd':_0x1a9216,'coins':_0x27023b};if(_0x2ece64)proxyEmit(_0x3ad50d(0x1cd),_0x166da0);startingBalances=_0x166da0;}}function headlessMode(_0x1e1213){const _0x3d1d73=_0x1c937b;let _0x1e379a=_0x1e1213[_0x3d1d73(0xfa)],_0x45558d=_0x1e1213[_0x3d1d73(0x202)],_0x71fd9e=[];for(let _0x38ab89 of _0x1e379a){if(_0x38ab89['coin']!=config[_0x3d1d73(0x20c)]){if(_0x38ab89[_0x3d1d73(0x1b3)]>=_0x45558d/0x64){if(_0x38ab89['valid'])_0x71fd9e[_0x3d1d73(0x190)](_0x38ab89);}else{if(_0x38ab89[_0x3d1d73(0x1b3)]<=-_0x45558d/0x64){if(_0x38ab89[_0x3d1d73(0x183)])_0x71fd9e[_0x3d1d73(0x190)](_0x38ab89);}}}}_0x71fd9e[_0x3d1d73(0x1f7)]>0x0&&placeOrder(_0x71fd9e);}function notifyBalance(_0x1c83c8){const _0x49744f=_0x1c937b;let _0x47402d=_0x1c83c8[_0x49744f(0xfa)],_0xe1c8af=_0x1c83c8[_0x49744f(0x202)],_0x4525f8=[];for(let _0xb0a4c3 of _0x47402d){if(_0xb0a4c3[_0x49744f(0x1f9)]!=config[_0x49744f(0x20c)]){if(_0xb0a4c3[_0x49744f(0x1b3)]>=_0xe1c8af/0x64){if(_0xb0a4c3[_0x49744f(0x183)])_0x4525f8[_0x49744f(0x190)](_0xb0a4c3);}else{if(_0xb0a4c3[_0x49744f(0x1b3)]<=-_0xe1c8af/0x64){if(_0xb0a4c3[_0x49744f(0x183)])_0x4525f8[_0x49744f(0x190)](_0xb0a4c3);}}}}if(_0x4525f8[_0x49744f(0x1f7)]>0x0){let _0x5777eb=_0x4525f8[_0x49744f(0x263)](_0x50d8a2=>_0x50d8a2[_0x49744f(0x1f9)]);_0x5777eb[_0x49744f(0x25d)]();let _0xf05c15=_0x5777eb[_0x49744f(0x1b0)](',\x20');if(!lastCoinsToBalance)logHistory(_0x49744f(0x259),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xf05c15;}}function symbolToCoin(_0x4e9db6){const _0x494175=_0x1c937b;let _0x3ad18e;if(_0x4e9db6[_0x494175(0x118)]('/'+config[_0x494175(0x20c)]))_0x3ad18e=_0x4e9db6[_0x494175(0x137)]('/'+config['basecoin'],'');if(_0x4e9db6[_0x494175(0x118)](config['basecoin']+'/'))_0x3ad18e=_0x4e9db6[_0x494175(0x137)](config['basecoin']+'/','');return _0x3ad18e;}async function unlockOrders(){const _0x5e06b7=_0x1c937b;if(allOrdersPlaced&&lockOrders==ORDERS[_0x5e06b7(0xd5)]){logger['debug'](_0x5e06b7(0x234)),lockOrders=ORDERS[_0x5e06b7(0x1ff)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xb46297=await getCoins();[currentCoins,currentCoinsAll]=_0xb46297,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x5e06b7(0xfb)],logger[_0x5e06b7(0x181)](_0x5e06b7(0x108));}}async function validateOrders(_0x9471a1){const _0x24a349=_0x1c937b;if(_0x9471a1)validateOrdersState=_0x9471a1;logger['debug'](_0x24a349(0x20b)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x24a349(0x14d):lockOrders==0x2?_0x24a349(0x20a):'ORDERS.UNLOCKED'));let _0x5d9d9f=[],_0x3abcde=config[_0x24a349(0x17d)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x24a349(0x1ac)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x24a349(0x181)](_0x24a349(0x193)+validateOrdersState),lastOrders[_0x24a349(0x24e)](_0x1e839e=>{const _0x240b77=_0x24a349;let _0x1e97f5=![];_0x1e839e[_0x240b77(0x160)]>0x0&&(_0x1e97f5=!![]),_0x5d9d9f[_0x240b77(0x190)](_0x1e97f5),_0x1e97f5&&config[_0x240b77(0x17d)]!=_0x240b77(0x19c)&&logHistory(_0x240b77(0xfd),_0x240b77(0x229)+_0x1e839e['symbol']+'\x20'+_0x1e839e[_0x240b77(0x21c)]+'\x20#'+formatResult(_0x1e839e[_0x240b77(0x160)],0x8)+'\x20@'+formatResult(_0x1e839e[_0x240b77(0x22c)],0x8));}),_0x5d9d9f[_0x24a349(0x24e)]((_0x36da5a,_0x2d2115)=>{const _0x24aa4b=_0x24a349;if(_0x36da5a)lastOrders[_0x24aa4b(0x1ef)](_0x2d2115,0x1);}),persistOpenOrders(lastOrders);const _0x5849a2=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x24a349(0x13e);if(_0x5d9d9f[_0x24a349(0x118)](![])){if(config[_0x24a349(0x17d)]==_0x24a349(0x19c)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5d9d9f[_0x24a349(0x118)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x24a349(0x19c)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x24a349(0xef))_0x5d9d9f[_0x24a349(0x118)](![])&&(config[_0x24a349(0x17d)]==_0x24a349(0x19c)?logHistory('success',_0x24a349(0x102)+Math['round'](_0x3abcde*validateOrderInterval/0xea60)+_0x24a349(0x1f6)+_0x5849a2):(await cancelOrders(),logHistory(_0x24a349(0xe5),_0x24a349(0x219)+Math[_0x24a349(0x249)](_0x3abcde*validateOrderInterval/0xea60)+_0x24a349(0x1f6)+_0x5849a2))),await unlockOrders();else{if(validateOrdersState==_0x24a349(0x1fe)){if(config['ordertype']!=_0x24a349(0x19c))logHistory(_0x24a349(0xe5),'No\x20more\x20open\x20orders\x20-\x20'+_0x5849a2);await unlockOrders();}}}}}async function cancelOrders(){const _0x51ac3d=_0x1c937b;lastOrders[_0x51ac3d(0x24e)](async _0x463762=>{const _0x2a55f5=_0x51ac3d;try{const _0x3c0cf1=await exchange[_0x2a55f5(0x255)](_0x463762['orderId'],_0x463762[_0x2a55f5(0x1f3)]);}catch(_0x9398e2){if(_0x9398e2[_0x2a55f5(0x1ce)]()[_0x2a55f5(0x118)](_0x2a55f5(0x1cf))){}else await handleError(_0x9398e2,_0x2a55f5(0x110));}});}async function initCoinResults(_0x376e4f){const _0x995089=_0x1c937b;_0x376e4f?logger[_0x995089(0x181)]('Resetting\x20coin\x20results:\x20'+_0x376e4f):logger[_0x995089(0x181)](_0x995089(0x12a)),config[_0x995089(0xfa)][_0x995089(0x24e)](_0x24de9a=>{const _0x556544=_0x995089;if(!_0x24de9a['excluded']&&_0x24de9a[_0x556544(0x1f9)]!=config[_0x556544(0x20c)]){const _0x22a2d7=currentCoins['find'](_0x5a5100=>_0x5a5100[_0x556544(0x1f9)]==_0x24de9a[_0x556544(0x1f9)]),_0x7b8fe1=global[_0x556544(0x1e0)][noslash(_0x24de9a['symbol'])];let _0x2739a9=_0x22a2d7?_0x22a2d7[_0x556544(0x199)]:null,_0x49b760=_0x24de9a[_0x556544(0x16f)]?0x1/_0x7b8fe1:_0x7b8fe1,_0x44670b;config[_0x556544(0xe9)][_0x556544(0x24e)](_0x5b1267=>{const _0x4d3082=_0x556544;!_0x44670b&&(_0x44670b=_0x5b1267['changes']['find'](_0xcdd0e1=>_0xcdd0e1[_0x4d3082(0x1f9)]==_0x24de9a[_0x4d3082(0x1f9)]),_0x44670b&&(_0x2739a9=_0x44670b[_0x4d3082(0x199)],_0x49b760=_0x44670b[_0x4d3082(0x22c)]));});let _0x46c900=dbCoinResults[_0x556544(0x1b9)](_0x556544(0x161))[_0x556544(0xe4)]({'coin':_0x24de9a[_0x556544(0x1f9)]})[_0x556544(0x18f)]();if(!_0x46c900){const _0x400d37={'coin':_0x24de9a[_0x556544(0x1f9)],'number':_0x2739a9,'breakeven':_0x49b760,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x556544(0x1b9)](_0x556544(0x161))['push'](_0x400d37)[_0x556544(0x1a1)]();}else{if(_0x376e4f&&_0x24de9a[_0x556544(0x1f9)]==_0x376e4f){const _0x2fdb10={'coin':_0x24de9a[_0x556544(0x1f9)],'number':_0x2739a9,'breakeven':_0x49b760,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x556544(0x1b9)](_0x556544(0x161))[_0x556544(0xe4)]({'coin':_0x24de9a[_0x556544(0x1f9)]})[_0x556544(0x20f)](_0x2fdb10)[_0x556544(0x1a1)]();}}}});}async function updateCoinResults(_0x152dc8,_0x4dc8c3=![]){const _0x44fd86=_0x1c937b;let _0x5a8562,_0x4c312e,_0x460e69,_0x2b5cce,_0x4d70ef,_0x3f8874,_0x57e317=dbCoinResults[_0x44fd86(0x1b9)](_0x44fd86(0x161))[_0x44fd86(0xe4)]({'coin':_0x152dc8[_0x44fd86(0x1f9)]})[_0x44fd86(0x18f)](),_0x3bcf8d=![];_0x57e317&&Object[_0x44fd86(0x209)](_0x57e317)[_0x44fd86(0x24e)](([_0x423efc,_0x538ac5])=>{if(_0x538ac5==null)_0x3bcf8d=!![];});(!_0x57e317||_0x3bcf8d)&&(await initCoinResults(_0x152dc8['coin']),_0x57e317=dbCoinResults[_0x44fd86(0x1b9)](_0x44fd86(0x161))['find']({'coin':_0x152dc8[_0x44fd86(0x1f9)]})[_0x44fd86(0x18f)]());_0x152dc8[_0x44fd86(0x16f)]&&(_0x3f8874={'filled':_0x152dc8[_0x44fd86(0x160)]*_0x152dc8['price'],'amount':_0x152dc8[_0x44fd86(0x160)]*_0x152dc8['price'],'side':_0x152dc8['side']==_0x44fd86(0x238)?_0x44fd86(0x167):_0x44fd86(0x238),'price':0x1/_0x152dc8[_0x44fd86(0x22c)]},_0x152dc8={..._0x152dc8,..._0x3f8874});_0x4dc8c3?_0x4c312e=_0x152dc8['side']=='buy'?_0x57e317[_0x44fd86(0x199)]+_0x152dc8[_0x44fd86(0x160)]:_0x57e317[_0x44fd86(0x199)]-_0x152dc8[_0x44fd86(0x160)]:_0x4c312e=await getCoinNumber(_0x152dc8[_0x44fd86(0x1f9)]);if(_0x152dc8[_0x44fd86(0x21e)]&&_0x152dc8['fee'][_0x44fd86(0x1e6)]==config[_0x44fd86(0x20c)])_0x5a8562=_0x152dc8[_0x44fd86(0x21e)][_0x44fd86(0xee)];else{if(_0x152dc8['fee']&&_0x152dc8[_0x44fd86(0x21e)][_0x44fd86(0x1e6)]==_0x44fd86(0x145)&&!_0x4dc8c3)_0x5a8562=_0x152dc8[_0x44fd86(0x21e)][_0x44fd86(0xee)]*global['ticker'][_0x44fd86(0x145)+config[_0x44fd86(0x20c)]];else _0x5a8562=defaultFee*_0x152dc8[_0x44fd86(0x160)]*_0x152dc8[_0x44fd86(0x22c)];}_0x152dc8[_0x44fd86(0x21c)]==_0x44fd86(0x167)?(_0x460e69=_0x4c312e!=0x0?(_0x57e317[_0x44fd86(0x23a)]*_0x57e317[_0x44fd86(0x199)]+_0x152dc8[_0x44fd86(0x22c)]*(_0x4c312e-_0x57e317['number'])+_0x5a8562)/_0x4c312e:0x0,_0x2b5cce=_0x57e317[_0x44fd86(0x223)]):(_0x460e69=_0x4c312e!=0x0?(_0x57e317[_0x44fd86(0x23a)]*_0x57e317[_0x44fd86(0x199)]-_0x152dc8[_0x44fd86(0x22c)]*(_0x57e317['number']-_0x4c312e)+_0x5a8562)/_0x4c312e:0x0,_0x2b5cce=_0x57e317[_0x44fd86(0x223)]+(_0x152dc8[_0x44fd86(0x22c)]-_0x57e317[_0x44fd86(0x23a)])*_0x152dc8['filled']);_0x4d70ef=(_0x152dc8[_0x44fd86(0x22c)]-_0x460e69-_0x5a8562/_0x152dc8[_0x44fd86(0x160)])*_0x4c312e;let _0x22c181={'coin':_0x152dc8[_0x44fd86(0x1f9)],'number':_0x4c312e,'breakeven':formatResult(_0x460e69,0x8),'realized':formatResult(_0x2b5cce,0x8),'unrealized':formatResult(_0x4d70ef,0x8),'fees':formatResult(_0x57e317[_0x44fd86(0xec)]+_0x5a8562,0x8),'sells':_0x152dc8[_0x44fd86(0x21c)]=='sell'?_0x57e317[_0x44fd86(0x146)]+0x1:_0x57e317['sells'],'buys':_0x152dc8[_0x44fd86(0x21c)]==_0x44fd86(0x167)?_0x57e317['buys']+0x1:_0x57e317[_0x44fd86(0x22e)]};dbCoinResults[_0x44fd86(0x1b9)]('coins')[_0x44fd86(0xe4)]({'coin':_0x152dc8[_0x44fd86(0x1f9)]})[_0x44fd86(0x20f)](_0x22c181)['write']();if(!_0x4dc8c3){if(_0x152dc8['fee']&&_0x152dc8[_0x44fd86(0x21e)][_0x44fd86(0x1e6)]==_0x44fd86(0x145)){const _0xc309fc=currentCoins[_0x44fd86(0xe4)](_0x505763=>_0x505763[_0x44fd86(0x1f9)]==_0x44fd86(0x145));if(_0xc309fc){let _0x210b6f=dbCoinResults[_0x44fd86(0x1b9)](_0x44fd86(0x161))[_0x44fd86(0xe4)]({'coin':_0x44fd86(0x145)})[_0x44fd86(0x18f)]();_0x22c181={..._0x210b6f,'number':_0xc309fc['number']},dbCoinResults[_0x44fd86(0x1b9)](_0x44fd86(0x161))[_0x44fd86(0xe4)]({'coin':_0x44fd86(0x145)})[_0x44fd86(0x20f)](_0x22c181)[_0x44fd86(0x1a1)]();}}}}async function placeOrder(_0x14cf5d){const _0x53f9a2=_0x1c937b,_0x5f319c=config[_0x53f9a2(0x17d)]==_0x53f9a2(0x19c)?'market':_0x53f9a2(0x10e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x53f9a2(0xd5)],allOrdersPlaced=![],validateOrdersState=_0x53f9a2(0x214);let _0x293e1f=![];lastOrders=[];for(const _0x2ea10a of _0x14cf5d){let _0x2cc8a6,_0x55e029,_0x25590c,_0x16f2bb,_0x4ceb09,_0x54fa99=_0x2ea10a[_0x53f9a2(0x1f3)];try{const _0x597041=await exchange['fetchTicker'](_0x54fa99);_0x2cc8a6=_0x2ea10a['reverse']?0x1/_0x2ea10a[_0x53f9a2(0x140)]:_0x2ea10a[_0x53f9a2(0x140)],_0x55e029=_0x597041[_0x53f9a2(0xeb)],_0x25590c=_0x597041['ask'];_0x2ea10a[_0x53f9a2(0x16f)]?(_0x16f2bb=_0x2ea10a[_0x53f9a2(0x21c)]==_0x53f9a2(0x167)?_0x53f9a2(0x238):_0x53f9a2(0x167),_0x4ceb09=Math['abs'](_0x2ea10a[_0x53f9a2(0x188)])/_0x2cc8a6):(_0x16f2bb=_0x2ea10a[_0x53f9a2(0x21c)],_0x4ceb09=Math[_0x53f9a2(0xd1)](_0x2ea10a[_0x53f9a2(0x188)]));_0x5f319c==_0x53f9a2(0x10e)&&(config[_0x53f9a2(0x17d)]==_0x53f9a2(0x1e8)&&(_0x2cc8a6=_0x16f2bb==_0x53f9a2(0x167)?_0x55e029:_0x25590c),config[_0x53f9a2(0x17d)]==_0x53f9a2(0x135)&&(_0x2cc8a6=_0x16f2bb==_0x53f9a2(0x167)?_0x25590c:_0x55e029));_0x4ceb09=formatResult(_0x4ceb09,0x8),_0x2cc8a6=formatResult(_0x2cc8a6,0x8);const _0x21c123=_0x16f2bb==_0x53f9a2(0x238)?config[_0x53f9a2(0x21d)]?String[_0x53f9a2(0x213)]('0x'+config[_0x53f9a2(0x21d)])+'\x20':'':config[_0x53f9a2(0x168)]?String[_0x53f9a2(0x213)]('0x'+config[_0x53f9a2(0x168)])+'\x20':'',_0x42be65=_0x5f319c=='market'?'Market':config[_0x53f9a2(0x17d)]=='limit-high'?_0x53f9a2(0x15c):_0x53f9a2(0x1c2),_0x2c27f5=(Math[_0x53f9a2(0x260)](Math[_0x53f9a2(0x243)]()*0x35a4e900)+0x5f5e100)[_0x53f9a2(0x1ce)]();lastOrders['push']({'customId':_0x2c27f5,'symbol':_0x54fa99,'coin':_0x2ea10a[_0x53f9a2(0x1f9)],'amount':_0x4ceb09,'price':_0x2cc8a6,'side':_0x16f2bb,'reverse':_0x2ea10a[_0x53f9a2(0x16f)],'filled':0x0});if(_0x5f319c==_0x53f9a2(0x19c))logHistory(_0x53f9a2(0xfd),''+_0x21c123+_0x42be65+_0x53f9a2(0x106)+_0x54fa99+'\x20'+_0x16f2bb+'\x20#'+formatResult(_0x4ceb09,0x8)+'\x20@'+formatResult(_0x2cc8a6,0x8));else logHistory(_0x53f9a2(0xfd),''+_0x21c123+_0x42be65+_0x53f9a2(0x106)+_0x54fa99+'\x20'+_0x16f2bb+'\x20#'+formatResult(_0x4ceb09,0x8)+'\x20@'+formatResult(_0x2cc8a6,0x8));let _0x1051a1;_0x5f319c==_0x53f9a2(0x19c)?_0x16f2bb=='buy'&&['Bybit',_0x53f9a2(0x1a7),_0x53f9a2(0x1cb),_0x53f9a2(0xda),_0x53f9a2(0x156)][_0x53f9a2(0x118)](config[_0x53f9a2(0x242)])?_0x1051a1=await exchange['createOrder'](_0x54fa99,_0x5f319c,_0x16f2bb,_0x4ceb09,_0x2cc8a6):_0x1051a1=await exchange[_0x53f9a2(0x24a)](_0x54fa99,_0x5f319c,_0x16f2bb,_0x4ceb09,undefined):_0x1051a1=await exchange[_0x53f9a2(0x24a)](_0x54fa99,_0x5f319c,_0x16f2bb,_0x4ceb09,_0x2cc8a6);logger[_0x53f9a2(0x181)](_0x53f9a2(0x1e5)+_0x1051a1['id']+_0x53f9a2(0x16e)+_0x2c27f5);const _0xfc8027=lastOrders[_0x53f9a2(0x1f7)]-0x1;if(_0xfc8027>=0x0&&lastOrders[_0xfc8027][_0x53f9a2(0x23e)]==_0x2c27f5){lastOrders[_0xfc8027]['orderId']=_0x1051a1['id'];if(_0x1051a1[_0x53f9a2(0x231)])lastOrders[_0xfc8027][_0x53f9a2(0x231)]=_0x1051a1[_0x53f9a2(0x231)];if(_0x1051a1[_0x53f9a2(0x22c)])lastOrders[_0xfc8027][_0x53f9a2(0x22c)]=_0x1051a1['price'];lastOrders[_0xfc8027][_0x53f9a2(0x21e)]=_0x1051a1[_0x53f9a2(0x21e)];}if(config[_0x53f9a2(0x1e2)]!=0x0){let _0x3b165c=null;if(cooldownTracker[_0x53f9a2(0x1f7)]==config[_0x53f9a2(0x1e2)]-0x1)_0x3b165c=cooldownTracker[_0x53f9a2(0x211)]();const _0x42c6eb=getTimeStamp();cooldownTracker['push'](_0x42c6eb);if(_0x3b165c){const _0x39a4db=fns[_0x53f9a2(0x1e3)](new Date(_0x42c6eb),new Date(_0x3b165c));if(_0x39a4db<cooldownInterval){logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0x1c5)+config[_0x53f9a2(0x1e2)]+_0x53f9a2(0x125)+cooldownInterval/0x3c+_0x53f9a2(0x1da)+cooldownPeriod/(0xe10*0x3e8)+_0x53f9a2(0x17e)),coolingDown=!![];break;}}}}catch(_0x2c225d){if(_0x2c225d[_0x53f9a2(0x1ce)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x2eb332=>_0x2eb332[_0x53f9a2(0x1f3)]!=_0x54fa99),logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0x119)+_0x54fa99),_0x293e1f=!![];else{if(_0x2c225d[_0x53f9a2(0x1ce)]()[_0x53f9a2(0x118)](_0x53f9a2(0x1a4)))lastOrders=lastOrders[_0x53f9a2(0x1ad)](_0x5ecd70=>_0x5ecd70[_0x53f9a2(0x1f3)]!=_0x54fa99),logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0x226)+_0x54fa99),_0x293e1f=!![];else{if(_0x2c225d[_0x53f9a2(0x1ce)]()[_0x53f9a2(0x118)]('InvalidOrder'))lastOrders=lastOrders[_0x53f9a2(0x1ad)](_0x47fdfd=>_0x47fdfd[_0x53f9a2(0x1f3)]!=_0x54fa99),logHistory(_0x53f9a2(0x1d7),'Order\x20is\x20invalid:\x20'+_0x54fa99),logger[_0x53f9a2(0x181)](_0x2c225d),_0x293e1f=!![];else _0x2c225d[_0x53f9a2(0x1ce)]()[_0x53f9a2(0x118)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x53f9a2(0x1ad)](_0x972693=>_0x972693[_0x53f9a2(0x1f3)]!=_0x54fa99),logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0x119)+_0x54fa99),_0x293e1f=!![]):(lastOrders=lastOrders[_0x53f9a2(0x1ad)](_0x5b7189=>_0x5b7189[_0x53f9a2(0x1f3)]!=_0x54fa99),await handleError(_0x2c225d,_0x53f9a2(0x1a6),_0x54fa99));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3b98d0=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x51284d=_0x53f9a2;validateOrders(_0x51284d(0xef));},_0x3b98d0);}else unlockOrders();_0x293e1f&&config[_0x53f9a2(0x171)]&&(logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0xde)),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x53f9a2(0xe5),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0x16d));else lockOrders!=ORDERS[_0x53f9a2(0xfb)]&&(!config[_0x53f9a2(0x171)]&&(config[_0x53f9a2(0x17d)]==_0x53f9a2(0x19c)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x53f9a2(0x1d7),_0x53f9a2(0xff))));}}function persistOpenOrders(_0x39838d){const _0x5e0e5b=_0x1c937b,_0x3fd32d={...config,'openOrders':_0x39838d};let _0x304b6d=dbConfig[_0x5e0e5b(0x1b9)](_0x5e0e5b(0x126))[_0x5e0e5b(0xe4)]({'botID':botID})[_0x5e0e5b(0x18f)]();_0x304b6d&&dbConfig[_0x5e0e5b(0x1b9)](_0x5e0e5b(0x126))[_0x5e0e5b(0xe4)]({'botID':botID})[_0x5e0e5b(0x20f)](_0x3fd32d)[_0x5e0e5b(0x1a1)]();}function restoreOrders(){const _0x544210=_0x1c937b;let _0x2a0067;config['openOrders']&&allOpenOrders[_0x544210(0x24e)](_0x3d41a1=>{const _0x1d643b=_0x544210,_0x27fc0d=config[_0x1d643b(0xe8)]['find'](_0x312f1d=>_0x312f1d[_0x1d643b(0x21b)]==_0x3d41a1['id']);_0x27fc0d&&(lastOrders['push'](_0x27fc0d),_0x2a0067=_0x3d41a1[_0x1d643b(0x115)]);});if(lastOrders[_0x544210(0x1f7)]>0x0){lockOrders=ORDERS[_0x544210(0xd5)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x2f1812=new Date()[_0x544210(0x1a9)](),_0x381ace=config[_0x544210(0x17d)]==_0x544210(0x19c)?validateOrderTimeout*0x3c*0x3e8:config[_0x544210(0x1ac)]*0x3c*0x3e8;if(_0x2a0067+_0x381ace>_0x2f1812){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b4e6d=_0x544210;validateOrders(_0x1b4e6d(0xef));},_0x2a0067+_0x381ace-_0x2f1812);}else validateOrders(_0x544210(0xef));}}async function sendMetricsTelegram(){const _0x2ea18b=_0x1c937b;if(!coinsLoaded){process[_0x2ea18b(0x1df)]({'telegrammsg':_0x2ea18b(0x1c0)},_0x4dab19=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1ca044='';if(config[_0x2ea18b(0x1bc)])_0x1ca044=_0x2ea18b(0x247)+config[_0x2ea18b(0x13d)]+_0x2ea18b(0x14c);else _0x1ca044='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x461b25=getKPIs(_0x2ea18b(0x20c)),_0x368475=getKPIs('fiat',config['fiat']),_0x2b3999=getKPIs(_0x2ea18b(0x10b)),_0x3f80c7=getKPIs(_0x2ea18b(0x147),config['fiat']);_0x1ca044+=_0x2ea18b(0xd9),_0x1ca044+=_0x461b25['leftTxt']+_0x2ea18b(0x12f)+_0x461b25[_0x2ea18b(0x18f)]+'\x0a',_0x1ca044+=_0x461b25[_0x2ea18b(0x184)]+':\x20'+_0x461b25[_0x2ea18b(0x15d)]+'%\x0a',_0x1ca044+=_0x368475['leftTxt']+_0x2ea18b(0x12f)+_0x368475[_0x2ea18b(0x18f)]+'\x0a',_0x1ca044+=_0x368475[_0x2ea18b(0x184)]+':\x20'+_0x368475[_0x2ea18b(0x15d)]+'%\x0a',_0x1ca044+=_0x2b3999[_0x2ea18b(0x220)]+':\x20'+_0x2b3999[_0x2ea18b(0x18f)]+'\x20('+config['basecoin']+')\x0a',_0x1ca044+=_0x2b3999[_0x2ea18b(0x184)]+':\x20'+_0x2b3999[_0x2ea18b(0x15d)]+_0x2ea18b(0x141)+config[_0x2ea18b(0x20c)]+')\x0a',_0x1ca044+=_0x3f80c7[_0x2ea18b(0x220)]+':\x20'+_0x3f80c7[_0x2ea18b(0x18f)]+'\x20('+config[_0x2ea18b(0x1dd)]+')\x0a',_0x1ca044+=_0x3f80c7[_0x2ea18b(0x184)]+':\x20'+_0x3f80c7[_0x2ea18b(0x15d)]+_0x2ea18b(0x141)+config[_0x2ea18b(0x1dd)]+')\x0a',_0x1ca044+='</pre>',process[_0x2ea18b(0x1df)]({'telegrammsg':_0x1ca044},_0x252bd7=>{});}async function sendPortfolioTelegram(){const _0x4bd7ad=_0x1c937b;if(!coinsLoaded){process[_0x4bd7ad(0x1df)]({'telegrammsg':_0x4bd7ad(0x1c0)},_0x160ab4=>{});return;}let _0x58342b='';if(config['showname'])_0x58342b=_0x4bd7ad(0x247)+config[_0x4bd7ad(0x13d)]+_0x4bd7ad(0x227);else _0x58342b='<b>Bot\x20'+botID+_0x4bd7ad(0x227);_0x58342b+=_0x4bd7ad(0xd9),_0x58342b+=_0x4bd7ad(0x1fa),_0x58342b+=_0x4bd7ad(0x18b),_0x58342b+='-------------------------------\x0a',currentCoins[_0x4bd7ad(0x24e)](_0x1889e7=>{const _0x524996=_0x4bd7ad;_0x58342b+=_0x1889e7[_0x524996(0x1f9)][_0x524996(0x14a)](0x7)+'|\x20'+formatPad(_0x1889e7[_0x524996(0xf2)],0x2,0x6)+'|\x20'+formatPad(_0x1889e7[_0x524996(0x225)],0x2,0x6)+'|\x20'+formatPad(_0x1889e7[_0x524996(0x1b3)]*0x64,0x2,0x6)+'\x0a';}),_0x58342b+=_0x4bd7ad(0x142),process[_0x4bd7ad(0x1df)]({'telegrammsg':_0x58342b},_0x4661ed=>{});}function formatPad(_0xfd24c5,_0x2a1bda,_0x393883){const _0x1ebf36=_0x1c937b,_0x5c4716=formatResultString(_0xfd24c5,_0x2a1bda);return _0x5c4716?_0x5c4716[_0x1ebf36(0x1d5)](_0x393883):''['padStart'](_0x393883);}function logHistory(_0x48b358,_0x5a4faf,_0x1e5448=''){const _0xaff530=_0x1c937b;logger[_0xaff530(0x15f)](''+_0x5a4faf);let _0x7f5437={'time':getTimeStamp(),'type':_0x48b358,'event':_0x5a4faf};dbLogs[_0xaff530(0x1b9)](_0xaff530(0xd2))['push'](_0x7f5437)[_0xaff530(0x1a1)]();if(_0x1e5448=='')_0x1e5448=_0x5a4faf;proxyEmit(_0xaff530(0x1c1),{'log':_0x7f5437,'summary':_0x1e5448}),process[_0xaff530(0x1df)]({'telegram':{..._0x7f5437,'botname':config[_0xaff530(0x13d)],'showname':config['showname']}},_0x29d939=>{});}function emitHistory(_0x467d20={}){const _0x2f423c=_0x1c937b;Object['keys'](_0x467d20)[_0x2f423c(0x1f7)]==0x0&&(_0x467d20={'type':[_0x2f423c(0xfd),_0x2f423c(0x1c1)],'event':'','page':0x1});if(_0x467d20[_0x2f423c(0xdf)][_0x2f423c(0x118)](_0x2f423c(0x1c1)))_0x467d20[_0x2f423c(0xdf)][_0x2f423c(0x1ef)](_0x467d20[_0x2f423c(0xdf)][_0x2f423c(0x1b6)](_0x2f423c(0x1c1)),0x1,'error','warning','success');if(dbLogs[_0x2f423c(0x1a8)](_0x2f423c(0xd2))[_0x2f423c(0x18f)]()){let _0x28c01c=dbLogs['get']('logs')['filter'](_0x4f2adc=>{const _0x585c8a=_0x2f423c;if(_0x467d20[_0x585c8a(0xdf)][_0x585c8a(0x1f7)]==0x0)return![];else return _0x467d20[_0x585c8a(0xdf)][_0x585c8a(0x118)](_0x4f2adc[_0x585c8a(0xdf)]);})[_0x2f423c(0x1ad)](_0x2dc321=>{const _0x4bb169=_0x2f423c;if(_0x467d20[_0x4bb169(0x1c1)]=='')return!![];else return _0x2dc321[_0x4bb169(0x1c1)][_0x4bb169(0x1a3)]()[_0x4bb169(0x118)](_0x467d20[_0x4bb169(0x1c1)][_0x4bb169(0x1a3)]());})[_0x2f423c(0x236)](_0x2f423c(0xf9)),_0x854c9f=_0x28c01c[_0x2f423c(0x18f)]()[_0x2f423c(0x1f7)];_0x28c01c=_0x28c01c[_0x2f423c(0x16f)]()[_0x2f423c(0x186)]((_0x467d20['page']-0x1)*logPageSize,_0x467d20['page']*logPageSize-0x1)[_0x2f423c(0x16f)]()['value'](),proxyEmit(_0x2f423c(0x10c),{'logs':_0x28c01c,'total':_0x854c9f});}else proxyEmit(_0x2f423c(0x10c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1d3264){const _0x5c3832=_0x1c937b;if(dbLogs['has'](_0x5c3832(0xd2))[_0x5c3832(0x18f)]()){const _0x461899=dbLogs[_0x5c3832(0x1b9)](_0x5c3832(0xd2))[_0x5c3832(0x236)](_0x5c3832(0xf9))[_0x5c3832(0x1ad)](_0x1160c6=>{const _0xbb694=_0x5c3832;return _0x1160c6['type']==_0xbb694(0xfd);})[_0x5c3832(0x18f)]();dbLogs[_0x5c3832(0x1b9)](_0x5c3832(0xd2))['remove']()[_0x5c3832(0x1a1)](),dbLogs[_0x5c3832(0x1b9)]('logs')[_0x5c3832(0x20f)](_0x461899)[_0x5c3832(0x1a1)](),emitHistory(_0x1d3264);}}async function pauseBot(){const _0x28ac4a=_0x1c937b,_0x4ca7fa=new Date()[_0x28ac4a(0x1a9)]();if(!lastErrorShown||_0x4ca7fa-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4ca7fa;!lastBotPause?(lastBotPause=_0x4ca7fa,consecutivePauses=0x1):(_0x4ca7fa-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x28ac4a(0x1df)]({'stop':_0x28ac4a(0x233)},_0x557e63=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory('error',_0x28ac4a(0x205)+pauseBotInterval/0xea60+_0x28ac4a(0x116)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x377a40=_0x1c937b;botPaused=!![],await sleep(0x3e8),process[_0x377a40(0x1df)]({'stop':'kill'},_0x388998=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x21ca92,_0x142e99){const _0x543e60=_0x1c937b;if(botPaused)return;const _0x237646=config[_0x543e60(0x242)]||_0x543e60(0x23c);if(_0x142e99)logger[_0x543e60(0x181)](_0x543e60(0x22b)+_0x142e99);if(_0x21ca92[_0x543e60(0x1ce)]()[_0x543e60(0x118)](_0x543e60(0xf6)))logHistory(_0x543e60(0x1d7),_0x237646+_0x543e60(0x195));else{if(_0x21ca92['toString']()[_0x543e60(0x118)](_0x543e60(0xd7)))logHistory(_0x543e60(0x1d7),_0x237646+_0x543e60(0x173));else _0x21ca92[_0x543e60(0x1ce)]()[_0x543e60(0x118)](_0x543e60(0x257))?(logHistory(_0x543e60(0x1d7),_0x237646+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory('error',_0x543e60(0x14e))):await handleError(_0x21ca92,null);}}async function handleError(_0x1d565e,_0x24f639,_0xfe14c6=''){const _0x426e9f=_0x1c937b;if(botPaused)return;const _0x339329=config['exchange']||_0x426e9f(0x23c);if(_0x24f639)logger[_0x426e9f(0x181)]('Exception\x20thrown\x20in\x20'+_0x24f639);if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)](_0x426e9f(0x155))||_0x1d565e['toString']()['includes'](_0x426e9f(0x117)))logHistory(_0x426e9f(0x1d7),_0x339329+_0x426e9f(0x16c)),await pauseBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)](_0x426e9f(0x12e))||_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)]('OnMaintenance'))logHistory(_0x426e9f(0x1d7),_0x339329+_0x426e9f(0x111)),await pauseBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()['includes'](_0x426e9f(0x1b4)))logHistory(_0x426e9f(0x1d7),_0x339329+_0x426e9f(0x133)),await pauseBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)](_0x426e9f(0x1ed)))logHistory(_0x426e9f(0x1d7),_0x339329+_0x426e9f(0x1aa)),await pauseBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)](_0x426e9f(0x1fb)))logHistory(_0x426e9f(0x1d7),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x426e9f(0x1d7),_0x426e9f(0x17c)),await killBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)]('InvalidNonce'))logHistory(_0x426e9f(0x1d7),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x426e9f(0x17c)),await killBot();else{if(_0x1d565e instanceof ccxt[_0x426e9f(0x165)])logHistory('error',_0x339329+_0x426e9f(0x24d)),logger[_0x426e9f(0x181)](_0x426e9f(0x1d3),_0x1d565e),await pauseBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)]('API-key\x20format\x20invalid'))logHistory(_0x426e9f(0x1d7),_0x339329+_0x426e9f(0x1de)),logHistory('error',_0x426e9f(0x17c)),await killBot();else{if(_0x1d565e['toString']()[_0x426e9f(0x118)](_0x426e9f(0xd7)))logHistory('error',_0x339329+_0x426e9f(0xd8)),logHistory(_0x426e9f(0x1d7),_0x426e9f(0x17c)),await killBot();else{if(_0x1d565e[_0x426e9f(0x1ce)]()[_0x426e9f(0x118)](_0x426e9f(0x257)))logHistory('error',_0x339329+_0x426e9f(0x250)),logHistory('error',_0x426e9f(0x17c)),await killBot();else{if(_0x1d565e['toString']()[_0x426e9f(0x118)](_0x426e9f(0x1ab)))logHistory(_0x426e9f(0x1d7),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0xfe14c6);else _0x1d565e instanceof ccxt['ExchangeError']?(logHistory(_0x426e9f(0x1d7),_0x339329+'\x20exchange\x20error'),logger[_0x426e9f(0x181)](_0x426e9f(0x1d3),_0x1d565e)):(logHistory('error',_0x426e9f(0x244)),logger[_0x426e9f(0x181)](_0x426e9f(0x1d3),_0x1d565e),await pauseBot());}}}}}}}}}}}function formatResult(_0xd280d2,_0x424149){return parseFloat(_0xd280d2['toFixed'](_0x424149));}function formatResultTruncate(_0x1c9592,_0x6f3f68){const _0x3cd80a=_0x1c937b;let _0x5bf2c6=formatResultString(_0x1c9592,0xa),_0x16cd3e=_0x5bf2c6[_0x3cd80a(0x1b6)]('.');return _0x16cd3e!=-0x1&&(_0x5bf2c6=_0x5bf2c6[_0x3cd80a(0x186)](0x0,_0x16cd3e+_0x6f3f68+0x1)),Number(_0x5bf2c6);}function formatResultString(_0x185233,_0x5a0c4b){const _0x2a1f0a=_0x1c937b;let _0x203544;if(!(''+_0x185233)[_0x2a1f0a(0x118)]('e'))_0x203544=+(Math[_0x2a1f0a(0x249)](_0x185233+'e+'+_0x5a0c4b)+'e-'+_0x5a0c4b);else{let _0x9a5c40=(''+_0x185233)[_0x2a1f0a(0xe7)]('e'),_0x5cc2b1='';+_0x9a5c40[0x1]+_0x5a0c4b>0x0&&(_0x5cc2b1='+'),_0x203544=+(Math['round'](+_0x9a5c40[0x0]+'e'+_0x5cc2b1+(+_0x9a5c40[0x1]+_0x5a0c4b))+'e-'+_0x5a0c4b);}return Number(_0x203544)[_0x2a1f0a(0x1c7)](_0x5a0c4b);}function getServerTime(){const _0x3dafd2=_0x1c937b,_0x57508a=new Date();return _0x57508a[_0x3dafd2(0x169)]()+'/'+(_0x57508a[_0x3dafd2(0x105)]()+0x1)[_0x3dafd2(0x1ce)]()[_0x3dafd2(0x1d5)](0x2,'0')+'/'+_0x57508a['getDate']()[_0x3dafd2(0x1ce)]()[_0x3dafd2(0x1d5)](0x2,'0')+'\x20'+_0x57508a[_0x3dafd2(0x18c)]()['toString']()[_0x3dafd2(0x1d5)](0x2,'0')+':'+_0x57508a[_0x3dafd2(0x101)]()[_0x3dafd2(0x1ce)]()[_0x3dafd2(0x1d5)](0x2,'0')+':'+_0x57508a['getSeconds']()[_0x3dafd2(0x1ce)]()[_0x3dafd2(0x1d5)](0x2,'0');}function getTimeStamp(){const _0x25322e=_0x1c937b,_0x5083e6=shiftedTime();return _0x5083e6['getFullYear']()+'/'+(_0x5083e6[_0x25322e(0x105)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5083e6[_0x25322e(0x1ca)]()[_0x25322e(0x1ce)]()[_0x25322e(0x1d5)](0x2,'0')+'\x20'+_0x5083e6[_0x25322e(0x18c)]()['toString']()['padStart'](0x2,'0')+':'+_0x5083e6[_0x25322e(0x101)]()[_0x25322e(0x1ce)]()['padStart'](0x2,'0')+':'+_0x5083e6[_0x25322e(0x1bd)]()[_0x25322e(0x1ce)]()[_0x25322e(0x1d5)](0x2,'0');}function getDate(){const _0x20857b=_0x1c937b,_0x1a5189=shiftedTime();return _0x1a5189[_0x20857b(0x169)]()+'/'+(_0x1a5189['getMonth']()+0x1)[_0x20857b(0x1ce)]()['padStart'](0x2,'0')+'/'+_0x1a5189['getDate']()[_0x20857b(0x1ce)]()[_0x20857b(0x1d5)](0x2,'0');}function getHour(){const _0x8dc375=_0x1c937b,_0x2b8643=shiftedTime();return _0x2b8643[_0x8dc375(0x18c)]()[_0x8dc375(0x1ce)]()[_0x8dc375(0x1d5)](0x2,'0');}function sleep(_0x25f2fe){return new Promise(_0x4b620e=>setTimeout(_0x4b620e,_0x25f2fe));}function shiftedTime(){const _0x43a565=_0x1c937b,_0x5d6244=new Date();let _0x23740d=_0x5d6244;if(config&&config[_0x43a565(0x1af)]!==0x0)_0x23740d=fns[_0x43a565(0x175)](_0x5d6244,{'hours':config[_0x43a565(0x1af)]});return _0x23740d;}function timer(_0x64549c){const _0x2358fb=_0x1c937b,_0x207e35=new Date();!lasttime?console[_0x2358fb(0xfe)](getTimeStamp()+_0x2358fb(0x1b5),_0x64549c,_0x207e35):console['log'](getTimeStamp()+_0x2358fb(0x1b5),_0x64549c,(_0x207e35-lasttime)/0x3e8),lasttime=_0x207e35;}