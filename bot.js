const _0x2c11f6=_0x3a3e;(function(_0x5b511d,_0x3f0e5f){const _0x54c6e2=_0x3a3e,_0x249f23=_0x5b511d();while(!![]){try{const _0x2e5b89=-parseInt(_0x54c6e2(0x183))/0x1*(parseInt(_0x54c6e2(0x179))/0x2)+-parseInt(_0x54c6e2(0x12c))/0x3*(-parseInt(_0x54c6e2(0xc2))/0x4)+-parseInt(_0x54c6e2(0x13f))/0x5+-parseInt(_0x54c6e2(0x203))/0x6+parseInt(_0x54c6e2(0xe7))/0x7*(-parseInt(_0x54c6e2(0x1a2))/0x8)+parseInt(_0x54c6e2(0xcf))/0x9+parseInt(_0x54c6e2(0x24b))/0xa;if(_0x2e5b89===_0x3f0e5f)break;else _0x249f23['push'](_0x249f23['shift']());}catch(_0x17ed06){_0x249f23['push'](_0x249f23['shift']());}}}(_0x4d5a,0x59bbb));const _0x10a7c0=function(){let _0x4f9f3c=!![];return function(_0x32d222,_0x3be1a5){const _0xc8a91a=_0x4f9f3c?function(){const _0x2e7b3b=_0x3a3e;if(_0x3be1a5){const _0x5eed16=_0x3be1a5[_0x2e7b3b(0x12b)](_0x32d222,arguments);return _0x3be1a5=null,_0x5eed16;}}:function(){};return _0x4f9f3c=![],_0xc8a91a;};}(),_0x54a8d0=_0x10a7c0(this,function(){const _0x53b0df=_0x3a3e;return _0x54a8d0['toString']()[_0x53b0df(0x213)](_0x53b0df(0xd4))[_0x53b0df(0x1f8)]()[_0x53b0df(0x1cd)](_0x54a8d0)[_0x53b0df(0x213)]('(((.+)+)+)+$');});_0x54a8d0();'use strict';const ccxt=require('ccxt'),low=require(_0x2c11f6(0x206)),FileSync=require(_0x2c11f6(0x107)),fs=require('fs'),fns=require(_0x2c11f6(0x1ad)),Crypt=require(_0x2c11f6(0xdf))['Crypt'],util=require(_0x2c11f6(0x11a)),argv=require(_0x2c11f6(0x23d))(process[_0x2c11f6(0x140)]['slice'](0x2))['argv'],path=require('path');let exchange;global[_0x2c11f6(0x210)]={},global[_0x2c11f6(0x1e8)]={};const usdBasecoins=['USD',_0x2c11f6(0x1ab),_0x2c11f6(0x19e),_0x2c11f6(0x1e5),'USDC',_0x2c11f6(0xc4)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2c11f6(0x12e)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2c11f6(0x1b0)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2c11f6(0xe1))['version'],botID=process[_0x2c11f6(0x140)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x2c11f6(0x128)](botID)&&(console[_0x2c11f6(0x1b3)]('Error:\x20Invalid\x20argument\x20'+botID+_0x2c11f6(0xdd)),killBot());const userID=process[_0x2c11f6(0x140)][0x3]||'',configpath=userID?_0x2c11f6(0x189)+userID+'/':_0x2c11f6(0x189),logspath=userID?_0x2c11f6(0x205)+userID+'/':_0x2c11f6(0x205),loggerfile=fs[_0x2c11f6(0x1de)](logspath+_0x2c11f6(0xd6),{'flags':'a'});!fs[_0x2c11f6(0xfd)](configpath)&&fs[_0x2c11f6(0x215)](configpath);!fs[_0x2c11f6(0xfd)](logspath)&&fs[_0x2c11f6(0x215)](logspath);function _0x4d5a(){const _0x24958d=['-------------------------------\x0a','getHours','amount','fetchTickers','debug','Initiating\x20exchange\x20reload','Uncaught\x20Exception:','botname','lowdb/adapters/FileSync','spot','substring','openOrders','keys','emojisell','number','\x20|\x20lock\x20orders:\x20','performance','startdate','\x20|\x20exchange:\x20','running','Manual\x20balancing\x20required','buy','\x20not\x20available','Uncaught\x20NetworkError:','-performance.json','toggleBotMode','\x20not\x20responding','util','\x20API\x20key\x20is\x20invalid','timestamp','min','recovery','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','canceled','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','bot','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','orderstatus','yyyy/MM/dd','\x20portfolio:</b>\x20\x0a\x0a','test','function','exchange\x20not\x20reloaded','apply','81639cpRYJe','fee','freeze','fetchOpenOrders','Limit\x20(low-margin)','InvalidNonce','indexOf','fetchTicker','has','no\x20additional\x20symbols','toLowerCase','excluded','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','time','padEnd','cancelLoading','AuthenticationError','exchange\x20reloaded','warning','1492275CfNSeH','argv','padStart','differenceInSeconds','getMinutes','ongoing','average','resetHistory','\x20order:\x20','storeConfiguration','deleteHistoryAlerts','active','coin-loading-progress','closed','apiSecret','ask','\x20|\x20Error\x20details:\x20','BTC','split','side','close','market','entries','full','Resetting\x20coin\x20results:\x20','1\x20-\x20Validate\x20orders:\x20','valid','\x20>\x20','writeFile','format','event-history','Avoiding\x20continuous\x20order\x20attempts','bots','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','no\x20open\x20orders','\x20metrics:</b>\x20\x0a\x0a','error','2.6.0','cost','milliseconds','total','Limit\x20(high-margin)','Failed\x20to\x20load\x20coin\x20data\x20for\x20','password','2\x20-\x20Orders\x20unlocked','event','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','0\x20-\x20EXECUTION:\x20','-results.json','1\x20-\x20Unlock\x20orders','leftTxt','status','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20change','.json','Binance','distribution','open','646skkgOr','EUR','1\x20-\x20FILLED:\x20','sell','bb-settings.json','loadSymbols()','net-basecoin','Net\x20effect','unlinkSync','sendPortfolioTelegram','11BwpnGx','isEqual','parse','colorscheme','Initializing\x20coin\x20results','limit-low','./config/','Error\x20while\x20deleting\x20files:\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','2\x20-\x20FILLED\x20unknown\x20order:\x20','************','send','success','\x20-\x20bot\x20not\x20started','InsufficientFunds','none','3\x20-\x20handling\x20FILLED\x20order:\x20','2\x20-\x20Validate\x20orders:\x20','stringify','removed','buys','value','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','forEach','join','usd','portfolio','TUSD','sort','timeshift','getDate','80IMqwjN','rightTxt','getStartingBalances','remove','privateKey','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Portfolio\x20change\x20detected:\x20','netoffset','/USD','BUSD','Executing\x20exchange\x20reload','date-fns','ordertype','offset','UNLOCKED','watchTrades','exchange','log','emojibuy','currency','getSeconds','headless','initclient','MIN_NOTIONAL','write','ETH','shift','yyyy-MM-dd\x27T\x27HH:mm:ss','fetchClosedOrders','filled','getTime','Reset\x20|\x20','botID','startsWith','toFixed','<pre>','message','\x20network\x20error','version','Unfilled\x20order(s)\x20canceled\x20after\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getFullYear','red_yellow_blue','constructor','startnumber','No\x20more\x20open\x20orders\x20-\x20','Fee\x20discount\x20refund\x20detected:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','/EUR','fiat','push','abs','changes','balances','showname','set','secure','RateLimitExceeded','highest','Saving\x20configuration','createWriteStream','price','final','threshold','slice','autoliquidity','bid','USDT','LOCKED','ExchangeNotAvailable','change','net-fiat','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','cloneDeep','recreate','USD','starting-balances','\x20minutes\x20-\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','***','exchanges','symbol','Order\x20filled:\x20','round','startprice','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','toString','basecoin','-config.json','amountToPrecision','fromCodePoint','floor','Unknown\x20error\x20occured','replace',':\x20timer\x20>','pro','\x20:\x20','514092tXNMSq','datetime','./logs/','lowdb','2.3.5','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','bot-','</pre>','timeout','Bot\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limits','limit','ticker','placeOrder','ID:\x20','search','\x20|\x20','mkdirSync','sha256',':\x20Bot\x20','date','OrderNotFound','trade','eur','apiPassword','length','findIndex','decrypt','breakeven','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20orders\x20in\x20less\x20than\x20','\x20hour','restart','-events.json','storeHeadless','target','liquidity','toUpperCase','splice','2.5.0','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ORDERS.UNLOCKED','configuration','coin','type','percentage','reverse','Transaction\x20detection\x20unblocked','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','BNB','configuration-stored','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','added','getPortfolio(1)','RSA-OAEP','must\x20be\x20greater\x20than\x20minimum\x20amount','watchOrders','yargs/yargs','settings','basecoinvalue','change24h','<b>','loading-canceled','cooldown','%\x20(','max','kill','defaults','orderId','coins','cancelOrders()','5649610SUuKCM','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','filter','progress','placeOrder()','assign','1\x20-\x20Handle\x20open\x20orders','Pausing\x20for\x20','includes','28skhfrM','\x20>\x20[DEBUG]\x20','USDP','limit-high','logs','sortBy','\x20|\x20Custom\x20ID:\x20','fees','get','OnMaintenance','concat','Order\x20amount\x20is\x20invalid:\x20','order','1057185tMeySj','find','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','parseISO','apiKey','(((.+)+)+)+$','page','/output-000.log','onepagemode','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20value','loadMarkets','RequestTimeout','data',',\x20must\x20be\x20a\x203\x20digit\x20number','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','hybrid-crypto-js','fetchBalance','./version.json','getMonth','remainingSymbols','cancelOrder','exec','Executed\x20','82376uCmIMI','API-key\x20format\x20invalid','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','getPortfolio(2)','Exchange','initial','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','getCoins()','delta','add','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Order\x20is\x20invalid:\x20','\x20minutes','cancel','ORDERS.LOCKED','args','bb-secure.json','last','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','random','createOrder','recent20','existsSync','BNB/'];_0x4d5a=function(){return _0x24958d;};return _0x4d5a();}const configfile=configpath+_0x2c11f6(0x209)+botID+_0x2c11f6(0x1fa),logfile=configpath+_0x2c11f6(0x209)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x2c11f6(0x117),coinresultsfile=configpath+'bot-'+botID+_0x2c11f6(0x16f),settingsfile=configpath+_0x2c11f6(0x17d),securefile=configpath+_0x2c11f6(0xf7),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x3a3e(_0x295e4e,_0x149173){const _0x25b2c7=_0x4d5a();return _0x3a3e=function(_0x54a8d0,_0x10a7c0){_0x54a8d0=_0x54a8d0-0xc0;let _0x4d5a62=_0x25b2c7[_0x54a8d0];return _0x4d5a62;},_0x3a3e(_0x295e4e,_0x149173);}dbLogs['defaults']({'logs':[],'version':serverversion})[_0x2c11f6(0x1ba)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2c11f6(0x247)]({'data':[],'version':serverversion})[_0x2c11f6(0x1ba)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x2c11f6(0x1ba)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x2c11f6(0x1ba)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2c11f6(0x216),'rsaStandard':_0x2c11f6(0x23a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x12e428=>{const _0x91ca44=_0x2c11f6;console[_0x91ca44(0x1b3)](_0x12e428);},'simple':_0x12a498=>{const _0x206a9d=_0x2c11f6;console[_0x206a9d(0x1b3)](_0x12a498),loggerfile[_0x206a9d(0x1ba)](util[_0x206a9d(0x15c)](_0x12a498)+'\x0a');},'full':async(_0x4a6356,_0x592a04='')=>{const _0x2c0286=_0x2c11f6;let _0x29c70f;if(config[_0x2c0286(0x1d8)])_0x29c70f=getTimeStamp()+':\x20'+config[_0x2c0286(0x106)]+_0x2c0286(0x15a)+_0x4a6356;else _0x29c70f=getTimeStamp()+_0x2c0286(0x217)+botID+'\x20>\x20'+_0x4a6356;console[_0x2c0286(0x1b3)](_0x29c70f),loggerfile['write'](util[_0x2c0286(0x15c)](_0x29c70f)+'\x0a'),_0x592a04&&(console[_0x2c0286(0x1b3)](_0x592a04),loggerfile[_0x2c0286(0x1ba)](util[_0x2c0286(0x15c)](_0x592a04)+'\x0a'));},'debug':async(_0x4e1a75,_0x3dee21='')=>{const _0x6dc38=_0x2c11f6;let _0x49bebc;if(config[_0x6dc38(0x1d8)])_0x49bebc=getTimeStamp()+':\x20'+config[_0x6dc38(0x106)]+_0x6dc38(0xc3)+_0x4e1a75;else _0x49bebc=getTimeStamp()+':\x20Bot\x20'+botID+_0x6dc38(0xc3)+_0x4e1a75;if(debugging)console[_0x6dc38(0x1b3)](_0x49bebc);loggerfile[_0x6dc38(0x1ba)](util['format'](_0x49bebc)+'\x0a');if(_0x3dee21){if(debugging)console[_0x6dc38(0x1b3)](_0x3dee21);loggerfile[_0x6dc38(0x1ba)](util[_0x6dc38(0x15c)](_0x3dee21)+'\x0a');}}};process['on']('uncaughtException',function(_0x4f798f){const _0xd5b3b8=_0x2c11f6;logHistory(_0xd5b3b8(0x163),_0xd5b3b8(0x11f)),logger[_0xd5b3b8(0x103)](_0xd5b3b8(0x105),_0x4f798f);});settings[_0x2c11f6(0x1a0)]!=config[_0x2c11f6(0x1a0)]&&updateTimeshift(settings['timeshift']);settings[_0x2c11f6(0xd7)]!=config[_0x2c11f6(0xd7)]&&updateOnepagemode(settings['onepagemode']);process['send']({'started':'running'},_0x43772a=>{}),initializeProcessListeners();function proxyEmit(_0x32d498,_0x23a333=null){const _0x156339=_0x2c11f6;process[_0x156339(0x18e)]({'function':_0x32d498,'args':_0x23a333},_0x1ef126=>{});}function initializeProcessListeners(){const _0x45a165=_0x2c11f6;process['on'](_0x45a165(0x1c6),_0x703ccb=>{const _0x936008=_0x45a165;switch(Object[_0x936008(0x10b)](_0x703ccb)[0x0]){case _0x936008(0x1a0):_0x703ccb[_0x936008(0x1a0)]!=undefined&&(settings[_0x936008(0x1a0)]=_0x703ccb[_0x936008(0x1a0)],updateTimeshift(settings['timeshift']));break;case _0x936008(0xd7):_0x703ccb[_0x936008(0xd7)]!=undefined&&(settings[_0x936008(0xd7)]=_0x703ccb[_0x936008(0xd7)],updateOnepagemode(settings[_0x936008(0xd7)]));break;case _0x936008(0x15f):_0x703ccb[_0x936008(0x15f)]!=undefined&&(bots=JSON['parse'](_0x703ccb['bots']),proxyEmit('bots',bots));break;case'function':switch(_0x703ccb[_0x936008(0x129)]){case _0x936008(0x1b8):initclient();break;case _0x936008(0x118):toggleBotMode();break;case'emitHistory':emitHistory(_0x703ccb[_0x936008(0xf6)]);break;case _0x936008(0x149):deleteHistoryAlerts(_0x703ccb[_0x936008(0xf6)]);break;case'getPortfolio':getPortfolio(_0x703ccb[_0x936008(0xf6)]);break;case _0x936008(0x148):storeConfiguration(_0x703ccb[_0x936008(0xf6)]);break;case _0x936008(0x226):storeHeadless(_0x703ccb[_0x936008(0xf6)]);break;case'storeFiat':storeFiat(_0x703ccb[_0x936008(0xf6)]);break;case _0x936008(0x146):resetHistory();break;case _0x936008(0x1a4):getStartingBalances(getNormalizedPerformance());break;case _0x936008(0x211):placeOrder(_0x703ccb[_0x936008(0xf6)]);break;case _0x936008(0x13b):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x936008(0x182):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x2c554f=null,_0x442ded=![]){const _0x282324=_0x2c11f6;logger['debug'](_0x282324(0x1c1)+(_0x2c554f&&_0x2c554f[_0x282324(0x21d)]>0x0?'additional\x20symbols\x20'+_0x2c554f[_0x282324(0x19b)](','):_0x282324(0x135))+_0x282324(0x214)+(_0x442ded?_0x282324(0x13d):_0x282324(0x12a))+_0x282324(0x111)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x442ded)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x282324(0xd3)]!=''&&config[_0x282324(0xd3)]!=_0x282324(0x1f1)){if(_0x442ded){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x39f3a2){handleErrorNoStop(_0x39f3a2,_0x282324(0x17e));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x2c554f);const _0xbbd6f9=await getCoins();[currentCoins,currentCoinsAll]=_0xbbd6f9,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x282324(0x21d)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1184f0=_0x2c11f6;exchangeStopped=!![],await exchange[_0x1184f0(0x153)]();}async function reloadExchange(){const _0x51c8f2=_0x2c11f6;logger[_0x51c8f2(0x103)](_0x51c8f2(0x104));while(lockOrders!=ORDERS[_0x51c8f2(0x1b0)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x51c8f2(0x103)](_0x51c8f2(0x1ac)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x240ead=config['exchange'],_0x483a72=config[_0x2c11f6(0xd3)],_0x413d7f=config[_0x2c11f6(0x14d)],_0x3afc2d=config[_0x2c11f6(0x21c)]){const _0x9fbe7c=_0x2c11f6;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x240ead)&&(logHistory(_0x9fbe7c(0x163),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x240ead+'\x20exchange'),killBot());const _0x8db978=ccxt[_0x9fbe7c(0x201)][_0x240ead[_0x9fbe7c(0x136)]()];exchange=new _0x8db978({'apiKey':_0x483a72,'secret':_0x413d7f,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x9fbe7c(0x108)}});if(_0x3afc2d)exchange[_0x9fbe7c(0x16a)]=_0x3afc2d;}function setStableCoins(){const _0x25a604=_0x2c11f6;let _0x220151=config[_0x25a604(0x1f9)]==_0x25a604(0x1bb)?'ETH':_0x25a604(0x150),_0x331705=!allSymbols['includes'](_0x220151+_0x25a604(0x1aa))?'USDT':'USD',_0x4a301f=!allSymbols[_0x25a604(0xc1)](_0x220151+_0x25a604(0x1d2))?_0x331705:'EUR';stablecoins={'eur':{'coin':''+_0x220151+_0x4a301f,'symbol':_0x220151+'/'+_0x4a301f},'usd':{'coin':''+_0x220151+_0x331705,'symbol':_0x220151+'/'+_0x331705}};}async function initwsCcxt(_0x23b18e){const _0x1e917a=_0x2c11f6;_0x23b18e==null&&(_0x23b18e=[],config['portfolio']['forEach'](_0x2cf745=>{const _0x5894ea=_0x3a3e;if(!_0x2cf745['excluded']&&_0x2cf745[_0x5894ea(0x22f)]!=config['basecoin'])_0x23b18e[_0x5894ea(0x1d4)](_0x2cf745[_0x5894ea(0x1f3)]);}));if(!_0x23b18e[_0x1e917a(0xc1)](stablecoins[_0x1e917a(0x21b)][_0x1e917a(0x1f3)]))_0x23b18e[_0x1e917a(0x1d4)](stablecoins[_0x1e917a(0x21b)][_0x1e917a(0x1f3)]);if(!_0x23b18e['includes'](stablecoins[_0x1e917a(0x19c)]['symbol']))_0x23b18e[_0x1e917a(0x1d4)](stablecoins[_0x1e917a(0x19c)][_0x1e917a(0x1f3)]);if(config[_0x1e917a(0x1b2)][_0x1e917a(0x1c3)](_0x1e917a(0x176))){if(!_0x23b18e[_0x1e917a(0xc1)](_0x1e917a(0xfe)+config[_0x1e917a(0x1f9)]))_0x23b18e[_0x1e917a(0x1d4)](_0x1e917a(0xfe)+config[_0x1e917a(0x1f9)]);}loadCoins(_0x23b18e);const _0x9f2d9b=async _0x3fab78=>{const _0x26375c=_0x1e917a,_0x523910=await exchange[_0x26375c(0x133)](_0x3fab78);global[_0x26375c(0x210)][noslash(_0x523910['symbol'])]=_0x523910[_0x26375c(0xf8)];while(!![]){if(!botPaused)try{const _0x50b4cd=await exchange[_0x26375c(0x1b1)](_0x3fab78);global[_0x26375c(0x210)][noslash(_0x50b4cd[0x0]['symbol'])]=_0x50b4cd[0x0]['price'],await sleep(0x3e8);}catch(_0x6d4b39){if(!exchangeStopped)await handleError(_0x6d4b39,_0x26375c(0x1b1),_0x3fab78);}else await sleep(0x64);}},_0x203111=async _0x373f7b=>{const _0x507ad4=_0x1e917a;while(!![]){if(!botPaused)try{const _0x5b7da4=await exchange[_0x507ad4(0x133)](_0x373f7b);global[_0x507ad4(0x1e8)][_0x5b7da4[_0x507ad4(0x1f3)]]=_0x5b7da4[_0x507ad4(0x231)],await sleep(0x3c*0x3e8);}catch(_0x24810a){if(!exchangeStopped)await handleError(_0x24810a,_0x507ad4(0x102),_0x373f7b);}else await sleep(0x64);}},_0x22492e=async()=>{const _0x3eb599=_0x1e917a;while(!![]){if(!botPaused)try{const _0xd6948a=await exchange[_0x3eb599(0x23c)]();_0xd6948a[_0x3eb599(0x19a)](_0x680cea=>{updateNumberCoinsCcxt(_0x680cea);});}catch(_0x2fb140){if(!exchangeStopped)await handleError(_0x2fb140,_0x3eb599(0x23c));}else await sleep(0x64);}};_0x23b18e[_0x1e917a(0x19a)](_0x3bcba=>{_0x9f2d9b(_0x3bcba),_0x203111(_0x3bcba);}),!wsEventsSet&&(wsEventsSet=!![],_0x22492e(),watchTransactions());}async function watchTransactions(){const _0x597172=_0x2c11f6;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xd9ea06=await getCoins(),[_0x279b8a,_0x1226a4]=_0xd9ea06;let _0x270174=[];currentCoins[_0x597172(0x19a)](_0x563132=>{const _0x3c240c=_0x597172,_0x111a16=_0x279b8a[_0x3c240c(0xd0)](_0x21f148=>_0x21f148[_0x3c240c(0x22f)]==_0x563132[_0x3c240c(0x22f)]);if(_0x111a16){if(_0x563132[_0x3c240c(0x10d)]!=_0x111a16[_0x3c240c(0x10d)]){let _0x221b6d;if(_0x563132[_0x3c240c(0x22f)]!=config[_0x3c240c(0x1f9)]){const _0x2ca907=global['ticker'][noslash(_0x563132[_0x3c240c(0x1f3)])];_0x221b6d=_0x563132[_0x3c240c(0x232)]?0x1/_0x2ca907:_0x2ca907;}else _0x221b6d=0x1;_0x270174[_0x3c240c(0x1d4)]({'coin':_0x563132['coin'],'symbol':_0x563132[_0x3c240c(0x1f3)],'price':_0x221b6d,'number':Number(formatResult(_0x111a16[_0x3c240c(0x10d)]-_0x563132[_0x3c240c(0x10d)],0x8)),'basecoinvalue':_0x221b6d*(_0x111a16[_0x3c240c(0x10d)]-_0x563132['number'])});}}});if(_0x270174[_0x597172(0x21d)]==0x1&&!blockTransactionDetection){if(config[_0x597172(0x1e3)]){logger['debug'](_0x597172(0xde)+_0x270174[0x0][_0x597172(0x23f)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x597172(0x1dc)]==0x0||Math[_0x597172(0x1d5)](_0x270174[0x0][_0x597172(0x23f)])>lastFees[_0x597172(0x1dc)]){delete _0x270174[0x0][_0x597172(0x1f3)],delete _0x270174[0x0][_0x597172(0x23f)];let _0x22f5d7=[],_0x32a8c5=[...config['liquidity']]||[],_0x377fa8=config[_0x597172(0x228)];_0x32a8c5['sort']((_0x41cc7a,_0x3a3bd7)=>_0x41cc7a['date']>_0x3a3bd7[_0x597172(0x218)]?-0x1:_0x3a3bd7['date']>_0x41cc7a['date']?0x1:0x0);const _0x1be5b6=getDate();if(_0x32a8c5[0x0]){const _0x5ac478=fns[_0x597172(0x185)](_0x32a8c5[0x0][_0x597172(0x218)],_0x597172(0x126),new Date()),_0x5370ad=fns[_0x597172(0x185)](_0x1be5b6,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x5ac478,_0x5370ad)){_0x22f5d7=_0x32a8c5[0x0][_0x597172(0x1d6)];const _0x1b6b38=_0x22f5d7[_0x597172(0xd0)](_0x3ed4e4=>_0x3ed4e4['coin']==_0x270174[0x0][_0x597172(0x22f)]);_0x1b6b38?(_0x1b6b38[_0x597172(0x10d)]+=_0x270174[0x0]['number'],_0x1b6b38[_0x597172(0x10d)]==0x0&&(_0x22f5d7=_0x22f5d7['filter'](_0x1234d0=>{const _0xbf24f9=_0x597172;return _0x1234d0[_0xbf24f9(0x22f)]!=_0x270174[0x0]['coin'];}))):_0x22f5d7[_0x597172(0x1d4)](_0x270174[0x0]);const _0xd16678=_0x377fa8[_0x597172(0xd0)](_0xf62d8=>_0xf62d8[_0x597172(0x218)]==_0x1be5b6);_0xd16678[_0x597172(0x1d6)]=_0x22f5d7;}else _0x377fa8[_0x597172(0x1d4)]({'date':_0x1be5b6,'changes':[_0x270174[0x0]]});}const _0x1dc711=_0x377fa8[_0x597172(0xd0)](_0x19f735=>_0x19f735['date']==_0x1be5b6);if(_0x1dc711){let _0x439942=!![];_0x1dc711[_0x597172(0x1d6)]['forEach'](_0x558e9b=>{const _0x1c7d7e=_0x597172;if(_0x558e9b[_0x1c7d7e(0x10d)]!=0x0)_0x439942=![];}),_0x439942&&(_0x377fa8=_0x377fa8[_0x597172(0x24d)](_0x263ce6=>{const _0x387260=_0x597172;return _0x263ce6[_0x387260(0x218)]!=_0x1be5b6;}));}let _0x1f8fa9=dbConfig['get']('bot')['find']({'botID':botID})[_0x597172(0x198)]();_0x1f8fa9&&(dbConfig[_0x597172(0xca)](_0x597172(0x123))[_0x597172(0xd0)]({'botID':botID})[_0x597172(0x250)]({'liquidity':_0x377fa8})['write'](),config[_0x597172(0x228)]=_0x377fa8),logHistory(_0x597172(0x18f),_0x597172(0x1a8)+Math[_0x597172(0x1d5)](_0x270174[0x0][_0x597172(0x10d)])+'\x20'+_0x270174[0x0][_0x597172(0x22f)]+'\x20'+(_0x270174[0x0][_0x597172(0x10d)]>0x0?_0x597172(0x238):_0x597172(0x196))+_0x597172(0x138)),proxyEmit(_0x597172(0x22e),emittedConfiguration());}else logger[_0x597172(0x103)](_0x597172(0x1d0)+Math['abs'](_0x270174[0x0][_0x597172(0x10d)])+'\x20'+_0x270174[0x0][_0x597172(0x22f)]+'\x20'+(_0x270174[0x0][_0x597172(0x10d)]>0x0?'added':_0x597172(0x196)));transactionDetected=!![],currentCoins=_0x279b8a,currentCoinsAll=_0x1226a4;}else logger[_0x597172(0x103)](_0x597172(0x1a8)+Math[_0x597172(0x1d5)](_0x270174[0x0][_0x597172(0x10d)])+'\x20'+_0x270174[0x0][_0x597172(0x22f)]+'\x20'+(_0x270174[0x0]['number']>0x0?_0x597172(0x238):_0x597172(0x196))+_0x597172(0x221)),currentCoins=_0x279b8a,currentCoinsAll=_0x1226a4;}await sleep(watchTransactionsInterval);}catch(_0x49f5cf){if(!exchangeStopped)await handleError(_0x49f5cf,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x1db6c6=config['exchange'],_0x2fd97f=![]){const _0x5eba0e=_0x2c11f6;if(allSymbols&&!_0x2fd97f)return;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x5eba0e(0x155)](markets)['forEach'](_0x2ff8eb=>{const _0xfbcfc2=_0x5eba0e;_0x2ff8eb[0x1][_0xfbcfc2(0x14a)]&&_0x2ff8eb[0x1][_0xfbcfc2(0x108)]&&allSymbols[_0xfbcfc2(0x1d4)](_0x2ff8eb[0x0]);});}catch(_0x183161){throw _0x183161;}}async function initclient(){const _0x50d371=_0x2c11f6;emitLoadingProgress(),proxyEmit(_0x50d371(0x22e),emittedConfiguration()),proxyEmit(_0x50d371(0x1f2),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x50d371(0x1d7),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x324d02=getNormalizedPerformance();emitPerformance(_0x324d02),getStartingBalances(_0x324d02);}async function toggleBotMode(){const _0x2e30f8=_0x2c11f6;let _0x65f4ac=dbConfig[_0x2e30f8(0xca)]('bot')[_0x2e30f8(0xd0)]({'botID':botID})[_0x2e30f8(0x198)]();if(_0x65f4ac){const _0x196dfd=!_0x65f4ac[_0x2e30f8(0x1b7)];dbConfig[_0x2e30f8(0xca)](_0x2e30f8(0x123))['find']({'botID':botID})['assign']({'headless':_0x196dfd})[_0x2e30f8(0x1ba)](),config[_0x2e30f8(0x1b7)]=_0x196dfd,proxyEmit(_0x2e30f8(0x22e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x504128=>{});}async function loadCoins(_0x2a0360){const _0x354af1=_0x2c11f6;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x630ea,_0x19695c=0x0,_0x20a886=0x0;_0x2a0360[_0x354af1(0x19a)](_0x301c80=>{const _0x5b1ccb=_0x354af1;loading[_0x5b1ccb(0xe3)][_0x5b1ccb(0x1d4)](_0x301c80);}),loadingCanceled=![];let _0xfd903b=![];while(_0x630ea!=_0x2a0360['length']){_0x630ea=0x0,_0x2a0360[_0x354af1(0x19a)](_0x5693ae=>{const _0x4a511b=_0x354af1;if(global[_0x4a511b(0x210)][noslash(_0x5693ae)]){loading['remainingSymbols']=loading[_0x4a511b(0xe3)][_0x4a511b(0x24d)](_0x428393=>_0x428393!=_0x5693ae);if(!watchedSymbols[_0x4a511b(0xc1)](_0x5693ae))watchedSymbols[_0x4a511b(0x1d4)](_0x5693ae);_0x630ea++;}}),loading[_0x354af1(0x24e)]=Math[_0x354af1(0x1f5)](_0x630ea/_0x2a0360[_0x354af1(0x21d)]*0x64);loading['progress']!=0x64&&(_0x20a886>0x1e*0x5&&(loading[_0x354af1(0x20b)]=!![],emitLoadingProgress()),_0x20a886>0x78*0x5&&!_0xfd903b&&(loading[_0x354af1(0xf4)]=!![],emitLoadingProgress(),_0xfd903b=!![],logHistory('error',_0x354af1(0x169)+loading[_0x354af1(0xe3)]['join'](',\x20')+_0x354af1(0x190)),logHistory(_0x354af1(0x163),_0x354af1(0xc0)+loadCoinsRetryInterval/0xea60+_0x354af1(0xd1)),pidCoinReloading=setTimeout(()=>{const _0x53cb57=_0x354af1;process[_0x53cb57(0x18e)]({'stop':'restart'},_0x42032d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x354af1(0xf4)]=!![],emitLoadingProgress();break;}else _0x630ea!=_0x19695c&&(_0x19695c=_0x630ea,emitLoadingProgress()),_0x20a886++,await sleep(0xc8);}_0x630ea==_0x2a0360[_0x354af1(0x21d)]&&(coinsLoaded=!![],process[_0x354af1(0x18e)]({'status':'enabled','live':_0x354af1(0x112)},_0x57f2f1=>{}),_0xfd903b&&logHistory(_0x354af1(0x18f),_0x354af1(0xed)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2cd2bd=_0x2c11f6;proxyEmit(_0x2cd2bd(0x22e),{...emittedConfiguration(),'configstate':_0x2cd2bd(0x242)});}function emitLoadingProgress(){const _0xf375d5=_0x2c11f6;proxyEmit(_0xf375d5(0x14b),loading);}async function getFiat(){const _0x5e5ffa=_0x2c11f6;let _0x3727e9=global[_0x5e5ffa(0x210)][stablecoins[_0x5e5ffa(0x21b)][_0x5e5ffa(0x22f)]],_0x1e0cc9=global[_0x5e5ffa(0x210)][stablecoins[_0x5e5ffa(0x19c)][_0x5e5ffa(0x22f)]];return{'eur':Number(_0x3727e9),'usd':Number(_0x1e0cc9)};}function capitalize(_0x55ca32){const _0x293b1f=_0x2c11f6;return _0x55ca32['substring'](0x0,0x1)[_0x293b1f(0x229)]()+_0x55ca32[_0x293b1f(0x109)](0x1);}function supportedExchanges(){const _0x1e69da=_0x2c11f6,_0x154a90=['ws','fetchTickers',_0x1e69da(0x133),_0x1e69da(0x1b1),_0x1e69da(0x23c),_0x1e69da(0xe4),'createOrder','fetchOpenOrders',_0x1e69da(0x1be),'fetchBalance'];let _0x23db0a=[],_0x119b6f=[],_0x35f021=ccxt['pro'][_0x1e69da(0x1f2)];_0x35f021[_0x1e69da(0x19a)](_0x5c2032=>{const _0x28e443=_0x1e69da;try{const _0x5522ca=new ccxt[(_0x28e443(0x201))][_0x5c2032]();_0x119b6f[_0x28e443(0x1d4)](_0x5522ca);}catch(_0x2de1d0){}}),_0x119b6f[_0x1e69da(0x19a)](_0x4eb00d=>{const _0x3bfc30=_0x1e69da;let _0x594caf=0x0;_0x154a90[_0x3bfc30(0x19a)](_0x2d349c=>{const _0x52fb6e=_0x3bfc30;_0x2d349c in _0x4eb00d['has']&&_0x4eb00d[_0x52fb6e(0x134)][_0x2d349c]&&_0x594caf++;}),_0x594caf==_0x154a90[_0x3bfc30(0x21d)]&&_0x23db0a['push'](capitalize(_0x4eb00d['id']));});let _0x407ab6=[];return _0x35f021[_0x1e69da(0x19a)](_0x16049a=>{const _0x501eff=_0x1e69da;_0x16049a=capitalize(_0x16049a);if(!_0x23db0a[_0x501eff(0xc1)](_0x16049a))_0x407ab6[_0x501eff(0x1d4)](_0x16049a);}),_0x23db0a;}function setStartDatePerformance(){const _0x436a28=_0x2c11f6;if(config&&config[_0x436a28(0x228)][0x0][_0x436a28(0x1d6)][_0x436a28(0x21d)]!=0x0){const _0x5181fd=config[_0x436a28(0x228)][0x0]['changes'];dbPerformance['get'](_0x436a28(0xdc))[_0x436a28(0xd0)]({'date':config[_0x436a28(0x110)]})[_0x436a28(0x250)]({'coins':_0x5181fd})[_0x436a28(0x1ba)]();}}async function recreateCoinResults(){const _0x34fa5e=_0x2c11f6;let _0x29b110,_0x368906=[];try{const _0x81be55=fns['format'](fns[_0x34fa5e(0xd2)](config[_0x34fa5e(0x110)][_0x34fa5e(0x1ff)](/\//g,'-')),_0x34fa5e(0x1bd));for(const _0x3673b8 of currentCoins){if(_0x3673b8[_0x34fa5e(0x22f)]!=config[_0x34fa5e(0x1f9)]){let _0x3f41a2=0x0,_0xbe20a8,_0x3035f2;_0x29b110=await getAllEventOrders(_0x3673b8['symbol']);if(_0x29b110[_0x34fa5e(0x21d)]>0x0)_0x29b110[_0x34fa5e(0x19a)](_0x29147b=>{const _0x4baf75=_0x34fa5e,_0x3ecba7=_0x3673b8[_0x4baf75(0x1f3)][_0x4baf75(0xc1)](config[_0x4baf75(0x1f9)]+'/');_0x368906[_0x4baf75(0x1d4)]({'datetime':_0x29147b[_0x4baf75(0x204)],'coin':_0x3673b8[_0x4baf75(0x22f)],'symbol':_0x3673b8[_0x4baf75(0x1f3)],'side':_0x29147b[_0x4baf75(0x152)],'reverse':_0x3ecba7,'amount':formatResult(_0x29147b['filled'],0x8),'filled':formatResult(_0x29147b[_0x4baf75(0x1bf)],0x8),'price':formatResult(_0x29147b[_0x4baf75(0x1df)],0x8)}),_0x3f41a2=_0x29147b['side']==_0x4baf75(0x114)?_0x3f41a2+_0x29147b['filled']:_0x3f41a2-_0x29147b[_0x4baf75(0x1bf)];if(!_0x3035f2)_0x3035f2=_0x29147b[_0x4baf75(0x1df)];});_0xbe20a8=_0x3673b8[_0x34fa5e(0x10d)]-_0x3f41a2;let _0x24671e;config[_0x34fa5e(0x228)][_0x34fa5e(0x19a)](_0x5a1bc8=>{const _0x398b65=_0x34fa5e;!_0x24671e&&(_0x24671e=_0x5a1bc8[_0x398b65(0x1d6)][_0x398b65(0xd0)](_0x143ca2=>_0x143ca2[_0x398b65(0x22f)]==_0x3673b8['coin']),_0x24671e&&(_0xbe20a8=_0x24671e[_0x398b65(0x10d)],_0x3035f2=_0x24671e[_0x398b65(0x1df)]));});let _0x4e9ae3=dbCoinResults[_0x34fa5e(0xca)](_0x34fa5e(0x249))['find']({'coin':_0x3673b8[_0x34fa5e(0x22f)]})[_0x34fa5e(0x198)]();_0x4e9ae3={'coin':_0x3673b8[_0x34fa5e(0x22f)],'number':_0xbe20a8,'breakeven':_0x3035f2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x34fa5e(0x249))[_0x34fa5e(0xd0)]({'coin':_0x3673b8['coin']})[_0x34fa5e(0x250)](_0x4e9ae3)[_0x34fa5e(0x1ba)]();}}_0x368906[_0x34fa5e(0x19f)]((_0x1176cc,_0x531686)=>_0x1176cc[_0x34fa5e(0x204)]>_0x531686[_0x34fa5e(0x204)]?0x1:_0x531686[_0x34fa5e(0x204)]>_0x1176cc[_0x34fa5e(0x204)]?-0x1:0x0);let _0x3f9cce=0x0;for(let _0x16b7c2 of _0x368906){await updateCoinResults(_0x16b7c2,!![]);}}catch(_0x20bd02){await handleError(_0x20bd02,'recreateCoinResults()');}}async function getAllEventOrders(_0x25d5f2){const _0x13dfb1=_0x2c11f6;let _0x410861=[],_0x428fef=dbLogs['get']('logs')[_0x13dfb1(0x24d)](_0x14e83d=>{const _0xa5a4a9=_0x13dfb1,_0x5bf138=_0x14e83d['event'][_0xa5a4a9(0x136)]();return _0x5bf138['includes'](_0x25d5f2[_0xa5a4a9(0x136)]())&&(_0x5bf138[_0xa5a4a9(0xc1)](_0xa5a4a9(0x154))&&_0x5bf138[_0xa5a4a9(0xc1)](_0xa5a4a9(0xce))||_0x5bf138['includes'](_0xa5a4a9(0x1bf))&&_0x5bf138[_0xa5a4a9(0xc1)]('order'));})[_0x13dfb1(0xc7)](_0x13dfb1(0x139))[_0x13dfb1(0x198)]();return _0x428fef['forEach'](_0x497aec=>{const _0x5cb6e6=_0x13dfb1,_0x37308e=_0x497aec['event'][_0x5cb6e6(0xc1)]('sell')?_0x5cb6e6(0x17c):'buy',_0x581db3=/#([0-9]|\.)+\s/i,_0x45977f=Number(_0x581db3[_0x5cb6e6(0xe5)](_0x497aec[_0x5cb6e6(0x16c)])[0x0][_0x5cb6e6(0x1e2)](0x1)),_0x3cadd4=/@([0-9]|\.)+$/i,_0x201e5c=Number(_0x3cadd4[_0x5cb6e6(0xe5)](_0x497aec[_0x5cb6e6(0x16c)])[0x0][_0x5cb6e6(0x1e2)](0x1));_0x410861['push']({'datetime':_0x497aec[_0x5cb6e6(0x139)],'coin':symbolToCoin(_0x25d5f2),'symbol':_0x25d5f2,'side':_0x37308e,'amount':_0x45977f,'filled':_0x45977f,'price':_0x201e5c});}),_0x410861;}async function getAllOrders(_0x5b3ac0,_0x5b4e0f){const _0x4a5a7a=_0x2c11f6;let _0x364d51=[];while(_0x5b4e0f<exchange[_0x4a5a7a(0x166)]()){const _0x2e57e2=0x1f4,_0x433ac8=await exchange[_0x4a5a7a(0x1be)](_0x5b3ac0,_0x5b4e0f,_0x2e57e2);if(_0x433ac8['length'])_0x5b4e0f=_0x433ac8[_0x433ac8[_0x4a5a7a(0x21d)]-0x1][_0x4a5a7a(0x11c)]+0x1,_0x364d51=_0x364d51[_0x4a5a7a(0xcc)](_0x433ac8);else break;}return _0x364d51;}async function validate24hChanges(){const _0x38a47f=_0x2c11f6;for(const _0x3fc96c of currentCoins){if(_0x3fc96c[_0x38a47f(0x22f)]!=config[_0x38a47f(0x1f9)]){let _0x1bcc39;_0x3fc96c[_0x38a47f(0x232)]?_0x1bcc39=formatResult((0x1/(global['change'][noslash(_0x3fc96c[_0x38a47f(0x1f3)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1bcc39=global['change'][noslash(_0x3fc96c[_0x38a47f(0x1f3)])],_0x1bcc39<config[_0x38a47f(0x240)]&&(logHistory(_0x38a47f(0x163),_0x3fc96c[_0x38a47f(0x22f)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1bcc39+'%'),logHistory(_0x38a47f(0x163),_0x38a47f(0x160)),logHistory(_0x38a47f(0x163),_0x38a47f(0xe9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x36b693,_0x5bf118){const _0x272dfa=_0x2c11f6;if(!_0x36b693)return!![];const _0x2db7d0=_0x5bf118[_0x272dfa(0x151)]('.'),_0x325f91=_0x36b693[_0x272dfa(0x151)]('.');for(var _0x15f2b7=0x0;_0x15f2b7<_0x325f91[_0x272dfa(0x21d)];_0x15f2b7++){const _0x215fe0=~~_0x325f91[_0x15f2b7],_0x5dae0a=~~_0x2db7d0[_0x15f2b7];if(_0x215fe0<_0x5dae0a)return!![];if(_0x215fe0>_0x5dae0a)return![];}return![];}async function oneTimeMigration(){const _0x214a4f=_0x2c11f6;let _0x3eadfc=dbLogs[_0x214a4f(0xca)]('version')[_0x214a4f(0x198)]();if(isOlderVersion(_0x3eadfc,_0x214a4f(0x207))){let _0x62076b=[];const _0x500dd8=dbLogs[_0x214a4f(0xca)]('logs')[_0x214a4f(0x198)]();_0x500dd8[_0x214a4f(0x19a)](_0x50e103=>{const _0x16236c=_0x214a4f;_0x62076b[_0x16236c(0x1d4)]({'time':_0x50e103[_0x16236c(0x139)],'type':_0x50e103[_0x16236c(0x230)],'event':_0x50e103['event']});}),dbLogs[_0x214a4f(0xca)](_0x214a4f(0xc6))[_0x214a4f(0x250)](_0x62076b)[_0x214a4f(0x1ba)]();}let _0xf40d38=dbConfig[_0x214a4f(0xca)](_0x214a4f(0x1c8))[_0x214a4f(0x198)]();if(isOlderVersion(_0xf40d38,_0x214a4f(0x207))){let _0x313873=dbConfig['get'](_0x214a4f(0x123))['find']({'botID':botID})[_0x214a4f(0x198)]();if(_0x313873){let _0x461175=[];_0x313873[_0x214a4f(0x19d)]['forEach'](_0x1ddb09=>{const _0x3b8556=_0x214a4f;_0x461175[_0x3b8556(0x1d4)]({'coin':_0x1ddb09['coin'],'number':_0x1ddb09['startnumber'],'price':_0x1ddb09[_0x3b8556(0x1f6)]}),delete _0x1ddb09[_0x3b8556(0x1ce)],delete _0x1ddb09['startprice'];});if(_0x461175[_0x214a4f(0x21d)]!==0x0)fs[_0x214a4f(0x15b)](configbackuppath+('starting-balance-'+botID+_0x214a4f(0x175)),JSON[_0x214a4f(0x195)](_0x461175,null,0x4),function(_0xcc1767){if(_0xcc1767){}});const _0x1b72f4=(_0xd09075,_0x234953)=>{const _0x5607f0=_0x214a4f;let _0x5d000b=[];_0x234953['forEach'](_0x3c1c12=>{const _0x2fd12a=_0x3a3e,_0xa1d114=_0xd09075[_0x2fd12a(0xd0)](_0x1ed26e=>_0x1ed26e[_0x2fd12a(0x22f)]==_0x3c1c12[_0x2fd12a(0x22f)]);if(!_0xa1d114)_0x5d000b['push'](_0x3c1c12);});let _0x386258=[];return _0xd09075[_0x5607f0(0x19a)](_0xad2780=>{const _0x20649a=_0x5607f0,_0x1ce0db=_0x234953[_0x20649a(0xd0)](_0x570a31=>_0x570a31[_0x20649a(0x22f)]==_0xad2780[_0x20649a(0x22f)]);if(!_0x1ce0db||_0x1ce0db['number']==0x0&&_0xad2780[_0x20649a(0x10d)]!=0x0)_0x386258['push'](_0xad2780);}),{'missingDay1':_0x5d000b,'notInDay2':_0x386258};},_0x234042=dbPerformance['get'](_0x214a4f(0xdc))[_0x214a4f(0x1eb)]()[_0x214a4f(0x198)]();if(_0x234042[_0x214a4f(0x21d)]>0x1){const {missingDay1:_0xc42dce,notInDay2:_0xd717b2}=_0x1b72f4(_0x461175,_0x234042[0x1][_0x214a4f(0x249)]);_0x461175=[..._0x461175,..._0xc42dce],_0xd717b2['forEach'](_0x7fa450=>{const _0x3f20b6=_0x214a4f;let _0x38ede9=_0x461175[_0x3f20b6(0x21e)](_0x5f3948=>_0x5f3948[_0x3f20b6(0x22f)]==_0x7fa450['coin']);_0x38ede9!=-0x1&&_0x461175['splice'](_0x38ede9,0x1);});}_0x461175[_0x214a4f(0x19f)]((_0x37fe33,_0x2d8ff6)=>_0x37fe33['coin']>_0x2d8ff6[_0x214a4f(0x22f)]?0x1:_0x2d8ff6[_0x214a4f(0x22f)]>_0x37fe33[_0x214a4f(0x22f)]?-0x1:0x0);let _0x1ce285=[{'date':_0x313873[_0x214a4f(0x110)],'changes':_0x461175}];_0x234042[_0x214a4f(0x21d)]>0x2&&_0x234042[_0x214a4f(0x19a)]((_0x14c282,_0x5394ba)=>{const _0x5274e0=_0x214a4f;if(_0x5394ba>0x0&&_0x5394ba<_0x234042[_0x5274e0(0x21d)]-0x1){const {missingDay1:_0x59bdfb,notInDay2:_0x18072b}=_0x1b72f4(_0x234042[_0x5394ba]['coins'],_0x234042[_0x5394ba+0x1][_0x5274e0(0x249)]);_0x461175=[],(_0x59bdfb['length']!=0x0||_0x18072b[_0x5274e0(0x21d)]!=0x0)&&(_0x59bdfb[_0x5274e0(0x21d)]!=0x0&&_0x461175[_0x5274e0(0x1d4)](..._0x59bdfb),_0x18072b[_0x5274e0(0x21d)]!=0x0&&(_0x18072b[_0x5274e0(0x19a)](_0x1f3570=>{const _0x50228a=_0x5274e0;_0x1f3570[_0x50228a(0x10d)]=-_0x1f3570['number'];}),_0x461175[_0x5274e0(0x1d4)](..._0x18072b)),_0x461175['sort']((_0x252f90,_0x51fe41)=>_0x252f90[_0x5274e0(0x22f)]>_0x51fe41[_0x5274e0(0x22f)]?0x1:_0x51fe41['coin']>_0x252f90['coin']?-0x1:0x0),_0x1ce285[_0x5274e0(0x1d4)]({'date':_0x234042[_0x5394ba+0x1]['date'],'changes':_0x461175}));}}),dbConfig[_0x214a4f(0xca)](_0x214a4f(0x123))[_0x214a4f(0xd0)]({'botID':botID})[_0x214a4f(0x250)]({..._0x313873,'liquidity':_0x1ce285})[_0x214a4f(0x1ba)]();}}if(isOlderVersion(_0xf40d38,_0x214a4f(0x164))){let _0x5f21c7=dbConfig[_0x214a4f(0xca)](_0x214a4f(0x123))[_0x214a4f(0xd0)]({'botID':botID})['value']();if(_0x5f21c7){const _0x339f60=_0x5f21c7[_0x214a4f(0x1b2)],_0x3fc8a8=_0x339f60?capitalize(_0x339f60):_0x214a4f(0x176);dbConfig['get'](_0x214a4f(0x123))[_0x214a4f(0xd0)]({'botID':botID})[_0x214a4f(0x250)]({'exchange':_0x3fc8a8})[_0x214a4f(0x1ba)]();}}let _0x11b60c=dbPerformance[_0x214a4f(0xca)](_0x214a4f(0x1c8))[_0x214a4f(0x198)]();isOlderVersion(_0x11b60c,_0x214a4f(0x207))&&setStartDatePerformance();let _0xbfb35a=dbCoinResults[_0x214a4f(0xca)](_0x214a4f(0x1c8))[_0x214a4f(0x198)]();if(isOlderVersion(_0xbfb35a,_0x214a4f(0x22b))){let _0x1c1191=dbCoinResults[_0x214a4f(0xca)](_0x214a4f(0x249))[_0x214a4f(0x198)]();if(_0x1c1191[_0x214a4f(0x21d)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x24e7a9=_0x2c11f6;dbConfig['set'](_0x24e7a9(0x1c8),serverversion)['write'](),dbPerformance[_0x24e7a9(0x1d9)](_0x24e7a9(0x1c8),serverversion)[_0x24e7a9(0x1ba)](),dbLogs[_0x24e7a9(0x1d9)]('version',serverversion)[_0x24e7a9(0x1ba)](),dbCoinResults[_0x24e7a9(0x1d9)](_0x24e7a9(0x1c8),serverversion)['write']();}function getConfiguration(_0x3a60ec){const _0x5e3f28=_0x2c11f6;let _0x420b04=dbConfig[_0x5e3f28(0xca)](_0x5e3f28(0x123))[_0x5e3f28(0xd0)]({'botID':_0x3a60ec})[_0x5e3f28(0x198)]();if(_0x420b04){let _0x35571c=![];typeof _0x420b04[_0x5e3f28(0x1e1)]=='string'&&(_0x420b04={..._0x420b04,'threshold':Number(_0x420b04[_0x5e3f28(0x1e1)])},_0x35571c=!![]),_0x420b04['change24h']==null&&(_0x420b04={..._0x420b04,'change24h':-0x14},_0x35571c=!![]),!_0x420b04[_0x5e3f28(0x1d3)]&&(_0x420b04={..._0x420b04,'fiat':_0x5e3f28(0x1ed)},_0x35571c=!![]),!_0x420b04[_0x5e3f28(0xd7)]&&(_0x420b04={..._0x420b04,'onepagemode':settings[_0x5e3f28(0xd7)]},_0x35571c=!![]),!_0x420b04[_0x5e3f28(0x186)]&&(_0x420b04={..._0x420b04,'colorscheme':_0x5e3f28(0x1cc)},_0x35571c=!![]),!_0x420b04['autoliquidity']&&(_0x420b04={..._0x420b04,'autoliquidity':!![]},_0x35571c=!![]),_0x35571c&&(_0x420b04={'botID':_0x420b04[_0x5e3f28(0x1c2)],'exchange':_0x420b04[_0x5e3f28(0x1b2)],'apiKey':_0x420b04[_0x5e3f28(0xd3)],'apiSecret':_0x420b04[_0x5e3f28(0x14d)],'apiPassword':_0x420b04[_0x5e3f28(0x21c)],'basecoin':_0x420b04[_0x5e3f28(0x1f9)],'botname':_0x420b04[_0x5e3f28(0x106)],'showname':_0x420b04[_0x5e3f28(0x1d8)],'threshold':_0x420b04[_0x5e3f28(0x1e1)],'ordertype':_0x420b04[_0x5e3f28(0x1ae)],'timeout':_0x420b04['timeout'],'fiat':_0x420b04['fiat'],'startdate':_0x420b04[_0x5e3f28(0x110)],'recreate':_0x420b04[_0x5e3f28(0x1ec)],'timeshift':_0x420b04['timeshift'],'onepagemode':_0x420b04[_0x5e3f28(0xd7)],'headless':_0x420b04[_0x5e3f28(0x1b7)],'cooldown':_0x420b04[_0x5e3f28(0x243)],'change24h':_0x420b04['change24h'],'emojibuy':_0x420b04['emojibuy'],'emojisell':_0x420b04[_0x5e3f28(0x10c)],'colorscheme':_0x420b04[_0x5e3f28(0x186)],'portfolio':_0x420b04[_0x5e3f28(0x19d)],'autoliquidity':_0x420b04[_0x5e3f28(0x1e3)],'liquidity':_0x420b04['liquidity'],'openOrders':_0x420b04[_0x5e3f28(0x10a)]},dbConfig['get'](_0x5e3f28(0x123))[_0x5e3f28(0x1a5)]()[_0x5e3f28(0x1ba)](),dbConfig[_0x5e3f28(0xca)](_0x5e3f28(0x123))['push'](_0x420b04)['write']());}else _0x420b04={'botID':_0x3a60ec,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5e3f28(0x20c)+_0x3a60ec,'showname':![],'threshold':0x3,'ordertype':_0x5e3f28(0x154),'timeout':0x14,'fiat':_0x5e3f28(0x1ed),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5e3f28(0x1a0)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5e3f28(0x1cc),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x420b04;}function emittedConfiguration(){const _0x5c958a=_0x2c11f6;let _0x18029a;if(config[_0x5c958a(0xd3)]=='')_0x18029a={...config,'configstate':_0x5c958a(0xec)};else config['apiKey']==_0x5c958a(0x1f1)?_0x18029a={...config,'configstate':_0x5c958a(0x11e)}:(_0x18029a={...config,'apiKey':_0x5c958a(0x18d),'apiSecret':'************'},config['apiPassword']&&(_0x18029a[_0x5c958a(0x21c)]=_0x5c958a(0x18d)));return _0x18029a;}function getSettings(){const _0x27db81=_0x2c11f6;return dbSettings[_0x27db81(0xca)](_0x27db81(0x23e))[_0x27db81(0x198)]();}function getSecure(){const _0x14d111=_0x2c11f6;return dbSecure[_0x14d111(0xca)](_0x14d111(0x1da))['value']()||{};}function updateTimeshift(_0x5266a5){const _0x12db58=_0x2c11f6;let _0x10e44a=dbConfig[_0x12db58(0xca)](_0x12db58(0x123))[_0x12db58(0xd0)]({'botID':botID})['value']();_0x10e44a&&dbConfig[_0x12db58(0xca)](_0x12db58(0x123))[_0x12db58(0xd0)]({'botID':botID})[_0x12db58(0x250)]({'timeshift':_0x5266a5})[_0x12db58(0x1ba)](),config[_0x12db58(0x1a0)]=_0x5266a5,proxyEmit(_0x12db58(0x22e),emittedConfiguration());}function updateOnepagemode(_0x1f96b3){const _0x1f6385=_0x2c11f6;let _0x152c12=dbConfig['get'](_0x1f6385(0x123))[_0x1f6385(0xd0)]({'botID':botID})[_0x1f6385(0x198)]();_0x152c12&&dbConfig[_0x1f6385(0xca)](_0x1f6385(0x123))['find']({'botID':botID})[_0x1f6385(0x250)]({'onepagemode':_0x1f96b3})[_0x1f6385(0x1ba)](),config[_0x1f6385(0xd7)]=_0x1f96b3,proxyEmit(_0x1f6385(0x22e),emittedConfiguration());}async function storeConfiguration(_0x5b45a2){const _0x20db92=_0x2c11f6;logger[_0x20db92(0x103)](_0x20db92(0x1dd));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x20db92(0x103)]('Transaction\x20detection\x20blocked');let _0x576ddf=[],_0x58e105=![],_0x337a64=![],_0x29e05e=[];_0x5b45a2[_0x20db92(0x19d)][_0x20db92(0x19a)](_0x4f572a=>{const _0x275095=_0x20db92;if(!_0x4f572a['excluded']&&_0x4f572a[_0x275095(0x22f)]!=_0x5b45a2['basecoin'])_0x29e05e[_0x275095(0x1d4)](_0x4f572a[_0x275095(0x1f3)]);}),_0x29e05e[_0x20db92(0x19a)](_0x266016=>{const _0x1fe9a6=_0x20db92,_0x713f81=watchedSymbols[_0x1fe9a6(0xc1)](_0x266016);!_0x713f81&&_0x576ddf['push'](_0x266016);}),_0x29e05e[_0x20db92(0x19a)](_0x42a2c1=>{const _0x13dc31=_0x20db92,_0x52ad67=currentCoins['find'](_0x6d90ed=>_0x6d90ed[_0x13dc31(0x1f3)]==_0x42a2c1);!_0x52ad67&&(_0x58e105=!![]);}),currentCoins[_0x20db92(0x19a)](_0x14fc01=>{const _0x52cba8=_0x20db92;if(_0x14fc01[_0x52cba8(0x22f)]!=config['basecoin']){const _0x596e63=_0x29e05e[_0x52cba8(0xd0)](_0x44c447=>_0x44c447==_0x14fc01['symbol']);!_0x596e63&&(_0x58e105=!![]);}}),_0x5b45a2[_0x20db92(0x19d)][_0x20db92(0x19a)](_0x15e4e5=>{const _0x54b639=_0x20db92,_0x30b9bc=config[_0x54b639(0x19d)][_0x54b639(0xd0)](_0x3234c7=>_0x3234c7['coin']==_0x15e4e5[_0x54b639(0x22f)]);if(_0x30b9bc&&_0x15e4e5['offset']!=_0x30b9bc[_0x54b639(0x1af)])_0x337a64=!![];});let _0x44cc1c=dbConfig[_0x20db92(0xca)](_0x20db92(0x123))[_0x20db92(0xd0)]({'botID':botID})[_0x20db92(0x198)]();_0x5b45a2={..._0x5b45a2,'apiKey':crypt[_0x20db92(0x21f)](secure['privateKey'],_0x5b45a2[_0x20db92(0xd3)])['message'],'apiSecret':crypt[_0x20db92(0x21f)](secure[_0x20db92(0x1a6)],_0x5b45a2[_0x20db92(0x14d)])[_0x20db92(0x1c6)]};_0x5b45a2['apiPassword']&&(_0x5b45a2['apiPassword']=crypt[_0x20db92(0x21f)](secure[_0x20db92(0x1a6)],_0x5b45a2[_0x20db92(0x21c)])[_0x20db92(0x1c6)]);let _0xaa0d22=![];if(_0x44cc1c){_0x5b45a2['apiKey']==_0x20db92(0x18d)?_0x5b45a2['apiKey']=config[_0x20db92(0xd3)]:_0xaa0d22=!![];_0x5b45a2['apiSecret']==_0x20db92(0x18d)?_0x5b45a2[_0x20db92(0x14d)]=config['apiSecret']:_0xaa0d22=!![];if(_0x5b45a2[_0x20db92(0x21c)]==_0x20db92(0x18d))_0x5b45a2[_0x20db92(0x21c)]=config['apiPassword'];else{if(_0x5b45a2['apiPassword'])_0xaa0d22=!![];}dbConfig[_0x20db92(0xca)](_0x20db92(0x123))[_0x20db92(0xd0)]({'botID':botID})[_0x20db92(0x250)](_0x5b45a2)[_0x20db92(0x1ba)]();}else dbConfig['get'](_0x20db92(0x123))[_0x20db92(0x1d4)](_0x5b45a2)['write'](),_0xaa0d22=!![],process[_0x20db92(0x18e)]({'status':'enabled','live':_0x20db92(0x112)},_0x1cc600=>{});process[_0x20db92(0x18e)]({'botname':_0x5b45a2[_0x20db92(0x106)]},_0xf13c45=>{}),updateBotManager(),config={..._0x5b45a2},proxyEmit(_0x20db92(0x236)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xaa0d22)await reset(_0x576ddf,!![]);else _0x58e105||_0x337a64?await reset(_0x576ddf,![]):getBalances();blockTransactionDetection=![],logger[_0x20db92(0x103)](_0x20db92(0x233));}async function storeHeadless(_0x9ebc51){const _0x27da07=_0x2c11f6,_0x305969={...config,'headless':_0x9ebc51[_0x27da07(0x1b7)]};let _0x45380c=dbConfig['get'](_0x27da07(0x123))['find']({'botID':botID})[_0x27da07(0x198)]();_0x45380c&&dbConfig[_0x27da07(0xca)](_0x27da07(0x123))[_0x27da07(0xd0)]({'botID':botID})[_0x27da07(0x250)](_0x305969)[_0x27da07(0x1ba)](),config={..._0x305969},updateBotManager(),proxyEmit(_0x27da07(0x22e),emittedConfiguration());}async function storeFiat(_0x2c029e){const _0x197b24=_0x2c11f6,_0x435597={...config,'fiat':_0x2c029e};let _0x9a17f8=dbConfig[_0x197b24(0xca)](_0x197b24(0x123))[_0x197b24(0xd0)]({'botID':botID})['value']();_0x9a17f8&&dbConfig['get'](_0x197b24(0x123))[_0x197b24(0xd0)]({'botID':botID})['assign'](_0x435597)[_0x197b24(0x1ba)](),config={..._0x435597},proxyEmit(_0x197b24(0x22e),emittedConfiguration());}function resetHistory(){const _0x5718c7=_0x2c11f6;logger[_0x5718c7(0x156)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x5718c7(0x225))))fs[_0x5718c7(0x181)](path[_0x5718c7(0x19b)](configpath,_0x5718c7(0x209)+botID+_0x5718c7(0x225)));if(fs[_0x5718c7(0xfd)](path[_0x5718c7(0x19b)](configpath,_0x5718c7(0x209)+botID+_0x5718c7(0x117))))fs[_0x5718c7(0x181)](path['join'](configpath,_0x5718c7(0x209)+botID+'-performance.json'));if(fs['existsSync'](path[_0x5718c7(0x19b)](configpath,_0x5718c7(0x209)+botID+'-results.json')))fs[_0x5718c7(0x181)](path[_0x5718c7(0x19b)](configpath,'bot-'+botID+'-results.json'));}catch(_0x28b1ca){if(_0x28b1ca)logger[_0x5718c7(0x156)](_0x5718c7(0x18a),_0x28b1ca);}const _0x576df9=getDate();let _0x29244f=[];currentCoins[_0x5718c7(0x19a)](_0x30b08e=>{const _0x4430e6=_0x5718c7;_0x29244f[_0x4430e6(0x1d4)]({'coin':_0x30b08e[_0x4430e6(0x22f)],'number':_0x30b08e[_0x4430e6(0x10d)],'price':_0x30b08e[_0x4430e6(0xf8)]});});let _0xad5cef=dbConfig['get'](_0x5718c7(0x123))[_0x5718c7(0xd0)]({'botID':botID})[_0x5718c7(0x198)]();_0xad5cef&&(dbConfig[_0x5718c7(0xca)](_0x5718c7(0x123))[_0x5718c7(0xd0)]({'botID':botID})[_0x5718c7(0x250)]({'liquidity':[{'date':_0x576df9,'changes':_0x29244f}]})['write'](),config[_0x5718c7(0x228)]=[]),process['send']({'stop':_0x5718c7(0x224)},_0x1afd0f=>{});}function noslash(_0x5b6b60){return _0x5b6b60['replace']('/','');}function updateHighestFee(_0x4610a8){const _0x3f4dda=_0x2c11f6;if(_0x4610a8[_0x3f4dda(0x232)]){let _0x10d7af={'filled':_0x4610a8[_0x3f4dda(0x1bf)]*_0x4610a8[_0x3f4dda(0x1df)],'amount':_0x4610a8[_0x3f4dda(0x1bf)]*_0x4610a8[_0x3f4dda(0x1df)],'side':_0x4610a8[_0x3f4dda(0x152)]=='sell'?_0x3f4dda(0x114):'sell','price':0x1/_0x4610a8[_0x3f4dda(0x1df)]};_0x4610a8={..._0x4610a8,..._0x10d7af};}const _0x2aa512=defaultFee*_0x4610a8[_0x3f4dda(0x1bf)]*_0x4610a8['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x3f4dda(0xfc)][_0x3f4dda(0x1bc)](),lastFees[_0x3f4dda(0xfc)][_0x3f4dda(0x1d4)](_0x2aa512),lastFees[_0x3f4dda(0x1dc)]=Math[_0x3f4dda(0x245)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x5782d8){const _0x37d5b7=_0x2c11f6;logger[_0x37d5b7(0x103)](_0x37d5b7(0x16e)+_0x5782d8[_0x37d5b7(0x1f3)]+_0x37d5b7(0x214)+_0x5782d8[_0x37d5b7(0x172)]+'\x20|\x20'+_0x5782d8['id']);let _0x9d3273=_0x5782d8[_0x37d5b7(0x172)],_0x44c6b5=![];currentCoins[_0x37d5b7(0x19a)](_0x482a2c=>{const _0x193c03=_0x37d5b7;_0x482a2c[_0x193c03(0x1f3)]==_0x5782d8[_0x193c03(0x1f3)]&&(_0x44c6b5=!![]);});if(!_0x44c6b5)return;const _0xaf9b1=currentCoins[_0x37d5b7(0xd0)](_0x224172=>_0x224172[_0x37d5b7(0x1f3)]==_0x5782d8[_0x37d5b7(0x1f3)]),_0x4a0659=_0x5a15cf=>{const _0x76a0f5=_0x37d5b7;if(_0xaf9b1)_0xaf9b1[_0x76a0f5(0x125)]=_0x5a15cf;};if(_0x9d3273==_0x37d5b7(0x178))_0x4a0659(_0x37d5b7(0x178));else{if(_0x9d3273==_0x37d5b7(0x121)){_0x4a0659(_0x37d5b7(0x121));const _0x4ce8c8=await getCoins();[currentCoins,currentCoinsAll]=_0x4ce8c8,await getOpenOrders(),handleOpenOrders();}else{if(_0x9d3273==_0x37d5b7(0x14c)){logger[_0x37d5b7(0x103)](_0x37d5b7(0x17b)+_0x5782d8[_0x37d5b7(0x1f3)]+'\x20|\x20'+_0x5782d8['filled']+_0x37d5b7(0x214)+_0x5782d8['id']);let _0x33696e=![];if(lastOrders)for(const _0x5c5c7f of lastOrders){const _0x4a541b=0xc8,_0x29148d=0x1388;let _0x4f4dbf=0x0;while(!_0x5c5c7f[_0x37d5b7(0x248)]&&_0x4f4dbf*_0x4a541b<_0x29148d){_0x4f4dbf++,await sleep(_0x4a541b);}if(_0x4f4dbf>0x0)logger[_0x37d5b7(0x103)]('Waited\x20'+_0x4f4dbf*_0x4a541b/0x3e8+_0x37d5b7(0xf1));if(_0x5c5c7f[_0x37d5b7(0x248)]==_0x5782d8['id']){logger[_0x37d5b7(0x103)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x5782d8['id']),_0x33696e=!![];if(_0x5c5c7f['filled']==0x0){logger['debug'](_0x37d5b7(0x193)+_0x5782d8['id']);if(_0x5782d8[_0x37d5b7(0x145)])_0x5c5c7f[_0x37d5b7(0x1df)]=_0x5782d8[_0x37d5b7(0x145)];else{if(_0x5782d8[_0x37d5b7(0x1df)])_0x5c5c7f['price']=_0x5782d8[_0x37d5b7(0x1df)];else{}}_0x5c5c7f[_0x37d5b7(0x1bf)]=_0x5782d8[_0x37d5b7(0x1bf)],updateHighestFee(_0x5c5c7f),_0x4a0659(_0x37d5b7(0x1bf)),await validateOrders();if(lockOrders==ORDERS[_0x37d5b7(0x1e6)]){const _0x39846d=await getCoins();[currentCoins,currentCoinsAll]=_0x39846d;}_0x5c5c7f[_0x37d5b7(0x12d)]={'currency':_0x5782d8[_0x37d5b7(0x12d)]?_0x5782d8[_0x37d5b7(0x12d)]['currency']:null,'cost':_0x5782d8[_0x37d5b7(0x12d)]?_0x5782d8[_0x37d5b7(0x12d)][_0x37d5b7(0x165)]:0x0},await updateCoinResults(_0x5c5c7f);}}}if(!_0x33696e){logger[_0x37d5b7(0x103)](_0x37d5b7(0x18c)+_0x5782d8['id']),_0x4a0659(_0x37d5b7(0x1bf));const _0x2e5f53=await getCoins();[currentCoins,currentCoinsAll]=_0x2e5f53,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x444a85=JSON[_0x37d5b7(0x185)](lastBalances['portfolio']);const _0x117292=_0x444a85['find'](_0x4455a5=>_0x4455a5[_0x37d5b7(0x1f3)]==_0x5782d8[_0x37d5b7(0x1f3)]);if(_0x117292){if(_0x9d3273=='open')_0x117292[_0x37d5b7(0x125)]=_0x117292[_0x37d5b7(0x125)]==_0x37d5b7(0x1bf)?_0x37d5b7(0x1bf):_0x37d5b7(0x178);else{if(_0x9d3273==_0x37d5b7(0x121))_0x117292[_0x37d5b7(0x125)]=_0x117292[_0x37d5b7(0x125)]==_0x37d5b7(0x1bf)?_0x37d5b7(0x1bf):_0x37d5b7(0x121);else _0x9d3273==_0x37d5b7(0x14c)&&(_0x117292[_0x37d5b7(0x125)]=_0x37d5b7(0x1bf));}}lastBalances={...lastBalances,'portfolio':JSON[_0x37d5b7(0x195)](_0x444a85)},proxyEmit(_0x37d5b7(0x1d7),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1a9927=_0x2c11f6;await getOpenOrders();let _0x1c3152=![];currentCoins[_0x1a9927(0x19a)](_0x31d4e4=>{const _0x3cbf60=_0x1a9927;_0x1c3152=allOpenOrders[_0x3cbf60(0xd0)](_0x3a9226=>_0x3a9226[_0x3cbf60(0x1f3)]==_0x31d4e4[_0x3cbf60(0x1f3)]),_0x31d4e4['orderstatus']=_0x1c3152?_0x3cbf60(0x178):_0x3cbf60(0x192);});}async function getCoins(_0x449325=!![],_0x362751=config[_0x2c11f6(0x1f9)]){const _0x566c82=_0x2c11f6;let _0xa8c67,_0x3fcea1=[],_0x2e7463=[],_0x31f873=[],_0x3fb859=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0xa8c67=await exchange[_0x566c82(0xe0)](),mybalances=_0xa8c67['total'];for(const [_0x4a4f4e,_0x11f741]of Object['entries'](mybalances)){_0x3fb859[_0x566c82(0x1d4)](_0x4a4f4e);}if(_0x362751=='')for(const [_0x21de57,_0xbe687f]of Object[_0x566c82(0x155)](mybalances)){_0xbe687f!=0x0&&_0x2e7463[_0x566c82(0x1d4)]({'coin':_0x21de57});}else{let _0xc06f38=![];for(const [_0x44f91f,_0x1f17db]of Object[_0x566c82(0x155)](mybalances)){if(_0x3fb859[_0x566c82(0xc1)](_0x44f91f)){const _0x3379f5=config[_0x566c82(0x19d)][_0x566c82(0xd0)](_0x29a788=>_0x29a788[_0x566c82(0x22f)]==_0x44f91f),_0x1b9cd1=_0x44f91f+'/'+_0x362751,_0x4f48db=_0x362751+'/'+_0x44f91f,_0x575966=currentCoins['find'](_0x4c0934=>_0x4c0934['coin']==_0x44f91f);_0xc06f38=![];if((_0x1f17db!=0x0||_0x3379f5)&&(allSymbols[_0x566c82(0xc1)](_0x1b9cd1)||_0x44f91f==_0x362751))_0x44f91f!=_0x362751&&_0x3fcea1[_0x566c82(0x1d4)](_0x1b9cd1),_0x2e7463[_0x566c82(0x1d4)]({'coin':_0x44f91f,'symbol':_0x1b9cd1,'reverse':![],'number':Math[_0x566c82(0x245)](_0x1f17db+(_0x3379f5&&_0x3379f5[_0x566c82(0x1af)]||0x0),0x0),'orderstatus':_0x575966?_0x575966[_0x566c82(0x125)]:_0x566c82(0x192)});else(_0x1f17db!=0x0||_0x3379f5)&&allSymbols[_0x566c82(0xc1)](_0x4f48db)&&(_0x44f91f!=_0x362751&&_0x3fcea1[_0x566c82(0x1d4)](_0x4f48db),_0x2e7463[_0x566c82(0x1d4)]({'coin':_0x44f91f,'symbol':_0x4f48db,'reverse':!![],'number':Math[_0x566c82(0x245)](_0x1f17db+(_0x3379f5&&_0x3379f5[_0x566c82(0x1af)]||0x0),0x0),'orderstatus':_0x575966?_0x575966[_0x566c82(0x125)]:'none'}));}}}}catch(_0x1f1c5e){if(!_0x449325)handleErrorNoStop(_0x1f1c5e,_0x566c82(0xee));else await handleError(_0x1f1c5e,'getCoins()');}return _0x31f873=cloneDeep(_0x2e7463),_0x2e7463=_0x2e7463[_0x566c82(0x24d)](_0x2c1859=>{const _0x29c9bd=_0x566c82,_0x4245cd=config[_0x29c9bd(0x19d)][_0x29c9bd(0xd0)](_0x1b7873=>_0x1b7873[_0x29c9bd(0x22f)]==_0x2c1859['coin']);return _0x4245cd&&!_0x4245cd[_0x29c9bd(0x137)];}),[_0x2e7463,_0x31f873];}async function getCoinNumber(_0x340aef){const _0x4ab835=_0x2c11f6;let _0x10098f;try{const _0x10136b=await exchange[_0x4ab835(0xe0)]();_0x10098f=_0x10136b[_0x4ab835(0x167)][_0x340aef];}catch(_0x5df0d0){await handleError(_0x5df0d0,'getCoinNumber()');}return _0x10098f;}async function getOpenOrders(){const _0x1579fc=_0x2c11f6;let _0x18f176;allOpenOrders=[];try{for(const _0x324a49 of config[_0x1579fc(0x19d)]){!_0x324a49['excluded']&&_0x324a49['coin']!=config['basecoin']&&(_0x18f176=await exchange[_0x1579fc(0x12f)](_0x324a49[_0x1579fc(0x1f3)]),_0x18f176['length']>0x0&&allOpenOrders[_0x1579fc(0x1d4)](_0x18f176[0x0]));}}catch(_0x53d8e3){await handleError(_0x53d8e3,'getOpenOrders()');}}async function handleOpenOrders(_0xf20903=0x0){const _0x3fb231=_0x2c11f6;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3fb231(0x1e6)]&&allOrdersPlaced&&(_0xf20903==0x0?(logger['debug'](_0x3fb231(0x251)),_0xf20903++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3fb231(0x103)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x3fb231(0x161))));}async function testAPI(_0x470db6){const _0x4c1da4=_0x2c11f6,_0x1f8e28=ccxt[_0x4c1da4(0x201)][_0x470db6[_0x4c1da4(0x1b2)][_0x4c1da4(0x136)]()],_0x14ba0b=new _0x1f8e28({'apiKey':_0x470db6[_0x4c1da4(0xd3)],'secret':_0x470db6[_0x4c1da4(0x14d)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4c1da4(0x108)}});if(_0x470db6['apiPassword'])_0x14ba0b[_0x4c1da4(0x16a)]=_0x470db6['apiPassword'];try{await _0x14ba0b[_0x4c1da4(0xda)]();}catch(_0x40b478){throw _0x40b478;}}function cloneDeep(_0x47ba6e){const _0x32760d=_0x2c11f6;return JSON[_0x32760d(0x185)](JSON[_0x32760d(0x195)](_0x47ba6e));}async function getPortfolio(_0x284111){const _0x23ed01=_0x2c11f6;let _0x3cfb41=[],_0x5e115b=[],_0x3aed95=[],_0x1ebf5b;if(_0x284111[_0x23ed01(0xd3)]!==_0x23ed01(0x18d)||_0x284111['apiSecret']!==_0x23ed01(0x18d)||_0x284111[_0x23ed01(0x21c)]&&_0x284111[_0x23ed01(0x21c)]!==_0x23ed01(0x18d)){if(config[_0x23ed01(0x1b2)]){if(_0x284111[_0x23ed01(0xd3)]==_0x23ed01(0x18d))_0x284111[_0x23ed01(0xd3)]=config[_0x23ed01(0xd3)];if(_0x284111['apiSecret']==_0x23ed01(0x18d))_0x284111[_0x23ed01(0x14d)]=config[_0x23ed01(0x14d)];if(_0x284111[_0x23ed01(0x21c)]==_0x23ed01(0x18d))_0x284111[_0x23ed01(0x21c)]=config[_0x23ed01(0x21c)];try{await testAPI(_0x284111);}catch(_0x4c7ba5){if(_0x4c7ba5[_0x23ed01(0x1f8)]()[_0x23ed01(0xc1)](_0x23ed01(0x13c))){logger[_0x23ed01(0x103)](_0x23ed01(0x18b)),proxyEmit(_0x23ed01(0x19d),![]);return;}else{handleError(_0x4c7ba5,'getPortfolio(0)');return;}}}await initExchange(_0x284111[_0x23ed01(0x1b2)],_0x284111[_0x23ed01(0xd3)],_0x284111[_0x23ed01(0x14d)],_0x284111[_0x23ed01(0x21c)]);try{await loadSymbols(_0x284111[_0x23ed01(0x1b2)],!![]);}catch(_0xfde11){if(_0xfde11[_0x23ed01(0x1f8)]()[_0x23ed01(0xc1)](_0x23ed01(0x13c))){proxyEmit(_0x23ed01(0x19d),![]);return;}else{handleError(_0xfde11,_0x23ed01(0x239));return;}}const _0x4f0bb6=await getCoins(![],_0x284111[_0x23ed01(0x1f9)]);_0x3aed95=cloneDeep(_0x4f0bb6[0x1]);}else _0x3aed95=cloneDeep(currentCoinsAll);if(_0x284111['basecoin']=='')proxyEmit(_0x23ed01(0x19d),_0x3aed95);else{_0x3aed95[_0x23ed01(0x19a)](_0x727d62=>{const _0x7cdfb6=_0x23ed01;if(_0x727d62[_0x7cdfb6(0x22f)]!=_0x284111[_0x7cdfb6(0x1f9)])_0x3cfb41[_0x7cdfb6(0x1d4)](_0x727d62['symbol']);});try{_0x5e115b=await exchange['fetchTickers'](_0x3cfb41);}catch(_0x422f06){if(_0x422f06['toString']()['includes'](_0x23ed01(0x13c))){proxyEmit('portfolio',![]);return;}else{handleError(_0x422f06,_0x23ed01(0xea));return;}}_0x3aed95[_0x23ed01(0x19a)](_0x15a28b=>{const _0x36b7a1=_0x23ed01;_0x15a28b['coin']!=_0x284111[_0x36b7a1(0x1f9)]?_0x1ebf5b=_0x15a28b['reverse']?0x1/_0x5e115b[_0x15a28b[_0x36b7a1(0x1f3)]][_0x36b7a1(0xf8)]:_0x5e115b[_0x15a28b[_0x36b7a1(0x1f3)]][_0x36b7a1(0xf8)]:_0x1ebf5b=0x1,_0x15a28b[_0x36b7a1(0x1df)]=formatResult(_0x1ebf5b,0x8);}),proxyEmit(_0x23ed01(0x19d),_0x3aed95);}}function truncateTradeAmount(_0x269a4c,_0x3a6da7){const _0x3776b6=_0x2c11f6;let _0x1499fa=0x0;try{_0x1499fa=exchange[_0x3776b6(0x1fb)](_0x269a4c,_0x3a6da7);}catch(_0xb366a3){}return _0x1499fa;}function checkMinimums(_0x3663be){const _0x262d27=_0x2c11f6;let _0x25935f=!![];const _0x3432bb=!_0x3663be[_0x262d27(0x232)]?markets[_0x3663be[_0x262d27(0x1f3)]][_0x262d27(0x20e)]['amount'][_0x262d27(0x11d)]:markets[_0x3663be[_0x262d27(0x1f3)]][_0x262d27(0x20e)][_0x262d27(0x165)][_0x262d27(0x11d)],_0xdd591e=!_0x3663be['reverse']?markets[_0x3663be[_0x262d27(0x1f3)]]['limits']['cost'][_0x262d27(0x11d)]:markets[_0x3663be['symbol']][_0x262d27(0x20e)][_0x262d27(0x101)][_0x262d27(0x11d)],_0x3b41bb=truncateTradeAmount(_0x3663be[_0x262d27(0x1f3)],_0x3663be['trade']);_0x3663be[_0x262d27(0x21a)]=_0x3b41bb;if(Math[_0x262d27(0x1d5)](_0x3b41bb)<_0x3432bb)_0x25935f=![];if(Math[_0x262d27(0x1d5)](_0x3b41bb)*_0x3663be[_0x262d27(0xf8)]<_0xdd591e)_0x25935f=![];if(_0x3663be['side']=='sell'){let _0x3c7dcc=config[_0x262d27(0x19d)]['find'](_0x4bf8fa=>_0x4bf8fa[_0x262d27(0x22f)]==_0x3663be[_0x262d27(0x22f)]);if(_0x3c7dcc[_0x262d27(0x1af)]>0x0){if(Math[_0x262d27(0x1d5)](_0x3b41bb)>_0x3663be[_0x262d27(0x10d)]-_0x3c7dcc['offset'])_0x25935f=![];}else{if(Math[_0x262d27(0x1d5)](_0x3b41bb)>_0x3663be[_0x262d27(0x10d)])_0x25935f=![];}}if(_0x3663be[_0x262d27(0x152)]=='buy'){let _0x25d74d=config[_0x262d27(0x19d)]['find'](_0x3d4514=>_0x3d4514['coin']==config[_0x262d27(0x1f9)]),_0x25e729=currentCoins[_0x262d27(0xd0)](_0x329a5b=>_0x329a5b[_0x262d27(0x22f)]==config[_0x262d27(0x1f9)]);if(_0x25d74d['offset']>0x0){if(Math[_0x262d27(0x1d5)](_0x3b41bb)*_0x3663be['last']>_0x25e729['number']-_0x25d74d[_0x262d27(0x1af)])_0x25935f=![];}else{if(Math[_0x262d27(0x1d5)](_0x3b41bb)*_0x3663be[_0x262d27(0xf8)]>_0x25e729[_0x262d27(0x10d)])_0x25935f=![];}}return _0x25935f;}async function getBalances(_0x2fcd50=!![]){const _0x3a0e5b=_0x2c11f6;let _0x1b78a4=0x0,_0x277891;const _0x5d9152=config[_0x3a0e5b(0x1e1)];if(config[_0x3a0e5b(0x1b7)]&&config[_0x3a0e5b(0x240)]<0x0)await validate24hChanges();currentCoins[_0x3a0e5b(0x19a)](_0x5c5c8d=>{const _0x196044=_0x3a0e5b;if(_0x5c5c8d[_0x196044(0x22f)]!=config[_0x196044(0x1f9)]){let _0x5eb329=global[_0x196044(0x210)][noslash(_0x5c5c8d['symbol'])];_0x277891=_0x5c5c8d[_0x196044(0x232)]?0x1/_0x5eb329:_0x5eb329;}else _0x277891=0x1;let _0xb75519=_0x5c5c8d['number']*_0x277891;_0x1b78a4+=_0xb75519,_0x5c5c8d[_0x196044(0xf8)]=formatResult(Number(_0x277891),0x8),_0x5c5c8d[_0x196044(0x198)]=_0xb75519;}),currentCoins[_0x3a0e5b(0x19a)](_0x557a81=>{const _0x4d2d83=_0x3a0e5b;let _0x4d490d=config[_0x4d2d83(0x19d)][_0x4d2d83(0xd0)](_0x21eb0b=>_0x21eb0b[_0x4d2d83(0x22f)]==_0x557a81[_0x4d2d83(0x22f)]),_0x532a13=Number(_0x4d490d['distribution']),_0x824490=_0x557a81[_0x4d2d83(0x198)]/_0x1b78a4*0x64,_0x3b48d7=_0x532a13*_0x1b78a4/0x64/_0x557a81['last']-_0x557a81[_0x4d2d83(0x10d)];_0x557a81['distribution']=formatResult(_0x824490,0x3),_0x557a81[_0x4d2d83(0x227)]=formatResult(_0x532a13,0x3),_0x557a81[_0x4d2d83(0x21a)]=formatResult(_0x3b48d7,0x8),_0x557a81[_0x4d2d83(0x152)]='',_0x557a81[_0x4d2d83(0x159)]=![];if(_0x557a81[_0x4d2d83(0x22f)]!=config['basecoin']){if(_0x557a81[_0x4d2d83(0x177)]>_0x532a13)_0x557a81[_0x4d2d83(0x152)]=_0x4d2d83(0x17c),_0x557a81['valid']=checkMinimums(_0x557a81);else _0x557a81[_0x4d2d83(0x177)]<_0x532a13&&(_0x557a81[_0x4d2d83(0x152)]='buy',_0x557a81[_0x4d2d83(0x159)]=checkMinimums(_0x557a81));}_0x557a81[_0x4d2d83(0xef)]=_0x557a81[_0x4d2d83(0x177)]/_0x557a81[_0x4d2d83(0x227)]-0x1;if(_0x557a81['orderstatus']==_0x4d2d83(0x1bf)||_0x557a81[_0x4d2d83(0x125)]==_0x4d2d83(0x121))_0x557a81['orderstatus']=_0x4d2d83(0x192);}),currentCoins['sort']((_0x247f55,_0x1985f9)=>_0x247f55[_0x3a0e5b(0xef)]<_0x1985f9[_0x3a0e5b(0xef)]?0x1:_0x1985f9[_0x3a0e5b(0xef)]<_0x247f55[_0x3a0e5b(0xef)]?-0x1:0x0);const _0xcde070=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xcde070['eur'],'usd':_0xcde070[_0x3a0e5b(0x19c)],'portfolio':JSON[_0x3a0e5b(0x195)](currentCoins),'threshold':_0x5d9152},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x2fcd50){if(config[_0x3a0e5b(0x1b7)])headlessMode({'portfolio':currentCoins,'threshold':_0x5d9152});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5d9152});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5225fe=getNormalizedPerformance();getStartingBalances(_0x5225fe),emitPerformance(_0x5225fe);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1b568d=getNormalizedPerformance();emitPerformance(_0x1b568d),getStartingBalances(_0x1b568d),logger[_0x3a0e5b(0x103)](_0x3a0e5b(0x1f7));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x352b7d=_0x2c11f6;if(!lastBalances)return;let _0x3bcd52=[],_0x2bdce2,_0x5b8d13=JSON['parse'](lastBalances[_0x352b7d(0x19d)]);_0x5b8d13[_0x352b7d(0x19f)]((_0x4f53b8,_0x57df0e)=>_0x4f53b8[_0x352b7d(0x22f)]>_0x57df0e[_0x352b7d(0x22f)]?0x1:_0x57df0e[_0x352b7d(0x22f)]>_0x4f53b8[_0x352b7d(0x22f)]?-0x1:0x0),_0x5b8d13['forEach'](_0x5d66c2=>{const _0x202a2e=_0x352b7d;let _0x5b8002={'coin':_0x5d66c2[_0x202a2e(0x22f)],'number':_0x5d66c2[_0x202a2e(0x10d)],'price':_0x5d66c2[_0x202a2e(0xf8)]};_0x3bcd52[_0x202a2e(0x1d4)](_0x5b8002);});const _0x4bf080=await getFiat();_0x2bdce2={'date':lastBalances[_0x352b7d(0x139)][_0x352b7d(0x151)]('\x20')[0x0],'eur':_0x4bf080[_0x352b7d(0x21b)],'usd':_0x4bf080['usd'],'coins':_0x3bcd52};let _0x579441=dbPerformance[_0x352b7d(0xca)](_0x352b7d(0xdc))[_0x352b7d(0xd0)]({'date':_0x2bdce2[_0x352b7d(0x218)]})[_0x352b7d(0x198)]();_0x579441?_0x2bdce2['date']!=config[_0x352b7d(0x110)]&&dbPerformance['get'](_0x352b7d(0xdc))[_0x352b7d(0xd0)]({'date':_0x2bdce2['date']})[_0x352b7d(0x250)](_0x2bdce2)['write']():dbPerformance[_0x352b7d(0xca)](_0x352b7d(0xdc))[_0x352b7d(0x1d4)](_0x2bdce2)[_0x352b7d(0x1ba)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3700b0=_0x2c11f6;let _0x1c572f=[];if(dbPerformance[_0x3700b0(0x134)](_0x3700b0(0xdc))[_0x3700b0(0x198)]()){let _0x3c1a20=dbPerformance['get']('data')[_0x3700b0(0x1eb)]()[_0x3700b0(0x24d)](_0x441398=>{const _0x1362d0=_0x3700b0;if(_0x441398['coins'][_0x1362d0(0x21d)]==0x0)return![];else return!![];})[_0x3700b0(0xc7)](_0x3700b0(0x218))[_0x3700b0(0x198)](),_0x55cb0e=[...config[_0x3700b0(0x228)]];_0x55cb0e[_0x3700b0(0x19f)]((_0x65f8c8,_0x53c554)=>_0x65f8c8[_0x3700b0(0x218)]>_0x53c554[_0x3700b0(0x218)]?-0x1:_0x53c554['date']>_0x65f8c8['date']?0x1:0x0);let _0x47a747=0x1,_0x40cda5=[],_0x2d7a64=0x0;_0x3c1a20[_0x3700b0(0x1e2)]()[_0x3700b0(0x232)]()[_0x3700b0(0x19a)]((_0x2ff76a,_0x1f000a)=>{const _0x5765ef=_0x3700b0;if(_0x55cb0e[_0x2d7a64]){if(_0x3c1a20[_0x3c1a20[_0x5765ef(0x21d)]-_0x1f000a]&&_0x55cb0e[_0x2d7a64][_0x5765ef(0x218)]==_0x3c1a20[_0x3c1a20[_0x5765ef(0x21d)]-_0x1f000a][_0x5765ef(0x218)]){if(_0x1f000a<_0x3c1a20[_0x5765ef(0x21d)]){let _0x4bc172=0x0,_0x48fbdb=0x0;_0x3c1a20[_0x3c1a20[_0x5765ef(0x21d)]-_0x1f000a][_0x5765ef(0x249)][_0x5765ef(0x19a)](_0x2be860=>{const _0x1d693f=_0x5765ef;_0x48fbdb+=_0x2be860['number']*_0x2be860[_0x1d693f(0x1df)];}),_0x55cb0e[_0x2d7a64]['changes'][_0x5765ef(0x19a)](_0x425752=>{const _0x1d6633=_0x5765ef;_0x4bc172+=_0x425752[_0x1d6633(0x10d)]*_0x425752[_0x1d6633(0x1df)];}),_0x47a747*=_0x4bc172/(_0x48fbdb-_0x4bc172)+0x1;}_0x2d7a64++;}}let _0x57e4e0=0x0;_0x2ff76a[_0x5765ef(0x249)][_0x5765ef(0x19a)](_0x42d595=>{const _0xae97aa=_0x5765ef;_0x57e4e0+=_0x42d595[_0xae97aa(0x10d)]*_0x42d595[_0xae97aa(0x1df)];}),_0x40cda5[_0x3c1a20[_0x5765ef(0x21d)]-_0x1f000a-0x1]=_0x57e4e0*(_0x47a747-0x1);});let _0x1125b3=[];_0x55cb0e=[...config[_0x3700b0(0x228)]]||[];let _0x18414f=0x0;_0x2d7a64=0x0,_0x3c1a20[_0x3700b0(0x19a)]((_0x51ba40,_0x5a85ca)=>{const _0x564569=_0x3700b0;if(_0x55cb0e[_0x2d7a64]){const _0x396628=fns[_0x564569(0x185)](_0x55cb0e[_0x2d7a64][_0x564569(0x218)],'yyyy/MM/dd',new Date()),_0x1c9d47=fns[_0x564569(0x185)](_0x51ba40[_0x564569(0x218)],_0x564569(0x126),new Date());if(fns[_0x564569(0x184)](_0x396628,_0x1c9d47)){let _0x296eda=0x0;_0x55cb0e[_0x2d7a64]['changes'][_0x564569(0x19a)](_0x30658a=>{const _0x226104=_0x564569;!_0x1125b3[_0x30658a['coin']]?_0x1125b3[_0x30658a['coin']]=_0x30658a[_0x226104(0x10d)]:(_0x296eda=_0x1125b3[_0x30658a[_0x226104(0x22f)]],_0x1125b3[_0x30658a[_0x226104(0x22f)]]+=_0x30658a[_0x226104(0x10d)]);const _0x146908=_0x51ba40[_0x226104(0x249)][_0x226104(0xd0)](_0x5b6604=>_0x5b6604[_0x226104(0x22f)]==_0x30658a[_0x226104(0x22f)]);(!_0x146908||_0x146908[_0x226104(0x10d)]==0x0)&&(_0x18414f+=(-_0x30658a['number']-_0x296eda)*_0x30658a['price']);}),_0x2d7a64++;}}_0x51ba40['coins'][_0x564569(0x19a)]((_0x3342ea,_0x4991b4)=>{const _0x5eb726=_0x564569;_0x1125b3[_0x3342ea[_0x5eb726(0x22f)]]&&(_0x3342ea[_0x5eb726(0xec)]=_0x1125b3[_0x3342ea['coin']]);}),_0x1c572f[_0x564569(0x1d4)]({'date':_0x51ba40['date'],'eur':_0x51ba40[_0x564569(0x21b)],'usd':_0x51ba40['usd'],'offset':_0x40cda5[_0x5a85ca],'netoffset':_0x18414f,'coins':_0x51ba40['coins']});});}return _0x1c572f;}function emitPerformance(_0xda6112){const _0x1587ad=_0x2c11f6;_0xda6112[_0x1587ad(0x21d)]!==0x0?(proxyEmit('performance',_0xda6112),lastPerformanceEmitted=getDate()):proxyEmit(_0x1587ad(0x10f),[]);}function getPerf(_0x4b4367,_0x338a17){const _0x16d681=_0x2c11f6;let _0x116edf=0x0,_0x3d76c3=0x0,_0x1c6121=0x0;_0x4b4367[_0x16d681(0x249)][_0x16d681(0x19a)](_0x2af745=>{const _0x2d73eb=_0x16d681;_0x116edf+=_0x2af745[_0x2d73eb(0x10d)]*_0x2af745['price'];});_0x338a17&&(_0x116edf+=_0x4b4367[_0x16d681(0x1af)]);if(config[_0x16d681(0x1f9)]===_0x16d681(0x150)||config[_0x16d681(0x1f9)]===_0x16d681(0x1bb))_0x3d76c3=_0x116edf*_0x4b4367[_0x16d681(0x21b)],_0x1c6121=_0x116edf*_0x4b4367['usd'];else{if(usdBasecoins[_0x16d681(0xc1)](config[_0x16d681(0x1f9)]))_0x3d76c3=_0x116edf*_0x4b4367[_0x16d681(0x21b)]/_0x4b4367['usd'],_0x1c6121=_0x116edf;else config[_0x16d681(0x1f9)]===_0x16d681(0x17a)&&(_0x3d76c3=_0x116edf,_0x1c6121=_0x116edf*_0x4b4367['usd']/_0x4b4367[_0x16d681(0x21b)]);}return[_0x116edf,_0x3d76c3,_0x1c6121];}function getKPIs(_0x4d9014,_0x28cce5=_0x2c11f6(0x17a)){const _0x139d27=_0x2c11f6,_0x190d8d=config[_0x139d27(0x1f9)],_0x52fbd3=lastBalances,_0x5ccdc8=currentCoins,_0xce25aa=getNormalizedPerformance(),_0x37951a=_0x4d9014===_0x139d27(0x1f9)?_0x190d8d:_0x4d9014===_0x139d27(0x1d3)||_0x4d9014===_0x139d27(0x1e9)?_0x28cce5:'Net\x20'+_0x190d8d,_0x5ae343=_0x4d9014===_0x139d27(0x17f)?_0x139d27(0x180):_0x4d9014===_0x139d27(0x1e9)?_0x139d27(0x180):_0x37951a+_0x139d27(0xd9),_0x1c0115=_0x4d9014===_0x139d27(0x17f)||_0x4d9014===_0x139d27(0x1e9)?_0x139d27(0x180):_0x37951a+_0x139d27(0x174);let _0x1ea3ab=0x0;_0x5ccdc8['forEach'](_0x27bc04=>{const _0x3cf4b2=_0x139d27;_0x1ea3ab+=_0x27bc04[_0x3cf4b2(0x10d)]*_0x27bc04[_0x3cf4b2(0xf8)];});if(_0x4d9014===_0x139d27(0x1d3)||_0x4d9014===_0x139d27(0x1e9)){if(_0x190d8d===_0x139d27(0x150)||_0x190d8d===_0x139d27(0x1bb))_0x1ea3ab=_0x1ea3ab*(_0x28cce5===_0x139d27(0x17a)?_0x52fbd3['eur']:_0x52fbd3[_0x139d27(0x19c)]);else{if(usdBasecoins[_0x139d27(0xc1)](_0x190d8d))_0x1ea3ab=_0x1ea3ab*(_0x28cce5==='EUR'?_0x52fbd3['eur']/_0x52fbd3['usd']:0x1);else _0x190d8d==='EUR'&&(_0x1ea3ab=_0x1ea3ab*(_0x28cce5===_0x139d27(0x17a)?0x1:_0x52fbd3[_0x139d27(0x19c)]/_0x52fbd3['eur']));}}let _0x48eb8e;if(_0x1ea3ab!==0x0){if(_0x4d9014===_0x139d27(0x1f9))_0x48eb8e=(_0x1ea3ab/startingBalances[_0x139d27(0x1f9)]-0x1)*0x64;else{if(_0x28cce5==='EUR')_0x48eb8e=(_0x1ea3ab/startingBalances['eur']-0x1)*0x64;else _0x48eb8e=(_0x1ea3ab/startingBalances[_0x139d27(0x19c)]-0x1)*0x64;}let _0x13cdc2=0x0;if(startingBalances[_0x139d27(0x249)])_0x5ccdc8[_0x139d27(0x19a)](_0x25295a=>{const _0x32bb45=_0x139d27;let _0x38c150=startingBalances[_0x32bb45(0x249)][_0x32bb45(0xd0)](_0x41c115=>_0x41c115[_0x32bb45(0x22f)]===_0x25295a[_0x32bb45(0x22f)]);if(_0x38c150&&_0x38c150[_0x32bb45(0x22f)]&&_0x25295a[_0x32bb45(0x10d)]!==0x0)_0x13cdc2+=_0x38c150['number']*_0x25295a['last'];});let _0x17a70b=0x0;if(_0xce25aa[_0x139d27(0x21d)]!==0x0){let _0x34120b=_0xce25aa[_0xce25aa[_0x139d27(0x21d)]-0x1];_0x17a70b=_0x34120b[_0x139d27(0x1a9)];}_0x13cdc2-=_0x17a70b;_0x4d9014==='net-basecoin'&&(_0x48eb8e=(_0x1ea3ab-_0x13cdc2)/startingBalances['basecoin']*0x64,_0x1ea3ab=_0x1ea3ab-_0x13cdc2);if(_0x4d9014===_0x139d27(0x1e9)){let _0x464b8a=_0x28cce5===_0x139d27(0x17a)?startingBalances[_0x139d27(0x21b)]:startingBalances[_0x139d27(0x19c)];if(_0x190d8d===_0x139d27(0x150)||_0x190d8d===_0x139d27(0x1bb))_0x13cdc2=_0x28cce5===_0x139d27(0x17a)?_0x13cdc2*_0x52fbd3[_0x139d27(0x21b)]:_0x13cdc2*_0x52fbd3['usd'];else{if(usdBasecoins[_0x139d27(0xc1)](_0x190d8d))_0x13cdc2=_0x28cce5===_0x139d27(0x17a)?_0x13cdc2*_0x52fbd3['eur']/_0x52fbd3['usd']:_0x13cdc2;else _0x190d8d==='EUR'&&(_0x13cdc2=_0x28cce5==='EUR'?_0x13cdc2:_0x13cdc2*_0x52fbd3[_0x139d27(0x19c)]/_0x52fbd3[_0x139d27(0x21b)]);}_0x48eb8e=(_0x1ea3ab-_0x13cdc2)/_0x464b8a*0x64,_0x1ea3ab=_0x1ea3ab-_0x13cdc2;}if(_0x48eb8e){if(_0x48eb8e<0x64)_0x48eb8e=_0x48eb8e[_0x139d27(0x1c4)](0x2);else{if(_0x48eb8e<0x3e8)_0x48eb8e=_0x48eb8e[_0x139d27(0x1c4)](0x1);else _0x48eb8e=_0x48eb8e[_0x139d27(0x1c4)](0x0);}}else _0x48eb8e=Number('0')[_0x139d27(0x1c4)](0x2);if(_0x1ea3ab){if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0.000001)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x2);else{if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0.1)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x6);else{if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0x1)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x5);else{if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0xa)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x4);else{if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0x64)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x3);else{if(Math[_0x139d27(0x1d5)](_0x1ea3ab)<0x3e8)_0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x2);else _0x1ea3ab=_0x1ea3ab[_0x139d27(0x1c4)](0x2);}}}}}}else _0x1ea3ab=Number('0')[_0x139d27(0x1c4)](0x2);}else _0x48eb8e=Number('0')[_0x139d27(0x1c4)](0x2);return{'value':_0x1ea3ab,'change':_0x48eb8e,'leftTxt':_0x5ae343,'rightTxt':_0x1c0115};}async function getStartingBalances(_0xb9a0b,_0x1f7f3d=!![]){const _0x552b4e=_0x2c11f6;if(_0xb9a0b[_0x552b4e(0x21d)]!==0x0){const [_0x515f9e,_0x29f48d,_0x16c069]=getPerf(_0xb9a0b[0x0],!![]);let _0xf53a0d=[];config[_0x552b4e(0x19d)][_0x552b4e(0x19a)](_0x323578=>{const _0x1c2e0c=_0x552b4e;let _0x154aa5=0x0,_0x387dfc;config[_0x1c2e0c(0x228)]['forEach'](_0x24eafd=>{const _0x2b939c=_0x1c2e0c;let _0x1da6ff=_0x24eafd[_0x2b939c(0x1d6)][_0x2b939c(0xd0)](_0x504a1a=>_0x504a1a['coin']==_0x323578[_0x2b939c(0x22f)]);if(_0x1da6ff){_0x154aa5+=_0x1da6ff[_0x2b939c(0x10d)];if(!_0x387dfc)_0x387dfc=_0x1da6ff[_0x2b939c(0x1df)];}}),_0xf53a0d[_0x1c2e0c(0x1d4)]({'coin':_0x323578[_0x1c2e0c(0x22f)],'number':_0x154aa5,'initialprice':_0x387dfc});});const _0x51a729={'basecoin':_0x515f9e,'eur':_0x29f48d,'usd':_0x16c069,'coins':_0xf53a0d};if(_0x1f7f3d)proxyEmit(_0x552b4e(0x1ee),_0x51a729);startingBalances=_0x51a729;}}function headlessMode(_0x10e442){const _0x11228d=_0x2c11f6;let _0x166db6=_0x10e442[_0x11228d(0x19d)],_0x3eef27=_0x10e442[_0x11228d(0x1e1)],_0x2ed8f0=[];for(let _0x492ed5 of _0x166db6){if(_0x492ed5[_0x11228d(0x22f)]!=config[_0x11228d(0x1f9)]){if(_0x492ed5['delta']>=_0x3eef27/0x64){if(_0x492ed5['valid'])_0x2ed8f0[_0x11228d(0x1d4)](_0x492ed5);}else{if(_0x492ed5['delta']<=-_0x3eef27/0x64){if(_0x492ed5['valid'])_0x2ed8f0[_0x11228d(0x1d4)](_0x492ed5);}}}}_0x2ed8f0[_0x11228d(0x21d)]>0x0&&placeOrder(_0x2ed8f0);}function notifyBalance(_0xde8c4b){const _0x3f7fc4=_0x2c11f6;let _0x1ee8ba=_0xde8c4b[_0x3f7fc4(0x19d)],_0x29c842=_0xde8c4b[_0x3f7fc4(0x1e1)],_0x542888=[];for(let _0x434587 of _0x1ee8ba){if(_0x434587[_0x3f7fc4(0x22f)]!=config[_0x3f7fc4(0x1f9)]){if(_0x434587[_0x3f7fc4(0xef)]>=_0x29c842/0x64){if(_0x434587[_0x3f7fc4(0x159)])_0x542888['push'](_0x434587);}else{if(_0x434587['delta']<=-_0x29c842/0x64){if(_0x434587[_0x3f7fc4(0x159)])_0x542888['push'](_0x434587);}}}}if(_0x542888[_0x3f7fc4(0x21d)]>0x0){let _0x55f017=_0x542888['map'](_0x461339=>_0x461339[_0x3f7fc4(0x22f)]);_0x55f017[_0x3f7fc4(0x19f)]();let _0x104bd8=_0x55f017[_0x3f7fc4(0x19b)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3f7fc4(0x13e),_0x3f7fc4(0x113));lastCoinsToBalance=_0x104bd8;}}function symbolToCoin(_0x22eed2){const _0x236ccb=_0x2c11f6;let _0x2d26dc;if(_0x22eed2[_0x236ccb(0xc1)]('/'+config['basecoin']))_0x2d26dc=_0x22eed2[_0x236ccb(0x1ff)]('/'+config['basecoin'],'');if(_0x22eed2[_0x236ccb(0xc1)](config['basecoin']+'/'))_0x2d26dc=_0x22eed2[_0x236ccb(0x1ff)](config['basecoin']+'/','');return _0x2d26dc;}async function unlockOrders(){const _0x15e573=_0x2c11f6;if(allOrdersPlaced&&lockOrders==ORDERS[_0x15e573(0x1e6)]){logger[_0x15e573(0x103)](_0x15e573(0x170)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5b6297=await getCoins();[currentCoins,currentCoinsAll]=_0x5b6297,validateOrdersState=_0x15e573(0xec),persistOpenOrders([]),lockOrders=ORDERS[_0x15e573(0x1b0)],logger[_0x15e573(0x103)](_0x15e573(0x16b));}}async function validateOrders(_0x2cf127){const _0x25893e=_0x2c11f6;if(_0x2cf127)validateOrdersState=_0x2cf127;logger['debug'](_0x25893e(0x158)+validateOrdersState+_0x25893e(0x10e)+(lockOrders==0x1?_0x25893e(0xf5):lockOrders==0x2?'ORDERS.UNLOCKING':_0x25893e(0x22d)));let _0x1e2c43=[],_0x314669=config[_0x25893e(0x1ae)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x25893e(0x1e6)])return;logger['debug'](_0x25893e(0x194)+validateOrdersState),lastOrders['forEach'](_0x1fb655=>{const _0x40e517=_0x25893e;let _0x2ef950=![];_0x1fb655['filled']>0x0&&(_0x2ef950=!![]),_0x1e2c43[_0x40e517(0x1d4)](_0x2ef950),_0x2ef950&&config[_0x40e517(0x1ae)]!='market'&&logHistory(_0x40e517(0xce),_0x40e517(0x1f4)+_0x1fb655[_0x40e517(0x1f3)]+'\x20'+_0x1fb655[_0x40e517(0x152)]+'\x20#'+formatResult(_0x1fb655[_0x40e517(0x1bf)],0x8)+'\x20@'+formatResult(_0x1fb655['price'],0x8));}),_0x1e2c43['forEach']((_0x2e7aa6,_0x3034f2)=>{if(_0x2e7aa6)lastOrders['splice'](_0x3034f2,0x1);}),persistOpenOrders(lastOrders);const _0x1bfb6f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x25893e(0xec)){validateOrdersState='ongoing';if(_0x1e2c43[_0x25893e(0xc1)](![])){if(config[_0x25893e(0x1ae)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x25893e(0x144)){if(_0x1e2c43['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x25893e(0x1ae)]==_0x25893e(0x154)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x25893e(0x1e0))_0x1e2c43[_0x25893e(0xc1)](![])&&(config[_0x25893e(0x1ae)]=='market'?logHistory(_0x25893e(0x18f),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x25893e(0x1f5)](_0x314669*validateOrderInterval/0xea60)+_0x25893e(0x1ef)+_0x1bfb6f):(await cancelOrders(),logHistory(_0x25893e(0x18f),_0x25893e(0x1c9)+Math['round'](_0x314669*validateOrderInterval/0xea60)+_0x25893e(0x1ef)+_0x1bfb6f))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x25893e(0x154))logHistory(_0x25893e(0x18f),_0x25893e(0x1cf)+_0x1bfb6f);await unlockOrders();}}}}}async function cancelOrders(){const _0x2308c8=_0x2c11f6;lastOrders[_0x2308c8(0x19a)](async _0x3c54fe=>{const _0xe6befe=_0x2308c8;try{const _0x4e784c=await exchange[_0xe6befe(0xe4)](_0x3c54fe[_0xe6befe(0x248)],_0x3c54fe[_0xe6befe(0x1f3)]);}catch(_0x1af235){if(_0x1af235[_0xe6befe(0x1f8)]()['includes'](_0xe6befe(0x219))){}else await handleError(_0x1af235,_0xe6befe(0x24a));}});}async function initCoinResults(_0x426ca7){const _0x3bbd95=_0x2c11f6;_0x426ca7?logger[_0x3bbd95(0x103)](_0x3bbd95(0x157)+_0x426ca7):logger[_0x3bbd95(0x103)](_0x3bbd95(0x187)),config['portfolio'][_0x3bbd95(0x19a)](_0x9b7732=>{const _0x5cb69b=_0x3bbd95;if(!_0x9b7732[_0x5cb69b(0x137)]&&_0x9b7732[_0x5cb69b(0x22f)]!=config[_0x5cb69b(0x1f9)]){const _0x284827=currentCoins['find'](_0x6423fb=>_0x6423fb['coin']==_0x9b7732[_0x5cb69b(0x22f)]),_0x2d90c9=global[_0x5cb69b(0x210)][noslash(_0x9b7732[_0x5cb69b(0x1f3)])];let _0x44db27=_0x284827?_0x284827[_0x5cb69b(0x10d)]:null,_0x4f4275=_0x9b7732[_0x5cb69b(0x232)]?0x1/_0x2d90c9:_0x2d90c9,_0x116b2c;config[_0x5cb69b(0x228)][_0x5cb69b(0x19a)](_0x366992=>{const _0x4e5d20=_0x5cb69b;!_0x116b2c&&(_0x116b2c=_0x366992[_0x4e5d20(0x1d6)]['find'](_0x28ca0f=>_0x28ca0f['coin']==_0x9b7732[_0x4e5d20(0x22f)]),_0x116b2c&&(_0x44db27=_0x116b2c[_0x4e5d20(0x10d)],_0x4f4275=_0x116b2c[_0x4e5d20(0x1df)]));});let _0x3085ff=dbCoinResults['get'](_0x5cb69b(0x249))['find']({'coin':_0x9b7732[_0x5cb69b(0x22f)]})['value']();if(!_0x3085ff){const _0x7f5545={'coin':_0x9b7732[_0x5cb69b(0x22f)],'number':_0x44db27,'breakeven':_0x4f4275,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5cb69b(0xca)](_0x5cb69b(0x249))[_0x5cb69b(0x1d4)](_0x7f5545)['write']();}else{if(_0x426ca7&&_0x9b7732[_0x5cb69b(0x22f)]==_0x426ca7){const _0x180a0b={'coin':_0x9b7732['coin'],'number':_0x44db27,'breakeven':_0x4f4275,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5cb69b(0xca)]('coins')['find']({'coin':_0x9b7732[_0x5cb69b(0x22f)]})[_0x5cb69b(0x250)](_0x180a0b)[_0x5cb69b(0x1ba)]();}}}});}async function updateCoinResults(_0x4537c4,_0x346069=![]){const _0x5a35cd=_0x2c11f6;let _0x5a745c,_0x2d6087,_0x48b96e,_0x47c5d6,_0x5446a3,_0x546abf,_0x449912=dbCoinResults[_0x5a35cd(0xca)](_0x5a35cd(0x249))[_0x5a35cd(0xd0)]({'coin':_0x4537c4[_0x5a35cd(0x22f)]})[_0x5a35cd(0x198)](),_0x1ad783=![];Object[_0x5a35cd(0x155)](_0x449912)[_0x5a35cd(0x19a)](([_0x5f5b50,_0x5c2aba])=>{if(_0x5c2aba==null)_0x1ad783=!![];});(!_0x449912||_0x1ad783)&&(await initCoinResults(_0x4537c4[_0x5a35cd(0x22f)]),_0x449912=dbCoinResults[_0x5a35cd(0xca)](_0x5a35cd(0x249))['find']({'coin':_0x4537c4['coin']})[_0x5a35cd(0x198)]());_0x4537c4[_0x5a35cd(0x232)]&&(_0x546abf={'filled':_0x4537c4[_0x5a35cd(0x1bf)]*_0x4537c4[_0x5a35cd(0x1df)],'amount':_0x4537c4[_0x5a35cd(0x1bf)]*_0x4537c4['price'],'side':_0x4537c4['side']==_0x5a35cd(0x17c)?_0x5a35cd(0x114):_0x5a35cd(0x17c),'price':0x1/_0x4537c4['price']},_0x4537c4={..._0x4537c4,..._0x546abf});_0x346069?_0x2d6087=_0x4537c4[_0x5a35cd(0x152)]==_0x5a35cd(0x114)?_0x449912[_0x5a35cd(0x10d)]+_0x4537c4[_0x5a35cd(0x1bf)]:_0x449912[_0x5a35cd(0x10d)]-_0x4537c4[_0x5a35cd(0x1bf)]:_0x2d6087=await getCoinNumber(_0x4537c4['coin']);if(_0x4537c4['fee']&&_0x4537c4[_0x5a35cd(0x12d)][_0x5a35cd(0x1b5)]==config['basecoin'])_0x5a745c=_0x4537c4[_0x5a35cd(0x12d)][_0x5a35cd(0x165)];else{if(_0x4537c4[_0x5a35cd(0x12d)]&&_0x4537c4['fee'][_0x5a35cd(0x1b5)]==_0x5a35cd(0x235)&&!_0x346069)_0x5a745c=_0x4537c4[_0x5a35cd(0x12d)][_0x5a35cd(0x165)]*global[_0x5a35cd(0x210)]['BNB'+config[_0x5a35cd(0x1f9)]];else _0x5a745c=defaultFee*_0x4537c4['filled']*_0x4537c4[_0x5a35cd(0x1df)];}_0x4537c4[_0x5a35cd(0x152)]=='buy'?(_0x48b96e=_0x2d6087!=0x0?(_0x449912['breakeven']*_0x449912[_0x5a35cd(0x10d)]+_0x4537c4[_0x5a35cd(0x1df)]*(_0x2d6087-_0x449912[_0x5a35cd(0x10d)])+_0x5a745c)/_0x2d6087:0x0,_0x47c5d6=_0x449912['realized']):(_0x48b96e=_0x2d6087!=0x0?(_0x449912[_0x5a35cd(0x220)]*_0x449912[_0x5a35cd(0x10d)]-_0x4537c4[_0x5a35cd(0x1df)]*(_0x449912['number']-_0x2d6087)+_0x5a745c)/_0x2d6087:0x0,_0x47c5d6=_0x449912['realized']+(_0x4537c4[_0x5a35cd(0x1df)]-_0x449912[_0x5a35cd(0x220)])*_0x4537c4[_0x5a35cd(0x1bf)]);_0x5446a3=(_0x4537c4[_0x5a35cd(0x1df)]-_0x48b96e-_0x5a745c/_0x4537c4['filled'])*_0x2d6087;let _0x2ff10f={'coin':_0x4537c4['coin'],'number':_0x2d6087,'breakeven':formatResult(_0x48b96e,0x8),'realized':formatResult(_0x47c5d6,0x8),'unrealized':formatResult(_0x5446a3,0x8),'fees':formatResult(_0x449912[_0x5a35cd(0xc9)]+_0x5a745c,0x8),'sells':_0x4537c4[_0x5a35cd(0x152)]==_0x5a35cd(0x17c)?_0x449912['sells']+0x1:_0x449912['sells'],'buys':_0x4537c4[_0x5a35cd(0x152)]==_0x5a35cd(0x114)?_0x449912[_0x5a35cd(0x197)]+0x1:_0x449912[_0x5a35cd(0x197)]};dbCoinResults[_0x5a35cd(0xca)](_0x5a35cd(0x249))[_0x5a35cd(0xd0)]({'coin':_0x4537c4[_0x5a35cd(0x22f)]})[_0x5a35cd(0x250)](_0x2ff10f)['write']();if(!_0x346069){if(_0x4537c4[_0x5a35cd(0x12d)]&&_0x4537c4[_0x5a35cd(0x12d)]['currency']==_0x5a35cd(0x235)){const _0x65c2bf=currentCoins[_0x5a35cd(0xd0)](_0x9dc825=>_0x9dc825[_0x5a35cd(0x22f)]==_0x5a35cd(0x235));if(_0x65c2bf){let _0x4fcb6e=dbCoinResults[_0x5a35cd(0xca)](_0x5a35cd(0x249))[_0x5a35cd(0xd0)]({'coin':_0x5a35cd(0x235)})[_0x5a35cd(0x198)]();_0x2ff10f={..._0x4fcb6e,'number':_0x65c2bf['number']},dbCoinResults[_0x5a35cd(0xca)](_0x5a35cd(0x249))[_0x5a35cd(0xd0)]({'coin':'BNB'})[_0x5a35cd(0x250)](_0x2ff10f)[_0x5a35cd(0x1ba)]();}}}}async function placeOrder(_0x21e1c5){const _0x26f2d1=_0x2c11f6,_0x5c7188=config[_0x26f2d1(0x1ae)]==_0x26f2d1(0x154)?_0x26f2d1(0x154):_0x26f2d1(0x20f);if(lockOrders==ORDERS[_0x26f2d1(0x1b0)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x26f2d1(0x1e6)],allOrdersPlaced=![],validateOrdersState='initial';let _0x124f2f=![];lastOrders=[];for(const _0x5e8df0 of _0x21e1c5){let _0x408019,_0x594b19,_0x32b0b2,_0x67824f,_0x523d0f,_0x225891=_0x5e8df0[_0x26f2d1(0x1f3)];try{const _0x56a0ff=await exchange[_0x26f2d1(0x133)](_0x225891);_0x408019=_0x5e8df0[_0x26f2d1(0x232)]?0x1/_0x5e8df0[_0x26f2d1(0xf8)]:_0x5e8df0['last'],_0x594b19=_0x56a0ff[_0x26f2d1(0x1e4)],_0x32b0b2=_0x56a0ff[_0x26f2d1(0x14e)];_0x5e8df0[_0x26f2d1(0x232)]?(_0x67824f=_0x5e8df0[_0x26f2d1(0x152)]=='buy'?_0x26f2d1(0x17c):_0x26f2d1(0x114),_0x523d0f=Math[_0x26f2d1(0x1d5)](_0x5e8df0['trade'])/_0x408019):(_0x67824f=_0x5e8df0['side'],_0x523d0f=Math[_0x26f2d1(0x1d5)](_0x5e8df0[_0x26f2d1(0x21a)]));_0x5c7188==_0x26f2d1(0x20f)&&(config['ordertype']==_0x26f2d1(0xc5)&&(_0x408019=_0x67824f==_0x26f2d1(0x114)?_0x594b19:_0x32b0b2),config['ordertype']==_0x26f2d1(0x188)&&(_0x408019=_0x67824f==_0x26f2d1(0x114)?_0x32b0b2:_0x594b19));_0x523d0f=formatResult(_0x523d0f,0x8),_0x408019=formatResult(_0x408019,0x8);const _0x48fa32=_0x67824f=='sell'?config['emojisell']?String['fromCodePoint']('0x'+config[_0x26f2d1(0x10c)])+'\x20':'':config[_0x26f2d1(0x1b4)]?String[_0x26f2d1(0x1fc)]('0x'+config['emojibuy'])+'\x20':'',_0x44550a=_0x5c7188==_0x26f2d1(0x154)?'Market':config[_0x26f2d1(0x1ae)]=='limit-high'?_0x26f2d1(0x168):_0x26f2d1(0x130),_0x22e293=(Math[_0x26f2d1(0x1fd)](Math[_0x26f2d1(0xfa)]()*0x35a4e900)+0x5f5e100)[_0x26f2d1(0x1f8)]();lastOrders[_0x26f2d1(0x1d4)]({'customId':_0x22e293,'symbol':_0x225891,'coin':_0x5e8df0[_0x26f2d1(0x22f)],'amount':_0x523d0f,'price':_0x408019,'side':_0x67824f,'reverse':_0x5e8df0[_0x26f2d1(0x232)],'filled':0x0});if(_0x5c7188==_0x26f2d1(0x154))logHistory(_0x26f2d1(0xce),''+_0x48fa32+_0x44550a+_0x26f2d1(0x147)+_0x225891+'\x20'+_0x67824f+'\x20#'+formatResult(_0x523d0f,0x8)+'\x20@'+formatResult(_0x408019,0x8));else logHistory(_0x26f2d1(0xce),''+_0x48fa32+_0x44550a+_0x26f2d1(0x147)+_0x225891+'\x20'+_0x67824f+'\x20#'+formatResult(_0x523d0f,0x8)+'\x20@'+formatResult(_0x408019,0x8));const _0x3ee99c=await exchange[_0x26f2d1(0xfb)](_0x225891,_0x5c7188,_0x67824f,_0x523d0f,_0x408019);logger['debug'](_0x26f2d1(0x212)+_0x3ee99c['id']+_0x26f2d1(0xc8)+_0x22e293);const _0x20e1d2=lastOrders[_0x26f2d1(0x21d)]-0x1;if(_0x20e1d2>=0x0&&lastOrders[_0x20e1d2]['customId']==_0x22e293){lastOrders[_0x20e1d2][_0x26f2d1(0x248)]=_0x3ee99c['id'];if(_0x3ee99c['amount'])lastOrders[_0x20e1d2]['amount']=_0x3ee99c[_0x26f2d1(0x101)];if(_0x3ee99c['price'])lastOrders[_0x20e1d2][_0x26f2d1(0x1df)]=_0x3ee99c[_0x26f2d1(0x1df)];lastOrders[_0x20e1d2][_0x26f2d1(0x12d)]=_0x3ee99c[_0x26f2d1(0x12d)];}if(config['cooldown']!=0x0){let _0x1e7425=null;if(cooldownTracker[_0x26f2d1(0x21d)]==config[_0x26f2d1(0x243)]-0x1)_0x1e7425=cooldownTracker['shift']();const _0x148b06=getTimeStamp();cooldownTracker[_0x26f2d1(0x1d4)](_0x148b06);if(_0x1e7425){const _0x5c6332=fns[_0x26f2d1(0x142)](new Date(_0x148b06),new Date(_0x1e7425));if(_0x5c6332<cooldownInterval){logHistory(_0x26f2d1(0x163),_0x26f2d1(0xe6)+config[_0x26f2d1(0x243)]+_0x26f2d1(0x222)+cooldownInterval/0x3c+_0x26f2d1(0x122)+cooldownPeriod/(0xe10*0x3e8)+_0x26f2d1(0x223)),coolingDown=!![];break;}}}}catch(_0x17528d){if(_0x17528d[_0x26f2d1(0x1f8)]()['includes'](_0x26f2d1(0x1b9)))lastOrders=lastOrders[_0x26f2d1(0x24d)](_0x2ecd18=>_0x2ecd18[_0x26f2d1(0x1f3)]!=_0x225891),logHistory(_0x26f2d1(0x163),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x225891),_0x124f2f=!![];else{if(_0x17528d[_0x26f2d1(0x1f8)]()[_0x26f2d1(0xc1)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x1efa3e=>_0x1efa3e[_0x26f2d1(0x1f3)]!=_0x225891),logHistory('error',_0x26f2d1(0xcd)+_0x225891),_0x124f2f=!![];else{if(_0x17528d[_0x26f2d1(0x1f8)]()[_0x26f2d1(0xc1)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x482d85=>_0x482d85['symbol']!=_0x225891),logHistory(_0x26f2d1(0x163),_0x26f2d1(0xf2)+_0x225891),_0x124f2f=!![];else _0x17528d[_0x26f2d1(0x1f8)]()[_0x26f2d1(0xc1)](_0x26f2d1(0x23b))?(lastOrders=lastOrders[_0x26f2d1(0x24d)](_0x3af9f2=>_0x3af9f2['symbol']!=_0x225891),logHistory(_0x26f2d1(0x163),_0x26f2d1(0x124)+_0x225891),_0x124f2f=!![]):(lastOrders=lastOrders[_0x26f2d1(0x24d)](_0x3253ff=>_0x3253ff['symbol']!=_0x225891),await handleError(_0x17528d,_0x26f2d1(0x24f),_0x225891));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x26f2d1(0x21d)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2e2bbe=config[_0x26f2d1(0x1ae)]==_0x26f2d1(0x154)?validateOrderTimeout*0x3c*0x3e8:config[_0x26f2d1(0x20b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x14ac97=_0x26f2d1;validateOrders(_0x14ac97(0x1e0));},_0x2e2bbe);}else unlockOrders();_0x124f2f&&config[_0x26f2d1(0x1b7)]&&await pauseBot(_0x26f2d1(0x15e)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x26f2d1(0x18f),_0x26f2d1(0x1f0)));}else{if(coolingDown)!config[_0x26f2d1(0x1b7)]&&logHistory(_0x26f2d1(0x163),_0x26f2d1(0x1d1));else lockOrders!=ORDERS[_0x26f2d1(0x1b0)]&&(!config[_0x26f2d1(0x1b7)]&&(config[_0x26f2d1(0x1ae)]==_0x26f2d1(0x154)?logHistory(_0x26f2d1(0x163),_0x26f2d1(0x1a7)):logHistory(_0x26f2d1(0x163),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x16c873){const _0x438fcb=_0x2c11f6,_0x4abcaa={...config,'openOrders':_0x16c873};let _0x148e0a=dbConfig['get']('bot')[_0x438fcb(0xd0)]({'botID':botID})[_0x438fcb(0x198)]();_0x148e0a&&dbConfig['get'](_0x438fcb(0x123))[_0x438fcb(0xd0)]({'botID':botID})[_0x438fcb(0x250)](_0x4abcaa)[_0x438fcb(0x1ba)]();}function restoreOrders(){const _0x26f6b4=_0x2c11f6;let _0x1d398f;config[_0x26f6b4(0x10a)]&&allOpenOrders[_0x26f6b4(0x19a)](_0x5ae466=>{const _0x367e82=_0x26f6b4,_0x4be34b=config['openOrders']['find'](_0x10271a=>_0x10271a[_0x367e82(0x248)]==_0x5ae466['id']);_0x4be34b&&(lastOrders['push'](_0x4be34b),_0x1d398f=_0x5ae466[_0x367e82(0x11c)]);});if(lastOrders[_0x26f6b4(0x21d)]>0x0){lockOrders=ORDERS[_0x26f6b4(0x1e6)],validateOrdersState=_0x26f6b4(0x144),allOrdersPlaced=!![];const _0x417a40=new Date()[_0x26f6b4(0x1c0)](),_0x215b7b=config[_0x26f6b4(0x1ae)]==_0x26f6b4(0x154)?validateOrderTimeout*0x3c*0x3e8:config[_0x26f6b4(0x20b)]*0x3c*0x3e8;if(_0x1d398f+_0x215b7b>_0x417a40){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1c560c=_0x26f6b4;validateOrders(_0x1c560c(0x1e0));},_0x1d398f+_0x215b7b-_0x417a40);}else validateOrders(_0x26f6b4(0x1e0));}}async function sendMetricsTelegram(){const _0x4dcd5f=_0x2c11f6;if(!coinsLoaded){process[_0x4dcd5f(0x18e)]({'telegrammsg':_0x4dcd5f(0x1ea)},_0xe9438e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x292560='';if(config[_0x4dcd5f(0x1d8)])_0x292560=_0x4dcd5f(0x241)+config[_0x4dcd5f(0x106)]+_0x4dcd5f(0x162);else _0x292560='<b>Bot\x20'+botID+_0x4dcd5f(0x162);const _0x41f9ff=getKPIs(_0x4dcd5f(0x1f9)),_0x122926=getKPIs(_0x4dcd5f(0x1d3),config[_0x4dcd5f(0x1d3)]),_0x2facb7=getKPIs('net-basecoin'),_0x316828=getKPIs('net-fiat',config[_0x4dcd5f(0x1d3)]);_0x292560+='<pre>',_0x292560+=_0x41f9ff[_0x4dcd5f(0x171)]+_0x4dcd5f(0x202)+_0x41f9ff[_0x4dcd5f(0x198)]+'\x0a',_0x292560+=_0x41f9ff[_0x4dcd5f(0x1a3)]+':\x20'+_0x41f9ff['change']+'%\x0a',_0x292560+=_0x122926[_0x4dcd5f(0x171)]+'\x20:\x20'+_0x122926['value']+'\x0a',_0x292560+=_0x122926[_0x4dcd5f(0x1a3)]+':\x20'+_0x122926[_0x4dcd5f(0x1e8)]+'%\x0a',_0x292560+=_0x2facb7['leftTxt']+':\x20'+_0x2facb7[_0x4dcd5f(0x198)]+'\x20('+config['basecoin']+')\x0a',_0x292560+=_0x2facb7[_0x4dcd5f(0x1a3)]+':\x20'+_0x2facb7[_0x4dcd5f(0x1e8)]+_0x4dcd5f(0x244)+config[_0x4dcd5f(0x1f9)]+')\x0a',_0x292560+=_0x316828[_0x4dcd5f(0x171)]+':\x20'+_0x316828[_0x4dcd5f(0x198)]+'\x20('+config[_0x4dcd5f(0x1d3)]+')\x0a',_0x292560+=_0x316828[_0x4dcd5f(0x1a3)]+':\x20'+_0x316828['change']+_0x4dcd5f(0x244)+config[_0x4dcd5f(0x1d3)]+')\x0a',_0x292560+=_0x4dcd5f(0x20a),process[_0x4dcd5f(0x18e)]({'telegrammsg':_0x292560},_0x3df03=>{});}async function sendPortfolioTelegram(){const _0x2efb08=_0x2c11f6;if(!coinsLoaded){process['send']({'telegrammsg':_0x2efb08(0x1ea)},_0x5480f1=>{});return;}let _0x96e1c7='';if(config[_0x2efb08(0x1d8)])_0x96e1c7=_0x2efb08(0x241)+config['botname']+_0x2efb08(0x127);else _0x96e1c7='<b>Bot\x20'+botID+_0x2efb08(0x127);_0x96e1c7+=_0x2efb08(0x1c5),_0x96e1c7+=_0x2efb08(0xff),_0x96e1c7+=_0x2efb08(0x237),_0x96e1c7+=_0x2efb08(0xff),currentCoins['forEach'](_0x2a90f3=>{const _0x48ab07=_0x2efb08;_0x96e1c7+=_0x2a90f3['coin'][_0x48ab07(0x13a)](0x7)+'|\x20'+formatPad(_0x2a90f3['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2a90f3['target'],0x2,0x6)+'|\x20'+formatPad(_0x2a90f3['delta']*0x64,0x2,0x6)+'\x0a';}),_0x96e1c7+=_0x2efb08(0x20a),process[_0x2efb08(0x18e)]({'telegrammsg':_0x96e1c7},_0x43ebef=>{});}function formatPad(_0x396c15,_0x2bc9ef,_0x35511e){const _0x2c309c=_0x2c11f6,_0x49c75c=formatResultString(_0x396c15,_0x2bc9ef);return _0x49c75c?_0x49c75c['padStart'](_0x35511e):''[_0x2c309c(0x141)](_0x35511e);}function logHistory(_0x4fefa7,_0x558fd4,_0x2cb0e3=''){const _0x31e61e=_0x2c11f6;let _0x4dca62={'time':getTimeStamp(),'type':_0x4fefa7,'event':_0x558fd4};dbLogs[_0x31e61e(0xca)](_0x31e61e(0xc6))[_0x31e61e(0x1d4)](_0x4dca62)['write']();if(_0x2cb0e3=='')_0x2cb0e3=_0x558fd4;proxyEmit('event',{'log':_0x4dca62,'summary':_0x2cb0e3}),process[_0x31e61e(0x18e)]({'telegram':{..._0x4dca62,'botname':config[_0x31e61e(0x106)],'showname':config[_0x31e61e(0x1d8)]}},_0x1b0e78=>{}),logger[_0x31e61e(0x156)](''+_0x4dca62[_0x31e61e(0x16c)]);}function emitHistory(_0x2a0c15={}){const _0x146635=_0x2c11f6;Object['keys'](_0x2a0c15)[_0x146635(0x21d)]==0x0&&(_0x2a0c15={'type':['order',_0x146635(0x16c)],'event':'','page':0x1});if(_0x2a0c15['type'][_0x146635(0xc1)](_0x146635(0x16c)))_0x2a0c15[_0x146635(0x230)][_0x146635(0x22a)](_0x2a0c15[_0x146635(0x230)][_0x146635(0x132)](_0x146635(0x16c)),0x1,'error','warning','success');if(dbLogs[_0x146635(0x134)](_0x146635(0xc6))[_0x146635(0x198)]()){let _0x47d709=dbLogs['get'](_0x146635(0xc6))['filter'](_0x228cc3=>{const _0x35ac63=_0x146635;if(_0x2a0c15[_0x35ac63(0x230)]['length']==0x0)return![];else return _0x2a0c15[_0x35ac63(0x230)][_0x35ac63(0xc1)](_0x228cc3[_0x35ac63(0x230)]);})[_0x146635(0x24d)](_0x57f962=>{const _0x1216f4=_0x146635;if(_0x2a0c15[_0x1216f4(0x16c)]=='')return!![];else return _0x57f962[_0x1216f4(0x16c)]['toLowerCase']()[_0x1216f4(0xc1)](_0x2a0c15[_0x1216f4(0x16c)][_0x1216f4(0x136)]());})[_0x146635(0xc7)](_0x146635(0x139)),_0x8525e2=_0x47d709['value']()[_0x146635(0x21d)];_0x47d709=_0x47d709[_0x146635(0x232)]()[_0x146635(0x1e2)]((_0x2a0c15['page']-0x1)*logPageSize,_0x2a0c15[_0x146635(0xd5)]*logPageSize-0x1)[_0x146635(0x232)]()['value'](),proxyEmit(_0x146635(0x15d),{'logs':_0x47d709,'total':_0x8525e2});}else proxyEmit(_0x146635(0x15d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1ccc41){const _0x512a12=_0x2c11f6;if(dbLogs[_0x512a12(0x134)](_0x512a12(0xc6))['value']()){const _0x552fc0=dbLogs[_0x512a12(0xca)](_0x512a12(0xc6))[_0x512a12(0xc7)](_0x512a12(0x139))['filter'](_0x458e89=>{const _0x54abb3=_0x512a12;return _0x458e89[_0x54abb3(0x230)]==_0x54abb3(0xce);})[_0x512a12(0x198)]();dbLogs[_0x512a12(0xca)](_0x512a12(0xc6))[_0x512a12(0x1a5)]()[_0x512a12(0x1ba)](),dbLogs[_0x512a12(0xca)](_0x512a12(0xc6))['assign'](_0x552fc0)[_0x512a12(0x1ba)](),emitHistory(_0x1ccc41);}}async function pauseBot(_0x1db533=''){const _0x40fde3=_0x2c11f6,_0x2c5af1=new Date()['getTime']();if(!lastErrorShown||_0x2c5af1-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2c5af1;!lastBotPause?(lastBotPause=_0x2c5af1,consecutivePauses=0x1):(_0x2c5af1-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x40fde3(0x18e)]({'stop':_0x40fde3(0x224)},_0x2bed54=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x40fde3(0x1c0)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x1db533)_0x1db533+=_0x40fde3(0x214);logHistory(_0x40fde3(0x163),_0x1db533+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x40fde3(0xf3)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x49a524=_0x2c11f6;process[_0x49a524(0x18e)]({'stop':_0x49a524(0x246)},_0x4eb783=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3ec85f,_0x8679b3){const _0x3baf58=_0x2c11f6;if(_0x3ec85f[_0x3baf58(0x1f8)]()[_0x3baf58(0xc1)](_0x3baf58(0xe8)))return logHistory(_0x3baf58(0x163),config[_0x3baf58(0x1b2)]+_0x3baf58(0x234)),![];else{if(_0x3ec85f[_0x3baf58(0x1f8)]()[_0x3baf58(0xc1)](_0x3baf58(0x24c)))return logHistory(_0x3baf58(0x163),config[_0x3baf58(0x1b2)]+_0x3baf58(0x16d)),![];else{if(_0x3ec85f[_0x3baf58(0x1f8)]()[_0x3baf58(0xc1)]('AuthenticationError'))return logHistory(_0x3baf58(0x163),config['exchange']+_0x3baf58(0x208)),logHistory(_0x3baf58(0x163),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x3ec85f,_0x8679b3);}}}async function handleError(_0x2f78fa,_0x119146,_0x102303=''){const _0x151312=_0x2c11f6,_0x4d4ccd=config['exchange']||_0x151312(0xeb);if(_0x2f78fa[_0x151312(0x1f8)]()['includes']('DDoSProtection')||_0x2f78fa[_0x151312(0x1f8)]()['includes'](_0x151312(0x1db)))await pauseBot(config[_0x151312(0x1b2)]+_0x151312(0xf9));else{if(_0x2f78fa[_0x151312(0x1f8)]()['includes'](_0x151312(0x1e7))||_0x2f78fa['toString']()[_0x151312(0xc1)](_0x151312(0xcb)))await pauseBot(config[_0x151312(0x1b2)]+_0x151312(0x115));else{if(_0x2f78fa[_0x151312(0x1f8)]()['includes'](_0x151312(0xdb)))await pauseBot(config[_0x151312(0x1b2)]+_0x151312(0x119));else{if(_0x2f78fa[_0x151312(0x1f8)]()[_0x151312(0xc1)](_0x151312(0xd8)))await pauseBot(config[_0x151312(0x1b2)]+'\x20closed\x20the\x20connection');else{if(_0x2f78fa['toString']()[_0x151312(0xc1)](_0x151312(0x173)))logHistory(_0x151312(0x163),_0x119146+_0x151312(0x199)),logHistory(_0x151312(0x163),_0x151312(0x1ca)),await killBot();else{if(_0x2f78fa[_0x151312(0x1f8)]()[_0x151312(0xc1)](_0x151312(0x131)))logHistory('error',_0x119146+_0x151312(0x20d)),logHistory(_0x151312(0x163),_0x151312(0x1ca)),await killBot();else{if(_0x2f78fa instanceof ccxt['NetworkError'])logger[_0x151312(0x103)](_0x151312(0x116),_0x2f78fa),await pauseBot(config[_0x151312(0x1b2)]+_0x151312(0x1c7));else{if(_0x2f78fa[_0x151312(0x1f8)]()[_0x151312(0xc1)](_0x151312(0xe8)))logHistory(_0x151312(0x163),_0x119146+_0x151312(0x214)+config[_0x151312(0x1b2)]+_0x151312(0x11b)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2f78fa['toString']()[_0x151312(0xc1)](_0x151312(0x24c)))logHistory(_0x151312(0x163),_0x119146+_0x151312(0x214)+config[_0x151312(0x1b2)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x151312(0x163),_0x151312(0x1ca)),await killBot();else{if(_0x2f78fa[_0x151312(0x1f8)]()['includes'](_0x151312(0x13c)))logHistory(_0x151312(0x163),_0x119146+_0x151312(0x214)+config[_0x151312(0x1b2)]+_0x151312(0x22c)),logHistory(_0x151312(0x163),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2f78fa[_0x151312(0x1f8)]()['includes'](_0x151312(0x191)))logHistory(_0x151312(0x163),_0x119146+_0x151312(0x120)+_0x102303);else _0x2f78fa instanceof ccxt['ExchangeError']?(logger[_0x151312(0x103)]('Uncaught\x20ExchangeError:',_0x2f78fa),logHistory(_0x151312(0x163),_0x119146+_0x151312(0x214)+config[_0x151312(0x1b2)]+'\x20exchange\x20error')):(logger[_0x151312(0x156)](_0x119146+_0x151312(0x14f),_0x2f78fa),await pauseBot(_0x151312(0x1fe)));}}}}}}}}}}}function formatResult(_0x202052,_0x2a2285){const _0xa2f67b=_0x2c11f6;return parseFloat(_0x202052[_0xa2f67b(0x1c4)](_0x2a2285));}function formatResultTruncate(_0x13bd0b,_0x1313c1){const _0x46c5f5=_0x2c11f6;let _0x3784a1=formatResultString(_0x13bd0b,0xa),_0x499ef2=_0x3784a1[_0x46c5f5(0x132)]('.');return _0x499ef2!=-0x1&&(_0x3784a1=_0x3784a1['slice'](0x0,_0x499ef2+_0x1313c1+0x1)),Number(_0x3784a1);}function formatResultString(_0x3cf411,_0x21b448){const _0x5e9a0b=_0x2c11f6;let _0x132df9;if(!(''+_0x3cf411)[_0x5e9a0b(0xc1)]('e'))_0x132df9=+(Math[_0x5e9a0b(0x1f5)](_0x3cf411+'e+'+_0x21b448)+'e-'+_0x21b448);else{let _0x22e668=(''+_0x3cf411)[_0x5e9a0b(0x151)]('e'),_0xac5ba7='';+_0x22e668[0x1]+_0x21b448>0x0&&(_0xac5ba7='+'),_0x132df9=+(Math[_0x5e9a0b(0x1f5)](+_0x22e668[0x0]+'e'+_0xac5ba7+(+_0x22e668[0x1]+_0x21b448))+'e-'+_0x21b448);}return Number(_0x132df9)['toFixed'](_0x21b448);}function getServerTime(){const _0x56b762=_0x2c11f6,_0xcd0a4b=new Date();return _0xcd0a4b['getFullYear']()+'/'+(_0xcd0a4b['getMonth']()+0x1)[_0x56b762(0x1f8)]()[_0x56b762(0x141)](0x2,'0')+'/'+_0xcd0a4b[_0x56b762(0x1a1)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xcd0a4b[_0x56b762(0x100)]()['toString']()[_0x56b762(0x141)](0x2,'0')+':'+_0xcd0a4b[_0x56b762(0x143)]()[_0x56b762(0x1f8)]()['padStart'](0x2,'0')+':'+_0xcd0a4b[_0x56b762(0x1b6)]()[_0x56b762(0x1f8)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1bcfe1=_0x2c11f6,_0x53191c=shiftedTime();return _0x53191c[_0x1bcfe1(0x1cb)]()+'/'+(_0x53191c[_0x1bcfe1(0xe2)]()+0x1)[_0x1bcfe1(0x1f8)]()[_0x1bcfe1(0x141)](0x2,'0')+'/'+_0x53191c[_0x1bcfe1(0x1a1)]()[_0x1bcfe1(0x1f8)]()[_0x1bcfe1(0x141)](0x2,'0')+'\x20'+_0x53191c[_0x1bcfe1(0x100)]()[_0x1bcfe1(0x1f8)]()[_0x1bcfe1(0x141)](0x2,'0')+':'+_0x53191c[_0x1bcfe1(0x143)]()['toString']()[_0x1bcfe1(0x141)](0x2,'0')+':'+_0x53191c['getSeconds']()[_0x1bcfe1(0x1f8)]()[_0x1bcfe1(0x141)](0x2,'0');}function getDate(){const _0x248357=_0x2c11f6,_0x14cc78=shiftedTime();return _0x14cc78[_0x248357(0x1cb)]()+'/'+(_0x14cc78['getMonth']()+0x1)[_0x248357(0x1f8)]()['padStart'](0x2,'0')+'/'+_0x14cc78[_0x248357(0x1a1)]()['toString']()[_0x248357(0x141)](0x2,'0');}function getHour(){const _0x3116d6=_0x2c11f6,_0x20204f=shiftedTime();return _0x20204f[_0x3116d6(0x100)]()[_0x3116d6(0x1f8)]()['padStart'](0x2,'0');}function sleep(_0x128301){return new Promise(_0x1527b6=>setTimeout(_0x1527b6,_0x128301));}function shiftedTime(){const _0x4432bb=_0x2c11f6,_0x5a0871=new Date();let _0x5a822d=_0x5a0871;if(config&&config[_0x4432bb(0x1a0)]!==0x0)_0x5a822d=fns[_0x4432bb(0xf0)](_0x5a0871,{'hours':config[_0x4432bb(0x1a0)]});return _0x5a822d;}function timer(_0x421808){const _0x11ce49=_0x2c11f6,_0x306278=new Date();!lasttime?console[_0x11ce49(0x1b3)](getTimeStamp()+_0x11ce49(0x200),_0x421808,_0x306278):console[_0x11ce49(0x1b3)](getTimeStamp()+_0x11ce49(0x200),_0x421808,(_0x306278-lasttime)/0x3e8),lasttime=_0x306278;}