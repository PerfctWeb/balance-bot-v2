const _0x23bcd3=_0x690f;(function(_0x5e0b2d,_0x2195d2){const _0x5b3b6e=_0x690f,_0x4f4095=_0x5e0b2d();while(!![]){try{const _0x21d07e=parseInt(_0x5b3b6e(0x1b3))/0x1*(-parseInt(_0x5b3b6e(0x116))/0x2)+-parseInt(_0x5b3b6e(0x1aa))/0x3*(parseInt(_0x5b3b6e(0x177))/0x4)+-parseInt(_0x5b3b6e(0x17a))/0x5+parseInt(_0x5b3b6e(0x185))/0x6+parseInt(_0x5b3b6e(0x159))/0x7+parseInt(_0x5b3b6e(0x143))/0x8*(-parseInt(_0x5b3b6e(0xfe))/0x9)+parseInt(_0x5b3b6e(0x189))/0xa;if(_0x21d07e===_0x2195d2)break;else _0x4f4095['push'](_0x4f4095['shift']());}catch(_0x770563){_0x4f4095['push'](_0x4f4095['shift']());}}}(_0x39c5,0x2816f));function _0x39c5(){const _0x26b56c=['BNB','Executed\x20','Order\x20amount\x20is\x20invalid:\x20','eventType',',\x20must\x20be\x20a\x203\x20digit\x20number','cancelOrder','getDate','BUSD','getTime','fee','defaults','getMonth','-performance.json','AuthenticationError','46192PMmOKu','EUR','configuration-stored','Order(s)\x20filled\x20-\x20balancing\x20resumed','balances','send','Market','\x20order:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fromCodePoint','min','log','Crypt','map','\x20hour','************','assign','version','message','cancelOrder()','write','event','2081226UaiCPw','function','emitHistory','createOrder','USDC','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','split','getFullYear','apiSecret','keys','getFiat()','toString','eachDayOfInterval','bb-settings.json','sort','buy','get','timeshift','asset','success','fetchTickers','parseISO','001','side','exchange','startprice','bot','wsKey','./version.json','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','971932uBPdyZ','initclient','spot','1015595uqkFvw','reconnected','timestamp','placeOrder','outboundAccountPosition','breakeven','loadMarkets','running','sells','distribution','coinamount','977346AjtktZ','datetime','total','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','2749270DYtBLL','remainingSymbols','limit','ccxt','getSeconds','userData','availableBalance','type','page','getHours','push','round','date','apply','coin','filter','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','MIN_NOTIONAL','close','limits','RequestTimeout','showname','yyyy/MM/dd','abs','milliseconds','stringify','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','BTCEUR','./config/','lowdb/adapters/FileSync','-results.json','add','loadSymbols()','3IOhCyu','constructor','kill','error','market','getMinutes','binance','startnumber','bot-','137BtAMTT','replace','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','progress','getPortfolio','emojisell','botname','offset','reverse','orderType','DAI/','placeOrder()','logs','sortBy','restart','Performance\x20recreation\x20completed\x20successfully','performance','bid','BTC/USDT','ordertype','-config.json','apiKey','kline','getStartingBalances','order','orderStatus','Unfilled\x20order(s)\x20canceled\x20after\x20','API-key\x20format\x20invalid','event-history','getCloses()','toFixed','fees','RSA-OAEP','Bot\x20','last','sell','delta','starting-balances','Pausing\x20bot\x20for\x205\x20minutes\x20(','timeout','number','padStart','closeWs','date-fns','trade','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','eur','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','argv','remove','enabled','filled','max','(((.+)+)+)+$','getCoins()','BTC/BUSD','BTC/EUR','\x20|\x20Error\x20details:\x20','getPortfolio()','Order:\x20','usd','storeHeadless','wss://stream.binance.us:9443','OrderNotFound','settings','time','recreate','forEach','BTCUSDT','Order\x20filled:\x20','portfolio','value','threshold','wss://stream.binance.com:9443','find','mkdirSync','basecoin','ticker','initws()','indexOf','subscribeSpotUserDataStream','valid','toLowerCase','headless','slice','botID','cancelLoading','9dkCPDv','LIMIT','realized','limit-high','args','privateKey','emojibuy','coins','search','length','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Error:\x20Invalid\x20argument\x20','subscribeSpotKline','binanceus','target','symbol','price','parse','shift','isArray','cooldown','differenceInCalendarDays','orderId','entries','1738mNgVOD','\x20>\x20','WebSockets(','decrypt','yyyy/MM/dd\x20HH:mm:ss','fetchBalance','amount','data','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','cost','yyyy-MM-dd\x27T\x27HH:mm:ss','bb-secure.json',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Binance\x20API\x20key\x20is\x20invalid','Limit\x20(low-margin)','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','wsMarket','splice','buys','currency','startdate','coin-loading-progress','exit','lowdb','format','BTC','includes','\x20minutes\x20-\x20balancing\x20resumed','Invalid\x20quantity','excluded','FILLED'];_0x39c5=function(){return _0x26b56c;};return _0x39c5();}const _0x4f75d9=function(){let _0x4e3e94=!![];return function(_0x437e44,_0x25bb32){const _0x46b38e=_0x4e3e94?function(){const _0x54d820=_0x690f;if(_0x25bb32){const _0x973cc5=_0x25bb32[_0x54d820(0x196)](_0x437e44,arguments);return _0x25bb32=null,_0x973cc5;}}:function(){};return _0x4e3e94=![],_0x46b38e;};}(),_0x19220d=_0x4f75d9(this,function(){const _0x5e2948=_0x690f;return _0x19220d[_0x5e2948(0x164)]()[_0x5e2948(0x106)](_0x5e2948(0xdc))[_0x5e2948(0x164)]()[_0x5e2948(0x1ab)](_0x19220d)[_0x5e2948(0x106)](_0x5e2948(0xdc));});_0x19220d();'use strict';const ccxt=require(_0x23bcd3(0x18c)),low=require(_0x23bcd3(0x12d)),FileSync=require(_0x23bcd3(0x1a6)),fs=require('fs'),fns=require(_0x23bcd3(0xd2)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require('hybrid-crypto-js')[_0x23bcd3(0x14f)];let exchange,wsClient;global[_0x23bcd3(0xf4)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x23bcd3(0x175))[_0x23bcd3(0x154)],botID=process[_0x23bcd3(0xd7)][0x2]||_0x23bcd3(0x16f),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x23bcd3(0x14e)](_0x23bcd3(0x109)+botID+_0x23bcd3(0x139)),process[_0x23bcd3(0x12c)](0x1);const userID=process[_0x23bcd3(0xd7)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x23bcd3(0x1a5);!fs['existsSync'](configpath)&&fs[_0x23bcd3(0xf2)](configpath);const configfile=configpath+_0x23bcd3(0x1b2)+botID+_0x23bcd3(0x1c8),logfile=configpath+_0x23bcd3(0x1b2)+botID+'-events.json',performancefile=configpath+_0x23bcd3(0x1b2)+botID+_0x23bcd3(0x141),coinresultsfile=configpath+'bot-'+botID+_0x23bcd3(0x1a7),settingsfile=configpath+_0x23bcd3(0x166),securefile=configpath+_0x23bcd3(0x121),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x23bcd3(0x13f)]({'logs':[]})[_0x23bcd3(0x157)]();function _0x690f(_0x36196a,_0x4eaa92){const _0x36bcca=_0x39c5();return _0x690f=function(_0x19220d,_0x4f75d9){_0x19220d=_0x19220d-0xc0;let _0x39c54c=_0x36bcca[_0x19220d];return _0x39c54c;},_0x690f(_0x36196a,_0x4eaa92);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x23bcd3(0x13f)]({'data':[]})[_0x23bcd3(0x157)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x23bcd3(0x13f)]({'bot':[]})[_0x23bcd3(0x157)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x23bcd3(0x13f)]({'coins':[]})[_0x23bcd3(0x157)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x23bcd3(0x1a4),'symbol':_0x23bcd3(0xdf)},'usd':{'coin':_0x23bcd3(0xeb),'symbol':_0x23bcd3(0x1c6)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3e9258)=>{},'debug':(..._0x1efc8c)=>{},'notice':(..._0x2b0e73)=>{},'info':(..._0x255e19)=>{},'warning':(..._0x4a3482)=>{},'error':async function(..._0x1c56a0){const _0x29672e=_0x23bcd3,_0x23f548=new Date()[_0x29672e(0x13d)]();if(!lastErrorShown||_0x23f548-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x29672e(0x13d)](),logHistory(_0x29672e(0x1ad),'WebSockets('+consecutivePauses+_0x29672e(0x122));let _0x89b82c='';if(_0x1c56a0[0x0])_0x89b82c+=_0x1c56a0[0x0];if(_0x1c56a0[0x1]&&_0x1c56a0[0x1][_0x29672e(0x1ad)]&&_0x1c56a0[0x1][_0x29672e(0x1ad)]['message'])_0x89b82c+='\x20-\x20'+_0x1c56a0[0x1][_0x29672e(0x1ad)][_0x29672e(0x155)];logging(_0x29672e(0x118)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x89b82c),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x23bcd3(0xc7)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x23bcd3(0x16a)]!=config['timeshift']&&updateTimeshift(settings[_0x23bcd3(0x16a)]);process[_0x23bcd3(0x148)]({'started':_0x23bcd3(0x181)},_0x2d3627=>{}),initializeProcessListeners();function proxyEmit(_0x104386,_0x13a1f6=null){const _0x2ebf9d=_0x23bcd3;process[_0x2ebf9d(0x148)]({'function':_0x104386,'args':_0x13a1f6},_0x3a424c=>{});}function initializeProcessListeners(){const _0x1a4b8e=_0x23bcd3;process['on'](_0x1a4b8e(0x155),_0x599a36=>{const _0x151007=_0x1a4b8e;switch(Object[_0x151007(0x162)](_0x599a36)[0x0]){case _0x151007(0x16a):_0x599a36[_0x151007(0x16a)]!=undefined&&(settings[_0x151007(0x16a)]=_0x599a36['timeshift'],updateTimeshift(settings[_0x151007(0x16a)]));break;case'function':switch(_0x599a36[_0x151007(0x15a)]){case _0x151007(0x178):initclient();break;case _0x151007(0x15b):emitHistory(_0x599a36[_0x151007(0x102)]);break;case _0x151007(0x1b8):getPortfolio(_0x599a36[_0x151007(0x102)]);break;case'storeConfiguration':storeConfiguration(_0x599a36[_0x151007(0x102)]);break;case _0x151007(0xe4):storeHeadless(_0x599a36[_0x151007(0x102)]);break;case _0x151007(0x1cb):getStartingBalances();break;case _0x151007(0x17d):placeOrder(_0x599a36[_0x151007(0x102)]);break;case _0x151007(0xfd):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x553f46=_0x23bcd3;if(pidBalances)clearTimeout(pidBalances);if(config[_0x553f46(0x1c9)]!=''){await initExchange(config[_0x553f46(0x1c9)],config[_0x553f46(0x161)]);let _0x34c285=await loadSymbols();_0x34c285&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3b0a22,_0x2b17f6){const _0x499ddd=_0x23bcd3,_0x748ae3=ccxt[config[_0x499ddd(0x171)]];let _0x111833;switch(config[_0x499ddd(0x171)]){case _0x499ddd(0x1b0):_0x111833='wss://stream.binance.com:9443';break;case'binanceus':_0x111833=_0x499ddd(0xe5);break;default:_0x111833=_0x499ddd(0xf0);}exchange=new _0x748ae3({'apiKey':_0x3b0a22,'secret':_0x2b17f6,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3b0a22,'api_secret':_0x2b17f6,'beautify':!![],'wsUrl':_0x111833},logger),config['exchange']==_0x499ddd(0x10b)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x499ddd(0xde)},'usd':{'coin':_0x499ddd(0xeb),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x2729b0=_0x23bcd3;let _0x5c4fd4;try{markets=await exchange[_0x2729b0(0x180)]();const _0x2bccef=[_0x2729b0(0x1be),'HOT/BTC','HOT/EUR'];allSymbols=exchange['symbols'][_0x2729b0(0x198)](_0x280e89=>{const _0xc03552=_0x2729b0;let _0x4dbe85=![];return _0x2bccef[_0xc03552(0xea)](_0x348566=>{const _0x33c18b=_0xc03552;if(_0x280e89[_0x33c18b(0x130)](_0x348566))_0x4dbe85=!![];}),!_0x4dbe85;}),_0x5c4fd4=!![];}catch(_0x249dda){await handleError(_0x249dda,_0x2729b0(0x1a9)),_0x5c4fd4=![];}return _0x5c4fd4;}async function initbot(){const _0x716f70=_0x23bcd3;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x36f73a=dbCoinResults[_0x716f70(0x169)](_0x716f70(0x105))[_0x716f70(0xee)]();if(_0x36f73a[_0x716f70(0x107)]==0x0)await resetCoinResults();}async function initclient(){const _0x38876c=_0x23bcd3;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x38876c(0x147),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3b3ba8=_0x23bcd3;wsinitialized=![];ws1&&(ws1[_0x3b3ba8(0xea)](_0x4bb468=>{const _0x49eb9f=_0x3b3ba8;try{wsClient[_0x49eb9f(0xd1)](_0x4bb468);}catch(_0x40f14b){}}),ws1=[]);if(ws2){try{wsClient[_0x3b3ba8(0xd1)](ws2);}catch(_0x1aa150){}ws2=null;}}async function initws(){const _0x3586a8=_0x23bcd3;cleanws();let _0x12b106=[];currentCoins[_0x3586a8(0xea)](_0x121644=>{const _0x4e3a59=_0x3586a8;if(_0x121644[_0x4e3a59(0x197)]!=config[_0x4e3a59(0xf3)])_0x12b106[_0x4e3a59(0x193)](noslash(_0x121644[_0x4e3a59(0x10d)]));});if(!_0x12b106[_0x3586a8(0x130)](stablecoins[_0x3586a8(0xd5)][_0x3586a8(0x197)]))_0x12b106['push'](stablecoins['eur']['coin']);if(!_0x12b106[_0x3586a8(0x130)](stablecoins[_0x3586a8(0xe3)]['coin']))_0x12b106[_0x3586a8(0x193)](stablecoins['usd'][_0x3586a8(0x197)]);if(!_0x12b106[_0x3586a8(0x130)]('BNB'+config[_0x3586a8(0xf3)]))_0x12b106['push'](_0x3586a8(0x135)+config['basecoin']);try{_0x12b106['forEach']((_0x2a914c,_0x55ac24)=>{const _0x4749a9=_0x3586a8;ws1[_0x55ac24]=wsClient[_0x4749a9(0x10a)](_0x2a914c,'1m');}),ws2=wsClient[_0x3586a8(0xf7)](),wsClient['on']('formattedMessage',_0x48f0b3=>{const _0x105a04=_0x3586a8;if(!Array[_0x105a04(0x111)](_0x48f0b3)&&!_0x48f0b3[_0x105a04(0x174)]['includes'](_0x105a04(0x18e))){if(_0x48f0b3[_0x105a04(0x138)]===_0x105a04(0x1ca)){global[_0x105a04(0xf4)][_0x48f0b3['kline']['symbol']]=_0x48f0b3[_0x105a04(0x1ca)][_0x105a04(0x19b)];return;}}else{if(!Array['isArray'](_0x48f0b3)&&_0x48f0b3[_0x105a04(0x174)][_0x105a04(0x130)](_0x105a04(0x18e))){if(_0x48f0b3[_0x105a04(0x126)][_0x105a04(0x130)](_0x105a04(0x179))){updateNumberCoins(_0x48f0b3);return;}}}}),wsClient['on'](_0x3586a8(0x17b),async _0x21c902=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x485479){await handleError(_0x485479,_0x3586a8(0xf5));}let _0x3fe4c4,_0x41bab4=0x0;loading[_0x3586a8(0x18a)]=[];let _0x4c5b9b=0x0;currentCoins[_0x3586a8(0xea)](_0x3cbdfb=>{const _0x4a42b3=_0x3586a8;if(_0x3cbdfb[_0x4a42b3(0x197)]!=config['basecoin'])loading[_0x4a42b3(0x18a)]['push'](_0x3cbdfb[_0x4a42b3(0x10d)]);}),loadingCanceled=![];while(_0x3fe4c4!=currentCoins[_0x3586a8(0x107)]-0x1){_0x3fe4c4=0x0,currentCoins[_0x3586a8(0xea)](_0x52620d=>{const _0xeee0de=_0x3586a8;_0x52620d['coin']!=config[_0xeee0de(0xf3)]&&global[_0xeee0de(0xf4)][noslash(_0x52620d[_0xeee0de(0x10d)])]&&(loading[_0xeee0de(0x18a)]=loading['remainingSymbols']['filter'](_0x10ca5e=>_0x10ca5e!=_0x52620d[_0xeee0de(0x10d)]),_0x3fe4c4++);}),loading[_0x3586a8(0x1b7)]=Math[_0x3586a8(0x194)](_0x3fe4c4/(currentCoins['length']-0x1)*0x64);_0x4c5b9b>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3fe4c4!=_0x41bab4&&(_0x41bab4=_0x3fe4c4,emitLoadingProgress()),_0x4c5b9b++,await sleep(0xc8);}if(_0x3fe4c4==currentCoins[_0x3586a8(0x107)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x27753a=_0x23bcd3;proxyEmit(_0x27753a(0x12b),loading);}async function getFiat(){const _0x4f88d4=_0x23bcd3;let _0x495d3e=0x0,_0x2cf5ce=0x0;try{_0x495d3e=global[_0x4f88d4(0xf4)][stablecoins[_0x4f88d4(0xd5)][_0x4f88d4(0x197)]],_0x2cf5ce=global[_0x4f88d4(0xf4)][stablecoins[_0x4f88d4(0xe3)]['coin']];}catch(_0x1c9cbe){await handleError(_0x1c9cbe,_0x4f88d4(0x163));}return{'eur':Number(_0x495d3e),'usd':Number(_0x2cf5ce)};}async function setStartDatePerformance(_0x1918a1){const _0x4f0e9f=_0x23bcd3,_0x33d7c7=fns[_0x4f0e9f(0x12e)](new Date(_0x1918a1[_0x4f0e9f(0x12a)]),_0x4f0e9f(0x19f));let _0x5a404c=[];_0x5a404c[stablecoins[_0x4f0e9f(0xd5)][_0x4f0e9f(0x197)]]=await getCloses(stablecoins[_0x4f0e9f(0xd5)][_0x4f0e9f(0x10d)],new Date(_0x1918a1[_0x4f0e9f(0x12a)]),0x1),_0x5a404c[stablecoins[_0x4f0e9f(0xe3)][_0x4f0e9f(0x197)]]=await getCloses(stablecoins[_0x4f0e9f(0xe3)][_0x4f0e9f(0x10d)],new Date(_0x1918a1[_0x4f0e9f(0x12a)]),0x1);let _0x31e823,_0xe9ef72=[];_0x1918a1['portfolio']['forEach'](_0x42eb7b=>{const _0x1f75a5=_0x4f0e9f;!_0x42eb7b[_0x1f75a5(0x133)]&&_0xe9ef72['push']({'coin':_0x42eb7b[_0x1f75a5(0x197)],'number':_0x42eb7b['startnumber'],'price':_0x42eb7b[_0x1f75a5(0x172)]});}),_0x31e823={'date':_0x33d7c7,'eur':_0x5a404c[stablecoins[_0x4f0e9f(0xd5)][_0x4f0e9f(0x197)]][0x0],'usd':_0x5a404c[stablecoins[_0x4f0e9f(0xe3)][_0x4f0e9f(0x197)]][0x0],'coins':_0xe9ef72};let _0x3fcb8d=dbPerformance[_0x4f0e9f(0x169)]('data')[_0x4f0e9f(0xf1)]({'date':_0x33d7c7})['value']();_0x3fcb8d?dbPerformance[_0x4f0e9f(0x169)]('data')['find']({'date':_0x33d7c7})[_0x4f0e9f(0x153)](_0x31e823)[_0x4f0e9f(0x157)]():dbPerformance[_0x4f0e9f(0x169)](_0x4f0e9f(0x11d))[_0x4f0e9f(0x193)](_0x31e823)[_0x4f0e9f(0x157)](),_0x3fcb8d=dbPerformance[_0x4f0e9f(0x169)]('data')[_0x4f0e9f(0x1c1)]('date')[_0x4f0e9f(0xee)](),_0x3fcb8d[_0x4f0e9f(0xea)](_0x2cb2e9=>{const _0x5cc7d0=_0x4f0e9f;_0x2cb2e9[_0x5cc7d0(0x195)]<_0x33d7c7&&dbPerformance['get'](_0x5cc7d0(0x11d))[_0x5cc7d0(0xd8)]({'date':_0x2cb2e9[_0x5cc7d0(0x195)]})[_0x5cc7d0(0x157)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4fab9d){const _0x37f3a2=_0x23bcd3;let _0xac524d,_0x5e846f=[];logHistory(_0x37f3a2(0x16c),_0x37f3a2(0x1a3)),_0x4fab9d[_0x37f3a2(0xed)][_0x37f3a2(0xea)](_0x46cb67=>{const _0x13f7e8=_0x37f3a2;if(_0x46cb67[_0x13f7e8(0x197)]!=config[_0x13f7e8(0xf3)]&&!_0x46cb67[_0x13f7e8(0x133)])_0x5e846f[_0x13f7e8(0x193)]({'coin':_0x46cb67['coin'],'symbol':_0x46cb67['symbol']});});let _0x275cd0=[];try{const _0x31e422=fns['format'](fns['parseISO'](_0x4fab9d[_0x37f3a2(0x12a)]['replace'](/\//g,'-')),_0x37f3a2(0x120));for(const _0x457a2f of _0x5e846f){if(_0x457a2f[_0x37f3a2(0x197)]!=config[_0x37f3a2(0xf3)])_0xac524d=await exchange['fetchOrders'](_0x457a2f[_0x37f3a2(0x10d)],Date[_0x37f3a2(0x10f)](_0x31e422));_0xac524d[_0x37f3a2(0xea)](_0x16c669=>{const _0x2b7cd0=_0x37f3a2,_0x3a0271=_0x457a2f[_0x2b7cd0(0x10d)][_0x2b7cd0(0x130)](config[_0x2b7cd0(0xf3)]+'/'),_0x1e232c=fns[_0x2b7cd0(0x12e)](fns[_0x2b7cd0(0x16e)](_0x16c669[_0x2b7cd0(0x186)]),_0x2b7cd0(0x11a)),_0x343c3e=fns[_0x2b7cd0(0x12e)](fns['parseISO'](_0x16c669['datetime']),_0x2b7cd0(0x19f));let _0x432cf6;if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0x168)&&_0x3a0271==![])_0x432cf6=_0x16c669[_0x2b7cd0(0x11c)];if(_0x16c669[_0x2b7cd0(0x170)]=='buy'&&_0x3a0271==!![])_0x432cf6=-_0x16c669['amount']*_0x16c669[_0x2b7cd0(0x10e)];if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0xca)&&_0x3a0271==![])_0x432cf6=-_0x16c669['amount'];if(_0x16c669['side']=='sell'&&_0x3a0271==!![])_0x432cf6=_0x16c669[_0x2b7cd0(0x11c)]*_0x16c669[_0x2b7cd0(0x10e)];_0x275cd0[_0x2b7cd0(0x193)]({'timestamp':_0x1e232c,'date':_0x343c3e,'coin':_0x457a2f[_0x2b7cd0(0x197)],'symbol':_0x457a2f[_0x2b7cd0(0x10d)],'type':_0x16c669[_0x2b7cd0(0x190)],'side':_0x16c669['side'],'reverse':_0x3a0271,'amount':formatResult(_0x16c669[_0x2b7cd0(0xda)],0x8),'filled':formatResult(_0x16c669[_0x2b7cd0(0xda)],0x8),'coinamount':formatResult(_0x432cf6,0x8),'price':formatResult(_0x16c669['price'],0x8)});let _0x2f815f;if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0x168)&&_0x3a0271==![])_0x2f815f=-_0x16c669[_0x2b7cd0(0x11c)]*_0x16c669[_0x2b7cd0(0x10e)];if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0x168)&&_0x3a0271==!![])_0x2f815f=_0x16c669[_0x2b7cd0(0x11c)];if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0xca)&&_0x3a0271==![])_0x2f815f=_0x16c669[_0x2b7cd0(0x11c)]*_0x16c669[_0x2b7cd0(0x10e)];if(_0x16c669[_0x2b7cd0(0x170)]==_0x2b7cd0(0xca)&&_0x3a0271==!![])_0x2f815f=-_0x16c669[_0x2b7cd0(0x11c)];_0x275cd0['push']({'date':_0x343c3e,'coin':config['basecoin'],'coinamount':formatResult(_0x2f815f,0x8)});});}_0x275cd0['sort']((_0x43f9cd,_0x1058ba)=>_0x43f9cd['timestamp']>_0x1058ba[_0x37f3a2(0x17c)]?0x1:_0x1058ba['timestamp']>_0x43f9cd[_0x37f3a2(0x17c)]?-0x1:0x0),dbLogs[_0x37f3a2(0x169)](_0x37f3a2(0x1c0))[_0x37f3a2(0xd8)]()['write'](),_0x275cd0['forEach'](_0x2c00c7=>{const _0x4b47e0=_0x37f3a2;let _0x1775d8;_0x2c00c7[_0x4b47e0(0x197)]!=config[_0x4b47e0(0xf3)]&&(_0x1775d8={'time':_0x2c00c7['timestamp'],'type':'order','event':_0x4b47e0(0xe2)+_0x2c00c7[_0x4b47e0(0x10d)]+'\x20'+_0x2c00c7[_0x4b47e0(0x170)]+'\x20#'+_0x2c00c7['amount']+'\x20@'+_0x2c00c7[_0x4b47e0(0x10e)]},dbLogs[_0x4b47e0(0x169)](_0x4b47e0(0x1c0))[_0x4b47e0(0x193)](_0x1775d8)['write']());});const _0x5cb31f=fns[_0x37f3a2(0x165)]({'start':new Date(_0x4fab9d[_0x37f3a2(0x12a)]),'end':new Date()})[_0x37f3a2(0x150)](_0x474c21=>fns['format'](_0x474c21,_0x37f3a2(0x19f)));let _0x491ac1=[];_0x4fab9d[_0x37f3a2(0xed)]['forEach'](_0x199715=>{const _0x2dd912=_0x37f3a2;if(!_0x199715[_0x2dd912(0x133)]){_0x491ac1[_0x199715[_0x2dd912(0x197)]]=[];let _0x45d318=_0x199715[_0x2dd912(0x1b1)];_0x5cb31f[_0x2dd912(0xea)]((_0x514533,_0x4a4f00)=>{const _0x30ab0f=_0x2dd912;let _0x2767dd=_0x275cd0[_0x30ab0f(0x198)](_0x55076a=>_0x55076a['coin']==_0x199715[_0x30ab0f(0x197)]&&_0x55076a[_0x30ab0f(0x195)]==_0x514533);if(_0x2767dd[_0x30ab0f(0x107)]!=0x0){let _0x2fe899=_0x2767dd['reduce']((_0x3af983,_0x5ba13e)=>{const _0x3fc00b=_0x30ab0f;return _0x3af983+=_0x5ba13e[_0x3fc00b(0x184)],_0x3af983;},0x0);_0x45d318+=_0x2fe899;}_0x491ac1[_0x199715[_0x30ab0f(0x197)]][_0x514533]=_0x45d318;});}});const _0x31e206=[..._0x5e846f];_0x31e206['push']({'coin':stablecoins[_0x37f3a2(0xd5)][_0x37f3a2(0x197)],'symbol':stablecoins[_0x37f3a2(0xd5)][_0x37f3a2(0x10d)]}),_0x31e206[_0x37f3a2(0x193)]({'coin':stablecoins[_0x37f3a2(0xe3)]['coin'],'symbol':stablecoins[_0x37f3a2(0xe3)][_0x37f3a2(0x10d)]});let _0x23080f=[];for(const _0x5348bc of _0x31e206){_0x23080f[_0x5348bc['coin']]=await getCloses(_0x5348bc[_0x37f3a2(0x10d)],new Date(_0x4fab9d[_0x37f3a2(0x12a)]));}dbPerformance['get']('data')[_0x37f3a2(0xd8)]()['write'](),_0x5cb31f[_0x37f3a2(0xea)]((_0x506c19,_0x24b31e)=>{const _0x302852=_0x37f3a2;let _0x30d254,_0x2ccea2=[];_0x24b31e==0x0?(_0x4fab9d[_0x302852(0xed)][_0x302852(0xea)](_0x3edc0e=>{const _0x3a3f5a=_0x302852;!_0x3edc0e[_0x3a3f5a(0x133)]&&_0x2ccea2[_0x3a3f5a(0x193)]({'coin':_0x3edc0e[_0x3a3f5a(0x197)],'number':_0x3edc0e['startnumber'],'price':_0x3edc0e[_0x3a3f5a(0x172)]});}),_0x30d254={'date':_0x506c19,'eur':_0x23080f[stablecoins[_0x302852(0xd5)][_0x302852(0x197)]][_0x24b31e],'usd':_0x23080f[stablecoins[_0x302852(0xe3)][_0x302852(0x197)]][_0x24b31e],'coins':_0x2ccea2}):(_0x4fab9d[_0x302852(0xed)][_0x302852(0xea)](_0x51d58b=>{const _0x7a8803=_0x302852;!_0x51d58b[_0x7a8803(0x133)]&&_0x2ccea2[_0x7a8803(0x193)]({'coin':_0x51d58b[_0x7a8803(0x197)],'number':_0x491ac1[_0x51d58b[_0x7a8803(0x197)]][_0x506c19],'price':_0x51d58b['coin']==config[_0x7a8803(0xf3)]?0x1:_0x23080f[_0x51d58b[_0x7a8803(0x197)]][_0x24b31e]});}),_0x30d254={'date':_0x506c19,'eur':_0x23080f[stablecoins[_0x302852(0xd5)][_0x302852(0x197)]][_0x24b31e],'usd':_0x23080f[stablecoins[_0x302852(0xe3)][_0x302852(0x197)]][_0x24b31e],'coins':_0x2ccea2}),dbPerformance[_0x302852(0x169)](_0x302852(0x11d))[_0x302852(0x193)](_0x30d254)[_0x302852(0x157)]();}),emitPerformance(),await resetCoinResults();for(let _0x195bb4 of _0x275cd0){_0x195bb4[_0x37f3a2(0x197)]!=config[_0x37f3a2(0xf3)]&&await updateCoinResults(_0x195bb4);}logHistory(_0x37f3a2(0x16c),_0x37f3a2(0x1c3));}catch(_0x4f534f){await handleError(_0x4f534f,'recreateHistory()');}}async function getCloses(_0xe5ac61,_0x2564e7,_0x1ddc25=undefined){const _0x299092=_0x23bcd3,_0x4e9925='1d';let _0x3f0bc0,_0x2305b2;const _0x5aba87=fns[_0x299092(0x113)](new Date(),_0x2564e7)+0x1;try{const _0x3fc52c=exchange[_0x299092(0x1a1)]()-_0x5aba87*0x18*0xe10*0x3e8;_0x3f0bc0=await exchange['fetchOHLCV'](_0xe5ac61,_0x4e9925,_0x3fc52c,_0x1ddc25),_0x2305b2=await exchange[_0x299092(0x16d)](_0xe5ac61);}catch(_0x1d1f0e){await handleError(_0x1d1f0e,_0x299092(0xc4));}let _0x271b4d=ohlcvToCloses(_0x3f0bc0);return _0x271b4d[_0x299092(0x193)](_0x2305b2[_0xe5ac61]['last']),_0x271b4d;}function ohlcvToCloses(_0x24a78d){const _0x6eced3=_0x23bcd3;let _0x1ae03d=[];return _0x24a78d[_0x6eced3(0xea)](function(_0x15237f){_0x1ae03d['push'](_0x15237f[0x4]);}),_0x1ae03d;}function getConfiguration(_0x406352){const _0x27c5a1=_0x23bcd3;let _0xfba8f=dbConfig['get'](_0x27c5a1(0x173))[_0x27c5a1(0xf1)]({'botID':_0x406352})['value']();if(_0xfba8f){let _0x4dab10=![];!_0xfba8f[_0x27c5a1(0x171)]&&(_0xfba8f={..._0xfba8f,'exchange':_0x27c5a1(0x1b0)},_0x4dab10=!![]),!_0xfba8f[_0x27c5a1(0xf3)]&&(_0xfba8f={..._0xfba8f,'basecoin':_0x27c5a1(0x12f)},_0x4dab10=!![]),!_0xfba8f[_0x27c5a1(0x1c7)]&&(_0xfba8f={..._0xfba8f,'ordertype':_0x27c5a1(0x1ae)},_0x4dab10=!![]),!_0xfba8f[_0x27c5a1(0xce)]&&(_0xfba8f={..._0xfba8f,'timeout':0x14},_0x4dab10=!![]),!_0xfba8f['emojibuy']&&(_0xfba8f={..._0xfba8f,'emojibuy':''},_0x4dab10=!![]),!_0xfba8f[_0x27c5a1(0x1b9)]&&(_0xfba8f={..._0xfba8f,'emojisell':''},_0x4dab10=!![]),!_0xfba8f[_0x27c5a1(0x19e)]&&(_0xfba8f={..._0xfba8f,'showname':![]},_0x4dab10=!![]),_0x4dab10&&(_0xfba8f={'botID':_0xfba8f[_0x27c5a1(0xfc)],'exchange':_0xfba8f['exchange'],'apiKey':_0xfba8f[_0x27c5a1(0x1c9)],'apiSecret':_0xfba8f['apiSecret'],'basecoin':_0xfba8f[_0x27c5a1(0xf3)],'botname':_0xfba8f[_0x27c5a1(0x1ba)],'showname':_0xfba8f[_0x27c5a1(0x19e)],'threshold':_0xfba8f[_0x27c5a1(0xef)],'ordertype':_0xfba8f[_0x27c5a1(0x1c7)],'timeout':_0xfba8f[_0x27c5a1(0xce)],'startdate':_0xfba8f['startdate'],'recreate':_0xfba8f[_0x27c5a1(0xe9)],'timeshift':_0xfba8f[_0x27c5a1(0x16a)],'headless':_0xfba8f[_0x27c5a1(0xfa)],'cooldown':_0xfba8f[_0x27c5a1(0x112)],'emojibuy':_0xfba8f['emojibuy'],'emojisell':_0xfba8f[_0x27c5a1(0x1b9)],'portfolio':_0xfba8f[_0x27c5a1(0xed)]},dbConfig[_0x27c5a1(0x169)](_0x27c5a1(0x173))[_0x27c5a1(0xd8)]()[_0x27c5a1(0x157)](),dbConfig[_0x27c5a1(0x169)](_0x27c5a1(0x173))[_0x27c5a1(0x193)](_0xfba8f)[_0x27c5a1(0x157)]());}else _0xfba8f={'botID':_0x406352,'exchange':_0x27c5a1(0x1b0),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x27c5a1(0xc8)+_0x406352,'showname':![],'threshold':'3','ordertype':_0x27c5a1(0x1ae),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x27c5a1(0x16a)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0xfba8f;}function emittedConfiguration(){const _0x47f313=_0x23bcd3;let _0x1465e0;return config[_0x47f313(0x1c9)]==''?_0x1465e0=config:_0x1465e0={...config,'apiKey':_0x47f313(0x152),'apiSecret':_0x47f313(0x152)},_0x1465e0;}function getSettings(){const _0x1fe36f=_0x23bcd3;return dbSettings['get'](_0x1fe36f(0xe7))[_0x1fe36f(0xee)]();}function getSecure(){const _0x178552=_0x23bcd3;return dbSecure['get']('secure')[_0x178552(0xee)]()||{};}function updateTimeshift(_0x1a9da8){const _0x1cc7e7=_0x23bcd3;let _0x2f642e=dbConfig['get'](_0x1cc7e7(0x173))[_0x1cc7e7(0xf1)]({'botID':botID})[_0x1cc7e7(0xee)]();_0x2f642e&&dbConfig[_0x1cc7e7(0x169)](_0x1cc7e7(0x173))[_0x1cc7e7(0xf1)]({'botID':botID})[_0x1cc7e7(0x153)]({'timeshift':_0x1a9da8})[_0x1cc7e7(0x157)](),config['timeshift']=_0x1a9da8,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2988ea){const _0x3d2a2e=_0x23bcd3;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x15067e=dbConfig[_0x3d2a2e(0x169)](_0x3d2a2e(0x173))[_0x3d2a2e(0xf1)]({'botID':botID})[_0x3d2a2e(0xee)]();_0x2988ea={..._0x2988ea,'apiKey':crypt[_0x3d2a2e(0x119)](secure[_0x3d2a2e(0x103)],_0x2988ea[_0x3d2a2e(0x1c9)])[_0x3d2a2e(0x155)],'apiSecret':crypt[_0x3d2a2e(0x119)](secure[_0x3d2a2e(0x103)],_0x2988ea[_0x3d2a2e(0x161)])[_0x3d2a2e(0x155)]};if(_0x15067e){if(_0x2988ea['apiKey']==_0x3d2a2e(0x152))_0x2988ea[_0x3d2a2e(0x1c9)]=config[_0x3d2a2e(0x1c9)];if(_0x2988ea[_0x3d2a2e(0x161)]==_0x3d2a2e(0x152))_0x2988ea[_0x3d2a2e(0x161)]=config[_0x3d2a2e(0x161)];dbConfig[_0x3d2a2e(0x169)](_0x3d2a2e(0x173))['find']({'botID':botID})[_0x3d2a2e(0x153)](_0x2988ea)['write']();}else dbConfig[_0x3d2a2e(0x169)]('bot')[_0x3d2a2e(0x193)](_0x2988ea)[_0x3d2a2e(0x157)](),process['send']({'status':_0x3d2a2e(0xd9),'live':_0x3d2a2e(0x181)},_0x653ea0=>{});config={..._0x2988ea};if(config[_0x3d2a2e(0xe9)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x3d2a2e(0x148)]({'botname':_0x2988ea[_0x3d2a2e(0x1ba)]},_0x3fcf49=>{}),proxyEmit(_0x3d2a2e(0x145)),reset();}async function storeHeadless(_0x556d43){const _0x112453=_0x23bcd3,_0x45eaaa={...config,'headless':_0x556d43[_0x112453(0xfa)]};let _0x3bb7a0=dbConfig[_0x112453(0x169)]('bot')[_0x112453(0xf1)]({'botID':botID})[_0x112453(0xee)]();_0x3bb7a0&&dbConfig[_0x112453(0x169)](_0x112453(0x173))[_0x112453(0xf1)]({'botID':botID})[_0x112453(0x153)](_0x45eaaa)['write'](),config={..._0x45eaaa},proxyEmit('configuration',emittedConfiguration());}function noslash(_0xff5cd7){const _0x3486da=_0x23bcd3;return _0xff5cd7[_0x3486da(0x1b4)]('/','');}function updateNumberCoins(_0x9aaebd){const _0x5687f2=_0x23bcd3;_0x9aaebd[_0x5687f2(0x138)]&&_0x9aaebd[_0x5687f2(0x138)]==_0x5687f2(0x17e)&&_0x9aaebd[_0x5687f2(0x147)]['forEach'](_0x29d85e=>{const _0x5a7ccf=_0x5687f2;let _0x31799a=currentCoins[_0x5a7ccf(0xf1)](_0x415161=>_0x415161[_0x5a7ccf(0x197)]==_0x29d85e['asset']),_0x38392c=config[_0x5a7ccf(0xed)][_0x5a7ccf(0xf1)](_0x56be3a=>_0x56be3a[_0x5a7ccf(0x197)]==_0x29d85e[_0x5a7ccf(0x16b)]);if(_0x31799a&&_0x38392c)_0x31799a['number']=Math[_0x5a7ccf(0xdb)](Number(_0x29d85e[_0x5a7ccf(0x18f)])+(_0x38392c[_0x5a7ccf(0x1bb)]||0x0),0x0);});if(_0x9aaebd[_0x5687f2(0x138)]&&_0x9aaebd[_0x5687f2(0x138)]=='executionReport'){if(_0x9aaebd[_0x5687f2(0x1bd)]==_0x5687f2(0xff)&&_0x9aaebd[_0x5687f2(0xc0)]==_0x5687f2(0x134)){if(lastOrders)lastOrders[_0x5687f2(0xea)](_0x5632ec=>{const _0x34b904=_0x5687f2;if(_0x5632ec[_0x34b904(0x114)]==_0x9aaebd[_0x34b904(0x114)]){if(_0x5632ec[_0x34b904(0x1bc)])_0x5632ec[_0x34b904(0xda)]=_0x9aaebd['accumulatedQuantity']*_0x5632ec[_0x34b904(0x10e)];else _0x5632ec[_0x34b904(0xda)]=_0x9aaebd['accumulatedQuantity'];}});}}}async function getCoins(_0x251dc8=!![],_0x593eec=config[_0x23bcd3(0xf3)]){const _0x488f75=_0x23bcd3;let _0x1b70f8,_0x237b15=[],_0x4edbce=[],_0x3eb048=[];try{_0x1b70f8=await exchange[_0x488f75(0x11b)](),mybalances=_0x1b70f8[_0x488f75(0x187)];if(!_0x251dc8)for(const [_0x3c0479,_0x280beb]of Object[_0x488f75(0x115)](mybalances)){_0x3eb048[_0x488f75(0x193)](_0x3c0479);}else config[_0x488f75(0xed)][_0x488f75(0xea)](_0x5a0067=>{const _0x347e73=_0x488f75;if(!_0x5a0067[_0x347e73(0x133)])_0x3eb048[_0x347e73(0x193)](_0x5a0067[_0x347e73(0x197)]);});if(_0x593eec=='')for(const [_0x39e872,_0x1570cb]of Object[_0x488f75(0x115)](mybalances)){_0x1570cb[_0x488f75(0x164)]()!=0x0&&_0x4edbce['push']({'coin':_0x39e872});}else for(const [_0x2ad74b,_0x376996]of Object['entries'](mybalances)){if(_0x3eb048[_0x488f75(0x130)](_0x2ad74b)){const _0x33b8a4=config['portfolio'][_0x488f75(0xf1)](_0x1c123f=>_0x1c123f[_0x488f75(0x197)]==_0x2ad74b);if((_0x376996['toString']()!=0x0||_0x33b8a4)&&(allSymbols[_0x488f75(0x130)](_0x2ad74b+'/'+_0x593eec)||_0x2ad74b==_0x593eec))_0x4edbce['push']({'coin':_0x2ad74b,'symbol':_0x2ad74b+'/'+_0x593eec,'reverse':![],'number':Math[_0x488f75(0xdb)](_0x376996+(_0x33b8a4&&_0x33b8a4[_0x488f75(0x1bb)]||0x0),0x0)}),_0x2ad74b!=_0x593eec&&_0x237b15[_0x488f75(0x193)](_0x2ad74b+'/'+_0x593eec);else(_0x376996['toString']()!=0x0||_0x33b8a4)&&allSymbols['includes'](_0x593eec+'/'+_0x2ad74b)&&(_0x4edbce[_0x488f75(0x193)]({'coin':_0x2ad74b,'symbol':_0x593eec+'/'+_0x2ad74b,'reverse':!![],'number':Math[_0x488f75(0xdb)](_0x376996+(_0x33b8a4&&_0x33b8a4[_0x488f75(0x1bb)]||0x0),0x0)}),_0x2ad74b!=_0x593eec&&_0x237b15[_0x488f75(0x193)](_0x593eec+'/'+_0x2ad74b));}}}catch(_0x369e99){if(!_0x251dc8){if(_0x369e99[_0x488f75(0x164)]()[_0x488f75(0x130)](_0x488f75(0xc2)))return logHistory(_0x488f75(0x1ad),_0x488f75(0x123)),![];else{if(_0x369e99['toString']()[_0x488f75(0x130)](_0x488f75(0x142)))return logHistory('error',_0x488f75(0x188)),![];else{if(_0x369e99[_0x488f75(0x164)]()['includes'](_0x488f75(0x108)))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x369e99,_0x488f75(0xdd));}}}else await handleError(_0x369e99,_0x488f75(0xdd));}return _0x4edbce;}async function getPortfolio(_0x39b58c){const _0x3da465=_0x23bcd3;let _0xffbc33=[],_0x54a8fe=[],_0x5c3ace,_0x230daa=[],_0x305c2a,_0x155afa;_0x39b58c[_0x3da465(0x1c9)]==='************'||_0x39b58c[_0x3da465(0x161)]===_0x3da465(0x152)?(_0x305c2a=config[_0x3da465(0x1c9)],_0x155afa=config[_0x3da465(0x161)]):(_0x305c2a=_0x39b58c[_0x3da465(0x1c9)],_0x155afa=_0x39b58c[_0x3da465(0x161)]);await initExchange(_0x305c2a,_0x155afa);let _0x4e55a7=await loadSymbols();if(_0x4e55a7){_0x230daa=await getCoins(![],_0x39b58c['basecoin']);if(_0x230daa===![])proxyEmit(_0x3da465(0xed),![]);else{if(_0x39b58c[_0x3da465(0xf3)]=='')proxyEmit(_0x3da465(0xed),_0x230daa);else{_0x230daa[_0x3da465(0xea)](_0xa75c44=>{const _0xf79c81=_0x3da465;_0xffbc33[_0xf79c81(0x193)](_0xa75c44['symbol']);});try{_0x54a8fe=await exchange[_0x3da465(0x16d)](_0xffbc33);}catch(_0x3cacc1){await handleError(_0x3cacc1,_0x3da465(0xe1));}_0x230daa[_0x3da465(0xea)](_0x435e5f=>{const _0x203580=_0x3da465;_0x435e5f[_0x203580(0x197)]!=_0x39b58c[_0x203580(0xf3)]?_0x5c3ace=_0x435e5f['reverse']?0x1/_0x54a8fe[_0x435e5f[_0x203580(0x10d)]]['last']:_0x54a8fe[_0x435e5f['symbol']]['last']:_0x5c3ace=0x1,_0x435e5f[_0x203580(0x10e)]=formatResult(_0x5c3ace,0x8);}),proxyEmit(_0x3da465(0xed),_0x230daa);}}}else proxyEmit(_0x3da465(0xed),![]);}function checkMinimums(_0x183c91){const _0xb71cec=_0x23bcd3;let _0x583468=!![];const _0x40c26e=!_0x183c91['reverse']?markets[_0x183c91['symbol']][_0xb71cec(0x19c)][_0xb71cec(0x11c)]['min']:markets[_0x183c91['symbol']][_0xb71cec(0x19c)]['cost']['min'],_0x3932b1=!_0x183c91[_0xb71cec(0x1bc)]?markets[_0x183c91[_0xb71cec(0x10d)]][_0xb71cec(0x19c)][_0xb71cec(0x11f)][_0xb71cec(0x14d)]:markets[_0x183c91['symbol']][_0xb71cec(0x19c)][_0xb71cec(0x11c)][_0xb71cec(0x14d)];if(Math[_0xb71cec(0x1a0)](_0x183c91['trade'])<_0x40c26e)_0x583468=![];if(Math[_0xb71cec(0x1a0)](_0x183c91[_0xb71cec(0xd3)])*_0x183c91[_0xb71cec(0xc9)]<_0x3932b1)_0x583468=![];return _0x583468;}async function getBalances(){const _0x1cd66a=_0x23bcd3;let _0x59998a=0x0,_0x1af0fa;const _0xe1c958=config[_0x1cd66a(0xef)];currentCoins['forEach'](_0x212a60=>{const _0x56a700=_0x1cd66a;if(_0x212a60[_0x56a700(0x197)]!=config[_0x56a700(0xf3)]){let _0x1632a5=global[_0x56a700(0xf4)][noslash(_0x212a60[_0x56a700(0x10d)])];_0x1af0fa=_0x212a60[_0x56a700(0x1bc)]?0x1/_0x1632a5:_0x1632a5;}else _0x1af0fa=0x1;let _0x348c56=_0x212a60[_0x56a700(0xcf)]*_0x1af0fa;_0x59998a+=_0x348c56,_0x212a60['last']=formatResult(Number(_0x1af0fa),0x8),_0x212a60['value']=_0x348c56;}),currentCoins['forEach'](_0x8fba22=>{const _0x58cc0b=_0x1cd66a;let _0x5b6bac=config[_0x58cc0b(0xed)]['find'](_0x27aea7=>_0x27aea7['coin']==_0x8fba22[_0x58cc0b(0x197)]),_0x3744a2=Number(_0x5b6bac[_0x58cc0b(0x183)]),_0x249246=_0x8fba22['value']/_0x59998a*0x64,_0x4f3641=_0x3744a2*_0x59998a/0x64/_0x8fba22['last']-_0x8fba22[_0x58cc0b(0xcf)];_0x8fba22[_0x58cc0b(0x183)]=formatResult(_0x249246,0x3),_0x8fba22[_0x58cc0b(0x10c)]=formatResult(_0x3744a2,0x3),_0x8fba22[_0x58cc0b(0xd3)]=formatResult(_0x4f3641,0x8),_0x8fba22[_0x58cc0b(0x170)]='',_0x8fba22[_0x58cc0b(0xf8)]='';if(_0x8fba22['coin']!=config['basecoin']){if(_0x8fba22[_0x58cc0b(0x183)]>_0x3744a2)_0x8fba22[_0x58cc0b(0x170)]=_0x58cc0b(0xca),_0x8fba22[_0x58cc0b(0xf8)]=checkMinimums(_0x8fba22);else _0x8fba22['distribution']<_0x3744a2&&(_0x8fba22[_0x58cc0b(0x170)]=_0x58cc0b(0x168),_0x8fba22[_0x58cc0b(0xf8)]=checkMinimums(_0x8fba22));}_0x8fba22['delta']=_0x8fba22[_0x58cc0b(0x183)]/_0x8fba22[_0x58cc0b(0x10c)]-0x1;}),currentCoins[_0x1cd66a(0x167)]((_0x49a140,_0x3eb7f4)=>_0x49a140['delta']<_0x3eb7f4[_0x1cd66a(0xcb)]?0x1:_0x3eb7f4[_0x1cd66a(0xcb)]<_0x49a140['delta']?-0x1:0x0);const _0xd40469=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xd40469['eur'],'usd':_0xd40469['usd'],'portfolio':JSON[_0x1cd66a(0x1a2)](currentCoins),'threshold':_0xe1c958},proxyEmit(_0x1cd66a(0x147),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xe1c958});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x34853d=_0x23bcd3;if(!lastBalances)return;let _0x2e229a=await getStartingBalances(![]),_0x1768c8=[],_0x3b4403;JSON[_0x34853d(0x10f)](lastBalances['portfolio'])[_0x34853d(0xea)](_0xbeae04=>{const _0x2a4fcc=_0x34853d;let _0x4941b4={'coin':_0xbeae04[_0x2a4fcc(0x197)],'number':_0xbeae04['number'],'price':_0xbeae04[_0x2a4fcc(0xc9)]};_0x1768c8[_0x2a4fcc(0x193)](_0x4941b4);});const _0x396a6b=await getFiat();_0x3b4403={'date':lastBalances['time'][_0x34853d(0x15f)]('\x20')[0x0],'eur':_0x396a6b['eur'],'usd':_0x396a6b[_0x34853d(0xe3)],'coins':_0x1768c8};let _0x1eec0b=dbPerformance[_0x34853d(0x169)](_0x34853d(0x11d))[_0x34853d(0xf1)]({'date':_0x3b4403[_0x34853d(0x195)]})[_0x34853d(0xee)]();_0x1eec0b?dbPerformance[_0x34853d(0x169)](_0x34853d(0x11d))['find']({'date':_0x3b4403[_0x34853d(0x195)]})['assign'](_0x3b4403)[_0x34853d(0x157)]():dbPerformance[_0x34853d(0x169)]('data')[_0x34853d(0x193)](_0x3b4403)[_0x34853d(0x157)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5b2116=_0x23bcd3;if(dbPerformance['has'](_0x5b2116(0x11d))[_0x5b2116(0xee)]()){let _0x22355b=dbPerformance[_0x5b2116(0x169)](_0x5b2116(0x11d))[_0x5b2116(0x1c1)](_0x5b2116(0x195))[_0x5b2116(0xee)]();proxyEmit(_0x5b2116(0x1c4),_0x22355b),lastPerformanceEmitted=getDate();}else proxyEmit(_0x5b2116(0x1c4),[]);}async function getStartingBalances(_0x5b2931=!![]){const _0x1581be=_0x23bcd3;let _0x551875=dbPerformance[_0x1581be(0x169)]('data')['find']({'date':config[_0x1581be(0x12a)]})[_0x1581be(0xee)]();config[_0x1581be(0x1c9)]!=''&&!_0x551875&&(await setStartDatePerformance(config),_0x551875=dbPerformance[_0x1581be(0x169)](_0x1581be(0x11d))[_0x1581be(0xf1)]({'date':config[_0x1581be(0x12a)]})[_0x1581be(0xee)]());if(config[_0x1581be(0x1c9)]==''||!_0x551875)return{};let _0x50c70d=0x0,_0x515608=0x0,_0x1b2c7d=0x0,_0x5c6b5b=[],_0x454109=0x0;config[_0x1581be(0xed)][_0x1581be(0xea)](_0x494df2=>{const _0x2d5a99=_0x1581be;if(!_0x494df2[_0x2d5a99(0x133)]){_0x5c6b5b[_0x454109]={'coin':_0x494df2[_0x2d5a99(0x197)],'symbol':_0x494df2[_0x2d5a99(0x10d)],'number':_0x494df2[_0x2d5a99(0x1b1)],'price':_0x494df2['startprice']},_0x50c70d+=_0x494df2[_0x2d5a99(0x172)]*_0x494df2[_0x2d5a99(0x1b1)];if(config[_0x2d5a99(0xf3)]==_0x2d5a99(0x12f))_0x515608+=_0x494df2[_0x2d5a99(0x172)]*_0x494df2[_0x2d5a99(0x1b1)]*_0x551875[_0x2d5a99(0xd5)],_0x1b2c7d+=_0x494df2['startprice']*_0x494df2['startnumber']*_0x551875[_0x2d5a99(0xe3)];else{if(config[_0x2d5a99(0xf3)]==_0x2d5a99(0x13c)||config[_0x2d5a99(0xf3)]=='USDT'||config['basecoin']==_0x2d5a99(0x15d))_0x515608+=_0x494df2[_0x2d5a99(0x172)]*_0x494df2[_0x2d5a99(0x1b1)]*_0x551875[_0x2d5a99(0xd5)]/_0x551875[_0x2d5a99(0xe3)],_0x1b2c7d+=_0x494df2[_0x2d5a99(0x172)]*_0x494df2[_0x2d5a99(0x1b1)];else config[_0x2d5a99(0xf3)]==_0x2d5a99(0x144)&&(_0x515608+=_0x494df2[_0x2d5a99(0x172)]*_0x494df2[_0x2d5a99(0x1b1)],_0x1b2c7d+=_0x494df2['startprice']*_0x494df2[_0x2d5a99(0x1b1)]*_0x551875['usd']/_0x551875[_0x2d5a99(0xd5)]);}_0x454109++;}});let _0xe1184b={'basecoin':_0x50c70d,'eur':_0x515608,'usd':_0x1b2c7d,'coins':_0x5c6b5b};if(_0x5b2931)proxyEmit(_0x1581be(0xcc),_0xe1184b);return _0xe1184b;}function headlessMode(_0x2a3b09){const _0x5ed9c6=_0x23bcd3;let _0x19ca46=_0x2a3b09[_0x5ed9c6(0xed)],_0xccf217=_0x2a3b09[_0x5ed9c6(0xef)],_0xae5f5=[];for(let _0x2380df of _0x19ca46){if(_0x2380df[_0x5ed9c6(0x197)]!=config['basecoin']){if(_0x2380df[_0x5ed9c6(0x183)]/_0x2380df[_0x5ed9c6(0x10c)]-0x1>=_0xccf217/0x64){if(_0x2380df[_0x5ed9c6(0xf8)])_0xae5f5['push'](_0x2380df);}else{if(_0x2380df[_0x5ed9c6(0x183)]/_0x2380df['target']-0x1<=-_0xccf217/0x64){if(_0x2380df['valid'])_0xae5f5[_0x5ed9c6(0x193)](_0x2380df);}}}}_0xae5f5[_0x5ed9c6(0x107)]>0x0&&placeOrder(_0xae5f5);}function symbolToCoin(_0x253154){const _0x471163=_0x23bcd3;let _0xf0ff18;if(_0x253154[_0x471163(0x130)]('/'+config['basecoin']))_0xf0ff18=_0x253154[_0x471163(0x1b4)]('/'+config[_0x471163(0xf3)],'');if(_0x253154[_0x471163(0x130)](config[_0x471163(0xf3)]+'/'))_0xf0ff18=_0x253154[_0x471163(0x1b4)](config[_0x471163(0xf3)]+'/','');return _0xf0ff18;}async function validateOrders(_0x4f703f=0x0){const _0x14176e=_0x23bcd3;let _0x59ed4b=[],_0x117bb6=config['ordertype']==_0x14176e(0x1ae)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x14176e(0xce)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x531556=>{const _0x291949=_0x14176e;let _0x2a7b96=previousCoins[_0x291949(0xf1)](_0x44d072=>_0x44d072[_0x291949(0x197)]==symbolToCoin(_0x531556[_0x291949(0x10d)])),_0x51f89c=currentCoins[_0x291949(0xf1)](_0x1f5215=>_0x1f5215[_0x291949(0x197)]==symbolToCoin(_0x531556[_0x291949(0x10d)])),_0x3999ee,_0x55fcb2;_0x531556[_0x291949(0x170)]=='buy'&&!_0x531556[_0x291949(0x1bc)]||_0x531556[_0x291949(0x170)]==_0x291949(0xca)&&_0x531556[_0x291949(0x1bc)]?(_0x3999ee=_0x2a7b96[_0x291949(0xcf)]+0.9*_0x531556['filled'],_0x55fcb2=_0x2a7b96[_0x291949(0xcf)]+1.1*_0x531556[_0x291949(0xda)]):(_0x3999ee=_0x2a7b96[_0x291949(0xcf)]-1.1*_0x531556[_0x291949(0xda)],_0x55fcb2=_0x2a7b96[_0x291949(0xcf)]-0.9*_0x531556[_0x291949(0xda)]);const _0x402034=_0x531556['filled']!=0x0&&_0x51f89c[_0x291949(0xcf)]>=_0x3999ee&&_0x51f89c[_0x291949(0xcf)]<=_0x55fcb2;_0x59ed4b[_0x291949(0x193)](_0x402034);if(_0x402034&&config['ordertype']!=_0x291949(0x1ae)){if(_0x531556[_0x291949(0x1bc)])logHistory(_0x291949(0x1cc),_0x291949(0xec)+_0x531556[_0x291949(0x10d)]+'\x20'+_0x531556[_0x291949(0x170)]+'\x20#'+formatResult(_0x531556[_0x291949(0xda)]/_0x531556['price'],0x8)+'\x20@'+formatResult(_0x531556[_0x291949(0x10e)],0x8));else logHistory('order','Order\x20filled:\x20'+_0x531556[_0x291949(0x10d)]+'\x20'+_0x531556[_0x291949(0x170)]+'\x20#'+formatResult(_0x531556[_0x291949(0xda)],0x8)+'\x20@'+formatResult(_0x531556[_0x291949(0x10e)],0x8));}}),_0x59ed4b[_0x14176e(0xea)]((_0x42dd7f,_0x3a9734)=>{const _0x53bdc7=_0x14176e;if(_0x42dd7f)lastOrders[_0x53bdc7(0x127)](_0x3a9734,0x1);});if(_0x4f703f<_0x117bb6&&_0x59ed4b['includes'](![])){if(_0x4f703f==0x0){config[_0x14176e(0x1c7)]==_0x14176e(0x1ae)?logHistory(_0x14176e(0x1ad),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x14176e(0x1ad),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4f703f);},0xa*0x3e8);}else{(_0x4f703f==0x1||_0x4f703f==Math['round'](_0x117bb6/0x2)||_0x4f703f==_0x117bb6-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4f703f);},validateOrderInterval);}}else{lockOrders=![];if(_0x4f703f>0x0&&!_0x59ed4b[_0x14176e(0x130)](![]))config[_0x14176e(0x1c7)]==_0x14176e(0x1ae)?logHistory(_0x14176e(0x16c),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x14176e(0x16c),_0x14176e(0x146));else _0x4f703f>0x0&&_0x59ed4b[_0x14176e(0x130)](![])&&(config[_0x14176e(0x1c7)]==_0x14176e(0x1ae)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x14176e(0x194)](_0x117bb6*validateOrderInterval/0xea60)+_0x14176e(0x131)):(lastOrders[_0x14176e(0xea)](async _0x13b2cf=>{const _0x44d14=_0x14176e;try{const _0x5d7d53=await exchange[_0x44d14(0x13a)](_0x13b2cf[_0x44d14(0x114)],_0x13b2cf['symbol']);}catch(_0x4442ea){if(_0x4442ea[_0x44d14(0x164)]()[_0x44d14(0x130)](_0x44d14(0xe6))){}else await handleError(_0x4442ea,_0x44d14(0x156));}}),logHistory('success',_0x14176e(0xc1)+Math[_0x14176e(0x194)](_0x117bb6*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x40d450=_0x23bcd3;dbCoinResults['get'](_0x40d450(0x105))[_0x40d450(0xd8)]()[_0x40d450(0x157)]();let _0xaffc89=await getStartingBalances(![]);_0xaffc89[_0x40d450(0x105)][_0x40d450(0xea)](_0x4b8fa7=>{const _0x2a3879=_0x40d450,_0xf68a3b=_0x4b8fa7[_0x2a3879(0x10d)][_0x2a3879(0x130)](config[_0x2a3879(0xf3)]+'/');if(_0x4b8fa7['coin']!=config[_0x2a3879(0xf3)]){let _0x102dce={'coin':_0x4b8fa7['coin'],'number':_0x4b8fa7[_0x2a3879(0xcf)],'breakeven':_0x4b8fa7['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2a3879(0x169)](_0x2a3879(0x105))['push'](_0x102dce)[_0x2a3879(0x157)]();}});}async function updateCoinResults(_0x36dd3c){const _0x7e799d=_0x23bcd3;let _0x1dcf6a,_0x896175,_0x29a3f4,_0x16d6a7,_0x50e847,_0x4ff25d,_0x12e530=dbCoinResults[_0x7e799d(0x169)](_0x7e799d(0x105))[_0x7e799d(0xf1)]({'coin':_0x36dd3c['coin']})[_0x7e799d(0xee)]();if(!_0x12e530)return;if(_0x36dd3c[_0x7e799d(0x13e)]&&_0x36dd3c[_0x7e799d(0x13e)][_0x7e799d(0x129)]==config['basecoin'])_0x1dcf6a=_0x36dd3c[_0x7e799d(0x13e)]['cost'];else{if(_0x36dd3c['fee']&&_0x36dd3c[_0x7e799d(0x13e)]['currency']=='BNB')_0x1dcf6a=_0x36dd3c[_0x7e799d(0x13e)]['cost']*global[_0x7e799d(0xf4)]['BNB'+config[_0x7e799d(0xf3)]];else _0x1dcf6a=0.001*_0x36dd3c[_0x7e799d(0xda)];}const _0x516f54=_0x36dd3c[_0x7e799d(0x10d)][_0x7e799d(0x130)](config[_0x7e799d(0xf3)]+'/');_0x516f54&&(_0x4ff25d={'coin':_0x36dd3c[_0x7e799d(0x197)],'symbol':_0x36dd3c[_0x7e799d(0x10d)],'filled':_0x36dd3c[_0x7e799d(0xda)]*_0x36dd3c[_0x7e799d(0x10e)],'side':_0x36dd3c[_0x7e799d(0x170)]==_0x7e799d(0xca)?_0x7e799d(0x168):_0x7e799d(0xca),'price':0x1/_0x36dd3c[_0x7e799d(0x10e)]},_0x36dd3c={..._0x4ff25d});_0x36dd3c[_0x7e799d(0x170)]==_0x7e799d(0x168)?_0x29a3f4=(_0x12e530[_0x7e799d(0x17f)]*_0x12e530[_0x7e799d(0xcf)]+_0x36dd3c[_0x7e799d(0x10e)]*_0x36dd3c[_0x7e799d(0xda)])/(_0x12e530['number']+_0x36dd3c[_0x7e799d(0xda)]):_0x29a3f4=(_0x12e530[_0x7e799d(0x17f)]*_0x12e530[_0x7e799d(0xcf)]-_0x36dd3c[_0x7e799d(0x10e)]*_0x36dd3c[_0x7e799d(0xda)])/(_0x12e530['number']-_0x36dd3c[_0x7e799d(0xda)]);_0x36dd3c[_0x7e799d(0x170)]==_0x7e799d(0x168)?_0x16d6a7=_0x12e530[_0x7e799d(0x100)]:_0x16d6a7=_0x12e530[_0x7e799d(0x100)]+(_0x36dd3c[_0x7e799d(0x10e)]-_0x12e530['breakeven'])*_0x36dd3c[_0x7e799d(0xda)];_0x896175=_0x36dd3c['side']==_0x7e799d(0xca)?_0x12e530['number']-_0x36dd3c['filled']:_0x12e530[_0x7e799d(0xcf)]+_0x36dd3c[_0x7e799d(0xda)],_0x50e847=(_0x36dd3c[_0x7e799d(0x10e)]-_0x29a3f4)*_0x896175;let _0x16aafc={'coin':_0x36dd3c[_0x7e799d(0x197)],'number':_0x896175,'breakeven':formatResult(_0x29a3f4,0x8),'realized':formatResult(_0x16d6a7,0x8),'unrealized':formatResult(_0x50e847,0x8),'fees':formatResult(_0x12e530[_0x7e799d(0xc6)]+_0x1dcf6a,0x8),'sells':_0x36dd3c[_0x7e799d(0x170)]=='sell'?_0x12e530[_0x7e799d(0x182)]+0x1:_0x12e530[_0x7e799d(0x182)],'buys':_0x36dd3c['side']=='buy'?_0x12e530[_0x7e799d(0x128)]+0x1:_0x12e530[_0x7e799d(0x128)]};dbCoinResults[_0x7e799d(0x169)](_0x7e799d(0x105))[_0x7e799d(0xf1)]({'coin':_0x36dd3c[_0x7e799d(0x197)]})[_0x7e799d(0x153)](_0x16aafc)[_0x7e799d(0x157)]();}async function placeOrder(_0x74bd05){const _0x428d63=_0x23bcd3,_0x4878ba=config['ordertype']==_0x428d63(0x1ae)?_0x428d63(0x1ae):_0x428d63(0x18b);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x428d63(0x1a2)](currentCoins));for(const _0x50dc37 of _0x74bd05){let _0x5b0b59,_0x20ab93,_0x375b9c,_0x15f9a4,_0x285c87,_0x2f64a2=_0x50dc37['symbol'];try{const _0x4f7aeb=await exchange[_0x428d63(0x16d)](_0x2f64a2),_0x47289c=_0x4f7aeb[_0x2f64a2];_0x5b0b59=_0x47289c['last'],_0x20ab93=_0x47289c[_0x428d63(0x1c5)],_0x375b9c=_0x47289c['ask'];_0x50dc37[_0x428d63(0x1bc)]?(_0x15f9a4=_0x50dc37[_0x428d63(0x170)]==_0x428d63(0x168)?_0x428d63(0xca):_0x428d63(0x168),_0x285c87=Math[_0x428d63(0x1a0)](_0x50dc37[_0x428d63(0xd3)])/_0x5b0b59):(_0x15f9a4=_0x50dc37[_0x428d63(0x170)],_0x285c87=Math[_0x428d63(0x1a0)](_0x50dc37['trade']));_0x4878ba==_0x428d63(0x18b)&&(config['ordertype']==_0x428d63(0x101)&&(_0x5b0b59=_0x15f9a4=='buy'?_0x20ab93:_0x375b9c),config['ordertype']=='limit-low'&&(_0x5b0b59=_0x15f9a4==_0x428d63(0x168)?_0x375b9c:_0x20ab93));_0x285c87=formatResult(_0x285c87,0x8),_0x5b0b59=formatResult(_0x5b0b59,0x8);const _0x424d9b=await exchange[_0x428d63(0x15c)](_0x2f64a2,_0x4878ba,_0x15f9a4,_0x285c87,_0x5b0b59);lastOrders['push']({'orderId':_0x424d9b['id'],'symbol':_0x2f64a2,'side':_0x15f9a4,'reverse':_0x50dc37['reverse'],'amount':_0x50dc37['reverse']?_0x424d9b[_0x428d63(0x11c)]*_0x424d9b[_0x428d63(0x10e)]:_0x424d9b[_0x428d63(0x11c)],'filled':_0x50dc37[_0x428d63(0x1bc)]?_0x424d9b['filled']*_0x424d9b[_0x428d63(0x10e)]:_0x424d9b['filled'],'price':_0x424d9b[_0x428d63(0x10e)]});const _0x2bf633=_0x15f9a4=='sell'?config['emojisell']?String[_0x428d63(0x14c)]('0x'+config['emojisell'])+'\x20':'':config[_0x428d63(0x104)]?String['fromCodePoint']('0x'+config[_0x428d63(0x104)])+'\x20':'',_0x24e834=_0x4878ba==_0x428d63(0x1ae)?_0x428d63(0x149):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x428d63(0x124);if(_0x4878ba==_0x428d63(0x1ae))logHistory(_0x428d63(0x1cc),''+_0x2bf633+_0x24e834+_0x428d63(0x14a)+_0x2f64a2+'\x20'+_0x15f9a4+'\x20#'+formatResult(_0x424d9b[_0x428d63(0xda)],0x8)+'\x20@'+formatResult(_0x424d9b[_0x428d63(0x10e)],0x8));else logHistory(_0x428d63(0x1cc),''+_0x2bf633+_0x24e834+_0x428d63(0x14a)+_0x2f64a2+'\x20'+_0x15f9a4+'\x20#'+formatResult(_0x424d9b['amount'],0x8)+'\x20@'+formatResult(_0x424d9b[_0x428d63(0x10e)],0x8));_0x424d9b[_0x428d63(0x197)]=_0x50dc37[_0x428d63(0x197)],await updateCoinResults(_0x424d9b);if(config[_0x428d63(0x112)]!=0x0){let _0x87f435=null;if(cooldownTracker['length']==config[_0x428d63(0x112)]-0x1)_0x87f435=cooldownTracker[_0x428d63(0x110)]();const _0x3b0f25=getTimeStamp();cooldownTracker[_0x428d63(0x193)](_0x3b0f25);if(_0x87f435){const _0x39da7b=fns['differenceInSeconds'](new Date(_0x3b0f25),new Date(_0x87f435));_0x39da7b<cooldownInterval&&(logHistory('error',_0x428d63(0x136)+config[_0x428d63(0x112)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x428d63(0x11e)+cooldownPeriod/(0xe10*0x3e8)+_0x428d63(0x151)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x10b3d5){if(_0x10b3d5[_0x428d63(0x164)]()['includes'](_0x428d63(0x19a)))logHistory(_0x428d63(0x1ad),_0x428d63(0x14b)+_0x2f64a2);else{if(_0x10b3d5[_0x428d63(0x164)]()[_0x428d63(0x130)](_0x428d63(0x132)))logHistory(_0x428d63(0x1ad),_0x428d63(0x137)+_0x2f64a2);else await handleError(_0x10b3d5,_0x428d63(0x1bf));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config['ordertype']==_0x428d63(0x1ae)?logHistory('error',_0x428d63(0x199)):logHistory(_0x428d63(0x1ad),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x428d63(0xfa)]&&logHistory('error',_0x428d63(0x176)));}}function logHistory(_0x2a0f36,_0x11e61b,_0x1142cc=''){const _0xa004e4=_0x23bcd3;let _0x146641={'time':getTimeStamp(),'type':_0x2a0f36,'event':_0x11e61b,'botname':config['botname'],'showname':config[_0xa004e4(0x19e)]};dbLogs['get'](_0xa004e4(0x1c0))[_0xa004e4(0x193)](_0x146641)[_0xa004e4(0x157)]();if(_0x1142cc=='')_0x1142cc=_0x11e61b;proxyEmit('event',{'log':_0x146641,'summary':_0x1142cc}),process[_0xa004e4(0x148)]({'telegram':_0x146641},_0x5b041f=>{}),logging(''+_0x146641[_0xa004e4(0x158)]);}function emitHistory(_0xa4d02f={}){const _0x88c911=_0x23bcd3;Object[_0x88c911(0x162)](_0xa4d02f)[_0x88c911(0x107)]==0x0&&(_0xa4d02f={'type':[_0x88c911(0x1cc),_0x88c911(0x158)],'event':'','page':0x1});if(_0xa4d02f['type'][_0x88c911(0x130)](_0x88c911(0x158)))_0xa4d02f[_0x88c911(0x190)][_0x88c911(0x127)](_0xa4d02f[_0x88c911(0x190)][_0x88c911(0xf6)]('event'),0x1,_0x88c911(0x1ad),_0x88c911(0x16c));if(dbLogs['has']('logs')[_0x88c911(0xee)]()){let _0x39416a=dbLogs['get'](_0x88c911(0x1c0))['filter'](_0x6e5fa0=>{const _0x44ba23=_0x88c911;if(_0xa4d02f['type'][_0x44ba23(0x107)]==0x0)return![];else return _0xa4d02f[_0x44ba23(0x190)][_0x44ba23(0x130)](_0x6e5fa0[_0x44ba23(0x190)]);})[_0x88c911(0x198)](_0x2f2c3f=>{const _0x4de716=_0x88c911;if(_0xa4d02f[_0x4de716(0x158)]=='')return!![];else return _0x2f2c3f[_0x4de716(0x158)][_0x4de716(0xf9)]()['includes'](_0xa4d02f[_0x4de716(0x158)][_0x4de716(0xf9)]());})[_0x88c911(0x1c1)](_0x88c911(0xe8)),_0x56556d=_0x39416a[_0x88c911(0xee)]()[_0x88c911(0x107)];_0x39416a=_0x39416a[_0x88c911(0x1bc)]()[_0x88c911(0xfb)]((_0xa4d02f['page']-0x1)*logPageSize,_0xa4d02f[_0x88c911(0x191)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x88c911(0xc3),{'logs':_0x39416a,'total':_0x56556d});}else proxyEmit(_0x88c911(0xc3),{'logs':[],'total':0x0});}async function pauseBot(_0xe6bf7c){const _0x206cb3=_0x23bcd3,_0x31db94=new Date()[_0x206cb3(0x13d)]();if(!lastBotPause)lastBotPause=new Date()[_0x206cb3(0x13d)](),consecutivePauses=0x1;else{if(_0x31db94-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x206cb3(0x148)]({'stop':_0x206cb3(0x1c2)},_0x4b9a2c=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x206cb3(0x13d)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x206cb3(0x1ad),_0x206cb3(0xcd)+consecutivePauses+')'),await sleep(_0xe6bf7c),botPaused=![],reset();}}async function handleError(_0x311ccf,_0x248e09,_0x1d9089=''){const _0x1ac4bb=_0x23bcd3;if(_0x311ccf[_0x1ac4bb(0x164)]()[_0x1ac4bb(0x130)]('DDoSProtection'))logHistory(_0x1ac4bb(0x1ad),_0x248e09+_0x1ac4bb(0xd4)),await pauseBot(pauseBotInterval);else{if(_0x311ccf[_0x1ac4bb(0x164)]()[_0x1ac4bb(0x130)]('ExchangeNotAvailable'))logHistory(_0x1ac4bb(0x1ad),_0x248e09+_0x1ac4bb(0xd6)),await pauseBot(pauseBotInterval);else{if(_0x311ccf['toString']()[_0x1ac4bb(0x130)](_0x1ac4bb(0x19d)))logHistory(_0x1ac4bb(0x1ad),_0x248e09+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x311ccf['toString']()[_0x1ac4bb(0x130)](_0x1ac4bb(0xc2)))logHistory(_0x1ac4bb(0x1ad),_0x248e09+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x1ac4bb(0x148)]({'stop':_0x1ac4bb(0x1ac)},_0x4c29cf=>{});else{if(_0x311ccf['toString']()[_0x1ac4bb(0x130)]('AuthenticationError'))logHistory('error',_0x248e09+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x1ac4bb(0x1ad),_0x1ac4bb(0x125)),process[_0x1ac4bb(0x148)]({'stop':_0x1ac4bb(0x1ac)},_0x144762=>{});else{if(_0x311ccf['toString']()[_0x1ac4bb(0x130)](_0x1ac4bb(0x108)))logHistory(_0x1ac4bb(0x1ad),_0x248e09+_0x1ac4bb(0x1b5)),logHistory(_0x1ac4bb(0x1ad),_0x1ac4bb(0x125)),process[_0x1ac4bb(0x148)]({'stop':_0x1ac4bb(0x1ac)},_0xf7e374=>{});else{if(_0x311ccf[_0x1ac4bb(0x164)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x1ac4bb(0x1ad),_0x248e09+_0x1ac4bb(0x1b6)),logHistory(_0x1ac4bb(0x1ad),_0x1ac4bb(0x125)),process[_0x1ac4bb(0x148)]({'stop':'kill'},_0x943458=>{});else{if(_0x311ccf[_0x1ac4bb(0x164)]()[_0x1ac4bb(0x130)]('InvalidNonce'))logHistory(_0x1ac4bb(0x1ad),_0x248e09+_0x1ac4bb(0x15e)),await pauseBot(pauseBotInterval),process[_0x1ac4bb(0x148)]({'stop':'restart'},_0x1064c3=>{});else _0x311ccf[_0x1ac4bb(0x164)]()['includes']('InsufficientFunds')?logHistory(_0x1ac4bb(0x1ad),_0x248e09+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x1ac4bb(0x1ad),_0x248e09+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x248e09+_0x1ac4bb(0xe0),_0x311ccf),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x5c0213,_0x53c020){const _0x3bc2f3=_0x23bcd3;return parseFloat(_0x5c0213[_0x3bc2f3(0xc5)](_0x53c020));}function logging(_0x3d40ea,_0x11eb04=''){const _0x1f5a00=_0x23bcd3;if(config[_0x1f5a00(0x19e)])console[_0x1f5a00(0x14e)](getTimeStamp()+':\x20'+config[_0x1f5a00(0x1ba)]+_0x1f5a00(0x117)+_0x3d40ea,_0x11eb04);else console[_0x1f5a00(0x14e)](getTimeStamp()+':\x20Bot\x20'+botID+_0x1f5a00(0x117)+_0x3d40ea,_0x11eb04);}function getServerTime(){const _0x22cfef=_0x23bcd3,_0x22a4b5=new Date();return _0x22a4b5['getFullYear']()+'/'+(_0x22a4b5[_0x22cfef(0x140)]()+0x1)[_0x22cfef(0x164)]()['padStart'](0x2,'0')+'/'+_0x22a4b5['getDate']()[_0x22cfef(0x164)]()[_0x22cfef(0xd0)](0x2,'0')+'\x20'+_0x22a4b5[_0x22cfef(0x192)]()[_0x22cfef(0x164)]()[_0x22cfef(0xd0)](0x2,'0')+':'+_0x22a4b5[_0x22cfef(0x1af)]()[_0x22cfef(0x164)]()['padStart'](0x2,'0')+':'+_0x22a4b5[_0x22cfef(0x18d)]()[_0x22cfef(0x164)]()[_0x22cfef(0xd0)](0x2,'0');}function getTimeStamp(){const _0x32fec4=_0x23bcd3,_0x37be62=shiftedTime();return _0x37be62[_0x32fec4(0x160)]()+'/'+(_0x37be62[_0x32fec4(0x140)]()+0x1)[_0x32fec4(0x164)]()['padStart'](0x2,'0')+'/'+_0x37be62[_0x32fec4(0x13b)]()[_0x32fec4(0x164)]()[_0x32fec4(0xd0)](0x2,'0')+'\x20'+_0x37be62[_0x32fec4(0x192)]()[_0x32fec4(0x164)]()[_0x32fec4(0xd0)](0x2,'0')+':'+_0x37be62['getMinutes']()[_0x32fec4(0x164)]()[_0x32fec4(0xd0)](0x2,'0')+':'+_0x37be62[_0x32fec4(0x18d)]()[_0x32fec4(0x164)]()[_0x32fec4(0xd0)](0x2,'0');}function getDate(){const _0x277d09=_0x23bcd3,_0x95f93e=shiftedTime();return _0x95f93e[_0x277d09(0x160)]()+'/'+(_0x95f93e[_0x277d09(0x140)]()+0x1)['toString']()[_0x277d09(0xd0)](0x2,'0')+'/'+_0x95f93e['getDate']()[_0x277d09(0x164)]()['padStart'](0x2,'0');}function getHour(){const _0x3a4b37=_0x23bcd3,_0x2bd757=shiftedTime();return _0x2bd757[_0x3a4b37(0x192)]()[_0x3a4b37(0x164)]()[_0x3a4b37(0xd0)](0x2,'0');}function sleep(_0x244b55){return new Promise(_0x27c324=>setTimeout(_0x27c324,_0x244b55));}function shiftedTime(){const _0x15fdf0=_0x23bcd3,_0x5ca30e=new Date();let _0x480c93=_0x5ca30e;if(config&&config[_0x15fdf0(0x16a)]!==0x0)_0x480c93=fns[_0x15fdf0(0x1a8)](_0x5ca30e,{'hours':config[_0x15fdf0(0x16a)]});return _0x480c93;}