const _0x435db0=_0x4216;(function(_0xaf0ecc,_0x2f613e){const _0x351461=_0x4216,_0x39acdf=_0xaf0ecc();while(!![]){try{const _0x265a47=parseInt(_0x351461(0x175))/0x1*(parseInt(_0x351461(0x1a7))/0x2)+parseInt(_0x351461(0x1dd))/0x3+parseInt(_0x351461(0x199))/0x4+parseInt(_0x351461(0x1ef))/0x5*(-parseInt(_0x351461(0xfa))/0x6)+-parseInt(_0x351461(0x155))/0x7*(parseInt(_0x351461(0x22e))/0x8)+-parseInt(_0x351461(0x1a4))/0x9*(-parseInt(_0x351461(0x128))/0xa)+-parseInt(_0x351461(0x1c5))/0xb*(parseInt(_0x351461(0x15f))/0xc);if(_0x265a47===_0x2f613e)break;else _0x39acdf['push'](_0x39acdf['shift']());}catch(_0x20e691){_0x39acdf['push'](_0x39acdf['shift']());}}}(_0x5663,0x534a0));const _0x4ad448=function(){let _0x1ab400=!![];return function(_0x2235ff,_0x5d20e0){const _0x29f7c7=_0x1ab400?function(){const _0x27e709=_0x4216;if(_0x5d20e0){const _0x727544=_0x5d20e0[_0x27e709(0x19a)](_0x2235ff,arguments);return _0x5d20e0=null,_0x727544;}}:function(){};return _0x1ab400=![],_0x29f7c7;};}(),_0x34c4c2=_0x4ad448(this,function(){const _0x201bcf=_0x4216;return _0x34c4c2['toString']()[_0x201bcf(0x24d)]('(((.+)+)+)+$')[_0x201bcf(0x206)]()['constructor'](_0x34c4c2)[_0x201bcf(0x24d)](_0x201bcf(0x1f1));});_0x34c4c2();'use strict';const ccxt=require(_0x435db0(0x255)),low=require(_0x435db0(0x12a)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x435db0(0x242))['Crypt'],util=require('util'),argv=require(_0x435db0(0x186))(process[_0x435db0(0x205)][_0x435db0(0x19c)](0x2))[_0x435db0(0x205)],path=require('path');let exchange;global[_0x435db0(0x1ba)]={},global[_0x435db0(0x1a9)]={};const usdBasecoins=[_0x435db0(0x127),'BUSD',_0x435db0(0x153),_0x435db0(0x1e6),_0x435db0(0x11c),_0x435db0(0x116)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x435db0(0x1dc)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x435db0(0x1cb)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x435db0(0x14b)+pauseBotInterval/0xea60+_0x435db0(0x120),pauseBotIntervalLong=0xa*0x3c*0x3e8,pauseBotMsgLong=_0x435db0(0x14b)+pauseBotIntervalLong/0xea60+_0x435db0(0x120),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')['version'],botID=process[_0x435db0(0x205)][0x2]||_0x435db0(0x1c7),pattern=/^[0-9]{3}$/;!pattern[_0x435db0(0x10f)](botID)&&(console[_0x435db0(0x191)](_0x435db0(0x14a)+botID+_0x435db0(0x23c)),killBot());const userID=process[_0x435db0(0x205)][0x3]||'',configpath=userID?_0x435db0(0x134)+userID+'/':'./config/',logspath=userID?_0x435db0(0x22c)+userID+'/':_0x435db0(0x22c),loggerfile=fs[_0x435db0(0x166)](logspath+_0x435db0(0x1b4),{'flags':'a'});!fs[_0x435db0(0x135)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x435db0(0x135)](logspath)&&fs[_0x435db0(0xe5)](logspath);const configfile=configpath+_0x435db0(0x1d5)+botID+_0x435db0(0x203),logfile=configpath+_0x435db0(0x1d5)+botID+_0x435db0(0x246),performancefile=configpath+_0x435db0(0x1d5)+botID+_0x435db0(0x115),coinresultsfile=configpath+_0x435db0(0x1d5)+botID+_0x435db0(0xfd),settingsfile=configpath+_0x435db0(0xcc),securefile=configpath+_0x435db0(0x164),configbackuppath=configpath+_0x435db0(0x25c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x435db0(0x214)]({'logs':[],'version':serverversion})[_0x435db0(0xbf)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x435db0(0x214)]({'data':[],'version':serverversion})[_0x435db0(0xbf)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x435db0(0x214)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x435db0(0x214)]({'coins':[],'version':serverversion})[_0x435db0(0xbf)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x435db0(0x1d3)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xb9e5a=>{const _0xdfdd25=_0x435db0;console[_0xdfdd25(0x191)](_0xb9e5a);},'simple':_0x2a587e=>{const _0x3a4f5f=_0x435db0;console[_0x3a4f5f(0x191)](_0x2a587e),loggerfile[_0x3a4f5f(0xbf)](util[_0x3a4f5f(0x1cf)](_0x2a587e)+'\x0a');},'full':async(_0x37e0db,_0x28893d='')=>{const _0x117f8c=_0x435db0;let _0x1c9f38;if(config[_0x117f8c(0x24a)])_0x1c9f38=getTimeStamp()+':\x20'+config['botname']+_0x117f8c(0x211)+_0x37e0db;else _0x1c9f38=getTimeStamp()+_0x117f8c(0xe0)+botID+_0x117f8c(0x211)+_0x37e0db;console['log'](_0x1c9f38),loggerfile[_0x117f8c(0xbf)](util[_0x117f8c(0x1cf)](_0x1c9f38)+'\x0a'),_0x28893d&&(console['log'](_0x28893d),loggerfile[_0x117f8c(0xbf)](util['format'](_0x28893d)+'\x0a'));},'debug':async(_0x12be2b,_0x1329fc='')=>{const _0x4f3c6b=_0x435db0;let _0x2c1352;if(config[_0x4f3c6b(0x24a)])_0x2c1352=getTimeStamp()+':\x20'+config['botname']+_0x4f3c6b(0x1d1)+_0x12be2b;else _0x2c1352=getTimeStamp()+_0x4f3c6b(0xe0)+botID+_0x4f3c6b(0x1d1)+_0x12be2b;if(debugging)console[_0x4f3c6b(0x191)](_0x2c1352);loggerfile[_0x4f3c6b(0xbf)](util[_0x4f3c6b(0x1cf)](_0x2c1352)+'\x0a');if(_0x1329fc){if(debugging)console[_0x4f3c6b(0x191)](_0x1329fc);loggerfile['write'](util[_0x4f3c6b(0x1cf)](_0x1329fc)+'\x0a');}}};process['on'](_0x435db0(0x188),function(_0x173ac8){const _0x417092=_0x435db0;handleError(_0x173ac8,_0x417092(0x188));});settings[_0x435db0(0x141)]!=config['timeshift']&&updateTimeshift(settings[_0x435db0(0x141)]);settings['onepagemode']!=config[_0x435db0(0x16b)]&&updateOnepagemode(settings[_0x435db0(0x16b)]);process['send']({'started':_0x435db0(0x258)},_0x4a40=>{}),initializeProcessListeners();function proxyEmit(_0x31d898,_0x17e0e4=null){const _0x3ffde0=_0x435db0;process[_0x3ffde0(0x159)]({'function':_0x31d898,'args':_0x17e0e4},_0x3e7983=>{});}function initializeProcessListeners(){const _0x238b47=_0x435db0;process['on'](_0x238b47(0x1a5),_0x2a823a=>{const _0x1b3274=_0x238b47;switch(Object['keys'](_0x2a823a)[0x0]){case _0x1b3274(0x141):_0x2a823a[_0x1b3274(0x141)]!=undefined&&(settings[_0x1b3274(0x141)]=_0x2a823a[_0x1b3274(0x141)],updateTimeshift(settings[_0x1b3274(0x141)]));break;case _0x1b3274(0x16b):_0x2a823a['onepagemode']!=undefined&&(settings[_0x1b3274(0x16b)]=_0x2a823a[_0x1b3274(0x16b)],updateOnepagemode(settings[_0x1b3274(0x16b)]));break;case _0x1b3274(0xc0):_0x2a823a[_0x1b3274(0xc0)]!=undefined&&(bots=JSON[_0x1b3274(0x1e7)](_0x2a823a['bots']),proxyEmit(_0x1b3274(0xc0),bots));break;case _0x1b3274(0x20d):switch(_0x2a823a[_0x1b3274(0x20d)]){case'initclient':initclient();break;case _0x1b3274(0x106):toggleBotMode();break;case _0x1b3274(0x215):emitHistory(_0x2a823a[_0x1b3274(0x1b7)]);break;case _0x1b3274(0x1ad):deleteHistoryAlerts(_0x2a823a['args']);break;case _0x1b3274(0x17c):getPortfolio(_0x2a823a[_0x1b3274(0x1b7)]);break;case _0x1b3274(0x249):storeConfiguration(_0x2a823a[_0x1b3274(0x1b7)]);break;case _0x1b3274(0x228):storeHeadless(_0x2a823a[_0x1b3274(0x1b7)]);break;case _0x1b3274(0x107):storeFiat(_0x2a823a['args']);break;case _0x1b3274(0x1cd):resetHistory();break;case _0x1b3274(0x15b):getStartingBalances(getNormalizedPerformance());break;case _0x1b3274(0x22b):placeOrder(_0x2a823a[_0x1b3274(0x1b7)]);break;case _0x1b3274(0x1f3):cancelLoading();break;case _0x1b3274(0x1f7):showConfig();break;case _0x1b3274(0x21e):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);function _0x5663(){const _0x439d4c=['coin','cloneDeep','progress','11ZHKjkb','emojisell','001','getAllOrders()','\x20not\x20available','ID:\x20','UNLOCKED','loading-canceled','resetHistory','netoffset','format','min','\x20>\x20[DEBUG]\x20','customId','RSA-OAEP','limit-high','bot-','InvalidNonce','sortBy','max','Binance','openOrders','timestamp','freeze','59949EfpDQE','Order\x20amount\x20is\x20invalid:\x20','fetchBalance','sells','enabled','BNB/','getTime','Cryptocom','last','USDT','parse','Error\x20details:','\x20exchange\x20error','MIN_NOTIONAL','apiSecret','startsWith','valid','liquidity','33760OUlTaH','indexOf','(((.+)+)+)+$','watchTrades()','cancelLoading','ongoing','Invalid\x20symbol:\x20','Bybit','showConfig','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','fee','total','-------------------------------\x0a','pro','autoliquidity','spot','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Waited\x20','Pausing\x20for\x20','-config.json','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','argv','toString','version','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20minutes\x20-\x20','\x20closed\x20the\x20connection','data','basecoinvalue','function','split','Portfolio\x20change\x20detected:\x20','fetchClosedOrders','\x20>\x20','PermissionDenied','unlinkSync','defaults','emitHistory','\x20:\x20','***','length','type','BTC','Resetting\x20bot\x20history','InsufficientFunds','Fee\x20discount\x20refund\x20detected:\x20','sendMetricsTelegram','coins','Transaction\x20detection\x20unblocked','debug','secure','remove','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','excluded','ask','storeHeadless','cancelOrder','Bitget','placeOrder','./logs/','fetchTicker','156176qKtqxA','assign','Trigger:\x20','Reset\x20|\x20','\x20blocked\x20your\x20API','ordertype','toUpperCase','currency','\x20API\x20key\x20is\x20invalid','UNLOCKING','\x20network\x20error','usd','removed','startprice',',\x20must\x20be\x20a\x203\x20digit\x20number','highest','\x20|\x20lock\x20orders:\x20','close','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getHours','hybrid-crypto-js','Executing\x20exchange\x20reload','emojibuy','loadMarkets','-events.json','recreateCoinResults()','<b>Bot\x20','storeConfiguration','showname','join','privateKey','search','1\x20-\x20FILLED\x20unknown\x20order:\x20','exchanges','2\x20-\x20Handled\x20open\x20orders','includes','ORDERS.LOCKED','timeout','abs','ccxt','getMinutes','getCoinNumber()','running','breakeven','watchOrders','percentage','/backup/','success','.json','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','offset','write','bots','getFullYear','\x20has\x20a\x2024h\x20drop\x20of\x20','filter','trade','basecoin','apiPassword','target','date','\x20portfolio:</b>\x20\x0a\x0a','concat','cancel','bb-settings.json','keys','changes','market','Exchange','Limit\x20(low-margin)','yyyy/MM/dd','splice','get','ExchangeError','amountToPrecision','PAXG','Order\x20filled:\x20','warning','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','1\x20-\x20FILLED\x20known\x20order:\x20','buy','getPortfolio(2)','Order(s)\x20not\x20validated\x20after\x20','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',':\x20Bot\x20','price','initTickers()','OrderNotFound','Limit\x20(high-margin)','mkdirSync','average','recent20','padStart','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2.5.0','configuration','\x20orders\x20in\x20less\x20than\x20','\x20hour','closed','cost','time','starting-balance-','delta','Net\x20effect','apiKey','Avoiding\x20continuous\x20order\x20attempts','symbol','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getPortfolio(0)','colorscheme','258MXUHBM','net-basecoin','Insufficient\x20funds\x20to\x20execute\x20order:\x20','-results.json','parseISO','canceled','push','writeFile','leftTxt','balancing\x20resumed','page','\x20not\x20responding','toggleBotMode','storeFiat','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','portfolio','/USD','open','<pre>','createOrder','number','test','\x20change','substring','exchange','password','2\x20-\x20handling\x20FILLED\x20order:\x20','-performance.json','USDP','No\x20more\x20open\x20orders\x20-\x20','\x20API\x20secret\x20is\x20invalid','getPortfolio(1)','floor','datetime','USDC','find','red_yellow_blue','value','\x20minutes','LOCKED','replace','recreate','watchTransactions()','order','error','USD','20QpQqAx','\x20order:\x20','lowdb','round','add','getMonth','DDoSProtection','Headless:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','bot','fiat','2.6.0','./config/','existsSync','added','entries','0\x20-\x20EXECUTION:\x20','balances','<b>','sort','getOpenOrders()','botname','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','isEqual','\x20|\x20Custom\x20ID:\x20','timeshift','status','fetchOpenOrders','limit-low','\x20value','none','orderId','Exception\x20thrown\x20in\x20','active','Error:\x20Invalid\x20argument\x20','\x20-\x20pausing\x20bot\x20for\x20','orderstatus','threshold','1\x20-\x20Unlock\x20orders','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','event-history','\x20metrics:</b>\x20\x0a\x0a','Unfilled\x20order(s)\x20canceled\x20after\x20','TUSD','bid','161dTwmfy','1\x20-\x20Handle\x20open\x20orders','filled','has','send','forEach','getStartingBalances','full','loadSymbols()','milliseconds','2805168cKqabO','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','padEnd','2.3.5','kill','bb-secure.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','createWriteStream','fees','</pre>','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','shift','onepagemode','final','set','rightTxt','buys','AuthenticationError','toLowerCase','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getDate','event','16993uILicx','logs','distribution','exchange\x20not\x20reloaded','getSeconds','ETH','************','getPortfolio','startdate','limit','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','findIndex','2\x20-\x20Orders\x20unlocked','\x20-\x20bot\x20not\x20started','EUR','Invalid\x20API\x20key\x20or\x20secret\x20entered','exec','yargs/yargs','NetworkError','uncaughtException','BNB','fetchTickers','restart','remainingSymbols','net-fiat','decrypt','getCoins()','reverse','log','Net\x20','%\x20(','\x20|\x20','string','headless','amount','Huobi','353976DHAxSG','apply','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','slice','no\x20open\x20orders','initial','limits','sell','eur','API-key\x20format\x20invalid','Failed\x20to\x20load\x20coin\x20data\x20for\x20','2749617teWPTz','message','configuration-stored','70BkExRI',':\x20timer\x20>','change','recovery','Market','settings','deleteHistoryAlerts','Loading\x20completed','change24h','stringify','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','startnumber','watchOrders()','/output-000.log','cooldown','/EUR','args','toFixed','Transaction\x20detection\x20blocked','ticker','realized','cancelOrders()','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','RateLimitExceeded','side','\x20|\x20highest\x20fee:\x20','ORDERS.UNLOCKING'];_0x5663=function(){return _0x439d4c;};return _0x5663();}async function reset(_0x144ed3=![]){const _0x202dbe=_0x435db0;logger[_0x202dbe(0x221)](_0x202dbe(0x231)+(_0x144ed3?'exchange\x20reloaded':_0x202dbe(0x178))+'\x20|\x20exchange:\x20'+config[_0x202dbe(0x112)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x144ed3)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x202dbe(0xf4)]!=''&&config['apiKey']!=_0x202dbe(0x217)){loadingProgress=0x0;if(_0x144ed3){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x22f3b9){handleErrorNoStop(_0x22f3b9,_0x202dbe(0x15d));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x2af499=await getCoins();[currentCoins,currentCoinsAll]=_0x2af499,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x202dbe(0x1ae)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x202dbe(0x218)]==0x0&&allOpenOrders[_0x202dbe(0x218)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x12915b=_0x435db0;exchangeStopped=!![];try{await exchange[_0x12915b(0x23f)]();}catch(_0x22cbd3){await handleError(_0x22cbd3,'stopExchange()');}}async function reloadExchange(){const _0x3990a3=_0x435db0;while(lockOrders!=ORDERS[_0x3990a3(0x1cb)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3990a3(0x221)](_0x3990a3(0x243)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x8c091c=config[_0x435db0(0x112)],_0x1e9ede=config[_0x435db0(0xf4)],_0x20f9c7=config[_0x435db0(0x1eb)],_0x5e4bbd=config['apiPassword']){const _0x5856da=_0x435db0;exchange&&await stopExchange();!supportedExchanges()[_0x5856da(0x251)](_0x8c091c)&&(logHistory(_0x5856da(0x126),_0x5856da(0x204)+_0x8c091c+'\x20exchange'),killBot());const _0x4d43ea=ccxt['pro'][_0x8c091c[_0x5856da(0x171)]()];exchange=new _0x4d43ea({'apiKey':_0x1e9ede,'secret':_0x20f9c7,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5856da(0x1ff)}});if(_0x5e4bbd)exchange[_0x5856da(0x113)]=_0x5e4bbd;}function setStableCoins(){const _0xe992dd=_0x435db0;let _0x321c38=config['basecoin']=='ETH'?'ETH':config[_0xe992dd(0xc5)]==_0xe992dd(0xd7)?_0xe992dd(0xd7):_0xe992dd(0x21a),_0x22d9a5=!allSymbols[_0xe992dd(0x251)](_0x321c38+_0xe992dd(0x10a))?_0xe992dd(0x1e6):_0xe992dd(0x127),_0xd973cd=!allSymbols['includes'](_0x321c38+_0xe992dd(0x1b6))?_0x22d9a5:_0xe992dd(0x183);stablecoins={'eur':{'coin':''+_0x321c38+_0xd973cd,'symbol':_0x321c38+'/'+_0xd973cd},'usd':{'coin':''+_0x321c38+_0x22d9a5,'symbol':_0x321c38+'/'+_0x22d9a5}};}async function initwsCcxt(){const _0x501e38=_0x435db0;initCycle++;const _0x3128d1=initCycle;let _0x4c56b8=[];config[_0x501e38(0x109)][_0x501e38(0x15a)](_0x574a7e=>{const _0x28f233=_0x501e38;if(!_0x574a7e[_0x28f233(0x226)]&&_0x574a7e['coin']!=config[_0x28f233(0xc5)])_0x4c56b8[_0x28f233(0x100)](_0x574a7e[_0x28f233(0xf6)]);});if(!_0x4c56b8[_0x501e38(0x251)](stablecoins[_0x501e38(0x1a1)][_0x501e38(0xf6)]))_0x4c56b8[_0x501e38(0x100)](stablecoins[_0x501e38(0x1a1)][_0x501e38(0xf6)]);if(!_0x4c56b8[_0x501e38(0x251)](stablecoins[_0x501e38(0x239)][_0x501e38(0xf6)]))_0x4c56b8[_0x501e38(0x100)](stablecoins[_0x501e38(0x239)][_0x501e38(0xf6)]);if(config[_0x501e38(0x112)][_0x501e38(0x1ec)](_0x501e38(0x1d9))&&config['basecoin']!=_0x501e38(0xd7)){if(!_0x4c56b8['includes']('BNB/'+config['basecoin']))_0x4c56b8[_0x501e38(0x100)](_0x501e38(0x1e2)+config['basecoin']);}loadCoins(_0x4c56b8),_0x4c56b8=validateSymbols(_0x4c56b8);const _0x4e09b2=async _0x149cc0=>{const _0x17b01c=_0x501e38;let _0x2cb7a8;try{const _0x31411c=await getTickers(_0x149cc0);Object[_0x17b01c(0x137)](_0x31411c)[_0x17b01c(0x15a)](_0x274fe=>{const _0x1421cf=_0x17b01c;_0x2cb7a8=_0x274fe[0x1][_0x1421cf(0xf6)],global[_0x1421cf(0x1ba)][noslash(_0x2cb7a8)]=_0x274fe[0x1]['last'],global[_0x1421cf(0x1a9)][_0x2cb7a8]=_0x274fe[0x1][_0x1421cf(0x25b)];});}catch(_0x235ef6){await handleError(_0x235ef6,_0x17b01c(0xe2),_0x2cb7a8);}},_0x4f13b3=async _0x495daa=>{const _0x15c16b=_0x501e38;while(initCycle==_0x3128d1){if(!botPaused)try{const _0x209ba1=await exchange['watchTrades'](_0x495daa);global[_0x15c16b(0x1ba)][noslash(_0x209ba1[0x0]['symbol'])]=_0x209ba1[0x0][_0x15c16b(0xe1)],await sleep(0x3e8);}catch(_0x264ded){if(!exchangeStopped)await handleError(_0x264ded,_0x15c16b(0x1f2),_0x495daa);}else await sleep(0x64);}},_0x3e4322=async _0x19f60b=>{const _0x3ef84d=_0x501e38;while(initCycle==_0x3128d1){if(!botPaused){let _0x4361ff;try{await sleep(0x3c*0x3e8);const _0x5e6d82=await getTickers(_0x19f60b);Object[_0x3ef84d(0x137)](_0x5e6d82)[_0x3ef84d(0x15a)](_0x5e8c37=>{const _0xd870a=_0x3ef84d;_0x4361ff=_0x5e8c37[0x1]['symbol'],global[_0xd870a(0x1a9)][_0x4361ff]=_0x5e8c37[0x1]['percentage'];});}catch(_0x2ae5d6){if(!exchangeStopped)await handleError(_0x2ae5d6,'fetchTickers()',_0x4361ff);}}else await sleep(0x64);}},_0x37a3d6=async _0x302813=>{const _0x23a864=_0x501e38;while(initCycle==_0x3128d1){if(!botPaused)try{const _0x15c3a3=await exchange[_0x23a864(0x25a)](_0x302813);initCycle==_0x3128d1&&_0x15c3a3[_0x23a864(0x15a)](_0x560f77=>{updateNumberCoinsCcxt(_0x560f77);});}catch(_0x777f8f){if(!exchangeStopped)await handleError(_0x777f8f,_0x23a864(0x1b3));}else await sleep(0x64);}};_0x4e09b2(_0x4c56b8),_0x3e4322(_0x4c56b8),_0x4c56b8[_0x501e38(0x15a)](_0xea913d=>{_0x4f13b3(_0xea913d),_0x37a3d6(_0xea913d);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2ddbcb){const _0x17fe9a=_0x435db0;let _0x3dab0d={};try{if(config['exchange']!=_0x17fe9a(0x1e4))_0x3dab0d=await exchange[_0x17fe9a(0x18a)](_0x2ddbcb);else for(const _0xf3cd0e of _0x2ddbcb){const _0x3bc39f=await exchange[_0x17fe9a(0x22d)](_0xf3cd0e);_0x3dab0d[_0xf3cd0e]=_0x3bc39f;}return _0x3dab0d;}catch(_0x43e554){throw _0x43e554;}}async function watchTransactions(){const _0x36a45d=_0x435db0;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3f7872=await getCoins(),[_0x323451,_0x55c1cf]=_0x3f7872;let _0xadba4a=[];currentCoins['forEach'](_0x570668=>{const _0x4a6d76=_0x4216,_0x417954=_0x323451[_0x4a6d76(0x11d)](_0x134930=>_0x134930['coin']==_0x570668[_0x4a6d76(0x1c2)]);if(_0x417954){if(_0x570668[_0x4a6d76(0x10e)]!=_0x417954[_0x4a6d76(0x10e)]){let _0x44001e;if(_0x570668[_0x4a6d76(0x1c2)]!=config[_0x4a6d76(0xc5)]){const _0xf33548=global['ticker'][noslash(_0x570668[_0x4a6d76(0xf6)])];_0x44001e=_0x570668[_0x4a6d76(0x190)]?0x1/_0xf33548:_0xf33548;}else _0x44001e=0x1;_0xadba4a[_0x4a6d76(0x100)]({'coin':_0x570668[_0x4a6d76(0x1c2)],'symbol':_0x570668[_0x4a6d76(0xf6)],'price':_0x44001e,'number':Number(formatResult(_0x417954['number']-_0x570668[_0x4a6d76(0x10e)],0x8)),'basecoinvalue':_0x44001e*(_0x417954[_0x4a6d76(0x10e)]-_0x570668['number'])});}}});if(_0xadba4a[_0x36a45d(0x218)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x36a45d(0x221)](_0x36a45d(0x17f)+_0xadba4a[0x0][_0x36a45d(0x20c)]+_0x36a45d(0x1c0)+lastFees[_0x36a45d(0x23d)]);if(lastFees[_0x36a45d(0x23d)]==0x0||Math[_0x36a45d(0x254)](_0xadba4a[0x0][_0x36a45d(0x20c)])>lastFees[_0x36a45d(0x23d)]){delete _0xadba4a[0x0][_0x36a45d(0xf6)],delete _0xadba4a[0x0]['basecoinvalue'];let _0x4bdbae=[],_0x49e444=[...config[_0x36a45d(0x1ee)]]||[],_0x3171ce=config[_0x36a45d(0x1ee)];_0x49e444[_0x36a45d(0x13b)]((_0x4c7fe6,_0x1ca78d)=>_0x4c7fe6['date']>_0x1ca78d[_0x36a45d(0xc8)]?-0x1:_0x1ca78d[_0x36a45d(0xc8)]>_0x4c7fe6[_0x36a45d(0xc8)]?0x1:0x0);const _0x4983f4=getDate();if(_0x49e444[0x0]){const _0x23b68e=fns[_0x36a45d(0x1e7)](_0x49e444[0x0][_0x36a45d(0xc8)],_0x36a45d(0xd2),new Date()),_0x4a8743=fns['parse'](_0x4983f4,_0x36a45d(0xd2),new Date());if(fns['isEqual'](_0x23b68e,_0x4a8743)){_0x4bdbae=_0x49e444[0x0][_0x36a45d(0xce)];const _0x37641=_0x4bdbae[_0x36a45d(0x11d)](_0x224930=>_0x224930[_0x36a45d(0x1c2)]==_0xadba4a[0x0][_0x36a45d(0x1c2)]);_0x37641?(_0x37641['number']+=_0xadba4a[0x0][_0x36a45d(0x10e)],_0x37641['number']==0x0&&(_0x4bdbae=_0x4bdbae[_0x36a45d(0xc3)](_0x49bdeb=>{const _0x5a7d3b=_0x36a45d;return _0x49bdeb[_0x5a7d3b(0x1c2)]!=_0xadba4a[0x0][_0x5a7d3b(0x1c2)];}))):_0x4bdbae[_0x36a45d(0x100)](_0xadba4a[0x0]);const _0x337587=_0x3171ce[_0x36a45d(0x11d)](_0x5e092c=>_0x5e092c[_0x36a45d(0xc8)]==_0x4983f4);_0x337587[_0x36a45d(0xce)]=_0x4bdbae;}else _0x3171ce[_0x36a45d(0x100)]({'date':_0x4983f4,'changes':[_0xadba4a[0x0]]});}const _0xad71ab=_0x3171ce[_0x36a45d(0x11d)](_0x3972a3=>_0x3972a3[_0x36a45d(0xc8)]==_0x4983f4);if(_0xad71ab){let _0x110ad7=!![];_0xad71ab[_0x36a45d(0xce)][_0x36a45d(0x15a)](_0xab5be=>{const _0x580199=_0x36a45d;if(_0xab5be[_0x580199(0x10e)]!=0x0)_0x110ad7=![];}),_0x110ad7&&(_0x3171ce=_0x3171ce[_0x36a45d(0xc3)](_0x4104e9=>{const _0x440786=_0x36a45d;return _0x4104e9[_0x440786(0xc8)]!=_0x4983f4;}));}let _0x55248d=dbConfig[_0x36a45d(0xd4)](_0x36a45d(0x131))[_0x36a45d(0x11d)]({'botID':botID})['value']();_0x55248d&&(dbConfig['get']('bot')[_0x36a45d(0x11d)]({'botID':botID})[_0x36a45d(0x22f)]({'liquidity':_0x3171ce})[_0x36a45d(0xbf)](),config[_0x36a45d(0x1ee)]=_0x3171ce),logHistory('success',_0x36a45d(0x20f)+Math[_0x36a45d(0x254)](_0xadba4a[0x0][_0x36a45d(0x10e)])+'\x20'+_0xadba4a[0x0][_0x36a45d(0x1c2)]+'\x20'+(_0xadba4a[0x0][_0x36a45d(0x10e)]>0x0?_0x36a45d(0x136):'removed')+_0x36a45d(0x200)),proxyEmit(_0x36a45d(0xeb),emittedConfiguration());}else logger[_0x36a45d(0x221)](_0x36a45d(0x21d)+Math[_0x36a45d(0x254)](_0xadba4a[0x0][_0x36a45d(0x10e)])+'\x20'+_0xadba4a[0x0][_0x36a45d(0x1c2)]+'\x20'+(_0xadba4a[0x0][_0x36a45d(0x10e)]>0x0?_0x36a45d(0x136):_0x36a45d(0x23a)));transactionDetected=!![];}else logger[_0x36a45d(0x221)]('Portfolio\x20change\x20detected:\x20'+Math[_0x36a45d(0x254)](_0xadba4a[0x0][_0x36a45d(0x10e)])+'\x20'+_0xadba4a[0x0][_0x36a45d(0x1c2)]+'\x20'+(_0xadba4a[0x0][_0x36a45d(0x10e)]>0x0?_0x36a45d(0x136):_0x36a45d(0x23a))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x323451,currentCoinsAll=_0x55c1cf,await sleep(watchTransactionsInterval);}catch(_0x3453dd){if(!exchangeStopped)await handleError(_0x3453dd,_0x36a45d(0x124));}else await sleep(0x64);}}async function loadSymbols(){const _0x29de61=_0x435db0;try{markets=await exchange[_0x29de61(0x245)](),allSymbols=[],Object[_0x29de61(0x137)](markets)[_0x29de61(0x15a)](_0x558fd4=>{const _0x2e78e7=_0x29de61;_0x558fd4[0x1][_0x2e78e7(0x149)]&&_0x558fd4[0x1][_0x2e78e7(0x1ff)]&&allSymbols[_0x2e78e7(0x100)](_0x558fd4[0x0]);});}catch(_0x492ccb){throw _0x492ccb;}}function validateSymbols(_0x1a3757){let _0x40e703=[];return _0x1a3757['forEach'](_0x311998=>{const _0x34b1b2=_0x4216;!allSymbols[_0x34b1b2(0x251)](_0x311998)?logHistory('error',_0x34b1b2(0x1f5)+_0x311998+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x40e703[_0x34b1b2(0x100)](_0x311998);}),_0x40e703;}async function initclient(){const _0x42d9ca=_0x435db0;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x42d9ca(0x24f),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x42d9ca(0x139),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x507819=getNormalizedPerformance();emitPerformance(_0x507819),getStartingBalances(_0x507819);}async function toggleBotMode(){const _0x7d044b=_0x435db0;let _0x39c8a8=dbConfig['get'](_0x7d044b(0x131))[_0x7d044b(0x11d)]({'botID':botID})[_0x7d044b(0x11f)]();if(_0x39c8a8){const _0x4915d2=!_0x39c8a8[_0x7d044b(0x196)];dbConfig[_0x7d044b(0xd4)](_0x7d044b(0x131))[_0x7d044b(0x11d)]({'botID':botID})[_0x7d044b(0x22f)]({'headless':_0x4915d2})[_0x7d044b(0xbf)](),config[_0x7d044b(0x196)]=_0x4915d2,proxyEmit(_0x7d044b(0xeb),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4addf7=_0x435db0;process['send']({'updatebotmanager':!![]},_0x7014f5=>{}),logger['debug'](_0x4addf7(0x12f)+config['headless']);}async function loadCoins(_0x380d4f){const _0x167566=_0x435db0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3c5b08,_0x20969b=0x0,_0xefb86c=0x0;_0x380d4f[_0x167566(0x15a)](_0x2afb97=>{const _0x432fb7=_0x167566;loading[_0x432fb7(0x18c)][_0x432fb7(0x100)](_0x2afb97);}),loadingCanceled=![];let _0x58041e=![];while(_0x3c5b08!=_0x380d4f[_0x167566(0x218)]+maxLoadingProgress){_0x3c5b08=loadingProgress,_0x380d4f[_0x167566(0x15a)](_0x2084a9=>{const _0x4f19c0=_0x167566;if(global[_0x4f19c0(0x1ba)][noslash(_0x2084a9)]){loading[_0x4f19c0(0x18c)]=loading['remainingSymbols'][_0x4f19c0(0xc3)](_0x236d02=>_0x236d02!=_0x2084a9);if(!watchedSymbols['includes'](_0x2084a9))watchedSymbols[_0x4f19c0(0x100)](_0x2084a9);_0x3c5b08++;}}),loading['progress']=Math[_0x167566(0x12b)](_0x3c5b08/(_0x380d4f[_0x167566(0x218)]+maxLoadingProgress)*0x64);loading[_0x167566(0x1c4)]!=0x64&&(_0xefb86c>0x1e*0x5&&(loading[_0x167566(0x253)]=!![],emitLoadingProgress()),_0xefb86c>0x78*0x5&&!_0x58041e&&(_0x58041e=!![],logHistory('error',_0x167566(0x1a3)+loading[_0x167566(0x18c)][_0x167566(0x24b)](',\x20')+_0x167566(0x182)),logHistory(_0x167566(0x126),_0x167566(0x202)+loadCoinsRetryInterval/0xea60+_0x167566(0xda)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x306447=_0x167566;process[_0x306447(0x159)]({'stop':'restart'},_0x478af0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x167566(0xcb)]=!![],emitLoadingProgress();break;}else _0x20969b!=loading[_0x167566(0x1c4)]&&(_0x20969b=loading['progress'],emitLoadingProgress()),_0xefb86c++,await sleep(0xc8);}_0x3c5b08==_0x380d4f[_0x167566(0x218)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x167566(0x159)]({'status':_0x167566(0x1e1),'live':_0x167566(0x258)},_0x508478=>{}),_0x58041e&&logHistory('success',_0x167566(0x169)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x25be73=_0x435db0;proxyEmit(_0x25be73(0xeb),{...emittedConfiguration(),'configstate':_0x25be73(0x1cc)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x4bf916=_0x435db0;let _0x5316d6=global[_0x4bf916(0x1ba)][stablecoins[_0x4bf916(0x1a1)]['coin']],_0x34d062=global[_0x4bf916(0x1ba)][stablecoins['usd']['coin']];return{'eur':Number(_0x5316d6),'usd':Number(_0x34d062)};}function capitalize(_0x11da13){const _0x1d4fb3=_0x435db0;return _0x11da13[_0x1d4fb3(0x111)](0x0,0x1)[_0x1d4fb3(0x234)]()+_0x11da13['substring'](0x1);}function supportedExchanges(){const _0x582532=_0x435db0,_0x2abe6d=['ws',_0x582532(0x18a),'fetchTicker','watchTrades',_0x582532(0x25a),_0x582532(0x229),_0x582532(0x10d),_0x582532(0x143),_0x582532(0x210),_0x582532(0x1df)];let _0xd609be=[],_0x5b9983=[],_0x5ea974=ccxt[_0x582532(0x1fd)][_0x582532(0x24f)];_0x5ea974[_0x582532(0x15a)](_0x20d7dd=>{try{const _0x5067aa=new ccxt['pro'][_0x20d7dd]();_0x5b9983['push'](_0x5067aa);}catch(_0xeee3a3){}}),_0x5b9983['forEach'](_0x2b0c54=>{const _0x5c8ae6=_0x582532;let _0xc693ab=0x0;_0x2abe6d[_0x5c8ae6(0x15a)](_0x2c6fd4=>{const _0x35ba77=_0x5c8ae6;_0x2c6fd4 in _0x2b0c54[_0x35ba77(0x158)]&&_0x2b0c54['has'][_0x2c6fd4]&&_0xc693ab++;}),_0xc693ab==_0x2abe6d['length']&&_0xd609be[_0x5c8ae6(0x100)](capitalize(_0x2b0c54['id']));});let _0x5523ea=[];return _0x5ea974[_0x582532(0x15a)](_0x471cd6=>{const _0x4f1c4a=_0x582532;_0x471cd6=capitalize(_0x471cd6);if(!_0xd609be[_0x4f1c4a(0x251)](_0x471cd6))_0x5523ea[_0x4f1c4a(0x100)](_0x471cd6);}),_0xd609be;}function setStartDatePerformance(){const _0x1a402c=_0x435db0;if(config&&config['liquidity'][0x0][_0x1a402c(0xce)]['length']!=0x0){const _0x3a20e6=config['liquidity'][0x0][_0x1a402c(0xce)];dbPerformance[_0x1a402c(0xd4)](_0x1a402c(0x20b))['find']({'date':config[_0x1a402c(0x17d)]})[_0x1a402c(0x22f)]({'coins':_0x3a20e6})['write']();}}async function recreateCoinResults(){const _0x415847=_0x435db0;let _0x19372f,_0x4bc3ca=[];try{const _0x50ffb4=fns[_0x415847(0x1cf)](fns[_0x415847(0xfe)](config[_0x415847(0x17d)][_0x415847(0x122)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x3e84ed of currentCoins){if(_0x3e84ed[_0x415847(0x1c2)]!=config[_0x415847(0xc5)]){let _0x124932=0x0,_0x1ea747,_0xb9b346;_0x19372f=await getAllEventOrders(_0x3e84ed[_0x415847(0xf6)]);if(_0x19372f[_0x415847(0x218)]>0x0)_0x19372f[_0x415847(0x15a)](_0x27ada3=>{const _0x18d029=_0x415847,_0x5d5ea7=_0x3e84ed[_0x18d029(0xf6)][_0x18d029(0x251)](config[_0x18d029(0xc5)]+'/');_0x4bc3ca['push']({'datetime':_0x27ada3[_0x18d029(0x11b)],'coin':_0x3e84ed[_0x18d029(0x1c2)],'symbol':_0x3e84ed['symbol'],'side':_0x27ada3[_0x18d029(0x1bf)],'reverse':_0x5d5ea7,'amount':formatResult(_0x27ada3['filled'],0x8),'filled':formatResult(_0x27ada3[_0x18d029(0x157)],0x8),'price':formatResult(_0x27ada3['price'],0x8)}),_0x124932=_0x27ada3['side']=='buy'?_0x124932+_0x27ada3[_0x18d029(0x157)]:_0x124932-_0x27ada3[_0x18d029(0x157)];if(!_0xb9b346)_0xb9b346=_0x27ada3['price'];});_0x1ea747=_0x3e84ed[_0x415847(0x10e)]-_0x124932;let _0x164cb4;config[_0x415847(0x1ee)][_0x415847(0x15a)](_0x70bc27=>{const _0x5e929e=_0x415847;!_0x164cb4&&(_0x164cb4=_0x70bc27[_0x5e929e(0xce)][_0x5e929e(0x11d)](_0x4df18d=>_0x4df18d[_0x5e929e(0x1c2)]==_0x3e84ed['coin']),_0x164cb4&&(_0x1ea747=_0x164cb4['number'],_0xb9b346=_0x164cb4[_0x5e929e(0xe1)]));});let _0x319272=dbCoinResults[_0x415847(0xd4)](_0x415847(0x21f))[_0x415847(0x11d)]({'coin':_0x3e84ed[_0x415847(0x1c2)]})[_0x415847(0x11f)]();_0x319272={'coin':_0x3e84ed['coin'],'number':_0x1ea747,'breakeven':_0xb9b346,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x415847(0x21f))[_0x415847(0x11d)]({'coin':_0x3e84ed['coin']})['assign'](_0x319272)[_0x415847(0xbf)]();}}_0x4bc3ca['sort']((_0x1244d0,_0x4a098c)=>_0x1244d0['datetime']>_0x4a098c[_0x415847(0x11b)]?0x1:_0x4a098c[_0x415847(0x11b)]>_0x1244d0[_0x415847(0x11b)]?-0x1:0x0);let _0x36af48=0x0;for(let _0x131333 of _0x4bc3ca){await updateCoinResults(_0x131333,!![]);}}catch(_0x350eb2){await handleError(_0x350eb2,_0x415847(0x247));}}async function getAllEventOrders(_0x443042){const _0x26bc28=_0x435db0;let _0x3213c8=[],_0x4ee094=dbLogs['get'](_0x26bc28(0x176))['filter'](_0x45e7a2=>{const _0x384cd1=_0x26bc28,_0xca5fa1=_0x45e7a2[_0x384cd1(0x174)]['toLowerCase']();return _0xca5fa1[_0x384cd1(0x251)](_0x443042['toLowerCase']())&&(_0xca5fa1[_0x384cd1(0x251)](_0x384cd1(0xcf))&&_0xca5fa1[_0x384cd1(0x251)](_0x384cd1(0x125))||_0xca5fa1['includes'](_0x384cd1(0x157))&&_0xca5fa1[_0x384cd1(0x251)](_0x384cd1(0x125)));})[_0x26bc28(0x1d7)]('time')['value']();return _0x4ee094[_0x26bc28(0x15a)](_0x2d75e6=>{const _0x4d37e3=_0x26bc28,_0x16cc77=_0x2d75e6[_0x4d37e3(0x174)][_0x4d37e3(0x251)](_0x4d37e3(0x1a0))?_0x4d37e3(0x1a0):_0x4d37e3(0xdc),_0x4ce2be=/#([0-9]|\.)+\s/i,_0x522046=Number(_0x4ce2be[_0x4d37e3(0x185)](_0x2d75e6[_0x4d37e3(0x174)])[0x0][_0x4d37e3(0x19c)](0x1)),_0x313d5f=/@([0-9]|\.)+$/i,_0xa6399d=Number(_0x313d5f[_0x4d37e3(0x185)](_0x2d75e6[_0x4d37e3(0x174)])[0x0][_0x4d37e3(0x19c)](0x1));_0x3213c8[_0x4d37e3(0x100)]({'datetime':_0x2d75e6[_0x4d37e3(0xf0)],'coin':symbolToCoin(_0x443042),'symbol':_0x443042,'side':_0x16cc77,'amount':_0x522046,'filled':_0x522046,'price':_0xa6399d});}),_0x3213c8;}async function getAllOrders(_0x9ee50b,_0x247692){const _0x557e28=_0x435db0;let _0x319b5b=[];while(_0x247692<exchange[_0x557e28(0x15e)]()){const _0x2ce811=0x1f4;try{const _0x1beaa2=await exchange['fetchClosedOrders'](_0x9ee50b,_0x247692,_0x2ce811);if(_0x1beaa2[_0x557e28(0x218)])_0x247692=_0x1beaa2[_0x1beaa2[_0x557e28(0x218)]-0x1][_0x557e28(0x1db)]+0x1,_0x319b5b=_0x319b5b[_0x557e28(0xca)](_0x1beaa2);else break;}catch(_0x13a68c){await handleError(_0x13a68c,_0x557e28(0x1c8),_0x9ee50b);}}return _0x319b5b;}async function validate24hChanges(){const _0x2c7c41=_0x435db0;for(const _0x4149f7 of currentCoins){if(_0x4149f7[_0x2c7c41(0x1c2)]!=config[_0x2c7c41(0xc5)]){let _0x605c8a;_0x4149f7[_0x2c7c41(0x190)]?_0x605c8a=formatResult((0x1/(global[_0x2c7c41(0x1a9)][noslash(_0x4149f7[_0x2c7c41(0xf6)])]/0x64+0x1)-0x1)*0x64,0x3):_0x605c8a=global['change'][noslash(_0x4149f7['symbol'])],_0x605c8a<config['change24h']&&(logHistory(_0x2c7c41(0x126),_0x4149f7[_0x2c7c41(0x1c2)]+_0x2c7c41(0xc2)+_0x605c8a+'%'),logHistory(_0x2c7c41(0x126),_0x2c7c41(0x208)),logHistory(_0x2c7c41(0x126),_0x2c7c41(0x1f9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3ddf4a,_0x24677c){const _0x3c61f6=_0x435db0;if(!_0x3ddf4a)return!![];const _0x50db19=_0x24677c[_0x3c61f6(0x20e)]('.'),_0x46c48b=_0x3ddf4a[_0x3c61f6(0x20e)]('.');for(var _0x5a24b9=0x0;_0x5a24b9<_0x46c48b[_0x3c61f6(0x218)];_0x5a24b9++){const _0xc772fc=~~_0x46c48b[_0x5a24b9],_0x573663=~~_0x50db19[_0x5a24b9];if(_0xc772fc<_0x573663)return!![];if(_0xc772fc>_0x573663)return![];}return![];}async function oneTimeMigration(){const _0x5aa2a9=_0x435db0;let _0x4b2fde=dbLogs[_0x5aa2a9(0xd4)](_0x5aa2a9(0x207))[_0x5aa2a9(0x11f)]();if(isOlderVersion(_0x4b2fde,_0x5aa2a9(0x162))){let _0x2efeab=[];const _0x3feefd=dbLogs[_0x5aa2a9(0xd4)]('logs')[_0x5aa2a9(0x11f)]();_0x3feefd[_0x5aa2a9(0x15a)](_0x403f49=>{const _0x64847b=_0x5aa2a9;_0x2efeab[_0x64847b(0x100)]({'time':_0x403f49[_0x64847b(0xf0)],'type':_0x403f49['type'],'event':_0x403f49[_0x64847b(0x174)]});}),dbLogs['get'](_0x5aa2a9(0x176))[_0x5aa2a9(0x22f)](_0x2efeab)[_0x5aa2a9(0xbf)]();}let _0x4ff9f4=dbConfig['get'](_0x5aa2a9(0x207))[_0x5aa2a9(0x11f)]();if(isOlderVersion(_0x4ff9f4,'2.3.5')){let _0x2b2b48=dbConfig[_0x5aa2a9(0xd4)](_0x5aa2a9(0x131))[_0x5aa2a9(0x11d)]({'botID':botID})[_0x5aa2a9(0x11f)]();if(_0x2b2b48){let _0x2c201d=[];_0x2b2b48[_0x5aa2a9(0x109)][_0x5aa2a9(0x15a)](_0x2b3746=>{const _0x1b4501=_0x5aa2a9;_0x2c201d[_0x1b4501(0x100)]({'coin':_0x2b3746['coin'],'number':_0x2b3746[_0x1b4501(0x1b2)],'price':_0x2b3746[_0x1b4501(0x23b)]}),delete _0x2b3746['startnumber'],delete _0x2b3746[_0x1b4501(0x23b)];});if(_0x2c201d[_0x5aa2a9(0x218)]!==0x0)fs[_0x5aa2a9(0x101)](configbackuppath+(_0x5aa2a9(0xf1)+botID+_0x5aa2a9(0xbc)),JSON['stringify'](_0x2c201d,null,0x4),function(_0x4ccff3){if(_0x4ccff3){}});const _0x1e95f0=(_0x110e32,_0x24c9d0)=>{const _0x2ef649=_0x5aa2a9;let _0x37af16=[];_0x24c9d0[_0x2ef649(0x15a)](_0x28d8d5=>{const _0x17560a=_0x2ef649,_0xa5c8e2=_0x110e32[_0x17560a(0x11d)](_0x252f18=>_0x252f18['coin']==_0x28d8d5[_0x17560a(0x1c2)]);if(!_0xa5c8e2)_0x37af16[_0x17560a(0x100)](_0x28d8d5);});let _0x3261da=[];return _0x110e32[_0x2ef649(0x15a)](_0x5719fe=>{const _0x4a88af=_0x2ef649,_0x1e3807=_0x24c9d0[_0x4a88af(0x11d)](_0x10581f=>_0x10581f[_0x4a88af(0x1c2)]==_0x5719fe['coin']);if(!_0x1e3807||_0x1e3807['number']==0x0&&_0x5719fe['number']!=0x0)_0x3261da[_0x4a88af(0x100)](_0x5719fe);}),{'missingDay1':_0x37af16,'notInDay2':_0x3261da};},_0x2bf7a8=dbPerformance[_0x5aa2a9(0xd4)](_0x5aa2a9(0x20b))[_0x5aa2a9(0x1c3)]()['value']();if(_0x2bf7a8[_0x5aa2a9(0x218)]>0x1){const {missingDay1:_0x1aa865,notInDay2:_0x45896e}=_0x1e95f0(_0x2c201d,_0x2bf7a8[0x1][_0x5aa2a9(0x21f)]);_0x2c201d=[..._0x2c201d,..._0x1aa865],_0x45896e[_0x5aa2a9(0x15a)](_0x59fc6b=>{const _0x913db3=_0x5aa2a9;let _0x23c30f=_0x2c201d[_0x913db3(0x180)](_0x54fedd=>_0x54fedd[_0x913db3(0x1c2)]==_0x59fc6b['coin']);_0x23c30f!=-0x1&&_0x2c201d[_0x913db3(0xd3)](_0x23c30f,0x1);});}_0x2c201d[_0x5aa2a9(0x13b)]((_0x4c775f,_0x54f2f9)=>_0x4c775f[_0x5aa2a9(0x1c2)]>_0x54f2f9['coin']?0x1:_0x54f2f9['coin']>_0x4c775f[_0x5aa2a9(0x1c2)]?-0x1:0x0);let _0x33daa6=[{'date':_0x2b2b48[_0x5aa2a9(0x17d)],'changes':_0x2c201d}];_0x2bf7a8[_0x5aa2a9(0x218)]>0x2&&_0x2bf7a8[_0x5aa2a9(0x15a)]((_0x27f080,_0xe92064)=>{const _0x2ae97c=_0x5aa2a9;if(_0xe92064>0x0&&_0xe92064<_0x2bf7a8[_0x2ae97c(0x218)]-0x1){const {missingDay1:_0x2d936e,notInDay2:_0x1ac648}=_0x1e95f0(_0x2bf7a8[_0xe92064]['coins'],_0x2bf7a8[_0xe92064+0x1]['coins']);_0x2c201d=[],(_0x2d936e[_0x2ae97c(0x218)]!=0x0||_0x1ac648[_0x2ae97c(0x218)]!=0x0)&&(_0x2d936e[_0x2ae97c(0x218)]!=0x0&&_0x2c201d[_0x2ae97c(0x100)](..._0x2d936e),_0x1ac648[_0x2ae97c(0x218)]!=0x0&&(_0x1ac648[_0x2ae97c(0x15a)](_0x674847=>{const _0x482fb3=_0x2ae97c;_0x674847[_0x482fb3(0x10e)]=-_0x674847[_0x482fb3(0x10e)];}),_0x2c201d[_0x2ae97c(0x100)](..._0x1ac648)),_0x2c201d['sort']((_0x3370b0,_0x379c30)=>_0x3370b0[_0x2ae97c(0x1c2)]>_0x379c30[_0x2ae97c(0x1c2)]?0x1:_0x379c30[_0x2ae97c(0x1c2)]>_0x3370b0['coin']?-0x1:0x0),_0x33daa6['push']({'date':_0x2bf7a8[_0xe92064+0x1][_0x2ae97c(0xc8)],'changes':_0x2c201d}));}}),dbConfig[_0x5aa2a9(0xd4)]('bot')['find']({'botID':botID})['assign']({..._0x2b2b48,'liquidity':_0x33daa6})[_0x5aa2a9(0xbf)]();}}if(isOlderVersion(_0x4ff9f4,_0x5aa2a9(0x133))){let _0x266b86=dbConfig['get'](_0x5aa2a9(0x131))[_0x5aa2a9(0x11d)]({'botID':botID})[_0x5aa2a9(0x11f)]();if(_0x266b86){const _0x111c3c=_0x266b86[_0x5aa2a9(0x112)],_0x20f8a6=_0x111c3c?capitalize(_0x111c3c):_0x5aa2a9(0x1d9);dbConfig[_0x5aa2a9(0xd4)](_0x5aa2a9(0x131))[_0x5aa2a9(0x11d)]({'botID':botID})[_0x5aa2a9(0x22f)]({'exchange':_0x20f8a6})[_0x5aa2a9(0xbf)]();}}let _0x23674a=dbPerformance['get'](_0x5aa2a9(0x207))[_0x5aa2a9(0x11f)]();isOlderVersion(_0x23674a,_0x5aa2a9(0x162))&&setStartDatePerformance();let _0x4c6701=dbCoinResults[_0x5aa2a9(0xd4)](_0x5aa2a9(0x207))[_0x5aa2a9(0x11f)]();if(isOlderVersion(_0x4c6701,_0x5aa2a9(0xea))){let _0x349673=dbCoinResults[_0x5aa2a9(0xd4)](_0x5aa2a9(0x21f))[_0x5aa2a9(0x11f)]();if(_0x349673['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x32d0e5=_0x435db0;dbConfig['set'](_0x32d0e5(0x207),serverversion)[_0x32d0e5(0xbf)](),dbPerformance[_0x32d0e5(0x16d)](_0x32d0e5(0x207),serverversion)[_0x32d0e5(0xbf)](),dbLogs[_0x32d0e5(0x16d)]('version',serverversion)[_0x32d0e5(0xbf)](),dbCoinResults['set'](_0x32d0e5(0x207),serverversion)[_0x32d0e5(0xbf)]();}function getConfiguration(_0x333c14){const _0x3b771c=_0x435db0;let _0x517c1f=dbConfig['get']('bot')[_0x3b771c(0x11d)]({'botID':_0x333c14})[_0x3b771c(0x11f)]();if(_0x517c1f){let _0x3e8f75=![];typeof _0x517c1f[_0x3b771c(0x14d)]==_0x3b771c(0x195)&&(_0x517c1f={..._0x517c1f,'threshold':Number(_0x517c1f['threshold'])},_0x3e8f75=!![]),_0x517c1f[_0x3b771c(0x1af)]==undefined&&(_0x517c1f={..._0x517c1f,'change24h':-0x14},_0x3e8f75=!![]),_0x517c1f['fiat']==undefined&&(_0x517c1f={..._0x517c1f,'fiat':'USD'},_0x3e8f75=!![]),_0x517c1f['onepagemode']==undefined&&(_0x517c1f={..._0x517c1f,'onepagemode':settings[_0x3b771c(0x16b)]},_0x3e8f75=!![]),_0x517c1f['colorscheme']==undefined&&(_0x517c1f={..._0x517c1f,'colorscheme':_0x3b771c(0x11e)},_0x3e8f75=!![]),_0x517c1f[_0x3b771c(0x1fe)]==undefined&&(_0x517c1f={..._0x517c1f,'autoliquidity':!![]},_0x3e8f75=!![]),_0x3e8f75&&(_0x517c1f={'botID':_0x517c1f['botID'],'exchange':_0x517c1f['exchange'],'apiKey':_0x517c1f[_0x3b771c(0xf4)],'apiSecret':_0x517c1f[_0x3b771c(0x1eb)],'apiPassword':_0x517c1f[_0x3b771c(0xc6)],'basecoin':_0x517c1f['basecoin'],'botname':_0x517c1f[_0x3b771c(0x13d)],'showname':_0x517c1f[_0x3b771c(0x24a)],'threshold':_0x517c1f[_0x3b771c(0x14d)],'ordertype':_0x517c1f[_0x3b771c(0x233)],'timeout':_0x517c1f[_0x3b771c(0x253)],'fiat':_0x517c1f[_0x3b771c(0x132)],'startdate':_0x517c1f[_0x3b771c(0x17d)],'recreate':_0x517c1f[_0x3b771c(0x123)],'timeshift':_0x517c1f[_0x3b771c(0x141)],'onepagemode':_0x517c1f[_0x3b771c(0x16b)],'headless':_0x517c1f['headless'],'cooldown':_0x517c1f[_0x3b771c(0x1b5)],'change24h':_0x517c1f[_0x3b771c(0x1af)],'emojibuy':_0x517c1f[_0x3b771c(0x244)],'emojisell':_0x517c1f[_0x3b771c(0x1c6)],'colorscheme':_0x517c1f[_0x3b771c(0xf9)],'portfolio':_0x517c1f[_0x3b771c(0x109)],'autoliquidity':_0x517c1f['autoliquidity'],'liquidity':_0x517c1f['liquidity'],'openOrders':_0x517c1f['openOrders']},dbConfig[_0x3b771c(0xd4)](_0x3b771c(0x131))[_0x3b771c(0x223)]()['write'](),dbConfig[_0x3b771c(0xd4)](_0x3b771c(0x131))[_0x3b771c(0x100)](_0x517c1f)[_0x3b771c(0xbf)]());}else _0x517c1f={'botID':_0x333c14,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x333c14,'showname':![],'threshold':0x3,'ordertype':_0x3b771c(0xcf),'timeout':0x14,'fiat':_0x3b771c(0x127),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3b771c(0x141)],'onepagemode':settings[_0x3b771c(0x16b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x517c1f;}function emittedConfiguration(){const _0x169fb2=_0x435db0;let _0x492431;if(config[_0x169fb2(0xf4)]=='')_0x492431={...config,'configstate':_0x169fb2(0x19e)};else config[_0x169fb2(0xf4)]==_0x169fb2(0x217)?_0x492431={...config,'configstate':_0x169fb2(0x1aa)}:(_0x492431={...config,'apiKey':_0x169fb2(0x17b),'apiSecret':'************'},config['apiPassword']&&(_0x492431[_0x169fb2(0xc6)]=_0x169fb2(0x17b)));return _0x492431;}function getSettings(){const _0x36af75=_0x435db0;return dbSettings[_0x36af75(0xd4)](_0x36af75(0x1ac))[_0x36af75(0x11f)]();}function getSecure(){const _0x18d0c6=_0x435db0;return dbSecure[_0x18d0c6(0xd4)](_0x18d0c6(0x222))[_0x18d0c6(0x11f)]()||{};}function updateTimeshift(_0x206127){const _0x5ac7d7=_0x435db0;let _0x36370a=dbConfig[_0x5ac7d7(0xd4)](_0x5ac7d7(0x131))['find']({'botID':botID})['value']();_0x36370a&&dbConfig[_0x5ac7d7(0xd4)](_0x5ac7d7(0x131))['find']({'botID':botID})[_0x5ac7d7(0x22f)]({'timeshift':_0x206127})['write'](),config[_0x5ac7d7(0x141)]=_0x206127,proxyEmit(_0x5ac7d7(0xeb),emittedConfiguration());}function updateOnepagemode(_0x337a39){const _0x4df6fb=_0x435db0;let _0x14b23a=dbConfig[_0x4df6fb(0xd4)](_0x4df6fb(0x131))[_0x4df6fb(0x11d)]({'botID':botID})[_0x4df6fb(0x11f)]();_0x14b23a&&dbConfig[_0x4df6fb(0xd4)](_0x4df6fb(0x131))[_0x4df6fb(0x11d)]({'botID':botID})[_0x4df6fb(0x22f)]({'onepagemode':_0x337a39})[_0x4df6fb(0xbf)](),config[_0x4df6fb(0x16b)]=_0x337a39,proxyEmit(_0x4df6fb(0xeb),emittedConfiguration());}async function storeConfiguration(_0xbed5e6){const _0x5b11c7=_0x435db0;logger['debug']('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5b11c7(0x221)](_0x5b11c7(0x1b9));let _0x2baeec=![],_0x2290f9=![],_0x405e82=[];_0xbed5e6[_0x5b11c7(0x109)]['forEach'](_0x5bd6ab=>{const _0x37c1d7=_0x5b11c7;if(!_0x5bd6ab[_0x37c1d7(0x226)]&&_0x5bd6ab[_0x37c1d7(0x1c2)]!=_0xbed5e6[_0x37c1d7(0xc5)])_0x405e82['push'](_0x5bd6ab[_0x37c1d7(0xf6)]);}),_0x405e82[_0x5b11c7(0x15a)](_0xf51f46=>{const _0x4a1538=_0x5b11c7,_0x2a26a1=currentCoins[_0x4a1538(0x11d)](_0x1a662d=>_0x1a662d[_0x4a1538(0xf6)]==_0xf51f46);!_0x2a26a1&&(_0x2baeec=!![]);}),currentCoins[_0x5b11c7(0x15a)](_0x12b58e=>{const _0x89f409=_0x5b11c7;if(_0x12b58e[_0x89f409(0x1c2)]!=config['basecoin']){const _0x55d71d=_0x405e82['find'](_0xafc48e=>_0xafc48e==_0x12b58e[_0x89f409(0xf6)]);!_0x55d71d&&(_0x2baeec=!![]);}}),_0xbed5e6[_0x5b11c7(0x109)]['forEach'](_0x50a72f=>{const _0x496fd1=_0x5b11c7,_0x262657=config[_0x496fd1(0x109)][_0x496fd1(0x11d)](_0x15ee5b=>_0x15ee5b[_0x496fd1(0x1c2)]==_0x50a72f[_0x496fd1(0x1c2)]);if(_0x262657&&_0x50a72f[_0x496fd1(0xbe)]!=_0x262657[_0x496fd1(0xbe)])_0x2290f9=!![];});let _0x2d92a2=dbConfig['get'](_0x5b11c7(0x131))['find']({'botID':botID})[_0x5b11c7(0x11f)]();_0xbed5e6={..._0xbed5e6,'apiKey':crypt[_0x5b11c7(0x18e)](secure['privateKey'],_0xbed5e6['apiKey'])[_0x5b11c7(0x1a5)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0xbed5e6[_0x5b11c7(0x1eb)])['message']};_0xbed5e6[_0x5b11c7(0xc6)]&&(_0xbed5e6[_0x5b11c7(0xc6)]=crypt[_0x5b11c7(0x18e)](secure[_0x5b11c7(0x24c)],_0xbed5e6[_0x5b11c7(0xc6)])[_0x5b11c7(0x1a5)]);let _0x5adfb8=![];if(_0x2d92a2){_0xbed5e6[_0x5b11c7(0xf4)]==_0x5b11c7(0x17b)?_0xbed5e6['apiKey']=config[_0x5b11c7(0xf4)]:_0x5adfb8=!![];_0xbed5e6[_0x5b11c7(0x1eb)]==_0x5b11c7(0x17b)?_0xbed5e6[_0x5b11c7(0x1eb)]=config[_0x5b11c7(0x1eb)]:_0x5adfb8=!![];if(_0xbed5e6[_0x5b11c7(0xc6)]=='************')_0xbed5e6[_0x5b11c7(0xc6)]=config[_0x5b11c7(0xc6)];else{if(_0xbed5e6[_0x5b11c7(0xc6)])_0x5adfb8=!![];}dbConfig[_0x5b11c7(0xd4)](_0x5b11c7(0x131))['find']({'botID':botID})[_0x5b11c7(0x22f)](_0xbed5e6)[_0x5b11c7(0xbf)]();}else dbConfig['get'](_0x5b11c7(0x131))['push'](_0xbed5e6)['write'](),_0x5adfb8=!![],process[_0x5b11c7(0x159)]({'status':'enabled','live':'running'},_0x15bef1=>{});process[_0x5b11c7(0x159)]({'botname':_0xbed5e6[_0x5b11c7(0x13d)]},_0x86c96f=>{}),config={..._0xbed5e6},updateBotManager(),proxyEmit(_0x5b11c7(0x1a6)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5adfb8)await reset(!![]);else _0x2baeec||_0x2290f9?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x5b11c7(0x221)](_0x5b11c7(0x220));}async function storeHeadless(_0x126eea){const _0x3fb3c8=_0x435db0,_0xe40d4d={...config,'headless':_0x126eea[_0x3fb3c8(0x196)]};let _0x34e9fc=dbConfig['get']('bot')[_0x3fb3c8(0x11d)]({'botID':botID})[_0x3fb3c8(0x11f)]();_0x34e9fc&&dbConfig[_0x3fb3c8(0xd4)](_0x3fb3c8(0x131))[_0x3fb3c8(0x11d)]({'botID':botID})[_0x3fb3c8(0x22f)](_0xe40d4d)[_0x3fb3c8(0xbf)](),config={..._0xe40d4d},updateBotManager(),proxyEmit(_0x3fb3c8(0xeb),emittedConfiguration());}async function storeFiat(_0x238502){const _0x5e14e6=_0x435db0,_0x31cb7d={...config,'fiat':_0x238502};let _0x148b4e=dbConfig[_0x5e14e6(0xd4)](_0x5e14e6(0x131))['find']({'botID':botID})[_0x5e14e6(0x11f)]();_0x148b4e&&dbConfig['get'](_0x5e14e6(0x131))[_0x5e14e6(0x11d)]({'botID':botID})[_0x5e14e6(0x22f)](_0x31cb7d)[_0x5e14e6(0xbf)](),config={..._0x31cb7d},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x448c26=_0x435db0;logger[_0x448c26(0x15c)](_0x448c26(0x21b));try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-events.json')))fs[_0x448c26(0x213)](path[_0x448c26(0x24b)](configpath,_0x448c26(0x1d5)+botID+_0x448c26(0x246)));if(fs[_0x448c26(0x135)](path[_0x448c26(0x24b)](configpath,'bot-'+botID+_0x448c26(0x115))))fs['unlinkSync'](path[_0x448c26(0x24b)](configpath,_0x448c26(0x1d5)+botID+_0x448c26(0x115)));if(fs['existsSync'](path['join'](configpath,_0x448c26(0x1d5)+botID+_0x448c26(0xfd))))fs[_0x448c26(0x213)](path[_0x448c26(0x24b)](configpath,_0x448c26(0x1d5)+botID+_0x448c26(0xfd)));}catch(_0x26f765){if(_0x26f765)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x26f765);}const _0x5a184f=getDate();let _0x55318a=[];currentCoins['forEach'](_0x1d7cf2=>{const _0x279bd1=_0x448c26;_0x55318a['push']({'coin':_0x1d7cf2['coin'],'number':_0x1d7cf2[_0x279bd1(0x10e)],'price':_0x1d7cf2[_0x279bd1(0x1e5)]});});let _0x567b1f=dbConfig[_0x448c26(0xd4)](_0x448c26(0x131))['find']({'botID':botID})[_0x448c26(0x11f)]();_0x567b1f&&(dbConfig['get'](_0x448c26(0x131))[_0x448c26(0x11d)]({'botID':botID})[_0x448c26(0x22f)]({'liquidity':[{'date':_0x5a184f,'changes':_0x55318a}]})['write'](),config['liquidity']=[]),process[_0x448c26(0x159)]({'stop':_0x448c26(0x18b)},_0x521c8d=>{});}function noslash(_0x95217a){const _0x396a81=_0x435db0;return _0x95217a[_0x396a81(0x122)]('/','');}function updateHighestFee(_0x4b73e0){const _0x5e659c=_0x435db0;if(_0x4b73e0[_0x5e659c(0x190)]){let _0x261279={'filled':_0x4b73e0[_0x5e659c(0x157)]*_0x4b73e0['price'],'amount':_0x4b73e0[_0x5e659c(0x157)]*_0x4b73e0[_0x5e659c(0xe1)],'side':_0x4b73e0['side']=='sell'?_0x5e659c(0xdc):_0x5e659c(0x1a0),'price':0x1/_0x4b73e0[_0x5e659c(0xe1)]};_0x4b73e0={..._0x4b73e0,..._0x261279};}const _0x24bb6d=defaultFee*_0x4b73e0[_0x5e659c(0x157)]*_0x4b73e0[_0x5e659c(0xe1)];lastFees[_0x5e659c(0xe7)]['length']===0x14&&lastFees[_0x5e659c(0xe7)][_0x5e659c(0x16a)](),lastFees[_0x5e659c(0xe7)][_0x5e659c(0x100)](_0x24bb6d),lastFees[_0x5e659c(0x23d)]=Math['max'](...lastFees[_0x5e659c(0xe7)]);}async function updateNumberCoinsCcxt(_0x6929ab){const _0x5d9df2=_0x435db0;logger['debug'](_0x5d9df2(0x138)+_0x6929ab[_0x5d9df2(0xf6)]+'\x20|\x20'+_0x6929ab['status']+_0x5d9df2(0x194)+_0x6929ab[_0x5d9df2(0x157)]+'\x20/\x20'+_0x6929ab[_0x5d9df2(0x197)]+'\x20|\x20'+_0x6929ab['id']);let _0x55b714=_0x6929ab[_0x5d9df2(0x142)],_0x5debe4=![];currentCoins[_0x5d9df2(0x15a)](_0x31c41f=>{const _0x2098f0=_0x5d9df2;_0x31c41f['symbol']==_0x6929ab[_0x2098f0(0xf6)]&&(_0x5debe4=!![]);});if(!_0x5debe4)return;const _0x412a01=currentCoins[_0x5d9df2(0x11d)](_0x4c79cb=>_0x4c79cb[_0x5d9df2(0xf6)]==_0x6929ab[_0x5d9df2(0xf6)]),_0x219981=_0x5f432c=>{const _0x455e9f=_0x5d9df2;if(_0x412a01)_0x412a01[_0x455e9f(0x14c)]=_0x5f432c;};if(_0x55b714==_0x5d9df2(0x10b))_0x219981(_0x5d9df2(0x10b));else{if(_0x55b714=='canceled'){_0x219981(_0x5d9df2(0xff));const _0xd4638f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd4638f,await getOpenOrders(),handleOpenOrders();}else{if(_0x55b714==_0x5d9df2(0xee)){let _0x480ce1=![];if(lastOrders)for(const _0x5506d4 of lastOrders){const _0x5dcc53=0xc8,_0x203ef4=0x1388;let _0x1103f2=0x0;while(!_0x5506d4[_0x5d9df2(0x147)]&&_0x1103f2*_0x5dcc53<_0x203ef4){_0x1103f2++,await sleep(_0x5dcc53);}if(_0x1103f2>0x0)logger[_0x5d9df2(0x221)](_0x5d9df2(0x201)+_0x1103f2*_0x5dcc53/0x3e8+_0x5d9df2(0x1b1));if(_0x5506d4[_0x5d9df2(0x147)]==_0x6929ab['id']){logger[_0x5d9df2(0x221)](_0x5d9df2(0xdb)+_0x6929ab['id']),_0x480ce1=!![];if(_0x5506d4[_0x5d9df2(0x157)]==0x0){logger[_0x5d9df2(0x221)](_0x5d9df2(0x114)+_0x6929ab['id']);if(_0x6929ab[_0x5d9df2(0xe6)])_0x5506d4['price']=_0x6929ab[_0x5d9df2(0xe6)];else{if(_0x6929ab['price'])_0x5506d4[_0x5d9df2(0xe1)]=_0x6929ab[_0x5d9df2(0xe1)];else{}}_0x5506d4[_0x5d9df2(0x157)]=_0x6929ab[_0x5d9df2(0x157)],updateHighestFee(_0x5506d4),_0x219981('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x1e6571=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1e6571;}_0x5506d4[_0x5d9df2(0x1fa)]={'currency':_0x6929ab[_0x5d9df2(0x1fa)]?_0x6929ab[_0x5d9df2(0x1fa)][_0x5d9df2(0x235)]:null,'cost':_0x6929ab['fee']?_0x6929ab[_0x5d9df2(0x1fa)]['cost']:0x0},await updateCoinResults(_0x5506d4);}}}if(!_0x480ce1){logger[_0x5d9df2(0x221)](_0x5d9df2(0x24e)+_0x6929ab['id']),_0x219981(_0x5d9df2(0x157));const _0x64b627=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x64b627,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x38bed3=JSON[_0x5d9df2(0x1e7)](lastBalances[_0x5d9df2(0x109)]);const _0x415f44=_0x38bed3[_0x5d9df2(0x11d)](_0x480c6f=>_0x480c6f[_0x5d9df2(0xf6)]==_0x6929ab[_0x5d9df2(0xf6)]);if(_0x415f44){if(_0x55b714==_0x5d9df2(0x10b))_0x415f44[_0x5d9df2(0x14c)]=_0x415f44[_0x5d9df2(0x14c)]==_0x5d9df2(0x157)?_0x5d9df2(0x157):_0x5d9df2(0x10b);else{if(_0x55b714=='canceled')_0x415f44[_0x5d9df2(0x14c)]=_0x415f44[_0x5d9df2(0x14c)]=='filled'?_0x5d9df2(0x157):_0x5d9df2(0xff);else _0x55b714==_0x5d9df2(0xee)&&(_0x415f44[_0x5d9df2(0x14c)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x38bed3)},proxyEmit(_0x5d9df2(0x139),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x27ea22=_0x435db0;await getOpenOrders();let _0x1fe999=![];currentCoins[_0x27ea22(0x15a)](_0x45c229=>{const _0x578796=_0x27ea22;_0x1fe999=allOpenOrders[_0x578796(0x11d)](_0x4a3e5c=>_0x4a3e5c[_0x578796(0xf6)]==_0x45c229[_0x578796(0xf6)]),_0x45c229[_0x578796(0x14c)]=_0x1fe999?'open':_0x578796(0x146);});}async function getCoins(_0x418d7e=0x0,_0x463b6e=!![],_0x3a946b=config[_0x435db0(0xc5)]){const _0x566acd=_0x435db0;let _0x16e32c,_0x4f792b=[],_0x51fe39=[],_0x54ede8=[];if(_0x418d7e)await sleep(_0x418d7e);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x16e32c=await exchange[_0x566acd(0x1df)](),mybalances=_0x16e32c[_0x566acd(0x1fb)];for(const [_0x306166,_0x1d0c36]of Object[_0x566acd(0x137)](mybalances)){_0x54ede8[_0x566acd(0x100)](_0x306166);}config['portfolio']['forEach'](_0x411c1d=>{const _0x2cba61=_0x566acd;!_0x54ede8[_0x2cba61(0x251)](_0x411c1d[_0x2cba61(0x1c2)])&&(mybalances[_0x411c1d[_0x2cba61(0x1c2)]]=0x0);});if(_0x3a946b=='')for(const [_0x10ee29,_0x54aa95]of Object['entries'](mybalances)){_0x54aa95!=0x0&&_0x4f792b[_0x566acd(0x100)]({'coin':_0x10ee29});}else{let _0x1be812=![];for(const [_0x21fa7a,_0x289a7f]of Object[_0x566acd(0x137)](mybalances)){const _0x2fea7e=config['portfolio'][_0x566acd(0x11d)](_0x56b774=>_0x56b774[_0x566acd(0x1c2)]==_0x21fa7a),_0x3cf6d9=_0x21fa7a+'/'+_0x3a946b,_0x3156cf=_0x3a946b+'/'+_0x21fa7a,_0x35cba1=currentCoins['find'](_0x9001e2=>_0x9001e2[_0x566acd(0x1c2)]==_0x21fa7a);_0x1be812=![];if((_0x289a7f!=0x0||_0x2fea7e)&&(allSymbols[_0x566acd(0x251)](_0x3cf6d9)||_0x21fa7a==_0x3a946b))_0x4f792b[_0x566acd(0x100)]({'coin':_0x21fa7a,'symbol':_0x3cf6d9,'reverse':![],'number':Math[_0x566acd(0x1d8)](_0x289a7f+(_0x2fea7e&&_0x2fea7e[_0x566acd(0xbe)]||0x0),0x0),'orderstatus':_0x35cba1?_0x35cba1[_0x566acd(0x14c)]:'none'});else{if((_0x289a7f!=0x0||_0x2fea7e)&&allSymbols[_0x566acd(0x251)](_0x3156cf))_0x4f792b[_0x566acd(0x100)]({'coin':_0x21fa7a,'symbol':_0x3156cf,'reverse':!![],'number':Math[_0x566acd(0x1d8)](_0x289a7f+(_0x2fea7e&&_0x2fea7e['offset']||0x0),0x0),'orderstatus':_0x35cba1?_0x35cba1[_0x566acd(0x14c)]:_0x566acd(0x146)});else _0x2fea7e&&_0x4f792b[_0x566acd(0x100)]({'coin':_0x2fea7e[_0x566acd(0x1c2)],'symbol':_0x2fea7e['symbol'],'reverse':_0x2fea7e[_0x566acd(0x190)],'number':0x0,'orderstatus':_0x566acd(0x146)});}}}}catch(_0x30feb5){if(!_0x463b6e)handleErrorNoStop(_0x30feb5,_0x566acd(0x18f));else await handleError(_0x30feb5,_0x566acd(0x18f));}return _0x51fe39=cloneDeep(_0x4f792b),_0x4f792b=_0x4f792b[_0x566acd(0xc3)](_0x6d2d91=>{const _0x3dbb04=_0x566acd,_0x4a7464=config[_0x3dbb04(0x109)][_0x3dbb04(0x11d)](_0x47bbef=>_0x47bbef[_0x3dbb04(0x1c2)]==_0x6d2d91['coin']);return _0x4a7464&&!_0x4a7464[_0x3dbb04(0x226)];}),[_0x4f792b,_0x51fe39];}async function getCoinNumber(_0x1b4509){const _0x1b349d=_0x435db0;let _0x1ae7db;try{const _0x918bb4=await exchange[_0x1b349d(0x1df)]();_0x1ae7db=_0x918bb4[_0x1b349d(0x1fb)][_0x1b4509];}catch(_0x14d0c6){await handleError(_0x14d0c6,_0x1b349d(0x257));}return _0x1ae7db;}async function getOpenOrders(){const _0x411cb2=_0x435db0;let _0x2a972e;allOpenOrders=[];try{for(const _0x12375b of config['portfolio']){!_0x12375b[_0x411cb2(0x226)]&&_0x12375b[_0x411cb2(0x1c2)]!=config[_0x411cb2(0xc5)]&&(_0x2a972e=await exchange['fetchOpenOrders'](_0x12375b[_0x411cb2(0xf6)]),_0x2a972e['length']>0x0&&allOpenOrders['push'](_0x2a972e[0x0]));}}catch(_0x407abd){await handleError(_0x407abd,_0x411cb2(0x13c));}}async function handleOpenOrders(_0x4ec18e=0x0){const _0x1591e4=_0x435db0;allOpenOrders[_0x1591e4(0x218)]==0x0&&lockOrders==ORDERS[_0x1591e4(0x121)]&&allOrdersPlaced&&(_0x4ec18e==0x0?(logger[_0x1591e4(0x221)](_0x1591e4(0x156)),_0x4ec18e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1591e4(0x221)](_0x1591e4(0x250)),validateOrders(_0x1591e4(0x19d))));}async function testAPI(_0x3c7125){const _0x1ef9d4=_0x435db0,_0x34f42f=ccxt['pro'][_0x3c7125['exchange']['toLowerCase']()],_0x5c260d=new _0x34f42f({'apiKey':_0x3c7125[_0x1ef9d4(0xf4)],'secret':_0x3c7125[_0x1ef9d4(0x1eb)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1ef9d4(0x1ff)}});if(_0x3c7125['apiPassword'])_0x5c260d[_0x1ef9d4(0x113)]=_0x3c7125[_0x1ef9d4(0xc6)];try{await _0x5c260d[_0x1ef9d4(0x245)]();}catch(_0x5b26bc){throw _0x5b26bc;}}function cloneDeep(_0x4b3b2f){const _0x489129=_0x435db0;return JSON[_0x489129(0x1e7)](JSON[_0x489129(0x1b0)](_0x4b3b2f));}async function getPortfolio(_0xf3a69e){const _0x157c9c=_0x435db0;let _0x182d66=[],_0x23058c=[],_0x73096b=[],_0x49501a;if(_0xf3a69e[_0x157c9c(0xf4)]!==_0x157c9c(0x17b)||_0xf3a69e['apiSecret']!==_0x157c9c(0x17b)||_0xf3a69e[_0x157c9c(0xc6)]&&_0xf3a69e[_0x157c9c(0xc6)]!==_0x157c9c(0x17b)){if(config[_0x157c9c(0x112)]){if(_0xf3a69e[_0x157c9c(0xf4)]==_0x157c9c(0x17b))_0xf3a69e[_0x157c9c(0xf4)]=config[_0x157c9c(0xf4)];if(_0xf3a69e['apiSecret']==_0x157c9c(0x17b))_0xf3a69e[_0x157c9c(0x1eb)]=config[_0x157c9c(0x1eb)];if(_0xf3a69e[_0x157c9c(0xc6)]==_0x157c9c(0x17b))_0xf3a69e[_0x157c9c(0xc6)]=config['apiPassword'];try{await testAPI(_0xf3a69e);}catch(_0x8f751e){if(_0x8f751e[_0x157c9c(0x206)]()['includes'](_0x157c9c(0x170))){logger['debug'](_0x157c9c(0x184)),proxyEmit(_0x157c9c(0x109),![]);return;}else{handleError(_0x8f751e,_0x157c9c(0xf8));return;}}}await initExchange(_0xf3a69e[_0x157c9c(0x112)],_0xf3a69e[_0x157c9c(0xf4)],_0xf3a69e[_0x157c9c(0x1eb)],_0xf3a69e[_0x157c9c(0xc6)]);try{await loadSymbols();}catch(_0x14ae7b){if(_0x14ae7b['toString']()['includes'](_0x157c9c(0x170))){proxyEmit(_0x157c9c(0x109),![]);return;}else{handleError(_0x14ae7b,_0x157c9c(0x119));return;}}const _0x539347=await getCoins(0x0,![],_0xf3a69e['basecoin']);_0x73096b=cloneDeep(_0x539347[0x1]);}else _0x73096b=cloneDeep(currentCoinsAll);if(_0xf3a69e[_0x157c9c(0xc5)]=='')proxyEmit(_0x157c9c(0x109),_0x73096b);else{_0x73096b['forEach'](_0x54875f=>{const _0x27959a=_0x157c9c;if(_0x54875f[_0x27959a(0x1c2)]!=_0xf3a69e[_0x27959a(0xc5)]&&allSymbols[_0x27959a(0x251)](_0x54875f[_0x27959a(0xf6)]))_0x182d66[_0x27959a(0x100)](_0x54875f[_0x27959a(0xf6)]);});if(_0x182d66['length']==0x0)logHistory(_0x157c9c(0x126),_0x157c9c(0x19b));else{try{_0x23058c=await getTickers(_0x182d66);}catch(_0x10535a){if(_0x10535a[_0x157c9c(0x206)]()[_0x157c9c(0x251)](_0x157c9c(0x170))){proxyEmit(_0x157c9c(0x109),![]);return;}else handleError(_0x10535a,_0x157c9c(0xdd));}_0x73096b[_0x157c9c(0x15a)](_0x15ec75=>{const _0x45266f=_0x157c9c;_0x15ec75['coin']!=_0xf3a69e[_0x45266f(0xc5)]?_0x23058c[_0x15ec75[_0x45266f(0xf6)]]?_0x49501a=_0x15ec75[_0x45266f(0x190)]?0x1/_0x23058c[_0x15ec75[_0x45266f(0xf6)]][_0x45266f(0x1e5)]:_0x23058c[_0x15ec75[_0x45266f(0xf6)]][_0x45266f(0x1e5)]:_0x49501a=0x0:_0x49501a=0x1,_0x15ec75[_0x45266f(0xe1)]=formatResult(_0x49501a,0x8);}),proxyEmit(_0x157c9c(0x109),_0x73096b);}}}function truncateTradeAmount(_0x1f5d53,_0x35270e){const _0x182261=_0x435db0;let _0x27f894=0x0;try{_0x27f894=exchange[_0x182261(0xd6)](_0x1f5d53,_0x35270e);}catch(_0x5d15af){}return _0x27f894;}function checkMinimums(_0x236975){const _0xc8e7df=_0x435db0;let _0x2942b0=!![];const _0x55f453=!_0x236975[_0xc8e7df(0x190)]?markets[_0x236975[_0xc8e7df(0xf6)]]['limits']['amount'][_0xc8e7df(0x1d0)]:markets[_0x236975[_0xc8e7df(0xf6)]]['limits']['cost']['min'],_0x3fb116=!_0x236975[_0xc8e7df(0x190)]?markets[_0x236975[_0xc8e7df(0xf6)]][_0xc8e7df(0x19f)][_0xc8e7df(0xef)]['min']:markets[_0x236975['symbol']][_0xc8e7df(0x19f)][_0xc8e7df(0x197)][_0xc8e7df(0x1d0)],_0xd8c7bc=truncateTradeAmount(_0x236975['symbol'],_0x236975[_0xc8e7df(0xc4)]);_0x236975[_0xc8e7df(0xc4)]=_0xd8c7bc;if(Math[_0xc8e7df(0x254)](_0xd8c7bc)<_0x55f453)_0x2942b0=![];if(Math['abs'](_0xd8c7bc)*_0x236975[_0xc8e7df(0x1e5)]<_0x3fb116)_0x2942b0=![];if(_0x236975[_0xc8e7df(0x1bf)]==_0xc8e7df(0x1a0)){let _0x454630=config['portfolio']['find'](_0x4b12d3=>_0x4b12d3[_0xc8e7df(0x1c2)]==_0x236975[_0xc8e7df(0x1c2)]);if(_0x454630[_0xc8e7df(0xbe)]>0x0){if(Math[_0xc8e7df(0x254)](_0xd8c7bc)>_0x236975[_0xc8e7df(0x10e)]-_0x454630[_0xc8e7df(0xbe)])_0x2942b0=![];}else{if(Math['abs'](_0xd8c7bc)>_0x236975[_0xc8e7df(0x10e)])_0x2942b0=![];}}if(_0x236975[_0xc8e7df(0x1bf)]==_0xc8e7df(0xdc)){let _0x58fde=config[_0xc8e7df(0x109)][_0xc8e7df(0x11d)](_0x52f344=>_0x52f344[_0xc8e7df(0x1c2)]==config[_0xc8e7df(0xc5)]),_0x13bfa8=currentCoins[_0xc8e7df(0x11d)](_0x2332b3=>_0x2332b3[_0xc8e7df(0x1c2)]==config['basecoin']);if(_0x58fde[_0xc8e7df(0xbe)]>0x0){if(Math[_0xc8e7df(0x254)](_0xd8c7bc)*_0x236975['last']>_0x13bfa8[_0xc8e7df(0x10e)]-_0x58fde[_0xc8e7df(0xbe)])_0x2942b0=![];}else{if(Math[_0xc8e7df(0x254)](_0xd8c7bc)*_0x236975[_0xc8e7df(0x1e5)]>_0x13bfa8['number'])_0x2942b0=![];}}return _0x2942b0;}async function getBalances(_0x46a6ad=!![]){const _0x2bde66=_0x435db0;let _0xb1aec3=0x0,_0x4a8dbd;const _0x26d2eb=config[_0x2bde66(0x14d)];if(config[_0x2bde66(0x196)]&&config[_0x2bde66(0x1af)]<0x0)await validate24hChanges();currentCoins[_0x2bde66(0x15a)](_0xdcd7c0=>{const _0x26b4e3=_0x2bde66;if(_0xdcd7c0['coin']!=config[_0x26b4e3(0xc5)]){let _0x3cc57d=global[_0x26b4e3(0x1ba)][noslash(_0xdcd7c0[_0x26b4e3(0xf6)])];_0x4a8dbd=_0xdcd7c0[_0x26b4e3(0x190)]?0x1/_0x3cc57d:_0x3cc57d;}else _0x4a8dbd=0x1;let _0x308461=_0xdcd7c0[_0x26b4e3(0x10e)]*_0x4a8dbd;_0xb1aec3+=_0x308461,_0xdcd7c0[_0x26b4e3(0x1e5)]=formatResult(Number(_0x4a8dbd),0x8),_0xdcd7c0[_0x26b4e3(0x11f)]=_0x308461;}),currentCoins[_0x2bde66(0x15a)](_0x5ca28b=>{const _0x5158ec=_0x2bde66;let _0x2efa61=config[_0x5158ec(0x109)][_0x5158ec(0x11d)](_0x53b347=>_0x53b347[_0x5158ec(0x1c2)]==_0x5ca28b[_0x5158ec(0x1c2)]),_0x48b658=Number(_0x2efa61[_0x5158ec(0x177)]),_0x1a9b77=_0x5ca28b['value']/_0xb1aec3*0x64,_0x2d45e8=_0x48b658*_0xb1aec3/0x64/_0x5ca28b[_0x5158ec(0x1e5)]-_0x5ca28b[_0x5158ec(0x10e)];_0x5ca28b[_0x5158ec(0x177)]=formatResult(_0x1a9b77,0x3),_0x5ca28b['target']=formatResult(_0x48b658,0x3),_0x5ca28b[_0x5158ec(0xc4)]=formatResult(_0x2d45e8,0x8),_0x5ca28b[_0x5158ec(0x1bf)]='',_0x5ca28b['valid']=![];if(_0x5ca28b['coin']!=config[_0x5158ec(0xc5)]){if(_0x5ca28b[_0x5158ec(0x177)]>_0x48b658)_0x5ca28b[_0x5158ec(0x1bf)]=_0x5158ec(0x1a0),_0x5ca28b[_0x5158ec(0x1ed)]=checkMinimums(_0x5ca28b);else _0x5ca28b[_0x5158ec(0x177)]<_0x48b658&&(_0x5ca28b['side']='buy',_0x5ca28b['valid']=checkMinimums(_0x5ca28b));}_0x5ca28b[_0x5158ec(0xf2)]=_0x5ca28b['distribution']/_0x5ca28b[_0x5158ec(0xc7)]-0x1;if(_0x5ca28b[_0x5158ec(0x14c)]=='filled'||_0x5ca28b[_0x5158ec(0x14c)]==_0x5158ec(0xff))_0x5ca28b['orderstatus']=_0x5158ec(0x146);}),currentCoins[_0x2bde66(0x13b)]((_0x210f26,_0x1a8d5e)=>_0x210f26['delta']<_0x1a8d5e[_0x2bde66(0xf2)]?0x1:_0x1a8d5e[_0x2bde66(0xf2)]<_0x210f26[_0x2bde66(0xf2)]?-0x1:0x0);const _0x243b17=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x243b17['eur'],'usd':_0x243b17['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x26d2eb},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x46a6ad){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x26d2eb});else{if(lockOrders==ORDERS[_0x2bde66(0x1cb)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x26d2eb});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3f91c5=getNormalizedPerformance();getStartingBalances(_0x3f91c5),emitPerformance(_0x3f91c5);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2efd74=getNormalizedPerformance();emitPerformance(_0x2efd74),getStartingBalances(_0x2efd74),logger[_0x2bde66(0x221)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4180ef=_0x435db0;if(!lastBalances)return;let _0x35122e=[],_0x53e787,_0x513332=JSON[_0x4180ef(0x1e7)](lastBalances['portfolio']);_0x513332[_0x4180ef(0x13b)]((_0x260f1e,_0x4435a6)=>_0x260f1e[_0x4180ef(0x1c2)]>_0x4435a6[_0x4180ef(0x1c2)]?0x1:_0x4435a6['coin']>_0x260f1e[_0x4180ef(0x1c2)]?-0x1:0x0),_0x513332[_0x4180ef(0x15a)](_0x3b4b2f=>{const _0x37b224=_0x4180ef;let _0x1f9fe4={'coin':_0x3b4b2f['coin'],'number':_0x3b4b2f[_0x37b224(0x10e)],'price':_0x3b4b2f[_0x37b224(0x1e5)]};_0x35122e['push'](_0x1f9fe4);});const _0x3325f0=await getFiat();_0x53e787={'date':lastBalances[_0x4180ef(0xf0)][_0x4180ef(0x20e)]('\x20')[0x0],'eur':_0x3325f0[_0x4180ef(0x1a1)],'usd':_0x3325f0[_0x4180ef(0x239)],'coins':_0x35122e};let _0xc25155=dbPerformance[_0x4180ef(0xd4)](_0x4180ef(0x20b))['find']({'date':_0x53e787[_0x4180ef(0xc8)]})[_0x4180ef(0x11f)]();_0xc25155?_0x53e787['date']!=config[_0x4180ef(0x17d)]&&dbPerformance[_0x4180ef(0xd4)]('data')[_0x4180ef(0x11d)]({'date':_0x53e787['date']})[_0x4180ef(0x22f)](_0x53e787)['write']():dbPerformance[_0x4180ef(0xd4)]('data')['push'](_0x53e787)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x240671=_0x435db0;let _0x4279d4=[];if(dbPerformance[_0x240671(0x158)](_0x240671(0x20b))[_0x240671(0x11f)]()){let _0x5660eb=dbPerformance['get'](_0x240671(0x20b))[_0x240671(0x1c3)]()[_0x240671(0xc3)](_0x35dab9=>{const _0x434a17=_0x240671;if(_0x35dab9[_0x434a17(0x21f)]['length']==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x2799df=[...config['liquidity']];_0x2799df['sort']((_0x33b46b,_0xde648d)=>_0x33b46b['date']>_0xde648d[_0x240671(0xc8)]?-0x1:_0xde648d[_0x240671(0xc8)]>_0x33b46b[_0x240671(0xc8)]?0x1:0x0);let _0x4418ea=0x1,_0x5d8881=[],_0x1dee03=0x0;_0x5660eb[_0x240671(0x19c)]()[_0x240671(0x190)]()[_0x240671(0x15a)]((_0x4f97fa,_0x2755ae)=>{const _0x39eafb=_0x240671;if(_0x2799df[_0x1dee03]){if(_0x5660eb[_0x5660eb[_0x39eafb(0x218)]-_0x2755ae]&&_0x2799df[_0x1dee03][_0x39eafb(0xc8)]==_0x5660eb[_0x5660eb[_0x39eafb(0x218)]-_0x2755ae][_0x39eafb(0xc8)]){if(_0x2755ae<_0x5660eb['length']){let _0x48d78b=0x0,_0x20d4b3=0x0;_0x5660eb[_0x5660eb[_0x39eafb(0x218)]-_0x2755ae][_0x39eafb(0x21f)]['forEach'](_0x3bd594=>{const _0x12b016=_0x39eafb;_0x20d4b3+=_0x3bd594[_0x12b016(0x10e)]*_0x3bd594[_0x12b016(0xe1)];}),_0x2799df[_0x1dee03]['changes']['forEach'](_0x26a573=>{const _0x4507eb=_0x39eafb;_0x48d78b+=_0x26a573[_0x4507eb(0x10e)]*_0x26a573[_0x4507eb(0xe1)];}),_0x4418ea*=_0x48d78b/(_0x20d4b3-_0x48d78b)+0x1;}_0x1dee03++;}}let _0x74e28d=0x0;_0x4f97fa['coins'][_0x39eafb(0x15a)](_0x49aa06=>{const _0x19a589=_0x39eafb;_0x74e28d+=_0x49aa06['number']*_0x49aa06[_0x19a589(0xe1)];}),_0x5d8881[_0x5660eb[_0x39eafb(0x218)]-_0x2755ae-0x1]=_0x74e28d*(_0x4418ea-0x1);});let _0x45051f=[];_0x2799df=[...config[_0x240671(0x1ee)]]||[];let _0x1d7940=0x0;_0x1dee03=0x0,_0x5660eb[_0x240671(0x15a)]((_0x3efa72,_0x2f66d5)=>{const _0x418686=_0x240671;if(_0x2799df[_0x1dee03]){const _0x3b5c1e=fns['parse'](_0x2799df[_0x1dee03][_0x418686(0xc8)],_0x418686(0xd2),new Date()),_0x390280=fns[_0x418686(0x1e7)](_0x3efa72[_0x418686(0xc8)],_0x418686(0xd2),new Date());if(fns[_0x418686(0x13f)](_0x3b5c1e,_0x390280)){let _0x3f5225=0x0;_0x2799df[_0x1dee03]['changes']['forEach'](_0x4af154=>{const _0x1516d6=_0x418686;!_0x45051f[_0x4af154[_0x1516d6(0x1c2)]]?_0x45051f[_0x4af154[_0x1516d6(0x1c2)]]=_0x4af154[_0x1516d6(0x10e)]:(_0x3f5225=_0x45051f[_0x4af154[_0x1516d6(0x1c2)]],_0x45051f[_0x4af154[_0x1516d6(0x1c2)]]+=_0x4af154['number']);const _0x2cd279=_0x3efa72[_0x1516d6(0x21f)][_0x1516d6(0x11d)](_0x27e092=>_0x27e092['coin']==_0x4af154[_0x1516d6(0x1c2)]);(!_0x2cd279||_0x2cd279[_0x1516d6(0x10e)]==0x0)&&(_0x1d7940+=(-_0x4af154[_0x1516d6(0x10e)]-_0x3f5225)*_0x4af154[_0x1516d6(0xe1)]);}),_0x1dee03++;}}_0x3efa72[_0x418686(0x21f)]['forEach']((_0xfbb63e,_0x4ec2a1)=>{const _0x315838=_0x418686;_0x45051f[_0xfbb63e[_0x315838(0x1c2)]]&&(_0xfbb63e['initial']=_0x45051f[_0xfbb63e[_0x315838(0x1c2)]]);}),_0x4279d4[_0x418686(0x100)]({'date':_0x3efa72[_0x418686(0xc8)],'eur':_0x3efa72[_0x418686(0x1a1)],'usd':_0x3efa72[_0x418686(0x239)],'offset':_0x5d8881[_0x2f66d5],'netoffset':_0x1d7940,'coins':_0x3efa72['coins']});});}return _0x4279d4;}function emitPerformance(_0x2c08c7){_0x2c08c7['length']!==0x0?(proxyEmit('performance',_0x2c08c7),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x430075,_0x56a12d){const _0xdb32f5=_0x435db0;let _0x3756d9=0x0,_0x442410=0x0,_0x42a61e=0x0;_0x430075[_0xdb32f5(0x21f)][_0xdb32f5(0x15a)](_0x11ec34=>{const _0x19a0a7=_0xdb32f5;_0x3756d9+=_0x11ec34[_0x19a0a7(0x10e)]*_0x11ec34['price'];});_0x56a12d&&(_0x3756d9+=_0x430075[_0xdb32f5(0xbe)]);if(config['basecoin']===_0xdb32f5(0x21a)||config['basecoin']===_0xdb32f5(0x17a)||config['basecoin']==='PAXG')_0x442410=_0x3756d9*_0x430075[_0xdb32f5(0x1a1)],_0x42a61e=_0x3756d9*_0x430075[_0xdb32f5(0x239)];else{if(usdBasecoins['includes'](config['basecoin']))_0x442410=_0x3756d9*_0x430075[_0xdb32f5(0x1a1)]/_0x430075[_0xdb32f5(0x239)],_0x42a61e=_0x3756d9;else config[_0xdb32f5(0xc5)]==='EUR'&&(_0x442410=_0x3756d9,_0x42a61e=_0x3756d9*_0x430075[_0xdb32f5(0x239)]/_0x430075[_0xdb32f5(0x1a1)]);}return[_0x3756d9,_0x442410,_0x42a61e];}function getKPIs(_0x56ea1c,_0x315ac3=_0x435db0(0x183)){const _0x5a3e1d=_0x435db0,_0x387c65=config[_0x5a3e1d(0xc5)],_0x2a414e=lastBalances,_0x2b4a5d=currentCoins,_0x3dac7b=getNormalizedPerformance(),_0x1a3538=_0x56ea1c==='basecoin'?_0x387c65:_0x56ea1c===_0x5a3e1d(0x132)||_0x56ea1c==='net-fiat'?_0x315ac3:_0x5a3e1d(0x192)+_0x387c65,_0x120a0f=_0x56ea1c===_0x5a3e1d(0xfb)?'Net\x20effect':_0x56ea1c===_0x5a3e1d(0x18d)?_0x5a3e1d(0xf3):_0x1a3538+_0x5a3e1d(0x145),_0xdb08d6=_0x56ea1c===_0x5a3e1d(0xfb)||_0x56ea1c===_0x5a3e1d(0x18d)?_0x5a3e1d(0xf3):_0x1a3538+_0x5a3e1d(0x110);let _0x2b0fb2=0x0;_0x2b4a5d['forEach'](_0x5ed37c=>{const _0x4354d2=_0x5a3e1d;_0x2b0fb2+=_0x5ed37c[_0x4354d2(0x10e)]*_0x5ed37c['last'];});if(_0x56ea1c===_0x5a3e1d(0x132)||_0x56ea1c==='net-fiat'){if(_0x387c65===_0x5a3e1d(0x21a)||_0x387c65===_0x5a3e1d(0x17a)||_0x387c65===_0x5a3e1d(0xd7))_0x2b0fb2=_0x2b0fb2*(_0x315ac3===_0x5a3e1d(0x183)?_0x2a414e['eur']:_0x2a414e[_0x5a3e1d(0x239)]);else{if(usdBasecoins[_0x5a3e1d(0x251)](_0x387c65))_0x2b0fb2=_0x2b0fb2*(_0x315ac3===_0x5a3e1d(0x183)?_0x2a414e['eur']/_0x2a414e['usd']:0x1);else _0x387c65===_0x5a3e1d(0x183)&&(_0x2b0fb2=_0x2b0fb2*(_0x315ac3===_0x5a3e1d(0x183)?0x1:_0x2a414e[_0x5a3e1d(0x239)]/_0x2a414e[_0x5a3e1d(0x1a1)]));}}let _0x2755e5;if(_0x2b0fb2!==0x0){if(_0x56ea1c===_0x5a3e1d(0xc5))_0x2755e5=(_0x2b0fb2/startingBalances['basecoin']-0x1)*0x64;else{if(_0x315ac3===_0x5a3e1d(0x183))_0x2755e5=(_0x2b0fb2/startingBalances[_0x5a3e1d(0x1a1)]-0x1)*0x64;else _0x2755e5=(_0x2b0fb2/startingBalances[_0x5a3e1d(0x239)]-0x1)*0x64;}let _0x5be016=0x0;if(startingBalances[_0x5a3e1d(0x21f)])_0x2b4a5d[_0x5a3e1d(0x15a)](_0xc356b1=>{const _0x259e11=_0x5a3e1d;let _0x280397=startingBalances[_0x259e11(0x21f)][_0x259e11(0x11d)](_0x2d1170=>_0x2d1170[_0x259e11(0x1c2)]===_0xc356b1[_0x259e11(0x1c2)]);if(_0x280397&&_0x280397['coin']&&_0xc356b1['number']!==0x0)_0x5be016+=_0x280397[_0x259e11(0x10e)]*_0xc356b1[_0x259e11(0x1e5)];});let _0x1383be=0x0;if(_0x3dac7b[_0x5a3e1d(0x218)]!==0x0){let _0x41f92b=_0x3dac7b[_0x3dac7b['length']-0x1];_0x1383be=_0x41f92b[_0x5a3e1d(0x1ce)];}_0x5be016-=_0x1383be;_0x56ea1c===_0x5a3e1d(0xfb)&&(_0x2755e5=(_0x2b0fb2-_0x5be016)/startingBalances[_0x5a3e1d(0xc5)]*0x64,_0x2b0fb2=_0x2b0fb2-_0x5be016);if(_0x56ea1c===_0x5a3e1d(0x18d)){let _0x2d8200=_0x315ac3===_0x5a3e1d(0x183)?startingBalances[_0x5a3e1d(0x1a1)]:startingBalances['usd'];if(_0x387c65===_0x5a3e1d(0x21a)||_0x387c65===_0x5a3e1d(0x17a)||_0x387c65===_0x5a3e1d(0xd7))_0x5be016=_0x315ac3==='EUR'?_0x5be016*_0x2a414e['eur']:_0x5be016*_0x2a414e[_0x5a3e1d(0x239)];else{if(usdBasecoins[_0x5a3e1d(0x251)](_0x387c65))_0x5be016=_0x315ac3===_0x5a3e1d(0x183)?_0x5be016*_0x2a414e[_0x5a3e1d(0x1a1)]/_0x2a414e['usd']:_0x5be016;else _0x387c65==='EUR'&&(_0x5be016=_0x315ac3==='EUR'?_0x5be016:_0x5be016*_0x2a414e['usd']/_0x2a414e['eur']);}_0x2755e5=(_0x2b0fb2-_0x5be016)/_0x2d8200*0x64,_0x2b0fb2=_0x2b0fb2-_0x5be016;}if(_0x2755e5){if(_0x2755e5<0x64)_0x2755e5=_0x2755e5[_0x5a3e1d(0x1b8)](0x2);else{if(_0x2755e5<0x3e8)_0x2755e5=_0x2755e5[_0x5a3e1d(0x1b8)](0x1);else _0x2755e5=_0x2755e5[_0x5a3e1d(0x1b8)](0x0);}}else _0x2755e5=Number('0')['toFixed'](0x2);if(_0x2b0fb2){if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0.000001)_0x2b0fb2=_0x2b0fb2[_0x5a3e1d(0x1b8)](0x2);else{if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0.1)_0x2b0fb2=_0x2b0fb2[_0x5a3e1d(0x1b8)](0x6);else{if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0x1)_0x2b0fb2=_0x2b0fb2[_0x5a3e1d(0x1b8)](0x5);else{if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0xa)_0x2b0fb2=_0x2b0fb2['toFixed'](0x4);else{if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0x64)_0x2b0fb2=_0x2b0fb2['toFixed'](0x3);else{if(Math[_0x5a3e1d(0x254)](_0x2b0fb2)<0x3e8)_0x2b0fb2=_0x2b0fb2['toFixed'](0x2);else _0x2b0fb2=_0x2b0fb2[_0x5a3e1d(0x1b8)](0x2);}}}}}}else _0x2b0fb2=Number('0')[_0x5a3e1d(0x1b8)](0x2);}else _0x2755e5=Number('0')['toFixed'](0x2);return{'value':_0x2b0fb2,'change':_0x2755e5,'leftTxt':_0x120a0f,'rightTxt':_0xdb08d6};}async function getStartingBalances(_0x1e9703,_0x19b374=!![]){const _0x253c9d=_0x435db0;if(_0x1e9703['length']!==0x0){const [_0x5c41b6,_0xceaef8,_0x339d0f]=getPerf(_0x1e9703[0x0],!![]);let _0x25226b=[];config['portfolio'][_0x253c9d(0x15a)](_0x3db097=>{const _0x39d43d=_0x253c9d;let _0x2873a7=0x0,_0x22d30e;config[_0x39d43d(0x1ee)]['forEach'](_0x57600e=>{const _0x4483c5=_0x39d43d;let _0x29e2fa=_0x57600e['changes'][_0x4483c5(0x11d)](_0x2f8bca=>_0x2f8bca[_0x4483c5(0x1c2)]==_0x3db097['coin']);if(_0x29e2fa){_0x2873a7+=_0x29e2fa['number'];if(!_0x22d30e)_0x22d30e=_0x29e2fa[_0x4483c5(0xe1)];}}),_0x25226b[_0x39d43d(0x100)]({'coin':_0x3db097[_0x39d43d(0x1c2)],'number':_0x2873a7,'initialprice':_0x22d30e});});const _0x4b0821={'basecoin':_0x5c41b6,'eur':_0xceaef8,'usd':_0x339d0f,'coins':_0x25226b};if(_0x19b374)proxyEmit('starting-balances',_0x4b0821);startingBalances=_0x4b0821;}}function headlessMode(_0x1936a8){const _0x1bca05=_0x435db0;let _0x2f6b3d=_0x1936a8[_0x1bca05(0x109)],_0x190055=_0x1936a8['threshold'],_0x5bb62f=[];for(let _0x1a149a of _0x2f6b3d){if(_0x1a149a['coin']!=config[_0x1bca05(0xc5)]){if(_0x1a149a[_0x1bca05(0xf2)]>=_0x190055/0x64){if(_0x1a149a['valid'])_0x5bb62f['push'](_0x1a149a);}else{if(_0x1a149a[_0x1bca05(0xf2)]<=-_0x190055/0x64){if(_0x1a149a['valid'])_0x5bb62f[_0x1bca05(0x100)](_0x1a149a);}}}}_0x5bb62f[_0x1bca05(0x218)]>0x0&&(lockOrders==ORDERS[_0x1bca05(0x1cb)]&&!coolingDown&&_0x5bb62f[_0x1bca05(0x15a)](_0x288231=>{const _0x186346=_0x1bca05;logger['debug'](_0x186346(0x230)+_0x288231[_0x186346(0x1c2)]+'\x20'+_0x288231[_0x186346(0x10e)]+'\x20'+_0x288231[_0x186346(0x1e5)]+'\x20'+_0x288231['distribution']+'%\x20'+_0x288231[_0x186346(0xc7)]+'%\x20'+(0x64*_0x288231[_0x186346(0xf2)])[_0x186346(0x1b8)](0x2)+_0x186346(0x193)+_0x190055[_0x186346(0x1b8)](0x2)+'%)');}),placeOrder(_0x5bb62f));}function notifyBalance(_0x561a61){const _0x2e9d97=_0x435db0;let _0x481e3d=_0x561a61[_0x2e9d97(0x109)],_0xe2537a=_0x561a61[_0x2e9d97(0x14d)],_0x4d5c20=[];for(let _0x389c1b of _0x481e3d){if(_0x389c1b['coin']!=config['basecoin']){if(_0x389c1b[_0x2e9d97(0xf2)]>=_0xe2537a/0x64){if(_0x389c1b[_0x2e9d97(0x1ed)])_0x4d5c20[_0x2e9d97(0x100)](_0x389c1b);}else{if(_0x389c1b['delta']<=-_0xe2537a/0x64){if(_0x389c1b['valid'])_0x4d5c20[_0x2e9d97(0x100)](_0x389c1b);}}}}if(_0x4d5c20['length']>0x0){let _0x2b8648=_0x4d5c20['map'](_0x2d8973=>_0x2d8973[_0x2e9d97(0x1c2)]);_0x2b8648[_0x2e9d97(0x13b)]();let _0x27ca8c=_0x2b8648[_0x2e9d97(0x24b)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2e9d97(0xd9),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x27ca8c;}}function symbolToCoin(_0x299df5){const _0x3d1afa=_0x435db0;let _0x122fe1;if(_0x299df5[_0x3d1afa(0x251)]('/'+config[_0x3d1afa(0xc5)]))_0x122fe1=_0x299df5[_0x3d1afa(0x122)]('/'+config[_0x3d1afa(0xc5)],'');if(_0x299df5[_0x3d1afa(0x251)](config[_0x3d1afa(0xc5)]+'/'))_0x122fe1=_0x299df5[_0x3d1afa(0x122)](config['basecoin']+'/','');return _0x122fe1;}async function unlockOrders(){const _0x3de51c=_0x435db0;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3de51c(0x121)]){logger[_0x3de51c(0x221)](_0x3de51c(0x14e)),lockOrders=ORDERS[_0x3de51c(0x237)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3b1e1a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b1e1a,validateOrdersState=_0x3de51c(0x19e),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x3de51c(0x221)](_0x3de51c(0x181));}}async function validateOrders(_0x34a981){const _0x450464=_0x435db0;if(_0x34a981)validateOrdersState=_0x34a981;logger[_0x450464(0x221)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x450464(0x23e)+(lockOrders==0x1?_0x450464(0x252):lockOrders==0x2?_0x450464(0x1c1):'ORDERS.UNLOCKED'));let _0x475e90=[],_0x2950d9=config[_0x450464(0x233)]==_0x450464(0xcf)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x450464(0x253)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x450464(0x15a)](_0x3a15d1=>{const _0x1882b4=_0x450464;let _0x5a508a=![];_0x3a15d1[_0x1882b4(0x157)]>0x0&&(_0x5a508a=!![]),_0x475e90[_0x1882b4(0x100)](_0x5a508a),_0x5a508a&&config['ordertype']!=_0x1882b4(0xcf)&&logHistory('order',_0x1882b4(0xd8)+_0x3a15d1[_0x1882b4(0xf6)]+'\x20'+_0x3a15d1[_0x1882b4(0x1bf)]+'\x20#'+formatResult(_0x3a15d1[_0x1882b4(0x157)],0x8)+'\x20@'+formatResult(_0x3a15d1[_0x1882b4(0xe1)],0x8));}),_0x475e90[_0x450464(0x15a)]((_0x1f1dbc,_0x41d8fb)=>{const _0x5ed57c=_0x450464;if(_0x1f1dbc)lastOrders[_0x5ed57c(0xd3)](_0x41d8fb,0x1);}),persistOpenOrders(lastOrders);const _0x17db84=coolingDown?_0x450464(0x130):_0x450464(0x103);if(validateOrdersState==_0x450464(0x19e)){validateOrdersState=_0x450464(0x1f4);if(_0x475e90[_0x450464(0x251)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x450464(0x1f4)){if(_0x475e90[_0x450464(0x251)](![])){}else{if(allOrdersPlaced){if(config[_0x450464(0x233)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x475e90[_0x450464(0x251)](![])&&(config['ordertype']==_0x450464(0xcf)?logHistory(_0x450464(0x25d),_0x450464(0xde)+Math['round'](_0x2950d9*validateOrderInterval/0xea60)+_0x450464(0x209)+_0x17db84):(await cancelOrders(),logHistory(_0x450464(0x25d),_0x450464(0x152)+Math[_0x450464(0x12b)](_0x2950d9*validateOrderInterval/0xea60)+_0x450464(0x209)+_0x17db84))),await unlockOrders();else{if(validateOrdersState==_0x450464(0x19d)){if(config[_0x450464(0x233)]!=_0x450464(0xcf))logHistory(_0x450464(0x25d),_0x450464(0x117)+_0x17db84);await unlockOrders();}}}}}async function cancelOrders(){const _0x33f180=_0x435db0;lastOrders[_0x33f180(0x15a)](async _0x1d0aa7=>{const _0x23e61f=_0x33f180;try{const _0x2a9c96=await exchange[_0x23e61f(0x229)](_0x1d0aa7[_0x23e61f(0x147)],_0x1d0aa7[_0x23e61f(0xf6)]);}catch(_0x3bf834){if(_0x3bf834[_0x23e61f(0x206)]()[_0x23e61f(0x251)](_0x23e61f(0xe3))){}else await handleError(_0x3bf834,_0x23e61f(0x1bc));}});}async function initCoinResults(_0x486596){const _0x38a05c=_0x435db0;_0x486596?logger[_0x38a05c(0x221)]('Resetting\x20coin\x20results:\x20'+_0x486596):logger['debug']('Initializing\x20coin\x20results'),config[_0x38a05c(0x109)][_0x38a05c(0x15a)](_0x2b28fc=>{const _0x239e81=_0x38a05c;if(!_0x2b28fc[_0x239e81(0x226)]&&_0x2b28fc[_0x239e81(0x1c2)]!=config[_0x239e81(0xc5)]){const _0x4d790b=currentCoins[_0x239e81(0x11d)](_0x3d1472=>_0x3d1472[_0x239e81(0x1c2)]==_0x2b28fc[_0x239e81(0x1c2)]),_0x3e1ca8=global[_0x239e81(0x1ba)][noslash(_0x2b28fc['symbol'])];let _0x3b3b76=_0x4d790b?_0x4d790b[_0x239e81(0x10e)]:null,_0x46a548=_0x2b28fc[_0x239e81(0x190)]?0x1/_0x3e1ca8:_0x3e1ca8,_0x54a660;config[_0x239e81(0x1ee)][_0x239e81(0x15a)](_0x5030ff=>{const _0x352124=_0x239e81;!_0x54a660&&(_0x54a660=_0x5030ff[_0x352124(0xce)]['find'](_0x399e05=>_0x399e05[_0x352124(0x1c2)]==_0x2b28fc[_0x352124(0x1c2)]),_0x54a660&&(_0x3b3b76=_0x54a660['number'],_0x46a548=_0x54a660['price']));});let _0x4cbe68=dbCoinResults[_0x239e81(0xd4)](_0x239e81(0x21f))[_0x239e81(0x11d)]({'coin':_0x2b28fc[_0x239e81(0x1c2)]})[_0x239e81(0x11f)]();if(!_0x4cbe68){const _0x25da53={'coin':_0x2b28fc[_0x239e81(0x1c2)],'number':_0x3b3b76,'breakeven':_0x46a548,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x239e81(0xd4)](_0x239e81(0x21f))[_0x239e81(0x100)](_0x25da53)[_0x239e81(0xbf)]();}else{if(_0x486596&&_0x2b28fc[_0x239e81(0x1c2)]==_0x486596){const _0x5193a2={'coin':_0x2b28fc[_0x239e81(0x1c2)],'number':_0x3b3b76,'breakeven':_0x46a548,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x239e81(0x21f))[_0x239e81(0x11d)]({'coin':_0x2b28fc[_0x239e81(0x1c2)]})[_0x239e81(0x22f)](_0x5193a2)['write']();}}}});}function _0x4216(_0x29a746,_0x2435aa){const _0x39d26c=_0x5663();return _0x4216=function(_0x34c4c2,_0x4ad448){_0x34c4c2=_0x34c4c2-0xbc;let _0x5663f6=_0x39d26c[_0x34c4c2];return _0x5663f6;},_0x4216(_0x29a746,_0x2435aa);}async function updateCoinResults(_0x43f8b7,_0x170dd9=![]){const _0x46695d=_0x435db0;let _0x552fce,_0x539f25,_0x5c17fd,_0xdd6e03,_0xc09f42,_0x2d0951,_0x579b1e=dbCoinResults[_0x46695d(0xd4)](_0x46695d(0x21f))[_0x46695d(0x11d)]({'coin':_0x43f8b7[_0x46695d(0x1c2)]})[_0x46695d(0x11f)](),_0x17acdb=![];_0x579b1e&&Object[_0x46695d(0x137)](_0x579b1e)[_0x46695d(0x15a)](([_0x344073,_0xd7c371])=>{if(_0xd7c371==null)_0x17acdb=!![];});(!_0x579b1e||_0x17acdb)&&(await initCoinResults(_0x43f8b7['coin']),_0x579b1e=dbCoinResults[_0x46695d(0xd4)](_0x46695d(0x21f))[_0x46695d(0x11d)]({'coin':_0x43f8b7[_0x46695d(0x1c2)]})[_0x46695d(0x11f)]());_0x43f8b7[_0x46695d(0x190)]&&(_0x2d0951={'filled':_0x43f8b7[_0x46695d(0x157)]*_0x43f8b7[_0x46695d(0xe1)],'amount':_0x43f8b7['filled']*_0x43f8b7['price'],'side':_0x43f8b7[_0x46695d(0x1bf)]==_0x46695d(0x1a0)?'buy':_0x46695d(0x1a0),'price':0x1/_0x43f8b7['price']},_0x43f8b7={..._0x43f8b7,..._0x2d0951});_0x170dd9?_0x539f25=_0x43f8b7[_0x46695d(0x1bf)]==_0x46695d(0xdc)?_0x579b1e[_0x46695d(0x10e)]+_0x43f8b7['filled']:_0x579b1e['number']-_0x43f8b7[_0x46695d(0x157)]:_0x539f25=await getCoinNumber(_0x43f8b7[_0x46695d(0x1c2)]);if(_0x43f8b7['fee']&&_0x43f8b7[_0x46695d(0x1fa)][_0x46695d(0x235)]==config['basecoin'])_0x552fce=_0x43f8b7[_0x46695d(0x1fa)][_0x46695d(0xef)];else{if(_0x43f8b7[_0x46695d(0x1fa)]&&_0x43f8b7['fee']['currency']==_0x46695d(0x189)&&!_0x170dd9&&config['basecoin']!=_0x46695d(0xd7))_0x552fce=_0x43f8b7[_0x46695d(0x1fa)][_0x46695d(0xef)]*global[_0x46695d(0x1ba)][_0x46695d(0x189)+config[_0x46695d(0xc5)]];else _0x552fce=defaultFee*_0x43f8b7[_0x46695d(0x157)]*_0x43f8b7[_0x46695d(0xe1)];}_0x43f8b7['side']==_0x46695d(0xdc)?(_0x5c17fd=_0x539f25!=0x0?(_0x579b1e[_0x46695d(0x259)]*_0x579b1e['number']+_0x43f8b7[_0x46695d(0xe1)]*(_0x539f25-_0x579b1e[_0x46695d(0x10e)])+_0x552fce)/_0x539f25:0x0,_0xdd6e03=_0x579b1e[_0x46695d(0x1bb)]):(_0x5c17fd=_0x539f25!=0x0?(_0x579b1e['breakeven']*_0x579b1e[_0x46695d(0x10e)]-_0x43f8b7[_0x46695d(0xe1)]*(_0x579b1e[_0x46695d(0x10e)]-_0x539f25)+_0x552fce)/_0x539f25:0x0,_0xdd6e03=_0x579b1e['realized']+(_0x43f8b7[_0x46695d(0xe1)]-_0x579b1e['breakeven'])*_0x43f8b7[_0x46695d(0x157)]);_0xc09f42=(_0x43f8b7['price']-_0x5c17fd-_0x552fce/_0x43f8b7['filled'])*_0x539f25;let _0x93bbc2={'coin':_0x43f8b7[_0x46695d(0x1c2)],'number':_0x539f25,'breakeven':formatResult(_0x5c17fd,0x8),'realized':formatResult(_0xdd6e03,0x8),'unrealized':formatResult(_0xc09f42,0x8),'fees':formatResult(_0x579b1e[_0x46695d(0x167)]+_0x552fce,0x8),'sells':_0x43f8b7[_0x46695d(0x1bf)]==_0x46695d(0x1a0)?_0x579b1e[_0x46695d(0x1e0)]+0x1:_0x579b1e[_0x46695d(0x1e0)],'buys':_0x43f8b7['side']==_0x46695d(0xdc)?_0x579b1e[_0x46695d(0x16f)]+0x1:_0x579b1e[_0x46695d(0x16f)]};dbCoinResults[_0x46695d(0xd4)]('coins')[_0x46695d(0x11d)]({'coin':_0x43f8b7['coin']})[_0x46695d(0x22f)](_0x93bbc2)[_0x46695d(0xbf)]();if(!_0x170dd9){if(_0x43f8b7[_0x46695d(0x1fa)]&&_0x43f8b7[_0x46695d(0x1fa)][_0x46695d(0x235)]==_0x46695d(0x189)){const _0x5412ec=currentCoins[_0x46695d(0x11d)](_0x509a8b=>_0x509a8b[_0x46695d(0x1c2)]==_0x46695d(0x189));if(_0x5412ec){let _0x1ca1d3=dbCoinResults[_0x46695d(0xd4)]('coins')[_0x46695d(0x11d)]({'coin':'BNB'})['value']();_0x93bbc2={..._0x1ca1d3,'number':_0x5412ec[_0x46695d(0x10e)]},dbCoinResults['get'](_0x46695d(0x21f))[_0x46695d(0x11d)]({'coin':_0x46695d(0x189)})['assign'](_0x93bbc2)['write']();}}}}async function placeOrder(_0x386a25){const _0x1bbe3e=_0x435db0,_0x203d6d=config[_0x1bbe3e(0x233)]==_0x1bbe3e(0xcf)?_0x1bbe3e(0xcf):_0x1bbe3e(0x17e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1bbe3e(0x121)],allOrdersPlaced=![],validateOrdersState=_0x1bbe3e(0x19e);let _0x56a6a6=![];lastOrders=[];for(const _0x486f34 of _0x386a25){let _0x2a7cee,_0x594927,_0x3fbbe0,_0x8c9b25,_0x50877b,_0x27a432=_0x486f34[_0x1bbe3e(0xf6)];try{const _0x36db78=await exchange[_0x1bbe3e(0x22d)](_0x27a432);_0x2a7cee=_0x486f34[_0x1bbe3e(0x190)]?0x1/_0x486f34['last']:_0x486f34[_0x1bbe3e(0x1e5)],_0x594927=_0x36db78[_0x1bbe3e(0x154)],_0x3fbbe0=_0x36db78[_0x1bbe3e(0x227)];_0x486f34[_0x1bbe3e(0x190)]?(_0x8c9b25=_0x486f34['side']=='buy'?_0x1bbe3e(0x1a0):_0x1bbe3e(0xdc),_0x50877b=Math[_0x1bbe3e(0x254)](_0x486f34[_0x1bbe3e(0xc4)])/_0x2a7cee):(_0x8c9b25=_0x486f34[_0x1bbe3e(0x1bf)],_0x50877b=Math[_0x1bbe3e(0x254)](_0x486f34[_0x1bbe3e(0xc4)]));_0x203d6d==_0x1bbe3e(0x17e)&&(config[_0x1bbe3e(0x233)]==_0x1bbe3e(0x1d4)&&(_0x2a7cee=_0x8c9b25==_0x1bbe3e(0xdc)?_0x594927:_0x3fbbe0),config[_0x1bbe3e(0x233)]==_0x1bbe3e(0x144)&&(_0x2a7cee=_0x8c9b25==_0x1bbe3e(0xdc)?_0x3fbbe0:_0x594927));_0x50877b=formatResult(_0x50877b,0x8),_0x2a7cee=formatResult(_0x2a7cee,0x8);const _0x3e738f=_0x8c9b25==_0x1bbe3e(0x1a0)?config[_0x1bbe3e(0x1c6)]?String['fromCodePoint']('0x'+config[_0x1bbe3e(0x1c6)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x1bbe3e(0x244)])+'\x20':'',_0x59321d=_0x203d6d==_0x1bbe3e(0xcf)?_0x1bbe3e(0x1ab):config['ordertype']==_0x1bbe3e(0x1d4)?_0x1bbe3e(0xe4):_0x1bbe3e(0xd1),_0x20a598=(Math[_0x1bbe3e(0x11a)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x1bbe3e(0x206)]();lastOrders[_0x1bbe3e(0x100)]({'customId':_0x20a598,'symbol':_0x27a432,'coin':_0x486f34['coin'],'amount':_0x50877b,'price':_0x2a7cee,'side':_0x8c9b25,'reverse':_0x486f34[_0x1bbe3e(0x190)],'filled':0x0});if(_0x203d6d==_0x1bbe3e(0xcf))logHistory(_0x1bbe3e(0x125),''+_0x3e738f+_0x59321d+_0x1bbe3e(0x129)+_0x27a432+'\x20'+_0x8c9b25+'\x20#'+formatResult(_0x50877b,0x8)+'\x20@'+formatResult(_0x2a7cee,0x8));else logHistory(_0x1bbe3e(0x125),''+_0x3e738f+_0x59321d+_0x1bbe3e(0x129)+_0x27a432+'\x20'+_0x8c9b25+'\x20#'+formatResult(_0x50877b,0x8)+'\x20@'+formatResult(_0x2a7cee,0x8));let _0x4ef6ed;_0x203d6d==_0x1bbe3e(0xcf)?_0x8c9b25=='buy'&&[_0x1bbe3e(0x1f6),_0x1bbe3e(0x22a),'Cex',_0x1bbe3e(0x198),'Huobipro'][_0x1bbe3e(0x251)](config[_0x1bbe3e(0x112)])?_0x4ef6ed=await exchange[_0x1bbe3e(0x10d)](_0x27a432,_0x203d6d,_0x8c9b25,_0x50877b,_0x2a7cee):_0x4ef6ed=await exchange[_0x1bbe3e(0x10d)](_0x27a432,_0x203d6d,_0x8c9b25,_0x50877b,undefined):_0x4ef6ed=await exchange['createOrder'](_0x27a432,_0x203d6d,_0x8c9b25,_0x50877b,_0x2a7cee);logger['debug'](_0x1bbe3e(0x1ca)+_0x4ef6ed['id']+_0x1bbe3e(0x140)+_0x20a598);const _0x1173fb=lastOrders[_0x1bbe3e(0x218)]-0x1;if(_0x1173fb>=0x0&&lastOrders[_0x1173fb][_0x1bbe3e(0x1d2)]==_0x20a598){lastOrders[_0x1173fb][_0x1bbe3e(0x147)]=_0x4ef6ed['id'];if(_0x4ef6ed[_0x1bbe3e(0x197)])lastOrders[_0x1173fb][_0x1bbe3e(0x197)]=_0x4ef6ed[_0x1bbe3e(0x197)];if(_0x4ef6ed[_0x1bbe3e(0xe1)])lastOrders[_0x1173fb][_0x1bbe3e(0xe1)]=_0x4ef6ed['price'];lastOrders[_0x1173fb][_0x1bbe3e(0x1fa)]=_0x4ef6ed[_0x1bbe3e(0x1fa)];}if(config[_0x1bbe3e(0x1b5)]!=0x0){let _0x58fdb3=null;if(cooldownTracker[_0x1bbe3e(0x218)]==config[_0x1bbe3e(0x1b5)]-0x1)_0x58fdb3=cooldownTracker[_0x1bbe3e(0x16a)]();const _0x1d94b9=getTimeStamp();cooldownTracker[_0x1bbe3e(0x100)](_0x1d94b9);if(_0x58fdb3){const _0x1f4ad1=fns['differenceInSeconds'](new Date(_0x1d94b9),new Date(_0x58fdb3));if(_0x1f4ad1<cooldownInterval){logHistory('error','Executed\x20'+config['cooldown']+_0x1bbe3e(0xec)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1bbe3e(0xed)),coolingDown=!![];break;}}}}catch(_0x29e003){if(_0x29e003[_0x1bbe3e(0x206)]()[_0x1bbe3e(0x251)](_0x1bbe3e(0x1ea)))lastOrders=lastOrders[_0x1bbe3e(0xc3)](_0x569d2b=>_0x569d2b[_0x1bbe3e(0xf6)]!=_0x27a432),logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0x240)+_0x27a432),_0x56a6a6=!![];else{if(_0x29e003[_0x1bbe3e(0x206)]()[_0x1bbe3e(0x251)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x1bbe3e(0xc3)](_0x2b01ba=>_0x2b01ba[_0x1bbe3e(0xf6)]!=_0x27a432),logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0x1de)+_0x27a432),_0x56a6a6=!![];else{if(_0x29e003[_0x1bbe3e(0x206)]()[_0x1bbe3e(0x251)]('InvalidOrder'))lastOrders=lastOrders[_0x1bbe3e(0xc3)](_0x19c391=>_0x19c391[_0x1bbe3e(0xf6)]!=_0x27a432),logHistory('error','Order\x20is\x20invalid:\x20'+_0x27a432),logger['debug'](_0x29e003),_0x56a6a6=!![];else _0x29e003['toString']()[_0x1bbe3e(0x251)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x1bbe3e(0xc3)](_0x307827=>_0x307827[_0x1bbe3e(0xf6)]!=_0x27a432),logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0x240)+_0x27a432),_0x56a6a6=!![]):(lastOrders=lastOrders['filter'](_0x3647fd=>_0x3647fd[_0x1bbe3e(0xf6)]!=_0x27a432),await handleError(_0x29e003,'placeOrder()',_0x27a432));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1bbe3e(0x218)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x71428c=config[_0x1bbe3e(0x233)]==_0x1bbe3e(0xcf)?validateOrderTimeout*0x3c*0x3e8:config[_0x1bbe3e(0x253)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x8bef8=_0x1bbe3e;validateOrders(_0x8bef8(0x16c));},_0x71428c);}else unlockOrders();_0x56a6a6&&config[_0x1bbe3e(0x196)]&&(logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0xf5)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1bbe3e(0x196)]&&logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0xf7));else lockOrders!=ORDERS[_0x1bbe3e(0x1cb)]&&(!config[_0x1bbe3e(0x196)]&&(config[_0x1bbe3e(0x233)]==_0x1bbe3e(0xcf)?logHistory(_0x1bbe3e(0x126),_0x1bbe3e(0x14f)):logHistory(_0x1bbe3e(0x126),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x48675c){const _0x3241f4=_0x435db0,_0x410ed6={...config,'openOrders':_0x48675c};let _0x334497=dbConfig['get'](_0x3241f4(0x131))['find']({'botID':botID})[_0x3241f4(0x11f)]();_0x334497&&dbConfig[_0x3241f4(0xd4)](_0x3241f4(0x131))['find']({'botID':botID})[_0x3241f4(0x22f)](_0x410ed6)[_0x3241f4(0xbf)]();}function restoreOrders(){const _0x396d0e=_0x435db0;let _0x6fbde8;config[_0x396d0e(0x1da)]&&allOpenOrders['forEach'](_0x496161=>{const _0x384c12=_0x396d0e,_0x2d3124=config[_0x384c12(0x1da)]['find'](_0x135b54=>_0x135b54['orderId']==_0x496161['id']);_0x2d3124&&(lastOrders[_0x384c12(0x100)](_0x2d3124),_0x6fbde8=_0x496161[_0x384c12(0x1db)]);});if(lastOrders[_0x396d0e(0x218)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x6d2e46=new Date()[_0x396d0e(0x1e3)](),_0x640951=config[_0x396d0e(0x233)]==_0x396d0e(0xcf)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x6fbde8+_0x640951>_0x6d2e46){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x361e4c=_0x396d0e;validateOrders(_0x361e4c(0x16c));},_0x6fbde8+_0x640951-_0x6d2e46);}else validateOrders(_0x396d0e(0x16c));}}async function sendMetricsTelegram(){const _0x467fd5=_0x435db0;if(!coinsLoaded){process[_0x467fd5(0x159)]({'telegrammsg':_0x467fd5(0x172)},_0x893be4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3abb3e='';if(config[_0x467fd5(0x24a)])_0x3abb3e=_0x467fd5(0x13a)+config[_0x467fd5(0x13d)]+_0x467fd5(0x151);else _0x3abb3e='<b>Bot\x20'+botID+_0x467fd5(0x151);const _0x36c14c=getKPIs('basecoin'),_0x2b0891=getKPIs(_0x467fd5(0x132),config[_0x467fd5(0x132)]),_0x371775=getKPIs(_0x467fd5(0xfb)),_0x313b8c=getKPIs(_0x467fd5(0x18d),config['fiat']);_0x3abb3e+='<pre>',_0x3abb3e+=_0x36c14c['leftTxt']+_0x467fd5(0x216)+_0x36c14c[_0x467fd5(0x11f)]+'\x0a',_0x3abb3e+=_0x36c14c[_0x467fd5(0x16e)]+':\x20'+_0x36c14c[_0x467fd5(0x1a9)]+'%\x0a',_0x3abb3e+=_0x2b0891[_0x467fd5(0x102)]+_0x467fd5(0x216)+_0x2b0891[_0x467fd5(0x11f)]+'\x0a',_0x3abb3e+=_0x2b0891[_0x467fd5(0x16e)]+':\x20'+_0x2b0891['change']+'%\x0a',_0x3abb3e+=_0x371775['leftTxt']+':\x20'+_0x371775['value']+'\x20('+config[_0x467fd5(0xc5)]+')\x0a',_0x3abb3e+=_0x371775[_0x467fd5(0x16e)]+':\x20'+_0x371775['change']+_0x467fd5(0x193)+config[_0x467fd5(0xc5)]+')\x0a',_0x3abb3e+=_0x313b8c[_0x467fd5(0x102)]+':\x20'+_0x313b8c[_0x467fd5(0x11f)]+'\x20('+config['fiat']+')\x0a',_0x3abb3e+=_0x313b8c[_0x467fd5(0x16e)]+':\x20'+_0x313b8c[_0x467fd5(0x1a9)]+'%\x20('+config[_0x467fd5(0x132)]+')\x0a',_0x3abb3e+=_0x467fd5(0x168),process['send']({'telegrammsg':_0x3abb3e},_0x37b645=>{});}async function sendPortfolioTelegram(){const _0x1a89c1=_0x435db0;if(!coinsLoaded){process[_0x1a89c1(0x159)]({'telegrammsg':_0x1a89c1(0x172)},_0x2a7b7d=>{});return;}let _0x3cd694='';if(config['showname'])_0x3cd694='<b>'+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x3cd694=_0x1a89c1(0x248)+botID+_0x1a89c1(0xc9);_0x3cd694+=_0x1a89c1(0x10c),_0x3cd694+='-------------------------------\x0a',_0x3cd694+=_0x1a89c1(0x160),_0x3cd694+=_0x1a89c1(0x1fc),currentCoins[_0x1a89c1(0x15a)](_0x31ba48=>{const _0x122297=_0x1a89c1;_0x3cd694+=_0x31ba48[_0x122297(0x1c2)][_0x122297(0x161)](0x7)+'|\x20'+formatPad(_0x31ba48[_0x122297(0x177)],0x2,0x6)+'|\x20'+formatPad(_0x31ba48['target'],0x2,0x6)+'|\x20'+formatPad(_0x31ba48['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3cd694+=_0x1a89c1(0x168),process['send']({'telegrammsg':_0x3cd694},_0x383f47=>{});}function formatPad(_0x2b797a,_0xcdd919,_0x58c135){const _0x281c76=_0x435db0,_0x4e898d=formatResultString(_0x2b797a,_0xcdd919);return _0x4e898d?_0x4e898d[_0x281c76(0xe8)](_0x58c135):''[_0x281c76(0xe8)](_0x58c135);}function logHistory(_0x299da7,_0x255983,_0x172e43=''){const _0x48e4cb=_0x435db0;logger['full'](''+_0x255983);let _0x54bbb2={'time':getTimeStamp(),'type':_0x299da7,'event':_0x255983};dbLogs[_0x48e4cb(0xd4)](_0x48e4cb(0x176))['push'](_0x54bbb2)[_0x48e4cb(0xbf)]();if(_0x172e43=='')_0x172e43=_0x255983;proxyEmit(_0x48e4cb(0x174),{'log':_0x54bbb2,'summary':_0x172e43}),process['send']({'telegram':{..._0x54bbb2,'botname':config['botname'],'showname':config['showname']}},_0x9f8cd8=>{});}function emitHistory(_0x125102={}){const _0x31d129=_0x435db0;Object[_0x31d129(0xcd)](_0x125102)[_0x31d129(0x218)]==0x0&&(_0x125102={'type':[_0x31d129(0x125),_0x31d129(0x174)],'event':'','page':0x1});if(_0x125102[_0x31d129(0x219)][_0x31d129(0x251)](_0x31d129(0x174)))_0x125102[_0x31d129(0x219)][_0x31d129(0xd3)](_0x125102[_0x31d129(0x219)][_0x31d129(0x1f0)]('event'),0x1,_0x31d129(0x126),'warning','success');if(dbLogs['has'](_0x31d129(0x176))['value']()){let _0x4877e9=dbLogs[_0x31d129(0xd4)](_0x31d129(0x176))['filter'](_0x19901f=>{const _0x2f2c35=_0x31d129;if(_0x125102[_0x2f2c35(0x219)][_0x2f2c35(0x218)]==0x0)return![];else return _0x125102[_0x2f2c35(0x219)][_0x2f2c35(0x251)](_0x19901f[_0x2f2c35(0x219)]);})[_0x31d129(0xc3)](_0x40e34a=>{const _0x13c861=_0x31d129;if(_0x125102[_0x13c861(0x174)]=='')return!![];else return _0x40e34a[_0x13c861(0x174)]['toLowerCase']()[_0x13c861(0x251)](_0x125102[_0x13c861(0x174)][_0x13c861(0x171)]());})[_0x31d129(0x1d7)](_0x31d129(0xf0)),_0x529c43=_0x4877e9[_0x31d129(0x11f)]()[_0x31d129(0x218)];_0x4877e9=_0x4877e9[_0x31d129(0x190)]()[_0x31d129(0x19c)]((_0x125102[_0x31d129(0x104)]-0x1)*logPageSize,_0x125102[_0x31d129(0x104)]*logPageSize-0x1)[_0x31d129(0x190)]()[_0x31d129(0x11f)](),proxyEmit(_0x31d129(0x150),{'logs':_0x4877e9,'total':_0x529c43});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x343a11){const _0x43bc1f=_0x435db0;if(dbLogs[_0x43bc1f(0x158)](_0x43bc1f(0x176))['value']()){const _0xe44148=dbLogs['get'](_0x43bc1f(0x176))[_0x43bc1f(0x1d7)](_0x43bc1f(0xf0))[_0x43bc1f(0xc3)](_0x1daa1b=>{const _0x4f1b18=_0x43bc1f;return _0x1daa1b[_0x4f1b18(0x219)]=='order';})[_0x43bc1f(0x11f)]();dbLogs[_0x43bc1f(0xd4)](_0x43bc1f(0x176))[_0x43bc1f(0x223)]()[_0x43bc1f(0xbf)](),dbLogs[_0x43bc1f(0xd4)](_0x43bc1f(0x176))['assign'](_0xe44148)[_0x43bc1f(0xbf)](),emitHistory(_0x343a11);}}async function pauseBot(_0x3e8f10=pauseBotInterval){const _0x171dfe=_0x435db0,_0x351f47=new Date()[_0x171dfe(0x1e3)]();if(!lastErrorShown||_0x351f47-lastErrorShown>=_0x3e8f10){lastErrorShown=_0x351f47;!lastBotPause?(lastBotPause=_0x351f47,consecutivePauses=0x1):(_0x351f47-lastBotPause-_0x3e8f10<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x171dfe(0x159)]({'stop':_0x171dfe(0x18b)},_0x239170=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x171dfe(0x1e3)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x3e8f10),botPaused=![],reset(!![]);}}}async function killBot(){const _0x204edb=_0x435db0;botPaused=!![],await sleep(0x3e8),process[_0x204edb(0x159)]({'stop':_0x204edb(0x163)},_0xf38a52=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x19e653,_0x13caca){const _0x1e68d6=_0x435db0;if(botPaused)return;const _0x28339d=config[_0x1e68d6(0x112)]||_0x1e68d6(0xd0);if(_0x13caca)logger[_0x1e68d6(0x221)](_0x1e68d6(0x148)+_0x13caca);const _0x278594=()=>{const _0x3316c7=_0x1e68d6;loading[_0x3316c7(0x126)]=!![],emitLoadingProgress();};if(_0x19e653[_0x1e68d6(0x206)]()[_0x1e68d6(0x251)](_0x1e68d6(0x1a2)))logHistory('error',_0x28339d+_0x1e68d6(0x224)),_0x278594();else{if(_0x19e653['toString']()[_0x1e68d6(0x251)](_0x1e68d6(0x225)))logHistory(_0x1e68d6(0x126),_0x28339d+_0x1e68d6(0x108)),_0x278594();else _0x19e653[_0x1e68d6(0x206)]()['includes'](_0x1e68d6(0x170))?(logHistory('error',_0x28339d+_0x1e68d6(0x1bd)),logHistory(_0x1e68d6(0x126),_0x1e68d6(0xbd)),_0x278594()):await handleError(_0x19e653,null);}}async function handleError(_0x1d9a29,_0x3b1c26,_0x2ead68=''){const _0x6955e7=_0x435db0;if(botPaused)return;const _0xf82f9a=config[_0x6955e7(0x112)]||_0x6955e7(0xd0);if(_0x3b1c26)logger[_0x6955e7(0x221)]('Exception\x20thrown\x20in\x20'+_0x3b1c26);if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)](_0x6955e7(0x12e))||_0x1d9a29['toString']()['includes'](_0x6955e7(0x1be)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0xdf)+pauseBotMsg),await pauseBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)]('ExchangeNotAvailable')||_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)]('OnMaintenance'))logHistory('error',_0xf82f9a+_0x6955e7(0x1c9)+pauseBotMsg),await pauseBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()['includes']('RequestTimeout'))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x105)+pauseBotMsg),await pauseBot();else{if(_0x1d9a29['toString']()['includes'](_0x6955e7(0x1f8)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x20a)+pauseBotMsg),await pauseBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1d9a29['toString']()['includes'](_0x6955e7(0x1d6)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x232)+pauseBotMsgLong),logHistory('error','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync'),await pauseBot(pauseBotIntervalLong);else{if(_0x1d9a29 instanceof ccxt[_0x6955e7(0x187)])logHistory('error',_0xf82f9a+_0x6955e7(0x238)+pauseBotMsg),logger[_0x6955e7(0x221)](_0x6955e7(0x1e8),_0x1d9a29),await pauseBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)](_0x6955e7(0x1a2)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x236)),logHistory('error',_0x6955e7(0xe9)),await killBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)](_0x6955e7(0x225)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x118)),logHistory('error',_0x6955e7(0xe9)),await killBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)](_0x6955e7(0x170)))logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x165)),logHistory(_0x6955e7(0x126),_0x6955e7(0xe9)),await killBot();else{if(_0x1d9a29['toString']()[_0x6955e7(0x251)](_0x6955e7(0x212)))logHistory('error',_0xf82f9a+_0x6955e7(0x13e)),logHistory(_0x6955e7(0x126),_0x6955e7(0xe9)),await killBot();else{if(_0x1d9a29[_0x6955e7(0x206)]()[_0x6955e7(0x251)](_0x6955e7(0x21c)))logHistory(_0x6955e7(0x126),_0x6955e7(0xfc)+_0x2ead68);else _0x1d9a29 instanceof ccxt[_0x6955e7(0xd5)]?(logHistory(_0x6955e7(0x126),_0xf82f9a+_0x6955e7(0x1e9)),logger[_0x6955e7(0x221)](_0x6955e7(0x1e8),_0x1d9a29)):(logHistory(_0x6955e7(0x126),'Unknown\x20error\x20occured'+pauseBotMsg),logger[_0x6955e7(0x221)](_0x6955e7(0x1e8),_0x1d9a29),await pauseBot());}}}}}}}}}}}}function formatResult(_0x5d6b22,_0x1ab6ef){const _0x45be72=_0x435db0;return parseFloat(_0x5d6b22[_0x45be72(0x1b8)](_0x1ab6ef));}function formatResultTruncate(_0x3e832b,_0x4e427f){const _0x54e3c2=_0x435db0;let _0x5c9c43=formatResultString(_0x3e832b,0xa),_0x5417ed=_0x5c9c43[_0x54e3c2(0x1f0)]('.');return _0x5417ed!=-0x1&&(_0x5c9c43=_0x5c9c43[_0x54e3c2(0x19c)](0x0,_0x5417ed+_0x4e427f+0x1)),Number(_0x5c9c43);}function formatResultString(_0x58a30c,_0x56125e){const _0x2b107b=_0x435db0;let _0xf5ced0;if(!(''+_0x58a30c)[_0x2b107b(0x251)]('e'))_0xf5ced0=+(Math[_0x2b107b(0x12b)](_0x58a30c+'e+'+_0x56125e)+'e-'+_0x56125e);else{let _0x37e1e9=(''+_0x58a30c)['split']('e'),_0x49c089='';+_0x37e1e9[0x1]+_0x56125e>0x0&&(_0x49c089='+'),_0xf5ced0=+(Math[_0x2b107b(0x12b)](+_0x37e1e9[0x0]+'e'+_0x49c089+(+_0x37e1e9[0x1]+_0x56125e))+'e-'+_0x56125e);}return Number(_0xf5ced0)[_0x2b107b(0x1b8)](_0x56125e);}function getServerTime(){const _0x29c1b3=_0x435db0,_0x16383f=new Date();return _0x16383f[_0x29c1b3(0xc1)]()+'/'+(_0x16383f[_0x29c1b3(0x12d)]()+0x1)[_0x29c1b3(0x206)]()[_0x29c1b3(0xe8)](0x2,'0')+'/'+_0x16383f[_0x29c1b3(0x173)]()[_0x29c1b3(0x206)]()[_0x29c1b3(0xe8)](0x2,'0')+'\x20'+_0x16383f[_0x29c1b3(0x241)]()[_0x29c1b3(0x206)]()[_0x29c1b3(0xe8)](0x2,'0')+':'+_0x16383f[_0x29c1b3(0x256)]()[_0x29c1b3(0x206)]()[_0x29c1b3(0xe8)](0x2,'0')+':'+_0x16383f['getSeconds']()['toString']()[_0x29c1b3(0xe8)](0x2,'0');}function getTimeStamp(){const _0x1a83f3=_0x435db0,_0x576f7b=shiftedTime();return _0x576f7b[_0x1a83f3(0xc1)]()+'/'+(_0x576f7b[_0x1a83f3(0x12d)]()+0x1)[_0x1a83f3(0x206)]()[_0x1a83f3(0xe8)](0x2,'0')+'/'+_0x576f7b[_0x1a83f3(0x173)]()['toString']()[_0x1a83f3(0xe8)](0x2,'0')+'\x20'+_0x576f7b[_0x1a83f3(0x241)]()[_0x1a83f3(0x206)]()[_0x1a83f3(0xe8)](0x2,'0')+':'+_0x576f7b[_0x1a83f3(0x256)]()[_0x1a83f3(0x206)]()[_0x1a83f3(0xe8)](0x2,'0')+':'+_0x576f7b[_0x1a83f3(0x179)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x1350f0=_0x435db0,_0x11e1c6=shiftedTime();return _0x11e1c6[_0x1350f0(0xc1)]()+'/'+(_0x11e1c6[_0x1350f0(0x12d)]()+0x1)[_0x1350f0(0x206)]()[_0x1350f0(0xe8)](0x2,'0')+'/'+_0x11e1c6[_0x1350f0(0x173)]()[_0x1350f0(0x206)]()[_0x1350f0(0xe8)](0x2,'0');}function getHour(){const _0x2f4de8=_0x435db0,_0x8ad114=shiftedTime();return _0x8ad114[_0x2f4de8(0x241)]()['toString']()[_0x2f4de8(0xe8)](0x2,'0');}function sleep(_0x38cae2){return new Promise(_0x5d078b=>setTimeout(_0x5d078b,_0x38cae2));}function shiftedTime(){const _0x575a4d=_0x435db0,_0x38845b=new Date();let _0x375d80=_0x38845b;if(config&&config[_0x575a4d(0x141)]!==0x0)_0x375d80=fns[_0x575a4d(0x12c)](_0x38845b,{'hours':config['timeshift']});return _0x375d80;}function timer(_0x53299b){const _0x59a93a=_0x435db0,_0x4dba1b=new Date();!lasttime?console['log'](getTimeStamp()+_0x59a93a(0x1a8),_0x53299b,_0x4dba1b):console[_0x59a93a(0x191)](getTimeStamp()+_0x59a93a(0x1a8),_0x53299b,(_0x4dba1b-lasttime)/0x3e8),lasttime=_0x4dba1b;}