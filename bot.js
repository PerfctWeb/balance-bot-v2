const _0x807ea=_0x534f;(function(_0x434355,_0x1fe7aa){const _0x4049c1=_0x534f,_0x37f124=_0x434355();while(!![]){try{const _0x2b1a9c=-parseInt(_0x4049c1(0x175))/0x1*(parseInt(_0x4049c1(0x212))/0x2)+parseInt(_0x4049c1(0x137))/0x3+parseInt(_0x4049c1(0x260))/0x4*(parseInt(_0x4049c1(0x1c5))/0x5)+-parseInt(_0x4049c1(0x2a0))/0x6*(-parseInt(_0x4049c1(0x1d4))/0x7)+parseInt(_0x4049c1(0x182))/0x8*(parseInt(_0x4049c1(0x18f))/0x9)+parseInt(_0x4049c1(0x214))/0xa*(parseInt(_0x4049c1(0x27e))/0xb)+-parseInt(_0x4049c1(0x1e3))/0xc*(parseInt(_0x4049c1(0x1e9))/0xd);if(_0x2b1a9c===_0x1fe7aa)break;else _0x37f124['push'](_0x37f124['shift']());}catch(_0x4bb397){_0x37f124['push'](_0x37f124['shift']());}}}(_0x3f7c,0x8c22b));const _0x27de1e=function(){let _0x359af6=!![];return function(_0x410a11,_0x3cffa3){const _0x89ce5c=_0x359af6?function(){if(_0x3cffa3){const _0x3bfeeb=_0x3cffa3['apply'](_0x410a11,arguments);return _0x3cffa3=null,_0x3bfeeb;}}:function(){};return _0x359af6=![],_0x89ce5c;};}(),_0x321ce7=_0x27de1e(this,function(){const _0x3f8bc8=_0x534f;return _0x321ce7['toString']()[_0x3f8bc8(0x143)](_0x3f8bc8(0x20b))[_0x3f8bc8(0x272)]()[_0x3f8bc8(0x249)](_0x321ce7)['search'](_0x3f8bc8(0x20b));});_0x321ce7();'use strict';function _0x534f(_0x6309e6,_0x1d2576){const _0xa6748d=_0x3f7c();return _0x534f=function(_0x321ce7,_0x27de1e){_0x321ce7=_0x321ce7-0x10b;let _0x3f7cb1=_0xa6748d[_0x321ce7];return _0x3f7cb1;},_0x534f(_0x6309e6,_0x1d2576);}const ccxt=require(_0x807ea(0x13e)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x807ea(0x1f5))[_0x807ea(0x160)],util=require(_0x807ea(0x1c4)),argv=require(_0x807ea(0x204))(process[_0x807ea(0x10c)][_0x807ea(0x16d)](0x2))[_0x807ea(0x10c)],path=require('path');let exchange;global[_0x807ea(0x1c2)]={},global[_0x807ea(0x251)]={};const usdBasecoins=['USD',_0x807ea(0x1e7),_0x807ea(0x112),_0x807ea(0x1c6),'USDC',_0x807ea(0x16c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x807ea(0x181)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});function _0x3f7c(){const _0x478db2=['\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','date','net-fiat','fetchTickers','\x20API\x20key\x20is\x20invalid','entries','createOrder','indexOf','side','initial','last','filled','showConfig','Huobipro','storeConfiguration','balances','set','\x20|\x20lock\x20orders:\x20','Bot\x20','AuthenticationError','exchanges','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20portfolio:</b>\x20\x0a\x0a','Bitget','password','string','initTickers()','parse','botname','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','sells','getStartingBalances','stopExchange()','Net\x20effect','Order\x20is\x20invalid:\x20','toFixed','ordertype','buys','event','Resetting\x20bot\x20history','test','recovery','constructor','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','kill','starting-balance-','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20minutes','2\x20-\x20Orders\x20unlocked','Invalid\x20quantity','change','-performance.json','BNB','unlinkSync','\x20value','amount','\x20|\x20highest\x20fee:\x20','write','bot-','leftTxt','substring','\x20hour','\x20has\x20a\x2024h\x20drop\x20of\x20','max','realized','235252ZHKzZL','min','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','canceled','percentage','Exchange','\x20|\x20','\x20>\x20','number','apiPassword','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','customId','stringify','status','cooldown','fees','timeout','toString','2.3.5','event-history','open','Manual\x20balancing\x20required','ETH','Invalid\x20API\x20key\x20or\x20secret\x20entered','limit-high','changes','\x20exchange','./config/','forEach','8556295dcKvUD','watchTrades(2)','keys','amountToPrecision','ask','\x20metrics:</b>\x20\x0a\x0a','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20order:\x20','fetchOpenOrders','data','success','delta','MIN_NOTIONAL','startprice','split','basecoin','3\x20-\x20handling\x20FILLED\x20order:\x20','getMinutes','1\x20-\x20FILLED:\x20','filter','floor','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','2\x20-\x20Validate\x20orders:\x20','none','getPortfolio(1)','splice','function','Avoiding\x20continuous\x20order\x20attempts','Unknown\x20error\x20occured','yyyy/MM/dd','2\x20-\x20FILLED\x20unknown\x20order:\x20','debug','startnumber','Limit\x20(low-margin)','885498gTdtvb','close','argv','has','Cex','existsSync','random','</pre>','TUSD','ongoing','change24h','ID:\x20','balancing\x20resumed','fetchClosedOrders','format','exchange','getPortfolio','Reset\x20|\x20','basecoinvalue','Binance','createWriteStream','add','0\x20-\x20EXECUTION:\x20','RateLimitExceeded','loadSymbols()','%\x20(','2.5.0','getAllOrders','DDoSProtection','fetchBalance','getTime','LOCKED','sortBy','OrderNotFound','-results.json','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','<pre>','privateKey','added','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','startsWith','time','/backup/','getDate','orderId','2018298NjTVVl','spot','resetHistory','cancel','symbol','isEqual','replace','ccxt','emitHistory',':\x20Bot\x20','headless','emojisell','search','\x20closed\x20the\x20connection','getCoins()','emojibuy','fromCodePoint','exchange\x20not\x20reloaded','RSA-OAEP','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','active',',\x20must\x20be\x20a\x203\x20digit\x20number','-config.json','offset','round','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','log','length','decrypt','-events.json','cancelOrders()','type','limits','toLowerCase','************','removed','coin-loading-progress','Fee\x20discount\x20refund\x20detected:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Order\x20amount\x20is\x20invalid:\x20','cancelLoading','Crypt','performance','shift','onepagemode','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','InsufficientFunds','threshold','bb-settings.json','coins','\x20API\x20secret\x20is\x20invalid','UNLOCKED','page','USDP','slice','Error\x20while\x20deleting\x20files:\x20','loading-canceled','abs','USD','mkdirSync','RequestTimeout','-------------------------------\x0a','5IWCGuG','\x20orders\x20in\x20less\x20than\x20','BTC','fee','openOrders','restart','watchTransactions','highest','datetime','cancelOrder','settings','Initializing\x20coin\x20results','freeze','8gnNkTA','defaults','startdate','closed','full','API-key\x20format\x20invalid','enabled','NetworkError','EUR','\x20:\x20','/output-000.log','ORDERS.UNLOCKED','\x20minutes\x20-\x20','10069983sknnCg','Waited\x20','send','parseISO','red_yellow_blue','ORDERS.LOCKED','recreate','message','milliseconds','sort','trade','cloneDeep','Huobi','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sell','fiat','warning','Portfolio\x20change\x20detected:\x20','watchOrders','InvalidOrder','fetchTicker','ExchangeNotAvailable','UNLOCKING','recent20','differenceInSeconds','balancing\x20resumes\x20when\x20cooldown\x20ends','Market','apiKey','assign','Executing\x20exchange\x20reload','\x20-\x20bot\x20not\x20started','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','progress','market','Unfilled\x20order(s)\x20canceled\x20after\x20','2.6.0','order','placeOrder()','Saving\x20configuration','liquidity','configuration','/EUR','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getFullYear','currency','No\x20more\x20open\x20orders\x20-\x20','rightTxt','\x20|\x20Custom\x20ID:\x20',':\x20timer\x20>','bb-secure.json','buy','ticker','bots','util','80qzXRpW','USDT','recreateCoinResults()','001','sha256','exec','running','apiSecret','<b>','no\x20open\x20orders','version','Order(s)\x20not\x20validated\x20after\x20','join','value','\x20|\x20Error\x20details:','49qvHkeR','usd','\x20|\x20exchange:\x20','showname','bot','getMonth','reverse','excluded','net-basecoin','coin','portfolio','getPortfolio(2)','findIndex','logs','error','1366716TdljGN','getCoinNumber()','padStart','distribution','BUSD','storeFiat','442EwtJXw','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','uncaughtException','sendPortfolioTelegram','Transaction\x20detection\x20unblocked','\x20network\x20error','getSeconds','eur','ExchangeError','timeshift','padEnd','starting-balances','hybrid-crypto-js','Initiating\x20exchange\x20reload','total','exchange\x20reloaded','remainingSymbols','limit','Bybit','find','2\x20-\x20Handled\x20open\x20orders','sendMetricsTelegram','breakeven','loadMarkets','pro','Executed\x20','getHours','yargs/yargs','limit-low','orderstatus','Pausing\x20for\x20','price','args','final','(((.+)+)+)+$','cost','botID','InvalidNonce','Insufficient\x20funds\x20to\x20execute\x20order:\x20','includes','timestamp','38892NobBtd','map','10ghsYPK','target','get','autoliquidity','BNB/','bid','colorscheme','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','valid','concat','push'];_0x3f7c=function(){return _0x478db2;};return _0x3f7c();}let lockOrders=ORDERS[_0x807ea(0x16a)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x807ea(0x1cf)],botID=process['argv'][0x2]||_0x807ea(0x1c8),pattern=/^[0-9]{3}$/;!pattern[_0x807ea(0x247)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x807ea(0x14c)),killBot());const userID=process[_0x807ea(0x10c)][0x3]||'',configpath=userID?_0x807ea(0x27c)+userID+'/':_0x807ea(0x27c),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x807ea(0x11e)](logspath+_0x807ea(0x18c),{'flags':'a'});!fs[_0x807ea(0x10f)](configpath)&&fs[_0x807ea(0x172)](configpath);!fs[_0x807ea(0x10f)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x807ea(0x259)+botID+_0x807ea(0x14d),logfile=configpath+_0x807ea(0x259)+botID+_0x807ea(0x154),performancefile=configpath+_0x807ea(0x259)+botID+_0x807ea(0x252),coinresultsfile=configpath+'bot-'+botID+_0x807ea(0x12c),settingsfile=configpath+_0x807ea(0x167),securefile=configpath+_0x807ea(0x1c0),configbackuppath=configpath+_0x807ea(0x134),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x807ea(0x183)]({'logs':[],'version':serverversion})[_0x807ea(0x258)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x807ea(0x183)]({'data':[],'version':serverversion})[_0x807ea(0x258)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x807ea(0x183)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x807ea(0x1c9),'rsaStandard':_0x807ea(0x149)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2a8f31=>{const _0xe637a=_0x807ea;console[_0xe637a(0x151)](_0x2a8f31);},'simple':_0x42e982=>{const _0x21013e=_0x807ea;console[_0x21013e(0x151)](_0x42e982),loggerfile['write'](util[_0x21013e(0x118)](_0x42e982)+'\x0a');},'full':async(_0x12cc69,_0x180475='')=>{const _0x59ada7=_0x807ea;let _0x141101;if(config[_0x59ada7(0x1d7)])_0x141101=getTimeStamp()+':\x20'+config[_0x59ada7(0x23b)]+_0x59ada7(0x267)+_0x12cc69;else _0x141101=getTimeStamp()+_0x59ada7(0x140)+botID+_0x59ada7(0x267)+_0x12cc69;console[_0x59ada7(0x151)](_0x141101),loggerfile[_0x59ada7(0x258)](util['format'](_0x141101)+'\x0a'),_0x180475&&(console['log'](_0x180475),loggerfile[_0x59ada7(0x258)](util[_0x59ada7(0x118)](_0x180475)+'\x0a'));},'debug':async(_0x309efc,_0x49e225='')=>{const _0x48b3c1=_0x807ea;let _0x4a3b68;if(config[_0x48b3c1(0x1d7)])_0x4a3b68=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x309efc;else _0x4a3b68=getTimeStamp()+_0x48b3c1(0x140)+botID+'\x20>\x20[DEBUG]\x20'+_0x309efc;if(debugging)console[_0x48b3c1(0x151)](_0x4a3b68);loggerfile[_0x48b3c1(0x258)](util[_0x48b3c1(0x118)](_0x4a3b68)+'\x0a');if(_0x49e225){if(debugging)console['log'](_0x49e225);loggerfile[_0x48b3c1(0x258)](util[_0x48b3c1(0x118)](_0x49e225)+'\x0a');}}};process['on'](_0x807ea(0x1eb),function(_0x4aec52){const _0x37f97c=_0x807ea;logHistory('error',_0x37f97c(0x164)),logger[_0x37f97c(0x29d)]('Uncaught\x20Exception:',_0x4aec52);});settings[_0x807ea(0x1f2)]!=config[_0x807ea(0x1f2)]&&updateTimeshift(settings[_0x807ea(0x1f2)]);settings[_0x807ea(0x163)]!=config['onepagemode']&&updateOnepagemode(settings[_0x807ea(0x163)]);process[_0x807ea(0x191)]({'started':_0x807ea(0x1cb)},_0x215b66=>{}),initializeProcessListeners();function proxyEmit(_0x17fcb9,_0xe8527c=null){process['send']({'function':_0x17fcb9,'args':_0xe8527c},_0x4ed82b=>{});}function initializeProcessListeners(){const _0xa77e88=_0x807ea;process['on'](_0xa77e88(0x196),_0x4fbf45=>{const _0x39aa68=_0xa77e88;switch(Object['keys'](_0x4fbf45)[0x0]){case _0x39aa68(0x1f2):_0x4fbf45[_0x39aa68(0x1f2)]!=undefined&&(settings['timeshift']=_0x4fbf45[_0x39aa68(0x1f2)],updateTimeshift(settings[_0x39aa68(0x1f2)]));break;case _0x39aa68(0x163):_0x4fbf45['onepagemode']!=undefined&&(settings[_0x39aa68(0x163)]=_0x4fbf45[_0x39aa68(0x163)],updateOnepagemode(settings[_0x39aa68(0x163)]));break;case _0x39aa68(0x1c3):_0x4fbf45['bots']!=undefined&&(bots=JSON[_0x39aa68(0x23a)](_0x4fbf45[_0x39aa68(0x1c3)]),proxyEmit(_0x39aa68(0x1c3),bots));break;case _0x39aa68(0x298):switch(_0x4fbf45[_0x39aa68(0x298)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x39aa68(0x13f):emitHistory(_0x4fbf45[_0x39aa68(0x209)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4fbf45['args']);break;case _0x39aa68(0x11a):getPortfolio(_0x4fbf45['args']);break;case _0x39aa68(0x22d):storeConfiguration(_0x4fbf45[_0x39aa68(0x209)]);break;case'storeHeadless':storeHeadless(_0x4fbf45['args']);break;case _0x39aa68(0x1e8):storeFiat(_0x4fbf45[_0x39aa68(0x209)]);break;case _0x39aa68(0x139):resetHistory();break;case _0x39aa68(0x23e):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4fbf45[_0x39aa68(0x209)]);break;case _0x39aa68(0x15f):cancelLoading();break;case _0x39aa68(0x22b):showConfig();break;case _0x39aa68(0x1fe):sendMetricsTelegram();break;case _0x39aa68(0x1ec):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x568481=null,_0x1c0a92=![]){const _0x44f8ba=_0x807ea;logger['debug'](_0x44f8ba(0x11b)+(_0x568481&&_0x568481[_0x44f8ba(0x152)]>0x0?'additional\x20symbols\x20'+_0x568481[_0x44f8ba(0x1d1)](','):'no\x20additional\x20symbols')+'\x20|\x20'+(_0x1c0a92?_0x44f8ba(0x1f8):_0x44f8ba(0x148))+_0x44f8ba(0x1d6)+config[_0x44f8ba(0x119)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1c0a92)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x44f8ba(0x1aa)]!=''&&config[_0x44f8ba(0x1aa)]!='***'){if(_0x1c0a92){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x366de1){handleErrorNoStop(_0x366de1,_0x44f8ba(0x122));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x568481);const _0x327ab9=await getCoins();currentCoins=_0x327ab9[0x0],currentCoinsAll=_0x327ab9[0x1],exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x12e293=_0x807ea;exchangeStopped=!![];try{await exchange[_0x12e293(0x10b)]();}catch(_0x59146c){await handleError(_0x59146c,_0x12e293(0x23f));}}async function reloadExchange(){const _0x384a54=_0x807ea;logger['debug'](_0x384a54(0x1f6));while(lockOrders!=ORDERS[_0x384a54(0x16a)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x384a54(0x29d)](_0x384a54(0x1ac)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x382f5f=config['exchange'],_0x2f34b5=config[_0x807ea(0x1aa)],_0x2e0d20=config[_0x807ea(0x1cc)],_0x461658=config['apiPassword']){const _0x51a5f6=_0x807ea;exchange&&await stopExchange();!supportedExchanges()[_0x51a5f6(0x210)](_0x382f5f)&&(logHistory(_0x51a5f6(0x1e2),_0x51a5f6(0x12d)+_0x382f5f+_0x51a5f6(0x27b)),killBot());const _0x4c6fa8=ccxt[_0x51a5f6(0x201)][_0x382f5f[_0x51a5f6(0x158)]()];exchange=new _0x4c6fa8({'apiKey':_0x2f34b5,'secret':_0x2e0d20,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x51a5f6(0x138)}});if(_0x461658)exchange[_0x51a5f6(0x237)]=_0x461658;}function setStableCoins(){const _0x4fc064=_0x807ea;let _0x37e4d9=config[_0x4fc064(0x28d)]==_0x4fc064(0x277)?_0x4fc064(0x277):_0x4fc064(0x177),_0x5aa66f=!allSymbols['includes'](_0x37e4d9+'/USD')?'USDT':_0x4fc064(0x171),_0x4ae2b0=!allSymbols[_0x4fc064(0x210)](_0x37e4d9+_0x4fc064(0x1b8))?_0x5aa66f:_0x4fc064(0x18a);stablecoins={'eur':{'coin':''+_0x37e4d9+_0x4ae2b0,'symbol':_0x37e4d9+'/'+_0x4ae2b0},'usd':{'coin':''+_0x37e4d9+_0x5aa66f,'symbol':_0x37e4d9+'/'+_0x5aa66f}};}async function initwsCcxt(_0x8c1425){const _0x21caad=_0x807ea;_0x8c1425==null&&(_0x8c1425=[],config[_0x21caad(0x1de)]['forEach'](_0x26fbba=>{const _0x3447c9=_0x21caad;if(!_0x26fbba[_0x3447c9(0x1db)]&&_0x26fbba[_0x3447c9(0x1dd)]!=config[_0x3447c9(0x28d)])_0x8c1425['push'](_0x26fbba[_0x3447c9(0x13b)]);}));if(!_0x8c1425[_0x21caad(0x210)](stablecoins[_0x21caad(0x1f0)][_0x21caad(0x13b)]))_0x8c1425[_0x21caad(0x21e)](stablecoins[_0x21caad(0x1f0)][_0x21caad(0x13b)]);if(!_0x8c1425[_0x21caad(0x210)](stablecoins['usd'][_0x21caad(0x13b)]))_0x8c1425[_0x21caad(0x21e)](stablecoins[_0x21caad(0x1d5)][_0x21caad(0x13b)]);if(config['exchange'][_0x21caad(0x132)](_0x21caad(0x11d))){if(!_0x8c1425['includes']('BNB/'+config[_0x21caad(0x28d)]))_0x8c1425['push'](_0x21caad(0x218)+config[_0x21caad(0x28d)]);}loadCoins(_0x8c1425);const _0x71821e=async _0x49f6f0=>{const _0x56cf01=_0x21caad;let _0x43206d;try{const _0x4fdaae=await exchange[_0x56cf01(0x222)](_0x49f6f0);Object['entries'](_0x4fdaae)[_0x56cf01(0x27d)](_0x295b73=>{const _0x129774=_0x56cf01;_0x43206d=_0x295b73[0x1][_0x129774(0x13b)],global[_0x129774(0x1c2)][noslash(_0x43206d)]=_0x295b73[0x1][_0x129774(0x229)];});}catch(_0x228bc8){await handleError(_0x228bc8,_0x56cf01(0x239),_0x43206d);}},_0x565956=async _0x3e182d=>{const _0x4a4d23=_0x21caad;while(!![]){if(!botPaused)try{const _0x47aa1d=await exchange['watchTrades'](_0x3e182d);global[_0x4a4d23(0x1c2)][noslash(_0x47aa1d[0x0][_0x4a4d23(0x13b)])]=_0x47aa1d[0x0][_0x4a4d23(0x208)],await sleep(0x3e8);}catch(_0x2c079d){if(!exchangeStopped)await handleError(_0x2c079d,_0x4a4d23(0x27f),_0x3e182d);}else await sleep(0x64);}},_0x39f27b=async _0x35a62c=>{const _0xc2347b=_0x21caad;while(!![]){if(!botPaused)try{const _0x423238=await exchange['fetchTicker'](_0x35a62c);global['change'][_0x423238['symbol']]=_0x423238[_0xc2347b(0x264)],await sleep(0x3c*0x3e8);}catch(_0xfa43f2){if(!exchangeStopped)await handleError(_0xfa43f2,_0xc2347b(0x222),_0x35a62c);}else await sleep(0x64);}},_0x34bcad=async _0x1dd7a9=>{const _0x277c9d=_0x21caad;while(!![]){if(!botPaused)try{const _0x1fbf3b=await exchange[_0x277c9d(0x1a1)](_0x1dd7a9);_0x1fbf3b[_0x277c9d(0x27d)](_0x2f278c=>{updateNumberCoinsCcxt(_0x2f278c);});}catch(_0x4b8010){if(!exchangeStopped)await handleError(_0x4b8010,_0x277c9d(0x1a1));}else await sleep(0x64);}};_0x71821e(_0x8c1425),_0x8c1425[_0x21caad(0x27d)](_0x503c3f=>{_0x565956(_0x503c3f),_0x39f27b(_0x503c3f),_0x34bcad(_0x503c3f);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0xb437e8=_0x807ea;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x49d1a3=await getCoins(),[_0x502cd0,_0xb6227b]=_0x49d1a3;let _0x32e851=[];currentCoins['forEach'](_0x569f07=>{const _0x5f35b5=_0x534f,_0x34aa43=_0x502cd0[_0x5f35b5(0x1fc)](_0x72663f=>_0x72663f[_0x5f35b5(0x1dd)]==_0x569f07[_0x5f35b5(0x1dd)]);if(_0x34aa43){if(_0x569f07[_0x5f35b5(0x268)]!=_0x34aa43['number']){let _0x62ae1d;if(_0x569f07[_0x5f35b5(0x1dd)]!=config['basecoin']){const _0x4b1d20=global[_0x5f35b5(0x1c2)][noslash(_0x569f07[_0x5f35b5(0x13b)])];_0x62ae1d=_0x569f07['reverse']?0x1/_0x4b1d20:_0x4b1d20;}else _0x62ae1d=0x1;_0x32e851[_0x5f35b5(0x21e)]({'coin':_0x569f07[_0x5f35b5(0x1dd)],'symbol':_0x569f07[_0x5f35b5(0x13b)],'price':_0x62ae1d,'number':Number(formatResult(_0x34aa43[_0x5f35b5(0x268)]-_0x569f07[_0x5f35b5(0x268)],0x8)),'basecoinvalue':_0x62ae1d*(_0x34aa43[_0x5f35b5(0x268)]-_0x569f07[_0x5f35b5(0x268)])});}}});if(_0x32e851[_0xb437e8(0x152)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0xb437e8(0x29d)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x32e851[0x0]['basecoinvalue']+_0xb437e8(0x257)+lastFees[_0xb437e8(0x17c)]);if(lastFees[_0xb437e8(0x17c)]==0x0||Math[_0xb437e8(0x170)](_0x32e851[0x0][_0xb437e8(0x11c)])>lastFees[_0xb437e8(0x17c)]){delete _0x32e851[0x0]['symbol'],delete _0x32e851[0x0][_0xb437e8(0x11c)];let _0x4ac8bc=[],_0x535668=[...config[_0xb437e8(0x1b6)]]||[],_0x85ead3=config[_0xb437e8(0x1b6)];_0x535668[_0xb437e8(0x198)]((_0x5bfc70,_0x3ce0be)=>_0x5bfc70['date']>_0x3ce0be[_0xb437e8(0x220)]?-0x1:_0x3ce0be[_0xb437e8(0x220)]>_0x5bfc70[_0xb437e8(0x220)]?0x1:0x0);const _0x2911f0=getDate();if(_0x535668[0x0]){const _0x5302ea=fns[_0xb437e8(0x23a)](_0x535668[0x0][_0xb437e8(0x220)],'yyyy/MM/dd',new Date()),_0x19a1f5=fns[_0xb437e8(0x23a)](_0x2911f0,_0xb437e8(0x29b),new Date());if(fns[_0xb437e8(0x13c)](_0x5302ea,_0x19a1f5)){_0x4ac8bc=_0x535668[0x0][_0xb437e8(0x27a)];const _0x3aabe5=_0x4ac8bc[_0xb437e8(0x1fc)](_0x3bb9e1=>_0x3bb9e1[_0xb437e8(0x1dd)]==_0x32e851[0x0][_0xb437e8(0x1dd)]);_0x3aabe5?(_0x3aabe5[_0xb437e8(0x268)]+=_0x32e851[0x0][_0xb437e8(0x268)],_0x3aabe5[_0xb437e8(0x268)]==0x0&&(_0x4ac8bc=_0x4ac8bc[_0xb437e8(0x291)](_0x30d782=>{const _0x5934d5=_0xb437e8;return _0x30d782[_0x5934d5(0x1dd)]!=_0x32e851[0x0]['coin'];}))):_0x4ac8bc[_0xb437e8(0x21e)](_0x32e851[0x0]);const _0x5c3729=_0x85ead3['find'](_0x193e1f=>_0x193e1f[_0xb437e8(0x220)]==_0x2911f0);_0x5c3729['changes']=_0x4ac8bc;}else _0x85ead3[_0xb437e8(0x21e)]({'date':_0x2911f0,'changes':[_0x32e851[0x0]]});}const _0x4c7d98=_0x85ead3[_0xb437e8(0x1fc)](_0x16835d=>_0x16835d[_0xb437e8(0x220)]==_0x2911f0);if(_0x4c7d98){let _0x513258=!![];_0x4c7d98[_0xb437e8(0x27a)][_0xb437e8(0x27d)](_0x126bf0=>{const _0x242093=_0xb437e8;if(_0x126bf0[_0x242093(0x268)]!=0x0)_0x513258=![];}),_0x513258&&(_0x85ead3=_0x85ead3[_0xb437e8(0x291)](_0x57112b=>{const _0x5bb1a3=_0xb437e8;return _0x57112b[_0x5bb1a3(0x220)]!=_0x2911f0;}));}let _0x1b4e55=dbConfig[_0xb437e8(0x216)](_0xb437e8(0x1d8))[_0xb437e8(0x1fc)]({'botID':botID})[_0xb437e8(0x1d2)]();_0x1b4e55&&(dbConfig['get'](_0xb437e8(0x1d8))[_0xb437e8(0x1fc)]({'botID':botID})[_0xb437e8(0x1ab)]({'liquidity':_0x85ead3})[_0xb437e8(0x258)](),config[_0xb437e8(0x1b6)]=_0x85ead3),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0xb437e8(0x170)](_0x32e851[0x0][_0xb437e8(0x268)])+'\x20'+_0x32e851[0x0][_0xb437e8(0x1dd)]+'\x20'+(_0x32e851[0x0][_0xb437e8(0x268)]>0x0?'added':_0xb437e8(0x15a))+_0xb437e8(0x1ea)),proxyEmit('configuration',emittedConfiguration());}else logger[_0xb437e8(0x29d)](_0xb437e8(0x15c)+Math[_0xb437e8(0x170)](_0x32e851[0x0]['number'])+'\x20'+_0x32e851[0x0][_0xb437e8(0x1dd)]+'\x20'+(_0x32e851[0x0]['number']>0x0?_0xb437e8(0x130):_0xb437e8(0x15a)));transactionDetected=!![],currentCoins=_0x502cd0,currentCoinsAll=_0xb6227b;}else logger[_0xb437e8(0x29d)](_0xb437e8(0x1a0)+Math[_0xb437e8(0x170)](_0x32e851[0x0][_0xb437e8(0x268)])+'\x20'+_0x32e851[0x0][_0xb437e8(0x1dd)]+'\x20'+(_0x32e851[0x0]['number']>0x0?_0xb437e8(0x130):_0xb437e8(0x15a))+_0xb437e8(0x21b)),currentCoins=_0x502cd0,currentCoinsAll=_0xb6227b;}await sleep(watchTransactionsInterval);}catch(_0x440feb){if(!exchangeStopped)await handleError(_0x440feb,_0xb437e8(0x17b));}else await sleep(0x64);}}async function loadSymbols(){const _0x46d7ff=_0x807ea;try{markets=await exchange[_0x46d7ff(0x200)](),allSymbols=[],Object['entries'](markets)[_0x46d7ff(0x27d)](_0x254730=>{const _0x450288=_0x46d7ff;_0x254730[0x1][_0x450288(0x14b)]&&_0x254730[0x1]['spot']&&allSymbols[_0x450288(0x21e)](_0x254730[0x0]);});}catch(_0x37ac26){throw _0x37ac26;}}async function initclient(){const _0x55f5bb=_0x807ea;emitLoadingProgress(),proxyEmit(_0x55f5bb(0x1b7),emittedConfiguration()),proxyEmit(_0x55f5bb(0x233),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5af353=getNormalizedPerformance();emitPerformance(_0x5af353),getStartingBalances(_0x5af353);}async function toggleBotMode(){const _0x3130ac=_0x807ea;let _0x2259ac=dbConfig[_0x3130ac(0x216)](_0x3130ac(0x1d8))[_0x3130ac(0x1fc)]({'botID':botID})['value']();if(_0x2259ac){const _0x1384f6=!_0x2259ac[_0x3130ac(0x141)];dbConfig['get'](_0x3130ac(0x1d8))[_0x3130ac(0x1fc)]({'botID':botID})[_0x3130ac(0x1ab)]({'headless':_0x1384f6})['write'](),config['headless']=_0x1384f6,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x29dfb9=>{});}async function loadCoins(_0x1651dd){const _0x31eaf0=_0x807ea;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0xc51400,_0x34044f=0x0,_0x3425ad=0x0;const _0x1e130c=0x1;_0x1651dd[_0x31eaf0(0x27d)](_0x20b6b8=>{const _0x480446=_0x31eaf0;loading[_0x480446(0x1f9)][_0x480446(0x21e)](_0x20b6b8);}),loadingCanceled=![];let _0x2c5d4b=![];while(_0xc51400!=_0x1651dd[_0x31eaf0(0x152)]+_0x1e130c){_0xc51400=0x0,_0x1651dd['forEach'](_0x572b50=>{const _0x5af0fc=_0x31eaf0;if(global[_0x5af0fc(0x1c2)][noslash(_0x572b50)]){loading[_0x5af0fc(0x1f9)]=loading[_0x5af0fc(0x1f9)][_0x5af0fc(0x291)](_0x4ab724=>_0x4ab724!=_0x572b50);if(!watchedSymbols[_0x5af0fc(0x210)](_0x572b50))watchedSymbols[_0x5af0fc(0x21e)](_0x572b50);_0xc51400++;}});currentCoins[_0x31eaf0(0x152)]>0x0&&(_0xc51400+=_0x1e130c);loading[_0x31eaf0(0x1af)]=Math[_0x31eaf0(0x14f)](_0xc51400/(_0x1651dd['length']+_0x1e130c)*0x64);loading['progress']!=0x64&&(_0x3425ad>0x1e*0x5&&(loading[_0x31eaf0(0x271)]=!![],emitLoadingProgress()),_0x3425ad>0x78*0x5&&!_0x2c5d4b&&(loading[_0x31eaf0(0x13a)]=!![],emitLoadingProgress(),_0x2c5d4b=!![],logHistory(_0x31eaf0(0x1e2),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x31eaf0(0x1f9)]['join'](',\x20')+_0x31eaf0(0x1ad)),logHistory(_0x31eaf0(0x1e2),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x31eaf0(0x1ae)),pidCoinReloading=setTimeout(()=>{const _0x297851=_0x31eaf0;process[_0x297851(0x191)]({'stop':'restart'},_0xfa6214=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x31eaf0(0x13a)]=!![],emitLoadingProgress();break;}else _0x34044f!=loading[_0x31eaf0(0x1af)]&&(_0x34044f=loading[_0x31eaf0(0x1af)],emitLoadingProgress()),_0x3425ad++,await sleep(0xc8);}_0xc51400==_0x1651dd[_0x31eaf0(0x152)]+_0x1e130c&&(coinsLoaded=!![],process[_0x31eaf0(0x191)]({'status':_0x31eaf0(0x188),'live':_0x31eaf0(0x1cb)},_0x574bce=>{}),_0x2c5d4b&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x595a3c=_0x807ea;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x595a3c(0x16f)});}function emitLoadingProgress(){const _0x4e75dc=_0x807ea;proxyEmit(_0x4e75dc(0x15b),loading);}async function getFiat(){const _0x79c1d4=_0x807ea;let _0x2359cf=global[_0x79c1d4(0x1c2)][stablecoins[_0x79c1d4(0x1f0)][_0x79c1d4(0x1dd)]],_0x353d23=global[_0x79c1d4(0x1c2)][stablecoins[_0x79c1d4(0x1d5)][_0x79c1d4(0x1dd)]];return{'eur':Number(_0x2359cf),'usd':Number(_0x353d23)};}function capitalize(_0x40e56f){const _0xcbc680=_0x807ea;return _0x40e56f['substring'](0x0,0x1)['toUpperCase']()+_0x40e56f[_0xcbc680(0x25b)](0x1);}function supportedExchanges(){const _0x587dc7=_0x807ea,_0x443060=['ws','fetchTickers','fetchTicker','watchTrades',_0x587dc7(0x1a1),_0x587dc7(0x17e),'createOrder',_0x587dc7(0x286),_0x587dc7(0x117),_0x587dc7(0x127)];let _0x2d7a71=[],_0x21fcfe=[],_0x3bcd3f=ccxt[_0x587dc7(0x201)]['exchanges'];_0x3bcd3f[_0x587dc7(0x27d)](_0x4b7979=>{const _0x124f7c=_0x587dc7;try{const _0x51deb2=new ccxt[(_0x124f7c(0x201))][_0x4b7979]();_0x21fcfe['push'](_0x51deb2);}catch(_0x4fc783){}}),_0x21fcfe[_0x587dc7(0x27d)](_0x1fb05d=>{const _0x3150d9=_0x587dc7;let _0x3c93e9=0x0;_0x443060[_0x3150d9(0x27d)](_0x3572c0=>{const _0xa296f2=_0x3150d9;_0x3572c0 in _0x1fb05d[_0xa296f2(0x10d)]&&_0x1fb05d[_0xa296f2(0x10d)][_0x3572c0]&&_0x3c93e9++;}),_0x3c93e9==_0x443060[_0x3150d9(0x152)]&&_0x2d7a71[_0x3150d9(0x21e)](capitalize(_0x1fb05d['id']));});let _0x1e42eb=[];return _0x3bcd3f[_0x587dc7(0x27d)](_0x34ff75=>{const _0x462949=_0x587dc7;_0x34ff75=capitalize(_0x34ff75);if(!_0x2d7a71[_0x462949(0x210)](_0x34ff75))_0x1e42eb[_0x462949(0x21e)](_0x34ff75);}),_0x2d7a71;}function setStartDatePerformance(){const _0x5c1c59=_0x807ea;if(config&&config[_0x5c1c59(0x1b6)][0x0][_0x5c1c59(0x27a)][_0x5c1c59(0x152)]!=0x0){const _0x549538=config['liquidity'][0x0]['changes'];dbPerformance['get']('data')[_0x5c1c59(0x1fc)]({'date':config[_0x5c1c59(0x184)]})[_0x5c1c59(0x1ab)]({'coins':_0x549538})[_0x5c1c59(0x258)]();}}async function recreateCoinResults(){const _0xf96a72=_0x807ea;let _0x552184,_0x290416=[];try{const _0x226044=fns[_0xf96a72(0x118)](fns[_0xf96a72(0x192)](config[_0xf96a72(0x184)][_0xf96a72(0x13d)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x3b0aa1 of currentCoins){if(_0x3b0aa1[_0xf96a72(0x1dd)]!=config[_0xf96a72(0x28d)]){let _0x3fca8c=0x0,_0x3d2af3,_0x210258;_0x552184=await getAllEventOrders(_0x3b0aa1[_0xf96a72(0x13b)]);if(_0x552184[_0xf96a72(0x152)]>0x0)_0x552184[_0xf96a72(0x27d)](_0x4c2b8d=>{const _0x51a6e4=_0xf96a72,_0x3167c1=_0x3b0aa1[_0x51a6e4(0x13b)][_0x51a6e4(0x210)](config[_0x51a6e4(0x28d)]+'/');_0x290416[_0x51a6e4(0x21e)]({'datetime':_0x4c2b8d[_0x51a6e4(0x17d)],'coin':_0x3b0aa1['coin'],'symbol':_0x3b0aa1['symbol'],'side':_0x4c2b8d['side'],'reverse':_0x3167c1,'amount':formatResult(_0x4c2b8d['filled'],0x8),'filled':formatResult(_0x4c2b8d[_0x51a6e4(0x22a)],0x8),'price':formatResult(_0x4c2b8d[_0x51a6e4(0x208)],0x8)}),_0x3fca8c=_0x4c2b8d['side']==_0x51a6e4(0x1c1)?_0x3fca8c+_0x4c2b8d[_0x51a6e4(0x22a)]:_0x3fca8c-_0x4c2b8d[_0x51a6e4(0x22a)];if(!_0x210258)_0x210258=_0x4c2b8d[_0x51a6e4(0x208)];});_0x3d2af3=_0x3b0aa1[_0xf96a72(0x268)]-_0x3fca8c;let _0x5d6428;config[_0xf96a72(0x1b6)][_0xf96a72(0x27d)](_0x43260d=>{const _0x256f5e=_0xf96a72;!_0x5d6428&&(_0x5d6428=_0x43260d[_0x256f5e(0x27a)][_0x256f5e(0x1fc)](_0x5ab3da=>_0x5ab3da['coin']==_0x3b0aa1[_0x256f5e(0x1dd)]),_0x5d6428&&(_0x3d2af3=_0x5d6428['number'],_0x210258=_0x5d6428['price']));});let _0x2aa095=dbCoinResults['get'](_0xf96a72(0x168))['find']({'coin':_0x3b0aa1[_0xf96a72(0x1dd)]})[_0xf96a72(0x1d2)]();_0x2aa095={'coin':_0x3b0aa1[_0xf96a72(0x1dd)],'number':_0x3d2af3,'breakeven':_0x210258,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xf96a72(0x216)](_0xf96a72(0x168))[_0xf96a72(0x1fc)]({'coin':_0x3b0aa1[_0xf96a72(0x1dd)]})[_0xf96a72(0x1ab)](_0x2aa095)['write']();}}_0x290416[_0xf96a72(0x198)]((_0x1ac35e,_0x4e49d5)=>_0x1ac35e[_0xf96a72(0x17d)]>_0x4e49d5[_0xf96a72(0x17d)]?0x1:_0x4e49d5[_0xf96a72(0x17d)]>_0x1ac35e['datetime']?-0x1:0x0);let _0x216cb5=0x0;for(let _0x4e3a28 of _0x290416){await updateCoinResults(_0x4e3a28,!![]);}}catch(_0x1a8793){await handleError(_0x1a8793,_0xf96a72(0x1c7));}}async function getAllEventOrders(_0x1c2250){const _0x5cf957=_0x807ea;let _0x37f004=[],_0x29db31=dbLogs['get'](_0x5cf957(0x1e1))[_0x5cf957(0x291)](_0x3bf0db=>{const _0xc3aa1b=_0x5cf957,_0x3e9759=_0x3bf0db['event'][_0xc3aa1b(0x158)]();return _0x3e9759['includes'](_0x1c2250['toLowerCase']())&&(_0x3e9759[_0xc3aa1b(0x210)](_0xc3aa1b(0x1b0))&&_0x3e9759['includes']('order')||_0x3e9759[_0xc3aa1b(0x210)](_0xc3aa1b(0x22a))&&_0x3e9759[_0xc3aa1b(0x210)](_0xc3aa1b(0x1b3)));})[_0x5cf957(0x12a)](_0x5cf957(0x133))['value']();return _0x29db31[_0x5cf957(0x27d)](_0x33503a=>{const _0x442a52=_0x5cf957,_0x472d87=_0x33503a[_0x442a52(0x245)][_0x442a52(0x210)]('sell')?'sell':'buy',_0x2b3616=/#([0-9]|\.)+\s/i,_0x401592=Number(_0x2b3616[_0x442a52(0x1ca)](_0x33503a['event'])[0x0][_0x442a52(0x16d)](0x1)),_0x3ccfd7=/@([0-9]|\.)+$/i,_0x393433=Number(_0x3ccfd7['exec'](_0x33503a[_0x442a52(0x245)])[0x0][_0x442a52(0x16d)](0x1));_0x37f004['push']({'datetime':_0x33503a[_0x442a52(0x133)],'coin':symbolToCoin(_0x1c2250),'symbol':_0x1c2250,'side':_0x472d87,'amount':_0x401592,'filled':_0x401592,'price':_0x393433});}),_0x37f004;}async function getAllOrders(_0x1cac83,_0x151403){const _0x3e68ac=_0x807ea;let _0x4dd27c=[];while(_0x151403<exchange[_0x3e68ac(0x197)]()){const _0x4a0620=0x1f4;try{const _0xb3b9be=await exchange[_0x3e68ac(0x117)](_0x1cac83,_0x151403,_0x4a0620);if(_0xb3b9be[_0x3e68ac(0x152)])_0x151403=_0xb3b9be[_0xb3b9be[_0x3e68ac(0x152)]-0x1][_0x3e68ac(0x211)]+0x1,_0x4dd27c=_0x4dd27c[_0x3e68ac(0x21d)](_0xb3b9be);else break;}catch(_0x2a88b8){await handleError(_0x2a88b8,_0x3e68ac(0x125),_0x1cac83);}}return _0x4dd27c;}async function validate24hChanges(){const _0x3602b8=_0x807ea;for(const _0x3b2749 of currentCoins){if(_0x3b2749[_0x3602b8(0x1dd)]!=config[_0x3602b8(0x28d)]){let _0x2d69a3;_0x3b2749[_0x3602b8(0x1da)]?_0x2d69a3=formatResult((0x1/(global[_0x3602b8(0x251)][noslash(_0x3b2749[_0x3602b8(0x13b)])]/0x64+0x1)-0x1)*0x64,0x3):_0x2d69a3=global[_0x3602b8(0x251)][noslash(_0x3b2749['symbol'])],_0x2d69a3<config[_0x3602b8(0x114)]&&(logHistory(_0x3602b8(0x1e2),_0x3b2749['coin']+_0x3602b8(0x25d)+_0x2d69a3+'%'),logHistory(_0x3602b8(0x1e2),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x3602b8(0x1e2),_0x3602b8(0x262)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x59bdd2,_0x106be6){const _0x3531df=_0x807ea;if(!_0x59bdd2)return!![];const _0x3611e8=_0x106be6[_0x3531df(0x28c)]('.'),_0x5b835f=_0x59bdd2['split']('.');for(var _0x25f84d=0x0;_0x25f84d<_0x5b835f[_0x3531df(0x152)];_0x25f84d++){const _0x176a4a=~~_0x5b835f[_0x25f84d],_0x39fb7b=~~_0x3611e8[_0x25f84d];if(_0x176a4a<_0x39fb7b)return!![];if(_0x176a4a>_0x39fb7b)return![];}return![];}async function oneTimeMigration(){const _0x4fbb4b=_0x807ea;let _0x20cc75=dbLogs[_0x4fbb4b(0x216)](_0x4fbb4b(0x1cf))[_0x4fbb4b(0x1d2)]();if(isOlderVersion(_0x20cc75,'2.3.5')){let _0x807908=[];const _0x30c6e0=dbLogs['get']('logs')[_0x4fbb4b(0x1d2)]();_0x30c6e0[_0x4fbb4b(0x27d)](_0x41760f=>{const _0x5b39de=_0x4fbb4b;_0x807908[_0x5b39de(0x21e)]({'time':_0x41760f[_0x5b39de(0x133)],'type':_0x41760f[_0x5b39de(0x156)],'event':_0x41760f[_0x5b39de(0x245)]});}),dbLogs[_0x4fbb4b(0x216)](_0x4fbb4b(0x1e1))[_0x4fbb4b(0x1ab)](_0x807908)['write']();}let _0xbb68f4=dbConfig[_0x4fbb4b(0x216)](_0x4fbb4b(0x1cf))[_0x4fbb4b(0x1d2)]();if(isOlderVersion(_0xbb68f4,_0x4fbb4b(0x273))){let _0x5cf8f2=dbConfig['get'](_0x4fbb4b(0x1d8))[_0x4fbb4b(0x1fc)]({'botID':botID})[_0x4fbb4b(0x1d2)]();if(_0x5cf8f2){let _0x40db9a=[];_0x5cf8f2[_0x4fbb4b(0x1de)][_0x4fbb4b(0x27d)](_0x10c2f2=>{const _0x3b8d8a=_0x4fbb4b;_0x40db9a[_0x3b8d8a(0x21e)]({'coin':_0x10c2f2[_0x3b8d8a(0x1dd)],'number':_0x10c2f2[_0x3b8d8a(0x29e)],'price':_0x10c2f2[_0x3b8d8a(0x28b)]}),delete _0x10c2f2[_0x3b8d8a(0x29e)],delete _0x10c2f2[_0x3b8d8a(0x28b)];});if(_0x40db9a['length']!==0x0)fs['writeFile'](configbackuppath+(_0x4fbb4b(0x24c)+botID+'.json'),JSON['stringify'](_0x40db9a,null,0x4),function(_0x421ef5){if(_0x421ef5){}});const _0x5bfd25=(_0x59db6e,_0x54e399)=>{const _0x422735=_0x4fbb4b;let _0x171e3d=[];_0x54e399[_0x422735(0x27d)](_0x2eb4df=>{const _0x41fb9e=_0x422735,_0x53ced9=_0x59db6e[_0x41fb9e(0x1fc)](_0x4cd939=>_0x4cd939[_0x41fb9e(0x1dd)]==_0x2eb4df['coin']);if(!_0x53ced9)_0x171e3d[_0x41fb9e(0x21e)](_0x2eb4df);});let _0x58c6ef=[];return _0x59db6e['forEach'](_0x1c5fb4=>{const _0x1a6784=_0x422735,_0x50ed47=_0x54e399[_0x1a6784(0x1fc)](_0x1f9667=>_0x1f9667[_0x1a6784(0x1dd)]==_0x1c5fb4[_0x1a6784(0x1dd)]);if(!_0x50ed47||_0x50ed47['number']==0x0&&_0x1c5fb4[_0x1a6784(0x268)]!=0x0)_0x58c6ef['push'](_0x1c5fb4);}),{'missingDay1':_0x171e3d,'notInDay2':_0x58c6ef};},_0x5868d8=dbPerformance['get'](_0x4fbb4b(0x287))[_0x4fbb4b(0x19a)]()[_0x4fbb4b(0x1d2)]();if(_0x5868d8[_0x4fbb4b(0x152)]>0x1){const {missingDay1:_0x1d7245,notInDay2:_0x43525d}=_0x5bfd25(_0x40db9a,_0x5868d8[0x1][_0x4fbb4b(0x168)]);_0x40db9a=[..._0x40db9a,..._0x1d7245],_0x43525d[_0x4fbb4b(0x27d)](_0x8040c=>{const _0x43f91c=_0x4fbb4b;let _0x497620=_0x40db9a[_0x43f91c(0x1e0)](_0x5dc10c=>_0x5dc10c[_0x43f91c(0x1dd)]==_0x8040c[_0x43f91c(0x1dd)]);_0x497620!=-0x1&&_0x40db9a[_0x43f91c(0x297)](_0x497620,0x1);});}_0x40db9a[_0x4fbb4b(0x198)]((_0x403cf3,_0x5684ad)=>_0x403cf3[_0x4fbb4b(0x1dd)]>_0x5684ad[_0x4fbb4b(0x1dd)]?0x1:_0x5684ad[_0x4fbb4b(0x1dd)]>_0x403cf3[_0x4fbb4b(0x1dd)]?-0x1:0x0);let _0x1c9d3d=[{'date':_0x5cf8f2[_0x4fbb4b(0x184)],'changes':_0x40db9a}];_0x5868d8[_0x4fbb4b(0x152)]>0x2&&_0x5868d8[_0x4fbb4b(0x27d)]((_0x5a6013,_0x5bc307)=>{const _0x2829fe=_0x4fbb4b;if(_0x5bc307>0x0&&_0x5bc307<_0x5868d8[_0x2829fe(0x152)]-0x1){const {missingDay1:_0x321a66,notInDay2:_0xf2b671}=_0x5bfd25(_0x5868d8[_0x5bc307][_0x2829fe(0x168)],_0x5868d8[_0x5bc307+0x1][_0x2829fe(0x168)]);_0x40db9a=[],(_0x321a66[_0x2829fe(0x152)]!=0x0||_0xf2b671['length']!=0x0)&&(_0x321a66[_0x2829fe(0x152)]!=0x0&&_0x40db9a['push'](..._0x321a66),_0xf2b671[_0x2829fe(0x152)]!=0x0&&(_0xf2b671[_0x2829fe(0x27d)](_0x28d2fc=>{const _0xfc86da=_0x2829fe;_0x28d2fc[_0xfc86da(0x268)]=-_0x28d2fc['number'];}),_0x40db9a[_0x2829fe(0x21e)](..._0xf2b671)),_0x40db9a['sort']((_0x327027,_0x4654e3)=>_0x327027[_0x2829fe(0x1dd)]>_0x4654e3[_0x2829fe(0x1dd)]?0x1:_0x4654e3[_0x2829fe(0x1dd)]>_0x327027['coin']?-0x1:0x0),_0x1c9d3d[_0x2829fe(0x21e)]({'date':_0x5868d8[_0x5bc307+0x1][_0x2829fe(0x220)],'changes':_0x40db9a}));}}),dbConfig[_0x4fbb4b(0x216)](_0x4fbb4b(0x1d8))[_0x4fbb4b(0x1fc)]({'botID':botID})[_0x4fbb4b(0x1ab)]({..._0x5cf8f2,'liquidity':_0x1c9d3d})[_0x4fbb4b(0x258)]();}}if(isOlderVersion(_0xbb68f4,_0x4fbb4b(0x1b2))){let _0x51558d=dbConfig[_0x4fbb4b(0x216)](_0x4fbb4b(0x1d8))[_0x4fbb4b(0x1fc)]({'botID':botID})[_0x4fbb4b(0x1d2)]();if(_0x51558d){const _0x524f9d=_0x51558d['exchange'],_0xb07b4c=_0x524f9d?capitalize(_0x524f9d):_0x4fbb4b(0x11d);dbConfig[_0x4fbb4b(0x216)](_0x4fbb4b(0x1d8))[_0x4fbb4b(0x1fc)]({'botID':botID})['assign']({'exchange':_0xb07b4c})[_0x4fbb4b(0x258)]();}}let _0x5e3530=dbPerformance[_0x4fbb4b(0x216)](_0x4fbb4b(0x1cf))[_0x4fbb4b(0x1d2)]();isOlderVersion(_0x5e3530,_0x4fbb4b(0x273))&&setStartDatePerformance();let _0x530e29=dbCoinResults[_0x4fbb4b(0x216)](_0x4fbb4b(0x1cf))[_0x4fbb4b(0x1d2)]();if(isOlderVersion(_0x530e29,_0x4fbb4b(0x124))){let _0x12dfba=dbCoinResults[_0x4fbb4b(0x216)](_0x4fbb4b(0x168))['value']();if(_0x12dfba['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1c7657=_0x807ea;dbConfig[_0x1c7657(0x22f)](_0x1c7657(0x1cf),serverversion)[_0x1c7657(0x258)](),dbPerformance['set'](_0x1c7657(0x1cf),serverversion)[_0x1c7657(0x258)](),dbLogs[_0x1c7657(0x22f)](_0x1c7657(0x1cf),serverversion)[_0x1c7657(0x258)](),dbCoinResults[_0x1c7657(0x22f)](_0x1c7657(0x1cf),serverversion)[_0x1c7657(0x258)]();}function getConfiguration(_0x4f0e26){const _0x5e2af7=_0x807ea;let _0x394008=dbConfig['get'](_0x5e2af7(0x1d8))[_0x5e2af7(0x1fc)]({'botID':_0x4f0e26})[_0x5e2af7(0x1d2)]();if(_0x394008){let _0x3363ee=![];typeof _0x394008[_0x5e2af7(0x166)]==_0x5e2af7(0x238)&&(_0x394008={..._0x394008,'threshold':Number(_0x394008['threshold'])},_0x3363ee=!![]),_0x394008['change24h']==undefined&&(_0x394008={..._0x394008,'change24h':-0x14},_0x3363ee=!![]),_0x394008['fiat']==undefined&&(_0x394008={..._0x394008,'fiat':_0x5e2af7(0x171)},_0x3363ee=!![]),_0x394008[_0x5e2af7(0x163)]==undefined&&(_0x394008={..._0x394008,'onepagemode':settings[_0x5e2af7(0x163)]},_0x3363ee=!![]),_0x394008[_0x5e2af7(0x21a)]==undefined&&(_0x394008={..._0x394008,'colorscheme':_0x5e2af7(0x193)},_0x3363ee=!![]),_0x394008[_0x5e2af7(0x217)]==undefined&&(_0x394008={..._0x394008,'autoliquidity':!![]},_0x3363ee=!![]),_0x3363ee&&(_0x394008={'botID':_0x394008[_0x5e2af7(0x20d)],'exchange':_0x394008[_0x5e2af7(0x119)],'apiKey':_0x394008['apiKey'],'apiSecret':_0x394008[_0x5e2af7(0x1cc)],'apiPassword':_0x394008[_0x5e2af7(0x269)],'basecoin':_0x394008[_0x5e2af7(0x28d)],'botname':_0x394008[_0x5e2af7(0x23b)],'showname':_0x394008[_0x5e2af7(0x1d7)],'threshold':_0x394008[_0x5e2af7(0x166)],'ordertype':_0x394008[_0x5e2af7(0x243)],'timeout':_0x394008[_0x5e2af7(0x271)],'fiat':_0x394008[_0x5e2af7(0x19e)],'startdate':_0x394008['startdate'],'recreate':_0x394008[_0x5e2af7(0x195)],'timeshift':_0x394008['timeshift'],'onepagemode':_0x394008[_0x5e2af7(0x163)],'headless':_0x394008[_0x5e2af7(0x141)],'cooldown':_0x394008[_0x5e2af7(0x26f)],'change24h':_0x394008['change24h'],'emojibuy':_0x394008[_0x5e2af7(0x146)],'emojisell':_0x394008[_0x5e2af7(0x142)],'colorscheme':_0x394008[_0x5e2af7(0x21a)],'portfolio':_0x394008[_0x5e2af7(0x1de)],'autoliquidity':_0x394008[_0x5e2af7(0x217)],'liquidity':_0x394008[_0x5e2af7(0x1b6)],'openOrders':_0x394008[_0x5e2af7(0x179)]},dbConfig[_0x5e2af7(0x216)]('bot')['remove']()[_0x5e2af7(0x258)](),dbConfig[_0x5e2af7(0x216)](_0x5e2af7(0x1d8))['push'](_0x394008)['write']());}else _0x394008={'botID':_0x4f0e26,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5e2af7(0x231)+_0x4f0e26,'showname':![],'threshold':0x3,'ordertype':_0x5e2af7(0x1b0),'timeout':0x14,'fiat':_0x5e2af7(0x171),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5e2af7(0x1f2)],'onepagemode':settings[_0x5e2af7(0x163)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5e2af7(0x193),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x394008;}function emittedConfiguration(){const _0x338cb6=_0x807ea;let _0x292882;if(config[_0x338cb6(0x1aa)]=='')_0x292882={...config,'configstate':_0x338cb6(0x228)};else config['apiKey']=='***'?_0x292882={...config,'configstate':_0x338cb6(0x248)}:(_0x292882={...config,'apiKey':'************','apiSecret':'************'},config[_0x338cb6(0x269)]&&(_0x292882[_0x338cb6(0x269)]=_0x338cb6(0x159)));return _0x292882;}function getSettings(){const _0x13749b=_0x807ea;return dbSettings[_0x13749b(0x216)](_0x13749b(0x17f))[_0x13749b(0x1d2)]();}function getSecure(){const _0x5703f6=_0x807ea;return dbSecure[_0x5703f6(0x216)]('secure')[_0x5703f6(0x1d2)]()||{};}function updateTimeshift(_0x57da78){const _0x3c9bc5=_0x807ea;let _0x42bb98=dbConfig[_0x3c9bc5(0x216)](_0x3c9bc5(0x1d8))[_0x3c9bc5(0x1fc)]({'botID':botID})[_0x3c9bc5(0x1d2)]();_0x42bb98&&dbConfig[_0x3c9bc5(0x216)]('bot')['find']({'botID':botID})[_0x3c9bc5(0x1ab)]({'timeshift':_0x57da78})[_0x3c9bc5(0x258)](),config[_0x3c9bc5(0x1f2)]=_0x57da78,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x3104bd){const _0x4bd2bf=_0x807ea;let _0x54a79a=dbConfig[_0x4bd2bf(0x216)](_0x4bd2bf(0x1d8))[_0x4bd2bf(0x1fc)]({'botID':botID})[_0x4bd2bf(0x1d2)]();_0x54a79a&&dbConfig[_0x4bd2bf(0x216)]('bot')[_0x4bd2bf(0x1fc)]({'botID':botID})[_0x4bd2bf(0x1ab)]({'onepagemode':_0x3104bd})['write'](),config[_0x4bd2bf(0x163)]=_0x3104bd,proxyEmit(_0x4bd2bf(0x1b7),emittedConfiguration());}async function storeConfiguration(_0x38e169){const _0x31a963=_0x807ea;logger[_0x31a963(0x29d)](_0x31a963(0x1b5));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x31a963(0x29d)]('Transaction\x20detection\x20blocked');let _0x550f5c=[],_0x4952f8=![],_0x32f9e6=![],_0x486f11=[];_0x38e169[_0x31a963(0x1de)][_0x31a963(0x27d)](_0x599ef6=>{const _0x4df761=_0x31a963;if(!_0x599ef6[_0x4df761(0x1db)]&&_0x599ef6[_0x4df761(0x1dd)]!=_0x38e169[_0x4df761(0x28d)])_0x486f11[_0x4df761(0x21e)](_0x599ef6['symbol']);}),_0x486f11[_0x31a963(0x27d)](_0x5c32a1=>{const _0x1b30e7=_0x31a963,_0x3cfc49=watchedSymbols[_0x1b30e7(0x210)](_0x5c32a1);!_0x3cfc49&&_0x550f5c[_0x1b30e7(0x21e)](_0x5c32a1);}),_0x486f11['forEach'](_0x19f48e=>{const _0x4cd40e=_0x31a963,_0x29b627=currentCoins[_0x4cd40e(0x1fc)](_0xc3d881=>_0xc3d881['symbol']==_0x19f48e);!_0x29b627&&(_0x4952f8=!![]);}),currentCoins[_0x31a963(0x27d)](_0x529dd1=>{const _0x35ea09=_0x31a963;if(_0x529dd1[_0x35ea09(0x1dd)]!=config[_0x35ea09(0x28d)]){const _0x5c1247=_0x486f11[_0x35ea09(0x1fc)](_0x5d7514=>_0x5d7514==_0x529dd1[_0x35ea09(0x13b)]);!_0x5c1247&&(_0x4952f8=!![]);}}),_0x38e169[_0x31a963(0x1de)][_0x31a963(0x27d)](_0x2381a2=>{const _0x4d38ab=_0x31a963,_0x400852=config[_0x4d38ab(0x1de)][_0x4d38ab(0x1fc)](_0x3a7d20=>_0x3a7d20[_0x4d38ab(0x1dd)]==_0x2381a2[_0x4d38ab(0x1dd)]);if(_0x400852&&_0x2381a2[_0x4d38ab(0x14e)]!=_0x400852[_0x4d38ab(0x14e)])_0x32f9e6=!![];});let _0x2ae09e=dbConfig[_0x31a963(0x216)](_0x31a963(0x1d8))[_0x31a963(0x1fc)]({'botID':botID})[_0x31a963(0x1d2)]();_0x38e169={..._0x38e169,'apiKey':crypt[_0x31a963(0x153)](secure[_0x31a963(0x12f)],_0x38e169[_0x31a963(0x1aa)])['message'],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x38e169['apiSecret'])[_0x31a963(0x196)]};_0x38e169[_0x31a963(0x269)]&&(_0x38e169[_0x31a963(0x269)]=crypt['decrypt'](secure[_0x31a963(0x12f)],_0x38e169['apiPassword'])['message']);let _0x48c7a6=![];if(_0x2ae09e){_0x38e169['apiKey']==_0x31a963(0x159)?_0x38e169[_0x31a963(0x1aa)]=config[_0x31a963(0x1aa)]:_0x48c7a6=!![];_0x38e169[_0x31a963(0x1cc)]=='************'?_0x38e169[_0x31a963(0x1cc)]=config['apiSecret']:_0x48c7a6=!![];if(_0x38e169[_0x31a963(0x269)]==_0x31a963(0x159))_0x38e169[_0x31a963(0x269)]=config['apiPassword'];else{if(_0x38e169[_0x31a963(0x269)])_0x48c7a6=!![];}dbConfig[_0x31a963(0x216)]('bot')[_0x31a963(0x1fc)]({'botID':botID})[_0x31a963(0x1ab)](_0x38e169)[_0x31a963(0x258)]();}else dbConfig[_0x31a963(0x216)]('bot')[_0x31a963(0x21e)](_0x38e169)[_0x31a963(0x258)](),_0x48c7a6=!![],process['send']({'status':_0x31a963(0x188),'live':_0x31a963(0x1cb)},_0x220dd0=>{});process[_0x31a963(0x191)]({'botname':_0x38e169[_0x31a963(0x23b)]},_0x4aaa2b=>{}),updateBotManager(),config={..._0x38e169},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x48c7a6)await reset(_0x550f5c,!![]);else _0x4952f8||_0x32f9e6?await reset(_0x550f5c,![]):getBalances();blockTransactionDetection=![],logger[_0x31a963(0x29d)](_0x31a963(0x1ed));}async function storeHeadless(_0x3c185e){const _0x187d06=_0x807ea,_0x308837={...config,'headless':_0x3c185e[_0x187d06(0x141)]};let _0x4863ea=dbConfig[_0x187d06(0x216)](_0x187d06(0x1d8))['find']({'botID':botID})[_0x187d06(0x1d2)]();_0x4863ea&&dbConfig[_0x187d06(0x216)](_0x187d06(0x1d8))[_0x187d06(0x1fc)]({'botID':botID})[_0x187d06(0x1ab)](_0x308837)[_0x187d06(0x258)](),config={..._0x308837},updateBotManager(),proxyEmit(_0x187d06(0x1b7),emittedConfiguration());}async function storeFiat(_0x4d7bf8){const _0x33988d=_0x807ea,_0x9ef7e0={...config,'fiat':_0x4d7bf8};let _0x196c8a=dbConfig[_0x33988d(0x216)](_0x33988d(0x1d8))[_0x33988d(0x1fc)]({'botID':botID})['value']();_0x196c8a&&dbConfig[_0x33988d(0x216)]('bot')['find']({'botID':botID})[_0x33988d(0x1ab)](_0x9ef7e0)['write'](),config={..._0x9ef7e0},proxyEmit(_0x33988d(0x1b7),emittedConfiguration());}function resetHistory(){const _0x1774d7=_0x807ea;logger[_0x1774d7(0x186)](_0x1774d7(0x246));try{if(fs[_0x1774d7(0x10f)](path[_0x1774d7(0x1d1)](configpath,_0x1774d7(0x259)+botID+'-events.json')))fs[_0x1774d7(0x254)](path['join'](configpath,_0x1774d7(0x259)+botID+_0x1774d7(0x154)));if(fs['existsSync'](path[_0x1774d7(0x1d1)](configpath,'bot-'+botID+_0x1774d7(0x252))))fs[_0x1774d7(0x254)](path[_0x1774d7(0x1d1)](configpath,_0x1774d7(0x259)+botID+'-performance.json'));if(fs['existsSync'](path['join'](configpath,_0x1774d7(0x259)+botID+_0x1774d7(0x12c))))fs[_0x1774d7(0x254)](path['join'](configpath,_0x1774d7(0x259)+botID+_0x1774d7(0x12c)));}catch(_0x518bec){if(_0x518bec)logger[_0x1774d7(0x186)](_0x1774d7(0x16e),_0x518bec);}const _0x1ceeaf=getDate();let _0x3e68cb=[];currentCoins[_0x1774d7(0x27d)](_0x456715=>{const _0x2651d3=_0x1774d7;_0x3e68cb[_0x2651d3(0x21e)]({'coin':_0x456715['coin'],'number':_0x456715['number'],'price':_0x456715[_0x2651d3(0x229)]});});let _0x340986=dbConfig['get']('bot')[_0x1774d7(0x1fc)]({'botID':botID})[_0x1774d7(0x1d2)]();_0x340986&&(dbConfig[_0x1774d7(0x216)]('bot')[_0x1774d7(0x1fc)]({'botID':botID})[_0x1774d7(0x1ab)]({'liquidity':[{'date':_0x1ceeaf,'changes':_0x3e68cb}]})[_0x1774d7(0x258)](),config['liquidity']=[]),process['send']({'stop':_0x1774d7(0x17a)},_0x5ef2e6=>{});}function noslash(_0x4c594d){const _0x439c28=_0x807ea;return _0x4c594d[_0x439c28(0x13d)]('/','');}function updateHighestFee(_0x2bdfc1){const _0x20db97=_0x807ea;if(_0x2bdfc1[_0x20db97(0x1da)]){let _0x35ea31={'filled':_0x2bdfc1[_0x20db97(0x22a)]*_0x2bdfc1[_0x20db97(0x208)],'amount':_0x2bdfc1[_0x20db97(0x22a)]*_0x2bdfc1['price'],'side':_0x2bdfc1[_0x20db97(0x227)]==_0x20db97(0x19d)?_0x20db97(0x1c1):'sell','price':0x1/_0x2bdfc1['price']};_0x2bdfc1={..._0x2bdfc1,..._0x35ea31};}const _0x1ece6a=defaultFee*_0x2bdfc1[_0x20db97(0x22a)]*_0x2bdfc1[_0x20db97(0x208)];lastFees['recent20']['length']===0x14&&lastFees[_0x20db97(0x1a6)][_0x20db97(0x162)](),lastFees[_0x20db97(0x1a6)]['push'](_0x1ece6a),lastFees[_0x20db97(0x17c)]=Math[_0x20db97(0x25e)](...lastFees[_0x20db97(0x1a6)]);}async function updateNumberCoinsCcxt(_0x291fe9){const _0x57f64c=_0x807ea;logger[_0x57f64c(0x29d)](_0x57f64c(0x120)+_0x291fe9[_0x57f64c(0x13b)]+_0x57f64c(0x266)+_0x291fe9[_0x57f64c(0x26e)]+_0x57f64c(0x266)+_0x291fe9['id']);let _0x226bad=_0x291fe9[_0x57f64c(0x26e)],_0x4fdfbb=![];currentCoins['forEach'](_0x42dba8=>{const _0x541acd=_0x57f64c;_0x42dba8['symbol']==_0x291fe9[_0x541acd(0x13b)]&&(_0x4fdfbb=!![]);});if(!_0x4fdfbb)return;const _0x2f4c1f=currentCoins[_0x57f64c(0x1fc)](_0x52166c=>_0x52166c[_0x57f64c(0x13b)]==_0x291fe9[_0x57f64c(0x13b)]),_0x55a23d=_0x10b469=>{const _0x483668=_0x57f64c;if(_0x2f4c1f)_0x2f4c1f[_0x483668(0x206)]=_0x10b469;};if(_0x226bad==_0x57f64c(0x275))_0x55a23d('open');else{if(_0x226bad==_0x57f64c(0x263)){_0x55a23d('canceled');const _0x142805=await getCoins();[currentCoins,currentCoinsAll]=_0x142805,await getOpenOrders(),handleOpenOrders();}else{if(_0x226bad=='closed'){logger[_0x57f64c(0x29d)](_0x57f64c(0x290)+_0x291fe9[_0x57f64c(0x13b)]+_0x57f64c(0x266)+_0x291fe9[_0x57f64c(0x22a)]+_0x57f64c(0x266)+_0x291fe9['id']);let _0x2ac0a4=![];if(lastOrders)for(const _0x396ad8 of lastOrders){const _0x3e4218=0xc8,_0x107c58=0x1388;let _0x2f77e1=0x0;while(!_0x396ad8[_0x57f64c(0x136)]&&_0x2f77e1*_0x3e4218<_0x107c58){_0x2f77e1++,await sleep(_0x3e4218);}if(_0x2f77e1>0x0)logger[_0x57f64c(0x29d)](_0x57f64c(0x190)+_0x2f77e1*_0x3e4218/0x3e8+_0x57f64c(0x23c));if(_0x396ad8['orderId']==_0x291fe9['id']){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x291fe9['id']),_0x2ac0a4=!![];if(_0x396ad8[_0x57f64c(0x22a)]==0x0){logger[_0x57f64c(0x29d)](_0x57f64c(0x28e)+_0x291fe9['id']);if(_0x291fe9['average'])_0x396ad8['price']=_0x291fe9['average'];else{if(_0x291fe9[_0x57f64c(0x208)])_0x396ad8[_0x57f64c(0x208)]=_0x291fe9[_0x57f64c(0x208)];else{}}_0x396ad8[_0x57f64c(0x22a)]=_0x291fe9[_0x57f64c(0x22a)],updateHighestFee(_0x396ad8),_0x55a23d(_0x57f64c(0x22a)),await validateOrders();if(lockOrders==ORDERS[_0x57f64c(0x129)]){const _0x1e8d66=await getCoins();[currentCoins,currentCoinsAll]=_0x1e8d66;}_0x396ad8[_0x57f64c(0x178)]={'currency':_0x291fe9[_0x57f64c(0x178)]?_0x291fe9[_0x57f64c(0x178)]['currency']:null,'cost':_0x291fe9[_0x57f64c(0x178)]?_0x291fe9['fee'][_0x57f64c(0x20c)]:0x0},await updateCoinResults(_0x396ad8);}}}if(!_0x2ac0a4){logger['debug'](_0x57f64c(0x29c)+_0x291fe9['id']),_0x55a23d(_0x57f64c(0x22a));const _0x568cf3=await getCoins();[currentCoins,currentCoinsAll]=_0x568cf3,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x5c57b2=JSON[_0x57f64c(0x23a)](lastBalances[_0x57f64c(0x1de)]);const _0x7824e9=_0x5c57b2['find'](_0x1d31d0=>_0x1d31d0[_0x57f64c(0x13b)]==_0x291fe9[_0x57f64c(0x13b)]);if(_0x7824e9){if(_0x226bad=='open')_0x7824e9['orderstatus']=_0x7824e9[_0x57f64c(0x206)]==_0x57f64c(0x22a)?_0x57f64c(0x22a):_0x57f64c(0x275);else{if(_0x226bad=='canceled')_0x7824e9[_0x57f64c(0x206)]=_0x7824e9[_0x57f64c(0x206)]==_0x57f64c(0x22a)?_0x57f64c(0x22a):'canceled';else _0x226bad==_0x57f64c(0x185)&&(_0x7824e9[_0x57f64c(0x206)]=_0x57f64c(0x22a));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x5c57b2)},proxyEmit(_0x57f64c(0x22e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3d9e03=_0x807ea;await getOpenOrders();let _0x4d38d6=![];currentCoins[_0x3d9e03(0x27d)](_0x42339d=>{const _0x1e1b42=_0x3d9e03;_0x4d38d6=allOpenOrders[_0x1e1b42(0x1fc)](_0x3855d3=>_0x3855d3[_0x1e1b42(0x13b)]==_0x42339d[_0x1e1b42(0x13b)]),_0x42339d[_0x1e1b42(0x206)]=_0x4d38d6?_0x1e1b42(0x275):'none';});}async function getCoins(_0x162d92=!![],_0x1c931a=config[_0x807ea(0x28d)]){const _0x54373c=_0x807ea;let _0x54d933,_0x5e8739=[],_0x3c98b2=[],_0x5d941a=[],_0x460183=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x54d933=await exchange['fetchBalance'](),mybalances=_0x54d933['total'];for(const [_0x185359,_0x483aa8]of Object[_0x54373c(0x224)](mybalances)){_0x460183[_0x54373c(0x21e)](_0x185359);}if(_0x1c931a=='')for(const [_0x3a2d1e,_0x7f927]of Object[_0x54373c(0x224)](mybalances)){_0x7f927!=0x0&&_0x3c98b2[_0x54373c(0x21e)]({'coin':_0x3a2d1e});}else{let _0x57737f=![];for(const [_0x101e49,_0x54ae3f]of Object[_0x54373c(0x224)](mybalances)){if(_0x460183[_0x54373c(0x210)](_0x101e49)){const _0x156b34=config[_0x54373c(0x1de)][_0x54373c(0x1fc)](_0x28a2af=>_0x28a2af['coin']==_0x101e49),_0x67dda3=_0x101e49+'/'+_0x1c931a,_0x33c024=_0x1c931a+'/'+_0x101e49,_0x38f4d2=currentCoins[_0x54373c(0x1fc)](_0x181c31=>_0x181c31[_0x54373c(0x1dd)]==_0x101e49);_0x57737f=![];if((_0x54ae3f!=0x0||_0x156b34)&&(allSymbols[_0x54373c(0x210)](_0x67dda3)||_0x101e49==_0x1c931a))_0x101e49!=_0x1c931a&&_0x5e8739[_0x54373c(0x21e)](_0x67dda3),_0x3c98b2[_0x54373c(0x21e)]({'coin':_0x101e49,'symbol':_0x67dda3,'reverse':![],'number':Math[_0x54373c(0x25e)](_0x54ae3f+(_0x156b34&&_0x156b34['offset']||0x0),0x0),'orderstatus':_0x38f4d2?_0x38f4d2[_0x54373c(0x206)]:_0x54373c(0x295)});else(_0x54ae3f!=0x0||_0x156b34)&&allSymbols[_0x54373c(0x210)](_0x33c024)&&(_0x101e49!=_0x1c931a&&_0x5e8739[_0x54373c(0x21e)](_0x33c024),_0x3c98b2[_0x54373c(0x21e)]({'coin':_0x101e49,'symbol':_0x33c024,'reverse':!![],'number':Math[_0x54373c(0x25e)](_0x54ae3f+(_0x156b34&&_0x156b34[_0x54373c(0x14e)]||0x0),0x0),'orderstatus':_0x38f4d2?_0x38f4d2[_0x54373c(0x206)]:'none'}));}}}}catch(_0x58c66a){if(!_0x162d92)handleErrorNoStop(_0x58c66a,_0x54373c(0x145));else await handleError(_0x58c66a,_0x54373c(0x145));}return _0x5d941a=cloneDeep(_0x3c98b2),_0x3c98b2=_0x3c98b2['filter'](_0x4a6d61=>{const _0xf0fc99=_0x54373c,_0x20d2b9=config[_0xf0fc99(0x1de)]['find'](_0x42e9e6=>_0x42e9e6[_0xf0fc99(0x1dd)]==_0x4a6d61[_0xf0fc99(0x1dd)]);return _0x20d2b9&&!_0x20d2b9['excluded'];}),[_0x3c98b2,_0x5d941a];}async function getCoinNumber(_0x35bbe2){const _0x3e3304=_0x807ea;let _0x6497a2;try{const _0x1e859e=await exchange[_0x3e3304(0x127)]();_0x6497a2=_0x1e859e[_0x3e3304(0x1f7)][_0x35bbe2];}catch(_0x57ed0d){await handleError(_0x57ed0d,_0x3e3304(0x1e4));}return _0x6497a2;}async function getOpenOrders(){const _0x226d8c=_0x807ea;let _0x18c385;allOpenOrders=[];try{for(const _0x4ec61b of config['portfolio']){!_0x4ec61b[_0x226d8c(0x1db)]&&_0x4ec61b['coin']!=config[_0x226d8c(0x28d)]&&(_0x18c385=await exchange['fetchOpenOrders'](_0x4ec61b['symbol']),_0x18c385['length']>0x0&&allOpenOrders[_0x226d8c(0x21e)](_0x18c385[0x0]));}}catch(_0x4283bb){await handleError(_0x4283bb,'getOpenOrders()');}}async function handleOpenOrders(_0x537c6f=0x0){const _0xb3ec5e=_0x807ea;allOpenOrders[_0xb3ec5e(0x152)]==0x0&&lockOrders==ORDERS[_0xb3ec5e(0x129)]&&allOrdersPlaced&&(_0x537c6f==0x0?(logger[_0xb3ec5e(0x29d)]('1\x20-\x20Handle\x20open\x20orders'),_0x537c6f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0xb3ec5e(0x1fd)),validateOrders(_0xb3ec5e(0x1ce))));}async function testAPI(_0x367f43){const _0x5c1af0=_0x807ea,_0x3f5969=ccxt['pro'][_0x367f43['exchange']['toLowerCase']()],_0x51d6f7=new _0x3f5969({'apiKey':_0x367f43[_0x5c1af0(0x1aa)],'secret':_0x367f43['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x367f43[_0x5c1af0(0x269)])_0x51d6f7[_0x5c1af0(0x237)]=_0x367f43[_0x5c1af0(0x269)];try{await _0x51d6f7[_0x5c1af0(0x200)]();}catch(_0x2dd46c){throw _0x2dd46c;}}function cloneDeep(_0x390061){const _0x5dba96=_0x807ea;return JSON[_0x5dba96(0x23a)](JSON[_0x5dba96(0x26d)](_0x390061));}async function getPortfolio(_0x5e17e7){const _0x33bbd2=_0x807ea;let _0x5f2797=[],_0x5814f1=[],_0x8e2b2d=[],_0x2ff81b;if(_0x5e17e7[_0x33bbd2(0x1aa)]!=='************'||_0x5e17e7[_0x33bbd2(0x1cc)]!==_0x33bbd2(0x159)||_0x5e17e7[_0x33bbd2(0x269)]&&_0x5e17e7[_0x33bbd2(0x269)]!==_0x33bbd2(0x159)){if(config[_0x33bbd2(0x119)]){if(_0x5e17e7[_0x33bbd2(0x1aa)]=='************')_0x5e17e7[_0x33bbd2(0x1aa)]=config[_0x33bbd2(0x1aa)];if(_0x5e17e7[_0x33bbd2(0x1cc)]==_0x33bbd2(0x159))_0x5e17e7['apiSecret']=config[_0x33bbd2(0x1cc)];if(_0x5e17e7[_0x33bbd2(0x269)]==_0x33bbd2(0x159))_0x5e17e7[_0x33bbd2(0x269)]=config[_0x33bbd2(0x269)];try{await testAPI(_0x5e17e7);}catch(_0x418a94){if(_0x418a94[_0x33bbd2(0x272)]()[_0x33bbd2(0x210)](_0x33bbd2(0x232))){logger['debug'](_0x33bbd2(0x278)),proxyEmit('portfolio',![]);return;}else{handleError(_0x418a94,'getPortfolio(0)');return;}}}await initExchange(_0x5e17e7[_0x33bbd2(0x119)],_0x5e17e7[_0x33bbd2(0x1aa)],_0x5e17e7[_0x33bbd2(0x1cc)],_0x5e17e7[_0x33bbd2(0x269)]);try{await loadSymbols();}catch(_0x132a3e){if(_0x132a3e[_0x33bbd2(0x272)]()[_0x33bbd2(0x210)](_0x33bbd2(0x232))){proxyEmit(_0x33bbd2(0x1de),![]);return;}else{handleError(_0x132a3e,_0x33bbd2(0x296));return;}}const _0x3a4895=await getCoins(![],_0x5e17e7[_0x33bbd2(0x28d)]);_0x8e2b2d=cloneDeep(_0x3a4895[0x1]);}else _0x8e2b2d=cloneDeep(currentCoinsAll);if(_0x5e17e7['basecoin']=='')proxyEmit(_0x33bbd2(0x1de),_0x8e2b2d);else{_0x8e2b2d[_0x33bbd2(0x27d)](_0x211c6c=>{const _0x15d835=_0x33bbd2;if(_0x211c6c['coin']!=_0x5e17e7[_0x15d835(0x28d)])_0x5f2797[_0x15d835(0x21e)](_0x211c6c[_0x15d835(0x13b)]);});if(_0x5f2797[_0x33bbd2(0x152)]==0x0)logHistory(_0x33bbd2(0x1e2),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x5814f1=await exchange[_0x33bbd2(0x222)](_0x5f2797);}catch(_0x554ef6){if(_0x554ef6[_0x33bbd2(0x272)]()[_0x33bbd2(0x210)](_0x33bbd2(0x232))){proxyEmit('portfolio',![]);return;}else{handleError(_0x554ef6,_0x33bbd2(0x1df));return;}}_0x8e2b2d[_0x33bbd2(0x27d)](_0x38429c=>{const _0xeb552=_0x33bbd2;_0x38429c['coin']!=_0x5e17e7['basecoin']?_0x2ff81b=_0x38429c[_0xeb552(0x1da)]?0x1/_0x5814f1[_0x38429c[_0xeb552(0x13b)]][_0xeb552(0x229)]:_0x5814f1[_0x38429c[_0xeb552(0x13b)]]['last']:_0x2ff81b=0x1,_0x38429c[_0xeb552(0x208)]=formatResult(_0x2ff81b,0x8);}),proxyEmit(_0x33bbd2(0x1de),_0x8e2b2d);}}}function truncateTradeAmount(_0x360573,_0x29568d){const _0x31161d=_0x807ea;let _0x146d20=0x0;try{_0x146d20=exchange[_0x31161d(0x281)](_0x360573,_0x29568d);}catch(_0x3d38ac){}return _0x146d20;}function checkMinimums(_0x47627e){const _0x43c06c=_0x807ea;let _0xd3e225=!![];const _0x5b9aa3=!_0x47627e[_0x43c06c(0x1da)]?markets[_0x47627e[_0x43c06c(0x13b)]][_0x43c06c(0x157)][_0x43c06c(0x256)][_0x43c06c(0x261)]:markets[_0x47627e[_0x43c06c(0x13b)]]['limits']['cost'][_0x43c06c(0x261)],_0x1275cd=!_0x47627e[_0x43c06c(0x1da)]?markets[_0x47627e[_0x43c06c(0x13b)]][_0x43c06c(0x157)][_0x43c06c(0x20c)][_0x43c06c(0x261)]:markets[_0x47627e[_0x43c06c(0x13b)]]['limits'][_0x43c06c(0x256)]['min'],_0x273f27=truncateTradeAmount(_0x47627e[_0x43c06c(0x13b)],_0x47627e[_0x43c06c(0x199)]);_0x47627e[_0x43c06c(0x199)]=_0x273f27;if(Math['abs'](_0x273f27)<_0x5b9aa3)_0xd3e225=![];if(Math['abs'](_0x273f27)*_0x47627e['last']<_0x1275cd)_0xd3e225=![];if(_0x47627e['side']==_0x43c06c(0x19d)){let _0x43f2ca=config[_0x43c06c(0x1de)][_0x43c06c(0x1fc)](_0x3ec022=>_0x3ec022[_0x43c06c(0x1dd)]==_0x47627e[_0x43c06c(0x1dd)]);if(_0x43f2ca[_0x43c06c(0x14e)]>0x0){if(Math[_0x43c06c(0x170)](_0x273f27)>_0x47627e[_0x43c06c(0x268)]-_0x43f2ca[_0x43c06c(0x14e)])_0xd3e225=![];}else{if(Math[_0x43c06c(0x170)](_0x273f27)>_0x47627e[_0x43c06c(0x268)])_0xd3e225=![];}}if(_0x47627e[_0x43c06c(0x227)]==_0x43c06c(0x1c1)){let _0x246362=config[_0x43c06c(0x1de)][_0x43c06c(0x1fc)](_0x482b13=>_0x482b13[_0x43c06c(0x1dd)]==config['basecoin']),_0x9f8cb0=currentCoins[_0x43c06c(0x1fc)](_0x250919=>_0x250919[_0x43c06c(0x1dd)]==config['basecoin']);if(_0x246362[_0x43c06c(0x14e)]>0x0){if(Math[_0x43c06c(0x170)](_0x273f27)*_0x47627e[_0x43c06c(0x229)]>_0x9f8cb0[_0x43c06c(0x268)]-_0x246362['offset'])_0xd3e225=![];}else{if(Math[_0x43c06c(0x170)](_0x273f27)*_0x47627e[_0x43c06c(0x229)]>_0x9f8cb0['number'])_0xd3e225=![];}}return _0xd3e225;}async function getBalances(_0x4abcaf=!![]){const _0x18f6f5=_0x807ea;let _0xb515c0=0x0,_0x443b66;const _0x52dc92=config[_0x18f6f5(0x166)];if(config[_0x18f6f5(0x141)]&&config[_0x18f6f5(0x114)]<0x0)await validate24hChanges();currentCoins[_0x18f6f5(0x27d)](_0x5944d3=>{const _0x3c4549=_0x18f6f5;if(_0x5944d3[_0x3c4549(0x1dd)]!=config['basecoin']){let _0x54a033=global['ticker'][noslash(_0x5944d3['symbol'])];_0x443b66=_0x5944d3[_0x3c4549(0x1da)]?0x1/_0x54a033:_0x54a033;}else _0x443b66=0x1;let _0x1710de=_0x5944d3['number']*_0x443b66;_0xb515c0+=_0x1710de,_0x5944d3[_0x3c4549(0x229)]=formatResult(Number(_0x443b66),0x8),_0x5944d3[_0x3c4549(0x1d2)]=_0x1710de;}),currentCoins[_0x18f6f5(0x27d)](_0x2b1f24=>{const _0x33fa53=_0x18f6f5;let _0x100c8f=config['portfolio']['find'](_0x91d142=>_0x91d142[_0x33fa53(0x1dd)]==_0x2b1f24[_0x33fa53(0x1dd)]),_0x243a5b=Number(_0x100c8f[_0x33fa53(0x1e6)]),_0x45a57a=_0x2b1f24[_0x33fa53(0x1d2)]/_0xb515c0*0x64,_0x495de9=_0x243a5b*_0xb515c0/0x64/_0x2b1f24['last']-_0x2b1f24['number'];_0x2b1f24[_0x33fa53(0x1e6)]=formatResult(_0x45a57a,0x3),_0x2b1f24['target']=formatResult(_0x243a5b,0x3),_0x2b1f24[_0x33fa53(0x199)]=formatResult(_0x495de9,0x8),_0x2b1f24[_0x33fa53(0x227)]='',_0x2b1f24[_0x33fa53(0x21c)]=![];if(_0x2b1f24[_0x33fa53(0x1dd)]!=config[_0x33fa53(0x28d)]){if(_0x2b1f24[_0x33fa53(0x1e6)]>_0x243a5b)_0x2b1f24['side']='sell',_0x2b1f24['valid']=checkMinimums(_0x2b1f24);else _0x2b1f24[_0x33fa53(0x1e6)]<_0x243a5b&&(_0x2b1f24[_0x33fa53(0x227)]=_0x33fa53(0x1c1),_0x2b1f24[_0x33fa53(0x21c)]=checkMinimums(_0x2b1f24));}_0x2b1f24[_0x33fa53(0x289)]=_0x2b1f24[_0x33fa53(0x1e6)]/_0x2b1f24[_0x33fa53(0x215)]-0x1;if(_0x2b1f24[_0x33fa53(0x206)]=='filled'||_0x2b1f24[_0x33fa53(0x206)]==_0x33fa53(0x263))_0x2b1f24[_0x33fa53(0x206)]='none';}),currentCoins[_0x18f6f5(0x198)]((_0x1d8faf,_0x43d118)=>_0x1d8faf[_0x18f6f5(0x289)]<_0x43d118[_0x18f6f5(0x289)]?0x1:_0x43d118[_0x18f6f5(0x289)]<_0x1d8faf[_0x18f6f5(0x289)]?-0x1:0x0);const _0x5e6339=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5e6339[_0x18f6f5(0x1f0)],'usd':_0x5e6339[_0x18f6f5(0x1d5)],'portfolio':JSON[_0x18f6f5(0x26d)](currentCoins),'threshold':_0x52dc92},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x4abcaf){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x52dc92});else{if(lockOrders==ORDERS[_0x18f6f5(0x16a)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x52dc92});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2fc48b=getNormalizedPerformance();getStartingBalances(_0x2fc48b),emitPerformance(_0x2fc48b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x406b46=getNormalizedPerformance();emitPerformance(_0x406b46),getStartingBalances(_0x406b46),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1b5905=_0x807ea;if(!lastBalances)return;let _0x478c6f=[],_0x270ebb,_0x37a33b=JSON['parse'](lastBalances['portfolio']);_0x37a33b[_0x1b5905(0x198)]((_0x220e25,_0x110894)=>_0x220e25[_0x1b5905(0x1dd)]>_0x110894[_0x1b5905(0x1dd)]?0x1:_0x110894[_0x1b5905(0x1dd)]>_0x220e25[_0x1b5905(0x1dd)]?-0x1:0x0),_0x37a33b[_0x1b5905(0x27d)](_0x2ab317=>{const _0x19d47b=_0x1b5905;let _0xe8fc63={'coin':_0x2ab317[_0x19d47b(0x1dd)],'number':_0x2ab317[_0x19d47b(0x268)],'price':_0x2ab317[_0x19d47b(0x229)]};_0x478c6f[_0x19d47b(0x21e)](_0xe8fc63);});const _0x5ba4de=await getFiat();_0x270ebb={'date':lastBalances[_0x1b5905(0x133)][_0x1b5905(0x28c)]('\x20')[0x0],'eur':_0x5ba4de[_0x1b5905(0x1f0)],'usd':_0x5ba4de[_0x1b5905(0x1d5)],'coins':_0x478c6f};let _0x2c40b0=dbPerformance[_0x1b5905(0x216)](_0x1b5905(0x287))['find']({'date':_0x270ebb['date']})[_0x1b5905(0x1d2)]();_0x2c40b0?_0x270ebb['date']!=config['startdate']&&dbPerformance['get'](_0x1b5905(0x287))[_0x1b5905(0x1fc)]({'date':_0x270ebb[_0x1b5905(0x220)]})['assign'](_0x270ebb)[_0x1b5905(0x258)]():dbPerformance['get']('data')['push'](_0x270ebb)[_0x1b5905(0x258)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x34a0b4=_0x807ea;let _0x173d86=[];if(dbPerformance[_0x34a0b4(0x10d)](_0x34a0b4(0x287))[_0x34a0b4(0x1d2)]()){let _0x24c830=dbPerformance[_0x34a0b4(0x216)](_0x34a0b4(0x287))[_0x34a0b4(0x19a)]()[_0x34a0b4(0x291)](_0x4769ea=>{const _0x11af1e=_0x34a0b4;if(_0x4769ea[_0x11af1e(0x168)][_0x11af1e(0x152)]==0x0)return![];else return!![];})[_0x34a0b4(0x12a)]('date')['value'](),_0x3cbc8e=[...config[_0x34a0b4(0x1b6)]];_0x3cbc8e[_0x34a0b4(0x198)]((_0x3bd8f6,_0x41310a)=>_0x3bd8f6['date']>_0x41310a[_0x34a0b4(0x220)]?-0x1:_0x41310a[_0x34a0b4(0x220)]>_0x3bd8f6[_0x34a0b4(0x220)]?0x1:0x0);let _0x1dd189=0x1,_0x41560d=[],_0x1863db=0x0;_0x24c830['slice']()[_0x34a0b4(0x1da)]()['forEach']((_0x293e82,_0x40f061)=>{const _0x15bd07=_0x34a0b4;if(_0x3cbc8e[_0x1863db]){if(_0x24c830[_0x24c830['length']-_0x40f061]&&_0x3cbc8e[_0x1863db][_0x15bd07(0x220)]==_0x24c830[_0x24c830[_0x15bd07(0x152)]-_0x40f061]['date']){if(_0x40f061<_0x24c830['length']){let _0x475feb=0x0,_0x3ef7ff=0x0;_0x24c830[_0x24c830['length']-_0x40f061]['coins'][_0x15bd07(0x27d)](_0x3725fd=>{const _0x3d2028=_0x15bd07;_0x3ef7ff+=_0x3725fd[_0x3d2028(0x268)]*_0x3725fd[_0x3d2028(0x208)];}),_0x3cbc8e[_0x1863db][_0x15bd07(0x27a)][_0x15bd07(0x27d)](_0x48ed15=>{const _0x34c1a3=_0x15bd07;_0x475feb+=_0x48ed15['number']*_0x48ed15[_0x34c1a3(0x208)];}),_0x1dd189*=_0x475feb/(_0x3ef7ff-_0x475feb)+0x1;}_0x1863db++;}}let _0x4b755f=0x0;_0x293e82[_0x15bd07(0x168)]['forEach'](_0x32896d=>{const _0x4b7618=_0x15bd07;_0x4b755f+=_0x32896d[_0x4b7618(0x268)]*_0x32896d[_0x4b7618(0x208)];}),_0x41560d[_0x24c830[_0x15bd07(0x152)]-_0x40f061-0x1]=_0x4b755f*(_0x1dd189-0x1);});let _0x23fa23=[];_0x3cbc8e=[...config[_0x34a0b4(0x1b6)]]||[];let _0x12aa86=0x0;_0x1863db=0x0,_0x24c830['forEach']((_0x4d293f,_0x28a87a)=>{const _0x339205=_0x34a0b4;if(_0x3cbc8e[_0x1863db]){const _0x478803=fns['parse'](_0x3cbc8e[_0x1863db]['date'],'yyyy/MM/dd',new Date()),_0x59ae47=fns[_0x339205(0x23a)](_0x4d293f[_0x339205(0x220)],_0x339205(0x29b),new Date());if(fns[_0x339205(0x13c)](_0x478803,_0x59ae47)){let _0x161aba=0x0;_0x3cbc8e[_0x1863db][_0x339205(0x27a)][_0x339205(0x27d)](_0x5b6142=>{const _0x4c4803=_0x339205;!_0x23fa23[_0x5b6142[_0x4c4803(0x1dd)]]?_0x23fa23[_0x5b6142[_0x4c4803(0x1dd)]]=_0x5b6142[_0x4c4803(0x268)]:(_0x161aba=_0x23fa23[_0x5b6142[_0x4c4803(0x1dd)]],_0x23fa23[_0x5b6142[_0x4c4803(0x1dd)]]+=_0x5b6142['number']);const _0x3d622e=_0x4d293f['coins'][_0x4c4803(0x1fc)](_0x350c5e=>_0x350c5e[_0x4c4803(0x1dd)]==_0x5b6142[_0x4c4803(0x1dd)]);(!_0x3d622e||_0x3d622e[_0x4c4803(0x268)]==0x0)&&(_0x12aa86+=(-_0x5b6142['number']-_0x161aba)*_0x5b6142[_0x4c4803(0x208)]);}),_0x1863db++;}}_0x4d293f[_0x339205(0x168)][_0x339205(0x27d)]((_0x72922a,_0x13d91b)=>{const _0x16d819=_0x339205;_0x23fa23[_0x72922a[_0x16d819(0x1dd)]]&&(_0x72922a['initial']=_0x23fa23[_0x72922a[_0x16d819(0x1dd)]]);}),_0x173d86['push']({'date':_0x4d293f[_0x339205(0x220)],'eur':_0x4d293f[_0x339205(0x1f0)],'usd':_0x4d293f[_0x339205(0x1d5)],'offset':_0x41560d[_0x28a87a],'netoffset':_0x12aa86,'coins':_0x4d293f[_0x339205(0x168)]});});}return _0x173d86;}function emitPerformance(_0x6be182){const _0x469afa=_0x807ea;_0x6be182[_0x469afa(0x152)]!==0x0?(proxyEmit(_0x469afa(0x161),_0x6be182),lastPerformanceEmitted=getDate()):proxyEmit(_0x469afa(0x161),[]);}function getPerf(_0x7cf577,_0x5a7eab){const _0x131ecf=_0x807ea;let _0x24a1cc=0x0,_0x42c4d5=0x0,_0x215e97=0x0;_0x7cf577['coins'][_0x131ecf(0x27d)](_0x28afa4=>{const _0x133d6e=_0x131ecf;_0x24a1cc+=_0x28afa4[_0x133d6e(0x268)]*_0x28afa4[_0x133d6e(0x208)];});_0x5a7eab&&(_0x24a1cc+=_0x7cf577['offset']);if(config['basecoin']==='BTC'||config[_0x131ecf(0x28d)]===_0x131ecf(0x277))_0x42c4d5=_0x24a1cc*_0x7cf577[_0x131ecf(0x1f0)],_0x215e97=_0x24a1cc*_0x7cf577['usd'];else{if(usdBasecoins['includes'](config[_0x131ecf(0x28d)]))_0x42c4d5=_0x24a1cc*_0x7cf577[_0x131ecf(0x1f0)]/_0x7cf577[_0x131ecf(0x1d5)],_0x215e97=_0x24a1cc;else config['basecoin']===_0x131ecf(0x18a)&&(_0x42c4d5=_0x24a1cc,_0x215e97=_0x24a1cc*_0x7cf577[_0x131ecf(0x1d5)]/_0x7cf577[_0x131ecf(0x1f0)]);}return[_0x24a1cc,_0x42c4d5,_0x215e97];}function getKPIs(_0x30bb62,_0x11b5d9=_0x807ea(0x18a)){const _0x3b02ba=_0x807ea,_0xf44e4e=config[_0x3b02ba(0x28d)],_0x557d55=lastBalances,_0x4b0b5c=currentCoins,_0x272c23=getNormalizedPerformance(),_0x428872=_0x30bb62===_0x3b02ba(0x28d)?_0xf44e4e:_0x30bb62===_0x3b02ba(0x19e)||_0x30bb62===_0x3b02ba(0x221)?_0x11b5d9:'Net\x20'+_0xf44e4e,_0xfc4f61=_0x30bb62===_0x3b02ba(0x1dc)?_0x3b02ba(0x240):_0x30bb62===_0x3b02ba(0x221)?_0x3b02ba(0x240):_0x428872+_0x3b02ba(0x255),_0x26250e=_0x30bb62===_0x3b02ba(0x1dc)||_0x30bb62===_0x3b02ba(0x221)?_0x3b02ba(0x240):_0x428872+'\x20change';let _0x3af8fc=0x0;_0x4b0b5c['forEach'](_0x3c75ff=>{const _0x102be2=_0x3b02ba;_0x3af8fc+=_0x3c75ff[_0x102be2(0x268)]*_0x3c75ff[_0x102be2(0x229)];});if(_0x30bb62===_0x3b02ba(0x19e)||_0x30bb62===_0x3b02ba(0x221)){if(_0xf44e4e==='BTC'||_0xf44e4e===_0x3b02ba(0x277))_0x3af8fc=_0x3af8fc*(_0x11b5d9===_0x3b02ba(0x18a)?_0x557d55['eur']:_0x557d55[_0x3b02ba(0x1d5)]);else{if(usdBasecoins[_0x3b02ba(0x210)](_0xf44e4e))_0x3af8fc=_0x3af8fc*(_0x11b5d9===_0x3b02ba(0x18a)?_0x557d55[_0x3b02ba(0x1f0)]/_0x557d55[_0x3b02ba(0x1d5)]:0x1);else _0xf44e4e===_0x3b02ba(0x18a)&&(_0x3af8fc=_0x3af8fc*(_0x11b5d9==='EUR'?0x1:_0x557d55['usd']/_0x557d55['eur']));}}let _0x108d56;if(_0x3af8fc!==0x0){if(_0x30bb62===_0x3b02ba(0x28d))_0x108d56=(_0x3af8fc/startingBalances[_0x3b02ba(0x28d)]-0x1)*0x64;else{if(_0x11b5d9===_0x3b02ba(0x18a))_0x108d56=(_0x3af8fc/startingBalances[_0x3b02ba(0x1f0)]-0x1)*0x64;else _0x108d56=(_0x3af8fc/startingBalances[_0x3b02ba(0x1d5)]-0x1)*0x64;}let _0x30f714=0x0;if(startingBalances[_0x3b02ba(0x168)])_0x4b0b5c[_0x3b02ba(0x27d)](_0xa252e7=>{const _0x1dcebf=_0x3b02ba;let _0x29bf44=startingBalances[_0x1dcebf(0x168)][_0x1dcebf(0x1fc)](_0x245477=>_0x245477[_0x1dcebf(0x1dd)]===_0xa252e7[_0x1dcebf(0x1dd)]);if(_0x29bf44&&_0x29bf44[_0x1dcebf(0x1dd)]&&_0xa252e7[_0x1dcebf(0x268)]!==0x0)_0x30f714+=_0x29bf44[_0x1dcebf(0x268)]*_0xa252e7[_0x1dcebf(0x229)];});let _0x486a77=0x0;if(_0x272c23[_0x3b02ba(0x152)]!==0x0){let _0xf557b=_0x272c23[_0x272c23[_0x3b02ba(0x152)]-0x1];_0x486a77=_0xf557b['netoffset'];}_0x30f714-=_0x486a77;_0x30bb62===_0x3b02ba(0x1dc)&&(_0x108d56=(_0x3af8fc-_0x30f714)/startingBalances[_0x3b02ba(0x28d)]*0x64,_0x3af8fc=_0x3af8fc-_0x30f714);if(_0x30bb62===_0x3b02ba(0x221)){let _0x50a4ab=_0x11b5d9==='EUR'?startingBalances['eur']:startingBalances[_0x3b02ba(0x1d5)];if(_0xf44e4e===_0x3b02ba(0x177)||_0xf44e4e===_0x3b02ba(0x277))_0x30f714=_0x11b5d9===_0x3b02ba(0x18a)?_0x30f714*_0x557d55['eur']:_0x30f714*_0x557d55[_0x3b02ba(0x1d5)];else{if(usdBasecoins[_0x3b02ba(0x210)](_0xf44e4e))_0x30f714=_0x11b5d9===_0x3b02ba(0x18a)?_0x30f714*_0x557d55[_0x3b02ba(0x1f0)]/_0x557d55['usd']:_0x30f714;else _0xf44e4e===_0x3b02ba(0x18a)&&(_0x30f714=_0x11b5d9===_0x3b02ba(0x18a)?_0x30f714:_0x30f714*_0x557d55[_0x3b02ba(0x1d5)]/_0x557d55['eur']);}_0x108d56=(_0x3af8fc-_0x30f714)/_0x50a4ab*0x64,_0x3af8fc=_0x3af8fc-_0x30f714;}if(_0x108d56){if(_0x108d56<0x64)_0x108d56=_0x108d56[_0x3b02ba(0x242)](0x2);else{if(_0x108d56<0x3e8)_0x108d56=_0x108d56[_0x3b02ba(0x242)](0x1);else _0x108d56=_0x108d56['toFixed'](0x0);}}else _0x108d56=Number('0')[_0x3b02ba(0x242)](0x2);if(_0x3af8fc){if(Math[_0x3b02ba(0x170)](_0x3af8fc)<0.000001)_0x3af8fc=_0x3af8fc[_0x3b02ba(0x242)](0x2);else{if(Math[_0x3b02ba(0x170)](_0x3af8fc)<0.1)_0x3af8fc=_0x3af8fc['toFixed'](0x6);else{if(Math[_0x3b02ba(0x170)](_0x3af8fc)<0x1)_0x3af8fc=_0x3af8fc[_0x3b02ba(0x242)](0x5);else{if(Math['abs'](_0x3af8fc)<0xa)_0x3af8fc=_0x3af8fc[_0x3b02ba(0x242)](0x4);else{if(Math[_0x3b02ba(0x170)](_0x3af8fc)<0x64)_0x3af8fc=_0x3af8fc[_0x3b02ba(0x242)](0x3);else{if(Math[_0x3b02ba(0x170)](_0x3af8fc)<0x3e8)_0x3af8fc=_0x3af8fc[_0x3b02ba(0x242)](0x2);else _0x3af8fc=_0x3af8fc['toFixed'](0x2);}}}}}}else _0x3af8fc=Number('0')[_0x3b02ba(0x242)](0x2);}else _0x108d56=Number('0')['toFixed'](0x2);return{'value':_0x3af8fc,'change':_0x108d56,'leftTxt':_0xfc4f61,'rightTxt':_0x26250e};}async function getStartingBalances(_0x3fbe2c,_0x1a402a=!![]){const _0x115a80=_0x807ea;if(_0x3fbe2c[_0x115a80(0x152)]!==0x0){const [_0x41cb8f,_0x1e8e44,_0x51f5a6]=getPerf(_0x3fbe2c[0x0],!![]);let _0x566f0e=[];config[_0x115a80(0x1de)][_0x115a80(0x27d)](_0x2945bd=>{const _0x1dd992=_0x115a80;let _0x1c5247=0x0,_0x3857d1;config['liquidity'][_0x1dd992(0x27d)](_0x474b77=>{const _0x1621d7=_0x1dd992;let _0x4087c6=_0x474b77[_0x1621d7(0x27a)][_0x1621d7(0x1fc)](_0x8b5d1c=>_0x8b5d1c[_0x1621d7(0x1dd)]==_0x2945bd[_0x1621d7(0x1dd)]);if(_0x4087c6){_0x1c5247+=_0x4087c6['number'];if(!_0x3857d1)_0x3857d1=_0x4087c6[_0x1621d7(0x208)];}}),_0x566f0e[_0x1dd992(0x21e)]({'coin':_0x2945bd[_0x1dd992(0x1dd)],'number':_0x1c5247,'initialprice':_0x3857d1});});const _0x12e2b4={'basecoin':_0x41cb8f,'eur':_0x1e8e44,'usd':_0x51f5a6,'coins':_0x566f0e};if(_0x1a402a)proxyEmit(_0x115a80(0x1f4),_0x12e2b4);startingBalances=_0x12e2b4;}}function headlessMode(_0x1d26a8){const _0x3ad432=_0x807ea;let _0x477056=_0x1d26a8[_0x3ad432(0x1de)],_0x1e1961=_0x1d26a8[_0x3ad432(0x166)],_0x24f9f4=[];for(let _0x56a11d of _0x477056){if(_0x56a11d['coin']!=config[_0x3ad432(0x28d)]){if(_0x56a11d['delta']>=_0x1e1961/0x64){if(_0x56a11d['valid'])_0x24f9f4[_0x3ad432(0x21e)](_0x56a11d);}else{if(_0x56a11d[_0x3ad432(0x289)]<=-_0x1e1961/0x64){if(_0x56a11d[_0x3ad432(0x21c)])_0x24f9f4[_0x3ad432(0x21e)](_0x56a11d);}}}}_0x24f9f4['length']>0x0&&placeOrder(_0x24f9f4);}function notifyBalance(_0x5466eb){const _0x41d14b=_0x807ea;let _0x5739e8=_0x5466eb[_0x41d14b(0x1de)],_0x29b797=_0x5466eb[_0x41d14b(0x166)],_0x57e3b5=[];for(let _0x1efb22 of _0x5739e8){if(_0x1efb22['coin']!=config[_0x41d14b(0x28d)]){if(_0x1efb22['delta']>=_0x29b797/0x64){if(_0x1efb22[_0x41d14b(0x21c)])_0x57e3b5[_0x41d14b(0x21e)](_0x1efb22);}else{if(_0x1efb22[_0x41d14b(0x289)]<=-_0x29b797/0x64){if(_0x1efb22['valid'])_0x57e3b5[_0x41d14b(0x21e)](_0x1efb22);}}}}if(_0x57e3b5['length']>0x0){let _0x17054b=_0x57e3b5[_0x41d14b(0x213)](_0x70b2fd=>_0x70b2fd[_0x41d14b(0x1dd)]);_0x17054b['sort']();let _0x22b263=_0x17054b['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x41d14b(0x19f),_0x41d14b(0x276));lastCoinsToBalance=_0x22b263;}}function symbolToCoin(_0x848d16){const _0x3298a1=_0x807ea;let _0x13ed6f;if(_0x848d16[_0x3298a1(0x210)]('/'+config[_0x3298a1(0x28d)]))_0x13ed6f=_0x848d16[_0x3298a1(0x13d)]('/'+config['basecoin'],'');if(_0x848d16[_0x3298a1(0x210)](config[_0x3298a1(0x28d)]+'/'))_0x13ed6f=_0x848d16[_0x3298a1(0x13d)](config[_0x3298a1(0x28d)]+'/','');return _0x13ed6f;}async function unlockOrders(){const _0x2308b9=_0x807ea;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2308b9(0x129)]){logger[_0x2308b9(0x29d)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x2308b9(0x1a5)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2d207c=await getCoins();[currentCoins,currentCoinsAll]=_0x2d207c,validateOrdersState=_0x2308b9(0x228),persistOpenOrders([]),lockOrders=ORDERS[_0x2308b9(0x16a)],logger[_0x2308b9(0x29d)](_0x2308b9(0x24f));}}async function validateOrders(_0x357949){const _0x28b9a9=_0x807ea;if(_0x357949)validateOrdersState=_0x357949;logger[_0x28b9a9(0x29d)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x28b9a9(0x230)+(lockOrders==0x1?_0x28b9a9(0x194):lockOrders==0x2?'ORDERS.UNLOCKING':_0x28b9a9(0x18d)));let _0x3aa1c4=[],_0x5a584c=config['ordertype']==_0x28b9a9(0x1b0)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x28b9a9(0x129)])return;logger[_0x28b9a9(0x29d)](_0x28b9a9(0x294)+validateOrdersState),lastOrders[_0x28b9a9(0x27d)](_0x768f95=>{const _0x1d4e5b=_0x28b9a9;let _0x4a1506=![];_0x768f95[_0x1d4e5b(0x22a)]>0x0&&(_0x4a1506=!![]),_0x3aa1c4[_0x1d4e5b(0x21e)](_0x4a1506),_0x4a1506&&config[_0x1d4e5b(0x243)]!='market'&&logHistory(_0x1d4e5b(0x1b3),'Order\x20filled:\x20'+_0x768f95[_0x1d4e5b(0x13b)]+'\x20'+_0x768f95[_0x1d4e5b(0x227)]+'\x20#'+formatResult(_0x768f95[_0x1d4e5b(0x22a)],0x8)+'\x20@'+formatResult(_0x768f95[_0x1d4e5b(0x208)],0x8));}),_0x3aa1c4[_0x28b9a9(0x27d)]((_0x49fccc,_0x3c617a)=>{if(_0x49fccc)lastOrders['splice'](_0x3c617a,0x1);}),persistOpenOrders(lastOrders);const _0x5145eb=coolingDown?_0x28b9a9(0x1a8):_0x28b9a9(0x116);if(validateOrdersState==_0x28b9a9(0x228)){validateOrdersState='ongoing';if(_0x3aa1c4[_0x28b9a9(0x210)](![])){if(config[_0x28b9a9(0x243)]==_0x28b9a9(0x1b0)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3aa1c4[_0x28b9a9(0x210)](![])){}else{if(allOrdersPlaced){if(config[_0x28b9a9(0x243)]==_0x28b9a9(0x1b0)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x28b9a9(0x20a))_0x3aa1c4[_0x28b9a9(0x210)](![])&&(config[_0x28b9a9(0x243)]==_0x28b9a9(0x1b0)?logHistory(_0x28b9a9(0x288),_0x28b9a9(0x1d0)+Math[_0x28b9a9(0x14f)](_0x5a584c*validateOrderInterval/0xea60)+_0x28b9a9(0x18e)+_0x5145eb):(await cancelOrders(),logHistory(_0x28b9a9(0x288),_0x28b9a9(0x1b1)+Math['round'](_0x5a584c*validateOrderInterval/0xea60)+_0x28b9a9(0x18e)+_0x5145eb))),await unlockOrders();else{if(validateOrdersState==_0x28b9a9(0x1ce)){if(config[_0x28b9a9(0x243)]!=_0x28b9a9(0x1b0))logHistory(_0x28b9a9(0x288),_0x28b9a9(0x1bc)+_0x5145eb);await unlockOrders();}}}}}async function cancelOrders(){const _0x28d877=_0x807ea;lastOrders[_0x28d877(0x27d)](async _0x5d67a9=>{const _0x5142aa=_0x28d877;try{const _0x1fa977=await exchange['cancelOrder'](_0x5d67a9['orderId'],_0x5d67a9[_0x5142aa(0x13b)]);}catch(_0x232f65){if(_0x232f65[_0x5142aa(0x272)]()[_0x5142aa(0x210)](_0x5142aa(0x12b))){}else await handleError(_0x232f65,_0x5142aa(0x155));}});}async function initCoinResults(_0x3d1638){const _0x323896=_0x807ea;_0x3d1638?logger[_0x323896(0x29d)]('Resetting\x20coin\x20results:\x20'+_0x3d1638):logger[_0x323896(0x29d)](_0x323896(0x180)),config[_0x323896(0x1de)][_0x323896(0x27d)](_0x5cdf04=>{const _0x5ba06b=_0x323896;if(!_0x5cdf04[_0x5ba06b(0x1db)]&&_0x5cdf04[_0x5ba06b(0x1dd)]!=config['basecoin']){const _0x5f182f=currentCoins[_0x5ba06b(0x1fc)](_0x7f1ca3=>_0x7f1ca3[_0x5ba06b(0x1dd)]==_0x5cdf04[_0x5ba06b(0x1dd)]),_0x2e9139=global[_0x5ba06b(0x1c2)][noslash(_0x5cdf04[_0x5ba06b(0x13b)])];let _0x54b01e=_0x5f182f?_0x5f182f[_0x5ba06b(0x268)]:null,_0x2a3fc7=_0x5cdf04['reverse']?0x1/_0x2e9139:_0x2e9139,_0x26b021;config[_0x5ba06b(0x1b6)]['forEach'](_0x537658=>{const _0x101d4b=_0x5ba06b;!_0x26b021&&(_0x26b021=_0x537658[_0x101d4b(0x27a)]['find'](_0x1cef14=>_0x1cef14[_0x101d4b(0x1dd)]==_0x5cdf04[_0x101d4b(0x1dd)]),_0x26b021&&(_0x54b01e=_0x26b021[_0x101d4b(0x268)],_0x2a3fc7=_0x26b021[_0x101d4b(0x208)]));});let _0x19bd3d=dbCoinResults[_0x5ba06b(0x216)](_0x5ba06b(0x168))[_0x5ba06b(0x1fc)]({'coin':_0x5cdf04['coin']})['value']();if(!_0x19bd3d){const _0x511a90={'coin':_0x5cdf04[_0x5ba06b(0x1dd)],'number':_0x54b01e,'breakeven':_0x2a3fc7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5ba06b(0x216)](_0x5ba06b(0x168))[_0x5ba06b(0x21e)](_0x511a90)['write']();}else{if(_0x3d1638&&_0x5cdf04[_0x5ba06b(0x1dd)]==_0x3d1638){const _0x50f921={'coin':_0x5cdf04['coin'],'number':_0x54b01e,'breakeven':_0x2a3fc7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5ba06b(0x216)](_0x5ba06b(0x168))[_0x5ba06b(0x1fc)]({'coin':_0x5cdf04[_0x5ba06b(0x1dd)]})[_0x5ba06b(0x1ab)](_0x50f921)['write']();}}}});}async function updateCoinResults(_0x761ac5,_0x433284=![]){const _0xcd2620=_0x807ea;let _0x1e4237,_0x3f177c,_0x9f49e2,_0x2a18d2,_0x4d0c84,_0x25d949,_0x431bb7=dbCoinResults[_0xcd2620(0x216)]('coins')['find']({'coin':_0x761ac5[_0xcd2620(0x1dd)]})[_0xcd2620(0x1d2)](),_0xed13dc=![];_0x431bb7&&Object[_0xcd2620(0x224)](_0x431bb7)['forEach'](([_0x18d1ff,_0xe66a67])=>{if(_0xe66a67==null)_0xed13dc=!![];});(!_0x431bb7||_0xed13dc)&&(await initCoinResults(_0x761ac5[_0xcd2620(0x1dd)]),_0x431bb7=dbCoinResults[_0xcd2620(0x216)](_0xcd2620(0x168))[_0xcd2620(0x1fc)]({'coin':_0x761ac5['coin']})[_0xcd2620(0x1d2)]());_0x761ac5[_0xcd2620(0x1da)]&&(_0x25d949={'filled':_0x761ac5['filled']*_0x761ac5['price'],'amount':_0x761ac5[_0xcd2620(0x22a)]*_0x761ac5[_0xcd2620(0x208)],'side':_0x761ac5['side']==_0xcd2620(0x19d)?'buy':_0xcd2620(0x19d),'price':0x1/_0x761ac5[_0xcd2620(0x208)]},_0x761ac5={..._0x761ac5,..._0x25d949});_0x433284?_0x3f177c=_0x761ac5[_0xcd2620(0x227)]==_0xcd2620(0x1c1)?_0x431bb7[_0xcd2620(0x268)]+_0x761ac5[_0xcd2620(0x22a)]:_0x431bb7[_0xcd2620(0x268)]-_0x761ac5[_0xcd2620(0x22a)]:_0x3f177c=await getCoinNumber(_0x761ac5['coin']);if(_0x761ac5[_0xcd2620(0x178)]&&_0x761ac5[_0xcd2620(0x178)][_0xcd2620(0x1bb)]==config[_0xcd2620(0x28d)])_0x1e4237=_0x761ac5[_0xcd2620(0x178)][_0xcd2620(0x20c)];else{if(_0x761ac5[_0xcd2620(0x178)]&&_0x761ac5[_0xcd2620(0x178)][_0xcd2620(0x1bb)]=='BNB'&&!_0x433284)_0x1e4237=_0x761ac5[_0xcd2620(0x178)][_0xcd2620(0x20c)]*global['ticker'][_0xcd2620(0x253)+config[_0xcd2620(0x28d)]];else _0x1e4237=defaultFee*_0x761ac5[_0xcd2620(0x22a)]*_0x761ac5[_0xcd2620(0x208)];}_0x761ac5[_0xcd2620(0x227)]==_0xcd2620(0x1c1)?(_0x9f49e2=_0x3f177c!=0x0?(_0x431bb7[_0xcd2620(0x1ff)]*_0x431bb7[_0xcd2620(0x268)]+_0x761ac5[_0xcd2620(0x208)]*(_0x3f177c-_0x431bb7['number'])+_0x1e4237)/_0x3f177c:0x0,_0x2a18d2=_0x431bb7[_0xcd2620(0x25f)]):(_0x9f49e2=_0x3f177c!=0x0?(_0x431bb7[_0xcd2620(0x1ff)]*_0x431bb7[_0xcd2620(0x268)]-_0x761ac5['price']*(_0x431bb7[_0xcd2620(0x268)]-_0x3f177c)+_0x1e4237)/_0x3f177c:0x0,_0x2a18d2=_0x431bb7[_0xcd2620(0x25f)]+(_0x761ac5[_0xcd2620(0x208)]-_0x431bb7[_0xcd2620(0x1ff)])*_0x761ac5[_0xcd2620(0x22a)]);_0x4d0c84=(_0x761ac5[_0xcd2620(0x208)]-_0x9f49e2-_0x1e4237/_0x761ac5['filled'])*_0x3f177c;let _0x2c6e3e={'coin':_0x761ac5[_0xcd2620(0x1dd)],'number':_0x3f177c,'breakeven':formatResult(_0x9f49e2,0x8),'realized':formatResult(_0x2a18d2,0x8),'unrealized':formatResult(_0x4d0c84,0x8),'fees':formatResult(_0x431bb7[_0xcd2620(0x270)]+_0x1e4237,0x8),'sells':_0x761ac5[_0xcd2620(0x227)]==_0xcd2620(0x19d)?_0x431bb7[_0xcd2620(0x23d)]+0x1:_0x431bb7[_0xcd2620(0x23d)],'buys':_0x761ac5[_0xcd2620(0x227)]=='buy'?_0x431bb7['buys']+0x1:_0x431bb7[_0xcd2620(0x244)]};dbCoinResults[_0xcd2620(0x216)](_0xcd2620(0x168))[_0xcd2620(0x1fc)]({'coin':_0x761ac5['coin']})[_0xcd2620(0x1ab)](_0x2c6e3e)[_0xcd2620(0x258)]();if(!_0x433284){if(_0x761ac5['fee']&&_0x761ac5[_0xcd2620(0x178)][_0xcd2620(0x1bb)]==_0xcd2620(0x253)){const _0x3c81b9=currentCoins[_0xcd2620(0x1fc)](_0x3220f0=>_0x3220f0[_0xcd2620(0x1dd)]==_0xcd2620(0x253));if(_0x3c81b9){let _0x1820f4=dbCoinResults['get']('coins')[_0xcd2620(0x1fc)]({'coin':_0xcd2620(0x253)})['value']();_0x2c6e3e={..._0x1820f4,'number':_0x3c81b9[_0xcd2620(0x268)]},dbCoinResults[_0xcd2620(0x216)]('coins')[_0xcd2620(0x1fc)]({'coin':_0xcd2620(0x253)})[_0xcd2620(0x1ab)](_0x2c6e3e)[_0xcd2620(0x258)]();}}}}async function placeOrder(_0x36ac9b){const _0x511a7b=_0x807ea,_0xd72e11=config[_0x511a7b(0x243)]==_0x511a7b(0x1b0)?_0x511a7b(0x1b0):'limit';if(lockOrders==ORDERS[_0x511a7b(0x16a)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x511a7b(0x129)],allOrdersPlaced=![],validateOrdersState=_0x511a7b(0x228);let _0x18451b=![];lastOrders=[];for(const _0x184bc8 of _0x36ac9b){let _0x422827,_0x37f449,_0x3a03dc,_0x4c0ce2,_0x50b8cd,_0x8181c1=_0x184bc8[_0x511a7b(0x13b)];try{const _0x44f338=await exchange[_0x511a7b(0x1a3)](_0x8181c1);_0x422827=_0x184bc8[_0x511a7b(0x1da)]?0x1/_0x184bc8[_0x511a7b(0x229)]:_0x184bc8['last'],_0x37f449=_0x44f338[_0x511a7b(0x219)],_0x3a03dc=_0x44f338[_0x511a7b(0x282)];_0x184bc8[_0x511a7b(0x1da)]?(_0x4c0ce2=_0x184bc8[_0x511a7b(0x227)]==_0x511a7b(0x1c1)?_0x511a7b(0x19d):_0x511a7b(0x1c1),_0x50b8cd=Math[_0x511a7b(0x170)](_0x184bc8['trade'])/_0x422827):(_0x4c0ce2=_0x184bc8['side'],_0x50b8cd=Math[_0x511a7b(0x170)](_0x184bc8[_0x511a7b(0x199)]));_0xd72e11==_0x511a7b(0x1fa)&&(config['ordertype']==_0x511a7b(0x279)&&(_0x422827=_0x4c0ce2==_0x511a7b(0x1c1)?_0x37f449:_0x3a03dc),config[_0x511a7b(0x243)]==_0x511a7b(0x205)&&(_0x422827=_0x4c0ce2==_0x511a7b(0x1c1)?_0x3a03dc:_0x37f449));_0x50b8cd=formatResult(_0x50b8cd,0x8),_0x422827=formatResult(_0x422827,0x8);const _0x1178ca=_0x4c0ce2==_0x511a7b(0x19d)?config['emojisell']?String[_0x511a7b(0x147)]('0x'+config[_0x511a7b(0x142)])+'\x20':'':config[_0x511a7b(0x146)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x33e059=_0xd72e11==_0x511a7b(0x1b0)?_0x511a7b(0x1a9):config[_0x511a7b(0x243)]==_0x511a7b(0x279)?'Limit\x20(high-margin)':_0x511a7b(0x29f),_0x522a8e=(Math[_0x511a7b(0x292)](Math[_0x511a7b(0x110)]()*0x35a4e900)+0x5f5e100)[_0x511a7b(0x272)]();lastOrders[_0x511a7b(0x21e)]({'customId':_0x522a8e,'symbol':_0x8181c1,'coin':_0x184bc8['coin'],'amount':_0x50b8cd,'price':_0x422827,'side':_0x4c0ce2,'reverse':_0x184bc8['reverse'],'filled':0x0});if(_0xd72e11==_0x511a7b(0x1b0))logHistory(_0x511a7b(0x1b3),''+_0x1178ca+_0x33e059+_0x511a7b(0x285)+_0x8181c1+'\x20'+_0x4c0ce2+'\x20#'+formatResult(_0x50b8cd,0x8)+'\x20@'+formatResult(_0x422827,0x8));else logHistory('order',''+_0x1178ca+_0x33e059+_0x511a7b(0x285)+_0x8181c1+'\x20'+_0x4c0ce2+'\x20#'+formatResult(_0x50b8cd,0x8)+'\x20@'+formatResult(_0x422827,0x8));let _0x17488b;_0xd72e11=='market'?_0x4c0ce2==_0x511a7b(0x1c1)&&[_0x511a7b(0x1fb),_0x511a7b(0x236),_0x511a7b(0x10e),_0x511a7b(0x19b),_0x511a7b(0x22c)]['includes'](config[_0x511a7b(0x119)])?_0x17488b=await exchange[_0x511a7b(0x225)](_0x8181c1,_0xd72e11,_0x4c0ce2,_0x50b8cd,_0x422827):_0x17488b=await exchange[_0x511a7b(0x225)](_0x8181c1,_0xd72e11,_0x4c0ce2,_0x50b8cd,undefined):_0x17488b=await exchange['createOrder'](_0x8181c1,_0xd72e11,_0x4c0ce2,_0x50b8cd,_0x422827);logger[_0x511a7b(0x29d)](_0x511a7b(0x115)+_0x17488b['id']+_0x511a7b(0x1be)+_0x522a8e);const _0x515a94=lastOrders[_0x511a7b(0x152)]-0x1;if(_0x515a94>=0x0&&lastOrders[_0x515a94][_0x511a7b(0x26c)]==_0x522a8e){lastOrders[_0x515a94][_0x511a7b(0x136)]=_0x17488b['id'];if(_0x17488b['amount'])lastOrders[_0x515a94][_0x511a7b(0x256)]=_0x17488b[_0x511a7b(0x256)];if(_0x17488b[_0x511a7b(0x208)])lastOrders[_0x515a94]['price']=_0x17488b[_0x511a7b(0x208)];lastOrders[_0x515a94][_0x511a7b(0x178)]=_0x17488b[_0x511a7b(0x178)];}if(config['cooldown']!=0x0){let _0x4b2bd6=null;if(cooldownTracker[_0x511a7b(0x152)]==config[_0x511a7b(0x26f)]-0x1)_0x4b2bd6=cooldownTracker[_0x511a7b(0x162)]();const _0x46021d=getTimeStamp();cooldownTracker['push'](_0x46021d);if(_0x4b2bd6){const _0x35a2f5=fns[_0x511a7b(0x1a7)](new Date(_0x46021d),new Date(_0x4b2bd6));if(_0x35a2f5<cooldownInterval){logHistory('error',_0x511a7b(0x202)+config['cooldown']+_0x511a7b(0x176)+cooldownInterval/0x3c+_0x511a7b(0x24a)+cooldownPeriod/(0xe10*0x3e8)+_0x511a7b(0x25c)),coolingDown=!![];break;}}}}catch(_0x580a7f){if(_0x580a7f[_0x511a7b(0x272)]()['includes'](_0x511a7b(0x28a)))lastOrders=lastOrders[_0x511a7b(0x291)](_0x3eb19b=>_0x3eb19b[_0x511a7b(0x13b)]!=_0x8181c1),logHistory(_0x511a7b(0x1e2),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x8181c1),_0x18451b=!![];else{if(_0x580a7f[_0x511a7b(0x272)]()['includes'](_0x511a7b(0x250)))lastOrders=lastOrders[_0x511a7b(0x291)](_0x5f2d06=>_0x5f2d06[_0x511a7b(0x13b)]!=_0x8181c1),logHistory('error',_0x511a7b(0x15e)+_0x8181c1),_0x18451b=!![];else{if(_0x580a7f['toString']()[_0x511a7b(0x210)](_0x511a7b(0x1a2)))lastOrders=lastOrders[_0x511a7b(0x291)](_0x798d49=>_0x798d49['symbol']!=_0x8181c1),logHistory(_0x511a7b(0x1e2),_0x511a7b(0x241)+_0x8181c1),logger[_0x511a7b(0x29d)](_0x580a7f),_0x18451b=!![];else _0x580a7f[_0x511a7b(0x272)]()[_0x511a7b(0x210)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x511a7b(0x291)](_0xe6acaf=>_0xe6acaf['symbol']!=_0x8181c1),logHistory(_0x511a7b(0x1e2),_0x511a7b(0x15d)+_0x8181c1),_0x18451b=!![]):(lastOrders=lastOrders[_0x511a7b(0x291)](_0x1c8c13=>_0x1c8c13[_0x511a7b(0x13b)]!=_0x8181c1),await handleError(_0x580a7f,_0x511a7b(0x1b4),_0x8181c1));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x511a7b(0x152)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x50c2a3=config['ordertype']==_0x511a7b(0x1b0)?validateOrderTimeout*0x3c*0x3e8:config[_0x511a7b(0x271)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x16cfd4=_0x511a7b;validateOrders(_0x16cfd4(0x20a));},_0x50c2a3);}else unlockOrders();_0x18451b&&config[_0x511a7b(0x141)]&&await pauseBot(_0x511a7b(0x299)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x511a7b(0x288),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x511a7b(0x1e2),_0x511a7b(0x26a));else lockOrders!=ORDERS[_0x511a7b(0x16a)]&&(!config[_0x511a7b(0x141)]&&(config[_0x511a7b(0x243)]==_0x511a7b(0x1b0)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x511a7b(0x1e2),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x26400a){const _0x5204aa=_0x807ea,_0x14a82a={...config,'openOrders':_0x26400a};let _0x484c0c=dbConfig[_0x5204aa(0x216)](_0x5204aa(0x1d8))['find']({'botID':botID})['value']();_0x484c0c&&dbConfig[_0x5204aa(0x216)](_0x5204aa(0x1d8))['find']({'botID':botID})['assign'](_0x14a82a)['write']();}function restoreOrders(){const _0x4fc91a=_0x807ea;let _0x363bb4;config[_0x4fc91a(0x179)]&&allOpenOrders[_0x4fc91a(0x27d)](_0x507f18=>{const _0x305f80=_0x4fc91a,_0x3e7e49=config['openOrders'][_0x305f80(0x1fc)](_0x5efd78=>_0x5efd78[_0x305f80(0x136)]==_0x507f18['id']);_0x3e7e49&&(lastOrders['push'](_0x3e7e49),_0x363bb4=_0x507f18[_0x305f80(0x211)]);});if(lastOrders[_0x4fc91a(0x152)]>0x0){lockOrders=ORDERS[_0x4fc91a(0x129)],validateOrdersState=_0x4fc91a(0x113),allOrdersPlaced=!![];const _0x14cc3f=new Date()[_0x4fc91a(0x128)](),_0x195750=config[_0x4fc91a(0x243)]==_0x4fc91a(0x1b0)?validateOrderTimeout*0x3c*0x3e8:config[_0x4fc91a(0x271)]*0x3c*0x3e8;if(_0x363bb4+_0x195750>_0x14cc3f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5ef84a=_0x4fc91a;validateOrders(_0x5ef84a(0x20a));},_0x363bb4+_0x195750-_0x14cc3f);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x322504=_0x807ea;if(!coinsLoaded){process[_0x322504(0x191)]({'telegrammsg':_0x322504(0x131)},_0x2017b0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x31c710='';if(config[_0x322504(0x1d7)])_0x31c710='<b>'+config[_0x322504(0x23b)]+_0x322504(0x283);else _0x31c710='<b>Bot\x20'+botID+_0x322504(0x283);const _0x13bcee=getKPIs('basecoin'),_0x3fe593=getKPIs(_0x322504(0x19e),config[_0x322504(0x19e)]),_0x18c0ac=getKPIs(_0x322504(0x1dc)),_0x406458=getKPIs('net-fiat',config[_0x322504(0x19e)]);_0x31c710+=_0x322504(0x12e),_0x31c710+=_0x13bcee['leftTxt']+_0x322504(0x18b)+_0x13bcee[_0x322504(0x1d2)]+'\x0a',_0x31c710+=_0x13bcee['rightTxt']+':\x20'+_0x13bcee['change']+'%\x0a',_0x31c710+=_0x3fe593['leftTxt']+_0x322504(0x18b)+_0x3fe593[_0x322504(0x1d2)]+'\x0a',_0x31c710+=_0x3fe593[_0x322504(0x1bd)]+':\x20'+_0x3fe593[_0x322504(0x251)]+'%\x0a',_0x31c710+=_0x18c0ac[_0x322504(0x25a)]+':\x20'+_0x18c0ac[_0x322504(0x1d2)]+'\x20('+config[_0x322504(0x28d)]+')\x0a',_0x31c710+=_0x18c0ac['rightTxt']+':\x20'+_0x18c0ac[_0x322504(0x251)]+_0x322504(0x123)+config[_0x322504(0x28d)]+')\x0a',_0x31c710+=_0x406458[_0x322504(0x25a)]+':\x20'+_0x406458[_0x322504(0x1d2)]+'\x20('+config[_0x322504(0x19e)]+')\x0a',_0x31c710+=_0x406458[_0x322504(0x1bd)]+':\x20'+_0x406458[_0x322504(0x251)]+_0x322504(0x123)+config[_0x322504(0x19e)]+')\x0a',_0x31c710+='</pre>',process['send']({'telegrammsg':_0x31c710},_0xa3370b=>{});}async function sendPortfolioTelegram(){const _0x35c4ef=_0x807ea;if(!coinsLoaded){process[_0x35c4ef(0x191)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2a94e4=>{});return;}let _0x1343e0='';if(config[_0x35c4ef(0x1d7)])_0x1343e0=_0x35c4ef(0x1cd)+config['botname']+_0x35c4ef(0x235);else _0x1343e0='<b>Bot\x20'+botID+_0x35c4ef(0x235);_0x1343e0+=_0x35c4ef(0x12e),_0x1343e0+=_0x35c4ef(0x174),_0x1343e0+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1343e0+='-------------------------------\x0a',currentCoins[_0x35c4ef(0x27d)](_0x6d30d4=>{const _0x2de6bd=_0x35c4ef;_0x1343e0+=_0x6d30d4[_0x2de6bd(0x1dd)][_0x2de6bd(0x1f3)](0x7)+'|\x20'+formatPad(_0x6d30d4[_0x2de6bd(0x1e6)],0x2,0x6)+'|\x20'+formatPad(_0x6d30d4['target'],0x2,0x6)+'|\x20'+formatPad(_0x6d30d4['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1343e0+=_0x35c4ef(0x111),process[_0x35c4ef(0x191)]({'telegrammsg':_0x1343e0},_0x2786e7=>{});}function formatPad(_0x4991d9,_0x3dd95d,_0x37036e){const _0x4d3016=_0x807ea,_0x539065=formatResultString(_0x4991d9,_0x3dd95d);return _0x539065?_0x539065[_0x4d3016(0x1e5)](_0x37036e):''[_0x4d3016(0x1e5)](_0x37036e);}function logHistory(_0x430308,_0x259a62,_0x4ca820=''){const _0x1d8037=_0x807ea;let _0x1de3e6={'time':getTimeStamp(),'type':_0x430308,'event':_0x259a62};dbLogs['get'](_0x1d8037(0x1e1))[_0x1d8037(0x21e)](_0x1de3e6)[_0x1d8037(0x258)]();if(_0x4ca820=='')_0x4ca820=_0x259a62;proxyEmit(_0x1d8037(0x245),{'log':_0x1de3e6,'summary':_0x4ca820}),process[_0x1d8037(0x191)]({'telegram':{..._0x1de3e6,'botname':config[_0x1d8037(0x23b)],'showname':config[_0x1d8037(0x1d7)]}},_0x17224d=>{}),logger[_0x1d8037(0x186)](''+_0x1de3e6[_0x1d8037(0x245)]);}function emitHistory(_0x39bed6={}){const _0x56d44f=_0x807ea;Object[_0x56d44f(0x280)](_0x39bed6)['length']==0x0&&(_0x39bed6={'type':['order','event'],'event':'','page':0x1});if(_0x39bed6[_0x56d44f(0x156)][_0x56d44f(0x210)](_0x56d44f(0x245)))_0x39bed6[_0x56d44f(0x156)][_0x56d44f(0x297)](_0x39bed6[_0x56d44f(0x156)][_0x56d44f(0x226)](_0x56d44f(0x245)),0x1,_0x56d44f(0x1e2),_0x56d44f(0x19f),_0x56d44f(0x288));if(dbLogs[_0x56d44f(0x10d)](_0x56d44f(0x1e1))['value']()){let _0xabd5a2=dbLogs[_0x56d44f(0x216)](_0x56d44f(0x1e1))[_0x56d44f(0x291)](_0xf9e276=>{const _0x42aa45=_0x56d44f;if(_0x39bed6['type'][_0x42aa45(0x152)]==0x0)return![];else return _0x39bed6[_0x42aa45(0x156)][_0x42aa45(0x210)](_0xf9e276['type']);})[_0x56d44f(0x291)](_0x4f4b3a=>{const _0x1f28e2=_0x56d44f;if(_0x39bed6['event']=='')return!![];else return _0x4f4b3a[_0x1f28e2(0x245)]['toLowerCase']()[_0x1f28e2(0x210)](_0x39bed6['event'][_0x1f28e2(0x158)]());})[_0x56d44f(0x12a)]('time'),_0x59f7f0=_0xabd5a2[_0x56d44f(0x1d2)]()[_0x56d44f(0x152)];_0xabd5a2=_0xabd5a2[_0x56d44f(0x1da)]()[_0x56d44f(0x16d)]((_0x39bed6[_0x56d44f(0x16b)]-0x1)*logPageSize,_0x39bed6[_0x56d44f(0x16b)]*logPageSize-0x1)[_0x56d44f(0x1da)]()[_0x56d44f(0x1d2)](),proxyEmit(_0x56d44f(0x274),{'logs':_0xabd5a2,'total':_0x59f7f0});}else proxyEmit(_0x56d44f(0x274),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3334e2){const _0x1e824c=_0x807ea;if(dbLogs[_0x1e824c(0x10d)](_0x1e824c(0x1e1))[_0x1e824c(0x1d2)]()){const _0x3478e3=dbLogs[_0x1e824c(0x216)](_0x1e824c(0x1e1))['sortBy'](_0x1e824c(0x133))['filter'](_0x401eb8=>{const _0x4dddbe=_0x1e824c;return _0x401eb8[_0x4dddbe(0x156)]==_0x4dddbe(0x1b3);})[_0x1e824c(0x1d2)]();dbLogs[_0x1e824c(0x216)](_0x1e824c(0x1e1))['remove']()[_0x1e824c(0x258)](),dbLogs['get'](_0x1e824c(0x1e1))[_0x1e824c(0x1ab)](_0x3478e3)[_0x1e824c(0x258)](),emitHistory(_0x3334e2);}}async function pauseBot(_0x390c7d=''){const _0x3899f7=_0x807ea,_0x54128e=new Date()['getTime']();if(!lastErrorShown||_0x54128e-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x54128e;!lastBotPause?(lastBotPause=_0x54128e,consecutivePauses=0x1):(_0x54128e-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x3899f7(0x17a)},_0x47b4b2=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3899f7(0x128)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x390c7d)_0x390c7d+=_0x3899f7(0x266);logHistory(_0x3899f7(0x1e2),_0x390c7d+_0x3899f7(0x207)+pauseBotInterval/0xea60+_0x3899f7(0x24e)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5783be=_0x807ea;process[_0x5783be(0x191)]({'stop':_0x5783be(0x24b)},_0x52a90f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x134cc2,_0x2e28fd){const _0x274fe5=_0x807ea;if(_0x134cc2[_0x274fe5(0x272)]()[_0x274fe5(0x210)]('API-key\x20format\x20invalid'))logHistory('error',config[_0x274fe5(0x119)]+_0x274fe5(0x14a));else{if(_0x134cc2[_0x274fe5(0x272)]()[_0x274fe5(0x210)](_0x274fe5(0x234)))logHistory(_0x274fe5(0x1e2),config[_0x274fe5(0x119)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration');else{if(_0x134cc2[_0x274fe5(0x272)]()[_0x274fe5(0x210)]('AuthenticationError'))logHistory(_0x274fe5(0x1e2),config[_0x274fe5(0x119)]+_0x274fe5(0x293)),logHistory('error',_0x274fe5(0x284));else{await handleError(_0x134cc2,_0x2e28fd);return;}}}logger[_0x274fe5(0x29d)](_0x2e28fd+_0x274fe5(0x1d3),_0x134cc2);}async function handleError(_0x4cb871,_0x30fbba,_0x21f5c3=''){const _0x1a8ec3=_0x807ea,_0x38242b=config['exchange']||_0x1a8ec3(0x265);if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x126))||_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x121)))await pauseBot(config[_0x1a8ec3(0x119)]+_0x1a8ec3(0x21f));else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x1a4))||_0x4cb871[_0x1a8ec3(0x272)]()['includes']('OnMaintenance'))await pauseBot(config['exchange']+'\x20not\x20available');else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x173)))await pauseBot(config[_0x1a8ec3(0x119)]+'\x20not\x20responding');else{if(_0x4cb871['toString']()[_0x1a8ec3(0x210)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x1a8ec3(0x119)]+_0x1a8ec3(0x144));else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x26b)))logHistory(_0x1a8ec3(0x1e2),_0x1a8ec3(0x19c)),logHistory(_0x1a8ec3(0x1e2),_0x1a8ec3(0x150)),await killBot();else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x20e)))logHistory('error',_0x1a8ec3(0x24d)),logHistory(_0x1a8ec3(0x1e2),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4cb871 instanceof ccxt[_0x1a8ec3(0x189)])await pauseBot(config['exchange']+_0x1a8ec3(0x1ee));else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x187)))logHistory(_0x1a8ec3(0x1e2),config[_0x1a8ec3(0x119)]+_0x1a8ec3(0x223)),logHistory(_0x1a8ec3(0x1e2),_0x1a8ec3(0x150)),await killBot();else{if(_0x4cb871[_0x1a8ec3(0x272)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x1a8ec3(0x1e2),config[_0x1a8ec3(0x119)]+_0x1a8ec3(0x169)),logHistory(_0x1a8ec3(0x1e2),_0x1a8ec3(0x150)),await killBot();else{if(_0x4cb871[_0x1a8ec3(0x272)]()[_0x1a8ec3(0x210)](_0x1a8ec3(0x232)))logHistory(_0x1a8ec3(0x1e2),config[_0x1a8ec3(0x119)]+_0x1a8ec3(0x1b9)),logHistory('error',_0x1a8ec3(0x150)),await killBot();else{if(_0x4cb871[_0x1a8ec3(0x272)]()['includes'](_0x1a8ec3(0x165)))logHistory(_0x1a8ec3(0x1e2),_0x1a8ec3(0x20f)+_0x21f5c3);else _0x4cb871 instanceof ccxt[_0x1a8ec3(0x1f1)]?logHistory('error',config[_0x1a8ec3(0x119)]+'\x20exchange\x20error'):await pauseBot(_0x1a8ec3(0x29a));}}}}}}}}}}logger[_0x1a8ec3(0x29d)](_0x30fbba+_0x1a8ec3(0x1d3),_0x4cb871);}function formatResult(_0x4b8261,_0x20bb15){const _0x14a2b9=_0x807ea;return parseFloat(_0x4b8261[_0x14a2b9(0x242)](_0x20bb15));}function formatResultTruncate(_0x53d95b,_0x13fe1c){const _0x11d91e=_0x807ea;let _0xc4b515=formatResultString(_0x53d95b,0xa),_0x1bdb1a=_0xc4b515[_0x11d91e(0x226)]('.');return _0x1bdb1a!=-0x1&&(_0xc4b515=_0xc4b515[_0x11d91e(0x16d)](0x0,_0x1bdb1a+_0x13fe1c+0x1)),Number(_0xc4b515);}function formatResultString(_0x58f488,_0x5cd8b4){const _0x54f407=_0x807ea;let _0x31db96;if(!(''+_0x58f488)[_0x54f407(0x210)]('e'))_0x31db96=+(Math['round'](_0x58f488+'e+'+_0x5cd8b4)+'e-'+_0x5cd8b4);else{let _0x5cb4cc=(''+_0x58f488)['split']('e'),_0x393d3a='';+_0x5cb4cc[0x1]+_0x5cd8b4>0x0&&(_0x393d3a='+'),_0x31db96=+(Math[_0x54f407(0x14f)](+_0x5cb4cc[0x0]+'e'+_0x393d3a+(+_0x5cb4cc[0x1]+_0x5cd8b4))+'e-'+_0x5cd8b4);}return Number(_0x31db96)[_0x54f407(0x242)](_0x5cd8b4);}function getServerTime(){const _0x259a52=_0x807ea,_0x4b7004=new Date();return _0x4b7004['getFullYear']()+'/'+(_0x4b7004[_0x259a52(0x1d9)]()+0x1)[_0x259a52(0x272)]()[_0x259a52(0x1e5)](0x2,'0')+'/'+_0x4b7004[_0x259a52(0x135)]()[_0x259a52(0x272)]()[_0x259a52(0x1e5)](0x2,'0')+'\x20'+_0x4b7004['getHours']()['toString']()[_0x259a52(0x1e5)](0x2,'0')+':'+_0x4b7004[_0x259a52(0x28f)]()[_0x259a52(0x272)]()[_0x259a52(0x1e5)](0x2,'0')+':'+_0x4b7004[_0x259a52(0x1ef)]()['toString']()[_0x259a52(0x1e5)](0x2,'0');}function getTimeStamp(){const _0x3deb93=_0x807ea,_0x5bb9f3=shiftedTime();return _0x5bb9f3[_0x3deb93(0x1ba)]()+'/'+(_0x5bb9f3[_0x3deb93(0x1d9)]()+0x1)[_0x3deb93(0x272)]()[_0x3deb93(0x1e5)](0x2,'0')+'/'+_0x5bb9f3[_0x3deb93(0x135)]()[_0x3deb93(0x272)]()[_0x3deb93(0x1e5)](0x2,'0')+'\x20'+_0x5bb9f3[_0x3deb93(0x203)]()[_0x3deb93(0x272)]()[_0x3deb93(0x1e5)](0x2,'0')+':'+_0x5bb9f3[_0x3deb93(0x28f)]()[_0x3deb93(0x272)]()[_0x3deb93(0x1e5)](0x2,'0')+':'+_0x5bb9f3['getSeconds']()[_0x3deb93(0x272)]()[_0x3deb93(0x1e5)](0x2,'0');}function getDate(){const _0x355dfd=_0x807ea,_0x6026d7=shiftedTime();return _0x6026d7[_0x355dfd(0x1ba)]()+'/'+(_0x6026d7[_0x355dfd(0x1d9)]()+0x1)[_0x355dfd(0x272)]()['padStart'](0x2,'0')+'/'+_0x6026d7[_0x355dfd(0x135)]()[_0x355dfd(0x272)]()[_0x355dfd(0x1e5)](0x2,'0');}function getHour(){const _0x63f019=_0x807ea,_0xdc8b65=shiftedTime();return _0xdc8b65['getHours']()[_0x63f019(0x272)]()[_0x63f019(0x1e5)](0x2,'0');}function sleep(_0x3ad515){return new Promise(_0x149e13=>setTimeout(_0x149e13,_0x3ad515));}function shiftedTime(){const _0x9daa10=_0x807ea,_0x37d1b9=new Date();let _0x411824=_0x37d1b9;if(config&&config[_0x9daa10(0x1f2)]!==0x0)_0x411824=fns[_0x9daa10(0x11f)](_0x37d1b9,{'hours':config[_0x9daa10(0x1f2)]});return _0x411824;}function timer(_0x26316d){const _0x317978=_0x807ea,_0x230c58=new Date();!lasttime?console[_0x317978(0x151)](getTimeStamp()+_0x317978(0x1bf),_0x26316d,_0x230c58):console['log'](getTimeStamp()+_0x317978(0x1bf),_0x26316d,(_0x230c58-lasttime)/0x3e8),lasttime=_0x230c58;}