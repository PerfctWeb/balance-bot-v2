const _0x500ec4=_0x176c;(function(_0x42c6e2,_0x16f4bb){const _0xbe8bdb=_0x176c,_0x4bd70f=_0x42c6e2();while(!![]){try{const _0x42f97a=parseInt(_0xbe8bdb(0x1cb))/0x1+parseInt(_0xbe8bdb(0x153))/0x2+parseInt(_0xbe8bdb(0x27e))/0x3+parseInt(_0xbe8bdb(0x277))/0x4*(-parseInt(_0xbe8bdb(0x1f4))/0x5)+-parseInt(_0xbe8bdb(0x1cd))/0x6*(parseInt(_0xbe8bdb(0x175))/0x7)+parseInt(_0xbe8bdb(0x198))/0x8*(-parseInt(_0xbe8bdb(0x111))/0x9)+parseInt(_0xbe8bdb(0x103))/0xa;if(_0x42f97a===_0x16f4bb)break;else _0x4bd70f['push'](_0x4bd70f['shift']());}catch(_0x13da03){_0x4bd70f['push'](_0x4bd70f['shift']());}}}(_0x49fb,0xc288e));const _0x19cfbd=function(){let _0x32f2a5=!![];return function(_0x46e8ff,_0x24a486){const _0x5dcdd8=_0x32f2a5?function(){const _0x2f1179=_0x176c;if(_0x24a486){const _0x17640a=_0x24a486[_0x2f1179(0xde)](_0x46e8ff,arguments);return _0x24a486=null,_0x17640a;}}:function(){};return _0x32f2a5=![],_0x5dcdd8;};}(),_0x3604e1=_0x19cfbd(this,function(){const _0x1fc825=_0x176c;return _0x3604e1[_0x1fc825(0x157)]()['search']('(((.+)+)+)+$')[_0x1fc825(0x157)]()['constructor'](_0x3604e1)[_0x1fc825(0x280)](_0x1fc825(0x173));});_0x3604e1();'use strict';const ccxt=require('ccxt'),low=require(_0x500ec4(0x1fc)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x500ec4(0x178)],util=require(_0x500ec4(0x1ae)),argv=require(_0x500ec4(0x1d3))(process[_0x500ec4(0xe8)]['slice'](0x2))[_0x500ec4(0xe8)],path=require('path'),axios=require(_0x500ec4(0x24e));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x500ec4(0x18f),'BUSD','TUSD',_0x500ec4(0x1d8),_0x500ec4(0x138),_0x500ec4(0x273)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x500ec4(0x196)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x500ec4(0x230)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x500ec4(0x1af)+pauseBotInterval/0xea60+_0x500ec4(0xdf),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x500ec4(0x116)],botID=process[_0x500ec4(0xe8)][0x2]||_0x500ec4(0x1ac),pattern=/^[0-9]{3}$/;!pattern[_0x500ec4(0x1f2)](botID)&&(console[_0x500ec4(0x17b)](_0x500ec4(0x11c)+botID+_0x500ec4(0x1ca)),killBot());const userID=process[_0x500ec4(0xe8)][0x3]||'',configpath=userID?_0x500ec4(0x223)+userID+'/':'./config/',logspath=userID?_0x500ec4(0x161)+userID+'/':_0x500ec4(0x161),loggerfile=fs[_0x500ec4(0x1cf)](logspath+_0x500ec4(0x216),{'flags':'a'});!fs[_0x500ec4(0x209)](configpath)&&fs[_0x500ec4(0x1ba)](configpath);!fs[_0x500ec4(0x209)](logspath)&&fs[_0x500ec4(0x1ba)](logspath);const configfile=configpath+_0x500ec4(0x268)+botID+_0x500ec4(0x16f),logfile=configpath+_0x500ec4(0x268)+botID+_0x500ec4(0x199),performancefile=configpath+_0x500ec4(0x268)+botID+_0x500ec4(0x1a3),coinresultsfile=configpath+_0x500ec4(0x268)+botID+_0x500ec4(0x232),settingsfile=configpath+_0x500ec4(0x11a),securefile=configpath+_0x500ec4(0xd7),configbackuppath=configpath+_0x500ec4(0x255),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x500ec4(0x1bc)]({'logs':[],'version':serverversion})[_0x500ec4(0x289)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x500ec4(0x1bc)]({'data':[],'version':serverversion})[_0x500ec4(0x289)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x500ec4(0x1bc)]({'bot':[],'version':serverversion})[_0x500ec4(0x289)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x500ec4(0x289)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x500ec4(0x221),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3e8eb2=>{const _0x309feb=_0x500ec4;console[_0x309feb(0x17b)](_0x3e8eb2);},'simple':_0x38f251=>{const _0x5e4330=_0x500ec4;console[_0x5e4330(0x17b)](_0x38f251),loggerfile[_0x5e4330(0x289)](util[_0x5e4330(0x24f)](_0x38f251)+'\x0a');},'full':async(_0x91e61c,_0x26044a='')=>{const _0x274a8d=_0x500ec4;let _0x4cd195;if(config['showname'])_0x4cd195=getTimeStamp()+':\x20'+config[_0x274a8d(0x1c2)]+_0x274a8d(0xd8)+_0x91e61c;else _0x4cd195=getTimeStamp()+_0x274a8d(0xfc)+botID+_0x274a8d(0xd8)+_0x91e61c;console[_0x274a8d(0x17b)](_0x4cd195),loggerfile[_0x274a8d(0x289)](util['format'](_0x4cd195)+'\x0a'),_0x26044a&&(console[_0x274a8d(0x17b)](_0x26044a),loggerfile[_0x274a8d(0x289)](util['format'](_0x26044a)+'\x0a'));},'debug':async(_0x4abadb,_0x3753fd='')=>{const _0x14ad9b=_0x500ec4;let _0xe5c7a4;if(config[_0x14ad9b(0x25c)])_0xe5c7a4=getTimeStamp()+':\x20'+config[_0x14ad9b(0x1c2)]+'\x20>\x20[DEBUG]\x20'+_0x4abadb;else _0xe5c7a4=getTimeStamp()+_0x14ad9b(0xfc)+botID+_0x14ad9b(0xe5)+_0x4abadb;if(debugging)console[_0x14ad9b(0x17b)](_0xe5c7a4);loggerfile[_0x14ad9b(0x289)](util[_0x14ad9b(0x24f)](_0xe5c7a4)+'\x0a');if(_0x3753fd){if(debugging)console['log'](_0x3753fd);loggerfile['write'](util['format'](_0x3753fd)+'\x0a');}}};process['on']('uncaughtException',function(_0x3d066b){const _0x47927e=_0x500ec4;handleError(_0x3d066b,_0x47927e(0x213));});settings[_0x500ec4(0xf4)]!=config[_0x500ec4(0xf4)]&&updateTimeshift(settings[_0x500ec4(0xf4)]);settings[_0x500ec4(0x1c5)]!=config[_0x500ec4(0x1c5)]&&updateOnepagemode(settings[_0x500ec4(0x1c5)]);(settings[_0x500ec4(0xd6)]&&!config[_0x500ec4(0xd6)]||!settings[_0x500ec4(0xd6)]&&config[_0x500ec4(0xd6)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x500ec4(0x21e)]({'started':_0x500ec4(0x16d)},_0x755550=>{}),initializeProcessListeners();function proxyEmit(_0x264df5,_0x39375f=null){const _0x45aa27=_0x500ec4;process[_0x45aa27(0x21e)]({'function':_0x264df5,'args':_0x39375f},_0x57501d=>{});}function initializeProcessListeners(){const _0x5de20c=_0x500ec4;process['on'](_0x5de20c(0xf9),_0x214085=>{const _0x233e8b=_0x5de20c;switch(Object[_0x233e8b(0x162)](_0x214085)[0x0]){case _0x233e8b(0xf4):_0x214085[_0x233e8b(0xf4)]!=undefined&&(settings['timeshift']=_0x214085[_0x233e8b(0xf4)],updateTimeshift(settings[_0x233e8b(0xf4)]));break;case _0x233e8b(0x1c5):_0x214085[_0x233e8b(0x1c5)]!=undefined&&(settings['onepagemode']=_0x214085['onepagemode'],updateOnepagemode(settings[_0x233e8b(0x1c5)]));break;case _0x233e8b(0xd6):_0x214085[_0x233e8b(0xd6)]!=undefined&&(settings[_0x233e8b(0xd6)]=_0x214085[_0x233e8b(0xd6)],updateMarketcapApi(settings[_0x233e8b(0xd6)]));break;case _0x233e8b(0xd4):_0x214085[_0x233e8b(0xd4)]!=undefined&&(bots=JSON['parse'](_0x214085['bots']),proxyEmit('bots',bots));break;case _0x233e8b(0x1c0):switch(_0x214085[_0x233e8b(0x1c0)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x214085[_0x233e8b(0x1dc)]);break;case _0x233e8b(0x235):deleteHistoryAlerts(_0x214085[_0x233e8b(0x1dc)]);break;case _0x233e8b(0x1e7):getPortfolio(_0x214085[_0x233e8b(0x1dc)]);break;case _0x233e8b(0x25d):storeConfiguration(_0x214085[_0x233e8b(0x1dc)]);break;case _0x233e8b(0x220):storeHeadless(_0x214085['args']);break;case'storeFiat':storeFiat(_0x214085[_0x233e8b(0x1dc)]);break;case _0x233e8b(0x1a4):resetHistory();break;case _0x233e8b(0x117):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x214085[_0x233e8b(0x1dc)]);break;case'cancelLoading':cancelLoading();break;case _0x233e8b(0x272):showConfig();break;case _0x233e8b(0x240):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x9b1ac2=![]){const _0x3fa6d4=_0x500ec4;logger[_0x3fa6d4(0x276)]('Reset\x20|\x20'+(_0x9b1ac2?_0x3fa6d4(0x112):'no\x20exchange\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x3fa6d4(0x1d4)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x9b1ac2)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x3fa6d4(0x26b)]!=_0x3fa6d4(0x26f)){loadingProgress=0x0;_0x9b1ac2&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![]);const _0x4e60b8=await getCoins();[currentCoins,currentCoinsAll]=_0x4e60b8,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3fa6d4(0x276)](_0x3fa6d4(0x137)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3fa6d4(0x1c3)]==0x0&&allOpenOrders[_0x3fa6d4(0x1c3)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x25d23a=![]){const _0x415d6f=_0x500ec4;logger['debug']('Resuming\x20('+(_0x25d23a?_0x415d6f(0x1ec):'complete')+_0x415d6f(0x264)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x25d23a){getBalances();return;}coinsLoaded=![];if(config[_0x415d6f(0x26b)]!=''&&config[_0x415d6f(0x26b)]!=_0x415d6f(0x26f)){loadingProgress=0x1;const _0x311325=await getCoins();[currentCoins,currentCoinsAll]=_0x311325,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x415d6f(0x276)](_0x415d6f(0x137)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x415d6f(0x1c3)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x12c6f7){const _0x505419=_0x500ec4;let _0x452254=![];if(_0x12c6f7)_0x452254=!![];let _0x13d30a;_0x452254?_0x13d30a=_0x12c6f7[_0x505419(0x1e9)](_0xa21afc=>_0xa21afc[_0x505419(0x1bf)]):_0x13d30a=currentCoinsAll['map'](_0x432fb1=>_0x432fb1['coin']);if(!config[_0x505419(0xd6)]||!_0x452254&&!config['marketcapEnabled']||_0x13d30a[_0x505419(0x1c3)]==0x0)return;let _0x3eb335=null;try{_0x3eb335=await axios['get'](_0x505419(0x1f6),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x505419(0xd6)]},'params':{'symbol':_0x13d30a[_0x505419(0x157)]()}});}catch(_0x53c8d5){_0x3eb335=null,_0x53c8d5[_0x505419(0x157)]()[_0x505419(0x1e8)](_0x505419(0x1aa))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x505419(0x1a6),emittedConfiguration()),logHistory(_0x505419(0x1a9),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x505419(0xdf)),logger[_0x505419(0x276)](_0x505419(0x250),_0x53c8d5[_0x505419(0x157)]()+'\x20-\x20'+_0x53c8d5[_0x505419(0x20e)]));}if(_0x3eb335){let _0x4c87b0=0x0;const _0xde7852=_0x3eb335[_0x505419(0x1bd)];_0x13d30a[_0x505419(0x1a1)](_0x446ba6=>{const _0x3fb0ea=_0x505419;if(_0xde7852[_0x3fb0ea(0x1bd)][_0x446ba6][0x0])_0x4c87b0+=_0xde7852[_0x3fb0ea(0x1bd)][_0x446ba6][0x0][_0x3fb0ea(0x141)][_0x3fb0ea(0x18f)][_0x3fb0ea(0x243)];}),_0x13d30a['forEach'](_0x2fb542=>{const _0x2c307c=_0x505419,_0x2efe2a=_0xde7852[_0x2c307c(0x1bd)][_0x2fb542][0x0]?_0xde7852['data'][_0x2fb542][0x0][_0x2c307c(0x141)][_0x2c307c(0x18f)][_0x2c307c(0x243)]:0x0;if(_0x452254){const _0x225542=_0x12c6f7[_0x2c307c(0x1b7)](_0x3fcc16=>_0x3fcc16[_0x2c307c(0x1bf)]==_0x2fb542);_0x225542&&(_0x225542[_0x2c307c(0x1f9)]=_0x2efe2a);}else{const _0x3fa14b=currentCoins[_0x2c307c(0x1b7)](_0x1b855e=>_0x1b855e[_0x2c307c(0x1bf)]==_0x2fb542);_0x3fa14b&&(_0x3fa14b[_0x2c307c(0x1f9)]=_0x2efe2a);const _0x2effa3=currentCoinsAll[_0x2c307c(0x1b7)](_0x366f1a=>_0x366f1a['coin']==_0x2fb542);_0x2effa3&&(_0x2effa3[_0x2c307c(0x1f9)]=_0x2efe2a);}}),!_0x452254&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x375011=_0x500ec4,_0x488606=0x2;let _0x5d5434=0x0,_0x30ed76=0x0,_0x2b4f71=0x0,_0xafc8c7=0x0,_0x4e3aa4=0x0;config[_0x375011(0x27d)][_0x375011(0x1a1)](_0x12bdf1=>{const _0x4993f4=_0x375011;if(!_0x12bdf1[_0x4993f4(0x150)]){_0x2b4f71++,_0x5d5434+=_0x12bdf1['slider'];if(_0x12bdf1[_0x4993f4(0x170)]===-0x1){_0x5d5434++;const _0x1b3dc9=currentCoinsAll[_0x4993f4(0x1b7)](_0x21490d=>_0x21490d[_0x4993f4(0x1bf)]==_0x12bdf1[_0x4993f4(0x1bf)]);_0x1b3dc9&&(_0xafc8c7+=_0x1b3dc9[_0x4993f4(0x1f9)],_0x4e3aa4+=Math['sqrt'](_0x1b3dc9[_0x4993f4(0x1f9)]));}if(_0x12bdf1['slider']!==-0x1)_0x30ed76++;}});let _0x50a6c3;const _0x5bc782=0x64-_0x5d5434,_0x16d9ae=_0x2b4f71-_0x30ed76;_0x50a6c3=_0x16d9ae===0x0?_0x5d5434:Math['max'](0x64,_0x5d5434),config[_0x375011(0x27d)][_0x375011(0x1a1)](_0x2a6299=>{const _0x19f91a=_0x375011,_0x253a3b=currentCoinsAll[_0x19f91a(0x1b7)](_0x157c8d=>_0x157c8d[_0x19f91a(0x1bf)]==_0x2a6299[_0x19f91a(0x1bf)]);_0x253a3b&&(_0x2a6299['marketcap']=_0x253a3b['marketcap']);if(!_0x2a6299['excluded']){if(_0x50a6c3<=0x64){if(_0x2a6299[_0x19f91a(0x170)]===-0x1){if(_0xafc8c7!==0x0&&config[_0x19f91a(0x1ee)]){if(_0x253a3b){if(config['marketcapEnabled']==_0x19f91a(0x1f9))_0x2a6299['distribution']=(_0x5bc782/(_0xafc8c7/_0x253a3b[_0x19f91a(0x1f9)]))[_0x19f91a(0x12f)](_0x488606);else config[_0x19f91a(0x1ee)]==_0x19f91a(0x113)&&(_0x2a6299[_0x19f91a(0x1e0)]=(_0x5bc782/(_0x4e3aa4/Math[_0x19f91a(0x1ef)](_0x253a3b[_0x19f91a(0x1f9)])))['toFixed'](_0x488606));}}}}}}),updateConfig();}function updateConfig(){const _0x5c854e=_0x500ec4;let _0x42f851=dbConfig[_0x5c854e(0x1dd)](_0x5c854e(0x17d))[_0x5c854e(0x1b7)]({'botID':botID})[_0x5c854e(0x203)]();_0x42f851&&dbConfig[_0x5c854e(0x1dd)](_0x5c854e(0x17d))[_0x5c854e(0x1b7)]({'botID':botID})[_0x5c854e(0xeb)](config)['write']();}function logMemory(){const _0x525808=_0x500ec4,_0x20d1fa=process[_0x525808(0x107)]()[_0x525808(0xd5)]/0x400/0x400;logger[_0x525808(0x276)](_0x525808(0x1a2)+process['pid']+_0x525808(0x165)+formatResult(_0x20d1fa,0x1)+_0x525808(0x1ff));}async function startScheduler(){const _0xd35dd2=_0x500ec4,_0x1d7bda=shiftedTime()[_0xd35dd2(0x25a)]();getMarketCap(),_0x1d7bda==0x1&&logMemory(),(_0x1d7bda==0x2||_0x1d7bda==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5163f9=![]){const _0x244bd6=_0x500ec4;logger[_0x244bd6(0x276)]('Initiating\x20bot\x20restart');if(!_0x5163f9)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x244bd6(0x21e)]({'stop':_0x244bd6(0x24a)},_0x359e16=>{});}async function initExchange(_0x1c5421=config[_0x500ec4(0x1d4)],_0x12d685=config[_0x500ec4(0x26b)],_0x3d8a68=config['apiSecret'],_0x21d08d=config[_0x500ec4(0x14d)]){const _0xb08221=_0x500ec4;if(exchange){logger[_0xb08221(0x276)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0xb08221(0x276)](_0xb08221(0xe7));!supportedExchanges()['includes'](_0x1c5421)&&(logHistory(_0xb08221(0x1a9),_0xb08221(0x14f)+_0x1c5421+_0xb08221(0x251)),killBot());const _0x31c89f=ccxt['pro'][_0x1c5421[_0xb08221(0x13f)]()];exchange=new _0x31c89f({'apiKey':_0x12d685,'secret':_0x3d8a68,'options':{'defaultType':_0xb08221(0x281)}});if(_0x21d08d)exchange[_0xb08221(0x149)]=_0x21d08d;}function updateExchange(_0x3b1800,_0x1f9e69,_0x593651=null){const _0xbf7490=_0x500ec4;exchange[_0xbf7490(0x26b)]=_0x3b1800,exchange[_0xbf7490(0x21a)]=_0x1f9e69,exchange['apiPassword']=_0x593651,logger['debug'](_0xbf7490(0x151));}function setStableCoins(){const _0x36d49e=_0x500ec4;let _0x7a922c=config[_0x36d49e(0x245)]=='ETH'?_0x36d49e(0x1ce):config[_0x36d49e(0x245)]==_0x36d49e(0x14e)?_0x36d49e(0x14e):_0x36d49e(0x125),_0x5b362d=!allSymbols[_0x36d49e(0x1e8)](_0x7a922c+'/USD')?_0x36d49e(0x1d8):_0x36d49e(0x18f),_0x5adaaf=!allSymbols[_0x36d49e(0x1e8)](_0x7a922c+_0x36d49e(0xea))?_0x5b362d:_0x36d49e(0x19f);stablecoins={'eur':{'coin':''+_0x7a922c+_0x5adaaf,'symbol':_0x7a922c+'/'+_0x5adaaf},'usd':{'coin':''+_0x7a922c+_0x5b362d,'symbol':_0x7a922c+'/'+_0x5b362d}};}async function initwsCcxt(){const _0x223cec=_0x500ec4;initCycle++;const _0x14c57c=initCycle;let _0x4af421=[];config[_0x223cec(0x27d)]['forEach'](_0x3c6a28=>{const _0x4a6c34=_0x223cec;if(!_0x3c6a28[_0x4a6c34(0x150)]&&_0x3c6a28['coin']!=config[_0x4a6c34(0x245)])_0x4af421['push'](_0x3c6a28['symbol']);});if(!_0x4af421[_0x223cec(0x1e8)](stablecoins[_0x223cec(0x263)]['symbol']))_0x4af421[_0x223cec(0x192)](stablecoins['eur']['symbol']);if(!_0x4af421[_0x223cec(0x1e8)](stablecoins[_0x223cec(0x1fe)][_0x223cec(0x234)]))_0x4af421['push'](stablecoins['usd'][_0x223cec(0x234)]);if(config[_0x223cec(0x1d4)][_0x223cec(0x23c)](_0x223cec(0x23a))&&config[_0x223cec(0x245)]!=_0x223cec(0x14e)){if(!_0x4af421['includes'](_0x223cec(0x1e6)+config[_0x223cec(0x245)]))_0x4af421[_0x223cec(0x192)](_0x223cec(0x1e6)+config[_0x223cec(0x245)]);}loadCoins(_0x4af421),_0x4af421=validateSymbols(_0x4af421);const _0x83b935=async _0x266acb=>{const _0xc61ebd=_0x223cec;let _0x1ff5f9;try{const _0x4008c6=await getTickers(_0x266acb);Object[_0xc61ebd(0x1fd)](_0x4008c6)[_0xc61ebd(0x1a1)](_0x159f4d=>{const _0x1bbcc8=_0xc61ebd;_0x1ff5f9=_0x159f4d[0x1][_0x1bbcc8(0x234)],gTicker[noslash(_0x1ff5f9)]=_0x159f4d[0x1][_0x1bbcc8(0x183)],gChange[_0x1ff5f9]=_0x159f4d[0x1][_0x1bbcc8(0x140)];});}catch(_0x10348f){await handleError(_0x10348f,_0xc61ebd(0x24b),_0x1ff5f9);}},_0x3133d6=async _0x103efd=>{const _0x463cf9=_0x223cec;while(initCycle==_0x14c57c){if(!botPaused)try{const _0x31bad0=await exchange[_0x463cf9(0x123)](_0x103efd);gTicker[noslash(_0x31bad0[0x0]['symbol'])]=_0x31bad0[0x0][_0x463cf9(0x15a)];}catch(_0x425eb6){if(!exchangeStopped)await handleError(_0x425eb6,_0x463cf9(0x15e),_0x103efd);}else await sleep(0x64);}},_0x2536ee=async _0x4e047c=>{const _0x57bc65=_0x223cec;while(initCycle==_0x14c57c){if(!botPaused)try{const _0x55e4e1=await exchange['watchTradesForSymbols'](_0x4e047c),_0x159d6c=_0x55e4e1['pop']();gTicker[noslash(_0x159d6c[_0x57bc65(0x234)])]=_0x159d6c['price'];}catch(_0x555c3c){if(!exchangeStopped)await handleError(_0x555c3c,_0x57bc65(0x12b),_0x4e047c[_0x57bc65(0x157)]());}else await sleep(0x64);}},_0x5ec7eb=async _0x7bc8a9=>{const _0x560996=_0x223cec;while(initCycle==_0x14c57c){if(!botPaused){let _0x2bea45;try{await sleep(0x3c*0x3e8);const _0x2fb8dd=await getTickers(_0x7bc8a9);Object['entries'](_0x2fb8dd)[_0x560996(0x1a1)](_0x143043=>{const _0x1c3a75=_0x560996;_0x2bea45=_0x143043[0x1][_0x1c3a75(0x234)],gChange[_0x2bea45]=_0x143043[0x1]['percentage'];});}catch(_0x158a21){if(!exchangeStopped)await handleError(_0x158a21,_0x560996(0x181),_0x2bea45);}}else await sleep(0x64);}},_0x2db823=async _0x587559=>{const _0x5e4bbf=_0x223cec;while(initCycle==_0x14c57c){if(!botPaused)try{const _0x1b17e5=await exchange[_0x5e4bbf(0x147)](_0x587559);initCycle==_0x14c57c&&_0x1b17e5[_0x5e4bbf(0x1a1)](_0xc7754c=>{updateNumberCoinsCcxt(_0xc7754c);});}catch(_0x1ef0a8){if(!exchangeStopped)await handleError(_0x1ef0a8,_0x5e4bbf(0x154));}else await sleep(0x64);}};_0x83b935(_0x4af421),_0x5ec7eb(_0x4af421),exchange[_0x223cec(0x252)][_0x223cec(0xfa)]&&!(config[_0x223cec(0x1d4)]==_0x223cec(0xe4)&&_0x4af421[_0x223cec(0x1c3)]>0xa)?_0x2536ee(_0x4af421):_0x4af421[_0x223cec(0x1a1)](_0x24f44e=>{_0x3133d6(_0x24f44e);}),_0x4af421['forEach'](_0x437a17=>{_0x2db823(_0x437a17);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5d259e){const _0x5b283f=_0x500ec4;let _0x351dd9={};try{if(config[_0x5b283f(0x1d4)]!=_0x5b283f(0x11e))_0x351dd9=await exchange[_0x5b283f(0x258)](_0x5d259e);else for(const _0x5012a9 of _0x5d259e){const _0x131bd8=await exchange[_0x5b283f(0x21b)](_0x5012a9);_0x351dd9[_0x5012a9]=_0x131bd8;}return _0x351dd9;}catch(_0x12e9f3){throw _0x12e9f3;}}function setBlockTransactionDetection(_0x45191e){const _0x301d85=_0x500ec4;blockTransactionDetection=_0x45191e,logger['debug'](_0x301d85(0x13c)+blockTransactionDetection);}async function detectLiquidityChange(_0x123619=0x0){const _0x5a2be3=_0x500ec4;transactionDetectionOngoing=!![];try{const _0x31195e=await getCoins(_0x123619),[_0x99601d,_0x2960c2]=_0x31195e;let _0x4d8f5c=[];currentCoins[_0x5a2be3(0x1a1)](_0x4cfd0d=>{const _0xd8c376=_0x5a2be3,_0x2ebd5e=_0x99601d[_0xd8c376(0x1b7)](_0x1f9e38=>_0x1f9e38[_0xd8c376(0x1bf)]==_0x4cfd0d['coin']);if(_0x2ebd5e){if(_0x4cfd0d[_0xd8c376(0x229)]!=_0x2ebd5e[_0xd8c376(0x229)]){let _0x120584;if(_0x4cfd0d[_0xd8c376(0x1bf)]!=config[_0xd8c376(0x245)]){const _0x599a86=gTicker[noslash(_0x4cfd0d['symbol'])];_0x120584=_0x4cfd0d[_0xd8c376(0x247)]?0x1/_0x599a86:_0x599a86;}else _0x120584=0x1;_0x4d8f5c[_0xd8c376(0x192)]({'coin':_0x4cfd0d[_0xd8c376(0x1bf)],'symbol':_0x4cfd0d['symbol'],'price':_0x120584,'number':Number(formatResult(_0x2ebd5e['number']-_0x4cfd0d[_0xd8c376(0x229)],0x8)),'basecoinvalue':_0x120584*(_0x2ebd5e[_0xd8c376(0x229)]-_0x4cfd0d['number'])});}}});if(_0x4d8f5c[_0x5a2be3(0x1c3)]>0x0&&!blockTransactionDetection)for(const _0x17de2c of _0x4d8f5c){if(config[_0x5a2be3(0x106)]){logger[_0x5a2be3(0x276)](_0x5a2be3(0x1a8)+_0x17de2c[_0x5a2be3(0xe0)]+_0x5a2be3(0x249)+lastFees['highest']);if(lastFees['highest']==0x0||Math['abs'](_0x17de2c[_0x5a2be3(0xe0)])>lastFees[_0x5a2be3(0x12d)]*1.2){if(config[_0x5a2be3(0x106)]==_0x5a2be3(0x282)){delete _0x17de2c[_0x5a2be3(0x234)],delete _0x17de2c[_0x5a2be3(0xe0)];let _0x28be47=[],_0x4bea55=[...config[_0x5a2be3(0x200)]]||[],_0x4edac0=config[_0x5a2be3(0x200)];_0x4bea55[_0x5a2be3(0x10b)]((_0x49d95f,_0x49f646)=>_0x49d95f[_0x5a2be3(0x1c4)]>_0x49f646[_0x5a2be3(0x1c4)]?-0x1:_0x49f646[_0x5a2be3(0x1c4)]>_0x49d95f[_0x5a2be3(0x1c4)]?0x1:0x0);const _0x553d1b=getDate();if(_0x4bea55[0x0]){const _0x4a13ac=fns[_0x5a2be3(0x212)](_0x4bea55[0x0][_0x5a2be3(0x1c4)],'yyyy/MM/dd',new Date()),_0x2bec22=fns[_0x5a2be3(0x212)](_0x553d1b,_0x5a2be3(0x23d),new Date());if(fns['isEqual'](_0x4a13ac,_0x2bec22)){_0x28be47=_0x4bea55[0x0][_0x5a2be3(0x22d)];const _0x3aba9f=_0x28be47['find'](_0x58a293=>_0x58a293[_0x5a2be3(0x1bf)]==_0x17de2c[_0x5a2be3(0x1bf)]);_0x3aba9f?(_0x3aba9f[_0x5a2be3(0x229)]+=_0x17de2c[_0x5a2be3(0x229)],_0x3aba9f[_0x5a2be3(0x229)]==0x0&&(_0x28be47=_0x28be47[_0x5a2be3(0x224)](_0x1f794d=>{const _0x20ce8f=_0x5a2be3;return _0x1f794d[_0x20ce8f(0x1bf)]!=_0x17de2c['coin'];}))):_0x28be47['push'](_0x17de2c);const _0x21d332=_0x4edac0[_0x5a2be3(0x1b7)](_0x36f219=>_0x36f219['date']==_0x553d1b);_0x21d332['changes']=_0x28be47;}else _0x4edac0[_0x5a2be3(0x192)]({'date':_0x553d1b,'changes':[_0x17de2c]});}const _0x5de345=_0x4edac0['find'](_0x60a7b4=>_0x60a7b4[_0x5a2be3(0x1c4)]==_0x553d1b);if(_0x5de345){let _0x5d93f3=!![];_0x5de345[_0x5a2be3(0x22d)][_0x5a2be3(0x1a1)](_0x1af619=>{if(_0x1af619['number']!=0x0)_0x5d93f3=![];}),_0x5d93f3&&(_0x4edac0=_0x4edac0[_0x5a2be3(0x224)](_0x249548=>{const _0x5328a3=_0x5a2be3;return _0x249548[_0x5328a3(0x1c4)]!=_0x553d1b;}));}let _0x2a4063=dbConfig[_0x5a2be3(0x1dd)](_0x5a2be3(0x17d))[_0x5a2be3(0x1b7)]({'botID':botID})[_0x5a2be3(0x203)]();_0x2a4063&&(dbConfig[_0x5a2be3(0x1dd)](_0x5a2be3(0x17d))[_0x5a2be3(0x1b7)]({'botID':botID})[_0x5a2be3(0xeb)]({'liquidity':_0x4edac0})[_0x5a2be3(0x289)](),config['liquidity']=_0x4edac0);logHistory(_0x5a2be3(0x218),'Portfolio\x20change\x20detected:\x20'+Math[_0x5a2be3(0x19e)](_0x17de2c['number'])+'\x20'+_0x17de2c['coin']+'\x20'+(_0x17de2c['number']>0x0?_0x5a2be3(0x14a):_0x5a2be3(0xdb))+_0x5a2be3(0xee)),proxyEmit(_0x5a2be3(0x1a6),emittedConfiguration());const _0x397a29=getNormalizedPerformance();emitPerformance(_0x397a29),getStartingBalances(_0x397a29),logger[_0x5a2be3(0x276)](_0x5a2be3(0x27f));}else config[_0x5a2be3(0x106)]==_0x5a2be3(0x288)&&(config[_0x5a2be3(0x133)]?(await storeHeadless({'headless':![]}),logHistory(_0x5a2be3(0x218),'Portfolio\x20change\x20detected:\x20'+Math[_0x5a2be3(0x19e)](_0x17de2c[_0x5a2be3(0x229)])+'\x20'+_0x17de2c[_0x5a2be3(0x1bf)]+'\x20'+(_0x17de2c[_0x5a2be3(0x229)]>0x0?_0x5a2be3(0x14a):'removed')+_0x5a2be3(0x231))):logger[_0x5a2be3(0x276)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5a2be3(0x19e)](_0x17de2c[_0x5a2be3(0x229)])+'\x20'+_0x17de2c[_0x5a2be3(0x1bf)]+'\x20'+(_0x17de2c[_0x5a2be3(0x229)]>0x0?_0x5a2be3(0x14a):_0x5a2be3(0xdb))+_0x5a2be3(0x202)));}else logger[_0x5a2be3(0x276)](_0x5a2be3(0x210)+Math[_0x5a2be3(0x19e)](_0x17de2c[_0x5a2be3(0x229)])+'\x20'+_0x17de2c['coin']+'\x20'+(_0x17de2c[_0x5a2be3(0x229)]>0x0?_0x5a2be3(0x14a):_0x5a2be3(0xdb)));}else logger[_0x5a2be3(0x276)](_0x5a2be3(0x1a7)+Math[_0x5a2be3(0x19e)](_0x17de2c[_0x5a2be3(0x229)])+'\x20'+_0x17de2c[_0x5a2be3(0x1bf)]+'\x20'+(_0x17de2c[_0x5a2be3(0x229)]>0x0?_0x5a2be3(0x14a):_0x5a2be3(0xdb))+_0x5a2be3(0x176));}currentCoins=_0x99601d,currentCoinsAll=_0x2960c2;}catch(_0x23d71){if(!exchangeStopped)await handleError(_0x23d71,_0x5a2be3(0xf1));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x6336d3=_0x500ec4;logger['debug']('Loading\x20symbols');try{markets=await exchange[_0x6336d3(0x17a)]();}catch(_0x3435bf){logger[_0x6336d3(0x276)](_0x6336d3(0xd2)+_0x3435bf[_0x6336d3(0x157)]());if(markets){}else logHistory('error',_0x6336d3(0x1ad)),logHistory('error',_0x6336d3(0x168)+loadCoinsRetryInterval/0xea60+_0x6336d3(0x160)),logger[_0x6336d3(0x276)](_0x6336d3(0x250),_0x3435bf),loading[_0x6336d3(0x20a)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x6336d3(0x1fd)](markets)[_0x6336d3(0x1a1)](_0x60ecbb=>{const _0x2ce94b=_0x6336d3;_0x60ecbb[0x1][_0x2ce94b(0x18a)]&&_0x60ecbb[0x1][_0x2ce94b(0x281)]&&allSymbols[_0x2ce94b(0x192)](_0x60ecbb[0x0]);});}function validateSymbols(_0x1c23a7){const _0x44ec97=_0x500ec4;let _0x40d823=[];return _0x1c23a7[_0x44ec97(0x1a1)](_0x5eac1c=>{const _0x470654=_0x44ec97;!allSymbols[_0x470654(0x1e8)](_0x5eac1c)?logHistory(_0x470654(0x1a9),'Invalid\x20symbol:\x20'+_0x5eac1c+_0x470654(0x114)):_0x40d823['push'](_0x5eac1c);}),_0x40d823;}async function initclient(){const _0x3ee1ad=_0x500ec4;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x3ee1ad(0x17c),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4f2cc1=getNormalizedPerformance();emitPerformance(_0x4f2cc1),getStartingBalances(_0x4f2cc1);}async function toggleBotMode(){const _0x22a4dc=_0x500ec4;let _0x49c7be=dbConfig[_0x22a4dc(0x1dd)](_0x22a4dc(0x17d))[_0x22a4dc(0x1b7)]({'botID':botID})[_0x22a4dc(0x203)]();if(_0x49c7be){const _0x3ab159=!_0x49c7be['headless'];dbConfig[_0x22a4dc(0x1dd)](_0x22a4dc(0x17d))[_0x22a4dc(0x1b7)]({'botID':botID})[_0x22a4dc(0xeb)]({'headless':_0x3ab159})[_0x22a4dc(0x289)](),config[_0x22a4dc(0x133)]=_0x3ab159,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1fc9ef=_0x500ec4;process[_0x1fc9ef(0x21e)]({'updatebotmanager':!![]},_0x56d9c1=>{}),logger[_0x1fc9ef(0x276)]('Headless:\x20'+config[_0x1fc9ef(0x133)]);}async function loadCoins(_0x1468c2){const _0x14064c=_0x500ec4;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4f7276,_0x40d647=0x0,_0x536a41=0x0;_0x1468c2[_0x14064c(0x1a1)](_0x3a4495=>{const _0x34323f=_0x14064c;loading[_0x34323f(0x1fb)][_0x34323f(0x192)](_0x3a4495);}),loadingCanceled=![];let _0x2411aa=![];while(_0x4f7276!=_0x1468c2['length']+maxLoadingProgress){_0x4f7276=loadingProgress,_0x1468c2[_0x14064c(0x1a1)](_0x912f77=>{const _0x31dd05=_0x14064c;if(gTicker[noslash(_0x912f77)]){loading[_0x31dd05(0x1fb)]=loading['remainingSymbols']['filter'](_0x50fe8a=>_0x50fe8a!=_0x912f77);if(!watchedSymbols[_0x31dd05(0x1e8)](_0x912f77))watchedSymbols[_0x31dd05(0x192)](_0x912f77);_0x4f7276++;}}),loading[_0x14064c(0x187)]=Math[_0x14064c(0x15f)](_0x4f7276/(_0x1468c2[_0x14064c(0x1c3)]+maxLoadingProgress)*0x64);loading[_0x14064c(0x187)]!=0x64&&(_0x536a41>0x1e*0x5&&(loading[_0x14064c(0x120)]=!![],emitLoadingProgress()),_0x536a41>0x78*0x5&&!_0x2411aa&&(_0x2411aa=!![],logHistory(_0x14064c(0x1a9),_0x14064c(0x237)+loading['remainingSymbols'][_0x14064c(0x127)](',\x20')+_0x14064c(0x155)),logHistory(_0x14064c(0x1a9),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x14064c(0x160)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x40d647!=loading[_0x14064c(0x187)]&&(_0x40d647=loading[_0x14064c(0x187)],emitLoadingProgress()),_0x536a41++,await sleep(0xc8);}_0x4f7276==_0x1468c2['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x14064c(0x16d)},_0x2bd61a=>{}),_0x2411aa&&logHistory(_0x14064c(0x218),_0x14064c(0xf7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x174d5e=_0x500ec4;proxyEmit(_0x174d5e(0x1a6),{...emittedConfiguration(),'configstate':_0x174d5e(0x16a)});}function _0x176c(_0x7cc99e,_0x3aa991){const _0x4de872=_0x49fb();return _0x176c=function(_0x3604e1,_0x19cfbd){_0x3604e1=_0x3604e1-0xd1;let _0x49fb96=_0x4de872[_0x3604e1];return _0x49fb96;},_0x176c(_0x7cc99e,_0x3aa991);}function emitLoadingProgress(){const _0x1d6f65=_0x500ec4;proxyEmit(_0x1d6f65(0x11d),loading);}async function getFiat(){const _0x3e81f9=_0x500ec4;let _0x2d777e=gTicker[stablecoins[_0x3e81f9(0x263)][_0x3e81f9(0x1bf)]],_0x27d095=gTicker[stablecoins[_0x3e81f9(0x1fe)][_0x3e81f9(0x1bf)]];return{'eur':Number(_0x2d777e),'usd':Number(_0x27d095)};}function capitalize(_0x2c7677){const _0x7c5df6=_0x500ec4;return _0x2c7677[_0x7c5df6(0x167)](0x0,0x1)[_0x7c5df6(0xed)]()+_0x2c7677[_0x7c5df6(0x167)](0x1);}function supportedExchanges(){const _0x14cff1=_0x500ec4,_0x443db5=['ws',_0x14cff1(0x258),_0x14cff1(0x21b),_0x14cff1(0x123),'watchOrders',_0x14cff1(0x217),_0x14cff1(0x129),_0x14cff1(0x24d),_0x14cff1(0x1e2),_0x14cff1(0x27a)];let _0x5497e0=[],_0x49abaf=[],_0xf52bb5=ccxt['pro'][_0x14cff1(0x17c)];_0xf52bb5['forEach'](_0x5ba24c=>{const _0x1411ce=_0x14cff1;try{const _0x1b7f5e=new ccxt[(_0x1411ce(0x143))][_0x5ba24c]();_0x49abaf[_0x1411ce(0x192)](_0x1b7f5e);}catch(_0x135915){}}),_0x49abaf['forEach'](_0x11ea57=>{const _0xd0f8c4=_0x14cff1;let _0x4d693c=0x0;_0x443db5[_0xd0f8c4(0x1a1)](_0x3d53e4=>{const _0x126de3=_0xd0f8c4;_0x3d53e4 in _0x11ea57[_0x126de3(0x252)]&&_0x11ea57[_0x126de3(0x252)][_0x3d53e4]&&_0x4d693c++;}),_0x4d693c==_0x443db5[_0xd0f8c4(0x1c3)]&&_0x5497e0[_0xd0f8c4(0x192)](capitalize(_0x11ea57['id']));});let _0x554eeb=[];return _0xf52bb5[_0x14cff1(0x1a1)](_0x399cf1=>{const _0x68f984=_0x14cff1;_0x399cf1=capitalize(_0x399cf1);if(!_0x5497e0[_0x68f984(0x1e8)](_0x399cf1))_0x554eeb[_0x68f984(0x192)](_0x399cf1);}),_0x5497e0;}function setStartDatePerformance(){const _0x7cf4f0=_0x500ec4;if(config&&config[_0x7cf4f0(0x200)][0x0][_0x7cf4f0(0x22d)][_0x7cf4f0(0x1c3)]!=0x0){const _0x3ed54a=config[_0x7cf4f0(0x200)][0x0][_0x7cf4f0(0x22d)];dbPerformance[_0x7cf4f0(0x1dd)]('data')[_0x7cf4f0(0x1b7)]({'date':config[_0x7cf4f0(0x1c9)]})['assign']({'coins':_0x3ed54a})[_0x7cf4f0(0x289)]();}}async function recreateCoinResults(){const _0x5cbae1=_0x500ec4;recreationNeeded=![];let _0x3c602a,_0x2c6600=[];try{for(const _0x3a82d0 of currentCoins){if(_0x3a82d0[_0x5cbae1(0x1bf)]!=config[_0x5cbae1(0x245)]){let _0x491eb4=0x0,_0x28afcd,_0x5f427a;_0x3c602a=await getAllEventOrders(_0x3a82d0[_0x5cbae1(0x234)]);if(_0x3c602a[_0x5cbae1(0x1c3)]>0x0)_0x3c602a[_0x5cbae1(0x1a1)](_0x9dd7c2=>{const _0x5c118b=_0x5cbae1,_0x5a8d97=_0x3a82d0[_0x5c118b(0x234)][_0x5c118b(0x1e8)](config[_0x5c118b(0x245)]+'/');_0x2c6600['push']({'datetime':_0x9dd7c2[_0x5c118b(0x18d)],'coin':_0x3a82d0['coin'],'symbol':_0x3a82d0[_0x5c118b(0x234)],'side':_0x9dd7c2[_0x5c118b(0x20f)],'reverse':_0x5a8d97,'amount':formatResult(_0x9dd7c2[_0x5c118b(0x126)],0x8),'filled':formatResult(_0x9dd7c2[_0x5c118b(0x126)],0x8),'price':formatResult(_0x9dd7c2[_0x5c118b(0x15a)],0x8)}),_0x491eb4=_0x9dd7c2['side']==_0x5c118b(0x122)?_0x491eb4+_0x9dd7c2['filled']:_0x491eb4-_0x9dd7c2[_0x5c118b(0x126)];if(!_0x5f427a)_0x5f427a=_0x9dd7c2[_0x5c118b(0x15a)];});_0x28afcd=_0x3a82d0['number']-_0x491eb4;let _0x104a99;config['liquidity']['forEach'](_0x4d7766=>{const _0x2dc62b=_0x5cbae1;!_0x104a99&&(_0x104a99=_0x4d7766['changes'][_0x2dc62b(0x1b7)](_0x4770e7=>_0x4770e7['coin']==_0x3a82d0[_0x2dc62b(0x1bf)]),_0x104a99&&(_0x28afcd=_0x104a99['number'],_0x5f427a=_0x104a99[_0x2dc62b(0x15a)]));});let _0x138dcb=dbCoinResults[_0x5cbae1(0x1dd)](_0x5cbae1(0x14c))['find']({'coin':_0x3a82d0[_0x5cbae1(0x1bf)]})[_0x5cbae1(0x203)]();_0x138dcb={'coin':_0x3a82d0[_0x5cbae1(0x1bf)],'number':_0x28afcd,'breakeven':_0x5f427a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x5cbae1(0x1b7)]({'coin':_0x3a82d0['coin']})[_0x5cbae1(0xeb)](_0x138dcb)[_0x5cbae1(0x289)]();}}_0x2c6600[_0x5cbae1(0x10b)]((_0x5abff5,_0x3b81de)=>_0x5abff5[_0x5cbae1(0x18d)]>_0x3b81de[_0x5cbae1(0x18d)]?0x1:_0x3b81de[_0x5cbae1(0x18d)]>_0x5abff5[_0x5cbae1(0x18d)]?-0x1:0x0);let _0x2bc8a0=0x0;for(let _0x551688 of _0x2c6600){await updateCoinResults(_0x551688,!![]);}}catch(_0x467b15){await handleError(_0x467b15,_0x5cbae1(0x131));}}async function getAllEventOrders(_0x406c84){const _0x1af858=_0x500ec4;let _0x9e0fd7=[],_0x212bb5=dbLogs[_0x1af858(0x1dd)](_0x1af858(0x139))['filter'](_0x103845=>{const _0x1e8c5c=_0x1af858,_0x4aee8f=_0x103845[_0x1e8c5c(0x1d9)][_0x1e8c5c(0x13f)]();return _0x4aee8f[_0x1e8c5c(0x1e8)](_0x406c84['toLowerCase']())&&(_0x4aee8f[_0x1e8c5c(0x1e8)](_0x1e8c5c(0x195))&&_0x4aee8f[_0x1e8c5c(0x1e8)](_0x1e8c5c(0xfd))||_0x4aee8f['includes'](_0x1e8c5c(0x126))&&_0x4aee8f['includes']('order'));})[_0x1af858(0x128)]('time')[_0x1af858(0x203)]();return _0x212bb5[_0x1af858(0x1a1)](_0x3439ab=>{const _0x8aee5b=_0x1af858,_0x8fa501=_0x3439ab[_0x8aee5b(0x1d9)][_0x8aee5b(0x1e8)]('sell')?'sell':'buy',_0x547f65=/#([0-9]|\.)+\s/i,_0x15849e=Number(_0x547f65[_0x8aee5b(0x12e)](_0x3439ab[_0x8aee5b(0x1d9)])[0x0][_0x8aee5b(0xe6)](0x1)),_0x132c5a=/@([0-9]|\.)+$/i,_0x292e87=Number(_0x132c5a['exec'](_0x3439ab[_0x8aee5b(0x1d9)])[0x0]['slice'](0x1));_0x9e0fd7['push']({'datetime':_0x3439ab[_0x8aee5b(0x1b3)],'coin':symbolToCoin(_0x406c84),'symbol':_0x406c84,'side':_0x8fa501,'amount':_0x15849e,'filled':_0x15849e,'price':_0x292e87});}),_0x9e0fd7;}async function getAllOrders(_0x3c9512,_0x132e10){const _0x34cf0d=_0x500ec4;let _0x119b66=[];while(_0x132e10<exchange[_0x34cf0d(0xfe)]()){const _0x3894c7=0x1f4;try{const _0x47ca34=await exchange['fetchClosedOrders'](_0x3c9512,_0x132e10,_0x3894c7);if(_0x47ca34[_0x34cf0d(0x1c3)])_0x132e10=_0x47ca34[_0x47ca34[_0x34cf0d(0x1c3)]-0x1][_0x34cf0d(0x204)]+0x1,_0x119b66=_0x119b66['concat'](_0x47ca34);else break;}catch(_0x475702){await handleError(_0x475702,_0x34cf0d(0x144),_0x3c9512);}}return _0x119b66;}async function validate24hChanges(){const _0x4cf5ea=_0x500ec4;for(const _0x36b061 of currentCoins){if(_0x36b061[_0x4cf5ea(0x1bf)]!=config[_0x4cf5ea(0x245)]){let _0x3c1629;_0x36b061['reverse']?_0x3c1629=formatResult((0x1/(gChange[_0x36b061[_0x4cf5ea(0x234)]]/0x64+0x1)-0x1)*0x64,0x3):_0x3c1629=gChange[_0x36b061[_0x4cf5ea(0x234)]],_0x3c1629<config[_0x4cf5ea(0xdc)]&&(logHistory(_0x4cf5ea(0x1a9),_0x36b061[_0x4cf5ea(0x1bf)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x3c1629+'%'),logHistory(_0x4cf5ea(0x1a9),_0x4cf5ea(0xef)),logHistory(_0x4cf5ea(0x1a9),_0x4cf5ea(0x193)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x19a6f2,_0x56db9f){const _0x5f19e0=_0x500ec4;if(!_0x19a6f2)return!![];const _0x3173ea=_0x56db9f[_0x5f19e0(0x26d)]('.'),_0x3c520c=_0x19a6f2['split']('.');for(var _0x3c5cb8=0x0;_0x3c5cb8<_0x3c520c[_0x5f19e0(0x1c3)];_0x3c5cb8++){const _0x5db472=~~_0x3c520c[_0x3c5cb8],_0x4ae7ee=~~_0x3173ea[_0x3c5cb8];if(_0x5db472<_0x4ae7ee)return!![];if(_0x5db472>_0x4ae7ee)return![];}return![];}async function oneTimeMigration(){const _0xcad386=_0x500ec4;let _0x2d465f=dbLogs[_0xcad386(0x1dd)](_0xcad386(0x116))[_0xcad386(0x203)]();if(isOlderVersion(_0x2d465f,_0xcad386(0x1b5))){let _0x20c3d7=[];const _0x12296d=dbLogs[_0xcad386(0x1dd)](_0xcad386(0x139))[_0xcad386(0x203)]();_0x12296d[_0xcad386(0x1a1)](_0x2aa78e=>{const _0x573862=_0xcad386;_0x20c3d7[_0x573862(0x192)]({'time':_0x2aa78e['time'],'type':_0x2aa78e['type'],'event':_0x2aa78e[_0x573862(0x1d9)]});}),dbLogs[_0xcad386(0x1dd)]('logs')[_0xcad386(0xeb)](_0x20c3d7)[_0xcad386(0x289)]();}let _0x3046e5=dbConfig['get'](_0xcad386(0x116))['value']();if(isOlderVersion(_0x3046e5,_0xcad386(0x1b5))){let _0x808b0e=dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))[_0xcad386(0x1b7)]({'botID':botID})['value']();if(_0x808b0e){let _0x13e154=[];_0x808b0e[_0xcad386(0x27d)]['forEach'](_0x27a955=>{const _0x1bf388=_0xcad386;_0x13e154['push']({'coin':_0x27a955['coin'],'number':_0x27a955[_0x1bf388(0x171)],'price':_0x27a955['startprice']}),delete _0x27a955[_0x1bf388(0x171)],delete _0x27a955[_0x1bf388(0x20d)];});if(_0x13e154[_0xcad386(0x1c3)]!==0x0)fs[_0xcad386(0x228)](configbackuppath+(_0xcad386(0x185)+botID+'.json'),JSON[_0xcad386(0x136)](_0x13e154,null,0x4),function(_0x1e04c6){if(_0x1e04c6){}});const _0x271113=(_0x2bad24,_0x4e2ed2)=>{const _0x4ea97e=_0xcad386;let _0x43d4ad=[];_0x4e2ed2[_0x4ea97e(0x1a1)](_0x3d1c96=>{const _0x20cd06=_0x4ea97e,_0x1e355f=_0x2bad24[_0x20cd06(0x1b7)](_0x493127=>_0x493127[_0x20cd06(0x1bf)]==_0x3d1c96[_0x20cd06(0x1bf)]);if(!_0x1e355f)_0x43d4ad[_0x20cd06(0x192)](_0x3d1c96);});let _0x4434d4=[];return _0x2bad24['forEach'](_0xa8da09=>{const _0x3e9f70=_0x4ea97e,_0x4a5ef3=_0x4e2ed2['find'](_0x470a2f=>_0x470a2f[_0x3e9f70(0x1bf)]==_0xa8da09[_0x3e9f70(0x1bf)]);if(!_0x4a5ef3||_0x4a5ef3[_0x3e9f70(0x229)]==0x0&&_0xa8da09['number']!=0x0)_0x4434d4[_0x3e9f70(0x192)](_0xa8da09);}),{'missingDay1':_0x43d4ad,'notInDay2':_0x4434d4};},_0x218c9f=dbPerformance[_0xcad386(0x1dd)](_0xcad386(0x1bd))['cloneDeep']()[_0xcad386(0x203)]();if(_0x218c9f[_0xcad386(0x1c3)]>0x1){const {missingDay1:_0x2bc81f,notInDay2:_0x2ec084}=_0x271113(_0x13e154,_0x218c9f[0x1][_0xcad386(0x14c)]);_0x13e154=[..._0x13e154,..._0x2bc81f],_0x2ec084['forEach'](_0x36ed8d=>{const _0x9c9251=_0xcad386;let _0x1305e7=_0x13e154['findIndex'](_0x5334f6=>_0x5334f6[_0x9c9251(0x1bf)]==_0x36ed8d[_0x9c9251(0x1bf)]);_0x1305e7!=-0x1&&_0x13e154['splice'](_0x1305e7,0x1);});}_0x13e154[_0xcad386(0x10b)]((_0xeb5c41,_0x3a8cb6)=>_0xeb5c41[_0xcad386(0x1bf)]>_0x3a8cb6[_0xcad386(0x1bf)]?0x1:_0x3a8cb6[_0xcad386(0x1bf)]>_0xeb5c41[_0xcad386(0x1bf)]?-0x1:0x0);let _0x4e3145=[{'date':_0x808b0e[_0xcad386(0x1c9)],'changes':_0x13e154}];_0x218c9f[_0xcad386(0x1c3)]>0x2&&_0x218c9f['forEach']((_0x3ceb1d,_0x5ed47e)=>{const _0x3174ce=_0xcad386;if(_0x5ed47e>0x0&&_0x5ed47e<_0x218c9f[_0x3174ce(0x1c3)]-0x1){const {missingDay1:_0x3ded58,notInDay2:_0x16e7d7}=_0x271113(_0x218c9f[_0x5ed47e][_0x3174ce(0x14c)],_0x218c9f[_0x5ed47e+0x1]['coins']);_0x13e154=[],(_0x3ded58['length']!=0x0||_0x16e7d7[_0x3174ce(0x1c3)]!=0x0)&&(_0x3ded58[_0x3174ce(0x1c3)]!=0x0&&_0x13e154[_0x3174ce(0x192)](..._0x3ded58),_0x16e7d7[_0x3174ce(0x1c3)]!=0x0&&(_0x16e7d7[_0x3174ce(0x1a1)](_0x30adc4=>{const _0x16370d=_0x3174ce;_0x30adc4[_0x16370d(0x229)]=-_0x30adc4[_0x16370d(0x229)];}),_0x13e154['push'](..._0x16e7d7)),_0x13e154[_0x3174ce(0x10b)]((_0x3cf37d,_0x47c63d)=>_0x3cf37d[_0x3174ce(0x1bf)]>_0x47c63d['coin']?0x1:_0x47c63d[_0x3174ce(0x1bf)]>_0x3cf37d[_0x3174ce(0x1bf)]?-0x1:0x0),_0x4e3145['push']({'date':_0x218c9f[_0x5ed47e+0x1][_0x3174ce(0x1c4)],'changes':_0x13e154}));}}),dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))[_0xcad386(0x1b7)]({'botID':botID})['assign']({..._0x808b0e,'liquidity':_0x4e3145})[_0xcad386(0x289)]();}}if(isOlderVersion(_0x3046e5,_0xcad386(0x104))){let _0xbce715=dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))[_0xcad386(0x1b7)]({'botID':botID})[_0xcad386(0x203)]();if(_0xbce715){const _0x306123=_0xbce715[_0xcad386(0x1d4)],_0x15762a=_0x306123?capitalize(_0x306123):_0xcad386(0x23a);dbConfig[_0xcad386(0x1dd)]('bot')[_0xcad386(0x1b7)]({'botID':botID})[_0xcad386(0xeb)]({'exchange':_0x15762a})['write']();}}if(isOlderVersion(_0x3046e5,_0xcad386(0x182))){let _0x127f42=dbConfig[_0xcad386(0x1dd)]('bot')[_0xcad386(0x1b7)]({'botID':botID})['value']();if(_0x127f42){const _0x4be17b=_0x127f42['marketcapEnabled'],_0x5c5cf8=_0x4be17b?'marketcap':![];dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))[_0xcad386(0x1b7)]({'botID':botID})[_0xcad386(0xeb)]({'marketcapEnabled':_0x5c5cf8})['write']();}}if(isOlderVersion(_0x3046e5,_0xcad386(0x188))){let _0x507631=dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))['find']({'botID':botID})[_0xcad386(0x203)]();if(_0x507631){const _0x1d4c37=_0x507631[_0xcad386(0x106)],_0x5730ae=_0x1d4c37?_0xcad386(0x282):![];dbConfig[_0xcad386(0x1dd)](_0xcad386(0x17d))[_0xcad386(0x1b7)]({'botID':botID})[_0xcad386(0xeb)]({'autoliquidity':_0x5730ae})[_0xcad386(0x289)]();}}let _0xd2aafd=dbPerformance[_0xcad386(0x1dd)]('version')['value']();isOlderVersion(_0xd2aafd,'2.3.5')&&setStartDatePerformance();let _0x16b86b=dbCoinResults[_0xcad386(0x1dd)]('version')[_0xcad386(0x203)]();if(isOlderVersion(_0x16b86b,_0xcad386(0x1c1))){let _0x18a6b8=dbCoinResults[_0xcad386(0x1dd)](_0xcad386(0x14c))[_0xcad386(0x203)]();if(_0x18a6b8['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x44a78a=_0x500ec4;dbConfig[_0x44a78a(0x27b)](_0x44a78a(0x116),serverversion)[_0x44a78a(0x289)](),dbPerformance[_0x44a78a(0x27b)]('version',serverversion)[_0x44a78a(0x289)](),dbLogs[_0x44a78a(0x27b)]('version',serverversion)[_0x44a78a(0x289)](),dbCoinResults[_0x44a78a(0x27b)](_0x44a78a(0x116),serverversion)[_0x44a78a(0x289)]();}function getConfiguration(_0x5eec71){const _0x2e714f=_0x500ec4;let _0x11125f=dbConfig[_0x2e714f(0x1dd)](_0x2e714f(0x17d))[_0x2e714f(0x1b7)]({'botID':_0x5eec71})[_0x2e714f(0x203)]();if(_0x11125f){let _0x3d8c6e=![];typeof _0x11125f[_0x2e714f(0x11b)]==_0x2e714f(0x22a)&&(_0x11125f={..._0x11125f,'threshold':Number(_0x11125f['threshold'])},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0xdc)]==undefined&&(_0x11125f={..._0x11125f,'change24h':-0x14},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0x21d)]==undefined&&(_0x11125f={..._0x11125f,'fiat':_0x2e714f(0x18f)},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0x1c5)]==undefined&&(_0x11125f={..._0x11125f,'onepagemode':settings[_0x2e714f(0x1c5)]},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0x15d)]==undefined&&(_0x11125f={..._0x11125f,'colorscheme':_0x2e714f(0x1a5)},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0x106)]==undefined&&(_0x11125f={..._0x11125f,'autoliquidity':_0x2e714f(0x282)},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0xd6)]==undefined&&(_0x11125f={..._0x11125f,'marketcapApi':settings[_0x2e714f(0xd6)]?!![]:![]},_0x3d8c6e=!![]),_0x11125f[_0x2e714f(0x1ee)]==undefined&&(_0x11125f={..._0x11125f,'marketcapEnabled':![]},_0x3d8c6e=!![]),_0x3d8c6e&&(_0x11125f={'botID':_0x11125f[_0x2e714f(0x233)],'exchange':_0x11125f[_0x2e714f(0x1d4)],'apiKey':_0x11125f[_0x2e714f(0x26b)],'apiSecret':_0x11125f[_0x2e714f(0x21a)],'apiPassword':_0x11125f[_0x2e714f(0x14d)],'basecoin':_0x11125f[_0x2e714f(0x245)],'botname':_0x11125f[_0x2e714f(0x1c2)],'showname':_0x11125f[_0x2e714f(0x25c)],'threshold':_0x11125f['threshold'],'ordertype':_0x11125f[_0x2e714f(0x1cc)],'timeout':_0x11125f[_0x2e714f(0x120)],'fiat':_0x11125f['fiat'],'startdate':_0x11125f[_0x2e714f(0x1c9)],'recreate':_0x11125f[_0x2e714f(0x26e)],'timeshift':_0x11125f['timeshift'],'onepagemode':_0x11125f[_0x2e714f(0x1c5)],'headless':_0x11125f[_0x2e714f(0x133)],'cooldown':_0x11125f['cooldown'],'change24h':_0x11125f['change24h'],'emojibuy':_0x11125f[_0x2e714f(0x146)],'emojisell':_0x11125f[_0x2e714f(0x19d)],'colorscheme':_0x11125f[_0x2e714f(0x15d)],'marketcapApi':_0x11125f[_0x2e714f(0xd6)],'marketcapEnabled':_0x11125f['marketcapEnabled'],'portfolio':_0x11125f[_0x2e714f(0x27d)],'autoliquidity':_0x11125f['autoliquidity'],'liquidity':_0x11125f[_0x2e714f(0x200)],'openOrders':_0x11125f[_0x2e714f(0x1d2)]},dbConfig[_0x2e714f(0x1dd)](_0x2e714f(0x17d))[_0x2e714f(0x158)]()[_0x2e714f(0x289)](),dbConfig[_0x2e714f(0x1dd)](_0x2e714f(0x17d))['push'](_0x11125f)[_0x2e714f(0x289)]());}else _0x11125f={'botID':_0x5eec71,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2e714f(0x211)+_0x5eec71,'showname':![],'threshold':0x3,'ordertype':_0x2e714f(0x195),'timeout':0x14,'fiat':_0x2e714f(0x18f),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2e714f(0xf4)],'onepagemode':settings[_0x2e714f(0x1c5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2e714f(0x1a5),'marketcapApi':settings[_0x2e714f(0xd6)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x11125f;}function emittedConfiguration(){const _0x1990a0=_0x500ec4;let _0x16a6a0;if(config[_0x1990a0(0x26b)]=='')_0x16a6a0={...config,'configstate':_0x1990a0(0x1e5)};else config[_0x1990a0(0x26b)]=='***'?_0x16a6a0={...config,'configstate':'recovery'}:(_0x16a6a0={...config,'apiKey':_0x1990a0(0x14b),'apiSecret':_0x1990a0(0x14b)},config['apiPassword']&&(_0x16a6a0[_0x1990a0(0x14d)]='************'));return _0x16a6a0;}function getSettings(){const _0x256d03=_0x500ec4;return dbSettings[_0x256d03(0x1dd)](_0x256d03(0x10f))[_0x256d03(0x203)]();}function getSecure(){const _0x530f7d=_0x500ec4;return dbSecure['get']('secure')[_0x530f7d(0x203)]()||{};}function updateTimeshift(_0x3cc4b1){const _0x4ef5ba=_0x500ec4;let _0x43365c=dbConfig[_0x4ef5ba(0x1dd)](_0x4ef5ba(0x17d))['find']({'botID':botID})[_0x4ef5ba(0x203)]();_0x43365c&&dbConfig['get'](_0x4ef5ba(0x17d))['find']({'botID':botID})['assign']({'timeshift':_0x3cc4b1})[_0x4ef5ba(0x289)](),config['timeshift']=_0x3cc4b1,proxyEmit(_0x4ef5ba(0x1a6),emittedConfiguration());}function updateOnepagemode(_0x4016f1){const _0x4b23c1=_0x500ec4;let _0x1b7290=dbConfig[_0x4b23c1(0x1dd)]('bot')[_0x4b23c1(0x1b7)]({'botID':botID})[_0x4b23c1(0x203)]();_0x1b7290&&dbConfig[_0x4b23c1(0x1dd)](_0x4b23c1(0x17d))[_0x4b23c1(0x1b7)]({'botID':botID})[_0x4b23c1(0xeb)]({'onepagemode':_0x4016f1})[_0x4b23c1(0x289)](),config['onepagemode']=_0x4016f1,proxyEmit(_0x4b23c1(0x1a6),emittedConfiguration());}function updateMarketcapApi(_0x1775c3){const _0xf530b5=_0x500ec4,_0x5e4600=_0x1775c3?!![]:![];let _0x2991b9=dbConfig[_0xf530b5(0x1dd)]('bot')[_0xf530b5(0x1b7)]({'botID':botID})['value']();_0x2991b9&&dbConfig['get'](_0xf530b5(0x17d))[_0xf530b5(0x1b7)]({'botID':botID})['assign']({'marketcapApi':_0x5e4600})[_0xf530b5(0x289)](),config[_0xf530b5(0xd6)]=_0x5e4600,getMarketCap(),proxyEmit(_0xf530b5(0x1a6),emittedConfiguration());}async function storeConfiguration(_0xdc398a){const _0x591e27=_0x500ec4;logger['debug'](_0x591e27(0x26a));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x27421e=![],_0x324f5a=![],_0x1befd9=[];_0xdc398a[_0x591e27(0x27d)][_0x591e27(0x1a1)](_0x2b701b=>{const _0x31735f=_0x591e27;if(!_0x2b701b[_0x31735f(0x150)]&&_0x2b701b[_0x31735f(0x1bf)]!=_0xdc398a[_0x31735f(0x245)])_0x1befd9[_0x31735f(0x192)](_0x2b701b[_0x31735f(0x234)]);}),_0x1befd9[_0x591e27(0x1a1)](_0x6dc37a=>{const _0x4946b2=_0x591e27,_0x55766f=currentCoins[_0x4946b2(0x1b7)](_0x5bee96=>_0x5bee96[_0x4946b2(0x234)]==_0x6dc37a);!_0x55766f&&(_0x27421e=!![]);}),currentCoins[_0x591e27(0x1a1)](_0x41b35e=>{const _0x3f29cf=_0x591e27;if(_0x41b35e[_0x3f29cf(0x1bf)]!=config[_0x3f29cf(0x245)]){const _0x407f6e=_0x1befd9['find'](_0x2eb113=>_0x2eb113==_0x41b35e['symbol']);!_0x407f6e&&(_0x27421e=!![]);}}),_0xdc398a['portfolio'][_0x591e27(0x1a1)](_0x92c39f=>{const _0x32b049=_0x591e27,_0x26b771=config[_0x32b049(0x27d)]['find'](_0x2bcf67=>_0x2bcf67[_0x32b049(0x1bf)]==_0x92c39f[_0x32b049(0x1bf)]);if(_0x26b771&&_0x92c39f[_0x32b049(0x1f8)]!=_0x26b771['offset'])_0x324f5a=!![];});let _0x5ac07e=dbConfig[_0x591e27(0x1dd)](_0x591e27(0x17d))[_0x591e27(0x1b7)]({'botID':botID})[_0x591e27(0x203)]();_0xdc398a={..._0xdc398a,'apiKey':crypt[_0x591e27(0x1f0)](secure[_0x591e27(0x1b2)],_0xdc398a[_0x591e27(0x26b)])['message'],'apiSecret':crypt[_0x591e27(0x1f0)](secure[_0x591e27(0x1b2)],_0xdc398a['apiSecret'])[_0x591e27(0xf9)]};_0xdc398a[_0x591e27(0x14d)]&&(_0xdc398a[_0x591e27(0x14d)]=crypt[_0x591e27(0x1f0)](secure[_0x591e27(0x1b2)],_0xdc398a[_0x591e27(0x14d)])[_0x591e27(0xf9)]);let _0x5a0f39=![];if(_0x5ac07e){_0xdc398a[_0x591e27(0x26b)]==_0x591e27(0x14b)?_0xdc398a[_0x591e27(0x26b)]=config[_0x591e27(0x26b)]:_0x5a0f39=!![];_0xdc398a['apiSecret']==_0x591e27(0x14b)?_0xdc398a['apiSecret']=config[_0x591e27(0x21a)]:_0x5a0f39=!![];if(_0xdc398a[_0x591e27(0x14d)]==_0x591e27(0x14b))_0xdc398a[_0x591e27(0x14d)]=config[_0x591e27(0x14d)];else{if(_0xdc398a[_0x591e27(0x14d)])_0x5a0f39=!![];}dbConfig[_0x591e27(0x1dd)](_0x591e27(0x17d))['find']({'botID':botID})[_0x591e27(0xeb)](_0xdc398a)[_0x591e27(0x289)]();}else dbConfig['get'](_0x591e27(0x17d))[_0x591e27(0x192)](_0xdc398a)[_0x591e27(0x289)](),_0x5a0f39=!![],process[_0x591e27(0x21e)]({'status':_0x591e27(0x23b),'live':_0x591e27(0x16d)},_0xdecc14=>{});process[_0x591e27(0x21e)]({'botname':_0xdc398a[_0x591e27(0x1c2)]},_0x15e003=>{}),config={..._0xdc398a},updateBotManager(),proxyEmit(_0x591e27(0x236)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5a0f39)!_0x5ac07e?await reset(!![]):getBalances();else _0x27421e||_0x324f5a?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x59fbd7){const _0xbf6ea5=_0x500ec4,_0x242564={...config,'headless':_0x59fbd7[_0xbf6ea5(0x133)]};let _0x3c89ef=dbConfig[_0xbf6ea5(0x1dd)]('bot')['find']({'botID':botID})[_0xbf6ea5(0x203)]();_0x3c89ef&&dbConfig[_0xbf6ea5(0x1dd)](_0xbf6ea5(0x17d))[_0xbf6ea5(0x1b7)]({'botID':botID})[_0xbf6ea5(0xeb)](_0x242564)['write'](),config={..._0x242564},updateBotManager(),proxyEmit(_0xbf6ea5(0x1a6),emittedConfiguration());}async function storeFiat(_0x5becbe){const _0x509072=_0x500ec4,_0x813929={...config,'fiat':_0x5becbe};let _0x10c8d1=dbConfig[_0x509072(0x1dd)](_0x509072(0x17d))[_0x509072(0x1b7)]({'botID':botID})[_0x509072(0x203)]();_0x10c8d1&&dbConfig[_0x509072(0x1dd)](_0x509072(0x17d))[_0x509072(0x1b7)]({'botID':botID})[_0x509072(0xeb)](_0x813929)[_0x509072(0x289)](),config={..._0x813929},proxyEmit(_0x509072(0x1a6),emittedConfiguration());}function resetHistory(){const _0xb4e9a1=_0x500ec4;logger[_0xb4e9a1(0x166)](_0xb4e9a1(0x19a));try{if(fs[_0xb4e9a1(0x209)](path[_0xb4e9a1(0x127)](configpath,_0xb4e9a1(0x268)+botID+_0xb4e9a1(0x199))))fs[_0xb4e9a1(0x1d7)](path[_0xb4e9a1(0x127)](configpath,_0xb4e9a1(0x268)+botID+'-events.json'));if(fs[_0xb4e9a1(0x209)](path[_0xb4e9a1(0x127)](configpath,_0xb4e9a1(0x268)+botID+_0xb4e9a1(0x1a3))))fs[_0xb4e9a1(0x1d7)](path[_0xb4e9a1(0x127)](configpath,_0xb4e9a1(0x268)+botID+_0xb4e9a1(0x1a3)));if(fs[_0xb4e9a1(0x209)](path[_0xb4e9a1(0x127)](configpath,_0xb4e9a1(0x268)+botID+_0xb4e9a1(0x232))))fs[_0xb4e9a1(0x1d7)](path['join'](configpath,_0xb4e9a1(0x268)+botID+'-results.json'));}catch(_0x2580c8){if(_0x2580c8)logger[_0xb4e9a1(0x166)](_0xb4e9a1(0x135),_0x2580c8);}const _0x11834e=getDate();let _0x4cf77d=[];currentCoins[_0xb4e9a1(0x1a1)](_0x4d4301=>{const _0x4dfaf9=_0xb4e9a1;_0x4cf77d['push']({'coin':_0x4d4301[_0x4dfaf9(0x1bf)],'number':_0x4d4301[_0x4dfaf9(0x229)],'price':_0x4d4301[_0x4dfaf9(0x183)]});});let _0x533e5e=dbConfig['get'](_0xb4e9a1(0x17d))[_0xb4e9a1(0x1b7)]({'botID':botID})[_0xb4e9a1(0x203)]();_0x533e5e&&(dbConfig[_0xb4e9a1(0x1dd)](_0xb4e9a1(0x17d))[_0xb4e9a1(0x1b7)]({'botID':botID})[_0xb4e9a1(0xeb)]({'liquidity':[{'date':_0x11834e,'changes':_0x4cf77d}]})[_0xb4e9a1(0x289)](),config[_0xb4e9a1(0x200)]=[]),restartBot(!![]);}function noslash(_0xf38595){const _0x3b8aea=_0x500ec4;return _0xf38595[_0x3b8aea(0x1b8)]('/','');}function updateHighestFee(_0x4043bb){const _0x4fc1ad=_0x500ec4;if(_0x4043bb[_0x4fc1ad(0x247)]){let _0x5691dd={'filled':_0x4043bb['filled']*_0x4043bb[_0x4fc1ad(0x15a)],'amount':_0x4043bb[_0x4fc1ad(0x126)]*_0x4043bb['price'],'side':_0x4043bb[_0x4fc1ad(0x20f)]==_0x4fc1ad(0x21c)?'buy':'sell','price':0x1/_0x4043bb[_0x4fc1ad(0x15a)]};_0x4043bb={..._0x4043bb,..._0x5691dd};}const _0x1cc552=defaultFee*_0x4043bb[_0x4fc1ad(0x126)]*_0x4043bb[_0x4fc1ad(0x15a)];lastFees[_0x4fc1ad(0x18b)][_0x4fc1ad(0x1c3)]===0x14&&lastFees[_0x4fc1ad(0x18b)][_0x4fc1ad(0x17f)](),lastFees[_0x4fc1ad(0x18b)][_0x4fc1ad(0x192)](_0x1cc552),lastFees[_0x4fc1ad(0x12d)]=Math[_0x4fc1ad(0x124)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4806e3){const _0x14a700=_0x500ec4;logger[_0x14a700(0x276)]('0\x20-\x20EXECUTION:\x20'+_0x4806e3['symbol']+_0x14a700(0x180)+_0x4806e3[_0x14a700(0xfb)]+_0x14a700(0x180)+_0x4806e3[_0x14a700(0x126)]+_0x14a700(0x1e4)+_0x4806e3[_0x14a700(0x1e3)]+_0x14a700(0x180)+_0x4806e3['id']);let _0x49a75b=_0x4806e3[_0x14a700(0xfb)],_0x49615c=![];currentCoins[_0x14a700(0x1a1)](_0x198e25=>{const _0x23728e=_0x14a700;_0x198e25[_0x23728e(0x234)]==_0x4806e3[_0x23728e(0x234)]&&(_0x49615c=!![]);});if(!_0x49615c)return;const _0x2606ff=currentCoins[_0x14a700(0x1b7)](_0x48c487=>_0x48c487[_0x14a700(0x234)]==_0x4806e3[_0x14a700(0x234)]),_0x465248=_0x4832bb=>{const _0x1b9095=_0x14a700;if(_0x2606ff)_0x2606ff[_0x1b9095(0x253)]=_0x4832bb;};let _0x460eea=![];for(const _0x1e3cb0 of lastOrders){const _0x4be2d2=0x64,_0x5a84df=0x1388;let _0x484ca5=0x0;while(!_0x1e3cb0[_0x14a700(0x13b)]&&_0x484ca5*_0x4be2d2<_0x5a84df){_0x484ca5++,await sleep(_0x4be2d2);}if(_0x484ca5>0x0)logger['debug']('Waited\x20'+_0x484ca5*_0x4be2d2/0x3e8+_0x14a700(0x1da));_0x1e3cb0[_0x14a700(0x13b)]==_0x4806e3['id']&&(_0x460eea=!![]);}if(_0x49a75b=='open'){_0x465248('open');if(_0x4806e3[_0x14a700(0x126)]>0x0){if(_0x460eea){setBlockTransactionDetection(!![]),logger['debug']('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x4806e3['id']);const _0x3ad3a5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3ad3a5,setBlockTransactionDetection(![]);}else logger[_0x14a700(0x276)]('1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20'+_0x4806e3['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x49a75b==_0x14a700(0x184)){_0x465248('canceled');const _0x2829a9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2829a9,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x49a75b=='closed'){if(lastOrders)for(const _0x44827f of lastOrders){if(_0x44827f[_0x14a700(0x13b)]==_0x4806e3['id']){logger['debug'](_0x14a700(0x102)+_0x4806e3['id']),_0x460eea=!![];if(_0x44827f[_0x14a700(0x126)]==0x0){setBlockTransactionDetection(!![]),logger[_0x14a700(0x276)](_0x14a700(0x256)+_0x4806e3['id']);if(_0x4806e3[_0x14a700(0x16e)])_0x44827f[_0x14a700(0x15a)]=_0x4806e3[_0x14a700(0x16e)];else{if(_0x4806e3[_0x14a700(0x15a)])_0x44827f[_0x14a700(0x15a)]=_0x4806e3[_0x14a700(0x15a)];else{}}_0x44827f[_0x14a700(0x126)]=_0x4806e3[_0x14a700(0x126)],updateHighestFee(_0x44827f),_0x465248('filled'),await validateOrders();if(lockOrders==ORDERS[_0x14a700(0x15c)]){const _0x348c99=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x348c99,setBlockTransactionDetection(![]);}_0x44827f[_0x14a700(0x159)]={'currency':_0x4806e3['fee']?_0x4806e3['fee'][_0x14a700(0x101)]:null,'cost':_0x4806e3['fee']?_0x4806e3[_0x14a700(0x159)][_0x14a700(0x244)]:0x0},await updateCoinResults(_0x44827f);}}}!_0x460eea&&(logger['debug'](_0x14a700(0x248)+_0x4806e3['id']),_0x465248('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x42173e=JSON[_0x14a700(0x212)](lastBalances[_0x14a700(0x27d)]);const _0x22dbe0=_0x42173e[_0x14a700(0x1b7)](_0x37b240=>_0x37b240[_0x14a700(0x234)]==_0x4806e3[_0x14a700(0x234)]);if(_0x22dbe0){if(_0x49a75b==_0x14a700(0x21f))_0x22dbe0[_0x14a700(0x253)]=_0x22dbe0[_0x14a700(0x253)]==_0x14a700(0x126)?'filled':_0x14a700(0x21f);else{if(_0x49a75b=='canceled')_0x22dbe0[_0x14a700(0x253)]=_0x22dbe0[_0x14a700(0x253)]==_0x14a700(0x126)?_0x14a700(0x126):_0x14a700(0x184);else _0x49a75b==_0x14a700(0x285)&&(_0x22dbe0[_0x14a700(0x253)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x42173e)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x550966=![];currentCoins['forEach'](_0x43daac=>{const _0x16d4b4=_0x176c;_0x550966=allOpenOrders[_0x16d4b4(0x1b7)](_0x5b0011=>_0x5b0011['symbol']==_0x43daac[_0x16d4b4(0x234)]),_0x43daac[_0x16d4b4(0x253)]=_0x550966?_0x16d4b4(0x21f):_0x16d4b4(0x23f);});}async function getCoins(_0x5941a3=0x0,_0x47720c=!![],_0x44c3b3=config[_0x500ec4(0x245)]){const _0x4b1bcd=_0x500ec4;let _0x198dea,_0xf4fac=[],_0xbf41be=[],_0x2b9af9=[];if(_0x5941a3)await sleep(_0x5941a3);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x198dea=await exchange[_0x4b1bcd(0x27a)](),mybalances=_0x198dea[_0x4b1bcd(0x148)];for(const [_0x14c7dd,_0x48e9a5]of Object['entries'](mybalances)){_0x2b9af9[_0x4b1bcd(0x192)](_0x14c7dd);}config['portfolio']['forEach'](_0x4cb433=>{const _0x3e734c=_0x4b1bcd;!_0x2b9af9[_0x3e734c(0x1e8)](_0x4cb433[_0x3e734c(0x1bf)])&&(mybalances[_0x4cb433['coin']]=0x0);});if(_0x44c3b3=='')for(const [_0x51bea1,_0x1e1bfd]of Object[_0x4b1bcd(0x1fd)](mybalances)){_0x1e1bfd!=0x0&&_0xf4fac[_0x4b1bcd(0x192)]({'coin':_0x51bea1});}else for(const [_0x410d88,_0x3ff0d2]of Object[_0x4b1bcd(0x1fd)](mybalances)){const _0x563fb8=config[_0x4b1bcd(0x27d)][_0x4b1bcd(0x1b7)](_0x154437=>_0x154437[_0x4b1bcd(0x1bf)]==_0x410d88),_0x4c1b93=_0x410d88+'/'+_0x44c3b3,_0x442b81=_0x44c3b3+'/'+_0x410d88,_0x575890=currentCoins[_0x4b1bcd(0x1b7)](_0x5543cf=>_0x5543cf['coin']==_0x410d88);if((_0x3ff0d2!=0x0||_0x563fb8)&&(allSymbols[_0x4b1bcd(0x1e8)](_0x4c1b93)||_0x410d88==_0x44c3b3))_0x575890?_0xf4fac[_0x4b1bcd(0x192)]({..._0x575890,'number':Math[_0x4b1bcd(0x124)](_0x3ff0d2+(_0x563fb8&&_0x563fb8[_0x4b1bcd(0x1f8)]||0x0),0x0)}):_0xf4fac[_0x4b1bcd(0x192)]({'coin':_0x410d88,'symbol':_0x4c1b93,'reverse':![],'number':Math[_0x4b1bcd(0x124)](_0x3ff0d2+(_0x563fb8&&_0x563fb8[_0x4b1bcd(0x1f8)]||0x0),0x0),'orderstatus':_0x4b1bcd(0x23f)});else{if((_0x3ff0d2!=0x0||_0x563fb8)&&allSymbols[_0x4b1bcd(0x1e8)](_0x442b81))_0x575890?_0xf4fac['push']({..._0x575890,'number':Math[_0x4b1bcd(0x124)](_0x3ff0d2+(_0x563fb8&&_0x563fb8['offset']||0x0),0x0)}):_0xf4fac['push']({'coin':_0x410d88,'symbol':_0x442b81,'reverse':!![],'number':Math[_0x4b1bcd(0x124)](_0x3ff0d2+(_0x563fb8&&_0x563fb8[_0x4b1bcd(0x1f8)]||0x0),0x0),'orderstatus':_0x4b1bcd(0x23f)});else _0x563fb8&&_0xf4fac[_0x4b1bcd(0x192)]({'coin':_0x563fb8['coin'],'symbol':_0x563fb8['symbol'],'reverse':_0x563fb8[_0x4b1bcd(0x247)],'number':0x0,'orderstatus':_0x4b1bcd(0x23f)});}}}catch(_0xd15a0b){if(!_0x47720c)handleErrorNoStop(_0xd15a0b,_0x4b1bcd(0x1b6));else await handleError(_0xd15a0b,_0x4b1bcd(0x1b6));}return _0xf4fac[_0x4b1bcd(0x10b)]((_0x387807,_0x373396)=>_0x387807[_0x4b1bcd(0x22e)]<_0x373396[_0x4b1bcd(0x22e)]?0x1:_0x373396[_0x4b1bcd(0x22e)]<_0x387807[_0x4b1bcd(0x22e)]?-0x1:0x0),_0xbf41be=cloneDeep(_0xf4fac),_0xf4fac=_0xf4fac[_0x4b1bcd(0x224)](_0x1f3bdd=>{const _0x303f5d=_0x4b1bcd,_0x439342=config['portfolio']['find'](_0x22f193=>_0x22f193[_0x303f5d(0x1bf)]==_0x1f3bdd[_0x303f5d(0x1bf)]);return _0x439342&&!_0x439342[_0x303f5d(0x150)];}),[_0xf4fac,_0xbf41be];}async function getCoinNumber(_0x2c7fa9){const _0x6ddb39=_0x500ec4;let _0x22ad90;try{const _0x19cce1=await exchange['fetchBalance']();_0x22ad90=_0x19cce1['total'][_0x2c7fa9];}catch(_0x143f45){await handleError(_0x143f45,_0x6ddb39(0x1e1));}return _0x22ad90;}async function getOpenOrders(){const _0x20e146=_0x500ec4;let _0x3cb8c7;allOpenOrders=[];try{for(const _0x4261a2 of config['portfolio']){!_0x4261a2['excluded']&&_0x4261a2[_0x20e146(0x1bf)]!=config[_0x20e146(0x245)]&&(_0x3cb8c7=await exchange[_0x20e146(0x24d)](_0x4261a2[_0x20e146(0x234)]),_0x3cb8c7['length']>0x0&&allOpenOrders[_0x20e146(0x192)](_0x3cb8c7[0x0]));}}catch(_0x4da184){await handleError(_0x4da184,_0x20e146(0x189));}}async function handleOpenOrders(_0x231027=0x0){const _0x56bfd5=_0x500ec4;allOpenOrders[_0x56bfd5(0x1c3)]==0x0&&lockOrders==ORDERS[_0x56bfd5(0x15c)]&&allOrdersPlaced&&(_0x231027==0x0?(logger[_0x56bfd5(0x276)]('1\x20-\x20Handle\x20open\x20orders'),_0x231027++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x56bfd5(0x276)](_0x56bfd5(0x222)),validateOrders(_0x56bfd5(0xdd))));}async function testAPI(_0x132900){const _0x5b5bab=_0x500ec4,_0x286b1a=ccxt['pro'][_0x132900[_0x5b5bab(0x1d4)][_0x5b5bab(0x13f)]()],_0x219546=new _0x286b1a({'apiKey':_0x132900[_0x5b5bab(0x26b)],'secret':_0x132900[_0x5b5bab(0x21a)],'options':{'defaultType':'spot'}});if(_0x132900[_0x5b5bab(0x14d)])_0x219546[_0x5b5bab(0x149)]=_0x132900[_0x5b5bab(0x14d)];try{await _0x219546[_0x5b5bab(0x27a)]();}catch(_0x5d17e3){logger[_0x5b5bab(0x276)](_0x5b5bab(0x1f7)+_0x5d17e3['toString']());throw _0x5d17e3;}}function cloneDeep(_0x154c40){return JSON['parse'](JSON['stringify'](_0x154c40));}async function getPortfolio(_0x5c34dc){const _0x3ff49a=_0x500ec4;let _0xe3973d=[],_0x44e22e=[],_0x958be5=[],_0x1ca00d;_0x5c34dc[_0x3ff49a(0x26b)]=crypt[_0x3ff49a(0x1f0)](secure[_0x3ff49a(0x1b2)],_0x5c34dc[_0x3ff49a(0x26b)])['message'],_0x5c34dc[_0x3ff49a(0x21a)]=crypt[_0x3ff49a(0x1f0)](secure[_0x3ff49a(0x1b2)],_0x5c34dc[_0x3ff49a(0x21a)])[_0x3ff49a(0xf9)],_0x5c34dc[_0x3ff49a(0x14d)]=crypt[_0x3ff49a(0x1f0)](secure[_0x3ff49a(0x1b2)],_0x5c34dc[_0x3ff49a(0x14d)])[_0x3ff49a(0xf9)];if(_0x5c34dc[_0x3ff49a(0x26b)]!==_0x3ff49a(0x14b)||_0x5c34dc[_0x3ff49a(0x21a)]!==_0x3ff49a(0x14b)||_0x5c34dc[_0x3ff49a(0x14d)]&&_0x5c34dc[_0x3ff49a(0x14d)]!=='************'){if(config[_0x3ff49a(0x1d4)]){if(_0x5c34dc[_0x3ff49a(0x26b)]==_0x3ff49a(0x14b))_0x5c34dc[_0x3ff49a(0x26b)]=config[_0x3ff49a(0x26b)];if(_0x5c34dc['apiSecret']==_0x3ff49a(0x14b))_0x5c34dc[_0x3ff49a(0x21a)]=config[_0x3ff49a(0x21a)];if(_0x5c34dc[_0x3ff49a(0x14d)]==_0x3ff49a(0x14b))_0x5c34dc[_0x3ff49a(0x14d)]=config[_0x3ff49a(0x14d)];}try{await testAPI(_0x5c34dc);}catch(_0x4594b6){if(_0x4594b6['toString']()[_0x3ff49a(0x1e8)]('AuthenticationError')){logHistory('error',_0x3ff49a(0x10e)),proxyEmit('portfolio1',![]);return;}else{logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0x3ff49a(0x276)](_0x3ff49a(0x121),_0x4594b6),proxyEmit(_0x3ff49a(0x1ab),![]);return;}}exchange?updateExchange(_0x5c34dc[_0x3ff49a(0x26b)],_0x5c34dc[_0x3ff49a(0x21a)],_0x5c34dc[_0x3ff49a(0x14d)]):await initExchange(_0x5c34dc[_0x3ff49a(0x1d4)],_0x5c34dc[_0x3ff49a(0x26b)],_0x5c34dc[_0x3ff49a(0x21a)],_0x5c34dc['apiPassword']);await loadSymbols();const _0x3b1599=await getCoins(0x0,![],_0x5c34dc['basecoin']);_0x958be5=cloneDeep(_0x3b1599[0x1]);}else{const _0x5be663=await getCoins();_0x958be5=cloneDeep(_0x5be663[0x1]);}if(_0x5c34dc[_0x3ff49a(0x245)]=='')proxyEmit(_0x3ff49a(0x1ab),!![]),proxyEmit(_0x3ff49a(0x274),_0x958be5);else{_0x958be5['forEach'](_0x1b77d7=>{const _0x4edf75=_0x3ff49a;if(_0x1b77d7['coin']!=_0x5c34dc[_0x4edf75(0x245)]&&allSymbols[_0x4edf75(0x1e8)](_0x1b77d7[_0x4edf75(0x234)]))_0xe3973d[_0x4edf75(0x192)](_0x1b77d7[_0x4edf75(0x234)]);});if(_0xe3973d[_0x3ff49a(0x1c3)]==0x0)logHistory(_0x3ff49a(0x1a9),_0x3ff49a(0x284));else{try{_0x44e22e=await getTickers(_0xe3973d);}catch(_0x368bfc){logHistory(_0x3ff49a(0x1a9),_0x3ff49a(0xf6)),logger[_0x3ff49a(0x276)](_0x3ff49a(0x25b),_0x368bfc),proxyEmit(_0x3ff49a(0x1ab),![]);return;}_0x958be5[_0x3ff49a(0x1a1)](_0x1ac8bb=>{const _0x488869=_0x3ff49a;_0x1ac8bb[_0x488869(0x1bf)]!=_0x5c34dc[_0x488869(0x245)]?_0x44e22e[_0x1ac8bb['symbol']]?_0x1ca00d=_0x1ac8bb['reverse']?0x1/_0x44e22e[_0x1ac8bb[_0x488869(0x234)]][_0x488869(0x183)]:_0x44e22e[_0x1ac8bb[_0x488869(0x234)]][_0x488869(0x183)]:_0x1ca00d=0x0:_0x1ca00d=0x1,_0x1ac8bb[_0x488869(0x15a)]=formatResult(_0x1ca00d,0x8);}),await getMarketCap(_0x958be5),proxyEmit('portfolio1',!![]),proxyEmit(_0x3ff49a(0x274),_0x958be5);}}}function truncateTradeAmount(_0x2fe770,_0x481560){let _0x2de5d5=0x0;try{_0x2de5d5=exchange['amountToPrecision'](_0x2fe770,_0x481560);}catch(_0x2f03a8){}return _0x2de5d5;}function checkMinimums(_0x2c0aa1){const _0x27549c=_0x500ec4;let _0x2088ca=!![];const _0x3bcae9=!_0x2c0aa1[_0x27549c(0x247)]?markets[_0x2c0aa1['symbol']][_0x27549c(0x27c)]['amount'][_0x27549c(0x219)]:markets[_0x2c0aa1[_0x27549c(0x234)]][_0x27549c(0x27c)][_0x27549c(0x244)]['min'],_0x44496a=!_0x2c0aa1[_0x27549c(0x247)]?markets[_0x2c0aa1[_0x27549c(0x234)]][_0x27549c(0x27c)][_0x27549c(0x244)][_0x27549c(0x219)]:markets[_0x2c0aa1[_0x27549c(0x234)]][_0x27549c(0x27c)]['amount']['min'],_0x39fe4c=truncateTradeAmount(_0x2c0aa1[_0x27549c(0x234)],_0x2c0aa1['trade']);_0x2c0aa1[_0x27549c(0x20b)]=_0x39fe4c;if(Math[_0x27549c(0x19e)](_0x39fe4c)<_0x3bcae9)_0x2088ca=![];if(Math['abs'](_0x39fe4c)*_0x2c0aa1[_0x27549c(0x183)]<_0x44496a)_0x2088ca=![];if(_0x2c0aa1['side']==_0x27549c(0x21c)){let _0x420d0e=config[_0x27549c(0x27d)][_0x27549c(0x1b7)](_0x4c1ccc=>_0x4c1ccc[_0x27549c(0x1bf)]==_0x2c0aa1[_0x27549c(0x1bf)]);if(_0x420d0e[_0x27549c(0x1f8)]>0x0){if(Math['abs'](_0x39fe4c)>_0x2c0aa1[_0x27549c(0x229)]-_0x420d0e[_0x27549c(0x1f8)])_0x2088ca=![];}else{if(Math[_0x27549c(0x19e)](_0x39fe4c)>_0x2c0aa1[_0x27549c(0x229)])_0x2088ca=![];}}if(_0x2c0aa1[_0x27549c(0x20f)]==_0x27549c(0x122)){let _0x216c83=config[_0x27549c(0x27d)][_0x27549c(0x1b7)](_0x597490=>_0x597490['coin']==config[_0x27549c(0x245)]),_0x3a13b1=currentCoins[_0x27549c(0x1b7)](_0x105618=>_0x105618[_0x27549c(0x1bf)]==config[_0x27549c(0x245)]);if(_0x216c83[_0x27549c(0x1f8)]>0x0){if(Math[_0x27549c(0x19e)](_0x39fe4c)*_0x2c0aa1['last']>_0x3a13b1[_0x27549c(0x229)]-_0x216c83[_0x27549c(0x1f8)])_0x2088ca=![];}else{if(Math[_0x27549c(0x19e)](_0x39fe4c)*_0x2c0aa1[_0x27549c(0x183)]>_0x3a13b1[_0x27549c(0x229)])_0x2088ca=![];}}return _0x2088ca;}async function getBalances(_0x2d3f53=!![]){const _0x519ac0=_0x500ec4;let _0x4df461=0x0,_0x3e2686;const _0xd98bbe=config[_0x519ac0(0x11b)];if(config[_0x519ac0(0x133)]&&config[_0x519ac0(0xdc)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x55b729=>{const _0x26f92b=_0x519ac0;if(_0x55b729[_0x26f92b(0x1bf)]!=config['basecoin']){let _0x2aaa69=gTicker[noslash(_0x55b729['symbol'])];_0x3e2686=_0x55b729['reverse']?0x1/_0x2aaa69:_0x2aaa69;}else _0x3e2686=0x1;let _0x3bd011=_0x55b729[_0x26f92b(0x229)]*_0x3e2686;_0x4df461+=_0x3bd011,_0x55b729['last']=formatResult(Number(_0x3e2686),0x8),_0x55b729[_0x26f92b(0x203)]=_0x3bd011;}),currentCoins[_0x519ac0(0x1a1)](_0x564290=>{const _0x3acaed=_0x519ac0;let _0x12f9a9=config['portfolio']['find'](_0x33e6fc=>_0x33e6fc[_0x3acaed(0x1bf)]==_0x564290[_0x3acaed(0x1bf)]),_0x27d1ef=Number(_0x12f9a9[_0x3acaed(0x1e0)]),_0x38060d=_0x564290[_0x3acaed(0x203)]/_0x4df461*0x64,_0x58cf7c=_0x27d1ef*_0x4df461/0x64/_0x564290[_0x3acaed(0x183)]-_0x564290['number'];_0x564290[_0x3acaed(0x1e0)]=formatResult(_0x38060d,0x3),_0x564290[_0x3acaed(0x257)]=formatResult(_0x27d1ef,0x3),_0x564290['trade']=formatResult(_0x58cf7c,0x8),_0x564290[_0x3acaed(0x20f)]='',_0x564290[_0x3acaed(0x115)]=![];if(_0x564290[_0x3acaed(0x1bf)]!=config[_0x3acaed(0x245)]){if(_0x564290[_0x3acaed(0x1e0)]>_0x27d1ef)_0x564290[_0x3acaed(0x20f)]=_0x3acaed(0x21c),_0x564290[_0x3acaed(0x115)]=checkMinimums(_0x564290);else _0x564290['distribution']<_0x27d1ef&&(_0x564290[_0x3acaed(0x20f)]=_0x3acaed(0x122),_0x564290['valid']=checkMinimums(_0x564290));}_0x564290[_0x3acaed(0x22e)]=_0x564290['distribution']/_0x564290[_0x3acaed(0x257)]-0x1;if(_0x564290[_0x3acaed(0x253)]==_0x3acaed(0x126)||_0x564290[_0x3acaed(0x253)]==_0x3acaed(0x184))_0x564290[_0x3acaed(0x253)]=_0x3acaed(0x23f);}),currentCoins[_0x519ac0(0x10b)]((_0x22b27e,_0x285d19)=>_0x22b27e[_0x519ac0(0x22e)]<_0x285d19[_0x519ac0(0x22e)]?0x1:_0x285d19['delta']<_0x22b27e['delta']?-0x1:0x0);const _0x21007f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x21007f[_0x519ac0(0x263)],'usd':_0x21007f[_0x519ac0(0x1fe)],'portfolio':JSON[_0x519ac0(0x136)](currentCoins),'threshold':_0xd98bbe},proxyEmit(_0x519ac0(0xf0),{'serverversion':serverversion,'balances':lastBalances});if(_0x2d3f53){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xd98bbe});else{if(lockOrders==ORDERS[_0x519ac0(0x230)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xd98bbe});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x35c9c7=getNormalizedPerformance();getStartingBalances(_0x35c9c7),emitPerformance(_0x35c9c7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x243a71=_0x500ec4;if(!lastBalances)return;let _0x2e407d=[],_0x377484,_0x3b75d9=JSON[_0x243a71(0x212)](lastBalances[_0x243a71(0x27d)]);_0x3b75d9['sort']((_0xc2a458,_0x30f9df)=>_0xc2a458[_0x243a71(0x1bf)]>_0x30f9df[_0x243a71(0x1bf)]?0x1:_0x30f9df['coin']>_0xc2a458['coin']?-0x1:0x0),_0x3b75d9[_0x243a71(0x1a1)](_0x3e5364=>{const _0x1de256=_0x243a71;let _0x49577c={'coin':_0x3e5364['coin'],'number':_0x3e5364['number'],'price':_0x3e5364[_0x1de256(0x183)]};_0x2e407d[_0x1de256(0x192)](_0x49577c);});const _0x39593d=await getFiat();_0x377484={'date':lastBalances[_0x243a71(0x1b3)][_0x243a71(0x26d)]('\x20')[0x0],'eur':_0x39593d[_0x243a71(0x263)],'usd':_0x39593d[_0x243a71(0x1fe)],'coins':_0x2e407d};let _0x53112d=dbPerformance[_0x243a71(0x1dd)]('data')[_0x243a71(0x1b7)]({'date':_0x377484[_0x243a71(0x1c4)]})['value']();_0x53112d?_0x377484[_0x243a71(0x1c4)]!=config['startdate']&&dbPerformance['get'](_0x243a71(0x1bd))[_0x243a71(0x1b7)]({'date':_0x377484[_0x243a71(0x1c4)]})[_0x243a71(0xeb)](_0x377484)[_0x243a71(0x289)]():dbPerformance['get'](_0x243a71(0x1bd))['push'](_0x377484)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x570952=_0x500ec4;let _0x5383a5=[];if(dbPerformance[_0x570952(0x252)](_0x570952(0x1bd))[_0x570952(0x203)]()){let _0x3c3862=dbPerformance[_0x570952(0x1dd)](_0x570952(0x1bd))[_0x570952(0x164)]()[_0x570952(0x224)](_0x13cf4a=>{const _0x36b9b3=_0x570952;if(_0x13cf4a['coins'][_0x36b9b3(0x1c3)]==0x0)return![];else return!![];})[_0x570952(0x128)](_0x570952(0x1c4))[_0x570952(0x203)](),_0x4ed1de=[...config[_0x570952(0x200)]];_0x4ed1de['sort']((_0xe708c3,_0x21e0ac)=>_0xe708c3[_0x570952(0x1c4)]>_0x21e0ac[_0x570952(0x1c4)]?-0x1:_0x21e0ac['date']>_0xe708c3['date']?0x1:0x0);let _0x47d6a0=0x1,_0x289988=[],_0x56622c=0x0;_0x3c3862['slice']()[_0x570952(0x247)]()['forEach']((_0x3ca5d2,_0xd859f5)=>{const _0x1bdffa=_0x570952;if(_0x4ed1de[_0x56622c]){if(_0x3c3862[_0x3c3862[_0x1bdffa(0x1c3)]-_0xd859f5]&&_0x4ed1de[_0x56622c][_0x1bdffa(0x1c4)]==_0x3c3862[_0x3c3862[_0x1bdffa(0x1c3)]-_0xd859f5]['date']){if(_0xd859f5<_0x3c3862[_0x1bdffa(0x1c3)]){let _0x28d37a=0x0,_0x5e37f3=0x0;_0x3c3862[_0x3c3862['length']-_0xd859f5]['coins']['forEach'](_0x37b6ad=>{const _0x4d7abe=_0x1bdffa;_0x5e37f3+=_0x37b6ad[_0x4d7abe(0x229)]*_0x37b6ad[_0x4d7abe(0x15a)];}),_0x4ed1de[_0x56622c][_0x1bdffa(0x22d)][_0x1bdffa(0x1a1)](_0x157d48=>{const _0xa3184=_0x1bdffa;_0x28d37a+=_0x157d48[_0xa3184(0x229)]*_0x157d48[_0xa3184(0x15a)];}),_0x47d6a0*=_0x28d37a/(_0x5e37f3-_0x28d37a)+0x1;}_0x56622c++;}}let _0x1fb978=0x0;_0x3ca5d2[_0x1bdffa(0x14c)][_0x1bdffa(0x1a1)](_0x1e9d56=>{const _0x5e60e6=_0x1bdffa;_0x1fb978+=_0x1e9d56[_0x5e60e6(0x229)]*_0x1e9d56[_0x5e60e6(0x15a)];}),_0x289988[_0x3c3862['length']-_0xd859f5-0x1]=_0x1fb978*(_0x47d6a0-0x1);});let _0x5cb871=[];_0x4ed1de=[...config[_0x570952(0x200)]]||[];let _0x32c736=0x0;_0x56622c=0x0,_0x3c3862[_0x570952(0x1a1)]((_0x3e2f93,_0x53f41b)=>{const _0x196461=_0x570952;if(_0x4ed1de[_0x56622c]){const _0x4d8a5c=fns['parse'](_0x4ed1de[_0x56622c][_0x196461(0x1c4)],_0x196461(0x23d),new Date()),_0x1379ca=fns[_0x196461(0x212)](_0x3e2f93['date'],_0x196461(0x23d),new Date());if(fns[_0x196461(0x130)](_0x4d8a5c,_0x1379ca)){let _0x5c23c4=0x0;_0x4ed1de[_0x56622c][_0x196461(0x22d)][_0x196461(0x1a1)](_0xc41d71=>{const _0xd13128=_0x196461;!_0x5cb871[_0xc41d71[_0xd13128(0x1bf)]]?_0x5cb871[_0xc41d71['coin']]=_0xc41d71['number']:(_0x5c23c4=_0x5cb871[_0xc41d71[_0xd13128(0x1bf)]],_0x5cb871[_0xc41d71[_0xd13128(0x1bf)]]+=_0xc41d71['number']);const _0x42bc64=_0x3e2f93['coins']['find'](_0x59d62f=>_0x59d62f[_0xd13128(0x1bf)]==_0xc41d71[_0xd13128(0x1bf)]);(!_0x42bc64||_0x42bc64[_0xd13128(0x229)]==0x0)&&(_0x32c736+=(-_0xc41d71['number']-_0x5c23c4)*_0xc41d71['price']);}),_0x56622c++;}}_0x3e2f93['coins'][_0x196461(0x1a1)]((_0x217f92,_0x46b258)=>{const _0x103f69=_0x196461;_0x5cb871[_0x217f92[_0x103f69(0x1bf)]]&&(_0x217f92[_0x103f69(0x1e5)]=_0x5cb871[_0x217f92[_0x103f69(0x1bf)]]);}),_0x5383a5[_0x196461(0x192)]({'date':_0x3e2f93['date'],'eur':_0x3e2f93[_0x196461(0x263)],'usd':_0x3e2f93[_0x196461(0x1fe)],'offset':_0x289988[_0x53f41b],'netoffset':_0x32c736,'coins':_0x3e2f93[_0x196461(0x14c)]});});}return _0x5383a5;}function emitPerformance(_0x5881fd){const _0x696b98=_0x500ec4;_0x5881fd['length']!==0x0?(proxyEmit(_0x696b98(0x227),_0x5881fd),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x10dcf,_0x51451b){const _0xf771e5=_0x500ec4;let _0x571b4c=0x0,_0x43d851=0x0,_0x7e0241=0x0;_0x10dcf[_0xf771e5(0x14c)][_0xf771e5(0x1a1)](_0x4967f3=>{const _0x5aafd1=_0xf771e5;_0x571b4c+=_0x4967f3[_0x5aafd1(0x229)]*_0x4967f3[_0x5aafd1(0x15a)];});_0x51451b&&(_0x571b4c+=_0x10dcf[_0xf771e5(0x1f8)]);if(config[_0xf771e5(0x245)]===_0xf771e5(0x125)||config['basecoin']==='ETH'||config['basecoin']===_0xf771e5(0x14e))_0x43d851=_0x571b4c*_0x10dcf[_0xf771e5(0x263)],_0x7e0241=_0x571b4c*_0x10dcf[_0xf771e5(0x1fe)];else{if(usdBasecoins[_0xf771e5(0x1e8)](config['basecoin']))_0x43d851=_0x571b4c*_0x10dcf[_0xf771e5(0x263)]/_0x10dcf[_0xf771e5(0x1fe)],_0x7e0241=_0x571b4c;else config[_0xf771e5(0x245)]===_0xf771e5(0x19f)&&(_0x43d851=_0x571b4c,_0x7e0241=_0x571b4c*_0x10dcf[_0xf771e5(0x1fe)]/_0x10dcf[_0xf771e5(0x263)]);}return[_0x571b4c,_0x43d851,_0x7e0241];}function getKPIs(_0x1afa2a,_0x2148e5='EUR'){const _0x1d39f5=_0x500ec4,_0x543faa=config[_0x1d39f5(0x245)],_0x3c2170=lastBalances,_0x3952dc=currentCoins,_0xbafae8=getNormalizedPerformance(),_0x1f3633=_0x1afa2a==='basecoin'?_0x543faa:_0x1afa2a==='fiat'||_0x1afa2a===_0x1d39f5(0x265)?_0x2148e5:_0x1d39f5(0x261)+_0x543faa,_0x1c8cd5=_0x1afa2a==='net-basecoin'?_0x1d39f5(0x226):_0x1afa2a==='net-fiat'?'Net\x20effect':_0x1f3633+_0x1d39f5(0xec),_0x25f9bd=_0x1afa2a==='net-basecoin'||_0x1afa2a==='net-fiat'?_0x1d39f5(0x226):_0x1f3633+_0x1d39f5(0x109);let _0x1f42c5=0x0;_0x3952dc['forEach'](_0x5ac9f0=>{const _0x12bc02=_0x1d39f5;_0x1f42c5+=_0x5ac9f0[_0x12bc02(0x229)]*_0x5ac9f0['last'];});if(_0x1afa2a==='fiat'||_0x1afa2a===_0x1d39f5(0x265)){if(_0x543faa===_0x1d39f5(0x125)||_0x543faa==='ETH'||_0x543faa==='PAXG')_0x1f42c5=_0x1f42c5*(_0x2148e5===_0x1d39f5(0x19f)?_0x3c2170[_0x1d39f5(0x263)]:_0x3c2170[_0x1d39f5(0x1fe)]);else{if(usdBasecoins['includes'](_0x543faa))_0x1f42c5=_0x1f42c5*(_0x2148e5===_0x1d39f5(0x19f)?_0x3c2170[_0x1d39f5(0x263)]/_0x3c2170['usd']:0x1);else _0x543faa==='EUR'&&(_0x1f42c5=_0x1f42c5*(_0x2148e5===_0x1d39f5(0x19f)?0x1:_0x3c2170[_0x1d39f5(0x1fe)]/_0x3c2170['eur']));}}let _0x3e7b4a;if(_0x1f42c5!==0x0){if(_0x1afa2a==='basecoin')_0x3e7b4a=(_0x1f42c5/startingBalances[_0x1d39f5(0x245)]-0x1)*0x64;else{if(_0x2148e5===_0x1d39f5(0x19f))_0x3e7b4a=(_0x1f42c5/startingBalances[_0x1d39f5(0x263)]-0x1)*0x64;else _0x3e7b4a=(_0x1f42c5/startingBalances[_0x1d39f5(0x1fe)]-0x1)*0x64;}let _0x4c3494=0x0;if(startingBalances[_0x1d39f5(0x14c)])_0x3952dc['forEach'](_0x3e77f4=>{const _0x41b054=_0x1d39f5;let _0x41b013=startingBalances[_0x41b054(0x14c)][_0x41b054(0x1b7)](_0x1874f9=>_0x1874f9[_0x41b054(0x1bf)]===_0x3e77f4[_0x41b054(0x1bf)]);if(_0x41b013&&_0x41b013[_0x41b054(0x1bf)]&&_0x3e77f4[_0x41b054(0x229)]!==0x0)_0x4c3494+=_0x41b013[_0x41b054(0x229)]*_0x3e77f4[_0x41b054(0x183)];});let _0x435eaf=0x0;if(_0xbafae8[_0x1d39f5(0x1c3)]!==0x0){let _0x270f03=_0xbafae8[_0xbafae8[_0x1d39f5(0x1c3)]-0x1];_0x435eaf=_0x270f03['netoffset'];}_0x4c3494-=_0x435eaf;_0x1afa2a===_0x1d39f5(0x201)&&(_0x3e7b4a=(_0x1f42c5-_0x4c3494)/startingBalances[_0x1d39f5(0x245)]*0x64,_0x1f42c5=_0x1f42c5-_0x4c3494);if(_0x1afa2a==='net-fiat'){let _0x306f75=_0x2148e5==='EUR'?startingBalances[_0x1d39f5(0x263)]:startingBalances['usd'];if(_0x543faa===_0x1d39f5(0x125)||_0x543faa==='ETH'||_0x543faa===_0x1d39f5(0x14e))_0x4c3494=_0x2148e5==='EUR'?_0x4c3494*_0x3c2170['eur']:_0x4c3494*_0x3c2170['usd'];else{if(usdBasecoins['includes'](_0x543faa))_0x4c3494=_0x2148e5===_0x1d39f5(0x19f)?_0x4c3494*_0x3c2170[_0x1d39f5(0x263)]/_0x3c2170[_0x1d39f5(0x1fe)]:_0x4c3494;else _0x543faa==='EUR'&&(_0x4c3494=_0x2148e5===_0x1d39f5(0x19f)?_0x4c3494:_0x4c3494*_0x3c2170[_0x1d39f5(0x1fe)]/_0x3c2170[_0x1d39f5(0x263)]);}_0x3e7b4a=(_0x1f42c5-_0x4c3494)/_0x306f75*0x64,_0x1f42c5=_0x1f42c5-_0x4c3494;}if(_0x3e7b4a){if(_0x3e7b4a<0x64)_0x3e7b4a=_0x3e7b4a['toFixed'](0x2);else{if(_0x3e7b4a<0x3e8)_0x3e7b4a=_0x3e7b4a['toFixed'](0x1);else _0x3e7b4a=_0x3e7b4a[_0x1d39f5(0x12f)](0x0);}}else _0x3e7b4a=Number('0')[_0x1d39f5(0x12f)](0x2);if(_0x1f42c5){if(Math[_0x1d39f5(0x19e)](_0x1f42c5)<0.000001)_0x1f42c5=_0x1f42c5[_0x1d39f5(0x12f)](0x2);else{if(Math[_0x1d39f5(0x19e)](_0x1f42c5)<0.1)_0x1f42c5=_0x1f42c5[_0x1d39f5(0x12f)](0x6);else{if(Math[_0x1d39f5(0x19e)](_0x1f42c5)<0x1)_0x1f42c5=_0x1f42c5[_0x1d39f5(0x12f)](0x5);else{if(Math[_0x1d39f5(0x19e)](_0x1f42c5)<0xa)_0x1f42c5=_0x1f42c5['toFixed'](0x4);else{if(Math[_0x1d39f5(0x19e)](_0x1f42c5)<0x64)_0x1f42c5=_0x1f42c5['toFixed'](0x3);else{if(Math['abs'](_0x1f42c5)<0x3e8)_0x1f42c5=_0x1f42c5['toFixed'](0x2);else _0x1f42c5=_0x1f42c5[_0x1d39f5(0x12f)](0x2);}}}}}}else _0x1f42c5=Number('0')['toFixed'](0x2);}else _0x3e7b4a=Number('0')['toFixed'](0x2);return{'value':_0x1f42c5,'change':_0x3e7b4a,'leftTxt':_0x1c8cd5,'rightTxt':_0x25f9bd};}async function getStartingBalances(_0x29a4fc,_0x598e70=!![]){const _0x54ba81=_0x500ec4;if(_0x29a4fc['length']!==0x0){const [_0x6d2076,_0x21aa1a,_0x4affaa]=getPerf(_0x29a4fc[0x0],!![]);let _0xede989=[];config[_0x54ba81(0x27d)][_0x54ba81(0x1a1)](_0x21bbb5=>{const _0x3accf8=_0x54ba81;let _0x3219bc=0x0,_0x31b633;config['liquidity'][_0x3accf8(0x1a1)](_0x49653e=>{const _0x115e22=_0x3accf8;let _0x1e822d=_0x49653e['changes'][_0x115e22(0x1b7)](_0x29786a=>_0x29786a[_0x115e22(0x1bf)]==_0x21bbb5[_0x115e22(0x1bf)]);if(_0x1e822d){_0x3219bc+=_0x1e822d[_0x115e22(0x229)];if(!_0x31b633)_0x31b633=_0x1e822d[_0x115e22(0x15a)];}}),_0xede989[_0x3accf8(0x192)]({'coin':_0x21bbb5[_0x3accf8(0x1bf)],'number':_0x3219bc,'initialprice':_0x31b633});});const _0xa4a978={'basecoin':_0x6d2076,'eur':_0x21aa1a,'usd':_0x4affaa,'coins':_0xede989};if(_0x598e70)proxyEmit('starting-balances',_0xa4a978);startingBalances=_0xa4a978;}}function headlessMode(_0x1bc32b){const _0x1cdde1=_0x500ec4;let _0x2d0de8=_0x1bc32b[_0x1cdde1(0x27d)],_0x54a36e=_0x1bc32b[_0x1cdde1(0x11b)],_0x44f298=[];for(let _0x2251b5 of _0x2d0de8){if(_0x2251b5[_0x1cdde1(0x1bf)]!=config['basecoin']){if(_0x2251b5[_0x1cdde1(0x22e)]>=_0x54a36e/0x64){if(_0x2251b5['valid'])_0x44f298[_0x1cdde1(0x192)](_0x2251b5);}else{if(_0x2251b5['delta']<=-_0x54a36e/0x64){if(_0x2251b5['valid'])_0x44f298[_0x1cdde1(0x192)](_0x2251b5);}}}}_0x44f298[_0x1cdde1(0x1c3)]>0x0&&(lockOrders==ORDERS[_0x1cdde1(0x230)]&&!coolingDown&&_0x44f298[_0x1cdde1(0x1a1)](_0x3615b2=>{const _0x241c9c=_0x1cdde1;logger[_0x241c9c(0x276)](_0x241c9c(0xe3)+_0x3615b2[_0x241c9c(0x1bf)]+'\x20'+_0x3615b2['number']+'\x20'+_0x3615b2[_0x241c9c(0x183)]+'\x20'+_0x3615b2[_0x241c9c(0x1e0)]+'%\x20'+_0x3615b2[_0x241c9c(0x257)]+'%\x20'+(0x64*_0x3615b2[_0x241c9c(0x22e)])[_0x241c9c(0x12f)](0x2)+_0x241c9c(0xd3)+_0x54a36e[_0x241c9c(0x12f)](0x2)+'%)');}),placeOrder(_0x44f298));}function notifyBalance(_0x427a24){const _0x13c06e=_0x500ec4;let _0x51d862=_0x427a24[_0x13c06e(0x27d)],_0x436236=_0x427a24[_0x13c06e(0x11b)],_0xa1e65a=[];for(let _0x10672c of _0x51d862){if(_0x10672c['coin']!=config['basecoin']){if(_0x10672c['delta']>=_0x436236/0x64){if(_0x10672c[_0x13c06e(0x115)])_0xa1e65a[_0x13c06e(0x192)](_0x10672c);}else{if(_0x10672c['delta']<=-_0x436236/0x64){if(_0x10672c[_0x13c06e(0x115)])_0xa1e65a[_0x13c06e(0x192)](_0x10672c);}}}}if(_0xa1e65a[_0x13c06e(0x1c3)]>0x0){let _0x4c4f1e=_0xa1e65a[_0x13c06e(0x1e9)](_0xe27029=>_0xe27029[_0x13c06e(0x1bf)]);_0x4c4f1e[_0x13c06e(0x10b)]();let _0x47c95e=_0x4c4f1e['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x13c06e(0x152));lastCoinsToBalance=_0x47c95e;}}function symbolToCoin(_0x528c0f){const _0x4547ee=_0x500ec4;let _0x499697;if(_0x528c0f[_0x4547ee(0x1e8)]('/'+config[_0x4547ee(0x245)]))_0x499697=_0x528c0f['replace']('/'+config['basecoin'],'');if(_0x528c0f[_0x4547ee(0x1e8)](config[_0x4547ee(0x245)]+'/'))_0x499697=_0x528c0f[_0x4547ee(0x1b8)](config['basecoin']+'/','');return _0x499697;}async function unlockOrders(){const _0x4012f4=_0x500ec4;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x4012f4(0x276)](_0x4012f4(0x17e)),lockOrders=ORDERS[_0x4012f4(0x25e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x44118a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x44118a,setBlockTransactionDetection(![]),validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x4012f4(0x230)],logger[_0x4012f4(0x276)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x217300){const _0x3e79e9=_0x500ec4;if(_0x217300)validateOrdersState=_0x217300;logger[_0x3e79e9(0x276)](_0x3e79e9(0x205)+validateOrdersState+_0x3e79e9(0x18e)+(lockOrders==0x1?_0x3e79e9(0x11f):lockOrders==0x2?_0x3e79e9(0x1c8):_0x3e79e9(0x156)));let _0x1747ae=[],_0x251aab=config[_0x3e79e9(0x1cc)]==_0x3e79e9(0x195)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3e79e9(0x15c)])return;logger[_0x3e79e9(0x276)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x3e79e9(0x1a1)](_0x2f4439=>{const _0x54b1e8=_0x3e79e9;let _0x15a8f6=![];_0x2f4439[_0x54b1e8(0x126)]>0x0&&(_0x15a8f6=!![]),_0x1747ae[_0x54b1e8(0x192)](_0x15a8f6),_0x15a8f6&&config[_0x54b1e8(0x1cc)]!=_0x54b1e8(0x195)&&logHistory('order',_0x54b1e8(0x108)+_0x2f4439[_0x54b1e8(0x234)]+'\x20'+_0x2f4439[_0x54b1e8(0x20f)]+'\x20#'+formatResult(_0x2f4439[_0x54b1e8(0x126)],0x8)+'\x20@'+formatResult(_0x2f4439[_0x54b1e8(0x15a)],0x8));}),_0x1747ae[_0x3e79e9(0x1a1)]((_0x3c7217,_0x393e6b)=>{if(_0x3c7217)lastOrders['splice'](_0x393e6b,0x1);}),persistOpenOrders(lastOrders);const _0x290ea4=coolingDown?_0x3e79e9(0x186):_0x3e79e9(0x239);if(validateOrdersState==_0x3e79e9(0x1e5)){validateOrdersState=_0x3e79e9(0x1be);if(_0x1747ae[_0x3e79e9(0x1e8)](![])){if(config[_0x3e79e9(0x1cc)]==_0x3e79e9(0x195)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1747ae['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x3e79e9(0x1cc)]==_0x3e79e9(0x195)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3e79e9(0x286))_0x1747ae['includes'](![])&&(config[_0x3e79e9(0x1cc)]==_0x3e79e9(0x195)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3e79e9(0x15f)](_0x251aab*validateOrderInterval/0xea60)+_0x3e79e9(0x1ed)+_0x290ea4):(await cancelOrders(),logHistory(_0x3e79e9(0x218),_0x3e79e9(0x110)+Math[_0x3e79e9(0x15f)](_0x251aab*validateOrderInterval/0xea60)+_0x3e79e9(0x1ed)+_0x290ea4))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x3e79e9(0x1cc)]!=_0x3e79e9(0x195))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x290ea4);await unlockOrders();}}}}}async function cancelOrders(){const _0x5c69a5=_0x500ec4;lastOrders[_0x5c69a5(0x1a1)](async _0xea7ddc=>{const _0x110547=_0x5c69a5;try{const _0x4001a4=await exchange[_0x110547(0x217)](_0xea7ddc[_0x110547(0x13b)],_0xea7ddc[_0x110547(0x234)]);}catch(_0x429e79){if(_0x429e79[_0x110547(0x157)]()[_0x110547(0x1e8)]('OrderNotFound')){}else await handleError(_0x429e79,_0x110547(0x25f));}});}async function initCoinResults(_0x31e0d2){const _0x5b978a=_0x500ec4;_0x31e0d2?logger[_0x5b978a(0x276)](_0x5b978a(0x1c7)+_0x31e0d2):logger[_0x5b978a(0x276)](_0x5b978a(0x1a0)),config[_0x5b978a(0x27d)][_0x5b978a(0x1a1)](_0x15603b=>{const _0x507efa=_0x5b978a;if(!_0x15603b[_0x507efa(0x150)]&&_0x15603b[_0x507efa(0x1bf)]!=config['basecoin']){const _0x129743=currentCoins[_0x507efa(0x1b7)](_0x5c73ba=>_0x5c73ba['coin']==_0x15603b[_0x507efa(0x1bf)]),_0x1c6e70=gTicker[noslash(_0x15603b[_0x507efa(0x234)])];let _0x587dc0=_0x129743?_0x129743[_0x507efa(0x229)]:null,_0x4edc4b=_0x15603b[_0x507efa(0x247)]?0x1/_0x1c6e70:_0x1c6e70,_0xfec8b7;config[_0x507efa(0x200)][_0x507efa(0x1a1)](_0x4e3bc1=>{const _0x1eb8bc=_0x507efa;!_0xfec8b7&&(_0xfec8b7=_0x4e3bc1[_0x1eb8bc(0x22d)][_0x1eb8bc(0x1b7)](_0x435423=>_0x435423[_0x1eb8bc(0x1bf)]==_0x15603b[_0x1eb8bc(0x1bf)]),_0xfec8b7&&(_0x587dc0=_0xfec8b7[_0x1eb8bc(0x229)],_0x4edc4b=_0xfec8b7['price']));});let _0x4179a5=dbCoinResults[_0x507efa(0x1dd)](_0x507efa(0x14c))[_0x507efa(0x1b7)]({'coin':_0x15603b[_0x507efa(0x1bf)]})[_0x507efa(0x203)]();if(!_0x4179a5){const _0x5ab2f6={'coin':_0x15603b['coin'],'number':_0x587dc0,'breakeven':_0x4edc4b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x507efa(0x1dd)](_0x507efa(0x14c))[_0x507efa(0x192)](_0x5ab2f6)[_0x507efa(0x289)]();}else{if(_0x31e0d2&&_0x15603b[_0x507efa(0x1bf)]==_0x31e0d2){const _0x1585b0={'coin':_0x15603b['coin'],'number':_0x587dc0,'breakeven':_0x4edc4b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x507efa(0x14c))[_0x507efa(0x1b7)]({'coin':_0x15603b[_0x507efa(0x1bf)]})['assign'](_0x1585b0)[_0x507efa(0x289)]();}}}});}async function updateCoinResults(_0x2b3b7b,_0x2940d1=![]){const _0xfaa7de=_0x500ec4;let _0x596aa6,_0x42b862,_0x31fbd7,_0x558c05,_0xcbcb1d,_0x3cd5ad,_0x2fd309=dbCoinResults[_0xfaa7de(0x1dd)]('coins')[_0xfaa7de(0x1b7)]({'coin':_0x2b3b7b[_0xfaa7de(0x1bf)]})['value'](),_0x26ee58=![];_0x2fd309&&Object['entries'](_0x2fd309)['forEach'](([_0x3b7428,_0x41cc6f])=>{if(_0x41cc6f==null)_0x26ee58=!![];});(!_0x2fd309||_0x26ee58)&&(await initCoinResults(_0x2b3b7b[_0xfaa7de(0x1bf)]),_0x2fd309=dbCoinResults[_0xfaa7de(0x1dd)](_0xfaa7de(0x14c))[_0xfaa7de(0x1b7)]({'coin':_0x2b3b7b[_0xfaa7de(0x1bf)]})[_0xfaa7de(0x203)]());_0x2b3b7b[_0xfaa7de(0x247)]&&(_0x3cd5ad={'filled':_0x2b3b7b[_0xfaa7de(0x126)]*_0x2b3b7b[_0xfaa7de(0x15a)],'amount':_0x2b3b7b[_0xfaa7de(0x126)]*_0x2b3b7b[_0xfaa7de(0x15a)],'side':_0x2b3b7b[_0xfaa7de(0x20f)]==_0xfaa7de(0x21c)?'buy':_0xfaa7de(0x21c),'price':0x1/_0x2b3b7b[_0xfaa7de(0x15a)]},_0x2b3b7b={..._0x2b3b7b,..._0x3cd5ad});_0x2940d1?_0x42b862=_0x2b3b7b[_0xfaa7de(0x20f)]=='buy'?_0x2fd309[_0xfaa7de(0x229)]+_0x2b3b7b[_0xfaa7de(0x126)]:_0x2fd309[_0xfaa7de(0x229)]-_0x2b3b7b[_0xfaa7de(0x126)]:_0x42b862=await getCoinNumber(_0x2b3b7b[_0xfaa7de(0x1bf)]);if(_0x2b3b7b[_0xfaa7de(0x159)]&&_0x2b3b7b['fee'][_0xfaa7de(0x101)]==config[_0xfaa7de(0x245)])_0x596aa6=Number(_0x2b3b7b[_0xfaa7de(0x159)][_0xfaa7de(0x244)]);else{if(_0x2b3b7b['fee']&&_0x2b3b7b[_0xfaa7de(0x159)]['currency']==_0xfaa7de(0x13d)&&!_0x2940d1&&config[_0xfaa7de(0x245)]!='PAXG')_0x596aa6=Number(_0x2b3b7b[_0xfaa7de(0x159)]['cost'])*gTicker[_0xfaa7de(0x13d)+config[_0xfaa7de(0x245)]];else _0x596aa6=defaultFee*_0x2b3b7b[_0xfaa7de(0x126)]*_0x2b3b7b[_0xfaa7de(0x15a)];}_0x2b3b7b['side']=='buy'?(_0x31fbd7=_0x42b862!=0x0?(_0x2fd309['breakeven']*_0x2fd309[_0xfaa7de(0x229)]+_0x2b3b7b['price']*(_0x42b862-_0x2fd309[_0xfaa7de(0x229)])+_0x596aa6)/_0x42b862:0x0,_0x558c05=_0x2fd309['realized']):(_0x31fbd7=_0x42b862!=0x0?(_0x2fd309[_0xfaa7de(0x266)]*_0x2fd309[_0xfaa7de(0x229)]-_0x2b3b7b[_0xfaa7de(0x15a)]*(_0x2fd309[_0xfaa7de(0x229)]-_0x42b862)+_0x596aa6)/_0x42b862:0x0,_0x558c05=_0x2fd309['realized']+(_0x2b3b7b['price']-_0x2fd309[_0xfaa7de(0x266)])*_0x2b3b7b[_0xfaa7de(0x126)]);_0xcbcb1d=(_0x2b3b7b[_0xfaa7de(0x15a)]-_0x31fbd7-_0x596aa6/_0x2b3b7b[_0xfaa7de(0x126)])*_0x42b862;let _0x465d2a={'coin':_0x2b3b7b['coin'],'number':_0x42b862,'breakeven':formatResult(_0x31fbd7,0x8),'realized':formatResult(_0x558c05,0x8),'unrealized':formatResult(_0xcbcb1d,0x8),'fees':formatResult(_0x2fd309[_0xfaa7de(0x12a)]+_0x596aa6,0x8),'sells':_0x2b3b7b[_0xfaa7de(0x20f)]=='sell'?_0x2fd309['sells']+0x1:_0x2fd309['sells'],'buys':_0x2b3b7b[_0xfaa7de(0x20f)]==_0xfaa7de(0x122)?_0x2fd309[_0xfaa7de(0x23e)]+0x1:_0x2fd309[_0xfaa7de(0x23e)]};dbCoinResults[_0xfaa7de(0x1dd)](_0xfaa7de(0x14c))[_0xfaa7de(0x1b7)]({'coin':_0x2b3b7b[_0xfaa7de(0x1bf)]})[_0xfaa7de(0xeb)](_0x465d2a)[_0xfaa7de(0x289)]();if(!_0x2940d1){if(_0x2b3b7b[_0xfaa7de(0x159)]&&_0x2b3b7b[_0xfaa7de(0x159)]['currency']==_0xfaa7de(0x13d)){const _0x3e07e9=currentCoins['find'](_0x19cd9d=>_0x19cd9d[_0xfaa7de(0x1bf)]=='BNB');if(_0x3e07e9){let _0x4b8408=dbCoinResults[_0xfaa7de(0x1dd)](_0xfaa7de(0x14c))[_0xfaa7de(0x1b7)]({'coin':_0xfaa7de(0x13d)})['value']();_0x465d2a={..._0x4b8408,'number':_0x3e07e9[_0xfaa7de(0x229)]},dbCoinResults['get'](_0xfaa7de(0x14c))[_0xfaa7de(0x1b7)]({'coin':_0xfaa7de(0x13d)})[_0xfaa7de(0xeb)](_0x465d2a)[_0xfaa7de(0x289)]();}}}}async function placeOrder(_0x8e4234){const _0x51dcc5=_0x500ec4,_0x3a1a57=config['ordertype']==_0x51dcc5(0x195)?_0x51dcc5(0x195):_0x51dcc5(0x1ea);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x51dcc5(0x15c)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x6bab8f=![];lastOrders=[];for(const _0x3fa901 of _0x8e4234){let _0x59298a,_0x1d132b,_0x17228e,_0x1a8db3,_0x426ea0,_0x3dab98=_0x3fa901[_0x51dcc5(0x234)];try{const _0x3d71a9=await exchange[_0x51dcc5(0x21b)](_0x3dab98);_0x59298a=_0x3fa901['reverse']?0x1/_0x3fa901[_0x51dcc5(0x183)]:_0x3fa901[_0x51dcc5(0x183)],_0x1d132b=_0x3d71a9[_0x51dcc5(0x1bb)],_0x17228e=_0x3d71a9[_0x51dcc5(0x262)];_0x3fa901[_0x51dcc5(0x247)]?(_0x1a8db3=_0x3fa901[_0x51dcc5(0x20f)]==_0x51dcc5(0x122)?_0x51dcc5(0x21c):_0x51dcc5(0x122),_0x426ea0=Math[_0x51dcc5(0x19e)](_0x3fa901['trade'])/_0x59298a):(_0x1a8db3=_0x3fa901[_0x51dcc5(0x20f)],_0x426ea0=Math['abs'](_0x3fa901['trade']));_0x3a1a57==_0x51dcc5(0x1ea)&&(config[_0x51dcc5(0x1cc)]==_0x51dcc5(0x1db)&&(_0x59298a=_0x1a8db3=='buy'?_0x1d132b:_0x17228e),config['ordertype']==_0x51dcc5(0x179)&&(_0x59298a=_0x1a8db3==_0x51dcc5(0x122)?_0x17228e:_0x1d132b));_0x426ea0=formatResult(_0x426ea0,0x8),_0x59298a=formatResult(_0x59298a,0x8);const _0x5ac85f=_0x1a8db3==_0x51dcc5(0x21c)?config[_0x51dcc5(0x19d)]?String[_0x51dcc5(0x283)]('0x'+config['emojisell'])+'\x20':'':config[_0x51dcc5(0x146)]?String['fromCodePoint']('0x'+config[_0x51dcc5(0x146)])+'\x20':'',_0x3de769=_0x3a1a57==_0x51dcc5(0x195)?_0x51dcc5(0x1f1):config[_0x51dcc5(0x1cc)]=='limit-high'?'Limit\x20(high-margin)':_0x51dcc5(0x1fa),_0x588d82=(Math[_0x51dcc5(0x241)](Math[_0x51dcc5(0x13a)]()*0x35a4e900)+0x5f5e100)[_0x51dcc5(0x157)]();lastOrders[_0x51dcc5(0x192)]({'customId':_0x588d82,'symbol':_0x3dab98,'coin':_0x3fa901['coin'],'amount':_0x426ea0,'price':_0x59298a,'side':_0x1a8db3,'reverse':_0x3fa901[_0x51dcc5(0x247)],'filled':0x0});if(_0x3a1a57==_0x51dcc5(0x195))logHistory('order',''+_0x5ac85f+_0x3de769+_0x51dcc5(0x12c)+_0x3dab98+'\x20'+_0x1a8db3+'\x20#'+formatResult(_0x426ea0,0x8)+'\x20@'+formatResult(_0x59298a,0x8));else logHistory('order',''+_0x5ac85f+_0x3de769+'\x20order:\x20'+_0x3dab98+'\x20'+_0x1a8db3+'\x20#'+formatResult(_0x426ea0,0x8)+'\x20@'+formatResult(_0x59298a,0x8));let _0x3d71d6;_0x3a1a57=='market'?_0x1a8db3=='buy'&&[_0x51dcc5(0xe4),_0x51dcc5(0x260),_0x51dcc5(0x142),_0x51dcc5(0x254),_0x51dcc5(0x206)][_0x51dcc5(0x1e8)](config[_0x51dcc5(0x1d4)])?_0x3d71d6=await exchange[_0x51dcc5(0x129)](_0x3dab98,_0x3a1a57,_0x1a8db3,_0x426ea0,_0x59298a):_0x3d71d6=await exchange[_0x51dcc5(0x129)](_0x3dab98,_0x3a1a57,_0x1a8db3,_0x426ea0,undefined):_0x3d71d6=await exchange['createOrder'](_0x3dab98,_0x3a1a57,_0x1a8db3,_0x426ea0,_0x59298a);logger['debug']('ID:\x20'+_0x3d71d6['id']+'\x20|\x20Custom\x20ID:\x20'+_0x588d82);const _0x139185=lastOrders['length']-0x1;if(_0x139185>=0x0&&lastOrders[_0x139185][_0x51dcc5(0x1d5)]==_0x588d82){lastOrders[_0x139185]['orderId']=_0x3d71d6['id'];if(_0x3d71d6[_0x51dcc5(0x1e3)])lastOrders[_0x139185]['amount']=_0x3d71d6[_0x51dcc5(0x1e3)];if(_0x3d71d6['price'])lastOrders[_0x139185][_0x51dcc5(0x15a)]=_0x3d71d6[_0x51dcc5(0x15a)];lastOrders[_0x139185][_0x51dcc5(0x159)]=_0x3d71d6[_0x51dcc5(0x159)];}if(config[_0x51dcc5(0x134)]!=0x0){let _0x57c107=null;if(cooldownTracker[_0x51dcc5(0x1c3)]==config[_0x51dcc5(0x134)]-0x1)_0x57c107=cooldownTracker[_0x51dcc5(0x17f)]();const _0x33756f=getTimeStamp();cooldownTracker[_0x51dcc5(0x192)](_0x33756f);if(_0x57c107){const _0x44931d=fns[_0x51dcc5(0x191)](new Date(_0x33756f),new Date(_0x57c107));if(_0x44931d<cooldownInterval){logHistory(_0x51dcc5(0x1a9),_0x51dcc5(0x22f)+config[_0x51dcc5(0x134)]+_0x51dcc5(0x267)+cooldownInterval/0x3c+_0x51dcc5(0x18c)+cooldownPeriod/(0xe10*0x3e8)+_0x51dcc5(0x1de)),coolingDown=!![];break;}}}}catch(_0xffff3f){if(_0xffff3f[_0x51dcc5(0x157)]()[_0x51dcc5(0x1e8)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x51dcc5(0x224)](_0x21214a=>_0x21214a[_0x51dcc5(0x234)]!=_0x3dab98),logHistory(_0x51dcc5(0x1a9),_0x51dcc5(0x1d1)+_0x3dab98),_0x6bab8f=!![];else{if(_0xffff3f[_0x51dcc5(0x157)]()[_0x51dcc5(0x1e8)](_0x51dcc5(0x19c)))lastOrders=lastOrders[_0x51dcc5(0x224)](_0x11f038=>_0x11f038[_0x51dcc5(0x234)]!=_0x3dab98),logHistory(_0x51dcc5(0x1a9),'Order\x20amount\x20is\x20invalid:\x20'+_0x3dab98),_0x6bab8f=!![];else{if(_0xffff3f[_0x51dcc5(0x157)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x51dcc5(0x224)](_0x3f59db=>_0x3f59db[_0x51dcc5(0x234)]!=_0x3dab98),logHistory(_0x51dcc5(0x1a9),'Order\x20is\x20invalid:\x20'+_0x3dab98),logger[_0x51dcc5(0x276)](_0xffff3f),_0x6bab8f=!![];else _0xffff3f[_0x51dcc5(0x157)]()[_0x51dcc5(0x1e8)](_0x51dcc5(0x238))?(lastOrders=lastOrders['filter'](_0x3f7212=>_0x3f7212[_0x51dcc5(0x234)]!=_0x3dab98),logHistory(_0x51dcc5(0x1a9),_0x51dcc5(0x1d1)+_0x3dab98),_0x6bab8f=!![]):(lastOrders=lastOrders[_0x51dcc5(0x224)](_0x390411=>_0x390411[_0x51dcc5(0x234)]!=_0x3dab98),await handleError(_0xffff3f,_0x51dcc5(0xe2),_0x3dab98));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x51dcc5(0x1c3)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4c81bb=config[_0x51dcc5(0x1cc)]==_0x51dcc5(0x195)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1dfda7=_0x51dcc5;validateOrders(_0x1dfda7(0x286));},_0x4c81bb);}else unlockOrders();_0x6bab8f&&config[_0x51dcc5(0x133)]&&(logHistory(_0x51dcc5(0x1a9),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x51dcc5(0x218),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x51dcc5(0x1a9),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x51dcc5(0x230)]&&(!config[_0x51dcc5(0x133)]&&(config[_0x51dcc5(0x1cc)]==_0x51dcc5(0x195)?logHistory(_0x51dcc5(0x1a9),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x51dcc5(0x1a9),_0x51dcc5(0x246))));}}function persistOpenOrders(_0x1c1c74){const _0xdf8752=_0x500ec4,_0x36ca34={...config,'openOrders':_0x1c1c74};let _0x1c3ec4=dbConfig['get'](_0xdf8752(0x17d))['find']({'botID':botID})[_0xdf8752(0x203)]();_0x1c3ec4&&dbConfig[_0xdf8752(0x1dd)](_0xdf8752(0x17d))[_0xdf8752(0x1b7)]({'botID':botID})[_0xdf8752(0xeb)](_0x36ca34)[_0xdf8752(0x289)]();}function restoreOrders(){const _0x264d32=_0x500ec4;let _0x5ae55d;config[_0x264d32(0x1d2)]&&allOpenOrders[_0x264d32(0x1a1)](_0x4bfc72=>{const _0xa54788=_0x264d32,_0x2503ea=config['openOrders'][_0xa54788(0x1b7)](_0x459f1c=>_0x459f1c[_0xa54788(0x13b)]==_0x4bfc72['id']);_0x2503ea&&(lastOrders[_0xa54788(0x192)](_0x2503ea),_0x5ae55d=_0x4bfc72[_0xa54788(0x204)]);});if(lastOrders[_0x264d32(0x1c3)]>0x0){lockOrders=ORDERS[_0x264d32(0x15c)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x52ed2e=new Date()[_0x264d32(0x132)](),_0x270942=config[_0x264d32(0x1cc)]==_0x264d32(0x195)?validateOrderTimeout*0x3c*0x3e8:config[_0x264d32(0x120)]*0x3c*0x3e8;if(_0x5ae55d+_0x270942>_0x52ed2e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2a8a00=_0x264d32;validateOrders(_0x2a8a00(0x286));},_0x5ae55d+_0x270942-_0x52ed2e);}else validateOrders(_0x264d32(0x286));}}function _0x49fb(){const _0x251d91=['closed','final','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','switch-manual','write','ExchangeNotAvailable','</pre>','Error\x20in\x20loadSymbols():\x20','%\x20(','bots','heapUsed','marketcapApi','bb-secure.json','\x20>\x20','<pre>','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','removed','change24h','no\x20open\x20orders','apply','\x20minutes','basecoinvalue','rightTxt','placeOrder()','Trigger:\x20','Bybit','\x20>\x20[DEBUG]\x20','slice','Initializing\x20exchange','argv','Network\x20error\x20details:','/EUR','assign','\x20value','toUpperCase','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','balances','detectLiquidityChange()','getMonth','padStart','timeshift','\x20attempts','Unknown\x20error\x20-\x20check\x20logs','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','message','watchTradesForSymbols','status',':\x20Bot\x20','order','milliseconds','AuthenticationError','\x20:\x20','currency','1\x20-\x20FILLED\x20known\x20order:\x20','15551290HUByxu','2.6.0','PermissionDenied','autoliquidity','memoryUsage','Order\x20filled:\x20','\x20change','getSeconds','sort','getDate','Symbol(s):\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','settings','Unfilled\x20order(s)\x20canceled\x20after\x20','252JbAxUP','exchange\x20reload','marketcapsqrt','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','valid','version','getStartingBalances','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','InvalidNonce','bb-settings.json','threshold','Error:\x20Invalid\x20argument\x20','coin-loading-progress','Cryptocom','ORDERS.LOCKED','timeout','Error\x20details\x20(0):','buy','watchTrades','max','BTC','filled','join','sortBy','createOrder','fees','watchTradesForSymbols()','\x20order:\x20','highest','exec','toFixed','isEqual','recreateCoinResults()','getTime','headless','cooldown','Error\x20while\x20deleting\x20files:\x20','stringify','Loading\x20completed','USDC','logs','random','orderId','Block\x20transaction\x20detection:\x20','BNB','getMinutes','toLowerCase','percentage','quote','Cex','pro','getAllOrders()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','emojibuy','watchOrders','total','password','added','************','coins','apiPassword','PAXG','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','excluded','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Manual\x20balancing\x20required','2112168GCGuXB','watchOrders()','\x20-\x20bot\x20not\x20started','ORDERS.UNLOCKED','toString','remove','fee','price','RateLimitExceeded','LOCKED','colorscheme','watchTrades()','round','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','./logs/','keys','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','cloneDeep','\x20uses\x20','full','substring','Pausing\x20for\x20','request-time','loading-canceled','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','-------------------------------\x0a','running','average','-config.json','slider','startnumber','\x20exchange\x20error:\x20','(((.+)+)+)+$','token\x20is\x20expired','77Eiemrw','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','indexOf','Crypt','limit-low','loadMarkets','log','exchanges','bot','1\x20-\x20Unlock\x20orders','shift','\x20|\x20','fetchTickers()','2.6.22','last','canceled','starting-balance-','balancing\x20resumes\x20when\x20cooldown\x20ends','progress','2.6.23','getOpenOrders()','active','recent20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','datetime','\x20|\x20lock\x20orders:\x20','USD','getFullYear','differenceInSeconds','push','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','market','freeze','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','288472vKdoWE','-events.json','Resetting\x20bot\x20history','\x20metrics:</b>\x20\x0a\x0a','Invalid\x20quantity','emojisell','abs','EUR','Initializing\x20coin\x20results','forEach','process\x20','-performance.json','resetHistory','red_yellow_blue','configuration','Portfolio\x20change\x20detected:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','error','status\x20code\x20401','portfolio1','001','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','util','\x20>\x20pausing\x20bot\x20for\x20','type',':\x20timer\x20>','privateKey','time','warning','2.3.5','getCoins()','find','replace','kill','mkdirSync','bid','defaults','data','ongoing','coin','function','2.5.0','botname','length','date','onepagemode','padEnd','Resetting\x20coin\x20results:\x20','ORDERS.UNLOCKING','startdate',',\x20must\x20be\x20a\x203\x20digit\x20number','443494yFIXSu','ordertype','751854tKcVrY','ETH','createWriteStream','change','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','openOrders','yargs/yargs','exchange','customId','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','unlinkSync','USDT','event','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','limit-high','args','get','\x20hour','Exception\x20thrown\x20in\x20','distribution','getCoinNumber()','fetchClosedOrders','amount','\x20/\x20','initial','BNB/','getPortfolio','includes','map','limit','DDoSProtection','quick','\x20minutes\x20-\x20','marketcapEnabled','sqrt','decrypt','Market','test','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','25940COGifR','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Error\x20in\x20testAPI():\x20','offset','marketcap','Limit\x20(low-margin)','remainingSymbols','lowdb','entries','usd','\x20MB','liquidity','net-basecoin','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','value','timestamp','1\x20-\x20Validate\x20orders:\x20','Huobipro','RequestTimeout','OnMaintenance','existsSync','cancel','trade','Exchange','startprice','code','side','Fee\x20discount\x20refund\x20detected:\x20','Bot\x20','parse','uncaughtException','<b>Bot\x20','event-history','/output-000.log','cancelOrder','success','min','apiSecret','fetchTicker','sell','fiat','send','open','storeHeadless','sha256','2\x20-\x20Handled\x20open\x20orders','./config/','filter','Exchange\x20error\x20details:','Net\x20effect','performance','writeFile','number','string','leftTxt','InsufficientFunds','changes','delta','Executed\x20','UNLOCKED','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','-results.json','botID','symbol','deleteHistoryAlerts','configuration-stored','Failed\x20to\x20load\x20coin\x20data\x20for\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','balancing\x20resumed','Binance','enabled','startsWith','yyyy/MM/dd','buys','none','sendMetricsTelegram','floor','\x20API\x20key\x20is\x20invalid','market_cap','cost','basecoin','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','reverse','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20|\x20highest\x20fee:\x20','restart','initTickers()','API-key\x20format\x20invalid','fetchOpenOrders','axios','format','Error\x20details:','\x20exchange','has','orderstatus','Huobi','/backup/','2\x20-\x20handling\x20FILLED\x20order:\x20','target','fetchTickers','RETRY\x20-\x20Error\x20in\x20','getHours','Error\x20details\x20(1):','showname','storeConfiguration','UNLOCKING','cancelOrders()','Bitget','Net\x20','ask','eur',')\x20|\x20exchange:\x20','net-fiat','breakeven','\x20orders\x20in\x20less\x20than\x20','bot-','\x20>\x20details:','Saving\x20configuration','apiKey','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','split','recreate','***','Unknown\x20error:\x20','splice','showConfig','USDP','portfolio2','ExchangeError','debug','504mAkKtQ','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','<b>','fetchBalance','set','limits','portfolio','2351538xSNHYd','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','search','spot','update-liquidity','fromCodePoint','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot'];_0x49fb=function(){return _0x251d91;};return _0x49fb();}async function sendMetricsTelegram(){const _0x3ac449=_0x500ec4;if(!coinsLoaded){process['send']({'telegrammsg':_0x3ac449(0xf8)},_0x6598a1=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x139607='';if(config[_0x3ac449(0x25c)])_0x139607=_0x3ac449(0x279)+config[_0x3ac449(0x1c2)]+_0x3ac449(0x19b);else _0x139607=_0x3ac449(0x214)+botID+_0x3ac449(0x19b);const _0x3090a0=getKPIs(_0x3ac449(0x245)),_0x50715d=getKPIs(_0x3ac449(0x21d),config[_0x3ac449(0x21d)]),_0x44abd8=getKPIs(_0x3ac449(0x201)),_0xf073fe=getKPIs(_0x3ac449(0x265),config['fiat']);_0x139607+=_0x3ac449(0xd9),_0x139607+=_0x3090a0[_0x3ac449(0x22b)]+_0x3ac449(0x100)+_0x3090a0[_0x3ac449(0x203)]+'\x0a',_0x139607+=_0x3090a0[_0x3ac449(0xe1)]+':\x20'+_0x3090a0['change']+'%\x0a',_0x139607+=_0x50715d[_0x3ac449(0x22b)]+_0x3ac449(0x100)+_0x50715d[_0x3ac449(0x203)]+'\x0a',_0x139607+=_0x50715d[_0x3ac449(0xe1)]+':\x20'+_0x50715d['change']+'%\x0a',_0x139607+=_0x44abd8[_0x3ac449(0x22b)]+':\x20'+_0x44abd8[_0x3ac449(0x203)]+'\x20('+config[_0x3ac449(0x245)]+')\x0a',_0x139607+=_0x44abd8[_0x3ac449(0xe1)]+':\x20'+_0x44abd8[_0x3ac449(0x1d0)]+_0x3ac449(0xd3)+config[_0x3ac449(0x245)]+')\x0a',_0x139607+=_0xf073fe[_0x3ac449(0x22b)]+':\x20'+_0xf073fe[_0x3ac449(0x203)]+'\x20('+config[_0x3ac449(0x21d)]+')\x0a',_0x139607+=_0xf073fe['rightTxt']+':\x20'+_0xf073fe['change']+_0x3ac449(0xd3)+config[_0x3ac449(0x21d)]+')\x0a',_0x139607+=_0x3ac449(0xd1),process[_0x3ac449(0x21e)]({'telegrammsg':_0x139607},_0xaea428=>{});}async function sendPortfolioTelegram(){const _0x50bf20=_0x500ec4;if(!coinsLoaded||!currentCoins[0x0][_0x50bf20(0x1e0)]){process[_0x50bf20(0x21e)]({'telegrammsg':_0x50bf20(0xf8)},_0x280257=>{});return;}let _0x533629='';if(config[_0x50bf20(0x25c)])_0x533629='<b>'+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x533629=_0x50bf20(0x214)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x533629+='<pre>',_0x533629+=_0x50bf20(0x16c),_0x533629+=_0x50bf20(0x1f3),_0x533629+=_0x50bf20(0x16c),currentCoins[_0x50bf20(0x1a1)](_0x2024a2=>{const _0xecf2c9=_0x50bf20;_0x533629+=_0x2024a2[_0xecf2c9(0x1bf)][_0xecf2c9(0x1c6)](0x7)+'|\x20'+formatPad(_0x2024a2[_0xecf2c9(0x1e0)],0x2,0x6)+'|\x20'+formatPad(_0x2024a2[_0xecf2c9(0x257)],0x2,0x6)+'|\x20'+formatPad(_0x2024a2[_0xecf2c9(0x22e)]*0x64,0x2,0x6)+'\x0a';}),_0x533629+=_0x50bf20(0xd1),process[_0x50bf20(0x21e)]({'telegrammsg':_0x533629},_0x4b62b1=>{});}function formatPad(_0x2c7eb9,_0x24df2b,_0x2e39a6){const _0xae0758=_0x500ec4,_0x354470=formatResultString(_0x2c7eb9,_0x24df2b);return _0x354470?_0x354470[_0xae0758(0xf3)](_0x2e39a6):''[_0xae0758(0xf3)](_0x2e39a6);}function logHistory(_0x3df82e,_0x29e4ab,_0x3d4447=''){const _0x40ec95=_0x500ec4;logger['full'](''+_0x29e4ab);let _0x59f7b5={'time':getTimeStamp(),'type':_0x3df82e,'event':_0x29e4ab};dbLogs[_0x40ec95(0x1dd)](_0x40ec95(0x139))[_0x40ec95(0x192)](_0x59f7b5)['write']();if(_0x3d4447=='')_0x3d4447=_0x29e4ab;proxyEmit('event',{'log':_0x59f7b5,'summary':_0x3d4447}),process[_0x40ec95(0x21e)]({'telegram':{..._0x59f7b5,'botname':config['botname'],'showname':config[_0x40ec95(0x25c)]}},_0x96b746=>{});}function emitHistory(_0x3aaf88={}){const _0x3dbff2=_0x500ec4;Object[_0x3dbff2(0x162)](_0x3aaf88)[_0x3dbff2(0x1c3)]==0x0&&(_0x3aaf88={'type':[_0x3dbff2(0xfd),_0x3dbff2(0x1d9)],'event':'','page':0x1});if(_0x3aaf88[_0x3dbff2(0x1b0)][_0x3dbff2(0x1e8)](_0x3dbff2(0x1d9)))_0x3aaf88[_0x3dbff2(0x1b0)][_0x3dbff2(0x271)](_0x3aaf88[_0x3dbff2(0x1b0)][_0x3dbff2(0x177)]('event'),0x1,_0x3dbff2(0x1a9),_0x3dbff2(0x1b4),_0x3dbff2(0x218));if(dbLogs[_0x3dbff2(0x252)](_0x3dbff2(0x139))[_0x3dbff2(0x203)]()){let _0x261172=dbLogs[_0x3dbff2(0x1dd)](_0x3dbff2(0x139))[_0x3dbff2(0x224)](_0x194476=>{const _0xa6a2ea=_0x3dbff2;if(_0x3aaf88[_0xa6a2ea(0x1b0)]['length']==0x0)return![];else return _0x3aaf88[_0xa6a2ea(0x1b0)][_0xa6a2ea(0x1e8)](_0x194476[_0xa6a2ea(0x1b0)]);})[_0x3dbff2(0x224)](_0x9bb71f=>{const _0x384fc9=_0x3dbff2;if(_0x3aaf88[_0x384fc9(0x1d9)]=='')return!![];else return _0x9bb71f[_0x384fc9(0x1d9)][_0x384fc9(0x13f)]()['includes'](_0x3aaf88[_0x384fc9(0x1d9)][_0x384fc9(0x13f)]());})['sortBy'](_0x3dbff2(0x1b3)),_0x216bfb=_0x261172[_0x3dbff2(0x203)]()[_0x3dbff2(0x1c3)];_0x261172=_0x261172[_0x3dbff2(0x247)]()[_0x3dbff2(0xe6)]((_0x3aaf88['page']-0x1)*logPageSize,_0x3aaf88['page']*logPageSize-0x1)[_0x3dbff2(0x247)]()['value'](),proxyEmit(_0x3dbff2(0x215),{'logs':_0x261172,'total':_0x216bfb});}else proxyEmit(_0x3dbff2(0x215),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2e3176){const _0x15a8e7=_0x500ec4;if(dbLogs[_0x15a8e7(0x252)](_0x15a8e7(0x139))[_0x15a8e7(0x203)]()){const _0x92a7cd=dbLogs[_0x15a8e7(0x1dd)](_0x15a8e7(0x139))['sortBy'](_0x15a8e7(0x1b3))['filter'](_0x4ece64=>{const _0x5e03eb=_0x15a8e7;return _0x4ece64[_0x5e03eb(0x1b0)]==_0x5e03eb(0xfd);})[_0x15a8e7(0x203)]();dbLogs[_0x15a8e7(0x1dd)](_0x15a8e7(0x139))['remove']()[_0x15a8e7(0x289)](),dbLogs[_0x15a8e7(0x1dd)](_0x15a8e7(0x139))[_0x15a8e7(0xeb)](_0x92a7cd)['write'](),emitHistory(_0x2e3176);}}async function pauseBot(_0x2bdd84=pauseBotIntervalShort,_0x4edadb,_0x1de659,_0x492711=![]){const _0x1dc7fa=_0x500ec4,_0x94b672=new Date()[_0x1dc7fa(0x132)]();if(!lastErrorShown||_0x94b672-lastErrorShown>=_0x2bdd84){lastErrorShown=_0x94b672;if(!lastBotPause)lastBotPause=_0x94b672,consecutivePauses=0x1;else{if(_0x94b672-lastBotPause-_0x2bdd84<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x492711){logHistory(_0x1dc7fa(0x1a9),_0x4edadb+_0x1dc7fa(0x163)),await killBot();return;}else logHistory(_0x1dc7fa(0x1a9),_0x4edadb+pauseBotMsg),_0x2bdd84=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x94b672;}_0x1de659?logger[_0x1dc7fa(0x276)]('('+consecutivePauses+')\x20'+_0x4edadb+_0x1dc7fa(0x269),_0x1de659):logger[_0x1dc7fa(0x276)]('('+consecutivePauses+')\x20'+_0x4edadb);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2bdd84),botPaused=![],_0x2bdd84==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x22fe6b=_0x500ec4;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x22fe6b(0x1b9)},_0x4e40c5=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3eb3a9,_0x9213ae){const _0x51fb89=_0x500ec4;if(botPaused)return;const _0x14b733=config[_0x51fb89(0x1d4)]||_0x51fb89(0x20c);if(_0x9213ae)logger[_0x51fb89(0x276)]('Exception\x20thrown\x20in\x20'+_0x9213ae);const _0x16e2f5=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x3eb3a9[_0x51fb89(0x157)]()[_0x51fb89(0x1e8)](_0x51fb89(0x24c)))logHistory(_0x51fb89(0x1a9),_0x14b733+_0x51fb89(0xda)),_0x16e2f5();else{if(_0x3eb3a9['toString']()[_0x51fb89(0x1e8)](_0x51fb89(0x197)))logHistory(_0x51fb89(0x1a9),_0x14b733+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x16e2f5();else _0x3eb3a9['toString']()['includes']('AuthenticationError')?(logHistory(_0x51fb89(0x1a9),_0x14b733+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x51fb89(0x1a9),_0x51fb89(0x145)),_0x16e2f5()):await handleError(_0x3eb3a9,null);}}async function handleError(_0x525768,_0x191225,_0xabf0f2=''){const _0x3a681a=_0x500ec4;if(botPaused)return;let _0x342040;const _0x56e728=config[_0x3a681a(0x1d4)]||_0x3a681a(0x20c);if(_0x191225)logger[_0x3a681a(0x276)](_0x3a681a(0x1df)+_0x191225);if(_0x525768['toString']()[_0x3a681a(0x1e8)](_0x3a681a(0x1eb)))_0x342040=_0x56e728+_0x3a681a(0x16b),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768['toString']()[_0x3a681a(0x1e8)](_0x3a681a(0x15b)))_0x342040=_0x56e728+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768['toString']()['includes'](_0x3a681a(0x28a))||_0x525768['toString']()[_0x3a681a(0x1e8)](_0x3a681a(0x208)))_0x342040=_0x56e728+_0x3a681a(0x1d6),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0x207)))_0x342040=_0x56e728+_0x3a681a(0x1f5),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768[_0x3a681a(0x157)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x342040=_0x56e728+_0x3a681a(0x194),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x13f)]()[_0x3a681a(0x1e8)](_0x3a681a(0x204))||_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x13f)]()[_0x3a681a(0x1e8)](_0x3a681a(0x169)))_0x342040=_0x3a681a(0x278),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0x119)))_0x342040=_0x56e728+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768 instanceof ccxt['NetworkError'])_0x342040=_0x56e728+'\x20network\x20error:\x20'+_0x525768[_0x3a681a(0x157)](),logger[_0x3a681a(0x276)](_0x3a681a(0xe9),_0x525768),await pauseBot(undefined,_0x342040,_0x525768);else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0x24c)))logHistory(_0x3a681a(0x1a9),_0x56e728+_0x3a681a(0x242)),logHistory(_0x3a681a(0x1a9),_0x3a681a(0x26c)),await killBot();else{if(_0x525768['toString']()[_0x3a681a(0x1e8)](_0x3a681a(0x197)))logHistory(_0x3a681a(0x1a9),_0x56e728+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3a681a(0x1a9),_0x3a681a(0x26c)),await killBot();else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0xff))&&_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0x174)))_0x342040=_0x56e728+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x342040,_0x525768,!![]);else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)]('AuthenticationError'))config[_0x3a681a(0x14d)]?_0x342040=_0x56e728+_0x3a681a(0x118):_0x342040=_0x56e728+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x3a681a(0x1a9),_0x342040),logHistory('error',_0x3a681a(0x26c)),await killBot();else{if(_0x525768[_0x3a681a(0x157)]()[_0x3a681a(0x1e8)](_0x3a681a(0x105)))logHistory(_0x3a681a(0x1a9),_0x56e728+_0x3a681a(0x287)),logHistory(_0x3a681a(0x1a9),_0x3a681a(0x26c)),await killBot();else{if(_0x525768['toString']()[_0x3a681a(0x1e8)](_0x3a681a(0x22c)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0xabf0f2);else{if(_0x525768 instanceof ccxt[_0x3a681a(0x275)]){_0x342040=_0x56e728+_0x3a681a(0x172)+_0x525768[_0x3a681a(0x157)](),logHistory(_0x3a681a(0x1a9),_0x342040),logger[_0x3a681a(0x276)](_0x3a681a(0x225),_0x525768);if(_0xabf0f2)logger[_0x3a681a(0x276)]('Symbol(s):\x20'+_0xabf0f2);await pauseBot(undefined,_0x342040,_0x525768);}else{_0x342040=_0x3a681a(0x270)+_0x525768[_0x3a681a(0x157)](),logHistory(_0x3a681a(0x1a9),_0x342040),logger['debug'](_0x342040+_0x3a681a(0x269),_0x525768);if(_0xabf0f2)logger[_0x3a681a(0x276)](_0x3a681a(0x10d)+_0xabf0f2);await pauseBot(undefined,_0x342040);}}}}}}}}}}}}}}}}async function withRetry(_0x48ae49,_0x308719){const _0x45a287=_0x500ec4;let _0x1ebc11=![],_0x404958=0x0,_0x3b68ca,_0x410fed;while(_0x404958<maxRetries){try{_0x3b68ca=await _0x308719();break;}catch(_0x2737be){_0x410fed=_0x2737be,!_0x1ebc11?(_0x1ebc11=!![],logger['debug'](_0x45a287(0x259)+_0x48ae49+':',_0x2737be['toString']())):await sleep(retryInterval);}_0x404958++;}if(_0x404958==0x0)return _0x3b68ca;if(_0x404958>=maxRetries)throw _0x410fed;else return logger[_0x45a287(0x276)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x404958+_0x45a287(0xf5)),_0x3b68ca;}function formatResult(_0x54db2a,_0x1d9530){const _0x104731=_0x500ec4;return parseFloat(_0x54db2a[_0x104731(0x12f)](_0x1d9530));}function formatResultTruncate(_0x2bdece,_0x55ded4){const _0x32139a=_0x500ec4;let _0x4c7373=formatResultString(_0x2bdece,0xa),_0xde47b9=_0x4c7373[_0x32139a(0x177)]('.');return _0xde47b9!=-0x1&&(_0x4c7373=_0x4c7373['slice'](0x0,_0xde47b9+_0x55ded4+0x1)),Number(_0x4c7373);}function formatResultString(_0xc0f9d7,_0x3d45d5){const _0x2dc078=_0x500ec4;let _0xa23e35;if(!(''+_0xc0f9d7)[_0x2dc078(0x1e8)]('e'))_0xa23e35=+(Math[_0x2dc078(0x15f)](_0xc0f9d7+'e+'+_0x3d45d5)+'e-'+_0x3d45d5);else{let _0x20ddb9=(''+_0xc0f9d7)[_0x2dc078(0x26d)]('e'),_0x961462='';+_0x20ddb9[0x1]+_0x3d45d5>0x0&&(_0x961462='+'),_0xa23e35=+(Math[_0x2dc078(0x15f)](+_0x20ddb9[0x0]+'e'+_0x961462+(+_0x20ddb9[0x1]+_0x3d45d5))+'e-'+_0x3d45d5);}return Number(_0xa23e35)[_0x2dc078(0x12f)](_0x3d45d5);}function getServerTime(){const _0x194749=_0x500ec4,_0x1b1385=new Date();return _0x1b1385[_0x194749(0x190)]()+'/'+(_0x1b1385[_0x194749(0xf2)]()+0x1)[_0x194749(0x157)]()[_0x194749(0xf3)](0x2,'0')+'/'+_0x1b1385[_0x194749(0x10c)]()['toString']()[_0x194749(0xf3)](0x2,'0')+'\x20'+_0x1b1385[_0x194749(0x25a)]()[_0x194749(0x157)]()['padStart'](0x2,'0')+':'+_0x1b1385[_0x194749(0x13e)]()[_0x194749(0x157)]()[_0x194749(0xf3)](0x2,'0')+':'+_0x1b1385[_0x194749(0x10a)]()[_0x194749(0x157)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x410b4d=_0x500ec4,_0x403130=shiftedTime();return _0x403130[_0x410b4d(0x190)]()+'/'+(_0x403130[_0x410b4d(0xf2)]()+0x1)[_0x410b4d(0x157)]()[_0x410b4d(0xf3)](0x2,'0')+'/'+_0x403130[_0x410b4d(0x10c)]()[_0x410b4d(0x157)]()[_0x410b4d(0xf3)](0x2,'0')+'\x20'+_0x403130['getHours']()[_0x410b4d(0x157)]()[_0x410b4d(0xf3)](0x2,'0')+':'+_0x403130['getMinutes']()[_0x410b4d(0x157)]()[_0x410b4d(0xf3)](0x2,'0')+':'+_0x403130['getSeconds']()[_0x410b4d(0x157)]()[_0x410b4d(0xf3)](0x2,'0');}function getDate(){const _0x1c4169=_0x500ec4,_0x573fe3=shiftedTime();return _0x573fe3[_0x1c4169(0x190)]()+'/'+(_0x573fe3[_0x1c4169(0xf2)]()+0x1)[_0x1c4169(0x157)]()[_0x1c4169(0xf3)](0x2,'0')+'/'+_0x573fe3[_0x1c4169(0x10c)]()[_0x1c4169(0x157)]()[_0x1c4169(0xf3)](0x2,'0');}function getHour(){const _0x5c1481=_0x500ec4,_0x52a233=shiftedTime();return _0x52a233['getHours']()[_0x5c1481(0x157)]()[_0x5c1481(0xf3)](0x2,'0');}function sleep(_0xa5789f){return new Promise(_0xae982c=>setTimeout(_0xae982c,_0xa5789f));}function shiftedTime(){const _0x44998e=_0x500ec4,_0x289f46=new Date();let _0x1bbdc8=_0x289f46;if(config&&config[_0x44998e(0xf4)]!==0x0)_0x1bbdc8=fns['add'](_0x289f46,{'hours':config[_0x44998e(0xf4)]});return _0x1bbdc8;}function timer(_0x38c729){const _0x49abd9=_0x500ec4,_0x15cc65=new Date();!lasttime?console['log'](getTimeStamp()+_0x49abd9(0x1b1),_0x38c729,_0x15cc65):console['log'](getTimeStamp()+_0x49abd9(0x1b1),_0x38c729,(_0x15cc65-lasttime)/0x3e8),lasttime=_0x15cc65;}