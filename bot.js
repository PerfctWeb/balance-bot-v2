const _0x22f3ed=_0x19f8;(function(_0x348498,_0xd88c2e){const _0x535734=_0x19f8,_0x40166f=_0x348498();while(!![]){try{const _0x422aa9=-parseInt(_0x535734(0x1fe))/0x1+-parseInt(_0x535734(0x240))/0x2*(parseInt(_0x535734(0x1ad))/0x3)+-parseInt(_0x535734(0x176))/0x4+parseInt(_0x535734(0x241))/0x5*(parseInt(_0x535734(0x1b1))/0x6)+parseInt(_0x535734(0x21a))/0x7+-parseInt(_0x535734(0x14f))/0x8*(parseInt(_0x535734(0x17b))/0x9)+parseInt(_0x535734(0x23e))/0xa*(parseInt(_0x535734(0x20c))/0xb);if(_0x422aa9===_0xd88c2e)break;else _0x40166f['push'](_0x40166f['shift']());}catch(_0xcdcfea){_0x40166f['push'](_0x40166f['shift']());}}}(_0x9780,0xb91e2));const _0xcedc82=function(){let _0x71ea41=!![];return function(_0x5bb636,_0x348652){const _0x530ee4=_0x71ea41?function(){const _0x3bf024=_0x19f8;if(_0x348652){const _0x5b0707=_0x348652[_0x3bf024(0x201)](_0x5bb636,arguments);return _0x348652=null,_0x5b0707;}}:function(){};return _0x71ea41=![],_0x530ee4;};}(),_0x1635f0=_0xcedc82(this,function(){const _0x51fb3f=_0x19f8;return _0x1635f0['toString']()[_0x51fb3f(0x172)](_0x51fb3f(0x21b))['toString']()[_0x51fb3f(0x226)](_0x1635f0)['search'](_0x51fb3f(0x21b));});_0x1635f0();'use strict';const ccxt=require(_0x22f3ed(0x217)),low=require(_0x22f3ed(0x186)),FileSync=require(_0x22f3ed(0x123)),fs=require('fs'),fns=require(_0x22f3ed(0x132)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require('hybrid-crypto-js')[_0x22f3ed(0x1c3)];let exchange,wsClient;global[_0x22f3ed(0x20e)]={},global[_0x22f3ed(0x184)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x22f3ed(0x1ea),_0x22f3ed(0x1ab),'HOT/EUR','XEM/BUSD',_0x22f3ed(0x21f),_0x22f3ed(0x143)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x22f3ed(0x180))['version'],botID=process['argv'][0x2]||_0x22f3ed(0x231),pattern=/^[0-9]{3}$/;!pattern[_0x22f3ed(0x1cd)](botID)&&(console[_0x22f3ed(0x20d)]('Error:\x20Invalid\x20argument\x20'+botID+_0x22f3ed(0x19b)),process[_0x22f3ed(0x1f6)](0x1));const userID=process[_0x22f3ed(0x221)][0x3]||'',configpath=userID?_0x22f3ed(0x12f)+userID+'/':'./config/';!fs[_0x22f3ed(0x189)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x22f3ed(0x1cf)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x22f3ed(0x1ff),performancefile=configpath+_0x22f3ed(0x1cf)+botID+_0x22f3ed(0x232),coinresultsfile=configpath+_0x22f3ed(0x1cf)+botID+'-results.json',settingsfile=configpath+_0x22f3ed(0x1b5),securefile=configpath+_0x22f3ed(0x125),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x22f3ed(0x171)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x22f3ed(0x198)]({'data':[]})[_0x22f3ed(0x171)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x22f3ed(0x198)]({'bot':[]})[_0x22f3ed(0x171)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x22f3ed(0x171)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0xdc7b54)=>{},'debug':(..._0x494893)=>{},'notice':(..._0x40827f)=>{},'info':(..._0x4912cf)=>{},'warning':(..._0x4406b1)=>{},'error':async function(..._0x5afdf1){const _0x196ce7=_0x22f3ed,_0x387f98=new Date()[_0x196ce7(0x126)]();if(!lastErrorShown||_0x387f98-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x196ce7(0x126)]();let _0x2087ae='';if(_0x5afdf1[0x0])_0x2087ae+=_0x5afdf1[0x0];if(_0x5afdf1[0x1]&&_0x5afdf1[0x1]['error']&&_0x5afdf1[0x1]['error'][_0x196ce7(0x1d6)])_0x2087ae+='\x20-\x20'+_0x5afdf1[0x1][_0x196ce7(0x185)][_0x196ce7(0x1d6)];logging(_0x196ce7(0x195)+consecutivePauses+_0x196ce7(0x12d),''+_0x2087ae),await pauseBot('Binance\x20not\x20available\x20(1)');}}},crypt=new Crypt({'md':_0x22f3ed(0x13a),'rsaStandard':_0x22f3ed(0x23f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x22f3ed(0x211)]!=config[_0x22f3ed(0x211)]&&updateTimeshift(settings[_0x22f3ed(0x211)]);process['send']({'started':'running'},_0x13abae=>{}),initializeProcessListeners();function proxyEmit(_0x1ee833,_0x53d4e1=null){const _0x161274=_0x22f3ed;process[_0x161274(0x20a)]({'function':_0x1ee833,'args':_0x53d4e1},_0x569848=>{});}function initializeProcessListeners(){const _0x1c2744=_0x22f3ed;process['on'](_0x1c2744(0x1d6),_0x6f9d66=>{const _0x525734=_0x1c2744;switch(Object[_0x525734(0x161)](_0x6f9d66)[0x0]){case _0x525734(0x211):_0x6f9d66[_0x525734(0x211)]!=undefined&&(settings[_0x525734(0x211)]=_0x6f9d66[_0x525734(0x211)],updateTimeshift(settings[_0x525734(0x211)]));break;case _0x525734(0x1bd):switch(_0x6f9d66[_0x525734(0x1bd)]){case _0x525734(0x1dc):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x525734(0x17f):emitHistory(_0x6f9d66[_0x525734(0x1e1)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x6f9d66[_0x525734(0x1e1)]);break;case _0x525734(0x13b):getPortfolio(_0x6f9d66[_0x525734(0x1e1)]);break;case _0x525734(0x150):storeConfiguration(_0x6f9d66[_0x525734(0x1e1)]);break;case _0x525734(0x169):storeHeadless(_0x6f9d66[_0x525734(0x1e1)]);break;case _0x525734(0x1a3):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x6f9d66[_0x525734(0x1e1)]);break;case _0x525734(0x166):cancelLoading();break;case _0x525734(0x1cc):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x4a537d=_0x22f3ed;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x4a537d(0x19e)],config['apiSecret']);let _0x543cdb=await loadSymbols();if(_0x543cdb){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x4a537d(0x1a5)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x44a375,_0x43bd90){const _0x7f9fdc=_0x22f3ed,_0x4dcc4a=ccxt[config[_0x7f9fdc(0x183)]];let _0x170714;switch(config[_0x7f9fdc(0x183)]){case _0x7f9fdc(0x1d5):_0x170714='wss://stream.binance.com:9443';break;case'binanceus':_0x170714=_0x7f9fdc(0x152);break;default:_0x170714='wss://stream.binance.com:9443';}exchange=new _0x4dcc4a({'apiKey':_0x44a375,'secret':_0x43bd90,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x44a375,'api_secret':_0x43bd90,'beautify':!![],'wsUrl':_0x170714},logger);!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x7f9fdc(0x137),_0x149e04=>{const _0xe680e3=_0x7f9fdc;if(isWsFormattedKline(_0x149e04)){global[_0xe680e3(0x20e)][_0x149e04[_0xe680e3(0x144)][_0xe680e3(0x1aa)]]=_0x149e04[_0xe680e3(0x144)]['close'];return;}else{if(isWsFormatted24hrTicker(_0x149e04)){global[_0xe680e3(0x184)][_0x149e04[_0xe680e3(0x1aa)]]=_0x149e04[_0xe680e3(0x19a)];return;}else{if(!Array['isArray'](_0x149e04)&&_0x149e04['wsKey'][_0xe680e3(0x1bf)]('userData')){if(_0x149e04[_0xe680e3(0x1f7)][_0xe680e3(0x1bf)](_0xe680e3(0x1b3))){updateNumberCoins(_0x149e04);return;}}}}}),wsClient['on'](_0x7f9fdc(0x23c),async _0x4c2c38=>{if(!botPaused)currentCoins=await getCoins(!![]);}));let _0x4a80b0=config[_0x7f9fdc(0x183)]=='binanceus'?'USDT':_0x7f9fdc(0x1cb),_0x3d0913=config['basecoin']==_0x7f9fdc(0x18a)?'ETH':_0x7f9fdc(0x1e8);stablecoins={'eur':{'coin':''+_0x3d0913+_0x4a80b0,'symbol':_0x3d0913+'/'+_0x4a80b0},'usd':{'coin':_0x3d0913+_0x7f9fdc(0x181),'symbol':_0x3d0913+_0x7f9fdc(0x13e)}};}async function loadSymbols(){const _0x403867=_0x22f3ed;let _0x22029a;try{markets=await exchange['loadMarkets'](),allSymbols=exchange['symbols'][_0x403867(0x1a2)](_0x3ac3b5=>{const _0x4d100=_0x403867;let _0x3172af=![];return exceptions[_0x4d100(0x197)](_0x11b1be=>{const _0x56b88a=_0x4d100;if(_0x3ac3b5[_0x56b88a(0x1bf)](_0x11b1be))_0x3172af=!![];}),!_0x3172af;}),_0x22029a=!![];}catch(_0x40b282){await handleError(_0x40b282,'loadSymbols()'),_0x22029a=![];}return _0x22029a;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x1853f8=_0x22f3ed;proxyEmit(_0x1853f8(0x224),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1853f8(0x136),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x14bb28=getNormalizedPerformance();emitPerformance(_0x14bb28),await getStartingBalances(_0x14bb28);}async function toggleBotMode(){const _0x513eb1=_0x22f3ed;let _0x1dc033=dbConfig[_0x513eb1(0x191)](_0x513eb1(0x205))[_0x513eb1(0x1db)]({'botID':botID})[_0x513eb1(0x1c1)]();if(_0x1dc033){const _0x124096=!_0x1dc033[_0x513eb1(0x1fc)];dbConfig[_0x513eb1(0x191)]('bot')[_0x513eb1(0x1db)]({'botID':botID})['assign']({'headless':_0x124096})[_0x513eb1(0x171)](),config[_0x513eb1(0x1fc)]=_0x124096,proxyEmit(_0x513eb1(0x224),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x840281=_0x22f3ed;process[_0x840281(0x20a)]({'updatebotmanager':!![]},_0x181257=>{});}function cleanws(){const _0x3148c9=_0x22f3ed;wsinitialized=![];ws1&&(ws1['forEach'](_0x4e700b=>{try{wsClient['close'](_0x4e700b);}catch(_0x1a8f57){}}),ws1=[]);if(ws2){try{wsClient[_0x3148c9(0x153)](ws2);}catch(_0x549773){}ws2=null;}ws3&&(ws3[_0x3148c9(0x197)](_0x3594ba=>{try{wsClient['close'](_0x3594ba);}catch(_0x37a0fa){}}),ws3=[]);}async function initws(){const _0x3985e9=_0x22f3ed;cleanws();let _0x5e1c9f=[];currentCoins[_0x3985e9(0x197)](_0x40fdce=>{const _0x1886bb=_0x3985e9;if(_0x40fdce[_0x1886bb(0x15b)]!=config[_0x1886bb(0x1dd)])_0x5e1c9f[_0x1886bb(0x164)](_0x40fdce[_0x1886bb(0x1aa)]);});if(!_0x5e1c9f[_0x3985e9(0x1bf)](stablecoins[_0x3985e9(0x16f)][_0x3985e9(0x1aa)]))_0x5e1c9f[_0x3985e9(0x164)](stablecoins['eur'][_0x3985e9(0x1aa)]);if(!_0x5e1c9f['includes'](stablecoins[_0x3985e9(0x147)][_0x3985e9(0x1aa)]))_0x5e1c9f[_0x3985e9(0x164)](stablecoins[_0x3985e9(0x147)]['symbol']);if(!_0x5e1c9f['includes'](_0x3985e9(0x214)+config[_0x3985e9(0x1dd)]))_0x5e1c9f[_0x3985e9(0x164)]('BNB/'+config[_0x3985e9(0x1dd)]);try{_0x5e1c9f['forEach']((_0x5d05b0,_0xf6c0fd)=>{const _0x1b4cb9=_0x3985e9;ws1[_0xf6c0fd]=wsClient[_0x1b4cb9(0x22d)](noslash(_0x5d05b0),'1m'),ws3[_0xf6c0fd]=wsClient['subscribeSymbol24hrTicker'](noslash(_0x5d05b0),_0x1b4cb9(0x1b3));}),ws2=wsClient[_0x3985e9(0x1ac)]();}catch(_0x2ed1ed){await handleError(_0x2ed1ed,_0x3985e9(0x140));}let _0x3df731,_0x5f0a1b=0x0;loading[_0x3985e9(0x177)]=[];let _0x9e74ac=0x0;_0x5e1c9f[_0x3985e9(0x197)](_0x144203=>{loading['remainingSymbols']['push'](_0x144203);}),loadingCanceled=![];let _0x35ed91=![];while(_0x3df731!=_0x5e1c9f[_0x3985e9(0x1a5)]){_0x3df731=0x0,_0x5e1c9f[_0x3985e9(0x197)](_0x2cf0b8=>{const _0xc85bf=_0x3985e9;global[_0xc85bf(0x20e)][noslash(_0x2cf0b8)]&&(loading[_0xc85bf(0x177)]=loading[_0xc85bf(0x177)]['filter'](_0x5502a9=>_0x5502a9!=_0x2cf0b8),_0x3df731++);}),loading['progress']=Math['round'](_0x3df731/_0x5e1c9f[_0x3985e9(0x1a5)]*0x64);loading[_0x3985e9(0x1de)]!=0x64&&(_0x9e74ac>0x1e*0x5&&(loading[_0x3985e9(0x196)]=!![],emitLoadingProgress()),_0x9e74ac>0x3c*0x5&&!_0x35ed91&&(_0x35ed91=!![],logHistory('error',_0x3985e9(0x18c)+loading[_0x3985e9(0x177)]+_0x3985e9(0x203))));if(loadingCanceled){loading[_0x3985e9(0x207)]=!![],emitLoadingProgress();break;}else _0x3df731!=_0x5f0a1b&&(_0x5f0a1b=_0x3df731,emitLoadingProgress()),_0x9e74ac++,await sleep(0xc8);}_0x35ed91&&logHistory(_0x3985e9(0x162),_0x3985e9(0x14d));if(_0x3df731==_0x5e1c9f[_0x3985e9(0x1a5)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0xbe41a6=_0x22f3ed;proxyEmit(_0xbe41a6(0x17d),loading);}async function getFiat(){const _0x276f8c=_0x22f3ed;let _0x1872be=0x0,_0x2593a6=0x0;try{_0x1872be=global[_0x276f8c(0x20e)][stablecoins[_0x276f8c(0x16f)][_0x276f8c(0x15b)]],_0x2593a6=global[_0x276f8c(0x20e)][stablecoins[_0x276f8c(0x147)][_0x276f8c(0x15b)]];}catch(_0x1e30b0){await handleError(_0x1e30b0,_0x276f8c(0x220));}return{'eur':Number(_0x1872be),'usd':Number(_0x2593a6)};}function setStartDatePerformance(){const _0x3163dd=_0x22f3ed;if(config&&config[_0x3163dd(0x154)][0x0][_0x3163dd(0x1da)][_0x3163dd(0x1a5)]!=0x0){const _0x5297a4=config[_0x3163dd(0x154)][0x0]['changes'];dbPerformance[_0x3163dd(0x191)](_0x3163dd(0x18d))['find']({'date':config['startdate']})['assign']({'coins':_0x5297a4})['write']();}}async function recreateCoinResults(){const _0x2d9f44=_0x22f3ed;let _0x34a0fd,_0x26056f=[];try{const _0x4d15d9=fns[_0x2d9f44(0x178)](fns[_0x2d9f44(0x146)](config[_0x2d9f44(0x246)][_0x2d9f44(0x19d)](/\//g,'-')),_0x2d9f44(0x16d));for(const _0x4c5206 of currentCoins){if(_0x4c5206[_0x2d9f44(0x15b)]!=config[_0x2d9f44(0x1dd)]){let _0xa9c641=0x0,_0x1a26ee,_0x2649cd;_0x34a0fd=await getAllEventOrders(_0x4c5206[_0x2d9f44(0x1aa)]);if(_0x34a0fd[_0x2d9f44(0x1a5)]>0x0)_0x34a0fd[_0x2d9f44(0x197)](_0x1dce6e=>{const _0x5712b1=_0x2d9f44,_0x369577=_0x4c5206['symbol'][_0x5712b1(0x1bf)](config[_0x5712b1(0x1dd)]+'/');_0x26056f['push']({'datetime':_0x1dce6e[_0x5712b1(0x1f8)],'coin':_0x4c5206[_0x5712b1(0x15b)],'symbol':_0x4c5206[_0x5712b1(0x1aa)],'side':_0x1dce6e[_0x5712b1(0x187)],'reverse':_0x369577,'amount':formatResult(_0x1dce6e[_0x5712b1(0x20b)],0x8),'filled':formatResult(_0x1dce6e[_0x5712b1(0x20b)],0x8),'price':formatResult(_0x1dce6e[_0x5712b1(0x12e)],0x8)}),_0xa9c641=_0x1dce6e[_0x5712b1(0x187)]==_0x5712b1(0x14e)?_0xa9c641+_0x1dce6e[_0x5712b1(0x20b)]:_0xa9c641-_0x1dce6e[_0x5712b1(0x20b)];if(!_0x2649cd)_0x2649cd=_0x1dce6e[_0x5712b1(0x12e)];});_0x1a26ee=_0x4c5206['number']-_0xa9c641;let _0x458fa3;config[_0x2d9f44(0x154)][_0x2d9f44(0x197)](_0x27a9b1=>{const _0x11714b=_0x2d9f44;!_0x458fa3&&(_0x458fa3=_0x27a9b1[_0x11714b(0x1da)][_0x11714b(0x1db)](_0x4841b9=>_0x4841b9[_0x11714b(0x15b)]==_0x4c5206[_0x11714b(0x15b)]),_0x458fa3&&(_0x1a26ee=_0x458fa3[_0x11714b(0x209)],_0x2649cd=_0x458fa3[_0x11714b(0x12e)]));});let _0x5ced31=dbCoinResults[_0x2d9f44(0x191)](_0x2d9f44(0x1f5))[_0x2d9f44(0x1db)]({'coin':_0x4c5206[_0x2d9f44(0x15b)]})[_0x2d9f44(0x1c1)]();_0x5ced31={'coin':_0x4c5206[_0x2d9f44(0x15b)],'number':_0x1a26ee,'breakeven':_0x2649cd,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2d9f44(0x191)](_0x2d9f44(0x1f5))[_0x2d9f44(0x1db)]({'coin':_0x4c5206[_0x2d9f44(0x15b)]})[_0x2d9f44(0x22b)](_0x5ced31)['write']();}}_0x26056f[_0x2d9f44(0x1e0)]((_0x27a38c,_0x18c631)=>_0x27a38c[_0x2d9f44(0x1f8)]>_0x18c631['datetime']?0x1:_0x18c631[_0x2d9f44(0x1f8)]>_0x27a38c['datetime']?-0x1:0x0);let _0x15f550=0x0;for(let _0x2e71ef of _0x26056f){await updateCoinResults(_0x2e71ef,!![]);}}catch(_0x4250a1){await handleError(_0x4250a1,'recreateCoinResults()');}}async function getAllEventOrders(_0x1b0151){const _0x2f72c3=_0x22f3ed;let _0x663b60=[],_0x1fbfed=dbLogs['get']('logs')[_0x2f72c3(0x1a2)](_0x300959=>{const _0x5164f0=_0x2f72c3,_0x58cdc2=_0x300959[_0x5164f0(0x141)][_0x5164f0(0x1c4)]();return _0x58cdc2[_0x5164f0(0x1bf)](_0x1b0151['toLowerCase']())&&(_0x58cdc2[_0x5164f0(0x1bf)]('market')&&_0x58cdc2[_0x5164f0(0x1bf)](_0x5164f0(0x1d3))||_0x58cdc2[_0x5164f0(0x1bf)]('filled')&&_0x58cdc2['includes']('order'));})[_0x2f72c3(0x1d9)](_0x2f72c3(0x21e))[_0x2f72c3(0x1c1)]();return _0x1fbfed['forEach'](_0x108a69=>{const _0x1328e5=_0x2f72c3,_0x3d5150=_0x108a69['event'][_0x1328e5(0x1bf)](_0x1328e5(0x23d))?_0x1328e5(0x23d):_0x1328e5(0x14e),_0x2dbcda=/#([0-9]|\.)+\s/i,_0x382684=Number(_0x2dbcda[_0x1328e5(0x145)](_0x108a69[_0x1328e5(0x141)])[0x0][_0x1328e5(0x244)](0x1)),_0x5d42d6=/@([0-9]|\.)+$/i,_0x47100e=Number(_0x5d42d6[_0x1328e5(0x145)](_0x108a69[_0x1328e5(0x141)])[0x0][_0x1328e5(0x244)](0x1));_0x663b60[_0x1328e5(0x164)]({'datetime':_0x108a69['time'],'coin':symbolToCoin(_0x1b0151),'symbol':_0x1b0151,'side':_0x3d5150,'amount':_0x382684,'filled':_0x382684,'price':_0x47100e});}),_0x663b60;}async function getAllOrders(_0x2d1ecb,_0x32a732){const _0x21f5ca=_0x22f3ed;let _0x129fb9=[];while(_0x32a732<exchange[_0x21f5ca(0x158)]()){const _0x78530=0x1f4,_0x289e48=await exchange[_0x21f5ca(0x1e9)](_0x2d1ecb,_0x32a732,_0x78530);if(_0x289e48[_0x21f5ca(0x1a5)])_0x32a732=_0x289e48[_0x289e48[_0x21f5ca(0x1a5)]-0x1][_0x21f5ca(0x17e)]+0x1,_0x129fb9=_0x129fb9[_0x21f5ca(0x1d1)](_0x289e48);else break;}return _0x129fb9;}async function validate24hChanges(){const _0x2ba044=_0x22f3ed;let _0x478d08;for(const _0x3a027e of currentCoins){if(_0x3a027e[_0x2ba044(0x15b)]!=config['basecoin']){let _0x490a86;_0x3a027e[_0x2ba044(0x167)]?_0x490a86=formatResult((0x1/(global[_0x2ba044(0x184)][noslash(_0x3a027e[_0x2ba044(0x1aa)])]/0x64+0x1)-0x1)*0x64,0x3):_0x490a86=global[_0x2ba044(0x184)][noslash(_0x3a027e[_0x2ba044(0x1aa)])],_0x490a86<config[_0x2ba044(0x1b6)]&&(logHistory(_0x2ba044(0x185),_0x3a027e['coin']+_0x2ba044(0x1a1)+_0x490a86+'%'),logHistory(_0x2ba044(0x185),_0x2ba044(0x1ec)),logHistory(_0x2ba044(0x185),_0x2ba044(0x165)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x140985=_0x22f3ed;let _0xf76ae9=dbLogs[_0x140985(0x191)](_0x140985(0x210))[_0x140985(0x1c1)]();if(_0xf76ae9!=_0x140985(0x194)){dbLogs[_0x140985(0x15c)](_0x140985(0x210),_0x140985(0x194))[_0x140985(0x171)]();let _0x36132b=[];const _0x2a95f3=dbLogs[_0x140985(0x191)]('logs')[_0x140985(0x1c1)]();_0x2a95f3[_0x140985(0x197)](_0x3ac73e=>{const _0x5ca083=_0x140985;_0x36132b[_0x5ca083(0x164)]({'time':_0x3ac73e[_0x5ca083(0x21e)],'type':_0x3ac73e[_0x5ca083(0x1b4)],'event':_0x3ac73e[_0x5ca083(0x141)]});}),dbLogs[_0x140985(0x191)](_0x140985(0x1b9))[_0x140985(0x22b)](_0x36132b)[_0x140985(0x171)]();}let _0x5d7320=dbConfig['get'](_0x140985(0x210))['value']();if(_0x5d7320!=_0x140985(0x194)){dbConfig[_0x140985(0x15c)](_0x140985(0x210),_0x140985(0x194))['write']();let _0x33f01a=dbConfig[_0x140985(0x191)](_0x140985(0x205))['find']({'botID':botID})['value']();if(_0x33f01a){let _0x3629b5=[];_0x33f01a['portfolio'][_0x140985(0x197)](_0x1e787b=>{const _0x236239=_0x140985;_0x3629b5[_0x236239(0x164)]({'coin':_0x1e787b[_0x236239(0x15b)],'number':_0x1e787b[_0x236239(0x192)],'price':_0x1e787b[_0x236239(0x1d0)]}),delete _0x1e787b[_0x236239(0x192)],delete _0x1e787b[_0x236239(0x1d0)];});if(_0x3629b5[_0x140985(0x1a5)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x140985(0x124)](_0x3629b5,null,0x4),function(_0x33e37c){if(_0x33e37c){}});const _0x17b301=(_0x273f0f,_0x2f3123)=>{const _0x112861=_0x140985;let _0x473d48=[];_0x2f3123['forEach'](_0xcbc079=>{const _0x45429a=_0x19f8,_0x4e0032=_0x273f0f[_0x45429a(0x1db)](_0x514ab8=>_0x514ab8[_0x45429a(0x15b)]==_0xcbc079[_0x45429a(0x15b)]);if(!_0x4e0032)_0x473d48[_0x45429a(0x164)](_0xcbc079);});let _0x377fe9=[];return _0x273f0f[_0x112861(0x197)](_0x12de92=>{const _0x1a33a3=_0x112861,_0x191adf=_0x2f3123[_0x1a33a3(0x1db)](_0x326b0a=>_0x326b0a[_0x1a33a3(0x15b)]==_0x12de92['coin']);if(!_0x191adf||_0x191adf['number']==0x0&&_0x12de92[_0x1a33a3(0x209)]!=0x0)_0x377fe9[_0x1a33a3(0x164)](_0x12de92);}),{'missingDay1':_0x473d48,'notInDay2':_0x377fe9};},_0x867a1d=dbPerformance[_0x140985(0x191)]('data')[_0x140985(0x1f3)]()['value']();if(_0x867a1d[_0x140985(0x1a5)]>0x1){const {missingDay1:_0x44f1a3,notInDay2:_0x199464}=_0x17b301(_0x3629b5,_0x867a1d[0x1][_0x140985(0x1f5)]);_0x3629b5=[..._0x3629b5,..._0x44f1a3],_0x199464[_0x140985(0x197)](_0x449ea9=>{const _0x322153=_0x140985;let _0x1aaad4=_0x3629b5['findIndex'](_0x4327b2=>_0x4327b2['coin']==_0x449ea9[_0x322153(0x15b)]);_0x1aaad4!=-0x1&&_0x3629b5[_0x322153(0x16b)](_0x1aaad4,0x1);});}_0x3629b5[_0x140985(0x1e0)]((_0x22cd4a,_0x2be1fc)=>_0x22cd4a[_0x140985(0x15b)]>_0x2be1fc['coin']?0x1:_0x2be1fc[_0x140985(0x15b)]>_0x22cd4a['coin']?-0x1:0x0);let _0x4bdcab=[{'date':_0x33f01a[_0x140985(0x246)],'changes':_0x3629b5}];_0x867a1d[_0x140985(0x1a5)]>0x2&&_0x867a1d[_0x140985(0x197)]((_0x70d79a,_0x5c0adc)=>{const _0x3f2bfa=_0x140985;if(_0x5c0adc>0x0&&_0x5c0adc<_0x867a1d[_0x3f2bfa(0x1a5)]-0x1){const {missingDay1:_0xdfdb49,notInDay2:_0x21859c}=_0x17b301(_0x867a1d[_0x5c0adc][_0x3f2bfa(0x1f5)],_0x867a1d[_0x5c0adc+0x1][_0x3f2bfa(0x1f5)]);_0x3629b5=[],(_0xdfdb49[_0x3f2bfa(0x1a5)]!=0x0||_0x21859c[_0x3f2bfa(0x1a5)]!=0x0)&&(_0xdfdb49[_0x3f2bfa(0x1a5)]!=0x0&&_0x3629b5[_0x3f2bfa(0x164)](..._0xdfdb49),_0x21859c['length']!=0x0&&(_0x21859c['forEach'](_0x208574=>{const _0x1d2931=_0x3f2bfa;_0x208574[_0x1d2931(0x209)]=-_0x208574[_0x1d2931(0x209)];}),_0x3629b5[_0x3f2bfa(0x164)](..._0x21859c)),_0x3629b5[_0x3f2bfa(0x1e0)]((_0x505edc,_0x392cea)=>_0x505edc[_0x3f2bfa(0x15b)]>_0x392cea[_0x3f2bfa(0x15b)]?0x1:_0x392cea['coin']>_0x505edc['coin']?-0x1:0x0),_0x4bdcab[_0x3f2bfa(0x164)]({'date':_0x867a1d[_0x5c0adc+0x1][_0x3f2bfa(0x170)],'changes':_0x3629b5}));}}),dbConfig['get'](_0x140985(0x205))[_0x140985(0x1db)]({'botID':botID})[_0x140985(0x22b)]({..._0x33f01a,'liquidity':_0x4bdcab})[_0x140985(0x171)]();}}config=getConfiguration(botID);let _0x3166d6=dbPerformance['get']('version')[_0x140985(0x1c1)]();_0x3166d6!=_0x140985(0x194)&&(dbPerformance[_0x140985(0x15c)](_0x140985(0x210),_0x140985(0x194))['write'](),setStartDatePerformance());let _0x3e8d3f=dbCoinResults[_0x140985(0x191)](_0x140985(0x210))[_0x140985(0x1c1)]();if(_0x3e8d3f!=_0x140985(0x237)){dbCoinResults['set'](_0x140985(0x210),'2.5.0')[_0x140985(0x171)]();let _0x509d95=dbCoinResults[_0x140985(0x191)]('coins')[_0x140985(0x1c1)]();if(_0x509d95[_0x140985(0x1a5)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x2d629e){const _0x2d1e47=_0x22f3ed;let _0x327078=dbConfig[_0x2d1e47(0x191)](_0x2d1e47(0x205))[_0x2d1e47(0x1db)]({'botID':_0x2d629e})[_0x2d1e47(0x1c1)]();if(_0x327078){let _0x31806d=![];typeof _0x327078[_0x2d1e47(0x242)]==_0x2d1e47(0x1f4)&&(_0x327078={..._0x327078,'threshold':Number(_0x327078[_0x2d1e47(0x242)])},_0x31806d=!![]),_0x327078[_0x2d1e47(0x1b6)]==null&&(_0x327078={..._0x327078,'change24h':-0x14},_0x31806d=!![]),_0x31806d&&(_0x327078={'botID':_0x327078['botID'],'exchange':_0x327078[_0x2d1e47(0x183)],'apiKey':_0x327078['apiKey'],'apiSecret':_0x327078[_0x2d1e47(0x1fb)],'basecoin':_0x327078[_0x2d1e47(0x1dd)],'botname':_0x327078[_0x2d1e47(0x1a7)],'showname':_0x327078[_0x2d1e47(0x18f)],'threshold':_0x327078[_0x2d1e47(0x242)],'ordertype':_0x327078[_0x2d1e47(0x213)],'timeout':_0x327078['timeout'],'startdate':_0x327078['startdate'],'recreate':_0x327078['recreate'],'timeshift':_0x327078[_0x2d1e47(0x211)],'headless':_0x327078[_0x2d1e47(0x1fc)],'cooldown':_0x327078[_0x2d1e47(0x219)],'change24h':_0x327078[_0x2d1e47(0x1b6)],'emojibuy':_0x327078[_0x2d1e47(0x206)],'emojisell':_0x327078[_0x2d1e47(0x129)],'portfolio':_0x327078[_0x2d1e47(0x148)],'liquidity':_0x327078[_0x2d1e47(0x154)]},dbConfig[_0x2d1e47(0x191)]('bot')['remove']()[_0x2d1e47(0x171)](),dbConfig[_0x2d1e47(0x191)](_0x2d1e47(0x205))[_0x2d1e47(0x164)](_0x327078)[_0x2d1e47(0x171)]());}else _0x327078={'botID':_0x2d629e,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x2d629e,'showname':![],'threshold':0x3,'ordertype':_0x2d1e47(0x1ba),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2d1e47(0x211)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x327078;}function emittedConfiguration(){const _0x3275f4=_0x22f3ed;let _0x2ba781;return config['apiKey']==''?_0x2ba781=config:_0x2ba781={...config,'apiKey':_0x3275f4(0x236),'apiSecret':_0x3275f4(0x236)},_0x2ba781;}function getSettings(){const _0x402671=_0x22f3ed;return dbSettings['get'](_0x402671(0x1e2))[_0x402671(0x1c1)]();}function getSecure(){return dbSecure['get']('secure')['value']()||{};}function updateTimeshift(_0x23ff69){const _0x283fc7=_0x22f3ed;let _0xb872b6=dbConfig[_0x283fc7(0x191)](_0x283fc7(0x205))['find']({'botID':botID})['value']();_0xb872b6&&dbConfig[_0x283fc7(0x191)](_0x283fc7(0x205))['find']({'botID':botID})[_0x283fc7(0x22b)]({'timeshift':_0x23ff69})['write'](),config[_0x283fc7(0x211)]=_0x23ff69,proxyEmit(_0x283fc7(0x224),emittedConfiguration());}async function storeConfiguration(_0x24408f){const _0x543f55=_0x22f3ed;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x14c791=dbConfig['get'](_0x543f55(0x205))[_0x543f55(0x1db)]({'botID':botID})[_0x543f55(0x1c1)]();_0x24408f={..._0x24408f,'apiKey':crypt['decrypt'](secure['privateKey'],_0x24408f['apiKey'])[_0x543f55(0x1d6)],'apiSecret':crypt[_0x543f55(0x1b7)](secure['privateKey'],_0x24408f[_0x543f55(0x1fb)])[_0x543f55(0x1d6)]};if(_0x14c791){if(_0x24408f['apiKey']==_0x543f55(0x236))_0x24408f[_0x543f55(0x19e)]=config[_0x543f55(0x19e)];if(_0x24408f[_0x543f55(0x1fb)]=='************')_0x24408f[_0x543f55(0x1fb)]=config[_0x543f55(0x1fb)];dbConfig[_0x543f55(0x191)](_0x543f55(0x205))[_0x543f55(0x1db)]({'botID':botID})[_0x543f55(0x22b)](_0x24408f)[_0x543f55(0x171)]();}else dbConfig[_0x543f55(0x191)](_0x543f55(0x205))['push'](_0x24408f)[_0x543f55(0x171)](),process[_0x543f55(0x20a)]({'status':'enabled','live':_0x543f55(0x127)},_0xe82ea6=>{});config={..._0x24408f},setStartDatePerformance(),process['send']({'botname':_0x24408f[_0x543f55(0x1a7)]},_0x2d8eab=>{}),updateBotManager();const _0x15b916=getNormalizedPerformance();getStartingBalances(_0x15b916),emitPerformance(_0x15b916),proxyEmit('configuration-stored'),await initCoinResults(),reset();}async function storeHeadless(_0x256830){const _0x48fbae=_0x22f3ed,_0x142bc5={...config,'headless':_0x256830[_0x48fbae(0x1fc)]};let _0x5c498f=dbConfig[_0x48fbae(0x191)](_0x48fbae(0x205))['find']({'botID':botID})[_0x48fbae(0x1c1)]();_0x5c498f&&dbConfig[_0x48fbae(0x191)]('bot')[_0x48fbae(0x1db)]({'botID':botID})['assign'](_0x142bc5)[_0x48fbae(0x171)](),config={..._0x142bc5},updateBotManager(),proxyEmit(_0x48fbae(0x224),emittedConfiguration());}function noslash(_0x3adcb0){return _0x3adcb0['replace']('/','');}async function updateNumberCoins(_0x1ec5f9){const _0x556aa0=_0x22f3ed;console['log'](_0x1ec5f9);if(_0x1ec5f9['eventType']&&_0x1ec5f9[_0x556aa0(0x128)]==_0x556aa0(0x238)){if(_0x1ec5f9['eventTime']!=lastOutboundEventTime){lastOutboundEventTime=_0x1ec5f9['eventTime'],currentCoins=await getCoins(!![]);if(lastBalances){let _0x3236fc=JSON[_0x556aa0(0x1df)](lastBalances[_0x556aa0(0x148)]);_0x3236fc[_0x556aa0(0x197)](_0x5ab916=>{const _0xed8d54=_0x556aa0,_0x4d3ae9=currentCoins['find'](_0x1cbd1d=>_0x1cbd1d[_0xed8d54(0x15b)]==_0x5ab916[_0xed8d54(0x15b)]);if(_0x4d3ae9[_0xed8d54(0x1d3)])_0x5ab916[_0xed8d54(0x1d3)]=_0x4d3ae9[_0xed8d54(0x1d3)];}),lastBalances={...lastBalances,'portfolio':JSON[_0x556aa0(0x124)](_0x3236fc)},proxyEmit(_0x556aa0(0x136),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x1ec5f9[_0x556aa0(0x128)]&&_0x1ec5f9[_0x556aa0(0x128)]==_0x556aa0(0x233)){if(_0x1ec5f9['orderStatus']==_0x556aa0(0x239)){if(lastOrders)lastOrders[_0x556aa0(0x197)](async _0xd11cfb=>{const _0xc7dea7=_0x556aa0;_0xd11cfb['orderId']==_0x1ec5f9[_0xc7dea7(0x243)]&&_0xd11cfb['filled']==0x0&&(_0xd11cfb[_0xc7dea7(0x12e)]=_0x1ec5f9[_0xc7dea7(0x133)]/_0x1ec5f9[_0xc7dea7(0x15d)],_0xd11cfb[_0xc7dea7(0x20b)]=_0x1ec5f9[_0xc7dea7(0x15d)],_0xd11cfb[_0xc7dea7(0x1e3)]={'cost':_0x1ec5f9[_0xc7dea7(0x20f)],'currency':_0x1ec5f9[_0xc7dea7(0x21c)]},await validateOrders(),await updateCoinResults(_0xd11cfb));});}}}function _0x9780(){const _0x4b6ac6=['breakeven','entries','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','buy','320qPeNbt','storeConfiguration','Bot\x20','wss://stream.binance.us:9443','close','liquidity','API-key\x20format\x20invalid','event-history','\x20minutes\x20-\x20','milliseconds','getPortfolio()','InvalidNonce','coin','set','accumulatedQuantity','toString','placeOrder()','limit','keys','success','fetchOpenOrders','push','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','cancelLoading','reverse','cancelOrder','storeHeadless','isEqual','splice','delta','yyyy-MM-dd\x27T\x27HH:mm:ss','distribution','eur','date','write','search','limits','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ExchangeNotAvailable','2032688jmXrnd','remainingSymbols','format','getMonth','initial','329661HFGKMt','\x20|\x20Error\x20details:\x20','coin-loading-progress','timestamp','emitHistory','./version.json','USDT','-------------------------------\x0a','exchange','change','error','lowdb','side','No\x20more\x20open\x20orders\x20-\x20','existsSync','ETH','page','Failed\x20to\x20load\x20coin\x20data\x20for\x20','data','cost','showname','padEnd','get','startnumber','has','2.3.5','WebSockets(','timeout','forEach','defaults','InsufficientFunds','priceChangePercent',',\x20must\x20be\x20a\x203\x20digit\x20number','starting-balances','replace','apiKey','target','Unknown\x20error\x20occured','\x20has\x20a\x2024h\x20drop\x20of\x20','filter','getStartingBalances','\x20orders\x20in\x20less\x20than\x20','length','\x20|\x20Binance\x20API\x20key\x20invalid','botname','map','offset','symbol','HOT/BTC','subscribeSpotUserDataStream','435621QNaOHo','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20order:\x20','excluded','3078078kqpsZh','sells','spot','type','bb-settings.json','change24h','decrypt','BUSD','logs','market','trade','getMinutes','function','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','includes','differenceInSeconds','value','BNB','Crypt','toLowerCase','fromCodePoint','Order(s)\x20filled\x20-\x20','padStart','precision','MIN_NOTIONAL','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','EUR','sendPortfolioTelegram','test',':\x20Bot\x20','bot-','startprice','concat','valid','order','final','binance','message','Binance\x20not\x20available\x20(2)','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','sortBy','changes','find','initclient','basecoin','progress','parse','sort','args','settings','fee','Manual\x20balancing\x20required:\x20','amount','kill','Binance\x20API\x20blocked','BTC','fetchClosedOrders','DAI/','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','RequestTimeout','fetchBalance','restart','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','shift','getFullYear','cloneDeep','string','coins','exit','wsMarket','datetime','yyyy/MM/dd','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apiSecret','headless','Order\x20filled:\x20','1410558WbzBxo','-events.json','\x20-\x20','apply','round','\x20-\x20bot\x20not\x20started','limit-high','bot','emojibuy','cancel','realized','number','send','filled','44YKhByj','log','ticker','commission','version','timeshift','<pre>','ordertype','BNB/','min','createOrder','ccxt','no\x20open\x20orders','cooldown','9890237KkrYSX','(((.+)+)+)+$','commissionAsset','balancing\x20resumes\x20when\x20cooldown\x20ends','time','NANO/','getFiat()','argv','fees','abs','configuration','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','constructor','\x20>\x20','toFixed','limit-low','\x20|\x20Binance\x20API\x20secret\x20invalid','assign','remove','subscribeSpotKline','indexOf','AuthenticationError','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','001','-performance.json','executionReport','buys','max','************','2.5.0','outboundAccountPosition','FILLED','\x20|\x20','currency','reconnected','sell','8444710BlksmZ','RSA-OAEP','16CBRndZ','5OOoxmS','threshold','orderId','slice','last','startdate','fetchTickers','getCoins()','split','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','lowdb/adapters/FileSync','stringify','bb-secure.json','getTime','running','eventType','emojisell','\x20portfolio:\x20\x0a\x0a','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order(s)\x20not\x20validated\x20after\x20',')\x20|\x20Error\x20details:\x20','price','./config/','performance','getHours','date-fns','cumulativeQuoteAssetTransactedQty','ask','Pausing\x20for\x20','balances','formattedMessage','getSeconds','Binance\x20API\x20key\x20is\x20invalid','sha256','getPortfolio','OrderNotFound','getDate','/USDT','</pre>','initws()','event','Order\x20amount\x20is\x20invalid:\x20','YOYOW/','kline','exec','parseISO','usd','portfolio','ongoing','total'];_0x9780=function(){return _0x4b6ac6;};return _0x9780();}async function getCoins(_0x34d21e=![],_0x21ce17=!![],_0x2bfa68=config['basecoin']){const _0x494d38=_0x22f3ed;let _0x56ef45,_0x121a1e=[],_0x4c230b=[],_0x513b39=[];try{_0x56ef45=await exchange[_0x494d38(0x1ee)](),mybalances=_0x56ef45[_0x494d38(0x14a)];if(!_0x21ce17)for(const [_0x1e4939,_0x180a41]of Object[_0x494d38(0x14c)](mybalances)){_0x513b39[_0x494d38(0x164)](_0x1e4939);}else config[_0x494d38(0x148)][_0x494d38(0x197)](_0x3d7ba6=>{const _0x18140a=_0x494d38;if(!_0x3d7ba6[_0x18140a(0x1b0)])_0x513b39[_0x18140a(0x164)](_0x3d7ba6[_0x18140a(0x15b)]);});if(_0x2bfa68=='')for(const [_0x226828,_0x388719]of Object[_0x494d38(0x14c)](mybalances)){_0x388719[_0x494d38(0x15e)]()!=0x0&&_0x4c230b[_0x494d38(0x164)]({'coin':_0x226828});}else{let _0x7f2c5e=![],_0xd30b30;allOpenOrders=[];for(const [_0x36e91d,_0x156727]of Object[_0x494d38(0x14c)](mybalances)){if(_0x513b39[_0x494d38(0x1bf)](_0x36e91d)){const _0x3f1f00=config[_0x494d38(0x148)][_0x494d38(0x1db)](_0x4204b9=>_0x4204b9[_0x494d38(0x15b)]==_0x36e91d),_0x2c0c79=_0x36e91d+'/'+_0x2bfa68,_0x229037=_0x2bfa68+'/'+_0x36e91d;_0x7f2c5e=![];if((_0x156727[_0x494d38(0x15e)]()!=0x0||_0x3f1f00)&&(allSymbols[_0x494d38(0x1bf)](_0x2c0c79)||_0x36e91d==_0x2bfa68))_0x36e91d!=_0x2bfa68&&(_0x121a1e[_0x494d38(0x164)](_0x2c0c79),_0x34d21e&&(_0xd30b30=await exchange[_0x494d38(0x163)](_0x2c0c79),_0xd30b30['length']>0x0&&(_0x7f2c5e=!![]))),_0x4c230b[_0x494d38(0x164)]({'coin':_0x36e91d,'symbol':_0x2c0c79,'reverse':![],'number':Math[_0x494d38(0x235)](_0x156727+(_0x3f1f00&&_0x3f1f00[_0x494d38(0x1a9)]||0x0),0x0),'order':_0x7f2c5e});else(_0x156727[_0x494d38(0x15e)]()!=0x0||_0x3f1f00)&&allSymbols[_0x494d38(0x1bf)](_0x229037)&&(_0x36e91d!=_0x2bfa68&&(_0x121a1e[_0x494d38(0x164)](_0x229037),_0x34d21e&&(_0xd30b30=await exchange[_0x494d38(0x163)](_0x229037),_0xd30b30[_0x494d38(0x1a5)]>0x0&&(_0x7f2c5e=!![]))),_0x4c230b[_0x494d38(0x164)]({'coin':_0x36e91d,'symbol':_0x229037,'reverse':!![],'number':Math[_0x494d38(0x235)](_0x156727+(_0x3f1f00&&_0x3f1f00[_0x494d38(0x1a9)]||0x0),0x0),'order':_0x7f2c5e}));}_0x7f2c5e&&allOpenOrders['push'](_0xd30b30[0x0]);}_0x34d21e&&allOpenOrders[_0x494d38(0x1a5)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x494d38(0x218))));}}catch(_0x3f2cd5){if(!_0x21ce17){if(_0x3f2cd5[_0x494d38(0x15e)]()[_0x494d38(0x1bf)](_0x494d38(0x155)))return logHistory(_0x494d38(0x185),_0x494d38(0x139)),![];else{if(_0x3f2cd5[_0x494d38(0x15e)]()[_0x494d38(0x1bf)](_0x494d38(0x22f)))return logHistory(_0x494d38(0x185),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x3f2cd5['toString']()[_0x494d38(0x1bf)](_0x494d38(0x1ca)))return logHistory(_0x494d38(0x185),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x3f2cd5,'getCoins()');}}}else await handleError(_0x3f2cd5,_0x494d38(0x248));}return _0x4c230b;}async function getPortfolio(_0x9ef171){const _0x25ddd6=_0x22f3ed;let _0x1de085=[],_0x37ba73=[],_0x1bad35,_0x1d0984=[],_0x16b2b8,_0x47d354;_0x9ef171[_0x25ddd6(0x19e)]===_0x25ddd6(0x236)||_0x9ef171['apiSecret']===_0x25ddd6(0x236)?(_0x16b2b8=config[_0x25ddd6(0x19e)],_0x47d354=config[_0x25ddd6(0x1fb)]):(_0x16b2b8=_0x9ef171[_0x25ddd6(0x19e)],_0x47d354=_0x9ef171[_0x25ddd6(0x1fb)]);await initExchange(_0x16b2b8,_0x47d354);let _0x4b6336=await loadSymbols();if(_0x4b6336){_0x1d0984=await getCoins(![],![],_0x9ef171[_0x25ddd6(0x1dd)]);if(_0x1d0984===![])proxyEmit(_0x25ddd6(0x148),![]);else{if(_0x9ef171[_0x25ddd6(0x1dd)]=='')proxyEmit('portfolio',_0x1d0984);else{_0x1d0984[_0x25ddd6(0x197)](_0x22d82d=>{const _0x33349e=_0x25ddd6;if(_0x22d82d['coin']!=_0x9ef171[_0x33349e(0x1dd)])_0x1de085['push'](_0x22d82d['symbol']);});try{_0x37ba73=await exchange['fetchTickers'](_0x1de085);}catch(_0xddc4fa){await handleError(_0xddc4fa,_0x25ddd6(0x159));}_0x1d0984[_0x25ddd6(0x197)](_0x129e18=>{const _0xae22b=_0x25ddd6;_0x129e18[_0xae22b(0x15b)]!=_0x9ef171[_0xae22b(0x1dd)]?_0x1bad35=_0x129e18[_0xae22b(0x167)]?0x1/_0x37ba73[_0x129e18['symbol']][_0xae22b(0x245)]:_0x37ba73[_0x129e18['symbol']]['last']:_0x1bad35=0x1,_0x129e18[_0xae22b(0x12e)]=formatResult(_0x1bad35,0x8);}),proxyEmit(_0x25ddd6(0x148),_0x1d0984);}}}else proxyEmit(_0x25ddd6(0x148),![]);}function checkMinimums(_0x3772ce){const _0x2618fa=_0x22f3ed;let _0xd35bdd=!![];const _0x1b18e0=!_0x3772ce['reverse']?markets[_0x3772ce[_0x2618fa(0x1aa)]]['limits'][_0x2618fa(0x1e5)][_0x2618fa(0x215)]:markets[_0x3772ce[_0x2618fa(0x1aa)]][_0x2618fa(0x173)][_0x2618fa(0x18e)]['min'],_0x20b7f9=!_0x3772ce[_0x2618fa(0x167)]?markets[_0x3772ce[_0x2618fa(0x1aa)]][_0x2618fa(0x173)]['cost']['min']:markets[_0x3772ce['symbol']]['limits']['amount'][_0x2618fa(0x215)],_0x26a6c3=markets[_0x3772ce[_0x2618fa(0x1aa)]][_0x2618fa(0x1c8)][_0x2618fa(0x1e5)];_0x3772ce[_0x2618fa(0x1bb)]=formatResultTruncate(_0x3772ce[_0x2618fa(0x1bb)],_0x26a6c3);if(Math['abs'](_0x3772ce['trade'])<_0x1b18e0)_0xd35bdd=![];if(Math['abs'](_0x3772ce[_0x2618fa(0x1bb)])*_0x3772ce['last']<_0x20b7f9)_0xd35bdd=![];if(_0x3772ce[_0x2618fa(0x187)]==_0x2618fa(0x23d)){let _0x30c713=config['portfolio'][_0x2618fa(0x1db)](_0x39da01=>_0x39da01['coin']==_0x3772ce[_0x2618fa(0x15b)]);if(_0x30c713[_0x2618fa(0x1a9)]>0x0){if(Math[_0x2618fa(0x223)](_0x3772ce[_0x2618fa(0x1bb)])>_0x3772ce[_0x2618fa(0x209)]-_0x30c713['offset'])_0xd35bdd=![];}else{if(Math['abs'](_0x3772ce[_0x2618fa(0x1bb)])>_0x3772ce[_0x2618fa(0x209)])_0xd35bdd=![];}}if(_0x3772ce[_0x2618fa(0x187)]=='buy'){let _0x1b70ac=config['portfolio'][_0x2618fa(0x1db)](_0x506da3=>_0x506da3[_0x2618fa(0x15b)]==config['basecoin']),_0x497c4f=currentCoins['find'](_0x4d2edd=>_0x4d2edd[_0x2618fa(0x15b)]==config['basecoin']);if(_0x1b70ac['offset']>0x0){if(Math[_0x2618fa(0x223)](_0x3772ce[_0x2618fa(0x1bb)])*_0x3772ce[_0x2618fa(0x245)]>_0x497c4f[_0x2618fa(0x209)]-_0x1b70ac['offset'])_0xd35bdd=![];}else{if(Math[_0x2618fa(0x223)](_0x3772ce[_0x2618fa(0x1bb)])*_0x3772ce[_0x2618fa(0x245)]>_0x497c4f[_0x2618fa(0x209)])_0xd35bdd=![];}}return _0xd35bdd;}async function getBalances(){const _0x23d8ff=_0x22f3ed;let _0x309dc6=0x0,_0x8c0511;const _0x3a306e=config[_0x23d8ff(0x242)];if(config[_0x23d8ff(0x1fc)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x4f2f15=>{const _0x33479f=_0x23d8ff;if(_0x4f2f15['coin']!=config[_0x33479f(0x1dd)]){let _0x552caf=global[_0x33479f(0x20e)][noslash(_0x4f2f15[_0x33479f(0x1aa)])];_0x8c0511=_0x4f2f15[_0x33479f(0x167)]?0x1/_0x552caf:_0x552caf;}else _0x8c0511=0x1;let _0x429f50=_0x4f2f15[_0x33479f(0x209)]*_0x8c0511;_0x309dc6+=_0x429f50,_0x4f2f15[_0x33479f(0x245)]=formatResult(Number(_0x8c0511),0x8),_0x4f2f15['value']=_0x429f50;}),currentCoins[_0x23d8ff(0x197)](_0x43c747=>{const _0x4ab924=_0x23d8ff;let _0x46fba8=config[_0x4ab924(0x148)][_0x4ab924(0x1db)](_0x173fee=>_0x173fee[_0x4ab924(0x15b)]==_0x43c747[_0x4ab924(0x15b)]),_0x3bc91f=Number(_0x46fba8[_0x4ab924(0x16e)]),_0x402ef5=_0x43c747[_0x4ab924(0x1c1)]/_0x309dc6*0x64,_0x230c56=_0x3bc91f*_0x309dc6/0x64/_0x43c747['last']-_0x43c747[_0x4ab924(0x209)];_0x43c747[_0x4ab924(0x16e)]=formatResult(_0x402ef5,0x3),_0x43c747[_0x4ab924(0x19f)]=formatResult(_0x3bc91f,0x3),_0x43c747['trade']=formatResult(_0x230c56,0x8),_0x43c747['side']='',_0x43c747[_0x4ab924(0x1d2)]=![];if(_0x43c747[_0x4ab924(0x15b)]!=config[_0x4ab924(0x1dd)]){if(_0x43c747[_0x4ab924(0x16e)]>_0x3bc91f)_0x43c747[_0x4ab924(0x187)]=_0x4ab924(0x23d),_0x43c747[_0x4ab924(0x1d2)]=checkMinimums(_0x43c747);else _0x43c747[_0x4ab924(0x16e)]<_0x3bc91f&&(_0x43c747[_0x4ab924(0x187)]=_0x4ab924(0x14e),_0x43c747[_0x4ab924(0x1d2)]=checkMinimums(_0x43c747));}_0x43c747[_0x4ab924(0x16c)]=_0x43c747[_0x4ab924(0x16e)]/_0x43c747['target']-0x1;}),currentCoins[_0x23d8ff(0x1e0)]((_0x314d5b,_0x19c7a6)=>_0x314d5b[_0x23d8ff(0x16c)]<_0x19c7a6[_0x23d8ff(0x16c)]?0x1:_0x19c7a6[_0x23d8ff(0x16c)]<_0x314d5b['delta']?-0x1:0x0);const _0x2184b6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2184b6[_0x23d8ff(0x16f)],'usd':_0x2184b6[_0x23d8ff(0x147)],'portfolio':JSON[_0x23d8ff(0x124)](currentCoins),'threshold':_0x3a306e},proxyEmit(_0x23d8ff(0x136),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3a306e});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x3a306e});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x50ab1b=_0x22f3ed;if(!lastBalances)return;let _0x186665=[],_0x35f38a,_0x2b8f70=JSON[_0x50ab1b(0x1df)](lastBalances[_0x50ab1b(0x148)]);_0x2b8f70[_0x50ab1b(0x1e0)]((_0x18e2b7,_0x43ff04)=>_0x18e2b7[_0x50ab1b(0x15b)]>_0x43ff04['coin']?0x1:_0x43ff04['coin']>_0x18e2b7[_0x50ab1b(0x15b)]?-0x1:0x0),_0x2b8f70['forEach'](_0x4cb984=>{const _0x5906d1=_0x50ab1b;let _0x133f47={'coin':_0x4cb984[_0x5906d1(0x15b)],'number':_0x4cb984[_0x5906d1(0x209)],'price':_0x4cb984[_0x5906d1(0x245)]};_0x186665[_0x5906d1(0x164)](_0x133f47);});const _0x59b50d=await getFiat();_0x35f38a={'date':lastBalances[_0x50ab1b(0x21e)]['split']('\x20')[0x0],'eur':_0x59b50d[_0x50ab1b(0x16f)],'usd':_0x59b50d[_0x50ab1b(0x147)],'coins':_0x186665};let _0x184eea=dbPerformance[_0x50ab1b(0x191)](_0x50ab1b(0x18d))[_0x50ab1b(0x1db)]({'date':_0x35f38a[_0x50ab1b(0x170)]})['value']();_0x184eea?_0x35f38a[_0x50ab1b(0x170)]!=config[_0x50ab1b(0x246)]&&dbPerformance['get'](_0x50ab1b(0x18d))[_0x50ab1b(0x1db)]({'date':_0x35f38a[_0x50ab1b(0x170)]})[_0x50ab1b(0x22b)](_0x35f38a)[_0x50ab1b(0x171)]():dbPerformance[_0x50ab1b(0x191)](_0x50ab1b(0x18d))[_0x50ab1b(0x164)](_0x35f38a)[_0x50ab1b(0x171)](),lastPerformanceStored=getHour();}function _0x19f8(_0x55a8f6,_0x415eb7){const _0x457db0=_0x9780();return _0x19f8=function(_0x1635f0,_0xcedc82){_0x1635f0=_0x1635f0-0x122;let _0x97800d=_0x457db0[_0x1635f0];return _0x97800d;},_0x19f8(_0x55a8f6,_0x415eb7);}function getNormalizedPerformance(){const _0x5cb799=_0x22f3ed;let _0x315241=[];if(dbPerformance[_0x5cb799(0x193)](_0x5cb799(0x18d))[_0x5cb799(0x1c1)]()){let _0x3c3dc3=dbPerformance[_0x5cb799(0x191)](_0x5cb799(0x18d))[_0x5cb799(0x1f3)]()['sortBy']('date')[_0x5cb799(0x1c1)](),_0xd52cee=[...config['liquidity']];_0xd52cee[_0x5cb799(0x1e0)]((_0x533bf8,_0x4f4b78)=>_0x533bf8[_0x5cb799(0x170)]>_0x4f4b78[_0x5cb799(0x170)]?-0x1:_0x4f4b78[_0x5cb799(0x170)]>_0x533bf8['date']?0x1:0x0);let _0x14be82=0x1,_0x18279f=[],_0x248250=0x0;_0x3c3dc3[_0x5cb799(0x244)]()[_0x5cb799(0x167)]()[_0x5cb799(0x197)]((_0x33599f,_0x1fe382)=>{const _0x2407e3=_0x5cb799;if(_0xd52cee[_0x248250]){if(_0x3c3dc3[_0x3c3dc3['length']-_0x1fe382]&&_0xd52cee[_0x248250][_0x2407e3(0x170)]==_0x3c3dc3[_0x3c3dc3[_0x2407e3(0x1a5)]-_0x1fe382][_0x2407e3(0x170)]){if(_0x1fe382<_0x3c3dc3[_0x2407e3(0x1a5)]){let _0x49b939=0x0,_0x365b6d=0x0;_0x3c3dc3[_0x3c3dc3['length']-_0x1fe382][_0x2407e3(0x1f5)][_0x2407e3(0x197)](_0x1a2415=>{const _0x5f7f2=_0x2407e3;_0x365b6d+=_0x1a2415[_0x5f7f2(0x209)]*_0x1a2415[_0x5f7f2(0x12e)];}),_0xd52cee[_0x248250][_0x2407e3(0x1da)][_0x2407e3(0x197)](_0x4bd7f2=>{const _0x15983c=_0x2407e3;_0x49b939+=_0x4bd7f2[_0x15983c(0x209)]*_0x4bd7f2[_0x15983c(0x12e)];}),_0x14be82*=_0x49b939/(_0x365b6d-_0x49b939)+0x1;}_0x248250++;}}let _0x39d6b5=0x0;_0x33599f[_0x2407e3(0x1f5)]['forEach'](_0x28982e=>{const _0x5c5b72=_0x2407e3;_0x39d6b5+=_0x28982e[_0x5c5b72(0x209)]*_0x28982e[_0x5c5b72(0x12e)];}),_0x18279f[_0x3c3dc3[_0x2407e3(0x1a5)]-_0x1fe382-0x1]=_0x39d6b5*(_0x14be82-0x1);});let _0x12618c=[];_0xd52cee=[...config[_0x5cb799(0x154)]]||[];let _0x5f443f=0x0;_0x248250=0x0,_0x3c3dc3['forEach']((_0x4405d3,_0x15c1ac)=>{const _0x2cd6c1=_0x5cb799;if(_0xd52cee[_0x248250]){const _0x3972b6=fns[_0x2cd6c1(0x1df)](_0xd52cee[_0x248250]['date'],_0x2cd6c1(0x1f9),new Date()),_0x90cae7=fns[_0x2cd6c1(0x1df)](_0x4405d3[_0x2cd6c1(0x170)],_0x2cd6c1(0x1f9),new Date());if(fns[_0x2cd6c1(0x16a)](_0x3972b6,_0x90cae7)){let _0x3b7cc4=0x0;_0xd52cee[_0x248250][_0x2cd6c1(0x1da)]['forEach'](_0x3faef7=>{const _0x1462d8=_0x2cd6c1;!_0x12618c[_0x3faef7[_0x1462d8(0x15b)]]?_0x12618c[_0x3faef7[_0x1462d8(0x15b)]]=_0x3faef7[_0x1462d8(0x209)]:(_0x3b7cc4=_0x12618c[_0x3faef7[_0x1462d8(0x15b)]],_0x12618c[_0x3faef7[_0x1462d8(0x15b)]]+=_0x3faef7[_0x1462d8(0x209)]);const _0x6b9554=_0x4405d3[_0x1462d8(0x1f5)][_0x1462d8(0x1db)](_0x3d06c5=>_0x3d06c5['coin']==_0x3faef7[_0x1462d8(0x15b)]);(!_0x6b9554||_0x6b9554['number']==0x0)&&(_0x5f443f+=(-_0x3faef7[_0x1462d8(0x209)]-_0x3b7cc4)*_0x3faef7[_0x1462d8(0x12e)]);}),_0x248250++;}}_0x4405d3[_0x2cd6c1(0x1f5)][_0x2cd6c1(0x197)]((_0x29d3bd,_0x41a409)=>{const _0x40c377=_0x2cd6c1;_0x12618c[_0x29d3bd['coin']]&&(_0x29d3bd={..._0x29d3bd,'initial':_0x12618c[_0x29d3bd[_0x40c377(0x15b)]]}),_0x4405d3['coins'][_0x41a409]=_0x29d3bd;}),_0x315241[_0x2cd6c1(0x164)]({'date':_0x4405d3[_0x2cd6c1(0x170)],'eur':_0x4405d3[_0x2cd6c1(0x16f)],'usd':_0x4405d3['usd'],'offset':_0x18279f[_0x15c1ac],'netoffset':_0x5f443f,'coins':_0x4405d3[_0x2cd6c1(0x1f5)]});});}return _0x315241;}function emitPerformance(_0x1d613b){const _0x10332e=_0x22f3ed;_0x1d613b[_0x10332e(0x1a5)]!==0x0?(proxyEmit('performance',_0x1d613b),lastPerformanceEmitted=getDate()):proxyEmit(_0x10332e(0x130),[]);}function getPerf(_0x3a2aac,_0x45d21c){const _0x291306=_0x22f3ed;let _0x536b6c=0x0,_0x10f03d=0x0,_0x203473=0x0;_0x3a2aac[_0x291306(0x1f5)]['forEach'](_0x86500a=>{const _0x1e48a2=_0x291306;_0x536b6c+=_0x86500a[_0x1e48a2(0x209)]*_0x86500a['price'];});_0x45d21c&&(_0x536b6c+=_0x3a2aac[_0x291306(0x1a9)]);if(config['basecoin']===_0x291306(0x1e8)||config[_0x291306(0x1dd)]===_0x291306(0x18a))_0x10f03d=_0x536b6c*_0x3a2aac['eur'],_0x203473=_0x536b6c*_0x3a2aac[_0x291306(0x147)];else{if(config[_0x291306(0x1dd)]===_0x291306(0x1b8)||config[_0x291306(0x1dd)]===_0x291306(0x181))_0x10f03d=_0x536b6c*_0x3a2aac['eur']/_0x3a2aac[_0x291306(0x147)],_0x203473=_0x536b6c;else config['basecoin']===_0x291306(0x1cb)&&(_0x10f03d=_0x536b6c,_0x203473=_0x536b6c*_0x3a2aac[_0x291306(0x147)]/_0x3a2aac['eur']);}return[_0x536b6c,_0x10f03d,_0x203473];}async function getStartingBalances(_0x40fc71,_0x559eb0=!![]){const _0x4a5293=_0x22f3ed;if(_0x40fc71[_0x4a5293(0x1a5)]!==0x0){const [_0x29eb74,_0x54acb1,_0x3e7905]=getPerf(_0x40fc71[0x0],!![]);let _0x4b5606=[];config['portfolio'][_0x4a5293(0x197)](_0x3c87e3=>{const _0x523dd2=_0x4a5293;let _0x4b4747=0x0,_0x1eeb19;config[_0x523dd2(0x154)]['forEach'](_0x133947=>{const _0x1caf71=_0x523dd2;let _0x11253f=_0x133947['changes'][_0x1caf71(0x1db)](_0x1ad88e=>_0x1ad88e[_0x1caf71(0x15b)]==_0x3c87e3['coin']);if(_0x11253f){_0x4b4747+=_0x11253f[_0x1caf71(0x209)];if(!_0x1eeb19)_0x1eeb19=_0x11253f[_0x1caf71(0x12e)];}}),_0x4b5606[_0x523dd2(0x164)]({'coin':_0x3c87e3[_0x523dd2(0x15b)],'number':_0x4b4747,'initialprice':_0x1eeb19});});const _0x4eb9b3={'basecoin':_0x29eb74,'eur':_0x54acb1,'usd':_0x3e7905,'coins':_0x4b5606};if(_0x559eb0)proxyEmit(_0x4a5293(0x19c),_0x4eb9b3);return _0x4eb9b3;}}function headlessMode(_0x37a8c6){const _0x5898b7=_0x22f3ed;let _0x4d4956=_0x37a8c6[_0x5898b7(0x148)],_0x4b78cd=_0x37a8c6[_0x5898b7(0x242)],_0x6aa04b=[];for(let _0x425889 of _0x4d4956){if(_0x425889['coin']!=config[_0x5898b7(0x1dd)]){if(_0x425889['delta']>=_0x4b78cd/0x64){if(_0x425889[_0x5898b7(0x1d2)])_0x6aa04b[_0x5898b7(0x164)](_0x425889);}else{if(_0x425889[_0x5898b7(0x16c)]<=-_0x4b78cd/0x64){if(_0x425889[_0x5898b7(0x1d2)])_0x6aa04b[_0x5898b7(0x164)](_0x425889);}}}}_0x6aa04b[_0x5898b7(0x1a5)]>0x0&&(allOrdersPlaced=![],placeOrder(_0x6aa04b));}function notifyBalance(_0x5a00a4){const _0x27aaf5=_0x22f3ed;let _0x3ff8aa=_0x5a00a4['portfolio'],_0x1509f4=_0x5a00a4['threshold'],_0x3c2896=[];for(let _0x39a10e of _0x3ff8aa){if(_0x39a10e['coin']!=config[_0x27aaf5(0x1dd)]){if(_0x39a10e['delta']>=_0x1509f4/0x64){if(_0x39a10e[_0x27aaf5(0x1d2)])_0x3c2896[_0x27aaf5(0x164)](_0x39a10e);}else{if(_0x39a10e[_0x27aaf5(0x16c)]<=-_0x1509f4/0x64){if(_0x39a10e[_0x27aaf5(0x1d2)])_0x3c2896['push'](_0x39a10e);}}}}if(_0x3c2896['length']>0x0){let _0xa3510a=_0x3c2896[_0x27aaf5(0x1a8)](_0x489b4d=>_0x489b4d[_0x27aaf5(0x15b)]);_0xa3510a[_0x27aaf5(0x1e0)]();let _0x1bcac7=_0xa3510a['join'](',\x20');if(lastCoinsToBalance!==_0x1bcac7)logHistory(_0x27aaf5(0x162),_0x27aaf5(0x1e4)+_0x1bcac7);lastCoinsToBalance=_0x1bcac7;}}function symbolToCoin(_0x44614d){const _0x450f10=_0x22f3ed;let _0x19a092;if(_0x44614d[_0x450f10(0x1bf)]('/'+config[_0x450f10(0x1dd)]))_0x19a092=_0x44614d[_0x450f10(0x19d)]('/'+config['basecoin'],'');if(_0x44614d[_0x450f10(0x1bf)](config[_0x450f10(0x1dd)]+'/'))_0x19a092=_0x44614d[_0x450f10(0x19d)](config[_0x450f10(0x1dd)]+'/','');return _0x19a092;}async function unlockOrders(){currentCoins=await getCoins(),validateOrdersState='initial';if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x4f90b2){const _0x230180=_0x22f3ed;if(_0x4f90b2)validateOrdersState=_0x4f90b2;let _0x53a832=[],_0x37874b=config[_0x230180(0x213)]==_0x230180(0x1ba)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+_0x230180(0x200)+_0x4f90b2),lastOrders[_0x230180(0x197)](_0x29e208=>{const _0x2b02d9=_0x230180;let _0xd4ccbb=![];_0x29e208['filled']>0x0&&(_0xd4ccbb=!![]),_0x53a832[_0x2b02d9(0x164)](_0xd4ccbb),_0xd4ccbb&&config[_0x2b02d9(0x213)]!=_0x2b02d9(0x1ba)&&logHistory(_0x2b02d9(0x1d3),_0x2b02d9(0x1fd)+_0x29e208[_0x2b02d9(0x1aa)]+'\x20'+_0x29e208[_0x2b02d9(0x187)]+'\x20#'+formatResult(_0x29e208[_0x2b02d9(0x20b)],0x8)+'\x20@'+formatResult(_0x29e208['price'],0x8));}),_0x53a832['forEach']((_0x533639,_0x207f94)=>{const _0x1cebe4=_0x230180;if(_0x533639)lastOrders[_0x1cebe4(0x16b)](_0x207f94,0x1);});const _0x630f46=coolingDown?_0x230180(0x21d):'balancing\x20resumed';if(validateOrdersState==_0x230180(0x17a))validateOrdersState=_0x230180(0x149),_0x53a832['includes'](![])?config['ordertype']==_0x230180(0x1ba)?logHistory(_0x230180(0x185),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory('error',_0x230180(0x1ae)):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x53a832[_0x230180(0x1bf)](![])){}else config[_0x230180(0x213)]=='market'?logHistory(_0x230180(0x162),'Order(s)\x20validated\x20-\x20'+_0x630f46):logHistory(_0x230180(0x162),_0x230180(0x1c6)+_0x630f46),await unlockOrders();}else{if(validateOrdersState==_0x230180(0x1d4))_0x53a832[_0x230180(0x1bf)](![])?config[_0x230180(0x213)]==_0x230180(0x1ba)?logHistory('success',_0x230180(0x12c)+Math[_0x230180(0x202)](_0x37874b*validateOrderInterval/0xea60)+_0x230180(0x157)+_0x630f46):(await cancelOrders(),logHistory(_0x230180(0x162),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x230180(0x202)](_0x37874b*validateOrderInterval/0xea60)+_0x230180(0x157)+_0x630f46)):logHistory(_0x230180(0x162),_0x230180(0x188)+_0x630f46),await unlockOrders();else{if(validateOrdersState==_0x230180(0x218)){if(config[_0x230180(0x213)]!=_0x230180(0x1ba))logHistory(_0x230180(0x162),_0x230180(0x188)+_0x630f46);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5d60af=>{const _0x45261f=_0x19f8;try{const _0x3fb216=await exchange[_0x45261f(0x168)](_0x5d60af[_0x45261f(0x243)],_0x5d60af[_0x45261f(0x1aa)]);}catch(_0x21ac17){if(_0x21ac17[_0x45261f(0x15e)]()[_0x45261f(0x1bf)](_0x45261f(0x13c))){}else await handleError(_0x21ac17,'cancelOrders()');}});}async function initCoinResults(){const _0x1e6140=_0x22f3ed;let _0x3028a4=[];config[_0x1e6140(0x148)]['forEach'](_0x1cbe67=>{const _0xac063d=_0x1e6140;if(!_0x1cbe67[_0xac063d(0x1b0)]&&_0x1cbe67[_0xac063d(0x15b)]!=config[_0xac063d(0x1dd)]){let _0x2b94a5=dbCoinResults['get'](_0xac063d(0x1f5))[_0xac063d(0x1db)]({'coin':_0x1cbe67[_0xac063d(0x15b)]})['value']();if(!_0x2b94a5){const _0x11d7d3=currentCoins[_0xac063d(0x1db)](_0x37c209=>_0x37c209[_0xac063d(0x15b)]==_0x1cbe67[_0xac063d(0x15b)]),_0xb9f5df=global[_0xac063d(0x20e)][noslash(_0x1cbe67[_0xac063d(0x1aa)])];let _0x38f7c6=_0x11d7d3?_0x11d7d3['number']:null,_0x18ffd4=_0x1cbe67[_0xac063d(0x167)]?0x1/_0xb9f5df:_0xb9f5df,_0x55a6d6;config['liquidity'][_0xac063d(0x197)](_0x1b7dc1=>{const _0x49b22f=_0xac063d;!_0x55a6d6&&(_0x55a6d6=_0x1b7dc1[_0x49b22f(0x1da)][_0x49b22f(0x1db)](_0x17ee9d=>_0x17ee9d[_0x49b22f(0x15b)]==_0x1cbe67['coin']),_0x55a6d6&&(_0x38f7c6=_0x55a6d6[_0x49b22f(0x209)],_0x18ffd4=_0x55a6d6[_0x49b22f(0x12e)]));}),_0x3028a4[_0xac063d(0x164)]({'coin':_0x1cbe67[_0xac063d(0x15b)],'number':_0x38f7c6,'price':_0x18ffd4});}}}),_0x3028a4[_0x1e6140(0x197)](_0x206c0b=>{const _0x204217=_0x1e6140,_0x13a032={'coin':_0x206c0b[_0x204217(0x15b)],'number':_0x206c0b[_0x204217(0x209)],'breakeven':_0x206c0b[_0x204217(0x12e)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x204217(0x1f5))[_0x204217(0x164)](_0x13a032)[_0x204217(0x171)]();});}async function updateCoinResults(_0x5443f0,_0x63d646=![]){const _0x13a907=_0x22f3ed;let _0x3b9ecb,_0x37cfaa,_0x514524,_0x5060d0,_0x5d4ac7,_0x4ff409,_0x25cfcd=dbCoinResults[_0x13a907(0x191)]('coins')[_0x13a907(0x1db)]({'coin':_0x5443f0[_0x13a907(0x15b)]})['value']();!_0x25cfcd&&await initCoinResults();_0x5443f0[_0x13a907(0x167)]&&(_0x4ff409={'filled':_0x5443f0[_0x13a907(0x20b)]*_0x5443f0['price'],'amount':_0x5443f0['filled']*_0x5443f0['price'],'side':_0x5443f0[_0x13a907(0x187)]==_0x13a907(0x23d)?'buy':_0x13a907(0x23d),'price':0x1/_0x5443f0[_0x13a907(0x12e)]},_0x5443f0={..._0x5443f0,..._0x4ff409});if(_0x63d646)_0x37cfaa=_0x5443f0[_0x13a907(0x187)]==_0x13a907(0x14e)?_0x25cfcd[_0x13a907(0x209)]+_0x5443f0['filled']:_0x25cfcd[_0x13a907(0x209)]-_0x5443f0[_0x13a907(0x20b)];else{const _0x2ef169=currentCoins['find'](_0x474711=>_0x474711['coin']==_0x5443f0[_0x13a907(0x15b)]);_0x37cfaa=_0x2ef169['number'];}if(_0x5443f0[_0x13a907(0x1e3)]&&_0x5443f0['fee'][_0x13a907(0x23b)]==config['basecoin'])_0x3b9ecb=_0x5443f0[_0x13a907(0x1e3)]['cost'];else{if(_0x5443f0[_0x13a907(0x1e3)]&&_0x5443f0[_0x13a907(0x1e3)]['currency']==_0x13a907(0x1c2)&&!_0x63d646)_0x3b9ecb=_0x5443f0[_0x13a907(0x1e3)][_0x13a907(0x18e)]*global['ticker']['BNB'+config['basecoin']];else _0x3b9ecb=defaultFee*_0x5443f0[_0x13a907(0x20b)]*_0x5443f0['price'];}_0x5443f0[_0x13a907(0x187)]=='buy'?(_0x514524=_0x37cfaa!=0x0?(_0x25cfcd[_0x13a907(0x14b)]*_0x25cfcd[_0x13a907(0x209)]+_0x5443f0['price']*(_0x37cfaa-_0x25cfcd['number'])+_0x3b9ecb)/_0x37cfaa:0x0,_0x5060d0=_0x25cfcd['realized']):(_0x514524=_0x37cfaa!=0x0?(_0x25cfcd['breakeven']*_0x25cfcd['number']-_0x5443f0[_0x13a907(0x12e)]*(_0x25cfcd[_0x13a907(0x209)]-_0x37cfaa)+_0x3b9ecb)/_0x37cfaa:0x0,_0x5060d0=_0x25cfcd[_0x13a907(0x208)]+(_0x5443f0[_0x13a907(0x12e)]-_0x25cfcd[_0x13a907(0x14b)])*_0x5443f0[_0x13a907(0x20b)]);_0x5d4ac7=(_0x5443f0[_0x13a907(0x12e)]-_0x514524-_0x3b9ecb/_0x5443f0[_0x13a907(0x20b)])*_0x37cfaa;let _0x1ce3ff={'coin':_0x5443f0[_0x13a907(0x15b)],'number':_0x37cfaa,'breakeven':formatResult(_0x514524,0x8),'realized':formatResult(_0x5060d0,0x8),'unrealized':formatResult(_0x5d4ac7,0x8),'fees':formatResult(_0x25cfcd[_0x13a907(0x222)]+_0x3b9ecb,0x8),'sells':_0x5443f0['side']=='sell'?_0x25cfcd[_0x13a907(0x1b2)]+0x1:_0x25cfcd[_0x13a907(0x1b2)],'buys':_0x5443f0['side']=='buy'?_0x25cfcd[_0x13a907(0x234)]+0x1:_0x25cfcd[_0x13a907(0x234)]};dbCoinResults['get'](_0x13a907(0x1f5))[_0x13a907(0x1db)]({'coin':_0x5443f0[_0x13a907(0x15b)]})[_0x13a907(0x22b)](_0x1ce3ff)[_0x13a907(0x171)]();if(!_0x63d646){if(_0x5443f0['fee']&&_0x5443f0[_0x13a907(0x1e3)][_0x13a907(0x23b)]=='BNB'){const _0x2c4467=currentCoins[_0x13a907(0x1db)](_0x4d1f70=>_0x4d1f70['coin']=='BNB');if(_0x2c4467){let _0x2893cd=dbCoinResults[_0x13a907(0x191)](_0x13a907(0x1f5))[_0x13a907(0x1db)]({'coin':'BNB'})[_0x13a907(0x1c1)]();_0x1ce3ff={..._0x2893cd,'number':_0x2c4467[_0x13a907(0x209)]},dbCoinResults[_0x13a907(0x191)]('coins')[_0x13a907(0x1db)]({'coin':_0x13a907(0x1c2)})[_0x13a907(0x22b)](_0x1ce3ff)[_0x13a907(0x171)]();}}}}async function placeOrder(_0x340b44){const _0x55fdea=_0x22f3ed,_0x161cd4=config['ordertype']==_0x55fdea(0x1ba)?'market':_0x55fdea(0x160);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x2b5fc8 of _0x340b44){let _0xf81a68,_0xcb8820,_0x284d2a,_0x431bc7,_0x19556c,_0x476748=_0x2b5fc8[_0x55fdea(0x1aa)];try{const _0x1a8484=await exchange[_0x55fdea(0x247)]([_0x476748]),_0x1164d7=_0x1a8484[_0x476748];_0xf81a68=_0x2b5fc8[_0x55fdea(0x167)]?0x1/_0x2b5fc8[_0x55fdea(0x245)]:_0x2b5fc8['last'],_0xcb8820=_0x1164d7['bid'],_0x284d2a=_0x1164d7[_0x55fdea(0x134)];_0x2b5fc8['reverse']?(_0x431bc7=_0x2b5fc8['side']=='buy'?_0x55fdea(0x23d):_0x55fdea(0x14e),_0x19556c=Math[_0x55fdea(0x223)](_0x2b5fc8[_0x55fdea(0x1bb)])/_0xf81a68):(_0x431bc7=_0x2b5fc8[_0x55fdea(0x187)],_0x19556c=Math['abs'](_0x2b5fc8[_0x55fdea(0x1bb)]));_0x161cd4==_0x55fdea(0x160)&&(config[_0x55fdea(0x213)]==_0x55fdea(0x204)&&(_0xf81a68=_0x431bc7==_0x55fdea(0x14e)?_0xcb8820:_0x284d2a),config[_0x55fdea(0x213)]==_0x55fdea(0x229)&&(_0xf81a68=_0x431bc7==_0x55fdea(0x14e)?_0x284d2a:_0xcb8820));_0x19556c=formatResult(_0x19556c,0x8),_0xf81a68=formatResult(_0xf81a68,0x8);const _0x236fe9=await exchange[_0x55fdea(0x216)](_0x476748,_0x161cd4,_0x431bc7,_0x19556c,_0xf81a68);lastOrders['push']({'orderId':_0x236fe9['id'],'symbol':_0x476748,'coin':_0x2b5fc8[_0x55fdea(0x15b)],'side':_0x431bc7,'reverse':_0x2b5fc8[_0x55fdea(0x167)],'amount':_0x236fe9[_0x55fdea(0x1e5)],'filled':0x0,'price':_0x236fe9[_0x55fdea(0x12e)],'fee':_0x236fe9[_0x55fdea(0x1e3)]});const _0x4edf08=_0x431bc7=='sell'?config[_0x55fdea(0x129)]?String[_0x55fdea(0x1c5)]('0x'+config[_0x55fdea(0x129)])+'\x20':'':config[_0x55fdea(0x206)]?String[_0x55fdea(0x1c5)]('0x'+config['emojibuy'])+'\x20':'',_0x3ffac1=_0x161cd4==_0x55fdea(0x1ba)?'Market':config[_0x55fdea(0x213)]==_0x55fdea(0x204)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x161cd4==_0x55fdea(0x1ba))logHistory(_0x55fdea(0x1d3),''+_0x4edf08+_0x3ffac1+_0x55fdea(0x1af)+_0x476748+'\x20'+_0x431bc7+'\x20#'+formatResult(_0x236fe9['filled'],0x8)+'\x20@'+formatResult(_0x236fe9[_0x55fdea(0x12e)],0x8));else logHistory(_0x55fdea(0x1d3),''+_0x4edf08+_0x3ffac1+_0x55fdea(0x1af)+_0x476748+'\x20'+_0x431bc7+'\x20#'+formatResult(_0x236fe9[_0x55fdea(0x1e5)],0x8)+'\x20@'+formatResult(_0x236fe9['price'],0x8));let _0x3b60f6=currentCoins[_0x55fdea(0x1db)](_0x28c496=>_0x28c496[_0x55fdea(0x15b)]==_0x2b5fc8[_0x55fdea(0x15b)]);_0x3b60f6[_0x55fdea(0x1d3)]=!![];if(config[_0x55fdea(0x219)]!=0x0){let _0x5a2c7d=null;if(cooldownTracker['length']==config[_0x55fdea(0x219)]-0x1)_0x5a2c7d=cooldownTracker[_0x55fdea(0x1f1)]();const _0x7279f1=getTimeStamp();cooldownTracker[_0x55fdea(0x164)](_0x7279f1);if(_0x5a2c7d){const _0x5bf98d=fns[_0x55fdea(0x1c0)](new Date(_0x7279f1),new Date(_0x5a2c7d));if(_0x5bf98d<cooldownInterval){logHistory(_0x55fdea(0x185),'Executed\x20'+config[_0x55fdea(0x219)]+_0x55fdea(0x1a4)+cooldownInterval/0x3c+_0x55fdea(0x230)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x5b7a08){if(_0x5b7a08[_0x55fdea(0x15e)]()[_0x55fdea(0x1bf)](_0x55fdea(0x1c9)))logHistory(_0x55fdea(0x185),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x476748);else{if(_0x5b7a08[_0x55fdea(0x15e)]()[_0x55fdea(0x1bf)]('Invalid\x20quantity'))logHistory(_0x55fdea(0x185),_0x55fdea(0x142)+_0x476748);else await handleError(_0x5b7a08,_0x55fdea(0x15f),_0x476748);}}}allOrdersPlaced=!![];if(lastOrders['length']!=0x0){lockOrders=!![],validateOrdersState='initial',setTimeout(function(){validateOrders();},0x1388);const _0x17fd61=config[_0x55fdea(0x213)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x55fdea(0x196)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x25c431=_0x55fdea;validateOrders(_0x25c431(0x1d4));},_0x17fd61);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x55fdea(0x162),_0x55fdea(0x12b)));}else{if(coolingDown)!config[_0x55fdea(0x1fc)]&&logHistory('error',_0x55fdea(0x122));else lockOrders&&(!config[_0x55fdea(0x1fc)]&&(config['ordertype']==_0x55fdea(0x1ba)?logHistory('error',_0x55fdea(0x174)):logHistory(_0x55fdea(0x185),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x22c194=_0x22f3ed;let _0xb0d266;lockOrders=!![],validateOrdersState=_0x22c194(0x149),currentCoins[_0x22c194(0x197)](_0x1692e1=>{const _0x2ab654=_0x22c194,_0x55242f=allOpenOrders[_0x2ab654(0x1db)](_0x4c0347=>_0x4c0347[_0x2ab654(0x1aa)]==_0x1692e1['symbol']);_0x55242f&&(lastOrders[_0x2ab654(0x164)]({'orderId':_0x55242f['id'],'symbol':_0x1692e1[_0x2ab654(0x1aa)],'coin':_0x1692e1[_0x2ab654(0x15b)],'side':_0x55242f['side'],'reverse':_0x1692e1[_0x2ab654(0x167)],'amount':_0x55242f[_0x2ab654(0x1e5)],'filled':0x0,'price':_0x55242f['price'],'fee':_0x55242f[_0x2ab654(0x1e3)]}),_0x1692e1[_0x2ab654(0x1d3)]=!![],_0xb0d266=_0x55242f[_0x2ab654(0x17e)]);});const _0x15fb0f=new Date()[_0x22c194(0x126)](),_0x5cdd8d=config[_0x22c194(0x213)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x22c194(0x196)]*0x3c*0x3e8;if(_0xb0d266+_0x5cdd8d>_0x15fb0f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2c3fa0=_0x22c194;validateOrders(_0x2c3fa0(0x1d4));},_0xb0d266+_0x5cdd8d-_0x15fb0f);}else validateOrders(_0x22c194(0x1d4));}function sendPortfolioTelegram(){const _0x516dae=_0x22f3ed,_0x4b4416=[_0x516dae(0x1cb),_0x516dae(0x1b8),_0x516dae(0x181)],_0x1096f1=_0x4b4416[_0x516dae(0x1bf)](config['basecoin'])?0x2:0x8;let _0x3d3e49='';if(config[_0x516dae(0x18f)])_0x3d3e49=config['botname']+_0x516dae(0x12a);else _0x3d3e49=_0x516dae(0x151)+botID+'\x20portfolio:\x20\x0a\x0a';_0x3d3e49+=_0x516dae(0x212),_0x3d3e49+=_0x516dae(0x1eb),_0x3d3e49+=_0x516dae(0x182),currentCoins[_0x516dae(0x197)](_0x10bf25=>{const _0x113e15=_0x516dae;_0x3d3e49+=_0x10bf25[_0x113e15(0x15b)][_0x113e15(0x190)](0x7)+'|\x20'+formatPad(_0x10bf25[_0x113e15(0x16e)],0x2,0x6)+'|\x20'+formatPad(_0x10bf25[_0x113e15(0x19f)],0x2,0x6)+'|\x20'+formatPad(_0x10bf25[_0x113e15(0x16c)]*0x64,0x2,0x6)+'\x0a';}),_0x3d3e49+=_0x516dae(0x13f),process[_0x516dae(0x20a)]({'telegrammsg':_0x3d3e49},_0x42db38=>{});}function formatPad(_0x321e1a,_0x191513,_0x5ba8e7){const _0x5ec3f9=_0x22f3ed,_0x2f6098=formatResultString(_0x321e1a,_0x191513);return _0x2f6098?_0x2f6098[_0x5ec3f9(0x1c7)](_0x5ba8e7):''[_0x5ec3f9(0x1c7)](_0x5ba8e7);}function logHistory(_0x42251f,_0x11f420,_0xf90fd8=''){const _0x213b6e=_0x22f3ed;let _0x34225e={'time':getTimeStamp(),'type':_0x42251f,'event':_0x11f420};dbLogs['get'](_0x213b6e(0x1b9))[_0x213b6e(0x164)](_0x34225e)[_0x213b6e(0x171)]();if(_0xf90fd8=='')_0xf90fd8=_0x11f420;proxyEmit('event',{'log':_0x34225e,'summary':_0xf90fd8}),process[_0x213b6e(0x20a)]({'telegram':{..._0x34225e,'botname':config[_0x213b6e(0x1a7)],'showname':config[_0x213b6e(0x18f)]}},_0x2162d1=>{}),logging(''+_0x34225e[_0x213b6e(0x141)]);}function emitHistory(_0x513510={}){const _0x50f549=_0x22f3ed;Object['keys'](_0x513510)[_0x50f549(0x1a5)]==0x0&&(_0x513510={'type':['order',_0x50f549(0x141)],'event':'','page':0x1});if(_0x513510[_0x50f549(0x1b4)]['includes'](_0x50f549(0x141)))_0x513510[_0x50f549(0x1b4)][_0x50f549(0x16b)](_0x513510[_0x50f549(0x1b4)][_0x50f549(0x22e)](_0x50f549(0x141)),0x1,_0x50f549(0x185),_0x50f549(0x162));if(dbLogs[_0x50f549(0x193)](_0x50f549(0x1b9))[_0x50f549(0x1c1)]()){let _0x2c03b4=dbLogs[_0x50f549(0x191)](_0x50f549(0x1b9))[_0x50f549(0x1a2)](_0x46d68a=>{const _0x1525b6=_0x50f549;if(_0x513510[_0x1525b6(0x1b4)][_0x1525b6(0x1a5)]==0x0)return![];else return _0x513510[_0x1525b6(0x1b4)][_0x1525b6(0x1bf)](_0x46d68a[_0x1525b6(0x1b4)]);})['filter'](_0x3b3625=>{const _0x8f3afa=_0x50f549;if(_0x513510[_0x8f3afa(0x141)]=='')return!![];else return _0x3b3625[_0x8f3afa(0x141)][_0x8f3afa(0x1c4)]()[_0x8f3afa(0x1bf)](_0x513510[_0x8f3afa(0x141)][_0x8f3afa(0x1c4)]());})[_0x50f549(0x1d9)](_0x50f549(0x21e)),_0x1052a5=_0x2c03b4[_0x50f549(0x1c1)]()['length'];_0x2c03b4=_0x2c03b4[_0x50f549(0x167)]()[_0x50f549(0x244)]((_0x513510['page']-0x1)*logPageSize,_0x513510[_0x50f549(0x18b)]*logPageSize-0x1)[_0x50f549(0x167)]()[_0x50f549(0x1c1)](),proxyEmit('event-history',{'logs':_0x2c03b4,'total':_0x1052a5});}else proxyEmit(_0x50f549(0x156),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1fb891){const _0x496090=_0x22f3ed;if(dbLogs[_0x496090(0x193)](_0x496090(0x1b9))['value']()){const _0x4e21ee=dbLogs[_0x496090(0x191)]('logs')[_0x496090(0x1d9)](_0x496090(0x21e))[_0x496090(0x1a2)](_0x519be9=>{return _0x519be9['type']=='order';})[_0x496090(0x1c1)]();dbLogs['get']('logs')[_0x496090(0x22c)]()[_0x496090(0x171)](),dbLogs[_0x496090(0x191)](_0x496090(0x1b9))[_0x496090(0x22b)](_0x4e21ee)[_0x496090(0x171)](),emitHistory(_0x1fb891);}}async function pauseBot(_0x4e25f9=''){const _0x43fd0a=_0x22f3ed,_0x503d68=new Date()[_0x43fd0a(0x126)]();if(!lastBotPause)lastBotPause=new Date()[_0x43fd0a(0x126)](),consecutivePauses=0x1;else{if(_0x503d68-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x43fd0a(0x20a)]({'stop':_0x43fd0a(0x1ef)},_0x2bbd00=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x43fd0a(0x126)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x4e25f9)_0x4e25f9+=_0x43fd0a(0x23a);logHistory(_0x43fd0a(0x185),_0x4e25f9+_0x43fd0a(0x135)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x4478b2=_0x22f3ed;process[_0x4478b2(0x20a)]({'stop':_0x4478b2(0x1e6)},_0x1d918b=>{}),await sleep(0x7d0);}async function handleError(_0xf75174,_0x34f86e,_0x2e820b=''){const _0x48cac5=_0x22f3ed;if(_0xf75174[_0x48cac5(0x15e)]()['includes']('DDoSProtection'))await pauseBot(_0x48cac5(0x1e7));else{if(_0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x175)))await pauseBot(_0x48cac5(0x1d7));else{if(_0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x1ed)))await pauseBot('Binance\x20not\x20responding');else{if(_0xf75174['toString']()['includes'](_0x48cac5(0x155)))logHistory(_0x48cac5(0x185),_0x34f86e+_0x48cac5(0x1a6)),logHistory(_0x48cac5(0x185),_0x48cac5(0x1be)),await killBot();else{if(_0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x22f)))logHistory(_0x48cac5(0x185),_0x34f86e+_0x48cac5(0x1fa)),logHistory('error',_0x48cac5(0x1be)),await killBot();else{if(_0xf75174['toString']()['includes'](_0x48cac5(0x1ca)))logHistory(_0x48cac5(0x185),_0x34f86e+_0x48cac5(0x22a)),logHistory(_0x48cac5(0x185),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x1d8)))logHistory(_0x48cac5(0x185),_0x34f86e+_0x48cac5(0x225)),logHistory(_0x48cac5(0x185),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x15a)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process[_0x48cac5(0x20a)]({'stop':_0x48cac5(0x1ef)},_0x1f6e09=>{});else _0xf75174[_0x48cac5(0x15e)]()[_0x48cac5(0x1bf)](_0x48cac5(0x199))?logHistory(_0x48cac5(0x185),_0x34f86e+_0x48cac5(0x1f0)+_0x2e820b):(logging(_0x34f86e+_0x48cac5(0x17c),_0xf75174),await pauseBot(_0x48cac5(0x1a0)));}}}}}}}}function formatResult(_0x576343,_0x389a25){const _0x44f474=_0x22f3ed;return parseFloat(_0x576343[_0x44f474(0x228)](_0x389a25));}function formatResultTruncate(_0x207e91,_0x356d2a){const _0x4a980f=_0x22f3ed;let _0x50a5b4=formatResultString(_0x207e91,0xa),_0x1cfe23=_0x50a5b4[_0x4a980f(0x22e)]('.');return _0x1cfe23!=-0x1&&(_0x50a5b4=_0x50a5b4['slice'](0x0,_0x1cfe23+_0x356d2a+0x1)),Number(_0x50a5b4);}function formatResultString(_0x3504ac,_0x37d2fa){const _0x58255c=_0x22f3ed;let _0x19bf59;if(!(''+_0x3504ac)[_0x58255c(0x1bf)]('e'))_0x19bf59=+(Math[_0x58255c(0x202)](_0x3504ac+'e+'+_0x37d2fa)+'e-'+_0x37d2fa);else{let _0x8145a4=(''+_0x3504ac)[_0x58255c(0x249)]('e'),_0x1151c7='';+_0x8145a4[0x1]+_0x37d2fa>0x0&&(_0x1151c7='+'),_0x19bf59=+(Math[_0x58255c(0x202)](+_0x8145a4[0x0]+'e'+_0x1151c7+(+_0x8145a4[0x1]+_0x37d2fa))+'e-'+_0x37d2fa);}return Number(_0x19bf59)['toFixed'](_0x37d2fa);}function logging(_0x388e85,_0x11749f=''){const _0x36e2cc=_0x22f3ed;if(config['showname'])console['log'](getTimeStamp()+':\x20'+config[_0x36e2cc(0x1a7)]+_0x36e2cc(0x227)+_0x388e85,_0x11749f);else console['log'](getTimeStamp()+_0x36e2cc(0x1ce)+botID+_0x36e2cc(0x227)+_0x388e85,_0x11749f);}function getServerTime(){const _0x6afa66=_0x22f3ed,_0x5e409b=new Date();return _0x5e409b[_0x6afa66(0x1f2)]()+'/'+(_0x5e409b[_0x6afa66(0x179)]()+0x1)[_0x6afa66(0x15e)]()[_0x6afa66(0x1c7)](0x2,'0')+'/'+_0x5e409b[_0x6afa66(0x13d)]()[_0x6afa66(0x15e)]()['padStart'](0x2,'0')+'\x20'+_0x5e409b[_0x6afa66(0x131)]()[_0x6afa66(0x15e)]()['padStart'](0x2,'0')+':'+_0x5e409b['getMinutes']()[_0x6afa66(0x15e)]()[_0x6afa66(0x1c7)](0x2,'0')+':'+_0x5e409b[_0x6afa66(0x138)]()[_0x6afa66(0x15e)]()[_0x6afa66(0x1c7)](0x2,'0');}function getTimeStamp(){const _0x430bf9=_0x22f3ed,_0x3da7fd=shiftedTime();return _0x3da7fd[_0x430bf9(0x1f2)]()+'/'+(_0x3da7fd[_0x430bf9(0x179)]()+0x1)[_0x430bf9(0x15e)]()[_0x430bf9(0x1c7)](0x2,'0')+'/'+_0x3da7fd['getDate']()[_0x430bf9(0x15e)]()[_0x430bf9(0x1c7)](0x2,'0')+'\x20'+_0x3da7fd[_0x430bf9(0x131)]()[_0x430bf9(0x15e)]()['padStart'](0x2,'0')+':'+_0x3da7fd[_0x430bf9(0x1bc)]()[_0x430bf9(0x15e)]()[_0x430bf9(0x1c7)](0x2,'0')+':'+_0x3da7fd[_0x430bf9(0x138)]()[_0x430bf9(0x15e)]()['padStart'](0x2,'0');}function getDate(){const _0x1075d7=_0x22f3ed,_0x781c74=shiftedTime();return _0x781c74['getFullYear']()+'/'+(_0x781c74[_0x1075d7(0x179)]()+0x1)[_0x1075d7(0x15e)]()[_0x1075d7(0x1c7)](0x2,'0')+'/'+_0x781c74[_0x1075d7(0x13d)]()[_0x1075d7(0x15e)]()['padStart'](0x2,'0');}function getHour(){const _0x1dfd09=_0x22f3ed,_0x521440=shiftedTime();return _0x521440[_0x1dfd09(0x131)]()[_0x1dfd09(0x15e)]()[_0x1dfd09(0x1c7)](0x2,'0');}function sleep(_0x40e8ac){return new Promise(_0x21dc9a=>setTimeout(_0x21dc9a,_0x40e8ac));}function shiftedTime(){const _0x2af516=_0x22f3ed,_0xd6421e=new Date();let _0xd4c13c=_0xd6421e;if(config&&config[_0x2af516(0x211)]!==0x0)_0xd4c13c=fns['add'](_0xd6421e,{'hours':config[_0x2af516(0x211)]});return _0xd4c13c;}