const _0x3916db=_0xcc5e;(function(_0x3e116d,_0x171628){const _0x15208d=_0xcc5e,_0x20b023=_0x3e116d();while(!![]){try{const _0x1d1483=parseInt(_0x15208d(0x25b))/0x1*(parseInt(_0x15208d(0x2fd))/0x2)+-parseInt(_0x15208d(0x27f))/0x3*(-parseInt(_0x15208d(0x2d1))/0x4)+-parseInt(_0x15208d(0x1c7))/0x5*(-parseInt(_0x15208d(0x31b))/0x6)+-parseInt(_0x15208d(0x35f))/0x7+-parseInt(_0x15208d(0x200))/0x8*(-parseInt(_0x15208d(0x236))/0x9)+parseInt(_0x15208d(0x2a2))/0xa+-parseInt(_0x15208d(0x2ba))/0xb*(parseInt(_0x15208d(0x280))/0xc);if(_0x1d1483===_0x171628)break;else _0x20b023['push'](_0x20b023['shift']());}catch(_0x4306d9){_0x20b023['push'](_0x20b023['shift']());}}}(_0x48e5,0xa2e5b));const _0x4fd224=function(){let _0x345168=!![];return function(_0x27fff2,_0x9fc264){const _0x5afb2c=_0x345168?function(){const _0x4f36c5=_0xcc5e;if(_0x9fc264){const _0x5066ff=_0x9fc264[_0x4f36c5(0x2e1)](_0x27fff2,arguments);return _0x9fc264=null,_0x5066ff;}}:function(){};return _0x345168=![],_0x5afb2c;};}(),_0x4a934=_0x4fd224(this,function(){const _0x32ffe7=_0xcc5e;return _0x4a934[_0x32ffe7(0x344)]()[_0x32ffe7(0x2ef)]('(((.+)+)+)+$')[_0x32ffe7(0x344)]()[_0x32ffe7(0x27d)](_0x4a934)['search'](_0x32ffe7(0x2cf));});_0x4a934();'use strict';const ccxt=require(_0x3916db(0x2d7)),low=require(_0x3916db(0x1c1)),FileSync=require(_0x3916db(0x33d)),fs=require('fs'),fns=require(_0x3916db(0x1e1)),forge=require(_0x3916db(0x2b2)),util=require(_0x3916db(0x1e3)),argv=require(_0x3916db(0x369))(process[_0x3916db(0x366)][_0x3916db(0x1cf)](0x2))[_0x3916db(0x366)],path=require(_0x3916db(0x27a)),axios=require(_0x3916db(0x2e6));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x3916db(0x2ac),'TUSD','USDT',_0x3916db(0x1f6),_0x3916db(0x31d)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3916db(0x24f)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x3916db(0x277)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x3916db(0x315)],environment=require(_0x3916db(0x36a))[_0x3916db(0x33b)]||_0x3916db(0x215),botID=process[_0x3916db(0x366)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x3916db(0x319)](botID)&&(console['log'](_0x3916db(0x254)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3916db(0x366)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3916db(0x2b4),logspath=userID?_0x3916db(0x2e4)+userID+'/':_0x3916db(0x2e4),loggerfile=fs[_0x3916db(0x31f)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x3916db(0x1f8)](configpath);!fs[_0x3916db(0x356)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x3916db(0x2f8),logfile=configpath+'bot-'+botID+_0x3916db(0x2a3),performancefile=configpath+_0x3916db(0x2e9)+botID+_0x3916db(0x301),coinresultsfile=configpath+_0x3916db(0x2e9)+botID+_0x3916db(0x1c5),settingsfile=configpath+_0x3916db(0x286),securefile=configpath+_0x3916db(0x379),configbackuppath=configpath+_0x3916db(0x303),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x3916db(0x2e7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3916db(0x1df)]({'data':[],'version':serverversion})[_0x3916db(0x2e7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3916db(0x1df)]({'bot':[],'version':serverversion})[_0x3916db(0x2e7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3916db(0x1df)]({'coins':[],'version':serverversion})[_0x3916db(0x2e7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2603f1=>{console['log'](_0x2603f1);},'simple':_0x51e8dc=>{const _0x299ca3=_0x3916db;console['log'](_0x51e8dc),loggerfile['write'](util[_0x299ca3(0x2b5)](_0x51e8dc)+'\x0a');},'full':async(_0x1c8d8e,_0x35c01b='')=>{const _0x4ba1c8=_0x3916db;let _0x10fbd0;if(config[_0x4ba1c8(0x1f4)])_0x10fbd0=getTimeStamp()+':\x20'+config[_0x4ba1c8(0x213)]+_0x4ba1c8(0x306)+_0x1c8d8e;else _0x10fbd0=getTimeStamp()+_0x4ba1c8(0x224)+botID+_0x4ba1c8(0x306)+_0x1c8d8e;console[_0x4ba1c8(0x28c)](_0x10fbd0),loggerfile[_0x4ba1c8(0x2e7)](util[_0x4ba1c8(0x2b5)](_0x10fbd0)+'\x0a'),_0x35c01b&&(console[_0x4ba1c8(0x28c)](_0x35c01b),loggerfile['write'](util[_0x4ba1c8(0x2b5)](_0x35c01b)+'\x0a'));},'debug':async(_0x514848,_0x5873b7='')=>{const _0x391678=_0x3916db;let _0x40a856;if(config[_0x391678(0x1f4)])_0x40a856=getTimeStamp()+':\x20'+config[_0x391678(0x213)]+'\x20>\x20[DEBUG]\x20'+_0x514848;else _0x40a856=getTimeStamp()+_0x391678(0x224)+botID+_0x391678(0x2d6)+_0x514848;if(debugging)console[_0x391678(0x28c)](_0x40a856);loggerfile['write'](util[_0x391678(0x2b5)](_0x40a856)+'\x0a');if(_0x5873b7){if(debugging)console[_0x391678(0x28c)](_0x5873b7);loggerfile[_0x391678(0x2e7)](util['format'](_0x5873b7)+'\x0a');}}};function _0x48e5(){const _0x2cb652=['All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','path','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Error\x20in\x20loadSymbols():\x20','constructor','coin','3927723dhevQw','8164020WPEtWS','InvalidOrder','starting-balance-','DDoSProtection','0\x20-\x20EXECUTION:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','bb-settings.json','2\x20-\x20Validate\x20orders:\x20','full','progress','string','buy','log','error','exchanges','startdate','\x20hour','emojibuy','API-key\x20format\x20invalid','usd','loadMarkets','max','substring','isEqual','AuthenticationError','threshold','initial','2.6.22','openOrders','2\x20-\x20Handled\x20open\x20orders','Huobipro','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','10693500FTONUG','-events.json','entries','/USDT','portfolio1','Insufficient\x20funds\x20to\x20execute\x20order:\x20','quote','remove','differenceInSeconds','splice','BUSD','keys','1\x20-\x20partially\x20FILLED\x20(','autoliquidity','Avoiding\x20continuous\x20order\x20attempts','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','node-forge','stringify','./config/','format','last','running','has','Bot\x20','22pzClDB','2.6.23','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','starting-balances','Market\x20&\x20symbol\x20data\x20updated','Network\x20error\x20details:','cancelOrders()','no\x20exchange\x20reloaded','status','request-time','Resetting\x20coin\x20results:\x20','fetchTickers','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','onepagemode','1\x20-\x20FILLED\x20known\x20order:\x20','Placing\x20order\x20for:\x20','Reset\x20|\x20','toggleBotMode','assign','</pre>','<pre>','(((.+)+)+)+$','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','4gWshrv','EUR','Cooldown\x20ended\x20-\x20balancing\x20resumed','rightTxt','final','\x20>\x20[DEBUG]\x20','ccxt','configuration-stored','filter','quick','offset','add','getCoinNumber()','Limit\x20(high-margin)','code','getSeconds','apply','storeConfiguration','type','./logs/','floor','axios','write','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','bot-','Net\x20','Order\x20amount\x20is\x20invalid:\x20','Market','UNLOCKING','random','search','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','balances','fetchTicker','shift','\x20metrics:</b>\x20\x0a\x0a','added','Waited\x20','Cex','-config.json','startsWith','exchange','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','parse','20938hdAFJN','trade','RSA-OAEP','change24h','-performance.json','market_cap','/backup/','2\x20-\x20handling\x20FILLED\x20order:\x20','showConfig','\x20>\x20','cost','marketcap','kill','ordertype','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20>\x20details:','sells','no\x20open\x20orders','value','timeout','Order(s)\x20not\x20validated\x20after\x20','includes','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Initializing\x20exchange','version','fetchOpenOrders','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','status\x20code\x20401','test','balancing\x20resumed','102ABbCuP','Order\x20filled:\x20','USDP','apiKey','createWriteStream','Manual\x20balancing\x20required','total','restart','round','Executed\x20','\x20change','timeshift','Net\x20effect','loadSymbols()','number','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','forEach','market','Valid\x20balance\x20for\x20','target','\x20|\x20exchange:\x20','data',')\x20known\x20order:\x20',')\x20unknown\x20order:\x20','USDT','\x20MB','recovery','PermissionDenied','open','getMonth','date','orderId','environment','net-basecoin','lowdb/adapters/FileSync','apiSecret','distribution','\x20-\x20bot\x20not\x20started','breakeven','fromCodePoint','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','toString','excluded','basecoinvalue','Set\x20lock\x20orders\x20to:\x20','Loading\x20completed','Error\x20details:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','find','event-history','reverse','portfolio','2.3.5','cancelOrder','Order\x20is\x20invalid:\x20','\x20|\x20','Block\x20transaction\x20detection:\x20','warning','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','existsSync','Invalid\x20symbol:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getFullYear','message','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','ETH','getMinutes','recreateCoinResults()','9052785GLfhhm','staging','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','customId','average','create','\x20/\x20','argv','marketcapEnabled','<b>Bot\x20','yargs/yargs','./version.json','<b>','fetchBalance()','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','InsufficientFunds','\x20exchange\x20error:\x20','RequestTimeout','startprice','cancel','indexOf','Headless:\x20','active','ExchangeNotAvailable','args','storeFiat','bb-secure.json','set','min','debug','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','coins','bots','OrderNotFound','apiPassword','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','OnMaintenance','time','change','marketcapApi','portfolio2','LOCKED','botID','configuration','lowdb','Trigger:\x20','\x20portfolio:</b>\x20\x0a\x0a','fetchTickers()','-results.json','Symbol(s):\x20','35085clxair','\x20order:\x20','price','net-fiat','BNB','join',':\x20timer\x20>','pid','slice','limits','Invalid\x20quantity','getDate','sortBy','createOrder','Limit\x20(low-margin)','\x20|\x20Custom\x20ID:\x20','delta','\x20API\x20secret\x20is\x20invalid','limit-high','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','unlinkSync','closed','BTC','ongoing','defaults','toFixed','date-fns','\x20|\x20lock\x20orders:\x20','util','fetchBalance','sqrt','getTime','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','BNB/','enableFiatToggle','update-liquidity','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','recent20','watchTrades()','Exchange','initclient','toLowerCase','bot','split','slider','showname','cloneDeep','USDC','Error\x20occurred:\x20','mkdirSync','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','1\x20-\x20Handle\x20open\x20orders','getOpenOrders()','red_yellow_blue','\x20API\x20key\x20is\x20invalid','replace','5576qaOJXZ','liquidity','colorscheme','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','toUpperCase','length','privateKeyFromPem','storeHeadless','remainingSymbols','\x20attempts','initTickers()','headless','yyyy/MM/dd','process\x20','symbol','decrypt','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','valid','Initializing\x20exchange:\x20already\x20done','botname','RateLimitExceeded','production','************','bid','get','privateKey','amount','cooldown','complete','pop','must\x20be\x20greater\x20than\x20minimum\x20amount','USD','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','placeOrder()','\x20orders\x20in\x20less\x20than\x20','fiat',':\x20Bot\x20','watchOrders','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','findIndex',')\x20|\x20exchange:\x20','order','push','none','NetworkError','sort','netoffset','canceled','\x20|\x20highest\x20fee:\x20','Stopped\x20fetching\x20balance\x20after\x20','success','emojisell','abs','padEnd','2790BPkDHo','password','logs','coin-loading-progress','padStart','detectLiquidityChange()','send','changes','startnumber','currency','exec','1\x20-\x20Validate\x20orders:\x20','\x20minutes\x20-\x20','marketcapsqrt','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20value','getPortfolio','function','token\x20is\x20expired','Error\x20details:','uncaughtException','Bybit','side','fee','filled','freeze','buys','removed','cancelLoading','switch-manual','Error:\x20Invalid\x20argument\x20','page','getHours','writeFile','highest','map','-------------------------------\x0a','58Hdvtbv','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','percentage','datetime','limit','eur','Pausing\x20for\x20','sell','settings','leftTxt','watchOrders()','basecoin','fees','orderstatus','recreate','emitHistory','spot','watchTradesForSymbols()','sendPortfolioTelegram','%\x20(','timestamp','2.6.0','PAXG','pro','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','event','realized','***','UNLOCKED'];_0x48e5=function(){return _0x2cb652;};return _0x48e5();}process['on'](_0x3916db(0x24a),function(_0x2153a7){handleError(_0x2153a7,'uncaughtException');});settings[_0x3916db(0x326)]!=config[_0x3916db(0x326)]&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config[_0x3916db(0x2c7)]&&updateOnepagemode(settings[_0x3916db(0x2c7)]);(settings[_0x3916db(0x1bc)]&&!config[_0x3916db(0x1bc)]||!settings[_0x3916db(0x1bc)]&&config[_0x3916db(0x1bc)])&&updateMarketcapApi(settings[_0x3916db(0x1bc)]);process[_0x3916db(0x23c)]({'started':_0x3916db(0x2b7)},_0x4dc69d=>{}),initializeProcessListeners();function proxyEmit(_0x37fe51,_0x3952a8=null){const _0x456940=_0x3916db;process[_0x456940(0x23c)]({'function':_0x37fe51,'args':_0x3952a8},_0x13afb6=>{});}function initializeProcessListeners(){const _0x199594=_0x3916db;process['on'](_0x199594(0x35a),_0xe597d5=>{const _0x2f92fd=_0x199594;switch(Object[_0x2f92fd(0x2ad)](_0xe597d5)[0x0]){case _0x2f92fd(0x326):_0xe597d5['timeshift']!=undefined&&(settings[_0x2f92fd(0x326)]=_0xe597d5[_0x2f92fd(0x326)],updateTimeshift(settings[_0x2f92fd(0x326)]));break;case _0x2f92fd(0x2c7):_0xe597d5[_0x2f92fd(0x2c7)]!=undefined&&(settings[_0x2f92fd(0x2c7)]=_0xe597d5[_0x2f92fd(0x2c7)],updateOnepagemode(settings[_0x2f92fd(0x2c7)]));break;case _0x2f92fd(0x1bc):_0xe597d5[_0x2f92fd(0x1bc)]!=undefined&&(settings['marketcapApi']=_0xe597d5[_0x2f92fd(0x1bc)],updateMarketcapApi(settings[_0x2f92fd(0x1bc)]));break;case _0x2f92fd(0x1b5):_0xe597d5[_0x2f92fd(0x1b5)]!=undefined&&(bots=JSON['parse'](_0xe597d5[_0x2f92fd(0x1b5)]),proxyEmit(_0x2f92fd(0x1b5),bots));break;case _0x2f92fd(0x247):switch(_0xe597d5[_0x2f92fd(0x247)]){case _0x2f92fd(0x1ef):initclient();break;case _0x2f92fd(0x2cb):toggleBotMode();break;case _0x2f92fd(0x26a):emitHistory(_0xe597d5[_0x2f92fd(0x377)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0xe597d5[_0x2f92fd(0x377)]);break;case _0x2f92fd(0x246):getPortfolio(_0xe597d5[_0x2f92fd(0x377)]);break;case _0x2f92fd(0x2e2):storeConfiguration(_0xe597d5[_0x2f92fd(0x377)]);break;case _0x2f92fd(0x207):storeHeadless(_0xe597d5[_0x2f92fd(0x377)]);break;case _0x2f92fd(0x378):storeFiat(_0xe597d5[_0x2f92fd(0x377)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xe597d5[_0x2f92fd(0x377)]);break;case _0x2f92fd(0x252):cancelLoading();break;case _0x2f92fd(0x305):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2f92fd(0x26d):sendPortfolioTelegram();break;}}});}reset(!![]);function _0xcc5e(_0x3a1dc3,_0x402de7){const _0x6e3c44=_0x48e5();return _0xcc5e=function(_0x4a934,_0x4fd224){_0x4a934=_0x4a934-0x1b1;let _0x48e59f=_0x6e3c44[_0x4a934];return _0x48e59f;},_0xcc5e(_0x3a1dc3,_0x402de7);}async function reset(_0x1251d7=![]){const _0x20d823=_0x3916db;logger['debug'](_0x20d823(0x2ca)+(_0x1251d7?'exchange\x20reload':_0x20d823(0x2c1))+_0x20d823(0x32f)+config[_0x20d823(0x2fa)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1251d7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x20d823(0x31e)]!=''&&config[_0x20d823(0x31e)]!=_0x20d823(0x276)){loadingProgress=0x0;_0x1251d7&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x20d823(0x1c0),emittedConfiguration()),initialPerformanceStored=![]);const _0x253292=await getCoins();[currentCoins,currentCoinsAll]=_0x253292,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x20d823(0x1b2)](_0x20d823(0x348)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x20d823(0x205)]==0x0&&allOpenOrders[_0x20d823(0x205)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0xc2f928=![]){const _0x3cb739=_0x3916db;logger['debug']('Resuming\x20('+(_0xc2f928?_0x3cb739(0x2da):_0x3cb739(0x21c))+_0x3cb739(0x228)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0xc2f928){getBalances();return;}coinsLoaded=![];if(config[_0x3cb739(0x31e)]!=''&&config['apiKey']!='***'){loadingProgress=0x1;const _0x5a5385=await getCoins();[currentCoins,currentCoinsAll]=_0x5a5385,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3cb739(0x1b2)](_0x3cb739(0x348)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x3cb739(0x205)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x18967d){const _0x212c17=_0x3916db;let _0x55044a=![];if(_0x18967d)_0x55044a=!![];let _0x172c76;_0x55044a?_0x172c76=_0x18967d[_0x212c17(0x259)](_0x4dea11=>_0x4dea11[_0x212c17(0x27e)]):_0x172c76=currentCoinsAll[_0x212c17(0x259)](_0x4c3560=>_0x4c3560[_0x212c17(0x27e)]);if(!config['marketcapApi']||!_0x55044a&&!config[_0x212c17(0x367)]||_0x172c76['length']==0x0)return;let _0x3af7f8=null;try{_0x3af7f8=await axios['get'](_0x212c17(0x29f),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x172c76[_0x212c17(0x344)]()}});}catch(_0x2b1098){_0x3af7f8=null,_0x2b1098['toString']()['includes'](_0x212c17(0x318))?(config[_0x212c17(0x1bc)]=![],updateConfig(),proxyEmit(_0x212c17(0x1c0),emittedConfiguration()),logHistory('error',_0x212c17(0x1b3))):(logHistory(_0x212c17(0x28d),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x212c17(0x1b2)](_0x212c17(0x249),_0x2b1098[_0x212c17(0x344)]()+'\x20-\x20'+_0x2b1098[_0x212c17(0x2df)]));}if(_0x3af7f8){let _0x37901f=0x0;const _0xf8c59d=_0x3af7f8[_0x212c17(0x330)];_0x172c76[_0x212c17(0x32b)](_0x525356=>{const _0x27e2e9=_0x212c17;if(_0xf8c59d[_0x27e2e9(0x330)][_0x525356][0x0])_0x37901f+=_0xf8c59d['data'][_0x525356][0x0][_0x27e2e9(0x2a8)][_0x27e2e9(0x21f)][_0x27e2e9(0x302)];}),_0x172c76[_0x212c17(0x32b)](_0x5193e7=>{const _0x51b47f=_0x212c17,_0x422264=_0xf8c59d[_0x51b47f(0x330)][_0x5193e7][0x0]?_0xf8c59d[_0x51b47f(0x330)][_0x5193e7][0x0]['quote'][_0x51b47f(0x21f)][_0x51b47f(0x302)]:0x0;if(_0x55044a){const _0x4e89d8=_0x18967d[_0x51b47f(0x34b)](_0x2e3c4c=>_0x2e3c4c[_0x51b47f(0x27e)]==_0x5193e7);_0x4e89d8&&(_0x4e89d8['marketcap']=_0x422264);}else{const _0x18e527=currentCoins[_0x51b47f(0x34b)](_0x5343cd=>_0x5343cd[_0x51b47f(0x27e)]==_0x5193e7);_0x18e527&&(_0x18e527[_0x51b47f(0x308)]=_0x422264);const _0x1d0c17=currentCoinsAll[_0x51b47f(0x34b)](_0x77b945=>_0x77b945[_0x51b47f(0x27e)]==_0x5193e7);_0x1d0c17&&(_0x1d0c17[_0x51b47f(0x308)]=_0x422264);}}),!_0x55044a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2113be=_0x3916db,_0x3dccd8=0x2;let _0x29fb68=0x0,_0x514feb=0x0,_0x21a12a=0x0,_0x3bde49=0x0,_0x42da2c=0x0;config[_0x2113be(0x34e)]['forEach'](_0x340c77=>{const _0xd274ed=_0x2113be;if(!_0x340c77[_0xd274ed(0x345)]){_0x21a12a++,_0x29fb68+=_0x340c77[_0xd274ed(0x1f3)];if(_0x340c77[_0xd274ed(0x1f3)]===-0x1){_0x29fb68++;const _0x59d6d4=currentCoinsAll[_0xd274ed(0x34b)](_0xf65d5f=>_0xf65d5f[_0xd274ed(0x27e)]==_0x340c77[_0xd274ed(0x27e)]);_0x59d6d4&&(_0x3bde49+=_0x59d6d4[_0xd274ed(0x308)],_0x42da2c+=Math[_0xd274ed(0x1e5)](_0x59d6d4[_0xd274ed(0x308)]));}if(_0x340c77[_0xd274ed(0x1f3)]!==-0x1)_0x514feb++;}});let _0xbbc060;const _0x190eac=0x64-_0x29fb68,_0x1d6df9=_0x21a12a-_0x514feb;_0xbbc060=_0x1d6df9===0x0?_0x29fb68:Math[_0x2113be(0x295)](0x64,_0x29fb68),config[_0x2113be(0x34e)][_0x2113be(0x32b)](_0x4e88a1=>{const _0x47f3d9=_0x2113be,_0x2e049c=currentCoinsAll[_0x47f3d9(0x34b)](_0x30d4b9=>_0x30d4b9['coin']==_0x4e88a1[_0x47f3d9(0x27e)]);_0x2e049c&&(_0x4e88a1[_0x47f3d9(0x308)]=_0x2e049c[_0x47f3d9(0x308)]);if(!_0x4e88a1['excluded']){if(_0xbbc060<=0x64){if(_0x4e88a1[_0x47f3d9(0x1f3)]===-0x1){if(_0x3bde49!==0x0&&config['marketcapEnabled']){if(_0x2e049c){if(config[_0x47f3d9(0x367)]==_0x47f3d9(0x308))_0x4e88a1[_0x47f3d9(0x33f)]=(_0x190eac/(_0x3bde49/_0x2e049c[_0x47f3d9(0x308)]))[_0x47f3d9(0x1e0)](_0x3dccd8);else config['marketcapEnabled']==_0x47f3d9(0x243)&&(_0x4e88a1[_0x47f3d9(0x33f)]=(_0x190eac/(_0x42da2c/Math[_0x47f3d9(0x1e5)](_0x2e049c[_0x47f3d9(0x308)])))[_0x47f3d9(0x1e0)](_0x3dccd8));}}}}}}),updateConfig();}function updateConfig(){const _0x242f92=_0x3916db;let _0x389ae0=dbConfig['get'](_0x242f92(0x1f1))['find']({'botID':botID})['value']();_0x389ae0&&dbConfig[_0x242f92(0x218)](_0x242f92(0x1f1))[_0x242f92(0x34b)]({'botID':botID})[_0x242f92(0x2cc)](config)['write']();}function logMemory(){const _0x57bc7a=_0x3916db;if(environment!=_0x57bc7a(0x360))return;const _0x34e261=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x57bc7a(0x1b2)](_0x57bc7a(0x20d)+process[_0x57bc7a(0x1ce)]+'\x20uses\x20'+formatResult(_0x34e261,0x1)+_0x57bc7a(0x334));}async function startScheduler(){const _0x58e45f=shiftedTime()['getHours']();getMarketCap(),_0x58e45f==0x1&&logMemory(),(_0x58e45f==0x2||_0x58e45f==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4aa4d0=![]){const _0x213f9c=_0x3916db;logger[_0x213f9c(0x1b2)]('Initiating\x20bot\x20restart');if(!_0x4aa4d0)while(lockOrders!=ORDERS[_0x213f9c(0x277)]||coolingDown){await sleep(0x3e8);}process[_0x213f9c(0x23c)]({'stop':_0x213f9c(0x322)},_0x4985d6=>{});}async function initExchange(_0x38203d=config[_0x3916db(0x2fa)],_0x38be9a=config[_0x3916db(0x31e)],_0x56b721=config['apiSecret'],_0x1fd055=config['apiPassword']){const _0x674258=_0x3916db;if(exchange){logger['debug'](_0x674258(0x212));return;}logger['debug'](_0x674258(0x314));!supportedExchanges()[_0x674258(0x312)](_0x38203d)&&(logHistory(_0x674258(0x28d),_0x674258(0x1da)+_0x38203d+'\x20exchange'),killBot());const _0x3e400f=ccxt[_0x674258(0x272)][_0x38203d['toLowerCase']()];exchange=new _0x3e400f({'apiKey':_0x38be9a,'secret':_0x56b721,'options':{'defaultType':_0x674258(0x26b)}});if(_0x1fd055)exchange[_0x674258(0x237)]=_0x1fd055;}function updateExchange(_0x2dfe7e,_0x473ce2,_0x2ddaad=null){const _0x367580=_0x3916db;exchange['apiKey']=_0x2dfe7e,exchange[_0x367580(0x33e)]=_0x473ce2,exchange[_0x367580(0x1b7)]=_0x2ddaad,logger[_0x367580(0x1b2)](_0x367580(0x36d));}function setStableCoins(){const _0x3e9374=_0x3916db;let _0x202be2=config[_0x3e9374(0x266)]=='ETH'?'ETH':config[_0x3e9374(0x266)]==_0x3e9374(0x271)?_0x3e9374(0x271):_0x3e9374(0x1dd),_0x20ce67=allSymbols[_0x3e9374(0x312)](_0x202be2+'/USD')?'USD':allSymbols[_0x3e9374(0x312)](_0x202be2+_0x3e9374(0x2a5))?_0x3e9374(0x333):_0x3e9374(0x2d2),_0x1bcfd2=allSymbols[_0x3e9374(0x312)](_0x202be2+'/EUR')?_0x3e9374(0x2d2):_0x20ce67;enableFiatToggle=!![],_0x20ce67=='EUR'&&(enableFiatToggle=![],storeFiat(_0x3e9374(0x2d2))),_0x1bcfd2!=_0x3e9374(0x2d2)&&(enableFiatToggle=![],storeFiat(_0x3e9374(0x21f))),stablecoins={'eur':{'coin':''+_0x202be2+_0x1bcfd2,'symbol':_0x202be2+'/'+_0x1bcfd2},'usd':{'coin':''+_0x202be2+_0x20ce67,'symbol':_0x202be2+'/'+_0x20ce67}};}async function initwsCcxt(){const _0x151230=_0x3916db;initCycle++;const _0x174802=initCycle;let _0x23a3b8=[];config[_0x151230(0x34e)][_0x151230(0x32b)](_0x18a59a=>{const _0x1aa314=_0x151230;if(!_0x18a59a[_0x1aa314(0x345)]&&_0x18a59a[_0x1aa314(0x27e)]!=config[_0x1aa314(0x266)])_0x23a3b8[_0x1aa314(0x22a)](_0x18a59a[_0x1aa314(0x20e)]);});if(!_0x23a3b8['includes'](stablecoins[_0x151230(0x260)][_0x151230(0x20e)]))_0x23a3b8[_0x151230(0x22a)](stablecoins['eur']['symbol']);if(!_0x23a3b8[_0x151230(0x312)](stablecoins['usd'][_0x151230(0x20e)]))_0x23a3b8[_0x151230(0x22a)](stablecoins[_0x151230(0x293)][_0x151230(0x20e)]);if(config[_0x151230(0x2fa)][_0x151230(0x2f9)]('Binance')&&config[_0x151230(0x266)]!=_0x151230(0x271)){if(!_0x23a3b8['includes'](_0x151230(0x1e8)+config['basecoin']))_0x23a3b8[_0x151230(0x22a)](_0x151230(0x1e8)+config[_0x151230(0x266)]);}loadCoins(_0x23a3b8),_0x23a3b8=validateSymbols(_0x23a3b8);const _0x4bc8e9=async _0x3905cb=>{const _0x1e5f03=_0x151230;let _0x437c97;try{const _0x5c753b=await getTickers(_0x3905cb);Object['entries'](_0x5c753b)[_0x1e5f03(0x32b)](_0x47dad4=>{const _0x17fa36=_0x1e5f03;_0x437c97=_0x47dad4[0x1]['symbol'],gTicker[noslash(_0x437c97)]=_0x47dad4[0x1]['last'],gChange[_0x437c97]=_0x47dad4[0x1][_0x17fa36(0x25d)];});}catch(_0x38d4a9){await handleError(_0x38d4a9,_0x1e5f03(0x20a),_0x437c97);}},_0x517d38=async _0x50dc51=>{const _0x58046d=_0x151230;while(initCycle==_0x174802){if(!botPaused)try{const _0x14c023=await exchange['watchTrades'](_0x50dc51);gTicker[noslash(_0x14c023[0x0]['symbol'])]=_0x14c023[0x0][_0x58046d(0x1c9)];}catch(_0x22dffd){if(!exchangeStopped)await handleError(_0x22dffd,_0x58046d(0x1ed),_0x50dc51);}else await sleep(0x64);}},_0x536133=async _0x1cbf4c=>{const _0x2ebd12=_0x151230;while(initCycle==_0x174802){if(!botPaused)try{const _0x319bfb=await exchange['watchTradesForSymbols'](_0x1cbf4c),_0x7d18a0=_0x319bfb[_0x2ebd12(0x21d)]();gTicker[noslash(_0x7d18a0[_0x2ebd12(0x20e)])]=_0x7d18a0['price'];}catch(_0x1757d2){if(!exchangeStopped)await handleError(_0x1757d2,_0x2ebd12(0x26c),_0x1cbf4c['toString']());}else await sleep(0x64);}},_0x2bbe90=async _0x4dcf0c=>{const _0x24d8ff=_0x151230;while(initCycle==_0x174802){if(!botPaused){let _0x5b9920;try{await sleep(0x3c*0x3e8);const _0x315dfe=await getTickers(_0x4dcf0c);Object['entries'](_0x315dfe)[_0x24d8ff(0x32b)](_0x5bc698=>{const _0x3e348a=_0x24d8ff;_0x5b9920=_0x5bc698[0x1][_0x3e348a(0x20e)],gChange[_0x5b9920]=_0x5bc698[0x1]['percentage'];});}catch(_0x34ee24){if(!exchangeStopped)await handleError(_0x34ee24,_0x24d8ff(0x1c4),_0x5b9920);}}else await sleep(0x64);}},_0x167645=async _0x55b68e=>{const _0x53db34=_0x151230;while(initCycle==_0x174802){if(!botPaused)try{const _0x93daad=await exchange[_0x53db34(0x225)](_0x55b68e);initCycle==_0x174802&&_0x93daad[_0x53db34(0x32b)](_0x96201c=>{updateNumberCoinsCcxt(_0x96201c);});}catch(_0x31a120){if(!exchangeStopped)await handleError(_0x31a120,_0x53db34(0x265));}else await sleep(0x64);}};_0x4bc8e9(_0x23a3b8),_0x2bbe90(_0x23a3b8),exchange[_0x151230(0x2b8)]['watchTradesForSymbols']&&!(config[_0x151230(0x2fa)]==_0x151230(0x24b)&&_0x23a3b8['length']>0xa)?_0x536133(_0x23a3b8):_0x23a3b8[_0x151230(0x32b)](_0x1f79f6=>{_0x517d38(_0x1f79f6);}),_0x23a3b8[_0x151230(0x32b)](_0xf6aed9=>{_0x167645(_0xf6aed9);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x993ae8){const _0x19fcdd=_0x3916db;let _0x134551={};try{if(config['exchange']!='Cryptocom')_0x134551=await exchange[_0x19fcdd(0x2c5)](_0x993ae8);else for(const _0x475ee4 of _0x993ae8){const _0x13eaca=await exchange[_0x19fcdd(0x2f2)](_0x475ee4);_0x134551[_0x475ee4]=_0x13eaca;}return _0x134551;}catch(_0x4bd338){throw _0x4bd338;}}function setBlockTransactionDetection(_0x4f03ba){const _0x388fb9=_0x3916db;blockTransactionDetection=_0x4f03ba,logger[_0x388fb9(0x1b2)](_0x388fb9(0x353)+blockTransactionDetection);}async function detectLiquidityChange(_0x1150be=0x0){const _0x4ccc79=_0x3916db;transactionDetectionOngoing=!![];try{const _0x5434c9=await getCoins(_0x1150be),[_0x49d1e9,_0x3d8e1a]=_0x5434c9;let _0x466c0d=[];currentCoins['forEach'](_0x158291=>{const _0xc71345=_0xcc5e,_0x47bcca=_0x49d1e9[_0xc71345(0x34b)](_0xfaf692=>_0xfaf692['coin']==_0x158291[_0xc71345(0x27e)]);if(_0x47bcca){if(_0x158291[_0xc71345(0x329)]!=_0x47bcca['number']){let _0x24fc2a;if(_0x158291['coin']!=config[_0xc71345(0x266)]){const _0xf5ca0a=gTicker[noslash(_0x158291[_0xc71345(0x20e)])];_0x24fc2a=_0x158291[_0xc71345(0x34d)]?0x1/_0xf5ca0a:_0xf5ca0a;}else _0x24fc2a=0x1;_0x466c0d[_0xc71345(0x22a)]({'coin':_0x158291[_0xc71345(0x27e)],'symbol':_0x158291[_0xc71345(0x20e)],'price':_0x24fc2a,'number':Number(formatResult(_0x47bcca[_0xc71345(0x329)]-_0x158291[_0xc71345(0x329)],0x8)),'basecoinvalue':_0x24fc2a*(_0x47bcca[_0xc71345(0x329)]-_0x158291[_0xc71345(0x329)])});}}});if(_0x466c0d['length']>0x0&&!blockTransactionDetection){for(const _0x4204ed of _0x466c0d){if(config['autoliquidity']){logger['debug'](_0x4ccc79(0x273)+_0x4204ed[_0x4ccc79(0x346)]+_0x4ccc79(0x230)+lastFees[_0x4ccc79(0x258)]);if(lastFees[_0x4ccc79(0x258)]==0x0||Math[_0x4ccc79(0x234)](_0x4204ed[_0x4ccc79(0x346)])>lastFees[_0x4ccc79(0x258)]*0x3){if(config[_0x4ccc79(0x2af)]==_0x4ccc79(0x1ea)){delete _0x4204ed[_0x4ccc79(0x20e)],delete _0x4204ed[_0x4ccc79(0x346)];let _0x3665fc=[],_0x42e42d=[...config['liquidity']]||[],_0x33606e=config[_0x4ccc79(0x201)];_0x42e42d[_0x4ccc79(0x22d)]((_0x1f3db4,_0x3f46d7)=>_0x1f3db4['date']>_0x3f46d7[_0x4ccc79(0x339)]?-0x1:_0x3f46d7[_0x4ccc79(0x339)]>_0x1f3db4[_0x4ccc79(0x339)]?0x1:0x0);const _0x8a424=getDate();if(_0x42e42d[0x0]){const _0x5974ee=fns[_0x4ccc79(0x2fc)](_0x42e42d[0x0][_0x4ccc79(0x339)],_0x4ccc79(0x20c),new Date()),_0x8c95a=fns[_0x4ccc79(0x2fc)](_0x8a424,_0x4ccc79(0x20c),new Date());if(fns[_0x4ccc79(0x297)](_0x5974ee,_0x8c95a)){_0x3665fc=_0x42e42d[0x0][_0x4ccc79(0x23d)];const _0x3f86e4=_0x3665fc[_0x4ccc79(0x34b)](_0x26788a=>_0x26788a[_0x4ccc79(0x27e)]==_0x4204ed['coin']);_0x3f86e4?(_0x3f86e4[_0x4ccc79(0x329)]+=_0x4204ed['number'],_0x3f86e4['number']==0x0&&(_0x3665fc=_0x3665fc[_0x4ccc79(0x2d9)](_0x48730c=>{const _0x3a6083=_0x4ccc79;return _0x48730c['coin']!=_0x4204ed[_0x3a6083(0x27e)];}))):_0x3665fc[_0x4ccc79(0x22a)](_0x4204ed);const _0x317944=_0x33606e['find'](_0xa80c29=>_0xa80c29[_0x4ccc79(0x339)]==_0x8a424);_0x317944[_0x4ccc79(0x23d)]=_0x3665fc;}else _0x33606e[_0x4ccc79(0x22a)]({'date':_0x8a424,'changes':[_0x4204ed]});}const _0x361a68=_0x33606e['find'](_0x21f27e=>_0x21f27e[_0x4ccc79(0x339)]==_0x8a424);if(_0x361a68){let _0x2af39d=!![];_0x361a68[_0x4ccc79(0x23d)][_0x4ccc79(0x32b)](_0x4f0c96=>{const _0x15f3e0=_0x4ccc79;if(_0x4f0c96[_0x15f3e0(0x329)]!=0x0)_0x2af39d=![];}),_0x2af39d&&(_0x33606e=_0x33606e['filter'](_0xe1ae8=>{const _0x2dd245=_0x4ccc79;return _0xe1ae8[_0x2dd245(0x339)]!=_0x8a424;}));}let _0x3edc5e=dbConfig[_0x4ccc79(0x218)](_0x4ccc79(0x1f1))[_0x4ccc79(0x34b)]({'botID':botID})[_0x4ccc79(0x30f)]();_0x3edc5e&&(dbConfig[_0x4ccc79(0x218)](_0x4ccc79(0x1f1))[_0x4ccc79(0x34b)]({'botID':botID})[_0x4ccc79(0x2cc)]({'liquidity':_0x33606e})['write'](),config['liquidity']=_0x33606e);logHistory(_0x4ccc79(0x232),'Portfolio\x20change\x20detected:\x20'+Math[_0x4ccc79(0x234)](_0x4204ed['number'])+'\x20'+_0x4204ed[_0x4ccc79(0x27e)]+'\x20'+(_0x4204ed[_0x4ccc79(0x329)]>0x0?_0x4ccc79(0x2f5):_0x4ccc79(0x251))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());const _0x3744bb=getNormalizedPerformance();emitPerformance(_0x3744bb),getStartingBalances(_0x3744bb),logger[_0x4ccc79(0x1b2)](_0x4ccc79(0x25c));}else config[_0x4ccc79(0x2af)]==_0x4ccc79(0x253)&&(config[_0x4ccc79(0x20b)]?(await storeHeadless({'headless':![]}),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x4ccc79(0x234)](_0x4204ed[_0x4ccc79(0x329)])+'\x20'+_0x4204ed[_0x4ccc79(0x27e)]+'\x20'+(_0x4204ed[_0x4ccc79(0x329)]>0x0?_0x4ccc79(0x2f5):_0x4ccc79(0x251))+_0x4ccc79(0x244))):logger[_0x4ccc79(0x1b2)]('Portfolio\x20change\x20detected:\x20'+Math[_0x4ccc79(0x234)](_0x4204ed['number'])+'\x20'+_0x4204ed[_0x4ccc79(0x27e)]+'\x20'+(_0x4204ed[_0x4ccc79(0x329)]>0x0?_0x4ccc79(0x2f5):_0x4ccc79(0x251))+_0x4ccc79(0x35b)));}else logger[_0x4ccc79(0x1b2)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x4ccc79(0x234)](_0x4204ed['number'])+'\x20'+_0x4204ed[_0x4ccc79(0x27e)]+'\x20'+(_0x4204ed[_0x4ccc79(0x329)]>0x0?'added':_0x4ccc79(0x251)));}else logger[_0x4ccc79(0x1b2)]('Portfolio\x20change\x20detected:\x20'+Math[_0x4ccc79(0x234)](_0x4204ed['number'])+'\x20'+_0x4204ed[_0x4ccc79(0x27e)]+'\x20'+(_0x4204ed[_0x4ccc79(0x329)]>0x0?'added':_0x4ccc79(0x251))+_0x4ccc79(0x317));}currentCoins=_0x49d1e9,currentCoinsAll=_0x3d8e1a;}}catch(_0x5d2990){if(!exchangeStopped)await handleError(_0x5d2990,_0x4ccc79(0x23b));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xaba562=_0x3916db;try{markets=await exchange[_0xaba562(0x294)](!![]),allSymbols=[],Object[_0xaba562(0x2a4)](markets)['forEach'](_0x58e3d7=>{const _0x196e0f=_0xaba562;_0x58e3d7[0x1][_0x196e0f(0x375)]&&_0x58e3d7[0x1][_0x196e0f(0x26b)]&&allSymbols[_0x196e0f(0x22a)](_0x58e3d7[0x0]);}),logger[_0xaba562(0x1b2)](_0xaba562(0x2be));}catch(_0x23a6bb){markets?logger[_0xaba562(0x1b2)](_0xaba562(0x27c)+_0x23a6bb['toString']()):(loading['cancel']=!![],emitLoadingProgress(),_0x23a6bb['toString']()[_0xaba562(0x1f0)]()[_0xaba562(0x312)](_0xaba562(0x26f))||_0x23a6bb[_0xaba562(0x344)]()['toLowerCase']()[_0xaba562(0x312)](_0xaba562(0x2c3))?logHistory(_0xaba562(0x28d),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x23a6bb,_0xaba562(0x328)),logHistory(_0xaba562(0x28d),_0xaba562(0x203)),logHistory(_0xaba562(0x28d),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger['debug'](_0xaba562(0x249),_0x23a6bb),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x2c0a22){const _0x14d763=_0x3916db;let _0x4a5548=[];return _0x2c0a22[_0x14d763(0x32b)](_0x239967=>{const _0xee21c9=_0x14d763;!allSymbols['includes'](_0x239967)?logHistory(_0xee21c9(0x28d),_0xee21c9(0x357)+_0x239967+_0xee21c9(0x2fb)):_0x4a5548[_0xee21c9(0x22a)](_0x239967);}),_0x4a5548;}async function initclient(){const _0x452d23=_0x3916db;proxyEmit(_0x452d23(0x1c0),emittedConfiguration()),proxyEmit(_0x452d23(0x28e),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x452d23(0x2f1),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x368e14=getNormalizedPerformance();emitPerformance(_0x368e14),getStartingBalances(_0x368e14);}async function toggleBotMode(){const _0x4d6e56=_0x3916db;let _0x44928f=dbConfig[_0x4d6e56(0x218)](_0x4d6e56(0x1f1))[_0x4d6e56(0x34b)]({'botID':botID})[_0x4d6e56(0x30f)]();if(_0x44928f){const _0x401505=!_0x44928f[_0x4d6e56(0x20b)];dbConfig[_0x4d6e56(0x218)](_0x4d6e56(0x1f1))['find']({'botID':botID})[_0x4d6e56(0x2cc)]({'headless':_0x401505})[_0x4d6e56(0x2e7)](),config['headless']=_0x401505,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x57a341=_0x3916db;process[_0x57a341(0x23c)]({'updatebotmanager':!![]},_0x1d3398=>{}),logger[_0x57a341(0x1b2)](_0x57a341(0x374)+config[_0x57a341(0x20b)]);}async function loadCoins(_0x16c447){const _0x396e84=_0x3916db;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x312d86,_0x366aa6=0x0,_0x57bdf3=0x0;_0x16c447[_0x396e84(0x32b)](_0x5ad5d2=>{const _0x366513=_0x396e84;loading[_0x366513(0x208)]['push'](_0x5ad5d2);}),loadingCanceled=![];let _0x5bf5c4=![];while(_0x312d86!=_0x16c447[_0x396e84(0x205)]+maxLoadingProgress){_0x312d86=loadingProgress,_0x16c447['forEach'](_0x2e036e=>{const _0x10c533=_0x396e84;if(gTicker[noslash(_0x2e036e)]){loading[_0x10c533(0x208)]=loading[_0x10c533(0x208)][_0x10c533(0x2d9)](_0x5a4966=>_0x5a4966!=_0x2e036e);if(!watchedSymbols[_0x10c533(0x312)](_0x2e036e))watchedSymbols[_0x10c533(0x22a)](_0x2e036e);_0x312d86++;}}),loading[_0x396e84(0x289)]=Math[_0x396e84(0x323)](_0x312d86/(_0x16c447[_0x396e84(0x205)]+maxLoadingProgress)*0x64);loading[_0x396e84(0x289)]!=0x64&&(_0x57bdf3>0x1e*0x5&&(loading[_0x396e84(0x310)]=!![],emitLoadingProgress()),_0x57bdf3>0x78*0x5&&!_0x5bf5c4&&(_0x5bf5c4=!![],logHistory(_0x396e84(0x28d),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x396e84(0x1cc)](',\x20')+_0x396e84(0x340)),logHistory('error',_0x396e84(0x261)+loadCoinsRetryInterval/0xea60+_0x396e84(0x1f9)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x396e84(0x372)]=!![],emitLoadingProgress();break;}else _0x366aa6!=loading['progress']&&(_0x366aa6=loading['progress'],emitLoadingProgress()),_0x57bdf3++,await sleep(0xc8);}_0x312d86==_0x16c447[_0x396e84(0x205)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x396e84(0x2b7)},_0x513af3=>{}),_0x5bf5c4&&logHistory('success',_0x396e84(0x278)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x472558=_0x3916db;proxyEmit(_0x472558(0x239),loading);}async function getFiat(){const _0x3fae7f=_0x3916db;let _0x4a2636=gTicker[stablecoins[_0x3fae7f(0x260)][_0x3fae7f(0x27e)]],_0x123e54=gTicker[stablecoins[_0x3fae7f(0x293)][_0x3fae7f(0x27e)]];return{'eur':Number(_0x4a2636),'usd':Number(_0x123e54)};}function capitalize(_0x22752a){const _0x256fa8=_0x3916db;return _0x22752a['substring'](0x0,0x1)[_0x256fa8(0x204)]()+_0x22752a[_0x256fa8(0x296)](0x1);}function supportedExchanges(){const _0x4dab22=_0x3916db,_0x5e08b8=['ws',_0x4dab22(0x2c5),_0x4dab22(0x2f2),'watchTrades','watchOrders',_0x4dab22(0x350),_0x4dab22(0x1d4),_0x4dab22(0x316),_0x4dab22(0x1e4)];let _0x3662e3=[],_0x825f3d=[],_0x2fb5a5=ccxt[_0x4dab22(0x272)][_0x4dab22(0x28e)];_0x2fb5a5[_0x4dab22(0x32b)](_0x139e6e=>{const _0x48750d=_0x4dab22;try{const _0x1ea6c1=new ccxt['pro'][_0x139e6e]();_0x825f3d[_0x48750d(0x22a)](_0x1ea6c1);}catch(_0x5925c7){}}),_0x825f3d['forEach'](_0x2e09ae=>{const _0x4a6b0b=_0x4dab22;let _0x431404=0x0;_0x5e08b8[_0x4a6b0b(0x32b)](_0x28c0c4=>{const _0x42a17b=_0x4a6b0b;_0x28c0c4 in _0x2e09ae[_0x42a17b(0x2b8)]&&_0x2e09ae[_0x42a17b(0x2b8)][_0x28c0c4]&&_0x431404++;}),_0x431404==_0x5e08b8['length']&&_0x3662e3[_0x4a6b0b(0x22a)](capitalize(_0x2e09ae['id']));});let _0x668705=[];return _0x2fb5a5[_0x4dab22(0x32b)](_0x554d43=>{const _0x27fc87=_0x4dab22;_0x554d43=capitalize(_0x554d43);if(!_0x3662e3['includes'](_0x554d43))_0x668705[_0x27fc87(0x22a)](_0x554d43);}),_0x3662e3;}function setStartDatePerformance(){const _0x5ed9fd=_0x3916db;if(config&&config[_0x5ed9fd(0x201)][0x0][_0x5ed9fd(0x23d)][_0x5ed9fd(0x205)]!=0x0){const _0x1184fd=config[_0x5ed9fd(0x201)][0x0][_0x5ed9fd(0x23d)];dbPerformance[_0x5ed9fd(0x218)](_0x5ed9fd(0x330))[_0x5ed9fd(0x34b)]({'date':config['startdate']})['assign']({'coins':_0x1184fd})[_0x5ed9fd(0x2e7)]();}}async function recreateCoinResults(){const _0x4c1895=_0x3916db;recreationNeeded=![];let _0x161a23,_0x547b6a=[];try{for(const _0x27c2d8 of currentCoins){if(_0x27c2d8[_0x4c1895(0x27e)]!=config[_0x4c1895(0x266)]){let _0x32ab0c=0x0,_0x423a3e,_0x2525f9;_0x161a23=await getAllEventOrders(_0x27c2d8[_0x4c1895(0x20e)]);if(_0x161a23['length']>0x0)_0x161a23[_0x4c1895(0x32b)](_0x22f5bf=>{const _0x3e89cb=_0x4c1895,_0x587888=_0x27c2d8[_0x3e89cb(0x20e)][_0x3e89cb(0x312)](config['basecoin']+'/');_0x547b6a[_0x3e89cb(0x22a)]({'datetime':_0x22f5bf['datetime'],'coin':_0x27c2d8[_0x3e89cb(0x27e)],'symbol':_0x27c2d8[_0x3e89cb(0x20e)],'side':_0x22f5bf['side'],'reverse':_0x587888,'amount':formatResult(_0x22f5bf[_0x3e89cb(0x24e)],0x8),'filled':formatResult(_0x22f5bf['filled'],0x8),'price':formatResult(_0x22f5bf['price'],0x8)}),_0x32ab0c=_0x22f5bf[_0x3e89cb(0x24c)]==_0x3e89cb(0x28b)?_0x32ab0c+_0x22f5bf[_0x3e89cb(0x24e)]:_0x32ab0c-_0x22f5bf[_0x3e89cb(0x24e)];if(!_0x2525f9)_0x2525f9=_0x22f5bf[_0x3e89cb(0x1c9)];});_0x423a3e=_0x27c2d8[_0x4c1895(0x329)]-_0x32ab0c;let _0x439958;config[_0x4c1895(0x201)][_0x4c1895(0x32b)](_0x27a8b3=>{const _0xeec7e2=_0x4c1895;!_0x439958&&(_0x439958=_0x27a8b3[_0xeec7e2(0x23d)][_0xeec7e2(0x34b)](_0x2106fb=>_0x2106fb['coin']==_0x27c2d8['coin']),_0x439958&&(_0x423a3e=_0x439958['number'],_0x2525f9=_0x439958[_0xeec7e2(0x1c9)]));});let _0xbfff5=dbCoinResults['get']('coins')[_0x4c1895(0x34b)]({'coin':_0x27c2d8[_0x4c1895(0x27e)]})[_0x4c1895(0x30f)]();_0xbfff5={'coin':_0x27c2d8['coin'],'number':_0x423a3e,'breakeven':_0x2525f9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x4c1895(0x1b4))['find']({'coin':_0x27c2d8[_0x4c1895(0x27e)]})[_0x4c1895(0x2cc)](_0xbfff5)[_0x4c1895(0x2e7)]();}}_0x547b6a[_0x4c1895(0x22d)]((_0x4362d0,_0xdb52eb)=>_0x4362d0[_0x4c1895(0x25e)]>_0xdb52eb[_0x4c1895(0x25e)]?0x1:_0xdb52eb[_0x4c1895(0x25e)]>_0x4362d0[_0x4c1895(0x25e)]?-0x1:0x0);let _0x42cf8e=0x0;for(let _0x587b9c of _0x547b6a){await updateCoinResults(_0x587b9c,!![]);}}catch(_0x90dc96){await handleError(_0x90dc96,_0x4c1895(0x35e));}}async function getAllEventOrders(_0x59d921){const _0xd76b24=_0x3916db;let _0x2de7d9=[],_0x2615cb=dbLogs[_0xd76b24(0x218)](_0xd76b24(0x238))[_0xd76b24(0x2d9)](_0x33f5ae=>{const _0x4bfcb8=_0xd76b24,_0x1aaa5f=_0x33f5ae[_0x4bfcb8(0x274)][_0x4bfcb8(0x1f0)]();return _0x1aaa5f[_0x4bfcb8(0x312)](_0x59d921['toLowerCase']())&&(_0x1aaa5f['includes'](_0x4bfcb8(0x32c))&&_0x1aaa5f['includes']('order')||_0x1aaa5f[_0x4bfcb8(0x312)]('filled')&&_0x1aaa5f[_0x4bfcb8(0x312)](_0x4bfcb8(0x229)));})[_0xd76b24(0x1d3)](_0xd76b24(0x1ba))['value']();return _0x2615cb[_0xd76b24(0x32b)](_0x520156=>{const _0x2e9aaa=_0xd76b24,_0x3ec0fa=_0x520156[_0x2e9aaa(0x274)][_0x2e9aaa(0x312)](_0x2e9aaa(0x262))?'sell':_0x2e9aaa(0x28b),_0x1886dd=/#([0-9]|\.)+\s/i,_0x2781ff=Number(_0x1886dd[_0x2e9aaa(0x240)](_0x520156[_0x2e9aaa(0x274)])[0x0][_0x2e9aaa(0x1cf)](0x1)),_0x1c7cc3=/@([0-9]|\.)+$/i,_0xb62908=Number(_0x1c7cc3[_0x2e9aaa(0x240)](_0x520156[_0x2e9aaa(0x274)])[0x0][_0x2e9aaa(0x1cf)](0x1));_0x2de7d9['push']({'datetime':_0x520156['time'],'coin':symbolToCoin(_0x59d921),'symbol':_0x59d921,'side':_0x3ec0fa,'amount':_0x2781ff,'filled':_0x2781ff,'price':_0xb62908});}),_0x2de7d9;}async function validate24hChanges(){const _0x502ced=_0x3916db;for(const _0x578a1a of currentCoins){if(_0x578a1a[_0x502ced(0x27e)]!=config[_0x502ced(0x266)]){let _0x323839;_0x578a1a[_0x502ced(0x34d)]?_0x323839=formatResult((0x1/(gChange[_0x578a1a[_0x502ced(0x20e)]]/0x64+0x1)-0x1)*0x64,0x3):_0x323839=gChange[_0x578a1a[_0x502ced(0x20e)]],_0x323839<config[_0x502ced(0x300)]&&(logHistory(_0x502ced(0x28d),_0x578a1a[_0x502ced(0x27e)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x323839+'%'),logHistory('error',_0x502ced(0x2a1)),logHistory('error',_0x502ced(0x220)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1ee52b,_0xf872c2){const _0x811518=_0x3916db;if(!_0x1ee52b)return!![];const _0xe8b4ff=_0xf872c2[_0x811518(0x1f2)]('.'),_0x5ee66f=_0x1ee52b['split']('.');for(var _0x1f8b1f=0x0;_0x1f8b1f<_0x5ee66f[_0x811518(0x205)];_0x1f8b1f++){const _0x6e2b45=~~_0x5ee66f[_0x1f8b1f],_0x484d4b=~~_0xe8b4ff[_0x1f8b1f];if(_0x6e2b45<_0x484d4b)return!![];if(_0x6e2b45>_0x484d4b)return![];}return![];}async function oneTimeMigration(){const _0x4123e3=_0x3916db;let _0x3830a3=dbLogs[_0x4123e3(0x218)]('version')['value']();if(isOlderVersion(_0x3830a3,_0x4123e3(0x34f))){let _0x4beee5=[];const _0x18c320=dbLogs[_0x4123e3(0x218)](_0x4123e3(0x238))['value']();_0x18c320[_0x4123e3(0x32b)](_0x5915e5=>{const _0x1a4b65=_0x4123e3;_0x4beee5['push']({'time':_0x5915e5[_0x1a4b65(0x1ba)],'type':_0x5915e5[_0x1a4b65(0x2e3)],'event':_0x5915e5[_0x1a4b65(0x274)]});}),dbLogs['get']('logs')['assign'](_0x4beee5)[_0x4123e3(0x2e7)]();}let _0x2751b5=dbConfig['get'](_0x4123e3(0x315))[_0x4123e3(0x30f)]();if(isOlderVersion(_0x2751b5,_0x4123e3(0x34f))){let _0xe4727c=dbConfig[_0x4123e3(0x218)]('bot')[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x30f)]();if(_0xe4727c){let _0x1338e2=[];_0xe4727c[_0x4123e3(0x34e)][_0x4123e3(0x32b)](_0x473031=>{const _0x42227d=_0x4123e3;_0x1338e2['push']({'coin':_0x473031[_0x42227d(0x27e)],'number':_0x473031[_0x42227d(0x23e)],'price':_0x473031[_0x42227d(0x371)]}),delete _0x473031[_0x42227d(0x23e)],delete _0x473031['startprice'];});if(_0x1338e2['length']!==0x0)fs[_0x4123e3(0x257)](configbackuppath+(_0x4123e3(0x282)+botID+'.json'),JSON['stringify'](_0x1338e2,null,0x4),function(_0x5218c9){if(_0x5218c9){}});const _0x5ace48=(_0x4b5c39,_0x1f40c9)=>{const _0x5390d5=_0x4123e3;let _0x15293b=[];_0x1f40c9[_0x5390d5(0x32b)](_0x41d21b=>{const _0x15a5a3=_0x5390d5,_0x32b742=_0x4b5c39['find'](_0x1602af=>_0x1602af[_0x15a5a3(0x27e)]==_0x41d21b['coin']);if(!_0x32b742)_0x15293b[_0x15a5a3(0x22a)](_0x41d21b);});let _0x39746d=[];return _0x4b5c39[_0x5390d5(0x32b)](_0x5ad370=>{const _0x3558bb=_0x5390d5,_0x492593=_0x1f40c9[_0x3558bb(0x34b)](_0x1e0375=>_0x1e0375['coin']==_0x5ad370[_0x3558bb(0x27e)]);if(!_0x492593||_0x492593[_0x3558bb(0x329)]==0x0&&_0x5ad370[_0x3558bb(0x329)]!=0x0)_0x39746d[_0x3558bb(0x22a)](_0x5ad370);}),{'missingDay1':_0x15293b,'notInDay2':_0x39746d};},_0x379d8f=dbPerformance[_0x4123e3(0x218)](_0x4123e3(0x330))[_0x4123e3(0x1f5)]()[_0x4123e3(0x30f)]();if(_0x379d8f[_0x4123e3(0x205)]>0x1){const {missingDay1:_0x408969,notInDay2:_0x17a2b1}=_0x5ace48(_0x1338e2,_0x379d8f[0x1]['coins']);_0x1338e2=[..._0x1338e2,..._0x408969],_0x17a2b1[_0x4123e3(0x32b)](_0x58a6a1=>{const _0x346152=_0x4123e3;let _0x4a12cd=_0x1338e2[_0x346152(0x227)](_0x45ce26=>_0x45ce26['coin']==_0x58a6a1[_0x346152(0x27e)]);_0x4a12cd!=-0x1&&_0x1338e2['splice'](_0x4a12cd,0x1);});}_0x1338e2[_0x4123e3(0x22d)]((_0x452146,_0x11e8cc)=>_0x452146['coin']>_0x11e8cc['coin']?0x1:_0x11e8cc[_0x4123e3(0x27e)]>_0x452146['coin']?-0x1:0x0);let _0x478220=[{'date':_0xe4727c[_0x4123e3(0x28f)],'changes':_0x1338e2}];_0x379d8f[_0x4123e3(0x205)]>0x2&&_0x379d8f[_0x4123e3(0x32b)]((_0x4ed9e7,_0x2196c0)=>{const _0x5315db=_0x4123e3;if(_0x2196c0>0x0&&_0x2196c0<_0x379d8f[_0x5315db(0x205)]-0x1){const {missingDay1:_0x1b6649,notInDay2:_0x2dfd42}=_0x5ace48(_0x379d8f[_0x2196c0][_0x5315db(0x1b4)],_0x379d8f[_0x2196c0+0x1][_0x5315db(0x1b4)]);_0x1338e2=[],(_0x1b6649[_0x5315db(0x205)]!=0x0||_0x2dfd42[_0x5315db(0x205)]!=0x0)&&(_0x1b6649[_0x5315db(0x205)]!=0x0&&_0x1338e2['push'](..._0x1b6649),_0x2dfd42['length']!=0x0&&(_0x2dfd42[_0x5315db(0x32b)](_0x58c5fc=>{const _0x48e4af=_0x5315db;_0x58c5fc[_0x48e4af(0x329)]=-_0x58c5fc[_0x48e4af(0x329)];}),_0x1338e2[_0x5315db(0x22a)](..._0x2dfd42)),_0x1338e2[_0x5315db(0x22d)]((_0x3b358b,_0x565803)=>_0x3b358b['coin']>_0x565803[_0x5315db(0x27e)]?0x1:_0x565803['coin']>_0x3b358b['coin']?-0x1:0x0),_0x478220[_0x5315db(0x22a)]({'date':_0x379d8f[_0x2196c0+0x1][_0x5315db(0x339)],'changes':_0x1338e2}));}}),dbConfig[_0x4123e3(0x218)](_0x4123e3(0x1f1))[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x2cc)]({..._0xe4727c,'liquidity':_0x478220})[_0x4123e3(0x2e7)]();}}if(isOlderVersion(_0x2751b5,_0x4123e3(0x270))){let _0x3fb79d=dbConfig[_0x4123e3(0x218)](_0x4123e3(0x1f1))[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x30f)]();if(_0x3fb79d){const _0x356df5=_0x3fb79d[_0x4123e3(0x2fa)],_0x4bf36f=_0x356df5?capitalize(_0x356df5):'Binance';dbConfig['get'](_0x4123e3(0x1f1))['find']({'botID':botID})['assign']({'exchange':_0x4bf36f})['write']();}}if(isOlderVersion(_0x2751b5,_0x4123e3(0x29b))){let _0x22c489=dbConfig[_0x4123e3(0x218)](_0x4123e3(0x1f1))[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x30f)]();if(_0x22c489){const _0x201b90=_0x22c489[_0x4123e3(0x367)],_0x20ff93=_0x201b90?_0x4123e3(0x308):![];dbConfig['get']('bot')[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x2cc)]({'marketcapEnabled':_0x20ff93})['write']();}}if(isOlderVersion(_0x2751b5,_0x4123e3(0x2bb))){let _0x28673c=dbConfig[_0x4123e3(0x218)](_0x4123e3(0x1f1))[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x30f)]();if(_0x28673c){const _0x5cd39c=_0x28673c[_0x4123e3(0x2af)],_0x4f2791=_0x5cd39c?'update-liquidity':![];dbConfig['get'](_0x4123e3(0x1f1))[_0x4123e3(0x34b)]({'botID':botID})[_0x4123e3(0x2cc)]({'autoliquidity':_0x4f2791})[_0x4123e3(0x2e7)]();}}let _0x3afebd=dbPerformance[_0x4123e3(0x218)](_0x4123e3(0x315))[_0x4123e3(0x30f)]();isOlderVersion(_0x3afebd,_0x4123e3(0x34f))&&setStartDatePerformance();let _0x2b3caa=dbCoinResults['get'](_0x4123e3(0x315))[_0x4123e3(0x30f)]();if(isOlderVersion(_0x2b3caa,'2.5.0')){let _0x231317=dbCoinResults[_0x4123e3(0x218)]('coins')['value']();if(_0x231317[_0x4123e3(0x205)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1ed3d4=_0x3916db;dbConfig[_0x1ed3d4(0x37a)](_0x1ed3d4(0x315),serverversion)['write'](),dbPerformance[_0x1ed3d4(0x37a)]('version',serverversion)[_0x1ed3d4(0x2e7)](),dbLogs[_0x1ed3d4(0x37a)](_0x1ed3d4(0x315),serverversion)[_0x1ed3d4(0x2e7)](),dbCoinResults[_0x1ed3d4(0x37a)]('version',serverversion)[_0x1ed3d4(0x2e7)]();}function getConfiguration(_0x11911e){const _0x59bc53=_0x3916db;let _0x2ca6df=dbConfig[_0x59bc53(0x218)](_0x59bc53(0x1f1))['find']({'botID':_0x11911e})[_0x59bc53(0x30f)]();if(_0x2ca6df){let _0x146e19=![];typeof _0x2ca6df[_0x59bc53(0x299)]==_0x59bc53(0x28a)&&(_0x2ca6df={..._0x2ca6df,'threshold':Number(_0x2ca6df[_0x59bc53(0x299)])},_0x146e19=!![]),_0x2ca6df[_0x59bc53(0x300)]==undefined&&(_0x2ca6df={..._0x2ca6df,'change24h':-0x14},_0x146e19=!![]),_0x2ca6df['fiat']==undefined&&(_0x2ca6df={..._0x2ca6df,'fiat':_0x59bc53(0x21f)},_0x146e19=!![]),_0x2ca6df['onepagemode']==undefined&&(_0x2ca6df={..._0x2ca6df,'onepagemode':settings[_0x59bc53(0x2c7)]},_0x146e19=!![]),_0x2ca6df[_0x59bc53(0x202)]==undefined&&(_0x2ca6df={..._0x2ca6df,'colorscheme':_0x59bc53(0x1fd)},_0x146e19=!![]),_0x2ca6df[_0x59bc53(0x2af)]==undefined&&(_0x2ca6df={..._0x2ca6df,'autoliquidity':'update-liquidity'},_0x146e19=!![]),_0x2ca6df['marketcapApi']==undefined&&(_0x2ca6df={..._0x2ca6df,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x146e19=!![]),_0x2ca6df[_0x59bc53(0x367)]==undefined&&(_0x2ca6df={..._0x2ca6df,'marketcapEnabled':![]},_0x146e19=!![]),_0x146e19&&(_0x2ca6df={'botID':_0x2ca6df[_0x59bc53(0x1bf)],'exchange':_0x2ca6df[_0x59bc53(0x2fa)],'apiKey':_0x2ca6df[_0x59bc53(0x31e)],'apiSecret':_0x2ca6df['apiSecret'],'apiPassword':_0x2ca6df[_0x59bc53(0x1b7)],'basecoin':_0x2ca6df[_0x59bc53(0x266)],'botname':_0x2ca6df[_0x59bc53(0x213)],'showname':_0x2ca6df[_0x59bc53(0x1f4)],'threshold':_0x2ca6df[_0x59bc53(0x299)],'ordertype':_0x2ca6df[_0x59bc53(0x30a)],'timeout':_0x2ca6df[_0x59bc53(0x310)],'fiat':_0x2ca6df['fiat'],'startdate':_0x2ca6df[_0x59bc53(0x28f)],'recreate':_0x2ca6df[_0x59bc53(0x269)],'timeshift':_0x2ca6df[_0x59bc53(0x326)],'onepagemode':_0x2ca6df['onepagemode'],'headless':_0x2ca6df[_0x59bc53(0x20b)],'cooldown':_0x2ca6df[_0x59bc53(0x21b)],'change24h':_0x2ca6df[_0x59bc53(0x300)],'emojibuy':_0x2ca6df[_0x59bc53(0x291)],'emojisell':_0x2ca6df[_0x59bc53(0x233)],'colorscheme':_0x2ca6df[_0x59bc53(0x202)],'marketcapApi':_0x2ca6df[_0x59bc53(0x1bc)],'marketcapEnabled':_0x2ca6df['marketcapEnabled'],'portfolio':_0x2ca6df[_0x59bc53(0x34e)],'autoliquidity':_0x2ca6df[_0x59bc53(0x2af)],'liquidity':_0x2ca6df[_0x59bc53(0x201)],'openOrders':_0x2ca6df['openOrders']},dbConfig[_0x59bc53(0x218)](_0x59bc53(0x1f1))['remove']()['write'](),dbConfig[_0x59bc53(0x218)](_0x59bc53(0x1f1))[_0x59bc53(0x22a)](_0x2ca6df)[_0x59bc53(0x2e7)]());}else _0x2ca6df={'botID':_0x11911e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x59bc53(0x2b9)+_0x11911e,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x59bc53(0x21f),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x59bc53(0x326)],'onepagemode':settings[_0x59bc53(0x2c7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x59bc53(0x1fd),'marketcapApi':settings[_0x59bc53(0x1bc)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x59bc53(0x1ea),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2ca6df;}function emittedConfiguration(){const _0x519a1f=_0x3916db;let _0x2ecd90;if(config['apiKey']=='')_0x2ecd90={...config,'configstate':_0x519a1f(0x29a)};else config[_0x519a1f(0x31e)]==_0x519a1f(0x276)?_0x2ecd90={...config,'configstate':_0x519a1f(0x335)}:(_0x2ecd90={...config,'apiKey':_0x519a1f(0x216),'apiSecret':_0x519a1f(0x216)},config[_0x519a1f(0x1b7)]&&(_0x2ecd90[_0x519a1f(0x1b7)]=_0x519a1f(0x216)));return _0x2ecd90[_0x519a1f(0x1e9)]=enableFiatToggle,_0x2ecd90;}function getSettings(){const _0xfa021b=_0x3916db;return dbSettings['get'](_0xfa021b(0x263))[_0xfa021b(0x30f)]();}function getSecure(){const _0x38b1c9=_0x3916db;return dbSecure[_0x38b1c9(0x218)]('secure')[_0x38b1c9(0x30f)]()||{};}function updateTimeshift(_0x54278c){const _0x17bc9d=_0x3916db;let _0x1677bd=dbConfig[_0x17bc9d(0x218)]('bot')[_0x17bc9d(0x34b)]({'botID':botID})[_0x17bc9d(0x30f)]();_0x1677bd&&dbConfig[_0x17bc9d(0x218)](_0x17bc9d(0x1f1))[_0x17bc9d(0x34b)]({'botID':botID})['assign']({'timeshift':_0x54278c})[_0x17bc9d(0x2e7)](),config[_0x17bc9d(0x326)]=_0x54278c,proxyEmit(_0x17bc9d(0x1c0),emittedConfiguration());}function updateOnepagemode(_0x25f7d3){const _0x227868=_0x3916db;let _0x1faf02=dbConfig[_0x227868(0x218)](_0x227868(0x1f1))[_0x227868(0x34b)]({'botID':botID})[_0x227868(0x30f)]();_0x1faf02&&dbConfig[_0x227868(0x218)](_0x227868(0x1f1))[_0x227868(0x34b)]({'botID':botID})[_0x227868(0x2cc)]({'onepagemode':_0x25f7d3})[_0x227868(0x2e7)](),config[_0x227868(0x2c7)]=_0x25f7d3,proxyEmit(_0x227868(0x1c0),emittedConfiguration());}function updateMarketcapApi(_0x47a38f){const _0x3797f6=_0x3916db,_0x5e70a7=_0x47a38f?!![]:![];let _0x53dba7=dbConfig[_0x3797f6(0x218)]('bot')[_0x3797f6(0x34b)]({'botID':botID})['value']();_0x53dba7&&dbConfig[_0x3797f6(0x218)](_0x3797f6(0x1f1))[_0x3797f6(0x34b)]({'botID':botID})[_0x3797f6(0x2cc)]({'marketcapApi':_0x5e70a7})['write'](),config['marketcapApi']=_0x5e70a7,getMarketCap(),proxyEmit(_0x3797f6(0x1c0),emittedConfiguration());}async function storeConfiguration(_0x33e0b3){const _0x5a8c35=_0x3916db;logger[_0x5a8c35(0x1b2)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x2defe6=![],_0x699c0d=![],_0xacd717=[];_0x33e0b3[_0x5a8c35(0x34e)][_0x5a8c35(0x32b)](_0x356d3f=>{const _0x36da22=_0x5a8c35;if(!_0x356d3f[_0x36da22(0x345)]&&_0x356d3f['coin']!=_0x33e0b3[_0x36da22(0x266)])_0xacd717[_0x36da22(0x22a)](_0x356d3f[_0x36da22(0x20e)]);}),_0xacd717['forEach'](_0xef703e=>{const _0x62ae6c=_0x5a8c35,_0x374039=currentCoins[_0x62ae6c(0x34b)](_0x1d430f=>_0x1d430f[_0x62ae6c(0x20e)]==_0xef703e);!_0x374039&&(_0x2defe6=!![]);}),currentCoins[_0x5a8c35(0x32b)](_0x2b16d6=>{const _0x4f9991=_0x5a8c35;if(_0x2b16d6[_0x4f9991(0x27e)]!=config[_0x4f9991(0x266)]){const _0x412929=_0xacd717[_0x4f9991(0x34b)](_0x463a55=>_0x463a55==_0x2b16d6[_0x4f9991(0x20e)]);!_0x412929&&(_0x2defe6=!![]);}}),_0x33e0b3[_0x5a8c35(0x34e)][_0x5a8c35(0x32b)](_0x5e169f=>{const _0x532bc9=_0x5a8c35,_0x9149a8=config[_0x532bc9(0x34e)]['find'](_0x486e7a=>_0x486e7a[_0x532bc9(0x27e)]==_0x5e169f[_0x532bc9(0x27e)]);if(_0x9149a8&&_0x5e169f[_0x532bc9(0x2db)]!=_0x9149a8[_0x532bc9(0x2db)])_0x699c0d=!![];});let _0x3fdd8e=dbConfig[_0x5a8c35(0x218)]('bot')[_0x5a8c35(0x34b)]({'botID':botID})[_0x5a8c35(0x30f)]();_0x33e0b3={..._0x33e0b3,'apiKey':decryptRSA(secure[_0x5a8c35(0x219)],_0x33e0b3[_0x5a8c35(0x31e)]),'apiSecret':decryptRSA(secure[_0x5a8c35(0x219)],_0x33e0b3['apiSecret'])};_0x33e0b3[_0x5a8c35(0x1b7)]&&(_0x33e0b3['apiPassword']=decryptRSA(secure[_0x5a8c35(0x219)],_0x33e0b3[_0x5a8c35(0x1b7)]));let _0x390d81=![];if(_0x3fdd8e){_0x33e0b3[_0x5a8c35(0x31e)]==_0x5a8c35(0x216)?_0x33e0b3['apiKey']=config[_0x5a8c35(0x31e)]:_0x390d81=!![];_0x33e0b3[_0x5a8c35(0x33e)]==_0x5a8c35(0x216)?_0x33e0b3[_0x5a8c35(0x33e)]=config['apiSecret']:_0x390d81=!![];if(_0x33e0b3[_0x5a8c35(0x1b7)]=='************')_0x33e0b3[_0x5a8c35(0x1b7)]=config[_0x5a8c35(0x1b7)];else{if(_0x33e0b3['apiPassword'])_0x390d81=!![];}dbConfig[_0x5a8c35(0x218)](_0x5a8c35(0x1f1))['find']({'botID':botID})[_0x5a8c35(0x2cc)](_0x33e0b3)['write']();}else dbConfig['get'](_0x5a8c35(0x1f1))['push'](_0x33e0b3)['write'](),_0x390d81=!![],process['send']({'status':'enabled','live':_0x5a8c35(0x2b7)},_0xd51704=>{});process[_0x5a8c35(0x23c)]({'botname':_0x33e0b3[_0x5a8c35(0x213)]},_0x9ebeef=>{}),config={..._0x33e0b3},updateBotManager(),proxyEmit(_0x5a8c35(0x2d8)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x390d81)!_0x3fdd8e?await reset(!![]):getBalances();else _0x2defe6||_0x699c0d?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1cb572){const _0xe1d63f=_0x3916db,_0xb29035={...config,'headless':_0x1cb572[_0xe1d63f(0x20b)]};let _0x4848e1=dbConfig[_0xe1d63f(0x218)]('bot')[_0xe1d63f(0x34b)]({'botID':botID})['value']();_0x4848e1&&dbConfig[_0xe1d63f(0x218)](_0xe1d63f(0x1f1))[_0xe1d63f(0x34b)]({'botID':botID})[_0xe1d63f(0x2cc)](_0xb29035)[_0xe1d63f(0x2e7)](),config={..._0xb29035},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0xbf2736){const _0x226b50=_0x3916db,_0x32ba57={...config,'fiat':_0xbf2736};let _0xb4faa2=dbConfig[_0x226b50(0x218)](_0x226b50(0x1f1))[_0x226b50(0x34b)]({'botID':botID})[_0x226b50(0x30f)]();_0xb4faa2&&dbConfig[_0x226b50(0x218)](_0x226b50(0x1f1))[_0x226b50(0x34b)]({'botID':botID})[_0x226b50(0x2cc)](_0x32ba57)[_0x226b50(0x2e7)](),config={..._0x32ba57},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x4d4047=_0x3916db;logger[_0x4d4047(0x288)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,_0x4d4047(0x2e9)+botID+'-events.json')))fs['unlinkSync'](path[_0x4d4047(0x1cc)](configpath,_0x4d4047(0x2e9)+botID+_0x4d4047(0x2a3)));if(fs['existsSync'](path[_0x4d4047(0x1cc)](configpath,_0x4d4047(0x2e9)+botID+_0x4d4047(0x301))))fs[_0x4d4047(0x1db)](path[_0x4d4047(0x1cc)](configpath,_0x4d4047(0x2e9)+botID+_0x4d4047(0x301)));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x4d4047(0x1c5))))fs[_0x4d4047(0x1db)](path['join'](configpath,_0x4d4047(0x2e9)+botID+'-results.json'));}catch(_0x2bf756){if(_0x2bf756)logger[_0x4d4047(0x288)]('Error\x20while\x20deleting\x20files:\x20',_0x2bf756);}const _0xfb73e6=getDate();let _0x10ba8b=[];currentCoins[_0x4d4047(0x32b)](_0x24cfe1=>{const _0x2e27df=_0x4d4047;_0x10ba8b[_0x2e27df(0x22a)]({'coin':_0x24cfe1[_0x2e27df(0x27e)],'number':_0x24cfe1[_0x2e27df(0x329)],'price':_0x24cfe1[_0x2e27df(0x2b6)]});});let _0x528c31=dbConfig['get'](_0x4d4047(0x1f1))[_0x4d4047(0x34b)]({'botID':botID})[_0x4d4047(0x30f)]();_0x528c31&&(dbConfig[_0x4d4047(0x218)]('bot')[_0x4d4047(0x34b)]({'botID':botID})[_0x4d4047(0x2cc)]({'liquidity':[{'date':_0xfb73e6,'changes':_0x10ba8b}]})[_0x4d4047(0x2e7)](),config[_0x4d4047(0x201)]=[]),restartBot(!![]);}function noslash(_0xc690f1){const _0x104d1f=_0x3916db;return _0xc690f1[_0x104d1f(0x1ff)]('/','');}function updateHighestFee(_0x28a1ba){const _0x2c1947=_0x3916db;if(_0x28a1ba['reverse']){let _0x453f74={'filled':_0x28a1ba[_0x2c1947(0x24e)]*_0x28a1ba[_0x2c1947(0x1c9)],'amount':_0x28a1ba['filled']*_0x28a1ba[_0x2c1947(0x1c9)],'side':_0x28a1ba[_0x2c1947(0x24c)]==_0x2c1947(0x262)?_0x2c1947(0x28b):_0x2c1947(0x262),'price':0x1/_0x28a1ba['price']};_0x28a1ba={..._0x28a1ba,..._0x453f74};}const _0x4fe0c7=defaultFee*_0x28a1ba['filled']*_0x28a1ba[_0x2c1947(0x1c9)];lastFees[_0x2c1947(0x1ec)][_0x2c1947(0x205)]===0x14&&lastFees[_0x2c1947(0x1ec)][_0x2c1947(0x2f3)](),lastFees[_0x2c1947(0x1ec)]['push'](_0x4fe0c7),lastFees['highest']=Math[_0x2c1947(0x295)](...lastFees[_0x2c1947(0x1ec)]);}async function updateNumberCoinsCcxt(_0x413002){const _0x30ee0f=_0x3916db;logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x284)+_0x413002[_0x30ee0f(0x20e)]+_0x30ee0f(0x352)+_0x413002['status']+'\x20|\x20'+_0x413002[_0x30ee0f(0x24e)]+_0x30ee0f(0x365)+_0x413002[_0x30ee0f(0x21a)]+_0x30ee0f(0x352)+_0x413002['id']);let _0x2f2c3f=_0x413002[_0x30ee0f(0x2c2)],_0x1d2953=![];currentCoins['forEach'](_0x271fed=>{const _0x2dcb20=_0x30ee0f;_0x271fed[_0x2dcb20(0x20e)]==_0x413002['symbol']&&(_0x1d2953=!![]);});if(!_0x1d2953)return;const _0x1f3c97=currentCoins[_0x30ee0f(0x34b)](_0x876b88=>_0x876b88[_0x30ee0f(0x20e)]==_0x413002[_0x30ee0f(0x20e)]),_0x476577=_0x1f3c97[_0x30ee0f(0x27e)],_0x3ff395=_0x3e0aa2=>{const _0x227e80=_0x30ee0f,_0x2ec693=currentCoins[_0x227e80(0x34b)](_0x16fc4a=>_0x16fc4a['symbol']==_0x413002[_0x227e80(0x20e)]);if(_0x2ec693)_0x2ec693[_0x227e80(0x268)]=_0x3e0aa2;};let _0x8a018d=![];for(const _0x3d1709 of lastOrders){const _0x418efe=0x64,_0x152b5a=0x1388;let _0x18dcbc=0x0;while(!_0x3d1709[_0x30ee0f(0x33a)]&&_0x18dcbc*_0x418efe<_0x152b5a){_0x18dcbc++,await sleep(_0x418efe);}if(_0x18dcbc>0x0)logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x2f6)+_0x18dcbc*_0x418efe/0x3e8+_0x30ee0f(0x343));_0x3d1709[_0x30ee0f(0x33a)]==_0x413002['id']&&(_0x8a018d=!![]);}if(_0x2f2c3f==_0x30ee0f(0x337)){_0x3ff395(_0x30ee0f(0x337));if(_0x413002[_0x30ee0f(0x24e)]>0x0&&_0x413002[_0x30ee0f(0x24e)]<_0x413002[_0x30ee0f(0x21a)]){if(_0x8a018d){setBlockTransactionDetection(!![]),logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x2ae)+_0x413002[_0x30ee0f(0x24e)]+_0x30ee0f(0x331)+_0x413002['id']);const _0x5c61d0=await getCoins(balanceUpdateDelay,undefined,undefined,_0x476577);[currentCoins,currentCoinsAll]=_0x5c61d0,setBlockTransactionDetection(![]);}else logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x2ae)+_0x413002[_0x30ee0f(0x24e)]+_0x30ee0f(0x332)+_0x413002['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2f2c3f==_0x30ee0f(0x22f)){_0x3ff395(_0x30ee0f(0x22f)),lastOrders=lastOrders['filter'](_0x37428f=>_0x37428f[_0x30ee0f(0x20e)]!=_0x413002[_0x30ee0f(0x20e)]);const _0x25fc21=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x25fc21,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2f2c3f==_0x30ee0f(0x1dc)){if(lastOrders)for(const _0x4de197 of lastOrders){if(_0x4de197[_0x30ee0f(0x33a)]==_0x413002['id']){logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x2c8)+_0x413002['id']),_0x8a018d=!![];if(_0x4de197[_0x30ee0f(0x24e)]==0x0){setBlockTransactionDetection(!![]),logger[_0x30ee0f(0x1b2)](_0x30ee0f(0x304)+_0x413002['id']);if(_0x413002[_0x30ee0f(0x363)])_0x4de197[_0x30ee0f(0x1c9)]=_0x413002['average'];else{if(_0x413002[_0x30ee0f(0x1c9)])_0x4de197[_0x30ee0f(0x1c9)]=_0x413002[_0x30ee0f(0x1c9)];else{}}_0x4de197['filled']=_0x413002['filled'],updateHighestFee(_0x4de197);const _0x51869d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x476577);[currentCoins,currentCoinsAll]=_0x51869d,setBlockTransactionDetection(![]),await validateOrders(),_0x3ff395('filled'),_0x4de197['fee']={'currency':_0x413002[_0x30ee0f(0x24d)]?_0x413002[_0x30ee0f(0x24d)][_0x30ee0f(0x23f)]:null,'cost':_0x413002['fee']?_0x413002['fee'][_0x30ee0f(0x307)]:0x0},await updateCoinResults(_0x4de197);}}}!_0x8a018d&&(logger[_0x30ee0f(0x1b2)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x413002['id']),_0x3ff395(_0x30ee0f(0x24e)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4c77ff=JSON[_0x30ee0f(0x2fc)](lastBalances[_0x30ee0f(0x34e)]);const _0x4a5317=_0x4c77ff[_0x30ee0f(0x34b)](_0x1c72f4=>_0x1c72f4['symbol']==_0x413002['symbol']);if(_0x4a5317){if(_0x2f2c3f==_0x30ee0f(0x337))_0x4a5317[_0x30ee0f(0x268)]=_0x4a5317[_0x30ee0f(0x268)]==_0x30ee0f(0x24e)?_0x30ee0f(0x24e):_0x30ee0f(0x337);else{if(_0x2f2c3f==_0x30ee0f(0x22f))_0x4a5317['orderstatus']=_0x4a5317['orderstatus']==_0x30ee0f(0x24e)?_0x30ee0f(0x24e):'canceled';else _0x2f2c3f=='closed'&&(_0x4a5317[_0x30ee0f(0x268)]=_0x30ee0f(0x24e));}}lastBalances={...lastBalances,'portfolio':JSON[_0x30ee0f(0x2b3)](_0x4c77ff)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5524cf=![];currentCoins['forEach'](_0x15cc9e=>{const _0x39f027=_0xcc5e;_0x5524cf=allOpenOrders['find'](_0x582fc0=>_0x582fc0[_0x39f027(0x20e)]==_0x15cc9e[_0x39f027(0x20e)]),_0x15cc9e[_0x39f027(0x268)]=_0x5524cf?_0x39f027(0x337):'none';});}async function fetchBalance(_0x122c88=!![]){const _0x2ac34a=_0x3916db;let _0x45dff2,_0x57aee9;try{return _0x45dff2=await exchange[_0x2ac34a(0x1e4)](),_0x57aee9=_0x45dff2[_0x2ac34a(0x321)],_0x57aee9;}catch(_0x401f33){return!_0x122c88?handleErrorNoStop(_0x401f33,_0x2ac34a(0x36c)):await handleError(_0x401f33,_0x2ac34a(0x36c)),![];}}async function getCoins(_0x2dc07f=0x0,_0x247d57=!![],_0x27e20f=config[_0x3916db(0x266)],_0x5d842e){const _0x378c1d=_0x3916db;let _0x52eab0=[],_0x2379a2=[],_0x502921=[],_0x540481;if(_0x2dc07f)await sleep(_0x2dc07f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x42c4b9=![],_0x51fccc=0x0,_0x8af580,_0x33bbcb;_0x5d842e&&(_0x8af580=currentCoins[_0x378c1d(0x34b)](_0x52a783=>_0x52a783['coin']==_0x5d842e),_0x33bbcb=_0x8af580[_0x378c1d(0x329)]);while(!_0x42c4b9){_0x540481=await fetchBalance(_0x247d57);if(_0x540481){if(_0x5d842e){if(_0x540481[_0x5d842e]!=_0x33bbcb)logger[_0x378c1d(0x1b2)](_0x378c1d(0x32d)+_0x5d842e+':\x20'+_0x540481[_0x5d842e]+'\x20('+_0x33bbcb+')'),_0x42c4b9=!![];else{logger[_0x378c1d(0x1b2)]('Invalid\x20balance\x20for\x20'+_0x5d842e+':\x20'+_0x540481[_0x5d842e]+'\x20('+_0x33bbcb+')'),_0x51fccc++;if(_0x51fccc<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x378c1d(0x231)+_0x51fccc+_0x378c1d(0x209));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x5dd810,_0x46d79d]of Object[_0x378c1d(0x2a4)](_0x540481)){_0x502921[_0x378c1d(0x22a)](_0x5dd810);}config['portfolio'][_0x378c1d(0x32b)](_0x5d9fe4=>{const _0x17d214=_0x378c1d;!_0x502921[_0x17d214(0x312)](_0x5d9fe4[_0x17d214(0x27e)])&&(_0x540481[_0x5d9fe4[_0x17d214(0x27e)]]=0x0);});if(_0x27e20f=='')for(const [_0x10e518,_0x328d06]of Object['entries'](_0x540481)){_0x328d06!=0x0&&_0x52eab0[_0x378c1d(0x22a)]({'coin':_0x10e518});}else for(const [_0x1060bb,_0x9637e3]of Object[_0x378c1d(0x2a4)](_0x540481)){const _0x9e8a04=config[_0x378c1d(0x34e)][_0x378c1d(0x34b)](_0x1865e4=>_0x1865e4[_0x378c1d(0x27e)]==_0x1060bb),_0x2a4287=_0x1060bb+'/'+_0x27e20f,_0x4e7438=_0x27e20f+'/'+_0x1060bb,_0x31b82e=currentCoins[_0x378c1d(0x34b)](_0x41f616=>_0x41f616[_0x378c1d(0x27e)]==_0x1060bb);if((_0x9637e3!=0x0||_0x9e8a04)&&(allSymbols[_0x378c1d(0x312)](_0x2a4287)||_0x1060bb==_0x27e20f))_0x31b82e?_0x52eab0[_0x378c1d(0x22a)]({..._0x31b82e,'number':Math['max'](_0x9637e3+(_0x9e8a04&&_0x9e8a04[_0x378c1d(0x2db)]||0x0),0x0)}):_0x52eab0[_0x378c1d(0x22a)]({'coin':_0x1060bb,'symbol':_0x2a4287,'reverse':![],'number':Math[_0x378c1d(0x295)](_0x9637e3+(_0x9e8a04&&_0x9e8a04[_0x378c1d(0x2db)]||0x0),0x0),'orderstatus':_0x378c1d(0x22b)});else{if((_0x9637e3!=0x0||_0x9e8a04)&&allSymbols['includes'](_0x4e7438))_0x31b82e?_0x52eab0[_0x378c1d(0x22a)]({..._0x31b82e,'number':Math[_0x378c1d(0x295)](_0x9637e3+(_0x9e8a04&&_0x9e8a04[_0x378c1d(0x2db)]||0x0),0x0)}):_0x52eab0[_0x378c1d(0x22a)]({'coin':_0x1060bb,'symbol':_0x4e7438,'reverse':!![],'number':Math[_0x378c1d(0x295)](_0x9637e3+(_0x9e8a04&&_0x9e8a04[_0x378c1d(0x2db)]||0x0),0x0),'orderstatus':_0x378c1d(0x22b)});else _0x9e8a04&&_0x52eab0['push']({'coin':_0x9e8a04['coin'],'symbol':_0x9e8a04[_0x378c1d(0x20e)],'reverse':_0x9e8a04[_0x378c1d(0x34d)],'number':0x0,'orderstatus':_0x378c1d(0x22b)});}}return _0x52eab0[_0x378c1d(0x22d)]((_0x349551,_0x7af035)=>_0x349551[_0x378c1d(0x1d7)]<_0x7af035[_0x378c1d(0x1d7)]?0x1:_0x7af035[_0x378c1d(0x1d7)]<_0x349551[_0x378c1d(0x1d7)]?-0x1:0x0),_0x2379a2=cloneDeep(_0x52eab0),_0x52eab0=_0x52eab0[_0x378c1d(0x2d9)](_0x44cce5=>{const _0x2cc90e=_0x378c1d,_0x4389eb=config[_0x2cc90e(0x34e)][_0x2cc90e(0x34b)](_0x4369ce=>_0x4369ce[_0x2cc90e(0x27e)]==_0x44cce5[_0x2cc90e(0x27e)]);return _0x4389eb&&!_0x4389eb['excluded'];}),[_0x52eab0,_0x2379a2];}async function getCoinNumber(_0x232d60){const _0x4fc9fe=_0x3916db;let _0xa405e0;try{const _0x329a20=await exchange[_0x4fc9fe(0x1e4)]();_0xa405e0=_0x329a20[_0x4fc9fe(0x321)][_0x232d60];}catch(_0x498a59){await handleError(_0x498a59,_0x4fc9fe(0x2dd));}return _0xa405e0;}async function getOpenOrders(){const _0x50791c=_0x3916db;let _0x5a7ae3;allOpenOrders=[];try{for(const _0x1f6591 of config['portfolio']){!_0x1f6591[_0x50791c(0x345)]&&_0x1f6591['coin']!=config[_0x50791c(0x266)]&&(_0x5a7ae3=await exchange[_0x50791c(0x316)](_0x1f6591[_0x50791c(0x20e)]),_0x5a7ae3[_0x50791c(0x205)]>0x0&&allOpenOrders[_0x50791c(0x22a)](_0x5a7ae3[0x0]));}}catch(_0x12e60f){await handleError(_0x12e60f,_0x50791c(0x1fc));}}async function handleOpenOrders(_0x2ac349=0x0){const _0x36a9a8=_0x3916db;allOpenOrders[_0x36a9a8(0x205)]==0x0&&lockOrders==ORDERS[_0x36a9a8(0x1be)]&&allOrdersPlaced&&(_0x2ac349==0x0?(logger['debug'](_0x36a9a8(0x1fb)),_0x2ac349++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x36a9a8(0x1b2)](_0x36a9a8(0x29d)),validateOrders(_0x36a9a8(0x30e))));}async function testAPI(_0x3a655f){const _0x465780=_0x3916db,_0x549d0f=ccxt[_0x465780(0x272)][_0x3a655f['exchange'][_0x465780(0x1f0)]()],_0x4313b1=new _0x549d0f({'apiKey':_0x3a655f['apiKey'],'secret':_0x3a655f['apiSecret'],'options':{'defaultType':_0x465780(0x26b)}});if(_0x3a655f['apiPassword'])_0x4313b1['password']=_0x3a655f[_0x465780(0x1b7)];try{await _0x4313b1['fetchBalance']();}catch(_0x43a15c){logger[_0x465780(0x1b2)]('Error\x20in\x20testAPI():\x20'+_0x43a15c['toString']());throw _0x43a15c;}}function cloneDeep(_0x4b9127){const _0x2535a0=_0x3916db;return JSON['parse'](JSON[_0x2535a0(0x2b3)](_0x4b9127));}async function getPortfolio(_0x464954){const _0x33ef76=_0x3916db;let _0x3049a7=[],_0x508733=[],_0x3725c6=[],_0x3c87e5;_0x464954[_0x33ef76(0x31e)]=decryptRSA(secure[_0x33ef76(0x219)],_0x464954[_0x33ef76(0x31e)]),_0x464954[_0x33ef76(0x33e)]=decryptRSA(secure[_0x33ef76(0x219)],_0x464954[_0x33ef76(0x33e)]);if(_0x464954[_0x33ef76(0x1b7)])_0x464954[_0x33ef76(0x1b7)]=decryptRSA(secure[_0x33ef76(0x219)],_0x464954['apiPassword']);if(_0x464954[_0x33ef76(0x31e)]!==_0x33ef76(0x216)||_0x464954[_0x33ef76(0x33e)]!==_0x33ef76(0x216)||_0x464954[_0x33ef76(0x1b7)]&&_0x464954[_0x33ef76(0x1b7)]!==_0x33ef76(0x216)){if(config[_0x33ef76(0x2fa)]){if(_0x464954[_0x33ef76(0x31e)]==_0x33ef76(0x216))_0x464954['apiKey']=config['apiKey'];if(_0x464954['apiSecret']==_0x33ef76(0x216))_0x464954[_0x33ef76(0x33e)]=config[_0x33ef76(0x33e)];if(_0x464954['apiPassword']=='************')_0x464954[_0x33ef76(0x1b7)]=config[_0x33ef76(0x1b7)];}try{await testAPI(_0x464954);}catch(_0x5835c2){if(_0x5835c2['toString']()['includes'](_0x33ef76(0x298))){logHistory(_0x33ef76(0x28d),_0x33ef76(0x2d0)),logHistory(_0x33ef76(0x28d),_0x33ef76(0x349)+_0x5835c2['toString']()),proxyEmit(_0x33ef76(0x2a6),![]);return;}else{if(_0x5835c2['toString']()['includes'](_0x33ef76(0x336))){logHistory('error','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x33ef76(0x28d),_0x33ef76(0x349)+_0x5835c2[_0x33ef76(0x344)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x33ef76(0x28d),_0x33ef76(0x1f7)+_0x5835c2[_0x33ef76(0x344)]()),logger[_0x33ef76(0x1b2)]('Error\x20details:',_0x5835c2),proxyEmit(_0x33ef76(0x2a6),![]);return;}}}exchange?updateExchange(_0x464954[_0x33ef76(0x31e)],_0x464954[_0x33ef76(0x33e)],_0x464954[_0x33ef76(0x1b7)]):await initExchange(_0x464954[_0x33ef76(0x2fa)],_0x464954[_0x33ef76(0x31e)],_0x464954[_0x33ef76(0x33e)],_0x464954['apiPassword']);await loadSymbols();const _0x9530f0=await getCoins(0x0,![],_0x464954['basecoin']);_0x3725c6=cloneDeep(_0x9530f0[0x1]);}else{const _0x1ce0d4=await getCoins();_0x3725c6=cloneDeep(_0x1ce0d4[0x1]);}if(_0x464954['basecoin']=='')proxyEmit(_0x33ef76(0x2a6),!![]),proxyEmit(_0x33ef76(0x1bd),_0x3725c6);else{_0x3725c6[_0x33ef76(0x32b)](_0x385cef=>{const _0x3d4c73=_0x33ef76;if(_0x385cef[_0x3d4c73(0x27e)]!=_0x464954[_0x3d4c73(0x266)]&&allSymbols[_0x3d4c73(0x312)](_0x385cef['symbol']))_0x3049a7['push'](_0x385cef[_0x3d4c73(0x20e)]);});if(_0x3049a7[_0x33ef76(0x205)]==0x0)logHistory('error',_0x33ef76(0x1fa));else{try{_0x508733=await getTickers(_0x3049a7);}catch(_0xa15d4){logHistory(_0x33ef76(0x28d),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x33ef76(0x1b2)](_0x33ef76(0x249),_0xa15d4),proxyEmit(_0x33ef76(0x2a6),![]);return;}_0x3725c6[_0x33ef76(0x32b)](_0x1b8c79=>{const _0x1bca02=_0x33ef76;_0x1b8c79[_0x1bca02(0x27e)]!=_0x464954[_0x1bca02(0x266)]?_0x508733[_0x1b8c79[_0x1bca02(0x20e)]]?_0x3c87e5=_0x1b8c79[_0x1bca02(0x34d)]?0x1/_0x508733[_0x1b8c79['symbol']]['last']:_0x508733[_0x1b8c79[_0x1bca02(0x20e)]][_0x1bca02(0x2b6)]:_0x3c87e5=0x0:_0x3c87e5=0x1,_0x1b8c79['price']=formatResult(_0x3c87e5,0x8);}),await getMarketCap(_0x3725c6),proxyEmit(_0x33ef76(0x2a6),!![]),proxyEmit(_0x33ef76(0x1bd),_0x3725c6);}}}function truncateTradeAmount(_0x6afac2,_0x341d7b){let _0x206b11=0x0;try{_0x206b11=exchange['amountToPrecision'](_0x6afac2,_0x341d7b);}catch(_0x7cad42){}return _0x206b11;}function checkMinimums(_0x3ee9e4){const _0x33cf7a=_0x3916db;let _0x468581=!![];const _0x35e54c=!_0x3ee9e4[_0x33cf7a(0x34d)]?markets[_0x3ee9e4[_0x33cf7a(0x20e)]][_0x33cf7a(0x1d0)][_0x33cf7a(0x21a)][_0x33cf7a(0x1b1)]:markets[_0x3ee9e4['symbol']]['limits'][_0x33cf7a(0x307)][_0x33cf7a(0x1b1)],_0x43eca7=!_0x3ee9e4[_0x33cf7a(0x34d)]?markets[_0x3ee9e4[_0x33cf7a(0x20e)]][_0x33cf7a(0x1d0)][_0x33cf7a(0x307)][_0x33cf7a(0x1b1)]:markets[_0x3ee9e4[_0x33cf7a(0x20e)]]['limits'][_0x33cf7a(0x21a)]['min'],_0x2dc083=truncateTradeAmount(_0x3ee9e4[_0x33cf7a(0x20e)],_0x3ee9e4[_0x33cf7a(0x2fe)]);_0x3ee9e4[_0x33cf7a(0x2fe)]=_0x2dc083;if(Math[_0x33cf7a(0x234)](_0x2dc083)<_0x35e54c)_0x468581=![];if(Math[_0x33cf7a(0x234)](_0x2dc083)*_0x3ee9e4[_0x33cf7a(0x2b6)]<_0x43eca7)_0x468581=![];if(_0x3ee9e4[_0x33cf7a(0x24c)]==_0x33cf7a(0x262)){let _0x22f907=config['portfolio'][_0x33cf7a(0x34b)](_0x2617f6=>_0x2617f6[_0x33cf7a(0x27e)]==_0x3ee9e4[_0x33cf7a(0x27e)]);if(_0x22f907[_0x33cf7a(0x2db)]>0x0){if(Math[_0x33cf7a(0x234)](_0x2dc083)>_0x3ee9e4[_0x33cf7a(0x329)]-_0x22f907[_0x33cf7a(0x2db)])_0x468581=![];}else{if(Math[_0x33cf7a(0x234)](_0x2dc083)>_0x3ee9e4[_0x33cf7a(0x329)])_0x468581=![];}}if(_0x3ee9e4[_0x33cf7a(0x24c)]==_0x33cf7a(0x28b)){let _0x27e450=config['portfolio'][_0x33cf7a(0x34b)](_0x3335a5=>_0x3335a5[_0x33cf7a(0x27e)]==config[_0x33cf7a(0x266)]),_0xc418ed=currentCoins['find'](_0xc055b7=>_0xc055b7[_0x33cf7a(0x27e)]==config[_0x33cf7a(0x266)]);if(_0x27e450[_0x33cf7a(0x2db)]>0x0){if(Math[_0x33cf7a(0x234)](_0x2dc083)*_0x3ee9e4['last']>_0xc418ed['number']-_0x27e450[_0x33cf7a(0x2db)])_0x468581=![];}else{if(Math['abs'](_0x2dc083)*_0x3ee9e4['last']>_0xc418ed[_0x33cf7a(0x329)])_0x468581=![];}}return _0x468581;}async function getBalances(_0x19ce9d=!![]){const _0x39bb04=_0x3916db;if(botPaused)return;let _0x3cd18c=0x0,_0xc03292;const _0x1a18a0=config[_0x39bb04(0x299)];if(config[_0x39bb04(0x20b)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x39bb04(0x32b)](_0x43c930=>{const _0x577bc6=_0x39bb04;if(_0x43c930[_0x577bc6(0x27e)]!=config[_0x577bc6(0x266)]){let _0x149662=gTicker[noslash(_0x43c930[_0x577bc6(0x20e)])];_0xc03292=_0x43c930[_0x577bc6(0x34d)]?0x1/_0x149662:_0x149662;}else _0xc03292=0x1;let _0x3e29df=_0x43c930['number']*_0xc03292;_0x3cd18c+=_0x3e29df,_0x43c930['last']=formatResult(Number(_0xc03292),0x8),_0x43c930[_0x577bc6(0x30f)]=_0x3e29df;}),currentCoins[_0x39bb04(0x32b)](_0x363c9d=>{const _0x288daf=_0x39bb04;let _0x4385ce=config[_0x288daf(0x34e)][_0x288daf(0x34b)](_0x4dbdfb=>_0x4dbdfb['coin']==_0x363c9d[_0x288daf(0x27e)]),_0x978dca=Number(_0x4385ce[_0x288daf(0x33f)]),_0x1beed7=_0x363c9d[_0x288daf(0x30f)]/_0x3cd18c*0x64,_0x164de4=_0x978dca*_0x3cd18c/0x64/_0x363c9d[_0x288daf(0x2b6)]-_0x363c9d[_0x288daf(0x329)];_0x363c9d[_0x288daf(0x33f)]=formatResult(_0x1beed7,0x3),_0x363c9d[_0x288daf(0x32e)]=formatResult(_0x978dca,0x3),_0x363c9d[_0x288daf(0x2fe)]=formatResult(_0x164de4,0x8),_0x363c9d['side']='',_0x363c9d[_0x288daf(0x211)]=![];if(_0x363c9d[_0x288daf(0x27e)]!=config[_0x288daf(0x266)]){if(_0x363c9d['distribution']>_0x978dca)_0x363c9d[_0x288daf(0x24c)]='sell',_0x363c9d[_0x288daf(0x211)]=checkMinimums(_0x363c9d);else _0x363c9d[_0x288daf(0x33f)]<_0x978dca&&(_0x363c9d['side']=_0x288daf(0x28b),_0x363c9d['valid']=checkMinimums(_0x363c9d));}_0x363c9d[_0x288daf(0x1d7)]=_0x363c9d['distribution']/_0x363c9d['target']-0x1;if(_0x363c9d[_0x288daf(0x268)]==_0x288daf(0x24e)||_0x363c9d[_0x288daf(0x268)]=='canceled')_0x363c9d[_0x288daf(0x268)]=_0x288daf(0x22b);}),currentCoins[_0x39bb04(0x22d)]((_0x1f5de7,_0x21174e)=>_0x1f5de7['delta']<_0x21174e['delta']?0x1:_0x21174e['delta']<_0x1f5de7[_0x39bb04(0x1d7)]?-0x1:0x0);const _0x2fd6dc=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2fd6dc[_0x39bb04(0x260)],'usd':_0x2fd6dc[_0x39bb04(0x293)],'portfolio':JSON[_0x39bb04(0x2b3)](currentCoins),'threshold':_0x1a18a0},proxyEmit(_0x39bb04(0x2f1),{'serverversion':serverversion,'balances':lastBalances});if(_0x19ce9d){if(config[_0x39bb04(0x20b)])headlessMode({'portfolio':currentCoins,'threshold':_0x1a18a0});else lockOrders==ORDERS[_0x39bb04(0x277)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1a18a0});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3855f7=getNormalizedPerformance();getStartingBalances(_0x3855f7),emitPerformance(_0x3855f7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2bd282=_0x3916db;if(!lastBalances)return;let _0x3e0f7f=[],_0xaac154,_0x314535=JSON[_0x2bd282(0x2fc)](lastBalances[_0x2bd282(0x34e)]);_0x314535[_0x2bd282(0x22d)]((_0x184e5a,_0x40137a)=>_0x184e5a[_0x2bd282(0x27e)]>_0x40137a[_0x2bd282(0x27e)]?0x1:_0x40137a[_0x2bd282(0x27e)]>_0x184e5a['coin']?-0x1:0x0),_0x314535[_0x2bd282(0x32b)](_0xda07fe=>{const _0x3befd1=_0x2bd282;let _0x306811={'coin':_0xda07fe[_0x3befd1(0x27e)],'number':_0xda07fe[_0x3befd1(0x329)],'price':_0xda07fe[_0x3befd1(0x2b6)]};_0x3e0f7f['push'](_0x306811);});const _0x423a33=await getFiat();_0xaac154={'date':lastBalances[_0x2bd282(0x1ba)][_0x2bd282(0x1f2)]('\x20')[0x0],'eur':_0x423a33[_0x2bd282(0x260)],'usd':_0x423a33[_0x2bd282(0x293)],'coins':_0x3e0f7f};let _0x7dedc6=dbPerformance[_0x2bd282(0x218)](_0x2bd282(0x330))[_0x2bd282(0x34b)]({'date':_0xaac154[_0x2bd282(0x339)]})[_0x2bd282(0x30f)]();_0x7dedc6?_0xaac154[_0x2bd282(0x339)]!=config[_0x2bd282(0x28f)]&&dbPerformance[_0x2bd282(0x218)](_0x2bd282(0x330))[_0x2bd282(0x34b)]({'date':_0xaac154[_0x2bd282(0x339)]})[_0x2bd282(0x2cc)](_0xaac154)[_0x2bd282(0x2e7)]():dbPerformance[_0x2bd282(0x218)](_0x2bd282(0x330))['push'](_0xaac154)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3dad0e=_0x3916db;let _0x2e8db6=[];if(dbPerformance[_0x3dad0e(0x2b8)]('data')[_0x3dad0e(0x30f)]()){let _0x1631f5=dbPerformance[_0x3dad0e(0x218)](_0x3dad0e(0x330))[_0x3dad0e(0x1f5)]()['filter'](_0x4aef60=>{const _0x56e0d4=_0x3dad0e;if(_0x4aef60[_0x56e0d4(0x1b4)][_0x56e0d4(0x205)]==0x0)return![];else return!![];})[_0x3dad0e(0x1d3)](_0x3dad0e(0x339))[_0x3dad0e(0x30f)](),_0x4c07c8=[...config[_0x3dad0e(0x201)]];_0x4c07c8[_0x3dad0e(0x22d)]((_0x255d4c,_0x5de387)=>_0x255d4c[_0x3dad0e(0x339)]>_0x5de387[_0x3dad0e(0x339)]?-0x1:_0x5de387[_0x3dad0e(0x339)]>_0x255d4c['date']?0x1:0x0);let _0x1c3e95=0x1,_0xdb2f7b=[],_0x6bf766=0x0;_0x1631f5['slice']()[_0x3dad0e(0x34d)]()['forEach']((_0x24c6ec,_0xceac1f)=>{const _0x408f3d=_0x3dad0e;if(_0x4c07c8[_0x6bf766]){if(_0x1631f5[_0x1631f5['length']-_0xceac1f]&&_0x4c07c8[_0x6bf766][_0x408f3d(0x339)]==_0x1631f5[_0x1631f5[_0x408f3d(0x205)]-_0xceac1f][_0x408f3d(0x339)]){if(_0xceac1f<_0x1631f5[_0x408f3d(0x205)]){let _0x25fa17=0x0,_0x4fd782=0x0;_0x1631f5[_0x1631f5[_0x408f3d(0x205)]-_0xceac1f]['coins'][_0x408f3d(0x32b)](_0x273e69=>{const _0x4d7d11=_0x408f3d;_0x4fd782+=_0x273e69[_0x4d7d11(0x329)]*_0x273e69[_0x4d7d11(0x1c9)];}),_0x4c07c8[_0x6bf766][_0x408f3d(0x23d)][_0x408f3d(0x32b)](_0x2ae41c=>{const _0x2ccfad=_0x408f3d;_0x25fa17+=_0x2ae41c['number']*_0x2ae41c[_0x2ccfad(0x1c9)];}),_0x1c3e95*=_0x25fa17/(_0x4fd782-_0x25fa17)+0x1;}_0x6bf766++;}}let _0xeed45b=0x0;_0x24c6ec['coins'][_0x408f3d(0x32b)](_0x50623a=>{const _0x135f6b=_0x408f3d;_0xeed45b+=_0x50623a['number']*_0x50623a[_0x135f6b(0x1c9)];}),_0xdb2f7b[_0x1631f5[_0x408f3d(0x205)]-_0xceac1f-0x1]=_0xeed45b*(_0x1c3e95-0x1);});let _0x1fe6c0=[];_0x4c07c8=[...config[_0x3dad0e(0x201)]]||[];let _0x223440=0x0;_0x6bf766=0x0,_0x1631f5[_0x3dad0e(0x32b)]((_0x1a67b4,_0x3a8ecf)=>{const _0x4157e9=_0x3dad0e;if(_0x4c07c8[_0x6bf766]){const _0x2efcc=fns[_0x4157e9(0x2fc)](_0x4c07c8[_0x6bf766]['date'],_0x4157e9(0x20c),new Date()),_0x2c0cdb=fns[_0x4157e9(0x2fc)](_0x1a67b4[_0x4157e9(0x339)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x2efcc,_0x2c0cdb)){let _0x33ed69=0x0;_0x4c07c8[_0x6bf766][_0x4157e9(0x23d)][_0x4157e9(0x32b)](_0x4ec51b=>{const _0x4cd15d=_0x4157e9;!_0x1fe6c0[_0x4ec51b[_0x4cd15d(0x27e)]]?_0x1fe6c0[_0x4ec51b[_0x4cd15d(0x27e)]]=_0x4ec51b['number']:(_0x33ed69=_0x1fe6c0[_0x4ec51b['coin']],_0x1fe6c0[_0x4ec51b[_0x4cd15d(0x27e)]]+=_0x4ec51b[_0x4cd15d(0x329)]);const _0x4a8643=_0x1a67b4['coins'][_0x4cd15d(0x34b)](_0x49400e=>_0x49400e[_0x4cd15d(0x27e)]==_0x4ec51b[_0x4cd15d(0x27e)]);(!_0x4a8643||_0x4a8643[_0x4cd15d(0x329)]==0x0)&&(_0x223440+=(-_0x4ec51b[_0x4cd15d(0x329)]-_0x33ed69)*_0x4ec51b[_0x4cd15d(0x1c9)]);}),_0x6bf766++;}}_0x1a67b4['coins'][_0x4157e9(0x32b)]((_0x2b2e2b,_0x5992ee)=>{const _0x476308=_0x4157e9;_0x1fe6c0[_0x2b2e2b[_0x476308(0x27e)]]&&(_0x2b2e2b[_0x476308(0x29a)]=_0x1fe6c0[_0x2b2e2b[_0x476308(0x27e)]]);}),_0x2e8db6[_0x4157e9(0x22a)]({'date':_0x1a67b4[_0x4157e9(0x339)],'eur':_0x1a67b4['eur'],'usd':_0x1a67b4[_0x4157e9(0x293)],'offset':_0xdb2f7b[_0x3a8ecf],'netoffset':_0x223440,'coins':_0x1a67b4[_0x4157e9(0x1b4)]});});}return _0x2e8db6;}function emitPerformance(_0xcee7b8){const _0x2ef6a0=_0x3916db;_0xcee7b8[_0x2ef6a0(0x205)]!==0x0?(proxyEmit('performance',_0xcee7b8),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x2ad0fe,_0x2e8301){const _0x874018=_0x3916db;let _0x51621f=0x0,_0x1912c1=0x0,_0x1a9b63=0x0;_0x2ad0fe['coins'][_0x874018(0x32b)](_0xa834a3=>{const _0x4b3220=_0x874018;_0x51621f+=_0xa834a3['number']*_0xa834a3[_0x4b3220(0x1c9)];});_0x2e8301&&(_0x51621f+=_0x2ad0fe['offset']);if(config['basecoin']==='BTC'||config[_0x874018(0x266)]===_0x874018(0x35c)||config[_0x874018(0x266)]===_0x874018(0x271))_0x1912c1=_0x51621f*_0x2ad0fe[_0x874018(0x260)],_0x1a9b63=_0x51621f*_0x2ad0fe[_0x874018(0x293)];else{if(usdBasecoins[_0x874018(0x312)](config[_0x874018(0x266)]))_0x1912c1=_0x51621f*_0x2ad0fe[_0x874018(0x260)]/_0x2ad0fe[_0x874018(0x293)],_0x1a9b63=_0x51621f;else config[_0x874018(0x266)]===_0x874018(0x2d2)&&(_0x1912c1=_0x51621f,_0x1a9b63=_0x51621f*_0x2ad0fe[_0x874018(0x293)]/_0x2ad0fe[_0x874018(0x260)]);}return[_0x51621f,_0x1912c1,_0x1a9b63];}function getKPIs(_0x39bed0,_0x5e3eaf=_0x3916db(0x2d2)){const _0x5b03a0=_0x3916db,_0x146cf8=config[_0x5b03a0(0x266)],_0x5659a0=lastBalances,_0x578881=currentCoins,_0x49e880=getNormalizedPerformance(),_0x4174c6=_0x39bed0==='basecoin'?_0x146cf8:_0x39bed0===_0x5b03a0(0x223)||_0x39bed0==='net-fiat'?_0x5e3eaf:_0x5b03a0(0x2ea)+_0x146cf8,_0x3293e9=_0x39bed0===_0x5b03a0(0x33c)?'Net\x20effect':_0x39bed0==='net-fiat'?'Net\x20effect':_0x4174c6+_0x5b03a0(0x245),_0x49100b=_0x39bed0===_0x5b03a0(0x33c)||_0x39bed0==='net-fiat'?_0x5b03a0(0x327):_0x4174c6+_0x5b03a0(0x325);let _0x2d5b5b=0x0;_0x578881[_0x5b03a0(0x32b)](_0x1d86d5=>{_0x2d5b5b+=_0x1d86d5['number']*_0x1d86d5['last'];});if(_0x39bed0===_0x5b03a0(0x223)||_0x39bed0===_0x5b03a0(0x1ca)){if(_0x146cf8===_0x5b03a0(0x1dd)||_0x146cf8===_0x5b03a0(0x35c)||_0x146cf8==='PAXG')_0x2d5b5b=_0x2d5b5b*(_0x5e3eaf===_0x5b03a0(0x2d2)?_0x5659a0[_0x5b03a0(0x260)]:_0x5659a0[_0x5b03a0(0x293)]);else{if(usdBasecoins[_0x5b03a0(0x312)](_0x146cf8))_0x2d5b5b=_0x2d5b5b*(_0x5e3eaf===_0x5b03a0(0x2d2)?_0x5659a0[_0x5b03a0(0x260)]/_0x5659a0['usd']:0x1);else _0x146cf8===_0x5b03a0(0x2d2)&&(_0x2d5b5b=_0x2d5b5b*(_0x5e3eaf===_0x5b03a0(0x2d2)?0x1:_0x5659a0[_0x5b03a0(0x293)]/_0x5659a0[_0x5b03a0(0x260)]));}}let _0x36f7f6;if(_0x2d5b5b!==0x0){if(_0x39bed0==='basecoin')_0x36f7f6=(_0x2d5b5b/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5e3eaf==='EUR')_0x36f7f6=(_0x2d5b5b/startingBalances['eur']-0x1)*0x64;else _0x36f7f6=(_0x2d5b5b/startingBalances['usd']-0x1)*0x64;}let _0x374957=0x0;if(startingBalances[_0x5b03a0(0x1b4)])_0x578881[_0x5b03a0(0x32b)](_0x28d829=>{const _0x333455=_0x5b03a0;let _0x1568e2=startingBalances[_0x333455(0x1b4)][_0x333455(0x34b)](_0x3fbbfe=>_0x3fbbfe[_0x333455(0x27e)]===_0x28d829[_0x333455(0x27e)]);if(_0x1568e2&&_0x1568e2[_0x333455(0x27e)]&&_0x28d829[_0x333455(0x329)]!==0x0)_0x374957+=_0x1568e2[_0x333455(0x329)]*_0x28d829[_0x333455(0x2b6)];});let _0x17160e=0x0;if(_0x49e880['length']!==0x0){let _0x3ca45f=_0x49e880[_0x49e880[_0x5b03a0(0x205)]-0x1];_0x17160e=_0x3ca45f[_0x5b03a0(0x22e)];}_0x374957-=_0x17160e;_0x39bed0===_0x5b03a0(0x33c)&&(_0x36f7f6=(_0x2d5b5b-_0x374957)/startingBalances[_0x5b03a0(0x266)]*0x64,_0x2d5b5b=_0x2d5b5b-_0x374957);if(_0x39bed0==='net-fiat'){let _0xffb76=_0x5e3eaf===_0x5b03a0(0x2d2)?startingBalances[_0x5b03a0(0x260)]:startingBalances[_0x5b03a0(0x293)];if(_0x146cf8==='BTC'||_0x146cf8===_0x5b03a0(0x35c)||_0x146cf8===_0x5b03a0(0x271))_0x374957=_0x5e3eaf===_0x5b03a0(0x2d2)?_0x374957*_0x5659a0[_0x5b03a0(0x260)]:_0x374957*_0x5659a0[_0x5b03a0(0x293)];else{if(usdBasecoins[_0x5b03a0(0x312)](_0x146cf8))_0x374957=_0x5e3eaf==='EUR'?_0x374957*_0x5659a0[_0x5b03a0(0x260)]/_0x5659a0[_0x5b03a0(0x293)]:_0x374957;else _0x146cf8===_0x5b03a0(0x2d2)&&(_0x374957=_0x5e3eaf===_0x5b03a0(0x2d2)?_0x374957:_0x374957*_0x5659a0[_0x5b03a0(0x293)]/_0x5659a0['eur']);}_0x36f7f6=(_0x2d5b5b-_0x374957)/_0xffb76*0x64,_0x2d5b5b=_0x2d5b5b-_0x374957;}if(_0x36f7f6){if(_0x36f7f6<0x64)_0x36f7f6=_0x36f7f6[_0x5b03a0(0x1e0)](0x2);else{if(_0x36f7f6<0x3e8)_0x36f7f6=_0x36f7f6[_0x5b03a0(0x1e0)](0x1);else _0x36f7f6=_0x36f7f6['toFixed'](0x0);}}else _0x36f7f6=Number('0')[_0x5b03a0(0x1e0)](0x2);if(_0x2d5b5b){if(Math[_0x5b03a0(0x234)](_0x2d5b5b)<0.000001)_0x2d5b5b=_0x2d5b5b[_0x5b03a0(0x1e0)](0x2);else{if(Math[_0x5b03a0(0x234)](_0x2d5b5b)<0.1)_0x2d5b5b=_0x2d5b5b['toFixed'](0x6);else{if(Math[_0x5b03a0(0x234)](_0x2d5b5b)<0x1)_0x2d5b5b=_0x2d5b5b[_0x5b03a0(0x1e0)](0x5);else{if(Math[_0x5b03a0(0x234)](_0x2d5b5b)<0xa)_0x2d5b5b=_0x2d5b5b[_0x5b03a0(0x1e0)](0x4);else{if(Math[_0x5b03a0(0x234)](_0x2d5b5b)<0x64)_0x2d5b5b=_0x2d5b5b['toFixed'](0x3);else{if(Math['abs'](_0x2d5b5b)<0x3e8)_0x2d5b5b=_0x2d5b5b['toFixed'](0x2);else _0x2d5b5b=_0x2d5b5b[_0x5b03a0(0x1e0)](0x2);}}}}}}else _0x2d5b5b=Number('0')[_0x5b03a0(0x1e0)](0x2);}else _0x36f7f6=Number('0')[_0x5b03a0(0x1e0)](0x2);return{'value':_0x2d5b5b,'change':_0x36f7f6,'leftTxt':_0x3293e9,'rightTxt':_0x49100b};}async function getStartingBalances(_0x473a9c,_0x45feb4=!![]){const _0x5409e7=_0x3916db;if(_0x473a9c[_0x5409e7(0x205)]!==0x0){const [_0x2f2307,_0x396d30,_0x4199ab]=getPerf(_0x473a9c[0x0],!![]);let _0xb6f05c=[];config[_0x5409e7(0x34e)][_0x5409e7(0x32b)](_0x30d33f=>{const _0x1f2249=_0x5409e7;let _0x41bd8d=0x0,_0x767675;config['liquidity']['forEach'](_0x251b91=>{const _0x3c6526=_0xcc5e;let _0x483f0e=_0x251b91[_0x3c6526(0x23d)][_0x3c6526(0x34b)](_0x440b5=>_0x440b5[_0x3c6526(0x27e)]==_0x30d33f[_0x3c6526(0x27e)]);if(_0x483f0e){_0x41bd8d+=_0x483f0e[_0x3c6526(0x329)];if(!_0x767675)_0x767675=_0x483f0e[_0x3c6526(0x1c9)];}}),_0xb6f05c[_0x1f2249(0x22a)]({'coin':_0x30d33f[_0x1f2249(0x27e)],'number':_0x41bd8d,'initialprice':_0x767675});});const _0x1d5131={'basecoin':_0x2f2307,'eur':_0x396d30,'usd':_0x4199ab,'coins':_0xb6f05c};if(_0x45feb4)proxyEmit(_0x5409e7(0x2bd),_0x1d5131);startingBalances=_0x1d5131;}}function headlessMode(_0xbd17dd){const _0x12f165=_0x3916db;let _0x2af621=_0xbd17dd[_0x12f165(0x34e)],_0x6eb706=_0xbd17dd['threshold'],_0x328e28=[];for(let _0x38574b of _0x2af621){if(_0x38574b[_0x12f165(0x27e)]!=config[_0x12f165(0x266)]){if(_0x38574b[_0x12f165(0x1d7)]>=_0x6eb706/0x64){if(_0x38574b[_0x12f165(0x211)])_0x328e28[_0x12f165(0x22a)](_0x38574b);}else{if(_0x38574b[_0x12f165(0x1d7)]<=-_0x6eb706/0x64){if(_0x38574b[_0x12f165(0x211)])_0x328e28['push'](_0x38574b);}}}}_0x328e28[_0x12f165(0x205)]>0x0&&placeOrder(_0x328e28);}function notifyBalance(_0x177db1){const _0x10d9d8=_0x3916db;let _0x52eef9=_0x177db1[_0x10d9d8(0x34e)],_0x3faa2d=_0x177db1[_0x10d9d8(0x299)],_0x528886=[];for(let _0x5aed54 of _0x52eef9){if(_0x5aed54['coin']!=config['basecoin']){if(_0x5aed54['delta']>=_0x3faa2d/0x64){if(_0x5aed54[_0x10d9d8(0x211)])_0x528886['push'](_0x5aed54);}else{if(_0x5aed54['delta']<=-_0x3faa2d/0x64){if(_0x5aed54[_0x10d9d8(0x211)])_0x528886[_0x10d9d8(0x22a)](_0x5aed54);}}}}if(_0x528886[_0x10d9d8(0x205)]>0x0){let _0x35b96e=_0x528886[_0x10d9d8(0x259)](_0x2f0e10=>_0x2f0e10[_0x10d9d8(0x27e)]);_0x35b96e[_0x10d9d8(0x22d)]();let _0x295d2c=_0x35b96e[_0x10d9d8(0x1cc)](',\x20');if(!lastCoinsToBalance)logHistory(_0x10d9d8(0x354),_0x10d9d8(0x320));lastCoinsToBalance=_0x295d2c;}}function symbolToCoin(_0x937aea){const _0x162d66=_0x3916db;let _0x52c408;if(_0x937aea[_0x162d66(0x312)]('/'+config['basecoin']))_0x52c408=_0x937aea['replace']('/'+config[_0x162d66(0x266)],'');if(_0x937aea[_0x162d66(0x312)](config[_0x162d66(0x266)]+'/'))_0x52c408=_0x937aea[_0x162d66(0x1ff)](config[_0x162d66(0x266)]+'/','');return _0x52c408;}function setLockOrders(_0x20532e){const _0x52e49c=_0x3916db;lockOrders=_0x20532e,logger[_0x52e49c(0x1b2)](_0x52e49c(0x347)+Object[_0x52e49c(0x2ad)](ORDERS)[lockOrders]);}async function unlockOrders(_0x331dd8=![]){const _0x7d696f=_0x3916db;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x7d696f(0x2ed)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x331dd8){const _0x104f4d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x104f4d,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x7d696f(0x277)]);}}async function validateOrders(_0x17e0fc){const _0x26ead9=_0x3916db;if(_0x17e0fc)validateOrdersState=_0x17e0fc;logger['debug'](_0x26ead9(0x241)+validateOrdersState+_0x26ead9(0x1e2)+Object[_0x26ead9(0x2ad)](ORDERS)[lockOrders]);let _0x579775=[],_0x34bd16=config[_0x26ead9(0x30a)]==_0x26ead9(0x32c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x26ead9(0x310)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x26ead9(0x287)+validateOrdersState);for(let _0x4ff2d2=lastOrders[_0x26ead9(0x205)]-0x1;_0x4ff2d2>=0x0;_0x4ff2d2--){let _0x3d7206=lastOrders[_0x4ff2d2],_0x2687e6=![];_0x3d7206[_0x26ead9(0x24e)]>0x0&&(_0x2687e6=!![]),_0x579775[_0x26ead9(0x22a)](_0x2687e6),_0x2687e6&&config['ordertype']!=_0x26ead9(0x32c)&&logHistory(_0x26ead9(0x229),_0x26ead9(0x31c)+_0x3d7206[_0x26ead9(0x20e)]+'\x20'+_0x3d7206[_0x26ead9(0x24c)]+'\x20#'+formatResult(_0x3d7206[_0x26ead9(0x24e)],0x8)+'\x20@'+formatResult(_0x3d7206[_0x26ead9(0x1c9)],0x8)),_0x2687e6&&lastOrders[_0x26ead9(0x2ab)](_0x4ff2d2,0x1);}persistOpenOrders(lastOrders);const _0x4d833e=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x26ead9(0x31a);if(validateOrdersState==_0x26ead9(0x29a)){validateOrdersState=_0x26ead9(0x1de);if(_0x579775[_0x26ead9(0x312)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x579775[_0x26ead9(0x312)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x26ead9(0x2d5))_0x579775[_0x26ead9(0x312)](![])&&(config['ordertype']==_0x26ead9(0x32c)?logHistory(_0x26ead9(0x232),_0x26ead9(0x311)+Math[_0x26ead9(0x323)](_0x34bd16*validateOrderInterval/0xea60)+_0x26ead9(0x242)+_0x4d833e):(await cancelOrders(),logHistory(_0x26ead9(0x232),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x26ead9(0x323)](_0x34bd16*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4d833e))),await unlockOrders(!![]);else{if(validateOrdersState==_0x26ead9(0x30e)){if(config[_0x26ead9(0x30a)]!='market')logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x4d833e);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x385045=_0x3916db;lastOrders[_0x385045(0x32b)](async _0x5554e6=>{const _0x4923ad=_0x385045;try{const _0x41f5f2=await exchange[_0x4923ad(0x350)](_0x5554e6['orderId'],_0x5554e6[_0x4923ad(0x20e)]);}catch(_0x72dd3c){if(_0x72dd3c[_0x4923ad(0x344)]()['includes'](_0x4923ad(0x1b6))){}else await handleError(_0x72dd3c,_0x4923ad(0x2c0));}});}async function initCoinResults(_0x1df466){const _0x46cfca=_0x3916db;_0x1df466?logger[_0x46cfca(0x1b2)](_0x46cfca(0x2c4)+_0x1df466):logger[_0x46cfca(0x1b2)]('Initializing\x20coin\x20results'),config['portfolio'][_0x46cfca(0x32b)](_0x3603b6=>{const _0x4fea20=_0x46cfca;if(!_0x3603b6[_0x4fea20(0x345)]&&_0x3603b6[_0x4fea20(0x27e)]!=config[_0x4fea20(0x266)]){const _0x5b691b=currentCoins['find'](_0x1786c7=>_0x1786c7['coin']==_0x3603b6[_0x4fea20(0x27e)]),_0x5abd44=gTicker[noslash(_0x3603b6[_0x4fea20(0x20e)])];let _0x4a22c9=_0x5b691b?_0x5b691b['number']:null,_0x3d96f7=_0x3603b6[_0x4fea20(0x34d)]?0x1/_0x5abd44:_0x5abd44,_0x13fb62;config[_0x4fea20(0x201)]['forEach'](_0x3f66ba=>{const _0xda5a=_0x4fea20;!_0x13fb62&&(_0x13fb62=_0x3f66ba[_0xda5a(0x23d)][_0xda5a(0x34b)](_0x448d7c=>_0x448d7c[_0xda5a(0x27e)]==_0x3603b6[_0xda5a(0x27e)]),_0x13fb62&&(_0x4a22c9=_0x13fb62[_0xda5a(0x329)],_0x3d96f7=_0x13fb62['price']));});let _0x202a17=dbCoinResults[_0x4fea20(0x218)](_0x4fea20(0x1b4))[_0x4fea20(0x34b)]({'coin':_0x3603b6[_0x4fea20(0x27e)]})[_0x4fea20(0x30f)]();if(!_0x202a17){const _0x443012={'coin':_0x3603b6[_0x4fea20(0x27e)],'number':_0x4a22c9,'breakeven':_0x3d96f7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4fea20(0x218)](_0x4fea20(0x1b4))[_0x4fea20(0x22a)](_0x443012)['write']();}else{if(_0x1df466&&_0x3603b6[_0x4fea20(0x27e)]==_0x1df466){const _0x4c1731={'coin':_0x3603b6[_0x4fea20(0x27e)],'number':_0x4a22c9,'breakeven':_0x3d96f7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4fea20(0x218)](_0x4fea20(0x1b4))['find']({'coin':_0x3603b6[_0x4fea20(0x27e)]})['assign'](_0x4c1731)[_0x4fea20(0x2e7)]();}}}});}async function updateCoinResults(_0x1faabe,_0x2244d5=![]){const _0x49333c=_0x3916db;let _0x48f10e,_0x2c4724,_0x488138,_0x86fab6,_0x33cf38,_0x3965b0,_0x40a35a=dbCoinResults[_0x49333c(0x218)](_0x49333c(0x1b4))[_0x49333c(0x34b)]({'coin':_0x1faabe['coin']})[_0x49333c(0x30f)](),_0x5b431a=![];_0x40a35a&&Object[_0x49333c(0x2a4)](_0x40a35a)[_0x49333c(0x32b)](([_0x52355e,_0x3b973e])=>{if(_0x3b973e==null)_0x5b431a=!![];});(!_0x40a35a||_0x5b431a)&&(await initCoinResults(_0x1faabe[_0x49333c(0x27e)]),_0x40a35a=dbCoinResults[_0x49333c(0x218)](_0x49333c(0x1b4))[_0x49333c(0x34b)]({'coin':_0x1faabe[_0x49333c(0x27e)]})[_0x49333c(0x30f)]());_0x1faabe['reverse']&&(_0x3965b0={'filled':_0x1faabe[_0x49333c(0x24e)]*_0x1faabe[_0x49333c(0x1c9)],'amount':_0x1faabe[_0x49333c(0x24e)]*_0x1faabe[_0x49333c(0x1c9)],'side':_0x1faabe['side']==_0x49333c(0x262)?'buy':'sell','price':0x1/_0x1faabe[_0x49333c(0x1c9)]},_0x1faabe={..._0x1faabe,..._0x3965b0});_0x2244d5?_0x2c4724=_0x1faabe[_0x49333c(0x24c)]==_0x49333c(0x28b)?_0x40a35a['number']+_0x1faabe[_0x49333c(0x24e)]:_0x40a35a[_0x49333c(0x329)]-_0x1faabe[_0x49333c(0x24e)]:_0x2c4724=await getCoinNumber(_0x1faabe['coin']);if(_0x1faabe[_0x49333c(0x24d)]&&_0x1faabe[_0x49333c(0x24d)][_0x49333c(0x23f)]==config[_0x49333c(0x266)])_0x48f10e=Number(_0x1faabe[_0x49333c(0x24d)][_0x49333c(0x307)]);else{if(_0x1faabe[_0x49333c(0x24d)]&&_0x1faabe[_0x49333c(0x24d)]['currency']=='BNB'&&!_0x2244d5&&config[_0x49333c(0x266)]!=_0x49333c(0x271))_0x48f10e=Number(_0x1faabe['fee']['cost'])*gTicker[_0x49333c(0x1cb)+config[_0x49333c(0x266)]];else _0x48f10e=defaultFee*_0x1faabe[_0x49333c(0x24e)]*_0x1faabe['price'];}_0x1faabe['side']==_0x49333c(0x28b)?(_0x488138=_0x2c4724!=0x0?(_0x40a35a[_0x49333c(0x341)]*_0x40a35a[_0x49333c(0x329)]+_0x1faabe['price']*(_0x2c4724-_0x40a35a['number'])+_0x48f10e)/_0x2c4724:0x0,_0x86fab6=_0x40a35a['realized']):(_0x488138=_0x2c4724!=0x0?(_0x40a35a[_0x49333c(0x341)]*_0x40a35a['number']-_0x1faabe['price']*(_0x40a35a[_0x49333c(0x329)]-_0x2c4724)+_0x48f10e)/_0x2c4724:0x0,_0x86fab6=_0x40a35a[_0x49333c(0x275)]+(_0x1faabe[_0x49333c(0x1c9)]-_0x40a35a[_0x49333c(0x341)])*_0x1faabe[_0x49333c(0x24e)]);_0x33cf38=(_0x1faabe[_0x49333c(0x1c9)]-_0x488138-_0x48f10e/_0x1faabe['filled'])*_0x2c4724;let _0x155396={'coin':_0x1faabe[_0x49333c(0x27e)],'number':_0x2c4724,'breakeven':formatResult(_0x488138,0x8),'realized':formatResult(_0x86fab6,0x8),'unrealized':formatResult(_0x33cf38,0x8),'fees':formatResult(_0x40a35a[_0x49333c(0x267)]+_0x48f10e,0x8),'sells':_0x1faabe['side']==_0x49333c(0x262)?_0x40a35a[_0x49333c(0x30d)]+0x1:_0x40a35a[_0x49333c(0x30d)],'buys':_0x1faabe[_0x49333c(0x24c)]=='buy'?_0x40a35a[_0x49333c(0x250)]+0x1:_0x40a35a[_0x49333c(0x250)]};dbCoinResults[_0x49333c(0x218)](_0x49333c(0x1b4))['find']({'coin':_0x1faabe[_0x49333c(0x27e)]})[_0x49333c(0x2cc)](_0x155396)[_0x49333c(0x2e7)]();if(!_0x2244d5){if(_0x1faabe[_0x49333c(0x24d)]&&_0x1faabe[_0x49333c(0x24d)]['currency']==_0x49333c(0x1cb)){const _0x11b79c=currentCoins[_0x49333c(0x34b)](_0xc70a97=>_0xc70a97[_0x49333c(0x27e)]==_0x49333c(0x1cb));if(_0x11b79c){let _0x27472a=dbCoinResults['get']('coins')['find']({'coin':_0x49333c(0x1cb)})[_0x49333c(0x30f)]();_0x155396={..._0x27472a,'number':_0x11b79c['number']},dbCoinResults[_0x49333c(0x218)](_0x49333c(0x1b4))[_0x49333c(0x34b)]({'coin':'BNB'})[_0x49333c(0x2cc)](_0x155396)[_0x49333c(0x2e7)]();}}}}async function placeOrder(_0x49ce0a){const _0x1061bd=_0x3916db,_0x4b9b85=config[_0x1061bd(0x30a)]=='market'?_0x1061bd(0x32c):'limit';if(lockOrders==ORDERS[_0x1061bd(0x277)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x1061bd(0x1b2)](_0x1061bd(0x2c9)+_0x49ce0a[_0x1061bd(0x259)](_0x180fe7=>_0x180fe7['coin'])[_0x1061bd(0x1cc)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x250dc4=![];lastOrders=[];const _0x10a56b=config['threshold'];for(const _0x48d41d of _0x49ce0a){let _0x2e07f4,_0x455638,_0x170cd9,_0x406c5e,_0xfd3431,_0x379325=_0x48d41d[_0x1061bd(0x20e)];logger[_0x1061bd(0x1b2)](_0x1061bd(0x1c2)+_0x48d41d[_0x1061bd(0x27e)]+'\x20'+_0x48d41d[_0x1061bd(0x329)]+'\x20'+_0x48d41d[_0x1061bd(0x2b6)]+'\x20'+_0x48d41d[_0x1061bd(0x33f)]+'%\x20'+_0x48d41d[_0x1061bd(0x32e)]+'%\x20'+(0x64*_0x48d41d[_0x1061bd(0x1d7)])[_0x1061bd(0x1e0)](0x2)+_0x1061bd(0x26e)+_0x10a56b[_0x1061bd(0x1e0)](0x2)+'%)');try{const _0x38d388=await exchange[_0x1061bd(0x2f2)](_0x379325);_0x2e07f4=_0x48d41d[_0x1061bd(0x34d)]?0x1/_0x48d41d[_0x1061bd(0x2b6)]:_0x48d41d['last'],_0x455638=_0x38d388[_0x1061bd(0x217)],_0x170cd9=_0x38d388['ask'];_0x48d41d[_0x1061bd(0x34d)]?(_0x406c5e=_0x48d41d[_0x1061bd(0x24c)]==_0x1061bd(0x28b)?_0x1061bd(0x262):_0x1061bd(0x28b),_0xfd3431=Math[_0x1061bd(0x234)](_0x48d41d['trade'])/_0x2e07f4):(_0x406c5e=_0x48d41d[_0x1061bd(0x24c)],_0xfd3431=Math[_0x1061bd(0x234)](_0x48d41d[_0x1061bd(0x2fe)]));_0x4b9b85==_0x1061bd(0x25f)&&(config['ordertype']=='limit-high'&&(_0x2e07f4=_0x406c5e=='buy'?_0x455638:_0x170cd9),config[_0x1061bd(0x30a)]=='limit-low'&&(_0x2e07f4=_0x406c5e==_0x1061bd(0x28b)?_0x170cd9:_0x455638));_0xfd3431=formatResult(_0xfd3431,0x8),_0x2e07f4=formatResult(_0x2e07f4,0x8);const _0x335b0a=_0x406c5e==_0x1061bd(0x262)?config['emojisell']?String[_0x1061bd(0x342)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x1061bd(0x342)]('0x'+config[_0x1061bd(0x291)])+'\x20':'',_0x20550a=_0x4b9b85==_0x1061bd(0x32c)?_0x1061bd(0x2ec):config[_0x1061bd(0x30a)]==_0x1061bd(0x1d9)?_0x1061bd(0x2de):_0x1061bd(0x1d5),_0x2298ad=(Math[_0x1061bd(0x2e5)](Math[_0x1061bd(0x2ee)]()*0x35a4e900)+0x5f5e100)[_0x1061bd(0x344)]();lastOrders[_0x1061bd(0x22a)]({'customId':_0x2298ad,'symbol':_0x379325,'coin':_0x48d41d[_0x1061bd(0x27e)],'amount':_0xfd3431,'price':_0x2e07f4,'side':_0x406c5e,'reverse':_0x48d41d[_0x1061bd(0x34d)],'filled':0x0});if(_0x4b9b85==_0x1061bd(0x32c))logHistory(_0x1061bd(0x229),''+_0x335b0a+_0x20550a+_0x1061bd(0x1c8)+_0x379325+'\x20'+_0x406c5e+'\x20#'+formatResult(_0xfd3431,0x8)+'\x20@'+formatResult(_0x2e07f4,0x8));else logHistory(_0x1061bd(0x229),''+_0x335b0a+_0x20550a+_0x1061bd(0x1c8)+_0x379325+'\x20'+_0x406c5e+'\x20#'+formatResult(_0xfd3431,0x8)+'\x20@'+formatResult(_0x2e07f4,0x8));let _0x101797;_0x4b9b85==_0x1061bd(0x32c)?_0x406c5e==_0x1061bd(0x28b)&&[_0x1061bd(0x24b),'Bitget',_0x1061bd(0x2f7),'Huobi',_0x1061bd(0x29e)][_0x1061bd(0x312)](config[_0x1061bd(0x2fa)])?_0x101797=await exchange[_0x1061bd(0x1d4)](_0x379325,_0x4b9b85,_0x406c5e,_0xfd3431,_0x2e07f4):_0x101797=await exchange[_0x1061bd(0x1d4)](_0x379325,_0x4b9b85,_0x406c5e,_0xfd3431,undefined):_0x101797=await exchange[_0x1061bd(0x1d4)](_0x379325,_0x4b9b85,_0x406c5e,_0xfd3431,_0x2e07f4);logger[_0x1061bd(0x1b2)]('ID:\x20'+_0x101797['id']+_0x1061bd(0x1d6)+_0x2298ad);const _0x30a47a=lastOrders[_0x1061bd(0x205)]-0x1;if(_0x30a47a>=0x0&&lastOrders[_0x30a47a][_0x1061bd(0x362)]==_0x2298ad){lastOrders[_0x30a47a][_0x1061bd(0x33a)]=_0x101797['id'];if(_0x101797['amount'])lastOrders[_0x30a47a]['amount']=_0x101797[_0x1061bd(0x21a)];if(_0x101797[_0x1061bd(0x1c9)])lastOrders[_0x30a47a][_0x1061bd(0x1c9)]=_0x101797[_0x1061bd(0x1c9)];lastOrders[_0x30a47a][_0x1061bd(0x24d)]=_0x101797[_0x1061bd(0x24d)];}if(config['cooldown']!=0x0){let _0x1c71db=null;if(cooldownTracker[_0x1061bd(0x205)]==config[_0x1061bd(0x21b)]-0x1)_0x1c71db=cooldownTracker[_0x1061bd(0x2f3)]();const _0x1d7873=getTimeStamp();cooldownTracker[_0x1061bd(0x22a)](_0x1d7873);if(_0x1c71db){const _0x578f5b=fns[_0x1061bd(0x2aa)](new Date(_0x1d7873),new Date(_0x1c71db));if(_0x578f5b<cooldownInterval){logHistory(_0x1061bd(0x28d),_0x1061bd(0x324)+config[_0x1061bd(0x21b)]+_0x1061bd(0x222)+cooldownInterval/0x3c+_0x1061bd(0x210)+cooldownPeriod/(0xe10*0x3e8)+_0x1061bd(0x290)),coolingDown=!![];break;}}}}catch(_0x195945){if(_0x195945['toString']()[_0x1061bd(0x312)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x1061bd(0x2d9)](_0x15daff=>_0x15daff[_0x1061bd(0x20e)]!=_0x379325),logHistory('error',_0x1061bd(0x279)+_0x379325),_0x250dc4=!![];else{if(_0x195945[_0x1061bd(0x344)]()[_0x1061bd(0x312)](_0x1061bd(0x1d1)))lastOrders=lastOrders[_0x1061bd(0x2d9)](_0x50f72e=>_0x50f72e[_0x1061bd(0x20e)]!=_0x379325),logHistory(_0x1061bd(0x28d),_0x1061bd(0x2eb)+_0x379325),_0x250dc4=!![];else{if(_0x195945[_0x1061bd(0x344)]()[_0x1061bd(0x312)](_0x1061bd(0x281)))lastOrders=lastOrders[_0x1061bd(0x2d9)](_0x44e4d1=>_0x44e4d1[_0x1061bd(0x20e)]!=_0x379325),logHistory(_0x1061bd(0x28d),_0x1061bd(0x351)+_0x379325),logger['debug'](_0x195945),_0x250dc4=!![];else _0x195945[_0x1061bd(0x344)]()[_0x1061bd(0x312)](_0x1061bd(0x21e))?(lastOrders=lastOrders[_0x1061bd(0x2d9)](_0x445c16=>_0x445c16[_0x1061bd(0x20e)]!=_0x379325),logHistory(_0x1061bd(0x28d),_0x1061bd(0x279)+_0x379325),_0x250dc4=!![]):(lastOrders=lastOrders[_0x1061bd(0x2d9)](_0x42be27=>_0x42be27[_0x1061bd(0x20e)]!=_0x379325),await handleError(_0x195945,_0x1061bd(0x221),_0x379325));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1061bd(0x205)]>0x0){const _0x3ae6b4=config[_0x1061bd(0x30a)]==_0x1061bd(0x32c)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xd121d0=_0x1061bd;validateOrders(_0xd121d0(0x2d5));},_0x3ae6b4);}else unlockOrders();_0x250dc4&&config[_0x1061bd(0x20b)]&&(logHistory(_0x1061bd(0x28d),_0x1061bd(0x2b0)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1061bd(0x232),_0x1061bd(0x2d3)));}else{if(coolingDown)!config['headless']&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x1061bd(0x277)]&&(!config['headless']&&(config['ordertype']==_0x1061bd(0x32c)?logHistory('error',_0x1061bd(0x34a)):logHistory(_0x1061bd(0x28d),_0x1061bd(0x2e8))));}}function persistOpenOrders(_0x682b14){const _0x2f160e=_0x3916db,_0x31f849={...config,'openOrders':_0x682b14};let _0x3c1232=dbConfig[_0x2f160e(0x218)](_0x2f160e(0x1f1))[_0x2f160e(0x34b)]({'botID':botID})[_0x2f160e(0x30f)]();_0x3c1232&&dbConfig[_0x2f160e(0x218)]('bot')[_0x2f160e(0x34b)]({'botID':botID})[_0x2f160e(0x2cc)](_0x31f849)[_0x2f160e(0x2e7)]();}function restoreOrders(){const _0x1277c5=_0x3916db;let _0x167f94;config[_0x1277c5(0x29c)]&&allOpenOrders['forEach'](_0x2dde93=>{const _0x4bdd9c=_0x1277c5,_0x4677b6=config['openOrders'][_0x4bdd9c(0x34b)](_0x1abdb9=>_0x1abdb9[_0x4bdd9c(0x33a)]==_0x2dde93['id']);_0x4677b6&&(lastOrders[_0x4bdd9c(0x22a)](_0x4677b6),_0x167f94=_0x2dde93[_0x4bdd9c(0x26f)]);});if(lastOrders[_0x1277c5(0x205)]>0x0){setLockOrders(ORDERS[_0x1277c5(0x1be)]),validateOrdersState=_0x1277c5(0x1de),allOrdersPlaced=!![];const _0x57d0ab=new Date()[_0x1277c5(0x1e6)](),_0x5c1495=config[_0x1277c5(0x30a)]==_0x1277c5(0x32c)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x167f94+_0x5c1495>_0x57d0ab){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x167f94+_0x5c1495-_0x57d0ab);}else validateOrders(_0x1277c5(0x2d5));}}async function sendMetricsTelegram(){const _0x363c17=_0x3916db;if(!coinsLoaded){process[_0x363c17(0x23c)]({'telegrammsg':_0x363c17(0x1e7)},_0x1a21c0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1947cc='';if(config[_0x363c17(0x1f4)])_0x1947cc=_0x363c17(0x36b)+config['botname']+_0x363c17(0x2f4);else _0x1947cc=_0x363c17(0x368)+botID+_0x363c17(0x2f4);const _0x2578a3=getKPIs(_0x363c17(0x266)),_0xf570e1=getKPIs('fiat',config[_0x363c17(0x223)]),_0x14abb0=getKPIs(_0x363c17(0x33c)),_0x381582=getKPIs(_0x363c17(0x1ca),config['fiat']);_0x1947cc+=_0x363c17(0x2ce),_0x1947cc+=_0x2578a3[_0x363c17(0x264)]+'\x20:\x20'+_0x2578a3[_0x363c17(0x30f)]+'\x0a',_0x1947cc+=_0x2578a3[_0x363c17(0x2d4)]+':\x20'+_0x2578a3[_0x363c17(0x1bb)]+'%\x0a',_0x1947cc+=_0xf570e1[_0x363c17(0x264)]+'\x20:\x20'+_0xf570e1[_0x363c17(0x30f)]+'\x0a',_0x1947cc+=_0xf570e1[_0x363c17(0x2d4)]+':\x20'+_0xf570e1[_0x363c17(0x1bb)]+'%\x0a',_0x1947cc+=_0x14abb0[_0x363c17(0x264)]+':\x20'+_0x14abb0['value']+'\x20('+config[_0x363c17(0x266)]+')\x0a',_0x1947cc+=_0x14abb0['rightTxt']+':\x20'+_0x14abb0['change']+_0x363c17(0x26e)+config[_0x363c17(0x266)]+')\x0a',_0x1947cc+=_0x381582['leftTxt']+':\x20'+_0x381582[_0x363c17(0x30f)]+'\x20('+config['fiat']+')\x0a',_0x1947cc+=_0x381582[_0x363c17(0x2d4)]+':\x20'+_0x381582[_0x363c17(0x1bb)]+'%\x20('+config[_0x363c17(0x223)]+')\x0a',_0x1947cc+=_0x363c17(0x2cd),process['send']({'telegrammsg':_0x1947cc},_0x251181=>{});}async function sendPortfolioTelegram(){const _0x48a885=_0x3916db;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x48a885(0x23c)]({'telegrammsg':_0x48a885(0x1e7)},_0x57b3bc=>{});return;}let _0x33eb88='';if(config[_0x48a885(0x1f4)])_0x33eb88='<b>'+config[_0x48a885(0x213)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x33eb88=_0x48a885(0x368)+botID+_0x48a885(0x1c3);_0x33eb88+='<pre>',_0x33eb88+=_0x48a885(0x25a),_0x33eb88+=_0x48a885(0x313),_0x33eb88+=_0x48a885(0x25a),currentCoins[_0x48a885(0x32b)](_0x2304e3=>{const _0x1bc622=_0x48a885;_0x33eb88+=_0x2304e3['coin'][_0x1bc622(0x235)](0x7)+'|\x20'+formatPad(_0x2304e3[_0x1bc622(0x33f)],0x2,0x6)+'|\x20'+formatPad(_0x2304e3[_0x1bc622(0x32e)],0x2,0x6)+'|\x20'+formatPad(_0x2304e3[_0x1bc622(0x1d7)]*0x64,0x2,0x6)+'\x0a';}),_0x33eb88+='</pre>',process['send']({'telegrammsg':_0x33eb88},_0x490f00=>{});}function formatPad(_0xcac7dc,_0x57b146,_0x2dc501){const _0x31901a=_0x3916db,_0x2e818b=formatResultString(_0xcac7dc,_0x57b146);return _0x2e818b?_0x2e818b[_0x31901a(0x23a)](_0x2dc501):''['padStart'](_0x2dc501);}function logHistory(_0x5f1d66,_0x4d995f,_0x2334a5=''){const _0x4685d8=_0x3916db;logger[_0x4685d8(0x288)](''+_0x4d995f);let _0x4a36c9={'time':getTimeStamp(),'type':_0x5f1d66,'event':_0x4d995f};dbLogs[_0x4685d8(0x218)](_0x4685d8(0x238))[_0x4685d8(0x22a)](_0x4a36c9)[_0x4685d8(0x2e7)]();if(_0x2334a5=='')_0x2334a5=_0x4d995f;proxyEmit(_0x4685d8(0x274),{'log':_0x4a36c9,'summary':_0x2334a5}),process['send']({'telegram':{..._0x4a36c9,'botname':config[_0x4685d8(0x213)],'showname':config[_0x4685d8(0x1f4)]}},_0x4d8db9=>{});}function emitHistory(_0x1493c0={}){const _0xba15cb=_0x3916db;Object[_0xba15cb(0x2ad)](_0x1493c0)[_0xba15cb(0x205)]==0x0&&(_0x1493c0={'type':[_0xba15cb(0x229),'event'],'event':'','page':0x1});if(_0x1493c0[_0xba15cb(0x2e3)][_0xba15cb(0x312)]('event'))_0x1493c0['type']['splice'](_0x1493c0[_0xba15cb(0x2e3)][_0xba15cb(0x373)]('event'),0x1,_0xba15cb(0x28d),'warning',_0xba15cb(0x232));if(dbLogs[_0xba15cb(0x2b8)]('logs')[_0xba15cb(0x30f)]()){let _0x456c6d=dbLogs[_0xba15cb(0x218)](_0xba15cb(0x238))[_0xba15cb(0x2d9)](_0x4a40a5=>{const _0x391462=_0xba15cb;if(_0x1493c0[_0x391462(0x2e3)][_0x391462(0x205)]==0x0)return![];else return _0x1493c0[_0x391462(0x2e3)][_0x391462(0x312)](_0x4a40a5[_0x391462(0x2e3)]);})[_0xba15cb(0x2d9)](_0x3b3cb9=>{const _0x4bc829=_0xba15cb;if(_0x1493c0[_0x4bc829(0x274)]=='')return!![];else return _0x3b3cb9[_0x4bc829(0x274)]['toLowerCase']()['includes'](_0x1493c0[_0x4bc829(0x274)][_0x4bc829(0x1f0)]());})['sortBy']('time'),_0x5b2c57=_0x456c6d[_0xba15cb(0x30f)]()[_0xba15cb(0x205)];_0x456c6d=_0x456c6d['reverse']()[_0xba15cb(0x1cf)]((_0x1493c0['page']-0x1)*logPageSize,_0x1493c0[_0xba15cb(0x255)]*logPageSize-0x1)['reverse']()[_0xba15cb(0x30f)](),proxyEmit(_0xba15cb(0x34c),{'logs':_0x456c6d,'total':_0x5b2c57});}else proxyEmit(_0xba15cb(0x34c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5f3215){const _0x465293=_0x3916db;if(dbLogs[_0x465293(0x2b8)]('logs')[_0x465293(0x30f)]()){const _0x19ab48=dbLogs['get'](_0x465293(0x238))[_0x465293(0x1d3)](_0x465293(0x1ba))['filter'](_0x51f97b=>{const _0x256be9=_0x465293;return _0x51f97b['type']==_0x256be9(0x229);})[_0x465293(0x30f)]();dbLogs[_0x465293(0x218)](_0x465293(0x238))[_0x465293(0x2a9)]()[_0x465293(0x2e7)](),dbLogs[_0x465293(0x218)](_0x465293(0x238))[_0x465293(0x2cc)](_0x19ab48)[_0x465293(0x2e7)](),emitHistory(_0x5f3215);}}async function pauseBot(_0x540247=pauseBotIntervalShort,_0x5a1d23,_0x2395f3,_0x15ac77=![]){const _0xba5a01=_0x3916db,_0x2c0766=new Date()[_0xba5a01(0x1e6)]();if(!lastErrorShown||_0x2c0766-lastErrorShown>=_0x540247){lastErrorShown=_0x2c0766;if(!lastBotPause)lastBotPause=_0x2c0766,consecutivePauses=0x1;else{if(_0x2c0766-lastBotPause-_0x540247<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x15ac77){logHistory(_0xba5a01(0x28d),_0x5a1d23+_0xba5a01(0x2c6)),await killBot();return;}else logHistory('error',_0x5a1d23+pauseBotMsg),_0x540247=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2c0766;}_0x2395f3?logger['debug']('('+consecutivePauses+')\x20'+_0x5a1d23+'\x20>\x20details:',_0x2395f3):logger[_0xba5a01(0x1b2)]('('+consecutivePauses+')\x20'+_0x5a1d23);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x540247),botPaused=![],_0x540247==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x185422=_0x3916db;botPaused=!![],await sleep(0x3e8),process[_0x185422(0x23c)]({'stop':_0x185422(0x309)},_0x2ae653=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x299468,_0x58c2b6){const _0x371924=_0x3916db;if(botPaused)return;const _0x9dfb2b=config['exchange']||_0x371924(0x1ee);if(_0x58c2b6)logger['debug']('Exception\x20thrown\x20in\x20'+_0x58c2b6);const _0x12fb0f=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x299468['toString']()['includes'](_0x371924(0x292)))logHistory(_0x371924(0x28d),_0x9dfb2b+_0x371924(0x27b)),_0x12fb0f();else{if(_0x299468['toString']()['includes'](_0x371924(0x358)))logHistory(_0x371924(0x28d),_0x9dfb2b+_0x371924(0x2bc)),_0x12fb0f();else{if(_0x299468[_0x371924(0x344)]()[_0x371924(0x312)](_0x371924(0x298)))config['apiPassword']?errormsg=_0x9dfb2b+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':errormsg=_0x9dfb2b+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x371924(0x28d),errormsg+'(see:\x20hodlerhacks.com/fix/1)'),_0x12fb0f();else _0x299468[_0x371924(0x344)]()[_0x371924(0x312)](_0x371924(0x336))?(logHistory(_0x371924(0x28d),_0x9dfb2b+_0x371924(0x32a)),_0x12fb0f()):await handleError(_0x299468,null);}}}async function handleError(_0x54f146,_0x4388eb,_0x278026=''){const _0x264b2b=_0x3916db;if(botPaused)return;let _0x577555;const _0x52f156=config[_0x264b2b(0x2fa)]||_0x264b2b(0x1ee);if(_0x4388eb)logger['debug']('Exception\x20thrown\x20in\x20'+_0x4388eb);if(_0x54f146['toString']()['includes'](_0x264b2b(0x283)))_0x577555=_0x52f156+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x577555,_0x54f146);else{if(_0x54f146[_0x264b2b(0x344)]()['includes'](_0x264b2b(0x214)))_0x577555=_0x52f156+_0x264b2b(0x355),await pauseBot(undefined,_0x577555,_0x54f146);else{if(_0x54f146[_0x264b2b(0x344)]()['includes'](_0x264b2b(0x376))||_0x54f146['toString']()[_0x264b2b(0x312)](_0x264b2b(0x1b9)))_0x577555=_0x52f156+_0x264b2b(0x30b),await pauseBot(undefined,_0x577555,_0x54f146['toString']());else{if(_0x54f146[_0x264b2b(0x344)]()[_0x264b2b(0x312)](_0x264b2b(0x370)))_0x577555=_0x52f156+_0x264b2b(0x2b1),await pauseBot(undefined,_0x577555,_0x54f146['toString']());else{if(_0x54f146['toString']()[_0x264b2b(0x312)](_0x264b2b(0x1b8)))_0x577555=_0x52f156+_0x264b2b(0x1eb),await pauseBot(undefined,_0x577555,_0x54f146[_0x264b2b(0x344)]());else{if(_0x54f146['toString']()[_0x264b2b(0x1f0)]()[_0x264b2b(0x312)](_0x264b2b(0x26f))||_0x54f146['toString']()[_0x264b2b(0x1f0)]()[_0x264b2b(0x312)](_0x264b2b(0x2c3)))_0x577555=_0x264b2b(0x2a0),await pauseBot(undefined,_0x577555,_0x54f146[_0x264b2b(0x344)]());else{if(_0x54f146[_0x264b2b(0x344)]()['includes']('InvalidNonce'))_0x577555=_0x52f156+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x577555,_0x54f146[_0x264b2b(0x344)]());else{if(_0x54f146 instanceof ccxt[_0x264b2b(0x22c)])_0x577555=_0x52f156+'\x20network\x20error:\x20'+_0x54f146[_0x264b2b(0x344)](),logger['debug'](_0x264b2b(0x2bf),_0x54f146),await pauseBot(undefined,_0x577555,_0x54f146);else{if(_0x54f146[_0x264b2b(0x344)]()[_0x264b2b(0x312)](_0x264b2b(0x292)))logHistory(_0x264b2b(0x28d),_0x52f156+_0x264b2b(0x1fe)),logHistory(_0x264b2b(0x28d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x54f146[_0x264b2b(0x344)]()[_0x264b2b(0x312)](_0x264b2b(0x358)))logHistory('error',_0x52f156+_0x264b2b(0x1d8)),logHistory(_0x264b2b(0x28d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x54f146['toString']()['includes'](_0x264b2b(0x298))&&_0x54f146[_0x264b2b(0x344)]()['includes'](_0x264b2b(0x248)))_0x577555=_0x52f156+_0x264b2b(0x361),await pauseBot(undefined,_0x577555,_0x54f146,!![]);else{if(_0x54f146['toString']()[_0x264b2b(0x312)](_0x264b2b(0x298)))config[_0x264b2b(0x1b7)]?_0x577555=_0x52f156+_0x264b2b(0x226):_0x577555=_0x52f156+_0x264b2b(0x2f0),logHistory(_0x264b2b(0x28d),_0x577555),logHistory('error',_0x264b2b(0x285)),await killBot();else{if(_0x54f146[_0x264b2b(0x344)]()['includes'](_0x264b2b(0x336)))logHistory(_0x264b2b(0x28d),_0x52f156+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x264b2b(0x28d),_0x264b2b(0x285)),await killBot();else{if(_0x54f146[_0x264b2b(0x344)]()[_0x264b2b(0x312)](_0x264b2b(0x36e)))logHistory('error',_0x264b2b(0x2a7)+_0x278026),logger[_0x264b2b(0x1b2)](_0x264b2b(0x249),_0x54f146);else{if(_0x54f146 instanceof ccxt['ExchangeError']){_0x577555=_0x52f156+_0x264b2b(0x36f)+_0x54f146[_0x264b2b(0x344)](),logHistory('error',_0x577555),logger[_0x264b2b(0x1b2)]('Exchange\x20error\x20details:',_0x54f146);if(_0x278026)logger[_0x264b2b(0x1b2)](_0x264b2b(0x1c6)+_0x278026);await pauseBot(undefined,_0x577555,_0x54f146);}else{_0x577555='Unknown\x20error:\x20'+_0x54f146[_0x264b2b(0x344)](),logHistory(_0x264b2b(0x28d),_0x577555),logger[_0x264b2b(0x1b2)](_0x577555+_0x264b2b(0x30c),_0x54f146);if(_0x278026)logger[_0x264b2b(0x1b2)](_0x264b2b(0x1c6)+_0x278026);await pauseBot(undefined,_0x577555);}}}}}}}}}}}}}}}}function decryptRSA(_0x3c28d1,_0x2f703a){const _0x4a3a42=_0x3916db,_0x35be03=forge['pki'][_0x4a3a42(0x206)](_0x3c28d1),_0x43dcf6=_0x35be03[_0x4a3a42(0x20f)](forge['util']['decode64'](_0x2f703a),_0x4a3a42(0x2ff),{'md':forge['md']['sha256'][_0x4a3a42(0x364)](),'mgf1':{'md':forge['md']['sha256'][_0x4a3a42(0x364)]()}});return _0x43dcf6;}async function withRetry(_0x27dfde,_0x5b2b62){const _0x2745c3=_0x3916db;let _0x3d66ba=![],_0x3e8cc3=0x0,_0x336b29,_0x11d9ea;while(_0x3e8cc3<maxRetries){try{_0x336b29=await _0x5b2b62();break;}catch(_0x1c7515){_0x11d9ea=_0x1c7515,!_0x3d66ba?(_0x3d66ba=!![],logger[_0x2745c3(0x1b2)]('RETRY\x20-\x20Error\x20in\x20'+_0x27dfde+':',_0x1c7515[_0x2745c3(0x344)]())):await sleep(retryInterval);}_0x3e8cc3++;}if(_0x3e8cc3==0x0)return _0x336b29;if(_0x3e8cc3>=maxRetries)throw _0x11d9ea;else return logger[_0x2745c3(0x1b2)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x3e8cc3+_0x2745c3(0x209)),_0x336b29;}function formatResult(_0x39fe59,_0x384f16){return parseFloat(_0x39fe59['toFixed'](_0x384f16));}function formatResultTruncate(_0xccffdf,_0x352722){const _0xeefbdd=_0x3916db;let _0xc76bf0=formatResultString(_0xccffdf,0xa),_0x2aa2e8=_0xc76bf0[_0xeefbdd(0x373)]('.');return _0x2aa2e8!=-0x1&&(_0xc76bf0=_0xc76bf0[_0xeefbdd(0x1cf)](0x0,_0x2aa2e8+_0x352722+0x1)),Number(_0xc76bf0);}function formatResultString(_0x4e9b1f,_0x4eff21){const _0x1062a7=_0x3916db;let _0x4e6a46;if(!(''+_0x4e9b1f)[_0x1062a7(0x312)]('e'))_0x4e6a46=+(Math[_0x1062a7(0x323)](_0x4e9b1f+'e+'+_0x4eff21)+'e-'+_0x4eff21);else{let _0x295378=(''+_0x4e9b1f)[_0x1062a7(0x1f2)]('e'),_0x3e7ce3='';+_0x295378[0x1]+_0x4eff21>0x0&&(_0x3e7ce3='+'),_0x4e6a46=+(Math[_0x1062a7(0x323)](+_0x295378[0x0]+'e'+_0x3e7ce3+(+_0x295378[0x1]+_0x4eff21))+'e-'+_0x4eff21);}return Number(_0x4e6a46)[_0x1062a7(0x1e0)](_0x4eff21);}function getServerTime(){const _0x14e165=_0x3916db,_0x521ad5=new Date();return _0x521ad5[_0x14e165(0x359)]()+'/'+(_0x521ad5[_0x14e165(0x338)]()+0x1)[_0x14e165(0x344)]()['padStart'](0x2,'0')+'/'+_0x521ad5['getDate']()[_0x14e165(0x344)]()[_0x14e165(0x23a)](0x2,'0')+'\x20'+_0x521ad5[_0x14e165(0x256)]()[_0x14e165(0x344)]()[_0x14e165(0x23a)](0x2,'0')+':'+_0x521ad5[_0x14e165(0x35d)]()['toString']()[_0x14e165(0x23a)](0x2,'0')+':'+_0x521ad5[_0x14e165(0x2e0)]()[_0x14e165(0x344)]()[_0x14e165(0x23a)](0x2,'0');}function getTimeStamp(){const _0x2d2480=_0x3916db,_0xc0b088=shiftedTime();return _0xc0b088[_0x2d2480(0x359)]()+'/'+(_0xc0b088[_0x2d2480(0x338)]()+0x1)[_0x2d2480(0x344)]()[_0x2d2480(0x23a)](0x2,'0')+'/'+_0xc0b088[_0x2d2480(0x1d2)]()[_0x2d2480(0x344)]()['padStart'](0x2,'0')+'\x20'+_0xc0b088[_0x2d2480(0x256)]()[_0x2d2480(0x344)]()[_0x2d2480(0x23a)](0x2,'0')+':'+_0xc0b088[_0x2d2480(0x35d)]()[_0x2d2480(0x344)]()[_0x2d2480(0x23a)](0x2,'0')+':'+_0xc0b088[_0x2d2480(0x2e0)]()[_0x2d2480(0x344)]()[_0x2d2480(0x23a)](0x2,'0');}function getDate(){const _0x21cb99=_0x3916db,_0x1354e9=shiftedTime();return _0x1354e9['getFullYear']()+'/'+(_0x1354e9[_0x21cb99(0x338)]()+0x1)[_0x21cb99(0x344)]()[_0x21cb99(0x23a)](0x2,'0')+'/'+_0x1354e9[_0x21cb99(0x1d2)]()[_0x21cb99(0x344)]()[_0x21cb99(0x23a)](0x2,'0');}function getHour(){const _0x529218=_0x3916db,_0x352649=shiftedTime();return _0x352649[_0x529218(0x256)]()[_0x529218(0x344)]()['padStart'](0x2,'0');}function sleep(_0x31f66d){return new Promise(_0x163e0b=>setTimeout(_0x163e0b,_0x31f66d));}function shiftedTime(){const _0x3e387b=_0x3916db,_0x3a6c29=new Date();let _0x197a20=_0x3a6c29;if(config&&config[_0x3e387b(0x326)]!==0x0)_0x197a20=fns[_0x3e387b(0x2dc)](_0x3a6c29,{'hours':config[_0x3e387b(0x326)]});return _0x197a20;}function timer(_0x58a0bd){const _0x264ef4=_0x3916db,_0x29e566=new Date();!lasttime?console[_0x264ef4(0x28c)](getTimeStamp()+_0x264ef4(0x1cd),_0x58a0bd,_0x29e566):console[_0x264ef4(0x28c)](getTimeStamp()+':\x20timer\x20>',_0x58a0bd,(_0x29e566-lasttime)/0x3e8),lasttime=_0x29e566;}