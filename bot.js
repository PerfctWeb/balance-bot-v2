const _0xb132d5=_0x4941;(function(_0x564ee8,_0x29a88a){const _0x11264a=_0x4941,_0x25dc59=_0x564ee8();while(!![]){try{const _0x52f4e2=parseInt(_0x11264a(0x223))/0x1*(-parseInt(_0x11264a(0x1e7))/0x2)+-parseInt(_0x11264a(0x2d8))/0x3*(parseInt(_0x11264a(0x286))/0x4)+parseInt(_0x11264a(0x243))/0x5*(parseInt(_0x11264a(0x25e))/0x6)+-parseInt(_0x11264a(0x242))/0x7*(-parseInt(_0x11264a(0x215))/0x8)+parseInt(_0x11264a(0x1d6))/0x9*(-parseInt(_0x11264a(0x2d1))/0xa)+parseInt(_0x11264a(0x268))/0xb+-parseInt(_0x11264a(0x2bf))/0xc;if(_0x52f4e2===_0x29a88a)break;else _0x25dc59['push'](_0x25dc59['shift']());}catch(_0x2522ba){_0x25dc59['push'](_0x25dc59['shift']());}}}(_0x4ba0,0x8a531));const _0x28fd93=function(){let _0x593b87=!![];return function(_0x1f6093,_0x2bbf4f){const _0x4f1e0f=_0x593b87?function(){const _0x27aad8=_0x4941;if(_0x2bbf4f){const _0x51bcb8=_0x2bbf4f[_0x27aad8(0x209)](_0x1f6093,arguments);return _0x2bbf4f=null,_0x51bcb8;}}:function(){};return _0x593b87=![],_0x4f1e0f;};}(),_0x126aec=_0x28fd93(this,function(){const _0xa699cf=_0x4941;return _0x126aec[_0xa699cf(0x25a)]()[_0xa699cf(0x231)]('(((.+)+)+)+$')['toString']()[_0xa699cf(0x1e4)](_0x126aec)[_0xa699cf(0x231)](_0xa699cf(0x2c4));});_0x126aec();'use strict';const ccxt=require(_0xb132d5(0x2e6)),low=require(_0xb132d5(0x2b4)),FileSync=require(_0xb132d5(0x22e)),fs=require('fs'),fns=require(_0xb132d5(0x2af)),{WebsocketClient,DefaultLogger}=require(_0xb132d5(0x255)),Crypt=require(_0xb132d5(0x1ff))[_0xb132d5(0x294)];let exchange,wsClient;global[_0xb132d5(0x1f0)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0xb132d5(0x228))[_0xb132d5(0x1d7)],botID=process[_0xb132d5(0x2c8)][0x2]||_0xb132d5(0x20e),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0xb132d5(0x2c0)](_0xb132d5(0x1df)+botID+_0xb132d5(0x265)),process[_0xb132d5(0x2bb)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0xb132d5(0x267)+userID+'/':_0xb132d5(0x267);!fs[_0xb132d5(0x245)](configpath)&&fs[_0xb132d5(0x1fd)](configpath);const configfile=configpath+_0xb132d5(0x1f9)+botID+'-config.json',logfile=configpath+_0xb132d5(0x1f9)+botID+_0xb132d5(0x1e1),performancefile=configpath+_0xb132d5(0x1f9)+botID+_0xb132d5(0x2df),coinresultsfile=configpath+_0xb132d5(0x1f9)+botID+_0xb132d5(0x1e5),settingsfile=configpath+_0xb132d5(0x244),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xb132d5(0x28e)]({'logs':[]})[_0xb132d5(0x20f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0xb132d5(0x20f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xb132d5(0x28e)]({'bot':[]})[_0xb132d5(0x20f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0xb132d5(0x20f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x4ba0(){const _0x148fd8=['Limit\x20(high-margin)','Executed\x20','eachDayOfInterval','fees','./version.json','subscribeSpotUserDataStream','\x20|\x20Unknown\x20error\x20occured','loadSymbols()','EUR','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','lowdb/adapters/FileSync','timestamp','currency','search','trade','threshold','replace','valid','recreateHistory()','wsKey','configuration-stored','wss://stream.binance.com:9443','WebSockets(','includes','ordertype','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limit-high','recreate','\x20minutes\x20-\x20balancing\x20resumed','yyyy/MM/dd\x20HH:mm:ss','1398376tHgWFe','5rfieOE','bb-settings.json','existsSync','usd','time','\x20-\x20','args','formattedMessage','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','min','excluded','remove','startprice','coins','shift','buy','parseISO','startdate','binance','showname','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','asset','realized','toString','HOT/EUR','has','datetime','6753438jzNqFn','placeOrder()','error','forEach','getPortfolio()','symbols','parse',',\x20must\x20be\x20a\x203\x20digit\x20number','event-history','./config/','9032210BnBwgm','placeOrder','bot','Invalid\x20quantity','entries','getSeconds','Binance\x20API\x20secret\x20is\x20invalid','send','apiSecret','kline','BTCUSDT','DAI/','limit','getStartingBalances','closeWs','eventType','indexOf','emojisell','\x20order:\x20','data','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','BTC/USDT','length','availableBalance','event','push','privateKey','Performance\x20recreation\x20completed\x20successfully','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','5448NRSUgQ','outboundAccountPosition','filter','padStart','coin','toLowerCase','milliseconds','ExchangeNotAvailable','defaults','find','\x20hour','USDC','side','botID','Crypt','progress','InsufficientFunds','\x20>\x20','cooldown','last','fetchOrders','assign','format','getFullYear','performance','price','total','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','eur','split','Order:\x20','yyyy/MM/dd','delta','cost','fetchBalance','sort','BTCBUSD','emitHistory','BUSD','LIMIT','BNB','date-fns','close','fee','enabled','slice','lowdb','exchange','wss://stream.binance.us:9443','abs','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','cancelLoading','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','exit','Unfilled\x20order(s)\x20canceled\x20after\x20','differenceInCalendarDays','headless','4688856YIUxrv','log','USDT','Order(s)\x20not\x20validated\x20after\x20','basecoin','(((.+)+)+)+$','map','getTime','max','argv','HOT/BTC','getCloses()','market','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','executionReport','sell','target','balances','370pVIwNu','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','number','configuration','reverse','getPortfolio','settings','939niUxTN','restart','buys','keys','coin-loading-progress','date','subscribeSpotKline','-performance.json','cancel','sells','getHours','BTC/EUR','Bot\x20','orderId','ccxt','storeConfiguration','getDate','apiKey','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','DDoSProtection','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','211158yrTxRi','version','decrypt',':\x20Bot\x20','breakeven','RequestTimeout','remainingSymbols','kill','startnumber','Error:\x20Invalid\x20argument\x20','timeshift','-events.json','************','sha256','constructor','-results.json','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','242wEulgl','offset','type','BTC','filled','sortBy','cancelOrder()','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','symbol','ticker','FILLED','page','orderType','order','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','running','portfolio','getMinutes','bot-','fetchTickers','starting-balances','userData','mkdirSync','yyyy-MM-dd\x27T\x27HH:mm:ss','hybrid-crypto-js','emojibuy','success','bid','reduce','splice','getFiat()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','distribution','initclient','apply','differenceInSeconds','getCoins()','botname','timeout','001','write','toFixed','amount','Order(s)\x20validated\x20-\x20balancing\x20resumed','API-key\x20format\x20invalid','function','24HAFkWQ','getMonth','accumulatedQuantity',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','value','limits','message','round','get','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','binanceus','Order(s)\x20filled\x20-\x20balancing\x20resumed','initws()','fromCodePoint','2432dYWMzZ'];_0x4ba0=function(){return _0x148fd8;};return _0x4ba0();}let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0xb132d5(0x2e3)},'usd':{'coin':_0xb132d5(0x272),'symbol':_0xb132d5(0x27e)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x443bde)=>{},'debug':(..._0x2342e5)=>{},'notice':(..._0x42452a)=>{},'info':(..._0x2b88e3)=>{},'warning':(..._0x455103)=>{},'error':async function(..._0x59032c){const _0x597671=_0xb132d5,_0x1f1a0a=new Date()[_0x597671(0x2c6)]();if(!lastErrorShown||_0x1f1a0a-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x597671(0x260),'WebSockets('+consecutivePauses+_0x597671(0x218));let _0x2429b2='';if(_0x59032c[0x0])_0x2429b2+=_0x59032c[0x0];if(_0x59032c[0x1]&&_0x59032c[0x1]['error']&&_0x59032c[0x1]['error'][_0x597671(0x21b)])_0x2429b2+=_0x597671(0x248)+_0x59032c[0x1]['error']['message'];logging(_0x597671(0x23a)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x2429b2),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xb132d5(0x1e3),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0xb132d5(0x1e0)]!=config['timeshift']&&updateTimeshift(settings[_0xb132d5(0x1e0)]);process[_0xb132d5(0x26f)]({'started':_0xb132d5(0x1f6)},_0x80772c=>{}),initializeProcessListeners();function proxyEmit(_0x123f2c,_0x3dfd77=null){const _0x20261c=_0xb132d5;process[_0x20261c(0x26f)]({'function':_0x123f2c,'args':_0x3dfd77},_0x55aaea=>{});}function initializeProcessListeners(){const _0x5e69a4=_0xb132d5;process['on'](_0x5e69a4(0x21b),_0x4eb8bb=>{const _0x1db07b=_0x5e69a4;switch(Object[_0x1db07b(0x2db)](_0x4eb8bb)[0x0]){case'timeshift':_0x4eb8bb[_0x1db07b(0x1e0)]!=undefined&&(settings['timeshift']=_0x4eb8bb['timeshift'],updateTimeshift(settings[_0x1db07b(0x1e0)]));break;case _0x1db07b(0x214):switch(_0x4eb8bb['function']){case _0x1db07b(0x208):initclient();break;case _0x1db07b(0x2ab):emitHistory(_0x4eb8bb[_0x1db07b(0x249)]);break;case _0x1db07b(0x2d6):getPortfolio(_0x4eb8bb[_0x1db07b(0x249)]);break;case _0x1db07b(0x1d0):storeConfiguration(_0x4eb8bb[_0x1db07b(0x249)]);break;case'storeHeadless':storeHeadless(_0x4eb8bb[_0x1db07b(0x249)]);break;case _0x1db07b(0x275):getStartingBalances();break;case _0x1db07b(0x269):placeOrder(_0x4eb8bb['args']);break;case _0x1db07b(0x2b9):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x3b14e0=_0xb132d5;if(pidBalances)clearTimeout(pidBalances);if(config[_0x3b14e0(0x1d2)]!=''){await initExchange(config[_0x3b14e0(0x1d2)],config[_0x3b14e0(0x270)]);let _0x2f7f7e=await loadSymbols();_0x2f7f7e&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x592d50,_0x213206){const _0x57a105=_0xb132d5,_0x52a1f8=ccxt[config[_0x57a105(0x2b5)]];let _0x3c9773;switch(config[_0x57a105(0x2b5)]){case'binance':_0x3c9773=_0x57a105(0x239);break;case _0x57a105(0x21f):_0x3c9773=_0x57a105(0x2b6);break;default:_0x3c9773=_0x57a105(0x239);}exchange=new _0x52a1f8({'apiKey':_0x592d50,'secret':_0x213206,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x592d50,'api_secret':_0x213206,'beautify':!![],'wsUrl':_0x3c9773},logger),config['exchange']==_0x57a105(0x21f)&&(stablecoins={'eur':{'coin':_0x57a105(0x2aa),'symbol':'BTC/BUSD'},'usd':{'coin':_0x57a105(0x272),'symbol':_0x57a105(0x27e)}});}async function loadSymbols(){const _0x6a82e7=_0xb132d5;let _0x58ab94;try{markets=await exchange['loadMarkets']();const _0x583774=[_0x6a82e7(0x273),_0x6a82e7(0x2c9),_0x6a82e7(0x25b)];allSymbols=exchange[_0x6a82e7(0x263)][_0x6a82e7(0x288)](_0x2d7e2c=>{let _0x49d40a=![];return _0x583774['forEach'](_0x199015=>{const _0x34aae3=_0x4941;if(_0x2d7e2c[_0x34aae3(0x23b)](_0x199015))_0x49d40a=!![];}),!_0x49d40a;}),_0x58ab94=!![];}catch(_0x23dbf5){await handleError(_0x23dbf5,_0x6a82e7(0x22b)),_0x58ab94=![];}return _0x58ab94;}async function initbot(){const _0x1729cf=_0xb132d5;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x13d73f=dbCoinResults[_0x1729cf(0x21d)]('coins')['value']();if(_0x13d73f[_0x1729cf(0x27f)]==0x0)await resetCoinResults();}async function initclient(){const _0x49ef9a=_0xb132d5;proxyEmit(_0x49ef9a(0x2d4),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x49ef9a(0x2d0),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4f6460=_0xb132d5;wsinitialized=![];ws1&&(ws1[_0x4f6460(0x261)](_0x20a49b=>{const _0x4bbc0f=_0x4f6460;try{wsClient[_0x4bbc0f(0x276)](_0x20a49b);}catch(_0x408b5d){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0xee42ba){}ws2=null;}}async function initws(){const _0x515c0b=_0xb132d5;cleanws();let _0xc9c35c=[];currentCoins['forEach'](_0x2e5ced=>{const _0x58dc27=_0x4941;if(_0x2e5ced[_0x58dc27(0x28a)]!=config[_0x58dc27(0x2c3)])_0xc9c35c[_0x58dc27(0x282)](noslash(_0x2e5ced[_0x58dc27(0x1ef)]));});if(!_0xc9c35c[_0x515c0b(0x23b)](stablecoins[_0x515c0b(0x2a2)][_0x515c0b(0x28a)]))_0xc9c35c[_0x515c0b(0x282)](stablecoins[_0x515c0b(0x2a2)][_0x515c0b(0x28a)]);if(!_0xc9c35c['includes'](stablecoins[_0x515c0b(0x246)][_0x515c0b(0x28a)]))_0xc9c35c[_0x515c0b(0x282)](stablecoins['usd'][_0x515c0b(0x28a)]);if(!_0xc9c35c[_0x515c0b(0x23b)](_0x515c0b(0x2ae)+config[_0x515c0b(0x2c3)]))_0xc9c35c[_0x515c0b(0x282)](_0x515c0b(0x2ae)+config['basecoin']);try{_0xc9c35c[_0x515c0b(0x261)]((_0xedda9,_0x5f357a)=>{const _0x3ebf92=_0x515c0b;ws1[_0x5f357a]=wsClient[_0x3ebf92(0x2de)](_0xedda9,'1m');}),ws2=wsClient[_0x515c0b(0x229)](),wsClient['on'](_0x515c0b(0x24a),_0x22def6=>{const _0x37f297=_0x515c0b;if(!Array['isArray'](_0x22def6)&&!_0x22def6[_0x37f297(0x237)][_0x37f297(0x23b)]('userData')){if(_0x22def6[_0x37f297(0x277)]==='kline'){global[_0x37f297(0x1f0)][_0x22def6[_0x37f297(0x271)]['symbol']]=_0x22def6[_0x37f297(0x271)][_0x37f297(0x2b0)];return;}}else{if(!Array['isArray'](_0x22def6)&&_0x22def6[_0x37f297(0x237)][_0x37f297(0x23b)](_0x37f297(0x1fc))){if(_0x22def6['wsMarket'][_0x37f297(0x23b)]('spot')){updateNumberCoins(_0x22def6);return;}}}}),wsClient['on']('reconnected',async _0xfd15f2=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x332460){await handleError(_0x332460,_0x515c0b(0x221));}let _0x19fca5,_0x5a3dfc=0x0;loading['remainingSymbols']=[];let _0x54de15=0x0;currentCoins[_0x515c0b(0x261)](_0x3ade8a=>{const _0x42dbed=_0x515c0b;if(_0x3ade8a[_0x42dbed(0x28a)]!=config[_0x42dbed(0x2c3)])loading['remainingSymbols']['push'](_0x3ade8a[_0x42dbed(0x1ef)]);}),loadingCanceled=![];while(_0x19fca5!=currentCoins[_0x515c0b(0x27f)]-0x1){_0x19fca5=0x0,currentCoins[_0x515c0b(0x261)](_0x3e0e65=>{const _0x2a9f77=_0x515c0b;_0x3e0e65[_0x2a9f77(0x28a)]!=config[_0x2a9f77(0x2c3)]&&global[_0x2a9f77(0x1f0)][noslash(_0x3e0e65[_0x2a9f77(0x1ef)])]&&(loading[_0x2a9f77(0x1dc)]=loading[_0x2a9f77(0x1dc)][_0x2a9f77(0x288)](_0x14b78e=>_0x14b78e!=_0x3e0e65['symbol']),_0x19fca5++);}),loading[_0x515c0b(0x295)]=Math[_0x515c0b(0x21c)](_0x19fca5/(currentCoins[_0x515c0b(0x27f)]-0x1)*0x64);_0x54de15>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x515c0b(0x2e0)]=!![],emitLoadingProgress();break;}else _0x19fca5!=_0x5a3dfc&&(_0x5a3dfc=_0x19fca5,emitLoadingProgress()),_0x54de15++,await sleep(0xc8);}if(_0x19fca5==currentCoins[_0x515c0b(0x27f)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x55b08=_0xb132d5;proxyEmit(_0x55b08(0x2dc),loading);}async function getFiat(){const _0xdbc404=_0xb132d5;let _0x1577fb=0x0,_0x1543c5=0x0;try{_0x1577fb=global['ticker'][stablecoins[_0xdbc404(0x2a2)]['coin']],_0x1543c5=global['ticker'][stablecoins[_0xdbc404(0x246)][_0xdbc404(0x28a)]];}catch(_0x3fa728){await handleError(_0x3fa728,_0xdbc404(0x205));}return{'eur':Number(_0x1577fb),'usd':Number(_0x1543c5)};}async function setStartDatePerformance(_0x50054d){const _0x2d531e=_0xb132d5,_0x1fd06f=fns[_0x2d531e(0x29c)](new Date(_0x50054d[_0x2d531e(0x254)]),_0x2d531e(0x2a5));let _0x31bd1d=[];_0x31bd1d[stablecoins[_0x2d531e(0x2a2)]['coin']]=await getCloses(stablecoins['eur']['symbol'],new Date(_0x50054d[_0x2d531e(0x254)]),0x1),_0x31bd1d[stablecoins[_0x2d531e(0x246)]['coin']]=await getCloses(stablecoins[_0x2d531e(0x246)]['symbol'],new Date(_0x50054d[_0x2d531e(0x254)]),0x1);let _0x8a6d69,_0x275bdd=[];_0x50054d[_0x2d531e(0x1f7)][_0x2d531e(0x261)](_0x39731e=>{const _0x43f74e=_0x2d531e;!_0x39731e[_0x43f74e(0x24d)]&&_0x275bdd[_0x43f74e(0x282)]({'coin':_0x39731e[_0x43f74e(0x28a)],'number':_0x39731e[_0x43f74e(0x1de)],'price':_0x39731e[_0x43f74e(0x24f)]});}),_0x8a6d69={'date':_0x1fd06f,'eur':_0x31bd1d[stablecoins[_0x2d531e(0x2a2)]['coin']][0x0],'usd':_0x31bd1d[stablecoins[_0x2d531e(0x246)]['coin']][0x0],'coins':_0x275bdd};let _0xe695e4=dbPerformance[_0x2d531e(0x21d)](_0x2d531e(0x27b))[_0x2d531e(0x28f)]({'date':_0x1fd06f})['value']();_0xe695e4?dbPerformance[_0x2d531e(0x21d)](_0x2d531e(0x27b))[_0x2d531e(0x28f)]({'date':_0x1fd06f})['assign'](_0x8a6d69)[_0x2d531e(0x20f)]():dbPerformance[_0x2d531e(0x21d)](_0x2d531e(0x27b))[_0x2d531e(0x282)](_0x8a6d69)[_0x2d531e(0x20f)](),_0xe695e4=dbPerformance['get'](_0x2d531e(0x27b))[_0x2d531e(0x1ec)](_0x2d531e(0x2dd))[_0x2d531e(0x219)](),_0xe695e4[_0x2d531e(0x261)](_0x1f014e=>{const _0x1f9603=_0x2d531e;_0x1f014e[_0x1f9603(0x2dd)]<_0x1fd06f&&dbPerformance[_0x1f9603(0x21d)](_0x1f9603(0x27b))[_0x1f9603(0x24e)]({'date':_0x1f014e[_0x1f9603(0x2dd)]})[_0x1f9603(0x20f)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x6dc46a){const _0x594a5a=_0xb132d5;let _0xe1b3b5,_0x499bbd=[];logHistory(_0x594a5a(0x201),_0x594a5a(0x27c)),_0x6dc46a[_0x594a5a(0x1f7)][_0x594a5a(0x261)](_0x59a7ac=>{const _0x3ba082=_0x594a5a;if(_0x59a7ac[_0x3ba082(0x28a)]!=config[_0x3ba082(0x2c3)]&&!_0x59a7ac['excluded'])_0x499bbd['push']({'coin':_0x59a7ac[_0x3ba082(0x28a)],'symbol':_0x59a7ac['symbol']});});let _0x1c089f=[];try{const _0x53ee43=fns['format'](fns[_0x594a5a(0x253)](_0x6dc46a[_0x594a5a(0x254)][_0x594a5a(0x234)](/\//g,'-')),_0x594a5a(0x1fe));for(const _0x17996c of _0x499bbd){if(_0x17996c[_0x594a5a(0x28a)]!=config[_0x594a5a(0x2c3)])_0xe1b3b5=await exchange[_0x594a5a(0x29a)](_0x17996c[_0x594a5a(0x1ef)],Date[_0x594a5a(0x264)](_0x53ee43));_0xe1b3b5[_0x594a5a(0x261)](_0x4ff02e=>{const _0x40b241=_0x594a5a,_0x3be421=_0x17996c[_0x40b241(0x1ef)][_0x40b241(0x23b)](config[_0x40b241(0x2c3)]+'/'),_0x1452ea=fns[_0x40b241(0x29c)](fns[_0x40b241(0x253)](_0x4ff02e[_0x40b241(0x25d)]),_0x40b241(0x241)),_0x394a3d=fns[_0x40b241(0x29c)](fns['parseISO'](_0x4ff02e[_0x40b241(0x25d)]),_0x40b241(0x2a5));let _0x49763e;if(_0x4ff02e[_0x40b241(0x292)]==_0x40b241(0x252)&&_0x3be421==![])_0x49763e=_0x4ff02e[_0x40b241(0x211)];if(_0x4ff02e[_0x40b241(0x292)]==_0x40b241(0x252)&&_0x3be421==!![])_0x49763e=-_0x4ff02e['amount']*_0x4ff02e['price'];if(_0x4ff02e['side']==_0x40b241(0x2ce)&&_0x3be421==![])_0x49763e=-_0x4ff02e['amount'];if(_0x4ff02e[_0x40b241(0x292)]==_0x40b241(0x2ce)&&_0x3be421==!![])_0x49763e=_0x4ff02e[_0x40b241(0x211)]*_0x4ff02e['price'];_0x1c089f[_0x40b241(0x282)]({'timestamp':_0x1452ea,'date':_0x394a3d,'coin':_0x17996c[_0x40b241(0x28a)],'symbol':_0x17996c['symbol'],'type':_0x4ff02e[_0x40b241(0x1e9)],'side':_0x4ff02e['side'],'reverse':_0x3be421,'amount':formatResult(_0x4ff02e[_0x40b241(0x1eb)],0x8),'filled':formatResult(_0x4ff02e[_0x40b241(0x1eb)],0x8),'coinamount':formatResult(_0x49763e,0x8),'price':formatResult(_0x4ff02e[_0x40b241(0x29f)],0x8)});let _0xa31e95;if(_0x4ff02e['side']==_0x40b241(0x252)&&_0x3be421==![])_0xa31e95=-_0x4ff02e[_0x40b241(0x211)]*_0x4ff02e[_0x40b241(0x29f)];if(_0x4ff02e[_0x40b241(0x292)]=='buy'&&_0x3be421==!![])_0xa31e95=_0x4ff02e[_0x40b241(0x211)];if(_0x4ff02e[_0x40b241(0x292)]=='sell'&&_0x3be421==![])_0xa31e95=_0x4ff02e[_0x40b241(0x211)]*_0x4ff02e[_0x40b241(0x29f)];if(_0x4ff02e[_0x40b241(0x292)]=='sell'&&_0x3be421==!![])_0xa31e95=-_0x4ff02e[_0x40b241(0x211)];_0x1c089f[_0x40b241(0x282)]({'date':_0x394a3d,'coin':config['basecoin'],'coinamount':formatResult(_0xa31e95,0x8)});});}_0x1c089f[_0x594a5a(0x2a9)]((_0x2bd273,_0x3436ba)=>_0x2bd273[_0x594a5a(0x22f)]>_0x3436ba[_0x594a5a(0x22f)]?0x1:_0x3436ba[_0x594a5a(0x22f)]>_0x2bd273[_0x594a5a(0x22f)]?-0x1:0x0),dbLogs['get']('logs')[_0x594a5a(0x24e)]()[_0x594a5a(0x20f)](),_0x1c089f['forEach'](_0x187188=>{const _0x15ee26=_0x594a5a;let _0x252b21;_0x187188['coin']!=config[_0x15ee26(0x2c3)]&&(_0x252b21={'time':_0x187188['timestamp'],'type':_0x15ee26(0x1f4),'event':_0x15ee26(0x2a4)+_0x187188[_0x15ee26(0x1ef)]+'\x20'+_0x187188[_0x15ee26(0x292)]+'\x20#'+_0x187188['amount']+'\x20@'+_0x187188[_0x15ee26(0x29f)]},dbLogs[_0x15ee26(0x21d)]('logs')['push'](_0x252b21)[_0x15ee26(0x20f)]());});const _0x593755=fns[_0x594a5a(0x226)]({'start':new Date(_0x6dc46a[_0x594a5a(0x254)]),'end':new Date()})[_0x594a5a(0x2c5)](_0xb51fbc=>fns[_0x594a5a(0x29c)](_0xb51fbc,_0x594a5a(0x2a5)));let _0x565d8d=[];_0x6dc46a[_0x594a5a(0x1f7)][_0x594a5a(0x261)](_0x80f847=>{const _0x52c71d=_0x594a5a;if(!_0x80f847[_0x52c71d(0x24d)]){_0x565d8d[_0x80f847[_0x52c71d(0x28a)]]=[];let _0x236f1b=_0x80f847[_0x52c71d(0x1de)];_0x593755[_0x52c71d(0x261)]((_0xeee7a4,_0x2f49d4)=>{const _0x28cf32=_0x52c71d;let _0x795bb6=_0x1c089f[_0x28cf32(0x288)](_0x5ace5d=>_0x5ace5d[_0x28cf32(0x28a)]==_0x80f847[_0x28cf32(0x28a)]&&_0x5ace5d['date']==_0xeee7a4);if(_0x795bb6[_0x28cf32(0x27f)]!=0x0){let _0xc0040a=_0x795bb6[_0x28cf32(0x203)]((_0x550d8e,_0x33593a)=>{return _0x550d8e+=_0x33593a['coinamount'],_0x550d8e;},0x0);_0x236f1b+=_0xc0040a;}_0x565d8d[_0x80f847[_0x28cf32(0x28a)]][_0xeee7a4]=_0x236f1b;});}});const _0x498f38=[..._0x499bbd];_0x498f38['push']({'coin':stablecoins[_0x594a5a(0x2a2)][_0x594a5a(0x28a)],'symbol':stablecoins[_0x594a5a(0x2a2)][_0x594a5a(0x1ef)]}),_0x498f38[_0x594a5a(0x282)]({'coin':stablecoins[_0x594a5a(0x246)][_0x594a5a(0x28a)],'symbol':stablecoins[_0x594a5a(0x246)][_0x594a5a(0x1ef)]});let _0x32e62d=[];for(const _0x2447a0 of _0x498f38){_0x32e62d[_0x2447a0[_0x594a5a(0x28a)]]=await getCloses(_0x2447a0['symbol'],new Date(_0x6dc46a[_0x594a5a(0x254)]));}dbPerformance[_0x594a5a(0x21d)](_0x594a5a(0x27b))['remove']()[_0x594a5a(0x20f)](),_0x593755[_0x594a5a(0x261)]((_0x4d2f54,_0x48df4f)=>{const _0x37170b=_0x594a5a;let _0x482c74,_0xfbd37f=[];_0x48df4f==0x0?(_0x6dc46a['portfolio'][_0x37170b(0x261)](_0x3e34d5=>{const _0x3b7fc2=_0x37170b;!_0x3e34d5[_0x3b7fc2(0x24d)]&&_0xfbd37f[_0x3b7fc2(0x282)]({'coin':_0x3e34d5['coin'],'number':_0x3e34d5['startnumber'],'price':_0x3e34d5[_0x3b7fc2(0x24f)]});}),_0x482c74={'date':_0x4d2f54,'eur':_0x32e62d[stablecoins[_0x37170b(0x2a2)]['coin']][_0x48df4f],'usd':_0x32e62d[stablecoins[_0x37170b(0x246)][_0x37170b(0x28a)]][_0x48df4f],'coins':_0xfbd37f}):(_0x6dc46a[_0x37170b(0x1f7)][_0x37170b(0x261)](_0x2a3a29=>{const _0x4c74a5=_0x37170b;!_0x2a3a29[_0x4c74a5(0x24d)]&&_0xfbd37f['push']({'coin':_0x2a3a29[_0x4c74a5(0x28a)],'number':_0x565d8d[_0x2a3a29['coin']][_0x4d2f54],'price':_0x2a3a29['coin']==config[_0x4c74a5(0x2c3)]?0x1:_0x32e62d[_0x2a3a29[_0x4c74a5(0x28a)]][_0x48df4f]});}),_0x482c74={'date':_0x4d2f54,'eur':_0x32e62d[stablecoins[_0x37170b(0x2a2)]['coin']][_0x48df4f],'usd':_0x32e62d[stablecoins[_0x37170b(0x246)][_0x37170b(0x28a)]][_0x48df4f],'coins':_0xfbd37f}),dbPerformance[_0x37170b(0x21d)](_0x37170b(0x27b))[_0x37170b(0x282)](_0x482c74)[_0x37170b(0x20f)]();}),emitPerformance(),await resetCoinResults();for(let _0x4480d8 of _0x1c089f){_0x4480d8[_0x594a5a(0x28a)]!=config[_0x594a5a(0x2c3)]&&await updateCoinResults(_0x4480d8);}logHistory(_0x594a5a(0x201),_0x594a5a(0x284));}catch(_0x5f3d4a){await handleError(_0x5f3d4a,_0x594a5a(0x236));}}async function getCloses(_0x4b0d2e,_0x8695ec,_0x4a8b32=undefined){const _0x1c9db5=_0xb132d5,_0x33c4d0='1d';let _0x50e551,_0x399c25;const _0x5a1ff7=fns[_0x1c9db5(0x2bd)](new Date(),_0x8695ec)+0x1;try{const _0xf74bdb=exchange[_0x1c9db5(0x28c)]()-_0x5a1ff7*0x18*0xe10*0x3e8;_0x50e551=await exchange['fetchOHLCV'](_0x4b0d2e,_0x33c4d0,_0xf74bdb,_0x4a8b32),_0x399c25=await exchange[_0x1c9db5(0x1fa)](_0x4b0d2e);}catch(_0x2cbe96){await handleError(_0x2cbe96,_0x1c9db5(0x2ca));}let _0x1bbed8=ohlcvToCloses(_0x50e551);return _0x1bbed8[_0x1c9db5(0x282)](_0x399c25[_0x4b0d2e][_0x1c9db5(0x299)]),_0x1bbed8;}function ohlcvToCloses(_0x4adf4e){const _0x433ca2=_0xb132d5;let _0x55d42f=[];return _0x4adf4e[_0x433ca2(0x261)](function(_0x39857b){const _0x8e7c6c=_0x433ca2;_0x55d42f[_0x8e7c6c(0x282)](_0x39857b[0x4]);}),_0x55d42f;}function getConfiguration(_0x973e7d){const _0x55c371=_0xb132d5;let _0x306f50=dbConfig[_0x55c371(0x21d)]('bot')[_0x55c371(0x28f)]({'botID':_0x973e7d})[_0x55c371(0x219)]();if(_0x306f50){let _0x49b407=![];!_0x306f50[_0x55c371(0x2b5)]&&(_0x306f50={..._0x306f50,'exchange':'binance'},_0x49b407=!![]),!_0x306f50[_0x55c371(0x2c3)]&&(_0x306f50={..._0x306f50,'basecoin':'BTC'},_0x49b407=!![]),!_0x306f50[_0x55c371(0x23c)]&&(_0x306f50={..._0x306f50,'ordertype':_0x55c371(0x2cb)},_0x49b407=!![]),!_0x306f50[_0x55c371(0x20d)]&&(_0x306f50={..._0x306f50,'timeout':0x14},_0x49b407=!![]),!_0x306f50[_0x55c371(0x200)]&&(_0x306f50={..._0x306f50,'emojibuy':''},_0x49b407=!![]),!_0x306f50[_0x55c371(0x279)]&&(_0x306f50={..._0x306f50,'emojisell':''},_0x49b407=!![]),!_0x306f50[_0x55c371(0x256)]&&(_0x306f50={..._0x306f50,'showname':![]},_0x49b407=!![]),_0x49b407&&(_0x306f50={'botID':_0x306f50[_0x55c371(0x293)],'exchange':_0x306f50[_0x55c371(0x2b5)],'apiKey':_0x306f50['apiKey'],'apiSecret':_0x306f50['apiSecret'],'basecoin':_0x306f50[_0x55c371(0x2c3)],'botname':_0x306f50[_0x55c371(0x20c)],'showname':_0x306f50[_0x55c371(0x256)],'threshold':_0x306f50[_0x55c371(0x233)],'ordertype':_0x306f50[_0x55c371(0x23c)],'timeout':_0x306f50['timeout'],'startdate':_0x306f50[_0x55c371(0x254)],'recreate':_0x306f50[_0x55c371(0x23f)],'timeshift':_0x306f50[_0x55c371(0x1e0)],'headless':_0x306f50[_0x55c371(0x2be)],'cooldown':_0x306f50['cooldown'],'emojibuy':_0x306f50[_0x55c371(0x200)],'emojisell':_0x306f50['emojisell'],'portfolio':_0x306f50[_0x55c371(0x1f7)]},dbConfig[_0x55c371(0x21d)](_0x55c371(0x26a))[_0x55c371(0x24e)]()[_0x55c371(0x20f)](),dbConfig[_0x55c371(0x21d)](_0x55c371(0x26a))[_0x55c371(0x282)](_0x306f50)[_0x55c371(0x20f)]());}else _0x306f50={'botID':_0x973e7d,'exchange':_0x55c371(0x255),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x55c371(0x2e4)+_0x973e7d,'showname':![],'threshold':'3','ordertype':_0x55c371(0x2cb),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x55c371(0x1e0)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x306f50;}function emittedConfiguration(){const _0x38c42d=_0xb132d5;let _0x88d34e;return config[_0x38c42d(0x1d2)]==''?_0x88d34e=config:_0x88d34e={...config,'apiKey':'************','apiSecret':_0x38c42d(0x1e2)},_0x88d34e;}function getSettings(){const _0x47402c=_0xb132d5;return dbSettings[_0x47402c(0x21d)](_0x47402c(0x2d7))[_0x47402c(0x219)]();}function getSecure(){const _0x43190b=_0xb132d5;return dbSecure[_0x43190b(0x21d)]('secure')[_0x43190b(0x219)]()||{};}function updateTimeshift(_0xed477e){const _0x1a97ea=_0xb132d5;let _0x25a0ec=dbConfig[_0x1a97ea(0x21d)]('bot')[_0x1a97ea(0x28f)]({'botID':botID})[_0x1a97ea(0x219)]();_0x25a0ec&&dbConfig['get'](_0x1a97ea(0x26a))['find']({'botID':botID})['assign']({'timeshift':_0xed477e})['write'](),config['timeshift']=_0xed477e,proxyEmit(_0x1a97ea(0x2d4),emittedConfiguration());}async function storeConfiguration(_0x230eac){const _0x11af3a=_0xb132d5;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3a3179=dbConfig[_0x11af3a(0x21d)](_0x11af3a(0x26a))['find']({'botID':botID})['value']();_0x230eac={..._0x230eac,'apiKey':crypt[_0x11af3a(0x1d8)](secure['privateKey'],_0x230eac[_0x11af3a(0x1d2)])[_0x11af3a(0x21b)],'apiSecret':crypt['decrypt'](secure[_0x11af3a(0x283)],_0x230eac[_0x11af3a(0x270)])[_0x11af3a(0x21b)]};if(_0x3a3179){if(_0x230eac['apiKey']==_0x11af3a(0x1e2))_0x230eac['apiKey']=config[_0x11af3a(0x1d2)];if(_0x230eac[_0x11af3a(0x270)]==_0x11af3a(0x1e2))_0x230eac[_0x11af3a(0x270)]=config[_0x11af3a(0x270)];dbConfig[_0x11af3a(0x21d)](_0x11af3a(0x26a))[_0x11af3a(0x28f)]({'botID':botID})[_0x11af3a(0x29b)](_0x230eac)['write']();}else dbConfig['get'](_0x11af3a(0x26a))[_0x11af3a(0x282)](_0x230eac)[_0x11af3a(0x20f)](),process[_0x11af3a(0x26f)]({'status':_0x11af3a(0x2b2),'live':_0x11af3a(0x1f6)},_0xb64fcd=>{});config={..._0x230eac};if(config[_0x11af3a(0x23f)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x11af3a(0x26f)]({'botname':_0x230eac['botname']},_0x536261=>{}),proxyEmit(_0x11af3a(0x238)),reset();}async function storeHeadless(_0x5a3c2d){const _0x10fd75=_0xb132d5,_0x3381f7={...config,'headless':_0x5a3c2d['headless']};let _0x378976=dbConfig['get'](_0x10fd75(0x26a))[_0x10fd75(0x28f)]({'botID':botID})['value']();_0x378976&&dbConfig[_0x10fd75(0x21d)]('bot')[_0x10fd75(0x28f)]({'botID':botID})[_0x10fd75(0x29b)](_0x3381f7)[_0x10fd75(0x20f)](),config={..._0x3381f7},proxyEmit(_0x10fd75(0x2d4),emittedConfiguration());}function noslash(_0x328ac1){const _0x305b4e=_0xb132d5;return _0x328ac1[_0x305b4e(0x234)]('/','');}function updateNumberCoins(_0x5449e8){const _0x3072fa=_0xb132d5;_0x5449e8[_0x3072fa(0x277)]&&_0x5449e8[_0x3072fa(0x277)]==_0x3072fa(0x287)&&_0x5449e8[_0x3072fa(0x2d0)][_0x3072fa(0x261)](_0x1230d7=>{const _0x1dae15=_0x3072fa;let _0x542482=currentCoins[_0x1dae15(0x28f)](_0x426084=>_0x426084[_0x1dae15(0x28a)]==_0x1230d7[_0x1dae15(0x258)]),_0x765417=config[_0x1dae15(0x1f7)][_0x1dae15(0x28f)](_0x29d89e=>_0x29d89e['coin']==_0x1230d7[_0x1dae15(0x258)]);if(_0x542482&&_0x765417)_0x542482[_0x1dae15(0x2d3)]=Math[_0x1dae15(0x2c7)](Number(_0x1230d7[_0x1dae15(0x280)])+(_0x765417[_0x1dae15(0x1e8)]||0x0),0x0);});if(_0x5449e8['eventType']&&_0x5449e8[_0x3072fa(0x277)]==_0x3072fa(0x2cd)){if(_0x5449e8[_0x3072fa(0x1f3)]==_0x3072fa(0x2ad)&&_0x5449e8['orderStatus']==_0x3072fa(0x1f1)){if(lastOrders)lastOrders[_0x3072fa(0x261)](_0x3a0c46=>{const _0x3ee366=_0x3072fa;if(_0x3a0c46[_0x3ee366(0x2e5)]==_0x5449e8['orderId']){if(_0x3a0c46[_0x3ee366(0x2d5)])_0x3a0c46[_0x3ee366(0x1eb)]=_0x5449e8[_0x3ee366(0x217)]*_0x3a0c46['price'];else _0x3a0c46[_0x3ee366(0x1eb)]=_0x5449e8['accumulatedQuantity'];}});}}}function _0x4941(_0x4f861c,_0x3dbd09){const _0xf6bb8d=_0x4ba0();return _0x4941=function(_0x126aec,_0x28fd93){_0x126aec=_0x126aec-0x1d0;let _0x4ba07a=_0xf6bb8d[_0x126aec];return _0x4ba07a;},_0x4941(_0x4f861c,_0x3dbd09);}async function getCoins(_0x5578e2=!![],_0x348a42=config[_0xb132d5(0x2c3)]){const _0x517d0d=_0xb132d5;let _0x3ec0ab,_0x48b74b=[],_0x34b7dc=[],_0x334a29=[];try{_0x3ec0ab=await exchange[_0x517d0d(0x2a8)](),mybalances=_0x3ec0ab[_0x517d0d(0x2a0)];if(!_0x5578e2)for(const [_0x1198c7,_0x37fa47]of Object['entries'](mybalances)){_0x334a29[_0x517d0d(0x282)](_0x1198c7);}else config['portfolio'][_0x517d0d(0x261)](_0x4a74bf=>{const _0x5d2ac4=_0x517d0d;if(!_0x4a74bf[_0x5d2ac4(0x24d)])_0x334a29[_0x5d2ac4(0x282)](_0x4a74bf[_0x5d2ac4(0x28a)]);});if(_0x348a42=='')for(const [_0x1e6139,_0x4af5f7]of Object[_0x517d0d(0x26c)](mybalances)){_0x4af5f7[_0x517d0d(0x25a)]()!=0x0&&_0x34b7dc[_0x517d0d(0x282)]({'coin':_0x1e6139});}else for(const [_0x4ca51c,_0x2c1519]of Object['entries'](mybalances)){if(_0x334a29[_0x517d0d(0x23b)](_0x4ca51c)){const _0x4b873f=config['portfolio']['find'](_0x3db728=>_0x3db728[_0x517d0d(0x28a)]==_0x4ca51c);if((_0x2c1519[_0x517d0d(0x25a)]()!=0x0||_0x4b873f)&&(allSymbols[_0x517d0d(0x23b)](_0x4ca51c+'/'+_0x348a42)||_0x4ca51c==_0x348a42))_0x34b7dc['push']({'coin':_0x4ca51c,'symbol':_0x4ca51c+'/'+_0x348a42,'reverse':![],'number':Math[_0x517d0d(0x2c7)](_0x2c1519+(_0x4b873f&&_0x4b873f[_0x517d0d(0x1e8)]||0x0),0x0)}),_0x4ca51c!=_0x348a42&&_0x48b74b['push'](_0x4ca51c+'/'+_0x348a42);else(_0x2c1519[_0x517d0d(0x25a)]()!=0x0||_0x4b873f)&&allSymbols[_0x517d0d(0x23b)](_0x348a42+'/'+_0x4ca51c)&&(_0x34b7dc[_0x517d0d(0x282)]({'coin':_0x4ca51c,'symbol':_0x348a42+'/'+_0x4ca51c,'reverse':!![],'number':Math[_0x517d0d(0x2c7)](_0x2c1519+(_0x4b873f&&_0x4b873f[_0x517d0d(0x1e8)]||0x0),0x0)}),_0x4ca51c!=_0x348a42&&_0x48b74b[_0x517d0d(0x282)](_0x348a42+'/'+_0x4ca51c));}}}catch(_0x422688){if(!_0x5578e2){if(_0x422688[_0x517d0d(0x25a)]()[_0x517d0d(0x23b)](_0x517d0d(0x213)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x422688[_0x517d0d(0x25a)]()[_0x517d0d(0x23b)]('AuthenticationError'))return logHistory('error',_0x517d0d(0x2a1)),![];else{if(_0x422688[_0x517d0d(0x25a)]()['includes'](_0x517d0d(0x23d)))return logHistory('error',_0x517d0d(0x26e)),![];else await handleError(_0x422688,_0x517d0d(0x20b));}}}else await handleError(_0x422688,'getCoins()');}return _0x34b7dc;}async function getPortfolio(_0xc1c79f){const _0x5d3cb7=_0xb132d5;let _0x15f929=[],_0x56181b=[],_0x557d85,_0x140f4b=[],_0x36533f,_0x5ac306;_0xc1c79f[_0x5d3cb7(0x1d2)]===_0x5d3cb7(0x1e2)||_0xc1c79f[_0x5d3cb7(0x270)]==='************'?(_0x36533f=config['apiKey'],_0x5ac306=config[_0x5d3cb7(0x270)]):(_0x36533f=_0xc1c79f[_0x5d3cb7(0x1d2)],_0x5ac306=_0xc1c79f[_0x5d3cb7(0x270)]);await initExchange(_0x36533f,_0x5ac306);let _0x48fce1=await loadSymbols();if(_0x48fce1){_0x140f4b=await getCoins(![],_0xc1c79f['basecoin']);if(_0x140f4b===![])proxyEmit(_0x5d3cb7(0x1f7),![]);else{if(_0xc1c79f[_0x5d3cb7(0x2c3)]=='')proxyEmit(_0x5d3cb7(0x1f7),_0x140f4b);else{_0x140f4b[_0x5d3cb7(0x261)](_0xf6f86b=>{const _0xd0eab6=_0x5d3cb7;_0x15f929[_0xd0eab6(0x282)](_0xf6f86b['symbol']);});try{_0x56181b=await exchange['fetchTickers'](_0x15f929);}catch(_0x301f65){await handleError(_0x301f65,_0x5d3cb7(0x262));}_0x140f4b[_0x5d3cb7(0x261)](_0x5eb87c=>{const _0xb2a72e=_0x5d3cb7;_0x5eb87c[_0xb2a72e(0x28a)]!=_0xc1c79f['basecoin']?_0x557d85=_0x5eb87c[_0xb2a72e(0x2d5)]?0x1/_0x56181b[_0x5eb87c[_0xb2a72e(0x1ef)]][_0xb2a72e(0x299)]:_0x56181b[_0x5eb87c[_0xb2a72e(0x1ef)]][_0xb2a72e(0x299)]:_0x557d85=0x1,_0x5eb87c[_0xb2a72e(0x29f)]=formatResult(_0x557d85,0x8);}),proxyEmit('portfolio',_0x140f4b);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0xa600e0){const _0x4aa71e=_0xb132d5;let _0x520da1=!![];const _0x2ebb65=!_0xa600e0[_0x4aa71e(0x2d5)]?markets[_0xa600e0['symbol']][_0x4aa71e(0x21a)][_0x4aa71e(0x211)]['min']:markets[_0xa600e0[_0x4aa71e(0x1ef)]][_0x4aa71e(0x21a)]['cost']['min'],_0x7e6673=!_0xa600e0['reverse']?markets[_0xa600e0[_0x4aa71e(0x1ef)]]['limits'][_0x4aa71e(0x2a7)][_0x4aa71e(0x24c)]:markets[_0xa600e0[_0x4aa71e(0x1ef)]][_0x4aa71e(0x21a)][_0x4aa71e(0x211)][_0x4aa71e(0x24c)];if(Math[_0x4aa71e(0x2b7)](_0xa600e0[_0x4aa71e(0x232)])<_0x2ebb65)_0x520da1=![];if(Math[_0x4aa71e(0x2b7)](_0xa600e0[_0x4aa71e(0x232)])*_0xa600e0[_0x4aa71e(0x299)]<_0x7e6673)_0x520da1=![];let _0x17cb3c=config[_0x4aa71e(0x1f7)][_0x4aa71e(0x28f)](_0x155d66=>_0x155d66[_0x4aa71e(0x28a)]==_0xa600e0['coin']);if(Math[_0x4aa71e(0x2b7)](_0xa600e0[_0x4aa71e(0x232)])>_0xa600e0[_0x4aa71e(0x2d3)]-_0x17cb3c[_0x4aa71e(0x1e8)])_0x520da1=![];return _0x520da1;}async function getBalances(){const _0x2cfe4e=_0xb132d5;let _0x11b0bb=0x0,_0x1a1462;const _0x40d887=config['threshold'];currentCoins[_0x2cfe4e(0x261)](_0x27cd12=>{const _0x261475=_0x2cfe4e;if(_0x27cd12['coin']!=config['basecoin']){let _0x2ca086=global[_0x261475(0x1f0)][noslash(_0x27cd12['symbol'])];_0x1a1462=_0x27cd12[_0x261475(0x2d5)]?0x1/_0x2ca086:_0x2ca086;}else _0x1a1462=0x1;let _0x2e07d2=_0x27cd12[_0x261475(0x2d3)]*_0x1a1462;_0x11b0bb+=_0x2e07d2,_0x27cd12[_0x261475(0x299)]=formatResult(Number(_0x1a1462),0x8),_0x27cd12[_0x261475(0x219)]=_0x2e07d2;}),currentCoins['forEach'](_0x3c9b55=>{const _0x9d786c=_0x2cfe4e;let _0x41e0ac=config[_0x9d786c(0x1f7)][_0x9d786c(0x28f)](_0x15083e=>_0x15083e[_0x9d786c(0x28a)]==_0x3c9b55['coin']),_0x14e017=Number(_0x41e0ac['distribution']),_0x32f083=_0x3c9b55['value']/_0x11b0bb*0x64,_0x138035=_0x14e017*_0x11b0bb/0x64/_0x3c9b55[_0x9d786c(0x299)]-_0x3c9b55['number'];_0x3c9b55['distribution']=formatResult(_0x32f083,0x3),_0x3c9b55['target']=formatResult(_0x14e017,0x3),_0x3c9b55[_0x9d786c(0x232)]=formatResult(_0x138035,0x8),_0x3c9b55[_0x9d786c(0x292)]='',_0x3c9b55['valid']='';if(_0x3c9b55['coin']!=config[_0x9d786c(0x2c3)]){if(_0x3c9b55[_0x9d786c(0x207)]>_0x14e017)_0x3c9b55[_0x9d786c(0x292)]=_0x9d786c(0x2ce),_0x3c9b55[_0x9d786c(0x235)]=checkMinimums(_0x3c9b55);else _0x3c9b55[_0x9d786c(0x207)]<_0x14e017&&(_0x3c9b55[_0x9d786c(0x292)]='buy',_0x3c9b55['valid']=checkMinimums(_0x3c9b55));}_0x3c9b55[_0x9d786c(0x2a6)]=_0x3c9b55['distribution']/_0x3c9b55[_0x9d786c(0x2cf)]-0x1;}),currentCoins['sort']((_0x1b9a93,_0x5ee860)=>_0x1b9a93[_0x2cfe4e(0x2a6)]<_0x5ee860[_0x2cfe4e(0x2a6)]?0x1:_0x5ee860['delta']<_0x1b9a93[_0x2cfe4e(0x2a6)]?-0x1:0x0);const _0x470a25=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x470a25[_0x2cfe4e(0x2a2)],'usd':_0x470a25[_0x2cfe4e(0x246)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x40d887},proxyEmit(_0x2cfe4e(0x2d0),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x40d887});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x776817=_0xb132d5;if(!lastBalances)return;let _0x3edf4b=await getStartingBalances(![]),_0x1e0b73=[],_0x511e99;JSON[_0x776817(0x264)](lastBalances[_0x776817(0x1f7)])[_0x776817(0x261)](_0x1a5a75=>{const _0x31c7fe=_0x776817;let _0x1523fa={'coin':_0x1a5a75[_0x31c7fe(0x28a)],'number':_0x1a5a75[_0x31c7fe(0x2d3)],'price':_0x1a5a75[_0x31c7fe(0x299)]};_0x1e0b73[_0x31c7fe(0x282)](_0x1523fa);});const _0x449c5d=await getFiat();_0x511e99={'date':lastBalances[_0x776817(0x247)][_0x776817(0x2a3)]('\x20')[0x0],'eur':_0x449c5d[_0x776817(0x2a2)],'usd':_0x449c5d[_0x776817(0x246)],'coins':_0x1e0b73};let _0x2a395e=dbPerformance['get'](_0x776817(0x27b))[_0x776817(0x28f)]({'date':_0x511e99['date']})['value']();_0x2a395e?dbPerformance[_0x776817(0x21d)](_0x776817(0x27b))[_0x776817(0x28f)]({'date':_0x511e99[_0x776817(0x2dd)]})[_0x776817(0x29b)](_0x511e99)[_0x776817(0x20f)]():dbPerformance[_0x776817(0x21d)](_0x776817(0x27b))[_0x776817(0x282)](_0x511e99)[_0x776817(0x20f)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x10d172=_0xb132d5;if(dbPerformance[_0x10d172(0x25c)](_0x10d172(0x27b))[_0x10d172(0x219)]()){let _0x39b5d3=dbPerformance[_0x10d172(0x21d)](_0x10d172(0x27b))[_0x10d172(0x1ec)]('date')[_0x10d172(0x219)]();proxyEmit(_0x10d172(0x29e),_0x39b5d3),lastPerformanceEmitted=getDate();}else proxyEmit(_0x10d172(0x29e),[]);}async function getStartingBalances(_0x4b07a7=!![]){const _0x47f72=_0xb132d5;let _0xe6c778=dbPerformance[_0x47f72(0x21d)]('data')[_0x47f72(0x28f)]({'date':config[_0x47f72(0x254)]})[_0x47f72(0x219)]();config['apiKey']!=''&&!_0xe6c778&&(await setStartDatePerformance(config),_0xe6c778=dbPerformance['get'](_0x47f72(0x27b))['find']({'date':config['startdate']})[_0x47f72(0x219)]());if(config['apiKey']==''||!_0xe6c778)return{};let _0x4aa455=0x0,_0x19a13d=0x0,_0x5a5a31=0x0,_0x4206e6=[],_0x256054=0x0;config[_0x47f72(0x1f7)][_0x47f72(0x261)](_0x51eab0=>{const _0x4c710e=_0x47f72;if(!_0x51eab0[_0x4c710e(0x24d)]){_0x4206e6[_0x256054]={'coin':_0x51eab0[_0x4c710e(0x28a)],'symbol':_0x51eab0['symbol'],'number':_0x51eab0['startnumber'],'price':_0x51eab0['startprice']},_0x4aa455+=_0x51eab0[_0x4c710e(0x24f)]*_0x51eab0[_0x4c710e(0x1de)];if(config['basecoin']==_0x4c710e(0x1ea))_0x19a13d+=_0x51eab0[_0x4c710e(0x24f)]*_0x51eab0[_0x4c710e(0x1de)]*_0xe6c778[_0x4c710e(0x2a2)],_0x5a5a31+=_0x51eab0['startprice']*_0x51eab0['startnumber']*_0xe6c778[_0x4c710e(0x246)];else{if(config[_0x4c710e(0x2c3)]==_0x4c710e(0x2ac)||config['basecoin']==_0x4c710e(0x2c1)||config[_0x4c710e(0x2c3)]==_0x4c710e(0x291))_0x19a13d+=_0x51eab0['startprice']*_0x51eab0['startnumber']*_0xe6c778[_0x4c710e(0x2a2)]/_0xe6c778[_0x4c710e(0x246)],_0x5a5a31+=_0x51eab0[_0x4c710e(0x24f)]*_0x51eab0['startnumber'];else config['basecoin']==_0x4c710e(0x22c)&&(_0x19a13d+=_0x51eab0[_0x4c710e(0x24f)]*_0x51eab0[_0x4c710e(0x1de)],_0x5a5a31+=_0x51eab0[_0x4c710e(0x24f)]*_0x51eab0[_0x4c710e(0x1de)]*_0xe6c778[_0x4c710e(0x246)]/_0xe6c778[_0x4c710e(0x2a2)]);}_0x256054++;}});let _0x393e7e={'basecoin':_0x4aa455,'eur':_0x19a13d,'usd':_0x5a5a31,'coins':_0x4206e6};if(_0x4b07a7)proxyEmit(_0x47f72(0x1fb),_0x393e7e);return _0x393e7e;}function headlessMode(_0x5d5107){const _0x1e7414=_0xb132d5;let _0x5b7042=_0x5d5107[_0x1e7414(0x1f7)],_0x2a4922=_0x5d5107['threshold'],_0x44276e=[];for(let _0x57b25b of _0x5b7042){if(_0x57b25b[_0x1e7414(0x28a)]!=config[_0x1e7414(0x2c3)]){if(_0x57b25b[_0x1e7414(0x207)]/_0x57b25b[_0x1e7414(0x2cf)]-0x1>=_0x2a4922/0x64){if(_0x57b25b[_0x1e7414(0x235)])_0x44276e[_0x1e7414(0x282)](_0x57b25b);}else{if(_0x57b25b['distribution']/_0x57b25b[_0x1e7414(0x2cf)]-0x1<=-_0x2a4922/0x64){if(_0x57b25b[_0x1e7414(0x235)])_0x44276e[_0x1e7414(0x282)](_0x57b25b);}}}}_0x44276e[_0x1e7414(0x27f)]>0x0&&placeOrder(_0x44276e);}function symbolToCoin(_0x4cf81c){const _0x482216=_0xb132d5;let _0x454bab;if(_0x4cf81c['includes']('/'+config[_0x482216(0x2c3)]))_0x454bab=_0x4cf81c['replace']('/'+config['basecoin'],'');if(_0x4cf81c[_0x482216(0x23b)](config[_0x482216(0x2c3)]+'/'))_0x454bab=_0x4cf81c[_0x482216(0x234)](config[_0x482216(0x2c3)]+'/','');return _0x454bab;}async function validateOrders(_0x29ef15=0x0){const _0x4fc11b=_0xb132d5;let _0x324e59=[],_0x37676d=config[_0x4fc11b(0x23c)]==_0x4fc11b(0x2cb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x4fc11b(0x261)](_0x2eeeef=>{const _0x5507c5=_0x4fc11b;let _0x1e69be=previousCoins[_0x5507c5(0x28f)](_0x4369aa=>_0x4369aa[_0x5507c5(0x28a)]==symbolToCoin(_0x2eeeef[_0x5507c5(0x1ef)])),_0x217902=currentCoins[_0x5507c5(0x28f)](_0x482daf=>_0x482daf['coin']==symbolToCoin(_0x2eeeef['symbol'])),_0x57e44a,_0x1f75e1;_0x2eeeef[_0x5507c5(0x292)]==_0x5507c5(0x252)&&!_0x2eeeef[_0x5507c5(0x2d5)]||_0x2eeeef['side']==_0x5507c5(0x2ce)&&_0x2eeeef[_0x5507c5(0x2d5)]?(_0x57e44a=_0x1e69be[_0x5507c5(0x2d3)]+0.9*_0x2eeeef['filled'],_0x1f75e1=_0x1e69be['number']+1.1*_0x2eeeef['filled']):(_0x57e44a=_0x1e69be['number']-1.1*_0x2eeeef[_0x5507c5(0x1eb)],_0x1f75e1=_0x1e69be[_0x5507c5(0x2d3)]-0.9*_0x2eeeef[_0x5507c5(0x1eb)]);const _0x72e83b=_0x2eeeef['filled']!=0x0&&_0x217902['number']>=_0x57e44a&&_0x217902['number']<=_0x1f75e1;_0x324e59[_0x5507c5(0x282)](_0x72e83b);if(_0x72e83b&&config['ordertype']!=_0x5507c5(0x2cb)){if(_0x2eeeef[_0x5507c5(0x2d5)])logHistory('order','Order\x20filled:\x20'+_0x2eeeef[_0x5507c5(0x1ef)]+'\x20'+_0x2eeeef['side']+'\x20#'+formatResult(_0x2eeeef[_0x5507c5(0x1eb)]/_0x2eeeef[_0x5507c5(0x29f)],0x8)+'\x20@'+formatResult(_0x2eeeef[_0x5507c5(0x29f)],0x8));else logHistory('order','Order\x20filled:\x20'+_0x2eeeef[_0x5507c5(0x1ef)]+'\x20'+_0x2eeeef[_0x5507c5(0x292)]+'\x20#'+formatResult(_0x2eeeef[_0x5507c5(0x1eb)],0x8)+'\x20@'+formatResult(_0x2eeeef[_0x5507c5(0x29f)],0x8));}}),_0x324e59[_0x4fc11b(0x261)]((_0x304237,_0x44193b)=>{const _0xaf363b=_0x4fc11b;if(_0x304237)lastOrders[_0xaf363b(0x204)](_0x44193b,0x1);});if(_0x29ef15<_0x37676d&&_0x324e59['includes'](![])){if(_0x29ef15==0x0){config[_0x4fc11b(0x23c)]==_0x4fc11b(0x2cb)?logHistory(_0x4fc11b(0x260),_0x4fc11b(0x1e6)):logHistory(_0x4fc11b(0x260),_0x4fc11b(0x24b));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x29ef15);},0xa*0x3e8);}else{(_0x29ef15==0x1||_0x29ef15==Math[_0x4fc11b(0x21c)](_0x37676d/0x2)||_0x29ef15==_0x37676d-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x29ef15);},validateOrderInterval);}}else{lockOrders=![];if(_0x29ef15>0x0&&!_0x324e59[_0x4fc11b(0x23b)](![]))config[_0x4fc11b(0x23c)]=='market'?logHistory(_0x4fc11b(0x201),_0x4fc11b(0x212)):logHistory(_0x4fc11b(0x201),_0x4fc11b(0x220));else _0x29ef15>0x0&&_0x324e59[_0x4fc11b(0x23b)](![])&&(config['ordertype']=='market'?logHistory(_0x4fc11b(0x201),_0x4fc11b(0x2c2)+Math[_0x4fc11b(0x21c)](_0x37676d*validateOrderInterval/0xea60)+_0x4fc11b(0x240)):(lastOrders[_0x4fc11b(0x261)](async _0x45ebcd=>{const _0x21a6a9=_0x4fc11b;try{const _0x3d3723=await exchange['cancelOrder'](_0x45ebcd[_0x21a6a9(0x2e5)],_0x45ebcd[_0x21a6a9(0x1ef)]);}catch(_0x5a968b){if(_0x5a968b['toString']()[_0x21a6a9(0x23b)]('OrderNotFound')){}else await handleError(_0x5a968b,_0x21a6a9(0x1ed));}}),logHistory(_0x4fc11b(0x201),_0x4fc11b(0x2bc)+Math['round'](_0x37676d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x1b5701=_0xb132d5;dbCoinResults[_0x1b5701(0x21d)](_0x1b5701(0x250))[_0x1b5701(0x24e)]()[_0x1b5701(0x20f)]();let _0x58a658=await getStartingBalances(![]);_0x58a658[_0x1b5701(0x250)][_0x1b5701(0x261)](_0x26f455=>{const _0x18008a=_0x1b5701,_0x44987b=_0x26f455[_0x18008a(0x1ef)][_0x18008a(0x23b)](config['basecoin']+'/');if(_0x26f455[_0x18008a(0x28a)]!=config[_0x18008a(0x2c3)]){let _0x5491cc={'coin':_0x26f455[_0x18008a(0x28a)],'number':_0x26f455[_0x18008a(0x2d3)],'breakeven':_0x26f455['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x18008a(0x21d)](_0x18008a(0x250))[_0x18008a(0x282)](_0x5491cc)[_0x18008a(0x20f)]();}});}async function updateCoinResults(_0x21d836){const _0x1519eb=_0xb132d5;let _0x2b8769,_0x46e9ca,_0x9812bb,_0x2cfe70,_0x106149,_0x338bbd,_0x5e69ed=dbCoinResults[_0x1519eb(0x21d)]('coins')[_0x1519eb(0x28f)]({'coin':_0x21d836[_0x1519eb(0x28a)]})['value']();if(!_0x5e69ed)return;if(_0x21d836[_0x1519eb(0x2b1)]&&_0x21d836[_0x1519eb(0x2b1)][_0x1519eb(0x230)]==config[_0x1519eb(0x2c3)])_0x2b8769=_0x21d836[_0x1519eb(0x2b1)]['cost'];else{if(_0x21d836['fee']&&_0x21d836['fee'][_0x1519eb(0x230)]==_0x1519eb(0x2ae))_0x2b8769=_0x21d836[_0x1519eb(0x2b1)][_0x1519eb(0x2a7)]*global[_0x1519eb(0x1f0)]['BNB'+config[_0x1519eb(0x2c3)]];else _0x2b8769=0.001*_0x21d836['filled'];}const _0x579df0=_0x21d836['symbol'][_0x1519eb(0x23b)](config[_0x1519eb(0x2c3)]+'/');_0x579df0&&(_0x338bbd={'coin':_0x21d836[_0x1519eb(0x28a)],'symbol':_0x21d836[_0x1519eb(0x1ef)],'filled':_0x21d836[_0x1519eb(0x1eb)]*_0x21d836[_0x1519eb(0x29f)],'side':_0x21d836[_0x1519eb(0x292)]=='sell'?'buy':_0x1519eb(0x2ce),'price':0x1/_0x21d836['price']},_0x21d836={..._0x338bbd});_0x21d836[_0x1519eb(0x292)]==_0x1519eb(0x252)?_0x9812bb=(_0x5e69ed[_0x1519eb(0x1da)]*_0x5e69ed[_0x1519eb(0x2d3)]+_0x21d836[_0x1519eb(0x29f)]*_0x21d836[_0x1519eb(0x1eb)])/(_0x5e69ed[_0x1519eb(0x2d3)]+_0x21d836[_0x1519eb(0x1eb)]):_0x9812bb=(_0x5e69ed['breakeven']*_0x5e69ed['number']-_0x21d836[_0x1519eb(0x29f)]*_0x21d836[_0x1519eb(0x1eb)])/(_0x5e69ed[_0x1519eb(0x2d3)]-_0x21d836['filled']);_0x21d836[_0x1519eb(0x292)]==_0x1519eb(0x252)?_0x2cfe70=_0x5e69ed[_0x1519eb(0x259)]:_0x2cfe70=_0x5e69ed[_0x1519eb(0x259)]+(_0x21d836[_0x1519eb(0x29f)]-_0x5e69ed[_0x1519eb(0x1da)])*_0x21d836[_0x1519eb(0x1eb)];_0x46e9ca=_0x21d836[_0x1519eb(0x292)]=='sell'?_0x5e69ed[_0x1519eb(0x2d3)]-_0x21d836['filled']:_0x5e69ed[_0x1519eb(0x2d3)]+_0x21d836[_0x1519eb(0x1eb)],_0x106149=(_0x21d836['price']-_0x9812bb)*_0x46e9ca;let _0x36d1f9={'coin':_0x21d836[_0x1519eb(0x28a)],'number':_0x46e9ca,'breakeven':formatResult(_0x9812bb,0x8),'realized':formatResult(_0x2cfe70,0x8),'unrealized':formatResult(_0x106149,0x8),'fees':formatResult(_0x5e69ed[_0x1519eb(0x227)]+_0x2b8769,0x8),'sells':_0x21d836['side']==_0x1519eb(0x2ce)?_0x5e69ed[_0x1519eb(0x2e1)]+0x1:_0x5e69ed[_0x1519eb(0x2e1)],'buys':_0x21d836[_0x1519eb(0x292)]==_0x1519eb(0x252)?_0x5e69ed['buys']+0x1:_0x5e69ed[_0x1519eb(0x2da)]};dbCoinResults[_0x1519eb(0x21d)](_0x1519eb(0x250))['find']({'coin':_0x21d836[_0x1519eb(0x28a)]})[_0x1519eb(0x29b)](_0x36d1f9)[_0x1519eb(0x20f)]();}async function placeOrder(_0x499241){const _0x2d9fbc=_0xb132d5,_0x3e16c3=config[_0x2d9fbc(0x23c)]==_0x2d9fbc(0x2cb)?_0x2d9fbc(0x2cb):_0x2d9fbc(0x274);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x2d9fbc(0x264)](JSON['stringify'](currentCoins));for(const _0x3482e2 of _0x499241){let _0x38e5f2,_0x168cb2,_0x34c099,_0x24fefa,_0x42b9ba,_0x8999f2=_0x3482e2[_0x2d9fbc(0x1ef)];try{const _0xb1a394=await exchange[_0x2d9fbc(0x1fa)](_0x8999f2),_0xcf38a5=_0xb1a394[_0x8999f2];_0x38e5f2=_0xcf38a5[_0x2d9fbc(0x299)],_0x168cb2=_0xcf38a5[_0x2d9fbc(0x202)],_0x34c099=_0xcf38a5['ask'];_0x3482e2['reverse']?(_0x24fefa=_0x3482e2[_0x2d9fbc(0x292)]=='buy'?_0x2d9fbc(0x2ce):'buy',_0x42b9ba=Math[_0x2d9fbc(0x2b7)](_0x3482e2[_0x2d9fbc(0x232)])/_0x38e5f2):(_0x24fefa=_0x3482e2['side'],_0x42b9ba=Math[_0x2d9fbc(0x2b7)](_0x3482e2[_0x2d9fbc(0x232)]));_0x3e16c3==_0x2d9fbc(0x274)&&(config[_0x2d9fbc(0x23c)]==_0x2d9fbc(0x23e)&&(_0x38e5f2=_0x24fefa==_0x2d9fbc(0x252)?_0x168cb2:_0x34c099),config['ordertype']=='limit-low'&&(_0x38e5f2=_0x24fefa==_0x2d9fbc(0x252)?_0x34c099:_0x168cb2));_0x42b9ba=formatResult(_0x42b9ba,0x8),_0x38e5f2=formatResult(_0x38e5f2,0x8);const _0x41483c=await exchange['createOrder'](_0x8999f2,_0x3e16c3,_0x24fefa,_0x42b9ba,_0x38e5f2);lastOrders[_0x2d9fbc(0x282)]({'orderId':_0x41483c['id'],'symbol':_0x8999f2,'side':_0x24fefa,'reverse':_0x3482e2[_0x2d9fbc(0x2d5)],'amount':_0x3482e2['reverse']?_0x41483c['amount']*_0x41483c[_0x2d9fbc(0x29f)]:_0x41483c[_0x2d9fbc(0x211)],'filled':_0x3482e2[_0x2d9fbc(0x2d5)]?_0x41483c[_0x2d9fbc(0x1eb)]*_0x41483c[_0x2d9fbc(0x29f)]:_0x41483c[_0x2d9fbc(0x1eb)],'price':_0x41483c[_0x2d9fbc(0x29f)]});const _0x53dd7f=_0x24fefa==_0x2d9fbc(0x2ce)?config[_0x2d9fbc(0x279)]?String[_0x2d9fbc(0x222)]('0x'+config['emojisell'])+'\x20':'':config[_0x2d9fbc(0x200)]?String[_0x2d9fbc(0x222)]('0x'+config[_0x2d9fbc(0x200)])+'\x20':'',_0x52b7dc=_0x3e16c3=='market'?'Market':config[_0x2d9fbc(0x23c)]=='limit-high'?_0x2d9fbc(0x224):'Limit\x20(low-margin)';if(_0x3e16c3==_0x2d9fbc(0x2cb))logHistory(_0x2d9fbc(0x1f4),''+_0x53dd7f+_0x52b7dc+_0x2d9fbc(0x27a)+_0x8999f2+'\x20'+_0x24fefa+'\x20#'+formatResult(_0x41483c[_0x2d9fbc(0x1eb)],0x8)+'\x20@'+formatResult(_0x41483c[_0x2d9fbc(0x29f)],0x8));else logHistory('order',''+_0x53dd7f+_0x52b7dc+_0x2d9fbc(0x27a)+_0x8999f2+'\x20'+_0x24fefa+'\x20#'+formatResult(_0x41483c['amount'],0x8)+'\x20@'+formatResult(_0x41483c[_0x2d9fbc(0x29f)],0x8));_0x41483c[_0x2d9fbc(0x28a)]=_0x3482e2['coin'],await updateCoinResults(_0x41483c);if(config['cooldown']!=0x0){let _0x2a74ee=null;if(cooldownTracker[_0x2d9fbc(0x27f)]==config[_0x2d9fbc(0x298)]-0x1)_0x2a74ee=cooldownTracker[_0x2d9fbc(0x251)]();const _0x488e62=getTimeStamp();cooldownTracker[_0x2d9fbc(0x282)](_0x488e62);if(_0x2a74ee){const _0x5bed3e=fns[_0x2d9fbc(0x20a)](new Date(_0x488e62),new Date(_0x2a74ee));_0x5bed3e<cooldownInterval&&(logHistory(_0x2d9fbc(0x260),_0x2d9fbc(0x225)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x2d9fbc(0x2cc)+cooldownPeriod/(0xe10*0x3e8)+_0x2d9fbc(0x290)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x418bc){if(_0x418bc[_0x2d9fbc(0x25a)]()[_0x2d9fbc(0x23b)]('MIN_NOTIONAL'))logHistory('error',_0x2d9fbc(0x1f5)+_0x8999f2);else{if(_0x418bc[_0x2d9fbc(0x25a)]()['includes'](_0x2d9fbc(0x26b)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x8999f2);else await handleError(_0x418bc,_0x2d9fbc(0x25f));}}}if(lastOrders[_0x2d9fbc(0x27f)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x2d9fbc(0x2be)]&&(config[_0x2d9fbc(0x23c)]==_0x2d9fbc(0x2cb)?logHistory(_0x2d9fbc(0x260),_0x2d9fbc(0x2d2)):logHistory(_0x2d9fbc(0x260),_0x2d9fbc(0x206)));else coolingDown&&(!config[_0x2d9fbc(0x2be)]&&logHistory(_0x2d9fbc(0x260),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x7cf530,_0x81ee2e,_0x3c83aa=''){const _0x22f6b8=_0xb132d5;let _0x93c631={'time':getTimeStamp(),'type':_0x7cf530,'event':_0x81ee2e,'botname':config[_0x22f6b8(0x20c)],'showname':config[_0x22f6b8(0x256)]};dbLogs[_0x22f6b8(0x21d)]('logs')[_0x22f6b8(0x282)](_0x93c631)[_0x22f6b8(0x20f)]();if(_0x3c83aa=='')_0x3c83aa=_0x81ee2e;proxyEmit('event',{'log':_0x93c631,'summary':_0x3c83aa}),process[_0x22f6b8(0x26f)]({'telegram':_0x93c631},_0x48f9f4=>{}),logging(''+_0x93c631[_0x22f6b8(0x281)]);}function emitHistory(_0x3c588c={}){const _0x30c694=_0xb132d5;Object[_0x30c694(0x2db)](_0x3c588c)['length']==0x0&&(_0x3c588c={'type':[_0x30c694(0x1f4),_0x30c694(0x281)],'event':'','page':0x1});if(_0x3c588c[_0x30c694(0x1e9)]['includes'](_0x30c694(0x281)))_0x3c588c[_0x30c694(0x1e9)]['splice'](_0x3c588c[_0x30c694(0x1e9)][_0x30c694(0x278)]('event'),0x1,_0x30c694(0x260),'success');if(dbLogs[_0x30c694(0x25c)]('logs')[_0x30c694(0x219)]()){let _0x58d58d=dbLogs[_0x30c694(0x21d)]('logs')[_0x30c694(0x288)](_0x2a93ae=>{const _0x288e86=_0x30c694;if(_0x3c588c[_0x288e86(0x1e9)][_0x288e86(0x27f)]==0x0)return![];else return _0x3c588c[_0x288e86(0x1e9)]['includes'](_0x2a93ae[_0x288e86(0x1e9)]);})['filter'](_0x109a8d=>{const _0x1e320d=_0x30c694;if(_0x3c588c[_0x1e320d(0x281)]=='')return!![];else return _0x109a8d[_0x1e320d(0x281)]['toLowerCase']()[_0x1e320d(0x23b)](_0x3c588c[_0x1e320d(0x281)][_0x1e320d(0x28b)]());})[_0x30c694(0x1ec)](_0x30c694(0x247)),_0x155370=_0x58d58d[_0x30c694(0x219)]()[_0x30c694(0x27f)];_0x58d58d=_0x58d58d[_0x30c694(0x2d5)]()[_0x30c694(0x2b3)]((_0x3c588c['page']-0x1)*logPageSize,_0x3c588c[_0x30c694(0x1f2)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x30c694(0x266),{'logs':_0x58d58d,'total':_0x155370});}else proxyEmit(_0x30c694(0x266),{'logs':[],'total':0x0});}async function pauseBot(_0x2e1eff){const _0x200753=_0xb132d5,_0x1f2742=new Date()[_0x200753(0x2c6)]();if(!lastBotPause)lastBotPause=new Date()[_0x200753(0x2c6)](),consecutivePauses=0x1;else{if(_0x1f2742-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x200753(0x2d9)},_0x2fc059=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x200753(0x2c6)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x200753(0x260),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x2e1eff),botPaused=![],reset();}}async function handleError(_0x14844a,_0x42009a,_0x161f82=''){const _0xd4b3a2=_0xb132d5;if(_0x14844a[_0xd4b3a2(0x25a)]()['includes'](_0xd4b3a2(0x1d4)))logHistory('error',_0x42009a+_0xd4b3a2(0x2ba)),await pauseBot(pauseBotInterval);else{if(_0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)](_0xd4b3a2(0x28d)))logHistory(_0xd4b3a2(0x260),_0x42009a+_0xd4b3a2(0x27d)),await pauseBot(pauseBotInterval);else{if(_0x14844a[_0xd4b3a2(0x25a)]()['includes'](_0xd4b3a2(0x1db)))logHistory('error',_0x42009a+_0xd4b3a2(0x22d)),await pauseBot(pauseBotInterval);else{if(_0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)](_0xd4b3a2(0x213)))logHistory('error',_0x42009a+_0xd4b3a2(0x1d3)),logHistory(_0xd4b3a2(0x260),_0xd4b3a2(0x1ee)),process[_0xd4b3a2(0x26f)]({'stop':_0xd4b3a2(0x1dd)},_0x12a220=>{});else{if(_0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)]('AuthenticationError'))logHistory(_0xd4b3a2(0x260),_0x42009a+_0xd4b3a2(0x1d5)),logHistory(_0xd4b3a2(0x260),_0xd4b3a2(0x1ee)),process[_0xd4b3a2(0x26f)]({'stop':_0xd4b3a2(0x1dd)},_0x356f42=>{});else{if(_0x14844a[_0xd4b3a2(0x25a)]()['includes'](_0xd4b3a2(0x23d)))logHistory(_0xd4b3a2(0x260),_0x42009a+_0xd4b3a2(0x21e)),logHistory(_0xd4b3a2(0x260),_0xd4b3a2(0x1ee)),process[_0xd4b3a2(0x26f)]({'stop':_0xd4b3a2(0x1dd)},_0x52997c=>{});else{if(_0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)](_0xd4b3a2(0x2b8)))logHistory(_0xd4b3a2(0x260),_0x42009a+_0xd4b3a2(0x257)),logHistory(_0xd4b3a2(0x260),_0xd4b3a2(0x1ee)),process[_0xd4b3a2(0x26f)]({'stop':_0xd4b3a2(0x1dd)},_0x20b33f=>{});else{if(_0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)]('InvalidNonce'))logHistory('error',_0x42009a+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process[_0xd4b3a2(0x26f)]({'stop':_0xd4b3a2(0x2d9)},_0x1416fd=>{});else _0x14844a[_0xd4b3a2(0x25a)]()[_0xd4b3a2(0x23b)](_0xd4b3a2(0x296))?logHistory('error',_0x42009a+_0xd4b3a2(0x285)):(logHistory(_0xd4b3a2(0x260),_0x42009a+_0xd4b3a2(0x22a)),logging(_0x42009a+'\x20|\x20Error\x20details:\x20',_0x14844a),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x53612a,_0x34a29d){const _0x3a8ec7=_0xb132d5;return parseFloat(_0x53612a[_0x3a8ec7(0x210)](_0x34a29d));}function logging(_0x31053,_0x3f3720=''){const _0x53868a=_0xb132d5;if(config[_0x53868a(0x256)])console[_0x53868a(0x2c0)](getTimeStamp()+':\x20'+config['botname']+_0x53868a(0x297)+_0x31053,_0x3f3720);else console[_0x53868a(0x2c0)](getTimeStamp()+_0x53868a(0x1d9)+botID+'\x20>\x20'+_0x31053,_0x3f3720);}function getServerTime(){const _0x5e587b=_0xb132d5,_0x295a5f=new Date();return _0x295a5f[_0x5e587b(0x29d)]()+'/'+(_0x295a5f[_0x5e587b(0x216)]()+0x1)[_0x5e587b(0x25a)]()[_0x5e587b(0x289)](0x2,'0')+'/'+_0x295a5f[_0x5e587b(0x1d1)]()[_0x5e587b(0x25a)]()[_0x5e587b(0x289)](0x2,'0')+'\x20'+_0x295a5f[_0x5e587b(0x2e2)]()['toString']()[_0x5e587b(0x289)](0x2,'0')+':'+_0x295a5f[_0x5e587b(0x1f8)]()[_0x5e587b(0x25a)]()[_0x5e587b(0x289)](0x2,'0')+':'+_0x295a5f[_0x5e587b(0x26d)]()[_0x5e587b(0x25a)]()[_0x5e587b(0x289)](0x2,'0');}function getTimeStamp(){const _0x2adde3=_0xb132d5,_0xb1faad=shiftedTime();return _0xb1faad[_0x2adde3(0x29d)]()+'/'+(_0xb1faad[_0x2adde3(0x216)]()+0x1)[_0x2adde3(0x25a)]()[_0x2adde3(0x289)](0x2,'0')+'/'+_0xb1faad[_0x2adde3(0x1d1)]()[_0x2adde3(0x25a)]()[_0x2adde3(0x289)](0x2,'0')+'\x20'+_0xb1faad[_0x2adde3(0x2e2)]()[_0x2adde3(0x25a)]()[_0x2adde3(0x289)](0x2,'0')+':'+_0xb1faad[_0x2adde3(0x1f8)]()[_0x2adde3(0x25a)]()[_0x2adde3(0x289)](0x2,'0')+':'+_0xb1faad[_0x2adde3(0x26d)]()[_0x2adde3(0x25a)]()['padStart'](0x2,'0');}function getDate(){const _0x45acb5=_0xb132d5,_0x14450d=shiftedTime();return _0x14450d[_0x45acb5(0x29d)]()+'/'+(_0x14450d[_0x45acb5(0x216)]()+0x1)[_0x45acb5(0x25a)]()[_0x45acb5(0x289)](0x2,'0')+'/'+_0x14450d[_0x45acb5(0x1d1)]()[_0x45acb5(0x25a)]()[_0x45acb5(0x289)](0x2,'0');}function getHour(){const _0x4ffe5b=_0xb132d5,_0xabaea0=shiftedTime();return _0xabaea0['getHours']()['toString']()[_0x4ffe5b(0x289)](0x2,'0');}function sleep(_0x45c076){return new Promise(_0x3e8d47=>setTimeout(_0x3e8d47,_0x45c076));}function shiftedTime(){const _0x58d5d4=_0xb132d5,_0x30b873=new Date();let _0x4d1337=_0x30b873;if(config&&config[_0x58d5d4(0x1e0)]!==0x0)_0x4d1337=fns['add'](_0x30b873,{'hours':config['timeshift']});return _0x4d1337;}