const _0x1aaad5=_0x21bf;(function(_0x5ed886,_0x182c71){const _0x17d2ff=_0x21bf,_0x370da4=_0x5ed886();while(!![]){try{const _0x38b3d4=parseInt(_0x17d2ff(0x287))/0x1+-parseInt(_0x17d2ff(0x1e9))/0x2*(-parseInt(_0x17d2ff(0x2d8))/0x3)+parseInt(_0x17d2ff(0x1db))/0x4*(-parseInt(_0x17d2ff(0x2e2))/0x5)+-parseInt(_0x17d2ff(0x242))/0x6*(-parseInt(_0x17d2ff(0x26c))/0x7)+-parseInt(_0x17d2ff(0x2d7))/0x8+parseInt(_0x17d2ff(0x1f1))/0x9+-parseInt(_0x17d2ff(0x230))/0xa;if(_0x38b3d4===_0x182c71)break;else _0x370da4['push'](_0x370da4['shift']());}catch(_0x367fc1){_0x370da4['push'](_0x370da4['shift']());}}}(_0x4916,0x92982));const _0x38f57d=function(){let _0x488cea=!![];return function(_0x1ebf62,_0x294694){const _0x9f2806=_0x488cea?function(){const _0x87886f=_0x21bf;if(_0x294694){const _0x5dae51=_0x294694[_0x87886f(0x25c)](_0x1ebf62,arguments);return _0x294694=null,_0x5dae51;}}:function(){};return _0x488cea=![],_0x9f2806;};}(),_0x197ab4=_0x38f57d(this,function(){const _0x21ecdd=_0x21bf;return _0x197ab4[_0x21ecdd(0x22e)]()[_0x21ecdd(0x2b1)](_0x21ecdd(0x2b6))[_0x21ecdd(0x22e)]()[_0x21ecdd(0x2fd)](_0x197ab4)[_0x21ecdd(0x2b1)](_0x21ecdd(0x2b6));});_0x197ab4();'use strict';const ccxt=require('ccxt'),low=require(_0x1aaad5(0x2a5)),FileSync=require(_0x1aaad5(0x29a)),fs=require('fs'),fns=require(_0x1aaad5(0x239)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global['ticker']={},global[_0x1aaad5(0x2b0)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x1aaad5(0x2dd),'HOT/BTC',_0x1aaad5(0x218),_0x1aaad5(0x2b9),'NANO/','YOYOW/'];let config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1aaad5(0x256))[_0x1aaad5(0x2b2)],botID=process[_0x1aaad5(0x1e5)][0x2]||_0x1aaad5(0x2a1),pattern=/^[0-9]{3}$/;!pattern[_0x1aaad5(0x2d3)](botID)&&(console[_0x1aaad5(0x260)](_0x1aaad5(0x208)+botID+_0x1aaad5(0x2ec)),process[_0x1aaad5(0x2ef)](0x1));const userID=process[_0x1aaad5(0x1e5)][0x3]||'',configpath=userID?_0x1aaad5(0x2f8)+userID+'/':_0x1aaad5(0x2f8);!fs[_0x1aaad5(0x262)](configpath)&&fs[_0x1aaad5(0x299)](configpath);const configfile=configpath+_0x1aaad5(0x216)+botID+_0x1aaad5(0x2f7),logfile=configpath+_0x1aaad5(0x216)+botID+'-events.json',performancefile=configpath+_0x1aaad5(0x216)+botID+_0x1aaad5(0x20a),coinresultsfile=configpath+_0x1aaad5(0x216)+botID+_0x1aaad5(0x21c),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1aaad5(0x2bf),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1aaad5(0x21a)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1aaad5(0x21a)]({'data':[]})['write']();function _0x21bf(_0xcf5864,_0x36c41c){const _0xbb5579=_0x4916();return _0x21bf=function(_0x197ab4,_0x38f57d){_0x197ab4=_0x197ab4-0x1d8;let _0x491629=_0xbb5579[_0x197ab4];return _0x491629;},_0x21bf(_0xcf5864,_0x36c41c);}const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1aaad5(0x21a)]({'bot':[]})[_0x1aaad5(0x28b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x1aaad5(0x28b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1aaad5(0x24f),'symbol':'BTC/EUR'},'usd':{'coin':_0x1aaad5(0x2d1),'symbol':_0x1aaad5(0x2d6)}},lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x10d18c)=>{},'debug':(..._0x2d9277)=>{},'notice':(..._0x4e9e8f)=>{},'info':(..._0x20719e)=>{},'warning':(..._0x388b89)=>{},'error':async function(..._0x4d5586){const _0x96a825=_0x1aaad5,_0x2ea988=new Date()[_0x96a825(0x301)]();if(!lastErrorShown||_0x2ea988-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime']();let _0x4ba99e='';if(_0x4d5586[0x0])_0x4ba99e+=_0x4d5586[0x0];if(_0x4d5586[0x1]&&_0x4d5586[0x1][_0x96a825(0x2ad)]&&_0x4d5586[0x1][_0x96a825(0x2ad)][_0x96a825(0x2da)])_0x4ba99e+=_0x96a825(0x25b)+_0x4d5586[0x1]['error']['message'];logging(_0x96a825(0x22b)+consecutivePauses+_0x96a825(0x1f2),''+_0x4ba99e),await pauseBot(_0x96a825(0x20b));}}},crypt=new Crypt({'md':_0x1aaad5(0x1e3),'rsaStandard':_0x1aaad5(0x2c6)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings['timeshift']!=config[_0x1aaad5(0x2ba)]&&updateTimeshift(settings['timeshift']);process[_0x1aaad5(0x1f8)]({'started':_0x1aaad5(0x210)},_0x29fcee=>{}),initializeProcessListeners();function proxyEmit(_0x18447e,_0x4f2577=null){const _0x28860f=_0x1aaad5;process[_0x28860f(0x1f8)]({'function':_0x18447e,'args':_0x4f2577},_0x2450ca=>{});}function initializeProcessListeners(){process['on']('message',_0x375ded=>{const _0x16c4a2=_0x21bf;switch(Object[_0x16c4a2(0x240)](_0x375ded)[0x0]){case'timeshift':_0x375ded[_0x16c4a2(0x2ba)]!=undefined&&(settings[_0x16c4a2(0x2ba)]=_0x375ded['timeshift'],updateTimeshift(settings[_0x16c4a2(0x2ba)]));break;case'function':switch(_0x375ded[_0x16c4a2(0x213)]){case _0x16c4a2(0x29c):initclient();break;case _0x16c4a2(0x200):toggleclient();break;case _0x16c4a2(0x302):emitHistory(_0x375ded['args']);break;case _0x16c4a2(0x28f):deleteHistoryAlerts(_0x375ded[_0x16c4a2(0x2ae)]);break;case _0x16c4a2(0x1ff):getPortfolio(_0x375ded['args']);break;case'storeConfiguration':storeConfiguration(_0x375ded[_0x16c4a2(0x2ae)]);break;case _0x16c4a2(0x28c):storeHeadless(_0x375ded['args']);break;case _0x16c4a2(0x1e4):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x375ded['args']);break;case _0x16c4a2(0x29f):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x100c82=_0x1aaad5;if(pidBalances)clearTimeout(pidBalances);if(config[_0x100c82(0x1eb)]!=''){await initExchange(config['apiKey'],config[_0x100c82(0x23f)]);let _0x436f35=await loadSymbols();_0x436f35&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x42e101,_0xaa40c4){const _0x2db173=_0x1aaad5,_0x582ab1=ccxt[config['exchange']];let _0x16c523;switch(config[_0x2db173(0x28d)]){case _0x2db173(0x21e):_0x16c523=_0x2db173(0x275);break;case'binanceus':_0x16c523=_0x2db173(0x2a7);break;default:_0x16c523=_0x2db173(0x275);}exchange=new _0x582ab1({'apiKey':_0x42e101,'secret':_0xaa40c4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x42e101,'api_secret':_0xaa40c4,'beautify':!![],'wsUrl':_0x16c523},logger),config[_0x2db173(0x28d)]==_0x2db173(0x305)&&(stablecoins={'eur':{'coin':_0x2db173(0x295),'symbol':_0x2db173(0x209)},'usd':{'coin':_0x2db173(0x2d1),'symbol':_0x2db173(0x2d6)}});}async function loadSymbols(){const _0x35c9d7=_0x1aaad5;let _0x4d9fcf;try{markets=await exchange[_0x35c9d7(0x25a)](),allSymbols=exchange['symbols'][_0x35c9d7(0x266)](_0x1e554b=>{const _0xf86a64=_0x35c9d7;let _0x49cc63=![];return exceptions[_0xf86a64(0x2f9)](_0x5c1835=>{const _0x2fb479=_0xf86a64;if(_0x1e554b[_0x2fb479(0x21b)](_0x5c1835))_0x49cc63=!![];}),!_0x49cc63;}),_0x4d9fcf=!![];}catch(_0x288a58){await handleError(_0x288a58,_0x35c9d7(0x1dd)),_0x4d9fcf=![];}return _0x4d9fcf;}function _0x4916(){const _0x4e0dbb=['Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','buys','Bot\x20','OrderNotFound','Unknown\x20error\x20occured','238JuJEmI','shift','getSeconds','fee','accumulatedQuantity','secure','currency','Limit\x20(high-margin)','remove','wss://stream.binance.com:9443','yyyy/MM/dd\x20HH:mm:ss','changes','InvalidNonce','cancelOrder()','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','isEqual','Binance\x20API\x20blocked','map','wsKey','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','datetime','wsMarket','price','startdate','DDoSProtection','fetchOHLCV','valid','850023VEYwpe','\x20|\x20','cancelOrder','Carefully\x20evaludate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','write','storeHeadless','exchange','number','deleteHistoryAlerts','value','offset','ordertype','\x20order:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','BTCBUSD','writeFile','timeout','API-key\x20format\x20invalid','mkdirSync','lowdb/adapters/FileSync','Pausing\x20for\x20','initclient','breakeven','kill','cancelLoading','eventType','001','starting-balance-','fetchOrders','timestamp','lowdb','coin','wss://stream.binance.us:9443','ExchangeNotAvailable','side','replace','BNB/','remainingSymbols','error','args','\x20minutes\x20-\x20balancing\x20resumed','change','search','version','API\x20or\x20clock\x20sync\x20issue','limit-low','getCoins()','(((.+)+)+)+$','portfolio','get','XEM/BUSD','timeshift','fromCodePoint','\x20|\x20Binance\x20API\x20secret\x20invalid','delta','Binance\x20API\x20key\x20is\x20invalid','/backup/','last','symbol','sort','close','min','Limit\x20(low-margin)','RSA-OAEP','coinamount','time','padStart','buy','push','Binance\x20API\x20secret\x20is\x20invalid','balances','userData','usd','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','BTCUSDT','market','test','abs','getCloses()','BTC/USDT','5024640LMNOTp','3MnYWhw','************','message','restart','parseISO','DAI/','reduce','subscribeSpotUserDataStream','getMonth','startprice','5pMISru','order','limits','has','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','fetchTickers','enabled','string','\x20hour','format',',\x20must\x20be\x20a\x203\x20digit\x20number','max','type','exit','success','priceChangePercent','trade','getPortfolio()','startnumber','reverse','find','-config.json','./config/','forEach','recreate','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit-high','constructor','getMinutes','getFullYear',':\x20Bot\x20','getTime','emitHistory','decrypt','date','binanceus','progress','emojibuy','InsufficientFunds','stringify','3912844KlMnYR','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','loadSymbols()','Order(s)\x20filled\x20-\x20balancing\x20resumed','differenceInCalendarDays','performance','privateKey','.json','sha256','getStartingBalances','argv','sells','excluded','2.3.5','2279226sMWBuR','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','apiKey','AuthenticationError','cost','round','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','1227132DHRmZZ',')\x20|\x20Error\x20details:\x20','liquidity','bid','getDate','kline','FILLED','send','parse','ask','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','RequestTimeout','botname','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','getPortfolio','toggleclient','event','yyyy/MM/dd','asset','entries','\x20|\x20Binance\x20API\x20key\x20invalid','availableBalance','configuration-stored','Error:\x20Invalid\x20argument\x20','BTC/BUSD','-performance.json','Binance\x20not\x20available\x20(1)','yyyy-MM-dd\x27T\x27HH:mm:ss','milliseconds','logs','length','running','toLowerCase','cooldown','function','orderType','getHours','bot-','slice','HOT/EUR','Binance\x20not\x20available\x20(2)','defaults','includes','-results.json','showname','binance','spot','bot','Order:\x20','fetchBalance','settings','\x20>\x20','realized','coins','subscribeSymbol24hrTicker','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20has\x20a\x2024h\x20drop\x20of\x20','getFiat()','WebSockets(','eur','closeWs','toString','Binance\x20not\x20responding','2539390oeFgYU','BTC','Unfilled\x20order(s)\x20canceled\x20after\x20','reconnected','initws()','fees','Executed\x20','filled','ticker','date-fns','differenceInSeconds','formattedMessage','distribution','basecoin','change24h','apiSecret','keys','cloneDeep','59064pLwBZj','data','Order\x20amount\x20is\x20invalid:\x20','amount','assign','USDT','headless','add','Manual\x20balancing\x20required:\x20','emojisell','configuration','EUR','sortBy','BTCEUR','set','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','split','threshold','splice','target','./version.json','Order(s)\x20validated\x20-\x20balancing\x20resumed','limit','Performance\x20recreation\x20completed\x20successfully','loadMarkets','\x20-\x20','apply','Order\x20filled:\x20','page','orderId','log','coin-loading-progress','existsSync','sell','event-history','toFixed','filter'];_0x4916=function(){return _0x4e0dbb;};return _0x4916();}async function initbot(){const _0x1c118a=_0x1aaad5;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4c4e54=dbCoinResults[_0x1c118a(0x2b8)](_0x1c118a(0x226))[_0x1c118a(0x290)]();if(_0x4c4e54['length']==0x0)await resetCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x17c3f6=getNormalizedPerformance();emitPerformance(_0x17c3f6),await getStartingBalances(_0x17c3f6);}async function toggleclient(){const _0x237f30=_0x1aaad5;let _0x16a307=dbConfig['get']('bot')[_0x237f30(0x2f6)]({'botID':botID})['value']();if(_0x16a307){const _0x24465c=!_0x16a307['headless'];dbConfig[_0x237f30(0x2b8)](_0x237f30(0x220))['find']({'botID':botID})[_0x237f30(0x246)]({'headless':_0x24465c})[_0x237f30(0x28b)](),config[_0x237f30(0x248)]=_0x24465c,proxyEmit('configuration',emittedConfiguration());}}function cleanws(){const _0x521b84=_0x1aaad5;wsinitialized=![];ws1&&(ws1[_0x521b84(0x2f9)](_0xfff830=>{const _0x2c664=_0x521b84;try{wsClient[_0x2c664(0x22d)](_0xfff830);}catch(_0x5ad47c){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x449284){}ws2=null;}ws3&&(ws3['forEach'](_0x1879ea=>{const _0x160877=_0x521b84;try{wsClient[_0x160877(0x22d)](_0x1879ea);}catch(_0x146409){}}),ws3=[]);}async function initws(){const _0x100d0e=_0x1aaad5;cleanws();let _0x2ee945=[];currentCoins[_0x100d0e(0x2f9)](_0xd47944=>{const _0x5a8329=_0x100d0e;if(_0xd47944[_0x5a8329(0x2a6)]!=config[_0x5a8329(0x23d)])_0x2ee945['push'](_0xd47944['symbol']);});if(!_0x2ee945[_0x100d0e(0x21b)](stablecoins[_0x100d0e(0x22c)][_0x100d0e(0x2c1)]))_0x2ee945['push'](stablecoins[_0x100d0e(0x22c)][_0x100d0e(0x2c1)]);if(!_0x2ee945['includes'](stablecoins[_0x100d0e(0x2cf)][_0x100d0e(0x2c1)]))_0x2ee945[_0x100d0e(0x2cb)](stablecoins[_0x100d0e(0x2cf)][_0x100d0e(0x2c1)]);if(!_0x2ee945[_0x100d0e(0x21b)](_0x100d0e(0x2ab)+config[_0x100d0e(0x23d)]))_0x2ee945[_0x100d0e(0x2cb)]('BNB/'+config[_0x100d0e(0x23d)]);try{_0x2ee945[_0x100d0e(0x2f9)]((_0x24ff1c,_0x28c9bd)=>{const _0x30926b=_0x100d0e;ws1[_0x28c9bd]=wsClient['subscribeSpotKline'](noslash(_0x24ff1c),'1m'),ws3[_0x28c9bd]=wsClient[_0x30926b(0x227)](noslash(_0x24ff1c),_0x30926b(0x21f));}),ws2=wsClient[_0x100d0e(0x2df)](),wsClient['on'](_0x100d0e(0x23b),_0x5d4e2e=>{const _0x13f9c9=_0x100d0e;if(isWsFormattedKline(_0x5d4e2e)){global[_0x13f9c9(0x238)][_0x5d4e2e[_0x13f9c9(0x1f6)]['symbol']]=_0x5d4e2e[_0x13f9c9(0x1f6)][_0x13f9c9(0x2c3)];return;}else{if(isWsFormatted24hrTicker(_0x5d4e2e)){global[_0x13f9c9(0x2b0)][_0x5d4e2e[_0x13f9c9(0x2c1)]]=_0x5d4e2e[_0x13f9c9(0x2f1)];return;}else{if(!Array['isArray'](_0x5d4e2e)&&_0x5d4e2e[_0x13f9c9(0x27e)][_0x13f9c9(0x21b)](_0x13f9c9(0x2ce))){if(_0x5d4e2e[_0x13f9c9(0x281)]['includes'](_0x13f9c9(0x21f))){updateNumberCoins(_0x5d4e2e);return;}}}}}),wsClient['on'](_0x100d0e(0x233),async _0x496615=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x23c1e5){await handleError(_0x23c1e5,_0x100d0e(0x234));}let _0x3bd057,_0x415eaa=0x0;loading[_0x100d0e(0x2ac)]=[];let _0x3a8a7d=0x0;_0x2ee945['forEach'](_0x218d79=>{const _0x1295b3=_0x100d0e;loading[_0x1295b3(0x2ac)][_0x1295b3(0x2cb)](_0x218d79);}),loadingCanceled=![];while(_0x3bd057!=_0x2ee945[_0x100d0e(0x20f)]){_0x3bd057=0x0,_0x2ee945[_0x100d0e(0x2f9)](_0x2243f0=>{const _0x48fd18=_0x100d0e;global[_0x48fd18(0x238)][noslash(_0x2243f0)]&&(loading[_0x48fd18(0x2ac)]=loading[_0x48fd18(0x2ac)]['filter'](_0x1963f7=>_0x1963f7!=_0x2243f0),_0x3bd057++);}),loading[_0x100d0e(0x306)]=Math['round'](_0x3bd057/_0x2ee945[_0x100d0e(0x20f)]*0x64);_0x3a8a7d>0x1e*0x5&&(loading[_0x100d0e(0x297)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3bd057!=_0x415eaa&&(_0x415eaa=_0x3bd057,emitLoadingProgress()),_0x3a8a7d++,await sleep(0xc8);}if(_0x3bd057==_0x2ee945['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x736bde=_0x1aaad5;proxyEmit(_0x736bde(0x261),loading);}async function getFiat(){const _0x35fbf7=_0x1aaad5;let _0x2e3832=0x0,_0x38bb24=0x0;try{_0x2e3832=global[_0x35fbf7(0x238)][stablecoins[_0x35fbf7(0x22c)][_0x35fbf7(0x2a6)]],_0x38bb24=global[_0x35fbf7(0x238)][stablecoins['usd'][_0x35fbf7(0x2a6)]];}catch(_0x39b6ed){await handleError(_0x39b6ed,_0x35fbf7(0x22a));}return{'eur':Number(_0x2e3832),'usd':Number(_0x38bb24)};}function setStartDatePerformance(){const _0x586e50=_0x1aaad5;if(config&&config[_0x586e50(0x1f3)][0x0][_0x586e50(0x277)][_0x586e50(0x20f)]!=0x0){const _0x18962f=config[_0x586e50(0x1f3)][0x0][_0x586e50(0x277)];dbPerformance[_0x586e50(0x2b8)](_0x586e50(0x243))[_0x586e50(0x2f6)]({'date':config['startdate']})['assign']({'coins':_0x18962f})[_0x586e50(0x28b)]();}}async function recreateHistory(_0x1eb179){const _0x66e657=_0x1aaad5;let _0x1d1370,_0x3eeeb0=[];logHistory(_0x66e657(0x2f0),_0x66e657(0x27a)),_0x1eb179[_0x66e657(0x2b7)][_0x66e657(0x2f9)](_0x3c1eaa=>{const _0x54140f=_0x66e657;if(_0x3c1eaa[_0x54140f(0x2a6)]!=config[_0x54140f(0x23d)]&&!_0x3c1eaa[_0x54140f(0x1e7)])_0x3eeeb0[_0x54140f(0x2cb)]({'coin':_0x3c1eaa['coin'],'symbol':_0x3c1eaa['symbol']});});let _0x53ffa0=[];try{const _0x33e678=fns[_0x66e657(0x2eb)](fns[_0x66e657(0x2dc)](_0x1eb179[_0x66e657(0x283)][_0x66e657(0x2aa)](/\//g,'-')),_0x66e657(0x20c));for(const _0x2e29fb of _0x3eeeb0){if(_0x2e29fb[_0x66e657(0x2a6)]!=config[_0x66e657(0x23d)])_0x1d1370=await exchange[_0x66e657(0x2a3)](_0x2e29fb[_0x66e657(0x2c1)],Date[_0x66e657(0x1f9)](_0x33e678));_0x1d1370[_0x66e657(0x2f9)](_0x4549f1=>{const _0x517efd=_0x66e657,_0x3d2fe8=_0x2e29fb[_0x517efd(0x2c1)]['includes'](config[_0x517efd(0x23d)]+'/'),_0x3824ac=fns[_0x517efd(0x2eb)](fns[_0x517efd(0x2dc)](_0x4549f1[_0x517efd(0x280)]),_0x517efd(0x276)),_0x1bece0=fns[_0x517efd(0x2eb)](fns[_0x517efd(0x2dc)](_0x4549f1[_0x517efd(0x280)]),'yyyy/MM/dd');let _0x3cd11c;if(_0x4549f1['side']==_0x517efd(0x2ca)&&_0x3d2fe8==![])_0x3cd11c=_0x4549f1['amount'];if(_0x4549f1[_0x517efd(0x2a9)]=='buy'&&_0x3d2fe8==!![])_0x3cd11c=-_0x4549f1[_0x517efd(0x245)]*_0x4549f1['price'];if(_0x4549f1[_0x517efd(0x2a9)]==_0x517efd(0x263)&&_0x3d2fe8==![])_0x3cd11c=-_0x4549f1[_0x517efd(0x245)];if(_0x4549f1[_0x517efd(0x2a9)]==_0x517efd(0x263)&&_0x3d2fe8==!![])_0x3cd11c=_0x4549f1[_0x517efd(0x245)]*_0x4549f1[_0x517efd(0x282)];_0x53ffa0[_0x517efd(0x2cb)]({'timestamp':_0x3824ac,'date':_0x1bece0,'coin':_0x2e29fb[_0x517efd(0x2a6)],'symbol':_0x2e29fb[_0x517efd(0x2c1)],'type':_0x4549f1['type'],'side':_0x4549f1[_0x517efd(0x2a9)],'reverse':_0x3d2fe8,'amount':formatResult(_0x4549f1[_0x517efd(0x237)],0x8),'filled':formatResult(_0x4549f1[_0x517efd(0x237)],0x8),'coinamount':formatResult(_0x3cd11c,0x8),'price':formatResult(_0x4549f1[_0x517efd(0x282)],0x8)});let _0x55d884;if(_0x4549f1['side']==_0x517efd(0x2ca)&&_0x3d2fe8==![])_0x55d884=-_0x4549f1[_0x517efd(0x245)]*_0x4549f1['price'];if(_0x4549f1['side']==_0x517efd(0x2ca)&&_0x3d2fe8==!![])_0x55d884=_0x4549f1[_0x517efd(0x245)];if(_0x4549f1[_0x517efd(0x2a9)]==_0x517efd(0x263)&&_0x3d2fe8==![])_0x55d884=_0x4549f1[_0x517efd(0x245)]*_0x4549f1['price'];if(_0x4549f1[_0x517efd(0x2a9)]==_0x517efd(0x263)&&_0x3d2fe8==!![])_0x55d884=-_0x4549f1[_0x517efd(0x245)];_0x53ffa0[_0x517efd(0x2cb)]({'date':_0x1bece0,'coin':config['basecoin'],'coinamount':formatResult(_0x55d884,0x8)});});}_0x53ffa0['sort']((_0x40b551,_0x296b1d)=>_0x40b551['timestamp']>_0x296b1d[_0x66e657(0x2a4)]?0x1:_0x296b1d[_0x66e657(0x2a4)]>_0x40b551[_0x66e657(0x2a4)]?-0x1:0x0),dbLogs['get']('logs')[_0x66e657(0x274)]()[_0x66e657(0x28b)](),_0x53ffa0[_0x66e657(0x2f9)](_0x1ece19=>{const _0x3568c7=_0x66e657;let _0xa64e80;_0x1ece19[_0x3568c7(0x2a6)]!=config[_0x3568c7(0x23d)]&&(_0xa64e80={'time':_0x1ece19[_0x3568c7(0x2a4)],'type':_0x3568c7(0x2e3),'event':_0x3568c7(0x221)+_0x1ece19['symbol']+'\x20'+_0x1ece19['side']+'\x20#'+_0x1ece19[_0x3568c7(0x245)]+'\x20@'+_0x1ece19[_0x3568c7(0x282)]},dbLogs[_0x3568c7(0x2b8)]('logs')[_0x3568c7(0x2cb)](_0xa64e80)[_0x3568c7(0x28b)]());});const _0x27b3da=fns['eachDayOfInterval']({'start':new Date(_0x1eb179[_0x66e657(0x283)]),'end':new Date()})['map'](_0x376b4e=>fns[_0x66e657(0x2eb)](_0x376b4e,_0x66e657(0x202)));let _0x39aae0=[];_0x1eb179[_0x66e657(0x2b7)][_0x66e657(0x2f9)](_0x19ac74=>{const _0x284c50=_0x66e657;if(!_0x19ac74[_0x284c50(0x1e7)]){_0x39aae0[_0x19ac74[_0x284c50(0x2a6)]]=[];let _0x4855d4=_0x19ac74[_0x284c50(0x2f4)];_0x27b3da[_0x284c50(0x2f9)]((_0x26750d,_0x252400)=>{const _0x408c32=_0x284c50;let _0x427d1e=_0x53ffa0['filter'](_0x316c24=>_0x316c24[_0x408c32(0x2a6)]==_0x19ac74[_0x408c32(0x2a6)]&&_0x316c24['date']==_0x26750d);if(_0x427d1e[_0x408c32(0x20f)]!=0x0){let _0x5a8e2d=_0x427d1e[_0x408c32(0x2de)]((_0x259af9,_0x4a6304)=>{const _0x17e06c=_0x408c32;return _0x259af9+=_0x4a6304[_0x17e06c(0x2c7)],_0x259af9;},0x0);_0x4855d4+=_0x5a8e2d;}_0x39aae0[_0x19ac74[_0x408c32(0x2a6)]][_0x26750d]=_0x4855d4;});}});const _0x5a8f8c=[..._0x3eeeb0];_0x5a8f8c['push']({'coin':stablecoins[_0x66e657(0x22c)][_0x66e657(0x2a6)],'symbol':stablecoins[_0x66e657(0x22c)][_0x66e657(0x2c1)]}),_0x5a8f8c[_0x66e657(0x2cb)]({'coin':stablecoins[_0x66e657(0x2cf)][_0x66e657(0x2a6)],'symbol':stablecoins[_0x66e657(0x2cf)][_0x66e657(0x2c1)]});let _0x5e10a8=[];for(const _0x1ec55e of _0x5a8f8c){_0x5e10a8[_0x1ec55e[_0x66e657(0x2a6)]]=await getCloses(_0x1ec55e['symbol'],new Date(_0x1eb179[_0x66e657(0x283)]));}dbPerformance[_0x66e657(0x2b8)](_0x66e657(0x243))[_0x66e657(0x274)]()['write'](),_0x27b3da[_0x66e657(0x2f9)]((_0x11bfb7,_0xd756dd)=>{const _0xf3f033=_0x66e657;let _0x2f15ef,_0x1d08e1=[];_0xd756dd==0x0?(_0x1eb179['portfolio'][_0xf3f033(0x2f9)](_0x147e32=>{const _0x954d79=_0xf3f033;!_0x147e32[_0x954d79(0x1e7)]&&_0x1d08e1[_0x954d79(0x2cb)]({'coin':_0x147e32['coin'],'number':_0x147e32[_0x954d79(0x2f4)],'price':_0x147e32[_0x954d79(0x2e1)]});}),_0x2f15ef={'date':_0x11bfb7,'eur':_0x5e10a8[stablecoins[_0xf3f033(0x22c)][_0xf3f033(0x2a6)]][_0xd756dd],'usd':_0x5e10a8[stablecoins['usd'][_0xf3f033(0x2a6)]][_0xd756dd],'coins':_0x1d08e1}):(_0x1eb179[_0xf3f033(0x2b7)][_0xf3f033(0x2f9)](_0x2ff75e=>{const _0x2b45a2=_0xf3f033;!_0x2ff75e[_0x2b45a2(0x1e7)]&&_0x1d08e1[_0x2b45a2(0x2cb)]({'coin':_0x2ff75e['coin'],'number':_0x39aae0[_0x2ff75e[_0x2b45a2(0x2a6)]][_0x11bfb7],'price':_0x2ff75e[_0x2b45a2(0x2a6)]==config[_0x2b45a2(0x23d)]?0x1:_0x5e10a8[_0x2ff75e[_0x2b45a2(0x2a6)]][_0xd756dd]});}),_0x2f15ef={'date':_0x11bfb7,'eur':_0x5e10a8[stablecoins[_0xf3f033(0x22c)][_0xf3f033(0x2a6)]][_0xd756dd],'usd':_0x5e10a8[stablecoins['usd'][_0xf3f033(0x2a6)]][_0xd756dd],'coins':_0x1d08e1}),dbPerformance[_0xf3f033(0x2b8)](_0xf3f033(0x243))[_0xf3f033(0x2cb)](_0x2f15ef)[_0xf3f033(0x28b)]();}),emitPerformance(getNormalizedPerformance()),await resetCoinResults();for(let _0xd43001 of _0x53ffa0){_0xd43001['coin']!=config[_0x66e657(0x23d)]&&await updateCoinResults(_0xd43001);}logHistory('success',_0x66e657(0x259));}catch(_0x93e61b){await handleError(_0x93e61b,'recreateHistory()');}}async function validate24hChanges(){const _0x1833c2=_0x1aaad5;let _0x524c91;for(const _0xf9198f of currentCoins){if(_0xf9198f[_0x1833c2(0x2a6)]!=config[_0x1833c2(0x23d)]){let _0x3f8607;_0xf9198f[_0x1833c2(0x2f5)]?_0x3f8607=formatResult((0x1/(global['change'][noslash(_0xf9198f[_0x1833c2(0x2c1)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3f8607=global[_0x1833c2(0x2b0)][noslash(_0xf9198f['symbol'])],_0x3f8607<config[_0x1833c2(0x23e)]&&(logHistory(_0x1833c2(0x2ad),_0xf9198f['coin']+_0x1833c2(0x229)+_0x3f8607+'%'),logHistory(_0x1833c2(0x2ad),_0x1833c2(0x1dc)),logHistory('error',_0x1833c2(0x28a)),await storeHeadless({'headless':![]}));}}}async function getCloses(_0x2dc7b4,_0xd9b89f,_0x1710d4=undefined){const _0x372b4e=_0x1aaad5,_0x49fb1d='1d';let _0x112704,_0xbb39c5;const _0x5dab26=fns[_0x372b4e(0x1df)](new Date(),_0xd9b89f)+0x1;try{const _0x1eb166=exchange[_0x372b4e(0x20d)]()-_0x5dab26*0x18*0xe10*0x3e8;_0x112704=await exchange[_0x372b4e(0x285)](_0x2dc7b4,_0x49fb1d,_0x1eb166,_0x1710d4),_0xbb39c5=await exchange['fetchTickers'](_0x2dc7b4);}catch(_0x1a4b40){await handleError(_0x1a4b40,_0x372b4e(0x2d5));}let _0x81dbe9=ohlcvToCloses(_0x112704);return _0x81dbe9[_0x372b4e(0x2cb)](_0xbb39c5[_0x2dc7b4][_0x372b4e(0x2c0)]),_0x81dbe9;}function ohlcvToCloses(_0x2f22ee){const _0xef4f18=_0x1aaad5;let _0x5a5b3a=[];return _0x2f22ee[_0xef4f18(0x2f9)](function(_0x1ca8f4){const _0x4a3585=_0xef4f18;_0x5a5b3a[_0x4a3585(0x2cb)](_0x1ca8f4[0x4]);}),_0x5a5b3a;}function oneTimeMigration(){const _0x50d1ff=_0x1aaad5;let _0x604f12=dbLogs[_0x50d1ff(0x2b8)](_0x50d1ff(0x2b2))[_0x50d1ff(0x290)]();if(_0x604f12!=_0x50d1ff(0x1e8)){dbLogs[_0x50d1ff(0x250)]('version','2.3.5')[_0x50d1ff(0x28b)]();let _0x4b8afb=[];const _0xbd3b8c=dbLogs['get'](_0x50d1ff(0x20e))[_0x50d1ff(0x290)]();_0xbd3b8c['forEach'](_0x344e20=>{const _0x4a2c79=_0x50d1ff;_0x4b8afb['push']({'time':_0x344e20[_0x4a2c79(0x2c8)],'type':_0x344e20[_0x4a2c79(0x2ee)],'event':_0x344e20['event']});}),dbLogs[_0x50d1ff(0x2b8)](_0x50d1ff(0x20e))['assign'](_0x4b8afb)['write']();}let _0x587e01=dbConfig[_0x50d1ff(0x2b8)](_0x50d1ff(0x2b2))['value']();if(_0x587e01!=_0x50d1ff(0x1e8)){dbConfig[_0x50d1ff(0x250)]('version',_0x50d1ff(0x1e8))[_0x50d1ff(0x28b)]();let _0x16ab0d=dbConfig[_0x50d1ff(0x2b8)]('bot')[_0x50d1ff(0x2f6)]({'botID':botID})[_0x50d1ff(0x290)]();if(_0x16ab0d){let _0x460310=[];_0x16ab0d[_0x50d1ff(0x2b7)]['forEach'](_0x51c7db=>{const _0x38fd38=_0x50d1ff;_0x460310[_0x38fd38(0x2cb)]({'coin':_0x51c7db['coin'],'number':_0x51c7db['startnumber'],'price':_0x51c7db[_0x38fd38(0x2e1)]}),delete _0x51c7db['startnumber'],delete _0x51c7db[_0x38fd38(0x2e1)];});if(_0x460310[_0x50d1ff(0x20f)]!==0x0)fs[_0x50d1ff(0x296)](configbackuppath+(_0x50d1ff(0x2a2)+botID+_0x50d1ff(0x1e2)),JSON[_0x50d1ff(0x1da)](_0x460310,null,0x4),function(_0x10a39f){if(_0x10a39f){}});const _0x3c0ea0=(_0x582cc9,_0x2b4052)=>{const _0x47e0c8=_0x50d1ff;let _0x2ab068=[];_0x2b4052[_0x47e0c8(0x2f9)](_0x14f8c6=>{const _0x55eab8=_0x47e0c8,_0x52e77e=_0x582cc9[_0x55eab8(0x2f6)](_0x29236b=>_0x29236b[_0x55eab8(0x2a6)]==_0x14f8c6[_0x55eab8(0x2a6)]);if(!_0x52e77e)_0x2ab068[_0x55eab8(0x2cb)](_0x14f8c6);});let _0x80a2f1=[];return _0x582cc9[_0x47e0c8(0x2f9)](_0xb57fb2=>{const _0x366184=_0x47e0c8,_0x2a676e=_0x2b4052[_0x366184(0x2f6)](_0x4576e0=>_0x4576e0[_0x366184(0x2a6)]==_0xb57fb2[_0x366184(0x2a6)]);if(!_0x2a676e||_0x2a676e[_0x366184(0x28e)]==0x0&&_0xb57fb2[_0x366184(0x28e)]!=0x0)_0x80a2f1[_0x366184(0x2cb)](_0xb57fb2);}),{'missingDay1':_0x2ab068,'notInDay2':_0x80a2f1};},_0x57b0ff=dbPerformance[_0x50d1ff(0x2b8)]('data')[_0x50d1ff(0x241)]()[_0x50d1ff(0x290)]();if(_0x57b0ff['length']>0x1){const {missingDay1:_0x54739b,notInDay2:_0x36ce78}=_0x3c0ea0(_0x460310,_0x57b0ff[0x1]['coins']);_0x460310=[..._0x460310,..._0x54739b],_0x36ce78[_0x50d1ff(0x2f9)](_0x4755a5=>{const _0x406fb2=_0x50d1ff;let _0x5353ee=_0x460310['findIndex'](_0x30b87f=>_0x30b87f[_0x406fb2(0x2a6)]==_0x4755a5['coin']);_0x5353ee!=-0x1&&_0x460310['splice'](_0x5353ee,0x1);});}_0x460310['sort']((_0x5ad3a5,_0x314a91)=>_0x5ad3a5[_0x50d1ff(0x2a6)]>_0x314a91[_0x50d1ff(0x2a6)]?0x1:_0x314a91[_0x50d1ff(0x2a6)]>_0x5ad3a5[_0x50d1ff(0x2a6)]?-0x1:0x0);let _0x533a9a=[{'date':_0x16ab0d['startdate'],'changes':_0x460310}];_0x57b0ff['length']>0x2&&_0x57b0ff['forEach']((_0x2f08fd,_0x261d0f)=>{const _0x3450e3=_0x50d1ff;if(_0x261d0f>0x0&&_0x261d0f<_0x57b0ff['length']-0x1){const {missingDay1:_0x22133e,notInDay2:_0x2f8001}=_0x3c0ea0(_0x57b0ff[_0x261d0f][_0x3450e3(0x226)],_0x57b0ff[_0x261d0f+0x1]['coins']);_0x460310=[],(_0x22133e[_0x3450e3(0x20f)]!=0x0||_0x2f8001[_0x3450e3(0x20f)]!=0x0)&&(_0x22133e[_0x3450e3(0x20f)]!=0x0&&_0x460310[_0x3450e3(0x2cb)](..._0x22133e),_0x2f8001[_0x3450e3(0x20f)]!=0x0&&(_0x2f8001[_0x3450e3(0x2f9)](_0x1b23c2=>{const _0x37ee0f=_0x3450e3;_0x1b23c2[_0x37ee0f(0x28e)]=-_0x1b23c2[_0x37ee0f(0x28e)];}),_0x460310['push'](..._0x2f8001)),_0x460310[_0x3450e3(0x2c2)]((_0x590d4e,_0x30c6b8)=>_0x590d4e[_0x3450e3(0x2a6)]>_0x30c6b8[_0x3450e3(0x2a6)]?0x1:_0x30c6b8[_0x3450e3(0x2a6)]>_0x590d4e[_0x3450e3(0x2a6)]?-0x1:0x0),_0x533a9a[_0x3450e3(0x2cb)]({'date':_0x57b0ff[_0x261d0f+0x1]['date'],'changes':_0x460310}));}}),dbConfig['get'](_0x50d1ff(0x220))[_0x50d1ff(0x2f6)]({'botID':botID})[_0x50d1ff(0x246)]({..._0x16ab0d,'liquidity':_0x533a9a})[_0x50d1ff(0x28b)]();}}config=getConfiguration(botID);let _0x5d8a1a=dbPerformance[_0x50d1ff(0x2b8)]('version')[_0x50d1ff(0x290)]();_0x5d8a1a!=_0x50d1ff(0x1e8)&&(dbPerformance[_0x50d1ff(0x250)](_0x50d1ff(0x2b2),_0x50d1ff(0x1e8))[_0x50d1ff(0x28b)](),setStartDatePerformance());let _0x1fa0e1=dbCoinResults['get'](_0x50d1ff(0x2b2))['value']();_0x1fa0e1!=_0x50d1ff(0x1e8)&&dbCoinResults[_0x50d1ff(0x250)](_0x50d1ff(0x2b2),'2.3.5')[_0x50d1ff(0x28b)]();}function getConfiguration(_0x13de74){const _0x5f1671=_0x1aaad5;let _0x2fbd5f=dbConfig[_0x5f1671(0x2b8)](_0x5f1671(0x220))[_0x5f1671(0x2f6)]({'botID':_0x13de74})[_0x5f1671(0x290)]();if(_0x2fbd5f){let _0x52676a=![];typeof _0x2fbd5f[_0x5f1671(0x253)]==_0x5f1671(0x2e9)&&(_0x2fbd5f={..._0x2fbd5f,'threshold':Number(_0x2fbd5f[_0x5f1671(0x253)])},_0x52676a=!![]),_0x2fbd5f[_0x5f1671(0x23e)]==null&&(_0x2fbd5f={..._0x2fbd5f,'change24h':-0x14},_0x52676a=!![]),_0x52676a&&(_0x2fbd5f={'botID':_0x2fbd5f['botID'],'exchange':_0x2fbd5f[_0x5f1671(0x28d)],'apiKey':_0x2fbd5f[_0x5f1671(0x1eb)],'apiSecret':_0x2fbd5f[_0x5f1671(0x23f)],'basecoin':_0x2fbd5f[_0x5f1671(0x23d)],'botname':_0x2fbd5f['botname'],'showname':_0x2fbd5f[_0x5f1671(0x21d)],'threshold':_0x2fbd5f[_0x5f1671(0x253)],'ordertype':_0x2fbd5f[_0x5f1671(0x292)],'timeout':_0x2fbd5f[_0x5f1671(0x297)],'startdate':_0x2fbd5f['startdate'],'recreate':_0x2fbd5f[_0x5f1671(0x2fa)],'timeshift':_0x2fbd5f[_0x5f1671(0x2ba)],'headless':_0x2fbd5f['headless'],'cooldown':_0x2fbd5f[_0x5f1671(0x212)],'change24h':_0x2fbd5f[_0x5f1671(0x23e)],'emojibuy':_0x2fbd5f[_0x5f1671(0x1d8)],'emojisell':_0x2fbd5f[_0x5f1671(0x24b)],'portfolio':_0x2fbd5f[_0x5f1671(0x2b7)],'liquidity':_0x2fbd5f[_0x5f1671(0x1f3)]},dbConfig[_0x5f1671(0x2b8)](_0x5f1671(0x220))[_0x5f1671(0x274)]()[_0x5f1671(0x28b)](),dbConfig['get'](_0x5f1671(0x220))['push'](_0x2fbd5f)[_0x5f1671(0x28b)]());}else _0x2fbd5f={'botID':_0x13de74,'exchange':_0x5f1671(0x21e),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x5f1671(0x269)+_0x13de74,'showname':![],'threshold':0x3,'ordertype':_0x5f1671(0x2d2),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5f1671(0x2ba)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x2fbd5f;}function emittedConfiguration(){const _0x19ba73=_0x1aaad5;let _0x419fa1;return config[_0x19ba73(0x1eb)]==''?_0x419fa1=config:_0x419fa1={...config,'apiKey':_0x19ba73(0x2d9),'apiSecret':'************'},_0x419fa1;}function getSettings(){const _0x15d239=_0x1aaad5;return dbSettings[_0x15d239(0x2b8)](_0x15d239(0x223))[_0x15d239(0x290)]();}function getSecure(){const _0x14b3e1=_0x1aaad5;return dbSecure['get'](_0x14b3e1(0x271))[_0x14b3e1(0x290)]()||{};}function updateTimeshift(_0x130e65){const _0x13e79d=_0x1aaad5;let _0x299a1a=dbConfig['get']('bot')[_0x13e79d(0x2f6)]({'botID':botID})['value']();_0x299a1a&&dbConfig[_0x13e79d(0x2b8)](_0x13e79d(0x220))[_0x13e79d(0x2f6)]({'botID':botID})[_0x13e79d(0x246)]({'timeshift':_0x130e65})[_0x13e79d(0x28b)](),config[_0x13e79d(0x2ba)]=_0x130e65,proxyEmit(_0x13e79d(0x24c),emittedConfiguration());}async function storeConfiguration(_0x108548){const _0x389a06=_0x1aaad5;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x83662d=dbConfig[_0x389a06(0x2b8)](_0x389a06(0x220))['find']({'botID':botID})[_0x389a06(0x290)]();_0x108548={..._0x108548,'apiKey':crypt['decrypt'](secure[_0x389a06(0x1e1)],_0x108548[_0x389a06(0x1eb)])[_0x389a06(0x2da)],'apiSecret':crypt[_0x389a06(0x303)](secure['privateKey'],_0x108548['apiSecret'])[_0x389a06(0x2da)]};if(_0x83662d){if(_0x108548['apiKey']==_0x389a06(0x2d9))_0x108548['apiKey']=config['apiKey'];if(_0x108548['apiSecret']=='************')_0x108548[_0x389a06(0x23f)]=config[_0x389a06(0x23f)];dbConfig[_0x389a06(0x2b8)](_0x389a06(0x220))[_0x389a06(0x2f6)]({'botID':botID})[_0x389a06(0x246)](_0x108548)['write']();}else dbConfig[_0x389a06(0x2b8)]('bot')['push'](_0x108548)['write'](),process[_0x389a06(0x1f8)]({'status':_0x389a06(0x2e8),'live':_0x389a06(0x210)},_0x302334=>{});config={..._0x108548},setStartDatePerformance(),process['send']({'botname':_0x108548[_0x389a06(0x1fd)]},_0x4a5e46=>{});const _0x448be7=getNormalizedPerformance();getStartingBalances(_0x448be7),emitPerformance(_0x448be7),proxyEmit(_0x389a06(0x207)),reset();}async function storeHeadless(_0x21f182){const _0x5004d3=_0x1aaad5,_0x4b51c8={...config,'headless':_0x21f182['headless']};let _0xb7ab3c=dbConfig[_0x5004d3(0x2b8)](_0x5004d3(0x220))[_0x5004d3(0x2f6)]({'botID':botID})[_0x5004d3(0x290)]();_0xb7ab3c&&dbConfig[_0x5004d3(0x2b8)](_0x5004d3(0x220))[_0x5004d3(0x2f6)]({'botID':botID})['assign'](_0x4b51c8)['write'](),config={..._0x4b51c8},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x3952fc){const _0x2d7cc7=_0x1aaad5;return _0x3952fc[_0x2d7cc7(0x2aa)]('/','');}function updateNumberCoins(_0x466188){const _0x1308ef=_0x1aaad5;_0x466188[_0x1308ef(0x2a0)]&&_0x466188[_0x1308ef(0x2a0)]=='outboundAccountPosition'&&_0x466188[_0x1308ef(0x2cd)][_0x1308ef(0x2f9)](_0x3dfa25=>{const _0x430fc4=_0x1308ef;let _0x4336dc=currentCoins[_0x430fc4(0x2f6)](_0x7cf00=>_0x7cf00['coin']==_0x3dfa25[_0x430fc4(0x203)]),_0x36707c=config[_0x430fc4(0x2b7)][_0x430fc4(0x2f6)](_0x47d494=>_0x47d494['coin']==_0x3dfa25[_0x430fc4(0x203)]);if(_0x4336dc&&_0x36707c)_0x4336dc[_0x430fc4(0x28e)]=Math[_0x430fc4(0x2ed)](Number(_0x3dfa25[_0x430fc4(0x206)])+(_0x36707c[_0x430fc4(0x291)]||0x0),0x0);});if(_0x466188[_0x1308ef(0x2a0)]&&_0x466188['eventType']=='executionReport'){if(_0x466188[_0x1308ef(0x214)]=='LIMIT'&&_0x466188['orderStatus']==_0x1308ef(0x1f7)){if(lastOrders)lastOrders['forEach'](_0xad0ce5=>{const _0x1743b3=_0x1308ef;if(_0xad0ce5[_0x1743b3(0x25f)]==_0x466188[_0x1743b3(0x25f)]){if(_0xad0ce5[_0x1743b3(0x2f5)])_0xad0ce5['filled']=_0x466188[_0x1743b3(0x270)]*_0xad0ce5['price'];else _0xad0ce5[_0x1743b3(0x237)]=_0x466188[_0x1743b3(0x270)];}});}}}async function getCoins(_0x13e745=!![],_0x2e0c20=config[_0x1aaad5(0x23d)]){const _0x5590e8=_0x1aaad5;let _0x4122b6,_0x38c643=[],_0x353b1e=[],_0x25d84f=[];try{_0x4122b6=await exchange[_0x5590e8(0x222)](),mybalances=_0x4122b6['total'];if(!_0x13e745)for(const [_0x5be9d5,_0x57707e]of Object['entries'](mybalances)){_0x25d84f[_0x5590e8(0x2cb)](_0x5be9d5);}else config[_0x5590e8(0x2b7)]['forEach'](_0x2f8540=>{const _0x591bc8=_0x5590e8;if(!_0x2f8540['excluded'])_0x25d84f[_0x591bc8(0x2cb)](_0x2f8540[_0x591bc8(0x2a6)]);});if(_0x2e0c20=='')for(const [_0x5ccd1e,_0x4fa120]of Object['entries'](mybalances)){_0x4fa120['toString']()!=0x0&&_0x353b1e[_0x5590e8(0x2cb)]({'coin':_0x5ccd1e});}else for(const [_0xeffbde,_0x591751]of Object[_0x5590e8(0x204)](mybalances)){if(_0x25d84f['includes'](_0xeffbde)){const _0x2ab0b5=config[_0x5590e8(0x2b7)][_0x5590e8(0x2f6)](_0x19983e=>_0x19983e['coin']==_0xeffbde);if((_0x591751['toString']()!=0x0||_0x2ab0b5)&&(allSymbols['includes'](_0xeffbde+'/'+_0x2e0c20)||_0xeffbde==_0x2e0c20))_0x353b1e[_0x5590e8(0x2cb)]({'coin':_0xeffbde,'symbol':_0xeffbde+'/'+_0x2e0c20,'reverse':![],'number':Math['max'](_0x591751+(_0x2ab0b5&&_0x2ab0b5[_0x5590e8(0x291)]||0x0),0x0)}),_0xeffbde!=_0x2e0c20&&_0x38c643[_0x5590e8(0x2cb)](_0xeffbde+'/'+_0x2e0c20);else(_0x591751['toString']()!=0x0||_0x2ab0b5)&&allSymbols[_0x5590e8(0x21b)](_0x2e0c20+'/'+_0xeffbde)&&(_0x353b1e['push']({'coin':_0xeffbde,'symbol':_0x2e0c20+'/'+_0xeffbde,'reverse':!![],'number':Math[_0x5590e8(0x2ed)](_0x591751+(_0x2ab0b5&&_0x2ab0b5[_0x5590e8(0x291)]||0x0),0x0)}),_0xeffbde!=_0x2e0c20&&_0x38c643['push'](_0x2e0c20+'/'+_0xeffbde));}}}catch(_0x2b4345){if(!_0x13e745){if(_0x2b4345[_0x5590e8(0x22e)]()[_0x5590e8(0x21b)](_0x5590e8(0x298)))return logHistory(_0x5590e8(0x2ad),_0x5590e8(0x2be)),![];else{if(_0x2b4345[_0x5590e8(0x22e)]()['includes'](_0x5590e8(0x1ec)))return logHistory(_0x5590e8(0x2ad),_0x5590e8(0x27f)),![];else{if(_0x2b4345[_0x5590e8(0x22e)]()[_0x5590e8(0x21b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x5590e8(0x2ad),_0x5590e8(0x2cc)),![];else await handleError(_0x2b4345,_0x5590e8(0x2b5));}}}else await handleError(_0x2b4345,_0x5590e8(0x2b5));}return _0x353b1e;}async function getPortfolio(_0x233d26){const _0x550032=_0x1aaad5;let _0x52ce96=[],_0x5c29d3=[],_0x3169fd,_0x5a0301=[],_0x3010cd,_0x12adc4;_0x233d26[_0x550032(0x1eb)]===_0x550032(0x2d9)||_0x233d26[_0x550032(0x23f)]===_0x550032(0x2d9)?(_0x3010cd=config[_0x550032(0x1eb)],_0x12adc4=config[_0x550032(0x23f)]):(_0x3010cd=_0x233d26[_0x550032(0x1eb)],_0x12adc4=_0x233d26[_0x550032(0x23f)]);await initExchange(_0x3010cd,_0x12adc4);let _0x2ec3e6=await loadSymbols();if(_0x2ec3e6){_0x5a0301=await getCoins(![],_0x233d26['basecoin']);if(_0x5a0301===![])proxyEmit(_0x550032(0x2b7),![]);else{if(_0x233d26[_0x550032(0x23d)]=='')proxyEmit(_0x550032(0x2b7),_0x5a0301);else{_0x5a0301['forEach'](_0x4fdcc8=>{const _0xebecb9=_0x550032;_0x52ce96['push'](_0x4fdcc8[_0xebecb9(0x2c1)]);});try{_0x5c29d3=await exchange[_0x550032(0x2e7)](_0x52ce96);}catch(_0x3fcabe){await handleError(_0x3fcabe,_0x550032(0x2f3));}_0x5a0301['forEach'](_0x19d666=>{const _0x5bc719=_0x550032;_0x19d666['coin']!=_0x233d26['basecoin']?_0x3169fd=_0x19d666['reverse']?0x1/_0x5c29d3[_0x19d666['symbol']][_0x5bc719(0x2c0)]:_0x5c29d3[_0x19d666[_0x5bc719(0x2c1)]][_0x5bc719(0x2c0)]:_0x3169fd=0x1,_0x19d666[_0x5bc719(0x282)]=formatResult(_0x3169fd,0x8);}),proxyEmit('portfolio',_0x5a0301);}}}else proxyEmit(_0x550032(0x2b7),![]);}function checkMinimums(_0x4abe66){const _0x20e67d=_0x1aaad5;let _0x4ce864=!![];const _0x174c79=!_0x4abe66['reverse']?markets[_0x4abe66['symbol']]['limits']['amount'][_0x20e67d(0x2c4)]:markets[_0x4abe66['symbol']][_0x20e67d(0x2e4)][_0x20e67d(0x1ed)][_0x20e67d(0x2c4)],_0x352f90=!_0x4abe66['reverse']?markets[_0x4abe66[_0x20e67d(0x2c1)]]['limits'][_0x20e67d(0x1ed)]['min']:markets[_0x4abe66[_0x20e67d(0x2c1)]][_0x20e67d(0x2e4)][_0x20e67d(0x245)]['min'];if(Math[_0x20e67d(0x2d4)](_0x4abe66[_0x20e67d(0x2f2)])<_0x174c79)_0x4ce864=![];if(Math['abs'](_0x4abe66[_0x20e67d(0x2f2)])*_0x4abe66[_0x20e67d(0x2c0)]<_0x352f90)_0x4ce864=![];if(_0x4abe66[_0x20e67d(0x2a9)]==_0x20e67d(0x263)){let _0x5015cd=config[_0x20e67d(0x2b7)][_0x20e67d(0x2f6)](_0x434cea=>_0x434cea[_0x20e67d(0x2a6)]==_0x4abe66[_0x20e67d(0x2a6)]);if(Math['abs'](_0x4abe66[_0x20e67d(0x2f2)])>_0x4abe66['number']-_0x5015cd[_0x20e67d(0x291)])_0x4ce864=![];}return _0x4ce864;}async function getBalances(){const _0x5d85a7=_0x1aaad5;let _0x24827f=0x0,_0x17c1ff;const _0x5d2ccb=config[_0x5d85a7(0x253)];if(config[_0x5d85a7(0x248)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x23b346=>{const _0xbdf7b7=_0x5d85a7;if(_0x23b346[_0xbdf7b7(0x2a6)]!=config[_0xbdf7b7(0x23d)]){let _0x555b70=global[_0xbdf7b7(0x238)][noslash(_0x23b346[_0xbdf7b7(0x2c1)])];_0x17c1ff=_0x23b346[_0xbdf7b7(0x2f5)]?0x1/_0x555b70:_0x555b70;}else _0x17c1ff=0x1;let _0x527a2c=_0x23b346[_0xbdf7b7(0x28e)]*_0x17c1ff;_0x24827f+=_0x527a2c,_0x23b346[_0xbdf7b7(0x2c0)]=formatResult(Number(_0x17c1ff),0x8),_0x23b346[_0xbdf7b7(0x290)]=_0x527a2c;}),currentCoins[_0x5d85a7(0x2f9)](_0x2859f3=>{const _0x1ba13d=_0x5d85a7;let _0xdee2e3=config[_0x1ba13d(0x2b7)][_0x1ba13d(0x2f6)](_0x4f376f=>_0x4f376f[_0x1ba13d(0x2a6)]==_0x2859f3[_0x1ba13d(0x2a6)]),_0x2d4547=Number(_0xdee2e3['distribution']),_0xecaad1=_0x2859f3[_0x1ba13d(0x290)]/_0x24827f*0x64,_0x5dea23=_0x2d4547*_0x24827f/0x64/_0x2859f3[_0x1ba13d(0x2c0)]-_0x2859f3[_0x1ba13d(0x28e)];_0x2859f3['distribution']=formatResult(_0xecaad1,0x3),_0x2859f3['target']=formatResult(_0x2d4547,0x3),_0x2859f3[_0x1ba13d(0x2f2)]=formatResult(_0x5dea23,0x8),_0x2859f3[_0x1ba13d(0x2a9)]='',_0x2859f3[_0x1ba13d(0x286)]=![];if(_0x2859f3[_0x1ba13d(0x2a6)]!=config['basecoin']){if(_0x2859f3[_0x1ba13d(0x23c)]>_0x2d4547)_0x2859f3[_0x1ba13d(0x2a9)]=_0x1ba13d(0x263),_0x2859f3['valid']=checkMinimums(_0x2859f3);else _0x2859f3[_0x1ba13d(0x23c)]<_0x2d4547&&(_0x2859f3[_0x1ba13d(0x2a9)]='buy',_0x2859f3[_0x1ba13d(0x286)]=checkMinimums(_0x2859f3));}_0x2859f3[_0x1ba13d(0x2bd)]=_0x2859f3[_0x1ba13d(0x23c)]/_0x2859f3[_0x1ba13d(0x255)]-0x1;}),currentCoins[_0x5d85a7(0x2c2)]((_0x375502,_0x58566c)=>_0x375502[_0x5d85a7(0x2bd)]<_0x58566c[_0x5d85a7(0x2bd)]?0x1:_0x58566c[_0x5d85a7(0x2bd)]<_0x375502[_0x5d85a7(0x2bd)]?-0x1:0x0);const _0x4160f0=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4160f0[_0x5d85a7(0x22c)],'usd':_0x4160f0[_0x5d85a7(0x2cf)],'portfolio':JSON[_0x5d85a7(0x1da)](currentCoins),'threshold':_0x5d2ccb},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5d85a7(0x248)])headlessMode({'portfolio':currentCoins,'threshold':_0x5d2ccb});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x5d2ccb});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x33dc95=_0x1aaad5;if(!lastBalances)return;let _0x2a0b38=[],_0x526a39,_0x15babe=JSON['parse'](lastBalances[_0x33dc95(0x2b7)]);_0x15babe[_0x33dc95(0x2c2)]((_0x47115a,_0x209bf3)=>_0x47115a[_0x33dc95(0x2a6)]>_0x209bf3[_0x33dc95(0x2a6)]?0x1:_0x209bf3[_0x33dc95(0x2a6)]>_0x47115a[_0x33dc95(0x2a6)]?-0x1:0x0),_0x15babe['forEach'](_0x259c14=>{const _0x49b841=_0x33dc95;let _0x137293={'coin':_0x259c14[_0x49b841(0x2a6)],'number':_0x259c14[_0x49b841(0x28e)],'price':_0x259c14[_0x49b841(0x2c0)]};_0x2a0b38[_0x49b841(0x2cb)](_0x137293);});const _0x15f1b1=await getFiat();_0x526a39={'date':lastBalances[_0x33dc95(0x2c8)][_0x33dc95(0x252)]('\x20')[0x0],'eur':_0x15f1b1['eur'],'usd':_0x15f1b1[_0x33dc95(0x2cf)],'coins':_0x2a0b38};let _0x17506c=dbPerformance['get']('data')['find']({'date':_0x526a39[_0x33dc95(0x304)]})[_0x33dc95(0x290)]();_0x17506c?_0x526a39['date']!=config[_0x33dc95(0x283)]&&dbPerformance[_0x33dc95(0x2b8)](_0x33dc95(0x243))['find']({'date':_0x526a39[_0x33dc95(0x304)]})['assign'](_0x526a39)[_0x33dc95(0x28b)]():dbPerformance[_0x33dc95(0x2b8)](_0x33dc95(0x243))[_0x33dc95(0x2cb)](_0x526a39)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xf6747=_0x1aaad5;let _0x347152=[];if(dbPerformance[_0xf6747(0x2e5)]('data')[_0xf6747(0x290)]()){let _0x296ca7=dbPerformance[_0xf6747(0x2b8)]('data')[_0xf6747(0x241)]()[_0xf6747(0x24e)](_0xf6747(0x304))[_0xf6747(0x290)](),_0x1b717d=[...config[_0xf6747(0x1f3)]];_0x1b717d['sort']((_0x21c5cf,_0x1e0dbc)=>_0x21c5cf[_0xf6747(0x304)]>_0x1e0dbc[_0xf6747(0x304)]?-0x1:_0x1e0dbc[_0xf6747(0x304)]>_0x21c5cf['date']?0x1:0x0);let _0x5416f3=0x1,_0x57dcb3=[],_0x59f94a=0x0;_0x296ca7[_0xf6747(0x217)]()[_0xf6747(0x2f5)]()[_0xf6747(0x2f9)]((_0x3ba2fd,_0x12fd2c)=>{const _0x51041b=_0xf6747;if(_0x1b717d[_0x59f94a]){if(_0x296ca7[_0x296ca7[_0x51041b(0x20f)]-_0x12fd2c]&&_0x1b717d[_0x59f94a][_0x51041b(0x304)]==_0x296ca7[_0x296ca7['length']-_0x12fd2c]['date']){if(_0x12fd2c<_0x296ca7[_0x51041b(0x20f)]){let _0x3a8cd7=0x0,_0x15405c=0x0;_0x296ca7[_0x296ca7['length']-_0x12fd2c]['coins'][_0x51041b(0x2f9)](_0x2204da=>{const _0xbee123=_0x51041b;_0x15405c+=_0x2204da[_0xbee123(0x28e)]*_0x2204da[_0xbee123(0x282)];}),_0x1b717d[_0x59f94a]['changes']['forEach'](_0x17cbef=>{const _0x54712d=_0x51041b;_0x3a8cd7+=_0x17cbef[_0x54712d(0x28e)]*_0x17cbef[_0x54712d(0x282)];}),_0x5416f3*=_0x3a8cd7/(_0x15405c-_0x3a8cd7)+0x1;}_0x59f94a++;}}let _0x3142df=0x0;_0x3ba2fd[_0x51041b(0x226)][_0x51041b(0x2f9)](_0x47f9a7=>{const _0x5c041d=_0x51041b;_0x3142df+=_0x47f9a7[_0x5c041d(0x28e)]*_0x47f9a7[_0x5c041d(0x282)];}),_0x57dcb3[_0x296ca7['length']-_0x12fd2c-0x1]=_0x3142df*(_0x5416f3-0x1);});let _0x3f68a4=[];_0x1b717d=[...config[_0xf6747(0x1f3)]]||[];let _0x5046dd=0x0;_0x59f94a=0x0,_0x296ca7['forEach']((_0x597452,_0x54b0ae)=>{const _0x5b2744=_0xf6747;if(_0x1b717d[_0x59f94a]){const _0x1b86c5=fns[_0x5b2744(0x1f9)](_0x1b717d[_0x59f94a][_0x5b2744(0x304)],_0x5b2744(0x202),new Date()),_0x56de8f=fns[_0x5b2744(0x1f9)](_0x597452['date'],_0x5b2744(0x202),new Date());if(fns[_0x5b2744(0x27b)](_0x1b86c5,_0x56de8f)){let _0x53ad29=0x0;_0x1b717d[_0x59f94a]['changes']['forEach'](_0x43dd11=>{const _0x831350=_0x5b2744;!_0x3f68a4[_0x43dd11['coin']]?_0x3f68a4[_0x43dd11['coin']]=_0x43dd11['number']:(_0x53ad29=_0x3f68a4[_0x43dd11[_0x831350(0x2a6)]],_0x3f68a4[_0x43dd11['coin']]+=_0x43dd11[_0x831350(0x28e)]);const _0x1c0b16=_0x597452[_0x831350(0x226)][_0x831350(0x2f6)](_0x4a45bf=>_0x4a45bf[_0x831350(0x2a6)]==_0x43dd11['coin']);(!_0x1c0b16||_0x1c0b16[_0x831350(0x28e)]==0x0)&&(_0x5046dd+=(-_0x43dd11['number']-_0x53ad29)*_0x43dd11[_0x831350(0x282)]);}),_0x59f94a++;}}_0x597452['coins']['forEach']((_0x4dbd69,_0x21d72e)=>{const _0x9b3256=_0x5b2744;_0x3f68a4[_0x4dbd69[_0x9b3256(0x2a6)]]&&(_0x4dbd69={..._0x4dbd69,'initial':_0x3f68a4[_0x4dbd69[_0x9b3256(0x2a6)]]}),_0x597452[_0x9b3256(0x226)][_0x21d72e]=_0x4dbd69;}),_0x347152[_0x5b2744(0x2cb)]({'date':_0x597452[_0x5b2744(0x304)],'eur':_0x597452['eur'],'usd':_0x597452[_0x5b2744(0x2cf)],'offset':_0x57dcb3[_0x54b0ae],'netoffset':_0x5046dd,'coins':_0x597452['coins']});});}return _0x347152;}function emitPerformance(_0x91062c){const _0x366118=_0x1aaad5;_0x91062c[_0x366118(0x20f)]!==0x0?(proxyEmit(_0x366118(0x1e0),_0x91062c),lastPerformanceEmitted=getDate()):proxyEmit(_0x366118(0x1e0),[]);}function getPerf(_0x2a2f03,_0xe08440){const _0xc98102=_0x1aaad5;let _0x7cf81e=0x0,_0x20c02c=0x0,_0x50b94c=0x0;_0x2a2f03[_0xc98102(0x226)][_0xc98102(0x2f9)](_0x3a760d=>{const _0x72b0bb=_0xc98102;_0x7cf81e+=_0x3a760d[_0x72b0bb(0x28e)]*_0x3a760d[_0x72b0bb(0x282)];});_0xe08440&&(_0x7cf81e+=_0x2a2f03[_0xc98102(0x291)]);if(config[_0xc98102(0x23d)]===_0xc98102(0x231))_0x20c02c=_0x7cf81e*_0x2a2f03['eur'],_0x50b94c=_0x7cf81e*_0x2a2f03[_0xc98102(0x2cf)];else{if(config[_0xc98102(0x23d)]==='BUSD'||config[_0xc98102(0x23d)]===_0xc98102(0x247)||config[_0xc98102(0x23d)]==='USDC')_0x20c02c=_0x7cf81e*_0x2a2f03['eur']/_0x2a2f03['usd'],_0x50b94c=_0x7cf81e;else config[_0xc98102(0x23d)]===_0xc98102(0x24d)&&(_0x20c02c=_0x7cf81e,_0x50b94c=_0x7cf81e*_0x2a2f03[_0xc98102(0x2cf)]/_0x2a2f03[_0xc98102(0x22c)]);}return[_0x7cf81e,_0x20c02c,_0x50b94c];}async function getStartingBalances(_0x2490ea,_0x294e54=!![]){const _0x41c137=_0x1aaad5;if(_0x2490ea['length']!==0x0){const [_0xdec234,_0x2c9c90,_0x3aa961]=getPerf(_0x2490ea[0x0],!![]);let _0x1dcdaf=[];config[_0x41c137(0x2b7)][_0x41c137(0x2f9)](_0x5f19c4=>{const _0x47964f=_0x41c137;let _0x4ff668=0x0;config[_0x47964f(0x1f3)][_0x47964f(0x2f9)](_0x5abd66=>{const _0x2d340d=_0x47964f;let _0x11a705=_0x5abd66[_0x2d340d(0x277)]['find'](_0x1f6762=>_0x1f6762[_0x2d340d(0x2a6)]==_0x5f19c4[_0x2d340d(0x2a6)]);if(_0x11a705)_0x4ff668+=_0x11a705[_0x2d340d(0x28e)];}),_0x1dcdaf[_0x47964f(0x2cb)]({'coin':_0x5f19c4['coin'],'number':_0x4ff668,'price':_0x5f19c4['price']});});const _0x197550={'basecoin':_0xdec234,'eur':_0x2c9c90,'usd':_0x3aa961,'coins':_0x1dcdaf};if(_0x294e54)proxyEmit('starting-balances',_0x197550);return _0x197550;}}function headlessMode(_0x402a43){const _0x2fcec3=_0x1aaad5;let _0x2f47ba=_0x402a43[_0x2fcec3(0x2b7)],_0x824342=_0x402a43[_0x2fcec3(0x253)],_0x8fc11b=[];for(let _0x273f94 of _0x2f47ba){if(_0x273f94[_0x2fcec3(0x2a6)]!=config[_0x2fcec3(0x23d)]){if(_0x273f94[_0x2fcec3(0x23c)]/_0x273f94['target']-0x1>=_0x824342/0x64){if(_0x273f94[_0x2fcec3(0x286)])_0x8fc11b[_0x2fcec3(0x2cb)](_0x273f94);}else{if(_0x273f94['distribution']/_0x273f94[_0x2fcec3(0x255)]-0x1<=-_0x824342/0x64){if(_0x273f94[_0x2fcec3(0x286)])_0x8fc11b[_0x2fcec3(0x2cb)](_0x273f94);}}}}_0x8fc11b['length']>0x0&&placeOrder(_0x8fc11b);}function notifyBalance(_0x110aec){const _0x29dbdc=_0x1aaad5;let _0x5b0ae8=_0x110aec[_0x29dbdc(0x2b7)],_0x1fb18c=_0x110aec[_0x29dbdc(0x253)],_0x341827=[];for(let _0x500eec of _0x5b0ae8){if(_0x500eec['coin']!=config['basecoin']){if(_0x500eec['distribution']/_0x500eec[_0x29dbdc(0x255)]-0x1>=_0x1fb18c/0x64){if(_0x500eec[_0x29dbdc(0x286)])_0x341827['push'](_0x500eec);}else{if(_0x500eec[_0x29dbdc(0x23c)]/_0x500eec[_0x29dbdc(0x255)]-0x1<=-_0x1fb18c/0x64){if(_0x500eec[_0x29dbdc(0x286)])_0x341827[_0x29dbdc(0x2cb)](_0x500eec);}}}}if(_0x341827[_0x29dbdc(0x20f)]>0x0){let _0x483412=_0x341827[_0x29dbdc(0x27d)](_0x335e63=>_0x335e63[_0x29dbdc(0x2a6)]);_0x483412[_0x29dbdc(0x2c2)]();let _0x58407c=_0x483412['join'](',\x20');if(lastCoinsToBalance!==_0x58407c)logHistory(_0x29dbdc(0x2f0),_0x29dbdc(0x24a)+_0x58407c);lastCoinsToBalance=_0x58407c;}}function symbolToCoin(_0x22d6f3){const _0x2bc40c=_0x1aaad5;let _0x2b0c60;if(_0x22d6f3[_0x2bc40c(0x21b)]('/'+config[_0x2bc40c(0x23d)]))_0x2b0c60=_0x22d6f3[_0x2bc40c(0x2aa)]('/'+config[_0x2bc40c(0x23d)],'');if(_0x22d6f3[_0x2bc40c(0x21b)](config[_0x2bc40c(0x23d)]+'/'))_0x2b0c60=_0x22d6f3[_0x2bc40c(0x2aa)](config[_0x2bc40c(0x23d)]+'/','');return _0x2b0c60;}async function validateOrders(_0x93a5c=0x0){const _0x43e9cb=_0x1aaad5;let _0x7ac7ad=[],_0x1f5c8a=config['ordertype']==_0x43e9cb(0x2d2)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x43e9cb(0x297)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x5d7d06=>{const _0x47f33d=_0x43e9cb;let _0x8f6a65=previousCoins[_0x47f33d(0x2f6)](_0x39709b=>_0x39709b['coin']==symbolToCoin(_0x5d7d06[_0x47f33d(0x2c1)])),_0x26fb4d=currentCoins[_0x47f33d(0x2f6)](_0x52d2b6=>_0x52d2b6['coin']==symbolToCoin(_0x5d7d06[_0x47f33d(0x2c1)])),_0x1f9ce4,_0x38234a;_0x5d7d06['side']==_0x47f33d(0x2ca)&&!_0x5d7d06[_0x47f33d(0x2f5)]||_0x5d7d06['side']==_0x47f33d(0x263)&&_0x5d7d06[_0x47f33d(0x2f5)]?(_0x1f9ce4=_0x8f6a65[_0x47f33d(0x28e)]+0.9*_0x5d7d06[_0x47f33d(0x237)],_0x38234a=_0x8f6a65[_0x47f33d(0x28e)]+1.1*_0x5d7d06['filled']):(_0x1f9ce4=_0x8f6a65[_0x47f33d(0x28e)]-1.1*_0x5d7d06['filled'],_0x38234a=_0x8f6a65[_0x47f33d(0x28e)]-0.9*_0x5d7d06[_0x47f33d(0x237)]);const _0x2fd950=_0x5d7d06['filled']!=0x0&&_0x26fb4d[_0x47f33d(0x28e)]>=_0x1f9ce4&&_0x26fb4d[_0x47f33d(0x28e)]<=_0x38234a;_0x7ac7ad['push'](_0x2fd950);if(_0x2fd950&&config['ordertype']!=_0x47f33d(0x2d2)){if(_0x5d7d06[_0x47f33d(0x2f5)])logHistory(_0x47f33d(0x2e3),_0x47f33d(0x25d)+_0x5d7d06[_0x47f33d(0x2c1)]+'\x20'+_0x5d7d06[_0x47f33d(0x2a9)]+'\x20#'+formatResult(_0x5d7d06[_0x47f33d(0x237)]/_0x5d7d06['price'],0x8)+'\x20@'+formatResult(_0x5d7d06['price'],0x8));else logHistory(_0x47f33d(0x2e3),_0x47f33d(0x25d)+_0x5d7d06[_0x47f33d(0x2c1)]+'\x20'+_0x5d7d06[_0x47f33d(0x2a9)]+'\x20#'+formatResult(_0x5d7d06['filled'],0x8)+'\x20@'+formatResult(_0x5d7d06['price'],0x8));}}),_0x7ac7ad['forEach']((_0x1e327e,_0x5694b4)=>{const _0x5ed661=_0x43e9cb;if(_0x1e327e)lastOrders[_0x5ed661(0x254)](_0x5694b4,0x1);});if(_0x93a5c<_0x1f5c8a&&_0x7ac7ad[_0x43e9cb(0x21b)](![])){if(_0x93a5c==0x0){config['ordertype']==_0x43e9cb(0x2d2)?logHistory(_0x43e9cb(0x2ad),_0x43e9cb(0x267)):logHistory('error',_0x43e9cb(0x1fb));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x93a5c);},0xa*0x3e8);}else{(_0x93a5c==0x1||_0x93a5c==Math[_0x43e9cb(0x1ee)](_0x1f5c8a/0x2)||_0x93a5c==_0x1f5c8a-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x93a5c);},validateOrderInterval);}}else{lockOrders=![];if(_0x93a5c>0x0&&!_0x7ac7ad[_0x43e9cb(0x21b)](![]))config['ordertype']=='market'?logHistory(_0x43e9cb(0x2f0),_0x43e9cb(0x257)):logHistory(_0x43e9cb(0x2f0),_0x43e9cb(0x1de));else _0x93a5c>0x0&&_0x7ac7ad[_0x43e9cb(0x21b)](![])&&(config[_0x43e9cb(0x292)]=='market'?logHistory(_0x43e9cb(0x2f0),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x43e9cb(0x1ee)](_0x1f5c8a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x43e9cb(0x2f9)](async _0x3164ad=>{const _0x365bf9=_0x43e9cb;try{const _0x54fa13=await exchange[_0x365bf9(0x289)](_0x3164ad[_0x365bf9(0x25f)],_0x3164ad['symbol']);}catch(_0x232b52){if(_0x232b52[_0x365bf9(0x22e)]()[_0x365bf9(0x21b)](_0x365bf9(0x26a))){}else await handleError(_0x232b52,_0x365bf9(0x279));}}),logHistory(_0x43e9cb(0x2f0),_0x43e9cb(0x232)+Math[_0x43e9cb(0x1ee)](_0x1f5c8a*validateOrderInterval/0xea60)+_0x43e9cb(0x2af))));}}async function resetCoinResults(){const _0x110f47=_0x1aaad5;dbCoinResults['get'](_0x110f47(0x226))[_0x110f47(0x274)]()['write']();let _0x56bfa7=await getStartingBalances(getNormalizedPerformance(),![]);_0x56bfa7[_0x110f47(0x226)][_0x110f47(0x2f9)](_0x599917=>{const _0x33f067=_0x110f47;if(_0x599917[_0x33f067(0x2a6)]!=config['basecoin']){let _0x218993={'coin':_0x599917[_0x33f067(0x2a6)],'number':_0x599917[_0x33f067(0x28e)],'breakeven':_0x599917[_0x33f067(0x282)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x33f067(0x2b8)](_0x33f067(0x226))['push'](_0x218993)[_0x33f067(0x28b)]();}});}async function updateCoinResults(_0x386839){const _0x2bd7f6=_0x1aaad5;let _0x3e2e,_0x3eed6b,_0xea0119,_0x41c604,_0x501b2c,_0xb206e6,_0x1d8400=dbCoinResults['get'](_0x2bd7f6(0x226))[_0x2bd7f6(0x2f6)]({'coin':_0x386839[_0x2bd7f6(0x2a6)]})[_0x2bd7f6(0x290)]();if(!_0x1d8400)return;if(_0x386839[_0x2bd7f6(0x26f)]&&_0x386839[_0x2bd7f6(0x26f)][_0x2bd7f6(0x272)]==config[_0x2bd7f6(0x23d)])_0x3e2e=_0x386839['fee']['cost'];else{if(_0x386839[_0x2bd7f6(0x26f)]&&_0x386839['fee'][_0x2bd7f6(0x272)]=='BNB')_0x3e2e=_0x386839[_0x2bd7f6(0x26f)]['cost']*global['ticker']['BNB'+config['basecoin']];else _0x3e2e=0.001*_0x386839[_0x2bd7f6(0x237)];}const _0xd6bdff=_0x386839['symbol'][_0x2bd7f6(0x21b)](config['basecoin']+'/');_0xd6bdff&&(_0xb206e6={'coin':_0x386839[_0x2bd7f6(0x2a6)],'symbol':_0x386839[_0x2bd7f6(0x2c1)],'filled':_0x386839[_0x2bd7f6(0x237)]*_0x386839['price'],'side':_0x386839[_0x2bd7f6(0x2a9)]==_0x2bd7f6(0x263)?'buy':'sell','price':0x1/_0x386839[_0x2bd7f6(0x282)]},_0x386839={..._0xb206e6});_0x386839['side']==_0x2bd7f6(0x2ca)?_0xea0119=(_0x1d8400[_0x2bd7f6(0x29d)]*_0x1d8400['number']+_0x386839[_0x2bd7f6(0x282)]*_0x386839['filled'])/(_0x1d8400[_0x2bd7f6(0x28e)]+_0x386839[_0x2bd7f6(0x237)]):_0xea0119=(_0x1d8400[_0x2bd7f6(0x29d)]*_0x1d8400[_0x2bd7f6(0x28e)]-_0x386839[_0x2bd7f6(0x282)]*_0x386839[_0x2bd7f6(0x237)])/(_0x1d8400[_0x2bd7f6(0x28e)]-_0x386839['filled']);_0x386839['side']==_0x2bd7f6(0x2ca)?_0x41c604=_0x1d8400['realized']:_0x41c604=_0x1d8400[_0x2bd7f6(0x225)]+(_0x386839['price']-_0x1d8400['breakeven'])*_0x386839[_0x2bd7f6(0x237)];_0x3eed6b=_0x386839[_0x2bd7f6(0x2a9)]==_0x2bd7f6(0x263)?_0x1d8400['number']-_0x386839[_0x2bd7f6(0x237)]:_0x1d8400[_0x2bd7f6(0x28e)]+_0x386839[_0x2bd7f6(0x237)],_0x501b2c=(_0x386839[_0x2bd7f6(0x282)]-_0xea0119)*_0x3eed6b;let _0x430d16={'coin':_0x386839[_0x2bd7f6(0x2a6)],'number':_0x3eed6b,'breakeven':formatResult(_0xea0119,0x8),'realized':formatResult(_0x41c604,0x8),'unrealized':formatResult(_0x501b2c,0x8),'fees':formatResult(_0x1d8400[_0x2bd7f6(0x235)]+_0x3e2e,0x8),'sells':_0x386839[_0x2bd7f6(0x2a9)]==_0x2bd7f6(0x263)?_0x1d8400['sells']+0x1:_0x1d8400[_0x2bd7f6(0x1e6)],'buys':_0x386839[_0x2bd7f6(0x2a9)]==_0x2bd7f6(0x2ca)?_0x1d8400[_0x2bd7f6(0x268)]+0x1:_0x1d8400['buys']};dbCoinResults[_0x2bd7f6(0x2b8)]('coins')['find']({'coin':_0x386839['coin']})[_0x2bd7f6(0x246)](_0x430d16)[_0x2bd7f6(0x28b)]();}async function placeOrder(_0x2e9e6e){const _0x34d039=_0x1aaad5,_0x2eaeef=config[_0x34d039(0x292)]==_0x34d039(0x2d2)?_0x34d039(0x2d2):_0x34d039(0x258);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x34d039(0x1f9)](JSON[_0x34d039(0x1da)](currentCoins));for(const _0x3e5add of _0x2e9e6e){let _0x2a56a4,_0x1b2fc0,_0xa2fe,_0x89ea3e,_0x234bb2,_0x6ca005=_0x3e5add['symbol'];try{const _0x22fa9d=await exchange[_0x34d039(0x2e7)](_0x6ca005),_0x1aac8e=_0x22fa9d[_0x6ca005];_0x2a56a4=_0x3e5add[_0x34d039(0x2f5)]?0x1/_0x3e5add[_0x34d039(0x2c0)]:_0x3e5add[_0x34d039(0x2c0)],_0x1b2fc0=_0x1aac8e[_0x34d039(0x1f4)],_0xa2fe=_0x1aac8e[_0x34d039(0x1fa)];_0x3e5add[_0x34d039(0x2f5)]?(_0x89ea3e=_0x3e5add[_0x34d039(0x2a9)]==_0x34d039(0x2ca)?_0x34d039(0x263):_0x34d039(0x2ca),_0x234bb2=Math[_0x34d039(0x2d4)](_0x3e5add[_0x34d039(0x2f2)])/_0x2a56a4):(_0x89ea3e=_0x3e5add[_0x34d039(0x2a9)],_0x234bb2=Math[_0x34d039(0x2d4)](_0x3e5add[_0x34d039(0x2f2)]));_0x2eaeef=='limit'&&(config['ordertype']==_0x34d039(0x2fc)&&(_0x2a56a4=_0x89ea3e==_0x34d039(0x2ca)?_0x1b2fc0:_0xa2fe),config['ordertype']==_0x34d039(0x2b4)&&(_0x2a56a4=_0x89ea3e==_0x34d039(0x2ca)?_0xa2fe:_0x1b2fc0));_0x234bb2=formatResult(_0x234bb2,0x8),_0x2a56a4=formatResult(_0x2a56a4,0x8);const _0x57238b=await exchange['createOrder'](_0x6ca005,_0x2eaeef,_0x89ea3e,_0x234bb2,_0x2a56a4);lastOrders['push']({'orderId':_0x57238b['id'],'symbol':_0x6ca005,'side':_0x89ea3e,'reverse':_0x3e5add[_0x34d039(0x2f5)],'amount':_0x3e5add[_0x34d039(0x2f5)]?_0x57238b['amount']*_0x57238b[_0x34d039(0x282)]:_0x57238b[_0x34d039(0x245)],'filled':_0x3e5add[_0x34d039(0x2f5)]?_0x57238b[_0x34d039(0x237)]*_0x57238b['price']:_0x57238b[_0x34d039(0x237)],'price':_0x57238b['price']});const _0x2c700e=_0x89ea3e=='sell'?config[_0x34d039(0x24b)]?String[_0x34d039(0x2bb)]('0x'+config[_0x34d039(0x24b)])+'\x20':'':config[_0x34d039(0x1d8)]?String[_0x34d039(0x2bb)]('0x'+config[_0x34d039(0x1d8)])+'\x20':'',_0x5e77a2=_0x2eaeef==_0x34d039(0x2d2)?'Market':config['ordertype']==_0x34d039(0x2fc)?_0x34d039(0x273):_0x34d039(0x2c5);if(_0x2eaeef==_0x34d039(0x2d2))logHistory(_0x34d039(0x2e3),''+_0x2c700e+_0x5e77a2+_0x34d039(0x293)+_0x6ca005+'\x20'+_0x89ea3e+'\x20#'+formatResult(_0x57238b[_0x34d039(0x237)],0x8)+'\x20@'+formatResult(_0x57238b[_0x34d039(0x282)],0x8));else logHistory(_0x34d039(0x2e3),''+_0x2c700e+_0x5e77a2+_0x34d039(0x293)+_0x6ca005+'\x20'+_0x89ea3e+'\x20#'+formatResult(_0x57238b[_0x34d039(0x245)],0x8)+'\x20@'+formatResult(_0x57238b[_0x34d039(0x282)],0x8));_0x57238b['coin']=_0x3e5add[_0x34d039(0x2a6)],await updateCoinResults(_0x57238b);if(config[_0x34d039(0x212)]!=0x0){let _0x148515=null;if(cooldownTracker[_0x34d039(0x20f)]==config[_0x34d039(0x212)]-0x1)_0x148515=cooldownTracker[_0x34d039(0x26d)]();const _0x5521ae=getTimeStamp();cooldownTracker[_0x34d039(0x2cb)](_0x5521ae);if(_0x148515){const _0x5c7b3f=fns[_0x34d039(0x23a)](new Date(_0x5521ae),new Date(_0x148515));_0x5c7b3f<cooldownInterval&&(logHistory(_0x34d039(0x2ad),_0x34d039(0x236)+config[_0x34d039(0x212)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x34d039(0x1ef)+cooldownPeriod/(0xe10*0x3e8)+_0x34d039(0x2ea)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x52f7cd){if(_0x52f7cd[_0x34d039(0x22e)]()[_0x34d039(0x21b)]('MIN_NOTIONAL'))logHistory(_0x34d039(0x2ad),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x6ca005);else{if(_0x52f7cd['toString']()[_0x34d039(0x21b)]('Invalid\x20quantity'))logHistory(_0x34d039(0x2ad),_0x34d039(0x244)+_0x6ca005);else await handleError(_0x52f7cd,'placeOrder()');}}}if(lastOrders[_0x34d039(0x20f)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x34d039(0x248)]&&(config[_0x34d039(0x292)]==_0x34d039(0x2d2)?logHistory(_0x34d039(0x2ad),_0x34d039(0x1fe)):logHistory(_0x34d039(0x2ad),_0x34d039(0x251)));else coolingDown&&(!config[_0x34d039(0x248)]&&logHistory(_0x34d039(0x2ad),_0x34d039(0x294)));}}function logHistory(_0x1ccd1e,_0x55e880,_0x5965ad=''){const _0x14a917=_0x1aaad5;let _0x2f6382={'time':getTimeStamp(),'type':_0x1ccd1e,'event':_0x55e880};dbLogs[_0x14a917(0x2b8)](_0x14a917(0x20e))[_0x14a917(0x2cb)](_0x2f6382)['write']();if(_0x5965ad=='')_0x5965ad=_0x55e880;proxyEmit('event',{'log':_0x2f6382,'summary':_0x5965ad}),process[_0x14a917(0x1f8)]({'telegram':{..._0x2f6382,'botname':config[_0x14a917(0x1fd)],'showname':config[_0x14a917(0x21d)]}},_0x403ff4=>{}),logging(''+_0x2f6382[_0x14a917(0x201)]);}function emitHistory(_0x2cf860={}){const _0x12f262=_0x1aaad5;Object['keys'](_0x2cf860)[_0x12f262(0x20f)]==0x0&&(_0x2cf860={'type':[_0x12f262(0x2e3),_0x12f262(0x201)],'event':'','page':0x1});if(_0x2cf860['type'][_0x12f262(0x21b)](_0x12f262(0x201)))_0x2cf860[_0x12f262(0x2ee)][_0x12f262(0x254)](_0x2cf860['type']['indexOf'](_0x12f262(0x201)),0x1,'error',_0x12f262(0x2f0));if(dbLogs[_0x12f262(0x2e5)](_0x12f262(0x20e))[_0x12f262(0x290)]()){let _0x1c621b=dbLogs['get'](_0x12f262(0x20e))[_0x12f262(0x266)](_0xfe4d9d=>{const _0x316e24=_0x12f262;if(_0x2cf860[_0x316e24(0x2ee)][_0x316e24(0x20f)]==0x0)return![];else return _0x2cf860[_0x316e24(0x2ee)][_0x316e24(0x21b)](_0xfe4d9d[_0x316e24(0x2ee)]);})[_0x12f262(0x266)](_0x42c1fd=>{const _0x5529dd=_0x12f262;if(_0x2cf860[_0x5529dd(0x201)]=='')return!![];else return _0x42c1fd[_0x5529dd(0x201)][_0x5529dd(0x211)]()[_0x5529dd(0x21b)](_0x2cf860[_0x5529dd(0x201)]['toLowerCase']());})[_0x12f262(0x24e)](_0x12f262(0x2c8)),_0x32ed64=_0x1c621b[_0x12f262(0x290)]()[_0x12f262(0x20f)];_0x1c621b=_0x1c621b[_0x12f262(0x2f5)]()[_0x12f262(0x217)]((_0x2cf860['page']-0x1)*logPageSize,_0x2cf860[_0x12f262(0x25e)]*logPageSize-0x1)[_0x12f262(0x2f5)]()['value'](),proxyEmit(_0x12f262(0x264),{'logs':_0x1c621b,'total':_0x32ed64});}else proxyEmit(_0x12f262(0x264),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x36374e){const _0x592425=_0x1aaad5;if(dbLogs[_0x592425(0x2e5)](_0x592425(0x20e))['value']()){const _0x62b68=dbLogs[_0x592425(0x2b8)](_0x592425(0x20e))['sortBy']('time')[_0x592425(0x266)](_0x32af75=>{const _0x477f2c=_0x592425;return _0x32af75[_0x477f2c(0x2ee)]==_0x477f2c(0x2e3);})['value']();dbLogs[_0x592425(0x2b8)](_0x592425(0x20e))[_0x592425(0x274)]()[_0x592425(0x28b)](),dbLogs['get']('logs')[_0x592425(0x246)](_0x62b68)[_0x592425(0x28b)](),emitHistory(_0x36374e);}}async function pauseBot(_0x590b44=''){const _0x2035e7=_0x1aaad5,_0x53af30=new Date()[_0x2035e7(0x301)]();if(!lastBotPause)lastBotPause=new Date()[_0x2035e7(0x301)](),consecutivePauses=0x1;else{if(_0x53af30-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x2035e7(0x1f8)]({'stop':_0x2035e7(0x2db)},_0x51d800=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x590b44)_0x590b44+=_0x2035e7(0x288);logHistory(_0x2035e7(0x2ad),_0x590b44+_0x2035e7(0x29b)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x4bec80=_0x1aaad5;process[_0x4bec80(0x1f8)]({'stop':_0x4bec80(0x29e)},_0x494207=>{}),await sleep(0x7d0);}async function handleError(_0x4ffc0e,_0x26bff5,_0x2fb1a8=''){const _0x1b2f62=_0x1aaad5;if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x284)))await pauseBot(_0x1b2f62(0x27c));else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x2a8)))await pauseBot(_0x1b2f62(0x219));else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x1fc)))await pauseBot(_0x1b2f62(0x22f));else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x298)))logHistory(_0x1b2f62(0x2ad),_0x26bff5+_0x1b2f62(0x205)),logHistory(_0x1b2f62(0x2ad),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)]('AuthenticationError'))logHistory(_0x1b2f62(0x2ad),_0x26bff5+_0x1b2f62(0x2e6)),logHistory(_0x1b2f62(0x2ad),_0x1b2f62(0x2d0)),await killBot();else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x1f0)))logHistory(_0x1b2f62(0x2ad),_0x26bff5+_0x1b2f62(0x2bc)),logHistory('error',_0x1b2f62(0x2d0)),await killBot();else{if(_0x4ffc0e['toString']()[_0x1b2f62(0x21b)](_0x1b2f62(0x228)))logHistory(_0x1b2f62(0x2ad),_0x26bff5+_0x1b2f62(0x2fb)),logHistory(_0x1b2f62(0x2ad),_0x1b2f62(0x2d0)),await killBot();else{if(_0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x278)))await pauseBot(_0x1b2f62(0x2b3)),process['send']({'stop':_0x1b2f62(0x2db)},_0x49cad5=>{});else _0x4ffc0e[_0x1b2f62(0x22e)]()[_0x1b2f62(0x21b)](_0x1b2f62(0x1d9))?logHistory(_0x1b2f62(0x2ad),_0x26bff5+_0x1b2f62(0x1ea)):(logging(_0x26bff5+'\x20|\x20Error\x20details:\x20',_0x4ffc0e),await pauseBot(_0x1b2f62(0x26b)));}}}}}}}}function formatResult(_0x58b738,_0x4a70a7){const _0x3007f5=_0x1aaad5;return parseFloat(_0x58b738[_0x3007f5(0x265)](_0x4a70a7));}function logging(_0x2c8fa4,_0x2b1187=''){const _0x4dcb69=_0x1aaad5;if(config['showname'])console['log'](getTimeStamp()+':\x20'+config[_0x4dcb69(0x1fd)]+_0x4dcb69(0x224)+_0x2c8fa4,_0x2b1187);else console['log'](getTimeStamp()+_0x4dcb69(0x300)+botID+_0x4dcb69(0x224)+_0x2c8fa4,_0x2b1187);}function getServerTime(){const _0xed3089=_0x1aaad5,_0x5007fa=new Date();return _0x5007fa[_0xed3089(0x2ff)]()+'/'+(_0x5007fa[_0xed3089(0x2e0)]()+0x1)[_0xed3089(0x22e)]()[_0xed3089(0x2c9)](0x2,'0')+'/'+_0x5007fa['getDate']()[_0xed3089(0x22e)]()[_0xed3089(0x2c9)](0x2,'0')+'\x20'+_0x5007fa[_0xed3089(0x215)]()[_0xed3089(0x22e)]()['padStart'](0x2,'0')+':'+_0x5007fa[_0xed3089(0x2fe)]()[_0xed3089(0x22e)]()[_0xed3089(0x2c9)](0x2,'0')+':'+_0x5007fa['getSeconds']()[_0xed3089(0x22e)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2fbf21=_0x1aaad5,_0x59962b=shiftedTime();return _0x59962b[_0x2fbf21(0x2ff)]()+'/'+(_0x59962b['getMonth']()+0x1)[_0x2fbf21(0x22e)]()['padStart'](0x2,'0')+'/'+_0x59962b[_0x2fbf21(0x1f5)]()['toString']()[_0x2fbf21(0x2c9)](0x2,'0')+'\x20'+_0x59962b[_0x2fbf21(0x215)]()['toString']()[_0x2fbf21(0x2c9)](0x2,'0')+':'+_0x59962b[_0x2fbf21(0x2fe)]()[_0x2fbf21(0x22e)]()['padStart'](0x2,'0')+':'+_0x59962b[_0x2fbf21(0x26e)]()[_0x2fbf21(0x22e)]()['padStart'](0x2,'0');}function getDate(){const _0x305ccb=_0x1aaad5,_0x476c22=shiftedTime();return _0x476c22[_0x305ccb(0x2ff)]()+'/'+(_0x476c22[_0x305ccb(0x2e0)]()+0x1)[_0x305ccb(0x22e)]()['padStart'](0x2,'0')+'/'+_0x476c22['getDate']()['toString']()[_0x305ccb(0x2c9)](0x2,'0');}function getHour(){const _0x22cf5d=_0x1aaad5,_0x3e6316=shiftedTime();return _0x3e6316['getHours']()[_0x22cf5d(0x22e)]()[_0x22cf5d(0x2c9)](0x2,'0');}function sleep(_0x1abad3){return new Promise(_0x167c69=>setTimeout(_0x167c69,_0x1abad3));}function shiftedTime(){const _0x54b7f3=_0x1aaad5,_0x5a9618=new Date();let _0xe89c2e=_0x5a9618;if(config&&config[_0x54b7f3(0x2ba)]!==0x0)_0xe89c2e=fns[_0x54b7f3(0x249)](_0x5a9618,{'hours':config[_0x54b7f3(0x2ba)]});return _0xe89c2e;}