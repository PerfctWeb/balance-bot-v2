const _0x1b4d17=_0x5453;(function(_0x49f889,_0x4b8ae8){const _0x131a13=_0x5453,_0x4ec0eb=_0x49f889();while(!![]){try{const _0x3906d9=-parseInt(_0x131a13(0x1b8))/0x1+-parseInt(_0x131a13(0x213))/0x2+parseInt(_0x131a13(0x223))/0x3+-parseInt(_0x131a13(0x23a))/0x4+-parseInt(_0x131a13(0x26b))/0x5+-parseInt(_0x131a13(0x1c9))/0x6*(-parseInt(_0x131a13(0x1b0))/0x7)+-parseInt(_0x131a13(0x276))/0x8*(-parseInt(_0x131a13(0x1bb))/0x9);if(_0x3906d9===_0x4b8ae8)break;else _0x4ec0eb['push'](_0x4ec0eb['shift']());}catch(_0x37dbff){_0x4ec0eb['push'](_0x4ec0eb['shift']());}}}(_0x3f57,0x4c1e7));const _0x3a306d=function(){let _0x2cd72f=!![];return function(_0x514fb9,_0x537e66){const _0x4394d0=_0x2cd72f?function(){if(_0x537e66){const _0x657098=_0x537e66['apply'](_0x514fb9,arguments);return _0x537e66=null,_0x657098;}}:function(){};return _0x2cd72f=![],_0x4394d0;};}(),_0x3a07a0=_0x3a306d(this,function(){const _0x268c29=_0x5453;return _0x3a07a0[_0x268c29(0x296)]()[_0x268c29(0x229)](_0x268c29(0x215))['toString']()[_0x268c29(0x24e)](_0x3a07a0)[_0x268c29(0x229)](_0x268c29(0x215));});_0x3a07a0();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x1b4d17(0x29c)),fs=require('fs'),fns=require(_0x1b4d17(0x1d2)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x1b4d17(0x1d5))['Crypt'];let exchange,wsClient;global[_0x1b4d17(0x284)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;function _0x5453(_0x4c0502,_0x2253a6){const _0xf314c8=_0x3f57();return _0x5453=function(_0x3a07a0,_0x3a306d){_0x3a07a0=_0x3a07a0-0x1a6;let _0x3f57cc=_0xf314c8[_0x3a07a0];return _0x3f57cc;},_0x5453(_0x4c0502,_0x2253a6);}const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x1b4d17(0x226))[_0x1b4d17(0x209)],botID=process[_0x1b4d17(0x281)][0x2]||_0x1b4d17(0x27a),pattern=/^[0-9]{3}$/;if(!pattern[_0x1b4d17(0x1ba)](botID))return console[_0x1b4d17(0x1c8)](_0x1b4d17(0x251)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x1b4d17(0x275)](0x1);const configpath=_0x1b4d17(0x239);!fs['existsSync'](configpath)&&fs[_0x1b4d17(0x20c)](configpath);const configfile=configpath+_0x1b4d17(0x1ee)+botID+_0x1b4d17(0x203),logfile=configpath+_0x1b4d17(0x1ee)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x1b4d17(0x25d),coinresultsfile=configpath+_0x1b4d17(0x1ee)+botID+_0x1b4d17(0x208),settingsfile=configpath+_0x1b4d17(0x25b),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1b4d17(0x26f)]({'logs':[]})[_0x1b4d17(0x267)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1b4d17(0x26f)]({'data':[]})[_0x1b4d17(0x267)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x1b4d17(0x267)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x1b4d17(0x267)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1b4d17(0x1f8),'symbol':'BTC/EUR'},'usd':{'coin':'BTCUSDT','symbol':_0x1b4d17(0x1b6)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x1d5e68)=>{},'debug':(..._0x1081fd)=>{},'notice':(..._0x33044a)=>{},'info':(..._0x4f8948)=>{},'warning':(..._0x1ca513)=>{},'error':async function(..._0x405063){const _0x247aae=_0x1b4d17,_0x3181d4=new Date()['getTime']();if(!lastErrorShown||_0x3181d4-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x247aae(0x1cb)](),logHistory(_0x247aae(0x29f),_0x247aae(0x1ef)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes');let _0x2fdd74='';if(_0x405063[0x0])_0x2fdd74+=_0x405063[0x0];if(_0x405063[0x1]&&_0x405063[0x1][_0x247aae(0x29f)]&&_0x405063[0x1][_0x247aae(0x29f)][_0x247aae(0x1a7)])_0x2fdd74+=_0x247aae(0x26c)+_0x405063[0x1][_0x247aae(0x29f)][_0x247aae(0x1a7)];logging(_0x247aae(0x1ef)+consecutivePauses+_0x247aae(0x231),''+_0x2fdd74),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x1b4d17(0x26d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1b4d17(0x285)]!=config[_0x1b4d17(0x285)]&&updateTimeshift(settings[_0x1b4d17(0x285)]);process[_0x1b4d17(0x273)]({'started':_0x1b4d17(0x29a)}),initializeProcessListeners();function proxyEmit(_0x23ba57,_0x2071ff=null){const _0x44c6a1=_0x1b4d17;process[_0x44c6a1(0x273)]({'function':_0x23ba57,'args':_0x2071ff});}function initializeProcessListeners(){process['on']('message',_0x39e29f=>{const _0x1d90a2=_0x5453;switch(Object[_0x1d90a2(0x22a)](_0x39e29f)[0x0]){case'timeshift':_0x39e29f[_0x1d90a2(0x285)]!=undefined&&(settings[_0x1d90a2(0x285)]=_0x39e29f['timeshift'],updateTimeshift(settings[_0x1d90a2(0x285)]));break;case _0x1d90a2(0x1f9):switch(_0x39e29f[_0x1d90a2(0x1f9)]){case _0x1d90a2(0x28b):initclient();break;case _0x1d90a2(0x28c):emitHistory(_0x39e29f[_0x1d90a2(0x247)]);break;case _0x1d90a2(0x1bf):getPortfolio(_0x39e29f[_0x1d90a2(0x247)]);break;case _0x1d90a2(0x29d):storeConfiguration(_0x39e29f[_0x1d90a2(0x247)]);break;case _0x1d90a2(0x282):storeHeadless(_0x39e29f[_0x1d90a2(0x247)]);break;case _0x1d90a2(0x299):getStartingBalances();break;case'placeOrder':placeOrder(_0x39e29f[_0x1d90a2(0x247)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x226939=_0x1b4d17;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x226939(0x248)],config[_0x226939(0x1f5)]);let _0x3865e3=await loadSymbols();_0x3865e3&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1d0487,_0x10b65b){const _0x46e2c3=_0x1b4d17,_0x3e6579=ccxt[config[_0x46e2c3(0x1df)]];let _0x53e4dc;switch(config[_0x46e2c3(0x1df)]){case _0x46e2c3(0x1ac):_0x53e4dc=_0x46e2c3(0x1ec);break;case _0x46e2c3(0x1e7):_0x53e4dc=_0x46e2c3(0x20b);break;default:_0x53e4dc=_0x46e2c3(0x1ec);}exchange=new _0x3e6579({'apiKey':_0x1d0487,'secret':_0x10b65b,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1d0487,'api_secret':_0x10b65b,'beautify':!![],'wsUrl':_0x53e4dc},logger),config[_0x46e2c3(0x1df)]==_0x46e2c3(0x1e7)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x46e2c3(0x1fc)},'usd':{'coin':'BTCUSDT','symbol':_0x46e2c3(0x1b6)}});}async function loadSymbols(){const _0x38bea9=_0x1b4d17;let _0x4e3be8;try{markets=await exchange[_0x38bea9(0x22d)](),allSymbols=exchange['symbols'][_0x38bea9(0x1dc)](_0x1af8e3=>{const _0x58b13c=_0x38bea9;return!_0x1af8e3[_0x58b13c(0x1aa)]('DAI/');}),_0x4e3be8=!![];}catch(_0x54f94b){await handleError(_0x54f94b,_0x38bea9(0x24b)),_0x4e3be8=![];}return _0x4e3be8;}async function initbot(){const _0x2111f9=_0x1b4d17;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3460a7=dbCoinResults[_0x2111f9(0x20f)](_0x2111f9(0x1ab))[_0x2111f9(0x201)]();if(_0x3460a7[_0x2111f9(0x257)]==0x0)await resetCoinResults();}async function initclient(){const _0x4b6e4d=_0x1b4d17;proxyEmit(_0x4b6e4d(0x21b),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4b6e4d(0x263),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x21e42b=_0x1b4d17;wsinitialized=![];ws1&&(ws1[_0x21e42b(0x270)](_0x55add6=>{const _0x471033=_0x21e42b;try{wsClient[_0x471033(0x1c0)](_0x55add6);}catch(_0x211059){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x2abe09){}ws2=null;}}async function initws(){const _0x4f40fa=_0x1b4d17;cleanws();let _0x2d6f48=[];currentCoins[_0x4f40fa(0x270)](_0x1c23ec=>{const _0x7ffa8d=_0x4f40fa;if(_0x1c23ec[_0x7ffa8d(0x287)]!=config['basecoin'])_0x2d6f48[_0x7ffa8d(0x1d4)](noslash(_0x1c23ec[_0x7ffa8d(0x1ad)]));});if(!_0x2d6f48[_0x4f40fa(0x1aa)](stablecoins[_0x4f40fa(0x1e3)]['coin']))_0x2d6f48[_0x4f40fa(0x1d4)](stablecoins[_0x4f40fa(0x1e3)][_0x4f40fa(0x287)]);if(!_0x2d6f48[_0x4f40fa(0x1aa)](stablecoins['usd'][_0x4f40fa(0x287)]))_0x2d6f48[_0x4f40fa(0x1d4)](stablecoins[_0x4f40fa(0x202)][_0x4f40fa(0x287)]);if(!_0x2d6f48[_0x4f40fa(0x1aa)](_0x4f40fa(0x1e2)+config[_0x4f40fa(0x2a2)]))_0x2d6f48[_0x4f40fa(0x1d4)]('BNB'+config[_0x4f40fa(0x2a2)]);try{_0x2d6f48[_0x4f40fa(0x270)]((_0x3c337b,_0x3e722f)=>{const _0x23fdc5=_0x4f40fa;ws1[_0x3e722f]=wsClient[_0x23fdc5(0x2a4)](_0x3c337b,'1m');}),ws2=wsClient[_0x4f40fa(0x1dd)](),wsClient['on']('formattedMessage',_0xc71d85=>{const _0x13fa65=_0x4f40fa;if(!Array[_0x13fa65(0x222)](_0xc71d85)&&!_0xc71d85[_0x13fa65(0x1c2)][_0x13fa65(0x1aa)](_0x13fa65(0x1af))){if(_0xc71d85['eventType']==='kline'){global['ticker'][_0xc71d85[_0x13fa65(0x294)][_0x13fa65(0x1ad)]]=_0xc71d85[_0x13fa65(0x294)]['close'];return;}}else{if(!Array[_0x13fa65(0x222)](_0xc71d85)&&_0xc71d85[_0x13fa65(0x1c2)]['includes']('userData')){if(_0xc71d85['wsMarket'][_0x13fa65(0x1aa)]('spot')){updateNumberCoins(_0xc71d85);return;}}}}),wsClient['on']('reconnected',async _0x349f08=>{currentCoins=await getCoins();});}catch(_0x1f66f2){await handleError(_0x1f66f2,_0x4f40fa(0x1d1));}let _0x2d55f0;while(_0x2d55f0!=currentCoins[_0x4f40fa(0x257)]-0x1){_0x2d55f0=0x0,currentCoins['forEach'](_0x2e5108=>{const _0x1f5791=_0x4f40fa;if(_0x2e5108[_0x1f5791(0x287)]!=config[_0x1f5791(0x2a2)]&&global[_0x1f5791(0x284)][noslash(_0x2e5108['symbol'])])_0x2d55f0++;});let _0x5eb360=Math['round'](_0x2d55f0/(currentCoins[_0x4f40fa(0x257)]-0x1)*0x64);proxyEmit('coin-loading-progress',_0x5eb360),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x4d47e2=_0x1b4d17;let _0x55ca20=0x0,_0x149b0d=0x0;try{_0x55ca20=global[_0x4d47e2(0x284)][stablecoins[_0x4d47e2(0x1e3)][_0x4d47e2(0x287)]],_0x149b0d=global[_0x4d47e2(0x284)][stablecoins['usd'][_0x4d47e2(0x287)]];}catch(_0x440814){await handleError(_0x440814,_0x4d47e2(0x204));}return{'eur':Number(_0x55ca20),'usd':Number(_0x149b0d)};}async function setStartDatePerformance(_0x5f2bd3){const _0x3f92d2=_0x1b4d17,_0x23f222=fns[_0x3f92d2(0x1de)](new Date(_0x5f2bd3['startdate']),'yyyy/MM/dd');let _0x246e49=[];_0x246e49[stablecoins[_0x3f92d2(0x1e3)]['coin']]=await getCloses(stablecoins[_0x3f92d2(0x1e3)][_0x3f92d2(0x1ad)],new Date(_0x5f2bd3[_0x3f92d2(0x214)]),0x1),_0x246e49[stablecoins[_0x3f92d2(0x202)][_0x3f92d2(0x287)]]=await getCloses(stablecoins[_0x3f92d2(0x202)][_0x3f92d2(0x1ad)],new Date(_0x5f2bd3[_0x3f92d2(0x214)]),0x1);let _0x38c326,_0x3f6619=[];_0x5f2bd3[_0x3f92d2(0x210)][_0x3f92d2(0x270)](_0x2e8e83=>{const _0x4690da=_0x3f92d2;!_0x2e8e83[_0x4690da(0x1a6)]&&_0x3f6619[_0x4690da(0x1d4)]({'coin':_0x2e8e83['coin'],'number':_0x2e8e83[_0x4690da(0x1e5)],'price':_0x2e8e83[_0x4690da(0x293)]});}),_0x38c326={'date':_0x23f222,'eur':_0x246e49[stablecoins[_0x3f92d2(0x1e3)][_0x3f92d2(0x287)]][0x0],'usd':_0x246e49[stablecoins[_0x3f92d2(0x202)][_0x3f92d2(0x287)]][0x0],'coins':_0x3f6619};let _0x460ea0=dbPerformance[_0x3f92d2(0x20f)](_0x3f92d2(0x1e6))[_0x3f92d2(0x250)]({'date':_0x23f222})[_0x3f92d2(0x201)]();_0x460ea0?dbPerformance[_0x3f92d2(0x20f)](_0x3f92d2(0x1e6))[_0x3f92d2(0x250)]({'date':_0x23f222})['assign'](_0x38c326)[_0x3f92d2(0x267)]():dbPerformance['get']('data')[_0x3f92d2(0x1d4)](_0x38c326)[_0x3f92d2(0x267)](),_0x460ea0=dbPerformance['get'](_0x3f92d2(0x1e6))[_0x3f92d2(0x1db)](_0x3f92d2(0x261))['value'](),_0x460ea0[_0x3f92d2(0x270)](_0x3b1509=>{const _0x5703b0=_0x3f92d2;_0x3b1509[_0x5703b0(0x261)]<_0x23f222&&dbPerformance[_0x5703b0(0x20f)]('data')['remove']({'date':_0x3b1509[_0x5703b0(0x261)]})[_0x5703b0(0x267)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1abe16){const _0x8a5cb2=_0x1b4d17;let _0x32852b,_0x1edce1=[];logHistory(_0x8a5cb2(0x1d6),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x1abe16[_0x8a5cb2(0x210)][_0x8a5cb2(0x270)](_0x4e384b=>{const _0xfc6de3=_0x8a5cb2;if(_0x4e384b[_0xfc6de3(0x287)]!=config['basecoin']&&!_0x4e384b[_0xfc6de3(0x1a6)])_0x1edce1[_0xfc6de3(0x1d4)]({'coin':_0x4e384b[_0xfc6de3(0x287)],'symbol':_0x4e384b[_0xfc6de3(0x1ad)]});});let _0x3c69b1=[];try{const _0x58a572=fns[_0x8a5cb2(0x1de)](fns[_0x8a5cb2(0x279)](_0x1abe16[_0x8a5cb2(0x214)][_0x8a5cb2(0x28d)](/\//g,'-')),_0x8a5cb2(0x24a));for(const _0x4b2f0c of _0x1edce1){if(_0x4b2f0c[_0x8a5cb2(0x287)]!=config[_0x8a5cb2(0x2a2)])_0x32852b=await exchange['fetchOrders'](_0x4b2f0c[_0x8a5cb2(0x1ad)],Date[_0x8a5cb2(0x1b3)](_0x58a572));_0x32852b['forEach'](_0x25d5c8=>{const _0x21bd80=_0x8a5cb2,_0x5b61ca=_0x4b2f0c[_0x21bd80(0x1ad)][_0x21bd80(0x1aa)](config[_0x21bd80(0x2a2)]+'/'),_0x1c8d46=fns[_0x21bd80(0x1de)](fns[_0x21bd80(0x279)](_0x25d5c8[_0x21bd80(0x28a)]),_0x21bd80(0x1bd)),_0x32cab0=fns['format'](fns[_0x21bd80(0x279)](_0x25d5c8[_0x21bd80(0x28a)]),_0x21bd80(0x1d3));let _0x449fc7;if(_0x25d5c8[_0x21bd80(0x1e4)]==_0x21bd80(0x1c1)&&_0x5b61ca==![])_0x449fc7=_0x25d5c8[_0x21bd80(0x1ae)];if(_0x25d5c8['side']==_0x21bd80(0x1c1)&&_0x5b61ca==!![])_0x449fc7=-_0x25d5c8[_0x21bd80(0x1ae)]*_0x25d5c8['price'];if(_0x25d5c8[_0x21bd80(0x1e4)]==_0x21bd80(0x249)&&_0x5b61ca==![])_0x449fc7=-_0x25d5c8[_0x21bd80(0x1ae)];if(_0x25d5c8[_0x21bd80(0x1e4)]=='sell'&&_0x5b61ca==!![])_0x449fc7=_0x25d5c8[_0x21bd80(0x1ae)]*_0x25d5c8[_0x21bd80(0x27b)];_0x3c69b1[_0x21bd80(0x1d4)]({'timestamp':_0x1c8d46,'date':_0x32cab0,'coin':_0x4b2f0c[_0x21bd80(0x287)],'symbol':_0x4b2f0c['symbol'],'type':_0x25d5c8[_0x21bd80(0x230)],'side':_0x25d5c8[_0x21bd80(0x1e4)],'reverse':_0x5b61ca,'amount':formatResult(_0x25d5c8['filled'],0x8),'filled':formatResult(_0x25d5c8['filled'],0x8),'coinamount':formatResult(_0x449fc7,0x8),'price':formatResult(_0x25d5c8[_0x21bd80(0x27b)],0x8)});let _0x40a83e;if(_0x25d5c8[_0x21bd80(0x1e4)]=='buy'&&_0x5b61ca==![])_0x40a83e=-_0x25d5c8['amount']*_0x25d5c8[_0x21bd80(0x27b)];if(_0x25d5c8[_0x21bd80(0x1e4)]=='buy'&&_0x5b61ca==!![])_0x40a83e=_0x25d5c8[_0x21bd80(0x1ae)];if(_0x25d5c8[_0x21bd80(0x1e4)]==_0x21bd80(0x249)&&_0x5b61ca==![])_0x40a83e=_0x25d5c8['amount']*_0x25d5c8[_0x21bd80(0x27b)];if(_0x25d5c8[_0x21bd80(0x1e4)]==_0x21bd80(0x249)&&_0x5b61ca==!![])_0x40a83e=-_0x25d5c8[_0x21bd80(0x1ae)];_0x3c69b1['push']({'date':_0x32cab0,'coin':config[_0x21bd80(0x2a2)],'coinamount':formatResult(_0x40a83e,0x8)});});}_0x3c69b1['sort']((_0x2d99dc,_0x58cf89)=>_0x2d99dc[_0x8a5cb2(0x1b4)]>_0x58cf89['timestamp']?0x1:_0x58cf89['timestamp']>_0x2d99dc[_0x8a5cb2(0x1b4)]?-0x1:0x0),dbLogs[_0x8a5cb2(0x20f)](_0x8a5cb2(0x1ea))[_0x8a5cb2(0x245)]()['write'](),_0x3c69b1['forEach'](_0x214135=>{const _0x4ef7e4=_0x8a5cb2;let _0x6e99e0;_0x214135[_0x4ef7e4(0x287)]!=config[_0x4ef7e4(0x2a2)]&&(_0x6e99e0={'time':_0x214135[_0x4ef7e4(0x1b4)],'type':_0x4ef7e4(0x20d),'event':_0x4ef7e4(0x25a)+_0x214135['symbol']+'\x20'+_0x214135[_0x4ef7e4(0x1e4)]+'\x20#'+_0x214135['amount']+'\x20@'+_0x214135[_0x4ef7e4(0x27b)]},dbLogs[_0x4ef7e4(0x20f)](_0x4ef7e4(0x1ea))['push'](_0x6e99e0)[_0x4ef7e4(0x267)]());});const _0x484598=fns[_0x8a5cb2(0x200)]({'start':new Date(_0x1abe16[_0x8a5cb2(0x214)]),'end':new Date()})[_0x8a5cb2(0x1da)](_0xd89316=>fns[_0x8a5cb2(0x1de)](_0xd89316,_0x8a5cb2(0x1d3)));let _0x1cb44f=[];_0x1abe16[_0x8a5cb2(0x210)][_0x8a5cb2(0x270)](_0x256f44=>{const _0x17acaa=_0x8a5cb2;if(!_0x256f44[_0x17acaa(0x1a6)]){_0x1cb44f[_0x256f44[_0x17acaa(0x287)]]=[];let _0x2be8bb=_0x256f44['startnumber'];_0x484598[_0x17acaa(0x270)]((_0x17e99c,_0x34c71f)=>{const _0x47752f=_0x17acaa;let _0x1fb005=_0x3c69b1[_0x47752f(0x1dc)](_0x1ff370=>_0x1ff370[_0x47752f(0x287)]==_0x256f44[_0x47752f(0x287)]&&_0x1ff370[_0x47752f(0x261)]==_0x17e99c);if(_0x1fb005[_0x47752f(0x257)]!=0x0){let _0x5e523f=_0x1fb005[_0x47752f(0x291)]((_0x4d9935,_0x2d4e34)=>{const _0x590337=_0x47752f;return _0x4d9935+=_0x2d4e34[_0x590337(0x256)],_0x4d9935;},0x0);_0x2be8bb+=_0x5e523f;}_0x1cb44f[_0x256f44['coin']][_0x17e99c]=_0x2be8bb;});}});const _0x2229cc=[..._0x1edce1];_0x2229cc[_0x8a5cb2(0x1d4)]({'coin':stablecoins[_0x8a5cb2(0x1e3)][_0x8a5cb2(0x287)],'symbol':stablecoins[_0x8a5cb2(0x1e3)][_0x8a5cb2(0x1ad)]}),_0x2229cc[_0x8a5cb2(0x1d4)]({'coin':stablecoins[_0x8a5cb2(0x202)]['coin'],'symbol':stablecoins['usd']['symbol']});let _0x1745e5=[];for(const _0x50beb2 of _0x2229cc){_0x1745e5[_0x50beb2[_0x8a5cb2(0x287)]]=await getCloses(_0x50beb2[_0x8a5cb2(0x1ad)],new Date(_0x1abe16[_0x8a5cb2(0x214)]));}dbPerformance[_0x8a5cb2(0x20f)](_0x8a5cb2(0x1e6))[_0x8a5cb2(0x245)]()[_0x8a5cb2(0x267)](),_0x484598['forEach']((_0x251b3b,_0x428ff9)=>{const _0xe9fcf0=_0x8a5cb2;let _0x19a44a,_0x21f5d9=[];_0x428ff9==0x0?(_0x1abe16[_0xe9fcf0(0x210)][_0xe9fcf0(0x270)](_0x2d28bd=>{const _0x53ddec=_0xe9fcf0;!_0x2d28bd[_0x53ddec(0x1a6)]&&_0x21f5d9[_0x53ddec(0x1d4)]({'coin':_0x2d28bd[_0x53ddec(0x287)],'number':_0x2d28bd['startnumber'],'price':_0x2d28bd[_0x53ddec(0x293)]});}),_0x19a44a={'date':_0x251b3b,'eur':_0x1745e5[stablecoins[_0xe9fcf0(0x1e3)]['coin']][_0x428ff9],'usd':_0x1745e5[stablecoins[_0xe9fcf0(0x202)][_0xe9fcf0(0x287)]][_0x428ff9],'coins':_0x21f5d9}):(_0x1abe16['portfolio'][_0xe9fcf0(0x270)](_0xe463f3=>{const _0x21f04e=_0xe9fcf0;!_0xe463f3['excluded']&&_0x21f5d9[_0x21f04e(0x1d4)]({'coin':_0xe463f3[_0x21f04e(0x287)],'number':_0x1cb44f[_0xe463f3[_0x21f04e(0x287)]][_0x251b3b],'price':_0xe463f3['coin']==config[_0x21f04e(0x2a2)]?0x1:_0x1745e5[_0xe463f3[_0x21f04e(0x287)]][_0x428ff9]});}),_0x19a44a={'date':_0x251b3b,'eur':_0x1745e5[stablecoins[_0xe9fcf0(0x1e3)][_0xe9fcf0(0x287)]][_0x428ff9],'usd':_0x1745e5[stablecoins[_0xe9fcf0(0x202)][_0xe9fcf0(0x287)]][_0x428ff9],'coins':_0x21f5d9}),dbPerformance['get']('data')[_0xe9fcf0(0x1d4)](_0x19a44a)[_0xe9fcf0(0x267)]();}),emitPerformance(),await resetCoinResults();for(let _0x12f001 of _0x3c69b1){_0x12f001[_0x8a5cb2(0x287)]!=config[_0x8a5cb2(0x2a2)]&&await updateCoinResults(_0x12f001);}logHistory(_0x8a5cb2(0x1d6),_0x8a5cb2(0x1b2));}catch(_0x6edcbc){await handleError(_0x6edcbc,_0x8a5cb2(0x1e0));}}async function getCloses(_0x458c8b,_0x395f97,_0x5c689b=undefined){const _0xdd1eaf=_0x1b4d17,_0x2bb54f='1d';let _0x2b9a3e,_0x568d2d;const _0x1e6285=fns[_0xdd1eaf(0x2a1)](new Date(),_0x395f97)+0x1;try{const _0x3f6405=exchange[_0xdd1eaf(0x2a3)]()-_0x1e6285*0x18*0xe10*0x3e8;_0x2b9a3e=await exchange[_0xdd1eaf(0x212)](_0x458c8b,_0x2bb54f,_0x3f6405,_0x5c689b),_0x568d2d=await exchange['fetchTickers'](_0x458c8b);}catch(_0x46ea8a){await handleError(_0x46ea8a,_0xdd1eaf(0x24d));}let _0x5a86be=ohlcvToCloses(_0x2b9a3e);return _0x5a86be[_0xdd1eaf(0x1d4)](_0x568d2d[_0x458c8b][_0xdd1eaf(0x255)]),_0x5a86be;}function ohlcvToCloses(_0x3223b5){const _0x388141=_0x1b4d17;let _0xf859d2=[];return _0x3223b5[_0x388141(0x270)](function(_0x4bc016){const _0x26a6f6=_0x388141;_0xf859d2[_0x26a6f6(0x1d4)](_0x4bc016[0x4]);}),_0xf859d2;}function _0x3f57(){const _0x48d164=['cancelOrder','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','settings','decrypt','\x20>\x20','************','orderStatus','trade',':\x20Bot\x20','assign','remove','createOrder','args','apiKey','sell','yyyy-MM-dd\x27T\x27HH:mm:ss','loadSymbols()','valid','getCloses()','constructor','secure','find','Error:\x20Invalid\x20argument\x20','availableBalance','sort','Limit\x20(low-margin)','last','coinamount','length','has','distribution','Order:\x20','bb-settings.json','configuration-stored','-performance.json','Order\x20filled:\x20','getFullYear','threshold','date','OrderNotFound','balances','AuthenticationError','number','Limit\x20(high-margin)','write','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','orderId','split','3107925YlJbAG','\x20-\x20','RSA-OAEP','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','defaults','forEach','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','market','send','ordertype','exit','9336iLNtox','reverse','indexOf','parseISO','001','price','accumulatedQuantity','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','botID','round','differenceInSeconds','argv','storeHeadless','EUR','ticker','timeshift','fetchTickers','coin','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','\x20minutes\x20-\x20balancing\x20resumed','datetime','initclient','emitHistory','replace','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Binance\x20API\x20secret\x20is\x20invalid','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','reduce','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','startprice','kline','limit-high','toString','buys','getHours','getStartingBalances','running','event','lowdb/adapters/FileSync','storeConfiguration','USDT','error','botname','differenceInCalendarDays','basecoin','milliseconds','subscribeSpotKline','excluded','message','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','InvalidNonce','includes','coins','binance','symbol','amount','userData','2260314JYCjHj','recreate','Performance\x20recreation\x20completed\x20successfully','parse','timestamp','Unfilled\x20order(s)\x20canceled\x20after\x20','BTC/USDT','getMonth','150085bzKGKi','getDate','test','6363iMhQBv','emojisell','yyyy/MM/dd\x20HH:mm:ss','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getPortfolio','closeWs','buy','wsKey','fromCodePoint','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','cost','limit','getPortfolio()','log','6qbvQVR','Binance\x20API\x20key\x20is\x20invalid','getTime','MIN_NOTIONAL','orderType','realized','BUSD','toLowerCase','initws()','date-fns','yyyy/MM/dd','push','hybrid-crypto-js','success','shift','splice','cancelOrder()','map','sortBy','filter','subscribeSpotUserDataStream','format','exchange','recreateHistory()','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','BNB','eur','side','startnumber','data','binanceus','timeout','page','logs','RequestTimeout','wss://stream.binance.com:9443','limits','bot-','WebSockets(','breakeven','sells','headless','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','padStart','apiSecret','starting-balances','filled','BTCEUR','function','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(2)\x20-\x20please\x20sync\x20clock','InsufficientFunds','BTC/BUSD','API-key\x20format\x20invalid','min','BTC','eachDayOfInterval','value','usd','-config.json','getFiat()','fee','restart','\x20orders\x20in\x20less\x20than\x20','-results.json','version','delta','wss://stream.binance.us:9443','mkdirSync','order','enabled','get','portfolio','LIMIT','fetchOHLCV','544610ciEEvA','startdate','(((.+)+)+)+$','event-history','\x20order:\x20','getSeconds','eventType','performance','configuration','\x20hour','getMinutes','DDoSProtection','currency','Order(s)\x20not\x20validated\x20after\x20','placeOrder()','isArray','1147695tmAAJf','emojibuy','USDC','./version.json','cooldown','time','search','keys','Executed\x20','bot','loadMarkets','Invalid\x20quantity','privateKey','type',')\x20|\x20Error\x20details:\x20','limit-low','abs','getCoins()','entries','kill','target','FILLED','./config/','699112ZwjObK'];_0x3f57=function(){return _0x48d164;};return _0x3f57();}function getConfiguration(_0x409312){const _0x4eb683=_0x1b4d17;let _0x37ca37=dbConfig[_0x4eb683(0x20f)](_0x4eb683(0x22c))['find']({'botID':_0x409312})[_0x4eb683(0x201)]();if(_0x37ca37){let _0x1ed459=![];!_0x37ca37[_0x4eb683(0x1df)]&&(_0x37ca37={..._0x37ca37,'exchange':_0x4eb683(0x1ac)},_0x1ed459=!![]),!_0x37ca37[_0x4eb683(0x2a2)]&&(_0x37ca37={..._0x37ca37,'basecoin':_0x4eb683(0x1ff)},_0x1ed459=!![]),!_0x37ca37[_0x4eb683(0x274)]&&(_0x37ca37={..._0x37ca37,'ordertype':_0x4eb683(0x272)},_0x1ed459=!![]),!_0x37ca37[_0x4eb683(0x1e8)]&&(_0x37ca37={..._0x37ca37,'timeout':0x14},_0x1ed459=!![]),!_0x37ca37[_0x4eb683(0x224)]&&(_0x37ca37={..._0x37ca37,'emojibuy':''},_0x1ed459=!![]),!_0x37ca37[_0x4eb683(0x1bc)]&&(_0x37ca37={..._0x37ca37,'emojisell':''},_0x1ed459=!![]),_0x1ed459&&(_0x37ca37={'botID':_0x37ca37[_0x4eb683(0x27e)],'exchange':_0x37ca37[_0x4eb683(0x1df)],'apiKey':_0x37ca37[_0x4eb683(0x248)],'apiSecret':_0x37ca37[_0x4eb683(0x1f5)],'basecoin':_0x37ca37['basecoin'],'botname':_0x37ca37['botname'],'threshold':_0x37ca37[_0x4eb683(0x260)],'ordertype':_0x37ca37[_0x4eb683(0x274)],'timeout':_0x37ca37[_0x4eb683(0x1e8)],'startdate':_0x37ca37['startdate'],'recreate':_0x37ca37['recreate'],'timeshift':_0x37ca37[_0x4eb683(0x285)],'headless':_0x37ca37[_0x4eb683(0x1f2)],'cooldown':_0x37ca37['cooldown'],'emojibuy':_0x37ca37[_0x4eb683(0x224)],'emojisell':_0x37ca37[_0x4eb683(0x1bc)],'portfolio':_0x37ca37[_0x4eb683(0x210)]},dbConfig[_0x4eb683(0x20f)](_0x4eb683(0x22c))['remove']()[_0x4eb683(0x267)](),dbConfig[_0x4eb683(0x20f)](_0x4eb683(0x22c))['push'](_0x37ca37)[_0x4eb683(0x267)]());}else _0x37ca37={'botID':_0x409312,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x409312,'threshold':'3','ordertype':_0x4eb683(0x272),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4eb683(0x285)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x37ca37;}function emittedConfiguration(){const _0x44f21d=_0x1b4d17;let _0x5e139f;return config['apiKey']==''?_0x5e139f=config:_0x5e139f={...config,'apiKey':_0x44f21d(0x240),'apiSecret':_0x44f21d(0x240)},_0x5e139f;}function getSettings(){const _0x324998=_0x1b4d17;return dbSettings['get'](_0x324998(0x23d))[_0x324998(0x201)]();}function getSecure(){const _0x3a1b46=_0x1b4d17;return dbSecure[_0x3a1b46(0x20f)](_0x3a1b46(0x24f))[_0x3a1b46(0x201)]()||{};}function updateTimeshift(_0x22f02e){const _0x194ddb=_0x1b4d17;let _0x3baff5=dbConfig[_0x194ddb(0x20f)](_0x194ddb(0x22c))['find']({'botID':botID})[_0x194ddb(0x201)]();_0x3baff5&&dbConfig[_0x194ddb(0x20f)](_0x194ddb(0x22c))[_0x194ddb(0x250)]({'botID':botID})['assign']({'timeshift':_0x22f02e})[_0x194ddb(0x267)](),config[_0x194ddb(0x285)]=_0x22f02e,proxyEmit(_0x194ddb(0x21b),emittedConfiguration());}async function storeConfiguration(_0x54392a){const _0x2eee45=_0x1b4d17;let _0x95b9f6=dbConfig[_0x2eee45(0x20f)]('bot')[_0x2eee45(0x250)]({'botID':botID})[_0x2eee45(0x201)]();_0x54392a={..._0x54392a,'apiKey':crypt[_0x2eee45(0x23e)](secure[_0x2eee45(0x22f)],_0x54392a[_0x2eee45(0x248)])[_0x2eee45(0x1a7)],'apiSecret':crypt['decrypt'](secure[_0x2eee45(0x22f)],_0x54392a['apiSecret'])[_0x2eee45(0x1a7)]};if(_0x95b9f6){if(_0x54392a[_0x2eee45(0x248)]=='************')_0x54392a['apiKey']=config[_0x2eee45(0x248)];if(_0x54392a[_0x2eee45(0x1f5)]==_0x2eee45(0x240))_0x54392a[_0x2eee45(0x1f5)]=config[_0x2eee45(0x1f5)];dbConfig['get'](_0x2eee45(0x22c))[_0x2eee45(0x250)]({'botID':botID})[_0x2eee45(0x244)](_0x54392a)[_0x2eee45(0x267)]();}else dbConfig[_0x2eee45(0x20f)](_0x2eee45(0x22c))[_0x2eee45(0x1d4)](_0x54392a)[_0x2eee45(0x267)](),process[_0x2eee45(0x273)]({'status':_0x2eee45(0x20e),'live':_0x2eee45(0x29a)});config={..._0x54392a};if(config[_0x2eee45(0x1b1)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x2eee45(0x273)]({'botname':_0x54392a[_0x2eee45(0x2a0)]}),proxyEmit(_0x2eee45(0x25c)),reset();}async function storeHeadless(_0x119614){const _0x9c7ec3=_0x1b4d17,_0x387f0e={...config,'headless':_0x119614[_0x9c7ec3(0x1f2)]};let _0x34005c=dbConfig[_0x9c7ec3(0x20f)]('bot')[_0x9c7ec3(0x250)]({'botID':botID})[_0x9c7ec3(0x201)]();_0x34005c&&dbConfig['get'](_0x9c7ec3(0x22c))[_0x9c7ec3(0x250)]({'botID':botID})[_0x9c7ec3(0x244)](_0x387f0e)[_0x9c7ec3(0x267)](),config={..._0x387f0e},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x32aca3){return _0x32aca3['replace']('/','');}function updateNumberCoins(_0x2d0fc8){const _0x7700be=_0x1b4d17;_0x2d0fc8[_0x7700be(0x219)]&&_0x2d0fc8[_0x7700be(0x219)]=='outboundAccountPosition'&&_0x2d0fc8[_0x7700be(0x263)][_0x7700be(0x270)](_0x48e0aa=>{const _0x216d67=_0x7700be;let _0x2b0e75=currentCoins[_0x216d67(0x250)](_0xf8daec=>_0xf8daec[_0x216d67(0x287)]==_0x48e0aa['asset']);if(_0x2b0e75)_0x2b0e75[_0x216d67(0x265)]=Number(_0x48e0aa[_0x216d67(0x252)]);}),_0x2d0fc8['eventType']&&_0x2d0fc8[_0x7700be(0x219)]=='executionReport'&&(_0x2d0fc8[_0x7700be(0x1cd)]==_0x7700be(0x211)&&_0x2d0fc8[_0x7700be(0x241)]==_0x7700be(0x238)&&lastOrders[_0x7700be(0x270)](_0x4489a9=>{const _0x362dd8=_0x7700be;if(_0x4489a9[_0x362dd8(0x269)]==_0x2d0fc8[_0x362dd8(0x269)]){if(_0x4489a9[_0x362dd8(0x277)])_0x4489a9[_0x362dd8(0x1f7)]=_0x2d0fc8['accumulatedQuantity']*_0x4489a9[_0x362dd8(0x27b)];else _0x4489a9[_0x362dd8(0x1f7)]=_0x2d0fc8[_0x362dd8(0x27c)];}}));}async function getCoins(_0x7d58a5=!![],_0x27c7c3=config[_0x1b4d17(0x2a2)]){const _0x401ee8=_0x1b4d17;let _0x4423ec,_0x423efe=[],_0xffc477=[],_0x34f9ce=[];try{_0x4423ec=await exchange['fetchBalance'](),mybalances=_0x4423ec['total'];if(!_0x7d58a5)for(const [_0x301aba,_0x33bb63]of Object[_0x401ee8(0x235)](mybalances)){_0x34f9ce[_0x401ee8(0x1d4)](_0x301aba);}else config[_0x401ee8(0x210)]['forEach'](_0x464daa=>{const _0x57a368=_0x401ee8;if(!_0x464daa[_0x57a368(0x1a6)])_0x34f9ce[_0x57a368(0x1d4)](_0x464daa[_0x57a368(0x287)]);});if(_0x27c7c3=='')for(const [_0x2b0376,_0x1f7aa2]of Object[_0x401ee8(0x235)](mybalances)){_0x1f7aa2[_0x401ee8(0x296)]()!=0x0&&_0xffc477[_0x401ee8(0x1d4)]({'coin':_0x2b0376});}else for(const [_0x317d08,_0x2d6697]of Object[_0x401ee8(0x235)](mybalances)){if(_0x34f9ce[_0x401ee8(0x1aa)](_0x317d08)){if((_0x2d6697[_0x401ee8(0x296)]()!=0x0||config[_0x401ee8(0x210)]['find'](_0x1b29b2=>_0x1b29b2[_0x401ee8(0x287)]==_0x317d08))&&(allSymbols[_0x401ee8(0x1aa)](_0x317d08+'/'+_0x27c7c3)||_0x317d08==_0x27c7c3))_0xffc477['push']({'coin':_0x317d08,'symbol':_0x317d08+'/'+_0x27c7c3,'reverse':![],'number':_0x2d6697}),_0x317d08!=_0x27c7c3&&_0x423efe['push'](_0x317d08+'/'+_0x27c7c3);else(_0x2d6697[_0x401ee8(0x296)]()!=0x0||config['portfolio'][_0x401ee8(0x250)](_0x2f806b=>_0x2f806b[_0x401ee8(0x287)]==_0x317d08))&&allSymbols['includes'](_0x27c7c3+'/'+_0x317d08)&&(_0xffc477[_0x401ee8(0x1d4)]({'coin':_0x317d08,'symbol':_0x27c7c3+'/'+_0x317d08,'reverse':!![],'number':_0x2d6697}),_0x317d08!=_0x27c7c3&&_0x423efe['push'](_0x27c7c3+'/'+_0x317d08));}}}catch(_0x1738e0){if(!_0x7d58a5){if(_0x1738e0[_0x401ee8(0x296)]()[_0x401ee8(0x1aa)]('API-key\x20format\x20invalid'))return logHistory(_0x401ee8(0x29f),_0x401ee8(0x1ca)),![];else{if(_0x1738e0[_0x401ee8(0x296)]()['includes'](_0x401ee8(0x264)))return logHistory(_0x401ee8(0x29f),_0x401ee8(0x1e1)),![];else{if(_0x1738e0[_0x401ee8(0x296)]()[_0x401ee8(0x1aa)](_0x401ee8(0x1c4)))return logHistory(_0x401ee8(0x29f),_0x401ee8(0x28f)),![];else await handleError(_0x1738e0,_0x401ee8(0x234));}}}else await handleError(_0x1738e0,'getCoins()');}return _0xffc477;}async function getPortfolio(_0x5d39b1){const _0x2cb9fe=_0x1b4d17;let _0x2bb371=[],_0x695ef7=[],_0x2ec030,_0x4caee0=[],_0x1fffb4,_0x56fe37;_0x5d39b1[_0x2cb9fe(0x248)]==='************'||_0x5d39b1['apiSecret']===_0x2cb9fe(0x240)?(_0x1fffb4=config[_0x2cb9fe(0x248)],_0x56fe37=config['apiSecret']):(_0x1fffb4=_0x5d39b1[_0x2cb9fe(0x248)],_0x56fe37=_0x5d39b1[_0x2cb9fe(0x1f5)]);await initExchange(_0x1fffb4,_0x56fe37);let _0x120553=await loadSymbols();if(_0x120553){_0x4caee0=await getCoins(![],_0x5d39b1[_0x2cb9fe(0x2a2)]);if(_0x4caee0===![])proxyEmit(_0x2cb9fe(0x210),![]);else{if(_0x5d39b1['basecoin']=='')proxyEmit(_0x2cb9fe(0x210),_0x4caee0);else{_0x4caee0['forEach'](_0x4b1b64=>{const _0x85ce51=_0x2cb9fe;_0x2bb371[_0x85ce51(0x1d4)](_0x4b1b64[_0x85ce51(0x1ad)]);});try{_0x695ef7=await exchange['fetchTickers'](_0x2bb371);}catch(_0x122c98){await handleError(_0x122c98,_0x2cb9fe(0x1c7));}_0x4caee0[_0x2cb9fe(0x270)](_0x1b539a=>{const _0x1b7a26=_0x2cb9fe;_0x1b539a[_0x1b7a26(0x287)]!=_0x5d39b1['basecoin']?_0x2ec030=_0x1b539a[_0x1b7a26(0x277)]?0x1/_0x695ef7[_0x1b539a[_0x1b7a26(0x1ad)]][_0x1b7a26(0x255)]:_0x695ef7[_0x1b539a[_0x1b7a26(0x1ad)]][_0x1b7a26(0x255)]:_0x2ec030=0x1,_0x1b539a['price']=formatResult(_0x2ec030,0x8);}),proxyEmit(_0x2cb9fe(0x210),_0x4caee0);}}}else proxyEmit(_0x2cb9fe(0x210),![]);}function checkMinimums(_0x4aaccf){const _0x114fc2=_0x1b4d17;let _0x3bf5b7=!![];const _0x1c54d9=!_0x4aaccf['reverse']?markets[_0x4aaccf[_0x114fc2(0x1ad)]][_0x114fc2(0x1ed)]['amount'][_0x114fc2(0x1fe)]:markets[_0x4aaccf[_0x114fc2(0x1ad)]][_0x114fc2(0x1ed)][_0x114fc2(0x1c5)]['min'],_0x4e3e92=!_0x4aaccf['reverse']?markets[_0x4aaccf[_0x114fc2(0x1ad)]]['limits']['cost'][_0x114fc2(0x1fe)]:markets[_0x4aaccf[_0x114fc2(0x1ad)]][_0x114fc2(0x1ed)][_0x114fc2(0x1ae)][_0x114fc2(0x1fe)];if(Math[_0x114fc2(0x233)](_0x4aaccf[_0x114fc2(0x242)])<_0x1c54d9)_0x3bf5b7=![];if(Math[_0x114fc2(0x233)](_0x4aaccf[_0x114fc2(0x242)])*_0x4aaccf[_0x114fc2(0x255)]<_0x4e3e92)_0x3bf5b7=![];return _0x3bf5b7;}async function getBalances(){const _0x2b23e9=_0x1b4d17;let _0x358edc=0x0,_0x1951c9;const _0x1b9509=config[_0x2b23e9(0x260)];currentCoins[_0x2b23e9(0x270)](_0xbc9dc8=>{const _0x3d87de=_0x2b23e9;if(_0xbc9dc8[_0x3d87de(0x287)]!=config[_0x3d87de(0x2a2)]){let _0x3aa4b2=global[_0x3d87de(0x284)][noslash(_0xbc9dc8[_0x3d87de(0x1ad)])];_0x1951c9=_0xbc9dc8['reverse']?0x1/_0x3aa4b2:_0x3aa4b2;}else _0x1951c9=0x1;let _0x3d20fb=_0xbc9dc8[_0x3d87de(0x265)]*_0x1951c9;_0x358edc+=_0x3d20fb,_0xbc9dc8[_0x3d87de(0x255)]=formatResult(Number(_0x1951c9),0x8),_0xbc9dc8['value']=_0x3d20fb;}),currentCoins[_0x2b23e9(0x270)](_0x474d3e=>{const _0x560697=_0x2b23e9;let _0x3534f0=config[_0x560697(0x210)][_0x560697(0x250)](_0x689d18=>_0x689d18[_0x560697(0x287)]==_0x474d3e['coin']),_0x5e2537=Number(_0x3534f0[_0x560697(0x259)]),_0x2453a7=_0x474d3e['value']/_0x358edc*0x64,_0x58b9e1=_0x5e2537*_0x358edc/0x64/_0x474d3e[_0x560697(0x255)]-_0x474d3e['number'];_0x474d3e['distribution']=formatResult(_0x2453a7,0x3),_0x474d3e[_0x560697(0x237)]=formatResult(_0x5e2537,0x3),_0x474d3e[_0x560697(0x242)]=formatResult(_0x58b9e1,0x8),_0x474d3e[_0x560697(0x1e4)]='',_0x474d3e[_0x560697(0x24c)]='';if(_0x474d3e[_0x560697(0x287)]!=config[_0x560697(0x2a2)]){if(_0x474d3e[_0x560697(0x259)]>_0x5e2537)_0x474d3e[_0x560697(0x1e4)]=_0x560697(0x249),_0x474d3e['valid']=checkMinimums(_0x474d3e);else _0x474d3e['distribution']<_0x5e2537&&(_0x474d3e[_0x560697(0x1e4)]=_0x560697(0x1c1),_0x474d3e['valid']=checkMinimums(_0x474d3e));}_0x474d3e[_0x560697(0x20a)]=_0x474d3e[_0x560697(0x259)]/_0x474d3e[_0x560697(0x237)]-0x1;}),currentCoins[_0x2b23e9(0x253)]((_0x1ee030,_0x2de0fb)=>_0x1ee030['delta']<_0x2de0fb[_0x2b23e9(0x20a)]?0x1:_0x2de0fb[_0x2b23e9(0x20a)]<_0x1ee030[_0x2b23e9(0x20a)]?-0x1:0x0);const _0x179463=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x179463['eur'],'usd':_0x179463[_0x2b23e9(0x202)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1b9509},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2b23e9(0x1f2)])headlessMode({'portfolio':currentCoins,'threshold':_0x1b9509});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xcbb449=_0x1b4d17;if(!lastBalances)return;let _0x349014=await getStartingBalances(![]),_0x3c67e5=[],_0x5d265b=[],_0x5e85ad;JSON[_0xcbb449(0x1b3)](lastBalances[_0xcbb449(0x210)])[_0xcbb449(0x270)](_0x5ea3a9=>{const _0x8131b1=_0xcbb449;let _0x2ffd8b={'coin':_0x5ea3a9[_0x8131b1(0x287)],'number':_0x5ea3a9[_0x8131b1(0x265)],'price':_0x5ea3a9['last']};_0x3c67e5[_0x8131b1(0x1d4)](_0x2ffd8b);if(!_0x349014[_0x8131b1(0x1ab)]||!_0x349014[_0x8131b1(0x1ab)][_0x8131b1(0x250)](_0x1ba82e=>_0x1ba82e[_0x8131b1(0x287)]==_0x5ea3a9[_0x8131b1(0x287)]&&_0x1ba82e['number']!=0x0))_0x5d265b[_0x8131b1(0x1d4)](_0x2ffd8b);});const _0x429910=await getFiat();_0x5e85ad={'date':lastBalances['time'][_0xcbb449(0x26a)]('\x20')[0x0],'eur':_0x429910[_0xcbb449(0x1e3)],'usd':_0x429910[_0xcbb449(0x202)],'coins':_0x3c67e5};let _0x19f421=dbPerformance[_0xcbb449(0x20f)](_0xcbb449(0x1e6))[_0xcbb449(0x250)]({'date':_0x5e85ad[_0xcbb449(0x261)]})[_0xcbb449(0x201)]();_0x19f421?dbPerformance[_0xcbb449(0x20f)](_0xcbb449(0x1e6))[_0xcbb449(0x250)]({'date':_0x5e85ad[_0xcbb449(0x261)]})[_0xcbb449(0x244)](_0x5e85ad)[_0xcbb449(0x267)]():dbPerformance[_0xcbb449(0x20f)](_0xcbb449(0x1e6))['push'](_0x5e85ad)[_0xcbb449(0x267)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x131a02=_0x1b4d17;if(dbPerformance[_0x131a02(0x258)](_0x131a02(0x1e6))[_0x131a02(0x201)]()){let _0x499d60=dbPerformance[_0x131a02(0x20f)](_0x131a02(0x1e6))['sortBy'](_0x131a02(0x261))['value']();proxyEmit(_0x131a02(0x21a),_0x499d60),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x5c0701=!![]){const _0x43e0a3=_0x1b4d17;let _0x292bef=dbPerformance[_0x43e0a3(0x20f)](_0x43e0a3(0x1e6))[_0x43e0a3(0x250)]({'date':config['startdate']})[_0x43e0a3(0x201)]();config['apiKey']!=''&&!_0x292bef&&(await setStartDatePerformance(config),_0x292bef=dbPerformance['get'](_0x43e0a3(0x1e6))[_0x43e0a3(0x250)]({'date':config[_0x43e0a3(0x214)]})['value']());if(config[_0x43e0a3(0x248)]==''||!_0x292bef)return{};let _0x400ea5=0x0,_0x157e4c=0x0,_0x30453c=0x0,_0x455edc=[],_0x5180d9=0x0;config[_0x43e0a3(0x210)][_0x43e0a3(0x270)](_0x4c2b41=>{const _0x18f769=_0x43e0a3;if(!_0x4c2b41[_0x18f769(0x1a6)]){_0x455edc[_0x5180d9]={'coin':_0x4c2b41['coin'],'symbol':_0x4c2b41[_0x18f769(0x1ad)],'number':_0x4c2b41[_0x18f769(0x1e5)],'price':_0x4c2b41[_0x18f769(0x293)]},_0x400ea5+=_0x4c2b41['startprice']*_0x4c2b41[_0x18f769(0x1e5)];if(config[_0x18f769(0x2a2)]==_0x18f769(0x1ff))_0x157e4c+=_0x4c2b41[_0x18f769(0x293)]*_0x4c2b41[_0x18f769(0x1e5)]*_0x292bef['eur'],_0x30453c+=_0x4c2b41['startprice']*_0x4c2b41[_0x18f769(0x1e5)]*_0x292bef['usd'];else{if(config['basecoin']==_0x18f769(0x1cf)||config['basecoin']==_0x18f769(0x29e)||config['basecoin']==_0x18f769(0x225))_0x157e4c+=_0x4c2b41['startprice']*_0x4c2b41[_0x18f769(0x1e5)]*_0x292bef['eur']/_0x292bef[_0x18f769(0x202)],_0x30453c+=_0x4c2b41[_0x18f769(0x293)]*_0x4c2b41[_0x18f769(0x1e5)];else config[_0x18f769(0x2a2)]==_0x18f769(0x283)&&(_0x157e4c+=_0x4c2b41['startprice']*_0x4c2b41[_0x18f769(0x1e5)],_0x30453c+=_0x4c2b41['startprice']*_0x4c2b41[_0x18f769(0x1e5)]*_0x292bef['usd']/_0x292bef[_0x18f769(0x1e3)]);}_0x5180d9++;}});let _0xe8efc0={'basecoin':_0x400ea5,'eur':_0x157e4c,'usd':_0x30453c,'coins':_0x455edc};if(_0x5c0701)proxyEmit(_0x43e0a3(0x1f6),_0xe8efc0);return _0xe8efc0;}function headlessMode(_0x44b71f){const _0x470f0d=_0x1b4d17;let _0x254c44=_0x44b71f[_0x470f0d(0x210)],_0x2f0a65=_0x44b71f[_0x470f0d(0x260)],_0x1e5591=[];for(let _0x32d13a of _0x254c44){if(_0x32d13a[_0x470f0d(0x287)]!=config[_0x470f0d(0x2a2)]){if(_0x32d13a[_0x470f0d(0x259)]/_0x32d13a[_0x470f0d(0x237)]-0x1>=_0x2f0a65/0x64){if(_0x32d13a[_0x470f0d(0x24c)])_0x1e5591[_0x470f0d(0x1d4)](_0x32d13a);}else{if(_0x32d13a[_0x470f0d(0x259)]/_0x32d13a[_0x470f0d(0x237)]-0x1<=-_0x2f0a65/0x64){if(_0x32d13a['valid'])_0x1e5591[_0x470f0d(0x1d4)](_0x32d13a);}}}}_0x1e5591[_0x470f0d(0x257)]>0x0&&placeOrder(_0x1e5591);}function symbolToCoin(_0x365849){const _0x28ac89=_0x1b4d17;let _0x5a72ab;if(_0x365849['includes']('/'+config[_0x28ac89(0x2a2)]))_0x5a72ab=_0x365849[_0x28ac89(0x28d)]('/'+config[_0x28ac89(0x2a2)],'');if(_0x365849['includes'](config['basecoin']+'/'))_0x5a72ab=_0x365849['replace'](config[_0x28ac89(0x2a2)]+'/','');return _0x5a72ab;}async function validateOrders(_0x1624f6=0x0){const _0xe7e270=_0x1b4d17;let _0x5461b8=[],_0x3efe32=config[_0xe7e270(0x274)]==_0xe7e270(0x272)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xe7e270(0x1e8)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xe7e270(0x270)](_0x5dd544=>{const _0x44d354=_0xe7e270;let _0x70333a=previousCoins[_0x44d354(0x250)](_0x103a39=>_0x103a39[_0x44d354(0x287)]==symbolToCoin(_0x5dd544[_0x44d354(0x1ad)])),_0x3abca7=currentCoins[_0x44d354(0x250)](_0x3476c3=>_0x3476c3[_0x44d354(0x287)]==symbolToCoin(_0x5dd544[_0x44d354(0x1ad)])),_0x2301fe,_0x5a1e88;_0x5dd544[_0x44d354(0x1e4)]==_0x44d354(0x1c1)&&!_0x5dd544[_0x44d354(0x277)]||_0x5dd544[_0x44d354(0x1e4)]==_0x44d354(0x249)&&_0x5dd544[_0x44d354(0x277)]?(_0x2301fe=_0x70333a['number']+0.9*_0x5dd544[_0x44d354(0x1f7)],_0x5a1e88=_0x70333a[_0x44d354(0x265)]+1.1*_0x5dd544[_0x44d354(0x1f7)]):(_0x2301fe=_0x70333a[_0x44d354(0x265)]-1.1*_0x5dd544[_0x44d354(0x1f7)],_0x5a1e88=_0x70333a['number']-0.9*_0x5dd544[_0x44d354(0x1f7)]);const _0x5c783c=_0x5dd544[_0x44d354(0x1f7)]!=0x0&&_0x3abca7[_0x44d354(0x265)]>=_0x2301fe&&_0x3abca7['number']<=_0x5a1e88;_0x5461b8[_0x44d354(0x1d4)](_0x5c783c);if(_0x5c783c&&config['ordertype']!='market'){if(_0x5dd544[_0x44d354(0x277)])logHistory('order',_0x44d354(0x25e)+_0x5dd544[_0x44d354(0x1ad)]+'\x20'+_0x5dd544[_0x44d354(0x1e4)]+'\x20#'+formatResult(_0x5dd544[_0x44d354(0x1f7)]/_0x5dd544[_0x44d354(0x27b)],0x8)+'\x20@'+formatResult(_0x5dd544[_0x44d354(0x27b)],0x8));else logHistory(_0x44d354(0x20d),_0x44d354(0x25e)+_0x5dd544[_0x44d354(0x1ad)]+'\x20'+_0x5dd544[_0x44d354(0x1e4)]+'\x20#'+formatResult(_0x5dd544[_0x44d354(0x1f7)],0x8)+'\x20@'+formatResult(_0x5dd544[_0x44d354(0x27b)],0x8));}}),_0x5461b8[_0xe7e270(0x270)]((_0x35648e,_0x333c49)=>{const _0xfafb8a=_0xe7e270;if(_0x35648e)lastOrders[_0xfafb8a(0x1d8)](_0x333c49,0x1);});if(_0x1624f6<_0x3efe32&&_0x5461b8[_0xe7e270(0x1aa)](![])){if(_0x1624f6==0x0){config[_0xe7e270(0x274)]==_0xe7e270(0x272)?logHistory(_0xe7e270(0x29f),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0xe7e270(0x29f),_0xe7e270(0x1a8));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1624f6);},0xa*0x3e8);}else{(_0x1624f6==0x1||_0x1624f6==Math[_0xe7e270(0x27f)](_0x3efe32/0x2)||_0x1624f6==_0x3efe32-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1624f6);},validateOrderInterval);}}else{lockOrders=![];if(_0x1624f6>0x0&&!_0x5461b8[_0xe7e270(0x1aa)](![]))config[_0xe7e270(0x274)]==_0xe7e270(0x272)?logHistory(_0xe7e270(0x1d6),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0xe7e270(0x1d6),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x1624f6>0x0&&_0x5461b8['includes'](![])&&(config[_0xe7e270(0x274)]=='market'?logHistory(_0xe7e270(0x1d6),_0xe7e270(0x220)+Math['round'](_0x3efe32*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0xe7e270(0x270)](async _0x1d1c52=>{const _0x4cb827=_0xe7e270;try{const _0xd1fcb9=await exchange[_0x4cb827(0x23b)](_0x1d1c52[_0x4cb827(0x269)],_0x1d1c52[_0x4cb827(0x1ad)]);}catch(_0x30728b){if(_0x30728b[_0x4cb827(0x296)]()['includes'](_0x4cb827(0x262))){}else await handleError(_0x30728b,_0x4cb827(0x1d9));}}),logHistory(_0xe7e270(0x1d6),_0xe7e270(0x1b5)+Math[_0xe7e270(0x27f)](_0x3efe32*validateOrderInterval/0xea60)+_0xe7e270(0x289))));}}async function resetCoinResults(){const _0x41720e=_0x1b4d17;dbCoinResults[_0x41720e(0x20f)](_0x41720e(0x1ab))[_0x41720e(0x245)]()['write']();let _0xfd6434=await getStartingBalances(![]);_0xfd6434['coins'][_0x41720e(0x270)](_0x3308eb=>{const _0x5c92da=_0x41720e,_0x2354ff=_0x3308eb['symbol'][_0x5c92da(0x1aa)](config['basecoin']+'/');if(_0x3308eb[_0x5c92da(0x287)]!=config[_0x5c92da(0x2a2)]){let _0xf85ad3={'coin':_0x3308eb['coin'],'number':_0x3308eb[_0x5c92da(0x265)],'breakeven':_0x3308eb[_0x5c92da(0x27b)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5c92da(0x20f)](_0x5c92da(0x1ab))[_0x5c92da(0x1d4)](_0xf85ad3)['write']();}});}async function updateCoinResults(_0x1dad37){const _0x45e27d=_0x1b4d17;let _0x3aea8f,_0x96f6bc,_0x42e041,_0x2af075,_0x4defe3,_0x2abb56,_0x1534eb=dbCoinResults['get'](_0x45e27d(0x1ab))[_0x45e27d(0x250)]({'coin':_0x1dad37['coin']})[_0x45e27d(0x201)]();if(!_0x1534eb)return;if(_0x1dad37[_0x45e27d(0x205)]&&_0x1dad37['fee']['currency']==config['basecoin'])_0x3aea8f=_0x1dad37['fee'][_0x45e27d(0x1c5)];else{if(_0x1dad37[_0x45e27d(0x205)]&&_0x1dad37[_0x45e27d(0x205)][_0x45e27d(0x21f)]=='BNB')_0x3aea8f=_0x1dad37[_0x45e27d(0x205)][_0x45e27d(0x1c5)]*global[_0x45e27d(0x284)][_0x45e27d(0x1e2)+config[_0x45e27d(0x2a2)]];else _0x3aea8f=0.001*_0x1dad37[_0x45e27d(0x1f7)];}const _0x8ea5e1=_0x1dad37['symbol'][_0x45e27d(0x1aa)](config[_0x45e27d(0x2a2)]+'/');_0x8ea5e1&&(_0x2abb56={'coin':_0x1dad37[_0x45e27d(0x287)],'symbol':_0x1dad37['symbol'],'filled':_0x1dad37['filled']*_0x1dad37['price'],'side':_0x1dad37[_0x45e27d(0x1e4)]==_0x45e27d(0x249)?_0x45e27d(0x1c1):'sell','price':0x1/_0x1dad37[_0x45e27d(0x27b)]},_0x1dad37={..._0x2abb56});_0x1dad37['side']==_0x45e27d(0x1c1)?_0x42e041=(_0x1534eb[_0x45e27d(0x1f0)]*_0x1534eb[_0x45e27d(0x265)]+_0x1dad37['price']*_0x1dad37[_0x45e27d(0x1f7)])/(_0x1534eb['number']+_0x1dad37[_0x45e27d(0x1f7)]):_0x42e041=(_0x1534eb[_0x45e27d(0x1f0)]*_0x1534eb[_0x45e27d(0x265)]-_0x1dad37[_0x45e27d(0x27b)]*_0x1dad37[_0x45e27d(0x1f7)])/(_0x1534eb['number']-_0x1dad37[_0x45e27d(0x1f7)]);_0x1dad37[_0x45e27d(0x1e4)]==_0x45e27d(0x1c1)?_0x2af075=_0x1534eb[_0x45e27d(0x1ce)]:_0x2af075=_0x1534eb[_0x45e27d(0x1ce)]+(_0x1dad37[_0x45e27d(0x27b)]-_0x1534eb[_0x45e27d(0x1f0)])*_0x1dad37[_0x45e27d(0x1f7)];_0x96f6bc=_0x1dad37['side']==_0x45e27d(0x249)?_0x1534eb[_0x45e27d(0x265)]-_0x1dad37[_0x45e27d(0x1f7)]:_0x1534eb[_0x45e27d(0x265)]+_0x1dad37[_0x45e27d(0x1f7)],_0x4defe3=(_0x1dad37[_0x45e27d(0x27b)]-_0x42e041)*_0x96f6bc;let _0x15d2c1={'coin':_0x1dad37[_0x45e27d(0x287)],'number':_0x96f6bc,'breakeven':formatResult(_0x42e041,0x8),'realized':formatResult(_0x2af075,0x8),'unrealized':formatResult(_0x4defe3,0x8),'fees':formatResult(_0x1534eb['fees']+_0x3aea8f,0x8),'sells':_0x1dad37[_0x45e27d(0x1e4)]==_0x45e27d(0x249)?_0x1534eb['sells']+0x1:_0x1534eb[_0x45e27d(0x1f1)],'buys':_0x1dad37[_0x45e27d(0x1e4)]=='buy'?_0x1534eb['buys']+0x1:_0x1534eb[_0x45e27d(0x297)]};dbCoinResults['get'](_0x45e27d(0x1ab))[_0x45e27d(0x250)]({'coin':_0x1dad37['coin']})[_0x45e27d(0x244)](_0x15d2c1)['write']();}async function placeOrder(_0x117c3){const _0x3e8012=_0x1b4d17,_0x58f450=config[_0x3e8012(0x274)]=='market'?_0x3e8012(0x272):_0x3e8012(0x1c6);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x25af09 of _0x117c3){let _0x7da4a5,_0x1a23bf,_0x5a1a83,_0x44b148,_0x278fb3,_0x1ec1c2=_0x25af09[_0x3e8012(0x1ad)];try{const _0x287695=await exchange[_0x3e8012(0x286)](_0x1ec1c2),_0x1cb4b1=_0x287695[_0x1ec1c2];_0x7da4a5=_0x1cb4b1[_0x3e8012(0x255)],_0x1a23bf=_0x1cb4b1['bid'],_0x5a1a83=_0x1cb4b1['ask'];_0x25af09['reverse']?(_0x44b148=_0x25af09['side']==_0x3e8012(0x1c1)?_0x3e8012(0x249):_0x3e8012(0x1c1),_0x278fb3=Math[_0x3e8012(0x233)](_0x25af09[_0x3e8012(0x242)])/_0x7da4a5):(_0x44b148=_0x25af09[_0x3e8012(0x1e4)],_0x278fb3=Math[_0x3e8012(0x233)](_0x25af09[_0x3e8012(0x242)]));_0x58f450=='limit'&&(config[_0x3e8012(0x274)]==_0x3e8012(0x295)&&(_0x7da4a5=_0x44b148=='buy'?_0x1a23bf:_0x5a1a83),config[_0x3e8012(0x274)]==_0x3e8012(0x232)&&(_0x7da4a5=_0x44b148=='buy'?_0x5a1a83:_0x1a23bf));_0x278fb3=formatResult(_0x278fb3,0x8),_0x7da4a5=formatResult(_0x7da4a5,0x8);const _0x11a856=await exchange[_0x3e8012(0x246)](_0x1ec1c2,_0x58f450,_0x44b148,_0x278fb3,_0x7da4a5);lastOrders['push']({'orderId':_0x11a856['id'],'symbol':_0x1ec1c2,'side':_0x44b148,'reverse':_0x25af09[_0x3e8012(0x277)],'amount':_0x25af09[_0x3e8012(0x277)]?_0x11a856[_0x3e8012(0x1ae)]*_0x11a856[_0x3e8012(0x27b)]:_0x11a856[_0x3e8012(0x1ae)],'filled':_0x25af09[_0x3e8012(0x277)]?_0x11a856['filled']*_0x11a856['price']:_0x11a856[_0x3e8012(0x1f7)],'price':_0x11a856[_0x3e8012(0x27b)]});const _0x5a2ace=_0x44b148==_0x3e8012(0x249)?config[_0x3e8012(0x1bc)]?String[_0x3e8012(0x1c3)]('0x'+config[_0x3e8012(0x1bc)])+'\x20':'':config[_0x3e8012(0x224)]?String[_0x3e8012(0x1c3)]('0x'+config[_0x3e8012(0x224)])+'\x20':'',_0x21a019=_0x58f450=='market'?'Market':config[_0x3e8012(0x274)]==_0x3e8012(0x295)?_0x3e8012(0x266):_0x3e8012(0x254);if(_0x58f450==_0x3e8012(0x272))logHistory('order',''+_0x5a2ace+_0x21a019+_0x3e8012(0x217)+_0x1ec1c2+'\x20'+_0x44b148+'\x20#'+formatResult(_0x11a856[_0x3e8012(0x1f7)],0x8)+'\x20@'+formatResult(_0x11a856[_0x3e8012(0x27b)],0x8));else logHistory(_0x3e8012(0x20d),''+_0x5a2ace+_0x21a019+'\x20order:\x20'+_0x1ec1c2+'\x20'+_0x44b148+'\x20#'+formatResult(_0x11a856[_0x3e8012(0x1ae)],0x8)+'\x20@'+formatResult(_0x11a856[_0x3e8012(0x27b)],0x8));_0x11a856['coin']=_0x25af09[_0x3e8012(0x287)],await updateCoinResults(_0x11a856);if(config[_0x3e8012(0x227)]!=0x0){let _0x5d98e6=null;if(cooldownTracker[_0x3e8012(0x257)]==config['cooldown']-0x1)_0x5d98e6=cooldownTracker[_0x3e8012(0x1d7)]();const _0x1f5458=getTimeStamp();cooldownTracker[_0x3e8012(0x1d4)](_0x1f5458);if(_0x5d98e6){const _0xfd7e97=fns[_0x3e8012(0x280)](new Date(_0x1f5458),new Date(_0x5d98e6));_0xfd7e97<cooldownInterval&&(logHistory(_0x3e8012(0x29f),_0x3e8012(0x22b)+config[_0x3e8012(0x227)]+_0x3e8012(0x207)+cooldownInterval/0x3c+_0x3e8012(0x28e)+cooldownPeriod/(0xe10*0x3e8)+_0x3e8012(0x21c)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4929bb){if(_0x4929bb['toString']()['includes'](_0x3e8012(0x1cc)))logHistory(_0x3e8012(0x29f),_0x3e8012(0x292)+_0x1ec1c2);else{if(_0x4929bb[_0x3e8012(0x296)]()['includes'](_0x3e8012(0x22e)))logHistory(_0x3e8012(0x29f),'Order\x20amount\x20is\x20invalid:\x20'+_0x1ec1c2);else await handleError(_0x4929bb,_0x3e8012(0x221));}}}if(lastOrders[_0x3e8012(0x257)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x3e8012(0x1f2)]&&(config['ordertype']==_0x3e8012(0x272)?logHistory(_0x3e8012(0x29f),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3e8012(0x29f),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config['headless']&&logHistory(_0x3e8012(0x29f),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x438cd2,_0x233f32,_0x1212f5=''){const _0x5cbcf4=_0x1b4d17;let _0xff543b={'time':getTimeStamp(),'type':_0x438cd2,'event':_0x233f32};dbLogs['get']('logs')[_0x5cbcf4(0x1d4)](_0xff543b)[_0x5cbcf4(0x267)]();if(_0x1212f5=='')_0x1212f5=_0x233f32;proxyEmit(_0x5cbcf4(0x29b),{'log':_0xff543b,'summary':_0x1212f5}),process[_0x5cbcf4(0x273)]({'telegram':_0xff543b}),logging(''+_0xff543b[_0x5cbcf4(0x29b)]);}function emitHistory(_0x588339={}){const _0x39aa5f=_0x1b4d17;Object[_0x39aa5f(0x22a)](_0x588339)[_0x39aa5f(0x257)]==0x0&&(_0x588339={'type':['order',_0x39aa5f(0x29b)],'event':'','page':0x1});if(_0x588339[_0x39aa5f(0x230)]['includes']('event'))_0x588339[_0x39aa5f(0x230)][_0x39aa5f(0x1d8)](_0x588339[_0x39aa5f(0x230)][_0x39aa5f(0x278)]('event'),0x1,_0x39aa5f(0x29f),_0x39aa5f(0x1d6));if(dbLogs['has'](_0x39aa5f(0x1ea))[_0x39aa5f(0x201)]()){let _0x3225e1=dbLogs[_0x39aa5f(0x20f)]('logs')[_0x39aa5f(0x1dc)](_0x586c8b=>{const _0x4e2e3a=_0x39aa5f;if(_0x588339[_0x4e2e3a(0x230)]['length']==0x0)return![];else return _0x588339['type']['includes'](_0x586c8b[_0x4e2e3a(0x230)]);})['filter'](_0x2d7309=>{const _0x25e01b=_0x39aa5f;if(_0x588339[_0x25e01b(0x29b)]=='')return!![];else return _0x2d7309[_0x25e01b(0x29b)][_0x25e01b(0x1d0)]()[_0x25e01b(0x1aa)](_0x588339[_0x25e01b(0x29b)][_0x25e01b(0x1d0)]());})[_0x39aa5f(0x1db)](_0x39aa5f(0x228)),_0x58e4a7=_0x3225e1[_0x39aa5f(0x201)]()[_0x39aa5f(0x257)];_0x3225e1=_0x3225e1[_0x39aa5f(0x277)]()['slice']((_0x588339[_0x39aa5f(0x1e9)]-0x1)*logPageSize,_0x588339[_0x39aa5f(0x1e9)]*logPageSize-0x1)['reverse']()[_0x39aa5f(0x201)](),proxyEmit(_0x39aa5f(0x216),{'logs':_0x3225e1,'total':_0x58e4a7});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x2f6821){const _0x3b78fa=_0x1b4d17,_0x36c56d=new Date()[_0x3b78fa(0x1cb)]();if(!lastBotPause)lastBotPause=new Date()[_0x3b78fa(0x1cb)](),consecutivePauses=0x1;else{if(_0x36c56d-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x3b78fa(0x273)]({'stop':_0x3b78fa(0x206)});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x2f6821),botPaused=![],reset();}}async function handleError(_0x5149bb,_0x50f4fa,_0x28d508=''){const _0x1ab547=_0x1b4d17;if(_0x5149bb[_0x1ab547(0x296)]()[_0x1ab547(0x1aa)](_0x1ab547(0x21e)))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x288)),await pauseBot(pauseBotInterval);else{if(_0x5149bb['toString']()['includes']('ExchangeNotAvailable'))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x268)),await pauseBot(pauseBotInterval);else{if(_0x5149bb['toString']()[_0x1ab547(0x1aa)](_0x1ab547(0x1eb)))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x290)),await pauseBot(pauseBotInterval);else{if(_0x5149bb['toString']()[_0x1ab547(0x1aa)](_0x1ab547(0x1fd)))logHistory('error',_0x50f4fa+_0x1ab547(0x271)),logHistory(_0x1ab547(0x29f),_0x1ab547(0x27d)),process[_0x1ab547(0x273)]({'stop':_0x1ab547(0x236)});else{if(_0x5149bb[_0x1ab547(0x296)]()[_0x1ab547(0x1aa)](_0x1ab547(0x264)))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x1be)),logHistory(_0x1ab547(0x29f),_0x1ab547(0x27d)),process[_0x1ab547(0x273)]({'stop':_0x1ab547(0x236)});else{if(_0x5149bb[_0x1ab547(0x296)]()['includes'](_0x1ab547(0x1c4)))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x26e)),logHistory(_0x1ab547(0x29f),_0x1ab547(0x27d)),process[_0x1ab547(0x273)]({'stop':_0x1ab547(0x236)});else{if(_0x5149bb[_0x1ab547(0x296)]()[_0x1ab547(0x1aa)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x50f4fa+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(1)\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x1ab547(0x27d)),process[_0x1ab547(0x273)]({'stop':_0x1ab547(0x236)});else{if(_0x5149bb[_0x1ab547(0x296)]()[_0x1ab547(0x1aa)](_0x1ab547(0x1a9)))logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x1fa)),logHistory(_0x1ab547(0x29f),_0x1ab547(0x27d)),process[_0x1ab547(0x273)]({'stop':_0x1ab547(0x236)});else _0x5149bb[_0x1ab547(0x296)]()[_0x1ab547(0x1aa)](_0x1ab547(0x1fb))?logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x23c)):(logHistory(_0x1ab547(0x29f),_0x50f4fa+_0x1ab547(0x1f3)),logging(_0x50f4fa+'\x20|\x20Error\x20details:\x20',_0x5149bb),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x1d8207,_0x1c236f){return parseFloat(_0x1d8207['toFixed'](_0x1c236f));}function logging(_0x4f5616,_0x48a90e=''){const _0x3202b3=_0x1b4d17;console[_0x3202b3(0x1c8)](getTimeStamp()+_0x3202b3(0x243)+botID+_0x3202b3(0x23f)+_0x4f5616,_0x48a90e);}function getServerTime(){const _0x2bcd0c=_0x1b4d17,_0xdd8db3=new Date();return _0xdd8db3[_0x2bcd0c(0x25f)]()+'/'+(_0xdd8db3['getMonth']()+0x1)[_0x2bcd0c(0x296)]()[_0x2bcd0c(0x1f4)](0x2,'0')+'/'+_0xdd8db3[_0x2bcd0c(0x1b9)]()[_0x2bcd0c(0x296)]()[_0x2bcd0c(0x1f4)](0x2,'0')+'\x20'+_0xdd8db3[_0x2bcd0c(0x298)]()[_0x2bcd0c(0x296)]()[_0x2bcd0c(0x1f4)](0x2,'0')+':'+_0xdd8db3[_0x2bcd0c(0x21d)]()[_0x2bcd0c(0x296)]()[_0x2bcd0c(0x1f4)](0x2,'0')+':'+_0xdd8db3[_0x2bcd0c(0x218)]()['toString']()[_0x2bcd0c(0x1f4)](0x2,'0');}function getTimeStamp(){const _0x484d29=_0x1b4d17,_0x40e110=shiftedTime();return _0x40e110[_0x484d29(0x25f)]()+'/'+(_0x40e110[_0x484d29(0x1b7)]()+0x1)['toString']()[_0x484d29(0x1f4)](0x2,'0')+'/'+_0x40e110[_0x484d29(0x1b9)]()[_0x484d29(0x296)]()[_0x484d29(0x1f4)](0x2,'0')+'\x20'+_0x40e110[_0x484d29(0x298)]()[_0x484d29(0x296)]()[_0x484d29(0x1f4)](0x2,'0')+':'+_0x40e110[_0x484d29(0x21d)]()[_0x484d29(0x296)]()[_0x484d29(0x1f4)](0x2,'0')+':'+_0x40e110['getSeconds']()[_0x484d29(0x296)]()[_0x484d29(0x1f4)](0x2,'0');}function getDate(){const _0x55bfe2=_0x1b4d17,_0x37f734=shiftedTime();return _0x37f734['getFullYear']()+'/'+(_0x37f734[_0x55bfe2(0x1b7)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x37f734[_0x55bfe2(0x1b9)]()[_0x55bfe2(0x296)]()[_0x55bfe2(0x1f4)](0x2,'0');}function getHour(){const _0x41057f=_0x1b4d17,_0x5ddbed=shiftedTime();return _0x5ddbed[_0x41057f(0x298)]()[_0x41057f(0x296)]()['padStart'](0x2,'0');}function sleep(_0x403d1c){return new Promise(_0x21e8a7=>setTimeout(_0x21e8a7,_0x403d1c));}function shiftedTime(){const _0x151b7b=_0x1b4d17,_0x5662d4=new Date();let _0x57d92c=_0x5662d4;if(config&&config[_0x151b7b(0x285)]!==0x0)_0x57d92c=fns['add'](_0x5662d4,{'hours':config[_0x151b7b(0x285)]});return _0x57d92c;}