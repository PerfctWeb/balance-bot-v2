const _0x3a5120=_0x38f0;(function(_0x5d73f3,_0x26c23b){const _0x433068=_0x38f0,_0x579105=_0x5d73f3();while(!![]){try{const _0x28c46d=parseInt(_0x433068(0x1f5))/0x1+-parseInt(_0x433068(0x214))/0x2*(parseInt(_0x433068(0x1a1))/0x3)+parseInt(_0x433068(0x2b5))/0x4+parseInt(_0x433068(0x1ff))/0x5*(-parseInt(_0x433068(0x131))/0x6)+parseInt(_0x433068(0x2bc))/0x7*(-parseInt(_0x433068(0x13d))/0x8)+-parseInt(_0x433068(0x1e8))/0x9*(parseInt(_0x433068(0x1d8))/0xa)+parseInt(_0x433068(0x136))/0xb;if(_0x28c46d===_0x26c23b)break;else _0x579105['push'](_0x579105['shift']());}catch(_0x20c8c8){_0x579105['push'](_0x579105['shift']());}}}(_0x1abf,0x9cb60));const _0x328b1f=function(){let _0x193a8b=!![];return function(_0x330cc8,_0x3bb135){const _0x40dcf7=_0x193a8b?function(){const _0x1376f6=_0x38f0;if(_0x3bb135){const _0x406859=_0x3bb135[_0x1376f6(0x199)](_0x330cc8,arguments);return _0x3bb135=null,_0x406859;}}:function(){};return _0x193a8b=![],_0x40dcf7;};}(),_0x5ddd7a=_0x328b1f(this,function(){const _0x25cb60=_0x38f0;return _0x5ddd7a['toString']()['search'](_0x25cb60(0x284))['toString']()[_0x25cb60(0x27e)](_0x5ddd7a)[_0x25cb60(0x265)](_0x25cb60(0x284));});_0x5ddd7a();'use strict';const ccxt=require(_0x3a5120(0x137)),low=require(_0x3a5120(0x15a)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3a5120(0x295)),forge=require(_0x3a5120(0x293)),util=require(_0x3a5120(0x20b)),argv=require(_0x3a5120(0x1ce))(process['argv'][_0x3a5120(0x14e)](0x2))[_0x3a5120(0x156)],path=require('path'),axios=require(_0x3a5120(0x24b));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3a5120(0x128),_0x3a5120(0x15f),_0x3a5120(0x2c1),_0x3a5120(0x2a9),_0x3a5120(0x1b0),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3a5120(0x277)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3a5120(0x239)+pauseBotInterval/0xea60+_0x3a5120(0x202),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x3a5120(0x21f))[_0x3a5120(0x1c3)],environment=require(_0x3a5120(0x21f))[_0x3a5120(0x11a)]||'production',botID=process['argv'][0x2]||_0x3a5120(0x1eb),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3a5120(0x16c)](_0x3a5120(0x17b)+botID+_0x3a5120(0x1bc)),killBot());const userID=process[_0x3a5120(0x156)][0x3]||'',configpath=userID?_0x3a5120(0x274)+userID+'/':'./config/',logspath=userID?_0x3a5120(0x209)+userID+'/':'./logs/',loggerfile=fs[_0x3a5120(0x27b)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x3a5120(0x1e9)](configpath)&&fs[_0x3a5120(0x22b)](configpath);!fs['existsSync'](logspath)&&fs[_0x3a5120(0x22b)](logspath);const configfile=configpath+_0x3a5120(0x153)+botID+_0x3a5120(0x1a3),logfile=configpath+_0x3a5120(0x153)+botID+_0x3a5120(0x251),performancefile=configpath+'bot-'+botID+_0x3a5120(0x1ae),coinresultsfile=configpath+_0x3a5120(0x153)+botID+_0x3a5120(0x195),settingsfile=configpath+_0x3a5120(0x1fc),securefile=configpath+_0x3a5120(0x212),configbackuppath=configpath+_0x3a5120(0x264),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x3a5120(0x206)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x3a5120(0x206)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x3a5120(0x206)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3a5120(0x130)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x19a6ee=>{const _0x5d155b=_0x3a5120;console[_0x5d155b(0x16c)](_0x19a6ee);},'simple':_0x832994=>{const _0x3849c2=_0x3a5120;console['log'](_0x832994),loggerfile[_0x3849c2(0x206)](util[_0x3849c2(0x161)](_0x832994)+'\x0a');},'full':async(_0x15c780,_0x4b48a7='')=>{const _0x454f53=_0x3a5120;let _0x19f8d8;if(config[_0x454f53(0x262)])_0x19f8d8=getTimeStamp()+':\x20'+config[_0x454f53(0x160)]+_0x454f53(0x257)+_0x15c780;else _0x19f8d8=getTimeStamp()+_0x454f53(0x211)+botID+_0x454f53(0x257)+_0x15c780;console[_0x454f53(0x16c)](_0x19f8d8),loggerfile[_0x454f53(0x206)](util[_0x454f53(0x161)](_0x19f8d8)+'\x0a'),_0x4b48a7&&(console[_0x454f53(0x16c)](_0x4b48a7),loggerfile[_0x454f53(0x206)](util[_0x454f53(0x161)](_0x4b48a7)+'\x0a'));},'debug':async(_0x5b69a6,_0xdcdc8d='')=>{const _0x4b5347=_0x3a5120;let _0x3d2be3;if(config[_0x4b5347(0x262)])_0x3d2be3=getTimeStamp()+':\x20'+config[_0x4b5347(0x160)]+_0x4b5347(0x252)+_0x5b69a6;else _0x3d2be3=getTimeStamp()+_0x4b5347(0x211)+botID+_0x4b5347(0x252)+_0x5b69a6;if(debugging)console[_0x4b5347(0x16c)](_0x3d2be3);loggerfile[_0x4b5347(0x206)](util['format'](_0x3d2be3)+'\x0a');if(_0xdcdc8d){if(debugging)console['log'](_0xdcdc8d);loggerfile[_0x4b5347(0x206)](util[_0x4b5347(0x161)](_0xdcdc8d)+'\x0a');}}};process['on']('uncaughtException',function(_0x383e02){const _0x192655=_0x3a5120;handleError(_0x383e02,_0x192655(0x25e));});settings[_0x3a5120(0x1b6)]!=config[_0x3a5120(0x1b6)]&&updateTimeshift(settings['timeshift']);settings[_0x3a5120(0x2aa)]!=config[_0x3a5120(0x2aa)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x3a5120(0x20a)]&&!config[_0x3a5120(0x20a)]||!settings['marketcapApi']&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x3a5120(0x20a)]);process[_0x3a5120(0x1bd)]({'started':_0x3a5120(0x217)},_0x244ca5=>{}),initializeProcessListeners();function proxyEmit(_0x2d521d,_0x4ac974=null){process['send']({'function':_0x2d521d,'args':_0x4ac974},_0xd4f39e=>{});}function initializeProcessListeners(){const _0x287847=_0x3a5120;process['on'](_0x287847(0x1f4),_0x5c2a40=>{const _0x4534c6=_0x287847;switch(Object['keys'](_0x5c2a40)[0x0]){case _0x4534c6(0x1b6):_0x5c2a40['timeshift']!=undefined&&(settings['timeshift']=_0x5c2a40[_0x4534c6(0x1b6)],updateTimeshift(settings[_0x4534c6(0x1b6)]));break;case _0x4534c6(0x2aa):_0x5c2a40[_0x4534c6(0x2aa)]!=undefined&&(settings[_0x4534c6(0x2aa)]=_0x5c2a40[_0x4534c6(0x2aa)],updateOnepagemode(settings[_0x4534c6(0x2aa)]));break;case _0x4534c6(0x20a):_0x5c2a40[_0x4534c6(0x20a)]!=undefined&&(settings[_0x4534c6(0x20a)]=_0x5c2a40[_0x4534c6(0x20a)],updateMarketcapApi(settings[_0x4534c6(0x20a)]));break;case'bots':_0x5c2a40[_0x4534c6(0x110)]!=undefined&&(bots=JSON[_0x4534c6(0x200)](_0x5c2a40[_0x4534c6(0x110)]),proxyEmit('bots',bots));break;case'function':switch(_0x5c2a40[_0x4534c6(0x180)]){case _0x4534c6(0x1ef):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x4534c6(0x1e0):emitHistory(_0x5c2a40[_0x4534c6(0x22d)]);break;case _0x4534c6(0x2a0):deleteHistoryAlerts(_0x5c2a40['args']);break;case _0x4534c6(0x179):getPortfolio(_0x5c2a40[_0x4534c6(0x22d)]);break;case'storeConfiguration':storeConfiguration(_0x5c2a40[_0x4534c6(0x22d)]);break;case'storeHeadless':storeHeadless(_0x5c2a40[_0x4534c6(0x22d)]);break;case'storeFiat':storeFiat(_0x5c2a40[_0x4534c6(0x22d)]);break;case _0x4534c6(0x2be):resetHistory();break;case _0x4534c6(0x29a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x5c2a40[_0x4534c6(0x22d)]);break;case'cancelLoading':cancelLoading();break;case _0x4534c6(0x138):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4534c6(0x20f):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x35c582=![]){const _0x4a7859=_0x3a5120;logger[_0x4a7859(0x1b4)](_0x4a7859(0x287)+(_0x35c582?_0x4a7859(0x2b1):'no\x20exchange\x20reloaded')+_0x4a7859(0x147)+config[_0x4a7859(0x261)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x35c582)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4a7859(0x203)]!=''&&config['apiKey']!=_0x4a7859(0x273)){loadingProgress=0x0;_0x35c582&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x472b85=await getCoins();[currentCoins,currentCoinsAll]=_0x472b85,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4a7859(0x1b4)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x4a7859(0x158)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x13d827=![]){const _0x28ad09=_0x3a5120;logger[_0x28ad09(0x1b4)](_0x28ad09(0x246)+(_0x13d827?_0x28ad09(0x233):_0x28ad09(0x1da))+_0x28ad09(0x253)+config[_0x28ad09(0x261)]);if(pidBalances)clearTimeout(pidBalances);if(_0x13d827){getBalances();return;}coinsLoaded=![];if(config[_0x28ad09(0x203)]!=''&&config[_0x28ad09(0x203)]!=_0x28ad09(0x273)){loadingProgress=0x1;const _0x252a2a=await getCoins();[currentCoins,currentCoinsAll]=_0x252a2a,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x28ad09(0x1b4)](_0x28ad09(0x19d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x28ad09(0x158)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2a0900){const _0x1be1a1=_0x3a5120;let _0x50e71d=![];if(_0x2a0900)_0x50e71d=!![];let _0x391d06;_0x50e71d?_0x391d06=_0x2a0900[_0x1be1a1(0x193)](_0x43bfba=>_0x43bfba[_0x1be1a1(0x1c4)]):_0x391d06=currentCoinsAll[_0x1be1a1(0x193)](_0x2906b7=>_0x2906b7[_0x1be1a1(0x1c4)]);if(!config[_0x1be1a1(0x20a)]||!_0x50e71d&&!config[_0x1be1a1(0x11d)]||_0x391d06[_0x1be1a1(0x158)]==0x0)return;let _0x1b9c4a=null;try{_0x1b9c4a=await axios[_0x1be1a1(0x163)](_0x1be1a1(0x132),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1be1a1(0x20a)]},'params':{'symbol':_0x391d06[_0x1be1a1(0x26c)]()}});}catch(_0x21e3a3){_0x1b9c4a=null,_0x21e3a3[_0x1be1a1(0x26c)]()[_0x1be1a1(0x19c)](_0x1be1a1(0x282))?(config[_0x1be1a1(0x20a)]=![],updateConfig(),proxyEmit(_0x1be1a1(0x208),emittedConfiguration()),logHistory(_0x1be1a1(0x152),_0x1be1a1(0x12e))):(logHistory(_0x1be1a1(0x152),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x1be1a1(0x202)),logger[_0x1be1a1(0x1b4)]('Error\x20details:',_0x21e3a3[_0x1be1a1(0x26c)]()+_0x1be1a1(0x17a)+_0x21e3a3['code']));}if(_0x1b9c4a){let _0x2f21b8=0x0;const _0x292299=_0x1b9c4a[_0x1be1a1(0x10c)];_0x391d06[_0x1be1a1(0x29e)](_0x27edd6=>{const _0x3a8eba=_0x1be1a1;if(_0x292299[_0x3a8eba(0x10c)][_0x27edd6][0x0])_0x2f21b8+=_0x292299[_0x3a8eba(0x10c)][_0x27edd6][0x0][_0x3a8eba(0x12d)][_0x3a8eba(0x128)][_0x3a8eba(0x266)];}),_0x391d06[_0x1be1a1(0x29e)](_0x5363be=>{const _0x30198d=_0x1be1a1,_0x5f248d=_0x292299['data'][_0x5363be][0x0]?_0x292299[_0x30198d(0x10c)][_0x5363be][0x0][_0x30198d(0x12d)][_0x30198d(0x128)]['market_cap']:0x0;if(_0x50e71d){const _0x141f5f=_0x2a0900[_0x30198d(0x146)](_0x2e69b2=>_0x2e69b2[_0x30198d(0x1c4)]==_0x5363be);_0x141f5f&&(_0x141f5f[_0x30198d(0x15d)]=_0x5f248d);}else{const _0x51dd99=currentCoins[_0x30198d(0x146)](_0x484ab3=>_0x484ab3['coin']==_0x5363be);_0x51dd99&&(_0x51dd99['marketcap']=_0x5f248d);const _0x559b06=currentCoinsAll[_0x30198d(0x146)](_0x1acbe1=>_0x1acbe1[_0x30198d(0x1c4)]==_0x5363be);_0x559b06&&(_0x559b06[_0x30198d(0x15d)]=_0x5f248d);}}),!_0x50e71d&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2314c4=_0x3a5120,_0x40385a=0x2;let _0xfd87b0=0x0,_0xde5bdd=0x0,_0x44c0d3=0x0,_0x2dedbb=0x0,_0x15daea=0x0;config['portfolio']['forEach'](_0x50e79a=>{const _0x174105=_0x38f0;if(!_0x50e79a[_0x174105(0x1cf)]){_0x44c0d3++,_0xfd87b0+=_0x50e79a[_0x174105(0x1c8)];if(_0x50e79a[_0x174105(0x1c8)]===-0x1){_0xfd87b0++;const _0x70d485=currentCoinsAll[_0x174105(0x146)](_0x466ce1=>_0x466ce1[_0x174105(0x1c4)]==_0x50e79a[_0x174105(0x1c4)]);_0x70d485&&(_0x2dedbb+=_0x70d485[_0x174105(0x15d)],_0x15daea+=Math['sqrt'](_0x70d485[_0x174105(0x15d)]));}if(_0x50e79a['slider']!==-0x1)_0xde5bdd++;}});let _0x7d6f7a;const _0xeecddd=0x64-_0xfd87b0,_0x248bb1=_0x44c0d3-_0xde5bdd;_0x7d6f7a=_0x248bb1===0x0?_0xfd87b0:Math[_0x2314c4(0x21d)](0x64,_0xfd87b0),config[_0x2314c4(0x11e)]['forEach'](_0xdf68a1=>{const _0x3bce35=_0x2314c4,_0x14e0ff=currentCoinsAll[_0x3bce35(0x146)](_0x5c2cc6=>_0x5c2cc6['coin']==_0xdf68a1[_0x3bce35(0x1c4)]);_0x14e0ff&&(_0xdf68a1['marketcap']=_0x14e0ff[_0x3bce35(0x15d)]);if(!_0xdf68a1[_0x3bce35(0x1cf)]){if(_0x7d6f7a<=0x64){if(_0xdf68a1['slider']===-0x1){if(_0x2dedbb!==0x0&&config['marketcapEnabled']){if(_0x14e0ff){if(config['marketcapEnabled']==_0x3bce35(0x15d))_0xdf68a1[_0x3bce35(0x2a2)]=(_0xeecddd/(_0x2dedbb/_0x14e0ff[_0x3bce35(0x15d)]))['toFixed'](_0x40385a);else config[_0x3bce35(0x11d)]==_0x3bce35(0x2a6)&&(_0xdf68a1[_0x3bce35(0x2a2)]=(_0xeecddd/(_0x15daea/Math[_0x3bce35(0x26e)](_0x14e0ff[_0x3bce35(0x15d)])))[_0x3bce35(0x168)](_0x40385a));}}}}}}),updateConfig();}function updateConfig(){const _0x2958cd=_0x3a5120;let _0x4d866e=dbConfig[_0x2958cd(0x163)](_0x2958cd(0x1ec))[_0x2958cd(0x146)]({'botID':botID})[_0x2958cd(0x18d)]();_0x4d866e&&dbConfig[_0x2958cd(0x163)]('bot')[_0x2958cd(0x146)]({'botID':botID})[_0x2958cd(0x188)](config)['write']();}function logMemory(){const _0x2e83af=_0x3a5120;if(environment!=_0x2e83af(0x150))return;const _0x308f54=process[_0x2e83af(0x241)]()[_0x2e83af(0x256)]/0x400/0x400;logger[_0x2e83af(0x1b4)](_0x2e83af(0x21c)+process[_0x2e83af(0x1ea)]+'\x20uses\x20'+formatResult(_0x308f54,0x1)+'\x20MB');}async function startScheduler(){const _0x50ae9c=shiftedTime()['getHours']();getMarketCap(),_0x50ae9c==0x1&&logMemory(),_0x50ae9c%0x4==0x2&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3bbbe4=![]){const _0x44e92f=_0x3a5120;logger['debug'](_0x44e92f(0x27c));if(!_0x3bbbe4)while(lockOrders!=ORDERS[_0x44e92f(0x25a)]||coolingDown){await sleep(0x3e8);}process[_0x44e92f(0x1bd)]({'stop':_0x44e92f(0x2af)},_0x144554=>{});}async function initExchange(_0x1780db=config[_0x3a5120(0x261)],_0x51f4f6=config[_0x3a5120(0x203)],_0x44c788=config[_0x3a5120(0x14f)],_0x5f0a5a=config['apiPassword']){const _0x379b76=_0x3a5120;if(exchange){logger[_0x379b76(0x1b4)](_0x379b76(0x201));return;}logger[_0x379b76(0x1b4)](_0x379b76(0x294));!supportedExchanges()[_0x379b76(0x19c)](_0x1780db)&&(logHistory(_0x379b76(0x152),_0x379b76(0x219)+_0x1780db+_0x379b76(0x24c)),killBot());const _0x1bac90=ccxt[_0x379b76(0x283)][_0x1780db[_0x379b76(0x1f0)]()];exchange=new _0x1bac90({'apiKey':_0x51f4f6,'secret':_0x44c788,'options':{'defaultType':'spot'}});if(_0x5f0a5a)exchange[_0x379b76(0x19f)]=_0x5f0a5a;}function updateExchange(_0x1e7acc,_0x123b1a,_0xb9b9aa=null){const _0x17d015=_0x3a5120;exchange[_0x17d015(0x203)]=_0x1e7acc,exchange['apiSecret']=_0x123b1a,exchange[_0x17d015(0x24e)]=_0xb9b9aa,logger[_0x17d015(0x1b4)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0xb7e7f1=_0x3a5120;let _0x415d85=config[_0xb7e7f1(0x1c2)]==_0xb7e7f1(0x1b9)?_0xb7e7f1(0x1b9):config[_0xb7e7f1(0x1c2)]==_0xb7e7f1(0x290)?_0xb7e7f1(0x290):_0xb7e7f1(0x24a),_0x46989a=allSymbols[_0xb7e7f1(0x19c)](_0x415d85+_0xb7e7f1(0x177))?_0xb7e7f1(0x128):allSymbols[_0xb7e7f1(0x19c)](_0x415d85+_0xb7e7f1(0x267))?_0xb7e7f1(0x2a9):'EUR',_0x104b59=allSymbols[_0xb7e7f1(0x19c)](_0x415d85+_0xb7e7f1(0x178))?_0xb7e7f1(0x1fb):_0x46989a;enableFiatToggle=!![],_0x46989a==_0xb7e7f1(0x1fb)&&(enableFiatToggle=![],storeFiat('EUR')),_0x104b59!=_0xb7e7f1(0x1fb)&&(enableFiatToggle=![],storeFiat(_0xb7e7f1(0x128))),stablecoins={'eur':{'coin':''+_0x415d85+_0x104b59,'symbol':_0x415d85+'/'+_0x104b59},'usd':{'coin':''+_0x415d85+_0x46989a,'symbol':_0x415d85+'/'+_0x46989a}};}async function initwsCcxt(){const _0x3c97cd=_0x3a5120;initCycle++;const _0x3ea897=initCycle;let _0x296d60=[];config[_0x3c97cd(0x11e)][_0x3c97cd(0x29e)](_0x504423=>{const _0x53916d=_0x3c97cd;if(!_0x504423[_0x53916d(0x1cf)]&&_0x504423[_0x53916d(0x1c4)]!=config['basecoin'])_0x296d60[_0x53916d(0x11c)](_0x504423['symbol']);});if(!_0x296d60[_0x3c97cd(0x19c)](stablecoins['eur'][_0x3c97cd(0x19a)]))_0x296d60[_0x3c97cd(0x11c)](stablecoins[_0x3c97cd(0x223)][_0x3c97cd(0x19a)]);if(!_0x296d60[_0x3c97cd(0x19c)](stablecoins[_0x3c97cd(0x1ad)][_0x3c97cd(0x19a)]))_0x296d60[_0x3c97cd(0x11c)](stablecoins[_0x3c97cd(0x1ad)][_0x3c97cd(0x19a)]);if(config[_0x3c97cd(0x261)][_0x3c97cd(0x232)](_0x3c97cd(0x121))&&config[_0x3c97cd(0x1c2)]!=_0x3c97cd(0x290)){if(!_0x296d60[_0x3c97cd(0x19c)](_0x3c97cd(0x13c)+config[_0x3c97cd(0x1c2)]))_0x296d60['push'](_0x3c97cd(0x13c)+config[_0x3c97cd(0x1c2)]);}loadCoins(_0x296d60),_0x296d60=validateSymbols(_0x296d60);const _0x1fe33f=async _0x5e3165=>{const _0x3d3989=_0x3c97cd;let _0x85057;try{const _0x343be1=await getTickers(_0x5e3165);Object[_0x3d3989(0x272)](_0x343be1)[_0x3d3989(0x29e)](_0x4bbbcc=>{const _0x193fb8=_0x3d3989;_0x85057=_0x4bbbcc[0x1][_0x193fb8(0x19a)],gTicker[noslash(_0x85057)]=_0x4bbbcc[0x1]['last'],gChange[_0x85057]=_0x4bbbcc[0x1][_0x193fb8(0x23e)];});}catch(_0x20c800){await handleError(_0x20c800,'initTickers()',_0x85057);}},_0x53256f=async _0x52871f=>{const _0x3267eb=_0x3c97cd;while(initCycle==_0x3ea897){if(!botPaused)try{const _0x29ee54=await exchange[_0x3267eb(0x2b4)](_0x52871f);gTicker[noslash(_0x29ee54[0x0][_0x3267eb(0x19a)])]=_0x29ee54[0x0][_0x3267eb(0x1e7)];}catch(_0x511891){if(!exchangeStopped)await handleError(_0x511891,'watchTrades()',_0x52871f);}else await sleep(0x64);}},_0x15b8df=async _0x548785=>{const _0x472440=_0x3c97cd;while(initCycle==_0x3ea897){if(!botPaused)try{const _0xd666ba=await exchange[_0x472440(0x171)](_0x548785),_0xf8862a=_0xd666ba[_0x472440(0x269)]();gTicker[noslash(_0xf8862a['symbol'])]=_0xf8862a[_0x472440(0x1e7)];}catch(_0x50a55d){if(!exchangeStopped)await handleError(_0x50a55d,_0x472440(0x174),_0x548785[_0x472440(0x26c)]());}else await sleep(0x64);}},_0x793ac8=async _0x494359=>{const _0x1e4416=_0x3c97cd;while(initCycle==_0x3ea897){if(!botPaused){let _0x5cdaca;try{await sleep(0x3c*0x3e8);const _0x65450f=await getTickers(_0x494359);Object[_0x1e4416(0x272)](_0x65450f)[_0x1e4416(0x29e)](_0x341ad1=>{const _0xa3c17f=_0x1e4416;_0x5cdaca=_0x341ad1[0x1][_0xa3c17f(0x19a)],gChange[_0x5cdaca]=_0x341ad1[0x1][_0xa3c17f(0x23e)];});}catch(_0x46024c){if(!exchangeStopped)await handleError(_0x46024c,_0x1e4416(0x191),_0x5cdaca);}}else await sleep(0x64);}},_0x593c88=async _0x2d4951=>{const _0x3949d9=_0x3c97cd;while(initCycle==_0x3ea897){if(!botPaused)try{const _0x49e9d9=await exchange[_0x3949d9(0x29d)](_0x2d4951);initCycle==_0x3ea897&&_0x49e9d9[_0x3949d9(0x29e)](_0x195f80=>{updateNumberCoinsCcxt(_0x195f80);});}catch(_0x1a26f6){if(!exchangeStopped)await handleError(_0x1a26f6,'watchOrders()');}else await sleep(0x64);}};_0x1fe33f(_0x296d60),_0x793ac8(_0x296d60),exchange['has']['watchTradesForSymbols']&&!(config[_0x3c97cd(0x261)]==_0x3c97cd(0x2ae)&&_0x296d60['length']>0xa)?_0x15b8df(_0x296d60):_0x296d60['forEach'](_0x48fdd0=>{_0x53256f(_0x48fdd0);}),_0x296d60[_0x3c97cd(0x29e)](_0xead88c=>{_0x593c88(_0xead88c);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5dec83){const _0x3357d5=_0x3a5120;let _0x3adb76={};try{if(config[_0x3357d5(0x261)]!=_0x3357d5(0x183))_0x3adb76=await exchange[_0x3357d5(0x126)](_0x5dec83);else for(const _0x4246ad of _0x5dec83){const _0x314423=await exchange[_0x3357d5(0x27d)](_0x4246ad);_0x3adb76[_0x4246ad]=_0x314423;}return _0x3adb76;}catch(_0x3573e1){throw _0x3573e1;}}function setBlockTransactionDetection(_0x4b16a5){const _0x57187b=_0x3a5120;blockTransactionDetection=_0x4b16a5,logger[_0x57187b(0x1b4)](_0x57187b(0x1a8)+blockTransactionDetection);}async function detectLiquidityChange(_0x496f92=0x0){const _0x270b32=_0x3a5120;transactionDetectionOngoing=!![];try{const _0x1085ac=await getCoins(_0x496f92),[_0x5dd380,_0xcc1913]=_0x1085ac;let _0x5cf304=[];currentCoins[_0x270b32(0x29e)](_0x127c5e=>{const _0x16de54=_0x270b32,_0x1ca3b3=_0x5dd380[_0x16de54(0x146)](_0x59f04c=>_0x59f04c[_0x16de54(0x1c4)]==_0x127c5e[_0x16de54(0x1c4)]);if(_0x1ca3b3){if(_0x127c5e[_0x16de54(0x129)]!=_0x1ca3b3['number']){let _0x33d39b;if(_0x127c5e[_0x16de54(0x1c4)]!=config[_0x16de54(0x1c2)]){const _0x3b0fcc=gTicker[noslash(_0x127c5e[_0x16de54(0x19a)])];_0x33d39b=_0x127c5e['reverse']?0x1/_0x3b0fcc:_0x3b0fcc;}else _0x33d39b=0x1;_0x5cf304[_0x16de54(0x11c)]({'coin':_0x127c5e[_0x16de54(0x1c4)],'symbol':_0x127c5e[_0x16de54(0x19a)],'price':_0x33d39b,'number':Number(formatResult(_0x1ca3b3[_0x16de54(0x129)]-_0x127c5e[_0x16de54(0x129)],0x8)),'basecoinvalue':_0x33d39b*(_0x1ca3b3[_0x16de54(0x129)]-_0x127c5e[_0x16de54(0x129)])});}}});if(_0x5cf304[_0x270b32(0x158)]>0x0&&!blockTransactionDetection){for(const _0x40f8aa of _0x5cf304){if(config['autoliquidity']){logger[_0x270b32(0x1b4)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x40f8aa['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x270b32(0x1f2)]);if(lastFees[_0x270b32(0x1f2)]==0x0||Math['abs'](_0x40f8aa['basecoinvalue'])>lastFees[_0x270b32(0x1f2)]*0x3){if(config['autoliquidity']==_0x270b32(0x13e)){delete _0x40f8aa[_0x270b32(0x19a)],delete _0x40f8aa['basecoinvalue'];let _0x328ab0=[],_0x4f6d6b=[...config[_0x270b32(0x240)]]||[],_0x2f7136=config[_0x270b32(0x240)];_0x4f6d6b[_0x270b32(0x2a5)]((_0x3c9a78,_0x5b581c)=>_0x3c9a78[_0x270b32(0x299)]>_0x5b581c[_0x270b32(0x299)]?-0x1:_0x5b581c[_0x270b32(0x299)]>_0x3c9a78[_0x270b32(0x299)]?0x1:0x0);const _0x36f4b1=getDate();if(_0x4f6d6b[0x0]){const _0x469f80=fns[_0x270b32(0x200)](_0x4f6d6b[0x0][_0x270b32(0x299)],_0x270b32(0x1d3),new Date()),_0x25bea7=fns[_0x270b32(0x200)](_0x36f4b1,_0x270b32(0x1d3),new Date());if(fns[_0x270b32(0x21a)](_0x469f80,_0x25bea7)){_0x328ab0=_0x4f6d6b[0x0][_0x270b32(0x27f)];const _0x10d4b7=_0x328ab0[_0x270b32(0x146)](_0x104999=>_0x104999[_0x270b32(0x1c4)]==_0x40f8aa[_0x270b32(0x1c4)]);_0x10d4b7?(_0x10d4b7[_0x270b32(0x129)]+=_0x40f8aa[_0x270b32(0x129)],_0x10d4b7[_0x270b32(0x129)]==0x0&&(_0x328ab0=_0x328ab0[_0x270b32(0x1a6)](_0x24f59b=>{const _0x515c54=_0x270b32;return _0x24f59b[_0x515c54(0x1c4)]!=_0x40f8aa[_0x515c54(0x1c4)];}))):_0x328ab0['push'](_0x40f8aa);const _0x33dbe9=_0x2f7136[_0x270b32(0x146)](_0x4d7efe=>_0x4d7efe['date']==_0x36f4b1);_0x33dbe9[_0x270b32(0x27f)]=_0x328ab0;}else _0x2f7136[_0x270b32(0x11c)]({'date':_0x36f4b1,'changes':[_0x40f8aa]});}const _0x179f68=_0x2f7136[_0x270b32(0x146)](_0x5e0f7e=>_0x5e0f7e['date']==_0x36f4b1);if(_0x179f68){let _0x2b3281=!![];_0x179f68[_0x270b32(0x27f)][_0x270b32(0x29e)](_0x1d0b85=>{if(_0x1d0b85['number']!=0x0)_0x2b3281=![];}),_0x2b3281&&(_0x2f7136=_0x2f7136[_0x270b32(0x1a6)](_0x5be5d9=>{const _0x5d490f=_0x270b32;return _0x5be5d9[_0x5d490f(0x299)]!=_0x36f4b1;}));}let _0x4b2740=dbConfig['get'](_0x270b32(0x1ec))[_0x270b32(0x146)]({'botID':botID})[_0x270b32(0x18d)]();_0x4b2740&&(dbConfig[_0x270b32(0x163)](_0x270b32(0x1ec))[_0x270b32(0x146)]({'botID':botID})['assign']({'liquidity':_0x2f7136})['write'](),config[_0x270b32(0x240)]=_0x2f7136);logHistory('success',_0x270b32(0x142)+Math[_0x270b32(0x10e)](_0x40f8aa[_0x270b32(0x129)])+'\x20'+_0x40f8aa[_0x270b32(0x1c4)]+'\x20'+(_0x40f8aa[_0x270b32(0x129)]>0x0?_0x270b32(0x10b):'removed')+_0x270b32(0x1be)),proxyEmit('configuration',emittedConfiguration());const _0x4ccebb=getNormalizedPerformance();emitPerformance(_0x4ccebb),getStartingBalances(_0x4ccebb),logger[_0x270b32(0x1b4)](_0x270b32(0x296));}else config[_0x270b32(0x155)]==_0x270b32(0x151)&&(config[_0x270b32(0x13a)]?(await storeHeadless({'headless':![]}),logHistory(_0x270b32(0x216),_0x270b32(0x142)+Math[_0x270b32(0x10e)](_0x40f8aa[_0x270b32(0x129)])+'\x20'+_0x40f8aa[_0x270b32(0x1c4)]+'\x20'+(_0x40f8aa['number']>0x0?_0x270b32(0x10b):_0x270b32(0x1fa))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0x270b32(0x142)+Math[_0x270b32(0x10e)](_0x40f8aa[_0x270b32(0x129)])+'\x20'+_0x40f8aa[_0x270b32(0x1c4)]+'\x20'+(_0x40f8aa['number']>0x0?_0x270b32(0x10b):_0x270b32(0x1fa))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x270b32(0x1b4)](_0x270b32(0x16b)+Math[_0x270b32(0x10e)](_0x40f8aa['number'])+'\x20'+_0x40f8aa['coin']+'\x20'+(_0x40f8aa[_0x270b32(0x129)]>0x0?_0x270b32(0x10b):_0x270b32(0x1fa)));}else logger[_0x270b32(0x1b4)](_0x270b32(0x142)+Math[_0x270b32(0x10e)](_0x40f8aa[_0x270b32(0x129)])+'\x20'+_0x40f8aa[_0x270b32(0x1c4)]+'\x20'+(_0x40f8aa[_0x270b32(0x129)]>0x0?'added':_0x270b32(0x1fa))+_0x270b32(0x2bb));}currentCoins=_0x5dd380,currentCoinsAll=_0xcc1913;}}catch(_0x4176cb){if(!exchangeStopped)await handleError(_0x4176cb,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5d4cf8=_0x3a5120;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x5d4cf8(0x272)](markets)['forEach'](_0x50c8a9=>{const _0x4b4935=_0x5d4cf8;_0x50c8a9[0x1]['active']&&_0x50c8a9[0x1][_0x4b4935(0x298)]&&allSymbols[_0x4b4935(0x11c)](_0x50c8a9[0x0]);}),logger[_0x5d4cf8(0x1b4)]('Market\x20&\x20symbol\x20data\x20updated');}catch(_0x3ae8a3){markets?logger[_0x5d4cf8(0x1b4)](_0x5d4cf8(0x11b)+_0x3ae8a3['toString']()):(loading[_0x5d4cf8(0x24d)]=!![],emitLoadingProgress(),_0x3ae8a3[_0x5d4cf8(0x26c)]()[_0x5d4cf8(0x1f0)]()[_0x5d4cf8(0x19c)](_0x5d4cf8(0x133))||_0x3ae8a3[_0x5d4cf8(0x26c)]()['toLowerCase']()['includes'](_0x5d4cf8(0x2c0))?logHistory(_0x5d4cf8(0x152),_0x5d4cf8(0x185)):handleErrorNoStop(_0x3ae8a3,_0x5d4cf8(0x1d5)),logHistory(_0x5d4cf8(0x152),_0x5d4cf8(0x16d)),logHistory(_0x5d4cf8(0x152),_0x5d4cf8(0x26f)+loadCoinsRetryInterval/0xea60+_0x5d4cf8(0x14d)),logger[_0x5d4cf8(0x1b4)]('Error\x20details:',_0x3ae8a3),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xe386e3){const _0x58cf57=_0x3a5120;let _0x45a32c=[];return _0xe386e3[_0x58cf57(0x29e)](_0x4802d2=>{const _0x3b12cc=_0x58cf57;!allSymbols[_0x3b12cc(0x19c)](_0x4802d2)?logHistory(_0x3b12cc(0x152),_0x3b12cc(0x1c7)+_0x4802d2+_0x3b12cc(0x1db)):_0x45a32c['push'](_0x4802d2);}),_0x45a32c;}async function initclient(){const _0x241f8f=_0x3a5120;proxyEmit(_0x241f8f(0x208),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x241f8f(0x25d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5e3d97=getNormalizedPerformance();emitPerformance(_0x5e3d97),getStartingBalances(_0x5e3d97);}async function toggleBotMode(){const _0x3d3903=_0x3a5120;let _0x4c0206=dbConfig[_0x3d3903(0x163)](_0x3d3903(0x1ec))[_0x3d3903(0x146)]({'botID':botID})[_0x3d3903(0x18d)]();if(_0x4c0206){const _0x306445=!_0x4c0206[_0x3d3903(0x13a)];dbConfig[_0x3d3903(0x163)]('bot')[_0x3d3903(0x146)]({'botID':botID})[_0x3d3903(0x188)]({'headless':_0x306445})[_0x3d3903(0x206)](),config[_0x3d3903(0x13a)]=_0x306445,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x405432=_0x3a5120;process[_0x405432(0x1bd)]({'updatebotmanager':!![]},_0xa27a82=>{}),logger[_0x405432(0x1b4)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x1f961c){const _0x3bdb21=_0x3a5120;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1e0da3,_0x329ab9=0x0,_0x5a6121=0x0;_0x1f961c[_0x3bdb21(0x29e)](_0x19a528=>{const _0x4aaf0f=_0x3bdb21;loading[_0x4aaf0f(0x2b8)]['push'](_0x19a528);}),loadingCanceled=![];let _0x47f367=![];while(_0x1e0da3!=_0x1f961c['length']+maxLoadingProgress){_0x1e0da3=loadingProgress,_0x1f961c[_0x3bdb21(0x29e)](_0x330e75=>{const _0x3ee3e3=_0x3bdb21;if(gTicker[noslash(_0x330e75)]){loading['remainingSymbols']=loading[_0x3ee3e3(0x2b8)][_0x3ee3e3(0x1a6)](_0x51aa4b=>_0x51aa4b!=_0x330e75);if(!watchedSymbols[_0x3ee3e3(0x19c)](_0x330e75))watchedSymbols['push'](_0x330e75);_0x1e0da3++;}}),loading[_0x3bdb21(0x1ca)]=Math['round'](_0x1e0da3/(_0x1f961c['length']+maxLoadingProgress)*0x64);loading[_0x3bdb21(0x1ca)]!=0x64&&(_0x5a6121>0x1e*0x5&&(loading[_0x3bdb21(0x1bf)]=!![],emitLoadingProgress()),_0x5a6121>0x78*0x5&&!_0x47f367&&(_0x47f367=!![],logHistory(_0x3bdb21(0x152),_0x3bdb21(0x23c)+loading[_0x3bdb21(0x2b8)][_0x3bdb21(0x228)](',\x20')+_0x3bdb21(0x271)),logHistory(_0x3bdb21(0x152),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3bdb21(0x14d)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x3bdb21(0x24d)]=!![],emitLoadingProgress();break;}else _0x329ab9!=loading['progress']&&(_0x329ab9=loading[_0x3bdb21(0x1ca)],emitLoadingProgress()),_0x5a6121++,await sleep(0xc8);}_0x1e0da3==_0x1f961c[_0x3bdb21(0x158)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3bdb21(0x1bd)]({'status':_0x3bdb21(0x17e),'live':_0x3bdb21(0x217)},_0x395476=>{}),_0x47f367&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x43e29c=_0x3a5120;proxyEmit(_0x43e29c(0x208),{...emittedConfiguration(),'configstate':_0x43e29c(0x270)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x4b77b0=_0x3a5120;let _0x2a225c=gTicker[stablecoins['eur'][_0x4b77b0(0x1c4)]],_0x42bf4f=gTicker[stablecoins[_0x4b77b0(0x1ad)][_0x4b77b0(0x1c4)]];return{'eur':Number(_0x2a225c),'usd':Number(_0x42bf4f)};}function capitalize(_0x3cf2c5){const _0x1f8c55=_0x3a5120;return _0x3cf2c5[_0x1f8c55(0x26d)](0x0,0x1)[_0x1f8c55(0x14c)]()+_0x3cf2c5[_0x1f8c55(0x26d)](0x1);}function supportedExchanges(){const _0x2d8a15=_0x3a5120,_0x3872f0=['ws',_0x2d8a15(0x126),_0x2d8a15(0x27d),_0x2d8a15(0x2b4),'watchOrders',_0x2d8a15(0x28d),_0x2d8a15(0x1a9),_0x2d8a15(0x1d0),_0x2d8a15(0x1cd)];let _0x443fd0=[],_0x528f8a=[],_0x20925c=ccxt[_0x2d8a15(0x283)][_0x2d8a15(0x167)];_0x20925c[_0x2d8a15(0x29e)](_0x5ce784=>{const _0x1905f9=_0x2d8a15;try{const _0xe12c6f=new ccxt[(_0x1905f9(0x283))][_0x5ce784]();_0x528f8a['push'](_0xe12c6f);}catch(_0x37e0c4){}}),_0x528f8a[_0x2d8a15(0x29e)](_0x1d2320=>{const _0x3f83f6=_0x2d8a15;let _0x31e6fa=0x0;_0x3872f0['forEach'](_0x5a537d=>{const _0xd285e6=_0x38f0;_0x5a537d in _0x1d2320[_0xd285e6(0x1b3)]&&_0x1d2320[_0xd285e6(0x1b3)][_0x5a537d]&&_0x31e6fa++;}),_0x31e6fa==_0x3872f0[_0x3f83f6(0x158)]&&_0x443fd0[_0x3f83f6(0x11c)](capitalize(_0x1d2320['id']));});let _0x4a3c22=[];return _0x20925c[_0x2d8a15(0x29e)](_0x13ced1=>{const _0x2b42b9=_0x2d8a15;_0x13ced1=capitalize(_0x13ced1);if(!_0x443fd0[_0x2b42b9(0x19c)](_0x13ced1))_0x4a3c22[_0x2b42b9(0x11c)](_0x13ced1);}),_0x443fd0;}function setStartDatePerformance(){const _0x473911=_0x3a5120;if(config&&config[_0x473911(0x240)][0x0][_0x473911(0x27f)][_0x473911(0x158)]!=0x0){const _0x2f0864=config[_0x473911(0x240)][0x0][_0x473911(0x27f)];dbPerformance[_0x473911(0x163)](_0x473911(0x10c))['find']({'date':config[_0x473911(0x237)]})[_0x473911(0x188)]({'coins':_0x2f0864})['write']();}}async function recreateCoinResults(){const _0x4254ce=_0x3a5120;recreationNeeded=![];let _0x3443ad,_0x161854=[];try{for(const _0x49996a of currentCoins){if(_0x49996a[_0x4254ce(0x1c4)]!=config[_0x4254ce(0x1c2)]){let _0x3c9e96=0x0,_0x307e52,_0x113226;_0x3443ad=await getAllEventOrders(_0x49996a[_0x4254ce(0x19a)]);if(_0x3443ad['length']>0x0)_0x3443ad['forEach'](_0x2b4711=>{const _0x108c61=_0x4254ce,_0x9d61bb=_0x49996a[_0x108c61(0x19a)]['includes'](config[_0x108c61(0x1c2)]+'/');_0x161854[_0x108c61(0x11c)]({'datetime':_0x2b4711[_0x108c61(0x226)],'coin':_0x49996a['coin'],'symbol':_0x49996a[_0x108c61(0x19a)],'side':_0x2b4711[_0x108c61(0x235)],'reverse':_0x9d61bb,'amount':formatResult(_0x2b4711['filled'],0x8),'filled':formatResult(_0x2b4711[_0x108c61(0x276)],0x8),'price':formatResult(_0x2b4711['price'],0x8)}),_0x3c9e96=_0x2b4711[_0x108c61(0x235)]==_0x108c61(0x1ac)?_0x3c9e96+_0x2b4711[_0x108c61(0x276)]:_0x3c9e96-_0x2b4711[_0x108c61(0x276)];if(!_0x113226)_0x113226=_0x2b4711[_0x108c61(0x1e7)];});_0x307e52=_0x49996a[_0x4254ce(0x129)]-_0x3c9e96;let _0x1e4a99;config[_0x4254ce(0x240)][_0x4254ce(0x29e)](_0x4ba75f=>{const _0x2904c8=_0x4254ce;!_0x1e4a99&&(_0x1e4a99=_0x4ba75f['changes'][_0x2904c8(0x146)](_0x200413=>_0x200413[_0x2904c8(0x1c4)]==_0x49996a[_0x2904c8(0x1c4)]),_0x1e4a99&&(_0x307e52=_0x1e4a99[_0x2904c8(0x129)],_0x113226=_0x1e4a99[_0x2904c8(0x1e7)]));});let _0x16b43c=dbCoinResults[_0x4254ce(0x163)]('coins')[_0x4254ce(0x146)]({'coin':_0x49996a[_0x4254ce(0x1c4)]})[_0x4254ce(0x18d)]();_0x16b43c={'coin':_0x49996a[_0x4254ce(0x1c4)],'number':_0x307e52,'breakeven':_0x113226,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4254ce(0x163)](_0x4254ce(0x172))[_0x4254ce(0x146)]({'coin':_0x49996a[_0x4254ce(0x1c4)]})['assign'](_0x16b43c)[_0x4254ce(0x206)]();}}_0x161854[_0x4254ce(0x2a5)]((_0x53d3a7,_0x498335)=>_0x53d3a7[_0x4254ce(0x226)]>_0x498335[_0x4254ce(0x226)]?0x1:_0x498335[_0x4254ce(0x226)]>_0x53d3a7[_0x4254ce(0x226)]?-0x1:0x0);let _0x2dd0fd=0x0;for(let _0x24fb5f of _0x161854){await updateCoinResults(_0x24fb5f,!![]);}}catch(_0x262103){await handleError(_0x262103,_0x4254ce(0x234));}}async function getAllEventOrders(_0x1b9450){const _0x12af16=_0x3a5120;let _0x197da7=[],_0x341019=dbLogs[_0x12af16(0x163)](_0x12af16(0x116))['filter'](_0x14b94a=>{const _0x2e809f=_0x12af16,_0x33f54b=_0x14b94a[_0x2e809f(0x278)][_0x2e809f(0x1f0)]();return _0x33f54b['includes'](_0x1b9450[_0x2e809f(0x1f0)]())&&(_0x33f54b[_0x2e809f(0x19c)](_0x2e809f(0x166))&&_0x33f54b[_0x2e809f(0x19c)](_0x2e809f(0x1df))||_0x33f54b[_0x2e809f(0x19c)](_0x2e809f(0x276))&&_0x33f54b['includes'](_0x2e809f(0x1df)));})[_0x12af16(0x1f1)](_0x12af16(0x16f))[_0x12af16(0x18d)]();return _0x341019[_0x12af16(0x29e)](_0x33c283=>{const _0x50f0b2=_0x12af16,_0x57bd9a=_0x33c283[_0x50f0b2(0x278)][_0x50f0b2(0x19c)](_0x50f0b2(0x149))?'sell':_0x50f0b2(0x1ac),_0x41be8d=/#([0-9]|\.)+\s/i,_0x57742a=Number(_0x41be8d[_0x50f0b2(0x29b)](_0x33c283[_0x50f0b2(0x278)])[0x0][_0x50f0b2(0x14e)](0x1)),_0x5d89e1=/@([0-9]|\.)+$/i,_0x485590=Number(_0x5d89e1['exec'](_0x33c283['event'])[0x0][_0x50f0b2(0x14e)](0x1));_0x197da7['push']({'datetime':_0x33c283['time'],'coin':symbolToCoin(_0x1b9450),'symbol':_0x1b9450,'side':_0x57bd9a,'amount':_0x57742a,'filled':_0x57742a,'price':_0x485590});}),_0x197da7;}async function validate24hChanges(){const _0x6aeed6=_0x3a5120;for(const _0x58ad95 of currentCoins){if(_0x58ad95[_0x6aeed6(0x1c4)]!=config['basecoin']){let _0x56b500;_0x58ad95[_0x6aeed6(0x1b7)]?_0x56b500=formatResult((0x1/(gChange[_0x58ad95[_0x6aeed6(0x19a)]]/0x64+0x1)-0x1)*0x64,0x3):_0x56b500=gChange[_0x58ad95[_0x6aeed6(0x19a)]],_0x56b500<config['change24h']&&(logHistory(_0x6aeed6(0x152),_0x58ad95['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x56b500+'%'),logHistory(_0x6aeed6(0x152),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x6aeed6(0x152),_0x6aeed6(0x26b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x291f2d,_0x25bc0e){const _0x4132a6=_0x3a5120;if(!_0x291f2d)return!![];const _0x37352d=_0x25bc0e[_0x4132a6(0x16a)]('.'),_0x358931=_0x291f2d[_0x4132a6(0x16a)]('.');for(var _0x15e6d3=0x0;_0x15e6d3<_0x358931[_0x4132a6(0x158)];_0x15e6d3++){const _0x57ef7e=~~_0x358931[_0x15e6d3],_0x3b8dd2=~~_0x37352d[_0x15e6d3];if(_0x57ef7e<_0x3b8dd2)return!![];if(_0x57ef7e>_0x3b8dd2)return![];}return![];}async function oneTimeMigration(){const _0x1e5587=_0x3a5120;let _0x21cad5=dbLogs[_0x1e5587(0x163)](_0x1e5587(0x1c3))['value']();if(isOlderVersion(_0x21cad5,'2.3.5')){let _0x45449d=[];const _0x418cd3=dbLogs[_0x1e5587(0x163)](_0x1e5587(0x116))['value']();_0x418cd3['forEach'](_0x49d0c3=>{const _0x24ba78=_0x1e5587;_0x45449d[_0x24ba78(0x11c)]({'time':_0x49d0c3['time'],'type':_0x49d0c3['type'],'event':_0x49d0c3[_0x24ba78(0x278)]});}),dbLogs[_0x1e5587(0x163)](_0x1e5587(0x116))[_0x1e5587(0x188)](_0x45449d)[_0x1e5587(0x206)]();}let _0x537c89=dbConfig['get']('version')[_0x1e5587(0x18d)]();if(isOlderVersion(_0x537c89,_0x1e5587(0x182))){let _0x2ca323=dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x18d)]();if(_0x2ca323){let _0x2f779b=[];_0x2ca323[_0x1e5587(0x11e)][_0x1e5587(0x29e)](_0x55d4ac=>{const _0x38f877=_0x1e5587;_0x2f779b[_0x38f877(0x11c)]({'coin':_0x55d4ac[_0x38f877(0x1c4)],'number':_0x55d4ac['startnumber'],'price':_0x55d4ac['startprice']}),delete _0x55d4ac[_0x38f877(0x157)],delete _0x55d4ac[_0x38f877(0x207)];});if(_0x2f779b[_0x1e5587(0x158)]!==0x0)fs[_0x1e5587(0x244)](configbackuppath+('starting-balance-'+botID+_0x1e5587(0x15c)),JSON[_0x1e5587(0x2ad)](_0x2f779b,null,0x4),function(_0xf8968d){if(_0xf8968d){}});const _0x1aabc0=(_0x6c8d6d,_0x1cba7f)=>{const _0x3ea2ba=_0x1e5587;let _0x4b84b4=[];_0x1cba7f[_0x3ea2ba(0x29e)](_0x931cd3=>{const _0x504ab0=_0x3ea2ba,_0x2bfa10=_0x6c8d6d[_0x504ab0(0x146)](_0x3007=>_0x3007[_0x504ab0(0x1c4)]==_0x931cd3[_0x504ab0(0x1c4)]);if(!_0x2bfa10)_0x4b84b4[_0x504ab0(0x11c)](_0x931cd3);});let _0x254592=[];return _0x6c8d6d['forEach'](_0x517eb2=>{const _0x22b9d6=_0x3ea2ba,_0x1373ab=_0x1cba7f[_0x22b9d6(0x146)](_0x8c0b73=>_0x8c0b73[_0x22b9d6(0x1c4)]==_0x517eb2[_0x22b9d6(0x1c4)]);if(!_0x1373ab||_0x1373ab[_0x22b9d6(0x129)]==0x0&&_0x517eb2[_0x22b9d6(0x129)]!=0x0)_0x254592['push'](_0x517eb2);}),{'missingDay1':_0x4b84b4,'notInDay2':_0x254592};},_0x2f98b6=dbPerformance[_0x1e5587(0x163)](_0x1e5587(0x10c))['cloneDeep']()['value']();if(_0x2f98b6[_0x1e5587(0x158)]>0x1){const {missingDay1:_0x36e16c,notInDay2:_0xfc56c6}=_0x1aabc0(_0x2f779b,_0x2f98b6[0x1][_0x1e5587(0x172)]);_0x2f779b=[..._0x2f779b,..._0x36e16c],_0xfc56c6[_0x1e5587(0x29e)](_0x1feae0=>{const _0x2ea68e=_0x1e5587;let _0x1bb444=_0x2f779b['findIndex'](_0x1bfa35=>_0x1bfa35[_0x2ea68e(0x1c4)]==_0x1feae0['coin']);_0x1bb444!=-0x1&&_0x2f779b[_0x2ea68e(0x134)](_0x1bb444,0x1);});}_0x2f779b[_0x1e5587(0x2a5)]((_0xddb320,_0x3a8754)=>_0xddb320[_0x1e5587(0x1c4)]>_0x3a8754['coin']?0x1:_0x3a8754[_0x1e5587(0x1c4)]>_0xddb320[_0x1e5587(0x1c4)]?-0x1:0x0);let _0x310563=[{'date':_0x2ca323['startdate'],'changes':_0x2f779b}];_0x2f98b6[_0x1e5587(0x158)]>0x2&&_0x2f98b6['forEach']((_0x236cfe,_0x3dc02a)=>{const _0x42ae52=_0x1e5587;if(_0x3dc02a>0x0&&_0x3dc02a<_0x2f98b6[_0x42ae52(0x158)]-0x1){const {missingDay1:_0x42ea7c,notInDay2:_0x27ce36}=_0x1aabc0(_0x2f98b6[_0x3dc02a][_0x42ae52(0x172)],_0x2f98b6[_0x3dc02a+0x1][_0x42ae52(0x172)]);_0x2f779b=[],(_0x42ea7c['length']!=0x0||_0x27ce36['length']!=0x0)&&(_0x42ea7c['length']!=0x0&&_0x2f779b[_0x42ae52(0x11c)](..._0x42ea7c),_0x27ce36[_0x42ae52(0x158)]!=0x0&&(_0x27ce36[_0x42ae52(0x29e)](_0x29e3af=>{const _0x21acc5=_0x42ae52;_0x29e3af[_0x21acc5(0x129)]=-_0x29e3af[_0x21acc5(0x129)];}),_0x2f779b[_0x42ae52(0x11c)](..._0x27ce36)),_0x2f779b[_0x42ae52(0x2a5)]((_0x2b9356,_0x27b084)=>_0x2b9356[_0x42ae52(0x1c4)]>_0x27b084[_0x42ae52(0x1c4)]?0x1:_0x27b084['coin']>_0x2b9356[_0x42ae52(0x1c4)]?-0x1:0x0),_0x310563[_0x42ae52(0x11c)]({'date':_0x2f98b6[_0x3dc02a+0x1]['date'],'changes':_0x2f779b}));}}),dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x188)]({..._0x2ca323,'liquidity':_0x310563})[_0x1e5587(0x206)]();}}if(isOlderVersion(_0x537c89,'2.6.0')){let _0x763673=dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})['value']();if(_0x763673){const _0x43f482=_0x763673[_0x1e5587(0x261)],_0xc4a9a6=_0x43f482?capitalize(_0x43f482):_0x1e5587(0x121);dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x188)]({'exchange':_0xc4a9a6})[_0x1e5587(0x206)]();}}if(isOlderVersion(_0x537c89,_0x1e5587(0x23f))){let _0xb363f4=dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x18d)]();if(_0xb363f4){const _0x51a912=_0xb363f4[_0x1e5587(0x11d)],_0x24cee0=_0x51a912?_0x1e5587(0x15d):![];dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x188)]({'marketcapEnabled':_0x24cee0})['write']();}}if(isOlderVersion(_0x537c89,'2.6.23')){let _0x285f06=dbConfig[_0x1e5587(0x163)]('bot')[_0x1e5587(0x146)]({'botID':botID})[_0x1e5587(0x18d)]();if(_0x285f06){const _0x1da393=_0x285f06[_0x1e5587(0x155)],_0xe16627=_0x1da393?'update-liquidity':![];dbConfig[_0x1e5587(0x163)](_0x1e5587(0x1ec))['find']({'botID':botID})[_0x1e5587(0x188)]({'autoliquidity':_0xe16627})['write']();}}let _0x5031eb=dbPerformance[_0x1e5587(0x163)](_0x1e5587(0x1c3))[_0x1e5587(0x18d)]();isOlderVersion(_0x5031eb,_0x1e5587(0x182))&&setStartDatePerformance();let _0x3b8954=dbCoinResults[_0x1e5587(0x163)](_0x1e5587(0x1c3))[_0x1e5587(0x18d)]();if(isOlderVersion(_0x3b8954,_0x1e5587(0x194))){let _0xb66407=dbCoinResults[_0x1e5587(0x163)](_0x1e5587(0x172))['value']();if(_0xb66407[_0x1e5587(0x158)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x14dd03=_0x3a5120;dbConfig[_0x14dd03(0x140)](_0x14dd03(0x1c3),serverversion)['write'](),dbPerformance[_0x14dd03(0x140)](_0x14dd03(0x1c3),serverversion)[_0x14dd03(0x206)](),dbLogs[_0x14dd03(0x140)]('version',serverversion)[_0x14dd03(0x206)](),dbCoinResults[_0x14dd03(0x140)](_0x14dd03(0x1c3),serverversion)[_0x14dd03(0x206)]();}function getConfiguration(_0x1aa26e){const _0xe0bf17=_0x3a5120;let _0x1d26ce=dbConfig[_0xe0bf17(0x163)]('bot')[_0xe0bf17(0x146)]({'botID':_0x1aa26e})[_0xe0bf17(0x18d)]();if(_0x1d26ce){let _0x5ea7e0=![];typeof _0x1d26ce[_0xe0bf17(0x1b1)]==_0xe0bf17(0x112)&&(_0x1d26ce={..._0x1d26ce,'threshold':Number(_0x1d26ce[_0xe0bf17(0x1b1)])},_0x5ea7e0=!![]),_0x1d26ce[_0xe0bf17(0x27a)]==undefined&&(_0x1d26ce={..._0x1d26ce,'change24h':-0x14},_0x5ea7e0=!![]),_0x1d26ce[_0xe0bf17(0x196)]==undefined&&(_0x1d26ce={..._0x1d26ce,'fiat':_0xe0bf17(0x128)},_0x5ea7e0=!![]),_0x1d26ce[_0xe0bf17(0x2aa)]==undefined&&(_0x1d26ce={..._0x1d26ce,'onepagemode':settings[_0xe0bf17(0x2aa)]},_0x5ea7e0=!![]),_0x1d26ce[_0xe0bf17(0x20c)]==undefined&&(_0x1d26ce={..._0x1d26ce,'colorscheme':'red_yellow_blue'},_0x5ea7e0=!![]),_0x1d26ce[_0xe0bf17(0x155)]==undefined&&(_0x1d26ce={..._0x1d26ce,'autoliquidity':'update-liquidity'},_0x5ea7e0=!![]),_0x1d26ce['marketcapApi']==undefined&&(_0x1d26ce={..._0x1d26ce,'marketcapApi':settings[_0xe0bf17(0x20a)]?!![]:![]},_0x5ea7e0=!![]),_0x1d26ce['marketcapEnabled']==undefined&&(_0x1d26ce={..._0x1d26ce,'marketcapEnabled':![]},_0x5ea7e0=!![]),_0x5ea7e0&&(_0x1d26ce={'botID':_0x1d26ce['botID'],'exchange':_0x1d26ce[_0xe0bf17(0x261)],'apiKey':_0x1d26ce['apiKey'],'apiSecret':_0x1d26ce[_0xe0bf17(0x14f)],'apiPassword':_0x1d26ce[_0xe0bf17(0x24e)],'basecoin':_0x1d26ce[_0xe0bf17(0x1c2)],'botname':_0x1d26ce['botname'],'showname':_0x1d26ce['showname'],'threshold':_0x1d26ce[_0xe0bf17(0x1b1)],'ordertype':_0x1d26ce[_0xe0bf17(0x297)],'timeout':_0x1d26ce[_0xe0bf17(0x1bf)],'fiat':_0x1d26ce[_0xe0bf17(0x196)],'startdate':_0x1d26ce[_0xe0bf17(0x237)],'recreate':_0x1d26ce['recreate'],'timeshift':_0x1d26ce[_0xe0bf17(0x1b6)],'onepagemode':_0x1d26ce[_0xe0bf17(0x2aa)],'headless':_0x1d26ce['headless'],'cooldown':_0x1d26ce[_0xe0bf17(0x16e)],'change24h':_0x1d26ce[_0xe0bf17(0x27a)],'emojibuy':_0x1d26ce[_0xe0bf17(0x145)],'emojisell':_0x1d26ce[_0xe0bf17(0x1ee)],'colorscheme':_0x1d26ce[_0xe0bf17(0x20c)],'marketcapApi':_0x1d26ce[_0xe0bf17(0x20a)],'marketcapEnabled':_0x1d26ce[_0xe0bf17(0x11d)],'portfolio':_0x1d26ce[_0xe0bf17(0x11e)],'autoliquidity':_0x1d26ce[_0xe0bf17(0x155)],'liquidity':_0x1d26ce[_0xe0bf17(0x240)],'openOrders':_0x1d26ce[_0xe0bf17(0x135)]},dbConfig[_0xe0bf17(0x163)](_0xe0bf17(0x1ec))['remove']()['write'](),dbConfig[_0xe0bf17(0x163)](_0xe0bf17(0x1ec))[_0xe0bf17(0x11c)](_0x1d26ce)[_0xe0bf17(0x206)]());}else _0x1d26ce={'botID':_0x1aa26e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xe0bf17(0x18c)+_0x1aa26e,'showname':![],'threshold':0x3,'ordertype':_0xe0bf17(0x166),'timeout':0x14,'fiat':_0xe0bf17(0x128),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xe0bf17(0x1b6)],'onepagemode':settings[_0xe0bf17(0x2aa)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0xe0bf17(0x20a)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0xe0bf17(0x13e),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1d26ce;}function emittedConfiguration(){const _0x44105d=_0x3a5120;let _0x43be8d;if(config[_0x44105d(0x203)]=='')_0x43be8d={...config,'configstate':_0x44105d(0x20d)};else config[_0x44105d(0x203)]=='***'?_0x43be8d={...config,'configstate':_0x44105d(0x28a)}:(_0x43be8d={...config,'apiKey':_0x44105d(0x275),'apiSecret':_0x44105d(0x275)},config[_0x44105d(0x24e)]&&(_0x43be8d['apiPassword']=_0x44105d(0x275)));return _0x43be8d[_0x44105d(0x28b)]=enableFiatToggle,_0x43be8d;}function getSettings(){const _0x39321f=_0x3a5120;return dbSettings[_0x39321f(0x163)]('settings')['value']();}function getSecure(){const _0x4b8f7c=_0x3a5120;return dbSecure[_0x4b8f7c(0x163)]('secure')[_0x4b8f7c(0x18d)]()||{};}function updateTimeshift(_0x237b7a){const _0x812002=_0x3a5120;let _0x3f85f3=dbConfig[_0x812002(0x163)](_0x812002(0x1ec))[_0x812002(0x146)]({'botID':botID})[_0x812002(0x18d)]();_0x3f85f3&&dbConfig['get'](_0x812002(0x1ec))[_0x812002(0x146)]({'botID':botID})['assign']({'timeshift':_0x237b7a})[_0x812002(0x206)](),config[_0x812002(0x1b6)]=_0x237b7a,proxyEmit(_0x812002(0x208),emittedConfiguration());}function updateOnepagemode(_0x29cac4){const _0x5396c6=_0x3a5120;let _0x214b3a=dbConfig['get']('bot')[_0x5396c6(0x146)]({'botID':botID})[_0x5396c6(0x18d)]();_0x214b3a&&dbConfig[_0x5396c6(0x163)](_0x5396c6(0x1ec))[_0x5396c6(0x146)]({'botID':botID})[_0x5396c6(0x188)]({'onepagemode':_0x29cac4})[_0x5396c6(0x206)](),config[_0x5396c6(0x2aa)]=_0x29cac4,proxyEmit(_0x5396c6(0x208),emittedConfiguration());}function updateMarketcapApi(_0x44a724){const _0x1c8881=_0x3a5120,_0x51ce79=_0x44a724?!![]:![];let _0x285c25=dbConfig[_0x1c8881(0x163)]('bot')[_0x1c8881(0x146)]({'botID':botID})[_0x1c8881(0x18d)]();_0x285c25&&dbConfig[_0x1c8881(0x163)]('bot')['find']({'botID':botID})[_0x1c8881(0x188)]({'marketcapApi':_0x51ce79})[_0x1c8881(0x206)](),config[_0x1c8881(0x20a)]=_0x51ce79,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x57a11d){const _0x4abcb8=_0x3a5120;logger['debug']('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4ebe7d=![],_0x248014=![],_0x114e30=[];_0x57a11d['portfolio']['forEach'](_0x577c53=>{const _0x3e94b6=_0x38f0;if(!_0x577c53[_0x3e94b6(0x1cf)]&&_0x577c53['coin']!=_0x57a11d[_0x3e94b6(0x1c2)])_0x114e30[_0x3e94b6(0x11c)](_0x577c53['symbol']);}),_0x114e30['forEach'](_0x28a771=>{const _0x40d511=_0x38f0,_0x58b1e5=currentCoins['find'](_0x345e36=>_0x345e36[_0x40d511(0x19a)]==_0x28a771);!_0x58b1e5&&(_0x4ebe7d=!![]);}),currentCoins['forEach'](_0xce7c13=>{const _0x21bf51=_0x38f0;if(_0xce7c13[_0x21bf51(0x1c4)]!=config[_0x21bf51(0x1c2)]){const _0x13a24c=_0x114e30[_0x21bf51(0x146)](_0x55d68c=>_0x55d68c==_0xce7c13['symbol']);!_0x13a24c&&(_0x4ebe7d=!![]);}}),_0x57a11d[_0x4abcb8(0x11e)][_0x4abcb8(0x29e)](_0x478805=>{const _0x2439c4=_0x4abcb8,_0x401362=config[_0x2439c4(0x11e)][_0x2439c4(0x146)](_0x184b55=>_0x184b55['coin']==_0x478805[_0x2439c4(0x1c4)]);if(_0x401362&&_0x478805[_0x2439c4(0x25f)]!=_0x401362[_0x2439c4(0x25f)])_0x248014=!![];});let _0x6e5911=dbConfig['get'](_0x4abcb8(0x1ec))[_0x4abcb8(0x146)]({'botID':botID})[_0x4abcb8(0x18d)]();_0x57a11d={..._0x57a11d,'apiKey':decryptRSA(secure[_0x4abcb8(0x1de)],_0x57a11d[_0x4abcb8(0x203)]),'apiSecret':decryptRSA(secure[_0x4abcb8(0x1de)],_0x57a11d[_0x4abcb8(0x14f)])};_0x57a11d[_0x4abcb8(0x24e)]&&(_0x57a11d['apiPassword']=decryptRSA(secure['privateKey'],_0x57a11d[_0x4abcb8(0x24e)]));let _0x443326=![];if(_0x6e5911){_0x57a11d[_0x4abcb8(0x203)]=='************'?_0x57a11d[_0x4abcb8(0x203)]=config[_0x4abcb8(0x203)]:_0x443326=!![];_0x57a11d['apiSecret']==_0x4abcb8(0x275)?_0x57a11d[_0x4abcb8(0x14f)]=config[_0x4abcb8(0x14f)]:_0x443326=!![];if(_0x57a11d[_0x4abcb8(0x24e)]==_0x4abcb8(0x275))_0x57a11d[_0x4abcb8(0x24e)]=config[_0x4abcb8(0x24e)];else{if(_0x57a11d[_0x4abcb8(0x24e)])_0x443326=!![];}dbConfig['get'](_0x4abcb8(0x1ec))[_0x4abcb8(0x146)]({'botID':botID})[_0x4abcb8(0x188)](_0x57a11d)[_0x4abcb8(0x206)]();}else dbConfig[_0x4abcb8(0x163)](_0x4abcb8(0x1ec))[_0x4abcb8(0x11c)](_0x57a11d)[_0x4abcb8(0x206)](),_0x443326=!![],process[_0x4abcb8(0x1bd)]({'status':'enabled','live':_0x4abcb8(0x217)},_0x3e5be7=>{});process[_0x4abcb8(0x1bd)]({'botname':_0x57a11d[_0x4abcb8(0x160)]},_0x4e9b8f=>{}),config={..._0x57a11d},updateBotManager(),proxyEmit(_0x4abcb8(0x281)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x443326)!_0x6e5911?await reset(!![]):getBalances();else _0x4ebe7d||_0x248014?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x546592){const _0xc6c7b6=_0x3a5120,_0x3ea87f={...config,'headless':_0x546592[_0xc6c7b6(0x13a)]};let _0x11fc4f=dbConfig[_0xc6c7b6(0x163)](_0xc6c7b6(0x1ec))[_0xc6c7b6(0x146)]({'botID':botID})[_0xc6c7b6(0x18d)]();_0x11fc4f&&dbConfig['get']('bot')[_0xc6c7b6(0x146)]({'botID':botID})['assign'](_0x3ea87f)[_0xc6c7b6(0x206)](),config={..._0x3ea87f},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x26db6b){const _0x503355=_0x3a5120,_0x236b2f={...config,'fiat':_0x26db6b};let _0x300f3e=dbConfig['get'](_0x503355(0x1ec))['find']({'botID':botID})[_0x503355(0x18d)]();_0x300f3e&&dbConfig[_0x503355(0x163)]('bot')['find']({'botID':botID})[_0x503355(0x188)](_0x236b2f)[_0x503355(0x206)](),config={..._0x236b2f},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x90f06d=_0x3a5120;logger['full'](_0x90f06d(0x1f8));try{if(fs[_0x90f06d(0x1e9)](path[_0x90f06d(0x228)](configpath,_0x90f06d(0x153)+botID+_0x90f06d(0x251))))fs[_0x90f06d(0x162)](path[_0x90f06d(0x228)](configpath,_0x90f06d(0x153)+botID+_0x90f06d(0x251)));if(fs[_0x90f06d(0x1e9)](path[_0x90f06d(0x228)](configpath,_0x90f06d(0x153)+botID+_0x90f06d(0x1ae))))fs[_0x90f06d(0x162)](path[_0x90f06d(0x228)](configpath,_0x90f06d(0x153)+botID+'-performance.json'));if(fs['existsSync'](path[_0x90f06d(0x228)](configpath,'bot-'+botID+'-results.json')))fs[_0x90f06d(0x162)](path[_0x90f06d(0x228)](configpath,_0x90f06d(0x153)+botID+_0x90f06d(0x195)));}catch(_0x5e1acb){if(_0x5e1acb)logger[_0x90f06d(0x17d)]('Error\x20while\x20deleting\x20files:\x20',_0x5e1acb);}const _0x1d9bbf=getDate();let _0x47476b=[];currentCoins[_0x90f06d(0x29e)](_0xf5ef97=>{const _0x372c95=_0x90f06d;_0x47476b[_0x372c95(0x11c)]({'coin':_0xf5ef97[_0x372c95(0x1c4)],'number':_0xf5ef97['number'],'price':_0xf5ef97['last']});});let _0x46cd66=dbConfig[_0x90f06d(0x163)](_0x90f06d(0x1ec))[_0x90f06d(0x146)]({'botID':botID})['value']();_0x46cd66&&(dbConfig[_0x90f06d(0x163)]('bot')['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x1d9bbf,'changes':_0x47476b}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x116201){const _0x196b3a=_0x3a5120;return _0x116201[_0x196b3a(0x21b)]('/','');}function updateHighestFee(_0x118699){const _0xd16fb4=_0x3a5120;if(_0x118699[_0xd16fb4(0x1b7)]){let _0x1617f6={'filled':_0x118699[_0xd16fb4(0x276)]*_0x118699[_0xd16fb4(0x1e7)],'amount':_0x118699['filled']*_0x118699[_0xd16fb4(0x1e7)],'side':_0x118699[_0xd16fb4(0x235)]==_0xd16fb4(0x149)?_0xd16fb4(0x1ac):_0xd16fb4(0x149),'price':0x1/_0x118699[_0xd16fb4(0x1e7)]};_0x118699={..._0x118699,..._0x1617f6};}const _0x168620=defaultFee*_0x118699[_0xd16fb4(0x276)]*_0x118699[_0xd16fb4(0x1e7)];lastFees[_0xd16fb4(0x170)][_0xd16fb4(0x158)]===0x14&&lastFees[_0xd16fb4(0x170)][_0xd16fb4(0x292)](),lastFees[_0xd16fb4(0x170)][_0xd16fb4(0x11c)](_0x168620),lastFees[_0xd16fb4(0x1f2)]=Math['max'](...lastFees[_0xd16fb4(0x170)]);}async function updateNumberCoinsCcxt(_0x53f780){const _0x5dbf77=_0x3a5120;logger[_0x5dbf77(0x1b4)](_0x5dbf77(0x12b)+_0x53f780[_0x5dbf77(0x19a)]+_0x5dbf77(0x1d2)+_0x53f780[_0x5dbf77(0x165)]+_0x5dbf77(0x1d2)+_0x53f780['filled']+_0x5dbf77(0x113)+_0x53f780[_0x5dbf77(0x11f)]+_0x5dbf77(0x1d2)+_0x53f780['id']);let _0x1f5017=_0x53f780['status'],_0x743912=![];currentCoins['forEach'](_0x5419dd=>{const _0x53aeda=_0x5dbf77;_0x5419dd[_0x53aeda(0x19a)]==_0x53f780[_0x53aeda(0x19a)]&&(_0x743912=!![]);});if(!_0x743912)return;const _0x27c3d7=currentCoins['find'](_0x27c38e=>_0x27c38e[_0x5dbf77(0x19a)]==_0x53f780[_0x5dbf77(0x19a)]),_0x48b82a=_0x27c3d7[_0x5dbf77(0x1c4)],_0x582bc8=_0x9216ea=>{const _0x154adb=_0x5dbf77,_0x3b93ed=currentCoins['find'](_0x4019ee=>_0x4019ee[_0x154adb(0x19a)]==_0x53f780['symbol']);if(_0x3b93ed)_0x3b93ed[_0x154adb(0x12a)]=_0x9216ea;};let _0x200968=![];for(const _0x176228 of lastOrders){const _0x39fe80=0x64,_0x105672=0x1388;let _0x535153=0x0;while(!_0x176228[_0x5dbf77(0x1fd)]&&_0x535153*_0x39fe80<_0x105672){_0x535153++,await sleep(_0x39fe80);}if(_0x535153>0x0)logger['debug'](_0x5dbf77(0x242)+_0x535153*_0x39fe80/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x176228[_0x5dbf77(0x1fd)]==_0x53f780['id']&&(_0x200968=!![]);}if(_0x1f5017==_0x5dbf77(0x124)){_0x582bc8(_0x5dbf77(0x124));if(_0x53f780[_0x5dbf77(0x276)]>0x0&&_0x53f780[_0x5dbf77(0x276)]<_0x53f780['amount']){if(_0x200968){setBlockTransactionDetection(!![]),logger[_0x5dbf77(0x1b4)](_0x5dbf77(0x1a4)+_0x53f780[_0x5dbf77(0x276)]+')\x20known\x20order:\x20'+_0x53f780['id']);const _0x58d109=await getCoins(balanceUpdateDelay,undefined,undefined,_0x48b82a);[currentCoins,currentCoinsAll]=_0x58d109,setBlockTransactionDetection(![]);}else logger[_0x5dbf77(0x1b4)]('1\x20-\x20partially\x20FILLED\x20('+_0x53f780[_0x5dbf77(0x276)]+')\x20unknown\x20order:\x20'+_0x53f780['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1f5017==_0x5dbf77(0x12c)){_0x582bc8(_0x5dbf77(0x12c)),lastOrders=lastOrders[_0x5dbf77(0x1a6)](_0x26bf0a=>_0x26bf0a['symbol']!=_0x53f780['symbol']);const _0x324fe5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x324fe5,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1f5017=='closed'){if(lastOrders)for(const _0x4ab7d1 of lastOrders){if(_0x4ab7d1['orderId']==_0x53f780['id']){logger[_0x5dbf77(0x1b4)](_0x5dbf77(0x1bb)+_0x53f780['id']),_0x200968=!![];if(_0x4ab7d1[_0x5dbf77(0x276)]==0x0){setBlockTransactionDetection(!![]),logger[_0x5dbf77(0x1b4)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x53f780['id']);if(_0x53f780[_0x5dbf77(0x117)])_0x4ab7d1['price']=_0x53f780[_0x5dbf77(0x117)];else{if(_0x53f780[_0x5dbf77(0x1e7)])_0x4ab7d1[_0x5dbf77(0x1e7)]=_0x53f780[_0x5dbf77(0x1e7)];else{}}_0x4ab7d1[_0x5dbf77(0x276)]=_0x53f780[_0x5dbf77(0x276)],updateHighestFee(_0x4ab7d1);const _0xed1907=await getCoins(balanceUpdateDelay,undefined,undefined,_0x48b82a);[currentCoins,currentCoinsAll]=_0xed1907,setBlockTransactionDetection(![]),await validateOrders(),_0x582bc8(_0x5dbf77(0x276)),_0x4ab7d1['fee']={'currency':_0x53f780[_0x5dbf77(0x159)]?_0x53f780[_0x5dbf77(0x159)][_0x5dbf77(0x205)]:null,'cost':_0x53f780['fee']?_0x53f780[_0x5dbf77(0x159)][_0x5dbf77(0x184)]:0x0},await updateCoinResults(_0x4ab7d1);}}}!_0x200968&&(logger['debug'](_0x5dbf77(0x22e)+_0x53f780['id']),_0x582bc8('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x829932=JSON[_0x5dbf77(0x200)](lastBalances[_0x5dbf77(0x11e)]);const _0x54397a=_0x829932[_0x5dbf77(0x146)](_0x319937=>_0x319937['symbol']==_0x53f780[_0x5dbf77(0x19a)]);if(_0x54397a){if(_0x1f5017==_0x5dbf77(0x124))_0x54397a[_0x5dbf77(0x12a)]=_0x54397a[_0x5dbf77(0x12a)]==_0x5dbf77(0x276)?_0x5dbf77(0x276):'open';else{if(_0x1f5017=='canceled')_0x54397a[_0x5dbf77(0x12a)]=_0x54397a[_0x5dbf77(0x12a)]=='filled'?'filled':_0x5dbf77(0x12c);else _0x1f5017=='closed'&&(_0x54397a[_0x5dbf77(0x12a)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x829932)},proxyEmit(_0x5dbf77(0x25d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4eb5ab=_0x3a5120;await getOpenOrders();let _0x43bcf8=![];currentCoins[_0x4eb5ab(0x29e)](_0x503121=>{const _0x51cdab=_0x4eb5ab;_0x43bcf8=allOpenOrders[_0x51cdab(0x146)](_0x4eacce=>_0x4eacce[_0x51cdab(0x19a)]==_0x503121[_0x51cdab(0x19a)]),_0x503121[_0x51cdab(0x12a)]=_0x43bcf8?_0x51cdab(0x124):'none';});}async function fetchBalance(_0x172af1=!![]){const _0x27ed61=_0x3a5120;let _0x6c5bc2,_0x6fbb1c;try{return _0x6c5bc2=await exchange[_0x27ed61(0x1cd)](),_0x6fbb1c=_0x6c5bc2[_0x27ed61(0x25c)],_0x6fbb1c;}catch(_0x490767){return!_0x172af1?handleErrorNoStop(_0x490767,_0x27ed61(0x1f6)):await handleError(_0x490767,_0x27ed61(0x1f6)),![];}}async function getCoins(_0x5e6abb=0x0,_0x3ba713=!![],_0x48f379=config['basecoin'],_0x2c844e){const _0x1106d0=_0x3a5120;let _0x4b7352=[],_0x51b7e8=[],_0x47c9ce=[],_0x1b44c8;if(_0x5e6abb)await sleep(_0x5e6abb);if(botPaused)return[currentCoins,currentCoinsAll];let _0xf9ae44=![],_0x452e8b=0x0,_0x4fbb3a,_0x2efacb;_0x2c844e&&(_0x4fbb3a=currentCoins[_0x1106d0(0x146)](_0x3f7028=>_0x3f7028[_0x1106d0(0x1c4)]==_0x2c844e),_0x2efacb=_0x4fbb3a[_0x1106d0(0x129)]);while(!_0xf9ae44){_0x1b44c8=await fetchBalance(_0x3ba713);if(_0x1b44c8){if(_0x2c844e){if(_0x1b44c8[_0x2c844e]!=_0x2efacb)logger[_0x1106d0(0x1b4)](_0x1106d0(0x1a0)+_0x2c844e+':\x20'+_0x1b44c8[_0x2c844e]+'\x20('+_0x2efacb+')'),_0xf9ae44=!![];else{logger[_0x1106d0(0x1b4)](_0x1106d0(0x17f)+_0x2c844e+':\x20'+_0x1b44c8[_0x2c844e]+'\x20('+_0x2efacb+')'),_0x452e8b++;if(_0x452e8b<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1106d0(0x1b4)](_0x1106d0(0x1e4)+_0x452e8b+_0x1106d0(0x258));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x327640,_0x10bf71]of Object[_0x1106d0(0x272)](_0x1b44c8)){_0x47c9ce[_0x1106d0(0x11c)](_0x327640);}config[_0x1106d0(0x11e)][_0x1106d0(0x29e)](_0xee6fbe=>{const _0xe6b525=_0x1106d0;!_0x47c9ce['includes'](_0xee6fbe['coin'])&&(_0x1b44c8[_0xee6fbe[_0xe6b525(0x1c4)]]=0x0);});if(_0x48f379=='')for(const [_0x5d7a7b,_0x2b1eab]of Object['entries'](_0x1b44c8)){_0x2b1eab!=0x0&&_0x4b7352[_0x1106d0(0x11c)]({'coin':_0x5d7a7b});}else for(const [_0x55c841,_0x341315]of Object[_0x1106d0(0x272)](_0x1b44c8)){const _0x2cd549=config['portfolio'][_0x1106d0(0x146)](_0x1a96c1=>_0x1a96c1['coin']==_0x55c841),_0x56ff56=_0x55c841+'/'+_0x48f379,_0x216d58=_0x48f379+'/'+_0x55c841,_0x46ae7a=currentCoins[_0x1106d0(0x146)](_0x3e53cf=>_0x3e53cf[_0x1106d0(0x1c4)]==_0x55c841);if((_0x341315!=0x0||_0x2cd549)&&(allSymbols[_0x1106d0(0x19c)](_0x56ff56)||_0x55c841==_0x48f379))_0x46ae7a?_0x4b7352[_0x1106d0(0x11c)]({..._0x46ae7a,'number':Math[_0x1106d0(0x21d)](_0x341315+(_0x2cd549&&_0x2cd549[_0x1106d0(0x25f)]||0x0),0x0)}):_0x4b7352[_0x1106d0(0x11c)]({'coin':_0x55c841,'symbol':_0x56ff56,'reverse':![],'number':Math[_0x1106d0(0x21d)](_0x341315+(_0x2cd549&&_0x2cd549[_0x1106d0(0x25f)]||0x0),0x0),'orderstatus':_0x1106d0(0x1b5)});else{if((_0x341315!=0x0||_0x2cd549)&&allSymbols[_0x1106d0(0x19c)](_0x216d58))_0x46ae7a?_0x4b7352['push']({..._0x46ae7a,'number':Math[_0x1106d0(0x21d)](_0x341315+(_0x2cd549&&_0x2cd549[_0x1106d0(0x25f)]||0x0),0x0)}):_0x4b7352['push']({'coin':_0x55c841,'symbol':_0x216d58,'reverse':!![],'number':Math['max'](_0x341315+(_0x2cd549&&_0x2cd549[_0x1106d0(0x25f)]||0x0),0x0),'orderstatus':'none'});else _0x2cd549&&_0x4b7352['push']({'coin':_0x2cd549[_0x1106d0(0x1c4)],'symbol':_0x2cd549['symbol'],'reverse':_0x2cd549[_0x1106d0(0x1b7)],'number':0x0,'orderstatus':_0x1106d0(0x1b5)});}}return _0x4b7352[_0x1106d0(0x2a5)]((_0x39e5fe,_0x3fcccc)=>_0x39e5fe[_0x1106d0(0x186)]<_0x3fcccc[_0x1106d0(0x186)]?0x1:_0x3fcccc['delta']<_0x39e5fe[_0x1106d0(0x186)]?-0x1:0x0),_0x51b7e8=cloneDeep(_0x4b7352),_0x4b7352=_0x4b7352[_0x1106d0(0x1a6)](_0x2ca291=>{const _0x2a7072=_0x1106d0,_0x8c2233=config[_0x2a7072(0x11e)][_0x2a7072(0x146)](_0x57dc60=>_0x57dc60['coin']==_0x2ca291['coin']);return _0x8c2233&&!_0x8c2233[_0x2a7072(0x1cf)];}),[_0x4b7352,_0x51b7e8];}async function getCoinNumber(_0x50bfef){const _0x573980=_0x3a5120;let _0x54f65e;try{const _0x5ad679=await exchange[_0x573980(0x1cd)]();_0x54f65e=_0x5ad679[_0x573980(0x25c)][_0x50bfef];}catch(_0x5599a7){await handleError(_0x5599a7,_0x573980(0x288));}return _0x54f65e;}async function getOpenOrders(){const _0x566960=_0x3a5120;let _0x39b750;allOpenOrders=[];try{for(const _0x4e93a3 of config[_0x566960(0x11e)]){!_0x4e93a3[_0x566960(0x1cf)]&&_0x4e93a3['coin']!=config[_0x566960(0x1c2)]&&(_0x39b750=await exchange['fetchOpenOrders'](_0x4e93a3[_0x566960(0x19a)]),_0x39b750[_0x566960(0x158)]>0x0&&allOpenOrders[_0x566960(0x11c)](_0x39b750[0x0]));}}catch(_0x274891){await handleError(_0x274891,_0x566960(0x250));}}async function handleOpenOrders(_0xc240b=0x0){const _0x1d0877=_0x3a5120;allOpenOrders[_0x1d0877(0x158)]==0x0&&lockOrders==ORDERS[_0x1d0877(0x255)]&&allOrdersPlaced&&(_0xc240b==0x0?(logger[_0x1d0877(0x1b4)]('1\x20-\x20Handle\x20open\x20orders'),_0xc240b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1d0877(0x1b4)](_0x1d0877(0x2b9)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x3c764e){const _0x55065c=_0x3a5120,_0x46ffb7=ccxt[_0x55065c(0x283)][_0x3c764e[_0x55065c(0x261)][_0x55065c(0x1f0)]()],_0xd55685=new _0x46ffb7({'apiKey':_0x3c764e['apiKey'],'secret':_0x3c764e[_0x55065c(0x14f)],'options':{'defaultType':_0x55065c(0x298)}});if(_0x3c764e[_0x55065c(0x24e)])_0xd55685[_0x55065c(0x19f)]=_0x3c764e[_0x55065c(0x24e)];try{await _0xd55685[_0x55065c(0x1cd)]();}catch(_0x2c4d42){logger['debug'](_0x55065c(0x1d4)+_0x2c4d42[_0x55065c(0x26c)]());throw _0x2c4d42;}}function cloneDeep(_0x2debe6){const _0x3a3b24=_0x3a5120;return JSON[_0x3a3b24(0x200)](JSON[_0x3a3b24(0x2ad)](_0x2debe6));}async function getPortfolio(_0xd953b){const _0x53d8f5=_0x3a5120;let _0x20c234=[],_0x1bf30a=[],_0x5ec1a8=[],_0x3ebd5b;_0xd953b['apiKey']=decryptRSA(secure['privateKey'],_0xd953b[_0x53d8f5(0x203)]),_0xd953b[_0x53d8f5(0x14f)]=decryptRSA(secure[_0x53d8f5(0x1de)],_0xd953b[_0x53d8f5(0x14f)]);if(_0xd953b[_0x53d8f5(0x24e)])_0xd953b[_0x53d8f5(0x24e)]=decryptRSA(secure[_0x53d8f5(0x1de)],_0xd953b[_0x53d8f5(0x24e)]);if(_0xd953b[_0x53d8f5(0x203)]!==_0x53d8f5(0x275)||_0xd953b[_0x53d8f5(0x14f)]!==_0x53d8f5(0x275)||_0xd953b[_0x53d8f5(0x24e)]&&_0xd953b[_0x53d8f5(0x24e)]!==_0x53d8f5(0x275)){if(config[_0x53d8f5(0x261)]){if(_0xd953b[_0x53d8f5(0x203)]==_0x53d8f5(0x275))_0xd953b[_0x53d8f5(0x203)]=config['apiKey'];if(_0xd953b[_0x53d8f5(0x14f)]=='************')_0xd953b['apiSecret']=config[_0x53d8f5(0x14f)];if(_0xd953b[_0x53d8f5(0x24e)]==_0x53d8f5(0x275))_0xd953b[_0x53d8f5(0x24e)]=config[_0x53d8f5(0x24e)];}try{await testAPI(_0xd953b);}catch(_0x4a96a5){if(_0x4a96a5[_0x53d8f5(0x26c)]()['includes']('AuthenticationError')){logHistory('error',_0x53d8f5(0x164)),logHistory(_0x53d8f5(0x152),_0x53d8f5(0x1d9)+_0x4a96a5[_0x53d8f5(0x26c)]()),proxyEmit(_0x53d8f5(0x18f),![]);return;}else{if(_0x4a96a5['toString']()['includes'](_0x53d8f5(0x29c))){logHistory(_0x53d8f5(0x152),_0x53d8f5(0x1c1)),logHistory(_0x53d8f5(0x152),_0x53d8f5(0x1d9)+_0x4a96a5[_0x53d8f5(0x26c)]()),proxyEmit(_0x53d8f5(0x18f),![]);return;}else{logHistory(_0x53d8f5(0x152),_0x53d8f5(0x181)+_0x4a96a5[_0x53d8f5(0x26c)]()),logger[_0x53d8f5(0x1b4)](_0x53d8f5(0x2a7),_0x4a96a5),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0xd953b[_0x53d8f5(0x203)],_0xd953b['apiSecret'],_0xd953b[_0x53d8f5(0x24e)]):await initExchange(_0xd953b[_0x53d8f5(0x261)],_0xd953b[_0x53d8f5(0x203)],_0xd953b[_0x53d8f5(0x14f)],_0xd953b['apiPassword']);await loadSymbols();const _0x48b00b=await getCoins(0x0,![],_0xd953b['basecoin']);_0x5ec1a8=cloneDeep(_0x48b00b[0x1]);}else{const _0x4e8df4=await getCoins();_0x5ec1a8=cloneDeep(_0x4e8df4[0x1]);}if(_0xd953b['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x53d8f5(0x1e5),_0x5ec1a8);else{_0x5ec1a8[_0x53d8f5(0x29e)](_0x5d581f=>{const _0x38b86f=_0x53d8f5;if(_0x5d581f[_0x38b86f(0x1c4)]!=_0xd953b[_0x38b86f(0x1c2)]&&allSymbols['includes'](_0x5d581f[_0x38b86f(0x19a)]))_0x20c234['push'](_0x5d581f[_0x38b86f(0x19a)]);});if(_0x20c234[_0x53d8f5(0x158)]==0x0)logHistory(_0x53d8f5(0x152),_0x53d8f5(0x259));else{try{_0x1bf30a=await getTickers(_0x20c234);}catch(_0x40f454){logHistory(_0x53d8f5(0x152),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x53d8f5(0x1b4)](_0x53d8f5(0x2a7),_0x40f454),proxyEmit(_0x53d8f5(0x18f),![]);return;}_0x5ec1a8[_0x53d8f5(0x29e)](_0x583c49=>{const _0x57ce27=_0x53d8f5;_0x583c49[_0x57ce27(0x1c4)]!=_0xd953b[_0x57ce27(0x1c2)]?_0x1bf30a[_0x583c49[_0x57ce27(0x19a)]]?_0x3ebd5b=_0x583c49['reverse']?0x1/_0x1bf30a[_0x583c49[_0x57ce27(0x19a)]][_0x57ce27(0x23d)]:_0x1bf30a[_0x583c49[_0x57ce27(0x19a)]][_0x57ce27(0x23d)]:_0x3ebd5b=0x0:_0x3ebd5b=0x1,_0x583c49['price']=formatResult(_0x3ebd5b,0x8);}),await getMarketCap(_0x5ec1a8),proxyEmit(_0x53d8f5(0x18f),!![]),proxyEmit(_0x53d8f5(0x1e5),_0x5ec1a8);}}}function truncateTradeAmount(_0x560d80,_0x3f9426){const _0x520888=_0x3a5120;let _0x73b23=0x0;try{_0x73b23=exchange[_0x520888(0x13b)](_0x560d80,_0x3f9426);}catch(_0xea028c){}return _0x73b23;}function checkMinimums(_0x2d19f3){const _0x2e8384=_0x3a5120;let _0x554c66=!![];const _0x2d9e1f=!_0x2d19f3[_0x2e8384(0x1b7)]?markets[_0x2d19f3['symbol']][_0x2e8384(0x1f7)][_0x2e8384(0x11f)][_0x2e8384(0x243)]:markets[_0x2d19f3['symbol']][_0x2e8384(0x1f7)][_0x2e8384(0x184)][_0x2e8384(0x243)],_0x3e6432=!_0x2d19f3[_0x2e8384(0x1b7)]?markets[_0x2d19f3[_0x2e8384(0x19a)]][_0x2e8384(0x1f7)]['cost']['min']:markets[_0x2d19f3[_0x2e8384(0x19a)]][_0x2e8384(0x1f7)][_0x2e8384(0x11f)][_0x2e8384(0x243)],_0x3df707=truncateTradeAmount(_0x2d19f3['symbol'],_0x2d19f3[_0x2e8384(0x139)]);_0x2d19f3[_0x2e8384(0x139)]=_0x3df707;if(Math[_0x2e8384(0x10e)](_0x3df707)<_0x2d9e1f)_0x554c66=![];if(Math[_0x2e8384(0x10e)](_0x3df707)*_0x2d19f3['last']<_0x3e6432)_0x554c66=![];if(_0x2d19f3[_0x2e8384(0x235)]==_0x2e8384(0x149)){let _0x3924ad=config[_0x2e8384(0x11e)][_0x2e8384(0x146)](_0x453800=>_0x453800[_0x2e8384(0x1c4)]==_0x2d19f3[_0x2e8384(0x1c4)]);if(_0x3924ad[_0x2e8384(0x25f)]>0x0){if(Math['abs'](_0x3df707)>_0x2d19f3[_0x2e8384(0x129)]-_0x3924ad['offset'])_0x554c66=![];}else{if(Math[_0x2e8384(0x10e)](_0x3df707)>_0x2d19f3[_0x2e8384(0x129)])_0x554c66=![];}}if(_0x2d19f3['side']==_0x2e8384(0x1ac)){let _0x48305a=config['portfolio'][_0x2e8384(0x146)](_0x25b698=>_0x25b698[_0x2e8384(0x1c4)]==config[_0x2e8384(0x1c2)]),_0x23c30f=currentCoins[_0x2e8384(0x146)](_0x4b8819=>_0x4b8819['coin']==config[_0x2e8384(0x1c2)]);if(_0x48305a[_0x2e8384(0x25f)]>0x0){if(Math[_0x2e8384(0x10e)](_0x3df707)*_0x2d19f3[_0x2e8384(0x23d)]>_0x23c30f[_0x2e8384(0x129)]-_0x48305a[_0x2e8384(0x25f)])_0x554c66=![];}else{if(Math[_0x2e8384(0x10e)](_0x3df707)*_0x2d19f3[_0x2e8384(0x23d)]>_0x23c30f[_0x2e8384(0x129)])_0x554c66=![];}}return _0x554c66;}async function getBalances(_0x476577=!![]){const _0x14e95a=_0x3a5120;if(botPaused)return;let _0x3766f5=0x0,_0x52e4f2;const _0x1c0494=config['threshold'];if(config[_0x14e95a(0x13a)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x14e95a(0x29e)](_0x3034a1=>{const _0x186976=_0x14e95a;if(_0x3034a1[_0x186976(0x1c4)]!=config['basecoin']){let _0x4f5209=gTicker[noslash(_0x3034a1[_0x186976(0x19a)])];_0x52e4f2=_0x3034a1[_0x186976(0x1b7)]?0x1/_0x4f5209:_0x4f5209;}else _0x52e4f2=0x1;let _0x52305f=_0x3034a1[_0x186976(0x129)]*_0x52e4f2;_0x3766f5+=_0x52305f,_0x3034a1[_0x186976(0x23d)]=formatResult(Number(_0x52e4f2),0x8),_0x3034a1[_0x186976(0x18d)]=_0x52305f;}),currentCoins[_0x14e95a(0x29e)](_0x2009c0=>{const _0x5b4516=_0x14e95a;let _0x5423f3=config[_0x5b4516(0x11e)][_0x5b4516(0x146)](_0x50dbfd=>_0x50dbfd[_0x5b4516(0x1c4)]==_0x2009c0[_0x5b4516(0x1c4)]),_0x1d4516=Number(_0x5423f3['distribution']),_0x259a7a=_0x2009c0['value']/_0x3766f5*0x64,_0x3a2c85=_0x1d4516*_0x3766f5/0x64/_0x2009c0[_0x5b4516(0x23d)]-_0x2009c0['number'];_0x2009c0[_0x5b4516(0x2a2)]=formatResult(_0x259a7a,0x3),_0x2009c0['target']=formatResult(_0x1d4516,0x3),_0x2009c0[_0x5b4516(0x139)]=formatResult(_0x3a2c85,0x8),_0x2009c0[_0x5b4516(0x235)]='',_0x2009c0['valid']=![];if(_0x2009c0[_0x5b4516(0x1c4)]!=config[_0x5b4516(0x1c2)]){if(_0x2009c0[_0x5b4516(0x2a2)]>_0x1d4516)_0x2009c0['side']=_0x5b4516(0x149),_0x2009c0[_0x5b4516(0x260)]=checkMinimums(_0x2009c0);else _0x2009c0[_0x5b4516(0x2a2)]<_0x1d4516&&(_0x2009c0[_0x5b4516(0x235)]=_0x5b4516(0x1ac),_0x2009c0[_0x5b4516(0x260)]=checkMinimums(_0x2009c0));}_0x2009c0[_0x5b4516(0x186)]=_0x2009c0[_0x5b4516(0x2a2)]/_0x2009c0[_0x5b4516(0x115)]-0x1;if(_0x2009c0[_0x5b4516(0x12a)]==_0x5b4516(0x276)||_0x2009c0[_0x5b4516(0x12a)]==_0x5b4516(0x12c))_0x2009c0['orderstatus']=_0x5b4516(0x1b5);}),currentCoins[_0x14e95a(0x2a5)]((_0x19cf9e,_0x3c47c7)=>_0x19cf9e[_0x14e95a(0x186)]<_0x3c47c7[_0x14e95a(0x186)]?0x1:_0x3c47c7[_0x14e95a(0x186)]<_0x19cf9e[_0x14e95a(0x186)]?-0x1:0x0);const _0xdf8a59=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xdf8a59['eur'],'usd':_0xdf8a59['usd'],'portfolio':JSON[_0x14e95a(0x2ad)](currentCoins),'threshold':_0x1c0494},proxyEmit(_0x14e95a(0x25d),{'serverversion':serverversion,'balances':lastBalances});if(_0x476577){if(config[_0x14e95a(0x13a)])headlessMode({'portfolio':currentCoins,'threshold':_0x1c0494});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1c0494});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2b5642=getNormalizedPerformance();getStartingBalances(_0x2b5642),emitPerformance(_0x2b5642);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x33d9a3=_0x3a5120;if(!lastBalances)return;let _0x52d6ee=[],_0xe347cc,_0x4da3bc=JSON[_0x33d9a3(0x200)](lastBalances['portfolio']);_0x4da3bc[_0x33d9a3(0x2a5)]((_0x390576,_0x4b3e0c)=>_0x390576[_0x33d9a3(0x1c4)]>_0x4b3e0c[_0x33d9a3(0x1c4)]?0x1:_0x4b3e0c[_0x33d9a3(0x1c4)]>_0x390576['coin']?-0x1:0x0),_0x4da3bc['forEach'](_0x549d5f=>{const _0x3e8d3e=_0x33d9a3;let _0xc6e8bf={'coin':_0x549d5f[_0x3e8d3e(0x1c4)],'number':_0x549d5f[_0x3e8d3e(0x129)],'price':_0x549d5f[_0x3e8d3e(0x23d)]};_0x52d6ee[_0x3e8d3e(0x11c)](_0xc6e8bf);});const _0x2fab86=await getFiat();_0xe347cc={'date':lastBalances['time'][_0x33d9a3(0x16a)]('\x20')[0x0],'eur':_0x2fab86['eur'],'usd':_0x2fab86[_0x33d9a3(0x1ad)],'coins':_0x52d6ee};let _0xc0e0b8=dbPerformance[_0x33d9a3(0x163)]('data')[_0x33d9a3(0x146)]({'date':_0xe347cc[_0x33d9a3(0x299)]})[_0x33d9a3(0x18d)]();_0xc0e0b8?_0xe347cc[_0x33d9a3(0x299)]!=config[_0x33d9a3(0x237)]&&dbPerformance[_0x33d9a3(0x163)](_0x33d9a3(0x10c))['find']({'date':_0xe347cc['date']})[_0x33d9a3(0x188)](_0xe347cc)[_0x33d9a3(0x206)]():dbPerformance[_0x33d9a3(0x163)](_0x33d9a3(0x10c))[_0x33d9a3(0x11c)](_0xe347cc)[_0x33d9a3(0x206)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x223095=_0x3a5120;let _0x4ffa12=[];if(dbPerformance[_0x223095(0x1b3)]('data')[_0x223095(0x18d)]()){let _0x22aeee=dbPerformance[_0x223095(0x163)](_0x223095(0x10c))['cloneDeep']()[_0x223095(0x1a6)](_0x3c3626=>{const _0x3e87f8=_0x223095;if(_0x3c3626['coins'][_0x3e87f8(0x158)]==0x0)return![];else return!![];})[_0x223095(0x1f1)](_0x223095(0x299))[_0x223095(0x18d)](),_0x5d7f2c=[...config[_0x223095(0x240)]];_0x5d7f2c[_0x223095(0x2a5)]((_0x341402,_0xae16a4)=>_0x341402['date']>_0xae16a4[_0x223095(0x299)]?-0x1:_0xae16a4[_0x223095(0x299)]>_0x341402[_0x223095(0x299)]?0x1:0x0);let _0x59c323=0x1,_0x161413=[],_0x13df81=0x0;_0x22aeee[_0x223095(0x14e)]()[_0x223095(0x1b7)]()[_0x223095(0x29e)]((_0x273a81,_0x357fa7)=>{const _0x453720=_0x223095;if(_0x5d7f2c[_0x13df81]){if(_0x22aeee[_0x22aeee[_0x453720(0x158)]-_0x357fa7]&&_0x5d7f2c[_0x13df81][_0x453720(0x299)]==_0x22aeee[_0x22aeee[_0x453720(0x158)]-_0x357fa7][_0x453720(0x299)]){if(_0x357fa7<_0x22aeee[_0x453720(0x158)]){let _0x322cc1=0x0,_0x3a461a=0x0;_0x22aeee[_0x22aeee[_0x453720(0x158)]-_0x357fa7][_0x453720(0x172)]['forEach'](_0x4598b7=>{const _0x214207=_0x453720;_0x3a461a+=_0x4598b7[_0x214207(0x129)]*_0x4598b7[_0x214207(0x1e7)];}),_0x5d7f2c[_0x13df81]['changes'][_0x453720(0x29e)](_0x5ec757=>{const _0x511bf1=_0x453720;_0x322cc1+=_0x5ec757[_0x511bf1(0x129)]*_0x5ec757[_0x511bf1(0x1e7)];}),_0x59c323*=_0x322cc1/(_0x3a461a-_0x322cc1)+0x1;}_0x13df81++;}}let _0x2fdc79=0x0;_0x273a81[_0x453720(0x172)][_0x453720(0x29e)](_0x295008=>{const _0x58694b=_0x453720;_0x2fdc79+=_0x295008['number']*_0x295008[_0x58694b(0x1e7)];}),_0x161413[_0x22aeee[_0x453720(0x158)]-_0x357fa7-0x1]=_0x2fdc79*(_0x59c323-0x1);});let _0x10e4de=[];_0x5d7f2c=[...config[_0x223095(0x240)]]||[];let _0x277585=0x0;_0x13df81=0x0,_0x22aeee[_0x223095(0x29e)]((_0x512890,_0x326573)=>{const _0xc80c7e=_0x223095;if(_0x5d7f2c[_0x13df81]){const _0x2836d7=fns[_0xc80c7e(0x200)](_0x5d7f2c[_0x13df81][_0xc80c7e(0x299)],_0xc80c7e(0x1d3),new Date()),_0x263fd2=fns['parse'](_0x512890[_0xc80c7e(0x299)],'yyyy/MM/dd',new Date());if(fns[_0xc80c7e(0x21a)](_0x2836d7,_0x263fd2)){let _0x88a4c3=0x0;_0x5d7f2c[_0x13df81][_0xc80c7e(0x27f)]['forEach'](_0x1844b9=>{const _0x420e71=_0xc80c7e;!_0x10e4de[_0x1844b9[_0x420e71(0x1c4)]]?_0x10e4de[_0x1844b9[_0x420e71(0x1c4)]]=_0x1844b9[_0x420e71(0x129)]:(_0x88a4c3=_0x10e4de[_0x1844b9['coin']],_0x10e4de[_0x1844b9[_0x420e71(0x1c4)]]+=_0x1844b9[_0x420e71(0x129)]);const _0x3c3e17=_0x512890[_0x420e71(0x172)]['find'](_0x321fc6=>_0x321fc6[_0x420e71(0x1c4)]==_0x1844b9[_0x420e71(0x1c4)]);(!_0x3c3e17||_0x3c3e17['number']==0x0)&&(_0x277585+=(-_0x1844b9[_0x420e71(0x129)]-_0x88a4c3)*_0x1844b9[_0x420e71(0x1e7)]);}),_0x13df81++;}}_0x512890[_0xc80c7e(0x172)][_0xc80c7e(0x29e)]((_0x2ca5e4,_0x48b97d)=>{const _0x4caf2a=_0xc80c7e;_0x10e4de[_0x2ca5e4[_0x4caf2a(0x1c4)]]&&(_0x2ca5e4['initial']=_0x10e4de[_0x2ca5e4[_0x4caf2a(0x1c4)]]);}),_0x4ffa12[_0xc80c7e(0x11c)]({'date':_0x512890[_0xc80c7e(0x299)],'eur':_0x512890[_0xc80c7e(0x223)],'usd':_0x512890['usd'],'offset':_0x161413[_0x326573],'netoffset':_0x277585,'coins':_0x512890[_0xc80c7e(0x172)]});});}return _0x4ffa12;}function emitPerformance(_0x22ebdb){const _0x5a5ec5=_0x3a5120;_0x22ebdb[_0x5a5ec5(0x158)]!==0x0?(proxyEmit(_0x5a5ec5(0x1e6),_0x22ebdb),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5ddc35,_0x463364){const _0x30ef58=_0x3a5120;let _0xc97558=0x0,_0x1d9c5c=0x0,_0xdae09b=0x0;_0x5ddc35[_0x30ef58(0x172)]['forEach'](_0x233402=>{const _0x3d87c5=_0x30ef58;_0xc97558+=_0x233402[_0x3d87c5(0x129)]*_0x233402['price'];});_0x463364&&(_0xc97558+=_0x5ddc35[_0x30ef58(0x25f)]);if(config['basecoin']==='BTC'||config[_0x30ef58(0x1c2)]===_0x30ef58(0x1b9)||config[_0x30ef58(0x1c2)]===_0x30ef58(0x290))_0x1d9c5c=_0xc97558*_0x5ddc35[_0x30ef58(0x223)],_0xdae09b=_0xc97558*_0x5ddc35[_0x30ef58(0x1ad)];else{if(usdBasecoins[_0x30ef58(0x19c)](config['basecoin']))_0x1d9c5c=_0xc97558*_0x5ddc35['eur']/_0x5ddc35[_0x30ef58(0x1ad)],_0xdae09b=_0xc97558;else config[_0x30ef58(0x1c2)]===_0x30ef58(0x1fb)&&(_0x1d9c5c=_0xc97558,_0xdae09b=_0xc97558*_0x5ddc35['usd']/_0x5ddc35[_0x30ef58(0x223)]);}return[_0xc97558,_0x1d9c5c,_0xdae09b];}function getKPIs(_0x115b63,_0x4c4464='EUR'){const _0x41686e=_0x3a5120,_0xf66d09=config[_0x41686e(0x1c2)],_0x12f132=lastBalances,_0xf5e4e9=currentCoins,_0x1c34e4=getNormalizedPerformance(),_0x3f52aa=_0x115b63===_0x41686e(0x1c2)?_0xf66d09:_0x115b63==='fiat'||_0x115b63===_0x41686e(0x28c)?_0x4c4464:_0x41686e(0x1f3)+_0xf66d09,_0x275298=_0x115b63===_0x41686e(0x1fe)?_0x41686e(0x1c9):_0x115b63==='net-fiat'?_0x41686e(0x1c9):_0x3f52aa+'\x20value',_0x5338bd=_0x115b63===_0x41686e(0x1fe)||_0x115b63===_0x41686e(0x28c)?_0x41686e(0x1c9):_0x3f52aa+_0x41686e(0x125);let _0x3c71e2=0x0;_0xf5e4e9[_0x41686e(0x29e)](_0x2b261e=>{const _0x2f8bb1=_0x41686e;_0x3c71e2+=_0x2b261e[_0x2f8bb1(0x129)]*_0x2b261e[_0x2f8bb1(0x23d)];});if(_0x115b63===_0x41686e(0x196)||_0x115b63==='net-fiat'){if(_0xf66d09===_0x41686e(0x24a)||_0xf66d09===_0x41686e(0x1b9)||_0xf66d09===_0x41686e(0x290))_0x3c71e2=_0x3c71e2*(_0x4c4464===_0x41686e(0x1fb)?_0x12f132[_0x41686e(0x223)]:_0x12f132[_0x41686e(0x1ad)]);else{if(usdBasecoins[_0x41686e(0x19c)](_0xf66d09))_0x3c71e2=_0x3c71e2*(_0x4c4464==='EUR'?_0x12f132[_0x41686e(0x223)]/_0x12f132['usd']:0x1);else _0xf66d09==='EUR'&&(_0x3c71e2=_0x3c71e2*(_0x4c4464==='EUR'?0x1:_0x12f132['usd']/_0x12f132[_0x41686e(0x223)]));}}let _0x4ea6e6;if(_0x3c71e2!==0x0){if(_0x115b63==='basecoin')_0x4ea6e6=(_0x3c71e2/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4c4464==='EUR')_0x4ea6e6=(_0x3c71e2/startingBalances[_0x41686e(0x223)]-0x1)*0x64;else _0x4ea6e6=(_0x3c71e2/startingBalances[_0x41686e(0x1ad)]-0x1)*0x64;}let _0x58f30c=0x0;if(startingBalances[_0x41686e(0x172)])_0xf5e4e9[_0x41686e(0x29e)](_0x2ed1e0=>{const _0x5c8540=_0x41686e;let _0x535c0=startingBalances[_0x5c8540(0x172)]['find'](_0x15764e=>_0x15764e[_0x5c8540(0x1c4)]===_0x2ed1e0[_0x5c8540(0x1c4)]);if(_0x535c0&&_0x535c0['coin']&&_0x2ed1e0['number']!==0x0)_0x58f30c+=_0x535c0['number']*_0x2ed1e0['last'];});let _0x5a9492=0x0;if(_0x1c34e4[_0x41686e(0x158)]!==0x0){let _0x41e9ad=_0x1c34e4[_0x1c34e4[_0x41686e(0x158)]-0x1];_0x5a9492=_0x41e9ad[_0x41686e(0x13f)];}_0x58f30c-=_0x5a9492;_0x115b63===_0x41686e(0x1fe)&&(_0x4ea6e6=(_0x3c71e2-_0x58f30c)/startingBalances['basecoin']*0x64,_0x3c71e2=_0x3c71e2-_0x58f30c);if(_0x115b63==='net-fiat'){let _0x247d30=_0x4c4464===_0x41686e(0x1fb)?startingBalances[_0x41686e(0x223)]:startingBalances['usd'];if(_0xf66d09===_0x41686e(0x24a)||_0xf66d09===_0x41686e(0x1b9)||_0xf66d09===_0x41686e(0x290))_0x58f30c=_0x4c4464===_0x41686e(0x1fb)?_0x58f30c*_0x12f132[_0x41686e(0x223)]:_0x58f30c*_0x12f132['usd'];else{if(usdBasecoins[_0x41686e(0x19c)](_0xf66d09))_0x58f30c=_0x4c4464===_0x41686e(0x1fb)?_0x58f30c*_0x12f132[_0x41686e(0x223)]/_0x12f132['usd']:_0x58f30c;else _0xf66d09===_0x41686e(0x1fb)&&(_0x58f30c=_0x4c4464===_0x41686e(0x1fb)?_0x58f30c:_0x58f30c*_0x12f132[_0x41686e(0x1ad)]/_0x12f132[_0x41686e(0x223)]);}_0x4ea6e6=(_0x3c71e2-_0x58f30c)/_0x247d30*0x64,_0x3c71e2=_0x3c71e2-_0x58f30c;}if(_0x4ea6e6){if(_0x4ea6e6<0x64)_0x4ea6e6=_0x4ea6e6[_0x41686e(0x168)](0x2);else{if(_0x4ea6e6<0x3e8)_0x4ea6e6=_0x4ea6e6[_0x41686e(0x168)](0x1);else _0x4ea6e6=_0x4ea6e6[_0x41686e(0x168)](0x0);}}else _0x4ea6e6=Number('0')[_0x41686e(0x168)](0x2);if(_0x3c71e2){if(Math[_0x41686e(0x10e)](_0x3c71e2)<0.000001)_0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x2);else{if(Math['abs'](_0x3c71e2)<0.1)_0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x6);else{if(Math[_0x41686e(0x10e)](_0x3c71e2)<0x1)_0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x5);else{if(Math['abs'](_0x3c71e2)<0xa)_0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x4);else{if(Math[_0x41686e(0x10e)](_0x3c71e2)<0x64)_0x3c71e2=_0x3c71e2['toFixed'](0x3);else{if(Math['abs'](_0x3c71e2)<0x3e8)_0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x2);else _0x3c71e2=_0x3c71e2[_0x41686e(0x168)](0x2);}}}}}}else _0x3c71e2=Number('0')[_0x41686e(0x168)](0x2);}else _0x4ea6e6=Number('0')[_0x41686e(0x168)](0x2);return{'value':_0x3c71e2,'change':_0x4ea6e6,'leftTxt':_0x275298,'rightTxt':_0x5338bd};}function _0x1abf(){const _0x5b9e3e=['colorscheme','initial','Manual\x20balancing\x20required','sendPortfolioTelegram','token\x20is\x20expired',':\x20Bot\x20','bb-secure.json',':\x20timer\x20>','2yJqEHr','buys','success','running','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','isEqual','replace','process\x20','max','Cooldown\x20ended\x20-\x20balancing\x20resumed','./version.json','warning','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Trigger:\x20','eur','2\x20-\x20Validate\x20orders:\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','datetime','Order(s)\x20not\x20validated\x20after\x20','join','BNB','\x20hour','mkdirSync','rightTxt','args','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20:\x20','\x20portfolio:</b>\x20\x0a\x0a','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startsWith','quick','recreateCoinResults()','side','sha256','startdate','InsufficientFunds','\x20>\x20pausing\x20bot\x20for\x20','getMinutes','OnMaintenance','Failed\x20to\x20load\x20coin\x20data\x20for\x20','last','percentage','2.6.22','liquidity','memoryUsage','Waited\x20','min','writeFile','privateKeyFromPem','Resuming\x20(','event-history','\x20API\x20secret\x20is\x20invalid','indexOf','BTC','axios','\x20exchange','cancel','apiPassword','API-key\x20format\x20invalid','getOpenOrders()','-events.json','\x20>\x20[DEBUG]\x20',')\x20|\x20exchange:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','LOCKED','heapUsed','\x20>\x20','\x20attempts','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','UNLOCKED','Limit\x20(high-margin)','total','balances','uncaughtException','offset','valid','exchange','showname','round','/backup/','search','market_cap','/USDT','InvalidOrder','pop','</pre>','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','toString','substring','sqrt','Pausing\x20for\x20','loading-canceled','\x20-\x20bot\x20not\x20started','entries','***','./config/','************','filled','freeze','event','placeOrder()','change24h','createWriteStream','Initiating\x20bot\x20restart','fetchTicker','constructor','changes','(see:\x20hodlerhacks.com/fix/1)','configuration-stored','status\x20code\x20401','pro','(((.+)+)+)+$','getMonth','\x20orders\x20in\x20less\x20than\x20','Reset\x20|\x20','getCoinNumber()','Set\x20lock\x20orders\x20to:\x20','recovery','enableFiatToggle','net-fiat','cancelOrder','Huobi','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','PAXG','getTime','shift','node-forge','Initializing\x20exchange','date-fns','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','ordertype','spot','date','getStartingBalances','exec','PermissionDenied','watchOrders','forEach','page','deleteHistoryAlerts','Exchange','distribution','<pre>','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','sort','marketcapsqrt','Error\x20details:','Resetting\x20coin\x20results:\x20','USDT','onepagemode','RETRY\x20-\x20Problem\x20resolved\x20after\x20','\x20|\x20Custom\x20ID:\x20','stringify','Bybit','restart','leftTxt','exchange\x20reload','ask','final','watchTrades','1072244riAWZh','\x20|\x20lock\x20orders:\x20','1\x20-\x20Validate\x20orders:\x20','remainingSymbols','2\x20-\x20Handled\x20open\x20orders','Network\x20error\x20details:','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','27573nvIILn','RequestTimeout','resetHistory','bid','request-time','TUSD','added','data','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','abs','no\x20open\x20orders','bots','customId','string','\x20/\x20','-------------------------------\x0a','target','logs','average','\x20API\x20key\x20is\x20invalid','\x20metrics:</b>\x20\x0a\x0a','environment','Error\x20in\x20loadSymbols():\x20','push','marketcapEnabled','portfolio','amount','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Binance','Order\x20is\x20invalid:\x20','<b>','open','\x20change','fetchTickers','Order\x20amount\x20is\x20invalid:\x20','USD','number','orderstatus','0\x20-\x20EXECUTION:\x20','canceled','quote','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','differenceInSeconds','defaults','174DIQAsi','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','timestamp','splice','openOrders','23271578zzcfNl','ccxt','showConfig','trade','headless','amountToPrecision','BNB/','584ZdieAu','update-liquidity','netoffset','set','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Portfolio\x20change\x20detected:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','getFullYear','emojibuy','find','\x20|\x20exchange:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','sell','padEnd','starting-balances','toUpperCase','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','slice','apiSecret','staging','switch-manual','error','bot-','Insufficient\x20funds\x20to\x20execute\x20order:\x20','autoliquidity','argv','startnumber','length','fee','lowdb','getSeconds','.json','marketcap','RETRY\x20-\x20Error\x20in\x20','BUSD','botname','format','unlinkSync','get','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','status','market','exchanges','toFixed','Executed\x20','split','Fee\x20discount\x20refund\x20detected:\x20','log','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','cooldown','time','recent20','watchTradesForSymbols','coins','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','watchTradesForSymbols()','pki','ongoing','/USD','/EUR','getPortfolio','\x20-\x20','Error:\x20Invalid\x20argument\x20','Symbol(s):\x20','full','enabled','Invalid\x20balance\x20for\x20','function','Error\x20occurred:\x20','2.3.5','Cryptocom','cost','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','delta','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','assign','limit','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','UNLOCKING','Bot\x20','value','getHours','portfolio1','change','fetchTickers()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','map','2.5.0','-results.json','fiat','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','apply','symbol','getDate','includes','Loading\x20completed','type','password','Valid\x20balance\x20for\x20','3666261tdzRYp','padStart','-config.json','1\x20-\x20partially\x20FILLED\x20(','InvalidNonce','filter','keys','Block\x20transaction\x20detection:\x20','createOrder','%\x20(','limit-high','buy','usd','-performance.json','fromCodePoint','USDC','threshold','AuthenticationError','has','debug','none','timeshift','reverse','sells','ETH','kill','1\x20-\x20FILLED\x20known\x20order:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','send','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timeout','\x20network\x20error:\x20','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','basecoin','version','coin','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','breakeven','Invalid\x20symbol:\x20','slider','Net\x20effect','progress','Exception\x20thrown\x20in\x20','cancelOrders()','fetchBalance','yargs/yargs','excluded','fetchOpenOrders','realized','\x20|\x20','yyyy/MM/dd','Error\x20in\x20testAPI():\x20','loadSymbols()','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','ExchangeNotAvailable','661930KhzzMm','Error\x20details:\x20','complete','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Invalid\x20quantity','privateKey','order','emitHistory','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','floor','decode64','Stopped\x20fetching\x20balance\x20after\x20','portfolio2','performance','price','153JeVgIh','existsSync','pid','001','bot','\x20minutes\x20-\x20','emojisell','initclient','toLowerCase','sortBy','highest','Net\x20','message','1095883eDHoFH','fetchBalance()','limits','Resetting\x20bot\x20history','create','removed','EUR','bb-settings.json','orderId','net-basecoin','34955AlwLSU','parse','Initializing\x20exchange:\x20already\x20done','\x20minutes','apiKey','\x20>\x20details:','currency','write','startprice','configuration','./logs/','marketcapApi','util'];_0x1abf=function(){return _0x5b9e3e;};return _0x1abf();}async function getStartingBalances(_0x1507d8,_0x89aa81=!![]){const _0x2a281b=_0x3a5120;if(_0x1507d8['length']!==0x0){const [_0xe276bc,_0x111074,_0x27ac1a]=getPerf(_0x1507d8[0x0],!![]);let _0x872ff7=[];config[_0x2a281b(0x11e)][_0x2a281b(0x29e)](_0x188aa8=>{const _0x234988=_0x2a281b;let _0x257b2a=0x0,_0x34566b;config[_0x234988(0x240)][_0x234988(0x29e)](_0x5a2b76=>{const _0x11a30f=_0x234988;let _0x5bf1c0=_0x5a2b76['changes'][_0x11a30f(0x146)](_0x4f4beb=>_0x4f4beb[_0x11a30f(0x1c4)]==_0x188aa8[_0x11a30f(0x1c4)]);if(_0x5bf1c0){_0x257b2a+=_0x5bf1c0[_0x11a30f(0x129)];if(!_0x34566b)_0x34566b=_0x5bf1c0[_0x11a30f(0x1e7)];}}),_0x872ff7[_0x234988(0x11c)]({'coin':_0x188aa8[_0x234988(0x1c4)],'number':_0x257b2a,'initialprice':_0x34566b});});const _0x1e48a3={'basecoin':_0xe276bc,'eur':_0x111074,'usd':_0x27ac1a,'coins':_0x872ff7};if(_0x89aa81)proxyEmit(_0x2a281b(0x14b),_0x1e48a3);startingBalances=_0x1e48a3;}}function headlessMode(_0x3c3461){const _0x207e8e=_0x3a5120;let _0x318618=_0x3c3461[_0x207e8e(0x11e)],_0x4f8758=_0x3c3461['threshold'],_0xf4be5b=[];for(let _0x877c26 of _0x318618){if(_0x877c26['coin']!=config[_0x207e8e(0x1c2)]){if(_0x877c26['delta']>=_0x4f8758/0x64){if(_0x877c26['valid'])_0xf4be5b[_0x207e8e(0x11c)](_0x877c26);}else{if(_0x877c26[_0x207e8e(0x186)]<=-_0x4f8758/0x64){if(_0x877c26[_0x207e8e(0x260)])_0xf4be5b[_0x207e8e(0x11c)](_0x877c26);}}}}_0xf4be5b[_0x207e8e(0x158)]>0x0&&placeOrder(_0xf4be5b);}function notifyBalance(_0x5d659a){const _0x3b0005=_0x3a5120;let _0x22513e=_0x5d659a[_0x3b0005(0x11e)],_0x2e67eb=_0x5d659a[_0x3b0005(0x1b1)],_0x2c8508=[];for(let _0x388d94 of _0x22513e){if(_0x388d94['coin']!=config[_0x3b0005(0x1c2)]){if(_0x388d94[_0x3b0005(0x186)]>=_0x2e67eb/0x64){if(_0x388d94[_0x3b0005(0x260)])_0x2c8508[_0x3b0005(0x11c)](_0x388d94);}else{if(_0x388d94[_0x3b0005(0x186)]<=-_0x2e67eb/0x64){if(_0x388d94[_0x3b0005(0x260)])_0x2c8508[_0x3b0005(0x11c)](_0x388d94);}}}}if(_0x2c8508[_0x3b0005(0x158)]>0x0){let _0x9e70e8=_0x2c8508['map'](_0x20f76e=>_0x20f76e[_0x3b0005(0x1c4)]);_0x9e70e8[_0x3b0005(0x2a5)]();let _0x4f7a4d=_0x9e70e8[_0x3b0005(0x228)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3b0005(0x220),_0x3b0005(0x20e));lastCoinsToBalance=_0x4f7a4d;}}function symbolToCoin(_0x262143){const _0x3f898e=_0x3a5120;let _0x265fca;if(_0x262143[_0x3f898e(0x19c)]('/'+config[_0x3f898e(0x1c2)]))_0x265fca=_0x262143[_0x3f898e(0x21b)]('/'+config[_0x3f898e(0x1c2)],'');if(_0x262143['includes'](config[_0x3f898e(0x1c2)]+'/'))_0x265fca=_0x262143[_0x3f898e(0x21b)](config[_0x3f898e(0x1c2)]+'/','');return _0x265fca;}function setLockOrders(_0x1dbb08){const _0x6b4b5c=_0x3a5120;lockOrders=_0x1dbb08,logger[_0x6b4b5c(0x1b4)](_0x6b4b5c(0x289)+Object[_0x6b4b5c(0x1a7)](ORDERS)[lockOrders]);}async function unlockOrders(_0x148a55=![]){const _0x3ce9fc=_0x3a5120;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3ce9fc(0x255)]){setLockOrders(ORDERS[_0x3ce9fc(0x18b)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x148a55){const _0x5a0911=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5a0911,setBlockTransactionDetection(![]);}validateOrdersState=_0x3ce9fc(0x20d),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x2810dd){const _0x4fda7b=_0x3a5120;if(_0x2810dd)validateOrdersState=_0x2810dd;logger['debug'](_0x4fda7b(0x2b7)+validateOrdersState+_0x4fda7b(0x2b6)+Object[_0x4fda7b(0x1a7)](ORDERS)[lockOrders]);let _0x32065e=[],_0x1df09b=config[_0x4fda7b(0x297)]==_0x4fda7b(0x166)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4fda7b(0x1bf)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x4fda7b(0x1b4)](_0x4fda7b(0x224)+validateOrdersState);for(let _0x59cbd0=lastOrders['length']-0x1;_0x59cbd0>=0x0;_0x59cbd0--){let _0x2c78b3=lastOrders[_0x59cbd0],_0x5cff7f=![];_0x2c78b3['filled']>0x0&&(_0x5cff7f=!![]),_0x32065e[_0x4fda7b(0x11c)](_0x5cff7f),_0x5cff7f&&config[_0x4fda7b(0x297)]!='market'&&logHistory(_0x4fda7b(0x1df),'Order\x20filled:\x20'+_0x2c78b3[_0x4fda7b(0x19a)]+'\x20'+_0x2c78b3[_0x4fda7b(0x235)]+'\x20#'+formatResult(_0x2c78b3[_0x4fda7b(0x276)],0x8)+'\x20@'+formatResult(_0x2c78b3[_0x4fda7b(0x1e7)],0x8)),_0x5cff7f&&lastOrders['splice'](_0x59cbd0,0x1);}persistOpenOrders(lastOrders);const _0x35f74f=coolingDown?_0x4fda7b(0x148):'balancing\x20resumed';if(validateOrdersState==_0x4fda7b(0x20d)){validateOrdersState=_0x4fda7b(0x176);if(_0x32065e[_0x4fda7b(0x19c)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4fda7b(0x176)){if(_0x32065e[_0x4fda7b(0x19c)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4fda7b(0x2b3))_0x32065e[_0x4fda7b(0x19c)](![])&&(config[_0x4fda7b(0x297)]==_0x4fda7b(0x166)?logHistory(_0x4fda7b(0x216),_0x4fda7b(0x227)+Math[_0x4fda7b(0x263)](_0x1df09b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x35f74f):(await cancelOrders(),logHistory(_0x4fda7b(0x216),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x1df09b*validateOrderInterval/0xea60)+_0x4fda7b(0x1ed)+_0x35f74f))),await unlockOrders(!![]);else{if(validateOrdersState==_0x4fda7b(0x10f)){if(config['ordertype']!=_0x4fda7b(0x166))logHistory(_0x4fda7b(0x216),'No\x20more\x20open\x20orders\x20-\x20'+_0x35f74f);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2d0793=>{const _0x12389e=_0x38f0;try{const _0x2dda6a=await exchange[_0x12389e(0x28d)](_0x2d0793[_0x12389e(0x1fd)],_0x2d0793['symbol']);}catch(_0x368d14){if(_0x368d14[_0x12389e(0x26c)]()[_0x12389e(0x19c)]('OrderNotFound')){}else await handleError(_0x368d14,_0x12389e(0x1cc));}});}async function initCoinResults(_0x3ec33a){const _0x5f0a5d=_0x3a5120;_0x3ec33a?logger['debug'](_0x5f0a5d(0x2a8)+_0x3ec33a):logger['debug']('Initializing\x20coin\x20results'),config[_0x5f0a5d(0x11e)][_0x5f0a5d(0x29e)](_0xabb8a7=>{const _0x26e7ed=_0x5f0a5d;if(!_0xabb8a7[_0x26e7ed(0x1cf)]&&_0xabb8a7[_0x26e7ed(0x1c4)]!=config[_0x26e7ed(0x1c2)]){const _0x5ae605=currentCoins['find'](_0x4803d0=>_0x4803d0['coin']==_0xabb8a7[_0x26e7ed(0x1c4)]),_0x5514a6=gTicker[noslash(_0xabb8a7[_0x26e7ed(0x19a)])];let _0x1ad8bc=_0x5ae605?_0x5ae605[_0x26e7ed(0x129)]:null,_0xdb4fdf=_0xabb8a7[_0x26e7ed(0x1b7)]?0x1/_0x5514a6:_0x5514a6,_0x177563;config[_0x26e7ed(0x240)][_0x26e7ed(0x29e)](_0x39dc1f=>{const _0x34a967=_0x26e7ed;!_0x177563&&(_0x177563=_0x39dc1f[_0x34a967(0x27f)][_0x34a967(0x146)](_0x558eb5=>_0x558eb5[_0x34a967(0x1c4)]==_0xabb8a7[_0x34a967(0x1c4)]),_0x177563&&(_0x1ad8bc=_0x177563[_0x34a967(0x129)],_0xdb4fdf=_0x177563[_0x34a967(0x1e7)]));});let _0x5e6579=dbCoinResults['get']('coins')[_0x26e7ed(0x146)]({'coin':_0xabb8a7[_0x26e7ed(0x1c4)]})['value']();if(!_0x5e6579){const _0x2b4c4f={'coin':_0xabb8a7['coin'],'number':_0x1ad8bc,'breakeven':_0xdb4fdf,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x26e7ed(0x11c)](_0x2b4c4f)[_0x26e7ed(0x206)]();}else{if(_0x3ec33a&&_0xabb8a7[_0x26e7ed(0x1c4)]==_0x3ec33a){const _0x5aec14={'coin':_0xabb8a7['coin'],'number':_0x1ad8bc,'breakeven':_0xdb4fdf,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x26e7ed(0x163)](_0x26e7ed(0x172))[_0x26e7ed(0x146)]({'coin':_0xabb8a7[_0x26e7ed(0x1c4)]})['assign'](_0x5aec14)[_0x26e7ed(0x206)]();}}}});}async function updateCoinResults(_0x13e053,_0x550e31=![]){const _0x308c12=_0x3a5120;let _0x4963ea,_0x4bdcb8,_0xc212a3,_0x2b6a19,_0x2885e0,_0x3b83ba,_0x14fb08=dbCoinResults[_0x308c12(0x163)](_0x308c12(0x172))[_0x308c12(0x146)]({'coin':_0x13e053[_0x308c12(0x1c4)]})[_0x308c12(0x18d)](),_0x3e4133=![];_0x14fb08&&Object['entries'](_0x14fb08)[_0x308c12(0x29e)](([_0x26a736,_0x384cd9])=>{if(_0x384cd9==null)_0x3e4133=!![];});(!_0x14fb08||_0x3e4133)&&(await initCoinResults(_0x13e053[_0x308c12(0x1c4)]),_0x14fb08=dbCoinResults[_0x308c12(0x163)](_0x308c12(0x172))[_0x308c12(0x146)]({'coin':_0x13e053['coin']})['value']());_0x13e053[_0x308c12(0x1b7)]&&(_0x3b83ba={'filled':_0x13e053[_0x308c12(0x276)]*_0x13e053['price'],'amount':_0x13e053[_0x308c12(0x276)]*_0x13e053[_0x308c12(0x1e7)],'side':_0x13e053[_0x308c12(0x235)]=='sell'?_0x308c12(0x1ac):_0x308c12(0x149),'price':0x1/_0x13e053[_0x308c12(0x1e7)]},_0x13e053={..._0x13e053,..._0x3b83ba});_0x550e31?_0x4bdcb8=_0x13e053[_0x308c12(0x235)]=='buy'?_0x14fb08[_0x308c12(0x129)]+_0x13e053[_0x308c12(0x276)]:_0x14fb08[_0x308c12(0x129)]-_0x13e053[_0x308c12(0x276)]:_0x4bdcb8=await getCoinNumber(_0x13e053['coin']);if(_0x13e053[_0x308c12(0x159)]&&_0x13e053[_0x308c12(0x159)]['currency']==config[_0x308c12(0x1c2)])_0x4963ea=Number(_0x13e053['fee'][_0x308c12(0x184)]);else{if(_0x13e053[_0x308c12(0x159)]&&_0x13e053['fee'][_0x308c12(0x205)]==_0x308c12(0x229)&&!_0x550e31&&config[_0x308c12(0x1c2)]!=_0x308c12(0x290))_0x4963ea=Number(_0x13e053['fee'][_0x308c12(0x184)])*gTicker[_0x308c12(0x229)+config[_0x308c12(0x1c2)]];else _0x4963ea=defaultFee*_0x13e053['filled']*_0x13e053[_0x308c12(0x1e7)];}_0x13e053[_0x308c12(0x235)]==_0x308c12(0x1ac)?(_0xc212a3=_0x4bdcb8!=0x0?(_0x14fb08['breakeven']*_0x14fb08[_0x308c12(0x129)]+_0x13e053[_0x308c12(0x1e7)]*(_0x4bdcb8-_0x14fb08[_0x308c12(0x129)])+_0x4963ea)/_0x4bdcb8:0x0,_0x2b6a19=_0x14fb08[_0x308c12(0x1d1)]):(_0xc212a3=_0x4bdcb8!=0x0?(_0x14fb08[_0x308c12(0x1c6)]*_0x14fb08['number']-_0x13e053[_0x308c12(0x1e7)]*(_0x14fb08[_0x308c12(0x129)]-_0x4bdcb8)+_0x4963ea)/_0x4bdcb8:0x0,_0x2b6a19=_0x14fb08['realized']+(_0x13e053[_0x308c12(0x1e7)]-_0x14fb08[_0x308c12(0x1c6)])*_0x13e053[_0x308c12(0x276)]);_0x2885e0=(_0x13e053['price']-_0xc212a3-_0x4963ea/_0x13e053['filled'])*_0x4bdcb8;let _0x1cca77={'coin':_0x13e053[_0x308c12(0x1c4)],'number':_0x4bdcb8,'breakeven':formatResult(_0xc212a3,0x8),'realized':formatResult(_0x2b6a19,0x8),'unrealized':formatResult(_0x2885e0,0x8),'fees':formatResult(_0x14fb08['fees']+_0x4963ea,0x8),'sells':_0x13e053[_0x308c12(0x235)]==_0x308c12(0x149)?_0x14fb08[_0x308c12(0x1b8)]+0x1:_0x14fb08[_0x308c12(0x1b8)],'buys':_0x13e053[_0x308c12(0x235)]==_0x308c12(0x1ac)?_0x14fb08[_0x308c12(0x215)]+0x1:_0x14fb08[_0x308c12(0x215)]};dbCoinResults[_0x308c12(0x163)]('coins')[_0x308c12(0x146)]({'coin':_0x13e053[_0x308c12(0x1c4)]})[_0x308c12(0x188)](_0x1cca77)[_0x308c12(0x206)]();if(!_0x550e31){if(_0x13e053[_0x308c12(0x159)]&&_0x13e053['fee'][_0x308c12(0x205)]==_0x308c12(0x229)){const _0x386049=currentCoins[_0x308c12(0x146)](_0x41a676=>_0x41a676[_0x308c12(0x1c4)]==_0x308c12(0x229));if(_0x386049){let _0xbe7ee3=dbCoinResults['get'](_0x308c12(0x172))['find']({'coin':'BNB'})[_0x308c12(0x18d)]();_0x1cca77={..._0xbe7ee3,'number':_0x386049[_0x308c12(0x129)]},dbCoinResults[_0x308c12(0x163)](_0x308c12(0x172))[_0x308c12(0x146)]({'coin':'BNB'})[_0x308c12(0x188)](_0x1cca77)['write']();}}}}async function placeOrder(_0x2655e0){const _0x242290=_0x3a5120,_0x21414d=config[_0x242290(0x297)]==_0x242290(0x166)?'market':_0x242290(0x189);if(lockOrders==ORDERS[_0x242290(0x25a)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x242290(0x1b4)]('Placing\x20order\x20for:\x20'+_0x2655e0[_0x242290(0x193)](_0x541498=>_0x541498[_0x242290(0x1c4)])[_0x242290(0x228)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x242290(0x20d);let _0x370ba5=![];lastOrders=[];const _0x23e6ac=config['threshold'];for(const _0x1bf35f of _0x2655e0){let _0x4d09e4,_0x315b14,_0x52a8be,_0x5deb29,_0x274a38,_0x8ad81e=_0x1bf35f[_0x242290(0x19a)];logger[_0x242290(0x1b4)](_0x242290(0x222)+_0x1bf35f[_0x242290(0x1c4)]+'\x20'+_0x1bf35f[_0x242290(0x129)]+'\x20'+_0x1bf35f[_0x242290(0x23d)]+'\x20'+_0x1bf35f[_0x242290(0x2a2)]+'%\x20'+_0x1bf35f[_0x242290(0x115)]+'%\x20'+(0x64*_0x1bf35f[_0x242290(0x186)])[_0x242290(0x168)](0x2)+'%\x20('+_0x23e6ac[_0x242290(0x168)](0x2)+'%)');try{const _0xf3beb1=await exchange[_0x242290(0x27d)](_0x8ad81e);_0x4d09e4=_0x1bf35f[_0x242290(0x1b7)]?0x1/_0x1bf35f[_0x242290(0x23d)]:_0x1bf35f[_0x242290(0x23d)],_0x315b14=_0xf3beb1[_0x242290(0x2bf)],_0x52a8be=_0xf3beb1[_0x242290(0x2b2)];_0x1bf35f[_0x242290(0x1b7)]?(_0x5deb29=_0x1bf35f[_0x242290(0x235)]==_0x242290(0x1ac)?_0x242290(0x149):'buy',_0x274a38=Math['abs'](_0x1bf35f[_0x242290(0x139)])/_0x4d09e4):(_0x5deb29=_0x1bf35f[_0x242290(0x235)],_0x274a38=Math[_0x242290(0x10e)](_0x1bf35f[_0x242290(0x139)]));_0x21414d==_0x242290(0x189)&&(config['ordertype']=='limit-high'&&(_0x4d09e4=_0x5deb29==_0x242290(0x1ac)?_0x315b14:_0x52a8be),config['ordertype']=='limit-low'&&(_0x4d09e4=_0x5deb29==_0x242290(0x1ac)?_0x52a8be:_0x315b14));_0x274a38=formatResult(_0x274a38,0x8),_0x4d09e4=formatResult(_0x4d09e4,0x8);const _0x1135ed=_0x5deb29==_0x242290(0x149)?config[_0x242290(0x1ee)]?String[_0x242290(0x1af)]('0x'+config['emojisell'])+'\x20':'':config[_0x242290(0x145)]?String[_0x242290(0x1af)]('0x'+config[_0x242290(0x145)])+'\x20':'',_0x59cb5a=_0x21414d==_0x242290(0x166)?'Market':config[_0x242290(0x297)]==_0x242290(0x1ab)?_0x242290(0x25b):'Limit\x20(low-margin)',_0x576268=(Math[_0x242290(0x1e2)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x242290(0x26c)]();lastOrders[_0x242290(0x11c)]({'customId':_0x576268,'symbol':_0x8ad81e,'coin':_0x1bf35f['coin'],'amount':_0x274a38,'price':_0x4d09e4,'side':_0x5deb29,'reverse':_0x1bf35f[_0x242290(0x1b7)],'filled':0x0});if(_0x21414d==_0x242290(0x166))logHistory(_0x242290(0x1df),''+_0x1135ed+_0x59cb5a+'\x20order:\x20'+_0x8ad81e+'\x20'+_0x5deb29+'\x20#'+formatResult(_0x274a38,0x8)+'\x20@'+formatResult(_0x4d09e4,0x8));else logHistory(_0x242290(0x1df),''+_0x1135ed+_0x59cb5a+'\x20order:\x20'+_0x8ad81e+'\x20'+_0x5deb29+'\x20#'+formatResult(_0x274a38,0x8)+'\x20@'+formatResult(_0x4d09e4,0x8));let _0x1e5985;_0x21414d==_0x242290(0x166)?_0x5deb29==_0x242290(0x1ac)&&[_0x242290(0x2ae),'Bitget','Cex',_0x242290(0x28e),'Huobipro'][_0x242290(0x19c)](config[_0x242290(0x261)])?_0x1e5985=await exchange[_0x242290(0x1a9)](_0x8ad81e,_0x21414d,_0x5deb29,_0x274a38,_0x4d09e4):_0x1e5985=await exchange[_0x242290(0x1a9)](_0x8ad81e,_0x21414d,_0x5deb29,_0x274a38,undefined):_0x1e5985=await exchange['createOrder'](_0x8ad81e,_0x21414d,_0x5deb29,_0x274a38,_0x4d09e4);logger['debug']('ID:\x20'+_0x1e5985['id']+_0x242290(0x2ac)+_0x576268);const _0x398889=lastOrders[_0x242290(0x158)]-0x1;if(_0x398889>=0x0&&lastOrders[_0x398889][_0x242290(0x111)]==_0x576268){lastOrders[_0x398889][_0x242290(0x1fd)]=_0x1e5985['id'];if(_0x1e5985[_0x242290(0x11f)])lastOrders[_0x398889]['amount']=_0x1e5985[_0x242290(0x11f)];if(_0x1e5985[_0x242290(0x1e7)])lastOrders[_0x398889][_0x242290(0x1e7)]=_0x1e5985[_0x242290(0x1e7)];lastOrders[_0x398889]['fee']=_0x1e5985[_0x242290(0x159)];}if(config[_0x242290(0x16e)]!=0x0){let _0x275386=null;if(cooldownTracker[_0x242290(0x158)]==config['cooldown']-0x1)_0x275386=cooldownTracker[_0x242290(0x292)]();const _0x1b7922=getTimeStamp();cooldownTracker[_0x242290(0x11c)](_0x1b7922);if(_0x275386){const _0x100406=fns[_0x242290(0x12f)](new Date(_0x1b7922),new Date(_0x275386));if(_0x100406<cooldownInterval){logHistory('error',_0x242290(0x169)+config[_0x242290(0x16e)]+_0x242290(0x286)+cooldownInterval/0x3c+_0x242290(0x197)+cooldownPeriod/(0xe10*0x3e8)+_0x242290(0x22a)),coolingDown=!![];break;}}}}catch(_0x4cfff9){if(_0x4cfff9[_0x242290(0x26c)]()[_0x242290(0x19c)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x242290(0x1a6)](_0x5bcb83=>_0x5bcb83[_0x242290(0x19a)]!=_0x8ad81e),logHistory('error',_0x242290(0x28f)+_0x8ad81e),_0x370ba5=!![];else{if(_0x4cfff9[_0x242290(0x26c)]()[_0x242290(0x19c)](_0x242290(0x1dd)))lastOrders=lastOrders[_0x242290(0x1a6)](_0x5710fa=>_0x5710fa['symbol']!=_0x8ad81e),logHistory(_0x242290(0x152),_0x242290(0x127)+_0x8ad81e),_0x370ba5=!![];else{if(_0x4cfff9[_0x242290(0x26c)]()['includes'](_0x242290(0x268)))lastOrders=lastOrders[_0x242290(0x1a6)](_0x464083=>_0x464083[_0x242290(0x19a)]!=_0x8ad81e),logHistory(_0x242290(0x152),_0x242290(0x122)+_0x8ad81e),logger[_0x242290(0x1b4)](_0x4cfff9),_0x370ba5=!![];else _0x4cfff9[_0x242290(0x26c)]()[_0x242290(0x19c)](_0x242290(0x143))?(lastOrders=lastOrders[_0x242290(0x1a6)](_0x5029bf=>_0x5029bf['symbol']!=_0x8ad81e),logHistory('error',_0x242290(0x28f)+_0x8ad81e),_0x370ba5=!![]):(lastOrders=lastOrders['filter'](_0x4b2405=>_0x4b2405[_0x242290(0x19a)]!=_0x8ad81e),await handleError(_0x4cfff9,_0x242290(0x279),_0x8ad81e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x242290(0x158)]>0x0){const _0x473895=config[_0x242290(0x297)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x24cd88=_0x242290;validateOrders(_0x24cd88(0x2b3));},_0x473895);}else unlockOrders();_0x370ba5&&config[_0x242290(0x13a)]&&(logHistory(_0x242290(0x152),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x242290(0x216),_0x242290(0x21e)));}else{if(coolingDown)!config[_0x242290(0x13a)]&&logHistory(_0x242290(0x152),_0x242290(0x192));else lockOrders!=ORDERS[_0x242290(0x25a)]&&(!config[_0x242290(0x13a)]&&(config[_0x242290(0x297)]==_0x242290(0x166)?logHistory(_0x242290(0x152),_0x242290(0x254)):logHistory(_0x242290(0x152),_0x242290(0x1e1))));}}function persistOpenOrders(_0x251883){const _0x4412f3=_0x3a5120,_0x53a805={...config,'openOrders':_0x251883};let _0x530fdb=dbConfig['get']('bot')[_0x4412f3(0x146)]({'botID':botID})[_0x4412f3(0x18d)]();_0x530fdb&&dbConfig['get'](_0x4412f3(0x1ec))['find']({'botID':botID})[_0x4412f3(0x188)](_0x53a805)[_0x4412f3(0x206)]();}function restoreOrders(){const _0x37adb3=_0x3a5120;let _0x5240cc;config[_0x37adb3(0x135)]&&allOpenOrders[_0x37adb3(0x29e)](_0x12bb7e=>{const _0x1d47e7=_0x37adb3,_0x554f34=config[_0x1d47e7(0x135)][_0x1d47e7(0x146)](_0x4caf68=>_0x4caf68['orderId']==_0x12bb7e['id']);_0x554f34&&(lastOrders[_0x1d47e7(0x11c)](_0x554f34),_0x5240cc=_0x12bb7e[_0x1d47e7(0x133)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x37adb3(0x255)]),validateOrdersState=_0x37adb3(0x176),allOrdersPlaced=!![];const _0x221a59=new Date()['getTime'](),_0x283b71=config['ordertype']==_0x37adb3(0x166)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5240cc+_0x283b71>_0x221a59){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x99c708=_0x37adb3;validateOrders(_0x99c708(0x2b3));},_0x5240cc+_0x283b71-_0x221a59);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x284271=_0x3a5120;if(!coinsLoaded){process['send']({'telegrammsg':_0x284271(0x173)},_0x1254c7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3aa85f='';if(config[_0x284271(0x262)])_0x3aa85f=_0x284271(0x123)+config['botname']+_0x284271(0x119);else _0x3aa85f='<b>Bot\x20'+botID+_0x284271(0x119);const _0x94de7=getKPIs(_0x284271(0x1c2)),_0x3ed1b9=getKPIs(_0x284271(0x196),config[_0x284271(0x196)]),_0x115a07=getKPIs(_0x284271(0x1fe)),_0x72a57e=getKPIs(_0x284271(0x28c),config['fiat']);_0x3aa85f+=_0x284271(0x2a3),_0x3aa85f+=_0x94de7['leftTxt']+_0x284271(0x22f)+_0x94de7[_0x284271(0x18d)]+'\x0a',_0x3aa85f+=_0x94de7[_0x284271(0x22c)]+':\x20'+_0x94de7[_0x284271(0x190)]+'%\x0a',_0x3aa85f+=_0x3ed1b9['leftTxt']+'\x20:\x20'+_0x3ed1b9[_0x284271(0x18d)]+'\x0a',_0x3aa85f+=_0x3ed1b9[_0x284271(0x22c)]+':\x20'+_0x3ed1b9[_0x284271(0x190)]+'%\x0a',_0x3aa85f+=_0x115a07[_0x284271(0x2b0)]+':\x20'+_0x115a07[_0x284271(0x18d)]+'\x20('+config[_0x284271(0x1c2)]+')\x0a',_0x3aa85f+=_0x115a07[_0x284271(0x22c)]+':\x20'+_0x115a07['change']+_0x284271(0x1aa)+config[_0x284271(0x1c2)]+')\x0a',_0x3aa85f+=_0x72a57e[_0x284271(0x2b0)]+':\x20'+_0x72a57e['value']+'\x20('+config[_0x284271(0x196)]+')\x0a',_0x3aa85f+=_0x72a57e[_0x284271(0x22c)]+':\x20'+_0x72a57e[_0x284271(0x190)]+_0x284271(0x1aa)+config[_0x284271(0x196)]+')\x0a',_0x3aa85f+=_0x284271(0x26a),process[_0x284271(0x1bd)]({'telegrammsg':_0x3aa85f},_0x50adfc=>{});}async function sendPortfolioTelegram(){const _0x470ba7=_0x3a5120;if(!coinsLoaded||!currentCoins[0x0][_0x470ba7(0x2a2)]){process['send']({'telegrammsg':_0x470ba7(0x173)},_0x2c470b=>{});return;}let _0x3195dd='';if(config[_0x470ba7(0x262)])_0x3195dd=_0x470ba7(0x123)+config[_0x470ba7(0x160)]+_0x470ba7(0x230);else _0x3195dd='<b>Bot\x20'+botID+_0x470ba7(0x230);_0x3195dd+=_0x470ba7(0x2a3),_0x3195dd+=_0x470ba7(0x114),_0x3195dd+=_0x470ba7(0x120),_0x3195dd+='-------------------------------\x0a',currentCoins[_0x470ba7(0x29e)](_0x1389b2=>{const _0x554f44=_0x470ba7;_0x3195dd+=_0x1389b2['coin'][_0x554f44(0x14a)](0x7)+'|\x20'+formatPad(_0x1389b2[_0x554f44(0x2a2)],0x2,0x6)+'|\x20'+formatPad(_0x1389b2['target'],0x2,0x6)+'|\x20'+formatPad(_0x1389b2['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3195dd+=_0x470ba7(0x26a),process['send']({'telegrammsg':_0x3195dd},_0x559540=>{});}function formatPad(_0x38a9de,_0x318411,_0x137f1c){const _0x4668f4=_0x3a5120,_0x43e89d=formatResultString(_0x38a9de,_0x318411);return _0x43e89d?_0x43e89d['padStart'](_0x137f1c):''[_0x4668f4(0x1a2)](_0x137f1c);}function logHistory(_0x25e4f2,_0x45bbf5,_0x2c7098=''){const _0x3e2f45=_0x3a5120;logger[_0x3e2f45(0x17d)](''+_0x45bbf5);let _0x38d2f6={'time':getTimeStamp(),'type':_0x25e4f2,'event':_0x45bbf5};dbLogs[_0x3e2f45(0x163)]('logs')['push'](_0x38d2f6)[_0x3e2f45(0x206)]();if(_0x2c7098=='')_0x2c7098=_0x45bbf5;proxyEmit('event',{'log':_0x38d2f6,'summary':_0x2c7098}),process[_0x3e2f45(0x1bd)]({'telegram':{..._0x38d2f6,'botname':config[_0x3e2f45(0x160)],'showname':config[_0x3e2f45(0x262)]}},_0x3e2d23=>{});}function emitHistory(_0x1142da={}){const _0x59c0f7=_0x3a5120;Object['keys'](_0x1142da)[_0x59c0f7(0x158)]==0x0&&(_0x1142da={'type':['order',_0x59c0f7(0x278)],'event':'','page':0x1});if(_0x1142da[_0x59c0f7(0x19e)]['includes']('event'))_0x1142da[_0x59c0f7(0x19e)][_0x59c0f7(0x134)](_0x1142da[_0x59c0f7(0x19e)][_0x59c0f7(0x249)](_0x59c0f7(0x278)),0x1,_0x59c0f7(0x152),_0x59c0f7(0x220),_0x59c0f7(0x216));if(dbLogs[_0x59c0f7(0x1b3)]('logs')['value']()){let _0x38b4b8=dbLogs[_0x59c0f7(0x163)](_0x59c0f7(0x116))[_0x59c0f7(0x1a6)](_0xd58e6c=>{const _0x2b7368=_0x59c0f7;if(_0x1142da[_0x2b7368(0x19e)][_0x2b7368(0x158)]==0x0)return![];else return _0x1142da[_0x2b7368(0x19e)][_0x2b7368(0x19c)](_0xd58e6c['type']);})[_0x59c0f7(0x1a6)](_0x11e057=>{const _0x258d68=_0x59c0f7;if(_0x1142da[_0x258d68(0x278)]=='')return!![];else return _0x11e057[_0x258d68(0x278)][_0x258d68(0x1f0)]()['includes'](_0x1142da['event'][_0x258d68(0x1f0)]());})[_0x59c0f7(0x1f1)](_0x59c0f7(0x16f)),_0x3ef746=_0x38b4b8['value']()[_0x59c0f7(0x158)];_0x38b4b8=_0x38b4b8['reverse']()[_0x59c0f7(0x14e)]((_0x1142da[_0x59c0f7(0x29f)]-0x1)*logPageSize,_0x1142da[_0x59c0f7(0x29f)]*logPageSize-0x1)['reverse']()[_0x59c0f7(0x18d)](),proxyEmit(_0x59c0f7(0x247),{'logs':_0x38b4b8,'total':_0x3ef746});}else proxyEmit(_0x59c0f7(0x247),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3aecd4){const _0x4e81fd=_0x3a5120;if(dbLogs[_0x4e81fd(0x1b3)]('logs')[_0x4e81fd(0x18d)]()){const _0x114775=dbLogs[_0x4e81fd(0x163)](_0x4e81fd(0x116))[_0x4e81fd(0x1f1)](_0x4e81fd(0x16f))['filter'](_0x391a30=>{const _0x325bbf=_0x4e81fd;return _0x391a30[_0x325bbf(0x19e)]=='order';})[_0x4e81fd(0x18d)]();dbLogs['get'](_0x4e81fd(0x116))['remove']()[_0x4e81fd(0x206)](),dbLogs['get'](_0x4e81fd(0x116))[_0x4e81fd(0x188)](_0x114775)['write'](),emitHistory(_0x3aecd4);}}async function pauseBot(_0x4588a0=pauseBotIntervalShort,_0x40e340,_0x115768,_0x5d8842=![]){const _0x85a6ac=_0x3a5120,_0x4a23d9=new Date()[_0x85a6ac(0x291)]();if(!lastErrorShown||_0x4a23d9-lastErrorShown>=_0x4588a0){lastErrorShown=_0x4a23d9;if(!lastBotPause)lastBotPause=_0x4a23d9,consecutivePauses=0x1;else{if(_0x4a23d9-lastBotPause-_0x4588a0<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5d8842){logHistory(_0x85a6ac(0x152),_0x40e340+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x85a6ac(0x152),_0x40e340+pauseBotMsg),_0x4588a0=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4a23d9;}_0x115768?logger[_0x85a6ac(0x1b4)]('('+consecutivePauses+')\x20'+_0x40e340+_0x85a6ac(0x204),_0x115768):logger[_0x85a6ac(0x1b4)]('('+consecutivePauses+')\x20'+_0x40e340);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4588a0),botPaused=![],_0x4588a0==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x39aaf6=_0x3a5120;botPaused=!![],await sleep(0x3e8),process[_0x39aaf6(0x1bd)]({'stop':_0x39aaf6(0x1ba)},_0x2b3e37=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3ec669,_0x495a04){const _0x3539ab=_0x3a5120;if(botPaused)return;const _0x158b29=config['exchange']||_0x3539ab(0x2a1);if(_0x495a04)logger[_0x3539ab(0x1b4)](_0x3539ab(0x1cb)+_0x495a04);const _0x1d57f8=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x3ec669['toString']()['includes'](_0x3539ab(0x24f)))logHistory(_0x3539ab(0x152),_0x158b29+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1d57f8();else{if(_0x3ec669[_0x3539ab(0x26c)]()[_0x3539ab(0x19c)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3539ab(0x152),_0x158b29+_0x3539ab(0x10d)),_0x1d57f8();else{if(_0x3ec669['toString']()[_0x3539ab(0x19c)](_0x3539ab(0x1b2)))config['apiPassword']?errormsg=_0x158b29+_0x3539ab(0x231):errormsg=_0x158b29+_0x3539ab(0x141),logHistory(_0x3539ab(0x152),errormsg+_0x3539ab(0x280)),_0x1d57f8();else _0x3ec669['toString']()[_0x3539ab(0x19c)](_0x3539ab(0x29c))?(logHistory(_0x3539ab(0x152),_0x158b29+_0x3539ab(0x2a4)),_0x1d57f8()):await handleError(_0x3ec669,null);}}}function _0x38f0(_0x4a67b3,_0xc3cf6a){const _0x4c6830=_0x1abf();return _0x38f0=function(_0x5ddd7a,_0x328b1f){_0x5ddd7a=_0x5ddd7a-0x10b;let _0x1abff2=_0x4c6830[_0x5ddd7a];return _0x1abff2;},_0x38f0(_0x4a67b3,_0xc3cf6a);}async function handleError(_0x3763a7,_0x67b20c,_0x1d174c=''){const _0x514145=_0x3a5120;if(botPaused)return;let _0x72fcaa;const _0x1bae00=config[_0x514145(0x261)]||'Exchange';if(_0x67b20c)logger[_0x514145(0x1b4)](_0x514145(0x1cb)+_0x67b20c);if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)]('DDoSProtection'))_0x72fcaa=_0x1bae00+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x72fcaa,_0x3763a7);else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)]('RateLimitExceeded'))_0x72fcaa=_0x1bae00+_0x514145(0x198),await pauseBot(undefined,_0x72fcaa,_0x3763a7);else{if(_0x3763a7[_0x514145(0x26c)]()['includes'](_0x514145(0x1d7))||_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x23b)))_0x72fcaa=_0x1bae00+_0x514145(0x18a),await pauseBot(undefined,_0x72fcaa,_0x3763a7[_0x514145(0x26c)]());else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x2bd)))_0x72fcaa=_0x1bae00+_0x514145(0x1d6),await pauseBot(undefined,_0x72fcaa,_0x3763a7['toString']());else{if(_0x3763a7['toString']()[_0x514145(0x19c)](_0x514145(0x1c5)))_0x72fcaa=_0x1bae00+_0x514145(0x225),await pauseBot(undefined,_0x72fcaa,_0x3763a7[_0x514145(0x26c)]());else{if(_0x3763a7[_0x514145(0x26c)]()['toLowerCase']()[_0x514145(0x19c)]('timestamp')||_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x1f0)]()[_0x514145(0x19c)](_0x514145(0x2c0)))_0x72fcaa=_0x514145(0x185),await pauseBot(undefined,_0x72fcaa,_0x3763a7[_0x514145(0x26c)]());else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x1a5)))_0x72fcaa=_0x1bae00+_0x514145(0x221),await pauseBot(undefined,_0x72fcaa,_0x3763a7['toString']());else{if(_0x3763a7 instanceof ccxt['NetworkError'])_0x72fcaa=_0x1bae00+_0x514145(0x1c0)+_0x3763a7[_0x514145(0x26c)](),logger[_0x514145(0x1b4)](_0x514145(0x2ba),_0x3763a7),await pauseBot(undefined,_0x72fcaa,_0x3763a7);else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x24f)))logHistory(_0x514145(0x152),_0x1bae00+_0x514145(0x118)),logHistory(_0x514145(0x152),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3763a7['toString']()[_0x514145(0x19c)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x1bae00+_0x514145(0x248)),logHistory(_0x514145(0x152),_0x514145(0x1dc)),await killBot();else{if(_0x3763a7[_0x514145(0x26c)]()['includes']('AuthenticationError')&&_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x210)))_0x72fcaa=_0x1bae00+_0x514145(0x218),await pauseBot(undefined,_0x72fcaa,_0x3763a7,!![]);else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x1b2)))config[_0x514145(0x24e)]?_0x72fcaa=_0x1bae00+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x72fcaa=_0x1bae00+_0x514145(0x141),logHistory('error',_0x72fcaa),logHistory('error',_0x514145(0x1dc)),await killBot();else{if(_0x3763a7['toString']()[_0x514145(0x19c)]('PermissionDenied'))logHistory(_0x514145(0x152),_0x1bae00+_0x514145(0x187)),logHistory('error',_0x514145(0x1dc)),await killBot();else{if(_0x3763a7[_0x514145(0x26c)]()[_0x514145(0x19c)](_0x514145(0x238)))logHistory(_0x514145(0x152),_0x514145(0x154)+_0x1d174c),logger[_0x514145(0x1b4)](_0x514145(0x2a7),_0x3763a7);else{if(_0x3763a7 instanceof ccxt['ExchangeError']){_0x72fcaa=_0x1bae00+'\x20exchange\x20error:\x20'+_0x3763a7[_0x514145(0x26c)](),logHistory(_0x514145(0x152),_0x72fcaa),logger[_0x514145(0x1b4)]('Exchange\x20error\x20details:',_0x3763a7);if(_0x1d174c)logger[_0x514145(0x1b4)](_0x514145(0x17c)+_0x1d174c);await pauseBot(undefined,_0x72fcaa,_0x3763a7);}else{_0x72fcaa='Unknown\x20error:\x20'+_0x3763a7[_0x514145(0x26c)](),logHistory('error',_0x72fcaa),logger[_0x514145(0x1b4)](_0x72fcaa+_0x514145(0x204),_0x3763a7);if(_0x1d174c)logger['debug']('Symbol(s):\x20'+_0x1d174c);await pauseBot(undefined,_0x72fcaa);}}}}}}}}}}}}}}}}function decryptRSA(_0xc369db,_0x4cf15){const _0x407dbc=_0x3a5120,_0x51b27b=forge[_0x407dbc(0x175)][_0x407dbc(0x245)](_0xc369db),_0x485f84=_0x51b27b['decrypt'](forge['util'][_0x407dbc(0x1e3)](_0x4cf15),'RSA-OAEP',{'md':forge['md'][_0x407dbc(0x236)][_0x407dbc(0x1f9)](),'mgf1':{'md':forge['md'][_0x407dbc(0x236)][_0x407dbc(0x1f9)]()}});return _0x485f84;}async function withRetry(_0x4f289d,_0x36f2a4){const _0x69c6d2=_0x3a5120;let _0x36d915=![],_0x6edfc5=0x0,_0x1de612,_0x529ea1;while(_0x6edfc5<maxRetries){try{_0x1de612=await _0x36f2a4();break;}catch(_0x444c0a){_0x529ea1=_0x444c0a,!_0x36d915?(_0x36d915=!![],logger[_0x69c6d2(0x1b4)](_0x69c6d2(0x15e)+_0x4f289d+':',_0x444c0a[_0x69c6d2(0x26c)]())):await sleep(retryInterval);}_0x6edfc5++;}if(_0x6edfc5==0x0)return _0x1de612;if(_0x6edfc5>=maxRetries)throw _0x529ea1;else return logger[_0x69c6d2(0x1b4)](_0x69c6d2(0x2ab)+_0x6edfc5+'\x20attempts'),_0x1de612;}function formatResult(_0x574184,_0x184dfb){return parseFloat(_0x574184['toFixed'](_0x184dfb));}function formatResultTruncate(_0x49302b,_0x331b9c){const _0x2b08cd=_0x3a5120;let _0x3bfe5c=formatResultString(_0x49302b,0xa),_0x40f984=_0x3bfe5c[_0x2b08cd(0x249)]('.');return _0x40f984!=-0x1&&(_0x3bfe5c=_0x3bfe5c[_0x2b08cd(0x14e)](0x0,_0x40f984+_0x331b9c+0x1)),Number(_0x3bfe5c);}function formatResultString(_0x57a457,_0x6f1b33){const _0x98a021=_0x3a5120;let _0x4e1b3b;if(!(''+_0x57a457)['includes']('e'))_0x4e1b3b=+(Math[_0x98a021(0x263)](_0x57a457+'e+'+_0x6f1b33)+'e-'+_0x6f1b33);else{let _0x2ec8ae=(''+_0x57a457)[_0x98a021(0x16a)]('e'),_0xb4ee43='';+_0x2ec8ae[0x1]+_0x6f1b33>0x0&&(_0xb4ee43='+'),_0x4e1b3b=+(Math[_0x98a021(0x263)](+_0x2ec8ae[0x0]+'e'+_0xb4ee43+(+_0x2ec8ae[0x1]+_0x6f1b33))+'e-'+_0x6f1b33);}return Number(_0x4e1b3b)[_0x98a021(0x168)](_0x6f1b33);}function getServerTime(){const _0x2d89a5=_0x3a5120,_0x35606a=new Date();return _0x35606a[_0x2d89a5(0x144)]()+'/'+(_0x35606a[_0x2d89a5(0x285)]()+0x1)['toString']()[_0x2d89a5(0x1a2)](0x2,'0')+'/'+_0x35606a[_0x2d89a5(0x19b)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x35606a['getHours']()[_0x2d89a5(0x26c)]()[_0x2d89a5(0x1a2)](0x2,'0')+':'+_0x35606a[_0x2d89a5(0x23a)]()['toString']()[_0x2d89a5(0x1a2)](0x2,'0')+':'+_0x35606a[_0x2d89a5(0x15b)]()[_0x2d89a5(0x26c)]()[_0x2d89a5(0x1a2)](0x2,'0');}function getTimeStamp(){const _0x48ef2d=_0x3a5120,_0x1dc877=shiftedTime();return _0x1dc877[_0x48ef2d(0x144)]()+'/'+(_0x1dc877[_0x48ef2d(0x285)]()+0x1)[_0x48ef2d(0x26c)]()[_0x48ef2d(0x1a2)](0x2,'0')+'/'+_0x1dc877['getDate']()[_0x48ef2d(0x26c)]()[_0x48ef2d(0x1a2)](0x2,'0')+'\x20'+_0x1dc877[_0x48ef2d(0x18e)]()[_0x48ef2d(0x26c)]()[_0x48ef2d(0x1a2)](0x2,'0')+':'+_0x1dc877[_0x48ef2d(0x23a)]()[_0x48ef2d(0x26c)]()[_0x48ef2d(0x1a2)](0x2,'0')+':'+_0x1dc877['getSeconds']()['toString']()[_0x48ef2d(0x1a2)](0x2,'0');}function getDate(){const _0x3e5110=_0x3a5120,_0xdb6860=shiftedTime();return _0xdb6860[_0x3e5110(0x144)]()+'/'+(_0xdb6860['getMonth']()+0x1)['toString']()[_0x3e5110(0x1a2)](0x2,'0')+'/'+_0xdb6860[_0x3e5110(0x19b)]()[_0x3e5110(0x26c)]()[_0x3e5110(0x1a2)](0x2,'0');}function getHour(){const _0xa0b340=_0x3a5120,_0x2cc89c=shiftedTime();return _0x2cc89c['getHours']()['toString']()[_0xa0b340(0x1a2)](0x2,'0');}function sleep(_0xa4a240){return new Promise(_0xed7f14=>setTimeout(_0xed7f14,_0xa4a240));}function shiftedTime(){const _0x369cff=_0x3a5120,_0x107f2d=new Date();let _0x54e203=_0x107f2d;if(config&&config[_0x369cff(0x1b6)]!==0x0)_0x54e203=fns['add'](_0x107f2d,{'hours':config[_0x369cff(0x1b6)]});return _0x54e203;}function timer(_0x2f0424){const _0x32fb27=_0x3a5120,_0x28b8fb=new Date();!lasttime?console['log'](getTimeStamp()+_0x32fb27(0x213),_0x2f0424,_0x28b8fb):console['log'](getTimeStamp()+_0x32fb27(0x213),_0x2f0424,(_0x28b8fb-lasttime)/0x3e8),lasttime=_0x28b8fb;}