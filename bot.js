const _0x52fb81=_0x2e35;function _0x2e35(_0x2ee2f9,_0x38a069){const _0x5911e1=_0x401a();return _0x2e35=function(_0x405c97,_0x3f9ee4){_0x405c97=_0x405c97-0x1b5;let _0x401a49=_0x5911e1[_0x405c97];return _0x401a49;},_0x2e35(_0x2ee2f9,_0x38a069);}(function(_0x4942ee,_0x36ccde){const _0x44bad4=_0x2e35,_0x25567d=_0x4942ee();while(!![]){try{const _0x242f02=-parseInt(_0x44bad4(0x278))/0x1+-parseInt(_0x44bad4(0x2e2))/0x2+parseInt(_0x44bad4(0x257))/0x3*(parseInt(_0x44bad4(0x29f))/0x4)+parseInt(_0x44bad4(0x2d9))/0x5+parseInt(_0x44bad4(0x24e))/0x6+parseInt(_0x44bad4(0x32c))/0x7*(parseInt(_0x44bad4(0x23f))/0x8)+-parseInt(_0x44bad4(0x34b))/0x9*(parseInt(_0x44bad4(0x2a1))/0xa);if(_0x242f02===_0x36ccde)break;else _0x25567d['push'](_0x25567d['shift']());}catch(_0x227319){_0x25567d['push'](_0x25567d['shift']());}}}(_0x401a,0x4cf9b));const _0x3f9ee4=function(){let _0x45ceda=!![];return function(_0x11ed13,_0x4da4fe){const _0x7f4ea9=_0x45ceda?function(){const _0x223e35=_0x2e35;if(_0x4da4fe){const _0x5b0bd7=_0x4da4fe[_0x223e35(0x28f)](_0x11ed13,arguments);return _0x4da4fe=null,_0x5b0bd7;}}:function(){};return _0x45ceda=![],_0x7f4ea9;};}(),_0x405c97=_0x3f9ee4(this,function(){const _0x506d68=_0x2e35;return _0x405c97[_0x506d68(0x307)]()[_0x506d68(0x212)](_0x506d68(0x1fb))['toString']()[_0x506d68(0x219)](_0x405c97)[_0x506d68(0x212)](_0x506d68(0x1fb));});_0x405c97();'use strict';const ccxt=require(_0x52fb81(0x2ff)),low=require(_0x52fb81(0x280)),FileSync=require(_0x52fb81(0x1c0)),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x52fb81(0x327)],util=require(_0x52fb81(0x2c6)),argv=require('yargs/yargs')(process[_0x52fb81(0x28c)]['slice'](0x2))[_0x52fb81(0x28c)],path=require(_0x52fb81(0x1f1));let exchange;global[_0x52fb81(0x318)]={},global[_0x52fb81(0x31b)]={};const usdBasecoins=['USD',_0x52fb81(0x2f6),_0x52fb81(0x281),_0x52fb81(0x2a0),_0x52fb81(0x2ca),_0x52fb81(0x308)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x52fb81(0x22f))[_0x52fb81(0x33f)],botID=process[_0x52fb81(0x28c)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x52fb81(0x25b)](botID)&&(console[_0x52fb81(0x203)](_0x52fb81(0x231)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x52fb81(0x28c)][0x3]||'',configpath=userID?_0x52fb81(0x216)+userID+'/':_0x52fb81(0x216),logspath=userID?_0x52fb81(0x328)+userID+'/':_0x52fb81(0x328),loggerfile=fs[_0x52fb81(0x1cc)](logspath+_0x52fb81(0x325),{'flags':'a'});!fs[_0x52fb81(0x277)](configpath)&&fs[_0x52fb81(0x25f)](configpath);!fs[_0x52fb81(0x277)](logspath)&&fs[_0x52fb81(0x25f)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x52fb81(0x296)+botID+_0x52fb81(0x30c),performancefile=configpath+_0x52fb81(0x296)+botID+_0x52fb81(0x345),coinresultsfile=configpath+_0x52fb81(0x296)+botID+'-results.json',settingsfile=configpath+_0x52fb81(0x276),securefile=configpath+_0x52fb81(0x226),configbackuppath=configpath+_0x52fb81(0x28e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x52fb81(0x246)]({'logs':[],'version':serverversion})[_0x52fb81(0x2ce)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x52fb81(0x246)]({'data':[],'version':serverversion})[_0x52fb81(0x2ce)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x52fb81(0x2ce)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x52fb81(0x246)]({'coins':[],'version':serverversion})[_0x52fb81(0x2ce)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x52fb81(0x334),'rsaStandard':_0x52fb81(0x2f2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1cb882=>{const _0x10a312=_0x52fb81;console[_0x10a312(0x203)](_0x1cb882);},'simple':_0x5eae93=>{const _0x22e8ad=_0x52fb81;console[_0x22e8ad(0x203)](_0x5eae93),loggerfile[_0x22e8ad(0x2ce)](util[_0x22e8ad(0x222)](_0x5eae93)+'\x0a');},'full':async(_0x3acd47,_0x3f4785='')=>{const _0x10fa04=_0x52fb81;let _0x52b806;if(config[_0x10fa04(0x2b3)])_0x52b806=getTimeStamp()+':\x20'+config[_0x10fa04(0x2b9)]+_0x10fa04(0x317)+_0x3acd47;else _0x52b806=getTimeStamp()+_0x10fa04(0x29a)+botID+_0x10fa04(0x317)+_0x3acd47;console[_0x10fa04(0x203)](_0x52b806),loggerfile[_0x10fa04(0x2ce)](util['format'](_0x52b806)+'\x0a'),_0x3f4785&&(console[_0x10fa04(0x203)](_0x3f4785),loggerfile['write'](util[_0x10fa04(0x222)](_0x3f4785)+'\x0a'));},'debug':async(_0x5af18c,_0x4f4c45='')=>{const _0x1d3faa=_0x52fb81;let _0xac32a9;if(config['showname'])_0xac32a9=getTimeStamp()+':\x20'+config[_0x1d3faa(0x2b9)]+_0x1d3faa(0x2c1)+_0x5af18c;else _0xac32a9=getTimeStamp()+_0x1d3faa(0x29a)+botID+_0x1d3faa(0x2c1)+_0x5af18c;if(debugging)console['log'](_0xac32a9);loggerfile[_0x1d3faa(0x2ce)](util['format'](_0xac32a9)+'\x0a');if(_0x4f4c45){if(debugging)console[_0x1d3faa(0x203)](_0x4f4c45);loggerfile[_0x1d3faa(0x2ce)](util['format'](_0x4f4c45)+'\x0a');}}};process['on'](_0x52fb81(0x202),function(_0x1302a9){const _0x458790=_0x52fb81;handleError(_0x1302a9,_0x458790(0x202));});settings[_0x52fb81(0x264)]!=config['timeshift']&&updateTimeshift(settings[_0x52fb81(0x264)]);settings[_0x52fb81(0x30d)]!=config['onepagemode']&&updateOnepagemode(settings[_0x52fb81(0x30d)]);process[_0x52fb81(0x28a)]({'started':_0x52fb81(0x2db)},_0x1f97f6=>{}),initializeProcessListeners();function proxyEmit(_0x3879c0,_0x954c49=null){const _0x4cea83=_0x52fb81;process[_0x4cea83(0x28a)]({'function':_0x3879c0,'args':_0x954c49},_0x4e76f6=>{});}function initializeProcessListeners(){const _0x53ce56=_0x52fb81;process['on'](_0x53ce56(0x2e5),_0x5d93f2=>{const _0x2a81e7=_0x53ce56;switch(Object[_0x2a81e7(0x244)](_0x5d93f2)[0x0]){case _0x2a81e7(0x264):_0x5d93f2['timeshift']!=undefined&&(settings[_0x2a81e7(0x264)]=_0x5d93f2['timeshift'],updateTimeshift(settings[_0x2a81e7(0x264)]));break;case'onepagemode':_0x5d93f2['onepagemode']!=undefined&&(settings[_0x2a81e7(0x30d)]=_0x5d93f2[_0x2a81e7(0x30d)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x5d93f2[_0x2a81e7(0x27c)]!=undefined&&(bots=JSON[_0x2a81e7(0x2a4)](_0x5d93f2[_0x2a81e7(0x27c)]),proxyEmit('bots',bots));break;case _0x2a81e7(0x32a):switch(_0x5d93f2[_0x2a81e7(0x32a)]){case _0x2a81e7(0x1c8):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x2a81e7(0x2af):emitHistory(_0x5d93f2['args']);break;case _0x2a81e7(0x2fb):deleteHistoryAlerts(_0x5d93f2[_0x2a81e7(0x26d)]);break;case _0x2a81e7(0x223):getPortfolio(_0x5d93f2[_0x2a81e7(0x26d)]);break;case _0x2a81e7(0x2be):storeConfiguration(_0x5d93f2[_0x2a81e7(0x26d)]);break;case'storeHeadless':storeHeadless(_0x5d93f2[_0x2a81e7(0x26d)]);break;case _0x2a81e7(0x2d4):storeFiat(_0x5d93f2[_0x2a81e7(0x26d)]);break;case'resetHistory':resetHistory();break;case _0x2a81e7(0x252):getStartingBalances(getNormalizedPerformance());break;case _0x2a81e7(0x1c9):placeOrder(_0x5d93f2[_0x2a81e7(0x26d)]);break;case _0x2a81e7(0x2b1):cancelLoading();break;case _0x2a81e7(0x1e7):showConfig();break;case _0x2a81e7(0x31d):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x46ec02=![]){const _0x2ad391=_0x52fb81;logger[_0x2ad391(0x249)](_0x2ad391(0x2e0)+(_0x46ec02?_0x2ad391(0x29e):_0x2ad391(0x344))+_0x2ad391(0x335)+config[_0x2ad391(0x1dd)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x46ec02)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2ad391(0x294)]!=''&&config['apiKey']!=_0x2ad391(0x312)){loadingProgress=0x0;if(_0x46ec02){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2384ac){handleErrorNoStop(_0x2384ac,_0x2ad391(0x2ed));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x59cc50=await getCoins();[currentCoins,currentCoinsAll]=_0x59cc50,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2ad391(0x249)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2ad391(0x33c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x370036=_0x52fb81;exchangeStopped=!![];try{await exchange[_0x370036(0x2c3)]();}catch(_0x4cfc88){await handleError(_0x4cfc88,_0x370036(0x1e6));}}async function reloadExchange(){const _0x12df35=_0x52fb81;while(lockOrders!=ORDERS[_0x12df35(0x290)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x12df35(0x249)](_0x12df35(0x2b2)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x15b3dc=config[_0x52fb81(0x1dd)],_0x33679e=config[_0x52fb81(0x294)],_0x5ef986=config[_0x52fb81(0x1ff)],_0x12e54e=config[_0x52fb81(0x260)]){const _0x1cd56e=_0x52fb81;exchange&&await stopExchange();!supportedExchanges()[_0x1cd56e(0x240)](_0x15b3dc)&&(logHistory(_0x1cd56e(0x2d1),_0x1cd56e(0x27d)+_0x15b3dc+_0x1cd56e(0x1b8)),killBot());const _0x20d186=ccxt[_0x1cd56e(0x24a)][_0x15b3dc[_0x1cd56e(0x33b)]()];exchange=new _0x20d186({'apiKey':_0x33679e,'secret':_0x5ef986,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x12e54e)exchange[_0x1cd56e(0x2bf)]=_0x12e54e;}function setStableCoins(){const _0x4b8096=_0x52fb81;let _0x454e76=config[_0x4b8096(0x1ce)]=='ETH'?_0x4b8096(0x221):config['basecoin']==_0x4b8096(0x1e8)?_0x4b8096(0x1e8):_0x4b8096(0x24d),_0x302a6d=!allSymbols[_0x4b8096(0x240)](_0x454e76+_0x4b8096(0x32e))?_0x4b8096(0x2a0):_0x4b8096(0x1cd),_0x4f965e=!allSymbols['includes'](_0x454e76+_0x4b8096(0x2da))?_0x302a6d:_0x4b8096(0x27f);stablecoins={'eur':{'coin':''+_0x454e76+_0x4f965e,'symbol':_0x454e76+'/'+_0x4f965e},'usd':{'coin':''+_0x454e76+_0x302a6d,'symbol':_0x454e76+'/'+_0x302a6d}};}async function initwsCcxt(){const _0x59e05b=_0x52fb81;initCycle++;const _0x3dcacc=initCycle;let _0xfcc6bb=[];config[_0x59e05b(0x22d)][_0x59e05b(0x228)](_0x55aa48=>{const _0x54d9ab=_0x59e05b;if(!_0x55aa48[_0x54d9ab(0x32b)]&&_0x55aa48[_0x54d9ab(0x211)]!=config[_0x54d9ab(0x1ce)])_0xfcc6bb['push'](_0x55aa48['symbol']);});if(!_0xfcc6bb[_0x59e05b(0x240)](stablecoins[_0x59e05b(0x1f3)][_0x59e05b(0x207)]))_0xfcc6bb[_0x59e05b(0x25d)](stablecoins['eur'][_0x59e05b(0x207)]);if(!_0xfcc6bb['includes'](stablecoins[_0x59e05b(0x2e9)][_0x59e05b(0x207)]))_0xfcc6bb['push'](stablecoins[_0x59e05b(0x2e9)]['symbol']);if(config[_0x59e05b(0x1dd)][_0x59e05b(0x239)](_0x59e05b(0x2b0))&&config[_0x59e05b(0x1ce)]!=_0x59e05b(0x1e8)){if(!_0xfcc6bb[_0x59e05b(0x240)](_0x59e05b(0x2cc)+config[_0x59e05b(0x1ce)]))_0xfcc6bb[_0x59e05b(0x25d)]('BNB/'+config[_0x59e05b(0x1ce)]);}loadCoins(_0xfcc6bb),_0xfcc6bb=validateSymbols(_0xfcc6bb);const _0x3b80ec=async _0x479393=>{const _0x548d33=_0x59e05b;let _0x410dfd;try{const _0x2ef29f=await getTickers(_0x479393);Object['entries'](_0x2ef29f)[_0x548d33(0x228)](_0x3ea9aa=>{const _0x2489a4=_0x548d33;_0x410dfd=_0x3ea9aa[0x1][_0x2489a4(0x207)],global[_0x2489a4(0x318)][noslash(_0x410dfd)]=_0x3ea9aa[0x1][_0x2489a4(0x1bc)],global[_0x2489a4(0x31b)][_0x410dfd]=_0x3ea9aa[0x1][_0x2489a4(0x323)];});}catch(_0x51036f){await handleError(_0x51036f,'initTickers()',_0x410dfd);}},_0x49485f=async _0x18cb41=>{const _0x53ef9d=_0x59e05b;while(initCycle==_0x3dcacc){if(!botPaused)try{const _0x234b33=await exchange['watchTrades'](_0x18cb41);global[_0x53ef9d(0x318)][noslash(_0x234b33[0x0]['symbol'])]=_0x234b33[0x0]['price'],await sleep(0x3e8);}catch(_0x4963f0){if(!exchangeStopped)await handleError(_0x4963f0,'watchTrades()',_0x18cb41);}else await sleep(0x64);}},_0x3ebf4e=async _0x10f32a=>{const _0x33f859=_0x59e05b;while(initCycle==_0x3dcacc){if(!botPaused){let _0x469ec6;try{await sleep(0x3c*0x3e8);const _0x249872=await getTickers(_0x10f32a);Object[_0x33f859(0x274)](_0x249872)[_0x33f859(0x228)](_0x536586=>{const _0x417e31=_0x33f859;_0x469ec6=_0x536586[0x1]['symbol'],global[_0x417e31(0x31b)][_0x469ec6]=_0x536586[0x1][_0x417e31(0x323)];});}catch(_0x1ea948){if(!exchangeStopped)await handleError(_0x1ea948,_0x33f859(0x2e4),_0x469ec6);}}else await sleep(0x64);}},_0x58f4ea=async _0x16b456=>{const _0x2b45f4=_0x59e05b;while(initCycle==_0x3dcacc){if(!botPaused)try{const _0x5eb090=await exchange[_0x2b45f4(0x267)](_0x16b456);initCycle==_0x3dcacc&&_0x5eb090['forEach'](_0x2c5c0c=>{updateNumberCoinsCcxt(_0x2c5c0c);});}catch(_0x4e7be1){if(!exchangeStopped)await handleError(_0x4e7be1,_0x2b45f4(0x263));}else await sleep(0x64);}};_0x3b80ec(_0xfcc6bb),_0x3ebf4e(_0xfcc6bb),_0xfcc6bb[_0x59e05b(0x228)](_0x5f4260=>{_0x49485f(_0x5f4260),_0x58f4ea(_0x5f4260);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x219eed){const _0x2ce7cd=_0x52fb81;let _0x247bd3={};try{if(config['exchange']!=_0x2ce7cd(0x337))_0x247bd3=await exchange[_0x2ce7cd(0x224)](_0x219eed);else for(const _0x4c3c09 of _0x219eed){const _0x15b749=await exchange[_0x2ce7cd(0x2a6)](_0x4c3c09);_0x247bd3[_0x4c3c09]=_0x15b749;}return _0x247bd3;}catch(_0x30105c){throw _0x30105c;}}async function watchTransactions(){const _0x48a72d=_0x52fb81;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4278a8=await getCoins(),[_0x3884a7,_0x2f646a]=_0x4278a8;let _0x36c5e0=[];currentCoins[_0x48a72d(0x228)](_0x55e68f=>{const _0x4999c5=_0x48a72d,_0x2db6f1=_0x3884a7['find'](_0x1a63f7=>_0x1a63f7[_0x4999c5(0x211)]==_0x55e68f[_0x4999c5(0x211)]);if(_0x2db6f1){if(_0x55e68f[_0x4999c5(0x261)]!=_0x2db6f1['number']){let _0x5b5c9b;if(_0x55e68f[_0x4999c5(0x211)]!=config[_0x4999c5(0x1ce)]){const _0x3647a0=global[_0x4999c5(0x318)][noslash(_0x55e68f['symbol'])];_0x5b5c9b=_0x55e68f[_0x4999c5(0x1d4)]?0x1/_0x3647a0:_0x3647a0;}else _0x5b5c9b=0x1;_0x36c5e0[_0x4999c5(0x25d)]({'coin':_0x55e68f[_0x4999c5(0x211)],'symbol':_0x55e68f[_0x4999c5(0x207)],'price':_0x5b5c9b,'number':Number(formatResult(_0x2db6f1[_0x4999c5(0x261)]-_0x55e68f['number'],0x8)),'basecoinvalue':_0x5b5c9b*(_0x2db6f1[_0x4999c5(0x261)]-_0x55e68f['number'])});}}});if(_0x36c5e0['length']==0x1&&!blockTransactionDetection){if(config[_0x48a72d(0x2a2)]){logger[_0x48a72d(0x249)](_0x48a72d(0x27a)+_0x36c5e0[0x0]['basecoinvalue']+_0x48a72d(0x1b5)+lastFees[_0x48a72d(0x2a9)]);if(lastFees[_0x48a72d(0x2a9)]==0x0||Math[_0x48a72d(0x2b6)](_0x36c5e0[0x0][_0x48a72d(0x273)])>lastFees['highest']){delete _0x36c5e0[0x0][_0x48a72d(0x207)],delete _0x36c5e0[0x0][_0x48a72d(0x273)];let _0x517e97=[],_0x49acff=[...config[_0x48a72d(0x1e3)]]||[],_0x26526d=config[_0x48a72d(0x1e3)];_0x49acff[_0x48a72d(0x1e1)]((_0xbc55e6,_0x7ef528)=>_0xbc55e6[_0x48a72d(0x1fa)]>_0x7ef528[_0x48a72d(0x1fa)]?-0x1:_0x7ef528['date']>_0xbc55e6[_0x48a72d(0x1fa)]?0x1:0x0);const _0x266ebf=getDate();if(_0x49acff[0x0]){const _0x16a076=fns[_0x48a72d(0x2a4)](_0x49acff[0x0][_0x48a72d(0x1fa)],_0x48a72d(0x248),new Date()),_0x55936a=fns[_0x48a72d(0x2a4)](_0x266ebf,_0x48a72d(0x248),new Date());if(fns[_0x48a72d(0x2c7)](_0x16a076,_0x55936a)){_0x517e97=_0x49acff[0x0][_0x48a72d(0x342)];const _0x4b1309=_0x517e97[_0x48a72d(0x1f8)](_0x2abdd8=>_0x2abdd8[_0x48a72d(0x211)]==_0x36c5e0[0x0]['coin']);_0x4b1309?(_0x4b1309[_0x48a72d(0x261)]+=_0x36c5e0[0x0][_0x48a72d(0x261)],_0x4b1309['number']==0x0&&(_0x517e97=_0x517e97[_0x48a72d(0x20f)](_0x1a7cb6=>{const _0x448464=_0x48a72d;return _0x1a7cb6[_0x448464(0x211)]!=_0x36c5e0[0x0][_0x448464(0x211)];}))):_0x517e97['push'](_0x36c5e0[0x0]);const _0x3a3cd0=_0x26526d[_0x48a72d(0x1f8)](_0x5ecfa2=>_0x5ecfa2[_0x48a72d(0x1fa)]==_0x266ebf);_0x3a3cd0[_0x48a72d(0x342)]=_0x517e97;}else _0x26526d[_0x48a72d(0x25d)]({'date':_0x266ebf,'changes':[_0x36c5e0[0x0]]});}const _0x243588=_0x26526d['find'](_0x2497bc=>_0x2497bc[_0x48a72d(0x1fa)]==_0x266ebf);if(_0x243588){let _0x822fbf=!![];_0x243588['changes']['forEach'](_0x3f5db0=>{if(_0x3f5db0['number']!=0x0)_0x822fbf=![];}),_0x822fbf&&(_0x26526d=_0x26526d[_0x48a72d(0x20f)](_0x4033ab=>{const _0x1d609c=_0x48a72d;return _0x4033ab[_0x1d609c(0x1fa)]!=_0x266ebf;}));}let _0x4a57f3=dbConfig['get'](_0x48a72d(0x26a))['find']({'botID':botID})[_0x48a72d(0x206)]();_0x4a57f3&&(dbConfig[_0x48a72d(0x2fd)]('bot')[_0x48a72d(0x1f8)]({'botID':botID})['assign']({'liquidity':_0x26526d})[_0x48a72d(0x2ce)](),config['liquidity']=_0x26526d),logHistory(_0x48a72d(0x275),_0x48a72d(0x23a)+Math[_0x48a72d(0x2b6)](_0x36c5e0[0x0][_0x48a72d(0x261)])+'\x20'+_0x36c5e0[0x0][_0x48a72d(0x211)]+'\x20'+(_0x36c5e0[0x0][_0x48a72d(0x261)]>0x0?_0x48a72d(0x245):_0x48a72d(0x314))+_0x48a72d(0x237)),proxyEmit(_0x48a72d(0x2d3),emittedConfiguration());}else logger[_0x48a72d(0x249)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x36c5e0[0x0][_0x48a72d(0x261)])+'\x20'+_0x36c5e0[0x0][_0x48a72d(0x211)]+'\x20'+(_0x36c5e0[0x0][_0x48a72d(0x261)]>0x0?_0x48a72d(0x245):_0x48a72d(0x314)));transactionDetected=!![];}else logger[_0x48a72d(0x249)](_0x48a72d(0x23a)+Math['abs'](_0x36c5e0[0x0][_0x48a72d(0x261)])+'\x20'+_0x36c5e0[0x0][_0x48a72d(0x211)]+'\x20'+(_0x36c5e0[0x0][_0x48a72d(0x261)]>0x0?_0x48a72d(0x245):_0x48a72d(0x314))+_0x48a72d(0x33a));}currentCoins=_0x3884a7,currentCoinsAll=_0x2f646a,await sleep(watchTransactionsInterval);}catch(_0x1272eb){if(!exchangeStopped)await handleError(_0x1272eb,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x5c8905=_0x52fb81;try{markets=await exchange[_0x5c8905(0x271)](),allSymbols=[],Object[_0x5c8905(0x274)](markets)[_0x5c8905(0x228)](_0x58ab5a=>{const _0x41673d=_0x5c8905;_0x58ab5a[0x1]['active']&&_0x58ab5a[0x1]['spot']&&allSymbols[_0x41673d(0x25d)](_0x58ab5a[0x0]);});}catch(_0x8d2484){throw _0x8d2484;}}function validateSymbols(_0x1503a8){let _0x5110e4=[];return _0x1503a8['forEach'](_0x2595c8=>{const _0x15c065=_0x2e35;!allSymbols[_0x15c065(0x240)](_0x2595c8)?logHistory(_0x15c065(0x2d1),'Invalid\x20symbol:\x20'+_0x2595c8+_0x15c065(0x1c2)):_0x5110e4['push'](_0x2595c8);}),_0x5110e4;}async function initclient(){const _0x1852d7=_0x52fb81;proxyEmit(_0x1852d7(0x2d3),emittedConfiguration()),proxyEmit(_0x1852d7(0x2d0),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1852d7(0x1ec),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x538482=getNormalizedPerformance();emitPerformance(_0x538482),getStartingBalances(_0x538482);}async function toggleBotMode(){const _0x3c7c02=_0x52fb81;let _0x556f45=dbConfig[_0x3c7c02(0x2fd)](_0x3c7c02(0x26a))['find']({'botID':botID})[_0x3c7c02(0x206)]();if(_0x556f45){const _0x1dce14=!_0x556f45['headless'];dbConfig['get']('bot')[_0x3c7c02(0x1f8)]({'botID':botID})[_0x3c7c02(0x332)]({'headless':_0x1dce14})[_0x3c7c02(0x2ce)](),config[_0x3c7c02(0x292)]=_0x1dce14,proxyEmit(_0x3c7c02(0x2d3),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x38729a=_0x52fb81;process[_0x38729a(0x28a)]({'updatebotmanager':!![]},_0x38f6f7=>{}),logger['debug'](_0x38729a(0x338)+config[_0x38729a(0x292)]);}async function loadCoins(_0x23c633){const _0x16a695=_0x52fb81;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x23d21d,_0x4010f1=0x0,_0x313a94=0x0;_0x23c633[_0x16a695(0x228)](_0x1789a4=>{const _0x298f07=_0x16a695;loading[_0x298f07(0x28b)]['push'](_0x1789a4);}),loadingCanceled=![];let _0x365d85=![];while(_0x23d21d!=_0x23c633[_0x16a695(0x33c)]+maxLoadingProgress){_0x23d21d=loadingProgress,_0x23c633[_0x16a695(0x228)](_0x153b89=>{const _0x477b64=_0x16a695;if(global[_0x477b64(0x318)][noslash(_0x153b89)]){loading['remainingSymbols']=loading[_0x477b64(0x28b)]['filter'](_0x27fca9=>_0x27fca9!=_0x153b89);if(!watchedSymbols[_0x477b64(0x240)](_0x153b89))watchedSymbols[_0x477b64(0x25d)](_0x153b89);_0x23d21d++;}}),loading['progress']=Math[_0x16a695(0x309)](_0x23d21d/(_0x23c633[_0x16a695(0x33c)]+maxLoadingProgress)*0x64);loading[_0x16a695(0x2b7)]!=0x64&&(_0x313a94>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x313a94>0x78*0x5&&!_0x365d85&&(_0x365d85=!![],logHistory(_0x16a695(0x2d1),_0x16a695(0x305)+loading[_0x16a695(0x28b)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x16a695(0x2d1),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x16a695(0x2e6)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x2e6b20=_0x16a695;process[_0x2e6b20(0x28a)]({'stop':_0x2e6b20(0x2a3)},_0x7e0dfb=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4010f1!=loading[_0x16a695(0x2b7)]&&(_0x4010f1=loading[_0x16a695(0x2b7)],emitLoadingProgress()),_0x313a94++,await sleep(0xc8);}_0x23d21d==_0x23c633['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x16a695(0x28a)]({'status':_0x16a695(0x316),'live':_0x16a695(0x2db)},_0x28c67b=>{}),_0x365d85&&logHistory(_0x16a695(0x275),_0x16a695(0x1b7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x38dbff=_0x52fb81;proxyEmit(_0x38dbff(0x2d3),{...emittedConfiguration(),'configstate':_0x38dbff(0x2ab)});}function emitLoadingProgress(){const _0x485851=_0x52fb81;proxyEmit(_0x485851(0x259),loading);}async function getFiat(){const _0x3b6637=_0x52fb81;let _0x47021c=global[_0x3b6637(0x318)][stablecoins[_0x3b6637(0x1f3)][_0x3b6637(0x211)]],_0x2ca335=global[_0x3b6637(0x318)][stablecoins[_0x3b6637(0x2e9)][_0x3b6637(0x211)]];return{'eur':Number(_0x47021c),'usd':Number(_0x2ca335)};}function capitalize(_0x68ddeb){const _0x463776=_0x52fb81;return _0x68ddeb[_0x463776(0x2cf)](0x0,0x1)['toUpperCase']()+_0x68ddeb['substring'](0x1);}function supportedExchanges(){const _0x5bcf95=_0x52fb81,_0x2e9617=['ws',_0x5bcf95(0x224),_0x5bcf95(0x2a6),_0x5bcf95(0x24c),_0x5bcf95(0x267),_0x5bcf95(0x250),_0x5bcf95(0x2bc),_0x5bcf95(0x2d2),_0x5bcf95(0x1e4),_0x5bcf95(0x2c9)];let _0x5cd02d=[],_0x425280=[],_0xdf1652=ccxt[_0x5bcf95(0x24a)][_0x5bcf95(0x2d0)];_0xdf1652[_0x5bcf95(0x228)](_0x4192e5=>{const _0x33744e=_0x5bcf95;try{const _0x5c1e0b=new ccxt[(_0x33744e(0x24a))][_0x4192e5]();_0x425280['push'](_0x5c1e0b);}catch(_0x452eaa){}}),_0x425280[_0x5bcf95(0x228)](_0x349160=>{const _0x1f6478=_0x5bcf95;let _0x3728e9=0x0;_0x2e9617[_0x1f6478(0x228)](_0x2bdbef=>{const _0x25fa3f=_0x1f6478;_0x2bdbef in _0x349160[_0x25fa3f(0x2e1)]&&_0x349160[_0x25fa3f(0x2e1)][_0x2bdbef]&&_0x3728e9++;}),_0x3728e9==_0x2e9617['length']&&_0x5cd02d[_0x1f6478(0x25d)](capitalize(_0x349160['id']));});let _0x2360a6=[];return _0xdf1652[_0x5bcf95(0x228)](_0x2f1a9c=>{const _0xe1735f=_0x5bcf95;_0x2f1a9c=capitalize(_0x2f1a9c);if(!_0x5cd02d['includes'](_0x2f1a9c))_0x2360a6[_0xe1735f(0x25d)](_0x2f1a9c);}),_0x5cd02d;}function setStartDatePerformance(){const _0x3786e8=_0x52fb81;if(config&&config[_0x3786e8(0x1e3)][0x0]['changes'][_0x3786e8(0x33c)]!=0x0){const _0xa8b7ee=config[_0x3786e8(0x1e3)][0x0][_0x3786e8(0x342)];dbPerformance['get']('data')[_0x3786e8(0x1f8)]({'date':config['startdate']})[_0x3786e8(0x332)]({'coins':_0xa8b7ee})[_0x3786e8(0x2ce)]();}}async function recreateCoinResults(){const _0x5eeddb=_0x52fb81;let _0x179146,_0xda2b0b=[];try{const _0x40fe19=fns[_0x5eeddb(0x222)](fns[_0x5eeddb(0x21c)](config[_0x5eeddb(0x1c5)][_0x5eeddb(0x22a)](/\//g,'-')),_0x5eeddb(0x24b));for(const _0x31e397 of currentCoins){if(_0x31e397['coin']!=config[_0x5eeddb(0x1ce)]){let _0x14f120=0x0,_0x102518,_0x3fd8b2;_0x179146=await getAllEventOrders(_0x31e397[_0x5eeddb(0x207)]);if(_0x179146[_0x5eeddb(0x33c)]>0x0)_0x179146[_0x5eeddb(0x228)](_0x61fe90=>{const _0x3c16ff=_0x5eeddb,_0x2cd116=_0x31e397[_0x3c16ff(0x207)][_0x3c16ff(0x240)](config['basecoin']+'/');_0xda2b0b['push']({'datetime':_0x61fe90[_0x3c16ff(0x23e)],'coin':_0x31e397[_0x3c16ff(0x211)],'symbol':_0x31e397[_0x3c16ff(0x207)],'side':_0x61fe90[_0x3c16ff(0x285)],'reverse':_0x2cd116,'amount':formatResult(_0x61fe90[_0x3c16ff(0x205)],0x8),'filled':formatResult(_0x61fe90['filled'],0x8),'price':formatResult(_0x61fe90[_0x3c16ff(0x30b)],0x8)}),_0x14f120=_0x61fe90['side']==_0x3c16ff(0x304)?_0x14f120+_0x61fe90[_0x3c16ff(0x205)]:_0x14f120-_0x61fe90['filled'];if(!_0x3fd8b2)_0x3fd8b2=_0x61fe90[_0x3c16ff(0x30b)];});_0x102518=_0x31e397[_0x5eeddb(0x261)]-_0x14f120;let _0x1dea9f;config[_0x5eeddb(0x1e3)][_0x5eeddb(0x228)](_0x18daa9=>{const _0x148098=_0x5eeddb;!_0x1dea9f&&(_0x1dea9f=_0x18daa9[_0x148098(0x342)][_0x148098(0x1f8)](_0x33905f=>_0x33905f[_0x148098(0x211)]==_0x31e397[_0x148098(0x211)]),_0x1dea9f&&(_0x102518=_0x1dea9f['number'],_0x3fd8b2=_0x1dea9f[_0x148098(0x30b)]));});let _0x285b62=dbCoinResults[_0x5eeddb(0x2fd)](_0x5eeddb(0x32d))[_0x5eeddb(0x1f8)]({'coin':_0x31e397[_0x5eeddb(0x211)]})[_0x5eeddb(0x206)]();_0x285b62={'coin':_0x31e397['coin'],'number':_0x102518,'breakeven':_0x3fd8b2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5eeddb(0x2fd)]('coins')[_0x5eeddb(0x1f8)]({'coin':_0x31e397[_0x5eeddb(0x211)]})[_0x5eeddb(0x332)](_0x285b62)[_0x5eeddb(0x2ce)]();}}_0xda2b0b[_0x5eeddb(0x1e1)]((_0x2c277d,_0x278ad9)=>_0x2c277d['datetime']>_0x278ad9[_0x5eeddb(0x23e)]?0x1:_0x278ad9['datetime']>_0x2c277d[_0x5eeddb(0x23e)]?-0x1:0x0);let _0x10f029=0x0;for(let _0x5ebe94 of _0xda2b0b){await updateCoinResults(_0x5ebe94,!![]);}}catch(_0x3fcdc7){await handleError(_0x3fcdc7,_0x5eeddb(0x1d1));}}async function getAllEventOrders(_0x4e8732){const _0x1d7d92=_0x52fb81;let _0x1117d4=[],_0x50c25b=dbLogs[_0x1d7d92(0x2fd)](_0x1d7d92(0x220))[_0x1d7d92(0x20f)](_0x54e561=>{const _0x505089=_0x1d7d92,_0x14ba3a=_0x54e561[_0x505089(0x1c3)][_0x505089(0x33b)]();return _0x14ba3a[_0x505089(0x240)](_0x4e8732[_0x505089(0x33b)]())&&(_0x14ba3a[_0x505089(0x240)](_0x505089(0x1ef))&&_0x14ba3a['includes']('order')||_0x14ba3a['includes'](_0x505089(0x205))&&_0x14ba3a[_0x505089(0x240)](_0x505089(0x1d9)));})[_0x1d7d92(0x27b)](_0x1d7d92(0x24f))[_0x1d7d92(0x206)]();return _0x50c25b[_0x1d7d92(0x228)](_0xa45c65=>{const _0x20de45=_0x1d7d92,_0x3718b=_0xa45c65['event'][_0x20de45(0x240)](_0x20de45(0x2e7))?'sell':'buy',_0x14e58e=/#([0-9]|\.)+\s/i,_0x5ceac8=Number(_0x14e58e[_0x20de45(0x348)](_0xa45c65[_0x20de45(0x1c3)])[0x0][_0x20de45(0x286)](0x1)),_0x50663f=/@([0-9]|\.)+$/i,_0x3c002e=Number(_0x50663f[_0x20de45(0x348)](_0xa45c65['event'])[0x0]['slice'](0x1));_0x1117d4[_0x20de45(0x25d)]({'datetime':_0xa45c65[_0x20de45(0x24f)],'coin':symbolToCoin(_0x4e8732),'symbol':_0x4e8732,'side':_0x3718b,'amount':_0x5ceac8,'filled':_0x5ceac8,'price':_0x3c002e});}),_0x1117d4;}async function getAllOrders(_0x405fa0,_0x15f160){const _0x2da69c=_0x52fb81;let _0x302b57=[];while(_0x15f160<exchange[_0x2da69c(0x20a)]()){const _0x27c27a=0x1f4;try{const _0x4f0778=await exchange[_0x2da69c(0x1e4)](_0x405fa0,_0x15f160,_0x27c27a);if(_0x4f0778[_0x2da69c(0x33c)])_0x15f160=_0x4f0778[_0x4f0778[_0x2da69c(0x33c)]-0x1][_0x2da69c(0x29c)]+0x1,_0x302b57=_0x302b57[_0x2da69c(0x2ec)](_0x4f0778);else break;}catch(_0x50a5fe){await handleError(_0x50a5fe,_0x2da69c(0x1f4),_0x405fa0);}}return _0x302b57;}async function validate24hChanges(){const _0x333a7b=_0x52fb81;for(const _0x71ec9a of currentCoins){if(_0x71ec9a[_0x333a7b(0x211)]!=config[_0x333a7b(0x1ce)]){let _0x5dac00;_0x71ec9a[_0x333a7b(0x1d4)]?_0x5dac00=formatResult((0x1/(global['change'][noslash(_0x71ec9a[_0x333a7b(0x207)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5dac00=global['change'][noslash(_0x71ec9a[_0x333a7b(0x207)])],_0x5dac00<config[_0x333a7b(0x213)]&&(logHistory(_0x333a7b(0x2d1),_0x71ec9a['coin']+_0x333a7b(0x2a8)+_0x5dac00+'%'),logHistory(_0x333a7b(0x2d1),_0x333a7b(0x2df)),logHistory(_0x333a7b(0x2d1),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5d48a9,_0x31d822){const _0x5b28ab=_0x52fb81;if(!_0x5d48a9)return!![];const _0x4b013d=_0x31d822[_0x5b28ab(0x210)]('.'),_0x2dd543=_0x5d48a9['split']('.');for(var _0x4f6365=0x0;_0x4f6365<_0x2dd543[_0x5b28ab(0x33c)];_0x4f6365++){const _0x3897fb=~~_0x2dd543[_0x4f6365],_0x3651d7=~~_0x4b013d[_0x4f6365];if(_0x3897fb<_0x3651d7)return!![];if(_0x3897fb>_0x3651d7)return![];}return![];}async function oneTimeMigration(){const _0x2877fe=_0x52fb81;let _0x46575f=dbLogs[_0x2877fe(0x2fd)](_0x2877fe(0x33f))[_0x2877fe(0x206)]();if(isOlderVersion(_0x46575f,_0x2877fe(0x21d))){let _0x3306c7=[];const _0x4086d3=dbLogs['get'](_0x2877fe(0x220))[_0x2877fe(0x206)]();_0x4086d3[_0x2877fe(0x228)](_0x1ff49a=>{const _0x5a6dca=_0x2877fe;_0x3306c7[_0x5a6dca(0x25d)]({'time':_0x1ff49a[_0x5a6dca(0x24f)],'type':_0x1ff49a['type'],'event':_0x1ff49a['event']});}),dbLogs[_0x2877fe(0x2fd)](_0x2877fe(0x220))[_0x2877fe(0x332)](_0x3306c7)[_0x2877fe(0x2ce)]();}let _0x553b6c=dbConfig[_0x2877fe(0x2fd)](_0x2877fe(0x33f))['value']();if(isOlderVersion(_0x553b6c,_0x2877fe(0x21d))){let _0x189b72=dbConfig['get'](_0x2877fe(0x26a))['find']({'botID':botID})[_0x2877fe(0x206)]();if(_0x189b72){let _0x281685=[];_0x189b72[_0x2877fe(0x22d)]['forEach'](_0x2d6183=>{const _0xf1af33=_0x2877fe;_0x281685[_0xf1af33(0x25d)]({'coin':_0x2d6183[_0xf1af33(0x211)],'number':_0x2d6183[_0xf1af33(0x329)],'price':_0x2d6183[_0xf1af33(0x254)]}),delete _0x2d6183[_0xf1af33(0x329)],delete _0x2d6183[_0xf1af33(0x254)];});if(_0x281685[_0x2877fe(0x33c)]!==0x0)fs['writeFile'](configbackuppath+(_0x2877fe(0x1b6)+botID+_0x2877fe(0x288)),JSON[_0x2877fe(0x321)](_0x281685,null,0x4),function(_0xb39470){if(_0xb39470){}});const _0x21fa03=(_0x4d1fef,_0x2ac077)=>{const _0x257d09=_0x2877fe;let _0x159ed6=[];_0x2ac077[_0x257d09(0x228)](_0x2be94b=>{const _0x87251d=_0x257d09,_0x5efa56=_0x4d1fef[_0x87251d(0x1f8)](_0x5ca8c4=>_0x5ca8c4[_0x87251d(0x211)]==_0x2be94b[_0x87251d(0x211)]);if(!_0x5efa56)_0x159ed6[_0x87251d(0x25d)](_0x2be94b);});let _0x5f4595=[];return _0x4d1fef[_0x257d09(0x228)](_0x36342a=>{const _0x149828=_0x257d09,_0x1e8ce0=_0x2ac077['find'](_0x3dd495=>_0x3dd495[_0x149828(0x211)]==_0x36342a[_0x149828(0x211)]);if(!_0x1e8ce0||_0x1e8ce0[_0x149828(0x261)]==0x0&&_0x36342a[_0x149828(0x261)]!=0x0)_0x5f4595['push'](_0x36342a);}),{'missingDay1':_0x159ed6,'notInDay2':_0x5f4595};},_0x379969=dbPerformance[_0x2877fe(0x2fd)](_0x2877fe(0x1db))[_0x2877fe(0x23d)]()[_0x2877fe(0x206)]();if(_0x379969[_0x2877fe(0x33c)]>0x1){const {missingDay1:_0x3dbd8a,notInDay2:_0x41ed56}=_0x21fa03(_0x281685,_0x379969[0x1][_0x2877fe(0x32d)]);_0x281685=[..._0x281685,..._0x3dbd8a],_0x41ed56[_0x2877fe(0x228)](_0x40e25d=>{const _0x220082=_0x2877fe;let _0x9df489=_0x281685[_0x220082(0x2f3)](_0x3e1b1e=>_0x3e1b1e[_0x220082(0x211)]==_0x40e25d[_0x220082(0x211)]);_0x9df489!=-0x1&&_0x281685[_0x220082(0x1fc)](_0x9df489,0x1);});}_0x281685[_0x2877fe(0x1e1)]((_0x21c27d,_0x11461f)=>_0x21c27d['coin']>_0x11461f[_0x2877fe(0x211)]?0x1:_0x11461f['coin']>_0x21c27d[_0x2877fe(0x211)]?-0x1:0x0);let _0x47a649=[{'date':_0x189b72[_0x2877fe(0x1c5)],'changes':_0x281685}];_0x379969[_0x2877fe(0x33c)]>0x2&&_0x379969[_0x2877fe(0x228)]((_0x25a7b2,_0x3acbcf)=>{const _0x30c6b7=_0x2877fe;if(_0x3acbcf>0x0&&_0x3acbcf<_0x379969[_0x30c6b7(0x33c)]-0x1){const {missingDay1:_0x5cc0e5,notInDay2:_0x3ba8a9}=_0x21fa03(_0x379969[_0x3acbcf][_0x30c6b7(0x32d)],_0x379969[_0x3acbcf+0x1]['coins']);_0x281685=[],(_0x5cc0e5['length']!=0x0||_0x3ba8a9[_0x30c6b7(0x33c)]!=0x0)&&(_0x5cc0e5[_0x30c6b7(0x33c)]!=0x0&&_0x281685[_0x30c6b7(0x25d)](..._0x5cc0e5),_0x3ba8a9['length']!=0x0&&(_0x3ba8a9[_0x30c6b7(0x228)](_0x5a1c2f=>{const _0x2c7350=_0x30c6b7;_0x5a1c2f[_0x2c7350(0x261)]=-_0x5a1c2f['number'];}),_0x281685[_0x30c6b7(0x25d)](..._0x3ba8a9)),_0x281685[_0x30c6b7(0x1e1)]((_0x20abf1,_0x1240d2)=>_0x20abf1[_0x30c6b7(0x211)]>_0x1240d2[_0x30c6b7(0x211)]?0x1:_0x1240d2[_0x30c6b7(0x211)]>_0x20abf1[_0x30c6b7(0x211)]?-0x1:0x0),_0x47a649['push']({'date':_0x379969[_0x3acbcf+0x1][_0x30c6b7(0x1fa)],'changes':_0x281685}));}}),dbConfig[_0x2877fe(0x2fd)](_0x2877fe(0x26a))[_0x2877fe(0x1f8)]({'botID':botID})[_0x2877fe(0x332)]({..._0x189b72,'liquidity':_0x47a649})[_0x2877fe(0x2ce)]();}}if(isOlderVersion(_0x553b6c,_0x2877fe(0x298))){let _0x4e43c4=dbConfig['get'](_0x2877fe(0x26a))['find']({'botID':botID})[_0x2877fe(0x206)]();if(_0x4e43c4){const _0x1afa3b=_0x4e43c4['exchange'],_0x5e139d=_0x1afa3b?capitalize(_0x1afa3b):'Binance';dbConfig['get']('bot')['find']({'botID':botID})[_0x2877fe(0x332)]({'exchange':_0x5e139d})['write']();}}let _0xab0cdb=dbPerformance[_0x2877fe(0x2fd)]('version')[_0x2877fe(0x206)]();isOlderVersion(_0xab0cdb,_0x2877fe(0x21d))&&setStartDatePerformance();let _0x1eeb16=dbCoinResults['get'](_0x2877fe(0x33f))[_0x2877fe(0x206)]();if(isOlderVersion(_0x1eeb16,'2.5.0')){let _0x1e75e4=dbCoinResults[_0x2877fe(0x2fd)](_0x2877fe(0x32d))[_0x2877fe(0x206)]();if(_0x1e75e4[_0x2877fe(0x33c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2726ef=_0x52fb81;dbConfig['set'](_0x2726ef(0x33f),serverversion)[_0x2726ef(0x2ce)](),dbPerformance['set']('version',serverversion)[_0x2726ef(0x2ce)](),dbLogs[_0x2726ef(0x258)]('version',serverversion)['write'](),dbCoinResults[_0x2726ef(0x258)](_0x2726ef(0x33f),serverversion)[_0x2726ef(0x2ce)]();}function getConfiguration(_0x484bab){const _0x185b88=_0x52fb81;let _0x5bf83e=dbConfig['get'](_0x185b88(0x26a))[_0x185b88(0x1f8)]({'botID':_0x484bab})['value']();if(_0x5bf83e){let _0x4f7daa=![];typeof _0x5bf83e['threshold']==_0x185b88(0x22c)&&(_0x5bf83e={..._0x5bf83e,'threshold':Number(_0x5bf83e[_0x185b88(0x26f)])},_0x4f7daa=!![]),_0x5bf83e['change24h']==undefined&&(_0x5bf83e={..._0x5bf83e,'change24h':-0x14},_0x4f7daa=!![]),_0x5bf83e['fiat']==undefined&&(_0x5bf83e={..._0x5bf83e,'fiat':_0x185b88(0x1cd)},_0x4f7daa=!![]),_0x5bf83e['onepagemode']==undefined&&(_0x5bf83e={..._0x5bf83e,'onepagemode':settings[_0x185b88(0x30d)]},_0x4f7daa=!![]),_0x5bf83e[_0x185b88(0x330)]==undefined&&(_0x5bf83e={..._0x5bf83e,'colorscheme':_0x185b88(0x1df)},_0x4f7daa=!![]),_0x5bf83e[_0x185b88(0x2a2)]==undefined&&(_0x5bf83e={..._0x5bf83e,'autoliquidity':!![]},_0x4f7daa=!![]),_0x4f7daa&&(_0x5bf83e={'botID':_0x5bf83e['botID'],'exchange':_0x5bf83e[_0x185b88(0x1dd)],'apiKey':_0x5bf83e['apiKey'],'apiSecret':_0x5bf83e[_0x185b88(0x1ff)],'apiPassword':_0x5bf83e[_0x185b88(0x260)],'basecoin':_0x5bf83e[_0x185b88(0x1ce)],'botname':_0x5bf83e['botname'],'showname':_0x5bf83e[_0x185b88(0x2b3)],'threshold':_0x5bf83e[_0x185b88(0x26f)],'ordertype':_0x5bf83e[_0x185b88(0x2eb)],'timeout':_0x5bf83e[_0x185b88(0x217)],'fiat':_0x5bf83e[_0x185b88(0x215)],'startdate':_0x5bf83e[_0x185b88(0x1c5)],'recreate':_0x5bf83e[_0x185b88(0x1d2)],'timeshift':_0x5bf83e['timeshift'],'onepagemode':_0x5bf83e['onepagemode'],'headless':_0x5bf83e[_0x185b88(0x292)],'cooldown':_0x5bf83e[_0x185b88(0x301)],'change24h':_0x5bf83e[_0x185b88(0x213)],'emojibuy':_0x5bf83e['emojibuy'],'emojisell':_0x5bf83e['emojisell'],'colorscheme':_0x5bf83e[_0x185b88(0x330)],'portfolio':_0x5bf83e[_0x185b88(0x22d)],'autoliquidity':_0x5bf83e[_0x185b88(0x2a2)],'liquidity':_0x5bf83e[_0x185b88(0x1e3)],'openOrders':_0x5bf83e[_0x185b88(0x324)]},dbConfig[_0x185b88(0x2fd)](_0x185b88(0x26a))[_0x185b88(0x341)]()['write'](),dbConfig[_0x185b88(0x2fd)](_0x185b88(0x26a))[_0x185b88(0x25d)](_0x5bf83e)[_0x185b88(0x2ce)]());}else _0x5bf83e={'botID':_0x484bab,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x185b88(0x204)+_0x484bab,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x185b88(0x1cd),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x185b88(0x264)],'onepagemode':settings[_0x185b88(0x30d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5bf83e;}function emittedConfiguration(){const _0x19c573=_0x52fb81;let _0x12005e;if(config[_0x19c573(0x294)]=='')_0x12005e={...config,'configstate':_0x19c573(0x26e)};else config[_0x19c573(0x294)]==_0x19c573(0x312)?_0x12005e={...config,'configstate':_0x19c573(0x283)}:(_0x12005e={...config,'apiKey':_0x19c573(0x234),'apiSecret':_0x19c573(0x234)},config[_0x19c573(0x260)]&&(_0x12005e['apiPassword']=_0x19c573(0x234)));return _0x12005e;}function getSettings(){const _0x259f2b=_0x52fb81;return dbSettings[_0x259f2b(0x2fd)](_0x259f2b(0x20e))[_0x259f2b(0x206)]();}function getSecure(){const _0x220818=_0x52fb81;return dbSecure[_0x220818(0x2fd)]('secure')['value']()||{};}function updateTimeshift(_0x1402cf){const _0x2b3570=_0x52fb81;let _0x1866fb=dbConfig[_0x2b3570(0x2fd)](_0x2b3570(0x26a))['find']({'botID':botID})[_0x2b3570(0x206)]();_0x1866fb&&dbConfig[_0x2b3570(0x2fd)](_0x2b3570(0x26a))[_0x2b3570(0x1f8)]({'botID':botID})[_0x2b3570(0x332)]({'timeshift':_0x1402cf})[_0x2b3570(0x2ce)](),config[_0x2b3570(0x264)]=_0x1402cf,proxyEmit(_0x2b3570(0x2d3),emittedConfiguration());}function updateOnepagemode(_0x548107){const _0x162bc8=_0x52fb81;let _0x431057=dbConfig[_0x162bc8(0x2fd)](_0x162bc8(0x26a))[_0x162bc8(0x1f8)]({'botID':botID})[_0x162bc8(0x206)]();_0x431057&&dbConfig[_0x162bc8(0x2fd)]('bot')['find']({'botID':botID})[_0x162bc8(0x332)]({'onepagemode':_0x548107})['write'](),config[_0x162bc8(0x30d)]=_0x548107,proxyEmit(_0x162bc8(0x2d3),emittedConfiguration());}async function storeConfiguration(_0x2596bb){const _0xbd6edb=_0x52fb81;logger[_0xbd6edb(0x249)](_0xbd6edb(0x1cf));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x5c2395=![],_0x38b7af=![],_0x40a9f8=[];_0x2596bb['portfolio'][_0xbd6edb(0x228)](_0x79a3b3=>{const _0x568937=_0xbd6edb;if(!_0x79a3b3[_0x568937(0x32b)]&&_0x79a3b3[_0x568937(0x211)]!=_0x2596bb[_0x568937(0x1ce)])_0x40a9f8['push'](_0x79a3b3[_0x568937(0x207)]);}),_0x40a9f8[_0xbd6edb(0x228)](_0x1e07ff=>{const _0x2c8762=_0xbd6edb,_0x366f49=currentCoins[_0x2c8762(0x1f8)](_0x35f2cf=>_0x35f2cf[_0x2c8762(0x207)]==_0x1e07ff);!_0x366f49&&(_0x5c2395=!![]);}),currentCoins[_0xbd6edb(0x228)](_0x345c09=>{const _0x4082a1=_0xbd6edb;if(_0x345c09[_0x4082a1(0x211)]!=config[_0x4082a1(0x1ce)]){const _0x30efab=_0x40a9f8[_0x4082a1(0x1f8)](_0x2c5d60=>_0x2c5d60==_0x345c09[_0x4082a1(0x207)]);!_0x30efab&&(_0x5c2395=!![]);}}),_0x2596bb[_0xbd6edb(0x22d)][_0xbd6edb(0x228)](_0x417c41=>{const _0x2e7547=_0xbd6edb,_0x1e2e3c=config['portfolio'][_0x2e7547(0x1f8)](_0x3aeecf=>_0x3aeecf[_0x2e7547(0x211)]==_0x417c41[_0x2e7547(0x211)]);if(_0x1e2e3c&&_0x417c41[_0x2e7547(0x2f7)]!=_0x1e2e3c[_0x2e7547(0x2f7)])_0x38b7af=!![];});let _0x432d4c=dbConfig[_0xbd6edb(0x2fd)]('bot')[_0xbd6edb(0x1f8)]({'botID':botID})[_0xbd6edb(0x206)]();_0x2596bb={..._0x2596bb,'apiKey':crypt[_0xbd6edb(0x2c2)](secure[_0xbd6edb(0x2ae)],_0x2596bb[_0xbd6edb(0x294)])[_0xbd6edb(0x2e5)],'apiSecret':crypt[_0xbd6edb(0x2c2)](secure[_0xbd6edb(0x2ae)],_0x2596bb[_0xbd6edb(0x1ff)])[_0xbd6edb(0x2e5)]};_0x2596bb[_0xbd6edb(0x260)]&&(_0x2596bb[_0xbd6edb(0x260)]=crypt[_0xbd6edb(0x2c2)](secure[_0xbd6edb(0x2ae)],_0x2596bb[_0xbd6edb(0x260)])[_0xbd6edb(0x2e5)]);let _0x5b5f5b=![];if(_0x432d4c){_0x2596bb['apiKey']==_0xbd6edb(0x234)?_0x2596bb[_0xbd6edb(0x294)]=config[_0xbd6edb(0x294)]:_0x5b5f5b=!![];_0x2596bb[_0xbd6edb(0x1ff)]==_0xbd6edb(0x234)?_0x2596bb[_0xbd6edb(0x1ff)]=config[_0xbd6edb(0x1ff)]:_0x5b5f5b=!![];if(_0x2596bb['apiPassword']==_0xbd6edb(0x234))_0x2596bb[_0xbd6edb(0x260)]=config[_0xbd6edb(0x260)];else{if(_0x2596bb[_0xbd6edb(0x260)])_0x5b5f5b=!![];}dbConfig['get'](_0xbd6edb(0x26a))[_0xbd6edb(0x1f8)]({'botID':botID})[_0xbd6edb(0x332)](_0x2596bb)[_0xbd6edb(0x2ce)]();}else dbConfig[_0xbd6edb(0x2fd)](_0xbd6edb(0x26a))['push'](_0x2596bb)[_0xbd6edb(0x2ce)](),_0x5b5f5b=!![],process[_0xbd6edb(0x28a)]({'status':_0xbd6edb(0x316),'live':_0xbd6edb(0x2db)},_0x244364=>{});process[_0xbd6edb(0x28a)]({'botname':_0x2596bb['botname']},_0x489c9e=>{}),config={..._0x2596bb},updateBotManager(),proxyEmit(_0xbd6edb(0x209)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5b5f5b)await reset(!![]);else _0x5c2395||_0x38b7af?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0xbd6edb(0x249)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x156411){const _0x4c0834=_0x52fb81,_0x18c1ab={...config,'headless':_0x156411['headless']};let _0x3a253b=dbConfig[_0x4c0834(0x2fd)](_0x4c0834(0x26a))['find']({'botID':botID})[_0x4c0834(0x206)]();_0x3a253b&&dbConfig['get'](_0x4c0834(0x26a))[_0x4c0834(0x1f8)]({'botID':botID})[_0x4c0834(0x332)](_0x18c1ab)['write'](),config={..._0x18c1ab},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5d2d92){const _0x1b5472=_0x52fb81,_0x336502={...config,'fiat':_0x5d2d92};let _0x2668ab=dbConfig[_0x1b5472(0x2fd)](_0x1b5472(0x26a))['find']({'botID':botID})['value']();_0x2668ab&&dbConfig[_0x1b5472(0x2fd)]('bot')[_0x1b5472(0x1f8)]({'botID':botID})[_0x1b5472(0x332)](_0x336502)[_0x1b5472(0x2ce)](),config={..._0x336502},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5ba8d5=_0x52fb81;logger[_0x5ba8d5(0x241)](_0x5ba8d5(0x302));try{if(fs[_0x5ba8d5(0x277)](path[_0x5ba8d5(0x25a)](configpath,_0x5ba8d5(0x296)+botID+_0x5ba8d5(0x30c))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x5ba8d5(0x30c)));if(fs[_0x5ba8d5(0x277)](path[_0x5ba8d5(0x25a)](configpath,_0x5ba8d5(0x296)+botID+'-performance.json')))fs['unlinkSync'](path[_0x5ba8d5(0x25a)](configpath,'bot-'+botID+_0x5ba8d5(0x345)));if(fs[_0x5ba8d5(0x277)](path[_0x5ba8d5(0x25a)](configpath,_0x5ba8d5(0x296)+botID+'-results.json')))fs['unlinkSync'](path[_0x5ba8d5(0x25a)](configpath,_0x5ba8d5(0x296)+botID+'-results.json'));}catch(_0x2e5a54){if(_0x2e5a54)logger[_0x5ba8d5(0x241)](_0x5ba8d5(0x1bf),_0x2e5a54);}const _0x1feb90=getDate();let _0x16c7b7=[];currentCoins[_0x5ba8d5(0x228)](_0xdbb5bc=>{const _0x398ec9=_0x5ba8d5;_0x16c7b7[_0x398ec9(0x25d)]({'coin':_0xdbb5bc[_0x398ec9(0x211)],'number':_0xdbb5bc[_0x398ec9(0x261)],'price':_0xdbb5bc[_0x398ec9(0x1bc)]});});let _0xaa4c5=dbConfig[_0x5ba8d5(0x2fd)](_0x5ba8d5(0x26a))[_0x5ba8d5(0x1f8)]({'botID':botID})[_0x5ba8d5(0x206)]();_0xaa4c5&&(dbConfig['get']('bot')[_0x5ba8d5(0x1f8)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1feb90,'changes':_0x16c7b7}]})['write'](),config[_0x5ba8d5(0x1e3)]=[]),process[_0x5ba8d5(0x28a)]({'stop':_0x5ba8d5(0x2a3)},_0x5ab173=>{});}function noslash(_0x242e90){const _0x561262=_0x52fb81;return _0x242e90[_0x561262(0x22a)]('/','');}function updateHighestFee(_0x2c66a7){const _0x585300=_0x52fb81;if(_0x2c66a7[_0x585300(0x1d4)]){let _0x2b4536={'filled':_0x2c66a7[_0x585300(0x205)]*_0x2c66a7[_0x585300(0x30b)],'amount':_0x2c66a7[_0x585300(0x205)]*_0x2c66a7[_0x585300(0x30b)],'side':_0x2c66a7[_0x585300(0x285)]=='sell'?_0x585300(0x304):_0x585300(0x2e7),'price':0x1/_0x2c66a7[_0x585300(0x30b)]};_0x2c66a7={..._0x2c66a7,..._0x2b4536};}const _0x226a1d=defaultFee*_0x2c66a7[_0x585300(0x205)]*_0x2c66a7[_0x585300(0x30b)];lastFees[_0x585300(0x340)][_0x585300(0x33c)]===0x14&&lastFees[_0x585300(0x340)][_0x585300(0x272)](),lastFees[_0x585300(0x340)][_0x585300(0x25d)](_0x226a1d),lastFees[_0x585300(0x2a9)]=Math[_0x585300(0x22b)](...lastFees[_0x585300(0x340)]);}async function updateNumberCoinsCcxt(_0x4ece00){const _0x34972f=_0x52fb81;logger[_0x34972f(0x249)](_0x34972f(0x310)+_0x4ece00[_0x34972f(0x207)]+_0x34972f(0x2cd)+_0x4ece00['status']+_0x34972f(0x2cd)+_0x4ece00[_0x34972f(0x205)]+_0x34972f(0x1fe)+_0x4ece00[_0x34972f(0x2f9)]+_0x34972f(0x2cd)+_0x4ece00['id']);let _0x3b255e=_0x4ece00[_0x34972f(0x1e5)],_0x2b18c8=![];currentCoins[_0x34972f(0x228)](_0x5ba03c=>{const _0x1a656f=_0x34972f;_0x5ba03c['symbol']==_0x4ece00[_0x1a656f(0x207)]&&(_0x2b18c8=!![]);});if(!_0x2b18c8)return;const _0x6c0ded=currentCoins['find'](_0xecc8cd=>_0xecc8cd[_0x34972f(0x207)]==_0x4ece00['symbol']),_0x4deb58=_0x1d76fa=>{const _0x1e36d3=_0x34972f;if(_0x6c0ded)_0x6c0ded[_0x1e36d3(0x2d8)]=_0x1d76fa;};if(_0x3b255e==_0x34972f(0x1f5))_0x4deb58(_0x34972f(0x1f5));else{if(_0x3b255e==_0x34972f(0x2ac)){_0x4deb58(_0x34972f(0x2ac));const _0x591d0b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x591d0b,await getOpenOrders(),handleOpenOrders();}else{if(_0x3b255e==_0x34972f(0x243)){let _0x7c4916=![];if(lastOrders)for(const _0x8b6b8e of lastOrders){const _0x16e8bf=0xc8,_0x84b4aa=0x1388;let _0x96bf8a=0x0;while(!_0x8b6b8e[_0x34972f(0x25c)]&&_0x96bf8a*_0x16e8bf<_0x84b4aa){_0x96bf8a++,await sleep(_0x16e8bf);}if(_0x96bf8a>0x0)logger[_0x34972f(0x249)]('Waited\x20'+_0x96bf8a*_0x16e8bf/0x3e8+_0x34972f(0x2f5));if(_0x8b6b8e[_0x34972f(0x25c)]==_0x4ece00['id']){logger[_0x34972f(0x249)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4ece00['id']),_0x7c4916=!![];if(_0x8b6b8e['filled']==0x0){logger[_0x34972f(0x249)](_0x34972f(0x33e)+_0x4ece00['id']);if(_0x4ece00[_0x34972f(0x1ea)])_0x8b6b8e[_0x34972f(0x30b)]=_0x4ece00['average'];else{if(_0x4ece00[_0x34972f(0x30b)])_0x8b6b8e[_0x34972f(0x30b)]=_0x4ece00[_0x34972f(0x30b)];else{}}_0x8b6b8e[_0x34972f(0x205)]=_0x4ece00[_0x34972f(0x205)],updateHighestFee(_0x8b6b8e),_0x4deb58('filled'),await validateOrders();if(lockOrders==ORDERS[_0x34972f(0x287)]){const _0x3a86f3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3a86f3;}_0x8b6b8e[_0x34972f(0x21e)]={'currency':_0x4ece00[_0x34972f(0x21e)]?_0x4ece00['fee']['currency']:null,'cost':_0x4ece00[_0x34972f(0x21e)]?_0x4ece00[_0x34972f(0x21e)]['cost']:0x0},await updateCoinResults(_0x8b6b8e);}}}if(!_0x7c4916){logger[_0x34972f(0x249)](_0x34972f(0x26c)+_0x4ece00['id']),_0x4deb58('filled');const _0x4cf24e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4cf24e,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x401d67=JSON[_0x34972f(0x2a4)](lastBalances['portfolio']);const _0x24884a=_0x401d67[_0x34972f(0x1f8)](_0x23ad56=>_0x23ad56[_0x34972f(0x207)]==_0x4ece00[_0x34972f(0x207)]);if(_0x24884a){if(_0x3b255e==_0x34972f(0x1f5))_0x24884a[_0x34972f(0x2d8)]=_0x24884a[_0x34972f(0x2d8)]==_0x34972f(0x205)?_0x34972f(0x205):'open';else{if(_0x3b255e==_0x34972f(0x2ac))_0x24884a[_0x34972f(0x2d8)]=_0x24884a['orderstatus']==_0x34972f(0x205)?_0x34972f(0x205):'canceled';else _0x3b255e==_0x34972f(0x243)&&(_0x24884a[_0x34972f(0x2d8)]=_0x34972f(0x205));}}lastBalances={...lastBalances,'portfolio':JSON[_0x34972f(0x321)](_0x401d67)},proxyEmit(_0x34972f(0x1ec),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1c93a1=_0x52fb81;await getOpenOrders();let _0x5c6106=![];currentCoins[_0x1c93a1(0x228)](_0x5d7979=>{const _0x16cfa4=_0x1c93a1;_0x5c6106=allOpenOrders[_0x16cfa4(0x1f8)](_0x3ec44e=>_0x3ec44e[_0x16cfa4(0x207)]==_0x5d7979[_0x16cfa4(0x207)]),_0x5d7979[_0x16cfa4(0x2d8)]=_0x5c6106?_0x16cfa4(0x1f5):_0x16cfa4(0x1f6);});}async function getCoins(_0x380319=0x0,_0x41c9f7=!![],_0x511171=config[_0x52fb81(0x1ce)]){const _0x20e546=_0x52fb81;let _0x3bdc75,_0x306bf4=[],_0x54d663=[],_0x34263b=[];if(_0x380319)await sleep(_0x380319);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3bdc75=await exchange['fetchBalance'](),mybalances=_0x3bdc75[_0x20e546(0x30f)];for(const [_0x2c4f2f,_0x35d990]of Object['entries'](mybalances)){_0x34263b[_0x20e546(0x25d)](_0x2c4f2f);}config[_0x20e546(0x22d)]['forEach'](_0x2bb4a3=>{const _0x525f48=_0x20e546;!_0x34263b['includes'](_0x2bb4a3[_0x525f48(0x211)])&&(mybalances[_0x2bb4a3['coin']]=0x0);});if(_0x511171=='')for(const [_0x5bcccf,_0xab064f]of Object[_0x20e546(0x274)](mybalances)){_0xab064f!=0x0&&_0x306bf4[_0x20e546(0x25d)]({'coin':_0x5bcccf});}else{let _0x3e1447=![];for(const [_0x3e70a4,_0x2fce35]of Object[_0x20e546(0x274)](mybalances)){const _0x91018c=config[_0x20e546(0x22d)][_0x20e546(0x1f8)](_0x2731d4=>_0x2731d4[_0x20e546(0x211)]==_0x3e70a4),_0x48b7fd=_0x3e70a4+'/'+_0x511171,_0x62c3b3=_0x511171+'/'+_0x3e70a4,_0xebe06d=currentCoins[_0x20e546(0x1f8)](_0x1837a1=>_0x1837a1[_0x20e546(0x211)]==_0x3e70a4);_0x3e1447=![];if((_0x2fce35!=0x0||_0x91018c)&&(allSymbols[_0x20e546(0x240)](_0x48b7fd)||_0x3e70a4==_0x511171))_0x306bf4[_0x20e546(0x25d)]({'coin':_0x3e70a4,'symbol':_0x48b7fd,'reverse':![],'number':Math[_0x20e546(0x22b)](_0x2fce35+(_0x91018c&&_0x91018c[_0x20e546(0x2f7)]||0x0),0x0),'orderstatus':_0xebe06d?_0xebe06d[_0x20e546(0x2d8)]:'none'});else{if((_0x2fce35!=0x0||_0x91018c)&&allSymbols[_0x20e546(0x240)](_0x62c3b3))_0x306bf4['push']({'coin':_0x3e70a4,'symbol':_0x62c3b3,'reverse':!![],'number':Math[_0x20e546(0x22b)](_0x2fce35+(_0x91018c&&_0x91018c[_0x20e546(0x2f7)]||0x0),0x0),'orderstatus':_0xebe06d?_0xebe06d[_0x20e546(0x2d8)]:_0x20e546(0x1f6)});else _0x91018c&&_0x306bf4['push']({'coin':_0x91018c[_0x20e546(0x211)],'symbol':_0x91018c[_0x20e546(0x207)],'reverse':_0x91018c['reverse'],'number':0x0,'orderstatus':'none'});}}}}catch(_0x15d3cf){if(!_0x41c9f7)handleErrorNoStop(_0x15d3cf,_0x20e546(0x225));else await handleError(_0x15d3cf,'getCoins()');}return _0x54d663=cloneDeep(_0x306bf4),_0x306bf4=_0x306bf4[_0x20e546(0x20f)](_0x297cf6=>{const _0xeb6bde=_0x20e546,_0x4bdfa4=config[_0xeb6bde(0x22d)][_0xeb6bde(0x1f8)](_0x36ac54=>_0x36ac54['coin']==_0x297cf6[_0xeb6bde(0x211)]);return _0x4bdfa4&&!_0x4bdfa4['excluded'];}),[_0x306bf4,_0x54d663];}async function getCoinNumber(_0xb6bdd1){const _0x37426f=_0x52fb81;let _0x2d462d;try{const _0x7c9c01=await exchange[_0x37426f(0x2c9)]();_0x2d462d=_0x7c9c01[_0x37426f(0x30f)][_0xb6bdd1];}catch(_0x3778e5){await handleError(_0x3778e5,_0x37426f(0x2a5));}return _0x2d462d;}async function getOpenOrders(){const _0x239cb2=_0x52fb81;let _0x353d65;allOpenOrders=[];try{for(const _0x1f8299 of config[_0x239cb2(0x22d)]){!_0x1f8299[_0x239cb2(0x32b)]&&_0x1f8299[_0x239cb2(0x211)]!=config[_0x239cb2(0x1ce)]&&(_0x353d65=await exchange[_0x239cb2(0x2d2)](_0x1f8299[_0x239cb2(0x207)]),_0x353d65[_0x239cb2(0x33c)]>0x0&&allOpenOrders[_0x239cb2(0x25d)](_0x353d65[0x0]));}}catch(_0xaa0613){await handleError(_0xaa0613,_0x239cb2(0x256));}}async function handleOpenOrders(_0x10b9da=0x0){const _0x535835=_0x52fb81;allOpenOrders[_0x535835(0x33c)]==0x0&&lockOrders==ORDERS[_0x535835(0x287)]&&allOrdersPlaced&&(_0x10b9da==0x0?(logger[_0x535835(0x249)](_0x535835(0x299)),_0x10b9da++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x535835(0x249)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x535835(0x1bd))));}async function testAPI(_0x47d09f){const _0x1af91a=_0x52fb81,_0x1fac36=ccxt[_0x1af91a(0x24a)][_0x47d09f[_0x1af91a(0x1dd)][_0x1af91a(0x33b)]()],_0x592c76=new _0x1fac36({'apiKey':_0x47d09f['apiKey'],'secret':_0x47d09f['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1af91a(0x247)}});if(_0x47d09f['apiPassword'])_0x592c76[_0x1af91a(0x2bf)]=_0x47d09f[_0x1af91a(0x260)];try{await _0x592c76[_0x1af91a(0x271)]();}catch(_0x31abe2){throw _0x31abe2;}}function cloneDeep(_0xdc5bc6){const _0x51b148=_0x52fb81;return JSON[_0x51b148(0x2a4)](JSON[_0x51b148(0x321)](_0xdc5bc6));}async function getPortfolio(_0x4dd552){const _0x36b326=_0x52fb81;let _0x52a53d=[],_0x416ec7=[],_0x166b88=[],_0x5ce85d;if(_0x4dd552['apiKey']!=='************'||_0x4dd552[_0x36b326(0x1ff)]!==_0x36b326(0x234)||_0x4dd552[_0x36b326(0x260)]&&_0x4dd552[_0x36b326(0x260)]!==_0x36b326(0x234)){if(config[_0x36b326(0x1dd)]){if(_0x4dd552[_0x36b326(0x294)]==_0x36b326(0x234))_0x4dd552[_0x36b326(0x294)]=config[_0x36b326(0x294)];if(_0x4dd552[_0x36b326(0x1ff)]==_0x36b326(0x234))_0x4dd552[_0x36b326(0x1ff)]=config['apiSecret'];if(_0x4dd552[_0x36b326(0x260)]==_0x36b326(0x234))_0x4dd552[_0x36b326(0x260)]=config['apiPassword'];try{await testAPI(_0x4dd552);}catch(_0x10ed13){if(_0x10ed13[_0x36b326(0x307)]()[_0x36b326(0x240)](_0x36b326(0x331))){logger['debug'](_0x36b326(0x1fd)),proxyEmit('portfolio',![]);return;}else{handleError(_0x10ed13,_0x36b326(0x2f4));return;}}}await initExchange(_0x4dd552[_0x36b326(0x1dd)],_0x4dd552[_0x36b326(0x294)],_0x4dd552[_0x36b326(0x1ff)],_0x4dd552[_0x36b326(0x260)]);try{await loadSymbols();}catch(_0x24a0de){if(_0x24a0de[_0x36b326(0x307)]()[_0x36b326(0x240)]('AuthenticationError')){proxyEmit(_0x36b326(0x22d),![]);return;}else{handleError(_0x24a0de,'getPortfolio(1)');return;}}const _0x5c0f4a=await getCoins(0x0,![],_0x4dd552[_0x36b326(0x1ce)]);_0x166b88=cloneDeep(_0x5c0f4a[0x1]);}else{const _0x42a98c=await getCoins();_0x166b88=cloneDeep(_0x42a98c[0x1]);}if(_0x4dd552[_0x36b326(0x1ce)]=='')proxyEmit(_0x36b326(0x22d),_0x166b88);else{_0x166b88[_0x36b326(0x228)](_0x352a8c=>{const _0x2e8e54=_0x36b326;if(_0x352a8c[_0x2e8e54(0x211)]!=_0x4dd552['basecoin']&&allSymbols[_0x2e8e54(0x240)](_0x352a8c['symbol']))_0x52a53d[_0x2e8e54(0x25d)](_0x352a8c[_0x2e8e54(0x207)]);});if(_0x52a53d['length']==0x0)logHistory(_0x36b326(0x2d1),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x416ec7=await getTickers(_0x52a53d);}catch(_0x1e9b3a){if(_0x1e9b3a[_0x36b326(0x307)]()[_0x36b326(0x240)]('AuthenticationError')){proxyEmit('portfolio',![]);return;}else handleError(_0x1e9b3a,_0x36b326(0x322));}_0x166b88[_0x36b326(0x228)](_0x10f15f=>{const _0x5d9151=_0x36b326;_0x10f15f[_0x5d9151(0x211)]!=_0x4dd552['basecoin']?_0x416ec7[_0x10f15f[_0x5d9151(0x207)]]?_0x5ce85d=_0x10f15f[_0x5d9151(0x1d4)]?0x1/_0x416ec7[_0x10f15f[_0x5d9151(0x207)]][_0x5d9151(0x1bc)]:_0x416ec7[_0x10f15f[_0x5d9151(0x207)]][_0x5d9151(0x1bc)]:_0x5ce85d=0x0:_0x5ce85d=0x1,_0x10f15f[_0x5d9151(0x30b)]=formatResult(_0x5ce85d,0x8);}),proxyEmit('portfolio',_0x166b88);}}}function truncateTradeAmount(_0x394453,_0x320e97){const _0x3f1170=_0x52fb81;let _0x234a23=0x0;try{_0x234a23=exchange[_0x3f1170(0x21a)](_0x394453,_0x320e97);}catch(_0x33a531){}return _0x234a23;}function checkMinimums(_0x1fa783){const _0x375ae6=_0x52fb81;let _0xcf319e=!![];const _0x49851a=!_0x1fa783[_0x375ae6(0x1d4)]?markets[_0x1fa783[_0x375ae6(0x207)]][_0x375ae6(0x1eb)][_0x375ae6(0x2f9)]['min']:markets[_0x1fa783[_0x375ae6(0x207)]][_0x375ae6(0x1eb)][_0x375ae6(0x233)]['min'],_0x32bbdd=!_0x1fa783['reverse']?markets[_0x1fa783[_0x375ae6(0x207)]]['limits'][_0x375ae6(0x233)][_0x375ae6(0x1f9)]:markets[_0x1fa783[_0x375ae6(0x207)]][_0x375ae6(0x1eb)]['amount']['min'],_0x53d80f=truncateTradeAmount(_0x1fa783['symbol'],_0x1fa783[_0x375ae6(0x311)]);_0x1fa783[_0x375ae6(0x311)]=_0x53d80f;if(Math[_0x375ae6(0x2b6)](_0x53d80f)<_0x49851a)_0xcf319e=![];if(Math[_0x375ae6(0x2b6)](_0x53d80f)*_0x1fa783['last']<_0x32bbdd)_0xcf319e=![];if(_0x1fa783[_0x375ae6(0x285)]=='sell'){let _0x18ffce=config[_0x375ae6(0x22d)][_0x375ae6(0x1f8)](_0x5b62d9=>_0x5b62d9[_0x375ae6(0x211)]==_0x1fa783[_0x375ae6(0x211)]);if(_0x18ffce['offset']>0x0){if(Math[_0x375ae6(0x2b6)](_0x53d80f)>_0x1fa783[_0x375ae6(0x261)]-_0x18ffce[_0x375ae6(0x2f7)])_0xcf319e=![];}else{if(Math[_0x375ae6(0x2b6)](_0x53d80f)>_0x1fa783[_0x375ae6(0x261)])_0xcf319e=![];}}if(_0x1fa783['side']==_0x375ae6(0x304)){let _0x330d46=config['portfolio'][_0x375ae6(0x1f8)](_0x2bc42b=>_0x2bc42b[_0x375ae6(0x211)]==config[_0x375ae6(0x1ce)]),_0x405653=currentCoins[_0x375ae6(0x1f8)](_0x37a7e9=>_0x37a7e9[_0x375ae6(0x211)]==config['basecoin']);if(_0x330d46[_0x375ae6(0x2f7)]>0x0){if(Math[_0x375ae6(0x2b6)](_0x53d80f)*_0x1fa783['last']>_0x405653['number']-_0x330d46[_0x375ae6(0x2f7)])_0xcf319e=![];}else{if(Math[_0x375ae6(0x2b6)](_0x53d80f)*_0x1fa783[_0x375ae6(0x1bc)]>_0x405653[_0x375ae6(0x261)])_0xcf319e=![];}}return _0xcf319e;}async function getBalances(_0x9cabdc=!![]){const _0x8877a1=_0x52fb81;let _0x278e2a=0x0,_0x38bde5;const _0x14ef26=config[_0x8877a1(0x26f)];if(config[_0x8877a1(0x292)]&&config[_0x8877a1(0x213)]<0x0)await validate24hChanges();currentCoins[_0x8877a1(0x228)](_0x53a0fb=>{const _0x2146bc=_0x8877a1;if(_0x53a0fb[_0x2146bc(0x211)]!=config[_0x2146bc(0x1ce)]){let _0x103c02=global[_0x2146bc(0x318)][noslash(_0x53a0fb['symbol'])];_0x38bde5=_0x53a0fb['reverse']?0x1/_0x103c02:_0x103c02;}else _0x38bde5=0x1;let _0x2bc2e5=_0x53a0fb[_0x2146bc(0x261)]*_0x38bde5;_0x278e2a+=_0x2bc2e5,_0x53a0fb['last']=formatResult(Number(_0x38bde5),0x8),_0x53a0fb[_0x2146bc(0x206)]=_0x2bc2e5;}),currentCoins[_0x8877a1(0x228)](_0x4ba989=>{const _0x39a551=_0x8877a1;let _0x3681ce=config[_0x39a551(0x22d)]['find'](_0x59f1e4=>_0x59f1e4[_0x39a551(0x211)]==_0x4ba989[_0x39a551(0x211)]),_0x5ae045=Number(_0x3681ce[_0x39a551(0x31c)]),_0x293b5b=_0x4ba989[_0x39a551(0x206)]/_0x278e2a*0x64,_0x550280=_0x5ae045*_0x278e2a/0x64/_0x4ba989[_0x39a551(0x1bc)]-_0x4ba989[_0x39a551(0x261)];_0x4ba989[_0x39a551(0x31c)]=formatResult(_0x293b5b,0x3),_0x4ba989[_0x39a551(0x326)]=formatResult(_0x5ae045,0x3),_0x4ba989[_0x39a551(0x311)]=formatResult(_0x550280,0x8),_0x4ba989[_0x39a551(0x285)]='',_0x4ba989['valid']=![];if(_0x4ba989[_0x39a551(0x211)]!=config[_0x39a551(0x1ce)]){if(_0x4ba989[_0x39a551(0x31c)]>_0x5ae045)_0x4ba989['side']=_0x39a551(0x2e7),_0x4ba989['valid']=checkMinimums(_0x4ba989);else _0x4ba989[_0x39a551(0x31c)]<_0x5ae045&&(_0x4ba989[_0x39a551(0x285)]=_0x39a551(0x304),_0x4ba989['valid']=checkMinimums(_0x4ba989));}_0x4ba989['delta']=_0x4ba989['distribution']/_0x4ba989['target']-0x1;if(_0x4ba989[_0x39a551(0x2d8)]==_0x39a551(0x205)||_0x4ba989[_0x39a551(0x2d8)]==_0x39a551(0x2ac))_0x4ba989[_0x39a551(0x2d8)]='none';}),currentCoins[_0x8877a1(0x1e1)]((_0x3d072d,_0x1de2bd)=>_0x3d072d[_0x8877a1(0x238)]<_0x1de2bd[_0x8877a1(0x238)]?0x1:_0x1de2bd[_0x8877a1(0x238)]<_0x3d072d[_0x8877a1(0x238)]?-0x1:0x0);const _0x2d67bc=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2d67bc['eur'],'usd':_0x2d67bc[_0x8877a1(0x2e9)],'portfolio':JSON[_0x8877a1(0x321)](currentCoins),'threshold':_0x14ef26},proxyEmit(_0x8877a1(0x1ec),{'serverversion':serverversion,'balances':lastBalances});if(_0x9cabdc){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x14ef26});else{if(lockOrders==ORDERS[_0x8877a1(0x290)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x14ef26});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x57c3d1=getNormalizedPerformance();getStartingBalances(_0x57c3d1),emitPerformance(_0x57c3d1);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0xf614af=getNormalizedPerformance();emitPerformance(_0xf614af),getStartingBalances(_0xf614af),logger['debug'](_0x8877a1(0x265));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3d7a0d=_0x52fb81;if(!lastBalances)return;let _0x2a1113=[],_0x3811e3,_0x1eee04=JSON['parse'](lastBalances[_0x3d7a0d(0x22d)]);_0x1eee04[_0x3d7a0d(0x1e1)]((_0x576d14,_0x3fa845)=>_0x576d14['coin']>_0x3fa845[_0x3d7a0d(0x211)]?0x1:_0x3fa845[_0x3d7a0d(0x211)]>_0x576d14[_0x3d7a0d(0x211)]?-0x1:0x0),_0x1eee04['forEach'](_0x28ff4c=>{const _0x42e3fb=_0x3d7a0d;let _0x463e0a={'coin':_0x28ff4c[_0x42e3fb(0x211)],'number':_0x28ff4c[_0x42e3fb(0x261)],'price':_0x28ff4c[_0x42e3fb(0x1bc)]};_0x2a1113[_0x42e3fb(0x25d)](_0x463e0a);});const _0x5df5a5=await getFiat();_0x3811e3={'date':lastBalances[_0x3d7a0d(0x24f)]['split']('\x20')[0x0],'eur':_0x5df5a5[_0x3d7a0d(0x1f3)],'usd':_0x5df5a5[_0x3d7a0d(0x2e9)],'coins':_0x2a1113};let _0x40b2e4=dbPerformance['get'](_0x3d7a0d(0x1db))[_0x3d7a0d(0x1f8)]({'date':_0x3811e3[_0x3d7a0d(0x1fa)]})['value']();_0x40b2e4?_0x3811e3[_0x3d7a0d(0x1fa)]!=config[_0x3d7a0d(0x1c5)]&&dbPerformance[_0x3d7a0d(0x2fd)](_0x3d7a0d(0x1db))[_0x3d7a0d(0x1f8)]({'date':_0x3811e3[_0x3d7a0d(0x1fa)]})['assign'](_0x3811e3)['write']():dbPerformance[_0x3d7a0d(0x2fd)]('data')[_0x3d7a0d(0x25d)](_0x3811e3)[_0x3d7a0d(0x2ce)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4dcc17=_0x52fb81;let _0x4ac529=[];if(dbPerformance['has'](_0x4dcc17(0x1db))['value']()){let _0x210cde=dbPerformance[_0x4dcc17(0x2fd)](_0x4dcc17(0x1db))[_0x4dcc17(0x23d)]()[_0x4dcc17(0x20f)](_0x30c0d0=>{const _0x382983=_0x4dcc17;if(_0x30c0d0[_0x382983(0x32d)]['length']==0x0)return![];else return!![];})['sortBy'](_0x4dcc17(0x1fa))[_0x4dcc17(0x206)](),_0x5ebe50=[...config['liquidity']];_0x5ebe50[_0x4dcc17(0x1e1)]((_0x3e486b,_0x3fc53d)=>_0x3e486b[_0x4dcc17(0x1fa)]>_0x3fc53d[_0x4dcc17(0x1fa)]?-0x1:_0x3fc53d[_0x4dcc17(0x1fa)]>_0x3e486b[_0x4dcc17(0x1fa)]?0x1:0x0);let _0x506b90=0x1,_0x4cabf0=[],_0x837a37=0x0;_0x210cde[_0x4dcc17(0x286)]()[_0x4dcc17(0x1d4)]()[_0x4dcc17(0x228)]((_0x4f82e6,_0x26ddf1)=>{const _0x295dbd=_0x4dcc17;if(_0x5ebe50[_0x837a37]){if(_0x210cde[_0x210cde[_0x295dbd(0x33c)]-_0x26ddf1]&&_0x5ebe50[_0x837a37][_0x295dbd(0x1fa)]==_0x210cde[_0x210cde[_0x295dbd(0x33c)]-_0x26ddf1]['date']){if(_0x26ddf1<_0x210cde['length']){let _0x46670a=0x0,_0x516f27=0x0;_0x210cde[_0x210cde[_0x295dbd(0x33c)]-_0x26ddf1][_0x295dbd(0x32d)][_0x295dbd(0x228)](_0x7a587=>{const _0x2e74db=_0x295dbd;_0x516f27+=_0x7a587[_0x2e74db(0x261)]*_0x7a587[_0x2e74db(0x30b)];}),_0x5ebe50[_0x837a37][_0x295dbd(0x342)]['forEach'](_0x1a01d7=>{const _0x64bdbe=_0x295dbd;_0x46670a+=_0x1a01d7[_0x64bdbe(0x261)]*_0x1a01d7[_0x64bdbe(0x30b)];}),_0x506b90*=_0x46670a/(_0x516f27-_0x46670a)+0x1;}_0x837a37++;}}let _0x41fc68=0x0;_0x4f82e6['coins'][_0x295dbd(0x228)](_0x14361c=>{const _0x235d32=_0x295dbd;_0x41fc68+=_0x14361c[_0x235d32(0x261)]*_0x14361c[_0x235d32(0x30b)];}),_0x4cabf0[_0x210cde['length']-_0x26ddf1-0x1]=_0x41fc68*(_0x506b90-0x1);});let _0x2fb447=[];_0x5ebe50=[...config['liquidity']]||[];let _0x31a2d6=0x0;_0x837a37=0x0,_0x210cde['forEach']((_0x1ad9be,_0x289ad0)=>{const _0x1e9a72=_0x4dcc17;if(_0x5ebe50[_0x837a37]){const _0x1e6d03=fns[_0x1e9a72(0x2a4)](_0x5ebe50[_0x837a37][_0x1e9a72(0x1fa)],_0x1e9a72(0x248),new Date()),_0x371513=fns['parse'](_0x1ad9be['date'],_0x1e9a72(0x248),new Date());if(fns['isEqual'](_0x1e6d03,_0x371513)){let _0x29e5bd=0x0;_0x5ebe50[_0x837a37]['changes'][_0x1e9a72(0x228)](_0x441bba=>{const _0x37722b=_0x1e9a72;!_0x2fb447[_0x441bba['coin']]?_0x2fb447[_0x441bba['coin']]=_0x441bba['number']:(_0x29e5bd=_0x2fb447[_0x441bba['coin']],_0x2fb447[_0x441bba[_0x37722b(0x211)]]+=_0x441bba[_0x37722b(0x261)]);const _0x24f337=_0x1ad9be[_0x37722b(0x32d)][_0x37722b(0x1f8)](_0x4737ba=>_0x4737ba[_0x37722b(0x211)]==_0x441bba[_0x37722b(0x211)]);(!_0x24f337||_0x24f337[_0x37722b(0x261)]==0x0)&&(_0x31a2d6+=(-_0x441bba[_0x37722b(0x261)]-_0x29e5bd)*_0x441bba[_0x37722b(0x30b)]);}),_0x837a37++;}}_0x1ad9be['coins'][_0x1e9a72(0x228)]((_0x4aca1b,_0x26e607)=>{const _0x1480e1=_0x1e9a72;_0x2fb447[_0x4aca1b['coin']]&&(_0x4aca1b[_0x1480e1(0x26e)]=_0x2fb447[_0x4aca1b[_0x1480e1(0x211)]]);}),_0x4ac529[_0x1e9a72(0x25d)]({'date':_0x1ad9be[_0x1e9a72(0x1fa)],'eur':_0x1ad9be[_0x1e9a72(0x1f3)],'usd':_0x1ad9be[_0x1e9a72(0x2e9)],'offset':_0x4cabf0[_0x289ad0],'netoffset':_0x31a2d6,'coins':_0x1ad9be[_0x1e9a72(0x32d)]});});}return _0x4ac529;}function emitPerformance(_0x370a75){const _0x114726=_0x52fb81;_0x370a75[_0x114726(0x33c)]!==0x0?(proxyEmit('performance',_0x370a75),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x36fc03,_0x500c17){const _0x5ada3b=_0x52fb81;let _0x5592e7=0x0,_0x502b1a=0x0,_0x5b5679=0x0;_0x36fc03[_0x5ada3b(0x32d)][_0x5ada3b(0x228)](_0x42e457=>{const _0x36264b=_0x5ada3b;_0x5592e7+=_0x42e457[_0x36264b(0x261)]*_0x42e457[_0x36264b(0x30b)];});_0x500c17&&(_0x5592e7+=_0x36fc03[_0x5ada3b(0x2f7)]);if(config[_0x5ada3b(0x1ce)]===_0x5ada3b(0x24d)||config['basecoin']==='ETH'||config[_0x5ada3b(0x1ce)]===_0x5ada3b(0x1e8))_0x502b1a=_0x5592e7*_0x36fc03[_0x5ada3b(0x1f3)],_0x5b5679=_0x5592e7*_0x36fc03['usd'];else{if(usdBasecoins[_0x5ada3b(0x240)](config[_0x5ada3b(0x1ce)]))_0x502b1a=_0x5592e7*_0x36fc03['eur']/_0x36fc03[_0x5ada3b(0x2e9)],_0x5b5679=_0x5592e7;else config['basecoin']===_0x5ada3b(0x27f)&&(_0x502b1a=_0x5592e7,_0x5b5679=_0x5592e7*_0x36fc03['usd']/_0x36fc03[_0x5ada3b(0x1f3)]);}return[_0x5592e7,_0x502b1a,_0x5b5679];}function getKPIs(_0x4e4d8b,_0x578f83='EUR'){const _0xca5265=_0x52fb81,_0x54200b=config[_0xca5265(0x1ce)],_0x3780a1=lastBalances,_0xd5c169=currentCoins,_0x9b8dd2=getNormalizedPerformance(),_0xe26c60=_0x4e4d8b===_0xca5265(0x1ce)?_0x54200b:_0x4e4d8b===_0xca5265(0x215)||_0x4e4d8b===_0xca5265(0x2bb)?_0x578f83:_0xca5265(0x2ba)+_0x54200b,_0x5cd40c=_0x4e4d8b===_0xca5265(0x270)?_0xca5265(0x2f0):_0x4e4d8b==='net-fiat'?_0xca5265(0x2f0):_0xe26c60+_0xca5265(0x2c5),_0x2efcde=_0x4e4d8b==='net-basecoin'||_0x4e4d8b===_0xca5265(0x2bb)?_0xca5265(0x2f0):_0xe26c60+'\x20change';let _0x4150f4=0x0;_0xd5c169[_0xca5265(0x228)](_0x3ebd4a=>{const _0x152255=_0xca5265;_0x4150f4+=_0x3ebd4a[_0x152255(0x261)]*_0x3ebd4a[_0x152255(0x1bc)];});if(_0x4e4d8b==='fiat'||_0x4e4d8b==='net-fiat'){if(_0x54200b===_0xca5265(0x24d)||_0x54200b==='ETH'||_0x54200b===_0xca5265(0x1e8))_0x4150f4=_0x4150f4*(_0x578f83===_0xca5265(0x27f)?_0x3780a1[_0xca5265(0x1f3)]:_0x3780a1[_0xca5265(0x2e9)]);else{if(usdBasecoins[_0xca5265(0x240)](_0x54200b))_0x4150f4=_0x4150f4*(_0x578f83===_0xca5265(0x27f)?_0x3780a1['eur']/_0x3780a1['usd']:0x1);else _0x54200b===_0xca5265(0x27f)&&(_0x4150f4=_0x4150f4*(_0x578f83===_0xca5265(0x27f)?0x1:_0x3780a1[_0xca5265(0x2e9)]/_0x3780a1[_0xca5265(0x1f3)]));}}let _0x1fe324;if(_0x4150f4!==0x0){if(_0x4e4d8b===_0xca5265(0x1ce))_0x1fe324=(_0x4150f4/startingBalances[_0xca5265(0x1ce)]-0x1)*0x64;else{if(_0x578f83===_0xca5265(0x27f))_0x1fe324=(_0x4150f4/startingBalances[_0xca5265(0x1f3)]-0x1)*0x64;else _0x1fe324=(_0x4150f4/startingBalances[_0xca5265(0x2e9)]-0x1)*0x64;}let _0x4a5dfc=0x0;if(startingBalances[_0xca5265(0x32d)])_0xd5c169[_0xca5265(0x228)](_0x463ed4=>{const _0xf5d667=_0xca5265;let _0x5b884a=startingBalances[_0xf5d667(0x32d)][_0xf5d667(0x1f8)](_0x12857d=>_0x12857d[_0xf5d667(0x211)]===_0x463ed4[_0xf5d667(0x211)]);if(_0x5b884a&&_0x5b884a[_0xf5d667(0x211)]&&_0x463ed4['number']!==0x0)_0x4a5dfc+=_0x5b884a[_0xf5d667(0x261)]*_0x463ed4[_0xf5d667(0x1bc)];});let _0x559a59=0x0;if(_0x9b8dd2[_0xca5265(0x33c)]!==0x0){let _0x4dbaa4=_0x9b8dd2[_0x9b8dd2[_0xca5265(0x33c)]-0x1];_0x559a59=_0x4dbaa4[_0xca5265(0x30a)];}_0x4a5dfc-=_0x559a59;_0x4e4d8b===_0xca5265(0x270)&&(_0x1fe324=(_0x4150f4-_0x4a5dfc)/startingBalances[_0xca5265(0x1ce)]*0x64,_0x4150f4=_0x4150f4-_0x4a5dfc);if(_0x4e4d8b===_0xca5265(0x2bb)){let _0x271f5b=_0x578f83===_0xca5265(0x27f)?startingBalances['eur']:startingBalances[_0xca5265(0x2e9)];if(_0x54200b===_0xca5265(0x24d)||_0x54200b===_0xca5265(0x221)||_0x54200b===_0xca5265(0x1e8))_0x4a5dfc=_0x578f83===_0xca5265(0x27f)?_0x4a5dfc*_0x3780a1[_0xca5265(0x1f3)]:_0x4a5dfc*_0x3780a1[_0xca5265(0x2e9)];else{if(usdBasecoins[_0xca5265(0x240)](_0x54200b))_0x4a5dfc=_0x578f83===_0xca5265(0x27f)?_0x4a5dfc*_0x3780a1[_0xca5265(0x1f3)]/_0x3780a1[_0xca5265(0x2e9)]:_0x4a5dfc;else _0x54200b===_0xca5265(0x27f)&&(_0x4a5dfc=_0x578f83===_0xca5265(0x27f)?_0x4a5dfc:_0x4a5dfc*_0x3780a1['usd']/_0x3780a1[_0xca5265(0x1f3)]);}_0x1fe324=(_0x4150f4-_0x4a5dfc)/_0x271f5b*0x64,_0x4150f4=_0x4150f4-_0x4a5dfc;}if(_0x1fe324){if(_0x1fe324<0x64)_0x1fe324=_0x1fe324['toFixed'](0x2);else{if(_0x1fe324<0x3e8)_0x1fe324=_0x1fe324['toFixed'](0x1);else _0x1fe324=_0x1fe324[_0xca5265(0x2fc)](0x0);}}else _0x1fe324=Number('0')[_0xca5265(0x2fc)](0x2);if(_0x4150f4){if(Math[_0xca5265(0x2b6)](_0x4150f4)<0.000001)_0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x2);else{if(Math['abs'](_0x4150f4)<0.1)_0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x6);else{if(Math[_0xca5265(0x2b6)](_0x4150f4)<0x1)_0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x5);else{if(Math[_0xca5265(0x2b6)](_0x4150f4)<0xa)_0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x4);else{if(Math[_0xca5265(0x2b6)](_0x4150f4)<0x64)_0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x3);else{if(Math[_0xca5265(0x2b6)](_0x4150f4)<0x3e8)_0x4150f4=_0x4150f4['toFixed'](0x2);else _0x4150f4=_0x4150f4[_0xca5265(0x2fc)](0x2);}}}}}}else _0x4150f4=Number('0')[_0xca5265(0x2fc)](0x2);}else _0x1fe324=Number('0')[_0xca5265(0x2fc)](0x2);return{'value':_0x4150f4,'change':_0x1fe324,'leftTxt':_0x5cd40c,'rightTxt':_0x2efcde};}async function getStartingBalances(_0x604dff,_0x3f2a0d=!![]){const _0xed6c1=_0x52fb81;if(_0x604dff[_0xed6c1(0x33c)]!==0x0){const [_0x37ee47,_0x4903ce,_0x4c848a]=getPerf(_0x604dff[0x0],!![]);let _0x282d05=[];config['portfolio'][_0xed6c1(0x228)](_0x25e74a=>{const _0x563d59=_0xed6c1;let _0x22d6a3=0x0,_0x10040f;config[_0x563d59(0x1e3)][_0x563d59(0x228)](_0x3b57fa=>{const _0x47e240=_0x563d59;let _0x423c27=_0x3b57fa['changes']['find'](_0x1ecac=>_0x1ecac[_0x47e240(0x211)]==_0x25e74a[_0x47e240(0x211)]);if(_0x423c27){_0x22d6a3+=_0x423c27[_0x47e240(0x261)];if(!_0x10040f)_0x10040f=_0x423c27[_0x47e240(0x30b)];}}),_0x282d05[_0x563d59(0x25d)]({'coin':_0x25e74a[_0x563d59(0x211)],'number':_0x22d6a3,'initialprice':_0x10040f});});const _0x5bb462={'basecoin':_0x37ee47,'eur':_0x4903ce,'usd':_0x4c848a,'coins':_0x282d05};if(_0x3f2a0d)proxyEmit('starting-balances',_0x5bb462);startingBalances=_0x5bb462;}}function headlessMode(_0x4d429b){const _0x3e88b0=_0x52fb81;let _0x438606=_0x4d429b[_0x3e88b0(0x22d)],_0x1866e4=_0x4d429b[_0x3e88b0(0x26f)],_0x43c325=[];for(let _0x2d275f of _0x438606){if(_0x2d275f[_0x3e88b0(0x211)]!=config['basecoin']){if(_0x2d275f[_0x3e88b0(0x238)]>=_0x1866e4/0x64){if(_0x2d275f['valid'])_0x43c325['push'](_0x2d275f);}else{if(_0x2d275f[_0x3e88b0(0x238)]<=-_0x1866e4/0x64){if(_0x2d275f[_0x3e88b0(0x2b8)])_0x43c325[_0x3e88b0(0x25d)](_0x2d275f);}}}}_0x43c325[_0x3e88b0(0x33c)]>0x0&&(lockOrders==ORDERS[_0x3e88b0(0x290)]&&!coolingDown&&_0x43c325['forEach'](_0x1c3ec3=>{const _0x5e0470=_0x3e88b0;logger[_0x5e0470(0x249)](_0x5e0470(0x1d7)+_0x1c3ec3[_0x5e0470(0x211)]+'\x20'+_0x1c3ec3[_0x5e0470(0x261)]+'\x20'+_0x1c3ec3[_0x5e0470(0x1bc)]+'\x20'+_0x1c3ec3[_0x5e0470(0x31c)]+'%\x20'+_0x1c3ec3['target']+'%\x20'+(0x64*_0x1c3ec3[_0x5e0470(0x238)])[_0x5e0470(0x2fc)](0x2)+_0x5e0470(0x295)+_0x1866e4[_0x5e0470(0x2fc)](0x2)+'%)');}),placeOrder(_0x43c325));}function notifyBalance(_0x562dc5){const _0x3b8cce=_0x52fb81;let _0x1e8e97=_0x562dc5['portfolio'],_0x39ce80=_0x562dc5[_0x3b8cce(0x26f)],_0x33df3f=[];for(let _0x14deba of _0x1e8e97){if(_0x14deba['coin']!=config['basecoin']){if(_0x14deba[_0x3b8cce(0x238)]>=_0x39ce80/0x64){if(_0x14deba[_0x3b8cce(0x2b8)])_0x33df3f[_0x3b8cce(0x25d)](_0x14deba);}else{if(_0x14deba[_0x3b8cce(0x238)]<=-_0x39ce80/0x64){if(_0x14deba['valid'])_0x33df3f[_0x3b8cce(0x25d)](_0x14deba);}}}}if(_0x33df3f[_0x3b8cce(0x33c)]>0x0){let _0x1c95e5=_0x33df3f['map'](_0x2fda48=>_0x2fda48[_0x3b8cce(0x211)]);_0x1c95e5[_0x3b8cce(0x1e1)]();let _0x4e4ee8=_0x1c95e5[_0x3b8cce(0x25a)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3b8cce(0x300),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x4e4ee8;}}function symbolToCoin(_0x32571f){const _0x20f0aa=_0x52fb81;let _0x1581c7;if(_0x32571f[_0x20f0aa(0x240)]('/'+config[_0x20f0aa(0x1ce)]))_0x1581c7=_0x32571f[_0x20f0aa(0x22a)]('/'+config[_0x20f0aa(0x1ce)],'');if(_0x32571f[_0x20f0aa(0x240)](config[_0x20f0aa(0x1ce)]+'/'))_0x1581c7=_0x32571f['replace'](config['basecoin']+'/','');return _0x1581c7;}async function unlockOrders(){const _0x41de85=_0x52fb81;if(allOrdersPlaced&&lockOrders==ORDERS[_0x41de85(0x287)]){logger[_0x41de85(0x249)](_0x41de85(0x227)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x1eac3c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1eac3c,validateOrdersState=_0x41de85(0x26e),persistOpenOrders([]),lockOrders=ORDERS[_0x41de85(0x290)],logger[_0x41de85(0x249)](_0x41de85(0x268));}}async function validateOrders(_0x182d51){const _0x537c2d=_0x52fb81;if(_0x182d51)validateOrdersState=_0x182d51;logger[_0x537c2d(0x249)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x537c2d(0x33d)+(lockOrders==0x1?_0x537c2d(0x282):lockOrders==0x2?_0x537c2d(0x2b4):_0x537c2d(0x306)));let _0x145e42=[],_0x20521f=config['ordertype']==_0x537c2d(0x1ef)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x537c2d(0x217)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x537c2d(0x249)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x537c2d(0x228)](_0x2d6ea5=>{const _0x205393=_0x537c2d;let _0xe16b80=![];_0x2d6ea5[_0x205393(0x205)]>0x0&&(_0xe16b80=!![]),_0x145e42[_0x205393(0x25d)](_0xe16b80),_0xe16b80&&config[_0x205393(0x2eb)]!=_0x205393(0x1ef)&&logHistory('order',_0x205393(0x320)+_0x2d6ea5['symbol']+'\x20'+_0x2d6ea5['side']+'\x20#'+formatResult(_0x2d6ea5['filled'],0x8)+'\x20@'+formatResult(_0x2d6ea5[_0x205393(0x30b)],0x8));}),_0x145e42[_0x537c2d(0x228)]((_0x2fc133,_0x3a00f7)=>{if(_0x2fc133)lastOrders['splice'](_0x3a00f7,0x1);}),persistOpenOrders(lastOrders);const _0x2a539f=coolingDown?_0x537c2d(0x313):_0x537c2d(0x1d8);if(validateOrdersState==_0x537c2d(0x26e)){validateOrdersState=_0x537c2d(0x30e);if(_0x145e42[_0x537c2d(0x240)](![])){if(config[_0x537c2d(0x2eb)]==_0x537c2d(0x1ef)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x537c2d(0x30e)){if(_0x145e42['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x537c2d(0x289))_0x145e42[_0x537c2d(0x240)](![])&&(config['ordertype']==_0x537c2d(0x1ef)?logHistory(_0x537c2d(0x275),_0x537c2d(0x214)+Math[_0x537c2d(0x309)](_0x20521f*validateOrderInterval/0xea60)+_0x537c2d(0x236)+_0x2a539f):(await cancelOrders(),logHistory(_0x537c2d(0x275),_0x537c2d(0x1de)+Math[_0x537c2d(0x309)](_0x20521f*validateOrderInterval/0xea60)+_0x537c2d(0x236)+_0x2a539f))),await unlockOrders();else{if(validateOrdersState==_0x537c2d(0x1bd)){if(config['ordertype']!=_0x537c2d(0x1ef))logHistory(_0x537c2d(0x275),_0x537c2d(0x2dc)+_0x2a539f);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x555716=>{const _0x1807dc=_0x2e35;try{const _0x3a2ec6=await exchange[_0x1807dc(0x250)](_0x555716[_0x1807dc(0x25c)],_0x555716[_0x1807dc(0x207)]);}catch(_0x20bc65){if(_0x20bc65[_0x1807dc(0x307)]()[_0x1807dc(0x240)](_0x1807dc(0x23b))){}else await handleError(_0x20bc65,'cancelOrders()');}});}async function initCoinResults(_0x343f5c){const _0x45b946=_0x52fb81;_0x343f5c?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x343f5c):logger[_0x45b946(0x249)]('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0x205482=>{const _0x427486=_0x45b946;if(!_0x205482['excluded']&&_0x205482[_0x427486(0x211)]!=config['basecoin']){const _0x599504=currentCoins[_0x427486(0x1f8)](_0x25bdff=>_0x25bdff[_0x427486(0x211)]==_0x205482[_0x427486(0x211)]),_0x509adb=global[_0x427486(0x318)][noslash(_0x205482['symbol'])];let _0x50f08c=_0x599504?_0x599504['number']:null,_0x563cc2=_0x205482[_0x427486(0x1d4)]?0x1/_0x509adb:_0x509adb,_0x24a8b3;config[_0x427486(0x1e3)][_0x427486(0x228)](_0x3954a6=>{const _0x329ad5=_0x427486;!_0x24a8b3&&(_0x24a8b3=_0x3954a6[_0x329ad5(0x342)][_0x329ad5(0x1f8)](_0x3d2c20=>_0x3d2c20[_0x329ad5(0x211)]==_0x205482[_0x329ad5(0x211)]),_0x24a8b3&&(_0x50f08c=_0x24a8b3[_0x329ad5(0x261)],_0x563cc2=_0x24a8b3[_0x329ad5(0x30b)]));});let _0x299797=dbCoinResults[_0x427486(0x2fd)](_0x427486(0x32d))[_0x427486(0x1f8)]({'coin':_0x205482[_0x427486(0x211)]})[_0x427486(0x206)]();if(!_0x299797){const _0x492a98={'coin':_0x205482[_0x427486(0x211)],'number':_0x50f08c,'breakeven':_0x563cc2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x427486(0x2fd)](_0x427486(0x32d))['push'](_0x492a98)[_0x427486(0x2ce)]();}else{if(_0x343f5c&&_0x205482[_0x427486(0x211)]==_0x343f5c){const _0x80cc6b={'coin':_0x205482['coin'],'number':_0x50f08c,'breakeven':_0x563cc2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x427486(0x32d))[_0x427486(0x1f8)]({'coin':_0x205482[_0x427486(0x211)]})[_0x427486(0x332)](_0x80cc6b)[_0x427486(0x2ce)]();}}}});}async function updateCoinResults(_0x35730a,_0x619475=![]){const _0x478403=_0x52fb81;let _0x17322b,_0x4a97ad,_0x2b6c3f,_0x1e0459,_0x14b836,_0x41ade2,_0xe1d6ec=dbCoinResults[_0x478403(0x2fd)](_0x478403(0x32d))[_0x478403(0x1f8)]({'coin':_0x35730a[_0x478403(0x211)]})[_0x478403(0x206)](),_0x3c5d6d=![];_0xe1d6ec&&Object['entries'](_0xe1d6ec)[_0x478403(0x228)](([_0x2edf20,_0x3de3c0])=>{if(_0x3de3c0==null)_0x3c5d6d=!![];});(!_0xe1d6ec||_0x3c5d6d)&&(await initCoinResults(_0x35730a[_0x478403(0x211)]),_0xe1d6ec=dbCoinResults[_0x478403(0x2fd)](_0x478403(0x32d))[_0x478403(0x1f8)]({'coin':_0x35730a[_0x478403(0x211)]})[_0x478403(0x206)]());_0x35730a['reverse']&&(_0x41ade2={'filled':_0x35730a['filled']*_0x35730a[_0x478403(0x30b)],'amount':_0x35730a[_0x478403(0x205)]*_0x35730a[_0x478403(0x30b)],'side':_0x35730a[_0x478403(0x285)]==_0x478403(0x2e7)?'buy':_0x478403(0x2e7),'price':0x1/_0x35730a[_0x478403(0x30b)]},_0x35730a={..._0x35730a,..._0x41ade2});_0x619475?_0x4a97ad=_0x35730a[_0x478403(0x285)]==_0x478403(0x304)?_0xe1d6ec[_0x478403(0x261)]+_0x35730a[_0x478403(0x205)]:_0xe1d6ec[_0x478403(0x261)]-_0x35730a[_0x478403(0x205)]:_0x4a97ad=await getCoinNumber(_0x35730a[_0x478403(0x211)]);if(_0x35730a[_0x478403(0x21e)]&&_0x35730a[_0x478403(0x21e)]['currency']==config[_0x478403(0x1ce)])_0x17322b=_0x35730a[_0x478403(0x21e)][_0x478403(0x233)];else{if(_0x35730a[_0x478403(0x21e)]&&_0x35730a['fee'][_0x478403(0x347)]==_0x478403(0x1c1)&&!_0x619475&&config[_0x478403(0x1ce)]!='PAXG')_0x17322b=_0x35730a['fee'][_0x478403(0x233)]*global[_0x478403(0x318)][_0x478403(0x1c1)+config[_0x478403(0x1ce)]];else _0x17322b=defaultFee*_0x35730a[_0x478403(0x205)]*_0x35730a['price'];}_0x35730a[_0x478403(0x285)]=='buy'?(_0x2b6c3f=_0x4a97ad!=0x0?(_0xe1d6ec[_0x478403(0x1dc)]*_0xe1d6ec['number']+_0x35730a['price']*(_0x4a97ad-_0xe1d6ec[_0x478403(0x261)])+_0x17322b)/_0x4a97ad:0x0,_0x1e0459=_0xe1d6ec[_0x478403(0x251)]):(_0x2b6c3f=_0x4a97ad!=0x0?(_0xe1d6ec[_0x478403(0x1dc)]*_0xe1d6ec[_0x478403(0x261)]-_0x35730a[_0x478403(0x30b)]*(_0xe1d6ec[_0x478403(0x261)]-_0x4a97ad)+_0x17322b)/_0x4a97ad:0x0,_0x1e0459=_0xe1d6ec[_0x478403(0x251)]+(_0x35730a['price']-_0xe1d6ec[_0x478403(0x1dc)])*_0x35730a[_0x478403(0x205)]);_0x14b836=(_0x35730a[_0x478403(0x30b)]-_0x2b6c3f-_0x17322b/_0x35730a[_0x478403(0x205)])*_0x4a97ad;let _0x581b21={'coin':_0x35730a[_0x478403(0x211)],'number':_0x4a97ad,'breakeven':formatResult(_0x2b6c3f,0x8),'realized':formatResult(_0x1e0459,0x8),'unrealized':formatResult(_0x14b836,0x8),'fees':formatResult(_0xe1d6ec[_0x478403(0x349)]+_0x17322b,0x8),'sells':_0x35730a[_0x478403(0x285)]==_0x478403(0x2e7)?_0xe1d6ec[_0x478403(0x2ea)]+0x1:_0xe1d6ec[_0x478403(0x2ea)],'buys':_0x35730a[_0x478403(0x285)]==_0x478403(0x304)?_0xe1d6ec['buys']+0x1:_0xe1d6ec['buys']};dbCoinResults[_0x478403(0x2fd)](_0x478403(0x32d))['find']({'coin':_0x35730a[_0x478403(0x211)]})[_0x478403(0x332)](_0x581b21)[_0x478403(0x2ce)]();if(!_0x619475){if(_0x35730a[_0x478403(0x21e)]&&_0x35730a[_0x478403(0x21e)]['currency']==_0x478403(0x1c1)){const _0x1b8c47=currentCoins[_0x478403(0x1f8)](_0x3bcd20=>_0x3bcd20[_0x478403(0x211)]==_0x478403(0x1c1));if(_0x1b8c47){let _0x4649ce=dbCoinResults[_0x478403(0x2fd)](_0x478403(0x32d))[_0x478403(0x1f8)]({'coin':'BNB'})[_0x478403(0x206)]();_0x581b21={..._0x4649ce,'number':_0x1b8c47[_0x478403(0x261)]},dbCoinResults['get']('coins')[_0x478403(0x1f8)]({'coin':_0x478403(0x1c1)})[_0x478403(0x332)](_0x581b21)[_0x478403(0x2ce)]();}}}}async function placeOrder(_0x125111){const _0x38c49c=_0x52fb81,_0x209867=config[_0x38c49c(0x2eb)]==_0x38c49c(0x1ef)?'market':_0x38c49c(0x25e);if(lockOrders==ORDERS[_0x38c49c(0x290)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x38c49c(0x287)],allOrdersPlaced=![],validateOrdersState=_0x38c49c(0x26e);let _0x42c5d1=![];lastOrders=[];for(const _0x3719c7 of _0x125111){let _0x24576d,_0x581041,_0x49fc58,_0x3a83a9,_0x266619,_0x5b0a17=_0x3719c7[_0x38c49c(0x207)];try{const _0x244b38=await exchange[_0x38c49c(0x2a6)](_0x5b0a17);_0x24576d=_0x3719c7[_0x38c49c(0x1d4)]?0x1/_0x3719c7['last']:_0x3719c7[_0x38c49c(0x1bc)],_0x581041=_0x244b38[_0x38c49c(0x1e0)],_0x49fc58=_0x244b38['ask'];_0x3719c7['reverse']?(_0x3a83a9=_0x3719c7[_0x38c49c(0x285)]=='buy'?_0x38c49c(0x2e7):_0x38c49c(0x304),_0x266619=Math['abs'](_0x3719c7[_0x38c49c(0x311)])/_0x24576d):(_0x3a83a9=_0x3719c7[_0x38c49c(0x285)],_0x266619=Math[_0x38c49c(0x2b6)](_0x3719c7[_0x38c49c(0x311)]));_0x209867==_0x38c49c(0x25e)&&(config['ordertype']==_0x38c49c(0x1cb)&&(_0x24576d=_0x3a83a9==_0x38c49c(0x304)?_0x581041:_0x49fc58),config['ordertype']=='limit-low'&&(_0x24576d=_0x3a83a9==_0x38c49c(0x304)?_0x49fc58:_0x581041));_0x266619=formatResult(_0x266619,0x8),_0x24576d=formatResult(_0x24576d,0x8);const _0x3869c9=_0x3a83a9=='sell'?config[_0x38c49c(0x20b)]?String[_0x38c49c(0x2ee)]('0x'+config[_0x38c49c(0x20b)])+'\x20':'':config[_0x38c49c(0x1c7)]?String[_0x38c49c(0x2ee)]('0x'+config[_0x38c49c(0x1c7)])+'\x20':'',_0x6d5a7b=_0x209867=='market'?_0x38c49c(0x2aa):config[_0x38c49c(0x2eb)]==_0x38c49c(0x1cb)?_0x38c49c(0x1d0):_0x38c49c(0x297),_0x5e5934=(Math['floor'](Math[_0x38c49c(0x29d)]()*0x35a4e900)+0x5f5e100)[_0x38c49c(0x307)]();lastOrders[_0x38c49c(0x25d)]({'customId':_0x5e5934,'symbol':_0x5b0a17,'coin':_0x3719c7['coin'],'amount':_0x266619,'price':_0x24576d,'side':_0x3a83a9,'reverse':_0x3719c7[_0x38c49c(0x1d4)],'filled':0x0});if(_0x209867==_0x38c49c(0x1ef))logHistory('order',''+_0x3869c9+_0x6d5a7b+'\x20order:\x20'+_0x5b0a17+'\x20'+_0x3a83a9+'\x20#'+formatResult(_0x266619,0x8)+'\x20@'+formatResult(_0x24576d,0x8));else logHistory(_0x38c49c(0x1d9),''+_0x3869c9+_0x6d5a7b+'\x20order:\x20'+_0x5b0a17+'\x20'+_0x3a83a9+'\x20#'+formatResult(_0x266619,0x8)+'\x20@'+formatResult(_0x24576d,0x8));let _0x28888e;_0x209867==_0x38c49c(0x1ef)?_0x3a83a9==_0x38c49c(0x304)&&[_0x38c49c(0x1e2),'Bitget',_0x38c49c(0x32f),_0x38c49c(0x20c),'Huobipro']['includes'](config[_0x38c49c(0x1dd)])?_0x28888e=await exchange['createOrder'](_0x5b0a17,_0x209867,_0x3a83a9,_0x266619,_0x24576d):_0x28888e=await exchange[_0x38c49c(0x2bc)](_0x5b0a17,_0x209867,_0x3a83a9,_0x266619,undefined):_0x28888e=await exchange[_0x38c49c(0x2bc)](_0x5b0a17,_0x209867,_0x3a83a9,_0x266619,_0x24576d);logger[_0x38c49c(0x249)](_0x38c49c(0x1be)+_0x28888e['id']+_0x38c49c(0x28d)+_0x5e5934);const _0x5a3bdc=lastOrders[_0x38c49c(0x33c)]-0x1;if(_0x5a3bdc>=0x0&&lastOrders[_0x5a3bdc][_0x38c49c(0x1f0)]==_0x5e5934){lastOrders[_0x5a3bdc][_0x38c49c(0x25c)]=_0x28888e['id'];if(_0x28888e[_0x38c49c(0x2f9)])lastOrders[_0x5a3bdc]['amount']=_0x28888e[_0x38c49c(0x2f9)];if(_0x28888e[_0x38c49c(0x30b)])lastOrders[_0x5a3bdc]['price']=_0x28888e[_0x38c49c(0x30b)];lastOrders[_0x5a3bdc][_0x38c49c(0x21e)]=_0x28888e['fee'];}if(config[_0x38c49c(0x301)]!=0x0){let _0x17d2f3=null;if(cooldownTracker[_0x38c49c(0x33c)]==config[_0x38c49c(0x301)]-0x1)_0x17d2f3=cooldownTracker[_0x38c49c(0x272)]();const _0x45f9c5=getTimeStamp();cooldownTracker[_0x38c49c(0x25d)](_0x45f9c5);if(_0x17d2f3){const _0x333073=fns[_0x38c49c(0x1e9)](new Date(_0x45f9c5),new Date(_0x17d2f3));if(_0x333073<cooldownInterval){logHistory('error',_0x38c49c(0x2fe)+config[_0x38c49c(0x301)]+_0x38c49c(0x31e)+cooldownInterval/0x3c+_0x38c49c(0x2b5)+cooldownPeriod/(0xe10*0x3e8)+_0x38c49c(0x31f)),coolingDown=!![];break;}}}}catch(_0x508384){if(_0x508384[_0x38c49c(0x307)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x38c49c(0x20f)](_0x510de9=>_0x510de9[_0x38c49c(0x207)]!=_0x5b0a17),logHistory(_0x38c49c(0x2d1),_0x38c49c(0x279)+_0x5b0a17),_0x42c5d1=!![];else{if(_0x508384['toString']()['includes'](_0x38c49c(0x229)))lastOrders=lastOrders[_0x38c49c(0x20f)](_0xa4a5ed=>_0xa4a5ed[_0x38c49c(0x207)]!=_0x5b0a17),logHistory(_0x38c49c(0x2d1),_0x38c49c(0x2dd)+_0x5b0a17),_0x42c5d1=!![];else{if(_0x508384[_0x38c49c(0x307)]()[_0x38c49c(0x240)]('InvalidOrder'))lastOrders=lastOrders[_0x38c49c(0x20f)](_0xdf801f=>_0xdf801f[_0x38c49c(0x207)]!=_0x5b0a17),logHistory('error',_0x38c49c(0x21b)+_0x5b0a17),logger['debug'](_0x508384),_0x42c5d1=!![];else _0x508384[_0x38c49c(0x307)]()[_0x38c49c(0x240)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x38c49c(0x20f)](_0x1d4a7c=>_0x1d4a7c['symbol']!=_0x5b0a17),logHistory(_0x38c49c(0x2d1),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5b0a17),_0x42c5d1=!![]):(lastOrders=lastOrders['filter'](_0x275d56=>_0x275d56[_0x38c49c(0x207)]!=_0x5b0a17),await handleError(_0x508384,_0x38c49c(0x242),_0x5b0a17));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x38c49c(0x33c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xb5a0f1=config['ordertype']==_0x38c49c(0x1ef)?validateOrderTimeout*0x3c*0x3e8:config[_0x38c49c(0x217)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3885f5=_0x38c49c;validateOrders(_0x3885f5(0x289));},_0xb5a0f1);}else unlockOrders();_0x42c5d1&&config[_0x38c49c(0x292)]&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x38c49c(0x275),_0x38c49c(0x2bd)));}else{if(coolingDown)!config[_0x38c49c(0x292)]&&logHistory(_0x38c49c(0x2d1),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x38c49c(0x290)]&&(!config[_0x38c49c(0x292)]&&(config[_0x38c49c(0x2eb)]=='market'?logHistory(_0x38c49c(0x2d1),_0x38c49c(0x2d6)):logHistory(_0x38c49c(0x2d1),_0x38c49c(0x1d6))));}}function persistOpenOrders(_0x491db9){const _0x2922e8=_0x52fb81,_0x2b3889={...config,'openOrders':_0x491db9};let _0x3d3173=dbConfig[_0x2922e8(0x2fd)]('bot')['find']({'botID':botID})['value']();_0x3d3173&&dbConfig['get'](_0x2922e8(0x26a))[_0x2922e8(0x1f8)]({'botID':botID})['assign'](_0x2b3889)[_0x2922e8(0x2ce)]();}function restoreOrders(){const _0x404d34=_0x52fb81;let _0x3c67e5;config[_0x404d34(0x324)]&&allOpenOrders[_0x404d34(0x228)](_0x196e43=>{const _0x53fc52=_0x404d34,_0x4bae9f=config[_0x53fc52(0x324)][_0x53fc52(0x1f8)](_0x15029d=>_0x15029d['orderId']==_0x196e43['id']);_0x4bae9f&&(lastOrders[_0x53fc52(0x25d)](_0x4bae9f),_0x3c67e5=_0x196e43['timestamp']);});if(lastOrders[_0x404d34(0x33c)]>0x0){lockOrders=ORDERS[_0x404d34(0x287)],validateOrdersState=_0x404d34(0x30e),allOrdersPlaced=!![];const _0x453541=new Date()[_0x404d34(0x319)](),_0x10b907=config[_0x404d34(0x2eb)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x404d34(0x217)]*0x3c*0x3e8;if(_0x3c67e5+_0x10b907>_0x453541){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3c67e5+_0x10b907-_0x453541);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x23d77d=_0x52fb81;if(!coinsLoaded){process[_0x23d77d(0x28a)]({'telegrammsg':_0x23d77d(0x2e8)},_0x3ab0f4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2c18f8='';if(config[_0x23d77d(0x2b3)])_0x2c18f8=_0x23d77d(0x343)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x2c18f8='<b>Bot\x20'+botID+_0x23d77d(0x2c4);const _0x13fc09=getKPIs(_0x23d77d(0x1ce)),_0x114092=getKPIs(_0x23d77d(0x215),config[_0x23d77d(0x215)]),_0x504d6e=getKPIs('net-basecoin'),_0x177c62=getKPIs('net-fiat',config['fiat']);_0x2c18f8+=_0x23d77d(0x2d5),_0x2c18f8+=_0x13fc09[_0x23d77d(0x2c8)]+_0x23d77d(0x22e)+_0x13fc09[_0x23d77d(0x206)]+'\x0a',_0x2c18f8+=_0x13fc09[_0x23d77d(0x26b)]+':\x20'+_0x13fc09[_0x23d77d(0x31b)]+'%\x0a',_0x2c18f8+=_0x114092[_0x23d77d(0x2c8)]+_0x23d77d(0x22e)+_0x114092[_0x23d77d(0x206)]+'\x0a',_0x2c18f8+=_0x114092[_0x23d77d(0x26b)]+':\x20'+_0x114092[_0x23d77d(0x31b)]+'%\x0a',_0x2c18f8+=_0x504d6e[_0x23d77d(0x2c8)]+':\x20'+_0x504d6e[_0x23d77d(0x206)]+'\x20('+config[_0x23d77d(0x1ce)]+')\x0a',_0x2c18f8+=_0x504d6e[_0x23d77d(0x26b)]+':\x20'+_0x504d6e[_0x23d77d(0x31b)]+_0x23d77d(0x295)+config[_0x23d77d(0x1ce)]+')\x0a',_0x2c18f8+=_0x177c62[_0x23d77d(0x2c8)]+':\x20'+_0x177c62['value']+'\x20('+config[_0x23d77d(0x215)]+')\x0a',_0x2c18f8+=_0x177c62[_0x23d77d(0x26b)]+':\x20'+_0x177c62[_0x23d77d(0x31b)]+_0x23d77d(0x295)+config[_0x23d77d(0x215)]+')\x0a',_0x2c18f8+=_0x23d77d(0x1d5),process[_0x23d77d(0x28a)]({'telegrammsg':_0x2c18f8},_0x24f4a3=>{});}async function sendPortfolioTelegram(){const _0x2cc6fb=_0x52fb81;if(!coinsLoaded){process[_0x2cc6fb(0x28a)]({'telegrammsg':_0x2cc6fb(0x2e8)},_0x32b570=>{});return;}let _0x5c589a='';if(config[_0x2cc6fb(0x2b3)])_0x5c589a=_0x2cc6fb(0x343)+config[_0x2cc6fb(0x2b9)]+_0x2cc6fb(0x293);else _0x5c589a=_0x2cc6fb(0x1f7)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5c589a+=_0x2cc6fb(0x2d5),_0x5c589a+=_0x2cc6fb(0x336),_0x5c589a+=_0x2cc6fb(0x346),_0x5c589a+=_0x2cc6fb(0x336),currentCoins[_0x2cc6fb(0x228)](_0x3a3071=>{const _0x1ab30a=_0x2cc6fb;_0x5c589a+=_0x3a3071['coin'][_0x1ab30a(0x23c)](0x7)+'|\x20'+formatPad(_0x3a3071[_0x1ab30a(0x31c)],0x2,0x6)+'|\x20'+formatPad(_0x3a3071[_0x1ab30a(0x326)],0x2,0x6)+'|\x20'+formatPad(_0x3a3071[_0x1ab30a(0x238)]*0x64,0x2,0x6)+'\x0a';}),_0x5c589a+='</pre>',process[_0x2cc6fb(0x28a)]({'telegrammsg':_0x5c589a},_0x2c2ee4=>{});}function formatPad(_0x376754,_0x3b1e58,_0x43b288){const _0x300d19=formatResultString(_0x376754,_0x3b1e58);return _0x300d19?_0x300d19['padStart'](_0x43b288):''['padStart'](_0x43b288);}function logHistory(_0x11aad0,_0x59eee9,_0x49bb35=''){const _0x9dc572=_0x52fb81;logger[_0x9dc572(0x241)](''+_0x59eee9);let _0x179c3b={'time':getTimeStamp(),'type':_0x11aad0,'event':_0x59eee9};dbLogs[_0x9dc572(0x2fd)](_0x9dc572(0x220))['push'](_0x179c3b)[_0x9dc572(0x2ce)]();if(_0x49bb35=='')_0x49bb35=_0x59eee9;proxyEmit(_0x9dc572(0x1c3),{'log':_0x179c3b,'summary':_0x49bb35}),process['send']({'telegram':{..._0x179c3b,'botname':config[_0x9dc572(0x2b9)],'showname':config[_0x9dc572(0x2b3)]}},_0x41a298=>{});}function _0x401a(){const _0x49d98a=['UNLOCKED','\x20API\x20secret\x20is\x20invalid','headless','\x20portfolio:</b>\x20\x0a\x0a','apiKey','%\x20(','bot-','Limit\x20(low-margin)','2.6.0','1\x20-\x20Handle\x20open\x20orders',':\x20Bot\x20','Exception\x20thrown\x20in\x20','timestamp','random','exchange\x20reloaded','1451444mxVViH','USDT','4596110fwBTap','autoliquidity','restart','parse','getCoinNumber()','fetchTicker','\x20API\x20key\x20is\x20invalid','\x20has\x20a\x2024h\x20drop\x20of\x20','highest','Market','loading-canceled','canceled','\x20closed\x20the\x20connection','privateKey','emitHistory','Binance','cancelLoading','Executing\x20exchange\x20reload','showname','ORDERS.UNLOCKING','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','abs','progress','valid','botname','Net\x20','net-fiat','createOrder','Cooldown\x20ended\x20-\x20balancing\x20resumed','storeConfiguration','password','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20>\x20[DEBUG]\x20','decrypt','close','\x20metrics:</b>\x20\x0a\x0a','\x20value','util','isEqual','leftTxt','fetchBalance','USDC','OnMaintenance','BNB/','\x20|\x20','write','substring','exchanges','error','fetchOpenOrders','configuration','storeFiat','<pre>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Error\x20details:','orderstatus','1035510SjmJkj','/EUR','running','No\x20more\x20open\x20orders\x20-\x20','Order\x20amount\x20is\x20invalid:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Reset\x20|\x20','has','589328SqeoOb','RateLimitExceeded','fetchTickers()','message','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','sell','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','usd','sells','ordertype','concat','loadSymbols()','fromCodePoint','\x20not\x20available','Net\x20effect','\x20rejected\x20your\x20API\x20request','RSA-OAEP','findIndex','getPortfolio(0)','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','BUSD','offset','getSeconds','amount','request-time','deleteHistoryAlerts','toFixed','get','Executed\x20','ccxt','warning','cooldown','Resetting\x20bot\x20history','NetworkError','buy','Failed\x20to\x20load\x20coin\x20data\x20for\x20','ORDERS.UNLOCKED','toString','USDP','round','netoffset','price','-events.json','onepagemode','ongoing','total','0\x20-\x20EXECUTION:\x20','trade','***','balancing\x20resumes\x20when\x20cooldown\x20ends','removed','getMonth','enabled','\x20>\x20','ticker','getTime','Mexc','change','distribution','sendMetricsTelegram','\x20orders\x20in\x20less\x20than\x20','\x20hour','Order\x20filled:\x20','stringify','getPortfolio(2)','percentage','openOrders','/output-000.log','target','Crypt','./logs/','startnumber','function','excluded','2709zqRlYa','coins','/USD','Cex','colorscheme','AuthenticationError','assign','DDoSProtection','sha256','\x20|\x20exchange:\x20','-------------------------------\x0a','Cryptocom','Headless:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','toLowerCase','length','\x20|\x20lock\x20orders:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','version','recent20','remove','changes','<b>','exchange\x20not\x20reloaded','-performance.json','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','currency','exec','fees','\x20network\x20error','18PxyFnD','\x20|\x20highest\x20fee:\x20','starting-balance-','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20exchange','Insufficient\x20funds\x20to\x20execute\x20order:\x20','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','last','no\x20open\x20orders','ID:\x20','Error\x20while\x20deleting\x20files:\x20','lowdb/adapters/FileSync','BNB','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','event','Unknown\x20error\x20occured','startdate','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','emojibuy','initclient','placeOrder','\x20not\x20responding','limit-high','createWriteStream','USD','basecoin','Saving\x20configuration','Limit\x20(high-margin)','recreateCoinResults()','recreate','getMinutes','reverse','</pre>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Trigger:\x20','balancing\x20resumed','order','InsufficientFunds','data','breakeven','exchange','Unfilled\x20order(s)\x20canceled\x20after\x20','red_yellow_blue','bid','sort','Bybit','liquidity','fetchClosedOrders','status','stopExchange()','showConfig','PAXG','differenceInSeconds','average','limits','balances','kill','ExchangeNotAvailable','market','customId','path','padStart','eur','getAllOrders()','open','none','<b>Bot\x20','find','min','date','(((.+)+)+)+$','splice','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20/\x20','apiSecret','page','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','uncaughtException','log','Bot\x20','filled','value','symbol','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','configuration-stored','milliseconds','emojisell','Huobi','add','settings','filter','split','coin','search','change24h','Order(s)\x20not\x20validated\x20after\x20','fiat','./config/','timeout',':\x20timer\x20>','constructor','amountToPrecision','Order\x20is\x20invalid:\x20','parseISO','2.3.5','fee','\x20exchange\x20error','logs','ETH','format','getPortfolio','fetchTickers','getCoins()','bb-secure.json','1\x20-\x20Unlock\x20orders','forEach','Invalid\x20quantity','replace','max','string','portfolio','\x20:\x20','./version.json','API-key\x20format\x20invalid','Error:\x20Invalid\x20argument\x20','getFullYear','cost','************','Invalid\x20ACCESS_TIMESTAMP','\x20minutes\x20-\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','delta','startsWith','Portfolio\x20change\x20detected:\x20','OrderNotFound','padEnd','cloneDeep','datetime','11824Oxmimb','includes','full','placeOrder()','closed','keys','added','defaults','spot','yyyy/MM/dd','debug','pro','yyyy-MM-dd\x27T\x27HH:mm:ss','watchTrades','BTC','3694338HdDAbQ','time','cancelOrder','realized','getStartingBalances','indexOf','startprice','type','getOpenOrders()','3yaiycS','set','coin-loading-progress','join','test','orderId','push','limit','mkdirSync','apiPassword','number','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','watchOrders()','timeshift','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','ExchangeError','watchOrders','2\x20-\x20Orders\x20unlocked','Exchange','bot','rightTxt','1\x20-\x20FILLED\x20unknown\x20order:\x20','args','initial','threshold','net-basecoin','loadMarkets','shift','basecoinvalue','entries','success','bb-settings.json','existsSync','228495sKnDug','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','sortBy','bots','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','InvalidNonce','EUR','lowdb','TUSD','ORDERS.LOCKED','recovery','getDate','side','slice','LOCKED','.json','final','send','remainingSymbols','argv','\x20|\x20Custom\x20ID:\x20','/backup/','apply'];_0x401a=function(){return _0x49d98a;};return _0x401a();}function emitHistory(_0x4d5ec8={}){const _0x5aa347=_0x52fb81;Object['keys'](_0x4d5ec8)[_0x5aa347(0x33c)]==0x0&&(_0x4d5ec8={'type':[_0x5aa347(0x1d9),_0x5aa347(0x1c3)],'event':'','page':0x1});if(_0x4d5ec8[_0x5aa347(0x255)][_0x5aa347(0x240)](_0x5aa347(0x1c3)))_0x4d5ec8[_0x5aa347(0x255)][_0x5aa347(0x1fc)](_0x4d5ec8[_0x5aa347(0x255)][_0x5aa347(0x253)]('event'),0x1,_0x5aa347(0x2d1),_0x5aa347(0x300),_0x5aa347(0x275));if(dbLogs[_0x5aa347(0x2e1)](_0x5aa347(0x220))[_0x5aa347(0x206)]()){let _0x1fac7b=dbLogs[_0x5aa347(0x2fd)]('logs')['filter'](_0x4c9e15=>{const _0x138204=_0x5aa347;if(_0x4d5ec8[_0x138204(0x255)]['length']==0x0)return![];else return _0x4d5ec8[_0x138204(0x255)][_0x138204(0x240)](_0x4c9e15[_0x138204(0x255)]);})[_0x5aa347(0x20f)](_0x1bb982=>{const _0x40fe29=_0x5aa347;if(_0x4d5ec8['event']=='')return!![];else return _0x1bb982[_0x40fe29(0x1c3)]['toLowerCase']()[_0x40fe29(0x240)](_0x4d5ec8[_0x40fe29(0x1c3)][_0x40fe29(0x33b)]());})[_0x5aa347(0x27b)](_0x5aa347(0x24f)),_0x215ed0=_0x1fac7b[_0x5aa347(0x206)]()[_0x5aa347(0x33c)];_0x1fac7b=_0x1fac7b[_0x5aa347(0x1d4)]()[_0x5aa347(0x286)]((_0x4d5ec8[_0x5aa347(0x200)]-0x1)*logPageSize,_0x4d5ec8[_0x5aa347(0x200)]*logPageSize-0x1)[_0x5aa347(0x1d4)]()['value'](),proxyEmit('event-history',{'logs':_0x1fac7b,'total':_0x215ed0});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5bd1db){const _0x4d96c3=_0x52fb81;if(dbLogs[_0x4d96c3(0x2e1)](_0x4d96c3(0x220))[_0x4d96c3(0x206)]()){const _0x4130a3=dbLogs[_0x4d96c3(0x2fd)](_0x4d96c3(0x220))[_0x4d96c3(0x27b)]('time')[_0x4d96c3(0x20f)](_0xbf8cfa=>{const _0x1c3b2e=_0x4d96c3;return _0xbf8cfa[_0x1c3b2e(0x255)]==_0x1c3b2e(0x1d9);})[_0x4d96c3(0x206)]();dbLogs[_0x4d96c3(0x2fd)]('logs')[_0x4d96c3(0x341)]()[_0x4d96c3(0x2ce)](),dbLogs['get'](_0x4d96c3(0x220))[_0x4d96c3(0x332)](_0x4130a3)[_0x4d96c3(0x2ce)](),emitHistory(_0x5bd1db);}}async function pauseBot(_0x362ec1=pauseBotInterval){const _0x43be9b=_0x52fb81,_0xba8971=new Date()[_0x43be9b(0x319)]();if(!lastErrorShown||_0xba8971-lastErrorShown>=_0x362ec1){lastErrorShown=_0xba8971;!lastBotPause?(lastBotPause=_0xba8971,consecutivePauses=0x1):(_0xba8971-lastBotPause-_0x362ec1<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x43be9b(0x28a)]({'stop':_0x43be9b(0x2a3)},_0x3f01ba=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x43be9b(0x319)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x362ec1),botPaused=![],reset(!![]);}}}async function killBot(){const _0x2d7833=_0x52fb81;botPaused=!![],await sleep(0x3e8),process[_0x2d7833(0x28a)]({'stop':_0x2d7833(0x1ed)},_0xedabc6=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4e7469,_0x3192c4){const _0x47432b=_0x52fb81;if(botPaused)return;const _0x5eedde=config[_0x47432b(0x1dd)]||_0x47432b(0x269);if(_0x3192c4)logger[_0x47432b(0x249)](_0x47432b(0x29b)+_0x3192c4);const _0x15eb3e=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x4e7469[_0x47432b(0x307)]()[_0x47432b(0x240)](_0x47432b(0x230)))logHistory(_0x47432b(0x2d1),_0x5eedde+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x15eb3e();else{if(_0x4e7469['toString']()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x47432b(0x2d1),_0x5eedde+_0x47432b(0x1c6)),_0x15eb3e();else _0x4e7469['toString']()[_0x47432b(0x240)](_0x47432b(0x331))?(logHistory(_0x47432b(0x2d1),_0x5eedde+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x47432b(0x2d1),_0x47432b(0x2c0)),_0x15eb3e()):await handleError(_0x4e7469,null);}}async function handleError(_0x453195,_0x14337e,_0x45c81a=''){const _0xdde84a=_0x52fb81;if(botPaused)return;const _0xdac913=config['exchange']||_0xdde84a(0x269);if(_0x14337e)logger[_0xdde84a(0x249)](_0xdde84a(0x29b)+_0x14337e);if(_0x453195['toString']()[_0xdde84a(0x240)](_0xdde84a(0x333)))logHistory(_0xdde84a(0x2d1),_0xdac913+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0xdde84a(0x249)](_0xdde84a(0x2d7),_0x453195),await pauseBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)](_0xdde84a(0x2e3)))logHistory(_0xdde84a(0x2d1),_0xdac913+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0xdde84a(0x249)](_0xdde84a(0x2d7),_0x453195),await pauseBot();else{if(_0x453195[_0xdde84a(0x307)]()['includes'](_0xdde84a(0x1ee))||_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)](_0xdde84a(0x2cb)))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x2ef)+pauseBotMsg),await pauseBot();else{if(_0x453195['toString']()[_0xdde84a(0x240)]('RequestTimeout'))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x1ca)+pauseBotMsg),await pauseBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x2ad)+pauseBotMsg),await pauseBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x33b)]()[_0xdde84a(0x240)](_0xdde84a(0x29c))||_0x453195['toString']()['toLowerCase']()[_0xdde84a(0x240)](_0xdde84a(0x2fa))){const _0x143af7=_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x33b)]();let _0x4c6d88=![];if((config[_0xdde84a(0x1dd)]=='Binance'||config[_0xdde84a(0x1dd)]=='Binanceus')&&(_0x143af7[_0xdde84a(0x240)](_0xdde84a(0x208)['toLowerCase']())||_0x143af7[_0xdde84a(0x240)](_0xdde84a(0x201)[_0xdde84a(0x33b)]())))_0x4c6d88=!![];if(config['exchange']=='Kucoin'&&_0x143af7[_0xdde84a(0x240)]('KC-API-TIMESTAMP\x20Invalid'[_0xdde84a(0x33b)]()))_0x4c6d88=!![];if(config['exchange']==_0xdde84a(0x1e2)&&_0x143af7[_0xdde84a(0x240)](_0xdde84a(0x1ba)['toLowerCase']()))_0x4c6d88=!![];if(config[_0xdde84a(0x1dd)]=='Bitget'&&_0x143af7['includes'](_0xdde84a(0x235)['toLowerCase']()))_0x4c6d88=!![];if((config[_0xdde84a(0x1dd)]==_0xdde84a(0x31a)||config[_0xdde84a(0x1dd)]=='Mexc3')&&_0x143af7[_0xdde84a(0x240)]('invalid\x20Request-Time'['toLowerCase']()))_0x4c6d88=!![];_0x4c6d88?logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'+pauseBotMsg):logHistory(_0xdde84a(0x2d1),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains'+pauseBotMsg),logger[_0xdde84a(0x249)](_0xdde84a(0x2d7),_0x453195['toString']()),await pauseBot();}else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)](_0xdde84a(0x27e)))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x2f1)+pauseBotMsg),logger['debug'](_0xdde84a(0x2d7),_0x453195),await pauseBot();else{if(_0x453195 instanceof ccxt[_0xdde84a(0x303)])logHistory('error',_0xdac913+_0xdde84a(0x34a)+pauseBotMsg),logger[_0xdde84a(0x249)](_0xdde84a(0x2d7),_0x453195),await pauseBot();else{if(_0x453195[_0xdde84a(0x307)]()['includes'](_0xdde84a(0x230)))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x2a7)),logHistory(_0xdde84a(0x2d1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x453195['toString']()[_0xdde84a(0x240)](_0xdde84a(0x339)))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x291)),logHistory(_0xdde84a(0x2d1),_0xdde84a(0x2de)),await killBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)](_0xdde84a(0x331)))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x262)),logHistory('error',_0xdde84a(0x2de)),await killBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)]('PermissionDenied'))logHistory(_0xdde84a(0x2d1),_0xdac913+_0xdde84a(0x1bb)),logHistory(_0xdde84a(0x2d1),_0xdde84a(0x2de)),await killBot();else{if(_0x453195[_0xdde84a(0x307)]()[_0xdde84a(0x240)](_0xdde84a(0x1da)))logHistory(_0xdde84a(0x2d1),_0xdde84a(0x1b9)+_0x45c81a);else _0x453195 instanceof ccxt[_0xdde84a(0x266)]?(logHistory('error',_0xdac913+_0xdde84a(0x21f)),logger[_0xdde84a(0x249)]('Error\x20details:',_0x453195)):(logHistory(_0xdde84a(0x2d1),_0xdde84a(0x1c4)+pauseBotMsg),logger['debug']('Error\x20details:',_0x453195),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x27ebdd,_0x6e6dd3){const _0x15c0cb=_0x52fb81;return parseFloat(_0x27ebdd[_0x15c0cb(0x2fc)](_0x6e6dd3));}function formatResultTruncate(_0x57cd7e,_0xd2ca3e){const _0x139131=_0x52fb81;let _0x3b16df=formatResultString(_0x57cd7e,0xa),_0x1c8f82=_0x3b16df[_0x139131(0x253)]('.');return _0x1c8f82!=-0x1&&(_0x3b16df=_0x3b16df[_0x139131(0x286)](0x0,_0x1c8f82+_0xd2ca3e+0x1)),Number(_0x3b16df);}function formatResultString(_0x56fde1,_0x407ccf){const _0x33716f=_0x52fb81;let _0x33e22f;if(!(''+_0x56fde1)['includes']('e'))_0x33e22f=+(Math[_0x33716f(0x309)](_0x56fde1+'e+'+_0x407ccf)+'e-'+_0x407ccf);else{let _0x32e0c3=(''+_0x56fde1)[_0x33716f(0x210)]('e'),_0x140f89='';+_0x32e0c3[0x1]+_0x407ccf>0x0&&(_0x140f89='+'),_0x33e22f=+(Math[_0x33716f(0x309)](+_0x32e0c3[0x0]+'e'+_0x140f89+(+_0x32e0c3[0x1]+_0x407ccf))+'e-'+_0x407ccf);}return Number(_0x33e22f)[_0x33716f(0x2fc)](_0x407ccf);}function getServerTime(){const _0x52f361=_0x52fb81,_0x324fac=new Date();return _0x324fac['getFullYear']()+'/'+(_0x324fac[_0x52f361(0x315)]()+0x1)[_0x52f361(0x307)]()[_0x52f361(0x1f2)](0x2,'0')+'/'+_0x324fac[_0x52f361(0x284)]()[_0x52f361(0x307)]()[_0x52f361(0x1f2)](0x2,'0')+'\x20'+_0x324fac['getHours']()[_0x52f361(0x307)]()[_0x52f361(0x1f2)](0x2,'0')+':'+_0x324fac[_0x52f361(0x1d3)]()['toString']()[_0x52f361(0x1f2)](0x2,'0')+':'+_0x324fac[_0x52f361(0x2f8)]()['toString']()[_0x52f361(0x1f2)](0x2,'0');}function getTimeStamp(){const _0x5a76e5=_0x52fb81,_0x19edf9=shiftedTime();return _0x19edf9[_0x5a76e5(0x232)]()+'/'+(_0x19edf9[_0x5a76e5(0x315)]()+0x1)['toString']()[_0x5a76e5(0x1f2)](0x2,'0')+'/'+_0x19edf9[_0x5a76e5(0x284)]()[_0x5a76e5(0x307)]()[_0x5a76e5(0x1f2)](0x2,'0')+'\x20'+_0x19edf9['getHours']()['toString']()[_0x5a76e5(0x1f2)](0x2,'0')+':'+_0x19edf9[_0x5a76e5(0x1d3)]()[_0x5a76e5(0x307)]()['padStart'](0x2,'0')+':'+_0x19edf9[_0x5a76e5(0x2f8)]()[_0x5a76e5(0x307)]()['padStart'](0x2,'0');}function getDate(){const _0x2a7f3a=_0x52fb81,_0x3b0b59=shiftedTime();return _0x3b0b59['getFullYear']()+'/'+(_0x3b0b59['getMonth']()+0x1)['toString']()[_0x2a7f3a(0x1f2)](0x2,'0')+'/'+_0x3b0b59[_0x2a7f3a(0x284)]()[_0x2a7f3a(0x307)]()[_0x2a7f3a(0x1f2)](0x2,'0');}function getHour(){const _0x3726f5=_0x52fb81,_0x49fda2=shiftedTime();return _0x49fda2['getHours']()['toString']()[_0x3726f5(0x1f2)](0x2,'0');}function sleep(_0x3624c9){return new Promise(_0x395893=>setTimeout(_0x395893,_0x3624c9));}function shiftedTime(){const _0x39d721=_0x52fb81,_0x516f93=new Date();let _0x2154d2=_0x516f93;if(config&&config[_0x39d721(0x264)]!==0x0)_0x2154d2=fns[_0x39d721(0x20d)](_0x516f93,{'hours':config[_0x39d721(0x264)]});return _0x2154d2;}function timer(_0x5e552c){const _0x5dce5b=_0x52fb81,_0x568062=new Date();!lasttime?console[_0x5dce5b(0x203)](getTimeStamp()+_0x5dce5b(0x218),_0x5e552c,_0x568062):console['log'](getTimeStamp()+_0x5dce5b(0x218),_0x5e552c,(_0x568062-lasttime)/0x3e8),lasttime=_0x568062;}