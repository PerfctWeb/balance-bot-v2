const _0x348d22=_0x5237;(function(_0x16d557,_0x2c8c9a){const _0x2f0cb5=_0x5237,_0x5c488f=_0x16d557();while(!![]){try{const _0x54a5f0=-parseInt(_0x2f0cb5(0x253))/0x1+-parseInt(_0x2f0cb5(0x1ff))/0x2+-parseInt(_0x2f0cb5(0x175))/0x3*(-parseInt(_0x2f0cb5(0x244))/0x4)+-parseInt(_0x2f0cb5(0x20d))/0x5*(-parseInt(_0x2f0cb5(0x21c))/0x6)+-parseInt(_0x2f0cb5(0x263))/0x7+parseInt(_0x2f0cb5(0x19e))/0x8*(parseInt(_0x2f0cb5(0x1c8))/0x9)+parseInt(_0x2f0cb5(0x1a5))/0xa*(parseInt(_0x2f0cb5(0x180))/0xb);if(_0x54a5f0===_0x2c8c9a)break;else _0x5c488f['push'](_0x5c488f['shift']());}catch(_0x3df317){_0x5c488f['push'](_0x5c488f['shift']());}}}(_0x1775,0x510e7));const _0x543b33=function(){let _0x7df2d7=!![];return function(_0x49c8ed,_0x5a2158){const _0x7f645f=_0x7df2d7?function(){if(_0x5a2158){const _0x571451=_0x5a2158['apply'](_0x49c8ed,arguments);return _0x5a2158=null,_0x571451;}}:function(){};return _0x7df2d7=![],_0x7f645f;};}(),_0x80bcb2=_0x543b33(this,function(){const _0x16c33e=_0x5237;return _0x80bcb2[_0x16c33e(0x1f2)]()[_0x16c33e(0x205)](_0x16c33e(0x1ea))['toString']()[_0x16c33e(0x184)](_0x80bcb2)[_0x16c33e(0x205)](_0x16c33e(0x1ea));});_0x80bcb2();'use strict';const ccxt=require(_0x348d22(0x1d3)),low=require(_0x348d22(0x1fe)),FileSync=require(_0x348d22(0x259)),fs=require('fs'),fns=require(_0x348d22(0x185)),{WebsocketClient,DefaultLogger}=require(_0x348d22(0x189)),Crypt=require('hybrid-crypto-js')[_0x348d22(0x23f)];let exchange,wsClient;global[_0x348d22(0x1ef)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x348d22(0x232)],botID=process[_0x348d22(0x1e9)][0x2]||_0x348d22(0x236),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x348d22(0x1a1)),process[_0x348d22(0x22e)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x348d22(0x1e4)+userID+'/':_0x348d22(0x1e4);!fs['existsSync'](configpath)&&fs[_0x348d22(0x1fd)](configpath);const configfile=configpath+_0x348d22(0x26a)+botID+_0x348d22(0x219),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x348d22(0x26a)+botID+_0x348d22(0x229),coinresultsfile=configpath+_0x348d22(0x26a)+botID+_0x348d22(0x195),settingsfile=configpath+_0x348d22(0x1f6),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x348d22(0x223)]({'logs':[]})[_0x348d22(0x18a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x348d22(0x223)]({'data':[]})[_0x348d22(0x18a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x348d22(0x223)]({'bot':[]})[_0x348d22(0x18a)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x348d22(0x223)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x348d22(0x1df),'symbol':_0x348d22(0x172)},'usd':{'coin':_0x348d22(0x173),'symbol':_0x348d22(0x165)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x4d59dc)=>{},'debug':(..._0x47fd68)=>{},'notice':(..._0x2ca1c1)=>{},'info':(..._0x3a29c3)=>{},'warning':(..._0x54e8fd)=>{},'error':async function(..._0x14502c){const _0xd6c123=_0x348d22,_0x51d3cb=new Date()[_0xd6c123(0x190)]();if(!lastErrorShown||_0x51d3cb-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0xd6c123(0x220),_0xd6c123(0x16f)+consecutivePauses+_0xd6c123(0x241));let _0x566850='';if(_0x14502c[0x0])_0x566850+=_0x14502c[0x0];if(_0x14502c[0x1]&&_0x14502c[0x1][_0xd6c123(0x220)]&&_0x14502c[0x1][_0xd6c123(0x220)][_0xd6c123(0x177)])_0x566850+='\x20-\x20'+_0x14502c[0x1]['error'][_0xd6c123(0x177)];logging(_0xd6c123(0x16f)+consecutivePauses+_0xd6c123(0x1c5),''+_0x566850),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x348d22(0x266),'rsaStandard':_0x348d22(0x24e)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x348d22(0x23a)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process['send']({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x1b098c,_0x2a5b88=null){const _0x4c1b98=_0x348d22;process[_0x4c1b98(0x201)]({'function':_0x1b098c,'args':_0x2a5b88});}function initializeProcessListeners(){process['on']('message',_0x3f057d=>{const _0x5759a5=_0x5237;switch(Object[_0x5759a5(0x260)](_0x3f057d)[0x0]){case _0x5759a5(0x23a):_0x3f057d['timeshift']!=undefined&&(settings[_0x5759a5(0x23a)]=_0x3f057d[_0x5759a5(0x23a)],updateTimeshift(settings[_0x5759a5(0x23a)]));break;case _0x5759a5(0x1b7):switch(_0x3f057d[_0x5759a5(0x1b7)]){case _0x5759a5(0x1ad):initclient();break;case _0x5759a5(0x23d):emitHistory(_0x3f057d[_0x5759a5(0x160)]);break;case _0x5759a5(0x1e2):getPortfolio(_0x3f057d[_0x5759a5(0x160)]);break;case _0x5759a5(0x1cb):storeConfiguration(_0x3f057d[_0x5759a5(0x160)]);break;case _0x5759a5(0x21d):storeHeadless(_0x3f057d[_0x5759a5(0x160)]);break;case _0x5759a5(0x20f):getStartingBalances();break;case _0x5759a5(0x265):placeOrder(_0x3f057d[_0x5759a5(0x160)]);break;case _0x5759a5(0x15f):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x101ea3=_0x348d22;if(pidBalances)clearTimeout(pidBalances);if(config[_0x101ea3(0x188)]!=''){await initExchange(config['apiKey'],config[_0x101ea3(0x1c4)]);let _0x1f7fcc=await loadSymbols();_0x1f7fcc&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4f8d55,_0xf1bc90){const _0x4ac586=_0x348d22,_0x32985b=ccxt[config[_0x4ac586(0x1f0)]];let _0x127f05;switch(config[_0x4ac586(0x1f0)]){case _0x4ac586(0x189):_0x127f05=_0x4ac586(0x25c);break;case _0x4ac586(0x1b2):_0x127f05=_0x4ac586(0x246);break;default:_0x127f05=_0x4ac586(0x25c);}exchange=new _0x32985b({'apiKey':_0x4f8d55,'secret':_0xf1bc90,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4f8d55,'api_secret':_0xf1bc90,'beautify':!![],'wsUrl':_0x127f05},logger),config[_0x4ac586(0x1f0)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x4ac586(0x193),'symbol':_0x4ac586(0x208)},'usd':{'coin':_0x4ac586(0x173),'symbol':_0x4ac586(0x165)}});}async function loadSymbols(){const _0xbf0019=_0x348d22;let _0xea100d;try{markets=await exchange['loadMarkets']();const _0x14ec75=[_0xbf0019(0x1d6),'HOT/BTC',_0xbf0019(0x25f)];allSymbols=exchange[_0xbf0019(0x196)]['filter'](_0x1c9cd6=>{const _0x1f2267=_0xbf0019;let _0xa827a3=![];return _0x14ec75[_0x1f2267(0x228)](_0x660aad=>{const _0x176914=_0x1f2267;if(_0x1c9cd6[_0x176914(0x1e1)](_0x660aad))_0xa827a3=!![];}),!_0xa827a3;}),_0xea100d=!![];}catch(_0x57f45c){await handleError(_0x57f45c,_0xbf0019(0x1f7)),_0xea100d=![];}return _0xea100d;}async function initbot(){const _0x5af687=_0x348d22;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2a9861=dbCoinResults[_0x5af687(0x216)](_0x5af687(0x243))[_0x5af687(0x1b8)]();if(_0x2a9861['length']==0x0)await resetCoinResults();}async function initclient(){const _0x2f6ae5=_0x348d22;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2f6ae5(0x19b),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x504377=_0x348d22;wsinitialized=![];ws1&&(ws1['forEach'](_0x50182d=>{try{wsClient['closeWs'](_0x50182d);}catch(_0x183cd9){}}),ws1=[]);if(ws2){try{wsClient[_0x504377(0x235)](ws2);}catch(_0x390d6f){}ws2=null;}}async function initws(){const _0x38d606=_0x348d22;cleanws();let _0x1e4934=[];currentCoins[_0x38d606(0x228)](_0x4f1186=>{const _0x420159=_0x38d606;if(_0x4f1186['coin']!=config['basecoin'])_0x1e4934[_0x420159(0x24a)](noslash(_0x4f1186[_0x420159(0x164)]));});if(!_0x1e4934[_0x38d606(0x1e1)](stablecoins[_0x38d606(0x17c)][_0x38d606(0x257)]))_0x1e4934['push'](stablecoins[_0x38d606(0x17c)][_0x38d606(0x257)]);if(!_0x1e4934[_0x38d606(0x1e1)](stablecoins['usd'][_0x38d606(0x257)]))_0x1e4934[_0x38d606(0x24a)](stablecoins[_0x38d606(0x168)][_0x38d606(0x257)]);if(!_0x1e4934['includes'](_0x38d606(0x1fa)+config[_0x38d606(0x212)]))_0x1e4934[_0x38d606(0x24a)]('BNB'+config['basecoin']);try{_0x1e4934[_0x38d606(0x228)]((_0x209b2f,_0x55390d)=>{ws1[_0x55390d]=wsClient['subscribeSpotKline'](_0x209b2f,'1m');}),ws2=wsClient[_0x38d606(0x176)](),wsClient['on'](_0x38d606(0x24d),_0x33cb6e=>{const _0x2ca9fc=_0x38d606;if(!Array[_0x2ca9fc(0x1f4)](_0x33cb6e)&&!_0x33cb6e[_0x2ca9fc(0x233)][_0x2ca9fc(0x1e1)]('userData')){if(_0x33cb6e[_0x2ca9fc(0x179)]===_0x2ca9fc(0x240)){global['ticker'][_0x33cb6e[_0x2ca9fc(0x240)][_0x2ca9fc(0x164)]]=_0x33cb6e[_0x2ca9fc(0x240)]['close'];return;}}else{if(!Array[_0x2ca9fc(0x1f4)](_0x33cb6e)&&_0x33cb6e['wsKey'][_0x2ca9fc(0x1e1)](_0x2ca9fc(0x1a7))){if(_0x33cb6e[_0x2ca9fc(0x169)][_0x2ca9fc(0x1e1)]('spot')){updateNumberCoins(_0x33cb6e);return;}}}}),wsClient['on']('reconnected',async _0x2f3d52=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x43ac2c){await handleError(_0x43ac2c,_0x38d606(0x1d7));}let _0x3e80ae,_0x3b7576=0x0;loading[_0x38d606(0x267)]=[];let _0x170725=0x0;currentCoins[_0x38d606(0x228)](_0x543104=>{const _0x229403=_0x38d606;if(_0x543104[_0x229403(0x257)]!=config['basecoin'])loading['remainingSymbols']['push'](_0x543104[_0x229403(0x164)]);}),loadingCanceled=![];while(_0x3e80ae!=currentCoins[_0x38d606(0x197)]-0x1){_0x3e80ae=0x0,currentCoins['forEach'](_0x5e0a28=>{const _0x4e13df=_0x38d606;_0x5e0a28[_0x4e13df(0x257)]!=config['basecoin']&&global[_0x4e13df(0x1ef)][noslash(_0x5e0a28[_0x4e13df(0x164)])]&&(loading[_0x4e13df(0x267)]=loading['remainingSymbols'][_0x4e13df(0x1f8)](_0x71cf84=>_0x71cf84!=_0x5e0a28[_0x4e13df(0x164)]),_0x3e80ae++);}),loading[_0x38d606(0x15d)]=Math['round'](_0x3e80ae/(currentCoins[_0x38d606(0x197)]-0x1)*0x64);_0x170725>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x38d606(0x1a2)]=!![],emitLoadingProgress();break;}else _0x3e80ae!=_0x3b7576&&(_0x3b7576=_0x3e80ae,emitLoadingProgress()),_0x170725++,await sleep(0xc8);}if(_0x3e80ae==currentCoins[_0x38d606(0x197)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x5740bb=_0x348d22;proxyEmit(_0x5740bb(0x1a3),loading);}async function getFiat(){const _0x705938=_0x348d22;let _0x57b096=0x0,_0x1ab0bc=0x0;try{_0x57b096=global[_0x705938(0x1ef)][stablecoins[_0x705938(0x17c)][_0x705938(0x257)]],_0x1ab0bc=global['ticker'][stablecoins[_0x705938(0x168)][_0x705938(0x257)]];}catch(_0x40d979){await handleError(_0x40d979,_0x705938(0x1b0));}return{'eur':Number(_0x57b096),'usd':Number(_0x1ab0bc)};}async function setStartDatePerformance(_0x50057e){const _0x2bb609=_0x348d22,_0x5db7f7=fns['format'](new Date(_0x50057e[_0x2bb609(0x200)]),_0x2bb609(0x198));let _0x5d9b66=[];_0x5d9b66[stablecoins['eur'][_0x2bb609(0x257)]]=await getCloses(stablecoins[_0x2bb609(0x17c)][_0x2bb609(0x164)],new Date(_0x50057e['startdate']),0x1),_0x5d9b66[stablecoins[_0x2bb609(0x168)][_0x2bb609(0x257)]]=await getCloses(stablecoins[_0x2bb609(0x168)][_0x2bb609(0x164)],new Date(_0x50057e[_0x2bb609(0x200)]),0x1);let _0x55ef68,_0x2ba311=[];_0x50057e['portfolio'][_0x2bb609(0x228)](_0x39650f=>{const _0x14c229=_0x2bb609;!_0x39650f[_0x14c229(0x187)]&&_0x2ba311['push']({'coin':_0x39650f[_0x14c229(0x257)],'number':_0x39650f[_0x14c229(0x1a6)],'price':_0x39650f[_0x14c229(0x17b)]});}),_0x55ef68={'date':_0x5db7f7,'eur':_0x5d9b66[stablecoins[_0x2bb609(0x17c)]['coin']][0x0],'usd':_0x5d9b66[stablecoins[_0x2bb609(0x168)]['coin']][0x0],'coins':_0x2ba311};let _0x57de00=dbPerformance[_0x2bb609(0x216)]('data')['find']({'date':_0x5db7f7})[_0x2bb609(0x1b8)]();_0x57de00?dbPerformance[_0x2bb609(0x216)](_0x2bb609(0x24b))[_0x2bb609(0x268)]({'date':_0x5db7f7})[_0x2bb609(0x16a)](_0x55ef68)[_0x2bb609(0x18a)]():dbPerformance[_0x2bb609(0x216)](_0x2bb609(0x24b))[_0x2bb609(0x24a)](_0x55ef68)[_0x2bb609(0x18a)](),_0x57de00=dbPerformance[_0x2bb609(0x216)](_0x2bb609(0x24b))[_0x2bb609(0x1d8)]('date')['value'](),_0x57de00[_0x2bb609(0x228)](_0x51abcc=>{const _0x2dcedb=_0x2bb609;_0x51abcc[_0x2dcedb(0x1ec)]<_0x5db7f7&&dbPerformance[_0x2dcedb(0x216)](_0x2dcedb(0x24b))[_0x2dcedb(0x1e8)]({'date':_0x51abcc[_0x2dcedb(0x1ec)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1086c0){const _0xa331ca=_0x348d22;let _0x25cb85,_0x2a69e8=[];logHistory(_0xa331ca(0x1f1),_0xa331ca(0x191)),_0x1086c0[_0xa331ca(0x192)][_0xa331ca(0x228)](_0x41373f=>{const _0x13c76f=_0xa331ca;if(_0x41373f['coin']!=config[_0x13c76f(0x212)]&&!_0x41373f[_0x13c76f(0x187)])_0x2a69e8[_0x13c76f(0x24a)]({'coin':_0x41373f['coin'],'symbol':_0x41373f['symbol']});});let _0x58ccfd=[];try{const _0x1c4fc7=fns[_0xa331ca(0x1b9)](fns[_0xa331ca(0x261)](_0x1086c0[_0xa331ca(0x200)][_0xa331ca(0x1cd)](/\//g,'-')),_0xa331ca(0x22b));for(const _0x3a408a of _0x2a69e8){if(_0x3a408a['coin']!=config[_0xa331ca(0x212)])_0x25cb85=await exchange[_0xa331ca(0x1e6)](_0x3a408a['symbol'],Date[_0xa331ca(0x18b)](_0x1c4fc7));_0x25cb85[_0xa331ca(0x228)](_0x171d0b=>{const _0x2f9cf1=_0xa331ca,_0x3c2849=_0x3a408a[_0x2f9cf1(0x164)][_0x2f9cf1(0x1e1)](config[_0x2f9cf1(0x212)]+'/'),_0x2442a9=fns[_0x2f9cf1(0x1b9)](fns[_0x2f9cf1(0x261)](_0x171d0b[_0x2f9cf1(0x15e)]),_0x2f9cf1(0x16e)),_0x1c1f0b=fns[_0x2f9cf1(0x1b9)](fns[_0x2f9cf1(0x261)](_0x171d0b[_0x2f9cf1(0x15e)]),_0x2f9cf1(0x198));let _0x2351dc;if(_0x171d0b['side']==_0x2f9cf1(0x1f9)&&_0x3c2849==![])_0x2351dc=_0x171d0b[_0x2f9cf1(0x1a0)];if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x1f9)&&_0x3c2849==!![])_0x2351dc=-_0x171d0b[_0x2f9cf1(0x1a0)]*_0x171d0b[_0x2f9cf1(0x178)];if(_0x171d0b[_0x2f9cf1(0x210)]=='sell'&&_0x3c2849==![])_0x2351dc=-_0x171d0b[_0x2f9cf1(0x1a0)];if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x215)&&_0x3c2849==!![])_0x2351dc=_0x171d0b[_0x2f9cf1(0x1a0)]*_0x171d0b[_0x2f9cf1(0x178)];_0x58ccfd[_0x2f9cf1(0x24a)]({'timestamp':_0x2442a9,'date':_0x1c1f0b,'coin':_0x3a408a[_0x2f9cf1(0x257)],'symbol':_0x3a408a[_0x2f9cf1(0x164)],'type':_0x171d0b[_0x2f9cf1(0x170)],'side':_0x171d0b[_0x2f9cf1(0x210)],'reverse':_0x3c2849,'amount':formatResult(_0x171d0b[_0x2f9cf1(0x224)],0x8),'filled':formatResult(_0x171d0b[_0x2f9cf1(0x224)],0x8),'coinamount':formatResult(_0x2351dc,0x8),'price':formatResult(_0x171d0b[_0x2f9cf1(0x178)],0x8)});let _0xa911bf;if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x1f9)&&_0x3c2849==![])_0xa911bf=-_0x171d0b[_0x2f9cf1(0x1a0)]*_0x171d0b['price'];if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x1f9)&&_0x3c2849==!![])_0xa911bf=_0x171d0b['amount'];if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x215)&&_0x3c2849==![])_0xa911bf=_0x171d0b[_0x2f9cf1(0x1a0)]*_0x171d0b[_0x2f9cf1(0x178)];if(_0x171d0b[_0x2f9cf1(0x210)]==_0x2f9cf1(0x215)&&_0x3c2849==!![])_0xa911bf=-_0x171d0b[_0x2f9cf1(0x1a0)];_0x58ccfd['push']({'date':_0x1c1f0b,'coin':config['basecoin'],'coinamount':formatResult(_0xa911bf,0x8)});});}_0x58ccfd['sort']((_0x2886f,_0x3a992f)=>_0x2886f[_0xa331ca(0x250)]>_0x3a992f[_0xa331ca(0x250)]?0x1:_0x3a992f[_0xa331ca(0x250)]>_0x2886f[_0xa331ca(0x250)]?-0x1:0x0),dbLogs[_0xa331ca(0x216)]('logs')['remove']()[_0xa331ca(0x18a)](),_0x58ccfd[_0xa331ca(0x228)](_0x3ac2bd=>{const _0x41e137=_0xa331ca;let _0x5aeee3;_0x3ac2bd[_0x41e137(0x257)]!=config[_0x41e137(0x212)]&&(_0x5aeee3={'time':_0x3ac2bd[_0x41e137(0x250)],'type':'order','event':_0x41e137(0x1a4)+_0x3ac2bd[_0x41e137(0x164)]+'\x20'+_0x3ac2bd[_0x41e137(0x210)]+'\x20#'+_0x3ac2bd[_0x41e137(0x1a0)]+'\x20@'+_0x3ac2bd[_0x41e137(0x178)]},dbLogs[_0x41e137(0x216)](_0x41e137(0x1ae))[_0x41e137(0x24a)](_0x5aeee3)[_0x41e137(0x18a)]());});const _0x4c27d1=fns['eachDayOfInterval']({'start':new Date(_0x1086c0['startdate']),'end':new Date()})[_0xa331ca(0x19d)](_0x428f17=>fns[_0xa331ca(0x1b9)](_0x428f17,_0xa331ca(0x198)));let _0x57484b=[];_0x1086c0['portfolio'][_0xa331ca(0x228)](_0x291a25=>{const _0x1fcea4=_0xa331ca;if(!_0x291a25[_0x1fcea4(0x187)]){_0x57484b[_0x291a25['coin']]=[];let _0x4852d6=_0x291a25[_0x1fcea4(0x1a6)];_0x4c27d1[_0x1fcea4(0x228)]((_0xe49b79,_0x458eba)=>{const _0x3be6ff=_0x1fcea4;let _0x23b7c3=_0x58ccfd[_0x3be6ff(0x1f8)](_0x4d16bf=>_0x4d16bf[_0x3be6ff(0x257)]==_0x291a25[_0x3be6ff(0x257)]&&_0x4d16bf[_0x3be6ff(0x1ec)]==_0xe49b79);if(_0x23b7c3[_0x3be6ff(0x197)]!=0x0){let _0x2911c4=_0x23b7c3['reduce']((_0x312b6c,_0x372d32)=>{const _0x5e70df=_0x3be6ff;return _0x312b6c+=_0x372d32[_0x5e70df(0x234)],_0x312b6c;},0x0);_0x4852d6+=_0x2911c4;}_0x57484b[_0x291a25[_0x3be6ff(0x257)]][_0xe49b79]=_0x4852d6;});}});const _0x40fe38=[..._0x2a69e8];_0x40fe38[_0xa331ca(0x24a)]({'coin':stablecoins[_0xa331ca(0x17c)][_0xa331ca(0x257)],'symbol':stablecoins[_0xa331ca(0x17c)][_0xa331ca(0x164)]}),_0x40fe38['push']({'coin':stablecoins[_0xa331ca(0x168)]['coin'],'symbol':stablecoins[_0xa331ca(0x168)][_0xa331ca(0x164)]});let _0x4e6052=[];for(const _0x28f230 of _0x40fe38){_0x4e6052[_0x28f230[_0xa331ca(0x257)]]=await getCloses(_0x28f230[_0xa331ca(0x164)],new Date(_0x1086c0[_0xa331ca(0x200)]));}dbPerformance[_0xa331ca(0x216)](_0xa331ca(0x24b))[_0xa331ca(0x1e8)]()[_0xa331ca(0x18a)](),_0x4c27d1[_0xa331ca(0x228)]((_0x3ced70,_0x2fdf6d)=>{const _0x1854e0=_0xa331ca;let _0x214bc2,_0x26f4b2=[];_0x2fdf6d==0x0?(_0x1086c0[_0x1854e0(0x192)]['forEach'](_0x3a3e78=>{const _0x128348=_0x1854e0;!_0x3a3e78[_0x128348(0x187)]&&_0x26f4b2[_0x128348(0x24a)]({'coin':_0x3a3e78[_0x128348(0x257)],'number':_0x3a3e78[_0x128348(0x1a6)],'price':_0x3a3e78['startprice']});}),_0x214bc2={'date':_0x3ced70,'eur':_0x4e6052[stablecoins[_0x1854e0(0x17c)][_0x1854e0(0x257)]][_0x2fdf6d],'usd':_0x4e6052[stablecoins[_0x1854e0(0x168)][_0x1854e0(0x257)]][_0x2fdf6d],'coins':_0x26f4b2}):(_0x1086c0[_0x1854e0(0x192)][_0x1854e0(0x228)](_0x139a70=>{const _0x48c2da=_0x1854e0;!_0x139a70['excluded']&&_0x26f4b2[_0x48c2da(0x24a)]({'coin':_0x139a70[_0x48c2da(0x257)],'number':_0x57484b[_0x139a70['coin']][_0x3ced70],'price':_0x139a70['coin']==config['basecoin']?0x1:_0x4e6052[_0x139a70['coin']][_0x2fdf6d]});}),_0x214bc2={'date':_0x3ced70,'eur':_0x4e6052[stablecoins[_0x1854e0(0x17c)][_0x1854e0(0x257)]][_0x2fdf6d],'usd':_0x4e6052[stablecoins[_0x1854e0(0x168)]['coin']][_0x2fdf6d],'coins':_0x26f4b2}),dbPerformance[_0x1854e0(0x216)](_0x1854e0(0x24b))[_0x1854e0(0x24a)](_0x214bc2)[_0x1854e0(0x18a)]();}),emitPerformance(),await resetCoinResults();for(let _0x1ae722 of _0x58ccfd){_0x1ae722[_0xa331ca(0x257)]!=config[_0xa331ca(0x212)]&&await updateCoinResults(_0x1ae722);}logHistory(_0xa331ca(0x1f1),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x5b1023){await handleError(_0x5b1023,'recreateHistory()');}}async function getCloses(_0x3aec5c,_0x34d5ab,_0x33ccbf=undefined){const _0x18ad62=_0x348d22,_0x1b4cd3='1d';let _0x4bbe7d,_0x82cd41;const _0x4f3c02=fns[_0x18ad62(0x16c)](new Date(),_0x34d5ab)+0x1;try{const _0x2590a1=exchange[_0x18ad62(0x1e7)]()-_0x4f3c02*0x18*0xe10*0x3e8;_0x4bbe7d=await exchange[_0x18ad62(0x1c6)](_0x3aec5c,_0x1b4cd3,_0x2590a1,_0x33ccbf),_0x82cd41=await exchange[_0x18ad62(0x1f5)](_0x3aec5c);}catch(_0x3ffb24){await handleError(_0x3ffb24,_0x18ad62(0x256));}let _0x39a3bd=ohlcvToCloses(_0x4bbe7d);return _0x39a3bd[_0x18ad62(0x24a)](_0x82cd41[_0x3aec5c]['last']),_0x39a3bd;}function ohlcvToCloses(_0x49ffe3){let _0x3d5b16=[];return _0x49ffe3['forEach'](function(_0x274710){const _0x14fd68=_0x5237;_0x3d5b16[_0x14fd68(0x24a)](_0x274710[0x4]);}),_0x3d5b16;}function getConfiguration(_0x13cf5d){const _0x563e6e=_0x348d22;let _0x12f337=dbConfig[_0x563e6e(0x216)]('bot')[_0x563e6e(0x268)]({'botID':_0x13cf5d})[_0x563e6e(0x1b8)]();if(_0x12f337){let _0x12249b=![];!_0x12f337[_0x563e6e(0x1f0)]&&(_0x12f337={..._0x12f337,'exchange':'binance'},_0x12249b=!![]),!_0x12f337['basecoin']&&(_0x12f337={..._0x12f337,'basecoin':_0x563e6e(0x1d1)},_0x12249b=!![]),!_0x12f337[_0x563e6e(0x1bd)]&&(_0x12f337={..._0x12f337,'ordertype':_0x563e6e(0x19f)},_0x12249b=!![]),!_0x12f337[_0x563e6e(0x163)]&&(_0x12f337={..._0x12f337,'timeout':0x14},_0x12249b=!![]),!_0x12f337[_0x563e6e(0x252)]&&(_0x12f337={..._0x12f337,'emojibuy':''},_0x12249b=!![]),!_0x12f337[_0x563e6e(0x171)]&&(_0x12f337={..._0x12f337,'emojisell':''},_0x12249b=!![]),!_0x12f337['showname']&&(_0x12f337={..._0x12f337,'showname':![]},_0x12249b=!![]),_0x12249b&&(_0x12f337={'botID':_0x12f337['botID'],'exchange':_0x12f337['exchange'],'apiKey':_0x12f337[_0x563e6e(0x188)],'apiSecret':_0x12f337[_0x563e6e(0x1c4)],'basecoin':_0x12f337[_0x563e6e(0x212)],'botname':_0x12f337[_0x563e6e(0x23b)],'showname':_0x12f337[_0x563e6e(0x1c1)],'threshold':_0x12f337[_0x563e6e(0x167)],'ordertype':_0x12f337[_0x563e6e(0x1bd)],'timeout':_0x12f337[_0x563e6e(0x163)],'startdate':_0x12f337['startdate'],'recreate':_0x12f337[_0x563e6e(0x17e)],'timeshift':_0x12f337[_0x563e6e(0x23a)],'headless':_0x12f337[_0x563e6e(0x1d0)],'cooldown':_0x12f337['cooldown'],'emojibuy':_0x12f337['emojibuy'],'emojisell':_0x12f337[_0x563e6e(0x171)],'portfolio':_0x12f337[_0x563e6e(0x192)]},dbConfig[_0x563e6e(0x216)]('bot')[_0x563e6e(0x1e8)]()[_0x563e6e(0x18a)](),dbConfig[_0x563e6e(0x216)](_0x563e6e(0x221))['push'](_0x12f337)[_0x563e6e(0x18a)]());}else _0x12f337={'botID':_0x13cf5d,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':_0x563e6e(0x1eb)+_0x13cf5d,'showname':![],'threshold':'3','ordertype':_0x563e6e(0x19f),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x563e6e(0x23a)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x12f337;}function emittedConfiguration(){const _0x46f5b1=_0x348d22;let _0x2d1d24;return config[_0x46f5b1(0x188)]==''?_0x2d1d24=config:_0x2d1d24={...config,'apiKey':_0x46f5b1(0x1cc),'apiSecret':_0x46f5b1(0x1cc)},_0x2d1d24;}function getSettings(){const _0x2c7582=_0x348d22;return dbSettings[_0x2c7582(0x216)](_0x2c7582(0x1b5))[_0x2c7582(0x1b8)]();}function getSecure(){const _0x26c3f7=_0x348d22;return dbSecure[_0x26c3f7(0x216)](_0x26c3f7(0x20a))['value']()||{};}function updateTimeshift(_0x11dea5){const _0x456625=_0x348d22;let _0x82fb5c=dbConfig['get'](_0x456625(0x221))[_0x456625(0x268)]({'botID':botID})[_0x456625(0x1b8)]();_0x82fb5c&&dbConfig[_0x456625(0x216)](_0x456625(0x221))['find']({'botID':botID})[_0x456625(0x16a)]({'timeshift':_0x11dea5})[_0x456625(0x18a)](),config[_0x456625(0x23a)]=_0x11dea5,proxyEmit(_0x456625(0x199),emittedConfiguration());}async function storeConfiguration(_0x2ee949){const _0x578bc5=_0x348d22;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x59d8c5=dbConfig[_0x578bc5(0x216)](_0x578bc5(0x221))[_0x578bc5(0x268)]({'botID':botID})[_0x578bc5(0x1b8)]();_0x2ee949={..._0x2ee949,'apiKey':crypt[_0x578bc5(0x24c)](secure[_0x578bc5(0x264)],_0x2ee949[_0x578bc5(0x188)])[_0x578bc5(0x177)],'apiSecret':crypt[_0x578bc5(0x24c)](secure[_0x578bc5(0x264)],_0x2ee949[_0x578bc5(0x1c4)])['message']};if(_0x59d8c5){if(_0x2ee949['apiKey']=='************')_0x2ee949[_0x578bc5(0x188)]=config[_0x578bc5(0x188)];if(_0x2ee949['apiSecret']=='************')_0x2ee949[_0x578bc5(0x1c4)]=config[_0x578bc5(0x1c4)];dbConfig[_0x578bc5(0x216)]('bot')[_0x578bc5(0x268)]({'botID':botID})[_0x578bc5(0x16a)](_0x2ee949)[_0x578bc5(0x18a)]();}else dbConfig[_0x578bc5(0x216)](_0x578bc5(0x221))['push'](_0x2ee949)[_0x578bc5(0x18a)](),process[_0x578bc5(0x201)]({'status':_0x578bc5(0x1a8),'live':_0x578bc5(0x1ee)});config={..._0x2ee949};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x578bc5(0x201)]({'botname':_0x2ee949[_0x578bc5(0x23b)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x27f547){const _0xb818c0=_0x348d22,_0x464860={...config,'headless':_0x27f547[_0xb818c0(0x1d0)]};let _0x4a3f49=dbConfig[_0xb818c0(0x216)](_0xb818c0(0x221))[_0xb818c0(0x268)]({'botID':botID})[_0xb818c0(0x1b8)]();_0x4a3f49&&dbConfig[_0xb818c0(0x216)](_0xb818c0(0x221))[_0xb818c0(0x268)]({'botID':botID})[_0xb818c0(0x16a)](_0x464860)[_0xb818c0(0x18a)](),config={..._0x464860},proxyEmit(_0xb818c0(0x199),emittedConfiguration());}function noslash(_0x4a081e){const _0x47d060=_0x348d22;return _0x4a081e[_0x47d060(0x1cd)]('/','');}function updateNumberCoins(_0x2dde82){const _0x23df33=_0x348d22;_0x2dde82[_0x23df33(0x179)]&&_0x2dde82['eventType']==_0x23df33(0x255)&&_0x2dde82[_0x23df33(0x19b)][_0x23df33(0x228)](_0x15efbf=>{const _0x2cfda7=_0x23df33;let _0x4d774a=currentCoins[_0x2cfda7(0x268)](_0x392f46=>_0x392f46[_0x2cfda7(0x257)]==_0x15efbf[_0x2cfda7(0x22c)]),_0x1d1441=config[_0x2cfda7(0x192)][_0x2cfda7(0x268)](_0xe8fc6=>_0xe8fc6['coin']==_0x15efbf[_0x2cfda7(0x22c)]);if(_0x4d774a&&_0x1d1441)_0x4d774a['number']=Math[_0x2cfda7(0x25a)](Number(_0x15efbf[_0x2cfda7(0x18e)])+(_0x1d1441[_0x2cfda7(0x1ca)]||0x0),0x0);});if(_0x2dde82['eventType']&&_0x2dde82[_0x23df33(0x179)]==_0x23df33(0x1a9)){if(_0x2dde82[_0x23df33(0x1b6)]==_0x23df33(0x1ed)&&_0x2dde82[_0x23df33(0x1fc)]=='FILLED'){if(lastOrders)lastOrders['forEach'](_0x2b80d7=>{const _0x36299b=_0x23df33;if(_0x2b80d7['orderId']==_0x2dde82['orderId']){if(_0x2b80d7[_0x36299b(0x204)])_0x2b80d7[_0x36299b(0x224)]=_0x2dde82['accumulatedQuantity']*_0x2b80d7[_0x36299b(0x178)];else _0x2b80d7['filled']=_0x2dde82[_0x36299b(0x222)];}});}}}async function getCoins(_0x44b293=!![],_0x9a4da7=config['basecoin']){const _0x4843b1=_0x348d22;let _0x5b2889,_0x448c94=[],_0x1e3d6f=[],_0x483ec8=[];try{_0x5b2889=await exchange[_0x4843b1(0x17a)](),mybalances=_0x5b2889[_0x4843b1(0x1e0)];if(!_0x44b293)for(const [_0x5a5864,_0x7d24d4]of Object[_0x4843b1(0x239)](mybalances)){_0x483ec8['push'](_0x5a5864);}else config['portfolio'][_0x4843b1(0x228)](_0x40c498=>{const _0x58fa8c=_0x4843b1;if(!_0x40c498[_0x58fa8c(0x187)])_0x483ec8[_0x58fa8c(0x24a)](_0x40c498[_0x58fa8c(0x257)]);});if(_0x9a4da7=='')for(const [_0x37e4ee,_0x80d000]of Object[_0x4843b1(0x239)](mybalances)){_0x80d000[_0x4843b1(0x1f2)]()!=0x0&&_0x1e3d6f[_0x4843b1(0x24a)]({'coin':_0x37e4ee});}else for(const [_0xa0eca0,_0x3c6941]of Object[_0x4843b1(0x239)](mybalances)){if(_0x483ec8['includes'](_0xa0eca0)){const _0xa6cc8c=config[_0x4843b1(0x192)]['find'](_0x383d88=>_0x383d88[_0x4843b1(0x257)]==_0xa0eca0);if((_0x3c6941[_0x4843b1(0x1f2)]()!=0x0||_0xa6cc8c)&&(allSymbols[_0x4843b1(0x1e1)](_0xa0eca0+'/'+_0x9a4da7)||_0xa0eca0==_0x9a4da7))_0x1e3d6f[_0x4843b1(0x24a)]({'coin':_0xa0eca0,'symbol':_0xa0eca0+'/'+_0x9a4da7,'reverse':![],'number':Math['max'](_0x3c6941+(_0xa6cc8c&&_0xa6cc8c[_0x4843b1(0x1ca)]||0x0),0x0)}),_0xa0eca0!=_0x9a4da7&&_0x448c94[_0x4843b1(0x24a)](_0xa0eca0+'/'+_0x9a4da7);else(_0x3c6941[_0x4843b1(0x1f2)]()!=0x0||_0xa6cc8c)&&allSymbols['includes'](_0x9a4da7+'/'+_0xa0eca0)&&(_0x1e3d6f[_0x4843b1(0x24a)]({'coin':_0xa0eca0,'symbol':_0x9a4da7+'/'+_0xa0eca0,'reverse':!![],'number':Math[_0x4843b1(0x25a)](_0x3c6941+(_0xa6cc8c&&_0xa6cc8c[_0x4843b1(0x1ca)]||0x0),0x0)}),_0xa0eca0!=_0x9a4da7&&_0x448c94[_0x4843b1(0x24a)](_0x9a4da7+'/'+_0xa0eca0));}}}catch(_0x4f3db9){if(!_0x44b293){if(_0x4f3db9[_0x4843b1(0x1f2)]()[_0x4843b1(0x1e1)](_0x4843b1(0x1ba)))return logHistory(_0x4843b1(0x220),_0x4843b1(0x238)),![];else{if(_0x4f3db9[_0x4843b1(0x1f2)]()[_0x4843b1(0x1e1)]('AuthenticationError'))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x4f3db9[_0x4843b1(0x1f2)]()[_0x4843b1(0x1e1)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x4f3db9,_0x4843b1(0x213));}}}else await handleError(_0x4f3db9,'getCoins()');}return _0x1e3d6f;}async function getPortfolio(_0x3d55ee){const _0x277da3=_0x348d22;let _0x3ac874=[],_0x3bd2c6=[],_0x3735b3,_0x50a746=[],_0x333e74,_0x4a5175;_0x3d55ee[_0x277da3(0x188)]===_0x277da3(0x1cc)||_0x3d55ee[_0x277da3(0x1c4)]==='************'?(_0x333e74=config[_0x277da3(0x188)],_0x4a5175=config[_0x277da3(0x1c4)]):(_0x333e74=_0x3d55ee[_0x277da3(0x188)],_0x4a5175=_0x3d55ee['apiSecret']);await initExchange(_0x333e74,_0x4a5175);let _0x2dfb24=await loadSymbols();if(_0x2dfb24){_0x50a746=await getCoins(![],_0x3d55ee['basecoin']);if(_0x50a746===![])proxyEmit(_0x277da3(0x192),![]);else{if(_0x3d55ee[_0x277da3(0x212)]=='')proxyEmit('portfolio',_0x50a746);else{_0x50a746[_0x277da3(0x228)](_0x548418=>{const _0x210c18=_0x277da3;_0x3ac874[_0x210c18(0x24a)](_0x548418['symbol']);});try{_0x3bd2c6=await exchange[_0x277da3(0x1f5)](_0x3ac874);}catch(_0x44b090){await handleError(_0x44b090,_0x277da3(0x207));}_0x50a746[_0x277da3(0x228)](_0x17e1d9=>{const _0x4c49c3=_0x277da3;_0x17e1d9[_0x4c49c3(0x257)]!=_0x3d55ee[_0x4c49c3(0x212)]?_0x3735b3=_0x17e1d9['reverse']?0x1/_0x3bd2c6[_0x17e1d9[_0x4c49c3(0x164)]]['last']:_0x3bd2c6[_0x17e1d9['symbol']]['last']:_0x3735b3=0x1,_0x17e1d9[_0x4c49c3(0x178)]=formatResult(_0x3735b3,0x8);}),proxyEmit(_0x277da3(0x192),_0x50a746);}}}else proxyEmit(_0x277da3(0x192),![]);}function checkMinimums(_0x3e79a6){const _0x35fa73=_0x348d22;let _0x90eb9e=!![];const _0x26af09=!_0x3e79a6[_0x35fa73(0x204)]?markets[_0x3e79a6['symbol']][_0x35fa73(0x237)][_0x35fa73(0x1a0)][_0x35fa73(0x20e)]:markets[_0x3e79a6[_0x35fa73(0x164)]][_0x35fa73(0x237)][_0x35fa73(0x203)][_0x35fa73(0x20e)],_0x3e5eb4=!_0x3e79a6[_0x35fa73(0x204)]?markets[_0x3e79a6[_0x35fa73(0x164)]][_0x35fa73(0x237)][_0x35fa73(0x203)]['min']:markets[_0x3e79a6[_0x35fa73(0x164)]]['limits'][_0x35fa73(0x1a0)]['min'];if(Math['abs'](_0x3e79a6['trade'])<_0x26af09)_0x90eb9e=![];if(Math[_0x35fa73(0x1db)](_0x3e79a6[_0x35fa73(0x1de)])*_0x3e79a6[_0x35fa73(0x247)]<_0x3e5eb4)_0x90eb9e=![];return _0x90eb9e;}async function getBalances(){const _0x59676b=_0x348d22;let _0x761d0a=0x0,_0x4f8365;const _0x1b3dce=config['threshold'];currentCoins[_0x59676b(0x228)](_0x28ddd3=>{const _0x2fc46b=_0x59676b;if(_0x28ddd3[_0x2fc46b(0x257)]!=config[_0x2fc46b(0x212)]){let _0x2c32b2=global[_0x2fc46b(0x1ef)][noslash(_0x28ddd3[_0x2fc46b(0x164)])];_0x4f8365=_0x28ddd3[_0x2fc46b(0x204)]?0x1/_0x2c32b2:_0x2c32b2;}else _0x4f8365=0x1;let _0x4c83c3=_0x28ddd3['number']*_0x4f8365;_0x761d0a+=_0x4c83c3,_0x28ddd3[_0x2fc46b(0x247)]=formatResult(Number(_0x4f8365),0x8),_0x28ddd3[_0x2fc46b(0x1b8)]=_0x4c83c3;}),currentCoins['forEach'](_0x4a1770=>{const _0x5d1dac=_0x59676b;let _0x3edee2=config[_0x5d1dac(0x192)][_0x5d1dac(0x268)](_0x6edeca=>_0x6edeca[_0x5d1dac(0x257)]==_0x4a1770[_0x5d1dac(0x257)]),_0x41554b=Number(_0x3edee2[_0x5d1dac(0x23e)]),_0x4fba9e=_0x4a1770['value']/_0x761d0a*0x64,_0x2d6ec0=_0x41554b*_0x761d0a/0x64/_0x4a1770[_0x5d1dac(0x247)]-_0x4a1770['number'];_0x4a1770['distribution']=formatResult(_0x4fba9e,0x3),_0x4a1770[_0x5d1dac(0x262)]=formatResult(_0x41554b,0x3),_0x4a1770[_0x5d1dac(0x1de)]=formatResult(_0x2d6ec0,0x8),_0x4a1770[_0x5d1dac(0x210)]='',_0x4a1770[_0x5d1dac(0x22a)]='';if(_0x4a1770['coin']!=config[_0x5d1dac(0x212)]){if(_0x4a1770['distribution']>_0x41554b)_0x4a1770[_0x5d1dac(0x210)]=_0x5d1dac(0x215),_0x4a1770[_0x5d1dac(0x22a)]=checkMinimums(_0x4a1770);else _0x4a1770[_0x5d1dac(0x23e)]<_0x41554b&&(_0x4a1770[_0x5d1dac(0x210)]=_0x5d1dac(0x1f9),_0x4a1770[_0x5d1dac(0x22a)]=checkMinimums(_0x4a1770));}_0x4a1770[_0x5d1dac(0x17f)]=_0x4a1770[_0x5d1dac(0x23e)]/_0x4a1770[_0x5d1dac(0x262)]-0x1;}),currentCoins['sort']((_0x59b985,_0x22e9ec)=>_0x59b985[_0x59676b(0x17f)]<_0x22e9ec[_0x59676b(0x17f)]?0x1:_0x22e9ec['delta']<_0x59b985['delta']?-0x1:0x0);const _0x55a557=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x55a557['eur'],'usd':_0x55a557[_0x59676b(0x168)],'portfolio':JSON[_0x59676b(0x1bf)](currentCoins),'threshold':_0x1b3dce},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x1b3dce});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xd5b560=_0x348d22;if(!lastBalances)return;let _0x39a802=await getStartingBalances(![]),_0x71a182=[],_0x371411;JSON[_0xd5b560(0x18b)](lastBalances[_0xd5b560(0x192)])[_0xd5b560(0x228)](_0x44e9dd=>{const _0x366bae=_0xd5b560;let _0x78acea={'coin':_0x44e9dd[_0x366bae(0x257)],'number':_0x44e9dd[_0x366bae(0x214)],'price':_0x44e9dd[_0x366bae(0x247)]};_0x71a182[_0x366bae(0x24a)](_0x78acea);});const _0x15f35b=await getFiat();_0x371411={'date':lastBalances[_0xd5b560(0x1c9)][_0xd5b560(0x202)]('\x20')[0x0],'eur':_0x15f35b[_0xd5b560(0x17c)],'usd':_0x15f35b[_0xd5b560(0x168)],'coins':_0x71a182};let _0x2246a0=dbPerformance[_0xd5b560(0x216)]('data')[_0xd5b560(0x268)]({'date':_0x371411[_0xd5b560(0x1ec)]})[_0xd5b560(0x1b8)]();_0x2246a0?dbPerformance['get'](_0xd5b560(0x24b))[_0xd5b560(0x268)]({'date':_0x371411[_0xd5b560(0x1ec)]})[_0xd5b560(0x16a)](_0x371411)['write']():dbPerformance[_0xd5b560(0x216)]('data')[_0xd5b560(0x24a)](_0x371411)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x54b49b=_0x348d22;if(dbPerformance[_0x54b49b(0x174)]('data')['value']()){let _0x266417=dbPerformance[_0x54b49b(0x216)](_0x54b49b(0x24b))[_0x54b49b(0x1d8)](_0x54b49b(0x1ec))['value']();proxyEmit('performance',_0x266417),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x3423aa=!![]){const _0x261d7b=_0x348d22;let _0x2c2adb=dbPerformance[_0x261d7b(0x216)](_0x261d7b(0x24b))[_0x261d7b(0x268)]({'date':config[_0x261d7b(0x200)]})['value']();config[_0x261d7b(0x188)]!=''&&!_0x2c2adb&&(await setStartDatePerformance(config),_0x2c2adb=dbPerformance[_0x261d7b(0x216)](_0x261d7b(0x24b))[_0x261d7b(0x268)]({'date':config[_0x261d7b(0x200)]})[_0x261d7b(0x1b8)]());if(config[_0x261d7b(0x188)]==''||!_0x2c2adb)return{};let _0x106346=0x0,_0x1337b6=0x0,_0x4cb196=0x0,_0x4e5485=[],_0x4eaae9=0x0;config[_0x261d7b(0x192)][_0x261d7b(0x228)](_0x471a9d=>{const _0x1217e8=_0x261d7b;if(!_0x471a9d[_0x1217e8(0x187)]){_0x4e5485[_0x4eaae9]={'coin':_0x471a9d['coin'],'symbol':_0x471a9d[_0x1217e8(0x164)],'number':_0x471a9d['startnumber'],'price':_0x471a9d[_0x1217e8(0x17b)]},_0x106346+=_0x471a9d[_0x1217e8(0x17b)]*_0x471a9d['startnumber'];if(config[_0x1217e8(0x212)]==_0x1217e8(0x1d1))_0x1337b6+=_0x471a9d[_0x1217e8(0x17b)]*_0x471a9d[_0x1217e8(0x1a6)]*_0x2c2adb['eur'],_0x4cb196+=_0x471a9d[_0x1217e8(0x17b)]*_0x471a9d[_0x1217e8(0x1a6)]*_0x2c2adb[_0x1217e8(0x168)];else{if(config[_0x1217e8(0x212)]=='BUSD'||config[_0x1217e8(0x212)]==_0x1217e8(0x258)||config['basecoin']=='USDC')_0x1337b6+=_0x471a9d[_0x1217e8(0x17b)]*_0x471a9d['startnumber']*_0x2c2adb['eur']/_0x2c2adb['usd'],_0x4cb196+=_0x471a9d[_0x1217e8(0x17b)]*_0x471a9d[_0x1217e8(0x1a6)];else config[_0x1217e8(0x212)]==_0x1217e8(0x217)&&(_0x1337b6+=_0x471a9d['startprice']*_0x471a9d[_0x1217e8(0x1a6)],_0x4cb196+=_0x471a9d['startprice']*_0x471a9d[_0x1217e8(0x1a6)]*_0x2c2adb[_0x1217e8(0x168)]/_0x2c2adb[_0x1217e8(0x17c)]);}_0x4eaae9++;}});let _0x21541f={'basecoin':_0x106346,'eur':_0x1337b6,'usd':_0x4cb196,'coins':_0x4e5485};if(_0x3423aa)proxyEmit('starting-balances',_0x21541f);return _0x21541f;}function headlessMode(_0x18b092){const _0x1a6f55=_0x348d22;let _0x2dab61=_0x18b092[_0x1a6f55(0x192)],_0x3a3a0f=_0x18b092[_0x1a6f55(0x167)],_0x37b842=[];for(let _0x5f0b8c of _0x2dab61){if(_0x5f0b8c[_0x1a6f55(0x257)]!=config['basecoin']){if(_0x5f0b8c[_0x1a6f55(0x23e)]/_0x5f0b8c[_0x1a6f55(0x262)]-0x1>=_0x3a3a0f/0x64){if(_0x5f0b8c['valid'])_0x37b842[_0x1a6f55(0x24a)](_0x5f0b8c);}else{if(_0x5f0b8c['distribution']/_0x5f0b8c[_0x1a6f55(0x262)]-0x1<=-_0x3a3a0f/0x64){if(_0x5f0b8c[_0x1a6f55(0x22a)])_0x37b842['push'](_0x5f0b8c);}}}}_0x37b842[_0x1a6f55(0x197)]>0x0&&placeOrder(_0x37b842);}function symbolToCoin(_0x4fcf28){const _0x3afede=_0x348d22;let _0x28a976;if(_0x4fcf28[_0x3afede(0x1e1)]('/'+config[_0x3afede(0x212)]))_0x28a976=_0x4fcf28[_0x3afede(0x1cd)]('/'+config[_0x3afede(0x212)],'');if(_0x4fcf28['includes'](config['basecoin']+'/'))_0x28a976=_0x4fcf28['replace'](config[_0x3afede(0x212)]+'/','');return _0x28a976;}async function validateOrders(_0xdb5c5=0x0){const _0x34f1c1=_0x348d22;let _0x35fc78=[],_0x1dac3c=config['ordertype']==_0x34f1c1(0x19f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x34f1c1(0x228)](_0x83b2bd=>{const _0x1283b3=_0x34f1c1;let _0x2f1eb3=previousCoins[_0x1283b3(0x268)](_0x32a8dc=>_0x32a8dc[_0x1283b3(0x257)]==symbolToCoin(_0x83b2bd[_0x1283b3(0x164)])),_0x5959d5=currentCoins[_0x1283b3(0x268)](_0x26df0f=>_0x26df0f[_0x1283b3(0x257)]==symbolToCoin(_0x83b2bd[_0x1283b3(0x164)])),_0x4083ea,_0x44008d;_0x83b2bd[_0x1283b3(0x210)]==_0x1283b3(0x1f9)&&!_0x83b2bd[_0x1283b3(0x204)]||_0x83b2bd[_0x1283b3(0x210)]=='sell'&&_0x83b2bd[_0x1283b3(0x204)]?(_0x4083ea=_0x2f1eb3[_0x1283b3(0x214)]+0.9*_0x83b2bd[_0x1283b3(0x224)],_0x44008d=_0x2f1eb3[_0x1283b3(0x214)]+1.1*_0x83b2bd['filled']):(_0x4083ea=_0x2f1eb3['number']-1.1*_0x83b2bd[_0x1283b3(0x224)],_0x44008d=_0x2f1eb3[_0x1283b3(0x214)]-0.9*_0x83b2bd['filled']);const _0x5f34a2=_0x83b2bd[_0x1283b3(0x224)]!=0x0&&_0x5959d5[_0x1283b3(0x214)]>=_0x4083ea&&_0x5959d5[_0x1283b3(0x214)]<=_0x44008d;_0x35fc78[_0x1283b3(0x24a)](_0x5f34a2);if(_0x5f34a2&&config[_0x1283b3(0x1bd)]!='market'){if(_0x83b2bd[_0x1283b3(0x204)])logHistory(_0x1283b3(0x1e3),_0x1283b3(0x1d4)+_0x83b2bd[_0x1283b3(0x164)]+'\x20'+_0x83b2bd[_0x1283b3(0x210)]+'\x20#'+formatResult(_0x83b2bd['filled']/_0x83b2bd[_0x1283b3(0x178)],0x8)+'\x20@'+formatResult(_0x83b2bd[_0x1283b3(0x178)],0x8));else logHistory(_0x1283b3(0x1e3),_0x1283b3(0x1d4)+_0x83b2bd[_0x1283b3(0x164)]+'\x20'+_0x83b2bd[_0x1283b3(0x210)]+'\x20#'+formatResult(_0x83b2bd[_0x1283b3(0x224)],0x8)+'\x20@'+formatResult(_0x83b2bd[_0x1283b3(0x178)],0x8));}}),_0x35fc78['forEach']((_0x1aa6b6,_0xe6b334)=>{const _0x29eabc=_0x34f1c1;if(_0x1aa6b6)lastOrders[_0x29eabc(0x1f3)](_0xe6b334,0x1);});if(_0xdb5c5<_0x1dac3c&&_0x35fc78[_0x34f1c1(0x1e1)](![])){if(_0xdb5c5==0x0){config[_0x34f1c1(0x1bd)]==_0x34f1c1(0x19f)?logHistory('error',_0x34f1c1(0x18c)):logHistory(_0x34f1c1(0x220),_0x34f1c1(0x16b));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xdb5c5);},0xa*0x3e8);}else{(_0xdb5c5==0x1||_0xdb5c5==Math[_0x34f1c1(0x21a)](_0x1dac3c/0x2)||_0xdb5c5==_0x1dac3c-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xdb5c5);},validateOrderInterval);}}else{lockOrders=![];if(_0xdb5c5>0x0&&!_0x35fc78[_0x34f1c1(0x1e1)](![]))config[_0x34f1c1(0x1bd)]==_0x34f1c1(0x19f)?logHistory(_0x34f1c1(0x1f1),_0x34f1c1(0x211)):logHistory(_0x34f1c1(0x1f1),_0x34f1c1(0x1ac));else _0xdb5c5>0x0&&_0x35fc78[_0x34f1c1(0x1e1)](![])&&(config[_0x34f1c1(0x1bd)]==_0x34f1c1(0x19f)?logHistory('success',_0x34f1c1(0x15c)+Math[_0x34f1c1(0x21a)](_0x1dac3c*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x34f1c1(0x228)](async _0x16bc6a=>{const _0x2092cf=_0x34f1c1;try{const _0x21a3d1=await exchange['cancelOrder'](_0x16bc6a[_0x2092cf(0x231)],_0x16bc6a[_0x2092cf(0x164)]);}catch(_0x4839f4){if(_0x4839f4[_0x2092cf(0x1f2)]()['includes']('OrderNotFound')){}else await handleError(_0x4839f4,_0x2092cf(0x206));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x34f1c1(0x21a)](_0x1dac3c*validateOrderInterval/0xea60)+_0x34f1c1(0x225))));}}async function resetCoinResults(){const _0x25cdbf=_0x348d22;dbCoinResults[_0x25cdbf(0x216)](_0x25cdbf(0x243))[_0x25cdbf(0x1e8)]()[_0x25cdbf(0x18a)]();let _0x2f1a6d=await getStartingBalances(![]);_0x2f1a6d[_0x25cdbf(0x243)][_0x25cdbf(0x228)](_0x447fca=>{const _0x24bb48=_0x25cdbf,_0x5a84ba=_0x447fca[_0x24bb48(0x164)][_0x24bb48(0x1e1)](config['basecoin']+'/');if(_0x447fca[_0x24bb48(0x257)]!=config[_0x24bb48(0x212)]){let _0x3a174b={'coin':_0x447fca[_0x24bb48(0x257)],'number':_0x447fca[_0x24bb48(0x214)],'breakeven':_0x447fca['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x24bb48(0x216)]('coins')[_0x24bb48(0x24a)](_0x3a174b)['write']();}});}async function updateCoinResults(_0x368a8c){const _0x214b74=_0x348d22;let _0x24c9ca,_0x5646f4,_0x5532ae,_0x311b74,_0x3e8e33,_0x177a6f,_0x3fd7b6=dbCoinResults['get']('coins')[_0x214b74(0x268)]({'coin':_0x368a8c[_0x214b74(0x257)]})[_0x214b74(0x1b8)]();if(!_0x3fd7b6)return;if(_0x368a8c[_0x214b74(0x226)]&&_0x368a8c[_0x214b74(0x226)][_0x214b74(0x1dd)]==config['basecoin'])_0x24c9ca=_0x368a8c[_0x214b74(0x226)][_0x214b74(0x203)];else{if(_0x368a8c[_0x214b74(0x226)]&&_0x368a8c['fee'][_0x214b74(0x1dd)]=='BNB')_0x24c9ca=_0x368a8c[_0x214b74(0x226)][_0x214b74(0x203)]*global[_0x214b74(0x1ef)][_0x214b74(0x1fa)+config[_0x214b74(0x212)]];else _0x24c9ca=0.001*_0x368a8c[_0x214b74(0x224)];}const _0x574142=_0x368a8c[_0x214b74(0x164)][_0x214b74(0x1e1)](config[_0x214b74(0x212)]+'/');_0x574142&&(_0x177a6f={'coin':_0x368a8c[_0x214b74(0x257)],'symbol':_0x368a8c[_0x214b74(0x164)],'filled':_0x368a8c[_0x214b74(0x224)]*_0x368a8c[_0x214b74(0x178)],'side':_0x368a8c[_0x214b74(0x210)]==_0x214b74(0x215)?'buy':_0x214b74(0x215),'price':0x1/_0x368a8c['price']},_0x368a8c={..._0x177a6f});_0x368a8c['side']==_0x214b74(0x1f9)?_0x5532ae=(_0x3fd7b6[_0x214b74(0x194)]*_0x3fd7b6[_0x214b74(0x214)]+_0x368a8c['price']*_0x368a8c[_0x214b74(0x224)])/(_0x3fd7b6[_0x214b74(0x214)]+_0x368a8c[_0x214b74(0x224)]):_0x5532ae=(_0x3fd7b6[_0x214b74(0x194)]*_0x3fd7b6['number']-_0x368a8c[_0x214b74(0x178)]*_0x368a8c[_0x214b74(0x224)])/(_0x3fd7b6[_0x214b74(0x214)]-_0x368a8c['filled']);_0x368a8c[_0x214b74(0x210)]==_0x214b74(0x1f9)?_0x311b74=_0x3fd7b6['realized']:_0x311b74=_0x3fd7b6['realized']+(_0x368a8c[_0x214b74(0x178)]-_0x3fd7b6[_0x214b74(0x194)])*_0x368a8c[_0x214b74(0x224)];_0x5646f4=_0x368a8c[_0x214b74(0x210)]==_0x214b74(0x215)?_0x3fd7b6[_0x214b74(0x214)]-_0x368a8c['filled']:_0x3fd7b6[_0x214b74(0x214)]+_0x368a8c['filled'],_0x3e8e33=(_0x368a8c[_0x214b74(0x178)]-_0x5532ae)*_0x5646f4;let _0x2a831d={'coin':_0x368a8c[_0x214b74(0x257)],'number':_0x5646f4,'breakeven':formatResult(_0x5532ae,0x8),'realized':formatResult(_0x311b74,0x8),'unrealized':formatResult(_0x3e8e33,0x8),'fees':formatResult(_0x3fd7b6[_0x214b74(0x21e)]+_0x24c9ca,0x8),'sells':_0x368a8c[_0x214b74(0x210)]==_0x214b74(0x215)?_0x3fd7b6[_0x214b74(0x251)]+0x1:_0x3fd7b6[_0x214b74(0x251)],'buys':_0x368a8c[_0x214b74(0x210)]==_0x214b74(0x1f9)?_0x3fd7b6[_0x214b74(0x19a)]+0x1:_0x3fd7b6[_0x214b74(0x19a)]};dbCoinResults[_0x214b74(0x216)]('coins')[_0x214b74(0x268)]({'coin':_0x368a8c[_0x214b74(0x257)]})['assign'](_0x2a831d)[_0x214b74(0x18a)]();}async function placeOrder(_0x42b542){const _0x4a3637=_0x348d22,_0x1ca689=config['ordertype']==_0x4a3637(0x19f)?_0x4a3637(0x19f):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x4a3637(0x18b)](JSON[_0x4a3637(0x1bf)](currentCoins));for(const _0x47b151 of _0x42b542){let _0x4dc3b6,_0x6540e7,_0x233169,_0x666398,_0x28c59c,_0x3f2007=_0x47b151['symbol'];try{const _0x7c1ecb=await exchange['fetchTickers'](_0x3f2007),_0x30abd2=_0x7c1ecb[_0x3f2007];_0x4dc3b6=_0x30abd2['last'],_0x6540e7=_0x30abd2['bid'],_0x233169=_0x30abd2[_0x4a3637(0x1ab)];_0x47b151[_0x4a3637(0x204)]?(_0x666398=_0x47b151['side']==_0x4a3637(0x1f9)?'sell':_0x4a3637(0x1f9),_0x28c59c=Math[_0x4a3637(0x1db)](_0x47b151[_0x4a3637(0x1de)])/_0x4dc3b6):(_0x666398=_0x47b151['side'],_0x28c59c=Math[_0x4a3637(0x1db)](_0x47b151[_0x4a3637(0x1de)]));_0x1ca689==_0x4a3637(0x1ce)&&(config[_0x4a3637(0x1bd)]==_0x4a3637(0x183)&&(_0x4dc3b6=_0x666398==_0x4a3637(0x1f9)?_0x6540e7:_0x233169),config[_0x4a3637(0x1bd)]=='limit-low'&&(_0x4dc3b6=_0x666398==_0x4a3637(0x1f9)?_0x233169:_0x6540e7));_0x28c59c=formatResult(_0x28c59c,0x8),_0x4dc3b6=formatResult(_0x4dc3b6,0x8);const _0x4fc0ee=await exchange[_0x4a3637(0x1aa)](_0x3f2007,_0x1ca689,_0x666398,_0x28c59c,_0x4dc3b6);lastOrders[_0x4a3637(0x24a)]({'orderId':_0x4fc0ee['id'],'symbol':_0x3f2007,'side':_0x666398,'reverse':_0x47b151[_0x4a3637(0x204)],'amount':_0x47b151[_0x4a3637(0x204)]?_0x4fc0ee[_0x4a3637(0x1a0)]*_0x4fc0ee['price']:_0x4fc0ee[_0x4a3637(0x1a0)],'filled':_0x47b151[_0x4a3637(0x204)]?_0x4fc0ee[_0x4a3637(0x224)]*_0x4fc0ee[_0x4a3637(0x178)]:_0x4fc0ee[_0x4a3637(0x224)],'price':_0x4fc0ee[_0x4a3637(0x178)]});const _0x3254e2=_0x666398==_0x4a3637(0x215)?config[_0x4a3637(0x171)]?String['fromCodePoint']('0x'+config[_0x4a3637(0x171)])+'\x20':'':config[_0x4a3637(0x252)]?String[_0x4a3637(0x1c2)]('0x'+config['emojibuy'])+'\x20':'',_0x4fb51c=_0x1ca689==_0x4a3637(0x19f)?_0x4a3637(0x1dc):config[_0x4a3637(0x1bd)]==_0x4a3637(0x183)?'Limit\x20(high-margin)':_0x4a3637(0x18d);if(_0x1ca689==_0x4a3637(0x19f))logHistory(_0x4a3637(0x1e3),''+_0x3254e2+_0x4fb51c+'\x20order:\x20'+_0x3f2007+'\x20'+_0x666398+'\x20#'+formatResult(_0x4fc0ee[_0x4a3637(0x224)],0x8)+'\x20@'+formatResult(_0x4fc0ee[_0x4a3637(0x178)],0x8));else logHistory(_0x4a3637(0x1e3),''+_0x3254e2+_0x4fb51c+_0x4a3637(0x1c7)+_0x3f2007+'\x20'+_0x666398+'\x20#'+formatResult(_0x4fc0ee[_0x4a3637(0x1a0)],0x8)+'\x20@'+formatResult(_0x4fc0ee[_0x4a3637(0x178)],0x8));_0x4fc0ee['coin']=_0x47b151['coin'],await updateCoinResults(_0x4fc0ee);if(config[_0x4a3637(0x1bc)]!=0x0){let _0x190a79=null;if(cooldownTracker[_0x4a3637(0x197)]==config[_0x4a3637(0x1bc)]-0x1)_0x190a79=cooldownTracker[_0x4a3637(0x245)]();const _0x34a68e=getTimeStamp();cooldownTracker['push'](_0x34a68e);if(_0x190a79){const _0x32e2e2=fns[_0x4a3637(0x269)](new Date(_0x34a68e),new Date(_0x190a79));_0x32e2e2<cooldownInterval&&(logHistory('error','Executed\x20'+config[_0x4a3637(0x1bc)]+_0x4a3637(0x21b)+cooldownInterval/0x3c+_0x4a3637(0x1af)+cooldownPeriod/(0xe10*0x3e8)+_0x4a3637(0x1d9)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x48297a){if(_0x48297a['toString']()[_0x4a3637(0x1e1)](_0x4a3637(0x20b)))logHistory(_0x4a3637(0x220),_0x4a3637(0x25b)+_0x3f2007);else{if(_0x48297a[_0x4a3637(0x1f2)]()[_0x4a3637(0x1e1)](_0x4a3637(0x161)))logHistory(_0x4a3637(0x220),'Order\x20amount\x20is\x20invalid:\x20'+_0x3f2007);else await handleError(_0x48297a,_0x4a3637(0x230));}}}if(lastOrders[_0x4a3637(0x197)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x4a3637(0x1d0)]&&(config['ordertype']==_0x4a3637(0x19f)?logHistory(_0x4a3637(0x220),_0x4a3637(0x249)):logHistory('error',_0x4a3637(0x24f)));else coolingDown&&(!config[_0x4a3637(0x1d0)]&&logHistory(_0x4a3637(0x220),_0x4a3637(0x22f)));}}function logHistory(_0x4e5286,_0x427263,_0x541ba5=''){const _0x4873fb=_0x348d22;let _0x1337d8={'time':getTimeStamp(),'type':_0x4e5286,'event':_0x427263,'botname':config[_0x4873fb(0x23b)],'showname':config[_0x4873fb(0x1c1)]};dbLogs[_0x4873fb(0x216)](_0x4873fb(0x1ae))[_0x4873fb(0x24a)](_0x1337d8)[_0x4873fb(0x18a)]();if(_0x541ba5=='')_0x541ba5=_0x427263;proxyEmit(_0x4873fb(0x1b1),{'log':_0x1337d8,'summary':_0x541ba5}),process['send']({'telegram':_0x1337d8}),logging(''+_0x1337d8['event']);}function _0x1775(){const _0x364838=['datetime','cancelLoading','args','Invalid\x20quantity','\x20|\x20Error\x20details:\x20','timeout','symbol','BTC/USDT','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','threshold','usd','wsMarket','assign','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','differenceInCalendarDays','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','yyyy/MM/dd\x20HH:mm:ss','WebSockets(','type','emojisell','BTC/EUR','BTCUSDT','has','393uqTqhq','subscribeSpotUserDataStream','message','price','eventType','fetchBalance','startprice','eur','padStart','recreate','delta','671TIVyId','getDate','getMinutes','limit-high','constructor','date-fns','page','excluded','apiKey','binance','write','parse','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Limit\x20(low-margin)','availableBalance','RequestTimeout','getTime','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','portfolio','BTCBUSD','breakeven','-results.json','symbols','length','yyyy/MM/dd','configuration','buys','balances','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','map','200oYrtfR','market','amount',',\x20must\x20be\x20a\x203\x20digit\x20number','cancel','coin-loading-progress','Order:\x20','2080Poysji','startnumber','userData','enabled','executionReport','createOrder','ask','Order(s)\x20filled\x20-\x20balancing\x20resumed','initclient','logs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getFiat()','event','binanceus',':\x20Bot\x20','getSeconds','settings','orderType','function','value','format','API-key\x20format\x20invalid','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','cooldown','ordertype','restart','stringify','indexOf','showname','fromCodePoint','log','apiSecret',')\x20|\x20Error\x20details:\x20','fetchOHLCV','\x20order:\x20','153081YOxIiY','time','offset','storeConfiguration','************','replace','limit','\x20>\x20','headless','BTC','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','ccxt','Order\x20filled:\x20','toLowerCase','DAI/','initws()','sortBy','\x20hour','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','abs','Market','currency','trade','BTCEUR','total','includes','getPortfolio','order','./config/','DDoSProtection','fetchOrders','milliseconds','remove','argv','(((.+)+)+)+$','Bot\x20','date','LIMIT','running','ticker','exchange','success','toString','splice','isArray','fetchTickers','bb-settings.json','loadSymbols()','filter','buy','BNB','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','orderStatus','mkdirSync','lowdb','1082918alyiNu','startdate','send','split','cost','reverse','search','cancelOrder()','getPortfolio()','BTC/BUSD','Pausing\x20bot\x20for\x205\x20minutes\x20(','secure','MIN_NOTIONAL','getHours','5iYyYiM','min','getStartingBalances','side','Order(s)\x20validated\x20-\x20balancing\x20resumed','basecoin','getCoins()','number','sell','get','EUR','\x20|\x20Unknown\x20error\x20occured','-config.json','round','\x20orders\x20in\x20less\x20than\x20','3489834lMGaKV','storeHeadless','fees','kill','error','bot','accumulatedQuantity','defaults','filled','\x20minutes\x20-\x20balancing\x20resumed','fee','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','forEach','-performance.json','valid','yyyy-MM-dd\x27T\x27HH:mm:ss','asset','AuthenticationError','exit','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','placeOrder()','orderId','version','wsKey','coinamount','closeWs','001','limits','Binance\x20API\x20key\x20is\x20invalid','entries','timeshift','botname','getMonth','emitHistory','distribution','Crypt','kline',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','add','coins','5912bXsZPV','shift','wss://stream.binance.us:9443','last','toFixed','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','push','data','decrypt','formattedMessage','RSA-OAEP','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','timestamp','sells','emojibuy','274864QqwVbn','event-history','outboundAccountPosition','getCloses()','coin','USDT','lowdb/adapters/FileSync','max','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','wss://stream.binance.com:9443','getFullYear','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','HOT/EUR','keys','parseISO','target','453880hmNGlQ','privateKey','placeOrder','sha256','remainingSymbols','find','differenceInSeconds','bot-','Order(s)\x20not\x20validated\x20after\x20','progress'];_0x1775=function(){return _0x364838;};return _0x1775();}function emitHistory(_0xe45c9e={}){const _0x41351b=_0x348d22;Object['keys'](_0xe45c9e)[_0x41351b(0x197)]==0x0&&(_0xe45c9e={'type':[_0x41351b(0x1e3),_0x41351b(0x1b1)],'event':'','page':0x1});if(_0xe45c9e['type'][_0x41351b(0x1e1)](_0x41351b(0x1b1)))_0xe45c9e[_0x41351b(0x170)]['splice'](_0xe45c9e[_0x41351b(0x170)][_0x41351b(0x1c0)](_0x41351b(0x1b1)),0x1,_0x41351b(0x220),'success');if(dbLogs[_0x41351b(0x174)](_0x41351b(0x1ae))[_0x41351b(0x1b8)]()){let _0x2c522f=dbLogs[_0x41351b(0x216)](_0x41351b(0x1ae))[_0x41351b(0x1f8)](_0xbba025=>{const _0x33df6f=_0x41351b;if(_0xe45c9e[_0x33df6f(0x170)][_0x33df6f(0x197)]==0x0)return![];else return _0xe45c9e[_0x33df6f(0x170)][_0x33df6f(0x1e1)](_0xbba025[_0x33df6f(0x170)]);})[_0x41351b(0x1f8)](_0x64142f=>{const _0x2bf5c8=_0x41351b;if(_0xe45c9e[_0x2bf5c8(0x1b1)]=='')return!![];else return _0x64142f[_0x2bf5c8(0x1b1)]['toLowerCase']()[_0x2bf5c8(0x1e1)](_0xe45c9e[_0x2bf5c8(0x1b1)][_0x2bf5c8(0x1d5)]());})[_0x41351b(0x1d8)](_0x41351b(0x1c9)),_0x131b94=_0x2c522f[_0x41351b(0x1b8)]()[_0x41351b(0x197)];_0x2c522f=_0x2c522f[_0x41351b(0x204)]()['slice']((_0xe45c9e['page']-0x1)*logPageSize,_0xe45c9e[_0x41351b(0x186)]*logPageSize-0x1)[_0x41351b(0x204)]()['value'](),proxyEmit(_0x41351b(0x254),{'logs':_0x2c522f,'total':_0x131b94});}else proxyEmit(_0x41351b(0x254),{'logs':[],'total':0x0});}async function pauseBot(_0x1dd145){const _0x622429=_0x348d22,_0x412593=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x622429(0x190)](),consecutivePauses=0x1;else{if(_0x412593-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x622429(0x1be)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x622429(0x190)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x622429(0x220),_0x622429(0x209)+consecutivePauses+')'),await sleep(_0x1dd145),botPaused=![],reset();}}function _0x5237(_0x59120e,_0xbd36bd){const _0x11762d=_0x1775();return _0x5237=function(_0x80bcb2,_0x543b33){_0x80bcb2=_0x80bcb2-0x15c;let _0x17751f=_0x11762d[_0x80bcb2];return _0x17751f;},_0x5237(_0x59120e,_0xbd36bd);}async function handleError(_0x374ea1,_0x61edf0,_0x23980e=''){const _0x33c060=_0x348d22;if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)](_0x33c060(0x1e5)))logHistory(_0x33c060(0x220),_0x61edf0+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)]('ExchangeNotAvailable'))logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x16d)),await pauseBot(pauseBotInterval);else{if(_0x374ea1['toString']()[_0x33c060(0x1e1)](_0x33c060(0x18f)))logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x166)),await pauseBot(pauseBotInterval);else{if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)](_0x33c060(0x1ba)))logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x1fb)),logHistory(_0x33c060(0x220),_0x33c060(0x25e)),process[_0x33c060(0x201)]({'stop':_0x33c060(0x21f)});else{if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)](_0x33c060(0x22d)))logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x1bb)),logHistory(_0x33c060(0x220),_0x33c060(0x25e)),process[_0x33c060(0x201)]({'stop':_0x33c060(0x21f)});else{if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)](_0x33c060(0x19c)))logHistory(_0x33c060(0x220),_0x61edf0+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x33c060(0x220),_0x33c060(0x25e)),process[_0x33c060(0x201)]({'stop':'kill'});else{if(_0x374ea1['toString']()[_0x33c060(0x1e1)](_0x33c060(0x1d2)))logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x227)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x33c060(0x201)]({'stop':_0x33c060(0x21f)});else{if(_0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)]('InvalidNonce'))logHistory(_0x33c060(0x220),_0x61edf0+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'});else _0x374ea1[_0x33c060(0x1f2)]()[_0x33c060(0x1e1)]('InsufficientFunds')?logHistory(_0x33c060(0x220),_0x61edf0+_0x33c060(0x1da)):(logHistory('error',_0x61edf0+_0x33c060(0x218)),logging(_0x61edf0+_0x33c060(0x162),_0x374ea1),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x47fe6b,_0x1d09df){const _0x3bc48b=_0x348d22;return parseFloat(_0x47fe6b[_0x3bc48b(0x248)](_0x1d09df));}function logging(_0x53e402,_0x4cf201=''){const _0xc2f7db=_0x348d22;if(config['showname'])console[_0xc2f7db(0x1c3)](getTimeStamp()+':\x20'+config[_0xc2f7db(0x23b)]+_0xc2f7db(0x1cf)+_0x53e402,_0x4cf201);else console['log'](getTimeStamp()+_0xc2f7db(0x1b3)+botID+_0xc2f7db(0x1cf)+_0x53e402,_0x4cf201);}function getServerTime(){const _0x54fbf4=_0x348d22,_0x18e632=new Date();return _0x18e632[_0x54fbf4(0x25d)]()+'/'+(_0x18e632[_0x54fbf4(0x23c)]()+0x1)[_0x54fbf4(0x1f2)]()[_0x54fbf4(0x17d)](0x2,'0')+'/'+_0x18e632['getDate']()[_0x54fbf4(0x1f2)]()['padStart'](0x2,'0')+'\x20'+_0x18e632['getHours']()['toString']()[_0x54fbf4(0x17d)](0x2,'0')+':'+_0x18e632[_0x54fbf4(0x182)]()[_0x54fbf4(0x1f2)]()[_0x54fbf4(0x17d)](0x2,'0')+':'+_0x18e632[_0x54fbf4(0x1b4)]()['toString']()[_0x54fbf4(0x17d)](0x2,'0');}function getTimeStamp(){const _0x3e8d99=_0x348d22,_0x2588df=shiftedTime();return _0x2588df[_0x3e8d99(0x25d)]()+'/'+(_0x2588df[_0x3e8d99(0x23c)]()+0x1)[_0x3e8d99(0x1f2)]()[_0x3e8d99(0x17d)](0x2,'0')+'/'+_0x2588df[_0x3e8d99(0x181)]()[_0x3e8d99(0x1f2)]()['padStart'](0x2,'0')+'\x20'+_0x2588df[_0x3e8d99(0x20c)]()['toString']()['padStart'](0x2,'0')+':'+_0x2588df[_0x3e8d99(0x182)]()[_0x3e8d99(0x1f2)]()[_0x3e8d99(0x17d)](0x2,'0')+':'+_0x2588df[_0x3e8d99(0x1b4)]()[_0x3e8d99(0x1f2)]()['padStart'](0x2,'0');}function getDate(){const _0x277dee=_0x348d22,_0x5015ad=shiftedTime();return _0x5015ad[_0x277dee(0x25d)]()+'/'+(_0x5015ad['getMonth']()+0x1)[_0x277dee(0x1f2)]()['padStart'](0x2,'0')+'/'+_0x5015ad[_0x277dee(0x181)]()[_0x277dee(0x1f2)]()[_0x277dee(0x17d)](0x2,'0');}function getHour(){const _0x3fe743=_0x348d22,_0x352b2c=shiftedTime();return _0x352b2c[_0x3fe743(0x20c)]()[_0x3fe743(0x1f2)]()[_0x3fe743(0x17d)](0x2,'0');}function sleep(_0x13f095){return new Promise(_0x1f9389=>setTimeout(_0x1f9389,_0x13f095));}function shiftedTime(){const _0x20cb09=_0x348d22,_0x410da8=new Date();let _0x30ae89=_0x410da8;if(config&&config[_0x20cb09(0x23a)]!==0x0)_0x30ae89=fns[_0x20cb09(0x242)](_0x410da8,{'hours':config[_0x20cb09(0x23a)]});return _0x30ae89;}