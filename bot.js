const _0x162694=_0x2ab0;(function(_0x1e69ab,_0x3aba9e){const _0x4b10c2=_0x2ab0,_0x1ba652=_0x1e69ab();while(!![]){try{const _0x2f7ad0=parseInt(_0x4b10c2(0x260))/0x1*(-parseInt(_0x4b10c2(0x198))/0x2)+-parseInt(_0x4b10c2(0x274))/0x3+parseInt(_0x4b10c2(0x28e))/0x4+parseInt(_0x4b10c2(0x286))/0x5*(parseInt(_0x4b10c2(0x236))/0x6)+-parseInt(_0x4b10c2(0x22f))/0x7*(parseInt(_0x4b10c2(0x1f8))/0x8)+-parseInt(_0x4b10c2(0x244))/0x9*(parseInt(_0x4b10c2(0x27c))/0xa)+parseInt(_0x4b10c2(0x202))/0xb;if(_0x2f7ad0===_0x3aba9e)break;else _0x1ba652['push'](_0x1ba652['shift']());}catch(_0x79f89f){_0x1ba652['push'](_0x1ba652['shift']());}}}(_0x1bba,0x1bbfd));const _0x5b05b5=function(){let _0x17576a=!![];return function(_0x1d08ca,_0x46c44c){const _0x2949b2=_0x17576a?function(){if(_0x46c44c){const _0x11a006=_0x46c44c['apply'](_0x1d08ca,arguments);return _0x46c44c=null,_0x11a006;}}:function(){};return _0x17576a=![],_0x2949b2;};}(),_0x508585=_0x5b05b5(this,function(){const _0x509819=_0x2ab0;return _0x508585[_0x509819(0x26e)]()[_0x509819(0x1d3)](_0x509819(0x2a4))[_0x509819(0x26e)]()[_0x509819(0x1ca)](_0x508585)[_0x509819(0x1d3)]('(((.+)+)+)+$');});_0x508585();'use strict';const ccxt=require(_0x162694(0x1a1)),low=require('lowdb'),FileSync=require(_0x162694(0x222)),fs=require('fs'),fns=require(_0x162694(0x1fc)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x162694(0x271))['Crypt'];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;function _0x1bba(){const _0x2da307=['yyyy/MM/dd','************','buy','privateKey','defaults','offset','constructor','Order\x20filled:\x20','wsKey','startprice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','valid','reverse','BNB','BTC/USDT','search','forEach','remove','date','last','differenceInSeconds','limit-high','availableBalance','startdate','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','splice','mkdirSync','Binance\x20API\x20secret\x20is\x20invalid','buys','eachDayOfInterval','getMinutes','getHours','distribution','value','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','exit','padStart','orderType','headless','shift','BTC','getMonth','toLowerCase','getFullYear','success','emojibuy','log','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fetchTickers','./config/','USDT','57864kkREQA','type','sells','BTCBUSD','date-fns','placeOrder','\x20>\x20','argv','getPortfolio','round','2261721OXriJf','loadSymbols()','Order(s)\x20validated\x20-\x20balancing\x20resumed','currency','trade','eur','yyyy/MM/dd\x20HH:mm:ss','excluded','botname','bb-settings.json','fees','basecoin','ordertype','cancelLoading','write','startnumber','realized','close','restart','has','Invalid\x20quantity','starting-balances','Market','cancelOrder','slice','settings','limits','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','-results.json','executionReport','args','lowdb/adapters/FileSync','RequestTimeout','limit','total','test','spot','bot','fromCodePoint','bid','datetime','showname','emojisell','get','140lwUmId','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','timeout','parse','Executed\x20','LIMIT','24rMApst','min','001','-performance.json','InvalidNonce','exchange','includes','logs','fetchOHLCV','Binance\x20API\x20key\x20is\x20invalid','apiSecret','add','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','18ljxUHh','WebSockets(','HOT/EUR','order','\x20|\x20Unknown\x20error\x20occured','configuration','filter','sortBy','assign','BTCUSDT','breakeven','accumulatedQuantity','\x20-\x20','outboundAccountPosition','getSeconds','usd','BTCEUR','coinamount','./version.json','getPortfolio()','getTime','HOT/BTC','sell','error','market','fetchOrders','wss://stream.binance.us:9443','entries','11764oesUWy','find','remainingSymbols','InsufficientFunds','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','recreateHistory()','balances','fetchBalance','ticker','orderId','data','getFiat()','page','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','toString','eventType','closeWs','hybrid-crypto-js','subscribeSpotKline','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','290529UOaSbc','EUR','keys','price','userData','progress','recreate','timeshift','865850nsPDen','delta','symbol','function','\x20minutes\x20-\x20balancing\x20resumed','asset','placeOrder()','max','getDate','loadMarkets','276035oFsOXW','decrypt','stringify','performance','binanceus','number','parseISO','enabled','501692RiDXRP','kill','Limit\x20(low-margin)','side','length','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','MIN_NOTIONAL','Limit\x20(high-margin)','replace','AuthenticationError','cancel','USDC','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','message','Order\x20amount\x20is\x20invalid:\x20','version','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','apiKey','bot-','ask','toFixed','coin-loading-progress','(((.+)+)+)+$','storeConfiguration','Error:\x20Invalid\x20argument\x20','OrderNotFound','secure',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','sha256','Bot\x20','reconnected','4fmRCBe','sort','bb-secure.json','BTC/BUSD','API-key\x20format\x20invalid','running','format','push','threshold','ccxt','configuration-stored','getStartingBalances','abs','initws()','portfolio','amount','cancelOrder()','subscribeSpotUserDataStream','coins','kline','FILLED','send','getCoins()','binance','event','fee','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','emitHistory','target','isArray','cooldown','cost','Performance\x20recreation\x20completed\x20successfully','split','BTC/EUR','-config.json','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','timestamp','orderStatus','coin','DDoSProtection','formattedMessage','filled',')\x20|\x20Error\x20details:\x20'];_0x1bba=function(){return _0x2da307;};return _0x1bba();}let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x162694(0x256))[_0x162694(0x29d)],botID=process[_0x162694(0x1ff)][0x2]||_0x162694(0x238),pattern=/^[0-9]{3}$/;if(!pattern[_0x162694(0x226)](botID))return console[_0x162694(0x1f3)](_0x162694(0x2a6)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x162694(0x1e8)](0x1);const userID=process[_0x162694(0x1ff)][0x3]||'',configpath=userID?_0x162694(0x1f6)+userID+'/':_0x162694(0x1f6);!fs['existsSync'](configpath)&&fs[_0x162694(0x1de)](configpath);const configfile=configpath+_0x162694(0x2a0)+botID+_0x162694(0x1bb),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x162694(0x2a0)+botID+_0x162694(0x239),coinresultsfile=configpath+_0x162694(0x2a0)+botID+_0x162694(0x21f),settingsfile=configpath+_0x162694(0x20b),securefile=configpath+_0x162694(0x19a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x162694(0x1c8)]({'data':[]})[_0x162694(0x210)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x162694(0x1c8)]({'bot':[]})[_0x162694(0x210)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x162694(0x1c8)]({'coins':[]})[_0x162694(0x210)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x162694(0x254),'symbol':_0x162694(0x1ba)},'usd':{'coin':_0x162694(0x24d),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x56165a)=>{},'debug':(..._0x48fe0a)=>{},'notice':(..._0x2c14a4)=>{},'info':(..._0x4ff621)=>{},'warning':(..._0x1792b6)=>{},'error':async function(..._0xee8026){const _0x38a318=_0x162694,_0x2779f4=new Date()[_0x38a318(0x258)]();if(!lastErrorShown||_0x2779f4-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x38a318(0x258)](),logHistory(_0x38a318(0x25b),_0x38a318(0x245)+consecutivePauses+_0x38a318(0x2a9));let _0x353562='';if(_0xee8026[0x0])_0x353562+=_0xee8026[0x0];if(_0xee8026[0x1]&&_0xee8026[0x1]['error']&&_0xee8026[0x1][_0x38a318(0x25b)]['message'])_0x353562+=_0x38a318(0x250)+_0xee8026[0x1]['error'][_0x38a318(0x29b)];logging(_0x38a318(0x245)+consecutivePauses+_0x38a318(0x1c3),''+_0x353562),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x162694(0x2aa),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x162694(0x27b)]!=config[_0x162694(0x27b)]&&updateTimeshift(settings[_0x162694(0x27b)]);process[_0x162694(0x1ad)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x54d5d3,_0x41a3f1=null){process['send']({'function':_0x54d5d3,'args':_0x41a3f1});}function initializeProcessListeners(){const _0x573eb8=_0x162694;process['on'](_0x573eb8(0x29b),_0x251d55=>{const _0x3bd3a5=_0x573eb8;switch(Object[_0x3bd3a5(0x276)](_0x251d55)[0x0]){case _0x3bd3a5(0x27b):_0x251d55['timeshift']!=undefined&&(settings[_0x3bd3a5(0x27b)]=_0x251d55[_0x3bd3a5(0x27b)],updateTimeshift(settings[_0x3bd3a5(0x27b)]));break;case _0x3bd3a5(0x27f):switch(_0x251d55[_0x3bd3a5(0x27f)]){case'initclient':initclient();break;case _0x3bd3a5(0x1b3):emitHistory(_0x251d55['args']);break;case _0x3bd3a5(0x200):getPortfolio(_0x251d55[_0x3bd3a5(0x221)]);break;case _0x3bd3a5(0x2a5):storeConfiguration(_0x251d55['args']);break;case'storeHeadless':storeHeadless(_0x251d55[_0x3bd3a5(0x221)]);break;case _0x3bd3a5(0x1a3):getStartingBalances();break;case _0x3bd3a5(0x1fd):placeOrder(_0x251d55['args']);break;case _0x3bd3a5(0x20f):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x10fe1e=_0x162694;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x10fe1e(0x29f)],config[_0x10fe1e(0x240)]);let _0x274f61=await loadSymbols();_0x274f61&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x2df152,_0xef6534){const _0x215c76=_0x162694,_0x180ff1=ccxt[config[_0x215c76(0x23b)]];let _0x3396d5;switch(config['exchange']){case _0x215c76(0x1af):_0x3396d5='wss://stream.binance.com:9443';break;case _0x215c76(0x28a):_0x3396d5=_0x215c76(0x25e);break;default:_0x3396d5='wss://stream.binance.com:9443';}exchange=new _0x180ff1({'apiKey':_0x2df152,'secret':_0xef6534,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2df152,'api_secret':_0xef6534,'beautify':!![],'wsUrl':_0x3396d5},logger),config[_0x215c76(0x23b)]==_0x215c76(0x28a)&&(stablecoins={'eur':{'coin':_0x215c76(0x1fb),'symbol':_0x215c76(0x19b)},'usd':{'coin':'BTCUSDT','symbol':_0x215c76(0x1d2)}});}async function loadSymbols(){const _0xc5ba31=_0x162694;let _0x678070;try{markets=await exchange[_0xc5ba31(0x285)]();const _0x3e5535=['DAI/',_0xc5ba31(0x259),_0xc5ba31(0x246)];allSymbols=exchange['symbols']['filter'](_0x1b9704=>{let _0x4547b7=![];return _0x3e5535['forEach'](_0x2d78b4=>{const _0x5f181c=_0x2ab0;if(_0x1b9704[_0x5f181c(0x23c)](_0x2d78b4))_0x4547b7=!![];}),!_0x4547b7;}),_0x678070=!![];}catch(_0x130ded){await handleError(_0x130ded,_0xc5ba31(0x203)),_0x678070=![];}return _0x678070;}async function initbot(){const _0xd8d134=_0x162694;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x471e77=dbCoinResults[_0xd8d134(0x22e)](_0xd8d134(0x1aa))[_0xd8d134(0x1e5)]();if(_0x471e77[_0xd8d134(0x292)]==0x0)await resetCoinResults();}async function initclient(){const _0x37f519=_0x162694;proxyEmit(_0x37f519(0x249),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x37f519(0x266),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x12f082=_0x162694;wsinitialized=![];ws1&&(ws1[_0x12f082(0x1d4)](_0x4199f6=>{const _0x3a42ae=_0x12f082;try{wsClient[_0x3a42ae(0x270)](_0x4199f6);}catch(_0x590696){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x3080d2){}ws2=null;}}async function initws(){const _0xb563a2=_0x162694;cleanws();let _0x48cf6c=[];currentCoins[_0xb563a2(0x1d4)](_0x5b2906=>{const _0x502f09=_0xb563a2;if(_0x5b2906[_0x502f09(0x1bf)]!=config[_0x502f09(0x20d)])_0x48cf6c[_0x502f09(0x19f)](noslash(_0x5b2906['symbol']));});if(!_0x48cf6c[_0xb563a2(0x23c)](stablecoins[_0xb563a2(0x207)][_0xb563a2(0x1bf)]))_0x48cf6c[_0xb563a2(0x19f)](stablecoins[_0xb563a2(0x207)][_0xb563a2(0x1bf)]);if(!_0x48cf6c['includes'](stablecoins[_0xb563a2(0x253)][_0xb563a2(0x1bf)]))_0x48cf6c[_0xb563a2(0x19f)](stablecoins[_0xb563a2(0x253)][_0xb563a2(0x1bf)]);if(!_0x48cf6c[_0xb563a2(0x23c)]('BNB'+config[_0xb563a2(0x20d)]))_0x48cf6c['push']('BNB'+config[_0xb563a2(0x20d)]);try{_0x48cf6c[_0xb563a2(0x1d4)]((_0x4aace6,_0x5e0d36)=>{const _0x2c7cb7=_0xb563a2;ws1[_0x5e0d36]=wsClient[_0x2c7cb7(0x272)](_0x4aace6,'1m');}),ws2=wsClient[_0xb563a2(0x1a9)](),wsClient['on'](_0xb563a2(0x1c1),_0x5f1902=>{const _0x552a9b=_0xb563a2;if(!Array['isArray'](_0x5f1902)&&!_0x5f1902[_0x552a9b(0x1cc)]['includes'](_0x552a9b(0x278))){if(_0x5f1902[_0x552a9b(0x26f)]==='kline'){global[_0x552a9b(0x268)][_0x5f1902[_0x552a9b(0x1ab)][_0x552a9b(0x27e)]]=_0x5f1902[_0x552a9b(0x1ab)][_0x552a9b(0x213)];return;}}else{if(!Array[_0x552a9b(0x1b5)](_0x5f1902)&&_0x5f1902[_0x552a9b(0x1cc)]['includes'](_0x552a9b(0x278))){if(_0x5f1902['wsMarket']['includes'](_0x552a9b(0x227))){updateNumberCoins(_0x5f1902);return;}}}}),wsClient['on'](_0xb563a2(0x2ac),async _0x552601=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x5ae151){await handleError(_0x5ae151,_0xb563a2(0x1a5));}let _0x24c38a,_0x2ce7cb=0x0;loading[_0xb563a2(0x262)]=[];let _0x57022f=0x0;currentCoins[_0xb563a2(0x1d4)](_0x234139=>{const _0xcb152e=_0xb563a2;if(_0x234139[_0xcb152e(0x1bf)]!=config[_0xcb152e(0x20d)])loading[_0xcb152e(0x262)][_0xcb152e(0x19f)](_0x234139[_0xcb152e(0x27e)]);}),loadingCanceled=![];while(_0x24c38a!=currentCoins['length']-0x1){_0x24c38a=0x0,currentCoins[_0xb563a2(0x1d4)](_0x4a274f=>{const _0xa2ed59=_0xb563a2;_0x4a274f['coin']!=config[_0xa2ed59(0x20d)]&&global[_0xa2ed59(0x268)][noslash(_0x4a274f[_0xa2ed59(0x27e)])]&&(loading[_0xa2ed59(0x262)]=loading[_0xa2ed59(0x262)][_0xa2ed59(0x24a)](_0x2008a7=>_0x2008a7!=_0x4a274f[_0xa2ed59(0x27e)]),_0x24c38a++);}),loading[_0xb563a2(0x279)]=Math[_0xb563a2(0x201)](_0x24c38a/(currentCoins['length']-0x1)*0x64);_0x57022f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0xb563a2(0x298)]=!![],emitLoadingProgress();break;}else _0x24c38a!=_0x2ce7cb&&(_0x2ce7cb=_0x24c38a,emitLoadingProgress()),_0x57022f++,await sleep(0xc8);}if(_0x24c38a==currentCoins[_0xb563a2(0x292)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x4aec0f=_0x162694;proxyEmit(_0x4aec0f(0x2a3),loading);}async function getFiat(){const _0x1ec28a=_0x162694;let _0x2d7c57=0x0,_0x295a1e=0x0;try{_0x2d7c57=global[_0x1ec28a(0x268)][stablecoins[_0x1ec28a(0x207)][_0x1ec28a(0x1bf)]],_0x295a1e=global[_0x1ec28a(0x268)][stablecoins[_0x1ec28a(0x253)][_0x1ec28a(0x1bf)]];}catch(_0x234e8f){await handleError(_0x234e8f,_0x1ec28a(0x26b));}return{'eur':Number(_0x2d7c57),'usd':Number(_0x295a1e)};}async function setStartDatePerformance(_0x4a2279){const _0x136209=_0x162694,_0xa883da=fns[_0x136209(0x19e)](new Date(_0x4a2279[_0x136209(0x1db)]),_0x136209(0x1c4));let _0x38fb12=[];_0x38fb12[stablecoins[_0x136209(0x207)][_0x136209(0x1bf)]]=await getCloses(stablecoins[_0x136209(0x207)][_0x136209(0x27e)],new Date(_0x4a2279[_0x136209(0x1db)]),0x1),_0x38fb12[stablecoins[_0x136209(0x253)][_0x136209(0x1bf)]]=await getCloses(stablecoins[_0x136209(0x253)]['symbol'],new Date(_0x4a2279[_0x136209(0x1db)]),0x1);let _0x31fabb,_0x4079a5=[];_0x4a2279[_0x136209(0x1a6)][_0x136209(0x1d4)](_0x1f3d11=>{const _0x37d881=_0x136209;!_0x1f3d11[_0x37d881(0x209)]&&_0x4079a5[_0x37d881(0x19f)]({'coin':_0x1f3d11[_0x37d881(0x1bf)],'number':_0x1f3d11[_0x37d881(0x211)],'price':_0x1f3d11[_0x37d881(0x1cd)]});}),_0x31fabb={'date':_0xa883da,'eur':_0x38fb12[stablecoins[_0x136209(0x207)][_0x136209(0x1bf)]][0x0],'usd':_0x38fb12[stablecoins['usd']['coin']][0x0],'coins':_0x4079a5};let _0x4be07b=dbPerformance[_0x136209(0x22e)]('data')['find']({'date':_0xa883da})[_0x136209(0x1e5)]();_0x4be07b?dbPerformance['get'](_0x136209(0x26a))[_0x136209(0x261)]({'date':_0xa883da})[_0x136209(0x24c)](_0x31fabb)['write']():dbPerformance[_0x136209(0x22e)]('data')[_0x136209(0x19f)](_0x31fabb)[_0x136209(0x210)](),_0x4be07b=dbPerformance[_0x136209(0x22e)](_0x136209(0x26a))[_0x136209(0x24b)](_0x136209(0x1d6))[_0x136209(0x1e5)](),_0x4be07b[_0x136209(0x1d4)](_0x56f436=>{const _0xf0e85=_0x136209;_0x56f436[_0xf0e85(0x1d6)]<_0xa883da&&dbPerformance['get'](_0xf0e85(0x26a))[_0xf0e85(0x1d5)]({'date':_0x56f436[_0xf0e85(0x1d6)]})[_0xf0e85(0x210)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x226165){const _0x5544fb=_0x162694;let _0x307133,_0x3b7fa5=[];logHistory('success',_0x5544fb(0x29e)),_0x226165[_0x5544fb(0x1a6)][_0x5544fb(0x1d4)](_0x1187ac=>{const _0x2d9e5b=_0x5544fb;if(_0x1187ac['coin']!=config[_0x2d9e5b(0x20d)]&&!_0x1187ac[_0x2d9e5b(0x209)])_0x3b7fa5[_0x2d9e5b(0x19f)]({'coin':_0x1187ac[_0x2d9e5b(0x1bf)],'symbol':_0x1187ac[_0x2d9e5b(0x27e)]});});let _0x441a2d=[];try{const _0x3bd3b2=fns['format'](fns[_0x5544fb(0x28c)](_0x226165[_0x5544fb(0x1db)][_0x5544fb(0x296)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4f926b of _0x3b7fa5){if(_0x4f926b[_0x5544fb(0x1bf)]!=config[_0x5544fb(0x20d)])_0x307133=await exchange[_0x5544fb(0x25d)](_0x4f926b['symbol'],Date['parse'](_0x3bd3b2));_0x307133['forEach'](_0x1b8cfc=>{const _0xce016=_0x5544fb,_0x232183=_0x4f926b[_0xce016(0x27e)][_0xce016(0x23c)](config['basecoin']+'/'),_0x4e2a7e=fns['format'](fns[_0xce016(0x28c)](_0x1b8cfc['datetime']),_0xce016(0x208)),_0x396d99=fns[_0xce016(0x19e)](fns['parseISO'](_0x1b8cfc[_0xce016(0x22b)]),'yyyy/MM/dd');let _0x20e69d;if(_0x1b8cfc[_0xce016(0x291)]==_0xce016(0x1c6)&&_0x232183==![])_0x20e69d=_0x1b8cfc['amount'];if(_0x1b8cfc[_0xce016(0x291)]=='buy'&&_0x232183==!![])_0x20e69d=-_0x1b8cfc[_0xce016(0x1a7)]*_0x1b8cfc[_0xce016(0x277)];if(_0x1b8cfc[_0xce016(0x291)]==_0xce016(0x25a)&&_0x232183==![])_0x20e69d=-_0x1b8cfc[_0xce016(0x1a7)];if(_0x1b8cfc[_0xce016(0x291)]==_0xce016(0x25a)&&_0x232183==!![])_0x20e69d=_0x1b8cfc[_0xce016(0x1a7)]*_0x1b8cfc[_0xce016(0x277)];_0x441a2d['push']({'timestamp':_0x4e2a7e,'date':_0x396d99,'coin':_0x4f926b[_0xce016(0x1bf)],'symbol':_0x4f926b['symbol'],'type':_0x1b8cfc[_0xce016(0x1f9)],'side':_0x1b8cfc['side'],'reverse':_0x232183,'amount':formatResult(_0x1b8cfc[_0xce016(0x1c2)],0x8),'filled':formatResult(_0x1b8cfc[_0xce016(0x1c2)],0x8),'coinamount':formatResult(_0x20e69d,0x8),'price':formatResult(_0x1b8cfc['price'],0x8)});let _0x4983f8;if(_0x1b8cfc[_0xce016(0x291)]=='buy'&&_0x232183==![])_0x4983f8=-_0x1b8cfc[_0xce016(0x1a7)]*_0x1b8cfc[_0xce016(0x277)];if(_0x1b8cfc['side']==_0xce016(0x1c6)&&_0x232183==!![])_0x4983f8=_0x1b8cfc[_0xce016(0x1a7)];if(_0x1b8cfc[_0xce016(0x291)]=='sell'&&_0x232183==![])_0x4983f8=_0x1b8cfc['amount']*_0x1b8cfc[_0xce016(0x277)];if(_0x1b8cfc[_0xce016(0x291)]==_0xce016(0x25a)&&_0x232183==!![])_0x4983f8=-_0x1b8cfc[_0xce016(0x1a7)];_0x441a2d[_0xce016(0x19f)]({'date':_0x396d99,'coin':config[_0xce016(0x20d)],'coinamount':formatResult(_0x4983f8,0x8)});});}_0x441a2d[_0x5544fb(0x199)]((_0x2f2704,_0x3881b5)=>_0x2f2704['timestamp']>_0x3881b5[_0x5544fb(0x1bd)]?0x1:_0x3881b5[_0x5544fb(0x1bd)]>_0x2f2704[_0x5544fb(0x1bd)]?-0x1:0x0),dbLogs[_0x5544fb(0x22e)](_0x5544fb(0x23d))[_0x5544fb(0x1d5)]()[_0x5544fb(0x210)](),_0x441a2d[_0x5544fb(0x1d4)](_0x4368ae=>{const _0x3f251b=_0x5544fb;let _0x4102f6;_0x4368ae['coin']!=config['basecoin']&&(_0x4102f6={'time':_0x4368ae[_0x3f251b(0x1bd)],'type':_0x3f251b(0x247),'event':'Order:\x20'+_0x4368ae['symbol']+'\x20'+_0x4368ae['side']+'\x20#'+_0x4368ae[_0x3f251b(0x1a7)]+'\x20@'+_0x4368ae[_0x3f251b(0x277)]},dbLogs['get'](_0x3f251b(0x23d))[_0x3f251b(0x19f)](_0x4102f6)[_0x3f251b(0x210)]());});const _0xd9aad2=fns[_0x5544fb(0x1e1)]({'start':new Date(_0x226165[_0x5544fb(0x1db)]),'end':new Date()})['map'](_0x550294=>fns['format'](_0x550294,_0x5544fb(0x1c4)));let _0x141351=[];_0x226165[_0x5544fb(0x1a6)][_0x5544fb(0x1d4)](_0xa8f42=>{const _0x50659a=_0x5544fb;if(!_0xa8f42[_0x50659a(0x209)]){_0x141351[_0xa8f42[_0x50659a(0x1bf)]]=[];let _0x3cd33a=_0xa8f42[_0x50659a(0x211)];_0xd9aad2[_0x50659a(0x1d4)]((_0x1b1a91,_0x108f9b)=>{const _0x589001=_0x50659a;let _0x245823=_0x441a2d[_0x589001(0x24a)](_0x1415a9=>_0x1415a9[_0x589001(0x1bf)]==_0xa8f42[_0x589001(0x1bf)]&&_0x1415a9[_0x589001(0x1d6)]==_0x1b1a91);if(_0x245823['length']!=0x0){let _0x338697=_0x245823['reduce']((_0x5ccaa1,_0x445b6d)=>{const _0x55c627=_0x589001;return _0x5ccaa1+=_0x445b6d[_0x55c627(0x255)],_0x5ccaa1;},0x0);_0x3cd33a+=_0x338697;}_0x141351[_0xa8f42[_0x589001(0x1bf)]][_0x1b1a91]=_0x3cd33a;});}});const _0x25d856=[..._0x3b7fa5];_0x25d856[_0x5544fb(0x19f)]({'coin':stablecoins[_0x5544fb(0x207)]['coin'],'symbol':stablecoins[_0x5544fb(0x207)]['symbol']}),_0x25d856[_0x5544fb(0x19f)]({'coin':stablecoins[_0x5544fb(0x253)][_0x5544fb(0x1bf)],'symbol':stablecoins['usd'][_0x5544fb(0x27e)]});let _0x35045b=[];for(const _0x29d64c of _0x25d856){_0x35045b[_0x29d64c[_0x5544fb(0x1bf)]]=await getCloses(_0x29d64c[_0x5544fb(0x27e)],new Date(_0x226165[_0x5544fb(0x1db)]));}dbPerformance['get'](_0x5544fb(0x26a))[_0x5544fb(0x1d5)]()[_0x5544fb(0x210)](),_0xd9aad2['forEach']((_0x3e9257,_0x32154a)=>{const _0x5ca363=_0x5544fb;let _0x550832,_0x388380=[];_0x32154a==0x0?(_0x226165[_0x5ca363(0x1a6)][_0x5ca363(0x1d4)](_0x3d836b=>{const _0x5e38ca=_0x5ca363;!_0x3d836b[_0x5e38ca(0x209)]&&_0x388380[_0x5e38ca(0x19f)]({'coin':_0x3d836b[_0x5e38ca(0x1bf)],'number':_0x3d836b[_0x5e38ca(0x211)],'price':_0x3d836b[_0x5e38ca(0x1cd)]});}),_0x550832={'date':_0x3e9257,'eur':_0x35045b[stablecoins[_0x5ca363(0x207)]['coin']][_0x32154a],'usd':_0x35045b[stablecoins['usd'][_0x5ca363(0x1bf)]][_0x32154a],'coins':_0x388380}):(_0x226165[_0x5ca363(0x1a6)][_0x5ca363(0x1d4)](_0x340cc1=>{const _0x2d4ab8=_0x5ca363;!_0x340cc1['excluded']&&_0x388380[_0x2d4ab8(0x19f)]({'coin':_0x340cc1[_0x2d4ab8(0x1bf)],'number':_0x141351[_0x340cc1[_0x2d4ab8(0x1bf)]][_0x3e9257],'price':_0x340cc1['coin']==config[_0x2d4ab8(0x20d)]?0x1:_0x35045b[_0x340cc1[_0x2d4ab8(0x1bf)]][_0x32154a]});}),_0x550832={'date':_0x3e9257,'eur':_0x35045b[stablecoins[_0x5ca363(0x207)][_0x5ca363(0x1bf)]][_0x32154a],'usd':_0x35045b[stablecoins[_0x5ca363(0x253)]['coin']][_0x32154a],'coins':_0x388380}),dbPerformance[_0x5ca363(0x22e)](_0x5ca363(0x26a))['push'](_0x550832)[_0x5ca363(0x210)]();}),emitPerformance(),await resetCoinResults();for(let _0xfa6b14 of _0x441a2d){_0xfa6b14[_0x5544fb(0x1bf)]!=config[_0x5544fb(0x20d)]&&await updateCoinResults(_0xfa6b14);}logHistory('success',_0x5544fb(0x1b8));}catch(_0x8fc69c){await handleError(_0x8fc69c,_0x5544fb(0x265));}}async function getCloses(_0xbd0891,_0x2c552d,_0x4dc958=undefined){const _0x519410=_0x162694,_0x37372b='1d';let _0x2fedef,_0x612d63;const _0xa80128=fns['differenceInCalendarDays'](new Date(),_0x2c552d)+0x1;try{const _0x104ebb=exchange['milliseconds']()-_0xa80128*0x18*0xe10*0x3e8;_0x2fedef=await exchange[_0x519410(0x23e)](_0xbd0891,_0x37372b,_0x104ebb,_0x4dc958),_0x612d63=await exchange[_0x519410(0x1f5)](_0xbd0891);}catch(_0x167138){await handleError(_0x167138,'getCloses()');}let _0x47aba3=ohlcvToCloses(_0x2fedef);return _0x47aba3[_0x519410(0x19f)](_0x612d63[_0xbd0891][_0x519410(0x1d7)]),_0x47aba3;}function ohlcvToCloses(_0x6319d7){let _0xadbd77=[];return _0x6319d7['forEach'](function(_0x406be3){const _0x5b4b8b=_0x2ab0;_0xadbd77[_0x5b4b8b(0x19f)](_0x406be3[0x4]);}),_0xadbd77;}function getConfiguration(_0x221a08){const _0xbf5bca=_0x162694;let _0x29a3ad=dbConfig['get']('bot')['find']({'botID':_0x221a08})['value']();if(_0x29a3ad){let _0x4d641=![];!_0x29a3ad[_0xbf5bca(0x23b)]&&(_0x29a3ad={..._0x29a3ad,'exchange':_0xbf5bca(0x1af)},_0x4d641=!![]),!_0x29a3ad[_0xbf5bca(0x20d)]&&(_0x29a3ad={..._0x29a3ad,'basecoin':'BTC'},_0x4d641=!![]),!_0x29a3ad[_0xbf5bca(0x20e)]&&(_0x29a3ad={..._0x29a3ad,'ordertype':_0xbf5bca(0x25c)},_0x4d641=!![]),!_0x29a3ad[_0xbf5bca(0x232)]&&(_0x29a3ad={..._0x29a3ad,'timeout':0x14},_0x4d641=!![]),!_0x29a3ad['emojibuy']&&(_0x29a3ad={..._0x29a3ad,'emojibuy':''},_0x4d641=!![]),!_0x29a3ad[_0xbf5bca(0x22d)]&&(_0x29a3ad={..._0x29a3ad,'emojisell':''},_0x4d641=!![]),!_0x29a3ad[_0xbf5bca(0x22c)]&&(_0x29a3ad={..._0x29a3ad,'showname':![]},_0x4d641=!![]),_0x4d641&&(_0x29a3ad={'botID':_0x29a3ad['botID'],'exchange':_0x29a3ad[_0xbf5bca(0x23b)],'apiKey':_0x29a3ad[_0xbf5bca(0x29f)],'apiSecret':_0x29a3ad[_0xbf5bca(0x240)],'basecoin':_0x29a3ad[_0xbf5bca(0x20d)],'botname':_0x29a3ad[_0xbf5bca(0x20a)],'showname':_0x29a3ad[_0xbf5bca(0x22c)],'threshold':_0x29a3ad[_0xbf5bca(0x1a0)],'ordertype':_0x29a3ad[_0xbf5bca(0x20e)],'timeout':_0x29a3ad[_0xbf5bca(0x232)],'startdate':_0x29a3ad[_0xbf5bca(0x1db)],'recreate':_0x29a3ad[_0xbf5bca(0x27a)],'timeshift':_0x29a3ad[_0xbf5bca(0x27b)],'headless':_0x29a3ad[_0xbf5bca(0x1eb)],'cooldown':_0x29a3ad['cooldown'],'emojibuy':_0x29a3ad[_0xbf5bca(0x1f2)],'emojisell':_0x29a3ad[_0xbf5bca(0x22d)],'portfolio':_0x29a3ad[_0xbf5bca(0x1a6)]},dbConfig['get'](_0xbf5bca(0x228))[_0xbf5bca(0x1d5)]()[_0xbf5bca(0x210)](),dbConfig[_0xbf5bca(0x22e)](_0xbf5bca(0x228))['push'](_0x29a3ad)[_0xbf5bca(0x210)]());}else _0x29a3ad={'botID':_0x221a08,'exchange':_0xbf5bca(0x1af),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xbf5bca(0x2ab)+_0x221a08,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xbf5bca(0x27b)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x29a3ad;}function emittedConfiguration(){const _0x4ff33a=_0x162694;let _0x2579b8;return config[_0x4ff33a(0x29f)]==''?_0x2579b8=config:_0x2579b8={...config,'apiKey':'************','apiSecret':_0x4ff33a(0x1c5)},_0x2579b8;}function getSettings(){const _0x3c0c5a=_0x162694;return dbSettings[_0x3c0c5a(0x22e)](_0x3c0c5a(0x21b))['value']();}function getSecure(){const _0x21b83c=_0x162694;return dbSecure[_0x21b83c(0x22e)](_0x21b83c(0x2a8))[_0x21b83c(0x1e5)]()||{};}function updateTimeshift(_0x5d1f0d){const _0x2a8cb5=_0x162694;let _0x8d21a1=dbConfig[_0x2a8cb5(0x22e)](_0x2a8cb5(0x228))[_0x2a8cb5(0x261)]({'botID':botID})[_0x2a8cb5(0x1e5)]();_0x8d21a1&&dbConfig[_0x2a8cb5(0x22e)](_0x2a8cb5(0x228))[_0x2a8cb5(0x261)]({'botID':botID})['assign']({'timeshift':_0x5d1f0d})[_0x2a8cb5(0x210)](),config['timeshift']=_0x5d1f0d,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x86cb29){const _0x2dd3d2=_0x162694;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x70c9bc=dbConfig['get'](_0x2dd3d2(0x228))['find']({'botID':botID})[_0x2dd3d2(0x1e5)]();_0x86cb29={..._0x86cb29,'apiKey':crypt[_0x2dd3d2(0x287)](secure['privateKey'],_0x86cb29[_0x2dd3d2(0x29f)])[_0x2dd3d2(0x29b)],'apiSecret':crypt[_0x2dd3d2(0x287)](secure[_0x2dd3d2(0x1c7)],_0x86cb29[_0x2dd3d2(0x240)])[_0x2dd3d2(0x29b)]};if(_0x70c9bc){if(_0x86cb29[_0x2dd3d2(0x29f)]==_0x2dd3d2(0x1c5))_0x86cb29['apiKey']=config['apiKey'];if(_0x86cb29['apiSecret']==_0x2dd3d2(0x1c5))_0x86cb29[_0x2dd3d2(0x240)]=config[_0x2dd3d2(0x240)];dbConfig[_0x2dd3d2(0x22e)](_0x2dd3d2(0x228))['find']({'botID':botID})['assign'](_0x86cb29)[_0x2dd3d2(0x210)]();}else dbConfig[_0x2dd3d2(0x22e)]('bot')[_0x2dd3d2(0x19f)](_0x86cb29)[_0x2dd3d2(0x210)](),process[_0x2dd3d2(0x1ad)]({'status':_0x2dd3d2(0x28d),'live':_0x2dd3d2(0x19d)});config={..._0x86cb29};if(config[_0x2dd3d2(0x27a)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x2dd3d2(0x1ad)]({'botname':_0x86cb29[_0x2dd3d2(0x20a)]}),proxyEmit(_0x2dd3d2(0x1a2)),reset();}async function storeHeadless(_0x4aef46){const _0x3cd453=_0x162694,_0x28c082={...config,'headless':_0x4aef46[_0x3cd453(0x1eb)]};let _0x5d1d38=dbConfig['get'](_0x3cd453(0x228))['find']({'botID':botID})[_0x3cd453(0x1e5)]();_0x5d1d38&&dbConfig[_0x3cd453(0x22e)]('bot')[_0x3cd453(0x261)]({'botID':botID})[_0x3cd453(0x24c)](_0x28c082)[_0x3cd453(0x210)](),config={..._0x28c082},proxyEmit(_0x3cd453(0x249),emittedConfiguration());}function noslash(_0xd18669){return _0xd18669['replace']('/','');}function updateNumberCoins(_0x147e97){const _0x650aed=_0x162694;_0x147e97['eventType']&&_0x147e97[_0x650aed(0x26f)]==_0x650aed(0x251)&&_0x147e97['balances']['forEach'](_0x8d93bc=>{const _0x5d226d=_0x650aed;let _0x11c102=currentCoins[_0x5d226d(0x261)](_0x20dd95=>_0x20dd95[_0x5d226d(0x1bf)]==_0x8d93bc[_0x5d226d(0x281)]),_0xeeaac4=config['portfolio'][_0x5d226d(0x261)](_0xe3067f=>_0xe3067f[_0x5d226d(0x1bf)]==_0x8d93bc[_0x5d226d(0x281)]);if(_0x11c102&&_0xeeaac4)_0x11c102[_0x5d226d(0x28b)]=Math[_0x5d226d(0x283)](Number(_0x8d93bc[_0x5d226d(0x1da)])+(_0xeeaac4[_0x5d226d(0x1c9)]||0x0),0x0);});if(_0x147e97['eventType']&&_0x147e97[_0x650aed(0x26f)]==_0x650aed(0x220)){if(_0x147e97[_0x650aed(0x1ea)]==_0x650aed(0x235)&&_0x147e97[_0x650aed(0x1be)]==_0x650aed(0x1ac)){if(lastOrders)lastOrders[_0x650aed(0x1d4)](_0x27a2b2=>{const _0x1dee38=_0x650aed;if(_0x27a2b2['orderId']==_0x147e97['orderId']){if(_0x27a2b2[_0x1dee38(0x1d0)])_0x27a2b2[_0x1dee38(0x1c2)]=_0x147e97[_0x1dee38(0x24f)]*_0x27a2b2[_0x1dee38(0x277)];else _0x27a2b2[_0x1dee38(0x1c2)]=_0x147e97[_0x1dee38(0x24f)];}});}}}async function getCoins(_0x2f2f9f=!![],_0x4a9ca5=config[_0x162694(0x20d)]){const _0xf75384=_0x162694;let _0x49f4f2,_0x1798a5=[],_0x2bbd7d=[],_0x4b13ed=[];try{_0x49f4f2=await exchange[_0xf75384(0x267)](),mybalances=_0x49f4f2[_0xf75384(0x225)];if(!_0x2f2f9f)for(const [_0x1a0db5,_0x3e554d]of Object['entries'](mybalances)){_0x4b13ed['push'](_0x1a0db5);}else config[_0xf75384(0x1a6)][_0xf75384(0x1d4)](_0x3b2839=>{const _0x33b755=_0xf75384;if(!_0x3b2839[_0x33b755(0x209)])_0x4b13ed[_0x33b755(0x19f)](_0x3b2839[_0x33b755(0x1bf)]);});if(_0x4a9ca5=='')for(const [_0xd638db,_0x58692f]of Object[_0xf75384(0x25f)](mybalances)){_0x58692f[_0xf75384(0x26e)]()!=0x0&&_0x2bbd7d[_0xf75384(0x19f)]({'coin':_0xd638db});}else for(const [_0x4f1b0d,_0x23f297]of Object[_0xf75384(0x25f)](mybalances)){if(_0x4b13ed[_0xf75384(0x23c)](_0x4f1b0d)){const _0x3c8f1c=config[_0xf75384(0x1a6)]['find'](_0x37a906=>_0x37a906['coin']==_0x4f1b0d);if((_0x23f297[_0xf75384(0x26e)]()!=0x0||_0x3c8f1c)&&(allSymbols['includes'](_0x4f1b0d+'/'+_0x4a9ca5)||_0x4f1b0d==_0x4a9ca5))_0x2bbd7d[_0xf75384(0x19f)]({'coin':_0x4f1b0d,'symbol':_0x4f1b0d+'/'+_0x4a9ca5,'reverse':![],'number':Math[_0xf75384(0x283)](_0x23f297+(_0x3c8f1c&&_0x3c8f1c[_0xf75384(0x1c9)]||0x0),0x0)}),_0x4f1b0d!=_0x4a9ca5&&_0x1798a5['push'](_0x4f1b0d+'/'+_0x4a9ca5);else(_0x23f297[_0xf75384(0x26e)]()!=0x0||_0x3c8f1c)&&allSymbols['includes'](_0x4a9ca5+'/'+_0x4f1b0d)&&(_0x2bbd7d['push']({'coin':_0x4f1b0d,'symbol':_0x4a9ca5+'/'+_0x4f1b0d,'reverse':!![],'number':Math[_0xf75384(0x283)](_0x23f297+(_0x3c8f1c&&_0x3c8f1c[_0xf75384(0x1c9)]||0x0),0x0)}),_0x4f1b0d!=_0x4a9ca5&&_0x1798a5[_0xf75384(0x19f)](_0x4a9ca5+'/'+_0x4f1b0d));}}}catch(_0x27b466){if(!_0x2f2f9f){if(_0x27b466[_0xf75384(0x26e)]()[_0xf75384(0x23c)]('API-key\x20format\x20invalid'))return logHistory(_0xf75384(0x25b),_0xf75384(0x23f)),![];else{if(_0x27b466[_0xf75384(0x26e)]()[_0xf75384(0x23c)](_0xf75384(0x297)))return logHistory(_0xf75384(0x25b),_0xf75384(0x293)),![];else{if(_0x27b466[_0xf75384(0x26e)]()[_0xf75384(0x23c)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0xf75384(0x25b),_0xf75384(0x1df)),![];else await handleError(_0x27b466,_0xf75384(0x1ae));}}}else await handleError(_0x27b466,_0xf75384(0x1ae));}return _0x2bbd7d;}async function getPortfolio(_0x295a22){const _0x3f1261=_0x162694;let _0x256182=[],_0x44cbef=[],_0x1100d3,_0xb9871a=[],_0x827186,_0x15340d;_0x295a22[_0x3f1261(0x29f)]===_0x3f1261(0x1c5)||_0x295a22[_0x3f1261(0x240)]===_0x3f1261(0x1c5)?(_0x827186=config[_0x3f1261(0x29f)],_0x15340d=config[_0x3f1261(0x240)]):(_0x827186=_0x295a22[_0x3f1261(0x29f)],_0x15340d=_0x295a22['apiSecret']);await initExchange(_0x827186,_0x15340d);let _0x358872=await loadSymbols();if(_0x358872){_0xb9871a=await getCoins(![],_0x295a22['basecoin']);if(_0xb9871a===![])proxyEmit(_0x3f1261(0x1a6),![]);else{if(_0x295a22[_0x3f1261(0x20d)]=='')proxyEmit(_0x3f1261(0x1a6),_0xb9871a);else{_0xb9871a['forEach'](_0x6a8e39=>{const _0x396aec=_0x3f1261;_0x256182[_0x396aec(0x19f)](_0x6a8e39['symbol']);});try{_0x44cbef=await exchange[_0x3f1261(0x1f5)](_0x256182);}catch(_0x27c343){await handleError(_0x27c343,_0x3f1261(0x257));}_0xb9871a['forEach'](_0x57be79=>{const _0x58a423=_0x3f1261;_0x57be79[_0x58a423(0x1bf)]!=_0x295a22['basecoin']?_0x1100d3=_0x57be79[_0x58a423(0x1d0)]?0x1/_0x44cbef[_0x57be79[_0x58a423(0x27e)]]['last']:_0x44cbef[_0x57be79[_0x58a423(0x27e)]]['last']:_0x1100d3=0x1,_0x57be79[_0x58a423(0x277)]=formatResult(_0x1100d3,0x8);}),proxyEmit(_0x3f1261(0x1a6),_0xb9871a);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x1d1827){const _0x580f57=_0x162694;let _0x13f909=!![];const _0x23658f=!_0x1d1827[_0x580f57(0x1d0)]?markets[_0x1d1827[_0x580f57(0x27e)]][_0x580f57(0x21c)][_0x580f57(0x1a7)][_0x580f57(0x237)]:markets[_0x1d1827[_0x580f57(0x27e)]]['limits'][_0x580f57(0x1b7)]['min'],_0x485b93=!_0x1d1827[_0x580f57(0x1d0)]?markets[_0x1d1827['symbol']]['limits']['cost'][_0x580f57(0x237)]:markets[_0x1d1827[_0x580f57(0x27e)]][_0x580f57(0x21c)][_0x580f57(0x1a7)][_0x580f57(0x237)];if(Math[_0x580f57(0x1a4)](_0x1d1827[_0x580f57(0x206)])<_0x23658f)_0x13f909=![];if(Math['abs'](_0x1d1827['trade'])*_0x1d1827[_0x580f57(0x1d7)]<_0x485b93)_0x13f909=![];return _0x13f909;}async function getBalances(){const _0x212381=_0x162694;let _0x51f182=0x0,_0x3c3905;const _0x4c2f36=config['threshold'];currentCoins[_0x212381(0x1d4)](_0x2242a1=>{const _0x111737=_0x212381;if(_0x2242a1[_0x111737(0x1bf)]!=config[_0x111737(0x20d)]){let _0x6581f4=global['ticker'][noslash(_0x2242a1[_0x111737(0x27e)])];_0x3c3905=_0x2242a1[_0x111737(0x1d0)]?0x1/_0x6581f4:_0x6581f4;}else _0x3c3905=0x1;let _0x1e5291=_0x2242a1[_0x111737(0x28b)]*_0x3c3905;_0x51f182+=_0x1e5291,_0x2242a1[_0x111737(0x1d7)]=formatResult(Number(_0x3c3905),0x8),_0x2242a1[_0x111737(0x1e5)]=_0x1e5291;}),currentCoins['forEach'](_0x1527c2=>{const _0x25eb42=_0x212381;let _0x568d4a=config[_0x25eb42(0x1a6)][_0x25eb42(0x261)](_0x2a50a4=>_0x2a50a4[_0x25eb42(0x1bf)]==_0x1527c2[_0x25eb42(0x1bf)]),_0x4a0050=Number(_0x568d4a[_0x25eb42(0x1e4)]),_0x88079a=_0x1527c2[_0x25eb42(0x1e5)]/_0x51f182*0x64,_0x3b0dd4=_0x4a0050*_0x51f182/0x64/_0x1527c2[_0x25eb42(0x1d7)]-_0x1527c2[_0x25eb42(0x28b)];_0x1527c2[_0x25eb42(0x1e4)]=formatResult(_0x88079a,0x3),_0x1527c2[_0x25eb42(0x1b4)]=formatResult(_0x4a0050,0x3),_0x1527c2[_0x25eb42(0x206)]=formatResult(_0x3b0dd4,0x8),_0x1527c2[_0x25eb42(0x291)]='',_0x1527c2['valid']='';if(_0x1527c2['coin']!=config[_0x25eb42(0x20d)]){if(_0x1527c2[_0x25eb42(0x1e4)]>_0x4a0050)_0x1527c2[_0x25eb42(0x291)]=_0x25eb42(0x25a),_0x1527c2['valid']=checkMinimums(_0x1527c2);else _0x1527c2[_0x25eb42(0x1e4)]<_0x4a0050&&(_0x1527c2[_0x25eb42(0x291)]=_0x25eb42(0x1c6),_0x1527c2[_0x25eb42(0x1cf)]=checkMinimums(_0x1527c2));}_0x1527c2[_0x25eb42(0x27d)]=_0x1527c2['distribution']/_0x1527c2['target']-0x1;}),currentCoins['sort']((_0x28d7b5,_0x253ff9)=>_0x28d7b5[_0x212381(0x27d)]<_0x253ff9[_0x212381(0x27d)]?0x1:_0x253ff9['delta']<_0x28d7b5[_0x212381(0x27d)]?-0x1:0x0);const _0x462cbb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x462cbb['eur'],'usd':_0x462cbb[_0x212381(0x253)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4c2f36},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x212381(0x1eb)])headlessMode({'portfolio':currentCoins,'threshold':_0x4c2f36});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x426baa=_0x162694;if(!lastBalances)return;let _0x3008b4=await getStartingBalances(![]),_0x5e8963=[],_0x49c274;JSON[_0x426baa(0x233)](lastBalances[_0x426baa(0x1a6)])['forEach'](_0x10787d=>{const _0x11f2ca=_0x426baa;let _0x11910a={'coin':_0x10787d['coin'],'number':_0x10787d[_0x11f2ca(0x28b)],'price':_0x10787d['last']};_0x5e8963[_0x11f2ca(0x19f)](_0x11910a);});const _0x1b8fbb=await getFiat();_0x49c274={'date':lastBalances['time'][_0x426baa(0x1b9)]('\x20')[0x0],'eur':_0x1b8fbb[_0x426baa(0x207)],'usd':_0x1b8fbb['usd'],'coins':_0x5e8963};let _0x28ba4a=dbPerformance[_0x426baa(0x22e)](_0x426baa(0x26a))['find']({'date':_0x49c274[_0x426baa(0x1d6)]})[_0x426baa(0x1e5)]();_0x28ba4a?dbPerformance[_0x426baa(0x22e)](_0x426baa(0x26a))[_0x426baa(0x261)]({'date':_0x49c274[_0x426baa(0x1d6)]})[_0x426baa(0x24c)](_0x49c274)[_0x426baa(0x210)]():dbPerformance[_0x426baa(0x22e)](_0x426baa(0x26a))[_0x426baa(0x19f)](_0x49c274)[_0x426baa(0x210)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x719df8=_0x162694;if(dbPerformance[_0x719df8(0x215)](_0x719df8(0x26a))['value']()){let _0x25218d=dbPerformance[_0x719df8(0x22e)]('data')[_0x719df8(0x24b)](_0x719df8(0x1d6))['value']();proxyEmit(_0x719df8(0x289),_0x25218d),lastPerformanceEmitted=getDate();}else proxyEmit(_0x719df8(0x289),[]);}async function getStartingBalances(_0x30511e=!![]){const _0x3e8780=_0x162694;let _0xa2ff3f=dbPerformance[_0x3e8780(0x22e)](_0x3e8780(0x26a))['find']({'date':config[_0x3e8780(0x1db)]})[_0x3e8780(0x1e5)]();config[_0x3e8780(0x29f)]!=''&&!_0xa2ff3f&&(await setStartDatePerformance(config),_0xa2ff3f=dbPerformance['get'](_0x3e8780(0x26a))[_0x3e8780(0x261)]({'date':config[_0x3e8780(0x1db)]})[_0x3e8780(0x1e5)]());if(config[_0x3e8780(0x29f)]==''||!_0xa2ff3f)return{};let _0x284e38=0x0,_0x561a84=0x0,_0x42b05f=0x0,_0x4812e1=[],_0x3bb298=0x0;config['portfolio'][_0x3e8780(0x1d4)](_0x104732=>{const _0x3bfe1e=_0x3e8780;if(!_0x104732[_0x3bfe1e(0x209)]){_0x4812e1[_0x3bb298]={'coin':_0x104732[_0x3bfe1e(0x1bf)],'symbol':_0x104732[_0x3bfe1e(0x27e)],'number':_0x104732[_0x3bfe1e(0x211)],'price':_0x104732[_0x3bfe1e(0x1cd)]},_0x284e38+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732['startnumber'];if(config[_0x3bfe1e(0x20d)]==_0x3bfe1e(0x1ed))_0x561a84+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732[_0x3bfe1e(0x211)]*_0xa2ff3f['eur'],_0x42b05f+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732[_0x3bfe1e(0x211)]*_0xa2ff3f['usd'];else{if(config['basecoin']=='BUSD'||config[_0x3bfe1e(0x20d)]==_0x3bfe1e(0x1f7)||config['basecoin']==_0x3bfe1e(0x299))_0x561a84+=_0x104732['startprice']*_0x104732[_0x3bfe1e(0x211)]*_0xa2ff3f[_0x3bfe1e(0x207)]/_0xa2ff3f[_0x3bfe1e(0x253)],_0x42b05f+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732[_0x3bfe1e(0x211)];else config[_0x3bfe1e(0x20d)]==_0x3bfe1e(0x275)&&(_0x561a84+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732[_0x3bfe1e(0x211)],_0x42b05f+=_0x104732[_0x3bfe1e(0x1cd)]*_0x104732[_0x3bfe1e(0x211)]*_0xa2ff3f['usd']/_0xa2ff3f[_0x3bfe1e(0x207)]);}_0x3bb298++;}});let _0xf50b40={'basecoin':_0x284e38,'eur':_0x561a84,'usd':_0x42b05f,'coins':_0x4812e1};if(_0x30511e)proxyEmit(_0x3e8780(0x217),_0xf50b40);return _0xf50b40;}function headlessMode(_0x1e597e){const _0x1b60eb=_0x162694;let _0x3b2418=_0x1e597e['portfolio'],_0x15d655=_0x1e597e['threshold'],_0xa0de1b=[];for(let _0x35912f of _0x3b2418){if(_0x35912f[_0x1b60eb(0x1bf)]!=config[_0x1b60eb(0x20d)]){if(_0x35912f[_0x1b60eb(0x1e4)]/_0x35912f[_0x1b60eb(0x1b4)]-0x1>=_0x15d655/0x64){if(_0x35912f[_0x1b60eb(0x1cf)])_0xa0de1b[_0x1b60eb(0x19f)](_0x35912f);}else{if(_0x35912f[_0x1b60eb(0x1e4)]/_0x35912f[_0x1b60eb(0x1b4)]-0x1<=-_0x15d655/0x64){if(_0x35912f[_0x1b60eb(0x1cf)])_0xa0de1b[_0x1b60eb(0x19f)](_0x35912f);}}}}_0xa0de1b['length']>0x0&&placeOrder(_0xa0de1b);}function symbolToCoin(_0x25ccd3){const _0x59fa8b=_0x162694;let _0x5b149b;if(_0x25ccd3[_0x59fa8b(0x23c)]('/'+config[_0x59fa8b(0x20d)]))_0x5b149b=_0x25ccd3['replace']('/'+config[_0x59fa8b(0x20d)],'');if(_0x25ccd3[_0x59fa8b(0x23c)](config[_0x59fa8b(0x20d)]+'/'))_0x5b149b=_0x25ccd3[_0x59fa8b(0x296)](config[_0x59fa8b(0x20d)]+'/','');return _0x5b149b;}async function validateOrders(_0x1ee8d9=0x0){const _0x581805=_0x162694;let _0x37db3e=[],_0x1ecf9e=config[_0x581805(0x20e)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x581805(0x1d4)](_0x53b95f=>{const _0x2ccd20=_0x581805;let _0x486c40=previousCoins[_0x2ccd20(0x261)](_0x978907=>_0x978907[_0x2ccd20(0x1bf)]==symbolToCoin(_0x53b95f['symbol'])),_0x32bb11=currentCoins[_0x2ccd20(0x261)](_0x4da1f6=>_0x4da1f6['coin']==symbolToCoin(_0x53b95f['symbol'])),_0x81db1f,_0x718aca;_0x53b95f[_0x2ccd20(0x291)]==_0x2ccd20(0x1c6)&&!_0x53b95f['reverse']||_0x53b95f['side']=='sell'&&_0x53b95f[_0x2ccd20(0x1d0)]?(_0x81db1f=_0x486c40[_0x2ccd20(0x28b)]+0.9*_0x53b95f[_0x2ccd20(0x1c2)],_0x718aca=_0x486c40['number']+1.1*_0x53b95f['filled']):(_0x81db1f=_0x486c40[_0x2ccd20(0x28b)]-1.1*_0x53b95f[_0x2ccd20(0x1c2)],_0x718aca=_0x486c40['number']-0.9*_0x53b95f[_0x2ccd20(0x1c2)]);const _0x2ea744=_0x53b95f['filled']!=0x0&&_0x32bb11[_0x2ccd20(0x28b)]>=_0x81db1f&&_0x32bb11[_0x2ccd20(0x28b)]<=_0x718aca;_0x37db3e['push'](_0x2ea744);if(_0x2ea744&&config[_0x2ccd20(0x20e)]!=_0x2ccd20(0x25c)){if(_0x53b95f['reverse'])logHistory('order',_0x2ccd20(0x1cb)+_0x53b95f['symbol']+'\x20'+_0x53b95f[_0x2ccd20(0x291)]+'\x20#'+formatResult(_0x53b95f[_0x2ccd20(0x1c2)]/_0x53b95f[_0x2ccd20(0x277)],0x8)+'\x20@'+formatResult(_0x53b95f[_0x2ccd20(0x277)],0x8));else logHistory(_0x2ccd20(0x247),'Order\x20filled:\x20'+_0x53b95f[_0x2ccd20(0x27e)]+'\x20'+_0x53b95f['side']+'\x20#'+formatResult(_0x53b95f['filled'],0x8)+'\x20@'+formatResult(_0x53b95f[_0x2ccd20(0x277)],0x8));}}),_0x37db3e[_0x581805(0x1d4)]((_0x6a8bed,_0x20f81d)=>{const _0x47743a=_0x581805;if(_0x6a8bed)lastOrders[_0x47743a(0x1dd)](_0x20f81d,0x1);});if(_0x1ee8d9<_0x1ecf9e&&_0x37db3e['includes'](![])){if(_0x1ee8d9==0x0){config[_0x581805(0x20e)]==_0x581805(0x25c)?logHistory(_0x581805(0x25b),_0x581805(0x29a)):logHistory(_0x581805(0x25b),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ee8d9);},0xa*0x3e8);}else{(_0x1ee8d9==0x1||_0x1ee8d9==Math[_0x581805(0x201)](_0x1ecf9e/0x2)||_0x1ee8d9==_0x1ecf9e-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ee8d9);},validateOrderInterval);}}else{lockOrders=![];if(_0x1ee8d9>0x0&&!_0x37db3e['includes'](![]))config[_0x581805(0x20e)]==_0x581805(0x25c)?logHistory('success',_0x581805(0x204)):logHistory(_0x581805(0x1f1),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x1ee8d9>0x0&&_0x37db3e['includes'](![])&&(config[_0x581805(0x20e)]=='market'?logHistory(_0x581805(0x1f1),_0x581805(0x1e6)+Math[_0x581805(0x201)](_0x1ecf9e*validateOrderInterval/0xea60)+_0x581805(0x280)):(lastOrders[_0x581805(0x1d4)](async _0x19ad98=>{const _0x3248d0=_0x581805;try{const _0x58f027=await exchange[_0x3248d0(0x219)](_0x19ad98[_0x3248d0(0x269)],_0x19ad98[_0x3248d0(0x27e)]);}catch(_0x55d55d){if(_0x55d55d['toString']()[_0x3248d0(0x23c)](_0x3248d0(0x2a7))){}else await handleError(_0x55d55d,_0x3248d0(0x1a8));}}),logHistory(_0x581805(0x1f1),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x1ecf9e*validateOrderInterval/0xea60)+_0x581805(0x280))));}}async function resetCoinResults(){const _0x3218dc=_0x162694;dbCoinResults[_0x3218dc(0x22e)]('coins')['remove']()[_0x3218dc(0x210)]();let _0x17ad36=await getStartingBalances(![]);_0x17ad36['coins']['forEach'](_0x1b16f5=>{const _0x5b7568=_0x3218dc,_0x2bd10d=_0x1b16f5[_0x5b7568(0x27e)][_0x5b7568(0x23c)](config['basecoin']+'/');if(_0x1b16f5[_0x5b7568(0x1bf)]!=config['basecoin']){let _0x5e12ad={'coin':_0x1b16f5[_0x5b7568(0x1bf)],'number':_0x1b16f5['number'],'breakeven':_0x1b16f5[_0x5b7568(0x277)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b7568(0x22e)](_0x5b7568(0x1aa))[_0x5b7568(0x19f)](_0x5e12ad)[_0x5b7568(0x210)]();}});}async function updateCoinResults(_0x31a3fc){const _0x526000=_0x162694;let _0x193c1a,_0x5f11a3,_0x4c2fc4,_0x1c34f0,_0x503ce6,_0x598efe,_0x1bbc87=dbCoinResults[_0x526000(0x22e)](_0x526000(0x1aa))['find']({'coin':_0x31a3fc[_0x526000(0x1bf)]})[_0x526000(0x1e5)]();if(!_0x1bbc87)return;if(_0x31a3fc[_0x526000(0x1b1)]&&_0x31a3fc[_0x526000(0x1b1)][_0x526000(0x205)]==config[_0x526000(0x20d)])_0x193c1a=_0x31a3fc[_0x526000(0x1b1)][_0x526000(0x1b7)];else{if(_0x31a3fc['fee']&&_0x31a3fc['fee']['currency']==_0x526000(0x1d1))_0x193c1a=_0x31a3fc[_0x526000(0x1b1)][_0x526000(0x1b7)]*global[_0x526000(0x268)][_0x526000(0x1d1)+config[_0x526000(0x20d)]];else _0x193c1a=0.001*_0x31a3fc[_0x526000(0x1c2)];}const _0x2f572c=_0x31a3fc['symbol'][_0x526000(0x23c)](config[_0x526000(0x20d)]+'/');_0x2f572c&&(_0x598efe={'coin':_0x31a3fc[_0x526000(0x1bf)],'symbol':_0x31a3fc['symbol'],'filled':_0x31a3fc[_0x526000(0x1c2)]*_0x31a3fc[_0x526000(0x277)],'side':_0x31a3fc['side']==_0x526000(0x25a)?_0x526000(0x1c6):_0x526000(0x25a),'price':0x1/_0x31a3fc[_0x526000(0x277)]},_0x31a3fc={..._0x598efe});_0x31a3fc[_0x526000(0x291)]=='buy'?_0x4c2fc4=(_0x1bbc87[_0x526000(0x24e)]*_0x1bbc87['number']+_0x31a3fc[_0x526000(0x277)]*_0x31a3fc['filled'])/(_0x1bbc87[_0x526000(0x28b)]+_0x31a3fc['filled']):_0x4c2fc4=(_0x1bbc87[_0x526000(0x24e)]*_0x1bbc87[_0x526000(0x28b)]-_0x31a3fc[_0x526000(0x277)]*_0x31a3fc[_0x526000(0x1c2)])/(_0x1bbc87[_0x526000(0x28b)]-_0x31a3fc[_0x526000(0x1c2)]);_0x31a3fc['side']==_0x526000(0x1c6)?_0x1c34f0=_0x1bbc87['realized']:_0x1c34f0=_0x1bbc87[_0x526000(0x212)]+(_0x31a3fc[_0x526000(0x277)]-_0x1bbc87['breakeven'])*_0x31a3fc['filled'];_0x5f11a3=_0x31a3fc['side']=='sell'?_0x1bbc87[_0x526000(0x28b)]-_0x31a3fc[_0x526000(0x1c2)]:_0x1bbc87[_0x526000(0x28b)]+_0x31a3fc[_0x526000(0x1c2)],_0x503ce6=(_0x31a3fc[_0x526000(0x277)]-_0x4c2fc4)*_0x5f11a3;let _0x39bbae={'coin':_0x31a3fc[_0x526000(0x1bf)],'number':_0x5f11a3,'breakeven':formatResult(_0x4c2fc4,0x8),'realized':formatResult(_0x1c34f0,0x8),'unrealized':formatResult(_0x503ce6,0x8),'fees':formatResult(_0x1bbc87[_0x526000(0x20c)]+_0x193c1a,0x8),'sells':_0x31a3fc[_0x526000(0x291)]==_0x526000(0x25a)?_0x1bbc87[_0x526000(0x1fa)]+0x1:_0x1bbc87[_0x526000(0x1fa)],'buys':_0x31a3fc['side']==_0x526000(0x1c6)?_0x1bbc87['buys']+0x1:_0x1bbc87[_0x526000(0x1e0)]};dbCoinResults[_0x526000(0x22e)](_0x526000(0x1aa))[_0x526000(0x261)]({'coin':_0x31a3fc['coin']})['assign'](_0x39bbae)[_0x526000(0x210)]();}async function placeOrder(_0x2277a3){const _0x401914=_0x162694,_0x462030=config['ordertype']==_0x401914(0x25c)?_0x401914(0x25c):_0x401914(0x224);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x401914(0x233)](JSON[_0x401914(0x288)](currentCoins));for(const _0x3d589b of _0x2277a3){let _0x3289fd,_0x49c68a,_0xd2e457,_0x13ccee,_0x509be9,_0x1e3f49=_0x3d589b[_0x401914(0x27e)];try{const _0x145d1b=await exchange['fetchTickers'](_0x1e3f49),_0x5bfd64=_0x145d1b[_0x1e3f49];_0x3289fd=_0x5bfd64['last'],_0x49c68a=_0x5bfd64[_0x401914(0x22a)],_0xd2e457=_0x5bfd64[_0x401914(0x2a1)];_0x3d589b['reverse']?(_0x13ccee=_0x3d589b[_0x401914(0x291)]==_0x401914(0x1c6)?_0x401914(0x25a):_0x401914(0x1c6),_0x509be9=Math[_0x401914(0x1a4)](_0x3d589b[_0x401914(0x206)])/_0x3289fd):(_0x13ccee=_0x3d589b[_0x401914(0x291)],_0x509be9=Math[_0x401914(0x1a4)](_0x3d589b[_0x401914(0x206)]));_0x462030=='limit'&&(config[_0x401914(0x20e)]==_0x401914(0x1d9)&&(_0x3289fd=_0x13ccee==_0x401914(0x1c6)?_0x49c68a:_0xd2e457),config['ordertype']=='limit-low'&&(_0x3289fd=_0x13ccee=='buy'?_0xd2e457:_0x49c68a));_0x509be9=formatResult(_0x509be9,0x8),_0x3289fd=formatResult(_0x3289fd,0x8);const _0x5acc39=await exchange['createOrder'](_0x1e3f49,_0x462030,_0x13ccee,_0x509be9,_0x3289fd);lastOrders[_0x401914(0x19f)]({'orderId':_0x5acc39['id'],'symbol':_0x1e3f49,'side':_0x13ccee,'reverse':_0x3d589b[_0x401914(0x1d0)],'amount':_0x3d589b['reverse']?_0x5acc39['amount']*_0x5acc39[_0x401914(0x277)]:_0x5acc39['amount'],'filled':_0x3d589b[_0x401914(0x1d0)]?_0x5acc39[_0x401914(0x1c2)]*_0x5acc39['price']:_0x5acc39['filled'],'price':_0x5acc39[_0x401914(0x277)]});const _0x3f3dcc=_0x13ccee==_0x401914(0x25a)?config[_0x401914(0x22d)]?String[_0x401914(0x229)]('0x'+config[_0x401914(0x22d)])+'\x20':'':config[_0x401914(0x1f2)]?String[_0x401914(0x229)]('0x'+config[_0x401914(0x1f2)])+'\x20':'',_0x3627cd=_0x462030==_0x401914(0x25c)?_0x401914(0x218):config[_0x401914(0x20e)]==_0x401914(0x1d9)?_0x401914(0x295):_0x401914(0x290);if(_0x462030==_0x401914(0x25c))logHistory(_0x401914(0x247),''+_0x3f3dcc+_0x3627cd+'\x20order:\x20'+_0x1e3f49+'\x20'+_0x13ccee+'\x20#'+formatResult(_0x5acc39[_0x401914(0x1c2)],0x8)+'\x20@'+formatResult(_0x5acc39[_0x401914(0x277)],0x8));else logHistory('order',''+_0x3f3dcc+_0x3627cd+'\x20order:\x20'+_0x1e3f49+'\x20'+_0x13ccee+'\x20#'+formatResult(_0x5acc39[_0x401914(0x1a7)],0x8)+'\x20@'+formatResult(_0x5acc39[_0x401914(0x277)],0x8));_0x5acc39[_0x401914(0x1bf)]=_0x3d589b[_0x401914(0x1bf)],await updateCoinResults(_0x5acc39);if(config['cooldown']!=0x0){let _0x78b85a=null;if(cooldownTracker[_0x401914(0x292)]==config['cooldown']-0x1)_0x78b85a=cooldownTracker[_0x401914(0x1ec)]();const _0x3f3dd7=getTimeStamp();cooldownTracker[_0x401914(0x19f)](_0x3f3dd7);if(_0x78b85a){const _0xade119=fns[_0x401914(0x1d8)](new Date(_0x3f3dd7),new Date(_0x78b85a));_0xade119<cooldownInterval&&(logHistory(_0x401914(0x25b),_0x401914(0x234)+config[_0x401914(0x1b6)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x401914(0x1dc)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4e21f7){if(_0x4e21f7[_0x401914(0x26e)]()['includes'](_0x401914(0x294)))logHistory(_0x401914(0x25b),_0x401914(0x21d)+_0x1e3f49);else{if(_0x4e21f7[_0x401914(0x26e)]()[_0x401914(0x23c)](_0x401914(0x216)))logHistory('error',_0x401914(0x29c)+_0x1e3f49);else await handleError(_0x4e21f7,_0x401914(0x282));}}}if(lastOrders[_0x401914(0x292)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x401914(0x20e)]==_0x401914(0x25c)?logHistory(_0x401914(0x25b),_0x401914(0x242)):logHistory(_0x401914(0x25b),_0x401914(0x1b2)));else coolingDown&&(!config[_0x401914(0x1eb)]&&logHistory(_0x401914(0x25b),_0x401914(0x1f4)));}}function logHistory(_0x99c838,_0x48247c,_0x5a4081=''){const _0x43337e=_0x162694;let _0x23dcd1={'time':getTimeStamp(),'type':_0x99c838,'event':_0x48247c,'botname':config['botname'],'showname':config[_0x43337e(0x22c)]};dbLogs[_0x43337e(0x22e)]('logs')['push'](_0x23dcd1)[_0x43337e(0x210)]();if(_0x5a4081=='')_0x5a4081=_0x48247c;proxyEmit('event',{'log':_0x23dcd1,'summary':_0x5a4081}),process[_0x43337e(0x1ad)]({'telegram':_0x23dcd1}),logging(''+_0x23dcd1[_0x43337e(0x1b0)]);}function emitHistory(_0x1c0f69={}){const _0x250a05=_0x162694;Object[_0x250a05(0x276)](_0x1c0f69)[_0x250a05(0x292)]==0x0&&(_0x1c0f69={'type':[_0x250a05(0x247),_0x250a05(0x1b0)],'event':'','page':0x1});if(_0x1c0f69[_0x250a05(0x1f9)][_0x250a05(0x23c)]('event'))_0x1c0f69[_0x250a05(0x1f9)]['splice'](_0x1c0f69[_0x250a05(0x1f9)]['indexOf'](_0x250a05(0x1b0)),0x1,_0x250a05(0x25b),_0x250a05(0x1f1));if(dbLogs[_0x250a05(0x215)](_0x250a05(0x23d))[_0x250a05(0x1e5)]()){let _0x31b827=dbLogs[_0x250a05(0x22e)]('logs')['filter'](_0xc42c5c=>{const _0x4047f2=_0x250a05;if(_0x1c0f69[_0x4047f2(0x1f9)][_0x4047f2(0x292)]==0x0)return![];else return _0x1c0f69['type']['includes'](_0xc42c5c['type']);})[_0x250a05(0x24a)](_0x1bda7c=>{const _0x3798a6=_0x250a05;if(_0x1c0f69[_0x3798a6(0x1b0)]=='')return!![];else return _0x1bda7c[_0x3798a6(0x1b0)][_0x3798a6(0x1ef)]()['includes'](_0x1c0f69[_0x3798a6(0x1b0)][_0x3798a6(0x1ef)]());})[_0x250a05(0x24b)]('time'),_0x3b77b4=_0x31b827['value']()['length'];_0x31b827=_0x31b827[_0x250a05(0x1d0)]()[_0x250a05(0x21a)]((_0x1c0f69[_0x250a05(0x26c)]-0x1)*logPageSize,_0x1c0f69[_0x250a05(0x26c)]*logPageSize-0x1)[_0x250a05(0x1d0)]()[_0x250a05(0x1e5)](),proxyEmit('event-history',{'logs':_0x31b827,'total':_0x3b77b4});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x1e6aa5){const _0x40cfa5=_0x162694,_0x16a5e6=new Date()[_0x40cfa5(0x258)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x16a5e6-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x40cfa5(0x1ad)]({'stop':_0x40cfa5(0x214)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x40cfa5(0x258)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error','Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x1e6aa5),botPaused=![],reset();}}async function handleError(_0x43d531,_0x2fcab5,_0x4d4091=''){const _0xdd0205=_0x162694;if(_0x43d531[_0xdd0205(0x26e)]()[_0xdd0205(0x23c)](_0xdd0205(0x1c0)))logHistory(_0xdd0205(0x25b),_0x2fcab5+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x43d531['toString']()[_0xdd0205(0x23c)]('ExchangeNotAvailable'))logHistory('error',_0x2fcab5+_0xdd0205(0x26d)),await pauseBot(pauseBotInterval);else{if(_0x43d531['toString']()[_0xdd0205(0x23c)](_0xdd0205(0x223)))logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x21e)),await pauseBot(pauseBotInterval);else{if(_0x43d531[_0xdd0205(0x26e)]()[_0xdd0205(0x23c)](_0xdd0205(0x19c)))logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x273)),logHistory(_0xdd0205(0x25b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0xdd0205(0x1ad)]({'stop':_0xdd0205(0x28f)});else{if(_0x43d531['toString']()[_0xdd0205(0x23c)](_0xdd0205(0x297)))logHistory('error',_0x2fcab5+_0xdd0205(0x1bc)),logHistory('error',_0xdd0205(0x1ce)),process[_0xdd0205(0x1ad)]({'stop':'kill'});else{if(_0x43d531['toString']()[_0xdd0205(0x23c)](_0xdd0205(0x230)))logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x1e7)),logHistory('error',_0xdd0205(0x1ce)),process['send']({'stop':'kill'});else{if(_0x43d531[_0xdd0205(0x26e)]()[_0xdd0205(0x23c)](_0xdd0205(0x264)))logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x243)),logHistory(_0xdd0205(0x25b),_0xdd0205(0x1ce)),process[_0xdd0205(0x1ad)]({'stop':_0xdd0205(0x28f)});else{if(_0x43d531['toString']()['includes'](_0xdd0205(0x23a)))logHistory('error',_0x2fcab5+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':_0xdd0205(0x214)});else _0x43d531[_0xdd0205(0x26e)]()['includes'](_0xdd0205(0x263))?logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x231)):(logHistory(_0xdd0205(0x25b),_0x2fcab5+_0xdd0205(0x248)),logging(_0x2fcab5+'\x20|\x20Error\x20details:\x20',_0x43d531),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3fe7fd,_0x344795){const _0x136e42=_0x162694;return parseFloat(_0x3fe7fd[_0x136e42(0x2a2)](_0x344795));}function _0x2ab0(_0x47ea4c,_0x5d93b1){const _0x42b934=_0x1bba();return _0x2ab0=function(_0x508585,_0x5b05b5){_0x508585=_0x508585-0x198;let _0x1bba87=_0x42b934[_0x508585];return _0x1bba87;},_0x2ab0(_0x47ea4c,_0x5d93b1);}function logging(_0x2d9d12,_0x1a5fbc=''){const _0x58cd7a=_0x162694;if(config['showname'])console[_0x58cd7a(0x1f3)](getTimeStamp()+':\x20'+config[_0x58cd7a(0x20a)]+_0x58cd7a(0x1fe)+_0x2d9d12,_0x1a5fbc);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x58cd7a(0x1fe)+_0x2d9d12,_0x1a5fbc);}function getServerTime(){const _0xe606d6=_0x162694,_0x50642c=new Date();return _0x50642c[_0xe606d6(0x1f0)]()+'/'+(_0x50642c['getMonth']()+0x1)[_0xe606d6(0x26e)]()[_0xe606d6(0x1e9)](0x2,'0')+'/'+_0x50642c[_0xe606d6(0x284)]()['toString']()[_0xe606d6(0x1e9)](0x2,'0')+'\x20'+_0x50642c[_0xe606d6(0x1e3)]()[_0xe606d6(0x26e)]()[_0xe606d6(0x1e9)](0x2,'0')+':'+_0x50642c['getMinutes']()[_0xe606d6(0x26e)]()[_0xe606d6(0x1e9)](0x2,'0')+':'+_0x50642c[_0xe606d6(0x252)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x36c9a6=_0x162694,_0x1fe84e=shiftedTime();return _0x1fe84e['getFullYear']()+'/'+(_0x1fe84e[_0x36c9a6(0x1ee)]()+0x1)['toString']()[_0x36c9a6(0x1e9)](0x2,'0')+'/'+_0x1fe84e[_0x36c9a6(0x284)]()[_0x36c9a6(0x26e)]()[_0x36c9a6(0x1e9)](0x2,'0')+'\x20'+_0x1fe84e['getHours']()[_0x36c9a6(0x26e)]()[_0x36c9a6(0x1e9)](0x2,'0')+':'+_0x1fe84e[_0x36c9a6(0x1e2)]()[_0x36c9a6(0x26e)]()[_0x36c9a6(0x1e9)](0x2,'0')+':'+_0x1fe84e[_0x36c9a6(0x252)]()[_0x36c9a6(0x26e)]()[_0x36c9a6(0x1e9)](0x2,'0');}function getDate(){const _0x24c67b=_0x162694,_0x33b53a=shiftedTime();return _0x33b53a[_0x24c67b(0x1f0)]()+'/'+(_0x33b53a['getMonth']()+0x1)['toString']()[_0x24c67b(0x1e9)](0x2,'0')+'/'+_0x33b53a[_0x24c67b(0x284)]()['toString']()[_0x24c67b(0x1e9)](0x2,'0');}function getHour(){const _0x4af2e9=_0x162694,_0x489bb2=shiftedTime();return _0x489bb2['getHours']()[_0x4af2e9(0x26e)]()[_0x4af2e9(0x1e9)](0x2,'0');}function sleep(_0x1d15ad){return new Promise(_0x3198f8=>setTimeout(_0x3198f8,_0x1d15ad));}function shiftedTime(){const _0x36e60a=_0x162694,_0x4e2969=new Date();let _0x54c063=_0x4e2969;if(config&&config[_0x36e60a(0x27b)]!==0x0)_0x54c063=fns[_0x36e60a(0x241)](_0x4e2969,{'hours':config[_0x36e60a(0x27b)]});return _0x54c063;}