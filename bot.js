const _0x3f8c98=_0x1889;(function(_0x50ec08,_0x6caf5e){const _0x412e10=_0x1889,_0x37cb9e=_0x50ec08();while(!![]){try{const _0x36eec3=-parseInt(_0x412e10(0x21e))/0x1*(parseInt(_0x412e10(0x360))/0x2)+-parseInt(_0x412e10(0x371))/0x3+-parseInt(_0x412e10(0x286))/0x4*(parseInt(_0x412e10(0x234))/0x5)+parseInt(_0x412e10(0x38b))/0x6+parseInt(_0x412e10(0x334))/0x7+parseInt(_0x412e10(0x2fe))/0x8+parseInt(_0x412e10(0x27b))/0x9*(parseInt(_0x412e10(0x301))/0xa);if(_0x36eec3===_0x6caf5e)break;else _0x37cb9e['push'](_0x37cb9e['shift']());}catch(_0x374561){_0x37cb9e['push'](_0x37cb9e['shift']());}}}(_0xd300,0x23ff7));const _0xe7cf18=function(){let _0x93cde6=!![];return function(_0x372319,_0x3a9140){const _0x2d840c=_0x93cde6?function(){const _0x3b8dee=_0x1889;if(_0x3a9140){const _0x3bc333=_0x3a9140[_0x3b8dee(0x2e9)](_0x372319,arguments);return _0x3a9140=null,_0x3bc333;}}:function(){};return _0x93cde6=![],_0x2d840c;};}(),_0x58cfac=_0xe7cf18(this,function(){const _0x4591d8=_0x1889;return _0x58cfac[_0x4591d8(0x274)]()['search']('(((.+)+)+)+$')[_0x4591d8(0x274)]()[_0x4591d8(0x327)](_0x58cfac)[_0x4591d8(0x2bb)](_0x4591d8(0x26a));});_0x58cfac();'use strict';const ccxt=require(_0x3f8c98(0x341)),low=require(_0x3f8c98(0x2f3)),FileSync=require(_0x3f8c98(0x2c4)),fs=require('fs'),fns=require(_0x3f8c98(0x375)),Crypt=require(_0x3f8c98(0x352))[_0x3f8c98(0x2de)],util=require(_0x3f8c98(0x2d6)),argv=require(_0x3f8c98(0x364))(process['argv'][_0x3f8c98(0x37a)](0x2))[_0x3f8c98(0x337)],path=require(_0x3f8c98(0x235));let exchange;global[_0x3f8c98(0x2ba)]={},global[_0x3f8c98(0x2ed)]={};const usdBasecoins=[_0x3f8c98(0x24e),'BUSD',_0x3f8c98(0x2dc),_0x3f8c98(0x2c8),_0x3f8c98(0x299),_0x3f8c98(0x2f9)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3f8c98(0x32f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3f8c98(0x318)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;function _0x1889(_0x38a7c4,_0x247394){const _0x4eb222=_0xd300();return _0x1889=function(_0x58cfac,_0xe7cf18){_0x58cfac=_0x58cfac-0x1f0;let _0xd30061=_0x4eb222[_0x58cfac];return _0xd30061;},_0x1889(_0x38a7c4,_0x247394);}let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x3f8c98(0x2cc))[_0x3f8c98(0x253)],botID=process[_0x3f8c98(0x337)][0x2]||_0x3f8c98(0x308),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3f8c98(0x22f)](_0x3f8c98(0x350)+botID+_0x3f8c98(0x31c)),killBot());const userID=process[_0x3f8c98(0x337)][0x3]||'',configpath=userID?_0x3f8c98(0x2bd)+userID+'/':'./config/',logspath=userID?_0x3f8c98(0x369)+userID+'/':_0x3f8c98(0x369),loggerfile=fs['createWriteStream'](logspath+_0x3f8c98(0x236),{'flags':'a'});!fs[_0x3f8c98(0x349)](configpath)&&fs[_0x3f8c98(0x279)](configpath);!fs[_0x3f8c98(0x349)](logspath)&&fs[_0x3f8c98(0x279)](logspath);const configfile=configpath+_0x3f8c98(0x25a)+botID+_0x3f8c98(0x313),logfile=configpath+'bot-'+botID+_0x3f8c98(0x2b6),performancefile=configpath+_0x3f8c98(0x25a)+botID+'-performance.json',coinresultsfile=configpath+_0x3f8c98(0x25a)+botID+_0x3f8c98(0x35f),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x3f8c98(0x254),configbackuppath=configpath+_0x3f8c98(0x277),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3f8c98(0x2f7)]({'logs':[],'version':serverversion})[_0x3f8c98(0x325)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x3f8c98(0x325)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3f8c98(0x2f7)]({'coins':[],'version':serverversion})[_0x3f8c98(0x325)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3f8c98(0x2a5),'rsaStandard':_0x3f8c98(0x306)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1336e1=>{const _0x50d625=_0x3f8c98;console[_0x50d625(0x22f)](_0x1336e1);},'simple':_0x225115=>{const _0xde43f6=_0x3f8c98;console[_0xde43f6(0x22f)](_0x225115),loggerfile[_0xde43f6(0x325)](util[_0xde43f6(0x239)](_0x225115)+'\x0a');},'full':async(_0x2f2b72,_0x427427='')=>{const _0xd1771d=_0x3f8c98;let _0x39d9ed;if(config[_0xd1771d(0x343)])_0x39d9ed=getTimeStamp()+':\x20'+config[_0xd1771d(0x363)]+'\x20>\x20'+_0x2f2b72;else _0x39d9ed=getTimeStamp()+_0xd1771d(0x23c)+botID+_0xd1771d(0x37e)+_0x2f2b72;console[_0xd1771d(0x22f)](_0x39d9ed),loggerfile[_0xd1771d(0x325)](util[_0xd1771d(0x239)](_0x39d9ed)+'\x0a'),_0x427427&&(console['log'](_0x427427),loggerfile[_0xd1771d(0x325)](util['format'](_0x427427)+'\x0a'));},'debug':async(_0x3f690d,_0x2d151e='')=>{const _0x5945ce=_0x3f8c98;let _0x2a915d;if(config[_0x5945ce(0x343)])_0x2a915d=getTimeStamp()+':\x20'+config[_0x5945ce(0x363)]+'\x20>\x20[DEBUG]\x20'+_0x3f690d;else _0x2a915d=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x3f690d;if(debugging)console['log'](_0x2a915d);loggerfile['write'](util[_0x5945ce(0x239)](_0x2a915d)+'\x0a');if(_0x2d151e){if(debugging)console[_0x5945ce(0x22f)](_0x2d151e);loggerfile[_0x5945ce(0x325)](util[_0x5945ce(0x239)](_0x2d151e)+'\x0a');}}};process['on'](_0x3f8c98(0x215),function(_0x320354){const _0x54ba2b=_0x3f8c98;logHistory('error',_0x54ba2b(0x220)),logger[_0x54ba2b(0x38a)](_0x54ba2b(0x209),_0x320354);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x3f8c98(0x32d)]);settings[_0x3f8c98(0x1fe)]!=config[_0x3f8c98(0x1fe)]&&updateOnepagemode(settings['onepagemode']);process[_0x3f8c98(0x38d)]({'started':_0x3f8c98(0x328)},_0xb681b=>{}),initializeProcessListeners();function proxyEmit(_0x316280,_0x475317=null){const _0x861511=_0x3f8c98;process[_0x861511(0x38d)]({'function':_0x316280,'args':_0x475317},_0x1ce019=>{});}function initializeProcessListeners(){const _0x23871f=_0x3f8c98;process['on'](_0x23871f(0x257),_0x4a7424=>{const _0x12ced4=_0x23871f;switch(Object[_0x12ced4(0x214)](_0x4a7424)[0x0]){case _0x12ced4(0x32d):_0x4a7424['timeshift']!=undefined&&(settings[_0x12ced4(0x32d)]=_0x4a7424[_0x12ced4(0x32d)],updateTimeshift(settings[_0x12ced4(0x32d)]));break;case'onepagemode':_0x4a7424[_0x12ced4(0x1fe)]!=undefined&&(settings['onepagemode']=_0x4a7424[_0x12ced4(0x1fe)],updateOnepagemode(settings['onepagemode']));break;case _0x12ced4(0x29c):_0x4a7424[_0x12ced4(0x29c)]!=undefined&&(bots=JSON[_0x12ced4(0x36b)](_0x4a7424[_0x12ced4(0x29c)]),proxyEmit(_0x12ced4(0x29c),bots));break;case _0x12ced4(0x227):switch(_0x4a7424[_0x12ced4(0x227)]){case _0x12ced4(0x38e):initclient();break;case _0x12ced4(0x244):toggleBotMode();break;case'emitHistory':emitHistory(_0x4a7424[_0x12ced4(0x37f)]);break;case _0x12ced4(0x310):deleteHistoryAlerts(_0x4a7424[_0x12ced4(0x37f)]);break;case _0x12ced4(0x2c6):getPortfolio(_0x4a7424['args']);break;case _0x12ced4(0x385):storeConfiguration(_0x4a7424['args']);break;case'storeHeadless':storeHeadless(_0x4a7424[_0x12ced4(0x37f)]);break;case'storeFiat':storeFiat(_0x4a7424[_0x12ced4(0x37f)]);break;case _0x12ced4(0x204):resetHistory();break;case _0x12ced4(0x31b):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4a7424['args']);break;case _0x12ced4(0x35c):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x12ced4(0x212):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x39d900=![]){const _0x7cb7e=_0x3f8c98;logger[_0x7cb7e(0x38a)](_0x7cb7e(0x2d0)+(_0x39d900?_0x7cb7e(0x2f2):_0x7cb7e(0x29f))+'\x20|\x20exchange:\x20'+config[_0x7cb7e(0x2c3)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x39d900)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x7cb7e(0x36e)]!=_0x7cb7e(0x24d)){loadingProgress=0x0;if(_0x39d900){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x16d4da){handleErrorNoStop(_0x16d4da,_0x7cb7e(0x29d));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x502de3=await getCoins();[currentCoins,currentCoinsAll]=_0x502de3,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x7cb7e(0x34d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x7cb7e(0x32c)]==0x0&&allOpenOrders[_0x7cb7e(0x32c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x51339d=_0x3f8c98;exchangeStopped=!![];try{await exchange[_0x51339d(0x20c)]();}catch(_0x294cac){await handleError(_0x294cac,_0x51339d(0x2cf));}}async function reloadExchange(){const _0x2a98d5=_0x3f8c98;while(lockOrders!=ORDERS[_0x2a98d5(0x216)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2a98d5(0x38a)](_0x2a98d5(0x2b3)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x29075a=config[_0x3f8c98(0x2c3)],_0x5d849d=config['apiKey'],_0x1d8999=config[_0x3f8c98(0x34a)],_0x4a265a=config[_0x3f8c98(0x281)]){const _0x672328=_0x3f8c98;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x29075a)&&(logHistory(_0x672328(0x295),_0x672328(0x357)+_0x29075a+'\x20exchange'),killBot());const _0x2f4955=ccxt[_0x672328(0x35d)][_0x29075a[_0x672328(0x362)]()];exchange=new _0x2f4955({'apiKey':_0x5d849d,'secret':_0x1d8999,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x672328(0x347)}});if(_0x4a265a)exchange[_0x672328(0x22c)]=_0x4a265a;}function setStableCoins(){const _0x2c59f2=_0x3f8c98;let _0x4b497c=config[_0x2c59f2(0x2f0)]=='ETH'?_0x2c59f2(0x32a):_0x2c59f2(0x251),_0x278947=!allSymbols[_0x2c59f2(0x33e)](_0x4b497c+_0x2c59f2(0x31f))?_0x2c59f2(0x2c8):_0x2c59f2(0x24e),_0x3f376d=!allSymbols[_0x2c59f2(0x33e)](_0x4b497c+_0x2c59f2(0x32e))?_0x278947:_0x2c59f2(0x2c5);stablecoins={'eur':{'coin':''+_0x4b497c+_0x3f376d,'symbol':_0x4b497c+'/'+_0x3f376d},'usd':{'coin':''+_0x4b497c+_0x278947,'symbol':_0x4b497c+'/'+_0x278947}};}async function initwsCcxt(){const _0x11efc7=_0x3f8c98;initCycle++;const _0x212187=initCycle;let _0x242ae4=[];config['portfolio']['forEach'](_0x4ca399=>{const _0x12ec3a=_0x1889;if(!_0x4ca399[_0x12ec3a(0x30b)]&&_0x4ca399[_0x12ec3a(0x21c)]!=config[_0x12ec3a(0x2f0)])_0x242ae4[_0x12ec3a(0x2a1)](_0x4ca399[_0x12ec3a(0x21b)]);});if(!_0x242ae4[_0x11efc7(0x33e)](stablecoins[_0x11efc7(0x2ce)][_0x11efc7(0x21b)]))_0x242ae4[_0x11efc7(0x2a1)](stablecoins[_0x11efc7(0x2ce)][_0x11efc7(0x21b)]);if(!_0x242ae4[_0x11efc7(0x33e)](stablecoins[_0x11efc7(0x316)][_0x11efc7(0x21b)]))_0x242ae4[_0x11efc7(0x2a1)](stablecoins['usd']['symbol']);if(config['exchange'][_0x11efc7(0x2e5)]('Binance')){if(!_0x242ae4['includes']('BNB/'+config[_0x11efc7(0x2f0)]))_0x242ae4[_0x11efc7(0x2a1)](_0x11efc7(0x29a)+config[_0x11efc7(0x2f0)]);}loadCoins(_0x242ae4),_0x242ae4=validateSymbols(_0x242ae4);const _0x53225e=async _0x2f4abd=>{const _0x111d65=_0x11efc7;let _0x40c07f;try{const _0x1a7bfc=await exchange['fetchTickers'](_0x2f4abd);Object[_0x111d65(0x300)](_0x1a7bfc)[_0x111d65(0x336)](_0xd08d1=>{const _0x28185f=_0x111d65;_0x40c07f=_0xd08d1[0x1]['symbol'],global[_0x28185f(0x2ba)][noslash(_0x40c07f)]=_0xd08d1[0x1][_0x28185f(0x33c)],global['change'][_0x40c07f]=_0xd08d1[0x1][_0x28185f(0x218)];});}catch(_0x24348b){await handleError(_0x24348b,_0x111d65(0x2e1),_0x40c07f);}},_0x27bd34=async _0x1e94d0=>{const _0x7e976c=_0x11efc7;while(initCycle==_0x212187){if(!botPaused)try{const _0x1d3aae=await exchange['watchTrades'](_0x1e94d0);global['ticker'][noslash(_0x1d3aae[0x0]['symbol'])]=_0x1d3aae[0x0][_0x7e976c(0x1f3)],await sleep(0x3e8);}catch(_0x51cf68){if(!exchangeStopped)await handleError(_0x51cf68,_0x7e976c(0x252),_0x1e94d0);}else await sleep(0x64);}},_0x472b4a=async _0x42f1b6=>{const _0x237995=_0x11efc7;await sleep(0x3c*0x3e8);while(initCycle==_0x212187){if(!botPaused){let _0x3d128c;try{const _0x21db78=await exchange[_0x237995(0x28f)](_0x42f1b6);Object[_0x237995(0x300)](_0x21db78)[_0x237995(0x336)](_0x313d01=>{const _0x444ba2=_0x237995;_0x3d128c=_0x313d01[0x1][_0x444ba2(0x21b)],global[_0x444ba2(0x2ed)][_0x3d128c]=_0x313d01[0x1][_0x444ba2(0x218)];}),await sleep(0x3c*0x3e8);}catch(_0x5c4d3f){if(!exchangeStopped)await handleError(_0x5c4d3f,_0x237995(0x305),_0x3d128c);}}else await sleep(0x64);}},_0x465f49=async _0x372123=>{const _0x3c1056=_0x11efc7;while(initCycle==_0x212187){if(!botPaused)try{const _0x51b6f1=await exchange[_0x3c1056(0x210)](_0x372123);initCycle==_0x212187&&_0x51b6f1[_0x3c1056(0x336)](_0x58c20e=>{updateNumberCoinsCcxt(_0x58c20e);});}catch(_0x5960e2){if(!exchangeStopped)await handleError(_0x5960e2,_0x3c1056(0x23a));}else await sleep(0x64);}};_0x53225e(_0x242ae4),_0x472b4a(_0x242ae4),_0x242ae4[_0x11efc7(0x336)](_0x2be246=>{_0x27bd34(_0x2be246),_0x465f49(_0x2be246);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x475e40=_0x3f8c98;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x47598b=await getCoins(),[_0x433bb9,_0x51edda]=_0x47598b;let _0x3288f9=[];currentCoins[_0x475e40(0x336)](_0x5cde68=>{const _0x1aba72=_0x475e40,_0x20c7a4=_0x433bb9[_0x1aba72(0x2ad)](_0x446dcb=>_0x446dcb[_0x1aba72(0x21c)]==_0x5cde68['coin']);if(_0x20c7a4){if(_0x5cde68[_0x1aba72(0x2d3)]!=_0x20c7a4['number']){let _0xefa573;if(_0x5cde68[_0x1aba72(0x21c)]!=config[_0x1aba72(0x2f0)]){const _0x2ca68b=global[_0x1aba72(0x2ba)][noslash(_0x5cde68[_0x1aba72(0x21b)])];_0xefa573=_0x5cde68[_0x1aba72(0x33b)]?0x1/_0x2ca68b:_0x2ca68b;}else _0xefa573=0x1;_0x3288f9[_0x1aba72(0x2a1)]({'coin':_0x5cde68[_0x1aba72(0x21c)],'symbol':_0x5cde68['symbol'],'price':_0xefa573,'number':Number(formatResult(_0x20c7a4['number']-_0x5cde68[_0x1aba72(0x2d3)],0x8)),'basecoinvalue':_0xefa573*(_0x20c7a4[_0x1aba72(0x2d3)]-_0x5cde68[_0x1aba72(0x2d3)])});}}});if(_0x3288f9[_0x475e40(0x32c)]==0x1&&!blockTransactionDetection){if(config[_0x475e40(0x2f1)]){logger[_0x475e40(0x38a)](_0x475e40(0x28b)+_0x3288f9[0x0][_0x475e40(0x21a)]+_0x475e40(0x264)+lastFees[_0x475e40(0x2a3)]);if(lastFees[_0x475e40(0x2a3)]==0x0||Math['abs'](_0x3288f9[0x0][_0x475e40(0x21a)])>lastFees[_0x475e40(0x2a3)]){delete _0x3288f9[0x0][_0x475e40(0x21b)],delete _0x3288f9[0x0]['basecoinvalue'];let _0x536a8b=[],_0x7770f4=[...config[_0x475e40(0x358)]]||[],_0x149141=config[_0x475e40(0x358)];_0x7770f4['sort']((_0x4a59c1,_0x437065)=>_0x4a59c1[_0x475e40(0x303)]>_0x437065['date']?-0x1:_0x437065[_0x475e40(0x303)]>_0x4a59c1[_0x475e40(0x303)]?0x1:0x0);const _0x2aceb3=getDate();if(_0x7770f4[0x0]){const _0x4fb07b=fns[_0x475e40(0x36b)](_0x7770f4[0x0]['date'],_0x475e40(0x240),new Date()),_0x59aa87=fns['parse'](_0x2aceb3,_0x475e40(0x240),new Date());if(fns['isEqual'](_0x4fb07b,_0x59aa87)){_0x536a8b=_0x7770f4[0x0][_0x475e40(0x243)];const _0x256f7f=_0x536a8b['find'](_0x28f28e=>_0x28f28e[_0x475e40(0x21c)]==_0x3288f9[0x0]['coin']);_0x256f7f?(_0x256f7f['number']+=_0x3288f9[0x0][_0x475e40(0x2d3)],_0x256f7f[_0x475e40(0x2d3)]==0x0&&(_0x536a8b=_0x536a8b[_0x475e40(0x247)](_0x4e149e=>{const _0x24a369=_0x475e40;return _0x4e149e['coin']!=_0x3288f9[0x0][_0x24a369(0x21c)];}))):_0x536a8b['push'](_0x3288f9[0x0]);const _0x1527bc=_0x149141[_0x475e40(0x2ad)](_0x44a000=>_0x44a000['date']==_0x2aceb3);_0x1527bc[_0x475e40(0x243)]=_0x536a8b;}else _0x149141[_0x475e40(0x2a1)]({'date':_0x2aceb3,'changes':[_0x3288f9[0x0]]});}const _0x2e090c=_0x149141['find'](_0x123cc2=>_0x123cc2[_0x475e40(0x303)]==_0x2aceb3);if(_0x2e090c){let _0x20dfe1=!![];_0x2e090c['changes']['forEach'](_0x407939=>{if(_0x407939['number']!=0x0)_0x20dfe1=![];}),_0x20dfe1&&(_0x149141=_0x149141['filter'](_0x2819d2=>{const _0x1e9a9f=_0x475e40;return _0x2819d2[_0x1e9a9f(0x303)]!=_0x2aceb3;}));}let _0x331b0f=dbConfig[_0x475e40(0x2e4)](_0x475e40(0x266))['find']({'botID':botID})['value']();_0x331b0f&&(dbConfig[_0x475e40(0x2e4)](_0x475e40(0x266))[_0x475e40(0x2ad)]({'botID':botID})[_0x475e40(0x338)]({'liquidity':_0x149141})['write'](),config[_0x475e40(0x358)]=_0x149141),logHistory(_0x475e40(0x2ca),'Portfolio\x20change\x20detected:\x20'+Math[_0x475e40(0x31a)](_0x3288f9[0x0]['number'])+'\x20'+_0x3288f9[0x0]['coin']+'\x20'+(_0x3288f9[0x0]['number']>0x0?'added':_0x475e40(0x2b8))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x475e40(0x38a)](_0x475e40(0x390)+Math['abs'](_0x3288f9[0x0][_0x475e40(0x2d3)])+'\x20'+_0x3288f9[0x0]['coin']+'\x20'+(_0x3288f9[0x0][_0x475e40(0x2d3)]>0x0?_0x475e40(0x20d):_0x475e40(0x2b8)));transactionDetected=!![];}else logger[_0x475e40(0x38a)](_0x475e40(0x388)+Math['abs'](_0x3288f9[0x0]['number'])+'\x20'+_0x3288f9[0x0][_0x475e40(0x21c)]+'\x20'+(_0x3288f9[0x0]['number']>0x0?'added':_0x475e40(0x2b8))+_0x475e40(0x25e));}currentCoins=_0x433bb9,currentCoinsAll=_0x51edda,await sleep(watchTransactionsInterval);}catch(_0x59fac0){if(!exchangeStopped)await handleError(_0x59fac0,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x420e66=_0x3f8c98;try{markets=await exchange[_0x420e66(0x24f)](),allSymbols=[],Object[_0x420e66(0x300)](markets)['forEach'](_0x2412d8=>{const _0x3c924f=_0x420e66;_0x2412d8[0x1]['active']&&_0x2412d8[0x1]['spot']&&allSymbols[_0x3c924f(0x2a1)](_0x2412d8[0x0]);});}catch(_0x57dc45){throw _0x57dc45;}}function validateSymbols(_0x130420){const _0x23504b=_0x3f8c98;let _0x5983b1=[];return _0x130420[_0x23504b(0x336)](_0x32ce1f=>{const _0x2f267c=_0x23504b;!allSymbols[_0x2f267c(0x33e)](_0x32ce1f)?logHistory(_0x2f267c(0x295),_0x2f267c(0x2d4)+_0x32ce1f+_0x2f267c(0x245)):_0x5983b1[_0x2f267c(0x2a1)](_0x32ce1f);}),_0x5983b1;}async function initclient(){const _0x17ec50=_0x3f8c98;proxyEmit(_0x17ec50(0x21d),emittedConfiguration()),proxyEmit(_0x17ec50(0x2db),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x17ec50(0x315),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x36051c=getNormalizedPerformance();emitPerformance(_0x36051c),getStartingBalances(_0x36051c);}async function toggleBotMode(){const _0xabee1a=_0x3f8c98;let _0x241887=dbConfig[_0xabee1a(0x2e4)]('bot')[_0xabee1a(0x2ad)]({'botID':botID})['value']();if(_0x241887){const _0x4f8a26=!_0x241887[_0xabee1a(0x232)];dbConfig[_0xabee1a(0x2e4)](_0xabee1a(0x266))['find']({'botID':botID})['assign']({'headless':_0x4f8a26})[_0xabee1a(0x325)](),config[_0xabee1a(0x232)]=_0x4f8a26,proxyEmit(_0xabee1a(0x21d),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x334184=_0x3f8c98;process[_0x334184(0x38d)]({'updatebotmanager':!![]},_0x534cc5=>{}),logger[_0x334184(0x38a)]('Headless:\x20'+config[_0x334184(0x232)]);}async function loadCoins(_0x13f4ac){const _0x284a81=_0x3f8c98;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x5e29d5,_0x1d5cd4=0x0,_0x5b293f=0x0;_0x13f4ac['forEach'](_0x9bdaad=>{const _0x31a8bc=_0x1889;loading['remainingSymbols'][_0x31a8bc(0x2a1)](_0x9bdaad);}),loadingCanceled=![];let _0x14caaf=![];while(_0x5e29d5!=_0x13f4ac[_0x284a81(0x32c)]+maxLoadingProgress){_0x5e29d5=loadingProgress,_0x13f4ac[_0x284a81(0x336)](_0x218068=>{const _0x4dbe42=_0x284a81;if(global['ticker'][noslash(_0x218068)]){loading[_0x4dbe42(0x344)]=loading[_0x4dbe42(0x344)]['filter'](_0x473bc3=>_0x473bc3!=_0x218068);if(!watchedSymbols[_0x4dbe42(0x33e)](_0x218068))watchedSymbols[_0x4dbe42(0x2a1)](_0x218068);_0x5e29d5++;}}),loading[_0x284a81(0x323)]=Math['round'](_0x5e29d5/(_0x13f4ac['length']+maxLoadingProgress)*0x64);loading[_0x284a81(0x323)]!=0x64&&(_0x5b293f>0x1e*0x5&&(loading[_0x284a81(0x33f)]=!![],emitLoadingProgress()),_0x5b293f>0x78*0x5&&!_0x14caaf&&(_0x14caaf=!![],logHistory(_0x284a81(0x295),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x284a81(0x344)][_0x284a81(0x256)](',\x20')+_0x284a81(0x2a7)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x284a81(0x36f)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x418cd1=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x284a81(0x27a)]=!![],emitLoadingProgress();break;}else _0x1d5cd4!=loading['progress']&&(_0x1d5cd4=loading['progress'],emitLoadingProgress()),_0x5b293f++,await sleep(0xc8);}_0x5e29d5==_0x13f4ac[_0x284a81(0x32c)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x284a81(0x38d)]({'status':_0x284a81(0x268),'live':_0x284a81(0x328)},_0x51949e=>{}),_0x14caaf&&logHistory('success',_0x284a81(0x1fb)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2aacf9=_0x3f8c98;proxyEmit(_0x2aacf9(0x21d),{...emittedConfiguration(),'configstate':_0x2aacf9(0x2d7)});}function emitLoadingProgress(){const _0x588246=_0x3f8c98;proxyEmit(_0x588246(0x289),loading);}async function getFiat(){const _0xb5440a=_0x3f8c98;let _0x3fd032=global[_0xb5440a(0x2ba)][stablecoins[_0xb5440a(0x2ce)][_0xb5440a(0x21c)]],_0x3d2036=global[_0xb5440a(0x2ba)][stablecoins[_0xb5440a(0x316)][_0xb5440a(0x21c)]];return{'eur':Number(_0x3fd032),'usd':Number(_0x3d2036)};}function capitalize(_0x16d473){const _0x2d86b3=_0x3f8c98;return _0x16d473['substring'](0x0,0x1)['toUpperCase']()+_0x16d473[_0x2d86b3(0x267)](0x1);}function supportedExchanges(){const _0x16c439=_0x3f8c98,_0x1af720=['ws',_0x16c439(0x28f),_0x16c439(0x339),_0x16c439(0x368),'watchOrders',_0x16c439(0x348),_0x16c439(0x275),_0x16c439(0x1f6),_0x16c439(0x2b7),'fetchBalance'];let _0x580105=[],_0xf107b8=[],_0x583f8a=ccxt['pro'][_0x16c439(0x2db)];_0x583f8a['forEach'](_0x2bcd4c=>{const _0x1ab9d1=_0x16c439;try{const _0x5b1e69=new ccxt['pro'][_0x2bcd4c]();_0xf107b8[_0x1ab9d1(0x2a1)](_0x5b1e69);}catch(_0x215a29){}}),_0xf107b8[_0x16c439(0x336)](_0x178417=>{const _0x5399e8=_0x16c439;let _0x28285e=0x0;_0x1af720[_0x5399e8(0x336)](_0x2dbcbe=>{const _0x31c1e6=_0x5399e8;_0x2dbcbe in _0x178417['has']&&_0x178417[_0x31c1e6(0x2c1)][_0x2dbcbe]&&_0x28285e++;}),_0x28285e==_0x1af720[_0x5399e8(0x32c)]&&_0x580105[_0x5399e8(0x2a1)](capitalize(_0x178417['id']));});let _0x163098=[];return _0x583f8a['forEach'](_0x4e5e89=>{const _0x1b2579=_0x16c439;_0x4e5e89=capitalize(_0x4e5e89);if(!_0x580105[_0x1b2579(0x33e)](_0x4e5e89))_0x163098[_0x1b2579(0x2a1)](_0x4e5e89);}),_0x580105;}function _0xd300(){const _0x1dd502=['amountToPrecision','USDP','MIN_NOTIONAL','distribution','coins','getSeconds','590280yvbyuI','page','entries','93770RRjtfq','buys','date','Cex','fetchTickers()','RSA-OAEP','event-history','001','logs','ORDERS.UNLOCKED','excluded','\x20minutes\x20-\x20','2.6.0','InvalidNonce','padEnd','deleteHistoryAlerts','startdate',':\x20timer\x20>','-config.json','Error\x20details:','balances','usd','0\x20-\x20EXECUTION:\x20','\x20-\x20pausing\x20bot\x20for\x20','InvalidOrder','abs','getStartingBalances',',\x20must\x20be\x20a\x203\x20digit\x20number','2\x20-\x20Validate\x20orders:\x20','\x20not\x20available','/USD','\x20order:\x20','canceled','startnumber','progress','ordertype','write','findIndex','constructor','running','max','ETH','getTime','length','timeshift','/EUR','freeze','orderId','shift','writeFile','RequestTimeout','359954SkyOGe','min','forEach','argv','assign','fetchTicker','no\x20open\x20orders','reverse','last','1\x20-\x20Unlock\x20orders','includes','timeout','recovery','ccxt','getOpenOrders()','showname','remainingSymbols','exec','getPortfolio(1)','spot','cancelOrder','existsSync','apiSecret','Error\x20while\x20deleting\x20files:\x20','ID:\x20','Loading\x20completed','split','cancelOrders()','Error:\x20Invalid\x20argument\x20','\x20portfolio:</b>\x20\x0a\x0a','hybrid-crypto-js','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','round','customId','net-basecoin','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','liquidity','floor','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','threshold','cancelLoading','pro','\x20API\x20secret\x20is\x20invalid','-results.json','215590JTCnet','privateKey','toLowerCase','botname','yargs/yargs','delta','ongoing','configuration-stored','watchTrades','./logs/','API-key\x20format\x20invalid','parse','Order\x20is\x20invalid:\x20','market','apiKey','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','startprice','619041euKacB','1\x20-\x20Validate\x20orders:\x20','************','stringify','date-fns','fromCodePoint','DDoSProtection','\x20/\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','slice','limit','event','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20>\x20','args','limit-low','order','timestamp','trade','recreateCoinResults()','storeConfiguration','\x20change','Transaction\x20detection\x20blocked','Portfolio\x20change\x20detected:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','debug','1664538YJwDki','decrypt','send','initclient','getCoins()','Fee\x20discount\x20refund\x20detected:\x20','full','limit-high','sells','price','getPortfolio(0)','differenceInSeconds','fetchOpenOrders','getFullYear','starting-balance-','Market','Waited\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.3.5','warning','onepagemode','2\x20-\x20Orders\x20unlocked','amount','OrderNotFound','cooldown','%\x20(','resetHistory','<pre>','\x20value','cost','placeOrder()','Uncaught\x20Exception:','data','settings','close','added','rightTxt','openOrders','watchOrders','\x20|\x20lock\x20orders:\x20','sendPortfolioTelegram','fetchBalance','keys','uncaughtException','UNLOCKED','closed','percentage','ExchangeNotAvailable','basecoinvalue','symbol','coin','configuration','1CpAOZC','time','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','getHours','<b>','portfolio','BNB','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','datetime','function','fees','Transaction\x20detection\x20unblocked','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','total','password','\x20metrics:</b>\x20\x0a\x0a','open','log','emojisell','random','headless','change24h','183045teiroj','path','/output-000.log','remove','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','format','watchOrders()','2.5.0',':\x20Bot\x20','recent20','balancing\x20resumes\x20when\x20cooldown\x20ends','Limit\x20(high-margin)','yyyy/MM/dd','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Invalid\x20API\x20key\x20or\x20secret\x20entered','changes','toggleBotMode','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','1\x20-\x20FILLED\x20known\x20order:\x20','filter','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Exception\x20thrown\x20in\x20','Exchange','breakeven','***','USD','loadMarkets','set','BTC','watchTrades()','version','bb-secure.json','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','join','message','currency','Bitget','bot-','map','secure','Huobi','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','side','sort','limits','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','OnMaintenance','\x20|\x20highest\x20fee:\x20','fiat','bot','substring','enabled','balancing\x20resumed','(((.+)+)+)+$','netoffset','offset','Avoiding\x20continuous\x20order\x20attempts','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','indexOf','Insufficient\x20funds\x20to\x20execute\x20order:\x20','</pre>','splice','Trigger:\x20','toString','createOrder','replace','/backup/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','mkdirSync','cancel','162CUakoh','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20orders\x20in\x20less\x20than\x20','filled','getCoinNumber()','Invalid\x20quantity','apiPassword','UNLOCKING','2\x20-\x20handling\x20FILLED\x20order:\x20','valid','Net\x20','12iOumOd','botID','must\x20be\x20greater\x20than\x20minimum\x20amount','coin-loading-progress','restart','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','getMinutes','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','getMonth','fetchTickers','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','-performance.json','value','status','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','error','Net\x20effect','fee','type','USDC','BNB/','\x20has\x20a\x2024h\x20drop\x20of\x20','bots','loadSymbols()','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','exchange\x20not\x20reloaded','leftTxt','push','toFixed','highest','.json','sha256','emojibuy','\x20-\x20bot\x20not\x20started','RateLimitExceeded','Order(s)\x20not\x20validated\x20after\x20','No\x20more\x20open\x20orders\x20-\x20','sell','Unfilled\x20order(s)\x20canceled\x20after\x20','find','none','padStart','target','initial','LOCKED','Executing\x20exchange\x20reload','<b>Bot\x20','ORDERS.LOCKED','-events.json','fetchClosedOrders','removed','recreate','ticker','search','Resetting\x20coin\x20results:\x20','./config/','getDate','Bybit','net-fiat','has','ORDERS.UNLOCKING','exchange','lowdb/adapters/FileSync','EUR','getPortfolio','Cooldown\x20ended\x20-\x20balancing\x20resumed','USDT','Order\x20filled:\x20','success','cloneDeep','./version.json','unlinkSync','eur','stopExchange()','Reset\x20|\x20','sortBy','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','number','Invalid\x20symbol:\x20','AuthenticationError','util','loading-canceled','\x20|\x20','Executed\x20','performance','exchanges','TUSD','final','Crypt','orderstatus','\x20:\x20','initTickers()','Order\x20amount\x20is\x20invalid:\x20','red_yellow_blue','get','startsWith','parseISO','average','Unknown\x20error\x20occured','apply','string','\x20network\x20error','colorscheme','change','realized','buy','basecoin','autoliquidity','exchange\x20reloaded','lowdb','\x20exchange\x20error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20closed\x20the\x20connection','defaults'];_0xd300=function(){return _0x1dd502;};return _0xd300();}function setStartDatePerformance(){const _0x272a38=_0x3f8c98;if(config&&config[_0x272a38(0x358)][0x0][_0x272a38(0x243)][_0x272a38(0x32c)]!=0x0){const _0x4d77aa=config['liquidity'][0x0][_0x272a38(0x243)];dbPerformance[_0x272a38(0x2e4)](_0x272a38(0x20a))[_0x272a38(0x2ad)]({'date':config['startdate']})[_0x272a38(0x338)]({'coins':_0x4d77aa})[_0x272a38(0x325)]();}}async function recreateCoinResults(){const _0x582eb6=_0x3f8c98;let _0x210ec7,_0x161740=[];try{const _0x4f4e10=fns[_0x582eb6(0x239)](fns[_0x582eb6(0x2e6)](config[_0x582eb6(0x311)][_0x582eb6(0x276)](/\//g,'-')),_0x582eb6(0x389));for(const _0x57196a of currentCoins){if(_0x57196a[_0x582eb6(0x21c)]!=config['basecoin']){let _0x4d1a77=0x0,_0x2c47cc,_0xca04ed;_0x210ec7=await getAllEventOrders(_0x57196a['symbol']);if(_0x210ec7[_0x582eb6(0x32c)]>0x0)_0x210ec7['forEach'](_0x42fa14=>{const _0x396e2d=_0x582eb6,_0x410ed3=_0x57196a['symbol'][_0x396e2d(0x33e)](config['basecoin']+'/');_0x161740[_0x396e2d(0x2a1)]({'datetime':_0x42fa14[_0x396e2d(0x226)],'coin':_0x57196a[_0x396e2d(0x21c)],'symbol':_0x57196a[_0x396e2d(0x21b)],'side':_0x42fa14['side'],'reverse':_0x410ed3,'amount':formatResult(_0x42fa14[_0x396e2d(0x27e)],0x8),'filled':formatResult(_0x42fa14[_0x396e2d(0x27e)],0x8),'price':formatResult(_0x42fa14[_0x396e2d(0x1f3)],0x8)}),_0x4d1a77=_0x42fa14[_0x396e2d(0x25f)]==_0x396e2d(0x2ef)?_0x4d1a77+_0x42fa14[_0x396e2d(0x27e)]:_0x4d1a77-_0x42fa14['filled'];if(!_0xca04ed)_0xca04ed=_0x42fa14[_0x396e2d(0x1f3)];});_0x2c47cc=_0x57196a[_0x582eb6(0x2d3)]-_0x4d1a77;let _0x4b7efb;config[_0x582eb6(0x358)][_0x582eb6(0x336)](_0x1692bc=>{const _0x18fb96=_0x582eb6;!_0x4b7efb&&(_0x4b7efb=_0x1692bc[_0x18fb96(0x243)][_0x18fb96(0x2ad)](_0x2d4bac=>_0x2d4bac[_0x18fb96(0x21c)]==_0x57196a['coin']),_0x4b7efb&&(_0x2c47cc=_0x4b7efb[_0x18fb96(0x2d3)],_0xca04ed=_0x4b7efb[_0x18fb96(0x1f3)]));});let _0x158e53=dbCoinResults[_0x582eb6(0x2e4)](_0x582eb6(0x2fc))[_0x582eb6(0x2ad)]({'coin':_0x57196a['coin']})['value']();_0x158e53={'coin':_0x57196a[_0x582eb6(0x21c)],'number':_0x2c47cc,'breakeven':_0xca04ed,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x582eb6(0x2e4)](_0x582eb6(0x2fc))[_0x582eb6(0x2ad)]({'coin':_0x57196a[_0x582eb6(0x21c)]})[_0x582eb6(0x338)](_0x158e53)[_0x582eb6(0x325)]();}}_0x161740['sort']((_0x13855f,_0x510920)=>_0x13855f[_0x582eb6(0x226)]>_0x510920[_0x582eb6(0x226)]?0x1:_0x510920[_0x582eb6(0x226)]>_0x13855f['datetime']?-0x1:0x0);let _0xc7b601=0x0;for(let _0x3628a7 of _0x161740){await updateCoinResults(_0x3628a7,!![]);}}catch(_0x5295a9){await handleError(_0x5295a9,_0x582eb6(0x384));}}async function getAllEventOrders(_0x4c051e){const _0x2d0cb8=_0x3f8c98;let _0x2a65b9=[],_0x2feb5a=dbLogs['get'](_0x2d0cb8(0x309))[_0x2d0cb8(0x247)](_0x4ca767=>{const _0xbb9d0d=_0x2d0cb8,_0x1086fc=_0x4ca767['event'][_0xbb9d0d(0x362)]();return _0x1086fc['includes'](_0x4c051e['toLowerCase']())&&(_0x1086fc['includes'](_0xbb9d0d(0x36d))&&_0x1086fc[_0xbb9d0d(0x33e)](_0xbb9d0d(0x381))||_0x1086fc[_0xbb9d0d(0x33e)](_0xbb9d0d(0x27e))&&_0x1086fc['includes'](_0xbb9d0d(0x381)));})[_0x2d0cb8(0x2d1)](_0x2d0cb8(0x21f))['value']();return _0x2feb5a['forEach'](_0x35f64c=>{const _0xe15795=_0x2d0cb8,_0x31c5a8=_0x35f64c['event'][_0xe15795(0x33e)](_0xe15795(0x2ab))?'sell':'buy',_0x3771eb=/#([0-9]|\.)+\s/i,_0x14ed08=Number(_0x3771eb[_0xe15795(0x345)](_0x35f64c[_0xe15795(0x37c)])[0x0][_0xe15795(0x37a)](0x1)),_0x956005=/@([0-9]|\.)+$/i,_0x349827=Number(_0x956005[_0xe15795(0x345)](_0x35f64c['event'])[0x0][_0xe15795(0x37a)](0x1));_0x2a65b9[_0xe15795(0x2a1)]({'datetime':_0x35f64c[_0xe15795(0x21f)],'coin':symbolToCoin(_0x4c051e),'symbol':_0x4c051e,'side':_0x31c5a8,'amount':_0x14ed08,'filled':_0x14ed08,'price':_0x349827});}),_0x2a65b9;}async function getAllOrders(_0x454de7,_0x584716){const _0x94637d=_0x3f8c98;let _0x404075=[];while(_0x584716<exchange['milliseconds']()){const _0x39a1e9=0x1f4;try{const _0x4b5634=await exchange['fetchClosedOrders'](_0x454de7,_0x584716,_0x39a1e9);if(_0x4b5634['length'])_0x584716=_0x4b5634[_0x4b5634[_0x94637d(0x32c)]-0x1][_0x94637d(0x382)]+0x1,_0x404075=_0x404075['concat'](_0x4b5634);else break;}catch(_0x1e9019){await handleError(_0x1e9019,'getAllOrders()',_0x454de7);}}return _0x404075;}async function validate24hChanges(){const _0x17fa74=_0x3f8c98;for(const _0x49ec37 of currentCoins){if(_0x49ec37[_0x17fa74(0x21c)]!=config[_0x17fa74(0x2f0)]){let _0x35862c;_0x49ec37['reverse']?_0x35862c=formatResult((0x1/(global[_0x17fa74(0x2ed)][noslash(_0x49ec37[_0x17fa74(0x21b)])]/0x64+0x1)-0x1)*0x64,0x3):_0x35862c=global['change'][noslash(_0x49ec37['symbol'])],_0x35862c<config[_0x17fa74(0x233)]&&(logHistory(_0x17fa74(0x295),_0x49ec37[_0x17fa74(0x21c)]+_0x17fa74(0x29b)+_0x35862c+'%'),logHistory(_0x17fa74(0x295),_0x17fa74(0x2f5)),logHistory(_0x17fa74(0x295),_0x17fa74(0x37d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3c7330,_0x2e41fc){const _0x1e35f1=_0x3f8c98;if(!_0x3c7330)return!![];const _0x14ac98=_0x2e41fc[_0x1e35f1(0x34e)]('.'),_0x302c56=_0x3c7330[_0x1e35f1(0x34e)]('.');for(var _0x2d8283=0x0;_0x2d8283<_0x302c56['length'];_0x2d8283++){const _0x2db6a6=~~_0x302c56[_0x2d8283],_0x3efdad=~~_0x14ac98[_0x2d8283];if(_0x2db6a6<_0x3efdad)return!![];if(_0x2db6a6>_0x3efdad)return![];}return![];}async function oneTimeMigration(){const _0x19c932=_0x3f8c98;let _0x36deb1=dbLogs[_0x19c932(0x2e4)](_0x19c932(0x253))[_0x19c932(0x292)]();if(isOlderVersion(_0x36deb1,_0x19c932(0x1fc))){let _0x109476=[];const _0x1c5716=dbLogs[_0x19c932(0x2e4)](_0x19c932(0x309))[_0x19c932(0x292)]();_0x1c5716['forEach'](_0x3b1c24=>{const _0x2db00f=_0x19c932;_0x109476['push']({'time':_0x3b1c24[_0x2db00f(0x21f)],'type':_0x3b1c24['type'],'event':_0x3b1c24[_0x2db00f(0x37c)]});}),dbLogs[_0x19c932(0x2e4)](_0x19c932(0x309))['assign'](_0x109476)[_0x19c932(0x325)]();}let _0x5caf6e=dbConfig[_0x19c932(0x2e4)](_0x19c932(0x253))['value']();if(isOlderVersion(_0x5caf6e,_0x19c932(0x1fc))){let _0x7f7c38=dbConfig['get'](_0x19c932(0x266))[_0x19c932(0x2ad)]({'botID':botID})[_0x19c932(0x292)]();if(_0x7f7c38){let _0x590159=[];_0x7f7c38[_0x19c932(0x223)][_0x19c932(0x336)](_0x131801=>{const _0x1a950b=_0x19c932;_0x590159[_0x1a950b(0x2a1)]({'coin':_0x131801[_0x1a950b(0x21c)],'number':_0x131801[_0x1a950b(0x322)],'price':_0x131801[_0x1a950b(0x370)]}),delete _0x131801[_0x1a950b(0x322)],delete _0x131801[_0x1a950b(0x370)];});if(_0x590159[_0x19c932(0x32c)]!==0x0)fs[_0x19c932(0x332)](configbackuppath+(_0x19c932(0x1f8)+botID+_0x19c932(0x2a4)),JSON[_0x19c932(0x374)](_0x590159,null,0x4),function(_0x448461){if(_0x448461){}});const _0x3990fc=(_0x47a772,_0x58f2ee)=>{const _0xd70dd0=_0x19c932;let _0x2cc5e6=[];_0x58f2ee['forEach'](_0x3d23bf=>{const _0x4eebd6=_0x1889,_0x476aae=_0x47a772[_0x4eebd6(0x2ad)](_0x2cece2=>_0x2cece2[_0x4eebd6(0x21c)]==_0x3d23bf[_0x4eebd6(0x21c)]);if(!_0x476aae)_0x2cc5e6['push'](_0x3d23bf);});let _0x4a7ebe=[];return _0x47a772[_0xd70dd0(0x336)](_0x53cb51=>{const _0x552a73=_0xd70dd0,_0x19ec39=_0x58f2ee['find'](_0x4161f5=>_0x4161f5[_0x552a73(0x21c)]==_0x53cb51['coin']);if(!_0x19ec39||_0x19ec39[_0x552a73(0x2d3)]==0x0&&_0x53cb51[_0x552a73(0x2d3)]!=0x0)_0x4a7ebe[_0x552a73(0x2a1)](_0x53cb51);}),{'missingDay1':_0x2cc5e6,'notInDay2':_0x4a7ebe};},_0x5665cb=dbPerformance['get'](_0x19c932(0x20a))[_0x19c932(0x2cb)]()[_0x19c932(0x292)]();if(_0x5665cb[_0x19c932(0x32c)]>0x1){const {missingDay1:_0x3a07dc,notInDay2:_0x5590bd}=_0x3990fc(_0x590159,_0x5665cb[0x1][_0x19c932(0x2fc)]);_0x590159=[..._0x590159,..._0x3a07dc],_0x5590bd[_0x19c932(0x336)](_0x44cb63=>{const _0x4206f9=_0x19c932;let _0x24bd3f=_0x590159[_0x4206f9(0x326)](_0xab07f3=>_0xab07f3['coin']==_0x44cb63[_0x4206f9(0x21c)]);_0x24bd3f!=-0x1&&_0x590159[_0x4206f9(0x272)](_0x24bd3f,0x1);});}_0x590159['sort']((_0x22c712,_0x437abb)=>_0x22c712[_0x19c932(0x21c)]>_0x437abb[_0x19c932(0x21c)]?0x1:_0x437abb[_0x19c932(0x21c)]>_0x22c712[_0x19c932(0x21c)]?-0x1:0x0);let _0x357a11=[{'date':_0x7f7c38[_0x19c932(0x311)],'changes':_0x590159}];_0x5665cb['length']>0x2&&_0x5665cb[_0x19c932(0x336)]((_0x24c236,_0x42b245)=>{const _0x26038c=_0x19c932;if(_0x42b245>0x0&&_0x42b245<_0x5665cb[_0x26038c(0x32c)]-0x1){const {missingDay1:_0x52e9d2,notInDay2:_0x4b5c6a}=_0x3990fc(_0x5665cb[_0x42b245][_0x26038c(0x2fc)],_0x5665cb[_0x42b245+0x1][_0x26038c(0x2fc)]);_0x590159=[],(_0x52e9d2[_0x26038c(0x32c)]!=0x0||_0x4b5c6a[_0x26038c(0x32c)]!=0x0)&&(_0x52e9d2['length']!=0x0&&_0x590159[_0x26038c(0x2a1)](..._0x52e9d2),_0x4b5c6a[_0x26038c(0x32c)]!=0x0&&(_0x4b5c6a[_0x26038c(0x336)](_0x1b441d=>{_0x1b441d['number']=-_0x1b441d['number'];}),_0x590159[_0x26038c(0x2a1)](..._0x4b5c6a)),_0x590159[_0x26038c(0x260)]((_0x108d36,_0x4f8af4)=>_0x108d36[_0x26038c(0x21c)]>_0x4f8af4['coin']?0x1:_0x4f8af4[_0x26038c(0x21c)]>_0x108d36[_0x26038c(0x21c)]?-0x1:0x0),_0x357a11[_0x26038c(0x2a1)]({'date':_0x5665cb[_0x42b245+0x1]['date'],'changes':_0x590159}));}}),dbConfig[_0x19c932(0x2e4)](_0x19c932(0x266))[_0x19c932(0x2ad)]({'botID':botID})[_0x19c932(0x338)]({..._0x7f7c38,'liquidity':_0x357a11})[_0x19c932(0x325)]();}}if(isOlderVersion(_0x5caf6e,_0x19c932(0x30d))){let _0x303c83=dbConfig[_0x19c932(0x2e4)](_0x19c932(0x266))[_0x19c932(0x2ad)]({'botID':botID})['value']();if(_0x303c83){const _0x38f108=_0x303c83['exchange'],_0x26234b=_0x38f108?capitalize(_0x38f108):'Binance';dbConfig[_0x19c932(0x2e4)](_0x19c932(0x266))[_0x19c932(0x2ad)]({'botID':botID})['assign']({'exchange':_0x26234b})[_0x19c932(0x325)]();}}let _0x2e315c=dbPerformance[_0x19c932(0x2e4)]('version')['value']();isOlderVersion(_0x2e315c,_0x19c932(0x1fc))&&setStartDatePerformance();let _0x35b03f=dbCoinResults[_0x19c932(0x2e4)]('version')[_0x19c932(0x292)]();if(isOlderVersion(_0x35b03f,_0x19c932(0x23b))){let _0x23929a=dbCoinResults[_0x19c932(0x2e4)](_0x19c932(0x2fc))['value']();if(_0x23929a[_0x19c932(0x32c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x438a02=_0x3f8c98;dbConfig[_0x438a02(0x250)]('version',serverversion)['write'](),dbPerformance['set'](_0x438a02(0x253),serverversion)['write'](),dbLogs[_0x438a02(0x250)]('version',serverversion)[_0x438a02(0x325)](),dbCoinResults[_0x438a02(0x250)](_0x438a02(0x253),serverversion)[_0x438a02(0x325)]();}function getConfiguration(_0x4f208f){const _0x5237ee=_0x3f8c98;let _0x5afbb9=dbConfig[_0x5237ee(0x2e4)](_0x5237ee(0x266))[_0x5237ee(0x2ad)]({'botID':_0x4f208f})['value']();if(_0x5afbb9){let _0x2b0548=![];typeof _0x5afbb9['threshold']==_0x5237ee(0x2ea)&&(_0x5afbb9={..._0x5afbb9,'threshold':Number(_0x5afbb9['threshold'])},_0x2b0548=!![]),_0x5afbb9[_0x5237ee(0x233)]==undefined&&(_0x5afbb9={..._0x5afbb9,'change24h':-0x14},_0x2b0548=!![]),_0x5afbb9[_0x5237ee(0x265)]==undefined&&(_0x5afbb9={..._0x5afbb9,'fiat':_0x5237ee(0x24e)},_0x2b0548=!![]),_0x5afbb9[_0x5237ee(0x1fe)]==undefined&&(_0x5afbb9={..._0x5afbb9,'onepagemode':settings[_0x5237ee(0x1fe)]},_0x2b0548=!![]),_0x5afbb9['colorscheme']==undefined&&(_0x5afbb9={..._0x5afbb9,'colorscheme':_0x5237ee(0x2e3)},_0x2b0548=!![]),_0x5afbb9[_0x5237ee(0x2f1)]==undefined&&(_0x5afbb9={..._0x5afbb9,'autoliquidity':!![]},_0x2b0548=!![]),_0x2b0548&&(_0x5afbb9={'botID':_0x5afbb9[_0x5237ee(0x287)],'exchange':_0x5afbb9[_0x5237ee(0x2c3)],'apiKey':_0x5afbb9['apiKey'],'apiSecret':_0x5afbb9[_0x5237ee(0x34a)],'apiPassword':_0x5afbb9['apiPassword'],'basecoin':_0x5afbb9[_0x5237ee(0x2f0)],'botname':_0x5afbb9[_0x5237ee(0x363)],'showname':_0x5afbb9[_0x5237ee(0x343)],'threshold':_0x5afbb9['threshold'],'ordertype':_0x5afbb9[_0x5237ee(0x324)],'timeout':_0x5afbb9[_0x5237ee(0x33f)],'fiat':_0x5afbb9['fiat'],'startdate':_0x5afbb9[_0x5237ee(0x311)],'recreate':_0x5afbb9[_0x5237ee(0x2b9)],'timeshift':_0x5afbb9['timeshift'],'onepagemode':_0x5afbb9[_0x5237ee(0x1fe)],'headless':_0x5afbb9[_0x5237ee(0x232)],'cooldown':_0x5afbb9[_0x5237ee(0x202)],'change24h':_0x5afbb9[_0x5237ee(0x233)],'emojibuy':_0x5afbb9[_0x5237ee(0x2a6)],'emojisell':_0x5afbb9[_0x5237ee(0x230)],'colorscheme':_0x5afbb9[_0x5237ee(0x2ec)],'portfolio':_0x5afbb9[_0x5237ee(0x223)],'autoliquidity':_0x5afbb9['autoliquidity'],'liquidity':_0x5afbb9[_0x5237ee(0x358)],'openOrders':_0x5afbb9[_0x5237ee(0x20f)]},dbConfig[_0x5237ee(0x2e4)](_0x5237ee(0x266))[_0x5237ee(0x237)]()[_0x5237ee(0x325)](),dbConfig[_0x5237ee(0x2e4)](_0x5237ee(0x266))[_0x5237ee(0x2a1)](_0x5afbb9)[_0x5237ee(0x325)]());}else _0x5afbb9={'botID':_0x4f208f,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x4f208f,'showname':![],'threshold':0x3,'ordertype':_0x5237ee(0x36d),'timeout':0x14,'fiat':_0x5237ee(0x24e),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5237ee(0x32d)],'onepagemode':settings[_0x5237ee(0x1fe)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5237ee(0x2e3),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5afbb9;}function emittedConfiguration(){const _0x71d9c0=_0x3f8c98;let _0x24a1e2;if(config[_0x71d9c0(0x36e)]=='')_0x24a1e2={...config,'configstate':'initial'};else config[_0x71d9c0(0x36e)]==_0x71d9c0(0x24d)?_0x24a1e2={...config,'configstate':_0x71d9c0(0x340)}:(_0x24a1e2={...config,'apiKey':_0x71d9c0(0x373),'apiSecret':_0x71d9c0(0x373)},config[_0x71d9c0(0x281)]&&(_0x24a1e2['apiPassword']=_0x71d9c0(0x373)));return _0x24a1e2;}function getSettings(){const _0x3a2750=_0x3f8c98;return dbSettings[_0x3a2750(0x2e4)](_0x3a2750(0x20b))[_0x3a2750(0x292)]();}function getSecure(){const _0x3ffbc3=_0x3f8c98;return dbSecure[_0x3ffbc3(0x2e4)](_0x3ffbc3(0x25c))[_0x3ffbc3(0x292)]()||{};}function updateTimeshift(_0x559ad8){const _0x1fd225=_0x3f8c98;let _0x5ec613=dbConfig['get'](_0x1fd225(0x266))[_0x1fd225(0x2ad)]({'botID':botID})['value']();_0x5ec613&&dbConfig[_0x1fd225(0x2e4)](_0x1fd225(0x266))[_0x1fd225(0x2ad)]({'botID':botID})[_0x1fd225(0x338)]({'timeshift':_0x559ad8})[_0x1fd225(0x325)](),config['timeshift']=_0x559ad8,proxyEmit(_0x1fd225(0x21d),emittedConfiguration());}function updateOnepagemode(_0x2aa73a){const _0x35d7c3=_0x3f8c98;let _0x38f6dc=dbConfig[_0x35d7c3(0x2e4)](_0x35d7c3(0x266))[_0x35d7c3(0x2ad)]({'botID':botID})[_0x35d7c3(0x292)]();_0x38f6dc&&dbConfig[_0x35d7c3(0x2e4)]('bot')[_0x35d7c3(0x2ad)]({'botID':botID})[_0x35d7c3(0x338)]({'onepagemode':_0x2aa73a})[_0x35d7c3(0x325)](),config[_0x35d7c3(0x1fe)]=_0x2aa73a,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3c362a){const _0x10423d=_0x3f8c98;logger[_0x10423d(0x38a)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x10423d(0x387));let _0x364e46=![],_0x307ffb=![],_0x4f899d=[];_0x3c362a['portfolio'][_0x10423d(0x336)](_0x4cd3f1=>{const _0x123e1d=_0x10423d;if(!_0x4cd3f1[_0x123e1d(0x30b)]&&_0x4cd3f1[_0x123e1d(0x21c)]!=_0x3c362a[_0x123e1d(0x2f0)])_0x4f899d['push'](_0x4cd3f1['symbol']);}),_0x4f899d[_0x10423d(0x336)](_0x3e312a=>{const _0x2ee194=_0x10423d,_0xc0d335=currentCoins['find'](_0x1242db=>_0x1242db[_0x2ee194(0x21b)]==_0x3e312a);!_0xc0d335&&(_0x364e46=!![]);}),currentCoins['forEach'](_0x3616a2=>{const _0x3f38ae=_0x10423d;if(_0x3616a2[_0x3f38ae(0x21c)]!=config[_0x3f38ae(0x2f0)]){const _0x22e42a=_0x4f899d[_0x3f38ae(0x2ad)](_0x52b00b=>_0x52b00b==_0x3616a2[_0x3f38ae(0x21b)]);!_0x22e42a&&(_0x364e46=!![]);}}),_0x3c362a[_0x10423d(0x223)][_0x10423d(0x336)](_0x1c41cf=>{const _0x251fa0=_0x10423d,_0x3e7eee=config[_0x251fa0(0x223)][_0x251fa0(0x2ad)](_0x277114=>_0x277114[_0x251fa0(0x21c)]==_0x1c41cf['coin']);if(_0x3e7eee&&_0x1c41cf[_0x251fa0(0x26c)]!=_0x3e7eee['offset'])_0x307ffb=!![];});let _0x5c5efc=dbConfig[_0x10423d(0x2e4)]('bot')['find']({'botID':botID})[_0x10423d(0x292)]();_0x3c362a={..._0x3c362a,'apiKey':crypt[_0x10423d(0x38c)](secure[_0x10423d(0x361)],_0x3c362a[_0x10423d(0x36e)])[_0x10423d(0x257)],'apiSecret':crypt[_0x10423d(0x38c)](secure[_0x10423d(0x361)],_0x3c362a[_0x10423d(0x34a)])[_0x10423d(0x257)]};_0x3c362a[_0x10423d(0x281)]&&(_0x3c362a['apiPassword']=crypt[_0x10423d(0x38c)](secure['privateKey'],_0x3c362a[_0x10423d(0x281)])['message']);let _0x2262eb=![];if(_0x5c5efc){_0x3c362a[_0x10423d(0x36e)]==_0x10423d(0x373)?_0x3c362a[_0x10423d(0x36e)]=config[_0x10423d(0x36e)]:_0x2262eb=!![];_0x3c362a[_0x10423d(0x34a)]=='************'?_0x3c362a[_0x10423d(0x34a)]=config[_0x10423d(0x34a)]:_0x2262eb=!![];if(_0x3c362a[_0x10423d(0x281)]=='************')_0x3c362a[_0x10423d(0x281)]=config[_0x10423d(0x281)];else{if(_0x3c362a['apiPassword'])_0x2262eb=!![];}dbConfig['get']('bot')[_0x10423d(0x2ad)]({'botID':botID})[_0x10423d(0x338)](_0x3c362a)[_0x10423d(0x325)]();}else dbConfig[_0x10423d(0x2e4)]('bot')[_0x10423d(0x2a1)](_0x3c362a)[_0x10423d(0x325)](),_0x2262eb=!![],process[_0x10423d(0x38d)]({'status':_0x10423d(0x268),'live':_0x10423d(0x328)},_0x9c7fec=>{});process['send']({'botname':_0x3c362a[_0x10423d(0x363)]},_0x196a9d=>{}),updateBotManager(),config={..._0x3c362a},proxyEmit(_0x10423d(0x367)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2262eb)await reset(!![]);else _0x364e46||_0x307ffb?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x10423d(0x229));}async function storeHeadless(_0xb7f7f7){const _0x307122=_0x3f8c98,_0x564d44={...config,'headless':_0xb7f7f7[_0x307122(0x232)]};let _0xfc96d0=dbConfig[_0x307122(0x2e4)](_0x307122(0x266))[_0x307122(0x2ad)]({'botID':botID})[_0x307122(0x292)]();_0xfc96d0&&dbConfig['get']('bot')['find']({'botID':botID})[_0x307122(0x338)](_0x564d44)['write'](),config={..._0x564d44},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x2832bb){const _0x1a4c50=_0x3f8c98,_0x18043f={...config,'fiat':_0x2832bb};let _0x1473b3=dbConfig[_0x1a4c50(0x2e4)](_0x1a4c50(0x266))['find']({'botID':botID})[_0x1a4c50(0x292)]();_0x1473b3&&dbConfig[_0x1a4c50(0x2e4)](_0x1a4c50(0x266))[_0x1a4c50(0x2ad)]({'botID':botID})[_0x1a4c50(0x338)](_0x18043f)[_0x1a4c50(0x325)](),config={..._0x18043f},proxyEmit(_0x1a4c50(0x21d),emittedConfiguration());}function resetHistory(){const _0x2e69de=_0x3f8c98;logger[_0x2e69de(0x1f0)]('Resetting\x20bot\x20history');try{if(fs[_0x2e69de(0x349)](path[_0x2e69de(0x256)](configpath,'bot-'+botID+_0x2e69de(0x2b6))))fs[_0x2e69de(0x2cd)](path[_0x2e69de(0x256)](configpath,_0x2e69de(0x25a)+botID+_0x2e69de(0x2b6)));if(fs[_0x2e69de(0x349)](path['join'](configpath,_0x2e69de(0x25a)+botID+_0x2e69de(0x291))))fs[_0x2e69de(0x2cd)](path[_0x2e69de(0x256)](configpath,_0x2e69de(0x25a)+botID+'-performance.json'));if(fs['existsSync'](path[_0x2e69de(0x256)](configpath,_0x2e69de(0x25a)+botID+'-results.json')))fs['unlinkSync'](path[_0x2e69de(0x256)](configpath,_0x2e69de(0x25a)+botID+_0x2e69de(0x35f)));}catch(_0x23dd46){if(_0x23dd46)logger[_0x2e69de(0x1f0)](_0x2e69de(0x34b),_0x23dd46);}const _0x275dd0=getDate();let _0x522c1e=[];currentCoins[_0x2e69de(0x336)](_0x4f5481=>{const _0x4cfe1d=_0x2e69de;_0x522c1e['push']({'coin':_0x4f5481[_0x4cfe1d(0x21c)],'number':_0x4f5481[_0x4cfe1d(0x2d3)],'price':_0x4f5481[_0x4cfe1d(0x33c)]});});let _0x3dc105=dbConfig[_0x2e69de(0x2e4)](_0x2e69de(0x266))[_0x2e69de(0x2ad)]({'botID':botID})[_0x2e69de(0x292)]();_0x3dc105&&(dbConfig[_0x2e69de(0x2e4)](_0x2e69de(0x266))[_0x2e69de(0x2ad)]({'botID':botID})['assign']({'liquidity':[{'date':_0x275dd0,'changes':_0x522c1e}]})[_0x2e69de(0x325)](),config['liquidity']=[]),process[_0x2e69de(0x38d)]({'stop':'restart'},_0x40f676=>{});}function noslash(_0x5ecd65){const _0x2816b8=_0x3f8c98;return _0x5ecd65[_0x2816b8(0x276)]('/','');}function updateHighestFee(_0x3e6fb2){const _0x296f6c=_0x3f8c98;if(_0x3e6fb2['reverse']){let _0x41eabb={'filled':_0x3e6fb2[_0x296f6c(0x27e)]*_0x3e6fb2[_0x296f6c(0x1f3)],'amount':_0x3e6fb2[_0x296f6c(0x27e)]*_0x3e6fb2[_0x296f6c(0x1f3)],'side':_0x3e6fb2[_0x296f6c(0x25f)]==_0x296f6c(0x2ab)?_0x296f6c(0x2ef):'sell','price':0x1/_0x3e6fb2['price']};_0x3e6fb2={..._0x3e6fb2,..._0x41eabb};}const _0x471a15=defaultFee*_0x3e6fb2[_0x296f6c(0x27e)]*_0x3e6fb2[_0x296f6c(0x1f3)];lastFees[_0x296f6c(0x23d)]['length']===0x14&&lastFees['recent20']['shift'](),lastFees[_0x296f6c(0x23d)]['push'](_0x471a15),lastFees[_0x296f6c(0x2a3)]=Math[_0x296f6c(0x329)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x448005){const _0x5a5592=_0x3f8c98;logger[_0x5a5592(0x38a)](_0x5a5592(0x317)+_0x448005[_0x5a5592(0x21b)]+_0x5a5592(0x2d8)+_0x448005[_0x5a5592(0x293)]+'\x20|\x20'+_0x448005[_0x5a5592(0x27e)]+_0x5a5592(0x378)+_0x448005[_0x5a5592(0x200)]+'\x20|\x20'+_0x448005['id']);let _0x521938=_0x448005['status'],_0x2f3b3a=![];currentCoins['forEach'](_0x2a7fce=>{const _0x4e93a1=_0x5a5592;_0x2a7fce[_0x4e93a1(0x21b)]==_0x448005[_0x4e93a1(0x21b)]&&(_0x2f3b3a=!![]);});if(!_0x2f3b3a)return;const _0x5f23a4=currentCoins[_0x5a5592(0x2ad)](_0x66ef18=>_0x66ef18[_0x5a5592(0x21b)]==_0x448005['symbol']),_0x549c9c=_0x591f6b=>{const _0x10109b=_0x5a5592;if(_0x5f23a4)_0x5f23a4[_0x10109b(0x2df)]=_0x591f6b;};if(_0x521938==_0x5a5592(0x22e))_0x549c9c(_0x5a5592(0x22e));else{if(_0x521938==_0x5a5592(0x321)){_0x549c9c(_0x5a5592(0x321));const _0x125b34=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x125b34,await getOpenOrders(),handleOpenOrders();}else{if(_0x521938==_0x5a5592(0x217)){let _0x17ab84=![];if(lastOrders)for(const _0x41375a of lastOrders){const _0x20974d=0xc8,_0x17c744=0x1388;let _0x5adb8c=0x0;while(!_0x41375a[_0x5a5592(0x330)]&&_0x5adb8c*_0x20974d<_0x17c744){_0x5adb8c++,await sleep(_0x20974d);}if(_0x5adb8c>0x0)logger[_0x5a5592(0x38a)](_0x5a5592(0x1fa)+_0x5adb8c*_0x20974d/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x41375a[_0x5a5592(0x330)]==_0x448005['id']){logger[_0x5a5592(0x38a)](_0x5a5592(0x246)+_0x448005['id']),_0x17ab84=!![];if(_0x41375a['filled']==0x0){logger['debug'](_0x5a5592(0x283)+_0x448005['id']);if(_0x448005[_0x5a5592(0x2e7)])_0x41375a[_0x5a5592(0x1f3)]=_0x448005[_0x5a5592(0x2e7)];else{if(_0x448005[_0x5a5592(0x1f3)])_0x41375a['price']=_0x448005['price'];else{}}_0x41375a[_0x5a5592(0x27e)]=_0x448005[_0x5a5592(0x27e)],updateHighestFee(_0x41375a),_0x549c9c('filled'),await validateOrders();if(lockOrders==ORDERS[_0x5a5592(0x2b2)]){const _0x334d39=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x334d39;}_0x41375a[_0x5a5592(0x297)]={'currency':_0x448005[_0x5a5592(0x297)]?_0x448005[_0x5a5592(0x297)]['currency']:null,'cost':_0x448005[_0x5a5592(0x297)]?_0x448005[_0x5a5592(0x297)][_0x5a5592(0x207)]:0x0},await updateCoinResults(_0x41375a);}}}if(!_0x17ab84){logger[_0x5a5592(0x38a)](_0x5a5592(0x379)+_0x448005['id']),_0x549c9c(_0x5a5592(0x27e));const _0x1cb6a1=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1cb6a1,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4b367c=JSON[_0x5a5592(0x36b)](lastBalances[_0x5a5592(0x223)]);const _0x5d7719=_0x4b367c[_0x5a5592(0x2ad)](_0x2f0993=>_0x2f0993[_0x5a5592(0x21b)]==_0x448005['symbol']);if(_0x5d7719){if(_0x521938=='open')_0x5d7719[_0x5a5592(0x2df)]=_0x5d7719[_0x5a5592(0x2df)]=='filled'?_0x5a5592(0x27e):_0x5a5592(0x22e);else{if(_0x521938==_0x5a5592(0x321))_0x5d7719[_0x5a5592(0x2df)]=_0x5d7719[_0x5a5592(0x2df)]==_0x5a5592(0x27e)?_0x5a5592(0x27e):_0x5a5592(0x321);else _0x521938=='closed'&&(_0x5d7719[_0x5a5592(0x2df)]=_0x5a5592(0x27e));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5a5592(0x374)](_0x4b367c)},proxyEmit(_0x5a5592(0x315),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x27518c=![];currentCoins['forEach'](_0x589441=>{const _0x5a005f=_0x1889;_0x27518c=allOpenOrders[_0x5a005f(0x2ad)](_0xc2ba8a=>_0xc2ba8a[_0x5a005f(0x21b)]==_0x589441[_0x5a005f(0x21b)]),_0x589441[_0x5a005f(0x2df)]=_0x27518c?'open':'none';});}async function getCoins(_0x334803=0x0,_0x24c50f=!![],_0x3c44f5=config[_0x3f8c98(0x2f0)]){const _0x4979d4=_0x3f8c98;let _0x3f5067,_0x35564c=[],_0x196ef6=[],_0x29fd1a=[];if(_0x334803)await sleep(_0x334803);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3f5067=await exchange[_0x4979d4(0x213)](),mybalances=_0x3f5067[_0x4979d4(0x22b)];for(const [_0x567d24,_0x249710]of Object[_0x4979d4(0x300)](mybalances)){_0x29fd1a[_0x4979d4(0x2a1)](_0x567d24);}config[_0x4979d4(0x223)][_0x4979d4(0x336)](_0x13b649=>{const _0x215e88=_0x4979d4;!_0x29fd1a[_0x215e88(0x33e)](_0x13b649[_0x215e88(0x21c)])&&(mybalances[_0x13b649['coin']]=0x0);});if(_0x3c44f5=='')for(const [_0x54a319,_0x5ef66d]of Object[_0x4979d4(0x300)](mybalances)){_0x5ef66d!=0x0&&_0x35564c['push']({'coin':_0x54a319});}else{let _0x25f2cf=![];for(const [_0x337eb7,_0x56ced6]of Object[_0x4979d4(0x300)](mybalances)){const _0x51ed9e=config[_0x4979d4(0x223)]['find'](_0x20a304=>_0x20a304['coin']==_0x337eb7),_0x5127a3=_0x337eb7+'/'+_0x3c44f5,_0x208ac2=_0x3c44f5+'/'+_0x337eb7,_0x14132d=currentCoins['find'](_0x22c3f5=>_0x22c3f5[_0x4979d4(0x21c)]==_0x337eb7);_0x25f2cf=![];if((_0x56ced6!=0x0||_0x51ed9e)&&(allSymbols['includes'](_0x5127a3)||_0x337eb7==_0x3c44f5))_0x35564c[_0x4979d4(0x2a1)]({'coin':_0x337eb7,'symbol':_0x5127a3,'reverse':![],'number':Math[_0x4979d4(0x329)](_0x56ced6+(_0x51ed9e&&_0x51ed9e[_0x4979d4(0x26c)]||0x0),0x0),'orderstatus':_0x14132d?_0x14132d['orderstatus']:_0x4979d4(0x2ae)});else{if((_0x56ced6!=0x0||_0x51ed9e)&&allSymbols[_0x4979d4(0x33e)](_0x208ac2))_0x35564c[_0x4979d4(0x2a1)]({'coin':_0x337eb7,'symbol':_0x208ac2,'reverse':!![],'number':Math[_0x4979d4(0x329)](_0x56ced6+(_0x51ed9e&&_0x51ed9e[_0x4979d4(0x26c)]||0x0),0x0),'orderstatus':_0x14132d?_0x14132d[_0x4979d4(0x2df)]:_0x4979d4(0x2ae)});else _0x51ed9e&&_0x35564c[_0x4979d4(0x2a1)]({'coin':_0x51ed9e[_0x4979d4(0x21c)],'symbol':_0x51ed9e[_0x4979d4(0x21b)],'reverse':_0x51ed9e['reverse'],'number':0x0,'orderstatus':_0x4979d4(0x2ae)});}}}}catch(_0x354786){if(!_0x24c50f)handleErrorNoStop(_0x354786,_0x4979d4(0x38f));else await handleError(_0x354786,_0x4979d4(0x38f));}return _0x196ef6=cloneDeep(_0x35564c),_0x35564c=_0x35564c[_0x4979d4(0x247)](_0x46b34e=>{const _0x2618c6=_0x4979d4,_0x51ea5d=config[_0x2618c6(0x223)][_0x2618c6(0x2ad)](_0x23d155=>_0x23d155[_0x2618c6(0x21c)]==_0x46b34e['coin']);return _0x51ea5d&&!_0x51ea5d[_0x2618c6(0x30b)];}),[_0x35564c,_0x196ef6];}async function getCoinNumber(_0x2a9ee8){const _0xd09ed5=_0x3f8c98;let _0x56f6b6;try{const _0x4aee7d=await exchange[_0xd09ed5(0x213)]();_0x56f6b6=_0x4aee7d[_0xd09ed5(0x22b)][_0x2a9ee8];}catch(_0x1e2acb){await handleError(_0x1e2acb,_0xd09ed5(0x27f));}return _0x56f6b6;}async function getOpenOrders(){const _0x26484e=_0x3f8c98;let _0x187151;allOpenOrders=[];try{for(const _0xf02c4f of config[_0x26484e(0x223)]){!_0xf02c4f[_0x26484e(0x30b)]&&_0xf02c4f['coin']!=config[_0x26484e(0x2f0)]&&(_0x187151=await exchange['fetchOpenOrders'](_0xf02c4f['symbol']),_0x187151[_0x26484e(0x32c)]>0x0&&allOpenOrders[_0x26484e(0x2a1)](_0x187151[0x0]));}}catch(_0x169545){await handleError(_0x169545,_0x26484e(0x342));}}async function handleOpenOrders(_0x177a53=0x0){const _0x37b552=_0x3f8c98;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x37b552(0x2b2)]&&allOrdersPlaced&&(_0x177a53==0x0?(logger[_0x37b552(0x38a)]('1\x20-\x20Handle\x20open\x20orders'),_0x177a53++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x37b552(0x38a)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x37b552(0x33a))));}async function testAPI(_0x1f2582){const _0x33bc57=_0x3f8c98,_0x1767a2=ccxt[_0x33bc57(0x35d)][_0x1f2582[_0x33bc57(0x2c3)][_0x33bc57(0x362)]()],_0x223fa2=new _0x1767a2({'apiKey':_0x1f2582[_0x33bc57(0x36e)],'secret':_0x1f2582[_0x33bc57(0x34a)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1f2582[_0x33bc57(0x281)])_0x223fa2[_0x33bc57(0x22c)]=_0x1f2582[_0x33bc57(0x281)];try{await _0x223fa2[_0x33bc57(0x24f)]();}catch(_0x1095a3){throw _0x1095a3;}}function cloneDeep(_0x151792){const _0x37cd16=_0x3f8c98;return JSON[_0x37cd16(0x36b)](JSON['stringify'](_0x151792));}async function getPortfolio(_0x2fcaf8){const _0x154c12=_0x3f8c98;let _0x4641dc=[],_0x420b61=[],_0x241d55=[],_0x5cfa70;if(_0x2fcaf8[_0x154c12(0x36e)]!==_0x154c12(0x373)||_0x2fcaf8[_0x154c12(0x34a)]!==_0x154c12(0x373)||_0x2fcaf8[_0x154c12(0x281)]&&_0x2fcaf8[_0x154c12(0x281)]!=='************'){if(config['exchange']){if(_0x2fcaf8['apiKey']==_0x154c12(0x373))_0x2fcaf8[_0x154c12(0x36e)]=config['apiKey'];if(_0x2fcaf8['apiSecret']==_0x154c12(0x373))_0x2fcaf8[_0x154c12(0x34a)]=config[_0x154c12(0x34a)];if(_0x2fcaf8[_0x154c12(0x281)]==_0x154c12(0x373))_0x2fcaf8['apiPassword']=config[_0x154c12(0x281)];try{await testAPI(_0x2fcaf8);}catch(_0x350db5){if(_0x350db5[_0x154c12(0x274)]()[_0x154c12(0x33e)](_0x154c12(0x2d5))){logger[_0x154c12(0x38a)](_0x154c12(0x242)),proxyEmit('portfolio',![]);return;}else{handleError(_0x350db5,_0x154c12(0x1f4));return;}}}await initExchange(_0x2fcaf8[_0x154c12(0x2c3)],_0x2fcaf8[_0x154c12(0x36e)],_0x2fcaf8[_0x154c12(0x34a)],_0x2fcaf8[_0x154c12(0x281)]);try{await loadSymbols();}catch(_0x5c2ee8){if(_0x5c2ee8['toString']()[_0x154c12(0x33e)](_0x154c12(0x2d5))){proxyEmit(_0x154c12(0x223),![]);return;}else{handleError(_0x5c2ee8,_0x154c12(0x346));return;}}const _0x139173=await getCoins(0x0,![],_0x2fcaf8[_0x154c12(0x2f0)]);_0x241d55=cloneDeep(_0x139173[0x1]);}else _0x241d55=cloneDeep(currentCoinsAll);if(_0x2fcaf8[_0x154c12(0x2f0)]=='')proxyEmit(_0x154c12(0x223),_0x241d55);else{_0x241d55[_0x154c12(0x336)](_0xbf8640=>{const _0x3bb4f6=_0x154c12;if(_0xbf8640['coin']!=_0x2fcaf8[_0x3bb4f6(0x2f0)]&&allSymbols[_0x3bb4f6(0x33e)](_0xbf8640[_0x3bb4f6(0x21b)]))_0x4641dc[_0x3bb4f6(0x2a1)](_0xbf8640[_0x3bb4f6(0x21b)]);});if(_0x4641dc[_0x154c12(0x32c)]==0x0)logHistory(_0x154c12(0x295),_0x154c12(0x26e));else{try{_0x420b61=await exchange[_0x154c12(0x28f)](_0x4641dc);}catch(_0x1bb035){if(_0x1bb035['toString']()['includes'](_0x154c12(0x2d5))){proxyEmit(_0x154c12(0x223),![]);return;}else handleError(_0x1bb035,'getPortfolio(2)');}_0x241d55[_0x154c12(0x336)](_0x21fcfd=>{const _0x3d97b8=_0x154c12;_0x21fcfd[_0x3d97b8(0x21c)]!=_0x2fcaf8[_0x3d97b8(0x2f0)]?_0x420b61[_0x21fcfd['symbol']]?_0x5cfa70=_0x21fcfd['reverse']?0x1/_0x420b61[_0x21fcfd[_0x3d97b8(0x21b)]][_0x3d97b8(0x33c)]:_0x420b61[_0x21fcfd[_0x3d97b8(0x21b)]][_0x3d97b8(0x33c)]:_0x5cfa70=0x0:_0x5cfa70=0x1,_0x21fcfd[_0x3d97b8(0x1f3)]=formatResult(_0x5cfa70,0x8);}),proxyEmit(_0x154c12(0x223),_0x241d55);}}}function truncateTradeAmount(_0x28beb4,_0x58e548){const _0x2d6fd0=_0x3f8c98;let _0x48c917=0x0;try{_0x48c917=exchange[_0x2d6fd0(0x2f8)](_0x28beb4,_0x58e548);}catch(_0x29c0d1){}return _0x48c917;}function checkMinimums(_0x3e272d){const _0x1a2b8d=_0x3f8c98;let _0x22ccc0=!![];const _0x1edc10=!_0x3e272d[_0x1a2b8d(0x33b)]?markets[_0x3e272d[_0x1a2b8d(0x21b)]][_0x1a2b8d(0x261)][_0x1a2b8d(0x200)][_0x1a2b8d(0x335)]:markets[_0x3e272d[_0x1a2b8d(0x21b)]][_0x1a2b8d(0x261)][_0x1a2b8d(0x207)]['min'],_0x48a635=!_0x3e272d[_0x1a2b8d(0x33b)]?markets[_0x3e272d[_0x1a2b8d(0x21b)]]['limits'][_0x1a2b8d(0x207)]['min']:markets[_0x3e272d[_0x1a2b8d(0x21b)]][_0x1a2b8d(0x261)]['amount'][_0x1a2b8d(0x335)],_0x244b55=truncateTradeAmount(_0x3e272d['symbol'],_0x3e272d[_0x1a2b8d(0x383)]);_0x3e272d[_0x1a2b8d(0x383)]=_0x244b55;if(Math[_0x1a2b8d(0x31a)](_0x244b55)<_0x1edc10)_0x22ccc0=![];if(Math[_0x1a2b8d(0x31a)](_0x244b55)*_0x3e272d[_0x1a2b8d(0x33c)]<_0x48a635)_0x22ccc0=![];if(_0x3e272d['side']==_0x1a2b8d(0x2ab)){let _0x14c3b8=config[_0x1a2b8d(0x223)]['find'](_0x442134=>_0x442134['coin']==_0x3e272d[_0x1a2b8d(0x21c)]);if(_0x14c3b8[_0x1a2b8d(0x26c)]>0x0){if(Math[_0x1a2b8d(0x31a)](_0x244b55)>_0x3e272d[_0x1a2b8d(0x2d3)]-_0x14c3b8['offset'])_0x22ccc0=![];}else{if(Math['abs'](_0x244b55)>_0x3e272d[_0x1a2b8d(0x2d3)])_0x22ccc0=![];}}if(_0x3e272d[_0x1a2b8d(0x25f)]==_0x1a2b8d(0x2ef)){let _0x4c4d37=config[_0x1a2b8d(0x223)][_0x1a2b8d(0x2ad)](_0x4208a3=>_0x4208a3[_0x1a2b8d(0x21c)]==config[_0x1a2b8d(0x2f0)]),_0x31e32a=currentCoins['find'](_0x2b0d68=>_0x2b0d68[_0x1a2b8d(0x21c)]==config['basecoin']);if(_0x4c4d37[_0x1a2b8d(0x26c)]>0x0){if(Math[_0x1a2b8d(0x31a)](_0x244b55)*_0x3e272d['last']>_0x31e32a[_0x1a2b8d(0x2d3)]-_0x4c4d37[_0x1a2b8d(0x26c)])_0x22ccc0=![];}else{if(Math[_0x1a2b8d(0x31a)](_0x244b55)*_0x3e272d['last']>_0x31e32a[_0x1a2b8d(0x2d3)])_0x22ccc0=![];}}return _0x22ccc0;}async function getBalances(_0x18e955=!![]){const _0x280c5f=_0x3f8c98;let _0x4a6632=0x0,_0x463aa6;const _0x429c06=config[_0x280c5f(0x35b)];if(config[_0x280c5f(0x232)]&&config[_0x280c5f(0x233)]<0x0)await validate24hChanges();currentCoins[_0x280c5f(0x336)](_0x4fa841=>{const _0x29d977=_0x280c5f;if(_0x4fa841[_0x29d977(0x21c)]!=config[_0x29d977(0x2f0)]){let _0x5a6a2b=global[_0x29d977(0x2ba)][noslash(_0x4fa841[_0x29d977(0x21b)])];_0x463aa6=_0x4fa841[_0x29d977(0x33b)]?0x1/_0x5a6a2b:_0x5a6a2b;}else _0x463aa6=0x1;let _0x3c5510=_0x4fa841['number']*_0x463aa6;_0x4a6632+=_0x3c5510,_0x4fa841[_0x29d977(0x33c)]=formatResult(Number(_0x463aa6),0x8),_0x4fa841[_0x29d977(0x292)]=_0x3c5510;}),currentCoins[_0x280c5f(0x336)](_0xeb40d=>{const _0x71bce1=_0x280c5f;let _0x1b8826=config['portfolio']['find'](_0x12594f=>_0x12594f[_0x71bce1(0x21c)]==_0xeb40d['coin']),_0x4cdade=Number(_0x1b8826['distribution']),_0x617c50=_0xeb40d[_0x71bce1(0x292)]/_0x4a6632*0x64,_0x5477f0=_0x4cdade*_0x4a6632/0x64/_0xeb40d['last']-_0xeb40d[_0x71bce1(0x2d3)];_0xeb40d['distribution']=formatResult(_0x617c50,0x3),_0xeb40d[_0x71bce1(0x2b0)]=formatResult(_0x4cdade,0x3),_0xeb40d['trade']=formatResult(_0x5477f0,0x8),_0xeb40d[_0x71bce1(0x25f)]='',_0xeb40d[_0x71bce1(0x284)]=![];if(_0xeb40d[_0x71bce1(0x21c)]!=config[_0x71bce1(0x2f0)]){if(_0xeb40d[_0x71bce1(0x2fb)]>_0x4cdade)_0xeb40d[_0x71bce1(0x25f)]=_0x71bce1(0x2ab),_0xeb40d[_0x71bce1(0x284)]=checkMinimums(_0xeb40d);else _0xeb40d[_0x71bce1(0x2fb)]<_0x4cdade&&(_0xeb40d[_0x71bce1(0x25f)]=_0x71bce1(0x2ef),_0xeb40d['valid']=checkMinimums(_0xeb40d));}_0xeb40d[_0x71bce1(0x365)]=_0xeb40d['distribution']/_0xeb40d[_0x71bce1(0x2b0)]-0x1;if(_0xeb40d[_0x71bce1(0x2df)]==_0x71bce1(0x27e)||_0xeb40d['orderstatus']==_0x71bce1(0x321))_0xeb40d[_0x71bce1(0x2df)]=_0x71bce1(0x2ae);}),currentCoins[_0x280c5f(0x260)]((_0x49c623,_0x369bed)=>_0x49c623[_0x280c5f(0x365)]<_0x369bed['delta']?0x1:_0x369bed['delta']<_0x49c623['delta']?-0x1:0x0);const _0x55f0b1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x55f0b1['eur'],'usd':_0x55f0b1[_0x280c5f(0x316)],'portfolio':JSON[_0x280c5f(0x374)](currentCoins),'threshold':_0x429c06},proxyEmit(_0x280c5f(0x315),{'serverversion':serverversion,'balances':lastBalances});if(_0x18e955){if(config[_0x280c5f(0x232)])headlessMode({'portfolio':currentCoins,'threshold':_0x429c06});else{if(lockOrders==ORDERS[_0x280c5f(0x216)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x429c06});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x50e09e=getNormalizedPerformance();getStartingBalances(_0x50e09e),emitPerformance(_0x50e09e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x57f1ef=getNormalizedPerformance();emitPerformance(_0x57f1ef),getStartingBalances(_0x57f1ef),logger['debug'](_0x280c5f(0x29e));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xaae988=_0x3f8c98;if(!lastBalances)return;let _0xf2dece=[],_0x2825c1,_0x23728b=JSON['parse'](lastBalances[_0xaae988(0x223)]);_0x23728b[_0xaae988(0x260)]((_0x4afa81,_0x1ef67a)=>_0x4afa81['coin']>_0x1ef67a['coin']?0x1:_0x1ef67a[_0xaae988(0x21c)]>_0x4afa81[_0xaae988(0x21c)]?-0x1:0x0),_0x23728b[_0xaae988(0x336)](_0x5ed480=>{const _0x1ce0e3=_0xaae988;let _0x1929f3={'coin':_0x5ed480[_0x1ce0e3(0x21c)],'number':_0x5ed480[_0x1ce0e3(0x2d3)],'price':_0x5ed480[_0x1ce0e3(0x33c)]};_0xf2dece[_0x1ce0e3(0x2a1)](_0x1929f3);});const _0x51e156=await getFiat();_0x2825c1={'date':lastBalances[_0xaae988(0x21f)]['split']('\x20')[0x0],'eur':_0x51e156['eur'],'usd':_0x51e156[_0xaae988(0x316)],'coins':_0xf2dece};let _0x57847c=dbPerformance['get'](_0xaae988(0x20a))[_0xaae988(0x2ad)]({'date':_0x2825c1[_0xaae988(0x303)]})[_0xaae988(0x292)]();_0x57847c?_0x2825c1[_0xaae988(0x303)]!=config[_0xaae988(0x311)]&&dbPerformance[_0xaae988(0x2e4)](_0xaae988(0x20a))['find']({'date':_0x2825c1[_0xaae988(0x303)]})['assign'](_0x2825c1)[_0xaae988(0x325)]():dbPerformance[_0xaae988(0x2e4)](_0xaae988(0x20a))[_0xaae988(0x2a1)](_0x2825c1)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x7f2f0c=_0x3f8c98;let _0x1dc6ed=[];if(dbPerformance[_0x7f2f0c(0x2c1)](_0x7f2f0c(0x20a))[_0x7f2f0c(0x292)]()){let _0x284483=dbPerformance[_0x7f2f0c(0x2e4)](_0x7f2f0c(0x20a))[_0x7f2f0c(0x2cb)]()['filter'](_0x31ec60=>{const _0x3269a2=_0x7f2f0c;if(_0x31ec60[_0x3269a2(0x2fc)][_0x3269a2(0x32c)]==0x0)return![];else return!![];})[_0x7f2f0c(0x2d1)](_0x7f2f0c(0x303))[_0x7f2f0c(0x292)](),_0x4088ab=[...config[_0x7f2f0c(0x358)]];_0x4088ab['sort']((_0x14ee33,_0x4c60b5)=>_0x14ee33[_0x7f2f0c(0x303)]>_0x4c60b5[_0x7f2f0c(0x303)]?-0x1:_0x4c60b5[_0x7f2f0c(0x303)]>_0x14ee33[_0x7f2f0c(0x303)]?0x1:0x0);let _0x257444=0x1,_0x2e2843=[],_0x1c9b2b=0x0;_0x284483['slice']()[_0x7f2f0c(0x33b)]()[_0x7f2f0c(0x336)]((_0x229b33,_0x69c2a3)=>{const _0x89283b=_0x7f2f0c;if(_0x4088ab[_0x1c9b2b]){if(_0x284483[_0x284483[_0x89283b(0x32c)]-_0x69c2a3]&&_0x4088ab[_0x1c9b2b][_0x89283b(0x303)]==_0x284483[_0x284483[_0x89283b(0x32c)]-_0x69c2a3]['date']){if(_0x69c2a3<_0x284483[_0x89283b(0x32c)]){let _0x1ceffc=0x0,_0x3c9581=0x0;_0x284483[_0x284483[_0x89283b(0x32c)]-_0x69c2a3]['coins'][_0x89283b(0x336)](_0x2d916c=>{const _0x1470c6=_0x89283b;_0x3c9581+=_0x2d916c[_0x1470c6(0x2d3)]*_0x2d916c[_0x1470c6(0x1f3)];}),_0x4088ab[_0x1c9b2b][_0x89283b(0x243)][_0x89283b(0x336)](_0x1d27bc=>{const _0x584045=_0x89283b;_0x1ceffc+=_0x1d27bc['number']*_0x1d27bc[_0x584045(0x1f3)];}),_0x257444*=_0x1ceffc/(_0x3c9581-_0x1ceffc)+0x1;}_0x1c9b2b++;}}let _0x40774c=0x0;_0x229b33[_0x89283b(0x2fc)]['forEach'](_0xf1588d=>{const _0xd26c9f=_0x89283b;_0x40774c+=_0xf1588d[_0xd26c9f(0x2d3)]*_0xf1588d[_0xd26c9f(0x1f3)];}),_0x2e2843[_0x284483['length']-_0x69c2a3-0x1]=_0x40774c*(_0x257444-0x1);});let _0x259a56=[];_0x4088ab=[...config[_0x7f2f0c(0x358)]]||[];let _0x530be0=0x0;_0x1c9b2b=0x0,_0x284483[_0x7f2f0c(0x336)]((_0x2e0969,_0x27824e)=>{const _0x121794=_0x7f2f0c;if(_0x4088ab[_0x1c9b2b]){const _0x7f0443=fns[_0x121794(0x36b)](_0x4088ab[_0x1c9b2b][_0x121794(0x303)],_0x121794(0x240),new Date()),_0x3e76ef=fns[_0x121794(0x36b)](_0x2e0969[_0x121794(0x303)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x7f0443,_0x3e76ef)){let _0x1e5bd5=0x0;_0x4088ab[_0x1c9b2b][_0x121794(0x243)][_0x121794(0x336)](_0x1b16a3=>{const _0x4e0ef4=_0x121794;!_0x259a56[_0x1b16a3[_0x4e0ef4(0x21c)]]?_0x259a56[_0x1b16a3['coin']]=_0x1b16a3[_0x4e0ef4(0x2d3)]:(_0x1e5bd5=_0x259a56[_0x1b16a3[_0x4e0ef4(0x21c)]],_0x259a56[_0x1b16a3[_0x4e0ef4(0x21c)]]+=_0x1b16a3[_0x4e0ef4(0x2d3)]);const _0x31bd9b=_0x2e0969[_0x4e0ef4(0x2fc)][_0x4e0ef4(0x2ad)](_0x17c84e=>_0x17c84e[_0x4e0ef4(0x21c)]==_0x1b16a3['coin']);(!_0x31bd9b||_0x31bd9b['number']==0x0)&&(_0x530be0+=(-_0x1b16a3[_0x4e0ef4(0x2d3)]-_0x1e5bd5)*_0x1b16a3[_0x4e0ef4(0x1f3)]);}),_0x1c9b2b++;}}_0x2e0969['coins'][_0x121794(0x336)]((_0x3ce702,_0x36f4ee)=>{const _0x17a368=_0x121794;_0x259a56[_0x3ce702[_0x17a368(0x21c)]]&&(_0x3ce702[_0x17a368(0x2b1)]=_0x259a56[_0x3ce702[_0x17a368(0x21c)]]);}),_0x1dc6ed['push']({'date':_0x2e0969['date'],'eur':_0x2e0969[_0x121794(0x2ce)],'usd':_0x2e0969[_0x121794(0x316)],'offset':_0x2e2843[_0x27824e],'netoffset':_0x530be0,'coins':_0x2e0969[_0x121794(0x2fc)]});});}return _0x1dc6ed;}function emitPerformance(_0x6ac4d8){const _0x268eef=_0x3f8c98;_0x6ac4d8[_0x268eef(0x32c)]!==0x0?(proxyEmit(_0x268eef(0x2da),_0x6ac4d8),lastPerformanceEmitted=getDate()):proxyEmit(_0x268eef(0x2da),[]);}function getPerf(_0x51848a,_0xec9dfd){const _0x37e6b4=_0x3f8c98;let _0x2c5668=0x0,_0x3cf7de=0x0,_0x228a6b=0x0;_0x51848a['coins'][_0x37e6b4(0x336)](_0x156b54=>{const _0x3c0336=_0x37e6b4;_0x2c5668+=_0x156b54[_0x3c0336(0x2d3)]*_0x156b54['price'];});_0xec9dfd&&(_0x2c5668+=_0x51848a['offset']);if(config[_0x37e6b4(0x2f0)]===_0x37e6b4(0x251)||config[_0x37e6b4(0x2f0)]===_0x37e6b4(0x32a))_0x3cf7de=_0x2c5668*_0x51848a[_0x37e6b4(0x2ce)],_0x228a6b=_0x2c5668*_0x51848a[_0x37e6b4(0x316)];else{if(usdBasecoins[_0x37e6b4(0x33e)](config[_0x37e6b4(0x2f0)]))_0x3cf7de=_0x2c5668*_0x51848a[_0x37e6b4(0x2ce)]/_0x51848a[_0x37e6b4(0x316)],_0x228a6b=_0x2c5668;else config[_0x37e6b4(0x2f0)]===_0x37e6b4(0x2c5)&&(_0x3cf7de=_0x2c5668,_0x228a6b=_0x2c5668*_0x51848a[_0x37e6b4(0x316)]/_0x51848a['eur']);}return[_0x2c5668,_0x3cf7de,_0x228a6b];}function getKPIs(_0x3ca061,_0xaad931=_0x3f8c98(0x2c5)){const _0x43bb2=_0x3f8c98,_0x5ddeea=config[_0x43bb2(0x2f0)],_0xdc4691=lastBalances,_0x2e2656=currentCoins,_0x498ce8=getNormalizedPerformance(),_0xecebe=_0x3ca061===_0x43bb2(0x2f0)?_0x5ddeea:_0x3ca061===_0x43bb2(0x265)||_0x3ca061===_0x43bb2(0x2c0)?_0xaad931:_0x43bb2(0x285)+_0x5ddeea,_0xf53613=_0x3ca061===_0x43bb2(0x356)?_0x43bb2(0x296):_0x3ca061===_0x43bb2(0x2c0)?'Net\x20effect':_0xecebe+_0x43bb2(0x206),_0xa94355=_0x3ca061===_0x43bb2(0x356)||_0x3ca061===_0x43bb2(0x2c0)?_0x43bb2(0x296):_0xecebe+_0x43bb2(0x386);let _0x2ebbd9=0x0;_0x2e2656[_0x43bb2(0x336)](_0x272153=>{const _0x2958a0=_0x43bb2;_0x2ebbd9+=_0x272153[_0x2958a0(0x2d3)]*_0x272153[_0x2958a0(0x33c)];});if(_0x3ca061===_0x43bb2(0x265)||_0x3ca061==='net-fiat'){if(_0x5ddeea===_0x43bb2(0x251)||_0x5ddeea==='ETH')_0x2ebbd9=_0x2ebbd9*(_0xaad931==='EUR'?_0xdc4691[_0x43bb2(0x2ce)]:_0xdc4691[_0x43bb2(0x316)]);else{if(usdBasecoins[_0x43bb2(0x33e)](_0x5ddeea))_0x2ebbd9=_0x2ebbd9*(_0xaad931===_0x43bb2(0x2c5)?_0xdc4691[_0x43bb2(0x2ce)]/_0xdc4691[_0x43bb2(0x316)]:0x1);else _0x5ddeea===_0x43bb2(0x2c5)&&(_0x2ebbd9=_0x2ebbd9*(_0xaad931===_0x43bb2(0x2c5)?0x1:_0xdc4691[_0x43bb2(0x316)]/_0xdc4691['eur']));}}let _0x19055e;if(_0x2ebbd9!==0x0){if(_0x3ca061===_0x43bb2(0x2f0))_0x19055e=(_0x2ebbd9/startingBalances[_0x43bb2(0x2f0)]-0x1)*0x64;else{if(_0xaad931===_0x43bb2(0x2c5))_0x19055e=(_0x2ebbd9/startingBalances['eur']-0x1)*0x64;else _0x19055e=(_0x2ebbd9/startingBalances[_0x43bb2(0x316)]-0x1)*0x64;}let _0x551149=0x0;if(startingBalances[_0x43bb2(0x2fc)])_0x2e2656[_0x43bb2(0x336)](_0x46512d=>{const _0x696f4c=_0x43bb2;let _0x5f061f=startingBalances[_0x696f4c(0x2fc)][_0x696f4c(0x2ad)](_0x505009=>_0x505009[_0x696f4c(0x21c)]===_0x46512d[_0x696f4c(0x21c)]);if(_0x5f061f&&_0x5f061f[_0x696f4c(0x21c)]&&_0x46512d[_0x696f4c(0x2d3)]!==0x0)_0x551149+=_0x5f061f[_0x696f4c(0x2d3)]*_0x46512d[_0x696f4c(0x33c)];});let _0x39e4a5=0x0;if(_0x498ce8[_0x43bb2(0x32c)]!==0x0){let _0x347bdf=_0x498ce8[_0x498ce8[_0x43bb2(0x32c)]-0x1];_0x39e4a5=_0x347bdf[_0x43bb2(0x26b)];}_0x551149-=_0x39e4a5;_0x3ca061===_0x43bb2(0x356)&&(_0x19055e=(_0x2ebbd9-_0x551149)/startingBalances['basecoin']*0x64,_0x2ebbd9=_0x2ebbd9-_0x551149);if(_0x3ca061===_0x43bb2(0x2c0)){let _0x338395=_0xaad931==='EUR'?startingBalances[_0x43bb2(0x2ce)]:startingBalances[_0x43bb2(0x316)];if(_0x5ddeea===_0x43bb2(0x251)||_0x5ddeea===_0x43bb2(0x32a))_0x551149=_0xaad931===_0x43bb2(0x2c5)?_0x551149*_0xdc4691[_0x43bb2(0x2ce)]:_0x551149*_0xdc4691[_0x43bb2(0x316)];else{if(usdBasecoins[_0x43bb2(0x33e)](_0x5ddeea))_0x551149=_0xaad931===_0x43bb2(0x2c5)?_0x551149*_0xdc4691[_0x43bb2(0x2ce)]/_0xdc4691[_0x43bb2(0x316)]:_0x551149;else _0x5ddeea==='EUR'&&(_0x551149=_0xaad931===_0x43bb2(0x2c5)?_0x551149:_0x551149*_0xdc4691['usd']/_0xdc4691[_0x43bb2(0x2ce)]);}_0x19055e=(_0x2ebbd9-_0x551149)/_0x338395*0x64,_0x2ebbd9=_0x2ebbd9-_0x551149;}if(_0x19055e){if(_0x19055e<0x64)_0x19055e=_0x19055e[_0x43bb2(0x2a2)](0x2);else{if(_0x19055e<0x3e8)_0x19055e=_0x19055e[_0x43bb2(0x2a2)](0x1);else _0x19055e=_0x19055e[_0x43bb2(0x2a2)](0x0);}}else _0x19055e=Number('0')[_0x43bb2(0x2a2)](0x2);if(_0x2ebbd9){if(Math[_0x43bb2(0x31a)](_0x2ebbd9)<0.000001)_0x2ebbd9=_0x2ebbd9[_0x43bb2(0x2a2)](0x2);else{if(Math[_0x43bb2(0x31a)](_0x2ebbd9)<0.1)_0x2ebbd9=_0x2ebbd9[_0x43bb2(0x2a2)](0x6);else{if(Math[_0x43bb2(0x31a)](_0x2ebbd9)<0x1)_0x2ebbd9=_0x2ebbd9[_0x43bb2(0x2a2)](0x5);else{if(Math['abs'](_0x2ebbd9)<0xa)_0x2ebbd9=_0x2ebbd9['toFixed'](0x4);else{if(Math['abs'](_0x2ebbd9)<0x64)_0x2ebbd9=_0x2ebbd9['toFixed'](0x3);else{if(Math[_0x43bb2(0x31a)](_0x2ebbd9)<0x3e8)_0x2ebbd9=_0x2ebbd9['toFixed'](0x2);else _0x2ebbd9=_0x2ebbd9[_0x43bb2(0x2a2)](0x2);}}}}}}else _0x2ebbd9=Number('0')['toFixed'](0x2);}else _0x19055e=Number('0')[_0x43bb2(0x2a2)](0x2);return{'value':_0x2ebbd9,'change':_0x19055e,'leftTxt':_0xf53613,'rightTxt':_0xa94355};}async function getStartingBalances(_0x365321,_0x4e81ba=!![]){const _0x3019d5=_0x3f8c98;if(_0x365321[_0x3019d5(0x32c)]!==0x0){const [_0x3e5ca0,_0x594321,_0x33c5cf]=getPerf(_0x365321[0x0],!![]);let _0x206fc1=[];config['portfolio'][_0x3019d5(0x336)](_0x58ba98=>{const _0x9edf9e=_0x3019d5;let _0x3a8a67=0x0,_0x486d2a;config[_0x9edf9e(0x358)][_0x9edf9e(0x336)](_0x5479fb=>{const _0x3f0515=_0x9edf9e;let _0x12a50d=_0x5479fb[_0x3f0515(0x243)]['find'](_0x471990=>_0x471990[_0x3f0515(0x21c)]==_0x58ba98[_0x3f0515(0x21c)]);if(_0x12a50d){_0x3a8a67+=_0x12a50d[_0x3f0515(0x2d3)];if(!_0x486d2a)_0x486d2a=_0x12a50d['price'];}}),_0x206fc1[_0x9edf9e(0x2a1)]({'coin':_0x58ba98[_0x9edf9e(0x21c)],'number':_0x3a8a67,'initialprice':_0x486d2a});});const _0x25800e={'basecoin':_0x3e5ca0,'eur':_0x594321,'usd':_0x33c5cf,'coins':_0x206fc1};if(_0x4e81ba)proxyEmit('starting-balances',_0x25800e);startingBalances=_0x25800e;}}function headlessMode(_0x52dee7){const _0x2275d6=_0x3f8c98;let _0x74b632=_0x52dee7[_0x2275d6(0x223)],_0x919c9=_0x52dee7[_0x2275d6(0x35b)],_0x3312a5=[];for(let _0x40d18a of _0x74b632){if(_0x40d18a[_0x2275d6(0x21c)]!=config[_0x2275d6(0x2f0)]){if(_0x40d18a[_0x2275d6(0x365)]>=_0x919c9/0x64){if(_0x40d18a[_0x2275d6(0x284)])_0x3312a5[_0x2275d6(0x2a1)](_0x40d18a);}else{if(_0x40d18a[_0x2275d6(0x365)]<=-_0x919c9/0x64){if(_0x40d18a[_0x2275d6(0x284)])_0x3312a5[_0x2275d6(0x2a1)](_0x40d18a);}}}}_0x3312a5[_0x2275d6(0x32c)]>0x0&&(_0x3312a5[_0x2275d6(0x336)](_0x3a4612=>{const _0x374931=_0x2275d6;logger[_0x374931(0x38a)](_0x374931(0x273)+_0x3a4612[_0x374931(0x21c)]+'\x20'+_0x3a4612[_0x374931(0x2d3)]+'\x20'+_0x3a4612[_0x374931(0x33c)]+'\x20'+_0x3a4612[_0x374931(0x2fb)]+'%\x20'+_0x3a4612[_0x374931(0x2b0)]+'%\x20'+(0x64*_0x3a4612[_0x374931(0x365)])['toFixed'](0x2)+_0x374931(0x203)+_0x919c9[_0x374931(0x2a2)](0x2)+'%)');}),placeOrder(_0x3312a5));}function notifyBalance(_0x1c6596){const _0x177ed7=_0x3f8c98;let _0x198d47=_0x1c6596[_0x177ed7(0x223)],_0xbaa050=_0x1c6596[_0x177ed7(0x35b)],_0x5b2184=[];for(let _0x2dc57b of _0x198d47){if(_0x2dc57b['coin']!=config[_0x177ed7(0x2f0)]){if(_0x2dc57b[_0x177ed7(0x365)]>=_0xbaa050/0x64){if(_0x2dc57b[_0x177ed7(0x284)])_0x5b2184[_0x177ed7(0x2a1)](_0x2dc57b);}else{if(_0x2dc57b[_0x177ed7(0x365)]<=-_0xbaa050/0x64){if(_0x2dc57b[_0x177ed7(0x284)])_0x5b2184[_0x177ed7(0x2a1)](_0x2dc57b);}}}}if(_0x5b2184[_0x177ed7(0x32c)]>0x0){let _0x2e0220=_0x5b2184[_0x177ed7(0x25b)](_0x20c7f5=>_0x20c7f5[_0x177ed7(0x21c)]);_0x2e0220['sort']();let _0x2bec5a=_0x2e0220['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x2bec5a;}}function symbolToCoin(_0x2a6ce1){const _0xac3513=_0x3f8c98;let _0x481e4c;if(_0x2a6ce1['includes']('/'+config[_0xac3513(0x2f0)]))_0x481e4c=_0x2a6ce1[_0xac3513(0x276)]('/'+config['basecoin'],'');if(_0x2a6ce1[_0xac3513(0x33e)](config['basecoin']+'/'))_0x481e4c=_0x2a6ce1[_0xac3513(0x276)](config['basecoin']+'/','');return _0x481e4c;}async function unlockOrders(){const _0x3c511b=_0x3f8c98;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3c511b(0x2b2)]){logger['debug'](_0x3c511b(0x33d)),lockOrders=ORDERS[_0x3c511b(0x282)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x23afa4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x23afa4,validateOrdersState=_0x3c511b(0x2b1),persistOpenOrders([]),lockOrders=ORDERS[_0x3c511b(0x216)],logger[_0x3c511b(0x38a)](_0x3c511b(0x1ff));}}async function validateOrders(_0x16926f){const _0x4a69fb=_0x3f8c98;if(_0x16926f)validateOrdersState=_0x16926f;logger['debug'](_0x4a69fb(0x372)+validateOrdersState+_0x4a69fb(0x211)+(lockOrders==0x1?_0x4a69fb(0x2b5):lockOrders==0x2?_0x4a69fb(0x2c2):_0x4a69fb(0x30a)));let _0x2f19a7=[],_0x13ac2b=config['ordertype']==_0x4a69fb(0x36d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4a69fb(0x2b2)])return;logger[_0x4a69fb(0x38a)](_0x4a69fb(0x31d)+validateOrdersState),lastOrders[_0x4a69fb(0x336)](_0xff8b50=>{const _0xe9f677=_0x4a69fb;let _0x147037=![];_0xff8b50[_0xe9f677(0x27e)]>0x0&&(_0x147037=!![]),_0x2f19a7[_0xe9f677(0x2a1)](_0x147037),_0x147037&&config[_0xe9f677(0x324)]!=_0xe9f677(0x36d)&&logHistory('order',_0xe9f677(0x2c9)+_0xff8b50[_0xe9f677(0x21b)]+'\x20'+_0xff8b50['side']+'\x20#'+formatResult(_0xff8b50[_0xe9f677(0x27e)],0x8)+'\x20@'+formatResult(_0xff8b50[_0xe9f677(0x1f3)],0x8));}),_0x2f19a7[_0x4a69fb(0x336)]((_0x352893,_0x1f36db)=>{const _0x366c35=_0x4a69fb;if(_0x352893)lastOrders[_0x366c35(0x272)](_0x1f36db,0x1);}),persistOpenOrders(lastOrders);const _0x214476=coolingDown?_0x4a69fb(0x23e):_0x4a69fb(0x269);if(validateOrdersState==_0x4a69fb(0x2b1)){validateOrdersState=_0x4a69fb(0x366);if(_0x2f19a7[_0x4a69fb(0x33e)](![])){if(config[_0x4a69fb(0x324)]==_0x4a69fb(0x36d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4a69fb(0x366)){if(_0x2f19a7[_0x4a69fb(0x33e)](![])){}else{if(allOrdersPlaced){if(config[_0x4a69fb(0x324)]==_0x4a69fb(0x36d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4a69fb(0x2dd))_0x2f19a7[_0x4a69fb(0x33e)](![])&&(config[_0x4a69fb(0x324)]==_0x4a69fb(0x36d)?logHistory(_0x4a69fb(0x2ca),_0x4a69fb(0x2a9)+Math['round'](_0x13ac2b*validateOrderInterval/0xea60)+_0x4a69fb(0x30c)+_0x214476):(await cancelOrders(),logHistory(_0x4a69fb(0x2ca),_0x4a69fb(0x2ac)+Math['round'](_0x13ac2b*validateOrderInterval/0xea60)+_0x4a69fb(0x30c)+_0x214476))),await unlockOrders();else{if(validateOrdersState==_0x4a69fb(0x33a)){if(config[_0x4a69fb(0x324)]!=_0x4a69fb(0x36d))logHistory(_0x4a69fb(0x2ca),_0x4a69fb(0x2aa)+_0x214476);await unlockOrders();}}}}}async function cancelOrders(){const _0x5917bc=_0x3f8c98;lastOrders[_0x5917bc(0x336)](async _0xa38283=>{const _0x52e3af=_0x5917bc;try{const _0x5197a8=await exchange[_0x52e3af(0x348)](_0xa38283[_0x52e3af(0x330)],_0xa38283[_0x52e3af(0x21b)]);}catch(_0x41b1bf){if(_0x41b1bf['toString']()['includes'](_0x52e3af(0x201))){}else await handleError(_0x41b1bf,_0x52e3af(0x34f));}});}async function initCoinResults(_0x21444b){const _0x31c4c9=_0x3f8c98;_0x21444b?logger[_0x31c4c9(0x38a)](_0x31c4c9(0x2bc)+_0x21444b):logger['debug']('Initializing\x20coin\x20results'),config['portfolio'][_0x31c4c9(0x336)](_0x6cef6f=>{const _0x445928=_0x31c4c9;if(!_0x6cef6f[_0x445928(0x30b)]&&_0x6cef6f[_0x445928(0x21c)]!=config['basecoin']){const _0x5389c0=currentCoins['find'](_0x5400a7=>_0x5400a7[_0x445928(0x21c)]==_0x6cef6f[_0x445928(0x21c)]),_0x20be70=global[_0x445928(0x2ba)][noslash(_0x6cef6f[_0x445928(0x21b)])];let _0x40a39a=_0x5389c0?_0x5389c0[_0x445928(0x2d3)]:null,_0xa49ec1=_0x6cef6f[_0x445928(0x33b)]?0x1/_0x20be70:_0x20be70,_0x345342;config[_0x445928(0x358)]['forEach'](_0x5127a0=>{const _0x577301=_0x445928;!_0x345342&&(_0x345342=_0x5127a0[_0x577301(0x243)][_0x577301(0x2ad)](_0xc1c517=>_0xc1c517[_0x577301(0x21c)]==_0x6cef6f[_0x577301(0x21c)]),_0x345342&&(_0x40a39a=_0x345342[_0x577301(0x2d3)],_0xa49ec1=_0x345342['price']));});let _0x570ab7=dbCoinResults['get']('coins')[_0x445928(0x2ad)]({'coin':_0x6cef6f['coin']})[_0x445928(0x292)]();if(!_0x570ab7){const _0x5a9db6={'coin':_0x6cef6f[_0x445928(0x21c)],'number':_0x40a39a,'breakeven':_0xa49ec1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x445928(0x2e4)](_0x445928(0x2fc))['push'](_0x5a9db6)[_0x445928(0x325)]();}else{if(_0x21444b&&_0x6cef6f[_0x445928(0x21c)]==_0x21444b){const _0x42354e={'coin':_0x6cef6f[_0x445928(0x21c)],'number':_0x40a39a,'breakeven':_0xa49ec1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x445928(0x2e4)](_0x445928(0x2fc))[_0x445928(0x2ad)]({'coin':_0x6cef6f[_0x445928(0x21c)]})[_0x445928(0x338)](_0x42354e)[_0x445928(0x325)]();}}}});}async function updateCoinResults(_0x242e4e,_0x10ed88=![]){const _0x29e306=_0x3f8c98;let _0x173cd0,_0x475a91,_0x62040e,_0x4ec98a,_0x52d3f3,_0x29c09a,_0xb7a4cd=dbCoinResults['get'](_0x29e306(0x2fc))['find']({'coin':_0x242e4e[_0x29e306(0x21c)]})[_0x29e306(0x292)](),_0x54ef01=![];_0xb7a4cd&&Object[_0x29e306(0x300)](_0xb7a4cd)[_0x29e306(0x336)](([_0x364096,_0x561ee6])=>{if(_0x561ee6==null)_0x54ef01=!![];});(!_0xb7a4cd||_0x54ef01)&&(await initCoinResults(_0x242e4e[_0x29e306(0x21c)]),_0xb7a4cd=dbCoinResults[_0x29e306(0x2e4)]('coins')[_0x29e306(0x2ad)]({'coin':_0x242e4e[_0x29e306(0x21c)]})[_0x29e306(0x292)]());_0x242e4e[_0x29e306(0x33b)]&&(_0x29c09a={'filled':_0x242e4e[_0x29e306(0x27e)]*_0x242e4e[_0x29e306(0x1f3)],'amount':_0x242e4e[_0x29e306(0x27e)]*_0x242e4e[_0x29e306(0x1f3)],'side':_0x242e4e[_0x29e306(0x25f)]=='sell'?'buy':_0x29e306(0x2ab),'price':0x1/_0x242e4e[_0x29e306(0x1f3)]},_0x242e4e={..._0x242e4e,..._0x29c09a});_0x10ed88?_0x475a91=_0x242e4e[_0x29e306(0x25f)]==_0x29e306(0x2ef)?_0xb7a4cd[_0x29e306(0x2d3)]+_0x242e4e[_0x29e306(0x27e)]:_0xb7a4cd['number']-_0x242e4e[_0x29e306(0x27e)]:_0x475a91=await getCoinNumber(_0x242e4e[_0x29e306(0x21c)]);if(_0x242e4e[_0x29e306(0x297)]&&_0x242e4e[_0x29e306(0x297)]['currency']==config[_0x29e306(0x2f0)])_0x173cd0=_0x242e4e[_0x29e306(0x297)]['cost'];else{if(_0x242e4e['fee']&&_0x242e4e[_0x29e306(0x297)]['currency']==_0x29e306(0x224)&&!_0x10ed88)_0x173cd0=_0x242e4e[_0x29e306(0x297)]['cost']*global['ticker'][_0x29e306(0x224)+config['basecoin']];else _0x173cd0=defaultFee*_0x242e4e[_0x29e306(0x27e)]*_0x242e4e[_0x29e306(0x1f3)];}_0x242e4e[_0x29e306(0x25f)]==_0x29e306(0x2ef)?(_0x62040e=_0x475a91!=0x0?(_0xb7a4cd[_0x29e306(0x24c)]*_0xb7a4cd['number']+_0x242e4e[_0x29e306(0x1f3)]*(_0x475a91-_0xb7a4cd[_0x29e306(0x2d3)])+_0x173cd0)/_0x475a91:0x0,_0x4ec98a=_0xb7a4cd[_0x29e306(0x2ee)]):(_0x62040e=_0x475a91!=0x0?(_0xb7a4cd[_0x29e306(0x24c)]*_0xb7a4cd['number']-_0x242e4e['price']*(_0xb7a4cd[_0x29e306(0x2d3)]-_0x475a91)+_0x173cd0)/_0x475a91:0x0,_0x4ec98a=_0xb7a4cd[_0x29e306(0x2ee)]+(_0x242e4e[_0x29e306(0x1f3)]-_0xb7a4cd[_0x29e306(0x24c)])*_0x242e4e['filled']);_0x52d3f3=(_0x242e4e[_0x29e306(0x1f3)]-_0x62040e-_0x173cd0/_0x242e4e['filled'])*_0x475a91;let _0x49dd95={'coin':_0x242e4e[_0x29e306(0x21c)],'number':_0x475a91,'breakeven':formatResult(_0x62040e,0x8),'realized':formatResult(_0x4ec98a,0x8),'unrealized':formatResult(_0x52d3f3,0x8),'fees':formatResult(_0xb7a4cd[_0x29e306(0x228)]+_0x173cd0,0x8),'sells':_0x242e4e[_0x29e306(0x25f)]==_0x29e306(0x2ab)?_0xb7a4cd[_0x29e306(0x1f2)]+0x1:_0xb7a4cd['sells'],'buys':_0x242e4e[_0x29e306(0x25f)]==_0x29e306(0x2ef)?_0xb7a4cd[_0x29e306(0x302)]+0x1:_0xb7a4cd[_0x29e306(0x302)]};dbCoinResults['get'](_0x29e306(0x2fc))['find']({'coin':_0x242e4e[_0x29e306(0x21c)]})['assign'](_0x49dd95)['write']();if(!_0x10ed88){if(_0x242e4e['fee']&&_0x242e4e[_0x29e306(0x297)][_0x29e306(0x258)]==_0x29e306(0x224)){const _0x2c8a05=currentCoins[_0x29e306(0x2ad)](_0x337a5d=>_0x337a5d[_0x29e306(0x21c)]==_0x29e306(0x224));if(_0x2c8a05){let _0x1f24b0=dbCoinResults['get'](_0x29e306(0x2fc))[_0x29e306(0x2ad)]({'coin':'BNB'})[_0x29e306(0x292)]();_0x49dd95={..._0x1f24b0,'number':_0x2c8a05[_0x29e306(0x2d3)]},dbCoinResults['get'](_0x29e306(0x2fc))[_0x29e306(0x2ad)]({'coin':_0x29e306(0x224)})[_0x29e306(0x338)](_0x49dd95)[_0x29e306(0x325)]();}}}}async function placeOrder(_0x5487d2){const _0x43faff=_0x3f8c98,_0x420df3=config[_0x43faff(0x324)]=='market'?'market':_0x43faff(0x37b);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x43faff(0x2b2)],allOrdersPlaced=![],validateOrdersState=_0x43faff(0x2b1);let _0xdf8497=![];lastOrders=[];for(const _0x3b8e4c of _0x5487d2){let _0x27f342,_0x8194ea,_0x8494d3,_0x597608,_0x130b06,_0x3f75c4=_0x3b8e4c[_0x43faff(0x21b)];try{const _0x246583=await exchange[_0x43faff(0x339)](_0x3f75c4);_0x27f342=_0x3b8e4c['reverse']?0x1/_0x3b8e4c['last']:_0x3b8e4c['last'],_0x8194ea=_0x246583['bid'],_0x8494d3=_0x246583['ask'];_0x3b8e4c['reverse']?(_0x597608=_0x3b8e4c[_0x43faff(0x25f)]==_0x43faff(0x2ef)?_0x43faff(0x2ab):'buy',_0x130b06=Math[_0x43faff(0x31a)](_0x3b8e4c[_0x43faff(0x383)])/_0x27f342):(_0x597608=_0x3b8e4c[_0x43faff(0x25f)],_0x130b06=Math[_0x43faff(0x31a)](_0x3b8e4c[_0x43faff(0x383)]));_0x420df3=='limit'&&(config[_0x43faff(0x324)]==_0x43faff(0x1f1)&&(_0x27f342=_0x597608==_0x43faff(0x2ef)?_0x8194ea:_0x8494d3),config[_0x43faff(0x324)]==_0x43faff(0x380)&&(_0x27f342=_0x597608==_0x43faff(0x2ef)?_0x8494d3:_0x8194ea));_0x130b06=formatResult(_0x130b06,0x8),_0x27f342=formatResult(_0x27f342,0x8);const _0x1cb8c4=_0x597608==_0x43faff(0x2ab)?config[_0x43faff(0x230)]?String[_0x43faff(0x376)]('0x'+config['emojisell'])+'\x20':'':config[_0x43faff(0x2a6)]?String[_0x43faff(0x376)]('0x'+config['emojibuy'])+'\x20':'',_0x5f29e8=_0x420df3==_0x43faff(0x36d)?_0x43faff(0x1f9):config[_0x43faff(0x324)]==_0x43faff(0x1f1)?_0x43faff(0x23f):'Limit\x20(low-margin)',_0x2847f9=(Math[_0x43faff(0x359)](Math[_0x43faff(0x231)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x2847f9,'symbol':_0x3f75c4,'coin':_0x3b8e4c[_0x43faff(0x21c)],'amount':_0x130b06,'price':_0x27f342,'side':_0x597608,'reverse':_0x3b8e4c['reverse'],'filled':0x0});if(_0x420df3==_0x43faff(0x36d))logHistory('order',''+_0x1cb8c4+_0x5f29e8+_0x43faff(0x320)+_0x3f75c4+'\x20'+_0x597608+'\x20#'+formatResult(_0x130b06,0x8)+'\x20@'+formatResult(_0x27f342,0x8));else logHistory(_0x43faff(0x381),''+_0x1cb8c4+_0x5f29e8+_0x43faff(0x320)+_0x3f75c4+'\x20'+_0x597608+'\x20#'+formatResult(_0x130b06,0x8)+'\x20@'+formatResult(_0x27f342,0x8));let _0x4388f1;_0x420df3==_0x43faff(0x36d)?_0x597608==_0x43faff(0x2ef)&&[_0x43faff(0x2bf),_0x43faff(0x259),_0x43faff(0x304),_0x43faff(0x25d),'Huobipro']['includes'](config[_0x43faff(0x2c3)])?_0x4388f1=await exchange[_0x43faff(0x275)](_0x3f75c4,_0x420df3,_0x597608,_0x130b06,_0x27f342):_0x4388f1=await exchange[_0x43faff(0x275)](_0x3f75c4,_0x420df3,_0x597608,_0x130b06,undefined):_0x4388f1=await exchange[_0x43faff(0x275)](_0x3f75c4,_0x420df3,_0x597608,_0x130b06,_0x27f342);logger[_0x43faff(0x38a)](_0x43faff(0x34c)+_0x4388f1['id']+'\x20|\x20Custom\x20ID:\x20'+_0x2847f9);const _0x2e0758=lastOrders[_0x43faff(0x32c)]-0x1;if(_0x2e0758>=0x0&&lastOrders[_0x2e0758][_0x43faff(0x355)]==_0x2847f9){lastOrders[_0x2e0758]['orderId']=_0x4388f1['id'];if(_0x4388f1[_0x43faff(0x200)])lastOrders[_0x2e0758][_0x43faff(0x200)]=_0x4388f1[_0x43faff(0x200)];if(_0x4388f1[_0x43faff(0x1f3)])lastOrders[_0x2e0758][_0x43faff(0x1f3)]=_0x4388f1[_0x43faff(0x1f3)];lastOrders[_0x2e0758][_0x43faff(0x297)]=_0x4388f1[_0x43faff(0x297)];}if(config['cooldown']!=0x0){let _0x4974dd=null;if(cooldownTracker['length']==config[_0x43faff(0x202)]-0x1)_0x4974dd=cooldownTracker[_0x43faff(0x331)]();const _0x5c8fc3=getTimeStamp();cooldownTracker[_0x43faff(0x2a1)](_0x5c8fc3);if(_0x4974dd){const _0x4045af=fns[_0x43faff(0x1f5)](new Date(_0x5c8fc3),new Date(_0x4974dd));if(_0x4045af<cooldownInterval){logHistory(_0x43faff(0x295),_0x43faff(0x2d9)+config[_0x43faff(0x202)]+_0x43faff(0x27d)+cooldownInterval/0x3c+_0x43faff(0x2d2)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x2948eb){if(_0x2948eb['toString']()[_0x43faff(0x33e)](_0x43faff(0x2fa)))lastOrders=lastOrders[_0x43faff(0x247)](_0x5e8ee3=>_0x5e8ee3['symbol']!=_0x3f75c4),logHistory(_0x43faff(0x295),_0x43faff(0x225)+_0x3f75c4),_0xdf8497=!![];else{if(_0x2948eb[_0x43faff(0x274)]()[_0x43faff(0x33e)](_0x43faff(0x280)))lastOrders=lastOrders[_0x43faff(0x247)](_0x385db4=>_0x385db4[_0x43faff(0x21b)]!=_0x3f75c4),logHistory('error',_0x43faff(0x2e2)+_0x3f75c4),_0xdf8497=!![];else{if(_0x2948eb[_0x43faff(0x274)]()['includes'](_0x43faff(0x319)))lastOrders=lastOrders[_0x43faff(0x247)](_0x4f346b=>_0x4f346b[_0x43faff(0x21b)]!=_0x3f75c4),logHistory(_0x43faff(0x295),_0x43faff(0x36c)+_0x3f75c4),logger[_0x43faff(0x38a)](_0x2948eb),_0xdf8497=!![];else _0x2948eb[_0x43faff(0x274)]()[_0x43faff(0x33e)](_0x43faff(0x288))?(lastOrders=lastOrders[_0x43faff(0x247)](_0x34cc1e=>_0x34cc1e['symbol']!=_0x3f75c4),logHistory(_0x43faff(0x295),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3f75c4),_0xdf8497=!![]):(lastOrders=lastOrders['filter'](_0x574228=>_0x574228[_0x43faff(0x21b)]!=_0x3f75c4),await handleError(_0x2948eb,_0x43faff(0x208),_0x3f75c4));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x43faff(0x32c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x11f3d6=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x43faff(0x33f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x11f3d6);}else unlockOrders();_0xdf8497&&config['headless']&&(logHistory(_0x43faff(0x295),_0x43faff(0x26d)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43faff(0x2ca),_0x43faff(0x2c7)));}else{if(coolingDown)!config[_0x43faff(0x232)]&&logHistory(_0x43faff(0x295),_0x43faff(0x241));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0x43faff(0x324)]==_0x43faff(0x36d)?logHistory(_0x43faff(0x295),_0x43faff(0x248)):logHistory('error',_0x43faff(0x278))));}}function persistOpenOrders(_0x32f095){const _0x51755a=_0x3f8c98,_0x557bf6={...config,'openOrders':_0x32f095};let _0x3cc7fa=dbConfig['get'](_0x51755a(0x266))[_0x51755a(0x2ad)]({'botID':botID})['value']();_0x3cc7fa&&dbConfig[_0x51755a(0x2e4)](_0x51755a(0x266))[_0x51755a(0x2ad)]({'botID':botID})['assign'](_0x557bf6)['write']();}function restoreOrders(){const _0x403f57=_0x3f8c98;let _0x129acc;config[_0x403f57(0x20f)]&&allOpenOrders[_0x403f57(0x336)](_0x3cb3d7=>{const _0xdcdc2e=_0x403f57,_0x522df1=config[_0xdcdc2e(0x20f)]['find'](_0x34502b=>_0x34502b[_0xdcdc2e(0x330)]==_0x3cb3d7['id']);_0x522df1&&(lastOrders[_0xdcdc2e(0x2a1)](_0x522df1),_0x129acc=_0x3cb3d7[_0xdcdc2e(0x382)]);});if(lastOrders[_0x403f57(0x32c)]>0x0){lockOrders=ORDERS[_0x403f57(0x2b2)],validateOrdersState=_0x403f57(0x366),allOrdersPlaced=!![];const _0x36f622=new Date()[_0x403f57(0x32b)](),_0x203f94=config['ordertype']==_0x403f57(0x36d)?validateOrderTimeout*0x3c*0x3e8:config[_0x403f57(0x33f)]*0x3c*0x3e8;if(_0x129acc+_0x203f94>_0x36f622){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1ceca7=_0x403f57;validateOrders(_0x1ceca7(0x2dd));},_0x129acc+_0x203f94-_0x36f622);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x5706a0=_0x3f8c98;if(!coinsLoaded){process[_0x5706a0(0x38d)]({'telegrammsg':_0x5706a0(0x262)},_0x5886a8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xff5cee='';if(config['showname'])_0xff5cee=_0x5706a0(0x222)+config['botname']+_0x5706a0(0x22d);else _0xff5cee=_0x5706a0(0x2b4)+botID+_0x5706a0(0x22d);const _0x3058de=getKPIs(_0x5706a0(0x2f0)),_0x2a9ae9=getKPIs(_0x5706a0(0x265),config[_0x5706a0(0x265)]),_0x4adf3d=getKPIs(_0x5706a0(0x356)),_0x307a34=getKPIs('net-fiat',config[_0x5706a0(0x265)]);_0xff5cee+='<pre>',_0xff5cee+=_0x3058de[_0x5706a0(0x2a0)]+_0x5706a0(0x2e0)+_0x3058de['value']+'\x0a',_0xff5cee+=_0x3058de['rightTxt']+':\x20'+_0x3058de[_0x5706a0(0x2ed)]+'%\x0a',_0xff5cee+=_0x2a9ae9[_0x5706a0(0x2a0)]+_0x5706a0(0x2e0)+_0x2a9ae9[_0x5706a0(0x292)]+'\x0a',_0xff5cee+=_0x2a9ae9[_0x5706a0(0x20e)]+':\x20'+_0x2a9ae9[_0x5706a0(0x2ed)]+'%\x0a',_0xff5cee+=_0x4adf3d['leftTxt']+':\x20'+_0x4adf3d['value']+'\x20('+config[_0x5706a0(0x2f0)]+')\x0a',_0xff5cee+=_0x4adf3d[_0x5706a0(0x20e)]+':\x20'+_0x4adf3d['change']+_0x5706a0(0x203)+config[_0x5706a0(0x2f0)]+')\x0a',_0xff5cee+=_0x307a34[_0x5706a0(0x2a0)]+':\x20'+_0x307a34[_0x5706a0(0x292)]+'\x20('+config[_0x5706a0(0x265)]+')\x0a',_0xff5cee+=_0x307a34['rightTxt']+':\x20'+_0x307a34[_0x5706a0(0x2ed)]+'%\x20('+config['fiat']+')\x0a',_0xff5cee+=_0x5706a0(0x271),process[_0x5706a0(0x38d)]({'telegrammsg':_0xff5cee},_0x5b7e10=>{});}async function sendPortfolioTelegram(){const _0xfcbb24=_0x3f8c98;if(!coinsLoaded){process[_0xfcbb24(0x38d)]({'telegrammsg':_0xfcbb24(0x262)},_0x45d888=>{});return;}let _0x2778d6='';if(config['showname'])_0x2778d6=_0xfcbb24(0x222)+config[_0xfcbb24(0x363)]+_0xfcbb24(0x351);else _0x2778d6='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x2778d6+=_0xfcbb24(0x205),_0x2778d6+='-------------------------------\x0a',_0x2778d6+=_0xfcbb24(0x22a),_0x2778d6+='-------------------------------\x0a',currentCoins[_0xfcbb24(0x336)](_0x3a9927=>{const _0x2b605a=_0xfcbb24;_0x2778d6+=_0x3a9927[_0x2b605a(0x21c)][_0x2b605a(0x30f)](0x7)+'|\x20'+formatPad(_0x3a9927[_0x2b605a(0x2fb)],0x2,0x6)+'|\x20'+formatPad(_0x3a9927[_0x2b605a(0x2b0)],0x2,0x6)+'|\x20'+formatPad(_0x3a9927[_0x2b605a(0x365)]*0x64,0x2,0x6)+'\x0a';}),_0x2778d6+=_0xfcbb24(0x271),process[_0xfcbb24(0x38d)]({'telegrammsg':_0x2778d6},_0x58f2bf=>{});}function formatPad(_0xf0913a,_0x30b547,_0x20f314){const _0x1ca922=_0x3f8c98,_0x2c440f=formatResultString(_0xf0913a,_0x30b547);return _0x2c440f?_0x2c440f['padStart'](_0x20f314):''[_0x1ca922(0x2af)](_0x20f314);}function logHistory(_0xe9d47b,_0x500bfa,_0x2ef4b2=''){const _0x5ebc6d=_0x3f8c98;logger[_0x5ebc6d(0x1f0)](''+_0x500bfa);let _0x5b6284={'time':getTimeStamp(),'type':_0xe9d47b,'event':_0x500bfa};dbLogs[_0x5ebc6d(0x2e4)](_0x5ebc6d(0x309))[_0x5ebc6d(0x2a1)](_0x5b6284)[_0x5ebc6d(0x325)]();if(_0x2ef4b2=='')_0x2ef4b2=_0x500bfa;proxyEmit(_0x5ebc6d(0x37c),{'log':_0x5b6284,'summary':_0x2ef4b2}),process[_0x5ebc6d(0x38d)]({'telegram':{..._0x5b6284,'botname':config[_0x5ebc6d(0x363)],'showname':config[_0x5ebc6d(0x343)]}},_0xaad9a1=>{});}function emitHistory(_0x2bed5d={}){const _0x2ea96e=_0x3f8c98;Object[_0x2ea96e(0x214)](_0x2bed5d)[_0x2ea96e(0x32c)]==0x0&&(_0x2bed5d={'type':['order',_0x2ea96e(0x37c)],'event':'','page':0x1});if(_0x2bed5d['type'][_0x2ea96e(0x33e)]('event'))_0x2bed5d[_0x2ea96e(0x298)][_0x2ea96e(0x272)](_0x2bed5d[_0x2ea96e(0x298)][_0x2ea96e(0x26f)]('event'),0x1,'error',_0x2ea96e(0x1fd),'success');if(dbLogs[_0x2ea96e(0x2c1)]('logs')['value']()){let _0x1f50a7=dbLogs['get']('logs')[_0x2ea96e(0x247)](_0x5b6ae2=>{const _0x4d6cb7=_0x2ea96e;if(_0x2bed5d[_0x4d6cb7(0x298)][_0x4d6cb7(0x32c)]==0x0)return![];else return _0x2bed5d['type']['includes'](_0x5b6ae2['type']);})[_0x2ea96e(0x247)](_0x592be2=>{const _0x304a05=_0x2ea96e;if(_0x2bed5d['event']=='')return!![];else return _0x592be2[_0x304a05(0x37c)][_0x304a05(0x362)]()[_0x304a05(0x33e)](_0x2bed5d[_0x304a05(0x37c)][_0x304a05(0x362)]());})[_0x2ea96e(0x2d1)](_0x2ea96e(0x21f)),_0x6e6db1=_0x1f50a7[_0x2ea96e(0x292)]()[_0x2ea96e(0x32c)];_0x1f50a7=_0x1f50a7[_0x2ea96e(0x33b)]()[_0x2ea96e(0x37a)]((_0x2bed5d[_0x2ea96e(0x2ff)]-0x1)*logPageSize,_0x2bed5d['page']*logPageSize-0x1)['reverse']()[_0x2ea96e(0x292)](),proxyEmit(_0x2ea96e(0x307),{'logs':_0x1f50a7,'total':_0x6e6db1});}else proxyEmit(_0x2ea96e(0x307),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2d5949){const _0x5a8639=_0x3f8c98;if(dbLogs[_0x5a8639(0x2c1)](_0x5a8639(0x309))[_0x5a8639(0x292)]()){const _0x52f513=dbLogs['get'](_0x5a8639(0x309))['sortBy'](_0x5a8639(0x21f))['filter'](_0x458588=>{const _0x3172e8=_0x5a8639;return _0x458588[_0x3172e8(0x298)]==_0x3172e8(0x381);})['value']();dbLogs[_0x5a8639(0x2e4)](_0x5a8639(0x309))[_0x5a8639(0x237)]()['write'](),dbLogs['get'](_0x5a8639(0x309))[_0x5a8639(0x338)](_0x52f513)[_0x5a8639(0x325)](),emitHistory(_0x2d5949);}}async function pauseBot(){const _0x3716de=_0x3f8c98,_0x366e3e=new Date()[_0x3716de(0x32b)]();if(!lastErrorShown||_0x366e3e-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x366e3e;!lastBotPause?(lastBotPause=_0x366e3e,consecutivePauses=0x1):(_0x366e3e-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3716de(0x38d)]({'stop':_0x3716de(0x28a)},_0x2a2eb1=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3716de(0x32b)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x109638=_0x3f8c98;botPaused=!![],await sleep(0x3e8),process[_0x109638(0x38d)]({'stop':'kill'},_0x1f0148=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x259134,_0x5e2aaa){const _0x3360db=_0x3f8c98;if(botPaused)return;const _0x4026cf=config[_0x3360db(0x2c3)]||_0x3360db(0x24b);if(_0x5e2aaa)logger[_0x3360db(0x38a)](_0x3360db(0x24a)+_0x5e2aaa);if(_0x259134['toString']()[_0x3360db(0x33e)](_0x3360db(0x36a)))logHistory(_0x3360db(0x295),_0x4026cf+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration');else{if(_0x259134[_0x3360db(0x274)]()[_0x3360db(0x33e)](_0x3360db(0x238)))logHistory(_0x3360db(0x295),_0x4026cf+_0x3360db(0x290));else _0x259134[_0x3360db(0x274)]()[_0x3360db(0x33e)](_0x3360db(0x2d5))?(logHistory(_0x3360db(0x295),_0x4026cf+_0x3360db(0x294)),logHistory(_0x3360db(0x295),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x259134,null);}}async function handleError(_0x5032da,_0x55f42b,_0x4e3791=''){const _0x2304da=_0x3f8c98;if(botPaused)return;const _0x1bd3bc=config[_0x2304da(0x2c3)]||_0x2304da(0x24b);if(_0x55f42b)logger['debug'](_0x2304da(0x24a)+_0x55f42b);if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x377))||_0x5032da[_0x2304da(0x274)]()['includes'](_0x2304da(0x2a8)))logHistory(_0x2304da(0x295),_0x1bd3bc+_0x2304da(0x28d)+pauseBotMsg),await pauseBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x219))||_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x263)))logHistory(_0x2304da(0x295),_0x1bd3bc+_0x2304da(0x31e)+pauseBotMsg),await pauseBot();else{if(_0x5032da[_0x2304da(0x274)]()['includes'](_0x2304da(0x333)))logHistory('error',_0x1bd3bc+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x255)))logHistory('error',_0x1bd3bc+_0x2304da(0x2f6)+pauseBotMsg),await pauseBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x35a)))logHistory(_0x2304da(0x295),_0x2304da(0x249)),logHistory(_0x2304da(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x30e)))logHistory(_0x2304da(0x295),_0x2304da(0x353)),logHistory(_0x2304da(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5032da instanceof ccxt['NetworkError'])logHistory(_0x2304da(0x295),_0x1bd3bc+_0x2304da(0x2eb)+pauseBotMsg),logger[_0x2304da(0x38a)](_0x2304da(0x314),_0x5032da),await pauseBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x36a)))logHistory(_0x2304da(0x295),_0x1bd3bc+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x2304da(0x295),_0x2304da(0x27c)),await killBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x2304da(0x295),_0x1bd3bc+_0x2304da(0x35e)),logHistory(_0x2304da(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)](_0x2304da(0x2d5)))logHistory(_0x2304da(0x295),_0x1bd3bc+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2304da(0x295),_0x2304da(0x27c)),await killBot();else{if(_0x5032da[_0x2304da(0x274)]()[_0x2304da(0x33e)]('InsufficientFunds'))logHistory(_0x2304da(0x295),_0x2304da(0x270)+_0x4e3791);else _0x5032da instanceof ccxt['ExchangeError']?(logHistory(_0x2304da(0x295),_0x1bd3bc+_0x2304da(0x2f4)),logger['debug']('Error\x20details:',_0x5032da)):(logHistory(_0x2304da(0x295),_0x2304da(0x2e8)+pauseBotMsg),logger[_0x2304da(0x38a)](_0x2304da(0x314),_0x5032da),await pauseBot());}}}}}}}}}}}function formatResult(_0x27b07f,_0x5758aa){const _0x512a39=_0x3f8c98;return parseFloat(_0x27b07f[_0x512a39(0x2a2)](_0x5758aa));}function formatResultTruncate(_0x3fe6ce,_0x4c717c){const _0x3ff59e=_0x3f8c98;let _0x4498fa=formatResultString(_0x3fe6ce,0xa),_0x14f82e=_0x4498fa[_0x3ff59e(0x26f)]('.');return _0x14f82e!=-0x1&&(_0x4498fa=_0x4498fa[_0x3ff59e(0x37a)](0x0,_0x14f82e+_0x4c717c+0x1)),Number(_0x4498fa);}function formatResultString(_0x389101,_0x15a610){const _0xc1dc57=_0x3f8c98;let _0x37960d;if(!(''+_0x389101)[_0xc1dc57(0x33e)]('e'))_0x37960d=+(Math[_0xc1dc57(0x354)](_0x389101+'e+'+_0x15a610)+'e-'+_0x15a610);else{let _0x2af6a0=(''+_0x389101)['split']('e'),_0x4a007d='';+_0x2af6a0[0x1]+_0x15a610>0x0&&(_0x4a007d='+'),_0x37960d=+(Math[_0xc1dc57(0x354)](+_0x2af6a0[0x0]+'e'+_0x4a007d+(+_0x2af6a0[0x1]+_0x15a610))+'e-'+_0x15a610);}return Number(_0x37960d)['toFixed'](_0x15a610);}function getServerTime(){const _0x3149ba=_0x3f8c98,_0x5f5d14=new Date();return _0x5f5d14[_0x3149ba(0x1f7)]()+'/'+(_0x5f5d14[_0x3149ba(0x28e)]()+0x1)[_0x3149ba(0x274)]()[_0x3149ba(0x2af)](0x2,'0')+'/'+_0x5f5d14[_0x3149ba(0x2be)]()[_0x3149ba(0x274)]()[_0x3149ba(0x2af)](0x2,'0')+'\x20'+_0x5f5d14[_0x3149ba(0x221)]()[_0x3149ba(0x274)]()[_0x3149ba(0x2af)](0x2,'0')+':'+_0x5f5d14[_0x3149ba(0x28c)]()['toString']()[_0x3149ba(0x2af)](0x2,'0')+':'+_0x5f5d14['getSeconds']()[_0x3149ba(0x274)]()[_0x3149ba(0x2af)](0x2,'0');}function getTimeStamp(){const _0xd79d8a=_0x3f8c98,_0x460441=shiftedTime();return _0x460441[_0xd79d8a(0x1f7)]()+'/'+(_0x460441[_0xd79d8a(0x28e)]()+0x1)[_0xd79d8a(0x274)]()[_0xd79d8a(0x2af)](0x2,'0')+'/'+_0x460441[_0xd79d8a(0x2be)]()[_0xd79d8a(0x274)]()['padStart'](0x2,'0')+'\x20'+_0x460441[_0xd79d8a(0x221)]()[_0xd79d8a(0x274)]()[_0xd79d8a(0x2af)](0x2,'0')+':'+_0x460441[_0xd79d8a(0x28c)]()[_0xd79d8a(0x274)]()[_0xd79d8a(0x2af)](0x2,'0')+':'+_0x460441[_0xd79d8a(0x2fd)]()[_0xd79d8a(0x274)]()[_0xd79d8a(0x2af)](0x2,'0');}function getDate(){const _0x422b77=_0x3f8c98,_0x7beb20=shiftedTime();return _0x7beb20[_0x422b77(0x1f7)]()+'/'+(_0x7beb20[_0x422b77(0x28e)]()+0x1)[_0x422b77(0x274)]()[_0x422b77(0x2af)](0x2,'0')+'/'+_0x7beb20[_0x422b77(0x2be)]()[_0x422b77(0x274)]()[_0x422b77(0x2af)](0x2,'0');}function getHour(){const _0x1f7970=_0x3f8c98,_0x35ae36=shiftedTime();return _0x35ae36[_0x1f7970(0x221)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x54f553){return new Promise(_0x5f5420=>setTimeout(_0x5f5420,_0x54f553));}function shiftedTime(){const _0x44fd45=_0x3f8c98,_0x219330=new Date();let _0x4358d6=_0x219330;if(config&&config[_0x44fd45(0x32d)]!==0x0)_0x4358d6=fns['add'](_0x219330,{'hours':config[_0x44fd45(0x32d)]});return _0x4358d6;}function timer(_0x248636){const _0x1415e5=_0x3f8c98,_0x1e00ee=new Date();!lasttime?console[_0x1415e5(0x22f)](getTimeStamp()+_0x1415e5(0x312),_0x248636,_0x1e00ee):console[_0x1415e5(0x22f)](getTimeStamp()+_0x1415e5(0x312),_0x248636,(_0x1e00ee-lasttime)/0x3e8),lasttime=_0x1e00ee;}