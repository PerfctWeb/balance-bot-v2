const _0x698bf9=_0x4bc0;(function(_0x381ae9,_0x1151c0){const _0xfbb040=_0x4bc0,_0x1d7c47=_0x381ae9();while(!![]){try{const _0x2aeecc=-parseInt(_0xfbb040(0x1ce))/0x1+-parseInt(_0xfbb040(0xe7))/0x2*(parseInt(_0xfbb040(0x1ab))/0x3)+parseInt(_0xfbb040(0x154))/0x4*(parseInt(_0xfbb040(0x1d3))/0x5)+-parseInt(_0xfbb040(0x1df))/0x6*(parseInt(_0xfbb040(0x146))/0x7)+-parseInt(_0xfbb040(0x1bf))/0x8+-parseInt(_0xfbb040(0x1b7))/0x9+parseInt(_0xfbb040(0x177))/0xa;if(_0x2aeecc===_0x1151c0)break;else _0x1d7c47['push'](_0x1d7c47['shift']());}catch(_0xd6146b){_0x1d7c47['push'](_0x1d7c47['shift']());}}}(_0x14d3,0xd335b));const _0x54bf09=function(){let _0x54e9b4=!![];return function(_0x253d4d,_0x54e5b5){const _0x12e32c=_0x54e9b4?function(){const _0x27543a=_0x4bc0;if(_0x54e5b5){const _0x54fe17=_0x54e5b5[_0x27543a(0x1d8)](_0x253d4d,arguments);return _0x54e5b5=null,_0x54fe17;}}:function(){};return _0x54e9b4=![],_0x12e32c;};}(),_0x15f1a2=_0x54bf09(this,function(){const _0xc654c0=_0x4bc0;return _0x15f1a2['toString']()[_0xc654c0(0x110)](_0xc654c0(0x18c))['toString']()[_0xc654c0(0x16f)](_0x15f1a2)[_0xc654c0(0x110)](_0xc654c0(0x18c));});_0x15f1a2();'use strict';const ccxt=require(_0x698bf9(0x192)),low=require(_0x698bf9(0xf5)),FileSync=require(_0x698bf9(0x104)),fs=require('fs'),fns=require(_0x698bf9(0x163)),{WebsocketClient,DefaultLogger}=require(_0x698bf9(0x17e)),Crypt=require(_0x698bf9(0x156))[_0x698bf9(0x148)];let exchange,wsClient;global[_0x698bf9(0xe8)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x698bf9(0x158))[_0x698bf9(0x136)],botID=process[_0x698bf9(0xdd)][0x2]||_0x698bf9(0x174),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x698bf9(0x199)](_0x698bf9(0x196)+botID+_0x698bf9(0x1d6)),process['exit'](0x1);const userID=process[_0x698bf9(0xdd)][0x3]||'',configpath=userID?_0x698bf9(0x165)+userID+'/':_0x698bf9(0x165);!fs[_0x698bf9(0x17c)](configpath)&&fs[_0x698bf9(0x126)](configpath);const configfile=configpath+'bot-'+botID+_0x698bf9(0xeb),logfile=configpath+_0x698bf9(0x121)+botID+_0x698bf9(0x112),performancefile=configpath+'bot-'+botID+_0x698bf9(0xfb),coinresultsfile=configpath+_0x698bf9(0x121)+botID+_0x698bf9(0x18d),settingsfile=configpath+_0x698bf9(0x14d),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x698bf9(0x102)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x698bf9(0x102)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x698bf9(0x102)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x698bf9(0x14f)]({'coins':[]})[_0x698bf9(0x102)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x698bf9(0x1b9)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3c818a)=>{},'debug':(..._0x3f784b)=>{},'notice':(..._0x4b7bb2)=>{},'info':(..._0x37b033)=>{},'warning':(..._0x1eeccb)=>{},'error':async function(..._0x3135e8){const _0x45b927=_0x698bf9,_0x403ddf=new Date()[_0x45b927(0xee)]();if(!lastErrorShown||_0x403ddf-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x45b927(0xee)](),logHistory(_0x45b927(0x10b),_0x45b927(0x187)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x2dcc72='';if(_0x3135e8[0x0])_0x2dcc72+=_0x3135e8[0x0];if(_0x3135e8[0x1]&&_0x3135e8[0x1][_0x45b927(0x10b)]&&_0x3135e8[0x1][_0x45b927(0x10b)][_0x45b927(0x13a)])_0x2dcc72+='\x20-\x20'+_0x3135e8[0x1][_0x45b927(0x10b)]['message'];logging(_0x45b927(0x187)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x2dcc72),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x698bf9(0xf4),'rsaStandard':_0x698bf9(0x101)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x698bf9(0x13c)]!=config[_0x698bf9(0x13c)]&&updateTimeshift(settings['timeshift']);process[_0x698bf9(0xef)]({'started':'running'},_0x2295e3=>{}),initializeProcessListeners();function proxyEmit(_0x4becd8,_0x23b736=null){const _0x283126=_0x698bf9;process[_0x283126(0xef)]({'function':_0x4becd8,'args':_0x23b736},_0x82edcf=>{});}function initializeProcessListeners(){process['on']('message',_0x2d7770=>{const _0x48c2a5=_0x4bc0;switch(Object[_0x48c2a5(0xf8)](_0x2d7770)[0x0]){case _0x48c2a5(0x13c):_0x2d7770[_0x48c2a5(0x13c)]!=undefined&&(settings['timeshift']=_0x2d7770[_0x48c2a5(0x13c)],updateTimeshift(settings[_0x48c2a5(0x13c)]));break;case'function':switch(_0x2d7770[_0x48c2a5(0x1d9)]){case'initclient':initclient();break;case _0x48c2a5(0x195):emitHistory(_0x2d7770[_0x48c2a5(0x132)]);break;case _0x48c2a5(0x169):getPortfolio(_0x2d7770[_0x48c2a5(0x132)]);break;case _0x48c2a5(0xdf):storeConfiguration(_0x2d7770[_0x48c2a5(0x132)]);break;case _0x48c2a5(0x11d):storeHeadless(_0x2d7770[_0x48c2a5(0x132)]);break;case _0x48c2a5(0x1aa):getStartingBalances();break;case _0x48c2a5(0x18a):placeOrder(_0x2d7770[_0x48c2a5(0x132)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();function _0x4bc0(_0x484fb6,_0x5dfdc6){const _0x4026e9=_0x14d3();return _0x4bc0=function(_0x15f1a2,_0x54bf09){_0x15f1a2=_0x15f1a2-0xd0;let _0x14d31=_0x4026e9[_0x15f1a2];return _0x14d31;},_0x4bc0(_0x484fb6,_0x5dfdc6);}async function headlessStart(){reset();}async function reset(){const _0xaee63a=_0x698bf9;if(pidBalances)clearTimeout(pidBalances);if(config[_0xaee63a(0x123)]!=''){await initExchange(config[_0xaee63a(0x123)],config[_0xaee63a(0x12b)]);let _0xcf525c=await loadSymbols();_0xcf525c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x10c304,_0x34d373){const _0x194361=_0x698bf9,_0x245d90=ccxt[config[_0x194361(0x142)]];let _0x14ac4e;switch(config[_0x194361(0x142)]){case _0x194361(0x17e):_0x14ac4e='wss://stream.binance.com:9443';break;case _0x194361(0x1ae):_0x14ac4e='wss://stream.binance.us:9443';break;default:_0x14ac4e=_0x194361(0xff);}exchange=new _0x245d90({'apiKey':_0x10c304,'secret':_0x34d373,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x10c304,'api_secret':_0x34d373,'beautify':!![],'wsUrl':_0x14ac4e},logger),config['exchange']==_0x194361(0x1ae)&&(stablecoins={'eur':{'coin':_0x194361(0x153),'symbol':'BTC/BUSD'},'usd':{'coin':'BTCUSDT','symbol':_0x194361(0x19e)}});}async function loadSymbols(){const _0x33f4ff=_0x698bf9;let _0x2f6977;try{markets=await exchange[_0x33f4ff(0x1d2)]();const _0xe749df=[_0x33f4ff(0x120),_0x33f4ff(0x14b),_0x33f4ff(0x1bd)];allSymbols=exchange[_0x33f4ff(0x128)]['filter'](_0x2a892b=>{const _0x2969aa=_0x33f4ff;let _0x164bef=![];return _0xe749df[_0x2969aa(0x184)](_0x51ac3c=>{const _0x173927=_0x2969aa;if(_0x2a892b[_0x173927(0x109)](_0x51ac3c))_0x164bef=!![];}),!_0x164bef;}),_0x2f6977=!![];}catch(_0x2d8c0e){await handleError(_0x2d8c0e,_0x33f4ff(0x12e)),_0x2f6977=![];}return _0x2f6977;}async function initbot(){const _0x35d828=_0x698bf9;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2530c2=dbCoinResults['get'](_0x35d828(0xd3))[_0x35d828(0x144)]();if(_0x2530c2[_0x35d828(0x1a0)]==0x0)await resetCoinResults();}async function initclient(){const _0x44f5c5=_0x698bf9;proxyEmit(_0x44f5c5(0x100),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x48eaf8=_0x698bf9;wsinitialized=![];ws1&&(ws1[_0x48eaf8(0x184)](_0x331c1e=>{try{wsClient['closeWs'](_0x331c1e);}catch(_0xbbd0a){}}),ws1=[]);if(ws2){try{wsClient[_0x48eaf8(0xf9)](ws2);}catch(_0x239b10){}ws2=null;}}async function initws(){const _0x52c1fe=_0x698bf9;cleanws();let _0x15b0a9=[];currentCoins[_0x52c1fe(0x184)](_0x289c34=>{const _0x247462=_0x52c1fe;if(_0x289c34['coin']!=config[_0x247462(0x107)])_0x15b0a9[_0x247462(0x1d5)](noslash(_0x289c34[_0x247462(0x182)]));});if(!_0x15b0a9[_0x52c1fe(0x109)](stablecoins[_0x52c1fe(0x19a)]['coin']))_0x15b0a9[_0x52c1fe(0x1d5)](stablecoins[_0x52c1fe(0x19a)]['coin']);if(!_0x15b0a9[_0x52c1fe(0x109)](stablecoins['usd'][_0x52c1fe(0x10a)]))_0x15b0a9[_0x52c1fe(0x1d5)](stablecoins[_0x52c1fe(0x143)]['coin']);if(!_0x15b0a9[_0x52c1fe(0x109)]('BNB'+config[_0x52c1fe(0x107)]))_0x15b0a9[_0x52c1fe(0x1d5)](_0x52c1fe(0x176)+config[_0x52c1fe(0x107)]);try{_0x15b0a9[_0x52c1fe(0x184)]((_0x5295f1,_0x85e2cd)=>{const _0x182ad3=_0x52c1fe;ws1[_0x85e2cd]=wsClient[_0x182ad3(0xde)](_0x5295f1,'1m');}),ws2=wsClient[_0x52c1fe(0xda)](),wsClient['on'](_0x52c1fe(0x1d4),_0x554b28=>{const _0x453733=_0x52c1fe;if(!Array[_0x453733(0xe3)](_0x554b28)&&!_0x554b28[_0x453733(0x171)][_0x453733(0x109)](_0x453733(0x1a2))){if(_0x554b28[_0x453733(0xf6)]==='kline'){global[_0x453733(0xe8)][_0x554b28[_0x453733(0x105)][_0x453733(0x182)]]=_0x554b28[_0x453733(0x105)][_0x453733(0x13e)];return;}}else{if(!Array[_0x453733(0xe3)](_0x554b28)&&_0x554b28[_0x453733(0x171)][_0x453733(0x109)]('userData')){if(_0x554b28['wsMarket']['includes']('spot')){updateNumberCoins(_0x554b28);return;}}}}),wsClient['on'](_0x52c1fe(0x1b4),async _0x2c9b36=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x430af8){await handleError(_0x430af8,_0x52c1fe(0x134));}let _0x215ba9,_0x15e0c3=0x0;loading[_0x52c1fe(0x1be)]=[];let _0x26441c=0x0;currentCoins[_0x52c1fe(0x184)](_0x315158=>{const _0x2acc1f=_0x52c1fe;if(_0x315158['coin']!=config['basecoin'])loading['remainingSymbols'][_0x2acc1f(0x1d5)](_0x315158[_0x2acc1f(0x182)]);}),loadingCanceled=![];while(_0x215ba9!=currentCoins[_0x52c1fe(0x1a0)]-0x1){_0x215ba9=0x0,currentCoins[_0x52c1fe(0x184)](_0x527b99=>{const _0x12f5f4=_0x52c1fe;_0x527b99[_0x12f5f4(0x10a)]!=config[_0x12f5f4(0x107)]&&global['ticker'][noslash(_0x527b99[_0x12f5f4(0x182)])]&&(loading['remainingSymbols']=loading['remainingSymbols'][_0x12f5f4(0x17d)](_0x5e23cd=>_0x5e23cd!=_0x527b99[_0x12f5f4(0x182)]),_0x215ba9++);}),loading[_0x52c1fe(0x125)]=Math[_0x52c1fe(0x175)](_0x215ba9/(currentCoins[_0x52c1fe(0x1a0)]-0x1)*0x64);_0x26441c>0x1e*0x5&&(loading[_0x52c1fe(0x178)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x52c1fe(0x18f)]=!![],emitLoadingProgress();break;}else _0x215ba9!=_0x15e0c3&&(_0x15e0c3=_0x215ba9,emitLoadingProgress()),_0x26441c++,await sleep(0xc8);}if(_0x215ba9==currentCoins[_0x52c1fe(0x1a0)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x53d926=_0x698bf9;proxyEmit(_0x53d926(0x12a),loading);}async function getFiat(){const _0x23894a=_0x698bf9;let _0x338058=0x0,_0x15ecb7=0x0;try{_0x338058=global[_0x23894a(0xe8)][stablecoins[_0x23894a(0x19a)][_0x23894a(0x10a)]],_0x15ecb7=global[_0x23894a(0xe8)][stablecoins[_0x23894a(0x143)][_0x23894a(0x10a)]];}catch(_0x14a121){await handleError(_0x14a121,_0x23894a(0x1a3));}return{'eur':Number(_0x338058),'usd':Number(_0x15ecb7)};}async function setStartDatePerformance(_0x25999d){const _0xc8c79b=_0x698bf9,_0x2c51a9=fns[_0xc8c79b(0x135)](new Date(_0x25999d['startdate']),'yyyy/MM/dd');let _0x54de8e=[];_0x54de8e[stablecoins[_0xc8c79b(0x19a)][_0xc8c79b(0x10a)]]=await getCloses(stablecoins['eur'][_0xc8c79b(0x182)],new Date(_0x25999d[_0xc8c79b(0x111)]),0x1),_0x54de8e[stablecoins[_0xc8c79b(0x143)]['coin']]=await getCloses(stablecoins[_0xc8c79b(0x143)][_0xc8c79b(0x182)],new Date(_0x25999d['startdate']),0x1);let _0x2e2184,_0x5141ec=[];_0x25999d[_0xc8c79b(0xd6)][_0xc8c79b(0x184)](_0x1f184d=>{const _0x5c52e6=_0xc8c79b;!_0x1f184d['excluded']&&_0x5141ec[_0x5c52e6(0x1d5)]({'coin':_0x1f184d['coin'],'number':_0x1f184d[_0x5c52e6(0xd2)],'price':_0x1f184d[_0x5c52e6(0x166)]});}),_0x2e2184={'date':_0x2c51a9,'eur':_0x54de8e[stablecoins['eur']['coin']][0x0],'usd':_0x54de8e[stablecoins['usd']['coin']][0x0],'coins':_0x5141ec};let _0x159539=dbPerformance[_0xc8c79b(0x119)](_0xc8c79b(0x157))[_0xc8c79b(0x167)]({'date':_0x2c51a9})[_0xc8c79b(0x144)]();_0x159539?dbPerformance[_0xc8c79b(0x119)](_0xc8c79b(0x157))['find']({'date':_0x2c51a9})['assign'](_0x2e2184)['write']():dbPerformance[_0xc8c79b(0x119)](_0xc8c79b(0x157))[_0xc8c79b(0x1d5)](_0x2e2184)[_0xc8c79b(0x102)](),_0x159539=dbPerformance['get'](_0xc8c79b(0x157))['sortBy'](_0xc8c79b(0x17a))[_0xc8c79b(0x144)](),_0x159539[_0xc8c79b(0x184)](_0x1787e7=>{const _0x2930e3=_0xc8c79b;_0x1787e7[_0x2930e3(0x17a)]<_0x2c51a9&&dbPerformance[_0x2930e3(0x119)](_0x2930e3(0x157))[_0x2930e3(0x10f)]({'date':_0x1787e7['date']})[_0x2930e3(0x102)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x19c476){const _0x2860cf=_0x698bf9;let _0x4345af,_0x39ee12=[];logHistory(_0x2860cf(0x16d),_0x2860cf(0x160)),_0x19c476[_0x2860cf(0xd6)][_0x2860cf(0x184)](_0x242eda=>{const _0xd02cfe=_0x2860cf;if(_0x242eda[_0xd02cfe(0x10a)]!=config[_0xd02cfe(0x107)]&&!_0x242eda[_0xd02cfe(0x159)])_0x39ee12[_0xd02cfe(0x1d5)]({'coin':_0x242eda[_0xd02cfe(0x10a)],'symbol':_0x242eda[_0xd02cfe(0x182)]});});let _0x43cc3d=[];try{const _0x17f130=fns[_0x2860cf(0x135)](fns['parseISO'](_0x19c476[_0x2860cf(0x111)][_0x2860cf(0x118)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x156795 of _0x39ee12){if(_0x156795['coin']!=config[_0x2860cf(0x107)])_0x4345af=await exchange[_0x2860cf(0xe5)](_0x156795[_0x2860cf(0x182)],Date[_0x2860cf(0xf7)](_0x17f130));_0x4345af[_0x2860cf(0x184)](_0x9e441e=>{const _0x16558f=_0x2860cf,_0x2a51bb=_0x156795[_0x16558f(0x182)]['includes'](config[_0x16558f(0x107)]+'/'),_0x4f2676=fns[_0x16558f(0x135)](fns[_0x16558f(0x117)](_0x9e441e[_0x16558f(0x168)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x2058d1=fns[_0x16558f(0x135)](fns['parseISO'](_0x9e441e[_0x16558f(0x168)]),_0x16558f(0xe4));let _0x5093a3;if(_0x9e441e['side']==_0x16558f(0x189)&&_0x2a51bb==![])_0x5093a3=_0x9e441e['amount'];if(_0x9e441e[_0x16558f(0x116)]==_0x16558f(0x189)&&_0x2a51bb==!![])_0x5093a3=-_0x9e441e[_0x16558f(0xf1)]*_0x9e441e[_0x16558f(0xd4)];if(_0x9e441e['side']==_0x16558f(0x190)&&_0x2a51bb==![])_0x5093a3=-_0x9e441e[_0x16558f(0xf1)];if(_0x9e441e[_0x16558f(0x116)]==_0x16558f(0x190)&&_0x2a51bb==!![])_0x5093a3=_0x9e441e[_0x16558f(0xf1)]*_0x9e441e[_0x16558f(0xd4)];_0x43cc3d[_0x16558f(0x1d5)]({'timestamp':_0x4f2676,'date':_0x2058d1,'coin':_0x156795[_0x16558f(0x10a)],'symbol':_0x156795['symbol'],'type':_0x9e441e[_0x16558f(0x1a8)],'side':_0x9e441e['side'],'reverse':_0x2a51bb,'amount':formatResult(_0x9e441e['filled'],0x8),'filled':formatResult(_0x9e441e[_0x16558f(0x137)],0x8),'coinamount':formatResult(_0x5093a3,0x8),'price':formatResult(_0x9e441e['price'],0x8)});let _0x5bf2e8;if(_0x9e441e[_0x16558f(0x116)]==_0x16558f(0x189)&&_0x2a51bb==![])_0x5bf2e8=-_0x9e441e[_0x16558f(0xf1)]*_0x9e441e[_0x16558f(0xd4)];if(_0x9e441e[_0x16558f(0x116)]=='buy'&&_0x2a51bb==!![])_0x5bf2e8=_0x9e441e[_0x16558f(0xf1)];if(_0x9e441e[_0x16558f(0x116)]=='sell'&&_0x2a51bb==![])_0x5bf2e8=_0x9e441e[_0x16558f(0xf1)]*_0x9e441e[_0x16558f(0xd4)];if(_0x9e441e['side']=='sell'&&_0x2a51bb==!![])_0x5bf2e8=-_0x9e441e['amount'];_0x43cc3d['push']({'date':_0x2058d1,'coin':config['basecoin'],'coinamount':formatResult(_0x5bf2e8,0x8)});});}_0x43cc3d[_0x2860cf(0x1ad)]((_0x5ee678,_0x1b1794)=>_0x5ee678['timestamp']>_0x1b1794[_0x2860cf(0x1b1)]?0x1:_0x1b1794['timestamp']>_0x5ee678['timestamp']?-0x1:0x0),dbLogs[_0x2860cf(0x119)](_0x2860cf(0x12d))[_0x2860cf(0x10f)]()[_0x2860cf(0x102)](),_0x43cc3d[_0x2860cf(0x184)](_0x47a5aa=>{const _0x4e0758=_0x2860cf;let _0xf63352;_0x47a5aa[_0x4e0758(0x10a)]!=config['basecoin']&&(_0xf63352={'time':_0x47a5aa[_0x4e0758(0x1b1)],'type':_0x4e0758(0x11c),'event':_0x4e0758(0xf0)+_0x47a5aa[_0x4e0758(0x182)]+'\x20'+_0x47a5aa[_0x4e0758(0x116)]+'\x20#'+_0x47a5aa[_0x4e0758(0xf1)]+'\x20@'+_0x47a5aa[_0x4e0758(0xd4)]},dbLogs[_0x4e0758(0x119)](_0x4e0758(0x12d))[_0x4e0758(0x1d5)](_0xf63352)[_0x4e0758(0x102)]());});const _0x2297cd=fns[_0x2860cf(0x1dd)]({'start':new Date(_0x19c476[_0x2860cf(0x111)]),'end':new Date()})[_0x2860cf(0x10c)](_0x33d221=>fns['format'](_0x33d221,_0x2860cf(0xe4)));let _0x361ab3=[];_0x19c476[_0x2860cf(0xd6)][_0x2860cf(0x184)](_0x458cb1=>{const _0x5f1641=_0x2860cf;if(!_0x458cb1['excluded']){_0x361ab3[_0x458cb1[_0x5f1641(0x10a)]]=[];let _0x58f09c=_0x458cb1[_0x5f1641(0xd2)];_0x2297cd[_0x5f1641(0x184)]((_0x54ca73,_0x292a15)=>{const _0x5162e4=_0x5f1641;let _0x1bd252=_0x43cc3d[_0x5162e4(0x17d)](_0x380473=>_0x380473['coin']==_0x458cb1[_0x5162e4(0x10a)]&&_0x380473[_0x5162e4(0x17a)]==_0x54ca73);if(_0x1bd252[_0x5162e4(0x1a0)]!=0x0){let _0x3e8b3b=_0x1bd252['reduce']((_0x2799db,_0x546c4e)=>{return _0x2799db+=_0x546c4e['coinamount'],_0x2799db;},0x0);_0x58f09c+=_0x3e8b3b;}_0x361ab3[_0x458cb1[_0x5162e4(0x10a)]][_0x54ca73]=_0x58f09c;});}});const _0x1c0613=[..._0x39ee12];_0x1c0613[_0x2860cf(0x1d5)]({'coin':stablecoins[_0x2860cf(0x19a)][_0x2860cf(0x10a)],'symbol':stablecoins[_0x2860cf(0x19a)][_0x2860cf(0x182)]}),_0x1c0613['push']({'coin':stablecoins[_0x2860cf(0x143)][_0x2860cf(0x10a)],'symbol':stablecoins[_0x2860cf(0x143)][_0x2860cf(0x182)]});let _0x1dccbb=[];for(const _0x374233 of _0x1c0613){_0x1dccbb[_0x374233[_0x2860cf(0x10a)]]=await getCloses(_0x374233[_0x2860cf(0x182)],new Date(_0x19c476['startdate']));}dbPerformance['get'](_0x2860cf(0x157))['remove']()[_0x2860cf(0x102)](),_0x2297cd['forEach']((_0x4ac171,_0x297770)=>{const _0x31dc99=_0x2860cf;let _0x5c2799,_0x4283df=[];_0x297770==0x0?(_0x19c476[_0x31dc99(0xd6)]['forEach'](_0x595a27=>{const _0x1896e1=_0x31dc99;!_0x595a27[_0x1896e1(0x159)]&&_0x4283df[_0x1896e1(0x1d5)]({'coin':_0x595a27[_0x1896e1(0x10a)],'number':_0x595a27['startnumber'],'price':_0x595a27[_0x1896e1(0x166)]});}),_0x5c2799={'date':_0x4ac171,'eur':_0x1dccbb[stablecoins[_0x31dc99(0x19a)]['coin']][_0x297770],'usd':_0x1dccbb[stablecoins[_0x31dc99(0x143)][_0x31dc99(0x10a)]][_0x297770],'coins':_0x4283df}):(_0x19c476['portfolio'][_0x31dc99(0x184)](_0x15a56c=>{const _0x597561=_0x31dc99;!_0x15a56c[_0x597561(0x159)]&&_0x4283df['push']({'coin':_0x15a56c[_0x597561(0x10a)],'number':_0x361ab3[_0x15a56c[_0x597561(0x10a)]][_0x4ac171],'price':_0x15a56c[_0x597561(0x10a)]==config[_0x597561(0x107)]?0x1:_0x1dccbb[_0x15a56c[_0x597561(0x10a)]][_0x297770]});}),_0x5c2799={'date':_0x4ac171,'eur':_0x1dccbb[stablecoins[_0x31dc99(0x19a)][_0x31dc99(0x10a)]][_0x297770],'usd':_0x1dccbb[stablecoins[_0x31dc99(0x143)][_0x31dc99(0x10a)]][_0x297770],'coins':_0x4283df}),dbPerformance['get'](_0x31dc99(0x157))[_0x31dc99(0x1d5)](_0x5c2799)[_0x31dc99(0x102)]();}),emitPerformance(),await resetCoinResults();for(let _0x1ae303 of _0x43cc3d){_0x1ae303[_0x2860cf(0x10a)]!=config['basecoin']&&await updateCoinResults(_0x1ae303);}logHistory(_0x2860cf(0x16d),_0x2860cf(0x1d0));}catch(_0xbbc44f){await handleError(_0xbbc44f,_0x2860cf(0x1c6));}}async function getCloses(_0x80d27b,_0x4a424c,_0x2f6847=undefined){const _0xbc0735=_0x698bf9,_0x4696fa='1d';let _0x33c5d5,_0x228789;const _0x3d7a3a=fns[_0xbc0735(0x108)](new Date(),_0x4a424c)+0x1;try{const _0x2c09af=exchange[_0xbc0735(0x15f)]()-_0x3d7a3a*0x18*0xe10*0x3e8;_0x33c5d5=await exchange['fetchOHLCV'](_0x80d27b,_0x4696fa,_0x2c09af,_0x2f6847),_0x228789=await exchange[_0xbc0735(0x173)](_0x80d27b);}catch(_0x49190e){await handleError(_0x49190e,_0xbc0735(0x1ba));}let _0x192896=ohlcvToCloses(_0x33c5d5);return _0x192896[_0xbc0735(0x1d5)](_0x228789[_0x80d27b]['last']),_0x192896;}function ohlcvToCloses(_0xc06231){let _0x489d9e=[];return _0xc06231['forEach'](function(_0x4d4230){_0x489d9e['push'](_0x4d4230[0x4]);}),_0x489d9e;}function getConfiguration(_0x133e48){const _0x269959=_0x698bf9;let _0x9a1189=dbConfig[_0x269959(0x119)]('bot')[_0x269959(0x167)]({'botID':_0x133e48})['value']();if(_0x9a1189){let _0x50cc1e=![];!_0x9a1189[_0x269959(0x142)]&&(_0x9a1189={..._0x9a1189,'exchange':_0x269959(0x17e)},_0x50cc1e=!![]),!_0x9a1189[_0x269959(0x107)]&&(_0x9a1189={..._0x9a1189,'basecoin':_0x269959(0x1b8)},_0x50cc1e=!![]),!_0x9a1189[_0x269959(0x16a)]&&(_0x9a1189={..._0x9a1189,'ordertype':_0x269959(0x12f)},_0x50cc1e=!![]),!_0x9a1189['timeout']&&(_0x9a1189={..._0x9a1189,'timeout':0x14},_0x50cc1e=!![]),!_0x9a1189[_0x269959(0x15d)]&&(_0x9a1189={..._0x9a1189,'emojibuy':''},_0x50cc1e=!![]),!_0x9a1189[_0x269959(0x14a)]&&(_0x9a1189={..._0x9a1189,'emojisell':''},_0x50cc1e=!![]),!_0x9a1189[_0x269959(0x1a7)]&&(_0x9a1189={..._0x9a1189,'showname':![]},_0x50cc1e=!![]),_0x50cc1e&&(_0x9a1189={'botID':_0x9a1189['botID'],'exchange':_0x9a1189[_0x269959(0x142)],'apiKey':_0x9a1189['apiKey'],'apiSecret':_0x9a1189['apiSecret'],'basecoin':_0x9a1189[_0x269959(0x107)],'botname':_0x9a1189['botname'],'showname':_0x9a1189[_0x269959(0x1a7)],'threshold':_0x9a1189[_0x269959(0x15b)],'ordertype':_0x9a1189[_0x269959(0x16a)],'timeout':_0x9a1189[_0x269959(0x178)],'startdate':_0x9a1189[_0x269959(0x111)],'recreate':_0x9a1189[_0x269959(0x10d)],'timeshift':_0x9a1189[_0x269959(0x13c)],'headless':_0x9a1189[_0x269959(0x194)],'cooldown':_0x9a1189[_0x269959(0x1b0)],'emojibuy':_0x9a1189[_0x269959(0x15d)],'emojisell':_0x9a1189[_0x269959(0x14a)],'portfolio':_0x9a1189[_0x269959(0xd6)]},dbConfig[_0x269959(0x119)](_0x269959(0x19b))[_0x269959(0x10f)]()[_0x269959(0x102)](),dbConfig[_0x269959(0x119)]('bot')[_0x269959(0x1d5)](_0x9a1189)['write']());}else _0x9a1189={'botID':_0x133e48,'exchange':_0x269959(0x17e),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x269959(0x149)+_0x133e48,'showname':![],'threshold':'3','ordertype':_0x269959(0x12f),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x9a1189;}function emittedConfiguration(){const _0x2d722f=_0x698bf9;let _0x433734;return config['apiKey']==''?_0x433734=config:_0x433734={...config,'apiKey':_0x2d722f(0x1b6),'apiSecret':_0x2d722f(0x1b6)},_0x433734;}function getSettings(){const _0x120f9f=_0x698bf9;return dbSettings['get'](_0x120f9f(0x162))['value']();}function getSecure(){const _0x5130d8=_0x698bf9;return dbSecure[_0x5130d8(0x119)](_0x5130d8(0x13b))[_0x5130d8(0x144)]()||{};}function updateTimeshift(_0x9b221c){const _0x47ffc2=_0x698bf9;let _0xb49bef=dbConfig[_0x47ffc2(0x119)](_0x47ffc2(0x19b))[_0x47ffc2(0x167)]({'botID':botID})[_0x47ffc2(0x144)]();_0xb49bef&&dbConfig[_0x47ffc2(0x119)]('bot')[_0x47ffc2(0x167)]({'botID':botID})['assign']({'timeshift':_0x9b221c})[_0x47ffc2(0x102)](),config[_0x47ffc2(0x13c)]=_0x9b221c,proxyEmit(_0x47ffc2(0x100),emittedConfiguration());}async function storeConfiguration(_0x2fd491){const _0xd90710=_0x698bf9;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x1351da=dbConfig['get'](_0xd90710(0x19b))['find']({'botID':botID})['value']();_0x2fd491={..._0x2fd491,'apiKey':crypt['decrypt'](secure[_0xd90710(0x197)],_0x2fd491[_0xd90710(0x123)])[_0xd90710(0x13a)],'apiSecret':crypt['decrypt'](secure[_0xd90710(0x197)],_0x2fd491['apiSecret'])[_0xd90710(0x13a)]};if(_0x1351da){if(_0x2fd491[_0xd90710(0x123)]==_0xd90710(0x1b6))_0x2fd491[_0xd90710(0x123)]=config[_0xd90710(0x123)];if(_0x2fd491[_0xd90710(0x12b)]==_0xd90710(0x1b6))_0x2fd491[_0xd90710(0x12b)]=config['apiSecret'];dbConfig[_0xd90710(0x119)](_0xd90710(0x19b))['find']({'botID':botID})[_0xd90710(0xe6)](_0x2fd491)['write']();}else dbConfig[_0xd90710(0x119)](_0xd90710(0x19b))['push'](_0x2fd491)[_0xd90710(0x102)](),process['send']({'status':'enabled','live':_0xd90710(0x19f)},_0x248cb0=>{});config={..._0x2fd491};if(config[_0xd90710(0x10d)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xd90710(0xef)]({'botname':_0x2fd491['botname']},_0x5da5fa=>{}),proxyEmit(_0xd90710(0xd7)),reset();}async function storeHeadless(_0x28a2b5){const _0x274f4f=_0x698bf9,_0x73a065={...config,'headless':_0x28a2b5[_0x274f4f(0x194)]};let _0x430450=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x430450&&dbConfig[_0x274f4f(0x119)](_0x274f4f(0x19b))[_0x274f4f(0x167)]({'botID':botID})['assign'](_0x73a065)[_0x274f4f(0x102)](),config={..._0x73a065},proxyEmit(_0x274f4f(0x100),emittedConfiguration());}function noslash(_0x1470d7){const _0x44d5a4=_0x698bf9;return _0x1470d7[_0x44d5a4(0x118)]('/','');}function updateNumberCoins(_0x3a3a66){const _0x199aa9=_0x698bf9;_0x3a3a66[_0x199aa9(0xf6)]&&_0x3a3a66[_0x199aa9(0xf6)]==_0x199aa9(0x181)&&_0x3a3a66['balances'][_0x199aa9(0x184)](_0x24706e=>{const _0x3873af=_0x199aa9;let _0x1447c7=currentCoins[_0x3873af(0x167)](_0x2f15e3=>_0x2f15e3[_0x3873af(0x10a)]==_0x24706e['asset']),_0x4f8a94=config[_0x3873af(0xd6)][_0x3873af(0x167)](_0x2c3db5=>_0x2c3db5[_0x3873af(0x10a)]==_0x24706e['asset']);if(_0x1447c7&&_0x4f8a94)_0x1447c7[_0x3873af(0x188)]=Math[_0x3873af(0x1b3)](Number(_0x24706e['availableBalance'])+(_0x4f8a94['offset']||0x0),0x0);});if(_0x3a3a66[_0x199aa9(0xf6)]&&_0x3a3a66[_0x199aa9(0xf6)]=='executionReport'){if(_0x3a3a66[_0x199aa9(0x15e)]==_0x199aa9(0x186)&&_0x3a3a66['orderStatus']==_0x199aa9(0x1da)){if(lastOrders)lastOrders[_0x199aa9(0x184)](_0x465169=>{const _0x14d1c3=_0x199aa9;if(_0x465169[_0x14d1c3(0x164)]==_0x3a3a66[_0x14d1c3(0x164)]){if(_0x465169[_0x14d1c3(0x138)])_0x465169['filled']=_0x3a3a66['accumulatedQuantity']*_0x465169['price'];else _0x465169['filled']=_0x3a3a66[_0x14d1c3(0x1c7)];}});}}}async function getCoins(_0x50235e=!![],_0x32b958=config[_0x698bf9(0x107)]){const _0x997339=_0x698bf9;let _0x3747b1,_0x25d2d9=[],_0x366108=[],_0x49fe2c=[];try{_0x3747b1=await exchange[_0x997339(0x1c2)](),mybalances=_0x3747b1[_0x997339(0x13d)];if(!_0x50235e)for(const [_0x2e8c86,_0x21dcfd]of Object[_0x997339(0xfd)](mybalances)){_0x49fe2c['push'](_0x2e8c86);}else config[_0x997339(0xd6)][_0x997339(0x184)](_0x239868=>{const _0x43ec7b=_0x997339;if(!_0x239868[_0x43ec7b(0x159)])_0x49fe2c[_0x43ec7b(0x1d5)](_0x239868[_0x43ec7b(0x10a)]);});if(_0x32b958=='')for(const [_0x465974,_0x2250a9]of Object[_0x997339(0xfd)](mybalances)){_0x2250a9[_0x997339(0x1a6)]()!=0x0&&_0x366108[_0x997339(0x1d5)]({'coin':_0x465974});}else for(const [_0x375453,_0xd49a32]of Object[_0x997339(0xfd)](mybalances)){if(_0x49fe2c['includes'](_0x375453)){const _0x48751b=config[_0x997339(0xd6)][_0x997339(0x167)](_0x2ae4fd=>_0x2ae4fd[_0x997339(0x10a)]==_0x375453);if((_0xd49a32[_0x997339(0x1a6)]()!=0x0||_0x48751b)&&(allSymbols['includes'](_0x375453+'/'+_0x32b958)||_0x375453==_0x32b958))_0x366108[_0x997339(0x1d5)]({'coin':_0x375453,'symbol':_0x375453+'/'+_0x32b958,'reverse':![],'number':Math['max'](_0xd49a32+(_0x48751b&&_0x48751b[_0x997339(0x18e)]||0x0),0x0)}),_0x375453!=_0x32b958&&_0x25d2d9[_0x997339(0x1d5)](_0x375453+'/'+_0x32b958);else(_0xd49a32['toString']()!=0x0||_0x48751b)&&allSymbols[_0x997339(0x109)](_0x32b958+'/'+_0x375453)&&(_0x366108[_0x997339(0x1d5)]({'coin':_0x375453,'symbol':_0x32b958+'/'+_0x375453,'reverse':!![],'number':Math['max'](_0xd49a32+(_0x48751b&&_0x48751b['offset']||0x0),0x0)}),_0x375453!=_0x32b958&&_0x25d2d9['push'](_0x32b958+'/'+_0x375453));}}}catch(_0x56ab7e){if(!_0x50235e){if(_0x56ab7e[_0x997339(0x1a6)]()[_0x997339(0x109)]('API-key\x20format\x20invalid'))return logHistory(_0x997339(0x10b),_0x997339(0xd0)),![];else{if(_0x56ab7e[_0x997339(0x1a6)]()[_0x997339(0x109)](_0x997339(0xe9)))return logHistory('error',_0x997339(0xdc)),![];else{if(_0x56ab7e[_0x997339(0x1a6)]()[_0x997339(0x109)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x997339(0x10b),_0x997339(0x113)),![];else await handleError(_0x56ab7e,_0x997339(0x16e));}}}else await handleError(_0x56ab7e,'getCoins()');}return _0x366108;}async function getPortfolio(_0x51e516){const _0x199eac=_0x698bf9;let _0x499c81=[],_0x54241c=[],_0x334a56,_0xb4f377=[],_0x1a4aee,_0x183a23;_0x51e516['apiKey']===_0x199eac(0x1b6)||_0x51e516[_0x199eac(0x12b)]===_0x199eac(0x1b6)?(_0x1a4aee=config['apiKey'],_0x183a23=config['apiSecret']):(_0x1a4aee=_0x51e516[_0x199eac(0x123)],_0x183a23=_0x51e516[_0x199eac(0x12b)]);await initExchange(_0x1a4aee,_0x183a23);let _0xfc0a45=await loadSymbols();if(_0xfc0a45){_0xb4f377=await getCoins(![],_0x51e516[_0x199eac(0x107)]);if(_0xb4f377===![])proxyEmit('portfolio',![]);else{if(_0x51e516[_0x199eac(0x107)]=='')proxyEmit(_0x199eac(0xd6),_0xb4f377);else{_0xb4f377['forEach'](_0x3e730f=>{const _0x50443b=_0x199eac;_0x499c81[_0x50443b(0x1d5)](_0x3e730f[_0x50443b(0x182)]);});try{_0x54241c=await exchange[_0x199eac(0x173)](_0x499c81);}catch(_0x2a5214){await handleError(_0x2a5214,_0x199eac(0x19c));}_0xb4f377[_0x199eac(0x184)](_0x7ae3b7=>{const _0xe4ba19=_0x199eac;_0x7ae3b7[_0xe4ba19(0x10a)]!=_0x51e516['basecoin']?_0x334a56=_0x7ae3b7[_0xe4ba19(0x138)]?0x1/_0x54241c[_0x7ae3b7[_0xe4ba19(0x182)]][_0xe4ba19(0xfa)]:_0x54241c[_0x7ae3b7[_0xe4ba19(0x182)]]['last']:_0x334a56=0x1,_0x7ae3b7[_0xe4ba19(0xd4)]=formatResult(_0x334a56,0x8);}),proxyEmit(_0x199eac(0xd6),_0xb4f377);}}}else proxyEmit(_0x199eac(0xd6),![]);}function checkMinimums(_0x3ee9be){const _0x3e7ebd=_0x698bf9;let _0x495079=!![];const _0x33447f=!_0x3ee9be[_0x3e7ebd(0x138)]?markets[_0x3ee9be[_0x3e7ebd(0x182)]]['limits'][_0x3e7ebd(0xf1)]['min']:markets[_0x3ee9be['symbol']][_0x3e7ebd(0x1c4)][_0x3e7ebd(0x11f)]['min'],_0x20d318=!_0x3ee9be[_0x3e7ebd(0x138)]?markets[_0x3ee9be['symbol']][_0x3e7ebd(0x1c4)]['cost']['min']:markets[_0x3ee9be[_0x3e7ebd(0x182)]][_0x3e7ebd(0x1c4)][_0x3e7ebd(0xf1)][_0x3e7ebd(0x127)];if(Math['abs'](_0x3ee9be[_0x3e7ebd(0x130)])<_0x33447f)_0x495079=![];if(Math['abs'](_0x3ee9be['trade'])*_0x3ee9be[_0x3e7ebd(0xfa)]<_0x20d318)_0x495079=![];let _0x5cfc6a=config[_0x3e7ebd(0xd6)][_0x3e7ebd(0x167)](_0x4620f9=>_0x4620f9[_0x3e7ebd(0x10a)]==_0x3ee9be[_0x3e7ebd(0x10a)]);if(Math['abs'](_0x3ee9be[_0x3e7ebd(0x130)])>_0x3ee9be[_0x3e7ebd(0x188)]-_0x5cfc6a[_0x3e7ebd(0x18e)])_0x495079=![];return _0x495079;}async function getBalances(){const _0x1ff1f3=_0x698bf9;let _0x294214=0x0,_0x4e8c7c;const _0x213cb0=config[_0x1ff1f3(0x15b)];currentCoins[_0x1ff1f3(0x184)](_0x41fab6=>{const _0x11df1c=_0x1ff1f3;if(_0x41fab6[_0x11df1c(0x10a)]!=config[_0x11df1c(0x107)]){let _0x4e8357=global[_0x11df1c(0xe8)][noslash(_0x41fab6[_0x11df1c(0x182)])];_0x4e8c7c=_0x41fab6[_0x11df1c(0x138)]?0x1/_0x4e8357:_0x4e8357;}else _0x4e8c7c=0x1;let _0x2ea06b=_0x41fab6[_0x11df1c(0x188)]*_0x4e8c7c;_0x294214+=_0x2ea06b,_0x41fab6['last']=formatResult(Number(_0x4e8c7c),0x8),_0x41fab6[_0x11df1c(0x144)]=_0x2ea06b;}),currentCoins['forEach'](_0x44a193=>{const _0x187de8=_0x1ff1f3;let _0x26aec7=config[_0x187de8(0xd6)]['find'](_0x50e2aa=>_0x50e2aa[_0x187de8(0x10a)]==_0x44a193[_0x187de8(0x10a)]),_0x19704a=Number(_0x26aec7[_0x187de8(0xec)]),_0x5d23a6=_0x44a193[_0x187de8(0x144)]/_0x294214*0x64,_0x4b4ea3=_0x19704a*_0x294214/0x64/_0x44a193[_0x187de8(0xfa)]-_0x44a193[_0x187de8(0x188)];_0x44a193[_0x187de8(0xec)]=formatResult(_0x5d23a6,0x3),_0x44a193[_0x187de8(0x180)]=formatResult(_0x19704a,0x3),_0x44a193[_0x187de8(0x130)]=formatResult(_0x4b4ea3,0x8),_0x44a193[_0x187de8(0x116)]='',_0x44a193[_0x187de8(0x1bb)]='';if(_0x44a193[_0x187de8(0x10a)]!=config[_0x187de8(0x107)]){if(_0x44a193['distribution']>_0x19704a)_0x44a193[_0x187de8(0x116)]=_0x187de8(0x190),_0x44a193['valid']=checkMinimums(_0x44a193);else _0x44a193[_0x187de8(0xec)]<_0x19704a&&(_0x44a193[_0x187de8(0x116)]='buy',_0x44a193['valid']=checkMinimums(_0x44a193));}_0x44a193[_0x187de8(0x179)]=_0x44a193[_0x187de8(0xec)]/_0x44a193[_0x187de8(0x180)]-0x1;}),currentCoins[_0x1ff1f3(0x1ad)]((_0xdc86b3,_0x49dc0b)=>_0xdc86b3[_0x1ff1f3(0x179)]<_0x49dc0b[_0x1ff1f3(0x179)]?0x1:_0x49dc0b[_0x1ff1f3(0x179)]<_0xdc86b3[_0x1ff1f3(0x179)]?-0x1:0x0);const _0x430dbe=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x430dbe[_0x1ff1f3(0x19a)],'usd':_0x430dbe[_0x1ff1f3(0x143)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x213cb0},proxyEmit(_0x1ff1f3(0xf3),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1ff1f3(0x194)])headlessMode({'portfolio':currentCoins,'threshold':_0x213cb0});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x493bfb=_0x698bf9;if(!lastBalances)return;let _0x11f0c9=await getStartingBalances(![]),_0x318641=[],_0x5537cb;JSON[_0x493bfb(0xf7)](lastBalances[_0x493bfb(0xd6)])[_0x493bfb(0x184)](_0x3a3348=>{const _0x5963e7=_0x493bfb;let _0x101668={'coin':_0x3a3348[_0x5963e7(0x10a)],'number':_0x3a3348[_0x5963e7(0x188)],'price':_0x3a3348[_0x5963e7(0xfa)]};_0x318641[_0x5963e7(0x1d5)](_0x101668);});const _0x1e3e0c=await getFiat();_0x5537cb={'date':lastBalances['time'][_0x493bfb(0x1a1)]('\x20')[0x0],'eur':_0x1e3e0c[_0x493bfb(0x19a)],'usd':_0x1e3e0c[_0x493bfb(0x143)],'coins':_0x318641};let _0x5e33db=dbPerformance['get'](_0x493bfb(0x157))[_0x493bfb(0x167)]({'date':_0x5537cb[_0x493bfb(0x17a)]})[_0x493bfb(0x144)]();_0x5e33db?dbPerformance[_0x493bfb(0x119)](_0x493bfb(0x157))[_0x493bfb(0x167)]({'date':_0x5537cb[_0x493bfb(0x17a)]})['assign'](_0x5537cb)[_0x493bfb(0x102)]():dbPerformance[_0x493bfb(0x119)](_0x493bfb(0x157))[_0x493bfb(0x1d5)](_0x5537cb)[_0x493bfb(0x102)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3c76c5=_0x698bf9;if(dbPerformance['has']('data')['value']()){let _0x47aa3c=dbPerformance[_0x3c76c5(0x119)](_0x3c76c5(0x157))['sortBy'](_0x3c76c5(0x17a))[_0x3c76c5(0x144)]();proxyEmit(_0x3c76c5(0xdb),_0x47aa3c),lastPerformanceEmitted=getDate();}else proxyEmit(_0x3c76c5(0xdb),[]);}async function getStartingBalances(_0xa81ad8=!![]){const _0x201177=_0x698bf9;let _0x5a5760=dbPerformance[_0x201177(0x119)]('data')[_0x201177(0x167)]({'date':config['startdate']})[_0x201177(0x144)]();config[_0x201177(0x123)]!=''&&!_0x5a5760&&(await setStartDatePerformance(config),_0x5a5760=dbPerformance[_0x201177(0x119)](_0x201177(0x157))[_0x201177(0x167)]({'date':config[_0x201177(0x111)]})[_0x201177(0x144)]());if(config[_0x201177(0x123)]==''||!_0x5a5760)return{};let _0x4a74d0=0x0,_0x36d484=0x0,_0x4d3f89=0x0,_0x8eb3b9=[],_0xcc3c9b=0x0;config['portfolio'][_0x201177(0x184)](_0x5d004c=>{const _0xc97a1c=_0x201177;if(!_0x5d004c['excluded']){_0x8eb3b9[_0xcc3c9b]={'coin':_0x5d004c['coin'],'symbol':_0x5d004c[_0xc97a1c(0x182)],'number':_0x5d004c[_0xc97a1c(0xd2)],'price':_0x5d004c['startprice']},_0x4a74d0+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c[_0xc97a1c(0xd2)];if(config[_0xc97a1c(0x107)]==_0xc97a1c(0x1b8))_0x36d484+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c['startnumber']*_0x5a5760[_0xc97a1c(0x19a)],_0x4d3f89+=_0x5d004c['startprice']*_0x5d004c[_0xc97a1c(0xd2)]*_0x5a5760[_0xc97a1c(0x143)];else{if(config[_0xc97a1c(0x107)]==_0xc97a1c(0x11e)||config[_0xc97a1c(0x107)]=='USDT'||config['basecoin']==_0xc97a1c(0x1a9))_0x36d484+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c[_0xc97a1c(0xd2)]*_0x5a5760['eur']/_0x5a5760[_0xc97a1c(0x143)],_0x4d3f89+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c[_0xc97a1c(0xd2)];else config[_0xc97a1c(0x107)]=='EUR'&&(_0x36d484+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c[_0xc97a1c(0xd2)],_0x4d3f89+=_0x5d004c[_0xc97a1c(0x166)]*_0x5d004c[_0xc97a1c(0xd2)]*_0x5a5760[_0xc97a1c(0x143)]/_0x5a5760[_0xc97a1c(0x19a)]);}_0xcc3c9b++;}});let _0x1470df={'basecoin':_0x4a74d0,'eur':_0x36d484,'usd':_0x4d3f89,'coins':_0x8eb3b9};if(_0xa81ad8)proxyEmit('starting-balances',_0x1470df);return _0x1470df;}function headlessMode(_0x51d999){const _0x1f1442=_0x698bf9;let _0x264631=_0x51d999[_0x1f1442(0xd6)],_0x41134a=_0x51d999[_0x1f1442(0x15b)],_0x4aea56=[];for(let _0x54d30b of _0x264631){if(_0x54d30b[_0x1f1442(0x10a)]!=config['basecoin']){if(_0x54d30b['distribution']/_0x54d30b['target']-0x1>=_0x41134a/0x64){if(_0x54d30b['valid'])_0x4aea56[_0x1f1442(0x1d5)](_0x54d30b);}else{if(_0x54d30b[_0x1f1442(0xec)]/_0x54d30b['target']-0x1<=-_0x41134a/0x64){if(_0x54d30b['valid'])_0x4aea56[_0x1f1442(0x1d5)](_0x54d30b);}}}}_0x4aea56['length']>0x0&&placeOrder(_0x4aea56);}function symbolToCoin(_0x2ab34d){const _0x19df7f=_0x698bf9;let _0x29a766;if(_0x2ab34d[_0x19df7f(0x109)]('/'+config['basecoin']))_0x29a766=_0x2ab34d['replace']('/'+config[_0x19df7f(0x107)],'');if(_0x2ab34d[_0x19df7f(0x109)](config[_0x19df7f(0x107)]+'/'))_0x29a766=_0x2ab34d[_0x19df7f(0x118)](config[_0x19df7f(0x107)]+'/','');return _0x29a766;}async function validateOrders(_0x1ff217=0x0){const _0x5bb163=_0x698bf9;let _0x28a196=[],_0x551da3=config[_0x5bb163(0x16a)]==_0x5bb163(0x12f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5bb163(0x178)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x5bb163(0x184)](_0x261af5=>{const _0x257420=_0x5bb163;let _0xcb9e3a=previousCoins[_0x257420(0x167)](_0x105337=>_0x105337[_0x257420(0x10a)]==symbolToCoin(_0x261af5[_0x257420(0x182)])),_0x21b1ef=currentCoins['find'](_0x4bc24b=>_0x4bc24b[_0x257420(0x10a)]==symbolToCoin(_0x261af5[_0x257420(0x182)])),_0x5bd1c2,_0x4933e6;_0x261af5[_0x257420(0x116)]==_0x257420(0x189)&&!_0x261af5['reverse']||_0x261af5[_0x257420(0x116)]==_0x257420(0x190)&&_0x261af5[_0x257420(0x138)]?(_0x5bd1c2=_0xcb9e3a['number']+0.9*_0x261af5[_0x257420(0x137)],_0x4933e6=_0xcb9e3a[_0x257420(0x188)]+1.1*_0x261af5[_0x257420(0x137)]):(_0x5bd1c2=_0xcb9e3a[_0x257420(0x188)]-1.1*_0x261af5[_0x257420(0x137)],_0x4933e6=_0xcb9e3a[_0x257420(0x188)]-0.9*_0x261af5[_0x257420(0x137)]);const _0x5eda97=_0x261af5[_0x257420(0x137)]!=0x0&&_0x21b1ef[_0x257420(0x188)]>=_0x5bd1c2&&_0x21b1ef[_0x257420(0x188)]<=_0x4933e6;_0x28a196[_0x257420(0x1d5)](_0x5eda97);if(_0x5eda97&&config[_0x257420(0x16a)]!=_0x257420(0x12f)){if(_0x261af5[_0x257420(0x138)])logHistory(_0x257420(0x11c),_0x257420(0x1a4)+_0x261af5['symbol']+'\x20'+_0x261af5['side']+'\x20#'+formatResult(_0x261af5['filled']/_0x261af5[_0x257420(0xd4)],0x8)+'\x20@'+formatResult(_0x261af5[_0x257420(0xd4)],0x8));else logHistory('order',_0x257420(0x1a4)+_0x261af5['symbol']+'\x20'+_0x261af5[_0x257420(0x116)]+'\x20#'+formatResult(_0x261af5[_0x257420(0x137)],0x8)+'\x20@'+formatResult(_0x261af5[_0x257420(0xd4)],0x8));}}),_0x28a196[_0x5bb163(0x184)]((_0x1ebc40,_0x29b334)=>{const _0x5c98ec=_0x5bb163;if(_0x1ebc40)lastOrders[_0x5c98ec(0x129)](_0x29b334,0x1);});if(_0x1ff217<_0x551da3&&_0x28a196['includes'](![])){if(_0x1ff217==0x0){config['ordertype']==_0x5bb163(0x12f)?logHistory('error',_0x5bb163(0x19d)):logHistory(_0x5bb163(0x10b),_0x5bb163(0x1de));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ff217);},0xa*0x3e8);}else{(_0x1ff217==0x1||_0x1ff217==Math[_0x5bb163(0x175)](_0x551da3/0x2)||_0x1ff217==_0x551da3-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ff217);},validateOrderInterval);}}else{lockOrders=![];if(_0x1ff217>0x0&&!_0x28a196[_0x5bb163(0x109)](![]))config[_0x5bb163(0x16a)]==_0x5bb163(0x12f)?logHistory(_0x5bb163(0x16d),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x5bb163(0x16d),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x1ff217>0x0&&_0x28a196[_0x5bb163(0x109)](![])&&(config['ordertype']==_0x5bb163(0x12f)?logHistory(_0x5bb163(0x16d),_0x5bb163(0x13f)+Math['round'](_0x551da3*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x5bb163(0x184)](async _0x514567=>{const _0x322917=_0x5bb163;try{const _0x52d9b0=await exchange[_0x322917(0x1a5)](_0x514567[_0x322917(0x164)],_0x514567['symbol']);}catch(_0x50e529){if(_0x50e529[_0x322917(0x1a6)]()['includes'](_0x322917(0x155))){}else await handleError(_0x50e529,_0x322917(0x193));}}),logHistory(_0x5bb163(0x16d),_0x5bb163(0x191)+Math[_0x5bb163(0x175)](_0x551da3*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x3fb30a=_0x698bf9;dbCoinResults[_0x3fb30a(0x119)](_0x3fb30a(0xd3))['remove']()[_0x3fb30a(0x102)]();let _0x31c921=await getStartingBalances(![]);_0x31c921[_0x3fb30a(0xd3)][_0x3fb30a(0x184)](_0x32e961=>{const _0x2f20ca=_0x3fb30a,_0x2e5ac1=_0x32e961['symbol'][_0x2f20ca(0x109)](config[_0x2f20ca(0x107)]+'/');if(_0x32e961[_0x2f20ca(0x10a)]!=config['basecoin']){let _0x245fbf={'coin':_0x32e961[_0x2f20ca(0x10a)],'number':_0x32e961[_0x2f20ca(0x188)],'breakeven':_0x32e961[_0x2f20ca(0xd4)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f20ca(0x119)](_0x2f20ca(0xd3))['push'](_0x245fbf)['write']();}});}async function updateCoinResults(_0x2a49b0){const _0xd68050=_0x698bf9;let _0xdccb8a,_0x2775fe,_0x1ab258,_0x370fb6,_0x4bbda6,_0x4807c1,_0x725460=dbCoinResults[_0xd68050(0x119)](_0xd68050(0xd3))[_0xd68050(0x167)]({'coin':_0x2a49b0[_0xd68050(0x10a)]})[_0xd68050(0x144)]();if(!_0x725460)return;if(_0x2a49b0[_0xd68050(0xd1)]&&_0x2a49b0[_0xd68050(0xd1)]['currency']==config[_0xd68050(0x107)])_0xdccb8a=_0x2a49b0[_0xd68050(0xd1)][_0xd68050(0x11f)];else{if(_0x2a49b0[_0xd68050(0xd1)]&&_0x2a49b0[_0xd68050(0xd1)][_0xd68050(0x147)]==_0xd68050(0x176))_0xdccb8a=_0x2a49b0[_0xd68050(0xd1)]['cost']*global[_0xd68050(0xe8)]['BNB'+config[_0xd68050(0x107)]];else _0xdccb8a=0.001*_0x2a49b0[_0xd68050(0x137)];}const _0x425d1a=_0x2a49b0[_0xd68050(0x182)][_0xd68050(0x109)](config['basecoin']+'/');_0x425d1a&&(_0x4807c1={'coin':_0x2a49b0[_0xd68050(0x10a)],'symbol':_0x2a49b0[_0xd68050(0x182)],'filled':_0x2a49b0['filled']*_0x2a49b0[_0xd68050(0xd4)],'side':_0x2a49b0['side']==_0xd68050(0x190)?_0xd68050(0x189):_0xd68050(0x190),'price':0x1/_0x2a49b0[_0xd68050(0xd4)]},_0x2a49b0={..._0x4807c1});_0x2a49b0[_0xd68050(0x116)]=='buy'?_0x1ab258=(_0x725460[_0xd68050(0x198)]*_0x725460[_0xd68050(0x188)]+_0x2a49b0[_0xd68050(0xd4)]*_0x2a49b0[_0xd68050(0x137)])/(_0x725460[_0xd68050(0x188)]+_0x2a49b0[_0xd68050(0x137)]):_0x1ab258=(_0x725460[_0xd68050(0x198)]*_0x725460[_0xd68050(0x188)]-_0x2a49b0[_0xd68050(0xd4)]*_0x2a49b0[_0xd68050(0x137)])/(_0x725460[_0xd68050(0x188)]-_0x2a49b0['filled']);_0x2a49b0['side']==_0xd68050(0x189)?_0x370fb6=_0x725460[_0xd68050(0x15a)]:_0x370fb6=_0x725460[_0xd68050(0x15a)]+(_0x2a49b0['price']-_0x725460[_0xd68050(0x198)])*_0x2a49b0['filled'];_0x2775fe=_0x2a49b0[_0xd68050(0x116)]=='sell'?_0x725460[_0xd68050(0x188)]-_0x2a49b0[_0xd68050(0x137)]:_0x725460[_0xd68050(0x188)]+_0x2a49b0[_0xd68050(0x137)],_0x4bbda6=(_0x2a49b0[_0xd68050(0xd4)]-_0x1ab258)*_0x2775fe;let _0x5cc3e9={'coin':_0x2a49b0[_0xd68050(0x10a)],'number':_0x2775fe,'breakeven':formatResult(_0x1ab258,0x8),'realized':formatResult(_0x370fb6,0x8),'unrealized':formatResult(_0x4bbda6,0x8),'fees':formatResult(_0x725460[_0xd68050(0x131)]+_0xdccb8a,0x8),'sells':_0x2a49b0[_0xd68050(0x116)]==_0xd68050(0x190)?_0x725460[_0xd68050(0x1cd)]+0x1:_0x725460[_0xd68050(0x1cd)],'buys':_0x2a49b0[_0xd68050(0x116)]=='buy'?_0x725460[_0xd68050(0x1c3)]+0x1:_0x725460[_0xd68050(0x1c3)]};dbCoinResults[_0xd68050(0x119)](_0xd68050(0xd3))[_0xd68050(0x167)]({'coin':_0x2a49b0[_0xd68050(0x10a)]})[_0xd68050(0xe6)](_0x5cc3e9)[_0xd68050(0x102)]();}async function placeOrder(_0x37ca07){const _0x48fe24=_0x698bf9,_0x3c257c=config['ordertype']==_0x48fe24(0x12f)?'market':_0x48fe24(0x17b);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x48fe24(0x1b2)](currentCoins));for(const _0x127286 of _0x37ca07){let _0x505529,_0x510485,_0x42cc42,_0x2ee35d,_0x555715,_0x53f8bd=_0x127286['symbol'];try{const _0x3e44ce=await exchange[_0x48fe24(0x173)](_0x53f8bd),_0x49a82b=_0x3e44ce[_0x53f8bd];_0x505529=_0x49a82b[_0x48fe24(0xfa)],_0x510485=_0x49a82b[_0x48fe24(0x1cc)],_0x42cc42=_0x49a82b[_0x48fe24(0x18b)];_0x127286[_0x48fe24(0x138)]?(_0x2ee35d=_0x127286['side']==_0x48fe24(0x189)?_0x48fe24(0x190):'buy',_0x555715=Math['abs'](_0x127286[_0x48fe24(0x130)])/_0x505529):(_0x2ee35d=_0x127286[_0x48fe24(0x116)],_0x555715=Math['abs'](_0x127286['trade']));_0x3c257c=='limit'&&(config[_0x48fe24(0x16a)]==_0x48fe24(0x16c)&&(_0x505529=_0x2ee35d==_0x48fe24(0x189)?_0x510485:_0x42cc42),config['ordertype']==_0x48fe24(0x115)&&(_0x505529=_0x2ee35d=='buy'?_0x42cc42:_0x510485));_0x555715=formatResult(_0x555715,0x8),_0x505529=formatResult(_0x505529,0x8);const _0x2bc5d4=await exchange[_0x48fe24(0xfe)](_0x53f8bd,_0x3c257c,_0x2ee35d,_0x555715,_0x505529);lastOrders['push']({'orderId':_0x2bc5d4['id'],'symbol':_0x53f8bd,'side':_0x2ee35d,'reverse':_0x127286[_0x48fe24(0x138)],'amount':_0x127286[_0x48fe24(0x138)]?_0x2bc5d4[_0x48fe24(0xf1)]*_0x2bc5d4[_0x48fe24(0xd4)]:_0x2bc5d4[_0x48fe24(0xf1)],'filled':_0x127286[_0x48fe24(0x138)]?_0x2bc5d4[_0x48fe24(0x137)]*_0x2bc5d4[_0x48fe24(0xd4)]:_0x2bc5d4[_0x48fe24(0x137)],'price':_0x2bc5d4['price']});const _0x2984f5=_0x2ee35d==_0x48fe24(0x190)?config[_0x48fe24(0x14a)]?String[_0x48fe24(0x12c)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x48fe24(0x15d)])+'\x20':'',_0x46bcce=_0x3c257c=='market'?_0x48fe24(0x1c5):config['ordertype']==_0x48fe24(0x16c)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x3c257c==_0x48fe24(0x12f))logHistory('order',''+_0x2984f5+_0x46bcce+_0x48fe24(0x1db)+_0x53f8bd+'\x20'+_0x2ee35d+'\x20#'+formatResult(_0x2bc5d4[_0x48fe24(0x137)],0x8)+'\x20@'+formatResult(_0x2bc5d4['price'],0x8));else logHistory(_0x48fe24(0x11c),''+_0x2984f5+_0x46bcce+_0x48fe24(0x1db)+_0x53f8bd+'\x20'+_0x2ee35d+'\x20#'+formatResult(_0x2bc5d4[_0x48fe24(0xf1)],0x8)+'\x20@'+formatResult(_0x2bc5d4[_0x48fe24(0xd4)],0x8));_0x2bc5d4[_0x48fe24(0x10a)]=_0x127286['coin'],await updateCoinResults(_0x2bc5d4);if(config[_0x48fe24(0x1b0)]!=0x0){let _0x12559d=null;if(cooldownTracker[_0x48fe24(0x1a0)]==config[_0x48fe24(0x1b0)]-0x1)_0x12559d=cooldownTracker[_0x48fe24(0xf2)]();const _0x4171ae=getTimeStamp();cooldownTracker[_0x48fe24(0x1d5)](_0x4171ae);if(_0x12559d){const _0x14ee47=fns[_0x48fe24(0x141)](new Date(_0x4171ae),new Date(_0x12559d));_0x14ee47<cooldownInterval&&(logHistory(_0x48fe24(0x10b),_0x48fe24(0x133)+config[_0x48fe24(0x1b0)]+_0x48fe24(0x14e)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x48fe24(0x15c)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4078b5){if(_0x4078b5['toString']()[_0x48fe24(0x109)](_0x48fe24(0x151)))logHistory(_0x48fe24(0x10b),_0x48fe24(0xea)+_0x53f8bd);else{if(_0x4078b5[_0x48fe24(0x1a6)]()[_0x48fe24(0x109)](_0x48fe24(0x161)))logHistory(_0x48fe24(0x10b),_0x48fe24(0x103)+_0x53f8bd);else await handleError(_0x4078b5,'placeOrder()');}}}if(lastOrders[_0x48fe24(0x1a0)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x48fe24(0x194)]&&(config['ordertype']=='market'?logHistory(_0x48fe24(0x10b),_0x48fe24(0x11a)):logHistory(_0x48fe24(0x10b),_0x48fe24(0x185)));else coolingDown&&(!config[_0x48fe24(0x194)]&&logHistory('error',_0x48fe24(0xd9)));}}function logHistory(_0x24dd95,_0x556763,_0x3091fa=''){const _0x35e874=_0x698bf9;let _0x4cba10={'time':getTimeStamp(),'type':_0x24dd95,'event':_0x556763,'botname':config[_0x35e874(0x139)],'showname':config[_0x35e874(0x1a7)]};dbLogs[_0x35e874(0x119)]('logs')[_0x35e874(0x1d5)](_0x4cba10)['write']();if(_0x3091fa=='')_0x3091fa=_0x556763;proxyEmit(_0x35e874(0x1af),{'log':_0x4cba10,'summary':_0x3091fa}),process[_0x35e874(0xef)]({'telegram':_0x4cba10},_0x573225=>{}),logging(''+_0x4cba10[_0x35e874(0x1af)]);}function emitHistory(_0x12c29c={}){const _0x228206=_0x698bf9;Object[_0x228206(0xf8)](_0x12c29c)[_0x228206(0x1a0)]==0x0&&(_0x12c29c={'type':[_0x228206(0x11c),_0x228206(0x1af)],'event':'','page':0x1});if(_0x12c29c[_0x228206(0x1a8)][_0x228206(0x109)](_0x228206(0x1af)))_0x12c29c['type']['splice'](_0x12c29c['type'][_0x228206(0x1cb)](_0x228206(0x1af)),0x1,'error',_0x228206(0x16d));if(dbLogs['has'](_0x228206(0x12d))[_0x228206(0x144)]()){let _0x572c71=dbLogs[_0x228206(0x119)]('logs')['filter'](_0x5a421e=>{const _0x3dfed5=_0x228206;if(_0x12c29c[_0x3dfed5(0x1a8)]['length']==0x0)return![];else return _0x12c29c[_0x3dfed5(0x1a8)][_0x3dfed5(0x109)](_0x5a421e[_0x3dfed5(0x1a8)]);})[_0x228206(0x17d)](_0x4e060d=>{const _0x3ce26a=_0x228206;if(_0x12c29c[_0x3ce26a(0x1af)]=='')return!![];else return _0x4e060d[_0x3ce26a(0x1af)]['toLowerCase']()['includes'](_0x12c29c[_0x3ce26a(0x1af)]['toLowerCase']());})['sortBy'](_0x228206(0xe0)),_0x33a5ab=_0x572c71[_0x228206(0x144)]()[_0x228206(0x1a0)];_0x572c71=_0x572c71['reverse']()[_0x228206(0x1ac)]((_0x12c29c[_0x228206(0x150)]-0x1)*logPageSize,_0x12c29c['page']*logPageSize-0x1)[_0x228206(0x138)]()[_0x228206(0x144)](),proxyEmit(_0x228206(0x1cf),{'logs':_0x572c71,'total':_0x33a5ab});}else proxyEmit(_0x228206(0x1cf),{'logs':[],'total':0x0});}async function pauseBot(_0x38635c){const _0x54b11a=_0x698bf9,_0x2663cf=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x54b11a(0xee)](),consecutivePauses=0x1;else{if(_0x2663cf-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x54b11a(0xef)]({'stop':_0x54b11a(0x1c8)},_0x1110f9=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x54b11a(0xee)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x54b11a(0x10b),_0x54b11a(0xe2)+consecutivePauses+')'),await sleep(_0x38635c),botPaused=![],reset();}}async function handleError(_0x21881e,_0x1a099a,_0x4b90f7=''){const _0x1d1dfb=_0x698bf9;if(_0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)](_0x1d1dfb(0x1d7)))logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0x172)),await pauseBot(pauseBotInterval);else{if(_0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)](_0x1d1dfb(0x1c0)))logHistory('error',_0x1a099a+_0x1d1dfb(0x140)),await pauseBot(pauseBotInterval);else{if(_0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)](_0x1d1dfb(0x17f)))logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0x183)),await pauseBot(pauseBotInterval);else{if(_0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)](_0x1d1dfb(0x122)))logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0x152)),logHistory(_0x1d1dfb(0x10b),_0x1d1dfb(0xd5)),process['send']({'stop':_0x1d1dfb(0x170)},_0x15c923=>{});else{if(_0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)](_0x1d1dfb(0xe9)))logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0x1c9)),logHistory('error',_0x1d1dfb(0xd5)),process['send']({'stop':'kill'},_0x3918fd=>{});else{if(_0x21881e['toString']()['includes'](_0x1d1dfb(0x1dc)))logHistory('error',_0x1a099a+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x1d1dfb(0x10b),_0x1d1dfb(0xd5)),process[_0x1d1dfb(0xef)]({'stop':'kill'},_0x199b1e=>{});else{if(_0x21881e['toString']()[_0x1d1dfb(0x109)](_0x1d1dfb(0x1d1)))logHistory('error',_0x1a099a+_0x1d1dfb(0x16b)),logHistory(_0x1d1dfb(0x10b),_0x1d1dfb(0xd5)),process[_0x1d1dfb(0xef)]({'stop':'kill'},_0x1d2159=>{});else{if(_0x21881e['toString']()[_0x1d1dfb(0x109)]('InvalidNonce'))logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0xe1)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x1d1dfb(0x1c8)},_0x467aad=>{});else _0x21881e[_0x1d1dfb(0x1a6)]()[_0x1d1dfb(0x109)]('InsufficientFunds')?logHistory('error',_0x1a099a+_0x1d1dfb(0x145)):(logHistory(_0x1d1dfb(0x10b),_0x1a099a+_0x1d1dfb(0xd8)),logging(_0x1a099a+_0x1d1dfb(0x1c1),_0x21881e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3616d8,_0x3384b8){const _0x20352e=_0x698bf9;return parseFloat(_0x3616d8[_0x20352e(0x106)](_0x3384b8));}function logging(_0x34c557,_0x45d046=''){const _0x682a24=_0x698bf9;if(config['showname'])console[_0x682a24(0x199)](getTimeStamp()+':\x20'+config['botname']+_0x682a24(0x14c)+_0x34c557,_0x45d046);else console['log'](getTimeStamp()+_0x682a24(0xed)+botID+_0x682a24(0x14c)+_0x34c557,_0x45d046);}function getServerTime(){const _0x5edc88=_0x698bf9,_0x23610a=new Date();return _0x23610a[_0x5edc88(0x1bc)]()+'/'+(_0x23610a['getMonth']()+0x1)['toString']()[_0x5edc88(0x114)](0x2,'0')+'/'+_0x23610a[_0x5edc88(0x124)]()['toString']()[_0x5edc88(0x114)](0x2,'0')+'\x20'+_0x23610a[_0x5edc88(0xfc)]()[_0x5edc88(0x1a6)]()[_0x5edc88(0x114)](0x2,'0')+':'+_0x23610a[_0x5edc88(0x11b)]()[_0x5edc88(0x1a6)]()[_0x5edc88(0x114)](0x2,'0')+':'+_0x23610a[_0x5edc88(0x10e)]()[_0x5edc88(0x1a6)]()[_0x5edc88(0x114)](0x2,'0');}function getTimeStamp(){const _0x1c30e5=_0x698bf9,_0x2edcae=shiftedTime();return _0x2edcae[_0x1c30e5(0x1bc)]()+'/'+(_0x2edcae[_0x1c30e5(0x1ca)]()+0x1)[_0x1c30e5(0x1a6)]()[_0x1c30e5(0x114)](0x2,'0')+'/'+_0x2edcae[_0x1c30e5(0x124)]()[_0x1c30e5(0x1a6)]()[_0x1c30e5(0x114)](0x2,'0')+'\x20'+_0x2edcae[_0x1c30e5(0xfc)]()[_0x1c30e5(0x1a6)]()[_0x1c30e5(0x114)](0x2,'0')+':'+_0x2edcae[_0x1c30e5(0x11b)]()['toString']()[_0x1c30e5(0x114)](0x2,'0')+':'+_0x2edcae['getSeconds']()[_0x1c30e5(0x1a6)]()[_0x1c30e5(0x114)](0x2,'0');}function getDate(){const _0x2c1313=_0x698bf9,_0x1a066c=shiftedTime();return _0x1a066c[_0x2c1313(0x1bc)]()+'/'+(_0x1a066c[_0x2c1313(0x1ca)]()+0x1)[_0x2c1313(0x1a6)]()['padStart'](0x2,'0')+'/'+_0x1a066c[_0x2c1313(0x124)]()[_0x2c1313(0x1a6)]()[_0x2c1313(0x114)](0x2,'0');}function _0x14d3(){const _0x31a11a=['getPortfolio()','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','BTC/USDT','running','length','split','userData','getFiat()','Order\x20filled:\x20','cancelOrder','toString','showname','type','USDC','getStartingBalances','1761UXrLRj','slice','sort','binanceus','event','cooldown','timestamp','stringify','max','reconnected','add','************','4092588zCpdty','BTC','BTC/EUR','getCloses()','valid','getFullYear','HOT/EUR','remainingSymbols','12680992PnRBwc','ExchangeNotAvailable','\x20|\x20Error\x20details:\x20','fetchBalance','buys','limits','Market','recreateHistory()','accumulatedQuantity','restart','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getMonth','indexOf','bid','sells','1410616QkUotN','event-history','Performance\x20recreation\x20completed\x20successfully','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','loadMarkets','15upJPnE','formattedMessage','push',',\x20must\x20be\x20a\x203\x20digit\x20number','DDoSProtection','apply','function','FILLED','\x20order:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','eachDayOfInterval','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','565206iQUFBG','Binance\x20API\x20key\x20is\x20invalid','fee','startnumber','coins','price','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','portfolio','configuration-stored','\x20|\x20Unknown\x20error\x20occured','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','subscribeSpotUserDataStream','performance','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','argv','subscribeSpotKline','storeConfiguration','time','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','Pausing\x20bot\x20for\x205\x20minutes\x20(','isArray','yyyy/MM/dd','fetchOrders','assign','5762TmwFEe','ticker','AuthenticationError','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','-config.json','distribution',':\x20Bot\x20','getTime','send','Order:\x20','amount','shift','balances','sha256','lowdb','eventType','parse','keys','closeWs','last','-performance.json','getHours','entries','createOrder','wss://stream.binance.com:9443','configuration','RSA-OAEP','write','Order\x20amount\x20is\x20invalid:\x20','lowdb/adapters/FileSync','kline','toFixed','basecoin','differenceInCalendarDays','includes','coin','error','map','recreate','getSeconds','remove','search','startdate','-events.json','Binance\x20API\x20secret\x20is\x20invalid','padStart','limit-low','side','parseISO','replace','get','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','getMinutes','order','storeHeadless','BUSD','cost','DAI/','bot-','API-key\x20format\x20invalid','apiKey','getDate','progress','mkdirSync','min','symbols','splice','coin-loading-progress','apiSecret','fromCodePoint','logs','loadSymbols()','market','trade','fees','args','Executed\x20','initws()','format','version','filled','reverse','botname','message','secure','timeshift','total','close','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','differenceInSeconds','exchange','usd','value','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','49oKcshC','currency','Crypt','Bot\x20','emojisell','HOT/BTC','\x20>\x20','bb-settings.json','\x20orders\x20in\x20less\x20than\x20','defaults','page','MIN_NOTIONAL','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','BTCBUSD','1043424wtBiml','OrderNotFound','hybrid-crypto-js','data','./version.json','excluded','realized','threshold','\x20hour','emojibuy','orderType','milliseconds','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Invalid\x20quantity','settings','date-fns','orderId','./config/','startprice','find','datetime','getPortfolio','ordertype','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit-high','success','getCoins()','constructor','kill','wsKey','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','fetchTickers','001','round','BNB','58835730cyZTyL','timeout','delta','date','limit','existsSync','filter','binance','RequestTimeout','target','outboundAccountPosition','symbol','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','forEach','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','LIMIT','WebSockets(','number','buy','placeOrder','ask','(((.+)+)+)+$','-results.json','offset','cancel','sell','Unfilled\x20order(s)\x20canceled\x20after\x20','ccxt','cancelOrder()','headless','emitHistory','Error:\x20Invalid\x20argument\x20','privateKey','breakeven','log','eur','bot'];_0x14d3=function(){return _0x31a11a;};return _0x14d3();}function getHour(){const _0x31b0f2=_0x698bf9,_0x227577=shiftedTime();return _0x227577[_0x31b0f2(0xfc)]()[_0x31b0f2(0x1a6)]()[_0x31b0f2(0x114)](0x2,'0');}function sleep(_0x56888d){return new Promise(_0xa25f2e=>setTimeout(_0xa25f2e,_0x56888d));}function shiftedTime(){const _0x3b2369=_0x698bf9,_0x29a02b=new Date();let _0x1edf6a=_0x29a02b;if(config&&config[_0x3b2369(0x13c)]!==0x0)_0x1edf6a=fns[_0x3b2369(0x1b5)](_0x29a02b,{'hours':config[_0x3b2369(0x13c)]});return _0x1edf6a;}