const _0x95ed48=_0x10a3;(function(_0x2d1c48,_0x19ffd3){const _0x4cac09=_0x10a3,_0x574668=_0x2d1c48();while(!![]){try{const _0x2a30c5=parseInt(_0x4cac09(0x261))/0x1*(-parseInt(_0x4cac09(0x251))/0x2)+-parseInt(_0x4cac09(0x1b7))/0x3*(parseInt(_0x4cac09(0x286))/0x4)+-parseInt(_0x4cac09(0x229))/0x5*(parseInt(_0x4cac09(0x1d2))/0x6)+-parseInt(_0x4cac09(0x26c))/0x7*(parseInt(_0x4cac09(0x27b))/0x8)+parseInt(_0x4cac09(0x1f3))/0x9+-parseInt(_0x4cac09(0x1de))/0xa*(parseInt(_0x4cac09(0x1ad))/0xb)+parseInt(_0x4cac09(0x259))/0xc;if(_0x2a30c5===_0x19ffd3)break;else _0x574668['push'](_0x574668['shift']());}catch(_0x3bcd5f){_0x574668['push'](_0x574668['shift']());}}}(_0x4d96,0x19a5b));const _0x19cfd7=function(){let _0x290568=!![];return function(_0x151b7f,_0x5df687){const _0x1c4dad=_0x290568?function(){if(_0x5df687){const _0xbd8664=_0x5df687['apply'](_0x151b7f,arguments);return _0x5df687=null,_0xbd8664;}}:function(){};return _0x290568=![],_0x1c4dad;};}(),_0x3a0529=_0x19cfd7(this,function(){const _0x1d39ab=_0x10a3;return _0x3a0529[_0x1d39ab(0x22d)]()[_0x1d39ab(0x2a4)]('(((.+)+)+)+$')['toString']()['constructor'](_0x3a0529)[_0x1d39ab(0x2a4)]('(((.+)+)+)+$');});_0x3a0529();'use strict';const ccxt=require(_0x95ed48(0x29a)),low=require(_0x95ed48(0x23f)),FileSync=require(_0x95ed48(0x1bc)),fs=require('fs'),fns=require(_0x95ed48(0x29e)),{WebsocketClient,DefaultLogger}=require(_0x95ed48(0x227)),Crypt=require(_0x95ed48(0x1c5))[_0x95ed48(0x1b2)];let exchange,wsClient;function _0x10a3(_0x5edd47,_0x3a7713){const _0x429658=_0x4d96();return _0x10a3=function(_0x3a0529,_0x19cfd7){_0x3a0529=_0x3a0529-0x19b;let _0x4d968d=_0x429658[_0x3a0529];return _0x4d968d;},_0x10a3(_0x5edd47,_0x3a7713);}global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x95ed48(0x225))['version'],botID=process['argv'][0x2]||_0x95ed48(0x1e0),pattern=/^[0-9]{3}$/;if(!pattern[_0x95ed48(0x29b)](botID))return console[_0x95ed48(0x296)]('Error:\x20Invalid\x20argument\x20'+botID+_0x95ed48(0x21b)),process[_0x95ed48(0x20f)](0x1);const userID=process[_0x95ed48(0x233)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x95ed48(0x22e);!fs[_0x95ed48(0x264)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x95ed48(0x1a4),performancefile=configpath+_0x95ed48(0x1bd)+botID+_0x95ed48(0x207),coinresultsfile=configpath+_0x95ed48(0x1bd)+botID+_0x95ed48(0x202),settingsfile=configpath+_0x95ed48(0x1f1),securefile=configpath+_0x95ed48(0x271),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x95ed48(0x1e8)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x95ed48(0x1e8)]({'data':[]})[_0x95ed48(0x1c0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x95ed48(0x1e8)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x95ed48(0x220),'symbol':_0x95ed48(0x267)},'usd':{'coin':_0x95ed48(0x2a2),'symbol':_0x95ed48(0x24c)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3c1867)=>{},'debug':(..._0x2eecc1)=>{},'notice':(..._0x21d173)=>{},'info':(..._0xa6abcb)=>{},'warning':(..._0x526522)=>{},'error':async function(..._0x18cf60){const _0x4e0da9=_0x95ed48,_0x5bbe3f=new Date()[_0x4e0da9(0x255)]();if(!lastErrorShown||_0x5bbe3f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x4e0da9(0x255)](),logHistory(_0x4e0da9(0x1e2),_0x4e0da9(0x268)+consecutivePauses+_0x4e0da9(0x25f));let _0x3747b5='';if(_0x18cf60[0x0])_0x3747b5+=_0x18cf60[0x0];if(_0x18cf60[0x1]&&_0x18cf60[0x1]['error']&&_0x18cf60[0x1]['error'][_0x4e0da9(0x22f)])_0x3747b5+=_0x4e0da9(0x274)+_0x18cf60[0x1][_0x4e0da9(0x1e2)][_0x4e0da9(0x22f)];logging(_0x4e0da9(0x268)+consecutivePauses+_0x4e0da9(0x19d),''+_0x3747b5),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x95ed48(0x1a7)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x95ed48(0x240)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process[_0x95ed48(0x232)]({'started':_0x95ed48(0x235)}),initializeProcessListeners();function proxyEmit(_0x5d011b,_0xc46f92=null){process['send']({'function':_0x5d011b,'args':_0xc46f92});}function initializeProcessListeners(){const _0x1c2045=_0x95ed48;process['on'](_0x1c2045(0x22f),_0x5757e3=>{const _0x2bb4dd=_0x1c2045;switch(Object[_0x2bb4dd(0x215)](_0x5757e3)[0x0]){case _0x2bb4dd(0x240):_0x5757e3[_0x2bb4dd(0x240)]!=undefined&&(settings[_0x2bb4dd(0x240)]=_0x5757e3['timeshift'],updateTimeshift(settings[_0x2bb4dd(0x240)]));break;case _0x2bb4dd(0x1d8):switch(_0x5757e3[_0x2bb4dd(0x1d8)]){case _0x2bb4dd(0x201):initclient();break;case _0x2bb4dd(0x231):emitHistory(_0x5757e3[_0x2bb4dd(0x1a6)]);break;case _0x2bb4dd(0x216):getPortfolio(_0x5757e3['args']);break;case _0x2bb4dd(0x285):storeConfiguration(_0x5757e3[_0x2bb4dd(0x1a6)]);break;case _0x2bb4dd(0x20a):storeHeadless(_0x5757e3[_0x2bb4dd(0x1a6)]);break;case'getStartingBalances':getStartingBalances();break;case'placeOrder':placeOrder(_0x5757e3[_0x2bb4dd(0x1a6)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x480233=_0x95ed48;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x480233(0x206)],config[_0x480233(0x273)]);let _0x1e410d=await loadSymbols();_0x1e410d&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3720da,_0x19734e){const _0x375418=_0x95ed48,_0x249e3a=ccxt[config[_0x375418(0x19e)]];let _0x24c4a8;switch(config[_0x375418(0x19e)]){case _0x375418(0x227):_0x24c4a8=_0x375418(0x224);break;case'binanceus':_0x24c4a8=_0x375418(0x236);break;default:_0x24c4a8=_0x375418(0x224);}exchange=new _0x249e3a({'apiKey':_0x3720da,'secret':_0x19734e,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3720da,'api_secret':_0x19734e,'beautify':!![],'wsUrl':_0x24c4a8},logger),config['exchange']==_0x375418(0x1b8)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x375418(0x26b)},'usd':{'coin':_0x375418(0x2a2),'symbol':_0x375418(0x24c)}});}async function loadSymbols(){const _0x32c31a=_0x95ed48;let _0x4c8692;try{markets=await exchange['loadMarkets']();const _0x18e134=[_0x32c31a(0x287),_0x32c31a(0x239),_0x32c31a(0x1fe)];allSymbols=exchange[_0x32c31a(0x28b)]['filter'](_0x20540f=>{const _0x32a79f=_0x32c31a;let _0xc4be9a=![];return _0x18e134[_0x32a79f(0x1aa)](_0xdd3d84=>{const _0xcaed2=_0x32a79f;if(_0x20540f[_0xcaed2(0x1c4)](_0xdd3d84))_0xc4be9a=!![];}),!_0xc4be9a;}),_0x4c8692=!![];}catch(_0xfdcaf8){await handleError(_0xfdcaf8,_0x32c31a(0x1df)),_0x4c8692=![];}return _0x4c8692;}async function initbot(){const _0x13baeb=_0x95ed48;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x48dbc5=dbCoinResults[_0x13baeb(0x2a3)](_0x13baeb(0x27a))['value']();if(_0x48dbc5[_0x13baeb(0x1e7)]==0x0)await resetCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5d8755=_0x95ed48;wsinitialized=![];ws1&&(ws1[_0x5d8755(0x1aa)](_0x4c2fdf=>{const _0x3807e0=_0x5d8755;try{wsClient[_0x3807e0(0x203)](_0x4c2fdf);}catch(_0x14c1a1){}}),ws1=[]);if(ws2){try{wsClient[_0x5d8755(0x203)](ws2);}catch(_0x1238be){}ws2=null;}}async function initws(){const _0x23827e=_0x95ed48;cleanws();let _0x31c6a8=[];currentCoins['forEach'](_0x57cdbc=>{const _0x583904=_0x10a3;if(_0x57cdbc['coin']!=config['basecoin'])_0x31c6a8[_0x583904(0x26f)](noslash(_0x57cdbc[_0x583904(0x258)]));});if(!_0x31c6a8['includes'](stablecoins[_0x23827e(0x24d)][_0x23827e(0x2a8)]))_0x31c6a8[_0x23827e(0x26f)](stablecoins[_0x23827e(0x24d)][_0x23827e(0x2a8)]);if(!_0x31c6a8[_0x23827e(0x1c4)](stablecoins[_0x23827e(0x212)][_0x23827e(0x2a8)]))_0x31c6a8[_0x23827e(0x26f)](stablecoins[_0x23827e(0x212)]['coin']);if(!_0x31c6a8[_0x23827e(0x1c4)](_0x23827e(0x24e)+config[_0x23827e(0x24f)]))_0x31c6a8[_0x23827e(0x26f)](_0x23827e(0x24e)+config[_0x23827e(0x24f)]);try{_0x31c6a8[_0x23827e(0x1aa)]((_0x3a7211,_0x4ae340)=>{const _0xbc734=_0x23827e;ws1[_0x4ae340]=wsClient[_0xbc734(0x24a)](_0x3a7211,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0x3e8948=>{const _0x230d10=_0x23827e;if(!Array[_0x230d10(0x1b3)](_0x3e8948)&&!_0x3e8948['wsKey'][_0x230d10(0x1c4)](_0x230d10(0x20e))){if(_0x3e8948[_0x230d10(0x1d1)]==='kline'){global[_0x230d10(0x266)][_0x3e8948[_0x230d10(0x19b)][_0x230d10(0x258)]]=_0x3e8948['kline'][_0x230d10(0x1ff)];return;}}else{if(!Array[_0x230d10(0x1b3)](_0x3e8948)&&_0x3e8948[_0x230d10(0x21e)][_0x230d10(0x1c4)](_0x230d10(0x20e))){if(_0x3e8948[_0x230d10(0x1e3)]['includes']('spot')){updateNumberCoins(_0x3e8948);return;}}}}),wsClient['on'](_0x23827e(0x283),async _0x3fdcb9=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1e0024){await handleError(_0x1e0024,_0x23827e(0x23d));}let _0x5276ed,_0x4a90df=0x0;loading[_0x23827e(0x275)]=[];let _0x51c226=0x0;currentCoins['forEach'](_0x5de51c=>{const _0xdff50b=_0x23827e;if(_0x5de51c['coin']!=config[_0xdff50b(0x24f)])loading[_0xdff50b(0x275)][_0xdff50b(0x26f)](_0x5de51c[_0xdff50b(0x258)]);}),loadingCanceled=![];while(_0x5276ed!=currentCoins['length']-0x1){_0x5276ed=0x0,currentCoins[_0x23827e(0x1aa)](_0x57a748=>{const _0x21aa1b=_0x23827e;_0x57a748['coin']!=config[_0x21aa1b(0x24f)]&&global[_0x21aa1b(0x266)][noslash(_0x57a748[_0x21aa1b(0x258)])]&&(loading[_0x21aa1b(0x275)]=loading['remainingSymbols'][_0x21aa1b(0x2a0)](_0x2702e6=>_0x2702e6!=_0x57a748[_0x21aa1b(0x258)]),_0x5276ed++);}),loading['progress']=Math[_0x23827e(0x1e6)](_0x5276ed/(currentCoins[_0x23827e(0x1e7)]-0x1)*0x64);_0x51c226>0x1e*0x5&&(loading[_0x23827e(0x242)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x23827e(0x1b4)]=!![],emitLoadingProgress();break;}else _0x5276ed!=_0x4a90df&&(_0x4a90df=_0x5276ed,emitLoadingProgress()),_0x51c226++,await sleep(0xc8);}if(_0x5276ed==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x23c6e9=_0x95ed48;proxyEmit(_0x23c6e9(0x1d6),loading);}function _0x4d96(){const _0x226787=['min','getTime','fee','orderType','symbol','8247036yJjAHo','offset','splice','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','datetime','Signature\x20for\x20this\x20request\x20is\x20not\x20valid',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cost','46339UDZyMj','type','side','existsSync','coinamount','ticker','BTC/EUR','WebSockets(','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','distribution','BTC/BUSD','8267zvCueK','order','Invalid\x20quantity','push','market','bb-secure.json','find','apiSecret','\x20-\x20','remainingSymbols','placeOrder()','Order(s)\x20not\x20validated\x20after\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Pausing\x20bot\x20for\x205\x20minutes\x20(','coins','1072AgujoI','parse','Order(s)\x20validated\x20-\x20balancing\x20resumed','indexOf',':\x20Bot\x20','decrypt','\x20>\x20','getCloses()','reconnected','limit-low','storeConfiguration','92992RBfwXQ','DAI/','emojibuy','DDoSProtection','bid','symbols','showname','Order\x20filled:\x20','realized','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','toFixed','replace','\x20order:\x20','excluded','log','currency','yyyy-MM-dd\x27T\x27HH:mm:ss','assign','ccxt','test','fetchTickers','filled','date-fns','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','filter','Limit\x20(low-margin)','BTCUSDT','get','search','recreateHistory()','yyyy/MM/dd','getMonth','coin','kline','availableBalance',')\x20|\x20Error\x20details:\x20','exchange','performance','startdate','\x20|\x20Unknown\x20error\x20occured','logs','price','-events.json','event-history','args','RSA-OAEP','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','startnumber','forEach','toLowerCase','settings','1991DHtDUL','number','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','reduce','getCoins()','Crypt','isArray','cancel','padStart','AuthenticationError','15trJwqt','binanceus','Performance\x20recreation\x20completed\x20successfully','configuration','getHours','lowdb/adapters/FileSync','bot-','map','trade','write','executionReport','fetchBalance','valid','includes','hybrid-crypto-js','data','page','getDate','secure','total','timestamp','Binance\x20API\x20key\x20is\x20invalid','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','EUR','\x20|\x20Error\x20details:\x20','reverse','eventType','66cDxIpL','fromCodePoint','max','buy','coin-loading-progress','Order(s)\x20filled\x20-\x20balancing\x20resumed','function','value','date','asset','sortBy','ordertype','11320cgzKWw','loadSymbols()','001','limit-high','error','wsMarket','FILLED','kill','round','length','defaults','configuration-stored','\x20orders\x20in\x20less\x20than\x20','limits','add','sells','portfolio','Market','getFiat()','bb-settings.json','Executed\x20','962478aQlBcF','remove','startprice','delta','restart','cooldown','buys','API-key\x20format\x20invalid','\x20minutes\x20-\x20balancing\x20resumed','time','sell','HOT/EUR','close','************','initclient','-results.json','closeWs','entries','botname','apiKey','-performance.json','success','Order\x20amount\x20is\x20invalid:\x20','storeHeadless','getPortfolio()','threshold','enabled','userData','exit','InsufficientFunds','bot','usd','limit','ExchangeNotAvailable','keys','getPortfolio','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','fetchOHLCV','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','BTC',',\x20must\x20be\x20a\x203\x20digit\x20number','last','abs','wsKey','cancelOrder','BTCEUR','\x20hour','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','emojisell','wss://stream.binance.com:9443','./version.json','slice','binance','breakeven','32155vmUjru','has','shift','privateKey','toString','./config/','message','RequestTimeout','emitHistory','send','argv','USDT','running','wss://stream.binance.us:9443','getMinutes','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','HOT/BTC','eachDayOfInterval','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','orderId','initws()','target','lowdb','timeshift','amount','timeout','event','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','recreate','getFullYear','yyyy/MM/dd\x20HH:mm:ss','accumulatedQuantity','parseISO','subscribeSpotKline','getSeconds','BTC/USDT','eur','BNB','basecoin','stringify','6goYkea','headless','format'];_0x4d96=function(){return _0x226787;};return _0x4d96();}async function getFiat(){const _0x1383ca=_0x95ed48;let _0x27c571=0x0,_0xb25d37=0x0;try{_0x27c571=global[_0x1383ca(0x266)][stablecoins[_0x1383ca(0x24d)][_0x1383ca(0x2a8)]],_0xb25d37=global[_0x1383ca(0x266)][stablecoins['usd'][_0x1383ca(0x2a8)]];}catch(_0x409b6e){await handleError(_0x409b6e,_0x1383ca(0x1f0));}return{'eur':Number(_0x27c571),'usd':Number(_0xb25d37)};}async function setStartDatePerformance(_0x397462){const _0x4a8130=_0x95ed48,_0x5005e1=fns[_0x4a8130(0x253)](new Date(_0x397462[_0x4a8130(0x1a0)]),'yyyy/MM/dd');let _0x381903=[];_0x381903[stablecoins['eur'][_0x4a8130(0x2a8)]]=await getCloses(stablecoins[_0x4a8130(0x24d)][_0x4a8130(0x258)],new Date(_0x397462[_0x4a8130(0x1a0)]),0x1),_0x381903[stablecoins['usd'][_0x4a8130(0x2a8)]]=await getCloses(stablecoins[_0x4a8130(0x212)]['symbol'],new Date(_0x397462['startdate']),0x1);let _0x5b1aaf,_0x225173=[];_0x397462[_0x4a8130(0x1ee)]['forEach'](_0x22cff4=>{const _0x3fcb49=_0x4a8130;!_0x22cff4['excluded']&&_0x225173[_0x3fcb49(0x26f)]({'coin':_0x22cff4[_0x3fcb49(0x2a8)],'number':_0x22cff4['startnumber'],'price':_0x22cff4['startprice']});}),_0x5b1aaf={'date':_0x5005e1,'eur':_0x381903[stablecoins[_0x4a8130(0x24d)][_0x4a8130(0x2a8)]][0x0],'usd':_0x381903[stablecoins[_0x4a8130(0x212)]['coin']][0x0],'coins':_0x225173};let _0x364d1d=dbPerformance[_0x4a8130(0x2a3)](_0x4a8130(0x1c6))[_0x4a8130(0x272)]({'date':_0x5005e1})[_0x4a8130(0x1d9)]();_0x364d1d?dbPerformance['get']('data')[_0x4a8130(0x272)]({'date':_0x5005e1})[_0x4a8130(0x299)](_0x5b1aaf)[_0x4a8130(0x1c0)]():dbPerformance[_0x4a8130(0x2a3)]('data')[_0x4a8130(0x26f)](_0x5b1aaf)[_0x4a8130(0x1c0)](),_0x364d1d=dbPerformance['get'](_0x4a8130(0x1c6))[_0x4a8130(0x1dc)](_0x4a8130(0x1da))[_0x4a8130(0x1d9)](),_0x364d1d[_0x4a8130(0x1aa)](_0x3ce153=>{const _0x1f8e22=_0x4a8130;_0x3ce153[_0x1f8e22(0x1da)]<_0x5005e1&&dbPerformance[_0x1f8e22(0x2a3)]('data')[_0x1f8e22(0x1f4)]({'date':_0x3ce153[_0x1f8e22(0x1da)]})[_0x1f8e22(0x1c0)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x5ee533){const _0x51f8d3=_0x95ed48;let _0x1baec1,_0x471894=[];logHistory(_0x51f8d3(0x208),_0x51f8d3(0x1a8)),_0x5ee533[_0x51f8d3(0x1ee)]['forEach'](_0x75ea5c=>{const _0x41e694=_0x51f8d3;if(_0x75ea5c['coin']!=config[_0x41e694(0x24f)]&&!_0x75ea5c[_0x41e694(0x295)])_0x471894[_0x41e694(0x26f)]({'coin':_0x75ea5c[_0x41e694(0x2a8)],'symbol':_0x75ea5c[_0x41e694(0x258)]});});let _0x37432f=[];try{const _0x13922e=fns[_0x51f8d3(0x253)](fns[_0x51f8d3(0x249)](_0x5ee533[_0x51f8d3(0x1a0)][_0x51f8d3(0x293)](/\//g,'-')),_0x51f8d3(0x298));for(const _0x35c8a5 of _0x471894){if(_0x35c8a5[_0x51f8d3(0x2a8)]!=config['basecoin'])_0x1baec1=await exchange['fetchOrders'](_0x35c8a5[_0x51f8d3(0x258)],Date[_0x51f8d3(0x27c)](_0x13922e));_0x1baec1[_0x51f8d3(0x1aa)](_0x152e05=>{const _0x490201=_0x51f8d3,_0x5ca5e7=_0x35c8a5['symbol'][_0x490201(0x1c4)](config[_0x490201(0x24f)]+'/'),_0x1486b9=fns[_0x490201(0x253)](fns[_0x490201(0x249)](_0x152e05[_0x490201(0x25d)]),_0x490201(0x247)),_0xcc6e6e=fns[_0x490201(0x253)](fns[_0x490201(0x249)](_0x152e05[_0x490201(0x25d)]),_0x490201(0x2a6));let _0x8ffd0d;if(_0x152e05[_0x490201(0x263)]=='buy'&&_0x5ca5e7==![])_0x8ffd0d=_0x152e05[_0x490201(0x241)];if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1d5)&&_0x5ca5e7==!![])_0x8ffd0d=-_0x152e05[_0x490201(0x241)]*_0x152e05[_0x490201(0x1a3)];if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1fd)&&_0x5ca5e7==![])_0x8ffd0d=-_0x152e05[_0x490201(0x241)];if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1fd)&&_0x5ca5e7==!![])_0x8ffd0d=_0x152e05['amount']*_0x152e05[_0x490201(0x1a3)];_0x37432f[_0x490201(0x26f)]({'timestamp':_0x1486b9,'date':_0xcc6e6e,'coin':_0x35c8a5[_0x490201(0x2a8)],'symbol':_0x35c8a5[_0x490201(0x258)],'type':_0x152e05[_0x490201(0x262)],'side':_0x152e05['side'],'reverse':_0x5ca5e7,'amount':formatResult(_0x152e05[_0x490201(0x29d)],0x8),'filled':formatResult(_0x152e05[_0x490201(0x29d)],0x8),'coinamount':formatResult(_0x8ffd0d,0x8),'price':formatResult(_0x152e05[_0x490201(0x1a3)],0x8)});let _0xd68340;if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1d5)&&_0x5ca5e7==![])_0xd68340=-_0x152e05['amount']*_0x152e05[_0x490201(0x1a3)];if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1d5)&&_0x5ca5e7==!![])_0xd68340=_0x152e05[_0x490201(0x241)];if(_0x152e05[_0x490201(0x263)]==_0x490201(0x1fd)&&_0x5ca5e7==![])_0xd68340=_0x152e05[_0x490201(0x241)]*_0x152e05[_0x490201(0x1a3)];if(_0x152e05['side']==_0x490201(0x1fd)&&_0x5ca5e7==!![])_0xd68340=-_0x152e05[_0x490201(0x241)];_0x37432f[_0x490201(0x26f)]({'date':_0xcc6e6e,'coin':config[_0x490201(0x24f)],'coinamount':formatResult(_0xd68340,0x8)});});}_0x37432f['sort']((_0x144d61,_0x251d2f)=>_0x144d61[_0x51f8d3(0x1cb)]>_0x251d2f['timestamp']?0x1:_0x251d2f[_0x51f8d3(0x1cb)]>_0x144d61[_0x51f8d3(0x1cb)]?-0x1:0x0),dbLogs[_0x51f8d3(0x2a3)](_0x51f8d3(0x1a2))[_0x51f8d3(0x1f4)]()['write'](),_0x37432f[_0x51f8d3(0x1aa)](_0x4da578=>{const _0x4f6cdf=_0x51f8d3;let _0x550cda;_0x4da578[_0x4f6cdf(0x2a8)]!=config[_0x4f6cdf(0x24f)]&&(_0x550cda={'time':_0x4da578[_0x4f6cdf(0x1cb)],'type':_0x4f6cdf(0x26d),'event':'Order:\x20'+_0x4da578[_0x4f6cdf(0x258)]+'\x20'+_0x4da578['side']+'\x20#'+_0x4da578[_0x4f6cdf(0x241)]+'\x20@'+_0x4da578[_0x4f6cdf(0x1a3)]},dbLogs[_0x4f6cdf(0x2a3)](_0x4f6cdf(0x1a2))[_0x4f6cdf(0x26f)](_0x550cda)[_0x4f6cdf(0x1c0)]());});const _0x4d2221=fns[_0x51f8d3(0x23a)]({'start':new Date(_0x5ee533[_0x51f8d3(0x1a0)]),'end':new Date()})[_0x51f8d3(0x1be)](_0x1a7a9e=>fns[_0x51f8d3(0x253)](_0x1a7a9e,_0x51f8d3(0x2a6)));let _0x37b22e=[];_0x5ee533[_0x51f8d3(0x1ee)][_0x51f8d3(0x1aa)](_0x172066=>{const _0x1c3e59=_0x51f8d3;if(!_0x172066[_0x1c3e59(0x295)]){_0x37b22e[_0x172066['coin']]=[];let _0x3ef855=_0x172066['startnumber'];_0x4d2221[_0x1c3e59(0x1aa)]((_0xde23ad,_0x4d99c6)=>{const _0x55417b=_0x1c3e59;let _0x291062=_0x37432f[_0x55417b(0x2a0)](_0x559444=>_0x559444[_0x55417b(0x2a8)]==_0x172066[_0x55417b(0x2a8)]&&_0x559444[_0x55417b(0x1da)]==_0xde23ad);if(_0x291062[_0x55417b(0x1e7)]!=0x0){let _0xddd574=_0x291062[_0x55417b(0x1b0)]((_0x5396ae,_0x2af5d7)=>{const _0x4864e8=_0x55417b;return _0x5396ae+=_0x2af5d7[_0x4864e8(0x265)],_0x5396ae;},0x0);_0x3ef855+=_0xddd574;}_0x37b22e[_0x172066[_0x55417b(0x2a8)]][_0xde23ad]=_0x3ef855;});}});const _0x5fa967=[..._0x471894];_0x5fa967['push']({'coin':stablecoins[_0x51f8d3(0x24d)][_0x51f8d3(0x2a8)],'symbol':stablecoins[_0x51f8d3(0x24d)][_0x51f8d3(0x258)]}),_0x5fa967[_0x51f8d3(0x26f)]({'coin':stablecoins[_0x51f8d3(0x212)][_0x51f8d3(0x2a8)],'symbol':stablecoins['usd'][_0x51f8d3(0x258)]});let _0x43611f=[];for(const _0x10d18f of _0x5fa967){_0x43611f[_0x10d18f[_0x51f8d3(0x2a8)]]=await getCloses(_0x10d18f[_0x51f8d3(0x258)],new Date(_0x5ee533[_0x51f8d3(0x1a0)]));}dbPerformance[_0x51f8d3(0x2a3)](_0x51f8d3(0x1c6))[_0x51f8d3(0x1f4)]()[_0x51f8d3(0x1c0)](),_0x4d2221[_0x51f8d3(0x1aa)]((_0x386715,_0x58a9d8)=>{const _0x193cf3=_0x51f8d3;let _0x4479b6,_0x2fc557=[];_0x58a9d8==0x0?(_0x5ee533[_0x193cf3(0x1ee)][_0x193cf3(0x1aa)](_0x9356ed=>{const _0x510d3b=_0x193cf3;!_0x9356ed[_0x510d3b(0x295)]&&_0x2fc557[_0x510d3b(0x26f)]({'coin':_0x9356ed[_0x510d3b(0x2a8)],'number':_0x9356ed[_0x510d3b(0x1a9)],'price':_0x9356ed['startprice']});}),_0x4479b6={'date':_0x386715,'eur':_0x43611f[stablecoins['eur']['coin']][_0x58a9d8],'usd':_0x43611f[stablecoins[_0x193cf3(0x212)][_0x193cf3(0x2a8)]][_0x58a9d8],'coins':_0x2fc557}):(_0x5ee533[_0x193cf3(0x1ee)][_0x193cf3(0x1aa)](_0x44dbc2=>{const _0x28bcd9=_0x193cf3;!_0x44dbc2[_0x28bcd9(0x295)]&&_0x2fc557[_0x28bcd9(0x26f)]({'coin':_0x44dbc2[_0x28bcd9(0x2a8)],'number':_0x37b22e[_0x44dbc2[_0x28bcd9(0x2a8)]][_0x386715],'price':_0x44dbc2['coin']==config[_0x28bcd9(0x24f)]?0x1:_0x43611f[_0x44dbc2['coin']][_0x58a9d8]});}),_0x4479b6={'date':_0x386715,'eur':_0x43611f[stablecoins['eur'][_0x193cf3(0x2a8)]][_0x58a9d8],'usd':_0x43611f[stablecoins[_0x193cf3(0x212)]['coin']][_0x58a9d8],'coins':_0x2fc557}),dbPerformance[_0x193cf3(0x2a3)](_0x193cf3(0x1c6))[_0x193cf3(0x26f)](_0x4479b6)[_0x193cf3(0x1c0)]();}),emitPerformance(),await resetCoinResults();for(let _0x66e1d0 of _0x37432f){_0x66e1d0['coin']!=config[_0x51f8d3(0x24f)]&&await updateCoinResults(_0x66e1d0);}logHistory(_0x51f8d3(0x208),_0x51f8d3(0x1b9));}catch(_0x1c4c98){await handleError(_0x1c4c98,_0x51f8d3(0x2a5));}}async function getCloses(_0x2af6b0,_0x1606c4,_0x5331dd=undefined){const _0x488fc6=_0x95ed48,_0x44c3d5='1d';let _0x50ea10,_0x40bf60;const _0x3494d3=fns['differenceInCalendarDays'](new Date(),_0x1606c4)+0x1;try{const _0x5471c0=exchange['milliseconds']()-_0x3494d3*0x18*0xe10*0x3e8;_0x50ea10=await exchange[_0x488fc6(0x218)](_0x2af6b0,_0x44c3d5,_0x5471c0,_0x5331dd),_0x40bf60=await exchange[_0x488fc6(0x29c)](_0x2af6b0);}catch(_0x163b1d){await handleError(_0x163b1d,_0x488fc6(0x282));}let _0x5267c9=ohlcvToCloses(_0x50ea10);return _0x5267c9['push'](_0x40bf60[_0x2af6b0][_0x488fc6(0x21c)]),_0x5267c9;}function ohlcvToCloses(_0x407f4f){const _0x22ece0=_0x95ed48;let _0x3b70e6=[];return _0x407f4f[_0x22ece0(0x1aa)](function(_0x4ab774){const _0x2fc657=_0x22ece0;_0x3b70e6[_0x2fc657(0x26f)](_0x4ab774[0x4]);}),_0x3b70e6;}function getConfiguration(_0x22435b){const _0x570deb=_0x95ed48;let _0x25d5dd=dbConfig[_0x570deb(0x2a3)](_0x570deb(0x211))['find']({'botID':_0x22435b})[_0x570deb(0x1d9)]();if(_0x25d5dd){let _0x57de91=![];!_0x25d5dd[_0x570deb(0x19e)]&&(_0x25d5dd={..._0x25d5dd,'exchange':'binance'},_0x57de91=!![]),!_0x25d5dd[_0x570deb(0x24f)]&&(_0x25d5dd={..._0x25d5dd,'basecoin':_0x570deb(0x21a)},_0x57de91=!![]),!_0x25d5dd[_0x570deb(0x1dd)]&&(_0x25d5dd={..._0x25d5dd,'ordertype':_0x570deb(0x270)},_0x57de91=!![]),!_0x25d5dd[_0x570deb(0x242)]&&(_0x25d5dd={..._0x25d5dd,'timeout':0x14},_0x57de91=!![]),!_0x25d5dd[_0x570deb(0x288)]&&(_0x25d5dd={..._0x25d5dd,'emojibuy':''},_0x57de91=!![]),!_0x25d5dd['emojisell']&&(_0x25d5dd={..._0x25d5dd,'emojisell':''},_0x57de91=!![]),!_0x25d5dd[_0x570deb(0x28c)]&&(_0x25d5dd={..._0x25d5dd,'showname':![]},_0x57de91=!![]),_0x57de91&&(_0x25d5dd={'botID':_0x25d5dd['botID'],'exchange':_0x25d5dd[_0x570deb(0x19e)],'apiKey':_0x25d5dd[_0x570deb(0x206)],'apiSecret':_0x25d5dd[_0x570deb(0x273)],'basecoin':_0x25d5dd[_0x570deb(0x24f)],'botname':_0x25d5dd[_0x570deb(0x205)],'showname':_0x25d5dd['showname'],'threshold':_0x25d5dd[_0x570deb(0x20c)],'ordertype':_0x25d5dd[_0x570deb(0x1dd)],'timeout':_0x25d5dd['timeout'],'startdate':_0x25d5dd['startdate'],'recreate':_0x25d5dd[_0x570deb(0x245)],'timeshift':_0x25d5dd['timeshift'],'headless':_0x25d5dd['headless'],'cooldown':_0x25d5dd[_0x570deb(0x1f8)],'emojibuy':_0x25d5dd[_0x570deb(0x288)],'emojisell':_0x25d5dd[_0x570deb(0x223)],'portfolio':_0x25d5dd['portfolio']},dbConfig[_0x570deb(0x2a3)](_0x570deb(0x211))[_0x570deb(0x1f4)]()[_0x570deb(0x1c0)](),dbConfig[_0x570deb(0x2a3)](_0x570deb(0x211))[_0x570deb(0x26f)](_0x25d5dd)['write']());}else _0x25d5dd={'botID':_0x22435b,'exchange':_0x570deb(0x227),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x22435b,'showname':![],'threshold':'3','ordertype':_0x570deb(0x270),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x25d5dd;}function emittedConfiguration(){const _0x4cfab7=_0x95ed48;let _0x48d176;return config[_0x4cfab7(0x206)]==''?_0x48d176=config:_0x48d176={...config,'apiKey':_0x4cfab7(0x200),'apiSecret':_0x4cfab7(0x200)},_0x48d176;}function getSettings(){const _0x32e2b0=_0x95ed48;return dbSettings[_0x32e2b0(0x2a3)](_0x32e2b0(0x1ac))['value']();}function getSecure(){const _0x5c90b9=_0x95ed48;return dbSecure[_0x5c90b9(0x2a3)](_0x5c90b9(0x1c9))['value']()||{};}function updateTimeshift(_0x4014e7){const _0x2b255c=_0x95ed48;let _0x527516=dbConfig[_0x2b255c(0x2a3)](_0x2b255c(0x211))['find']({'botID':botID})[_0x2b255c(0x1d9)]();_0x527516&&dbConfig[_0x2b255c(0x2a3)](_0x2b255c(0x211))[_0x2b255c(0x272)]({'botID':botID})[_0x2b255c(0x299)]({'timeshift':_0x4014e7})[_0x2b255c(0x1c0)](),config[_0x2b255c(0x240)]=_0x4014e7,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4f0c6d){const _0xad9f1=_0x95ed48;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x4279f1=dbConfig[_0xad9f1(0x2a3)](_0xad9f1(0x211))[_0xad9f1(0x272)]({'botID':botID})['value']();_0x4f0c6d={..._0x4f0c6d,'apiKey':crypt[_0xad9f1(0x280)](secure[_0xad9f1(0x22c)],_0x4f0c6d[_0xad9f1(0x206)])[_0xad9f1(0x22f)],'apiSecret':crypt[_0xad9f1(0x280)](secure[_0xad9f1(0x22c)],_0x4f0c6d['apiSecret'])[_0xad9f1(0x22f)]};if(_0x4279f1){if(_0x4f0c6d[_0xad9f1(0x206)]=='************')_0x4f0c6d[_0xad9f1(0x206)]=config[_0xad9f1(0x206)];if(_0x4f0c6d[_0xad9f1(0x273)]==_0xad9f1(0x200))_0x4f0c6d['apiSecret']=config[_0xad9f1(0x273)];dbConfig[_0xad9f1(0x2a3)]('bot')[_0xad9f1(0x272)]({'botID':botID})['assign'](_0x4f0c6d)[_0xad9f1(0x1c0)]();}else dbConfig[_0xad9f1(0x2a3)](_0xad9f1(0x211))[_0xad9f1(0x26f)](_0x4f0c6d)[_0xad9f1(0x1c0)](),process[_0xad9f1(0x232)]({'status':_0xad9f1(0x20d),'live':'running'});config={..._0x4f0c6d};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x4f0c6d[_0xad9f1(0x205)]}),proxyEmit(_0xad9f1(0x1e9)),reset();}async function storeHeadless(_0x1893cb){const _0x5ab832=_0x95ed48,_0xa325ec={...config,'headless':_0x1893cb['headless']};let _0xec27d9=dbConfig[_0x5ab832(0x2a3)]('bot')[_0x5ab832(0x272)]({'botID':botID})[_0x5ab832(0x1d9)]();_0xec27d9&&dbConfig[_0x5ab832(0x2a3)](_0x5ab832(0x211))['find']({'botID':botID})[_0x5ab832(0x299)](_0xa325ec)[_0x5ab832(0x1c0)](),config={..._0xa325ec},proxyEmit(_0x5ab832(0x1ba),emittedConfiguration());}function noslash(_0xfc8f90){const _0xf2e184=_0x95ed48;return _0xfc8f90[_0xf2e184(0x293)]('/','');}function updateNumberCoins(_0x5adf64){const _0x46a8d9=_0x95ed48;_0x5adf64[_0x46a8d9(0x1d1)]&&_0x5adf64[_0x46a8d9(0x1d1)]=='outboundAccountPosition'&&_0x5adf64['balances'][_0x46a8d9(0x1aa)](_0x1ac2c7=>{const _0x2d2ff0=_0x46a8d9;let _0x3948f8=currentCoins[_0x2d2ff0(0x272)](_0x4c2f7f=>_0x4c2f7f[_0x2d2ff0(0x2a8)]==_0x1ac2c7[_0x2d2ff0(0x1db)]),_0x5dcdfc=config['portfolio'][_0x2d2ff0(0x272)](_0x1d1ad9=>_0x1d1ad9[_0x2d2ff0(0x2a8)]==_0x1ac2c7[_0x2d2ff0(0x1db)]);if(_0x3948f8&&_0x5dcdfc)_0x3948f8[_0x2d2ff0(0x1ae)]=Math['max'](Number(_0x1ac2c7[_0x2d2ff0(0x19c)])+(_0x5dcdfc[_0x2d2ff0(0x25a)]||0x0),0x0);});if(_0x5adf64[_0x46a8d9(0x1d1)]&&_0x5adf64['eventType']==_0x46a8d9(0x1c1)){if(_0x5adf64[_0x46a8d9(0x257)]=='LIMIT'&&_0x5adf64['orderStatus']==_0x46a8d9(0x1e4)){if(lastOrders)lastOrders['forEach'](_0x539e4f=>{const _0x391542=_0x46a8d9;if(_0x539e4f[_0x391542(0x23c)]==_0x5adf64[_0x391542(0x23c)]){if(_0x539e4f['reverse'])_0x539e4f[_0x391542(0x29d)]=_0x5adf64[_0x391542(0x248)]*_0x539e4f[_0x391542(0x1a3)];else _0x539e4f['filled']=_0x5adf64['accumulatedQuantity'];}});}}}async function getCoins(_0x4f5630=!![],_0x515d71=config[_0x95ed48(0x24f)]){const _0x1707db=_0x95ed48;let _0x486501,_0x290632=[],_0xe40a09=[],_0xd1da92=[];try{_0x486501=await exchange[_0x1707db(0x1c2)](),mybalances=_0x486501[_0x1707db(0x1ca)];if(!_0x4f5630)for(const [_0x13d232,_0x426fc1]of Object[_0x1707db(0x204)](mybalances)){_0xd1da92[_0x1707db(0x26f)](_0x13d232);}else config['portfolio'][_0x1707db(0x1aa)](_0x22e302=>{const _0x31d660=_0x1707db;if(!_0x22e302[_0x31d660(0x295)])_0xd1da92['push'](_0x22e302[_0x31d660(0x2a8)]);});if(_0x515d71=='')for(const [_0x1002de,_0x24f638]of Object['entries'](mybalances)){_0x24f638[_0x1707db(0x22d)]()!=0x0&&_0xe40a09['push']({'coin':_0x1002de});}else for(const [_0x1924e4,_0x38d9aa]of Object['entries'](mybalances)){if(_0xd1da92[_0x1707db(0x1c4)](_0x1924e4)){const _0x8e217e=config[_0x1707db(0x1ee)][_0x1707db(0x272)](_0xcb7b3e=>_0xcb7b3e[_0x1707db(0x2a8)]==_0x1924e4);if((_0x38d9aa['toString']()!=0x0||_0x8e217e)&&(allSymbols['includes'](_0x1924e4+'/'+_0x515d71)||_0x1924e4==_0x515d71))_0xe40a09[_0x1707db(0x26f)]({'coin':_0x1924e4,'symbol':_0x1924e4+'/'+_0x515d71,'reverse':![],'number':Math[_0x1707db(0x1d4)](_0x38d9aa+(_0x8e217e&&_0x8e217e['offset']||0x0),0x0)}),_0x1924e4!=_0x515d71&&_0x290632['push'](_0x1924e4+'/'+_0x515d71);else(_0x38d9aa[_0x1707db(0x22d)]()!=0x0||_0x8e217e)&&allSymbols['includes'](_0x515d71+'/'+_0x1924e4)&&(_0xe40a09[_0x1707db(0x26f)]({'coin':_0x1924e4,'symbol':_0x515d71+'/'+_0x1924e4,'reverse':!![],'number':Math[_0x1707db(0x1d4)](_0x38d9aa+(_0x8e217e&&_0x8e217e[_0x1707db(0x25a)]||0x0),0x0)}),_0x1924e4!=_0x515d71&&_0x290632[_0x1707db(0x26f)](_0x515d71+'/'+_0x1924e4));}}}catch(_0x1aba7d){if(!_0x4f5630){if(_0x1aba7d['toString']()[_0x1707db(0x1c4)](_0x1707db(0x1fa)))return logHistory(_0x1707db(0x1e2),_0x1707db(0x1cc)),![];else{if(_0x1aba7d['toString']()[_0x1707db(0x1c4)](_0x1707db(0x1b6)))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x1aba7d[_0x1707db(0x22d)]()[_0x1707db(0x1c4)](_0x1707db(0x25e)))return logHistory(_0x1707db(0x1e2),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x1aba7d,_0x1707db(0x1b1));}}}else await handleError(_0x1aba7d,_0x1707db(0x1b1));}return _0xe40a09;}async function getPortfolio(_0x37e115){const _0x4f5dc0=_0x95ed48;let _0x554f26=[],_0x1f3d85=[],_0x23bb57,_0x15f449=[],_0x2d86f2,_0xd2d052;_0x37e115[_0x4f5dc0(0x206)]===_0x4f5dc0(0x200)||_0x37e115[_0x4f5dc0(0x273)]===_0x4f5dc0(0x200)?(_0x2d86f2=config[_0x4f5dc0(0x206)],_0xd2d052=config['apiSecret']):(_0x2d86f2=_0x37e115[_0x4f5dc0(0x206)],_0xd2d052=_0x37e115['apiSecret']);await initExchange(_0x2d86f2,_0xd2d052);let _0x3b088e=await loadSymbols();if(_0x3b088e){_0x15f449=await getCoins(![],_0x37e115[_0x4f5dc0(0x24f)]);if(_0x15f449===![])proxyEmit(_0x4f5dc0(0x1ee),![]);else{if(_0x37e115['basecoin']=='')proxyEmit(_0x4f5dc0(0x1ee),_0x15f449);else{_0x15f449[_0x4f5dc0(0x1aa)](_0x3a9fd1=>{const _0x35d73e=_0x4f5dc0;_0x554f26[_0x35d73e(0x26f)](_0x3a9fd1['symbol']);});try{_0x1f3d85=await exchange[_0x4f5dc0(0x29c)](_0x554f26);}catch(_0x19fab7){await handleError(_0x19fab7,_0x4f5dc0(0x20b));}_0x15f449[_0x4f5dc0(0x1aa)](_0x3540a4=>{const _0x3ef74e=_0x4f5dc0;_0x3540a4[_0x3ef74e(0x2a8)]!=_0x37e115[_0x3ef74e(0x24f)]?_0x23bb57=_0x3540a4[_0x3ef74e(0x1d0)]?0x1/_0x1f3d85[_0x3540a4[_0x3ef74e(0x258)]][_0x3ef74e(0x21c)]:_0x1f3d85[_0x3540a4[_0x3ef74e(0x258)]][_0x3ef74e(0x21c)]:_0x23bb57=0x1,_0x3540a4[_0x3ef74e(0x1a3)]=formatResult(_0x23bb57,0x8);}),proxyEmit('portfolio',_0x15f449);}}}else proxyEmit(_0x4f5dc0(0x1ee),![]);}function checkMinimums(_0x3bec3d){const _0x35c223=_0x95ed48;let _0x55376d=!![];const _0x10a66d=!_0x3bec3d['reverse']?markets[_0x3bec3d[_0x35c223(0x258)]][_0x35c223(0x1eb)][_0x35c223(0x241)][_0x35c223(0x254)]:markets[_0x3bec3d[_0x35c223(0x258)]][_0x35c223(0x1eb)][_0x35c223(0x260)][_0x35c223(0x254)],_0x30fa4f=!_0x3bec3d[_0x35c223(0x1d0)]?markets[_0x3bec3d[_0x35c223(0x258)]]['limits'][_0x35c223(0x260)]['min']:markets[_0x3bec3d[_0x35c223(0x258)]][_0x35c223(0x1eb)]['amount'][_0x35c223(0x254)];if(Math[_0x35c223(0x21d)](_0x3bec3d[_0x35c223(0x1bf)])<_0x10a66d)_0x55376d=![];if(Math['abs'](_0x3bec3d['trade'])*_0x3bec3d['last']<_0x30fa4f)_0x55376d=![];return _0x55376d;}async function getBalances(){const _0x44f870=_0x95ed48;let _0x334fdc=0x0,_0x38b0e0;const _0x206aa7=config[_0x44f870(0x20c)];currentCoins['forEach'](_0x4f5ef4=>{const _0x509895=_0x44f870;if(_0x4f5ef4[_0x509895(0x2a8)]!=config[_0x509895(0x24f)]){let _0x85f571=global[_0x509895(0x266)][noslash(_0x4f5ef4[_0x509895(0x258)])];_0x38b0e0=_0x4f5ef4[_0x509895(0x1d0)]?0x1/_0x85f571:_0x85f571;}else _0x38b0e0=0x1;let _0x4a8ae7=_0x4f5ef4['number']*_0x38b0e0;_0x334fdc+=_0x4a8ae7,_0x4f5ef4[_0x509895(0x21c)]=formatResult(Number(_0x38b0e0),0x8),_0x4f5ef4[_0x509895(0x1d9)]=_0x4a8ae7;}),currentCoins['forEach'](_0x29be6c=>{const _0x22d4a8=_0x44f870;let _0xfaafac=config[_0x22d4a8(0x1ee)][_0x22d4a8(0x272)](_0xb07cf9=>_0xb07cf9[_0x22d4a8(0x2a8)]==_0x29be6c[_0x22d4a8(0x2a8)]),_0x2c6bbd=Number(_0xfaafac[_0x22d4a8(0x26a)]),_0x5859f4=_0x29be6c[_0x22d4a8(0x1d9)]/_0x334fdc*0x64,_0x40bbf1=_0x2c6bbd*_0x334fdc/0x64/_0x29be6c[_0x22d4a8(0x21c)]-_0x29be6c[_0x22d4a8(0x1ae)];_0x29be6c[_0x22d4a8(0x26a)]=formatResult(_0x5859f4,0x3),_0x29be6c[_0x22d4a8(0x23e)]=formatResult(_0x2c6bbd,0x3),_0x29be6c[_0x22d4a8(0x1bf)]=formatResult(_0x40bbf1,0x8),_0x29be6c[_0x22d4a8(0x263)]='',_0x29be6c['valid']='';if(_0x29be6c[_0x22d4a8(0x2a8)]!=config['basecoin']){if(_0x29be6c[_0x22d4a8(0x26a)]>_0x2c6bbd)_0x29be6c[_0x22d4a8(0x263)]=_0x22d4a8(0x1fd),_0x29be6c[_0x22d4a8(0x1c3)]=checkMinimums(_0x29be6c);else _0x29be6c[_0x22d4a8(0x26a)]<_0x2c6bbd&&(_0x29be6c[_0x22d4a8(0x263)]='buy',_0x29be6c[_0x22d4a8(0x1c3)]=checkMinimums(_0x29be6c));}_0x29be6c['delta']=_0x29be6c[_0x22d4a8(0x26a)]/_0x29be6c[_0x22d4a8(0x23e)]-0x1;}),currentCoins['sort']((_0x28e1f5,_0x3c57f5)=>_0x28e1f5[_0x44f870(0x1f6)]<_0x3c57f5[_0x44f870(0x1f6)]?0x1:_0x3c57f5[_0x44f870(0x1f6)]<_0x28e1f5[_0x44f870(0x1f6)]?-0x1:0x0);const _0x28b320=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x28b320[_0x44f870(0x24d)],'usd':_0x28b320[_0x44f870(0x212)],'portfolio':JSON[_0x44f870(0x250)](currentCoins),'threshold':_0x206aa7},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x206aa7});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xa78736=_0x95ed48;if(!lastBalances)return;let _0xc9129f=await getStartingBalances(![]),_0x28252d=[],_0x184a7a;JSON[_0xa78736(0x27c)](lastBalances[_0xa78736(0x1ee)])[_0xa78736(0x1aa)](_0x4726e9=>{const _0xc1751b=_0xa78736;let _0xe0dc25={'coin':_0x4726e9[_0xc1751b(0x2a8)],'number':_0x4726e9[_0xc1751b(0x1ae)],'price':_0x4726e9[_0xc1751b(0x21c)]};_0x28252d[_0xc1751b(0x26f)](_0xe0dc25);});const _0x44870c=await getFiat();_0x184a7a={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x44870c[_0xa78736(0x24d)],'usd':_0x44870c[_0xa78736(0x212)],'coins':_0x28252d};let _0x2706c9=dbPerformance[_0xa78736(0x2a3)](_0xa78736(0x1c6))[_0xa78736(0x272)]({'date':_0x184a7a[_0xa78736(0x1da)]})['value']();_0x2706c9?dbPerformance[_0xa78736(0x2a3)](_0xa78736(0x1c6))['find']({'date':_0x184a7a[_0xa78736(0x1da)]})[_0xa78736(0x299)](_0x184a7a)['write']():dbPerformance[_0xa78736(0x2a3)](_0xa78736(0x1c6))[_0xa78736(0x26f)](_0x184a7a)[_0xa78736(0x1c0)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x54b1a4=_0x95ed48;if(dbPerformance[_0x54b1a4(0x22a)](_0x54b1a4(0x1c6))[_0x54b1a4(0x1d9)]()){let _0x2deddb=dbPerformance[_0x54b1a4(0x2a3)](_0x54b1a4(0x1c6))[_0x54b1a4(0x1dc)]('date')['value']();proxyEmit(_0x54b1a4(0x19f),_0x2deddb),lastPerformanceEmitted=getDate();}else proxyEmit(_0x54b1a4(0x19f),[]);}async function getStartingBalances(_0x2762e4=!![]){const _0x31dd15=_0x95ed48;let _0x514c7e=dbPerformance[_0x31dd15(0x2a3)]('data')['find']({'date':config[_0x31dd15(0x1a0)]})[_0x31dd15(0x1d9)]();config[_0x31dd15(0x206)]!=''&&!_0x514c7e&&(await setStartDatePerformance(config),_0x514c7e=dbPerformance['get'](_0x31dd15(0x1c6))[_0x31dd15(0x272)]({'date':config[_0x31dd15(0x1a0)]})[_0x31dd15(0x1d9)]());if(config[_0x31dd15(0x206)]==''||!_0x514c7e)return{};let _0x324ef8=0x0,_0x1aa887=0x0,_0x201cd8=0x0,_0xf4c623=[],_0x30594b=0x0;config[_0x31dd15(0x1ee)][_0x31dd15(0x1aa)](_0xc7f15=>{const _0x1fca9d=_0x31dd15;if(!_0xc7f15[_0x1fca9d(0x295)]){_0xf4c623[_0x30594b]={'coin':_0xc7f15[_0x1fca9d(0x2a8)],'symbol':_0xc7f15[_0x1fca9d(0x258)],'number':_0xc7f15[_0x1fca9d(0x1a9)],'price':_0xc7f15[_0x1fca9d(0x1f5)]},_0x324ef8+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15[_0x1fca9d(0x1a9)];if(config['basecoin']==_0x1fca9d(0x21a))_0x1aa887+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15[_0x1fca9d(0x1a9)]*_0x514c7e[_0x1fca9d(0x24d)],_0x201cd8+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15['startnumber']*_0x514c7e[_0x1fca9d(0x212)];else{if(config['basecoin']=='BUSD'||config[_0x1fca9d(0x24f)]==_0x1fca9d(0x234)||config[_0x1fca9d(0x24f)]=='USDC')_0x1aa887+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15[_0x1fca9d(0x1a9)]*_0x514c7e[_0x1fca9d(0x24d)]/_0x514c7e[_0x1fca9d(0x212)],_0x201cd8+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15[_0x1fca9d(0x1a9)];else config['basecoin']==_0x1fca9d(0x1ce)&&(_0x1aa887+=_0xc7f15[_0x1fca9d(0x1f5)]*_0xc7f15[_0x1fca9d(0x1a9)],_0x201cd8+=_0xc7f15['startprice']*_0xc7f15[_0x1fca9d(0x1a9)]*_0x514c7e[_0x1fca9d(0x212)]/_0x514c7e[_0x1fca9d(0x24d)]);}_0x30594b++;}});let _0x42f796={'basecoin':_0x324ef8,'eur':_0x1aa887,'usd':_0x201cd8,'coins':_0xf4c623};if(_0x2762e4)proxyEmit('starting-balances',_0x42f796);return _0x42f796;}function headlessMode(_0x301c9c){const _0x45043e=_0x95ed48;let _0x548066=_0x301c9c['portfolio'],_0x52798d=_0x301c9c['threshold'],_0x36b027=[];for(let _0x5c6112 of _0x548066){if(_0x5c6112[_0x45043e(0x2a8)]!=config[_0x45043e(0x24f)]){if(_0x5c6112['distribution']/_0x5c6112[_0x45043e(0x23e)]-0x1>=_0x52798d/0x64){if(_0x5c6112['valid'])_0x36b027[_0x45043e(0x26f)](_0x5c6112);}else{if(_0x5c6112['distribution']/_0x5c6112[_0x45043e(0x23e)]-0x1<=-_0x52798d/0x64){if(_0x5c6112['valid'])_0x36b027[_0x45043e(0x26f)](_0x5c6112);}}}}_0x36b027['length']>0x0&&placeOrder(_0x36b027);}function symbolToCoin(_0x1da9c5){const _0x1e5fa6=_0x95ed48;let _0x4d4416;if(_0x1da9c5[_0x1e5fa6(0x1c4)]('/'+config['basecoin']))_0x4d4416=_0x1da9c5[_0x1e5fa6(0x293)]('/'+config['basecoin'],'');if(_0x1da9c5[_0x1e5fa6(0x1c4)](config[_0x1e5fa6(0x24f)]+'/'))_0x4d4416=_0x1da9c5[_0x1e5fa6(0x293)](config['basecoin']+'/','');return _0x4d4416;}async function validateOrders(_0x129b13=0x0){const _0x1c00a3=_0x95ed48;let _0x2616f7=[],_0x2ecefe=config['ordertype']==_0x1c00a3(0x270)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1c00a3(0x242)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x1c00a3(0x1aa)](_0x8f7212=>{const _0x1d91fa=_0x1c00a3;let _0x173847=previousCoins[_0x1d91fa(0x272)](_0x5a14f3=>_0x5a14f3['coin']==symbolToCoin(_0x8f7212[_0x1d91fa(0x258)])),_0x4427a6=currentCoins[_0x1d91fa(0x272)](_0x4adceb=>_0x4adceb[_0x1d91fa(0x2a8)]==symbolToCoin(_0x8f7212['symbol'])),_0x3df633,_0x4e9648;_0x8f7212[_0x1d91fa(0x263)]==_0x1d91fa(0x1d5)&&!_0x8f7212[_0x1d91fa(0x1d0)]||_0x8f7212['side']=='sell'&&_0x8f7212[_0x1d91fa(0x1d0)]?(_0x3df633=_0x173847[_0x1d91fa(0x1ae)]+0.9*_0x8f7212['filled'],_0x4e9648=_0x173847['number']+1.1*_0x8f7212['filled']):(_0x3df633=_0x173847[_0x1d91fa(0x1ae)]-1.1*_0x8f7212[_0x1d91fa(0x29d)],_0x4e9648=_0x173847[_0x1d91fa(0x1ae)]-0.9*_0x8f7212[_0x1d91fa(0x29d)]);const _0x26e58b=_0x8f7212[_0x1d91fa(0x29d)]!=0x0&&_0x4427a6[_0x1d91fa(0x1ae)]>=_0x3df633&&_0x4427a6[_0x1d91fa(0x1ae)]<=_0x4e9648;_0x2616f7[_0x1d91fa(0x26f)](_0x26e58b);if(_0x26e58b&&config[_0x1d91fa(0x1dd)]!=_0x1d91fa(0x270)){if(_0x8f7212[_0x1d91fa(0x1d0)])logHistory(_0x1d91fa(0x26d),'Order\x20filled:\x20'+_0x8f7212[_0x1d91fa(0x258)]+'\x20'+_0x8f7212[_0x1d91fa(0x263)]+'\x20#'+formatResult(_0x8f7212[_0x1d91fa(0x29d)]/_0x8f7212['price'],0x8)+'\x20@'+formatResult(_0x8f7212[_0x1d91fa(0x1a3)],0x8));else logHistory(_0x1d91fa(0x26d),_0x1d91fa(0x28d)+_0x8f7212['symbol']+'\x20'+_0x8f7212[_0x1d91fa(0x263)]+'\x20#'+formatResult(_0x8f7212[_0x1d91fa(0x29d)],0x8)+'\x20@'+formatResult(_0x8f7212[_0x1d91fa(0x1a3)],0x8));}}),_0x2616f7['forEach']((_0xca99cf,_0x1bcab1)=>{const _0x355a62=_0x1c00a3;if(_0xca99cf)lastOrders[_0x355a62(0x25b)](_0x1bcab1,0x1);});if(_0x129b13<_0x2ecefe&&_0x2616f7[_0x1c00a3(0x1c4)](![])){if(_0x129b13==0x0){config[_0x1c00a3(0x1dd)]==_0x1c00a3(0x270)?logHistory(_0x1c00a3(0x1e2),_0x1c00a3(0x278)):logHistory(_0x1c00a3(0x1e2),_0x1c00a3(0x29f));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x129b13);},0xa*0x3e8);}else{(_0x129b13==0x1||_0x129b13==Math[_0x1c00a3(0x1e6)](_0x2ecefe/0x2)||_0x129b13==_0x2ecefe-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x129b13);},validateOrderInterval);}}else{lockOrders=![];if(_0x129b13>0x0&&!_0x2616f7[_0x1c00a3(0x1c4)](![]))config[_0x1c00a3(0x1dd)]==_0x1c00a3(0x270)?logHistory(_0x1c00a3(0x208),_0x1c00a3(0x27d)):logHistory(_0x1c00a3(0x208),_0x1c00a3(0x1d7));else _0x129b13>0x0&&_0x2616f7['includes'](![])&&(config[_0x1c00a3(0x1dd)]==_0x1c00a3(0x270)?logHistory(_0x1c00a3(0x208),_0x1c00a3(0x277)+Math[_0x1c00a3(0x1e6)](_0x2ecefe*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x1c00a3(0x1aa)](async _0x4e34da=>{const _0x30c16e=_0x1c00a3;try{const _0x918b83=await exchange[_0x30c16e(0x21f)](_0x4e34da[_0x30c16e(0x23c)],_0x4e34da['symbol']);}catch(_0x202c26){if(_0x202c26[_0x30c16e(0x22d)]()['includes']('OrderNotFound')){}else await handleError(_0x202c26,'cancelOrder()');}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x2ecefe*validateOrderInterval/0xea60)+_0x1c00a3(0x1fb))));}}async function resetCoinResults(){const _0x1d6705=_0x95ed48;dbCoinResults['get'](_0x1d6705(0x27a))['remove']()[_0x1d6705(0x1c0)]();let _0x420f01=await getStartingBalances(![]);_0x420f01[_0x1d6705(0x27a)]['forEach'](_0x2d039b=>{const _0x3e6bdf=_0x1d6705,_0x461fad=_0x2d039b[_0x3e6bdf(0x258)][_0x3e6bdf(0x1c4)](config['basecoin']+'/');if(_0x2d039b[_0x3e6bdf(0x2a8)]!=config['basecoin']){let _0x56ded1={'coin':_0x2d039b[_0x3e6bdf(0x2a8)],'number':_0x2d039b[_0x3e6bdf(0x1ae)],'breakeven':_0x2d039b[_0x3e6bdf(0x1a3)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3e6bdf(0x2a3)](_0x3e6bdf(0x27a))[_0x3e6bdf(0x26f)](_0x56ded1)[_0x3e6bdf(0x1c0)]();}});}async function updateCoinResults(_0x16bea2){const _0x39b9ae=_0x95ed48;let _0x2c202d,_0x2dc539,_0x6f720f,_0x48d5b5,_0x5907b2,_0x275ae9,_0x2cd0d2=dbCoinResults['get'](_0x39b9ae(0x27a))['find']({'coin':_0x16bea2[_0x39b9ae(0x2a8)]})['value']();if(!_0x2cd0d2)return;if(_0x16bea2[_0x39b9ae(0x256)]&&_0x16bea2['fee'][_0x39b9ae(0x297)]==config[_0x39b9ae(0x24f)])_0x2c202d=_0x16bea2['fee']['cost'];else{if(_0x16bea2[_0x39b9ae(0x256)]&&_0x16bea2[_0x39b9ae(0x256)][_0x39b9ae(0x297)]=='BNB')_0x2c202d=_0x16bea2['fee'][_0x39b9ae(0x260)]*global[_0x39b9ae(0x266)][_0x39b9ae(0x24e)+config[_0x39b9ae(0x24f)]];else _0x2c202d=0.001*_0x16bea2[_0x39b9ae(0x29d)];}const _0x58e46a=_0x16bea2['symbol'][_0x39b9ae(0x1c4)](config['basecoin']+'/');_0x58e46a&&(_0x275ae9={'coin':_0x16bea2[_0x39b9ae(0x2a8)],'symbol':_0x16bea2[_0x39b9ae(0x258)],'filled':_0x16bea2[_0x39b9ae(0x29d)]*_0x16bea2[_0x39b9ae(0x1a3)],'side':_0x16bea2['side']==_0x39b9ae(0x1fd)?_0x39b9ae(0x1d5):'sell','price':0x1/_0x16bea2['price']},_0x16bea2={..._0x275ae9});_0x16bea2[_0x39b9ae(0x263)]==_0x39b9ae(0x1d5)?_0x6f720f=(_0x2cd0d2[_0x39b9ae(0x228)]*_0x2cd0d2[_0x39b9ae(0x1ae)]+_0x16bea2[_0x39b9ae(0x1a3)]*_0x16bea2[_0x39b9ae(0x29d)])/(_0x2cd0d2[_0x39b9ae(0x1ae)]+_0x16bea2[_0x39b9ae(0x29d)]):_0x6f720f=(_0x2cd0d2[_0x39b9ae(0x228)]*_0x2cd0d2[_0x39b9ae(0x1ae)]-_0x16bea2['price']*_0x16bea2[_0x39b9ae(0x29d)])/(_0x2cd0d2[_0x39b9ae(0x1ae)]-_0x16bea2[_0x39b9ae(0x29d)]);_0x16bea2[_0x39b9ae(0x263)]=='buy'?_0x48d5b5=_0x2cd0d2[_0x39b9ae(0x28e)]:_0x48d5b5=_0x2cd0d2[_0x39b9ae(0x28e)]+(_0x16bea2[_0x39b9ae(0x1a3)]-_0x2cd0d2[_0x39b9ae(0x228)])*_0x16bea2[_0x39b9ae(0x29d)];_0x2dc539=_0x16bea2[_0x39b9ae(0x263)]==_0x39b9ae(0x1fd)?_0x2cd0d2['number']-_0x16bea2['filled']:_0x2cd0d2[_0x39b9ae(0x1ae)]+_0x16bea2[_0x39b9ae(0x29d)],_0x5907b2=(_0x16bea2[_0x39b9ae(0x1a3)]-_0x6f720f)*_0x2dc539;let _0xe631c8={'coin':_0x16bea2[_0x39b9ae(0x2a8)],'number':_0x2dc539,'breakeven':formatResult(_0x6f720f,0x8),'realized':formatResult(_0x48d5b5,0x8),'unrealized':formatResult(_0x5907b2,0x8),'fees':formatResult(_0x2cd0d2['fees']+_0x2c202d,0x8),'sells':_0x16bea2[_0x39b9ae(0x263)]=='sell'?_0x2cd0d2[_0x39b9ae(0x1ed)]+0x1:_0x2cd0d2['sells'],'buys':_0x16bea2['side']=='buy'?_0x2cd0d2[_0x39b9ae(0x1f9)]+0x1:_0x2cd0d2[_0x39b9ae(0x1f9)]};dbCoinResults[_0x39b9ae(0x2a3)](_0x39b9ae(0x27a))[_0x39b9ae(0x272)]({'coin':_0x16bea2[_0x39b9ae(0x2a8)]})['assign'](_0xe631c8)['write']();}async function placeOrder(_0x3796ce){const _0x15b382=_0x95ed48,_0x2bc51d=config[_0x15b382(0x1dd)]==_0x15b382(0x270)?_0x15b382(0x270):_0x15b382(0x213);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x15b382(0x27c)](JSON[_0x15b382(0x250)](currentCoins));for(const _0x1ec46e of _0x3796ce){let _0x57162b,_0x2ba3b4,_0x413ee3,_0x36e185,_0x5c7205,_0x2338ce=_0x1ec46e[_0x15b382(0x258)];try{const _0x44d818=await exchange['fetchTickers'](_0x2338ce),_0x53dbc1=_0x44d818[_0x2338ce];_0x57162b=_0x53dbc1[_0x15b382(0x21c)],_0x2ba3b4=_0x53dbc1[_0x15b382(0x28a)],_0x413ee3=_0x53dbc1['ask'];_0x1ec46e['reverse']?(_0x36e185=_0x1ec46e[_0x15b382(0x263)]==_0x15b382(0x1d5)?_0x15b382(0x1fd):_0x15b382(0x1d5),_0x5c7205=Math[_0x15b382(0x21d)](_0x1ec46e[_0x15b382(0x1bf)])/_0x57162b):(_0x36e185=_0x1ec46e[_0x15b382(0x263)],_0x5c7205=Math[_0x15b382(0x21d)](_0x1ec46e[_0x15b382(0x1bf)]));_0x2bc51d==_0x15b382(0x213)&&(config[_0x15b382(0x1dd)]==_0x15b382(0x1e1)&&(_0x57162b=_0x36e185==_0x15b382(0x1d5)?_0x2ba3b4:_0x413ee3),config[_0x15b382(0x1dd)]==_0x15b382(0x284)&&(_0x57162b=_0x36e185==_0x15b382(0x1d5)?_0x413ee3:_0x2ba3b4));_0x5c7205=formatResult(_0x5c7205,0x8),_0x57162b=formatResult(_0x57162b,0x8);const _0x4bd7ad=await exchange['createOrder'](_0x2338ce,_0x2bc51d,_0x36e185,_0x5c7205,_0x57162b);lastOrders[_0x15b382(0x26f)]({'orderId':_0x4bd7ad['id'],'symbol':_0x2338ce,'side':_0x36e185,'reverse':_0x1ec46e[_0x15b382(0x1d0)],'amount':_0x1ec46e[_0x15b382(0x1d0)]?_0x4bd7ad['amount']*_0x4bd7ad[_0x15b382(0x1a3)]:_0x4bd7ad[_0x15b382(0x241)],'filled':_0x1ec46e[_0x15b382(0x1d0)]?_0x4bd7ad[_0x15b382(0x29d)]*_0x4bd7ad['price']:_0x4bd7ad[_0x15b382(0x29d)],'price':_0x4bd7ad[_0x15b382(0x1a3)]});const _0xf4a667=_0x36e185==_0x15b382(0x1fd)?config[_0x15b382(0x223)]?String[_0x15b382(0x1d3)]('0x'+config[_0x15b382(0x223)])+'\x20':'':config['emojibuy']?String[_0x15b382(0x1d3)]('0x'+config[_0x15b382(0x288)])+'\x20':'',_0x3e9e25=_0x2bc51d==_0x15b382(0x270)?_0x15b382(0x1ef):config[_0x15b382(0x1dd)]==_0x15b382(0x1e1)?'Limit\x20(high-margin)':_0x15b382(0x2a1);if(_0x2bc51d==_0x15b382(0x270))logHistory(_0x15b382(0x26d),''+_0xf4a667+_0x3e9e25+_0x15b382(0x294)+_0x2338ce+'\x20'+_0x36e185+'\x20#'+formatResult(_0x4bd7ad['filled'],0x8)+'\x20@'+formatResult(_0x4bd7ad['price'],0x8));else logHistory(_0x15b382(0x26d),''+_0xf4a667+_0x3e9e25+_0x15b382(0x294)+_0x2338ce+'\x20'+_0x36e185+'\x20#'+formatResult(_0x4bd7ad['amount'],0x8)+'\x20@'+formatResult(_0x4bd7ad[_0x15b382(0x1a3)],0x8));_0x4bd7ad['coin']=_0x1ec46e[_0x15b382(0x2a8)],await updateCoinResults(_0x4bd7ad);if(config[_0x15b382(0x1f8)]!=0x0){let _0x5cba5f=null;if(cooldownTracker[_0x15b382(0x1e7)]==config['cooldown']-0x1)_0x5cba5f=cooldownTracker[_0x15b382(0x22b)]();const _0x580859=getTimeStamp();cooldownTracker[_0x15b382(0x26f)](_0x580859);if(_0x5cba5f){const _0x4d3b87=fns['differenceInSeconds'](new Date(_0x580859),new Date(_0x5cba5f));_0x4d3b87<cooldownInterval&&(logHistory(_0x15b382(0x1e2),_0x15b382(0x1f2)+config[_0x15b382(0x1f8)]+_0x15b382(0x1ea)+cooldownInterval/0x3c+_0x15b382(0x28f)+cooldownPeriod/(0xe10*0x3e8)+_0x15b382(0x221)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4880b8){if(_0x4880b8[_0x15b382(0x22d)]()[_0x15b382(0x1c4)]('MIN_NOTIONAL'))logHistory(_0x15b382(0x1e2),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2338ce);else{if(_0x4880b8[_0x15b382(0x22d)]()['includes'](_0x15b382(0x26e)))logHistory(_0x15b382(0x1e2),_0x15b382(0x209)+_0x2338ce);else await handleError(_0x4880b8,_0x15b382(0x276));}}}if(lastOrders[_0x15b382(0x1e7)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config['ordertype']==_0x15b382(0x270)?logHistory(_0x15b382(0x1e2),_0x15b382(0x25c)):logHistory(_0x15b382(0x1e2),_0x15b382(0x290)));else coolingDown&&(!config[_0x15b382(0x252)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x1543f9,_0x1ee5d2,_0xb24e5e=''){const _0xfee63c=_0x95ed48;let _0x4d3fa9={'time':getTimeStamp(),'type':_0x1543f9,'event':_0x1ee5d2,'botname':config[_0xfee63c(0x205)],'showname':config[_0xfee63c(0x28c)]};dbLogs['get'](_0xfee63c(0x1a2))[_0xfee63c(0x26f)](_0x4d3fa9)[_0xfee63c(0x1c0)]();if(_0xb24e5e=='')_0xb24e5e=_0x1ee5d2;proxyEmit(_0xfee63c(0x243),{'log':_0x4d3fa9,'summary':_0xb24e5e}),process['send']({'telegram':_0x4d3fa9}),logging(''+_0x4d3fa9[_0xfee63c(0x243)]);}function emitHistory(_0x403054={}){const _0x573337=_0x95ed48;Object[_0x573337(0x215)](_0x403054)[_0x573337(0x1e7)]==0x0&&(_0x403054={'type':[_0x573337(0x26d),_0x573337(0x243)],'event':'','page':0x1});if(_0x403054[_0x573337(0x262)]['includes'](_0x573337(0x243)))_0x403054[_0x573337(0x262)]['splice'](_0x403054[_0x573337(0x262)][_0x573337(0x27e)](_0x573337(0x243)),0x1,'error',_0x573337(0x208));if(dbLogs['has']('logs')[_0x573337(0x1d9)]()){let _0x2a6da0=dbLogs[_0x573337(0x2a3)](_0x573337(0x1a2))['filter'](_0x18e8e8=>{const _0x3ad3d3=_0x573337;if(_0x403054['type'][_0x3ad3d3(0x1e7)]==0x0)return![];else return _0x403054[_0x3ad3d3(0x262)][_0x3ad3d3(0x1c4)](_0x18e8e8[_0x3ad3d3(0x262)]);})[_0x573337(0x2a0)](_0x40ac15=>{const _0x130017=_0x573337;if(_0x403054[_0x130017(0x243)]=='')return!![];else return _0x40ac15[_0x130017(0x243)][_0x130017(0x1ab)]()[_0x130017(0x1c4)](_0x403054[_0x130017(0x243)][_0x130017(0x1ab)]());})[_0x573337(0x1dc)](_0x573337(0x1fc)),_0x4026d4=_0x2a6da0[_0x573337(0x1d9)]()['length'];_0x2a6da0=_0x2a6da0['reverse']()[_0x573337(0x226)]((_0x403054[_0x573337(0x1c7)]-0x1)*logPageSize,_0x403054[_0x573337(0x1c7)]*logPageSize-0x1)[_0x573337(0x1d0)]()[_0x573337(0x1d9)](),proxyEmit(_0x573337(0x1a5),{'logs':_0x2a6da0,'total':_0x4026d4});}else proxyEmit(_0x573337(0x1a5),{'logs':[],'total':0x0});}async function pauseBot(_0x5b6f61){const _0xc6997d=_0x95ed48,_0x45a3f4=new Date()[_0xc6997d(0x255)]();if(!lastBotPause)lastBotPause=new Date()[_0xc6997d(0x255)](),consecutivePauses=0x1;else{if(_0x45a3f4-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0xc6997d(0x232)]({'stop':_0xc6997d(0x1f7)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0xc6997d(0x255)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0xc6997d(0x1e2),_0xc6997d(0x279)+consecutivePauses+')'),await sleep(_0x5b6f61),botPaused=![],reset();}}async function handleError(_0x36c0c0,_0x423df7,_0x25a4ed=''){const _0x3781a8=_0x95ed48;if(_0x36c0c0[_0x3781a8(0x22d)]()['includes'](_0x3781a8(0x289)))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x269)),await pauseBot(pauseBotInterval);else{if(_0x36c0c0['toString']()['includes'](_0x3781a8(0x214)))logHistory('error',_0x423df7+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x36c0c0[_0x3781a8(0x22d)]()[_0x3781a8(0x1c4)](_0x3781a8(0x230)))logHistory('error',_0x423df7+_0x3781a8(0x23b)),await pauseBot(pauseBotInterval);else{if(_0x36c0c0[_0x3781a8(0x22d)]()[_0x3781a8(0x1c4)](_0x3781a8(0x1fa)))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x244)),logHistory(_0x3781a8(0x1e2),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x3781a8(0x1e5)});else{if(_0x36c0c0[_0x3781a8(0x22d)]()[_0x3781a8(0x1c4)]('AuthenticationError'))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x1af)),logHistory('error',_0x3781a8(0x219)),process[_0x3781a8(0x232)]({'stop':_0x3781a8(0x1e5)});else{if(_0x36c0c0[_0x3781a8(0x22d)]()[_0x3781a8(0x1c4)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x291)),logHistory(_0x3781a8(0x1e2),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3781a8(0x232)]({'stop':_0x3781a8(0x1e5)});else{if(_0x36c0c0['toString']()[_0x3781a8(0x1c4)](_0x3781a8(0x238)))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x217)),logHistory(_0x3781a8(0x1e2),_0x3781a8(0x219)),process['send']({'stop':_0x3781a8(0x1e5)});else{if(_0x36c0c0['toString']()[_0x3781a8(0x1c4)]('InvalidNonce'))logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x222)),await pauseBot(pauseBotInterval),process[_0x3781a8(0x232)]({'stop':_0x3781a8(0x1f7)});else _0x36c0c0[_0x3781a8(0x22d)]()[_0x3781a8(0x1c4)](_0x3781a8(0x210))?logHistory('error',_0x423df7+_0x3781a8(0x1cd)):(logHistory(_0x3781a8(0x1e2),_0x423df7+_0x3781a8(0x1a1)),logging(_0x423df7+_0x3781a8(0x1cf),_0x36c0c0),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3785e4,_0x1596c3){const _0x63412d=_0x95ed48;return parseFloat(_0x3785e4[_0x63412d(0x292)](_0x1596c3));}function logging(_0x46519c,_0x1460e3=''){const _0x2506a3=_0x95ed48;if(config[_0x2506a3(0x28c)])console[_0x2506a3(0x296)](getTimeStamp()+':\x20'+config[_0x2506a3(0x205)]+'\x20>\x20'+_0x46519c,_0x1460e3);else console[_0x2506a3(0x296)](getTimeStamp()+_0x2506a3(0x27f)+botID+_0x2506a3(0x281)+_0x46519c,_0x1460e3);}function getServerTime(){const _0x349618=_0x95ed48,_0x4ffff6=new Date();return _0x4ffff6['getFullYear']()+'/'+(_0x4ffff6[_0x349618(0x2a7)]()+0x1)[_0x349618(0x22d)]()['padStart'](0x2,'0')+'/'+_0x4ffff6['getDate']()[_0x349618(0x22d)]()['padStart'](0x2,'0')+'\x20'+_0x4ffff6[_0x349618(0x1bb)]()[_0x349618(0x22d)]()[_0x349618(0x1b5)](0x2,'0')+':'+_0x4ffff6[_0x349618(0x237)]()['toString']()['padStart'](0x2,'0')+':'+_0x4ffff6[_0x349618(0x24b)]()[_0x349618(0x22d)]()[_0x349618(0x1b5)](0x2,'0');}function getTimeStamp(){const _0x36798a=_0x95ed48,_0x42e5b9=shiftedTime();return _0x42e5b9['getFullYear']()+'/'+(_0x42e5b9[_0x36798a(0x2a7)]()+0x1)[_0x36798a(0x22d)]()[_0x36798a(0x1b5)](0x2,'0')+'/'+_0x42e5b9[_0x36798a(0x1c8)]()[_0x36798a(0x22d)]()['padStart'](0x2,'0')+'\x20'+_0x42e5b9['getHours']()[_0x36798a(0x22d)]()[_0x36798a(0x1b5)](0x2,'0')+':'+_0x42e5b9[_0x36798a(0x237)]()[_0x36798a(0x22d)]()[_0x36798a(0x1b5)](0x2,'0')+':'+_0x42e5b9[_0x36798a(0x24b)]()[_0x36798a(0x22d)]()[_0x36798a(0x1b5)](0x2,'0');}function getDate(){const _0x4e8358=_0x95ed48,_0x1ae33a=shiftedTime();return _0x1ae33a[_0x4e8358(0x246)]()+'/'+(_0x1ae33a[_0x4e8358(0x2a7)]()+0x1)[_0x4e8358(0x22d)]()[_0x4e8358(0x1b5)](0x2,'0')+'/'+_0x1ae33a[_0x4e8358(0x1c8)]()[_0x4e8358(0x22d)]()[_0x4e8358(0x1b5)](0x2,'0');}function getHour(){const _0x4e872d=_0x95ed48,_0x137056=shiftedTime();return _0x137056[_0x4e872d(0x1bb)]()[_0x4e872d(0x22d)]()[_0x4e872d(0x1b5)](0x2,'0');}function sleep(_0x778db9){return new Promise(_0x5e0f8c=>setTimeout(_0x5e0f8c,_0x778db9));}function shiftedTime(){const _0x294258=_0x95ed48,_0x4aa8f6=new Date();let _0x4ab32d=_0x4aa8f6;if(config&&config[_0x294258(0x240)]!==0x0)_0x4ab32d=fns[_0x294258(0x1ec)](_0x4aa8f6,{'hours':config[_0x294258(0x240)]});return _0x4ab32d;}