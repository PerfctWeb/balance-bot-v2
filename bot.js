const _0x20a1c6=_0x5336;(function(_0x44c393,_0x1b98a2){const _0x168b01=_0x5336,_0x37cb27=_0x44c393();while(!![]){try{const _0x58a8d1=-parseInt(_0x168b01(0xb6))/0x1+parseInt(_0x168b01(0xfd))/0x2+-parseInt(_0x168b01(0xff))/0x3*(parseInt(_0x168b01(0x1a3))/0x4)+parseInt(_0x168b01(0xe3))/0x5*(parseInt(_0x168b01(0x144))/0x6)+-parseInt(_0x168b01(0x17c))/0x7*(-parseInt(_0x168b01(0xc4))/0x8)+-parseInt(_0x168b01(0x12c))/0x9*(parseInt(_0x168b01(0x17e))/0xa)+-parseInt(_0x168b01(0x136))/0xb*(-parseInt(_0x168b01(0xec))/0xc);if(_0x58a8d1===_0x1b98a2)break;else _0x37cb27['push'](_0x37cb27['shift']());}catch(_0x4e4e9f){_0x37cb27['push'](_0x37cb27['shift']());}}}(_0x3ee0,0xdac5c));const _0x15d20f=function(){let _0x569c27=!![];return function(_0x4535a8,_0x5dfbe6){const _0x393a33=_0x569c27?function(){if(_0x5dfbe6){const _0x2d60d7=_0x5dfbe6['apply'](_0x4535a8,arguments);return _0x5dfbe6=null,_0x2d60d7;}}:function(){};return _0x569c27=![],_0x393a33;};}(),_0x50196b=_0x15d20f(this,function(){const _0x5eb2a1=_0x5336;return _0x50196b['toString']()[_0x5eb2a1(0xab)](_0x5eb2a1(0x116))[_0x5eb2a1(0x12f)]()[_0x5eb2a1(0x10f)](_0x50196b)['search'](_0x5eb2a1(0x116));});_0x50196b();'use strict';const ccxt=require('ccxt'),low=require(_0x20a1c6(0xdb)),FileSync=require(_0x20a1c6(0x184)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x20a1c6(0x108)),Crypt=require(_0x20a1c6(0x171))[_0x20a1c6(0x13a)];let exchange,wsClient;global[_0x20a1c6(0x1cc)]={},global[_0x20a1c6(0x11c)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x20a1c6(0x179),_0x20a1c6(0x162),_0x20a1c6(0x177),_0x20a1c6(0xca),_0x20a1c6(0x18b),_0x20a1c6(0xfa)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x20a1c6(0xd4))[_0x20a1c6(0x148)],botID=process[_0x20a1c6(0xcf)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x20a1c6(0xb2)](_0x20a1c6(0x187)+botID+_0x20a1c6(0x1c6)),process[_0x20a1c6(0x1bf)](0x1));const userID=process[_0x20a1c6(0xcf)][0x3]||'',configpath=userID?_0x20a1c6(0x182)+userID+'/':_0x20a1c6(0x182);!fs[_0x20a1c6(0xc5)](configpath)&&fs[_0x20a1c6(0xae)](configpath);const configfile=configpath+'bot-'+botID+_0x20a1c6(0xd9),logfile=configpath+_0x20a1c6(0x120)+botID+_0x20a1c6(0xc0),performancefile=configpath+_0x20a1c6(0x120)+botID+_0x20a1c6(0xf2),coinresultsfile=configpath+_0x20a1c6(0x120)+botID+_0x20a1c6(0x181),settingsfile=configpath+_0x20a1c6(0x139),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x20a1c6(0x174)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x20a1c6(0x174)]({'bot':[]})[_0x20a1c6(0x193)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x20a1c6(0x174)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x56f9b3)=>{},'debug':(..._0x554383)=>{},'notice':(..._0x2d2111)=>{},'info':(..._0x5f5263)=>{},'warning':(..._0x3d4c80)=>{},'error':async function(..._0x5e8923){const _0x1a88c5=_0x20a1c6,_0x15d314=new Date()['getTime']();if(!lastErrorShown||_0x15d314-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1a88c5(0x9d)]();let _0x57aa28='';if(_0x5e8923[0x0])_0x57aa28+=_0x5e8923[0x0];if(_0x5e8923[0x1]&&_0x5e8923[0x1][_0x1a88c5(0x10d)]&&_0x5e8923[0x1][_0x1a88c5(0x10d)][_0x1a88c5(0xad)])_0x57aa28+=_0x1a88c5(0xbc)+_0x5e8923[0x1][_0x1a88c5(0x10d)][_0x1a88c5(0xad)];logging(_0x1a88c5(0x133)+consecutivePauses+_0x1a88c5(0x134),''+_0x57aa28),await pauseBot(_0x1a88c5(0x18d));}}},crypt=new Crypt({'md':_0x20a1c6(0x1ce),'rsaStandard':_0x20a1c6(0x16e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x20a1c6(0x191)]!=config['timeshift']&&updateTimeshift(settings[_0x20a1c6(0x191)]);process[_0x20a1c6(0x16a)]({'started':_0x20a1c6(0x169)},_0x3cf247=>{}),initializeProcessListeners();function proxyEmit(_0x5ed9e0,_0x103680=null){const _0x391733=_0x20a1c6;process[_0x391733(0x16a)]({'function':_0x5ed9e0,'args':_0x103680},_0x294685=>{});}function initializeProcessListeners(){const _0x33a1c4=_0x20a1c6;process['on'](_0x33a1c4(0xad),_0x157288=>{const _0xde6288=_0x33a1c4;switch(Object['keys'](_0x157288)[0x0]){case _0xde6288(0x191):_0x157288[_0xde6288(0x191)]!=undefined&&(settings[_0xde6288(0x191)]=_0x157288['timeshift'],updateTimeshift(settings[_0xde6288(0x191)]));break;case _0xde6288(0x11e):switch(_0x157288[_0xde6288(0x11e)]){case _0xde6288(0xda):initclient();break;case _0xde6288(0xa3):toggleBotMode();break;case _0xde6288(0x123):emitHistory(_0x157288['args']);break;case _0xde6288(0xbd):deleteHistoryAlerts(_0x157288['args']);break;case _0xde6288(0x119):getPortfolio(_0x157288[_0xde6288(0x1cd)]);break;case'storeConfiguration':storeConfiguration(_0x157288[_0xde6288(0x1cd)]);break;case _0xde6288(0x1c8):storeHeadless(_0x157288[_0xde6288(0x1cd)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x157288['args']);break;case _0xde6288(0x138):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x51051f=_0x20a1c6;if(pidBalances)clearTimeout(pidBalances);if(config[_0x51051f(0x10b)]!=''){await initExchange(config['apiKey'],config[_0x51051f(0xaa)]);let _0x3b8a10=await loadSymbols();if(_0x3b8a10){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x5382c2,_0xe5826a){const _0x2e5fd2=_0x20a1c6,_0x1e17a0=ccxt[config[_0x2e5fd2(0x9f)]];let _0x5583ff;switch(config[_0x2e5fd2(0x9f)]){case _0x2e5fd2(0x108):_0x5583ff=_0x2e5fd2(0x1c5);break;case _0x2e5fd2(0x1b8):_0x5583ff=_0x2e5fd2(0xf5);break;default:_0x5583ff=_0x2e5fd2(0x1c5);}exchange=new _0x1e17a0({'apiKey':_0x5382c2,'secret':_0xe5826a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5382c2,'api_secret':_0xe5826a,'beautify':!![],'wsUrl':_0x5583ff},logger);!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x2e5fd2(0x157),_0x56f09a=>{const _0x5bcd38=_0x2e5fd2;if(isWsFormattedKline(_0x56f09a)){global[_0x5bcd38(0x1cc)][_0x56f09a[_0x5bcd38(0x14e)][_0x5bcd38(0x111)]]=_0x56f09a['kline'][_0x5bcd38(0x190)];return;}else{if(isWsFormatted24hrTicker(_0x56f09a)){global[_0x5bcd38(0x11c)][_0x56f09a[_0x5bcd38(0x111)]]=_0x56f09a[_0x5bcd38(0x14c)];return;}else{if(!Array[_0x5bcd38(0x167)](_0x56f09a)&&_0x56f09a[_0x5bcd38(0x1c4)][_0x5bcd38(0x109)]('userData')){if(_0x56f09a['wsMarket']['includes'](_0x5bcd38(0xaf))){updateNumberCoins(_0x56f09a);return;}}}}}),wsClient['on']('reconnected',async _0x3655d6=>{if(!botPaused)currentCoins=await getCoins(!![]);}));let _0x247465=config[_0x2e5fd2(0x9f)]==_0x2e5fd2(0x1b8)?_0x2e5fd2(0x130):'EUR',_0x2faf24=config[_0x2e5fd2(0x14b)]==_0x2e5fd2(0xe0)?_0x2e5fd2(0xe0):'BTC';stablecoins={'eur':{'coin':''+_0x2faf24+_0x247465,'symbol':_0x2faf24+'/'+_0x247465},'usd':{'coin':_0x2faf24+_0x2e5fd2(0x130),'symbol':_0x2faf24+_0x2e5fd2(0x131)}};}async function loadSymbols(){const _0x383da3=_0x20a1c6;let _0x317010;try{markets=await exchange[_0x383da3(0x1b3)](),allSymbols=exchange[_0x383da3(0x147)][_0x383da3(0xcc)](_0x320abc=>{const _0x4a869d=_0x383da3;let _0x28950f=![];return exceptions[_0x4a869d(0xa9)](_0x1daee4=>{if(_0x320abc['includes'](_0x1daee4))_0x28950f=!![];}),!_0x28950f;}),_0x317010=!![];}catch(_0xa9d88f){await handleError(_0xa9d88f,_0x383da3(0x1af)),_0x317010=![];}return _0x317010;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x55a4d7=getNormalizedPerformance();emitPerformance(_0x55a4d7),await getStartingBalances(_0x55a4d7);}async function toggleBotMode(){const _0x5e35a5=_0x20a1c6;let _0x3eb401=dbConfig[_0x5e35a5(0xe4)](_0x5e35a5(0x1a9))[_0x5e35a5(0x106)]({'botID':botID})[_0x5e35a5(0x100)]();if(_0x3eb401){const _0x3a6134=!_0x3eb401['headless'];dbConfig['get']('bot')[_0x5e35a5(0x106)]({'botID':botID})[_0x5e35a5(0x18c)]({'headless':_0x3a6134})['write'](),config[_0x5e35a5(0xa4)]=_0x3a6134,proxyEmit(_0x5e35a5(0x141),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x11fc36=_0x20a1c6;process[_0x11fc36(0x16a)]({'updatebotmanager':!![]},_0x202124=>{});}function cleanws(){const _0x555b34=_0x20a1c6;wsinitialized=![];ws1&&(ws1[_0x555b34(0xa9)](_0x43aa9e=>{const _0x2c3e63=_0x555b34;try{wsClient[_0x2c3e63(0x190)](_0x43aa9e);}catch(_0x2a404e){}}),ws1=[]);if(ws2){try{wsClient['close'](ws2);}catch(_0x14d8ab){}ws2=null;}ws3&&(ws3[_0x555b34(0xa9)](_0x3d6a25=>{const _0x41a4b0=_0x555b34;try{wsClient[_0x41a4b0(0x190)](_0x3d6a25);}catch(_0x26ef80){}}),ws3=[]);}async function initws(){const _0x3ea969=_0x20a1c6;cleanws();let _0x59736f=[];currentCoins['forEach'](_0x3552ec=>{const _0x1cbe61=_0x5336;if(_0x3552ec[_0x1cbe61(0x14a)]!=config[_0x1cbe61(0x14b)])_0x59736f[_0x1cbe61(0xd5)](_0x3552ec[_0x1cbe61(0x111)]);});if(!_0x59736f[_0x3ea969(0x109)](stablecoins[_0x3ea969(0xe7)][_0x3ea969(0x111)]))_0x59736f[_0x3ea969(0xd5)](stablecoins[_0x3ea969(0xe7)][_0x3ea969(0x111)]);if(!_0x59736f[_0x3ea969(0x109)](stablecoins[_0x3ea969(0x10a)][_0x3ea969(0x111)]))_0x59736f[_0x3ea969(0xd5)](stablecoins[_0x3ea969(0x10a)][_0x3ea969(0x111)]);if(!_0x59736f[_0x3ea969(0x109)](_0x3ea969(0x19a)+config[_0x3ea969(0x14b)]))_0x59736f['push']('BNB/'+config[_0x3ea969(0x14b)]);try{_0x59736f[_0x3ea969(0xa9)]((_0x2c6691,_0x169551)=>{const _0x356fd6=_0x3ea969;ws1[_0x169551]=wsClient[_0x356fd6(0x1a5)](noslash(_0x2c6691),'1m'),ws3[_0x169551]=wsClient[_0x356fd6(0x12b)](noslash(_0x2c6691),_0x356fd6(0xaf));}),ws2=wsClient[_0x3ea969(0x132)]();}catch(_0x14ef61){await handleError(_0x14ef61,_0x3ea969(0x199));}let _0x37d067,_0x172e27=0x0;loading[_0x3ea969(0x13b)]=[];let _0x48893e=0x0;_0x59736f['forEach'](_0x42690e=>{const _0x4282a6=_0x3ea969;loading[_0x4282a6(0x13b)]['push'](_0x42690e);}),loadingCanceled=![];let _0x1c6d78=![];while(_0x37d067!=_0x59736f[_0x3ea969(0x198)]){_0x37d067=0x0,_0x59736f[_0x3ea969(0xa9)](_0x2c7d60=>{const _0x380297=_0x3ea969;global[_0x380297(0x1cc)][noslash(_0x2c7d60)]&&(loading[_0x380297(0x13b)]=loading[_0x380297(0x13b)][_0x380297(0xcc)](_0x31d162=>_0x31d162!=_0x2c7d60),_0x37d067++);}),loading[_0x3ea969(0x178)]=Math['round'](_0x37d067/_0x59736f[_0x3ea969(0x198)]*0x64);loading[_0x3ea969(0x178)]!=0x64&&(_0x48893e>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x48893e>0x3c*0x5&&!_0x1c6d78&&(_0x1c6d78=!![],logHistory(_0x3ea969(0x10d),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x3ea969(0x13b)]+_0x3ea969(0x16d))));if(loadingCanceled){loading[_0x3ea969(0x175)]=!![],emitLoadingProgress();break;}else _0x37d067!=_0x172e27&&(_0x172e27=_0x37d067,emitLoadingProgress()),_0x48893e++,await sleep(0xc8);}_0x1c6d78&&logHistory(_0x3ea969(0x17f),_0x3ea969(0xf4));if(_0x37d067==_0x59736f[_0x3ea969(0x198)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x4ed5c0=_0x20a1c6;proxyEmit(_0x4ed5c0(0xba),loading);}async function getFiat(){const _0x50e1d1=_0x20a1c6;let _0x4c40b5=0x0,_0x4db4a6=0x0;try{_0x4c40b5=global[_0x50e1d1(0x1cc)][stablecoins['eur']['coin']],_0x4db4a6=global['ticker'][stablecoins[_0x50e1d1(0x10a)][_0x50e1d1(0x14a)]];}catch(_0x4192e){await handleError(_0x4192e,'getFiat()');}return{'eur':Number(_0x4c40b5),'usd':Number(_0x4db4a6)};}function setStartDatePerformance(){const _0x841843=_0x20a1c6;if(config&&config['liquidity'][0x0][_0x841843(0x17b)][_0x841843(0x198)]!=0x0){const _0x5084b3=config[_0x841843(0x1ae)][0x0][_0x841843(0x17b)];dbPerformance[_0x841843(0xe4)](_0x841843(0x152))[_0x841843(0x106)]({'date':config[_0x841843(0x160)]})['assign']({'coins':_0x5084b3})[_0x841843(0x193)]();}}async function recreateCoinResults(){const _0x5d6c13=_0x20a1c6;let _0x2ee6e7,_0x1c82b6=[];try{const _0x1fd8a8=fns['format'](fns[_0x5d6c13(0x14d)](config[_0x5d6c13(0x160)]['replace'](/\//g,'-')),_0x5d6c13(0xa0));for(const _0x160e03 of currentCoins){if(_0x160e03['coin']!=config[_0x5d6c13(0x14b)]){let _0x578e76=0x0,_0xc361a7,_0x48516c;_0x2ee6e7=await getAllEventOrders(_0x160e03[_0x5d6c13(0x111)]);if(_0x2ee6e7[_0x5d6c13(0x198)]>0x0)_0x2ee6e7['forEach'](_0x3b42e9=>{const _0x2992d8=_0x5d6c13,_0x224366=_0x160e03[_0x2992d8(0x111)][_0x2992d8(0x109)](config['basecoin']+'/');_0x1c82b6[_0x2992d8(0xd5)]({'datetime':_0x3b42e9[_0x2992d8(0xb0)],'coin':_0x160e03[_0x2992d8(0x14a)],'symbol':_0x160e03[_0x2992d8(0x111)],'side':_0x3b42e9[_0x2992d8(0xc6)],'reverse':_0x224366,'amount':formatResult(_0x3b42e9[_0x2992d8(0xb9)],0x8),'filled':formatResult(_0x3b42e9['filled'],0x8),'price':formatResult(_0x3b42e9[_0x2992d8(0x17a)],0x8)}),_0x578e76=_0x3b42e9[_0x2992d8(0xc6)]==_0x2992d8(0xf3)?_0x578e76+_0x3b42e9['filled']:_0x578e76-_0x3b42e9[_0x2992d8(0xb9)];if(!_0x48516c)_0x48516c=_0x3b42e9[_0x2992d8(0x17a)];});_0xc361a7=_0x160e03[_0x5d6c13(0xc7)]-_0x578e76;let _0x586cbc;config[_0x5d6c13(0x1ae)][_0x5d6c13(0xa9)](_0x362dc9=>{const _0x4d2f21=_0x5d6c13;!_0x586cbc&&(_0x586cbc=_0x362dc9[_0x4d2f21(0x17b)][_0x4d2f21(0x106)](_0x4df597=>_0x4df597[_0x4d2f21(0x14a)]==_0x160e03['coin']),_0x586cbc&&(_0xc361a7=_0x586cbc['number'],_0x48516c=_0x586cbc[_0x4d2f21(0x17a)]));});let _0x2e1d4d=dbCoinResults[_0x5d6c13(0xe4)]('coins')[_0x5d6c13(0x106)]({'coin':_0x160e03[_0x5d6c13(0x14a)]})[_0x5d6c13(0x100)]();_0x2e1d4d={'coin':_0x160e03[_0x5d6c13(0x14a)],'number':_0xc361a7,'breakeven':_0x48516c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5d6c13(0xe4)](_0x5d6c13(0x180))['find']({'coin':_0x160e03[_0x5d6c13(0x14a)]})[_0x5d6c13(0x18c)](_0x2e1d4d)[_0x5d6c13(0x193)]();}}_0x1c82b6[_0x5d6c13(0x1a4)]((_0x3d334a,_0x208f34)=>_0x3d334a[_0x5d6c13(0xb0)]>_0x208f34[_0x5d6c13(0xb0)]?0x1:_0x208f34[_0x5d6c13(0xb0)]>_0x3d334a[_0x5d6c13(0xb0)]?-0x1:0x0);let _0x2259da=0x0;for(let _0x3e27b7 of _0x1c82b6){await updateCoinResults(_0x3e27b7,!![]);}}catch(_0x95ff67){await handleError(_0x95ff67,_0x5d6c13(0xed));}}async function getAllEventOrders(_0x16a5ff){const _0x3c31bb=_0x20a1c6;let _0x1a7d1a=[],_0x5f4224=dbLogs['get'](_0x3c31bb(0xb5))['filter'](_0x52a1b5=>{const _0x306152=_0x3c31bb,_0x55714f=_0x52a1b5['event'][_0x306152(0x185)]();return _0x55714f['includes'](_0x16a5ff[_0x306152(0x185)]())&&(_0x55714f[_0x306152(0x109)](_0x306152(0xd3))&&_0x55714f['includes'](_0x306152(0x19f))||_0x55714f[_0x306152(0x109)]('filled')&&_0x55714f['includes'](_0x306152(0x19f)));})[_0x3c31bb(0xbf)](_0x3c31bb(0xb1))['value']();return _0x5f4224[_0x3c31bb(0xa9)](_0x48322f=>{const _0x5887f4=_0x3c31bb,_0x5e685c=_0x48322f[_0x5887f4(0x1bc)][_0x5887f4(0x109)](_0x5887f4(0x15c))?_0x5887f4(0x15c):_0x5887f4(0xf3),_0x233765=/#([0-9]|\.)+\s/i,_0x975371=Number(_0x233765['exec'](_0x48322f[_0x5887f4(0x1bc)])[0x0][_0x5887f4(0x16f)](0x1)),_0x1eea79=/@([0-9]|\.)+$/i,_0x63fd9d=Number(_0x1eea79[_0x5887f4(0xd1)](_0x48322f[_0x5887f4(0x1bc)])[0x0][_0x5887f4(0x16f)](0x1));_0x1a7d1a[_0x5887f4(0xd5)]({'datetime':_0x48322f[_0x5887f4(0xb1)],'coin':symbolToCoin(_0x16a5ff),'symbol':_0x16a5ff,'side':_0x5e685c,'amount':_0x975371,'filled':_0x975371,'price':_0x63fd9d});}),_0x1a7d1a;}async function getAllOrders(_0x2424a0,_0x1d4b24){const _0x32f0db=_0x20a1c6;let _0x2b3149=[];while(_0x1d4b24<exchange['milliseconds']()){const _0x318067=0x1f4,_0x17ea4b=await exchange[_0x32f0db(0xfb)](_0x2424a0,_0x1d4b24,_0x318067);if(_0x17ea4b[_0x32f0db(0x198)])_0x1d4b24=_0x17ea4b[_0x17ea4b['length']-0x1][_0x32f0db(0x150)]+0x1,_0x2b3149=_0x2b3149['concat'](_0x17ea4b);else break;}return _0x2b3149;}async function validate24hChanges(){const _0x49adf6=_0x20a1c6;let _0xf538e5;for(const _0x49a3fa of currentCoins){if(_0x49a3fa[_0x49adf6(0x14a)]!=config[_0x49adf6(0x14b)]){let _0x431237;_0x49a3fa['reverse']?_0x431237=formatResult((0x1/(global[_0x49adf6(0x11c)][noslash(_0x49a3fa[_0x49adf6(0x111)])]/0x64+0x1)-0x1)*0x64,0x3):_0x431237=global['change'][noslash(_0x49a3fa['symbol'])],_0x431237<config['change24h']&&(logHistory(_0x49adf6(0x10d),_0x49a3fa[_0x49adf6(0x14a)]+_0x49adf6(0xeb)+_0x431237+'%'),logHistory(_0x49adf6(0x10d),_0x49adf6(0xcb)),logHistory(_0x49adf6(0x10d),_0x49adf6(0xa8)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x3fee45=_0x20a1c6;let _0x54d7ed=dbLogs[_0x3fee45(0xe4)](_0x3fee45(0x148))[_0x3fee45(0x100)]();if(_0x54d7ed!=_0x3fee45(0x102)){dbLogs[_0x3fee45(0x1b0)](_0x3fee45(0x148),_0x3fee45(0x102))[_0x3fee45(0x193)]();let _0xaf6f8b=[];const _0x6997c6=dbLogs[_0x3fee45(0xe4)]('logs')[_0x3fee45(0x100)]();_0x6997c6['forEach'](_0x12a1d2=>{const _0x5eb816=_0x3fee45;_0xaf6f8b[_0x5eb816(0xd5)]({'time':_0x12a1d2[_0x5eb816(0xb1)],'type':_0x12a1d2[_0x5eb816(0x11f)],'event':_0x12a1d2[_0x5eb816(0x1bc)]});}),dbLogs['get']('logs')[_0x3fee45(0x18c)](_0xaf6f8b)[_0x3fee45(0x193)]();}let _0x4e7574=dbConfig[_0x3fee45(0xe4)](_0x3fee45(0x148))[_0x3fee45(0x100)]();if(_0x4e7574!=_0x3fee45(0x102)){dbConfig[_0x3fee45(0x1b0)](_0x3fee45(0x148),_0x3fee45(0x102))[_0x3fee45(0x193)]();let _0x2fb2a4=dbConfig[_0x3fee45(0xe4)](_0x3fee45(0x1a9))['find']({'botID':botID})[_0x3fee45(0x100)]();if(_0x2fb2a4){let _0x162fe8=[];_0x2fb2a4['portfolio'][_0x3fee45(0xa9)](_0x2ed786=>{const _0x392fe4=_0x3fee45;_0x162fe8[_0x392fe4(0xd5)]({'coin':_0x2ed786['coin'],'number':_0x2ed786['startnumber'],'price':_0x2ed786['startprice']}),delete _0x2ed786[_0x392fe4(0x1c0)],delete _0x2ed786[_0x392fe4(0x101)];});if(_0x162fe8['length']!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x3fee45(0x1b6)](_0x162fe8,null,0x4),function(_0x57da23){if(_0x57da23){}});const _0x37763c=(_0x4931de,_0xa0b41b)=>{const _0x56c9ad=_0x3fee45;let _0x52149a=[];_0xa0b41b[_0x56c9ad(0xa9)](_0x489775=>{const _0xd7eca1=_0x56c9ad,_0x33849b=_0x4931de['find'](_0x18806a=>_0x18806a['coin']==_0x489775[_0xd7eca1(0x14a)]);if(!_0x33849b)_0x52149a[_0xd7eca1(0xd5)](_0x489775);});let _0x5d04cd=[];return _0x4931de[_0x56c9ad(0xa9)](_0x591cb3=>{const _0x1622c1=_0x56c9ad,_0x2047e9=_0xa0b41b[_0x1622c1(0x106)](_0x3107f0=>_0x3107f0[_0x1622c1(0x14a)]==_0x591cb3[_0x1622c1(0x14a)]);if(!_0x2047e9||_0x2047e9[_0x1622c1(0xc7)]==0x0&&_0x591cb3[_0x1622c1(0xc7)]!=0x0)_0x5d04cd[_0x1622c1(0xd5)](_0x591cb3);}),{'missingDay1':_0x52149a,'notInDay2':_0x5d04cd};},_0x496884=dbPerformance['get'](_0x3fee45(0x152))['cloneDeep']()['value']();if(_0x496884[_0x3fee45(0x198)]>0x1){const {missingDay1:_0x56a6f3,notInDay2:_0x26df2d}=_0x37763c(_0x162fe8,_0x496884[0x1][_0x3fee45(0x180)]);_0x162fe8=[..._0x162fe8,..._0x56a6f3],_0x26df2d[_0x3fee45(0xa9)](_0x316c81=>{const _0x57a4e6=_0x3fee45;let _0x11ac50=_0x162fe8[_0x57a4e6(0xb3)](_0x51fde8=>_0x51fde8['coin']==_0x316c81[_0x57a4e6(0x14a)]);_0x11ac50!=-0x1&&_0x162fe8[_0x57a4e6(0x1a1)](_0x11ac50,0x1);});}_0x162fe8[_0x3fee45(0x1a4)]((_0x585564,_0x39851f)=>_0x585564[_0x3fee45(0x14a)]>_0x39851f[_0x3fee45(0x14a)]?0x1:_0x39851f[_0x3fee45(0x14a)]>_0x585564[_0x3fee45(0x14a)]?-0x1:0x0);let _0x5ceca3=[{'date':_0x2fb2a4[_0x3fee45(0x160)],'changes':_0x162fe8}];_0x496884[_0x3fee45(0x198)]>0x2&&_0x496884['forEach']((_0x328527,_0x1d3911)=>{const _0x6ff1c4=_0x3fee45;if(_0x1d3911>0x0&&_0x1d3911<_0x496884[_0x6ff1c4(0x198)]-0x1){const {missingDay1:_0x16ea1a,notInDay2:_0x5a7c13}=_0x37763c(_0x496884[_0x1d3911][_0x6ff1c4(0x180)],_0x496884[_0x1d3911+0x1][_0x6ff1c4(0x180)]);_0x162fe8=[],(_0x16ea1a[_0x6ff1c4(0x198)]!=0x0||_0x5a7c13[_0x6ff1c4(0x198)]!=0x0)&&(_0x16ea1a[_0x6ff1c4(0x198)]!=0x0&&_0x162fe8[_0x6ff1c4(0xd5)](..._0x16ea1a),_0x5a7c13[_0x6ff1c4(0x198)]!=0x0&&(_0x5a7c13[_0x6ff1c4(0xa9)](_0x1c4834=>{const _0x45d752=_0x6ff1c4;_0x1c4834[_0x45d752(0xc7)]=-_0x1c4834[_0x45d752(0xc7)];}),_0x162fe8[_0x6ff1c4(0xd5)](..._0x5a7c13)),_0x162fe8[_0x6ff1c4(0x1a4)]((_0x433daf,_0x310e1c)=>_0x433daf[_0x6ff1c4(0x14a)]>_0x310e1c[_0x6ff1c4(0x14a)]?0x1:_0x310e1c[_0x6ff1c4(0x14a)]>_0x433daf[_0x6ff1c4(0x14a)]?-0x1:0x0),_0x5ceca3[_0x6ff1c4(0xd5)]({'date':_0x496884[_0x1d3911+0x1][_0x6ff1c4(0x18a)],'changes':_0x162fe8}));}}),dbConfig['get'](_0x3fee45(0x1a9))['find']({'botID':botID})[_0x3fee45(0x18c)]({..._0x2fb2a4,'liquidity':_0x5ceca3})[_0x3fee45(0x193)]();}}config=getConfiguration(botID);let _0x208884=dbPerformance[_0x3fee45(0xe4)](_0x3fee45(0x148))[_0x3fee45(0x100)]();_0x208884!=_0x3fee45(0x102)&&(dbPerformance['set'](_0x3fee45(0x148),_0x3fee45(0x102))[_0x3fee45(0x193)](),setStartDatePerformance());let _0x3be6e6=dbCoinResults['get'](_0x3fee45(0x148))[_0x3fee45(0x100)]();if(_0x3be6e6!=_0x3fee45(0x163)){dbCoinResults[_0x3fee45(0x1b0)]('version',_0x3fee45(0x163))[_0x3fee45(0x193)]();let _0x52c4c3=dbCoinResults[_0x3fee45(0xe4)](_0x3fee45(0x180))[_0x3fee45(0x100)]();if(_0x52c4c3[_0x3fee45(0x198)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0xefeac5){const _0x1a1327=_0x20a1c6;let _0x5a1b4c=dbConfig[_0x1a1327(0xe4)](_0x1a1327(0x1a9))[_0x1a1327(0x106)]({'botID':_0xefeac5})[_0x1a1327(0x100)]();if(_0x5a1b4c){let _0x34d1b7=![];typeof _0x5a1b4c[_0x1a1327(0x18f)]=='string'&&(_0x5a1b4c={..._0x5a1b4c,'threshold':Number(_0x5a1b4c['threshold'])},_0x34d1b7=!![]),_0x5a1b4c['change24h']==null&&(_0x5a1b4c={..._0x5a1b4c,'change24h':-0x14},_0x34d1b7=!![]),_0x34d1b7&&(_0x5a1b4c={'botID':_0x5a1b4c['botID'],'exchange':_0x5a1b4c['exchange'],'apiKey':_0x5a1b4c['apiKey'],'apiSecret':_0x5a1b4c[_0x1a1327(0xaa)],'basecoin':_0x5a1b4c[_0x1a1327(0x14b)],'botname':_0x5a1b4c[_0x1a1327(0xc2)],'showname':_0x5a1b4c['showname'],'threshold':_0x5a1b4c[_0x1a1327(0x18f)],'ordertype':_0x5a1b4c[_0x1a1327(0xdc)],'timeout':_0x5a1b4c[_0x1a1327(0x173)],'startdate':_0x5a1b4c[_0x1a1327(0x160)],'recreate':_0x5a1b4c[_0x1a1327(0x1b2)],'timeshift':_0x5a1b4c[_0x1a1327(0x191)],'headless':_0x5a1b4c['headless'],'cooldown':_0x5a1b4c[_0x1a1327(0x183)],'change24h':_0x5a1b4c[_0x1a1327(0xa7)],'emojibuy':_0x5a1b4c['emojibuy'],'emojisell':_0x5a1b4c[_0x1a1327(0x16c)],'portfolio':_0x5a1b4c[_0x1a1327(0x15f)],'liquidity':_0x5a1b4c[_0x1a1327(0x1ae)]},dbConfig[_0x1a1327(0xe4)](_0x1a1327(0x1a9))[_0x1a1327(0x1b1)]()[_0x1a1327(0x193)](),dbConfig[_0x1a1327(0xe4)](_0x1a1327(0x1a9))[_0x1a1327(0xd5)](_0x5a1b4c)['write']());}else _0x5a1b4c={'botID':_0xefeac5,'exchange':_0x1a1327(0x108),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1a1327(0x168)+_0xefeac5,'showname':![],'threshold':0x3,'ordertype':_0x1a1327(0xd3),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1a1327(0x191)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x5a1b4c;}function emittedConfiguration(){const _0x3fb102=_0x20a1c6;let _0x481251;return config[_0x3fb102(0x10b)]==''?_0x481251=config:_0x481251={...config,'apiKey':_0x3fb102(0x1be),'apiSecret':_0x3fb102(0x1be)},_0x481251;}function getSettings(){const _0x143157=_0x20a1c6;return dbSettings[_0x143157(0xe4)](_0x143157(0xd2))[_0x143157(0x100)]();}function getSecure(){const _0x257e50=_0x20a1c6;return dbSecure[_0x257e50(0xe4)](_0x257e50(0x125))[_0x257e50(0x100)]()||{};}function updateTimeshift(_0x398bd5){const _0x6c8c55=_0x20a1c6;let _0x3f39fa=dbConfig['get'](_0x6c8c55(0x1a9))['find']({'botID':botID})[_0x6c8c55(0x100)]();_0x3f39fa&&dbConfig['get']('bot')[_0x6c8c55(0x106)]({'botID':botID})[_0x6c8c55(0x18c)]({'timeshift':_0x398bd5})[_0x6c8c55(0x193)](),config['timeshift']=_0x398bd5,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x51759f){const _0x3ad3fb=_0x20a1c6;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x25693c=dbConfig[_0x3ad3fb(0xe4)]('bot')['find']({'botID':botID})[_0x3ad3fb(0x100)]();_0x51759f={..._0x51759f,'apiKey':crypt[_0x3ad3fb(0x149)](secure['privateKey'],_0x51759f['apiKey'])[_0x3ad3fb(0xad)],'apiSecret':crypt[_0x3ad3fb(0x149)](secure[_0x3ad3fb(0x15a)],_0x51759f[_0x3ad3fb(0xaa)])[_0x3ad3fb(0xad)]};if(_0x25693c){if(_0x51759f[_0x3ad3fb(0x10b)]==_0x3ad3fb(0x1be))_0x51759f[_0x3ad3fb(0x10b)]=config['apiKey'];if(_0x51759f[_0x3ad3fb(0xaa)]==_0x3ad3fb(0x1be))_0x51759f['apiSecret']=config[_0x3ad3fb(0xaa)];dbConfig[_0x3ad3fb(0xe4)](_0x3ad3fb(0x1a9))[_0x3ad3fb(0x106)]({'botID':botID})[_0x3ad3fb(0x18c)](_0x51759f)[_0x3ad3fb(0x193)]();}else dbConfig['get'](_0x3ad3fb(0x1a9))[_0x3ad3fb(0xd5)](_0x51759f)[_0x3ad3fb(0x193)](),process[_0x3ad3fb(0x16a)]({'status':_0x3ad3fb(0xea),'live':_0x3ad3fb(0x169)},_0xf8fb71=>{});config={..._0x51759f},setStartDatePerformance(),process['send']({'botname':_0x51759f[_0x3ad3fb(0xc2)]},_0x464f21=>{}),updateBotManager();const _0x40ca24=getNormalizedPerformance();getStartingBalances(_0x40ca24),emitPerformance(_0x40ca24),proxyEmit(_0x3ad3fb(0xd8)),await initCoinResults(),reset();}async function storeHeadless(_0x211b30){const _0x1ba5e4=_0x20a1c6,_0x3f253c={...config,'headless':_0x211b30[_0x1ba5e4(0xa4)]};let _0x9866c=dbConfig[_0x1ba5e4(0xe4)](_0x1ba5e4(0x1a9))['find']({'botID':botID})[_0x1ba5e4(0x100)]();_0x9866c&&dbConfig[_0x1ba5e4(0xe4)](_0x1ba5e4(0x1a9))[_0x1ba5e4(0x106)]({'botID':botID})[_0x1ba5e4(0x18c)](_0x3f253c)[_0x1ba5e4(0x193)](),config={..._0x3f253c},updateBotManager(),proxyEmit(_0x1ba5e4(0x141),emittedConfiguration());}function noslash(_0x117c8a){return _0x117c8a['replace']('/','');}async function updateNumberCoins(_0x1b2d23){const _0x3d21b4=_0x20a1c6;console['log'](_0x1b2d23);if(_0x1b2d23[_0x3d21b4(0xa2)]&&_0x1b2d23[_0x3d21b4(0xa2)]==_0x3d21b4(0x140)){if(_0x1b2d23['eventTime']!=lastOutboundEventTime){lastOutboundEventTime=_0x1b2d23[_0x3d21b4(0xe6)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x1f69dc=JSON[_0x3d21b4(0x13e)](lastBalances[_0x3d21b4(0x15f)]);_0x1f69dc[_0x3d21b4(0xa9)](_0x4cd888=>{const _0x372d08=_0x3d21b4,_0x172435=currentCoins[_0x372d08(0x106)](_0x4312b3=>_0x4312b3['coin']==_0x4cd888[_0x372d08(0x14a)]);if(_0x172435['order'])_0x4cd888['order']=_0x172435[_0x372d08(0x19f)];}),lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x1f69dc)},proxyEmit(_0x3d21b4(0x1c7),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x1b2d23[_0x3d21b4(0xa2)]&&_0x1b2d23[_0x3d21b4(0xa2)]==_0x3d21b4(0x137)){if(_0x1b2d23[_0x3d21b4(0xf7)]==_0x3d21b4(0xc1)){if(lastOrders)lastOrders[_0x3d21b4(0xa9)](async _0x2f001d=>{const _0x24fd62=_0x3d21b4;_0x2f001d[_0x24fd62(0x186)]==_0x1b2d23[_0x24fd62(0x186)]&&_0x2f001d[_0x24fd62(0xb9)]==0x0&&(_0x2f001d['price']=_0x1b2d23[_0x24fd62(0x1a6)]/_0x1b2d23[_0x24fd62(0x103)],_0x2f001d['filled']=_0x1b2d23[_0x24fd62(0x103)],_0x2f001d[_0x24fd62(0x1cf)]={'cost':_0x1b2d23[_0x24fd62(0x127)],'currency':_0x1b2d23[_0x24fd62(0x166)]},await validateOrders(),await updateCoinResults(_0x2f001d));});}}}async function getCoins(_0x5a5a8a=![],_0x1c9c69=!![],_0x2d2f16=config['basecoin']){const _0x345bcd=_0x20a1c6;let _0x1844e9,_0x28a93b=[],_0x47ac51=[],_0x11729f=[];try{_0x1844e9=await exchange[_0x345bcd(0x1a8)](),mybalances=_0x1844e9[_0x345bcd(0xe2)];if(!_0x1c9c69)for(const [_0x26522b,_0x4ff7b9]of Object[_0x345bcd(0x11d)](mybalances)){_0x11729f[_0x345bcd(0xd5)](_0x26522b);}else config[_0x345bcd(0x15f)][_0x345bcd(0xa9)](_0x5a399e=>{const _0x5b3d4e=_0x345bcd;if(!_0x5a399e[_0x5b3d4e(0x129)])_0x11729f['push'](_0x5a399e[_0x5b3d4e(0x14a)]);});if(_0x2d2f16=='')for(const [_0x1630aa,_0x4b9b00]of Object[_0x345bcd(0x11d)](mybalances)){_0x4b9b00[_0x345bcd(0x12f)]()!=0x0&&_0x47ac51[_0x345bcd(0xd5)]({'coin':_0x1630aa});}else{let _0x107d43=![],_0x231fe7;allOpenOrders=[];for(const [_0x1dd4ae,_0x467287]of Object[_0x345bcd(0x11d)](mybalances)){if(_0x11729f[_0x345bcd(0x109)](_0x1dd4ae)){const _0x170369=config[_0x345bcd(0x15f)][_0x345bcd(0x106)](_0x3daf10=>_0x3daf10[_0x345bcd(0x14a)]==_0x1dd4ae),_0x28d538=_0x1dd4ae+'/'+_0x2d2f16,_0x45b69e=_0x2d2f16+'/'+_0x1dd4ae;_0x107d43=![];if((_0x467287[_0x345bcd(0x12f)]()!=0x0||_0x170369)&&(allSymbols[_0x345bcd(0x109)](_0x28d538)||_0x1dd4ae==_0x2d2f16))_0x1dd4ae!=_0x2d2f16&&(_0x28a93b[_0x345bcd(0xd5)](_0x28d538),_0x5a5a8a&&(_0x231fe7=await exchange[_0x345bcd(0x122)](_0x28d538),_0x231fe7[_0x345bcd(0x198)]>0x0&&(_0x107d43=!![]))),_0x47ac51[_0x345bcd(0xd5)]({'coin':_0x1dd4ae,'symbol':_0x28d538,'reverse':![],'number':Math[_0x345bcd(0xf1)](_0x467287+(_0x170369&&_0x170369[_0x345bcd(0x176)]||0x0),0x0),'order':_0x107d43});else(_0x467287[_0x345bcd(0x12f)]()!=0x0||_0x170369)&&allSymbols[_0x345bcd(0x109)](_0x45b69e)&&(_0x1dd4ae!=_0x2d2f16&&(_0x28a93b[_0x345bcd(0xd5)](_0x45b69e),_0x5a5a8a&&(_0x231fe7=await exchange['fetchOpenOrders'](_0x45b69e),_0x231fe7[_0x345bcd(0x198)]>0x0&&(_0x107d43=!![]))),_0x47ac51['push']({'coin':_0x1dd4ae,'symbol':_0x45b69e,'reverse':!![],'number':Math[_0x345bcd(0xf1)](_0x467287+(_0x170369&&_0x170369[_0x345bcd(0x176)]||0x0),0x0),'order':_0x107d43}));}_0x107d43&&allOpenOrders['push'](_0x231fe7[0x0]);}_0x5a5a8a&&allOpenOrders[_0x345bcd(0x198)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x345bcd(0x13d))));}}catch(_0x4d1a49){if(!_0x1c9c69){if(_0x4d1a49[_0x345bcd(0x12f)]()['includes']('API-key\x20format\x20invalid'))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x4d1a49[_0x345bcd(0x12f)]()[_0x345bcd(0x109)]('AuthenticationError'))return logHistory(_0x345bcd(0x10d),_0x345bcd(0x1cb)),![];else{if(_0x4d1a49[_0x345bcd(0x12f)]()[_0x345bcd(0x109)](_0x345bcd(0xfc)))return logHistory(_0x345bcd(0x10d),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x4d1a49,_0x345bcd(0x10c));}}}else await handleError(_0x4d1a49,'getCoins()');}return _0x47ac51;}async function getPortfolio(_0x2cbf9e){const _0xe3e80d=_0x20a1c6;let _0x2cf2e3=[],_0x1dde3e=[],_0x55e85b,_0x2f9579=[],_0x28da3d,_0x56e85d;_0x2cbf9e[_0xe3e80d(0x10b)]===_0xe3e80d(0x1be)||_0x2cbf9e['apiSecret']===_0xe3e80d(0x1be)?(_0x28da3d=config['apiKey'],_0x56e85d=config[_0xe3e80d(0xaa)]):(_0x28da3d=_0x2cbf9e['apiKey'],_0x56e85d=_0x2cbf9e[_0xe3e80d(0xaa)]);await initExchange(_0x28da3d,_0x56e85d);let _0x2f4db5=await loadSymbols();if(_0x2f4db5){_0x2f9579=await getCoins(![],![],_0x2cbf9e[_0xe3e80d(0x14b)]);if(_0x2f9579===![])proxyEmit(_0xe3e80d(0x15f),![]);else{if(_0x2cbf9e['basecoin']=='')proxyEmit('portfolio',_0x2f9579);else{_0x2f9579[_0xe3e80d(0xa9)](_0x51dae9=>{const _0xf0e11a=_0xe3e80d;if(_0x51dae9['coin']!=_0x2cbf9e['basecoin'])_0x2cf2e3[_0xf0e11a(0xd5)](_0x51dae9[_0xf0e11a(0x111)]);});try{_0x1dde3e=await exchange[_0xe3e80d(0xac)](_0x2cf2e3);}catch(_0xbb767a){await handleError(_0xbb767a,'getPortfolio()');}_0x2f9579[_0xe3e80d(0xa9)](_0x498dbe=>{const _0x213749=_0xe3e80d;_0x498dbe[_0x213749(0x14a)]!=_0x2cbf9e[_0x213749(0x14b)]?_0x55e85b=_0x498dbe[_0x213749(0xe9)]?0x1/_0x1dde3e[_0x498dbe[_0x213749(0x111)]]['last']:_0x1dde3e[_0x498dbe[_0x213749(0x111)]][_0x213749(0x165)]:_0x55e85b=0x1,_0x498dbe[_0x213749(0x17a)]=formatResult(_0x55e85b,0x8);}),proxyEmit(_0xe3e80d(0x15f),_0x2f9579);}}}else proxyEmit(_0xe3e80d(0x15f),![]);}function checkMinimums(_0x3271f4){const _0x52c4bc=_0x20a1c6;let _0x362082=!![];const _0x31ccc3=!_0x3271f4[_0x52c4bc(0xe9)]?markets[_0x3271f4['symbol']]['limits']['amount'][_0x52c4bc(0x1b4)]:markets[_0x3271f4['symbol']][_0x52c4bc(0x113)]['cost'][_0x52c4bc(0x1b4)],_0x297823=!_0x3271f4[_0x52c4bc(0xe9)]?markets[_0x3271f4[_0x52c4bc(0x111)]][_0x52c4bc(0x113)]['cost']['min']:markets[_0x3271f4[_0x52c4bc(0x111)]][_0x52c4bc(0x113)]['amount'][_0x52c4bc(0x1b4)],_0x118cc5=markets[_0x3271f4[_0x52c4bc(0x111)]][_0x52c4bc(0xe1)][_0x52c4bc(0x188)];_0x3271f4[_0x52c4bc(0x117)]=formatResultTruncate(_0x3271f4[_0x52c4bc(0x117)],_0x118cc5);if(Math[_0x52c4bc(0xde)](_0x3271f4['trade'])<_0x31ccc3)_0x362082=![];if(Math['abs'](_0x3271f4[_0x52c4bc(0x117)])*_0x3271f4[_0x52c4bc(0x165)]<_0x297823)_0x362082=![];if(_0x3271f4[_0x52c4bc(0xc6)]=='sell'){let _0x1bc72a=config[_0x52c4bc(0x15f)][_0x52c4bc(0x106)](_0xed9c56=>_0xed9c56[_0x52c4bc(0x14a)]==_0x3271f4[_0x52c4bc(0x14a)]);if(_0x1bc72a[_0x52c4bc(0x176)]>0x0){if(Math['abs'](_0x3271f4[_0x52c4bc(0x117)])>_0x3271f4['number']-_0x1bc72a[_0x52c4bc(0x176)])_0x362082=![];}else{if(Math['abs'](_0x3271f4[_0x52c4bc(0x117)])>_0x3271f4[_0x52c4bc(0xc7)])_0x362082=![];}}if(_0x3271f4['side']=='buy'){let _0x9741ba=config[_0x52c4bc(0x15f)][_0x52c4bc(0x106)](_0x320bee=>_0x320bee[_0x52c4bc(0x14a)]==config[_0x52c4bc(0x14b)]),_0xa91f56=currentCoins[_0x52c4bc(0x106)](_0x373a7f=>_0x373a7f['coin']==config[_0x52c4bc(0x14b)]);if(_0x9741ba[_0x52c4bc(0x176)]>0x0){if(Math[_0x52c4bc(0xde)](_0x3271f4['trade'])*_0x3271f4['last']>_0xa91f56[_0x52c4bc(0xc7)]-_0x9741ba['offset'])_0x362082=![];}else{if(Math[_0x52c4bc(0xde)](_0x3271f4[_0x52c4bc(0x117)])*_0x3271f4[_0x52c4bc(0x165)]>_0xa91f56[_0x52c4bc(0xc7)])_0x362082=![];}}return _0x362082;}async function getBalances(){const _0x15cd86=_0x20a1c6;let _0x10e7b0=0x0,_0x1da08f;const _0x16b5ae=config[_0x15cd86(0x18f)];if(config[_0x15cd86(0xa4)]&&config[_0x15cd86(0xa7)]<0x0)await validate24hChanges();currentCoins[_0x15cd86(0xa9)](_0x3df795=>{const _0xd97956=_0x15cd86;if(_0x3df795[_0xd97956(0x14a)]!=config[_0xd97956(0x14b)]){let _0x2a4793=global[_0xd97956(0x1cc)][noslash(_0x3df795[_0xd97956(0x111)])];_0x1da08f=_0x3df795[_0xd97956(0xe9)]?0x1/_0x2a4793:_0x2a4793;}else _0x1da08f=0x1;let _0x322953=_0x3df795['number']*_0x1da08f;_0x10e7b0+=_0x322953,_0x3df795[_0xd97956(0x165)]=formatResult(Number(_0x1da08f),0x8),_0x3df795[_0xd97956(0x100)]=_0x322953;}),currentCoins[_0x15cd86(0xa9)](_0x5c3b9a=>{const _0x4b4b02=_0x15cd86;let _0x1725b5=config[_0x4b4b02(0x15f)][_0x4b4b02(0x106)](_0x33342a=>_0x33342a[_0x4b4b02(0x14a)]==_0x5c3b9a[_0x4b4b02(0x14a)]),_0x58dba6=Number(_0x1725b5[_0x4b4b02(0x195)]),_0x3b31f2=_0x5c3b9a[_0x4b4b02(0x100)]/_0x10e7b0*0x64,_0x1ef7c1=_0x58dba6*_0x10e7b0/0x64/_0x5c3b9a['last']-_0x5c3b9a[_0x4b4b02(0xc7)];_0x5c3b9a[_0x4b4b02(0x195)]=formatResult(_0x3b31f2,0x3),_0x5c3b9a[_0x4b4b02(0xdf)]=formatResult(_0x58dba6,0x3),_0x5c3b9a[_0x4b4b02(0x117)]=formatResult(_0x1ef7c1,0x8),_0x5c3b9a[_0x4b4b02(0xc6)]='',_0x5c3b9a['valid']=![];if(_0x5c3b9a['coin']!=config['basecoin']){if(_0x5c3b9a[_0x4b4b02(0x195)]>_0x58dba6)_0x5c3b9a['side']=_0x4b4b02(0x15c),_0x5c3b9a['valid']=checkMinimums(_0x5c3b9a);else _0x5c3b9a[_0x4b4b02(0x195)]<_0x58dba6&&(_0x5c3b9a[_0x4b4b02(0xc6)]=_0x4b4b02(0xf3),_0x5c3b9a[_0x4b4b02(0xee)]=checkMinimums(_0x5c3b9a));}_0x5c3b9a['delta']=_0x5c3b9a[_0x4b4b02(0x195)]/_0x5c3b9a[_0x4b4b02(0xdf)]-0x1;}),currentCoins[_0x15cd86(0x1a4)]((_0x708281,_0x2cb41b)=>_0x708281[_0x15cd86(0xcd)]<_0x2cb41b['delta']?0x1:_0x2cb41b[_0x15cd86(0xcd)]<_0x708281[_0x15cd86(0xcd)]?-0x1:0x0);const _0x3a5aeb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a5aeb[_0x15cd86(0xe7)],'usd':_0x3a5aeb[_0x15cd86(0x10a)],'portfolio':JSON[_0x15cd86(0x1b6)](currentCoins),'threshold':_0x16b5ae},proxyEmit(_0x15cd86(0x1c7),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x15cd86(0xa4)])headlessMode({'portfolio':currentCoins,'threshold':_0x16b5ae});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x16b5ae});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3e2449=_0x20a1c6;if(!lastBalances)return;let _0x4cd034=[],_0x552dfa,_0x2865ce=JSON[_0x3e2449(0x13e)](lastBalances[_0x3e2449(0x15f)]);_0x2865ce[_0x3e2449(0x1a4)]((_0xe481df,_0x2f1ad3)=>_0xe481df[_0x3e2449(0x14a)]>_0x2f1ad3[_0x3e2449(0x14a)]?0x1:_0x2f1ad3[_0x3e2449(0x14a)]>_0xe481df[_0x3e2449(0x14a)]?-0x1:0x0),_0x2865ce[_0x3e2449(0xa9)](_0x41ee88=>{const _0x24023e=_0x3e2449;let _0x28feb8={'coin':_0x41ee88[_0x24023e(0x14a)],'number':_0x41ee88['number'],'price':_0x41ee88[_0x24023e(0x165)]};_0x4cd034[_0x24023e(0xd5)](_0x28feb8);});const _0x2374f2=await getFiat();_0x552dfa={'date':lastBalances[_0x3e2449(0xb1)][_0x3e2449(0x14f)]('\x20')[0x0],'eur':_0x2374f2[_0x3e2449(0xe7)],'usd':_0x2374f2[_0x3e2449(0x10a)],'coins':_0x4cd034};let _0x366f47=dbPerformance[_0x3e2449(0xe4)](_0x3e2449(0x152))[_0x3e2449(0x106)]({'date':_0x552dfa['date']})[_0x3e2449(0x100)]();_0x366f47?_0x552dfa[_0x3e2449(0x18a)]!=config[_0x3e2449(0x160)]&&dbPerformance[_0x3e2449(0xe4)](_0x3e2449(0x152))[_0x3e2449(0x106)]({'date':_0x552dfa[_0x3e2449(0x18a)]})[_0x3e2449(0x18c)](_0x552dfa)[_0x3e2449(0x193)]():dbPerformance[_0x3e2449(0xe4)](_0x3e2449(0x152))[_0x3e2449(0xd5)](_0x552dfa)[_0x3e2449(0x193)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x465ce8=_0x20a1c6;let _0x4dc36f=[];if(dbPerformance[_0x465ce8(0xf6)](_0x465ce8(0x152))['value']()){let _0x5a8e51=dbPerformance['get']('data')[_0x465ce8(0x11a)]()[_0x465ce8(0xbf)]('date')['value'](),_0x8a97ff=[...config[_0x465ce8(0x1ae)]];_0x8a97ff[_0x465ce8(0x1a4)]((_0x4a68b2,_0x2ee971)=>_0x4a68b2[_0x465ce8(0x18a)]>_0x2ee971[_0x465ce8(0x18a)]?-0x1:_0x2ee971[_0x465ce8(0x18a)]>_0x4a68b2[_0x465ce8(0x18a)]?0x1:0x0);let _0x5c7963=0x1,_0x25fe29=[],_0x2ec673=0x0;_0x5a8e51['slice']()['reverse']()[_0x465ce8(0xa9)]((_0x5c1e45,_0x308068)=>{const _0x40966d=_0x465ce8;if(_0x8a97ff[_0x2ec673]){if(_0x5a8e51[_0x5a8e51[_0x40966d(0x198)]-_0x308068]&&_0x8a97ff[_0x2ec673]['date']==_0x5a8e51[_0x5a8e51['length']-_0x308068][_0x40966d(0x18a)]){if(_0x308068<_0x5a8e51[_0x40966d(0x198)]){let _0x2028e3=0x0,_0x1b4afe=0x0;_0x5a8e51[_0x5a8e51[_0x40966d(0x198)]-_0x308068][_0x40966d(0x180)][_0x40966d(0xa9)](_0x480d5e=>{const _0x4074ba=_0x40966d;_0x1b4afe+=_0x480d5e['number']*_0x480d5e[_0x4074ba(0x17a)];}),_0x8a97ff[_0x2ec673][_0x40966d(0x17b)][_0x40966d(0xa9)](_0x43a10f=>{const _0x52d07d=_0x40966d;_0x2028e3+=_0x43a10f[_0x52d07d(0xc7)]*_0x43a10f[_0x52d07d(0x17a)];}),_0x5c7963*=_0x2028e3/(_0x1b4afe-_0x2028e3)+0x1;}_0x2ec673++;}}let _0x2fc6f2=0x0;_0x5c1e45['coins'][_0x40966d(0xa9)](_0x1a3bde=>{const _0xa2aaad=_0x40966d;_0x2fc6f2+=_0x1a3bde[_0xa2aaad(0xc7)]*_0x1a3bde[_0xa2aaad(0x17a)];}),_0x25fe29[_0x5a8e51[_0x40966d(0x198)]-_0x308068-0x1]=_0x2fc6f2*(_0x5c7963-0x1);});let _0x16af43=[];_0x8a97ff=[...config[_0x465ce8(0x1ae)]]||[];let _0x284ff2=0x0;_0x2ec673=0x0,_0x5a8e51['forEach']((_0x8513ad,_0x3f9f12)=>{const _0x261240=_0x465ce8;if(_0x8a97ff[_0x2ec673]){const _0x58bc20=fns[_0x261240(0x13e)](_0x8a97ff[_0x2ec673][_0x261240(0x18a)],_0x261240(0x1a2),new Date()),_0x55b46c=fns[_0x261240(0x13e)](_0x8513ad['date'],_0x261240(0x1a2),new Date());if(fns[_0x261240(0x143)](_0x58bc20,_0x55b46c)){let _0x1aa2fc=0x0;_0x8a97ff[_0x2ec673][_0x261240(0x17b)][_0x261240(0xa9)](_0xee113e=>{const _0x105ee7=_0x261240;!_0x16af43[_0xee113e[_0x105ee7(0x14a)]]?_0x16af43[_0xee113e['coin']]=_0xee113e['number']:(_0x1aa2fc=_0x16af43[_0xee113e[_0x105ee7(0x14a)]],_0x16af43[_0xee113e[_0x105ee7(0x14a)]]+=_0xee113e[_0x105ee7(0xc7)]);const _0xc323ee=_0x8513ad[_0x105ee7(0x180)][_0x105ee7(0x106)](_0x7e73d7=>_0x7e73d7[_0x105ee7(0x14a)]==_0xee113e[_0x105ee7(0x14a)]);(!_0xc323ee||_0xc323ee[_0x105ee7(0xc7)]==0x0)&&(_0x284ff2+=(-_0xee113e[_0x105ee7(0xc7)]-_0x1aa2fc)*_0xee113e['price']);}),_0x2ec673++;}}_0x8513ad[_0x261240(0x180)][_0x261240(0xa9)]((_0x20979d,_0x175c58)=>{const _0x33d610=_0x261240;_0x16af43[_0x20979d['coin']]&&(_0x20979d={..._0x20979d,'initial':_0x16af43[_0x20979d['coin']]}),_0x8513ad[_0x33d610(0x180)][_0x175c58]=_0x20979d;}),_0x4dc36f[_0x261240(0xd5)]({'date':_0x8513ad['date'],'eur':_0x8513ad[_0x261240(0xe7)],'usd':_0x8513ad[_0x261240(0x10a)],'offset':_0x25fe29[_0x3f9f12],'netoffset':_0x284ff2,'coins':_0x8513ad['coins']});});}return _0x4dc36f;}function emitPerformance(_0x3e4926){const _0x52a919=_0x20a1c6;_0x3e4926['length']!==0x0?(proxyEmit(_0x52a919(0x16b),_0x3e4926),lastPerformanceEmitted=getDate()):proxyEmit(_0x52a919(0x16b),[]);}function getPerf(_0x38d0fc,_0x4bc90b){const _0x54a1e4=_0x20a1c6;let _0xe7c3ef=0x0,_0x3ca2f7=0x0,_0x5d81f9=0x0;_0x38d0fc['coins'][_0x54a1e4(0xa9)](_0x56d5bd=>{const _0x3e5973=_0x54a1e4;_0xe7c3ef+=_0x56d5bd[_0x3e5973(0xc7)]*_0x56d5bd['price'];});_0x4bc90b&&(_0xe7c3ef+=_0x38d0fc[_0x54a1e4(0x176)]);if(config[_0x54a1e4(0x14b)]===_0x54a1e4(0xbe)||config['basecoin']===_0x54a1e4(0xe0))_0x3ca2f7=_0xe7c3ef*_0x38d0fc[_0x54a1e4(0xe7)],_0x5d81f9=_0xe7c3ef*_0x38d0fc[_0x54a1e4(0x10a)];else{if(config[_0x54a1e4(0x14b)]===_0x54a1e4(0x154)||config['basecoin']===_0x54a1e4(0x130))_0x3ca2f7=_0xe7c3ef*_0x38d0fc[_0x54a1e4(0xe7)]/_0x38d0fc[_0x54a1e4(0x10a)],_0x5d81f9=_0xe7c3ef;else config[_0x54a1e4(0x14b)]===_0x54a1e4(0x1c1)&&(_0x3ca2f7=_0xe7c3ef,_0x5d81f9=_0xe7c3ef*_0x38d0fc['usd']/_0x38d0fc[_0x54a1e4(0xe7)]);}return[_0xe7c3ef,_0x3ca2f7,_0x5d81f9];}async function getStartingBalances(_0x3e82d4,_0x358092=!![]){const _0x10b9d3=_0x20a1c6;if(_0x3e82d4[_0x10b9d3(0x198)]!==0x0){const [_0x3c6f27,_0x41899f,_0x2d490a]=getPerf(_0x3e82d4[0x0],!![]);let _0x37e6c8=[];config['portfolio']['forEach'](_0x2e6767=>{const _0x27b536=_0x10b9d3;let _0x1f83b9=0x0,_0x5cefc7;config[_0x27b536(0x1ae)]['forEach'](_0x41d3df=>{const _0x278cf2=_0x27b536;let _0x1ace27=_0x41d3df[_0x278cf2(0x17b)]['find'](_0x3193a5=>_0x3193a5[_0x278cf2(0x14a)]==_0x2e6767[_0x278cf2(0x14a)]);if(_0x1ace27){_0x1f83b9+=_0x1ace27[_0x278cf2(0xc7)];if(!_0x5cefc7)_0x5cefc7=_0x1ace27[_0x278cf2(0x17a)];}}),_0x37e6c8[_0x27b536(0xd5)]({'coin':_0x2e6767[_0x27b536(0x14a)],'number':_0x1f83b9,'initialprice':_0x5cefc7});});const _0x27ed5c={'basecoin':_0x3c6f27,'eur':_0x41899f,'usd':_0x2d490a,'coins':_0x37e6c8};if(_0x358092)proxyEmit(_0x10b9d3(0xe5),_0x27ed5c);return _0x27ed5c;}}function headlessMode(_0x509329){const _0x4ddda8=_0x20a1c6;let _0x4ca7db=_0x509329['portfolio'],_0x1ab45f=_0x509329[_0x4ddda8(0x18f)],_0x4f5859=[];for(let _0x4f7fff of _0x4ca7db){if(_0x4f7fff[_0x4ddda8(0x14a)]!=config['basecoin']){if(_0x4f7fff[_0x4ddda8(0xcd)]>=_0x1ab45f/0x64){if(_0x4f7fff[_0x4ddda8(0xee)])_0x4f5859['push'](_0x4f7fff);}else{if(_0x4f7fff[_0x4ddda8(0xcd)]<=-_0x1ab45f/0x64){if(_0x4f7fff[_0x4ddda8(0xee)])_0x4f5859[_0x4ddda8(0xd5)](_0x4f7fff);}}}}_0x4f5859[_0x4ddda8(0x198)]>0x0&&(allOrdersPlaced=![],placeOrder(_0x4f5859));}function notifyBalance(_0x3f87e7){const _0xe9aa9f=_0x20a1c6;let _0x4b60cc=_0x3f87e7[_0xe9aa9f(0x15f)],_0xb992c2=_0x3f87e7['threshold'],_0x347756=[];for(let _0x28e245 of _0x4b60cc){if(_0x28e245[_0xe9aa9f(0x14a)]!=config['basecoin']){if(_0x28e245['delta']>=_0xb992c2/0x64){if(_0x28e245['valid'])_0x347756[_0xe9aa9f(0xd5)](_0x28e245);}else{if(_0x28e245[_0xe9aa9f(0xcd)]<=-_0xb992c2/0x64){if(_0x28e245[_0xe9aa9f(0xee)])_0x347756[_0xe9aa9f(0xd5)](_0x28e245);}}}}if(_0x347756[_0xe9aa9f(0x198)]>0x0){let _0x1e3f3b=_0x347756[_0xe9aa9f(0xdd)](_0x1ac013=>_0x1ac013[_0xe9aa9f(0x14a)]);_0x1e3f3b[_0xe9aa9f(0x1a4)]();let _0x129edc=_0x1e3f3b[_0xe9aa9f(0x1c3)](',\x20');if(lastCoinsToBalance!==_0x129edc)logHistory(_0xe9aa9f(0x17f),_0xe9aa9f(0x19b)+_0x129edc);lastCoinsToBalance=_0x129edc;}}function symbolToCoin(_0x4da57e){const _0x5cf5de=_0x20a1c6;let _0x3724b1;if(_0x4da57e['includes']('/'+config[_0x5cf5de(0x14b)]))_0x3724b1=_0x4da57e['replace']('/'+config[_0x5cf5de(0x14b)],'');if(_0x4da57e[_0x5cf5de(0x109)](config[_0x5cf5de(0x14b)]+'/'))_0x3724b1=_0x4da57e[_0x5cf5de(0xa5)](config[_0x5cf5de(0x14b)]+'/','');return _0x3724b1;}async function unlockOrders(){const _0x562e27=_0x20a1c6;currentCoins=await getCoins(),validateOrdersState=_0x562e27(0x197);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x1f8101){const _0x31f40a=_0x20a1c6;if(_0x1f8101)validateOrdersState=_0x1f8101;let _0x28ab7a=[],_0x3e82a3=config['ordertype']==_0x31f40a(0xd3)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+_0x31f40a(0xbc)+_0x1f8101),lastOrders[_0x31f40a(0xa9)](_0x4c306a=>{const _0x5a0958=_0x31f40a;let _0x391443=![];_0x4c306a[_0x5a0958(0xb9)]>0x0&&(_0x391443=!![]),_0x28ab7a[_0x5a0958(0xd5)](_0x391443),_0x391443&&config[_0x5a0958(0xdc)]!=_0x5a0958(0xd3)&&logHistory(_0x5a0958(0x19f),_0x5a0958(0x118)+_0x4c306a[_0x5a0958(0x111)]+'\x20'+_0x4c306a[_0x5a0958(0xc6)]+'\x20#'+formatResult(_0x4c306a[_0x5a0958(0xb9)],0x8)+'\x20@'+formatResult(_0x4c306a[_0x5a0958(0x17a)],0x8));}),_0x28ab7a['forEach']((_0x3a71f1,_0x224ee4)=>{if(_0x3a71f1)lastOrders['splice'](_0x224ee4,0x1);});const _0x2d209c=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x31f40a(0x197))validateOrdersState=_0x31f40a(0x12d),_0x28ab7a[_0x31f40a(0x109)](![])?config[_0x31f40a(0xdc)]==_0x31f40a(0xd3)?logHistory('error',_0x31f40a(0x153)):logHistory(_0x31f40a(0x10d),_0x31f40a(0x19e)):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x28ab7a[_0x31f40a(0x109)](![])){}else config[_0x31f40a(0xdc)]=='market'?logHistory('success',_0x31f40a(0x170)+_0x2d209c):logHistory(_0x31f40a(0x17f),_0x31f40a(0x1ab)+_0x2d209c),await unlockOrders();}else{if(validateOrdersState=='final')_0x28ab7a[_0x31f40a(0x109)](![])?config[_0x31f40a(0xdc)]==_0x31f40a(0xd3)?logHistory(_0x31f40a(0x17f),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x31f40a(0x172)](_0x3e82a3*validateOrderInterval/0xea60)+_0x31f40a(0xf8)+_0x2d209c):(await cancelOrders(),logHistory(_0x31f40a(0x17f),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x3e82a3*validateOrderInterval/0xea60)+_0x31f40a(0xf8)+_0x2d209c)):logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x2d209c),await unlockOrders();else{if(validateOrdersState==_0x31f40a(0x13d)){if(config[_0x31f40a(0xdc)]!=_0x31f40a(0xd3))logHistory(_0x31f40a(0x17f),_0x31f40a(0x1bd)+_0x2d209c);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2c7381=>{const _0x11d381=_0x5336;try{const _0x2e6f46=await exchange[_0x11d381(0x15b)](_0x2c7381['orderId'],_0x2c7381[_0x11d381(0x111)]);}catch(_0x2f7ee7){if(_0x2f7ee7['toString']()[_0x11d381(0x109)](_0x11d381(0xbb))){}else await handleError(_0x2f7ee7,_0x11d381(0xc8));}});}async function initCoinResults(){const _0x48b758=_0x20a1c6;let _0x40f739=[];config[_0x48b758(0x15f)]['forEach'](_0x5e7729=>{const _0x219f36=_0x48b758;if(!_0x5e7729[_0x219f36(0x129)]&&_0x5e7729['coin']!=config[_0x219f36(0x14b)]){let _0x1e55d8=dbCoinResults['get'](_0x219f36(0x180))[_0x219f36(0x106)]({'coin':_0x5e7729[_0x219f36(0x14a)]})[_0x219f36(0x100)]();if(!_0x1e55d8){const _0x466dd0=currentCoins[_0x219f36(0x106)](_0x17b227=>_0x17b227[_0x219f36(0x14a)]==_0x5e7729[_0x219f36(0x14a)]),_0x332810=global[_0x219f36(0x1cc)][noslash(_0x5e7729[_0x219f36(0x111)])];let _0x36e4d9=_0x466dd0?_0x466dd0[_0x219f36(0xc7)]:null,_0x368982=_0x5e7729[_0x219f36(0xe9)]?0x1/_0x332810:_0x332810,_0x3ef6dc;config[_0x219f36(0x1ae)][_0x219f36(0xa9)](_0x2a8823=>{const _0x6a78cd=_0x219f36;!_0x3ef6dc&&(_0x3ef6dc=_0x2a8823[_0x6a78cd(0x17b)]['find'](_0x3f100f=>_0x3f100f['coin']==_0x5e7729['coin']),_0x3ef6dc&&(_0x36e4d9=_0x3ef6dc[_0x6a78cd(0xc7)],_0x368982=_0x3ef6dc['price']));}),_0x40f739['push']({'coin':_0x5e7729[_0x219f36(0x14a)],'number':_0x36e4d9,'price':_0x368982});}}}),_0x40f739[_0x48b758(0xa9)](_0x109b89=>{const _0x5a3104=_0x48b758,_0x475581={'coin':_0x109b89[_0x5a3104(0x14a)],'number':_0x109b89[_0x5a3104(0xc7)],'breakeven':_0x109b89[_0x5a3104(0x17a)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5a3104(0xe4)](_0x5a3104(0x180))[_0x5a3104(0xd5)](_0x475581)[_0x5a3104(0x193)]();});}async function updateCoinResults(_0x44c8c0,_0x46ba66=![]){const _0x2abdd8=_0x20a1c6;let _0x44fa84,_0x44cd76,_0xee417,_0x45cc15,_0x131f9a,_0x2c7e8e,_0xda33ad=dbCoinResults[_0x2abdd8(0xe4)](_0x2abdd8(0x180))[_0x2abdd8(0x106)]({'coin':_0x44c8c0[_0x2abdd8(0x14a)]})[_0x2abdd8(0x100)]();!_0xda33ad&&await initCoinResults();_0x44c8c0[_0x2abdd8(0xe9)]&&(_0x2c7e8e={'filled':_0x44c8c0[_0x2abdd8(0xb9)]*_0x44c8c0[_0x2abdd8(0x17a)],'amount':_0x44c8c0[_0x2abdd8(0xb9)]*_0x44c8c0[_0x2abdd8(0x17a)],'side':_0x44c8c0[_0x2abdd8(0xc6)]==_0x2abdd8(0x15c)?_0x2abdd8(0xf3):_0x2abdd8(0x15c),'price':0x1/_0x44c8c0[_0x2abdd8(0x17a)]},_0x44c8c0={..._0x44c8c0,..._0x2c7e8e});if(_0x46ba66)_0x44cd76=_0x44c8c0['side']==_0x2abdd8(0xf3)?_0xda33ad['number']+_0x44c8c0[_0x2abdd8(0xb9)]:_0xda33ad['number']-_0x44c8c0[_0x2abdd8(0xb9)];else{const _0x1b3c1e=currentCoins[_0x2abdd8(0x106)](_0x4f8ebf=>_0x4f8ebf[_0x2abdd8(0x14a)]==_0x44c8c0[_0x2abdd8(0x14a)]);_0x44cd76=_0x1b3c1e[_0x2abdd8(0xc7)];}if(_0x44c8c0[_0x2abdd8(0x1cf)]&&_0x44c8c0[_0x2abdd8(0x1cf)][_0x2abdd8(0xf9)]==config['basecoin'])_0x44fa84=_0x44c8c0[_0x2abdd8(0x1cf)][_0x2abdd8(0xc9)];else{if(_0x44c8c0[_0x2abdd8(0x1cf)]&&_0x44c8c0[_0x2abdd8(0x1cf)]['currency']==_0x2abdd8(0x142)&&!_0x46ba66)_0x44fa84=_0x44c8c0[_0x2abdd8(0x1cf)][_0x2abdd8(0xc9)]*global[_0x2abdd8(0x1cc)]['BNB'+config[_0x2abdd8(0x14b)]];else _0x44fa84=defaultFee*_0x44c8c0['filled']*_0x44c8c0[_0x2abdd8(0x17a)];}_0x44c8c0['side']==_0x2abdd8(0xf3)?(_0xee417=_0x44cd76!=0x0?(_0xda33ad[_0x2abdd8(0x12a)]*_0xda33ad[_0x2abdd8(0xc7)]+_0x44c8c0[_0x2abdd8(0x17a)]*(_0x44cd76-_0xda33ad['number'])+_0x44fa84)/_0x44cd76:0x0,_0x45cc15=_0xda33ad[_0x2abdd8(0x114)]):(_0xee417=_0x44cd76!=0x0?(_0xda33ad['breakeven']*_0xda33ad[_0x2abdd8(0xc7)]-_0x44c8c0[_0x2abdd8(0x17a)]*(_0xda33ad['number']-_0x44cd76)+_0x44fa84)/_0x44cd76:0x0,_0x45cc15=_0xda33ad['realized']+(_0x44c8c0[_0x2abdd8(0x17a)]-_0xda33ad['breakeven'])*_0x44c8c0[_0x2abdd8(0xb9)]);_0x131f9a=(_0x44c8c0[_0x2abdd8(0x17a)]-_0xee417-_0x44fa84/_0x44c8c0[_0x2abdd8(0xb9)])*_0x44cd76;let _0x3b64bc={'coin':_0x44c8c0[_0x2abdd8(0x14a)],'number':_0x44cd76,'breakeven':formatResult(_0xee417,0x8),'realized':formatResult(_0x45cc15,0x8),'unrealized':formatResult(_0x131f9a,0x8),'fees':formatResult(_0xda33ad[_0x2abdd8(0x115)]+_0x44fa84,0x8),'sells':_0x44c8c0['side']=='sell'?_0xda33ad[_0x2abdd8(0x12e)]+0x1:_0xda33ad[_0x2abdd8(0x12e)],'buys':_0x44c8c0[_0x2abdd8(0xc6)]==_0x2abdd8(0xf3)?_0xda33ad[_0x2abdd8(0x145)]+0x1:_0xda33ad[_0x2abdd8(0x145)]};dbCoinResults['get'](_0x2abdd8(0x180))[_0x2abdd8(0x106)]({'coin':_0x44c8c0['coin']})[_0x2abdd8(0x18c)](_0x3b64bc)['write']();if(!_0x46ba66){if(_0x44c8c0[_0x2abdd8(0x1cf)]&&_0x44c8c0[_0x2abdd8(0x1cf)][_0x2abdd8(0xf9)]==_0x2abdd8(0x142)){const _0x4f788e=currentCoins[_0x2abdd8(0x106)](_0x44d236=>_0x44d236[_0x2abdd8(0x14a)]=='BNB');if(_0x4f788e){let _0x2de0ae=dbCoinResults[_0x2abdd8(0xe4)](_0x2abdd8(0x180))[_0x2abdd8(0x106)]({'coin':'BNB'})['value']();_0x3b64bc={..._0x2de0ae,'number':_0x4f788e['number']},dbCoinResults[_0x2abdd8(0xe4)]('coins')[_0x2abdd8(0x106)]({'coin':_0x2abdd8(0x142)})[_0x2abdd8(0x18c)](_0x3b64bc)[_0x2abdd8(0x193)]();}}}}async function placeOrder(_0x3fbe50){const _0x12502d=_0x20a1c6,_0x2973b4=config['ordertype']==_0x12502d(0xd3)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x77af10 of _0x3fbe50){let _0x47cbf1,_0x1ab87e,_0x329abb,_0x3799db,_0x4f17c2,_0x387aef=_0x77af10[_0x12502d(0x111)];try{const _0x74aad4=await exchange[_0x12502d(0xac)]([_0x387aef]),_0x25cfc3=_0x74aad4[_0x387aef];_0x47cbf1=_0x77af10['reverse']?0x1/_0x77af10[_0x12502d(0x165)]:_0x77af10['last'],_0x1ab87e=_0x25cfc3[_0x12502d(0x1b9)],_0x329abb=_0x25cfc3[_0x12502d(0x1bb)];_0x77af10[_0x12502d(0xe9)]?(_0x3799db=_0x77af10[_0x12502d(0xc6)]==_0x12502d(0xf3)?_0x12502d(0x15c):_0x12502d(0xf3),_0x4f17c2=Math[_0x12502d(0xde)](_0x77af10[_0x12502d(0x117)])/_0x47cbf1):(_0x3799db=_0x77af10[_0x12502d(0xc6)],_0x4f17c2=Math[_0x12502d(0xde)](_0x77af10[_0x12502d(0x117)]));_0x2973b4=='limit'&&(config[_0x12502d(0xdc)]==_0x12502d(0x192)&&(_0x47cbf1=_0x3799db==_0x12502d(0xf3)?_0x1ab87e:_0x329abb),config['ordertype']==_0x12502d(0xd7)&&(_0x47cbf1=_0x3799db==_0x12502d(0xf3)?_0x329abb:_0x1ab87e));_0x4f17c2=formatResult(_0x4f17c2,0x8),_0x47cbf1=formatResult(_0x47cbf1,0x8);const _0x442d18=await exchange[_0x12502d(0x1ac)](_0x387aef,_0x2973b4,_0x3799db,_0x4f17c2,_0x47cbf1);lastOrders['push']({'orderId':_0x442d18['id'],'symbol':_0x387aef,'coin':_0x77af10['coin'],'side':_0x3799db,'reverse':_0x77af10[_0x12502d(0xe9)],'amount':_0x442d18[_0x12502d(0x188)],'filled':0x0,'price':_0x442d18[_0x12502d(0x17a)],'fee':_0x442d18['fee']});const _0x23c38a=_0x3799db=='sell'?config[_0x12502d(0x16c)]?String[_0x12502d(0x121)]('0x'+config[_0x12502d(0x16c)])+'\x20':'':config[_0x12502d(0xe8)]?String[_0x12502d(0x121)]('0x'+config[_0x12502d(0xe8)])+'\x20':'',_0x2b3d61=_0x2973b4=='market'?'Market':config[_0x12502d(0xdc)]==_0x12502d(0x192)?'Limit\x20(high-margin)':_0x12502d(0x110);if(_0x2973b4==_0x12502d(0xd3))logHistory(_0x12502d(0x19f),''+_0x23c38a+_0x2b3d61+_0x12502d(0xd6)+_0x387aef+'\x20'+_0x3799db+'\x20#'+formatResult(_0x442d18[_0x12502d(0xb9)],0x8)+'\x20@'+formatResult(_0x442d18[_0x12502d(0x17a)],0x8));else logHistory('order',''+_0x23c38a+_0x2b3d61+_0x12502d(0xd6)+_0x387aef+'\x20'+_0x3799db+'\x20#'+formatResult(_0x442d18[_0x12502d(0x188)],0x8)+'\x20@'+formatResult(_0x442d18[_0x12502d(0x17a)],0x8));let _0x25ebbe=currentCoins[_0x12502d(0x106)](_0x17955f=>_0x17955f[_0x12502d(0x14a)]==_0x77af10[_0x12502d(0x14a)]);_0x25ebbe['order']=!![];if(config['cooldown']!=0x0){let _0x320b27=null;if(cooldownTracker[_0x12502d(0x198)]==config[_0x12502d(0x183)]-0x1)_0x320b27=cooldownTracker[_0x12502d(0x1a7)]();const _0x352adf=getTimeStamp();cooldownTracker['push'](_0x352adf);if(_0x320b27){const _0x3a71c3=fns[_0x12502d(0x1ba)](new Date(_0x352adf),new Date(_0x320b27));if(_0x3a71c3<cooldownInterval){logHistory(_0x12502d(0x10d),'Executed\x20'+config[_0x12502d(0x183)]+_0x12502d(0x18e)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x12502d(0xef)),coolingDown=!![];break;}}}}catch(_0x3c8a44){if(_0x3c8a44[_0x12502d(0x12f)]()['includes'](_0x12502d(0x196)))logHistory(_0x12502d(0x10d),_0x12502d(0x189)+_0x387aef);else{if(_0x3c8a44['toString']()[_0x12502d(0x109)](_0x12502d(0x11b)))logHistory(_0x12502d(0x10d),_0x12502d(0x13f)+_0x387aef);else await handleError(_0x3c8a44,_0x12502d(0x128),_0x387aef);}}}allOrdersPlaced=!![];if(lastOrders[_0x12502d(0x198)]!=0x0){lockOrders=!![],validateOrdersState=_0x12502d(0x197),setTimeout(function(){validateOrders();},0x1388);const _0x2e3dfd=config[_0x12502d(0xdc)]==_0x12502d(0xd3)?validateOrderTimeout*0x3c*0x3e8:config[_0x12502d(0x173)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2508b7=_0x12502d;validateOrders(_0x2508b7(0x1c9));},_0x2e3dfd);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x12502d(0x17f),_0x12502d(0x104)));}else{if(coolingDown)!config[_0x12502d(0xa4)]&&logHistory(_0x12502d(0x10d),_0x12502d(0xd0));else lockOrders&&(!config[_0x12502d(0xa4)]&&(config[_0x12502d(0xdc)]=='market'?logHistory(_0x12502d(0x10d),_0x12502d(0xb4)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x44f19d=_0x20a1c6;let _0x4a6221;lockOrders=!![],validateOrdersState=_0x44f19d(0x12d),currentCoins[_0x44f19d(0xa9)](_0x1e37ff=>{const _0x43d998=_0x44f19d,_0x17af2a=allOpenOrders[_0x43d998(0x106)](_0x254230=>_0x254230[_0x43d998(0x111)]==_0x1e37ff[_0x43d998(0x111)]);_0x17af2a&&(lastOrders[_0x43d998(0xd5)]({'orderId':_0x17af2a['id'],'symbol':_0x1e37ff[_0x43d998(0x111)],'coin':_0x1e37ff['coin'],'side':_0x17af2a[_0x43d998(0xc6)],'reverse':_0x1e37ff[_0x43d998(0xe9)],'amount':_0x17af2a[_0x43d998(0x188)],'filled':0x0,'price':_0x17af2a[_0x43d998(0x17a)],'fee':_0x17af2a[_0x43d998(0x1cf)]}),_0x1e37ff[_0x43d998(0x19f)]=!![],_0x4a6221=_0x17af2a[_0x43d998(0x150)]);});const _0x4e5e6a=new Date()[_0x44f19d(0x9d)](),_0x2134fb=config[_0x44f19d(0xdc)]==_0x44f19d(0xd3)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4a6221+_0x2134fb>_0x4e5e6a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5b4190=_0x44f19d;validateOrders(_0x5b4190(0x1c9));},_0x4a6221+_0x2134fb-_0x4e5e6a);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x21216b=_0x20a1c6,_0x10d9e0=[_0x21216b(0x1c1),_0x21216b(0x154),'USDT'],_0x18e137=_0x10d9e0[_0x21216b(0x109)](config[_0x21216b(0x14b)])?0x2:0x8;let _0x8f9e52='';if(config[_0x21216b(0x1c2)])_0x8f9e52=config[_0x21216b(0xc2)]+_0x21216b(0x107);else _0x8f9e52=_0x21216b(0x168)+botID+'\x20portfolio:\x20\x0a\x0a';_0x8f9e52+=_0x21216b(0xf0),_0x8f9e52+=_0x21216b(0x126),_0x8f9e52+=_0x21216b(0xce),currentCoins[_0x21216b(0xa9)](_0xa0a3a6=>{const _0x5423d1=_0x21216b;_0x8f9e52+=_0xa0a3a6['coin'][_0x5423d1(0x164)](0x7)+'|\x20'+formatPad(_0xa0a3a6['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xa0a3a6[_0x5423d1(0xdf)],0x2,0x6)+'|\x20'+formatPad(_0xa0a3a6[_0x5423d1(0xcd)]*0x64,0x2,0x6)+'\x0a';}),_0x8f9e52+=_0x21216b(0x15d),process[_0x21216b(0x16a)]({'telegrammsg':_0x8f9e52},_0x1e2dbd=>{});}function _0x5336(_0x4622b3,_0x447889){const _0x2e4328=_0x3ee0();return _0x5336=function(_0x50196b,_0x15d20f){_0x50196b=_0x50196b-0x9d;let _0x3ee03b=_0x2e4328[_0x50196b];return _0x3ee03b;},_0x5336(_0x4622b3,_0x447889);}function formatPad(_0xf95daf,_0x4d7d81,_0x346f5a){const _0x186dd0=_0x20a1c6,_0x1cb47b=formatResultString(_0xf95daf,_0x4d7d81);return _0x1cb47b?_0x1cb47b[_0x186dd0(0x159)](_0x346f5a):''[_0x186dd0(0x159)](_0x346f5a);}function logHistory(_0x1f5336,_0x585024,_0xfce90e=''){const _0xbced41=_0x20a1c6;let _0x3ea6b2={'time':getTimeStamp(),'type':_0x1f5336,'event':_0x585024};dbLogs[_0xbced41(0xe4)](_0xbced41(0xb5))['push'](_0x3ea6b2)[_0xbced41(0x193)]();if(_0xfce90e=='')_0xfce90e=_0x585024;proxyEmit('event',{'log':_0x3ea6b2,'summary':_0xfce90e}),process[_0xbced41(0x16a)]({'telegram':{..._0x3ea6b2,'botname':config[_0xbced41(0xc2)],'showname':config[_0xbced41(0x1c2)]}},_0x50f157=>{}),logging(''+_0x3ea6b2[_0xbced41(0x1bc)]);}function emitHistory(_0x2d84f8={}){const _0x45d7aa=_0x20a1c6;Object[_0x45d7aa(0x10e)](_0x2d84f8)[_0x45d7aa(0x198)]==0x0&&(_0x2d84f8={'type':[_0x45d7aa(0x19f),_0x45d7aa(0x1bc)],'event':'','page':0x1});if(_0x2d84f8['type'][_0x45d7aa(0x109)](_0x45d7aa(0x1bc)))_0x2d84f8[_0x45d7aa(0x11f)]['splice'](_0x2d84f8['type'][_0x45d7aa(0x1b7)]('event'),0x1,'error','success');if(dbLogs[_0x45d7aa(0xf6)](_0x45d7aa(0xb5))[_0x45d7aa(0x100)]()){let _0x17ad31=dbLogs[_0x45d7aa(0xe4)]('logs')[_0x45d7aa(0xcc)](_0x1fc9e5=>{const _0x10b116=_0x45d7aa;if(_0x2d84f8[_0x10b116(0x11f)]['length']==0x0)return![];else return _0x2d84f8[_0x10b116(0x11f)][_0x10b116(0x109)](_0x1fc9e5[_0x10b116(0x11f)]);})[_0x45d7aa(0xcc)](_0x49cc5c=>{const _0x4924df=_0x45d7aa;if(_0x2d84f8[_0x4924df(0x1bc)]=='')return!![];else return _0x49cc5c['event'][_0x4924df(0x185)]()[_0x4924df(0x109)](_0x2d84f8[_0x4924df(0x1bc)]['toLowerCase']());})[_0x45d7aa(0xbf)](_0x45d7aa(0xb1)),_0x46b544=_0x17ad31[_0x45d7aa(0x100)]()[_0x45d7aa(0x198)];_0x17ad31=_0x17ad31['reverse']()['slice']((_0x2d84f8[_0x45d7aa(0x9e)]-0x1)*logPageSize,_0x2d84f8['page']*logPageSize-0x1)[_0x45d7aa(0xe9)]()['value'](),proxyEmit(_0x45d7aa(0x112),{'logs':_0x17ad31,'total':_0x46b544});}else proxyEmit(_0x45d7aa(0x112),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x28844a){const _0x2023c6=_0x20a1c6;if(dbLogs[_0x2023c6(0xf6)]('logs')[_0x2023c6(0x100)]()){const _0x9565ca=dbLogs[_0x2023c6(0xe4)](_0x2023c6(0xb5))[_0x2023c6(0xbf)](_0x2023c6(0xb1))[_0x2023c6(0xcc)](_0x5419ca=>{const _0x19ac2c=_0x2023c6;return _0x5419ca['type']==_0x19ac2c(0x19f);})[_0x2023c6(0x100)]();dbLogs[_0x2023c6(0xe4)](_0x2023c6(0xb5))[_0x2023c6(0x1b1)]()[_0x2023c6(0x193)](),dbLogs[_0x2023c6(0xe4)](_0x2023c6(0xb5))[_0x2023c6(0x18c)](_0x9565ca)[_0x2023c6(0x193)](),emitHistory(_0x28844a);}}async function pauseBot(_0x35424f=''){const _0x691ac0=_0x20a1c6,_0x3445a9=new Date()[_0x691ac0(0x9d)]();if(!lastBotPause)lastBotPause=new Date()[_0x691ac0(0x9d)](),consecutivePauses=0x1;else{if(_0x3445a9-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x691ac0(0x16a)]({'stop':_0x691ac0(0x15e)},_0x3413d9=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x35424f)_0x35424f+='\x20|\x20';logHistory(_0x691ac0(0x10d),_0x35424f+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x691ac0(0x135)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x3d02ba=_0x20a1c6;process['send']({'stop':_0x3d02ba(0x1b5)},_0x28e686=>{}),await sleep(0x7d0);}async function handleError(_0x39db00,_0x3a6b85,_0x4db95e=''){const _0x1b0a37=_0x20a1c6;if(_0x39db00[_0x1b0a37(0x12f)]()['includes'](_0x1b0a37(0x13c)))await pauseBot('Binance\x20API\x20blocked');else{if(_0x39db00[_0x1b0a37(0x12f)]()[_0x1b0a37(0x109)]('ExchangeNotAvailable'))await pauseBot(_0x1b0a37(0x161));else{if(_0x39db00[_0x1b0a37(0x12f)]()[_0x1b0a37(0x109)]('RequestTimeout'))await pauseBot(_0x1b0a37(0x151));else{if(_0x39db00[_0x1b0a37(0x12f)]()[_0x1b0a37(0x109)]('API-key\x20format\x20invalid'))logHistory('error',_0x3a6b85+_0x1b0a37(0x1a0)),logHistory(_0x1b0a37(0x10d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x39db00['toString']()[_0x1b0a37(0x109)](_0x1b0a37(0x158)))logHistory(_0x1b0a37(0x10d),_0x3a6b85+_0x1b0a37(0x1ca)),logHistory(_0x1b0a37(0x10d),_0x1b0a37(0xfe)),await killBot();else{if(_0x39db00[_0x1b0a37(0x12f)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x1b0a37(0x10d),_0x3a6b85+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory('error',_0x1b0a37(0xfe)),await killBot();else{if(_0x39db00[_0x1b0a37(0x12f)]()[_0x1b0a37(0x109)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x1b0a37(0x10d),_0x3a6b85+_0x1b0a37(0x156)),logHistory(_0x1b0a37(0x10d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x39db00['toString']()[_0x1b0a37(0x109)](_0x1b0a37(0x1aa)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process[_0x1b0a37(0x16a)]({'stop':_0x1b0a37(0x15e)},_0x35283d=>{});else _0x39db00[_0x1b0a37(0x12f)]()[_0x1b0a37(0x109)](_0x1b0a37(0xb8))?logHistory(_0x1b0a37(0x10d),_0x3a6b85+_0x1b0a37(0x17d)+_0x4db95e):(logging(_0x3a6b85+_0x1b0a37(0x105),_0x39db00),await pauseBot(_0x1b0a37(0x1ad)));}}}}}}}}function formatResult(_0x2cd37d,_0x3541c3){const _0x34638d=_0x20a1c6;return parseFloat(_0x2cd37d[_0x34638d(0x19d)](_0x3541c3));}function formatResultTruncate(_0x586a91,_0x36ed85){let _0x3aab1a=formatResultString(_0x586a91,0xa),_0x3cf82d=_0x3aab1a['indexOf']('.');return _0x3cf82d!=-0x1&&(_0x3aab1a=_0x3aab1a['slice'](0x0,_0x3cf82d+_0x36ed85+0x1)),Number(_0x3aab1a);}function formatResultString(_0x131dc0,_0x2527b3){const _0x419f3b=_0x20a1c6;let _0x4b3244;if(!(''+_0x131dc0)[_0x419f3b(0x109)]('e'))_0x4b3244=+(Math[_0x419f3b(0x172)](_0x131dc0+'e+'+_0x2527b3)+'e-'+_0x2527b3);else{let _0x35c2bb=(''+_0x131dc0)[_0x419f3b(0x14f)]('e'),_0x37b8ac='';+_0x35c2bb[0x1]+_0x2527b3>0x0&&(_0x37b8ac='+'),_0x4b3244=+(Math[_0x419f3b(0x172)](+_0x35c2bb[0x0]+'e'+_0x37b8ac+(+_0x35c2bb[0x1]+_0x2527b3))+'e-'+_0x2527b3);}return Number(_0x4b3244)[_0x419f3b(0x19d)](_0x2527b3);}function logging(_0x1027dc,_0x22593d=''){const _0x44e716=_0x20a1c6;if(config[_0x44e716(0x1c2)])console['log'](getTimeStamp()+':\x20'+config['botname']+_0x44e716(0xa6)+_0x1027dc,_0x22593d);else console[_0x44e716(0xb2)](getTimeStamp()+_0x44e716(0xb7)+botID+_0x44e716(0xa6)+_0x1027dc,_0x22593d);}function getServerTime(){const _0x39c7f0=_0x20a1c6,_0x4a8d14=new Date();return _0x4a8d14[_0x39c7f0(0x19c)]()+'/'+(_0x4a8d14[_0x39c7f0(0xa1)]()+0x1)['toString']()[_0x39c7f0(0x159)](0x2,'0')+'/'+_0x4a8d14[_0x39c7f0(0xc3)]()[_0x39c7f0(0x12f)]()[_0x39c7f0(0x159)](0x2,'0')+'\x20'+_0x4a8d14[_0x39c7f0(0x124)]()[_0x39c7f0(0x12f)]()[_0x39c7f0(0x159)](0x2,'0')+':'+_0x4a8d14[_0x39c7f0(0x155)]()[_0x39c7f0(0x12f)]()[_0x39c7f0(0x159)](0x2,'0')+':'+_0x4a8d14[_0x39c7f0(0x194)]()[_0x39c7f0(0x12f)]()[_0x39c7f0(0x159)](0x2,'0');}function getTimeStamp(){const _0xaf9fde=_0x20a1c6,_0x36cba9=shiftedTime();return _0x36cba9[_0xaf9fde(0x19c)]()+'/'+(_0x36cba9[_0xaf9fde(0xa1)]()+0x1)[_0xaf9fde(0x12f)]()['padStart'](0x2,'0')+'/'+_0x36cba9[_0xaf9fde(0xc3)]()['toString']()[_0xaf9fde(0x159)](0x2,'0')+'\x20'+_0x36cba9[_0xaf9fde(0x124)]()['toString']()[_0xaf9fde(0x159)](0x2,'0')+':'+_0x36cba9[_0xaf9fde(0x155)]()[_0xaf9fde(0x12f)]()['padStart'](0x2,'0')+':'+_0x36cba9[_0xaf9fde(0x194)]()[_0xaf9fde(0x12f)]()['padStart'](0x2,'0');}function getDate(){const _0x4d56fd=_0x20a1c6,_0x2feec3=shiftedTime();return _0x2feec3[_0x4d56fd(0x19c)]()+'/'+(_0x2feec3[_0x4d56fd(0xa1)]()+0x1)[_0x4d56fd(0x12f)]()[_0x4d56fd(0x159)](0x2,'0')+'/'+_0x2feec3[_0x4d56fd(0xc3)]()['toString']()[_0x4d56fd(0x159)](0x2,'0');}function getHour(){const _0x2ce6f6=_0x20a1c6,_0x1e0b15=shiftedTime();return _0x1e0b15[_0x2ce6f6(0x124)]()[_0x2ce6f6(0x12f)]()['padStart'](0x2,'0');}function sleep(_0x5a533c){return new Promise(_0x213d1c=>setTimeout(_0x213d1c,_0x5a533c));}function shiftedTime(){const _0x1ab863=_0x20a1c6,_0x538c5a=new Date();let _0x5d27f0=_0x538c5a;if(config&&config[_0x1ab863(0x191)]!==0x0)_0x5d27f0=fns[_0x1ab863(0x146)](_0x538c5a,{'hours':config[_0x1ab863(0x191)]});return _0x5d27f0;}function _0x3ee0(){const _0x3c10ba=['timestamp','Binance\x20not\x20responding','data','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','BUSD','getMinutes','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','formattedMessage','AuthenticationError','padStart','privateKey','cancelOrder','sell','</pre>','restart','portfolio','startdate','Binance\x20not\x20available\x20(2)','HOT/BTC','2.5.0','padEnd','last','commissionAsset','isArray','Bot\x20','running','send','performance','emojisell','\x20-\x20bot\x20not\x20started','RSA-OAEP','slice','Order(s)\x20validated\x20-\x20','hybrid-crypto-js','round','timeout','defaults','cancel','offset','HOT/EUR','progress','DAI/','price','changes','382361tbjLhu','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','162470QGjQfJ','success','coins','-results.json','./config/','cooldown','lowdb/adapters/FileSync','toLowerCase','orderId','Error:\x20Invalid\x20argument\x20','amount','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','date','NANO/','assign','Binance\x20not\x20available\x20(1)','\x20orders\x20in\x20less\x20than\x20','threshold','close','timeshift','limit-high','write','getSeconds','distribution','MIN_NOTIONAL','initial','length','initws()','BNB/','Manual\x20balancing\x20required:\x20','getFullYear','toFixed','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','order','\x20|\x20Binance\x20API\x20key\x20invalid','splice','yyyy/MM/dd','48dTJGoL','sort','subscribeSpotKline','cumulativeQuoteAssetTransactedQty','shift','fetchBalance','bot','InvalidNonce','Order(s)\x20filled\x20-\x20','createOrder','Unknown\x20error\x20occured','liquidity','loadSymbols()','set','remove','recreate','loadMarkets','min','kill','stringify','indexOf','binanceus','bid','differenceInSeconds','ask','event','No\x20more\x20open\x20orders\x20-\x20','************','exit','startnumber','EUR','showname','join','wsKey','wss://stream.binance.com:9443',',\x20must\x20be\x20a\x203\x20digit\x20number','balances','storeHeadless','final','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','ticker','args','sha256','fee','getTime','page','exchange','yyyy-MM-dd\x27T\x27HH:mm:ss','getMonth','eventType','toggleBotMode','headless','replace','\x20>\x20','change24h','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','forEach','apiSecret','search','fetchTickers','message','mkdirSync','spot','datetime','time','log','findIndex','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','logs','1173305UpbeFP',':\x20Bot\x20','InsufficientFunds','filled','coin-loading-progress','OrderNotFound','\x20-\x20','deleteHistoryAlerts','BTC','sortBy','-events.json','FILLED','botname','getDate','136qybxqI','existsSync','side','number','cancelOrders()','cost','XEM/BUSD','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','filter','delta','-------------------------------\x0a','argv','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','exec','settings','market','./version.json','push','\x20order:\x20','limit-low','configuration-stored','-config.json','initclient','lowdb','ordertype','map','abs','target','ETH','precision','total','1830XcpsNd','get','starting-balances','eventTime','eur','emojibuy','reverse','enabled','\x20has\x20a\x2024h\x20drop\x20of\x20','180vbSmSX','recreateCoinResults()','valid','\x20hour','<pre>','max','-performance.json','buy','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','wss://stream.binance.us:9443','has','orderStatus','\x20minutes\x20-\x20','currency','YOYOW/','fetchClosedOrders','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','2304662GCxXTV','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','359868ouQqXu','value','startprice','2.3.5','accumulatedQuantity','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20|\x20Error\x20details:\x20','find','\x20portfolio:\x20\x0a\x0a','binance','includes','usd','apiKey','getCoins()','error','keys','constructor','Limit\x20(low-margin)','symbol','event-history','limits','realized','fees','(((.+)+)+)+$','trade','Order\x20filled:\x20','getPortfolio','cloneDeep','Invalid\x20quantity','change','entries','function','type','bot-','fromCodePoint','fetchOpenOrders','emitHistory','getHours','secure','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','commission','placeOrder()','excluded','breakeven','subscribeSymbol24hrTicker','387TdbMRs','ongoing','sells','toString','USDT','/USDT','subscribeSpotUserDataStream','WebSockets(',')\x20|\x20Error\x20details:\x20','\x20minutes','1158762Fiqsry','executionReport','cancelLoading','bb-settings.json','Crypt','remainingSymbols','DDoSProtection','no\x20open\x20orders','parse','Order\x20amount\x20is\x20invalid:\x20','outboundAccountPosition','configuration','BNB','isEqual','8958ZLMwtU','buys','add','symbols','version','decrypt','coin','basecoin','priceChangePercent','parseISO','kline','split'];_0x3ee0=function(){return _0x3c10ba;};return _0x3ee0();}