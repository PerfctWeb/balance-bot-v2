const _0x433f23=_0x330c;(function(_0x659020,_0x1d717c){const _0x32cc41=_0x330c,_0x2a74e6=_0x659020();while(!![]){try{const _0x1628a3=-parseInt(_0x32cc41(0x197))/0x1*(-parseInt(_0x32cc41(0x1f3))/0x2)+parseInt(_0x32cc41(0x26e))/0x3*(-parseInt(_0x32cc41(0x216))/0x4)+-parseInt(_0x32cc41(0x1b1))/0x5*(-parseInt(_0x32cc41(0x1cb))/0x6)+-parseInt(_0x32cc41(0x1a1))/0x7*(-parseInt(_0x32cc41(0x211))/0x8)+parseInt(_0x32cc41(0x1f6))/0x9+-parseInt(_0x32cc41(0x1b6))/0xa+-parseInt(_0x32cc41(0x173))/0xb;if(_0x1628a3===_0x1d717c)break;else _0x2a74e6['push'](_0x2a74e6['shift']());}catch(_0x235e44){_0x2a74e6['push'](_0x2a74e6['shift']());}}}(_0x40e3,0xf325e));const _0x520b3c=function(){let _0x2d3db3=!![];return function(_0x131138,_0x4a5bd8){const _0x40782f=_0x2d3db3?function(){const _0x595dd3=_0x330c;if(_0x4a5bd8){const _0x4c1695=_0x4a5bd8[_0x595dd3(0x22c)](_0x131138,arguments);return _0x4a5bd8=null,_0x4c1695;}}:function(){};return _0x2d3db3=![],_0x40782f;};}(),_0x19eaf1=_0x520b3c(this,function(){const _0xffca36=_0x330c;return _0x19eaf1[_0xffca36(0x1e9)]()['search'](_0xffca36(0x1e5))[_0xffca36(0x1e9)]()[_0xffca36(0x1c8)](_0x19eaf1)['search']('(((.+)+)+)+$');});_0x19eaf1();'use strict';const ccxt=require('ccxt'),low=require(_0x433f23(0x27d)),FileSync=require(_0x433f23(0x1ed)),fs=require('fs'),fns=require(_0x433f23(0x261)),{WebsocketClient,DefaultLogger}=require(_0x433f23(0x182)),Crypt=require('hybrid-crypto-js')[_0x433f23(0x21e)];let exchange,wsClient;global[_0x433f23(0x26a)]={};function _0x330c(_0x2b933c,_0x41383f){const _0x1164d2=_0x40e3();return _0x330c=function(_0x19eaf1,_0x520b3c){_0x19eaf1=_0x19eaf1-0x171;let _0x40e303=_0x1164d2[_0x19eaf1];return _0x40e303;},_0x330c(_0x2b933c,_0x41383f);}let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x433f23(0x193))['version'],botID=process[_0x433f23(0x209)][0x2]||_0x433f23(0x213),pattern=/^[0-9]{3}$/;if(!pattern[_0x433f23(0x176)](botID))return console[_0x433f23(0x1de)]('Error:\x20Invalid\x20argument\x20'+botID+_0x433f23(0x177)),process[_0x433f23(0x22e)](0x1);const userID=process[_0x433f23(0x209)][0x3]||'',configpath=userID?_0x433f23(0x27e)+userID+'/':_0x433f23(0x27e);!fs['existsSync'](configpath)&&fs[_0x433f23(0x21b)](configpath);const configfile=configpath+_0x433f23(0x1df)+botID+'-config.json',logfile=configpath+_0x433f23(0x1df)+botID+_0x433f23(0x1af),performancefile=configpath+_0x433f23(0x1df)+botID+_0x433f23(0x22b),coinresultsfile=configpath+'bot-'+botID+_0x433f23(0x1f7),settingsfile=configpath+_0x433f23(0x1d9),securefile=configpath+_0x433f23(0x195),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x433f23(0x1f0)]({'logs':[]})[_0x433f23(0x20d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x433f23(0x1f0)]({'data':[]})[_0x433f23(0x20d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x433f23(0x1f0)]({'bot':[]})[_0x433f23(0x20d)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x433f23(0x1f0)]({'coins':[]})[_0x433f23(0x20d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x433f23(0x18e),'symbol':_0x433f23(0x1b7)},'usd':{'coin':_0x433f23(0x219),'symbol':_0x433f23(0x223)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5b5673)=>{},'debug':(..._0x17c25f)=>{},'notice':(..._0x31f9a9)=>{},'info':(..._0x32494d)=>{},'warning':(..._0x5745a5)=>{},'error':async function(..._0x46677b){const _0x1bd714=_0x433f23,_0x3fecc1=new Date()[_0x1bd714(0x1b2)]();if(!lastErrorShown||_0x3fecc1-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x1bd714(0x17d),'WebSockets('+consecutivePauses+_0x1bd714(0x21f));let _0x57fa93='';if(_0x46677b[0x0])_0x57fa93+=_0x46677b[0x0];if(_0x46677b[0x1]&&_0x46677b[0x1][_0x1bd714(0x17d)]&&_0x46677b[0x1][_0x1bd714(0x17d)][_0x1bd714(0x25d)])_0x57fa93+='\x20-\x20'+_0x46677b[0x1][_0x1bd714(0x17d)]['message'];logging(_0x1bd714(0x1ce)+consecutivePauses+_0x1bd714(0x1bf),''+_0x57fa93),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x433f23(0x24d),'rsaStandard':_0x433f23(0x1c4)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x433f23(0x188)]!=config[_0x433f23(0x188)]&&updateTimeshift(settings['timeshift']);process['send']({'started':'running'},_0x4ad1b7=>{}),initializeProcessListeners();function proxyEmit(_0xddd511,_0x95e236=null){const _0x244cdf=_0x433f23;process[_0x244cdf(0x172)]({'function':_0xddd511,'args':_0x95e236},_0x2d87d8=>{});}function initializeProcessListeners(){const _0x538dfa=_0x433f23;process['on'](_0x538dfa(0x25d),_0x174dd1=>{const _0x36a419=_0x538dfa;switch(Object['keys'](_0x174dd1)[0x0]){case _0x36a419(0x188):_0x174dd1[_0x36a419(0x188)]!=undefined&&(settings[_0x36a419(0x188)]=_0x174dd1[_0x36a419(0x188)],updateTimeshift(settings[_0x36a419(0x188)]));break;case _0x36a419(0x1d0):switch(_0x174dd1[_0x36a419(0x1d0)]){case _0x36a419(0x1cf):initclient();break;case'emitHistory':emitHistory(_0x174dd1['args']);break;case'getPortfolio':getPortfolio(_0x174dd1[_0x36a419(0x1fa)]);break;case'storeConfiguration':storeConfiguration(_0x174dd1[_0x36a419(0x1fa)]);break;case _0x36a419(0x1b4):storeHeadless(_0x174dd1[_0x36a419(0x1fa)]);break;case'getStartingBalances':getStartingBalances();break;case'placeOrder':placeOrder(_0x174dd1['args']);break;case _0x36a419(0x246):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x5f58e6=_0x433f23;if(pidBalances)clearTimeout(pidBalances);if(config[_0x5f58e6(0x1a5)]!=''){await initExchange(config[_0x5f58e6(0x1a5)],config['apiSecret']);let _0x1609f8=await loadSymbols();_0x1609f8&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x25b2b1,_0x3d5a78){const _0x2df19c=_0x433f23,_0x4453fb=ccxt[config[_0x2df19c(0x206)]];let _0x51fecb;switch(config[_0x2df19c(0x206)]){case _0x2df19c(0x182):_0x51fecb=_0x2df19c(0x1ae);break;case _0x2df19c(0x1c1):_0x51fecb=_0x2df19c(0x198);break;default:_0x51fecb=_0x2df19c(0x1ae);}exchange=new _0x4453fb({'apiKey':_0x25b2b1,'secret':_0x3d5a78,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x25b2b1,'api_secret':_0x3d5a78,'beautify':!![],'wsUrl':_0x51fecb},logger),config[_0x2df19c(0x206)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x2df19c(0x1d1),'symbol':_0x2df19c(0x1ee)},'usd':{'coin':_0x2df19c(0x219),'symbol':_0x2df19c(0x223)}});}async function loadSymbols(){const _0xe1ae56=_0x433f23;let _0x37358b;try{markets=await exchange[_0xe1ae56(0x264)]();const _0x3b1727=[_0xe1ae56(0x243),_0xe1ae56(0x273),_0xe1ae56(0x18d)];allSymbols=exchange['symbols'][_0xe1ae56(0x240)](_0x12d1f8=>{const _0x5e39d4=_0xe1ae56;let _0x3a4ec9=![];return _0x3b1727[_0x5e39d4(0x1e3)](_0xcd492c=>{const _0x456a56=_0x5e39d4;if(_0x12d1f8[_0x456a56(0x237)](_0xcd492c))_0x3a4ec9=!![];}),!_0x3a4ec9;}),_0x37358b=!![];}catch(_0x49b7d7){await handleError(_0x49b7d7,'loadSymbols()'),_0x37358b=![];}return _0x37358b;}async function initbot(){const _0x249a14=_0x433f23;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x10e754=dbCoinResults[_0x249a14(0x178)](_0x249a14(0x23d))[_0x249a14(0x1a0)]();if(_0x10e754['length']==0x0)await resetCoinResults();}async function initclient(){const _0xf8aa9b=_0x433f23;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xf8aa9b(0x23a),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x48883e=_0x433f23;wsinitialized=![];ws1&&(ws1[_0x48883e(0x1e3)](_0x54996f=>{try{wsClient['closeWs'](_0x54996f);}catch(_0x39b6fc){}}),ws1=[]);if(ws2){try{wsClient[_0x48883e(0x1c7)](ws2);}catch(_0x4fb1c){}ws2=null;}}async function initws(){const _0x241608=_0x433f23;cleanws();let _0x245fc6=[];currentCoins['forEach'](_0x304d3c=>{const _0x5b4a4d=_0x330c;if(_0x304d3c['coin']!=config[_0x5b4a4d(0x1ad)])_0x245fc6[_0x5b4a4d(0x225)](noslash(_0x304d3c['symbol']));});if(!_0x245fc6[_0x241608(0x237)](stablecoins[_0x241608(0x174)][_0x241608(0x1c3)]))_0x245fc6['push'](stablecoins[_0x241608(0x174)]['coin']);if(!_0x245fc6['includes'](stablecoins['usd']['coin']))_0x245fc6[_0x241608(0x225)](stablecoins['usd']['coin']);if(!_0x245fc6[_0x241608(0x237)](_0x241608(0x183)+config[_0x241608(0x1ad)]))_0x245fc6[_0x241608(0x225)]('BNB'+config[_0x241608(0x1ad)]);try{_0x245fc6['forEach']((_0x3254c2,_0x5dce1e)=>{ws1[_0x5dce1e]=wsClient['subscribeSpotKline'](_0x3254c2,'1m');}),ws2=wsClient[_0x241608(0x20c)](),wsClient['on'](_0x241608(0x18c),_0x981075=>{const _0x2acf1f=_0x241608;if(!Array[_0x2acf1f(0x25b)](_0x981075)&&!_0x981075['wsKey'][_0x2acf1f(0x237)]('userData')){if(_0x981075[_0x2acf1f(0x229)]===_0x2acf1f(0x19d)){global[_0x2acf1f(0x26a)][_0x981075[_0x2acf1f(0x19d)][_0x2acf1f(0x271)]]=_0x981075[_0x2acf1f(0x19d)][_0x2acf1f(0x1fd)];return;}}else{if(!Array[_0x2acf1f(0x25b)](_0x981075)&&_0x981075[_0x2acf1f(0x189)][_0x2acf1f(0x237)]('userData')){if(_0x981075[_0x2acf1f(0x17c)]['includes']('spot')){updateNumberCoins(_0x981075);return;}}}}),wsClient['on'](_0x241608(0x1ab),async _0x623d75=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x5c76a0){await handleError(_0x5c76a0,_0x241608(0x1b8));}let _0x4d5110,_0x47ab8d=0x0;loading['remainingSymbols']=[];let _0x1f10e3=0x0;currentCoins[_0x241608(0x1e3)](_0x4595c0=>{const _0x2481bd=_0x241608;if(_0x4595c0[_0x2481bd(0x1c3)]!=config[_0x2481bd(0x1ad)])loading['remainingSymbols'][_0x2481bd(0x225)](_0x4595c0['symbol']);}),loadingCanceled=![];while(_0x4d5110!=currentCoins[_0x241608(0x18a)]-0x1){_0x4d5110=0x0,currentCoins[_0x241608(0x1e3)](_0x34a309=>{const _0xd81beb=_0x241608;_0x34a309[_0xd81beb(0x1c3)]!=config[_0xd81beb(0x1ad)]&&global[_0xd81beb(0x26a)][noslash(_0x34a309[_0xd81beb(0x271)])]&&(loading[_0xd81beb(0x196)]=loading[_0xd81beb(0x196)][_0xd81beb(0x240)](_0xa87573=>_0xa87573!=_0x34a309['symbol']),_0x4d5110++);}),loading['progress']=Math['round'](_0x4d5110/(currentCoins['length']-0x1)*0x64);_0x1f10e3>0x1e*0x5&&(loading[_0x241608(0x181)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x241608(0x1a2)]=!![],emitLoadingProgress();break;}else _0x4d5110!=_0x47ab8d&&(_0x47ab8d=_0x4d5110,emitLoadingProgress()),_0x1f10e3++,await sleep(0xc8);}if(_0x4d5110==currentCoins[_0x241608(0x18a)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0xb25168=_0x433f23;proxyEmit(_0xb25168(0x1b5),loading);}async function getFiat(){const _0xe2f0f1=_0x433f23;let _0x3b68d1=0x0,_0x43b94c=0x0;try{_0x3b68d1=global[_0xe2f0f1(0x26a)][stablecoins[_0xe2f0f1(0x174)][_0xe2f0f1(0x1c3)]],_0x43b94c=global[_0xe2f0f1(0x26a)][stablecoins[_0xe2f0f1(0x1f5)][_0xe2f0f1(0x1c3)]];}catch(_0x51fec5){await handleError(_0x51fec5,_0xe2f0f1(0x23f));}return{'eur':Number(_0x3b68d1),'usd':Number(_0x43b94c)};}async function setStartDatePerformance(_0x323b19){const _0x306bf3=_0x433f23,_0x9f6916=fns[_0x306bf3(0x214)](new Date(_0x323b19[_0x306bf3(0x230)]),_0x306bf3(0x22a));let _0x2fe5e4=[];_0x2fe5e4[stablecoins[_0x306bf3(0x174)][_0x306bf3(0x1c3)]]=await getCloses(stablecoins[_0x306bf3(0x174)][_0x306bf3(0x271)],new Date(_0x323b19['startdate']),0x1),_0x2fe5e4[stablecoins['usd'][_0x306bf3(0x1c3)]]=await getCloses(stablecoins[_0x306bf3(0x1f5)][_0x306bf3(0x271)],new Date(_0x323b19[_0x306bf3(0x230)]),0x1);let _0x365ba4,_0x5cf780=[];_0x323b19[_0x306bf3(0x190)][_0x306bf3(0x1e3)](_0x51377a=>{const _0x4732d4=_0x306bf3;!_0x51377a[_0x4732d4(0x1a4)]&&_0x5cf780[_0x4732d4(0x225)]({'coin':_0x51377a[_0x4732d4(0x1c3)],'number':_0x51377a['startnumber'],'price':_0x51377a[_0x4732d4(0x1d5)]});}),_0x365ba4={'date':_0x9f6916,'eur':_0x2fe5e4[stablecoins['eur']['coin']][0x0],'usd':_0x2fe5e4[stablecoins[_0x306bf3(0x1f5)]['coin']][0x0],'coins':_0x5cf780};let _0x913c5=dbPerformance[_0x306bf3(0x178)](_0x306bf3(0x20f))['find']({'date':_0x9f6916})[_0x306bf3(0x1a0)]();_0x913c5?dbPerformance[_0x306bf3(0x178)](_0x306bf3(0x20f))[_0x306bf3(0x19a)]({'date':_0x9f6916})[_0x306bf3(0x26c)](_0x365ba4)[_0x306bf3(0x20d)]():dbPerformance['get'](_0x306bf3(0x20f))['push'](_0x365ba4)[_0x306bf3(0x20d)](),_0x913c5=dbPerformance[_0x306bf3(0x178)]('data')['sortBy']('date')['value'](),_0x913c5[_0x306bf3(0x1e3)](_0x35574e=>{const _0x120070=_0x306bf3;_0x35574e[_0x120070(0x281)]<_0x9f6916&&dbPerformance[_0x120070(0x178)]('data')[_0x120070(0x1f8)]({'date':_0x35574e[_0x120070(0x281)]})[_0x120070(0x20d)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x52e484){const _0x3335ac=_0x433f23;let _0x1038e2,_0x142144=[];logHistory(_0x3335ac(0x1ca),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x52e484['portfolio'][_0x3335ac(0x1e3)](_0x4d47aa=>{const _0x202785=_0x3335ac;if(_0x4d47aa[_0x202785(0x1c3)]!=config[_0x202785(0x1ad)]&&!_0x4d47aa[_0x202785(0x1a4)])_0x142144[_0x202785(0x225)]({'coin':_0x4d47aa['coin'],'symbol':_0x4d47aa[_0x202785(0x271)]});});let _0x3fb461=[];try{const _0x2afa94=fns[_0x3335ac(0x214)](fns[_0x3335ac(0x21c)](_0x52e484[_0x3335ac(0x230)][_0x3335ac(0x212)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4de266 of _0x142144){if(_0x4de266['coin']!=config[_0x3335ac(0x1ad)])_0x1038e2=await exchange[_0x3335ac(0x1bc)](_0x4de266[_0x3335ac(0x271)],Date[_0x3335ac(0x1d7)](_0x2afa94));_0x1038e2[_0x3335ac(0x1e3)](_0x7263b9=>{const _0x24406a=_0x3335ac,_0x532841=_0x4de266['symbol']['includes'](config[_0x24406a(0x1ad)]+'/'),_0x229b81=fns['format'](fns[_0x24406a(0x21c)](_0x7263b9[_0x24406a(0x1db)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x423eba=fns[_0x24406a(0x214)](fns[_0x24406a(0x21c)](_0x7263b9[_0x24406a(0x1db)]),_0x24406a(0x22a));let _0x131fa9;if(_0x7263b9[_0x24406a(0x179)]==_0x24406a(0x207)&&_0x532841==![])_0x131fa9=_0x7263b9[_0x24406a(0x1c0)];if(_0x7263b9['side']==_0x24406a(0x207)&&_0x532841==!![])_0x131fa9=-_0x7263b9[_0x24406a(0x1c0)]*_0x7263b9['price'];if(_0x7263b9['side']=='sell'&&_0x532841==![])_0x131fa9=-_0x7263b9[_0x24406a(0x1c0)];if(_0x7263b9[_0x24406a(0x179)]==_0x24406a(0x17f)&&_0x532841==!![])_0x131fa9=_0x7263b9['amount']*_0x7263b9[_0x24406a(0x19b)];_0x3fb461[_0x24406a(0x225)]({'timestamp':_0x229b81,'date':_0x423eba,'coin':_0x4de266[_0x24406a(0x1c3)],'symbol':_0x4de266[_0x24406a(0x271)],'type':_0x7263b9[_0x24406a(0x25e)],'side':_0x7263b9[_0x24406a(0x179)],'reverse':_0x532841,'amount':formatResult(_0x7263b9[_0x24406a(0x1ba)],0x8),'filled':formatResult(_0x7263b9[_0x24406a(0x1ba)],0x8),'coinamount':formatResult(_0x131fa9,0x8),'price':formatResult(_0x7263b9['price'],0x8)});let _0x1b1e47;if(_0x7263b9[_0x24406a(0x179)]==_0x24406a(0x207)&&_0x532841==![])_0x1b1e47=-_0x7263b9[_0x24406a(0x1c0)]*_0x7263b9[_0x24406a(0x19b)];if(_0x7263b9['side']=='buy'&&_0x532841==!![])_0x1b1e47=_0x7263b9[_0x24406a(0x1c0)];if(_0x7263b9[_0x24406a(0x179)]=='sell'&&_0x532841==![])_0x1b1e47=_0x7263b9[_0x24406a(0x1c0)]*_0x7263b9[_0x24406a(0x19b)];if(_0x7263b9[_0x24406a(0x179)]==_0x24406a(0x17f)&&_0x532841==!![])_0x1b1e47=-_0x7263b9[_0x24406a(0x1c0)];_0x3fb461['push']({'date':_0x423eba,'coin':config[_0x24406a(0x1ad)],'coinamount':formatResult(_0x1b1e47,0x8)});});}_0x3fb461[_0x3335ac(0x192)]((_0x2d9290,_0x46d7c1)=>_0x2d9290[_0x3335ac(0x1da)]>_0x46d7c1[_0x3335ac(0x1da)]?0x1:_0x46d7c1[_0x3335ac(0x1da)]>_0x2d9290[_0x3335ac(0x1da)]?-0x1:0x0),dbLogs[_0x3335ac(0x178)](_0x3335ac(0x191))[_0x3335ac(0x1f8)]()[_0x3335ac(0x20d)](),_0x3fb461[_0x3335ac(0x1e3)](_0x15ff88=>{const _0x275e1d=_0x3335ac;let _0x8f18ff;_0x15ff88[_0x275e1d(0x1c3)]!=config[_0x275e1d(0x1ad)]&&(_0x8f18ff={'time':_0x15ff88[_0x275e1d(0x1da)],'type':_0x275e1d(0x255),'event':'Order:\x20'+_0x15ff88[_0x275e1d(0x271)]+'\x20'+_0x15ff88[_0x275e1d(0x179)]+'\x20#'+_0x15ff88[_0x275e1d(0x1c0)]+'\x20@'+_0x15ff88[_0x275e1d(0x19b)]},dbLogs[_0x275e1d(0x178)](_0x275e1d(0x191))[_0x275e1d(0x225)](_0x8f18ff)[_0x275e1d(0x20d)]());});const _0x4b2b18=fns['eachDayOfInterval']({'start':new Date(_0x52e484['startdate']),'end':new Date()})[_0x3335ac(0x253)](_0x3a7583=>fns[_0x3335ac(0x214)](_0x3a7583,_0x3335ac(0x22a)));let _0x21bd64=[];_0x52e484['portfolio'][_0x3335ac(0x1e3)](_0x3957df=>{const _0x1fe484=_0x3335ac;if(!_0x3957df[_0x1fe484(0x1a4)]){_0x21bd64[_0x3957df['coin']]=[];let _0x4393f8=_0x3957df['startnumber'];_0x4b2b18[_0x1fe484(0x1e3)]((_0xd122f2,_0xa03793)=>{const _0x3ebe61=_0x1fe484;let _0x576993=_0x3fb461[_0x3ebe61(0x240)](_0xc4ace2=>_0xc4ace2[_0x3ebe61(0x1c3)]==_0x3957df['coin']&&_0xc4ace2['date']==_0xd122f2);if(_0x576993[_0x3ebe61(0x18a)]!=0x0){let _0x59d387=_0x576993[_0x3ebe61(0x1d8)]((_0x146a87,_0x5ee5c0)=>{return _0x146a87+=_0x5ee5c0['coinamount'],_0x146a87;},0x0);_0x4393f8+=_0x59d387;}_0x21bd64[_0x3957df[_0x3ebe61(0x1c3)]][_0xd122f2]=_0x4393f8;});}});const _0x247ec2=[..._0x142144];_0x247ec2['push']({'coin':stablecoins[_0x3335ac(0x174)][_0x3335ac(0x1c3)],'symbol':stablecoins[_0x3335ac(0x174)][_0x3335ac(0x271)]}),_0x247ec2[_0x3335ac(0x225)]({'coin':stablecoins['usd'][_0x3335ac(0x1c3)],'symbol':stablecoins[_0x3335ac(0x1f5)][_0x3335ac(0x271)]});let _0x466063=[];for(const _0x750ea3 of _0x247ec2){_0x466063[_0x750ea3[_0x3335ac(0x1c3)]]=await getCloses(_0x750ea3['symbol'],new Date(_0x52e484[_0x3335ac(0x230)]));}dbPerformance[_0x3335ac(0x178)](_0x3335ac(0x20f))[_0x3335ac(0x1f8)]()[_0x3335ac(0x20d)](),_0x4b2b18['forEach']((_0x3e1239,_0x225b9a)=>{const _0x56fc29=_0x3335ac;let _0x441e7b,_0xcf956f=[];_0x225b9a==0x0?(_0x52e484[_0x56fc29(0x190)][_0x56fc29(0x1e3)](_0x49eb03=>{const _0x2825b6=_0x56fc29;!_0x49eb03[_0x2825b6(0x1a4)]&&_0xcf956f[_0x2825b6(0x225)]({'coin':_0x49eb03[_0x2825b6(0x1c3)],'number':_0x49eb03[_0x2825b6(0x1e8)],'price':_0x49eb03['startprice']});}),_0x441e7b={'date':_0x3e1239,'eur':_0x466063[stablecoins[_0x56fc29(0x174)]['coin']][_0x225b9a],'usd':_0x466063[stablecoins['usd'][_0x56fc29(0x1c3)]][_0x225b9a],'coins':_0xcf956f}):(_0x52e484[_0x56fc29(0x190)]['forEach'](_0x2f6781=>{const _0x1e3161=_0x56fc29;!_0x2f6781[_0x1e3161(0x1a4)]&&_0xcf956f['push']({'coin':_0x2f6781[_0x1e3161(0x1c3)],'number':_0x21bd64[_0x2f6781[_0x1e3161(0x1c3)]][_0x3e1239],'price':_0x2f6781[_0x1e3161(0x1c3)]==config[_0x1e3161(0x1ad)]?0x1:_0x466063[_0x2f6781[_0x1e3161(0x1c3)]][_0x225b9a]});}),_0x441e7b={'date':_0x3e1239,'eur':_0x466063[stablecoins[_0x56fc29(0x174)]['coin']][_0x225b9a],'usd':_0x466063[stablecoins['usd'][_0x56fc29(0x1c3)]][_0x225b9a],'coins':_0xcf956f}),dbPerformance['get'](_0x56fc29(0x20f))[_0x56fc29(0x225)](_0x441e7b)[_0x56fc29(0x20d)]();}),emitPerformance(),await resetCoinResults();for(let _0x2a64c3 of _0x3fb461){_0x2a64c3[_0x3335ac(0x1c3)]!=config[_0x3335ac(0x1ad)]&&await updateCoinResults(_0x2a64c3);}logHistory(_0x3335ac(0x1ca),_0x3335ac(0x18b));}catch(_0x570429){await handleError(_0x570429,_0x3335ac(0x262));}}function _0x40e3(){const _0x13db41=['BTC/BUSD','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','defaults','offset','\x20|\x20Error\x20details:\x20','2616684iQebqR','getSeconds','usd','11236023dArDyh','-results.json','remove','configuration-stored','args','headless','milliseconds','close','LIMIT','\x20minutes\x20-\x20balancing\x20resumed','enabled','settings','last','add','outboundAccountPosition','fetchOHLCV','exchange','buy','cost','argv','asset','total','subscribeSpotUserDataStream','write','API-key\x20format\x20invalid','data','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','179256bchxdv','replace','001','format','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','66280wXuHOe','getMinutes','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','BTCUSDT','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','mkdirSync','parseISO','slice','Crypt',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','starting-balances','getFullYear','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','BTC/USDT','cooldown','push','BTC','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','performance','eventType','yyyy/MM/dd','-performance.json','apply','USDT','exit','getMonth','startdate','bot','getPortfolio()','running','event','shift','breakeven','includes','InsufficientFunds','bid','balances','delta','keys','coins','showname','getFiat()','filter','max','round','DAI/','limit','sortBy','cancelLoading','\x20|\x20Unknown\x20error\x20occured','fees','min','decrypt','DDoSProtection','botname','sha256','\x20order:\x20','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','EUR','Invalid\x20quantity','map','orderStatus','order','ExchangeNotAvailable','accumulatedQuantity','limits','emojisell','configuration','isArray','getCoins()','message','type','Binance\x20API\x20secret\x20is\x20invalid','abs','date-fns','recreateHistory()','fee','loadMarkets','limit-high','getHours','time','padStart','differenceInSeconds','ticker','************','assign','threshold','138ulOJgi','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','toLowerCase','symbol','splice','HOT/BTC','Order\x20filled:\x20','realized','differenceInCalendarDays','apiSecret','split','market',':\x20Bot\x20','botID','event-history','lowdb','./config/','restart','reverse','date','number','send','11738980UtHPZf','eur','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','test',',\x20must\x20be\x20a\x203\x20digit\x20number','get','side','has','createOrder','wsMarket','error','getCloses()','sell','USDC','timeout','binance','BNB','orderType','ordertype','Executed\x20','secure','timeshift','wsKey','length','Performance\x20recreation\x20completed\x20successfully','formattedMessage','HOT/EUR','BTCEUR','\x20orders\x20in\x20less\x20than\x20','portfolio','logs','sort','./version.json','MIN_NOTIONAL','bb-secure.json','remainingSymbols','1GXtzrq','wss://stream.binance.us:9443','orderId','find','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','kline','InvalidNonce','\x20>\x20','value','133lXRCZk','cancel','distribution','excluded','apiKey','fromCodePoint','valid','fetchBalance','buys','page','reconnected','Market','basecoin','wss://stream.binance.com:9443','-events.json','getDate','136295Wfledw','getTime','Limit\x20(high-margin)','storeHeadless','coin-loading-progress','11657710cHaqZY','BTC/EUR','initws()','AuthenticationError','filled','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','fetchOrders','recreate','trade',')\x20|\x20Error\x20details:\x20','amount','binanceus','entries','coin','RSA-OAEP','emojibuy','fetchTickers','closeWs','constructor','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','success','222EIdauy','indexOf','Order(s)\x20filled\x20-\x20balancing\x20resumed','WebSockets(','initclient','function','BTCBUSD','target','OrderNotFound','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','startprice','currency','parse','reduce','bb-settings.json','timestamp','datetime','ask','Order(s)\x20not\x20validated\x20after\x20','log','bot-','toFixed','executionReport','Order\x20amount\x20is\x20invalid:\x20','forEach','sells','(((.+)+)+)+$','kill','\x20hour','startnumber','toString','availableBalance','cancelOrder()','stringify','lowdb/adapters/FileSync'];_0x40e3=function(){return _0x13db41;};return _0x40e3();}async function getCloses(_0x4aa686,_0x216dca,_0xb6983b=undefined){const _0x1a6846=_0x433f23,_0x38af28='1d';let _0x82e905,_0x9143aa;const _0x289bcc=fns[_0x1a6846(0x276)](new Date(),_0x216dca)+0x1;try{const _0x17b40d=exchange[_0x1a6846(0x1fc)]()-_0x289bcc*0x18*0xe10*0x3e8;_0x82e905=await exchange[_0x1a6846(0x205)](_0x4aa686,_0x38af28,_0x17b40d,_0xb6983b),_0x9143aa=await exchange[_0x1a6846(0x1c6)](_0x4aa686);}catch(_0x2dac92){await handleError(_0x2dac92,_0x1a6846(0x17e));}let _0x76742b=ohlcvToCloses(_0x82e905);return _0x76742b['push'](_0x9143aa[_0x4aa686][_0x1a6846(0x202)]),_0x76742b;}function ohlcvToCloses(_0x369e71){const _0x196bf6=_0x433f23;let _0x36b288=[];return _0x369e71[_0x196bf6(0x1e3)](function(_0x5314d7){const _0x46df2f=_0x196bf6;_0x36b288[_0x46df2f(0x225)](_0x5314d7[0x4]);}),_0x36b288;}function getConfiguration(_0x3d6f3e){const _0x2d70dc=_0x433f23;let _0x4878c6=dbConfig['get'](_0x2d70dc(0x231))[_0x2d70dc(0x19a)]({'botID':_0x3d6f3e})[_0x2d70dc(0x1a0)]();if(_0x4878c6){let _0x3105eb=![];!_0x4878c6[_0x2d70dc(0x206)]&&(_0x4878c6={..._0x4878c6,'exchange':_0x2d70dc(0x182)},_0x3105eb=!![]),!_0x4878c6['basecoin']&&(_0x4878c6={..._0x4878c6,'basecoin':_0x2d70dc(0x226)},_0x3105eb=!![]),!_0x4878c6[_0x2d70dc(0x185)]&&(_0x4878c6={..._0x4878c6,'ordertype':_0x2d70dc(0x279)},_0x3105eb=!![]),!_0x4878c6[_0x2d70dc(0x181)]&&(_0x4878c6={..._0x4878c6,'timeout':0x14},_0x3105eb=!![]),!_0x4878c6[_0x2d70dc(0x1c5)]&&(_0x4878c6={..._0x4878c6,'emojibuy':''},_0x3105eb=!![]),!_0x4878c6[_0x2d70dc(0x259)]&&(_0x4878c6={..._0x4878c6,'emojisell':''},_0x3105eb=!![]),!_0x4878c6['showname']&&(_0x4878c6={..._0x4878c6,'showname':![]},_0x3105eb=!![]),_0x3105eb&&(_0x4878c6={'botID':_0x4878c6[_0x2d70dc(0x27b)],'exchange':_0x4878c6[_0x2d70dc(0x206)],'apiKey':_0x4878c6[_0x2d70dc(0x1a5)],'apiSecret':_0x4878c6['apiSecret'],'basecoin':_0x4878c6[_0x2d70dc(0x1ad)],'botname':_0x4878c6['botname'],'showname':_0x4878c6['showname'],'threshold':_0x4878c6[_0x2d70dc(0x26d)],'ordertype':_0x4878c6[_0x2d70dc(0x185)],'timeout':_0x4878c6['timeout'],'startdate':_0x4878c6['startdate'],'recreate':_0x4878c6[_0x2d70dc(0x1bd)],'timeshift':_0x4878c6['timeshift'],'headless':_0x4878c6['headless'],'cooldown':_0x4878c6['cooldown'],'emojibuy':_0x4878c6['emojibuy'],'emojisell':_0x4878c6[_0x2d70dc(0x259)],'portfolio':_0x4878c6[_0x2d70dc(0x190)]},dbConfig[_0x2d70dc(0x178)](_0x2d70dc(0x231))['remove']()['write'](),dbConfig['get'](_0x2d70dc(0x231))[_0x2d70dc(0x225)](_0x4878c6)[_0x2d70dc(0x20d)]());}else _0x4878c6={'botID':_0x3d6f3e,'exchange':_0x2d70dc(0x182),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x3d6f3e,'showname':![],'threshold':'3','ordertype':_0x2d70dc(0x279),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2d70dc(0x188)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x4878c6;}function emittedConfiguration(){const _0x4840e7=_0x433f23;let _0x30bff9;return config[_0x4840e7(0x1a5)]==''?_0x30bff9=config:_0x30bff9={...config,'apiKey':_0x4840e7(0x26b),'apiSecret':_0x4840e7(0x26b)},_0x30bff9;}function getSettings(){const _0x4685f3=_0x433f23;return dbSettings[_0x4685f3(0x178)](_0x4685f3(0x201))[_0x4685f3(0x1a0)]();}function getSecure(){const _0x363646=_0x433f23;return dbSecure[_0x363646(0x178)](_0x363646(0x187))['value']()||{};}function updateTimeshift(_0x3a3bd6){const _0xabcec9=_0x433f23;let _0x11314b=dbConfig[_0xabcec9(0x178)](_0xabcec9(0x231))[_0xabcec9(0x19a)]({'botID':botID})[_0xabcec9(0x1a0)]();_0x11314b&&dbConfig['get'](_0xabcec9(0x231))['find']({'botID':botID})[_0xabcec9(0x26c)]({'timeshift':_0x3a3bd6})[_0xabcec9(0x20d)](),config[_0xabcec9(0x188)]=_0x3a3bd6,proxyEmit(_0xabcec9(0x25a),emittedConfiguration());}async function storeConfiguration(_0x4a5d47){const _0x428eda=_0x433f23;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x8061f2=dbConfig[_0x428eda(0x178)](_0x428eda(0x231))[_0x428eda(0x19a)]({'botID':botID})[_0x428eda(0x1a0)]();_0x4a5d47={..._0x4a5d47,'apiKey':crypt[_0x428eda(0x24a)](secure['privateKey'],_0x4a5d47[_0x428eda(0x1a5)])[_0x428eda(0x25d)],'apiSecret':crypt[_0x428eda(0x24a)](secure['privateKey'],_0x4a5d47[_0x428eda(0x277)])['message']};if(_0x8061f2){if(_0x4a5d47[_0x428eda(0x1a5)]==_0x428eda(0x26b))_0x4a5d47[_0x428eda(0x1a5)]=config['apiKey'];if(_0x4a5d47[_0x428eda(0x277)]==_0x428eda(0x26b))_0x4a5d47[_0x428eda(0x277)]=config[_0x428eda(0x277)];dbConfig[_0x428eda(0x178)]('bot')[_0x428eda(0x19a)]({'botID':botID})[_0x428eda(0x26c)](_0x4a5d47)[_0x428eda(0x20d)]();}else dbConfig[_0x428eda(0x178)](_0x428eda(0x231))[_0x428eda(0x225)](_0x4a5d47)['write'](),process[_0x428eda(0x172)]({'status':_0x428eda(0x200),'live':_0x428eda(0x233)},_0x20cbbf=>{});config={..._0x4a5d47};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x428eda(0x172)]({'botname':_0x4a5d47[_0x428eda(0x24c)]},_0x70d45a=>{}),proxyEmit(_0x428eda(0x1f9)),reset();}async function storeHeadless(_0x1878b6){const _0x35d81a=_0x433f23,_0x1e0d8d={...config,'headless':_0x1878b6[_0x35d81a(0x1fb)]};let _0x1d067d=dbConfig[_0x35d81a(0x178)](_0x35d81a(0x231))['find']({'botID':botID})[_0x35d81a(0x1a0)]();_0x1d067d&&dbConfig[_0x35d81a(0x178)](_0x35d81a(0x231))['find']({'botID':botID})[_0x35d81a(0x26c)](_0x1e0d8d)[_0x35d81a(0x20d)](),config={..._0x1e0d8d},proxyEmit(_0x35d81a(0x25a),emittedConfiguration());}function noslash(_0x222ee1){return _0x222ee1['replace']('/','');}function updateNumberCoins(_0x38ed2a){const _0x4ab6db=_0x433f23;_0x38ed2a[_0x4ab6db(0x229)]&&_0x38ed2a[_0x4ab6db(0x229)]==_0x4ab6db(0x204)&&_0x38ed2a[_0x4ab6db(0x23a)][_0x4ab6db(0x1e3)](_0x7d93ec=>{const _0x564ec1=_0x4ab6db;let _0x27603c=currentCoins[_0x564ec1(0x19a)](_0xadc3f4=>_0xadc3f4[_0x564ec1(0x1c3)]==_0x7d93ec[_0x564ec1(0x20a)]),_0x1b822f=config[_0x564ec1(0x190)]['find'](_0x319af4=>_0x319af4['coin']==_0x7d93ec[_0x564ec1(0x20a)]);if(_0x27603c&&_0x1b822f)_0x27603c[_0x564ec1(0x171)]=Math['max'](Number(_0x7d93ec[_0x564ec1(0x1ea)])+(_0x1b822f['offset']||0x0),0x0);});if(_0x38ed2a[_0x4ab6db(0x229)]&&_0x38ed2a[_0x4ab6db(0x229)]==_0x4ab6db(0x1e1)){if(_0x38ed2a[_0x4ab6db(0x184)]==_0x4ab6db(0x1fe)&&_0x38ed2a[_0x4ab6db(0x254)]=='FILLED'){if(lastOrders)lastOrders[_0x4ab6db(0x1e3)](_0x3f15a0=>{const _0x282df9=_0x4ab6db;if(_0x3f15a0['orderId']==_0x38ed2a[_0x282df9(0x199)]){if(_0x3f15a0[_0x282df9(0x280)])_0x3f15a0[_0x282df9(0x1ba)]=_0x38ed2a[_0x282df9(0x257)]*_0x3f15a0[_0x282df9(0x19b)];else _0x3f15a0[_0x282df9(0x1ba)]=_0x38ed2a[_0x282df9(0x257)];}});}}}async function getCoins(_0x328957=!![],_0x55613c=config[_0x433f23(0x1ad)]){const _0x4a7fc1=_0x433f23;let _0x4904e6,_0x34c7ba=[],_0x1b8389=[],_0x4b70f5=[];try{_0x4904e6=await exchange[_0x4a7fc1(0x1a8)](),mybalances=_0x4904e6[_0x4a7fc1(0x20b)];if(!_0x328957)for(const [_0x48c2a4,_0x2d0f19]of Object['entries'](mybalances)){_0x4b70f5[_0x4a7fc1(0x225)](_0x48c2a4);}else config[_0x4a7fc1(0x190)][_0x4a7fc1(0x1e3)](_0x983e57=>{const _0x22de6d=_0x4a7fc1;if(!_0x983e57[_0x22de6d(0x1a4)])_0x4b70f5[_0x22de6d(0x225)](_0x983e57[_0x22de6d(0x1c3)]);});if(_0x55613c=='')for(const [_0x10940a,_0x4990c3]of Object[_0x4a7fc1(0x1c2)](mybalances)){_0x4990c3[_0x4a7fc1(0x1e9)]()!=0x0&&_0x1b8389[_0x4a7fc1(0x225)]({'coin':_0x10940a});}else for(const [_0x3fe31b,_0x32dc76]of Object['entries'](mybalances)){if(_0x4b70f5[_0x4a7fc1(0x237)](_0x3fe31b)){const _0x104c38=config[_0x4a7fc1(0x190)]['find'](_0x5b6158=>_0x5b6158[_0x4a7fc1(0x1c3)]==_0x3fe31b);if((_0x32dc76[_0x4a7fc1(0x1e9)]()!=0x0||_0x104c38)&&(allSymbols['includes'](_0x3fe31b+'/'+_0x55613c)||_0x3fe31b==_0x55613c))_0x1b8389['push']({'coin':_0x3fe31b,'symbol':_0x3fe31b+'/'+_0x55613c,'reverse':![],'number':Math['max'](_0x32dc76+(_0x104c38&&_0x104c38['offset']||0x0),0x0)}),_0x3fe31b!=_0x55613c&&_0x34c7ba[_0x4a7fc1(0x225)](_0x3fe31b+'/'+_0x55613c);else(_0x32dc76[_0x4a7fc1(0x1e9)]()!=0x0||_0x104c38)&&allSymbols[_0x4a7fc1(0x237)](_0x55613c+'/'+_0x3fe31b)&&(_0x1b8389[_0x4a7fc1(0x225)]({'coin':_0x3fe31b,'symbol':_0x55613c+'/'+_0x3fe31b,'reverse':!![],'number':Math[_0x4a7fc1(0x241)](_0x32dc76+(_0x104c38&&_0x104c38[_0x4a7fc1(0x1f1)]||0x0),0x0)}),_0x3fe31b!=_0x55613c&&_0x34c7ba[_0x4a7fc1(0x225)](_0x55613c+'/'+_0x3fe31b));}}}catch(_0x40d8ca){if(!_0x328957){if(_0x40d8ca[_0x4a7fc1(0x1e9)]()[_0x4a7fc1(0x237)](_0x4a7fc1(0x20e)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x40d8ca[_0x4a7fc1(0x1e9)]()[_0x4a7fc1(0x237)](_0x4a7fc1(0x1b9)))return logHistory(_0x4a7fc1(0x17d),_0x4a7fc1(0x1d4)),![];else{if(_0x40d8ca[_0x4a7fc1(0x1e9)]()[_0x4a7fc1(0x237)](_0x4a7fc1(0x218)))return logHistory(_0x4a7fc1(0x17d),_0x4a7fc1(0x25f)),![];else await handleError(_0x40d8ca,_0x4a7fc1(0x25c));}}}else await handleError(_0x40d8ca,_0x4a7fc1(0x25c));}return _0x1b8389;}async function getPortfolio(_0x4540e3){const _0x300a40=_0x433f23;let _0x549736=[],_0x249478=[],_0x4aa8d4,_0x2ee37f=[],_0x1be0c7,_0xc2d551;_0x4540e3[_0x300a40(0x1a5)]===_0x300a40(0x26b)||_0x4540e3[_0x300a40(0x277)]===_0x300a40(0x26b)?(_0x1be0c7=config[_0x300a40(0x1a5)],_0xc2d551=config[_0x300a40(0x277)]):(_0x1be0c7=_0x4540e3[_0x300a40(0x1a5)],_0xc2d551=_0x4540e3[_0x300a40(0x277)]);await initExchange(_0x1be0c7,_0xc2d551);let _0x1dab0b=await loadSymbols();if(_0x1dab0b){_0x2ee37f=await getCoins(![],_0x4540e3[_0x300a40(0x1ad)]);if(_0x2ee37f===![])proxyEmit('portfolio',![]);else{if(_0x4540e3['basecoin']=='')proxyEmit(_0x300a40(0x190),_0x2ee37f);else{_0x2ee37f[_0x300a40(0x1e3)](_0x123350=>{const _0x2495ed=_0x300a40;_0x549736[_0x2495ed(0x225)](_0x123350['symbol']);});try{_0x249478=await exchange['fetchTickers'](_0x549736);}catch(_0x210ea5){await handleError(_0x210ea5,_0x300a40(0x232));}_0x2ee37f[_0x300a40(0x1e3)](_0x275067=>{const _0x914549=_0x300a40;_0x275067[_0x914549(0x1c3)]!=_0x4540e3[_0x914549(0x1ad)]?_0x4aa8d4=_0x275067['reverse']?0x1/_0x249478[_0x275067['symbol']][_0x914549(0x202)]:_0x249478[_0x275067[_0x914549(0x271)]]['last']:_0x4aa8d4=0x1,_0x275067[_0x914549(0x19b)]=formatResult(_0x4aa8d4,0x8);}),proxyEmit(_0x300a40(0x190),_0x2ee37f);}}}else proxyEmit(_0x300a40(0x190),![]);}function checkMinimums(_0xfcb101){const _0x3fbbd6=_0x433f23;let _0x31c728=!![];const _0x39f039=!_0xfcb101[_0x3fbbd6(0x280)]?markets[_0xfcb101['symbol']][_0x3fbbd6(0x258)][_0x3fbbd6(0x1c0)]['min']:markets[_0xfcb101['symbol']][_0x3fbbd6(0x258)][_0x3fbbd6(0x208)]['min'],_0x240641=!_0xfcb101[_0x3fbbd6(0x280)]?markets[_0xfcb101['symbol']][_0x3fbbd6(0x258)][_0x3fbbd6(0x208)][_0x3fbbd6(0x249)]:markets[_0xfcb101[_0x3fbbd6(0x271)]][_0x3fbbd6(0x258)][_0x3fbbd6(0x1c0)][_0x3fbbd6(0x249)];if(Math[_0x3fbbd6(0x260)](_0xfcb101['trade'])<_0x39f039)_0x31c728=![];if(Math[_0x3fbbd6(0x260)](_0xfcb101[_0x3fbbd6(0x1be)])*_0xfcb101['last']<_0x240641)_0x31c728=![];let _0xe371f8=config['portfolio'][_0x3fbbd6(0x19a)](_0x35cdff=>_0x35cdff['coin']==_0xfcb101[_0x3fbbd6(0x1c3)]);if(Math[_0x3fbbd6(0x260)](_0xfcb101[_0x3fbbd6(0x1be)])>_0xfcb101[_0x3fbbd6(0x171)]-_0xe371f8[_0x3fbbd6(0x1f1)])_0x31c728=![];return _0x31c728;}async function getBalances(){const _0x1c73b6=_0x433f23;let _0x36a76d=0x0,_0x27aa86;const _0x40496b=config[_0x1c73b6(0x26d)];currentCoins[_0x1c73b6(0x1e3)](_0x489b1e=>{const _0xe1e8e3=_0x1c73b6;if(_0x489b1e[_0xe1e8e3(0x1c3)]!=config['basecoin']){let _0x2a4cd4=global[_0xe1e8e3(0x26a)][noslash(_0x489b1e['symbol'])];_0x27aa86=_0x489b1e[_0xe1e8e3(0x280)]?0x1/_0x2a4cd4:_0x2a4cd4;}else _0x27aa86=0x1;let _0x22c959=_0x489b1e['number']*_0x27aa86;_0x36a76d+=_0x22c959,_0x489b1e[_0xe1e8e3(0x202)]=formatResult(Number(_0x27aa86),0x8),_0x489b1e[_0xe1e8e3(0x1a0)]=_0x22c959;}),currentCoins[_0x1c73b6(0x1e3)](_0x4b1c72=>{const _0x58a79d=_0x1c73b6;let _0x1301a7=config[_0x58a79d(0x190)][_0x58a79d(0x19a)](_0x19f655=>_0x19f655[_0x58a79d(0x1c3)]==_0x4b1c72[_0x58a79d(0x1c3)]),_0x171dbf=Number(_0x1301a7[_0x58a79d(0x1a3)]),_0x44ceff=_0x4b1c72['value']/_0x36a76d*0x64,_0x3e0e03=_0x171dbf*_0x36a76d/0x64/_0x4b1c72[_0x58a79d(0x202)]-_0x4b1c72[_0x58a79d(0x171)];_0x4b1c72[_0x58a79d(0x1a3)]=formatResult(_0x44ceff,0x3),_0x4b1c72[_0x58a79d(0x1d2)]=formatResult(_0x171dbf,0x3),_0x4b1c72['trade']=formatResult(_0x3e0e03,0x8),_0x4b1c72['side']='',_0x4b1c72[_0x58a79d(0x1a7)]='';if(_0x4b1c72[_0x58a79d(0x1c3)]!=config[_0x58a79d(0x1ad)]){if(_0x4b1c72[_0x58a79d(0x1a3)]>_0x171dbf)_0x4b1c72['side']='sell',_0x4b1c72[_0x58a79d(0x1a7)]=checkMinimums(_0x4b1c72);else _0x4b1c72['distribution']<_0x171dbf&&(_0x4b1c72['side']=_0x58a79d(0x207),_0x4b1c72[_0x58a79d(0x1a7)]=checkMinimums(_0x4b1c72));}_0x4b1c72[_0x58a79d(0x23b)]=_0x4b1c72[_0x58a79d(0x1a3)]/_0x4b1c72[_0x58a79d(0x1d2)]-0x1;}),currentCoins[_0x1c73b6(0x192)]((_0x5e5147,_0x2c84ac)=>_0x5e5147[_0x1c73b6(0x23b)]<_0x2c84ac[_0x1c73b6(0x23b)]?0x1:_0x2c84ac[_0x1c73b6(0x23b)]<_0x5e5147[_0x1c73b6(0x23b)]?-0x1:0x0);const _0x4eed99=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4eed99[_0x1c73b6(0x174)],'usd':_0x4eed99[_0x1c73b6(0x1f5)],'portfolio':JSON[_0x1c73b6(0x1ec)](currentCoins),'threshold':_0x40496b},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1c73b6(0x1fb)])headlessMode({'portfolio':currentCoins,'threshold':_0x40496b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2e644c=_0x433f23;if(!lastBalances)return;let _0x223fb0=await getStartingBalances(![]),_0x5e2d43=[],_0x41c7ea;JSON[_0x2e644c(0x1d7)](lastBalances[_0x2e644c(0x190)])[_0x2e644c(0x1e3)](_0x548b9f=>{const _0x49b6c1=_0x2e644c;let _0x5650b0={'coin':_0x548b9f[_0x49b6c1(0x1c3)],'number':_0x548b9f[_0x49b6c1(0x171)],'price':_0x548b9f['last']};_0x5e2d43[_0x49b6c1(0x225)](_0x5650b0);});const _0x463eba=await getFiat();_0x41c7ea={'date':lastBalances[_0x2e644c(0x267)][_0x2e644c(0x278)]('\x20')[0x0],'eur':_0x463eba[_0x2e644c(0x174)],'usd':_0x463eba[_0x2e644c(0x1f5)],'coins':_0x5e2d43};let _0x40a9a1=dbPerformance[_0x2e644c(0x178)](_0x2e644c(0x20f))[_0x2e644c(0x19a)]({'date':_0x41c7ea[_0x2e644c(0x281)]})['value']();_0x40a9a1?dbPerformance['get'](_0x2e644c(0x20f))['find']({'date':_0x41c7ea[_0x2e644c(0x281)]})['assign'](_0x41c7ea)[_0x2e644c(0x20d)]():dbPerformance['get'](_0x2e644c(0x20f))[_0x2e644c(0x225)](_0x41c7ea)[_0x2e644c(0x20d)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3c5384=_0x433f23;if(dbPerformance['has'](_0x3c5384(0x20f))['value']()){let _0x7388d8=dbPerformance['get'](_0x3c5384(0x20f))[_0x3c5384(0x245)](_0x3c5384(0x281))['value']();proxyEmit(_0x3c5384(0x228),_0x7388d8),lastPerformanceEmitted=getDate();}else proxyEmit(_0x3c5384(0x228),[]);}async function getStartingBalances(_0x34aa94=!![]){const _0xdee9f7=_0x433f23;let _0x125c0b=dbPerformance['get']('data')[_0xdee9f7(0x19a)]({'date':config['startdate']})[_0xdee9f7(0x1a0)]();config[_0xdee9f7(0x1a5)]!=''&&!_0x125c0b&&(await setStartDatePerformance(config),_0x125c0b=dbPerformance[_0xdee9f7(0x178)]('data')['find']({'date':config['startdate']})[_0xdee9f7(0x1a0)]());if(config[_0xdee9f7(0x1a5)]==''||!_0x125c0b)return{};let _0x2565cc=0x0,_0x1474bc=0x0,_0x3b2374=0x0,_0x17361f=[],_0x177cb2=0x0;config[_0xdee9f7(0x190)][_0xdee9f7(0x1e3)](_0x2ec8d9=>{const _0x2da5f9=_0xdee9f7;if(!_0x2ec8d9[_0x2da5f9(0x1a4)]){_0x17361f[_0x177cb2]={'coin':_0x2ec8d9[_0x2da5f9(0x1c3)],'symbol':_0x2ec8d9[_0x2da5f9(0x271)],'number':_0x2ec8d9[_0x2da5f9(0x1e8)],'price':_0x2ec8d9[_0x2da5f9(0x1d5)]},_0x2565cc+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)];if(config[_0x2da5f9(0x1ad)]==_0x2da5f9(0x226))_0x1474bc+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)]*_0x125c0b[_0x2da5f9(0x174)],_0x3b2374+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)]*_0x125c0b[_0x2da5f9(0x1f5)];else{if(config[_0x2da5f9(0x1ad)]=='BUSD'||config[_0x2da5f9(0x1ad)]==_0x2da5f9(0x22d)||config[_0x2da5f9(0x1ad)]==_0x2da5f9(0x180))_0x1474bc+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)]*_0x125c0b['eur']/_0x125c0b[_0x2da5f9(0x1f5)],_0x3b2374+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)];else config[_0x2da5f9(0x1ad)]==_0x2da5f9(0x251)&&(_0x1474bc+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)],_0x3b2374+=_0x2ec8d9[_0x2da5f9(0x1d5)]*_0x2ec8d9[_0x2da5f9(0x1e8)]*_0x125c0b['usd']/_0x125c0b[_0x2da5f9(0x174)]);}_0x177cb2++;}});let _0x2d1bf2={'basecoin':_0x2565cc,'eur':_0x1474bc,'usd':_0x3b2374,'coins':_0x17361f};if(_0x34aa94)proxyEmit(_0xdee9f7(0x220),_0x2d1bf2);return _0x2d1bf2;}function headlessMode(_0x28c8af){const _0x5349e3=_0x433f23;let _0x4dfa2c=_0x28c8af['portfolio'],_0x5c1c76=_0x28c8af[_0x5349e3(0x26d)],_0x58ae8a=[];for(let _0x30ff8f of _0x4dfa2c){if(_0x30ff8f[_0x5349e3(0x1c3)]!=config[_0x5349e3(0x1ad)]){if(_0x30ff8f[_0x5349e3(0x1a3)]/_0x30ff8f[_0x5349e3(0x1d2)]-0x1>=_0x5c1c76/0x64){if(_0x30ff8f[_0x5349e3(0x1a7)])_0x58ae8a[_0x5349e3(0x225)](_0x30ff8f);}else{if(_0x30ff8f[_0x5349e3(0x1a3)]/_0x30ff8f[_0x5349e3(0x1d2)]-0x1<=-_0x5c1c76/0x64){if(_0x30ff8f[_0x5349e3(0x1a7)])_0x58ae8a[_0x5349e3(0x225)](_0x30ff8f);}}}}_0x58ae8a[_0x5349e3(0x18a)]>0x0&&placeOrder(_0x58ae8a);}function symbolToCoin(_0x4626db){const _0x1e0802=_0x433f23;let _0x23d720;if(_0x4626db['includes']('/'+config[_0x1e0802(0x1ad)]))_0x23d720=_0x4626db[_0x1e0802(0x212)]('/'+config[_0x1e0802(0x1ad)],'');if(_0x4626db[_0x1e0802(0x237)](config[_0x1e0802(0x1ad)]+'/'))_0x23d720=_0x4626db['replace'](config[_0x1e0802(0x1ad)]+'/','');return _0x23d720;}async function validateOrders(_0x1ed464=0x0){const _0x50b9f0=_0x433f23;let _0x2aa7e1=[],_0x59d63f=config['ordertype']==_0x50b9f0(0x279)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x50b9f0(0x181)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x3ea04d=>{const _0x2b0e6f=_0x50b9f0;let _0x3c0135=previousCoins['find'](_0x27a38f=>_0x27a38f[_0x2b0e6f(0x1c3)]==symbolToCoin(_0x3ea04d['symbol'])),_0x4c55cc=currentCoins['find'](_0x4b025d=>_0x4b025d['coin']==symbolToCoin(_0x3ea04d[_0x2b0e6f(0x271)])),_0x43ba5b,_0xe47f3c;_0x3ea04d[_0x2b0e6f(0x179)]==_0x2b0e6f(0x207)&&!_0x3ea04d[_0x2b0e6f(0x280)]||_0x3ea04d[_0x2b0e6f(0x179)]=='sell'&&_0x3ea04d[_0x2b0e6f(0x280)]?(_0x43ba5b=_0x3c0135[_0x2b0e6f(0x171)]+0.9*_0x3ea04d[_0x2b0e6f(0x1ba)],_0xe47f3c=_0x3c0135[_0x2b0e6f(0x171)]+1.1*_0x3ea04d[_0x2b0e6f(0x1ba)]):(_0x43ba5b=_0x3c0135[_0x2b0e6f(0x171)]-1.1*_0x3ea04d[_0x2b0e6f(0x1ba)],_0xe47f3c=_0x3c0135[_0x2b0e6f(0x171)]-0.9*_0x3ea04d['filled']);const _0xa6371e=_0x3ea04d[_0x2b0e6f(0x1ba)]!=0x0&&_0x4c55cc[_0x2b0e6f(0x171)]>=_0x43ba5b&&_0x4c55cc[_0x2b0e6f(0x171)]<=_0xe47f3c;_0x2aa7e1[_0x2b0e6f(0x225)](_0xa6371e);if(_0xa6371e&&config[_0x2b0e6f(0x185)]!='market'){if(_0x3ea04d[_0x2b0e6f(0x280)])logHistory(_0x2b0e6f(0x255),_0x2b0e6f(0x274)+_0x3ea04d[_0x2b0e6f(0x271)]+'\x20'+_0x3ea04d['side']+'\x20#'+formatResult(_0x3ea04d[_0x2b0e6f(0x1ba)]/_0x3ea04d[_0x2b0e6f(0x19b)],0x8)+'\x20@'+formatResult(_0x3ea04d[_0x2b0e6f(0x19b)],0x8));else logHistory('order',_0x2b0e6f(0x274)+_0x3ea04d[_0x2b0e6f(0x271)]+'\x20'+_0x3ea04d['side']+'\x20#'+formatResult(_0x3ea04d[_0x2b0e6f(0x1ba)],0x8)+'\x20@'+formatResult(_0x3ea04d[_0x2b0e6f(0x19b)],0x8));}}),_0x2aa7e1[_0x50b9f0(0x1e3)]((_0x45530d,_0x643ca2)=>{const _0x515ba8=_0x50b9f0;if(_0x45530d)lastOrders[_0x515ba8(0x272)](_0x643ca2,0x1);});if(_0x1ed464<_0x59d63f&&_0x2aa7e1[_0x50b9f0(0x237)](![])){if(_0x1ed464==0x0){config['ordertype']==_0x50b9f0(0x279)?logHistory(_0x50b9f0(0x17d),_0x50b9f0(0x210)):logHistory(_0x50b9f0(0x17d),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ed464);},0xa*0x3e8);}else{(_0x1ed464==0x1||_0x1ed464==Math['round'](_0x59d63f/0x2)||_0x1ed464==_0x59d63f-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1ed464);},validateOrderInterval);}}else{lockOrders=![];if(_0x1ed464>0x0&&!_0x2aa7e1[_0x50b9f0(0x237)](![]))config[_0x50b9f0(0x185)]=='market'?logHistory('success','Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x50b9f0(0x1ca),_0x50b9f0(0x1cd));else _0x1ed464>0x0&&_0x2aa7e1[_0x50b9f0(0x237)](![])&&(config[_0x50b9f0(0x185)]=='market'?logHistory(_0x50b9f0(0x1ca),_0x50b9f0(0x1dd)+Math[_0x50b9f0(0x242)](_0x59d63f*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x50b9f0(0x1e3)](async _0x464e09=>{const _0x22ba5a=_0x50b9f0;try{const _0x129618=await exchange['cancelOrder'](_0x464e09[_0x22ba5a(0x199)],_0x464e09[_0x22ba5a(0x271)]);}catch(_0x2a37c0){if(_0x2a37c0[_0x22ba5a(0x1e9)]()['includes'](_0x22ba5a(0x1d3))){}else await handleError(_0x2a37c0,_0x22ba5a(0x1eb));}}),logHistory(_0x50b9f0(0x1ca),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x50b9f0(0x242)](_0x59d63f*validateOrderInterval/0xea60)+_0x50b9f0(0x1ff))));}}async function resetCoinResults(){const _0x4c52e7=_0x433f23;dbCoinResults[_0x4c52e7(0x178)](_0x4c52e7(0x23d))[_0x4c52e7(0x1f8)]()[_0x4c52e7(0x20d)]();let _0x3af6a3=await getStartingBalances(![]);_0x3af6a3[_0x4c52e7(0x23d)][_0x4c52e7(0x1e3)](_0x1a2e0a=>{const _0x3d2171=_0x4c52e7,_0x3a08c5=_0x1a2e0a['symbol'][_0x3d2171(0x237)](config[_0x3d2171(0x1ad)]+'/');if(_0x1a2e0a[_0x3d2171(0x1c3)]!=config['basecoin']){let _0x2ea1b6={'coin':_0x1a2e0a[_0x3d2171(0x1c3)],'number':_0x1a2e0a['number'],'breakeven':_0x1a2e0a['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3d2171(0x178)](_0x3d2171(0x23d))[_0x3d2171(0x225)](_0x2ea1b6)[_0x3d2171(0x20d)]();}});}async function updateCoinResults(_0x1d4e4f){const _0x473f2f=_0x433f23;let _0x485966,_0xc1923b,_0x1cbf09,_0xc0ca22,_0x3048a0,_0x38eb45,_0x10f2ad=dbCoinResults[_0x473f2f(0x178)](_0x473f2f(0x23d))[_0x473f2f(0x19a)]({'coin':_0x1d4e4f['coin']})[_0x473f2f(0x1a0)]();if(!_0x10f2ad)return;if(_0x1d4e4f[_0x473f2f(0x263)]&&_0x1d4e4f[_0x473f2f(0x263)][_0x473f2f(0x1d6)]==config[_0x473f2f(0x1ad)])_0x485966=_0x1d4e4f[_0x473f2f(0x263)][_0x473f2f(0x208)];else{if(_0x1d4e4f[_0x473f2f(0x263)]&&_0x1d4e4f['fee'][_0x473f2f(0x1d6)]=='BNB')_0x485966=_0x1d4e4f[_0x473f2f(0x263)][_0x473f2f(0x208)]*global[_0x473f2f(0x26a)]['BNB'+config['basecoin']];else _0x485966=0.001*_0x1d4e4f['filled'];}const _0x329499=_0x1d4e4f[_0x473f2f(0x271)][_0x473f2f(0x237)](config[_0x473f2f(0x1ad)]+'/');_0x329499&&(_0x38eb45={'coin':_0x1d4e4f[_0x473f2f(0x1c3)],'symbol':_0x1d4e4f[_0x473f2f(0x271)],'filled':_0x1d4e4f[_0x473f2f(0x1ba)]*_0x1d4e4f[_0x473f2f(0x19b)],'side':_0x1d4e4f[_0x473f2f(0x179)]=='sell'?_0x473f2f(0x207):_0x473f2f(0x17f),'price':0x1/_0x1d4e4f[_0x473f2f(0x19b)]},_0x1d4e4f={..._0x38eb45});_0x1d4e4f['side']==_0x473f2f(0x207)?_0x1cbf09=(_0x10f2ad['breakeven']*_0x10f2ad[_0x473f2f(0x171)]+_0x1d4e4f['price']*_0x1d4e4f[_0x473f2f(0x1ba)])/(_0x10f2ad[_0x473f2f(0x171)]+_0x1d4e4f[_0x473f2f(0x1ba)]):_0x1cbf09=(_0x10f2ad[_0x473f2f(0x236)]*_0x10f2ad['number']-_0x1d4e4f[_0x473f2f(0x19b)]*_0x1d4e4f[_0x473f2f(0x1ba)])/(_0x10f2ad[_0x473f2f(0x171)]-_0x1d4e4f['filled']);_0x1d4e4f[_0x473f2f(0x179)]==_0x473f2f(0x207)?_0xc0ca22=_0x10f2ad[_0x473f2f(0x275)]:_0xc0ca22=_0x10f2ad[_0x473f2f(0x275)]+(_0x1d4e4f[_0x473f2f(0x19b)]-_0x10f2ad['breakeven'])*_0x1d4e4f[_0x473f2f(0x1ba)];_0xc1923b=_0x1d4e4f[_0x473f2f(0x179)]==_0x473f2f(0x17f)?_0x10f2ad['number']-_0x1d4e4f[_0x473f2f(0x1ba)]:_0x10f2ad[_0x473f2f(0x171)]+_0x1d4e4f[_0x473f2f(0x1ba)],_0x3048a0=(_0x1d4e4f[_0x473f2f(0x19b)]-_0x1cbf09)*_0xc1923b;let _0x55206e={'coin':_0x1d4e4f[_0x473f2f(0x1c3)],'number':_0xc1923b,'breakeven':formatResult(_0x1cbf09,0x8),'realized':formatResult(_0xc0ca22,0x8),'unrealized':formatResult(_0x3048a0,0x8),'fees':formatResult(_0x10f2ad[_0x473f2f(0x248)]+_0x485966,0x8),'sells':_0x1d4e4f[_0x473f2f(0x179)]==_0x473f2f(0x17f)?_0x10f2ad[_0x473f2f(0x1e4)]+0x1:_0x10f2ad[_0x473f2f(0x1e4)],'buys':_0x1d4e4f['side']==_0x473f2f(0x207)?_0x10f2ad[_0x473f2f(0x1a9)]+0x1:_0x10f2ad[_0x473f2f(0x1a9)]};dbCoinResults[_0x473f2f(0x178)](_0x473f2f(0x23d))[_0x473f2f(0x19a)]({'coin':_0x1d4e4f[_0x473f2f(0x1c3)]})[_0x473f2f(0x26c)](_0x55206e)[_0x473f2f(0x20d)]();}async function placeOrder(_0x49925d){const _0x1bdc90=_0x433f23,_0x3f05fb=config['ordertype']=='market'?_0x1bdc90(0x279):_0x1bdc90(0x244);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x1bdc90(0x1d7)](JSON['stringify'](currentCoins));for(const _0x5021e2 of _0x49925d){let _0x6d6fd7,_0x351e8f,_0x57031a,_0x1b2d56,_0x433ce0,_0x41e734=_0x5021e2[_0x1bdc90(0x271)];try{const _0x3e1424=await exchange[_0x1bdc90(0x1c6)](_0x41e734),_0x49e14e=_0x3e1424[_0x41e734];_0x6d6fd7=_0x49e14e[_0x1bdc90(0x202)],_0x351e8f=_0x49e14e[_0x1bdc90(0x239)],_0x57031a=_0x49e14e[_0x1bdc90(0x1dc)];_0x5021e2[_0x1bdc90(0x280)]?(_0x1b2d56=_0x5021e2[_0x1bdc90(0x179)]==_0x1bdc90(0x207)?_0x1bdc90(0x17f):_0x1bdc90(0x207),_0x433ce0=Math['abs'](_0x5021e2['trade'])/_0x6d6fd7):(_0x1b2d56=_0x5021e2[_0x1bdc90(0x179)],_0x433ce0=Math['abs'](_0x5021e2[_0x1bdc90(0x1be)]));_0x3f05fb==_0x1bdc90(0x244)&&(config[_0x1bdc90(0x185)]==_0x1bdc90(0x265)&&(_0x6d6fd7=_0x1b2d56==_0x1bdc90(0x207)?_0x351e8f:_0x57031a),config[_0x1bdc90(0x185)]=='limit-low'&&(_0x6d6fd7=_0x1b2d56==_0x1bdc90(0x207)?_0x57031a:_0x351e8f));_0x433ce0=formatResult(_0x433ce0,0x8),_0x6d6fd7=formatResult(_0x6d6fd7,0x8);const _0x4a393e=await exchange[_0x1bdc90(0x17b)](_0x41e734,_0x3f05fb,_0x1b2d56,_0x433ce0,_0x6d6fd7);lastOrders[_0x1bdc90(0x225)]({'orderId':_0x4a393e['id'],'symbol':_0x41e734,'side':_0x1b2d56,'reverse':_0x5021e2['reverse'],'amount':_0x5021e2[_0x1bdc90(0x280)]?_0x4a393e[_0x1bdc90(0x1c0)]*_0x4a393e['price']:_0x4a393e[_0x1bdc90(0x1c0)],'filled':_0x5021e2[_0x1bdc90(0x280)]?_0x4a393e[_0x1bdc90(0x1ba)]*_0x4a393e[_0x1bdc90(0x19b)]:_0x4a393e[_0x1bdc90(0x1ba)],'price':_0x4a393e[_0x1bdc90(0x19b)]});const _0x5657f8=_0x1b2d56=='sell'?config[_0x1bdc90(0x259)]?String['fromCodePoint']('0x'+config[_0x1bdc90(0x259)])+'\x20':'':config[_0x1bdc90(0x1c5)]?String[_0x1bdc90(0x1a6)]('0x'+config[_0x1bdc90(0x1c5)])+'\x20':'',_0x23ba7b=_0x3f05fb==_0x1bdc90(0x279)?_0x1bdc90(0x1ac):config[_0x1bdc90(0x185)]==_0x1bdc90(0x265)?_0x1bdc90(0x1b3):'Limit\x20(low-margin)';if(_0x3f05fb==_0x1bdc90(0x279))logHistory(_0x1bdc90(0x255),''+_0x5657f8+_0x23ba7b+_0x1bdc90(0x24e)+_0x41e734+'\x20'+_0x1b2d56+'\x20#'+formatResult(_0x4a393e[_0x1bdc90(0x1ba)],0x8)+'\x20@'+formatResult(_0x4a393e['price'],0x8));else logHistory(_0x1bdc90(0x255),''+_0x5657f8+_0x23ba7b+'\x20order:\x20'+_0x41e734+'\x20'+_0x1b2d56+'\x20#'+formatResult(_0x4a393e['amount'],0x8)+'\x20@'+formatResult(_0x4a393e[_0x1bdc90(0x19b)],0x8));_0x4a393e['coin']=_0x5021e2[_0x1bdc90(0x1c3)],await updateCoinResults(_0x4a393e);if(config['cooldown']!=0x0){let _0x2953d1=null;if(cooldownTracker[_0x1bdc90(0x18a)]==config[_0x1bdc90(0x224)]-0x1)_0x2953d1=cooldownTracker[_0x1bdc90(0x235)]();const _0x42e39d=getTimeStamp();cooldownTracker[_0x1bdc90(0x225)](_0x42e39d);if(_0x2953d1){const _0x183ddf=fns[_0x1bdc90(0x269)](new Date(_0x42e39d),new Date(_0x2953d1));_0x183ddf<cooldownInterval&&(logHistory(_0x1bdc90(0x17d),_0x1bdc90(0x186)+config['cooldown']+_0x1bdc90(0x18f)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1bdc90(0x1e7)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x3c4877){if(_0x3c4877[_0x1bdc90(0x1e9)]()[_0x1bdc90(0x237)](_0x1bdc90(0x194)))logHistory('error',_0x1bdc90(0x1c9)+_0x41e734);else{if(_0x3c4877['toString']()[_0x1bdc90(0x237)](_0x1bdc90(0x252)))logHistory(_0x1bdc90(0x17d),_0x1bdc90(0x1e2)+_0x41e734);else await handleError(_0x3c4877,'placeOrder()');}}}if(lastOrders[_0x1bdc90(0x18a)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x1bdc90(0x1fb)]&&(config[_0x1bdc90(0x185)]==_0x1bdc90(0x279)?logHistory(_0x1bdc90(0x17d),_0x1bdc90(0x19c)):logHistory(_0x1bdc90(0x17d),_0x1bdc90(0x21a)));else coolingDown&&(!config[_0x1bdc90(0x1fb)]&&logHistory('error',_0x1bdc90(0x222)));}}function logHistory(_0x337dbd,_0x25410d,_0x580790=''){const _0x5d8a6f=_0x433f23;let _0x386473={'time':getTimeStamp(),'type':_0x337dbd,'event':_0x25410d,'botname':config[_0x5d8a6f(0x24c)],'showname':config['showname']};dbLogs['get'](_0x5d8a6f(0x191))[_0x5d8a6f(0x225)](_0x386473)[_0x5d8a6f(0x20d)]();if(_0x580790=='')_0x580790=_0x25410d;proxyEmit(_0x5d8a6f(0x234),{'log':_0x386473,'summary':_0x580790}),process[_0x5d8a6f(0x172)]({'telegram':_0x386473},_0x5aa689=>{}),logging(''+_0x386473['event']);}function emitHistory(_0x153bb0={}){const _0x2e71ec=_0x433f23;Object[_0x2e71ec(0x23c)](_0x153bb0)[_0x2e71ec(0x18a)]==0x0&&(_0x153bb0={'type':['order',_0x2e71ec(0x234)],'event':'','page':0x1});if(_0x153bb0[_0x2e71ec(0x25e)][_0x2e71ec(0x237)](_0x2e71ec(0x234)))_0x153bb0[_0x2e71ec(0x25e)][_0x2e71ec(0x272)](_0x153bb0[_0x2e71ec(0x25e)][_0x2e71ec(0x1cc)](_0x2e71ec(0x234)),0x1,_0x2e71ec(0x17d),_0x2e71ec(0x1ca));if(dbLogs[_0x2e71ec(0x17a)](_0x2e71ec(0x191))[_0x2e71ec(0x1a0)]()){let _0xfa84d9=dbLogs[_0x2e71ec(0x178)](_0x2e71ec(0x191))[_0x2e71ec(0x240)](_0x380df6=>{const _0x118a4c=_0x2e71ec;if(_0x153bb0[_0x118a4c(0x25e)][_0x118a4c(0x18a)]==0x0)return![];else return _0x153bb0[_0x118a4c(0x25e)][_0x118a4c(0x237)](_0x380df6[_0x118a4c(0x25e)]);})['filter'](_0x2977bc=>{const _0x301eab=_0x2e71ec;if(_0x153bb0['event']=='')return!![];else return _0x2977bc[_0x301eab(0x234)][_0x301eab(0x270)]()[_0x301eab(0x237)](_0x153bb0[_0x301eab(0x234)][_0x301eab(0x270)]());})['sortBy'](_0x2e71ec(0x267)),_0x58e97a=_0xfa84d9[_0x2e71ec(0x1a0)]()[_0x2e71ec(0x18a)];_0xfa84d9=_0xfa84d9[_0x2e71ec(0x280)]()[_0x2e71ec(0x21d)]((_0x153bb0[_0x2e71ec(0x1aa)]-0x1)*logPageSize,_0x153bb0[_0x2e71ec(0x1aa)]*logPageSize-0x1)['reverse']()[_0x2e71ec(0x1a0)](),proxyEmit(_0x2e71ec(0x27c),{'logs':_0xfa84d9,'total':_0x58e97a});}else proxyEmit(_0x2e71ec(0x27c),{'logs':[],'total':0x0});}async function pauseBot(_0x3cac4e){const _0x40eb80=_0x433f23,_0x1578cc=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x40eb80(0x1b2)](),consecutivePauses=0x1;else{if(_0x1578cc-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x40eb80(0x27f)},_0x45854e=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x40eb80(0x1b2)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x40eb80(0x17d),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x3cac4e),botPaused=![],reset();}}async function handleError(_0x509e76,_0x1c2bf2,_0x33da24=''){const _0x4dbeeb=_0x433f23;if(_0x509e76[_0x4dbeeb(0x1e9)]()[_0x4dbeeb(0x237)](_0x4dbeeb(0x24b)))logHistory('error',_0x1c2bf2+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x509e76[_0x4dbeeb(0x1e9)]()[_0x4dbeeb(0x237)](_0x4dbeeb(0x256)))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x1bb)),await pauseBot(pauseBotInterval);else{if(_0x509e76['toString']()['includes']('RequestTimeout'))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x509e76[_0x4dbeeb(0x1e9)]()[_0x4dbeeb(0x237)](_0x4dbeeb(0x20e)))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x215)),logHistory(_0x4dbeeb(0x17d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4dbeeb(0x172)]({'stop':_0x4dbeeb(0x1e6)},_0x286be0=>{});else{if(_0x509e76[_0x4dbeeb(0x1e9)]()['includes']('AuthenticationError'))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x250)),logHistory(_0x4dbeeb(0x17d),_0x4dbeeb(0x26f)),process['send']({'stop':_0x4dbeeb(0x1e6)},_0x1e57e4=>{});else{if(_0x509e76[_0x4dbeeb(0x1e9)]()[_0x4dbeeb(0x237)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x1c2bf2+_0x4dbeeb(0x1ef)),logHistory(_0x4dbeeb(0x17d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4dbeeb(0x172)]({'stop':'kill'},_0x50f343=>{});else{if(_0x509e76[_0x4dbeeb(0x1e9)]()['includes'](_0x4dbeeb(0x175)))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x227)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4dbeeb(0x172)]({'stop':_0x4dbeeb(0x1e6)},_0x29d309=>{});else{if(_0x509e76['toString']()[_0x4dbeeb(0x237)](_0x4dbeeb(0x19e)))logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x24f)),await pauseBot(pauseBotInterval),process[_0x4dbeeb(0x172)]({'stop':_0x4dbeeb(0x27f)},_0x2b3170=>{});else _0x509e76[_0x4dbeeb(0x1e9)]()[_0x4dbeeb(0x237)](_0x4dbeeb(0x238))?logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x4dbeeb(0x17d),_0x1c2bf2+_0x4dbeeb(0x247)),logging(_0x1c2bf2+_0x4dbeeb(0x1f2),_0x509e76),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xe774b3,_0x518627){const _0x51ac53=_0x433f23;return parseFloat(_0xe774b3[_0x51ac53(0x1e0)](_0x518627));}function logging(_0x50997d,_0x4effaa=''){const _0x120bc2=_0x433f23;if(config[_0x120bc2(0x23e)])console['log'](getTimeStamp()+':\x20'+config[_0x120bc2(0x24c)]+_0x120bc2(0x19f)+_0x50997d,_0x4effaa);else console['log'](getTimeStamp()+_0x120bc2(0x27a)+botID+_0x120bc2(0x19f)+_0x50997d,_0x4effaa);}function getServerTime(){const _0x50e786=_0x433f23,_0x125f71=new Date();return _0x125f71[_0x50e786(0x221)]()+'/'+(_0x125f71[_0x50e786(0x22f)]()+0x1)[_0x50e786(0x1e9)]()['padStart'](0x2,'0')+'/'+_0x125f71['getDate']()[_0x50e786(0x1e9)]()[_0x50e786(0x268)](0x2,'0')+'\x20'+_0x125f71[_0x50e786(0x266)]()[_0x50e786(0x1e9)]()[_0x50e786(0x268)](0x2,'0')+':'+_0x125f71[_0x50e786(0x217)]()[_0x50e786(0x1e9)]()[_0x50e786(0x268)](0x2,'0')+':'+_0x125f71[_0x50e786(0x1f4)]()[_0x50e786(0x1e9)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2e716a=_0x433f23,_0x553cd7=shiftedTime();return _0x553cd7['getFullYear']()+'/'+(_0x553cd7[_0x2e716a(0x22f)]()+0x1)[_0x2e716a(0x1e9)]()[_0x2e716a(0x268)](0x2,'0')+'/'+_0x553cd7[_0x2e716a(0x1b0)]()[_0x2e716a(0x1e9)]()[_0x2e716a(0x268)](0x2,'0')+'\x20'+_0x553cd7[_0x2e716a(0x266)]()[_0x2e716a(0x1e9)]()[_0x2e716a(0x268)](0x2,'0')+':'+_0x553cd7['getMinutes']()[_0x2e716a(0x1e9)]()[_0x2e716a(0x268)](0x2,'0')+':'+_0x553cd7[_0x2e716a(0x1f4)]()[_0x2e716a(0x1e9)]()[_0x2e716a(0x268)](0x2,'0');}function getDate(){const _0x4b9b90=_0x433f23,_0x410d1a=shiftedTime();return _0x410d1a[_0x4b9b90(0x221)]()+'/'+(_0x410d1a[_0x4b9b90(0x22f)]()+0x1)[_0x4b9b90(0x1e9)]()[_0x4b9b90(0x268)](0x2,'0')+'/'+_0x410d1a['getDate']()['toString']()[_0x4b9b90(0x268)](0x2,'0');}function getHour(){const _0x4dcd67=_0x433f23,_0x1cb907=shiftedTime();return _0x1cb907[_0x4dcd67(0x266)]()[_0x4dcd67(0x1e9)]()[_0x4dcd67(0x268)](0x2,'0');}function sleep(_0x2ad72b){return new Promise(_0x330c6f=>setTimeout(_0x330c6f,_0x2ad72b));}function shiftedTime(){const _0x324f2d=_0x433f23,_0x6949db=new Date();let _0x52dadc=_0x6949db;if(config&&config[_0x324f2d(0x188)]!==0x0)_0x52dadc=fns[_0x324f2d(0x203)](_0x6949db,{'hours':config['timeshift']});return _0x52dadc;}