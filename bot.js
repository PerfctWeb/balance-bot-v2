const _0x4e9cef=_0x4737;(function(_0x3261cb,_0x1ad565){const _0x44ec39=_0x4737,_0x4f89f3=_0x3261cb();while(!![]){try{const _0x3890d4=-parseInt(_0x44ec39(0x1b9))/0x1*(parseInt(_0x44ec39(0x1d0))/0x2)+-parseInt(_0x44ec39(0x1d2))/0x3+parseInt(_0x44ec39(0x221))/0x4+parseInt(_0x44ec39(0x24b))/0x5*(-parseInt(_0x44ec39(0x23a))/0x6)+-parseInt(_0x44ec39(0x22b))/0x7*(-parseInt(_0x44ec39(0x1a9))/0x8)+parseInt(_0x44ec39(0x1d8))/0x9*(parseInt(_0x44ec39(0x1ba))/0xa)+parseInt(_0x44ec39(0x26e))/0xb*(parseInt(_0x44ec39(0x27c))/0xc);if(_0x3890d4===_0x1ad565)break;else _0x4f89f3['push'](_0x4f89f3['shift']());}catch(_0x5e858a){_0x4f89f3['push'](_0x4f89f3['shift']());}}}(_0x4f23,0xc5801));const _0x7c8477=function(){let _0x3543a6=!![];return function(_0xa7765d,_0x519052){const _0x4f965e=_0x3543a6?function(){if(_0x519052){const _0x35e8d5=_0x519052['apply'](_0xa7765d,arguments);return _0x519052=null,_0x35e8d5;}}:function(){};return _0x3543a6=![],_0x4f965e;};}(),_0x230843=_0x7c8477(this,function(){const _0x4459b3=_0x4737;return _0x230843[_0x4459b3(0x1c6)]()[_0x4459b3(0x218)](_0x4459b3(0x1f2))[_0x4459b3(0x1c6)]()['constructor'](_0x230843)['search']('(((.+)+)+)+$');});_0x230843();'use strict';const ccxt=require('ccxt'),low=require(_0x4e9cef(0x1dc)),FileSync=require(_0x4e9cef(0x19b)),fs=require('fs'),fns=require(_0x4e9cef(0x1af)),{WebsocketClient,DefaultLogger}=require(_0x4e9cef(0x241)),Crypt=require(_0x4e9cef(0x1c1))[_0x4e9cef(0x1e2)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4e9cef(0x21a))['version'],botID=process[_0x4e9cef(0x1a5)][0x2]||_0x4e9cef(0x192),pattern=/^[0-9]{3}$/;if(!pattern[_0x4e9cef(0x200)](botID))return console[_0x4e9cef(0x22a)](_0x4e9cef(0x21d)+botID+_0x4e9cef(0x1da)),process['exit'](0x1);const userID=process[_0x4e9cef(0x1a5)][0x3]||'',configpath=userID?_0x4e9cef(0x211)+userID+'/':_0x4e9cef(0x211);!fs[_0x4e9cef(0x180)](configpath)&&fs[_0x4e9cef(0x228)](configpath);const configfile=configpath+_0x4e9cef(0x24a)+botID+_0x4e9cef(0x235),logfile=configpath+'bot-'+botID+_0x4e9cef(0x22e),performancefile=configpath+_0x4e9cef(0x24a)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x4e9cef(0x288),settingsfile=configpath+_0x4e9cef(0x225),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4e9cef(0x17a)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4e9cef(0x17a)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4e9cef(0x17a)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);function _0x4f23(){const _0x20db5f=['Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','\x20-\x20','date','12ZtvjYo','orderStatus','showname','binanceus','bid','yyyy/MM/dd','close','event','apiKey','keys','BTC/EUR','Market','-results.json','getCoins()','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','defaults','differenceInSeconds','cost','splice','BTC','wsMarket','existsSync','buys','message','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','coin','Unfilled\x20order(s)\x20canceled\x20after\x20','currency','success','eventType','has','placeOrder()','WebSockets(','eachDayOfInterval','orderId','getPortfolio()','filled','number','buy','001','exchange','createOrder','error','fetchTickers','spot','apiSecret','\x20minutes\x20-\x20balancing\x20resumed','\x20>\x20','lowdb/adapters/FileSync','assign','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','coin-loading-progress','subscribeSpotKline','Invalid\x20quantity','AuthenticationError','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','wss://stream.binance.com:9443','emojibuy','argv','limit-low','portfolio','Binance\x20API\x20secret\x20is\x20invalid','2624184tFlrkt','loadSymbols()','initws()','RequestTimeout','\x20hour','market','date-fns','Limit\x20(low-margin)','configuration-stored','cancelLoading','getTime','push','logs','ExchangeNotAvailable','kill','distribution','1500luyXaK','10OVibvh','parseISO','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','BUSD','offset','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','yyyy-MM-dd\x27T\x27HH:mm:ss','hybrid-crypto-js','sells','get','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','headless','toString','includes','isArray','HOT/EUR','startdate','performance','Binance\x20API\x20key\x20is\x20invalid','send','getStartingBalances','map','500mguzjh','toLowerCase','4612599GAqEfr','asset','fee','find','limit','datetime','7614171xVMFei','eur',',\x20must\x20be\x20a\x203\x20digit\x20number','restart','lowdb',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','valid','closeWs','abs','getSeconds','Crypt','getHours','FILLED','recreateHistory()','\x20orders\x20in\x20less\x20than\x20','availableBalance','startnumber','Order\x20filled:\x20','Order:\x20','data','reconnected','getFiat()','basecoin','price','coins','breakeven','(((.+)+)+)+$','min','privateKey','ticker','usd','max','startprice','API-key\x20format\x20invalid','cooldown','time','target','split','fetchOHLCV','remove','test','add','ordertype','toFixed','args','fees','remainingSymbols','length','ask','indexOf','round','USDC','Pausing\x20bot\x20for\x205\x20minutes\x20(','reverse','OrderNotFound','DAI/','format','./config/','emojisell','function','padStart','BTCEUR','filter','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','search','botID','./version.json','yyyy/MM/dd\x20HH:mm:ss','fromCodePoint','Error:\x20Invalid\x20argument\x20','secure','realized','getPortfolio','1625820mZjvKB','delta','BTC/USDT','threshold','bb-settings.json','cancelOrder','BNB','mkdirSync','replace','log','21HWoqpa','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','reduce','-events.json','getMinutes','sort','side','event-history','HOT/BTC','type','-config.json','************','limits','enabled','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','120wGMUra','placeOrder','EUR','limit-high','page','symbols','Performance\x20recreation\x20completed\x20successfully','binance','sell','Order(s)\x20validated\x20-\x20balancing\x20resumed','parse','write','fetchOrders','timeshift','outboundAccountPosition','configuration','bot-','382790ZzpQIx','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','symbol','fetchBalance','orderType','last','BTCUSDT','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','order','recreate','userData','getMonth','timeout','trade','subscribeSpotUserDataStream','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','bot','sha256','getDate','amount','\x20order:\x20','timestamp','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','loadMarkets','\x20|\x20Unknown\x20error\x20occured','forEach',')\x20|\x20Error\x20details:\x20','Order(s)\x20not\x20validated\x20after\x20','decrypt','excluded','value','balances','storeConfiguration','slice','22177221nNRyuv','stringify','InsufficientFunds','kline','Order(s)\x20filled\x20-\x20balancing\x20resumed','accumulatedQuantity','entries','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','BTCBUSD','initclient','Limit\x20(high-margin)'];_0x4f23=function(){return _0x20db5f;};return _0x4f23();}dbCoinResults[_0x4e9cef(0x17a)]({'coins':[]})['write']();function _0x4737(_0x19a63d,_0x1c1803){const _0x5017ec=_0x4f23();return _0x4737=function(_0x230843,_0x7c8477){_0x230843=_0x230843-0x179;let _0x4f23cf=_0x5017ec[_0x230843];return _0x4f23cf;},_0x4737(_0x19a63d,_0x1c1803);}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x4e9cef(0x215),'symbol':_0x4e9cef(0x286)},'usd':{'coin':'BTCUSDT','symbol':_0x4e9cef(0x223)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x32261f)=>{},'debug':(..._0x5393e3)=>{},'notice':(..._0x4dd725)=>{},'info':(..._0x2f96ea)=>{},'warning':(..._0x2e4d59)=>{},'error':async function(..._0x4be0c3){const _0x332a6a=_0x4e9cef,_0x183ff7=new Date()[_0x332a6a(0x1b3)]();if(!lastErrorShown||_0x183ff7-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x332a6a(0x195),_0x332a6a(0x18b)+consecutivePauses+_0x332a6a(0x1dd));let _0x3ed6b9='';if(_0x4be0c3[0x0])_0x3ed6b9+=_0x4be0c3[0x0];if(_0x4be0c3[0x1]&&_0x4be0c3[0x1][_0x332a6a(0x195)]&&_0x4be0c3[0x1][_0x332a6a(0x195)][_0x332a6a(0x182)])_0x3ed6b9+=_0x332a6a(0x27a)+_0x4be0c3[0x1][_0x332a6a(0x195)][_0x332a6a(0x182)];logging(_0x332a6a(0x18b)+consecutivePauses+_0x332a6a(0x266),''+_0x3ed6b9),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x4e9cef(0x25d),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x4e9cef(0x247)]!=config[_0x4e9cef(0x247)]&&updateTimeshift(settings[_0x4e9cef(0x247)]);process[_0x4e9cef(0x1cd)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x2630f4,_0x37f74b=null){const _0x560e1b=_0x4e9cef;process[_0x560e1b(0x1cd)]({'function':_0x2630f4,'args':_0x37f74b});}function initializeProcessListeners(){process['on']('message',_0x4116a0=>{const _0x571291=_0x4737;switch(Object[_0x571291(0x285)](_0x4116a0)[0x0]){case'timeshift':_0x4116a0[_0x571291(0x247)]!=undefined&&(settings[_0x571291(0x247)]=_0x4116a0[_0x571291(0x247)],updateTimeshift(settings[_0x571291(0x247)]));break;case'function':switch(_0x4116a0[_0x571291(0x213)]){case _0x571291(0x277):initclient();break;case'emitHistory':emitHistory(_0x4116a0[_0x571291(0x204)]);break;case _0x571291(0x220):getPortfolio(_0x4116a0[_0x571291(0x204)]);break;case _0x571291(0x26c):storeConfiguration(_0x4116a0[_0x571291(0x204)]);break;case'storeHeadless':storeHeadless(_0x4116a0['args']);break;case _0x571291(0x1ce):getStartingBalances();break;case _0x571291(0x23b):placeOrder(_0x4116a0[_0x571291(0x204)]);break;case _0x571291(0x1b2):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2962fa=_0x4e9cef;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2962fa(0x284)],config[_0x2962fa(0x198)]);let _0x68159e=await loadSymbols();_0x68159e&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x38e3b9,_0x1056c6){const _0x5f0dbb=_0x4e9cef,_0x3c6526=ccxt[config[_0x5f0dbb(0x193)]];let _0x4cdf91;switch(config[_0x5f0dbb(0x193)]){case _0x5f0dbb(0x241):_0x4cdf91=_0x5f0dbb(0x1a3);break;case _0x5f0dbb(0x27f):_0x4cdf91='wss://stream.binance.us:9443';break;default:_0x4cdf91=_0x5f0dbb(0x1a3);}exchange=new _0x3c6526({'apiKey':_0x38e3b9,'secret':_0x1056c6,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x38e3b9,'api_secret':_0x1056c6,'beautify':!![],'wsUrl':_0x4cdf91},logger),config[_0x5f0dbb(0x193)]==_0x5f0dbb(0x27f)&&(stablecoins={'eur':{'coin':_0x5f0dbb(0x276),'symbol':'BTC/BUSD'},'usd':{'coin':_0x5f0dbb(0x251),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x11e4ff=_0x4e9cef;let _0xe93f76;try{markets=await exchange[_0x11e4ff(0x263)]();const _0x1c2090=[_0x11e4ff(0x20f),_0x11e4ff(0x233),_0x11e4ff(0x1c9)];allSymbols=exchange[_0x11e4ff(0x23f)]['filter'](_0x9d77c8=>{const _0xaa0f65=_0x11e4ff;let _0x443a58=![];return _0x1c2090[_0xaa0f65(0x265)](_0x595ebc=>{const _0x20068f=_0xaa0f65;if(_0x9d77c8[_0x20068f(0x1c7)](_0x595ebc))_0x443a58=!![];}),!_0x443a58;}),_0xe93f76=!![];}catch(_0x491246){await handleError(_0x491246,_0x11e4ff(0x1aa)),_0xe93f76=![];}return _0xe93f76;}async function initbot(){const _0x4aa950=_0x4e9cef;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3071bc=dbCoinResults[_0x4aa950(0x1c3)](_0x4aa950(0x1f0))[_0x4aa950(0x26a)]();if(_0x3071bc['length']==0x0)await resetCoinResults();}async function initclient(){const _0xd4651d=_0x4e9cef;proxyEmit(_0xd4651d(0x249),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xd4651d(0x26b),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x379c12=_0x4e9cef;wsinitialized=![];ws1&&(ws1['forEach'](_0x5daa3a=>{const _0x2f5d5a=_0x4737;try{wsClient[_0x2f5d5a(0x1df)](_0x5daa3a);}catch(_0x4f7aae){}}),ws1=[]);if(ws2){try{wsClient[_0x379c12(0x1df)](ws2);}catch(_0x47fbc3){}ws2=null;}}async function initws(){const _0x33f6a9=_0x4e9cef;cleanws();let _0x1b12c5=[];currentCoins['forEach'](_0x27a8f9=>{const _0x28feda=_0x4737;if(_0x27a8f9['coin']!=config[_0x28feda(0x1ee)])_0x1b12c5[_0x28feda(0x1b4)](noslash(_0x27a8f9[_0x28feda(0x24d)]));});if(!_0x1b12c5['includes'](stablecoins[_0x33f6a9(0x1d9)]['coin']))_0x1b12c5[_0x33f6a9(0x1b4)](stablecoins[_0x33f6a9(0x1d9)][_0x33f6a9(0x184)]);if(!_0x1b12c5['includes'](stablecoins[_0x33f6a9(0x1f6)]['coin']))_0x1b12c5[_0x33f6a9(0x1b4)](stablecoins[_0x33f6a9(0x1f6)][_0x33f6a9(0x184)]);if(!_0x1b12c5[_0x33f6a9(0x1c7)]('BNB'+config[_0x33f6a9(0x1ee)]))_0x1b12c5['push']('BNB'+config['basecoin']);try{_0x1b12c5[_0x33f6a9(0x265)]((_0x45a202,_0x3d9af2)=>{const _0x4e00c1=_0x33f6a9;ws1[_0x3d9af2]=wsClient[_0x4e00c1(0x19f)](_0x45a202,'1m');}),ws2=wsClient[_0x33f6a9(0x25a)](),wsClient['on']('formattedMessage',_0xb20393=>{const _0x5f01bf=_0x33f6a9;if(!Array[_0x5f01bf(0x1c8)](_0xb20393)&&!_0xb20393['wsKey'][_0x5f01bf(0x1c7)](_0x5f01bf(0x256))){if(_0xb20393[_0x5f01bf(0x188)]===_0x5f01bf(0x271)){global[_0x5f01bf(0x1f5)][_0xb20393[_0x5f01bf(0x271)][_0x5f01bf(0x24d)]]=_0xb20393[_0x5f01bf(0x271)][_0x5f01bf(0x282)];return;}}else{if(!Array['isArray'](_0xb20393)&&_0xb20393['wsKey'][_0x5f01bf(0x1c7)](_0x5f01bf(0x256))){if(_0xb20393[_0x5f01bf(0x17f)][_0x5f01bf(0x1c7)](_0x5f01bf(0x197))){updateNumberCoins(_0xb20393);return;}}}}),wsClient['on'](_0x33f6a9(0x1ec),async _0x4338c8=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0xcdef00){await handleError(_0xcdef00,_0x33f6a9(0x1ab));}let _0x1e743a,_0x338f14=0x0;loading['remainingSymbols']=[];let _0x5e4fae=0x0;currentCoins[_0x33f6a9(0x265)](_0x29520a=>{const _0x4bbeaa=_0x33f6a9;if(_0x29520a[_0x4bbeaa(0x184)]!=config[_0x4bbeaa(0x1ee)])loading[_0x4bbeaa(0x206)][_0x4bbeaa(0x1b4)](_0x29520a['symbol']);}),loadingCanceled=![];while(_0x1e743a!=currentCoins['length']-0x1){_0x1e743a=0x0,currentCoins['forEach'](_0x11ff18=>{const _0x5be5ae=_0x33f6a9;_0x11ff18[_0x5be5ae(0x184)]!=config['basecoin']&&global['ticker'][noslash(_0x11ff18[_0x5be5ae(0x24d)])]&&(loading['remainingSymbols']=loading['remainingSymbols']['filter'](_0x139d5e=>_0x139d5e!=_0x11ff18['symbol']),_0x1e743a++);}),loading['progress']=Math[_0x33f6a9(0x20a)](_0x1e743a/(currentCoins['length']-0x1)*0x64);_0x5e4fae>0x1e*0x5&&(loading[_0x33f6a9(0x258)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1e743a!=_0x338f14&&(_0x338f14=_0x1e743a,emitLoadingProgress()),_0x5e4fae++,await sleep(0xc8);}if(_0x1e743a==currentCoins[_0x33f6a9(0x207)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x294081=_0x4e9cef;proxyEmit(_0x294081(0x19e),loading);}async function getFiat(){const _0x3704e2=_0x4e9cef;let _0x14245b=0x0,_0x2720de=0x0;try{_0x14245b=global[_0x3704e2(0x1f5)][stablecoins[_0x3704e2(0x1d9)][_0x3704e2(0x184)]],_0x2720de=global[_0x3704e2(0x1f5)][stablecoins[_0x3704e2(0x1f6)][_0x3704e2(0x184)]];}catch(_0x24df2d){await handleError(_0x24df2d,_0x3704e2(0x1ed));}return{'eur':Number(_0x14245b),'usd':Number(_0x2720de)};}async function setStartDatePerformance(_0x1a4b27){const _0x35d3e4=_0x4e9cef,_0x9620ad=fns['format'](new Date(_0x1a4b27[_0x35d3e4(0x1ca)]),_0x35d3e4(0x281));let _0x2f3f41=[];_0x2f3f41[stablecoins[_0x35d3e4(0x1d9)][_0x35d3e4(0x184)]]=await getCloses(stablecoins[_0x35d3e4(0x1d9)][_0x35d3e4(0x24d)],new Date(_0x1a4b27[_0x35d3e4(0x1ca)]),0x1),_0x2f3f41[stablecoins[_0x35d3e4(0x1f6)][_0x35d3e4(0x184)]]=await getCloses(stablecoins[_0x35d3e4(0x1f6)][_0x35d3e4(0x24d)],new Date(_0x1a4b27[_0x35d3e4(0x1ca)]),0x1);let _0x29597d,_0x516baf=[];_0x1a4b27['portfolio'][_0x35d3e4(0x265)](_0x4c0c2c=>{const _0x669e08=_0x35d3e4;!_0x4c0c2c[_0x669e08(0x269)]&&_0x516baf['push']({'coin':_0x4c0c2c['coin'],'number':_0x4c0c2c[_0x669e08(0x1e8)],'price':_0x4c0c2c[_0x669e08(0x1f8)]});}),_0x29597d={'date':_0x9620ad,'eur':_0x2f3f41[stablecoins[_0x35d3e4(0x1d9)][_0x35d3e4(0x184)]][0x0],'usd':_0x2f3f41[stablecoins[_0x35d3e4(0x1f6)][_0x35d3e4(0x184)]][0x0],'coins':_0x516baf};let _0x465d1a=dbPerformance[_0x35d3e4(0x1c3)](_0x35d3e4(0x1eb))[_0x35d3e4(0x1d5)]({'date':_0x9620ad})[_0x35d3e4(0x26a)]();_0x465d1a?dbPerformance[_0x35d3e4(0x1c3)](_0x35d3e4(0x1eb))[_0x35d3e4(0x1d5)]({'date':_0x9620ad})[_0x35d3e4(0x19c)](_0x29597d)[_0x35d3e4(0x245)]():dbPerformance[_0x35d3e4(0x1c3)]('data')[_0x35d3e4(0x1b4)](_0x29597d)['write'](),_0x465d1a=dbPerformance[_0x35d3e4(0x1c3)]('data')['sortBy']('date')[_0x35d3e4(0x26a)](),_0x465d1a[_0x35d3e4(0x265)](_0x56e775=>{const _0x14f2fe=_0x35d3e4;_0x56e775[_0x14f2fe(0x27b)]<_0x9620ad&&dbPerformance[_0x14f2fe(0x1c3)]('data')[_0x14f2fe(0x1ff)]({'date':_0x56e775[_0x14f2fe(0x27b)]})[_0x14f2fe(0x245)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4dfcde){const _0x147858=_0x4e9cef;let _0x5dda0c,_0x5b71c1=[];logHistory(_0x147858(0x187),_0x147858(0x179)),_0x4dfcde[_0x147858(0x1a7)][_0x147858(0x265)](_0x3521f7=>{const _0x2f5085=_0x147858;if(_0x3521f7[_0x2f5085(0x184)]!=config[_0x2f5085(0x1ee)]&&!_0x3521f7[_0x2f5085(0x269)])_0x5b71c1[_0x2f5085(0x1b4)]({'coin':_0x3521f7['coin'],'symbol':_0x3521f7[_0x2f5085(0x24d)]});});let _0x32c15c=[];try{const _0x3117da=fns['format'](fns['parseISO'](_0x4dfcde['startdate'][_0x147858(0x229)](/\//g,'-')),_0x147858(0x1c0));for(const _0x2e0f20 of _0x5b71c1){if(_0x2e0f20[_0x147858(0x184)]!=config[_0x147858(0x1ee)])_0x5dda0c=await exchange[_0x147858(0x246)](_0x2e0f20['symbol'],Date[_0x147858(0x244)](_0x3117da));_0x5dda0c[_0x147858(0x265)](_0x14147e=>{const _0x41ff0b=_0x147858,_0xfc0dbd=_0x2e0f20[_0x41ff0b(0x24d)]['includes'](config[_0x41ff0b(0x1ee)]+'/'),_0x246d10=fns[_0x41ff0b(0x210)](fns['parseISO'](_0x14147e[_0x41ff0b(0x1d7)]),_0x41ff0b(0x21b)),_0x125dd7=fns[_0x41ff0b(0x210)](fns[_0x41ff0b(0x1bb)](_0x14147e[_0x41ff0b(0x1d7)]),_0x41ff0b(0x281));let _0x52bc79;if(_0x14147e['side']==_0x41ff0b(0x191)&&_0xfc0dbd==![])_0x52bc79=_0x14147e['amount'];if(_0x14147e[_0x41ff0b(0x231)]==_0x41ff0b(0x191)&&_0xfc0dbd==!![])_0x52bc79=-_0x14147e['amount']*_0x14147e['price'];if(_0x14147e[_0x41ff0b(0x231)]==_0x41ff0b(0x242)&&_0xfc0dbd==![])_0x52bc79=-_0x14147e[_0x41ff0b(0x25f)];if(_0x14147e[_0x41ff0b(0x231)]=='sell'&&_0xfc0dbd==!![])_0x52bc79=_0x14147e['amount']*_0x14147e['price'];_0x32c15c['push']({'timestamp':_0x246d10,'date':_0x125dd7,'coin':_0x2e0f20['coin'],'symbol':_0x2e0f20[_0x41ff0b(0x24d)],'type':_0x14147e[_0x41ff0b(0x234)],'side':_0x14147e['side'],'reverse':_0xfc0dbd,'amount':formatResult(_0x14147e[_0x41ff0b(0x18f)],0x8),'filled':formatResult(_0x14147e[_0x41ff0b(0x18f)],0x8),'coinamount':formatResult(_0x52bc79,0x8),'price':formatResult(_0x14147e[_0x41ff0b(0x1ef)],0x8)});let _0x4f862f;if(_0x14147e[_0x41ff0b(0x231)]==_0x41ff0b(0x191)&&_0xfc0dbd==![])_0x4f862f=-_0x14147e[_0x41ff0b(0x25f)]*_0x14147e[_0x41ff0b(0x1ef)];if(_0x14147e['side']==_0x41ff0b(0x191)&&_0xfc0dbd==!![])_0x4f862f=_0x14147e[_0x41ff0b(0x25f)];if(_0x14147e[_0x41ff0b(0x231)]==_0x41ff0b(0x242)&&_0xfc0dbd==![])_0x4f862f=_0x14147e['amount']*_0x14147e[_0x41ff0b(0x1ef)];if(_0x14147e[_0x41ff0b(0x231)]==_0x41ff0b(0x242)&&_0xfc0dbd==!![])_0x4f862f=-_0x14147e[_0x41ff0b(0x25f)];_0x32c15c[_0x41ff0b(0x1b4)]({'date':_0x125dd7,'coin':config['basecoin'],'coinamount':formatResult(_0x4f862f,0x8)});});}_0x32c15c['sort']((_0x2c5178,_0x842d6d)=>_0x2c5178[_0x147858(0x261)]>_0x842d6d[_0x147858(0x261)]?0x1:_0x842d6d[_0x147858(0x261)]>_0x2c5178[_0x147858(0x261)]?-0x1:0x0),dbLogs['get'](_0x147858(0x1b5))[_0x147858(0x1ff)]()[_0x147858(0x245)](),_0x32c15c[_0x147858(0x265)](_0x5179fd=>{const _0x4b0f24=_0x147858;let _0x27c976;_0x5179fd[_0x4b0f24(0x184)]!=config['basecoin']&&(_0x27c976={'time':_0x5179fd['timestamp'],'type':'order','event':_0x4b0f24(0x1ea)+_0x5179fd[_0x4b0f24(0x24d)]+'\x20'+_0x5179fd[_0x4b0f24(0x231)]+'\x20#'+_0x5179fd[_0x4b0f24(0x25f)]+'\x20@'+_0x5179fd['price']},dbLogs[_0x4b0f24(0x1c3)]('logs')[_0x4b0f24(0x1b4)](_0x27c976)[_0x4b0f24(0x245)]());});const _0x3e2bf5=fns[_0x147858(0x18c)]({'start':new Date(_0x4dfcde[_0x147858(0x1ca)]),'end':new Date()})[_0x147858(0x1cf)](_0x6b3691=>fns[_0x147858(0x210)](_0x6b3691,_0x147858(0x281)));let _0x4222df=[];_0x4dfcde['portfolio'][_0x147858(0x265)](_0x31fc03=>{const _0x239117=_0x147858;if(!_0x31fc03['excluded']){_0x4222df[_0x31fc03[_0x239117(0x184)]]=[];let _0x1101fc=_0x31fc03[_0x239117(0x1e8)];_0x3e2bf5[_0x239117(0x265)]((_0x48d7d7,_0x283e4f)=>{const _0x24316c=_0x239117;let _0x59d99d=_0x32c15c[_0x24316c(0x216)](_0x49c3ab=>_0x49c3ab[_0x24316c(0x184)]==_0x31fc03['coin']&&_0x49c3ab[_0x24316c(0x27b)]==_0x48d7d7);if(_0x59d99d[_0x24316c(0x207)]!=0x0){let _0x534be9=_0x59d99d[_0x24316c(0x22d)]((_0x48a117,_0xfd3ee7)=>{return _0x48a117+=_0xfd3ee7['coinamount'],_0x48a117;},0x0);_0x1101fc+=_0x534be9;}_0x4222df[_0x31fc03[_0x24316c(0x184)]][_0x48d7d7]=_0x1101fc;});}});const _0x3f3e83=[..._0x5b71c1];_0x3f3e83[_0x147858(0x1b4)]({'coin':stablecoins[_0x147858(0x1d9)][_0x147858(0x184)],'symbol':stablecoins[_0x147858(0x1d9)][_0x147858(0x24d)]}),_0x3f3e83[_0x147858(0x1b4)]({'coin':stablecoins[_0x147858(0x1f6)][_0x147858(0x184)],'symbol':stablecoins['usd'][_0x147858(0x24d)]});let _0x1ddf6f=[];for(const _0x8b28d8 of _0x3f3e83){_0x1ddf6f[_0x8b28d8['coin']]=await getCloses(_0x8b28d8[_0x147858(0x24d)],new Date(_0x4dfcde['startdate']));}dbPerformance[_0x147858(0x1c3)](_0x147858(0x1eb))[_0x147858(0x1ff)]()[_0x147858(0x245)](),_0x3e2bf5[_0x147858(0x265)]((_0x2d2d70,_0x1d2614)=>{const _0x56c440=_0x147858;let _0x5c053d,_0x46aa7b=[];_0x1d2614==0x0?(_0x4dfcde[_0x56c440(0x1a7)][_0x56c440(0x265)](_0x46a088=>{const _0x27b034=_0x56c440;!_0x46a088[_0x27b034(0x269)]&&_0x46aa7b[_0x27b034(0x1b4)]({'coin':_0x46a088['coin'],'number':_0x46a088[_0x27b034(0x1e8)],'price':_0x46a088['startprice']});}),_0x5c053d={'date':_0x2d2d70,'eur':_0x1ddf6f[stablecoins[_0x56c440(0x1d9)][_0x56c440(0x184)]][_0x1d2614],'usd':_0x1ddf6f[stablecoins[_0x56c440(0x1f6)][_0x56c440(0x184)]][_0x1d2614],'coins':_0x46aa7b}):(_0x4dfcde['portfolio'][_0x56c440(0x265)](_0x40ea39=>{const _0x3dceff=_0x56c440;!_0x40ea39[_0x3dceff(0x269)]&&_0x46aa7b[_0x3dceff(0x1b4)]({'coin':_0x40ea39[_0x3dceff(0x184)],'number':_0x4222df[_0x40ea39[_0x3dceff(0x184)]][_0x2d2d70],'price':_0x40ea39[_0x3dceff(0x184)]==config[_0x3dceff(0x1ee)]?0x1:_0x1ddf6f[_0x40ea39[_0x3dceff(0x184)]][_0x1d2614]});}),_0x5c053d={'date':_0x2d2d70,'eur':_0x1ddf6f[stablecoins[_0x56c440(0x1d9)]['coin']][_0x1d2614],'usd':_0x1ddf6f[stablecoins[_0x56c440(0x1f6)][_0x56c440(0x184)]][_0x1d2614],'coins':_0x46aa7b}),dbPerformance[_0x56c440(0x1c3)]('data')[_0x56c440(0x1b4)](_0x5c053d)[_0x56c440(0x245)]();}),emitPerformance(),await resetCoinResults();for(let _0x37d4cd of _0x32c15c){_0x37d4cd[_0x147858(0x184)]!=config[_0x147858(0x1ee)]&&await updateCoinResults(_0x37d4cd);}logHistory(_0x147858(0x187),_0x147858(0x240));}catch(_0xe323e1){await handleError(_0xe323e1,_0x147858(0x1e5));}}async function getCloses(_0x4cc77a,_0x32bee3,_0x42bc49=undefined){const _0x472f92=_0x4e9cef,_0xb9d2c0='1d';let _0x5ca18c,_0x24173a;const _0x4ba3b5=fns['differenceInCalendarDays'](new Date(),_0x32bee3)+0x1;try{const _0x46f2b1=exchange['milliseconds']()-_0x4ba3b5*0x18*0xe10*0x3e8;_0x5ca18c=await exchange[_0x472f92(0x1fe)](_0x4cc77a,_0xb9d2c0,_0x46f2b1,_0x42bc49),_0x24173a=await exchange[_0x472f92(0x196)](_0x4cc77a);}catch(_0x1df0c2){await handleError(_0x1df0c2,'getCloses()');}let _0x13334d=ohlcvToCloses(_0x5ca18c);return _0x13334d[_0x472f92(0x1b4)](_0x24173a[_0x4cc77a][_0x472f92(0x250)]),_0x13334d;}function ohlcvToCloses(_0x59ed3c){const _0x4d1719=_0x4e9cef;let _0x584d7a=[];return _0x59ed3c[_0x4d1719(0x265)](function(_0x1f0dda){const _0xa74d1e=_0x4d1719;_0x584d7a[_0xa74d1e(0x1b4)](_0x1f0dda[0x4]);}),_0x584d7a;}function getConfiguration(_0xeaecaa){const _0x48942b=_0x4e9cef;let _0x1d5c23=dbConfig[_0x48942b(0x1c3)](_0x48942b(0x25c))[_0x48942b(0x1d5)]({'botID':_0xeaecaa})[_0x48942b(0x26a)]();if(_0x1d5c23){let _0x5afc12=![];!_0x1d5c23['exchange']&&(_0x1d5c23={..._0x1d5c23,'exchange':_0x48942b(0x241)},_0x5afc12=!![]),!_0x1d5c23['basecoin']&&(_0x1d5c23={..._0x1d5c23,'basecoin':'BTC'},_0x5afc12=!![]),!_0x1d5c23[_0x48942b(0x202)]&&(_0x1d5c23={..._0x1d5c23,'ordertype':_0x48942b(0x1ae)},_0x5afc12=!![]),!_0x1d5c23[_0x48942b(0x258)]&&(_0x1d5c23={..._0x1d5c23,'timeout':0x14},_0x5afc12=!![]),!_0x1d5c23['emojibuy']&&(_0x1d5c23={..._0x1d5c23,'emojibuy':''},_0x5afc12=!![]),!_0x1d5c23['emojisell']&&(_0x1d5c23={..._0x1d5c23,'emojisell':''},_0x5afc12=!![]),!_0x1d5c23[_0x48942b(0x27e)]&&(_0x1d5c23={..._0x1d5c23,'showname':![]},_0x5afc12=!![]),_0x5afc12&&(_0x1d5c23={'botID':_0x1d5c23[_0x48942b(0x219)],'exchange':_0x1d5c23[_0x48942b(0x193)],'apiKey':_0x1d5c23['apiKey'],'apiSecret':_0x1d5c23['apiSecret'],'basecoin':_0x1d5c23[_0x48942b(0x1ee)],'botname':_0x1d5c23['botname'],'showname':_0x1d5c23['showname'],'threshold':_0x1d5c23[_0x48942b(0x224)],'ordertype':_0x1d5c23[_0x48942b(0x202)],'timeout':_0x1d5c23[_0x48942b(0x258)],'startdate':_0x1d5c23[_0x48942b(0x1ca)],'recreate':_0x1d5c23[_0x48942b(0x255)],'timeshift':_0x1d5c23[_0x48942b(0x247)],'headless':_0x1d5c23['headless'],'cooldown':_0x1d5c23[_0x48942b(0x1fa)],'emojibuy':_0x1d5c23['emojibuy'],'emojisell':_0x1d5c23[_0x48942b(0x212)],'portfolio':_0x1d5c23['portfolio']},dbConfig[_0x48942b(0x1c3)](_0x48942b(0x25c))[_0x48942b(0x1ff)]()['write'](),dbConfig[_0x48942b(0x1c3)](_0x48942b(0x25c))[_0x48942b(0x1b4)](_0x1d5c23)['write']());}else _0x1d5c23={'botID':_0xeaecaa,'exchange':_0x48942b(0x241),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0xeaecaa,'showname':![],'threshold':'3','ordertype':_0x48942b(0x1ae),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x48942b(0x247)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1d5c23;}function emittedConfiguration(){const _0x351c24=_0x4e9cef;let _0x41ee6c;return config['apiKey']==''?_0x41ee6c=config:_0x41ee6c={...config,'apiKey':_0x351c24(0x236),'apiSecret':_0x351c24(0x236)},_0x41ee6c;}function getSettings(){const _0x19f50f=_0x4e9cef;return dbSettings[_0x19f50f(0x1c3)]('settings')[_0x19f50f(0x26a)]();}function getSecure(){const _0x51b3c9=_0x4e9cef;return dbSecure[_0x51b3c9(0x1c3)](_0x51b3c9(0x21e))[_0x51b3c9(0x26a)]()||{};}function updateTimeshift(_0x4f1777){const _0x5a3398=_0x4e9cef;let _0x2d651f=dbConfig[_0x5a3398(0x1c3)](_0x5a3398(0x25c))[_0x5a3398(0x1d5)]({'botID':botID})[_0x5a3398(0x26a)]();_0x2d651f&&dbConfig[_0x5a3398(0x1c3)](_0x5a3398(0x25c))[_0x5a3398(0x1d5)]({'botID':botID})[_0x5a3398(0x19c)]({'timeshift':_0x4f1777})[_0x5a3398(0x245)](),config[_0x5a3398(0x247)]=_0x4f1777,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2d8d00){const _0x4ff3af=_0x4e9cef;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x35b731=dbConfig[_0x4ff3af(0x1c3)](_0x4ff3af(0x25c))['find']({'botID':botID})[_0x4ff3af(0x26a)]();_0x2d8d00={..._0x2d8d00,'apiKey':crypt[_0x4ff3af(0x268)](secure[_0x4ff3af(0x1f4)],_0x2d8d00[_0x4ff3af(0x284)])['message'],'apiSecret':crypt[_0x4ff3af(0x268)](secure['privateKey'],_0x2d8d00['apiSecret'])[_0x4ff3af(0x182)]};if(_0x35b731){if(_0x2d8d00[_0x4ff3af(0x284)]==_0x4ff3af(0x236))_0x2d8d00[_0x4ff3af(0x284)]=config[_0x4ff3af(0x284)];if(_0x2d8d00[_0x4ff3af(0x198)]==_0x4ff3af(0x236))_0x2d8d00[_0x4ff3af(0x198)]=config[_0x4ff3af(0x198)];dbConfig[_0x4ff3af(0x1c3)](_0x4ff3af(0x25c))[_0x4ff3af(0x1d5)]({'botID':botID})[_0x4ff3af(0x19c)](_0x2d8d00)['write']();}else dbConfig[_0x4ff3af(0x1c3)](_0x4ff3af(0x25c))['push'](_0x2d8d00)[_0x4ff3af(0x245)](),process[_0x4ff3af(0x1cd)]({'status':_0x4ff3af(0x238),'live':'running'});config={..._0x2d8d00};if(config[_0x4ff3af(0x255)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x4ff3af(0x1cd)]({'botname':_0x2d8d00['botname']}),proxyEmit(_0x4ff3af(0x1b1)),reset();}async function storeHeadless(_0x17a643){const _0x5845bc=_0x4e9cef,_0x514d37={...config,'headless':_0x17a643['headless']};let _0x186fa0=dbConfig['get'](_0x5845bc(0x25c))[_0x5845bc(0x1d5)]({'botID':botID})[_0x5845bc(0x26a)]();_0x186fa0&&dbConfig[_0x5845bc(0x1c3)](_0x5845bc(0x25c))['find']({'botID':botID})[_0x5845bc(0x19c)](_0x514d37)[_0x5845bc(0x245)](),config={..._0x514d37},proxyEmit(_0x5845bc(0x249),emittedConfiguration());}function noslash(_0x4d856f){const _0x35a4c5=_0x4e9cef;return _0x4d856f[_0x35a4c5(0x229)]('/','');}function updateNumberCoins(_0x4e3f6a){const _0xf6e46=_0x4e9cef;_0x4e3f6a[_0xf6e46(0x188)]&&_0x4e3f6a[_0xf6e46(0x188)]==_0xf6e46(0x248)&&_0x4e3f6a[_0xf6e46(0x26b)][_0xf6e46(0x265)](_0x217826=>{const _0x23d2b0=_0xf6e46;let _0x25f53a=currentCoins[_0x23d2b0(0x1d5)](_0x5079c0=>_0x5079c0[_0x23d2b0(0x184)]==_0x217826[_0x23d2b0(0x1d3)]),_0x40c107=config[_0x23d2b0(0x1a7)][_0x23d2b0(0x1d5)](_0x4c39e5=>_0x4c39e5[_0x23d2b0(0x184)]==_0x217826[_0x23d2b0(0x1d3)]);if(_0x25f53a&&_0x40c107)_0x25f53a[_0x23d2b0(0x190)]=Math[_0x23d2b0(0x1f7)](Number(_0x217826[_0x23d2b0(0x1e7)])+(_0x40c107[_0x23d2b0(0x1be)]||0x0),0x0);});if(_0x4e3f6a['eventType']&&_0x4e3f6a[_0xf6e46(0x188)]=='executionReport'){if(_0x4e3f6a[_0xf6e46(0x24f)]=='LIMIT'&&_0x4e3f6a[_0xf6e46(0x27d)]==_0xf6e46(0x1e4)){if(lastOrders)lastOrders[_0xf6e46(0x265)](_0x382dca=>{const _0x3d7040=_0xf6e46;if(_0x382dca[_0x3d7040(0x18d)]==_0x4e3f6a['orderId']){if(_0x382dca[_0x3d7040(0x20d)])_0x382dca['filled']=_0x4e3f6a[_0x3d7040(0x273)]*_0x382dca[_0x3d7040(0x1ef)];else _0x382dca[_0x3d7040(0x18f)]=_0x4e3f6a[_0x3d7040(0x273)];}});}}}async function getCoins(_0x20cc68=!![],_0x2b409e=config[_0x4e9cef(0x1ee)]){const _0xac0910=_0x4e9cef;let _0x4f8a4f,_0x5503cc=[],_0x55b5b3=[],_0x591046=[];try{_0x4f8a4f=await exchange[_0xac0910(0x24e)](),mybalances=_0x4f8a4f['total'];if(!_0x20cc68)for(const [_0x54ba46,_0x20a21b]of Object[_0xac0910(0x274)](mybalances)){_0x591046[_0xac0910(0x1b4)](_0x54ba46);}else config['portfolio'][_0xac0910(0x265)](_0x1b1fd9=>{const _0x56635a=_0xac0910;if(!_0x1b1fd9[_0x56635a(0x269)])_0x591046[_0x56635a(0x1b4)](_0x1b1fd9[_0x56635a(0x184)]);});if(_0x2b409e=='')for(const [_0x3181c7,_0x2e85f5]of Object['entries'](mybalances)){_0x2e85f5['toString']()!=0x0&&_0x55b5b3['push']({'coin':_0x3181c7});}else for(const [_0x579f0b,_0x5a2d34]of Object[_0xac0910(0x274)](mybalances)){if(_0x591046['includes'](_0x579f0b)){const _0xba2134=config[_0xac0910(0x1a7)][_0xac0910(0x1d5)](_0x2e289d=>_0x2e289d[_0xac0910(0x184)]==_0x579f0b);if((_0x5a2d34[_0xac0910(0x1c6)]()!=0x0||_0xba2134)&&(allSymbols[_0xac0910(0x1c7)](_0x579f0b+'/'+_0x2b409e)||_0x579f0b==_0x2b409e))_0x55b5b3['push']({'coin':_0x579f0b,'symbol':_0x579f0b+'/'+_0x2b409e,'reverse':![],'number':Math[_0xac0910(0x1f7)](_0x5a2d34+(_0xba2134&&_0xba2134[_0xac0910(0x1be)]||0x0),0x0)}),_0x579f0b!=_0x2b409e&&_0x5503cc[_0xac0910(0x1b4)](_0x579f0b+'/'+_0x2b409e);else(_0x5a2d34[_0xac0910(0x1c6)]()!=0x0||_0xba2134)&&allSymbols[_0xac0910(0x1c7)](_0x2b409e+'/'+_0x579f0b)&&(_0x55b5b3[_0xac0910(0x1b4)]({'coin':_0x579f0b,'symbol':_0x2b409e+'/'+_0x579f0b,'reverse':!![],'number':Math[_0xac0910(0x1f7)](_0x5a2d34+(_0xba2134&&_0xba2134['offset']||0x0),0x0)}),_0x579f0b!=_0x2b409e&&_0x5503cc[_0xac0910(0x1b4)](_0x2b409e+'/'+_0x579f0b));}}}catch(_0x366caf){if(!_0x20cc68){if(_0x366caf[_0xac0910(0x1c6)]()[_0xac0910(0x1c7)](_0xac0910(0x1f9)))return logHistory(_0xac0910(0x195),_0xac0910(0x1cc)),![];else{if(_0x366caf[_0xac0910(0x1c6)]()['includes'](_0xac0910(0x1a1)))return logHistory(_0xac0910(0x195),_0xac0910(0x217)),![];else{if(_0x366caf[_0xac0910(0x1c6)]()[_0xac0910(0x1c7)](_0xac0910(0x25b)))return logHistory('error',_0xac0910(0x1a8)),![];else await handleError(_0x366caf,_0xac0910(0x289));}}}else await handleError(_0x366caf,_0xac0910(0x289));}return _0x55b5b3;}async function getPortfolio(_0x491d8f){const _0x2a885b=_0x4e9cef;let _0x2a245f=[],_0x440698=[],_0x5c5a16,_0x3f41c9=[],_0xff4a59,_0x31ef5a;_0x491d8f['apiKey']==='************'||_0x491d8f['apiSecret']===_0x2a885b(0x236)?(_0xff4a59=config['apiKey'],_0x31ef5a=config[_0x2a885b(0x198)]):(_0xff4a59=_0x491d8f[_0x2a885b(0x284)],_0x31ef5a=_0x491d8f[_0x2a885b(0x198)]);await initExchange(_0xff4a59,_0x31ef5a);let _0xb54692=await loadSymbols();if(_0xb54692){_0x3f41c9=await getCoins(![],_0x491d8f[_0x2a885b(0x1ee)]);if(_0x3f41c9===![])proxyEmit(_0x2a885b(0x1a7),![]);else{if(_0x491d8f[_0x2a885b(0x1ee)]=='')proxyEmit(_0x2a885b(0x1a7),_0x3f41c9);else{_0x3f41c9[_0x2a885b(0x265)](_0x20a752=>{_0x2a245f['push'](_0x20a752['symbol']);});try{_0x440698=await exchange[_0x2a885b(0x196)](_0x2a245f);}catch(_0x260c85){await handleError(_0x260c85,_0x2a885b(0x18e));}_0x3f41c9[_0x2a885b(0x265)](_0x1f40da=>{const _0x5388bc=_0x2a885b;_0x1f40da[_0x5388bc(0x184)]!=_0x491d8f[_0x5388bc(0x1ee)]?_0x5c5a16=_0x1f40da[_0x5388bc(0x20d)]?0x1/_0x440698[_0x1f40da[_0x5388bc(0x24d)]][_0x5388bc(0x250)]:_0x440698[_0x1f40da[_0x5388bc(0x24d)]][_0x5388bc(0x250)]:_0x5c5a16=0x1,_0x1f40da[_0x5388bc(0x1ef)]=formatResult(_0x5c5a16,0x8);}),proxyEmit(_0x2a885b(0x1a7),_0x3f41c9);}}}else proxyEmit(_0x2a885b(0x1a7),![]);}function checkMinimums(_0x2254e8){const _0xf1f71e=_0x4e9cef;let _0x522ea4=!![];const _0x1a9304=!_0x2254e8[_0xf1f71e(0x20d)]?markets[_0x2254e8[_0xf1f71e(0x24d)]][_0xf1f71e(0x237)][_0xf1f71e(0x25f)][_0xf1f71e(0x1f3)]:markets[_0x2254e8[_0xf1f71e(0x24d)]][_0xf1f71e(0x237)][_0xf1f71e(0x17c)][_0xf1f71e(0x1f3)],_0x36a087=!_0x2254e8[_0xf1f71e(0x20d)]?markets[_0x2254e8[_0xf1f71e(0x24d)]][_0xf1f71e(0x237)][_0xf1f71e(0x17c)][_0xf1f71e(0x1f3)]:markets[_0x2254e8[_0xf1f71e(0x24d)]]['limits'][_0xf1f71e(0x25f)]['min'];if(Math[_0xf1f71e(0x1e0)](_0x2254e8['trade'])<_0x1a9304)_0x522ea4=![];if(Math[_0xf1f71e(0x1e0)](_0x2254e8[_0xf1f71e(0x259)])*_0x2254e8[_0xf1f71e(0x250)]<_0x36a087)_0x522ea4=![];return _0x522ea4;}async function getBalances(){const _0x450d9d=_0x4e9cef;let _0x28e540=0x0,_0x4ae5bc;const _0x4fc1e4=config[_0x450d9d(0x224)];currentCoins[_0x450d9d(0x265)](_0x22a091=>{const _0x2b4856=_0x450d9d;if(_0x22a091[_0x2b4856(0x184)]!=config['basecoin']){let _0x30ba0c=global['ticker'][noslash(_0x22a091[_0x2b4856(0x24d)])];_0x4ae5bc=_0x22a091[_0x2b4856(0x20d)]?0x1/_0x30ba0c:_0x30ba0c;}else _0x4ae5bc=0x1;let _0x379fad=_0x22a091['number']*_0x4ae5bc;_0x28e540+=_0x379fad,_0x22a091[_0x2b4856(0x250)]=formatResult(Number(_0x4ae5bc),0x8),_0x22a091[_0x2b4856(0x26a)]=_0x379fad;}),currentCoins[_0x450d9d(0x265)](_0x3bfdb2=>{const _0x699ad1=_0x450d9d;let _0xa8cbbb=config[_0x699ad1(0x1a7)][_0x699ad1(0x1d5)](_0x2def47=>_0x2def47['coin']==_0x3bfdb2['coin']),_0x2d8c8a=Number(_0xa8cbbb['distribution']),_0x25a2e5=_0x3bfdb2[_0x699ad1(0x26a)]/_0x28e540*0x64,_0x1b619b=_0x2d8c8a*_0x28e540/0x64/_0x3bfdb2[_0x699ad1(0x250)]-_0x3bfdb2['number'];_0x3bfdb2['distribution']=formatResult(_0x25a2e5,0x3),_0x3bfdb2[_0x699ad1(0x1fc)]=formatResult(_0x2d8c8a,0x3),_0x3bfdb2[_0x699ad1(0x259)]=formatResult(_0x1b619b,0x8),_0x3bfdb2['side']='',_0x3bfdb2[_0x699ad1(0x1de)]='';if(_0x3bfdb2[_0x699ad1(0x184)]!=config[_0x699ad1(0x1ee)]){if(_0x3bfdb2[_0x699ad1(0x1b8)]>_0x2d8c8a)_0x3bfdb2['side']=_0x699ad1(0x242),_0x3bfdb2['valid']=checkMinimums(_0x3bfdb2);else _0x3bfdb2[_0x699ad1(0x1b8)]<_0x2d8c8a&&(_0x3bfdb2[_0x699ad1(0x231)]=_0x699ad1(0x191),_0x3bfdb2[_0x699ad1(0x1de)]=checkMinimums(_0x3bfdb2));}_0x3bfdb2['delta']=_0x3bfdb2[_0x699ad1(0x1b8)]/_0x3bfdb2['target']-0x1;}),currentCoins[_0x450d9d(0x230)]((_0x40e142,_0x110df1)=>_0x40e142[_0x450d9d(0x222)]<_0x110df1['delta']?0x1:_0x110df1[_0x450d9d(0x222)]<_0x40e142[_0x450d9d(0x222)]?-0x1:0x0);const _0x48b938=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x48b938[_0x450d9d(0x1d9)],'usd':_0x48b938[_0x450d9d(0x1f6)],'portfolio':JSON[_0x450d9d(0x26f)](currentCoins),'threshold':_0x4fc1e4},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x450d9d(0x1c5)])headlessMode({'portfolio':currentCoins,'threshold':_0x4fc1e4});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2bc239=_0x4e9cef;if(!lastBalances)return;let _0x4c5093=await getStartingBalances(![]),_0x164db4=[],_0x2c2bee;JSON[_0x2bc239(0x244)](lastBalances['portfolio'])['forEach'](_0x1548c5=>{const _0x3b0c8b=_0x2bc239;let _0x9e18b8={'coin':_0x1548c5[_0x3b0c8b(0x184)],'number':_0x1548c5['number'],'price':_0x1548c5[_0x3b0c8b(0x250)]};_0x164db4[_0x3b0c8b(0x1b4)](_0x9e18b8);});const _0x1610f0=await getFiat();_0x2c2bee={'date':lastBalances[_0x2bc239(0x1fb)][_0x2bc239(0x1fd)]('\x20')[0x0],'eur':_0x1610f0[_0x2bc239(0x1d9)],'usd':_0x1610f0['usd'],'coins':_0x164db4};let _0x3ff04d=dbPerformance[_0x2bc239(0x1c3)](_0x2bc239(0x1eb))[_0x2bc239(0x1d5)]({'date':_0x2c2bee[_0x2bc239(0x27b)]})['value']();_0x3ff04d?dbPerformance['get']('data')[_0x2bc239(0x1d5)]({'date':_0x2c2bee[_0x2bc239(0x27b)]})[_0x2bc239(0x19c)](_0x2c2bee)['write']():dbPerformance[_0x2bc239(0x1c3)](_0x2bc239(0x1eb))['push'](_0x2c2bee)[_0x2bc239(0x245)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x2d0c36=_0x4e9cef;if(dbPerformance[_0x2d0c36(0x189)]('data')[_0x2d0c36(0x26a)]()){let _0x50598d=dbPerformance[_0x2d0c36(0x1c3)](_0x2d0c36(0x1eb))['sortBy'](_0x2d0c36(0x27b))[_0x2d0c36(0x26a)]();proxyEmit(_0x2d0c36(0x1cb),_0x50598d),lastPerformanceEmitted=getDate();}else proxyEmit(_0x2d0c36(0x1cb),[]);}async function getStartingBalances(_0x924cca=!![]){const _0x80c75d=_0x4e9cef;let _0x39fa87=dbPerformance[_0x80c75d(0x1c3)]('data')['find']({'date':config[_0x80c75d(0x1ca)]})[_0x80c75d(0x26a)]();config[_0x80c75d(0x284)]!=''&&!_0x39fa87&&(await setStartDatePerformance(config),_0x39fa87=dbPerformance[_0x80c75d(0x1c3)](_0x80c75d(0x1eb))[_0x80c75d(0x1d5)]({'date':config['startdate']})[_0x80c75d(0x26a)]());if(config[_0x80c75d(0x284)]==''||!_0x39fa87)return{};let _0x5b012f=0x0,_0x480743=0x0,_0x2c35f9=0x0,_0x49b495=[],_0xa07be4=0x0;config[_0x80c75d(0x1a7)][_0x80c75d(0x265)](_0x3fb3ca=>{const _0x3e26f4=_0x80c75d;if(!_0x3fb3ca[_0x3e26f4(0x269)]){_0x49b495[_0xa07be4]={'coin':_0x3fb3ca['coin'],'symbol':_0x3fb3ca[_0x3e26f4(0x24d)],'number':_0x3fb3ca[_0x3e26f4(0x1e8)],'price':_0x3fb3ca[_0x3e26f4(0x1f8)]},_0x5b012f+=_0x3fb3ca['startprice']*_0x3fb3ca[_0x3e26f4(0x1e8)];if(config['basecoin']==_0x3e26f4(0x17e))_0x480743+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca[_0x3e26f4(0x1e8)]*_0x39fa87[_0x3e26f4(0x1d9)],_0x2c35f9+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca['startnumber']*_0x39fa87['usd'];else{if(config[_0x3e26f4(0x1ee)]==_0x3e26f4(0x1bd)||config[_0x3e26f4(0x1ee)]=='USDT'||config[_0x3e26f4(0x1ee)]==_0x3e26f4(0x20b))_0x480743+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca['startnumber']*_0x39fa87['eur']/_0x39fa87['usd'],_0x2c35f9+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca[_0x3e26f4(0x1e8)];else config['basecoin']==_0x3e26f4(0x23c)&&(_0x480743+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca[_0x3e26f4(0x1e8)],_0x2c35f9+=_0x3fb3ca[_0x3e26f4(0x1f8)]*_0x3fb3ca['startnumber']*_0x39fa87[_0x3e26f4(0x1f6)]/_0x39fa87[_0x3e26f4(0x1d9)]);}_0xa07be4++;}});let _0x555e3f={'basecoin':_0x5b012f,'eur':_0x480743,'usd':_0x2c35f9,'coins':_0x49b495};if(_0x924cca)proxyEmit('starting-balances',_0x555e3f);return _0x555e3f;}function headlessMode(_0x43e694){const _0x537747=_0x4e9cef;let _0x2d886c=_0x43e694['portfolio'],_0x556915=_0x43e694[_0x537747(0x224)],_0x3b11c6=[];for(let _0x7d862 of _0x2d886c){if(_0x7d862[_0x537747(0x184)]!=config[_0x537747(0x1ee)]){if(_0x7d862[_0x537747(0x1b8)]/_0x7d862[_0x537747(0x1fc)]-0x1>=_0x556915/0x64){if(_0x7d862['valid'])_0x3b11c6[_0x537747(0x1b4)](_0x7d862);}else{if(_0x7d862[_0x537747(0x1b8)]/_0x7d862[_0x537747(0x1fc)]-0x1<=-_0x556915/0x64){if(_0x7d862['valid'])_0x3b11c6[_0x537747(0x1b4)](_0x7d862);}}}}_0x3b11c6[_0x537747(0x207)]>0x0&&placeOrder(_0x3b11c6);}function symbolToCoin(_0x2fa9f7){const _0x3a7645=_0x4e9cef;let _0x14d748;if(_0x2fa9f7['includes']('/'+config[_0x3a7645(0x1ee)]))_0x14d748=_0x2fa9f7['replace']('/'+config[_0x3a7645(0x1ee)],'');if(_0x2fa9f7[_0x3a7645(0x1c7)](config[_0x3a7645(0x1ee)]+'/'))_0x14d748=_0x2fa9f7[_0x3a7645(0x229)](config[_0x3a7645(0x1ee)]+'/','');return _0x14d748;}async function validateOrders(_0xf654ca=0x0){const _0x316d9e=_0x4e9cef;let _0x4b9e5f=[],_0x1b4f3b=config[_0x316d9e(0x202)]==_0x316d9e(0x1ae)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x316d9e(0x258)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x5dc757=>{const _0x24518f=_0x316d9e;let _0x37dbbf=previousCoins[_0x24518f(0x1d5)](_0x6c93b7=>_0x6c93b7[_0x24518f(0x184)]==symbolToCoin(_0x5dc757['symbol'])),_0xace10d=currentCoins[_0x24518f(0x1d5)](_0x14bff9=>_0x14bff9['coin']==symbolToCoin(_0x5dc757[_0x24518f(0x24d)])),_0x30b7ff,_0x3a4fd2;_0x5dc757[_0x24518f(0x231)]==_0x24518f(0x191)&&!_0x5dc757['reverse']||_0x5dc757[_0x24518f(0x231)]=='sell'&&_0x5dc757[_0x24518f(0x20d)]?(_0x30b7ff=_0x37dbbf[_0x24518f(0x190)]+0.9*_0x5dc757[_0x24518f(0x18f)],_0x3a4fd2=_0x37dbbf[_0x24518f(0x190)]+1.1*_0x5dc757[_0x24518f(0x18f)]):(_0x30b7ff=_0x37dbbf[_0x24518f(0x190)]-1.1*_0x5dc757[_0x24518f(0x18f)],_0x3a4fd2=_0x37dbbf[_0x24518f(0x190)]-0.9*_0x5dc757['filled']);const _0x3f40b6=_0x5dc757[_0x24518f(0x18f)]!=0x0&&_0xace10d[_0x24518f(0x190)]>=_0x30b7ff&&_0xace10d[_0x24518f(0x190)]<=_0x3a4fd2;_0x4b9e5f[_0x24518f(0x1b4)](_0x3f40b6);if(_0x3f40b6&&config['ordertype']!=_0x24518f(0x1ae)){if(_0x5dc757['reverse'])logHistory(_0x24518f(0x254),'Order\x20filled:\x20'+_0x5dc757[_0x24518f(0x24d)]+'\x20'+_0x5dc757['side']+'\x20#'+formatResult(_0x5dc757[_0x24518f(0x18f)]/_0x5dc757[_0x24518f(0x1ef)],0x8)+'\x20@'+formatResult(_0x5dc757['price'],0x8));else logHistory(_0x24518f(0x254),_0x24518f(0x1e9)+_0x5dc757['symbol']+'\x20'+_0x5dc757[_0x24518f(0x231)]+'\x20#'+formatResult(_0x5dc757[_0x24518f(0x18f)],0x8)+'\x20@'+formatResult(_0x5dc757['price'],0x8));}}),_0x4b9e5f[_0x316d9e(0x265)]((_0xffb8db,_0x204286)=>{const _0x57e057=_0x316d9e;if(_0xffb8db)lastOrders[_0x57e057(0x17d)](_0x204286,0x1);});if(_0xf654ca<_0x1b4f3b&&_0x4b9e5f[_0x316d9e(0x1c7)](![])){if(_0xf654ca==0x0){config[_0x316d9e(0x202)]==_0x316d9e(0x1ae)?logHistory('error',_0x316d9e(0x279)):logHistory(_0x316d9e(0x195),_0x316d9e(0x239));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xf654ca);},0xa*0x3e8);}else{(_0xf654ca==0x1||_0xf654ca==Math['round'](_0x1b4f3b/0x2)||_0xf654ca==_0x1b4f3b-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xf654ca);},validateOrderInterval);}}else{lockOrders=![];if(_0xf654ca>0x0&&!_0x4b9e5f[_0x316d9e(0x1c7)](![]))config[_0x316d9e(0x202)]==_0x316d9e(0x1ae)?logHistory(_0x316d9e(0x187),_0x316d9e(0x243)):logHistory(_0x316d9e(0x187),_0x316d9e(0x272));else _0xf654ca>0x0&&_0x4b9e5f['includes'](![])&&(config[_0x316d9e(0x202)]==_0x316d9e(0x1ae)?logHistory(_0x316d9e(0x187),_0x316d9e(0x267)+Math[_0x316d9e(0x20a)](_0x1b4f3b*validateOrderInterval/0xea60)+_0x316d9e(0x199)):(lastOrders['forEach'](async _0x2f0d62=>{const _0x2916c8=_0x316d9e;try{const _0x56c96b=await exchange[_0x2916c8(0x226)](_0x2f0d62[_0x2916c8(0x18d)],_0x2f0d62[_0x2916c8(0x24d)]);}catch(_0x469b78){if(_0x469b78[_0x2916c8(0x1c6)]()['includes'](_0x2916c8(0x20e))){}else await handleError(_0x469b78,'cancelOrder()');}}),logHistory(_0x316d9e(0x187),_0x316d9e(0x185)+Math['round'](_0x1b4f3b*validateOrderInterval/0xea60)+_0x316d9e(0x199))));}}async function resetCoinResults(){const _0x4a53fa=_0x4e9cef;dbCoinResults[_0x4a53fa(0x1c3)](_0x4a53fa(0x1f0))['remove']()[_0x4a53fa(0x245)]();let _0x4b585c=await getStartingBalances(![]);_0x4b585c['coins'][_0x4a53fa(0x265)](_0x3918c7=>{const _0x40be4e=_0x4a53fa,_0xc24e76=_0x3918c7[_0x40be4e(0x24d)][_0x40be4e(0x1c7)](config[_0x40be4e(0x1ee)]+'/');if(_0x3918c7['coin']!=config['basecoin']){let _0x3bcbf3={'coin':_0x3918c7['coin'],'number':_0x3918c7[_0x40be4e(0x190)],'breakeven':_0x3918c7['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x40be4e(0x1c3)](_0x40be4e(0x1f0))[_0x40be4e(0x1b4)](_0x3bcbf3)[_0x40be4e(0x245)]();}});}async function updateCoinResults(_0x4e3d86){const _0x591092=_0x4e9cef;let _0x1c3cf6,_0x1d3f59,_0x332d36,_0xbdcf4c,_0x71451,_0x51169d,_0x41558f=dbCoinResults[_0x591092(0x1c3)](_0x591092(0x1f0))[_0x591092(0x1d5)]({'coin':_0x4e3d86['coin']})['value']();if(!_0x41558f)return;if(_0x4e3d86['fee']&&_0x4e3d86[_0x591092(0x1d4)][_0x591092(0x186)]==config[_0x591092(0x1ee)])_0x1c3cf6=_0x4e3d86[_0x591092(0x1d4)][_0x591092(0x17c)];else{if(_0x4e3d86[_0x591092(0x1d4)]&&_0x4e3d86[_0x591092(0x1d4)][_0x591092(0x186)]==_0x591092(0x227))_0x1c3cf6=_0x4e3d86[_0x591092(0x1d4)][_0x591092(0x17c)]*global['ticker'][_0x591092(0x227)+config[_0x591092(0x1ee)]];else _0x1c3cf6=0.001*_0x4e3d86[_0x591092(0x18f)];}const _0x3a9e8b=_0x4e3d86[_0x591092(0x24d)][_0x591092(0x1c7)](config[_0x591092(0x1ee)]+'/');_0x3a9e8b&&(_0x51169d={'coin':_0x4e3d86[_0x591092(0x184)],'symbol':_0x4e3d86[_0x591092(0x24d)],'filled':_0x4e3d86[_0x591092(0x18f)]*_0x4e3d86['price'],'side':_0x4e3d86[_0x591092(0x231)]==_0x591092(0x242)?_0x591092(0x191):_0x591092(0x242),'price':0x1/_0x4e3d86[_0x591092(0x1ef)]},_0x4e3d86={..._0x51169d});_0x4e3d86['side']==_0x591092(0x191)?_0x332d36=(_0x41558f[_0x591092(0x1f1)]*_0x41558f[_0x591092(0x190)]+_0x4e3d86[_0x591092(0x1ef)]*_0x4e3d86[_0x591092(0x18f)])/(_0x41558f[_0x591092(0x190)]+_0x4e3d86[_0x591092(0x18f)]):_0x332d36=(_0x41558f['breakeven']*_0x41558f[_0x591092(0x190)]-_0x4e3d86[_0x591092(0x1ef)]*_0x4e3d86[_0x591092(0x18f)])/(_0x41558f[_0x591092(0x190)]-_0x4e3d86['filled']);_0x4e3d86[_0x591092(0x231)]==_0x591092(0x191)?_0xbdcf4c=_0x41558f[_0x591092(0x21f)]:_0xbdcf4c=_0x41558f[_0x591092(0x21f)]+(_0x4e3d86[_0x591092(0x1ef)]-_0x41558f['breakeven'])*_0x4e3d86[_0x591092(0x18f)];_0x1d3f59=_0x4e3d86[_0x591092(0x231)]==_0x591092(0x242)?_0x41558f[_0x591092(0x190)]-_0x4e3d86[_0x591092(0x18f)]:_0x41558f[_0x591092(0x190)]+_0x4e3d86[_0x591092(0x18f)],_0x71451=(_0x4e3d86['price']-_0x332d36)*_0x1d3f59;let _0x227d43={'coin':_0x4e3d86['coin'],'number':_0x1d3f59,'breakeven':formatResult(_0x332d36,0x8),'realized':formatResult(_0xbdcf4c,0x8),'unrealized':formatResult(_0x71451,0x8),'fees':formatResult(_0x41558f[_0x591092(0x205)]+_0x1c3cf6,0x8),'sells':_0x4e3d86[_0x591092(0x231)]==_0x591092(0x242)?_0x41558f[_0x591092(0x1c2)]+0x1:_0x41558f[_0x591092(0x1c2)],'buys':_0x4e3d86['side']==_0x591092(0x191)?_0x41558f[_0x591092(0x181)]+0x1:_0x41558f['buys']};dbCoinResults[_0x591092(0x1c3)](_0x591092(0x1f0))[_0x591092(0x1d5)]({'coin':_0x4e3d86[_0x591092(0x184)]})[_0x591092(0x19c)](_0x227d43)[_0x591092(0x245)]();}async function placeOrder(_0x544533){const _0x233cda=_0x4e9cef,_0x229db3=config[_0x233cda(0x202)]==_0x233cda(0x1ae)?_0x233cda(0x1ae):_0x233cda(0x1d6);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x233cda(0x244)](JSON[_0x233cda(0x26f)](currentCoins));for(const _0xbb5e0e of _0x544533){let _0x40a4db,_0x4caff5,_0x5dbfcf,_0x1baa03,_0x25686f,_0x131996=_0xbb5e0e['symbol'];try{const _0x1d379c=await exchange['fetchTickers'](_0x131996),_0x65d680=_0x1d379c[_0x131996];_0x40a4db=_0x65d680[_0x233cda(0x250)],_0x4caff5=_0x65d680[_0x233cda(0x280)],_0x5dbfcf=_0x65d680[_0x233cda(0x208)];_0xbb5e0e['reverse']?(_0x1baa03=_0xbb5e0e[_0x233cda(0x231)]=='buy'?_0x233cda(0x242):_0x233cda(0x191),_0x25686f=Math[_0x233cda(0x1e0)](_0xbb5e0e['trade'])/_0x40a4db):(_0x1baa03=_0xbb5e0e[_0x233cda(0x231)],_0x25686f=Math[_0x233cda(0x1e0)](_0xbb5e0e[_0x233cda(0x259)]));_0x229db3==_0x233cda(0x1d6)&&(config[_0x233cda(0x202)]=='limit-high'&&(_0x40a4db=_0x1baa03==_0x233cda(0x191)?_0x4caff5:_0x5dbfcf),config[_0x233cda(0x202)]==_0x233cda(0x1a6)&&(_0x40a4db=_0x1baa03==_0x233cda(0x191)?_0x5dbfcf:_0x4caff5));_0x25686f=formatResult(_0x25686f,0x8),_0x40a4db=formatResult(_0x40a4db,0x8);const _0x3b6900=await exchange[_0x233cda(0x194)](_0x131996,_0x229db3,_0x1baa03,_0x25686f,_0x40a4db);lastOrders[_0x233cda(0x1b4)]({'orderId':_0x3b6900['id'],'symbol':_0x131996,'side':_0x1baa03,'reverse':_0xbb5e0e[_0x233cda(0x20d)],'amount':_0xbb5e0e['reverse']?_0x3b6900['amount']*_0x3b6900['price']:_0x3b6900[_0x233cda(0x25f)],'filled':_0xbb5e0e[_0x233cda(0x20d)]?_0x3b6900[_0x233cda(0x18f)]*_0x3b6900['price']:_0x3b6900[_0x233cda(0x18f)],'price':_0x3b6900[_0x233cda(0x1ef)]});const _0x20b1e7=_0x1baa03==_0x233cda(0x242)?config[_0x233cda(0x212)]?String[_0x233cda(0x21c)]('0x'+config[_0x233cda(0x212)])+'\x20':'':config[_0x233cda(0x1a4)]?String['fromCodePoint']('0x'+config[_0x233cda(0x1a4)])+'\x20':'',_0x4dce85=_0x229db3==_0x233cda(0x1ae)?_0x233cda(0x287):config[_0x233cda(0x202)]==_0x233cda(0x23d)?_0x233cda(0x278):_0x233cda(0x1b0);if(_0x229db3=='market')logHistory(_0x233cda(0x254),''+_0x20b1e7+_0x4dce85+'\x20order:\x20'+_0x131996+'\x20'+_0x1baa03+'\x20#'+formatResult(_0x3b6900[_0x233cda(0x18f)],0x8)+'\x20@'+formatResult(_0x3b6900[_0x233cda(0x1ef)],0x8));else logHistory('order',''+_0x20b1e7+_0x4dce85+_0x233cda(0x260)+_0x131996+'\x20'+_0x1baa03+'\x20#'+formatResult(_0x3b6900[_0x233cda(0x25f)],0x8)+'\x20@'+formatResult(_0x3b6900[_0x233cda(0x1ef)],0x8));_0x3b6900['coin']=_0xbb5e0e[_0x233cda(0x184)],await updateCoinResults(_0x3b6900);if(config[_0x233cda(0x1fa)]!=0x0){let _0xab3ff0=null;if(cooldownTracker[_0x233cda(0x207)]==config[_0x233cda(0x1fa)]-0x1)_0xab3ff0=cooldownTracker['shift']();const _0x14019f=getTimeStamp();cooldownTracker['push'](_0x14019f);if(_0xab3ff0){const _0x4cdb7c=fns[_0x233cda(0x17b)](new Date(_0x14019f),new Date(_0xab3ff0));_0x4cdb7c<cooldownInterval&&(logHistory(_0x233cda(0x195),'Executed\x20'+config[_0x233cda(0x1fa)]+_0x233cda(0x1e6)+cooldownInterval/0x3c+_0x233cda(0x24c)+cooldownPeriod/(0xe10*0x3e8)+_0x233cda(0x1ad)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xf87cc){if(_0xf87cc[_0x233cda(0x1c6)]()[_0x233cda(0x1c7)]('MIN_NOTIONAL'))logHistory(_0x233cda(0x195),_0x233cda(0x1c4)+_0x131996);else{if(_0xf87cc[_0x233cda(0x1c6)]()['includes'](_0x233cda(0x1a0)))logHistory(_0x233cda(0x195),'Order\x20amount\x20is\x20invalid:\x20'+_0x131996);else await handleError(_0xf87cc,_0x233cda(0x18a));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x233cda(0x1c5)]&&(config['ordertype']=='market'?logHistory(_0x233cda(0x195),_0x233cda(0x22c)):logHistory('error',_0x233cda(0x253)));else coolingDown&&(!config[_0x233cda(0x1c5)]&&logHistory(_0x233cda(0x195),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0xd0f591,_0x3fd662,_0x431f52=''){const _0x5f0b45=_0x4e9cef;let _0x433d24={'time':getTimeStamp(),'type':_0xd0f591,'event':_0x3fd662,'botname':config['botname'],'showname':config[_0x5f0b45(0x27e)]};dbLogs[_0x5f0b45(0x1c3)](_0x5f0b45(0x1b5))[_0x5f0b45(0x1b4)](_0x433d24)['write']();if(_0x431f52=='')_0x431f52=_0x3fd662;proxyEmit(_0x5f0b45(0x283),{'log':_0x433d24,'summary':_0x431f52}),process[_0x5f0b45(0x1cd)]({'telegram':_0x433d24}),logging(''+_0x433d24[_0x5f0b45(0x283)]);}function emitHistory(_0x453e6e={}){const _0x48923a=_0x4e9cef;Object['keys'](_0x453e6e)[_0x48923a(0x207)]==0x0&&(_0x453e6e={'type':[_0x48923a(0x254),'event'],'event':'','page':0x1});if(_0x453e6e[_0x48923a(0x234)][_0x48923a(0x1c7)](_0x48923a(0x283)))_0x453e6e[_0x48923a(0x234)][_0x48923a(0x17d)](_0x453e6e[_0x48923a(0x234)][_0x48923a(0x209)](_0x48923a(0x283)),0x1,'error','success');if(dbLogs['has']('logs')[_0x48923a(0x26a)]()){let _0x11c9d1=dbLogs['get'](_0x48923a(0x1b5))['filter'](_0x5a2081=>{const _0x3db618=_0x48923a;if(_0x453e6e[_0x3db618(0x234)][_0x3db618(0x207)]==0x0)return![];else return _0x453e6e[_0x3db618(0x234)][_0x3db618(0x1c7)](_0x5a2081[_0x3db618(0x234)]);})[_0x48923a(0x216)](_0x1efe34=>{const _0x1b2855=_0x48923a;if(_0x453e6e['event']=='')return!![];else return _0x1efe34['event'][_0x1b2855(0x1d1)]()[_0x1b2855(0x1c7)](_0x453e6e[_0x1b2855(0x283)]['toLowerCase']());})['sortBy']('time'),_0x4a9cce=_0x11c9d1[_0x48923a(0x26a)]()['length'];_0x11c9d1=_0x11c9d1[_0x48923a(0x20d)]()[_0x48923a(0x26d)]((_0x453e6e['page']-0x1)*logPageSize,_0x453e6e[_0x48923a(0x23e)]*logPageSize-0x1)[_0x48923a(0x20d)]()[_0x48923a(0x26a)](),proxyEmit(_0x48923a(0x232),{'logs':_0x11c9d1,'total':_0x4a9cce});}else proxyEmit(_0x48923a(0x232),{'logs':[],'total':0x0});}async function pauseBot(_0x527fb4){const _0x8e0890=_0x4e9cef,_0x15f6ac=new Date()[_0x8e0890(0x1b3)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x15f6ac-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x8e0890(0x1cd)]({'stop':_0x8e0890(0x1db)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x8e0890(0x1b3)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x8e0890(0x195),_0x8e0890(0x20c)+consecutivePauses+')'),await sleep(_0x527fb4),botPaused=![],reset();}}async function handleError(_0x380d3e,_0x1af8f1,_0x4ac0d4=''){const _0xaa03c1=_0x4e9cef;if(_0x380d3e['toString']()['includes']('DDoSProtection'))logHistory(_0xaa03c1(0x195),_0x1af8f1+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x380d3e[_0xaa03c1(0x1c6)]()['includes'](_0xaa03c1(0x1b6)))logHistory(_0xaa03c1(0x195),_0x1af8f1+_0xaa03c1(0x1bf)),await pauseBot(pauseBotInterval);else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)](_0xaa03c1(0x1ac)))logHistory('error',_0x1af8f1+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)](_0xaa03c1(0x1f9)))logHistory('error',_0x1af8f1+_0xaa03c1(0x275)),logHistory('error',_0xaa03c1(0x1bc)),process[_0xaa03c1(0x1cd)]({'stop':'kill'});else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)]('AuthenticationError'))logHistory('error',_0x1af8f1+_0xaa03c1(0x262)),logHistory(_0xaa03c1(0x195),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0xaa03c1(0x1cd)]({'stop':'kill'});else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x1af8f1+_0xaa03c1(0x19d)),logHistory(_0xaa03c1(0x195),_0xaa03c1(0x1bc)),process['send']({'stop':_0xaa03c1(0x1b7)});else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0xaa03c1(0x195),_0x1af8f1+_0xaa03c1(0x183)),logHistory(_0xaa03c1(0x195),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0xaa03c1(0x1cd)]({'stop':_0xaa03c1(0x1b7)});else{if(_0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)]('InvalidNonce'))logHistory(_0xaa03c1(0x195),_0x1af8f1+_0xaa03c1(0x252)),await pauseBot(pauseBotInterval),process['send']({'stop':_0xaa03c1(0x1db)});else _0x380d3e[_0xaa03c1(0x1c6)]()[_0xaa03c1(0x1c7)](_0xaa03c1(0x270))?logHistory('error',_0x1af8f1+_0xaa03c1(0x1a2)):(logHistory(_0xaa03c1(0x195),_0x1af8f1+_0xaa03c1(0x264)),logging(_0x1af8f1+'\x20|\x20Error\x20details:\x20',_0x380d3e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xfd87cc,_0xdfcb8f){const _0x554e14=_0x4e9cef;return parseFloat(_0xfd87cc[_0x554e14(0x203)](_0xdfcb8f));}function logging(_0x2ca510,_0x419b63=''){const _0x16a8dd=_0x4e9cef;if(config[_0x16a8dd(0x27e)])console[_0x16a8dd(0x22a)](getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x2ca510,_0x419b63);else console[_0x16a8dd(0x22a)](getTimeStamp()+':\x20Bot\x20'+botID+_0x16a8dd(0x19a)+_0x2ca510,_0x419b63);}function getServerTime(){const _0x172d35=_0x4e9cef,_0x268847=new Date();return _0x268847['getFullYear']()+'/'+(_0x268847[_0x172d35(0x257)]()+0x1)[_0x172d35(0x1c6)]()[_0x172d35(0x214)](0x2,'0')+'/'+_0x268847[_0x172d35(0x25e)]()[_0x172d35(0x1c6)]()[_0x172d35(0x214)](0x2,'0')+'\x20'+_0x268847['getHours']()[_0x172d35(0x1c6)]()[_0x172d35(0x214)](0x2,'0')+':'+_0x268847[_0x172d35(0x22f)]()[_0x172d35(0x1c6)]()[_0x172d35(0x214)](0x2,'0')+':'+_0x268847[_0x172d35(0x1e1)]()[_0x172d35(0x1c6)]()[_0x172d35(0x214)](0x2,'0');}function getTimeStamp(){const _0x4cda80=_0x4e9cef,_0x20d446=shiftedTime();return _0x20d446['getFullYear']()+'/'+(_0x20d446['getMonth']()+0x1)[_0x4cda80(0x1c6)]()[_0x4cda80(0x214)](0x2,'0')+'/'+_0x20d446[_0x4cda80(0x25e)]()[_0x4cda80(0x1c6)]()[_0x4cda80(0x214)](0x2,'0')+'\x20'+_0x20d446[_0x4cda80(0x1e3)]()['toString']()[_0x4cda80(0x214)](0x2,'0')+':'+_0x20d446[_0x4cda80(0x22f)]()[_0x4cda80(0x1c6)]()[_0x4cda80(0x214)](0x2,'0')+':'+_0x20d446[_0x4cda80(0x1e1)]()[_0x4cda80(0x1c6)]()['padStart'](0x2,'0');}function getDate(){const _0x43930d=_0x4e9cef,_0x112ef0=shiftedTime();return _0x112ef0['getFullYear']()+'/'+(_0x112ef0['getMonth']()+0x1)[_0x43930d(0x1c6)]()['padStart'](0x2,'0')+'/'+_0x112ef0[_0x43930d(0x25e)]()[_0x43930d(0x1c6)]()['padStart'](0x2,'0');}function getHour(){const _0x4f7bfd=_0x4e9cef,_0x38cf42=shiftedTime();return _0x38cf42[_0x4f7bfd(0x1e3)]()[_0x4f7bfd(0x1c6)]()['padStart'](0x2,'0');}function sleep(_0x2f6603){return new Promise(_0xffa155=>setTimeout(_0xffa155,_0x2f6603));}function shiftedTime(){const _0x2067c1=_0x4e9cef,_0x1edb70=new Date();let _0xcb3e5a=_0x1edb70;if(config&&config[_0x2067c1(0x247)]!==0x0)_0xcb3e5a=fns[_0x2067c1(0x201)](_0x1edb70,{'hours':config[_0x2067c1(0x247)]});return _0xcb3e5a;}