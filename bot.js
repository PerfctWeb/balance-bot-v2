function _0x430b(){const _0x2e99ef=['order','getHours','distribution','Executed\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','AuthenticationError','floor','event-history','percentage','defaults','progress','toggleBotMode','fiat','path','getCoinNumber()','NetworkError','type','restart','number','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','./logs/','getTime','16109797BnSShj','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','decrypt','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','PermissionDenied','round','initTickers()','ask','\x20order:\x20','ticker','/USD','log','***','ExchangeNotAvailable','isEqual','Order\x20filled:\x20','USDT','placeOrder()','getStartingBalances','Binance','sell','mkdirSync','ccxt','toString','Order(s)\x20not\x20validated\x20after\x20','openOrders','remainingSymbols','open','has','amount','2\x20-\x20Validate\x20orders:\x20','exchanges','average','basecoin','fetchBalance','\x20hour','Unfilled\x20order(s)\x20canceled\x20after\x20','autoliquidity','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','exchange\x20reloaded','Waited\x20','fees','highest','bot-','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','configuration','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Error\x20while\x20deleting\x20files:\x20','Limit\x20(low-margin)','Pausing\x20for\x20','reverse','apiKey','error','watchOrders','Error\x20details:','max','\x20|\x20exchange:\x20','concat','total','loading-canceled','bot','push','length','************','ExchangeError','format','padStart','getPortfolio','Exception\x20thrown\x20in\x20','/output-000.log','bid','debug','sortBy','getPortfolio(0)','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','running','portfolio','net-fiat','filter','exec','replace','argv','2.6.0','Net\x20effect','TUSD','balancing\x20resumed','getFullYear','30066yZTish','ORDERS.LOCKED','side','cooldown','headless','function','starting-balances','sort','001','17143ugOpLi','initclient','RSA-OAEP','<b>Bot\x20','getDate','(((.+)+)+)+$','\x20portfolio:</b>\x20\x0a\x0a','2\x20-\x20Handled\x20open\x20orders','parse','-config.json','map','limits','args','Market','performance','0\x20-\x20EXECUTION:\x20','toFixed','time','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','-events.json','recent20','constructor','full','changes','entries','-results.json','-------------------------------\x0a','no\x20open\x20orders','spot','currency','existsSync','coin','emojisell','net-basecoin','UNLOCKED','exchange\x20not\x20reloaded','price','\x20:\x20','value','datetime','colorscheme','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','startdate','cancel','130swMJWe','configuration-stored','canceled','date-fns','.json','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','createOrder','orderId','onepagemode','\x20>\x20[DEBUG]\x20','settings','ordertype','Trigger:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getMinutes','\x20|\x20','1317210XDzUxN','buy','rightTxt','fetchTickers','padEnd','cancelOrders()','target','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','red_yellow_blue','version','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','delta','\x20|\x20Custom\x20ID:\x20','PAXG','USD','basecoinvalue','assign','amountToPrecision','apiSecret','status','Bot\x20','write','emojibuy','stringify','Executing\x20exchange\x20reload','limit-high','2\x20-\x20handling\x20FILLED\x20order:\x20','1914860VIgDUr','MIN_NOTIONAL','join','must\x20be\x20greater\x20than\x20minimum\x20amount','includes','\x20rejected\x20your\x20API\x20request','Saving\x20configuration','OrderNotFound','recreateCoinResults()','fetchTicker','startnumber','logs','usd','apiPassword','uncaughtException','trade','Bybit','buys','\x20metrics:</b>\x20\x0a\x0a','change24h','orderstatus','findIndex','substring','liquidity','data','botID','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','password','2EEjzzy','1\x20-\x20Unlock\x20orders','get','fetchClosedOrders','message','getAllOrders()','showConfig','sells','realized','-performance.json','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','RateLimitExceeded','531koOIFc','placeOrder','/EUR','startsWith','watchTransactions()','yargs/yargs','showname','timestamp',':\x20Bot\x20','resetHistory','market','bb-secure.json','none','bots','privateKey','threshold','recreate','11024KecjJN','536vaOTWH','\x20-\x20bot\x20not\x20started','%\x20(','\x20closed\x20the\x20connection','Transaction\x20detection\x20blocked','enabled','<pre>','\x20network\x20error','request-time','API-key\x20format\x20invalid','yyyy/MM/dd','2.3.5','\x20>\x20','date','\x20minutes\x20-\x20','getMonth','storeHeadless','test','No\x20more\x20open\x20orders\x20-\x20','getCoins()','event','Headless:\x20','timeshift','splice','closed','watchOrders()','loadSymbols()',':\x20timer\x20>','exchange','ID:\x20','cost','1\x20-\x20FILLED\x20known\x20order:\x20','unlinkSync','toLowerCase','filled','fromCodePoint','\x20|\x20lock\x20orders:\x20','eur','14330dbFOAm','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','1\x20-\x20FILLED\x20unknown\x20order:\x20','EUR','offset','\x20API\x20key\x20is\x20invalid','slice','Invalid\x20API\x20key\x20or\x20secret\x20entered','parseISO','success','getPortfolio(1)','abs','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','string','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','added','forEach','1\x20-\x20Validate\x20orders:\x20','set','netoffset','fee','active','BTC','InvalidOrder','startprice','Invalid\x20symbol:\x20','ongoing','change','Transaction\x20detection\x20unblocked','apply','page','Initializing\x20coin\x20results','watchTrades()','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','fetchOpenOrders','cancelLoading','find','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','final','pro','remove','add','Crypt','writeFile','botname','\x20API\x20secret\x20is\x20invalid','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','last','Cryptocom','2\x20-\x20Orders\x20unlocked','stopExchange()','Bitget','OnMaintenance','./version.json','split','balances','excluded','LOCKED','Limit\x20(high-margin)','Exchange','ETH','Error:\x20Invalid\x20argument\x20','Fee\x20discount\x20refund\x20detected:\x20','./config/','valid','Failed\x20to\x20load\x20coin\x20data\x20for\x20','symbol','\x20|\x20highest\x20fee:\x20','leftTxt','warning','\x20not\x20available','initial','BNB','createWriteStream','\x20has\x20a\x2024h\x20drop\x20of\x20','cancelOrder','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','timeout','Resetting\x20coin\x20results:\x20','</pre>','emitHistory','Avoiding\x20continuous\x20order\x20attempts','getPortfolio(2)','send','storeConfiguration','shift','breakeven','2.5.0','limit-low','lowdb','coins','Manual\x20balancing\x20required','removed','Portfolio\x20change\x20detected:\x20','InsufficientFunds'];_0x430b=function(){return _0x2e99ef;};return _0x430b();}const _0x241ad2=_0xab6f;(function(_0x1c9f3b,_0x5ca0ac){const _0x47cba7=_0xab6f,_0x447f9b=_0x1c9f3b();while(!![]){try{const _0x28049b=-parseInt(_0x47cba7(0xcb))/0x1*(parseInt(_0x47cba7(0xae))/0x2)+-parseInt(_0x47cba7(0x206))/0x3+-parseInt(_0x47cba7(0x221))/0x4+-parseInt(_0x47cba7(0x1f5))/0x5*(parseInt(_0x47cba7(0x1c0))/0x6)+parseInt(_0x47cba7(0x1c9))/0x7*(-parseInt(_0x47cba7(0xcc))/0x8)+parseInt(_0x47cba7(0xba))/0x9*(parseInt(_0x47cba7(0xf2))/0xa)+parseInt(_0x47cba7(0x168))/0xb;if(_0x28049b===_0x5ca0ac)break;else _0x447f9b['push'](_0x447f9b['shift']());}catch(_0x422dd9){_0x447f9b['push'](_0x447f9b['shift']());}}}(_0x430b,0x4f908));const _0x5c3641=function(){let _0x39fe1a=!![];return function(_0x1baeae,_0xb0d2ce){const _0x5eb227=_0x39fe1a?function(){const _0x363552=_0xab6f;if(_0xb0d2ce){const _0x34241e=_0xb0d2ce[_0x363552(0x110)](_0x1baeae,arguments);return _0xb0d2ce=null,_0x34241e;}}:function(){};return _0x39fe1a=![],_0x5eb227;};}(),_0x28caca=_0x5c3641(this,function(){const _0x49888f=_0xab6f;return _0x28caca[_0x49888f(0x17f)]()['search'](_0x49888f(0x1ce))[_0x49888f(0x17f)]()[_0x49888f(0x1de)](_0x28caca)['search'](_0x49888f(0x1ce));});_0x28caca();'use strict';const ccxt=require(_0x241ad2(0x17e)),low=require(_0x241ad2(0x14c)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x241ad2(0x1f8)),Crypt=require('hybrid-crypto-js')[_0x241ad2(0x11d)],util=require('util'),argv=require(_0x241ad2(0xbf))(process['argv'][_0x241ad2(0xf9)](0x2))[_0x241ad2(0x1ba)],path=require(_0x241ad2(0x15f));let exchange;global[_0x241ad2(0x171)]={},global[_0x241ad2(0x10e)]={};const usdBasecoins=[_0x241ad2(0x214),'BUSD',_0x241ad2(0x1bd),'USDT','USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x241ad2(0x1eb)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x241ad2(0x128))[_0x241ad2(0x20f)],botID=process['argv'][0x2]||_0x241ad2(0x1c8),pattern=/^[0-9]{3}$/;!pattern[_0x241ad2(0xdd)](botID)&&(console['log'](_0x241ad2(0x130)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x241ad2(0x132)+userID+'/':_0x241ad2(0x132),logspath=userID?_0x241ad2(0x166)+userID+'/':_0x241ad2(0x166),loggerfile=fs[_0x241ad2(0x13c)](logspath+_0x241ad2(0x1ad),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x241ad2(0x17d)](configpath);!fs[_0x241ad2(0x1e7)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x241ad2(0x193)+botID+_0x241ad2(0x1d2),logfile=configpath+_0x241ad2(0x193)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x241ad2(0xb7),coinresultsfile=configpath+_0x241ad2(0x193)+botID+_0x241ad2(0x1e2),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x241ad2(0xc5),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x241ad2(0x15b)]({'logs':[],'version':serverversion})[_0x241ad2(0x21b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x241ad2(0x15b)]({'data':[],'version':serverversion})[_0x241ad2(0x21b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x241ad2(0x21b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x241ad2(0x15b)]({'coins':[],'version':serverversion})[_0x241ad2(0x21b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x241ad2(0x1cb)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x116cd6=>{const _0x5834dd=_0x241ad2;console[_0x5834dd(0x173)](_0x116cd6);},'simple':_0x540cc3=>{const _0x2e3754=_0x241ad2;console[_0x2e3754(0x173)](_0x540cc3),loggerfile[_0x2e3754(0x21b)](util[_0x2e3754(0x1a9)](_0x540cc3)+'\x0a');},'full':async(_0x438bc7,_0x547323='')=>{const _0x4dcce1=_0x241ad2;let _0x24208c;if(config[_0x4dcce1(0xc0)])_0x24208c=getTimeStamp()+':\x20'+config['botname']+_0x4dcce1(0xd8)+_0x438bc7;else _0x24208c=getTimeStamp()+_0x4dcce1(0xc2)+botID+_0x4dcce1(0xd8)+_0x438bc7;console[_0x4dcce1(0x173)](_0x24208c),loggerfile[_0x4dcce1(0x21b)](util[_0x4dcce1(0x1a9)](_0x24208c)+'\x0a'),_0x547323&&(console[_0x4dcce1(0x173)](_0x547323),loggerfile['write'](util[_0x4dcce1(0x1a9)](_0x547323)+'\x0a'));},'debug':async(_0xee9775,_0x2c69ea='')=>{const _0x4bf83e=_0x241ad2;let _0x28b4ec;if(config[_0x4bf83e(0xc0)])_0x28b4ec=getTimeStamp()+':\x20'+config[_0x4bf83e(0x11f)]+_0x4bf83e(0x1ff)+_0xee9775;else _0x28b4ec=getTimeStamp()+_0x4bf83e(0xc2)+botID+_0x4bf83e(0x1ff)+_0xee9775;if(debugging)console[_0x4bf83e(0x173)](_0x28b4ec);loggerfile['write'](util[_0x4bf83e(0x1a9)](_0x28b4ec)+'\x0a');if(_0x2c69ea){if(debugging)console[_0x4bf83e(0x173)](_0x2c69ea);loggerfile['write'](util[_0x4bf83e(0x1a9)](_0x2c69ea)+'\x0a');}}};process['on'](_0x241ad2(0x22f),function(_0x44a6d5){handleError(_0x44a6d5,'uncaughtException');});settings[_0x241ad2(0xe2)]!=config['timeshift']&&updateTimeshift(settings[_0x241ad2(0xe2)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);process[_0x241ad2(0x146)]({'started':_0x241ad2(0x1b4)},_0x27c4e7=>{}),initializeProcessListeners();function proxyEmit(_0x4a5f03,_0x5f1293=null){const _0x933e45=_0x241ad2;process[_0x933e45(0x146)]({'function':_0x4a5f03,'args':_0x5f1293},_0xa60319=>{});}function initializeProcessListeners(){const _0x2d4db0=_0x241ad2;process['on'](_0x2d4db0(0xb2),_0x241996=>{const _0x3907bb=_0x2d4db0;switch(Object['keys'](_0x241996)[0x0]){case'timeshift':_0x241996[_0x3907bb(0xe2)]!=undefined&&(settings['timeshift']=_0x241996['timeshift'],updateTimeshift(settings[_0x3907bb(0xe2)]));break;case _0x3907bb(0x1fe):_0x241996[_0x3907bb(0x1fe)]!=undefined&&(settings[_0x3907bb(0x1fe)]=_0x241996[_0x3907bb(0x1fe)],updateOnepagemode(settings[_0x3907bb(0x1fe)]));break;case _0x3907bb(0xc7):_0x241996['bots']!=undefined&&(bots=JSON[_0x3907bb(0x1d1)](_0x241996[_0x3907bb(0xc7)]),proxyEmit(_0x3907bb(0xc7),bots));break;case _0x3907bb(0x1c5):switch(_0x241996[_0x3907bb(0x1c5)]){case _0x3907bb(0x1ca):initclient();break;case _0x3907bb(0x15d):toggleBotMode();break;case _0x3907bb(0x143):emitHistory(_0x241996['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x241996[_0x3907bb(0x1d5)]);break;case _0x3907bb(0x1ab):getPortfolio(_0x241996[_0x3907bb(0x1d5)]);break;case _0x3907bb(0x147):storeConfiguration(_0x241996[_0x3907bb(0x1d5)]);break;case _0x3907bb(0xdc):storeHeadless(_0x241996['args']);break;case'storeFiat':storeFiat(_0x241996[_0x3907bb(0x1d5)]);break;case _0x3907bb(0xc3):resetHistory();break;case _0x3907bb(0x17a):getStartingBalances(getNormalizedPerformance());break;case _0x3907bb(0xbb):placeOrder(_0x241996['args']);break;case _0x3907bb(0x116):cancelLoading();break;case _0x3907bb(0xb4):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1ff572=![]){const _0x36e601=_0x241ad2;logger[_0x36e601(0x1af)]('Reset\x20|\x20'+(_0x1ff572?_0x36e601(0x18f):_0x36e601(0x1ec))+_0x36e601(0x1a0)+config[_0x36e601(0xe8)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1ff572)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x36e601(0x19b)]!=''&&config[_0x36e601(0x19b)]!=_0x36e601(0x174)){loadingProgress=0x0;if(_0x1ff572){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1370a1){handleErrorNoStop(_0x1370a1,_0x36e601(0xe6));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x5be9fe=await getCoins();[currentCoins,currentCoinsAll]=_0x5be9fe,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x36e601(0x1af)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x36e601(0x1a6)]==0x0&&allOpenOrders[_0x36e601(0x1a6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3333e5=_0x241ad2;exchangeStopped=!![];try{await exchange['close']();}catch(_0x55669a){await handleError(_0x55669a,_0x3333e5(0x125));}}async function reloadExchange(){const _0x13a6df=_0x241ad2;while(lockOrders!=ORDERS[_0x13a6df(0x1eb)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x13a6df(0x1af)](_0x13a6df(0x21e)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3eee67=config['exchange'],_0x19e3fd=config[_0x241ad2(0x19b)],_0x34118c=config[_0x241ad2(0x218)],_0x38271f=config[_0x241ad2(0x22e)]){const _0x101265=_0x241ad2;exchange&&await stopExchange();!supportedExchanges()[_0x101265(0x225)](_0x3eee67)&&(logHistory(_0x101265(0x19c),_0x101265(0x165)+_0x3eee67+'\x20exchange'),killBot());const _0x44f49b=ccxt['pro'][_0x3eee67['toLowerCase']()];exchange=new _0x44f49b({'apiKey':_0x19e3fd,'secret':_0x34118c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x101265(0x1e5),'watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}});if(_0x38271f)exchange[_0x101265(0xad)]=_0x38271f;}function setStableCoins(){const _0x43c0b1=_0x241ad2;let _0x5ea59d=config['basecoin']==_0x43c0b1(0x12f)?'ETH':config[_0x43c0b1(0x189)]==_0x43c0b1(0x213)?'PAXG':_0x43c0b1(0x109),_0x8e3d51=!allSymbols[_0x43c0b1(0x225)](_0x5ea59d+_0x43c0b1(0x172))?_0x43c0b1(0x178):_0x43c0b1(0x214),_0x2416f7=!allSymbols[_0x43c0b1(0x225)](_0x5ea59d+_0x43c0b1(0xbc))?_0x8e3d51:'EUR';stablecoins={'eur':{'coin':''+_0x5ea59d+_0x2416f7,'symbol':_0x5ea59d+'/'+_0x2416f7},'usd':{'coin':''+_0x5ea59d+_0x8e3d51,'symbol':_0x5ea59d+'/'+_0x8e3d51}};}async function initwsCcxt(){const _0x4d060e=_0x241ad2;initCycle++;const _0x532dd5=initCycle;let _0x2aa3e5=[];config[_0x4d060e(0x1b5)][_0x4d060e(0x103)](_0x31129c=>{const _0xce0656=_0x4d060e;if(!_0x31129c[_0xce0656(0x12b)]&&_0x31129c[_0xce0656(0x1e8)]!=config[_0xce0656(0x189)])_0x2aa3e5[_0xce0656(0x1a5)](_0x31129c[_0xce0656(0x135)]);});if(!_0x2aa3e5[_0x4d060e(0x225)](stablecoins[_0x4d060e(0xf1)]['symbol']))_0x2aa3e5[_0x4d060e(0x1a5)](stablecoins[_0x4d060e(0xf1)]['symbol']);if(!_0x2aa3e5[_0x4d060e(0x225)](stablecoins['usd'][_0x4d060e(0x135)]))_0x2aa3e5[_0x4d060e(0x1a5)](stablecoins[_0x4d060e(0x22d)][_0x4d060e(0x135)]);if(config[_0x4d060e(0xe8)][_0x4d060e(0xbd)](_0x4d060e(0x17b))&&config[_0x4d060e(0x189)]!=_0x4d060e(0x213)){if(!_0x2aa3e5['includes']('BNB/'+config['basecoin']))_0x2aa3e5[_0x4d060e(0x1a5)]('BNB/'+config[_0x4d060e(0x189)]);}loadCoins(_0x2aa3e5),_0x2aa3e5=validateSymbols(_0x2aa3e5);const _0x25d5de=async _0x332589=>{const _0x5d9c25=_0x4d060e;let _0x17feb1;try{const _0x2a3bda=await getTickers(_0x332589);Object[_0x5d9c25(0x1e1)](_0x2a3bda)[_0x5d9c25(0x103)](_0x31d813=>{const _0xa32e18=_0x5d9c25;_0x17feb1=_0x31d813[0x1]['symbol'],global['ticker'][noslash(_0x17feb1)]=_0x31d813[0x1]['last'],global[_0xa32e18(0x10e)][_0x17feb1]=_0x31d813[0x1][_0xa32e18(0x15a)];});}catch(_0x43d705){await handleError(_0x43d705,_0x5d9c25(0x16e),_0x17feb1);}},_0xec66a0=async _0x49a098=>{const _0x37daf0=_0x4d060e;while(initCycle==_0x532dd5){if(!botPaused)try{const _0x25e6f2=await exchange['watchTrades'](_0x49a098);global[_0x37daf0(0x171)][noslash(_0x25e6f2[0x0][_0x37daf0(0x135)])]=_0x25e6f2[0x0]['price'],await sleep(0x3e8);}catch(_0x41bcbf){if(!exchangeStopped)await handleError(_0x41bcbf,_0x37daf0(0x113),_0x49a098);}else await sleep(0x64);}},_0x35a9e3=async _0x1702ab=>{const _0x58ddcb=_0x4d060e;while(initCycle==_0x532dd5){if(!botPaused){let _0x583a97;try{await sleep(0x3c*0x3e8);const _0x1503d6=await getTickers(_0x1702ab);Object['entries'](_0x1503d6)[_0x58ddcb(0x103)](_0x3d6477=>{const _0x1e7080=_0x58ddcb;_0x583a97=_0x3d6477[0x1][_0x1e7080(0x135)],global[_0x1e7080(0x10e)][_0x583a97]=_0x3d6477[0x1][_0x1e7080(0x15a)];});}catch(_0x30d105){if(!exchangeStopped)await handleError(_0x30d105,'fetchTickers()',_0x583a97);}}else await sleep(0x64);}},_0x2d2e9b=async _0x180cd6=>{const _0x6a0f78=_0x4d060e;while(initCycle==_0x532dd5){if(!botPaused)try{const _0xa66941=await exchange[_0x6a0f78(0x19d)](_0x180cd6);initCycle==_0x532dd5&&_0xa66941[_0x6a0f78(0x103)](_0x4a911d=>{updateNumberCoinsCcxt(_0x4a911d);});}catch(_0x316be1){if(!exchangeStopped)await handleError(_0x316be1,_0x6a0f78(0xe5));}else await sleep(0x64);}};_0x25d5de(_0x2aa3e5),_0x35a9e3(_0x2aa3e5),_0x2aa3e5[_0x4d060e(0x103)](_0x59a06a=>{_0xec66a0(_0x59a06a),_0x2d2e9b(_0x59a06a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x39283c){const _0x1df654=_0x241ad2;let _0x4ebf05={};try{if(config[_0x1df654(0xe8)]!=_0x1df654(0x123))_0x4ebf05=await exchange[_0x1df654(0x209)](_0x39283c);else for(const _0x4bb569 of _0x39283c){const _0x46f517=await exchange[_0x1df654(0x22a)](_0x4bb569);_0x4ebf05[_0x4bb569]=_0x46f517;}return _0x4ebf05;}catch(_0x538e00){throw _0x538e00;}}async function watchTransactions(){const _0x20c983=_0x241ad2;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x25f0f7=await getCoins(),[_0x1cd9a9,_0x578e70]=_0x25f0f7;let _0x58440c=[];currentCoins[_0x20c983(0x103)](_0x254aaf=>{const _0x448b43=_0x20c983,_0x5977bc=_0x1cd9a9[_0x448b43(0x117)](_0x510809=>_0x510809[_0x448b43(0x1e8)]==_0x254aaf['coin']);if(_0x5977bc){if(_0x254aaf['number']!=_0x5977bc[_0x448b43(0x164)]){let _0x244919;if(_0x254aaf[_0x448b43(0x1e8)]!=config[_0x448b43(0x189)]){const _0x517bc4=global['ticker'][noslash(_0x254aaf[_0x448b43(0x135)])];_0x244919=_0x254aaf[_0x448b43(0x19a)]?0x1/_0x517bc4:_0x517bc4;}else _0x244919=0x1;_0x58440c[_0x448b43(0x1a5)]({'coin':_0x254aaf[_0x448b43(0x1e8)],'symbol':_0x254aaf[_0x448b43(0x135)],'price':_0x244919,'number':Number(formatResult(_0x5977bc[_0x448b43(0x164)]-_0x254aaf[_0x448b43(0x164)],0x8)),'basecoinvalue':_0x244919*(_0x5977bc[_0x448b43(0x164)]-_0x254aaf['number'])});}}});if(_0x58440c[_0x20c983(0x1a6)]==0x1&&!blockTransactionDetection){if(config[_0x20c983(0x18d)]){logger['debug'](_0x20c983(0x1f2)+_0x58440c[0x0][_0x20c983(0x215)]+_0x20c983(0x136)+lastFees['highest']);if(lastFees[_0x20c983(0x192)]==0x0||Math['abs'](_0x58440c[0x0][_0x20c983(0x215)])>lastFees['highest']){delete _0x58440c[0x0]['symbol'],delete _0x58440c[0x0][_0x20c983(0x215)];let _0x5ae9fc=[],_0x4fa653=[...config[_0x20c983(0x238)]]||[],_0x4ad00d=config[_0x20c983(0x238)];_0x4fa653[_0x20c983(0x1c7)]((_0x43b0e2,_0x5d98d1)=>_0x43b0e2['date']>_0x5d98d1['date']?-0x1:_0x5d98d1[_0x20c983(0xd9)]>_0x43b0e2[_0x20c983(0xd9)]?0x1:0x0);const _0x52b1f8=getDate();if(_0x4fa653[0x0]){const _0x3004e9=fns[_0x20c983(0x1d1)](_0x4fa653[0x0][_0x20c983(0xd9)],_0x20c983(0xd6),new Date()),_0x1110ea=fns['parse'](_0x52b1f8,_0x20c983(0xd6),new Date());if(fns[_0x20c983(0x176)](_0x3004e9,_0x1110ea)){_0x5ae9fc=_0x4fa653[0x0][_0x20c983(0x1e0)];const _0x4c11c8=_0x5ae9fc[_0x20c983(0x117)](_0x291bc6=>_0x291bc6[_0x20c983(0x1e8)]==_0x58440c[0x0][_0x20c983(0x1e8)]);_0x4c11c8?(_0x4c11c8[_0x20c983(0x164)]+=_0x58440c[0x0][_0x20c983(0x164)],_0x4c11c8[_0x20c983(0x164)]==0x0&&(_0x5ae9fc=_0x5ae9fc[_0x20c983(0x1b7)](_0x535ea3=>{const _0x279b16=_0x20c983;return _0x535ea3[_0x279b16(0x1e8)]!=_0x58440c[0x0][_0x279b16(0x1e8)];}))):_0x5ae9fc[_0x20c983(0x1a5)](_0x58440c[0x0]);const _0x84d2f3=_0x4ad00d[_0x20c983(0x117)](_0x5297ce=>_0x5297ce[_0x20c983(0xd9)]==_0x52b1f8);_0x84d2f3['changes']=_0x5ae9fc;}else _0x4ad00d['push']({'date':_0x52b1f8,'changes':[_0x58440c[0x0]]});}const _0x4da97f=_0x4ad00d[_0x20c983(0x117)](_0x4df41b=>_0x4df41b['date']==_0x52b1f8);if(_0x4da97f){let _0x169aca=!![];_0x4da97f[_0x20c983(0x1e0)]['forEach'](_0x2cd7dc=>{const _0x1f718c=_0x20c983;if(_0x2cd7dc[_0x1f718c(0x164)]!=0x0)_0x169aca=![];}),_0x169aca&&(_0x4ad00d=_0x4ad00d['filter'](_0x4d01a5=>{const _0x599ae7=_0x20c983;return _0x4d01a5[_0x599ae7(0xd9)]!=_0x52b1f8;}));}let _0x2ce3f6=dbConfig['get'](_0x20c983(0x1a4))[_0x20c983(0x117)]({'botID':botID})[_0x20c983(0x1ef)]();_0x2ce3f6&&(dbConfig[_0x20c983(0xb0)](_0x20c983(0x1a4))[_0x20c983(0x117)]({'botID':botID})['assign']({'liquidity':_0x4ad00d})['write'](),config[_0x20c983(0x238)]=_0x4ad00d),logHistory('success',_0x20c983(0x150)+Math[_0x20c983(0xfe)](_0x58440c[0x0][_0x20c983(0x164)])+'\x20'+_0x58440c[0x0][_0x20c983(0x1e8)]+'\x20'+(_0x58440c[0x0][_0x20c983(0x164)]>0x0?_0x20c983(0x102):_0x20c983(0x14f))+_0x20c983(0x1b3)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x20c983(0x1af)](_0x20c983(0x131)+Math[_0x20c983(0xfe)](_0x58440c[0x0][_0x20c983(0x164)])+'\x20'+_0x58440c[0x0]['coin']+'\x20'+(_0x58440c[0x0][_0x20c983(0x164)]>0x0?_0x20c983(0x102):_0x20c983(0x14f)));transactionDetected=!![];}else logger[_0x20c983(0x1af)]('Portfolio\x20change\x20detected:\x20'+Math[_0x20c983(0xfe)](_0x58440c[0x0][_0x20c983(0x164)])+'\x20'+_0x58440c[0x0][_0x20c983(0x1e8)]+'\x20'+(_0x58440c[0x0][_0x20c983(0x164)]>0x0?_0x20c983(0x102):_0x20c983(0x14f))+_0x20c983(0x203));}currentCoins=_0x1cd9a9,currentCoinsAll=_0x578e70,await sleep(watchTransactionsInterval);}catch(_0x15c5ad){if(!exchangeStopped)await handleError(_0x15c5ad,_0x20c983(0xbe));}else await sleep(0x64);}}async function loadSymbols(){const _0x5ac299=_0x241ad2;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x5ac299(0x1e1)](markets)[_0x5ac299(0x103)](_0x145649=>{const _0x5007c2=_0x5ac299;_0x145649[0x1][_0x5007c2(0x108)]&&_0x145649[0x1][_0x5007c2(0x1e5)]&&allSymbols['push'](_0x145649[0x0]);});}catch(_0x13512d){throw _0x13512d;}}function validateSymbols(_0x20962e){const _0x1ea6b0=_0x241ad2;let _0x2baabb=[];return _0x20962e[_0x1ea6b0(0x103)](_0x130b31=>{const _0x204305=_0x1ea6b0;!allSymbols[_0x204305(0x225)](_0x130b31)?logHistory(_0x204305(0x19c),_0x204305(0x10c)+_0x130b31+_0x204305(0x16b)):_0x2baabb[_0x204305(0x1a5)](_0x130b31);}),_0x2baabb;}async function initclient(){const _0x4c5d1e=_0x241ad2;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x4c5d1e(0x187),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4c5d1e(0x12a),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4b21f2=getNormalizedPerformance();emitPerformance(_0x4b21f2),getStartingBalances(_0x4b21f2);}async function toggleBotMode(){const _0x52f21e=_0x241ad2;let _0xcd43bf=dbConfig[_0x52f21e(0xb0)](_0x52f21e(0x1a4))[_0x52f21e(0x117)]({'botID':botID})[_0x52f21e(0x1ef)]();if(_0xcd43bf){const _0x48f356=!_0xcd43bf[_0x52f21e(0x1c4)];dbConfig[_0x52f21e(0xb0)](_0x52f21e(0x1a4))['find']({'botID':botID})[_0x52f21e(0x216)]({'headless':_0x48f356})[_0x52f21e(0x21b)](),config[_0x52f21e(0x1c4)]=_0x48f356,proxyEmit(_0x52f21e(0x195),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x32dbdb=_0x241ad2;process[_0x32dbdb(0x146)]({'updatebotmanager':!![]},_0x1f7283=>{}),logger['debug'](_0x32dbdb(0xe1)+config['headless']);}async function loadCoins(_0x31bf5f){const _0x54451f=_0x241ad2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1ae194,_0x51164a=0x0,_0x3c1dc9=0x0;_0x31bf5f[_0x54451f(0x103)](_0x4073d3=>{const _0x435ff8=_0x54451f;loading['remainingSymbols'][_0x435ff8(0x1a5)](_0x4073d3);}),loadingCanceled=![];let _0x50a0a9=![];while(_0x1ae194!=_0x31bf5f['length']+maxLoadingProgress){_0x1ae194=loadingProgress,_0x31bf5f['forEach'](_0x13db0f=>{const _0x3b50e4=_0x54451f;if(global['ticker'][noslash(_0x13db0f)]){loading['remainingSymbols']=loading[_0x3b50e4(0x182)][_0x3b50e4(0x1b7)](_0x58fda1=>_0x58fda1!=_0x13db0f);if(!watchedSymbols[_0x3b50e4(0x225)](_0x13db0f))watchedSymbols[_0x3b50e4(0x1a5)](_0x13db0f);_0x1ae194++;}}),loading['progress']=Math[_0x54451f(0x16d)](_0x1ae194/(_0x31bf5f[_0x54451f(0x1a6)]+maxLoadingProgress)*0x64);loading[_0x54451f(0x15c)]!=0x64&&(_0x3c1dc9>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x3c1dc9>0x78*0x5&&!_0x50a0a9&&(_0x50a0a9=!![],logHistory(_0x54451f(0x19c),_0x54451f(0x134)+loading[_0x54451f(0x182)]['join'](',\x20')+_0x54451f(0xcd)),logHistory(_0x54451f(0x19c),_0x54451f(0x199)+loadCoinsRetryInterval/0xea60+_0x54451f(0x194)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x38571f=_0x54451f;process[_0x38571f(0x146)]({'stop':'restart'},_0xcdc87b=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x54451f(0x1f4)]=!![],emitLoadingProgress();break;}else _0x51164a!=loading['progress']&&(_0x51164a=loading[_0x54451f(0x15c)],emitLoadingProgress()),_0x3c1dc9++,await sleep(0xc8);}_0x1ae194==_0x31bf5f['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x54451f(0x1b4)},_0x4d138f=>{}),_0x50a0a9&&logHistory(_0x54451f(0xfc),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x17903c=_0x241ad2;proxyEmit(_0x17903c(0x195),{...emittedConfiguration(),'configstate':_0x17903c(0x1a3)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x188378=_0x241ad2;let _0x1774e7=global[_0x188378(0x171)][stablecoins['eur'][_0x188378(0x1e8)]],_0x3785d7=global['ticker'][stablecoins['usd'][_0x188378(0x1e8)]];return{'eur':Number(_0x1774e7),'usd':Number(_0x3785d7)};}function capitalize(_0x270e07){const _0x303a2d=_0x241ad2;return _0x270e07['substring'](0x0,0x1)['toUpperCase']()+_0x270e07[_0x303a2d(0x237)](0x1);}function supportedExchanges(){const _0x49173a=_0x241ad2,_0x7d5e2a=['ws',_0x49173a(0x209),_0x49173a(0x22a),'watchTrades',_0x49173a(0x19d),'cancelOrder',_0x49173a(0x1fc),'fetchOpenOrders','fetchClosedOrders',_0x49173a(0x18a)];let _0x566eca=[],_0x3511cb=[],_0x5acbdd=ccxt[_0x49173a(0x11a)][_0x49173a(0x187)];_0x5acbdd[_0x49173a(0x103)](_0x1371fc=>{const _0x36fbd1=_0x49173a;try{const _0x1c0deb=new ccxt['pro'][_0x1371fc]();_0x3511cb[_0x36fbd1(0x1a5)](_0x1c0deb);}catch(_0x4e8e8e){}}),_0x3511cb['forEach'](_0x4eb413=>{const _0x8dd7ee=_0x49173a;let _0x545b2b=0x0;_0x7d5e2a[_0x8dd7ee(0x103)](_0x17fcc9=>{const _0x11a6c0=_0x8dd7ee;_0x17fcc9 in _0x4eb413[_0x11a6c0(0x184)]&&_0x4eb413[_0x11a6c0(0x184)][_0x17fcc9]&&_0x545b2b++;}),_0x545b2b==_0x7d5e2a['length']&&_0x566eca[_0x8dd7ee(0x1a5)](capitalize(_0x4eb413['id']));});let _0x2d748e=[];return _0x5acbdd['forEach'](_0x71ee1c=>{const _0x5dba20=_0x49173a;_0x71ee1c=capitalize(_0x71ee1c);if(!_0x566eca[_0x5dba20(0x225)](_0x71ee1c))_0x2d748e['push'](_0x71ee1c);}),_0x566eca;}function setStartDatePerformance(){const _0x423ecc=_0x241ad2;if(config&&config[_0x423ecc(0x238)][0x0][_0x423ecc(0x1e0)]['length']!=0x0){const _0x40692f=config[_0x423ecc(0x238)][0x0][_0x423ecc(0x1e0)];dbPerformance[_0x423ecc(0xb0)]('data')[_0x423ecc(0x117)]({'date':config[_0x423ecc(0x1f3)]})[_0x423ecc(0x216)]({'coins':_0x40692f})[_0x423ecc(0x21b)]();}}async function recreateCoinResults(){const _0x4fe4da=_0x241ad2;let _0x4b549a,_0x28b737=[];try{const _0x436377=fns[_0x4fe4da(0x1a9)](fns[_0x4fe4da(0xfb)](config[_0x4fe4da(0x1f3)][_0x4fe4da(0x1b9)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x17ab46 of currentCoins){if(_0x17ab46[_0x4fe4da(0x1e8)]!=config[_0x4fe4da(0x189)]){let _0x4a8217=0x0,_0x2318d1,_0x35415b;_0x4b549a=await getAllEventOrders(_0x17ab46['symbol']);if(_0x4b549a[_0x4fe4da(0x1a6)]>0x0)_0x4b549a[_0x4fe4da(0x103)](_0x58e162=>{const _0x66e52=_0x4fe4da,_0x1fff8f=_0x17ab46[_0x66e52(0x135)][_0x66e52(0x225)](config[_0x66e52(0x189)]+'/');_0x28b737['push']({'datetime':_0x58e162[_0x66e52(0x1f0)],'coin':_0x17ab46['coin'],'symbol':_0x17ab46['symbol'],'side':_0x58e162[_0x66e52(0x1c2)],'reverse':_0x1fff8f,'amount':formatResult(_0x58e162['filled'],0x8),'filled':formatResult(_0x58e162[_0x66e52(0xee)],0x8),'price':formatResult(_0x58e162[_0x66e52(0x1ed)],0x8)}),_0x4a8217=_0x58e162[_0x66e52(0x1c2)]==_0x66e52(0x207)?_0x4a8217+_0x58e162['filled']:_0x4a8217-_0x58e162[_0x66e52(0xee)];if(!_0x35415b)_0x35415b=_0x58e162['price'];});_0x2318d1=_0x17ab46[_0x4fe4da(0x164)]-_0x4a8217;let _0x29ea3e;config[_0x4fe4da(0x238)][_0x4fe4da(0x103)](_0x434576=>{const _0x4127a8=_0x4fe4da;!_0x29ea3e&&(_0x29ea3e=_0x434576[_0x4127a8(0x1e0)][_0x4127a8(0x117)](_0x3eaa04=>_0x3eaa04[_0x4127a8(0x1e8)]==_0x17ab46[_0x4127a8(0x1e8)]),_0x29ea3e&&(_0x2318d1=_0x29ea3e['number'],_0x35415b=_0x29ea3e[_0x4127a8(0x1ed)]));});let _0x4725cf=dbCoinResults[_0x4fe4da(0xb0)](_0x4fe4da(0x14d))[_0x4fe4da(0x117)]({'coin':_0x17ab46[_0x4fe4da(0x1e8)]})[_0x4fe4da(0x1ef)]();_0x4725cf={'coin':_0x17ab46['coin'],'number':_0x2318d1,'breakeven':_0x35415b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4fe4da(0xb0)](_0x4fe4da(0x14d))['find']({'coin':_0x17ab46[_0x4fe4da(0x1e8)]})[_0x4fe4da(0x216)](_0x4725cf)[_0x4fe4da(0x21b)]();}}_0x28b737[_0x4fe4da(0x1c7)]((_0x2d14a5,_0x199d2c)=>_0x2d14a5['datetime']>_0x199d2c[_0x4fe4da(0x1f0)]?0x1:_0x199d2c[_0x4fe4da(0x1f0)]>_0x2d14a5[_0x4fe4da(0x1f0)]?-0x1:0x0);let _0x36e85f=0x0;for(let _0x24d226 of _0x28b737){await updateCoinResults(_0x24d226,!![]);}}catch(_0x48dd3b){await handleError(_0x48dd3b,_0x4fe4da(0x229));}}async function getAllEventOrders(_0x1cda8a){const _0x181d18=_0x241ad2;let _0x30fba8=[],_0x4456e3=dbLogs[_0x181d18(0xb0)](_0x181d18(0x22c))['filter'](_0x11d88d=>{const _0x2c552a=_0x181d18,_0x568f9c=_0x11d88d[_0x2c552a(0xe0)][_0x2c552a(0xed)]();return _0x568f9c[_0x2c552a(0x225)](_0x1cda8a[_0x2c552a(0xed)]())&&(_0x568f9c[_0x2c552a(0x225)](_0x2c552a(0xc4))&&_0x568f9c[_0x2c552a(0x225)]('order')||_0x568f9c['includes']('filled')&&_0x568f9c[_0x2c552a(0x225)](_0x2c552a(0x152)));})[_0x181d18(0x1b0)](_0x181d18(0x1da))[_0x181d18(0x1ef)]();return _0x4456e3[_0x181d18(0x103)](_0x33d040=>{const _0x126cc6=_0x181d18,_0x8c7b98=_0x33d040[_0x126cc6(0xe0)][_0x126cc6(0x225)](_0x126cc6(0x17c))?'sell':'buy',_0x47ac1f=/#([0-9]|\.)+\s/i,_0x357e69=Number(_0x47ac1f[_0x126cc6(0x1b8)](_0x33d040[_0x126cc6(0xe0)])[0x0][_0x126cc6(0xf9)](0x1)),_0x2d8c49=/@([0-9]|\.)+$/i,_0x4c871b=Number(_0x2d8c49['exec'](_0x33d040[_0x126cc6(0xe0)])[0x0][_0x126cc6(0xf9)](0x1));_0x30fba8['push']({'datetime':_0x33d040[_0x126cc6(0x1da)],'coin':symbolToCoin(_0x1cda8a),'symbol':_0x1cda8a,'side':_0x8c7b98,'amount':_0x357e69,'filled':_0x357e69,'price':_0x4c871b});}),_0x30fba8;}async function getAllOrders(_0xd6adf3,_0x2e63d3){const _0x44abaf=_0x241ad2;let _0x361de6=[];while(_0x2e63d3<exchange['milliseconds']()){const _0x4dc930=0x1f4;try{const _0x81af0c=await exchange[_0x44abaf(0xb1)](_0xd6adf3,_0x2e63d3,_0x4dc930);if(_0x81af0c[_0x44abaf(0x1a6)])_0x2e63d3=_0x81af0c[_0x81af0c['length']-0x1][_0x44abaf(0xc1)]+0x1,_0x361de6=_0x361de6[_0x44abaf(0x1a1)](_0x81af0c);else break;}catch(_0x1b765f){await handleError(_0x1b765f,_0x44abaf(0xb3),_0xd6adf3);}}return _0x361de6;}async function validate24hChanges(){const _0x262224=_0x241ad2;for(const _0x3ffaa4 of currentCoins){if(_0x3ffaa4[_0x262224(0x1e8)]!=config[_0x262224(0x189)]){let _0x1b9295;_0x3ffaa4[_0x262224(0x19a)]?_0x1b9295=formatResult((0x1/(global[_0x262224(0x10e)][noslash(_0x3ffaa4['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1b9295=global[_0x262224(0x10e)][noslash(_0x3ffaa4[_0x262224(0x135)])],_0x1b9295<config[_0x262224(0x234)]&&(logHistory('error',_0x3ffaa4[_0x262224(0x1e8)]+_0x262224(0x13d)+_0x1b9295+'%'),logHistory(_0x262224(0x19c),_0x262224(0x114)),logHistory(_0x262224(0x19c),_0x262224(0x1fa)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xe35159,_0x3c6034){const _0x68162f=_0x241ad2;if(!_0xe35159)return!![];const _0x810415=_0x3c6034[_0x68162f(0x129)]('.'),_0x5aef46=_0xe35159['split']('.');for(var _0x501120=0x0;_0x501120<_0x5aef46['length'];_0x501120++){const _0x2ae75a=~~_0x5aef46[_0x501120],_0x215993=~~_0x810415[_0x501120];if(_0x2ae75a<_0x215993)return!![];if(_0x2ae75a>_0x215993)return![];}return![];}async function oneTimeMigration(){const _0x5a7657=_0x241ad2;let _0x587b14=dbLogs[_0x5a7657(0xb0)](_0x5a7657(0x20f))[_0x5a7657(0x1ef)]();if(isOlderVersion(_0x587b14,'2.3.5')){let _0x5e5a0c=[];const _0x251eea=dbLogs[_0x5a7657(0xb0)](_0x5a7657(0x22c))[_0x5a7657(0x1ef)]();_0x251eea[_0x5a7657(0x103)](_0x521e0b=>{const _0x315653=_0x5a7657;_0x5e5a0c[_0x315653(0x1a5)]({'time':_0x521e0b[_0x315653(0x1da)],'type':_0x521e0b['type'],'event':_0x521e0b[_0x315653(0xe0)]});}),dbLogs['get']('logs')[_0x5a7657(0x216)](_0x5e5a0c)[_0x5a7657(0x21b)]();}let _0x4d5db9=dbConfig[_0x5a7657(0xb0)](_0x5a7657(0x20f))['value']();if(isOlderVersion(_0x4d5db9,'2.3.5')){let _0x3a7ef3=dbConfig[_0x5a7657(0xb0)](_0x5a7657(0x1a4))[_0x5a7657(0x117)]({'botID':botID})[_0x5a7657(0x1ef)]();if(_0x3a7ef3){let _0x1e4a61=[];_0x3a7ef3[_0x5a7657(0x1b5)][_0x5a7657(0x103)](_0x190ac9=>{const _0x5e9539=_0x5a7657;_0x1e4a61[_0x5e9539(0x1a5)]({'coin':_0x190ac9[_0x5e9539(0x1e8)],'number':_0x190ac9[_0x5e9539(0x22b)],'price':_0x190ac9['startprice']}),delete _0x190ac9[_0x5e9539(0x22b)],delete _0x190ac9[_0x5e9539(0x10b)];});if(_0x1e4a61[_0x5a7657(0x1a6)]!==0x0)fs[_0x5a7657(0x11e)](configbackuppath+('starting-balance-'+botID+_0x5a7657(0x1f9)),JSON[_0x5a7657(0x21d)](_0x1e4a61,null,0x4),function(_0x6b0b8a){if(_0x6b0b8a){}});const _0x250165=(_0xa9de50,_0x3b818a)=>{const _0xd8b90c=_0x5a7657;let _0x445474=[];_0x3b818a[_0xd8b90c(0x103)](_0x277b4a=>{const _0xe59e94=_0xd8b90c,_0x7b5764=_0xa9de50['find'](_0x70d6a4=>_0x70d6a4[_0xe59e94(0x1e8)]==_0x277b4a[_0xe59e94(0x1e8)]);if(!_0x7b5764)_0x445474[_0xe59e94(0x1a5)](_0x277b4a);});let _0x3b5274=[];return _0xa9de50[_0xd8b90c(0x103)](_0x3726c5=>{const _0x3e95aa=_0xd8b90c,_0x580eb7=_0x3b818a[_0x3e95aa(0x117)](_0x3af230=>_0x3af230['coin']==_0x3726c5[_0x3e95aa(0x1e8)]);if(!_0x580eb7||_0x580eb7[_0x3e95aa(0x164)]==0x0&&_0x3726c5['number']!=0x0)_0x3b5274[_0x3e95aa(0x1a5)](_0x3726c5);}),{'missingDay1':_0x445474,'notInDay2':_0x3b5274};},_0x27b650=dbPerformance['get'](_0x5a7657(0xaa))['cloneDeep']()[_0x5a7657(0x1ef)]();if(_0x27b650['length']>0x1){const {missingDay1:_0x21aff3,notInDay2:_0xa7a30c}=_0x250165(_0x1e4a61,_0x27b650[0x1][_0x5a7657(0x14d)]);_0x1e4a61=[..._0x1e4a61,..._0x21aff3],_0xa7a30c[_0x5a7657(0x103)](_0x15deeb=>{const _0x368210=_0x5a7657;let _0x532357=_0x1e4a61[_0x368210(0x236)](_0x2ca388=>_0x2ca388[_0x368210(0x1e8)]==_0x15deeb[_0x368210(0x1e8)]);_0x532357!=-0x1&&_0x1e4a61[_0x368210(0xe3)](_0x532357,0x1);});}_0x1e4a61[_0x5a7657(0x1c7)]((_0x3d4ef0,_0x2fe168)=>_0x3d4ef0['coin']>_0x2fe168[_0x5a7657(0x1e8)]?0x1:_0x2fe168[_0x5a7657(0x1e8)]>_0x3d4ef0[_0x5a7657(0x1e8)]?-0x1:0x0);let _0x1c7eef=[{'date':_0x3a7ef3[_0x5a7657(0x1f3)],'changes':_0x1e4a61}];_0x27b650[_0x5a7657(0x1a6)]>0x2&&_0x27b650[_0x5a7657(0x103)]((_0x4ebd62,_0x3075f7)=>{const _0xa8d3c6=_0x5a7657;if(_0x3075f7>0x0&&_0x3075f7<_0x27b650['length']-0x1){const {missingDay1:_0x2e2a89,notInDay2:_0x203705}=_0x250165(_0x27b650[_0x3075f7][_0xa8d3c6(0x14d)],_0x27b650[_0x3075f7+0x1][_0xa8d3c6(0x14d)]);_0x1e4a61=[],(_0x2e2a89[_0xa8d3c6(0x1a6)]!=0x0||_0x203705['length']!=0x0)&&(_0x2e2a89[_0xa8d3c6(0x1a6)]!=0x0&&_0x1e4a61[_0xa8d3c6(0x1a5)](..._0x2e2a89),_0x203705[_0xa8d3c6(0x1a6)]!=0x0&&(_0x203705[_0xa8d3c6(0x103)](_0x16ae33=>{const _0x1b1a2b=_0xa8d3c6;_0x16ae33[_0x1b1a2b(0x164)]=-_0x16ae33[_0x1b1a2b(0x164)];}),_0x1e4a61[_0xa8d3c6(0x1a5)](..._0x203705)),_0x1e4a61['sort']((_0x11ba9b,_0x2714cd)=>_0x11ba9b['coin']>_0x2714cd['coin']?0x1:_0x2714cd[_0xa8d3c6(0x1e8)]>_0x11ba9b['coin']?-0x1:0x0),_0x1c7eef['push']({'date':_0x27b650[_0x3075f7+0x1]['date'],'changes':_0x1e4a61}));}}),dbConfig[_0x5a7657(0xb0)](_0x5a7657(0x1a4))[_0x5a7657(0x117)]({'botID':botID})['assign']({..._0x3a7ef3,'liquidity':_0x1c7eef})[_0x5a7657(0x21b)]();}}if(isOlderVersion(_0x4d5db9,_0x5a7657(0x1bb))){let _0x461702=dbConfig[_0x5a7657(0xb0)](_0x5a7657(0x1a4))[_0x5a7657(0x117)]({'botID':botID})['value']();if(_0x461702){const _0x181663=_0x461702['exchange'],_0xcc4c45=_0x181663?capitalize(_0x181663):_0x5a7657(0x17b);dbConfig[_0x5a7657(0xb0)](_0x5a7657(0x1a4))[_0x5a7657(0x117)]({'botID':botID})[_0x5a7657(0x216)]({'exchange':_0xcc4c45})['write']();}}let _0x1e2acc=dbPerformance[_0x5a7657(0xb0)](_0x5a7657(0x20f))[_0x5a7657(0x1ef)]();isOlderVersion(_0x1e2acc,_0x5a7657(0xd7))&&setStartDatePerformance();let _0x19d51f=dbCoinResults['get'](_0x5a7657(0x20f))[_0x5a7657(0x1ef)]();if(isOlderVersion(_0x19d51f,_0x5a7657(0x14a))){let _0x14ad0c=dbCoinResults[_0x5a7657(0xb0)](_0x5a7657(0x14d))[_0x5a7657(0x1ef)]();if(_0x14ad0c[_0x5a7657(0x1a6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x253526=_0x241ad2;dbConfig[_0x253526(0x105)](_0x253526(0x20f),serverversion)['write'](),dbPerformance[_0x253526(0x105)](_0x253526(0x20f),serverversion)[_0x253526(0x21b)](),dbLogs[_0x253526(0x105)](_0x253526(0x20f),serverversion)['write'](),dbCoinResults['set'](_0x253526(0x20f),serverversion)[_0x253526(0x21b)]();}function getConfiguration(_0x294897){const _0xcee5ac=_0x241ad2;let _0x54772d=dbConfig[_0xcee5ac(0xb0)](_0xcee5ac(0x1a4))[_0xcee5ac(0x117)]({'botID':_0x294897})[_0xcee5ac(0x1ef)]();if(_0x54772d){let _0x5ebdad=![];typeof _0x54772d[_0xcee5ac(0xc9)]==_0xcee5ac(0x100)&&(_0x54772d={..._0x54772d,'threshold':Number(_0x54772d[_0xcee5ac(0xc9)])},_0x5ebdad=!![]),_0x54772d[_0xcee5ac(0x234)]==undefined&&(_0x54772d={..._0x54772d,'change24h':-0x14},_0x5ebdad=!![]),_0x54772d['fiat']==undefined&&(_0x54772d={..._0x54772d,'fiat':_0xcee5ac(0x214)},_0x5ebdad=!![]),_0x54772d[_0xcee5ac(0x1fe)]==undefined&&(_0x54772d={..._0x54772d,'onepagemode':settings[_0xcee5ac(0x1fe)]},_0x5ebdad=!![]),_0x54772d[_0xcee5ac(0x1f1)]==undefined&&(_0x54772d={..._0x54772d,'colorscheme':_0xcee5ac(0x20e)},_0x5ebdad=!![]),_0x54772d['autoliquidity']==undefined&&(_0x54772d={..._0x54772d,'autoliquidity':!![]},_0x5ebdad=!![]),_0x5ebdad&&(_0x54772d={'botID':_0x54772d[_0xcee5ac(0xab)],'exchange':_0x54772d[_0xcee5ac(0xe8)],'apiKey':_0x54772d[_0xcee5ac(0x19b)],'apiSecret':_0x54772d[_0xcee5ac(0x218)],'apiPassword':_0x54772d['apiPassword'],'basecoin':_0x54772d[_0xcee5ac(0x189)],'botname':_0x54772d['botname'],'showname':_0x54772d[_0xcee5ac(0xc0)],'threshold':_0x54772d[_0xcee5ac(0xc9)],'ordertype':_0x54772d[_0xcee5ac(0x201)],'timeout':_0x54772d[_0xcee5ac(0x140)],'fiat':_0x54772d[_0xcee5ac(0x15e)],'startdate':_0x54772d[_0xcee5ac(0x1f3)],'recreate':_0x54772d[_0xcee5ac(0xca)],'timeshift':_0x54772d[_0xcee5ac(0xe2)],'onepagemode':_0x54772d['onepagemode'],'headless':_0x54772d[_0xcee5ac(0x1c4)],'cooldown':_0x54772d[_0xcee5ac(0x1c3)],'change24h':_0x54772d['change24h'],'emojibuy':_0x54772d[_0xcee5ac(0x21c)],'emojisell':_0x54772d[_0xcee5ac(0x1e9)],'colorscheme':_0x54772d[_0xcee5ac(0x1f1)],'portfolio':_0x54772d[_0xcee5ac(0x1b5)],'autoliquidity':_0x54772d[_0xcee5ac(0x18d)],'liquidity':_0x54772d[_0xcee5ac(0x238)],'openOrders':_0x54772d[_0xcee5ac(0x181)]},dbConfig[_0xcee5ac(0xb0)](_0xcee5ac(0x1a4))[_0xcee5ac(0x11b)]()['write'](),dbConfig['get'](_0xcee5ac(0x1a4))[_0xcee5ac(0x1a5)](_0x54772d)[_0xcee5ac(0x21b)]());}else _0x54772d={'botID':_0x294897,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xcee5ac(0x21a)+_0x294897,'showname':![],'threshold':0x3,'ordertype':_0xcee5ac(0xc4),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0xcee5ac(0xe2)],'onepagemode':settings[_0xcee5ac(0x1fe)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xcee5ac(0x20e),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x54772d;}function emittedConfiguration(){const _0x303e17=_0x241ad2;let _0x102ad2;if(config[_0x303e17(0x19b)]=='')_0x102ad2={...config,'configstate':_0x303e17(0x13a)};else config['apiKey']==_0x303e17(0x174)?_0x102ad2={...config,'configstate':'recovery'}:(_0x102ad2={...config,'apiKey':'************','apiSecret':_0x303e17(0x1a7)},config[_0x303e17(0x22e)]&&(_0x102ad2['apiPassword']='************'));return _0x102ad2;}function getSettings(){const _0x5973f8=_0x241ad2;return dbSettings['get'](_0x5973f8(0x200))['value']();}function getSecure(){const _0x46012e=_0x241ad2;return dbSecure[_0x46012e(0xb0)]('secure')['value']()||{};}function updateTimeshift(_0x329351){const _0x4be59e=_0x241ad2;let _0x58896e=dbConfig['get'](_0x4be59e(0x1a4))[_0x4be59e(0x117)]({'botID':botID})[_0x4be59e(0x1ef)]();_0x58896e&&dbConfig[_0x4be59e(0xb0)](_0x4be59e(0x1a4))[_0x4be59e(0x117)]({'botID':botID})[_0x4be59e(0x216)]({'timeshift':_0x329351})[_0x4be59e(0x21b)](),config[_0x4be59e(0xe2)]=_0x329351,proxyEmit(_0x4be59e(0x195),emittedConfiguration());}function updateOnepagemode(_0x5891f6){const _0x470b53=_0x241ad2;let _0x557ba2=dbConfig[_0x470b53(0xb0)]('bot')['find']({'botID':botID})[_0x470b53(0x1ef)]();_0x557ba2&&dbConfig[_0x470b53(0xb0)]('bot')[_0x470b53(0x117)]({'botID':botID})[_0x470b53(0x216)]({'onepagemode':_0x5891f6})[_0x470b53(0x21b)](),config[_0x470b53(0x1fe)]=_0x5891f6,proxyEmit(_0x470b53(0x195),emittedConfiguration());}async function storeConfiguration(_0xbea1ed){const _0x265b59=_0x241ad2;logger['debug'](_0x265b59(0x227));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x265b59(0xd0));let _0x45e50e=![],_0x193c27=![],_0x2ee954=[];_0xbea1ed[_0x265b59(0x1b5)]['forEach'](_0x276172=>{const _0x475d40=_0x265b59;if(!_0x276172['excluded']&&_0x276172['coin']!=_0xbea1ed[_0x475d40(0x189)])_0x2ee954[_0x475d40(0x1a5)](_0x276172[_0x475d40(0x135)]);}),_0x2ee954[_0x265b59(0x103)](_0x1da55e=>{const _0x5ca5ac=_0x265b59,_0x4ec4f0=currentCoins[_0x5ca5ac(0x117)](_0x5880b0=>_0x5880b0[_0x5ca5ac(0x135)]==_0x1da55e);!_0x4ec4f0&&(_0x45e50e=!![]);}),currentCoins[_0x265b59(0x103)](_0x2b0394=>{const _0x18b987=_0x265b59;if(_0x2b0394[_0x18b987(0x1e8)]!=config[_0x18b987(0x189)]){const _0x2020ea=_0x2ee954[_0x18b987(0x117)](_0x3ddedb=>_0x3ddedb==_0x2b0394[_0x18b987(0x135)]);!_0x2020ea&&(_0x45e50e=!![]);}}),_0xbea1ed['portfolio'][_0x265b59(0x103)](_0x253eb4=>{const _0x389ffe=_0x265b59,_0x1ebcef=config[_0x389ffe(0x1b5)][_0x389ffe(0x117)](_0x2c212a=>_0x2c212a['coin']==_0x253eb4[_0x389ffe(0x1e8)]);if(_0x1ebcef&&_0x253eb4[_0x389ffe(0xf7)]!=_0x1ebcef[_0x389ffe(0xf7)])_0x193c27=!![];});let _0x5995f0=dbConfig[_0x265b59(0xb0)](_0x265b59(0x1a4))[_0x265b59(0x117)]({'botID':botID})['value']();_0xbea1ed={..._0xbea1ed,'apiKey':crypt[_0x265b59(0x16a)](secure['privateKey'],_0xbea1ed[_0x265b59(0x19b)])['message'],'apiSecret':crypt[_0x265b59(0x16a)](secure[_0x265b59(0xc8)],_0xbea1ed['apiSecret'])['message']};_0xbea1ed[_0x265b59(0x22e)]&&(_0xbea1ed[_0x265b59(0x22e)]=crypt[_0x265b59(0x16a)](secure[_0x265b59(0xc8)],_0xbea1ed[_0x265b59(0x22e)])[_0x265b59(0xb2)]);let _0x70590d=![];if(_0x5995f0){_0xbea1ed[_0x265b59(0x19b)]=='************'?_0xbea1ed[_0x265b59(0x19b)]=config[_0x265b59(0x19b)]:_0x70590d=!![];_0xbea1ed[_0x265b59(0x218)]==_0x265b59(0x1a7)?_0xbea1ed[_0x265b59(0x218)]=config[_0x265b59(0x218)]:_0x70590d=!![];if(_0xbea1ed[_0x265b59(0x22e)]==_0x265b59(0x1a7))_0xbea1ed[_0x265b59(0x22e)]=config['apiPassword'];else{if(_0xbea1ed[_0x265b59(0x22e)])_0x70590d=!![];}dbConfig[_0x265b59(0xb0)](_0x265b59(0x1a4))[_0x265b59(0x117)]({'botID':botID})['assign'](_0xbea1ed)[_0x265b59(0x21b)]();}else dbConfig[_0x265b59(0xb0)]('bot')[_0x265b59(0x1a5)](_0xbea1ed)[_0x265b59(0x21b)](),_0x70590d=!![],process[_0x265b59(0x146)]({'status':_0x265b59(0xd1),'live':_0x265b59(0x1b4)},_0x46ab27=>{});process[_0x265b59(0x146)]({'botname':_0xbea1ed[_0x265b59(0x11f)]},_0x2dc97c=>{}),config={..._0xbea1ed},updateBotManager(),proxyEmit(_0x265b59(0x1f6)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x70590d)await reset(!![]);else _0x45e50e||_0x193c27?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x265b59(0x1af)](_0x265b59(0x10f));}async function storeHeadless(_0x4b4c45){const _0x3f8884=_0x241ad2,_0x42343e={...config,'headless':_0x4b4c45[_0x3f8884(0x1c4)]};let _0x4de416=dbConfig['get']('bot')['find']({'botID':botID})[_0x3f8884(0x1ef)]();_0x4de416&&dbConfig[_0x3f8884(0xb0)]('bot')[_0x3f8884(0x117)]({'botID':botID})[_0x3f8884(0x216)](_0x42343e)[_0x3f8884(0x21b)](),config={..._0x42343e},updateBotManager(),proxyEmit(_0x3f8884(0x195),emittedConfiguration());}async function storeFiat(_0x5d83e3){const _0x5a87ab=_0x241ad2,_0x1cca6b={...config,'fiat':_0x5d83e3};let _0x4c5125=dbConfig[_0x5a87ab(0xb0)](_0x5a87ab(0x1a4))[_0x5a87ab(0x117)]({'botID':botID})[_0x5a87ab(0x1ef)]();_0x4c5125&&dbConfig[_0x5a87ab(0xb0)](_0x5a87ab(0x1a4))[_0x5a87ab(0x117)]({'botID':botID})[_0x5a87ab(0x216)](_0x1cca6b)[_0x5a87ab(0x21b)](),config={..._0x1cca6b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x152b18=_0x241ad2;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x152b18(0x1e7)](path[_0x152b18(0x223)](configpath,_0x152b18(0x193)+botID+_0x152b18(0x1dc))))fs['unlinkSync'](path['join'](configpath,_0x152b18(0x193)+botID+_0x152b18(0x1dc)));if(fs[_0x152b18(0x1e7)](path[_0x152b18(0x223)](configpath,'bot-'+botID+_0x152b18(0xb7))))fs[_0x152b18(0xec)](path[_0x152b18(0x223)](configpath,'bot-'+botID+_0x152b18(0xb7)));if(fs[_0x152b18(0x1e7)](path[_0x152b18(0x223)](configpath,_0x152b18(0x193)+botID+_0x152b18(0x1e2))))fs[_0x152b18(0xec)](path[_0x152b18(0x223)](configpath,_0x152b18(0x193)+botID+_0x152b18(0x1e2)));}catch(_0x477abf){if(_0x477abf)logger['full'](_0x152b18(0x197),_0x477abf);}const _0x1887f5=getDate();let _0x1e0f6a=[];currentCoins['forEach'](_0x52b5bb=>{const _0x57238f=_0x152b18;_0x1e0f6a['push']({'coin':_0x52b5bb[_0x57238f(0x1e8)],'number':_0x52b5bb[_0x57238f(0x164)],'price':_0x52b5bb['last']});});let _0x2b9d13=dbConfig[_0x152b18(0xb0)](_0x152b18(0x1a4))[_0x152b18(0x117)]({'botID':botID})[_0x152b18(0x1ef)]();_0x2b9d13&&(dbConfig[_0x152b18(0xb0)](_0x152b18(0x1a4))[_0x152b18(0x117)]({'botID':botID})[_0x152b18(0x216)]({'liquidity':[{'date':_0x1887f5,'changes':_0x1e0f6a}]})[_0x152b18(0x21b)](),config['liquidity']=[]),process[_0x152b18(0x146)]({'stop':_0x152b18(0x163)},_0xcf4745=>{});}function noslash(_0x279c8a){const _0x5696b8=_0x241ad2;return _0x279c8a[_0x5696b8(0x1b9)]('/','');}function updateHighestFee(_0x36abe7){const _0x44db4c=_0x241ad2;if(_0x36abe7[_0x44db4c(0x19a)]){let _0x43c5e8={'filled':_0x36abe7[_0x44db4c(0xee)]*_0x36abe7[_0x44db4c(0x1ed)],'amount':_0x36abe7[_0x44db4c(0xee)]*_0x36abe7[_0x44db4c(0x1ed)],'side':_0x36abe7[_0x44db4c(0x1c2)]=='sell'?_0x44db4c(0x207):'sell','price':0x1/_0x36abe7['price']};_0x36abe7={..._0x36abe7,..._0x43c5e8};}const _0x2b495d=defaultFee*_0x36abe7[_0x44db4c(0xee)]*_0x36abe7[_0x44db4c(0x1ed)];lastFees[_0x44db4c(0x1dd)][_0x44db4c(0x1a6)]===0x14&&lastFees[_0x44db4c(0x1dd)][_0x44db4c(0x148)](),lastFees['recent20'][_0x44db4c(0x1a5)](_0x2b495d),lastFees[_0x44db4c(0x192)]=Math[_0x44db4c(0x19f)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x49f368){const _0x397cd5=_0x241ad2;logger[_0x397cd5(0x1af)](_0x397cd5(0x1d8)+_0x49f368['symbol']+_0x397cd5(0x205)+_0x49f368[_0x397cd5(0x219)]+_0x397cd5(0x205)+_0x49f368[_0x397cd5(0xee)]+'\x20/\x20'+_0x49f368['amount']+'\x20|\x20'+_0x49f368['id']);let _0x15b071=_0x49f368['status'],_0x2b3491=![];currentCoins[_0x397cd5(0x103)](_0x43f08f=>{const _0x4ebd5a=_0x397cd5;_0x43f08f[_0x4ebd5a(0x135)]==_0x49f368['symbol']&&(_0x2b3491=!![]);});if(!_0x2b3491)return;const _0x3463ea=currentCoins[_0x397cd5(0x117)](_0x122653=>_0x122653['symbol']==_0x49f368[_0x397cd5(0x135)]),_0x35a41b=_0x16f236=>{const _0x577dcd=_0x397cd5;if(_0x3463ea)_0x3463ea[_0x577dcd(0x235)]=_0x16f236;};if(_0x15b071==_0x397cd5(0x183))_0x35a41b('open');else{if(_0x15b071==_0x397cd5(0x1f7)){_0x35a41b(_0x397cd5(0x1f7));const _0x15e210=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x15e210,await getOpenOrders(),handleOpenOrders();}else{if(_0x15b071==_0x397cd5(0xe4)){let _0x72cffd=![];if(lastOrders)for(const _0xe76c2b of lastOrders){const _0x591e52=0xc8,_0x1532a3=0x1388;let _0xba51d0=0x0;while(!_0xe76c2b[_0x397cd5(0x1fd)]&&_0xba51d0*_0x591e52<_0x1532a3){_0xba51d0++,await sleep(_0x591e52);}if(_0xba51d0>0x0)logger[_0x397cd5(0x1af)](_0x397cd5(0x190)+_0xba51d0*_0x591e52/0x3e8+_0x397cd5(0x1b2));if(_0xe76c2b[_0x397cd5(0x1fd)]==_0x49f368['id']){logger['debug'](_0x397cd5(0xeb)+_0x49f368['id']),_0x72cffd=!![];if(_0xe76c2b[_0x397cd5(0xee)]==0x0){logger[_0x397cd5(0x1af)](_0x397cd5(0x220)+_0x49f368['id']);if(_0x49f368['average'])_0xe76c2b[_0x397cd5(0x1ed)]=_0x49f368[_0x397cd5(0x188)];else{if(_0x49f368[_0x397cd5(0x1ed)])_0xe76c2b[_0x397cd5(0x1ed)]=_0x49f368[_0x397cd5(0x1ed)];else{}}_0xe76c2b[_0x397cd5(0xee)]=_0x49f368[_0x397cd5(0xee)],updateHighestFee(_0xe76c2b),_0x35a41b(_0x397cd5(0xee)),await validateOrders();if(lockOrders==ORDERS[_0x397cd5(0x12c)]){const _0x201f8d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x201f8d;}_0xe76c2b[_0x397cd5(0x107)]={'currency':_0x49f368['fee']?_0x49f368[_0x397cd5(0x107)][_0x397cd5(0x1e6)]:null,'cost':_0x49f368[_0x397cd5(0x107)]?_0x49f368['fee'][_0x397cd5(0xea)]:0x0},await updateCoinResults(_0xe76c2b);}}}if(!_0x72cffd){logger[_0x397cd5(0x1af)](_0x397cd5(0xf5)+_0x49f368['id']),_0x35a41b('filled');const _0x40bcc6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x40bcc6,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1632b1=JSON[_0x397cd5(0x1d1)](lastBalances[_0x397cd5(0x1b5)]);const _0xf7104e=_0x1632b1[_0x397cd5(0x117)](_0x34ff44=>_0x34ff44[_0x397cd5(0x135)]==_0x49f368[_0x397cd5(0x135)]);if(_0xf7104e){if(_0x15b071==_0x397cd5(0x183))_0xf7104e[_0x397cd5(0x235)]=_0xf7104e['orderstatus']==_0x397cd5(0xee)?'filled':_0x397cd5(0x183);else{if(_0x15b071=='canceled')_0xf7104e['orderstatus']=_0xf7104e[_0x397cd5(0x235)]==_0x397cd5(0xee)?_0x397cd5(0xee):'canceled';else _0x15b071==_0x397cd5(0xe4)&&(_0xf7104e[_0x397cd5(0x235)]=_0x397cd5(0xee));}}lastBalances={...lastBalances,'portfolio':JSON[_0x397cd5(0x21d)](_0x1632b1)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5382f7=_0x241ad2;await getOpenOrders();let _0x473939=![];currentCoins[_0x5382f7(0x103)](_0x546e91=>{const _0x382892=_0x5382f7;_0x473939=allOpenOrders[_0x382892(0x117)](_0x45c057=>_0x45c057[_0x382892(0x135)]==_0x546e91[_0x382892(0x135)]),_0x546e91[_0x382892(0x235)]=_0x473939?_0x382892(0x183):'none';});}async function getCoins(_0x3e85e5=0x0,_0x3f28e5=!![],_0x3a2a7a=config[_0x241ad2(0x189)]){const _0x1a36e2=_0x241ad2;let _0x3186ca,_0xb6ca7f=[],_0xd9e355=[],_0x2168ea=[];if(_0x3e85e5)await sleep(_0x3e85e5);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3186ca=await exchange[_0x1a36e2(0x18a)](),mybalances=_0x3186ca[_0x1a36e2(0x1a2)];for(const [_0x3bbdb6,_0x1ecd1a]of Object['entries'](mybalances)){_0x2168ea[_0x1a36e2(0x1a5)](_0x3bbdb6);}config[_0x1a36e2(0x1b5)][_0x1a36e2(0x103)](_0x2e588f=>{const _0x2496c3=_0x1a36e2;!_0x2168ea[_0x2496c3(0x225)](_0x2e588f[_0x2496c3(0x1e8)])&&(mybalances[_0x2e588f[_0x2496c3(0x1e8)]]=0x0);});if(_0x3a2a7a=='')for(const [_0x4d4b89,_0x20d8aa]of Object[_0x1a36e2(0x1e1)](mybalances)){_0x20d8aa!=0x0&&_0xb6ca7f['push']({'coin':_0x4d4b89});}else{let _0x36cb52=![];for(const [_0x3543f2,_0x3728c1]of Object['entries'](mybalances)){const _0x1aeb90=config['portfolio']['find'](_0x5de81a=>_0x5de81a[_0x1a36e2(0x1e8)]==_0x3543f2),_0x5de399=_0x3543f2+'/'+_0x3a2a7a,_0x2b4770=_0x3a2a7a+'/'+_0x3543f2,_0x10de7b=currentCoins['find'](_0x3f0cc3=>_0x3f0cc3['coin']==_0x3543f2);_0x36cb52=![];if((_0x3728c1!=0x0||_0x1aeb90)&&(allSymbols[_0x1a36e2(0x225)](_0x5de399)||_0x3543f2==_0x3a2a7a))_0xb6ca7f[_0x1a36e2(0x1a5)]({'coin':_0x3543f2,'symbol':_0x5de399,'reverse':![],'number':Math[_0x1a36e2(0x19f)](_0x3728c1+(_0x1aeb90&&_0x1aeb90[_0x1a36e2(0xf7)]||0x0),0x0),'orderstatus':_0x10de7b?_0x10de7b[_0x1a36e2(0x235)]:_0x1a36e2(0xc6)});else{if((_0x3728c1!=0x0||_0x1aeb90)&&allSymbols[_0x1a36e2(0x225)](_0x2b4770))_0xb6ca7f[_0x1a36e2(0x1a5)]({'coin':_0x3543f2,'symbol':_0x2b4770,'reverse':!![],'number':Math[_0x1a36e2(0x19f)](_0x3728c1+(_0x1aeb90&&_0x1aeb90[_0x1a36e2(0xf7)]||0x0),0x0),'orderstatus':_0x10de7b?_0x10de7b['orderstatus']:_0x1a36e2(0xc6)});else _0x1aeb90&&_0xb6ca7f[_0x1a36e2(0x1a5)]({'coin':_0x1aeb90[_0x1a36e2(0x1e8)],'symbol':_0x1aeb90[_0x1a36e2(0x135)],'reverse':_0x1aeb90['reverse'],'number':0x0,'orderstatus':_0x1a36e2(0xc6)});}}}}catch(_0x582a8e){if(!_0x3f28e5)handleErrorNoStop(_0x582a8e,_0x1a36e2(0xdf));else await handleError(_0x582a8e,_0x1a36e2(0xdf));}return _0xd9e355=cloneDeep(_0xb6ca7f),_0xb6ca7f=_0xb6ca7f[_0x1a36e2(0x1b7)](_0x405339=>{const _0x262d96=_0x1a36e2,_0x46b61b=config[_0x262d96(0x1b5)]['find'](_0x89354c=>_0x89354c[_0x262d96(0x1e8)]==_0x405339[_0x262d96(0x1e8)]);return _0x46b61b&&!_0x46b61b[_0x262d96(0x12b)];}),[_0xb6ca7f,_0xd9e355];}async function getCoinNumber(_0x5baf13){const _0x3754c2=_0x241ad2;let _0x56f254;try{const _0x267c9c=await exchange[_0x3754c2(0x18a)]();_0x56f254=_0x267c9c['total'][_0x5baf13];}catch(_0x2955a7){await handleError(_0x2955a7,_0x3754c2(0x160));}return _0x56f254;}async function getOpenOrders(){const _0x20ed3a=_0x241ad2;let _0x3d4362;allOpenOrders=[];try{for(const _0x73a2b0 of config[_0x20ed3a(0x1b5)]){!_0x73a2b0[_0x20ed3a(0x12b)]&&_0x73a2b0[_0x20ed3a(0x1e8)]!=config[_0x20ed3a(0x189)]&&(_0x3d4362=await exchange[_0x20ed3a(0x115)](_0x73a2b0[_0x20ed3a(0x135)]),_0x3d4362[_0x20ed3a(0x1a6)]>0x0&&allOpenOrders[_0x20ed3a(0x1a5)](_0x3d4362[0x0]));}}catch(_0x2bed27){await handleError(_0x2bed27,'getOpenOrders()');}}async function handleOpenOrders(_0x598b62=0x0){const _0x36ed7f=_0x241ad2;allOpenOrders[_0x36ed7f(0x1a6)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x598b62==0x0?(logger[_0x36ed7f(0x1af)]('1\x20-\x20Handle\x20open\x20orders'),_0x598b62++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x36ed7f(0x1af)](_0x36ed7f(0x1d0)),validateOrders(_0x36ed7f(0x1e4))));}async function testAPI(_0x48dec6){const _0x4bfb70=_0x241ad2,_0x4105a0=ccxt[_0x4bfb70(0x11a)][_0x48dec6[_0x4bfb70(0xe8)][_0x4bfb70(0xed)]()],_0x49da3e=new _0x4105a0({'apiKey':_0x48dec6['apiKey'],'secret':_0x48dec6[_0x4bfb70(0x218)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4bfb70(0x1e5)}});if(_0x48dec6[_0x4bfb70(0x22e)])_0x49da3e['password']=_0x48dec6[_0x4bfb70(0x22e)];try{await _0x49da3e['loadMarkets']();}catch(_0x3bae0f){throw _0x3bae0f;}}function cloneDeep(_0x2566a6){const _0x4cbc5f=_0x241ad2;return JSON[_0x4cbc5f(0x1d1)](JSON[_0x4cbc5f(0x21d)](_0x2566a6));}async function getPortfolio(_0x1051ff){const _0x288825=_0x241ad2;let _0x4b5ea9=[],_0x134e59=[],_0x2df3bf=[],_0x4a3d20;if(_0x1051ff[_0x288825(0x19b)]!=='************'||_0x1051ff[_0x288825(0x218)]!=='************'||_0x1051ff[_0x288825(0x22e)]&&_0x1051ff[_0x288825(0x22e)]!=='************'){if(config[_0x288825(0xe8)]){if(_0x1051ff[_0x288825(0x19b)]==_0x288825(0x1a7))_0x1051ff[_0x288825(0x19b)]=config[_0x288825(0x19b)];if(_0x1051ff[_0x288825(0x218)]==_0x288825(0x1a7))_0x1051ff[_0x288825(0x218)]=config[_0x288825(0x218)];if(_0x1051ff['apiPassword']==_0x288825(0x1a7))_0x1051ff['apiPassword']=config[_0x288825(0x22e)];try{await testAPI(_0x1051ff);}catch(_0x2b227e){if(_0x2b227e['toString']()[_0x288825(0x225)](_0x288825(0x157))){logger[_0x288825(0x1af)](_0x288825(0xfa)),proxyEmit(_0x288825(0x1b5),![]);return;}else{handleError(_0x2b227e,_0x288825(0x1b1));return;}}}await initExchange(_0x1051ff[_0x288825(0xe8)],_0x1051ff[_0x288825(0x19b)],_0x1051ff[_0x288825(0x218)],_0x1051ff[_0x288825(0x22e)]);try{await loadSymbols();}catch(_0x5cf39f){if(_0x5cf39f[_0x288825(0x17f)]()[_0x288825(0x225)]('AuthenticationError')){proxyEmit(_0x288825(0x1b5),![]);return;}else{handleError(_0x5cf39f,_0x288825(0xfd));return;}}const _0x4e8b31=await getCoins(0x0,![],_0x1051ff['basecoin']);_0x2df3bf=cloneDeep(_0x4e8b31[0x1]);}else{const _0x14b284=await getCoins();_0x2df3bf=cloneDeep(_0x14b284[0x1]);}if(_0x1051ff[_0x288825(0x189)]=='')proxyEmit(_0x288825(0x1b5),_0x2df3bf);else{_0x2df3bf[_0x288825(0x103)](_0x171276=>{const _0x1bc29a=_0x288825;if(_0x171276[_0x1bc29a(0x1e8)]!=_0x1051ff[_0x1bc29a(0x189)]&&allSymbols[_0x1bc29a(0x225)](_0x171276['symbol']))_0x4b5ea9[_0x1bc29a(0x1a5)](_0x171276[_0x1bc29a(0x135)]);});if(_0x4b5ea9[_0x288825(0x1a6)]==0x0)logHistory('error',_0x288825(0xf4));else{try{_0x134e59=await getTickers(_0x4b5ea9);}catch(_0x1a432d){if(_0x1a432d[_0x288825(0x17f)]()[_0x288825(0x225)]('AuthenticationError')){proxyEmit('portfolio',![]);return;}else handleError(_0x1a432d,_0x288825(0x145));}_0x2df3bf[_0x288825(0x103)](_0x260a87=>{const _0x4fd5fa=_0x288825;_0x260a87[_0x4fd5fa(0x1e8)]!=_0x1051ff[_0x4fd5fa(0x189)]?_0x134e59[_0x260a87['symbol']]?_0x4a3d20=_0x260a87[_0x4fd5fa(0x19a)]?0x1/_0x134e59[_0x260a87[_0x4fd5fa(0x135)]]['last']:_0x134e59[_0x260a87[_0x4fd5fa(0x135)]][_0x4fd5fa(0x122)]:_0x4a3d20=0x0:_0x4a3d20=0x1,_0x260a87['price']=formatResult(_0x4a3d20,0x8);}),proxyEmit(_0x288825(0x1b5),_0x2df3bf);}}}function truncateTradeAmount(_0x2d404f,_0x33607a){const _0x43c1f3=_0x241ad2;let _0x32b716=0x0;try{_0x32b716=exchange[_0x43c1f3(0x217)](_0x2d404f,_0x33607a);}catch(_0x374d43){}return _0x32b716;}function checkMinimums(_0x41c675){const _0x36dc39=_0x241ad2;let _0x7aec70=!![];const _0x2e0b44=!_0x41c675[_0x36dc39(0x19a)]?markets[_0x41c675[_0x36dc39(0x135)]][_0x36dc39(0x1d4)][_0x36dc39(0x185)]['min']:markets[_0x41c675['symbol']][_0x36dc39(0x1d4)][_0x36dc39(0xea)]['min'],_0x371d27=!_0x41c675[_0x36dc39(0x19a)]?markets[_0x41c675[_0x36dc39(0x135)]][_0x36dc39(0x1d4)]['cost']['min']:markets[_0x41c675['symbol']][_0x36dc39(0x1d4)][_0x36dc39(0x185)]['min'],_0xf73b76=truncateTradeAmount(_0x41c675[_0x36dc39(0x135)],_0x41c675[_0x36dc39(0x230)]);_0x41c675[_0x36dc39(0x230)]=_0xf73b76;if(Math['abs'](_0xf73b76)<_0x2e0b44)_0x7aec70=![];if(Math[_0x36dc39(0xfe)](_0xf73b76)*_0x41c675[_0x36dc39(0x122)]<_0x371d27)_0x7aec70=![];if(_0x41c675['side']==_0x36dc39(0x17c)){let _0x20630c=config['portfolio'][_0x36dc39(0x117)](_0x3f5414=>_0x3f5414[_0x36dc39(0x1e8)]==_0x41c675[_0x36dc39(0x1e8)]);if(_0x20630c[_0x36dc39(0xf7)]>0x0){if(Math[_0x36dc39(0xfe)](_0xf73b76)>_0x41c675['number']-_0x20630c['offset'])_0x7aec70=![];}else{if(Math[_0x36dc39(0xfe)](_0xf73b76)>_0x41c675[_0x36dc39(0x164)])_0x7aec70=![];}}if(_0x41c675[_0x36dc39(0x1c2)]==_0x36dc39(0x207)){let _0x10e334=config[_0x36dc39(0x1b5)][_0x36dc39(0x117)](_0x129062=>_0x129062['coin']==config[_0x36dc39(0x189)]),_0x13d9c2=currentCoins[_0x36dc39(0x117)](_0x5ea69f=>_0x5ea69f[_0x36dc39(0x1e8)]==config[_0x36dc39(0x189)]);if(_0x10e334[_0x36dc39(0xf7)]>0x0){if(Math[_0x36dc39(0xfe)](_0xf73b76)*_0x41c675[_0x36dc39(0x122)]>_0x13d9c2[_0x36dc39(0x164)]-_0x10e334['offset'])_0x7aec70=![];}else{if(Math[_0x36dc39(0xfe)](_0xf73b76)*_0x41c675[_0x36dc39(0x122)]>_0x13d9c2['number'])_0x7aec70=![];}}return _0x7aec70;}async function getBalances(_0x187e15=!![]){const _0x2be637=_0x241ad2;let _0x1e5e37=0x0,_0x37f6e0;const _0x5aa8fa=config['threshold'];if(config[_0x2be637(0x1c4)]&&config[_0x2be637(0x234)]<0x0)await validate24hChanges();currentCoins[_0x2be637(0x103)](_0xd9c617=>{const _0x22db89=_0x2be637;if(_0xd9c617[_0x22db89(0x1e8)]!=config[_0x22db89(0x189)]){let _0x55a495=global[_0x22db89(0x171)][noslash(_0xd9c617[_0x22db89(0x135)])];_0x37f6e0=_0xd9c617['reverse']?0x1/_0x55a495:_0x55a495;}else _0x37f6e0=0x1;let _0xcc226e=_0xd9c617[_0x22db89(0x164)]*_0x37f6e0;_0x1e5e37+=_0xcc226e,_0xd9c617['last']=formatResult(Number(_0x37f6e0),0x8),_0xd9c617[_0x22db89(0x1ef)]=_0xcc226e;}),currentCoins[_0x2be637(0x103)](_0x2aedd0=>{const _0xc2f318=_0x2be637;let _0x1bb9dc=config[_0xc2f318(0x1b5)][_0xc2f318(0x117)](_0x47d154=>_0x47d154[_0xc2f318(0x1e8)]==_0x2aedd0['coin']),_0x1b0bf6=Number(_0x1bb9dc[_0xc2f318(0x154)]),_0x412587=_0x2aedd0[_0xc2f318(0x1ef)]/_0x1e5e37*0x64,_0x150fe7=_0x1b0bf6*_0x1e5e37/0x64/_0x2aedd0[_0xc2f318(0x122)]-_0x2aedd0[_0xc2f318(0x164)];_0x2aedd0[_0xc2f318(0x154)]=formatResult(_0x412587,0x3),_0x2aedd0[_0xc2f318(0x20c)]=formatResult(_0x1b0bf6,0x3),_0x2aedd0[_0xc2f318(0x230)]=formatResult(_0x150fe7,0x8),_0x2aedd0[_0xc2f318(0x1c2)]='',_0x2aedd0['valid']=![];if(_0x2aedd0[_0xc2f318(0x1e8)]!=config['basecoin']){if(_0x2aedd0[_0xc2f318(0x154)]>_0x1b0bf6)_0x2aedd0[_0xc2f318(0x1c2)]=_0xc2f318(0x17c),_0x2aedd0[_0xc2f318(0x133)]=checkMinimums(_0x2aedd0);else _0x2aedd0[_0xc2f318(0x154)]<_0x1b0bf6&&(_0x2aedd0[_0xc2f318(0x1c2)]=_0xc2f318(0x207),_0x2aedd0[_0xc2f318(0x133)]=checkMinimums(_0x2aedd0));}_0x2aedd0[_0xc2f318(0x211)]=_0x2aedd0['distribution']/_0x2aedd0[_0xc2f318(0x20c)]-0x1;if(_0x2aedd0[_0xc2f318(0x235)]==_0xc2f318(0xee)||_0x2aedd0[_0xc2f318(0x235)]==_0xc2f318(0x1f7))_0x2aedd0[_0xc2f318(0x235)]=_0xc2f318(0xc6);}),currentCoins[_0x2be637(0x1c7)]((_0x206a21,_0x3eb892)=>_0x206a21[_0x2be637(0x211)]<_0x3eb892[_0x2be637(0x211)]?0x1:_0x3eb892[_0x2be637(0x211)]<_0x206a21[_0x2be637(0x211)]?-0x1:0x0);const _0x5dce0a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5dce0a['eur'],'usd':_0x5dce0a[_0x2be637(0x22d)],'portfolio':JSON[_0x2be637(0x21d)](currentCoins),'threshold':_0x5aa8fa},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x187e15){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5aa8fa});else{if(lockOrders==ORDERS[_0x2be637(0x1eb)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5aa8fa});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3062a5=getNormalizedPerformance();getStartingBalances(_0x3062a5),emitPerformance(_0x3062a5);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0xd25ce7=getNormalizedPerformance();emitPerformance(_0xd25ce7),getStartingBalances(_0xd25ce7),logger[_0x2be637(0x1af)](_0x2be637(0x121));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4055ca=_0x241ad2;if(!lastBalances)return;let _0x1fe59a=[],_0x1c9b65,_0x27cc4e=JSON[_0x4055ca(0x1d1)](lastBalances['portfolio']);_0x27cc4e['sort']((_0x4d1794,_0x32ee6e)=>_0x4d1794[_0x4055ca(0x1e8)]>_0x32ee6e[_0x4055ca(0x1e8)]?0x1:_0x32ee6e[_0x4055ca(0x1e8)]>_0x4d1794[_0x4055ca(0x1e8)]?-0x1:0x0),_0x27cc4e[_0x4055ca(0x103)](_0x256606=>{const _0x2192c=_0x4055ca;let _0x5d85fc={'coin':_0x256606[_0x2192c(0x1e8)],'number':_0x256606[_0x2192c(0x164)],'price':_0x256606[_0x2192c(0x122)]};_0x1fe59a[_0x2192c(0x1a5)](_0x5d85fc);});const _0x47273c=await getFiat();_0x1c9b65={'date':lastBalances[_0x4055ca(0x1da)]['split']('\x20')[0x0],'eur':_0x47273c[_0x4055ca(0xf1)],'usd':_0x47273c[_0x4055ca(0x22d)],'coins':_0x1fe59a};let _0x5e6729=dbPerformance[_0x4055ca(0xb0)](_0x4055ca(0xaa))[_0x4055ca(0x117)]({'date':_0x1c9b65['date']})[_0x4055ca(0x1ef)]();_0x5e6729?_0x1c9b65['date']!=config[_0x4055ca(0x1f3)]&&dbPerformance[_0x4055ca(0xb0)](_0x4055ca(0xaa))[_0x4055ca(0x117)]({'date':_0x1c9b65[_0x4055ca(0xd9)]})[_0x4055ca(0x216)](_0x1c9b65)[_0x4055ca(0x21b)]():dbPerformance['get'](_0x4055ca(0xaa))[_0x4055ca(0x1a5)](_0x1c9b65)[_0x4055ca(0x21b)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x10dce5=_0x241ad2;let _0x3eb291=[];if(dbPerformance[_0x10dce5(0x184)](_0x10dce5(0xaa))[_0x10dce5(0x1ef)]()){let _0x113d71=dbPerformance['get'](_0x10dce5(0xaa))['cloneDeep']()['filter'](_0x46d777=>{const _0x1edd3d=_0x10dce5;if(_0x46d777[_0x1edd3d(0x14d)]['length']==0x0)return![];else return!![];})['sortBy']('date')[_0x10dce5(0x1ef)](),_0x2939d0=[...config[_0x10dce5(0x238)]];_0x2939d0['sort']((_0x56dea4,_0x2413de)=>_0x56dea4[_0x10dce5(0xd9)]>_0x2413de[_0x10dce5(0xd9)]?-0x1:_0x2413de[_0x10dce5(0xd9)]>_0x56dea4['date']?0x1:0x0);let _0x5ab1f1=0x1,_0x3638f7=[],_0x2c04a4=0x0;_0x113d71['slice']()[_0x10dce5(0x19a)]()[_0x10dce5(0x103)]((_0x3f05fd,_0x1d4985)=>{const _0x3e1feb=_0x10dce5;if(_0x2939d0[_0x2c04a4]){if(_0x113d71[_0x113d71[_0x3e1feb(0x1a6)]-_0x1d4985]&&_0x2939d0[_0x2c04a4]['date']==_0x113d71[_0x113d71[_0x3e1feb(0x1a6)]-_0x1d4985][_0x3e1feb(0xd9)]){if(_0x1d4985<_0x113d71[_0x3e1feb(0x1a6)]){let _0x4540fa=0x0,_0x2254aa=0x0;_0x113d71[_0x113d71[_0x3e1feb(0x1a6)]-_0x1d4985][_0x3e1feb(0x14d)][_0x3e1feb(0x103)](_0x3fe785=>{const _0xc497f0=_0x3e1feb;_0x2254aa+=_0x3fe785[_0xc497f0(0x164)]*_0x3fe785[_0xc497f0(0x1ed)];}),_0x2939d0[_0x2c04a4][_0x3e1feb(0x1e0)]['forEach'](_0xbf6ea0=>{const _0x4fd2e7=_0x3e1feb;_0x4540fa+=_0xbf6ea0[_0x4fd2e7(0x164)]*_0xbf6ea0[_0x4fd2e7(0x1ed)];}),_0x5ab1f1*=_0x4540fa/(_0x2254aa-_0x4540fa)+0x1;}_0x2c04a4++;}}let _0x3984d0=0x0;_0x3f05fd[_0x3e1feb(0x14d)][_0x3e1feb(0x103)](_0x377f83=>{const _0x302127=_0x3e1feb;_0x3984d0+=_0x377f83[_0x302127(0x164)]*_0x377f83[_0x302127(0x1ed)];}),_0x3638f7[_0x113d71[_0x3e1feb(0x1a6)]-_0x1d4985-0x1]=_0x3984d0*(_0x5ab1f1-0x1);});let _0x532106=[];_0x2939d0=[...config[_0x10dce5(0x238)]]||[];let _0x5e2763=0x0;_0x2c04a4=0x0,_0x113d71[_0x10dce5(0x103)]((_0x27d1e4,_0x338c18)=>{const _0x271e27=_0x10dce5;if(_0x2939d0[_0x2c04a4]){const _0x20f6a6=fns['parse'](_0x2939d0[_0x2c04a4][_0x271e27(0xd9)],_0x271e27(0xd6),new Date()),_0x1460d1=fns[_0x271e27(0x1d1)](_0x27d1e4['date'],_0x271e27(0xd6),new Date());if(fns[_0x271e27(0x176)](_0x20f6a6,_0x1460d1)){let _0x3bcebb=0x0;_0x2939d0[_0x2c04a4][_0x271e27(0x1e0)][_0x271e27(0x103)](_0x44af62=>{const _0x51850e=_0x271e27;!_0x532106[_0x44af62['coin']]?_0x532106[_0x44af62[_0x51850e(0x1e8)]]=_0x44af62[_0x51850e(0x164)]:(_0x3bcebb=_0x532106[_0x44af62[_0x51850e(0x1e8)]],_0x532106[_0x44af62['coin']]+=_0x44af62['number']);const _0x2f6e99=_0x27d1e4['coins'][_0x51850e(0x117)](_0x35b11c=>_0x35b11c['coin']==_0x44af62[_0x51850e(0x1e8)]);(!_0x2f6e99||_0x2f6e99[_0x51850e(0x164)]==0x0)&&(_0x5e2763+=(-_0x44af62[_0x51850e(0x164)]-_0x3bcebb)*_0x44af62[_0x51850e(0x1ed)]);}),_0x2c04a4++;}}_0x27d1e4['coins'][_0x271e27(0x103)]((_0x145309,_0x3b6e75)=>{const _0x24e6b9=_0x271e27;_0x532106[_0x145309[_0x24e6b9(0x1e8)]]&&(_0x145309[_0x24e6b9(0x13a)]=_0x532106[_0x145309[_0x24e6b9(0x1e8)]]);}),_0x3eb291[_0x271e27(0x1a5)]({'date':_0x27d1e4[_0x271e27(0xd9)],'eur':_0x27d1e4['eur'],'usd':_0x27d1e4['usd'],'offset':_0x3638f7[_0x338c18],'netoffset':_0x5e2763,'coins':_0x27d1e4[_0x271e27(0x14d)]});});}return _0x3eb291;}function emitPerformance(_0x343544){const _0x5f14ad=_0x241ad2;_0x343544['length']!==0x0?(proxyEmit(_0x5f14ad(0x1d7),_0x343544),lastPerformanceEmitted=getDate()):proxyEmit(_0x5f14ad(0x1d7),[]);}function getPerf(_0x11a2df,_0x3c4a14){const _0x3b4f19=_0x241ad2;let _0x57f4ac=0x0,_0x13e276=0x0,_0xcf82fa=0x0;_0x11a2df['coins'][_0x3b4f19(0x103)](_0x22e3c0=>{const _0xe679bb=_0x3b4f19;_0x57f4ac+=_0x22e3c0['number']*_0x22e3c0[_0xe679bb(0x1ed)];});_0x3c4a14&&(_0x57f4ac+=_0x11a2df[_0x3b4f19(0xf7)]);if(config['basecoin']===_0x3b4f19(0x109)||config['basecoin']===_0x3b4f19(0x12f)||config[_0x3b4f19(0x189)]===_0x3b4f19(0x213))_0x13e276=_0x57f4ac*_0x11a2df[_0x3b4f19(0xf1)],_0xcf82fa=_0x57f4ac*_0x11a2df[_0x3b4f19(0x22d)];else{if(usdBasecoins['includes'](config['basecoin']))_0x13e276=_0x57f4ac*_0x11a2df[_0x3b4f19(0xf1)]/_0x11a2df[_0x3b4f19(0x22d)],_0xcf82fa=_0x57f4ac;else config[_0x3b4f19(0x189)]===_0x3b4f19(0xf6)&&(_0x13e276=_0x57f4ac,_0xcf82fa=_0x57f4ac*_0x11a2df[_0x3b4f19(0x22d)]/_0x11a2df['eur']);}return[_0x57f4ac,_0x13e276,_0xcf82fa];}function getKPIs(_0x389f78,_0x182db7='EUR'){const _0x4d2da4=_0x241ad2,_0x1db120=config[_0x4d2da4(0x189)],_0x56412a=lastBalances,_0x1cd132=currentCoins,_0xcf4d23=getNormalizedPerformance(),_0x3c3a6c=_0x389f78===_0x4d2da4(0x189)?_0x1db120:_0x389f78==='fiat'||_0x389f78===_0x4d2da4(0x1b6)?_0x182db7:'Net\x20'+_0x1db120,_0x4db10f=_0x389f78===_0x4d2da4(0x1ea)?_0x4d2da4(0x1bc):_0x389f78===_0x4d2da4(0x1b6)?_0x4d2da4(0x1bc):_0x3c3a6c+'\x20value',_0xd9dfa3=_0x389f78===_0x4d2da4(0x1ea)||_0x389f78===_0x4d2da4(0x1b6)?'Net\x20effect':_0x3c3a6c+'\x20change';let _0x351730=0x0;_0x1cd132[_0x4d2da4(0x103)](_0x479726=>{const _0x564a0e=_0x4d2da4;_0x351730+=_0x479726[_0x564a0e(0x164)]*_0x479726[_0x564a0e(0x122)];});if(_0x389f78==='fiat'||_0x389f78===_0x4d2da4(0x1b6)){if(_0x1db120==='BTC'||_0x1db120===_0x4d2da4(0x12f)||_0x1db120===_0x4d2da4(0x213))_0x351730=_0x351730*(_0x182db7==='EUR'?_0x56412a['eur']:_0x56412a[_0x4d2da4(0x22d)]);else{if(usdBasecoins['includes'](_0x1db120))_0x351730=_0x351730*(_0x182db7===_0x4d2da4(0xf6)?_0x56412a[_0x4d2da4(0xf1)]/_0x56412a[_0x4d2da4(0x22d)]:0x1);else _0x1db120===_0x4d2da4(0xf6)&&(_0x351730=_0x351730*(_0x182db7==='EUR'?0x1:_0x56412a[_0x4d2da4(0x22d)]/_0x56412a[_0x4d2da4(0xf1)]));}}let _0x4f96f6;if(_0x351730!==0x0){if(_0x389f78===_0x4d2da4(0x189))_0x4f96f6=(_0x351730/startingBalances['basecoin']-0x1)*0x64;else{if(_0x182db7==='EUR')_0x4f96f6=(_0x351730/startingBalances[_0x4d2da4(0xf1)]-0x1)*0x64;else _0x4f96f6=(_0x351730/startingBalances[_0x4d2da4(0x22d)]-0x1)*0x64;}let _0x2c7164=0x0;if(startingBalances[_0x4d2da4(0x14d)])_0x1cd132[_0x4d2da4(0x103)](_0x254e86=>{const _0x5e7230=_0x4d2da4;let _0x1d3901=startingBalances[_0x5e7230(0x14d)]['find'](_0x195b87=>_0x195b87['coin']===_0x254e86['coin']);if(_0x1d3901&&_0x1d3901['coin']&&_0x254e86[_0x5e7230(0x164)]!==0x0)_0x2c7164+=_0x1d3901['number']*_0x254e86[_0x5e7230(0x122)];});let _0x377963=0x0;if(_0xcf4d23[_0x4d2da4(0x1a6)]!==0x0){let _0x27d145=_0xcf4d23[_0xcf4d23[_0x4d2da4(0x1a6)]-0x1];_0x377963=_0x27d145[_0x4d2da4(0x106)];}_0x2c7164-=_0x377963;_0x389f78===_0x4d2da4(0x1ea)&&(_0x4f96f6=(_0x351730-_0x2c7164)/startingBalances[_0x4d2da4(0x189)]*0x64,_0x351730=_0x351730-_0x2c7164);if(_0x389f78==='net-fiat'){let _0x36bb2e=_0x182db7===_0x4d2da4(0xf6)?startingBalances['eur']:startingBalances['usd'];if(_0x1db120===_0x4d2da4(0x109)||_0x1db120==='ETH'||_0x1db120==='PAXG')_0x2c7164=_0x182db7===_0x4d2da4(0xf6)?_0x2c7164*_0x56412a[_0x4d2da4(0xf1)]:_0x2c7164*_0x56412a[_0x4d2da4(0x22d)];else{if(usdBasecoins['includes'](_0x1db120))_0x2c7164=_0x182db7===_0x4d2da4(0xf6)?_0x2c7164*_0x56412a[_0x4d2da4(0xf1)]/_0x56412a[_0x4d2da4(0x22d)]:_0x2c7164;else _0x1db120===_0x4d2da4(0xf6)&&(_0x2c7164=_0x182db7===_0x4d2da4(0xf6)?_0x2c7164:_0x2c7164*_0x56412a['usd']/_0x56412a[_0x4d2da4(0xf1)]);}_0x4f96f6=(_0x351730-_0x2c7164)/_0x36bb2e*0x64,_0x351730=_0x351730-_0x2c7164;}if(_0x4f96f6){if(_0x4f96f6<0x64)_0x4f96f6=_0x4f96f6[_0x4d2da4(0x1d9)](0x2);else{if(_0x4f96f6<0x3e8)_0x4f96f6=_0x4f96f6['toFixed'](0x1);else _0x4f96f6=_0x4f96f6['toFixed'](0x0);}}else _0x4f96f6=Number('0')[_0x4d2da4(0x1d9)](0x2);if(_0x351730){if(Math['abs'](_0x351730)<0.000001)_0x351730=_0x351730[_0x4d2da4(0x1d9)](0x2);else{if(Math[_0x4d2da4(0xfe)](_0x351730)<0.1)_0x351730=_0x351730['toFixed'](0x6);else{if(Math[_0x4d2da4(0xfe)](_0x351730)<0x1)_0x351730=_0x351730[_0x4d2da4(0x1d9)](0x5);else{if(Math[_0x4d2da4(0xfe)](_0x351730)<0xa)_0x351730=_0x351730[_0x4d2da4(0x1d9)](0x4);else{if(Math[_0x4d2da4(0xfe)](_0x351730)<0x64)_0x351730=_0x351730[_0x4d2da4(0x1d9)](0x3);else{if(Math[_0x4d2da4(0xfe)](_0x351730)<0x3e8)_0x351730=_0x351730[_0x4d2da4(0x1d9)](0x2);else _0x351730=_0x351730[_0x4d2da4(0x1d9)](0x2);}}}}}}else _0x351730=Number('0')[_0x4d2da4(0x1d9)](0x2);}else _0x4f96f6=Number('0')[_0x4d2da4(0x1d9)](0x2);return{'value':_0x351730,'change':_0x4f96f6,'leftTxt':_0x4db10f,'rightTxt':_0xd9dfa3};}function _0xab6f(_0x3177a4,_0x5c81c0){const _0x997b39=_0x430b();return _0xab6f=function(_0x28caca,_0x5c3641){_0x28caca=_0x28caca-0xaa;let _0x430b10=_0x997b39[_0x28caca];return _0x430b10;},_0xab6f(_0x3177a4,_0x5c81c0);}async function getStartingBalances(_0x199a7f,_0x554fbb=!![]){const _0x4a3ec1=_0x241ad2;if(_0x199a7f[_0x4a3ec1(0x1a6)]!==0x0){const [_0x1201fd,_0x205ffb,_0x1135aa]=getPerf(_0x199a7f[0x0],!![]);let _0x268b9c=[];config['portfolio'][_0x4a3ec1(0x103)](_0x70be7f=>{const _0x2ca64f=_0x4a3ec1;let _0x4c6388=0x0,_0x4103d6;config[_0x2ca64f(0x238)][_0x2ca64f(0x103)](_0x29d450=>{const _0x21e9cd=_0x2ca64f;let _0x33332b=_0x29d450[_0x21e9cd(0x1e0)][_0x21e9cd(0x117)](_0x12d1bd=>_0x12d1bd[_0x21e9cd(0x1e8)]==_0x70be7f[_0x21e9cd(0x1e8)]);if(_0x33332b){_0x4c6388+=_0x33332b[_0x21e9cd(0x164)];if(!_0x4103d6)_0x4103d6=_0x33332b['price'];}}),_0x268b9c[_0x2ca64f(0x1a5)]({'coin':_0x70be7f['coin'],'number':_0x4c6388,'initialprice':_0x4103d6});});const _0x2d8315={'basecoin':_0x1201fd,'eur':_0x205ffb,'usd':_0x1135aa,'coins':_0x268b9c};if(_0x554fbb)proxyEmit(_0x4a3ec1(0x1c6),_0x2d8315);startingBalances=_0x2d8315;}}function headlessMode(_0x47b38d){const _0x2b21a8=_0x241ad2;let _0x23fb6b=_0x47b38d[_0x2b21a8(0x1b5)],_0x261b34=_0x47b38d[_0x2b21a8(0xc9)],_0x550b82=[];for(let _0x551bad of _0x23fb6b){if(_0x551bad[_0x2b21a8(0x1e8)]!=config[_0x2b21a8(0x189)]){if(_0x551bad['delta']>=_0x261b34/0x64){if(_0x551bad[_0x2b21a8(0x133)])_0x550b82['push'](_0x551bad);}else{if(_0x551bad[_0x2b21a8(0x211)]<=-_0x261b34/0x64){if(_0x551bad['valid'])_0x550b82['push'](_0x551bad);}}}}_0x550b82[_0x2b21a8(0x1a6)]>0x0&&(lockOrders==ORDERS[_0x2b21a8(0x1eb)]&&!coolingDown&&_0x550b82[_0x2b21a8(0x103)](_0x4ea0df=>{const _0x9d83ca=_0x2b21a8;logger[_0x9d83ca(0x1af)](_0x9d83ca(0x202)+_0x4ea0df['coin']+'\x20'+_0x4ea0df[_0x9d83ca(0x164)]+'\x20'+_0x4ea0df['last']+'\x20'+_0x4ea0df[_0x9d83ca(0x154)]+'%\x20'+_0x4ea0df['target']+'%\x20'+(0x64*_0x4ea0df[_0x9d83ca(0x211)])[_0x9d83ca(0x1d9)](0x2)+_0x9d83ca(0xce)+_0x261b34[_0x9d83ca(0x1d9)](0x2)+'%)');}),placeOrder(_0x550b82));}function notifyBalance(_0x1bf948){const _0x1ec062=_0x241ad2;let _0x3a52a8=_0x1bf948['portfolio'],_0x366208=_0x1bf948[_0x1ec062(0xc9)],_0x478d6f=[];for(let _0x5b84b9 of _0x3a52a8){if(_0x5b84b9[_0x1ec062(0x1e8)]!=config['basecoin']){if(_0x5b84b9[_0x1ec062(0x211)]>=_0x366208/0x64){if(_0x5b84b9[_0x1ec062(0x133)])_0x478d6f['push'](_0x5b84b9);}else{if(_0x5b84b9['delta']<=-_0x366208/0x64){if(_0x5b84b9[_0x1ec062(0x133)])_0x478d6f[_0x1ec062(0x1a5)](_0x5b84b9);}}}}if(_0x478d6f['length']>0x0){let _0x5899f8=_0x478d6f[_0x1ec062(0x1d3)](_0x4e82a4=>_0x4e82a4['coin']);_0x5899f8[_0x1ec062(0x1c7)]();let _0x2ad00e=_0x5899f8['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x1ec062(0x138),_0x1ec062(0x14e));lastCoinsToBalance=_0x2ad00e;}}function symbolToCoin(_0x47a4fb){const _0x2554f3=_0x241ad2;let _0x4136ec;if(_0x47a4fb[_0x2554f3(0x225)]('/'+config['basecoin']))_0x4136ec=_0x47a4fb[_0x2554f3(0x1b9)]('/'+config['basecoin'],'');if(_0x47a4fb[_0x2554f3(0x225)](config['basecoin']+'/'))_0x4136ec=_0x47a4fb['replace'](config[_0x2554f3(0x189)]+'/','');return _0x4136ec;}async function unlockOrders(){const _0x2d8478=_0x241ad2;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2d8478(0x12c)]){logger[_0x2d8478(0x1af)](_0x2d8478(0xaf)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x407c26=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x407c26,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x2d8478(0x1eb)],logger[_0x2d8478(0x1af)](_0x2d8478(0x124));}}async function validateOrders(_0x7d55ae){const _0x431440=_0x241ad2;if(_0x7d55ae)validateOrdersState=_0x7d55ae;logger[_0x431440(0x1af)](_0x431440(0x104)+validateOrdersState+_0x431440(0xf0)+(lockOrders==0x1?_0x431440(0x1c1):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x220c1c=[],_0x141781=config[_0x431440(0x201)]==_0x431440(0xc4)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x431440(0x1af)](_0x431440(0x186)+validateOrdersState),lastOrders[_0x431440(0x103)](_0x16e128=>{const _0x29bb4e=_0x431440;let _0x255ff6=![];_0x16e128[_0x29bb4e(0xee)]>0x0&&(_0x255ff6=!![]),_0x220c1c['push'](_0x255ff6),_0x255ff6&&config['ordertype']!=_0x29bb4e(0xc4)&&logHistory(_0x29bb4e(0x152),_0x29bb4e(0x177)+_0x16e128[_0x29bb4e(0x135)]+'\x20'+_0x16e128[_0x29bb4e(0x1c2)]+'\x20#'+formatResult(_0x16e128[_0x29bb4e(0xee)],0x8)+'\x20@'+formatResult(_0x16e128['price'],0x8));}),_0x220c1c[_0x431440(0x103)]((_0x20a9e8,_0x4a0d4)=>{const _0x4ff25e=_0x431440;if(_0x20a9e8)lastOrders[_0x4ff25e(0xe3)](_0x4a0d4,0x1);}),persistOpenOrders(lastOrders);const _0x4f5060=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x431440(0x1be);if(validateOrdersState==_0x431440(0x13a)){validateOrdersState='ongoing';if(_0x220c1c[_0x431440(0x225)](![])){if(config[_0x431440(0x201)]==_0x431440(0xc4)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x431440(0x10d)){if(_0x220c1c[_0x431440(0x225)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x431440(0xc4)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x220c1c[_0x431440(0x225)](![])&&(config[_0x431440(0x201)]=='market'?logHistory('success',_0x431440(0x180)+Math[_0x431440(0x16d)](_0x141781*validateOrderInterval/0xea60)+_0x431440(0xda)+_0x4f5060):(await cancelOrders(),logHistory('success',_0x431440(0x18c)+Math[_0x431440(0x16d)](_0x141781*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4f5060))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x431440(0xc4))logHistory(_0x431440(0xfc),_0x431440(0xde)+_0x4f5060);await unlockOrders();}}}}}async function cancelOrders(){const _0x4f5bdc=_0x241ad2;lastOrders[_0x4f5bdc(0x103)](async _0x225a7a=>{const _0x48a8fe=_0x4f5bdc;try{const _0x1f952c=await exchange[_0x48a8fe(0x13e)](_0x225a7a[_0x48a8fe(0x1fd)],_0x225a7a[_0x48a8fe(0x135)]);}catch(_0x8d79e2){if(_0x8d79e2[_0x48a8fe(0x17f)]()['includes'](_0x48a8fe(0x228))){}else await handleError(_0x8d79e2,_0x48a8fe(0x20b));}});}async function initCoinResults(_0x33d27e){const _0x3748cc=_0x241ad2;_0x33d27e?logger[_0x3748cc(0x1af)](_0x3748cc(0x141)+_0x33d27e):logger['debug'](_0x3748cc(0x112)),config['portfolio'][_0x3748cc(0x103)](_0x25f78b=>{const _0x4f08ee=_0x3748cc;if(!_0x25f78b[_0x4f08ee(0x12b)]&&_0x25f78b[_0x4f08ee(0x1e8)]!=config[_0x4f08ee(0x189)]){const _0x2df492=currentCoins[_0x4f08ee(0x117)](_0x20bc18=>_0x20bc18[_0x4f08ee(0x1e8)]==_0x25f78b['coin']),_0x105225=global['ticker'][noslash(_0x25f78b[_0x4f08ee(0x135)])];let _0x2d4006=_0x2df492?_0x2df492[_0x4f08ee(0x164)]:null,_0x1c3e3b=_0x25f78b[_0x4f08ee(0x19a)]?0x1/_0x105225:_0x105225,_0x2569b9;config['liquidity'][_0x4f08ee(0x103)](_0x543b9a=>{const _0x3eacba=_0x4f08ee;!_0x2569b9&&(_0x2569b9=_0x543b9a[_0x3eacba(0x1e0)][_0x3eacba(0x117)](_0x4c077=>_0x4c077[_0x3eacba(0x1e8)]==_0x25f78b[_0x3eacba(0x1e8)]),_0x2569b9&&(_0x2d4006=_0x2569b9['number'],_0x1c3e3b=_0x2569b9[_0x3eacba(0x1ed)]));});let _0x4b6d73=dbCoinResults[_0x4f08ee(0xb0)](_0x4f08ee(0x14d))[_0x4f08ee(0x117)]({'coin':_0x25f78b[_0x4f08ee(0x1e8)]})['value']();if(!_0x4b6d73){const _0x5124e6={'coin':_0x25f78b[_0x4f08ee(0x1e8)],'number':_0x2d4006,'breakeven':_0x1c3e3b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4f08ee(0xb0)](_0x4f08ee(0x14d))[_0x4f08ee(0x1a5)](_0x5124e6)[_0x4f08ee(0x21b)]();}else{if(_0x33d27e&&_0x25f78b[_0x4f08ee(0x1e8)]==_0x33d27e){const _0x313646={'coin':_0x25f78b[_0x4f08ee(0x1e8)],'number':_0x2d4006,'breakeven':_0x1c3e3b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4f08ee(0xb0)](_0x4f08ee(0x14d))[_0x4f08ee(0x117)]({'coin':_0x25f78b[_0x4f08ee(0x1e8)]})[_0x4f08ee(0x216)](_0x313646)[_0x4f08ee(0x21b)]();}}}});}async function updateCoinResults(_0x193535,_0x535729=![]){const _0x3a50ca=_0x241ad2;let _0x3ff2a6,_0x3130e7,_0xbd4298,_0x5d74ba,_0x5779d0,_0x108dd0,_0x448fc5=dbCoinResults['get']('coins')[_0x3a50ca(0x117)]({'coin':_0x193535[_0x3a50ca(0x1e8)]})[_0x3a50ca(0x1ef)](),_0x2bf846=![];_0x448fc5&&Object[_0x3a50ca(0x1e1)](_0x448fc5)['forEach'](([_0x3be2b7,_0x14a61a])=>{if(_0x14a61a==null)_0x2bf846=!![];});(!_0x448fc5||_0x2bf846)&&(await initCoinResults(_0x193535[_0x3a50ca(0x1e8)]),_0x448fc5=dbCoinResults[_0x3a50ca(0xb0)](_0x3a50ca(0x14d))[_0x3a50ca(0x117)]({'coin':_0x193535['coin']})['value']());_0x193535[_0x3a50ca(0x19a)]&&(_0x108dd0={'filled':_0x193535[_0x3a50ca(0xee)]*_0x193535['price'],'amount':_0x193535['filled']*_0x193535[_0x3a50ca(0x1ed)],'side':_0x193535['side']=='sell'?'buy':_0x3a50ca(0x17c),'price':0x1/_0x193535[_0x3a50ca(0x1ed)]},_0x193535={..._0x193535,..._0x108dd0});_0x535729?_0x3130e7=_0x193535['side']==_0x3a50ca(0x207)?_0x448fc5['number']+_0x193535['filled']:_0x448fc5[_0x3a50ca(0x164)]-_0x193535[_0x3a50ca(0xee)]:_0x3130e7=await getCoinNumber(_0x193535['coin']);if(_0x193535[_0x3a50ca(0x107)]&&_0x193535[_0x3a50ca(0x107)]['currency']==config[_0x3a50ca(0x189)])_0x3ff2a6=_0x193535['fee'][_0x3a50ca(0xea)];else{if(_0x193535['fee']&&_0x193535[_0x3a50ca(0x107)][_0x3a50ca(0x1e6)]=='BNB'&&!_0x535729&&config['basecoin']!=_0x3a50ca(0x213))_0x3ff2a6=_0x193535[_0x3a50ca(0x107)][_0x3a50ca(0xea)]*global['ticker']['BNB'+config['basecoin']];else _0x3ff2a6=defaultFee*_0x193535[_0x3a50ca(0xee)]*_0x193535[_0x3a50ca(0x1ed)];}_0x193535['side']==_0x3a50ca(0x207)?(_0xbd4298=_0x3130e7!=0x0?(_0x448fc5[_0x3a50ca(0x149)]*_0x448fc5['number']+_0x193535[_0x3a50ca(0x1ed)]*(_0x3130e7-_0x448fc5[_0x3a50ca(0x164)])+_0x3ff2a6)/_0x3130e7:0x0,_0x5d74ba=_0x448fc5[_0x3a50ca(0xb6)]):(_0xbd4298=_0x3130e7!=0x0?(_0x448fc5['breakeven']*_0x448fc5['number']-_0x193535['price']*(_0x448fc5[_0x3a50ca(0x164)]-_0x3130e7)+_0x3ff2a6)/_0x3130e7:0x0,_0x5d74ba=_0x448fc5[_0x3a50ca(0xb6)]+(_0x193535['price']-_0x448fc5['breakeven'])*_0x193535[_0x3a50ca(0xee)]);_0x5779d0=(_0x193535[_0x3a50ca(0x1ed)]-_0xbd4298-_0x3ff2a6/_0x193535[_0x3a50ca(0xee)])*_0x3130e7;let _0x3f41d7={'coin':_0x193535[_0x3a50ca(0x1e8)],'number':_0x3130e7,'breakeven':formatResult(_0xbd4298,0x8),'realized':formatResult(_0x5d74ba,0x8),'unrealized':formatResult(_0x5779d0,0x8),'fees':formatResult(_0x448fc5[_0x3a50ca(0x191)]+_0x3ff2a6,0x8),'sells':_0x193535['side']==_0x3a50ca(0x17c)?_0x448fc5[_0x3a50ca(0xb5)]+0x1:_0x448fc5['sells'],'buys':_0x193535['side']=='buy'?_0x448fc5[_0x3a50ca(0x232)]+0x1:_0x448fc5[_0x3a50ca(0x232)]};dbCoinResults[_0x3a50ca(0xb0)](_0x3a50ca(0x14d))[_0x3a50ca(0x117)]({'coin':_0x193535['coin']})[_0x3a50ca(0x216)](_0x3f41d7)[_0x3a50ca(0x21b)]();if(!_0x535729){if(_0x193535[_0x3a50ca(0x107)]&&_0x193535[_0x3a50ca(0x107)][_0x3a50ca(0x1e6)]==_0x3a50ca(0x13b)){const _0x311897=currentCoins[_0x3a50ca(0x117)](_0x1e6721=>_0x1e6721['coin']=='BNB');if(_0x311897){let _0x9bb79a=dbCoinResults[_0x3a50ca(0xb0)](_0x3a50ca(0x14d))['find']({'coin':_0x3a50ca(0x13b)})[_0x3a50ca(0x1ef)]();_0x3f41d7={..._0x9bb79a,'number':_0x311897[_0x3a50ca(0x164)]},dbCoinResults['get'](_0x3a50ca(0x14d))[_0x3a50ca(0x117)]({'coin':'BNB'})[_0x3a50ca(0x216)](_0x3f41d7)[_0x3a50ca(0x21b)]();}}}}async function placeOrder(_0x2aad98){const _0x43126c=_0x241ad2,_0x2e5c67=config[_0x43126c(0x201)]==_0x43126c(0xc4)?_0x43126c(0xc4):'limit';if(lockOrders==ORDERS[_0x43126c(0x1eb)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x43126c(0x12c)],allOrdersPlaced=![],validateOrdersState='initial';let _0x1b17f9=![];lastOrders=[];for(const _0x7471f5 of _0x2aad98){let _0x20c97c,_0x16af9d,_0x2fe65f,_0x7f608,_0x592a7b,_0x5126ab=_0x7471f5['symbol'];try{const _0x37d01b=await exchange[_0x43126c(0x22a)](_0x5126ab);_0x20c97c=_0x7471f5[_0x43126c(0x19a)]?0x1/_0x7471f5[_0x43126c(0x122)]:_0x7471f5[_0x43126c(0x122)],_0x16af9d=_0x37d01b[_0x43126c(0x1ae)],_0x2fe65f=_0x37d01b[_0x43126c(0x16f)];_0x7471f5['reverse']?(_0x7f608=_0x7471f5[_0x43126c(0x1c2)]==_0x43126c(0x207)?_0x43126c(0x17c):_0x43126c(0x207),_0x592a7b=Math[_0x43126c(0xfe)](_0x7471f5[_0x43126c(0x230)])/_0x20c97c):(_0x7f608=_0x7471f5[_0x43126c(0x1c2)],_0x592a7b=Math[_0x43126c(0xfe)](_0x7471f5['trade']));_0x2e5c67=='limit'&&(config[_0x43126c(0x201)]=='limit-high'&&(_0x20c97c=_0x7f608==_0x43126c(0x207)?_0x16af9d:_0x2fe65f),config[_0x43126c(0x201)]==_0x43126c(0x14b)&&(_0x20c97c=_0x7f608=='buy'?_0x2fe65f:_0x16af9d));_0x592a7b=formatResult(_0x592a7b,0x8),_0x20c97c=formatResult(_0x20c97c,0x8);const _0x360fe9=_0x7f608=='sell'?config[_0x43126c(0x1e9)]?String['fromCodePoint']('0x'+config[_0x43126c(0x1e9)])+'\x20':'':config[_0x43126c(0x21c)]?String[_0x43126c(0xef)]('0x'+config['emojibuy'])+'\x20':'',_0x1e1f16=_0x2e5c67==_0x43126c(0xc4)?_0x43126c(0x1d6):config[_0x43126c(0x201)]==_0x43126c(0x21f)?_0x43126c(0x12d):_0x43126c(0x198),_0x3e1f78=(Math[_0x43126c(0x158)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x43126c(0x17f)]();lastOrders[_0x43126c(0x1a5)]({'customId':_0x3e1f78,'symbol':_0x5126ab,'coin':_0x7471f5[_0x43126c(0x1e8)],'amount':_0x592a7b,'price':_0x20c97c,'side':_0x7f608,'reverse':_0x7471f5[_0x43126c(0x19a)],'filled':0x0});if(_0x2e5c67==_0x43126c(0xc4))logHistory('order',''+_0x360fe9+_0x1e1f16+'\x20order:\x20'+_0x5126ab+'\x20'+_0x7f608+'\x20#'+formatResult(_0x592a7b,0x8)+'\x20@'+formatResult(_0x20c97c,0x8));else logHistory('order',''+_0x360fe9+_0x1e1f16+_0x43126c(0x170)+_0x5126ab+'\x20'+_0x7f608+'\x20#'+formatResult(_0x592a7b,0x8)+'\x20@'+formatResult(_0x20c97c,0x8));let _0x32f2d9;_0x2e5c67==_0x43126c(0xc4)?_0x7f608==_0x43126c(0x207)&&[_0x43126c(0x231),_0x43126c(0x126),'Cex','Huobi','Huobipro'][_0x43126c(0x225)](config['exchange'])?_0x32f2d9=await exchange['createOrder'](_0x5126ab,_0x2e5c67,_0x7f608,_0x592a7b,_0x20c97c):_0x32f2d9=await exchange[_0x43126c(0x1fc)](_0x5126ab,_0x2e5c67,_0x7f608,_0x592a7b,undefined):_0x32f2d9=await exchange[_0x43126c(0x1fc)](_0x5126ab,_0x2e5c67,_0x7f608,_0x592a7b,_0x20c97c);logger[_0x43126c(0x1af)](_0x43126c(0xe9)+_0x32f2d9['id']+_0x43126c(0x212)+_0x3e1f78);const _0x167c94=lastOrders[_0x43126c(0x1a6)]-0x1;if(_0x167c94>=0x0&&lastOrders[_0x167c94]['customId']==_0x3e1f78){lastOrders[_0x167c94]['orderId']=_0x32f2d9['id'];if(_0x32f2d9[_0x43126c(0x185)])lastOrders[_0x167c94][_0x43126c(0x185)]=_0x32f2d9[_0x43126c(0x185)];if(_0x32f2d9[_0x43126c(0x1ed)])lastOrders[_0x167c94][_0x43126c(0x1ed)]=_0x32f2d9[_0x43126c(0x1ed)];lastOrders[_0x167c94]['fee']=_0x32f2d9['fee'];}if(config[_0x43126c(0x1c3)]!=0x0){let _0x21fef2=null;if(cooldownTracker[_0x43126c(0x1a6)]==config[_0x43126c(0x1c3)]-0x1)_0x21fef2=cooldownTracker['shift']();const _0xb6da05=getTimeStamp();cooldownTracker['push'](_0xb6da05);if(_0x21fef2){const _0x24a737=fns['differenceInSeconds'](new Date(_0xb6da05),new Date(_0x21fef2));if(_0x24a737<cooldownInterval){logHistory(_0x43126c(0x19c),_0x43126c(0x155)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x43126c(0x196)+cooldownPeriod/(0xe10*0x3e8)+_0x43126c(0x18b)),coolingDown=!![];break;}}}}catch(_0x2ffa16){if(_0x2ffa16[_0x43126c(0x17f)]()[_0x43126c(0x225)](_0x43126c(0x222)))lastOrders=lastOrders[_0x43126c(0x1b7)](_0x149b14=>_0x149b14[_0x43126c(0x135)]!=_0x5126ab),logHistory(_0x43126c(0x19c),_0x43126c(0x13f)+_0x5126ab),_0x1b17f9=!![];else{if(_0x2ffa16[_0x43126c(0x17f)]()[_0x43126c(0x225)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x43126c(0x1b7)](_0x409e14=>_0x409e14[_0x43126c(0x135)]!=_0x5126ab),logHistory(_0x43126c(0x19c),'Order\x20amount\x20is\x20invalid:\x20'+_0x5126ab),_0x1b17f9=!![];else{if(_0x2ffa16[_0x43126c(0x17f)]()['includes'](_0x43126c(0x10a)))lastOrders=lastOrders[_0x43126c(0x1b7)](_0x2a7d14=>_0x2a7d14[_0x43126c(0x135)]!=_0x5126ab),logHistory(_0x43126c(0x19c),'Order\x20is\x20invalid:\x20'+_0x5126ab),logger['debug'](_0x2ffa16),_0x1b17f9=!![];else _0x2ffa16[_0x43126c(0x17f)]()[_0x43126c(0x225)](_0x43126c(0x224))?(lastOrders=lastOrders[_0x43126c(0x1b7)](_0x47db04=>_0x47db04[_0x43126c(0x135)]!=_0x5126ab),logHistory(_0x43126c(0x19c),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5126ab),_0x1b17f9=!![]):(lastOrders=lastOrders['filter'](_0x21d539=>_0x21d539[_0x43126c(0x135)]!=_0x5126ab),await handleError(_0x2ffa16,_0x43126c(0x179),_0x5126ab));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x43126c(0x1a6)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1c3e7d=config['ordertype']==_0x43126c(0xc4)?validateOrderTimeout*0x3c*0x3e8:config[_0x43126c(0x140)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4301c1=_0x43126c;validateOrders(_0x4301c1(0x119));},_0x1c3e7d);}else unlockOrders();_0x1b17f9&&config[_0x43126c(0x1c4)]&&(logHistory(_0x43126c(0x19c),_0x43126c(0x144)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43126c(0xfc),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x43126c(0x1c4)]&&logHistory(_0x43126c(0x19c),_0x43126c(0xac));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x43126c(0x1c4)]&&(config[_0x43126c(0x201)]==_0x43126c(0xc4)?logHistory('error',_0x43126c(0xff)):logHistory(_0x43126c(0x19c),_0x43126c(0xb8))));}}function persistOpenOrders(_0x4abd4f){const _0x45ab66=_0x241ad2,_0x81b0ba={...config,'openOrders':_0x4abd4f};let _0x30256d=dbConfig[_0x45ab66(0xb0)](_0x45ab66(0x1a4))['find']({'botID':botID})['value']();_0x30256d&&dbConfig[_0x45ab66(0xb0)](_0x45ab66(0x1a4))[_0x45ab66(0x117)]({'botID':botID})[_0x45ab66(0x216)](_0x81b0ba)[_0x45ab66(0x21b)]();}function restoreOrders(){const _0x29406a=_0x241ad2;let _0xb946fc;config[_0x29406a(0x181)]&&allOpenOrders[_0x29406a(0x103)](_0xe19264=>{const _0x3495be=_0x29406a,_0x338ee1=config[_0x3495be(0x181)][_0x3495be(0x117)](_0x1dc01e=>_0x1dc01e[_0x3495be(0x1fd)]==_0xe19264['id']);_0x338ee1&&(lastOrders[_0x3495be(0x1a5)](_0x338ee1),_0xb946fc=_0xe19264[_0x3495be(0xc1)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x29406a(0x12c)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x471a09=new Date()['getTime'](),_0x25a13a=config[_0x29406a(0x201)]==_0x29406a(0xc4)?validateOrderTimeout*0x3c*0x3e8:config[_0x29406a(0x140)]*0x3c*0x3e8;if(_0xb946fc+_0x25a13a>_0x471a09){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0xb946fc+_0x25a13a-_0x471a09);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x2a4b80=_0x241ad2;if(!coinsLoaded){process[_0x2a4b80(0x146)]({'telegrammsg':_0x2a4b80(0x118)},_0x16541e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3fb346='';if(config[_0x2a4b80(0xc0)])_0x3fb346='<b>'+config[_0x2a4b80(0x11f)]+_0x2a4b80(0x233);else _0x3fb346=_0x2a4b80(0x1cc)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1cfc0c=getKPIs('basecoin'),_0x423e77=getKPIs(_0x2a4b80(0x15e),config[_0x2a4b80(0x15e)]),_0x47e55b=getKPIs(_0x2a4b80(0x1ea)),_0xb11481=getKPIs(_0x2a4b80(0x1b6),config['fiat']);_0x3fb346+=_0x2a4b80(0xd2),_0x3fb346+=_0x1cfc0c[_0x2a4b80(0x137)]+_0x2a4b80(0x1ee)+_0x1cfc0c[_0x2a4b80(0x1ef)]+'\x0a',_0x3fb346+=_0x1cfc0c['rightTxt']+':\x20'+_0x1cfc0c[_0x2a4b80(0x10e)]+'%\x0a',_0x3fb346+=_0x423e77[_0x2a4b80(0x137)]+'\x20:\x20'+_0x423e77[_0x2a4b80(0x1ef)]+'\x0a',_0x3fb346+=_0x423e77[_0x2a4b80(0x208)]+':\x20'+_0x423e77['change']+'%\x0a',_0x3fb346+=_0x47e55b['leftTxt']+':\x20'+_0x47e55b['value']+'\x20('+config[_0x2a4b80(0x189)]+')\x0a',_0x3fb346+=_0x47e55b[_0x2a4b80(0x208)]+':\x20'+_0x47e55b[_0x2a4b80(0x10e)]+_0x2a4b80(0xce)+config[_0x2a4b80(0x189)]+')\x0a',_0x3fb346+=_0xb11481['leftTxt']+':\x20'+_0xb11481[_0x2a4b80(0x1ef)]+'\x20('+config[_0x2a4b80(0x15e)]+')\x0a',_0x3fb346+=_0xb11481[_0x2a4b80(0x208)]+':\x20'+_0xb11481[_0x2a4b80(0x10e)]+'%\x20('+config[_0x2a4b80(0x15e)]+')\x0a',_0x3fb346+=_0x2a4b80(0x142),process['send']({'telegrammsg':_0x3fb346},_0x1ebb1b=>{});}async function sendPortfolioTelegram(){const _0x5040b6=_0x241ad2;if(!coinsLoaded){process[_0x5040b6(0x146)]({'telegrammsg':_0x5040b6(0x118)},_0x419893=>{});return;}let _0x2595f0='';if(config[_0x5040b6(0xc0)])_0x2595f0='<b>'+config[_0x5040b6(0x11f)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x2595f0=_0x5040b6(0x1cc)+botID+_0x5040b6(0x1cf);_0x2595f0+='<pre>',_0x2595f0+=_0x5040b6(0x1e3),_0x2595f0+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x2595f0+='-------------------------------\x0a',currentCoins['forEach'](_0x4ffde9=>{const _0x592b30=_0x5040b6;_0x2595f0+=_0x4ffde9['coin'][_0x592b30(0x20a)](0x7)+'|\x20'+formatPad(_0x4ffde9[_0x592b30(0x154)],0x2,0x6)+'|\x20'+formatPad(_0x4ffde9[_0x592b30(0x20c)],0x2,0x6)+'|\x20'+formatPad(_0x4ffde9[_0x592b30(0x211)]*0x64,0x2,0x6)+'\x0a';}),_0x2595f0+=_0x5040b6(0x142),process[_0x5040b6(0x146)]({'telegrammsg':_0x2595f0},_0x3d8d8c=>{});}function formatPad(_0x4ce9d7,_0x1bab1f,_0x434984){const _0x5403f7=_0x241ad2,_0x49b2c2=formatResultString(_0x4ce9d7,_0x1bab1f);return _0x49b2c2?_0x49b2c2[_0x5403f7(0x1aa)](_0x434984):''[_0x5403f7(0x1aa)](_0x434984);}function logHistory(_0x229ea8,_0x3b0b23,_0x3f570c=''){const _0x14b541=_0x241ad2;logger[_0x14b541(0x1df)](''+_0x3b0b23);let _0x195bf3={'time':getTimeStamp(),'type':_0x229ea8,'event':_0x3b0b23};dbLogs['get'](_0x14b541(0x22c))[_0x14b541(0x1a5)](_0x195bf3)[_0x14b541(0x21b)]();if(_0x3f570c=='')_0x3f570c=_0x3b0b23;proxyEmit(_0x14b541(0xe0),{'log':_0x195bf3,'summary':_0x3f570c}),process['send']({'telegram':{..._0x195bf3,'botname':config[_0x14b541(0x11f)],'showname':config[_0x14b541(0xc0)]}},_0x747d19=>{});}function emitHistory(_0x38cffd={}){const _0x5c161a=_0x241ad2;Object['keys'](_0x38cffd)['length']==0x0&&(_0x38cffd={'type':[_0x5c161a(0x152),'event'],'event':'','page':0x1});if(_0x38cffd[_0x5c161a(0x162)]['includes'](_0x5c161a(0xe0)))_0x38cffd[_0x5c161a(0x162)][_0x5c161a(0xe3)](_0x38cffd['type']['indexOf'](_0x5c161a(0xe0)),0x1,'error','warning',_0x5c161a(0xfc));if(dbLogs[_0x5c161a(0x184)](_0x5c161a(0x22c))['value']()){let _0x1e4008=dbLogs['get'](_0x5c161a(0x22c))[_0x5c161a(0x1b7)](_0xf00d22=>{const _0x17f357=_0x5c161a;if(_0x38cffd['type'][_0x17f357(0x1a6)]==0x0)return![];else return _0x38cffd[_0x17f357(0x162)][_0x17f357(0x225)](_0xf00d22['type']);})['filter'](_0x5c4262=>{const _0x5335b9=_0x5c161a;if(_0x38cffd[_0x5335b9(0xe0)]=='')return!![];else return _0x5c4262['event']['toLowerCase']()[_0x5335b9(0x225)](_0x38cffd[_0x5335b9(0xe0)]['toLowerCase']());})[_0x5c161a(0x1b0)](_0x5c161a(0x1da)),_0x2ca4d5=_0x1e4008[_0x5c161a(0x1ef)]()[_0x5c161a(0x1a6)];_0x1e4008=_0x1e4008[_0x5c161a(0x19a)]()[_0x5c161a(0xf9)]((_0x38cffd[_0x5c161a(0x111)]-0x1)*logPageSize,_0x38cffd['page']*logPageSize-0x1)[_0x5c161a(0x19a)]()[_0x5c161a(0x1ef)](),proxyEmit('event-history',{'logs':_0x1e4008,'total':_0x2ca4d5});}else proxyEmit(_0x5c161a(0x159),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x7a993d){const _0x50237a=_0x241ad2;if(dbLogs[_0x50237a(0x184)](_0x50237a(0x22c))[_0x50237a(0x1ef)]()){const _0x28a23f=dbLogs[_0x50237a(0xb0)]('logs')['sortBy']('time')[_0x50237a(0x1b7)](_0x8a8f4e=>{const _0x53a36b=_0x50237a;return _0x8a8f4e[_0x53a36b(0x162)]==_0x53a36b(0x152);})['value']();dbLogs[_0x50237a(0xb0)](_0x50237a(0x22c))[_0x50237a(0x11b)]()[_0x50237a(0x21b)](),dbLogs[_0x50237a(0xb0)](_0x50237a(0x22c))[_0x50237a(0x216)](_0x28a23f)[_0x50237a(0x21b)](),emitHistory(_0x7a993d);}}async function pauseBot(_0x4693ed=pauseBotInterval){const _0x4de6f8=_0x241ad2,_0x5dc192=new Date()[_0x4de6f8(0x167)]();if(!lastErrorShown||_0x5dc192-lastErrorShown>=_0x4693ed){lastErrorShown=_0x5dc192;!lastBotPause?(lastBotPause=_0x5dc192,consecutivePauses=0x1):(_0x5dc192-lastBotPause-_0x4693ed<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x4de6f8(0x146)]({'stop':'restart'},_0x5767fc=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x4de6f8(0x167)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x4693ed),botPaused=![],reset(!![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x3299ec=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1a4b08,_0x27630c){const _0x38583a=_0x241ad2;if(botPaused)return;const _0x2ee7c2=config[_0x38583a(0xe8)]||'Exchange';if(_0x27630c)logger['debug']('Exception\x20thrown\x20in\x20'+_0x27630c);const _0x2e5c18=()=>{const _0x34f3b1=_0x38583a;loading[_0x34f3b1(0x19c)]=!![],emitLoadingProgress();};if(_0x1a4b08[_0x38583a(0x17f)]()[_0x38583a(0x225)]('API-key\x20format\x20invalid'))logHistory(_0x38583a(0x19c),_0x2ee7c2+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x2e5c18();else{if(_0x1a4b08[_0x38583a(0x17f)]()[_0x38583a(0x225)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x38583a(0x19c),_0x2ee7c2+_0x38583a(0x156)),_0x2e5c18();else _0x1a4b08[_0x38583a(0x17f)]()[_0x38583a(0x225)]('AuthenticationError')?(logHistory(_0x38583a(0x19c),_0x2ee7c2+_0x38583a(0x1db)),logHistory(_0x38583a(0x19c),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x2e5c18()):await handleError(_0x1a4b08,null);}}async function handleError(_0xda80f8,_0x3e956f,_0x292d73=''){const _0x365a5e=_0x241ad2;if(botPaused)return;const _0x1ed7e6=config[_0x365a5e(0xe8)]||_0x365a5e(0x12e);if(_0x3e956f)logger[_0x365a5e(0x1af)](_0x365a5e(0x1ac)+_0x3e956f);if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)]('DDoSProtection'))logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0x169)+pauseBotMsg),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0xb9)))logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0x20d)+pauseBotMsg),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x175))||_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x127)))logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0x139)+pauseBotMsg),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)]('RequestTimeout'))logHistory(_0x365a5e(0x19c),_0x1ed7e6+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x101)))logHistory('error',_0x1ed7e6+_0x365a5e(0xcf)+pauseBotMsg),await pauseBot();else{if(_0xda80f8['toString']()['toLowerCase']()['includes'](_0x365a5e(0xc1))||_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0xed)]()[_0x365a5e(0x225)](_0x365a5e(0xd4)))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20https://hodlerhacks.com/fixing-common-problems/'+pauseBotMsg),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8[_0x365a5e(0x17f)]()),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)]('InvalidNonce'))logHistory('error',_0x1ed7e6+_0x365a5e(0x226)+pauseBotMsg),logger['debug'](_0x365a5e(0x19e),_0xda80f8),await pauseBot();else{if(_0xda80f8 instanceof ccxt[_0x365a5e(0x161)])logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0xd3)+pauseBotMsg),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8),await pauseBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0xd5)))logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0xf8)),logHistory(_0x365a5e(0x19c),_0x365a5e(0x18e)),await killBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x210)))logHistory(_0x365a5e(0x19c),_0x1ed7e6+_0x365a5e(0x120)),logHistory(_0x365a5e(0x19c),_0x365a5e(0x18e)),await killBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()['includes']('AuthenticationError'))logHistory('error',_0x1ed7e6+_0x365a5e(0x1fb)),logHistory(_0x365a5e(0x19c),_0x365a5e(0x18e)),await killBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x16c)))logHistory(_0x365a5e(0x19c),_0x1ed7e6+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x365a5e(0x19c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xda80f8[_0x365a5e(0x17f)]()[_0x365a5e(0x225)](_0x365a5e(0x151)))logHistory(_0x365a5e(0x19c),_0x365a5e(0xf3)+_0x292d73);else _0xda80f8 instanceof ccxt[_0x365a5e(0x1a8)]?(logHistory('error',_0x1ed7e6+'\x20exchange\x20error'),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8)):(logHistory(_0x365a5e(0x19c),'Unknown\x20error\x20occured'+pauseBotMsg),logger[_0x365a5e(0x1af)](_0x365a5e(0x19e),_0xda80f8),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x1800c8,_0x1ad385){const _0xd5f087=_0x241ad2;return parseFloat(_0x1800c8[_0xd5f087(0x1d9)](_0x1ad385));}function formatResultTruncate(_0x5d235c,_0x3266dc){const _0x5ec037=_0x241ad2;let _0x3f97ad=formatResultString(_0x5d235c,0xa),_0x353f70=_0x3f97ad['indexOf']('.');return _0x353f70!=-0x1&&(_0x3f97ad=_0x3f97ad[_0x5ec037(0xf9)](0x0,_0x353f70+_0x3266dc+0x1)),Number(_0x3f97ad);}function formatResultString(_0xdddab8,_0x5cb138){const _0x1aa9b0=_0x241ad2;let _0x3c0c24;if(!(''+_0xdddab8)[_0x1aa9b0(0x225)]('e'))_0x3c0c24=+(Math[_0x1aa9b0(0x16d)](_0xdddab8+'e+'+_0x5cb138)+'e-'+_0x5cb138);else{let _0x459179=(''+_0xdddab8)[_0x1aa9b0(0x129)]('e'),_0x788c4='';+_0x459179[0x1]+_0x5cb138>0x0&&(_0x788c4='+'),_0x3c0c24=+(Math['round'](+_0x459179[0x0]+'e'+_0x788c4+(+_0x459179[0x1]+_0x5cb138))+'e-'+_0x5cb138);}return Number(_0x3c0c24)[_0x1aa9b0(0x1d9)](_0x5cb138);}function getServerTime(){const _0xf46f68=_0x241ad2,_0x3d0cb2=new Date();return _0x3d0cb2[_0xf46f68(0x1bf)]()+'/'+(_0x3d0cb2[_0xf46f68(0xdb)]()+0x1)[_0xf46f68(0x17f)]()['padStart'](0x2,'0')+'/'+_0x3d0cb2[_0xf46f68(0x1cd)]()['toString']()[_0xf46f68(0x1aa)](0x2,'0')+'\x20'+_0x3d0cb2[_0xf46f68(0x153)]()[_0xf46f68(0x17f)]()['padStart'](0x2,'0')+':'+_0x3d0cb2[_0xf46f68(0x204)]()[_0xf46f68(0x17f)]()[_0xf46f68(0x1aa)](0x2,'0')+':'+_0x3d0cb2['getSeconds']()[_0xf46f68(0x17f)]()[_0xf46f68(0x1aa)](0x2,'0');}function getTimeStamp(){const _0x1798e0=_0x241ad2,_0x44a51e=shiftedTime();return _0x44a51e['getFullYear']()+'/'+(_0x44a51e[_0x1798e0(0xdb)]()+0x1)[_0x1798e0(0x17f)]()['padStart'](0x2,'0')+'/'+_0x44a51e['getDate']()['toString']()[_0x1798e0(0x1aa)](0x2,'0')+'\x20'+_0x44a51e['getHours']()[_0x1798e0(0x17f)]()[_0x1798e0(0x1aa)](0x2,'0')+':'+_0x44a51e[_0x1798e0(0x204)]()[_0x1798e0(0x17f)]()[_0x1798e0(0x1aa)](0x2,'0')+':'+_0x44a51e['getSeconds']()[_0x1798e0(0x17f)]()[_0x1798e0(0x1aa)](0x2,'0');}function getDate(){const _0x25da71=_0x241ad2,_0x54a82f=shiftedTime();return _0x54a82f[_0x25da71(0x1bf)]()+'/'+(_0x54a82f[_0x25da71(0xdb)]()+0x1)[_0x25da71(0x17f)]()[_0x25da71(0x1aa)](0x2,'0')+'/'+_0x54a82f[_0x25da71(0x1cd)]()[_0x25da71(0x17f)]()['padStart'](0x2,'0');}function getHour(){const _0x1e1e53=_0x241ad2,_0x4528ac=shiftedTime();return _0x4528ac[_0x1e1e53(0x153)]()[_0x1e1e53(0x17f)]()[_0x1e1e53(0x1aa)](0x2,'0');}function sleep(_0x14277e){return new Promise(_0x12f77d=>setTimeout(_0x12f77d,_0x14277e));}function shiftedTime(){const _0x3c9a7f=_0x241ad2,_0x45aec0=new Date();let _0x4b4119=_0x45aec0;if(config&&config[_0x3c9a7f(0xe2)]!==0x0)_0x4b4119=fns[_0x3c9a7f(0x11c)](_0x45aec0,{'hours':config[_0x3c9a7f(0xe2)]});return _0x4b4119;}function timer(_0x4830f6){const _0x4979fd=_0x241ad2,_0x493c0d=new Date();!lasttime?console[_0x4979fd(0x173)](getTimeStamp()+_0x4979fd(0xe7),_0x4830f6,_0x493c0d):console[_0x4979fd(0x173)](getTimeStamp()+':\x20timer\x20>',_0x4830f6,(_0x493c0d-lasttime)/0x3e8),lasttime=_0x493c0d;}