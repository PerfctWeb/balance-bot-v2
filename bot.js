const _0x52254e=_0x12be;(function(_0x5d7b75,_0x220037){const _0x545e4c=_0x12be,_0x2f6470=_0x5d7b75();while(!![]){try{const _0x3b30c6=-parseInt(_0x545e4c(0x161))/0x1+-parseInt(_0x545e4c(0x1d1))/0x2+parseInt(_0x545e4c(0x1dc))/0x3*(-parseInt(_0x545e4c(0x11a))/0x4)+parseInt(_0x545e4c(0x211))/0x5*(-parseInt(_0x545e4c(0x10b))/0x6)+parseInt(_0x545e4c(0x232))/0x7+-parseInt(_0x545e4c(0x263))/0x8+parseInt(_0x545e4c(0x19d))/0x9;if(_0x3b30c6===_0x220037)break;else _0x2f6470['push'](_0x2f6470['shift']());}catch(_0x6fdffa){_0x2f6470['push'](_0x2f6470['shift']());}}}(_0x4b87,0xa29f0));const _0x5d7151=function(){let _0x12f448=!![];return function(_0x2e6cb5,_0x3c7de1){const _0x47c25f=_0x12f448?function(){const _0x407efc=_0x12be;if(_0x3c7de1){const _0x3ecff3=_0x3c7de1[_0x407efc(0x181)](_0x2e6cb5,arguments);return _0x3c7de1=null,_0x3ecff3;}}:function(){};return _0x12f448=![],_0x47c25f;};}(),_0x143fa7=_0x5d7151(this,function(){const _0x42e2f5=_0x12be;return _0x143fa7[_0x42e2f5(0x128)]()[_0x42e2f5(0x265)](_0x42e2f5(0x264))['toString']()['constructor'](_0x143fa7)[_0x42e2f5(0x265)](_0x42e2f5(0x264));});_0x143fa7();'use strict';const ccxt=require(_0x52254e(0x25e))['pro'],low=require(_0x52254e(0x22c)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x52254e(0x1c6)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require(_0x52254e(0x10e)),argv=require(_0x52254e(0x23e))(process[_0x52254e(0x19f)][_0x52254e(0x284)](0x2))['argv'],path=require(_0x52254e(0x158));let exchange;global['ticker']={},global['change']={};const usdBasecoins=[_0x52254e(0x237),_0x52254e(0x1a8),_0x52254e(0x1db),_0x52254e(0x1ce),_0x52254e(0x1c9),_0x52254e(0x1a1)],exceptions={'binance':['DAI/',_0x52254e(0x252),_0x52254e(0x166),_0x52254e(0x168),_0x52254e(0x1ea)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x52254e(0x1b8)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x52254e(0x16d)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x52254e(0x178))[_0x52254e(0x23d)],botID=process[_0x52254e(0x19f)][0x2]||_0x52254e(0x16f),pattern=/^[0-9]{3}$/;!pattern[_0x52254e(0x1e2)](botID)&&(console[_0x52254e(0x202)](_0x52254e(0x14a)+botID+_0x52254e(0x114)),killBot());const userID=process[_0x52254e(0x19f)][0x3]||'',configpath=userID?_0x52254e(0x1b6)+userID+'/':_0x52254e(0x1b6),logspath=userID?_0x52254e(0x17d)+userID+'/':_0x52254e(0x17d),loggerfile=fs[_0x52254e(0x198)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x52254e(0x1b1)](configpath)&&fs[_0x52254e(0x1f0)](configpath);!fs[_0x52254e(0x1b1)](logspath)&&fs[_0x52254e(0x1f0)](logspath);const configfile=configpath+_0x52254e(0x204)+botID+_0x52254e(0x1c8),logfile=configpath+_0x52254e(0x204)+botID+_0x52254e(0x19e),performancefile=configpath+_0x52254e(0x204)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x52254e(0x1f3),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x52254e(0x1d0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x52254e(0x254)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x52254e(0x254)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x52254e(0x193)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x52254e(0x1ef),'rsaStandard':_0x52254e(0x154)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x26fb2a=>{const _0x28dd5f=_0x52254e;console[_0x28dd5f(0x202)](_0x26fb2a);},'simple':_0x24b85f=>{const _0x5e741a=_0x52254e;console['log'](_0x24b85f),loggerfile[_0x5e741a(0x254)](util[_0x5e741a(0x22f)](_0x24b85f)+'\x0a');},'full':async(_0x3d9e54,_0x251fa5='')=>{const _0x3c5be1=_0x52254e;let _0x4b11c1;if(config[_0x3c5be1(0x22b)])_0x4b11c1=getTimeStamp()+':\x20'+config[_0x3c5be1(0x1c5)]+_0x3c5be1(0x26a)+_0x3d9e54;else _0x4b11c1=getTimeStamp()+_0x3c5be1(0x186)+botID+_0x3c5be1(0x26a)+_0x3d9e54;console[_0x3c5be1(0x202)](_0x4b11c1),loggerfile[_0x3c5be1(0x254)](util[_0x3c5be1(0x22f)](_0x4b11c1)+'\x0a'),_0x251fa5&&(console[_0x3c5be1(0x202)](_0x251fa5),loggerfile[_0x3c5be1(0x254)](util[_0x3c5be1(0x22f)](_0x251fa5)+'\x0a'));},'debug':async(_0x5c2074,_0x576213='')=>{const _0x287ef6=_0x52254e;let _0x48040a;if(config[_0x287ef6(0x22b)])_0x48040a=getTimeStamp()+':\x20'+config[_0x287ef6(0x1c5)]+'\x20>\x20[DEBUG]\x20'+_0x5c2074;else _0x48040a=getTimeStamp()+_0x287ef6(0x186)+botID+'\x20>\x20[DEBUG]\x20'+_0x5c2074;if(debugging)console[_0x287ef6(0x202)](_0x48040a);loggerfile[_0x287ef6(0x254)](util[_0x287ef6(0x22f)](_0x48040a)+'\x0a');if(_0x576213){if(debugging)console[_0x287ef6(0x202)](_0x576213);loggerfile[_0x287ef6(0x254)](util[_0x287ef6(0x22f)](_0x576213)+'\x0a');}}};process['on'](_0x52254e(0x1f2),function(_0x2668fa){const _0xbd0633=_0x52254e;logger[_0xbd0633(0x1e8)](_0xbd0633(0x159),_0x2668fa);});settings['timeshift']!=config[_0x52254e(0x183)]&&updateTimeshift(settings[_0x52254e(0x183)]);settings[_0x52254e(0x266)]!=config[_0x52254e(0x266)]&&updateOnepagemode(settings[_0x52254e(0x266)]);function _0x4b87(){const _0x28915e=['rightTxt','warning','1\x20-\x20Validate\x20orders:\x20','red_yellow_blue','fromCodePoint','balances','bot','toggleBotMode','portfolio','success','sell','Reset\x20|\x20','3252282TGJsZy','\x20|\x20highest:\x20','replace','util','buys','has','\x20minutes\x20-\x20','datetime','trade',',\x20must\x20be\x20a\x203\x20digit\x20number','Initiating\x20exchange\x20reload','shift','Unfilled\x20order(s)\x20canceled\x20after\x20','<pre>','net-basecoin','6524RMUyqH','cancelOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ticker','.json','***','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','placeOrder()','side','ongoing',':\x20timer\x20>','\x20not\x20responding','abs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','toString','\x20-\x20bot\x20not\x20started','eur','no\x20open\x20orders','limit-low','findIndex','removed','1\x20-\x20Unlock\x20orders','bots','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','password','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','cooldown','\x20metrics:</b>\x20\x0a\x0a','added','cancel','getFullYear','exchanges','API-key\x20format\x20invalid','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','none','Portfolio\x20change\x20detected:\x20','change24h','random','filter','getPortfolio','fetchTickers','liquidity','%\x20(','sortBy','ordertype','breakeven','canceled','ExchangeNotAvailable','Error:\x20Invalid\x20argument\x20','Bot\x20','floor','getMinutes','amount','offset','padEnd','getPortfolio(2)','event','excluded','RSA-OAEP','must\x20be\x20greater\x20than\x20minimum\x20amount','initclient','BTC','path','Uncaught\x20Exception:','fetchOpenOrders','price','coin-loading-progress','limit-high','net-fiat','function','RequestTimeout','384165ESZXtn','currency','ID:\x20','substring','spot','XEM/BUSD','2\x20-\x20FILLED\x20unknown\x20order:\x20','NANO/','parse','netoffset','configuration-stored','order','UNLOCKED','cloneDeep','001','entries','Resetting\x20bot\x20history','fetchClosedOrders','startdate','Executing\x20exchange\x20reload','\x20:\x20','getStartingBalances','Unknown\x20error\x20occured','./version.json','getOpenOrders()','last','getCoinNumber()','distribution','./logs/','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Cooldown\x20ended\x20-\x20balancing\x20resumed','bid','apply','\x20portfolio:</b>\x20\x0a\x0a','timeshift','logs','DDoSProtection',':\x20Bot\x20','coins','************','max','exchange\x20not\x20reloaded','send','orderId','toUpperCase','configuration','leftTxt','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','includes','open','defaults','getDate','BNB','Bybit','fiat','createWriteStream','\x20has\x20a\x2024h\x20drop\x20of\x20','loadSymbols()','highest','enabled','32906970YpzINz','-events.json','argv','\x20|\x20Exchange:\x20','USDP','InvalidNonce','running','realized','symbols','2.3.5','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','BUSD','Failed\x20to\x20load\x20coin\x20data\x20for\x20','event-history','getHours','buy','recovery','resetHistory','0\x20-\x20EXECUTION:\x20','BNB/','existsSync','Binance','value','reverse','recent20','./config/','set','freeze','Transaction\x20detection\x20blocked','exec','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','type','min','full','parseISO','indexOf','starting-balance-','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20|\x20Custom\x20ID:\x20','startsWith','botname','date-fns','Net\x20effect','-config.json','USDC','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','sells','loadMarkets','getCoins()','USDT','emitHistory','/backup/','2222564SuAXCU','data','watchOrders','decrypt','2\x20-\x20Validate\x20orders:\x20','remove','-performance.json','startprice','milliseconds','yyyy/MM/dd','TUSD','1311mEesnP','keys','InvalidOrder','performance','emojibuy','coin','test','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Fee\x20discount\x20refund\x20detected:\x20','settings','get','time','debug','percentage','YOYOW/','number','watchTransactions','symbol','Order\x20is\x20invalid:\x20','sha256','mkdirSync','page','uncaughtException','-results.json','InsufficientFunds','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','change','cancelOrders()','privateKey','\x20|\x20','Pausing\x20for\x20','apiSecret','\x20closed\x20the\x20connection','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','autoliquidity','round','remainingSymbols','\x20change','log','target','bot-','forEach','2\x20-\x20Orders\x20unlocked','MIN_NOTIONAL','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','unlinkSync','message','No\x20more\x20open\x20orders\x20-\x20','1\x20-\x20Handle\x20open\x20orders','filled','Net\x20','balancing\x20resumed','exchange','5kbCmIe','date','limit','valid','isEqual','openOrders','storeFiat','market','\x20value','final','sendPortfolioTelegram','fees','Exchange','ORDERS.UNLOCKED','split','fee','getTime','fetchTicker','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sendMetricsTelegram','ORDERS.UNLOCKING','<b>','\x20exchange','stringify','no\x20additional\x20symbols','orderstatus','showname','lowdb','balancing\x20resumes\x20when\x20cooldown\x20ends','/EUR','format','initial','changes','7185248DMSQey','createOrder','recreateCoinResults()','apiKey','showConfig','USD','storeConfiguration','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','usd','padStart','args','version','yargs/yargs','join','limits','loading-canceled','average','recreate','writeFile','toFixed','fetchBalance','AuthenticationError','Limit\x20(low-margin)','cancelLoading','timestamp','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','EUR','colorscheme','getPortfolio(1)','restart','assign','length','HOT/BTC','ETH','write','Invalid\x20API\x20key\x20or\x20secret\x20entered','status','total','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','error','apiPassword','string','splice','headless','ccxt','cost','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','getPortfolio(0)','customId','10131656owfIcc','(((.+)+)+)+$','search','onepagemode','</pre>','\x20API\x20secret\x20is\x20invalid','Fees\x20|\x20currency:\x20','\x20>\x20','delta','Executed\x20','exchange\x20reloaded','botID','find','UNLOCKING','amountToPrecision','emojisell','basecoin','threshold','progress','toLowerCase','push','watchTrades','map','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','sort','timeout','closed','getMonth','Transaction\x20detection\x20unblocked','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','<b>Bot\x20','getSeconds','differenceInSeconds','slice','/USD','LOCKED'];_0x4b87=function(){return _0x28915e;};return _0x4b87();}process[_0x52254e(0x18b)]({'started':'running'},_0x41543e=>{}),initializeProcessListeners();function proxyEmit(_0x36aeae,_0x386a2f=null){const _0x5f5ae0=_0x52254e;process[_0x5f5ae0(0x18b)]({'function':_0x36aeae,'args':_0x386a2f},_0x50cf9e=>{});}function initializeProcessListeners(){const _0x420444=_0x52254e;process['on'](_0x420444(0x20a),_0xe29ec5=>{const _0x3d4634=_0x420444;switch(Object['keys'](_0xe29ec5)[0x0]){case _0x3d4634(0x183):_0xe29ec5['timeshift']!=undefined&&(settings[_0x3d4634(0x183)]=_0xe29ec5[_0x3d4634(0x183)],updateTimeshift(settings[_0x3d4634(0x183)]));break;case _0x3d4634(0x266):_0xe29ec5['onepagemode']!=undefined&&(settings[_0x3d4634(0x266)]=_0xe29ec5[_0x3d4634(0x266)],updateOnepagemode(settings['onepagemode']));break;case _0x3d4634(0x130):_0xe29ec5[_0x3d4634(0x130)]!=undefined&&(bots=JSON[_0x3d4634(0x169)](_0xe29ec5[_0x3d4634(0x130)]),proxyEmit(_0x3d4634(0x130),bots));break;case _0x3d4634(0x15f):switch(_0xe29ec5[_0x3d4634(0x15f)]){case _0x3d4634(0x156):initclient();break;case _0x3d4634(0x106):toggleBotMode();break;case _0x3d4634(0x1cf):emitHistory(_0xe29ec5['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0xe29ec5[_0x3d4634(0x23c)]);break;case _0x3d4634(0x141):getPortfolio(_0xe29ec5['args']);break;case _0x3d4634(0x238):storeConfiguration(_0xe29ec5['args']);break;case'storeHeadless':storeHeadless(_0xe29ec5[_0x3d4634(0x23c)]);break;case _0x3d4634(0x217):storeFiat(_0xe29ec5[_0x3d4634(0x23c)]);break;case _0x3d4634(0x1ae):resetHistory();break;case _0x3d4634(0x176):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xe29ec5[_0x3d4634(0x23c)]);break;case _0x3d4634(0x249):cancelLoading();break;case _0x3d4634(0x236):showConfig();break;case _0x3d4634(0x224):sendMetricsTelegram();break;case _0x3d4634(0x21b):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x5c60e8=null,_0x31fd0d=![]){const _0xf045eb=_0x52254e;logger[_0xf045eb(0x1e8)](_0xf045eb(0x10a)+(_0x5c60e8&&_0x5c60e8[_0xf045eb(0x251)]>0x0?'additional\x20symbols\x20'+_0x5c60e8['join'](','):_0xf045eb(0x229))+_0xf045eb(0x1f9)+(_0x31fd0d?_0xf045eb(0x26d):_0xf045eb(0x18a))+_0xf045eb(0x1a0)+config[_0xf045eb(0x210)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x31fd0d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xf045eb(0x235)]!=''&&config[_0xf045eb(0x235)]!=_0xf045eb(0x11f)){if(_0x31fd0d){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3bf815){handleErrorNoStop(_0x3bf815,_0xf045eb(0x19a));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x5c60e8);const _0x103cbb=await getCoins();[currentCoins,currentCoinsAll]=_0x103cbb,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0xf045eb(0x251)]==0x0&&allOpenOrders[_0xf045eb(0x251)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x41ede5=_0x52254e;logger[_0x41ede5(0x1e8)](_0x41ede5(0x115));while(lockOrders!=ORDERS[_0x41ede5(0x16d)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x41ede5(0x1e8)](_0x41ede5(0x174)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x472fb3=config[_0x52254e(0x210)],_0x24070a=config[_0x52254e(0x235)],_0x237625=config['apiSecret'],_0x4847ac=config[_0x52254e(0x25a)]){const _0x332bb2=_0x52254e;exchange&&await stopExchange();!supportedExchanges()[_0x332bb2(0x191)](_0x472fb3)&&(logHistory('error',_0x332bb2(0x1ca)+_0x472fb3+_0x332bb2(0x227)),killBot());const _0x3f69cb=ccxt[_0x472fb3['toLowerCase']()];exchange=new _0x3f69cb({'apiKey':_0x24070a,'secret':_0x237625,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x472fb3==_0x332bb2(0x196)&&(exchange['options']={'defaultType':'spot','adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x4847ac)exchange[_0x332bb2(0x132)]=_0x4847ac;}function setStableCoins(){const _0xcc034c=_0x52254e;let _0x21d1d2=config[_0xcc034c(0x273)]=='ETH'?_0xcc034c(0x253):_0xcc034c(0x157),_0x746dd2=!allSymbols[_0xcc034c(0x191)](_0x21d1d2+_0xcc034c(0x285))?_0xcc034c(0x1ce):_0xcc034c(0x237),_0x43d9b0=!allSymbols[_0xcc034c(0x191)](_0x21d1d2+_0xcc034c(0x22e))?_0x746dd2:'EUR';stablecoins={'eur':{'coin':''+_0x21d1d2+_0x43d9b0,'symbol':_0x21d1d2+'/'+_0x43d9b0},'usd':{'coin':''+_0x21d1d2+_0x746dd2,'symbol':_0x21d1d2+'/'+_0x746dd2}};}async function initwsCcxt(_0x85c963){const _0x2731f1=_0x52254e;_0x85c963==null&&(_0x85c963=[],config[_0x2731f1(0x107)][_0x2731f1(0x205)](_0x19eed=>{const _0x244c20=_0x2731f1;if(!_0x19eed[_0x244c20(0x153)]&&_0x19eed[_0x244c20(0x1e1)]!=config[_0x244c20(0x273)])_0x85c963[_0x244c20(0x277)](_0x19eed[_0x244c20(0x1ed)]);}));if(!_0x85c963[_0x2731f1(0x191)](stablecoins['eur'][_0x2731f1(0x1ed)]))_0x85c963[_0x2731f1(0x277)](stablecoins['eur'][_0x2731f1(0x1ed)]);if(!_0x85c963['includes'](stablecoins[_0x2731f1(0x23a)][_0x2731f1(0x1ed)]))_0x85c963[_0x2731f1(0x277)](stablecoins[_0x2731f1(0x23a)]['symbol']);if(config['exchange'][_0x2731f1(0x1c4)](_0x2731f1(0x1b2))){if(!_0x85c963[_0x2731f1(0x191)](_0x2731f1(0x1b0)+config[_0x2731f1(0x273)]))_0x85c963[_0x2731f1(0x277)](_0x2731f1(0x1b0)+config['basecoin']);}loadCoins(_0x85c963);const _0x4a2e8b=async _0x1589b0=>{const _0x19439b=_0x2731f1,_0x36bfea=await exchange[_0x19439b(0x222)](_0x1589b0);global[_0x19439b(0x11d)][noslash(_0x36bfea[_0x19439b(0x1ed)])]=_0x36bfea['last'];while(!![]){if(!botPaused)try{const _0x3383bc=await exchange[_0x19439b(0x278)](_0x1589b0);global[_0x19439b(0x11d)][noslash(_0x3383bc[0x0]['symbol'])]=_0x3383bc[0x0]['price'],await sleep(0x3e8);}catch(_0x2b6411){if(!exchangeStopped)await handleError(_0x2b6411,_0x19439b(0x278),_0x1589b0);}else await sleep(0x64);}},_0x2fbb99=async _0x20e84d=>{const _0x39d07b=_0x2731f1;while(!![]){if(!botPaused)try{const _0x3ee3ad=await exchange[_0x39d07b(0x222)](_0x20e84d);global['change'][_0x3ee3ad[_0x39d07b(0x1ed)]]=_0x3ee3ad[_0x39d07b(0x1e9)],await sleep(0x3c*0x3e8);}catch(_0xbf7a0a){if(!exchangeStopped)await handleError(_0xbf7a0a,_0x39d07b(0x142),_0x20e84d);}else await sleep(0x64);}},_0x18236a=async()=>{const _0x2ab44b=_0x2731f1;while(!![]){if(!botPaused)try{const _0x367a4f=await exchange['watchOrders']();_0x367a4f[_0x2ab44b(0x205)](_0x3724a0=>{updateNumberCoinsCcxt(_0x3724a0);});}catch(_0x116910){if(!exchangeStopped)await handleError(_0x116910,_0x2ab44b(0x1d3));}else await sleep(0x64);}};_0x85c963[_0x2731f1(0x205)](_0x875772=>{_0x4a2e8b(_0x875772),_0x2fbb99(_0x875772);}),!wsEventsSet&&(wsEventsSet=!![],_0x18236a(),watchTransactions());}async function watchTransactions(){const _0x23fb27=_0x52254e;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x51466d=await getCoins(),[_0x2ec12a,_0x2cad36]=_0x51466d;let _0x450979=[];currentCoins[_0x23fb27(0x205)](_0x137469=>{const _0x14ab83=_0x23fb27,_0x12952f=_0x2ec12a[_0x14ab83(0x26f)](_0x562ae6=>_0x562ae6[_0x14ab83(0x1e1)]==_0x137469[_0x14ab83(0x1e1)]);_0x12952f&&(_0x137469[_0x14ab83(0x1eb)]!=_0x12952f[_0x14ab83(0x1eb)]&&_0x450979[_0x14ab83(0x277)]({'coin':_0x137469[_0x14ab83(0x1e1)],'symbol':_0x137469[_0x14ab83(0x1ed)],'number':Number(formatResult(_0x12952f[_0x14ab83(0x1eb)]-_0x137469[_0x14ab83(0x1eb)],0x8))}));});if(_0x450979[_0x23fb27(0x251)]==0x1&&!blockTransactionDetection){if(config[_0x23fb27(0x1fe)]){logger[_0x23fb27(0x1e8)](_0x23fb27(0x269)+lastFees[_0x23fb27(0x162)]+_0x23fb27(0x10c)+lastFees[_0x23fb27(0x19b)]);if(!lastFees[_0x23fb27(0x162)]||_0x450979[0x0][_0x23fb27(0x1e1)]!=lastFees[_0x23fb27(0x162)]||_0x450979[0x0]['number']>lastFees['highest']){let _0x20b8b4;if(_0x450979[0x0][_0x23fb27(0x1e1)]!=config[_0x23fb27(0x273)]){let _0xc7b9da=global[_0x23fb27(0x11d)][noslash(_0x450979[0x0][_0x23fb27(0x1ed)])];_0x20b8b4=_0x450979[0x0][_0x23fb27(0x1b4)]?0x1/_0xc7b9da:_0xc7b9da;}else _0x20b8b4=0x1;_0x450979[0x0][_0x23fb27(0x15b)]=_0x20b8b4,delete _0x450979[0x0][_0x23fb27(0x1ed)];let _0x6bddc0=[],_0x101a50=[...config[_0x23fb27(0x143)]]||[],_0xc11c72=config[_0x23fb27(0x143)];_0x101a50[_0x23fb27(0x27b)]((_0x43b504,_0x4431b8)=>_0x43b504[_0x23fb27(0x212)]>_0x4431b8[_0x23fb27(0x212)]?-0x1:_0x4431b8['date']>_0x43b504[_0x23fb27(0x212)]?0x1:0x0);const _0xab5151=getDate();if(_0x101a50[0x0]){const _0x4eb306=fns[_0x23fb27(0x169)](_0x101a50[0x0][_0x23fb27(0x212)],_0x23fb27(0x1da),new Date()),_0x25db54=fns[_0x23fb27(0x169)](_0xab5151,_0x23fb27(0x1da),new Date());if(fns[_0x23fb27(0x215)](_0x4eb306,_0x25db54)){_0x6bddc0=_0x101a50[0x0][_0x23fb27(0x231)];const _0x504e6e=_0x6bddc0[_0x23fb27(0x26f)](_0x584bc9=>_0x584bc9[_0x23fb27(0x1e1)]==_0x450979[0x0][_0x23fb27(0x1e1)]);_0x504e6e?(_0x504e6e[_0x23fb27(0x1eb)]+=_0x450979[0x0][_0x23fb27(0x1eb)],_0x504e6e['number']==0x0&&(_0x6bddc0=_0x6bddc0[_0x23fb27(0x140)](_0x44d26c=>{const _0x4fd3f5=_0x23fb27;return _0x44d26c[_0x4fd3f5(0x1e1)]!=_0x450979[0x0][_0x4fd3f5(0x1e1)];}))):_0x6bddc0['push'](_0x450979[0x0]);const _0x17332e=_0xc11c72[_0x23fb27(0x26f)](_0x26fba9=>_0x26fba9[_0x23fb27(0x212)]==_0xab5151);_0x17332e[_0x23fb27(0x231)]=_0x6bddc0;}else _0xc11c72[_0x23fb27(0x277)]({'date':_0xab5151,'changes':[_0x450979[0x0]]});}const _0x2db27e=_0xc11c72['find'](_0x38f98d=>_0x38f98d[_0x23fb27(0x212)]==_0xab5151);if(_0x2db27e){let _0xf49c7d=!![];_0x2db27e[_0x23fb27(0x231)]['forEach'](_0x48dccd=>{const _0x2d3e7d=_0x23fb27;if(_0x48dccd[_0x2d3e7d(0x1eb)]!=0x0)_0xf49c7d=![];}),_0xf49c7d&&(_0xc11c72=_0xc11c72[_0x23fb27(0x140)](_0x44b917=>{return _0x44b917['date']!=_0xab5151;}));}let _0x4aa055=dbConfig[_0x23fb27(0x1e6)]('bot')[_0x23fb27(0x26f)]({'botID':botID})[_0x23fb27(0x1b3)]();_0x4aa055&&(dbConfig[_0x23fb27(0x1e6)]('bot')[_0x23fb27(0x26f)]({'botID':botID})[_0x23fb27(0x250)]({'liquidity':_0xc11c72})['write'](),config[_0x23fb27(0x143)]=_0xc11c72),logHistory(_0x23fb27(0x108),_0x23fb27(0x13d)+Math[_0x23fb27(0x126)](_0x450979[0x0][_0x23fb27(0x1eb)])+'\x20'+_0x450979[0x0][_0x23fb27(0x1e1)]+'\x20'+(_0x450979[0x0][_0x23fb27(0x1eb)]>0x0?'added':'removed')+_0x23fb27(0x1bb)),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x23fb27(0x1e4)+Math['abs'](_0x450979[0x0][_0x23fb27(0x1eb)])+'\x20'+_0x450979[0x0][_0x23fb27(0x1e1)]+'\x20'+(_0x450979[0x0][_0x23fb27(0x1eb)]>0x0?_0x23fb27(0x136):_0x23fb27(0x12e)));transactionDetected=!![],currentCoins=_0x2ec12a,currentCoinsAll=_0x2cad36;}else logger[_0x23fb27(0x1e8)](_0x23fb27(0x13d)+Math[_0x23fb27(0x126)](_0x450979[0x0]['number'])+'\x20'+_0x450979[0x0][_0x23fb27(0x1e1)]+'\x20'+(_0x450979[0x0]['number']>0x0?_0x23fb27(0x136):_0x23fb27(0x12e))+_0x23fb27(0x208)),currentCoins=_0x2ec12a,currentCoinsAll=_0x2cad36;}await sleep(watchTransactionsInterval);}catch(_0x2a7005){if(!exchangeStopped)await handleError(_0x2a7005,_0x23fb27(0x1ec));}else await sleep(0x64);}}async function loadSymbols(_0x526f6d=config[_0x52254e(0x210)],_0x2d3e95=![]){const _0x31dc8b=_0x52254e;if(allSymbols&&!_0x2d3e95)return;try{markets=await exchange[_0x31dc8b(0x1cc)](),allSymbols=exchange[_0x31dc8b(0x1a5)][_0x31dc8b(0x140)](_0x492058=>{const _0xb336ec=_0x31dc8b;let _0x56c8b5=![];const _0xc9f7f7=exceptions[_0x526f6d[_0xb336ec(0x276)]()]||[];return _0xc9f7f7[_0xb336ec(0x205)](_0xffc98d=>{if(_0x492058['includes'](_0xffc98d))_0x56c8b5=!![];}),!_0x56c8b5;});}catch(_0x4b9806){throw _0x4b9806;}}async function initclient(){const _0x32b215=_0x52254e;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x32b215(0x139),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x32b215(0x104),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5bdafa=getNormalizedPerformance();emitPerformance(_0x5bdafa),getStartingBalances(_0x5bdafa);}async function toggleBotMode(){const _0x98cd60=_0x52254e;let _0x4b6bc2=dbConfig['get']('bot')[_0x98cd60(0x26f)]({'botID':botID})[_0x98cd60(0x1b3)]();if(_0x4b6bc2){const _0x5018e8=!_0x4b6bc2[_0x98cd60(0x25d)];dbConfig['get'](_0x98cd60(0x105))[_0x98cd60(0x26f)]({'botID':botID})['assign']({'headless':_0x5018e8})[_0x98cd60(0x254)](),config['headless']=_0x5018e8,proxyEmit(_0x98cd60(0x18e),emittedConfiguration()),updateBotManager();}}function _0x12be(_0x50459f,_0x599836){const _0xa77c28=_0x4b87();return _0x12be=function(_0x143fa7,_0x5d7151){_0x143fa7=_0x143fa7-0x102;let _0x4b8769=_0xa77c28[_0x143fa7];return _0x4b8769;},_0x12be(_0x50459f,_0x599836);}function updateBotManager(){const _0x211cab=_0x52254e;process[_0x211cab(0x18b)]({'updatebotmanager':!![]},_0x93a49c=>{});}async function loadCoins(_0x88ad2b){const _0x52b3e0=_0x52254e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x18a60f,_0x5a5e7d=0x0,_0x371461=0x0;_0x88ad2b[_0x52b3e0(0x205)](_0x4daa97=>{loading['remainingSymbols']['push'](_0x4daa97);}),loadingCanceled=![];let _0x3dc50d=![];while(_0x18a60f!=_0x88ad2b[_0x52b3e0(0x251)]){_0x18a60f=0x0,_0x88ad2b['forEach'](_0x295b13=>{const _0x4029f6=_0x52b3e0;if(global[_0x4029f6(0x11d)][noslash(_0x295b13)]){loading['remainingSymbols']=loading[_0x4029f6(0x200)][_0x4029f6(0x140)](_0x2ea605=>_0x2ea605!=_0x295b13);if(!watchedSymbols[_0x4029f6(0x191)](_0x295b13))watchedSymbols[_0x4029f6(0x277)](_0x295b13);_0x18a60f++;}}),loading[_0x52b3e0(0x275)]=Math['round'](_0x18a60f/_0x88ad2b[_0x52b3e0(0x251)]*0x64);loading[_0x52b3e0(0x275)]!=0x64&&(_0x371461>0x1e*0x5&&(loading[_0x52b3e0(0x27c)]=!![],emitLoadingProgress()),_0x371461>0x78*0x5&&!_0x3dc50d&&(loading[_0x52b3e0(0x137)]=!![],emitLoadingProgress(),_0x3dc50d=!![],logHistory(_0x52b3e0(0x259),_0x52b3e0(0x1a9)+loading[_0x52b3e0(0x200)][_0x52b3e0(0x23f)](',\x20')+_0x52b3e0(0x129)),logHistory(_0x52b3e0(0x259),_0x52b3e0(0x1fa)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x4ceb5a=_0x52b3e0;process['send']({'stop':_0x4ceb5a(0x24f)},_0x24f0c8=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x18a60f!=_0x5a5e7d&&(_0x5a5e7d=_0x18a60f,emitLoadingProgress()),_0x371461++,await sleep(0xc8);}_0x18a60f==_0x88ad2b[_0x52b3e0(0x251)]&&(coinsLoaded=!![],process['send']({'status':_0x52b3e0(0x19c),'live':'running'},_0x3a0054=>{}),_0x3dc50d&&logHistory(_0x52b3e0(0x108),_0x52b3e0(0x133)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1160f7=_0x52254e;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x1160f7(0x241)});}function emitLoadingProgress(){const _0x4bb95c=_0x52254e;proxyEmit(_0x4bb95c(0x15c),loading);}async function getFiat(){const _0xcdc342=_0x52254e;let _0x43eb22=global[_0xcdc342(0x11d)][stablecoins[_0xcdc342(0x12a)][_0xcdc342(0x1e1)]],_0x45fde1=global['ticker'][stablecoins[_0xcdc342(0x23a)]['coin']];return{'eur':Number(_0x43eb22),'usd':Number(_0x45fde1)};}function capitalize(_0x50793a){const _0xd93e5=_0x52254e;return _0x50793a[_0xd93e5(0x164)](0x0,0x1)[_0xd93e5(0x18d)]()+_0x50793a['substring'](0x1);}function supportedExchanges(){const _0x53b058=_0x52254e,_0x34623a=['ws','fetchTickers',_0x53b058(0x222),_0x53b058(0x278),_0x53b058(0x1d3),_0x53b058(0x11b),_0x53b058(0x233),_0x53b058(0x15a),_0x53b058(0x172),_0x53b058(0x246)];let _0x819139=[],_0x185d4a=[],_0x89a5f9=ccxt[_0x53b058(0x139)];_0x89a5f9['forEach'](_0x178dfd=>{const _0xc884d3=_0x53b058;try{const _0x3ad0a2=new ccxt[_0x178dfd]();if(_0x3ad0a2[_0xc884d3(0x110)]['ws'])_0x185d4a[_0xc884d3(0x277)](_0x3ad0a2);}catch(_0x4d4855){}}),_0x185d4a['forEach'](_0x59ae5f=>{const _0x3dacc2=_0x53b058;let _0x5a5056=0x0;_0x34623a[_0x3dacc2(0x205)](_0x28cb26=>{_0x28cb26 in _0x59ae5f['has']&&_0x59ae5f['has'][_0x28cb26]&&_0x5a5056++;}),_0x5a5056==_0x34623a[_0x3dacc2(0x251)]&&_0x819139['push'](capitalize(_0x59ae5f['id']));});let _0x3f39a0=[];return _0x89a5f9['forEach'](_0x257242=>{_0x257242=capitalize(_0x257242);if(!_0x819139['includes'](_0x257242))_0x3f39a0['push'](_0x257242);}),_0x819139;}function setStartDatePerformance(){const _0x515834=_0x52254e;if(config&&config[_0x515834(0x143)][0x0][_0x515834(0x231)][_0x515834(0x251)]!=0x0){const _0x2f87e6=config['liquidity'][0x0][_0x515834(0x231)];dbPerformance['get'](_0x515834(0x1d2))[_0x515834(0x26f)]({'date':config['startdate']})[_0x515834(0x250)]({'coins':_0x2f87e6})[_0x515834(0x254)]();}}async function recreateCoinResults(){const _0x17b312=_0x52254e;let _0x1493e4,_0x51371f=[];try{const _0x260986=fns[_0x17b312(0x22f)](fns[_0x17b312(0x1bf)](config[_0x17b312(0x173)][_0x17b312(0x10d)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x55bf43 of currentCoins){if(_0x55bf43[_0x17b312(0x1e1)]!=config['basecoin']){let _0x4a0794=0x0,_0x2fa2f3,_0x15a0e0;_0x1493e4=await getAllEventOrders(_0x55bf43[_0x17b312(0x1ed)]);if(_0x1493e4[_0x17b312(0x251)]>0x0)_0x1493e4[_0x17b312(0x205)](_0x23e6c0=>{const _0x1bab79=_0x17b312,_0x58552f=_0x55bf43[_0x1bab79(0x1ed)]['includes'](config[_0x1bab79(0x273)]+'/');_0x51371f[_0x1bab79(0x277)]({'datetime':_0x23e6c0[_0x1bab79(0x112)],'coin':_0x55bf43[_0x1bab79(0x1e1)],'symbol':_0x55bf43['symbol'],'side':_0x23e6c0['side'],'reverse':_0x58552f,'amount':formatResult(_0x23e6c0[_0x1bab79(0x20d)],0x8),'filled':formatResult(_0x23e6c0[_0x1bab79(0x20d)],0x8),'price':formatResult(_0x23e6c0[_0x1bab79(0x15b)],0x8)}),_0x4a0794=_0x23e6c0[_0x1bab79(0x122)]==_0x1bab79(0x1ac)?_0x4a0794+_0x23e6c0[_0x1bab79(0x20d)]:_0x4a0794-_0x23e6c0[_0x1bab79(0x20d)];if(!_0x15a0e0)_0x15a0e0=_0x23e6c0[_0x1bab79(0x15b)];});_0x2fa2f3=_0x55bf43['number']-_0x4a0794;let _0x2ec2a6;config[_0x17b312(0x143)][_0x17b312(0x205)](_0x2061c9=>{const _0x455415=_0x17b312;!_0x2ec2a6&&(_0x2ec2a6=_0x2061c9['changes'][_0x455415(0x26f)](_0x3ee640=>_0x3ee640[_0x455415(0x1e1)]==_0x55bf43[_0x455415(0x1e1)]),_0x2ec2a6&&(_0x2fa2f3=_0x2ec2a6[_0x455415(0x1eb)],_0x15a0e0=_0x2ec2a6[_0x455415(0x15b)]));});let _0x9c4434=dbCoinResults['get'](_0x17b312(0x187))[_0x17b312(0x26f)]({'coin':_0x55bf43[_0x17b312(0x1e1)]})[_0x17b312(0x1b3)]();_0x9c4434={'coin':_0x55bf43[_0x17b312(0x1e1)],'number':_0x2fa2f3,'breakeven':_0x15a0e0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x17b312(0x1e6)]('coins')['find']({'coin':_0x55bf43[_0x17b312(0x1e1)]})[_0x17b312(0x250)](_0x9c4434)[_0x17b312(0x254)]();}}_0x51371f[_0x17b312(0x27b)]((_0xdf7c58,_0x23199b)=>_0xdf7c58[_0x17b312(0x112)]>_0x23199b[_0x17b312(0x112)]?0x1:_0x23199b['datetime']>_0xdf7c58[_0x17b312(0x112)]?-0x1:0x0);let _0x2a54b6=0x0;for(let _0x5daeba of _0x51371f){await updateCoinResults(_0x5daeba,!![]);}}catch(_0x196caa){await handleError(_0x196caa,_0x17b312(0x234));}}async function getAllEventOrders(_0x2cb03f){const _0x51bf1b=_0x52254e;let _0x5c5d92=[],_0x37d7fa=dbLogs[_0x51bf1b(0x1e6)](_0x51bf1b(0x184))[_0x51bf1b(0x140)](_0x2c5635=>{const _0xa13e8a=_0x51bf1b,_0x47c19d=_0x2c5635[_0xa13e8a(0x152)][_0xa13e8a(0x276)]();return _0x47c19d[_0xa13e8a(0x191)](_0x2cb03f[_0xa13e8a(0x276)]())&&(_0x47c19d[_0xa13e8a(0x191)](_0xa13e8a(0x218))&&_0x47c19d['includes'](_0xa13e8a(0x16c))||_0x47c19d[_0xa13e8a(0x191)](_0xa13e8a(0x20d))&&_0x47c19d[_0xa13e8a(0x191)](_0xa13e8a(0x16c)));})[_0x51bf1b(0x145)](_0x51bf1b(0x1e7))['value']();return _0x37d7fa['forEach'](_0x3c61fd=>{const _0x57e58a=_0x51bf1b,_0x594f92=_0x3c61fd[_0x57e58a(0x152)][_0x57e58a(0x191)]('sell')?'sell':_0x57e58a(0x1ac),_0x165bd9=/#([0-9]|\.)+\s/i,_0x2cfac6=Number(_0x165bd9[_0x57e58a(0x1ba)](_0x3c61fd['event'])[0x0][_0x57e58a(0x284)](0x1)),_0x14e77b=/@([0-9]|\.)+$/i,_0x4b4bf1=Number(_0x14e77b['exec'](_0x3c61fd['event'])[0x0][_0x57e58a(0x284)](0x1));_0x5c5d92['push']({'datetime':_0x3c61fd['time'],'coin':symbolToCoin(_0x2cb03f),'symbol':_0x2cb03f,'side':_0x594f92,'amount':_0x2cfac6,'filled':_0x2cfac6,'price':_0x4b4bf1});}),_0x5c5d92;}async function getAllOrders(_0x5bef67,_0x6da2e4){const _0xefd846=_0x52254e;let _0x259bd0=[];while(_0x6da2e4<exchange[_0xefd846(0x1d9)]()){const _0x3189b4=0x1f4,_0x15aa1c=await exchange[_0xefd846(0x172)](_0x5bef67,_0x6da2e4,_0x3189b4);if(_0x15aa1c['length'])_0x6da2e4=_0x15aa1c[_0x15aa1c[_0xefd846(0x251)]-0x1][_0xefd846(0x24a)]+0x1,_0x259bd0=_0x259bd0['concat'](_0x15aa1c);else break;}return _0x259bd0;}async function validate24hChanges(){const _0x2e4efd=_0x52254e;for(const _0x1ab8ea of currentCoins){if(_0x1ab8ea[_0x2e4efd(0x1e1)]!=config[_0x2e4efd(0x273)]){let _0x392e5a;_0x1ab8ea[_0x2e4efd(0x1b4)]?_0x392e5a=formatResult((0x1/(global[_0x2e4efd(0x1f6)][noslash(_0x1ab8ea[_0x2e4efd(0x1ed)])]/0x64+0x1)-0x1)*0x64,0x3):_0x392e5a=global['change'][noslash(_0x1ab8ea['symbol'])],_0x392e5a<config[_0x2e4efd(0x13e)]&&(logHistory('error',_0x1ab8ea[_0x2e4efd(0x1e1)]+_0x2e4efd(0x199)+_0x392e5a+'%'),logHistory('error',_0x2e4efd(0x1fd)),logHistory(_0x2e4efd(0x259),_0x2e4efd(0x24b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x593400,_0x42a747){const _0x5a5933=_0x52254e;if(!_0x593400)return!![];const _0x4c9dd1=_0x42a747[_0x5a5933(0x21f)]('.'),_0x582831=_0x593400[_0x5a5933(0x21f)]('.');for(var _0x51a9d3=0x0;_0x51a9d3<_0x582831[_0x5a5933(0x251)];_0x51a9d3++){const _0x3f8183=~~_0x582831[_0x51a9d3],_0x294512=~~_0x4c9dd1[_0x51a9d3];if(_0x3f8183<_0x294512)return!![];if(_0x3f8183>_0x294512)return![];}return![];}async function oneTimeMigration(){const _0x52ddee=_0x52254e;let _0x42b50a=dbLogs[_0x52ddee(0x1e6)](_0x52ddee(0x23d))['value']();if(isOlderVersion(_0x42b50a,'2.3.5')){let _0x27d7f1=[];const _0x4a38d0=dbLogs['get']('logs')[_0x52ddee(0x1b3)]();_0x4a38d0[_0x52ddee(0x205)](_0x406d48=>{const _0x374c71=_0x52ddee;_0x27d7f1[_0x374c71(0x277)]({'time':_0x406d48[_0x374c71(0x1e7)],'type':_0x406d48[_0x374c71(0x1bc)],'event':_0x406d48[_0x374c71(0x152)]});}),dbLogs[_0x52ddee(0x1e6)]('logs')['assign'](_0x27d7f1)['write']();}let _0x1b09b4=dbConfig[_0x52ddee(0x1e6)]('version')[_0x52ddee(0x1b3)]();if(isOlderVersion(_0x1b09b4,_0x52ddee(0x1a6))){let _0x1bde5f=dbConfig[_0x52ddee(0x1e6)](_0x52ddee(0x105))[_0x52ddee(0x26f)]({'botID':botID})[_0x52ddee(0x1b3)]();if(_0x1bde5f){let _0x1ecf3d=[];_0x1bde5f['portfolio'][_0x52ddee(0x205)](_0x26d158=>{const _0x5e16d1=_0x52ddee;_0x1ecf3d[_0x5e16d1(0x277)]({'coin':_0x26d158[_0x5e16d1(0x1e1)],'number':_0x26d158['startnumber'],'price':_0x26d158[_0x5e16d1(0x1d8)]}),delete _0x26d158['startnumber'],delete _0x26d158[_0x5e16d1(0x1d8)];});if(_0x1ecf3d['length']!==0x0)fs[_0x52ddee(0x244)](configbackuppath+(_0x52ddee(0x1c1)+botID+_0x52ddee(0x11e)),JSON[_0x52ddee(0x228)](_0x1ecf3d,null,0x4),function(_0xfef89a){if(_0xfef89a){}});const _0x2318b2=(_0xd51e57,_0xaeee85)=>{const _0x14c81a=_0x52ddee;let _0x14d5d7=[];_0xaeee85[_0x14c81a(0x205)](_0x58d71d=>{const _0x223ac5=_0x14c81a,_0x3dc3ba=_0xd51e57['find'](_0x4af2e3=>_0x4af2e3[_0x223ac5(0x1e1)]==_0x58d71d['coin']);if(!_0x3dc3ba)_0x14d5d7[_0x223ac5(0x277)](_0x58d71d);});let _0x173dc6=[];return _0xd51e57[_0x14c81a(0x205)](_0x42c5cf=>{const _0x46c5ca=_0x14c81a,_0x3b9dd5=_0xaeee85[_0x46c5ca(0x26f)](_0x5effaf=>_0x5effaf[_0x46c5ca(0x1e1)]==_0x42c5cf[_0x46c5ca(0x1e1)]);if(!_0x3b9dd5||_0x3b9dd5[_0x46c5ca(0x1eb)]==0x0&&_0x42c5cf[_0x46c5ca(0x1eb)]!=0x0)_0x173dc6[_0x46c5ca(0x277)](_0x42c5cf);}),{'missingDay1':_0x14d5d7,'notInDay2':_0x173dc6};},_0x496443=dbPerformance[_0x52ddee(0x1e6)](_0x52ddee(0x1d2))[_0x52ddee(0x16e)]()['value']();if(_0x496443[_0x52ddee(0x251)]>0x1){const {missingDay1:_0x48e2a7,notInDay2:_0x10c78c}=_0x2318b2(_0x1ecf3d,_0x496443[0x1]['coins']);_0x1ecf3d=[..._0x1ecf3d,..._0x48e2a7],_0x10c78c[_0x52ddee(0x205)](_0xcfb113=>{const _0x432e36=_0x52ddee;let _0xe8b15=_0x1ecf3d[_0x432e36(0x12d)](_0xb468c5=>_0xb468c5[_0x432e36(0x1e1)]==_0xcfb113[_0x432e36(0x1e1)]);_0xe8b15!=-0x1&&_0x1ecf3d['splice'](_0xe8b15,0x1);});}_0x1ecf3d[_0x52ddee(0x27b)]((_0x3d2baa,_0x21304f)=>_0x3d2baa[_0x52ddee(0x1e1)]>_0x21304f['coin']?0x1:_0x21304f[_0x52ddee(0x1e1)]>_0x3d2baa[_0x52ddee(0x1e1)]?-0x1:0x0);let _0x1e4ce5=[{'date':_0x1bde5f[_0x52ddee(0x173)],'changes':_0x1ecf3d}];_0x496443[_0x52ddee(0x251)]>0x2&&_0x496443[_0x52ddee(0x205)]((_0x9c7b8f,_0x265f7b)=>{const _0x3c14fa=_0x52ddee;if(_0x265f7b>0x0&&_0x265f7b<_0x496443[_0x3c14fa(0x251)]-0x1){const {missingDay1:_0x41e0cf,notInDay2:_0x46a0ed}=_0x2318b2(_0x496443[_0x265f7b][_0x3c14fa(0x187)],_0x496443[_0x265f7b+0x1][_0x3c14fa(0x187)]);_0x1ecf3d=[],(_0x41e0cf[_0x3c14fa(0x251)]!=0x0||_0x46a0ed[_0x3c14fa(0x251)]!=0x0)&&(_0x41e0cf['length']!=0x0&&_0x1ecf3d[_0x3c14fa(0x277)](..._0x41e0cf),_0x46a0ed['length']!=0x0&&(_0x46a0ed['forEach'](_0x1e77ee=>{const _0x4edcd5=_0x3c14fa;_0x1e77ee['number']=-_0x1e77ee[_0x4edcd5(0x1eb)];}),_0x1ecf3d[_0x3c14fa(0x277)](..._0x46a0ed)),_0x1ecf3d[_0x3c14fa(0x27b)]((_0x50cbe4,_0x1381de)=>_0x50cbe4['coin']>_0x1381de[_0x3c14fa(0x1e1)]?0x1:_0x1381de['coin']>_0x50cbe4[_0x3c14fa(0x1e1)]?-0x1:0x0),_0x1e4ce5['push']({'date':_0x496443[_0x265f7b+0x1][_0x3c14fa(0x212)],'changes':_0x1ecf3d}));}}),dbConfig['get'](_0x52ddee(0x105))[_0x52ddee(0x26f)]({'botID':botID})[_0x52ddee(0x250)]({..._0x1bde5f,'liquidity':_0x1e4ce5})[_0x52ddee(0x254)]();}}if(isOlderVersion(_0x1b09b4,'2.6.0')){let _0x4167b5=dbConfig[_0x52ddee(0x1e6)](_0x52ddee(0x105))[_0x52ddee(0x26f)]({'botID':botID})[_0x52ddee(0x1b3)]();if(_0x4167b5){const _0x53e8fa=_0x4167b5[_0x52ddee(0x210)],_0x335441=_0x53e8fa?capitalize(_0x53e8fa):'Binance';dbConfig[_0x52ddee(0x1e6)](_0x52ddee(0x105))[_0x52ddee(0x26f)]({'botID':botID})[_0x52ddee(0x250)]({'exchange':_0x335441})[_0x52ddee(0x254)]();}}let _0x263f1e=dbPerformance[_0x52ddee(0x1e6)](_0x52ddee(0x23d))[_0x52ddee(0x1b3)]();isOlderVersion(_0x263f1e,_0x52ddee(0x1a6))&&setStartDatePerformance();let _0x5ac9c3=dbCoinResults[_0x52ddee(0x1e6)](_0x52ddee(0x23d))['value']();if(isOlderVersion(_0x5ac9c3,'2.5.0')){let _0x5b5741=dbCoinResults[_0x52ddee(0x1e6)](_0x52ddee(0x187))[_0x52ddee(0x1b3)]();if(_0x5b5741[_0x52ddee(0x251)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2e7461=_0x52254e;dbConfig[_0x2e7461(0x1b7)](_0x2e7461(0x23d),serverversion)[_0x2e7461(0x254)](),dbPerformance[_0x2e7461(0x1b7)](_0x2e7461(0x23d),serverversion)[_0x2e7461(0x254)](),dbLogs[_0x2e7461(0x1b7)](_0x2e7461(0x23d),serverversion)[_0x2e7461(0x254)](),dbCoinResults['set'](_0x2e7461(0x23d),serverversion)[_0x2e7461(0x254)]();}function getConfiguration(_0x4c7d26){const _0x497a91=_0x52254e;let _0x7c9b6c=dbConfig['get'](_0x497a91(0x105))[_0x497a91(0x26f)]({'botID':_0x4c7d26})[_0x497a91(0x1b3)]();if(_0x7c9b6c){let _0x326e95=![];typeof _0x7c9b6c['threshold']==_0x497a91(0x25b)&&(_0x7c9b6c={..._0x7c9b6c,'threshold':Number(_0x7c9b6c[_0x497a91(0x274)])},_0x326e95=!![]),_0x7c9b6c['change24h']==null&&(_0x7c9b6c={..._0x7c9b6c,'change24h':-0x14},_0x326e95=!![]),!_0x7c9b6c[_0x497a91(0x197)]&&(_0x7c9b6c={..._0x7c9b6c,'fiat':'USD'},_0x326e95=!![]),!_0x7c9b6c[_0x497a91(0x266)]&&(_0x7c9b6c={..._0x7c9b6c,'onepagemode':settings[_0x497a91(0x266)]},_0x326e95=!![]),!_0x7c9b6c[_0x497a91(0x24d)]&&(_0x7c9b6c={..._0x7c9b6c,'colorscheme':_0x497a91(0x102)},_0x326e95=!![]),!_0x7c9b6c[_0x497a91(0x1fe)]&&(_0x7c9b6c={..._0x7c9b6c,'autoliquidity':!![]},_0x326e95=!![]),_0x326e95&&(_0x7c9b6c={'botID':_0x7c9b6c[_0x497a91(0x26e)],'exchange':_0x7c9b6c[_0x497a91(0x210)],'apiKey':_0x7c9b6c['apiKey'],'apiSecret':_0x7c9b6c[_0x497a91(0x1fb)],'apiPassword':_0x7c9b6c[_0x497a91(0x25a)],'basecoin':_0x7c9b6c[_0x497a91(0x273)],'botname':_0x7c9b6c[_0x497a91(0x1c5)],'showname':_0x7c9b6c['showname'],'threshold':_0x7c9b6c[_0x497a91(0x274)],'ordertype':_0x7c9b6c['ordertype'],'timeout':_0x7c9b6c[_0x497a91(0x27c)],'fiat':_0x7c9b6c[_0x497a91(0x197)],'startdate':_0x7c9b6c[_0x497a91(0x173)],'recreate':_0x7c9b6c[_0x497a91(0x243)],'timeshift':_0x7c9b6c[_0x497a91(0x183)],'onepagemode':_0x7c9b6c[_0x497a91(0x266)],'headless':_0x7c9b6c[_0x497a91(0x25d)],'cooldown':_0x7c9b6c['cooldown'],'change24h':_0x7c9b6c['change24h'],'emojibuy':_0x7c9b6c[_0x497a91(0x1e0)],'emojisell':_0x7c9b6c['emojisell'],'colorscheme':_0x7c9b6c[_0x497a91(0x24d)],'portfolio':_0x7c9b6c['portfolio'],'autoliquidity':_0x7c9b6c[_0x497a91(0x1fe)],'liquidity':_0x7c9b6c[_0x497a91(0x143)],'openOrders':_0x7c9b6c['openOrders']},dbConfig['get']('bot')['remove']()[_0x497a91(0x254)](),dbConfig['get'](_0x497a91(0x105))[_0x497a91(0x277)](_0x7c9b6c)[_0x497a91(0x254)]());}else _0x7c9b6c={'botID':_0x4c7d26,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x497a91(0x14b)+_0x4c7d26,'showname':![],'threshold':0x3,'ordertype':_0x497a91(0x218),'timeout':0x14,'fiat':_0x497a91(0x237),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x497a91(0x183)],'onepagemode':settings[_0x497a91(0x266)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x497a91(0x102),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x7c9b6c;}function emittedConfiguration(){const _0xf26eff=_0x52254e;let _0x39c793;if(config[_0xf26eff(0x235)]=='')_0x39c793={...config,'configstate':'initial'};else config[_0xf26eff(0x235)]==_0xf26eff(0x11f)?_0x39c793={...config,'configstate':_0xf26eff(0x1ad)}:(_0x39c793={...config,'apiKey':_0xf26eff(0x188),'apiSecret':_0xf26eff(0x188)},config[_0xf26eff(0x25a)]&&(_0x39c793[_0xf26eff(0x25a)]=_0xf26eff(0x188)));return _0x39c793;}function getSettings(){const _0x1e5881=_0x52254e;return dbSettings[_0x1e5881(0x1e6)](_0x1e5881(0x1e5))[_0x1e5881(0x1b3)]();}function getSecure(){const _0x51633c=_0x52254e;return dbSecure[_0x51633c(0x1e6)]('secure')['value']()||{};}function updateTimeshift(_0x3079b9){const _0x186637=_0x52254e;let _0x2a37bd=dbConfig[_0x186637(0x1e6)]('bot')['find']({'botID':botID})['value']();_0x2a37bd&&dbConfig['get'](_0x186637(0x105))[_0x186637(0x26f)]({'botID':botID})[_0x186637(0x250)]({'timeshift':_0x3079b9})[_0x186637(0x254)](),config[_0x186637(0x183)]=_0x3079b9,proxyEmit(_0x186637(0x18e),emittedConfiguration());}function updateOnepagemode(_0x1fe4f0){const _0x6358c7=_0x52254e;let _0x401e29=dbConfig[_0x6358c7(0x1e6)]('bot')[_0x6358c7(0x26f)]({'botID':botID})['value']();_0x401e29&&dbConfig['get'](_0x6358c7(0x105))[_0x6358c7(0x26f)]({'botID':botID})['assign']({'onepagemode':_0x1fe4f0})['write'](),config[_0x6358c7(0x266)]=_0x1fe4f0,proxyEmit(_0x6358c7(0x18e),emittedConfiguration());}async function storeConfiguration(_0xb0b437){const _0xaa07d5=_0x52254e;logger[_0xaa07d5(0x1e8)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xaa07d5(0x1e8)](_0xaa07d5(0x1b9));let _0x2545b1=[],_0x3f36ae=![],_0x21cc65=![],_0x392b46=[];_0xb0b437['portfolio'][_0xaa07d5(0x205)](_0x1a9332=>{const _0xa30bca=_0xaa07d5;if(!_0x1a9332[_0xa30bca(0x153)]&&_0x1a9332[_0xa30bca(0x1e1)]!=_0xb0b437[_0xa30bca(0x273)])_0x392b46['push'](_0x1a9332['symbol']);}),_0x392b46[_0xaa07d5(0x205)](_0x429c68=>{const _0x5545f4=_0xaa07d5,_0x22b844=watchedSymbols[_0x5545f4(0x191)](_0x429c68);!_0x22b844&&_0x2545b1[_0x5545f4(0x277)](_0x429c68);}),_0x392b46['forEach'](_0x4bbb10=>{const _0x479093=currentCoins['find'](_0xc6dbd=>_0xc6dbd['symbol']==_0x4bbb10);!_0x479093&&(_0x3f36ae=!![]);}),currentCoins['forEach'](_0x575b2c=>{const _0x31e6d8=_0xaa07d5;if(_0x575b2c['coin']!=config[_0x31e6d8(0x273)]){const _0x25bedd=_0x392b46[_0x31e6d8(0x26f)](_0x54a3b6=>_0x54a3b6==_0x575b2c[_0x31e6d8(0x1ed)]);!_0x25bedd&&(_0x3f36ae=!![]);}}),_0xb0b437[_0xaa07d5(0x107)][_0xaa07d5(0x205)](_0x550dcf=>{const _0x5f134e=_0xaa07d5,_0x2e6c16=config[_0x5f134e(0x107)][_0x5f134e(0x26f)](_0xb6c51d=>_0xb6c51d[_0x5f134e(0x1e1)]==_0x550dcf[_0x5f134e(0x1e1)]);if(_0x2e6c16&&_0x550dcf[_0x5f134e(0x14f)]!=_0x2e6c16[_0x5f134e(0x14f)])_0x21cc65=!![];});let _0x37946f=dbConfig['get']('bot')[_0xaa07d5(0x26f)]({'botID':botID})[_0xaa07d5(0x1b3)]();_0xb0b437={..._0xb0b437,'apiKey':crypt[_0xaa07d5(0x1d4)](secure[_0xaa07d5(0x1f8)],_0xb0b437[_0xaa07d5(0x235)])[_0xaa07d5(0x20a)],'apiSecret':crypt['decrypt'](secure[_0xaa07d5(0x1f8)],_0xb0b437[_0xaa07d5(0x1fb)])[_0xaa07d5(0x20a)]};_0xb0b437[_0xaa07d5(0x25a)]&&(_0xb0b437[_0xaa07d5(0x25a)]=crypt[_0xaa07d5(0x1d4)](secure[_0xaa07d5(0x1f8)],_0xb0b437[_0xaa07d5(0x25a)])[_0xaa07d5(0x20a)]);let _0x2f8006=![];if(_0x37946f){_0xb0b437[_0xaa07d5(0x235)]==_0xaa07d5(0x188)?_0xb0b437['apiKey']=config[_0xaa07d5(0x235)]:_0x2f8006=!![];_0xb0b437['apiSecret']==_0xaa07d5(0x188)?_0xb0b437[_0xaa07d5(0x1fb)]=config['apiSecret']:_0x2f8006=!![];if(_0xb0b437[_0xaa07d5(0x25a)]==_0xaa07d5(0x188))_0xb0b437[_0xaa07d5(0x25a)]=config[_0xaa07d5(0x25a)];else{if(_0xb0b437[_0xaa07d5(0x25a)])_0x2f8006=!![];}dbConfig[_0xaa07d5(0x1e6)]('bot')[_0xaa07d5(0x26f)]({'botID':botID})[_0xaa07d5(0x250)](_0xb0b437)[_0xaa07d5(0x254)]();}else dbConfig[_0xaa07d5(0x1e6)](_0xaa07d5(0x105))[_0xaa07d5(0x277)](_0xb0b437)[_0xaa07d5(0x254)](),_0x2f8006=!![],process[_0xaa07d5(0x18b)]({'status':'enabled','live':_0xaa07d5(0x1a3)},_0x4c954e=>{});process[_0xaa07d5(0x18b)]({'botname':_0xb0b437[_0xaa07d5(0x1c5)]},_0x127c0d=>{}),updateBotManager(),config={..._0xb0b437},proxyEmit(_0xaa07d5(0x16b)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2f8006)await reset(_0x2545b1,!![]);else _0x3f36ae||_0x21cc65?await reset(_0x2545b1,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0xaa07d5(0x27f));}async function storeHeadless(_0x3eec01){const _0x51bbe9=_0x52254e,_0x2fb32d={...config,'headless':_0x3eec01[_0x51bbe9(0x25d)]};let _0x83745f=dbConfig[_0x51bbe9(0x1e6)]('bot')[_0x51bbe9(0x26f)]({'botID':botID})['value']();_0x83745f&&dbConfig[_0x51bbe9(0x1e6)](_0x51bbe9(0x105))[_0x51bbe9(0x26f)]({'botID':botID})[_0x51bbe9(0x250)](_0x2fb32d)['write'](),config={..._0x2fb32d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x3423f6){const _0x1935fd=_0x52254e,_0x370e32={...config,'fiat':_0x3423f6};let _0x3c879e=dbConfig[_0x1935fd(0x1e6)](_0x1935fd(0x105))[_0x1935fd(0x26f)]({'botID':botID})[_0x1935fd(0x1b3)]();_0x3c879e&&dbConfig[_0x1935fd(0x1e6)](_0x1935fd(0x105))[_0x1935fd(0x26f)]({'botID':botID})[_0x1935fd(0x250)](_0x370e32)['write'](),config={..._0x370e32},proxyEmit(_0x1935fd(0x18e),emittedConfiguration());}function resetHistory(){const _0x5258e4=_0x52254e;logger[_0x5258e4(0x1be)](_0x5258e4(0x171));try{if(fs[_0x5258e4(0x1b1)](path['join'](configpath,_0x5258e4(0x204)+botID+_0x5258e4(0x19e))))fs['unlinkSync'](path[_0x5258e4(0x23f)](configpath,_0x5258e4(0x204)+botID+_0x5258e4(0x19e)));if(fs[_0x5258e4(0x1b1)](path['join'](configpath,_0x5258e4(0x204)+botID+_0x5258e4(0x1d7))))fs['unlinkSync'](path['join'](configpath,_0x5258e4(0x204)+botID+_0x5258e4(0x1d7)));if(fs[_0x5258e4(0x1b1)](path[_0x5258e4(0x23f)](configpath,_0x5258e4(0x204)+botID+'-results.json')))fs[_0x5258e4(0x209)](path[_0x5258e4(0x23f)](configpath,_0x5258e4(0x204)+botID+'-results.json'));}catch(_0x4873e4){if(_0x4873e4)logger[_0x5258e4(0x1be)]('Error\x20while\x20deleting\x20files:\x20',_0x4873e4);}const _0x11eba6=getDate();let _0x3b80d4=[];currentCoins[_0x5258e4(0x205)](_0x24fea7=>{const _0x465839=_0x5258e4;_0x3b80d4[_0x465839(0x277)]({'coin':_0x24fea7['coin'],'number':_0x24fea7[_0x465839(0x1eb)],'price':_0x24fea7[_0x465839(0x17a)]});});let _0x13426d=dbConfig['get'](_0x5258e4(0x105))['find']({'botID':botID})[_0x5258e4(0x1b3)]();_0x13426d&&(dbConfig[_0x5258e4(0x1e6)](_0x5258e4(0x105))[_0x5258e4(0x26f)]({'botID':botID})[_0x5258e4(0x250)]({'liquidity':[{'date':_0x11eba6,'changes':_0x3b80d4}]})[_0x5258e4(0x254)](),config[_0x5258e4(0x143)]=[]),process['send']({'stop':_0x5258e4(0x24f)},_0x33919d=>{});}function noslash(_0x528c98){const _0x42eae3=_0x52254e;return _0x528c98[_0x42eae3(0x10d)]('/','');}function updateHighestFee(_0x4e2d07,_0x1a4a09){const _0x4f5f85=_0x52254e;lastFees['currency']=_0x4e2d07,lastFees['recent20'][_0x4f5f85(0x251)]===0x14&&lastFees[_0x4f5f85(0x1b5)][_0x4f5f85(0x116)](),lastFees[_0x4f5f85(0x1b5)][_0x4f5f85(0x277)](_0x1a4a09),lastFees[_0x4f5f85(0x19b)]=Math[_0x4f5f85(0x189)](...lastFees[_0x4f5f85(0x1b5)]);}async function updateNumberCoinsCcxt(_0x938f1a){const _0x4ec2e5=_0x52254e;logger[_0x4ec2e5(0x1e8)](_0x4ec2e5(0x1af)+_0x938f1a['symbol']+_0x4ec2e5(0x1f9)+_0x938f1a[_0x4ec2e5(0x256)]+'\x20|\x20'+_0x938f1a['id']);let _0x246798=_0x938f1a[_0x4ec2e5(0x256)],_0x3bdacf=![];currentCoins[_0x4ec2e5(0x205)](_0x10b08d=>{const _0x2352e3=_0x4ec2e5;_0x10b08d[_0x2352e3(0x1ed)]==_0x938f1a[_0x2352e3(0x1ed)]&&(_0x3bdacf=!![]);});if(!_0x3bdacf)return;const _0x42574c=currentCoins[_0x4ec2e5(0x26f)](_0x5bce10=>_0x5bce10['symbol']==_0x938f1a[_0x4ec2e5(0x1ed)]),_0xf06caf=_0x4785c8=>{const _0x30934d=_0x4ec2e5;if(_0x42574c)_0x42574c[_0x30934d(0x22a)]=_0x4785c8;};if(_0x246798=='open')_0xf06caf('open');else{if(_0x246798=='canceled'){_0xf06caf(_0x4ec2e5(0x148));const _0x1cf687=await getCoins();[currentCoins,currentCoinsAll]=_0x1cf687,await getOpenOrders(),handleOpenOrders();}else{if(_0x246798==_0x4ec2e5(0x27d)){logger[_0x4ec2e5(0x1e8)]('1\x20-\x20FILLED:\x20'+_0x938f1a['symbol']+'\x20|\x20'+_0x938f1a['filled']+_0x4ec2e5(0x1f9)+_0x938f1a['id']);let _0x3c5c48=![];if(lastOrders)for(const _0x344ab0 of lastOrders){const _0x195502=0xc8,_0x246ba7=0x1388;let _0xc6ec2b=0x0;while(!_0x344ab0['orderId']&&_0xc6ec2b*_0x195502<_0x246ba7){_0xc6ec2b++,await sleep(_0x195502);}if(_0xc6ec2b>0x0)logger[_0x4ec2e5(0x1e8)]('Waited\x20'+_0xc6ec2b*_0x195502/0x3e8+_0x4ec2e5(0x120));if(_0x344ab0[_0x4ec2e5(0x18c)]==_0x938f1a['id']){logger[_0x4ec2e5(0x1e8)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x938f1a['id']),_0x3c5c48=!![];if(_0x344ab0[_0x4ec2e5(0x20d)]==0x0){logger[_0x4ec2e5(0x1e8)](_0x4ec2e5(0x1c2)+_0x938f1a['id']);if(_0x938f1a[_0x4ec2e5(0x242)])_0x344ab0[_0x4ec2e5(0x15b)]=_0x938f1a[_0x4ec2e5(0x242)];else{if(_0x938f1a[_0x4ec2e5(0x15b)])_0x344ab0[_0x4ec2e5(0x15b)]=_0x938f1a[_0x4ec2e5(0x15b)];else{}}_0x344ab0[_0x4ec2e5(0x20d)]=_0x938f1a['filled'],_0x344ab0['fee']={'currency':_0x938f1a[_0x4ec2e5(0x220)]?_0x938f1a[_0x4ec2e5(0x220)][_0x4ec2e5(0x162)]:null,'cost':_0x938f1a[_0x4ec2e5(0x220)]?_0x938f1a[_0x4ec2e5(0x220)][_0x4ec2e5(0x25f)]:0x0},updateHighestFee(_0x344ab0[_0x4ec2e5(0x220)][_0x4ec2e5(0x162)],_0x344ab0[_0x4ec2e5(0x220)][_0x4ec2e5(0x25f)]),_0xf06caf(_0x4ec2e5(0x20d)),await validateOrders();if(lockOrders==ORDERS[_0x4ec2e5(0x286)]){const _0x4a57ec=await getCoins();[currentCoins,currentCoinsAll]=_0x4a57ec;}await updateCoinResults(_0x344ab0);}}}if(!_0x3c5c48){logger['debug'](_0x4ec2e5(0x167)+_0x938f1a['id']),_0xf06caf('filled');const _0x3f7c0c=await getCoins();[currentCoins,currentCoinsAll]=_0x3f7c0c,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x338c4b=JSON[_0x4ec2e5(0x169)](lastBalances['portfolio']);const _0x2afc26=_0x338c4b[_0x4ec2e5(0x26f)](_0x484b02=>_0x484b02[_0x4ec2e5(0x1ed)]==_0x938f1a['symbol']);if(_0x2afc26){if(_0x246798==_0x4ec2e5(0x192))_0x2afc26[_0x4ec2e5(0x22a)]=_0x2afc26['orderstatus']==_0x4ec2e5(0x20d)?_0x4ec2e5(0x20d):_0x4ec2e5(0x192);else{if(_0x246798=='canceled')_0x2afc26[_0x4ec2e5(0x22a)]=_0x2afc26[_0x4ec2e5(0x22a)]==_0x4ec2e5(0x20d)?'filled':_0x4ec2e5(0x148);else _0x246798==_0x4ec2e5(0x27d)&&(_0x2afc26[_0x4ec2e5(0x22a)]=_0x4ec2e5(0x20d));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4ec2e5(0x228)](_0x338c4b)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5bbb70=![];currentCoins['forEach'](_0x1ff86a=>{const _0x2f75ad=_0x12be;_0x5bbb70=allOpenOrders['find'](_0x1dd10a=>_0x1dd10a[_0x2f75ad(0x1ed)]==_0x1ff86a[_0x2f75ad(0x1ed)]),_0x1ff86a[_0x2f75ad(0x22a)]=_0x5bbb70?'open':_0x2f75ad(0x13c);});}async function getCoins(_0x34ed02=!![],_0xffc3d=config[_0x52254e(0x273)]){const _0x3a1a79=_0x52254e;let _0x13d72a,_0x39ebbf=[],_0x575f74=[],_0xe1ff61=[],_0x289eb5=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x13d72a=await exchange[_0x3a1a79(0x246)](),mybalances=_0x13d72a['total'];for(const [_0x6ab2f1,_0x514f34]of Object[_0x3a1a79(0x170)](mybalances)){_0x289eb5[_0x3a1a79(0x277)](_0x6ab2f1);}if(_0xffc3d=='')for(const [_0x5da9c7,_0x3c8fd2]of Object[_0x3a1a79(0x170)](mybalances)){_0x3c8fd2[_0x3a1a79(0x128)]()!=0x0&&_0x575f74[_0x3a1a79(0x277)]({'coin':_0x5da9c7});}else{let _0x47e800=![];for(const [_0x51c6cd,_0x1a009b]of Object['entries'](mybalances)){if(_0x289eb5[_0x3a1a79(0x191)](_0x51c6cd)){const _0xfe4b05=config[_0x3a1a79(0x107)][_0x3a1a79(0x26f)](_0xfb2196=>_0xfb2196[_0x3a1a79(0x1e1)]==_0x51c6cd),_0x30c71f=_0x51c6cd+'/'+_0xffc3d,_0x4800ef=_0xffc3d+'/'+_0x51c6cd,_0xc28717=currentCoins[_0x3a1a79(0x26f)](_0x2b82d0=>_0x2b82d0[_0x3a1a79(0x1e1)]==_0x51c6cd);_0x47e800=![];if((_0x1a009b[_0x3a1a79(0x128)]()!=0x0||_0xfe4b05)&&(allSymbols[_0x3a1a79(0x191)](_0x30c71f)||_0x51c6cd==_0xffc3d))_0x51c6cd!=_0xffc3d&&_0x39ebbf[_0x3a1a79(0x277)](_0x30c71f),_0x575f74[_0x3a1a79(0x277)]({'coin':_0x51c6cd,'symbol':_0x30c71f,'reverse':![],'number':Math[_0x3a1a79(0x189)](_0x1a009b+(_0xfe4b05&&_0xfe4b05[_0x3a1a79(0x14f)]||0x0),0x0),'orderstatus':_0xc28717?_0xc28717[_0x3a1a79(0x22a)]:'none'});else(_0x1a009b[_0x3a1a79(0x128)]()!=0x0||_0xfe4b05)&&allSymbols['includes'](_0x4800ef)&&(_0x51c6cd!=_0xffc3d&&_0x39ebbf[_0x3a1a79(0x277)](_0x4800ef),_0x575f74[_0x3a1a79(0x277)]({'coin':_0x51c6cd,'symbol':_0x4800ef,'reverse':!![],'number':Math[_0x3a1a79(0x189)](_0x1a009b+(_0xfe4b05&&_0xfe4b05[_0x3a1a79(0x14f)]||0x0),0x0),'orderstatus':_0xc28717?_0xc28717[_0x3a1a79(0x22a)]:_0x3a1a79(0x13c)}));}}}}catch(_0x1ee490){if(!_0x34ed02)handleErrorNoStop(_0x1ee490,_0x3a1a79(0x1cd));else await handleError(_0x1ee490,_0x3a1a79(0x1cd));}return _0xe1ff61=cloneDeep(_0x575f74),_0x575f74=_0x575f74[_0x3a1a79(0x140)](_0x571140=>{const _0x4d80ec=_0x3a1a79,_0x564b6d=config[_0x4d80ec(0x107)][_0x4d80ec(0x26f)](_0x111046=>_0x111046[_0x4d80ec(0x1e1)]==_0x571140[_0x4d80ec(0x1e1)]);return _0x564b6d&&!_0x564b6d[_0x4d80ec(0x153)];}),[_0x575f74,_0xe1ff61];}async function getCoinNumber(_0x3cbe88){const _0x6ddde7=_0x52254e;let _0x2270b9;try{const _0x110ec1=await exchange['fetchBalance']();_0x2270b9=_0x110ec1[_0x6ddde7(0x257)][_0x3cbe88];}catch(_0x361c7a){await handleError(_0x361c7a,_0x6ddde7(0x17b));}return _0x2270b9;}async function getOpenOrders(){const _0x594e20=_0x52254e;let _0x3c80e0;allOpenOrders=[];try{for(const _0x374924 of config[_0x594e20(0x107)]){!_0x374924['excluded']&&_0x374924[_0x594e20(0x1e1)]!=config[_0x594e20(0x273)]&&(_0x3c80e0=await exchange[_0x594e20(0x15a)](_0x374924[_0x594e20(0x1ed)]),_0x3c80e0[_0x594e20(0x251)]>0x0&&allOpenOrders[_0x594e20(0x277)](_0x3c80e0[0x0]));}}catch(_0x46473f){await handleError(_0x46473f,_0x594e20(0x179));}}async function handleOpenOrders(_0x3f3e95=0x0){const _0x13757a=_0x52254e;allOpenOrders[_0x13757a(0x251)]==0x0&&lockOrders==ORDERS[_0x13757a(0x286)]&&allOrdersPlaced&&(_0x3f3e95==0x0?(logger['debug'](_0x13757a(0x20c)),_0x3f3e95++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x13757a(0x1e8)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x13757a(0x12b))));}async function testAPI(_0x284fc1){const _0x52ec1e=_0x52254e,_0x499d21=ccxt[_0x284fc1[_0x52ec1e(0x210)]['toLowerCase']()],_0x15aa94=new _0x499d21({'apiKey':_0x284fc1[_0x52ec1e(0x235)],'secret':_0x284fc1[_0x52ec1e(0x1fb)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x284fc1['exchange']==_0x52ec1e(0x196)&&(_0x15aa94['options']={'defaultType':_0x52ec1e(0x165),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x284fc1['apiPassword'])_0x15aa94[_0x52ec1e(0x132)]=_0x284fc1[_0x52ec1e(0x25a)];try{await _0x15aa94['loadMarkets']();}catch(_0x1227cf){throw _0x1227cf;}}function cloneDeep(_0x5c7f86){const _0x25eeef=_0x52254e;return JSON[_0x25eeef(0x169)](JSON['stringify'](_0x5c7f86));}async function getPortfolio(_0x27072d){const _0x2a1d69=_0x52254e;let _0x34bebb=[],_0x6a5c01=[],_0x19cad7=[],_0x1c8c43;if(_0x27072d[_0x2a1d69(0x235)]!=='************'||_0x27072d[_0x2a1d69(0x1fb)]!==_0x2a1d69(0x188)||_0x27072d['apiPassword']&&_0x27072d[_0x2a1d69(0x25a)]!==_0x2a1d69(0x188)){if(config[_0x2a1d69(0x210)]){if(_0x27072d[_0x2a1d69(0x235)]==_0x2a1d69(0x188))_0x27072d[_0x2a1d69(0x235)]=config[_0x2a1d69(0x235)];if(_0x27072d[_0x2a1d69(0x1fb)]=='************')_0x27072d[_0x2a1d69(0x1fb)]=config[_0x2a1d69(0x1fb)];if(_0x27072d['apiPassword']==_0x2a1d69(0x188))_0x27072d[_0x2a1d69(0x25a)]=config['apiPassword'];try{await testAPI(_0x27072d);}catch(_0x30538a){if(_0x30538a[_0x2a1d69(0x128)]()[_0x2a1d69(0x191)](_0x2a1d69(0x247))){logger[_0x2a1d69(0x1e8)](_0x2a1d69(0x255)),proxyEmit('portfolio',![]);return;}else{handleError(_0x30538a,_0x2a1d69(0x261));return;}}}await initExchange(_0x27072d['exchange'],_0x27072d[_0x2a1d69(0x235)],_0x27072d[_0x2a1d69(0x1fb)],_0x27072d[_0x2a1d69(0x25a)]);try{await loadSymbols(_0x27072d[_0x2a1d69(0x210)],!![]);}catch(_0x10be4d){if(_0x10be4d[_0x2a1d69(0x128)]()[_0x2a1d69(0x191)](_0x2a1d69(0x247))){proxyEmit('portfolio',![]);return;}else{handleError(_0x10be4d,_0x2a1d69(0x24e));return;}}const _0x45f223=await getCoins(![],_0x27072d[_0x2a1d69(0x273)]);_0x19cad7=cloneDeep(_0x45f223[0x1]);}else _0x19cad7=cloneDeep(currentCoinsAll);if(_0x27072d[_0x2a1d69(0x273)]=='')proxyEmit(_0x2a1d69(0x107),_0x19cad7);else{_0x19cad7[_0x2a1d69(0x205)](_0x3a4f9=>{const _0x3583fd=_0x2a1d69;if(_0x3a4f9['coin']!=_0x27072d[_0x3583fd(0x273)])_0x34bebb['push'](_0x3a4f9[_0x3583fd(0x1ed)]);});try{_0x6a5c01=await exchange[_0x2a1d69(0x142)](_0x34bebb);}catch(_0x29d640){if(_0x29d640[_0x2a1d69(0x128)]()[_0x2a1d69(0x191)](_0x2a1d69(0x247))){proxyEmit(_0x2a1d69(0x107),![]);return;}else{handleError(_0x29d640,_0x2a1d69(0x151));return;}}_0x19cad7[_0x2a1d69(0x205)](_0x42e960=>{const _0x3f2ef4=_0x2a1d69;_0x42e960[_0x3f2ef4(0x1e1)]!=_0x27072d[_0x3f2ef4(0x273)]?_0x1c8c43=_0x42e960[_0x3f2ef4(0x1b4)]?0x1/_0x6a5c01[_0x42e960[_0x3f2ef4(0x1ed)]][_0x3f2ef4(0x17a)]:_0x6a5c01[_0x42e960['symbol']][_0x3f2ef4(0x17a)]:_0x1c8c43=0x1,_0x42e960[_0x3f2ef4(0x15b)]=formatResult(_0x1c8c43,0x8);}),proxyEmit(_0x2a1d69(0x107),_0x19cad7);}}function truncateTradeAmount(_0x13a370,_0x1df8cf){const _0x1a7de6=_0x52254e;let _0x473980=0x0;try{_0x473980=exchange[_0x1a7de6(0x271)](_0x13a370,_0x1df8cf);}catch(_0x4535a1){}return _0x473980;}function checkMinimums(_0xb3c1e5){const _0x4ea4ab=_0x52254e;let _0x29d1fd=!![];const _0x563300=!_0xb3c1e5[_0x4ea4ab(0x1b4)]?markets[_0xb3c1e5['symbol']][_0x4ea4ab(0x240)]['amount']['min']:markets[_0xb3c1e5[_0x4ea4ab(0x1ed)]][_0x4ea4ab(0x240)]['cost'][_0x4ea4ab(0x1bd)],_0x4a9c7e=!_0xb3c1e5[_0x4ea4ab(0x1b4)]?markets[_0xb3c1e5[_0x4ea4ab(0x1ed)]][_0x4ea4ab(0x240)]['cost']['min']:markets[_0xb3c1e5[_0x4ea4ab(0x1ed)]][_0x4ea4ab(0x240)][_0x4ea4ab(0x14e)][_0x4ea4ab(0x1bd)],_0xd04b72=truncateTradeAmount(_0xb3c1e5[_0x4ea4ab(0x1ed)],_0xb3c1e5['trade']);_0xb3c1e5['trade']=_0xd04b72;if(Math[_0x4ea4ab(0x126)](_0xd04b72)<_0x563300)_0x29d1fd=![];if(Math[_0x4ea4ab(0x126)](_0xd04b72)*_0xb3c1e5[_0x4ea4ab(0x17a)]<_0x4a9c7e)_0x29d1fd=![];if(_0xb3c1e5['side']==_0x4ea4ab(0x109)){let _0x4581a3=config[_0x4ea4ab(0x107)]['find'](_0x3659e6=>_0x3659e6['coin']==_0xb3c1e5['coin']);if(_0x4581a3['offset']>0x0){if(Math['abs'](_0xd04b72)>_0xb3c1e5[_0x4ea4ab(0x1eb)]-_0x4581a3[_0x4ea4ab(0x14f)])_0x29d1fd=![];}else{if(Math[_0x4ea4ab(0x126)](_0xd04b72)>_0xb3c1e5[_0x4ea4ab(0x1eb)])_0x29d1fd=![];}}if(_0xb3c1e5[_0x4ea4ab(0x122)]=='buy'){let _0x1eed94=config[_0x4ea4ab(0x107)][_0x4ea4ab(0x26f)](_0x5276f0=>_0x5276f0[_0x4ea4ab(0x1e1)]==config['basecoin']),_0x462341=currentCoins[_0x4ea4ab(0x26f)](_0x50dee0=>_0x50dee0[_0x4ea4ab(0x1e1)]==config[_0x4ea4ab(0x273)]);if(_0x1eed94[_0x4ea4ab(0x14f)]>0x0){if(Math[_0x4ea4ab(0x126)](_0xd04b72)*_0xb3c1e5[_0x4ea4ab(0x17a)]>_0x462341[_0x4ea4ab(0x1eb)]-_0x1eed94[_0x4ea4ab(0x14f)])_0x29d1fd=![];}else{if(Math[_0x4ea4ab(0x126)](_0xd04b72)*_0xb3c1e5[_0x4ea4ab(0x17a)]>_0x462341[_0x4ea4ab(0x1eb)])_0x29d1fd=![];}}return _0x29d1fd;}async function getBalances(_0x4d1749=!![]){const _0x3b7b30=_0x52254e;let _0x5da180=0x0,_0x14eb7e;const _0x2c8ba7=config[_0x3b7b30(0x274)];if(config[_0x3b7b30(0x25d)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x2529f5=>{const _0x1bd02a=_0x3b7b30;if(_0x2529f5[_0x1bd02a(0x1e1)]!=config[_0x1bd02a(0x273)]){let _0x56efaf=global[_0x1bd02a(0x11d)][noslash(_0x2529f5[_0x1bd02a(0x1ed)])];_0x14eb7e=_0x2529f5[_0x1bd02a(0x1b4)]?0x1/_0x56efaf:_0x56efaf;}else _0x14eb7e=0x1;let _0x266afa=_0x2529f5[_0x1bd02a(0x1eb)]*_0x14eb7e;_0x5da180+=_0x266afa,_0x2529f5[_0x1bd02a(0x17a)]=formatResult(Number(_0x14eb7e),0x8),_0x2529f5['value']=_0x266afa;}),currentCoins[_0x3b7b30(0x205)](_0x2f415c=>{const _0x491d97=_0x3b7b30;let _0x139553=config[_0x491d97(0x107)][_0x491d97(0x26f)](_0x4750d8=>_0x4750d8[_0x491d97(0x1e1)]==_0x2f415c[_0x491d97(0x1e1)]),_0x340a67=Number(_0x139553[_0x491d97(0x17c)]),_0x2beb96=_0x2f415c[_0x491d97(0x1b3)]/_0x5da180*0x64,_0x4c8fde=_0x340a67*_0x5da180/0x64/_0x2f415c['last']-_0x2f415c[_0x491d97(0x1eb)];_0x2f415c[_0x491d97(0x17c)]=formatResult(_0x2beb96,0x3),_0x2f415c[_0x491d97(0x203)]=formatResult(_0x340a67,0x3),_0x2f415c[_0x491d97(0x113)]=formatResult(_0x4c8fde,0x8),_0x2f415c['side']='',_0x2f415c[_0x491d97(0x214)]=![];if(_0x2f415c['coin']!=config[_0x491d97(0x273)]){if(_0x2f415c[_0x491d97(0x17c)]>_0x340a67)_0x2f415c[_0x491d97(0x122)]=_0x491d97(0x109),_0x2f415c[_0x491d97(0x214)]=checkMinimums(_0x2f415c);else _0x2f415c[_0x491d97(0x17c)]<_0x340a67&&(_0x2f415c[_0x491d97(0x122)]=_0x491d97(0x1ac),_0x2f415c['valid']=checkMinimums(_0x2f415c));}_0x2f415c[_0x491d97(0x26b)]=_0x2f415c['distribution']/_0x2f415c[_0x491d97(0x203)]-0x1;if(_0x2f415c[_0x491d97(0x22a)]=='filled'||_0x2f415c[_0x491d97(0x22a)]=='canceled')_0x2f415c[_0x491d97(0x22a)]=_0x491d97(0x13c);}),currentCoins['sort']((_0x36359f,_0x29e842)=>_0x36359f['delta']<_0x29e842[_0x3b7b30(0x26b)]?0x1:_0x29e842[_0x3b7b30(0x26b)]<_0x36359f[_0x3b7b30(0x26b)]?-0x1:0x0);const _0x51b82f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x51b82f[_0x3b7b30(0x12a)],'usd':_0x51b82f[_0x3b7b30(0x23a)],'portfolio':JSON[_0x3b7b30(0x228)](currentCoins),'threshold':_0x2c8ba7},proxyEmit(_0x3b7b30(0x104),{'serverversion':serverversion,'balances':lastBalances});if(_0x4d1749){if(config[_0x3b7b30(0x25d)])headlessMode({'portfolio':currentCoins,'threshold':_0x2c8ba7});else{if(lockOrders==ORDERS[_0x3b7b30(0x16d)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2c8ba7});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5a708a=getNormalizedPerformance();getStartingBalances(_0x5a708a),emitPerformance(_0x5a708a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x22af93=getNormalizedPerformance();emitPerformance(_0x22af93),getStartingBalances(_0x22af93),logger[_0x3b7b30(0x1e8)](_0x3b7b30(0x131));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x268d37=_0x52254e;if(!lastBalances)return;let _0x275ffa=[],_0x564e8e,_0x2a9abc=JSON[_0x268d37(0x169)](lastBalances[_0x268d37(0x107)]);_0x2a9abc[_0x268d37(0x27b)]((_0x5d2fb4,_0x856aa7)=>_0x5d2fb4[_0x268d37(0x1e1)]>_0x856aa7[_0x268d37(0x1e1)]?0x1:_0x856aa7[_0x268d37(0x1e1)]>_0x5d2fb4['coin']?-0x1:0x0),_0x2a9abc[_0x268d37(0x205)](_0x4246b5=>{const _0x440183=_0x268d37;let _0x273ecf={'coin':_0x4246b5[_0x440183(0x1e1)],'number':_0x4246b5['number'],'price':_0x4246b5[_0x440183(0x17a)]};_0x275ffa[_0x440183(0x277)](_0x273ecf);});const _0x2cfcee=await getFiat();_0x564e8e={'date':lastBalances[_0x268d37(0x1e7)][_0x268d37(0x21f)]('\x20')[0x0],'eur':_0x2cfcee[_0x268d37(0x12a)],'usd':_0x2cfcee[_0x268d37(0x23a)],'coins':_0x275ffa};let _0x52c49f=dbPerformance[_0x268d37(0x1e6)](_0x268d37(0x1d2))[_0x268d37(0x26f)]({'date':_0x564e8e[_0x268d37(0x212)]})[_0x268d37(0x1b3)]();_0x52c49f?_0x564e8e[_0x268d37(0x212)]!=config['startdate']&&dbPerformance[_0x268d37(0x1e6)](_0x268d37(0x1d2))[_0x268d37(0x26f)]({'date':_0x564e8e[_0x268d37(0x212)]})[_0x268d37(0x250)](_0x564e8e)[_0x268d37(0x254)]():dbPerformance[_0x268d37(0x1e6)]('data')[_0x268d37(0x277)](_0x564e8e)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1ae95a=_0x52254e;let _0x1a8845=[];if(dbPerformance[_0x1ae95a(0x110)](_0x1ae95a(0x1d2))[_0x1ae95a(0x1b3)]()){let _0x3e794e=dbPerformance[_0x1ae95a(0x1e6)](_0x1ae95a(0x1d2))[_0x1ae95a(0x16e)]()['filter'](_0x3ef368=>{const _0xd46d82=_0x1ae95a;if(_0x3ef368[_0xd46d82(0x187)][_0xd46d82(0x251)]==0x0)return![];else return!![];})[_0x1ae95a(0x145)](_0x1ae95a(0x212))['value'](),_0x2deae1=[...config[_0x1ae95a(0x143)]];_0x2deae1['sort']((_0x2fbea4,_0x1c7a38)=>_0x2fbea4['date']>_0x1c7a38[_0x1ae95a(0x212)]?-0x1:_0x1c7a38[_0x1ae95a(0x212)]>_0x2fbea4[_0x1ae95a(0x212)]?0x1:0x0);let _0x561a1a=0x1,_0xbcc904=[],_0x1ac892=0x0;_0x3e794e[_0x1ae95a(0x284)]()[_0x1ae95a(0x1b4)]()[_0x1ae95a(0x205)]((_0x46ea86,_0x234d14)=>{const _0x2025b1=_0x1ae95a;if(_0x2deae1[_0x1ac892]){if(_0x3e794e[_0x3e794e[_0x2025b1(0x251)]-_0x234d14]&&_0x2deae1[_0x1ac892][_0x2025b1(0x212)]==_0x3e794e[_0x3e794e[_0x2025b1(0x251)]-_0x234d14]['date']){if(_0x234d14<_0x3e794e[_0x2025b1(0x251)]){let _0x16496f=0x0,_0x5a3f68=0x0;_0x3e794e[_0x3e794e['length']-_0x234d14][_0x2025b1(0x187)]['forEach'](_0x2800c1=>{const _0x2b5a9a=_0x2025b1;_0x5a3f68+=_0x2800c1[_0x2b5a9a(0x1eb)]*_0x2800c1[_0x2b5a9a(0x15b)];}),_0x2deae1[_0x1ac892][_0x2025b1(0x231)][_0x2025b1(0x205)](_0x3a0e73=>{const _0x270478=_0x2025b1;_0x16496f+=_0x3a0e73[_0x270478(0x1eb)]*_0x3a0e73['price'];}),_0x561a1a*=_0x16496f/(_0x5a3f68-_0x16496f)+0x1;}_0x1ac892++;}}let _0x521166=0x0;_0x46ea86[_0x2025b1(0x187)][_0x2025b1(0x205)](_0x143770=>{const _0x2d1761=_0x2025b1;_0x521166+=_0x143770[_0x2d1761(0x1eb)]*_0x143770[_0x2d1761(0x15b)];}),_0xbcc904[_0x3e794e[_0x2025b1(0x251)]-_0x234d14-0x1]=_0x521166*(_0x561a1a-0x1);});let _0x4d79a3=[];_0x2deae1=[...config['liquidity']]||[];let _0x339463=0x0;_0x1ac892=0x0,_0x3e794e[_0x1ae95a(0x205)]((_0x11808c,_0xc64071)=>{const _0x5d536d=_0x1ae95a;if(_0x2deae1[_0x1ac892]){const _0x51cf67=fns[_0x5d536d(0x169)](_0x2deae1[_0x1ac892]['date'],'yyyy/MM/dd',new Date()),_0x24e8a0=fns[_0x5d536d(0x169)](_0x11808c[_0x5d536d(0x212)],_0x5d536d(0x1da),new Date());if(fns[_0x5d536d(0x215)](_0x51cf67,_0x24e8a0)){let _0x4b8075=0x0;_0x2deae1[_0x1ac892][_0x5d536d(0x231)][_0x5d536d(0x205)](_0xfac7a7=>{const _0x30cf3f=_0x5d536d;!_0x4d79a3[_0xfac7a7[_0x30cf3f(0x1e1)]]?_0x4d79a3[_0xfac7a7['coin']]=_0xfac7a7[_0x30cf3f(0x1eb)]:(_0x4b8075=_0x4d79a3[_0xfac7a7[_0x30cf3f(0x1e1)]],_0x4d79a3[_0xfac7a7['coin']]+=_0xfac7a7[_0x30cf3f(0x1eb)]);const _0x1f2bf6=_0x11808c[_0x30cf3f(0x187)][_0x30cf3f(0x26f)](_0x463286=>_0x463286[_0x30cf3f(0x1e1)]==_0xfac7a7['coin']);(!_0x1f2bf6||_0x1f2bf6[_0x30cf3f(0x1eb)]==0x0)&&(_0x339463+=(-_0xfac7a7[_0x30cf3f(0x1eb)]-_0x4b8075)*_0xfac7a7[_0x30cf3f(0x15b)]);}),_0x1ac892++;}}_0x11808c[_0x5d536d(0x187)][_0x5d536d(0x205)]((_0x373512,_0x4af196)=>{const _0x138cdf=_0x5d536d;_0x4d79a3[_0x373512[_0x138cdf(0x1e1)]]&&(_0x373512[_0x138cdf(0x230)]=_0x4d79a3[_0x373512[_0x138cdf(0x1e1)]]);}),_0x1a8845['push']({'date':_0x11808c['date'],'eur':_0x11808c[_0x5d536d(0x12a)],'usd':_0x11808c[_0x5d536d(0x23a)],'offset':_0xbcc904[_0xc64071],'netoffset':_0x339463,'coins':_0x11808c['coins']});});}return _0x1a8845;}function emitPerformance(_0x4c129e){const _0x34f15d=_0x52254e;_0x4c129e['length']!==0x0?(proxyEmit(_0x34f15d(0x1df),_0x4c129e),lastPerformanceEmitted=getDate()):proxyEmit(_0x34f15d(0x1df),[]);}function getPerf(_0x14d5e3,_0x2b84aa){const _0x3df74f=_0x52254e;let _0x2c085a=0x0,_0xaa05cb=0x0,_0x4b1ee9=0x0;_0x14d5e3[_0x3df74f(0x187)][_0x3df74f(0x205)](_0x44518b=>{const _0x4e6306=_0x3df74f;_0x2c085a+=_0x44518b[_0x4e6306(0x1eb)]*_0x44518b[_0x4e6306(0x15b)];});_0x2b84aa&&(_0x2c085a+=_0x14d5e3[_0x3df74f(0x14f)]);if(config['basecoin']===_0x3df74f(0x157)||config[_0x3df74f(0x273)]===_0x3df74f(0x253))_0xaa05cb=_0x2c085a*_0x14d5e3[_0x3df74f(0x12a)],_0x4b1ee9=_0x2c085a*_0x14d5e3[_0x3df74f(0x23a)];else{if(usdBasecoins[_0x3df74f(0x191)](config['basecoin']))_0xaa05cb=_0x2c085a*_0x14d5e3['eur']/_0x14d5e3['usd'],_0x4b1ee9=_0x2c085a;else config[_0x3df74f(0x273)]===_0x3df74f(0x24c)&&(_0xaa05cb=_0x2c085a,_0x4b1ee9=_0x2c085a*_0x14d5e3[_0x3df74f(0x23a)]/_0x14d5e3[_0x3df74f(0x12a)]);}return[_0x2c085a,_0xaa05cb,_0x4b1ee9];}function getKPIs(_0x5eae40,_0x292223='EUR'){const _0x147442=_0x52254e,_0x4d1d32=config[_0x147442(0x273)],_0x44c1ab=lastBalances,_0x2ca455=currentCoins,_0x5c678a=getNormalizedPerformance(),_0x53c555=_0x5eae40==='basecoin'?_0x4d1d32:_0x5eae40===_0x147442(0x197)||_0x5eae40===_0x147442(0x15e)?_0x292223:_0x147442(0x20e)+_0x4d1d32,_0x3c839a=_0x5eae40===_0x147442(0x119)?_0x147442(0x1c7):_0x5eae40===_0x147442(0x15e)?_0x147442(0x1c7):_0x53c555+_0x147442(0x219),_0x19ef5d=_0x5eae40===_0x147442(0x119)||_0x5eae40===_0x147442(0x15e)?_0x147442(0x1c7):_0x53c555+_0x147442(0x201);let _0x3e34a6=0x0;_0x2ca455[_0x147442(0x205)](_0x29e2c7=>{const _0x25bd0a=_0x147442;_0x3e34a6+=_0x29e2c7['number']*_0x29e2c7[_0x25bd0a(0x17a)];});if(_0x5eae40===_0x147442(0x197)||_0x5eae40===_0x147442(0x15e)){if(_0x4d1d32===_0x147442(0x157)||_0x4d1d32===_0x147442(0x253))_0x3e34a6=_0x3e34a6*(_0x292223===_0x147442(0x24c)?_0x44c1ab[_0x147442(0x12a)]:_0x44c1ab[_0x147442(0x23a)]);else{if(usdBasecoins[_0x147442(0x191)](_0x4d1d32))_0x3e34a6=_0x3e34a6*(_0x292223===_0x147442(0x24c)?_0x44c1ab[_0x147442(0x12a)]/_0x44c1ab[_0x147442(0x23a)]:0x1);else _0x4d1d32===_0x147442(0x24c)&&(_0x3e34a6=_0x3e34a6*(_0x292223===_0x147442(0x24c)?0x1:_0x44c1ab[_0x147442(0x23a)]/_0x44c1ab[_0x147442(0x12a)]));}}let _0x19330d;if(_0x3e34a6!==0x0){if(_0x5eae40==='basecoin')_0x19330d=(_0x3e34a6/startingBalances[_0x147442(0x273)]-0x1)*0x64;else{if(_0x292223===_0x147442(0x24c))_0x19330d=(_0x3e34a6/startingBalances[_0x147442(0x12a)]-0x1)*0x64;else _0x19330d=(_0x3e34a6/startingBalances[_0x147442(0x23a)]-0x1)*0x64;}let _0x37b4b2=0x0;if(startingBalances[_0x147442(0x187)])_0x2ca455[_0x147442(0x205)](_0x257944=>{const _0x3f3ddd=_0x147442;let _0x173a0=startingBalances[_0x3f3ddd(0x187)][_0x3f3ddd(0x26f)](_0x226336=>_0x226336[_0x3f3ddd(0x1e1)]===_0x257944['coin']);if(_0x173a0&&_0x173a0['coin']&&_0x257944[_0x3f3ddd(0x1eb)]!==0x0)_0x37b4b2+=_0x173a0[_0x3f3ddd(0x1eb)]*_0x257944[_0x3f3ddd(0x17a)];});let _0x29fcc2=0x0;if(_0x5c678a[_0x147442(0x251)]!==0x0){let _0x214590=_0x5c678a[_0x5c678a[_0x147442(0x251)]-0x1];_0x29fcc2=_0x214590[_0x147442(0x16a)];}_0x37b4b2-=_0x29fcc2;_0x5eae40==='net-basecoin'&&(_0x19330d=(_0x3e34a6-_0x37b4b2)/startingBalances[_0x147442(0x273)]*0x64,_0x3e34a6=_0x3e34a6-_0x37b4b2);if(_0x5eae40===_0x147442(0x15e)){let _0x5366bb=_0x292223===_0x147442(0x24c)?startingBalances[_0x147442(0x12a)]:startingBalances[_0x147442(0x23a)];if(_0x4d1d32===_0x147442(0x157)||_0x4d1d32==='ETH')_0x37b4b2=_0x292223===_0x147442(0x24c)?_0x37b4b2*_0x44c1ab[_0x147442(0x12a)]:_0x37b4b2*_0x44c1ab['usd'];else{if(usdBasecoins[_0x147442(0x191)](_0x4d1d32))_0x37b4b2=_0x292223===_0x147442(0x24c)?_0x37b4b2*_0x44c1ab['eur']/_0x44c1ab[_0x147442(0x23a)]:_0x37b4b2;else _0x4d1d32===_0x147442(0x24c)&&(_0x37b4b2=_0x292223===_0x147442(0x24c)?_0x37b4b2:_0x37b4b2*_0x44c1ab['usd']/_0x44c1ab['eur']);}_0x19330d=(_0x3e34a6-_0x37b4b2)/_0x5366bb*0x64,_0x3e34a6=_0x3e34a6-_0x37b4b2;}if(_0x19330d){if(_0x19330d<0x64)_0x19330d=_0x19330d[_0x147442(0x245)](0x2);else{if(_0x19330d<0x3e8)_0x19330d=_0x19330d[_0x147442(0x245)](0x1);else _0x19330d=_0x19330d[_0x147442(0x245)](0x0);}}else _0x19330d=Number('0')[_0x147442(0x245)](0x2);if(_0x3e34a6){if(Math['abs'](_0x3e34a6)<0.000001)_0x3e34a6=_0x3e34a6['toFixed'](0x2);else{if(Math[_0x147442(0x126)](_0x3e34a6)<0.1)_0x3e34a6=_0x3e34a6['toFixed'](0x6);else{if(Math['abs'](_0x3e34a6)<0x1)_0x3e34a6=_0x3e34a6[_0x147442(0x245)](0x5);else{if(Math[_0x147442(0x126)](_0x3e34a6)<0xa)_0x3e34a6=_0x3e34a6[_0x147442(0x245)](0x4);else{if(Math[_0x147442(0x126)](_0x3e34a6)<0x64)_0x3e34a6=_0x3e34a6[_0x147442(0x245)](0x3);else{if(Math[_0x147442(0x126)](_0x3e34a6)<0x3e8)_0x3e34a6=_0x3e34a6[_0x147442(0x245)](0x2);else _0x3e34a6=_0x3e34a6['toFixed'](0x2);}}}}}}else _0x3e34a6=Number('0')[_0x147442(0x245)](0x2);}else _0x19330d=Number('0')[_0x147442(0x245)](0x2);return{'value':_0x3e34a6,'change':_0x19330d,'leftTxt':_0x3c839a,'rightTxt':_0x19ef5d};}async function getStartingBalances(_0x4a846d,_0x12956c=!![]){const _0x5c4bfc=_0x52254e;if(_0x4a846d[_0x5c4bfc(0x251)]!==0x0){const [_0x97f3b7,_0x238fe5,_0x1c9e8c]=getPerf(_0x4a846d[0x0],!![]);let _0xb31c0=[];config[_0x5c4bfc(0x107)]['forEach'](_0x3d5e36=>{const _0x422f2f=_0x5c4bfc;let _0x291fd5=0x0,_0x516eae;config['liquidity'][_0x422f2f(0x205)](_0x42b052=>{const _0x3b5586=_0x422f2f;let _0x4d6e6a=_0x42b052[_0x3b5586(0x231)][_0x3b5586(0x26f)](_0x10375d=>_0x10375d['coin']==_0x3d5e36[_0x3b5586(0x1e1)]);if(_0x4d6e6a){_0x291fd5+=_0x4d6e6a['number'];if(!_0x516eae)_0x516eae=_0x4d6e6a[_0x3b5586(0x15b)];}}),_0xb31c0[_0x422f2f(0x277)]({'coin':_0x3d5e36['coin'],'number':_0x291fd5,'initialprice':_0x516eae});});const _0x49ac39={'basecoin':_0x97f3b7,'eur':_0x238fe5,'usd':_0x1c9e8c,'coins':_0xb31c0};if(_0x12956c)proxyEmit('starting-balances',_0x49ac39);startingBalances=_0x49ac39;}}function headlessMode(_0x1bfa06){const _0x2d0b1a=_0x52254e;let _0x27142b=_0x1bfa06[_0x2d0b1a(0x107)],_0x1a3fe7=_0x1bfa06[_0x2d0b1a(0x274)],_0x51c877=[];for(let _0x4a1cfd of _0x27142b){if(_0x4a1cfd[_0x2d0b1a(0x1e1)]!=config[_0x2d0b1a(0x273)]){if(_0x4a1cfd[_0x2d0b1a(0x26b)]>=_0x1a3fe7/0x64){if(_0x4a1cfd[_0x2d0b1a(0x214)])_0x51c877['push'](_0x4a1cfd);}else{if(_0x4a1cfd[_0x2d0b1a(0x26b)]<=-_0x1a3fe7/0x64){if(_0x4a1cfd[_0x2d0b1a(0x214)])_0x51c877[_0x2d0b1a(0x277)](_0x4a1cfd);}}}}_0x51c877[_0x2d0b1a(0x251)]>0x0&&placeOrder(_0x51c877);}function notifyBalance(_0x56391d){const _0x5ceb83=_0x52254e;let _0x5d590c=_0x56391d['portfolio'],_0xd9f2b6=_0x56391d['threshold'],_0xca5902=[];for(let _0x501dee of _0x5d590c){if(_0x501dee[_0x5ceb83(0x1e1)]!=config[_0x5ceb83(0x273)]){if(_0x501dee[_0x5ceb83(0x26b)]>=_0xd9f2b6/0x64){if(_0x501dee[_0x5ceb83(0x214)])_0xca5902[_0x5ceb83(0x277)](_0x501dee);}else{if(_0x501dee[_0x5ceb83(0x26b)]<=-_0xd9f2b6/0x64){if(_0x501dee[_0x5ceb83(0x214)])_0xca5902[_0x5ceb83(0x277)](_0x501dee);}}}}if(_0xca5902['length']>0x0){let _0x55941f=_0xca5902[_0x5ceb83(0x279)](_0x2c9187=>_0x2c9187[_0x5ceb83(0x1e1)]);_0x55941f['sort']();let _0x3ef88e=_0x55941f[_0x5ceb83(0x23f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5ceb83(0x288),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x3ef88e;}}function symbolToCoin(_0x48d2f6){const _0x49b122=_0x52254e;let _0x58abe8;if(_0x48d2f6[_0x49b122(0x191)]('/'+config[_0x49b122(0x273)]))_0x58abe8=_0x48d2f6[_0x49b122(0x10d)]('/'+config[_0x49b122(0x273)],'');if(_0x48d2f6[_0x49b122(0x191)](config[_0x49b122(0x273)]+'/'))_0x58abe8=_0x48d2f6['replace'](config[_0x49b122(0x273)]+'/','');return _0x58abe8;}async function unlockOrders(){const _0x2d6f84=_0x52254e;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x2d6f84(0x1e8)](_0x2d6f84(0x12f)),lockOrders=ORDERS[_0x2d6f84(0x270)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x139681=await getCoins();[currentCoins,currentCoinsAll]=_0x139681,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x2d6f84(0x206));}}async function validateOrders(_0x483b3a){const _0x98902a=_0x52254e;if(_0x483b3a)validateOrdersState=_0x483b3a;logger['debug'](_0x98902a(0x289)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x98902a(0x225):_0x98902a(0x21e)));let _0x4139a9=[],_0x348691=config[_0x98902a(0x146)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x98902a(0x286)])return;logger[_0x98902a(0x1e8)](_0x98902a(0x1d5)+validateOrdersState),lastOrders[_0x98902a(0x205)](_0x2bd4e1=>{const _0xd6248d=_0x98902a;let _0x25b814=![];_0x2bd4e1['filled']>0x0&&(_0x25b814=!![]),_0x4139a9[_0xd6248d(0x277)](_0x25b814),_0x25b814&&config['ordertype']!=_0xd6248d(0x218)&&logHistory('order','Order\x20filled:\x20'+_0x2bd4e1[_0xd6248d(0x1ed)]+'\x20'+_0x2bd4e1[_0xd6248d(0x122)]+'\x20#'+formatResult(_0x2bd4e1[_0xd6248d(0x20d)],0x8)+'\x20@'+formatResult(_0x2bd4e1[_0xd6248d(0x15b)],0x8));}),_0x4139a9[_0x98902a(0x205)]((_0xb3ddb6,_0x497f4e)=>{const _0x29adc1=_0x98902a;if(_0xb3ddb6)lastOrders[_0x29adc1(0x25c)](_0x497f4e,0x1);}),persistOpenOrders(lastOrders);const _0x131b0d=coolingDown?_0x98902a(0x22d):_0x98902a(0x20f);if(validateOrdersState=='initial'){validateOrdersState=_0x98902a(0x123);if(_0x4139a9[_0x98902a(0x191)](![])){if(config['ordertype']==_0x98902a(0x218)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x98902a(0x123)){if(_0x4139a9[_0x98902a(0x191)](![])){}else{if(allOrdersPlaced){if(config[_0x98902a(0x146)]==_0x98902a(0x218)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x98902a(0x21a))_0x4139a9[_0x98902a(0x191)](![])&&(config[_0x98902a(0x146)]==_0x98902a(0x218)?logHistory(_0x98902a(0x108),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x98902a(0x1ff)](_0x348691*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x131b0d):(await cancelOrders(),logHistory(_0x98902a(0x108),_0x98902a(0x117)+Math['round'](_0x348691*validateOrderInterval/0xea60)+_0x98902a(0x111)+_0x131b0d))),await unlockOrders();else{if(validateOrdersState==_0x98902a(0x12b)){if(config['ordertype']!=_0x98902a(0x218))logHistory(_0x98902a(0x108),_0x98902a(0x20b)+_0x131b0d);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x55254b=>{const _0x14a492=_0x12be;try{const _0x8ccf44=await exchange[_0x14a492(0x11b)](_0x55254b[_0x14a492(0x18c)],_0x55254b[_0x14a492(0x1ed)]);}catch(_0x4a4252){if(_0x4a4252[_0x14a492(0x128)]()[_0x14a492(0x191)]('OrderNotFound')){}else await handleError(_0x4a4252,_0x14a492(0x1f7));}});}async function initCoinResults(_0x586b79){const _0xcbb7e=_0x52254e;_0x586b79?logger[_0xcbb7e(0x1e8)]('Resetting\x20coin\x20results:\x20'+_0x586b79):logger[_0xcbb7e(0x1e8)]('Initializing\x20coin\x20results'),config[_0xcbb7e(0x107)][_0xcbb7e(0x205)](_0x4adae4=>{const _0x195264=_0xcbb7e;if(!_0x4adae4['excluded']&&_0x4adae4['coin']!=config['basecoin']){const _0x36f46d=currentCoins['find'](_0x5c643d=>_0x5c643d[_0x195264(0x1e1)]==_0x4adae4[_0x195264(0x1e1)]),_0x89be51=global['ticker'][noslash(_0x4adae4[_0x195264(0x1ed)])];let _0x205aa6=_0x36f46d?_0x36f46d[_0x195264(0x1eb)]:null,_0x429ba8=_0x4adae4[_0x195264(0x1b4)]?0x1/_0x89be51:_0x89be51,_0x124702;config[_0x195264(0x143)][_0x195264(0x205)](_0x4d64d6=>{const _0x2e4ae0=_0x195264;!_0x124702&&(_0x124702=_0x4d64d6['changes']['find'](_0x1815bc=>_0x1815bc[_0x2e4ae0(0x1e1)]==_0x4adae4[_0x2e4ae0(0x1e1)]),_0x124702&&(_0x205aa6=_0x124702[_0x2e4ae0(0x1eb)],_0x429ba8=_0x124702[_0x2e4ae0(0x15b)]));});let _0x48c766=dbCoinResults[_0x195264(0x1e6)](_0x195264(0x187))[_0x195264(0x26f)]({'coin':_0x4adae4[_0x195264(0x1e1)]})[_0x195264(0x1b3)]();if(!_0x48c766){const _0x1d714f={'coin':_0x4adae4[_0x195264(0x1e1)],'number':_0x205aa6,'breakeven':_0x429ba8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x195264(0x1e6)](_0x195264(0x187))[_0x195264(0x277)](_0x1d714f)[_0x195264(0x254)]();}else{if(_0x586b79&&_0x4adae4[_0x195264(0x1e1)]==_0x586b79){const _0xe7e981={'coin':_0x4adae4['coin'],'number':_0x205aa6,'breakeven':_0x429ba8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x195264(0x1e6)]('coins')[_0x195264(0x26f)]({'coin':_0x4adae4[_0x195264(0x1e1)]})[_0x195264(0x250)](_0xe7e981)['write']();}}}});}async function updateCoinResults(_0x1fd19d,_0x187b82=![]){const _0x53a3b2=_0x52254e;let _0x50b49d,_0x38ff53,_0x2bc1ae,_0x592e0d,_0xce7831,_0xfbfd15,_0x31b360=dbCoinResults[_0x53a3b2(0x1e6)](_0x53a3b2(0x187))['find']({'coin':_0x1fd19d['coin']})[_0x53a3b2(0x1b3)](),_0x1fa527=![];Object['entries'](_0x31b360)[_0x53a3b2(0x205)](([_0x44929e,_0x14826b])=>{if(_0x14826b==null)_0x1fa527=!![];});(!_0x31b360||_0x1fa527)&&(await initCoinResults(_0x1fd19d['coin']),_0x31b360=dbCoinResults[_0x53a3b2(0x1e6)]('coins')[_0x53a3b2(0x26f)]({'coin':_0x1fd19d['coin']})[_0x53a3b2(0x1b3)]());_0x1fd19d[_0x53a3b2(0x1b4)]&&(_0xfbfd15={'filled':_0x1fd19d[_0x53a3b2(0x20d)]*_0x1fd19d['price'],'amount':_0x1fd19d[_0x53a3b2(0x20d)]*_0x1fd19d[_0x53a3b2(0x15b)],'side':_0x1fd19d[_0x53a3b2(0x122)]==_0x53a3b2(0x109)?'buy':_0x53a3b2(0x109),'price':0x1/_0x1fd19d['price']},_0x1fd19d={..._0x1fd19d,..._0xfbfd15});_0x187b82?_0x38ff53=_0x1fd19d[_0x53a3b2(0x122)]==_0x53a3b2(0x1ac)?_0x31b360[_0x53a3b2(0x1eb)]+_0x1fd19d['filled']:_0x31b360[_0x53a3b2(0x1eb)]-_0x1fd19d[_0x53a3b2(0x20d)]:_0x38ff53=await getCoinNumber(_0x1fd19d[_0x53a3b2(0x1e1)]);if(_0x1fd19d[_0x53a3b2(0x220)]&&_0x1fd19d[_0x53a3b2(0x220)][_0x53a3b2(0x162)]==config[_0x53a3b2(0x273)])_0x50b49d=_0x1fd19d[_0x53a3b2(0x220)]['cost'];else{if(_0x1fd19d['fee']&&_0x1fd19d['fee']['currency']=='BNB'&&!_0x187b82)_0x50b49d=_0x1fd19d[_0x53a3b2(0x220)][_0x53a3b2(0x25f)]*global[_0x53a3b2(0x11d)][_0x53a3b2(0x195)+config[_0x53a3b2(0x273)]];else _0x50b49d=defaultFee*_0x1fd19d[_0x53a3b2(0x20d)]*_0x1fd19d[_0x53a3b2(0x15b)];}_0x1fd19d['side']==_0x53a3b2(0x1ac)?(_0x2bc1ae=_0x38ff53!=0x0?(_0x31b360['breakeven']*_0x31b360[_0x53a3b2(0x1eb)]+_0x1fd19d[_0x53a3b2(0x15b)]*(_0x38ff53-_0x31b360[_0x53a3b2(0x1eb)])+_0x50b49d)/_0x38ff53:0x0,_0x592e0d=_0x31b360[_0x53a3b2(0x1a4)]):(_0x2bc1ae=_0x38ff53!=0x0?(_0x31b360[_0x53a3b2(0x147)]*_0x31b360[_0x53a3b2(0x1eb)]-_0x1fd19d['price']*(_0x31b360[_0x53a3b2(0x1eb)]-_0x38ff53)+_0x50b49d)/_0x38ff53:0x0,_0x592e0d=_0x31b360[_0x53a3b2(0x1a4)]+(_0x1fd19d[_0x53a3b2(0x15b)]-_0x31b360[_0x53a3b2(0x147)])*_0x1fd19d[_0x53a3b2(0x20d)]);_0xce7831=(_0x1fd19d[_0x53a3b2(0x15b)]-_0x2bc1ae-_0x50b49d/_0x1fd19d[_0x53a3b2(0x20d)])*_0x38ff53;let _0x436f48={'coin':_0x1fd19d[_0x53a3b2(0x1e1)],'number':_0x38ff53,'breakeven':formatResult(_0x2bc1ae,0x8),'realized':formatResult(_0x592e0d,0x8),'unrealized':formatResult(_0xce7831,0x8),'fees':formatResult(_0x31b360[_0x53a3b2(0x21c)]+_0x50b49d,0x8),'sells':_0x1fd19d[_0x53a3b2(0x122)]==_0x53a3b2(0x109)?_0x31b360['sells']+0x1:_0x31b360[_0x53a3b2(0x1cb)],'buys':_0x1fd19d[_0x53a3b2(0x122)]==_0x53a3b2(0x1ac)?_0x31b360['buys']+0x1:_0x31b360[_0x53a3b2(0x10f)]};dbCoinResults[_0x53a3b2(0x1e6)](_0x53a3b2(0x187))[_0x53a3b2(0x26f)]({'coin':_0x1fd19d[_0x53a3b2(0x1e1)]})[_0x53a3b2(0x250)](_0x436f48)['write']();if(!_0x187b82){if(_0x1fd19d['fee']&&_0x1fd19d[_0x53a3b2(0x220)][_0x53a3b2(0x162)]=='BNB'){const _0x2b4370=currentCoins[_0x53a3b2(0x26f)](_0x3afdd9=>_0x3afdd9[_0x53a3b2(0x1e1)]==_0x53a3b2(0x195));if(_0x2b4370){let _0xcc6428=dbCoinResults[_0x53a3b2(0x1e6)](_0x53a3b2(0x187))[_0x53a3b2(0x26f)]({'coin':'BNB'})[_0x53a3b2(0x1b3)]();_0x436f48={..._0xcc6428,'number':_0x2b4370[_0x53a3b2(0x1eb)]},dbCoinResults[_0x53a3b2(0x1e6)](_0x53a3b2(0x187))[_0x53a3b2(0x26f)]({'coin':_0x53a3b2(0x195)})[_0x53a3b2(0x250)](_0x436f48)[_0x53a3b2(0x254)]();}}}}async function placeOrder(_0x16766f){const _0x506998=_0x52254e,_0x66b301=config[_0x506998(0x146)]==_0x506998(0x218)?'market':'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x506998(0x286)],allOrdersPlaced=![],validateOrdersState=_0x506998(0x230);let _0x56888c=![];lastOrders=[];for(const _0x4015f5 of _0x16766f){let _0x33f8db,_0x14dd76,_0x4c25e4,_0x5468e2,_0x10ac22,_0x2026e2=_0x4015f5[_0x506998(0x1ed)];try{const _0x3ed730=await exchange[_0x506998(0x222)](_0x2026e2);_0x33f8db=_0x4015f5[_0x506998(0x1b4)]?0x1/_0x4015f5[_0x506998(0x17a)]:_0x4015f5['last'],_0x14dd76=_0x3ed730[_0x506998(0x180)],_0x4c25e4=_0x3ed730['ask'];_0x4015f5[_0x506998(0x1b4)]?(_0x5468e2=_0x4015f5[_0x506998(0x122)]=='buy'?_0x506998(0x109):_0x506998(0x1ac),_0x10ac22=Math['abs'](_0x4015f5['trade'])/_0x33f8db):(_0x5468e2=_0x4015f5[_0x506998(0x122)],_0x10ac22=Math['abs'](_0x4015f5[_0x506998(0x113)]));_0x66b301==_0x506998(0x213)&&(config[_0x506998(0x146)]==_0x506998(0x15d)&&(_0x33f8db=_0x5468e2==_0x506998(0x1ac)?_0x14dd76:_0x4c25e4),config[_0x506998(0x146)]==_0x506998(0x12c)&&(_0x33f8db=_0x5468e2=='buy'?_0x4c25e4:_0x14dd76));_0x10ac22=formatResult(_0x10ac22,0x8),_0x33f8db=formatResult(_0x33f8db,0x8);const _0xee4da2=_0x5468e2==_0x506998(0x109)?config['emojisell']?String['fromCodePoint']('0x'+config[_0x506998(0x272)])+'\x20':'':config[_0x506998(0x1e0)]?String[_0x506998(0x103)]('0x'+config[_0x506998(0x1e0)])+'\x20':'',_0x467522=_0x66b301==_0x506998(0x218)?'Market':config[_0x506998(0x146)]=='limit-high'?'Limit\x20(high-margin)':_0x506998(0x248),_0x3f3e47=(Math[_0x506998(0x14c)](Math[_0x506998(0x13f)]()*0x35a4e900)+0x5f5e100)[_0x506998(0x128)]();lastOrders[_0x506998(0x277)]({'customId':_0x3f3e47,'symbol':_0x2026e2,'coin':_0x4015f5['coin'],'amount':_0x10ac22,'price':_0x33f8db,'side':_0x5468e2,'reverse':_0x4015f5[_0x506998(0x1b4)],'filled':0x0});if(_0x66b301==_0x506998(0x218))logHistory(_0x506998(0x16c),''+_0xee4da2+_0x467522+'\x20order:\x20'+_0x2026e2+'\x20'+_0x5468e2+'\x20#'+formatResult(_0x10ac22,0x8)+'\x20@'+formatResult(_0x33f8db,0x8));else logHistory(_0x506998(0x16c),''+_0xee4da2+_0x467522+'\x20order:\x20'+_0x2026e2+'\x20'+_0x5468e2+'\x20#'+formatResult(_0x10ac22,0x8)+'\x20@'+formatResult(_0x33f8db,0x8));const _0x3fbdce=await exchange[_0x506998(0x233)](_0x2026e2,_0x66b301,_0x5468e2,_0x10ac22,_0x33f8db);logger['debug'](_0x506998(0x163)+_0x3fbdce['id']+_0x506998(0x1c3)+_0x3f3e47);const _0x114535=lastOrders[_0x506998(0x251)]-0x1;if(_0x114535>=0x0&&lastOrders[_0x114535][_0x506998(0x262)]==_0x3f3e47){lastOrders[_0x114535][_0x506998(0x18c)]=_0x3fbdce['id'];if(_0x3fbdce[_0x506998(0x14e)])lastOrders[_0x114535][_0x506998(0x14e)]=_0x3fbdce[_0x506998(0x14e)];if(_0x3fbdce[_0x506998(0x15b)])lastOrders[_0x114535]['price']=_0x3fbdce['price'];lastOrders[_0x114535][_0x506998(0x220)]=_0x3fbdce[_0x506998(0x220)];}if(config[_0x506998(0x134)]!=0x0){let _0x3ed3f4=null;if(cooldownTracker[_0x506998(0x251)]==config[_0x506998(0x134)]-0x1)_0x3ed3f4=cooldownTracker[_0x506998(0x116)]();const _0x17d74a=getTimeStamp();cooldownTracker[_0x506998(0x277)](_0x17d74a);if(_0x3ed3f4){const _0x4b98f9=fns[_0x506998(0x283)](new Date(_0x17d74a),new Date(_0x3ed3f4));if(_0x4b98f9<cooldownInterval){logHistory(_0x506998(0x259),_0x506998(0x26c)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x506998(0x127)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x39a103){if(_0x39a103[_0x506998(0x128)]()[_0x506998(0x191)](_0x506998(0x207)))lastOrders=lastOrders[_0x506998(0x140)](_0x573680=>_0x573680[_0x506998(0x1ed)]!=_0x2026e2),logHistory(_0x506998(0x259),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2026e2),_0x56888c=!![];else{if(_0x39a103[_0x506998(0x128)]()[_0x506998(0x191)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x514353=>_0x514353[_0x506998(0x1ed)]!=_0x2026e2),logHistory(_0x506998(0x259),'Order\x20amount\x20is\x20invalid:\x20'+_0x2026e2),_0x56888c=!![];else{if(_0x39a103[_0x506998(0x128)]()[_0x506998(0x191)](_0x506998(0x1de)))lastOrders=lastOrders[_0x506998(0x140)](_0xdc8175=>_0xdc8175[_0x506998(0x1ed)]!=_0x2026e2),logHistory(_0x506998(0x259),_0x506998(0x1ee)+_0x2026e2),_0x56888c=!![];else _0x39a103[_0x506998(0x128)]()[_0x506998(0x191)](_0x506998(0x155))?(lastOrders=lastOrders[_0x506998(0x140)](_0x4de5b1=>_0x4de5b1['symbol']!=_0x2026e2),logHistory('error',_0x506998(0x13b)+_0x2026e2),_0x56888c=!![]):(lastOrders=lastOrders[_0x506998(0x140)](_0x172f2f=>_0x172f2f[_0x506998(0x1ed)]!=_0x2026e2),await handleError(_0x39a103,_0x506998(0x121),_0x2026e2));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x506998(0x251)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3c8b2b=config[_0x506998(0x146)]==_0x506998(0x218)?validateOrderTimeout*0x3c*0x3e8:config[_0x506998(0x27c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1463eb=_0x506998;validateOrders(_0x1463eb(0x21a));},_0x3c8b2b);}else unlockOrders();_0x56888c&&config[_0x506998(0x25d)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x506998(0x108),_0x506998(0x17f)));}else{if(coolingDown)!config[_0x506998(0x25d)]&&logHistory(_0x506998(0x259),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x506998(0x16d)]&&(!config[_0x506998(0x25d)]&&(config[_0x506998(0x146)]==_0x506998(0x218)?logHistory(_0x506998(0x259),_0x506998(0x11c)):logHistory(_0x506998(0x259),_0x506998(0x1a7))));}}function persistOpenOrders(_0x1983d3){const _0x47f2f2=_0x52254e,_0x203e0a={...config,'openOrders':_0x1983d3};let _0x42c4a7=dbConfig['get'](_0x47f2f2(0x105))[_0x47f2f2(0x26f)]({'botID':botID})[_0x47f2f2(0x1b3)]();_0x42c4a7&&dbConfig[_0x47f2f2(0x1e6)](_0x47f2f2(0x105))['find']({'botID':botID})['assign'](_0x203e0a)['write']();}function restoreOrders(){const _0x30e3e5=_0x52254e;let _0x22e5f2;config['openOrders']&&allOpenOrders['forEach'](_0x1ddcfd=>{const _0x3cb535=_0x12be,_0x5162a8=config[_0x3cb535(0x216)][_0x3cb535(0x26f)](_0x7e930e=>_0x7e930e[_0x3cb535(0x18c)]==_0x1ddcfd['id']);_0x5162a8&&(lastOrders['push'](_0x5162a8),_0x22e5f2=_0x1ddcfd['timestamp']);});if(lastOrders[_0x30e3e5(0x251)]>0x0){lockOrders=ORDERS[_0x30e3e5(0x286)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0xc0fdbb=new Date()['getTime'](),_0x48f64b=config[_0x30e3e5(0x146)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x30e3e5(0x27c)]*0x3c*0x3e8;if(_0x22e5f2+_0x48f64b>_0xc0fdbb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b7dd7=_0x30e3e5;validateOrders(_0x1b7dd7(0x21a));},_0x22e5f2+_0x48f64b-_0xc0fdbb);}else validateOrders(_0x30e3e5(0x21a));}}async function sendMetricsTelegram(){const _0x3a56fc=_0x52254e;if(!coinsLoaded){process[_0x3a56fc(0x18b)]({'telegrammsg':_0x3a56fc(0x1e3)},_0x11d5b7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x26a335='';if(config[_0x3a56fc(0x22b)])_0x26a335=_0x3a56fc(0x226)+config[_0x3a56fc(0x1c5)]+_0x3a56fc(0x135);else _0x26a335=_0x3a56fc(0x281)+botID+_0x3a56fc(0x135);const _0x2e91f8=getKPIs(_0x3a56fc(0x273)),_0xbddfd2=getKPIs(_0x3a56fc(0x197),config['fiat']),_0xb144e2=getKPIs(_0x3a56fc(0x119)),_0x12237d=getKPIs(_0x3a56fc(0x15e),config[_0x3a56fc(0x197)]);_0x26a335+=_0x3a56fc(0x118),_0x26a335+=_0x2e91f8['leftTxt']+_0x3a56fc(0x175)+_0x2e91f8[_0x3a56fc(0x1b3)]+'\x0a',_0x26a335+=_0x2e91f8['rightTxt']+':\x20'+_0x2e91f8[_0x3a56fc(0x1f6)]+'%\x0a',_0x26a335+=_0xbddfd2[_0x3a56fc(0x18f)]+_0x3a56fc(0x175)+_0xbddfd2[_0x3a56fc(0x1b3)]+'\x0a',_0x26a335+=_0xbddfd2[_0x3a56fc(0x287)]+':\x20'+_0xbddfd2[_0x3a56fc(0x1f6)]+'%\x0a',_0x26a335+=_0xb144e2[_0x3a56fc(0x18f)]+':\x20'+_0xb144e2[_0x3a56fc(0x1b3)]+'\x20('+config['basecoin']+')\x0a',_0x26a335+=_0xb144e2['rightTxt']+':\x20'+_0xb144e2['change']+_0x3a56fc(0x144)+config[_0x3a56fc(0x273)]+')\x0a',_0x26a335+=_0x12237d[_0x3a56fc(0x18f)]+':\x20'+_0x12237d[_0x3a56fc(0x1b3)]+'\x20('+config['fiat']+')\x0a',_0x26a335+=_0x12237d[_0x3a56fc(0x287)]+':\x20'+_0x12237d[_0x3a56fc(0x1f6)]+_0x3a56fc(0x144)+config[_0x3a56fc(0x197)]+')\x0a',_0x26a335+='</pre>',process[_0x3a56fc(0x18b)]({'telegrammsg':_0x26a335},_0x4cd467=>{});}async function sendPortfolioTelegram(){const _0x2569cf=_0x52254e;if(!coinsLoaded){process[_0x2569cf(0x18b)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2adf85=>{});return;}let _0xeb0866='';if(config[_0x2569cf(0x22b)])_0xeb0866='<b>'+config['botname']+_0x2569cf(0x182);else _0xeb0866=_0x2569cf(0x281)+botID+_0x2569cf(0x182);_0xeb0866+='<pre>',_0xeb0866+='-------------------------------\x0a',_0xeb0866+=_0x2569cf(0x258),_0xeb0866+='-------------------------------\x0a',currentCoins[_0x2569cf(0x205)](_0x595a0d=>{const _0x4d82be=_0x2569cf;_0xeb0866+=_0x595a0d['coin'][_0x4d82be(0x150)](0x7)+'|\x20'+formatPad(_0x595a0d['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x595a0d[_0x4d82be(0x203)],0x2,0x6)+'|\x20'+formatPad(_0x595a0d[_0x4d82be(0x26b)]*0x64,0x2,0x6)+'\x0a';}),_0xeb0866+=_0x2569cf(0x267),process[_0x2569cf(0x18b)]({'telegrammsg':_0xeb0866},_0x29d00e=>{});}function formatPad(_0x173522,_0x4527db,_0x57995c){const _0x4703e9=_0x52254e,_0x3e338e=formatResultString(_0x173522,_0x4527db);return _0x3e338e?_0x3e338e[_0x4703e9(0x23b)](_0x57995c):''[_0x4703e9(0x23b)](_0x57995c);}function logHistory(_0x264f84,_0x3f1c7c,_0x9c6d74=''){const _0x749413=_0x52254e;let _0x49d85a={'time':getTimeStamp(),'type':_0x264f84,'event':_0x3f1c7c};dbLogs['get'](_0x749413(0x184))[_0x749413(0x277)](_0x49d85a)[_0x749413(0x254)]();if(_0x9c6d74=='')_0x9c6d74=_0x3f1c7c;proxyEmit(_0x749413(0x152),{'log':_0x49d85a,'summary':_0x9c6d74}),process[_0x749413(0x18b)]({'telegram':{..._0x49d85a,'botname':config['botname'],'showname':config[_0x749413(0x22b)]}},_0x1c77d3=>{}),logger[_0x749413(0x1be)](''+_0x49d85a[_0x749413(0x152)]);}function emitHistory(_0x35fc94={}){const _0x1b55cd=_0x52254e;Object[_0x1b55cd(0x1dd)](_0x35fc94)[_0x1b55cd(0x251)]==0x0&&(_0x35fc94={'type':[_0x1b55cd(0x16c),_0x1b55cd(0x152)],'event':'','page':0x1});if(_0x35fc94[_0x1b55cd(0x1bc)][_0x1b55cd(0x191)]('event'))_0x35fc94[_0x1b55cd(0x1bc)]['splice'](_0x35fc94[_0x1b55cd(0x1bc)][_0x1b55cd(0x1c0)](_0x1b55cd(0x152)),0x1,'error','warning','success');if(dbLogs[_0x1b55cd(0x110)]('logs')[_0x1b55cd(0x1b3)]()){let _0x217727=dbLogs[_0x1b55cd(0x1e6)](_0x1b55cd(0x184))['filter'](_0x4ba397=>{const _0x49bffb=_0x1b55cd;if(_0x35fc94['type'][_0x49bffb(0x251)]==0x0)return![];else return _0x35fc94[_0x49bffb(0x1bc)][_0x49bffb(0x191)](_0x4ba397[_0x49bffb(0x1bc)]);})[_0x1b55cd(0x140)](_0x573b69=>{const _0x2e4cb0=_0x1b55cd;if(_0x35fc94[_0x2e4cb0(0x152)]=='')return!![];else return _0x573b69[_0x2e4cb0(0x152)][_0x2e4cb0(0x276)]()[_0x2e4cb0(0x191)](_0x35fc94[_0x2e4cb0(0x152)][_0x2e4cb0(0x276)]());})[_0x1b55cd(0x145)](_0x1b55cd(0x1e7)),_0x37e8dd=_0x217727[_0x1b55cd(0x1b3)]()['length'];_0x217727=_0x217727['reverse']()[_0x1b55cd(0x284)]((_0x35fc94[_0x1b55cd(0x1f1)]-0x1)*logPageSize,_0x35fc94['page']*logPageSize-0x1)[_0x1b55cd(0x1b4)]()[_0x1b55cd(0x1b3)](),proxyEmit(_0x1b55cd(0x1aa),{'logs':_0x217727,'total':_0x37e8dd});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4ab7e2){const _0x730466=_0x52254e;if(dbLogs[_0x730466(0x110)](_0x730466(0x184))[_0x730466(0x1b3)]()){const _0x1580b5=dbLogs[_0x730466(0x1e6)](_0x730466(0x184))[_0x730466(0x145)](_0x730466(0x1e7))['filter'](_0x3cd5cd=>{const _0x5567f8=_0x730466;return _0x3cd5cd['type']==_0x5567f8(0x16c);})[_0x730466(0x1b3)]();dbLogs['get'](_0x730466(0x184))[_0x730466(0x1d6)]()[_0x730466(0x254)](),dbLogs['get'](_0x730466(0x184))[_0x730466(0x250)](_0x1580b5)['write'](),emitHistory(_0x4ab7e2);}}async function pauseBot(_0x2e5ba6=''){const _0x43d2f2=_0x52254e,_0x25927f=new Date()[_0x43d2f2(0x221)]();if(!lastErrorShown||_0x25927f-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x25927f;!lastBotPause?(lastBotPause=_0x25927f,consecutivePauses=0x1):(_0x25927f-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x43d2f2(0x18b)]({'stop':'restart'},_0x4d94f9=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x43d2f2(0x221)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x2e5ba6)_0x2e5ba6+='\x20|\x20';logHistory(_0x43d2f2(0x259),_0x2e5ba6+_0x43d2f2(0x1fa)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5c1cc0=_0x52254e;process[_0x5c1cc0(0x18b)]({'stop':'kill'},_0x18fc7a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x531715,_0x4d5480){const _0x2515d4=_0x52254e;if(_0x531715[_0x2515d4(0x128)]()[_0x2515d4(0x191)]('API-key\x20format\x20invalid'))return logHistory(_0x2515d4(0x259),config[_0x2515d4(0x210)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x531715['toString']()[_0x2515d4(0x191)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x2515d4(0x259),config[_0x2515d4(0x210)]+_0x2515d4(0x260)),![];else{if(_0x531715['toString']()[_0x2515d4(0x191)](_0x2515d4(0x247)))return logHistory('error',config[_0x2515d4(0x210)]+_0x2515d4(0x17e)),logHistory(_0x2515d4(0x259),_0x2515d4(0x239)),![];else await handleError(_0x531715,_0x4d5480);}}}async function handleError(_0x136f43,_0x82bac5,_0x445ef6=''){const _0x1d2c49=_0x52254e,_0x2abc77=config[_0x1d2c49(0x210)]||_0x1d2c49(0x21d);if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x185)))await pauseBot(config[_0x1d2c49(0x210)]+_0x1d2c49(0x280));else{if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x149)))await pauseBot(config[_0x1d2c49(0x210)]+'\x20not\x20available');else{if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x160)))await pauseBot(config['exchange']+_0x1d2c49(0x125));else{if(_0x136f43['toString']()[_0x1d2c49(0x191)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0x1d2c49(0x1fc));else{if(_0x136f43['toString']()[_0x1d2c49(0x191)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x82bac5+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x1d2c49(0x259),_0x1d2c49(0x190)),await killBot();else{if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x1a2)))logHistory(_0x1d2c49(0x259),_0x82bac5+_0x1d2c49(0x223)),logHistory(_0x1d2c49(0x259),_0x1d2c49(0x190)),await killBot();else{if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x13a)))logHistory(_0x1d2c49(0x259),_0x82bac5+'\x20|\x20'+config['exchange']+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1d2c49(0x259),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x27a)))logHistory(_0x1d2c49(0x259),_0x82bac5+_0x1d2c49(0x1f9)+config[_0x1d2c49(0x210)]+_0x1d2c49(0x268)),logHistory(_0x1d2c49(0x259),_0x1d2c49(0x190)),await killBot();else{if(_0x136f43['toString']()[_0x1d2c49(0x191)](_0x1d2c49(0x247)))logHistory('error',_0x82bac5+_0x1d2c49(0x1f9)+config['exchange']+_0x1d2c49(0x1f5)),logHistory(_0x1d2c49(0x259),_0x1d2c49(0x190)),await killBot();else _0x136f43[_0x1d2c49(0x128)]()[_0x1d2c49(0x191)](_0x1d2c49(0x1f4))?logHistory('error',_0x82bac5+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x445ef6):(logger[_0x1d2c49(0x1be)](_0x82bac5+'\x20|\x20Error\x20details:\x20',_0x136f43),await pauseBot(_0x1d2c49(0x177)));}}}}}}}}}function formatResult(_0x4d25f7,_0x5e604a){const _0x7c86c1=_0x52254e;return parseFloat(_0x4d25f7[_0x7c86c1(0x245)](_0x5e604a));}function formatResultTruncate(_0x2f7f3c,_0x1285a1){const _0x29aedf=_0x52254e;let _0x46abce=formatResultString(_0x2f7f3c,0xa),_0x3b95e1=_0x46abce['indexOf']('.');return _0x3b95e1!=-0x1&&(_0x46abce=_0x46abce[_0x29aedf(0x284)](0x0,_0x3b95e1+_0x1285a1+0x1)),Number(_0x46abce);}function formatResultString(_0x359412,_0x433478){const _0x5a6517=_0x52254e;let _0x1f28b1;if(!(''+_0x359412)[_0x5a6517(0x191)]('e'))_0x1f28b1=+(Math['round'](_0x359412+'e+'+_0x433478)+'e-'+_0x433478);else{let _0xd40271=(''+_0x359412)[_0x5a6517(0x21f)]('e'),_0x1fd71f='';+_0xd40271[0x1]+_0x433478>0x0&&(_0x1fd71f='+'),_0x1f28b1=+(Math[_0x5a6517(0x1ff)](+_0xd40271[0x0]+'e'+_0x1fd71f+(+_0xd40271[0x1]+_0x433478))+'e-'+_0x433478);}return Number(_0x1f28b1)['toFixed'](_0x433478);}function getServerTime(){const _0xc1a12a=_0x52254e,_0x3da1e9=new Date();return _0x3da1e9[_0xc1a12a(0x138)]()+'/'+(_0x3da1e9[_0xc1a12a(0x27e)]()+0x1)[_0xc1a12a(0x128)]()['padStart'](0x2,'0')+'/'+_0x3da1e9[_0xc1a12a(0x194)]()[_0xc1a12a(0x128)]()['padStart'](0x2,'0')+'\x20'+_0x3da1e9[_0xc1a12a(0x1ab)]()['toString']()['padStart'](0x2,'0')+':'+_0x3da1e9[_0xc1a12a(0x14d)]()['toString']()[_0xc1a12a(0x23b)](0x2,'0')+':'+_0x3da1e9[_0xc1a12a(0x282)]()[_0xc1a12a(0x128)]()[_0xc1a12a(0x23b)](0x2,'0');}function getTimeStamp(){const _0x36099b=_0x52254e,_0x5ef2dd=shiftedTime();return _0x5ef2dd[_0x36099b(0x138)]()+'/'+(_0x5ef2dd['getMonth']()+0x1)[_0x36099b(0x128)]()[_0x36099b(0x23b)](0x2,'0')+'/'+_0x5ef2dd['getDate']()['toString']()[_0x36099b(0x23b)](0x2,'0')+'\x20'+_0x5ef2dd[_0x36099b(0x1ab)]()[_0x36099b(0x128)]()[_0x36099b(0x23b)](0x2,'0')+':'+_0x5ef2dd[_0x36099b(0x14d)]()[_0x36099b(0x128)]()[_0x36099b(0x23b)](0x2,'0')+':'+_0x5ef2dd['getSeconds']()[_0x36099b(0x128)]()[_0x36099b(0x23b)](0x2,'0');}function getDate(){const _0x4ad2c3=_0x52254e,_0xf35543=shiftedTime();return _0xf35543[_0x4ad2c3(0x138)]()+'/'+(_0xf35543[_0x4ad2c3(0x27e)]()+0x1)[_0x4ad2c3(0x128)]()[_0x4ad2c3(0x23b)](0x2,'0')+'/'+_0xf35543['getDate']()[_0x4ad2c3(0x128)]()[_0x4ad2c3(0x23b)](0x2,'0');}function getHour(){const _0x199ab4=_0x52254e,_0x215432=shiftedTime();return _0x215432[_0x199ab4(0x1ab)]()[_0x199ab4(0x128)]()['padStart'](0x2,'0');}function sleep(_0x515e59){return new Promise(_0x17704e=>setTimeout(_0x17704e,_0x515e59));}function shiftedTime(){const _0x2d251d=_0x52254e,_0x5a52b8=new Date();let _0x367e16=_0x5a52b8;if(config&&config[_0x2d251d(0x183)]!==0x0)_0x367e16=fns['add'](_0x5a52b8,{'hours':config['timeshift']});return _0x367e16;}function timer(_0x9a9e5f){const _0x43d06a=_0x52254e,_0x605f21=new Date();!lasttime?console[_0x43d06a(0x202)](getTimeStamp()+_0x43d06a(0x124),_0x9a9e5f,_0x605f21):console[_0x43d06a(0x202)](getTimeStamp()+_0x43d06a(0x124),_0x9a9e5f,(_0x605f21-lasttime)/0x3e8),lasttime=_0x605f21;}