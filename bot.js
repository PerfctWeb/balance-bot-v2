const _0x1b7fae=_0x3715;(function(_0x5856c5,_0x4435c9){const _0x3793e4=_0x3715,_0x592d3a=_0x5856c5();while(!![]){try{const _0x4bec73=-parseInt(_0x3793e4(0x100))/0x1+parseInt(_0x3793e4(0x170))/0x2*(parseInt(_0x3793e4(0x245))/0x3)+parseInt(_0x3793e4(0x127))/0x4+parseInt(_0x3793e4(0x1c0))/0x5+parseInt(_0x3793e4(0x1f6))/0x6+-parseInt(_0x3793e4(0x212))/0x7*(parseInt(_0x3793e4(0x120))/0x8)+-parseInt(_0x3793e4(0x17a))/0x9;if(_0x4bec73===_0x4435c9)break;else _0x592d3a['push'](_0x592d3a['shift']());}catch(_0x25534a){_0x592d3a['push'](_0x592d3a['shift']());}}}(_0x5bf4,0x77b6f));const _0x315ccb=function(){let _0x2195d0=!![];return function(_0x45d6f2,_0x2d74c9){const _0x2ff36c=_0x2195d0?function(){const _0x3ab7b8=_0x3715;if(_0x2d74c9){const _0x2adad6=_0x2d74c9[_0x3ab7b8(0x209)](_0x45d6f2,arguments);return _0x2d74c9=null,_0x2adad6;}}:function(){};return _0x2195d0=![],_0x2ff36c;};}(),_0x2a1866=_0x315ccb(this,function(){const _0x251ab3=_0x3715;return _0x2a1866[_0x251ab3(0x1c2)]()[_0x251ab3(0x19f)](_0x251ab3(0x1a0))['toString']()['constructor'](_0x2a1866)['search'](_0x251ab3(0x1a0));});_0x2a1866();'use strict';const ccxt=require('ccxt'),low=require(_0x1b7fae(0xdd)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1b7fae(0x183)),forge=require(_0x1b7fae(0x117)),util=require(_0x1b7fae(0xaf)),argv=require(_0x1b7fae(0x205))(process[_0x1b7fae(0x1eb)]['slice'](0x2))[_0x1b7fae(0x1eb)],path=require('path'),axios=require(_0x1b7fae(0x191));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1b7fae(0x105),'BUSD',_0x1b7fae(0x135),_0x1b7fae(0xf2),_0x1b7fae(0xc4),_0x1b7fae(0x19b)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1b7fae(0x193)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1b7fae(0x150)+pauseBotInterval/0xea60+_0x1b7fae(0x1a9),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x1b7fae(0x1ac))[_0x1b7fae(0x1a3)],environment=require(_0x1b7fae(0x1ac))[_0x1b7fae(0x108)]||_0x1b7fae(0xe6),botID=process[_0x1b7fae(0x1eb)][0x2]||_0x1b7fae(0x175),pattern=/^[0-9]{3}$/;!pattern[_0x1b7fae(0xd4)](botID)&&(console['log'](_0x1b7fae(0x1da)+botID+_0x1b7fae(0x16a)),killBot());const userID=process[_0x1b7fae(0x1eb)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x1b7fae(0x160),logspath=userID?_0x1b7fae(0x18f)+userID+'/':'./logs/',loggerfile=fs[_0x1b7fae(0x16b)](logspath+_0x1b7fae(0x156),{'flags':'a'});!fs[_0x1b7fae(0x1df)](configpath)&&fs[_0x1b7fae(0x1c4)](configpath);!fs[_0x1b7fae(0x1df)](logspath)&&fs[_0x1b7fae(0x1c4)](logspath);const configfile=configpath+_0x1b7fae(0x248)+botID+_0x1b7fae(0x257),logfile=configpath+_0x1b7fae(0x248)+botID+_0x1b7fae(0x1db),performancefile=configpath+_0x1b7fae(0x248)+botID+_0x1b7fae(0x1dd),coinresultsfile=configpath+_0x1b7fae(0x248)+botID+_0x1b7fae(0x10d),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x1b7fae(0x1ce),configbackuppath=configpath+_0x1b7fae(0x10e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1b7fae(0xed)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1b7fae(0xed)]({'data':[],'version':serverversion})[_0x1b7fae(0xa8)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1b7fae(0xed)]({'bot':[],'version':serverversion})[_0x1b7fae(0xa8)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1b7fae(0xed)]({'coins':[],'version':serverversion})[_0x1b7fae(0xa8)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x12a020=>{console['log'](_0x12a020);},'simple':_0x4601b5=>{const _0x3abe76=_0x1b7fae;console['log'](_0x4601b5),loggerfile[_0x3abe76(0xa8)](util[_0x3abe76(0x9d)](_0x4601b5)+'\x0a');},'full':async(_0x410c3d,_0x15c122='')=>{const _0x11920c=_0x1b7fae;let _0x5e66d9;if(config[_0x11920c(0x11e)])_0x5e66d9=getTimeStamp()+':\x20'+config[_0x11920c(0x239)]+_0x11920c(0x99)+_0x410c3d;else _0x5e66d9=getTimeStamp()+_0x11920c(0x1a7)+botID+'\x20>\x20'+_0x410c3d;console[_0x11920c(0x15e)](_0x5e66d9),loggerfile[_0x11920c(0xa8)](util['format'](_0x5e66d9)+'\x0a'),_0x15c122&&(console[_0x11920c(0x15e)](_0x15c122),loggerfile['write'](util['format'](_0x15c122)+'\x0a'));},'debug':async(_0x42a524,_0xaebc7b='')=>{const _0x3322a7=_0x1b7fae;let _0x58a8f2;if(config[_0x3322a7(0x11e)])_0x58a8f2=getTimeStamp()+':\x20'+config[_0x3322a7(0x239)]+_0x3322a7(0xac)+_0x42a524;else _0x58a8f2=getTimeStamp()+_0x3322a7(0x1a7)+botID+'\x20>\x20[DEBUG]\x20'+_0x42a524;if(debugging)console[_0x3322a7(0x15e)](_0x58a8f2);loggerfile[_0x3322a7(0xa8)](util[_0x3322a7(0x9d)](_0x58a8f2)+'\x0a');if(_0xaebc7b){if(debugging)console[_0x3322a7(0x15e)](_0xaebc7b);loggerfile[_0x3322a7(0xa8)](util[_0x3322a7(0x9d)](_0xaebc7b)+'\x0a');}}};process['on'](_0x1b7fae(0xd9),function(_0x56b483){handleError(_0x56b483,'uncaughtException');});settings[_0x1b7fae(0x1ca)]!=config['timeshift']&&updateTimeshift(settings[_0x1b7fae(0x1ca)]);settings[_0x1b7fae(0x121)]!=config['onepagemode']&&updateOnepagemode(settings[_0x1b7fae(0x121)]);(settings[_0x1b7fae(0x164)]&&!config['marketcapApi']||!settings[_0x1b7fae(0x164)]&&config[_0x1b7fae(0x164)])&&updateMarketcapApi(settings[_0x1b7fae(0x164)]);process['send']({'started':_0x1b7fae(0x1b3)},_0x536cfc=>{}),initializeProcessListeners();function proxyEmit(_0x536f25,_0x52fad6=null){process['send']({'function':_0x536f25,'args':_0x52fad6},_0x3eea5b=>{});}function initializeProcessListeners(){const _0x182469=_0x1b7fae;process['on'](_0x182469(0x98),_0x434243=>{const _0x1ef5cb=_0x182469;switch(Object[_0x1ef5cb(0x1ba)](_0x434243)[0x0]){case _0x1ef5cb(0x1ca):_0x434243[_0x1ef5cb(0x1ca)]!=undefined&&(settings[_0x1ef5cb(0x1ca)]=_0x434243[_0x1ef5cb(0x1ca)],updateTimeshift(settings[_0x1ef5cb(0x1ca)]));break;case'onepagemode':_0x434243[_0x1ef5cb(0x121)]!=undefined&&(settings[_0x1ef5cb(0x121)]=_0x434243[_0x1ef5cb(0x121)],updateOnepagemode(settings[_0x1ef5cb(0x121)]));break;case _0x1ef5cb(0x164):_0x434243['marketcapApi']!=undefined&&(settings[_0x1ef5cb(0x164)]=_0x434243[_0x1ef5cb(0x164)],updateMarketcapApi(settings['marketcapApi']));break;case _0x1ef5cb(0x11a):_0x434243[_0x1ef5cb(0x11a)]!=undefined&&(bots=JSON[_0x1ef5cb(0x221)](_0x434243[_0x1ef5cb(0x11a)]),proxyEmit(_0x1ef5cb(0x11a),bots));break;case _0x1ef5cb(0xd1):switch(_0x434243['function']){case'initclient':initclient();break;case _0x1ef5cb(0x15c):toggleBotMode();break;case _0x1ef5cb(0x1a8):emitHistory(_0x434243[_0x1ef5cb(0xa4)]);break;case _0x1ef5cb(0xbc):deleteHistoryAlerts(_0x434243['args']);break;case _0x1ef5cb(0xcd):getPortfolio(_0x434243['args']);break;case _0x1ef5cb(0x1a1):storeConfiguration(_0x434243[_0x1ef5cb(0xa4)]);break;case _0x1ef5cb(0x1fc):storeHeadless(_0x434243[_0x1ef5cb(0xa4)]);break;case'storeFiat':storeFiat(_0x434243['args']);break;case'resetHistory':resetHistory();break;case _0x1ef5cb(0x133):getStartingBalances(getNormalizedPerformance());break;case _0x1ef5cb(0x10b):placeOrder(_0x434243[_0x1ef5cb(0xa4)]);break;case _0x1ef5cb(0xf7):cancelLoading();break;case _0x1ef5cb(0x1d1):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x27d9ce=![]){const _0x436837=_0x1b7fae;logger[_0x436837(0x1f4)](_0x436837(0xf3)+(_0x27d9ce?_0x436837(0x1f7):_0x436837(0x102))+_0x436837(0x1e9)+config[_0x436837(0x246)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x27d9ce)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x436837(0x178)]!='***'){loadingProgress=0x0;_0x27d9ce&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x436837(0x21b),emittedConfiguration()),initialPerformanceStored=![]);const _0x1a389c=await getCoins();[currentCoins,currentCoinsAll]=_0x1a389c,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x436837(0x1f4)](_0x436837(0x203)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x436837(0x1ab)]==0x0&&allOpenOrders[_0x436837(0x1ab)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x2cb81c=![]){const _0x3b9663=_0x1b7fae;logger[_0x3b9663(0x1f4)](_0x3b9663(0x21d)+(_0x2cb81c?_0x3b9663(0x22f):_0x3b9663(0xe3))+_0x3b9663(0x16d)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x2cb81c){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x3b9663(0x178)]!=_0x3b9663(0x251)){loadingProgress=0x1;const _0x40c6e3=await getCoins();[currentCoins,currentCoinsAll]=_0x40c6e3,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x3b9663(0x203)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3b9663(0x1ab)]==0x0&&allOpenOrders[_0x3b9663(0x1ab)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x199000){const _0x1ea198=_0x1b7fae;let _0x38bc5a=![];if(_0x199000)_0x38bc5a=!![];let _0x3bf4d7;_0x38bc5a?_0x3bf4d7=_0x199000[_0x1ea198(0x1e0)](_0xeb2dcf=>_0xeb2dcf[_0x1ea198(0x20e)]):_0x3bf4d7=currentCoinsAll[_0x1ea198(0x1e0)](_0x14868a=>_0x14868a[_0x1ea198(0x20e)]);if(!config[_0x1ea198(0x164)]||!_0x38bc5a&&!config[_0x1ea198(0x176)]||_0x3bf4d7[_0x1ea198(0x1ab)]==0x0)return;let _0x539dc5=null;try{_0x539dc5=await axios['get'](_0x1ea198(0x202),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x3bf4d7[_0x1ea198(0x1c2)]()}});}catch(_0x65848b){_0x539dc5=null,_0x65848b['toString']()[_0x1ea198(0xcb)](_0x1ea198(0x243))?(config[_0x1ea198(0x164)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x1ea198(0x168),_0x1ea198(0x1ec))):(logHistory('error',_0x1ea198(0x17f)+schedulerInterval/(0x3c*0x3e8)+_0x1ea198(0x1a9)),logger[_0x1ea198(0x1f4)](_0x1ea198(0x1c1),_0x65848b[_0x1ea198(0x1c2)]()+_0x1ea198(0x181)+_0x65848b[_0x1ea198(0x123)]));}if(_0x539dc5){let _0x290d51=0x0;const _0x4ec719=_0x539dc5[_0x1ea198(0x122)];_0x3bf4d7[_0x1ea198(0x1c6)](_0xc1e68b=>{const _0x59c130=_0x1ea198;if(_0x4ec719[_0x59c130(0x122)][_0xc1e68b][0x0])_0x290d51+=_0x4ec719[_0x59c130(0x122)][_0xc1e68b][0x0][_0x59c130(0x18d)][_0x59c130(0x105)][_0x59c130(0x15a)];}),_0x3bf4d7[_0x1ea198(0x1c6)](_0x3e325e=>{const _0x7ef09e=_0x1ea198,_0x541853=_0x4ec719['data'][_0x3e325e][0x0]?_0x4ec719[_0x7ef09e(0x122)][_0x3e325e][0x0][_0x7ef09e(0x18d)][_0x7ef09e(0x105)][_0x7ef09e(0x15a)]:0x0;if(_0x38bc5a){const _0x6d79f4=_0x199000[_0x7ef09e(0xfa)](_0x3ece41=>_0x3ece41[_0x7ef09e(0x20e)]==_0x3e325e);_0x6d79f4&&(_0x6d79f4[_0x7ef09e(0xa7)]=_0x541853);}else{const _0x399e1c=currentCoins[_0x7ef09e(0xfa)](_0x548fc6=>_0x548fc6[_0x7ef09e(0x20e)]==_0x3e325e);_0x399e1c&&(_0x399e1c[_0x7ef09e(0xa7)]=_0x541853);const _0x3c275b=currentCoinsAll[_0x7ef09e(0xfa)](_0x33b784=>_0x33b784['coin']==_0x3e325e);_0x3c275b&&(_0x3c275b[_0x7ef09e(0xa7)]=_0x541853);}}),!_0x38bc5a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x359723=_0x1b7fae,_0x3fe470=0x2;let _0x13251e=0x0,_0x3d55de=0x0,_0x5110b4=0x0,_0x318368=0x0,_0x3e07d1=0x0;config['portfolio'][_0x359723(0x1c6)](_0x519217=>{const _0x4af788=_0x359723;if(!_0x519217['excluded']){_0x5110b4++,_0x13251e+=_0x519217[_0x4af788(0x238)];if(_0x519217[_0x4af788(0x238)]===-0x1){_0x13251e++;const _0x22e620=currentCoinsAll[_0x4af788(0xfa)](_0x3ef996=>_0x3ef996['coin']==_0x519217[_0x4af788(0x20e)]);_0x22e620&&(_0x318368+=_0x22e620['marketcap'],_0x3e07d1+=Math[_0x4af788(0xe5)](_0x22e620[_0x4af788(0xa7)]));}if(_0x519217[_0x4af788(0x238)]!==-0x1)_0x3d55de++;}});let _0x637ad3;const _0x20c439=0x64-_0x13251e,_0x314037=_0x5110b4-_0x3d55de;_0x637ad3=_0x314037===0x0?_0x13251e:Math[_0x359723(0x1a6)](0x64,_0x13251e),config['portfolio'][_0x359723(0x1c6)](_0x1ce24d=>{const _0x24f1e0=_0x359723,_0x109144=currentCoinsAll[_0x24f1e0(0xfa)](_0x5a570b=>_0x5a570b['coin']==_0x1ce24d[_0x24f1e0(0x20e)]);_0x109144&&(_0x1ce24d[_0x24f1e0(0xa7)]=_0x109144[_0x24f1e0(0xa7)]);if(!_0x1ce24d[_0x24f1e0(0x1aa)]){if(_0x637ad3<=0x64){if(_0x1ce24d[_0x24f1e0(0x238)]===-0x1){if(_0x318368!==0x0&&config[_0x24f1e0(0x176)]){if(_0x109144){if(config['marketcapEnabled']=='marketcap')_0x1ce24d['distribution']=(_0x20c439/(_0x318368/_0x109144[_0x24f1e0(0xa7)]))[_0x24f1e0(0xbe)](_0x3fe470);else config['marketcapEnabled']==_0x24f1e0(0xd2)&&(_0x1ce24d[_0x24f1e0(0x17e)]=(_0x20c439/(_0x3e07d1/Math['sqrt'](_0x109144[_0x24f1e0(0xa7)])))['toFixed'](_0x3fe470));}}}}}}),updateConfig();}function updateConfig(){const _0x39534b=_0x1b7fae;let _0x1d5a30=dbConfig[_0x39534b(0x18c)](_0x39534b(0x1b8))[_0x39534b(0xfa)]({'botID':botID})[_0x39534b(0xc1)]();_0x1d5a30&&dbConfig['get'](_0x39534b(0x1b8))[_0x39534b(0xfa)]({'botID':botID})[_0x39534b(0xee)](config)[_0x39534b(0xa8)]();}function logMemory(){const _0x4a27e0=_0x1b7fae;if(environment!=_0x4a27e0(0xb6))return;const _0x39c844=process['memoryUsage']()[_0x4a27e0(0xce)]/0x400/0x400;logger['debug']('process\x20'+process[_0x4a27e0(0x1f1)]+_0x4a27e0(0xa0)+formatResult(_0x39c844,0x1)+_0x4a27e0(0xf0));}async function startScheduler(){const _0x556fb4=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x556fb4==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3ba6e4=![]){const _0x21f747=_0x1b7fae;logger['debug'](_0x21f747(0xad));if(!_0x3ba6e4)while(lockOrders!=ORDERS[_0x21f747(0x138)]||coolingDown){await sleep(0x3e8);}process[_0x21f747(0x19e)]({'stop':_0x21f747(0x137)},_0x47ceb2=>{});}async function initExchange(_0x530ac8=config[_0x1b7fae(0x246)],_0x1b85b4=config[_0x1b7fae(0x178)],_0x4d4400=config[_0x1b7fae(0xb3)],_0x2e125b=config[_0x1b7fae(0xfc)]){const _0x2db87d=_0x1b7fae;if(exchange){logger['debug'](_0x2db87d(0x154));return;}logger[_0x2db87d(0x1f4)]('Initializing\x20exchange');!supportedExchanges()[_0x2db87d(0xcb)](_0x530ac8)&&(logHistory(_0x2db87d(0x168),_0x2db87d(0x92)+_0x530ac8+_0x2db87d(0x211)),killBot());const _0x33894c=ccxt['pro'][_0x530ac8['toLowerCase']()];exchange=new _0x33894c({'apiKey':_0x1b85b4,'secret':_0x4d4400,'options':{'defaultType':_0x2db87d(0x254)}});if(_0x2e125b)exchange[_0x2db87d(0x189)]=_0x2e125b;}function updateExchange(_0x3a725f,_0xe5e852,_0xe1dad8=null){const _0x5e7392=_0x1b7fae;exchange[_0x5e7392(0x178)]=_0x3a725f,exchange[_0x5e7392(0xb3)]=_0xe5e852,exchange[_0x5e7392(0xfc)]=_0xe1dad8,logger[_0x5e7392(0x1f4)](_0x5e7392(0x110));}function setStableCoins(){const _0x4c0104=_0x1b7fae;let _0x5d2055=config[_0x4c0104(0xf5)]==_0x4c0104(0x188)?_0x4c0104(0x188):config[_0x4c0104(0xf5)]==_0x4c0104(0xf1)?_0x4c0104(0xf1):_0x4c0104(0x128),_0x2e94c7=allSymbols[_0x4c0104(0xcb)](_0x5d2055+_0x4c0104(0x1de))?'USD':allSymbols[_0x4c0104(0xcb)](_0x5d2055+'/USDT')?'USDT':_0x4c0104(0x143),_0x47d271=allSymbols[_0x4c0104(0xcb)](_0x5d2055+'/EUR')?_0x4c0104(0x143):_0x2e94c7;enableFiatToggle=!![],_0x2e94c7=='EUR'&&(enableFiatToggle=![],storeFiat(_0x4c0104(0x143))),_0x47d271!=_0x4c0104(0x143)&&(enableFiatToggle=![],storeFiat(_0x4c0104(0x105))),stablecoins={'eur':{'coin':''+_0x5d2055+_0x47d271,'symbol':_0x5d2055+'/'+_0x47d271},'usd':{'coin':''+_0x5d2055+_0x2e94c7,'symbol':_0x5d2055+'/'+_0x2e94c7}};}async function initwsCcxt(){const _0x72d8f6=_0x1b7fae;initCycle++;const _0x5541c0=initCycle;let _0x41df1a=[];config[_0x72d8f6(0x1fb)][_0x72d8f6(0x1c6)](_0x29a322=>{const _0x5f17f8=_0x72d8f6;if(!_0x29a322[_0x5f17f8(0x1aa)]&&_0x29a322[_0x5f17f8(0x20e)]!=config[_0x5f17f8(0xf5)])_0x41df1a[_0x5f17f8(0x13c)](_0x29a322['symbol']);});if(!_0x41df1a['includes'](stablecoins[_0x72d8f6(0x1fe)]['symbol']))_0x41df1a[_0x72d8f6(0x13c)](stablecoins['eur']['symbol']);if(!_0x41df1a[_0x72d8f6(0xcb)](stablecoins['usd'][_0x72d8f6(0x134)]))_0x41df1a['push'](stablecoins[_0x72d8f6(0x1ed)][_0x72d8f6(0x134)]);if(config[_0x72d8f6(0x246)]['startsWith'](_0x72d8f6(0x20c))&&config[_0x72d8f6(0xf5)]!=_0x72d8f6(0xf1)){if(!_0x41df1a[_0x72d8f6(0xcb)]('BNB/'+config[_0x72d8f6(0xf5)]))_0x41df1a[_0x72d8f6(0x13c)]('BNB/'+config['basecoin']);}loadCoins(_0x41df1a),_0x41df1a=validateSymbols(_0x41df1a);const _0x473c39=async _0x20d80a=>{const _0x5af99c=_0x72d8f6;let _0xe416e2;try{const _0x3d60a6=await getTickers(_0x20d80a);Object[_0x5af99c(0xb1)](_0x3d60a6)[_0x5af99c(0x1c6)](_0x2e5d73=>{const _0x39176c=_0x5af99c;_0xe416e2=_0x2e5d73[0x1]['symbol'],gTicker[noslash(_0xe416e2)]=_0x2e5d73[0x1][_0x39176c(0x20a)],gChange[_0xe416e2]=_0x2e5d73[0x1][_0x39176c(0x12b)];});}catch(_0x446740){await handleError(_0x446740,_0x5af99c(0xf9),_0xe416e2);}},_0x33dd99=async _0x40fc27=>{const _0x4fb6d3=_0x72d8f6;while(initCycle==_0x5541c0){if(!botPaused)try{const _0x3eff70=await exchange[_0x4fb6d3(0x124)](_0x40fc27);gTicker[noslash(_0x3eff70[0x0][_0x4fb6d3(0x134)])]=_0x3eff70[0x0][_0x4fb6d3(0x152)];}catch(_0x29f1bf){if(!exchangeStopped)await handleError(_0x29f1bf,_0x4fb6d3(0x23f),_0x40fc27);}else await sleep(0x64);}},_0x2c94eb=async _0x4e72e2=>{const _0x4efe2a=_0x72d8f6;while(initCycle==_0x5541c0){if(!botPaused)try{const _0x35d38d=await exchange[_0x4efe2a(0x23c)](_0x4e72e2),_0x3d0b31=_0x35d38d[_0x4efe2a(0x227)]();gTicker[noslash(_0x3d0b31['symbol'])]=_0x3d0b31[_0x4efe2a(0x152)];}catch(_0x422e99){if(!exchangeStopped)await handleError(_0x422e99,_0x4efe2a(0xdb),_0x4e72e2['toString']());}else await sleep(0x64);}},_0x54166a=async _0x496849=>{const _0x5b825f=_0x72d8f6;while(initCycle==_0x5541c0){if(!botPaused){let _0x39ec6f;try{await sleep(0x3c*0x3e8);const _0x48c184=await getTickers(_0x496849);Object['entries'](_0x48c184)['forEach'](_0x294e3b=>{const _0x5d36c9=_0x3715;_0x39ec6f=_0x294e3b[0x1]['symbol'],gChange[_0x39ec6f]=_0x294e3b[0x1][_0x5d36c9(0x12b)];});}catch(_0x48a8be){if(!exchangeStopped)await handleError(_0x48a8be,_0x5b825f(0x23b),_0x39ec6f);}}else await sleep(0x64);}},_0x30d7c5=async _0x5191b4=>{const _0x9ddaf6=_0x72d8f6;while(initCycle==_0x5541c0){if(!botPaused)try{const _0x4471de=await exchange['watchOrders'](_0x5191b4);initCycle==_0x5541c0&&_0x4471de[_0x9ddaf6(0x1c6)](_0x13810f=>{updateNumberCoinsCcxt(_0x13810f);});}catch(_0x2fcc01){if(!exchangeStopped)await handleError(_0x2fcc01,_0x9ddaf6(0x1e5));}else await sleep(0x64);}};_0x473c39(_0x41df1a),_0x54166a(_0x41df1a),exchange[_0x72d8f6(0x158)]['watchTradesForSymbols']&&!(config[_0x72d8f6(0x246)]==_0x72d8f6(0x235)&&_0x41df1a['length']>0xa)?_0x2c94eb(_0x41df1a):_0x41df1a['forEach'](_0x444bad=>{_0x33dd99(_0x444bad);}),_0x41df1a[_0x72d8f6(0x1c6)](_0x584b75=>{_0x30d7c5(_0x584b75);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}function _0x5bf4(){const _0x2c968b=['-performance.json','/USD','existsSync','map','datetime','unlinkSync','event-history','differenceInSeconds','watchOrders()','recovery','Exchange\x20error\x20details:','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20exchange:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','argv','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','usd','configuration-stored','Unknown\x20error:\x20','1\x20-\x20Validate\x20orders:\x20','pid','update-liquidity','floor','debug','starting-balances','2569632gHpaji','exchange\x20reload','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','initial','ExchangeNotAvailable','portfolio','storeHeadless','recent20','eur','pki','remove','sha256','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Loading\x20completed','exchanges','yargs/yargs','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Fee\x20discount\x20refund\x20detected:\x20','getMonth','apply','last','\x20|\x20','Binance','indexOf','coin','splice','OrderNotFound','\x20exchange','2155195ylnMAG','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Set\x20lock\x20orders\x20to:\x20',')\x20known\x20order:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','realized','min','privateKeyFromPem','fetchTicker','configuration','page','Resuming\x20(','must\x20be\x20greater\x20than\x20minimum\x20amount','Error\x20in\x20testAPI():\x20','changes','parse','startdate','API-key\x20format\x20invalid','BNB','exec','join','pop','MIN_NOTIONAL','string','Cryptocom','rightTxt','Exchange','fees','Huobipro','quick','privateKey','createOrder','ordertype','Saving\x20configuration','ID:\x20','Bybit','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','slider','botname','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchTickers()','watchTradesForSymbols','valid','UNLOCKING','watchTrades()','time','Executed\x20','getCoinNumber()','status\x20code\x20401','sortBy','105675ijmQeT','exchange','writeFile','bot-','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','(see:\x20hodlerhacks.com/fix/1)','2.3.5','Error\x20occurred:\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','yyyy/MM/dd','performance','no\x20open\x20orders','***','buy','round','spot','remainingSymbols','type','-config.json','startnumber','getSeconds','NetworkError','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','added','full','Network\x20error\x20details:','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','filled','message','\x20>\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','RETRY\x20-\x20Error\x20in\x20','RateLimitExceeded','format','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20uses\x20','AuthenticationError','Bot\x20','botID','args','open','getMinutes','marketcap','write','decrypt','0\x20-\x20EXECUTION:\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20>\x20[DEBUG]\x20','Initiating\x20bot\x20restart','\x20value','util','recreateCoinResults()','entries','customId','apiSecret','-------------------------------\x0a','<b>Bot\x20','staging','canceled','\x20minutes\x20-\x20','fetchBalance()','getDate','filter','deleteHistoryAlerts','coins','toFixed','trade','Invalid\x20quantity','value','ExchangeError','limit-high','USDC','<b>','PermissionDenied','portfolio1','Waited\x20','final','isEqual','includes','Invalid\x20symbol:\x20','getPortfolio','heapUsed','fee','limit','function','marketcapsqrt','RETRY\x20-\x20Problem\x20resolved\x20after\x20','test','basecoinvalue','timeout','add','net-basecoin','uncaughtException','stringify','watchTradesForSymbols()','getFullYear','lowdb','Cex','balancing\x20resumed','fetchBalance','net-fiat','progress','complete','set','sqrt','production','secure','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','market','Resetting\x20coin\x20results:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Error\x20in\x20loadSymbols():\x20','defaults','assign','recreate','\x20MB','PAXG','USDT','Reset\x20|\x20','\x20exchange\x20error:\x20','basecoin','ask','cancelLoading','\x20/\x20','initTickers()','find','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','apiPassword','\x20>\x20details:','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20|\x20lock\x20orders:\x20','763029rPIXOG','orderstatus','no\x20exchange\x20reloaded','offset','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','USD','fromCodePoint','cancelOrders()','environment','logs',':\x20timer\x20>','placeOrder','\x20API\x20key\x20is\x20invalid','-results.json','/backup/','\x20network\x20error:\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','create','portfolio2','Stopped\x20fetching\x20balance\x20after\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','orderId','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','node-forge','Valid\x20balance\x20for\x20','cooldown','bots','ongoing','Order\x20filled:\x20','\x20orders\x20in\x20less\x20than\x20','showname','Invalid\x20balance\x20for\x20','8aJXdxJ','onepagemode','data','code','watchTrades','toLowerCase','substring','405480YbcVZA','BTC','removed','2.6.22','percentage','date','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20hour','decode64','shift','Bitget','getStartingBalances','symbol','TUSD','Portfolio\x20change\x20detected:\x20','restart','UNLOCKED','sells','emojisell','Exception\x20thrown\x20in\x20','push','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','settings','\x20:\x20','side','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Resetting\x20bot\x20history','EUR','RequestTimeout','************','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','red_yellow_blue','number','LOCKED','highest','balances','cost','2.6.23','findIndex','\x20>\x20pausing\x20bot\x20for\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','price','Unfilled\x20order(s)\x20canceled\x20after\x20','Initializing\x20exchange:\x20already\x20done','headless','/output-000.log','Pausing\x20for\x20','has','No\x20more\x20open\x20orders\x20-\x20','market_cap','cloneDeep','toggleBotMode','InvalidOrder','log','Block\x20transaction\x20detection:\x20','./config/','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fetchOpenOrders','marketcapApi','average','Limit\x20(low-margin)','abs','error','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)',',\x20must\x20be\x20a\x203\x20digit\x20number','createWriteStream','<pre>',')\x20|\x20exchange:\x20','Net\x20effect','loadSymbols()','38IGgfgF','slice','delta','event','order','001','marketcapEnabled','autoliquidity','apiKey','pro','4552560jDhNOD','padEnd','sort','limits','distribution','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','request-time','\x20-\x20','</pre>','date-fns','threshold','leftTxt','sell','\x20API\x20secret\x20is\x20invalid','ETH','password','currency','startprice','get','quote','\x20metrics:</b>\x20\x0a\x0a','./logs/','getTime','axios','random','freeze','loading-canceled','enabled','split','Market\x20&\x20symbol\x20data\x20updated','1\x20-\x20FILLED\x20known\x20order:\x20','cancel','placeOrder()','USDP','reverse','Error\x20while\x20deleting\x20files:\x20','send','search','(((.+)+)+)+$','storeConfiguration','liquidity','version','Net\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','max',':\x20Bot\x20','emitHistory','\x20minutes','excluded','length','./version.json','replace','getHours','2\x20-\x20Validate\x20orders:\x20','status','buys','bid','running','success','Market','switch-manual','none','bot','Initializing\x20coin\x20results','keys','Order\x20is\x20invalid:\x20','Symbol(s):\x20','\x20order:\x20','change24h','emojibuy','4340940pQhEQE','Error\x20details:','toString','padStart','mkdirSync','Order\x20amount\x20is\x20invalid:\x20','forEach','2.6.0','warning','change','timeshift','openOrders','fetchTickers','%\x20(','bb-secure.json','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Huobi','showConfig','amount','OnMaintenance','prevnumber','fiat','token\x20is\x20expired','breakeven','1\x20-\x20partially\x20FILLED\x20(','cancelOrder','Error:\x20Invalid\x20argument\x20','-events.json','target'];_0x5bf4=function(){return _0x2c968b;};return _0x5bf4();}async function getTickers(_0x57d9a5){const _0x210f93=_0x1b7fae;let _0x2ae756={};try{if(config[_0x210f93(0x246)]!=_0x210f93(0x22a))_0x2ae756=await exchange[_0x210f93(0x1cc)](_0x57d9a5);else for(const _0x56d5aa of _0x57d9a5){const _0x222a99=await exchange[_0x210f93(0x21a)](_0x56d5aa);_0x2ae756[_0x56d5aa]=_0x222a99;}return _0x2ae756;}catch(_0x4a82ca){throw _0x4a82ca;}}function setBlockTransactionDetection(_0x1b8f01){const _0x35d2dd=_0x1b7fae;blockTransactionDetection=_0x1b8f01,logger[_0x35d2dd(0x1f4)](_0x35d2dd(0x15f)+blockTransactionDetection);}async function detectLiquidityChange(_0x2a7fc3=0x0){const _0x17ea7f=_0x1b7fae;transactionDetectionOngoing=!![];try{const _0x45f282=await getCoins(_0x2a7fc3),[_0x10a818,_0x308f28]=_0x45f282;let _0x1ce99b=[];currentCoins[_0x17ea7f(0x1c6)](_0x2105c4=>{const _0x3d4bab=_0x17ea7f,_0x2c7f4f=_0x10a818[_0x3d4bab(0xfa)](_0x28b7e6=>_0x28b7e6[_0x3d4bab(0x20e)]==_0x2105c4[_0x3d4bab(0x20e)]);if(_0x2c7f4f){if(_0x2105c4[_0x3d4bab(0x149)]!=_0x2c7f4f[_0x3d4bab(0x149)]){let _0x2d5dda;if(_0x2105c4['coin']!=config[_0x3d4bab(0xf5)]){const _0x55f279=gTicker[noslash(_0x2105c4[_0x3d4bab(0x134)])];_0x2d5dda=_0x2105c4[_0x3d4bab(0x19c)]?0x1/_0x55f279:_0x55f279;}else _0x2d5dda=0x1;_0x1ce99b[_0x3d4bab(0x13c)]({'coin':_0x2105c4[_0x3d4bab(0x20e)],'symbol':_0x2105c4[_0x3d4bab(0x134)],'price':_0x2d5dda,'number':Number(formatResult(_0x2c7f4f[_0x3d4bab(0x149)]-_0x2105c4[_0x3d4bab(0x149)],0x8)),'basecoinvalue':_0x2d5dda*(_0x2c7f4f[_0x3d4bab(0x149)]-_0x2105c4[_0x3d4bab(0x149)])});}}});if(_0x1ce99b['length']>0x0&&!blockTransactionDetection){for(const _0x20a492 of _0x1ce99b){if(config[_0x17ea7f(0x177)]){logger[_0x17ea7f(0x1f4)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x20a492[_0x17ea7f(0xd5)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x17ea7f(0x14b)]);if(lastFees['highest']==0x0||Math[_0x17ea7f(0x167)](_0x20a492[_0x17ea7f(0xd5)])>lastFees[_0x17ea7f(0x14b)]*0x3){if(config[_0x17ea7f(0x177)]==_0x17ea7f(0x1f2)){delete _0x20a492[_0x17ea7f(0x134)],delete _0x20a492[_0x17ea7f(0xd5)];let _0x327139=[],_0x4c5327=[...config[_0x17ea7f(0x1a2)]]||[],_0x362d65=config['liquidity'];_0x4c5327[_0x17ea7f(0x17c)]((_0x3a98f2,_0x27b17e)=>_0x3a98f2[_0x17ea7f(0x12c)]>_0x27b17e[_0x17ea7f(0x12c)]?-0x1:_0x27b17e[_0x17ea7f(0x12c)]>_0x3a98f2[_0x17ea7f(0x12c)]?0x1:0x0);const _0x47929c=getDate();if(_0x4c5327[0x0]){const _0x3b2d20=fns['parse'](_0x4c5327[0x0]['date'],_0x17ea7f(0x24e),new Date()),_0x489dd2=fns['parse'](_0x47929c,_0x17ea7f(0x24e),new Date());if(fns[_0x17ea7f(0xca)](_0x3b2d20,_0x489dd2)){_0x327139=_0x4c5327[0x0][_0x17ea7f(0x220)];const _0x25b249=_0x327139[_0x17ea7f(0xfa)](_0x5538ba=>_0x5538ba['coin']==_0x20a492['coin']);_0x25b249?(_0x25b249[_0x17ea7f(0x149)]+=_0x20a492[_0x17ea7f(0x149)],_0x25b249['number']==0x0&&(_0x327139=_0x327139[_0x17ea7f(0xbb)](_0xa45c5f=>{return _0xa45c5f['coin']!=_0x20a492['coin'];}))):_0x327139[_0x17ea7f(0x13c)](_0x20a492);const _0x523e95=_0x362d65[_0x17ea7f(0xfa)](_0x37dad5=>_0x37dad5[_0x17ea7f(0x12c)]==_0x47929c);_0x523e95[_0x17ea7f(0x220)]=_0x327139;}else _0x362d65[_0x17ea7f(0x13c)]({'date':_0x47929c,'changes':[_0x20a492]});}const _0x1ccab9=_0x362d65[_0x17ea7f(0xfa)](_0x44eb89=>_0x44eb89[_0x17ea7f(0x12c)]==_0x47929c);if(_0x1ccab9){let _0x5d066e=!![];_0x1ccab9['changes'][_0x17ea7f(0x1c6)](_0x5df716=>{if(_0x5df716['number']!=0x0)_0x5d066e=![];}),_0x5d066e&&(_0x362d65=_0x362d65[_0x17ea7f(0xbb)](_0x4fb0a5=>{return _0x4fb0a5['date']!=_0x47929c;}));}let _0x510362=dbConfig['get'](_0x17ea7f(0x1b8))['find']({'botID':botID})['value']();_0x510362&&(dbConfig[_0x17ea7f(0x18c)]('bot')[_0x17ea7f(0xfa)]({'botID':botID})[_0x17ea7f(0xee)]({'liquidity':_0x362d65})['write'](),config[_0x17ea7f(0x1a2)]=_0x362d65);logHistory(_0x17ea7f(0x1b4),_0x17ea7f(0x136)+Math[_0x17ea7f(0x167)](_0x20a492['number'])+'\x20'+_0x20a492[_0x17ea7f(0x20e)]+'\x20'+(_0x20a492[_0x17ea7f(0x149)]>0x0?_0x17ea7f(0x93):_0x17ea7f(0x129))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x17ea7f(0x21b),emittedConfiguration());const _0x4a5061=getNormalizedPerformance();emitPerformance(_0x4a5061),getStartingBalances(_0x4a5061),logger[_0x17ea7f(0x1f4)](_0x17ea7f(0x104));}else config[_0x17ea7f(0x177)]==_0x17ea7f(0x1b6)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x17ea7f(0x1b4),_0x17ea7f(0x136)+Math[_0x17ea7f(0x167)](_0x20a492[_0x17ea7f(0x149)])+'\x20'+_0x20a492[_0x17ea7f(0x20e)]+'\x20'+(_0x20a492[_0x17ea7f(0x149)]>0x0?_0x17ea7f(0x93):_0x17ea7f(0x129))+_0x17ea7f(0x116))):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x20a492['number'])+'\x20'+_0x20a492[_0x17ea7f(0x20e)]+'\x20'+(_0x20a492[_0x17ea7f(0x149)]>0x0?_0x17ea7f(0x93):_0x17ea7f(0x129))+_0x17ea7f(0x1cf)));}else logger['debug'](_0x17ea7f(0x207)+Math[_0x17ea7f(0x167)](_0x20a492[_0x17ea7f(0x149)])+'\x20'+_0x20a492[_0x17ea7f(0x20e)]+'\x20'+(_0x20a492[_0x17ea7f(0x149)]>0x0?_0x17ea7f(0x93):_0x17ea7f(0x129)));}else logger[_0x17ea7f(0x1f4)]('Portfolio\x20change\x20detected:\x20'+Math[_0x17ea7f(0x167)](_0x20a492['number'])+'\x20'+_0x20a492[_0x17ea7f(0x20e)]+'\x20'+(_0x20a492[_0x17ea7f(0x149)]>0x0?'added':_0x17ea7f(0x129))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x10a818,currentCoinsAll=_0x308f28;}}catch(_0x5f53c){if(!exchangeStopped)await handleError(_0x5f53c,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xfeea71=_0x1b7fae;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0xfeea71(0xb1)](markets)[_0xfeea71(0x1c6)](_0x4bac6b=>{const _0x29c57c=_0xfeea71;_0x4bac6b[0x1]['active']&&_0x4bac6b[0x1][_0x29c57c(0x254)]&&allSymbols[_0x29c57c(0x13c)](_0x4bac6b[0x0]);}),logger[_0xfeea71(0x1f4)](_0xfeea71(0x197));}catch(_0x7624aa){markets?logger[_0xfeea71(0x1f4)](_0xfeea71(0xec)+_0x7624aa[_0xfeea71(0x1c2)]()):(loading[_0xfeea71(0x199)]=!![],emitLoadingProgress(),_0x7624aa[_0xfeea71(0x1c2)]()[_0xfeea71(0x125)]()[_0xfeea71(0xcb)]('timestamp')||_0x7624aa['toString']()[_0xfeea71(0x125)]()[_0xfeea71(0xcb)](_0xfeea71(0x180))?logHistory(_0xfeea71(0x168),_0xfeea71(0x114)):handleErrorNoStop(_0x7624aa,_0xfeea71(0x16f)),logHistory(_0xfeea71(0x168),_0xfeea71(0xeb)),logHistory(_0xfeea71(0x168),_0xfeea71(0x157)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0xfeea71(0x1f4)](_0xfeea71(0x1c1),_0x7624aa),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x417ce7){const _0xfb31ef=_0x1b7fae;let _0x22e059=[];return _0x417ce7[_0xfb31ef(0x1c6)](_0x25f0b5=>{const _0xe3b1b9=_0xfb31ef;!allSymbols[_0xe3b1b9(0xcb)](_0x25f0b5)?logHistory(_0xe3b1b9(0x168),_0xe3b1b9(0xcc)+_0x25f0b5+_0xe3b1b9(0x24d)):_0x22e059[_0xe3b1b9(0x13c)](_0x25f0b5);}),_0x22e059;}async function initclient(){const _0x26ca8d=_0x1b7fae;proxyEmit(_0x26ca8d(0x21b),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x8f6861=getNormalizedPerformance();emitPerformance(_0x8f6861),getStartingBalances(_0x8f6861);}async function toggleBotMode(){const _0x4440e2=_0x1b7fae;let _0x4a6cb5=dbConfig['get'](_0x4440e2(0x1b8))['find']({'botID':botID})[_0x4440e2(0xc1)]();if(_0x4a6cb5){const _0x2aa088=!_0x4a6cb5[_0x4440e2(0x155)];dbConfig['get'](_0x4440e2(0x1b8))['find']({'botID':botID})[_0x4440e2(0xee)]({'headless':_0x2aa088})[_0x4440e2(0xa8)](),config['headless']=_0x2aa088,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x44a6b6=_0x1b7fae;process[_0x44a6b6(0x19e)]({'updatebotmanager':!![]},_0x72ccc=>{}),logger[_0x44a6b6(0x1f4)]('Headless:\x20'+config[_0x44a6b6(0x155)]);}async function loadCoins(_0xe88568){const _0x46c179=_0x1b7fae;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3a0fcd,_0xb84000=0x0,_0x2d373a=0x0;_0xe88568[_0x46c179(0x1c6)](_0x2be4a7=>{const _0x188282=_0x46c179;loading[_0x188282(0x255)][_0x188282(0x13c)](_0x2be4a7);}),loadingCanceled=![];let _0x41dbae=![];while(_0x3a0fcd!=_0xe88568['length']+maxLoadingProgress){_0x3a0fcd=loadingProgress,_0xe88568[_0x46c179(0x1c6)](_0x5d4987=>{const _0x2a3d12=_0x46c179;if(gTicker[noslash(_0x5d4987)]){loading[_0x2a3d12(0x255)]=loading[_0x2a3d12(0x255)][_0x2a3d12(0xbb)](_0x1151a1=>_0x1151a1!=_0x5d4987);if(!watchedSymbols[_0x2a3d12(0xcb)](_0x5d4987))watchedSymbols[_0x2a3d12(0x13c)](_0x5d4987);_0x3a0fcd++;}}),loading[_0x46c179(0xe2)]=Math[_0x46c179(0x253)](_0x3a0fcd/(_0xe88568[_0x46c179(0x1ab)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x2d373a>0x1e*0x5&&(loading[_0x46c179(0xd6)]=!![],emitLoadingProgress()),_0x2d373a>0x78*0x5&&!_0x41dbae&&(_0x41dbae=!![],logHistory(_0x46c179(0x168),_0x46c179(0x161)+loading[_0x46c179(0x255)][_0x46c179(0x226)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x46c179(0x157)+loadCoinsRetryInterval/0xea60+_0x46c179(0x206)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x46c179(0x199)]=!![],emitLoadingProgress();break;}else _0xb84000!=loading[_0x46c179(0xe2)]&&(_0xb84000=loading[_0x46c179(0xe2)],emitLoadingProgress()),_0x2d373a++,await sleep(0xc8);}_0x3a0fcd==_0xe88568['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x46c179(0x195),'live':'running'},_0x2d3d1e=>{}),_0x41dbae&&logHistory(_0x46c179(0x1b4),_0x46c179(0xe8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x511a3d=_0x1b7fae;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x511a3d(0x194)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5e289e=_0x1b7fae;let _0x3017df=gTicker[stablecoins['eur'][_0x5e289e(0x20e)]],_0x2c7c30=gTicker[stablecoins[_0x5e289e(0x1ed)]['coin']];return{'eur':Number(_0x3017df),'usd':Number(_0x2c7c30)};}function capitalize(_0x7e618a){const _0xe5a359=_0x1b7fae;return _0x7e618a[_0xe5a359(0x126)](0x0,0x1)['toUpperCase']()+_0x7e618a[_0xe5a359(0x126)](0x1);}function supportedExchanges(){const _0x2521cf=_0x1b7fae,_0x2ea5eb=['ws',_0x2521cf(0x1cc),_0x2521cf(0x21a),_0x2521cf(0x124),'watchOrders',_0x2521cf(0x1d9),_0x2521cf(0x231),_0x2521cf(0x163),_0x2521cf(0xe0)];let _0x35dcf1=[],_0x551314=[],_0x1afbb0=ccxt[_0x2521cf(0x179)][_0x2521cf(0x204)];_0x1afbb0['forEach'](_0x5670d9=>{const _0x5e77a8=_0x2521cf;try{const _0x4078be=new ccxt[(_0x5e77a8(0x179))][_0x5670d9]();_0x551314[_0x5e77a8(0x13c)](_0x4078be);}catch(_0x1199f9){}}),_0x551314[_0x2521cf(0x1c6)](_0x2b60f7=>{const _0x5f42d9=_0x2521cf;let _0x3e273a=0x0;_0x2ea5eb[_0x5f42d9(0x1c6)](_0x3cf077=>{const _0xc00ce=_0x5f42d9;_0x3cf077 in _0x2b60f7[_0xc00ce(0x158)]&&_0x2b60f7['has'][_0x3cf077]&&_0x3e273a++;}),_0x3e273a==_0x2ea5eb['length']&&_0x35dcf1[_0x5f42d9(0x13c)](capitalize(_0x2b60f7['id']));});let _0x340c7e=[];return _0x1afbb0['forEach'](_0x53b7b8=>{const _0x13c6dd=_0x2521cf;_0x53b7b8=capitalize(_0x53b7b8);if(!_0x35dcf1['includes'](_0x53b7b8))_0x340c7e[_0x13c6dd(0x13c)](_0x53b7b8);}),_0x35dcf1;}function setStartDatePerformance(){const _0x5195ed=_0x1b7fae;if(config&&config[_0x5195ed(0x1a2)][0x0]['changes']['length']!=0x0){const _0x32b4c8=config[_0x5195ed(0x1a2)][0x0][_0x5195ed(0x220)];dbPerformance[_0x5195ed(0x18c)]('data')[_0x5195ed(0xfa)]({'date':config[_0x5195ed(0x222)]})[_0x5195ed(0xee)]({'coins':_0x32b4c8})[_0x5195ed(0xa8)]();}}async function recreateCoinResults(){const _0x1b8efc=_0x1b7fae;recreationNeeded=![];let _0x1a9890,_0x1b7eff=[];try{for(const _0x17c92f of currentCoins){if(_0x17c92f[_0x1b8efc(0x20e)]!=config[_0x1b8efc(0xf5)]){let _0x53c662=0x0,_0x11c58d,_0x487659;_0x1a9890=await getAllEventOrders(_0x17c92f[_0x1b8efc(0x134)]);if(_0x1a9890['length']>0x0)_0x1a9890['forEach'](_0x299107=>{const _0x12b2f2=_0x1b8efc,_0x3fb12c=_0x17c92f[_0x12b2f2(0x134)][_0x12b2f2(0xcb)](config[_0x12b2f2(0xf5)]+'/');_0x1b7eff[_0x12b2f2(0x13c)]({'datetime':_0x299107['datetime'],'coin':_0x17c92f[_0x12b2f2(0x20e)],'symbol':_0x17c92f['symbol'],'side':_0x299107[_0x12b2f2(0x140)],'reverse':_0x3fb12c,'amount':formatResult(_0x299107[_0x12b2f2(0x97)],0x8),'filled':formatResult(_0x299107[_0x12b2f2(0x97)],0x8),'price':formatResult(_0x299107[_0x12b2f2(0x152)],0x8)}),_0x53c662=_0x299107[_0x12b2f2(0x140)]==_0x12b2f2(0x252)?_0x53c662+_0x299107[_0x12b2f2(0x97)]:_0x53c662-_0x299107['filled'];if(!_0x487659)_0x487659=_0x299107[_0x12b2f2(0x152)];});_0x11c58d=_0x17c92f[_0x1b8efc(0x149)]-_0x53c662;let _0x58b983;config[_0x1b8efc(0x1a2)]['forEach'](_0x1b95d0=>{const _0xebe89=_0x1b8efc;!_0x58b983&&(_0x58b983=_0x1b95d0[_0xebe89(0x220)][_0xebe89(0xfa)](_0x4b724b=>_0x4b724b[_0xebe89(0x20e)]==_0x17c92f[_0xebe89(0x20e)]),_0x58b983&&(_0x11c58d=_0x58b983[_0xebe89(0x149)],_0x487659=_0x58b983[_0xebe89(0x152)]));});let _0x16c742=dbCoinResults[_0x1b8efc(0x18c)](_0x1b8efc(0xbd))[_0x1b8efc(0xfa)]({'coin':_0x17c92f[_0x1b8efc(0x20e)]})[_0x1b8efc(0xc1)]();_0x16c742={'coin':_0x17c92f[_0x1b8efc(0x20e)],'number':_0x11c58d,'breakeven':_0x487659,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1b8efc(0x18c)](_0x1b8efc(0xbd))[_0x1b8efc(0xfa)]({'coin':_0x17c92f['coin']})[_0x1b8efc(0xee)](_0x16c742)[_0x1b8efc(0xa8)]();}}_0x1b7eff[_0x1b8efc(0x17c)]((_0x4c226f,_0x3d8020)=>_0x4c226f[_0x1b8efc(0x1e1)]>_0x3d8020[_0x1b8efc(0x1e1)]?0x1:_0x3d8020[_0x1b8efc(0x1e1)]>_0x4c226f[_0x1b8efc(0x1e1)]?-0x1:0x0);let _0x3683a7=0x0;for(let _0x207d51 of _0x1b7eff){await updateCoinResults(_0x207d51,!![]);}}catch(_0x4551a5){await handleError(_0x4551a5,_0x1b8efc(0xb0));}}async function getAllEventOrders(_0xddd4a4){const _0x1767ff=_0x1b7fae;let _0x4b68be=[],_0x58985f=dbLogs[_0x1767ff(0x18c)]('logs')[_0x1767ff(0xbb)](_0x4787d6=>{const _0xb1cd76=_0x1767ff,_0x509a39=_0x4787d6[_0xb1cd76(0x173)][_0xb1cd76(0x125)]();return _0x509a39[_0xb1cd76(0xcb)](_0xddd4a4[_0xb1cd76(0x125)]())&&(_0x509a39[_0xb1cd76(0xcb)](_0xb1cd76(0xe9))&&_0x509a39['includes'](_0xb1cd76(0x174))||_0x509a39[_0xb1cd76(0xcb)](_0xb1cd76(0x97))&&_0x509a39[_0xb1cd76(0xcb)](_0xb1cd76(0x174)));})['sortBy'](_0x1767ff(0x240))['value']();return _0x58985f[_0x1767ff(0x1c6)](_0x51caec=>{const _0x3e4309=_0x1767ff,_0x5222c8=_0x51caec['event']['includes'](_0x3e4309(0x186))?'sell':_0x3e4309(0x252),_0x37e594=/#([0-9]|\.)+\s/i,_0x434147=Number(_0x37e594['exec'](_0x51caec['event'])[0x0]['slice'](0x1)),_0x21e0f6=/@([0-9]|\.)+$/i,_0x490158=Number(_0x21e0f6[_0x3e4309(0x225)](_0x51caec[_0x3e4309(0x173)])[0x0][_0x3e4309(0x171)](0x1));_0x4b68be[_0x3e4309(0x13c)]({'datetime':_0x51caec[_0x3e4309(0x240)],'coin':symbolToCoin(_0xddd4a4),'symbol':_0xddd4a4,'side':_0x5222c8,'amount':_0x434147,'filled':_0x434147,'price':_0x490158});}),_0x4b68be;}async function validate24hChanges(){const _0x536021=_0x1b7fae;for(const _0x529d3b of currentCoins){if(_0x529d3b[_0x536021(0x20e)]!=config[_0x536021(0xf5)]){let _0x18ffa6;_0x529d3b[_0x536021(0x19c)]?_0x18ffa6=formatResult((0x1/(gChange[_0x529d3b[_0x536021(0x134)]]/0x64+0x1)-0x1)*0x64,0x3):_0x18ffa6=gChange[_0x529d3b['symbol']],_0x18ffa6<config[_0x536021(0x1be)]&&(logHistory('error',_0x529d3b[_0x536021(0x20e)]+_0x536021(0x236)+_0x18ffa6+'%'),logHistory(_0x536021(0x168),_0x536021(0x96)),logHistory(_0x536021(0x168),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x10d758,_0x522142){const _0x4f5459=_0x1b7fae;if(!_0x10d758)return!![];const _0x41bce4=_0x522142[_0x4f5459(0x196)]('.'),_0xa8dafb=_0x10d758[_0x4f5459(0x196)]('.');for(var _0x48f3cb=0x0;_0x48f3cb<_0xa8dafb[_0x4f5459(0x1ab)];_0x48f3cb++){const _0x56a33b=~~_0xa8dafb[_0x48f3cb],_0x3b7d66=~~_0x41bce4[_0x48f3cb];if(_0x56a33b<_0x3b7d66)return!![];if(_0x56a33b>_0x3b7d66)return![];}return![];}async function oneTimeMigration(){const _0x11642d=_0x1b7fae;let _0x144891=dbLogs[_0x11642d(0x18c)](_0x11642d(0x1a3))[_0x11642d(0xc1)]();if(isOlderVersion(_0x144891,_0x11642d(0x24b))){let _0x5215a1=[];const _0x18fc74=dbLogs['get'](_0x11642d(0x109))[_0x11642d(0xc1)]();_0x18fc74['forEach'](_0x44fb7e=>{const _0x5a42ab=_0x11642d;_0x5215a1['push']({'time':_0x44fb7e[_0x5a42ab(0x240)],'type':_0x44fb7e[_0x5a42ab(0x256)],'event':_0x44fb7e['event']});}),dbLogs[_0x11642d(0x18c)](_0x11642d(0x109))[_0x11642d(0xee)](_0x5215a1)[_0x11642d(0xa8)]();}let _0xf27083=dbConfig[_0x11642d(0x18c)]('version')['value']();if(isOlderVersion(_0xf27083,_0x11642d(0x24b))){let _0x40c71e=dbConfig[_0x11642d(0x18c)](_0x11642d(0x1b8))[_0x11642d(0xfa)]({'botID':botID})[_0x11642d(0xc1)]();if(_0x40c71e){let _0x16c6a1=[];_0x40c71e[_0x11642d(0x1fb)][_0x11642d(0x1c6)](_0x367355=>{const _0x3815e4=_0x11642d;_0x16c6a1['push']({'coin':_0x367355[_0x3815e4(0x20e)],'number':_0x367355[_0x3815e4(0x258)],'price':_0x367355[_0x3815e4(0x18b)]}),delete _0x367355[_0x3815e4(0x258)],delete _0x367355[_0x3815e4(0x18b)];});if(_0x16c6a1[_0x11642d(0x1ab)]!==0x0)fs[_0x11642d(0x247)](configbackuppath+('starting-balance-'+botID+'.json'),JSON['stringify'](_0x16c6a1,null,0x4),function(_0x37db44){if(_0x37db44){}});const _0xb9f40=(_0x55b62d,_0x3ac63d)=>{const _0x1d9a5a=_0x11642d;let _0x3c7b37=[];_0x3ac63d[_0x1d9a5a(0x1c6)](_0x2d795f=>{const _0x44fc26=_0x1d9a5a,_0x2eca56=_0x55b62d['find'](_0xc3eb98=>_0xc3eb98['coin']==_0x2d795f['coin']);if(!_0x2eca56)_0x3c7b37[_0x44fc26(0x13c)](_0x2d795f);});let _0xcb7567=[];return _0x55b62d[_0x1d9a5a(0x1c6)](_0x209dce=>{const _0x4f16c8=_0x1d9a5a,_0x5d38f0=_0x3ac63d[_0x4f16c8(0xfa)](_0x4670c9=>_0x4670c9[_0x4f16c8(0x20e)]==_0x209dce[_0x4f16c8(0x20e)]);if(!_0x5d38f0||_0x5d38f0['number']==0x0&&_0x209dce['number']!=0x0)_0xcb7567[_0x4f16c8(0x13c)](_0x209dce);}),{'missingDay1':_0x3c7b37,'notInDay2':_0xcb7567};},_0x447c83=dbPerformance[_0x11642d(0x18c)](_0x11642d(0x122))[_0x11642d(0x15b)]()[_0x11642d(0xc1)]();if(_0x447c83[_0x11642d(0x1ab)]>0x1){const {missingDay1:_0xffdf14,notInDay2:_0x15c42d}=_0xb9f40(_0x16c6a1,_0x447c83[0x1][_0x11642d(0xbd)]);_0x16c6a1=[..._0x16c6a1,..._0xffdf14],_0x15c42d[_0x11642d(0x1c6)](_0x50fc07=>{const _0x4372e5=_0x11642d;let _0x5ec46d=_0x16c6a1[_0x4372e5(0x14f)](_0x295d09=>_0x295d09[_0x4372e5(0x20e)]==_0x50fc07[_0x4372e5(0x20e)]);_0x5ec46d!=-0x1&&_0x16c6a1[_0x4372e5(0x20f)](_0x5ec46d,0x1);});}_0x16c6a1[_0x11642d(0x17c)]((_0x1fa751,_0x14dc55)=>_0x1fa751['coin']>_0x14dc55['coin']?0x1:_0x14dc55[_0x11642d(0x20e)]>_0x1fa751[_0x11642d(0x20e)]?-0x1:0x0);let _0x5cd69e=[{'date':_0x40c71e[_0x11642d(0x222)],'changes':_0x16c6a1}];_0x447c83[_0x11642d(0x1ab)]>0x2&&_0x447c83[_0x11642d(0x1c6)]((_0x184505,_0x491d4b)=>{const _0x3a402a=_0x11642d;if(_0x491d4b>0x0&&_0x491d4b<_0x447c83[_0x3a402a(0x1ab)]-0x1){const {missingDay1:_0x3fe93d,notInDay2:_0x428d64}=_0xb9f40(_0x447c83[_0x491d4b]['coins'],_0x447c83[_0x491d4b+0x1][_0x3a402a(0xbd)]);_0x16c6a1=[],(_0x3fe93d['length']!=0x0||_0x428d64[_0x3a402a(0x1ab)]!=0x0)&&(_0x3fe93d['length']!=0x0&&_0x16c6a1['push'](..._0x3fe93d),_0x428d64[_0x3a402a(0x1ab)]!=0x0&&(_0x428d64['forEach'](_0x2b95d=>{const _0x4fd82a=_0x3a402a;_0x2b95d[_0x4fd82a(0x149)]=-_0x2b95d[_0x4fd82a(0x149)];}),_0x16c6a1[_0x3a402a(0x13c)](..._0x428d64)),_0x16c6a1['sort']((_0x47426d,_0x2e9471)=>_0x47426d[_0x3a402a(0x20e)]>_0x2e9471[_0x3a402a(0x20e)]?0x1:_0x2e9471['coin']>_0x47426d[_0x3a402a(0x20e)]?-0x1:0x0),_0x5cd69e[_0x3a402a(0x13c)]({'date':_0x447c83[_0x491d4b+0x1][_0x3a402a(0x12c)],'changes':_0x16c6a1}));}}),dbConfig[_0x11642d(0x18c)](_0x11642d(0x1b8))['find']({'botID':botID})['assign']({..._0x40c71e,'liquidity':_0x5cd69e})[_0x11642d(0xa8)]();}}if(isOlderVersion(_0xf27083,_0x11642d(0x1c7))){let _0x18b712=dbConfig[_0x11642d(0x18c)](_0x11642d(0x1b8))['find']({'botID':botID})[_0x11642d(0xc1)]();if(_0x18b712){const _0x3c0101=_0x18b712[_0x11642d(0x246)],_0x5eb5b1=_0x3c0101?capitalize(_0x3c0101):_0x11642d(0x20c);dbConfig['get'](_0x11642d(0x1b8))[_0x11642d(0xfa)]({'botID':botID})[_0x11642d(0xee)]({'exchange':_0x5eb5b1})[_0x11642d(0xa8)]();}}if(isOlderVersion(_0xf27083,_0x11642d(0x12a))){let _0xeb7bb7=dbConfig[_0x11642d(0x18c)](_0x11642d(0x1b8))[_0x11642d(0xfa)]({'botID':botID})[_0x11642d(0xc1)]();if(_0xeb7bb7){const _0x2010a9=_0xeb7bb7[_0x11642d(0x176)],_0x4a6e52=_0x2010a9?_0x11642d(0xa7):![];dbConfig[_0x11642d(0x18c)]('bot')[_0x11642d(0xfa)]({'botID':botID})[_0x11642d(0xee)]({'marketcapEnabled':_0x4a6e52})[_0x11642d(0xa8)]();}}if(isOlderVersion(_0xf27083,_0x11642d(0x14e))){let _0x566f2b=dbConfig['get'](_0x11642d(0x1b8))[_0x11642d(0xfa)]({'botID':botID})[_0x11642d(0xc1)]();if(_0x566f2b){const _0x314e69=_0x566f2b['autoliquidity'],_0x2a8549=_0x314e69?'update-liquidity':![];dbConfig['get'](_0x11642d(0x1b8))['find']({'botID':botID})[_0x11642d(0xee)]({'autoliquidity':_0x2a8549})[_0x11642d(0xa8)]();}}let _0x4cb9b8=dbPerformance[_0x11642d(0x18c)](_0x11642d(0x1a3))[_0x11642d(0xc1)]();isOlderVersion(_0x4cb9b8,_0x11642d(0x24b))&&setStartDatePerformance();let _0x10e4c3=dbCoinResults[_0x11642d(0x18c)]('version')[_0x11642d(0xc1)]();if(isOlderVersion(_0x10e4c3,'2.5.0')){let _0xd639cd=dbCoinResults[_0x11642d(0x18c)](_0x11642d(0xbd))[_0x11642d(0xc1)]();if(_0xd639cd[_0x11642d(0x1ab)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x542796=_0x1b7fae;dbConfig[_0x542796(0xe4)](_0x542796(0x1a3),serverversion)['write'](),dbPerformance['set'](_0x542796(0x1a3),serverversion)['write'](),dbLogs[_0x542796(0xe4)](_0x542796(0x1a3),serverversion)[_0x542796(0xa8)](),dbCoinResults['set'](_0x542796(0x1a3),serverversion)['write']();}function getConfiguration(_0x2289bc){const _0xb675b0=_0x1b7fae;let _0x9b9ec1=dbConfig[_0xb675b0(0x18c)](_0xb675b0(0x1b8))['find']({'botID':_0x2289bc})[_0xb675b0(0xc1)]();if(_0x9b9ec1){let _0x2e9757=![];typeof _0x9b9ec1[_0xb675b0(0x184)]==_0xb675b0(0x229)&&(_0x9b9ec1={..._0x9b9ec1,'threshold':Number(_0x9b9ec1[_0xb675b0(0x184)])},_0x2e9757=!![]),_0x9b9ec1[_0xb675b0(0x1be)]==undefined&&(_0x9b9ec1={..._0x9b9ec1,'change24h':-0x14},_0x2e9757=!![]),_0x9b9ec1[_0xb675b0(0x1d5)]==undefined&&(_0x9b9ec1={..._0x9b9ec1,'fiat':'USD'},_0x2e9757=!![]),_0x9b9ec1[_0xb675b0(0x121)]==undefined&&(_0x9b9ec1={..._0x9b9ec1,'onepagemode':settings[_0xb675b0(0x121)]},_0x2e9757=!![]),_0x9b9ec1['colorscheme']==undefined&&(_0x9b9ec1={..._0x9b9ec1,'colorscheme':_0xb675b0(0x148)},_0x2e9757=!![]),_0x9b9ec1[_0xb675b0(0x177)]==undefined&&(_0x9b9ec1={..._0x9b9ec1,'autoliquidity':'update-liquidity'},_0x2e9757=!![]),_0x9b9ec1[_0xb675b0(0x164)]==undefined&&(_0x9b9ec1={..._0x9b9ec1,'marketcapApi':settings[_0xb675b0(0x164)]?!![]:![]},_0x2e9757=!![]),_0x9b9ec1['marketcapEnabled']==undefined&&(_0x9b9ec1={..._0x9b9ec1,'marketcapEnabled':![]},_0x2e9757=!![]),_0x2e9757&&(_0x9b9ec1={'botID':_0x9b9ec1[_0xb675b0(0xa3)],'exchange':_0x9b9ec1[_0xb675b0(0x246)],'apiKey':_0x9b9ec1[_0xb675b0(0x178)],'apiSecret':_0x9b9ec1[_0xb675b0(0xb3)],'apiPassword':_0x9b9ec1[_0xb675b0(0xfc)],'basecoin':_0x9b9ec1[_0xb675b0(0xf5)],'botname':_0x9b9ec1[_0xb675b0(0x239)],'showname':_0x9b9ec1['showname'],'threshold':_0x9b9ec1[_0xb675b0(0x184)],'ordertype':_0x9b9ec1[_0xb675b0(0x232)],'timeout':_0x9b9ec1[_0xb675b0(0xd6)],'fiat':_0x9b9ec1[_0xb675b0(0x1d5)],'startdate':_0x9b9ec1[_0xb675b0(0x222)],'recreate':_0x9b9ec1[_0xb675b0(0xef)],'timeshift':_0x9b9ec1[_0xb675b0(0x1ca)],'onepagemode':_0x9b9ec1[_0xb675b0(0x121)],'headless':_0x9b9ec1[_0xb675b0(0x155)],'cooldown':_0x9b9ec1[_0xb675b0(0x119)],'change24h':_0x9b9ec1[_0xb675b0(0x1be)],'emojibuy':_0x9b9ec1['emojibuy'],'emojisell':_0x9b9ec1[_0xb675b0(0x13a)],'colorscheme':_0x9b9ec1['colorscheme'],'marketcapApi':_0x9b9ec1['marketcapApi'],'marketcapEnabled':_0x9b9ec1[_0xb675b0(0x176)],'portfolio':_0x9b9ec1[_0xb675b0(0x1fb)],'autoliquidity':_0x9b9ec1[_0xb675b0(0x177)],'liquidity':_0x9b9ec1['liquidity'],'openOrders':_0x9b9ec1[_0xb675b0(0x1cb)]},dbConfig[_0xb675b0(0x18c)](_0xb675b0(0x1b8))[_0xb675b0(0x200)]()[_0xb675b0(0xa8)](),dbConfig['get'](_0xb675b0(0x1b8))[_0xb675b0(0x13c)](_0x9b9ec1)['write']());}else _0x9b9ec1={'botID':_0x2289bc,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xb675b0(0xa2)+_0x2289bc,'showname':![],'threshold':0x3,'ordertype':_0xb675b0(0xe9),'timeout':0x14,'fiat':_0xb675b0(0x105),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0xb675b0(0x121)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xb675b0(0x148),'marketcapApi':settings[_0xb675b0(0x164)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0xb675b0(0x1f2),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x9b9ec1;}function emittedConfiguration(){const _0x3719fb=_0x1b7fae;let _0x20a99e;if(config[_0x3719fb(0x178)]=='')_0x20a99e={...config,'configstate':'initial'};else config[_0x3719fb(0x178)]==_0x3719fb(0x251)?_0x20a99e={...config,'configstate':_0x3719fb(0x1e6)}:(_0x20a99e={...config,'apiKey':_0x3719fb(0x145),'apiSecret':_0x3719fb(0x145)},config[_0x3719fb(0xfc)]&&(_0x20a99e[_0x3719fb(0xfc)]=_0x3719fb(0x145)));return _0x20a99e['enableFiatToggle']=enableFiatToggle,_0x20a99e;}function getSettings(){const _0xe4e7a4=_0x1b7fae;return dbSettings[_0xe4e7a4(0x18c)](_0xe4e7a4(0x13e))[_0xe4e7a4(0xc1)]();}function getSecure(){const _0x43bc81=_0x1b7fae;return dbSecure[_0x43bc81(0x18c)](_0x43bc81(0xe7))[_0x43bc81(0xc1)]()||{};}function updateTimeshift(_0x42ba92){const _0x47b6ef=_0x1b7fae;let _0x55c3ba=dbConfig[_0x47b6ef(0x18c)](_0x47b6ef(0x1b8))[_0x47b6ef(0xfa)]({'botID':botID})['value']();_0x55c3ba&&dbConfig[_0x47b6ef(0x18c)](_0x47b6ef(0x1b8))[_0x47b6ef(0xfa)]({'botID':botID})[_0x47b6ef(0xee)]({'timeshift':_0x42ba92})[_0x47b6ef(0xa8)](),config[_0x47b6ef(0x1ca)]=_0x42ba92,proxyEmit(_0x47b6ef(0x21b),emittedConfiguration());}function updateOnepagemode(_0x5c84c4){const _0x1ca6a7=_0x1b7fae;let _0x32c81c=dbConfig[_0x1ca6a7(0x18c)](_0x1ca6a7(0x1b8))[_0x1ca6a7(0xfa)]({'botID':botID})[_0x1ca6a7(0xc1)]();_0x32c81c&&dbConfig[_0x1ca6a7(0x18c)]('bot')[_0x1ca6a7(0xfa)]({'botID':botID})[_0x1ca6a7(0xee)]({'onepagemode':_0x5c84c4})[_0x1ca6a7(0xa8)](),config[_0x1ca6a7(0x121)]=_0x5c84c4,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0xee9bd0){const _0x486b90=_0x1b7fae,_0x32b197=_0xee9bd0?!![]:![];let _0x151c50=dbConfig[_0x486b90(0x18c)](_0x486b90(0x1b8))['find']({'botID':botID})[_0x486b90(0xc1)]();_0x151c50&&dbConfig['get'](_0x486b90(0x1b8))[_0x486b90(0xfa)]({'botID':botID})[_0x486b90(0xee)]({'marketcapApi':_0x32b197})[_0x486b90(0xa8)](),config[_0x486b90(0x164)]=_0x32b197,getMarketCap(),proxyEmit(_0x486b90(0x21b),emittedConfiguration());}async function storeConfiguration(_0x4925b1){const _0x184311=_0x1b7fae;logger[_0x184311(0x1f4)](_0x184311(0x233));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x39576f=![],_0x114c6c=![],_0x563926=[];_0x4925b1['portfolio']['forEach'](_0x4a1038=>{const _0x451082=_0x184311;if(!_0x4a1038[_0x451082(0x1aa)]&&_0x4a1038[_0x451082(0x20e)]!=_0x4925b1['basecoin'])_0x563926[_0x451082(0x13c)](_0x4a1038[_0x451082(0x134)]);}),_0x563926[_0x184311(0x1c6)](_0x82bee6=>{const _0x18cc41=_0x184311,_0x16de46=currentCoins[_0x18cc41(0xfa)](_0x43c965=>_0x43c965[_0x18cc41(0x134)]==_0x82bee6);!_0x16de46&&(_0x39576f=!![]);}),currentCoins[_0x184311(0x1c6)](_0x542ab0=>{const _0x255042=_0x184311;if(_0x542ab0[_0x255042(0x20e)]!=config[_0x255042(0xf5)]){const _0x3f94ba=_0x563926['find'](_0x108726=>_0x108726==_0x542ab0['symbol']);!_0x3f94ba&&(_0x39576f=!![]);}}),_0x4925b1[_0x184311(0x1fb)]['forEach'](_0x3729d0=>{const _0x3d1f13=_0x184311,_0x46be0a=config[_0x3d1f13(0x1fb)][_0x3d1f13(0xfa)](_0x1b39ca=>_0x1b39ca[_0x3d1f13(0x20e)]==_0x3729d0[_0x3d1f13(0x20e)]);if(_0x46be0a&&_0x3729d0[_0x3d1f13(0x103)]!=_0x46be0a[_0x3d1f13(0x103)])_0x114c6c=!![];});let _0x37a713=dbConfig[_0x184311(0x18c)]('bot')[_0x184311(0xfa)]({'botID':botID})[_0x184311(0xc1)]();_0x4925b1={..._0x4925b1,'apiKey':decryptRSA(secure[_0x184311(0x230)],_0x4925b1[_0x184311(0x178)]),'apiSecret':decryptRSA(secure['privateKey'],_0x4925b1[_0x184311(0xb3)])};_0x4925b1[_0x184311(0xfc)]&&(_0x4925b1['apiPassword']=decryptRSA(secure[_0x184311(0x230)],_0x4925b1[_0x184311(0xfc)]));let _0x2ea20e=![];if(_0x37a713){_0x4925b1[_0x184311(0x178)]=='************'?_0x4925b1[_0x184311(0x178)]=config[_0x184311(0x178)]:_0x2ea20e=!![];_0x4925b1[_0x184311(0xb3)]=='************'?_0x4925b1[_0x184311(0xb3)]=config[_0x184311(0xb3)]:_0x2ea20e=!![];if(_0x4925b1[_0x184311(0xfc)]==_0x184311(0x145))_0x4925b1[_0x184311(0xfc)]=config['apiPassword'];else{if(_0x4925b1[_0x184311(0xfc)])_0x2ea20e=!![];}dbConfig[_0x184311(0x18c)](_0x184311(0x1b8))[_0x184311(0xfa)]({'botID':botID})['assign'](_0x4925b1)[_0x184311(0xa8)]();}else dbConfig[_0x184311(0x18c)](_0x184311(0x1b8))[_0x184311(0x13c)](_0x4925b1)[_0x184311(0xa8)](),_0x2ea20e=!![],process[_0x184311(0x19e)]({'status':_0x184311(0x195),'live':_0x184311(0x1b3)},_0x1ac11f=>{});process[_0x184311(0x19e)]({'botname':_0x4925b1['botname']},_0x232ac2=>{}),config={..._0x4925b1},updateBotManager(),proxyEmit(_0x184311(0x1ee)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2ea20e)!_0x37a713?await reset(!![]):getBalances();else _0x39576f||_0x114c6c?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3ff4b8){const _0x4a823e=_0x1b7fae,_0x52d455={...config,'headless':_0x3ff4b8[_0x4a823e(0x155)]};let _0x13a175=dbConfig['get'](_0x4a823e(0x1b8))[_0x4a823e(0xfa)]({'botID':botID})[_0x4a823e(0xc1)]();_0x13a175&&dbConfig['get'](_0x4a823e(0x1b8))[_0x4a823e(0xfa)]({'botID':botID})[_0x4a823e(0xee)](_0x52d455)[_0x4a823e(0xa8)](),config={..._0x52d455},updateBotManager(),proxyEmit(_0x4a823e(0x21b),emittedConfiguration());}async function storeFiat(_0x3c88d1){const _0x1946a2=_0x1b7fae,_0x1e33d8={...config,'fiat':_0x3c88d1};let _0x56c1f2=dbConfig[_0x1946a2(0x18c)](_0x1946a2(0x1b8))['find']({'botID':botID})[_0x1946a2(0xc1)]();_0x56c1f2&&dbConfig[_0x1946a2(0x18c)](_0x1946a2(0x1b8))[_0x1946a2(0xfa)]({'botID':botID})[_0x1946a2(0xee)](_0x1e33d8)[_0x1946a2(0xa8)](),config={..._0x1e33d8},proxyEmit(_0x1946a2(0x21b),emittedConfiguration());}function resetHistory(){const _0x3e089d=_0x1b7fae;logger[_0x3e089d(0x94)](_0x3e089d(0x142));try{if(fs[_0x3e089d(0x1df)](path[_0x3e089d(0x226)](configpath,_0x3e089d(0x248)+botID+_0x3e089d(0x1db))))fs[_0x3e089d(0x1e2)](path[_0x3e089d(0x226)](configpath,_0x3e089d(0x248)+botID+_0x3e089d(0x1db)));if(fs[_0x3e089d(0x1df)](path[_0x3e089d(0x226)](configpath,_0x3e089d(0x248)+botID+_0x3e089d(0x1dd))))fs[_0x3e089d(0x1e2)](path[_0x3e089d(0x226)](configpath,_0x3e089d(0x248)+botID+_0x3e089d(0x1dd)));if(fs[_0x3e089d(0x1df)](path['join'](configpath,_0x3e089d(0x248)+botID+'-results.json')))fs[_0x3e089d(0x1e2)](path[_0x3e089d(0x226)](configpath,'bot-'+botID+_0x3e089d(0x10d)));}catch(_0x49af79){if(_0x49af79)logger['full'](_0x3e089d(0x19d),_0x49af79);}const _0x52610f=getDate();let _0x3ec52e=[];currentCoins['forEach'](_0x24e6cf=>{const _0x21a50b=_0x3e089d;_0x3ec52e[_0x21a50b(0x13c)]({'coin':_0x24e6cf[_0x21a50b(0x20e)],'number':_0x24e6cf[_0x21a50b(0x149)],'price':_0x24e6cf[_0x21a50b(0x20a)]});});let _0x42be67=dbConfig[_0x3e089d(0x18c)](_0x3e089d(0x1b8))['find']({'botID':botID})['value']();_0x42be67&&(dbConfig[_0x3e089d(0x18c)](_0x3e089d(0x1b8))[_0x3e089d(0xfa)]({'botID':botID})[_0x3e089d(0xee)]({'liquidity':[{'date':_0x52610f,'changes':_0x3ec52e}]})[_0x3e089d(0xa8)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x280fea){const _0xeaaf68=_0x1b7fae;return _0x280fea[_0xeaaf68(0x1ad)]('/','');}function updateHighestFee(_0x598b4b){const _0x45b45e=_0x1b7fae;if(_0x598b4b[_0x45b45e(0x19c)]){let _0x431894={'filled':_0x598b4b[_0x45b45e(0x97)]*_0x598b4b[_0x45b45e(0x152)],'amount':_0x598b4b[_0x45b45e(0x97)]*_0x598b4b[_0x45b45e(0x152)],'side':_0x598b4b[_0x45b45e(0x140)]==_0x45b45e(0x186)?_0x45b45e(0x252):_0x45b45e(0x186),'price':0x1/_0x598b4b[_0x45b45e(0x152)]};_0x598b4b={..._0x598b4b,..._0x431894};}const _0x1c7a22=defaultFee*_0x598b4b[_0x45b45e(0x97)]*_0x598b4b[_0x45b45e(0x152)];lastFees[_0x45b45e(0x1fd)][_0x45b45e(0x1ab)]===0x14&&lastFees[_0x45b45e(0x1fd)][_0x45b45e(0x131)](),lastFees[_0x45b45e(0x1fd)][_0x45b45e(0x13c)](_0x1c7a22),lastFees[_0x45b45e(0x14b)]=Math[_0x45b45e(0x1a6)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x3d9b81){const _0x390c82=_0x1b7fae;logger['debug'](_0x390c82(0xaa)+_0x3d9b81['symbol']+_0x390c82(0x20b)+_0x3d9b81[_0x390c82(0x1b0)]+_0x390c82(0x20b)+_0x3d9b81['filled']+_0x390c82(0xf8)+_0x3d9b81[_0x390c82(0x1d2)]+'\x20|\x20'+_0x3d9b81['id']);let _0x2df78c=_0x3d9b81[_0x390c82(0x1b0)],_0x1fb520=![];currentCoins[_0x390c82(0x1c6)](_0x2b62e9=>{const _0x13a8dc=_0x390c82;_0x2b62e9[_0x13a8dc(0x134)]==_0x3d9b81['symbol']&&(_0x1fb520=!![]);});if(!_0x1fb520)return;const _0x46c5c8=currentCoins[_0x390c82(0xfa)](_0x1e7bca=>_0x1e7bca[_0x390c82(0x134)]==_0x3d9b81[_0x390c82(0x134)]),_0x39b363=_0x46c5c8[_0x390c82(0x20e)],_0x4bc820=_0x37abb5=>{const _0x1863ec=_0x390c82,_0x4f4e59=currentCoins[_0x1863ec(0xfa)](_0x2c0daf=>_0x2c0daf[_0x1863ec(0x134)]==_0x3d9b81[_0x1863ec(0x134)]);if(_0x4f4e59)_0x4f4e59['orderstatus']=_0x37abb5;};let _0x50a6d4=![];for(const _0x1a39bd of lastOrders){const _0x1a6cf3=0x64,_0x31a580=0x1388;let _0x458bab=0x0;while(!_0x1a39bd[_0x390c82(0x115)]&&_0x458bab*_0x1a6cf3<_0x31a580){_0x458bab++,await sleep(_0x1a6cf3);}if(_0x458bab>0x0)logger['debug'](_0x390c82(0xc8)+_0x458bab*_0x1a6cf3/0x3e8+_0x390c82(0x12d));_0x1a39bd[_0x390c82(0x115)]==_0x3d9b81['id']&&(_0x50a6d4=!![]);}if(_0x2df78c=='open'){_0x4bc820(_0x390c82(0xa5));if(_0x3d9b81[_0x390c82(0x97)]>0x0&&_0x3d9b81[_0x390c82(0x97)]<_0x3d9b81[_0x390c82(0x1d2)]){if(_0x50a6d4){setBlockTransactionDetection(!![]),logger[_0x390c82(0x1f4)](_0x390c82(0x1d8)+_0x3d9b81['filled']+_0x390c82(0x215)+_0x3d9b81['id']);const _0x53be5f=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39b363);[currentCoins,currentCoinsAll]=_0x53be5f,setBlockTransactionDetection(![]);}else logger[_0x390c82(0x1f4)](_0x390c82(0x1d8)+_0x3d9b81[_0x390c82(0x97)]+')\x20unknown\x20order:\x20'+_0x3d9b81['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2df78c==_0x390c82(0xb7)){_0x4bc820('canceled'),lastOrders=lastOrders['filter'](_0x2d1a91=>_0x2d1a91['symbol']!=_0x3d9b81[_0x390c82(0x134)]);const _0x158776=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x158776,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2df78c=='closed'){if(lastOrders)for(const _0x2cb3a3 of lastOrders){if(_0x2cb3a3[_0x390c82(0x115)]==_0x3d9b81['id']){logger[_0x390c82(0x1f4)](_0x390c82(0x198)+_0x3d9b81['id']),_0x50a6d4=!![];if(_0x2cb3a3[_0x390c82(0x97)]==0x0){setBlockTransactionDetection(!![]),logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3d9b81['id']);if(_0x3d9b81[_0x390c82(0x165)])_0x2cb3a3[_0x390c82(0x152)]=_0x3d9b81['average'];else{if(_0x3d9b81[_0x390c82(0x152)])_0x2cb3a3['price']=_0x3d9b81[_0x390c82(0x152)];else{}}_0x2cb3a3[_0x390c82(0x97)]=_0x3d9b81[_0x390c82(0x97)],updateHighestFee(_0x2cb3a3);const _0xe1228d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39b363);[currentCoins,currentCoinsAll]=_0xe1228d,setBlockTransactionDetection(![]),await validateOrders(),_0x4bc820(_0x390c82(0x97)),_0x2cb3a3[_0x390c82(0xcf)]={'currency':_0x3d9b81[_0x390c82(0xcf)]?_0x3d9b81[_0x390c82(0xcf)][_0x390c82(0x18a)]:null,'cost':_0x3d9b81[_0x390c82(0xcf)]?_0x3d9b81[_0x390c82(0xcf)][_0x390c82(0x14d)]:0x0},await updateCoinResults(_0x2cb3a3);}}}!_0x50a6d4&&(logger[_0x390c82(0x1f4)](_0x390c82(0x146)+_0x3d9b81['id']),_0x4bc820(_0x390c82(0x97)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4876a4=JSON[_0x390c82(0x221)](lastBalances[_0x390c82(0x1fb)]);const _0x585e7c=_0x4876a4[_0x390c82(0xfa)](_0x189af0=>_0x189af0[_0x390c82(0x134)]==_0x3d9b81[_0x390c82(0x134)]);if(_0x585e7c){if(_0x2df78c==_0x390c82(0xa5))_0x585e7c[_0x390c82(0x101)]=_0x585e7c[_0x390c82(0x101)]==_0x390c82(0x97)?_0x390c82(0x97):_0x390c82(0xa5);else{if(_0x2df78c==_0x390c82(0xb7))_0x585e7c[_0x390c82(0x101)]=_0x585e7c[_0x390c82(0x101)]==_0x390c82(0x97)?_0x390c82(0x97):'canceled';else _0x2df78c=='closed'&&(_0x585e7c['orderstatus']=_0x390c82(0x97));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x4876a4)},proxyEmit(_0x390c82(0x14c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4adaf5=_0x1b7fae;await getOpenOrders();let _0x9ae788=![];currentCoins[_0x4adaf5(0x1c6)](_0x2eaabd=>{const _0x5d10f7=_0x4adaf5;_0x9ae788=allOpenOrders[_0x5d10f7(0xfa)](_0x4ff66f=>_0x4ff66f['symbol']==_0x2eaabd['symbol']),_0x2eaabd[_0x5d10f7(0x101)]=_0x9ae788?_0x5d10f7(0xa5):_0x5d10f7(0x1b7);});}async function fetchBalance(_0x9af7ea=!![]){const _0x22ade2=_0x1b7fae;let _0x1f2522,_0x841242;try{return _0x1f2522=await exchange[_0x22ade2(0xe0)](),_0x841242=_0x1f2522['total'],_0x841242;}catch(_0x966510){return!_0x9af7ea?handleErrorNoStop(_0x966510,_0x22ade2(0xb9)):await handleError(_0x966510,_0x22ade2(0xb9)),![];}}async function getCoins(_0x5e6fcf=0x0,_0x2a5e46=!![],_0x5acb84=config[_0x1b7fae(0xf5)],_0x53fca9){const _0x2d2145=_0x1b7fae;let _0x15f8a5=[],_0x540c18=[],_0x4d7697=[],_0x5999a2;if(_0x5e6fcf)await sleep(_0x5e6fcf);if(botPaused)return[currentCoins,currentCoinsAll];let _0x3d126d=![],_0x43bd12=0x0,_0x32192c,_0x569be8;_0x53fca9&&(_0x32192c=currentCoins[_0x2d2145(0xfa)](_0x54eaee=>_0x54eaee[_0x2d2145(0x20e)]==_0x53fca9),_0x32192c&&(_0x569be8=_0x32192c[_0x2d2145(0x1d4)],delete _0x32192c[_0x2d2145(0x1d4)]));while(!_0x3d126d){_0x5999a2=await fetchBalance(_0x2a5e46);if(_0x5999a2){if(_0x53fca9){if(_0x5999a2[_0x53fca9]!=_0x569be8)logger[_0x2d2145(0x1f4)](_0x2d2145(0x118)+_0x53fca9+':\x20'+_0x5999a2[_0x53fca9]+'\x20('+_0x569be8+')'),_0x3d126d=!![];else{logger[_0x2d2145(0x1f4)](_0x2d2145(0x11f)+_0x53fca9+':\x20'+_0x5999a2[_0x53fca9]+'\x20('+_0x569be8+')'),_0x43bd12++;if(_0x43bd12<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x2d2145(0x1f4)](_0x2d2145(0x113)+_0x43bd12+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x1df7d9,_0x447c62]of Object['entries'](_0x5999a2)){_0x4d7697[_0x2d2145(0x13c)](_0x1df7d9);}config[_0x2d2145(0x1fb)]['forEach'](_0x307c6d=>{const _0x3cb824=_0x2d2145;!_0x4d7697['includes'](_0x307c6d[_0x3cb824(0x20e)])&&(_0x5999a2[_0x307c6d[_0x3cb824(0x20e)]]=0x0);});if(_0x5acb84=='')for(const [_0x2d5260,_0x370369]of Object['entries'](_0x5999a2)){_0x370369!=0x0&&_0x15f8a5['push']({'coin':_0x2d5260});}else for(const [_0x399fcf,_0x23ebe6]of Object[_0x2d2145(0xb1)](_0x5999a2)){const _0x1b61a6=config['portfolio']['find'](_0x30136b=>_0x30136b[_0x2d2145(0x20e)]==_0x399fcf),_0x3e794d=_0x399fcf+'/'+_0x5acb84,_0x1a1084=_0x5acb84+'/'+_0x399fcf,_0x29062a=currentCoins[_0x2d2145(0xfa)](_0x379dce=>_0x379dce[_0x2d2145(0x20e)]==_0x399fcf);if((_0x23ebe6!=0x0||_0x1b61a6)&&(allSymbols['includes'](_0x3e794d)||_0x399fcf==_0x5acb84))_0x29062a?_0x15f8a5['push']({..._0x29062a,'number':Math[_0x2d2145(0x1a6)](_0x23ebe6+(_0x1b61a6&&_0x1b61a6[_0x2d2145(0x103)]||0x0),0x0)}):_0x15f8a5[_0x2d2145(0x13c)]({'coin':_0x399fcf,'symbol':_0x3e794d,'reverse':![],'number':Math[_0x2d2145(0x1a6)](_0x23ebe6+(_0x1b61a6&&_0x1b61a6['offset']||0x0),0x0),'orderstatus':_0x2d2145(0x1b7)});else{if((_0x23ebe6!=0x0||_0x1b61a6)&&allSymbols[_0x2d2145(0xcb)](_0x1a1084))_0x29062a?_0x15f8a5[_0x2d2145(0x13c)]({..._0x29062a,'number':Math['max'](_0x23ebe6+(_0x1b61a6&&_0x1b61a6['offset']||0x0),0x0)}):_0x15f8a5['push']({'coin':_0x399fcf,'symbol':_0x1a1084,'reverse':!![],'number':Math['max'](_0x23ebe6+(_0x1b61a6&&_0x1b61a6[_0x2d2145(0x103)]||0x0),0x0),'orderstatus':_0x2d2145(0x1b7)});else _0x1b61a6&&_0x15f8a5[_0x2d2145(0x13c)]({'coin':_0x1b61a6[_0x2d2145(0x20e)],'symbol':_0x1b61a6[_0x2d2145(0x134)],'reverse':_0x1b61a6[_0x2d2145(0x19c)],'number':0x0,'orderstatus':_0x2d2145(0x1b7)});}}return _0x15f8a5['sort']((_0x36d684,_0x144646)=>_0x36d684[_0x2d2145(0x172)]<_0x144646[_0x2d2145(0x172)]?0x1:_0x144646[_0x2d2145(0x172)]<_0x36d684[_0x2d2145(0x172)]?-0x1:0x0),_0x540c18=cloneDeep(_0x15f8a5),_0x15f8a5=_0x15f8a5[_0x2d2145(0xbb)](_0x10ec6a=>{const _0x323a76=_0x2d2145,_0x59717f=config['portfolio'][_0x323a76(0xfa)](_0x4783ca=>_0x4783ca[_0x323a76(0x20e)]==_0x10ec6a[_0x323a76(0x20e)]);return _0x59717f&&!_0x59717f[_0x323a76(0x1aa)];}),[_0x15f8a5,_0x540c18];}async function getCoinNumber(_0x544014){const _0x244cf6=_0x1b7fae;let _0x16f92c;try{const _0x45e51e=await exchange['fetchBalance']();_0x16f92c=_0x45e51e['total'][_0x544014];}catch(_0x10d6b6){await handleError(_0x10d6b6,_0x244cf6(0x242));}return _0x16f92c;}async function getOpenOrders(){const _0x41635b=_0x1b7fae;let _0x263bbe;allOpenOrders=[];try{for(const _0xa32d3f of config['portfolio']){!_0xa32d3f[_0x41635b(0x1aa)]&&_0xa32d3f['coin']!=config[_0x41635b(0xf5)]&&(_0x263bbe=await exchange[_0x41635b(0x163)](_0xa32d3f[_0x41635b(0x134)]),_0x263bbe[_0x41635b(0x1ab)]>0x0&&allOpenOrders['push'](_0x263bbe[0x0]));}}catch(_0x7ba5a2){await handleError(_0x7ba5a2,'getOpenOrders()');}}async function handleOpenOrders(_0x11a800=0x0){const _0x3c7003=_0x1b7fae;allOpenOrders[_0x3c7003(0x1ab)]==0x0&&lockOrders==ORDERS[_0x3c7003(0x14a)]&&allOrdersPlaced&&(_0x11a800==0x0?(logger[_0x3c7003(0x1f4)]('1\x20-\x20Handle\x20open\x20orders'),_0x11a800++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x3c7003(0x250))));}async function testAPI(_0x3dbf1d){const _0x5621ea=_0x1b7fae,_0x112c81=ccxt[_0x5621ea(0x179)][_0x3dbf1d['exchange']['toLowerCase']()],_0x4832dc=new _0x112c81({'apiKey':_0x3dbf1d['apiKey'],'secret':_0x3dbf1d[_0x5621ea(0xb3)],'options':{'defaultType':_0x5621ea(0x254)}});if(_0x3dbf1d[_0x5621ea(0xfc)])_0x4832dc[_0x5621ea(0x189)]=_0x3dbf1d[_0x5621ea(0xfc)];try{await _0x4832dc[_0x5621ea(0xe0)]();}catch(_0x3edcfe){logger[_0x5621ea(0x1f4)](_0x5621ea(0x21f)+_0x3edcfe['toString']());throw _0x3edcfe;}}function cloneDeep(_0x2fdb3e){const _0x254454=_0x1b7fae;return JSON[_0x254454(0x221)](JSON[_0x254454(0xda)](_0x2fdb3e));}async function getPortfolio(_0x3db321){const _0x3b30e9=_0x1b7fae;let _0x193ea0=[],_0x67e9f6=[],_0x311d8d=[],_0x53319a;_0x3db321['apiKey']=decryptRSA(secure[_0x3b30e9(0x230)],_0x3db321[_0x3b30e9(0x178)]),_0x3db321[_0x3b30e9(0xb3)]=decryptRSA(secure[_0x3b30e9(0x230)],_0x3db321[_0x3b30e9(0xb3)]);if(_0x3db321[_0x3b30e9(0xfc)])_0x3db321[_0x3b30e9(0xfc)]=decryptRSA(secure[_0x3b30e9(0x230)],_0x3db321[_0x3b30e9(0xfc)]);if(_0x3db321['apiKey']!==_0x3b30e9(0x145)||_0x3db321[_0x3b30e9(0xb3)]!==_0x3b30e9(0x145)||_0x3db321[_0x3b30e9(0xfc)]&&_0x3db321['apiPassword']!=='************'){if(config[_0x3b30e9(0x246)]){if(_0x3db321[_0x3b30e9(0x178)]==_0x3b30e9(0x145))_0x3db321[_0x3b30e9(0x178)]=config[_0x3b30e9(0x178)];if(_0x3db321['apiSecret']==_0x3b30e9(0x145))_0x3db321[_0x3b30e9(0xb3)]=config[_0x3b30e9(0xb3)];if(_0x3db321[_0x3b30e9(0xfc)]==_0x3b30e9(0x145))_0x3db321[_0x3b30e9(0xfc)]=config['apiPassword'];}try{await testAPI(_0x3db321);}catch(_0x5bf521){if(_0x5bf521['toString']()[_0x3b30e9(0xcb)](_0x3b30e9(0xa1))){logHistory(_0x3b30e9(0x168),_0x3b30e9(0x151)),logHistory(_0x3b30e9(0x168),'Error\x20details:\x20'+_0x5bf521[_0x3b30e9(0x1c2)]()),proxyEmit(_0x3b30e9(0xc7),![]);return;}else{if(_0x5bf521['toString']()['includes']('PermissionDenied')){logHistory('error','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x3b30e9(0x168),'Error\x20details:\x20'+_0x5bf521['toString']()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x3b30e9(0x168),_0x3b30e9(0x24c)+_0x5bf521[_0x3b30e9(0x1c2)]()),logger[_0x3b30e9(0x1f4)](_0x3b30e9(0x1c1),_0x5bf521),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x3db321['apiKey'],_0x3db321[_0x3b30e9(0xb3)],_0x3db321['apiPassword']):await initExchange(_0x3db321[_0x3b30e9(0x246)],_0x3db321[_0x3b30e9(0x178)],_0x3db321['apiSecret'],_0x3db321[_0x3b30e9(0xfc)]);await loadSymbols();const _0x4c2832=await getCoins(0x0,![],_0x3db321[_0x3b30e9(0xf5)]);_0x311d8d=cloneDeep(_0x4c2832[0x1]);}else{const _0x164cda=await getCoins();_0x311d8d=cloneDeep(_0x164cda[0x1]);}if(_0x3db321[_0x3b30e9(0xf5)]=='')proxyEmit(_0x3b30e9(0xc7),!![]),proxyEmit(_0x3b30e9(0x112),_0x311d8d);else{_0x311d8d[_0x3b30e9(0x1c6)](_0x6822e9=>{const _0x5003f3=_0x3b30e9;if(_0x6822e9[_0x5003f3(0x20e)]!=_0x3db321[_0x5003f3(0xf5)]&&allSymbols[_0x5003f3(0xcb)](_0x6822e9[_0x5003f3(0x134)]))_0x193ea0[_0x5003f3(0x13c)](_0x6822e9[_0x5003f3(0x134)]);});if(_0x193ea0[_0x3b30e9(0x1ab)]==0x0)logHistory(_0x3b30e9(0x168),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x67e9f6=await getTickers(_0x193ea0);}catch(_0x1a2eae){logHistory(_0x3b30e9(0x168),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x3b30e9(0x1f4)](_0x3b30e9(0x1c1),_0x1a2eae),proxyEmit(_0x3b30e9(0xc7),![]);return;}_0x311d8d[_0x3b30e9(0x1c6)](_0x35ee09=>{const _0x3d4d2a=_0x3b30e9;_0x35ee09[_0x3d4d2a(0x20e)]!=_0x3db321['basecoin']?_0x67e9f6[_0x35ee09['symbol']]?_0x53319a=_0x35ee09['reverse']?0x1/_0x67e9f6[_0x35ee09[_0x3d4d2a(0x134)]][_0x3d4d2a(0x20a)]:_0x67e9f6[_0x35ee09[_0x3d4d2a(0x134)]][_0x3d4d2a(0x20a)]:_0x53319a=0x0:_0x53319a=0x1,_0x35ee09[_0x3d4d2a(0x152)]=formatResult(_0x53319a,0x8);}),await getMarketCap(_0x311d8d),proxyEmit(_0x3b30e9(0xc7),!![]),proxyEmit(_0x3b30e9(0x112),_0x311d8d);}}}function truncateTradeAmount(_0x2acc24,_0x378840){let _0x50fdec=0x0;try{_0x50fdec=exchange['amountToPrecision'](_0x2acc24,_0x378840);}catch(_0x9ed1b){}return _0x50fdec;}function checkMinimums(_0x37893c){const _0x12b393=_0x1b7fae;let _0x34cac2=!![];const _0x280484=!_0x37893c['reverse']?markets[_0x37893c['symbol']][_0x12b393(0x17d)]['amount'][_0x12b393(0x218)]:markets[_0x37893c[_0x12b393(0x134)]][_0x12b393(0x17d)]['cost'][_0x12b393(0x218)],_0x1cc557=!_0x37893c[_0x12b393(0x19c)]?markets[_0x37893c['symbol']][_0x12b393(0x17d)][_0x12b393(0x14d)][_0x12b393(0x218)]:markets[_0x37893c[_0x12b393(0x134)]]['limits'][_0x12b393(0x1d2)]['min'],_0x507ead=truncateTradeAmount(_0x37893c[_0x12b393(0x134)],_0x37893c['trade']);_0x37893c[_0x12b393(0xbf)]=_0x507ead;if(Math['abs'](_0x507ead)<_0x280484)_0x34cac2=![];if(Math['abs'](_0x507ead)*_0x37893c[_0x12b393(0x20a)]<_0x1cc557)_0x34cac2=![];if(_0x37893c[_0x12b393(0x140)]==_0x12b393(0x186)){let _0x593570=config['portfolio'][_0x12b393(0xfa)](_0x2da908=>_0x2da908[_0x12b393(0x20e)]==_0x37893c[_0x12b393(0x20e)]);if(_0x593570[_0x12b393(0x103)]>0x0){if(Math['abs'](_0x507ead)>_0x37893c['number']-_0x593570[_0x12b393(0x103)])_0x34cac2=![];}else{if(Math['abs'](_0x507ead)>_0x37893c[_0x12b393(0x149)])_0x34cac2=![];}}if(_0x37893c[_0x12b393(0x140)]==_0x12b393(0x252)){let _0x33cee0=config[_0x12b393(0x1fb)]['find'](_0x4a633f=>_0x4a633f[_0x12b393(0x20e)]==config[_0x12b393(0xf5)]),_0x257fdf=currentCoins[_0x12b393(0xfa)](_0x3a3bd7=>_0x3a3bd7[_0x12b393(0x20e)]==config[_0x12b393(0xf5)]);if(_0x33cee0['offset']>0x0){if(Math[_0x12b393(0x167)](_0x507ead)*_0x37893c['last']>_0x257fdf['number']-_0x33cee0[_0x12b393(0x103)])_0x34cac2=![];}else{if(Math[_0x12b393(0x167)](_0x507ead)*_0x37893c[_0x12b393(0x20a)]>_0x257fdf[_0x12b393(0x149)])_0x34cac2=![];}}return _0x34cac2;}async function getBalances(_0x1521da=!![]){const _0x33fce6=_0x1b7fae;if(botPaused)return;let _0x3b0804=0x0,_0x1de9cc;const _0x4ceac8=config[_0x33fce6(0x184)];if(config[_0x33fce6(0x155)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x33fce6(0x1c6)](_0xd62f85=>{const _0x5c15e9=_0x33fce6;if(_0xd62f85['coin']!=config[_0x5c15e9(0xf5)]){let _0x4fb4ee=gTicker[noslash(_0xd62f85[_0x5c15e9(0x134)])];_0x1de9cc=_0xd62f85[_0x5c15e9(0x19c)]?0x1/_0x4fb4ee:_0x4fb4ee;}else _0x1de9cc=0x1;let _0x10b6a0=_0xd62f85['number']*_0x1de9cc;_0x3b0804+=_0x10b6a0,_0xd62f85[_0x5c15e9(0x20a)]=formatResult(Number(_0x1de9cc),0x8),_0xd62f85[_0x5c15e9(0xc1)]=_0x10b6a0;}),currentCoins[_0x33fce6(0x1c6)](_0x193a94=>{const _0xd08186=_0x33fce6;let _0xce905f=config[_0xd08186(0x1fb)][_0xd08186(0xfa)](_0x4c9167=>_0x4c9167['coin']==_0x193a94['coin']),_0x5abcd4=Number(_0xce905f[_0xd08186(0x17e)]),_0x2cad43=_0x193a94[_0xd08186(0xc1)]/_0x3b0804*0x64,_0xf45302=_0x5abcd4*_0x3b0804/0x64/_0x193a94[_0xd08186(0x20a)]-_0x193a94[_0xd08186(0x149)];_0x193a94[_0xd08186(0x17e)]=formatResult(_0x2cad43,0x3),_0x193a94[_0xd08186(0x1dc)]=formatResult(_0x5abcd4,0x3),_0x193a94[_0xd08186(0xbf)]=formatResult(_0xf45302,0x8),_0x193a94[_0xd08186(0x140)]='',_0x193a94[_0xd08186(0x23d)]=![];if(_0x193a94[_0xd08186(0x20e)]!=config[_0xd08186(0xf5)]){if(_0x193a94['distribution']>_0x5abcd4)_0x193a94[_0xd08186(0x140)]=_0xd08186(0x186),_0x193a94[_0xd08186(0x23d)]=checkMinimums(_0x193a94);else _0x193a94[_0xd08186(0x17e)]<_0x5abcd4&&(_0x193a94[_0xd08186(0x140)]=_0xd08186(0x252),_0x193a94[_0xd08186(0x23d)]=checkMinimums(_0x193a94));}_0x193a94[_0xd08186(0x172)]=_0x193a94['distribution']/_0x193a94['target']-0x1;if(_0x193a94['orderstatus']=='filled'||_0x193a94[_0xd08186(0x101)]==_0xd08186(0xb7))_0x193a94[_0xd08186(0x101)]='none';}),currentCoins[_0x33fce6(0x17c)]((_0x2a9a5d,_0x1d1f58)=>_0x2a9a5d[_0x33fce6(0x172)]<_0x1d1f58[_0x33fce6(0x172)]?0x1:_0x1d1f58[_0x33fce6(0x172)]<_0x2a9a5d['delta']?-0x1:0x0);const _0x47bdbf=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47bdbf[_0x33fce6(0x1fe)],'usd':_0x47bdbf[_0x33fce6(0x1ed)],'portfolio':JSON[_0x33fce6(0xda)](currentCoins),'threshold':_0x4ceac8},proxyEmit(_0x33fce6(0x14c),{'serverversion':serverversion,'balances':lastBalances});if(_0x1521da){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4ceac8});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4ceac8});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x468ce8=getNormalizedPerformance();getStartingBalances(_0x468ce8),emitPerformance(_0x468ce8);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x40a49a=_0x1b7fae;if(!lastBalances)return;let _0x247461=[],_0x364f1c,_0x4afc22=JSON[_0x40a49a(0x221)](lastBalances['portfolio']);_0x4afc22[_0x40a49a(0x17c)]((_0x1aeb53,_0x23f1bc)=>_0x1aeb53[_0x40a49a(0x20e)]>_0x23f1bc['coin']?0x1:_0x23f1bc['coin']>_0x1aeb53[_0x40a49a(0x20e)]?-0x1:0x0),_0x4afc22['forEach'](_0x5a10f1=>{const _0x609c43=_0x40a49a;let _0x51ef32={'coin':_0x5a10f1[_0x609c43(0x20e)],'number':_0x5a10f1[_0x609c43(0x149)],'price':_0x5a10f1[_0x609c43(0x20a)]};_0x247461[_0x609c43(0x13c)](_0x51ef32);});const _0x333f7d=await getFiat();_0x364f1c={'date':lastBalances[_0x40a49a(0x240)]['split']('\x20')[0x0],'eur':_0x333f7d['eur'],'usd':_0x333f7d[_0x40a49a(0x1ed)],'coins':_0x247461};let _0x42f195=dbPerformance[_0x40a49a(0x18c)](_0x40a49a(0x122))[_0x40a49a(0xfa)]({'date':_0x364f1c['date']})[_0x40a49a(0xc1)]();_0x42f195?_0x364f1c[_0x40a49a(0x12c)]!=config[_0x40a49a(0x222)]&&dbPerformance['get'](_0x40a49a(0x122))[_0x40a49a(0xfa)]({'date':_0x364f1c['date']})[_0x40a49a(0xee)](_0x364f1c)[_0x40a49a(0xa8)]():dbPerformance[_0x40a49a(0x18c)]('data')[_0x40a49a(0x13c)](_0x364f1c)[_0x40a49a(0xa8)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x51858f=_0x1b7fae;let _0x21090e=[];if(dbPerformance[_0x51858f(0x158)](_0x51858f(0x122))[_0x51858f(0xc1)]()){let _0x4edafb=dbPerformance[_0x51858f(0x18c)]('data')['cloneDeep']()[_0x51858f(0xbb)](_0x5c8310=>{const _0x11bc17=_0x51858f;if(_0x5c8310[_0x11bc17(0xbd)][_0x11bc17(0x1ab)]==0x0)return![];else return!![];})[_0x51858f(0x244)](_0x51858f(0x12c))[_0x51858f(0xc1)](),_0x1ef9fa=[...config[_0x51858f(0x1a2)]];_0x1ef9fa[_0x51858f(0x17c)]((_0x2eb7e9,_0x4b6d61)=>_0x2eb7e9['date']>_0x4b6d61[_0x51858f(0x12c)]?-0x1:_0x4b6d61[_0x51858f(0x12c)]>_0x2eb7e9[_0x51858f(0x12c)]?0x1:0x0);let _0x1ee01f=0x1,_0x3ff9a0=[],_0x35f6d6=0x0;_0x4edafb[_0x51858f(0x171)]()[_0x51858f(0x19c)]()[_0x51858f(0x1c6)]((_0x55948a,_0x2729bf)=>{const _0x1e91bc=_0x51858f;if(_0x1ef9fa[_0x35f6d6]){if(_0x4edafb[_0x4edafb['length']-_0x2729bf]&&_0x1ef9fa[_0x35f6d6][_0x1e91bc(0x12c)]==_0x4edafb[_0x4edafb[_0x1e91bc(0x1ab)]-_0x2729bf][_0x1e91bc(0x12c)]){if(_0x2729bf<_0x4edafb[_0x1e91bc(0x1ab)]){let _0x7f5910=0x0,_0x5ac81a=0x0;_0x4edafb[_0x4edafb[_0x1e91bc(0x1ab)]-_0x2729bf][_0x1e91bc(0xbd)]['forEach'](_0x286f81=>{const _0x41e66a=_0x1e91bc;_0x5ac81a+=_0x286f81[_0x41e66a(0x149)]*_0x286f81['price'];}),_0x1ef9fa[_0x35f6d6][_0x1e91bc(0x220)]['forEach'](_0x2146de=>{const _0x563c04=_0x1e91bc;_0x7f5910+=_0x2146de['number']*_0x2146de[_0x563c04(0x152)];}),_0x1ee01f*=_0x7f5910/(_0x5ac81a-_0x7f5910)+0x1;}_0x35f6d6++;}}let _0x5df74d=0x0;_0x55948a[_0x1e91bc(0xbd)][_0x1e91bc(0x1c6)](_0x3ef81c=>{const _0x38f72c=_0x1e91bc;_0x5df74d+=_0x3ef81c[_0x38f72c(0x149)]*_0x3ef81c[_0x38f72c(0x152)];}),_0x3ff9a0[_0x4edafb[_0x1e91bc(0x1ab)]-_0x2729bf-0x1]=_0x5df74d*(_0x1ee01f-0x1);});let _0x2c7987=[];_0x1ef9fa=[...config[_0x51858f(0x1a2)]]||[];let _0xebf27=0x0;_0x35f6d6=0x0,_0x4edafb['forEach']((_0x5c1541,_0x2e718e)=>{const _0x15fe72=_0x51858f;if(_0x1ef9fa[_0x35f6d6]){const _0x148052=fns[_0x15fe72(0x221)](_0x1ef9fa[_0x35f6d6][_0x15fe72(0x12c)],_0x15fe72(0x24e),new Date()),_0x4e122b=fns['parse'](_0x5c1541['date'],'yyyy/MM/dd',new Date());if(fns[_0x15fe72(0xca)](_0x148052,_0x4e122b)){let _0x545414=0x0;_0x1ef9fa[_0x35f6d6][_0x15fe72(0x220)][_0x15fe72(0x1c6)](_0x499e37=>{const _0x13acaa=_0x15fe72;!_0x2c7987[_0x499e37[_0x13acaa(0x20e)]]?_0x2c7987[_0x499e37[_0x13acaa(0x20e)]]=_0x499e37[_0x13acaa(0x149)]:(_0x545414=_0x2c7987[_0x499e37['coin']],_0x2c7987[_0x499e37[_0x13acaa(0x20e)]]+=_0x499e37[_0x13acaa(0x149)]);const _0x256aa8=_0x5c1541[_0x13acaa(0xbd)]['find'](_0x3d06d5=>_0x3d06d5['coin']==_0x499e37[_0x13acaa(0x20e)]);(!_0x256aa8||_0x256aa8[_0x13acaa(0x149)]==0x0)&&(_0xebf27+=(-_0x499e37['number']-_0x545414)*_0x499e37[_0x13acaa(0x152)]);}),_0x35f6d6++;}}_0x5c1541[_0x15fe72(0xbd)]['forEach']((_0x2fcb46,_0x24b77d)=>{const _0x18669f=_0x15fe72;_0x2c7987[_0x2fcb46[_0x18669f(0x20e)]]&&(_0x2fcb46[_0x18669f(0x1f9)]=_0x2c7987[_0x2fcb46[_0x18669f(0x20e)]]);}),_0x21090e[_0x15fe72(0x13c)]({'date':_0x5c1541[_0x15fe72(0x12c)],'eur':_0x5c1541[_0x15fe72(0x1fe)],'usd':_0x5c1541[_0x15fe72(0x1ed)],'offset':_0x3ff9a0[_0x2e718e],'netoffset':_0xebf27,'coins':_0x5c1541['coins']});});}return _0x21090e;}function emitPerformance(_0x23e661){const _0x3d4b8a=_0x1b7fae;_0x23e661[_0x3d4b8a(0x1ab)]!==0x0?(proxyEmit(_0x3d4b8a(0x24f),_0x23e661),lastPerformanceEmitted=getDate()):proxyEmit(_0x3d4b8a(0x24f),[]);}function getPerf(_0x245c54,_0x3f6b49){const _0x1fe2c8=_0x1b7fae;let _0x3d23eb=0x0,_0x2cd7bf=0x0,_0x55d29c=0x0;_0x245c54['coins']['forEach'](_0x1b0657=>{_0x3d23eb+=_0x1b0657['number']*_0x1b0657['price'];});_0x3f6b49&&(_0x3d23eb+=_0x245c54[_0x1fe2c8(0x103)]);if(config[_0x1fe2c8(0xf5)]===_0x1fe2c8(0x128)||config[_0x1fe2c8(0xf5)]==='ETH'||config['basecoin']===_0x1fe2c8(0xf1))_0x2cd7bf=_0x3d23eb*_0x245c54[_0x1fe2c8(0x1fe)],_0x55d29c=_0x3d23eb*_0x245c54[_0x1fe2c8(0x1ed)];else{if(usdBasecoins[_0x1fe2c8(0xcb)](config[_0x1fe2c8(0xf5)]))_0x2cd7bf=_0x3d23eb*_0x245c54[_0x1fe2c8(0x1fe)]/_0x245c54[_0x1fe2c8(0x1ed)],_0x55d29c=_0x3d23eb;else config[_0x1fe2c8(0xf5)]==='EUR'&&(_0x2cd7bf=_0x3d23eb,_0x55d29c=_0x3d23eb*_0x245c54[_0x1fe2c8(0x1ed)]/_0x245c54[_0x1fe2c8(0x1fe)]);}return[_0x3d23eb,_0x2cd7bf,_0x55d29c];}function getKPIs(_0x2468cb,_0x614ed=_0x1b7fae(0x143)){const _0x2f91ce=_0x1b7fae,_0x13ca1c=config[_0x2f91ce(0xf5)],_0x2d0de5=lastBalances,_0x2496d3=currentCoins,_0x555cf8=getNormalizedPerformance(),_0x162c71=_0x2468cb==='basecoin'?_0x13ca1c:_0x2468cb===_0x2f91ce(0x1d5)||_0x2468cb===_0x2f91ce(0xe1)?_0x614ed:_0x2f91ce(0x1a4)+_0x13ca1c,_0x5e55ed=_0x2468cb===_0x2f91ce(0xd8)?_0x2f91ce(0x16e):_0x2468cb===_0x2f91ce(0xe1)?_0x2f91ce(0x16e):_0x162c71+_0x2f91ce(0xae),_0x2f633b=_0x2468cb===_0x2f91ce(0xd8)||_0x2468cb===_0x2f91ce(0xe1)?'Net\x20effect':_0x162c71+'\x20change';let _0xfb0a79=0x0;_0x2496d3[_0x2f91ce(0x1c6)](_0x423dc1=>{const _0x28e56e=_0x2f91ce;_0xfb0a79+=_0x423dc1[_0x28e56e(0x149)]*_0x423dc1[_0x28e56e(0x20a)];});if(_0x2468cb==='fiat'||_0x2468cb===_0x2f91ce(0xe1)){if(_0x13ca1c==='BTC'||_0x13ca1c===_0x2f91ce(0x188)||_0x13ca1c===_0x2f91ce(0xf1))_0xfb0a79=_0xfb0a79*(_0x614ed===_0x2f91ce(0x143)?_0x2d0de5['eur']:_0x2d0de5[_0x2f91ce(0x1ed)]);else{if(usdBasecoins[_0x2f91ce(0xcb)](_0x13ca1c))_0xfb0a79=_0xfb0a79*(_0x614ed===_0x2f91ce(0x143)?_0x2d0de5['eur']/_0x2d0de5[_0x2f91ce(0x1ed)]:0x1);else _0x13ca1c===_0x2f91ce(0x143)&&(_0xfb0a79=_0xfb0a79*(_0x614ed===_0x2f91ce(0x143)?0x1:_0x2d0de5[_0x2f91ce(0x1ed)]/_0x2d0de5[_0x2f91ce(0x1fe)]));}}let _0x2d394c;if(_0xfb0a79!==0x0){if(_0x2468cb===_0x2f91ce(0xf5))_0x2d394c=(_0xfb0a79/startingBalances[_0x2f91ce(0xf5)]-0x1)*0x64;else{if(_0x614ed===_0x2f91ce(0x143))_0x2d394c=(_0xfb0a79/startingBalances[_0x2f91ce(0x1fe)]-0x1)*0x64;else _0x2d394c=(_0xfb0a79/startingBalances[_0x2f91ce(0x1ed)]-0x1)*0x64;}let _0x28ca9a=0x0;if(startingBalances[_0x2f91ce(0xbd)])_0x2496d3['forEach'](_0x2bb33d=>{const _0x3c2a9a=_0x2f91ce;let _0x32efd7=startingBalances[_0x3c2a9a(0xbd)]['find'](_0x5c197d=>_0x5c197d[_0x3c2a9a(0x20e)]===_0x2bb33d[_0x3c2a9a(0x20e)]);if(_0x32efd7&&_0x32efd7['coin']&&_0x2bb33d[_0x3c2a9a(0x149)]!==0x0)_0x28ca9a+=_0x32efd7[_0x3c2a9a(0x149)]*_0x2bb33d[_0x3c2a9a(0x20a)];});let _0x553946=0x0;if(_0x555cf8[_0x2f91ce(0x1ab)]!==0x0){let _0x557c1f=_0x555cf8[_0x555cf8[_0x2f91ce(0x1ab)]-0x1];_0x553946=_0x557c1f['netoffset'];}_0x28ca9a-=_0x553946;_0x2468cb===_0x2f91ce(0xd8)&&(_0x2d394c=(_0xfb0a79-_0x28ca9a)/startingBalances['basecoin']*0x64,_0xfb0a79=_0xfb0a79-_0x28ca9a);if(_0x2468cb==='net-fiat'){let _0x3efb0c=_0x614ed==='EUR'?startingBalances[_0x2f91ce(0x1fe)]:startingBalances[_0x2f91ce(0x1ed)];if(_0x13ca1c===_0x2f91ce(0x128)||_0x13ca1c===_0x2f91ce(0x188)||_0x13ca1c===_0x2f91ce(0xf1))_0x28ca9a=_0x614ed===_0x2f91ce(0x143)?_0x28ca9a*_0x2d0de5['eur']:_0x28ca9a*_0x2d0de5[_0x2f91ce(0x1ed)];else{if(usdBasecoins[_0x2f91ce(0xcb)](_0x13ca1c))_0x28ca9a=_0x614ed===_0x2f91ce(0x143)?_0x28ca9a*_0x2d0de5[_0x2f91ce(0x1fe)]/_0x2d0de5[_0x2f91ce(0x1ed)]:_0x28ca9a;else _0x13ca1c===_0x2f91ce(0x143)&&(_0x28ca9a=_0x614ed===_0x2f91ce(0x143)?_0x28ca9a:_0x28ca9a*_0x2d0de5[_0x2f91ce(0x1ed)]/_0x2d0de5[_0x2f91ce(0x1fe)]);}_0x2d394c=(_0xfb0a79-_0x28ca9a)/_0x3efb0c*0x64,_0xfb0a79=_0xfb0a79-_0x28ca9a;}if(_0x2d394c){if(_0x2d394c<0x64)_0x2d394c=_0x2d394c[_0x2f91ce(0xbe)](0x2);else{if(_0x2d394c<0x3e8)_0x2d394c=_0x2d394c['toFixed'](0x1);else _0x2d394c=_0x2d394c[_0x2f91ce(0xbe)](0x0);}}else _0x2d394c=Number('0')[_0x2f91ce(0xbe)](0x2);if(_0xfb0a79){if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0.000001)_0xfb0a79=_0xfb0a79[_0x2f91ce(0xbe)](0x2);else{if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0.1)_0xfb0a79=_0xfb0a79['toFixed'](0x6);else{if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0x1)_0xfb0a79=_0xfb0a79[_0x2f91ce(0xbe)](0x5);else{if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0xa)_0xfb0a79=_0xfb0a79[_0x2f91ce(0xbe)](0x4);else{if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0x64)_0xfb0a79=_0xfb0a79['toFixed'](0x3);else{if(Math[_0x2f91ce(0x167)](_0xfb0a79)<0x3e8)_0xfb0a79=_0xfb0a79['toFixed'](0x2);else _0xfb0a79=_0xfb0a79[_0x2f91ce(0xbe)](0x2);}}}}}}else _0xfb0a79=Number('0')[_0x2f91ce(0xbe)](0x2);}else _0x2d394c=Number('0')['toFixed'](0x2);return{'value':_0xfb0a79,'change':_0x2d394c,'leftTxt':_0x5e55ed,'rightTxt':_0x2f633b};}async function getStartingBalances(_0x379d96,_0x2e9945=!![]){const _0x1c6e37=_0x1b7fae;if(_0x379d96[_0x1c6e37(0x1ab)]!==0x0){const [_0x52093f,_0x35c079,_0x4de23e]=getPerf(_0x379d96[0x0],!![]);let _0x29110e=[];config[_0x1c6e37(0x1fb)]['forEach'](_0x4e79ca=>{const _0xc5c497=_0x1c6e37;let _0x443b2f=0x0,_0x5eba19;config[_0xc5c497(0x1a2)][_0xc5c497(0x1c6)](_0x1b985b=>{const _0x1efc05=_0xc5c497;let _0x55709a=_0x1b985b[_0x1efc05(0x220)][_0x1efc05(0xfa)](_0x1ac54b=>_0x1ac54b[_0x1efc05(0x20e)]==_0x4e79ca[_0x1efc05(0x20e)]);if(_0x55709a){_0x443b2f+=_0x55709a[_0x1efc05(0x149)];if(!_0x5eba19)_0x5eba19=_0x55709a[_0x1efc05(0x152)];}}),_0x29110e['push']({'coin':_0x4e79ca[_0xc5c497(0x20e)],'number':_0x443b2f,'initialprice':_0x5eba19});});const _0x72b8fe={'basecoin':_0x52093f,'eur':_0x35c079,'usd':_0x4de23e,'coins':_0x29110e};if(_0x2e9945)proxyEmit(_0x1c6e37(0x1f5),_0x72b8fe);startingBalances=_0x72b8fe;}}function headlessMode(_0x2fb6aa){const _0x32084a=_0x1b7fae;let _0x359b44=_0x2fb6aa[_0x32084a(0x1fb)],_0xfe9ce3=_0x2fb6aa[_0x32084a(0x184)],_0x2e04b4=[];for(let _0xfcac6d of _0x359b44){if(_0xfcac6d['coin']!=config[_0x32084a(0xf5)]){if(_0xfcac6d[_0x32084a(0x172)]>=_0xfe9ce3/0x64){if(_0xfcac6d[_0x32084a(0x23d)])_0x2e04b4['push'](_0xfcac6d);}else{if(_0xfcac6d[_0x32084a(0x172)]<=-_0xfe9ce3/0x64){if(_0xfcac6d[_0x32084a(0x23d)])_0x2e04b4[_0x32084a(0x13c)](_0xfcac6d);}}}}_0x2e04b4[_0x32084a(0x1ab)]>0x0&&placeOrder(_0x2e04b4);}function notifyBalance(_0x287ac2){const _0x50c563=_0x1b7fae;let _0x177a6c=_0x287ac2[_0x50c563(0x1fb)],_0x36e920=_0x287ac2['threshold'],_0x5b9e2b=[];for(let _0x34be90 of _0x177a6c){if(_0x34be90['coin']!=config[_0x50c563(0xf5)]){if(_0x34be90[_0x50c563(0x172)]>=_0x36e920/0x64){if(_0x34be90[_0x50c563(0x23d)])_0x5b9e2b[_0x50c563(0x13c)](_0x34be90);}else{if(_0x34be90['delta']<=-_0x36e920/0x64){if(_0x34be90[_0x50c563(0x23d)])_0x5b9e2b[_0x50c563(0x13c)](_0x34be90);}}}}if(_0x5b9e2b['length']>0x0){let _0xb85316=_0x5b9e2b[_0x50c563(0x1e0)](_0x9afc53=>_0x9afc53[_0x50c563(0x20e)]);_0xb85316[_0x50c563(0x17c)]();let _0x235041=_0xb85316['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x50c563(0x1c8),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x235041;}}function symbolToCoin(_0x28c333){const _0x2e5497=_0x1b7fae;let _0x4c6703;if(_0x28c333[_0x2e5497(0xcb)]('/'+config['basecoin']))_0x4c6703=_0x28c333['replace']('/'+config[_0x2e5497(0xf5)],'');if(_0x28c333[_0x2e5497(0xcb)](config['basecoin']+'/'))_0x4c6703=_0x28c333['replace'](config[_0x2e5497(0xf5)]+'/','');return _0x4c6703;}function setLockOrders(_0x223975){const _0x42f20f=_0x1b7fae;lockOrders=_0x223975,logger[_0x42f20f(0x1f4)](_0x42f20f(0x214)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x396c0f=![]){const _0xec00f=_0x1b7fae;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0xec00f(0x23e)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x396c0f){const _0x3b9152=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b9152,setBlockTransactionDetection(![]);}validateOrdersState=_0xec00f(0x1f9),persistOpenOrders([]),setLockOrders(ORDERS[_0xec00f(0x138)]);}}function _0x3715(_0x4af43f,_0x54aa6a){const _0x21452f=_0x5bf4();return _0x3715=function(_0x2a1866,_0x315ccb){_0x2a1866=_0x2a1866-0x92;let _0x5bf457=_0x21452f[_0x2a1866];return _0x5bf457;},_0x3715(_0x4af43f,_0x54aa6a);}async function validateOrders(_0x527d5c){const _0x5e087b=_0x1b7fae;if(_0x527d5c)validateOrdersState=_0x527d5c;logger[_0x5e087b(0x1f4)](_0x5e087b(0x1f0)+validateOrdersState+_0x5e087b(0xff)+Object[_0x5e087b(0x1ba)](ORDERS)[lockOrders]);let _0x1b1ec2=[],_0x3a0e11=config[_0x5e087b(0x232)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5e087b(0xd6)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x5e087b(0x1f4)](_0x5e087b(0x1af)+validateOrdersState);for(let _0x31933f=lastOrders['length']-0x1;_0x31933f>=0x0;_0x31933f--){let _0x2ea5fc=lastOrders[_0x31933f],_0x63c674=![];_0x2ea5fc[_0x5e087b(0x97)]>0x0&&(_0x63c674=!![]),_0x1b1ec2[_0x5e087b(0x13c)](_0x63c674),_0x63c674&&config[_0x5e087b(0x232)]!=_0x5e087b(0xe9)&&logHistory(_0x5e087b(0x174),_0x5e087b(0x11c)+_0x2ea5fc[_0x5e087b(0x134)]+'\x20'+_0x2ea5fc[_0x5e087b(0x140)]+'\x20#'+formatResult(_0x2ea5fc[_0x5e087b(0x97)],0x8)+'\x20@'+formatResult(_0x2ea5fc[_0x5e087b(0x152)],0x8)),_0x63c674&&lastOrders[_0x5e087b(0x20f)](_0x31933f,0x1);}persistOpenOrders(lastOrders);const _0x24ba55=coolingDown?_0x5e087b(0xfe):_0x5e087b(0xdf);if(validateOrdersState=='initial'){validateOrdersState=_0x5e087b(0x11b);if(_0x1b1ec2['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x5e087b(0x11b)){if(_0x1b1ec2[_0x5e087b(0xcb)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x5e087b(0xc9))_0x1b1ec2[_0x5e087b(0xcb)](![])&&(config[_0x5e087b(0x232)]==_0x5e087b(0xe9)?logHistory(_0x5e087b(0x1b4),_0x5e087b(0x1e8)+Math[_0x5e087b(0x253)](_0x3a0e11*validateOrderInterval/0xea60)+_0x5e087b(0xb8)+_0x24ba55):(await cancelOrders(),logHistory(_0x5e087b(0x1b4),_0x5e087b(0x153)+Math[_0x5e087b(0x253)](_0x3a0e11*validateOrderInterval/0xea60)+_0x5e087b(0xb8)+_0x24ba55))),await unlockOrders(!![]);else{if(validateOrdersState==_0x5e087b(0x250)){if(config['ordertype']!=_0x5e087b(0xe9))logHistory(_0x5e087b(0x1b4),_0x5e087b(0x159)+_0x24ba55);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x10e90d=>{const _0x3a0775=_0x3715;try{const _0x2d01ca=await exchange[_0x3a0775(0x1d9)](_0x10e90d[_0x3a0775(0x115)],_0x10e90d[_0x3a0775(0x134)]);}catch(_0x20e0d6){if(_0x20e0d6['toString']()[_0x3a0775(0xcb)](_0x3a0775(0x210))){}else await handleError(_0x20e0d6,_0x3a0775(0x107));}});}async function initCoinResults(_0x118939){const _0x3f00d5=_0x1b7fae;_0x118939?logger[_0x3f00d5(0x1f4)](_0x3f00d5(0xea)+_0x118939):logger[_0x3f00d5(0x1f4)](_0x3f00d5(0x1b9)),config[_0x3f00d5(0x1fb)]['forEach'](_0x417e7b=>{const _0x34cd09=_0x3f00d5;if(!_0x417e7b['excluded']&&_0x417e7b[_0x34cd09(0x20e)]!=config[_0x34cd09(0xf5)]){const _0x1cd41a=currentCoins[_0x34cd09(0xfa)](_0x3f7226=>_0x3f7226[_0x34cd09(0x20e)]==_0x417e7b[_0x34cd09(0x20e)]),_0x2baebf=gTicker[noslash(_0x417e7b[_0x34cd09(0x134)])];let _0x26bef8=_0x1cd41a?_0x1cd41a['number']:null,_0xfd459d=_0x417e7b[_0x34cd09(0x19c)]?0x1/_0x2baebf:_0x2baebf,_0x23448b;config[_0x34cd09(0x1a2)][_0x34cd09(0x1c6)](_0x1c288c=>{const _0x10e217=_0x34cd09;!_0x23448b&&(_0x23448b=_0x1c288c[_0x10e217(0x220)][_0x10e217(0xfa)](_0x5b4951=>_0x5b4951[_0x10e217(0x20e)]==_0x417e7b['coin']),_0x23448b&&(_0x26bef8=_0x23448b[_0x10e217(0x149)],_0xfd459d=_0x23448b[_0x10e217(0x152)]));});let _0x37c71b=dbCoinResults[_0x34cd09(0x18c)](_0x34cd09(0xbd))[_0x34cd09(0xfa)]({'coin':_0x417e7b[_0x34cd09(0x20e)]})['value']();if(!_0x37c71b){const _0x212c8b={'coin':_0x417e7b['coin'],'number':_0x26bef8,'breakeven':_0xfd459d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x34cd09(0xbd))[_0x34cd09(0x13c)](_0x212c8b)['write']();}else{if(_0x118939&&_0x417e7b[_0x34cd09(0x20e)]==_0x118939){const _0x3ae991={'coin':_0x417e7b[_0x34cd09(0x20e)],'number':_0x26bef8,'breakeven':_0xfd459d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x34cd09(0x18c)]('coins')[_0x34cd09(0xfa)]({'coin':_0x417e7b[_0x34cd09(0x20e)]})[_0x34cd09(0xee)](_0x3ae991)[_0x34cd09(0xa8)]();}}}});}async function updateCoinResults(_0x4d4226,_0x34169b=![]){const _0xc9ae12=_0x1b7fae;let _0x1d1815,_0x58cc19,_0x45c8a0,_0x270b0a,_0x477ca6,_0x5acc36,_0x128ee2=dbCoinResults['get'](_0xc9ae12(0xbd))[_0xc9ae12(0xfa)]({'coin':_0x4d4226[_0xc9ae12(0x20e)]})['value'](),_0x9769ff=![];_0x128ee2&&Object[_0xc9ae12(0xb1)](_0x128ee2)[_0xc9ae12(0x1c6)](([_0x3be15a,_0x279693])=>{if(_0x279693==null)_0x9769ff=!![];});(!_0x128ee2||_0x9769ff)&&(await initCoinResults(_0x4d4226[_0xc9ae12(0x20e)]),_0x128ee2=dbCoinResults[_0xc9ae12(0x18c)](_0xc9ae12(0xbd))[_0xc9ae12(0xfa)]({'coin':_0x4d4226['coin']})['value']());_0x4d4226[_0xc9ae12(0x19c)]&&(_0x5acc36={'filled':_0x4d4226[_0xc9ae12(0x97)]*_0x4d4226[_0xc9ae12(0x152)],'amount':_0x4d4226['filled']*_0x4d4226[_0xc9ae12(0x152)],'side':_0x4d4226[_0xc9ae12(0x140)]==_0xc9ae12(0x186)?_0xc9ae12(0x252):_0xc9ae12(0x186),'price':0x1/_0x4d4226[_0xc9ae12(0x152)]},_0x4d4226={..._0x4d4226,..._0x5acc36});_0x34169b?_0x58cc19=_0x4d4226[_0xc9ae12(0x140)]==_0xc9ae12(0x252)?_0x128ee2[_0xc9ae12(0x149)]+_0x4d4226['filled']:_0x128ee2[_0xc9ae12(0x149)]-_0x4d4226[_0xc9ae12(0x97)]:_0x58cc19=await getCoinNumber(_0x4d4226[_0xc9ae12(0x20e)]);if(_0x4d4226['fee']&&_0x4d4226[_0xc9ae12(0xcf)][_0xc9ae12(0x18a)]==config['basecoin'])_0x1d1815=Number(_0x4d4226[_0xc9ae12(0xcf)]['cost']);else{if(_0x4d4226[_0xc9ae12(0xcf)]&&_0x4d4226[_0xc9ae12(0xcf)][_0xc9ae12(0x18a)]==_0xc9ae12(0x224)&&!_0x34169b&&config[_0xc9ae12(0xf5)]!=_0xc9ae12(0xf1))_0x1d1815=Number(_0x4d4226[_0xc9ae12(0xcf)][_0xc9ae12(0x14d)])*gTicker['BNB'+config[_0xc9ae12(0xf5)]];else _0x1d1815=defaultFee*_0x4d4226[_0xc9ae12(0x97)]*_0x4d4226[_0xc9ae12(0x152)];}_0x4d4226[_0xc9ae12(0x140)]==_0xc9ae12(0x252)?(_0x45c8a0=_0x58cc19!=0x0?(_0x128ee2[_0xc9ae12(0x1d7)]*_0x128ee2['number']+_0x4d4226[_0xc9ae12(0x152)]*(_0x58cc19-_0x128ee2[_0xc9ae12(0x149)])+_0x1d1815)/_0x58cc19:0x0,_0x270b0a=_0x128ee2['realized']):(_0x45c8a0=_0x58cc19!=0x0?(_0x128ee2[_0xc9ae12(0x1d7)]*_0x128ee2['number']-_0x4d4226[_0xc9ae12(0x152)]*(_0x128ee2[_0xc9ae12(0x149)]-_0x58cc19)+_0x1d1815)/_0x58cc19:0x0,_0x270b0a=_0x128ee2[_0xc9ae12(0x217)]+(_0x4d4226[_0xc9ae12(0x152)]-_0x128ee2[_0xc9ae12(0x1d7)])*_0x4d4226[_0xc9ae12(0x97)]);_0x477ca6=(_0x4d4226[_0xc9ae12(0x152)]-_0x45c8a0-_0x1d1815/_0x4d4226[_0xc9ae12(0x97)])*_0x58cc19;let _0x2437ce={'coin':_0x4d4226['coin'],'number':_0x58cc19,'breakeven':formatResult(_0x45c8a0,0x8),'realized':formatResult(_0x270b0a,0x8),'unrealized':formatResult(_0x477ca6,0x8),'fees':formatResult(_0x128ee2[_0xc9ae12(0x22d)]+_0x1d1815,0x8),'sells':_0x4d4226[_0xc9ae12(0x140)]==_0xc9ae12(0x186)?_0x128ee2['sells']+0x1:_0x128ee2[_0xc9ae12(0x139)],'buys':_0x4d4226[_0xc9ae12(0x140)]==_0xc9ae12(0x252)?_0x128ee2['buys']+0x1:_0x128ee2[_0xc9ae12(0x1b1)]};dbCoinResults['get'](_0xc9ae12(0xbd))[_0xc9ae12(0xfa)]({'coin':_0x4d4226['coin']})['assign'](_0x2437ce)[_0xc9ae12(0xa8)]();if(!_0x34169b){if(_0x4d4226['fee']&&_0x4d4226['fee'][_0xc9ae12(0x18a)]==_0xc9ae12(0x224)){const _0x1e347f=currentCoins[_0xc9ae12(0xfa)](_0x2b2771=>_0x2b2771[_0xc9ae12(0x20e)]=='BNB');if(_0x1e347f){let _0xca178e=dbCoinResults[_0xc9ae12(0x18c)](_0xc9ae12(0xbd))[_0xc9ae12(0xfa)]({'coin':_0xc9ae12(0x224)})[_0xc9ae12(0xc1)]();_0x2437ce={..._0xca178e,'number':_0x1e347f[_0xc9ae12(0x149)]},dbCoinResults['get'](_0xc9ae12(0xbd))[_0xc9ae12(0xfa)]({'coin':_0xc9ae12(0x224)})[_0xc9ae12(0xee)](_0x2437ce)[_0xc9ae12(0xa8)]();}}}}async function placeOrder(_0x335b8f){const _0x1d7c2b=_0x1b7fae,_0x351c18=config[_0x1d7c2b(0x232)]=='market'?_0x1d7c2b(0xe9):_0x1d7c2b(0xd0);if(lockOrders==ORDERS[_0x1d7c2b(0x138)]&&!coolingDown){setLockOrders(ORDERS[_0x1d7c2b(0x14a)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x1d7c2b(0x1f4)]('Placing\x20order\x20for:\x20'+_0x335b8f[_0x1d7c2b(0x1e0)](_0x12cf42=>_0x12cf42[_0x1d7c2b(0x20e)])[_0x1d7c2b(0x226)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x1d7c2b(0x1f9);let _0x44b9f4=![];lastOrders=[];const _0x24c785=config[_0x1d7c2b(0x184)];for(const _0x13bc03 of _0x335b8f){let _0x1b92d6,_0x5ac693,_0x4635fd,_0x102fe3,_0x9676db,_0x4e6d7a=_0x13bc03[_0x1d7c2b(0x134)];logger[_0x1d7c2b(0x1f4)]('Trigger:\x20'+_0x13bc03[_0x1d7c2b(0x20e)]+'\x20'+_0x13bc03[_0x1d7c2b(0x149)]+'\x20'+_0x13bc03[_0x1d7c2b(0x20a)]+'\x20'+_0x13bc03[_0x1d7c2b(0x17e)]+'%\x20'+_0x13bc03[_0x1d7c2b(0x1dc)]+'%\x20'+(0x64*_0x13bc03[_0x1d7c2b(0x172)])['toFixed'](0x2)+'%\x20('+_0x24c785[_0x1d7c2b(0xbe)](0x2)+'%)');const _0x2ca387=currentCoins[_0x1d7c2b(0xfa)](_0x4ac0fe=>_0x4ac0fe[_0x1d7c2b(0x20e)]==_0x13bc03[_0x1d7c2b(0x20e)]);_0x2ca387&&(_0x2ca387[_0x1d7c2b(0x1d4)]=_0x13bc03[_0x1d7c2b(0x149)]);try{const _0x44d0f9=await exchange[_0x1d7c2b(0x21a)](_0x4e6d7a);_0x1b92d6=_0x13bc03[_0x1d7c2b(0x19c)]?0x1/_0x13bc03[_0x1d7c2b(0x20a)]:_0x13bc03[_0x1d7c2b(0x20a)],_0x5ac693=_0x44d0f9[_0x1d7c2b(0x1b2)],_0x4635fd=_0x44d0f9[_0x1d7c2b(0xf6)];_0x13bc03[_0x1d7c2b(0x19c)]?(_0x102fe3=_0x13bc03[_0x1d7c2b(0x140)]==_0x1d7c2b(0x252)?'sell':_0x1d7c2b(0x252),_0x9676db=Math[_0x1d7c2b(0x167)](_0x13bc03[_0x1d7c2b(0xbf)])/_0x1b92d6):(_0x102fe3=_0x13bc03[_0x1d7c2b(0x140)],_0x9676db=Math[_0x1d7c2b(0x167)](_0x13bc03['trade']));_0x351c18=='limit'&&(config[_0x1d7c2b(0x232)]==_0x1d7c2b(0xc3)&&(_0x1b92d6=_0x102fe3==_0x1d7c2b(0x252)?_0x5ac693:_0x4635fd),config[_0x1d7c2b(0x232)]=='limit-low'&&(_0x1b92d6=_0x102fe3=='buy'?_0x4635fd:_0x5ac693));_0x9676db=formatResult(_0x9676db,0x8),_0x1b92d6=formatResult(_0x1b92d6,0x8);const _0xc30626=_0x102fe3==_0x1d7c2b(0x186)?config[_0x1d7c2b(0x13a)]?String[_0x1d7c2b(0x106)]('0x'+config[_0x1d7c2b(0x13a)])+'\x20':'':config[_0x1d7c2b(0x1bf)]?String['fromCodePoint']('0x'+config[_0x1d7c2b(0x1bf)])+'\x20':'',_0xfe505=_0x351c18==_0x1d7c2b(0xe9)?_0x1d7c2b(0x1b5):config[_0x1d7c2b(0x232)]=='limit-high'?'Limit\x20(high-margin)':_0x1d7c2b(0x166),_0x3a5226=(Math[_0x1d7c2b(0x1f3)](Math[_0x1d7c2b(0x192)]()*0x35a4e900)+0x5f5e100)[_0x1d7c2b(0x1c2)]();lastOrders[_0x1d7c2b(0x13c)]({'customId':_0x3a5226,'symbol':_0x4e6d7a,'coin':_0x13bc03[_0x1d7c2b(0x20e)],'amount':_0x9676db,'price':_0x1b92d6,'side':_0x102fe3,'reverse':_0x13bc03[_0x1d7c2b(0x19c)],'filled':0x0});if(_0x351c18==_0x1d7c2b(0xe9))logHistory(_0x1d7c2b(0x174),''+_0xc30626+_0xfe505+_0x1d7c2b(0x1bd)+_0x4e6d7a+'\x20'+_0x102fe3+'\x20#'+formatResult(_0x9676db,0x8)+'\x20@'+formatResult(_0x1b92d6,0x8));else logHistory(_0x1d7c2b(0x174),''+_0xc30626+_0xfe505+'\x20order:\x20'+_0x4e6d7a+'\x20'+_0x102fe3+'\x20#'+formatResult(_0x9676db,0x8)+'\x20@'+formatResult(_0x1b92d6,0x8));let _0x2bcb55;_0x351c18==_0x1d7c2b(0xe9)?_0x102fe3==_0x1d7c2b(0x252)&&[_0x1d7c2b(0x235),_0x1d7c2b(0x132),_0x1d7c2b(0xde),_0x1d7c2b(0x1d0),_0x1d7c2b(0x22e)][_0x1d7c2b(0xcb)](config['exchange'])?_0x2bcb55=await exchange['createOrder'](_0x4e6d7a,_0x351c18,_0x102fe3,_0x9676db,_0x1b92d6):_0x2bcb55=await exchange[_0x1d7c2b(0x231)](_0x4e6d7a,_0x351c18,_0x102fe3,_0x9676db,undefined):_0x2bcb55=await exchange['createOrder'](_0x4e6d7a,_0x351c18,_0x102fe3,_0x9676db,_0x1b92d6);logger[_0x1d7c2b(0x1f4)](_0x1d7c2b(0x234)+_0x2bcb55['id']+'\x20|\x20Custom\x20ID:\x20'+_0x3a5226);const _0x2bc81d=lastOrders['length']-0x1;if(_0x2bc81d>=0x0&&lastOrders[_0x2bc81d][_0x1d7c2b(0xb2)]==_0x3a5226){lastOrders[_0x2bc81d][_0x1d7c2b(0x115)]=_0x2bcb55['id'];if(_0x2bcb55[_0x1d7c2b(0x1d2)])lastOrders[_0x2bc81d][_0x1d7c2b(0x1d2)]=_0x2bcb55[_0x1d7c2b(0x1d2)];if(_0x2bcb55[_0x1d7c2b(0x152)])lastOrders[_0x2bc81d][_0x1d7c2b(0x152)]=_0x2bcb55[_0x1d7c2b(0x152)];lastOrders[_0x2bc81d][_0x1d7c2b(0xcf)]=_0x2bcb55[_0x1d7c2b(0xcf)];}if(config[_0x1d7c2b(0x119)]!=0x0){let _0x139dfd=null;if(cooldownTracker[_0x1d7c2b(0x1ab)]==config[_0x1d7c2b(0x119)]-0x1)_0x139dfd=cooldownTracker[_0x1d7c2b(0x131)]();const _0x27c135=getTimeStamp();cooldownTracker[_0x1d7c2b(0x13c)](_0x27c135);if(_0x139dfd){const _0x310909=fns[_0x1d7c2b(0x1e4)](new Date(_0x27c135),new Date(_0x139dfd));if(_0x310909<cooldownInterval){logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x241)+config['cooldown']+_0x1d7c2b(0x11d)+cooldownInterval/0x3c+_0x1d7c2b(0x237)+cooldownPeriod/(0xe10*0x3e8)+_0x1d7c2b(0x12f)),coolingDown=!![];break;}}}}catch(_0x4da6ea){if(_0x4da6ea[_0x1d7c2b(0x1c2)]()['includes'](_0x1d7c2b(0x228)))lastOrders=lastOrders['filter'](_0x2240bd=>_0x2240bd[_0x1d7c2b(0x134)]!=_0x4e6d7a),logHistory('error',_0x1d7c2b(0x1f8)+_0x4e6d7a),_0x44b9f4=!![];else{if(_0x4da6ea[_0x1d7c2b(0x1c2)]()[_0x1d7c2b(0xcb)](_0x1d7c2b(0xc0)))lastOrders=lastOrders['filter'](_0x4df335=>_0x4df335[_0x1d7c2b(0x134)]!=_0x4e6d7a),logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x1c5)+_0x4e6d7a),_0x44b9f4=!![];else{if(_0x4da6ea['toString']()['includes'](_0x1d7c2b(0x15d)))lastOrders=lastOrders[_0x1d7c2b(0xbb)](_0x8186d6=>_0x8186d6['symbol']!=_0x4e6d7a),logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x1bb)+_0x4e6d7a),logger[_0x1d7c2b(0x1f4)](_0x4da6ea),_0x44b9f4=!![];else _0x4da6ea['toString']()[_0x1d7c2b(0xcb)](_0x1d7c2b(0x21e))?(lastOrders=lastOrders['filter'](_0x3391e5=>_0x3391e5[_0x1d7c2b(0x134)]!=_0x4e6d7a),logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x1f8)+_0x4e6d7a),_0x44b9f4=!![]):(lastOrders=lastOrders['filter'](_0x182616=>_0x182616[_0x1d7c2b(0x134)]!=_0x4e6d7a),await handleError(_0x4da6ea,_0x1d7c2b(0x19a),_0x4e6d7a));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1d7c2b(0x1ab)]>0x0){const _0x557486=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1d7c2b(0xd6)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x557486);}else unlockOrders();_0x44b9f4&&config[_0x1d7c2b(0x155)]&&(logHistory(_0x1d7c2b(0x168),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1d7c2b(0x1b4),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1d7c2b(0x155)]&&logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x162));else lockOrders!=ORDERS[_0x1d7c2b(0x138)]&&(!config[_0x1d7c2b(0x155)]&&(config[_0x1d7c2b(0x232)]==_0x1d7c2b(0xe9)?logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x216)):logHistory(_0x1d7c2b(0x168),_0x1d7c2b(0x23a))));}}function persistOpenOrders(_0x4ea0d3){const _0x84f2eb=_0x1b7fae,_0x454fae={...config,'openOrders':_0x4ea0d3};let _0x3bdff2=dbConfig[_0x84f2eb(0x18c)](_0x84f2eb(0x1b8))[_0x84f2eb(0xfa)]({'botID':botID})[_0x84f2eb(0xc1)]();_0x3bdff2&&dbConfig[_0x84f2eb(0x18c)](_0x84f2eb(0x1b8))[_0x84f2eb(0xfa)]({'botID':botID})[_0x84f2eb(0xee)](_0x454fae)[_0x84f2eb(0xa8)]();}function restoreOrders(){const _0x415261=_0x1b7fae;let _0x2bf555;config[_0x415261(0x1cb)]&&allOpenOrders['forEach'](_0x115668=>{const _0x3ce5b4=_0x415261,_0x485f15=config[_0x3ce5b4(0x1cb)][_0x3ce5b4(0xfa)](_0x2affb6=>_0x2affb6[_0x3ce5b4(0x115)]==_0x115668['id']);_0x485f15&&(lastOrders[_0x3ce5b4(0x13c)](_0x485f15),_0x2bf555=_0x115668['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x415261(0x14a)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x19fcf9=new Date()[_0x415261(0x190)](),_0xa2f4d2=config[_0x415261(0x232)]==_0x415261(0xe9)?validateOrderTimeout*0x3c*0x3e8:config[_0x415261(0xd6)]*0x3c*0x3e8;if(_0x2bf555+_0xa2f4d2>_0x19fcf9){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x7ab07a=_0x415261;validateOrders(_0x7ab07a(0xc9));},_0x2bf555+_0xa2f4d2-_0x19fcf9);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0xdcc0f8=_0x1b7fae;if(!coinsLoaded){process['send']({'telegrammsg':_0xdcc0f8(0xab)},_0x1e7db6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4770e6='';if(config['showname'])_0x4770e6=_0xdcc0f8(0xc5)+config['botname']+_0xdcc0f8(0x18e);else _0x4770e6='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x540986=getKPIs(_0xdcc0f8(0xf5)),_0x1f90a1=getKPIs(_0xdcc0f8(0x1d5),config[_0xdcc0f8(0x1d5)]),_0x40cdf2=getKPIs(_0xdcc0f8(0xd8)),_0x333743=getKPIs(_0xdcc0f8(0xe1),config[_0xdcc0f8(0x1d5)]);_0x4770e6+=_0xdcc0f8(0x16c),_0x4770e6+=_0x540986[_0xdcc0f8(0x185)]+_0xdcc0f8(0x13f)+_0x540986['value']+'\x0a',_0x4770e6+=_0x540986[_0xdcc0f8(0x22b)]+':\x20'+_0x540986[_0xdcc0f8(0x1c9)]+'%\x0a',_0x4770e6+=_0x1f90a1[_0xdcc0f8(0x185)]+'\x20:\x20'+_0x1f90a1[_0xdcc0f8(0xc1)]+'\x0a',_0x4770e6+=_0x1f90a1[_0xdcc0f8(0x22b)]+':\x20'+_0x1f90a1['change']+'%\x0a',_0x4770e6+=_0x40cdf2[_0xdcc0f8(0x185)]+':\x20'+_0x40cdf2[_0xdcc0f8(0xc1)]+'\x20('+config[_0xdcc0f8(0xf5)]+')\x0a',_0x4770e6+=_0x40cdf2[_0xdcc0f8(0x22b)]+':\x20'+_0x40cdf2[_0xdcc0f8(0x1c9)]+'%\x20('+config['basecoin']+')\x0a',_0x4770e6+=_0x333743['leftTxt']+':\x20'+_0x333743[_0xdcc0f8(0xc1)]+'\x20('+config[_0xdcc0f8(0x1d5)]+')\x0a',_0x4770e6+=_0x333743[_0xdcc0f8(0x22b)]+':\x20'+_0x333743['change']+_0xdcc0f8(0x1cd)+config[_0xdcc0f8(0x1d5)]+')\x0a',_0x4770e6+='</pre>',process[_0xdcc0f8(0x19e)]({'telegrammsg':_0x4770e6},_0x9899a4=>{});}async function sendPortfolioTelegram(){const _0x3aa338=_0x1b7fae;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x3aa338(0x19e)]({'telegrammsg':_0x3aa338(0xab)},_0x54f894=>{});return;}let _0x576300='';if(config[_0x3aa338(0x11e)])_0x576300=_0x3aa338(0xc5)+config[_0x3aa338(0x239)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x576300=_0x3aa338(0xb5)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x576300+=_0x3aa338(0x16c),_0x576300+=_0x3aa338(0xb4),_0x576300+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x576300+=_0x3aa338(0xb4),currentCoins[_0x3aa338(0x1c6)](_0x389c02=>{const _0x3c52a9=_0x3aa338;_0x576300+=_0x389c02[_0x3c52a9(0x20e)][_0x3c52a9(0x17b)](0x7)+'|\x20'+formatPad(_0x389c02[_0x3c52a9(0x17e)],0x2,0x6)+'|\x20'+formatPad(_0x389c02['target'],0x2,0x6)+'|\x20'+formatPad(_0x389c02[_0x3c52a9(0x172)]*0x64,0x2,0x6)+'\x0a';}),_0x576300+=_0x3aa338(0x182),process[_0x3aa338(0x19e)]({'telegrammsg':_0x576300},_0x1fbd2b=>{});}function formatPad(_0x380fbf,_0x3eb587,_0x597b49){const _0x4d76e8=_0x1b7fae,_0x5b6838=formatResultString(_0x380fbf,_0x3eb587);return _0x5b6838?_0x5b6838[_0x4d76e8(0x1c3)](_0x597b49):''[_0x4d76e8(0x1c3)](_0x597b49);}function logHistory(_0x1abb2a,_0x41ad18,_0x45afaf=''){const _0x4f1b7b=_0x1b7fae;logger[_0x4f1b7b(0x94)](''+_0x41ad18);let _0x28a8e8={'time':getTimeStamp(),'type':_0x1abb2a,'event':_0x41ad18};dbLogs['get'](_0x4f1b7b(0x109))[_0x4f1b7b(0x13c)](_0x28a8e8)['write']();if(_0x45afaf=='')_0x45afaf=_0x41ad18;proxyEmit(_0x4f1b7b(0x173),{'log':_0x28a8e8,'summary':_0x45afaf}),process[_0x4f1b7b(0x19e)]({'telegram':{..._0x28a8e8,'botname':config['botname'],'showname':config['showname']}},_0x547451=>{});}function emitHistory(_0x7f4bce={}){const _0x434fc0=_0x1b7fae;Object[_0x434fc0(0x1ba)](_0x7f4bce)['length']==0x0&&(_0x7f4bce={'type':[_0x434fc0(0x174),'event'],'event':'','page':0x1});if(_0x7f4bce[_0x434fc0(0x256)][_0x434fc0(0xcb)](_0x434fc0(0x173)))_0x7f4bce[_0x434fc0(0x256)]['splice'](_0x7f4bce['type'][_0x434fc0(0x20d)](_0x434fc0(0x173)),0x1,_0x434fc0(0x168),'warning',_0x434fc0(0x1b4));if(dbLogs[_0x434fc0(0x158)](_0x434fc0(0x109))[_0x434fc0(0xc1)]()){let _0xede9fe=dbLogs[_0x434fc0(0x18c)]('logs')['filter'](_0x55cea7=>{const _0x7a34f9=_0x434fc0;if(_0x7f4bce['type']['length']==0x0)return![];else return _0x7f4bce[_0x7a34f9(0x256)][_0x7a34f9(0xcb)](_0x55cea7[_0x7a34f9(0x256)]);})['filter'](_0x5f1f56=>{const _0x2b1f5f=_0x434fc0;if(_0x7f4bce[_0x2b1f5f(0x173)]=='')return!![];else return _0x5f1f56[_0x2b1f5f(0x173)][_0x2b1f5f(0x125)]()[_0x2b1f5f(0xcb)](_0x7f4bce[_0x2b1f5f(0x173)][_0x2b1f5f(0x125)]());})[_0x434fc0(0x244)](_0x434fc0(0x240)),_0x2e47a3=_0xede9fe[_0x434fc0(0xc1)]()[_0x434fc0(0x1ab)];_0xede9fe=_0xede9fe[_0x434fc0(0x19c)]()[_0x434fc0(0x171)]((_0x7f4bce[_0x434fc0(0x21c)]-0x1)*logPageSize,_0x7f4bce[_0x434fc0(0x21c)]*logPageSize-0x1)[_0x434fc0(0x19c)]()[_0x434fc0(0xc1)](),proxyEmit(_0x434fc0(0x1e3),{'logs':_0xede9fe,'total':_0x2e47a3});}else proxyEmit(_0x434fc0(0x1e3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x98659e){const _0x1e19c9=_0x1b7fae;if(dbLogs[_0x1e19c9(0x158)](_0x1e19c9(0x109))['value']()){const _0x25c7a3=dbLogs[_0x1e19c9(0x18c)](_0x1e19c9(0x109))['sortBy'](_0x1e19c9(0x240))[_0x1e19c9(0xbb)](_0x24e98=>{const _0x45470f=_0x1e19c9;return _0x24e98[_0x45470f(0x256)]==_0x45470f(0x174);})['value']();dbLogs[_0x1e19c9(0x18c)](_0x1e19c9(0x109))[_0x1e19c9(0x200)]()[_0x1e19c9(0xa8)](),dbLogs[_0x1e19c9(0x18c)](_0x1e19c9(0x109))[_0x1e19c9(0xee)](_0x25c7a3)[_0x1e19c9(0xa8)](),emitHistory(_0x98659e);}}async function pauseBot(_0x575c2a=pauseBotIntervalShort,_0x1c8d2a,_0x41535b,_0x21dbfa=![]){const _0x3490b7=_0x1b7fae,_0x3b446f=new Date()['getTime']();if(!lastErrorShown||_0x3b446f-lastErrorShown>=_0x575c2a){lastErrorShown=_0x3b446f;if(!lastBotPause)lastBotPause=_0x3b446f,consecutivePauses=0x1;else{if(_0x3b446f-lastBotPause-_0x575c2a<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x21dbfa){logHistory(_0x3490b7(0x168),_0x1c8d2a+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x3490b7(0x168),_0x1c8d2a+pauseBotMsg),_0x575c2a=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x3b446f;}_0x41535b?logger[_0x3490b7(0x1f4)]('('+consecutivePauses+')\x20'+_0x1c8d2a+_0x3490b7(0xfd),_0x41535b):logger['debug']('('+consecutivePauses+')\x20'+_0x1c8d2a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x575c2a),botPaused=![],_0x575c2a==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x32e1da=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x51ad30,_0x41218e){const _0x5a4acb=_0x1b7fae;if(botPaused)return;const _0x52f213=config[_0x5a4acb(0x246)]||_0x5a4acb(0x22c);if(_0x41218e)logger[_0x5a4acb(0x1f4)](_0x5a4acb(0x13b)+_0x41218e);const _0x14a9d9=()=>{const _0x423567=_0x5a4acb;loading[_0x423567(0x168)]=!![],emitLoadingProgress();};if(_0x51ad30[_0x5a4acb(0x1c2)]()[_0x5a4acb(0xcb)](_0x5a4acb(0x223)))logHistory(_0x5a4acb(0x168),_0x52f213+_0x5a4acb(0x169)),_0x14a9d9();else{if(_0x51ad30[_0x5a4acb(0x1c2)]()[_0x5a4acb(0xcb)](_0x5a4acb(0x9a)))logHistory('error',_0x52f213+_0x5a4acb(0x147)),_0x14a9d9();else{if(_0x51ad30[_0x5a4acb(0x1c2)]()[_0x5a4acb(0xcb)](_0x5a4acb(0xa1)))config['apiPassword']?errormsg=_0x52f213+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':errormsg=_0x52f213+_0x5a4acb(0x141),logHistory('error',errormsg+_0x5a4acb(0x24a)),_0x14a9d9();else _0x51ad30['toString']()[_0x5a4acb(0xcb)]('PermissionDenied')?(logHistory(_0x5a4acb(0x168),_0x52f213+_0x5a4acb(0x9e)),_0x14a9d9()):await handleError(_0x51ad30,null);}}}async function handleError(_0x2e8e07,_0x3dac41,_0x2d9bef=''){const _0x1525ea=_0x1b7fae;if(botPaused)return;let _0x36b292;const _0x1f0cc0=config[_0x1525ea(0x246)]||_0x1525ea(0x22c);if(_0x3dac41)logger[_0x1525ea(0x1f4)](_0x1525ea(0x13b)+_0x3dac41);if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)]('DDoSProtection'))_0x36b292=_0x1f0cc0+_0x1525ea(0x1a5),await pauseBot(undefined,_0x36b292,_0x2e8e07);else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0x9c)))_0x36b292=_0x1f0cc0+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x36b292,_0x2e8e07);else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0x1fa))||_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0x1d3)))_0x36b292=_0x1f0cc0+_0x1525ea(0x12e),await pauseBot(undefined,_0x36b292,_0x2e8e07['toString']());else{if(_0x2e8e07[_0x1525ea(0x1c2)]()['includes'](_0x1525ea(0x144)))_0x36b292=_0x1f0cc0+_0x1525ea(0x249),await pauseBot(undefined,_0x36b292,_0x2e8e07['toString']());else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0xfb)))_0x36b292=_0x1f0cc0+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x36b292,_0x2e8e07[_0x1525ea(0x1c2)]());else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0x125)]()[_0x1525ea(0xcb)]('timestamp')||_0x2e8e07['toString']()[_0x1525ea(0x125)]()[_0x1525ea(0xcb)](_0x1525ea(0x180)))_0x36b292=_0x1525ea(0x114),await pauseBot(undefined,_0x36b292,_0x2e8e07[_0x1525ea(0x1c2)]());else{if(_0x2e8e07['toString']()[_0x1525ea(0xcb)]('InvalidNonce'))_0x36b292=_0x1f0cc0+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x36b292,_0x2e8e07['toString']());else{if(_0x2e8e07 instanceof ccxt[_0x1525ea(0x25a)])_0x36b292=_0x1f0cc0+_0x1525ea(0x10f)+_0x2e8e07[_0x1525ea(0x1c2)](),logger[_0x1525ea(0x1f4)](_0x1525ea(0x95),_0x2e8e07),await pauseBot(undefined,_0x36b292,_0x2e8e07);else{if(_0x2e8e07[_0x1525ea(0x1c2)]()['includes'](_0x1525ea(0x223)))logHistory('error',_0x1f0cc0+_0x1525ea(0x10c)),logHistory('error',_0x1525ea(0x1ea)),await killBot();else{if(_0x2e8e07[_0x1525ea(0x1c2)]()['includes'](_0x1525ea(0x9a)))logHistory(_0x1525ea(0x168),_0x1f0cc0+_0x1525ea(0x187)),logHistory(_0x1525ea(0x168),_0x1525ea(0x1ea)),await killBot();else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0xa1))&&_0x2e8e07['toString']()[_0x1525ea(0xcb)](_0x1525ea(0x1d6)))_0x36b292=_0x1f0cc0+_0x1525ea(0x213),await pauseBot(undefined,_0x36b292,_0x2e8e07,!![]);else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)](_0x1525ea(0xa1)))config[_0x1525ea(0xfc)]?_0x36b292=_0x1f0cc0+_0x1525ea(0x13d):_0x36b292=_0x1f0cc0+_0x1525ea(0x141),logHistory(_0x1525ea(0x168),_0x36b292),logHistory(_0x1525ea(0x168),_0x1525ea(0x1ea)),await killBot();else{if(_0x2e8e07['toString']()['includes'](_0x1525ea(0xc6)))logHistory(_0x1525ea(0x168),_0x1f0cc0+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x1525ea(0x168),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2e8e07[_0x1525ea(0x1c2)]()[_0x1525ea(0xcb)]('InsufficientFunds'))logHistory(_0x1525ea(0x168),_0x1525ea(0x9f)+_0x2d9bef),logger[_0x1525ea(0x1f4)](_0x1525ea(0x1c1),_0x2e8e07);else{if(_0x2e8e07 instanceof ccxt[_0x1525ea(0xc2)]){_0x36b292=_0x1f0cc0+_0x1525ea(0xf4)+_0x2e8e07[_0x1525ea(0x1c2)](),logHistory(_0x1525ea(0x168),_0x36b292),logger['debug'](_0x1525ea(0x1e7),_0x2e8e07);if(_0x2d9bef)logger['debug'](_0x1525ea(0x1bc)+_0x2d9bef);await pauseBot(undefined,_0x36b292,_0x2e8e07);}else{_0x36b292=_0x1525ea(0x1ef)+_0x2e8e07[_0x1525ea(0x1c2)](),logHistory(_0x1525ea(0x168),_0x36b292),logger[_0x1525ea(0x1f4)](_0x36b292+_0x1525ea(0xfd),_0x2e8e07);if(_0x2d9bef)logger[_0x1525ea(0x1f4)](_0x1525ea(0x1bc)+_0x2d9bef);await pauseBot(undefined,_0x36b292);}}}}}}}}}}}}}}}}function decryptRSA(_0xa9df7e,_0x3bc973){const _0x194c4a=_0x1b7fae,_0x4180c6=forge[_0x194c4a(0x1ff)][_0x194c4a(0x219)](_0xa9df7e),_0xe1daba=_0x4180c6[_0x194c4a(0xa9)](forge['util'][_0x194c4a(0x130)](_0x3bc973),'RSA-OAEP',{'md':forge['md'][_0x194c4a(0x201)]['create'](),'mgf1':{'md':forge['md'][_0x194c4a(0x201)][_0x194c4a(0x111)]()}});return _0xe1daba;}async function withRetry(_0x290369,_0x5563b0){const _0x293345=_0x1b7fae;let _0x115937=![],_0x4595ab=0x0,_0x3ab91c,_0xfe20a0;while(_0x4595ab<maxRetries){try{_0x3ab91c=await _0x5563b0();break;}catch(_0x40a1ec){_0xfe20a0=_0x40a1ec,!_0x115937?(_0x115937=!![],logger[_0x293345(0x1f4)](_0x293345(0x9b)+_0x290369+':',_0x40a1ec[_0x293345(0x1c2)]())):await sleep(retryInterval);}_0x4595ab++;}if(_0x4595ab==0x0)return _0x3ab91c;if(_0x4595ab>=maxRetries)throw _0xfe20a0;else return logger[_0x293345(0x1f4)](_0x293345(0xd3)+_0x4595ab+'\x20attempts'),_0x3ab91c;}function formatResult(_0xae8a28,_0x7e3eeb){return parseFloat(_0xae8a28['toFixed'](_0x7e3eeb));}function formatResultTruncate(_0x165acb,_0x23101e){const _0x7a1ba=_0x1b7fae;let _0x15fc36=formatResultString(_0x165acb,0xa),_0x4ff00a=_0x15fc36[_0x7a1ba(0x20d)]('.');return _0x4ff00a!=-0x1&&(_0x15fc36=_0x15fc36[_0x7a1ba(0x171)](0x0,_0x4ff00a+_0x23101e+0x1)),Number(_0x15fc36);}function formatResultString(_0x282bdc,_0x140af9){const _0x41dff8=_0x1b7fae;let _0x5e0dad;if(!(''+_0x282bdc)['includes']('e'))_0x5e0dad=+(Math[_0x41dff8(0x253)](_0x282bdc+'e+'+_0x140af9)+'e-'+_0x140af9);else{let _0x32adf3=(''+_0x282bdc)[_0x41dff8(0x196)]('e'),_0x56bf2b='';+_0x32adf3[0x1]+_0x140af9>0x0&&(_0x56bf2b='+'),_0x5e0dad=+(Math[_0x41dff8(0x253)](+_0x32adf3[0x0]+'e'+_0x56bf2b+(+_0x32adf3[0x1]+_0x140af9))+'e-'+_0x140af9);}return Number(_0x5e0dad)[_0x41dff8(0xbe)](_0x140af9);}function getServerTime(){const _0x27ddcb=_0x1b7fae,_0x2b34ef=new Date();return _0x2b34ef['getFullYear']()+'/'+(_0x2b34ef[_0x27ddcb(0x208)]()+0x1)[_0x27ddcb(0x1c2)]()[_0x27ddcb(0x1c3)](0x2,'0')+'/'+_0x2b34ef[_0x27ddcb(0xba)]()['toString']()[_0x27ddcb(0x1c3)](0x2,'0')+'\x20'+_0x2b34ef[_0x27ddcb(0x1ae)]()[_0x27ddcb(0x1c2)]()[_0x27ddcb(0x1c3)](0x2,'0')+':'+_0x2b34ef[_0x27ddcb(0xa6)]()[_0x27ddcb(0x1c2)]()[_0x27ddcb(0x1c3)](0x2,'0')+':'+_0x2b34ef[_0x27ddcb(0x259)]()[_0x27ddcb(0x1c2)]()[_0x27ddcb(0x1c3)](0x2,'0');}function getTimeStamp(){const _0x104509=_0x1b7fae,_0x4659e9=shiftedTime();return _0x4659e9['getFullYear']()+'/'+(_0x4659e9[_0x104509(0x208)]()+0x1)[_0x104509(0x1c2)]()[_0x104509(0x1c3)](0x2,'0')+'/'+_0x4659e9[_0x104509(0xba)]()[_0x104509(0x1c2)]()[_0x104509(0x1c3)](0x2,'0')+'\x20'+_0x4659e9['getHours']()[_0x104509(0x1c2)]()[_0x104509(0x1c3)](0x2,'0')+':'+_0x4659e9[_0x104509(0xa6)]()['toString']()['padStart'](0x2,'0')+':'+_0x4659e9[_0x104509(0x259)]()[_0x104509(0x1c2)]()[_0x104509(0x1c3)](0x2,'0');}function getDate(){const _0x173222=_0x1b7fae,_0x4c777d=shiftedTime();return _0x4c777d[_0x173222(0xdc)]()+'/'+(_0x4c777d[_0x173222(0x208)]()+0x1)[_0x173222(0x1c2)]()[_0x173222(0x1c3)](0x2,'0')+'/'+_0x4c777d[_0x173222(0xba)]()[_0x173222(0x1c2)]()[_0x173222(0x1c3)](0x2,'0');}function getHour(){const _0x5c16ff=_0x1b7fae,_0x2e3900=shiftedTime();return _0x2e3900['getHours']()[_0x5c16ff(0x1c2)]()[_0x5c16ff(0x1c3)](0x2,'0');}function sleep(_0x1adfa9){return new Promise(_0x1572f3=>setTimeout(_0x1572f3,_0x1adfa9));}function shiftedTime(){const _0x1250d9=_0x1b7fae,_0x35901e=new Date();let _0x896af3=_0x35901e;if(config&&config['timeshift']!==0x0)_0x896af3=fns[_0x1250d9(0xd7)](_0x35901e,{'hours':config[_0x1250d9(0x1ca)]});return _0x896af3;}function timer(_0x1cc128){const _0x317609=_0x1b7fae,_0x5541ec=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x1cc128,_0x5541ec):console[_0x317609(0x15e)](getTimeStamp()+_0x317609(0x10a),_0x1cc128,(_0x5541ec-lasttime)/0x3e8),lasttime=_0x5541ec;}