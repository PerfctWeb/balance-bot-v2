const _0x3eaabc=_0x2172;(function(_0x23373d,_0x50eac6){const _0x3ad7a4=_0x2172,_0x28a176=_0x23373d();while(!![]){try{const _0x7091db=-parseInt(_0x3ad7a4(0x180))/0x1+-parseInt(_0x3ad7a4(0xd3))/0x2*(parseInt(_0x3ad7a4(0x156))/0x3)+-parseInt(_0x3ad7a4(0x172))/0x4*(parseInt(_0x3ad7a4(0xed))/0x5)+-parseInt(_0x3ad7a4(0x10b))/0x6*(-parseInt(_0x3ad7a4(0x124))/0x7)+parseInt(_0x3ad7a4(0x15b))/0x8+parseInt(_0x3ad7a4(0x116))/0x9+parseInt(_0x3ad7a4(0x19f))/0xa*(-parseInt(_0x3ad7a4(0x182))/0xb);if(_0x7091db===_0x50eac6)break;else _0x28a176['push'](_0x28a176['shift']());}catch(_0x31a3d1){_0x28a176['push'](_0x28a176['shift']());}}}(_0x3ba5,0x48d17));const _0x4a91d2=function(){let _0xb1d90d=!![];return function(_0x339b2f,_0x1d88d0){const _0x578844=_0xb1d90d?function(){const _0x29eddf=_0x2172;if(_0x1d88d0){const _0x109a8d=_0x1d88d0[_0x29eddf(0x19d)](_0x339b2f,arguments);return _0x1d88d0=null,_0x109a8d;}}:function(){};return _0xb1d90d=![],_0x578844;};}(),_0x2a9a52=_0x4a91d2(this,function(){const _0x5f3656=_0x2172;return _0x2a9a52[_0x5f3656(0x136)]()[_0x5f3656(0x16a)](_0x5f3656(0xe7))[_0x5f3656(0x136)]()[_0x5f3656(0x1af)](_0x2a9a52)[_0x5f3656(0x16a)](_0x5f3656(0xe7));});_0x2a9a52();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3eaabc(0x15d)),{WebsocketClient,DefaultLogger}=require(_0x3eaabc(0xdd)),Crypt=require(_0x3eaabc(0x101))['Crypt'];let exchange,wsClient;global[_0x3eaabc(0x17c)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3eaabc(0x143))[_0x3eaabc(0x1ae)],botID=process[_0x3eaabc(0x16e)][0x2]||_0x3eaabc(0xf3),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log'](_0x3eaabc(0x17d)+botID+_0x3eaabc(0x16d)),process[_0x3eaabc(0x131)](0x1);const userID=process[_0x3eaabc(0x16e)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3eaabc(0x1b6);!fs[_0x3eaabc(0x1ad)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x3eaabc(0x179)+botID+_0x3eaabc(0x165),logfile=configpath+_0x3eaabc(0x179)+botID+_0x3eaabc(0x171),performancefile=configpath+_0x3eaabc(0x179)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x3eaabc(0xfe),settingsfile=configpath+_0x3eaabc(0x15c),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x3eaabc(0x14a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x3eaabc(0x14a)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3eaabc(0x13f)]({'coins':[]})[_0x3eaabc(0x14a)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x3eaabc(0x135),'symbol':_0x3eaabc(0x199)},'usd':{'coin':'BTCUSDT','symbol':_0x3eaabc(0x110)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x4947e1)=>{},'debug':(..._0x512274)=>{},'notice':(..._0x52e0de)=>{},'info':(..._0x24c880)=>{},'warning':(..._0x5dedbe)=>{},'error':async function(..._0xa1fbec){const _0x57ce4d=_0x3eaabc,_0x6153f0=new Date()[_0x57ce4d(0x174)]();if(!lastErrorShown||_0x6153f0-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x57ce4d(0x174)](),logHistory(_0x57ce4d(0x184),'WebSockets('+consecutivePauses+_0x57ce4d(0x1d3));let _0xa266d7='';if(_0xa1fbec[0x0])_0xa266d7+=_0xa1fbec[0x0];if(_0xa1fbec[0x1]&&_0xa1fbec[0x1]['error']&&_0xa1fbec[0x1][_0x57ce4d(0x184)][_0x57ce4d(0x148)])_0xa266d7+=_0x57ce4d(0x122)+_0xa1fbec[0x1][_0x57ce4d(0x184)]['message'];logging(_0x57ce4d(0xd1)+consecutivePauses+_0x57ce4d(0x1d6),''+_0xa266d7),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x3eaabc(0x1de),'rsaStandard':_0x3eaabc(0x19a)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x3eaabc(0x112)]!=config[_0x3eaabc(0x112)]&&updateTimeshift(settings['timeshift']);process['send']({'started':_0x3eaabc(0x147)},_0x503e8d=>{}),initializeProcessListeners();function proxyEmit(_0x2c458e,_0xb7c66f=null){process['send']({'function':_0x2c458e,'args':_0xb7c66f},_0x315f4a=>{});}function initializeProcessListeners(){const _0x4166a6=_0x3eaabc;process['on'](_0x4166a6(0x148),_0x490083=>{const _0x30c5cc=_0x4166a6;switch(Object[_0x30c5cc(0x127)](_0x490083)[0x0]){case'timeshift':_0x490083[_0x30c5cc(0x112)]!=undefined&&(settings[_0x30c5cc(0x112)]=_0x490083['timeshift'],updateTimeshift(settings[_0x30c5cc(0x112)]));break;case _0x30c5cc(0x1ca):switch(_0x490083['function']){case'initclient':initclient();break;case _0x30c5cc(0x1d1):emitHistory(_0x490083[_0x30c5cc(0x1e5)]);break;case'getPortfolio':getPortfolio(_0x490083['args']);break;case _0x30c5cc(0x150):storeConfiguration(_0x490083[_0x30c5cc(0x1e5)]);break;case _0x30c5cc(0x18b):storeHeadless(_0x490083[_0x30c5cc(0x1e5)]);break;case'getStartingBalances':getStartingBalances();break;case _0x30c5cc(0x1b8):placeOrder(_0x490083['args']);break;case _0x30c5cc(0x168):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2aceba=_0x3eaabc;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2aceba(0x166)],config[_0x2aceba(0x1cb)]);let _0x4f0fbb=await loadSymbols();_0x4f0fbb&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3f0214,_0x4c5e99){const _0x3f7827=_0x3eaabc,_0x474822=ccxt[config[_0x3f7827(0x1bc)]];let _0x21a78c;switch(config[_0x3f7827(0x1bc)]){case _0x3f7827(0xdd):_0x21a78c=_0x3f7827(0x111);break;case _0x3f7827(0x19e):_0x21a78c=_0x3f7827(0x188);break;default:_0x21a78c='wss://stream.binance.com:9443';}exchange=new _0x474822({'apiKey':_0x3f0214,'secret':_0x4c5e99,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3f0214,'api_secret':_0x4c5e99,'beautify':!![],'wsUrl':_0x21a78c},logger),config['exchange']==_0x3f7827(0x19e)&&(stablecoins={'eur':{'coin':_0x3f7827(0x1d9),'symbol':_0x3f7827(0xff)},'usd':{'coin':_0x3f7827(0x177),'symbol':_0x3f7827(0x110)}});}async function loadSymbols(){const _0x371dd4=_0x3eaabc;let _0x18738d;try{markets=await exchange[_0x371dd4(0x1a2)]();const _0x44ef60=[_0x371dd4(0xe6),_0x371dd4(0x1be),_0x371dd4(0x129)];allSymbols=exchange[_0x371dd4(0x16b)][_0x371dd4(0x14c)](_0x1baabd=>{const _0x104ce6=_0x371dd4;let _0x4de815=![];return _0x44ef60[_0x104ce6(0x19c)](_0x10473a=>{const _0x8bf7d3=_0x104ce6;if(_0x1baabd[_0x8bf7d3(0x1a7)](_0x10473a))_0x4de815=!![];}),!_0x4de815;}),_0x18738d=!![];}catch(_0x1766df){await handleError(_0x1766df,_0x371dd4(0x138)),_0x18738d=![];}return _0x18738d;}async function initbot(){const _0x22a801=_0x3eaabc;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x5c6986=dbCoinResults[_0x22a801(0x1a0)](_0x22a801(0x10d))[_0x22a801(0x18e)]();if(_0x5c6986[_0x22a801(0x132)]==0x0)await resetCoinResults();}async function initclient(){const _0x4e58b5=_0x3eaabc;proxyEmit(_0x4e58b5(0x12c),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function _0x2172(_0x56b007,_0x4ded2d){const _0x27b6ca=_0x3ba5();return _0x2172=function(_0x2a9a52,_0x4a91d2){_0x2a9a52=_0x2a9a52-0xd1;let _0x3ba59a=_0x27b6ca[_0x2a9a52];return _0x3ba59a;},_0x2172(_0x56b007,_0x4ded2d);}function cleanws(){const _0x443cce=_0x3eaabc;wsinitialized=![];ws1&&(ws1[_0x443cce(0x19c)](_0x223183=>{const _0x4a6ede=_0x443cce;try{wsClient[_0x4a6ede(0x14b)](_0x223183);}catch(_0x1bc64c){}}),ws1=[]);if(ws2){try{wsClient[_0x443cce(0x14b)](ws2);}catch(_0x43facc){}ws2=null;}}async function initws(){const _0x17dc7f=_0x3eaabc;cleanws();let _0x215232=[];currentCoins[_0x17dc7f(0x19c)](_0x21c91b=>{const _0x1e058a=_0x17dc7f;if(_0x21c91b[_0x1e058a(0x134)]!=config['basecoin'])_0x215232[_0x1e058a(0x121)](noslash(_0x21c91b[_0x1e058a(0x11c)]));});if(!_0x215232[_0x17dc7f(0x1a7)](stablecoins['eur']['coin']))_0x215232[_0x17dc7f(0x121)](stablecoins['eur'][_0x17dc7f(0x134)]);if(!_0x215232[_0x17dc7f(0x1a7)](stablecoins[_0x17dc7f(0x149)][_0x17dc7f(0x134)]))_0x215232['push'](stablecoins[_0x17dc7f(0x149)][_0x17dc7f(0x134)]);if(!_0x215232['includes'](_0x17dc7f(0xd6)+config[_0x17dc7f(0x139)]))_0x215232['push'](_0x17dc7f(0xd6)+config[_0x17dc7f(0x139)]);try{_0x215232[_0x17dc7f(0x19c)]((_0x4aee38,_0x2cd61e)=>{ws1[_0x2cd61e]=wsClient['subscribeSpotKline'](_0x4aee38,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x17dc7f(0x1b9),_0x1c0a12=>{const _0x179fb6=_0x17dc7f;if(!Array['isArray'](_0x1c0a12)&&!_0x1c0a12['wsKey'][_0x179fb6(0x1a7)]('userData')){if(_0x1c0a12[_0x179fb6(0x18d)]===_0x179fb6(0x1d4)){global[_0x179fb6(0x17c)][_0x1c0a12[_0x179fb6(0x1d4)][_0x179fb6(0x11c)]]=_0x1c0a12[_0x179fb6(0x1d4)][_0x179fb6(0x1ab)];return;}}else{if(!Array[_0x179fb6(0x175)](_0x1c0a12)&&_0x1c0a12[_0x179fb6(0x1d7)]['includes'](_0x179fb6(0x1d2))){if(_0x1c0a12[_0x179fb6(0x185)][_0x179fb6(0x1a7)](_0x179fb6(0x1e7))){updateNumberCoins(_0x1c0a12);return;}}}}),wsClient['on']('reconnected',async _0x25338d=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x29d98f){await handleError(_0x29d98f,_0x17dc7f(0x1c6));}let _0xff0b4f,_0x3d69db=0x0;loading[_0x17dc7f(0xfd)]=[];let _0x38ac4c=0x0;currentCoins[_0x17dc7f(0x19c)](_0x1124e6=>{const _0x2df318=_0x17dc7f;if(_0x1124e6[_0x2df318(0x134)]!=config[_0x2df318(0x139)])loading[_0x2df318(0xfd)]['push'](_0x1124e6[_0x2df318(0x11c)]);}),loadingCanceled=![];while(_0xff0b4f!=currentCoins['length']-0x1){_0xff0b4f=0x0,currentCoins[_0x17dc7f(0x19c)](_0x4b2e02=>{const _0x1f50e6=_0x17dc7f;_0x4b2e02[_0x1f50e6(0x134)]!=config[_0x1f50e6(0x139)]&&global[_0x1f50e6(0x17c)][noslash(_0x4b2e02[_0x1f50e6(0x11c)])]&&(loading['remainingSymbols']=loading[_0x1f50e6(0xfd)]['filter'](_0x5275f9=>_0x5275f9!=_0x4b2e02['symbol']),_0xff0b4f++);}),loading[_0x17dc7f(0x117)]=Math['round'](_0xff0b4f/(currentCoins[_0x17dc7f(0x132)]-0x1)*0x64);_0x38ac4c>0x1e*0x5&&(loading[_0x17dc7f(0xec)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x17dc7f(0x1e9)]=!![],emitLoadingProgress();break;}else _0xff0b4f!=_0x3d69db&&(_0x3d69db=_0xff0b4f,emitLoadingProgress()),_0x38ac4c++,await sleep(0xc8);}if(_0xff0b4f==currentCoins[_0x17dc7f(0x132)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function _0x3ba5(){const _0x295416=['initws()','limits','fetchOHLCV','Limit\x20(low-margin)','function','apiSecret','yyyy/MM/dd','settings','log','filled','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','emitHistory','userData',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','kline','distribution',')\x20|\x20Error\x20details:\x20','wsKey','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','BTCBUSD','market','sell','trade','USDC','sha256','logs','\x20|\x20Error\x20details:\x20','fromCodePoint','number','showname','API-key\x20format\x20invalid','args','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','spot','limit','cancel','WebSockets(','Order\x20filled:\x20','54DIuMgV','InvalidNonce','cancelOrder','BNB','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','price','startdate','fetchBalance','date','BUSD','binance','has','side','BTC','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','ordertype','splice','shift','round','DAI/','(((.+)+)+)+$','valid','delta','eachDayOfInterval','portfolio','timeout','202775HroeLj','bot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ExchangeNotAvailable','event-history','Order(s)\x20filled\x20-\x20balancing\x20resumed','001','FILLED','toFixed','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','type','Market','starting-balances','bid','abs','differenceInSeconds','remainingSymbols','-results.json','BTC/BUSD','AuthenticationError','hybrid-crypto-js','emojisell','fee','startprice','sort','timestamp','botname','target','limit-high','getHours','4722nEQlWL','limit-low','coins','max','assign','BTC/USDT','wss://stream.binance.com:9443','timeshift','fetchTickers','cancelOrder()','eur','3471381UQhbtA','progress','getCoins()','fetchOrders','Invalid\x20quantity','map','symbol','Order(s)\x20not\x20validated\x20after\x20','reverse','buy','time','push','\x20-\x20','getDate','3171VKgODk','getFullYear','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','keys','breakeven','HOT/EUR','threshold','page','configuration','headless','success','decrypt','padStart','exit','length','getFiat()','coin','BTCEUR','toString','realized','loadSymbols()','basecoin','emojibuy','getMonth','data','\x20orders\x20in\x20less\x20than\x20','Pausing\x20bot\x20for\x205\x20minutes\x20(','defaults','datetime','remove','\x20|\x20Unknown\x20error\x20occured','./version.json','send','executionReport','LIMIT','running','message','usd','write','closeWs','filter','Binance\x20API\x20key\x20is\x20invalid','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Binance\x20API\x20secret\x20is\x20invalid','storeConfiguration','event','asset','order','milliseconds','\x20order:\x20','46929XWZgeg','secure','\x20minutes\x20-\x20balancing\x20resumed','DDoSProtection','placeOrder()','3836264Ddhwug','bb-settings.json','date-fns','accumulatedQuantity','InsufficientFunds','orderId','replace','format','toLowerCase','\x20>\x20','-config.json','apiKey','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','cancelLoading','Order:\x20','search','symbols','entries',',\x20must\x20be\x20a\x203\x20digit\x20number','argv','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','buys','-events.json','36uPJjNZ','Unfilled\x20order(s)\x20canceled\x20after\x20','getTime','isArray','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','BTCUSDT','availableBalance','bot-','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ticker','Error:\x20Invalid\x20argument\x20','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','startnumber','128717mbJVnE','outboundAccountPosition','81587QsOeeC','cost','error','wsMarket','restart','configuration-stored','wss://stream.binance.us:9443','orderType','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','storeHeadless','sells','eventType','value','cooldown','kill','offset','getMinutes',':\x20Bot\x20','performance','coin-loading-progress','************','reduce','find','BTC/EUR','RSA-OAEP','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','forEach','apply','binanceus','10IsbxlM','get','recreate','loadMarkets','parseISO','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','recreateHistory()','excluded','includes','Order(s)\x20validated\x20-\x20balancing\x20resumed','getSeconds','min','close','amount','existsSync','version','constructor','privateKey','balances','enabled','sortBy','Executed\x20','Limit\x20(high-margin)','./config/','parse','placeOrder','formattedMessage','indexOf','add','exchange','coinamount','HOT/BTC','total','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','USDT','currency','slice','fees','last'];_0x3ba5=function(){return _0x295416;};return _0x3ba5();}function emitLoadingProgress(){const _0x2a58fc=_0x3eaabc;proxyEmit(_0x2a58fc(0x195),loading);}async function getFiat(){const _0x58cddc=_0x3eaabc;let _0x1bfa82=0x0,_0x208d79=0x0;try{_0x1bfa82=global['ticker'][stablecoins['eur']['coin']],_0x208d79=global[_0x58cddc(0x17c)][stablecoins[_0x58cddc(0x149)][_0x58cddc(0x134)]];}catch(_0x188f93){await handleError(_0x188f93,_0x58cddc(0x133));}return{'eur':Number(_0x1bfa82),'usd':Number(_0x208d79)};}async function setStartDatePerformance(_0x5abc68){const _0x3fe611=_0x3eaabc,_0x359609=fns[_0x3fe611(0x162)](new Date(_0x5abc68[_0x3fe611(0xd9)]),_0x3fe611(0x1cc));let _0x4b945f=[];_0x4b945f[stablecoins['eur'][_0x3fe611(0x134)]]=await getCloses(stablecoins[_0x3fe611(0x115)][_0x3fe611(0x11c)],new Date(_0x5abc68[_0x3fe611(0xd9)]),0x1),_0x4b945f[stablecoins[_0x3fe611(0x149)][_0x3fe611(0x134)]]=await getCloses(stablecoins[_0x3fe611(0x149)]['symbol'],new Date(_0x5abc68['startdate']),0x1);let _0x9d2c2d,_0x2e0f3e=[];_0x5abc68[_0x3fe611(0xeb)][_0x3fe611(0x19c)](_0x533e27=>{const _0x5f101d=_0x3fe611;!_0x533e27[_0x5f101d(0x1a6)]&&_0x2e0f3e['push']({'coin':_0x533e27['coin'],'number':_0x533e27[_0x5f101d(0x17f)],'price':_0x533e27['startprice']});}),_0x9d2c2d={'date':_0x359609,'eur':_0x4b945f[stablecoins[_0x3fe611(0x115)][_0x3fe611(0x134)]][0x0],'usd':_0x4b945f[stablecoins[_0x3fe611(0x149)][_0x3fe611(0x134)]][0x0],'coins':_0x2e0f3e};let _0x598057=dbPerformance[_0x3fe611(0x1a0)](_0x3fe611(0x13c))['find']({'date':_0x359609})[_0x3fe611(0x18e)]();_0x598057?dbPerformance[_0x3fe611(0x1a0)](_0x3fe611(0x13c))['find']({'date':_0x359609})[_0x3fe611(0x10f)](_0x9d2c2d)[_0x3fe611(0x14a)]():dbPerformance[_0x3fe611(0x1a0)](_0x3fe611(0x13c))[_0x3fe611(0x121)](_0x9d2c2d)[_0x3fe611(0x14a)](),_0x598057=dbPerformance['get'](_0x3fe611(0x13c))[_0x3fe611(0x1b3)](_0x3fe611(0xdb))[_0x3fe611(0x18e)](),_0x598057['forEach'](_0x517b02=>{const _0x14ace=_0x3fe611;_0x517b02[_0x14ace(0xdb)]<_0x359609&&dbPerformance[_0x14ace(0x1a0)](_0x14ace(0x13c))[_0x14ace(0x141)]({'date':_0x517b02['date']})[_0x14ace(0x14a)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x3c2209){const _0x22c1c7=_0x3eaabc;let _0x4af9ac,_0x55cd21=[];logHistory(_0x22c1c7(0x12e),_0x22c1c7(0x17a)),_0x3c2209[_0x22c1c7(0xeb)][_0x22c1c7(0x19c)](_0xc806f9=>{const _0x1cc7a9=_0x22c1c7;if(_0xc806f9['coin']!=config['basecoin']&&!_0xc806f9[_0x1cc7a9(0x1a6)])_0x55cd21[_0x1cc7a9(0x121)]({'coin':_0xc806f9[_0x1cc7a9(0x134)],'symbol':_0xc806f9[_0x1cc7a9(0x11c)]});});let _0x37c3b7=[];try{const _0x578014=fns[_0x22c1c7(0x162)](fns[_0x22c1c7(0x1a3)](_0x3c2209[_0x22c1c7(0xd9)][_0x22c1c7(0x161)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5e8af2 of _0x55cd21){if(_0x5e8af2[_0x22c1c7(0x134)]!=config[_0x22c1c7(0x139)])_0x4af9ac=await exchange[_0x22c1c7(0x119)](_0x5e8af2[_0x22c1c7(0x11c)],Date['parse'](_0x578014));_0x4af9ac[_0x22c1c7(0x19c)](_0x8b0d0=>{const _0x30ad6c=_0x22c1c7,_0x29d428=_0x5e8af2['symbol']['includes'](config['basecoin']+'/'),_0xf47ecd=fns[_0x30ad6c(0x162)](fns['parseISO'](_0x8b0d0[_0x30ad6c(0x140)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x4b3178=fns[_0x30ad6c(0x162)](fns[_0x30ad6c(0x1a3)](_0x8b0d0[_0x30ad6c(0x140)]),_0x30ad6c(0x1cc));let _0x8e4f29;if(_0x8b0d0['side']=='buy'&&_0x29d428==![])_0x8e4f29=_0x8b0d0['amount'];if(_0x8b0d0[_0x30ad6c(0xdf)]==_0x30ad6c(0x11f)&&_0x29d428==!![])_0x8e4f29=-_0x8b0d0[_0x30ad6c(0x1ac)]*_0x8b0d0[_0x30ad6c(0xd8)];if(_0x8b0d0['side']==_0x30ad6c(0x1db)&&_0x29d428==![])_0x8e4f29=-_0x8b0d0['amount'];if(_0x8b0d0[_0x30ad6c(0xdf)]==_0x30ad6c(0x1db)&&_0x29d428==!![])_0x8e4f29=_0x8b0d0[_0x30ad6c(0x1ac)]*_0x8b0d0['price'];_0x37c3b7['push']({'timestamp':_0xf47ecd,'date':_0x4b3178,'coin':_0x5e8af2['coin'],'symbol':_0x5e8af2[_0x30ad6c(0x11c)],'type':_0x8b0d0[_0x30ad6c(0xf7)],'side':_0x8b0d0[_0x30ad6c(0xdf)],'reverse':_0x29d428,'amount':formatResult(_0x8b0d0[_0x30ad6c(0x1cf)],0x8),'filled':formatResult(_0x8b0d0[_0x30ad6c(0x1cf)],0x8),'coinamount':formatResult(_0x8e4f29,0x8),'price':formatResult(_0x8b0d0[_0x30ad6c(0xd8)],0x8)});let _0x1f4e39;if(_0x8b0d0[_0x30ad6c(0xdf)]==_0x30ad6c(0x11f)&&_0x29d428==![])_0x1f4e39=-_0x8b0d0[_0x30ad6c(0x1ac)]*_0x8b0d0['price'];if(_0x8b0d0[_0x30ad6c(0xdf)]=='buy'&&_0x29d428==!![])_0x1f4e39=_0x8b0d0['amount'];if(_0x8b0d0[_0x30ad6c(0xdf)]==_0x30ad6c(0x1db)&&_0x29d428==![])_0x1f4e39=_0x8b0d0['amount']*_0x8b0d0[_0x30ad6c(0xd8)];if(_0x8b0d0[_0x30ad6c(0xdf)]==_0x30ad6c(0x1db)&&_0x29d428==!![])_0x1f4e39=-_0x8b0d0[_0x30ad6c(0x1ac)];_0x37c3b7[_0x30ad6c(0x121)]({'date':_0x4b3178,'coin':config['basecoin'],'coinamount':formatResult(_0x1f4e39,0x8)});});}_0x37c3b7['sort']((_0x34038d,_0x2a71e4)=>_0x34038d[_0x22c1c7(0x106)]>_0x2a71e4[_0x22c1c7(0x106)]?0x1:_0x2a71e4[_0x22c1c7(0x106)]>_0x34038d[_0x22c1c7(0x106)]?-0x1:0x0),dbLogs[_0x22c1c7(0x1a0)]('logs')[_0x22c1c7(0x141)]()[_0x22c1c7(0x14a)](),_0x37c3b7[_0x22c1c7(0x19c)](_0x5954e5=>{const _0x2180d7=_0x22c1c7;let _0x1ae1e6;_0x5954e5[_0x2180d7(0x134)]!=config['basecoin']&&(_0x1ae1e6={'time':_0x5954e5[_0x2180d7(0x106)],'type':_0x2180d7(0x153),'event':_0x2180d7(0x169)+_0x5954e5[_0x2180d7(0x11c)]+'\x20'+_0x5954e5[_0x2180d7(0xdf)]+'\x20#'+_0x5954e5[_0x2180d7(0x1ac)]+'\x20@'+_0x5954e5[_0x2180d7(0xd8)]},dbLogs[_0x2180d7(0x1a0)](_0x2180d7(0x1df))[_0x2180d7(0x121)](_0x1ae1e6)['write']());});const _0x4287f8=fns[_0x22c1c7(0xea)]({'start':new Date(_0x3c2209['startdate']),'end':new Date()})[_0x22c1c7(0x11b)](_0x57e0af=>fns[_0x22c1c7(0x162)](_0x57e0af,'yyyy/MM/dd'));let _0x9ec833=[];_0x3c2209['portfolio'][_0x22c1c7(0x19c)](_0x231f94=>{const _0x310ab5=_0x22c1c7;if(!_0x231f94[_0x310ab5(0x1a6)]){_0x9ec833[_0x231f94[_0x310ab5(0x134)]]=[];let _0xde3386=_0x231f94[_0x310ab5(0x17f)];_0x4287f8['forEach']((_0x5e425b,_0x43c9b8)=>{const _0x2dc58d=_0x310ab5;let _0x5d08ec=_0x37c3b7[_0x2dc58d(0x14c)](_0x35a746=>_0x35a746[_0x2dc58d(0x134)]==_0x231f94[_0x2dc58d(0x134)]&&_0x35a746[_0x2dc58d(0xdb)]==_0x5e425b);if(_0x5d08ec[_0x2dc58d(0x132)]!=0x0){let _0x1dec9b=_0x5d08ec[_0x2dc58d(0x197)]((_0x20196a,_0x1e8298)=>{const _0x1d074a=_0x2dc58d;return _0x20196a+=_0x1e8298[_0x1d074a(0x1bd)],_0x20196a;},0x0);_0xde3386+=_0x1dec9b;}_0x9ec833[_0x231f94[_0x2dc58d(0x134)]][_0x5e425b]=_0xde3386;});}});const _0xeed52a=[..._0x55cd21];_0xeed52a[_0x22c1c7(0x121)]({'coin':stablecoins[_0x22c1c7(0x115)][_0x22c1c7(0x134)],'symbol':stablecoins[_0x22c1c7(0x115)][_0x22c1c7(0x11c)]}),_0xeed52a['push']({'coin':stablecoins[_0x22c1c7(0x149)]['coin'],'symbol':stablecoins[_0x22c1c7(0x149)][_0x22c1c7(0x11c)]});let _0x58e2e=[];for(const _0x58cd27 of _0xeed52a){_0x58e2e[_0x58cd27[_0x22c1c7(0x134)]]=await getCloses(_0x58cd27[_0x22c1c7(0x11c)],new Date(_0x3c2209[_0x22c1c7(0xd9)]));}dbPerformance[_0x22c1c7(0x1a0)](_0x22c1c7(0x13c))[_0x22c1c7(0x141)]()[_0x22c1c7(0x14a)](),_0x4287f8[_0x22c1c7(0x19c)]((_0x55efe8,_0x358f17)=>{const _0x228b3a=_0x22c1c7;let _0x13fe54,_0x160209=[];_0x358f17==0x0?(_0x3c2209['portfolio'][_0x228b3a(0x19c)](_0xe3fc48=>{const _0x2e1ed9=_0x228b3a;!_0xe3fc48[_0x2e1ed9(0x1a6)]&&_0x160209[_0x2e1ed9(0x121)]({'coin':_0xe3fc48[_0x2e1ed9(0x134)],'number':_0xe3fc48[_0x2e1ed9(0x17f)],'price':_0xe3fc48[_0x2e1ed9(0x104)]});}),_0x13fe54={'date':_0x55efe8,'eur':_0x58e2e[stablecoins[_0x228b3a(0x115)][_0x228b3a(0x134)]][_0x358f17],'usd':_0x58e2e[stablecoins[_0x228b3a(0x149)][_0x228b3a(0x134)]][_0x358f17],'coins':_0x160209}):(_0x3c2209[_0x228b3a(0xeb)][_0x228b3a(0x19c)](_0x31bf39=>{const _0x26f822=_0x228b3a;!_0x31bf39['excluded']&&_0x160209[_0x26f822(0x121)]({'coin':_0x31bf39['coin'],'number':_0x9ec833[_0x31bf39[_0x26f822(0x134)]][_0x55efe8],'price':_0x31bf39[_0x26f822(0x134)]==config['basecoin']?0x1:_0x58e2e[_0x31bf39[_0x26f822(0x134)]][_0x358f17]});}),_0x13fe54={'date':_0x55efe8,'eur':_0x58e2e[stablecoins[_0x228b3a(0x115)][_0x228b3a(0x134)]][_0x358f17],'usd':_0x58e2e[stablecoins[_0x228b3a(0x149)]['coin']][_0x358f17],'coins':_0x160209}),dbPerformance[_0x228b3a(0x1a0)](_0x228b3a(0x13c))['push'](_0x13fe54)[_0x228b3a(0x14a)]();}),emitPerformance(),await resetCoinResults();for(let _0x333a80 of _0x37c3b7){_0x333a80[_0x22c1c7(0x134)]!=config[_0x22c1c7(0x139)]&&await updateCoinResults(_0x333a80);}logHistory(_0x22c1c7(0x12e),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x503881){await handleError(_0x503881,_0x22c1c7(0x1a5));}}async function getCloses(_0x1e4674,_0x1919f7,_0x25a317=undefined){const _0x47b0d4=_0x3eaabc,_0x4a5e4a='1d';let _0x1ed27f,_0x3ee219;const _0x45f6b9=fns['differenceInCalendarDays'](new Date(),_0x1919f7)+0x1;try{const _0x188237=exchange[_0x47b0d4(0x154)]()-_0x45f6b9*0x18*0xe10*0x3e8;_0x1ed27f=await exchange[_0x47b0d4(0x1c8)](_0x1e4674,_0x4a5e4a,_0x188237,_0x25a317),_0x3ee219=await exchange[_0x47b0d4(0x113)](_0x1e4674);}catch(_0x1c1995){await handleError(_0x1c1995,'getCloses()');}let _0xfe4b7d=ohlcvToCloses(_0x1ed27f);return _0xfe4b7d[_0x47b0d4(0x121)](_0x3ee219[_0x1e4674][_0x47b0d4(0x1c5)]),_0xfe4b7d;}function ohlcvToCloses(_0x2b9b7b){const _0x4736b9=_0x3eaabc;let _0x58d0c5=[];return _0x2b9b7b[_0x4736b9(0x19c)](function(_0x323f60){const _0x170837=_0x4736b9;_0x58d0c5[_0x170837(0x121)](_0x323f60[0x4]);}),_0x58d0c5;}function getConfiguration(_0x17ebfc){const _0x50f112=_0x3eaabc;let _0x539c89=dbConfig['get']('bot')[_0x50f112(0x198)]({'botID':_0x17ebfc})[_0x50f112(0x18e)]();if(_0x539c89){let _0x68af97=![];!_0x539c89[_0x50f112(0x1bc)]&&(_0x539c89={..._0x539c89,'exchange':_0x50f112(0xdd)},_0x68af97=!![]),!_0x539c89['basecoin']&&(_0x539c89={..._0x539c89,'basecoin':_0x50f112(0xe0)},_0x68af97=!![]),!_0x539c89['ordertype']&&(_0x539c89={..._0x539c89,'ordertype':'market'},_0x68af97=!![]),!_0x539c89['timeout']&&(_0x539c89={..._0x539c89,'timeout':0x14},_0x68af97=!![]),!_0x539c89[_0x50f112(0x13a)]&&(_0x539c89={..._0x539c89,'emojibuy':''},_0x68af97=!![]),!_0x539c89['emojisell']&&(_0x539c89={..._0x539c89,'emojisell':''},_0x68af97=!![]),!_0x539c89['showname']&&(_0x539c89={..._0x539c89,'showname':![]},_0x68af97=!![]),_0x68af97&&(_0x539c89={'botID':_0x539c89['botID'],'exchange':_0x539c89[_0x50f112(0x1bc)],'apiKey':_0x539c89['apiKey'],'apiSecret':_0x539c89['apiSecret'],'basecoin':_0x539c89[_0x50f112(0x139)],'botname':_0x539c89[_0x50f112(0x107)],'showname':_0x539c89[_0x50f112(0x1e3)],'threshold':_0x539c89[_0x50f112(0x12a)],'ordertype':_0x539c89['ordertype'],'timeout':_0x539c89[_0x50f112(0xec)],'startdate':_0x539c89[_0x50f112(0xd9)],'recreate':_0x539c89[_0x50f112(0x1a1)],'timeshift':_0x539c89[_0x50f112(0x112)],'headless':_0x539c89[_0x50f112(0x12d)],'cooldown':_0x539c89[_0x50f112(0x18f)],'emojibuy':_0x539c89[_0x50f112(0x13a)],'emojisell':_0x539c89[_0x50f112(0x102)],'portfolio':_0x539c89[_0x50f112(0xeb)]},dbConfig[_0x50f112(0x1a0)](_0x50f112(0xee))[_0x50f112(0x141)]()[_0x50f112(0x14a)](),dbConfig[_0x50f112(0x1a0)]('bot')[_0x50f112(0x121)](_0x539c89)[_0x50f112(0x14a)]());}else _0x539c89={'botID':_0x17ebfc,'exchange':_0x50f112(0xdd),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x17ebfc,'showname':![],'threshold':'3','ordertype':_0x50f112(0x1da),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x50f112(0x112)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x539c89;}function emittedConfiguration(){const _0x37165c=_0x3eaabc;let _0x5638c7;return config[_0x37165c(0x166)]==''?_0x5638c7=config:_0x5638c7={...config,'apiKey':_0x37165c(0x196),'apiSecret':'************'},_0x5638c7;}function getSettings(){const _0x5cc6b2=_0x3eaabc;return dbSettings[_0x5cc6b2(0x1a0)](_0x5cc6b2(0x1cd))[_0x5cc6b2(0x18e)]();}function getSecure(){const _0x45b1c6=_0x3eaabc;return dbSecure[_0x45b1c6(0x1a0)](_0x45b1c6(0x157))[_0x45b1c6(0x18e)]()||{};}function updateTimeshift(_0x25d293){const _0x50bbae=_0x3eaabc;let _0x1cad78=dbConfig[_0x50bbae(0x1a0)](_0x50bbae(0xee))[_0x50bbae(0x198)]({'botID':botID})['value']();_0x1cad78&&dbConfig[_0x50bbae(0x1a0)](_0x50bbae(0xee))['find']({'botID':botID})[_0x50bbae(0x10f)]({'timeshift':_0x25d293})[_0x50bbae(0x14a)](),config[_0x50bbae(0x112)]=_0x25d293,proxyEmit(_0x50bbae(0x12c),emittedConfiguration());}async function storeConfiguration(_0x54fb3b){const _0x43589d=_0x3eaabc;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2c2c49=dbConfig[_0x43589d(0x1a0)]('bot')[_0x43589d(0x198)]({'botID':botID})[_0x43589d(0x18e)]();_0x54fb3b={..._0x54fb3b,'apiKey':crypt[_0x43589d(0x12f)](secure[_0x43589d(0x1b0)],_0x54fb3b['apiKey'])['message'],'apiSecret':crypt[_0x43589d(0x12f)](secure[_0x43589d(0x1b0)],_0x54fb3b[_0x43589d(0x1cb)])[_0x43589d(0x148)]};if(_0x2c2c49){if(_0x54fb3b[_0x43589d(0x166)]==_0x43589d(0x196))_0x54fb3b[_0x43589d(0x166)]=config[_0x43589d(0x166)];if(_0x54fb3b[_0x43589d(0x1cb)]=='************')_0x54fb3b['apiSecret']=config[_0x43589d(0x1cb)];dbConfig['get'](_0x43589d(0xee))[_0x43589d(0x198)]({'botID':botID})[_0x43589d(0x10f)](_0x54fb3b)[_0x43589d(0x14a)]();}else dbConfig[_0x43589d(0x1a0)](_0x43589d(0xee))[_0x43589d(0x121)](_0x54fb3b)[_0x43589d(0x14a)](),process[_0x43589d(0x144)]({'status':_0x43589d(0x1b2),'live':_0x43589d(0x147)},_0x4d196c=>{});config={..._0x54fb3b};if(config[_0x43589d(0x1a1)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x43589d(0x144)]({'botname':_0x54fb3b[_0x43589d(0x107)]},_0x48042a=>{}),proxyEmit(_0x43589d(0x187)),reset();}async function storeHeadless(_0x1ecd1d){const _0x855579=_0x3eaabc,_0x20a5dc={...config,'headless':_0x1ecd1d['headless']};let _0x244d01=dbConfig[_0x855579(0x1a0)]('bot')['find']({'botID':botID})['value']();_0x244d01&&dbConfig['get'](_0x855579(0xee))[_0x855579(0x198)]({'botID':botID})[_0x855579(0x10f)](_0x20a5dc)[_0x855579(0x14a)](),config={..._0x20a5dc},proxyEmit(_0x855579(0x12c),emittedConfiguration());}function noslash(_0xae9675){const _0x3fb262=_0x3eaabc;return _0xae9675[_0x3fb262(0x161)]('/','');}function updateNumberCoins(_0x19e43d){const _0x5b0b54=_0x3eaabc;_0x19e43d[_0x5b0b54(0x18d)]&&_0x19e43d[_0x5b0b54(0x18d)]==_0x5b0b54(0x181)&&_0x19e43d[_0x5b0b54(0x1b1)]['forEach'](_0x1e5caf=>{const _0x2ebb1f=_0x5b0b54;let _0x141afd=currentCoins[_0x2ebb1f(0x198)](_0x44fe9a=>_0x44fe9a['coin']==_0x1e5caf[_0x2ebb1f(0x152)]),_0xeb9b12=config[_0x2ebb1f(0xeb)][_0x2ebb1f(0x198)](_0x26abe9=>_0x26abe9[_0x2ebb1f(0x134)]==_0x1e5caf[_0x2ebb1f(0x152)]);if(_0x141afd&&_0xeb9b12)_0x141afd['number']=Math[_0x2ebb1f(0x10e)](Number(_0x1e5caf[_0x2ebb1f(0x178)])+(_0xeb9b12[_0x2ebb1f(0x191)]||0x0),0x0);});if(_0x19e43d[_0x5b0b54(0x18d)]&&_0x19e43d[_0x5b0b54(0x18d)]==_0x5b0b54(0x145)){if(_0x19e43d[_0x5b0b54(0x189)]==_0x5b0b54(0x146)&&_0x19e43d['orderStatus']==_0x5b0b54(0xf4)){if(lastOrders)lastOrders[_0x5b0b54(0x19c)](_0x4d41fd=>{const _0x4a897a=_0x5b0b54;if(_0x4d41fd[_0x4a897a(0x160)]==_0x19e43d['orderId']){if(_0x4d41fd[_0x4a897a(0x11e)])_0x4d41fd['filled']=_0x19e43d['accumulatedQuantity']*_0x4d41fd[_0x4a897a(0xd8)];else _0x4d41fd[_0x4a897a(0x1cf)]=_0x19e43d[_0x4a897a(0x15e)];}});}}}async function getCoins(_0x28daa9=!![],_0x286488=config[_0x3eaabc(0x139)]){const _0x77a918=_0x3eaabc;let _0x3d7f8e,_0x1eb4e3=[],_0x51912f=[],_0x2f2432=[];try{_0x3d7f8e=await exchange[_0x77a918(0xda)](),mybalances=_0x3d7f8e[_0x77a918(0x1bf)];if(!_0x28daa9)for(const [_0x4162c5,_0x3af628]of Object[_0x77a918(0x16c)](mybalances)){_0x2f2432[_0x77a918(0x121)](_0x4162c5);}else config[_0x77a918(0xeb)][_0x77a918(0x19c)](_0x1250a8=>{const _0x4640d1=_0x77a918;if(!_0x1250a8['excluded'])_0x2f2432[_0x4640d1(0x121)](_0x1250a8[_0x4640d1(0x134)]);});if(_0x286488=='')for(const [_0x5a5be5,_0x30a6de]of Object[_0x77a918(0x16c)](mybalances)){_0x30a6de[_0x77a918(0x136)]()!=0x0&&_0x51912f[_0x77a918(0x121)]({'coin':_0x5a5be5});}else for(const [_0x52c0d9,_0x25be6b]of Object[_0x77a918(0x16c)](mybalances)){if(_0x2f2432[_0x77a918(0x1a7)](_0x52c0d9)){const _0x209105=config[_0x77a918(0xeb)][_0x77a918(0x198)](_0x2b3763=>_0x2b3763[_0x77a918(0x134)]==_0x52c0d9);if((_0x25be6b[_0x77a918(0x136)]()!=0x0||_0x209105)&&(allSymbols[_0x77a918(0x1a7)](_0x52c0d9+'/'+_0x286488)||_0x52c0d9==_0x286488))_0x51912f[_0x77a918(0x121)]({'coin':_0x52c0d9,'symbol':_0x52c0d9+'/'+_0x286488,'reverse':![],'number':Math[_0x77a918(0x10e)](_0x25be6b+(_0x209105&&_0x209105['offset']||0x0),0x0)}),_0x52c0d9!=_0x286488&&_0x1eb4e3[_0x77a918(0x121)](_0x52c0d9+'/'+_0x286488);else(_0x25be6b[_0x77a918(0x136)]()!=0x0||_0x209105)&&allSymbols[_0x77a918(0x1a7)](_0x286488+'/'+_0x52c0d9)&&(_0x51912f[_0x77a918(0x121)]({'coin':_0x52c0d9,'symbol':_0x286488+'/'+_0x52c0d9,'reverse':!![],'number':Math[_0x77a918(0x10e)](_0x25be6b+(_0x209105&&_0x209105['offset']||0x0),0x0)}),_0x52c0d9!=_0x286488&&_0x1eb4e3[_0x77a918(0x121)](_0x286488+'/'+_0x52c0d9));}}}catch(_0x27db46){if(!_0x28daa9){if(_0x27db46[_0x77a918(0x136)]()[_0x77a918(0x1a7)]('API-key\x20format\x20invalid'))return logHistory(_0x77a918(0x184),_0x77a918(0x14d)),![];else{if(_0x27db46[_0x77a918(0x136)]()['includes'](_0x77a918(0x100)))return logHistory('error',_0x77a918(0x14e)),![];else{if(_0x27db46[_0x77a918(0x136)]()[_0x77a918(0x1a7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x77a918(0x184),_0x77a918(0x14f)),![];else await handleError(_0x27db46,_0x77a918(0x118));}}}else await handleError(_0x27db46,_0x77a918(0x118));}return _0x51912f;}async function getPortfolio(_0x1d29db){const _0x1a8330=_0x3eaabc;let _0x217289=[],_0x129855=[],_0x1949c7,_0x40cf3a=[],_0x3f4ad7,_0x28fee0;_0x1d29db[_0x1a8330(0x166)]===_0x1a8330(0x196)||_0x1d29db['apiSecret']===_0x1a8330(0x196)?(_0x3f4ad7=config[_0x1a8330(0x166)],_0x28fee0=config[_0x1a8330(0x1cb)]):(_0x3f4ad7=_0x1d29db[_0x1a8330(0x166)],_0x28fee0=_0x1d29db['apiSecret']);await initExchange(_0x3f4ad7,_0x28fee0);let _0x21f6a3=await loadSymbols();if(_0x21f6a3){_0x40cf3a=await getCoins(![],_0x1d29db[_0x1a8330(0x139)]);if(_0x40cf3a===![])proxyEmit(_0x1a8330(0xeb),![]);else{if(_0x1d29db['basecoin']=='')proxyEmit('portfolio',_0x40cf3a);else{_0x40cf3a[_0x1a8330(0x19c)](_0x47477f=>{const _0x2535f0=_0x1a8330;_0x217289[_0x2535f0(0x121)](_0x47477f[_0x2535f0(0x11c)]);});try{_0x129855=await exchange[_0x1a8330(0x113)](_0x217289);}catch(_0x1ba3bb){await handleError(_0x1ba3bb,'getPortfolio()');}_0x40cf3a['forEach'](_0x2e143e=>{const _0x313fd9=_0x1a8330;_0x2e143e[_0x313fd9(0x134)]!=_0x1d29db[_0x313fd9(0x139)]?_0x1949c7=_0x2e143e[_0x313fd9(0x11e)]?0x1/_0x129855[_0x2e143e[_0x313fd9(0x11c)]][_0x313fd9(0x1c5)]:_0x129855[_0x2e143e[_0x313fd9(0x11c)]]['last']:_0x1949c7=0x1,_0x2e143e['price']=formatResult(_0x1949c7,0x8);}),proxyEmit(_0x1a8330(0xeb),_0x40cf3a);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x171e1b){const _0x781084=_0x3eaabc;let _0x8a0f54=!![];const _0x5136ca=!_0x171e1b[_0x781084(0x11e)]?markets[_0x171e1b[_0x781084(0x11c)]]['limits']['amount'][_0x781084(0x1aa)]:markets[_0x171e1b[_0x781084(0x11c)]][_0x781084(0x1c7)][_0x781084(0x183)][_0x781084(0x1aa)],_0x5b40c9=!_0x171e1b['reverse']?markets[_0x171e1b['symbol']][_0x781084(0x1c7)][_0x781084(0x183)]['min']:markets[_0x171e1b[_0x781084(0x11c)]]['limits'][_0x781084(0x1ac)][_0x781084(0x1aa)];if(Math['abs'](_0x171e1b[_0x781084(0x1dc)])<_0x5136ca)_0x8a0f54=![];if(Math['abs'](_0x171e1b[_0x781084(0x1dc)])*_0x171e1b['last']<_0x5b40c9)_0x8a0f54=![];return _0x8a0f54;}async function getBalances(){const _0x2c1352=_0x3eaabc;let _0x5699a2=0x0,_0xc432c3;const _0x1bdaff=config['threshold'];currentCoins[_0x2c1352(0x19c)](_0x3e931c=>{const _0x4a2ac7=_0x2c1352;if(_0x3e931c[_0x4a2ac7(0x134)]!=config[_0x4a2ac7(0x139)]){let _0x2e5c16=global[_0x4a2ac7(0x17c)][noslash(_0x3e931c[_0x4a2ac7(0x11c)])];_0xc432c3=_0x3e931c[_0x4a2ac7(0x11e)]?0x1/_0x2e5c16:_0x2e5c16;}else _0xc432c3=0x1;let _0xf5bbde=_0x3e931c['number']*_0xc432c3;_0x5699a2+=_0xf5bbde,_0x3e931c[_0x4a2ac7(0x1c5)]=formatResult(Number(_0xc432c3),0x8),_0x3e931c[_0x4a2ac7(0x18e)]=_0xf5bbde;}),currentCoins[_0x2c1352(0x19c)](_0xa7628e=>{const _0x170a66=_0x2c1352;let _0x1156a3=config[_0x170a66(0xeb)][_0x170a66(0x198)](_0x57809a=>_0x57809a['coin']==_0xa7628e[_0x170a66(0x134)]),_0x41f6df=Number(_0x1156a3[_0x170a66(0x1d5)]),_0x122a1d=_0xa7628e[_0x170a66(0x18e)]/_0x5699a2*0x64,_0x15452d=_0x41f6df*_0x5699a2/0x64/_0xa7628e[_0x170a66(0x1c5)]-_0xa7628e[_0x170a66(0x1e2)];_0xa7628e[_0x170a66(0x1d5)]=formatResult(_0x122a1d,0x3),_0xa7628e[_0x170a66(0x108)]=formatResult(_0x41f6df,0x3),_0xa7628e[_0x170a66(0x1dc)]=formatResult(_0x15452d,0x8),_0xa7628e[_0x170a66(0xdf)]='',_0xa7628e['valid']='';if(_0xa7628e[_0x170a66(0x134)]!=config[_0x170a66(0x139)]){if(_0xa7628e['distribution']>_0x41f6df)_0xa7628e['side']='sell',_0xa7628e[_0x170a66(0xe8)]=checkMinimums(_0xa7628e);else _0xa7628e[_0x170a66(0x1d5)]<_0x41f6df&&(_0xa7628e[_0x170a66(0xdf)]=_0x170a66(0x11f),_0xa7628e[_0x170a66(0xe8)]=checkMinimums(_0xa7628e));}_0xa7628e[_0x170a66(0xe9)]=_0xa7628e[_0x170a66(0x1d5)]/_0xa7628e[_0x170a66(0x108)]-0x1;}),currentCoins[_0x2c1352(0x105)]((_0x279047,_0x1f27c1)=>_0x279047[_0x2c1352(0xe9)]<_0x1f27c1[_0x2c1352(0xe9)]?0x1:_0x1f27c1[_0x2c1352(0xe9)]<_0x279047[_0x2c1352(0xe9)]?-0x1:0x0);const _0x3b7594=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3b7594[_0x2c1352(0x115)],'usd':_0x3b7594['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1bdaff},proxyEmit(_0x2c1352(0x1b1),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2c1352(0x12d)])headlessMode({'portfolio':currentCoins,'threshold':_0x1bdaff});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3ab002=_0x3eaabc;if(!lastBalances)return;let _0x22df27=await getStartingBalances(![]),_0x803c78=[],_0x46697b;JSON[_0x3ab002(0x1b7)](lastBalances[_0x3ab002(0xeb)])[_0x3ab002(0x19c)](_0x2ec14a=>{const _0x3ca48e=_0x3ab002;let _0x4115fa={'coin':_0x2ec14a[_0x3ca48e(0x134)],'number':_0x2ec14a[_0x3ca48e(0x1e2)],'price':_0x2ec14a[_0x3ca48e(0x1c5)]};_0x803c78['push'](_0x4115fa);});const _0x5697ba=await getFiat();_0x46697b={'date':lastBalances[_0x3ab002(0x120)]['split']('\x20')[0x0],'eur':_0x5697ba[_0x3ab002(0x115)],'usd':_0x5697ba[_0x3ab002(0x149)],'coins':_0x803c78};let _0x4d109d=dbPerformance[_0x3ab002(0x1a0)](_0x3ab002(0x13c))['find']({'date':_0x46697b['date']})[_0x3ab002(0x18e)]();_0x4d109d?dbPerformance['get'](_0x3ab002(0x13c))['find']({'date':_0x46697b[_0x3ab002(0xdb)]})[_0x3ab002(0x10f)](_0x46697b)[_0x3ab002(0x14a)]():dbPerformance[_0x3ab002(0x1a0)](_0x3ab002(0x13c))[_0x3ab002(0x121)](_0x46697b)[_0x3ab002(0x14a)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x41c740=_0x3eaabc;if(dbPerformance[_0x41c740(0xde)](_0x41c740(0x13c))['value']()){let _0x1cec75=dbPerformance[_0x41c740(0x1a0)](_0x41c740(0x13c))[_0x41c740(0x1b3)](_0x41c740(0xdb))['value']();proxyEmit(_0x41c740(0x194),_0x1cec75),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0xb163ca=!![]){const _0x3a14c9=_0x3eaabc;let _0x2c08dc=dbPerformance['get'](_0x3a14c9(0x13c))['find']({'date':config['startdate']})[_0x3a14c9(0x18e)]();config[_0x3a14c9(0x166)]!=''&&!_0x2c08dc&&(await setStartDatePerformance(config),_0x2c08dc=dbPerformance['get'](_0x3a14c9(0x13c))['find']({'date':config[_0x3a14c9(0xd9)]})[_0x3a14c9(0x18e)]());if(config[_0x3a14c9(0x166)]==''||!_0x2c08dc)return{};let _0x812c53=0x0,_0x31b178=0x0,_0x48bd45=0x0,_0x4724f4=[],_0x361971=0x0;config['portfolio'][_0x3a14c9(0x19c)](_0x390c81=>{const _0x3b5251=_0x3a14c9;if(!_0x390c81[_0x3b5251(0x1a6)]){_0x4724f4[_0x361971]={'coin':_0x390c81[_0x3b5251(0x134)],'symbol':_0x390c81[_0x3b5251(0x11c)],'number':_0x390c81[_0x3b5251(0x17f)],'price':_0x390c81[_0x3b5251(0x104)]},_0x812c53+=_0x390c81['startprice']*_0x390c81[_0x3b5251(0x17f)];if(config[_0x3b5251(0x139)]==_0x3b5251(0xe0))_0x31b178+=_0x390c81[_0x3b5251(0x104)]*_0x390c81[_0x3b5251(0x17f)]*_0x2c08dc[_0x3b5251(0x115)],_0x48bd45+=_0x390c81['startprice']*_0x390c81['startnumber']*_0x2c08dc[_0x3b5251(0x149)];else{if(config['basecoin']==_0x3b5251(0xdc)||config[_0x3b5251(0x139)]==_0x3b5251(0x1c1)||config[_0x3b5251(0x139)]==_0x3b5251(0x1dd))_0x31b178+=_0x390c81['startprice']*_0x390c81[_0x3b5251(0x17f)]*_0x2c08dc[_0x3b5251(0x115)]/_0x2c08dc[_0x3b5251(0x149)],_0x48bd45+=_0x390c81[_0x3b5251(0x104)]*_0x390c81[_0x3b5251(0x17f)];else config['basecoin']=='EUR'&&(_0x31b178+=_0x390c81[_0x3b5251(0x104)]*_0x390c81[_0x3b5251(0x17f)],_0x48bd45+=_0x390c81[_0x3b5251(0x104)]*_0x390c81['startnumber']*_0x2c08dc[_0x3b5251(0x149)]/_0x2c08dc[_0x3b5251(0x115)]);}_0x361971++;}});let _0x2473c3={'basecoin':_0x812c53,'eur':_0x31b178,'usd':_0x48bd45,'coins':_0x4724f4};if(_0xb163ca)proxyEmit(_0x3a14c9(0xf9),_0x2473c3);return _0x2473c3;}function headlessMode(_0x38b4f1){const _0x3ce971=_0x3eaabc;let _0x42b2e2=_0x38b4f1[_0x3ce971(0xeb)],_0x13a3e2=_0x38b4f1[_0x3ce971(0x12a)],_0x930983=[];for(let _0x19ae40 of _0x42b2e2){if(_0x19ae40[_0x3ce971(0x134)]!=config['basecoin']){if(_0x19ae40[_0x3ce971(0x1d5)]/_0x19ae40['target']-0x1>=_0x13a3e2/0x64){if(_0x19ae40[_0x3ce971(0xe8)])_0x930983[_0x3ce971(0x121)](_0x19ae40);}else{if(_0x19ae40['distribution']/_0x19ae40['target']-0x1<=-_0x13a3e2/0x64){if(_0x19ae40[_0x3ce971(0xe8)])_0x930983['push'](_0x19ae40);}}}}_0x930983[_0x3ce971(0x132)]>0x0&&placeOrder(_0x930983);}function symbolToCoin(_0x4a22f8){const _0x184239=_0x3eaabc;let _0x5202b2;if(_0x4a22f8['includes']('/'+config[_0x184239(0x139)]))_0x5202b2=_0x4a22f8[_0x184239(0x161)]('/'+config[_0x184239(0x139)],'');if(_0x4a22f8[_0x184239(0x1a7)](config[_0x184239(0x139)]+'/'))_0x5202b2=_0x4a22f8[_0x184239(0x161)](config[_0x184239(0x139)]+'/','');return _0x5202b2;}async function validateOrders(_0x9127c1=0x0){const _0x413f2b=_0x3eaabc;let _0x1702b8=[],_0x13c6a9=config[_0x413f2b(0xe2)]==_0x413f2b(0x1da)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x413f2b(0x19c)](_0x1d3c27=>{const _0xd3f7e2=_0x413f2b;let _0x2e4912=previousCoins[_0xd3f7e2(0x198)](_0x1ed37b=>_0x1ed37b[_0xd3f7e2(0x134)]==symbolToCoin(_0x1d3c27[_0xd3f7e2(0x11c)])),_0x4175f3=currentCoins[_0xd3f7e2(0x198)](_0x967a46=>_0x967a46[_0xd3f7e2(0x134)]==symbolToCoin(_0x1d3c27['symbol'])),_0x53e951,_0x42c871;_0x1d3c27[_0xd3f7e2(0xdf)]==_0xd3f7e2(0x11f)&&!_0x1d3c27[_0xd3f7e2(0x11e)]||_0x1d3c27[_0xd3f7e2(0xdf)]==_0xd3f7e2(0x1db)&&_0x1d3c27['reverse']?(_0x53e951=_0x2e4912[_0xd3f7e2(0x1e2)]+0.9*_0x1d3c27['filled'],_0x42c871=_0x2e4912['number']+1.1*_0x1d3c27[_0xd3f7e2(0x1cf)]):(_0x53e951=_0x2e4912['number']-1.1*_0x1d3c27[_0xd3f7e2(0x1cf)],_0x42c871=_0x2e4912['number']-0.9*_0x1d3c27['filled']);const _0x2f561e=_0x1d3c27['filled']!=0x0&&_0x4175f3[_0xd3f7e2(0x1e2)]>=_0x53e951&&_0x4175f3[_0xd3f7e2(0x1e2)]<=_0x42c871;_0x1702b8[_0xd3f7e2(0x121)](_0x2f561e);if(_0x2f561e&&config[_0xd3f7e2(0xe2)]!=_0xd3f7e2(0x1da)){if(_0x1d3c27[_0xd3f7e2(0x11e)])logHistory(_0xd3f7e2(0x153),'Order\x20filled:\x20'+_0x1d3c27[_0xd3f7e2(0x11c)]+'\x20'+_0x1d3c27[_0xd3f7e2(0xdf)]+'\x20#'+formatResult(_0x1d3c27['filled']/_0x1d3c27[_0xd3f7e2(0xd8)],0x8)+'\x20@'+formatResult(_0x1d3c27[_0xd3f7e2(0xd8)],0x8));else logHistory(_0xd3f7e2(0x153),_0xd3f7e2(0xd2)+_0x1d3c27[_0xd3f7e2(0x11c)]+'\x20'+_0x1d3c27[_0xd3f7e2(0xdf)]+'\x20#'+formatResult(_0x1d3c27[_0xd3f7e2(0x1cf)],0x8)+'\x20@'+formatResult(_0x1d3c27['price'],0x8));}}),_0x1702b8['forEach']((_0x9f10a0,_0x2bfe93)=>{const _0x3a7609=_0x413f2b;if(_0x9f10a0)lastOrders[_0x3a7609(0xe3)](_0x2bfe93,0x1);});if(_0x9127c1<_0x13c6a9&&_0x1702b8[_0x413f2b(0x1a7)](![])){if(_0x9127c1==0x0){config[_0x413f2b(0xe2)]==_0x413f2b(0x1da)?logHistory(_0x413f2b(0x184),_0x413f2b(0x16f)):logHistory(_0x413f2b(0x184),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x9127c1);},0xa*0x3e8);}else{(_0x9127c1==0x1||_0x9127c1==Math[_0x413f2b(0xe5)](_0x13c6a9/0x2)||_0x9127c1==_0x13c6a9-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x9127c1);},validateOrderInterval);}}else{lockOrders=![];if(_0x9127c1>0x0&&!_0x1702b8[_0x413f2b(0x1a7)](![]))config[_0x413f2b(0xe2)]==_0x413f2b(0x1da)?logHistory(_0x413f2b(0x12e),_0x413f2b(0x1a8)):logHistory(_0x413f2b(0x12e),_0x413f2b(0xf2));else _0x9127c1>0x0&&_0x1702b8[_0x413f2b(0x1a7)](![])&&(config[_0x413f2b(0xe2)]==_0x413f2b(0x1da)?logHistory(_0x413f2b(0x12e),_0x413f2b(0x11d)+Math[_0x413f2b(0xe5)](_0x13c6a9*validateOrderInterval/0xea60)+_0x413f2b(0x158)):(lastOrders[_0x413f2b(0x19c)](async _0x194291=>{const _0x2731bd=_0x413f2b;try{const _0x9c002d=await exchange[_0x2731bd(0xd5)](_0x194291[_0x2731bd(0x160)],_0x194291[_0x2731bd(0x11c)]);}catch(_0x3d6216){if(_0x3d6216[_0x2731bd(0x136)]()[_0x2731bd(0x1a7)]('OrderNotFound')){}else await handleError(_0x3d6216,_0x2731bd(0x114));}}),logHistory(_0x413f2b(0x12e),_0x413f2b(0x173)+Math['round'](_0x13c6a9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x32bdce=_0x3eaabc;dbCoinResults[_0x32bdce(0x1a0)](_0x32bdce(0x10d))['remove']()[_0x32bdce(0x14a)]();let _0x5aa3ba=await getStartingBalances(![]);_0x5aa3ba['coins'][_0x32bdce(0x19c)](_0x3f6f89=>{const _0x4f3e86=_0x32bdce,_0x2e6b50=_0x3f6f89[_0x4f3e86(0x11c)][_0x4f3e86(0x1a7)](config['basecoin']+'/');if(_0x3f6f89[_0x4f3e86(0x134)]!=config['basecoin']){let _0x6219c1={'coin':_0x3f6f89[_0x4f3e86(0x134)],'number':_0x3f6f89[_0x4f3e86(0x1e2)],'breakeven':_0x3f6f89[_0x4f3e86(0xd8)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4f3e86(0x10d))[_0x4f3e86(0x121)](_0x6219c1)[_0x4f3e86(0x14a)]();}});}async function updateCoinResults(_0x4e3f95){const _0x28ed63=_0x3eaabc;let _0x2e7d6f,_0xe90c43,_0x5dd091,_0x54cd93,_0x460b8c,_0x41e989,_0x4da48b=dbCoinResults[_0x28ed63(0x1a0)](_0x28ed63(0x10d))['find']({'coin':_0x4e3f95[_0x28ed63(0x134)]})[_0x28ed63(0x18e)]();if(!_0x4da48b)return;if(_0x4e3f95[_0x28ed63(0x103)]&&_0x4e3f95[_0x28ed63(0x103)][_0x28ed63(0x1c2)]==config[_0x28ed63(0x139)])_0x2e7d6f=_0x4e3f95[_0x28ed63(0x103)][_0x28ed63(0x183)];else{if(_0x4e3f95['fee']&&_0x4e3f95[_0x28ed63(0x103)][_0x28ed63(0x1c2)]==_0x28ed63(0xd6))_0x2e7d6f=_0x4e3f95[_0x28ed63(0x103)][_0x28ed63(0x183)]*global[_0x28ed63(0x17c)]['BNB'+config['basecoin']];else _0x2e7d6f=0.001*_0x4e3f95[_0x28ed63(0x1cf)];}const _0x110ea8=_0x4e3f95['symbol'][_0x28ed63(0x1a7)](config[_0x28ed63(0x139)]+'/');_0x110ea8&&(_0x41e989={'coin':_0x4e3f95[_0x28ed63(0x134)],'symbol':_0x4e3f95[_0x28ed63(0x11c)],'filled':_0x4e3f95['filled']*_0x4e3f95['price'],'side':_0x4e3f95['side']==_0x28ed63(0x1db)?'buy':_0x28ed63(0x1db),'price':0x1/_0x4e3f95[_0x28ed63(0xd8)]},_0x4e3f95={..._0x41e989});_0x4e3f95[_0x28ed63(0xdf)]=='buy'?_0x5dd091=(_0x4da48b[_0x28ed63(0x128)]*_0x4da48b[_0x28ed63(0x1e2)]+_0x4e3f95['price']*_0x4e3f95['filled'])/(_0x4da48b['number']+_0x4e3f95[_0x28ed63(0x1cf)]):_0x5dd091=(_0x4da48b[_0x28ed63(0x128)]*_0x4da48b[_0x28ed63(0x1e2)]-_0x4e3f95['price']*_0x4e3f95[_0x28ed63(0x1cf)])/(_0x4da48b['number']-_0x4e3f95[_0x28ed63(0x1cf)]);_0x4e3f95[_0x28ed63(0xdf)]==_0x28ed63(0x11f)?_0x54cd93=_0x4da48b[_0x28ed63(0x137)]:_0x54cd93=_0x4da48b[_0x28ed63(0x137)]+(_0x4e3f95['price']-_0x4da48b[_0x28ed63(0x128)])*_0x4e3f95[_0x28ed63(0x1cf)];_0xe90c43=_0x4e3f95[_0x28ed63(0xdf)]==_0x28ed63(0x1db)?_0x4da48b[_0x28ed63(0x1e2)]-_0x4e3f95[_0x28ed63(0x1cf)]:_0x4da48b[_0x28ed63(0x1e2)]+_0x4e3f95['filled'],_0x460b8c=(_0x4e3f95[_0x28ed63(0xd8)]-_0x5dd091)*_0xe90c43;let _0x493154={'coin':_0x4e3f95[_0x28ed63(0x134)],'number':_0xe90c43,'breakeven':formatResult(_0x5dd091,0x8),'realized':formatResult(_0x54cd93,0x8),'unrealized':formatResult(_0x460b8c,0x8),'fees':formatResult(_0x4da48b[_0x28ed63(0x1c4)]+_0x2e7d6f,0x8),'sells':_0x4e3f95[_0x28ed63(0xdf)]==_0x28ed63(0x1db)?_0x4da48b[_0x28ed63(0x18c)]+0x1:_0x4da48b[_0x28ed63(0x18c)],'buys':_0x4e3f95['side']==_0x28ed63(0x11f)?_0x4da48b[_0x28ed63(0x170)]+0x1:_0x4da48b[_0x28ed63(0x170)]};dbCoinResults[_0x28ed63(0x1a0)](_0x28ed63(0x10d))[_0x28ed63(0x198)]({'coin':_0x4e3f95[_0x28ed63(0x134)]})[_0x28ed63(0x10f)](_0x493154)[_0x28ed63(0x14a)]();}async function placeOrder(_0x16fa0a){const _0x285471=_0x3eaabc,_0x510cbf=config[_0x285471(0xe2)]==_0x285471(0x1da)?_0x285471(0x1da):_0x285471(0x1e8);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x285471(0x1b7)](JSON['stringify'](currentCoins));for(const _0x229590 of _0x16fa0a){let _0x441822,_0xd186b0,_0xb56a46,_0x47a0a2,_0x5639e6,_0x5e1218=_0x229590[_0x285471(0x11c)];try{const _0x3d4663=await exchange['fetchTickers'](_0x5e1218),_0x6b7eec=_0x3d4663[_0x5e1218];_0x441822=_0x6b7eec[_0x285471(0x1c5)],_0xd186b0=_0x6b7eec[_0x285471(0xfa)],_0xb56a46=_0x6b7eec['ask'];_0x229590['reverse']?(_0x47a0a2=_0x229590[_0x285471(0xdf)]==_0x285471(0x11f)?_0x285471(0x1db):_0x285471(0x11f),_0x5639e6=Math[_0x285471(0xfb)](_0x229590['trade'])/_0x441822):(_0x47a0a2=_0x229590[_0x285471(0xdf)],_0x5639e6=Math[_0x285471(0xfb)](_0x229590[_0x285471(0x1dc)]));_0x510cbf==_0x285471(0x1e8)&&(config[_0x285471(0xe2)]==_0x285471(0x109)&&(_0x441822=_0x47a0a2==_0x285471(0x11f)?_0xd186b0:_0xb56a46),config[_0x285471(0xe2)]==_0x285471(0x10c)&&(_0x441822=_0x47a0a2==_0x285471(0x11f)?_0xb56a46:_0xd186b0));_0x5639e6=formatResult(_0x5639e6,0x8),_0x441822=formatResult(_0x441822,0x8);const _0x33becf=await exchange['createOrder'](_0x5e1218,_0x510cbf,_0x47a0a2,_0x5639e6,_0x441822);lastOrders['push']({'orderId':_0x33becf['id'],'symbol':_0x5e1218,'side':_0x47a0a2,'reverse':_0x229590[_0x285471(0x11e)],'amount':_0x229590[_0x285471(0x11e)]?_0x33becf[_0x285471(0x1ac)]*_0x33becf[_0x285471(0xd8)]:_0x33becf[_0x285471(0x1ac)],'filled':_0x229590['reverse']?_0x33becf[_0x285471(0x1cf)]*_0x33becf[_0x285471(0xd8)]:_0x33becf['filled'],'price':_0x33becf[_0x285471(0xd8)]});const _0x518d78=_0x47a0a2==_0x285471(0x1db)?config[_0x285471(0x102)]?String[_0x285471(0x1e1)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x285471(0x1e1)]('0x'+config[_0x285471(0x13a)])+'\x20':'',_0x28e904=_0x510cbf=='market'?_0x285471(0xf8):config[_0x285471(0xe2)]=='limit-high'?_0x285471(0x1b5):_0x285471(0x1c9);if(_0x510cbf==_0x285471(0x1da))logHistory(_0x285471(0x153),''+_0x518d78+_0x28e904+_0x285471(0x155)+_0x5e1218+'\x20'+_0x47a0a2+'\x20#'+formatResult(_0x33becf[_0x285471(0x1cf)],0x8)+'\x20@'+formatResult(_0x33becf[_0x285471(0xd8)],0x8));else logHistory('order',''+_0x518d78+_0x28e904+_0x285471(0x155)+_0x5e1218+'\x20'+_0x47a0a2+'\x20#'+formatResult(_0x33becf[_0x285471(0x1ac)],0x8)+'\x20@'+formatResult(_0x33becf[_0x285471(0xd8)],0x8));_0x33becf[_0x285471(0x134)]=_0x229590[_0x285471(0x134)],await updateCoinResults(_0x33becf);if(config[_0x285471(0x18f)]!=0x0){let _0x33342f=null;if(cooldownTracker[_0x285471(0x132)]==config[_0x285471(0x18f)]-0x1)_0x33342f=cooldownTracker[_0x285471(0xe4)]();const _0x3e4b9a=getTimeStamp();cooldownTracker[_0x285471(0x121)](_0x3e4b9a);if(_0x33342f){const _0x10118e=fns[_0x285471(0xfc)](new Date(_0x3e4b9a),new Date(_0x33342f));_0x10118e<cooldownInterval&&(logHistory('error',_0x285471(0x1b4)+config[_0x285471(0x18f)]+_0x285471(0x13d)+cooldownInterval/0x3c+_0x285471(0x17b)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x3de73a){if(_0x3de73a[_0x285471(0x136)]()[_0x285471(0x1a7)]('MIN_NOTIONAL'))logHistory(_0x285471(0x184),_0x285471(0x18a)+_0x5e1218);else{if(_0x3de73a['toString']()[_0x285471(0x1a7)](_0x285471(0x11a)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x5e1218);else await handleError(_0x3de73a,_0x285471(0x15a));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x285471(0x12d)]&&(config['ordertype']==_0x285471(0x1da)?logHistory(_0x285471(0x184),_0x285471(0xef)):logHistory(_0x285471(0x184),_0x285471(0x1e6)));else coolingDown&&(!config[_0x285471(0x12d)]&&logHistory(_0x285471(0x184),_0x285471(0xf6)));}}function logHistory(_0xe65db,_0x320d08,_0x1f02cb=''){const _0x4fea52=_0x3eaabc;let _0x34ae1c={'time':getTimeStamp(),'type':_0xe65db,'event':_0x320d08,'botname':config[_0x4fea52(0x107)],'showname':config['showname']};dbLogs[_0x4fea52(0x1a0)](_0x4fea52(0x1df))[_0x4fea52(0x121)](_0x34ae1c)['write']();if(_0x1f02cb=='')_0x1f02cb=_0x320d08;proxyEmit(_0x4fea52(0x151),{'log':_0x34ae1c,'summary':_0x1f02cb}),process[_0x4fea52(0x144)]({'telegram':_0x34ae1c},_0x10f605=>{}),logging(''+_0x34ae1c[_0x4fea52(0x151)]);}function emitHistory(_0x254954={}){const _0x5ef9fc=_0x3eaabc;Object[_0x5ef9fc(0x127)](_0x254954)[_0x5ef9fc(0x132)]==0x0&&(_0x254954={'type':[_0x5ef9fc(0x153),_0x5ef9fc(0x151)],'event':'','page':0x1});if(_0x254954[_0x5ef9fc(0xf7)][_0x5ef9fc(0x1a7)](_0x5ef9fc(0x151)))_0x254954[_0x5ef9fc(0xf7)][_0x5ef9fc(0xe3)](_0x254954[_0x5ef9fc(0xf7)][_0x5ef9fc(0x1ba)](_0x5ef9fc(0x151)),0x1,_0x5ef9fc(0x184),_0x5ef9fc(0x12e));if(dbLogs['has'](_0x5ef9fc(0x1df))[_0x5ef9fc(0x18e)]()){let _0x372082=dbLogs[_0x5ef9fc(0x1a0)](_0x5ef9fc(0x1df))[_0x5ef9fc(0x14c)](_0x506601=>{const _0x4a65c6=_0x5ef9fc;if(_0x254954[_0x4a65c6(0xf7)][_0x4a65c6(0x132)]==0x0)return![];else return _0x254954[_0x4a65c6(0xf7)][_0x4a65c6(0x1a7)](_0x506601[_0x4a65c6(0xf7)]);})[_0x5ef9fc(0x14c)](_0x2ee318=>{const _0x460546=_0x5ef9fc;if(_0x254954[_0x460546(0x151)]=='')return!![];else return _0x2ee318[_0x460546(0x151)][_0x460546(0x163)]()[_0x460546(0x1a7)](_0x254954['event']['toLowerCase']());})[_0x5ef9fc(0x1b3)]('time'),_0x579a90=_0x372082[_0x5ef9fc(0x18e)]()[_0x5ef9fc(0x132)];_0x372082=_0x372082['reverse']()[_0x5ef9fc(0x1c3)]((_0x254954[_0x5ef9fc(0x12b)]-0x1)*logPageSize,_0x254954[_0x5ef9fc(0x12b)]*logPageSize-0x1)[_0x5ef9fc(0x11e)]()[_0x5ef9fc(0x18e)](),proxyEmit(_0x5ef9fc(0xf1),{'logs':_0x372082,'total':_0x579a90});}else proxyEmit(_0x5ef9fc(0xf1),{'logs':[],'total':0x0});}async function pauseBot(_0x730283){const _0x58f9c5=_0x3eaabc,_0x19b168=new Date()[_0x58f9c5(0x174)]();if(!lastBotPause)lastBotPause=new Date()[_0x58f9c5(0x174)](),consecutivePauses=0x1;else{if(_0x19b168-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x58f9c5(0x144)]({'stop':_0x58f9c5(0x186)},_0x172be9=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x58f9c5(0x174)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x58f9c5(0x184),_0x58f9c5(0x13e)+consecutivePauses+')'),await sleep(_0x730283),botPaused=![],reset();}}async function handleError(_0x17eff1,_0x13b3ed,_0x2790c2=''){const _0x23d62f=_0x3eaabc;if(_0x17eff1[_0x23d62f(0x136)]()['includes'](_0x23d62f(0x159)))logHistory('error',_0x13b3ed+_0x23d62f(0xe1)),await pauseBot(pauseBotInterval);else{if(_0x17eff1[_0x23d62f(0x136)]()[_0x23d62f(0x1a7)](_0x23d62f(0xf0)))logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0x1d8)),await pauseBot(pauseBotInterval);else{if(_0x17eff1[_0x23d62f(0x136)]()[_0x23d62f(0x1a7)]('RequestTimeout'))logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0x1c0)),await pauseBot(pauseBotInterval);else{if(_0x17eff1[_0x23d62f(0x136)]()[_0x23d62f(0x1a7)](_0x23d62f(0x1e4)))logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0xd7)),logHistory(_0x23d62f(0x184),_0x23d62f(0x1d0)),process[_0x23d62f(0x144)]({'stop':_0x23d62f(0x190)},_0x17743f=>{});else{if(_0x17eff1['toString']()[_0x23d62f(0x1a7)](_0x23d62f(0x100)))logHistory('error',_0x13b3ed+_0x23d62f(0x176)),logHistory(_0x23d62f(0x184),_0x23d62f(0x1d0)),process[_0x23d62f(0x144)]({'stop':_0x23d62f(0x190)},_0x1ffb99=>{});else{if(_0x17eff1['toString']()[_0x23d62f(0x1a7)](_0x23d62f(0x1a4)))logHistory(_0x23d62f(0x184),_0x13b3ed+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x23d62f(0x1d0)),process[_0x23d62f(0x144)]({'stop':'kill'},_0x1329d9=>{});else{if(_0x17eff1[_0x23d62f(0x136)]()['includes'](_0x23d62f(0x19b)))logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0x17e)),logHistory(_0x23d62f(0x184),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x23d62f(0x144)]({'stop':'kill'},_0x7335a2=>{});else{if(_0x17eff1[_0x23d62f(0x136)]()[_0x23d62f(0x1a7)](_0x23d62f(0xd4)))logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0x126)),await pauseBot(pauseBotInterval),process[_0x23d62f(0x144)]({'stop':_0x23d62f(0x186)},_0xcdb8f2=>{});else _0x17eff1[_0x23d62f(0x136)]()[_0x23d62f(0x1a7)](_0x23d62f(0x15f))?logHistory('error',_0x13b3ed+_0x23d62f(0x167)):(logHistory(_0x23d62f(0x184),_0x13b3ed+_0x23d62f(0x142)),logging(_0x13b3ed+_0x23d62f(0x1e0),_0x17eff1),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x16c115,_0x28de94){const _0x52b54d=_0x3eaabc;return parseFloat(_0x16c115[_0x52b54d(0xf5)](_0x28de94));}function logging(_0x2992dc,_0x16b31a=''){const _0x2b3381=_0x3eaabc;if(config[_0x2b3381(0x1e3)])console[_0x2b3381(0x1ce)](getTimeStamp()+':\x20'+config[_0x2b3381(0x107)]+_0x2b3381(0x164)+_0x2992dc,_0x16b31a);else console[_0x2b3381(0x1ce)](getTimeStamp()+_0x2b3381(0x193)+botID+_0x2b3381(0x164)+_0x2992dc,_0x16b31a);}function getServerTime(){const _0x49288c=_0x3eaabc,_0x3316aa=new Date();return _0x3316aa[_0x49288c(0x125)]()+'/'+(_0x3316aa[_0x49288c(0x13b)]()+0x1)[_0x49288c(0x136)]()[_0x49288c(0x130)](0x2,'0')+'/'+_0x3316aa[_0x49288c(0x123)]()['toString']()[_0x49288c(0x130)](0x2,'0')+'\x20'+_0x3316aa[_0x49288c(0x10a)]()['toString']()[_0x49288c(0x130)](0x2,'0')+':'+_0x3316aa['getMinutes']()[_0x49288c(0x136)]()[_0x49288c(0x130)](0x2,'0')+':'+_0x3316aa[_0x49288c(0x1a9)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0xf89072=_0x3eaabc,_0x5110ae=shiftedTime();return _0x5110ae[_0xf89072(0x125)]()+'/'+(_0x5110ae[_0xf89072(0x13b)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5110ae[_0xf89072(0x123)]()[_0xf89072(0x136)]()[_0xf89072(0x130)](0x2,'0')+'\x20'+_0x5110ae[_0xf89072(0x10a)]()[_0xf89072(0x136)]()['padStart'](0x2,'0')+':'+_0x5110ae[_0xf89072(0x192)]()[_0xf89072(0x136)]()['padStart'](0x2,'0')+':'+_0x5110ae[_0xf89072(0x1a9)]()[_0xf89072(0x136)]()['padStart'](0x2,'0');}function getDate(){const _0x66f7a9=_0x3eaabc,_0x85cc71=shiftedTime();return _0x85cc71[_0x66f7a9(0x125)]()+'/'+(_0x85cc71[_0x66f7a9(0x13b)]()+0x1)[_0x66f7a9(0x136)]()[_0x66f7a9(0x130)](0x2,'0')+'/'+_0x85cc71[_0x66f7a9(0x123)]()['toString']()[_0x66f7a9(0x130)](0x2,'0');}function getHour(){const _0x126e60=_0x3eaabc,_0x2bd362=shiftedTime();return _0x2bd362['getHours']()[_0x126e60(0x136)]()[_0x126e60(0x130)](0x2,'0');}function sleep(_0x361713){return new Promise(_0x1df1a1=>setTimeout(_0x1df1a1,_0x361713));}function shiftedTime(){const _0x1f22ed=_0x3eaabc,_0x141e59=new Date();let _0x4cbc00=_0x141e59;if(config&&config['timeshift']!==0x0)_0x4cbc00=fns[_0x1f22ed(0x1bb)](_0x141e59,{'hours':config[_0x1f22ed(0x112)]});return _0x4cbc00;}