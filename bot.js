const _0xe8b1cf=_0x4b44;(function(_0x1ab9db,_0x10621c){const _0x1b1e19=_0x4b44,_0x23c6e5=_0x1ab9db();while(!![]){try{const _0x434ca9=-parseInt(_0x1b1e19(0x227))/0x1*(parseInt(_0x1b1e19(0x24a))/0x2)+-parseInt(_0x1b1e19(0x2bb))/0x3+-parseInt(_0x1b1e19(0x2b8))/0x4*(-parseInt(_0x1b1e19(0x2b5))/0x5)+parseInt(_0x1b1e19(0x200))/0x6*(-parseInt(_0x1b1e19(0x281))/0x7)+-parseInt(_0x1b1e19(0x24e))/0x8+-parseInt(_0x1b1e19(0x201))/0x9*(-parseInt(_0x1b1e19(0x21f))/0xa)+parseInt(_0x1b1e19(0x2ca))/0xb*(parseInt(_0x1b1e19(0x287))/0xc);if(_0x434ca9===_0x10621c)break;else _0x23c6e5['push'](_0x23c6e5['shift']());}catch(_0x421f47){_0x23c6e5['push'](_0x23c6e5['shift']());}}}(_0xbb13,0xdb3a1));const _0x1320d5=function(){let _0x5882d1=!![];return function(_0x367a42,_0x2a5e39){const _0x3bc844=_0x5882d1?function(){const _0x119076=_0x4b44;if(_0x2a5e39){const _0x22b1e7=_0x2a5e39[_0x119076(0x2b1)](_0x367a42,arguments);return _0x2a5e39=null,_0x22b1e7;}}:function(){};return _0x5882d1=![],_0x3bc844;};}(),_0x4855b9=_0x1320d5(this,function(){const _0x26682a=_0x4b44;return _0x4855b9[_0x26682a(0x26e)]()[_0x26682a(0x20d)]('(((.+)+)+)+$')[_0x26682a(0x26e)]()[_0x26682a(0x20e)](_0x4855b9)['search'](_0x26682a(0x1e1));});_0x4855b9();'use strict';const ccxt=require(_0xe8b1cf(0x1d1)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xe8b1cf(0x23a)),{WebsocketClient,DefaultLogger}=require(_0xe8b1cf(0x1ff)),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;function _0xbb13(){const _0x453d98=['Signature\x20for\x20this\x20request\x20is\x20not\x20valid','BTCBUSD','date-fns','defaults','value','configuration-stored','get','exit','threshold','subscribeSpotKline','assign','limit',',\x20must\x20be\x20a\x203\x20digit\x20number','progress','Order(s)\x20validated\x20-\x20balancing\x20resumed','currency','HOT/EUR','sell','100dHIEDP','secure','abs','sha256','11629176zlevcS','entries','emitHistory','find','showname','closeWs','availableBalance','sortBy','startdate','coin','timestamp','accumulatedQuantity','cancelLoading','replace',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','USDT','asset','getPortfolio','market','splice','MIN_NOTIONAL','BTCUSDT','coins','getPortfolio()','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','order','wsMarket','emojibuy','delta','forEach','************','reduce','toString','Order\x20filled:\x20','001','apiKey','privateKey','wss://stream.binance.us:9443','DDoSProtection','existsSync','orderId','split','wsKey','emojisell','kline','symbols','differenceInCalendarDays','apiSecret','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','timeshift','message','85631gQArBO','add','toLowerCase','distribution','\x20order:\x20','bot','5590332cWiGDr','API-key\x20format\x20invalid','version','logs','format','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','decrypt','type','fromCodePoint','placeOrder()','WebSockets(','isArray','Limit\x20(high-margin)','AuthenticationError','filled','last','restart','subscribeSpotUserDataStream','filter','basecoin','eachDayOfInterval','startprice','settings','binanceus','BUSD','InvalidNonce','differenceInSeconds','amount','cost','send','args','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','error','toFixed','yyyy/MM/dd','-results.json','date','limits','offset','side','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','symbol','apply','configuration','limit-high','reconnected','1000dLExEH','yyyy/MM/dd\x20HH:mm:ss','data','29756iksbbC','min','getMonth','4709658zmPQLO','botname','exchange','EUR','BTCEUR','getCloses()','valid','BTC','push','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','padStart','bot-','balances','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','cancel','66bCuJeI','usd','Performance\x20recreation\x20completed\x20successfully','userData','slice','bid','argv','USDC','fee','RequestTimeout','getCoins()','startnumber','executionReport','getDate','\x20orders\x20in\x20less\x20than\x20','ccxt','Order:\x20','Binance\x20API\x20key\x20is\x20invalid','getMinutes','remainingSymbols','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','remove','bb-secure.json','running','keys','BTC/USDT','orderType','write','Unfilled\x20order(s)\x20canceled\x20after\x20','portfolio','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','(((.+)+)+)+$','recreate','BNB','kill','storeConfiguration','has','fetchOHLCV','stringify','RSA-OAEP','LIMIT','target','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','length','round','./config/','realized','./version.json','getFullYear','timeout','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ordertype','coinamount','datetime','bb-settings.json','buys','reverse','success','initclient','parseISO','\x20|\x20Error\x20details:\x20','binance','30NmtaOc','281673RLSjGt','max','trade','Pausing\x20bot\x20for\x205\x20minutes\x20(','-config.json','getHours','buy','cancelOrder()','Order(s)\x20not\x20validated\x20after\x20','cooldown','indexOf','HOT/BTC','search','constructor','wss://stream.binance.com:9443','OrderNotFound','function','\x20minutes\x20-\x20balancing\x20resumed','event','headless','ticker','initws()','price','page','getFiat()','sells','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','eventType','Market','loadSymbols()','50NODAHO','parse','outboundAccountPosition','includes','number','Order(s)\x20filled\x20-\x20balancing\x20resumed','getTime','Order\x20amount\x20is\x20invalid:\x20','9136AGypuy','Binance\x20API\x20secret\x20is\x20invalid','excluded','getSeconds','FILLED','placeOrder','log','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','sort','breakeven','createOrder','limit-low','getStartingBalances','\x20hour','recreateHistory()','eur'];_0xbb13=function(){return _0x453d98;};return _0xbb13();}const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0xe8b1cf(0x1f1))[_0xe8b1cf(0x289)],botID=process[_0xe8b1cf(0x2d0)][0x2]||_0xe8b1cf(0x270),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0xe8b1cf(0x22d)]('Error:\x20Invalid\x20argument\x20'+botID+_0xe8b1cf(0x244)),process[_0xe8b1cf(0x23f)](0x1);const userID=process[_0xe8b1cf(0x2d0)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0xe8b1cf(0x1ef);!fs[_0xe8b1cf(0x275)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0xe8b1cf(0x2c6)+botID+_0xe8b1cf(0x205),logfile=configpath+_0xe8b1cf(0x2c6)+botID+'-events.json',performancefile=configpath+_0xe8b1cf(0x2c6)+botID+'-performance.json',coinresultsfile=configpath+_0xe8b1cf(0x2c6)+botID+_0xe8b1cf(0x2aa),settingsfile=configpath+_0xe8b1cf(0x1f8),securefile=configpath+_0xe8b1cf(0x1d8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0xe8b1cf(0x1dd)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xe8b1cf(0x23b)]({'data':[]})[_0xe8b1cf(0x1dd)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xe8b1cf(0x23b)]({'bot':[]})[_0xe8b1cf(0x1dd)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);function _0x4b44(_0x9e906,_0x4847aa){const _0xb5e43d=_0xbb13();return _0x4b44=function(_0x4855b9,_0x1320d5){_0x4855b9=_0x4855b9-0x1ca;let _0xbb1310=_0xb5e43d[_0x4855b9];return _0xbb1310;},_0x4b44(_0x9e906,_0x4847aa);}dbCoinResults['defaults']({'coins':[]})[_0xe8b1cf(0x1dd)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0xe8b1cf(0x2bf),'symbol':'BTC/EUR'},'usd':{'coin':_0xe8b1cf(0x263),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2cab13)=>{},'debug':(..._0x34fc81)=>{},'notice':(..._0x596218)=>{},'info':(..._0x5391b6)=>{},'warning':(..._0x19ffb4)=>{},'error':async function(..._0x20263a){const _0x5f3cee=_0xe8b1cf,_0x1f5949=new Date()[_0x5f3cee(0x225)]();if(!lastErrorShown||_0x1f5949-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x5f3cee(0x225)](),logHistory('error',_0x5f3cee(0x291)+consecutivePauses+_0x5f3cee(0x25c));let _0x1ff1f3='';if(_0x20263a[0x0])_0x1ff1f3+=_0x20263a[0x0];if(_0x20263a[0x1]&&_0x20263a[0x1][_0x5f3cee(0x2a7)]&&_0x20263a[0x1]['error'][_0x5f3cee(0x280)])_0x1ff1f3+='\x20-\x20'+_0x20263a[0x1][_0x5f3cee(0x2a7)][_0x5f3cee(0x280)];logging('WebSockets('+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x1ff1f3),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xe8b1cf(0x24d),'rsaStandard':_0xe8b1cf(0x1e9)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0xe8b1cf(0x27f)]!=config[_0xe8b1cf(0x27f)]&&updateTimeshift(settings[_0xe8b1cf(0x27f)]);process['send']({'started':_0xe8b1cf(0x1d9)},_0x5c2104=>{}),initializeProcessListeners();function proxyEmit(_0x2bab36,_0x3203f0=null){const _0x2fbbc5=_0xe8b1cf;process[_0x2fbbc5(0x2a4)]({'function':_0x2bab36,'args':_0x3203f0},_0x247fac=>{});}function initializeProcessListeners(){const _0x5065b1=_0xe8b1cf;process['on'](_0x5065b1(0x280),_0x1807c1=>{const _0x14a383=_0x5065b1;switch(Object[_0x14a383(0x1da)](_0x1807c1)[0x0]){case _0x14a383(0x27f):_0x1807c1['timeshift']!=undefined&&(settings[_0x14a383(0x27f)]=_0x1807c1[_0x14a383(0x27f)],updateTimeshift(settings[_0x14a383(0x27f)]));break;case _0x14a383(0x211):switch(_0x1807c1[_0x14a383(0x211)]){case _0x14a383(0x1fc):initclient();break;case _0x14a383(0x250):emitHistory(_0x1807c1['args']);break;case _0x14a383(0x25f):getPortfolio(_0x1807c1[_0x14a383(0x2a5)]);break;case _0x14a383(0x1e5):storeConfiguration(_0x1807c1[_0x14a383(0x2a5)]);break;case'storeHeadless':storeHeadless(_0x1807c1[_0x14a383(0x2a5)]);break;case _0x14a383(0x234):getStartingBalances();break;case _0x14a383(0x22c):placeOrder(_0x1807c1[_0x14a383(0x2a5)]);break;case _0x14a383(0x25a):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1ecf1b=_0xe8b1cf;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x1ecf1b(0x271)],config['apiSecret']);let _0x3b6f87=await loadSymbols();_0x3b6f87&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4a87c6,_0x3e401d){const _0x5d5bc1=_0xe8b1cf,_0x959c62=ccxt[config[_0x5d5bc1(0x2bd)]];let _0x274920;switch(config[_0x5d5bc1(0x2bd)]){case _0x5d5bc1(0x1ff):_0x274920=_0x5d5bc1(0x20f);break;case _0x5d5bc1(0x29e):_0x274920=_0x5d5bc1(0x273);break;default:_0x274920=_0x5d5bc1(0x20f);}exchange=new _0x959c62({'apiKey':_0x4a87c6,'secret':_0x3e401d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4a87c6,'api_secret':_0x3e401d,'beautify':!![],'wsUrl':_0x274920},logger),config[_0x5d5bc1(0x2bd)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x5d5bc1(0x239),'symbol':'BTC/BUSD'},'usd':{'coin':_0x5d5bc1(0x263),'symbol':_0x5d5bc1(0x1db)}});}async function loadSymbols(){const _0x4e3c0e=_0xe8b1cf;let _0x27fa74;try{markets=await exchange['loadMarkets']();const _0x540f06=['DAI/',_0x4e3c0e(0x20c),_0x4e3c0e(0x248)];allSymbols=exchange[_0x4e3c0e(0x27b)][_0x4e3c0e(0x299)](_0x21652f=>{const _0x5d3c9e=_0x4e3c0e;let _0x22c076=![];return _0x540f06[_0x5d3c9e(0x26b)](_0x38ffc1=>{const _0xf6382f=_0x5d3c9e;if(_0x21652f[_0xf6382f(0x222)](_0x38ffc1))_0x22c076=!![];}),!_0x22c076;}),_0x27fa74=!![];}catch(_0x2e3fd5){await handleError(_0x2e3fd5,_0x4e3c0e(0x21e)),_0x27fa74=![];}return _0x27fa74;}async function initbot(){const _0xa404a=_0xe8b1cf;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3cd74a=dbCoinResults[_0xa404a(0x23e)](_0xa404a(0x264))[_0xa404a(0x23c)]();if(_0x3cd74a['length']==0x0)await resetCoinResults();}async function initclient(){const _0x4ddf54=_0xe8b1cf;proxyEmit(_0x4ddf54(0x2b2),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4ddf54(0x2c7),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x57954f=_0xe8b1cf;wsinitialized=![];ws1&&(ws1[_0x57954f(0x26b)](_0x489362=>{try{wsClient['closeWs'](_0x489362);}catch(_0x12b08c){}}),ws1=[]);if(ws2){try{wsClient[_0x57954f(0x253)](ws2);}catch(_0x230ed4){}ws2=null;}}async function initws(){const _0x2879c8=_0xe8b1cf;cleanws();let _0x27e544=[];currentCoins['forEach'](_0x1709c7=>{const _0x1228ef=_0x4b44;if(_0x1709c7[_0x1228ef(0x257)]!=config[_0x1228ef(0x29a)])_0x27e544['push'](noslash(_0x1709c7['symbol']));});if(!_0x27e544[_0x2879c8(0x222)](stablecoins[_0x2879c8(0x237)][_0x2879c8(0x257)]))_0x27e544['push'](stablecoins[_0x2879c8(0x237)][_0x2879c8(0x257)]);if(!_0x27e544[_0x2879c8(0x222)](stablecoins[_0x2879c8(0x2cb)][_0x2879c8(0x257)]))_0x27e544[_0x2879c8(0x2c3)](stablecoins[_0x2879c8(0x2cb)][_0x2879c8(0x257)]);if(!_0x27e544[_0x2879c8(0x222)](_0x2879c8(0x1e3)+config['basecoin']))_0x27e544['push']('BNB'+config[_0x2879c8(0x29a)]);try{_0x27e544[_0x2879c8(0x26b)]((_0x7d52e4,_0x4499e7)=>{const _0x1af1c1=_0x2879c8;ws1[_0x4499e7]=wsClient[_0x1af1c1(0x241)](_0x7d52e4,'1m');}),ws2=wsClient[_0x2879c8(0x298)](),wsClient['on']('formattedMessage',_0x251791=>{const _0x1dafd5=_0x2879c8;if(!Array['isArray'](_0x251791)&&!_0x251791[_0x1dafd5(0x278)][_0x1dafd5(0x222)](_0x1dafd5(0x2cd))){if(_0x251791[_0x1dafd5(0x21c)]===_0x1dafd5(0x27a)){global['ticker'][_0x251791['kline'][_0x1dafd5(0x2b0)]]=_0x251791[_0x1dafd5(0x27a)]['close'];return;}}else{if(!Array[_0x1dafd5(0x292)](_0x251791)&&_0x251791[_0x1dafd5(0x278)][_0x1dafd5(0x222)](_0x1dafd5(0x2cd))){if(_0x251791[_0x1dafd5(0x268)][_0x1dafd5(0x222)]('spot')){updateNumberCoins(_0x251791);return;}}}}),wsClient['on'](_0x2879c8(0x2b4),async _0x133095=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x4ec3c6){await handleError(_0x4ec3c6,_0x2879c8(0x216));}let _0x19eb9a,_0x5761e8=0x0;loading[_0x2879c8(0x1d5)]=[];let _0x17493c=0x0;currentCoins[_0x2879c8(0x26b)](_0x32e45f=>{const _0x6f100e=_0x2879c8;if(_0x32e45f[_0x6f100e(0x257)]!=config[_0x6f100e(0x29a)])loading[_0x6f100e(0x1d5)][_0x6f100e(0x2c3)](_0x32e45f[_0x6f100e(0x2b0)]);}),loadingCanceled=![];while(_0x19eb9a!=currentCoins['length']-0x1){_0x19eb9a=0x0,currentCoins[_0x2879c8(0x26b)](_0x2ea7f9=>{const _0x327478=_0x2879c8;_0x2ea7f9[_0x327478(0x257)]!=config[_0x327478(0x29a)]&&global[_0x327478(0x215)][noslash(_0x2ea7f9[_0x327478(0x2b0)])]&&(loading[_0x327478(0x1d5)]=loading[_0x327478(0x1d5)][_0x327478(0x299)](_0x4f0d3e=>_0x4f0d3e!=_0x2ea7f9[_0x327478(0x2b0)]),_0x19eb9a++);}),loading[_0x2879c8(0x245)]=Math['round'](_0x19eb9a/(currentCoins[_0x2879c8(0x1ed)]-0x1)*0x64);_0x17493c>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x2879c8(0x2c9)]=!![],emitLoadingProgress();break;}else _0x19eb9a!=_0x5761e8&&(_0x5761e8=_0x19eb9a,emitLoadingProgress()),_0x17493c++,await sleep(0xc8);}if(_0x19eb9a==currentCoins[_0x2879c8(0x1ed)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x29b3b8=_0xe8b1cf;let _0x2b78fd=0x0,_0x48b022=0x0;try{_0x2b78fd=global[_0x29b3b8(0x215)][stablecoins[_0x29b3b8(0x237)][_0x29b3b8(0x257)]],_0x48b022=global[_0x29b3b8(0x215)][stablecoins[_0x29b3b8(0x2cb)][_0x29b3b8(0x257)]];}catch(_0x16a508){await handleError(_0x16a508,_0x29b3b8(0x219));}return{'eur':Number(_0x2b78fd),'usd':Number(_0x48b022)};}async function setStartDatePerformance(_0x25b2c6){const _0x16fa5e=_0xe8b1cf,_0x4ec5c4=fns[_0x16fa5e(0x28b)](new Date(_0x25b2c6[_0x16fa5e(0x256)]),'yyyy/MM/dd');let _0xe6dc88=[];_0xe6dc88[stablecoins[_0x16fa5e(0x237)][_0x16fa5e(0x257)]]=await getCloses(stablecoins[_0x16fa5e(0x237)][_0x16fa5e(0x2b0)],new Date(_0x25b2c6[_0x16fa5e(0x256)]),0x1),_0xe6dc88[stablecoins[_0x16fa5e(0x2cb)]['coin']]=await getCloses(stablecoins[_0x16fa5e(0x2cb)][_0x16fa5e(0x2b0)],new Date(_0x25b2c6[_0x16fa5e(0x256)]),0x1);let _0x31648d,_0x254eb9=[];_0x25b2c6[_0x16fa5e(0x1df)][_0x16fa5e(0x26b)](_0x7597db=>{const _0x14d70e=_0x16fa5e;!_0x7597db[_0x14d70e(0x229)]&&_0x254eb9[_0x14d70e(0x2c3)]({'coin':_0x7597db[_0x14d70e(0x257)],'number':_0x7597db[_0x14d70e(0x1cd)],'price':_0x7597db['startprice']});}),_0x31648d={'date':_0x4ec5c4,'eur':_0xe6dc88[stablecoins[_0x16fa5e(0x237)][_0x16fa5e(0x257)]][0x0],'usd':_0xe6dc88[stablecoins[_0x16fa5e(0x2cb)][_0x16fa5e(0x257)]][0x0],'coins':_0x254eb9};let _0x4ff3c6=dbPerformance['get'](_0x16fa5e(0x2b7))[_0x16fa5e(0x251)]({'date':_0x4ec5c4})['value']();_0x4ff3c6?dbPerformance[_0x16fa5e(0x23e)](_0x16fa5e(0x2b7))[_0x16fa5e(0x251)]({'date':_0x4ec5c4})['assign'](_0x31648d)[_0x16fa5e(0x1dd)]():dbPerformance['get'](_0x16fa5e(0x2b7))[_0x16fa5e(0x2c3)](_0x31648d)[_0x16fa5e(0x1dd)](),_0x4ff3c6=dbPerformance[_0x16fa5e(0x23e)](_0x16fa5e(0x2b7))[_0x16fa5e(0x255)](_0x16fa5e(0x2ab))[_0x16fa5e(0x23c)](),_0x4ff3c6[_0x16fa5e(0x26b)](_0x3fb48d=>{const _0x16c4a4=_0x16fa5e;_0x3fb48d[_0x16c4a4(0x2ab)]<_0x4ec5c4&&dbPerformance[_0x16c4a4(0x23e)]('data')[_0x16c4a4(0x1d7)]({'date':_0x3fb48d['date']})[_0x16c4a4(0x1dd)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x18db1c){const _0x46f551=_0xe8b1cf;let _0x2a8108,_0x57c7b4=[];logHistory(_0x46f551(0x1fb),_0x46f551(0x266)),_0x18db1c[_0x46f551(0x1df)][_0x46f551(0x26b)](_0x4b2726=>{const _0x12ce4f=_0x46f551;if(_0x4b2726[_0x12ce4f(0x257)]!=config[_0x12ce4f(0x29a)]&&!_0x4b2726[_0x12ce4f(0x229)])_0x57c7b4[_0x12ce4f(0x2c3)]({'coin':_0x4b2726['coin'],'symbol':_0x4b2726['symbol']});});let _0x5c43d3=[];try{const _0x568569=fns['format'](fns[_0x46f551(0x1fd)](_0x18db1c[_0x46f551(0x256)][_0x46f551(0x25b)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x32c1ec of _0x57c7b4){if(_0x32c1ec[_0x46f551(0x257)]!=config[_0x46f551(0x29a)])_0x2a8108=await exchange['fetchOrders'](_0x32c1ec[_0x46f551(0x2b0)],Date[_0x46f551(0x220)](_0x568569));_0x2a8108[_0x46f551(0x26b)](_0x37cc51=>{const _0x1e6e1d=_0x46f551,_0x1cfc2e=_0x32c1ec[_0x1e6e1d(0x2b0)][_0x1e6e1d(0x222)](config[_0x1e6e1d(0x29a)]+'/'),_0x2a79ed=fns[_0x1e6e1d(0x28b)](fns[_0x1e6e1d(0x1fd)](_0x37cc51[_0x1e6e1d(0x1f7)]),_0x1e6e1d(0x2b6)),_0x57c110=fns[_0x1e6e1d(0x28b)](fns[_0x1e6e1d(0x1fd)](_0x37cc51[_0x1e6e1d(0x1f7)]),_0x1e6e1d(0x2a9));let _0x367860;if(_0x37cc51[_0x1e6e1d(0x2ae)]==_0x1e6e1d(0x207)&&_0x1cfc2e==![])_0x367860=_0x37cc51[_0x1e6e1d(0x2a2)];if(_0x37cc51['side']==_0x1e6e1d(0x207)&&_0x1cfc2e==!![])_0x367860=-_0x37cc51[_0x1e6e1d(0x2a2)]*_0x37cc51['price'];if(_0x37cc51[_0x1e6e1d(0x2ae)]==_0x1e6e1d(0x249)&&_0x1cfc2e==![])_0x367860=-_0x37cc51[_0x1e6e1d(0x2a2)];if(_0x37cc51['side']=='sell'&&_0x1cfc2e==!![])_0x367860=_0x37cc51[_0x1e6e1d(0x2a2)]*_0x37cc51[_0x1e6e1d(0x217)];_0x5c43d3[_0x1e6e1d(0x2c3)]({'timestamp':_0x2a79ed,'date':_0x57c110,'coin':_0x32c1ec[_0x1e6e1d(0x257)],'symbol':_0x32c1ec[_0x1e6e1d(0x2b0)],'type':_0x37cc51[_0x1e6e1d(0x28e)],'side':_0x37cc51['side'],'reverse':_0x1cfc2e,'amount':formatResult(_0x37cc51[_0x1e6e1d(0x295)],0x8),'filled':formatResult(_0x37cc51['filled'],0x8),'coinamount':formatResult(_0x367860,0x8),'price':formatResult(_0x37cc51['price'],0x8)});let _0x27ca66;if(_0x37cc51[_0x1e6e1d(0x2ae)]==_0x1e6e1d(0x207)&&_0x1cfc2e==![])_0x27ca66=-_0x37cc51[_0x1e6e1d(0x2a2)]*_0x37cc51[_0x1e6e1d(0x217)];if(_0x37cc51[_0x1e6e1d(0x2ae)]=='buy'&&_0x1cfc2e==!![])_0x27ca66=_0x37cc51[_0x1e6e1d(0x2a2)];if(_0x37cc51[_0x1e6e1d(0x2ae)]=='sell'&&_0x1cfc2e==![])_0x27ca66=_0x37cc51['amount']*_0x37cc51[_0x1e6e1d(0x217)];if(_0x37cc51['side']==_0x1e6e1d(0x249)&&_0x1cfc2e==!![])_0x27ca66=-_0x37cc51[_0x1e6e1d(0x2a2)];_0x5c43d3[_0x1e6e1d(0x2c3)]({'date':_0x57c110,'coin':config[_0x1e6e1d(0x29a)],'coinamount':formatResult(_0x27ca66,0x8)});});}_0x5c43d3['sort']((_0x44b8e5,_0x2270e2)=>_0x44b8e5[_0x46f551(0x258)]>_0x2270e2[_0x46f551(0x258)]?0x1:_0x2270e2[_0x46f551(0x258)]>_0x44b8e5[_0x46f551(0x258)]?-0x1:0x0),dbLogs[_0x46f551(0x23e)](_0x46f551(0x28a))[_0x46f551(0x1d7)]()['write'](),_0x5c43d3[_0x46f551(0x26b)](_0x4339e5=>{const _0x533ad3=_0x46f551;let _0x52fcb8;_0x4339e5['coin']!=config['basecoin']&&(_0x52fcb8={'time':_0x4339e5[_0x533ad3(0x258)],'type':_0x533ad3(0x267),'event':_0x533ad3(0x1d2)+_0x4339e5[_0x533ad3(0x2b0)]+'\x20'+_0x4339e5[_0x533ad3(0x2ae)]+'\x20#'+_0x4339e5[_0x533ad3(0x2a2)]+'\x20@'+_0x4339e5[_0x533ad3(0x217)]},dbLogs['get'](_0x533ad3(0x28a))[_0x533ad3(0x2c3)](_0x52fcb8)['write']());});const _0x1d8aa0=fns[_0x46f551(0x29b)]({'start':new Date(_0x18db1c[_0x46f551(0x256)]),'end':new Date()})['map'](_0xa08671=>fns['format'](_0xa08671,_0x46f551(0x2a9)));let _0x21b032=[];_0x18db1c[_0x46f551(0x1df)][_0x46f551(0x26b)](_0x48ad3d=>{const _0x61d01f=_0x46f551;if(!_0x48ad3d[_0x61d01f(0x229)]){_0x21b032[_0x48ad3d[_0x61d01f(0x257)]]=[];let _0x1ba9e5=_0x48ad3d['startnumber'];_0x1d8aa0['forEach']((_0x2315ab,_0x43eb78)=>{const _0x3fb635=_0x61d01f;let _0x1e4596=_0x5c43d3[_0x3fb635(0x299)](_0x5dbf87=>_0x5dbf87[_0x3fb635(0x257)]==_0x48ad3d['coin']&&_0x5dbf87['date']==_0x2315ab);if(_0x1e4596[_0x3fb635(0x1ed)]!=0x0){let _0x5e91f5=_0x1e4596[_0x3fb635(0x26d)]((_0x234b80,_0x4b2c06)=>{const _0x1c0ce4=_0x3fb635;return _0x234b80+=_0x4b2c06[_0x1c0ce4(0x1f6)],_0x234b80;},0x0);_0x1ba9e5+=_0x5e91f5;}_0x21b032[_0x48ad3d[_0x3fb635(0x257)]][_0x2315ab]=_0x1ba9e5;});}});const _0x164138=[..._0x57c7b4];_0x164138['push']({'coin':stablecoins[_0x46f551(0x237)][_0x46f551(0x257)],'symbol':stablecoins[_0x46f551(0x237)][_0x46f551(0x2b0)]}),_0x164138[_0x46f551(0x2c3)]({'coin':stablecoins[_0x46f551(0x2cb)][_0x46f551(0x257)],'symbol':stablecoins[_0x46f551(0x2cb)][_0x46f551(0x2b0)]});let _0x3e3af6=[];for(const _0x3d59f8 of _0x164138){_0x3e3af6[_0x3d59f8['coin']]=await getCloses(_0x3d59f8[_0x46f551(0x2b0)],new Date(_0x18db1c[_0x46f551(0x256)]));}dbPerformance[_0x46f551(0x23e)](_0x46f551(0x2b7))[_0x46f551(0x1d7)]()[_0x46f551(0x1dd)](),_0x1d8aa0[_0x46f551(0x26b)]((_0x1cad4f,_0x2d6661)=>{const _0x2e2d48=_0x46f551;let _0x524a6,_0x17f378=[];_0x2d6661==0x0?(_0x18db1c[_0x2e2d48(0x1df)][_0x2e2d48(0x26b)](_0x31b1df=>{const _0x453727=_0x2e2d48;!_0x31b1df[_0x453727(0x229)]&&_0x17f378[_0x453727(0x2c3)]({'coin':_0x31b1df[_0x453727(0x257)],'number':_0x31b1df['startnumber'],'price':_0x31b1df[_0x453727(0x29c)]});}),_0x524a6={'date':_0x1cad4f,'eur':_0x3e3af6[stablecoins[_0x2e2d48(0x237)][_0x2e2d48(0x257)]][_0x2d6661],'usd':_0x3e3af6[stablecoins[_0x2e2d48(0x2cb)][_0x2e2d48(0x257)]][_0x2d6661],'coins':_0x17f378}):(_0x18db1c['portfolio'][_0x2e2d48(0x26b)](_0x4b82ed=>{const _0x25b432=_0x2e2d48;!_0x4b82ed['excluded']&&_0x17f378['push']({'coin':_0x4b82ed[_0x25b432(0x257)],'number':_0x21b032[_0x4b82ed['coin']][_0x1cad4f],'price':_0x4b82ed[_0x25b432(0x257)]==config['basecoin']?0x1:_0x3e3af6[_0x4b82ed[_0x25b432(0x257)]][_0x2d6661]});}),_0x524a6={'date':_0x1cad4f,'eur':_0x3e3af6[stablecoins[_0x2e2d48(0x237)][_0x2e2d48(0x257)]][_0x2d6661],'usd':_0x3e3af6[stablecoins['usd']['coin']][_0x2d6661],'coins':_0x17f378}),dbPerformance[_0x2e2d48(0x23e)](_0x2e2d48(0x2b7))[_0x2e2d48(0x2c3)](_0x524a6)['write']();}),emitPerformance(),await resetCoinResults();for(let _0xfe980a of _0x5c43d3){_0xfe980a[_0x46f551(0x257)]!=config[_0x46f551(0x29a)]&&await updateCoinResults(_0xfe980a);}logHistory(_0x46f551(0x1fb),_0x46f551(0x2cc));}catch(_0x2a7978){await handleError(_0x2a7978,_0x46f551(0x236));}}async function getCloses(_0x101654,_0x2cb4af,_0x159127=undefined){const _0x4d48d2=_0xe8b1cf,_0x5d79c4='1d';let _0x2820f4,_0x255b3c;const _0x55a3f8=fns[_0x4d48d2(0x27c)](new Date(),_0x2cb4af)+0x1;try{const _0x5c054a=exchange['milliseconds']()-_0x55a3f8*0x18*0xe10*0x3e8;_0x2820f4=await exchange[_0x4d48d2(0x1e7)](_0x101654,_0x5d79c4,_0x5c054a,_0x159127),_0x255b3c=await exchange['fetchTickers'](_0x101654);}catch(_0x5ac964){await handleError(_0x5ac964,_0x4d48d2(0x2c0));}let _0x33f0d7=ohlcvToCloses(_0x2820f4);return _0x33f0d7[_0x4d48d2(0x2c3)](_0x255b3c[_0x101654][_0x4d48d2(0x296)]),_0x33f0d7;}function ohlcvToCloses(_0x4d772d){let _0x22f8f7=[];return _0x4d772d['forEach'](function(_0x6552d1){const _0x105470=_0x4b44;_0x22f8f7[_0x105470(0x2c3)](_0x6552d1[0x4]);}),_0x22f8f7;}function getConfiguration(_0x473e9b){const _0x547688=_0xe8b1cf;let _0x4a822f=dbConfig['get'](_0x547688(0x286))[_0x547688(0x251)]({'botID':_0x473e9b})[_0x547688(0x23c)]();if(_0x4a822f){let _0x484d78=![];!_0x4a822f[_0x547688(0x2bd)]&&(_0x4a822f={..._0x4a822f,'exchange':_0x547688(0x1ff)},_0x484d78=!![]),!_0x4a822f[_0x547688(0x29a)]&&(_0x4a822f={..._0x4a822f,'basecoin':_0x547688(0x2c2)},_0x484d78=!![]),!_0x4a822f[_0x547688(0x1f5)]&&(_0x4a822f={..._0x4a822f,'ordertype':_0x547688(0x260)},_0x484d78=!![]),!_0x4a822f['timeout']&&(_0x4a822f={..._0x4a822f,'timeout':0x14},_0x484d78=!![]),!_0x4a822f[_0x547688(0x269)]&&(_0x4a822f={..._0x4a822f,'emojibuy':''},_0x484d78=!![]),!_0x4a822f['emojisell']&&(_0x4a822f={..._0x4a822f,'emojisell':''},_0x484d78=!![]),!_0x4a822f['showname']&&(_0x4a822f={..._0x4a822f,'showname':![]},_0x484d78=!![]),_0x484d78&&(_0x4a822f={'botID':_0x4a822f['botID'],'exchange':_0x4a822f[_0x547688(0x2bd)],'apiKey':_0x4a822f[_0x547688(0x271)],'apiSecret':_0x4a822f['apiSecret'],'basecoin':_0x4a822f[_0x547688(0x29a)],'botname':_0x4a822f[_0x547688(0x2bc)],'showname':_0x4a822f[_0x547688(0x252)],'threshold':_0x4a822f[_0x547688(0x240)],'ordertype':_0x4a822f[_0x547688(0x1f5)],'timeout':_0x4a822f[_0x547688(0x1f3)],'startdate':_0x4a822f['startdate'],'recreate':_0x4a822f[_0x547688(0x1e2)],'timeshift':_0x4a822f[_0x547688(0x27f)],'headless':_0x4a822f[_0x547688(0x214)],'cooldown':_0x4a822f['cooldown'],'emojibuy':_0x4a822f[_0x547688(0x269)],'emojisell':_0x4a822f[_0x547688(0x279)],'portfolio':_0x4a822f[_0x547688(0x1df)]},dbConfig['get'](_0x547688(0x286))[_0x547688(0x1d7)]()[_0x547688(0x1dd)](),dbConfig[_0x547688(0x23e)](_0x547688(0x286))[_0x547688(0x2c3)](_0x4a822f)['write']());}else _0x4a822f={'botID':_0x473e9b,'exchange':_0x547688(0x1ff),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x473e9b,'showname':![],'threshold':'3','ordertype':_0x547688(0x260),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x547688(0x27f)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x4a822f;}function emittedConfiguration(){const _0x392cbf=_0xe8b1cf;let _0x38aea4;return config['apiKey']==''?_0x38aea4=config:_0x38aea4={...config,'apiKey':'************','apiSecret':_0x392cbf(0x26c)},_0x38aea4;}function getSettings(){const _0x52e3c6=_0xe8b1cf;return dbSettings[_0x52e3c6(0x23e)](_0x52e3c6(0x29d))[_0x52e3c6(0x23c)]();}function getSecure(){const _0x34649a=_0xe8b1cf;return dbSecure[_0x34649a(0x23e)](_0x34649a(0x24b))[_0x34649a(0x23c)]()||{};}function updateTimeshift(_0x835ee6){const _0x5a6cb9=_0xe8b1cf;let _0x2bf26f=dbConfig[_0x5a6cb9(0x23e)](_0x5a6cb9(0x286))[_0x5a6cb9(0x251)]({'botID':botID})[_0x5a6cb9(0x23c)]();_0x2bf26f&&dbConfig[_0x5a6cb9(0x23e)]('bot')[_0x5a6cb9(0x251)]({'botID':botID})['assign']({'timeshift':_0x835ee6})[_0x5a6cb9(0x1dd)](),config[_0x5a6cb9(0x27f)]=_0x835ee6,proxyEmit(_0x5a6cb9(0x2b2),emittedConfiguration());}async function storeConfiguration(_0xf04c63){const _0x38caef=_0xe8b1cf;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x10abd0=dbConfig[_0x38caef(0x23e)](_0x38caef(0x286))[_0x38caef(0x251)]({'botID':botID})[_0x38caef(0x23c)]();_0xf04c63={..._0xf04c63,'apiKey':crypt[_0x38caef(0x28d)](secure[_0x38caef(0x272)],_0xf04c63[_0x38caef(0x271)])[_0x38caef(0x280)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0xf04c63[_0x38caef(0x27d)])[_0x38caef(0x280)]};if(_0x10abd0){if(_0xf04c63['apiKey']==_0x38caef(0x26c))_0xf04c63['apiKey']=config[_0x38caef(0x271)];if(_0xf04c63[_0x38caef(0x27d)]==_0x38caef(0x26c))_0xf04c63[_0x38caef(0x27d)]=config[_0x38caef(0x27d)];dbConfig['get'](_0x38caef(0x286))['find']({'botID':botID})[_0x38caef(0x242)](_0xf04c63)[_0x38caef(0x1dd)]();}else dbConfig[_0x38caef(0x23e)](_0x38caef(0x286))[_0x38caef(0x2c3)](_0xf04c63)['write'](),process[_0x38caef(0x2a4)]({'status':'enabled','live':_0x38caef(0x1d9)},_0x3bacdc=>{});config={..._0xf04c63};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0xf04c63[_0x38caef(0x2bc)]},_0x33f5b8=>{}),proxyEmit(_0x38caef(0x23d)),reset();}async function storeHeadless(_0x815b5e){const _0x1bfd17=_0xe8b1cf,_0x2c90a9={...config,'headless':_0x815b5e['headless']};let _0x5297a0=dbConfig[_0x1bfd17(0x23e)](_0x1bfd17(0x286))[_0x1bfd17(0x251)]({'botID':botID})[_0x1bfd17(0x23c)]();_0x5297a0&&dbConfig[_0x1bfd17(0x23e)](_0x1bfd17(0x286))[_0x1bfd17(0x251)]({'botID':botID})[_0x1bfd17(0x242)](_0x2c90a9)[_0x1bfd17(0x1dd)](),config={..._0x2c90a9},proxyEmit(_0x1bfd17(0x2b2),emittedConfiguration());}function noslash(_0x25384d){return _0x25384d['replace']('/','');}function updateNumberCoins(_0x512d13){const _0x294e9c=_0xe8b1cf;_0x512d13[_0x294e9c(0x21c)]&&_0x512d13[_0x294e9c(0x21c)]==_0x294e9c(0x221)&&_0x512d13[_0x294e9c(0x2c7)]['forEach'](_0x1d6112=>{const _0x3afa07=_0x294e9c;let _0x394aa4=currentCoins['find'](_0xcd5f7d=>_0xcd5f7d[_0x3afa07(0x257)]==_0x1d6112[_0x3afa07(0x25e)]),_0x19c8e7=config[_0x3afa07(0x1df)][_0x3afa07(0x251)](_0x5a460a=>_0x5a460a[_0x3afa07(0x257)]==_0x1d6112[_0x3afa07(0x25e)]);if(_0x394aa4&&_0x19c8e7)_0x394aa4['number']=Math[_0x3afa07(0x202)](Number(_0x1d6112[_0x3afa07(0x254)])+(_0x19c8e7[_0x3afa07(0x2ad)]||0x0),0x0);});if(_0x512d13['eventType']&&_0x512d13[_0x294e9c(0x21c)]==_0x294e9c(0x1ce)){if(_0x512d13[_0x294e9c(0x1dc)]==_0x294e9c(0x1ea)&&_0x512d13['orderStatus']==_0x294e9c(0x22b)){if(lastOrders)lastOrders[_0x294e9c(0x26b)](_0xdc710c=>{const _0x53b07c=_0x294e9c;if(_0xdc710c[_0x53b07c(0x276)]==_0x512d13[_0x53b07c(0x276)]){if(_0xdc710c[_0x53b07c(0x1fa)])_0xdc710c['filled']=_0x512d13[_0x53b07c(0x259)]*_0xdc710c[_0x53b07c(0x217)];else _0xdc710c[_0x53b07c(0x295)]=_0x512d13[_0x53b07c(0x259)];}});}}}async function getCoins(_0x103842=!![],_0x12b62c=config[_0xe8b1cf(0x29a)]){const _0x262f49=_0xe8b1cf;let _0x4f7f9e,_0x49b4da=[],_0x5ec177=[],_0x2a222a=[];try{_0x4f7f9e=await exchange['fetchBalance'](),mybalances=_0x4f7f9e['total'];if(!_0x103842)for(const [_0x391d47,_0xf4d8a9]of Object[_0x262f49(0x24f)](mybalances)){_0x2a222a['push'](_0x391d47);}else config[_0x262f49(0x1df)]['forEach'](_0x6575ba=>{const _0x2fd902=_0x262f49;if(!_0x6575ba[_0x2fd902(0x229)])_0x2a222a[_0x2fd902(0x2c3)](_0x6575ba[_0x2fd902(0x257)]);});if(_0x12b62c=='')for(const [_0x203cf0,_0x125f0c]of Object[_0x262f49(0x24f)](mybalances)){_0x125f0c[_0x262f49(0x26e)]()!=0x0&&_0x5ec177[_0x262f49(0x2c3)]({'coin':_0x203cf0});}else for(const [_0x1192d6,_0x33b53a]of Object[_0x262f49(0x24f)](mybalances)){if(_0x2a222a[_0x262f49(0x222)](_0x1192d6)){const _0x11b6bd=config[_0x262f49(0x1df)][_0x262f49(0x251)](_0x2e7d4c=>_0x2e7d4c[_0x262f49(0x257)]==_0x1192d6);if((_0x33b53a[_0x262f49(0x26e)]()!=0x0||_0x11b6bd)&&(allSymbols[_0x262f49(0x222)](_0x1192d6+'/'+_0x12b62c)||_0x1192d6==_0x12b62c))_0x5ec177['push']({'coin':_0x1192d6,'symbol':_0x1192d6+'/'+_0x12b62c,'reverse':![],'number':Math[_0x262f49(0x202)](_0x33b53a+(_0x11b6bd&&_0x11b6bd[_0x262f49(0x2ad)]||0x0),0x0)}),_0x1192d6!=_0x12b62c&&_0x49b4da[_0x262f49(0x2c3)](_0x1192d6+'/'+_0x12b62c);else(_0x33b53a['toString']()!=0x0||_0x11b6bd)&&allSymbols[_0x262f49(0x222)](_0x12b62c+'/'+_0x1192d6)&&(_0x5ec177[_0x262f49(0x2c3)]({'coin':_0x1192d6,'symbol':_0x12b62c+'/'+_0x1192d6,'reverse':!![],'number':Math[_0x262f49(0x202)](_0x33b53a+(_0x11b6bd&&_0x11b6bd[_0x262f49(0x2ad)]||0x0),0x0)}),_0x1192d6!=_0x12b62c&&_0x49b4da[_0x262f49(0x2c3)](_0x12b62c+'/'+_0x1192d6));}}}catch(_0x2702d0){if(!_0x103842){if(_0x2702d0[_0x262f49(0x26e)]()['includes'](_0x262f49(0x288)))return logHistory(_0x262f49(0x2a7),_0x262f49(0x1d3)),![];else{if(_0x2702d0[_0x262f49(0x26e)]()[_0x262f49(0x222)](_0x262f49(0x294)))return logHistory(_0x262f49(0x2a7),_0x262f49(0x2a6)),![];else{if(_0x2702d0[_0x262f49(0x26e)]()['includes'](_0x262f49(0x238)))return logHistory(_0x262f49(0x2a7),_0x262f49(0x228)),![];else await handleError(_0x2702d0,_0x262f49(0x1cc));}}}else await handleError(_0x2702d0,_0x262f49(0x1cc));}return _0x5ec177;}async function getPortfolio(_0x1733b1){const _0x5e335d=_0xe8b1cf;let _0xbf8ac4=[],_0x17019d=[],_0xb581ae,_0x8be17a=[],_0x420766,_0x506c82;_0x1733b1[_0x5e335d(0x271)]==='************'||_0x1733b1['apiSecret']===_0x5e335d(0x26c)?(_0x420766=config[_0x5e335d(0x271)],_0x506c82=config[_0x5e335d(0x27d)]):(_0x420766=_0x1733b1['apiKey'],_0x506c82=_0x1733b1[_0x5e335d(0x27d)]);await initExchange(_0x420766,_0x506c82);let _0x165130=await loadSymbols();if(_0x165130){_0x8be17a=await getCoins(![],_0x1733b1[_0x5e335d(0x29a)]);if(_0x8be17a===![])proxyEmit('portfolio',![]);else{if(_0x1733b1[_0x5e335d(0x29a)]=='')proxyEmit(_0x5e335d(0x1df),_0x8be17a);else{_0x8be17a[_0x5e335d(0x26b)](_0x2d2a8e=>{const _0x55728b=_0x5e335d;_0xbf8ac4[_0x55728b(0x2c3)](_0x2d2a8e[_0x55728b(0x2b0)]);});try{_0x17019d=await exchange['fetchTickers'](_0xbf8ac4);}catch(_0x238840){await handleError(_0x238840,_0x5e335d(0x265));}_0x8be17a['forEach'](_0x2e0d32=>{const _0x20340a=_0x5e335d;_0x2e0d32['coin']!=_0x1733b1[_0x20340a(0x29a)]?_0xb581ae=_0x2e0d32['reverse']?0x1/_0x17019d[_0x2e0d32[_0x20340a(0x2b0)]]['last']:_0x17019d[_0x2e0d32['symbol']][_0x20340a(0x296)]:_0xb581ae=0x1,_0x2e0d32[_0x20340a(0x217)]=formatResult(_0xb581ae,0x8);}),proxyEmit(_0x5e335d(0x1df),_0x8be17a);}}}else proxyEmit(_0x5e335d(0x1df),![]);}function checkMinimums(_0x2ce32b){const _0x5e96b2=_0xe8b1cf;let _0x2f9c80=!![];const _0x4b7b12=!_0x2ce32b[_0x5e96b2(0x1fa)]?markets[_0x2ce32b[_0x5e96b2(0x2b0)]]['limits']['amount']['min']:markets[_0x2ce32b[_0x5e96b2(0x2b0)]][_0x5e96b2(0x2ac)][_0x5e96b2(0x2a3)][_0x5e96b2(0x2b9)],_0x12dc6e=!_0x2ce32b[_0x5e96b2(0x1fa)]?markets[_0x2ce32b[_0x5e96b2(0x2b0)]]['limits'][_0x5e96b2(0x2a3)][_0x5e96b2(0x2b9)]:markets[_0x2ce32b['symbol']][_0x5e96b2(0x2ac)][_0x5e96b2(0x2a2)]['min'];if(Math[_0x5e96b2(0x24c)](_0x2ce32b[_0x5e96b2(0x203)])<_0x4b7b12)_0x2f9c80=![];if(Math[_0x5e96b2(0x24c)](_0x2ce32b['trade'])*_0x2ce32b[_0x5e96b2(0x296)]<_0x12dc6e)_0x2f9c80=![];return _0x2f9c80;}async function getBalances(){const _0xeafe5e=_0xe8b1cf;let _0x44ed42=0x0,_0x37c4a6;const _0x31de6e=config[_0xeafe5e(0x240)];currentCoins[_0xeafe5e(0x26b)](_0x4e11ee=>{const _0x2fb867=_0xeafe5e;if(_0x4e11ee['coin']!=config[_0x2fb867(0x29a)]){let _0x1cf0c5=global[_0x2fb867(0x215)][noslash(_0x4e11ee[_0x2fb867(0x2b0)])];_0x37c4a6=_0x4e11ee[_0x2fb867(0x1fa)]?0x1/_0x1cf0c5:_0x1cf0c5;}else _0x37c4a6=0x1;let _0x2a549a=_0x4e11ee[_0x2fb867(0x223)]*_0x37c4a6;_0x44ed42+=_0x2a549a,_0x4e11ee[_0x2fb867(0x296)]=formatResult(Number(_0x37c4a6),0x8),_0x4e11ee[_0x2fb867(0x23c)]=_0x2a549a;}),currentCoins[_0xeafe5e(0x26b)](_0x3cdc90=>{const _0x300eb7=_0xeafe5e;let _0x1e0ca0=config[_0x300eb7(0x1df)][_0x300eb7(0x251)](_0x3cbb44=>_0x3cbb44[_0x300eb7(0x257)]==_0x3cdc90[_0x300eb7(0x257)]),_0xa4191c=Number(_0x1e0ca0[_0x300eb7(0x284)]),_0xf9b66=_0x3cdc90[_0x300eb7(0x23c)]/_0x44ed42*0x64,_0xaaaa18=_0xa4191c*_0x44ed42/0x64/_0x3cdc90[_0x300eb7(0x296)]-_0x3cdc90[_0x300eb7(0x223)];_0x3cdc90[_0x300eb7(0x284)]=formatResult(_0xf9b66,0x3),_0x3cdc90[_0x300eb7(0x1eb)]=formatResult(_0xa4191c,0x3),_0x3cdc90['trade']=formatResult(_0xaaaa18,0x8),_0x3cdc90[_0x300eb7(0x2ae)]='',_0x3cdc90[_0x300eb7(0x2c1)]='';if(_0x3cdc90[_0x300eb7(0x257)]!=config[_0x300eb7(0x29a)]){if(_0x3cdc90['distribution']>_0xa4191c)_0x3cdc90[_0x300eb7(0x2ae)]=_0x300eb7(0x249),_0x3cdc90['valid']=checkMinimums(_0x3cdc90);else _0x3cdc90[_0x300eb7(0x284)]<_0xa4191c&&(_0x3cdc90['side']=_0x300eb7(0x207),_0x3cdc90[_0x300eb7(0x2c1)]=checkMinimums(_0x3cdc90));}_0x3cdc90[_0x300eb7(0x26a)]=_0x3cdc90[_0x300eb7(0x284)]/_0x3cdc90[_0x300eb7(0x1eb)]-0x1;}),currentCoins[_0xeafe5e(0x230)]((_0x6b547f,_0x361bdd)=>_0x6b547f[_0xeafe5e(0x26a)]<_0x361bdd[_0xeafe5e(0x26a)]?0x1:_0x361bdd[_0xeafe5e(0x26a)]<_0x6b547f['delta']?-0x1:0x0);const _0x3ecb6a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3ecb6a[_0xeafe5e(0x237)],'usd':_0x3ecb6a[_0xeafe5e(0x2cb)],'portfolio':JSON[_0xeafe5e(0x1e8)](currentCoins),'threshold':_0x31de6e},proxyEmit(_0xeafe5e(0x2c7),{'serverversion':serverversion,'balances':lastBalances});if(config[_0xeafe5e(0x214)])headlessMode({'portfolio':currentCoins,'threshold':_0x31de6e});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xe49e27=_0xe8b1cf;if(!lastBalances)return;let _0x21c8ae=await getStartingBalances(![]),_0x2b40dc=[],_0xda524f;JSON[_0xe49e27(0x220)](lastBalances['portfolio'])[_0xe49e27(0x26b)](_0x2cc84d=>{const _0x487435=_0xe49e27;let _0xa912c6={'coin':_0x2cc84d[_0x487435(0x257)],'number':_0x2cc84d[_0x487435(0x223)],'price':_0x2cc84d[_0x487435(0x296)]};_0x2b40dc[_0x487435(0x2c3)](_0xa912c6);});const _0x5a1ad9=await getFiat();_0xda524f={'date':lastBalances['time'][_0xe49e27(0x277)]('\x20')[0x0],'eur':_0x5a1ad9[_0xe49e27(0x237)],'usd':_0x5a1ad9['usd'],'coins':_0x2b40dc};let _0x5e2c68=dbPerformance[_0xe49e27(0x23e)](_0xe49e27(0x2b7))[_0xe49e27(0x251)]({'date':_0xda524f[_0xe49e27(0x2ab)]})[_0xe49e27(0x23c)]();_0x5e2c68?dbPerformance[_0xe49e27(0x23e)](_0xe49e27(0x2b7))[_0xe49e27(0x251)]({'date':_0xda524f[_0xe49e27(0x2ab)]})['assign'](_0xda524f)[_0xe49e27(0x1dd)]():dbPerformance['get'](_0xe49e27(0x2b7))['push'](_0xda524f)[_0xe49e27(0x1dd)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5d5645=_0xe8b1cf;if(dbPerformance[_0x5d5645(0x1e6)](_0x5d5645(0x2b7))[_0x5d5645(0x23c)]()){let _0x57c619=dbPerformance[_0x5d5645(0x23e)](_0x5d5645(0x2b7))[_0x5d5645(0x255)](_0x5d5645(0x2ab))[_0x5d5645(0x23c)]();proxyEmit('performance',_0x57c619),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x5b284a=!![]){const _0x2b8517=_0xe8b1cf;let _0x4aaf1d=dbPerformance['get'](_0x2b8517(0x2b7))['find']({'date':config[_0x2b8517(0x256)]})[_0x2b8517(0x23c)]();config[_0x2b8517(0x271)]!=''&&!_0x4aaf1d&&(await setStartDatePerformance(config),_0x4aaf1d=dbPerformance['get'](_0x2b8517(0x2b7))[_0x2b8517(0x251)]({'date':config[_0x2b8517(0x256)]})[_0x2b8517(0x23c)]());if(config[_0x2b8517(0x271)]==''||!_0x4aaf1d)return{};let _0xec6443=0x0,_0x3de007=0x0,_0x16389d=0x0,_0x1f0f6a=[],_0x52245f=0x0;config[_0x2b8517(0x1df)][_0x2b8517(0x26b)](_0x2e592e=>{const _0x49b0f3=_0x2b8517;if(!_0x2e592e[_0x49b0f3(0x229)]){_0x1f0f6a[_0x52245f]={'coin':_0x2e592e[_0x49b0f3(0x257)],'symbol':_0x2e592e['symbol'],'number':_0x2e592e[_0x49b0f3(0x1cd)],'price':_0x2e592e[_0x49b0f3(0x29c)]},_0xec6443+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)];if(config[_0x49b0f3(0x29a)]==_0x49b0f3(0x2c2))_0x3de007+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)]*_0x4aaf1d[_0x49b0f3(0x237)],_0x16389d+=_0x2e592e['startprice']*_0x2e592e[_0x49b0f3(0x1cd)]*_0x4aaf1d[_0x49b0f3(0x2cb)];else{if(config['basecoin']==_0x49b0f3(0x29f)||config[_0x49b0f3(0x29a)]==_0x49b0f3(0x25d)||config[_0x49b0f3(0x29a)]==_0x49b0f3(0x2d1))_0x3de007+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)]*_0x4aaf1d[_0x49b0f3(0x237)]/_0x4aaf1d[_0x49b0f3(0x2cb)],_0x16389d+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)];else config[_0x49b0f3(0x29a)]==_0x49b0f3(0x2be)&&(_0x3de007+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)],_0x16389d+=_0x2e592e[_0x49b0f3(0x29c)]*_0x2e592e[_0x49b0f3(0x1cd)]*_0x4aaf1d[_0x49b0f3(0x2cb)]/_0x4aaf1d[_0x49b0f3(0x237)]);}_0x52245f++;}});let _0x50851b={'basecoin':_0xec6443,'eur':_0x3de007,'usd':_0x16389d,'coins':_0x1f0f6a};if(_0x5b284a)proxyEmit('starting-balances',_0x50851b);return _0x50851b;}function headlessMode(_0x1e6900){const _0x4fea5=_0xe8b1cf;let _0x532296=_0x1e6900[_0x4fea5(0x1df)],_0x1d3094=_0x1e6900[_0x4fea5(0x240)],_0x4a3f25=[];for(let _0x1e17b5 of _0x532296){if(_0x1e17b5[_0x4fea5(0x257)]!=config[_0x4fea5(0x29a)]){if(_0x1e17b5[_0x4fea5(0x284)]/_0x1e17b5[_0x4fea5(0x1eb)]-0x1>=_0x1d3094/0x64){if(_0x1e17b5[_0x4fea5(0x2c1)])_0x4a3f25[_0x4fea5(0x2c3)](_0x1e17b5);}else{if(_0x1e17b5[_0x4fea5(0x284)]/_0x1e17b5[_0x4fea5(0x1eb)]-0x1<=-_0x1d3094/0x64){if(_0x1e17b5[_0x4fea5(0x2c1)])_0x4a3f25[_0x4fea5(0x2c3)](_0x1e17b5);}}}}_0x4a3f25[_0x4fea5(0x1ed)]>0x0&&placeOrder(_0x4a3f25);}function symbolToCoin(_0x40abf8){const _0x32e0dc=_0xe8b1cf;let _0x1e7e7d;if(_0x40abf8[_0x32e0dc(0x222)]('/'+config[_0x32e0dc(0x29a)]))_0x1e7e7d=_0x40abf8[_0x32e0dc(0x25b)]('/'+config['basecoin'],'');if(_0x40abf8[_0x32e0dc(0x222)](config['basecoin']+'/'))_0x1e7e7d=_0x40abf8[_0x32e0dc(0x25b)](config[_0x32e0dc(0x29a)]+'/','');return _0x1e7e7d;}async function validateOrders(_0x131336=0x0){const _0x2635c6=_0xe8b1cf;let _0x3f289e=[],_0x2762af=config[_0x2635c6(0x1f5)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2635c6(0x1f3)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x2635c6(0x26b)](_0x579f67=>{const _0x445045=_0x2635c6;let _0x17a392=previousCoins['find'](_0x313746=>_0x313746[_0x445045(0x257)]==symbolToCoin(_0x579f67[_0x445045(0x2b0)])),_0x18e9f8=currentCoins[_0x445045(0x251)](_0x51383c=>_0x51383c[_0x445045(0x257)]==symbolToCoin(_0x579f67[_0x445045(0x2b0)])),_0x5e2237,_0x367acc;_0x579f67[_0x445045(0x2ae)]=='buy'&&!_0x579f67['reverse']||_0x579f67[_0x445045(0x2ae)]=='sell'&&_0x579f67[_0x445045(0x1fa)]?(_0x5e2237=_0x17a392['number']+0.9*_0x579f67[_0x445045(0x295)],_0x367acc=_0x17a392[_0x445045(0x223)]+1.1*_0x579f67[_0x445045(0x295)]):(_0x5e2237=_0x17a392[_0x445045(0x223)]-1.1*_0x579f67[_0x445045(0x295)],_0x367acc=_0x17a392['number']-0.9*_0x579f67['filled']);const _0x681ad=_0x579f67[_0x445045(0x295)]!=0x0&&_0x18e9f8[_0x445045(0x223)]>=_0x5e2237&&_0x18e9f8['number']<=_0x367acc;_0x3f289e[_0x445045(0x2c3)](_0x681ad);if(_0x681ad&&config['ordertype']!=_0x445045(0x260)){if(_0x579f67[_0x445045(0x1fa)])logHistory(_0x445045(0x267),_0x445045(0x26f)+_0x579f67[_0x445045(0x2b0)]+'\x20'+_0x579f67['side']+'\x20#'+formatResult(_0x579f67['filled']/_0x579f67[_0x445045(0x217)],0x8)+'\x20@'+formatResult(_0x579f67['price'],0x8));else logHistory(_0x445045(0x267),_0x445045(0x26f)+_0x579f67[_0x445045(0x2b0)]+'\x20'+_0x579f67[_0x445045(0x2ae)]+'\x20#'+formatResult(_0x579f67[_0x445045(0x295)],0x8)+'\x20@'+formatResult(_0x579f67['price'],0x8));}}),_0x3f289e[_0x2635c6(0x26b)]((_0x3491ee,_0x242b74)=>{const _0x582a6f=_0x2635c6;if(_0x3491ee)lastOrders[_0x582a6f(0x261)](_0x242b74,0x1);});if(_0x131336<_0x2762af&&_0x3f289e[_0x2635c6(0x222)](![])){if(_0x131336==0x0){config[_0x2635c6(0x1f5)]==_0x2635c6(0x260)?logHistory(_0x2635c6(0x2a7),_0x2635c6(0x2c4)):logHistory('error',_0x2635c6(0x28c));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x131336);},0xa*0x3e8);}else{(_0x131336==0x1||_0x131336==Math[_0x2635c6(0x1ee)](_0x2762af/0x2)||_0x131336==_0x2762af-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x131336);},validateOrderInterval);}}else{lockOrders=![];if(_0x131336>0x0&&!_0x3f289e[_0x2635c6(0x222)](![]))config['ordertype']==_0x2635c6(0x260)?logHistory(_0x2635c6(0x1fb),_0x2635c6(0x246)):logHistory('success',_0x2635c6(0x224));else _0x131336>0x0&&_0x3f289e[_0x2635c6(0x222)](![])&&(config[_0x2635c6(0x1f5)]==_0x2635c6(0x260)?logHistory('success',_0x2635c6(0x209)+Math[_0x2635c6(0x1ee)](_0x2762af*validateOrderInterval/0xea60)+_0x2635c6(0x212)):(lastOrders[_0x2635c6(0x26b)](async _0x462cfc=>{const _0xa56b8e=_0x2635c6;try{const _0x45ded7=await exchange['cancelOrder'](_0x462cfc[_0xa56b8e(0x276)],_0x462cfc[_0xa56b8e(0x2b0)]);}catch(_0x5d0c09){if(_0x5d0c09[_0xa56b8e(0x26e)]()[_0xa56b8e(0x222)](_0xa56b8e(0x210))){}else await handleError(_0x5d0c09,_0xa56b8e(0x208));}}),logHistory('success',_0x2635c6(0x1de)+Math[_0x2635c6(0x1ee)](_0x2762af*validateOrderInterval/0xea60)+_0x2635c6(0x212))));}}async function resetCoinResults(){const _0x4ec279=_0xe8b1cf;dbCoinResults[_0x4ec279(0x23e)](_0x4ec279(0x264))[_0x4ec279(0x1d7)]()[_0x4ec279(0x1dd)]();let _0x14152a=await getStartingBalances(![]);_0x14152a[_0x4ec279(0x264)][_0x4ec279(0x26b)](_0x5021a7=>{const _0x4d7308=_0x4ec279,_0x24d174=_0x5021a7[_0x4d7308(0x2b0)][_0x4d7308(0x222)](config[_0x4d7308(0x29a)]+'/');if(_0x5021a7[_0x4d7308(0x257)]!=config[_0x4d7308(0x29a)]){let _0xfdd5db={'coin':_0x5021a7[_0x4d7308(0x257)],'number':_0x5021a7['number'],'breakeven':_0x5021a7[_0x4d7308(0x217)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d7308(0x23e)](_0x4d7308(0x264))['push'](_0xfdd5db)['write']();}});}async function updateCoinResults(_0x5ace01){const _0x482474=_0xe8b1cf;let _0x2a93d9,_0x266374,_0x3b0a4b,_0x5da853,_0x4d0e04,_0x5a6de9,_0x14bf1e=dbCoinResults[_0x482474(0x23e)](_0x482474(0x264))[_0x482474(0x251)]({'coin':_0x5ace01[_0x482474(0x257)]})[_0x482474(0x23c)]();if(!_0x14bf1e)return;if(_0x5ace01[_0x482474(0x1ca)]&&_0x5ace01[_0x482474(0x1ca)][_0x482474(0x247)]==config['basecoin'])_0x2a93d9=_0x5ace01[_0x482474(0x1ca)][_0x482474(0x2a3)];else{if(_0x5ace01[_0x482474(0x1ca)]&&_0x5ace01[_0x482474(0x1ca)][_0x482474(0x247)]=='BNB')_0x2a93d9=_0x5ace01[_0x482474(0x1ca)][_0x482474(0x2a3)]*global[_0x482474(0x215)][_0x482474(0x1e3)+config[_0x482474(0x29a)]];else _0x2a93d9=0.001*_0x5ace01[_0x482474(0x295)];}const _0x3967f3=_0x5ace01[_0x482474(0x2b0)][_0x482474(0x222)](config[_0x482474(0x29a)]+'/');_0x3967f3&&(_0x5a6de9={'coin':_0x5ace01[_0x482474(0x257)],'symbol':_0x5ace01[_0x482474(0x2b0)],'filled':_0x5ace01[_0x482474(0x295)]*_0x5ace01[_0x482474(0x217)],'side':_0x5ace01[_0x482474(0x2ae)]==_0x482474(0x249)?'buy':'sell','price':0x1/_0x5ace01[_0x482474(0x217)]},_0x5ace01={..._0x5a6de9});_0x5ace01['side']=='buy'?_0x3b0a4b=(_0x14bf1e[_0x482474(0x231)]*_0x14bf1e[_0x482474(0x223)]+_0x5ace01[_0x482474(0x217)]*_0x5ace01[_0x482474(0x295)])/(_0x14bf1e[_0x482474(0x223)]+_0x5ace01[_0x482474(0x295)]):_0x3b0a4b=(_0x14bf1e[_0x482474(0x231)]*_0x14bf1e['number']-_0x5ace01['price']*_0x5ace01[_0x482474(0x295)])/(_0x14bf1e['number']-_0x5ace01[_0x482474(0x295)]);_0x5ace01[_0x482474(0x2ae)]==_0x482474(0x207)?_0x5da853=_0x14bf1e[_0x482474(0x1f0)]:_0x5da853=_0x14bf1e[_0x482474(0x1f0)]+(_0x5ace01['price']-_0x14bf1e[_0x482474(0x231)])*_0x5ace01['filled'];_0x266374=_0x5ace01[_0x482474(0x2ae)]==_0x482474(0x249)?_0x14bf1e[_0x482474(0x223)]-_0x5ace01[_0x482474(0x295)]:_0x14bf1e['number']+_0x5ace01[_0x482474(0x295)],_0x4d0e04=(_0x5ace01['price']-_0x3b0a4b)*_0x266374;let _0x5affb5={'coin':_0x5ace01[_0x482474(0x257)],'number':_0x266374,'breakeven':formatResult(_0x3b0a4b,0x8),'realized':formatResult(_0x5da853,0x8),'unrealized':formatResult(_0x4d0e04,0x8),'fees':formatResult(_0x14bf1e['fees']+_0x2a93d9,0x8),'sells':_0x5ace01[_0x482474(0x2ae)]=='sell'?_0x14bf1e[_0x482474(0x21a)]+0x1:_0x14bf1e[_0x482474(0x21a)],'buys':_0x5ace01['side']==_0x482474(0x207)?_0x14bf1e[_0x482474(0x1f9)]+0x1:_0x14bf1e[_0x482474(0x1f9)]};dbCoinResults[_0x482474(0x23e)](_0x482474(0x264))[_0x482474(0x251)]({'coin':_0x5ace01['coin']})[_0x482474(0x242)](_0x5affb5)[_0x482474(0x1dd)]();}async function placeOrder(_0x34247e){const _0x2b71bf=_0xe8b1cf,_0x27cd59=config['ordertype']==_0x2b71bf(0x260)?_0x2b71bf(0x260):_0x2b71bf(0x243);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x397f2b of _0x34247e){let _0x2c07b1,_0x1107fe,_0x190446,_0x29b4a5,_0x27cb26,_0x434d77=_0x397f2b['symbol'];try{const _0x31c47a=await exchange['fetchTickers'](_0x434d77),_0x1373e5=_0x31c47a[_0x434d77];_0x2c07b1=_0x1373e5[_0x2b71bf(0x296)],_0x1107fe=_0x1373e5[_0x2b71bf(0x2cf)],_0x190446=_0x1373e5['ask'];_0x397f2b['reverse']?(_0x29b4a5=_0x397f2b[_0x2b71bf(0x2ae)]==_0x2b71bf(0x207)?'sell':_0x2b71bf(0x207),_0x27cb26=Math[_0x2b71bf(0x24c)](_0x397f2b[_0x2b71bf(0x203)])/_0x2c07b1):(_0x29b4a5=_0x397f2b['side'],_0x27cb26=Math[_0x2b71bf(0x24c)](_0x397f2b[_0x2b71bf(0x203)]));_0x27cd59==_0x2b71bf(0x243)&&(config[_0x2b71bf(0x1f5)]==_0x2b71bf(0x2b3)&&(_0x2c07b1=_0x29b4a5==_0x2b71bf(0x207)?_0x1107fe:_0x190446),config[_0x2b71bf(0x1f5)]==_0x2b71bf(0x233)&&(_0x2c07b1=_0x29b4a5==_0x2b71bf(0x207)?_0x190446:_0x1107fe));_0x27cb26=formatResult(_0x27cb26,0x8),_0x2c07b1=formatResult(_0x2c07b1,0x8);const _0x3a90d8=await exchange[_0x2b71bf(0x232)](_0x434d77,_0x27cd59,_0x29b4a5,_0x27cb26,_0x2c07b1);lastOrders[_0x2b71bf(0x2c3)]({'orderId':_0x3a90d8['id'],'symbol':_0x434d77,'side':_0x29b4a5,'reverse':_0x397f2b[_0x2b71bf(0x1fa)],'amount':_0x397f2b[_0x2b71bf(0x1fa)]?_0x3a90d8[_0x2b71bf(0x2a2)]*_0x3a90d8['price']:_0x3a90d8[_0x2b71bf(0x2a2)],'filled':_0x397f2b[_0x2b71bf(0x1fa)]?_0x3a90d8[_0x2b71bf(0x295)]*_0x3a90d8[_0x2b71bf(0x217)]:_0x3a90d8[_0x2b71bf(0x295)],'price':_0x3a90d8['price']});const _0x4ae147=_0x29b4a5==_0x2b71bf(0x249)?config[_0x2b71bf(0x279)]?String[_0x2b71bf(0x28f)]('0x'+config[_0x2b71bf(0x279)])+'\x20':'':config['emojibuy']?String[_0x2b71bf(0x28f)]('0x'+config[_0x2b71bf(0x269)])+'\x20':'',_0x11ce3d=_0x27cd59=='market'?_0x2b71bf(0x21d):config[_0x2b71bf(0x1f5)]==_0x2b71bf(0x2b3)?_0x2b71bf(0x293):'Limit\x20(low-margin)';if(_0x27cd59==_0x2b71bf(0x260))logHistory(_0x2b71bf(0x267),''+_0x4ae147+_0x11ce3d+_0x2b71bf(0x285)+_0x434d77+'\x20'+_0x29b4a5+'\x20#'+formatResult(_0x3a90d8[_0x2b71bf(0x295)],0x8)+'\x20@'+formatResult(_0x3a90d8[_0x2b71bf(0x217)],0x8));else logHistory(_0x2b71bf(0x267),''+_0x4ae147+_0x11ce3d+_0x2b71bf(0x285)+_0x434d77+'\x20'+_0x29b4a5+'\x20#'+formatResult(_0x3a90d8[_0x2b71bf(0x2a2)],0x8)+'\x20@'+formatResult(_0x3a90d8[_0x2b71bf(0x217)],0x8));_0x3a90d8[_0x2b71bf(0x257)]=_0x397f2b['coin'],await updateCoinResults(_0x3a90d8);if(config[_0x2b71bf(0x20a)]!=0x0){let _0x15e006=null;if(cooldownTracker['length']==config[_0x2b71bf(0x20a)]-0x1)_0x15e006=cooldownTracker['shift']();const _0x1909fc=getTimeStamp();cooldownTracker['push'](_0x1909fc);if(_0x15e006){const _0x788580=fns[_0x2b71bf(0x2a1)](new Date(_0x1909fc),new Date(_0x15e006));_0x788580<cooldownInterval&&(logHistory(_0x2b71bf(0x2a7),'Executed\x20'+config[_0x2b71bf(0x20a)]+_0x2b71bf(0x1d0)+cooldownInterval/0x3c+_0x2b71bf(0x1f4)+cooldownPeriod/(0xe10*0x3e8)+_0x2b71bf(0x235)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xe14a14){if(_0xe14a14[_0x2b71bf(0x26e)]()['includes'](_0x2b71bf(0x262)))logHistory(_0x2b71bf(0x2a7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x434d77);else{if(_0xe14a14['toString']()['includes']('Invalid\x20quantity'))logHistory(_0x2b71bf(0x2a7),_0x2b71bf(0x226)+_0x434d77);else await handleError(_0xe14a14,_0x2b71bf(0x290));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x2b71bf(0x214)]&&(config[_0x2b71bf(0x1f5)]==_0x2b71bf(0x260)?logHistory(_0x2b71bf(0x2a7),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x2b71bf(0x2a7),_0x2b71bf(0x1e0)));else coolingDown&&(!config[_0x2b71bf(0x214)]&&logHistory(_0x2b71bf(0x2a7),_0x2b71bf(0x27e)));}}function logHistory(_0x2b2d1e,_0x18c7a6,_0x1799fd=''){const _0x42c239=_0xe8b1cf;let _0xd9060b={'time':getTimeStamp(),'type':_0x2b2d1e,'event':_0x18c7a6,'botname':config[_0x42c239(0x2bc)],'showname':config['showname']};dbLogs[_0x42c239(0x23e)](_0x42c239(0x28a))['push'](_0xd9060b)[_0x42c239(0x1dd)]();if(_0x1799fd=='')_0x1799fd=_0x18c7a6;proxyEmit('event',{'log':_0xd9060b,'summary':_0x1799fd}),process[_0x42c239(0x2a4)]({'telegram':_0xd9060b},_0x4ec06f=>{}),logging(''+_0xd9060b[_0x42c239(0x213)]);}function emitHistory(_0x5a99cd={}){const _0x9dce7f=_0xe8b1cf;Object[_0x9dce7f(0x1da)](_0x5a99cd)['length']==0x0&&(_0x5a99cd={'type':[_0x9dce7f(0x267),_0x9dce7f(0x213)],'event':'','page':0x1});if(_0x5a99cd[_0x9dce7f(0x28e)][_0x9dce7f(0x222)](_0x9dce7f(0x213)))_0x5a99cd[_0x9dce7f(0x28e)]['splice'](_0x5a99cd[_0x9dce7f(0x28e)][_0x9dce7f(0x20b)](_0x9dce7f(0x213)),0x1,'error','success');if(dbLogs[_0x9dce7f(0x1e6)]('logs')[_0x9dce7f(0x23c)]()){let _0x31367b=dbLogs[_0x9dce7f(0x23e)](_0x9dce7f(0x28a))[_0x9dce7f(0x299)](_0x131dca=>{const _0x23d130=_0x9dce7f;if(_0x5a99cd[_0x23d130(0x28e)]['length']==0x0)return![];else return _0x5a99cd[_0x23d130(0x28e)][_0x23d130(0x222)](_0x131dca[_0x23d130(0x28e)]);})[_0x9dce7f(0x299)](_0x14f841=>{const _0x106a5b=_0x9dce7f;if(_0x5a99cd[_0x106a5b(0x213)]=='')return!![];else return _0x14f841['event']['toLowerCase']()[_0x106a5b(0x222)](_0x5a99cd[_0x106a5b(0x213)][_0x106a5b(0x283)]());})[_0x9dce7f(0x255)]('time'),_0x4f3c12=_0x31367b[_0x9dce7f(0x23c)]()['length'];_0x31367b=_0x31367b[_0x9dce7f(0x1fa)]()[_0x9dce7f(0x2ce)]((_0x5a99cd[_0x9dce7f(0x218)]-0x1)*logPageSize,_0x5a99cd[_0x9dce7f(0x218)]*logPageSize-0x1)[_0x9dce7f(0x1fa)]()[_0x9dce7f(0x23c)](),proxyEmit('event-history',{'logs':_0x31367b,'total':_0x4f3c12});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x5d105d){const _0x10c54b=_0xe8b1cf,_0x421821=new Date()[_0x10c54b(0x225)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x421821-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x10c54b(0x2a4)]({'stop':_0x10c54b(0x297)},_0xf74d0e=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x10c54b(0x2a7),_0x10c54b(0x204)+consecutivePauses+')'),await sleep(_0x5d105d),botPaused=![],reset();}}async function handleError(_0x1f66eb,_0x4e1217,_0x2e9c0a=''){const _0x3f993f=_0xe8b1cf;if(_0x1f66eb[_0x3f993f(0x26e)]()['includes'](_0x3f993f(0x274)))logHistory(_0x3f993f(0x2a7),_0x4e1217+_0x3f993f(0x1ec)),await pauseBot(pauseBotInterval);else{if(_0x1f66eb[_0x3f993f(0x26e)]()[_0x3f993f(0x222)]('ExchangeNotAvailable'))logHistory(_0x3f993f(0x2a7),_0x4e1217+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x1f66eb['toString']()[_0x3f993f(0x222)](_0x3f993f(0x1cb)))logHistory(_0x3f993f(0x2a7),_0x4e1217+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x1f66eb['toString']()[_0x3f993f(0x222)](_0x3f993f(0x288)))logHistory(_0x3f993f(0x2a7),_0x4e1217+_0x3f993f(0x22f)),logHistory(_0x3f993f(0x2a7),_0x3f993f(0x21b)),process[_0x3f993f(0x2a4)]({'stop':_0x3f993f(0x1e4)},_0xdbca4=>{});else{if(_0x1f66eb[_0x3f993f(0x26e)]()[_0x3f993f(0x222)](_0x3f993f(0x294)))logHistory('error',_0x4e1217+_0x3f993f(0x2c8)),logHistory(_0x3f993f(0x2a7),_0x3f993f(0x21b)),process['send']({'stop':_0x3f993f(0x1e4)},_0x46b3a=>{});else{if(_0x1f66eb[_0x3f993f(0x26e)]()[_0x3f993f(0x222)](_0x3f993f(0x238)))logHistory(_0x3f993f(0x2a7),_0x4e1217+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x3f993f(0x21b)),process[_0x3f993f(0x2a4)]({'stop':'kill'},_0x4c03de=>{});else{if(_0x1f66eb['toString']()['includes'](_0x3f993f(0x1d6)))logHistory('error',_0x4e1217+_0x3f993f(0x22e)),logHistory(_0x3f993f(0x2a7),_0x3f993f(0x21b)),process[_0x3f993f(0x2a4)]({'stop':'kill'},_0x1f18f6=>{});else{if(_0x1f66eb[_0x3f993f(0x26e)]()['includes'](_0x3f993f(0x2a0)))logHistory(_0x3f993f(0x2a7),_0x4e1217+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process[_0x3f993f(0x2a4)]({'stop':_0x3f993f(0x297)},_0x547b8c=>{});else _0x1f66eb['toString']()[_0x3f993f(0x222)]('InsufficientFunds')?logHistory(_0x3f993f(0x2a7),_0x4e1217+_0x3f993f(0x2af)):(logHistory('error',_0x4e1217+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x4e1217+_0x3f993f(0x1fe),_0x1f66eb),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x35e5b8,_0x504559){const _0x4c8719=_0xe8b1cf;return parseFloat(_0x35e5b8[_0x4c8719(0x2a8)](_0x504559));}function logging(_0x18bad9,_0xa6405a=''){const _0x5eff6c=_0xe8b1cf;if(config[_0x5eff6c(0x252)])console['log'](getTimeStamp()+':\x20'+config[_0x5eff6c(0x2bc)]+'\x20>\x20'+_0x18bad9,_0xa6405a);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x18bad9,_0xa6405a);}function getServerTime(){const _0x3b46a4=_0xe8b1cf,_0x5afda4=new Date();return _0x5afda4[_0x3b46a4(0x1f2)]()+'/'+(_0x5afda4[_0x3b46a4(0x2ba)]()+0x1)[_0x3b46a4(0x26e)]()[_0x3b46a4(0x2c5)](0x2,'0')+'/'+_0x5afda4[_0x3b46a4(0x1cf)]()['toString']()[_0x3b46a4(0x2c5)](0x2,'0')+'\x20'+_0x5afda4[_0x3b46a4(0x206)]()[_0x3b46a4(0x26e)]()[_0x3b46a4(0x2c5)](0x2,'0')+':'+_0x5afda4['getMinutes']()['toString']()[_0x3b46a4(0x2c5)](0x2,'0')+':'+_0x5afda4[_0x3b46a4(0x22a)]()[_0x3b46a4(0x26e)]()[_0x3b46a4(0x2c5)](0x2,'0');}function getTimeStamp(){const _0x18ecd7=_0xe8b1cf,_0x782f6d=shiftedTime();return _0x782f6d['getFullYear']()+'/'+(_0x782f6d['getMonth']()+0x1)[_0x18ecd7(0x26e)]()[_0x18ecd7(0x2c5)](0x2,'0')+'/'+_0x782f6d[_0x18ecd7(0x1cf)]()[_0x18ecd7(0x26e)]()[_0x18ecd7(0x2c5)](0x2,'0')+'\x20'+_0x782f6d[_0x18ecd7(0x206)]()[_0x18ecd7(0x26e)]()[_0x18ecd7(0x2c5)](0x2,'0')+':'+_0x782f6d[_0x18ecd7(0x1d4)]()['toString']()[_0x18ecd7(0x2c5)](0x2,'0')+':'+_0x782f6d['getSeconds']()[_0x18ecd7(0x26e)]()[_0x18ecd7(0x2c5)](0x2,'0');}function getDate(){const _0x5917f3=_0xe8b1cf,_0x570bc4=shiftedTime();return _0x570bc4['getFullYear']()+'/'+(_0x570bc4['getMonth']()+0x1)[_0x5917f3(0x26e)]()['padStart'](0x2,'0')+'/'+_0x570bc4[_0x5917f3(0x1cf)]()[_0x5917f3(0x26e)]()[_0x5917f3(0x2c5)](0x2,'0');}function getHour(){const _0x3a7d9d=_0xe8b1cf,_0x576f31=shiftedTime();return _0x576f31[_0x3a7d9d(0x206)]()[_0x3a7d9d(0x26e)]()['padStart'](0x2,'0');}function sleep(_0xe7cdd4){return new Promise(_0x44d836=>setTimeout(_0x44d836,_0xe7cdd4));}function shiftedTime(){const _0x35fe3a=_0xe8b1cf,_0x43bbb8=new Date();let _0x7a4df9=_0x43bbb8;if(config&&config[_0x35fe3a(0x27f)]!==0x0)_0x7a4df9=fns[_0x35fe3a(0x282)](_0x43bbb8,{'hours':config['timeshift']});return _0x7a4df9;}