const _0x28000d=_0x4938;(function(_0x59dd32,_0x2766eb){const _0x4873a7=_0x4938,_0x298f2c=_0x59dd32();while(!![]){try{const _0x55d2cb=-parseInt(_0x4873a7(0x19f))/0x1+parseInt(_0x4873a7(0x163))/0x2*(parseInt(_0x4873a7(0x2c1))/0x3)+-parseInt(_0x4873a7(0x251))/0x4+parseInt(_0x4873a7(0x1e2))/0x5*(parseInt(_0x4873a7(0x284))/0x6)+parseInt(_0x4873a7(0x227))/0x7+parseInt(_0x4873a7(0x202))/0x8*(parseInt(_0x4873a7(0x2bd))/0x9)+-parseInt(_0x4873a7(0x2cf))/0xa;if(_0x55d2cb===_0x2766eb)break;else _0x298f2c['push'](_0x298f2c['shift']());}catch(_0xefd17f){_0x298f2c['push'](_0x298f2c['shift']());}}}(_0x5902,0xc54a8));const _0x44f19e=function(){let _0x2b849b=!![];return function(_0x4a548f,_0x3e993e){const _0x1fbf1b=_0x2b849b?function(){const _0x2850c9=_0x4938;if(_0x3e993e){const _0x14b0be=_0x3e993e[_0x2850c9(0x27c)](_0x4a548f,arguments);return _0x3e993e=null,_0x14b0be;}}:function(){};return _0x2b849b=![],_0x1fbf1b;};}(),_0x159ff3=_0x44f19e(this,function(){const _0x2be043=_0x4938;return _0x159ff3[_0x2be043(0x272)]()[_0x2be043(0x26e)](_0x2be043(0x2e4))[_0x2be043(0x272)]()[_0x2be043(0x18f)](_0x159ff3)['search'](_0x2be043(0x2e4));});_0x159ff3();'use strict';const ccxt=require(_0x28000d(0x1fd)),low=require(_0x28000d(0x161)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x28000d(0x1d6)],util=require(_0x28000d(0x25a)),argv=require('yargs/yargs')(process[_0x28000d(0x1a2)][_0x28000d(0x229)](0x2))[_0x28000d(0x1a2)],path=require(_0x28000d(0x2e5));let exchange;global[_0x28000d(0x20b)]={},global[_0x28000d(0x1df)]={};const usdBasecoins=[_0x28000d(0x29a),_0x28000d(0x2c3),_0x28000d(0x2d4),'USDT',_0x28000d(0x1f7),_0x28000d(0x178)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x28000d(0x22f)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x5902(){const _0x58118c=['exchanges','closed','./config/','Transaction\x20detection\x20blocked','round','Initializing\x20coin\x20results','Huobipro','autoliquidity','UNLOCKED','remove','storeConfiguration','added','ORDERS.UNLOCKED','page','red_yellow_blue','RSA-OAEP','1588624ruMDyo','apiSecret','stopExchange()','balancing\x20resumed','sha256','PAXG','/USD','\x20exchange','emojibuy','util','\x20>\x20','limits','add','watchTrades()','toFixed','rightTxt','PermissionDenied','net-basecoin','botname','configuration-stored','watchOrders','./logs/','success','toUpperCase','sells','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','toLowerCase','fetchTicker','search','fiat','bot-','createOrder','toString','\x20metrics:</b>\x20\x0a\x0a','0\x20-\x20EXECUTION:\x20','sortBy','customId','fromCodePoint','close','ongoing','BNB','-results.json','apply','emojisell','fetchBalance','recreateCoinResults()','loading-canceled','has','Net\x20effect','watchTrades','1249392eXGfxX','mkdirSync','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','data','target','placeOrder',':\x20timer\x20>','net-fiat','getPortfolio(2)','getDate','milliseconds','timestamp','Limit\x20(low-margin)','getCoins()','exec','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','time','orderstatus','startnumber','showConfig','startdate','price','USD','loadMarkets','***','filled','</pre>','ETH','coins','date','average','no\x20open\x20orders','Order\x20is\x20invalid:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','final','realized','Order(s)\x20not\x20validated\x20after\x20','openOrders','performance','cost','error','push','Transaction\x20detection\x20unblocked',',\x20must\x20be\x20a\x203\x20digit\x20number','parseISO','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','bots','excluded','\x20minutes\x20-\x20','message','API-key\x20format\x20invalid','sell','getFullYear','-events.json','offset','Order\x20filled:\x20','value','18FAKnIX','settings','kill','symbol','606zMOzJn','\x20not\x20available','BUSD','initclient','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Cryptocom','enabled','entries','startprice','Bitget','Huobi','OnMaintenance','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','-performance.json','9119720TprSPs','test','substring','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','timeshift','TUSD','No\x20more\x20open\x20orders\x20-\x20','isEqual','Headless:\x20','forEach','<b>Bot\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','args','\x20not\x20responding','spot','starting-balance-','\x20has\x20a\x2024h\x20drop\x20of\x20','Reset\x20|\x20','\x20-\x20bot\x20not\x20started','Resetting\x20bot\x20history','amount','(((.+)+)+)+$','path','initTickers()','defaults','Failed\x20to\x20load\x20coin\x20data\x20for\x20','createWriteStream','cancel','limit-low','changes','emitHistory','\x20|\x20','currency','basecoinvalue','shift','side','last','buy','Pausing\x20for\x20','lowdb','recreate','8920kOWoVG','recent20','apiKey','\x20portfolio:</b>\x20\x0a\x0a','percentage','Error:\x20Invalid\x20argument\x20','BTC','placeOrder()','./version.json','InvalidNonce','Mexc','OrderNotFound','breakeven','limit','Waited\x20','initial','fetchTickers','privateKey','2\x20-\x20Validate\x20orders:\x20','event-history','unlinkSync','USDP','open','string','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Invalid\x20quantity','Exchange','getTime','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20orders\x20in\x20less\x20than\x20','\x20order:\x20','MIN_NOTIONAL','find','liquidity','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','Binance','min','Binanceus','decrypt','coin-loading-progress','market','USDT','configuration','constructor','BNB/','order','ID:\x20','warning','reverse','\x20>\x20[DEBUG]\x20','total','parse','\x20value','************','Limit\x20(high-margin)','<b>','cloneDeep','EUR','watchOrders()','874358sSiCYu','Invalid\x20ACCESS_TIMESTAMP','showname','argv','LOCKED','balances','trade','2.3.5','version','secure','join','filter','getSeconds','debug','progress','\x20rejected\x20your\x20API\x20request','toggleBotMode','headless','type','sendPortfolioTelegram','colorscheme','must\x20be\x20greater\x20than\x20minimum\x20amount','resetHistory','logs','Cooldown\x20ended\x20-\x20balancing\x20resumed','fetchOpenOrders','exchange','threshold','Bot\x20','onepagemode','highest','remainingSymbols','limit-high','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','ask','orderId','Portfolio\x20change\x20detected:\x20','event','ExchangeNotAvailable','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Error\x20details:','existsSync','AuthenticationError','length','leftTxt','map','keys','getCoinNumber()','fee','Market','number','\x20API\x20secret\x20is\x20invalid','balancing\x20resumes\x20when\x20cooldown\x20ends','canceled','-config.json','Crypt','usd','ExchangeError','delta','write','portfolio','cancelLoading','none','Fee\x20discount\x20refund\x20detected:\x20','change','InsufficientFunds','ORDERS.LOCKED','5OowYwd','timeout','getHours','getStartingBalances','Loading\x20completed','change24h','Resetting\x20coin\x20results:\x20','RequestTimeout','fetchClosedOrders','getAllOrders()','datetime','getMonth','\x20exchange\x20error','Exception\x20thrown\x20in\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Net\x20','<pre>','replace','basecoin','buys','valid','USDC','1\x20-\x20Handle\x20open\x20orders','format','running','max','send','ccxt','001','bb-secure.json','UNLOCKING','full','3728072VKRbUY','get','removed','log','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','sendMetricsTelegram','sort','restart','ordertype','ticker','distribution','bid','split','padEnd','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','uncaughtException','Saving\x20configuration','\x20|\x20highest\x20fee:\x20','status','-------------------------------\x0a','getOpenOrders()','coin','/output-000.log','recovery','storeFiat','KC-API-TIMESTAMP\x20Invalid','function','%\x20(','includes','eur','cooldown','\x20|\x20Custom\x20ID:\x20','exchange\x20not\x20reloaded','set','yyyy/MM/dd','stringify','password','6652940XFxpiA','assign','slice','Invalid\x20symbol:\x20','DDoSProtection','1\x20-\x20Validate\x20orders:\x20','/backup/','Executed\x20','\x20-\x20pausing\x20bot\x20for\x20','bb-settings.json','apiPassword','\x20:\x20','pro','getPortfolio(1)','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bot','2.6.0','cancelOrder','padStart','indexOf','splice','\x20/\x20','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Bybit','abs'];_0x5902=function(){return _0x58118c;};return _0x5902();}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x28000d(0x16b))[_0x28000d(0x1a7)],botID=process[_0x28000d(0x1a2)][0x2]||_0x28000d(0x1fe),pattern=/^[0-9]{3}$/;!pattern[_0x28000d(0x2d0)](botID)&&(console[_0x28000d(0x205)](_0x28000d(0x168)+botID+_0x28000d(0x2af)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x28000d(0x243),logspath=userID?_0x28000d(0x266)+userID+'/':_0x28000d(0x266),loggerfile=fs[_0x28000d(0x2e9)](logspath+_0x28000d(0x218),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x28000d(0x285)](configpath);!fs[_0x28000d(0x1c8)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x28000d(0x270)+botID+_0x28000d(0x1d5),logfile=configpath+_0x28000d(0x270)+botID+_0x28000d(0x2b9),performancefile=configpath+_0x28000d(0x270)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x28000d(0x27b),settingsfile=configpath+_0x28000d(0x230),securefile=configpath+_0x28000d(0x1ff),configbackuppath=configpath+_0x28000d(0x22d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x28000d(0x1da)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x28000d(0x2e7)]({'data':[],'version':serverversion})[_0x28000d(0x1da)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x28000d(0x1da)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x28000d(0x2e7)]({'coins':[],'version':serverversion})[_0x28000d(0x1da)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x28000d(0x255),'rsaStandard':_0x28000d(0x250)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2d21f9=>{console['log'](_0x2d21f9);},'simple':_0x2fa4f2=>{const _0x5f0ce1=_0x28000d;console[_0x5f0ce1(0x205)](_0x2fa4f2),loggerfile[_0x5f0ce1(0x1da)](util[_0x5f0ce1(0x1f9)](_0x2fa4f2)+'\x0a');},'full':async(_0x3e12e2,_0x4ecb6d='')=>{const _0x44b180=_0x28000d;let _0x3fb449;if(config[_0x44b180(0x1a1)])_0x3fb449=getTimeStamp()+':\x20'+config[_0x44b180(0x263)]+_0x44b180(0x25b)+_0x3e12e2;else _0x3fb449=getTimeStamp()+':\x20Bot\x20'+botID+_0x44b180(0x25b)+_0x3e12e2;console[_0x44b180(0x205)](_0x3fb449),loggerfile[_0x44b180(0x1da)](util[_0x44b180(0x1f9)](_0x3fb449)+'\x0a'),_0x4ecb6d&&(console[_0x44b180(0x205)](_0x4ecb6d),loggerfile[_0x44b180(0x1da)](util[_0x44b180(0x1f9)](_0x4ecb6d)+'\x0a'));},'debug':async(_0x137115,_0x491e54='')=>{const _0x2e1d34=_0x28000d;let _0x62fc48;if(config[_0x2e1d34(0x1a1)])_0x62fc48=getTimeStamp()+':\x20'+config[_0x2e1d34(0x263)]+'\x20>\x20[DEBUG]\x20'+_0x137115;else _0x62fc48=getTimeStamp()+':\x20Bot\x20'+botID+_0x2e1d34(0x195)+_0x137115;if(debugging)console[_0x2e1d34(0x205)](_0x62fc48);loggerfile[_0x2e1d34(0x1da)](util['format'](_0x62fc48)+'\x0a');if(_0x491e54){if(debugging)console['log'](_0x491e54);loggerfile['write'](util[_0x2e1d34(0x1f9)](_0x491e54)+'\x0a');}}};process['on']('uncaughtException',function(_0x1afda6){const _0x5c1475=_0x28000d;handleError(_0x1afda6,_0x5c1475(0x211));});settings[_0x28000d(0x2d3)]!=config['timeshift']&&updateTimeshift(settings[_0x28000d(0x2d3)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x28000d(0x1bc)]);process[_0x28000d(0x1fc)]({'started':_0x28000d(0x1fa)},_0x146642=>{}),initializeProcessListeners();function proxyEmit(_0x22b913,_0x341235=null){const _0x417797=_0x28000d;process[_0x417797(0x1fc)]({'function':_0x22b913,'args':_0x341235},_0x819b4a=>{});}function initializeProcessListeners(){const _0x966a0b=_0x28000d;process['on'](_0x966a0b(0x2b5),_0x4b64ad=>{const _0xf9553b=_0x966a0b;switch(Object[_0xf9553b(0x1cd)](_0x4b64ad)[0x0]){case _0xf9553b(0x2d3):_0x4b64ad[_0xf9553b(0x2d3)]!=undefined&&(settings[_0xf9553b(0x2d3)]=_0x4b64ad[_0xf9553b(0x2d3)],updateTimeshift(settings[_0xf9553b(0x2d3)]));break;case _0xf9553b(0x1bc):_0x4b64ad[_0xf9553b(0x1bc)]!=undefined&&(settings[_0xf9553b(0x1bc)]=_0x4b64ad[_0xf9553b(0x1bc)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x4b64ad[_0xf9553b(0x2b2)]!=undefined&&(bots=JSON[_0xf9553b(0x197)](_0x4b64ad[_0xf9553b(0x2b2)]),proxyEmit(_0xf9553b(0x2b2),bots));break;case _0xf9553b(0x21c):switch(_0x4b64ad[_0xf9553b(0x21c)]){case _0xf9553b(0x2c4):initclient();break;case _0xf9553b(0x1af):toggleBotMode();break;case _0xf9553b(0x2ed):emitHistory(_0x4b64ad['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4b64ad[_0xf9553b(0x2db)]);break;case'getPortfolio':getPortfolio(_0x4b64ad[_0xf9553b(0x2db)]);break;case _0xf9553b(0x24b):storeConfiguration(_0x4b64ad[_0xf9553b(0x2db)]);break;case'storeHeadless':storeHeadless(_0x4b64ad[_0xf9553b(0x2db)]);break;case _0xf9553b(0x21a):storeFiat(_0x4b64ad['args']);break;case _0xf9553b(0x1b5):resetHistory();break;case _0xf9553b(0x1e5):getStartingBalances(getNormalizedPerformance());break;case _0xf9553b(0x289):placeOrder(_0x4b64ad['args']);break;case _0xf9553b(0x1dc):cancelLoading();break;case _0xf9553b(0x297):showConfig();break;case _0xf9553b(0x207):sendMetricsTelegram();break;case _0xf9553b(0x1b2):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3e6bbe=![]){const _0x53f073=_0x28000d;logger[_0x53f073(0x1ac)](_0x53f073(0x2e0)+(_0x3e6bbe?'exchange\x20reloaded':_0x53f073(0x222))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x3e6bbe)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x53f073(0x165)]!=_0x53f073(0x29c)){loadingProgress=0x0;if(_0x3e6bbe){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x58d9fe){handleErrorNoStop(_0x58d9fe,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1a8e86=await getCoins();[currentCoins,currentCoinsAll]=_0x1a8e86,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x53f073(0x1ac)](_0x53f073(0x1e6)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x53f073(0x1ca)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x592c32=_0x28000d;exchangeStopped=!![];try{await exchange[_0x592c32(0x278)]();}catch(_0x3fb5d9){await handleError(_0x3fb5d9,_0x592c32(0x253));}}async function reloadExchange(){const _0x3a682d=_0x28000d;while(lockOrders!=ORDERS[_0x3a682d(0x249)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3a682d(0x1ac)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1ff6e0=config[_0x28000d(0x1b9)],_0x5d12f2=config[_0x28000d(0x165)],_0x88d1f5=config[_0x28000d(0x252)],_0x516973=config['apiPassword']){const _0x47f39c=_0x28000d;exchange&&await stopExchange();!supportedExchanges()[_0x47f39c(0x21e)](_0x1ff6e0)&&(logHistory('error',_0x47f39c(0x17f)+_0x1ff6e0+_0x47f39c(0x258)),killBot());const _0x31acd4=ccxt[_0x47f39c(0x233)][_0x1ff6e0[_0x47f39c(0x26c)]()];exchange=new _0x31acd4({'apiKey':_0x5d12f2,'secret':_0x88d1f5,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x47f39c(0x2dd)}});if(_0x516973)exchange[_0x47f39c(0x226)]=_0x516973;}function setStableCoins(){const _0x3e0fba=_0x28000d;let _0x2eca0c=config[_0x3e0fba(0x1f4)]==_0x3e0fba(0x29f)?_0x3e0fba(0x29f):config[_0x3e0fba(0x1f4)]==_0x3e0fba(0x256)?_0x3e0fba(0x256):_0x3e0fba(0x169),_0x2e7254=!allSymbols[_0x3e0fba(0x21e)](_0x2eca0c+_0x3e0fba(0x257))?_0x3e0fba(0x18d):'USD',_0xb11773=!allSymbols[_0x3e0fba(0x21e)](_0x2eca0c+'/EUR')?_0x2e7254:'EUR';stablecoins={'eur':{'coin':''+_0x2eca0c+_0xb11773,'symbol':_0x2eca0c+'/'+_0xb11773},'usd':{'coin':''+_0x2eca0c+_0x2e7254,'symbol':_0x2eca0c+'/'+_0x2e7254}};}async function initwsCcxt(){const _0x42e862=_0x28000d;initCycle++;const _0x558f9e=initCycle;let _0x37f1eb=[];config[_0x42e862(0x1db)][_0x42e862(0x2d8)](_0x2f53ac=>{const _0x1db8f4=_0x42e862;if(!_0x2f53ac[_0x1db8f4(0x2b3)]&&_0x2f53ac[_0x1db8f4(0x217)]!=config[_0x1db8f4(0x1f4)])_0x37f1eb[_0x1db8f4(0x2ad)](_0x2f53ac[_0x1db8f4(0x2c0)]);});if(!_0x37f1eb['includes'](stablecoins[_0x42e862(0x21f)][_0x42e862(0x2c0)]))_0x37f1eb[_0x42e862(0x2ad)](stablecoins['eur'][_0x42e862(0x2c0)]);if(!_0x37f1eb[_0x42e862(0x21e)](stablecoins[_0x42e862(0x1d7)][_0x42e862(0x2c0)]))_0x37f1eb[_0x42e862(0x2ad)](stablecoins[_0x42e862(0x1d7)][_0x42e862(0x2c0)]);if(config['exchange']['startsWith'](_0x42e862(0x187))&&config[_0x42e862(0x1f4)]!=_0x42e862(0x256)){if(!_0x37f1eb[_0x42e862(0x21e)](_0x42e862(0x190)+config[_0x42e862(0x1f4)]))_0x37f1eb[_0x42e862(0x2ad)](_0x42e862(0x190)+config['basecoin']);}loadCoins(_0x37f1eb),_0x37f1eb=validateSymbols(_0x37f1eb);const _0x19cf6e=async _0x2cfa65=>{const _0x5c2d4f=_0x42e862;let _0x12fbd1;try{const _0x445e3a=await getTickers(_0x2cfa65);Object['entries'](_0x445e3a)[_0x5c2d4f(0x2d8)](_0x3aaa6f=>{const _0x36bce8=_0x5c2d4f;_0x12fbd1=_0x3aaa6f[0x1][_0x36bce8(0x2c0)],global[_0x36bce8(0x20b)][noslash(_0x12fbd1)]=_0x3aaa6f[0x1][_0x36bce8(0x15e)],global[_0x36bce8(0x1df)][_0x12fbd1]=_0x3aaa6f[0x1][_0x36bce8(0x167)];});}catch(_0x241f54){await handleError(_0x241f54,_0x5c2d4f(0x2e6),_0x12fbd1);}},_0x48aa66=async _0x395d14=>{const _0x173363=_0x42e862;while(initCycle==_0x558f9e){if(!botPaused)try{const _0x2b1811=await exchange[_0x173363(0x283)](_0x395d14);global[_0x173363(0x20b)][noslash(_0x2b1811[0x0][_0x173363(0x2c0)])]=_0x2b1811[0x0][_0x173363(0x299)],await sleep(0x3e8);}catch(_0xd75747){if(!exchangeStopped)await handleError(_0xd75747,_0x173363(0x25e),_0x395d14);}else await sleep(0x64);}},_0x48230b=async _0xffc54=>{const _0x11b803=_0x42e862;while(initCycle==_0x558f9e){if(!botPaused){let _0x18162e;try{await sleep(0x3c*0x3e8);const _0x2c6633=await getTickers(_0xffc54);Object[_0x11b803(0x2c8)](_0x2c6633)[_0x11b803(0x2d8)](_0x5e5a09=>{const _0xdbc0f3=_0x11b803;_0x18162e=_0x5e5a09[0x1][_0xdbc0f3(0x2c0)],global[_0xdbc0f3(0x1df)][_0x18162e]=_0x5e5a09[0x1][_0xdbc0f3(0x167)];});}catch(_0xb9e551){if(!exchangeStopped)await handleError(_0xb9e551,'fetchTickers()',_0x18162e);}}else await sleep(0x64);}},_0xbbe766=async _0x28a567=>{const _0x57796f=_0x42e862;while(initCycle==_0x558f9e){if(!botPaused)try{const _0xc12c5f=await exchange[_0x57796f(0x265)](_0x28a567);initCycle==_0x558f9e&&_0xc12c5f['forEach'](_0x4f5e2e=>{updateNumberCoinsCcxt(_0x4f5e2e);});}catch(_0x47f915){if(!exchangeStopped)await handleError(_0x47f915,_0x57796f(0x19e));}else await sleep(0x64);}};_0x19cf6e(_0x37f1eb),_0x48230b(_0x37f1eb),_0x37f1eb[_0x42e862(0x2d8)](_0x2ed4e5=>{_0x48aa66(_0x2ed4e5),_0xbbe766(_0x2ed4e5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x596e0f){const _0x9b3c6f=_0x28000d;let _0x4c0f41={};try{if(config[_0x9b3c6f(0x1b9)]!=_0x9b3c6f(0x2c6))_0x4c0f41=await exchange[_0x9b3c6f(0x173)](_0x596e0f);else for(const _0x15fbb2 of _0x596e0f){const _0x4911ab=await exchange['fetchTicker'](_0x15fbb2);_0x4c0f41[_0x15fbb2]=_0x4911ab;}return _0x4c0f41;}catch(_0x13877b){throw _0x13877b;}}async function watchTransactions(){const _0x30df67=_0x28000d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x286376=await getCoins(),[_0x478061,_0x3c713c]=_0x286376;let _0x3dd3d2=[];currentCoins[_0x30df67(0x2d8)](_0x931b32=>{const _0x33ee10=_0x30df67,_0x4da7af=_0x478061['find'](_0x260a8e=>_0x260a8e['coin']==_0x931b32[_0x33ee10(0x217)]);if(_0x4da7af){if(_0x931b32[_0x33ee10(0x1d1)]!=_0x4da7af[_0x33ee10(0x1d1)]){let _0x2341fe;if(_0x931b32[_0x33ee10(0x217)]!=config[_0x33ee10(0x1f4)]){const _0x2c7382=global[_0x33ee10(0x20b)][noslash(_0x931b32[_0x33ee10(0x2c0)])];_0x2341fe=_0x931b32[_0x33ee10(0x194)]?0x1/_0x2c7382:_0x2c7382;}else _0x2341fe=0x1;_0x3dd3d2[_0x33ee10(0x2ad)]({'coin':_0x931b32[_0x33ee10(0x217)],'symbol':_0x931b32[_0x33ee10(0x2c0)],'price':_0x2341fe,'number':Number(formatResult(_0x4da7af[_0x33ee10(0x1d1)]-_0x931b32[_0x33ee10(0x1d1)],0x8)),'basecoinvalue':_0x2341fe*(_0x4da7af['number']-_0x931b32[_0x33ee10(0x1d1)])});}}});if(_0x3dd3d2[_0x30df67(0x1ca)]==0x1&&!blockTransactionDetection){if(config[_0x30df67(0x248)]){logger[_0x30df67(0x1ac)](_0x30df67(0x2a5)+_0x3dd3d2[0x0][_0x30df67(0x15b)]+_0x30df67(0x213)+lastFees[_0x30df67(0x1bd)]);if(lastFees[_0x30df67(0x1bd)]==0x0||Math[_0x30df67(0x240)](_0x3dd3d2[0x0][_0x30df67(0x15b)])>lastFees['highest']){delete _0x3dd3d2[0x0][_0x30df67(0x2c0)],delete _0x3dd3d2[0x0][_0x30df67(0x15b)];let _0x1963cd=[],_0x4752c4=[...config[_0x30df67(0x185)]]||[],_0x55532a=config[_0x30df67(0x185)];_0x4752c4['sort']((_0x4ced27,_0x5a0600)=>_0x4ced27[_0x30df67(0x2a1)]>_0x5a0600[_0x30df67(0x2a1)]?-0x1:_0x5a0600[_0x30df67(0x2a1)]>_0x4ced27['date']?0x1:0x0);const _0x25e666=getDate();if(_0x4752c4[0x0]){const _0x46de90=fns[_0x30df67(0x197)](_0x4752c4[0x0][_0x30df67(0x2a1)],'yyyy/MM/dd',new Date()),_0x4bebe9=fns[_0x30df67(0x197)](_0x25e666,_0x30df67(0x224),new Date());if(fns[_0x30df67(0x2d6)](_0x46de90,_0x4bebe9)){_0x1963cd=_0x4752c4[0x0][_0x30df67(0x2ec)];const _0x17d73c=_0x1963cd[_0x30df67(0x184)](_0x487b93=>_0x487b93[_0x30df67(0x217)]==_0x3dd3d2[0x0][_0x30df67(0x217)]);_0x17d73c?(_0x17d73c[_0x30df67(0x1d1)]+=_0x3dd3d2[0x0][_0x30df67(0x1d1)],_0x17d73c[_0x30df67(0x1d1)]==0x0&&(_0x1963cd=_0x1963cd[_0x30df67(0x1aa)](_0x1900cb=>{const _0x3bf101=_0x30df67;return _0x1900cb['coin']!=_0x3dd3d2[0x0][_0x3bf101(0x217)];}))):_0x1963cd[_0x30df67(0x2ad)](_0x3dd3d2[0x0]);const _0x32cd3c=_0x55532a[_0x30df67(0x184)](_0x2a150e=>_0x2a150e['date']==_0x25e666);_0x32cd3c[_0x30df67(0x2ec)]=_0x1963cd;}else _0x55532a[_0x30df67(0x2ad)]({'date':_0x25e666,'changes':[_0x3dd3d2[0x0]]});}const _0x873c20=_0x55532a[_0x30df67(0x184)](_0x11fe1b=>_0x11fe1b['date']==_0x25e666);if(_0x873c20){let _0x3ce80d=!![];_0x873c20[_0x30df67(0x2ec)][_0x30df67(0x2d8)](_0x3f42cd=>{const _0x19648f=_0x30df67;if(_0x3f42cd[_0x19648f(0x1d1)]!=0x0)_0x3ce80d=![];}),_0x3ce80d&&(_0x55532a=_0x55532a[_0x30df67(0x1aa)](_0x5c803b=>{const _0x11cfa3=_0x30df67;return _0x5c803b[_0x11cfa3(0x2a1)]!=_0x25e666;}));}let _0x525a4c=dbConfig[_0x30df67(0x203)]('bot')[_0x30df67(0x184)]({'botID':botID})[_0x30df67(0x2bc)]();_0x525a4c&&(dbConfig['get'](_0x30df67(0x236))['find']({'botID':botID})[_0x30df67(0x228)]({'liquidity':_0x55532a})[_0x30df67(0x1da)](),config['liquidity']=_0x55532a),logHistory(_0x30df67(0x267),_0x30df67(0x1c3)+Math[_0x30df67(0x240)](_0x3dd3d2[0x0][_0x30df67(0x1d1)])+'\x20'+_0x3dd3d2[0x0][_0x30df67(0x217)]+'\x20'+(_0x3dd3d2[0x0][_0x30df67(0x1d1)]>0x0?_0x30df67(0x24c):_0x30df67(0x204))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x30df67(0x1ac)](_0x30df67(0x1de)+Math[_0x30df67(0x240)](_0x3dd3d2[0x0][_0x30df67(0x1d1)])+'\x20'+_0x3dd3d2[0x0]['coin']+'\x20'+(_0x3dd3d2[0x0][_0x30df67(0x1d1)]>0x0?_0x30df67(0x24c):_0x30df67(0x204)));transactionDetected=!![];}else logger[_0x30df67(0x1ac)]('Portfolio\x20change\x20detected:\x20'+Math[_0x30df67(0x240)](_0x3dd3d2[0x0][_0x30df67(0x1d1)])+'\x20'+_0x3dd3d2[0x0]['coin']+'\x20'+(_0x3dd3d2[0x0]['number']>0x0?_0x30df67(0x24c):_0x30df67(0x204))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x478061,currentCoinsAll=_0x3c713c,await sleep(watchTransactionsInterval);}catch(_0x1066b1){if(!exchangeStopped)await handleError(_0x1066b1,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x16c023=_0x28000d;try{markets=await exchange[_0x16c023(0x29b)](),allSymbols=[],Object[_0x16c023(0x2c8)](markets)[_0x16c023(0x2d8)](_0x2f9378=>{const _0x5304ce=_0x16c023;_0x2f9378[0x1]['active']&&_0x2f9378[0x1][_0x5304ce(0x2dd)]&&allSymbols[_0x5304ce(0x2ad)](_0x2f9378[0x0]);});}catch(_0x4fae8a){throw _0x4fae8a;}}function validateSymbols(_0x5beaae){const _0x6b1724=_0x28000d;let _0x47764f=[];return _0x5beaae[_0x6b1724(0x2d8)](_0x4c591b=>{const _0x3e0670=_0x6b1724;!allSymbols[_0x3e0670(0x21e)](_0x4c591b)?logHistory(_0x3e0670(0x2ac),_0x3e0670(0x22a)+_0x4c591b+_0x3e0670(0x210)):_0x47764f[_0x3e0670(0x2ad)](_0x4c591b);}),_0x47764f;}async function initclient(){const _0x692dbf=_0x28000d;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x692dbf(0x241),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x692dbf(0x1a4),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x430ed1=getNormalizedPerformance();emitPerformance(_0x430ed1),getStartingBalances(_0x430ed1);}function _0x4938(_0x394a0b,_0x265946){const _0x3c6a29=_0x5902();return _0x4938=function(_0x159ff3,_0x44f19e){_0x159ff3=_0x159ff3-0x15b;let _0x59027f=_0x3c6a29[_0x159ff3];return _0x59027f;},_0x4938(_0x394a0b,_0x265946);}async function toggleBotMode(){const _0x25eb40=_0x28000d;let _0x4394c4=dbConfig[_0x25eb40(0x203)](_0x25eb40(0x236))[_0x25eb40(0x184)]({'botID':botID})[_0x25eb40(0x2bc)]();if(_0x4394c4){const _0x319c9a=!_0x4394c4[_0x25eb40(0x1b0)];dbConfig[_0x25eb40(0x203)](_0x25eb40(0x236))['find']({'botID':botID})['assign']({'headless':_0x319c9a})[_0x25eb40(0x1da)](),config[_0x25eb40(0x1b0)]=_0x319c9a,proxyEmit(_0x25eb40(0x18e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x401931=_0x28000d;process[_0x401931(0x1fc)]({'updatebotmanager':!![]},_0x2b5aea=>{}),logger[_0x401931(0x1ac)](_0x401931(0x2d7)+config[_0x401931(0x1b0)]);}async function loadCoins(_0x2fb9ee){const _0x3874ea=_0x28000d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x251c71,_0x142fc4=0x0,_0x18ade0=0x0;_0x2fb9ee[_0x3874ea(0x2d8)](_0x49e931=>{const _0x3a124f=_0x3874ea;loading[_0x3a124f(0x1be)][_0x3a124f(0x2ad)](_0x49e931);}),loadingCanceled=![];let _0x21719e=![];while(_0x251c71!=_0x2fb9ee['length']+maxLoadingProgress){_0x251c71=loadingProgress,_0x2fb9ee[_0x3874ea(0x2d8)](_0x56ade6=>{const _0x5982de=_0x3874ea;if(global[_0x5982de(0x20b)][noslash(_0x56ade6)]){loading[_0x5982de(0x1be)]=loading[_0x5982de(0x1be)][_0x5982de(0x1aa)](_0x42dd81=>_0x42dd81!=_0x56ade6);if(!watchedSymbols[_0x5982de(0x21e)](_0x56ade6))watchedSymbols[_0x5982de(0x2ad)](_0x56ade6);_0x251c71++;}}),loading[_0x3874ea(0x1ad)]=Math['round'](_0x251c71/(_0x2fb9ee['length']+maxLoadingProgress)*0x64);loading[_0x3874ea(0x1ad)]!=0x64&&(_0x18ade0>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x18ade0>0x78*0x5&&!_0x21719e&&(_0x21719e=!![],logHistory(_0x3874ea(0x2ac),_0x3874ea(0x2e8)+loading[_0x3874ea(0x1be)][_0x3874ea(0x1a9)](',\x20')+_0x3874ea(0x2e1)),logHistory(_0x3874ea(0x2ac),_0x3874ea(0x160)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x55af12=_0x3874ea;process[_0x55af12(0x1fc)]({'stop':_0x55af12(0x209)},_0x2a6395=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3874ea(0x2ea)]=!![],emitLoadingProgress();break;}else _0x142fc4!=loading[_0x3874ea(0x1ad)]&&(_0x142fc4=loading[_0x3874ea(0x1ad)],emitLoadingProgress()),_0x18ade0++,await sleep(0xc8);}_0x251c71==_0x2fb9ee[_0x3874ea(0x1ca)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3874ea(0x1fc)]({'status':_0x3874ea(0x2c7),'live':_0x3874ea(0x1fa)},_0x1adb31=>{}),_0x21719e&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x48e6f4=_0x28000d;proxyEmit(_0x48e6f4(0x18e),{...emittedConfiguration(),'configstate':_0x48e6f4(0x280)});}function emitLoadingProgress(){const _0x29227d=_0x28000d;proxyEmit(_0x29227d(0x18b),loading);}async function getFiat(){const _0x161afe=_0x28000d;let _0x4cb299=global['ticker'][stablecoins[_0x161afe(0x21f)]['coin']],_0x5479f3=global[_0x161afe(0x20b)][stablecoins[_0x161afe(0x1d7)][_0x161afe(0x217)]];return{'eur':Number(_0x4cb299),'usd':Number(_0x5479f3)};}function capitalize(_0x2b00ee){const _0x5eec77=_0x28000d;return _0x2b00ee[_0x5eec77(0x2d1)](0x0,0x1)[_0x5eec77(0x268)]()+_0x2b00ee[_0x5eec77(0x2d1)](0x1);}function supportedExchanges(){const _0x44eaa7=_0x28000d,_0x215ebf=['ws','fetchTickers',_0x44eaa7(0x26d),_0x44eaa7(0x283),_0x44eaa7(0x265),_0x44eaa7(0x238),'createOrder',_0x44eaa7(0x1b8),_0x44eaa7(0x1ea),_0x44eaa7(0x27e)];let _0x518cb8=[],_0x4f4b26=[],_0x2bc9b6=ccxt[_0x44eaa7(0x233)][_0x44eaa7(0x241)];_0x2bc9b6['forEach'](_0x81fea1=>{try{const _0x3bd930=new ccxt['pro'][_0x81fea1]();_0x4f4b26['push'](_0x3bd930);}catch(_0x5e5faf){}}),_0x4f4b26[_0x44eaa7(0x2d8)](_0x5152ce=>{const _0x31abd3=_0x44eaa7;let _0x3ba58b=0x0;_0x215ebf[_0x31abd3(0x2d8)](_0x31768d=>{const _0x42eba6=_0x31abd3;_0x31768d in _0x5152ce['has']&&_0x5152ce[_0x42eba6(0x281)][_0x31768d]&&_0x3ba58b++;}),_0x3ba58b==_0x215ebf[_0x31abd3(0x1ca)]&&_0x518cb8[_0x31abd3(0x2ad)](capitalize(_0x5152ce['id']));});let _0x3ea61b=[];return _0x2bc9b6[_0x44eaa7(0x2d8)](_0x475dd5=>{const _0x574960=_0x44eaa7;_0x475dd5=capitalize(_0x475dd5);if(!_0x518cb8[_0x574960(0x21e)](_0x475dd5))_0x3ea61b[_0x574960(0x2ad)](_0x475dd5);}),_0x518cb8;}function setStartDatePerformance(){const _0x26f0d0=_0x28000d;if(config&&config[_0x26f0d0(0x185)][0x0][_0x26f0d0(0x2ec)][_0x26f0d0(0x1ca)]!=0x0){const _0x2b8b57=config[_0x26f0d0(0x185)][0x0][_0x26f0d0(0x2ec)];dbPerformance[_0x26f0d0(0x203)](_0x26f0d0(0x287))[_0x26f0d0(0x184)]({'date':config[_0x26f0d0(0x298)]})[_0x26f0d0(0x228)]({'coins':_0x2b8b57})[_0x26f0d0(0x1da)]();}}async function recreateCoinResults(){const _0x160b2e=_0x28000d;let _0x2f56e0,_0x275ef2=[];try{const _0x1627c7=fns['format'](fns[_0x160b2e(0x2b0)](config[_0x160b2e(0x298)][_0x160b2e(0x1f3)](/\//g,'-')),_0x160b2e(0x180));for(const _0x48bbff of currentCoins){if(_0x48bbff[_0x160b2e(0x217)]!=config[_0x160b2e(0x1f4)]){let _0xec723a=0x0,_0x3c7207,_0x152f85;_0x2f56e0=await getAllEventOrders(_0x48bbff[_0x160b2e(0x2c0)]);if(_0x2f56e0[_0x160b2e(0x1ca)]>0x0)_0x2f56e0[_0x160b2e(0x2d8)](_0x1a6f5c=>{const _0x57e38b=_0x160b2e,_0x4336c3=_0x48bbff[_0x57e38b(0x2c0)][_0x57e38b(0x21e)](config[_0x57e38b(0x1f4)]+'/');_0x275ef2[_0x57e38b(0x2ad)]({'datetime':_0x1a6f5c['datetime'],'coin':_0x48bbff[_0x57e38b(0x217)],'symbol':_0x48bbff[_0x57e38b(0x2c0)],'side':_0x1a6f5c[_0x57e38b(0x15d)],'reverse':_0x4336c3,'amount':formatResult(_0x1a6f5c['filled'],0x8),'filled':formatResult(_0x1a6f5c[_0x57e38b(0x29d)],0x8),'price':formatResult(_0x1a6f5c[_0x57e38b(0x299)],0x8)}),_0xec723a=_0x1a6f5c[_0x57e38b(0x15d)]==_0x57e38b(0x15f)?_0xec723a+_0x1a6f5c[_0x57e38b(0x29d)]:_0xec723a-_0x1a6f5c['filled'];if(!_0x152f85)_0x152f85=_0x1a6f5c['price'];});_0x3c7207=_0x48bbff[_0x160b2e(0x1d1)]-_0xec723a;let _0x3c4a5d;config[_0x160b2e(0x185)][_0x160b2e(0x2d8)](_0x3cd93e=>{const _0x20acf6=_0x160b2e;!_0x3c4a5d&&(_0x3c4a5d=_0x3cd93e[_0x20acf6(0x2ec)][_0x20acf6(0x184)](_0x10a1f6=>_0x10a1f6['coin']==_0x48bbff[_0x20acf6(0x217)]),_0x3c4a5d&&(_0x3c7207=_0x3c4a5d[_0x20acf6(0x1d1)],_0x152f85=_0x3c4a5d[_0x20acf6(0x299)]));});let _0x4eb4f8=dbCoinResults[_0x160b2e(0x203)](_0x160b2e(0x2a0))[_0x160b2e(0x184)]({'coin':_0x48bbff[_0x160b2e(0x217)]})['value']();_0x4eb4f8={'coin':_0x48bbff[_0x160b2e(0x217)],'number':_0x3c7207,'breakeven':_0x152f85,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x160b2e(0x2a0))['find']({'coin':_0x48bbff['coin']})[_0x160b2e(0x228)](_0x4eb4f8)[_0x160b2e(0x1da)]();}}_0x275ef2['sort']((_0x5b9955,_0x514de2)=>_0x5b9955[_0x160b2e(0x1ec)]>_0x514de2[_0x160b2e(0x1ec)]?0x1:_0x514de2['datetime']>_0x5b9955[_0x160b2e(0x1ec)]?-0x1:0x0);let _0x5f2696=0x0;for(let _0x4f1e35 of _0x275ef2){await updateCoinResults(_0x4f1e35,!![]);}}catch(_0x16ed87){await handleError(_0x16ed87,_0x160b2e(0x27f));}}async function getAllEventOrders(_0x5b22ff){const _0xb456be=_0x28000d;let _0x44f484=[],_0x282a1e=dbLogs[_0xb456be(0x203)](_0xb456be(0x1b6))[_0xb456be(0x1aa)](_0x211f1f=>{const _0x4eadc5=_0xb456be,_0x1e5e57=_0x211f1f[_0x4eadc5(0x1c4)][_0x4eadc5(0x26c)]();return _0x1e5e57[_0x4eadc5(0x21e)](_0x5b22ff[_0x4eadc5(0x26c)]())&&(_0x1e5e57[_0x4eadc5(0x21e)](_0x4eadc5(0x18c))&&_0x1e5e57['includes'](_0x4eadc5(0x191))||_0x1e5e57[_0x4eadc5(0x21e)](_0x4eadc5(0x29d))&&_0x1e5e57['includes'](_0x4eadc5(0x191)));})[_0xb456be(0x275)](_0xb456be(0x294))[_0xb456be(0x2bc)]();return _0x282a1e[_0xb456be(0x2d8)](_0x224abd=>{const _0x5a9818=_0xb456be,_0xf982c8=_0x224abd[_0x5a9818(0x1c4)][_0x5a9818(0x21e)](_0x5a9818(0x2b7))?_0x5a9818(0x2b7):'buy',_0x5b2c2f=/#([0-9]|\.)+\s/i,_0x556a72=Number(_0x5b2c2f[_0x5a9818(0x292)](_0x224abd['event'])[0x0][_0x5a9818(0x229)](0x1)),_0x520732=/@([0-9]|\.)+$/i,_0x317892=Number(_0x520732['exec'](_0x224abd[_0x5a9818(0x1c4)])[0x0][_0x5a9818(0x229)](0x1));_0x44f484[_0x5a9818(0x2ad)]({'datetime':_0x224abd['time'],'coin':symbolToCoin(_0x5b22ff),'symbol':_0x5b22ff,'side':_0xf982c8,'amount':_0x556a72,'filled':_0x556a72,'price':_0x317892});}),_0x44f484;}async function getAllOrders(_0x36a971,_0x12d50d){const _0x4888b7=_0x28000d;let _0x3efb28=[];while(_0x12d50d<exchange[_0x4888b7(0x28e)]()){const _0x11f09f=0x1f4;try{const _0xc048e8=await exchange['fetchClosedOrders'](_0x36a971,_0x12d50d,_0x11f09f);if(_0xc048e8['length'])_0x12d50d=_0xc048e8[_0xc048e8['length']-0x1][_0x4888b7(0x28f)]+0x1,_0x3efb28=_0x3efb28['concat'](_0xc048e8);else break;}catch(_0x3455c6){await handleError(_0x3455c6,_0x4888b7(0x1eb),_0x36a971);}}return _0x3efb28;}async function validate24hChanges(){const _0x11b6ca=_0x28000d;for(const _0xbe41b5 of currentCoins){if(_0xbe41b5[_0x11b6ca(0x217)]!=config['basecoin']){let _0xd4f3d6;_0xbe41b5['reverse']?_0xd4f3d6=formatResult((0x1/(global[_0x11b6ca(0x1df)][noslash(_0xbe41b5['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0xd4f3d6=global[_0x11b6ca(0x1df)][noslash(_0xbe41b5[_0x11b6ca(0x2c0)])],_0xd4f3d6<config[_0x11b6ca(0x1e7)]&&(logHistory(_0x11b6ca(0x2ac),_0xbe41b5[_0x11b6ca(0x217)]+_0x11b6ca(0x2df)+_0xd4f3d6+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5e217f,_0x956f16){const _0x85bddd=_0x28000d;if(!_0x5e217f)return!![];const _0x1ef8bb=_0x956f16['split']('.'),_0x4a47f5=_0x5e217f[_0x85bddd(0x20e)]('.');for(var _0x3bf0ff=0x0;_0x3bf0ff<_0x4a47f5[_0x85bddd(0x1ca)];_0x3bf0ff++){const _0x59c6e6=~~_0x4a47f5[_0x3bf0ff],_0x5dd6c5=~~_0x1ef8bb[_0x3bf0ff];if(_0x59c6e6<_0x5dd6c5)return!![];if(_0x59c6e6>_0x5dd6c5)return![];}return![];}async function oneTimeMigration(){const _0xab192b=_0x28000d;let _0x5be0d3=dbLogs['get'](_0xab192b(0x1a7))[_0xab192b(0x2bc)]();if(isOlderVersion(_0x5be0d3,_0xab192b(0x1a6))){let _0x2cc456=[];const _0x47ac99=dbLogs['get']('logs')[_0xab192b(0x2bc)]();_0x47ac99['forEach'](_0x40ade4=>{const _0x441842=_0xab192b;_0x2cc456[_0x441842(0x2ad)]({'time':_0x40ade4['time'],'type':_0x40ade4[_0x441842(0x1b1)],'event':_0x40ade4['event']});}),dbLogs['get'](_0xab192b(0x1b6))[_0xab192b(0x228)](_0x2cc456)[_0xab192b(0x1da)]();}let _0x5e436a=dbConfig[_0xab192b(0x203)](_0xab192b(0x1a7))['value']();if(isOlderVersion(_0x5e436a,_0xab192b(0x1a6))){let _0x3ecca4=dbConfig[_0xab192b(0x203)](_0xab192b(0x236))[_0xab192b(0x184)]({'botID':botID})[_0xab192b(0x2bc)]();if(_0x3ecca4){let _0x49eda7=[];_0x3ecca4[_0xab192b(0x1db)][_0xab192b(0x2d8)](_0x31e2c1=>{const _0x1a4005=_0xab192b;_0x49eda7[_0x1a4005(0x2ad)]({'coin':_0x31e2c1[_0x1a4005(0x217)],'number':_0x31e2c1[_0x1a4005(0x296)],'price':_0x31e2c1[_0x1a4005(0x2c9)]}),delete _0x31e2c1['startnumber'],delete _0x31e2c1[_0x1a4005(0x2c9)];});if(_0x49eda7['length']!==0x0)fs['writeFile'](configbackuppath+(_0xab192b(0x2de)+botID+'.json'),JSON[_0xab192b(0x225)](_0x49eda7,null,0x4),function(_0x55da4b){if(_0x55da4b){}});const _0x2bbad4=(_0x4f57d9,_0x50b817)=>{const _0x36fa2c=_0xab192b;let _0x34b92d=[];_0x50b817[_0x36fa2c(0x2d8)](_0x483a19=>{const _0x91d040=_0x36fa2c,_0x170a48=_0x4f57d9['find'](_0xd4fcd9=>_0xd4fcd9['coin']==_0x483a19[_0x91d040(0x217)]);if(!_0x170a48)_0x34b92d['push'](_0x483a19);});let _0x4bed0b=[];return _0x4f57d9['forEach'](_0x3bf20e=>{const _0x1731a2=_0x36fa2c,_0x245469=_0x50b817[_0x1731a2(0x184)](_0x5eac27=>_0x5eac27[_0x1731a2(0x217)]==_0x3bf20e[_0x1731a2(0x217)]);if(!_0x245469||_0x245469[_0x1731a2(0x1d1)]==0x0&&_0x3bf20e[_0x1731a2(0x1d1)]!=0x0)_0x4bed0b[_0x1731a2(0x2ad)](_0x3bf20e);}),{'missingDay1':_0x34b92d,'notInDay2':_0x4bed0b};},_0x5c5dc0=dbPerformance['get'](_0xab192b(0x287))[_0xab192b(0x19c)]()[_0xab192b(0x2bc)]();if(_0x5c5dc0[_0xab192b(0x1ca)]>0x1){const {missingDay1:_0x352cf4,notInDay2:_0x4499fd}=_0x2bbad4(_0x49eda7,_0x5c5dc0[0x1][_0xab192b(0x2a0)]);_0x49eda7=[..._0x49eda7,..._0x352cf4],_0x4499fd['forEach'](_0x29cffe=>{const _0x1cb7d4=_0xab192b;let _0x47986e=_0x49eda7['findIndex'](_0x12c602=>_0x12c602['coin']==_0x29cffe[_0x1cb7d4(0x217)]);_0x47986e!=-0x1&&_0x49eda7[_0x1cb7d4(0x23b)](_0x47986e,0x1);});}_0x49eda7[_0xab192b(0x208)]((_0x3b2971,_0x4d0900)=>_0x3b2971[_0xab192b(0x217)]>_0x4d0900['coin']?0x1:_0x4d0900['coin']>_0x3b2971[_0xab192b(0x217)]?-0x1:0x0);let _0x4400c5=[{'date':_0x3ecca4[_0xab192b(0x298)],'changes':_0x49eda7}];_0x5c5dc0[_0xab192b(0x1ca)]>0x2&&_0x5c5dc0[_0xab192b(0x2d8)]((_0xf5aed0,_0xd19430)=>{const _0x4400e3=_0xab192b;if(_0xd19430>0x0&&_0xd19430<_0x5c5dc0[_0x4400e3(0x1ca)]-0x1){const {missingDay1:_0x29ba4b,notInDay2:_0x47f1a2}=_0x2bbad4(_0x5c5dc0[_0xd19430][_0x4400e3(0x2a0)],_0x5c5dc0[_0xd19430+0x1][_0x4400e3(0x2a0)]);_0x49eda7=[],(_0x29ba4b[_0x4400e3(0x1ca)]!=0x0||_0x47f1a2['length']!=0x0)&&(_0x29ba4b['length']!=0x0&&_0x49eda7[_0x4400e3(0x2ad)](..._0x29ba4b),_0x47f1a2[_0x4400e3(0x1ca)]!=0x0&&(_0x47f1a2[_0x4400e3(0x2d8)](_0x245c5e=>{const _0x3f98fc=_0x4400e3;_0x245c5e[_0x3f98fc(0x1d1)]=-_0x245c5e['number'];}),_0x49eda7[_0x4400e3(0x2ad)](..._0x47f1a2)),_0x49eda7[_0x4400e3(0x208)]((_0x333589,_0x7939de)=>_0x333589[_0x4400e3(0x217)]>_0x7939de[_0x4400e3(0x217)]?0x1:_0x7939de[_0x4400e3(0x217)]>_0x333589['coin']?-0x1:0x0),_0x4400c5['push']({'date':_0x5c5dc0[_0xd19430+0x1][_0x4400e3(0x2a1)],'changes':_0x49eda7}));}}),dbConfig[_0xab192b(0x203)](_0xab192b(0x236))[_0xab192b(0x184)]({'botID':botID})['assign']({..._0x3ecca4,'liquidity':_0x4400c5})[_0xab192b(0x1da)]();}}if(isOlderVersion(_0x5e436a,_0xab192b(0x237))){let _0x4e2005=dbConfig['get'](_0xab192b(0x236))[_0xab192b(0x184)]({'botID':botID})[_0xab192b(0x2bc)]();if(_0x4e2005){const _0x29e1f7=_0x4e2005['exchange'],_0x57fdcc=_0x29e1f7?capitalize(_0x29e1f7):_0xab192b(0x187);dbConfig[_0xab192b(0x203)](_0xab192b(0x236))['find']({'botID':botID})[_0xab192b(0x228)]({'exchange':_0x57fdcc})[_0xab192b(0x1da)]();}}let _0x58259b=dbPerformance[_0xab192b(0x203)]('version')[_0xab192b(0x2bc)]();isOlderVersion(_0x58259b,_0xab192b(0x1a6))&&setStartDatePerformance();let _0x434592=dbCoinResults[_0xab192b(0x203)](_0xab192b(0x1a7))[_0xab192b(0x2bc)]();if(isOlderVersion(_0x434592,'2.5.0')){let _0x196c0e=dbCoinResults[_0xab192b(0x203)]('coins')['value']();if(_0x196c0e[_0xab192b(0x1ca)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2fc0a9=_0x28000d;dbConfig[_0x2fc0a9(0x223)](_0x2fc0a9(0x1a7),serverversion)['write'](),dbPerformance[_0x2fc0a9(0x223)](_0x2fc0a9(0x1a7),serverversion)[_0x2fc0a9(0x1da)](),dbLogs['set']('version',serverversion)[_0x2fc0a9(0x1da)](),dbCoinResults[_0x2fc0a9(0x223)](_0x2fc0a9(0x1a7),serverversion)[_0x2fc0a9(0x1da)]();}function getConfiguration(_0x440969){const _0x9da1dc=_0x28000d;let _0x34b720=dbConfig[_0x9da1dc(0x203)](_0x9da1dc(0x236))[_0x9da1dc(0x184)]({'botID':_0x440969})[_0x9da1dc(0x2bc)]();if(_0x34b720){let _0x1d7e9c=![];typeof _0x34b720[_0x9da1dc(0x1ba)]==_0x9da1dc(0x17a)&&(_0x34b720={..._0x34b720,'threshold':Number(_0x34b720[_0x9da1dc(0x1ba)])},_0x1d7e9c=!![]),_0x34b720[_0x9da1dc(0x1e7)]==undefined&&(_0x34b720={..._0x34b720,'change24h':-0x14},_0x1d7e9c=!![]),_0x34b720[_0x9da1dc(0x26f)]==undefined&&(_0x34b720={..._0x34b720,'fiat':'USD'},_0x1d7e9c=!![]),_0x34b720['onepagemode']==undefined&&(_0x34b720={..._0x34b720,'onepagemode':settings[_0x9da1dc(0x1bc)]},_0x1d7e9c=!![]),_0x34b720[_0x9da1dc(0x1b3)]==undefined&&(_0x34b720={..._0x34b720,'colorscheme':_0x9da1dc(0x24f)},_0x1d7e9c=!![]),_0x34b720[_0x9da1dc(0x248)]==undefined&&(_0x34b720={..._0x34b720,'autoliquidity':!![]},_0x1d7e9c=!![]),_0x1d7e9c&&(_0x34b720={'botID':_0x34b720['botID'],'exchange':_0x34b720[_0x9da1dc(0x1b9)],'apiKey':_0x34b720[_0x9da1dc(0x165)],'apiSecret':_0x34b720[_0x9da1dc(0x252)],'apiPassword':_0x34b720[_0x9da1dc(0x231)],'basecoin':_0x34b720[_0x9da1dc(0x1f4)],'botname':_0x34b720['botname'],'showname':_0x34b720[_0x9da1dc(0x1a1)],'threshold':_0x34b720['threshold'],'ordertype':_0x34b720[_0x9da1dc(0x20a)],'timeout':_0x34b720[_0x9da1dc(0x1e3)],'fiat':_0x34b720[_0x9da1dc(0x26f)],'startdate':_0x34b720['startdate'],'recreate':_0x34b720[_0x9da1dc(0x162)],'timeshift':_0x34b720[_0x9da1dc(0x2d3)],'onepagemode':_0x34b720[_0x9da1dc(0x1bc)],'headless':_0x34b720[_0x9da1dc(0x1b0)],'cooldown':_0x34b720[_0x9da1dc(0x220)],'change24h':_0x34b720[_0x9da1dc(0x1e7)],'emojibuy':_0x34b720[_0x9da1dc(0x259)],'emojisell':_0x34b720[_0x9da1dc(0x27d)],'colorscheme':_0x34b720[_0x9da1dc(0x1b3)],'portfolio':_0x34b720['portfolio'],'autoliquidity':_0x34b720['autoliquidity'],'liquidity':_0x34b720['liquidity'],'openOrders':_0x34b720[_0x9da1dc(0x2a9)]},dbConfig[_0x9da1dc(0x203)](_0x9da1dc(0x236))[_0x9da1dc(0x24a)]()[_0x9da1dc(0x1da)](),dbConfig[_0x9da1dc(0x203)](_0x9da1dc(0x236))[_0x9da1dc(0x2ad)](_0x34b720)['write']());}else _0x34b720={'botID':_0x440969,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x9da1dc(0x1bb)+_0x440969,'showname':![],'threshold':0x3,'ordertype':_0x9da1dc(0x18c),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x9da1dc(0x2d3)],'onepagemode':settings[_0x9da1dc(0x1bc)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x9da1dc(0x24f),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x34b720;}function emittedConfiguration(){const _0x5ef200=_0x28000d;let _0x56694a;if(config[_0x5ef200(0x165)]=='')_0x56694a={...config,'configstate':_0x5ef200(0x172)};else config[_0x5ef200(0x165)]=='***'?_0x56694a={...config,'configstate':_0x5ef200(0x219)}:(_0x56694a={...config,'apiKey':'************','apiSecret':_0x5ef200(0x199)},config[_0x5ef200(0x231)]&&(_0x56694a[_0x5ef200(0x231)]=_0x5ef200(0x199)));return _0x56694a;}function getSettings(){const _0x57f477=_0x28000d;return dbSettings[_0x57f477(0x203)](_0x57f477(0x2be))[_0x57f477(0x2bc)]();}function getSecure(){const _0xf6365d=_0x28000d;return dbSecure[_0xf6365d(0x203)](_0xf6365d(0x1a8))[_0xf6365d(0x2bc)]()||{};}function updateTimeshift(_0x6f835f){const _0x280138=_0x28000d;let _0x4ad751=dbConfig[_0x280138(0x203)](_0x280138(0x236))[_0x280138(0x184)]({'botID':botID})['value']();_0x4ad751&&dbConfig[_0x280138(0x203)](_0x280138(0x236))[_0x280138(0x184)]({'botID':botID})[_0x280138(0x228)]({'timeshift':_0x6f835f})['write'](),config[_0x280138(0x2d3)]=_0x6f835f,proxyEmit(_0x280138(0x18e),emittedConfiguration());}function updateOnepagemode(_0x1de69c){const _0x4f28eb=_0x28000d;let _0x3300b5=dbConfig[_0x4f28eb(0x203)](_0x4f28eb(0x236))[_0x4f28eb(0x184)]({'botID':botID})[_0x4f28eb(0x2bc)]();_0x3300b5&&dbConfig[_0x4f28eb(0x203)](_0x4f28eb(0x236))[_0x4f28eb(0x184)]({'botID':botID})[_0x4f28eb(0x228)]({'onepagemode':_0x1de69c})[_0x4f28eb(0x1da)](),config['onepagemode']=_0x1de69c,proxyEmit(_0x4f28eb(0x18e),emittedConfiguration());}async function storeConfiguration(_0x2e729a){const _0x4924b5=_0x28000d;logger[_0x4924b5(0x1ac)](_0x4924b5(0x212));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4924b5(0x1ac)](_0x4924b5(0x244));let _0x1efa42=![],_0xaaa2a6=![],_0x48a6b8=[];_0x2e729a[_0x4924b5(0x1db)]['forEach'](_0x545877=>{const _0x54c314=_0x4924b5;if(!_0x545877[_0x54c314(0x2b3)]&&_0x545877[_0x54c314(0x217)]!=_0x2e729a[_0x54c314(0x1f4)])_0x48a6b8[_0x54c314(0x2ad)](_0x545877[_0x54c314(0x2c0)]);}),_0x48a6b8['forEach'](_0x2840b6=>{const _0x413b4e=_0x4924b5,_0x22ea6b=currentCoins['find'](_0x45122d=>_0x45122d[_0x413b4e(0x2c0)]==_0x2840b6);!_0x22ea6b&&(_0x1efa42=!![]);}),currentCoins[_0x4924b5(0x2d8)](_0x5cf937=>{const _0x2c43b3=_0x4924b5;if(_0x5cf937[_0x2c43b3(0x217)]!=config[_0x2c43b3(0x1f4)]){const _0x156b9c=_0x48a6b8['find'](_0x46c642=>_0x46c642==_0x5cf937[_0x2c43b3(0x2c0)]);!_0x156b9c&&(_0x1efa42=!![]);}}),_0x2e729a['portfolio'][_0x4924b5(0x2d8)](_0x511f8c=>{const _0x455281=_0x4924b5,_0x1b1c52=config['portfolio'][_0x455281(0x184)](_0x21f264=>_0x21f264[_0x455281(0x217)]==_0x511f8c['coin']);if(_0x1b1c52&&_0x511f8c[_0x455281(0x2ba)]!=_0x1b1c52[_0x455281(0x2ba)])_0xaaa2a6=!![];});let _0x3b73b6=dbConfig[_0x4924b5(0x203)]('bot')[_0x4924b5(0x184)]({'botID':botID})['value']();_0x2e729a={..._0x2e729a,'apiKey':crypt[_0x4924b5(0x18a)](secure[_0x4924b5(0x174)],_0x2e729a[_0x4924b5(0x165)])[_0x4924b5(0x2b5)],'apiSecret':crypt['decrypt'](secure[_0x4924b5(0x174)],_0x2e729a[_0x4924b5(0x252)])[_0x4924b5(0x2b5)]};_0x2e729a[_0x4924b5(0x231)]&&(_0x2e729a[_0x4924b5(0x231)]=crypt['decrypt'](secure['privateKey'],_0x2e729a[_0x4924b5(0x231)])[_0x4924b5(0x2b5)]);let _0x3324a3=![];if(_0x3b73b6){_0x2e729a['apiKey']==_0x4924b5(0x199)?_0x2e729a[_0x4924b5(0x165)]=config['apiKey']:_0x3324a3=!![];_0x2e729a['apiSecret']==_0x4924b5(0x199)?_0x2e729a[_0x4924b5(0x252)]=config['apiSecret']:_0x3324a3=!![];if(_0x2e729a['apiPassword']==_0x4924b5(0x199))_0x2e729a['apiPassword']=config['apiPassword'];else{if(_0x2e729a[_0x4924b5(0x231)])_0x3324a3=!![];}dbConfig[_0x4924b5(0x203)](_0x4924b5(0x236))[_0x4924b5(0x184)]({'botID':botID})[_0x4924b5(0x228)](_0x2e729a)[_0x4924b5(0x1da)]();}else dbConfig['get'](_0x4924b5(0x236))[_0x4924b5(0x2ad)](_0x2e729a)[_0x4924b5(0x1da)](),_0x3324a3=!![],process[_0x4924b5(0x1fc)]({'status':_0x4924b5(0x2c7),'live':_0x4924b5(0x1fa)},_0x388da9=>{});process[_0x4924b5(0x1fc)]({'botname':_0x2e729a['botname']},_0x56a53f=>{}),config={..._0x2e729a},updateBotManager(),proxyEmit(_0x4924b5(0x264)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3324a3)await reset(!![]);else _0x1efa42||_0xaaa2a6?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x4924b5(0x1ac)](_0x4924b5(0x2ae));}async function storeHeadless(_0x19fd21){const _0x149f7c=_0x28000d,_0xda065f={...config,'headless':_0x19fd21[_0x149f7c(0x1b0)]};let _0x44122d=dbConfig[_0x149f7c(0x203)](_0x149f7c(0x236))[_0x149f7c(0x184)]({'botID':botID})['value']();_0x44122d&&dbConfig[_0x149f7c(0x203)](_0x149f7c(0x236))[_0x149f7c(0x184)]({'botID':botID})[_0x149f7c(0x228)](_0xda065f)[_0x149f7c(0x1da)](),config={..._0xda065f},updateBotManager(),proxyEmit(_0x149f7c(0x18e),emittedConfiguration());}async function storeFiat(_0x2e2f11){const _0x57a84a=_0x28000d,_0x5737e6={...config,'fiat':_0x2e2f11};let _0x1cd4fc=dbConfig[_0x57a84a(0x203)]('bot')[_0x57a84a(0x184)]({'botID':botID})['value']();_0x1cd4fc&&dbConfig[_0x57a84a(0x203)](_0x57a84a(0x236))['find']({'botID':botID})[_0x57a84a(0x228)](_0x5737e6)[_0x57a84a(0x1da)](),config={..._0x5737e6},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5a7264=_0x28000d;logger['full'](_0x5a7264(0x2e2));try{if(fs[_0x5a7264(0x1c8)](path[_0x5a7264(0x1a9)](configpath,_0x5a7264(0x270)+botID+'-events.json')))fs[_0x5a7264(0x177)](path[_0x5a7264(0x1a9)](configpath,_0x5a7264(0x270)+botID+_0x5a7264(0x2b9)));if(fs[_0x5a7264(0x1c8)](path[_0x5a7264(0x1a9)](configpath,'bot-'+botID+_0x5a7264(0x2ce))))fs[_0x5a7264(0x177)](path[_0x5a7264(0x1a9)](configpath,_0x5a7264(0x270)+botID+_0x5a7264(0x2ce)));if(fs['existsSync'](path[_0x5a7264(0x1a9)](configpath,_0x5a7264(0x270)+botID+_0x5a7264(0x27b))))fs[_0x5a7264(0x177)](path[_0x5a7264(0x1a9)](configpath,_0x5a7264(0x270)+botID+_0x5a7264(0x27b)));}catch(_0x2a8372){if(_0x2a8372)logger[_0x5a7264(0x201)]('Error\x20while\x20deleting\x20files:\x20',_0x2a8372);}const _0x5aa812=getDate();let _0x6f0c67=[];currentCoins[_0x5a7264(0x2d8)](_0xd0bcf7=>{const _0x5886ba=_0x5a7264;_0x6f0c67['push']({'coin':_0xd0bcf7['coin'],'number':_0xd0bcf7[_0x5886ba(0x1d1)],'price':_0xd0bcf7[_0x5886ba(0x15e)]});});let _0x3822dd=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x3822dd&&(dbConfig['get'](_0x5a7264(0x236))['find']({'botID':botID})[_0x5a7264(0x228)]({'liquidity':[{'date':_0x5aa812,'changes':_0x6f0c67}]})['write'](),config[_0x5a7264(0x185)]=[]),process[_0x5a7264(0x1fc)]({'stop':_0x5a7264(0x209)},_0x4fbb07=>{});}function noslash(_0x45d6ba){const _0x5b0be6=_0x28000d;return _0x45d6ba[_0x5b0be6(0x1f3)]('/','');}function updateHighestFee(_0x2d2abc){const _0x10e2e7=_0x28000d;if(_0x2d2abc[_0x10e2e7(0x194)]){let _0x3b3c91={'filled':_0x2d2abc[_0x10e2e7(0x29d)]*_0x2d2abc['price'],'amount':_0x2d2abc[_0x10e2e7(0x29d)]*_0x2d2abc['price'],'side':_0x2d2abc['side']==_0x10e2e7(0x2b7)?_0x10e2e7(0x15f):_0x10e2e7(0x2b7),'price':0x1/_0x2d2abc['price']};_0x2d2abc={..._0x2d2abc,..._0x3b3c91};}const _0x34906d=defaultFee*_0x2d2abc[_0x10e2e7(0x29d)]*_0x2d2abc[_0x10e2e7(0x299)];lastFees['recent20'][_0x10e2e7(0x1ca)]===0x14&&lastFees[_0x10e2e7(0x164)][_0x10e2e7(0x15c)](),lastFees[_0x10e2e7(0x164)][_0x10e2e7(0x2ad)](_0x34906d),lastFees[_0x10e2e7(0x1bd)]=Math[_0x10e2e7(0x1fb)](...lastFees[_0x10e2e7(0x164)]);}async function updateNumberCoinsCcxt(_0x583d92){const _0x1dbef8=_0x28000d;logger[_0x1dbef8(0x1ac)](_0x1dbef8(0x274)+_0x583d92['symbol']+'\x20|\x20'+_0x583d92[_0x1dbef8(0x214)]+_0x1dbef8(0x2ee)+_0x583d92[_0x1dbef8(0x29d)]+_0x1dbef8(0x23c)+_0x583d92['amount']+_0x1dbef8(0x2ee)+_0x583d92['id']);let _0x570b89=_0x583d92[_0x1dbef8(0x214)],_0x5c8fdd=![];currentCoins[_0x1dbef8(0x2d8)](_0x16a084=>{_0x16a084['symbol']==_0x583d92['symbol']&&(_0x5c8fdd=!![]);});if(!_0x5c8fdd)return;const _0x528e7e=currentCoins[_0x1dbef8(0x184)](_0x58bea3=>_0x58bea3['symbol']==_0x583d92[_0x1dbef8(0x2c0)]),_0x397223=_0xf1ab22=>{const _0x207452=_0x1dbef8;if(_0x528e7e)_0x528e7e[_0x207452(0x295)]=_0xf1ab22;};if(_0x570b89==_0x1dbef8(0x179))_0x397223(_0x1dbef8(0x179));else{if(_0x570b89==_0x1dbef8(0x1d4)){_0x397223(_0x1dbef8(0x1d4));const _0x36d9e3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x36d9e3,await getOpenOrders(),handleOpenOrders();}else{if(_0x570b89==_0x1dbef8(0x242)){let _0x16704a=![];if(lastOrders)for(const _0x2843f1 of lastOrders){const _0x46445c=0xc8,_0x5a582f=0x1388;let _0xbef1b=0x0;while(!_0x2843f1[_0x1dbef8(0x1c2)]&&_0xbef1b*_0x46445c<_0x5a582f){_0xbef1b++,await sleep(_0x46445c);}if(_0xbef1b>0x0)logger['debug'](_0x1dbef8(0x171)+_0xbef1b*_0x46445c/0x3e8+_0x1dbef8(0x26a));if(_0x2843f1[_0x1dbef8(0x1c2)]==_0x583d92['id']){logger[_0x1dbef8(0x1ac)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x583d92['id']),_0x16704a=!![];if(_0x2843f1['filled']==0x0){logger[_0x1dbef8(0x1ac)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x583d92['id']);if(_0x583d92['average'])_0x2843f1[_0x1dbef8(0x299)]=_0x583d92[_0x1dbef8(0x2a2)];else{if(_0x583d92['price'])_0x2843f1['price']=_0x583d92[_0x1dbef8(0x299)];else{}}_0x2843f1[_0x1dbef8(0x29d)]=_0x583d92['filled'],updateHighestFee(_0x2843f1),_0x397223('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x1dbd58=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1dbd58;}_0x2843f1[_0x1dbef8(0x1cf)]={'currency':_0x583d92['fee']?_0x583d92[_0x1dbef8(0x1cf)][_0x1dbef8(0x2ef)]:null,'cost':_0x583d92[_0x1dbef8(0x1cf)]?_0x583d92[_0x1dbef8(0x1cf)][_0x1dbef8(0x2ab)]:0x0},await updateCoinResults(_0x2843f1);}}}if(!_0x16704a){logger[_0x1dbef8(0x1ac)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x583d92['id']),_0x397223(_0x1dbef8(0x29d));const _0xf18cb9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xf18cb9,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x402ce0=JSON[_0x1dbef8(0x197)](lastBalances['portfolio']);const _0x2891eb=_0x402ce0[_0x1dbef8(0x184)](_0x1351ae=>_0x1351ae['symbol']==_0x583d92[_0x1dbef8(0x2c0)]);if(_0x2891eb){if(_0x570b89==_0x1dbef8(0x179))_0x2891eb[_0x1dbef8(0x295)]=_0x2891eb[_0x1dbef8(0x295)]==_0x1dbef8(0x29d)?_0x1dbef8(0x29d):_0x1dbef8(0x179);else{if(_0x570b89==_0x1dbef8(0x1d4))_0x2891eb['orderstatus']=_0x2891eb[_0x1dbef8(0x295)]==_0x1dbef8(0x29d)?_0x1dbef8(0x29d):_0x1dbef8(0x1d4);else _0x570b89==_0x1dbef8(0x242)&&(_0x2891eb[_0x1dbef8(0x295)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x1dbef8(0x225)](_0x402ce0)},proxyEmit(_0x1dbef8(0x1a4),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xf09fb0=_0x28000d;await getOpenOrders();let _0x4c9faa=![];currentCoins[_0xf09fb0(0x2d8)](_0x455903=>{const _0xc5958e=_0xf09fb0;_0x4c9faa=allOpenOrders[_0xc5958e(0x184)](_0x3275df=>_0x3275df[_0xc5958e(0x2c0)]==_0x455903[_0xc5958e(0x2c0)]),_0x455903[_0xc5958e(0x295)]=_0x4c9faa?_0xc5958e(0x179):_0xc5958e(0x1dd);});}async function getCoins(_0x281d89=0x0,_0x3542d2=!![],_0x109f06=config[_0x28000d(0x1f4)]){const _0x214d9d=_0x28000d;let _0x2c1d13,_0x16a897=[],_0x2965c9=[],_0x489af9=[];if(_0x281d89)await sleep(_0x281d89);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2c1d13=await exchange[_0x214d9d(0x27e)](),mybalances=_0x2c1d13[_0x214d9d(0x196)];for(const [_0x26fd5b,_0x440172]of Object[_0x214d9d(0x2c8)](mybalances)){_0x489af9[_0x214d9d(0x2ad)](_0x26fd5b);}config[_0x214d9d(0x1db)]['forEach'](_0x2e9754=>{const _0x5ec816=_0x214d9d;!_0x489af9[_0x5ec816(0x21e)](_0x2e9754['coin'])&&(mybalances[_0x2e9754['coin']]=0x0);});if(_0x109f06=='')for(const [_0x2e1f86,_0x41e00a]of Object[_0x214d9d(0x2c8)](mybalances)){_0x41e00a!=0x0&&_0x16a897[_0x214d9d(0x2ad)]({'coin':_0x2e1f86});}else{let _0xb0b254=![];for(const [_0x4d8526,_0x2d22c2]of Object[_0x214d9d(0x2c8)](mybalances)){const _0x4d8383=config[_0x214d9d(0x1db)][_0x214d9d(0x184)](_0xc7d060=>_0xc7d060[_0x214d9d(0x217)]==_0x4d8526),_0x4ac3f0=_0x4d8526+'/'+_0x109f06,_0x9e67b3=_0x109f06+'/'+_0x4d8526,_0x8bf199=currentCoins[_0x214d9d(0x184)](_0x404cf7=>_0x404cf7[_0x214d9d(0x217)]==_0x4d8526);_0xb0b254=![];if((_0x2d22c2!=0x0||_0x4d8383)&&(allSymbols[_0x214d9d(0x21e)](_0x4ac3f0)||_0x4d8526==_0x109f06))_0x16a897[_0x214d9d(0x2ad)]({'coin':_0x4d8526,'symbol':_0x4ac3f0,'reverse':![],'number':Math['max'](_0x2d22c2+(_0x4d8383&&_0x4d8383[_0x214d9d(0x2ba)]||0x0),0x0),'orderstatus':_0x8bf199?_0x8bf199[_0x214d9d(0x295)]:_0x214d9d(0x1dd)});else{if((_0x2d22c2!=0x0||_0x4d8383)&&allSymbols['includes'](_0x9e67b3))_0x16a897[_0x214d9d(0x2ad)]({'coin':_0x4d8526,'symbol':_0x9e67b3,'reverse':!![],'number':Math[_0x214d9d(0x1fb)](_0x2d22c2+(_0x4d8383&&_0x4d8383[_0x214d9d(0x2ba)]||0x0),0x0),'orderstatus':_0x8bf199?_0x8bf199[_0x214d9d(0x295)]:_0x214d9d(0x1dd)});else _0x4d8383&&_0x16a897[_0x214d9d(0x2ad)]({'coin':_0x4d8383[_0x214d9d(0x217)],'symbol':_0x4d8383[_0x214d9d(0x2c0)],'reverse':_0x4d8383[_0x214d9d(0x194)],'number':0x0,'orderstatus':_0x214d9d(0x1dd)});}}}}catch(_0x326226){if(!_0x3542d2)handleErrorNoStop(_0x326226,_0x214d9d(0x291));else await handleError(_0x326226,'getCoins()');}return _0x2965c9=cloneDeep(_0x16a897),_0x16a897=_0x16a897['filter'](_0x24b696=>{const _0x211d40=_0x214d9d,_0x1a991d=config[_0x211d40(0x1db)]['find'](_0x17c7d3=>_0x17c7d3['coin']==_0x24b696['coin']);return _0x1a991d&&!_0x1a991d['excluded'];}),[_0x16a897,_0x2965c9];}async function getCoinNumber(_0x539ed6){const _0x3dcd47=_0x28000d;let _0x2667a6;try{const _0x1be968=await exchange[_0x3dcd47(0x27e)]();_0x2667a6=_0x1be968[_0x3dcd47(0x196)][_0x539ed6];}catch(_0x3f977a){await handleError(_0x3f977a,_0x3dcd47(0x1ce));}return _0x2667a6;}async function getOpenOrders(){const _0x1ab421=_0x28000d;let _0x5ae862;allOpenOrders=[];try{for(const _0xeceed5 of config[_0x1ab421(0x1db)]){!_0xeceed5[_0x1ab421(0x2b3)]&&_0xeceed5[_0x1ab421(0x217)]!=config[_0x1ab421(0x1f4)]&&(_0x5ae862=await exchange['fetchOpenOrders'](_0xeceed5[_0x1ab421(0x2c0)]),_0x5ae862[_0x1ab421(0x1ca)]>0x0&&allOpenOrders[_0x1ab421(0x2ad)](_0x5ae862[0x0]));}}catch(_0x243e39){await handleError(_0x243e39,_0x1ab421(0x216));}}async function handleOpenOrders(_0x368950=0x0){const _0x431cd4=_0x28000d;allOpenOrders[_0x431cd4(0x1ca)]==0x0&&lockOrders==ORDERS[_0x431cd4(0x1a3)]&&allOrdersPlaced&&(_0x368950==0x0?(logger[_0x431cd4(0x1ac)](_0x431cd4(0x1f8)),_0x368950++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x431cd4(0x2a3))));}async function testAPI(_0x573bb6){const _0x327bbe=_0x28000d,_0x1d5b4d=ccxt[_0x327bbe(0x233)][_0x573bb6[_0x327bbe(0x1b9)][_0x327bbe(0x26c)]()],_0x587258=new _0x1d5b4d({'apiKey':_0x573bb6[_0x327bbe(0x165)],'secret':_0x573bb6[_0x327bbe(0x252)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x573bb6[_0x327bbe(0x231)])_0x587258[_0x327bbe(0x226)]=_0x573bb6[_0x327bbe(0x231)];try{await _0x587258[_0x327bbe(0x29b)]();}catch(_0x491de0){throw _0x491de0;}}function cloneDeep(_0x107059){const _0x43594a=_0x28000d;return JSON[_0x43594a(0x197)](JSON[_0x43594a(0x225)](_0x107059));}async function getPortfolio(_0x31c32f){const _0x13c99a=_0x28000d;let _0x59ebd3=[],_0x1544cb=[],_0x181842=[],_0x3d64d4;if(_0x31c32f[_0x13c99a(0x165)]!==_0x13c99a(0x199)||_0x31c32f[_0x13c99a(0x252)]!=='************'||_0x31c32f['apiPassword']&&_0x31c32f['apiPassword']!==_0x13c99a(0x199)){if(config[_0x13c99a(0x1b9)]){if(_0x31c32f[_0x13c99a(0x165)]==_0x13c99a(0x199))_0x31c32f['apiKey']=config['apiKey'];if(_0x31c32f['apiSecret']==_0x13c99a(0x199))_0x31c32f[_0x13c99a(0x252)]=config['apiSecret'];if(_0x31c32f[_0x13c99a(0x231)]==_0x13c99a(0x199))_0x31c32f[_0x13c99a(0x231)]=config['apiPassword'];try{await testAPI(_0x31c32f);}catch(_0x2ecbc3){if(_0x2ecbc3[_0x13c99a(0x272)]()['includes'](_0x13c99a(0x1c9))){logger[_0x13c99a(0x1ac)](_0x13c99a(0x2da)),proxyEmit(_0x13c99a(0x1db),![]);return;}else{handleError(_0x2ecbc3,'getPortfolio(0)');return;}}}await initExchange(_0x31c32f[_0x13c99a(0x1b9)],_0x31c32f[_0x13c99a(0x165)],_0x31c32f[_0x13c99a(0x252)],_0x31c32f[_0x13c99a(0x231)]);try{await loadSymbols();}catch(_0x432245){if(_0x432245[_0x13c99a(0x272)]()[_0x13c99a(0x21e)]('AuthenticationError')){proxyEmit(_0x13c99a(0x1db),![]);return;}else{handleError(_0x432245,_0x13c99a(0x234));return;}}const _0x59947d=await getCoins(0x0,![],_0x31c32f[_0x13c99a(0x1f4)]);_0x181842=cloneDeep(_0x59947d[0x1]);}else{const _0x5a1076=await getCoins();_0x181842=cloneDeep(_0x5a1076[0x1]);}if(_0x31c32f[_0x13c99a(0x1f4)]=='')proxyEmit(_0x13c99a(0x1db),_0x181842);else{_0x181842[_0x13c99a(0x2d8)](_0x16b348=>{const _0x497576=_0x13c99a;if(_0x16b348[_0x497576(0x217)]!=_0x31c32f[_0x497576(0x1f4)]&&allSymbols[_0x497576(0x21e)](_0x16b348['symbol']))_0x59ebd3[_0x497576(0x2ad)](_0x16b348[_0x497576(0x2c0)]);});if(_0x59ebd3[_0x13c99a(0x1ca)]==0x0)logHistory(_0x13c99a(0x2ac),_0x13c99a(0x2cd));else{try{_0x1544cb=await getTickers(_0x59ebd3);}catch(_0x1efe33){if(_0x1efe33[_0x13c99a(0x272)]()[_0x13c99a(0x21e)]('AuthenticationError')){proxyEmit(_0x13c99a(0x1db),![]);return;}else handleError(_0x1efe33,_0x13c99a(0x28c));}_0x181842[_0x13c99a(0x2d8)](_0x351721=>{const _0x19903b=_0x13c99a;_0x351721[_0x19903b(0x217)]!=_0x31c32f[_0x19903b(0x1f4)]?_0x1544cb[_0x351721[_0x19903b(0x2c0)]]?_0x3d64d4=_0x351721[_0x19903b(0x194)]?0x1/_0x1544cb[_0x351721[_0x19903b(0x2c0)]][_0x19903b(0x15e)]:_0x1544cb[_0x351721[_0x19903b(0x2c0)]][_0x19903b(0x15e)]:_0x3d64d4=0x0:_0x3d64d4=0x1,_0x351721[_0x19903b(0x299)]=formatResult(_0x3d64d4,0x8);}),proxyEmit(_0x13c99a(0x1db),_0x181842);}}}function truncateTradeAmount(_0x332b50,_0x522483){let _0xe133db=0x0;try{_0xe133db=exchange['amountToPrecision'](_0x332b50,_0x522483);}catch(_0x2699b1){}return _0xe133db;}function checkMinimums(_0x3cc7f0){const _0x1a7b2a=_0x28000d;let _0xda153b=!![];const _0xc50302=!_0x3cc7f0[_0x1a7b2a(0x194)]?markets[_0x3cc7f0[_0x1a7b2a(0x2c0)]][_0x1a7b2a(0x25c)][_0x1a7b2a(0x2e3)][_0x1a7b2a(0x188)]:markets[_0x3cc7f0[_0x1a7b2a(0x2c0)]][_0x1a7b2a(0x25c)][_0x1a7b2a(0x2ab)][_0x1a7b2a(0x188)],_0x571188=!_0x3cc7f0[_0x1a7b2a(0x194)]?markets[_0x3cc7f0[_0x1a7b2a(0x2c0)]][_0x1a7b2a(0x25c)][_0x1a7b2a(0x2ab)]['min']:markets[_0x3cc7f0[_0x1a7b2a(0x2c0)]][_0x1a7b2a(0x25c)]['amount'][_0x1a7b2a(0x188)],_0x4330b3=truncateTradeAmount(_0x3cc7f0[_0x1a7b2a(0x2c0)],_0x3cc7f0[_0x1a7b2a(0x1a5)]);_0x3cc7f0[_0x1a7b2a(0x1a5)]=_0x4330b3;if(Math[_0x1a7b2a(0x240)](_0x4330b3)<_0xc50302)_0xda153b=![];if(Math[_0x1a7b2a(0x240)](_0x4330b3)*_0x3cc7f0[_0x1a7b2a(0x15e)]<_0x571188)_0xda153b=![];if(_0x3cc7f0['side']==_0x1a7b2a(0x2b7)){let _0xabc28d=config['portfolio'][_0x1a7b2a(0x184)](_0x4eec81=>_0x4eec81[_0x1a7b2a(0x217)]==_0x3cc7f0[_0x1a7b2a(0x217)]);if(_0xabc28d[_0x1a7b2a(0x2ba)]>0x0){if(Math['abs'](_0x4330b3)>_0x3cc7f0[_0x1a7b2a(0x1d1)]-_0xabc28d[_0x1a7b2a(0x2ba)])_0xda153b=![];}else{if(Math['abs'](_0x4330b3)>_0x3cc7f0[_0x1a7b2a(0x1d1)])_0xda153b=![];}}if(_0x3cc7f0['side']==_0x1a7b2a(0x15f)){let _0x2dad34=config['portfolio'][_0x1a7b2a(0x184)](_0x4795a5=>_0x4795a5[_0x1a7b2a(0x217)]==config[_0x1a7b2a(0x1f4)]),_0x59d1f5=currentCoins[_0x1a7b2a(0x184)](_0x1c433c=>_0x1c433c[_0x1a7b2a(0x217)]==config[_0x1a7b2a(0x1f4)]);if(_0x2dad34[_0x1a7b2a(0x2ba)]>0x0){if(Math[_0x1a7b2a(0x240)](_0x4330b3)*_0x3cc7f0['last']>_0x59d1f5[_0x1a7b2a(0x1d1)]-_0x2dad34[_0x1a7b2a(0x2ba)])_0xda153b=![];}else{if(Math['abs'](_0x4330b3)*_0x3cc7f0[_0x1a7b2a(0x15e)]>_0x59d1f5['number'])_0xda153b=![];}}return _0xda153b;}async function getBalances(_0x22e46e=!![]){const _0x429afc=_0x28000d;let _0xee1236=0x0,_0x530f1e;const _0x38a550=config['threshold'];if(config[_0x429afc(0x1b0)]&&config[_0x429afc(0x1e7)]<0x0)await validate24hChanges();currentCoins[_0x429afc(0x2d8)](_0x1a9dc0=>{const _0x4e3a58=_0x429afc;if(_0x1a9dc0['coin']!=config[_0x4e3a58(0x1f4)]){let _0x1adad1=global[_0x4e3a58(0x20b)][noslash(_0x1a9dc0[_0x4e3a58(0x2c0)])];_0x530f1e=_0x1a9dc0['reverse']?0x1/_0x1adad1:_0x1adad1;}else _0x530f1e=0x1;let _0x5c5bd4=_0x1a9dc0[_0x4e3a58(0x1d1)]*_0x530f1e;_0xee1236+=_0x5c5bd4,_0x1a9dc0[_0x4e3a58(0x15e)]=formatResult(Number(_0x530f1e),0x8),_0x1a9dc0[_0x4e3a58(0x2bc)]=_0x5c5bd4;}),currentCoins[_0x429afc(0x2d8)](_0x3d7c04=>{const _0x183688=_0x429afc;let _0x57b6f4=config[_0x183688(0x1db)][_0x183688(0x184)](_0x639ebd=>_0x639ebd[_0x183688(0x217)]==_0x3d7c04[_0x183688(0x217)]),_0x4b47d4=Number(_0x57b6f4[_0x183688(0x20c)]),_0x5c698c=_0x3d7c04[_0x183688(0x2bc)]/_0xee1236*0x64,_0x7d1a9e=_0x4b47d4*_0xee1236/0x64/_0x3d7c04[_0x183688(0x15e)]-_0x3d7c04[_0x183688(0x1d1)];_0x3d7c04[_0x183688(0x20c)]=formatResult(_0x5c698c,0x3),_0x3d7c04['target']=formatResult(_0x4b47d4,0x3),_0x3d7c04['trade']=formatResult(_0x7d1a9e,0x8),_0x3d7c04[_0x183688(0x15d)]='',_0x3d7c04[_0x183688(0x1f6)]=![];if(_0x3d7c04[_0x183688(0x217)]!=config[_0x183688(0x1f4)]){if(_0x3d7c04[_0x183688(0x20c)]>_0x4b47d4)_0x3d7c04[_0x183688(0x15d)]=_0x183688(0x2b7),_0x3d7c04[_0x183688(0x1f6)]=checkMinimums(_0x3d7c04);else _0x3d7c04[_0x183688(0x20c)]<_0x4b47d4&&(_0x3d7c04[_0x183688(0x15d)]=_0x183688(0x15f),_0x3d7c04[_0x183688(0x1f6)]=checkMinimums(_0x3d7c04));}_0x3d7c04[_0x183688(0x1d9)]=_0x3d7c04[_0x183688(0x20c)]/_0x3d7c04[_0x183688(0x288)]-0x1;if(_0x3d7c04[_0x183688(0x295)]==_0x183688(0x29d)||_0x3d7c04[_0x183688(0x295)]==_0x183688(0x1d4))_0x3d7c04['orderstatus']='none';}),currentCoins[_0x429afc(0x208)]((_0x732d9d,_0x2f9f7a)=>_0x732d9d[_0x429afc(0x1d9)]<_0x2f9f7a[_0x429afc(0x1d9)]?0x1:_0x2f9f7a[_0x429afc(0x1d9)]<_0x732d9d[_0x429afc(0x1d9)]?-0x1:0x0);const _0x31ab3a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x31ab3a[_0x429afc(0x21f)],'usd':_0x31ab3a['usd'],'portfolio':JSON[_0x429afc(0x225)](currentCoins),'threshold':_0x38a550},proxyEmit(_0x429afc(0x1a4),{'serverversion':serverversion,'balances':lastBalances});if(_0x22e46e){if(config[_0x429afc(0x1b0)])headlessMode({'portfolio':currentCoins,'threshold':_0x38a550});else{if(lockOrders==ORDERS[_0x429afc(0x249)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x38a550});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x275ab8=getNormalizedPerformance();getStartingBalances(_0x275ab8),emitPerformance(_0x275ab8);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x225e64=getNormalizedPerformance();emitPerformance(_0x225e64),getStartingBalances(_0x225e64),logger[_0x429afc(0x1ac)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1a64bd=_0x28000d;if(!lastBalances)return;let _0x29e22a=[],_0x561ac4,_0x499905=JSON['parse'](lastBalances[_0x1a64bd(0x1db)]);_0x499905[_0x1a64bd(0x208)]((_0x5943bc,_0xb8759f)=>_0x5943bc[_0x1a64bd(0x217)]>_0xb8759f[_0x1a64bd(0x217)]?0x1:_0xb8759f['coin']>_0x5943bc['coin']?-0x1:0x0),_0x499905[_0x1a64bd(0x2d8)](_0x1d13c6=>{const _0x573d80=_0x1a64bd;let _0x37c946={'coin':_0x1d13c6[_0x573d80(0x217)],'number':_0x1d13c6[_0x573d80(0x1d1)],'price':_0x1d13c6[_0x573d80(0x15e)]};_0x29e22a[_0x573d80(0x2ad)](_0x37c946);});const _0x45cadb=await getFiat();_0x561ac4={'date':lastBalances[_0x1a64bd(0x294)][_0x1a64bd(0x20e)]('\x20')[0x0],'eur':_0x45cadb[_0x1a64bd(0x21f)],'usd':_0x45cadb[_0x1a64bd(0x1d7)],'coins':_0x29e22a};let _0x264e9e=dbPerformance[_0x1a64bd(0x203)](_0x1a64bd(0x287))['find']({'date':_0x561ac4[_0x1a64bd(0x2a1)]})[_0x1a64bd(0x2bc)]();_0x264e9e?_0x561ac4[_0x1a64bd(0x2a1)]!=config['startdate']&&dbPerformance[_0x1a64bd(0x203)](_0x1a64bd(0x287))['find']({'date':_0x561ac4[_0x1a64bd(0x2a1)]})[_0x1a64bd(0x228)](_0x561ac4)[_0x1a64bd(0x1da)]():dbPerformance[_0x1a64bd(0x203)](_0x1a64bd(0x287))[_0x1a64bd(0x2ad)](_0x561ac4)[_0x1a64bd(0x1da)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x37ca1d=_0x28000d;let _0x31206b=[];if(dbPerformance[_0x37ca1d(0x281)]('data')[_0x37ca1d(0x2bc)]()){let _0x38f2c0=dbPerformance[_0x37ca1d(0x203)](_0x37ca1d(0x287))[_0x37ca1d(0x19c)]()['filter'](_0x483616=>{const _0xba2057=_0x37ca1d;if(_0x483616[_0xba2057(0x2a0)][_0xba2057(0x1ca)]==0x0)return![];else return!![];})[_0x37ca1d(0x275)]('date')[_0x37ca1d(0x2bc)](),_0x4d6086=[...config[_0x37ca1d(0x185)]];_0x4d6086['sort']((_0x21e3c4,_0xcb43d8)=>_0x21e3c4[_0x37ca1d(0x2a1)]>_0xcb43d8[_0x37ca1d(0x2a1)]?-0x1:_0xcb43d8[_0x37ca1d(0x2a1)]>_0x21e3c4[_0x37ca1d(0x2a1)]?0x1:0x0);let _0x4ff6c9=0x1,_0x52817d=[],_0x282b66=0x0;_0x38f2c0[_0x37ca1d(0x229)]()['reverse']()[_0x37ca1d(0x2d8)]((_0x3b2c53,_0x270f99)=>{const _0x198501=_0x37ca1d;if(_0x4d6086[_0x282b66]){if(_0x38f2c0[_0x38f2c0[_0x198501(0x1ca)]-_0x270f99]&&_0x4d6086[_0x282b66][_0x198501(0x2a1)]==_0x38f2c0[_0x38f2c0[_0x198501(0x1ca)]-_0x270f99]['date']){if(_0x270f99<_0x38f2c0[_0x198501(0x1ca)]){let _0x2854a5=0x0,_0x4b336a=0x0;_0x38f2c0[_0x38f2c0[_0x198501(0x1ca)]-_0x270f99][_0x198501(0x2a0)][_0x198501(0x2d8)](_0x5a22ee=>{const _0x39e2e4=_0x198501;_0x4b336a+=_0x5a22ee[_0x39e2e4(0x1d1)]*_0x5a22ee[_0x39e2e4(0x299)];}),_0x4d6086[_0x282b66]['changes'][_0x198501(0x2d8)](_0x227996=>{_0x2854a5+=_0x227996['number']*_0x227996['price'];}),_0x4ff6c9*=_0x2854a5/(_0x4b336a-_0x2854a5)+0x1;}_0x282b66++;}}let _0xd48cb3=0x0;_0x3b2c53['coins']['forEach'](_0x5b0131=>{const _0x252996=_0x198501;_0xd48cb3+=_0x5b0131['number']*_0x5b0131[_0x252996(0x299)];}),_0x52817d[_0x38f2c0[_0x198501(0x1ca)]-_0x270f99-0x1]=_0xd48cb3*(_0x4ff6c9-0x1);});let _0x10e886=[];_0x4d6086=[...config[_0x37ca1d(0x185)]]||[];let _0x2afc23=0x0;_0x282b66=0x0,_0x38f2c0[_0x37ca1d(0x2d8)]((_0x1c2555,_0x51c250)=>{const _0x43bc3d=_0x37ca1d;if(_0x4d6086[_0x282b66]){const _0x1331d2=fns['parse'](_0x4d6086[_0x282b66]['date'],_0x43bc3d(0x224),new Date()),_0x4b088c=fns[_0x43bc3d(0x197)](_0x1c2555['date'],_0x43bc3d(0x224),new Date());if(fns[_0x43bc3d(0x2d6)](_0x1331d2,_0x4b088c)){let _0xe3ecfa=0x0;_0x4d6086[_0x282b66][_0x43bc3d(0x2ec)][_0x43bc3d(0x2d8)](_0x4bf0c3=>{const _0x313606=_0x43bc3d;!_0x10e886[_0x4bf0c3[_0x313606(0x217)]]?_0x10e886[_0x4bf0c3[_0x313606(0x217)]]=_0x4bf0c3[_0x313606(0x1d1)]:(_0xe3ecfa=_0x10e886[_0x4bf0c3[_0x313606(0x217)]],_0x10e886[_0x4bf0c3[_0x313606(0x217)]]+=_0x4bf0c3[_0x313606(0x1d1)]);const _0x325a0d=_0x1c2555['coins'][_0x313606(0x184)](_0x40c2bd=>_0x40c2bd['coin']==_0x4bf0c3[_0x313606(0x217)]);(!_0x325a0d||_0x325a0d[_0x313606(0x1d1)]==0x0)&&(_0x2afc23+=(-_0x4bf0c3[_0x313606(0x1d1)]-_0xe3ecfa)*_0x4bf0c3[_0x313606(0x299)]);}),_0x282b66++;}}_0x1c2555[_0x43bc3d(0x2a0)][_0x43bc3d(0x2d8)]((_0x2ef876,_0x5ed108)=>{const _0x127840=_0x43bc3d;_0x10e886[_0x2ef876[_0x127840(0x217)]]&&(_0x2ef876[_0x127840(0x172)]=_0x10e886[_0x2ef876['coin']]);}),_0x31206b[_0x43bc3d(0x2ad)]({'date':_0x1c2555[_0x43bc3d(0x2a1)],'eur':_0x1c2555[_0x43bc3d(0x21f)],'usd':_0x1c2555[_0x43bc3d(0x1d7)],'offset':_0x52817d[_0x51c250],'netoffset':_0x2afc23,'coins':_0x1c2555['coins']});});}return _0x31206b;}function emitPerformance(_0x2c2d08){const _0x53800f=_0x28000d;_0x2c2d08['length']!==0x0?(proxyEmit(_0x53800f(0x2aa),_0x2c2d08),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x42cf20,_0x331b2b){const _0x2d3423=_0x28000d;let _0x2ffa01=0x0,_0x3f3587=0x0,_0x30161b=0x0;_0x42cf20[_0x2d3423(0x2a0)][_0x2d3423(0x2d8)](_0x549db0=>{const _0x1ffd53=_0x2d3423;_0x2ffa01+=_0x549db0[_0x1ffd53(0x1d1)]*_0x549db0[_0x1ffd53(0x299)];});_0x331b2b&&(_0x2ffa01+=_0x42cf20[_0x2d3423(0x2ba)]);if(config[_0x2d3423(0x1f4)]===_0x2d3423(0x169)||config['basecoin']===_0x2d3423(0x29f)||config[_0x2d3423(0x1f4)]===_0x2d3423(0x256))_0x3f3587=_0x2ffa01*_0x42cf20['eur'],_0x30161b=_0x2ffa01*_0x42cf20['usd'];else{if(usdBasecoins[_0x2d3423(0x21e)](config[_0x2d3423(0x1f4)]))_0x3f3587=_0x2ffa01*_0x42cf20[_0x2d3423(0x21f)]/_0x42cf20[_0x2d3423(0x1d7)],_0x30161b=_0x2ffa01;else config[_0x2d3423(0x1f4)]===_0x2d3423(0x19d)&&(_0x3f3587=_0x2ffa01,_0x30161b=_0x2ffa01*_0x42cf20[_0x2d3423(0x1d7)]/_0x42cf20[_0x2d3423(0x21f)]);}return[_0x2ffa01,_0x3f3587,_0x30161b];}function getKPIs(_0x5f2c36,_0x27e8d5='EUR'){const _0x5c1b26=_0x28000d,_0x2e3041=config[_0x5c1b26(0x1f4)],_0x3302c7=lastBalances,_0x241dc2=currentCoins,_0x200eef=getNormalizedPerformance(),_0x2b070d=_0x5f2c36===_0x5c1b26(0x1f4)?_0x2e3041:_0x5f2c36==='fiat'||_0x5f2c36===_0x5c1b26(0x28b)?_0x27e8d5:_0x5c1b26(0x1f1)+_0x2e3041,_0x3f58ab=_0x5f2c36===_0x5c1b26(0x262)?'Net\x20effect':_0x5f2c36===_0x5c1b26(0x28b)?_0x5c1b26(0x282):_0x2b070d+_0x5c1b26(0x198),_0x1d6d71=_0x5f2c36==='net-basecoin'||_0x5f2c36===_0x5c1b26(0x28b)?_0x5c1b26(0x282):_0x2b070d+'\x20change';let _0x44a0ff=0x0;_0x241dc2['forEach'](_0x44d27a=>{const _0x492cfc=_0x5c1b26;_0x44a0ff+=_0x44d27a[_0x492cfc(0x1d1)]*_0x44d27a[_0x492cfc(0x15e)];});if(_0x5f2c36===_0x5c1b26(0x26f)||_0x5f2c36===_0x5c1b26(0x28b)){if(_0x2e3041===_0x5c1b26(0x169)||_0x2e3041===_0x5c1b26(0x29f)||_0x2e3041===_0x5c1b26(0x256))_0x44a0ff=_0x44a0ff*(_0x27e8d5===_0x5c1b26(0x19d)?_0x3302c7[_0x5c1b26(0x21f)]:_0x3302c7[_0x5c1b26(0x1d7)]);else{if(usdBasecoins[_0x5c1b26(0x21e)](_0x2e3041))_0x44a0ff=_0x44a0ff*(_0x27e8d5===_0x5c1b26(0x19d)?_0x3302c7[_0x5c1b26(0x21f)]/_0x3302c7[_0x5c1b26(0x1d7)]:0x1);else _0x2e3041===_0x5c1b26(0x19d)&&(_0x44a0ff=_0x44a0ff*(_0x27e8d5===_0x5c1b26(0x19d)?0x1:_0x3302c7['usd']/_0x3302c7[_0x5c1b26(0x21f)]));}}let _0x34d90a;if(_0x44a0ff!==0x0){if(_0x5f2c36===_0x5c1b26(0x1f4))_0x34d90a=(_0x44a0ff/startingBalances[_0x5c1b26(0x1f4)]-0x1)*0x64;else{if(_0x27e8d5===_0x5c1b26(0x19d))_0x34d90a=(_0x44a0ff/startingBalances['eur']-0x1)*0x64;else _0x34d90a=(_0x44a0ff/startingBalances['usd']-0x1)*0x64;}let _0x3f5476=0x0;if(startingBalances[_0x5c1b26(0x2a0)])_0x241dc2[_0x5c1b26(0x2d8)](_0x206fd2=>{const _0x164e61=_0x5c1b26;let _0x399660=startingBalances[_0x164e61(0x2a0)]['find'](_0x199a7c=>_0x199a7c['coin']===_0x206fd2['coin']);if(_0x399660&&_0x399660[_0x164e61(0x217)]&&_0x206fd2[_0x164e61(0x1d1)]!==0x0)_0x3f5476+=_0x399660['number']*_0x206fd2[_0x164e61(0x15e)];});let _0x45dee9=0x0;if(_0x200eef[_0x5c1b26(0x1ca)]!==0x0){let _0x5abbee=_0x200eef[_0x200eef[_0x5c1b26(0x1ca)]-0x1];_0x45dee9=_0x5abbee['netoffset'];}_0x3f5476-=_0x45dee9;_0x5f2c36==='net-basecoin'&&(_0x34d90a=(_0x44a0ff-_0x3f5476)/startingBalances[_0x5c1b26(0x1f4)]*0x64,_0x44a0ff=_0x44a0ff-_0x3f5476);if(_0x5f2c36==='net-fiat'){let _0x1c620a=_0x27e8d5===_0x5c1b26(0x19d)?startingBalances[_0x5c1b26(0x21f)]:startingBalances['usd'];if(_0x2e3041==='BTC'||_0x2e3041===_0x5c1b26(0x29f)||_0x2e3041===_0x5c1b26(0x256))_0x3f5476=_0x27e8d5===_0x5c1b26(0x19d)?_0x3f5476*_0x3302c7['eur']:_0x3f5476*_0x3302c7[_0x5c1b26(0x1d7)];else{if(usdBasecoins[_0x5c1b26(0x21e)](_0x2e3041))_0x3f5476=_0x27e8d5===_0x5c1b26(0x19d)?_0x3f5476*_0x3302c7['eur']/_0x3302c7[_0x5c1b26(0x1d7)]:_0x3f5476;else _0x2e3041==='EUR'&&(_0x3f5476=_0x27e8d5===_0x5c1b26(0x19d)?_0x3f5476:_0x3f5476*_0x3302c7[_0x5c1b26(0x1d7)]/_0x3302c7[_0x5c1b26(0x21f)]);}_0x34d90a=(_0x44a0ff-_0x3f5476)/_0x1c620a*0x64,_0x44a0ff=_0x44a0ff-_0x3f5476;}if(_0x34d90a){if(_0x34d90a<0x64)_0x34d90a=_0x34d90a[_0x5c1b26(0x25f)](0x2);else{if(_0x34d90a<0x3e8)_0x34d90a=_0x34d90a[_0x5c1b26(0x25f)](0x1);else _0x34d90a=_0x34d90a[_0x5c1b26(0x25f)](0x0);}}else _0x34d90a=Number('0')[_0x5c1b26(0x25f)](0x2);if(_0x44a0ff){if(Math[_0x5c1b26(0x240)](_0x44a0ff)<0.000001)_0x44a0ff=_0x44a0ff[_0x5c1b26(0x25f)](0x2);else{if(Math[_0x5c1b26(0x240)](_0x44a0ff)<0.1)_0x44a0ff=_0x44a0ff[_0x5c1b26(0x25f)](0x6);else{if(Math[_0x5c1b26(0x240)](_0x44a0ff)<0x1)_0x44a0ff=_0x44a0ff['toFixed'](0x5);else{if(Math[_0x5c1b26(0x240)](_0x44a0ff)<0xa)_0x44a0ff=_0x44a0ff[_0x5c1b26(0x25f)](0x4);else{if(Math['abs'](_0x44a0ff)<0x64)_0x44a0ff=_0x44a0ff[_0x5c1b26(0x25f)](0x3);else{if(Math[_0x5c1b26(0x240)](_0x44a0ff)<0x3e8)_0x44a0ff=_0x44a0ff['toFixed'](0x2);else _0x44a0ff=_0x44a0ff['toFixed'](0x2);}}}}}}else _0x44a0ff=Number('0')[_0x5c1b26(0x25f)](0x2);}else _0x34d90a=Number('0')[_0x5c1b26(0x25f)](0x2);return{'value':_0x44a0ff,'change':_0x34d90a,'leftTxt':_0x3f58ab,'rightTxt':_0x1d6d71};}async function getStartingBalances(_0x6ddc68,_0x4ec3b2=!![]){const _0x182577=_0x28000d;if(_0x6ddc68['length']!==0x0){const [_0x4bff0d,_0x38a539,_0x25093]=getPerf(_0x6ddc68[0x0],!![]);let _0x3062a1=[];config[_0x182577(0x1db)]['forEach'](_0x71b0e9=>{const _0x3de601=_0x182577;let _0x4bc226=0x0,_0x5f0124;config[_0x3de601(0x185)]['forEach'](_0x297f16=>{const _0x42069c=_0x3de601;let _0x19c22b=_0x297f16[_0x42069c(0x2ec)][_0x42069c(0x184)](_0x5c3098=>_0x5c3098[_0x42069c(0x217)]==_0x71b0e9[_0x42069c(0x217)]);if(_0x19c22b){_0x4bc226+=_0x19c22b[_0x42069c(0x1d1)];if(!_0x5f0124)_0x5f0124=_0x19c22b[_0x42069c(0x299)];}}),_0x3062a1[_0x3de601(0x2ad)]({'coin':_0x71b0e9[_0x3de601(0x217)],'number':_0x4bc226,'initialprice':_0x5f0124});});const _0x192b23={'basecoin':_0x4bff0d,'eur':_0x38a539,'usd':_0x25093,'coins':_0x3062a1};if(_0x4ec3b2)proxyEmit('starting-balances',_0x192b23);startingBalances=_0x192b23;}}function headlessMode(_0x6d1d0){const _0x38a6c8=_0x28000d;let _0x305031=_0x6d1d0[_0x38a6c8(0x1db)],_0x4baf24=_0x6d1d0[_0x38a6c8(0x1ba)],_0x120485=[];for(let _0x3f249b of _0x305031){if(_0x3f249b[_0x38a6c8(0x217)]!=config[_0x38a6c8(0x1f4)]){if(_0x3f249b['delta']>=_0x4baf24/0x64){if(_0x3f249b[_0x38a6c8(0x1f6)])_0x120485[_0x38a6c8(0x2ad)](_0x3f249b);}else{if(_0x3f249b['delta']<=-_0x4baf24/0x64){if(_0x3f249b[_0x38a6c8(0x1f6)])_0x120485[_0x38a6c8(0x2ad)](_0x3f249b);}}}}_0x120485[_0x38a6c8(0x1ca)]>0x0&&(lockOrders==ORDERS[_0x38a6c8(0x249)]&&!coolingDown&&_0x120485[_0x38a6c8(0x2d8)](_0x3bf3bc=>{const _0x33999f=_0x38a6c8;logger[_0x33999f(0x1ac)]('Trigger:\x20'+_0x3bf3bc[_0x33999f(0x217)]+'\x20'+_0x3bf3bc[_0x33999f(0x1d1)]+'\x20'+_0x3bf3bc[_0x33999f(0x15e)]+'\x20'+_0x3bf3bc[_0x33999f(0x20c)]+'%\x20'+_0x3bf3bc[_0x33999f(0x288)]+'%\x20'+(0x64*_0x3bf3bc[_0x33999f(0x1d9)])[_0x33999f(0x25f)](0x2)+_0x33999f(0x21d)+_0x4baf24['toFixed'](0x2)+'%)');}),placeOrder(_0x120485));}function notifyBalance(_0xa101cf){const _0x5f1f07=_0x28000d;let _0x1a645f=_0xa101cf[_0x5f1f07(0x1db)],_0x44098d=_0xa101cf[_0x5f1f07(0x1ba)],_0x450f22=[];for(let _0x4fda94 of _0x1a645f){if(_0x4fda94[_0x5f1f07(0x217)]!=config[_0x5f1f07(0x1f4)]){if(_0x4fda94[_0x5f1f07(0x1d9)]>=_0x44098d/0x64){if(_0x4fda94[_0x5f1f07(0x1f6)])_0x450f22[_0x5f1f07(0x2ad)](_0x4fda94);}else{if(_0x4fda94[_0x5f1f07(0x1d9)]<=-_0x44098d/0x64){if(_0x4fda94[_0x5f1f07(0x1f6)])_0x450f22['push'](_0x4fda94);}}}}if(_0x450f22['length']>0x0){let _0x179fdc=_0x450f22[_0x5f1f07(0x1cc)](_0x439496=>_0x439496['coin']);_0x179fdc[_0x5f1f07(0x208)]();let _0xc37dd2=_0x179fdc[_0x5f1f07(0x1a9)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5f1f07(0x193),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xc37dd2;}}function symbolToCoin(_0xa38098){const _0x1c0e2a=_0x28000d;let _0xbdb841;if(_0xa38098['includes']('/'+config[_0x1c0e2a(0x1f4)]))_0xbdb841=_0xa38098[_0x1c0e2a(0x1f3)]('/'+config[_0x1c0e2a(0x1f4)],'');if(_0xa38098[_0x1c0e2a(0x21e)](config[_0x1c0e2a(0x1f4)]+'/'))_0xbdb841=_0xa38098[_0x1c0e2a(0x1f3)](config[_0x1c0e2a(0x1f4)]+'/','');return _0xbdb841;}async function unlockOrders(){const _0x1a2a74=_0x28000d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1a2a74(0x1a3)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x1a2a74(0x200)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x404f94=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x404f94,validateOrdersState=_0x1a2a74(0x172),persistOpenOrders([]),lockOrders=ORDERS[_0x1a2a74(0x249)],logger[_0x1a2a74(0x1ac)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x454e90){const _0x477cb6=_0x28000d;if(_0x454e90)validateOrdersState=_0x454e90;logger[_0x477cb6(0x1ac)](_0x477cb6(0x22c)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x477cb6(0x1e1):lockOrders==0x2?'ORDERS.UNLOCKING':_0x477cb6(0x24d)));let _0x3ddd9d=[],_0x208a68=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x477cb6(0x1a3)])return;logger[_0x477cb6(0x1ac)](_0x477cb6(0x175)+validateOrdersState),lastOrders['forEach'](_0x1add8c=>{const _0x474e1e=_0x477cb6;let _0x4031e6=![];_0x1add8c[_0x474e1e(0x29d)]>0x0&&(_0x4031e6=!![]),_0x3ddd9d[_0x474e1e(0x2ad)](_0x4031e6),_0x4031e6&&config['ordertype']!=_0x474e1e(0x18c)&&logHistory(_0x474e1e(0x191),_0x474e1e(0x2bb)+_0x1add8c[_0x474e1e(0x2c0)]+'\x20'+_0x1add8c['side']+'\x20#'+formatResult(_0x1add8c['filled'],0x8)+'\x20@'+formatResult(_0x1add8c[_0x474e1e(0x299)],0x8));}),_0x3ddd9d[_0x477cb6(0x2d8)]((_0x182d73,_0x3cfdb0)=>{const _0x1fd439=_0x477cb6;if(_0x182d73)lastOrders[_0x1fd439(0x23b)](_0x3cfdb0,0x1);}),persistOpenOrders(lastOrders);const _0x1fdafa=coolingDown?_0x477cb6(0x1d3):_0x477cb6(0x254);if(validateOrdersState==_0x477cb6(0x172)){validateOrdersState='ongoing';if(_0x3ddd9d[_0x477cb6(0x21e)](![])){if(config[_0x477cb6(0x20a)]==_0x477cb6(0x18c)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x477cb6(0x279)){if(_0x3ddd9d[_0x477cb6(0x21e)](![])){}else{if(allOrdersPlaced){if(config[_0x477cb6(0x20a)]==_0x477cb6(0x18c)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x477cb6(0x2a6))_0x3ddd9d[_0x477cb6(0x21e)](![])&&(config['ordertype']==_0x477cb6(0x18c)?logHistory(_0x477cb6(0x267),_0x477cb6(0x2a8)+Math[_0x477cb6(0x245)](_0x208a68*validateOrderInterval/0xea60)+_0x477cb6(0x2b4)+_0x1fdafa):(await cancelOrders(),logHistory(_0x477cb6(0x267),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x477cb6(0x245)](_0x208a68*validateOrderInterval/0xea60)+_0x477cb6(0x2b4)+_0x1fdafa))),await unlockOrders();else{if(validateOrdersState==_0x477cb6(0x2a3)){if(config[_0x477cb6(0x20a)]!=_0x477cb6(0x18c))logHistory('success',_0x477cb6(0x2d5)+_0x1fdafa);await unlockOrders();}}}}}async function cancelOrders(){const _0x417dff=_0x28000d;lastOrders[_0x417dff(0x2d8)](async _0x5867db=>{const _0x2e9dda=_0x417dff;try{const _0x1a4d18=await exchange['cancelOrder'](_0x5867db['orderId'],_0x5867db[_0x2e9dda(0x2c0)]);}catch(_0x239922){if(_0x239922[_0x2e9dda(0x272)]()[_0x2e9dda(0x21e)](_0x2e9dda(0x16e))){}else await handleError(_0x239922,'cancelOrders()');}});}async function initCoinResults(_0x2b1f83){const _0xc9cbae=_0x28000d;_0x2b1f83?logger[_0xc9cbae(0x1ac)](_0xc9cbae(0x1e8)+_0x2b1f83):logger[_0xc9cbae(0x1ac)](_0xc9cbae(0x246)),config['portfolio'][_0xc9cbae(0x2d8)](_0x2112d9=>{const _0x1bb597=_0xc9cbae;if(!_0x2112d9[_0x1bb597(0x2b3)]&&_0x2112d9[_0x1bb597(0x217)]!=config['basecoin']){const _0x4e6ac8=currentCoins[_0x1bb597(0x184)](_0x3301af=>_0x3301af['coin']==_0x2112d9[_0x1bb597(0x217)]),_0x357ef7=global[_0x1bb597(0x20b)][noslash(_0x2112d9[_0x1bb597(0x2c0)])];let _0x437da7=_0x4e6ac8?_0x4e6ac8[_0x1bb597(0x1d1)]:null,_0x32cf28=_0x2112d9[_0x1bb597(0x194)]?0x1/_0x357ef7:_0x357ef7,_0x1ae07f;config[_0x1bb597(0x185)][_0x1bb597(0x2d8)](_0x25145e=>{const _0x399c26=_0x1bb597;!_0x1ae07f&&(_0x1ae07f=_0x25145e[_0x399c26(0x2ec)][_0x399c26(0x184)](_0x1919c0=>_0x1919c0[_0x399c26(0x217)]==_0x2112d9['coin']),_0x1ae07f&&(_0x437da7=_0x1ae07f[_0x399c26(0x1d1)],_0x32cf28=_0x1ae07f[_0x399c26(0x299)]));});let _0x53c6c8=dbCoinResults[_0x1bb597(0x203)]('coins')[_0x1bb597(0x184)]({'coin':_0x2112d9[_0x1bb597(0x217)]})[_0x1bb597(0x2bc)]();if(!_0x53c6c8){const _0x2eb8b5={'coin':_0x2112d9['coin'],'number':_0x437da7,'breakeven':_0x32cf28,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1bb597(0x203)](_0x1bb597(0x2a0))[_0x1bb597(0x2ad)](_0x2eb8b5)[_0x1bb597(0x1da)]();}else{if(_0x2b1f83&&_0x2112d9['coin']==_0x2b1f83){const _0xd8e631={'coin':_0x2112d9[_0x1bb597(0x217)],'number':_0x437da7,'breakeven':_0x32cf28,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1bb597(0x203)]('coins')[_0x1bb597(0x184)]({'coin':_0x2112d9[_0x1bb597(0x217)]})['assign'](_0xd8e631)[_0x1bb597(0x1da)]();}}}});}async function updateCoinResults(_0x144a11,_0x5b415c=![]){const _0x280a70=_0x28000d;let _0x4f072b,_0xbc17ed,_0x1b05eb,_0x41b943,_0x558e6d,_0x7f1f55,_0x3563e5=dbCoinResults['get'](_0x280a70(0x2a0))[_0x280a70(0x184)]({'coin':_0x144a11[_0x280a70(0x217)]})[_0x280a70(0x2bc)](),_0x46c9e3=![];_0x3563e5&&Object[_0x280a70(0x2c8)](_0x3563e5)['forEach'](([_0x1ec152,_0x23c5ff])=>{if(_0x23c5ff==null)_0x46c9e3=!![];});(!_0x3563e5||_0x46c9e3)&&(await initCoinResults(_0x144a11[_0x280a70(0x217)]),_0x3563e5=dbCoinResults[_0x280a70(0x203)](_0x280a70(0x2a0))[_0x280a70(0x184)]({'coin':_0x144a11[_0x280a70(0x217)]})[_0x280a70(0x2bc)]());_0x144a11[_0x280a70(0x194)]&&(_0x7f1f55={'filled':_0x144a11[_0x280a70(0x29d)]*_0x144a11['price'],'amount':_0x144a11[_0x280a70(0x29d)]*_0x144a11[_0x280a70(0x299)],'side':_0x144a11[_0x280a70(0x15d)]=='sell'?_0x280a70(0x15f):_0x280a70(0x2b7),'price':0x1/_0x144a11['price']},_0x144a11={..._0x144a11,..._0x7f1f55});_0x5b415c?_0xbc17ed=_0x144a11[_0x280a70(0x15d)]==_0x280a70(0x15f)?_0x3563e5['number']+_0x144a11[_0x280a70(0x29d)]:_0x3563e5[_0x280a70(0x1d1)]-_0x144a11['filled']:_0xbc17ed=await getCoinNumber(_0x144a11[_0x280a70(0x217)]);if(_0x144a11[_0x280a70(0x1cf)]&&_0x144a11[_0x280a70(0x1cf)][_0x280a70(0x2ef)]==config[_0x280a70(0x1f4)])_0x4f072b=_0x144a11['fee']['cost'];else{if(_0x144a11[_0x280a70(0x1cf)]&&_0x144a11[_0x280a70(0x1cf)][_0x280a70(0x2ef)]=='BNB'&&!_0x5b415c&&config[_0x280a70(0x1f4)]!=_0x280a70(0x256))_0x4f072b=_0x144a11[_0x280a70(0x1cf)][_0x280a70(0x2ab)]*global[_0x280a70(0x20b)][_0x280a70(0x27a)+config['basecoin']];else _0x4f072b=defaultFee*_0x144a11[_0x280a70(0x29d)]*_0x144a11[_0x280a70(0x299)];}_0x144a11[_0x280a70(0x15d)]==_0x280a70(0x15f)?(_0x1b05eb=_0xbc17ed!=0x0?(_0x3563e5[_0x280a70(0x16f)]*_0x3563e5[_0x280a70(0x1d1)]+_0x144a11[_0x280a70(0x299)]*(_0xbc17ed-_0x3563e5['number'])+_0x4f072b)/_0xbc17ed:0x0,_0x41b943=_0x3563e5[_0x280a70(0x2a7)]):(_0x1b05eb=_0xbc17ed!=0x0?(_0x3563e5[_0x280a70(0x16f)]*_0x3563e5[_0x280a70(0x1d1)]-_0x144a11[_0x280a70(0x299)]*(_0x3563e5[_0x280a70(0x1d1)]-_0xbc17ed)+_0x4f072b)/_0xbc17ed:0x0,_0x41b943=_0x3563e5[_0x280a70(0x2a7)]+(_0x144a11['price']-_0x3563e5[_0x280a70(0x16f)])*_0x144a11[_0x280a70(0x29d)]);_0x558e6d=(_0x144a11[_0x280a70(0x299)]-_0x1b05eb-_0x4f072b/_0x144a11[_0x280a70(0x29d)])*_0xbc17ed;let _0x15b4cf={'coin':_0x144a11[_0x280a70(0x217)],'number':_0xbc17ed,'breakeven':formatResult(_0x1b05eb,0x8),'realized':formatResult(_0x41b943,0x8),'unrealized':formatResult(_0x558e6d,0x8),'fees':formatResult(_0x3563e5['fees']+_0x4f072b,0x8),'sells':_0x144a11[_0x280a70(0x15d)]=='sell'?_0x3563e5[_0x280a70(0x269)]+0x1:_0x3563e5['sells'],'buys':_0x144a11[_0x280a70(0x15d)]==_0x280a70(0x15f)?_0x3563e5[_0x280a70(0x1f5)]+0x1:_0x3563e5[_0x280a70(0x1f5)]};dbCoinResults[_0x280a70(0x203)](_0x280a70(0x2a0))[_0x280a70(0x184)]({'coin':_0x144a11[_0x280a70(0x217)]})['assign'](_0x15b4cf)[_0x280a70(0x1da)]();if(!_0x5b415c){if(_0x144a11[_0x280a70(0x1cf)]&&_0x144a11[_0x280a70(0x1cf)]['currency']==_0x280a70(0x27a)){const _0x334ed3=currentCoins['find'](_0x51eedf=>_0x51eedf[_0x280a70(0x217)]=='BNB');if(_0x334ed3){let _0x564990=dbCoinResults[_0x280a70(0x203)](_0x280a70(0x2a0))[_0x280a70(0x184)]({'coin':'BNB'})['value']();_0x15b4cf={..._0x564990,'number':_0x334ed3[_0x280a70(0x1d1)]},dbCoinResults[_0x280a70(0x203)](_0x280a70(0x2a0))[_0x280a70(0x184)]({'coin':_0x280a70(0x27a)})[_0x280a70(0x228)](_0x15b4cf)[_0x280a70(0x1da)]();}}}}async function placeOrder(_0x348461){const _0x1d8748=_0x28000d,_0x47ec5f=config[_0x1d8748(0x20a)]==_0x1d8748(0x18c)?'market':'limit';if(lockOrders==ORDERS[_0x1d8748(0x249)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1d8748(0x1a3)],allOrdersPlaced=![],validateOrdersState='initial';let _0xc31b33=![];lastOrders=[];for(const _0x2873d4 of _0x348461){let _0x42b1ed,_0x15c2fb,_0x5c14e4,_0x4c4906,_0x1758f8,_0x56e538=_0x2873d4['symbol'];try{const _0x3e7ce9=await exchange['fetchTicker'](_0x56e538);_0x42b1ed=_0x2873d4[_0x1d8748(0x194)]?0x1/_0x2873d4[_0x1d8748(0x15e)]:_0x2873d4[_0x1d8748(0x15e)],_0x15c2fb=_0x3e7ce9[_0x1d8748(0x20d)],_0x5c14e4=_0x3e7ce9[_0x1d8748(0x1c1)];_0x2873d4['reverse']?(_0x4c4906=_0x2873d4['side']==_0x1d8748(0x15f)?_0x1d8748(0x2b7):_0x1d8748(0x15f),_0x1758f8=Math[_0x1d8748(0x240)](_0x2873d4['trade'])/_0x42b1ed):(_0x4c4906=_0x2873d4[_0x1d8748(0x15d)],_0x1758f8=Math[_0x1d8748(0x240)](_0x2873d4['trade']));_0x47ec5f==_0x1d8748(0x170)&&(config[_0x1d8748(0x20a)]==_0x1d8748(0x1bf)&&(_0x42b1ed=_0x4c4906=='buy'?_0x15c2fb:_0x5c14e4),config[_0x1d8748(0x20a)]==_0x1d8748(0x2eb)&&(_0x42b1ed=_0x4c4906==_0x1d8748(0x15f)?_0x5c14e4:_0x15c2fb));_0x1758f8=formatResult(_0x1758f8,0x8),_0x42b1ed=formatResult(_0x42b1ed,0x8);const _0x38c625=_0x4c4906==_0x1d8748(0x2b7)?config[_0x1d8748(0x27d)]?String[_0x1d8748(0x277)]('0x'+config[_0x1d8748(0x27d)])+'\x20':'':config['emojibuy']?String[_0x1d8748(0x277)]('0x'+config[_0x1d8748(0x259)])+'\x20':'',_0x2746b3=_0x47ec5f=='market'?_0x1d8748(0x1d0):config['ordertype']==_0x1d8748(0x1bf)?_0x1d8748(0x19a):_0x1d8748(0x290),_0x4c2b4a=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x1d8748(0x272)]();lastOrders['push']({'customId':_0x4c2b4a,'symbol':_0x56e538,'coin':_0x2873d4['coin'],'amount':_0x1758f8,'price':_0x42b1ed,'side':_0x4c4906,'reverse':_0x2873d4['reverse'],'filled':0x0});if(_0x47ec5f==_0x1d8748(0x18c))logHistory('order',''+_0x38c625+_0x2746b3+'\x20order:\x20'+_0x56e538+'\x20'+_0x4c4906+'\x20#'+formatResult(_0x1758f8,0x8)+'\x20@'+formatResult(_0x42b1ed,0x8));else logHistory('order',''+_0x38c625+_0x2746b3+_0x1d8748(0x182)+_0x56e538+'\x20'+_0x4c4906+'\x20#'+formatResult(_0x1758f8,0x8)+'\x20@'+formatResult(_0x42b1ed,0x8));let _0x229c0a;_0x47ec5f==_0x1d8748(0x18c)?_0x4c4906=='buy'&&[_0x1d8748(0x23f),_0x1d8748(0x2ca),'Cex',_0x1d8748(0x2cb),_0x1d8748(0x247)][_0x1d8748(0x21e)](config['exchange'])?_0x229c0a=await exchange[_0x1d8748(0x271)](_0x56e538,_0x47ec5f,_0x4c4906,_0x1758f8,_0x42b1ed):_0x229c0a=await exchange[_0x1d8748(0x271)](_0x56e538,_0x47ec5f,_0x4c4906,_0x1758f8,undefined):_0x229c0a=await exchange['createOrder'](_0x56e538,_0x47ec5f,_0x4c4906,_0x1758f8,_0x42b1ed);logger[_0x1d8748(0x1ac)](_0x1d8748(0x192)+_0x229c0a['id']+_0x1d8748(0x221)+_0x4c2b4a);const _0x2c18f4=lastOrders[_0x1d8748(0x1ca)]-0x1;if(_0x2c18f4>=0x0&&lastOrders[_0x2c18f4][_0x1d8748(0x276)]==_0x4c2b4a){lastOrders[_0x2c18f4]['orderId']=_0x229c0a['id'];if(_0x229c0a['amount'])lastOrders[_0x2c18f4]['amount']=_0x229c0a[_0x1d8748(0x2e3)];if(_0x229c0a['price'])lastOrders[_0x2c18f4]['price']=_0x229c0a['price'];lastOrders[_0x2c18f4][_0x1d8748(0x1cf)]=_0x229c0a[_0x1d8748(0x1cf)];}if(config['cooldown']!=0x0){let _0x2ab6e1=null;if(cooldownTracker['length']==config[_0x1d8748(0x220)]-0x1)_0x2ab6e1=cooldownTracker[_0x1d8748(0x15c)]();const _0x28a2b2=getTimeStamp();cooldownTracker[_0x1d8748(0x2ad)](_0x28a2b2);if(_0x2ab6e1){const _0x3abbe0=fns['differenceInSeconds'](new Date(_0x28a2b2),new Date(_0x2ab6e1));if(_0x3abbe0<cooldownInterval){logHistory(_0x1d8748(0x2ac),_0x1d8748(0x22e)+config['cooldown']+_0x1d8748(0x181)+cooldownInterval/0x3c+_0x1d8748(0x26b)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x222c7d){if(_0x222c7d[_0x1d8748(0x272)]()[_0x1d8748(0x21e)](_0x1d8748(0x183)))lastOrders=lastOrders[_0x1d8748(0x1aa)](_0x245620=>_0x245620[_0x1d8748(0x2c0)]!=_0x56e538),logHistory(_0x1d8748(0x2ac),_0x1d8748(0x2b1)+_0x56e538),_0xc31b33=!![];else{if(_0x222c7d[_0x1d8748(0x272)]()[_0x1d8748(0x21e)](_0x1d8748(0x17c)))lastOrders=lastOrders[_0x1d8748(0x1aa)](_0x3013ba=>_0x3013ba[_0x1d8748(0x2c0)]!=_0x56e538),logHistory(_0x1d8748(0x2ac),'Order\x20amount\x20is\x20invalid:\x20'+_0x56e538),_0xc31b33=!![];else{if(_0x222c7d[_0x1d8748(0x272)]()[_0x1d8748(0x21e)]('InvalidOrder'))lastOrders=lastOrders[_0x1d8748(0x1aa)](_0x33d05c=>_0x33d05c[_0x1d8748(0x2c0)]!=_0x56e538),logHistory(_0x1d8748(0x2ac),_0x1d8748(0x2a4)+_0x56e538),logger[_0x1d8748(0x1ac)](_0x222c7d),_0xc31b33=!![];else _0x222c7d[_0x1d8748(0x272)]()[_0x1d8748(0x21e)](_0x1d8748(0x1b4))?(lastOrders=lastOrders['filter'](_0x5302a9=>_0x5302a9[_0x1d8748(0x2c0)]!=_0x56e538),logHistory(_0x1d8748(0x2ac),_0x1d8748(0x2b1)+_0x56e538),_0xc31b33=!![]):(lastOrders=lastOrders[_0x1d8748(0x1aa)](_0x300227=>_0x300227['symbol']!=_0x56e538),await handleError(_0x222c7d,_0x1d8748(0x16a),_0x56e538));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4c2861=config[_0x1d8748(0x20a)]==_0x1d8748(0x18c)?validateOrderTimeout*0x3c*0x3e8:config[_0x1d8748(0x1e3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x512036=_0x1d8748;validateOrders(_0x512036(0x2a6));},_0x4c2861);}else unlockOrders();_0xc31b33&&config[_0x1d8748(0x1b0)]&&(logHistory(_0x1d8748(0x2ac),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1d8748(0x267),_0x1d8748(0x1b7)));}else{if(coolingDown)!config[_0x1d8748(0x1b0)]&&logHistory(_0x1d8748(0x2ac),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x1d8748(0x249)]&&(!config['headless']&&(config[_0x1d8748(0x20a)]==_0x1d8748(0x18c)?logHistory(_0x1d8748(0x2ac),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x1d8748(0x2ac),_0x1d8748(0x1c0))));}}function persistOpenOrders(_0x467d1e){const _0x59c2de=_0x28000d,_0x400951={...config,'openOrders':_0x467d1e};let _0x57df0a=dbConfig[_0x59c2de(0x203)](_0x59c2de(0x236))['find']({'botID':botID})[_0x59c2de(0x2bc)]();_0x57df0a&&dbConfig[_0x59c2de(0x203)](_0x59c2de(0x236))[_0x59c2de(0x184)]({'botID':botID})[_0x59c2de(0x228)](_0x400951)[_0x59c2de(0x1da)]();}function restoreOrders(){const _0xf7b8b3=_0x28000d;let _0x45e405;config[_0xf7b8b3(0x2a9)]&&allOpenOrders['forEach'](_0x13fdef=>{const _0xff217d=_0xf7b8b3,_0x22f481=config['openOrders'][_0xff217d(0x184)](_0x372d55=>_0x372d55[_0xff217d(0x1c2)]==_0x13fdef['id']);_0x22f481&&(lastOrders[_0xff217d(0x2ad)](_0x22f481),_0x45e405=_0x13fdef[_0xff217d(0x28f)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0xf7b8b3(0x279),allOrdersPlaced=!![];const _0x35dda8=new Date()[_0xf7b8b3(0x17e)](),_0x504c59=config[_0xf7b8b3(0x20a)]==_0xf7b8b3(0x18c)?validateOrderTimeout*0x3c*0x3e8:config[_0xf7b8b3(0x1e3)]*0x3c*0x3e8;if(_0x45e405+_0x504c59>_0x35dda8){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xee7af4=_0xf7b8b3;validateOrders(_0xee7af4(0x2a6));},_0x45e405+_0x504c59-_0x35dda8);}else validateOrders(_0xf7b8b3(0x2a6));}}async function sendMetricsTelegram(){const _0x569595=_0x28000d;if(!coinsLoaded){process[_0x569595(0x1fc)]({'telegrammsg':_0x569595(0x206)},_0x2e1d87=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x452a73='';if(config['showname'])_0x452a73=_0x569595(0x19b)+config[_0x569595(0x263)]+_0x569595(0x273);else _0x452a73=_0x569595(0x2d9)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x34d25a=getKPIs(_0x569595(0x1f4)),_0x59cb1e=getKPIs('fiat',config[_0x569595(0x26f)]),_0x340cb6=getKPIs(_0x569595(0x262)),_0x1c52ba=getKPIs(_0x569595(0x28b),config[_0x569595(0x26f)]);_0x452a73+=_0x569595(0x1f2),_0x452a73+=_0x34d25a[_0x569595(0x1cb)]+'\x20:\x20'+_0x34d25a[_0x569595(0x2bc)]+'\x0a',_0x452a73+=_0x34d25a['rightTxt']+':\x20'+_0x34d25a[_0x569595(0x1df)]+'%\x0a',_0x452a73+=_0x59cb1e[_0x569595(0x1cb)]+_0x569595(0x232)+_0x59cb1e[_0x569595(0x2bc)]+'\x0a',_0x452a73+=_0x59cb1e[_0x569595(0x260)]+':\x20'+_0x59cb1e[_0x569595(0x1df)]+'%\x0a',_0x452a73+=_0x340cb6['leftTxt']+':\x20'+_0x340cb6[_0x569595(0x2bc)]+'\x20('+config[_0x569595(0x1f4)]+')\x0a',_0x452a73+=_0x340cb6['rightTxt']+':\x20'+_0x340cb6[_0x569595(0x1df)]+_0x569595(0x21d)+config[_0x569595(0x1f4)]+')\x0a',_0x452a73+=_0x1c52ba[_0x569595(0x1cb)]+':\x20'+_0x1c52ba[_0x569595(0x2bc)]+'\x20('+config[_0x569595(0x26f)]+')\x0a',_0x452a73+=_0x1c52ba['rightTxt']+':\x20'+_0x1c52ba[_0x569595(0x1df)]+_0x569595(0x21d)+config[_0x569595(0x26f)]+')\x0a',_0x452a73+='</pre>',process['send']({'telegrammsg':_0x452a73},_0x2a35cd=>{});}async function sendPortfolioTelegram(){const _0x54cd9e=_0x28000d;if(!coinsLoaded){process['send']({'telegrammsg':_0x54cd9e(0x206)},_0x2e4027=>{});return;}let _0x2ee272='';if(config['showname'])_0x2ee272=_0x54cd9e(0x19b)+config[_0x54cd9e(0x263)]+_0x54cd9e(0x166);else _0x2ee272=_0x54cd9e(0x2d9)+botID+_0x54cd9e(0x166);_0x2ee272+=_0x54cd9e(0x1f2),_0x2ee272+=_0x54cd9e(0x215),_0x2ee272+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x2ee272+=_0x54cd9e(0x215),currentCoins[_0x54cd9e(0x2d8)](_0x41c681=>{const _0xc8f13=_0x54cd9e;_0x2ee272+=_0x41c681[_0xc8f13(0x217)][_0xc8f13(0x20f)](0x7)+'|\x20'+formatPad(_0x41c681[_0xc8f13(0x20c)],0x2,0x6)+'|\x20'+formatPad(_0x41c681[_0xc8f13(0x288)],0x2,0x6)+'|\x20'+formatPad(_0x41c681[_0xc8f13(0x1d9)]*0x64,0x2,0x6)+'\x0a';}),_0x2ee272+=_0x54cd9e(0x29e),process['send']({'telegrammsg':_0x2ee272},_0x1555f0=>{});}function formatPad(_0x16aa9f,_0x16adbe,_0x5e2be4){const _0x4e653d=_0x28000d,_0x5e2e57=formatResultString(_0x16aa9f,_0x16adbe);return _0x5e2e57?_0x5e2e57['padStart'](_0x5e2be4):''[_0x4e653d(0x239)](_0x5e2be4);}function logHistory(_0x49834c,_0x2ec04b,_0x145b80=''){const _0x4716e1=_0x28000d;logger['full'](''+_0x2ec04b);let _0x2bec91={'time':getTimeStamp(),'type':_0x49834c,'event':_0x2ec04b};dbLogs['get'](_0x4716e1(0x1b6))[_0x4716e1(0x2ad)](_0x2bec91)[_0x4716e1(0x1da)]();if(_0x145b80=='')_0x145b80=_0x2ec04b;proxyEmit(_0x4716e1(0x1c4),{'log':_0x2bec91,'summary':_0x145b80}),process[_0x4716e1(0x1fc)]({'telegram':{..._0x2bec91,'botname':config[_0x4716e1(0x263)],'showname':config['showname']}},_0x59a359=>{});}function emitHistory(_0xc0e99e={}){const _0x614053=_0x28000d;Object['keys'](_0xc0e99e)[_0x614053(0x1ca)]==0x0&&(_0xc0e99e={'type':[_0x614053(0x191),'event'],'event':'','page':0x1});if(_0xc0e99e['type'][_0x614053(0x21e)](_0x614053(0x1c4)))_0xc0e99e[_0x614053(0x1b1)][_0x614053(0x23b)](_0xc0e99e[_0x614053(0x1b1)][_0x614053(0x23a)]('event'),0x1,_0x614053(0x2ac),_0x614053(0x193),_0x614053(0x267));if(dbLogs[_0x614053(0x281)](_0x614053(0x1b6))[_0x614053(0x2bc)]()){let _0x5a5f69=dbLogs[_0x614053(0x203)](_0x614053(0x1b6))[_0x614053(0x1aa)](_0x3081ca=>{const _0x5147c5=_0x614053;if(_0xc0e99e[_0x5147c5(0x1b1)][_0x5147c5(0x1ca)]==0x0)return![];else return _0xc0e99e[_0x5147c5(0x1b1)][_0x5147c5(0x21e)](_0x3081ca[_0x5147c5(0x1b1)]);})[_0x614053(0x1aa)](_0x4521b6=>{const _0x2ccda2=_0x614053;if(_0xc0e99e[_0x2ccda2(0x1c4)]=='')return!![];else return _0x4521b6[_0x2ccda2(0x1c4)][_0x2ccda2(0x26c)]()[_0x2ccda2(0x21e)](_0xc0e99e[_0x2ccda2(0x1c4)][_0x2ccda2(0x26c)]());})[_0x614053(0x275)](_0x614053(0x294)),_0x1c9aa8=_0x5a5f69[_0x614053(0x2bc)]()[_0x614053(0x1ca)];_0x5a5f69=_0x5a5f69[_0x614053(0x194)]()[_0x614053(0x229)]((_0xc0e99e['page']-0x1)*logPageSize,_0xc0e99e[_0x614053(0x24e)]*logPageSize-0x1)[_0x614053(0x194)]()[_0x614053(0x2bc)](),proxyEmit(_0x614053(0x176),{'logs':_0x5a5f69,'total':_0x1c9aa8});}else proxyEmit(_0x614053(0x176),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2403d8){const _0x338f86=_0x28000d;if(dbLogs[_0x338f86(0x281)](_0x338f86(0x1b6))['value']()){const _0x3bf5d1=dbLogs['get'](_0x338f86(0x1b6))[_0x338f86(0x275)](_0x338f86(0x294))[_0x338f86(0x1aa)](_0x4fb899=>{const _0x3596cb=_0x338f86;return _0x4fb899[_0x3596cb(0x1b1)]==_0x3596cb(0x191);})['value']();dbLogs[_0x338f86(0x203)](_0x338f86(0x1b6))[_0x338f86(0x24a)]()['write'](),dbLogs[_0x338f86(0x203)](_0x338f86(0x1b6))[_0x338f86(0x228)](_0x3bf5d1)[_0x338f86(0x1da)](),emitHistory(_0x2403d8);}}async function pauseBot(_0x3bd624=pauseBotInterval){const _0x45c2ce=_0x28000d,_0x3e66a4=new Date()['getTime']();if(!lastErrorShown||_0x3e66a4-lastErrorShown>=_0x3bd624){lastErrorShown=_0x3e66a4;!lastBotPause?(lastBotPause=_0x3e66a4,consecutivePauses=0x1):(_0x3e66a4-lastBotPause-_0x3bd624<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x45c2ce(0x209)},_0x3390c4=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x45c2ce(0x17e)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x3bd624),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1a5e69=_0x28000d;botPaused=!![],await sleep(0x3e8),process[_0x1a5e69(0x1fc)]({'stop':_0x1a5e69(0x2bf)},_0x55528e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x446e1f,_0x421988){const _0x39aa97=_0x28000d;if(botPaused)return;const _0x168bb3=config[_0x39aa97(0x1b9)]||'Exchange';if(_0x421988)logger['debug'](_0x39aa97(0x1ef)+_0x421988);const _0x59c99e=()=>{const _0x127e0c=_0x39aa97;loading[_0x127e0c(0x2ac)]=!![],emitLoadingProgress();};if(_0x446e1f[_0x39aa97(0x272)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x39aa97(0x2ac),_0x168bb3+_0x39aa97(0x2d2)),_0x59c99e();else{if(_0x446e1f[_0x39aa97(0x272)]()[_0x39aa97(0x21e)](_0x39aa97(0x17b)))logHistory(_0x39aa97(0x2ac),_0x168bb3+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x59c99e();else _0x446e1f[_0x39aa97(0x272)]()[_0x39aa97(0x21e)](_0x39aa97(0x1c9))?(logHistory(_0x39aa97(0x2ac),_0x168bb3+_0x39aa97(0x2c5)),logHistory(_0x39aa97(0x2ac),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x59c99e()):await handleError(_0x446e1f,null);}}async function handleError(_0x344f76,_0x4b6b05,_0x1fe7bb=''){const _0x5cb9d0=_0x28000d;if(botPaused)return;const _0x1565f9=config[_0x5cb9d0(0x1b9)]||_0x5cb9d0(0x17d);if(_0x4b6b05)logger[_0x5cb9d0(0x1ac)]('Exception\x20thrown\x20in\x20'+_0x4b6b05);if(_0x344f76['toString']()['includes'](_0x5cb9d0(0x22b))||_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)]('RateLimitExceeded'))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+_0x5cb9d0(0x23e)+pauseBotMsg),await pauseBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x1c5))||_0x344f76['toString']()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x2cc)))logHistory('error',_0x1565f9+_0x5cb9d0(0x2c2)+pauseBotMsg),await pauseBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()['includes'](_0x5cb9d0(0x1e9)))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+_0x5cb9d0(0x2dc)+pauseBotMsg),await pauseBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x26c)]()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x28f))||_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x26c)]()[_0x5cb9d0(0x21e)]('request-time')){const _0x2fdf2f=_0x344f76[_0x5cb9d0(0x272)]()['toLowerCase']();let _0x15e885=![];if((config[_0x5cb9d0(0x1b9)]==_0x5cb9d0(0x187)||config['exchange']==_0x5cb9d0(0x189))&&(_0x2fdf2f[_0x5cb9d0(0x21e)]('Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow'[_0x5cb9d0(0x26c)]())||_0x2fdf2f['includes'](_0x5cb9d0(0x186)[_0x5cb9d0(0x26c)]())))_0x15e885=!![];if(config['exchange']=='Kucoin'&&_0x2fdf2f[_0x5cb9d0(0x21e)](_0x5cb9d0(0x21b)[_0x5cb9d0(0x26c)]()))_0x15e885=!![];if(config[_0x5cb9d0(0x1b9)]==_0x5cb9d0(0x23f)&&_0x2fdf2f[_0x5cb9d0(0x21e)](_0x5cb9d0(0x286)[_0x5cb9d0(0x26c)]()))_0x15e885=!![];if(config[_0x5cb9d0(0x1b9)]=='Bitget'&&_0x2fdf2f['includes'](_0x5cb9d0(0x1a0)[_0x5cb9d0(0x26c)]()))_0x15e885=!![];if((config['exchange']==_0x5cb9d0(0x16d)||config[_0x5cb9d0(0x1b9)]=='Mexc3')&&_0x2fdf2f[_0x5cb9d0(0x21e)]('invalid\x20Request-Time'[_0x5cb9d0(0x26c)]()))_0x15e885=!![];_0x15e885?logHistory(_0x5cb9d0(0x2ac),_0x5cb9d0(0x23d)+pauseBotMsg):logHistory('error',_0x5cb9d0(0x293)+pauseBotMsg),logger['debug'](_0x5cb9d0(0x1c7),_0x344f76[_0x5cb9d0(0x272)]()),await pauseBot();}else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x16c)))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+_0x5cb9d0(0x1ae)+pauseBotMsg),logger[_0x5cb9d0(0x1ac)](_0x5cb9d0(0x1c7),_0x344f76),await pauseBot();else{if(_0x344f76 instanceof ccxt['NetworkError'])logHistory(_0x5cb9d0(0x2ac),_0x1565f9+'\x20network\x20error'+pauseBotMsg),logger[_0x5cb9d0(0x1ac)](_0x5cb9d0(0x1c7),_0x344f76),await pauseBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x2b6)))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x5cb9d0(0x2ac),_0x5cb9d0(0x235)),await killBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+_0x5cb9d0(0x1d2)),logHistory(_0x5cb9d0(0x2ac),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()['includes']('AuthenticationError'))logHistory('error',_0x1565f9+_0x5cb9d0(0x1f0)),logHistory(_0x5cb9d0(0x2ac),_0x5cb9d0(0x235)),await killBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()['includes'](_0x5cb9d0(0x261)))logHistory(_0x5cb9d0(0x2ac),_0x1565f9+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x5cb9d0(0x2ac),_0x5cb9d0(0x235)),await killBot();else{if(_0x344f76[_0x5cb9d0(0x272)]()[_0x5cb9d0(0x21e)](_0x5cb9d0(0x1e0)))logHistory(_0x5cb9d0(0x2ac),_0x5cb9d0(0x1c6)+_0x1fe7bb);else _0x344f76 instanceof ccxt[_0x5cb9d0(0x1d8)]?(logHistory('error',_0x1565f9+_0x5cb9d0(0x1ee)),logger[_0x5cb9d0(0x1ac)](_0x5cb9d0(0x1c7),_0x344f76)):(logHistory(_0x5cb9d0(0x2ac),'Unknown\x20error\x20occured'+pauseBotMsg),logger['debug'](_0x5cb9d0(0x1c7),_0x344f76),await pauseBot());}}}}}}}}}}}}function formatResult(_0x442f81,_0x1a75d5){const _0x1078cb=_0x28000d;return parseFloat(_0x442f81[_0x1078cb(0x25f)](_0x1a75d5));}function formatResultTruncate(_0x5523e0,_0x18e285){const _0x226410=_0x28000d;let _0x350e7b=formatResultString(_0x5523e0,0xa),_0x5c50db=_0x350e7b[_0x226410(0x23a)]('.');return _0x5c50db!=-0x1&&(_0x350e7b=_0x350e7b[_0x226410(0x229)](0x0,_0x5c50db+_0x18e285+0x1)),Number(_0x350e7b);}function formatResultString(_0x2548b2,_0xbc9290){const _0x2feb77=_0x28000d;let _0x3769b3;if(!(''+_0x2548b2)[_0x2feb77(0x21e)]('e'))_0x3769b3=+(Math[_0x2feb77(0x245)](_0x2548b2+'e+'+_0xbc9290)+'e-'+_0xbc9290);else{let _0x40283e=(''+_0x2548b2)[_0x2feb77(0x20e)]('e'),_0x32761c='';+_0x40283e[0x1]+_0xbc9290>0x0&&(_0x32761c='+'),_0x3769b3=+(Math[_0x2feb77(0x245)](+_0x40283e[0x0]+'e'+_0x32761c+(+_0x40283e[0x1]+_0xbc9290))+'e-'+_0xbc9290);}return Number(_0x3769b3)['toFixed'](_0xbc9290);}function getServerTime(){const _0x118659=_0x28000d,_0x2ccb05=new Date();return _0x2ccb05[_0x118659(0x2b8)]()+'/'+(_0x2ccb05['getMonth']()+0x1)[_0x118659(0x272)]()['padStart'](0x2,'0')+'/'+_0x2ccb05[_0x118659(0x28d)]()[_0x118659(0x272)]()['padStart'](0x2,'0')+'\x20'+_0x2ccb05[_0x118659(0x1e4)]()[_0x118659(0x272)]()[_0x118659(0x239)](0x2,'0')+':'+_0x2ccb05['getMinutes']()['toString']()[_0x118659(0x239)](0x2,'0')+':'+_0x2ccb05[_0x118659(0x1ab)]()['toString']()[_0x118659(0x239)](0x2,'0');}function getTimeStamp(){const _0x37fbc6=_0x28000d,_0x1f0c57=shiftedTime();return _0x1f0c57[_0x37fbc6(0x2b8)]()+'/'+(_0x1f0c57[_0x37fbc6(0x1ed)]()+0x1)['toString']()[_0x37fbc6(0x239)](0x2,'0')+'/'+_0x1f0c57[_0x37fbc6(0x28d)]()[_0x37fbc6(0x272)]()[_0x37fbc6(0x239)](0x2,'0')+'\x20'+_0x1f0c57[_0x37fbc6(0x1e4)]()[_0x37fbc6(0x272)]()[_0x37fbc6(0x239)](0x2,'0')+':'+_0x1f0c57['getMinutes']()[_0x37fbc6(0x272)]()['padStart'](0x2,'0')+':'+_0x1f0c57[_0x37fbc6(0x1ab)]()[_0x37fbc6(0x272)]()[_0x37fbc6(0x239)](0x2,'0');}function getDate(){const _0x359306=_0x28000d,_0xf9ce44=shiftedTime();return _0xf9ce44['getFullYear']()+'/'+(_0xf9ce44[_0x359306(0x1ed)]()+0x1)[_0x359306(0x272)]()[_0x359306(0x239)](0x2,'0')+'/'+_0xf9ce44['getDate']()[_0x359306(0x272)]()[_0x359306(0x239)](0x2,'0');}function getHour(){const _0x2a25ab=_0x28000d,_0x10ff3b=shiftedTime();return _0x10ff3b[_0x2a25ab(0x1e4)]()[_0x2a25ab(0x272)]()[_0x2a25ab(0x239)](0x2,'0');}function sleep(_0x1d06d2){return new Promise(_0x4f6a5e=>setTimeout(_0x4f6a5e,_0x1d06d2));}function shiftedTime(){const _0x5cd173=_0x28000d,_0x50fc9d=new Date();let _0xc20340=_0x50fc9d;if(config&&config[_0x5cd173(0x2d3)]!==0x0)_0xc20340=fns[_0x5cd173(0x25d)](_0x50fc9d,{'hours':config[_0x5cd173(0x2d3)]});return _0xc20340;}function timer(_0x3b98aa){const _0x46a562=_0x28000d,_0x3af098=new Date();!lasttime?console['log'](getTimeStamp()+_0x46a562(0x28a),_0x3b98aa,_0x3af098):console[_0x46a562(0x205)](getTimeStamp()+_0x46a562(0x28a),_0x3b98aa,(_0x3af098-lasttime)/0x3e8),lasttime=_0x3af098;}