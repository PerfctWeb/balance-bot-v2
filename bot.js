const _0x160be7=_0x2139;(function(_0x1d0930,_0x1c9481){const _0x2f214a=_0x2139,_0xfce583=_0x1d0930();while(!![]){try{const _0x2e88b2=-parseInt(_0x2f214a(0x146))/0x1*(-parseInt(_0x2f214a(0x1dc))/0x2)+parseInt(_0x2f214a(0x210))/0x3*(parseInt(_0x2f214a(0x23f))/0x4)+-parseInt(_0x2f214a(0x1d9))/0x5*(parseInt(_0x2f214a(0x182))/0x6)+parseInt(_0x2f214a(0x1ae))/0x7*(-parseInt(_0x2f214a(0x152))/0x8)+parseInt(_0x2f214a(0x1d1))/0x9*(parseInt(_0x2f214a(0x12d))/0xa)+-parseInt(_0x2f214a(0x12f))/0xb+parseInt(_0x2f214a(0x114))/0xc;if(_0x2e88b2===_0x1c9481)break;else _0xfce583['push'](_0xfce583['shift']());}catch(_0x5c96d0){_0xfce583['push'](_0xfce583['shift']());}}}(_0x1cd6,0x2ee01));const _0x54f995=function(){let _0x1cc1c5=!![];return function(_0x3a8d82,_0x2226e5){const _0x20ec73=_0x1cc1c5?function(){const _0x182050=_0x2139;if(_0x2226e5){const _0x4758de=_0x2226e5[_0x182050(0x18b)](_0x3a8d82,arguments);return _0x2226e5=null,_0x4758de;}}:function(){};return _0x1cc1c5=![],_0x20ec73;};}(),_0x4b3b02=_0x54f995(this,function(){const _0x11304a=_0x2139;return _0x4b3b02['toString']()[_0x11304a(0xeb)](_0x11304a(0x13e))[_0x11304a(0x193)]()[_0x11304a(0xdf)](_0x4b3b02)[_0x11304a(0xeb)](_0x11304a(0x13e));});_0x4b3b02();'use strict';const ccxt=require(_0x160be7(0x236)),low=require('lowdb'),FileSync=require(_0x160be7(0x124)),fs=require('fs'),fns=require(_0x160be7(0x14e)),Crypt=require(_0x160be7(0xe2))[_0x160be7(0x12e)],util=require(_0x160be7(0x177)),argv=require(_0x160be7(0x191))(process[_0x160be7(0x1b0)][_0x160be7(0x1ed)](0x2))[_0x160be7(0x1b0)],path=require(_0x160be7(0x144));let exchange;global[_0x160be7(0x14b)]={},global[_0x160be7(0x14c)]={};const usdBasecoins=[_0x160be7(0x153),_0x160be7(0x1f4),_0x160be7(0x164),_0x160be7(0x208),_0x160be7(0x25d),_0x160be7(0x13c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x160be7(0x254)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x160be7(0x14d)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x160be7(0x10e))[_0x160be7(0x132)],botID=process['argv'][0x2]||_0x160be7(0x205),pattern=/^[0-9]{3}$/;!pattern[_0x160be7(0x106)](botID)&&(console[_0x160be7(0x170)](_0x160be7(0x187)+botID+_0x160be7(0x1b5)),killBot());const userID=process[_0x160be7(0x1b0)][0x3]||'',configpath=userID?_0x160be7(0x101)+userID+'/':_0x160be7(0x101),logspath=userID?_0x160be7(0x105)+userID+'/':_0x160be7(0x105),loggerfile=fs['createWriteStream'](logspath+_0x160be7(0x200),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x160be7(0x22c)](configpath);!fs[_0x160be7(0x24e)](logspath)&&fs[_0x160be7(0x22c)](logspath);const configfile=configpath+_0x160be7(0x126)+botID+_0x160be7(0x202),logfile=configpath+_0x160be7(0x126)+botID+_0x160be7(0x12c),performancefile=configpath+_0x160be7(0x126)+botID+_0x160be7(0x224),coinresultsfile=configpath+_0x160be7(0x126)+botID+_0x160be7(0xe0),settingsfile=configpath+_0x160be7(0x222),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x160be7(0x212),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x160be7(0x120)]({'logs':[],'version':serverversion})[_0x160be7(0x150)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x160be7(0x120)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x160be7(0x120)]({'bot':[],'version':serverversion})[_0x160be7(0x150)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x160be7(0x120)]({'coins':[],'version':serverversion})['write']();function _0x2139(_0x4f2f15,_0x88b102){const _0x1d6cef=_0x1cd6();return _0x2139=function(_0x4b3b02,_0x54f995){_0x4b3b02=_0x4b3b02-0xd5;let _0x1cd6dd=_0x1d6cef[_0x4b3b02];return _0x1cd6dd;},_0x2139(_0x4f2f15,_0x88b102);}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x160be7(0x14a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3a2aa7=>{console['log'](_0x3a2aa7);},'simple':_0xff4266=>{const _0x1261a1=_0x160be7;console[_0x1261a1(0x170)](_0xff4266),loggerfile[_0x1261a1(0x150)](util['format'](_0xff4266)+'\x0a');},'full':async(_0x3fff08,_0x5b0037='')=>{const _0x401b1c=_0x160be7;let _0x3ae170;if(config[_0x401b1c(0x1bf)])_0x3ae170=getTimeStamp()+':\x20'+config[_0x401b1c(0x1b9)]+_0x401b1c(0x199)+_0x3fff08;else _0x3ae170=getTimeStamp()+_0x401b1c(0x12a)+botID+'\x20>\x20'+_0x3fff08;console[_0x401b1c(0x170)](_0x3ae170),loggerfile['write'](util['format'](_0x3ae170)+'\x0a'),_0x5b0037&&(console[_0x401b1c(0x170)](_0x5b0037),loggerfile[_0x401b1c(0x150)](util[_0x401b1c(0xf3)](_0x5b0037)+'\x0a'));},'debug':async(_0x514865,_0x33da6f='')=>{const _0x11510c=_0x160be7;let _0x506b51;if(config[_0x11510c(0x1bf)])_0x506b51=getTimeStamp()+':\x20'+config[_0x11510c(0x1b9)]+_0x11510c(0x227)+_0x514865;else _0x506b51=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x514865;if(debugging)console[_0x11510c(0x170)](_0x506b51);loggerfile[_0x11510c(0x150)](util[_0x11510c(0xf3)](_0x506b51)+'\x0a');if(_0x33da6f){if(debugging)console[_0x11510c(0x170)](_0x33da6f);loggerfile['write'](util[_0x11510c(0xf3)](_0x33da6f)+'\x0a');}}};process['on']('uncaughtException',function(_0x102d8f){const _0x16bedc=_0x160be7;logHistory(_0x16bedc(0x1cf),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x16bedc(0x17e)](_0x16bedc(0x1bc),_0x102d8f);});settings[_0x160be7(0x15a)]!=config[_0x160be7(0x15a)]&&updateTimeshift(settings[_0x160be7(0x15a)]);settings[_0x160be7(0x1ad)]!=config[_0x160be7(0x1ad)]&&updateOnepagemode(settings['onepagemode']);process[_0x160be7(0xe6)]({'started':_0x160be7(0x21f)},_0x1ba596=>{}),initializeProcessListeners();function proxyEmit(_0x2eaa1b,_0x3bbd95=null){process['send']({'function':_0x2eaa1b,'args':_0x3bbd95},_0x4b63d9=>{});}function initializeProcessListeners(){const _0x1095fd=_0x160be7;process['on'](_0x1095fd(0x19d),_0x59f339=>{const _0x437419=_0x1095fd;switch(Object[_0x437419(0x25a)](_0x59f339)[0x0]){case _0x437419(0x15a):_0x59f339[_0x437419(0x15a)]!=undefined&&(settings['timeshift']=_0x59f339['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x437419(0x1ad):_0x59f339[_0x437419(0x1ad)]!=undefined&&(settings[_0x437419(0x1ad)]=_0x59f339[_0x437419(0x1ad)],updateOnepagemode(settings[_0x437419(0x1ad)]));break;case _0x437419(0x207):_0x59f339[_0x437419(0x207)]!=undefined&&(bots=JSON['parse'](_0x59f339[_0x437419(0x207)]),proxyEmit(_0x437419(0x207),bots));break;case _0x437419(0x1a4):switch(_0x59f339[_0x437419(0x1a4)]){case _0x437419(0x115):initclient();break;case _0x437419(0x256):toggleBotMode();break;case _0x437419(0x103):emitHistory(_0x59f339[_0x437419(0x211)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x59f339['args']);break;case _0x437419(0x1a8):getPortfolio(_0x59f339['args']);break;case _0x437419(0x251):storeConfiguration(_0x59f339[_0x437419(0x211)]);break;case _0x437419(0x22f):storeHeadless(_0x59f339['args']);break;case'storeFiat':storeFiat(_0x59f339[_0x437419(0x211)]);break;case _0x437419(0x1f3):resetHistory();break;case _0x437419(0xd8):getStartingBalances(getNormalizedPerformance());break;case _0x437419(0x1b8):placeOrder(_0x59f339[_0x437419(0x211)]);break;case _0x437419(0x1e4):cancelLoading();break;case _0x437419(0x1a0):showConfig();break;case _0x437419(0x1a1):sendMetricsTelegram();break;case _0x437419(0x203):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x2c4260=null,_0x29e6b4=![]){const _0x1eb245=_0x160be7;logger[_0x1eb245(0x17e)](_0x1eb245(0x1cb)+(_0x2c4260&&_0x2c4260[_0x1eb245(0x1cc)]>0x0?_0x1eb245(0x161)+_0x2c4260[_0x1eb245(0x22e)](','):_0x1eb245(0x17f))+_0x1eb245(0x194)+(_0x29e6b4?'exchange\x20reloaded':_0x1eb245(0x244))+_0x1eb245(0xf1)+config[_0x1eb245(0x179)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x29e6b4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1eb245(0x249)]!=''&&config['apiKey']!='***'){if(_0x29e6b4){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x12e38b){handleErrorNoStop(_0x12e38b,_0x1eb245(0x13d));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x2c4260);const _0xf33151=await getCoins();currentCoins=_0xf33151[0x0],currentCoinsAll=_0xf33151[0x1],exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1eb245(0x1cc)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2ca804=_0x160be7;exchangeStopped=!![];try{await exchange['close']();}catch(_0x17129a){await handleError(_0x17129a,_0x2ca804(0x23d));}}async function reloadExchange(){const _0xa0c267=_0x160be7;logger[_0xa0c267(0x17e)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0xa0c267(0x1a9)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xc1527b=config[_0x160be7(0x179)],_0x55f4f3=config['apiKey'],_0x2fca4c=config['apiSecret'],_0x165abd=config[_0x160be7(0x122)]){const _0x33cbeb=_0x160be7;exchange&&await stopExchange();!supportedExchanges()[_0x33cbeb(0xdb)](_0xc1527b)&&(logHistory(_0x33cbeb(0x1cf),_0x33cbeb(0x1e3)+_0xc1527b+_0x33cbeb(0x107)),killBot());const _0xeccf00=ccxt['pro'][_0xc1527b['toLowerCase']()];exchange=new _0xeccf00({'apiKey':_0x55f4f3,'secret':_0x2fca4c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x33cbeb(0x238)}});if(_0x165abd)exchange['password']=_0x165abd;}function setStableCoins(){const _0x3b7cfa=_0x160be7;let _0x3e6a05=config['basecoin']==_0x3b7cfa(0xfd)?'ETH':_0x3b7cfa(0x20d),_0x1f9492=!allSymbols['includes'](_0x3e6a05+_0x3b7cfa(0x181))?_0x3b7cfa(0x208):_0x3b7cfa(0x153),_0x38c57b=!allSymbols[_0x3b7cfa(0xdb)](_0x3e6a05+_0x3b7cfa(0x19c))?_0x1f9492:_0x3b7cfa(0x247);stablecoins={'eur':{'coin':''+_0x3e6a05+_0x38c57b,'symbol':_0x3e6a05+'/'+_0x38c57b},'usd':{'coin':''+_0x3e6a05+_0x1f9492,'symbol':_0x3e6a05+'/'+_0x1f9492}};}async function initwsCcxt(_0x21d915){const _0x2f5199=_0x160be7;_0x21d915==null&&(_0x21d915=[],config[_0x2f5199(0x136)]['forEach'](_0x59f076=>{const _0x370081=_0x2f5199;if(!_0x59f076[_0x370081(0x218)]&&_0x59f076['coin']!=config[_0x370081(0xe8)])_0x21d915[_0x370081(0xf2)](_0x59f076[_0x370081(0x11d)]);}));if(!_0x21d915[_0x2f5199(0xdb)](stablecoins[_0x2f5199(0x15d)][_0x2f5199(0x11d)]))_0x21d915[_0x2f5199(0xf2)](stablecoins[_0x2f5199(0x15d)][_0x2f5199(0x11d)]);if(!_0x21d915[_0x2f5199(0xdb)](stablecoins[_0x2f5199(0x1ee)][_0x2f5199(0x11d)]))_0x21d915[_0x2f5199(0xf2)](stablecoins[_0x2f5199(0x1ee)][_0x2f5199(0x11d)]);if(config[_0x2f5199(0x179)]['startsWith'](_0x2f5199(0x1c9))){if(!_0x21d915['includes'](_0x2f5199(0x24b)+config[_0x2f5199(0xe8)]))_0x21d915[_0x2f5199(0xf2)](_0x2f5199(0x24b)+config[_0x2f5199(0xe8)]);}loadCoins(_0x21d915);const _0x263ac4=async _0xb4b5bb=>{const _0x498526=_0x2f5199;let _0x2ed038;try{const _0x324f89=await exchange[_0x498526(0x155)](_0xb4b5bb);Object[_0x498526(0x252)](_0x324f89)['forEach'](_0x2883c0=>{const _0xd554c6=_0x498526;_0x2ed038=_0x2883c0[0x1]['symbol'],global[_0xd554c6(0x14b)][noslash(_0x2ed038)]=_0x2883c0[0x1][_0xd554c6(0x1c3)];});}catch(_0x202351){await handleError(_0x202351,_0x498526(0x216),_0x2ed038);}},_0x1d7eb8=async _0x56b84e=>{const _0x21a01e=_0x2f5199;while(!![]){if(!botPaused)try{const _0x11eca7=await exchange['watchTrades'](_0x56b84e);global[_0x21a01e(0x14b)][noslash(_0x11eca7[0x0]['symbol'])]=_0x11eca7[0x0][_0x21a01e(0x1f1)],await sleep(0x3e8);}catch(_0x51bcd6){if(!exchangeStopped)await handleError(_0x51bcd6,_0x21a01e(0x157),_0x56b84e);}else await sleep(0x64);}},_0x244e40=async _0x84f76d=>{const _0x15e5fb=_0x2f5199;while(!![]){if(!botPaused)try{const _0x3309b1=await exchange['fetchTicker'](_0x84f76d);global[_0x15e5fb(0x14c)][_0x3309b1[_0x15e5fb(0x11d)]]=_0x3309b1['percentage'],await sleep(0x3c*0x3e8);}catch(_0x113aea){if(!exchangeStopped)await handleError(_0x113aea,'fetchTickers',_0x84f76d);}else await sleep(0x64);}},_0x2b0f4e=async _0x4c2d22=>{const _0x35546f=_0x2f5199;while(!![]){if(!botPaused)try{const _0x579f95=await exchange[_0x35546f(0x21c)](_0x4c2d22);_0x579f95[_0x35546f(0x1ba)](_0x7e6216=>{updateNumberCoinsCcxt(_0x7e6216);});}catch(_0x13516e){if(!exchangeStopped)await handleError(_0x13516e,_0x35546f(0x21c));}else await sleep(0x64);}};_0x263ac4(_0x21d915),_0x21d915[_0x2f5199(0x1ba)](_0xdaf11d=>{_0x1d7eb8(_0xdaf11d),_0x244e40(_0xdaf11d),_0x2b0f4e(_0xdaf11d);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x40d8c8=_0x160be7;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5e2085=await getCoins(),[_0x375ff0,_0x232b60]=_0x5e2085;let _0x559d70=[];currentCoins[_0x40d8c8(0x1ba)](_0x36138d=>{const _0x7b5f31=_0x40d8c8,_0x225a8c=_0x375ff0[_0x7b5f31(0x18e)](_0xecb33d=>_0xecb33d[_0x7b5f31(0x11f)]==_0x36138d['coin']);if(_0x225a8c){if(_0x36138d['number']!=_0x225a8c[_0x7b5f31(0x259)]){let _0x319cd2;if(_0x36138d[_0x7b5f31(0x11f)]!=config[_0x7b5f31(0xe8)]){const _0x89211e=global[_0x7b5f31(0x14b)][noslash(_0x36138d[_0x7b5f31(0x11d)])];_0x319cd2=_0x36138d[_0x7b5f31(0x1d6)]?0x1/_0x89211e:_0x89211e;}else _0x319cd2=0x1;_0x559d70[_0x7b5f31(0xf2)]({'coin':_0x36138d[_0x7b5f31(0x11f)],'symbol':_0x36138d[_0x7b5f31(0x11d)],'price':_0x319cd2,'number':Number(formatResult(_0x225a8c[_0x7b5f31(0x259)]-_0x36138d['number'],0x8)),'basecoinvalue':_0x319cd2*(_0x225a8c[_0x7b5f31(0x259)]-_0x36138d['number'])});}}});if(_0x559d70[_0x40d8c8(0x1cc)]==0x1&&!blockTransactionDetection){if(config[_0x40d8c8(0x1c0)]){logger[_0x40d8c8(0x17e)](_0x40d8c8(0x20a)+_0x559d70[0x0][_0x40d8c8(0x141)]+_0x40d8c8(0x168)+lastFees[_0x40d8c8(0x142)]);if(lastFees[_0x40d8c8(0x142)]==0x0||Math[_0x40d8c8(0x16b)](_0x559d70[0x0][_0x40d8c8(0x141)])>lastFees[_0x40d8c8(0x142)]){delete _0x559d70[0x0]['symbol'],delete _0x559d70[0x0][_0x40d8c8(0x141)];let _0x3ed90f=[],_0x1a2c56=[...config[_0x40d8c8(0x258)]]||[],_0x42bd0c=config[_0x40d8c8(0x258)];_0x1a2c56['sort']((_0x243054,_0x493447)=>_0x243054[_0x40d8c8(0x10d)]>_0x493447[_0x40d8c8(0x10d)]?-0x1:_0x493447[_0x40d8c8(0x10d)]>_0x243054['date']?0x1:0x0);const _0x42bd0e=getDate();if(_0x1a2c56[0x0]){const _0x290c51=fns[_0x40d8c8(0x206)](_0x1a2c56[0x0][_0x40d8c8(0x10d)],_0x40d8c8(0x1d7),new Date()),_0x3e493b=fns[_0x40d8c8(0x206)](_0x42bd0e,_0x40d8c8(0x1d7),new Date());if(fns[_0x40d8c8(0x214)](_0x290c51,_0x3e493b)){_0x3ed90f=_0x1a2c56[0x0][_0x40d8c8(0x209)];const _0x327408=_0x3ed90f[_0x40d8c8(0x18e)](_0x43ecd9=>_0x43ecd9[_0x40d8c8(0x11f)]==_0x559d70[0x0][_0x40d8c8(0x11f)]);_0x327408?(_0x327408[_0x40d8c8(0x259)]+=_0x559d70[0x0]['number'],_0x327408[_0x40d8c8(0x259)]==0x0&&(_0x3ed90f=_0x3ed90f[_0x40d8c8(0x19a)](_0x19e262=>{const _0x5bec53=_0x40d8c8;return _0x19e262[_0x5bec53(0x11f)]!=_0x559d70[0x0][_0x5bec53(0x11f)];}))):_0x3ed90f[_0x40d8c8(0xf2)](_0x559d70[0x0]);const _0x4d6e7a=_0x42bd0c[_0x40d8c8(0x18e)](_0x3d5405=>_0x3d5405[_0x40d8c8(0x10d)]==_0x42bd0e);_0x4d6e7a['changes']=_0x3ed90f;}else _0x42bd0c[_0x40d8c8(0xf2)]({'date':_0x42bd0e,'changes':[_0x559d70[0x0]]});}const _0x30be2b=_0x42bd0c['find'](_0x48eae3=>_0x48eae3[_0x40d8c8(0x10d)]==_0x42bd0e);if(_0x30be2b){let _0x47c97e=!![];_0x30be2b[_0x40d8c8(0x209)]['forEach'](_0x12995c=>{const _0x1091e7=_0x40d8c8;if(_0x12995c[_0x1091e7(0x259)]!=0x0)_0x47c97e=![];}),_0x47c97e&&(_0x42bd0c=_0x42bd0c[_0x40d8c8(0x19a)](_0x5c3fa0=>{const _0x24749d=_0x40d8c8;return _0x5c3fa0[_0x24749d(0x10d)]!=_0x42bd0e;}));}let _0x185322=dbConfig[_0x40d8c8(0x163)](_0x40d8c8(0x24a))['find']({'botID':botID})['value']();_0x185322&&(dbConfig[_0x40d8c8(0x163)](_0x40d8c8(0x24a))['find']({'botID':botID})[_0x40d8c8(0x149)]({'liquidity':_0x42bd0c})[_0x40d8c8(0x150)](),config[_0x40d8c8(0x258)]=_0x42bd0c),logHistory('success',_0x40d8c8(0x23c)+Math[_0x40d8c8(0x16b)](_0x559d70[0x0]['number'])+'\x20'+_0x559d70[0x0][_0x40d8c8(0x11f)]+'\x20'+(_0x559d70[0x0]['number']>0x0?_0x40d8c8(0x25b):_0x40d8c8(0x1b4))+_0x40d8c8(0x204)),proxyEmit(_0x40d8c8(0x10b),emittedConfiguration());}else logger[_0x40d8c8(0x17e)](_0x40d8c8(0x19b)+Math[_0x40d8c8(0x16b)](_0x559d70[0x0]['number'])+'\x20'+_0x559d70[0x0][_0x40d8c8(0x11f)]+'\x20'+(_0x559d70[0x0][_0x40d8c8(0x259)]>0x0?'added':'removed'));transactionDetected=!![],currentCoins=_0x375ff0,currentCoinsAll=_0x232b60;}else logger[_0x40d8c8(0x17e)](_0x40d8c8(0x23c)+Math[_0x40d8c8(0x16b)](_0x559d70[0x0][_0x40d8c8(0x259)])+'\x20'+_0x559d70[0x0]['coin']+'\x20'+(_0x559d70[0x0][_0x40d8c8(0x259)]>0x0?_0x40d8c8(0x25b):'removed')+_0x40d8c8(0x10f)),currentCoins=_0x375ff0,currentCoinsAll=_0x232b60;}await sleep(watchTransactionsInterval);}catch(_0x3ceca8){if(!exchangeStopped)await handleError(_0x3ceca8,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(){const _0x69791b=_0x160be7;try{markets=await exchange[_0x69791b(0x19f)](),allSymbols=[],Object[_0x69791b(0x252)](markets)[_0x69791b(0x1ba)](_0x1af70=>{const _0x4ba2a9=_0x69791b;_0x1af70[0x1][_0x4ba2a9(0x201)]&&_0x1af70[0x1][_0x4ba2a9(0x238)]&&allSymbols['push'](_0x1af70[0x0]);});}catch(_0x1a0686){throw _0x1a0686;}}async function initclient(){const _0x41222f=_0x160be7;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x41222f(0x1d4),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x41222f(0x158),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4a8d9e=getNormalizedPerformance();emitPerformance(_0x4a8d9e),getStartingBalances(_0x4a8d9e);}async function toggleBotMode(){const _0x42c750=_0x160be7;let _0x25dc11=dbConfig['get'](_0x42c750(0x24a))['find']({'botID':botID})[_0x42c750(0x213)]();if(_0x25dc11){const _0x4f70af=!_0x25dc11[_0x42c750(0x16e)];dbConfig[_0x42c750(0x163)](_0x42c750(0x24a))[_0x42c750(0x18e)]({'botID':botID})['assign']({'headless':_0x4f70af})[_0x42c750(0x150)](),config[_0x42c750(0x16e)]=_0x4f70af,proxyEmit(_0x42c750(0x10b),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x14c989=_0x160be7;process[_0x14c989(0xe6)]({'updatebotmanager':!![]},_0xbb31f3=>{});}async function loadCoins(_0x236223){const _0x39552f=_0x160be7;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x28cbf9,_0x49181f=0x0,_0x38eaed=0x0;const _0x2a67f3=0x1;_0x236223[_0x39552f(0x1ba)](_0x140578=>{const _0x545817=_0x39552f;loading[_0x545817(0x1a7)][_0x545817(0xf2)](_0x140578);}),loadingCanceled=![];let _0x4e2772=![];while(_0x28cbf9!=_0x236223[_0x39552f(0x1cc)]+_0x2a67f3){_0x28cbf9=0x0,_0x236223['forEach'](_0x3484df=>{const _0x42ce6d=_0x39552f;if(global[_0x42ce6d(0x14b)][noslash(_0x3484df)]){loading['remainingSymbols']=loading[_0x42ce6d(0x1a7)][_0x42ce6d(0x19a)](_0x268603=>_0x268603!=_0x3484df);if(!watchedSymbols[_0x42ce6d(0xdb)](_0x3484df))watchedSymbols[_0x42ce6d(0xf2)](_0x3484df);_0x28cbf9++;}});currentCoins[_0x39552f(0x1cc)]>0x0&&(_0x28cbf9+=_0x2a67f3);loading[_0x39552f(0xfa)]=Math[_0x39552f(0x1e9)](_0x28cbf9/(_0x236223['length']+_0x2a67f3)*0x64);loading[_0x39552f(0xfa)]!=0x64&&(_0x38eaed>0x1e*0x5&&(loading[_0x39552f(0xef)]=!![],emitLoadingProgress()),_0x38eaed>0x78*0x5&&!_0x4e2772&&(loading[_0x39552f(0x217)]=!![],emitLoadingProgress(),_0x4e2772=!![],logHistory(_0x39552f(0x1cf),_0x39552f(0x185)+loading[_0x39552f(0x1a7)][_0x39552f(0x22e)](',\x20')+_0x39552f(0x1ea)),logHistory('error',_0x39552f(0x188)+loadCoinsRetryInterval/0xea60+_0x39552f(0x18d)),pidCoinReloading=setTimeout(()=>{const _0xa1adfe=_0x39552f;process['send']({'stop':_0xa1adfe(0x20b)},_0x307cd9=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x39552f(0x217)]=!![],emitLoadingProgress();break;}else _0x49181f!=loading['progress']&&(_0x49181f=loading[_0x39552f(0xfa)],emitLoadingProgress()),_0x38eaed++,await sleep(0xc8);}_0x28cbf9==_0x236223[_0x39552f(0x1cc)]+_0x2a67f3&&(coinsLoaded=!![],process[_0x39552f(0xe6)]({'status':_0x39552f(0x228),'live':_0x39552f(0x21f)},_0x3fc88a=>{}),_0x4e2772&&logHistory(_0x39552f(0x104),_0x39552f(0x154)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x20ad05=_0x160be7;proxyEmit(_0x20ad05(0x1ff),loading);}async function getFiat(){const _0x232a92=_0x160be7;let _0xefa329=global[_0x232a92(0x14b)][stablecoins['eur']['coin']],_0x24ec1f=global['ticker'][stablecoins[_0x232a92(0x1ee)][_0x232a92(0x11f)]];return{'eur':Number(_0xefa329),'usd':Number(_0x24ec1f)};}function capitalize(_0x31d380){const _0x431572=_0x160be7;return _0x31d380[_0x431572(0x1c5)](0x0,0x1)[_0x431572(0x1e6)]()+_0x31d380[_0x431572(0x1c5)](0x1);}function supportedExchanges(){const _0x41f001=_0x160be7,_0x33ae17=['ws',_0x41f001(0x155),_0x41f001(0xda),_0x41f001(0x1c2),'watchOrders',_0x41f001(0x140),_0x41f001(0x176),_0x41f001(0xff),_0x41f001(0x184),_0x41f001(0x1c8)];let _0x1a7ce9=[],_0x4d1351=[],_0x1bc2a0=ccxt[_0x41f001(0x20e)][_0x41f001(0x1d4)];_0x1bc2a0['forEach'](_0x2b7799=>{const _0x32e992=_0x41f001;try{const _0x51bd52=new ccxt[(_0x32e992(0x20e))][_0x2b7799]();_0x4d1351[_0x32e992(0xf2)](_0x51bd52);}catch(_0xef3b2e){}}),_0x4d1351['forEach'](_0x18e487=>{const _0x5d8ba7=_0x41f001;let _0x873907=0x0;_0x33ae17['forEach'](_0x52c4ec=>{_0x52c4ec in _0x18e487['has']&&_0x18e487['has'][_0x52c4ec]&&_0x873907++;}),_0x873907==_0x33ae17[_0x5d8ba7(0x1cc)]&&_0x1a7ce9[_0x5d8ba7(0xf2)](capitalize(_0x18e487['id']));});let _0x3f580a=[];return _0x1bc2a0[_0x41f001(0x1ba)](_0x2bc8cd=>{const _0x4a78d3=_0x41f001;_0x2bc8cd=capitalize(_0x2bc8cd);if(!_0x1a7ce9['includes'](_0x2bc8cd))_0x3f580a[_0x4a78d3(0xf2)](_0x2bc8cd);}),_0x1a7ce9;}function setStartDatePerformance(){const _0x416eb0=_0x160be7;if(config&&config[_0x416eb0(0x258)][0x0]['changes']['length']!=0x0){const _0x3de55e=config[_0x416eb0(0x258)][0x0][_0x416eb0(0x209)];dbPerformance['get'](_0x416eb0(0x100))['find']({'date':config[_0x416eb0(0x195)]})[_0x416eb0(0x149)]({'coins':_0x3de55e})[_0x416eb0(0x150)]();}}async function recreateCoinResults(){const _0x3076c3=_0x160be7;let _0x393259,_0x1dcaf2=[];try{const _0x31a8c7=fns[_0x3076c3(0xf3)](fns['parseISO'](config[_0x3076c3(0x195)]['replace'](/\//g,'-')),_0x3076c3(0x151));for(const _0x2c0a23 of currentCoins){if(_0x2c0a23[_0x3076c3(0x11f)]!=config[_0x3076c3(0xe8)]){let _0x3c8b50=0x0,_0x299d82,_0x594b78;_0x393259=await getAllEventOrders(_0x2c0a23[_0x3076c3(0x11d)]);if(_0x393259[_0x3076c3(0x1cc)]>0x0)_0x393259[_0x3076c3(0x1ba)](_0x2e6694=>{const _0x4f86e2=_0x3076c3,_0x4f46de=_0x2c0a23['symbol']['includes'](config[_0x4f86e2(0xe8)]+'/');_0x1dcaf2['push']({'datetime':_0x2e6694[_0x4f86e2(0x22a)],'coin':_0x2c0a23[_0x4f86e2(0x11f)],'symbol':_0x2c0a23[_0x4f86e2(0x11d)],'side':_0x2e6694[_0x4f86e2(0x225)],'reverse':_0x4f46de,'amount':formatResult(_0x2e6694['filled'],0x8),'filled':formatResult(_0x2e6694['filled'],0x8),'price':formatResult(_0x2e6694[_0x4f86e2(0x1f1)],0x8)}),_0x3c8b50=_0x2e6694['side']=='buy'?_0x3c8b50+_0x2e6694[_0x4f86e2(0x137)]:_0x3c8b50-_0x2e6694['filled'];if(!_0x594b78)_0x594b78=_0x2e6694[_0x4f86e2(0x1f1)];});_0x299d82=_0x2c0a23[_0x3076c3(0x259)]-_0x3c8b50;let _0x59e4d8;config['liquidity'][_0x3076c3(0x1ba)](_0x342281=>{const _0x4a34fc=_0x3076c3;!_0x59e4d8&&(_0x59e4d8=_0x342281[_0x4a34fc(0x209)][_0x4a34fc(0x18e)](_0x424fd1=>_0x424fd1['coin']==_0x2c0a23[_0x4a34fc(0x11f)]),_0x59e4d8&&(_0x299d82=_0x59e4d8['number'],_0x594b78=_0x59e4d8['price']));});let _0x34b090=dbCoinResults[_0x3076c3(0x163)](_0x3076c3(0x1df))[_0x3076c3(0x18e)]({'coin':_0x2c0a23['coin']})[_0x3076c3(0x213)]();_0x34b090={'coin':_0x2c0a23[_0x3076c3(0x11f)],'number':_0x299d82,'breakeven':_0x594b78,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3076c3(0x163)](_0x3076c3(0x1df))[_0x3076c3(0x18e)]({'coin':_0x2c0a23[_0x3076c3(0x11f)]})['assign'](_0x34b090)['write']();}}_0x1dcaf2[_0x3076c3(0x1e8)]((_0x5da0a0,_0x4e2b36)=>_0x5da0a0[_0x3076c3(0x22a)]>_0x4e2b36[_0x3076c3(0x22a)]?0x1:_0x4e2b36[_0x3076c3(0x22a)]>_0x5da0a0[_0x3076c3(0x22a)]?-0x1:0x0);let _0x37d744=0x0;for(let _0x3ed908 of _0x1dcaf2){await updateCoinResults(_0x3ed908,!![]);}}catch(_0xcd2836){await handleError(_0xcd2836,_0x3076c3(0x17a));}}async function getAllEventOrders(_0x55df1f){const _0x276436=_0x160be7;let _0x4d4b9b=[],_0xc13d5a=dbLogs[_0x276436(0x163)](_0x276436(0x23a))['filter'](_0x363d5f=>{const _0x424685=_0x276436,_0x926c1e=_0x363d5f['event'][_0x424685(0x121)]();return _0x926c1e[_0x424685(0xdb)](_0x55df1f[_0x424685(0x121)]())&&(_0x926c1e[_0x424685(0xdb)](_0x424685(0xd5))&&_0x926c1e[_0x424685(0xdb)](_0x424685(0x15e))||_0x926c1e['includes'](_0x424685(0x137))&&_0x926c1e[_0x424685(0xdb)](_0x424685(0x15e)));})[_0x276436(0x18c)]('time')[_0x276436(0x213)]();return _0xc13d5a[_0x276436(0x1ba)](_0x44a7fd=>{const _0x1d8b21=_0x276436,_0x48758d=_0x44a7fd[_0x1d8b21(0x109)][_0x1d8b21(0xdb)]('sell')?_0x1d8b21(0x189):_0x1d8b21(0x219),_0x7e2d7d=/#([0-9]|\.)+\s/i,_0x243a6e=Number(_0x7e2d7d['exec'](_0x44a7fd['event'])[0x0][_0x1d8b21(0x1ed)](0x1)),_0x4f120f=/@([0-9]|\.)+$/i,_0x4e1115=Number(_0x4f120f[_0x1d8b21(0x20c)](_0x44a7fd['event'])[0x0][_0x1d8b21(0x1ed)](0x1));_0x4d4b9b[_0x1d8b21(0xf2)]({'datetime':_0x44a7fd[_0x1d8b21(0x1a6)],'coin':symbolToCoin(_0x55df1f),'symbol':_0x55df1f,'side':_0x48758d,'amount':_0x243a6e,'filled':_0x243a6e,'price':_0x4e1115});}),_0x4d4b9b;}async function getAllOrders(_0x260223,_0x22c616){const _0x1e9e23=_0x160be7;let _0x5160d7=[];while(_0x22c616<exchange['milliseconds']()){const _0x2d7396=0x1f4;try{const _0x348409=await exchange['fetchClosedOrders'](_0x260223,_0x22c616,_0x2d7396);if(_0x348409[_0x1e9e23(0x1cc)])_0x22c616=_0x348409[_0x348409['length']-0x1][_0x1e9e23(0x15f)]+0x1,_0x5160d7=_0x5160d7[_0x1e9e23(0x135)](_0x348409);else break;}catch(_0x37c60e){await handleError(_0x37c60e,'getAllOrders',_0x260223);}}return _0x5160d7;}async function validate24hChanges(){const _0x591321=_0x160be7;for(const _0x2b3b35 of currentCoins){if(_0x2b3b35[_0x591321(0x11f)]!=config[_0x591321(0xe8)]){let _0x375fe5;_0x2b3b35[_0x591321(0x1d6)]?_0x375fe5=formatResult((0x1/(global[_0x591321(0x14c)][noslash(_0x2b3b35['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x375fe5=global[_0x591321(0x14c)][noslash(_0x2b3b35[_0x591321(0x11d)])],_0x375fe5<config[_0x591321(0x1e1)]&&(logHistory(_0x591321(0x1cf),_0x2b3b35['coin']+_0x591321(0x1b2)+_0x375fe5+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x297ec1,_0x14efe9){const _0x1f60ea=_0x160be7;if(!_0x297ec1)return!![];const _0x1674ac=_0x14efe9[_0x1f60ea(0x235)]('.'),_0x2d0f63=_0x297ec1[_0x1f60ea(0x235)]('.');for(var _0x486258=0x0;_0x486258<_0x2d0f63[_0x1f60ea(0x1cc)];_0x486258++){const _0x251992=~~_0x2d0f63[_0x486258],_0x3f2db3=~~_0x1674ac[_0x486258];if(_0x251992<_0x3f2db3)return!![];if(_0x251992>_0x3f2db3)return![];}return![];}async function oneTimeMigration(){const _0x1301f3=_0x160be7;let _0x2f3e7c=dbLogs['get']('version')[_0x1301f3(0x213)]();if(isOlderVersion(_0x2f3e7c,_0x1301f3(0x1b3))){let _0x328fca=[];const _0x4503af=dbLogs[_0x1301f3(0x163)]('logs')['value']();_0x4503af[_0x1301f3(0x1ba)](_0x827f26=>{const _0x2df3fc=_0x1301f3;_0x328fca[_0x2df3fc(0xf2)]({'time':_0x827f26[_0x2df3fc(0x1a6)],'type':_0x827f26['type'],'event':_0x827f26[_0x2df3fc(0x109)]});}),dbLogs['get'](_0x1301f3(0x23a))['assign'](_0x328fca)[_0x1301f3(0x150)]();}let _0x3c0afc=dbConfig['get']('version')[_0x1301f3(0x213)]();if(isOlderVersion(_0x3c0afc,_0x1301f3(0x1b3))){let _0x5b5294=dbConfig[_0x1301f3(0x163)](_0x1301f3(0x24a))['find']({'botID':botID})[_0x1301f3(0x213)]();if(_0x5b5294){let _0x31c543=[];_0x5b5294[_0x1301f3(0x136)][_0x1301f3(0x1ba)](_0x142bbc=>{const _0x29b1cf=_0x1301f3;_0x31c543[_0x29b1cf(0xf2)]({'coin':_0x142bbc['coin'],'number':_0x142bbc[_0x29b1cf(0x23b)],'price':_0x142bbc[_0x29b1cf(0x138)]}),delete _0x142bbc[_0x29b1cf(0x23b)],delete _0x142bbc['startprice'];});if(_0x31c543[_0x1301f3(0x1cc)]!==0x0)fs['writeFile'](configbackuppath+(_0x1301f3(0x116)+botID+_0x1301f3(0x1e0)),JSON['stringify'](_0x31c543,null,0x4),function(_0x51402e){if(_0x51402e){}});const _0x55deaf=(_0x44988d,_0x3a1ca2)=>{const _0x16052d=_0x1301f3;let _0x1a3000=[];_0x3a1ca2['forEach'](_0x3eb4b1=>{const _0xa77894=_0x2139,_0x1c6919=_0x44988d[_0xa77894(0x18e)](_0x304d11=>_0x304d11[_0xa77894(0x11f)]==_0x3eb4b1[_0xa77894(0x11f)]);if(!_0x1c6919)_0x1a3000[_0xa77894(0xf2)](_0x3eb4b1);});let _0x4788c0=[];return _0x44988d[_0x16052d(0x1ba)](_0x3439ee=>{const _0x36737f=_0x16052d,_0x20bff4=_0x3a1ca2[_0x36737f(0x18e)](_0x460a3f=>_0x460a3f['coin']==_0x3439ee['coin']);if(!_0x20bff4||_0x20bff4[_0x36737f(0x259)]==0x0&&_0x3439ee[_0x36737f(0x259)]!=0x0)_0x4788c0[_0x36737f(0xf2)](_0x3439ee);}),{'missingDay1':_0x1a3000,'notInDay2':_0x4788c0};},_0x250d4b=dbPerformance[_0x1301f3(0x163)](_0x1301f3(0x100))['cloneDeep']()[_0x1301f3(0x213)]();if(_0x250d4b[_0x1301f3(0x1cc)]>0x1){const {missingDay1:_0x18bcda,notInDay2:_0x112eda}=_0x55deaf(_0x31c543,_0x250d4b[0x1][_0x1301f3(0x1df)]);_0x31c543=[..._0x31c543,..._0x18bcda],_0x112eda['forEach'](_0x5f1c95=>{const _0x416d78=_0x1301f3;let _0x27042a=_0x31c543['findIndex'](_0x4741cb=>_0x4741cb[_0x416d78(0x11f)]==_0x5f1c95[_0x416d78(0x11f)]);_0x27042a!=-0x1&&_0x31c543['splice'](_0x27042a,0x1);});}_0x31c543[_0x1301f3(0x1e8)]((_0x90b968,_0x5d9b04)=>_0x90b968[_0x1301f3(0x11f)]>_0x5d9b04['coin']?0x1:_0x5d9b04[_0x1301f3(0x11f)]>_0x90b968[_0x1301f3(0x11f)]?-0x1:0x0);let _0x3c0e89=[{'date':_0x5b5294['startdate'],'changes':_0x31c543}];_0x250d4b['length']>0x2&&_0x250d4b[_0x1301f3(0x1ba)]((_0xccd12f,_0x2b518e)=>{const _0x5e3c4e=_0x1301f3;if(_0x2b518e>0x0&&_0x2b518e<_0x250d4b['length']-0x1){const {missingDay1:_0x104f54,notInDay2:_0x37960b}=_0x55deaf(_0x250d4b[_0x2b518e][_0x5e3c4e(0x1df)],_0x250d4b[_0x2b518e+0x1][_0x5e3c4e(0x1df)]);_0x31c543=[],(_0x104f54[_0x5e3c4e(0x1cc)]!=0x0||_0x37960b['length']!=0x0)&&(_0x104f54[_0x5e3c4e(0x1cc)]!=0x0&&_0x31c543[_0x5e3c4e(0xf2)](..._0x104f54),_0x37960b['length']!=0x0&&(_0x37960b[_0x5e3c4e(0x1ba)](_0x6cc30d=>{const _0x5c8cb6=_0x5e3c4e;_0x6cc30d[_0x5c8cb6(0x259)]=-_0x6cc30d[_0x5c8cb6(0x259)];}),_0x31c543[_0x5e3c4e(0xf2)](..._0x37960b)),_0x31c543[_0x5e3c4e(0x1e8)]((_0x39c15f,_0x2a276c)=>_0x39c15f['coin']>_0x2a276c[_0x5e3c4e(0x11f)]?0x1:_0x2a276c[_0x5e3c4e(0x11f)]>_0x39c15f['coin']?-0x1:0x0),_0x3c0e89[_0x5e3c4e(0xf2)]({'date':_0x250d4b[_0x2b518e+0x1][_0x5e3c4e(0x10d)],'changes':_0x31c543}));}}),dbConfig['get'](_0x1301f3(0x24a))[_0x1301f3(0x18e)]({'botID':botID})[_0x1301f3(0x149)]({..._0x5b5294,'liquidity':_0x3c0e89})['write']();}}if(isOlderVersion(_0x3c0afc,_0x1301f3(0x232))){let _0x42f2c9=dbConfig[_0x1301f3(0x163)](_0x1301f3(0x24a))[_0x1301f3(0x18e)]({'botID':botID})[_0x1301f3(0x213)]();if(_0x42f2c9){const _0x3b4313=_0x42f2c9[_0x1301f3(0x179)],_0x59775a=_0x3b4313?capitalize(_0x3b4313):_0x1301f3(0x1c9);dbConfig[_0x1301f3(0x163)](_0x1301f3(0x24a))['find']({'botID':botID})[_0x1301f3(0x149)]({'exchange':_0x59775a})[_0x1301f3(0x150)]();}}let _0x1477e5=dbPerformance['get'](_0x1301f3(0x132))['value']();isOlderVersion(_0x1477e5,_0x1301f3(0x1b3))&&setStartDatePerformance();let _0x12e2a8=dbCoinResults[_0x1301f3(0x163)](_0x1301f3(0x132))[_0x1301f3(0x213)]();if(isOlderVersion(_0x12e2a8,'2.5.0')){let _0x37720d=dbCoinResults['get'](_0x1301f3(0x1df))[_0x1301f3(0x213)]();if(_0x37720d[_0x1301f3(0x1cc)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x56eead=_0x160be7;dbConfig[_0x56eead(0x1d0)](_0x56eead(0x132),serverversion)[_0x56eead(0x150)](),dbPerformance[_0x56eead(0x1d0)](_0x56eead(0x132),serverversion)[_0x56eead(0x150)](),dbLogs[_0x56eead(0x1d0)](_0x56eead(0x132),serverversion)[_0x56eead(0x150)](),dbCoinResults[_0x56eead(0x1d0)](_0x56eead(0x132),serverversion)[_0x56eead(0x150)]();}function getConfiguration(_0x161b45){const _0xc6c2b8=_0x160be7;let _0x428615=dbConfig[_0xc6c2b8(0x163)](_0xc6c2b8(0x24a))[_0xc6c2b8(0x18e)]({'botID':_0x161b45})[_0xc6c2b8(0x213)]();if(_0x428615){let _0x32d4ea=![];typeof _0x428615[_0xc6c2b8(0xf5)]=='string'&&(_0x428615={..._0x428615,'threshold':Number(_0x428615[_0xc6c2b8(0xf5)])},_0x32d4ea=!![]),_0x428615[_0xc6c2b8(0x1e1)]==undefined&&(_0x428615={..._0x428615,'change24h':-0x14},_0x32d4ea=!![]),_0x428615[_0xc6c2b8(0xe7)]==undefined&&(_0x428615={..._0x428615,'fiat':'USD'},_0x32d4ea=!![]),_0x428615[_0xc6c2b8(0x1ad)]==undefined&&(_0x428615={..._0x428615,'onepagemode':settings[_0xc6c2b8(0x1ad)]},_0x32d4ea=!![]),_0x428615[_0xc6c2b8(0x13a)]==undefined&&(_0x428615={..._0x428615,'colorscheme':_0xc6c2b8(0xfb)},_0x32d4ea=!![]),_0x428615[_0xc6c2b8(0x1c0)]==undefined&&(_0x428615={..._0x428615,'autoliquidity':!![]},_0x32d4ea=!![]),_0x32d4ea&&(_0x428615={'botID':_0x428615['botID'],'exchange':_0x428615[_0xc6c2b8(0x179)],'apiKey':_0x428615[_0xc6c2b8(0x249)],'apiSecret':_0x428615[_0xc6c2b8(0x117)],'apiPassword':_0x428615['apiPassword'],'basecoin':_0x428615[_0xc6c2b8(0xe8)],'botname':_0x428615[_0xc6c2b8(0x1b9)],'showname':_0x428615[_0xc6c2b8(0x1bf)],'threshold':_0x428615['threshold'],'ordertype':_0x428615['ordertype'],'timeout':_0x428615[_0xc6c2b8(0xef)],'fiat':_0x428615['fiat'],'startdate':_0x428615[_0xc6c2b8(0x195)],'recreate':_0x428615['recreate'],'timeshift':_0x428615[_0xc6c2b8(0x15a)],'onepagemode':_0x428615[_0xc6c2b8(0x1ad)],'headless':_0x428615[_0xc6c2b8(0x16e)],'cooldown':_0x428615['cooldown'],'change24h':_0x428615[_0xc6c2b8(0x1e1)],'emojibuy':_0x428615[_0xc6c2b8(0x22b)],'emojisell':_0x428615[_0xc6c2b8(0x1d3)],'colorscheme':_0x428615[_0xc6c2b8(0x13a)],'portfolio':_0x428615[_0xc6c2b8(0x136)],'autoliquidity':_0x428615[_0xc6c2b8(0x1c0)],'liquidity':_0x428615['liquidity'],'openOrders':_0x428615['openOrders']},dbConfig[_0xc6c2b8(0x163)](_0xc6c2b8(0x24a))[_0xc6c2b8(0x250)]()[_0xc6c2b8(0x150)](),dbConfig[_0xc6c2b8(0x163)](_0xc6c2b8(0x24a))[_0xc6c2b8(0xf2)](_0x428615)[_0xc6c2b8(0x150)]());}else _0x428615={'botID':_0x161b45,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xc6c2b8(0x1ca)+_0x161b45,'showname':![],'threshold':0x3,'ordertype':_0xc6c2b8(0xd5),'timeout':0x14,'fiat':_0xc6c2b8(0x153),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xc6c2b8(0x15a)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xc6c2b8(0xfb),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x428615;}function _0x1cd6(){const _0x19a7d2=['currency','apply','sortBy','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','find','leftTxt','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','yargs/yargs','splice','toString','\x20|\x20','startdate','Manual\x20balancing\x20required','privateKey','2\x20-\x20FILLED\x20unknown\x20order:\x20','\x20>\x20','filter','Fee\x20discount\x20refund\x20detected:\x20','/EUR','message','DDoSProtection','loadMarkets','showConfig','sendMetricsTelegram','delta','limit-low','function','\x20not\x20responding','time','remainingSymbols','getPortfolio','Executing\x20exchange\x20reload','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','InvalidOrder','getFullYear','onepagemode','2453164TaQePy','warning','argv','replace','\x20has\x20a\x2024h\x20drop\x20of\x20','2.3.5','removed',',\x20must\x20be\x20a\x203\x20digit\x20number','getDate','recovery','placeOrder','botname','forEach','total','Uncaught\x20Exception:','stringify','openOrders','showname','autoliquidity','<b>Bot\x20','watchTrades','last','ORDERS.LOCKED','substring','OnMaintenance','net-basecoin','fetchBalance','Binance','Bot\x20','Reset\x20|\x20','length','***','\x20exchange\x20error','error','set','45QFVqLx','Huobi','emojisell','exchanges','realized','reverse','yyyy/MM/dd','unlinkSync','505625UzTxsU','trade','getMonth','614NswpwO','Limit\x20(low-margin)','\x20metrics:</b>\x20\x0a\x0a','coins','.json','change24h','fromCodePoint','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','cancelLoading','canceled','toUpperCase','getPortfolio(2)','sort','round','\x20-\x20bot\x20not\x20started','decrypt','1\x20-\x20FILLED:\x20','slice','usd','cost','placeOrder()','price','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','resetHistory','BUSD','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20minutes\x20-\x20','</pre>','getOpenOrders()','Order\x20amount\x20is\x20invalid:\x20','2\x20-\x20Handled\x20open\x20orders','Huobipro','initial','Bitget','fee','coin-loading-progress','/output-000.log','active','-config.json','sendPortfolioTelegram','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','001','parse','bots','USDT','changes','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','restart','exec','BTC','pro','\x20|\x20Error\x20details:','15zJQopD','args','/backup/','value','isEqual','2\x20-\x20Orders\x20unlocked','initTickers()','cancel','excluded','buy','getSeconds','recent20','watchOrders','open','full','running','Net\x20','shift','bb-settings.json','has','-performance.json','side','min','\x20>\x20[DEBUG]\x20','enabled','page','datetime','emojibuy','mkdirSync','starting-balances','join','storeHeadless','final','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','2.6.0','valid','\x20closed\x20the\x20connection','split','ccxt','buys','spot','RequestTimeout','logs','startnumber','Portfolio\x20change\x20detected:\x20','stopExchange()','<pre>','34156ICSIFL','MIN_NOTIONAL','target','event-history','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','exchange\x20not\x20reloaded','getMinutes','balancing\x20resumes\x20when\x20cooldown\x20ends','EUR','padEnd','apiKey','bot','BNB/','offset','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','existsSync','Error\x20while\x20deleting\x20files:\x20','remove','storeConfiguration','entries','status','freeze','Saving\x20configuration','toggleBotMode','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','liquidity','number','keys','added','Market','USDC','market','************','net-fiat','getStartingBalances','\x20API\x20secret\x20is\x20invalid','fetchTicker','includes','LOCKED','\x20|\x20lock\x20orders:\x20','performance','constructor','-results.json','ongoing','hybrid-crypto-js','limit','BNB','\x20change','send','fiat','basecoin','random','%\x20(','search','map','2\x20-\x20FILLED\x20known\x20order:\x20','Order\x20filled:\x20','timeout','Invalid\x20quantity','\x20|\x20exchange:\x20','push','format','cooldown','threshold','ExchangeError','UNLOCKING','max','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','progress','red_yellow_blue','average','ETH','netoffset','fetchOpenOrders','data','./config/','getCoins()','emitHistory','success','./logs/','test','\x20exchange','configuration-stored','event','amount','configuration','Limit\x20(high-margin)','date','./version.json','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Net\x20effect','getTime','none','\x20|\x20Custom\x20ID:\x20','9791028ACSVlk','initclient','starting-balance-','apiSecret','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Unknown\x20error\x20occured','rightTxt','differenceInSeconds','no\x20open\x20orders','symbol','Cex','coin','defaults','toLowerCase','apiPassword','\x20value','lowdb/adapters/FileSync','padStart','bot-','sells','balancing\x20resumed','RateLimitExceeded',':\x20Bot\x20','getHours','-events.json','315770dNpKSu','Crypt','3432143pwKXou','Exchange','orderstatus','version','limit-high','cancelOrders()','concat','portfolio','filled','startprice','\x20not\x20available','colorscheme','getCoinNumber()','USDP','loadSymbols()','(((.+)+)+)+$','orderId','cancelOrder','basecoinvalue','highest','getPortfolio(0)','path','OrderNotFound','131dwWsyf','breakeven','NetworkError','assign','RSA-OAEP','ticker','change','UNLOCKED','date-fns','limits','write','yyyy-MM-dd\x27T\x27HH:mm:ss','8gKMCNo','USD','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','fetchTickers','API-key\x20format\x20invalid','watchTrades(2)','balances','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','timeshift','closed','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','eur','order','timestamp','secure','additional\x20symbols\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','get','TUSD','AuthenticationError','distribution','\x20API\x20key\x20is\x20invalid','\x20|\x20highest\x20fee:\x20','type','\x20hour','abs','must\x20be\x20greater\x20than\x20minimum\x20amount','ORDERS.UNLOCKING','headless','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','log','<b>','ID:\x20',':\x20timer\x20>','1\x20-\x20Validate\x20orders:\x20','ordertype','createOrder','util','toFixed','exchange','recreateCoinResults()','Bybit','Avoiding\x20continuous\x20order\x20attempts','\x20portfolio:</b>\x20\x0a\x0a','debug','no\x20additional\x20symbols','ExchangeNotAvailable','/USD','12UrhEAJ','ask','fetchClosedOrders','Failed\x20to\x20load\x20coin\x20data\x20for\x20','-------------------------------\x0a','Error:\x20Invalid\x20argument\x20','Pausing\x20for\x20','sell'];_0x1cd6=function(){return _0x19a7d2;};return _0x1cd6();}function emittedConfiguration(){const _0x102786=_0x160be7;let _0x14cfd9;if(config['apiKey']=='')_0x14cfd9={...config,'configstate':_0x102786(0x1fc)};else config[_0x102786(0x249)]==_0x102786(0x1cd)?_0x14cfd9={...config,'configstate':_0x102786(0x1b7)}:(_0x14cfd9={...config,'apiKey':'************','apiSecret':_0x102786(0xd6)},config[_0x102786(0x122)]&&(_0x14cfd9['apiPassword']=_0x102786(0xd6)));return _0x14cfd9;}function getSettings(){const _0x18348d=_0x160be7;return dbSettings['get']('settings')[_0x18348d(0x213)]();}function getSecure(){const _0x4d82b7=_0x160be7;return dbSecure['get'](_0x4d82b7(0x160))[_0x4d82b7(0x213)]()||{};}function updateTimeshift(_0x36f0c3){const _0x31ad25=_0x160be7;let _0x10b70c=dbConfig[_0x31ad25(0x163)](_0x31ad25(0x24a))['find']({'botID':botID})[_0x31ad25(0x213)]();_0x10b70c&&dbConfig[_0x31ad25(0x163)]('bot')['find']({'botID':botID})['assign']({'timeshift':_0x36f0c3})[_0x31ad25(0x150)](),config['timeshift']=_0x36f0c3,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x2755d9){const _0x3584d6=_0x160be7;let _0x35cfe3=dbConfig['get'](_0x3584d6(0x24a))[_0x3584d6(0x18e)]({'botID':botID})[_0x3584d6(0x213)]();_0x35cfe3&&dbConfig[_0x3584d6(0x163)]('bot')['find']({'botID':botID})['assign']({'onepagemode':_0x2755d9})[_0x3584d6(0x150)](),config[_0x3584d6(0x1ad)]=_0x2755d9,proxyEmit(_0x3584d6(0x10b),emittedConfiguration());}async function storeConfiguration(_0x124dda){const _0x590157=_0x160be7;logger['debug'](_0x590157(0x255));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x590157(0x17e)]('Transaction\x20detection\x20blocked');let _0x45372f=[],_0x562497=![],_0x3d5ba8=![],_0x18d6bb=[];_0x124dda[_0x590157(0x136)][_0x590157(0x1ba)](_0x3b3cde=>{const _0x3a3f09=_0x590157;if(!_0x3b3cde[_0x3a3f09(0x218)]&&_0x3b3cde[_0x3a3f09(0x11f)]!=_0x124dda[_0x3a3f09(0xe8)])_0x18d6bb['push'](_0x3b3cde['symbol']);}),_0x18d6bb[_0x590157(0x1ba)](_0x24f3f5=>{const _0x330ba0=_0x590157,_0x3a0e67=watchedSymbols[_0x330ba0(0xdb)](_0x24f3f5);!_0x3a0e67&&_0x45372f['push'](_0x24f3f5);}),_0x18d6bb[_0x590157(0x1ba)](_0x51ebfd=>{const _0x1d4fdc=_0x590157,_0x231736=currentCoins[_0x1d4fdc(0x18e)](_0x5c3226=>_0x5c3226[_0x1d4fdc(0x11d)]==_0x51ebfd);!_0x231736&&(_0x562497=!![]);}),currentCoins['forEach'](_0x266a31=>{const _0xa62b33=_0x590157;if(_0x266a31[_0xa62b33(0x11f)]!=config[_0xa62b33(0xe8)]){const _0x529292=_0x18d6bb[_0xa62b33(0x18e)](_0x357750=>_0x357750==_0x266a31[_0xa62b33(0x11d)]);!_0x529292&&(_0x562497=!![]);}}),_0x124dda[_0x590157(0x136)][_0x590157(0x1ba)](_0x8055a7=>{const _0x1319c8=_0x590157,_0x77c2c3=config[_0x1319c8(0x136)][_0x1319c8(0x18e)](_0x3283a8=>_0x3283a8['coin']==_0x8055a7[_0x1319c8(0x11f)]);if(_0x77c2c3&&_0x8055a7['offset']!=_0x77c2c3[_0x1319c8(0x24c)])_0x3d5ba8=!![];});let _0x719b26=dbConfig[_0x590157(0x163)](_0x590157(0x24a))[_0x590157(0x18e)]({'botID':botID})['value']();_0x124dda={..._0x124dda,'apiKey':crypt[_0x590157(0x1eb)](secure[_0x590157(0x197)],_0x124dda[_0x590157(0x249)])['message'],'apiSecret':crypt[_0x590157(0x1eb)](secure['privateKey'],_0x124dda['apiSecret'])[_0x590157(0x19d)]};_0x124dda[_0x590157(0x122)]&&(_0x124dda[_0x590157(0x122)]=crypt['decrypt'](secure[_0x590157(0x197)],_0x124dda[_0x590157(0x122)])['message']);let _0x2b60fa=![];if(_0x719b26){_0x124dda[_0x590157(0x249)]==_0x590157(0xd6)?_0x124dda['apiKey']=config[_0x590157(0x249)]:_0x2b60fa=!![];_0x124dda[_0x590157(0x117)]==_0x590157(0xd6)?_0x124dda[_0x590157(0x117)]=config['apiSecret']:_0x2b60fa=!![];if(_0x124dda['apiPassword']==_0x590157(0xd6))_0x124dda[_0x590157(0x122)]=config[_0x590157(0x122)];else{if(_0x124dda[_0x590157(0x122)])_0x2b60fa=!![];}dbConfig[_0x590157(0x163)](_0x590157(0x24a))[_0x590157(0x18e)]({'botID':botID})[_0x590157(0x149)](_0x124dda)[_0x590157(0x150)]();}else dbConfig['get']('bot')[_0x590157(0xf2)](_0x124dda)[_0x590157(0x150)](),_0x2b60fa=!![],process[_0x590157(0xe6)]({'status':_0x590157(0x228),'live':'running'},_0x2f7e9d=>{});process['send']({'botname':_0x124dda['botname']},_0xcd5a7=>{}),updateBotManager(),config={..._0x124dda},proxyEmit(_0x590157(0x108)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2b60fa)await reset(_0x45372f,!![]);else _0x562497||_0x3d5ba8?await reset(_0x45372f,![]):getBalances();blockTransactionDetection=![],logger[_0x590157(0x17e)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0xc6e7fa){const _0x4ead8e=_0x160be7,_0x385194={...config,'headless':_0xc6e7fa[_0x4ead8e(0x16e)]};let _0x2bf5a1=dbConfig[_0x4ead8e(0x163)]('bot')[_0x4ead8e(0x18e)]({'botID':botID})['value']();_0x2bf5a1&&dbConfig[_0x4ead8e(0x163)]('bot')[_0x4ead8e(0x18e)]({'botID':botID})[_0x4ead8e(0x149)](_0x385194)[_0x4ead8e(0x150)](),config={..._0x385194},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5cbece){const _0x447cb3=_0x160be7,_0x3f7996={...config,'fiat':_0x5cbece};let _0x198243=dbConfig[_0x447cb3(0x163)]('bot')[_0x447cb3(0x18e)]({'botID':botID})['value']();_0x198243&&dbConfig[_0x447cb3(0x163)](_0x447cb3(0x24a))[_0x447cb3(0x18e)]({'botID':botID})['assign'](_0x3f7996)[_0x447cb3(0x150)](),config={..._0x3f7996},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x33311c=_0x160be7;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x33311c(0x24e)](path[_0x33311c(0x22e)](configpath,'bot-'+botID+'-events.json')))fs[_0x33311c(0x1d8)](path[_0x33311c(0x22e)](configpath,_0x33311c(0x126)+botID+'-events.json'));if(fs[_0x33311c(0x24e)](path[_0x33311c(0x22e)](configpath,'bot-'+botID+_0x33311c(0x224))))fs[_0x33311c(0x1d8)](path[_0x33311c(0x22e)](configpath,'bot-'+botID+_0x33311c(0x224)));if(fs[_0x33311c(0x24e)](path[_0x33311c(0x22e)](configpath,_0x33311c(0x126)+botID+_0x33311c(0xe0))))fs[_0x33311c(0x1d8)](path['join'](configpath,_0x33311c(0x126)+botID+_0x33311c(0xe0)));}catch(_0x16a0d7){if(_0x16a0d7)logger[_0x33311c(0x21e)](_0x33311c(0x24f),_0x16a0d7);}const _0x3f2b7a=getDate();let _0x285ca4=[];currentCoins[_0x33311c(0x1ba)](_0x2238ac=>{const _0x3838a4=_0x33311c;_0x285ca4[_0x3838a4(0xf2)]({'coin':_0x2238ac['coin'],'number':_0x2238ac[_0x3838a4(0x259)],'price':_0x2238ac['last']});});let _0x1e6137=dbConfig[_0x33311c(0x163)]('bot')['find']({'botID':botID})[_0x33311c(0x213)]();_0x1e6137&&(dbConfig[_0x33311c(0x163)](_0x33311c(0x24a))[_0x33311c(0x18e)]({'botID':botID})['assign']({'liquidity':[{'date':_0x3f2b7a,'changes':_0x285ca4}]})[_0x33311c(0x150)](),config[_0x33311c(0x258)]=[]),process[_0x33311c(0xe6)]({'stop':'restart'},_0x533aa7=>{});}function noslash(_0x3a9ee3){const _0x3d39f7=_0x160be7;return _0x3a9ee3[_0x3d39f7(0x1b1)]('/','');}function updateHighestFee(_0xfd0342){const _0x69bbc5=_0x160be7;if(_0xfd0342[_0x69bbc5(0x1d6)]){let _0x5f2ce4={'filled':_0xfd0342[_0x69bbc5(0x137)]*_0xfd0342[_0x69bbc5(0x1f1)],'amount':_0xfd0342[_0x69bbc5(0x137)]*_0xfd0342[_0x69bbc5(0x1f1)],'side':_0xfd0342['side']==_0x69bbc5(0x189)?_0x69bbc5(0x219):'sell','price':0x1/_0xfd0342[_0x69bbc5(0x1f1)]};_0xfd0342={..._0xfd0342,..._0x5f2ce4};}const _0x415026=defaultFee*_0xfd0342[_0x69bbc5(0x137)]*_0xfd0342[_0x69bbc5(0x1f1)];lastFees[_0x69bbc5(0x21b)]['length']===0x14&&lastFees[_0x69bbc5(0x21b)][_0x69bbc5(0x221)](),lastFees[_0x69bbc5(0x21b)][_0x69bbc5(0xf2)](_0x415026),lastFees[_0x69bbc5(0x142)]=Math[_0x69bbc5(0xf8)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x653be5){const _0x1fd5d1=_0x160be7;logger[_0x1fd5d1(0x17e)]('0\x20-\x20EXECUTION:\x20'+_0x653be5[_0x1fd5d1(0x11d)]+_0x1fd5d1(0x194)+_0x653be5[_0x1fd5d1(0x253)]+_0x1fd5d1(0x194)+_0x653be5['id']);let _0x14941a=_0x653be5[_0x1fd5d1(0x253)],_0x3a15a8=![];currentCoins['forEach'](_0x2ebd9f=>{const _0x4ac260=_0x1fd5d1;_0x2ebd9f['symbol']==_0x653be5[_0x4ac260(0x11d)]&&(_0x3a15a8=!![]);});if(!_0x3a15a8)return;const _0x5bbd7c=currentCoins['find'](_0x4fd432=>_0x4fd432['symbol']==_0x653be5[_0x1fd5d1(0x11d)]),_0x290e61=_0x2c8648=>{const _0x54425c=_0x1fd5d1;if(_0x5bbd7c)_0x5bbd7c[_0x54425c(0x131)]=_0x2c8648;};if(_0x14941a=='open')_0x290e61(_0x1fd5d1(0x21d));else{if(_0x14941a=='canceled'){_0x290e61(_0x1fd5d1(0x1e5));const _0xfb54fd=await getCoins();[currentCoins,currentCoinsAll]=_0xfb54fd,await getOpenOrders(),handleOpenOrders();}else{if(_0x14941a==_0x1fd5d1(0x15b)){logger[_0x1fd5d1(0x17e)](_0x1fd5d1(0x1ec)+_0x653be5[_0x1fd5d1(0x11d)]+_0x1fd5d1(0x194)+_0x653be5[_0x1fd5d1(0x137)]+_0x1fd5d1(0x194)+_0x653be5['id']);let _0x3d6da1=![];if(lastOrders)for(const _0x11f1ed of lastOrders){const _0x40b0ca=0xc8,_0x126ee8=0x1388;let _0x2aaf3b=0x0;while(!_0x11f1ed[_0x1fd5d1(0x13f)]&&_0x2aaf3b*_0x40b0ca<_0x126ee8){_0x2aaf3b++,await sleep(_0x40b0ca);}if(_0x2aaf3b>0x0)logger[_0x1fd5d1(0x17e)]('Waited\x20'+_0x2aaf3b*_0x40b0ca/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x11f1ed[_0x1fd5d1(0x13f)]==_0x653be5['id']){logger[_0x1fd5d1(0x17e)](_0x1fd5d1(0xed)+_0x653be5['id']),_0x3d6da1=!![];if(_0x11f1ed[_0x1fd5d1(0x137)]==0x0){logger['debug'](_0x1fd5d1(0x1f5)+_0x653be5['id']);if(_0x653be5[_0x1fd5d1(0xfc)])_0x11f1ed[_0x1fd5d1(0x1f1)]=_0x653be5['average'];else{if(_0x653be5[_0x1fd5d1(0x1f1)])_0x11f1ed[_0x1fd5d1(0x1f1)]=_0x653be5[_0x1fd5d1(0x1f1)];else{}}_0x11f1ed[_0x1fd5d1(0x137)]=_0x653be5[_0x1fd5d1(0x137)],updateHighestFee(_0x11f1ed),_0x290e61(_0x1fd5d1(0x137)),await validateOrders();if(lockOrders==ORDERS[_0x1fd5d1(0xdc)]){const _0x393f68=await getCoins();[currentCoins,currentCoinsAll]=_0x393f68;}_0x11f1ed[_0x1fd5d1(0x1fe)]={'currency':_0x653be5[_0x1fd5d1(0x1fe)]?_0x653be5[_0x1fd5d1(0x1fe)]['currency']:null,'cost':_0x653be5[_0x1fd5d1(0x1fe)]?_0x653be5[_0x1fd5d1(0x1fe)][_0x1fd5d1(0x1ef)]:0x0},await updateCoinResults(_0x11f1ed);}}}if(!_0x3d6da1){logger['debug'](_0x1fd5d1(0x198)+_0x653be5['id']),_0x290e61(_0x1fd5d1(0x137));const _0x4bc251=await getCoins();[currentCoins,currentCoinsAll]=_0x4bc251,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xdba374=JSON[_0x1fd5d1(0x206)](lastBalances[_0x1fd5d1(0x136)]);const _0x248ded=_0xdba374[_0x1fd5d1(0x18e)](_0xcb5231=>_0xcb5231[_0x1fd5d1(0x11d)]==_0x653be5[_0x1fd5d1(0x11d)]);if(_0x248ded){if(_0x14941a==_0x1fd5d1(0x21d))_0x248ded[_0x1fd5d1(0x131)]=_0x248ded[_0x1fd5d1(0x131)]==_0x1fd5d1(0x137)?'filled':'open';else{if(_0x14941a==_0x1fd5d1(0x1e5))_0x248ded['orderstatus']=_0x248ded[_0x1fd5d1(0x131)]==_0x1fd5d1(0x137)?_0x1fd5d1(0x137):_0x1fd5d1(0x1e5);else _0x14941a==_0x1fd5d1(0x15b)&&(_0x248ded[_0x1fd5d1(0x131)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xdba374)},proxyEmit(_0x1fd5d1(0x158),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x585e02=_0x160be7;await getOpenOrders();let _0xa62caf=![];currentCoins[_0x585e02(0x1ba)](_0x4d5a8f=>{const _0x3234aa=_0x585e02;_0xa62caf=allOpenOrders['find'](_0x47c1b0=>_0x47c1b0[_0x3234aa(0x11d)]==_0x4d5a8f[_0x3234aa(0x11d)]),_0x4d5a8f[_0x3234aa(0x131)]=_0xa62caf?'open':_0x3234aa(0x112);});}async function getCoins(_0x1e72c2=!![],_0x3bdd2e=config[_0x160be7(0xe8)]){const _0x332601=_0x160be7;let _0x54833c,_0x605030=[],_0x374ad4=[],_0x540079=[],_0x1eb204=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x54833c=await exchange[_0x332601(0x1c8)](),mybalances=_0x54833c[_0x332601(0x1bb)];for(const [_0x48cb23,_0x4df1b2]of Object[_0x332601(0x252)](mybalances)){_0x1eb204['push'](_0x48cb23);}if(_0x3bdd2e=='')for(const [_0x4d493d,_0x42cea3]of Object['entries'](mybalances)){_0x42cea3!=0x0&&_0x374ad4[_0x332601(0xf2)]({'coin':_0x4d493d});}else{let _0x2b44e7=![];for(const [_0x27a28d,_0x580c01]of Object[_0x332601(0x252)](mybalances)){if(_0x1eb204[_0x332601(0xdb)](_0x27a28d)){const _0x31bd6a=config[_0x332601(0x136)]['find'](_0x2c84ac=>_0x2c84ac[_0x332601(0x11f)]==_0x27a28d),_0x3e7c8a=_0x27a28d+'/'+_0x3bdd2e,_0x241578=_0x3bdd2e+'/'+_0x27a28d,_0x1886a3=currentCoins['find'](_0x48ef34=>_0x48ef34[_0x332601(0x11f)]==_0x27a28d);_0x2b44e7=![];if((_0x580c01!=0x0||_0x31bd6a)&&(allSymbols['includes'](_0x3e7c8a)||_0x27a28d==_0x3bdd2e))_0x27a28d!=_0x3bdd2e&&_0x605030[_0x332601(0xf2)](_0x3e7c8a),_0x374ad4[_0x332601(0xf2)]({'coin':_0x27a28d,'symbol':_0x3e7c8a,'reverse':![],'number':Math[_0x332601(0xf8)](_0x580c01+(_0x31bd6a&&_0x31bd6a['offset']||0x0),0x0),'orderstatus':_0x1886a3?_0x1886a3[_0x332601(0x131)]:_0x332601(0x112)});else(_0x580c01!=0x0||_0x31bd6a)&&allSymbols['includes'](_0x241578)&&(_0x27a28d!=_0x3bdd2e&&_0x605030['push'](_0x241578),_0x374ad4[_0x332601(0xf2)]({'coin':_0x27a28d,'symbol':_0x241578,'reverse':!![],'number':Math['max'](_0x580c01+(_0x31bd6a&&_0x31bd6a['offset']||0x0),0x0),'orderstatus':_0x1886a3?_0x1886a3[_0x332601(0x131)]:_0x332601(0x112)}));}}}}catch(_0x305b16){if(!_0x1e72c2)handleErrorNoStop(_0x305b16,_0x332601(0x102));else await handleError(_0x305b16,_0x332601(0x102));}return _0x540079=cloneDeep(_0x374ad4),_0x374ad4=_0x374ad4['filter'](_0x5bc3d6=>{const _0x378719=_0x332601,_0x40f314=config[_0x378719(0x136)]['find'](_0x3f31a3=>_0x3f31a3[_0x378719(0x11f)]==_0x5bc3d6[_0x378719(0x11f)]);return _0x40f314&&!_0x40f314[_0x378719(0x218)];}),[_0x374ad4,_0x540079];}async function getCoinNumber(_0x1cb161){const _0x574017=_0x160be7;let _0xc780ba;try{const _0x326a43=await exchange[_0x574017(0x1c8)]();_0xc780ba=_0x326a43['total'][_0x1cb161];}catch(_0x20ec3b){await handleError(_0x20ec3b,_0x574017(0x13b));}return _0xc780ba;}async function getOpenOrders(){const _0x1103f3=_0x160be7;let _0xb15dc4;allOpenOrders=[];try{for(const _0x4ceb0d of config[_0x1103f3(0x136)]){!_0x4ceb0d['excluded']&&_0x4ceb0d[_0x1103f3(0x11f)]!=config[_0x1103f3(0xe8)]&&(_0xb15dc4=await exchange['fetchOpenOrders'](_0x4ceb0d[_0x1103f3(0x11d)]),_0xb15dc4['length']>0x0&&allOpenOrders['push'](_0xb15dc4[0x0]));}}catch(_0x354320){await handleError(_0x354320,_0x1103f3(0x1f8));}}async function handleOpenOrders(_0x3c5957=0x0){const _0x35062d=_0x160be7;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x35062d(0xdc)]&&allOrdersPlaced&&(_0x3c5957==0x0?(logger[_0x35062d(0x17e)]('1\x20-\x20Handle\x20open\x20orders'),_0x3c5957++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x35062d(0x17e)](_0x35062d(0x1fa)),validateOrders(_0x35062d(0x11c))));}async function testAPI(_0x3a9642){const _0x77a5d2=_0x160be7,_0x4d6c23=ccxt[_0x77a5d2(0x20e)][_0x3a9642['exchange'][_0x77a5d2(0x121)]()],_0x323e84=new _0x4d6c23({'apiKey':_0x3a9642[_0x77a5d2(0x249)],'secret':_0x3a9642[_0x77a5d2(0x117)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x77a5d2(0x238)}});if(_0x3a9642[_0x77a5d2(0x122)])_0x323e84['password']=_0x3a9642[_0x77a5d2(0x122)];try{await _0x323e84[_0x77a5d2(0x19f)]();}catch(_0x5d24bc){throw _0x5d24bc;}}function cloneDeep(_0x3b48ef){const _0x302f91=_0x160be7;return JSON[_0x302f91(0x206)](JSON[_0x302f91(0x1bd)](_0x3b48ef));}async function getPortfolio(_0x5bb11e){const _0x3245ef=_0x160be7;let _0x4d7b81=[],_0x4c9f27=[],_0x4ec6a0=[],_0x2cfabb;if(_0x5bb11e[_0x3245ef(0x249)]!==_0x3245ef(0xd6)||_0x5bb11e[_0x3245ef(0x117)]!==_0x3245ef(0xd6)||_0x5bb11e[_0x3245ef(0x122)]&&_0x5bb11e['apiPassword']!==_0x3245ef(0xd6)){if(config[_0x3245ef(0x179)]){if(_0x5bb11e['apiKey']=='************')_0x5bb11e[_0x3245ef(0x249)]=config[_0x3245ef(0x249)];if(_0x5bb11e[_0x3245ef(0x117)]==_0x3245ef(0xd6))_0x5bb11e[_0x3245ef(0x117)]=config[_0x3245ef(0x117)];if(_0x5bb11e['apiPassword']==_0x3245ef(0xd6))_0x5bb11e[_0x3245ef(0x122)]=config[_0x3245ef(0x122)];try{await testAPI(_0x5bb11e);}catch(_0x3e36c9){if(_0x3e36c9[_0x3245ef(0x193)]()['includes'](_0x3245ef(0x165))){logger[_0x3245ef(0x17e)](_0x3245ef(0x162)),proxyEmit(_0x3245ef(0x136),![]);return;}else{handleError(_0x3e36c9,_0x3245ef(0x143));return;}}}await initExchange(_0x5bb11e[_0x3245ef(0x179)],_0x5bb11e[_0x3245ef(0x249)],_0x5bb11e[_0x3245ef(0x117)],_0x5bb11e[_0x3245ef(0x122)]);try{await loadSymbols();}catch(_0x11865a){if(_0x11865a[_0x3245ef(0x193)]()[_0x3245ef(0xdb)](_0x3245ef(0x165))){proxyEmit('portfolio',![]);return;}else{handleError(_0x11865a,'getPortfolio(1)');return;}}const _0x3820eb=await getCoins(![],_0x5bb11e[_0x3245ef(0xe8)]);_0x4ec6a0=cloneDeep(_0x3820eb[0x1]);}else _0x4ec6a0=cloneDeep(currentCoinsAll);if(_0x5bb11e[_0x3245ef(0xe8)]=='')proxyEmit(_0x3245ef(0x136),_0x4ec6a0);else{_0x4ec6a0[_0x3245ef(0x1ba)](_0x343aea=>{const _0x430e29=_0x3245ef;if(_0x343aea[_0x430e29(0x11f)]!=_0x5bb11e['basecoin'])_0x4d7b81[_0x430e29(0xf2)](_0x343aea[_0x430e29(0x11d)]);});if(_0x4d7b81[_0x3245ef(0x1cc)]==0x0)logHistory(_0x3245ef(0x1cf),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4c9f27=await exchange[_0x3245ef(0x155)](_0x4d7b81);}catch(_0x2505c7){if(_0x2505c7['toString']()['includes'](_0x3245ef(0x165))){proxyEmit(_0x3245ef(0x136),![]);return;}else{handleError(_0x2505c7,_0x3245ef(0x1e7));return;}}_0x4ec6a0[_0x3245ef(0x1ba)](_0x2b1bc7=>{const _0x26aa94=_0x3245ef;_0x2b1bc7[_0x26aa94(0x11f)]!=_0x5bb11e['basecoin']?_0x2cfabb=_0x2b1bc7[_0x26aa94(0x1d6)]?0x1/_0x4c9f27[_0x2b1bc7[_0x26aa94(0x11d)]][_0x26aa94(0x1c3)]:_0x4c9f27[_0x2b1bc7[_0x26aa94(0x11d)]][_0x26aa94(0x1c3)]:_0x2cfabb=0x1,_0x2b1bc7['price']=formatResult(_0x2cfabb,0x8);}),proxyEmit(_0x3245ef(0x136),_0x4ec6a0);}}}function truncateTradeAmount(_0x30be4f,_0x1c0027){let _0x53c62b=0x0;try{_0x53c62b=exchange['amountToPrecision'](_0x30be4f,_0x1c0027);}catch(_0x4cfcc4){}return _0x53c62b;}function checkMinimums(_0x2fdb46){const _0x40030a=_0x160be7;let _0x4cd615=!![];const _0x6cc228=!_0x2fdb46['reverse']?markets[_0x2fdb46[_0x40030a(0x11d)]][_0x40030a(0x14f)][_0x40030a(0x10a)][_0x40030a(0x226)]:markets[_0x2fdb46[_0x40030a(0x11d)]][_0x40030a(0x14f)][_0x40030a(0x1ef)][_0x40030a(0x226)],_0x356317=!_0x2fdb46['reverse']?markets[_0x2fdb46[_0x40030a(0x11d)]][_0x40030a(0x14f)][_0x40030a(0x1ef)]['min']:markets[_0x2fdb46[_0x40030a(0x11d)]][_0x40030a(0x14f)][_0x40030a(0x10a)][_0x40030a(0x226)],_0x2839e7=truncateTradeAmount(_0x2fdb46[_0x40030a(0x11d)],_0x2fdb46[_0x40030a(0x1da)]);_0x2fdb46[_0x40030a(0x1da)]=_0x2839e7;if(Math[_0x40030a(0x16b)](_0x2839e7)<_0x6cc228)_0x4cd615=![];if(Math[_0x40030a(0x16b)](_0x2839e7)*_0x2fdb46[_0x40030a(0x1c3)]<_0x356317)_0x4cd615=![];if(_0x2fdb46['side']==_0x40030a(0x189)){let _0x1fde14=config[_0x40030a(0x136)][_0x40030a(0x18e)](_0x18163c=>_0x18163c[_0x40030a(0x11f)]==_0x2fdb46[_0x40030a(0x11f)]);if(_0x1fde14['offset']>0x0){if(Math[_0x40030a(0x16b)](_0x2839e7)>_0x2fdb46['number']-_0x1fde14[_0x40030a(0x24c)])_0x4cd615=![];}else{if(Math[_0x40030a(0x16b)](_0x2839e7)>_0x2fdb46[_0x40030a(0x259)])_0x4cd615=![];}}if(_0x2fdb46[_0x40030a(0x225)]==_0x40030a(0x219)){let _0x308dfd=config[_0x40030a(0x136)][_0x40030a(0x18e)](_0x218274=>_0x218274[_0x40030a(0x11f)]==config[_0x40030a(0xe8)]),_0x5893b9=currentCoins[_0x40030a(0x18e)](_0x17ffaa=>_0x17ffaa['coin']==config[_0x40030a(0xe8)]);if(_0x308dfd['offset']>0x0){if(Math[_0x40030a(0x16b)](_0x2839e7)*_0x2fdb46[_0x40030a(0x1c3)]>_0x5893b9[_0x40030a(0x259)]-_0x308dfd[_0x40030a(0x24c)])_0x4cd615=![];}else{if(Math[_0x40030a(0x16b)](_0x2839e7)*_0x2fdb46[_0x40030a(0x1c3)]>_0x5893b9['number'])_0x4cd615=![];}}return _0x4cd615;}async function getBalances(_0xc6722f=!![]){const _0x477526=_0x160be7;let _0x40603a=0x0,_0x507e67;const _0x5a8ddc=config[_0x477526(0xf5)];if(config[_0x477526(0x16e)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x477526(0x1ba)](_0x52d731=>{const _0x358706=_0x477526;if(_0x52d731[_0x358706(0x11f)]!=config[_0x358706(0xe8)]){let _0x5540e1=global[_0x358706(0x14b)][noslash(_0x52d731[_0x358706(0x11d)])];_0x507e67=_0x52d731['reverse']?0x1/_0x5540e1:_0x5540e1;}else _0x507e67=0x1;let _0x199931=_0x52d731['number']*_0x507e67;_0x40603a+=_0x199931,_0x52d731[_0x358706(0x1c3)]=formatResult(Number(_0x507e67),0x8),_0x52d731[_0x358706(0x213)]=_0x199931;}),currentCoins['forEach'](_0x46a80d=>{const _0x4ed780=_0x477526;let _0x49a24d=config[_0x4ed780(0x136)]['find'](_0x12d23a=>_0x12d23a[_0x4ed780(0x11f)]==_0x46a80d[_0x4ed780(0x11f)]),_0x1367d9=Number(_0x49a24d[_0x4ed780(0x166)]),_0x25a4a9=_0x46a80d['value']/_0x40603a*0x64,_0xa976d7=_0x1367d9*_0x40603a/0x64/_0x46a80d[_0x4ed780(0x1c3)]-_0x46a80d['number'];_0x46a80d[_0x4ed780(0x166)]=formatResult(_0x25a4a9,0x3),_0x46a80d[_0x4ed780(0x241)]=formatResult(_0x1367d9,0x3),_0x46a80d['trade']=formatResult(_0xa976d7,0x8),_0x46a80d[_0x4ed780(0x225)]='',_0x46a80d[_0x4ed780(0x233)]=![];if(_0x46a80d[_0x4ed780(0x11f)]!=config['basecoin']){if(_0x46a80d[_0x4ed780(0x166)]>_0x1367d9)_0x46a80d['side']='sell',_0x46a80d['valid']=checkMinimums(_0x46a80d);else _0x46a80d['distribution']<_0x1367d9&&(_0x46a80d['side']=_0x4ed780(0x219),_0x46a80d[_0x4ed780(0x233)]=checkMinimums(_0x46a80d));}_0x46a80d['delta']=_0x46a80d[_0x4ed780(0x166)]/_0x46a80d[_0x4ed780(0x241)]-0x1;if(_0x46a80d['orderstatus']==_0x4ed780(0x137)||_0x46a80d['orderstatus']==_0x4ed780(0x1e5))_0x46a80d['orderstatus']=_0x4ed780(0x112);}),currentCoins[_0x477526(0x1e8)]((_0xfd1f7d,_0x242648)=>_0xfd1f7d[_0x477526(0x1a2)]<_0x242648['delta']?0x1:_0x242648[_0x477526(0x1a2)]<_0xfd1f7d[_0x477526(0x1a2)]?-0x1:0x0);const _0x47caf6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47caf6['eur'],'usd':_0x47caf6[_0x477526(0x1ee)],'portfolio':JSON[_0x477526(0x1bd)](currentCoins),'threshold':_0x5a8ddc},proxyEmit(_0x477526(0x158),{'serverversion':serverversion,'balances':lastBalances});if(_0xc6722f){if(config[_0x477526(0x16e)])headlessMode({'portfolio':currentCoins,'threshold':_0x5a8ddc});else{if(lockOrders==ORDERS[_0x477526(0x14d)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5a8ddc});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x9df16d=getNormalizedPerformance();getStartingBalances(_0x9df16d),emitPerformance(_0x9df16d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4ae0a2=getNormalizedPerformance();emitPerformance(_0x4ae0a2),getStartingBalances(_0x4ae0a2),logger[_0x477526(0x17e)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x511af5=_0x160be7;if(!lastBalances)return;let _0x7a7a43=[],_0x43b116,_0x1da721=JSON[_0x511af5(0x206)](lastBalances['portfolio']);_0x1da721[_0x511af5(0x1e8)]((_0x16b18b,_0x2c375d)=>_0x16b18b['coin']>_0x2c375d[_0x511af5(0x11f)]?0x1:_0x2c375d[_0x511af5(0x11f)]>_0x16b18b['coin']?-0x1:0x0),_0x1da721[_0x511af5(0x1ba)](_0x64e62b=>{const _0x5b5d7c=_0x511af5;let _0x3ad46a={'coin':_0x64e62b[_0x5b5d7c(0x11f)],'number':_0x64e62b['number'],'price':_0x64e62b[_0x5b5d7c(0x1c3)]};_0x7a7a43['push'](_0x3ad46a);});const _0x561269=await getFiat();_0x43b116={'date':lastBalances[_0x511af5(0x1a6)][_0x511af5(0x235)]('\x20')[0x0],'eur':_0x561269[_0x511af5(0x15d)],'usd':_0x561269['usd'],'coins':_0x7a7a43};let _0x4e58df=dbPerformance[_0x511af5(0x163)](_0x511af5(0x100))[_0x511af5(0x18e)]({'date':_0x43b116['date']})[_0x511af5(0x213)]();_0x4e58df?_0x43b116[_0x511af5(0x10d)]!=config[_0x511af5(0x195)]&&dbPerformance[_0x511af5(0x163)](_0x511af5(0x100))[_0x511af5(0x18e)]({'date':_0x43b116[_0x511af5(0x10d)]})[_0x511af5(0x149)](_0x43b116)['write']():dbPerformance[_0x511af5(0x163)](_0x511af5(0x100))[_0x511af5(0xf2)](_0x43b116)[_0x511af5(0x150)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1ebbca=_0x160be7;let _0x5d8b0a=[];if(dbPerformance[_0x1ebbca(0x223)]('data')[_0x1ebbca(0x213)]()){let _0x6ce7c=dbPerformance['get']('data')['cloneDeep']()[_0x1ebbca(0x19a)](_0x36323d=>{const _0x149cc7=_0x1ebbca;if(_0x36323d[_0x149cc7(0x1df)][_0x149cc7(0x1cc)]==0x0)return![];else return!![];})['sortBy'](_0x1ebbca(0x10d))['value'](),_0x570fce=[...config[_0x1ebbca(0x258)]];_0x570fce['sort']((_0x15b8a4,_0x1747cf)=>_0x15b8a4[_0x1ebbca(0x10d)]>_0x1747cf[_0x1ebbca(0x10d)]?-0x1:_0x1747cf[_0x1ebbca(0x10d)]>_0x15b8a4['date']?0x1:0x0);let _0x1709e5=0x1,_0x555853=[],_0xfeeeba=0x0;_0x6ce7c['slice']()['reverse']()[_0x1ebbca(0x1ba)]((_0xc742c5,_0x4e40a2)=>{const _0x2d0f56=_0x1ebbca;if(_0x570fce[_0xfeeeba]){if(_0x6ce7c[_0x6ce7c[_0x2d0f56(0x1cc)]-_0x4e40a2]&&_0x570fce[_0xfeeeba][_0x2d0f56(0x10d)]==_0x6ce7c[_0x6ce7c[_0x2d0f56(0x1cc)]-_0x4e40a2]['date']){if(_0x4e40a2<_0x6ce7c[_0x2d0f56(0x1cc)]){let _0xaf2bfd=0x0,_0x55a49f=0x0;_0x6ce7c[_0x6ce7c[_0x2d0f56(0x1cc)]-_0x4e40a2][_0x2d0f56(0x1df)][_0x2d0f56(0x1ba)](_0x18b6ae=>{const _0x57a928=_0x2d0f56;_0x55a49f+=_0x18b6ae[_0x57a928(0x259)]*_0x18b6ae['price'];}),_0x570fce[_0xfeeeba][_0x2d0f56(0x209)][_0x2d0f56(0x1ba)](_0x2e0166=>{const _0x2b1d01=_0x2d0f56;_0xaf2bfd+=_0x2e0166[_0x2b1d01(0x259)]*_0x2e0166['price'];}),_0x1709e5*=_0xaf2bfd/(_0x55a49f-_0xaf2bfd)+0x1;}_0xfeeeba++;}}let _0x454adf=0x0;_0xc742c5[_0x2d0f56(0x1df)][_0x2d0f56(0x1ba)](_0xcadcda=>{const _0x196c64=_0x2d0f56;_0x454adf+=_0xcadcda[_0x196c64(0x259)]*_0xcadcda[_0x196c64(0x1f1)];}),_0x555853[_0x6ce7c[_0x2d0f56(0x1cc)]-_0x4e40a2-0x1]=_0x454adf*(_0x1709e5-0x1);});let _0x19074c=[];_0x570fce=[...config[_0x1ebbca(0x258)]]||[];let _0x5f4c6f=0x0;_0xfeeeba=0x0,_0x6ce7c[_0x1ebbca(0x1ba)]((_0x52d84b,_0x3e5101)=>{const _0xe68200=_0x1ebbca;if(_0x570fce[_0xfeeeba]){const _0x83f13f=fns[_0xe68200(0x206)](_0x570fce[_0xfeeeba][_0xe68200(0x10d)],_0xe68200(0x1d7),new Date()),_0x1211f3=fns[_0xe68200(0x206)](_0x52d84b[_0xe68200(0x10d)],_0xe68200(0x1d7),new Date());if(fns['isEqual'](_0x83f13f,_0x1211f3)){let _0x4e92f6=0x0;_0x570fce[_0xfeeeba]['changes'][_0xe68200(0x1ba)](_0x4493ca=>{const _0x2e6d72=_0xe68200;!_0x19074c[_0x4493ca['coin']]?_0x19074c[_0x4493ca[_0x2e6d72(0x11f)]]=_0x4493ca[_0x2e6d72(0x259)]:(_0x4e92f6=_0x19074c[_0x4493ca[_0x2e6d72(0x11f)]],_0x19074c[_0x4493ca[_0x2e6d72(0x11f)]]+=_0x4493ca[_0x2e6d72(0x259)]);const _0x3b0eae=_0x52d84b[_0x2e6d72(0x1df)][_0x2e6d72(0x18e)](_0x103da7=>_0x103da7[_0x2e6d72(0x11f)]==_0x4493ca[_0x2e6d72(0x11f)]);(!_0x3b0eae||_0x3b0eae['number']==0x0)&&(_0x5f4c6f+=(-_0x4493ca['number']-_0x4e92f6)*_0x4493ca[_0x2e6d72(0x1f1)]);}),_0xfeeeba++;}}_0x52d84b['coins']['forEach']((_0xdaf4ee,_0x242b89)=>{const _0x172433=_0xe68200;_0x19074c[_0xdaf4ee[_0x172433(0x11f)]]&&(_0xdaf4ee[_0x172433(0x1fc)]=_0x19074c[_0xdaf4ee[_0x172433(0x11f)]]);}),_0x5d8b0a['push']({'date':_0x52d84b[_0xe68200(0x10d)],'eur':_0x52d84b[_0xe68200(0x15d)],'usd':_0x52d84b[_0xe68200(0x1ee)],'offset':_0x555853[_0x3e5101],'netoffset':_0x5f4c6f,'coins':_0x52d84b['coins']});});}return _0x5d8b0a;}function emitPerformance(_0x126ab3){const _0xede0be=_0x160be7;_0x126ab3['length']!==0x0?(proxyEmit(_0xede0be(0xde),_0x126ab3),lastPerformanceEmitted=getDate()):proxyEmit(_0xede0be(0xde),[]);}function getPerf(_0xf0590f,_0x8daca4){const _0x832df3=_0x160be7;let _0x42801b=0x0,_0x41ea0b=0x0,_0x376696=0x0;_0xf0590f[_0x832df3(0x1df)][_0x832df3(0x1ba)](_0x51635a=>{const _0x419cfa=_0x832df3;_0x42801b+=_0x51635a[_0x419cfa(0x259)]*_0x51635a[_0x419cfa(0x1f1)];});_0x8daca4&&(_0x42801b+=_0xf0590f[_0x832df3(0x24c)]);if(config[_0x832df3(0xe8)]===_0x832df3(0x20d)||config[_0x832df3(0xe8)]===_0x832df3(0xfd))_0x41ea0b=_0x42801b*_0xf0590f[_0x832df3(0x15d)],_0x376696=_0x42801b*_0xf0590f[_0x832df3(0x1ee)];else{if(usdBasecoins[_0x832df3(0xdb)](config[_0x832df3(0xe8)]))_0x41ea0b=_0x42801b*_0xf0590f[_0x832df3(0x15d)]/_0xf0590f[_0x832df3(0x1ee)],_0x376696=_0x42801b;else config[_0x832df3(0xe8)]===_0x832df3(0x247)&&(_0x41ea0b=_0x42801b,_0x376696=_0x42801b*_0xf0590f['usd']/_0xf0590f['eur']);}return[_0x42801b,_0x41ea0b,_0x376696];}function getKPIs(_0x435868,_0x2e5712=_0x160be7(0x247)){const _0x340be5=_0x160be7,_0x4d0223=config[_0x340be5(0xe8)],_0x2ad101=lastBalances,_0x2d823c=currentCoins,_0x56f4c3=getNormalizedPerformance(),_0x1ad755=_0x435868===_0x340be5(0xe8)?_0x4d0223:_0x435868===_0x340be5(0xe7)||_0x435868===_0x340be5(0xd7)?_0x2e5712:_0x340be5(0x220)+_0x4d0223,_0x357285=_0x435868===_0x340be5(0x1c7)?_0x340be5(0x110):_0x435868==='net-fiat'?_0x340be5(0x110):_0x1ad755+_0x340be5(0x123),_0x4f4a94=_0x435868===_0x340be5(0x1c7)||_0x435868===_0x340be5(0xd7)?_0x340be5(0x110):_0x1ad755+_0x340be5(0xe5);let _0x50a023=0x0;_0x2d823c[_0x340be5(0x1ba)](_0x54814e=>{const _0x20942e=_0x340be5;_0x50a023+=_0x54814e[_0x20942e(0x259)]*_0x54814e[_0x20942e(0x1c3)];});if(_0x435868==='fiat'||_0x435868===_0x340be5(0xd7)){if(_0x4d0223===_0x340be5(0x20d)||_0x4d0223==='ETH')_0x50a023=_0x50a023*(_0x2e5712===_0x340be5(0x247)?_0x2ad101[_0x340be5(0x15d)]:_0x2ad101['usd']);else{if(usdBasecoins[_0x340be5(0xdb)](_0x4d0223))_0x50a023=_0x50a023*(_0x2e5712==='EUR'?_0x2ad101[_0x340be5(0x15d)]/_0x2ad101['usd']:0x1);else _0x4d0223===_0x340be5(0x247)&&(_0x50a023=_0x50a023*(_0x2e5712===_0x340be5(0x247)?0x1:_0x2ad101['usd']/_0x2ad101[_0x340be5(0x15d)]));}}let _0xda68f4;if(_0x50a023!==0x0){if(_0x435868===_0x340be5(0xe8))_0xda68f4=(_0x50a023/startingBalances[_0x340be5(0xe8)]-0x1)*0x64;else{if(_0x2e5712===_0x340be5(0x247))_0xda68f4=(_0x50a023/startingBalances[_0x340be5(0x15d)]-0x1)*0x64;else _0xda68f4=(_0x50a023/startingBalances['usd']-0x1)*0x64;}let _0x3d5686=0x0;if(startingBalances[_0x340be5(0x1df)])_0x2d823c[_0x340be5(0x1ba)](_0x528390=>{const _0x479c35=_0x340be5;let _0x5a208c=startingBalances[_0x479c35(0x1df)][_0x479c35(0x18e)](_0x26be29=>_0x26be29[_0x479c35(0x11f)]===_0x528390[_0x479c35(0x11f)]);if(_0x5a208c&&_0x5a208c[_0x479c35(0x11f)]&&_0x528390[_0x479c35(0x259)]!==0x0)_0x3d5686+=_0x5a208c[_0x479c35(0x259)]*_0x528390[_0x479c35(0x1c3)];});let _0x4838f9=0x0;if(_0x56f4c3[_0x340be5(0x1cc)]!==0x0){let _0x508aab=_0x56f4c3[_0x56f4c3[_0x340be5(0x1cc)]-0x1];_0x4838f9=_0x508aab[_0x340be5(0xfe)];}_0x3d5686-=_0x4838f9;_0x435868===_0x340be5(0x1c7)&&(_0xda68f4=(_0x50a023-_0x3d5686)/startingBalances[_0x340be5(0xe8)]*0x64,_0x50a023=_0x50a023-_0x3d5686);if(_0x435868===_0x340be5(0xd7)){let _0x40c5d0=_0x2e5712==='EUR'?startingBalances[_0x340be5(0x15d)]:startingBalances[_0x340be5(0x1ee)];if(_0x4d0223===_0x340be5(0x20d)||_0x4d0223==='ETH')_0x3d5686=_0x2e5712==='EUR'?_0x3d5686*_0x2ad101['eur']:_0x3d5686*_0x2ad101[_0x340be5(0x1ee)];else{if(usdBasecoins['includes'](_0x4d0223))_0x3d5686=_0x2e5712===_0x340be5(0x247)?_0x3d5686*_0x2ad101[_0x340be5(0x15d)]/_0x2ad101[_0x340be5(0x1ee)]:_0x3d5686;else _0x4d0223==='EUR'&&(_0x3d5686=_0x2e5712===_0x340be5(0x247)?_0x3d5686:_0x3d5686*_0x2ad101[_0x340be5(0x1ee)]/_0x2ad101['eur']);}_0xda68f4=(_0x50a023-_0x3d5686)/_0x40c5d0*0x64,_0x50a023=_0x50a023-_0x3d5686;}if(_0xda68f4){if(_0xda68f4<0x64)_0xda68f4=_0xda68f4[_0x340be5(0x178)](0x2);else{if(_0xda68f4<0x3e8)_0xda68f4=_0xda68f4[_0x340be5(0x178)](0x1);else _0xda68f4=_0xda68f4[_0x340be5(0x178)](0x0);}}else _0xda68f4=Number('0')[_0x340be5(0x178)](0x2);if(_0x50a023){if(Math['abs'](_0x50a023)<0.000001)_0x50a023=_0x50a023['toFixed'](0x2);else{if(Math[_0x340be5(0x16b)](_0x50a023)<0.1)_0x50a023=_0x50a023['toFixed'](0x6);else{if(Math[_0x340be5(0x16b)](_0x50a023)<0x1)_0x50a023=_0x50a023[_0x340be5(0x178)](0x5);else{if(Math[_0x340be5(0x16b)](_0x50a023)<0xa)_0x50a023=_0x50a023['toFixed'](0x4);else{if(Math[_0x340be5(0x16b)](_0x50a023)<0x64)_0x50a023=_0x50a023['toFixed'](0x3);else{if(Math['abs'](_0x50a023)<0x3e8)_0x50a023=_0x50a023['toFixed'](0x2);else _0x50a023=_0x50a023[_0x340be5(0x178)](0x2);}}}}}}else _0x50a023=Number('0')[_0x340be5(0x178)](0x2);}else _0xda68f4=Number('0')[_0x340be5(0x178)](0x2);return{'value':_0x50a023,'change':_0xda68f4,'leftTxt':_0x357285,'rightTxt':_0x4f4a94};}async function getStartingBalances(_0x37ca3a,_0x337ce9=!![]){const _0x4ae5c3=_0x160be7;if(_0x37ca3a[_0x4ae5c3(0x1cc)]!==0x0){const [_0x3a8a0f,_0x5c1a8c,_0x542abc]=getPerf(_0x37ca3a[0x0],!![]);let _0x3878bd=[];config[_0x4ae5c3(0x136)][_0x4ae5c3(0x1ba)](_0x3c21f2=>{const _0x3e43f3=_0x4ae5c3;let _0x5304da=0x0,_0x2ab1b6;config[_0x3e43f3(0x258)][_0x3e43f3(0x1ba)](_0x3f42a1=>{const _0x484f8f=_0x3e43f3;let _0x5ceb29=_0x3f42a1[_0x484f8f(0x209)][_0x484f8f(0x18e)](_0x2228b3=>_0x2228b3[_0x484f8f(0x11f)]==_0x3c21f2[_0x484f8f(0x11f)]);if(_0x5ceb29){_0x5304da+=_0x5ceb29[_0x484f8f(0x259)];if(!_0x2ab1b6)_0x2ab1b6=_0x5ceb29['price'];}}),_0x3878bd[_0x3e43f3(0xf2)]({'coin':_0x3c21f2[_0x3e43f3(0x11f)],'number':_0x5304da,'initialprice':_0x2ab1b6});});const _0x1d4706={'basecoin':_0x3a8a0f,'eur':_0x5c1a8c,'usd':_0x542abc,'coins':_0x3878bd};if(_0x337ce9)proxyEmit(_0x4ae5c3(0x22d),_0x1d4706);startingBalances=_0x1d4706;}}function headlessMode(_0x2b12cd){const _0xac7ea7=_0x160be7;let _0x2dcce9=_0x2b12cd[_0xac7ea7(0x136)],_0x44d91d=_0x2b12cd[_0xac7ea7(0xf5)],_0xab71ed=[];for(let _0x173fc6 of _0x2dcce9){if(_0x173fc6[_0xac7ea7(0x11f)]!=config['basecoin']){if(_0x173fc6[_0xac7ea7(0x1a2)]>=_0x44d91d/0x64){if(_0x173fc6[_0xac7ea7(0x233)])_0xab71ed['push'](_0x173fc6);}else{if(_0x173fc6[_0xac7ea7(0x1a2)]<=-_0x44d91d/0x64){if(_0x173fc6[_0xac7ea7(0x233)])_0xab71ed[_0xac7ea7(0xf2)](_0x173fc6);}}}}_0xab71ed['length']>0x0&&placeOrder(_0xab71ed);}function notifyBalance(_0x1cd6f6){const _0x589d03=_0x160be7;let _0x242203=_0x1cd6f6[_0x589d03(0x136)],_0x9362e1=_0x1cd6f6['threshold'],_0x5ed116=[];for(let _0x5c5f95 of _0x242203){if(_0x5c5f95[_0x589d03(0x11f)]!=config[_0x589d03(0xe8)]){if(_0x5c5f95['delta']>=_0x9362e1/0x64){if(_0x5c5f95['valid'])_0x5ed116[_0x589d03(0xf2)](_0x5c5f95);}else{if(_0x5c5f95[_0x589d03(0x1a2)]<=-_0x9362e1/0x64){if(_0x5c5f95[_0x589d03(0x233)])_0x5ed116[_0x589d03(0xf2)](_0x5c5f95);}}}}if(_0x5ed116[_0x589d03(0x1cc)]>0x0){let _0xabd351=_0x5ed116[_0x589d03(0xec)](_0x11e4f7=>_0x11e4f7[_0x589d03(0x11f)]);_0xabd351[_0x589d03(0x1e8)]();let _0x3222fb=_0xabd351[_0x589d03(0x22e)](',\x20');if(!lastCoinsToBalance)logHistory(_0x589d03(0x1af),_0x589d03(0x196));lastCoinsToBalance=_0x3222fb;}}function symbolToCoin(_0x1df1c7){const _0x39f23e=_0x160be7;let _0x1c4528;if(_0x1df1c7[_0x39f23e(0xdb)]('/'+config['basecoin']))_0x1c4528=_0x1df1c7['replace']('/'+config[_0x39f23e(0xe8)],'');if(_0x1df1c7['includes'](config['basecoin']+'/'))_0x1c4528=_0x1df1c7['replace'](config[_0x39f23e(0xe8)]+'/','');return _0x1c4528;}async function unlockOrders(){const _0x5098d6=_0x160be7;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x5098d6(0x17e)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x5098d6(0xf7)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5831f3=await getCoins();[currentCoins,currentCoinsAll]=_0x5831f3,validateOrdersState=_0x5098d6(0x1fc),persistOpenOrders([]),lockOrders=ORDERS[_0x5098d6(0x14d)],logger[_0x5098d6(0x17e)](_0x5098d6(0x215));}}async function validateOrders(_0x4429f8){const _0x307bbe=_0x160be7;if(_0x4429f8)validateOrdersState=_0x4429f8;logger[_0x307bbe(0x17e)](_0x307bbe(0x174)+validateOrdersState+_0x307bbe(0xdd)+(lockOrders==0x1?_0x307bbe(0x1c4):lockOrders==0x2?_0x307bbe(0x16d):'ORDERS.UNLOCKED'));let _0x3297b7=[],_0x6e0897=config[_0x307bbe(0x175)]==_0x307bbe(0xd5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x307bbe(0xef)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x307bbe(0xdc)])return;logger[_0x307bbe(0x17e)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x307bbe(0x1ba)](_0x1bec50=>{const _0x46ae00=_0x307bbe;let _0x5727f0=![];_0x1bec50[_0x46ae00(0x137)]>0x0&&(_0x5727f0=!![]),_0x3297b7[_0x46ae00(0xf2)](_0x5727f0),_0x5727f0&&config[_0x46ae00(0x175)]!=_0x46ae00(0xd5)&&logHistory(_0x46ae00(0x15e),_0x46ae00(0xee)+_0x1bec50[_0x46ae00(0x11d)]+'\x20'+_0x1bec50['side']+'\x20#'+formatResult(_0x1bec50[_0x46ae00(0x137)],0x8)+'\x20@'+formatResult(_0x1bec50[_0x46ae00(0x1f1)],0x8));}),_0x3297b7[_0x307bbe(0x1ba)]((_0x384b0d,_0x593472)=>{const _0x57349f=_0x307bbe;if(_0x384b0d)lastOrders[_0x57349f(0x192)](_0x593472,0x1);}),persistOpenOrders(lastOrders);const _0x152e9e=coolingDown?_0x307bbe(0x246):_0x307bbe(0x128);if(validateOrdersState=='initial'){validateOrdersState=_0x307bbe(0xe1);if(_0x3297b7[_0x307bbe(0xdb)](![])){if(config[_0x307bbe(0x175)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3297b7[_0x307bbe(0xdb)](![])){}else{if(allOrdersPlaced){if(config[_0x307bbe(0x175)]==_0x307bbe(0xd5)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x307bbe(0x230))_0x3297b7['includes'](![])&&(config[_0x307bbe(0x175)]=='market'?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x307bbe(0x1e9)](_0x6e0897*validateOrderInterval/0xea60)+_0x307bbe(0x1f6)+_0x152e9e):(await cancelOrders(),logHistory(_0x307bbe(0x104),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x307bbe(0x1e9)](_0x6e0897*validateOrderInterval/0xea60)+_0x307bbe(0x1f6)+_0x152e9e))),await unlockOrders();else{if(validateOrdersState==_0x307bbe(0x11c)){if(config['ordertype']!=_0x307bbe(0xd5))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x152e9e);await unlockOrders();}}}}}async function cancelOrders(){const _0xfaaac3=_0x160be7;lastOrders[_0xfaaac3(0x1ba)](async _0x150f29=>{const _0x45bba9=_0xfaaac3;try{const _0x4c7a78=await exchange[_0x45bba9(0x140)](_0x150f29['orderId'],_0x150f29[_0x45bba9(0x11d)]);}catch(_0x5215de){if(_0x5215de[_0x45bba9(0x193)]()[_0x45bba9(0xdb)](_0x45bba9(0x145))){}else await handleError(_0x5215de,_0x45bba9(0x134));}});}async function initCoinResults(_0x308c6f){const _0xbe8344=_0x160be7;_0x308c6f?logger[_0xbe8344(0x17e)]('Resetting\x20coin\x20results:\x20'+_0x308c6f):logger[_0xbe8344(0x17e)]('Initializing\x20coin\x20results'),config['portfolio'][_0xbe8344(0x1ba)](_0xf05c2b=>{const _0x14e5c4=_0xbe8344;if(!_0xf05c2b[_0x14e5c4(0x218)]&&_0xf05c2b[_0x14e5c4(0x11f)]!=config[_0x14e5c4(0xe8)]){const _0x2e51e6=currentCoins[_0x14e5c4(0x18e)](_0x13050a=>_0x13050a[_0x14e5c4(0x11f)]==_0xf05c2b[_0x14e5c4(0x11f)]),_0xe0c495=global[_0x14e5c4(0x14b)][noslash(_0xf05c2b[_0x14e5c4(0x11d)])];let _0x2b2cdf=_0x2e51e6?_0x2e51e6[_0x14e5c4(0x259)]:null,_0x1db032=_0xf05c2b[_0x14e5c4(0x1d6)]?0x1/_0xe0c495:_0xe0c495,_0x3e75c9;config[_0x14e5c4(0x258)][_0x14e5c4(0x1ba)](_0x4c047a=>{const _0xe539f2=_0x14e5c4;!_0x3e75c9&&(_0x3e75c9=_0x4c047a[_0xe539f2(0x209)][_0xe539f2(0x18e)](_0x45f45=>_0x45f45[_0xe539f2(0x11f)]==_0xf05c2b['coin']),_0x3e75c9&&(_0x2b2cdf=_0x3e75c9[_0xe539f2(0x259)],_0x1db032=_0x3e75c9[_0xe539f2(0x1f1)]));});let _0x4f25cc=dbCoinResults[_0x14e5c4(0x163)]('coins')[_0x14e5c4(0x18e)]({'coin':_0xf05c2b[_0x14e5c4(0x11f)]})[_0x14e5c4(0x213)]();if(!_0x4f25cc){const _0x3d08df={'coin':_0xf05c2b[_0x14e5c4(0x11f)],'number':_0x2b2cdf,'breakeven':_0x1db032,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x14e5c4(0x1df))[_0x14e5c4(0xf2)](_0x3d08df)[_0x14e5c4(0x150)]();}else{if(_0x308c6f&&_0xf05c2b[_0x14e5c4(0x11f)]==_0x308c6f){const _0x2a6157={'coin':_0xf05c2b['coin'],'number':_0x2b2cdf,'breakeven':_0x1db032,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x14e5c4(0x163)]('coins')[_0x14e5c4(0x18e)]({'coin':_0xf05c2b[_0x14e5c4(0x11f)]})[_0x14e5c4(0x149)](_0x2a6157)[_0x14e5c4(0x150)]();}}}});}async function updateCoinResults(_0x151d5b,_0x336c50=![]){const _0x187ed3=_0x160be7;let _0x92e3da,_0x4515cf,_0x554a1f,_0x2ff9de,_0x2f1dd3,_0x2b33ee,_0x4d0033=dbCoinResults[_0x187ed3(0x163)](_0x187ed3(0x1df))[_0x187ed3(0x18e)]({'coin':_0x151d5b[_0x187ed3(0x11f)]})['value'](),_0x51219b=![];_0x4d0033&&Object[_0x187ed3(0x252)](_0x4d0033)[_0x187ed3(0x1ba)](([_0x40045a,_0x3ac706])=>{if(_0x3ac706==null)_0x51219b=!![];});(!_0x4d0033||_0x51219b)&&(await initCoinResults(_0x151d5b[_0x187ed3(0x11f)]),_0x4d0033=dbCoinResults[_0x187ed3(0x163)](_0x187ed3(0x1df))[_0x187ed3(0x18e)]({'coin':_0x151d5b['coin']})[_0x187ed3(0x213)]());_0x151d5b[_0x187ed3(0x1d6)]&&(_0x2b33ee={'filled':_0x151d5b[_0x187ed3(0x137)]*_0x151d5b[_0x187ed3(0x1f1)],'amount':_0x151d5b[_0x187ed3(0x137)]*_0x151d5b[_0x187ed3(0x1f1)],'side':_0x151d5b[_0x187ed3(0x225)]==_0x187ed3(0x189)?_0x187ed3(0x219):'sell','price':0x1/_0x151d5b[_0x187ed3(0x1f1)]},_0x151d5b={..._0x151d5b,..._0x2b33ee});_0x336c50?_0x4515cf=_0x151d5b[_0x187ed3(0x225)]=='buy'?_0x4d0033[_0x187ed3(0x259)]+_0x151d5b[_0x187ed3(0x137)]:_0x4d0033[_0x187ed3(0x259)]-_0x151d5b['filled']:_0x4515cf=await getCoinNumber(_0x151d5b[_0x187ed3(0x11f)]);if(_0x151d5b[_0x187ed3(0x1fe)]&&_0x151d5b[_0x187ed3(0x1fe)]['currency']==config['basecoin'])_0x92e3da=_0x151d5b['fee'][_0x187ed3(0x1ef)];else{if(_0x151d5b['fee']&&_0x151d5b[_0x187ed3(0x1fe)][_0x187ed3(0x18a)]==_0x187ed3(0xe4)&&!_0x336c50)_0x92e3da=_0x151d5b[_0x187ed3(0x1fe)]['cost']*global[_0x187ed3(0x14b)][_0x187ed3(0xe4)+config[_0x187ed3(0xe8)]];else _0x92e3da=defaultFee*_0x151d5b[_0x187ed3(0x137)]*_0x151d5b[_0x187ed3(0x1f1)];}_0x151d5b[_0x187ed3(0x225)]==_0x187ed3(0x219)?(_0x554a1f=_0x4515cf!=0x0?(_0x4d0033['breakeven']*_0x4d0033[_0x187ed3(0x259)]+_0x151d5b[_0x187ed3(0x1f1)]*(_0x4515cf-_0x4d0033[_0x187ed3(0x259)])+_0x92e3da)/_0x4515cf:0x0,_0x2ff9de=_0x4d0033[_0x187ed3(0x1d5)]):(_0x554a1f=_0x4515cf!=0x0?(_0x4d0033[_0x187ed3(0x147)]*_0x4d0033[_0x187ed3(0x259)]-_0x151d5b['price']*(_0x4d0033[_0x187ed3(0x259)]-_0x4515cf)+_0x92e3da)/_0x4515cf:0x0,_0x2ff9de=_0x4d0033[_0x187ed3(0x1d5)]+(_0x151d5b[_0x187ed3(0x1f1)]-_0x4d0033[_0x187ed3(0x147)])*_0x151d5b[_0x187ed3(0x137)]);_0x2f1dd3=(_0x151d5b['price']-_0x554a1f-_0x92e3da/_0x151d5b[_0x187ed3(0x137)])*_0x4515cf;let _0x3e7f48={'coin':_0x151d5b[_0x187ed3(0x11f)],'number':_0x4515cf,'breakeven':formatResult(_0x554a1f,0x8),'realized':formatResult(_0x2ff9de,0x8),'unrealized':formatResult(_0x2f1dd3,0x8),'fees':formatResult(_0x4d0033['fees']+_0x92e3da,0x8),'sells':_0x151d5b[_0x187ed3(0x225)]=='sell'?_0x4d0033[_0x187ed3(0x127)]+0x1:_0x4d0033[_0x187ed3(0x127)],'buys':_0x151d5b[_0x187ed3(0x225)]=='buy'?_0x4d0033[_0x187ed3(0x237)]+0x1:_0x4d0033[_0x187ed3(0x237)]};dbCoinResults['get'](_0x187ed3(0x1df))['find']({'coin':_0x151d5b[_0x187ed3(0x11f)]})[_0x187ed3(0x149)](_0x3e7f48)[_0x187ed3(0x150)]();if(!_0x336c50){if(_0x151d5b[_0x187ed3(0x1fe)]&&_0x151d5b[_0x187ed3(0x1fe)][_0x187ed3(0x18a)]==_0x187ed3(0xe4)){const _0x3bd23b=currentCoins['find'](_0x1e6aa3=>_0x1e6aa3[_0x187ed3(0x11f)]==_0x187ed3(0xe4));if(_0x3bd23b){let _0x301c2b=dbCoinResults[_0x187ed3(0x163)](_0x187ed3(0x1df))[_0x187ed3(0x18e)]({'coin':'BNB'})[_0x187ed3(0x213)]();_0x3e7f48={..._0x301c2b,'number':_0x3bd23b[_0x187ed3(0x259)]},dbCoinResults[_0x187ed3(0x163)](_0x187ed3(0x1df))['find']({'coin':_0x187ed3(0xe4)})[_0x187ed3(0x149)](_0x3e7f48)[_0x187ed3(0x150)]();}}}}async function placeOrder(_0x56f58c){const _0x45f7ad=_0x160be7,_0x480762=config[_0x45f7ad(0x175)]=='market'?_0x45f7ad(0xd5):'limit';if(lockOrders==ORDERS[_0x45f7ad(0x14d)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x45f7ad(0xdc)],allOrdersPlaced=![],validateOrdersState=_0x45f7ad(0x1fc);let _0xbd535e=![];lastOrders=[];for(const _0x39d395 of _0x56f58c){let _0x16e5c5,_0x503a81,_0x2ca606,_0x53448e,_0x1b75eb,_0x27bd95=_0x39d395[_0x45f7ad(0x11d)];try{const _0x4fb02b=await exchange[_0x45f7ad(0xda)](_0x27bd95);_0x16e5c5=_0x39d395[_0x45f7ad(0x1d6)]?0x1/_0x39d395[_0x45f7ad(0x1c3)]:_0x39d395[_0x45f7ad(0x1c3)],_0x503a81=_0x4fb02b['bid'],_0x2ca606=_0x4fb02b[_0x45f7ad(0x183)];_0x39d395[_0x45f7ad(0x1d6)]?(_0x53448e=_0x39d395[_0x45f7ad(0x225)]=='buy'?_0x45f7ad(0x189):'buy',_0x1b75eb=Math[_0x45f7ad(0x16b)](_0x39d395[_0x45f7ad(0x1da)])/_0x16e5c5):(_0x53448e=_0x39d395[_0x45f7ad(0x225)],_0x1b75eb=Math[_0x45f7ad(0x16b)](_0x39d395['trade']));_0x480762==_0x45f7ad(0xe3)&&(config['ordertype']=='limit-high'&&(_0x16e5c5=_0x53448e=='buy'?_0x503a81:_0x2ca606),config[_0x45f7ad(0x175)]==_0x45f7ad(0x1a3)&&(_0x16e5c5=_0x53448e==_0x45f7ad(0x219)?_0x2ca606:_0x503a81));_0x1b75eb=formatResult(_0x1b75eb,0x8),_0x16e5c5=formatResult(_0x16e5c5,0x8);const _0xc16992=_0x53448e=='sell'?config['emojisell']?String[_0x45f7ad(0x1e2)]('0x'+config[_0x45f7ad(0x1d3)])+'\x20':'':config['emojibuy']?String[_0x45f7ad(0x1e2)]('0x'+config[_0x45f7ad(0x22b)])+'\x20':'',_0x1c28d7=_0x480762==_0x45f7ad(0xd5)?_0x45f7ad(0x25c):config['ordertype']==_0x45f7ad(0x133)?_0x45f7ad(0x10c):_0x45f7ad(0x1dd),_0xfc50de=(Math['floor'](Math[_0x45f7ad(0xe9)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x45f7ad(0xf2)]({'customId':_0xfc50de,'symbol':_0x27bd95,'coin':_0x39d395[_0x45f7ad(0x11f)],'amount':_0x1b75eb,'price':_0x16e5c5,'side':_0x53448e,'reverse':_0x39d395[_0x45f7ad(0x1d6)],'filled':0x0});if(_0x480762==_0x45f7ad(0xd5))logHistory(_0x45f7ad(0x15e),''+_0xc16992+_0x1c28d7+'\x20order:\x20'+_0x27bd95+'\x20'+_0x53448e+'\x20#'+formatResult(_0x1b75eb,0x8)+'\x20@'+formatResult(_0x16e5c5,0x8));else logHistory(_0x45f7ad(0x15e),''+_0xc16992+_0x1c28d7+'\x20order:\x20'+_0x27bd95+'\x20'+_0x53448e+'\x20#'+formatResult(_0x1b75eb,0x8)+'\x20@'+formatResult(_0x16e5c5,0x8));let _0x1919af;_0x480762==_0x45f7ad(0xd5)?_0x53448e=='buy'&&[_0x45f7ad(0x17b),_0x45f7ad(0x1fd),_0x45f7ad(0x11e),_0x45f7ad(0x1d2),_0x45f7ad(0x1fb)][_0x45f7ad(0xdb)](config[_0x45f7ad(0x179)])?_0x1919af=await exchange[_0x45f7ad(0x176)](_0x27bd95,_0x480762,_0x53448e,_0x1b75eb,_0x16e5c5):_0x1919af=await exchange['createOrder'](_0x27bd95,_0x480762,_0x53448e,_0x1b75eb,undefined):_0x1919af=await exchange[_0x45f7ad(0x176)](_0x27bd95,_0x480762,_0x53448e,_0x1b75eb,_0x16e5c5);logger[_0x45f7ad(0x17e)](_0x45f7ad(0x172)+_0x1919af['id']+_0x45f7ad(0x113)+_0xfc50de);const _0x2bd9e7=lastOrders[_0x45f7ad(0x1cc)]-0x1;if(_0x2bd9e7>=0x0&&lastOrders[_0x2bd9e7]['customId']==_0xfc50de){lastOrders[_0x2bd9e7][_0x45f7ad(0x13f)]=_0x1919af['id'];if(_0x1919af[_0x45f7ad(0x10a)])lastOrders[_0x2bd9e7][_0x45f7ad(0x10a)]=_0x1919af['amount'];if(_0x1919af[_0x45f7ad(0x1f1)])lastOrders[_0x2bd9e7][_0x45f7ad(0x1f1)]=_0x1919af[_0x45f7ad(0x1f1)];lastOrders[_0x2bd9e7][_0x45f7ad(0x1fe)]=_0x1919af[_0x45f7ad(0x1fe)];}if(config[_0x45f7ad(0xf4)]!=0x0){let _0x4a0450=null;if(cooldownTracker[_0x45f7ad(0x1cc)]==config[_0x45f7ad(0xf4)]-0x1)_0x4a0450=cooldownTracker[_0x45f7ad(0x221)]();const _0x3ced89=getTimeStamp();cooldownTracker[_0x45f7ad(0xf2)](_0x3ced89);if(_0x4a0450){const _0x24974b=fns[_0x45f7ad(0x11b)](new Date(_0x3ced89),new Date(_0x4a0450));if(_0x24974b<cooldownInterval){logHistory('error','Executed\x20'+config[_0x45f7ad(0xf4)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x45f7ad(0x16a)),coolingDown=!![];break;}}}}catch(_0x428ccd){if(_0x428ccd[_0x45f7ad(0x193)]()[_0x45f7ad(0xdb)](_0x45f7ad(0x240)))lastOrders=lastOrders['filter'](_0x4c2bb0=>_0x4c2bb0[_0x45f7ad(0x11d)]!=_0x27bd95),logHistory(_0x45f7ad(0x1cf),_0x45f7ad(0x16f)+_0x27bd95),_0xbd535e=!![];else{if(_0x428ccd[_0x45f7ad(0x193)]()[_0x45f7ad(0xdb)](_0x45f7ad(0xf0)))lastOrders=lastOrders[_0x45f7ad(0x19a)](_0x28d625=>_0x28d625[_0x45f7ad(0x11d)]!=_0x27bd95),logHistory(_0x45f7ad(0x1cf),_0x45f7ad(0x1f9)+_0x27bd95),_0xbd535e=!![];else{if(_0x428ccd['toString']()[_0x45f7ad(0xdb)](_0x45f7ad(0x1ab)))lastOrders=lastOrders['filter'](_0x251e74=>_0x251e74[_0x45f7ad(0x11d)]!=_0x27bd95),logHistory(_0x45f7ad(0x1cf),'Order\x20is\x20invalid:\x20'+_0x27bd95),logger[_0x45f7ad(0x17e)](_0x428ccd),_0xbd535e=!![];else _0x428ccd[_0x45f7ad(0x193)]()[_0x45f7ad(0xdb)](_0x45f7ad(0x16c))?(lastOrders=lastOrders[_0x45f7ad(0x19a)](_0x535bed=>_0x535bed['symbol']!=_0x27bd95),logHistory('error',_0x45f7ad(0x16f)+_0x27bd95),_0xbd535e=!![]):(lastOrders=lastOrders[_0x45f7ad(0x19a)](_0xa9218f=>_0xa9218f[_0x45f7ad(0x11d)]!=_0x27bd95),await handleError(_0x428ccd,_0x45f7ad(0x1f0),_0x27bd95));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x45f7ad(0x1cc)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2da5ee=config[_0x45f7ad(0x175)]==_0x45f7ad(0xd5)?validateOrderTimeout*0x3c*0x3e8:config[_0x45f7ad(0xef)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2cf631=_0x45f7ad;validateOrders(_0x2cf631(0x230));},_0x2da5ee);}else unlockOrders();_0xbd535e&&config[_0x45f7ad(0x16e)]&&await pauseBot(_0x45f7ad(0x17c)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x45f7ad(0x104),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x45f7ad(0x1cf),_0x45f7ad(0x24d));else lockOrders!=ORDERS[_0x45f7ad(0x14d)]&&(!config[_0x45f7ad(0x16e)]&&(config[_0x45f7ad(0x175)]=='market'?logHistory(_0x45f7ad(0x1cf),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x4de390){const _0x60d5ea=_0x160be7,_0xac6f3b={...config,'openOrders':_0x4de390};let _0x4643b1=dbConfig[_0x60d5ea(0x163)](_0x60d5ea(0x24a))[_0x60d5ea(0x18e)]({'botID':botID})[_0x60d5ea(0x213)]();_0x4643b1&&dbConfig[_0x60d5ea(0x163)](_0x60d5ea(0x24a))[_0x60d5ea(0x18e)]({'botID':botID})[_0x60d5ea(0x149)](_0xac6f3b)[_0x60d5ea(0x150)]();}function restoreOrders(){const _0x2c0b47=_0x160be7;let _0x3bc343;config[_0x2c0b47(0x1be)]&&allOpenOrders[_0x2c0b47(0x1ba)](_0x53ca0b=>{const _0x16f827=_0x2c0b47,_0x33fe26=config[_0x16f827(0x1be)][_0x16f827(0x18e)](_0x331c6c=>_0x331c6c[_0x16f827(0x13f)]==_0x53ca0b['id']);_0x33fe26&&(lastOrders['push'](_0x33fe26),_0x3bc343=_0x53ca0b[_0x16f827(0x15f)]);});if(lastOrders[_0x2c0b47(0x1cc)]>0x0){lockOrders=ORDERS[_0x2c0b47(0xdc)],validateOrdersState=_0x2c0b47(0xe1),allOrdersPlaced=!![];const _0x45b716=new Date()[_0x2c0b47(0x111)](),_0x569aaa=config['ordertype']==_0x2c0b47(0xd5)?validateOrderTimeout*0x3c*0x3e8:config[_0x2c0b47(0xef)]*0x3c*0x3e8;if(_0x3bc343+_0x569aaa>_0x45b716){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3bc343+_0x569aaa-_0x45b716);}else validateOrders(_0x2c0b47(0x230));}}async function sendMetricsTelegram(){const _0x1a4443=_0x160be7;if(!coinsLoaded){process[_0x1a4443(0xe6)]({'telegrammsg':_0x1a4443(0xf9)},_0x293f39=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x355a5a='';if(config[_0x1a4443(0x1bf)])_0x355a5a='<b>'+config[_0x1a4443(0x1b9)]+_0x1a4443(0x1de);else _0x355a5a=_0x1a4443(0x1c1)+botID+_0x1a4443(0x1de);const _0x5f2cf4=getKPIs(_0x1a4443(0xe8)),_0x43183e=getKPIs('fiat',config[_0x1a4443(0xe7)]),_0x5556dc=getKPIs('net-basecoin'),_0xd64022=getKPIs('net-fiat',config[_0x1a4443(0xe7)]);_0x355a5a+=_0x1a4443(0x23e),_0x355a5a+=_0x5f2cf4[_0x1a4443(0x18f)]+'\x20:\x20'+_0x5f2cf4['value']+'\x0a',_0x355a5a+=_0x5f2cf4[_0x1a4443(0x11a)]+':\x20'+_0x5f2cf4[_0x1a4443(0x14c)]+'%\x0a',_0x355a5a+=_0x43183e[_0x1a4443(0x18f)]+'\x20:\x20'+_0x43183e['value']+'\x0a',_0x355a5a+=_0x43183e[_0x1a4443(0x11a)]+':\x20'+_0x43183e['change']+'%\x0a',_0x355a5a+=_0x5556dc[_0x1a4443(0x18f)]+':\x20'+_0x5556dc[_0x1a4443(0x213)]+'\x20('+config[_0x1a4443(0xe8)]+')\x0a',_0x355a5a+=_0x5556dc['rightTxt']+':\x20'+_0x5556dc[_0x1a4443(0x14c)]+_0x1a4443(0xea)+config[_0x1a4443(0xe8)]+')\x0a',_0x355a5a+=_0xd64022[_0x1a4443(0x18f)]+':\x20'+_0xd64022['value']+'\x20('+config[_0x1a4443(0xe7)]+')\x0a',_0x355a5a+=_0xd64022[_0x1a4443(0x11a)]+':\x20'+_0xd64022[_0x1a4443(0x14c)]+_0x1a4443(0xea)+config[_0x1a4443(0xe7)]+')\x0a',_0x355a5a+=_0x1a4443(0x1f7),process[_0x1a4443(0xe6)]({'telegrammsg':_0x355a5a},_0x3043ed=>{});}async function sendPortfolioTelegram(){const _0xbd7192=_0x160be7;if(!coinsLoaded){process[_0xbd7192(0xe6)]({'telegrammsg':_0xbd7192(0xf9)},_0xe2a3d=>{});return;}let _0x3f6064='';if(config[_0xbd7192(0x1bf)])_0x3f6064=_0xbd7192(0x171)+config['botname']+_0xbd7192(0x17d);else _0x3f6064=_0xbd7192(0x1c1)+botID+_0xbd7192(0x17d);_0x3f6064+=_0xbd7192(0x23e),_0x3f6064+='-------------------------------\x0a',_0x3f6064+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3f6064+=_0xbd7192(0x186),currentCoins[_0xbd7192(0x1ba)](_0x49f4ed=>{const _0x5857be=_0xbd7192;_0x3f6064+=_0x49f4ed[_0x5857be(0x11f)][_0x5857be(0x248)](0x7)+'|\x20'+formatPad(_0x49f4ed[_0x5857be(0x166)],0x2,0x6)+'|\x20'+formatPad(_0x49f4ed[_0x5857be(0x241)],0x2,0x6)+'|\x20'+formatPad(_0x49f4ed[_0x5857be(0x1a2)]*0x64,0x2,0x6)+'\x0a';}),_0x3f6064+=_0xbd7192(0x1f7),process[_0xbd7192(0xe6)]({'telegrammsg':_0x3f6064},_0x255258=>{});}function formatPad(_0x36ad7c,_0x48938a,_0x2fe8e1){const _0x420aef=_0x160be7,_0x415727=formatResultString(_0x36ad7c,_0x48938a);return _0x415727?_0x415727[_0x420aef(0x125)](_0x2fe8e1):''[_0x420aef(0x125)](_0x2fe8e1);}function logHistory(_0x1fc2b8,_0xcd74cd,_0x32e980=''){const _0x25661a=_0x160be7;let _0xe88547={'time':getTimeStamp(),'type':_0x1fc2b8,'event':_0xcd74cd};dbLogs[_0x25661a(0x163)](_0x25661a(0x23a))[_0x25661a(0xf2)](_0xe88547)[_0x25661a(0x150)]();if(_0x32e980=='')_0x32e980=_0xcd74cd;proxyEmit('event',{'log':_0xe88547,'summary':_0x32e980}),process[_0x25661a(0xe6)]({'telegram':{..._0xe88547,'botname':config['botname'],'showname':config[_0x25661a(0x1bf)]}},_0x5b59fe=>{}),logger[_0x25661a(0x21e)](''+_0xe88547[_0x25661a(0x109)]);}function emitHistory(_0xcd25cf={}){const _0x53e3ec=_0x160be7;Object[_0x53e3ec(0x25a)](_0xcd25cf)[_0x53e3ec(0x1cc)]==0x0&&(_0xcd25cf={'type':[_0x53e3ec(0x15e),_0x53e3ec(0x109)],'event':'','page':0x1});if(_0xcd25cf[_0x53e3ec(0x169)][_0x53e3ec(0xdb)](_0x53e3ec(0x109)))_0xcd25cf['type'][_0x53e3ec(0x192)](_0xcd25cf[_0x53e3ec(0x169)]['indexOf']('event'),0x1,_0x53e3ec(0x1cf),_0x53e3ec(0x1af),_0x53e3ec(0x104));if(dbLogs[_0x53e3ec(0x223)]('logs')[_0x53e3ec(0x213)]()){let _0x5b2f75=dbLogs['get'](_0x53e3ec(0x23a))[_0x53e3ec(0x19a)](_0x9fc78a=>{const _0x119216=_0x53e3ec;if(_0xcd25cf[_0x119216(0x169)]['length']==0x0)return![];else return _0xcd25cf[_0x119216(0x169)][_0x119216(0xdb)](_0x9fc78a[_0x119216(0x169)]);})['filter'](_0x47a952=>{const _0xcfa670=_0x53e3ec;if(_0xcd25cf[_0xcfa670(0x109)]=='')return!![];else return _0x47a952['event']['toLowerCase']()[_0xcfa670(0xdb)](_0xcd25cf[_0xcfa670(0x109)][_0xcfa670(0x121)]());})[_0x53e3ec(0x18c)]('time'),_0x594e55=_0x5b2f75['value']()[_0x53e3ec(0x1cc)];_0x5b2f75=_0x5b2f75[_0x53e3ec(0x1d6)]()['slice']((_0xcd25cf[_0x53e3ec(0x229)]-0x1)*logPageSize,_0xcd25cf['page']*logPageSize-0x1)[_0x53e3ec(0x1d6)]()[_0x53e3ec(0x213)](),proxyEmit(_0x53e3ec(0x242),{'logs':_0x5b2f75,'total':_0x594e55});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2616a8){const _0x4e4a75=_0x160be7;if(dbLogs[_0x4e4a75(0x223)]('logs')[_0x4e4a75(0x213)]()){const _0x1703cb=dbLogs['get'](_0x4e4a75(0x23a))[_0x4e4a75(0x18c)](_0x4e4a75(0x1a6))[_0x4e4a75(0x19a)](_0x4d715a=>{const _0x1ce6dd=_0x4e4a75;return _0x4d715a[_0x1ce6dd(0x169)]==_0x1ce6dd(0x15e);})[_0x4e4a75(0x213)]();dbLogs[_0x4e4a75(0x163)]('logs')[_0x4e4a75(0x250)]()[_0x4e4a75(0x150)](),dbLogs[_0x4e4a75(0x163)]('logs')[_0x4e4a75(0x149)](_0x1703cb)[_0x4e4a75(0x150)](),emitHistory(_0x2616a8);}}async function pauseBot(_0x558695=''){const _0x36ab3b=_0x160be7,_0x2c3859=new Date()['getTime']();if(!lastErrorShown||_0x2c3859-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2c3859;!lastBotPause?(lastBotPause=_0x2c3859,consecutivePauses=0x1):(_0x2c3859-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x36ab3b(0xe6)]({'stop':_0x36ab3b(0x20b)},_0x1709c0=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x558695)_0x558695+='\x20|\x20';logHistory('error',_0x558695+_0x36ab3b(0x188)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x549fdf=_0x160be7;process[_0x549fdf(0xe6)]({'stop':'kill'},_0x45a872=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x594664,_0x5c2424){const _0x723a45=_0x160be7;if(_0x594664[_0x723a45(0x193)]()[_0x723a45(0xdb)](_0x723a45(0x156)))logHistory(_0x723a45(0x1cf),config[_0x723a45(0x179)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration');else{if(_0x594664[_0x723a45(0x193)]()[_0x723a45(0xdb)](_0x723a45(0x15c)))logHistory('error',config[_0x723a45(0x179)]+_0x723a45(0x159));else{if(_0x594664[_0x723a45(0x193)]()[_0x723a45(0xdb)](_0x723a45(0x165)))logHistory(_0x723a45(0x1cf),config[_0x723a45(0x179)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x723a45(0x1cf),_0x723a45(0x190));else{await handleError(_0x594664,_0x5c2424);return;}}}logger['debug'](_0x5c2424+_0x723a45(0x20f),_0x594664);}async function handleError(_0x519cd2,_0x4fff3d,_0x44cee4=''){const _0xc6d6ea=_0x160be7,_0x1c1067=config['exchange']||_0xc6d6ea(0x130);if(_0x519cd2[_0xc6d6ea(0x193)]()[_0xc6d6ea(0xdb)](_0xc6d6ea(0x19e))||_0x519cd2[_0xc6d6ea(0x193)]()['includes'](_0xc6d6ea(0x129)))await pauseBot(config['exchange']+_0xc6d6ea(0x1f2));else{if(_0x519cd2[_0xc6d6ea(0x193)]()[_0xc6d6ea(0xdb)](_0xc6d6ea(0x180))||_0x519cd2[_0xc6d6ea(0x193)]()['includes'](_0xc6d6ea(0x1c6)))await pauseBot(config[_0xc6d6ea(0x179)]+_0xc6d6ea(0x139));else{if(_0x519cd2['toString']()['includes'](_0xc6d6ea(0x239)))await pauseBot(config[_0xc6d6ea(0x179)]+_0xc6d6ea(0x1a5));else{if(_0x519cd2[_0xc6d6ea(0x193)]()[_0xc6d6ea(0xdb)](_0xc6d6ea(0x1aa)))await pauseBot(config['exchange']+_0xc6d6ea(0x234));else{if(_0x519cd2[_0xc6d6ea(0x193)]()[_0xc6d6ea(0xdb)](_0xc6d6ea(0x257)))logHistory(_0xc6d6ea(0x1cf),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0xc6d6ea(0x1cf),_0xc6d6ea(0x243)),await killBot();else{if(_0x519cd2[_0xc6d6ea(0x193)]()['includes']('InvalidNonce'))logHistory(_0xc6d6ea(0x1cf),_0xc6d6ea(0x231)),logHistory(_0xc6d6ea(0x1cf),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x519cd2 instanceof ccxt[_0xc6d6ea(0x148)])await pauseBot(config[_0xc6d6ea(0x179)]+'\x20network\x20error');else{if(_0x519cd2['toString']()[_0xc6d6ea(0xdb)](_0xc6d6ea(0x156)))logHistory(_0xc6d6ea(0x1cf),config['exchange']+_0xc6d6ea(0x167)),logHistory('error',_0xc6d6ea(0x243)),await killBot();else{if(_0x519cd2[_0xc6d6ea(0x193)]()['includes'](_0xc6d6ea(0x15c)))logHistory(_0xc6d6ea(0x1cf),config[_0xc6d6ea(0x179)]+_0xc6d6ea(0xd9)),logHistory('error',_0xc6d6ea(0x243)),await killBot();else{if(_0x519cd2[_0xc6d6ea(0x193)]()['includes'](_0xc6d6ea(0x165)))logHistory(_0xc6d6ea(0x1cf),config[_0xc6d6ea(0x179)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0xc6d6ea(0x1cf),_0xc6d6ea(0x243)),await killBot();else{if(_0x519cd2[_0xc6d6ea(0x193)]()['includes']('InsufficientFunds'))logHistory('error',_0xc6d6ea(0x118)+_0x44cee4);else _0x519cd2 instanceof ccxt[_0xc6d6ea(0xf6)]?logHistory(_0xc6d6ea(0x1cf),config['exchange']+_0xc6d6ea(0x1ce)):await pauseBot(_0xc6d6ea(0x119));}}}}}}}}}}logger[_0xc6d6ea(0x17e)](_0x4fff3d+'\x20|\x20Error\x20details:',_0x519cd2);}function formatResult(_0x5ca955,_0xaa7748){return parseFloat(_0x5ca955['toFixed'](_0xaa7748));}function formatResultTruncate(_0x310384,_0x4c8a18){let _0xd7eb64=formatResultString(_0x310384,0xa),_0x1b8869=_0xd7eb64['indexOf']('.');return _0x1b8869!=-0x1&&(_0xd7eb64=_0xd7eb64['slice'](0x0,_0x1b8869+_0x4c8a18+0x1)),Number(_0xd7eb64);}function formatResultString(_0x4c5a94,_0x16bbc2){const _0x352360=_0x160be7;let _0x1b042d;if(!(''+_0x4c5a94)[_0x352360(0xdb)]('e'))_0x1b042d=+(Math['round'](_0x4c5a94+'e+'+_0x16bbc2)+'e-'+_0x16bbc2);else{let _0xbcbb79=(''+_0x4c5a94)['split']('e'),_0x18ad48='';+_0xbcbb79[0x1]+_0x16bbc2>0x0&&(_0x18ad48='+'),_0x1b042d=+(Math[_0x352360(0x1e9)](+_0xbcbb79[0x0]+'e'+_0x18ad48+(+_0xbcbb79[0x1]+_0x16bbc2))+'e-'+_0x16bbc2);}return Number(_0x1b042d)['toFixed'](_0x16bbc2);}function getServerTime(){const _0x142672=_0x160be7,_0x192291=new Date();return _0x192291['getFullYear']()+'/'+(_0x192291['getMonth']()+0x1)['toString']()[_0x142672(0x125)](0x2,'0')+'/'+_0x192291['getDate']()[_0x142672(0x193)]()['padStart'](0x2,'0')+'\x20'+_0x192291[_0x142672(0x12b)]()[_0x142672(0x193)]()[_0x142672(0x125)](0x2,'0')+':'+_0x192291[_0x142672(0x245)]()[_0x142672(0x193)]()[_0x142672(0x125)](0x2,'0')+':'+_0x192291['getSeconds']()[_0x142672(0x193)]()[_0x142672(0x125)](0x2,'0');}function getTimeStamp(){const _0xd74812=_0x160be7,_0x394344=shiftedTime();return _0x394344[_0xd74812(0x1ac)]()+'/'+(_0x394344[_0xd74812(0x1db)]()+0x1)[_0xd74812(0x193)]()['padStart'](0x2,'0')+'/'+_0x394344['getDate']()[_0xd74812(0x193)]()[_0xd74812(0x125)](0x2,'0')+'\x20'+_0x394344[_0xd74812(0x12b)]()[_0xd74812(0x193)]()[_0xd74812(0x125)](0x2,'0')+':'+_0x394344[_0xd74812(0x245)]()[_0xd74812(0x193)]()['padStart'](0x2,'0')+':'+_0x394344[_0xd74812(0x21a)]()[_0xd74812(0x193)]()[_0xd74812(0x125)](0x2,'0');}function getDate(){const _0xab41b9=_0x160be7,_0x1e04fd=shiftedTime();return _0x1e04fd[_0xab41b9(0x1ac)]()+'/'+(_0x1e04fd[_0xab41b9(0x1db)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1e04fd[_0xab41b9(0x1b6)]()[_0xab41b9(0x193)]()[_0xab41b9(0x125)](0x2,'0');}function getHour(){const _0x2797fc=_0x160be7,_0x53c693=shiftedTime();return _0x53c693[_0x2797fc(0x12b)]()[_0x2797fc(0x193)]()[_0x2797fc(0x125)](0x2,'0');}function sleep(_0x19c3ef){return new Promise(_0x4dbce9=>setTimeout(_0x4dbce9,_0x19c3ef));}function shiftedTime(){const _0x3a075b=_0x160be7,_0x4fd809=new Date();let _0x620f5b=_0x4fd809;if(config&&config[_0x3a075b(0x15a)]!==0x0)_0x620f5b=fns['add'](_0x4fd809,{'hours':config[_0x3a075b(0x15a)]});return _0x620f5b;}function timer(_0x3b28dd){const _0x273b0e=_0x160be7,_0x544734=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x3b28dd,_0x544734):console[_0x273b0e(0x170)](getTimeStamp()+_0x273b0e(0x173),_0x3b28dd,(_0x544734-lasttime)/0x3e8),lasttime=_0x544734;}