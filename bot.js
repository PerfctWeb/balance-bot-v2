const _0x33dc51=_0x4248;(function(_0x2352ed,_0x43dd44){const _0x45ec39=_0x4248,_0x407bae=_0x2352ed();while(!![]){try{const _0x5446bc=parseInt(_0x45ec39(0x20a))/0x1*(-parseInt(_0x45ec39(0x1d7))/0x2)+-parseInt(_0x45ec39(0x20b))/0x3+-parseInt(_0x45ec39(0x1b2))/0x4+parseInt(_0x45ec39(0x1af))/0x5*(parseInt(_0x45ec39(0x21d))/0x6)+parseInt(_0x45ec39(0x1c1))/0x7+-parseInt(_0x45ec39(0x18e))/0x8+parseInt(_0x45ec39(0x28d))/0x9;if(_0x5446bc===_0x43dd44)break;else _0x407bae['push'](_0x407bae['shift']());}catch(_0xe410d5){_0x407bae['push'](_0x407bae['shift']());}}}(_0x1873,0xe50dc));const _0x232713=function(){let _0x2c8719=!![];return function(_0x52afb9,_0x211236){const _0x148b82=_0x2c8719?function(){const _0x735438=_0x4248;if(_0x211236){const _0x4d31ef=_0x211236[_0x735438(0x234)](_0x52afb9,arguments);return _0x211236=null,_0x4d31ef;}}:function(){};return _0x2c8719=![],_0x148b82;};}(),_0xbdc621=_0x232713(this,function(){const _0x5eb56d=_0x4248;return _0xbdc621[_0x5eb56d(0x26b)]()[_0x5eb56d(0x1f4)](_0x5eb56d(0x1f1))['toString']()[_0x5eb56d(0x258)](_0xbdc621)[_0x5eb56d(0x1f4)](_0x5eb56d(0x1f1));});_0xbdc621();'use strict';const ccxt=require(_0x33dc51(0x294)),low=require(_0x33dc51(0x219)),FileSync=require(_0x33dc51(0x1ca)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x33dc51(0x265)),Crypt=require(_0x33dc51(0x195))[_0x33dc51(0x244)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x33dc51(0x1e6))['version'],botID=process['argv'][0x2]||_0x33dc51(0x236),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log'](_0x33dc51(0x1bb)+botID+_0x33dc51(0x1fe)),process[_0x33dc51(0x1e7)](0x1);const configpath='./config/';!fs[_0x33dc51(0x27a)](configpath)&&fs[_0x33dc51(0x23b)](configpath);const configfile=configpath+_0x33dc51(0x1a7)+botID+_0x33dc51(0x1d9),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x33dc51(0x1a7)+botID+_0x33dc51(0x226),coinresultsfile=configpath+_0x33dc51(0x1a7)+botID+_0x33dc51(0x1b4),settingsfile=configpath+_0x33dc51(0x1dd),securefile=configpath+_0x33dc51(0x1cc),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x33dc51(0x23a)]({'logs':[]})[_0x33dc51(0x256)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);function _0x4248(_0x105eb1,_0x1bb700){const _0x1b0063=_0x1873();return _0x4248=function(_0xbdc621,_0x232713){_0xbdc621=_0xbdc621-0x18e;let _0x18735a=_0x1b0063[_0xbdc621];return _0x18735a;},_0x4248(_0x105eb1,_0x1bb700);}dbPerformance[_0x33dc51(0x23a)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x33dc51(0x23a)]({'bot':[]})[_0x33dc51(0x256)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x33dc51(0x23a)]({'coins':[]})[_0x33dc51(0x256)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x33dc51(0x274),'symbol':'BTC/EUR'},'usd':{'coin':_0x33dc51(0x22d),'symbol':_0x33dc51(0x1e5)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3608a0)=>{},'debug':(..._0x3ec94f)=>{},'notice':(..._0x89653f)=>{},'info':(..._0x5a444c)=>{},'warning':(..._0x15cbb5)=>{},'error':async function(..._0x143e0e){const _0x776a9c=_0x33dc51,_0x3b1be1=new Date()[_0x776a9c(0x203)]();if(!lastErrorShown||_0x3b1be1-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x776a9c(0x203)](),logHistory(_0x776a9c(0x200),_0x776a9c(0x1df)+consecutivePauses+_0x776a9c(0x19e));let _0x575152='';if(_0x143e0e[0x0])_0x575152+=_0x143e0e[0x0];if(_0x143e0e[0x1]&&_0x143e0e[0x1][_0x776a9c(0x200)]&&_0x143e0e[0x1][_0x776a9c(0x200)]['message'])_0x575152+='\x20-\x20'+_0x143e0e[0x1]['error']['message'];logging('WebSockets('+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x575152),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x33dc51(0x1b1),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x33dc51(0x1a4)]!=config[_0x33dc51(0x1a4)]&&updateTimeshift(settings['timeshift']);process[_0x33dc51(0x227)]({'started':_0x33dc51(0x190)}),initializeProcessListeners();function proxyEmit(_0x2bb8a0,_0x2d3ede=null){const _0x2b5ec2=_0x33dc51;process[_0x2b5ec2(0x227)]({'function':_0x2bb8a0,'args':_0x2d3ede});}function initializeProcessListeners(){process['on']('message',_0x57654c=>{const _0x2d464a=_0x4248;switch(Object[_0x2d464a(0x1ec)](_0x57654c)[0x0]){case _0x2d464a(0x1a4):_0x57654c['timeshift']!=undefined&&(settings[_0x2d464a(0x1a4)]=_0x57654c['timeshift'],updateTimeshift(settings[_0x2d464a(0x1a4)]));break;case _0x2d464a(0x215):switch(_0x57654c[_0x2d464a(0x215)]){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x57654c['args']);break;case'getPortfolio':getPortfolio(_0x57654c['args']);break;case _0x2d464a(0x25e):storeConfiguration(_0x57654c[_0x2d464a(0x18f)]);break;case _0x2d464a(0x20e):storeHeadless(_0x57654c[_0x2d464a(0x18f)]);break;case _0x2d464a(0x273):getStartingBalances();break;case'placeOrder':placeOrder(_0x57654c['args']);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2b9663=_0x33dc51;if(pidBalances)clearTimeout(pidBalances);if(config[_0x2b9663(0x263)]!=''){await initExchange(config[_0x2b9663(0x263)],config[_0x2b9663(0x23e)]);let _0x1c583b=await loadSymbols();_0x1c583b&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x406018,_0x1328e0){const _0x91013d=_0x33dc51,_0x4e5fbc=ccxt[config[_0x91013d(0x1bd)]];let _0x4d5dcb;switch(config[_0x91013d(0x1bd)]){case _0x91013d(0x265):_0x4d5dcb=_0x91013d(0x21c);break;case _0x91013d(0x22a):_0x4d5dcb=_0x91013d(0x221);break;default:_0x4d5dcb=_0x91013d(0x21c);}exchange=new _0x4e5fbc({'apiKey':_0x406018,'secret':_0x1328e0,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x406018,'api_secret':_0x1328e0,'beautify':!![],'wsUrl':_0x4d5dcb},logger),config[_0x91013d(0x1bd)]==_0x91013d(0x22a)&&(stablecoins={'eur':{'coin':_0x91013d(0x1cb),'symbol':_0x91013d(0x246)},'usd':{'coin':_0x91013d(0x22d),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x410313=_0x33dc51;let _0x41abf2;try{markets=await exchange[_0x410313(0x201)](),allSymbols=exchange[_0x410313(0x238)][_0x410313(0x262)](_0x451a0c=>{const _0x19b98d=_0x410313;return _0x451a0c[_0x19b98d(0x1ce)](_0x19b98d(0x1ee))&&!_0x451a0c[_0x19b98d(0x1ce)](_0x19b98d(0x1c3));}),_0x41abf2=!![];}catch(_0x5af5d0){await handleError(_0x5af5d0,'loadSymbols()'),_0x41abf2=![];}return _0x41abf2;}async function initbot(){const _0xcf681e=_0x33dc51;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x393e66=dbCoinResults['get'](_0xcf681e(0x231))[_0xcf681e(0x207)]();if(_0x393e66['length']==0x0)await resetCoinResults();}async function initclient(){const _0x1b96df=_0x33dc51;proxyEmit(_0x1b96df(0x283),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1b96df(0x1fb),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x488161=_0x33dc51;wsinitialized=![];ws1&&(ws1[_0x488161(0x25a)](_0x1eba73=>{const _0x107e69=_0x488161;try{wsClient[_0x107e69(0x296)](_0x1eba73);}catch(_0x2c6646){}}),ws1=[]);if(ws2){try{wsClient[_0x488161(0x296)](ws2);}catch(_0x49e18e){}ws2=null;}}async function initws(){const _0x312f3f=_0x33dc51;cleanws();let _0x2efdd0=[];currentCoins[_0x312f3f(0x25a)](_0x2e4db7=>{const _0x14fd88=_0x312f3f;if(_0x2e4db7[_0x14fd88(0x20d)]!=_0x14fd88(0x1ee))_0x2efdd0[_0x14fd88(0x266)](noslash(_0x2e4db7[_0x14fd88(0x1e3)]));});if(!_0x2efdd0['includes'](stablecoins[_0x312f3f(0x1da)][_0x312f3f(0x20d)]))_0x2efdd0[_0x312f3f(0x266)](stablecoins[_0x312f3f(0x1da)]['coin']);if(!_0x2efdd0[_0x312f3f(0x1ce)](stablecoins[_0x312f3f(0x21b)]['coin']))_0x2efdd0[_0x312f3f(0x266)](stablecoins[_0x312f3f(0x21b)][_0x312f3f(0x20d)]);if(!_0x2efdd0[_0x312f3f(0x1ce)](_0x312f3f(0x1db)))_0x2efdd0[_0x312f3f(0x266)](_0x312f3f(0x1db));try{_0x2efdd0[_0x312f3f(0x25a)]((_0x59fb55,_0xfa7441)=>{const _0x1cdbe7=_0x312f3f;ws1[_0xfa7441]=wsClient[_0x1cdbe7(0x1ef)](_0x59fb55,'1m');}),ws2=wsClient[_0x312f3f(0x1e9)](),wsClient['on'](_0x312f3f(0x213),_0x3dd532=>{const _0x46f52a=_0x312f3f;if(!Array[_0x46f52a(0x28f)](_0x3dd532)&&!_0x3dd532['wsKey'][_0x46f52a(0x1ce)](_0x46f52a(0x27d))){if(_0x3dd532[_0x46f52a(0x25f)]==='kline'){global[_0x46f52a(0x21f)][_0x3dd532[_0x46f52a(0x1c6)][_0x46f52a(0x1e3)]]=_0x3dd532[_0x46f52a(0x1c6)][_0x46f52a(0x1d8)];return;}}else{if(!Array[_0x46f52a(0x28f)](_0x3dd532)&&_0x3dd532[_0x46f52a(0x279)]['includes'](_0x46f52a(0x27d))){if(_0x3dd532[_0x46f52a(0x210)][_0x46f52a(0x1ce)](_0x46f52a(0x230))){updateNumberCoins(_0x3dd532);return;}}}}),wsClient['on'](_0x312f3f(0x1a5),async _0x3c8150=>{currentCoins=await getCoins();});}catch(_0x5336fb){await handleError(_0x5336fb,_0x312f3f(0x206));}let _0x1a0c9e;while(_0x1a0c9e!=currentCoins['length']-0x1){_0x1a0c9e=0x0,currentCoins['forEach'](_0x4d31b3=>{const _0x35049f=_0x312f3f;if(_0x4d31b3['coin']!=_0x35049f(0x1ee)&&global[_0x35049f(0x21f)][noslash(_0x4d31b3['symbol'])])_0x1a0c9e++;});let _0x583852=Math[_0x312f3f(0x214)](_0x1a0c9e/(currentCoins[_0x312f3f(0x285)]-0x1)*0x64);proxyEmit('coin-loading-progress',_0x583852),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x12ed9f=_0x33dc51;let _0x551ef5=0x0,_0x320f43=0x0;try{_0x551ef5=global[_0x12ed9f(0x21f)][stablecoins[_0x12ed9f(0x1da)][_0x12ed9f(0x20d)]],_0x320f43=global['ticker'][stablecoins[_0x12ed9f(0x21b)][_0x12ed9f(0x20d)]];}catch(_0x17d931){await handleError(_0x17d931,_0x12ed9f(0x1b6));}return{'eur':Number(_0x551ef5),'usd':Number(_0x320f43)};}function _0x1873(){const _0x2b3a3a=['buy','fetchOHLCV','getHours','sell','differenceInSeconds','toLowerCase','fee','96Qrlmow','close','-config.json','eur','BNBBTC','bot','bb-settings.json','fetchOrders','WebSockets(','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','order','log','symbol','yyyy-MM-dd\x27T\x27HH:mm:ss','BTC/USDT','./version.json','exit','\x20order:\x20','subscribeSpotUserDataStream','side','Order\x20amount\x20is\x20invalid:\x20','keys','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','BTC','subscribeSpotKline','limit','(((.+)+)+)+$',':\x20Bot\x20','fetchTickers','search','performance','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20orders\x20in\x20less\x20than\x20','startnumber','orderId','logs','balances','reverse','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order',',\x20must\x20be\x20a\x203\x20digit\x20number','breakeven','error','loadMarkets','settings','getTime','startdate','ExchangeNotAvailable','initws()','value','restart','LIMIT','11488GBFtbf','4482948AnhlGb','\x20|\x20Error\x20details:\x20','coin','storeHeadless','trade','wsMarket','filled','recreate','formattedMessage','round','function','getMonth','getSeconds','add','lowdb','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','usd','wss://stream.binance.com:9443','6RhLmya','abs','ticker','excluded','wss://stream.binance.us:9443','milliseconds','\x20>\x20','get','DDoSProtection','-performance.json','send','sells','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','binanceus','success','fetchBalance','BTCUSDT','getPortfolio()','outboundAccountPosition','spot','coins','Binance\x20API\x20secret\x20is\x20invalid','Market','apply','assign','001','target','symbols','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','defaults','mkdirSync','cancelOrder','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','apiSecret','min','slice','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','currency','getCloses()','Crypt','map','BTC/BUSD','Order\x20filled:\x20','last','yyyy/MM/dd\x20HH:mm:ss','Binance\x20API\x20key\x20is\x20invalid','limits','differenceInCalendarDays','Order(s)\x20validated\x20-\x20balancing\x20resumed','limit-low','\x20minutes\x20-\x20balancing\x20resumed','parseISO','Order(s)\x20filled\x20-\x20balancing\x20resumed','startprice','API-key\x20format\x20invalid','yyyy/MM/dd','valid','write','sortBy','constructor','MIN_NOTIONAL','forEach','market','amount','kill','storeConfiguration','eventType','type','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','filter','apiKey','asset','binance','push','number','coinamount','find','getCoins()','toString','padStart','getMinutes','Performance\x20recreation\x20completed\x20successfully','orderStatus','bid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','distribution','getStartingBalances','BTCEUR','Unfilled\x20order(s)\x20canceled\x20after\x20','Executed\x20','timestamp','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','wsKey','existsSync','BTC/','headless','userData','eachDayOfInterval','Limit\x20(high-margin)','event','/BTC','botID','configuration','remove','length','sort','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','date','RequestTimeout','indexOf','event-history','25223112PZVsIJ','orderType','isArray','limit-high','cost','accumulatedQuantity','page','ccxt','parse','closeWs','entries','256992FJBDrI','args','running','recreateHistory()','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','has','realized','hybrid-crypto-js','AuthenticationError','Limit\x20(low-margin)','getDate','timeout','decrypt','placeOrder()','ordertype','FILLED',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','botname','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(1)\x20-\x20please\x20sync\x20clock','Order:\x20','************','buys','timeshift','reconnected','availableBalance','bot-','enabled','createOrder','InvalidNonce','price','replace','reduce','secure','4203565wJPiyu','fees','sha256','4045948IIGlpa','OrderNotFound','-results.json','BNB','getFiat()','portfolio','data','threshold','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','Error:\x20Invalid\x20argument\x20','starting-balances','exchange','cooldown','configuration-stored','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','2689918RhSWph','format','DAI/','stringify','time','kline','datetime','getFullYear','delta','lowdb/adapters/FileSync','BTCBUSD','bb-secure.json','Delta\x20:\x20','includes','shift'];_0x1873=function(){return _0x2b3a3a;};return _0x1873();}async function setStartDatePerformance(_0x4e0896){const _0x3fcc54=_0x33dc51,_0xc23b32=fns['format'](new Date(_0x4e0896[_0x3fcc54(0x204)]),_0x3fcc54(0x254));let _0x3f47fb=[];_0x3f47fb[stablecoins[_0x3fcc54(0x1da)]['coin']]=await getCloses(stablecoins['eur'][_0x3fcc54(0x1e3)],new Date(_0x4e0896[_0x3fcc54(0x204)]),0x1),_0x3f47fb[stablecoins[_0x3fcc54(0x21b)][_0x3fcc54(0x20d)]]=await getCloses(stablecoins[_0x3fcc54(0x21b)][_0x3fcc54(0x1e3)],new Date(_0x4e0896['startdate']),0x1);let _0x448e17,_0x650cc1=[];_0x4e0896[_0x3fcc54(0x1b7)]['forEach'](_0x259fb1=>{const _0x2887e6=_0x3fcc54;!_0x259fb1['excluded']&&_0x650cc1[_0x2887e6(0x266)]({'coin':_0x259fb1[_0x2887e6(0x20d)],'number':_0x259fb1[_0x2887e6(0x1f8)],'price':_0x259fb1[_0x2887e6(0x252)]});}),_0x448e17={'date':_0xc23b32,'eur':_0x3f47fb[stablecoins[_0x3fcc54(0x1da)]['coin']][0x0],'usd':_0x3f47fb[stablecoins['usd']['coin']][0x0],'coins':_0x650cc1};let _0x58e006=dbPerformance[_0x3fcc54(0x224)](_0x3fcc54(0x1b8))[_0x3fcc54(0x269)]({'date':_0xc23b32})[_0x3fcc54(0x207)]();_0x58e006?dbPerformance[_0x3fcc54(0x224)](_0x3fcc54(0x1b8))['find']({'date':_0xc23b32})[_0x3fcc54(0x235)](_0x448e17)[_0x3fcc54(0x256)]():dbPerformance[_0x3fcc54(0x224)](_0x3fcc54(0x1b8))['push'](_0x448e17)[_0x3fcc54(0x256)](),_0x58e006=dbPerformance['get']('data')['sortBy'](_0x3fcc54(0x289))[_0x3fcc54(0x207)](),_0x58e006[_0x3fcc54(0x25a)](_0x40979c=>{const _0x15de07=_0x3fcc54;_0x40979c[_0x15de07(0x289)]<_0xc23b32&&dbPerformance['get'](_0x15de07(0x1b8))[_0x15de07(0x284)]({'date':_0x40979c[_0x15de07(0x289)]})[_0x15de07(0x256)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x59ba6b){const _0x4b13db=_0x33dc51;let _0x51101f,_0x303e38=[];logHistory(_0x4b13db(0x22b),_0x4b13db(0x287)),_0x59ba6b['portfolio'][_0x4b13db(0x25a)](_0xed2a0=>{const _0x45aec2=_0x4b13db;if(_0xed2a0['coin']!=_0x45aec2(0x1ee)&&!_0xed2a0[_0x45aec2(0x220)])_0x303e38['push']({'coin':_0xed2a0[_0x45aec2(0x20d)],'symbol':_0xed2a0[_0x45aec2(0x1e3)]});});let _0x3729a1=[];try{const _0x8b2ba6=fns[_0x4b13db(0x1c2)](fns['parseISO'](_0x59ba6b[_0x4b13db(0x204)]['replace'](/\//g,'-')),_0x4b13db(0x1e4));for(const _0x4d3168 of _0x303e38){if(_0x4d3168['coin']!=_0x4b13db(0x1ee))_0x51101f=await exchange[_0x4b13db(0x1de)](_0x4d3168[_0x4b13db(0x1e3)],Date['parse'](_0x8b2ba6));_0x51101f[_0x4b13db(0x25a)](_0x6a2928=>{const _0x2cd592=_0x4b13db,_0x82b615=_0x4d3168['symbol'][_0x2cd592(0x1ce)](_0x2cd592(0x27b)),_0x2db096=fns[_0x2cd592(0x1c2)](fns[_0x2cd592(0x250)](_0x6a2928[_0x2cd592(0x1c7)]),_0x2cd592(0x249)),_0x378587=fns[_0x2cd592(0x1c2)](fns[_0x2cd592(0x250)](_0x6a2928['datetime']),_0x2cd592(0x254));let _0x296e5f;if(_0x6a2928[_0x2cd592(0x1ea)]==_0x2cd592(0x1d0)&&_0x82b615==![])_0x296e5f=_0x6a2928[_0x2cd592(0x25c)];if(_0x6a2928[_0x2cd592(0x1ea)]==_0x2cd592(0x1d0)&&_0x82b615==!![])_0x296e5f=-_0x6a2928['amount']*_0x6a2928['price'];if(_0x6a2928[_0x2cd592(0x1ea)]==_0x2cd592(0x1d3)&&_0x82b615==![])_0x296e5f=-_0x6a2928[_0x2cd592(0x25c)];if(_0x6a2928[_0x2cd592(0x1ea)]==_0x2cd592(0x1d3)&&_0x82b615==!![])_0x296e5f=_0x6a2928['amount']*_0x6a2928[_0x2cd592(0x1ab)];_0x3729a1[_0x2cd592(0x266)]({'timestamp':_0x2db096,'date':_0x378587,'coin':_0x4d3168[_0x2cd592(0x20d)],'symbol':_0x4d3168['symbol'],'type':_0x6a2928[_0x2cd592(0x260)],'side':_0x6a2928['side'],'reverse':_0x82b615,'amount':formatResult(_0x6a2928[_0x2cd592(0x211)],0x8),'filled':formatResult(_0x6a2928[_0x2cd592(0x211)],0x8),'coinamount':formatResult(_0x296e5f,0x8),'price':formatResult(_0x6a2928[_0x2cd592(0x1ab)],0x8)});let _0x3e2908;if(_0x6a2928['side']==_0x2cd592(0x1d0)&&_0x82b615==![])_0x3e2908=-_0x6a2928[_0x2cd592(0x25c)]*_0x6a2928[_0x2cd592(0x1ab)];if(_0x6a2928['side']=='buy'&&_0x82b615==!![])_0x3e2908=_0x6a2928[_0x2cd592(0x25c)];if(_0x6a2928[_0x2cd592(0x1ea)]==_0x2cd592(0x1d3)&&_0x82b615==![])_0x3e2908=_0x6a2928['amount']*_0x6a2928[_0x2cd592(0x1ab)];if(_0x6a2928[_0x2cd592(0x1ea)]=='sell'&&_0x82b615==!![])_0x3e2908=-_0x6a2928['amount'];_0x3729a1[_0x2cd592(0x266)]({'date':_0x378587,'coin':_0x2cd592(0x1ee),'coinamount':formatResult(_0x3e2908,0x8)});});}_0x3729a1['sort']((_0x2da338,_0xc95cfd)=>_0x2da338['timestamp']>_0xc95cfd[_0x4b13db(0x277)]?0x1:_0xc95cfd[_0x4b13db(0x277)]>_0x2da338[_0x4b13db(0x277)]?-0x1:0x0),dbLogs[_0x4b13db(0x224)](_0x4b13db(0x1fa))['remove']()['write'](),_0x3729a1[_0x4b13db(0x25a)](_0x3a95dd=>{const _0x550e32=_0x4b13db;let _0x2fe9a3;_0x3a95dd[_0x550e32(0x20d)]!=_0x550e32(0x1ee)&&(_0x2fe9a3={'time':_0x3a95dd[_0x550e32(0x277)],'type':_0x550e32(0x1e1),'event':_0x550e32(0x1a1)+_0x3a95dd[_0x550e32(0x1e3)]+'\x20'+_0x3a95dd['side']+'\x20#'+_0x3a95dd[_0x550e32(0x25c)]+'\x20@'+_0x3a95dd[_0x550e32(0x1ab)]},dbLogs[_0x550e32(0x224)](_0x550e32(0x1fa))[_0x550e32(0x266)](_0x2fe9a3)[_0x550e32(0x256)]());});const _0x17559e=fns[_0x4b13db(0x27e)]({'start':new Date(_0x59ba6b[_0x4b13db(0x204)]),'end':new Date()})[_0x4b13db(0x245)](_0x3a11e8=>fns[_0x4b13db(0x1c2)](_0x3a11e8,_0x4b13db(0x254)));let _0x1025e8=[];_0x59ba6b[_0x4b13db(0x1b7)][_0x4b13db(0x25a)](_0x21e9c0=>{const _0x21f607=_0x4b13db;if(!_0x21e9c0[_0x21f607(0x220)]){_0x1025e8[_0x21e9c0[_0x21f607(0x20d)]]=[];let _0x8edcd4=_0x21e9c0[_0x21f607(0x1f8)];_0x17559e[_0x21f607(0x25a)]((_0x73bc9d,_0x22801f)=>{const _0x3ac38d=_0x21f607;let _0x22e8a2=_0x3729a1[_0x3ac38d(0x262)](_0x320869=>_0x320869[_0x3ac38d(0x20d)]==_0x21e9c0['coin']&&_0x320869['date']==_0x73bc9d);if(_0x22e8a2[_0x3ac38d(0x285)]!=0x0){let _0x544a50=_0x22e8a2[_0x3ac38d(0x1ad)]((_0x2956b8,_0x268f5f)=>{const _0x3e4c0f=_0x3ac38d;return _0x2956b8+=_0x268f5f[_0x3e4c0f(0x268)],_0x2956b8;},0x0);_0x8edcd4+=_0x544a50;}_0x1025e8[_0x21e9c0[_0x3ac38d(0x20d)]][_0x73bc9d]=_0x8edcd4;});}});const _0x47494c=[..._0x303e38];_0x47494c[_0x4b13db(0x266)]({'coin':stablecoins['eur']['coin'],'symbol':stablecoins[_0x4b13db(0x1da)][_0x4b13db(0x1e3)]}),_0x47494c[_0x4b13db(0x266)]({'coin':stablecoins['usd']['coin'],'symbol':stablecoins[_0x4b13db(0x21b)][_0x4b13db(0x1e3)]});let _0x2fefce=[];for(const _0x21ac5b of _0x47494c){_0x2fefce[_0x21ac5b[_0x4b13db(0x20d)]]=await getCloses(_0x21ac5b['symbol'],new Date(_0x59ba6b[_0x4b13db(0x204)]));}dbPerformance['get'](_0x4b13db(0x1b8))[_0x4b13db(0x284)]()[_0x4b13db(0x256)](),_0x17559e[_0x4b13db(0x25a)]((_0x32afdf,_0x3f308c)=>{const _0xa9a86d=_0x4b13db;let _0x567419,_0x1cac8e=[];_0x3f308c==0x0?(_0x59ba6b['portfolio'][_0xa9a86d(0x25a)](_0x1891f6=>{const _0x2386cc=_0xa9a86d;!_0x1891f6[_0x2386cc(0x220)]&&_0x1cac8e['push']({'coin':_0x1891f6[_0x2386cc(0x20d)],'number':_0x1891f6[_0x2386cc(0x1f8)],'price':_0x1891f6[_0x2386cc(0x252)]});}),_0x567419={'date':_0x32afdf,'eur':_0x2fefce[stablecoins[_0xa9a86d(0x1da)][_0xa9a86d(0x20d)]][_0x3f308c],'usd':_0x2fefce[stablecoins[_0xa9a86d(0x21b)][_0xa9a86d(0x20d)]][_0x3f308c],'coins':_0x1cac8e}):(_0x59ba6b[_0xa9a86d(0x1b7)][_0xa9a86d(0x25a)](_0xa42522=>{const _0x3af2c5=_0xa9a86d;!_0xa42522['excluded']&&_0x1cac8e[_0x3af2c5(0x266)]({'coin':_0xa42522[_0x3af2c5(0x20d)],'number':_0x1025e8[_0xa42522[_0x3af2c5(0x20d)]][_0x32afdf],'price':_0xa42522[_0x3af2c5(0x20d)]==_0x3af2c5(0x1ee)?0x1:_0x2fefce[_0xa42522[_0x3af2c5(0x20d)]][_0x3f308c]});}),_0x567419={'date':_0x32afdf,'eur':_0x2fefce[stablecoins[_0xa9a86d(0x1da)][_0xa9a86d(0x20d)]][_0x3f308c],'usd':_0x2fefce[stablecoins[_0xa9a86d(0x21b)]['coin']][_0x3f308c],'coins':_0x1cac8e}),dbPerformance['get'](_0xa9a86d(0x1b8))[_0xa9a86d(0x266)](_0x567419)[_0xa9a86d(0x256)]();}),emitPerformance(),await resetCoinResults();for(let _0xa85af4 of _0x3729a1){_0xa85af4[_0x4b13db(0x20d)]!=_0x4b13db(0x1ee)&&await updateCoinResults(_0xa85af4);}logHistory(_0x4b13db(0x22b),_0x4b13db(0x26e));}catch(_0x4af3f3){await handleError(_0x4af3f3,_0x4b13db(0x191));}}async function getCloses(_0x3ba226,_0x454579,_0x1142c4=undefined){const _0x41bd42=_0x33dc51,_0x239ccc='1d';let _0x3c6f96,_0x4f0e9f;const _0x4675f0=fns[_0x41bd42(0x24c)](new Date(),_0x454579)+0x1;try{const _0x19f584=exchange[_0x41bd42(0x222)]()-_0x4675f0*0x18*0xe10*0x3e8;_0x3c6f96=await exchange[_0x41bd42(0x1d1)](_0x3ba226,_0x239ccc,_0x19f584,_0x1142c4),_0x4f0e9f=await exchange[_0x41bd42(0x1f3)](_0x3ba226);}catch(_0x22c893){await handleError(_0x22c893,_0x41bd42(0x243));}let _0x55215b=ohlcvToCloses(_0x3c6f96);return _0x55215b[_0x41bd42(0x266)](_0x4f0e9f[_0x3ba226][_0x41bd42(0x248)]),_0x55215b;}function ohlcvToCloses(_0x48fc03){let _0x1ae1b8=[];return _0x48fc03['forEach'](function(_0xb03e8d){const _0x228060=_0x4248;_0x1ae1b8[_0x228060(0x266)](_0xb03e8d[0x4]);}),_0x1ae1b8;}function getConfiguration(_0xc0e1b1){const _0x57373d=_0x33dc51;let _0x2cfb8b=dbConfig[_0x57373d(0x224)]('bot')['find']({'botID':_0xc0e1b1})[_0x57373d(0x207)]();if(_0x2cfb8b){let _0x49039b=![];!_0x2cfb8b[_0x57373d(0x1bd)]&&(_0x2cfb8b={..._0x2cfb8b,'exchange':_0x57373d(0x265)},_0x49039b=!![]),!_0x2cfb8b[_0x57373d(0x19c)]&&(_0x2cfb8b={..._0x2cfb8b,'ordertype':_0x57373d(0x25b)},_0x49039b=!![]),!_0x2cfb8b['timeout']&&(_0x2cfb8b={..._0x2cfb8b,'timeout':0x14},_0x49039b=!![]),_0x49039b&&(_0x2cfb8b={'botID':_0x2cfb8b[_0x57373d(0x282)],'exchange':_0x2cfb8b[_0x57373d(0x1bd)],'apiKey':_0x2cfb8b[_0x57373d(0x263)],'apiSecret':_0x2cfb8b[_0x57373d(0x23e)],'botname':_0x2cfb8b[_0x57373d(0x19f)],'threshold':_0x2cfb8b['threshold'],'ordertype':_0x2cfb8b[_0x57373d(0x19c)],'timeout':_0x2cfb8b[_0x57373d(0x199)],'startdate':_0x2cfb8b[_0x57373d(0x204)],'recreate':_0x2cfb8b[_0x57373d(0x212)],'timeshift':_0x2cfb8b['timeshift'],'headless':_0x2cfb8b[_0x57373d(0x27c)],'cooldown':_0x2cfb8b[_0x57373d(0x1be)],'portfolio':_0x2cfb8b['portfolio']},dbConfig[_0x57373d(0x224)](_0x57373d(0x1dc))['remove']()[_0x57373d(0x256)](),dbConfig['get'](_0x57373d(0x1dc))['push'](_0x2cfb8b)[_0x57373d(0x256)]());}else _0x2cfb8b={'botID':_0xc0e1b1,'exchange':_0x57373d(0x265),'apiKey':'','apiSecret':'','botname':'Bot\x20'+_0xc0e1b1,'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x57373d(0x1a4)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x2cfb8b;}function emittedConfiguration(){const _0x5713a9=_0x33dc51;let _0x49a433;return config[_0x5713a9(0x263)]==''?_0x49a433=config:_0x49a433={...config,'apiKey':_0x5713a9(0x1a2),'apiSecret':_0x5713a9(0x1a2)},_0x49a433;}function getSettings(){const _0x392acf=_0x33dc51;return dbSettings[_0x392acf(0x224)](_0x392acf(0x202))['value']();}function getSecure(){const _0x2cfbb9=_0x33dc51;return dbSecure['get'](_0x2cfbb9(0x1ae))['value']()||{};}function updateTimeshift(_0x4618e3){const _0xfd32bf=_0x33dc51;let _0xff46c0=dbConfig[_0xfd32bf(0x224)](_0xfd32bf(0x1dc))[_0xfd32bf(0x269)]({'botID':botID})[_0xfd32bf(0x207)]();_0xff46c0&&dbConfig[_0xfd32bf(0x224)](_0xfd32bf(0x1dc))[_0xfd32bf(0x269)]({'botID':botID})[_0xfd32bf(0x235)]({'timeshift':_0x4618e3})[_0xfd32bf(0x256)](),config[_0xfd32bf(0x1a4)]=_0x4618e3,proxyEmit(_0xfd32bf(0x283),emittedConfiguration());}async function storeConfiguration(_0x4ed79f){const _0xd76348=_0x33dc51;let _0x234b35=dbConfig[_0xd76348(0x224)](_0xd76348(0x1dc))[_0xd76348(0x269)]({'botID':botID})[_0xd76348(0x207)]();_0x4ed79f={..._0x4ed79f,'apiKey':crypt[_0xd76348(0x19a)](secure['privateKey'],_0x4ed79f[_0xd76348(0x263)])['message'],'apiSecret':crypt[_0xd76348(0x19a)](secure['privateKey'],_0x4ed79f[_0xd76348(0x23e)])['message']};if(_0x234b35){if(_0x4ed79f[_0xd76348(0x263)]=='************')_0x4ed79f[_0xd76348(0x263)]=config['apiKey'];if(_0x4ed79f['apiSecret']==_0xd76348(0x1a2))_0x4ed79f[_0xd76348(0x23e)]=config['apiSecret'];dbConfig['get'](_0xd76348(0x1dc))[_0xd76348(0x269)]({'botID':botID})[_0xd76348(0x235)](_0x4ed79f)[_0xd76348(0x256)]();}else dbConfig['get']('bot')[_0xd76348(0x266)](_0x4ed79f)[_0xd76348(0x256)](),process[_0xd76348(0x227)]({'status':_0xd76348(0x1a8),'live':_0xd76348(0x190)});config={..._0x4ed79f};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x4ed79f[_0xd76348(0x19f)]}),proxyEmit(_0xd76348(0x1bf)),reset();}async function storeHeadless(_0x474ab8){const _0x3bd969=_0x33dc51,_0xae8582={...config,'headless':_0x474ab8[_0x3bd969(0x27c)]};let _0x5d9e12=dbConfig[_0x3bd969(0x224)](_0x3bd969(0x1dc))[_0x3bd969(0x269)]({'botID':botID})['value']();_0x5d9e12&&dbConfig[_0x3bd969(0x224)](_0x3bd969(0x1dc))[_0x3bd969(0x269)]({'botID':botID})[_0x3bd969(0x235)](_0xae8582)[_0x3bd969(0x256)](),config={..._0xae8582},proxyEmit(_0x3bd969(0x283),emittedConfiguration());}function noslash(_0x121e1b){const _0x42eb04=_0x33dc51;return _0x121e1b[_0x42eb04(0x1ac)]('/','');}function updateNumberCoins(_0x3e8011){const _0x359866=_0x33dc51;_0x3e8011['eventType']&&_0x3e8011[_0x359866(0x25f)]==_0x359866(0x22f)&&_0x3e8011[_0x359866(0x1fb)][_0x359866(0x25a)](_0x5d797f=>{const _0x542a59=_0x359866;let _0x30c888=currentCoins[_0x542a59(0x269)](_0x514ac7=>_0x514ac7[_0x542a59(0x20d)]==_0x5d797f[_0x542a59(0x264)]);if(_0x30c888)_0x30c888[_0x542a59(0x267)]=Number(_0x5d797f[_0x542a59(0x1a6)]);}),_0x3e8011['eventType']&&_0x3e8011['eventType']=='executionReport'&&(_0x3e8011[_0x359866(0x28e)]==_0x359866(0x209)&&_0x3e8011[_0x359866(0x26f)]==_0x359866(0x19d)&&lastOrders[_0x359866(0x25a)](_0x2454c4=>{const _0x2a6d03=_0x359866;if(_0x2454c4[_0x2a6d03(0x1f9)]==_0x3e8011['orderId']){if(_0x2454c4[_0x2a6d03(0x1fc)])_0x2454c4[_0x2a6d03(0x211)]=_0x3e8011[_0x2a6d03(0x292)]*_0x2454c4['price'];else _0x2454c4[_0x2a6d03(0x211)]=_0x3e8011[_0x2a6d03(0x292)];}}));}async function getCoins(_0x555e83=!![]){const _0x37b2f7=_0x33dc51;let _0x2762b1,_0x5d5228=[],_0x34e2ca=[],_0x124e93=[];try{_0x2762b1=await exchange[_0x37b2f7(0x22c)](),mybalances=_0x2762b1['total'];if(!_0x555e83)for(const [_0x533811,_0x2804f7]of Object[_0x37b2f7(0x297)](mybalances)){_0x124e93[_0x37b2f7(0x266)](_0x533811);}else config['portfolio'][_0x37b2f7(0x25a)](_0x2060d5=>{const _0x2ae897=_0x37b2f7;if(!_0x2060d5['excluded'])_0x124e93['push'](_0x2060d5[_0x2ae897(0x20d)]);});for(const [_0x2ae772,_0x341d09]of Object[_0x37b2f7(0x297)](mybalances)){if(_0x124e93['includes'](_0x2ae772)){if((_0x341d09[_0x37b2f7(0x26b)]()!=0x0||config['portfolio'][_0x37b2f7(0x269)](_0x4729b2=>_0x4729b2['coin']==_0x2ae772))&&(allSymbols[_0x37b2f7(0x1ce)](_0x2ae772+_0x37b2f7(0x281))||_0x2ae772==_0x37b2f7(0x1ee)))_0x34e2ca[_0x37b2f7(0x266)]({'coin':_0x2ae772,'symbol':_0x2ae772+_0x37b2f7(0x281),'reverse':![],'number':_0x341d09}),_0x2ae772!=_0x37b2f7(0x1ee)&&_0x5d5228[_0x37b2f7(0x266)](_0x2ae772+_0x37b2f7(0x281));else(_0x341d09['toString']()!=0x0||config[_0x37b2f7(0x1b7)][_0x37b2f7(0x269)](_0x26a34a=>_0x26a34a['coin']==_0x2ae772))&&allSymbols[_0x37b2f7(0x1ce)](_0x37b2f7(0x27b)+_0x2ae772)&&(_0x34e2ca[_0x37b2f7(0x266)]({'coin':_0x2ae772,'symbol':_0x37b2f7(0x27b)+_0x2ae772,'reverse':!![],'number':_0x341d09}),_0x2ae772!=_0x37b2f7(0x1ee)&&_0x5d5228[_0x37b2f7(0x266)](_0x37b2f7(0x27b)+_0x2ae772));}}}catch(_0x4ebc62){if(!_0x555e83){if(_0x4ebc62[_0x37b2f7(0x26b)]()[_0x37b2f7(0x1ce)](_0x37b2f7(0x253)))return logHistory(_0x37b2f7(0x200),_0x37b2f7(0x24a)),![];else{if(_0x4ebc62[_0x37b2f7(0x26b)]()['includes']('AuthenticationError'))return logHistory(_0x37b2f7(0x200),_0x37b2f7(0x278)),![];else{if(_0x4ebc62[_0x37b2f7(0x26b)]()[_0x37b2f7(0x1ce)](_0x37b2f7(0x1f6)))return logHistory(_0x37b2f7(0x200),_0x37b2f7(0x232)),![];else await handleError(_0x4ebc62,_0x37b2f7(0x26a));}}}else await handleError(_0x4ebc62,'getCoins()');}return _0x34e2ca;}async function getPortfolio(_0x1d8ea8){const _0x551cb9=_0x33dc51;let _0x5537b8=[],_0x496df1=[],_0x378674,_0x419fa6=[],_0x28f734,_0x34bbc5;_0x1d8ea8[_0x551cb9(0x263)]===_0x551cb9(0x1a2)||_0x1d8ea8[_0x551cb9(0x23e)]==='************'?(_0x28f734=config[_0x551cb9(0x263)],_0x34bbc5=config[_0x551cb9(0x23e)]):(_0x28f734=_0x1d8ea8[_0x551cb9(0x263)],_0x34bbc5=_0x1d8ea8['apiSecret']);await initExchange(_0x28f734,_0x34bbc5);let _0x9d811=await loadSymbols();if(_0x9d811){_0x419fa6=await getCoins(![]);if(_0x419fa6===![])proxyEmit('portfolio',![]);else{_0x419fa6[_0x551cb9(0x25a)](_0x4ab70b=>{const _0x19e6f8=_0x551cb9;_0x5537b8[_0x19e6f8(0x266)](_0x4ab70b['symbol']);});try{_0x496df1=await exchange['fetchTickers'](_0x5537b8);}catch(_0xdaf8ea){await handleError(_0xdaf8ea,_0x551cb9(0x22e));}_0x419fa6[_0x551cb9(0x25a)](_0x41f337=>{const _0xcda667=_0x551cb9;_0x41f337['coin']!='BTC'?_0x378674=_0x41f337[_0xcda667(0x1fc)]?0x1/_0x496df1[_0x41f337[_0xcda667(0x1e3)]][_0xcda667(0x248)]:_0x496df1[_0x41f337[_0xcda667(0x1e3)]]['last']:_0x378674=0x1,_0x41f337[_0xcda667(0x1ab)]=formatResult(_0x378674,0x8);}),proxyEmit(_0x551cb9(0x1b7),_0x419fa6);}}else proxyEmit(_0x551cb9(0x1b7),![]);}function checkMinimums(_0x4d48b4){const _0x48e6c9=_0x33dc51;let _0x5a4e60=!![];const _0x2985ef=!_0x4d48b4[_0x48e6c9(0x1fc)]?markets[_0x4d48b4['symbol']][_0x48e6c9(0x24b)][_0x48e6c9(0x25c)][_0x48e6c9(0x23f)]:markets[_0x4d48b4[_0x48e6c9(0x1e3)]][_0x48e6c9(0x24b)][_0x48e6c9(0x291)][_0x48e6c9(0x23f)],_0x447e20=!_0x4d48b4['reverse']?markets[_0x4d48b4[_0x48e6c9(0x1e3)]][_0x48e6c9(0x24b)][_0x48e6c9(0x291)]['min']:markets[_0x4d48b4['symbol']][_0x48e6c9(0x24b)][_0x48e6c9(0x25c)][_0x48e6c9(0x23f)];if(Math[_0x48e6c9(0x21e)](_0x4d48b4[_0x48e6c9(0x20f)])<_0x2985ef)_0x5a4e60=![];if(Math['abs'](_0x4d48b4['trade'])*_0x4d48b4[_0x48e6c9(0x248)]<_0x447e20)_0x5a4e60=![];return _0x5a4e60;}async function getBalances(){const _0x2015ec=_0x33dc51;let _0x4315e3=0x0,_0x57b4c6;const _0x4e1242=config[_0x2015ec(0x1b9)];currentCoins[_0x2015ec(0x25a)](_0x5e5be7=>{const _0x141c79=_0x2015ec;if(_0x5e5be7[_0x141c79(0x20d)]!=_0x141c79(0x1ee)){let _0x48cad1=global[_0x141c79(0x21f)][noslash(_0x5e5be7['symbol'])];_0x57b4c6=_0x5e5be7[_0x141c79(0x1fc)]?0x1/_0x48cad1:_0x48cad1;}else _0x57b4c6=0x1;let _0x46e522=_0x5e5be7[_0x141c79(0x267)]*_0x57b4c6;_0x4315e3+=_0x46e522,_0x5e5be7[_0x141c79(0x248)]=formatResult(Number(_0x57b4c6),0x8),_0x5e5be7[_0x141c79(0x207)]=_0x46e522;}),currentCoins['forEach'](_0x5f5245=>{const _0x5b73fe=_0x2015ec;let _0x50b196=config[_0x5b73fe(0x1b7)]['find'](_0x20c94a=>_0x20c94a[_0x5b73fe(0x20d)]==_0x5f5245['coin']),_0x5c279d=Number(_0x50b196[_0x5b73fe(0x272)]),_0x2bc92e=_0x5f5245[_0x5b73fe(0x207)]/_0x4315e3*0x64,_0x7b3887=_0x5c279d*_0x4315e3/0x64/_0x5f5245[_0x5b73fe(0x248)]-_0x5f5245['number'];_0x5f5245[_0x5b73fe(0x272)]=formatResult(_0x2bc92e,0x3),_0x5f5245['target']=formatResult(_0x5c279d,0x3),_0x5f5245[_0x5b73fe(0x20f)]=formatResult(_0x7b3887,0x8),_0x5f5245[_0x5b73fe(0x1ea)]='',_0x5f5245['valid']='';if(_0x5f5245['coin']!=_0x5b73fe(0x1ee)){if(_0x5f5245['distribution']>_0x5c279d)_0x5f5245[_0x5b73fe(0x1ea)]=_0x5b73fe(0x1d3),_0x5f5245[_0x5b73fe(0x255)]=checkMinimums(_0x5f5245);else _0x5f5245[_0x5b73fe(0x272)]<_0x5c279d&&(_0x5f5245['side']=_0x5b73fe(0x1d0),_0x5f5245[_0x5b73fe(0x255)]=checkMinimums(_0x5f5245));}_0x5f5245['delta']=_0x5f5245[_0x5b73fe(0x272)]/_0x5f5245[_0x5b73fe(0x237)]-0x1;}),currentCoins[_0x2015ec(0x286)]((_0x4b65fe,_0xc56ab0)=>_0x4b65fe[_0x2015ec(0x1c9)]<_0xc56ab0[_0x2015ec(0x1c9)]?0x1:_0xc56ab0[_0x2015ec(0x1c9)]<_0x4b65fe[_0x2015ec(0x1c9)]?-0x1:0x0);const _0x4b2d93=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4b2d93[_0x2015ec(0x1da)],'usd':_0x4b2d93[_0x2015ec(0x21b)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4e1242},proxyEmit(_0x2015ec(0x1fb),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2015ec(0x27c)])headlessMode({'portfolio':currentCoins,'threshold':_0x4e1242});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x50736a=_0x33dc51;if(!lastBalances)return;let _0x634e8=await getStartingBalances(![]),_0x5cc00b=[],_0x5933ce=[],_0x5b6741;JSON[_0x50736a(0x295)](lastBalances[_0x50736a(0x1b7)])[_0x50736a(0x25a)](_0x568c=>{const _0x3b7f8a=_0x50736a;let _0x45bed9={'coin':_0x568c[_0x3b7f8a(0x20d)],'number':_0x568c[_0x3b7f8a(0x267)],'price':_0x568c[_0x3b7f8a(0x248)]};_0x5cc00b[_0x3b7f8a(0x266)](_0x45bed9);if(!_0x634e8[_0x3b7f8a(0x231)]||!_0x634e8[_0x3b7f8a(0x231)][_0x3b7f8a(0x269)](_0x2d7781=>_0x2d7781[_0x3b7f8a(0x20d)]==_0x568c[_0x3b7f8a(0x20d)]&&_0x2d7781['number']!=0x0))_0x5933ce[_0x3b7f8a(0x266)](_0x45bed9);});const _0x5651af=await getFiat();_0x5b6741={'date':lastBalances[_0x50736a(0x1c5)]['split']('\x20')[0x0],'eur':_0x5651af[_0x50736a(0x1da)],'usd':_0x5651af[_0x50736a(0x21b)],'coins':_0x5cc00b};let _0xb5956=dbPerformance[_0x50736a(0x224)](_0x50736a(0x1b8))[_0x50736a(0x269)]({'date':_0x5b6741[_0x50736a(0x289)]})[_0x50736a(0x207)]();_0xb5956?dbPerformance[_0x50736a(0x224)](_0x50736a(0x1b8))[_0x50736a(0x269)]({'date':_0x5b6741[_0x50736a(0x289)]})[_0x50736a(0x235)](_0x5b6741)[_0x50736a(0x256)]():dbPerformance['get'](_0x50736a(0x1b8))['push'](_0x5b6741)[_0x50736a(0x256)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x1bdca2=_0x33dc51;if(dbPerformance['has']('data')[_0x1bdca2(0x207)]()){let _0x2ece9b=dbPerformance[_0x1bdca2(0x224)](_0x1bdca2(0x1b8))[_0x1bdca2(0x257)]('date')[_0x1bdca2(0x207)]();proxyEmit(_0x1bdca2(0x1f5),_0x2ece9b),lastPerformanceEmitted=getDate();}else proxyEmit(_0x1bdca2(0x1f5),[]);}async function getStartingBalances(_0x372c83=!![]){const _0x2380ea=_0x33dc51;let _0x2545f6=dbPerformance[_0x2380ea(0x224)](_0x2380ea(0x1b8))[_0x2380ea(0x269)]({'date':config[_0x2380ea(0x204)]})[_0x2380ea(0x207)]();config[_0x2380ea(0x263)]!=''&&!_0x2545f6&&(await setStartDatePerformance(config),_0x2545f6=dbPerformance[_0x2380ea(0x224)](_0x2380ea(0x1b8))[_0x2380ea(0x269)]({'date':config[_0x2380ea(0x204)]})[_0x2380ea(0x207)]());if(config['apiKey']==''||!_0x2545f6)return{};let _0x12c1cc=0x0,_0x19a727=0x0,_0x51925e=0x0,_0x30c616=[],_0xdb51a7=0x0;config[_0x2380ea(0x1b7)][_0x2380ea(0x25a)](_0x22c0ff=>{const _0xe92b22=_0x2380ea;!_0x22c0ff[_0xe92b22(0x220)]&&(_0x30c616[_0xdb51a7]={'coin':_0x22c0ff[_0xe92b22(0x20d)],'symbol':_0x22c0ff[_0xe92b22(0x1e3)],'number':_0x22c0ff[_0xe92b22(0x1f8)],'price':_0x22c0ff[_0xe92b22(0x252)]},_0x12c1cc+=_0x22c0ff[_0xe92b22(0x252)]*_0x22c0ff[_0xe92b22(0x1f8)],_0x19a727+=_0x22c0ff[_0xe92b22(0x252)]*_0x22c0ff['startnumber']*_0x2545f6[_0xe92b22(0x1da)],_0x51925e+=_0x22c0ff[_0xe92b22(0x252)]*_0x22c0ff[_0xe92b22(0x1f8)]*_0x2545f6['usd'],_0xdb51a7++);});let _0x24707b={'btc':_0x12c1cc,'eur':_0x19a727,'usd':_0x51925e,'coins':_0x30c616};if(_0x372c83)proxyEmit(_0x2380ea(0x1bc),_0x24707b);return _0x24707b;}function headlessMode(_0x4565e0){const _0x22612b=_0x33dc51;let _0x439b53=_0x4565e0[_0x22612b(0x1b7)],_0x918409=_0x4565e0['threshold'],_0x189d2a=[];for(let _0x2224e7 of _0x439b53){if(_0x2224e7['coin']!=_0x22612b(0x1ee)){if(_0x2224e7['distribution']/_0x2224e7[_0x22612b(0x237)]-0x1>=_0x918409/0x64){if(_0x2224e7[_0x22612b(0x255)])_0x189d2a['push'](_0x2224e7);}else{if(_0x2224e7[_0x22612b(0x272)]/_0x2224e7[_0x22612b(0x237)]-0x1<=-_0x918409/0x64){if(_0x2224e7['valid'])_0x189d2a['push'](_0x2224e7);}}}}_0x189d2a[_0x22612b(0x285)]>0x0&&placeOrder(_0x189d2a);}function symbolToCoin(_0x4b1139){const _0x9b2b49=_0x33dc51;let _0x5a506e;if(_0x4b1139[_0x9b2b49(0x1ce)](_0x9b2b49(0x281)))_0x5a506e=_0x4b1139['replace'](_0x9b2b49(0x281),'');if(_0x4b1139['includes'](_0x9b2b49(0x27b)))_0x5a506e=_0x4b1139[_0x9b2b49(0x1ac)](_0x9b2b49(0x27b),'');return _0x5a506e;}async function validateOrders(_0x1127cc=0x0){const _0x2f1392=_0x33dc51;let _0x3bdecb=[],_0x5bf4df=config['ordertype']==_0x2f1392(0x25b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2f1392(0x199)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x4d093c=>{const _0x1ebed6=_0x2f1392;let _0x153f80=previousCoins[_0x1ebed6(0x269)](_0x1866fb=>_0x1866fb[_0x1ebed6(0x20d)]==symbolToCoin(_0x4d093c[_0x1ebed6(0x1e3)])),_0x35960b=currentCoins[_0x1ebed6(0x269)](_0x5557c3=>_0x5557c3[_0x1ebed6(0x20d)]==symbolToCoin(_0x4d093c[_0x1ebed6(0x1e3)])),_0x21c362,_0x4b9c0d;_0x4d093c['side']==_0x1ebed6(0x1d0)&&!_0x4d093c[_0x1ebed6(0x1fc)]||_0x4d093c[_0x1ebed6(0x1ea)]==_0x1ebed6(0x1d3)&&_0x4d093c[_0x1ebed6(0x1fc)]?(_0x21c362=_0x153f80[_0x1ebed6(0x267)]+0.9*_0x4d093c[_0x1ebed6(0x211)],_0x4b9c0d=_0x153f80[_0x1ebed6(0x267)]+1.1*_0x4d093c[_0x1ebed6(0x211)]):(_0x21c362=_0x153f80[_0x1ebed6(0x267)]-1.1*_0x4d093c['filled'],_0x4b9c0d=_0x153f80[_0x1ebed6(0x267)]-0.9*_0x4d093c[_0x1ebed6(0x211)]);const _0x5949c5=_0x4d093c[_0x1ebed6(0x211)]!=0x0&&_0x35960b[_0x1ebed6(0x267)]>=_0x21c362&&_0x35960b['number']<=_0x4b9c0d;_0x3bdecb['push'](_0x5949c5);if(_0x5949c5&&config[_0x1ebed6(0x19c)]!='market'){if(_0x4d093c['reverse'])logHistory(_0x1ebed6(0x1e1),'Order\x20filled:\x20'+_0x4d093c[_0x1ebed6(0x1e3)]+'\x20'+_0x4d093c[_0x1ebed6(0x1ea)]+'\x20#'+formatResult(_0x4d093c['filled']/_0x4d093c[_0x1ebed6(0x1ab)],0x8)+'\x20@'+formatResult(_0x4d093c[_0x1ebed6(0x1ab)],0x8));else logHistory(_0x1ebed6(0x1e1),_0x1ebed6(0x247)+_0x4d093c[_0x1ebed6(0x1e3)]+'\x20'+_0x4d093c[_0x1ebed6(0x1ea)]+'\x20#'+formatResult(_0x4d093c[_0x1ebed6(0x211)],0x8)+'\x20@'+formatResult(_0x4d093c[_0x1ebed6(0x1ab)],0x8));}}),_0x3bdecb['forEach']((_0x46685a,_0xeb42e9)=>{if(_0x46685a)lastOrders['splice'](_0xeb42e9,0x1);});if(_0x1127cc<_0x5bf4df&&_0x3bdecb[_0x2f1392(0x1ce)](![])){if(_0x1127cc==0x0){config['ordertype']==_0x2f1392(0x25b)?logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x2f1392(0x200),_0x2f1392(0x261));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1127cc);},0xa*0x3e8);}else{(_0x1127cc==0x1||_0x1127cc==Math['round'](_0x5bf4df/0x2)||_0x1127cc==_0x5bf4df-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1127cc);},validateOrderInterval);}}else{lockOrders=![];if(_0x1127cc>0x0&&!_0x3bdecb[_0x2f1392(0x1ce)](![]))config[_0x2f1392(0x19c)]=='market'?logHistory('success',_0x2f1392(0x24d)):logHistory(_0x2f1392(0x22b),_0x2f1392(0x251));else _0x1127cc>0x0&&_0x3bdecb[_0x2f1392(0x1ce)](![])&&(config['ordertype']=='market'?logHistory(_0x2f1392(0x22b),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x2f1392(0x214)](_0x5bf4df*validateOrderInterval/0xea60)+_0x2f1392(0x24f)):(lastOrders[_0x2f1392(0x25a)](async _0x2360d0=>{const _0x569d35=_0x2f1392;try{const _0x5ad11c=await exchange[_0x569d35(0x23c)](_0x2360d0[_0x569d35(0x1f9)],_0x2360d0[_0x569d35(0x1e3)]);}catch(_0x1d3bfc){if(_0x1d3bfc[_0x569d35(0x26b)]()['includes'](_0x569d35(0x1b3))){}else await handleError(_0x1d3bfc,'cancelOrder()');}}),logHistory(_0x2f1392(0x22b),_0x2f1392(0x275)+Math['round'](_0x5bf4df*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x56be85=_0x33dc51;dbCoinResults[_0x56be85(0x224)](_0x56be85(0x231))[_0x56be85(0x284)]()[_0x56be85(0x256)]();let _0x3493cb=await getStartingBalances(![]);_0x3493cb['coins'][_0x56be85(0x25a)](_0x2a158a=>{const _0x2a494b=_0x56be85,_0x11dcce=_0x2a158a['symbol'][_0x2a494b(0x1ce)](_0x2a494b(0x27b));if(_0x2a158a[_0x2a494b(0x20d)]!=_0x2a494b(0x1ee)){let _0x34f382={'coin':_0x2a158a[_0x2a494b(0x20d)],'number':_0x2a158a[_0x2a494b(0x267)],'breakeven':_0x2a158a[_0x2a494b(0x1ab)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['push'](_0x34f382)[_0x2a494b(0x256)]();}});}async function updateCoinResults(_0x268688){const _0x231dd4=_0x33dc51;let _0x58fbdb,_0xc8b6e5,_0x697a83,_0x3b6aa5,_0x52175e,_0x127b03,_0x28c006=dbCoinResults[_0x231dd4(0x224)](_0x231dd4(0x231))[_0x231dd4(0x269)]({'coin':_0x268688['coin']})[_0x231dd4(0x207)]();if(!_0x28c006)return;if(_0x268688[_0x231dd4(0x1d6)]&&_0x268688[_0x231dd4(0x1d6)][_0x231dd4(0x242)]==_0x231dd4(0x1ee))_0x58fbdb=_0x268688[_0x231dd4(0x1d6)][_0x231dd4(0x291)];else{if(_0x268688[_0x231dd4(0x1d6)]&&_0x268688[_0x231dd4(0x1d6)][_0x231dd4(0x242)]==_0x231dd4(0x1b5))_0x58fbdb=_0x268688[_0x231dd4(0x1d6)][_0x231dd4(0x291)]*global['ticker'][_0x231dd4(0x1db)];else _0x58fbdb=0.001*_0x268688[_0x231dd4(0x211)];}const _0x31101c=_0x268688[_0x231dd4(0x1e3)][_0x231dd4(0x1ce)](_0x231dd4(0x27b));_0x31101c&&(_0x127b03={'coin':_0x268688['coin'],'symbol':_0x268688[_0x231dd4(0x1e3)],'filled':_0x268688[_0x231dd4(0x211)]*_0x268688['price'],'side':_0x268688[_0x231dd4(0x1ea)]==_0x231dd4(0x1d3)?_0x231dd4(0x1d0):_0x231dd4(0x1d3),'price':0x1/_0x268688[_0x231dd4(0x1ab)]},_0x268688={..._0x127b03});_0x268688[_0x231dd4(0x1ea)]==_0x231dd4(0x1d0)?_0x697a83=(_0x28c006[_0x231dd4(0x1ff)]*_0x28c006['number']+_0x268688[_0x231dd4(0x1ab)]*_0x268688[_0x231dd4(0x211)])/(_0x28c006[_0x231dd4(0x267)]+_0x268688['filled']):_0x697a83=(_0x28c006['breakeven']*_0x28c006[_0x231dd4(0x267)]-_0x268688[_0x231dd4(0x1ab)]*_0x268688[_0x231dd4(0x211)])/(_0x28c006[_0x231dd4(0x267)]-_0x268688[_0x231dd4(0x211)]);_0x268688[_0x231dd4(0x1ea)]=='buy'?_0x3b6aa5=_0x28c006[_0x231dd4(0x194)]:_0x3b6aa5=_0x28c006[_0x231dd4(0x194)]+(_0x268688[_0x231dd4(0x1ab)]-_0x28c006[_0x231dd4(0x1ff)])*_0x268688['filled'];_0xc8b6e5=_0x268688[_0x231dd4(0x1ea)]==_0x231dd4(0x1d3)?_0x28c006[_0x231dd4(0x267)]-_0x268688['filled']:_0x28c006[_0x231dd4(0x267)]+_0x268688['filled'],_0x52175e=(_0x268688[_0x231dd4(0x1ab)]-_0x697a83)*_0xc8b6e5;let _0x291739={'coin':_0x268688['coin'],'number':_0xc8b6e5,'breakeven':formatResult(_0x697a83,0x8),'realized':formatResult(_0x3b6aa5,0x8),'unrealized':formatResult(_0x52175e,0x8),'fees':formatResult(_0x28c006[_0x231dd4(0x1b0)]+_0x58fbdb,0x8),'sells':_0x268688[_0x231dd4(0x1ea)]=='sell'?_0x28c006[_0x231dd4(0x228)]+0x1:_0x28c006[_0x231dd4(0x228)],'buys':_0x268688['side']==_0x231dd4(0x1d0)?_0x28c006[_0x231dd4(0x1a3)]+0x1:_0x28c006[_0x231dd4(0x1a3)]};dbCoinResults[_0x231dd4(0x224)](_0x231dd4(0x231))[_0x231dd4(0x269)]({'coin':_0x268688[_0x231dd4(0x20d)]})['assign'](_0x291739)[_0x231dd4(0x256)]();}async function placeOrder(_0x2dd35d){const _0x3b0219=_0x33dc51,_0xfa4c66=config[_0x3b0219(0x19c)]=='market'?_0x3b0219(0x25b):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x3b0219(0x295)](JSON[_0x3b0219(0x1c4)](currentCoins));for(const _0x4b579a of _0x2dd35d){let _0x333fd5,_0x4cf742,_0x1f43c9,_0x2183f8,_0x859766,_0xbf15e0=_0x4b579a[_0x3b0219(0x1e3)];try{const _0x1185b7=await exchange['fetchTickers'](_0xbf15e0),_0x42736e=_0x1185b7[_0xbf15e0];_0x333fd5=_0x42736e['last'],_0x4cf742=_0x42736e[_0x3b0219(0x270)],_0x1f43c9=_0x42736e['ask'];_0x4b579a[_0x3b0219(0x1fc)]?(_0x2183f8=_0x4b579a['side']==_0x3b0219(0x1d0)?_0x3b0219(0x1d3):_0x3b0219(0x1d0),_0x859766=Math[_0x3b0219(0x21e)](_0x4b579a[_0x3b0219(0x20f)])/_0x333fd5):(_0x2183f8=_0x4b579a[_0x3b0219(0x1ea)],_0x859766=Math[_0x3b0219(0x21e)](_0x4b579a[_0x3b0219(0x20f)]));_0xfa4c66==_0x3b0219(0x1f0)&&(config[_0x3b0219(0x19c)]==_0x3b0219(0x290)&&(_0x333fd5=_0x2183f8=='buy'?_0x4cf742:_0x1f43c9),config[_0x3b0219(0x19c)]==_0x3b0219(0x24e)&&(_0x333fd5=_0x2183f8==_0x3b0219(0x1d0)?_0x1f43c9:_0x4cf742));_0x859766=formatResult(_0x859766,0x8),_0x333fd5=formatResult(_0x333fd5,0x8);const _0x4a86c9=await exchange[_0x3b0219(0x1a9)](_0xbf15e0,_0xfa4c66,_0x2183f8,_0x859766,_0x333fd5);lastOrders[_0x3b0219(0x266)]({'orderId':_0x4a86c9['id'],'symbol':_0xbf15e0,'side':_0x2183f8,'reverse':_0x4b579a[_0x3b0219(0x1fc)],'amount':_0x4b579a['reverse']?_0x4a86c9[_0x3b0219(0x25c)]*_0x4a86c9[_0x3b0219(0x1ab)]:_0x4a86c9[_0x3b0219(0x25c)],'filled':_0x4b579a[_0x3b0219(0x1fc)]?_0x4a86c9[_0x3b0219(0x211)]*_0x4a86c9[_0x3b0219(0x1ab)]:_0x4a86c9[_0x3b0219(0x211)],'price':_0x4a86c9[_0x3b0219(0x1ab)]});const _0x507284=_0xfa4c66=='market'?_0x3b0219(0x233):config[_0x3b0219(0x19c)]=='limit-high'?_0x3b0219(0x27f):_0x3b0219(0x197);if(_0xfa4c66==_0x3b0219(0x25b))logHistory(_0x3b0219(0x1e1),_0x507284+_0x3b0219(0x1e8)+_0xbf15e0+'\x20'+_0x2183f8+'\x20#'+formatResult(_0x4a86c9[_0x3b0219(0x211)],0x8)+'\x20@'+formatResult(_0x4a86c9[_0x3b0219(0x1ab)],0x8));else logHistory(_0x3b0219(0x1e1),_0x507284+'\x20order:\x20'+_0xbf15e0+'\x20'+_0x2183f8+'\x20#'+formatResult(_0x4a86c9[_0x3b0219(0x25c)],0x8)+'\x20@'+formatResult(_0x4a86c9[_0x3b0219(0x1ab)],0x8));_0x4a86c9['coin']=_0x4b579a['coin'],await updateCoinResults(_0x4a86c9);if(config[_0x3b0219(0x1be)]!=0x0){let _0x5da717=null;if(cooldownTracker[_0x3b0219(0x285)]==config[_0x3b0219(0x1be)]-0x1)_0x5da717=cooldownTracker[_0x3b0219(0x1cf)]();const _0x1f123c=getTimeStamp();cooldownTracker[_0x3b0219(0x266)](_0x1f123c);if(_0x5da717){const _0x18b9c7=fns[_0x3b0219(0x1d4)](new Date(_0x1f123c),new Date(_0x5da717));_0x18b9c7<cooldownInterval&&(logHistory(_0x3b0219(0x200),_0x3b0219(0x276)+config[_0x3b0219(0x1be)]+_0x3b0219(0x1f7)+cooldownInterval/0x3c+_0x3b0219(0x1e0)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x89f4d8){if(_0x89f4d8['toString']()[_0x3b0219(0x1ce)](_0x3b0219(0x259)))logHistory(_0x3b0219(0x200),_0x3b0219(0x288)+_0xbf15e0);else{if(_0x89f4d8[_0x3b0219(0x26b)]()[_0x3b0219(0x1ce)]('Invalid\x20quantity'))logHistory(_0x3b0219(0x200),_0x3b0219(0x1eb)+_0xbf15e0);else await handleError(_0x89f4d8,_0x3b0219(0x19b));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x3b0219(0x19c)]==_0x3b0219(0x25b)?logHistory(_0x3b0219(0x200),_0x3b0219(0x271)):logHistory(_0x3b0219(0x200),_0x3b0219(0x241)));else coolingDown&&(!config['headless']&&logHistory('error',_0x3b0219(0x239)));}}function logHistory(_0x2947b2,_0xc74d23,_0x1d5a54=''){const _0xf972ab=_0x33dc51;let _0x48f10b={'time':getTimeStamp(),'type':_0x2947b2,'event':_0xc74d23};dbLogs[_0xf972ab(0x224)](_0xf972ab(0x1fa))['push'](_0x48f10b)['write']();if(_0x1d5a54=='')_0x1d5a54=_0xc74d23;proxyEmit(_0xf972ab(0x280),{'log':_0x48f10b,'summary':_0x1d5a54}),process['send']({'telegram':_0x48f10b}),logging(''+_0x48f10b[_0xf972ab(0x280)]);}function emitHistory(_0x4c25ff={}){const _0x365f84=_0x33dc51;Object[_0x365f84(0x1ec)](_0x4c25ff)[_0x365f84(0x285)]==0x0&&(_0x4c25ff={'type':[_0x365f84(0x1e1),'event'],'event':'','page':0x1});if(_0x4c25ff[_0x365f84(0x260)]['includes']('event'))_0x4c25ff[_0x365f84(0x260)]['splice'](_0x4c25ff[_0x365f84(0x260)][_0x365f84(0x28b)](_0x365f84(0x280)),0x1,'error','success');if(dbLogs[_0x365f84(0x193)](_0x365f84(0x1fa))[_0x365f84(0x207)]()){let _0x2baa99=dbLogs[_0x365f84(0x224)](_0x365f84(0x1fa))[_0x365f84(0x262)](_0x53ec86=>{const _0x121899=_0x365f84;if(_0x4c25ff[_0x121899(0x260)][_0x121899(0x285)]==0x0)return![];else return _0x4c25ff['type'][_0x121899(0x1ce)](_0x53ec86[_0x121899(0x260)]);})[_0x365f84(0x262)](_0xbd3aa9=>{const _0x986e28=_0x365f84;if(_0x4c25ff[_0x986e28(0x280)]=='')return!![];else return _0xbd3aa9[_0x986e28(0x280)][_0x986e28(0x1d5)]()['includes'](_0x4c25ff[_0x986e28(0x280)]['toLowerCase']());})[_0x365f84(0x257)](_0x365f84(0x1c5)),_0x42adb5=_0x2baa99[_0x365f84(0x207)]()['length'];_0x2baa99=_0x2baa99[_0x365f84(0x1fc)]()[_0x365f84(0x240)]((_0x4c25ff[_0x365f84(0x293)]-0x1)*logPageSize,_0x4c25ff[_0x365f84(0x293)]*logPageSize-0x1)[_0x365f84(0x1fc)]()[_0x365f84(0x207)](),proxyEmit(_0x365f84(0x28c),{'logs':_0x2baa99,'total':_0x42adb5});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x5d2e20){const _0x5a640d=_0x33dc51,_0x313486=new Date()[_0x5a640d(0x203)]();console[_0x5a640d(0x1e2)]('Now\x20\x20\x20:\x20',_0x313486),console[_0x5a640d(0x1e2)](_0x5a640d(0x1cd),_0x313486-lastBotPause),console[_0x5a640d(0x1e2)]('Pauses:\x20',consecutivePauses);if(!lastBotPause)lastBotPause=new Date()[_0x5a640d(0x203)](),consecutivePauses=0x1;else{if(_0x313486-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x5a640d(0x208)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x5a640d(0x203)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x5d2e20),botPaused=![],reset();}}async function handleError(_0x17bfca,_0xbe38d2,_0x424a32=''){const _0x2812e6=_0x33dc51;if(_0x17bfca[_0x2812e6(0x26b)]()[_0x2812e6(0x1ce)](_0x2812e6(0x225)))logHistory(_0x2812e6(0x200),_0xbe38d2+_0x2812e6(0x229)),await pauseBot(pauseBotInterval);else{if(_0x17bfca['toString']()['includes'](_0x2812e6(0x205)))logHistory(_0x2812e6(0x200),_0xbe38d2+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x17bfca[_0x2812e6(0x26b)]()['includes'](_0x2812e6(0x28a)))logHistory('error',_0xbe38d2+_0x2812e6(0x21a)),await pauseBot(pauseBotInterval);else{if(_0x17bfca[_0x2812e6(0x26b)]()[_0x2812e6(0x1ce)](_0x2812e6(0x253)))logHistory(_0x2812e6(0x200),_0xbe38d2+_0x2812e6(0x192)),logHistory(_0x2812e6(0x200),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2812e6(0x227)]({'stop':'kill'});else{if(_0x17bfca[_0x2812e6(0x26b)]()[_0x2812e6(0x1ce)](_0x2812e6(0x196)))logHistory('error',_0xbe38d2+_0x2812e6(0x1c0)),logHistory('error',_0x2812e6(0x23d)),process[_0x2812e6(0x227)]({'stop':_0x2812e6(0x25d)});else{if(_0x17bfca[_0x2812e6(0x26b)]()[_0x2812e6(0x1ce)](_0x2812e6(0x1f6)))logHistory(_0x2812e6(0x200),_0xbe38d2+_0x2812e6(0x1ba)),logHistory(_0x2812e6(0x200),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2812e6(0x227)]({'stop':_0x2812e6(0x25d)});else{if(_0x17bfca['toString']()[_0x2812e6(0x1ce)](_0x2812e6(0x1ed)))logHistory(_0x2812e6(0x200),_0xbe38d2+_0x2812e6(0x1a0)),logHistory(_0x2812e6(0x200),_0x2812e6(0x23d)),process[_0x2812e6(0x227)]({'stop':_0x2812e6(0x25d)});else{if(_0x17bfca[_0x2812e6(0x26b)]()['includes'](_0x2812e6(0x1aa)))logHistory(_0x2812e6(0x200),_0xbe38d2+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(2)\x20-\x20please\x20sync\x20clock'),logHistory(_0x2812e6(0x200),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x2812e6(0x25d)});else _0x17bfca[_0x2812e6(0x26b)]()[_0x2812e6(0x1ce)]('InsufficientFunds')?logHistory(_0x2812e6(0x200),_0xbe38d2+_0x2812e6(0x1fd)):(logHistory(_0x2812e6(0x200),_0xbe38d2+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0xbe38d2+_0x2812e6(0x20c),_0x17bfca),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x1bc251,_0x31b1ce){return parseFloat(_0x1bc251['toFixed'](_0x31b1ce));}function logging(_0x24e812,_0x268350=''){const _0x3507b5=_0x33dc51;console[_0x3507b5(0x1e2)](getTimeStamp()+_0x3507b5(0x1f2)+botID+_0x3507b5(0x223)+_0x24e812,_0x268350);}function getServerTime(){const _0x166c79=_0x33dc51,_0x13d2c7=new Date();return _0x13d2c7[_0x166c79(0x1c8)]()+'/'+(_0x13d2c7[_0x166c79(0x216)]()+0x1)[_0x166c79(0x26b)]()[_0x166c79(0x26c)](0x2,'0')+'/'+_0x13d2c7[_0x166c79(0x198)]()[_0x166c79(0x26b)]()[_0x166c79(0x26c)](0x2,'0')+'\x20'+_0x13d2c7[_0x166c79(0x1d2)]()[_0x166c79(0x26b)]()['padStart'](0x2,'0')+':'+_0x13d2c7[_0x166c79(0x26d)]()[_0x166c79(0x26b)]()[_0x166c79(0x26c)](0x2,'0')+':'+_0x13d2c7[_0x166c79(0x217)]()[_0x166c79(0x26b)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xb10dc5=_0x33dc51,_0x374d0e=shiftedTime();return _0x374d0e[_0xb10dc5(0x1c8)]()+'/'+(_0x374d0e[_0xb10dc5(0x216)]()+0x1)['toString']()[_0xb10dc5(0x26c)](0x2,'0')+'/'+_0x374d0e['getDate']()[_0xb10dc5(0x26b)]()[_0xb10dc5(0x26c)](0x2,'0')+'\x20'+_0x374d0e[_0xb10dc5(0x1d2)]()[_0xb10dc5(0x26b)]()[_0xb10dc5(0x26c)](0x2,'0')+':'+_0x374d0e[_0xb10dc5(0x26d)]()[_0xb10dc5(0x26b)]()['padStart'](0x2,'0')+':'+_0x374d0e[_0xb10dc5(0x217)]()['toString']()[_0xb10dc5(0x26c)](0x2,'0');}function getDate(){const _0x2abbec=_0x33dc51,_0x5bfbd5=shiftedTime();return _0x5bfbd5['getFullYear']()+'/'+(_0x5bfbd5['getMonth']()+0x1)[_0x2abbec(0x26b)]()['padStart'](0x2,'0')+'/'+_0x5bfbd5[_0x2abbec(0x198)]()['toString']()[_0x2abbec(0x26c)](0x2,'0');}function getHour(){const _0x442082=_0x33dc51,_0x1b7bf4=shiftedTime();return _0x1b7bf4[_0x442082(0x1d2)]()[_0x442082(0x26b)]()[_0x442082(0x26c)](0x2,'0');}function sleep(_0x4c50f8){return new Promise(_0x3b1670=>setTimeout(_0x3b1670,_0x4c50f8));}function shiftedTime(){const _0x15c8e2=_0x33dc51,_0x2ffc85=new Date();let _0x232a7c=_0x2ffc85;if(config&&config['timeshift']!==0x0)_0x232a7c=fns[_0x15c8e2(0x218)](_0x2ffc85,{'hours':config['timeshift']});return _0x232a7c;}