const _0x26cd5e=_0x1be9;(function(_0x495b21,_0x291350){const _0xde03ef=_0x1be9,_0x2b44b0=_0x495b21();while(!![]){try{const _0x1cecad=-parseInt(_0xde03ef(0x247))/0x1*(parseInt(_0xde03ef(0x2b1))/0x2)+parseInt(_0xde03ef(0x1e4))/0x3+parseInt(_0xde03ef(0x23e))/0x4+-parseInt(_0xde03ef(0x1fa))/0x5+parseInt(_0xde03ef(0x2a8))/0x6*(parseInt(_0xde03ef(0x265))/0x7)+-parseInt(_0xde03ef(0x210))/0x8+-parseInt(_0xde03ef(0x2d0))/0x9;if(_0x1cecad===_0x291350)break;else _0x2b44b0['push'](_0x2b44b0['shift']());}catch(_0xfa57e4){_0x2b44b0['push'](_0x2b44b0['shift']());}}}(_0x223b,0xb7d2a));const _0x53f02a=function(){let _0x49ca87=!![];return function(_0x57e7cf,_0x5368ee){const _0x1786a0=_0x49ca87?function(){const _0x419802=_0x1be9;if(_0x5368ee){const _0x6a50a6=_0x5368ee[_0x419802(0x201)](_0x57e7cf,arguments);return _0x5368ee=null,_0x6a50a6;}}:function(){};return _0x49ca87=![],_0x1786a0;};}(),_0x5b7148=_0x53f02a(this,function(){const _0x209f7d=_0x1be9;return _0x5b7148[_0x209f7d(0x2c7)]()[_0x209f7d(0x1ee)](_0x209f7d(0x289))[_0x209f7d(0x2c7)]()[_0x209f7d(0x24a)](_0x5b7148)[_0x209f7d(0x1ee)]('(((.+)+)+)+$');});_0x5b7148();'use strict';function _0x223b(){const _0x10fc3e=['sha256','limits','getPortfolio()','timestamp','binanceus','includes','emojisell','orderStatus','abs','entries','BTCBUSD','number','initclient','BTC/EUR','close','bot','function','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Performance\x20recreation\x20completed\x20successfully','type','data','3668938ndKEOy','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Invalid\x20quantity','success','\x20>\x20','exchange','OrderNotFound','wsMarket','./config/','trade','coin','eachDayOfInterval','yyyy/MM/dd\x20HH:mm:ss','argv','USDT','exit','toLowerCase','balances','progress','round','\x20minutes\x20-\x20balancing\x20resumed','yyyy/MM/dd','userData','Crypt','configuration','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','timeout','ordertype','fromCodePoint','fetchOHLCV','cost','\x20-\x20','getHours','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','fetchOrders','date-fns','(((.+)+)+)+$','Binance\x20API\x20secret\x20is\x20invalid','apiKey','executionReport','kill','logs','getFullYear','loadSymbols()','target','filter','cancelLoading','push','indexOf','startprice','LIMIT','storeConfiguration','bb-secure.json','replace','getPortfolio','eventType','createOrder','defaults','initws()','lowdb/adapters/FileSync','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','EUR','keys','filled','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','write','getMinutes','6uVlDVI','order','001','startdate','parseISO','total','apiSecret','threshold','orderId','596354nWqdYh','valid','BNB','closeWs','eur','milliseconds','kline','running','enabled','currency','ccxt','buy','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','asset','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','bid','portfolio','configuration-stored','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','event','slice','getCoins()','toString','Limit\x20(low-margin)','subscribeSpotUserDataStream','HOT/EUR','args','placeOrder()','reconnected','padStart','WebSockets(','9740862zAhwQT','BTC/USDT','version','sortBy','date','startnumber','toFixed','sells','split','basecoin','Pausing\x20bot\x20for\x205\x20minutes\x20(','remove','time','cooldown','assign','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','log','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','BTC','isArray','secure','privateKey','reduce','mkdirSync','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','outboundAccountPosition','MIN_NOTIONAL','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','ExchangeNotAvailable','page','value','getCloses()','getStartingBalances','DDoSProtection','wsKey','remainingSymbols','amount','AuthenticationError',',\x20must\x20be\x20a\x203\x20digit\x20number','recreateHistory()','min','Bot\x20','-events.json','message','forEach','wss://stream.binance.us:9443','2170455mKDVxh','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','limit-high','limit','\x20order:\x20','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getDate','\x20hour','availableBalance','emojibuy','search','getTime','-results.json','delta','event-history','BUSD','sort','./version.json','usd','getSeconds','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','orderType','2923725oMicJX','RequestTimeout','price','has','fetchTickers','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','parse','apply','add','RSA-OAEP','Order\x20filled:\x20','showname','restart','side','loadMarkets','BTC/BUSD','getMonth','cancelOrder','hybrid-crypto-js','differenceInSeconds','Limit\x20(high-margin)','existsSync','197904IeSdhK','Market','excluded','format','performance','InvalidNonce','DAI/','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','coinamount','\x20|\x20Error\x20details:\x20','decrypt','datetime','subscribeSpotKline','length','InsufficientFunds','-config.json','test','find','last','************','sell','get','binance','storeHeadless','botname','buys','bot-','Order(s)\x20filled\x20-\x20balancing\x20resumed','API-key\x20format\x20invalid','symbol','recreate','timeshift','market','ask','getFiat()','distribution','coins','lowdb','wss://stream.binance.com:9443','Order:\x20','FILLED','accumulatedQuantity','headless','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','placeOrder','stringify','5981188nPruyG','differenceInCalendarDays','ticker','reverse','fee','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','symbols','offset','error','1GRXihO','send','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','constructor','cancelOrder()','breakeven','USDC','Error:\x20Invalid\x20argument\x20',')\x20|\x20Error\x20details:\x20'];_0x223b=function(){return _0x10fc3e;};return _0x223b();}const ccxt=require(_0x26cd5e(0x2bb)),low=require(_0x26cd5e(0x235)),FileSync=require(_0x26cd5e(0x2a0)),fs=require('fs'),fns=require(_0x26cd5e(0x288)),{WebsocketClient,DefaultLogger}=require(_0x26cd5e(0x226)),Crypt=require(_0x26cd5e(0x20c))[_0x26cd5e(0x27c)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x26cd5e(0x1f5))[_0x26cd5e(0x2d2)],botID=process[_0x26cd5e(0x272)][0x2]||_0x26cd5e(0x2aa),pattern=/^[0-9]{3}$/;if(!pattern[_0x26cd5e(0x220)](botID))return console['log'](_0x26cd5e(0x24e)+botID+_0x26cd5e(0x1dc)),process[_0x26cd5e(0x274)](0x1);const userID=process[_0x26cd5e(0x272)][0x3]||'',configpath=userID?_0x26cd5e(0x26d)+userID+'/':'./config/';!fs[_0x26cd5e(0x20f)](configpath)&&fs[_0x26cd5e(0x1cd)](configpath);const configfile=configpath+_0x26cd5e(0x22a)+botID+_0x26cd5e(0x21f),logfile=configpath+_0x26cd5e(0x22a)+botID+_0x26cd5e(0x1e0),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x26cd5e(0x1f0),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x26cd5e(0x299),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x26cd5e(0x2a6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x26cd5e(0x29e)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x26cd5e(0x29e)]({'bot':[]})[_0x26cd5e(0x2a6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x26cd5e(0x29e)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x26cd5e(0x25d)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5404e6)=>{},'debug':(..._0x4ae19a)=>{},'notice':(..._0x279f54)=>{},'info':(..._0x2630cc)=>{},'warning':(..._0x2c7f00)=>{},'error':async function(..._0x3be86d){const _0x452fac=_0x26cd5e,_0x28a900=new Date()[_0x452fac(0x1ef)]();if(!lastErrorShown||_0x28a900-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x452fac(0x246),_0x452fac(0x2cf)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x4063d0='';if(_0x3be86d[0x0])_0x4063d0+=_0x3be86d[0x0];if(_0x3be86d[0x1]&&_0x3be86d[0x1]['error']&&_0x3be86d[0x1]['error'][_0x452fac(0x1e1)])_0x4063d0+=_0x452fac(0x284)+_0x3be86d[0x1][_0x452fac(0x246)][_0x452fac(0x1e1)];logging(_0x452fac(0x2cf)+consecutivePauses+_0x452fac(0x24f),''+_0x4063d0),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x26cd5e(0x250),'rsaStandard':_0x26cd5e(0x203)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x26cd5e(0x22f)]!=config[_0x26cd5e(0x22f)]&&updateTimeshift(settings[_0x26cd5e(0x22f)]);process[_0x26cd5e(0x248)]({'started':_0x26cd5e(0x2b8)}),initializeProcessListeners();function proxyEmit(_0x4b0bc8,_0x2d9e1=null){process['send']({'function':_0x4b0bc8,'args':_0x2d9e1});}function initializeProcessListeners(){const _0x242fbd=_0x26cd5e;process['on'](_0x242fbd(0x1e1),_0x3bb998=>{const _0x23215b=_0x242fbd;switch(Object[_0x23215b(0x2a3)](_0x3bb998)[0x0]){case _0x23215b(0x22f):_0x3bb998[_0x23215b(0x22f)]!=undefined&&(settings[_0x23215b(0x22f)]=_0x3bb998[_0x23215b(0x22f)],updateTimeshift(settings[_0x23215b(0x22f)]));break;case'function':switch(_0x3bb998[_0x23215b(0x260)]){case _0x23215b(0x25c):initclient();break;case'emitHistory':emitHistory(_0x3bb998[_0x23215b(0x2cb)]);break;case _0x23215b(0x29b):getPortfolio(_0x3bb998['args']);break;case _0x23215b(0x298):storeConfiguration(_0x3bb998[_0x23215b(0x2cb)]);break;case _0x23215b(0x227):storeHeadless(_0x3bb998['args']);break;case _0x23215b(0x1d6):getStartingBalances();break;case _0x23215b(0x23c):placeOrder(_0x3bb998['args']);break;case _0x23215b(0x293):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x14b30d=_0x26cd5e;if(pidBalances)clearTimeout(pidBalances);if(config[_0x14b30d(0x28b)]!=''){await initExchange(config[_0x14b30d(0x28b)],config[_0x14b30d(0x2ae)]);let _0x5fe676=await loadSymbols();_0x5fe676&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x5c42be,_0x5147b4){const _0xd19d38=_0x26cd5e,_0x46f7c2=ccxt[config['exchange']];let _0x58f0ac;switch(config[_0xd19d38(0x26a)]){case _0xd19d38(0x226):_0x58f0ac=_0xd19d38(0x236);break;case'binanceus':_0x58f0ac=_0xd19d38(0x1e3);break;default:_0x58f0ac='wss://stream.binance.com:9443';}exchange=new _0x46f7c2({'apiKey':_0x5c42be,'secret':_0x5147b4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5c42be,'api_secret':_0x5147b4,'beautify':!![],'wsUrl':_0x58f0ac},logger),config[_0xd19d38(0x26a)]==_0xd19d38(0x254)&&(stablecoins={'eur':{'coin':_0xd19d38(0x25a),'symbol':_0xd19d38(0x209)},'usd':{'coin':'BTCUSDT','symbol':_0xd19d38(0x2d1)}});}async function loadSymbols(){const _0x366186=_0x26cd5e;let _0x1a3225;try{markets=await exchange[_0x366186(0x208)]();const _0x244296=[_0x366186(0x216),'HOT/BTC',_0x366186(0x2ca)];allSymbols=exchange[_0x366186(0x244)][_0x366186(0x292)](_0x2b4b21=>{const _0x427eb5=_0x366186;let _0x430931=![];return _0x244296[_0x427eb5(0x1e2)](_0x4cf3e1=>{const _0x53c6d1=_0x427eb5;if(_0x2b4b21[_0x53c6d1(0x255)](_0x4cf3e1))_0x430931=!![];}),!_0x430931;}),_0x1a3225=!![];}catch(_0x174c9b){await handleError(_0x174c9b,_0x366186(0x290)),_0x1a3225=![];}return _0x1a3225;}async function initbot(){const _0x4e20fe=_0x26cd5e;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x234a09=dbCoinResults['get']('coins')[_0x4e20fe(0x1d4)]();if(_0x234a09[_0x4e20fe(0x21d)]==0x0)await resetCoinResults();}async function initclient(){const _0x5c1935=_0x26cd5e;proxyEmit(_0x5c1935(0x27d),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5c1935(0x276),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5f4264=_0x26cd5e;wsinitialized=![];ws1&&(ws1[_0x5f4264(0x1e2)](_0x3a8528=>{const _0xc74f9a=_0x5f4264;try{wsClient[_0xc74f9a(0x2b4)](_0x3a8528);}catch(_0x22b947){}}),ws1=[]);if(ws2){try{wsClient[_0x5f4264(0x2b4)](ws2);}catch(_0x3fefff){}ws2=null;}}async function initws(){const _0x10b1e4=_0x26cd5e;cleanws();let _0x3d6176=[];currentCoins['forEach'](_0x3e7641=>{const _0x536dfd=_0x1be9;if(_0x3e7641[_0x536dfd(0x26f)]!=config[_0x536dfd(0x1bf)])_0x3d6176['push'](noslash(_0x3e7641['symbol']));});if(!_0x3d6176['includes'](stablecoins[_0x10b1e4(0x2b5)][_0x10b1e4(0x26f)]))_0x3d6176['push'](stablecoins[_0x10b1e4(0x2b5)]['coin']);if(!_0x3d6176[_0x10b1e4(0x255)](stablecoins['usd']['coin']))_0x3d6176[_0x10b1e4(0x294)](stablecoins['usd'][_0x10b1e4(0x26f)]);if(!_0x3d6176[_0x10b1e4(0x255)](_0x10b1e4(0x2b3)+config[_0x10b1e4(0x1bf)]))_0x3d6176[_0x10b1e4(0x294)](_0x10b1e4(0x2b3)+config[_0x10b1e4(0x1bf)]);try{_0x3d6176[_0x10b1e4(0x1e2)]((_0x2f8250,_0x56a94b)=>{const _0x44c5b4=_0x10b1e4;ws1[_0x56a94b]=wsClient[_0x44c5b4(0x21c)](_0x2f8250,'1m');}),ws2=wsClient[_0x10b1e4(0x2c9)](),wsClient['on']('formattedMessage',_0x3f98a4=>{const _0x450914=_0x10b1e4;if(!Array[_0x450914(0x1c9)](_0x3f98a4)&&!_0x3f98a4[_0x450914(0x1d8)]['includes'](_0x450914(0x27b))){if(_0x3f98a4['eventType']===_0x450914(0x2b7)){global[_0x450914(0x240)][_0x3f98a4[_0x450914(0x2b7)][_0x450914(0x22d)]]=_0x3f98a4[_0x450914(0x2b7)][_0x450914(0x25e)];return;}}else{if(!Array[_0x450914(0x1c9)](_0x3f98a4)&&_0x3f98a4[_0x450914(0x1d8)][_0x450914(0x255)]('userData')){if(_0x3f98a4[_0x450914(0x26c)][_0x450914(0x255)]('spot')){updateNumberCoins(_0x3f98a4);return;}}}}),wsClient['on'](_0x10b1e4(0x2cd),async _0xf140a=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x10ad42){await handleError(_0x10ad42,_0x10b1e4(0x29f));}let _0x5f1fae,_0xb2dc97=0x0;loading['remainingSymbols']=[];let _0x170236=0x0;currentCoins[_0x10b1e4(0x1e2)](_0x386b8f=>{const _0x350648=_0x10b1e4;if(_0x386b8f[_0x350648(0x26f)]!=config['basecoin'])loading[_0x350648(0x1d9)]['push'](_0x386b8f['symbol']);}),loadingCanceled=![];while(_0x5f1fae!=currentCoins[_0x10b1e4(0x21d)]-0x1){_0x5f1fae=0x0,currentCoins[_0x10b1e4(0x1e2)](_0x4975d8=>{const _0x901b2a=_0x10b1e4;_0x4975d8[_0x901b2a(0x26f)]!=config[_0x901b2a(0x1bf)]&&global[_0x901b2a(0x240)][noslash(_0x4975d8[_0x901b2a(0x22d)])]&&(loading['remainingSymbols']=loading[_0x901b2a(0x1d9)][_0x901b2a(0x292)](_0x59c1d9=>_0x59c1d9!=_0x4975d8[_0x901b2a(0x22d)]),_0x5f1fae++);}),loading[_0x10b1e4(0x277)]=Math[_0x10b1e4(0x278)](_0x5f1fae/(currentCoins['length']-0x1)*0x64);_0x170236>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x5f1fae!=_0xb2dc97&&(_0xb2dc97=_0x5f1fae,emitLoadingProgress()),_0x170236++,await sleep(0xc8);}if(_0x5f1fae==currentCoins[_0x10b1e4(0x21d)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x292d92=_0x26cd5e;let _0x45dd63=0x0,_0x48b636=0x0;try{_0x45dd63=global[_0x292d92(0x240)][stablecoins[_0x292d92(0x2b5)]['coin']],_0x48b636=global[_0x292d92(0x240)][stablecoins['usd'][_0x292d92(0x26f)]];}catch(_0x28d1ac){await handleError(_0x28d1ac,_0x292d92(0x232));}return{'eur':Number(_0x45dd63),'usd':Number(_0x48b636)};}async function setStartDatePerformance(_0x39fbb5){const _0x1603ff=_0x26cd5e,_0x4d9198=fns[_0x1603ff(0x213)](new Date(_0x39fbb5[_0x1603ff(0x2ab)]),_0x1603ff(0x27a));let _0x183c31=[];_0x183c31[stablecoins['eur'][_0x1603ff(0x26f)]]=await getCloses(stablecoins['eur'][_0x1603ff(0x22d)],new Date(_0x39fbb5['startdate']),0x1),_0x183c31[stablecoins[_0x1603ff(0x1f6)]['coin']]=await getCloses(stablecoins[_0x1603ff(0x1f6)][_0x1603ff(0x22d)],new Date(_0x39fbb5[_0x1603ff(0x2ab)]),0x1);let _0x2f48c4,_0x5329c9=[];_0x39fbb5[_0x1603ff(0x2c1)][_0x1603ff(0x1e2)](_0x3cafb9=>{const _0x6e2308=_0x1603ff;!_0x3cafb9[_0x6e2308(0x212)]&&_0x5329c9[_0x6e2308(0x294)]({'coin':_0x3cafb9['coin'],'number':_0x3cafb9['startnumber'],'price':_0x3cafb9[_0x6e2308(0x296)]});}),_0x2f48c4={'date':_0x4d9198,'eur':_0x183c31[stablecoins[_0x1603ff(0x2b5)]['coin']][0x0],'usd':_0x183c31[stablecoins[_0x1603ff(0x1f6)][_0x1603ff(0x26f)]][0x0],'coins':_0x5329c9};let _0x3ce448=dbPerformance[_0x1603ff(0x225)](_0x1603ff(0x264))[_0x1603ff(0x221)]({'date':_0x4d9198})[_0x1603ff(0x1d4)]();_0x3ce448?dbPerformance['get'](_0x1603ff(0x264))[_0x1603ff(0x221)]({'date':_0x4d9198})[_0x1603ff(0x1c4)](_0x2f48c4)[_0x1603ff(0x2a6)]():dbPerformance[_0x1603ff(0x225)](_0x1603ff(0x264))['push'](_0x2f48c4)[_0x1603ff(0x2a6)](),_0x3ce448=dbPerformance[_0x1603ff(0x225)]('data')['sortBy'](_0x1603ff(0x2d4))[_0x1603ff(0x1d4)](),_0x3ce448['forEach'](_0x4e565a=>{const _0x4029fc=_0x1603ff;_0x4e565a[_0x4029fc(0x2d4)]<_0x4d9198&&dbPerformance[_0x4029fc(0x225)]('data')['remove']({'date':_0x4e565a[_0x4029fc(0x2d4)]})[_0x4029fc(0x2a6)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0xf9424e){const _0x47a8f5=_0x26cd5e;let _0x4bb172,_0x34e472=[];logHistory(_0x47a8f5(0x268),_0x47a8f5(0x23b)),_0xf9424e[_0x47a8f5(0x2c1)][_0x47a8f5(0x1e2)](_0x47d243=>{const _0x52fa16=_0x47a8f5;if(_0x47d243[_0x52fa16(0x26f)]!=config[_0x52fa16(0x1bf)]&&!_0x47d243[_0x52fa16(0x212)])_0x34e472[_0x52fa16(0x294)]({'coin':_0x47d243[_0x52fa16(0x26f)],'symbol':_0x47d243[_0x52fa16(0x22d)]});});let _0x33e4cf=[];try{const _0x453c4e=fns[_0x47a8f5(0x213)](fns[_0x47a8f5(0x2ac)](_0xf9424e[_0x47a8f5(0x2ab)][_0x47a8f5(0x29a)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x2e48d2 of _0x34e472){if(_0x2e48d2[_0x47a8f5(0x26f)]!=config[_0x47a8f5(0x1bf)])_0x4bb172=await exchange[_0x47a8f5(0x287)](_0x2e48d2[_0x47a8f5(0x22d)],Date['parse'](_0x453c4e));_0x4bb172[_0x47a8f5(0x1e2)](_0x35255a=>{const _0x166ddc=_0x47a8f5,_0x517f5a=_0x2e48d2[_0x166ddc(0x22d)][_0x166ddc(0x255)](config[_0x166ddc(0x1bf)]+'/'),_0x469812=fns[_0x166ddc(0x213)](fns[_0x166ddc(0x2ac)](_0x35255a[_0x166ddc(0x21b)]),_0x166ddc(0x271)),_0x153d01=fns[_0x166ddc(0x213)](fns[_0x166ddc(0x2ac)](_0x35255a['datetime']),_0x166ddc(0x27a));let _0x17dd48;if(_0x35255a['side']==_0x166ddc(0x2bc)&&_0x517f5a==![])_0x17dd48=_0x35255a[_0x166ddc(0x1da)];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x2bc)&&_0x517f5a==!![])_0x17dd48=-_0x35255a[_0x166ddc(0x1da)]*_0x35255a[_0x166ddc(0x1fc)];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x224)&&_0x517f5a==![])_0x17dd48=-_0x35255a[_0x166ddc(0x1da)];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x224)&&_0x517f5a==!![])_0x17dd48=_0x35255a[_0x166ddc(0x1da)]*_0x35255a[_0x166ddc(0x1fc)];_0x33e4cf['push']({'timestamp':_0x469812,'date':_0x153d01,'coin':_0x2e48d2['coin'],'symbol':_0x2e48d2[_0x166ddc(0x22d)],'type':_0x35255a[_0x166ddc(0x263)],'side':_0x35255a[_0x166ddc(0x207)],'reverse':_0x517f5a,'amount':formatResult(_0x35255a[_0x166ddc(0x2a4)],0x8),'filled':formatResult(_0x35255a[_0x166ddc(0x2a4)],0x8),'coinamount':formatResult(_0x17dd48,0x8),'price':formatResult(_0x35255a['price'],0x8)});let _0x44a17d;if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x2bc)&&_0x517f5a==![])_0x44a17d=-_0x35255a[_0x166ddc(0x1da)]*_0x35255a[_0x166ddc(0x1fc)];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x2bc)&&_0x517f5a==!![])_0x44a17d=_0x35255a[_0x166ddc(0x1da)];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x224)&&_0x517f5a==![])_0x44a17d=_0x35255a[_0x166ddc(0x1da)]*_0x35255a['price'];if(_0x35255a[_0x166ddc(0x207)]==_0x166ddc(0x224)&&_0x517f5a==!![])_0x44a17d=-_0x35255a[_0x166ddc(0x1da)];_0x33e4cf['push']({'date':_0x153d01,'coin':config[_0x166ddc(0x1bf)],'coinamount':formatResult(_0x44a17d,0x8)});});}_0x33e4cf[_0x47a8f5(0x1f4)]((_0x2b6419,_0x2be1b2)=>_0x2b6419[_0x47a8f5(0x253)]>_0x2be1b2['timestamp']?0x1:_0x2be1b2[_0x47a8f5(0x253)]>_0x2b6419[_0x47a8f5(0x253)]?-0x1:0x0),dbLogs[_0x47a8f5(0x225)](_0x47a8f5(0x28e))[_0x47a8f5(0x1c1)]()['write'](),_0x33e4cf[_0x47a8f5(0x1e2)](_0x4dcf40=>{const _0x1153ff=_0x47a8f5;let _0x24296b;_0x4dcf40[_0x1153ff(0x26f)]!=config[_0x1153ff(0x1bf)]&&(_0x24296b={'time':_0x4dcf40['timestamp'],'type':_0x1153ff(0x2a9),'event':_0x1153ff(0x237)+_0x4dcf40[_0x1153ff(0x22d)]+'\x20'+_0x4dcf40[_0x1153ff(0x207)]+'\x20#'+_0x4dcf40[_0x1153ff(0x1da)]+'\x20@'+_0x4dcf40[_0x1153ff(0x1fc)]},dbLogs[_0x1153ff(0x225)](_0x1153ff(0x28e))[_0x1153ff(0x294)](_0x24296b)[_0x1153ff(0x2a6)]());});const _0x52f3b3=fns[_0x47a8f5(0x270)]({'start':new Date(_0xf9424e['startdate']),'end':new Date()})['map'](_0x437480=>fns[_0x47a8f5(0x213)](_0x437480,'yyyy/MM/dd'));let _0x218fee=[];_0xf9424e[_0x47a8f5(0x2c1)]['forEach'](_0x21fdc4=>{const _0x17aef7=_0x47a8f5;if(!_0x21fdc4[_0x17aef7(0x212)]){_0x218fee[_0x21fdc4[_0x17aef7(0x26f)]]=[];let _0x256f27=_0x21fdc4[_0x17aef7(0x2d5)];_0x52f3b3[_0x17aef7(0x1e2)]((_0x527362,_0x207493)=>{const _0x534706=_0x17aef7;let _0x3ab82b=_0x33e4cf[_0x534706(0x292)](_0x4b3ed8=>_0x4b3ed8[_0x534706(0x26f)]==_0x21fdc4[_0x534706(0x26f)]&&_0x4b3ed8[_0x534706(0x2d4)]==_0x527362);if(_0x3ab82b[_0x534706(0x21d)]!=0x0){let _0x49d7b8=_0x3ab82b[_0x534706(0x1cc)]((_0x3d5863,_0x4d0adf)=>{const _0xe43d26=_0x534706;return _0x3d5863+=_0x4d0adf[_0xe43d26(0x218)],_0x3d5863;},0x0);_0x256f27+=_0x49d7b8;}_0x218fee[_0x21fdc4[_0x534706(0x26f)]][_0x527362]=_0x256f27;});}});const _0x49fa05=[..._0x34e472];_0x49fa05[_0x47a8f5(0x294)]({'coin':stablecoins[_0x47a8f5(0x2b5)][_0x47a8f5(0x26f)],'symbol':stablecoins[_0x47a8f5(0x2b5)][_0x47a8f5(0x22d)]}),_0x49fa05[_0x47a8f5(0x294)]({'coin':stablecoins[_0x47a8f5(0x1f6)][_0x47a8f5(0x26f)],'symbol':stablecoins[_0x47a8f5(0x1f6)][_0x47a8f5(0x22d)]});let _0x6d4371=[];for(const _0x36d333 of _0x49fa05){_0x6d4371[_0x36d333['coin']]=await getCloses(_0x36d333[_0x47a8f5(0x22d)],new Date(_0xf9424e[_0x47a8f5(0x2ab)]));}dbPerformance['get']('data')['remove']()[_0x47a8f5(0x2a6)](),_0x52f3b3[_0x47a8f5(0x1e2)]((_0x53ba5f,_0x1d015f)=>{const _0x4c5732=_0x47a8f5;let _0x296311,_0x567d7e=[];_0x1d015f==0x0?(_0xf9424e[_0x4c5732(0x2c1)][_0x4c5732(0x1e2)](_0x5268fe=>{const _0xb5278=_0x4c5732;!_0x5268fe[_0xb5278(0x212)]&&_0x567d7e['push']({'coin':_0x5268fe['coin'],'number':_0x5268fe[_0xb5278(0x2d5)],'price':_0x5268fe[_0xb5278(0x296)]});}),_0x296311={'date':_0x53ba5f,'eur':_0x6d4371[stablecoins[_0x4c5732(0x2b5)][_0x4c5732(0x26f)]][_0x1d015f],'usd':_0x6d4371[stablecoins['usd']['coin']][_0x1d015f],'coins':_0x567d7e}):(_0xf9424e[_0x4c5732(0x2c1)][_0x4c5732(0x1e2)](_0x3e739a=>{const _0x1e6102=_0x4c5732;!_0x3e739a['excluded']&&_0x567d7e['push']({'coin':_0x3e739a[_0x1e6102(0x26f)],'number':_0x218fee[_0x3e739a['coin']][_0x53ba5f],'price':_0x3e739a[_0x1e6102(0x26f)]==config[_0x1e6102(0x1bf)]?0x1:_0x6d4371[_0x3e739a[_0x1e6102(0x26f)]][_0x1d015f]});}),_0x296311={'date':_0x53ba5f,'eur':_0x6d4371[stablecoins[_0x4c5732(0x2b5)][_0x4c5732(0x26f)]][_0x1d015f],'usd':_0x6d4371[stablecoins[_0x4c5732(0x1f6)]['coin']][_0x1d015f],'coins':_0x567d7e}),dbPerformance[_0x4c5732(0x225)]('data')[_0x4c5732(0x294)](_0x296311)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x37d0ac of _0x33e4cf){_0x37d0ac[_0x47a8f5(0x26f)]!=config[_0x47a8f5(0x1bf)]&&await updateCoinResults(_0x37d0ac);}logHistory(_0x47a8f5(0x268),_0x47a8f5(0x262));}catch(_0x26e42b){await handleError(_0x26e42b,_0x47a8f5(0x1dd));}}async function getCloses(_0x129b21,_0x104b95,_0x5f989d=undefined){const _0x361bc7=_0x26cd5e,_0x3a6a25='1d';let _0x2b85ba,_0x4c8ce1;const _0x5efbc1=fns[_0x361bc7(0x23f)](new Date(),_0x104b95)+0x1;try{const _0x3371bb=exchange[_0x361bc7(0x2b6)]()-_0x5efbc1*0x18*0xe10*0x3e8;_0x2b85ba=await exchange[_0x361bc7(0x282)](_0x129b21,_0x3a6a25,_0x3371bb,_0x5f989d),_0x4c8ce1=await exchange[_0x361bc7(0x1fe)](_0x129b21);}catch(_0x2e38b6){await handleError(_0x2e38b6,_0x361bc7(0x1d5));}let _0x1edf25=ohlcvToCloses(_0x2b85ba);return _0x1edf25[_0x361bc7(0x294)](_0x4c8ce1[_0x129b21][_0x361bc7(0x222)]),_0x1edf25;}function ohlcvToCloses(_0x7d7027){let _0x2adcf3=[];return _0x7d7027['forEach'](function(_0x4ec00c){const _0x333eee=_0x1be9;_0x2adcf3[_0x333eee(0x294)](_0x4ec00c[0x4]);}),_0x2adcf3;}function getConfiguration(_0x30bf09){const _0x48b88a=_0x26cd5e;let _0x2cb92f=dbConfig[_0x48b88a(0x225)](_0x48b88a(0x25f))[_0x48b88a(0x221)]({'botID':_0x30bf09})[_0x48b88a(0x1d4)]();if(_0x2cb92f){let _0x7f32da=![];!_0x2cb92f['exchange']&&(_0x2cb92f={..._0x2cb92f,'exchange':_0x48b88a(0x226)},_0x7f32da=!![]),!_0x2cb92f[_0x48b88a(0x1bf)]&&(_0x2cb92f={..._0x2cb92f,'basecoin':_0x48b88a(0x1c8)},_0x7f32da=!![]),!_0x2cb92f[_0x48b88a(0x280)]&&(_0x2cb92f={..._0x2cb92f,'ordertype':_0x48b88a(0x230)},_0x7f32da=!![]),!_0x2cb92f[_0x48b88a(0x27f)]&&(_0x2cb92f={..._0x2cb92f,'timeout':0x14},_0x7f32da=!![]),!_0x2cb92f[_0x48b88a(0x1ed)]&&(_0x2cb92f={..._0x2cb92f,'emojibuy':''},_0x7f32da=!![]),!_0x2cb92f[_0x48b88a(0x256)]&&(_0x2cb92f={..._0x2cb92f,'emojisell':''},_0x7f32da=!![]),!_0x2cb92f['showname']&&(_0x2cb92f={..._0x2cb92f,'showname':![]},_0x7f32da=!![]),_0x7f32da&&(_0x2cb92f={'botID':_0x2cb92f['botID'],'exchange':_0x2cb92f[_0x48b88a(0x26a)],'apiKey':_0x2cb92f[_0x48b88a(0x28b)],'apiSecret':_0x2cb92f[_0x48b88a(0x2ae)],'basecoin':_0x2cb92f[_0x48b88a(0x1bf)],'botname':_0x2cb92f[_0x48b88a(0x228)],'showname':_0x2cb92f[_0x48b88a(0x205)],'threshold':_0x2cb92f[_0x48b88a(0x2af)],'ordertype':_0x2cb92f[_0x48b88a(0x280)],'timeout':_0x2cb92f[_0x48b88a(0x27f)],'startdate':_0x2cb92f['startdate'],'recreate':_0x2cb92f['recreate'],'timeshift':_0x2cb92f['timeshift'],'headless':_0x2cb92f[_0x48b88a(0x23a)],'cooldown':_0x2cb92f['cooldown'],'emojibuy':_0x2cb92f[_0x48b88a(0x1ed)],'emojisell':_0x2cb92f[_0x48b88a(0x256)],'portfolio':_0x2cb92f[_0x48b88a(0x2c1)]},dbConfig['get']('bot')['remove']()['write'](),dbConfig[_0x48b88a(0x225)](_0x48b88a(0x25f))[_0x48b88a(0x294)](_0x2cb92f)[_0x48b88a(0x2a6)]());}else _0x2cb92f={'botID':_0x30bf09,'exchange':_0x48b88a(0x226),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x48b88a(0x1df)+_0x30bf09,'showname':![],'threshold':'3','ordertype':_0x48b88a(0x230),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2cb92f;}function emittedConfiguration(){const _0x4dcd06=_0x26cd5e;let _0x1b6917;return config[_0x4dcd06(0x28b)]==''?_0x1b6917=config:_0x1b6917={...config,'apiKey':_0x4dcd06(0x223),'apiSecret':_0x4dcd06(0x223)},_0x1b6917;}function getSettings(){const _0x5ecc7c=_0x26cd5e;return dbSettings[_0x5ecc7c(0x225)]('settings')[_0x5ecc7c(0x1d4)]();}function getSecure(){const _0x10d827=_0x26cd5e;return dbSecure[_0x10d827(0x225)](_0x10d827(0x1ca))['value']()||{};}function updateTimeshift(_0x8fa73f){const _0x2c41d6=_0x26cd5e;let _0x26ddbc=dbConfig[_0x2c41d6(0x225)](_0x2c41d6(0x25f))[_0x2c41d6(0x221)]({'botID':botID})['value']();_0x26ddbc&&dbConfig['get']('bot')[_0x2c41d6(0x221)]({'botID':botID})['assign']({'timeshift':_0x8fa73f})[_0x2c41d6(0x2a6)](),config[_0x2c41d6(0x22f)]=_0x8fa73f,proxyEmit(_0x2c41d6(0x27d),emittedConfiguration());}async function storeConfiguration(_0x5e9006){const _0x375314=_0x26cd5e;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x18cf6a=dbConfig['get'](_0x375314(0x25f))['find']({'botID':botID})['value']();_0x5e9006={..._0x5e9006,'apiKey':crypt['decrypt'](secure[_0x375314(0x1cb)],_0x5e9006[_0x375314(0x28b)])[_0x375314(0x1e1)],'apiSecret':crypt[_0x375314(0x21a)](secure['privateKey'],_0x5e9006[_0x375314(0x2ae)])['message']};if(_0x18cf6a){if(_0x5e9006[_0x375314(0x28b)]=='************')_0x5e9006[_0x375314(0x28b)]=config[_0x375314(0x28b)];if(_0x5e9006['apiSecret']==_0x375314(0x223))_0x5e9006[_0x375314(0x2ae)]=config[_0x375314(0x2ae)];dbConfig[_0x375314(0x225)](_0x375314(0x25f))['find']({'botID':botID})[_0x375314(0x1c4)](_0x5e9006)[_0x375314(0x2a6)]();}else dbConfig['get'](_0x375314(0x25f))[_0x375314(0x294)](_0x5e9006)[_0x375314(0x2a6)](),process[_0x375314(0x248)]({'status':_0x375314(0x2b9),'live':'running'});config={..._0x5e9006};if(config[_0x375314(0x22e)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x5e9006[_0x375314(0x228)]}),proxyEmit(_0x375314(0x2c2)),reset();}async function storeHeadless(_0x51c3c0){const _0x491324=_0x26cd5e,_0x513dc1={...config,'headless':_0x51c3c0[_0x491324(0x23a)]};let _0x213ea7=dbConfig[_0x491324(0x225)]('bot')['find']({'botID':botID})[_0x491324(0x1d4)]();_0x213ea7&&dbConfig[_0x491324(0x225)]('bot')['find']({'botID':botID})[_0x491324(0x1c4)](_0x513dc1)['write'](),config={..._0x513dc1},proxyEmit(_0x491324(0x27d),emittedConfiguration());}function noslash(_0x1a3ad0){const _0x4efa25=_0x26cd5e;return _0x1a3ad0[_0x4efa25(0x29a)]('/','');}function updateNumberCoins(_0x2bd358){const _0x48736c=_0x26cd5e;_0x2bd358['eventType']&&_0x2bd358[_0x48736c(0x29c)]==_0x48736c(0x1cf)&&_0x2bd358['balances'][_0x48736c(0x1e2)](_0x4bcb87=>{const _0x5ef4fb=_0x48736c;let _0x22c27d=currentCoins[_0x5ef4fb(0x221)](_0x38cc3d=>_0x38cc3d[_0x5ef4fb(0x26f)]==_0x4bcb87[_0x5ef4fb(0x2be)]),_0x13db59=config[_0x5ef4fb(0x2c1)][_0x5ef4fb(0x221)](_0x5c525a=>_0x5c525a[_0x5ef4fb(0x26f)]==_0x4bcb87['asset']);if(_0x22c27d&&_0x13db59)_0x22c27d[_0x5ef4fb(0x25b)]=Number(_0x4bcb87[_0x5ef4fb(0x1ec)])+(_0x13db59[_0x5ef4fb(0x245)]||0x0);});if(_0x2bd358[_0x48736c(0x29c)]&&_0x2bd358[_0x48736c(0x29c)]==_0x48736c(0x28c)){if(_0x2bd358[_0x48736c(0x1f9)]==_0x48736c(0x297)&&_0x2bd358[_0x48736c(0x257)]==_0x48736c(0x238)){if(lastOrders)lastOrders[_0x48736c(0x1e2)](_0x42dea3=>{const _0x481ae1=_0x48736c;if(_0x42dea3[_0x481ae1(0x2b0)]==_0x2bd358[_0x481ae1(0x2b0)]){if(_0x42dea3[_0x481ae1(0x241)])_0x42dea3[_0x481ae1(0x2a4)]=_0x2bd358[_0x481ae1(0x239)]*_0x42dea3[_0x481ae1(0x1fc)];else _0x42dea3['filled']=_0x2bd358[_0x481ae1(0x239)];}});}}}async function getCoins(_0x4a9453=!![],_0x1b9838=config[_0x26cd5e(0x1bf)]){const _0x4e0de7=_0x26cd5e;let _0x42fc9b,_0x3bc794=[],_0x2545bf=[],_0xd806d9=[];try{_0x42fc9b=await exchange['fetchBalance'](),mybalances=_0x42fc9b[_0x4e0de7(0x2ad)];if(!_0x4a9453)for(const [_0x301eb2,_0x4a69b2]of Object['entries'](mybalances)){_0xd806d9[_0x4e0de7(0x294)](_0x301eb2);}else config[_0x4e0de7(0x2c1)][_0x4e0de7(0x1e2)](_0x24d5f7=>{const _0x1ea1fa=_0x4e0de7;if(!_0x24d5f7[_0x1ea1fa(0x212)])_0xd806d9[_0x1ea1fa(0x294)](_0x24d5f7[_0x1ea1fa(0x26f)]);});if(_0x1b9838=='')for(const [_0x410fe9,_0x5555ba]of Object['entries'](mybalances)){_0x5555ba[_0x4e0de7(0x2c7)]()!=0x0&&_0x2545bf['push']({'coin':_0x410fe9});}else for(const [_0x36b93b,_0x946871]of Object[_0x4e0de7(0x259)](mybalances)){if(_0xd806d9[_0x4e0de7(0x255)](_0x36b93b)){const _0x1ba78e=config['portfolio']['find'](_0xa9562b=>_0xa9562b[_0x4e0de7(0x26f)]==_0x36b93b);if((_0x946871['toString']()!=0x0||_0x1ba78e)&&(allSymbols['includes'](_0x36b93b+'/'+_0x1b9838)||_0x36b93b==_0x1b9838))_0x2545bf[_0x4e0de7(0x294)]({'coin':_0x36b93b,'symbol':_0x36b93b+'/'+_0x1b9838,'reverse':![],'number':_0x946871+(_0x1ba78e[_0x4e0de7(0x245)]||0x0)}),_0x36b93b!=_0x1b9838&&_0x3bc794[_0x4e0de7(0x294)](_0x36b93b+'/'+_0x1b9838);else(_0x946871[_0x4e0de7(0x2c7)]()!=0x0||_0x1ba78e)&&allSymbols[_0x4e0de7(0x255)](_0x1b9838+'/'+_0x36b93b)&&(_0x2545bf[_0x4e0de7(0x294)]({'coin':_0x36b93b,'symbol':_0x1b9838+'/'+_0x36b93b,'reverse':!![],'number':_0x946871+(_0x1ba78e[_0x4e0de7(0x245)]||0x0)}),_0x36b93b!=_0x1b9838&&_0x3bc794[_0x4e0de7(0x294)](_0x1b9838+'/'+_0x36b93b));}}}catch(_0x47b7bb){if(!_0x4a9453){if(_0x47b7bb[_0x4e0de7(0x2c7)]()[_0x4e0de7(0x255)](_0x4e0de7(0x22c)))return logHistory(_0x4e0de7(0x246),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x47b7bb['toString']()[_0x4e0de7(0x255)](_0x4e0de7(0x1db)))return logHistory(_0x4e0de7(0x246),_0x4e0de7(0x1d1)),![];else{if(_0x47b7bb[_0x4e0de7(0x2c7)]()[_0x4e0de7(0x255)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x4e0de7(0x246),_0x4e0de7(0x28a)),![];else await handleError(_0x47b7bb,_0x4e0de7(0x2c6));}}}else await handleError(_0x47b7bb,_0x4e0de7(0x2c6));}return _0x2545bf;}async function getPortfolio(_0x2a3832){const _0x317081=_0x26cd5e;let _0x5607a8=[],_0x3457c8=[],_0x9b90b8,_0x213a4e=[],_0x4b5a58,_0x1162dd;_0x2a3832[_0x317081(0x28b)]===_0x317081(0x223)||_0x2a3832[_0x317081(0x2ae)]===_0x317081(0x223)?(_0x4b5a58=config[_0x317081(0x28b)],_0x1162dd=config[_0x317081(0x2ae)]):(_0x4b5a58=_0x2a3832['apiKey'],_0x1162dd=_0x2a3832[_0x317081(0x2ae)]);await initExchange(_0x4b5a58,_0x1162dd);let _0x3ee17b=await loadSymbols();if(_0x3ee17b){_0x213a4e=await getCoins(![],_0x2a3832[_0x317081(0x1bf)]);if(_0x213a4e===![])proxyEmit(_0x317081(0x2c1),![]);else{if(_0x2a3832[_0x317081(0x1bf)]=='')proxyEmit(_0x317081(0x2c1),_0x213a4e);else{_0x213a4e[_0x317081(0x1e2)](_0x37c37b=>{const _0xfd1068=_0x317081;_0x5607a8[_0xfd1068(0x294)](_0x37c37b[_0xfd1068(0x22d)]);});try{_0x3457c8=await exchange[_0x317081(0x1fe)](_0x5607a8);}catch(_0x4cea8e){await handleError(_0x4cea8e,_0x317081(0x252));}_0x213a4e[_0x317081(0x1e2)](_0x18140d=>{const _0x3b0b2e=_0x317081;_0x18140d[_0x3b0b2e(0x26f)]!=_0x2a3832[_0x3b0b2e(0x1bf)]?_0x9b90b8=_0x18140d[_0x3b0b2e(0x241)]?0x1/_0x3457c8[_0x18140d[_0x3b0b2e(0x22d)]][_0x3b0b2e(0x222)]:_0x3457c8[_0x18140d[_0x3b0b2e(0x22d)]]['last']:_0x9b90b8=0x1,_0x18140d[_0x3b0b2e(0x1fc)]=formatResult(_0x9b90b8,0x8);}),proxyEmit('portfolio',_0x213a4e);}}}else proxyEmit(_0x317081(0x2c1),![]);}function checkMinimums(_0x230535){const _0x83e2a1=_0x26cd5e;let _0x1702a5=!![];const _0x6af27a=!_0x230535['reverse']?markets[_0x230535[_0x83e2a1(0x22d)]]['limits']['amount'][_0x83e2a1(0x1de)]:markets[_0x230535['symbol']][_0x83e2a1(0x251)][_0x83e2a1(0x283)][_0x83e2a1(0x1de)],_0x1111d0=!_0x230535[_0x83e2a1(0x241)]?markets[_0x230535[_0x83e2a1(0x22d)]][_0x83e2a1(0x251)][_0x83e2a1(0x283)][_0x83e2a1(0x1de)]:markets[_0x230535[_0x83e2a1(0x22d)]][_0x83e2a1(0x251)]['amount'][_0x83e2a1(0x1de)];if(Math[_0x83e2a1(0x258)](_0x230535[_0x83e2a1(0x26e)])<_0x6af27a)_0x1702a5=![];if(Math[_0x83e2a1(0x258)](_0x230535[_0x83e2a1(0x26e)])*_0x230535[_0x83e2a1(0x222)]<_0x1111d0)_0x1702a5=![];return _0x1702a5;}async function getBalances(){const _0x4215c9=_0x26cd5e;let _0x361ded=0x0,_0x2c967b;const _0x233629=config[_0x4215c9(0x2af)];currentCoins[_0x4215c9(0x1e2)](_0xf43327=>{const _0x450209=_0x4215c9;if(_0xf43327[_0x450209(0x26f)]!=config[_0x450209(0x1bf)]){let _0x504e87=global['ticker'][noslash(_0xf43327[_0x450209(0x22d)])];_0x2c967b=_0xf43327[_0x450209(0x241)]?0x1/_0x504e87:_0x504e87;}else _0x2c967b=0x1;let _0x1d86e2=_0xf43327[_0x450209(0x25b)]*_0x2c967b;_0x361ded+=_0x1d86e2,_0xf43327[_0x450209(0x222)]=formatResult(Number(_0x2c967b),0x8),_0xf43327[_0x450209(0x1d4)]=_0x1d86e2;}),currentCoins[_0x4215c9(0x1e2)](_0x47fd13=>{const _0x572a63=_0x4215c9;let _0x5722e8=config[_0x572a63(0x2c1)]['find'](_0x1c52ab=>_0x1c52ab[_0x572a63(0x26f)]==_0x47fd13[_0x572a63(0x26f)]),_0x10b315=Number(_0x5722e8[_0x572a63(0x233)]),_0x5400aa=_0x47fd13[_0x572a63(0x1d4)]/_0x361ded*0x64,_0x25261a=_0x10b315*_0x361ded/0x64/_0x47fd13[_0x572a63(0x222)]-_0x47fd13[_0x572a63(0x25b)];_0x47fd13[_0x572a63(0x233)]=formatResult(_0x5400aa,0x3),_0x47fd13[_0x572a63(0x291)]=formatResult(_0x10b315,0x3),_0x47fd13['trade']=formatResult(_0x25261a,0x8),_0x47fd13[_0x572a63(0x207)]='',_0x47fd13[_0x572a63(0x2b2)]='';if(_0x47fd13[_0x572a63(0x26f)]!=config['basecoin']){if(_0x47fd13['distribution']>_0x10b315)_0x47fd13[_0x572a63(0x207)]=_0x572a63(0x224),_0x47fd13[_0x572a63(0x2b2)]=checkMinimums(_0x47fd13);else _0x47fd13['distribution']<_0x10b315&&(_0x47fd13[_0x572a63(0x207)]='buy',_0x47fd13[_0x572a63(0x2b2)]=checkMinimums(_0x47fd13));}_0x47fd13[_0x572a63(0x1f1)]=_0x47fd13['distribution']/_0x47fd13[_0x572a63(0x291)]-0x1;}),currentCoins[_0x4215c9(0x1f4)]((_0x2db9b9,_0x56cbff)=>_0x2db9b9[_0x4215c9(0x1f1)]<_0x56cbff[_0x4215c9(0x1f1)]?0x1:_0x56cbff[_0x4215c9(0x1f1)]<_0x2db9b9[_0x4215c9(0x1f1)]?-0x1:0x0);const _0x1e0094=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1e0094[_0x4215c9(0x2b5)],'usd':_0x1e0094[_0x4215c9(0x1f6)],'portfolio':JSON[_0x4215c9(0x23d)](currentCoins),'threshold':_0x233629},proxyEmit(_0x4215c9(0x276),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4215c9(0x23a)])headlessMode({'portfolio':currentCoins,'threshold':_0x233629});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x20eb9f=_0x26cd5e;if(!lastBalances)return;let _0x3c57e6=await getStartingBalances(![]),_0x28c414=[],_0x2e877f;JSON[_0x20eb9f(0x200)](lastBalances[_0x20eb9f(0x2c1)])[_0x20eb9f(0x1e2)](_0x1056ad=>{const _0x5c9a42=_0x20eb9f;let _0x5a5353={'coin':_0x1056ad[_0x5c9a42(0x26f)],'number':_0x1056ad[_0x5c9a42(0x25b)],'price':_0x1056ad[_0x5c9a42(0x222)]};_0x28c414['push'](_0x5a5353);});const _0x220baa=await getFiat();_0x2e877f={'date':lastBalances[_0x20eb9f(0x1c2)][_0x20eb9f(0x1be)]('\x20')[0x0],'eur':_0x220baa[_0x20eb9f(0x2b5)],'usd':_0x220baa[_0x20eb9f(0x1f6)],'coins':_0x28c414};let _0x522e86=dbPerformance['get'](_0x20eb9f(0x264))[_0x20eb9f(0x221)]({'date':_0x2e877f[_0x20eb9f(0x2d4)]})[_0x20eb9f(0x1d4)]();_0x522e86?dbPerformance['get'](_0x20eb9f(0x264))[_0x20eb9f(0x221)]({'date':_0x2e877f[_0x20eb9f(0x2d4)]})[_0x20eb9f(0x1c4)](_0x2e877f)['write']():dbPerformance['get'](_0x20eb9f(0x264))[_0x20eb9f(0x294)](_0x2e877f)[_0x20eb9f(0x2a6)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x430106=_0x26cd5e;if(dbPerformance[_0x430106(0x1fd)](_0x430106(0x264))[_0x430106(0x1d4)]()){let _0xed18d5=dbPerformance[_0x430106(0x225)](_0x430106(0x264))[_0x430106(0x2d3)](_0x430106(0x2d4))['value']();proxyEmit(_0x430106(0x214),_0xed18d5),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x3318c1=!![]){const _0x111120=_0x26cd5e;let _0x4a4f1c=dbPerformance['get'](_0x111120(0x264))[_0x111120(0x221)]({'date':config[_0x111120(0x2ab)]})[_0x111120(0x1d4)]();config[_0x111120(0x28b)]!=''&&!_0x4a4f1c&&(await setStartDatePerformance(config),_0x4a4f1c=dbPerformance[_0x111120(0x225)](_0x111120(0x264))[_0x111120(0x221)]({'date':config['startdate']})[_0x111120(0x1d4)]());if(config[_0x111120(0x28b)]==''||!_0x4a4f1c)return{};let _0x458931=0x0,_0x25de09=0x0,_0x1c30bd=0x0,_0x2dac87=[],_0xbfb03d=0x0;config[_0x111120(0x2c1)][_0x111120(0x1e2)](_0x5a0987=>{const _0x50bfd7=_0x111120;if(!_0x5a0987['excluded']){_0x2dac87[_0xbfb03d]={'coin':_0x5a0987['coin'],'symbol':_0x5a0987[_0x50bfd7(0x22d)],'number':_0x5a0987[_0x50bfd7(0x2d5)],'price':_0x5a0987[_0x50bfd7(0x296)]},_0x458931+=_0x5a0987['startprice']*_0x5a0987[_0x50bfd7(0x2d5)];if(config[_0x50bfd7(0x1bf)]==_0x50bfd7(0x1c8))_0x25de09+=_0x5a0987['startprice']*_0x5a0987[_0x50bfd7(0x2d5)]*_0x4a4f1c[_0x50bfd7(0x2b5)],_0x1c30bd+=_0x5a0987[_0x50bfd7(0x296)]*_0x5a0987[_0x50bfd7(0x2d5)]*_0x4a4f1c[_0x50bfd7(0x1f6)];else{if(config[_0x50bfd7(0x1bf)]==_0x50bfd7(0x1f3)||config[_0x50bfd7(0x1bf)]==_0x50bfd7(0x273)||config[_0x50bfd7(0x1bf)]==_0x50bfd7(0x24d))_0x25de09+=_0x5a0987[_0x50bfd7(0x296)]*_0x5a0987[_0x50bfd7(0x2d5)]*_0x4a4f1c[_0x50bfd7(0x2b5)]/_0x4a4f1c[_0x50bfd7(0x1f6)],_0x1c30bd+=_0x5a0987['startprice']*_0x5a0987[_0x50bfd7(0x2d5)];else config[_0x50bfd7(0x1bf)]==_0x50bfd7(0x2a2)&&(_0x25de09+=_0x5a0987[_0x50bfd7(0x296)]*_0x5a0987[_0x50bfd7(0x2d5)],_0x1c30bd+=_0x5a0987[_0x50bfd7(0x296)]*_0x5a0987[_0x50bfd7(0x2d5)]*_0x4a4f1c[_0x50bfd7(0x1f6)]/_0x4a4f1c['eur']);}_0xbfb03d++;}});let _0x5e7a45={'basecoin':_0x458931,'eur':_0x25de09,'usd':_0x1c30bd,'coins':_0x2dac87};if(_0x3318c1)proxyEmit('starting-balances',_0x5e7a45);return _0x5e7a45;}function headlessMode(_0x4d6644){const _0x15d991=_0x26cd5e;let _0x2e90b6=_0x4d6644[_0x15d991(0x2c1)],_0x1f97e3=_0x4d6644[_0x15d991(0x2af)],_0x2e8540=[];for(let _0x8170f8 of _0x2e90b6){if(_0x8170f8[_0x15d991(0x26f)]!=config[_0x15d991(0x1bf)]){if(_0x8170f8[_0x15d991(0x233)]/_0x8170f8['target']-0x1>=_0x1f97e3/0x64){if(_0x8170f8[_0x15d991(0x2b2)])_0x2e8540[_0x15d991(0x294)](_0x8170f8);}else{if(_0x8170f8[_0x15d991(0x233)]/_0x8170f8[_0x15d991(0x291)]-0x1<=-_0x1f97e3/0x64){if(_0x8170f8[_0x15d991(0x2b2)])_0x2e8540[_0x15d991(0x294)](_0x8170f8);}}}}_0x2e8540[_0x15d991(0x21d)]>0x0&&placeOrder(_0x2e8540);}function symbolToCoin(_0x1556f3){const _0x4b23f4=_0x26cd5e;let _0x55601b;if(_0x1556f3[_0x4b23f4(0x255)]('/'+config[_0x4b23f4(0x1bf)]))_0x55601b=_0x1556f3['replace']('/'+config[_0x4b23f4(0x1bf)],'');if(_0x1556f3[_0x4b23f4(0x255)](config[_0x4b23f4(0x1bf)]+'/'))_0x55601b=_0x1556f3[_0x4b23f4(0x29a)](config[_0x4b23f4(0x1bf)]+'/','');return _0x55601b;}async function validateOrders(_0x4e21bf=0x0){const _0x3e74f8=_0x26cd5e;let _0x8f883=[],_0x400b92=config[_0x3e74f8(0x280)]==_0x3e74f8(0x230)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3e74f8(0x27f)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x2d5831=>{const _0x2315e7=_0x3e74f8;let _0x5f44cd=previousCoins[_0x2315e7(0x221)](_0x5a2e91=>_0x5a2e91[_0x2315e7(0x26f)]==symbolToCoin(_0x2d5831['symbol'])),_0x1fd3e7=currentCoins[_0x2315e7(0x221)](_0xe4dedf=>_0xe4dedf[_0x2315e7(0x26f)]==symbolToCoin(_0x2d5831[_0x2315e7(0x22d)])),_0x25b398,_0x5da547;_0x2d5831[_0x2315e7(0x207)]==_0x2315e7(0x2bc)&&!_0x2d5831[_0x2315e7(0x241)]||_0x2d5831[_0x2315e7(0x207)]=='sell'&&_0x2d5831[_0x2315e7(0x241)]?(_0x25b398=_0x5f44cd[_0x2315e7(0x25b)]+0.9*_0x2d5831[_0x2315e7(0x2a4)],_0x5da547=_0x5f44cd[_0x2315e7(0x25b)]+1.1*_0x2d5831[_0x2315e7(0x2a4)]):(_0x25b398=_0x5f44cd[_0x2315e7(0x25b)]-1.1*_0x2d5831[_0x2315e7(0x2a4)],_0x5da547=_0x5f44cd['number']-0.9*_0x2d5831['filled']);const _0x439b82=_0x2d5831[_0x2315e7(0x2a4)]!=0x0&&_0x1fd3e7['number']>=_0x25b398&&_0x1fd3e7['number']<=_0x5da547;_0x8f883[_0x2315e7(0x294)](_0x439b82);if(_0x439b82&&config[_0x2315e7(0x280)]!=_0x2315e7(0x230)){if(_0x2d5831['reverse'])logHistory('order','Order\x20filled:\x20'+_0x2d5831['symbol']+'\x20'+_0x2d5831[_0x2315e7(0x207)]+'\x20#'+formatResult(_0x2d5831[_0x2315e7(0x2a4)]/_0x2d5831[_0x2315e7(0x1fc)],0x8)+'\x20@'+formatResult(_0x2d5831[_0x2315e7(0x1fc)],0x8));else logHistory('order',_0x2315e7(0x204)+_0x2d5831[_0x2315e7(0x22d)]+'\x20'+_0x2d5831[_0x2315e7(0x207)]+'\x20#'+formatResult(_0x2d5831[_0x2315e7(0x2a4)],0x8)+'\x20@'+formatResult(_0x2d5831[_0x2315e7(0x1fc)],0x8));}}),_0x8f883[_0x3e74f8(0x1e2)]((_0x32acda,_0x5dda6b)=>{if(_0x32acda)lastOrders['splice'](_0x5dda6b,0x1);});if(_0x4e21bf<_0x400b92&&_0x8f883[_0x3e74f8(0x255)](![])){if(_0x4e21bf==0x0){config[_0x3e74f8(0x280)]==_0x3e74f8(0x230)?logHistory(_0x3e74f8(0x246),_0x3e74f8(0x1c5)):logHistory(_0x3e74f8(0x246),_0x3e74f8(0x266));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4e21bf);},0xa*0x3e8);}else{(_0x4e21bf==0x1||_0x4e21bf==Math[_0x3e74f8(0x278)](_0x400b92/0x2)||_0x4e21bf==_0x400b92-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4e21bf);},validateOrderInterval);}}else{lockOrders=![];if(_0x4e21bf>0x0&&!_0x8f883['includes'](![]))config['ordertype']==_0x3e74f8(0x230)?logHistory(_0x3e74f8(0x268),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x3e74f8(0x268),_0x3e74f8(0x22b));else _0x4e21bf>0x0&&_0x8f883['includes'](![])&&(config[_0x3e74f8(0x280)]==_0x3e74f8(0x230)?logHistory(_0x3e74f8(0x268),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3e74f8(0x278)](_0x400b92*validateOrderInterval/0xea60)+_0x3e74f8(0x279)):(lastOrders[_0x3e74f8(0x1e2)](async _0x406440=>{const _0x1b96b0=_0x3e74f8;try{const _0x55218e=await exchange[_0x1b96b0(0x20b)](_0x406440[_0x1b96b0(0x2b0)],_0x406440[_0x1b96b0(0x22d)]);}catch(_0x5619ac){if(_0x5619ac[_0x1b96b0(0x2c7)]()['includes'](_0x1b96b0(0x26b))){}else await handleError(_0x5619ac,_0x1b96b0(0x24b));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x400b92*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x36f900=_0x26cd5e;dbCoinResults[_0x36f900(0x225)](_0x36f900(0x234))[_0x36f900(0x1c1)]()['write']();let _0x377e6b=await getStartingBalances(![]);_0x377e6b['coins'][_0x36f900(0x1e2)](_0x4fdf09=>{const _0x1da3c8=_0x36f900,_0x6e7b58=_0x4fdf09[_0x1da3c8(0x22d)][_0x1da3c8(0x255)](config[_0x1da3c8(0x1bf)]+'/');if(_0x4fdf09['coin']!=config[_0x1da3c8(0x1bf)]){let _0x51a9ed={'coin':_0x4fdf09['coin'],'number':_0x4fdf09['number'],'breakeven':_0x4fdf09['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1da3c8(0x225)]('coins')[_0x1da3c8(0x294)](_0x51a9ed)[_0x1da3c8(0x2a6)]();}});}async function updateCoinResults(_0x2937f7){const _0xd544f7=_0x26cd5e;let _0x17675f,_0x9bd343,_0x1a6ce4,_0x2e0a60,_0x12ce0,_0x41be17,_0x1c6a8c=dbCoinResults['get'](_0xd544f7(0x234))[_0xd544f7(0x221)]({'coin':_0x2937f7[_0xd544f7(0x26f)]})[_0xd544f7(0x1d4)]();if(!_0x1c6a8c)return;if(_0x2937f7['fee']&&_0x2937f7['fee'][_0xd544f7(0x2ba)]==config[_0xd544f7(0x1bf)])_0x17675f=_0x2937f7['fee']['cost'];else{if(_0x2937f7[_0xd544f7(0x242)]&&_0x2937f7[_0xd544f7(0x242)]['currency']==_0xd544f7(0x2b3))_0x17675f=_0x2937f7['fee'][_0xd544f7(0x283)]*global[_0xd544f7(0x240)][_0xd544f7(0x2b3)+config[_0xd544f7(0x1bf)]];else _0x17675f=0.001*_0x2937f7[_0xd544f7(0x2a4)];}const _0x1da1d2=_0x2937f7[_0xd544f7(0x22d)]['includes'](config['basecoin']+'/');_0x1da1d2&&(_0x41be17={'coin':_0x2937f7[_0xd544f7(0x26f)],'symbol':_0x2937f7[_0xd544f7(0x22d)],'filled':_0x2937f7['filled']*_0x2937f7[_0xd544f7(0x1fc)],'side':_0x2937f7[_0xd544f7(0x207)]==_0xd544f7(0x224)?_0xd544f7(0x2bc):'sell','price':0x1/_0x2937f7['price']},_0x2937f7={..._0x41be17});_0x2937f7[_0xd544f7(0x207)]==_0xd544f7(0x2bc)?_0x1a6ce4=(_0x1c6a8c[_0xd544f7(0x24c)]*_0x1c6a8c[_0xd544f7(0x25b)]+_0x2937f7[_0xd544f7(0x1fc)]*_0x2937f7['filled'])/(_0x1c6a8c['number']+_0x2937f7[_0xd544f7(0x2a4)]):_0x1a6ce4=(_0x1c6a8c[_0xd544f7(0x24c)]*_0x1c6a8c['number']-_0x2937f7['price']*_0x2937f7[_0xd544f7(0x2a4)])/(_0x1c6a8c['number']-_0x2937f7['filled']);_0x2937f7['side']==_0xd544f7(0x2bc)?_0x2e0a60=_0x1c6a8c['realized']:_0x2e0a60=_0x1c6a8c['realized']+(_0x2937f7['price']-_0x1c6a8c[_0xd544f7(0x24c)])*_0x2937f7[_0xd544f7(0x2a4)];_0x9bd343=_0x2937f7['side']=='sell'?_0x1c6a8c[_0xd544f7(0x25b)]-_0x2937f7['filled']:_0x1c6a8c['number']+_0x2937f7['filled'],_0x12ce0=(_0x2937f7[_0xd544f7(0x1fc)]-_0x1a6ce4)*_0x9bd343;let _0x1f321d={'coin':_0x2937f7['coin'],'number':_0x9bd343,'breakeven':formatResult(_0x1a6ce4,0x8),'realized':formatResult(_0x2e0a60,0x8),'unrealized':formatResult(_0x12ce0,0x8),'fees':formatResult(_0x1c6a8c['fees']+_0x17675f,0x8),'sells':_0x2937f7[_0xd544f7(0x207)]==_0xd544f7(0x224)?_0x1c6a8c[_0xd544f7(0x2d7)]+0x1:_0x1c6a8c[_0xd544f7(0x2d7)],'buys':_0x2937f7['side']==_0xd544f7(0x2bc)?_0x1c6a8c[_0xd544f7(0x229)]+0x1:_0x1c6a8c[_0xd544f7(0x229)]};dbCoinResults[_0xd544f7(0x225)](_0xd544f7(0x234))[_0xd544f7(0x221)]({'coin':_0x2937f7['coin']})[_0xd544f7(0x1c4)](_0x1f321d)['write']();}async function placeOrder(_0x2b8b6f){const _0x21ba88=_0x26cd5e,_0x467736=config[_0x21ba88(0x280)]==_0x21ba88(0x230)?_0x21ba88(0x230):_0x21ba88(0x1e7);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x21ba88(0x200)](JSON[_0x21ba88(0x23d)](currentCoins));for(const _0x2fcc44 of _0x2b8b6f){let _0x28e0f4,_0x382327,_0x4e8297,_0x2f7537,_0x46598e,_0x165a7f=_0x2fcc44[_0x21ba88(0x22d)];try{const _0x426c1d=await exchange[_0x21ba88(0x1fe)](_0x165a7f),_0x4010b0=_0x426c1d[_0x165a7f];_0x28e0f4=_0x4010b0[_0x21ba88(0x222)],_0x382327=_0x4010b0[_0x21ba88(0x2c0)],_0x4e8297=_0x4010b0[_0x21ba88(0x231)];_0x2fcc44[_0x21ba88(0x241)]?(_0x2f7537=_0x2fcc44[_0x21ba88(0x207)]==_0x21ba88(0x2bc)?_0x21ba88(0x224):_0x21ba88(0x2bc),_0x46598e=Math[_0x21ba88(0x258)](_0x2fcc44['trade'])/_0x28e0f4):(_0x2f7537=_0x2fcc44[_0x21ba88(0x207)],_0x46598e=Math[_0x21ba88(0x258)](_0x2fcc44[_0x21ba88(0x26e)]));_0x467736==_0x21ba88(0x1e7)&&(config['ordertype']==_0x21ba88(0x1e6)&&(_0x28e0f4=_0x2f7537==_0x21ba88(0x2bc)?_0x382327:_0x4e8297),config[_0x21ba88(0x280)]=='limit-low'&&(_0x28e0f4=_0x2f7537==_0x21ba88(0x2bc)?_0x4e8297:_0x382327));_0x46598e=formatResult(_0x46598e,0x8),_0x28e0f4=formatResult(_0x28e0f4,0x8);const _0x3080e2=await exchange[_0x21ba88(0x29d)](_0x165a7f,_0x467736,_0x2f7537,_0x46598e,_0x28e0f4);lastOrders[_0x21ba88(0x294)]({'orderId':_0x3080e2['id'],'symbol':_0x165a7f,'side':_0x2f7537,'reverse':_0x2fcc44[_0x21ba88(0x241)],'amount':_0x2fcc44[_0x21ba88(0x241)]?_0x3080e2[_0x21ba88(0x1da)]*_0x3080e2['price']:_0x3080e2[_0x21ba88(0x1da)],'filled':_0x2fcc44['reverse']?_0x3080e2[_0x21ba88(0x2a4)]*_0x3080e2[_0x21ba88(0x1fc)]:_0x3080e2['filled'],'price':_0x3080e2['price']});const _0x5e2842=_0x2f7537==_0x21ba88(0x224)?config[_0x21ba88(0x256)]?String[_0x21ba88(0x281)]('0x'+config[_0x21ba88(0x256)])+'\x20':'':config['emojibuy']?String[_0x21ba88(0x281)]('0x'+config[_0x21ba88(0x1ed)])+'\x20':'',_0x231133=_0x467736=='market'?_0x21ba88(0x211):config[_0x21ba88(0x280)]==_0x21ba88(0x1e6)?_0x21ba88(0x20e):_0x21ba88(0x2c8);if(_0x467736==_0x21ba88(0x230))logHistory(_0x21ba88(0x2a9),''+_0x5e2842+_0x231133+'\x20order:\x20'+_0x165a7f+'\x20'+_0x2f7537+'\x20#'+formatResult(_0x3080e2['filled'],0x8)+'\x20@'+formatResult(_0x3080e2[_0x21ba88(0x1fc)],0x8));else logHistory(_0x21ba88(0x2a9),''+_0x5e2842+_0x231133+_0x21ba88(0x1e8)+_0x165a7f+'\x20'+_0x2f7537+'\x20#'+formatResult(_0x3080e2[_0x21ba88(0x1da)],0x8)+'\x20@'+formatResult(_0x3080e2[_0x21ba88(0x1fc)],0x8));_0x3080e2[_0x21ba88(0x26f)]=_0x2fcc44[_0x21ba88(0x26f)],await updateCoinResults(_0x3080e2);if(config[_0x21ba88(0x1c3)]!=0x0){let _0x5bc9a2=null;if(cooldownTracker[_0x21ba88(0x21d)]==config[_0x21ba88(0x1c3)]-0x1)_0x5bc9a2=cooldownTracker['shift']();const _0x223794=getTimeStamp();cooldownTracker[_0x21ba88(0x294)](_0x223794);if(_0x5bc9a2){const _0x148fbc=fns[_0x21ba88(0x20d)](new Date(_0x223794),new Date(_0x5bc9a2));_0x148fbc<cooldownInterval&&(logHistory(_0x21ba88(0x246),'Executed\x20'+config[_0x21ba88(0x1c3)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x21ba88(0x1ff)+cooldownPeriod/(0xe10*0x3e8)+_0x21ba88(0x1eb)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x33072f){if(_0x33072f[_0x21ba88(0x2c7)]()[_0x21ba88(0x255)](_0x21ba88(0x1d0)))logHistory('error',_0x21ba88(0x217)+_0x165a7f);else{if(_0x33072f[_0x21ba88(0x2c7)]()[_0x21ba88(0x255)](_0x21ba88(0x267)))logHistory(_0x21ba88(0x246),'Order\x20amount\x20is\x20invalid:\x20'+_0x165a7f);else await handleError(_0x33072f,_0x21ba88(0x2cc));}}}if(lastOrders[_0x21ba88(0x21d)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config['ordertype']==_0x21ba88(0x230)?logHistory(_0x21ba88(0x246),_0x21ba88(0x261)):logHistory(_0x21ba88(0x246),_0x21ba88(0x2c3)));else coolingDown&&(!config[_0x21ba88(0x23a)]&&logHistory('error',_0x21ba88(0x243)));}}function logHistory(_0x26799b,_0x311ae8,_0x2839ea=''){const _0x2ac802=_0x26cd5e;let _0x3dc7df={'time':getTimeStamp(),'type':_0x26799b,'event':_0x311ae8,'botname':config[_0x2ac802(0x228)],'showname':config[_0x2ac802(0x205)]};dbLogs[_0x2ac802(0x225)](_0x2ac802(0x28e))[_0x2ac802(0x294)](_0x3dc7df)['write']();if(_0x2839ea=='')_0x2839ea=_0x311ae8;proxyEmit('event',{'log':_0x3dc7df,'summary':_0x2839ea}),process['send']({'telegram':_0x3dc7df}),logging(''+_0x3dc7df[_0x2ac802(0x2c4)]);}function emitHistory(_0x216864={}){const _0x5a02da=_0x26cd5e;Object[_0x5a02da(0x2a3)](_0x216864)[_0x5a02da(0x21d)]==0x0&&(_0x216864={'type':['order',_0x5a02da(0x2c4)],'event':'','page':0x1});if(_0x216864[_0x5a02da(0x263)][_0x5a02da(0x255)](_0x5a02da(0x2c4)))_0x216864[_0x5a02da(0x263)]['splice'](_0x216864[_0x5a02da(0x263)][_0x5a02da(0x295)](_0x5a02da(0x2c4)),0x1,'error',_0x5a02da(0x268));if(dbLogs[_0x5a02da(0x1fd)](_0x5a02da(0x28e))[_0x5a02da(0x1d4)]()){let _0x219377=dbLogs[_0x5a02da(0x225)]('logs')[_0x5a02da(0x292)](_0x423589=>{const _0x5ce6d9=_0x5a02da;if(_0x216864['type'][_0x5ce6d9(0x21d)]==0x0)return![];else return _0x216864['type'][_0x5ce6d9(0x255)](_0x423589[_0x5ce6d9(0x263)]);})[_0x5a02da(0x292)](_0x25da0e=>{const _0x4a9984=_0x5a02da;if(_0x216864['event']=='')return!![];else return _0x25da0e[_0x4a9984(0x2c4)][_0x4a9984(0x275)]()[_0x4a9984(0x255)](_0x216864[_0x4a9984(0x2c4)][_0x4a9984(0x275)]());})[_0x5a02da(0x2d3)](_0x5a02da(0x1c2)),_0x2eb04f=_0x219377[_0x5a02da(0x1d4)]()[_0x5a02da(0x21d)];_0x219377=_0x219377[_0x5a02da(0x241)]()[_0x5a02da(0x2c5)]((_0x216864[_0x5a02da(0x1d3)]-0x1)*logPageSize,_0x216864[_0x5a02da(0x1d3)]*logPageSize-0x1)[_0x5a02da(0x241)]()[_0x5a02da(0x1d4)](),proxyEmit('event-history',{'logs':_0x219377,'total':_0x2eb04f});}else proxyEmit(_0x5a02da(0x1f2),{'logs':[],'total':0x0});}async function pauseBot(_0xcbc8a6){const _0x3f4bde=_0x26cd5e,_0xf29b1f=new Date()[_0x3f4bde(0x1ef)]();if(!lastBotPause)lastBotPause=new Date()[_0x3f4bde(0x1ef)](),consecutivePauses=0x1;else{if(_0xf29b1f-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x3f4bde(0x248)]({'stop':_0x3f4bde(0x206)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x3f4bde(0x1ef)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x3f4bde(0x246),_0x3f4bde(0x1c0)+consecutivePauses+')'),await sleep(_0xcbc8a6),botPaused=![],reset();}}async function handleError(_0x186f9d,_0x5d10b8,_0x217565=''){const _0x1474af=_0x26cd5e;if(_0x186f9d['toString']()[_0x1474af(0x255)](_0x1474af(0x1d7)))logHistory(_0x1474af(0x246),_0x5d10b8+_0x1474af(0x2bd)),await pauseBot(pauseBotInterval);else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x1d2)))logHistory('error',_0x5d10b8+_0x1474af(0x1ce)),await pauseBot(pauseBotInterval);else{if(_0x186f9d['toString']()[_0x1474af(0x255)](_0x1474af(0x1fb)))logHistory('error',_0x5d10b8+_0x1474af(0x249)),await pauseBot(pauseBotInterval);else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)]('API-key\x20format\x20invalid'))logHistory('error',_0x5d10b8+_0x1474af(0x2a5)),logHistory(_0x1474af(0x246),_0x1474af(0x2a1)),process[_0x1474af(0x248)]({'stop':_0x1474af(0x28d)});else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x1db)))logHistory(_0x1474af(0x246),_0x5d10b8+_0x1474af(0x1c7)),logHistory(_0x1474af(0x246),_0x1474af(0x2a1)),process['send']({'stop':_0x1474af(0x28d)});else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x27e)))logHistory(_0x1474af(0x246),_0x5d10b8+_0x1474af(0x2bf)),logHistory('error',_0x1474af(0x2a1)),process[_0x1474af(0x248)]({'stop':_0x1474af(0x28d)});else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x1e5)))logHistory(_0x1474af(0x246),_0x5d10b8+_0x1474af(0x1e9)),logHistory(_0x1474af(0x246),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x1474af(0x248)]({'stop':'kill'});else{if(_0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x215)))logHistory('error',_0x5d10b8+_0x1474af(0x286)),await pauseBot(pauseBotInterval),process[_0x1474af(0x248)]({'stop':_0x1474af(0x206)});else _0x186f9d[_0x1474af(0x2c7)]()[_0x1474af(0x255)](_0x1474af(0x21e))?logHistory(_0x1474af(0x246),_0x5d10b8+_0x1474af(0x1f8)):(logHistory(_0x1474af(0x246),_0x5d10b8+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x5d10b8+_0x1474af(0x219),_0x186f9d),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x110064,_0x2436ab){const _0x3636db=_0x26cd5e;return parseFloat(_0x110064[_0x3636db(0x2d6)](_0x2436ab));}function logging(_0x21c254,_0x3d73e3=''){const _0x40fd59=_0x26cd5e;if(config[_0x40fd59(0x205)])console[_0x40fd59(0x1c6)](getTimeStamp()+':\x20'+config['botname']+_0x40fd59(0x269)+_0x21c254,_0x3d73e3);else console[_0x40fd59(0x1c6)](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x21c254,_0x3d73e3);}function getServerTime(){const _0x4bf543=_0x26cd5e,_0x17c9ea=new Date();return _0x17c9ea[_0x4bf543(0x28f)]()+'/'+(_0x17c9ea[_0x4bf543(0x20a)]()+0x1)[_0x4bf543(0x2c7)]()[_0x4bf543(0x2ce)](0x2,'0')+'/'+_0x17c9ea['getDate']()['toString']()[_0x4bf543(0x2ce)](0x2,'0')+'\x20'+_0x17c9ea[_0x4bf543(0x285)]()[_0x4bf543(0x2c7)]()[_0x4bf543(0x2ce)](0x2,'0')+':'+_0x17c9ea[_0x4bf543(0x2a7)]()[_0x4bf543(0x2c7)]()[_0x4bf543(0x2ce)](0x2,'0')+':'+_0x17c9ea[_0x4bf543(0x1f7)]()['toString']()[_0x4bf543(0x2ce)](0x2,'0');}function _0x1be9(_0x55aa1a,_0x58c005){const _0x212719=_0x223b();return _0x1be9=function(_0x5b7148,_0x53f02a){_0x5b7148=_0x5b7148-0x1be;let _0x223bf7=_0x212719[_0x5b7148];return _0x223bf7;},_0x1be9(_0x55aa1a,_0x58c005);}function getTimeStamp(){const _0x23b079=_0x26cd5e,_0x1cd771=shiftedTime();return _0x1cd771[_0x23b079(0x28f)]()+'/'+(_0x1cd771[_0x23b079(0x20a)]()+0x1)[_0x23b079(0x2c7)]()[_0x23b079(0x2ce)](0x2,'0')+'/'+_0x1cd771[_0x23b079(0x1ea)]()[_0x23b079(0x2c7)]()[_0x23b079(0x2ce)](0x2,'0')+'\x20'+_0x1cd771['getHours']()[_0x23b079(0x2c7)]()[_0x23b079(0x2ce)](0x2,'0')+':'+_0x1cd771[_0x23b079(0x2a7)]()[_0x23b079(0x2c7)]()['padStart'](0x2,'0')+':'+_0x1cd771[_0x23b079(0x1f7)]()[_0x23b079(0x2c7)]()[_0x23b079(0x2ce)](0x2,'0');}function getDate(){const _0xcda058=_0x26cd5e,_0x32f742=shiftedTime();return _0x32f742[_0xcda058(0x28f)]()+'/'+(_0x32f742['getMonth']()+0x1)[_0xcda058(0x2c7)]()[_0xcda058(0x2ce)](0x2,'0')+'/'+_0x32f742[_0xcda058(0x1ea)]()[_0xcda058(0x2c7)]()[_0xcda058(0x2ce)](0x2,'0');}function getHour(){const _0x36c4c0=_0x26cd5e,_0x140900=shiftedTime();return _0x140900[_0x36c4c0(0x285)]()[_0x36c4c0(0x2c7)]()['padStart'](0x2,'0');}function sleep(_0x58628d){return new Promise(_0x4b3436=>setTimeout(_0x4b3436,_0x58628d));}function shiftedTime(){const _0x2bd72e=_0x26cd5e,_0x32ac7c=new Date();let _0x2e7686=_0x32ac7c;if(config&&config['timeshift']!==0x0)_0x2e7686=fns[_0x2bd72e(0x202)](_0x32ac7c,{'hours':config[_0x2bd72e(0x22f)]});return _0x2e7686;}