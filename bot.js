const _0x4a530d=_0x2577;(function(_0x4ca5d1,_0x859a36){const _0x2a898f=_0x2577,_0x18a0ce=_0x4ca5d1();while(!![]){try{const _0x5e7172=-parseInt(_0x2a898f(0x2a6))/0x1+-parseInt(_0x2a898f(0x164))/0x2+parseInt(_0x2a898f(0x1a9))/0x3+-parseInt(_0x2a898f(0x228))/0x4*(-parseInt(_0x2a898f(0x2b5))/0x5)+parseInt(_0x2a898f(0x23e))/0x6*(-parseInt(_0x2a898f(0x266))/0x7)+-parseInt(_0x2a898f(0x195))/0x8*(parseInt(_0x2a898f(0x2aa))/0x9)+parseInt(_0x2a898f(0x160))/0xa;if(_0x5e7172===_0x859a36)break;else _0x18a0ce['push'](_0x18a0ce['shift']());}catch(_0x53675d){_0x18a0ce['push'](_0x18a0ce['shift']());}}}(_0x1c48,0x4839c));const _0x434913=function(){let _0x4afb73=!![];return function(_0x199ba1,_0x3d5ff2){const _0x49baae=_0x4afb73?function(){const _0x1e4a92=_0x2577;if(_0x3d5ff2){const _0x5a6f02=_0x3d5ff2[_0x1e4a92(0x264)](_0x199ba1,arguments);return _0x3d5ff2=null,_0x5a6f02;}}:function(){};return _0x4afb73=![],_0x49baae;};}(),_0x14fdd9=_0x434913(this,function(){const _0x565cde=_0x2577;return _0x14fdd9[_0x565cde(0x227)]()[_0x565cde(0x26a)](_0x565cde(0x148))[_0x565cde(0x227)]()[_0x565cde(0x215)](_0x14fdd9)[_0x565cde(0x26a)](_0x565cde(0x148));});_0x14fdd9();'use strict';const ccxt=require(_0x4a530d(0x1e4)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4a530d(0x2b6)),Crypt=require(_0x4a530d(0x26c))[_0x4a530d(0x20d)],util=require('util'),argv=require('yargs/yargs')(process['argv']['slice'](0x2))[_0x4a530d(0x1c9)],path=require('path');let exchange;global[_0x4a530d(0x1d6)]={},global[_0x4a530d(0x2ba)]={};const usdBasecoins=[_0x4a530d(0x2c2),_0x4a530d(0x225),_0x4a530d(0x29c),_0x4a530d(0x290),_0x4a530d(0x230),_0x4a530d(0x194)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4a530d(0x179)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4a530d(0x255)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];function _0x1c48(){const _0x4ca3c3=['full','USDC','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','replace','OnMaintenance','restart','debug','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','apiSecret','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','.json','fiat','coin','\x20not\x20available','leftTxt','804eEuxvE','\x20metrics:</b>\x20\x0a\x0a','Invalid\x20API\x20key\x20or\x20secret\x20entered','reverse','EUR','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','recreateCoinResults()','getDate','indexOf','ORDERS.UNLOCKING','getFullYear','final','spot','************','fromCodePoint','sell','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','map','Uncaught\x20Exception:','ExchangeNotAvailable','ETH','active','fee','UNLOCKED','2\x20-\x20FILLED\x20known\x20order:\x20','2.5.0','getTime','emojisell','0\x20-\x20EXECUTION:\x20','exchange\x20not\x20reloaded','headless','getMonth','number','test','Net\x20effect','amountToPrecision','message','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','apply','Waited\x20','26915fPsBWw','createOrder','warning','starting-balance-','search','remainingSymbols','hybrid-crypto-js','closed','no\x20open\x20orders','\x20|\x20highest\x20fee:\x20','-events.json','getOpenOrders()','error','coins','excluded','\x20:\x20','1\x20-\x20FILLED:\x20','padStart','apiKey','logs','/backup/','random','running','Bot\x20','placeOrder','toUpperCase','loadSymbols()','\x20minutes\x20-\x20','Order(s)\x20not\x20validated\x20after\x20','Order\x20amount\x20is\x20invalid:\x20','\x20>\x20','distribution','removed','autoliquidity','recreate','net-fiat','bots','coin-loading-progress','BNB','\x20not\x20responding','getHours','%\x20(','USDT','3\x20-\x20handling\x20FILLED\x20order:\x20','toFixed','page','defaults','min','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Transaction\x20detection\x20unblocked','password','storeConfiguration','exchange','\x20portfolio:</b>\x20\x0a\x0a','TUSD','-results.json','-performance.json','getCoinNumber()','balances','sortBy','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','remove','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Pausing\x20for\x20','307460vBlzvq','version','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','showConfig','216QqdZpj','keys','fetchOpenOrders','last','no\x20additional\x20symbols','timeshift','<pre>','apiPassword','OrderNotFound','existsSync','AuthenticationError','914285FQcyEl','date-fns','status','Invalid\x20quantity','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','change','findIndex','offset','/output-000.log','buys','realized','\x20exchange\x20error','function','USD','shift','startprice','sendPortfolioTelegram','exec','red_yellow_blue','storeHeadless','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','highest','Saving\x20configuration',':\x20Bot\x20','Executing\x20exchange\x20reload','showname','getCoins()','limit-low','(((.+)+)+)+$','UNLOCKING','cost','basecoinvalue','ORDERS.LOCKED','2\x20-\x20FILLED\x20unknown\x20order:\x20','RateLimitExceeded','assign','botname','symbol','privateKey','value','fetchClosedOrders','filter','buy','BNB/','valid','-------------------------------\x0a','ordertype','uncaughtException','ask','\x20minutes','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20|\x20lock\x20orders:\x20','11414130eUGBIu','abs','basecoin','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','1057298WzRHsP','slice','fees','getStartingBalances','padEnd','splice','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','bot-','\x20API\x20key\x20is\x20invalid','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','ORDERS.UNLOCKED','getPortfolio(0)','Error:\x20Invalid\x20argument\x20','added','type','order','2\x20-\x20Validate\x20orders:\x20','cooldown','\x20has\x20a\x2024h\x20drop\x20of\x20','exchange\x20reloaded','writeFile','freeze','./version.json','deleteHistoryAlerts','getSeconds','Binance','\x20order:\x20','Initializing\x20coin\x20results','1\x20-\x20Handle\x20open\x20orders','breakeven','datetime','./logs/','forEach','initclient','loading-canceled','<b>Bot\x20','currency','performance','limits','delta','entries','filled','getPortfolio(1)','No\x20more\x20open\x20orders\x20-\x20','sort','watchOrders','fetchTickers','trade','USDP','7672OJHDju','format','add','average','data','secure','length','1\x20-\x20Unlock\x20orders','emojibuy','join','Cooldown\x20ended\x20-\x20balancing\x20resumed','cancelLoading','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','differenceInSeconds','mkdirSync','RequestTimeout','target','customId','cancelOrders()','push','489192oMGdSh','cancel','initial','Failed\x20to\x20load\x20coin\x20data\x20for\x20','configuration','date','<b>','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','time','must\x20be\x20greater\x20than\x20minimum\x20amount','InsufficientFunds','LOCKED','rightTxt','cloneDeep','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','ongoing','threshold','RSA-OAEP','Portfolio\x20change\x20detected:\x20','loadMarkets','ExchangeError','watchTrades','usd','netoffset','timestamp','bid','includes','get','</pre>','eur','liquidity','limit','argv','Order\x20is\x20invalid:\x20','Reset\x20|\x20','open','net-basecoin','resetHistory','success','split','args','toLowerCase','\x20|\x20Error\x20details:\x20','\x20API\x20secret\x20is\x20invalid','Order\x20filled:\x20','ticker','yyyy/MM/dd','API-key\x20format\x20invalid','\x20|\x20Custom\x20ID:\x20','\x20|\x20','2\x20-\x20Orders\x20unlocked','has','none','bot','portfolio','isEqual','find','enabled','round','ccxt','limit-high','timeout','Transaction\x20detection\x20blocked','parse','\x20>\x20[DEBUG]\x20','side','Uncaught\x20ExchangeError:','fetchTicker','canceled','Initiating\x20exchange\x20reload','recovery','2\x20-\x20Handled\x20open\x20orders','2.3.5','changes','Net\x20','/EUR','milliseconds','Executed\x20','amount','startnumber','startdate','stringify','progress','parseISO','market','recent20','sha256','BTC','getPortfolio','unlinkSync','\x20orders\x20in\x20less\x20than\x20','NetworkError','ID:\x20','onepagemode','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','price','max','sendMetricsTelegram','send','openOrders','Crypt','orderId','starting-balances','***','-config.json','fetchBalance','settings','2.6.0','constructor','pro','percentage','decrypt','cancelOrder',',\x20must\x20be\x20a\x203\x20digit\x20number','additional\x20symbols\x20','botID','total','orderstatus','sells','Fee\x20discount\x20refund\x20detected:\x20','log','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','exchanges','BUSD',':\x20timer\x20>','toString','8sJPjLw','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','change24h','set','event','1\x20-\x20Validate\x20orders:\x20','write'];_0x1c48=function(){return _0x4ca3c3;};return _0x1c48();}const serverversion=require(_0x4a530d(0x17a))[_0x4a530d(0x2a7)],botID=process[_0x4a530d(0x1c9)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x4a530d(0x25f)](botID)&&(console[_0x4a530d(0x221)](_0x4a530d(0x170)+botID+_0x4a530d(0x21a)),killBot());const userID=process[_0x4a530d(0x1c9)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x4a530d(0x183)+userID+'/':_0x4a530d(0x183),loggerfile=fs['createWriteStream'](logspath+_0x4a530d(0x2bd),{'flags':'a'});!fs[_0x4a530d(0x2b3)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x4a530d(0x2b3)](logspath)&&fs[_0x4a530d(0x1a3)](logspath);const configfile=configpath+_0x4a530d(0x16b)+botID+_0x4a530d(0x211),logfile=configpath+_0x4a530d(0x16b)+botID+'-events.json',performancefile=configpath+_0x4a530d(0x16b)+botID+_0x4a530d(0x29e),coinresultsfile=configpath+'bot-'+botID+_0x4a530d(0x29d),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x4a530d(0x27a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4a530d(0x294)]({'logs':[],'version':serverversion})[_0x4a530d(0x22e)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4a530d(0x294)]({'data':[],'version':serverversion})[_0x4a530d(0x22e)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4a530d(0x294)]({'bot':[],'version':serverversion})[_0x4a530d(0x22e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4a530d(0x1ff),'rsaStandard':_0x4a530d(0x1ba)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5ef792=>{const _0x2ac2d8=_0x4a530d;console[_0x2ac2d8(0x221)](_0x5ef792);},'simple':_0x678aee=>{const _0x189d10=_0x4a530d;console['log'](_0x678aee),loggerfile[_0x189d10(0x22e)](util[_0x189d10(0x196)](_0x678aee)+'\x0a');},'full':async(_0x8cb022,_0x5cd21f='')=>{const _0x37ef28=_0x4a530d;let _0x56fdfd;if(config[_0x37ef28(0x145)])_0x56fdfd=getTimeStamp()+':\x20'+config[_0x37ef28(0x150)]+'\x20>\x20'+_0x8cb022;else _0x56fdfd=getTimeStamp()+':\x20Bot\x20'+botID+_0x37ef28(0x284)+_0x8cb022;console['log'](_0x56fdfd),loggerfile[_0x37ef28(0x22e)](util['format'](_0x56fdfd)+'\x0a'),_0x5cd21f&&(console[_0x37ef28(0x221)](_0x5cd21f),loggerfile['write'](util[_0x37ef28(0x196)](_0x5cd21f)+'\x0a'));},'debug':async(_0x113253,_0x4d774c='')=>{const _0x59015e=_0x4a530d;let _0x2da458;if(config[_0x59015e(0x145)])_0x2da458=getTimeStamp()+':\x20'+config['botname']+_0x59015e(0x1e9)+_0x113253;else _0x2da458=getTimeStamp()+_0x59015e(0x143)+botID+_0x59015e(0x1e9)+_0x113253;if(debugging)console[_0x59015e(0x221)](_0x2da458);loggerfile[_0x59015e(0x22e)](util[_0x59015e(0x196)](_0x2da458)+'\x0a');if(_0x4d774c){if(debugging)console[_0x59015e(0x221)](_0x4d774c);loggerfile[_0x59015e(0x22e)](util[_0x59015e(0x196)](_0x4d774c)+'\x0a');}}};process['on'](_0x4a530d(0x15b),function(_0x30cd0f){const _0x16307c=_0x4a530d;logHistory(_0x16307c(0x272),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x16307c(0x235)](_0x16307c(0x250),_0x30cd0f);});settings['timeshift']!=config[_0x4a530d(0x2af)]&&updateTimeshift(settings['timeshift']);settings[_0x4a530d(0x206)]!=config[_0x4a530d(0x206)]&&updateOnepagemode(settings[_0x4a530d(0x206)]);process[_0x4a530d(0x20b)]({'started':_0x4a530d(0x27c)},_0x254e4e=>{}),initializeProcessListeners();function proxyEmit(_0x4b4155,_0x366159=null){const _0xa9a4ca=_0x4a530d;process[_0xa9a4ca(0x20b)]({'function':_0x4b4155,'args':_0x366159},_0x49b5ac=>{});}function initializeProcessListeners(){const _0x238745=_0x4a530d;process['on'](_0x238745(0x262),_0x3c4020=>{const _0x4b631d=_0x238745;switch(Object[_0x4b631d(0x2ab)](_0x3c4020)[0x0]){case _0x4b631d(0x2af):_0x3c4020[_0x4b631d(0x2af)]!=undefined&&(settings[_0x4b631d(0x2af)]=_0x3c4020[_0x4b631d(0x2af)],updateTimeshift(settings['timeshift']));break;case _0x4b631d(0x206):_0x3c4020['onepagemode']!=undefined&&(settings[_0x4b631d(0x206)]=_0x3c4020[_0x4b631d(0x206)],updateOnepagemode(settings[_0x4b631d(0x206)]));break;case'bots':_0x3c4020[_0x4b631d(0x28a)]!=undefined&&(bots=JSON[_0x4b631d(0x1e8)](_0x3c4020[_0x4b631d(0x28a)]),proxyEmit('bots',bots));break;case _0x4b631d(0x2c1):switch(_0x3c4020[_0x4b631d(0x2c1)]){case _0x4b631d(0x185):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x3c4020[_0x4b631d(0x1d1)]);break;case _0x4b631d(0x17b):deleteHistoryAlerts(_0x3c4020[_0x4b631d(0x1d1)]);break;case _0x4b631d(0x201):getPortfolio(_0x3c4020[_0x4b631d(0x1d1)]);break;case _0x4b631d(0x299):storeConfiguration(_0x3c4020[_0x4b631d(0x1d1)]);break;case _0x4b631d(0x13f):storeHeadless(_0x3c4020[_0x4b631d(0x1d1)]);break;case'storeFiat':storeFiat(_0x3c4020['args']);break;case _0x4b631d(0x1ce):resetHistory();break;case _0x4b631d(0x167):getStartingBalances(getNormalizedPerformance());break;case _0x4b631d(0x27e):placeOrder(_0x3c4020[_0x4b631d(0x1d1)]);break;case _0x4b631d(0x1a0):cancelLoading();break;case _0x4b631d(0x2a9):showConfig();break;case _0x4b631d(0x20a):sendMetricsTelegram();break;case _0x4b631d(0x2c5):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0xe78e58=null,_0x5efa6e=![]){const _0x51bacd=_0x4a530d;logger[_0x51bacd(0x235)](_0x51bacd(0x1cb)+(_0xe78e58&&_0xe78e58[_0x51bacd(0x19b)]>0x0?_0x51bacd(0x21b)+_0xe78e58[_0x51bacd(0x19e)](','):_0x51bacd(0x2ae))+'\x20|\x20'+(_0x5efa6e?_0x51bacd(0x177):_0x51bacd(0x25b))+'\x20|\x20exchange:\x20'+config[_0x51bacd(0x29a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5efa6e)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x51bacd(0x278)]!=''&&config[_0x51bacd(0x278)]!=_0x51bacd(0x210)){if(_0x5efa6e){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2b6066){handleErrorNoStop(_0x2b6066,_0x51bacd(0x280));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0xe78e58);const _0x27c055=await getCoins();[currentCoins,currentCoinsAll]=_0x27c055,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x51bacd(0x19b)]==0x0&&allOpenOrders[_0x51bacd(0x19b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x98b40a=_0x4a530d;logger[_0x98b40a(0x235)](_0x98b40a(0x1ee));while(lockOrders!=ORDERS[_0x98b40a(0x255)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x98b40a(0x235)](_0x98b40a(0x144)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x2d3706=config[_0x4a530d(0x29a)],_0x1f4baa=config[_0x4a530d(0x278)],_0xaa946b=config[_0x4a530d(0x237)],_0x3d896b=config[_0x4a530d(0x2b1)]){const _0x3bf204=_0x4a530d;exchange&&await stopExchange();!supportedExchanges()[_0x3bf204(0x1c3)](_0x2d3706)&&(logHistory(_0x3bf204(0x272),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x2d3706+'\x20exchange'),killBot());const _0x1761b1=ccxt[_0x3bf204(0x216)][_0x2d3706[_0x3bf204(0x1d2)]()];exchange=new _0x1761b1({'apiKey':_0x1f4baa,'secret':_0xaa946b,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3d896b)exchange[_0x3bf204(0x298)]=_0x3d896b;}function setStableCoins(){const _0x53fe52=_0x4a530d;let _0x3cc46d=config[_0x53fe52(0x162)]==_0x53fe52(0x252)?_0x53fe52(0x252):_0x53fe52(0x200),_0x1178b3=!allSymbols['includes'](_0x3cc46d+'/USD')?_0x53fe52(0x290):_0x53fe52(0x2c2),_0x116c4c=!allSymbols[_0x53fe52(0x1c3)](_0x3cc46d+_0x53fe52(0x1f4))?_0x1178b3:_0x53fe52(0x242);stablecoins={'eur':{'coin':''+_0x3cc46d+_0x116c4c,'symbol':_0x3cc46d+'/'+_0x116c4c},'usd':{'coin':''+_0x3cc46d+_0x1178b3,'symbol':_0x3cc46d+'/'+_0x1178b3}};}async function initwsCcxt(_0x5a7a5e){const _0x5c3f5a=_0x4a530d;_0x5a7a5e==null&&(_0x5a7a5e=[],config[_0x5c3f5a(0x1df)][_0x5c3f5a(0x184)](_0x35632b=>{const _0x5f3ad9=_0x5c3f5a;if(!_0x35632b[_0x5f3ad9(0x274)]&&_0x35632b[_0x5f3ad9(0x23b)]!=config[_0x5f3ad9(0x162)])_0x5a7a5e[_0x5f3ad9(0x1a8)](_0x35632b['symbol']);}));if(!_0x5a7a5e[_0x5c3f5a(0x1c3)](stablecoins[_0x5c3f5a(0x1c6)][_0x5c3f5a(0x151)]))_0x5a7a5e['push'](stablecoins[_0x5c3f5a(0x1c6)][_0x5c3f5a(0x151)]);if(!_0x5a7a5e[_0x5c3f5a(0x1c3)](stablecoins['usd'][_0x5c3f5a(0x151)]))_0x5a7a5e['push'](stablecoins['usd']['symbol']);if(config['exchange']['startsWith']('Binance')){if(!_0x5a7a5e[_0x5c3f5a(0x1c3)](_0x5c3f5a(0x157)+config[_0x5c3f5a(0x162)]))_0x5a7a5e[_0x5c3f5a(0x1a8)]('BNB/'+config[_0x5c3f5a(0x162)]);}loadCoins(_0x5a7a5e);const _0x5831ad=async _0x15062a=>{const _0x26a425=_0x5c3f5a,_0x10343d=await exchange[_0x26a425(0x1ec)](_0x15062a);global[_0x26a425(0x1d6)][noslash(_0x10343d[_0x26a425(0x151)])]=_0x10343d[_0x26a425(0x2ad)];while(!![]){if(!botPaused)try{const _0x3399d4=await exchange[_0x26a425(0x1be)](_0x15062a);global[_0x26a425(0x1d6)][noslash(_0x3399d4[0x0][_0x26a425(0x151)])]=_0x3399d4[0x0]['price'],await sleep(0x3e8);}catch(_0x29933a){if(!exchangeStopped)await handleError(_0x29933a,_0x26a425(0x1be),_0x15062a);}else await sleep(0x64);}},_0x4ea994=async _0x205534=>{const _0x4d3519=_0x5c3f5a;while(!![]){if(!botPaused)try{const _0x192538=await exchange['fetchTicker'](_0x205534);global[_0x4d3519(0x2ba)][_0x192538[_0x4d3519(0x151)]]=_0x192538[_0x4d3519(0x217)],await sleep(0x3c*0x3e8);}catch(_0x2735b1){if(!exchangeStopped)await handleError(_0x2735b1,'fetchTickers',_0x205534);}else await sleep(0x64);}},_0x346044=async()=>{const _0x4acdd6=_0x5c3f5a;while(!![]){if(!botPaused)try{const _0x356188=await exchange[_0x4acdd6(0x191)]();_0x356188[_0x4acdd6(0x184)](_0x208603=>{updateNumberCoinsCcxt(_0x208603);});}catch(_0x4ac889){if(!exchangeStopped)await handleError(_0x4ac889,_0x4acdd6(0x191));}else await sleep(0x64);}};_0x5a7a5e[_0x5c3f5a(0x184)](_0x42a1c2=>{_0x5831ad(_0x42a1c2),_0x4ea994(_0x42a1c2);}),!wsEventsSet&&(wsEventsSet=!![],_0x346044(),watchTransactions());}async function watchTransactions(){const _0x36f25e=_0x4a530d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1d35e1=await getCoins(),[_0xcc3e8e,_0x141f73]=_0x1d35e1;let _0xb2c2ab=[];currentCoins[_0x36f25e(0x184)](_0x1bd658=>{const _0x5b03d4=_0x36f25e,_0x3db080=_0xcc3e8e[_0x5b03d4(0x1e1)](_0x99cb0d=>_0x99cb0d[_0x5b03d4(0x23b)]==_0x1bd658['coin']);if(_0x3db080){if(_0x1bd658[_0x5b03d4(0x25e)]!=_0x3db080[_0x5b03d4(0x25e)]){let _0x50a9f1;if(_0x1bd658['coin']!=config[_0x5b03d4(0x162)]){const _0x3933f4=global['ticker'][noslash(_0x1bd658['symbol'])];_0x50a9f1=_0x1bd658['reverse']?0x1/_0x3933f4:_0x3933f4;}else _0x50a9f1=0x1;_0xb2c2ab['push']({'coin':_0x1bd658[_0x5b03d4(0x23b)],'symbol':_0x1bd658[_0x5b03d4(0x151)],'price':_0x50a9f1,'number':Number(formatResult(_0x3db080[_0x5b03d4(0x25e)]-_0x1bd658[_0x5b03d4(0x25e)],0x8)),'basecoinvalue':_0x50a9f1*(_0x3db080[_0x5b03d4(0x25e)]-_0x1bd658[_0x5b03d4(0x25e)])});}}});if(_0xb2c2ab[_0x36f25e(0x19b)]==0x1&&!blockTransactionDetection){if(config[_0x36f25e(0x287)]){logger[_0x36f25e(0x235)](_0x36f25e(0x263)+_0xb2c2ab[0x0][_0x36f25e(0x14b)]+_0x36f25e(0x26f)+lastFees[_0x36f25e(0x141)]);if(lastFees[_0x36f25e(0x141)]==0x0||Math['abs'](_0xb2c2ab[0x0]['basecoinvalue'])>lastFees[_0x36f25e(0x141)]){delete _0xb2c2ab[0x0][_0x36f25e(0x151)],delete _0xb2c2ab[0x0][_0x36f25e(0x14b)];let _0x2cd02d=[],_0x3d997a=[...config['liquidity']]||[],_0x52b02a=config[_0x36f25e(0x1c7)];_0x3d997a['sort']((_0x5722fc,_0x5995b4)=>_0x5722fc[_0x36f25e(0x1ae)]>_0x5995b4['date']?-0x1:_0x5995b4[_0x36f25e(0x1ae)]>_0x5722fc[_0x36f25e(0x1ae)]?0x1:0x0);const _0x1ce200=getDate();if(_0x3d997a[0x0]){const _0x4748c3=fns['parse'](_0x3d997a[0x0][_0x36f25e(0x1ae)],'yyyy/MM/dd',new Date()),_0x1ca146=fns[_0x36f25e(0x1e8)](_0x1ce200,_0x36f25e(0x1d7),new Date());if(fns[_0x36f25e(0x1e0)](_0x4748c3,_0x1ca146)){_0x2cd02d=_0x3d997a[0x0][_0x36f25e(0x1f2)];const _0x41ff2c=_0x2cd02d[_0x36f25e(0x1e1)](_0x213863=>_0x213863['coin']==_0xb2c2ab[0x0]['coin']);_0x41ff2c?(_0x41ff2c['number']+=_0xb2c2ab[0x0][_0x36f25e(0x25e)],_0x41ff2c['number']==0x0&&(_0x2cd02d=_0x2cd02d[_0x36f25e(0x155)](_0x13353f=>{const _0x121239=_0x36f25e;return _0x13353f[_0x121239(0x23b)]!=_0xb2c2ab[0x0][_0x121239(0x23b)];}))):_0x2cd02d['push'](_0xb2c2ab[0x0]);const _0x21177d=_0x52b02a[_0x36f25e(0x1e1)](_0x527af5=>_0x527af5['date']==_0x1ce200);_0x21177d[_0x36f25e(0x1f2)]=_0x2cd02d;}else _0x52b02a[_0x36f25e(0x1a8)]({'date':_0x1ce200,'changes':[_0xb2c2ab[0x0]]});}const _0x59fd38=_0x52b02a[_0x36f25e(0x1e1)](_0x201021=>_0x201021['date']==_0x1ce200);if(_0x59fd38){let _0x153065=!![];_0x59fd38[_0x36f25e(0x1f2)][_0x36f25e(0x184)](_0x3a5e94=>{const _0x3b567a=_0x36f25e;if(_0x3a5e94[_0x3b567a(0x25e)]!=0x0)_0x153065=![];}),_0x153065&&(_0x52b02a=_0x52b02a[_0x36f25e(0x155)](_0x42d63a=>{return _0x42d63a['date']!=_0x1ce200;}));}let _0x46769b=dbConfig[_0x36f25e(0x1c4)](_0x36f25e(0x1de))['find']({'botID':botID})['value']();_0x46769b&&(dbConfig[_0x36f25e(0x1c4)]('bot')[_0x36f25e(0x1e1)]({'botID':botID})[_0x36f25e(0x14f)]({'liquidity':_0x52b02a})[_0x36f25e(0x22e)](),config[_0x36f25e(0x1c7)]=_0x52b02a),logHistory('success',_0x36f25e(0x1bb)+Math[_0x36f25e(0x161)](_0xb2c2ab[0x0]['number'])+'\x20'+_0xb2c2ab[0x0][_0x36f25e(0x23b)]+'\x20'+(_0xb2c2ab[0x0][_0x36f25e(0x25e)]>0x0?'added':_0x36f25e(0x286))+_0x36f25e(0x163)),proxyEmit(_0x36f25e(0x1ad),emittedConfiguration());}else logger[_0x36f25e(0x235)](_0x36f25e(0x220)+Math[_0x36f25e(0x161)](_0xb2c2ab[0x0]['number'])+'\x20'+_0xb2c2ab[0x0][_0x36f25e(0x23b)]+'\x20'+(_0xb2c2ab[0x0][_0x36f25e(0x25e)]>0x0?'added':_0x36f25e(0x286)));transactionDetected=!![],currentCoins=_0xcc3e8e,currentCoinsAll=_0x141f73;}else logger[_0x36f25e(0x235)](_0x36f25e(0x1bb)+Math['abs'](_0xb2c2ab[0x0][_0x36f25e(0x25e)])+'\x20'+_0xb2c2ab[0x0]['coin']+'\x20'+(_0xb2c2ab[0x0][_0x36f25e(0x25e)]>0x0?_0x36f25e(0x171):_0x36f25e(0x286))+_0x36f25e(0x2a2)),currentCoins=_0xcc3e8e,currentCoinsAll=_0x141f73;}await sleep(watchTransactionsInterval);}catch(_0x286a81){if(!exchangeStopped)await handleError(_0x286a81,'watchTransactions');}else await sleep(0x64);}}function _0x2577(_0x4a4569,_0x37f571){const _0x10c4e8=_0x1c48();return _0x2577=function(_0x14fdd9,_0x434913){_0x14fdd9=_0x14fdd9-0x13e;let _0x1c485a=_0x10c4e8[_0x14fdd9];return _0x1c485a;},_0x2577(_0x4a4569,_0x37f571);}async function loadSymbols(_0x2df65f=config['exchange'],_0x5dcca8=![]){const _0x44ef4f=_0x4a530d;if(allSymbols&&!_0x5dcca8)return;try{markets=await exchange[_0x44ef4f(0x1bc)](),allSymbols=[],Object['entries'](markets)[_0x44ef4f(0x184)](_0x58102d=>{const _0x332413=_0x44ef4f;_0x58102d[0x1][_0x332413(0x253)]&&_0x58102d[0x1][_0x332413(0x24a)]&&allSymbols[_0x332413(0x1a8)](_0x58102d[0x0]);});}catch(_0x66022c){throw _0x66022c;}}async function initclient(){const _0x1a20ca=_0x4a530d;emitLoadingProgress(),proxyEmit(_0x1a20ca(0x1ad),emittedConfiguration()),proxyEmit(_0x1a20ca(0x224),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2618a0=getNormalizedPerformance();emitPerformance(_0x2618a0),getStartingBalances(_0x2618a0);}async function toggleBotMode(){const _0x1f253e=_0x4a530d;let _0x37d313=dbConfig[_0x1f253e(0x1c4)]('bot')[_0x1f253e(0x1e1)]({'botID':botID})['value']();if(_0x37d313){const _0x1177e8=!_0x37d313[_0x1f253e(0x25c)];dbConfig[_0x1f253e(0x1c4)]('bot')['find']({'botID':botID})[_0x1f253e(0x14f)]({'headless':_0x1177e8})[_0x1f253e(0x22e)](),config[_0x1f253e(0x25c)]=_0x1177e8,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x50abc2=>{});}async function loadCoins(_0x16d5ad){const _0x2fe258=_0x4a530d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0xc9afaf,_0x2b82da=0x0,_0x28d91b=0x0;_0x16d5ad[_0x2fe258(0x184)](_0x50c0c5=>{const _0x346bb1=_0x2fe258;loading[_0x346bb1(0x26b)][_0x346bb1(0x1a8)](_0x50c0c5);}),loadingCanceled=![];let _0x28b979=![];while(_0xc9afaf!=_0x16d5ad[_0x2fe258(0x19b)]){_0xc9afaf=0x0,_0x16d5ad[_0x2fe258(0x184)](_0x2dc7b8=>{const _0x16c730=_0x2fe258;if(global['ticker'][noslash(_0x2dc7b8)]){loading[_0x16c730(0x26b)]=loading[_0x16c730(0x26b)][_0x16c730(0x155)](_0xccff16=>_0xccff16!=_0x2dc7b8);if(!watchedSymbols[_0x16c730(0x1c3)](_0x2dc7b8))watchedSymbols['push'](_0x2dc7b8);_0xc9afaf++;}}),loading[_0x2fe258(0x1fb)]=Math['round'](_0xc9afaf/_0x16d5ad[_0x2fe258(0x19b)]*0x64);loading[_0x2fe258(0x1fb)]!=0x64&&(_0x28d91b>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x28d91b>0x78*0x5&&!_0x28b979&&(loading['cancel']=!![],emitLoadingProgress(),_0x28b979=!![],logHistory('error',_0x2fe258(0x1ac)+loading[_0x2fe258(0x26b)][_0x2fe258(0x19e)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x2fe258(0x272),_0x2fe258(0x2a5)+loadCoinsRetryInterval/0xea60+_0x2fe258(0x24e)),pidCoinReloading=setTimeout(()=>{const _0x176237=_0x2fe258;process['send']({'stop':_0x176237(0x234)},_0x3a910c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2fe258(0x1aa)]=!![],emitLoadingProgress();break;}else _0xc9afaf!=_0x2b82da&&(_0x2b82da=_0xc9afaf,emitLoadingProgress()),_0x28d91b++,await sleep(0xc8);}_0xc9afaf==_0x16d5ad[_0x2fe258(0x19b)]&&(coinsLoaded=!![],process[_0x2fe258(0x20b)]({'status':_0x2fe258(0x1e2),'live':_0x2fe258(0x27c)},_0x1fc3a5=>{}),_0x28b979&&logHistory(_0x2fe258(0x1cf),_0x2fe258(0x16a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1c8ed6=_0x4a530d;proxyEmit(_0x1c8ed6(0x1ad),{...emittedConfiguration(),'configstate':_0x1c8ed6(0x186)});}function emitLoadingProgress(){const _0x5cf806=_0x4a530d;proxyEmit(_0x5cf806(0x28b),loading);}async function getFiat(){const _0x253b05=_0x4a530d;let _0x46eaef=global[_0x253b05(0x1d6)][stablecoins['eur']['coin']],_0x197e0d=global['ticker'][stablecoins[_0x253b05(0x1bf)]['coin']];return{'eur':Number(_0x46eaef),'usd':Number(_0x197e0d)};}function capitalize(_0x26e577){const _0x1ec195=_0x4a530d;return _0x26e577['substring'](0x0,0x1)[_0x1ec195(0x27f)]()+_0x26e577['substring'](0x1);}function supportedExchanges(){const _0x752f4e=_0x4a530d,_0x1431fd=['ws',_0x752f4e(0x192),_0x752f4e(0x1ec),'watchTrades',_0x752f4e(0x191),_0x752f4e(0x219),_0x752f4e(0x267),'fetchOpenOrders','fetchClosedOrders',_0x752f4e(0x212)];let _0x5f00c2=[],_0x3339fd=[],_0x36bd54=ccxt[_0x752f4e(0x216)]['exchanges'];_0x36bd54[_0x752f4e(0x184)](_0x393b6c=>{const _0x1bbb5e=_0x752f4e;try{const _0x23f834=new ccxt[(_0x1bbb5e(0x216))][_0x393b6c]();_0x3339fd[_0x1bbb5e(0x1a8)](_0x23f834);}catch(_0x120001){}}),_0x3339fd[_0x752f4e(0x184)](_0x1453e4=>{const _0x583e1f=_0x752f4e;let _0x5cd105=0x0;_0x1431fd[_0x583e1f(0x184)](_0x189e3e=>{const _0x866535=_0x583e1f;_0x189e3e in _0x1453e4[_0x866535(0x1dc)]&&_0x1453e4[_0x866535(0x1dc)][_0x189e3e]&&_0x5cd105++;}),_0x5cd105==_0x1431fd['length']&&_0x5f00c2[_0x583e1f(0x1a8)](capitalize(_0x1453e4['id']));});let _0x5ac57a=[];return _0x36bd54[_0x752f4e(0x184)](_0x474d00=>{const _0x740db7=_0x752f4e;_0x474d00=capitalize(_0x474d00);if(!_0x5f00c2[_0x740db7(0x1c3)](_0x474d00))_0x5ac57a[_0x740db7(0x1a8)](_0x474d00);}),_0x5f00c2;}function setStartDatePerformance(){const _0x13d0ba=_0x4a530d;if(config&&config[_0x13d0ba(0x1c7)][0x0][_0x13d0ba(0x1f2)][_0x13d0ba(0x19b)]!=0x0){const _0x447f76=config[_0x13d0ba(0x1c7)][0x0][_0x13d0ba(0x1f2)];dbPerformance[_0x13d0ba(0x1c4)]('data')['find']({'date':config[_0x13d0ba(0x1f9)]})[_0x13d0ba(0x14f)]({'coins':_0x447f76})[_0x13d0ba(0x22e)]();}}async function recreateCoinResults(){const _0x1815ea=_0x4a530d;let _0x1aceeb,_0x5461a2=[];try{const _0xe1e07f=fns[_0x1815ea(0x196)](fns[_0x1815ea(0x1fc)](config[_0x1815ea(0x1f9)]['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x3e3ea9 of currentCoins){if(_0x3e3ea9[_0x1815ea(0x23b)]!=config[_0x1815ea(0x162)]){let _0x267a22=0x0,_0x53644a,_0x5e67a3;_0x1aceeb=await getAllEventOrders(_0x3e3ea9[_0x1815ea(0x151)]);if(_0x1aceeb[_0x1815ea(0x19b)]>0x0)_0x1aceeb[_0x1815ea(0x184)](_0x39bcac=>{const _0xee68c5=_0x1815ea,_0x589e6f=_0x3e3ea9[_0xee68c5(0x151)]['includes'](config['basecoin']+'/');_0x5461a2[_0xee68c5(0x1a8)]({'datetime':_0x39bcac[_0xee68c5(0x182)],'coin':_0x3e3ea9[_0xee68c5(0x23b)],'symbol':_0x3e3ea9['symbol'],'side':_0x39bcac[_0xee68c5(0x1ea)],'reverse':_0x589e6f,'amount':formatResult(_0x39bcac[_0xee68c5(0x18d)],0x8),'filled':formatResult(_0x39bcac[_0xee68c5(0x18d)],0x8),'price':formatResult(_0x39bcac['price'],0x8)}),_0x267a22=_0x39bcac[_0xee68c5(0x1ea)]==_0xee68c5(0x156)?_0x267a22+_0x39bcac[_0xee68c5(0x18d)]:_0x267a22-_0x39bcac['filled'];if(!_0x5e67a3)_0x5e67a3=_0x39bcac[_0xee68c5(0x208)];});_0x53644a=_0x3e3ea9[_0x1815ea(0x25e)]-_0x267a22;let _0x511039;config[_0x1815ea(0x1c7)]['forEach'](_0x5790b1=>{const _0x223193=_0x1815ea;!_0x511039&&(_0x511039=_0x5790b1['changes']['find'](_0xac245=>_0xac245[_0x223193(0x23b)]==_0x3e3ea9['coin']),_0x511039&&(_0x53644a=_0x511039[_0x223193(0x25e)],_0x5e67a3=_0x511039[_0x223193(0x208)]));});let _0xd7773f=dbCoinResults[_0x1815ea(0x1c4)]('coins')[_0x1815ea(0x1e1)]({'coin':_0x3e3ea9['coin']})[_0x1815ea(0x153)]();_0xd7773f={'coin':_0x3e3ea9['coin'],'number':_0x53644a,'breakeven':_0x5e67a3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1815ea(0x1c4)](_0x1815ea(0x273))[_0x1815ea(0x1e1)]({'coin':_0x3e3ea9[_0x1815ea(0x23b)]})[_0x1815ea(0x14f)](_0xd7773f)[_0x1815ea(0x22e)]();}}_0x5461a2[_0x1815ea(0x190)]((_0x49c091,_0x49256e)=>_0x49c091[_0x1815ea(0x182)]>_0x49256e[_0x1815ea(0x182)]?0x1:_0x49256e[_0x1815ea(0x182)]>_0x49c091['datetime']?-0x1:0x0);let _0x3c79cd=0x0;for(let _0x44f6e9 of _0x5461a2){await updateCoinResults(_0x44f6e9,!![]);}}catch(_0x2b89a5){await handleError(_0x2b89a5,_0x1815ea(0x244));}}async function getAllEventOrders(_0x326a2d){const _0x7baccf=_0x4a530d;let _0x28ea3c=[],_0x3dcce0=dbLogs[_0x7baccf(0x1c4)](_0x7baccf(0x279))[_0x7baccf(0x155)](_0xc26629=>{const _0x121740=_0x7baccf,_0x326e69=_0xc26629[_0x121740(0x22c)][_0x121740(0x1d2)]();return _0x326e69['includes'](_0x326a2d[_0x121740(0x1d2)]())&&(_0x326e69['includes'](_0x121740(0x1fd))&&_0x326e69[_0x121740(0x1c3)](_0x121740(0x173))||_0x326e69[_0x121740(0x1c3)](_0x121740(0x18d))&&_0x326e69[_0x121740(0x1c3)]('order'));})[_0x7baccf(0x2a1)](_0x7baccf(0x1b1))[_0x7baccf(0x153)]();return _0x3dcce0[_0x7baccf(0x184)](_0x4543d6=>{const _0x5ab7b4=_0x7baccf,_0x17a64e=_0x4543d6['event']['includes'](_0x5ab7b4(0x24d))?_0x5ab7b4(0x24d):_0x5ab7b4(0x156),_0x596f97=/#([0-9]|\.)+\s/i,_0x352767=Number(_0x596f97[_0x5ab7b4(0x2c6)](_0x4543d6[_0x5ab7b4(0x22c)])[0x0][_0x5ab7b4(0x165)](0x1)),_0x3f4163=/@([0-9]|\.)+$/i,_0x29686c=Number(_0x3f4163[_0x5ab7b4(0x2c6)](_0x4543d6['event'])[0x0][_0x5ab7b4(0x165)](0x1));_0x28ea3c['push']({'datetime':_0x4543d6[_0x5ab7b4(0x1b1)],'coin':symbolToCoin(_0x326a2d),'symbol':_0x326a2d,'side':_0x17a64e,'amount':_0x352767,'filled':_0x352767,'price':_0x29686c});}),_0x28ea3c;}async function getAllOrders(_0xfe65d1,_0x398bc5){const _0xd86ec2=_0x4a530d;let _0x3763de=[];while(_0x398bc5<exchange[_0xd86ec2(0x1f5)]()){const _0x320a2e=0x1f4,_0x5e6cee=await exchange[_0xd86ec2(0x154)](_0xfe65d1,_0x398bc5,_0x320a2e);if(_0x5e6cee[_0xd86ec2(0x19b)])_0x398bc5=_0x5e6cee[_0x5e6cee['length']-0x1][_0xd86ec2(0x1c1)]+0x1,_0x3763de=_0x3763de['concat'](_0x5e6cee);else break;}return _0x3763de;}async function validate24hChanges(){const _0x13624a=_0x4a530d;for(const _0x3f36d2 of currentCoins){if(_0x3f36d2[_0x13624a(0x23b)]!=config['basecoin']){let _0x4d79d5;_0x3f36d2[_0x13624a(0x241)]?_0x4d79d5=formatResult((0x1/(global['change'][noslash(_0x3f36d2[_0x13624a(0x151)])]/0x64+0x1)-0x1)*0x64,0x3):_0x4d79d5=global[_0x13624a(0x2ba)][noslash(_0x3f36d2['symbol'])],_0x4d79d5<config[_0x13624a(0x22a)]&&(logHistory(_0x13624a(0x272),_0x3f36d2[_0x13624a(0x23b)]+_0x13624a(0x176)+_0x4d79d5+'%'),logHistory('error',_0x13624a(0x2a4)),logHistory(_0x13624a(0x272),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x9864e7,_0x31a5ab){const _0x22c053=_0x4a530d;if(!_0x9864e7)return!![];const _0x300bd0=_0x31a5ab[_0x22c053(0x1d0)]('.'),_0x189bb8=_0x9864e7[_0x22c053(0x1d0)]('.');for(var _0x5f2eb4=0x0;_0x5f2eb4<_0x189bb8['length'];_0x5f2eb4++){const _0x54eb6f=~~_0x189bb8[_0x5f2eb4],_0x5117ae=~~_0x300bd0[_0x5f2eb4];if(_0x54eb6f<_0x5117ae)return!![];if(_0x54eb6f>_0x5117ae)return![];}return![];}async function oneTimeMigration(){const _0x43e434=_0x4a530d;let _0x3648b8=dbLogs['get'](_0x43e434(0x2a7))[_0x43e434(0x153)]();if(isOlderVersion(_0x3648b8,'2.3.5')){let _0x1af617=[];const _0x5e62d4=dbLogs[_0x43e434(0x1c4)](_0x43e434(0x279))['value']();_0x5e62d4[_0x43e434(0x184)](_0x595c76=>{const _0x3d1df2=_0x43e434;_0x1af617[_0x3d1df2(0x1a8)]({'time':_0x595c76[_0x3d1df2(0x1b1)],'type':_0x595c76[_0x3d1df2(0x172)],'event':_0x595c76[_0x3d1df2(0x22c)]});}),dbLogs[_0x43e434(0x1c4)](_0x43e434(0x279))[_0x43e434(0x14f)](_0x1af617)[_0x43e434(0x22e)]();}let _0x2b03fa=dbConfig['get'](_0x43e434(0x2a7))[_0x43e434(0x153)]();if(isOlderVersion(_0x2b03fa,'2.3.5')){let _0x34e42b=dbConfig[_0x43e434(0x1c4)](_0x43e434(0x1de))[_0x43e434(0x1e1)]({'botID':botID})[_0x43e434(0x153)]();if(_0x34e42b){let _0x2d0dab=[];_0x34e42b['portfolio'][_0x43e434(0x184)](_0x578b47=>{const _0x122d1b=_0x43e434;_0x2d0dab['push']({'coin':_0x578b47[_0x122d1b(0x23b)],'number':_0x578b47[_0x122d1b(0x1f8)],'price':_0x578b47['startprice']}),delete _0x578b47[_0x122d1b(0x1f8)],delete _0x578b47[_0x122d1b(0x2c4)];});if(_0x2d0dab[_0x43e434(0x19b)]!==0x0)fs[_0x43e434(0x178)](configbackuppath+(_0x43e434(0x269)+botID+_0x43e434(0x239)),JSON[_0x43e434(0x1fa)](_0x2d0dab,null,0x4),function(_0x4926a1){if(_0x4926a1){}});const _0x584afa=(_0x20daf4,_0x778a53)=>{const _0x38690d=_0x43e434;let _0x3d7000=[];_0x778a53[_0x38690d(0x184)](_0x234ca4=>{const _0x2c4aec=_0x38690d,_0x3b2703=_0x20daf4[_0x2c4aec(0x1e1)](_0x358e8d=>_0x358e8d[_0x2c4aec(0x23b)]==_0x234ca4[_0x2c4aec(0x23b)]);if(!_0x3b2703)_0x3d7000[_0x2c4aec(0x1a8)](_0x234ca4);});let _0x4eff20=[];return _0x20daf4['forEach'](_0x2647a8=>{const _0x1af48c=_0x38690d,_0x442c89=_0x778a53[_0x1af48c(0x1e1)](_0x5e50cb=>_0x5e50cb[_0x1af48c(0x23b)]==_0x2647a8[_0x1af48c(0x23b)]);if(!_0x442c89||_0x442c89[_0x1af48c(0x25e)]==0x0&&_0x2647a8[_0x1af48c(0x25e)]!=0x0)_0x4eff20['push'](_0x2647a8);}),{'missingDay1':_0x3d7000,'notInDay2':_0x4eff20};},_0x4c8d02=dbPerformance[_0x43e434(0x1c4)](_0x43e434(0x199))[_0x43e434(0x1b6)]()['value']();if(_0x4c8d02[_0x43e434(0x19b)]>0x1){const {missingDay1:_0x48b56b,notInDay2:_0x1120bc}=_0x584afa(_0x2d0dab,_0x4c8d02[0x1][_0x43e434(0x273)]);_0x2d0dab=[..._0x2d0dab,..._0x48b56b],_0x1120bc[_0x43e434(0x184)](_0x4453a9=>{const _0x2c4a1b=_0x43e434;let _0x48ffc3=_0x2d0dab[_0x2c4a1b(0x2bb)](_0x515763=>_0x515763['coin']==_0x4453a9[_0x2c4a1b(0x23b)]);_0x48ffc3!=-0x1&&_0x2d0dab['splice'](_0x48ffc3,0x1);});}_0x2d0dab[_0x43e434(0x190)]((_0x3c1ced,_0x329339)=>_0x3c1ced['coin']>_0x329339['coin']?0x1:_0x329339[_0x43e434(0x23b)]>_0x3c1ced[_0x43e434(0x23b)]?-0x1:0x0);let _0x49e6b7=[{'date':_0x34e42b[_0x43e434(0x1f9)],'changes':_0x2d0dab}];_0x4c8d02[_0x43e434(0x19b)]>0x2&&_0x4c8d02['forEach']((_0x489215,_0xf3452d)=>{const _0x5aae8b=_0x43e434;if(_0xf3452d>0x0&&_0xf3452d<_0x4c8d02[_0x5aae8b(0x19b)]-0x1){const {missingDay1:_0x1db507,notInDay2:_0x25f085}=_0x584afa(_0x4c8d02[_0xf3452d]['coins'],_0x4c8d02[_0xf3452d+0x1][_0x5aae8b(0x273)]);_0x2d0dab=[],(_0x1db507[_0x5aae8b(0x19b)]!=0x0||_0x25f085[_0x5aae8b(0x19b)]!=0x0)&&(_0x1db507['length']!=0x0&&_0x2d0dab[_0x5aae8b(0x1a8)](..._0x1db507),_0x25f085[_0x5aae8b(0x19b)]!=0x0&&(_0x25f085[_0x5aae8b(0x184)](_0x2b18f5=>{const _0x128b29=_0x5aae8b;_0x2b18f5[_0x128b29(0x25e)]=-_0x2b18f5[_0x128b29(0x25e)];}),_0x2d0dab[_0x5aae8b(0x1a8)](..._0x25f085)),_0x2d0dab['sort']((_0x5ea236,_0x1aaaa1)=>_0x5ea236['coin']>_0x1aaaa1[_0x5aae8b(0x23b)]?0x1:_0x1aaaa1[_0x5aae8b(0x23b)]>_0x5ea236[_0x5aae8b(0x23b)]?-0x1:0x0),_0x49e6b7[_0x5aae8b(0x1a8)]({'date':_0x4c8d02[_0xf3452d+0x1][_0x5aae8b(0x1ae)],'changes':_0x2d0dab}));}}),dbConfig['get'](_0x43e434(0x1de))['find']({'botID':botID})[_0x43e434(0x14f)]({..._0x34e42b,'liquidity':_0x49e6b7})[_0x43e434(0x22e)]();}}if(isOlderVersion(_0x2b03fa,_0x43e434(0x214))){let _0x39d419=dbConfig[_0x43e434(0x1c4)](_0x43e434(0x1de))[_0x43e434(0x1e1)]({'botID':botID})[_0x43e434(0x153)]();if(_0x39d419){const _0x1d52b3=_0x39d419[_0x43e434(0x29a)],_0x135654=_0x1d52b3?capitalize(_0x1d52b3):_0x43e434(0x17d);dbConfig[_0x43e434(0x1c4)](_0x43e434(0x1de))[_0x43e434(0x1e1)]({'botID':botID})[_0x43e434(0x14f)]({'exchange':_0x135654})['write']();}}let _0xb30bd7=dbPerformance[_0x43e434(0x1c4)](_0x43e434(0x2a7))['value']();isOlderVersion(_0xb30bd7,_0x43e434(0x1f1))&&setStartDatePerformance();let _0xcba2ac=dbCoinResults[_0x43e434(0x1c4)](_0x43e434(0x2a7))[_0x43e434(0x153)]();if(isOlderVersion(_0xcba2ac,_0x43e434(0x257))){let _0x3de016=dbCoinResults[_0x43e434(0x1c4)]('coins')[_0x43e434(0x153)]();if(_0x3de016[_0x43e434(0x19b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x562ed7=_0x4a530d;dbConfig[_0x562ed7(0x22b)]('version',serverversion)[_0x562ed7(0x22e)](),dbPerformance[_0x562ed7(0x22b)](_0x562ed7(0x2a7),serverversion)[_0x562ed7(0x22e)](),dbLogs[_0x562ed7(0x22b)](_0x562ed7(0x2a7),serverversion)[_0x562ed7(0x22e)](),dbCoinResults['set'](_0x562ed7(0x2a7),serverversion)[_0x562ed7(0x22e)]();}function getConfiguration(_0x5f05ff){const _0x4e7f3f=_0x4a530d;let _0xd53a92=dbConfig[_0x4e7f3f(0x1c4)](_0x4e7f3f(0x1de))[_0x4e7f3f(0x1e1)]({'botID':_0x5f05ff})['value']();if(_0xd53a92){let _0x3dbcd4=![];typeof _0xd53a92[_0x4e7f3f(0x1b9)]=='string'&&(_0xd53a92={..._0xd53a92,'threshold':Number(_0xd53a92['threshold'])},_0x3dbcd4=!![]),_0xd53a92['change24h']==null&&(_0xd53a92={..._0xd53a92,'change24h':-0x14},_0x3dbcd4=!![]),!_0xd53a92[_0x4e7f3f(0x23a)]&&(_0xd53a92={..._0xd53a92,'fiat':_0x4e7f3f(0x2c2)},_0x3dbcd4=!![]),!_0xd53a92[_0x4e7f3f(0x206)]&&(_0xd53a92={..._0xd53a92,'onepagemode':settings[_0x4e7f3f(0x206)]},_0x3dbcd4=!![]),!_0xd53a92['colorscheme']&&(_0xd53a92={..._0xd53a92,'colorscheme':_0x4e7f3f(0x13e)},_0x3dbcd4=!![]),!_0xd53a92[_0x4e7f3f(0x287)]&&(_0xd53a92={..._0xd53a92,'autoliquidity':!![]},_0x3dbcd4=!![]),_0x3dbcd4&&(_0xd53a92={'botID':_0xd53a92[_0x4e7f3f(0x21c)],'exchange':_0xd53a92[_0x4e7f3f(0x29a)],'apiKey':_0xd53a92[_0x4e7f3f(0x278)],'apiSecret':_0xd53a92[_0x4e7f3f(0x237)],'apiPassword':_0xd53a92[_0x4e7f3f(0x2b1)],'basecoin':_0xd53a92[_0x4e7f3f(0x162)],'botname':_0xd53a92[_0x4e7f3f(0x150)],'showname':_0xd53a92[_0x4e7f3f(0x145)],'threshold':_0xd53a92['threshold'],'ordertype':_0xd53a92['ordertype'],'timeout':_0xd53a92[_0x4e7f3f(0x1e6)],'fiat':_0xd53a92[_0x4e7f3f(0x23a)],'startdate':_0xd53a92['startdate'],'recreate':_0xd53a92[_0x4e7f3f(0x288)],'timeshift':_0xd53a92[_0x4e7f3f(0x2af)],'onepagemode':_0xd53a92[_0x4e7f3f(0x206)],'headless':_0xd53a92[_0x4e7f3f(0x25c)],'cooldown':_0xd53a92[_0x4e7f3f(0x175)],'change24h':_0xd53a92[_0x4e7f3f(0x22a)],'emojibuy':_0xd53a92[_0x4e7f3f(0x19d)],'emojisell':_0xd53a92[_0x4e7f3f(0x259)],'colorscheme':_0xd53a92['colorscheme'],'portfolio':_0xd53a92[_0x4e7f3f(0x1df)],'autoliquidity':_0xd53a92['autoliquidity'],'liquidity':_0xd53a92[_0x4e7f3f(0x1c7)],'openOrders':_0xd53a92['openOrders']},dbConfig[_0x4e7f3f(0x1c4)](_0x4e7f3f(0x1de))[_0x4e7f3f(0x2a3)]()[_0x4e7f3f(0x22e)](),dbConfig['get'](_0x4e7f3f(0x1de))[_0x4e7f3f(0x1a8)](_0xd53a92)['write']());}else _0xd53a92={'botID':_0x5f05ff,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4e7f3f(0x27d)+_0x5f05ff,'showname':![],'threshold':0x3,'ordertype':_0x4e7f3f(0x1fd),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xd53a92;}function emittedConfiguration(){const _0x4f600c=_0x4a530d;let _0xc6aa7a;if(config[_0x4f600c(0x278)]=='')_0xc6aa7a={...config,'configstate':_0x4f600c(0x1ab)};else config[_0x4f600c(0x278)]==_0x4f600c(0x210)?_0xc6aa7a={...config,'configstate':_0x4f600c(0x1ef)}:(_0xc6aa7a={...config,'apiKey':_0x4f600c(0x24b),'apiSecret':_0x4f600c(0x24b)},config[_0x4f600c(0x2b1)]&&(_0xc6aa7a['apiPassword']=_0x4f600c(0x24b)));return _0xc6aa7a;}function getSettings(){const _0x1837e8=_0x4a530d;return dbSettings[_0x1837e8(0x1c4)](_0x1837e8(0x213))[_0x1837e8(0x153)]();}function getSecure(){const _0x5d77a0=_0x4a530d;return dbSecure[_0x5d77a0(0x1c4)](_0x5d77a0(0x19a))[_0x5d77a0(0x153)]()||{};}function updateTimeshift(_0x4b05e0){const _0x13e3bd=_0x4a530d;let _0x377005=dbConfig['get'](_0x13e3bd(0x1de))[_0x13e3bd(0x1e1)]({'botID':botID})[_0x13e3bd(0x153)]();_0x377005&&dbConfig['get'](_0x13e3bd(0x1de))[_0x13e3bd(0x1e1)]({'botID':botID})[_0x13e3bd(0x14f)]({'timeshift':_0x4b05e0})[_0x13e3bd(0x22e)](),config[_0x13e3bd(0x2af)]=_0x4b05e0,proxyEmit(_0x13e3bd(0x1ad),emittedConfiguration());}function updateOnepagemode(_0x4a6b33){const _0x59063d=_0x4a530d;let _0x542731=dbConfig[_0x59063d(0x1c4)](_0x59063d(0x1de))['find']({'botID':botID})[_0x59063d(0x153)]();_0x542731&&dbConfig[_0x59063d(0x1c4)](_0x59063d(0x1de))[_0x59063d(0x1e1)]({'botID':botID})[_0x59063d(0x14f)]({'onepagemode':_0x4a6b33})[_0x59063d(0x22e)](),config['onepagemode']=_0x4a6b33,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2d9596){const _0x1ccaa6=_0x4a530d;logger[_0x1ccaa6(0x235)](_0x1ccaa6(0x142));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x1ccaa6(0x235)](_0x1ccaa6(0x1e7));let _0x5700cc=[],_0x21a543=![],_0x43d62d=![],_0xc923db=[];_0x2d9596[_0x1ccaa6(0x1df)][_0x1ccaa6(0x184)](_0x43e33f=>{const _0x5a5830=_0x1ccaa6;if(!_0x43e33f['excluded']&&_0x43e33f[_0x5a5830(0x23b)]!=_0x2d9596['basecoin'])_0xc923db[_0x5a5830(0x1a8)](_0x43e33f[_0x5a5830(0x151)]);}),_0xc923db['forEach'](_0x436e6f=>{const _0x58d314=_0x1ccaa6,_0x4ebd6e=watchedSymbols[_0x58d314(0x1c3)](_0x436e6f);!_0x4ebd6e&&_0x5700cc[_0x58d314(0x1a8)](_0x436e6f);}),_0xc923db['forEach'](_0x48e9a1=>{const _0x50f11f=currentCoins['find'](_0x2f3c6d=>_0x2f3c6d['symbol']==_0x48e9a1);!_0x50f11f&&(_0x21a543=!![]);}),currentCoins[_0x1ccaa6(0x184)](_0x459e77=>{const _0x4133ce=_0x1ccaa6;if(_0x459e77[_0x4133ce(0x23b)]!=config[_0x4133ce(0x162)]){const _0x38e4a2=_0xc923db['find'](_0x331d82=>_0x331d82==_0x459e77[_0x4133ce(0x151)]);!_0x38e4a2&&(_0x21a543=!![]);}}),_0x2d9596[_0x1ccaa6(0x1df)]['forEach'](_0x1839aa=>{const _0x4e14d3=_0x1ccaa6,_0x3365c6=config[_0x4e14d3(0x1df)][_0x4e14d3(0x1e1)](_0x1f90a7=>_0x1f90a7[_0x4e14d3(0x23b)]==_0x1839aa[_0x4e14d3(0x23b)]);if(_0x3365c6&&_0x1839aa[_0x4e14d3(0x2bc)]!=_0x3365c6['offset'])_0x43d62d=!![];});let _0x38f897=dbConfig[_0x1ccaa6(0x1c4)](_0x1ccaa6(0x1de))['find']({'botID':botID})[_0x1ccaa6(0x153)]();_0x2d9596={..._0x2d9596,'apiKey':crypt['decrypt'](secure[_0x1ccaa6(0x152)],_0x2d9596[_0x1ccaa6(0x278)])[_0x1ccaa6(0x262)],'apiSecret':crypt[_0x1ccaa6(0x218)](secure[_0x1ccaa6(0x152)],_0x2d9596[_0x1ccaa6(0x237)])['message']};_0x2d9596[_0x1ccaa6(0x2b1)]&&(_0x2d9596[_0x1ccaa6(0x2b1)]=crypt[_0x1ccaa6(0x218)](secure['privateKey'],_0x2d9596[_0x1ccaa6(0x2b1)])['message']);let _0x21e8b4=![];if(_0x38f897){_0x2d9596[_0x1ccaa6(0x278)]==_0x1ccaa6(0x24b)?_0x2d9596[_0x1ccaa6(0x278)]=config[_0x1ccaa6(0x278)]:_0x21e8b4=!![];_0x2d9596[_0x1ccaa6(0x237)]=='************'?_0x2d9596[_0x1ccaa6(0x237)]=config['apiSecret']:_0x21e8b4=!![];if(_0x2d9596[_0x1ccaa6(0x2b1)]==_0x1ccaa6(0x24b))_0x2d9596['apiPassword']=config[_0x1ccaa6(0x2b1)];else{if(_0x2d9596[_0x1ccaa6(0x2b1)])_0x21e8b4=!![];}dbConfig[_0x1ccaa6(0x1c4)](_0x1ccaa6(0x1de))[_0x1ccaa6(0x1e1)]({'botID':botID})[_0x1ccaa6(0x14f)](_0x2d9596)[_0x1ccaa6(0x22e)]();}else dbConfig[_0x1ccaa6(0x1c4)](_0x1ccaa6(0x1de))['push'](_0x2d9596)[_0x1ccaa6(0x22e)](),_0x21e8b4=!![],process[_0x1ccaa6(0x20b)]({'status':'enabled','live':_0x1ccaa6(0x27c)},_0x3c7b01=>{});process[_0x1ccaa6(0x20b)]({'botname':_0x2d9596[_0x1ccaa6(0x150)]},_0x1a1362=>{}),updateBotManager(),config={..._0x2d9596},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x21e8b4)await reset(_0x5700cc,!![]);else _0x21a543||_0x43d62d?await reset(_0x5700cc,![]):getBalances();blockTransactionDetection=![],logger[_0x1ccaa6(0x235)](_0x1ccaa6(0x297));}async function storeHeadless(_0x432a7d){const _0x1644bf=_0x4a530d,_0x26a9ae={...config,'headless':_0x432a7d[_0x1644bf(0x25c)]};let _0x5bdaa7=dbConfig[_0x1644bf(0x1c4)](_0x1644bf(0x1de))[_0x1644bf(0x1e1)]({'botID':botID})['value']();_0x5bdaa7&&dbConfig[_0x1644bf(0x1c4)](_0x1644bf(0x1de))[_0x1644bf(0x1e1)]({'botID':botID})[_0x1644bf(0x14f)](_0x26a9ae)[_0x1644bf(0x22e)](),config={..._0x26a9ae},updateBotManager(),proxyEmit(_0x1644bf(0x1ad),emittedConfiguration());}async function storeFiat(_0x3e71b6){const _0x403e86=_0x4a530d,_0x1611da={...config,'fiat':_0x3e71b6};let _0x17efd2=dbConfig[_0x403e86(0x1c4)](_0x403e86(0x1de))[_0x403e86(0x1e1)]({'botID':botID})['value']();_0x17efd2&&dbConfig[_0x403e86(0x1c4)](_0x403e86(0x1de))[_0x403e86(0x1e1)]({'botID':botID})[_0x403e86(0x14f)](_0x1611da)['write'](),config={..._0x1611da},proxyEmit(_0x403e86(0x1ad),emittedConfiguration());}function resetHistory(){const _0x5572f4=_0x4a530d;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x5572f4(0x2b3)](path[_0x5572f4(0x19e)](configpath,'bot-'+botID+_0x5572f4(0x270))))fs[_0x5572f4(0x202)](path['join'](configpath,'bot-'+botID+'-events.json'));if(fs[_0x5572f4(0x2b3)](path[_0x5572f4(0x19e)](configpath,_0x5572f4(0x16b)+botID+_0x5572f4(0x29e))))fs[_0x5572f4(0x202)](path['join'](configpath,_0x5572f4(0x16b)+botID+'-performance.json'));if(fs[_0x5572f4(0x2b3)](path[_0x5572f4(0x19e)](configpath,_0x5572f4(0x16b)+botID+'-results.json')))fs[_0x5572f4(0x202)](path['join'](configpath,'bot-'+botID+_0x5572f4(0x29d)));}catch(_0x3188d1){if(_0x3188d1)logger[_0x5572f4(0x22f)]('Error\x20while\x20deleting\x20files:\x20',_0x3188d1);}const _0x178e80=getDate();let _0x33ca13=[];currentCoins[_0x5572f4(0x184)](_0x537e96=>{const _0x28e72c=_0x5572f4;_0x33ca13[_0x28e72c(0x1a8)]({'coin':_0x537e96[_0x28e72c(0x23b)],'number':_0x537e96[_0x28e72c(0x25e)],'price':_0x537e96[_0x28e72c(0x2ad)]});});let _0x2bbf59=dbConfig[_0x5572f4(0x1c4)](_0x5572f4(0x1de))['find']({'botID':botID})[_0x5572f4(0x153)]();_0x2bbf59&&(dbConfig[_0x5572f4(0x1c4)](_0x5572f4(0x1de))['find']({'botID':botID})[_0x5572f4(0x14f)]({'liquidity':[{'date':_0x178e80,'changes':_0x33ca13}]})['write'](),config[_0x5572f4(0x1c7)]=[]),process[_0x5572f4(0x20b)]({'stop':_0x5572f4(0x234)},_0x12663a=>{});}function noslash(_0x23b8bc){return _0x23b8bc['replace']('/','');}function updateHighestFee(_0x2911eb){const _0x1f9a54=_0x4a530d;if(_0x2911eb[_0x1f9a54(0x241)]){let _0x547bb7={'filled':_0x2911eb[_0x1f9a54(0x18d)]*_0x2911eb['price'],'amount':_0x2911eb[_0x1f9a54(0x18d)]*_0x2911eb[_0x1f9a54(0x208)],'side':_0x2911eb['side']==_0x1f9a54(0x24d)?_0x1f9a54(0x156):_0x1f9a54(0x24d),'price':0x1/_0x2911eb[_0x1f9a54(0x208)]};_0x2911eb={..._0x2911eb,..._0x547bb7};}const _0x2abe6d=defaultFee*_0x2911eb[_0x1f9a54(0x18d)]*_0x2911eb[_0x1f9a54(0x208)];lastFees['recent20']['length']===0x14&&lastFees[_0x1f9a54(0x1fe)][_0x1f9a54(0x2c3)](),lastFees[_0x1f9a54(0x1fe)]['push'](_0x2abe6d),lastFees[_0x1f9a54(0x141)]=Math[_0x1f9a54(0x209)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x5cdfbe){const _0x4d98d5=_0x4a530d;logger[_0x4d98d5(0x235)](_0x4d98d5(0x25a)+_0x5cdfbe['symbol']+_0x4d98d5(0x1da)+_0x5cdfbe[_0x4d98d5(0x2b7)]+_0x4d98d5(0x1da)+_0x5cdfbe['id']);let _0x4b15be=_0x5cdfbe[_0x4d98d5(0x2b7)],_0x1f198b=![];currentCoins[_0x4d98d5(0x184)](_0x10e212=>{const _0x2f00d2=_0x4d98d5;_0x10e212[_0x2f00d2(0x151)]==_0x5cdfbe[_0x2f00d2(0x151)]&&(_0x1f198b=!![]);});if(!_0x1f198b)return;const _0x24bdbc=currentCoins[_0x4d98d5(0x1e1)](_0x52d196=>_0x52d196[_0x4d98d5(0x151)]==_0x5cdfbe[_0x4d98d5(0x151)]),_0x685855=_0x1ad186=>{const _0x85726e=_0x4d98d5;if(_0x24bdbc)_0x24bdbc[_0x85726e(0x21e)]=_0x1ad186;};if(_0x4b15be==_0x4d98d5(0x1cc))_0x685855(_0x4d98d5(0x1cc));else{if(_0x4b15be=='canceled'){_0x685855(_0x4d98d5(0x1ed));const _0x360128=await getCoins();[currentCoins,currentCoinsAll]=_0x360128,await getOpenOrders(),handleOpenOrders();}else{if(_0x4b15be==_0x4d98d5(0x26d)){logger[_0x4d98d5(0x235)](_0x4d98d5(0x276)+_0x5cdfbe[_0x4d98d5(0x151)]+_0x4d98d5(0x1da)+_0x5cdfbe[_0x4d98d5(0x18d)]+_0x4d98d5(0x1da)+_0x5cdfbe['id']);let _0x143ca4=![];if(lastOrders)for(const _0x1aa5fd of lastOrders){const _0x45bb14=0xc8,_0x1aa841=0x1388;let _0xf620cf=0x0;while(!_0x1aa5fd[_0x4d98d5(0x20e)]&&_0xf620cf*_0x45bb14<_0x1aa841){_0xf620cf++,await sleep(_0x45bb14);}if(_0xf620cf>0x0)logger[_0x4d98d5(0x235)](_0x4d98d5(0x265)+_0xf620cf*_0x45bb14/0x3e8+_0x4d98d5(0x223));if(_0x1aa5fd[_0x4d98d5(0x20e)]==_0x5cdfbe['id']){logger[_0x4d98d5(0x235)](_0x4d98d5(0x256)+_0x5cdfbe['id']),_0x143ca4=!![];if(_0x1aa5fd[_0x4d98d5(0x18d)]==0x0){logger[_0x4d98d5(0x235)](_0x4d98d5(0x291)+_0x5cdfbe['id']);if(_0x5cdfbe['average'])_0x1aa5fd[_0x4d98d5(0x208)]=_0x5cdfbe[_0x4d98d5(0x198)];else{if(_0x5cdfbe[_0x4d98d5(0x208)])_0x1aa5fd['price']=_0x5cdfbe[_0x4d98d5(0x208)];else{}}_0x1aa5fd[_0x4d98d5(0x18d)]=_0x5cdfbe[_0x4d98d5(0x18d)],updateHighestFee(_0x1aa5fd),_0x685855('filled'),await validateOrders();if(lockOrders==ORDERS[_0x4d98d5(0x1b4)]){const _0x449ad3=await getCoins();[currentCoins,currentCoinsAll]=_0x449ad3;}_0x1aa5fd[_0x4d98d5(0x254)]={'currency':_0x5cdfbe[_0x4d98d5(0x254)]?_0x5cdfbe[_0x4d98d5(0x254)][_0x4d98d5(0x188)]:null,'cost':_0x5cdfbe[_0x4d98d5(0x254)]?_0x5cdfbe[_0x4d98d5(0x254)][_0x4d98d5(0x14a)]:0x0},await updateCoinResults(_0x1aa5fd);}}}if(!_0x143ca4){logger['debug'](_0x4d98d5(0x14d)+_0x5cdfbe['id']),_0x685855(_0x4d98d5(0x18d));const _0x5c8910=await getCoins();[currentCoins,currentCoinsAll]=_0x5c8910,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x43df83=JSON[_0x4d98d5(0x1e8)](lastBalances[_0x4d98d5(0x1df)]);const _0x35e856=_0x43df83['find'](_0x37c0ab=>_0x37c0ab[_0x4d98d5(0x151)]==_0x5cdfbe['symbol']);if(_0x35e856){if(_0x4b15be==_0x4d98d5(0x1cc))_0x35e856[_0x4d98d5(0x21e)]=_0x35e856[_0x4d98d5(0x21e)]=='filled'?_0x4d98d5(0x18d):'open';else{if(_0x4b15be==_0x4d98d5(0x1ed))_0x35e856['orderstatus']=_0x35e856[_0x4d98d5(0x21e)]=='filled'?_0x4d98d5(0x18d):'canceled';else _0x4b15be==_0x4d98d5(0x26d)&&(_0x35e856['orderstatus']=_0x4d98d5(0x18d));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4d98d5(0x1fa)](_0x43df83)},proxyEmit(_0x4d98d5(0x2a0),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x201221=_0x4a530d;await getOpenOrders();let _0x4594f5=![];currentCoins[_0x201221(0x184)](_0x25450a=>{const _0x1bd372=_0x201221;_0x4594f5=allOpenOrders[_0x1bd372(0x1e1)](_0x57c7d9=>_0x57c7d9['symbol']==_0x25450a[_0x1bd372(0x151)]),_0x25450a[_0x1bd372(0x21e)]=_0x4594f5?_0x1bd372(0x1cc):_0x1bd372(0x1dd);});}async function getCoins(_0x37e854=!![],_0x4c81af=config[_0x4a530d(0x162)]){const _0x19aef6=_0x4a530d;let _0x322bc6,_0x504417=[],_0x5e744f=[],_0x54eb63=[],_0x4bc9ad=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x322bc6=await exchange[_0x19aef6(0x212)](),mybalances=_0x322bc6[_0x19aef6(0x21d)];for(const [_0x57c164,_0x59df8e]of Object['entries'](mybalances)){_0x4bc9ad[_0x19aef6(0x1a8)](_0x57c164);}if(_0x4c81af=='')for(const [_0x50a51f,_0x16bd93]of Object[_0x19aef6(0x18c)](mybalances)){_0x16bd93!=0x0&&_0x5e744f['push']({'coin':_0x50a51f});}else{let _0x5c22ae=![];for(const [_0x5b4f66,_0x1c24d6]of Object[_0x19aef6(0x18c)](mybalances)){if(_0x4bc9ad[_0x19aef6(0x1c3)](_0x5b4f66)){const _0x590729=config[_0x19aef6(0x1df)][_0x19aef6(0x1e1)](_0x3f1033=>_0x3f1033[_0x19aef6(0x23b)]==_0x5b4f66),_0x39b9fc=_0x5b4f66+'/'+_0x4c81af,_0x5e79b9=_0x4c81af+'/'+_0x5b4f66,_0x5449fc=currentCoins[_0x19aef6(0x1e1)](_0x26b746=>_0x26b746[_0x19aef6(0x23b)]==_0x5b4f66);_0x5c22ae=![];if((_0x1c24d6!=0x0||_0x590729)&&(allSymbols[_0x19aef6(0x1c3)](_0x39b9fc)||_0x5b4f66==_0x4c81af))_0x5b4f66!=_0x4c81af&&_0x504417[_0x19aef6(0x1a8)](_0x39b9fc),_0x5e744f[_0x19aef6(0x1a8)]({'coin':_0x5b4f66,'symbol':_0x39b9fc,'reverse':![],'number':Math['max'](_0x1c24d6+(_0x590729&&_0x590729[_0x19aef6(0x2bc)]||0x0),0x0),'orderstatus':_0x5449fc?_0x5449fc['orderstatus']:_0x19aef6(0x1dd)});else(_0x1c24d6!=0x0||_0x590729)&&allSymbols[_0x19aef6(0x1c3)](_0x5e79b9)&&(_0x5b4f66!=_0x4c81af&&_0x504417['push'](_0x5e79b9),_0x5e744f[_0x19aef6(0x1a8)]({'coin':_0x5b4f66,'symbol':_0x5e79b9,'reverse':!![],'number':Math[_0x19aef6(0x209)](_0x1c24d6+(_0x590729&&_0x590729[_0x19aef6(0x2bc)]||0x0),0x0),'orderstatus':_0x5449fc?_0x5449fc[_0x19aef6(0x21e)]:_0x19aef6(0x1dd)}));}}}}catch(_0x4df6f1){if(!_0x37e854)handleErrorNoStop(_0x4df6f1,'getCoins()');else await handleError(_0x4df6f1,_0x19aef6(0x146));}return _0x54eb63=cloneDeep(_0x5e744f),_0x5e744f=_0x5e744f[_0x19aef6(0x155)](_0xeb83e8=>{const _0x460c46=_0x19aef6,_0xbed88b=config[_0x460c46(0x1df)]['find'](_0x4f63e4=>_0x4f63e4[_0x460c46(0x23b)]==_0xeb83e8['coin']);return _0xbed88b&&!_0xbed88b[_0x460c46(0x274)];}),[_0x5e744f,_0x54eb63];}async function getCoinNumber(_0x27cf67){const _0x255ce2=_0x4a530d;let _0x91a8b4;try{const _0x5901a3=await exchange[_0x255ce2(0x212)]();_0x91a8b4=_0x5901a3[_0x255ce2(0x21d)][_0x27cf67];}catch(_0xf76ab0){await handleError(_0xf76ab0,_0x255ce2(0x29f));}return _0x91a8b4;}async function getOpenOrders(){const _0x1b620b=_0x4a530d;let _0x58c8ec;allOpenOrders=[];try{for(const _0x364bde of config['portfolio']){!_0x364bde[_0x1b620b(0x274)]&&_0x364bde['coin']!=config[_0x1b620b(0x162)]&&(_0x58c8ec=await exchange[_0x1b620b(0x2ac)](_0x364bde[_0x1b620b(0x151)]),_0x58c8ec['length']>0x0&&allOpenOrders['push'](_0x58c8ec[0x0]));}}catch(_0xc26cb5){await handleError(_0xc26cb5,_0x1b620b(0x271));}}async function handleOpenOrders(_0x16a244=0x0){const _0x3e0ef9=_0x4a530d;allOpenOrders[_0x3e0ef9(0x19b)]==0x0&&lockOrders==ORDERS[_0x3e0ef9(0x1b4)]&&allOrdersPlaced&&(_0x16a244==0x0?(logger[_0x3e0ef9(0x235)](_0x3e0ef9(0x180)),_0x16a244++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x3e0ef9(0x1f0)),validateOrders(_0x3e0ef9(0x26e))));}async function testAPI(_0x5db26e){const _0xab9457=_0x4a530d,_0x3f7ba5=ccxt[_0xab9457(0x216)][_0x5db26e[_0xab9457(0x29a)][_0xab9457(0x1d2)]()],_0x52472e=new _0x3f7ba5({'apiKey':_0x5db26e[_0xab9457(0x278)],'secret':_0x5db26e['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xab9457(0x24a)}});if(_0x5db26e[_0xab9457(0x2b1)])_0x52472e[_0xab9457(0x298)]=_0x5db26e[_0xab9457(0x2b1)];try{await _0x52472e[_0xab9457(0x1bc)]();}catch(_0xf56616){throw _0xf56616;}}function cloneDeep(_0x36ce15){const _0x37e8ec=_0x4a530d;return JSON[_0x37e8ec(0x1e8)](JSON['stringify'](_0x36ce15));}async function getPortfolio(_0x30e9c1){const _0x3f2278=_0x4a530d;let _0x4a49d1=[],_0x1cd7dd=[],_0x2edb8d=[],_0x33cc27;if(_0x30e9c1[_0x3f2278(0x278)]!==_0x3f2278(0x24b)||_0x30e9c1['apiSecret']!=='************'||_0x30e9c1[_0x3f2278(0x2b1)]&&_0x30e9c1[_0x3f2278(0x2b1)]!==_0x3f2278(0x24b)){if(config[_0x3f2278(0x29a)]){if(_0x30e9c1[_0x3f2278(0x278)]==_0x3f2278(0x24b))_0x30e9c1[_0x3f2278(0x278)]=config[_0x3f2278(0x278)];if(_0x30e9c1[_0x3f2278(0x237)]==_0x3f2278(0x24b))_0x30e9c1[_0x3f2278(0x237)]=config[_0x3f2278(0x237)];if(_0x30e9c1['apiPassword']==_0x3f2278(0x24b))_0x30e9c1[_0x3f2278(0x2b1)]=config[_0x3f2278(0x2b1)];try{await testAPI(_0x30e9c1);}catch(_0x2e29c3){if(_0x2e29c3[_0x3f2278(0x227)]()[_0x3f2278(0x1c3)]('AuthenticationError')){logger[_0x3f2278(0x235)](_0x3f2278(0x240)),proxyEmit(_0x3f2278(0x1df),![]);return;}else{handleError(_0x2e29c3,_0x3f2278(0x16f));return;}}}await initExchange(_0x30e9c1[_0x3f2278(0x29a)],_0x30e9c1[_0x3f2278(0x278)],_0x30e9c1['apiSecret'],_0x30e9c1[_0x3f2278(0x2b1)]);try{await loadSymbols(_0x30e9c1[_0x3f2278(0x29a)],!![]);}catch(_0x2e5b93){if(_0x2e5b93[_0x3f2278(0x227)]()[_0x3f2278(0x1c3)](_0x3f2278(0x2b4))){proxyEmit(_0x3f2278(0x1df),![]);return;}else{handleError(_0x2e5b93,_0x3f2278(0x18e));return;}}const _0x29733e=await getCoins(![],_0x30e9c1[_0x3f2278(0x162)]);_0x2edb8d=cloneDeep(_0x29733e[0x1]);}else _0x2edb8d=cloneDeep(currentCoinsAll);if(_0x30e9c1[_0x3f2278(0x162)]=='')proxyEmit(_0x3f2278(0x1df),_0x2edb8d);else{_0x2edb8d['forEach'](_0x385cbf=>{const _0x45de05=_0x3f2278;if(_0x385cbf['coin']!=_0x30e9c1[_0x45de05(0x162)])_0x4a49d1['push'](_0x385cbf[_0x45de05(0x151)]);});try{_0x1cd7dd=await exchange[_0x3f2278(0x192)](_0x4a49d1);}catch(_0xe4e383){if(_0xe4e383[_0x3f2278(0x227)]()[_0x3f2278(0x1c3)](_0x3f2278(0x2b4))){proxyEmit('portfolio',![]);return;}else{handleError(_0xe4e383,'getPortfolio(2)');return;}}_0x2edb8d[_0x3f2278(0x184)](_0x1d16cb=>{const _0x4410c9=_0x3f2278;_0x1d16cb[_0x4410c9(0x23b)]!=_0x30e9c1['basecoin']?_0x33cc27=_0x1d16cb['reverse']?0x1/_0x1cd7dd[_0x1d16cb[_0x4410c9(0x151)]]['last']:_0x1cd7dd[_0x1d16cb['symbol']][_0x4410c9(0x2ad)]:_0x33cc27=0x1,_0x1d16cb[_0x4410c9(0x208)]=formatResult(_0x33cc27,0x8);}),proxyEmit(_0x3f2278(0x1df),_0x2edb8d);}}function truncateTradeAmount(_0x4182ff,_0x1bedf0){const _0x201918=_0x4a530d;let _0xe74638=0x0;try{_0xe74638=exchange[_0x201918(0x261)](_0x4182ff,_0x1bedf0);}catch(_0x145f24){}return _0xe74638;}function checkMinimums(_0x556be8){const _0x3a015f=_0x4a530d;let _0x5570e5=!![];const _0x331547=!_0x556be8[_0x3a015f(0x241)]?markets[_0x556be8['symbol']]['limits']['amount'][_0x3a015f(0x295)]:markets[_0x556be8[_0x3a015f(0x151)]][_0x3a015f(0x18a)][_0x3a015f(0x14a)]['min'],_0x172bb2=!_0x556be8[_0x3a015f(0x241)]?markets[_0x556be8[_0x3a015f(0x151)]][_0x3a015f(0x18a)][_0x3a015f(0x14a)][_0x3a015f(0x295)]:markets[_0x556be8['symbol']][_0x3a015f(0x18a)][_0x3a015f(0x1f7)][_0x3a015f(0x295)],_0x2f90a5=truncateTradeAmount(_0x556be8[_0x3a015f(0x151)],_0x556be8[_0x3a015f(0x193)]);_0x556be8[_0x3a015f(0x193)]=_0x2f90a5;if(Math['abs'](_0x2f90a5)<_0x331547)_0x5570e5=![];if(Math['abs'](_0x2f90a5)*_0x556be8[_0x3a015f(0x2ad)]<_0x172bb2)_0x5570e5=![];if(_0x556be8[_0x3a015f(0x1ea)]=='sell'){let _0x1d8d5e=config[_0x3a015f(0x1df)][_0x3a015f(0x1e1)](_0x2e8c31=>_0x2e8c31[_0x3a015f(0x23b)]==_0x556be8[_0x3a015f(0x23b)]);if(_0x1d8d5e[_0x3a015f(0x2bc)]>0x0){if(Math[_0x3a015f(0x161)](_0x2f90a5)>_0x556be8[_0x3a015f(0x25e)]-_0x1d8d5e['offset'])_0x5570e5=![];}else{if(Math[_0x3a015f(0x161)](_0x2f90a5)>_0x556be8[_0x3a015f(0x25e)])_0x5570e5=![];}}if(_0x556be8[_0x3a015f(0x1ea)]==_0x3a015f(0x156)){let _0x3dadc3=config[_0x3a015f(0x1df)][_0x3a015f(0x1e1)](_0x56cabc=>_0x56cabc[_0x3a015f(0x23b)]==config['basecoin']),_0x53cb12=currentCoins[_0x3a015f(0x1e1)](_0x38b3a0=>_0x38b3a0[_0x3a015f(0x23b)]==config['basecoin']);if(_0x3dadc3['offset']>0x0){if(Math['abs'](_0x2f90a5)*_0x556be8[_0x3a015f(0x2ad)]>_0x53cb12['number']-_0x3dadc3[_0x3a015f(0x2bc)])_0x5570e5=![];}else{if(Math[_0x3a015f(0x161)](_0x2f90a5)*_0x556be8['last']>_0x53cb12[_0x3a015f(0x25e)])_0x5570e5=![];}}return _0x5570e5;}async function getBalances(_0x153d7c=!![]){const _0x17b651=_0x4a530d;let _0x4b9ce2=0x0,_0x5e42d4;const _0x56c3c1=config[_0x17b651(0x1b9)];if(config[_0x17b651(0x25c)]&&config[_0x17b651(0x22a)]<0x0)await validate24hChanges();currentCoins[_0x17b651(0x184)](_0x12b92d=>{const _0x20ca11=_0x17b651;if(_0x12b92d[_0x20ca11(0x23b)]!=config['basecoin']){let _0x433b72=global[_0x20ca11(0x1d6)][noslash(_0x12b92d[_0x20ca11(0x151)])];_0x5e42d4=_0x12b92d['reverse']?0x1/_0x433b72:_0x433b72;}else _0x5e42d4=0x1;let _0x408c6f=_0x12b92d[_0x20ca11(0x25e)]*_0x5e42d4;_0x4b9ce2+=_0x408c6f,_0x12b92d[_0x20ca11(0x2ad)]=formatResult(Number(_0x5e42d4),0x8),_0x12b92d[_0x20ca11(0x153)]=_0x408c6f;}),currentCoins[_0x17b651(0x184)](_0x328898=>{const _0xa53c9a=_0x17b651;let _0xe5e180=config['portfolio'][_0xa53c9a(0x1e1)](_0x6cc473=>_0x6cc473['coin']==_0x328898[_0xa53c9a(0x23b)]),_0x3f0ac7=Number(_0xe5e180['distribution']),_0xa69791=_0x328898['value']/_0x4b9ce2*0x64,_0x80bd03=_0x3f0ac7*_0x4b9ce2/0x64/_0x328898['last']-_0x328898[_0xa53c9a(0x25e)];_0x328898[_0xa53c9a(0x285)]=formatResult(_0xa69791,0x3),_0x328898[_0xa53c9a(0x1a5)]=formatResult(_0x3f0ac7,0x3),_0x328898[_0xa53c9a(0x193)]=formatResult(_0x80bd03,0x8),_0x328898[_0xa53c9a(0x1ea)]='',_0x328898[_0xa53c9a(0x158)]=![];if(_0x328898[_0xa53c9a(0x23b)]!=config['basecoin']){if(_0x328898['distribution']>_0x3f0ac7)_0x328898[_0xa53c9a(0x1ea)]=_0xa53c9a(0x24d),_0x328898[_0xa53c9a(0x158)]=checkMinimums(_0x328898);else _0x328898[_0xa53c9a(0x285)]<_0x3f0ac7&&(_0x328898['side']=_0xa53c9a(0x156),_0x328898[_0xa53c9a(0x158)]=checkMinimums(_0x328898));}_0x328898['delta']=_0x328898[_0xa53c9a(0x285)]/_0x328898['target']-0x1;if(_0x328898[_0xa53c9a(0x21e)]==_0xa53c9a(0x18d)||_0x328898[_0xa53c9a(0x21e)]==_0xa53c9a(0x1ed))_0x328898[_0xa53c9a(0x21e)]=_0xa53c9a(0x1dd);}),currentCoins[_0x17b651(0x190)]((_0x1e319d,_0x294dc7)=>_0x1e319d['delta']<_0x294dc7[_0x17b651(0x18b)]?0x1:_0x294dc7[_0x17b651(0x18b)]<_0x1e319d[_0x17b651(0x18b)]?-0x1:0x0);const _0x447142=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x447142['eur'],'usd':_0x447142['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x56c3c1},proxyEmit(_0x17b651(0x2a0),{'serverversion':serverversion,'balances':lastBalances});if(_0x153d7c){if(config[_0x17b651(0x25c)])headlessMode({'portfolio':currentCoins,'threshold':_0x56c3c1});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x56c3c1});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x12c049=getNormalizedPerformance();getStartingBalances(_0x12c049),emitPerformance(_0x12c049);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x13d285=getNormalizedPerformance();emitPerformance(_0x13d285),getStartingBalances(_0x13d285),logger[_0x17b651(0x235)](_0x17b651(0x222));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xad1497=_0x4a530d;if(!lastBalances)return;let _0x3d6e90=[],_0x3aaed4,_0x39bc86=JSON['parse'](lastBalances[_0xad1497(0x1df)]);_0x39bc86[_0xad1497(0x190)]((_0x3ed59c,_0x2ebf06)=>_0x3ed59c[_0xad1497(0x23b)]>_0x2ebf06['coin']?0x1:_0x2ebf06[_0xad1497(0x23b)]>_0x3ed59c[_0xad1497(0x23b)]?-0x1:0x0),_0x39bc86['forEach'](_0x23d2e7=>{const _0x5cd4b5=_0xad1497;let _0x9bff4c={'coin':_0x23d2e7[_0x5cd4b5(0x23b)],'number':_0x23d2e7[_0x5cd4b5(0x25e)],'price':_0x23d2e7[_0x5cd4b5(0x2ad)]};_0x3d6e90['push'](_0x9bff4c);});const _0x34cd=await getFiat();_0x3aaed4={'date':lastBalances[_0xad1497(0x1b1)]['split']('\x20')[0x0],'eur':_0x34cd[_0xad1497(0x1c6)],'usd':_0x34cd[_0xad1497(0x1bf)],'coins':_0x3d6e90};let _0x45f5dd=dbPerformance[_0xad1497(0x1c4)](_0xad1497(0x199))['find']({'date':_0x3aaed4[_0xad1497(0x1ae)]})[_0xad1497(0x153)]();_0x45f5dd?_0x3aaed4['date']!=config['startdate']&&dbPerformance[_0xad1497(0x1c4)](_0xad1497(0x199))['find']({'date':_0x3aaed4[_0xad1497(0x1ae)]})['assign'](_0x3aaed4)[_0xad1497(0x22e)]():dbPerformance[_0xad1497(0x1c4)](_0xad1497(0x199))[_0xad1497(0x1a8)](_0x3aaed4)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xbb2dd=_0x4a530d;let _0x4a006f=[];if(dbPerformance[_0xbb2dd(0x1dc)](_0xbb2dd(0x199))[_0xbb2dd(0x153)]()){let _0x56a77e=dbPerformance['get'](_0xbb2dd(0x199))['cloneDeep']()[_0xbb2dd(0x155)](_0x4b3170=>{const _0x49431e=_0xbb2dd;if(_0x4b3170['coins'][_0x49431e(0x19b)]==0x0)return![];else return!![];})[_0xbb2dd(0x2a1)](_0xbb2dd(0x1ae))[_0xbb2dd(0x153)](),_0x3dee2b=[...config[_0xbb2dd(0x1c7)]];_0x3dee2b['sort']((_0x14a1ae,_0x38090a)=>_0x14a1ae['date']>_0x38090a[_0xbb2dd(0x1ae)]?-0x1:_0x38090a[_0xbb2dd(0x1ae)]>_0x14a1ae[_0xbb2dd(0x1ae)]?0x1:0x0);let _0x35ebd0=0x1,_0x10d88f=[],_0x2f8737=0x0;_0x56a77e[_0xbb2dd(0x165)]()[_0xbb2dd(0x241)]()[_0xbb2dd(0x184)]((_0x2ae59b,_0x15d9ff)=>{const _0x46ca4a=_0xbb2dd;if(_0x3dee2b[_0x2f8737]){if(_0x56a77e[_0x56a77e[_0x46ca4a(0x19b)]-_0x15d9ff]&&_0x3dee2b[_0x2f8737]['date']==_0x56a77e[_0x56a77e['length']-_0x15d9ff][_0x46ca4a(0x1ae)]){if(_0x15d9ff<_0x56a77e['length']){let _0x382c5e=0x0,_0x2025ac=0x0;_0x56a77e[_0x56a77e['length']-_0x15d9ff]['coins']['forEach'](_0x4854fa=>{_0x2025ac+=_0x4854fa['number']*_0x4854fa['price'];}),_0x3dee2b[_0x2f8737][_0x46ca4a(0x1f2)][_0x46ca4a(0x184)](_0x50eaa4=>{const _0x2d6768=_0x46ca4a;_0x382c5e+=_0x50eaa4[_0x2d6768(0x25e)]*_0x50eaa4[_0x2d6768(0x208)];}),_0x35ebd0*=_0x382c5e/(_0x2025ac-_0x382c5e)+0x1;}_0x2f8737++;}}let _0xbc1ebc=0x0;_0x2ae59b[_0x46ca4a(0x273)][_0x46ca4a(0x184)](_0x8d0e36=>{const _0x41f071=_0x46ca4a;_0xbc1ebc+=_0x8d0e36[_0x41f071(0x25e)]*_0x8d0e36[_0x41f071(0x208)];}),_0x10d88f[_0x56a77e['length']-_0x15d9ff-0x1]=_0xbc1ebc*(_0x35ebd0-0x1);});let _0x2eb4bc=[];_0x3dee2b=[...config[_0xbb2dd(0x1c7)]]||[];let _0x2b5e96=0x0;_0x2f8737=0x0,_0x56a77e['forEach']((_0x229a47,_0x311e9a)=>{const _0x624a14=_0xbb2dd;if(_0x3dee2b[_0x2f8737]){const _0x31e372=fns[_0x624a14(0x1e8)](_0x3dee2b[_0x2f8737][_0x624a14(0x1ae)],'yyyy/MM/dd',new Date()),_0x4441d2=fns[_0x624a14(0x1e8)](_0x229a47['date'],'yyyy/MM/dd',new Date());if(fns[_0x624a14(0x1e0)](_0x31e372,_0x4441d2)){let _0x55ced2=0x0;_0x3dee2b[_0x2f8737][_0x624a14(0x1f2)]['forEach'](_0x527c1f=>{const _0x3a7817=_0x624a14;!_0x2eb4bc[_0x527c1f[_0x3a7817(0x23b)]]?_0x2eb4bc[_0x527c1f[_0x3a7817(0x23b)]]=_0x527c1f['number']:(_0x55ced2=_0x2eb4bc[_0x527c1f[_0x3a7817(0x23b)]],_0x2eb4bc[_0x527c1f[_0x3a7817(0x23b)]]+=_0x527c1f[_0x3a7817(0x25e)]);const _0x1c660e=_0x229a47[_0x3a7817(0x273)]['find'](_0x502c82=>_0x502c82[_0x3a7817(0x23b)]==_0x527c1f[_0x3a7817(0x23b)]);(!_0x1c660e||_0x1c660e[_0x3a7817(0x25e)]==0x0)&&(_0x2b5e96+=(-_0x527c1f[_0x3a7817(0x25e)]-_0x55ced2)*_0x527c1f[_0x3a7817(0x208)]);}),_0x2f8737++;}}_0x229a47[_0x624a14(0x273)][_0x624a14(0x184)]((_0x444aed,_0x2d9c7d)=>{const _0x115d6b=_0x624a14;_0x2eb4bc[_0x444aed[_0x115d6b(0x23b)]]&&(_0x444aed[_0x115d6b(0x1ab)]=_0x2eb4bc[_0x444aed[_0x115d6b(0x23b)]]);}),_0x4a006f['push']({'date':_0x229a47['date'],'eur':_0x229a47[_0x624a14(0x1c6)],'usd':_0x229a47['usd'],'offset':_0x10d88f[_0x311e9a],'netoffset':_0x2b5e96,'coins':_0x229a47['coins']});});}return _0x4a006f;}function emitPerformance(_0x40d827){const _0x16f2a8=_0x4a530d;_0x40d827[_0x16f2a8(0x19b)]!==0x0?(proxyEmit(_0x16f2a8(0x189),_0x40d827),lastPerformanceEmitted=getDate()):proxyEmit(_0x16f2a8(0x189),[]);}function getPerf(_0x193e54,_0x3a22ee){const _0x2b8fe2=_0x4a530d;let _0x3b6f24=0x0,_0xdb03d0=0x0,_0x400132=0x0;_0x193e54[_0x2b8fe2(0x273)][_0x2b8fe2(0x184)](_0x57cb9d=>{const _0x1c6cba=_0x2b8fe2;_0x3b6f24+=_0x57cb9d[_0x1c6cba(0x25e)]*_0x57cb9d[_0x1c6cba(0x208)];});_0x3a22ee&&(_0x3b6f24+=_0x193e54[_0x2b8fe2(0x2bc)]);if(config[_0x2b8fe2(0x162)]===_0x2b8fe2(0x200)||config[_0x2b8fe2(0x162)]===_0x2b8fe2(0x252))_0xdb03d0=_0x3b6f24*_0x193e54[_0x2b8fe2(0x1c6)],_0x400132=_0x3b6f24*_0x193e54['usd'];else{if(usdBasecoins[_0x2b8fe2(0x1c3)](config[_0x2b8fe2(0x162)]))_0xdb03d0=_0x3b6f24*_0x193e54[_0x2b8fe2(0x1c6)]/_0x193e54[_0x2b8fe2(0x1bf)],_0x400132=_0x3b6f24;else config[_0x2b8fe2(0x162)]===_0x2b8fe2(0x242)&&(_0xdb03d0=_0x3b6f24,_0x400132=_0x3b6f24*_0x193e54[_0x2b8fe2(0x1bf)]/_0x193e54[_0x2b8fe2(0x1c6)]);}return[_0x3b6f24,_0xdb03d0,_0x400132];}function getKPIs(_0x40f244,_0x4f8d35=_0x4a530d(0x242)){const _0x22a017=_0x4a530d,_0x377d4a=config[_0x22a017(0x162)],_0x201da4=lastBalances,_0x4eb4fd=currentCoins,_0x2e63eb=getNormalizedPerformance(),_0x161d0e=_0x40f244===_0x22a017(0x162)?_0x377d4a:_0x40f244==='fiat'||_0x40f244===_0x22a017(0x289)?_0x4f8d35:_0x22a017(0x1f3)+_0x377d4a,_0x42410a=_0x40f244===_0x22a017(0x1cd)?_0x22a017(0x260):_0x40f244===_0x22a017(0x289)?_0x22a017(0x260):_0x161d0e+'\x20value',_0x4e0b52=_0x40f244===_0x22a017(0x1cd)||_0x40f244===_0x22a017(0x289)?_0x22a017(0x260):_0x161d0e+'\x20change';let _0x5a802b=0x0;_0x4eb4fd['forEach'](_0x4209a0=>{const _0x481fe6=_0x22a017;_0x5a802b+=_0x4209a0[_0x481fe6(0x25e)]*_0x4209a0[_0x481fe6(0x2ad)];});if(_0x40f244===_0x22a017(0x23a)||_0x40f244==='net-fiat'){if(_0x377d4a==='BTC'||_0x377d4a===_0x22a017(0x252))_0x5a802b=_0x5a802b*(_0x4f8d35===_0x22a017(0x242)?_0x201da4[_0x22a017(0x1c6)]:_0x201da4[_0x22a017(0x1bf)]);else{if(usdBasecoins[_0x22a017(0x1c3)](_0x377d4a))_0x5a802b=_0x5a802b*(_0x4f8d35==='EUR'?_0x201da4[_0x22a017(0x1c6)]/_0x201da4[_0x22a017(0x1bf)]:0x1);else _0x377d4a===_0x22a017(0x242)&&(_0x5a802b=_0x5a802b*(_0x4f8d35===_0x22a017(0x242)?0x1:_0x201da4['usd']/_0x201da4[_0x22a017(0x1c6)]));}}let _0x944d9;if(_0x5a802b!==0x0){if(_0x40f244===_0x22a017(0x162))_0x944d9=(_0x5a802b/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4f8d35===_0x22a017(0x242))_0x944d9=(_0x5a802b/startingBalances[_0x22a017(0x1c6)]-0x1)*0x64;else _0x944d9=(_0x5a802b/startingBalances[_0x22a017(0x1bf)]-0x1)*0x64;}let _0x266bb8=0x0;if(startingBalances[_0x22a017(0x273)])_0x4eb4fd[_0x22a017(0x184)](_0x67beb6=>{const _0x5bbe4e=_0x22a017;let _0x50f0b1=startingBalances[_0x5bbe4e(0x273)][_0x5bbe4e(0x1e1)](_0x2b52e9=>_0x2b52e9[_0x5bbe4e(0x23b)]===_0x67beb6['coin']);if(_0x50f0b1&&_0x50f0b1[_0x5bbe4e(0x23b)]&&_0x67beb6[_0x5bbe4e(0x25e)]!==0x0)_0x266bb8+=_0x50f0b1['number']*_0x67beb6[_0x5bbe4e(0x2ad)];});let _0x803bd5=0x0;if(_0x2e63eb[_0x22a017(0x19b)]!==0x0){let _0x4d4b5f=_0x2e63eb[_0x2e63eb['length']-0x1];_0x803bd5=_0x4d4b5f[_0x22a017(0x1c0)];}_0x266bb8-=_0x803bd5;_0x40f244==='net-basecoin'&&(_0x944d9=(_0x5a802b-_0x266bb8)/startingBalances[_0x22a017(0x162)]*0x64,_0x5a802b=_0x5a802b-_0x266bb8);if(_0x40f244===_0x22a017(0x289)){let _0x21d619=_0x4f8d35==='EUR'?startingBalances[_0x22a017(0x1c6)]:startingBalances[_0x22a017(0x1bf)];if(_0x377d4a===_0x22a017(0x200)||_0x377d4a===_0x22a017(0x252))_0x266bb8=_0x4f8d35===_0x22a017(0x242)?_0x266bb8*_0x201da4[_0x22a017(0x1c6)]:_0x266bb8*_0x201da4[_0x22a017(0x1bf)];else{if(usdBasecoins[_0x22a017(0x1c3)](_0x377d4a))_0x266bb8=_0x4f8d35===_0x22a017(0x242)?_0x266bb8*_0x201da4[_0x22a017(0x1c6)]/_0x201da4[_0x22a017(0x1bf)]:_0x266bb8;else _0x377d4a===_0x22a017(0x242)&&(_0x266bb8=_0x4f8d35===_0x22a017(0x242)?_0x266bb8:_0x266bb8*_0x201da4[_0x22a017(0x1bf)]/_0x201da4['eur']);}_0x944d9=(_0x5a802b-_0x266bb8)/_0x21d619*0x64,_0x5a802b=_0x5a802b-_0x266bb8;}if(_0x944d9){if(_0x944d9<0x64)_0x944d9=_0x944d9[_0x22a017(0x292)](0x2);else{if(_0x944d9<0x3e8)_0x944d9=_0x944d9['toFixed'](0x1);else _0x944d9=_0x944d9[_0x22a017(0x292)](0x0);}}else _0x944d9=Number('0')[_0x22a017(0x292)](0x2);if(_0x5a802b){if(Math[_0x22a017(0x161)](_0x5a802b)<0.000001)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x2);else{if(Math['abs'](_0x5a802b)<0.1)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x6);else{if(Math[_0x22a017(0x161)](_0x5a802b)<0x1)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x5);else{if(Math[_0x22a017(0x161)](_0x5a802b)<0xa)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x4);else{if(Math[_0x22a017(0x161)](_0x5a802b)<0x64)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x3);else{if(Math['abs'](_0x5a802b)<0x3e8)_0x5a802b=_0x5a802b[_0x22a017(0x292)](0x2);else _0x5a802b=_0x5a802b[_0x22a017(0x292)](0x2);}}}}}}else _0x5a802b=Number('0')[_0x22a017(0x292)](0x2);}else _0x944d9=Number('0')[_0x22a017(0x292)](0x2);return{'value':_0x5a802b,'change':_0x944d9,'leftTxt':_0x42410a,'rightTxt':_0x4e0b52};}async function getStartingBalances(_0xe2b142,_0x4aae=!![]){const _0xfd089e=_0x4a530d;if(_0xe2b142['length']!==0x0){const [_0x5e11a9,_0x44d98b,_0x59ce9a]=getPerf(_0xe2b142[0x0],!![]);let _0x46f72c=[];config['portfolio'][_0xfd089e(0x184)](_0x4d1eef=>{const _0x15593f=_0xfd089e;let _0x58d788=0x0,_0x5ec82c;config['liquidity'][_0x15593f(0x184)](_0x459b9f=>{const _0x16d8d1=_0x15593f;let _0x3f1321=_0x459b9f[_0x16d8d1(0x1f2)]['find'](_0x3280a1=>_0x3280a1[_0x16d8d1(0x23b)]==_0x4d1eef['coin']);if(_0x3f1321){_0x58d788+=_0x3f1321['number'];if(!_0x5ec82c)_0x5ec82c=_0x3f1321[_0x16d8d1(0x208)];}}),_0x46f72c[_0x15593f(0x1a8)]({'coin':_0x4d1eef[_0x15593f(0x23b)],'number':_0x58d788,'initialprice':_0x5ec82c});});const _0x189a56={'basecoin':_0x5e11a9,'eur':_0x44d98b,'usd':_0x59ce9a,'coins':_0x46f72c};if(_0x4aae)proxyEmit(_0xfd089e(0x20f),_0x189a56);startingBalances=_0x189a56;}}function headlessMode(_0x18ca99){const _0x8addd9=_0x4a530d;let _0x173704=_0x18ca99[_0x8addd9(0x1df)],_0x4ce511=_0x18ca99[_0x8addd9(0x1b9)],_0x333efc=[];for(let _0x26b439 of _0x173704){if(_0x26b439[_0x8addd9(0x23b)]!=config[_0x8addd9(0x162)]){if(_0x26b439[_0x8addd9(0x18b)]>=_0x4ce511/0x64){if(_0x26b439['valid'])_0x333efc[_0x8addd9(0x1a8)](_0x26b439);}else{if(_0x26b439[_0x8addd9(0x18b)]<=-_0x4ce511/0x64){if(_0x26b439[_0x8addd9(0x158)])_0x333efc[_0x8addd9(0x1a8)](_0x26b439);}}}}_0x333efc[_0x8addd9(0x19b)]>0x0&&placeOrder(_0x333efc);}function notifyBalance(_0xe79d47){const _0x6377a7=_0x4a530d;let _0x542d32=_0xe79d47[_0x6377a7(0x1df)],_0xab44b2=_0xe79d47['threshold'],_0x428af8=[];for(let _0x2a1a9a of _0x542d32){if(_0x2a1a9a[_0x6377a7(0x23b)]!=config[_0x6377a7(0x162)]){if(_0x2a1a9a[_0x6377a7(0x18b)]>=_0xab44b2/0x64){if(_0x2a1a9a[_0x6377a7(0x158)])_0x428af8[_0x6377a7(0x1a8)](_0x2a1a9a);}else{if(_0x2a1a9a[_0x6377a7(0x18b)]<=-_0xab44b2/0x64){if(_0x2a1a9a[_0x6377a7(0x158)])_0x428af8[_0x6377a7(0x1a8)](_0x2a1a9a);}}}}if(_0x428af8[_0x6377a7(0x19b)]>0x0){let _0x3667bd=_0x428af8[_0x6377a7(0x24f)](_0x273ca3=>_0x273ca3[_0x6377a7(0x23b)]);_0x3667bd[_0x6377a7(0x190)]();let _0xeebbf5=_0x3667bd[_0x6377a7(0x19e)](',\x20');if(!lastCoinsToBalance)logHistory(_0x6377a7(0x268),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xeebbf5;}}function symbolToCoin(_0x167136){const _0x5d4890=_0x4a530d;let _0x4c2710;if(_0x167136[_0x5d4890(0x1c3)]('/'+config['basecoin']))_0x4c2710=_0x167136['replace']('/'+config['basecoin'],'');if(_0x167136[_0x5d4890(0x1c3)](config[_0x5d4890(0x162)]+'/'))_0x4c2710=_0x167136[_0x5d4890(0x232)](config['basecoin']+'/','');return _0x4c2710;}async function unlockOrders(){const _0xfa26ec=_0x4a530d;if(allOrdersPlaced&&lockOrders==ORDERS[_0xfa26ec(0x1b4)]){logger[_0xfa26ec(0x235)](_0xfa26ec(0x19c)),lockOrders=ORDERS[_0xfa26ec(0x149)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xc133de=await getCoins();[currentCoins,currentCoinsAll]=_0xc133de,validateOrdersState=_0xfa26ec(0x1ab),persistOpenOrders([]),lockOrders=ORDERS[_0xfa26ec(0x255)],logger[_0xfa26ec(0x235)](_0xfa26ec(0x1db));}}async function validateOrders(_0x24579f){const _0x2e8aeb=_0x4a530d;if(_0x24579f)validateOrdersState=_0x24579f;logger[_0x2e8aeb(0x235)](_0x2e8aeb(0x22d)+validateOrdersState+_0x2e8aeb(0x15f)+(lockOrders==0x1?_0x2e8aeb(0x14c):lockOrders==0x2?_0x2e8aeb(0x247):_0x2e8aeb(0x16e)));let _0x55c926=[],_0x4cc673=config['ordertype']==_0x2e8aeb(0x1fd)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2e8aeb(0x1b4)])return;logger[_0x2e8aeb(0x235)](_0x2e8aeb(0x174)+validateOrdersState),lastOrders[_0x2e8aeb(0x184)](_0x5d3767=>{const _0x5506fd=_0x2e8aeb;let _0x1c09d2=![];_0x5d3767['filled']>0x0&&(_0x1c09d2=!![]),_0x55c926[_0x5506fd(0x1a8)](_0x1c09d2),_0x1c09d2&&config[_0x5506fd(0x15a)]!=_0x5506fd(0x1fd)&&logHistory(_0x5506fd(0x173),_0x5506fd(0x1d5)+_0x5d3767[_0x5506fd(0x151)]+'\x20'+_0x5d3767['side']+'\x20#'+formatResult(_0x5d3767['filled'],0x8)+'\x20@'+formatResult(_0x5d3767['price'],0x8));}),_0x55c926[_0x2e8aeb(0x184)]((_0x316a19,_0x21088a)=>{const _0x252ca6=_0x2e8aeb;if(_0x316a19)lastOrders[_0x252ca6(0x169)](_0x21088a,0x1);}),persistOpenOrders(lastOrders);const _0x49a3a4=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x2e8aeb(0x1b8);if(_0x55c926[_0x2e8aeb(0x1c3)](![])){if(config['ordertype']==_0x2e8aeb(0x1fd)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x2e8aeb(0x1b8)){if(_0x55c926[_0x2e8aeb(0x1c3)](![])){}else{if(allOrdersPlaced){if(config[_0x2e8aeb(0x15a)]==_0x2e8aeb(0x1fd)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x2e8aeb(0x249))_0x55c926[_0x2e8aeb(0x1c3)](![])&&(config[_0x2e8aeb(0x15a)]==_0x2e8aeb(0x1fd)?logHistory(_0x2e8aeb(0x1cf),_0x2e8aeb(0x282)+Math[_0x2e8aeb(0x1e3)](_0x4cc673*validateOrderInterval/0xea60)+_0x2e8aeb(0x281)+_0x49a3a4):(await cancelOrders(),logHistory(_0x2e8aeb(0x1cf),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x4cc673*validateOrderInterval/0xea60)+_0x2e8aeb(0x281)+_0x49a3a4))),await unlockOrders();else{if(validateOrdersState==_0x2e8aeb(0x26e)){if(config[_0x2e8aeb(0x15a)]!=_0x2e8aeb(0x1fd))logHistory(_0x2e8aeb(0x1cf),_0x2e8aeb(0x18f)+_0x49a3a4);await unlockOrders();}}}}}async function cancelOrders(){const _0x3a7f2e=_0x4a530d;lastOrders[_0x3a7f2e(0x184)](async _0x369b79=>{const _0x1aa1be=_0x3a7f2e;try{const _0x11d367=await exchange['cancelOrder'](_0x369b79[_0x1aa1be(0x20e)],_0x369b79[_0x1aa1be(0x151)]);}catch(_0xfa85bc){if(_0xfa85bc[_0x1aa1be(0x227)]()[_0x1aa1be(0x1c3)](_0x1aa1be(0x2b2))){}else await handleError(_0xfa85bc,_0x1aa1be(0x1a7));}});}async function initCoinResults(_0x486b48){const _0x578208=_0x4a530d;_0x486b48?logger[_0x578208(0x235)]('Resetting\x20coin\x20results:\x20'+_0x486b48):logger[_0x578208(0x235)](_0x578208(0x17f)),config[_0x578208(0x1df)][_0x578208(0x184)](_0x49dfd2=>{const _0x2df1c2=_0x578208;if(!_0x49dfd2['excluded']&&_0x49dfd2[_0x2df1c2(0x23b)]!=config[_0x2df1c2(0x162)]){const _0xe5421a=currentCoins[_0x2df1c2(0x1e1)](_0x19446d=>_0x19446d[_0x2df1c2(0x23b)]==_0x49dfd2[_0x2df1c2(0x23b)]),_0x3e53fe=global[_0x2df1c2(0x1d6)][noslash(_0x49dfd2['symbol'])];let _0x3b839a=_0xe5421a?_0xe5421a['number']:null,_0x550714=_0x49dfd2[_0x2df1c2(0x241)]?0x1/_0x3e53fe:_0x3e53fe,_0x25e8b0;config[_0x2df1c2(0x1c7)]['forEach'](_0x1e8a82=>{const _0x5e2c38=_0x2df1c2;!_0x25e8b0&&(_0x25e8b0=_0x1e8a82[_0x5e2c38(0x1f2)][_0x5e2c38(0x1e1)](_0xe084f2=>_0xe084f2[_0x5e2c38(0x23b)]==_0x49dfd2[_0x5e2c38(0x23b)]),_0x25e8b0&&(_0x3b839a=_0x25e8b0[_0x5e2c38(0x25e)],_0x550714=_0x25e8b0[_0x5e2c38(0x208)]));});let _0x5017e3=dbCoinResults['get'](_0x2df1c2(0x273))[_0x2df1c2(0x1e1)]({'coin':_0x49dfd2['coin']})['value']();if(!_0x5017e3){const _0x46a32b={'coin':_0x49dfd2[_0x2df1c2(0x23b)],'number':_0x3b839a,'breakeven':_0x550714,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2df1c2(0x1c4)](_0x2df1c2(0x273))['push'](_0x46a32b)[_0x2df1c2(0x22e)]();}else{if(_0x486b48&&_0x49dfd2[_0x2df1c2(0x23b)]==_0x486b48){const _0x541004={'coin':_0x49dfd2[_0x2df1c2(0x23b)],'number':_0x3b839a,'breakeven':_0x550714,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2df1c2(0x1c4)](_0x2df1c2(0x273))[_0x2df1c2(0x1e1)]({'coin':_0x49dfd2[_0x2df1c2(0x23b)]})[_0x2df1c2(0x14f)](_0x541004)[_0x2df1c2(0x22e)]();}}}});}async function updateCoinResults(_0xb01f61,_0x526903=![]){const _0xfee22=_0x4a530d;let _0x26ca9b,_0x11bb23,_0x4d5d00,_0x2bf46e,_0x16124b,_0x1754b7,_0x58bdea=dbCoinResults['get']('coins')[_0xfee22(0x1e1)]({'coin':_0xb01f61['coin']})['value'](),_0x4e4282=![];Object[_0xfee22(0x18c)](_0x58bdea)[_0xfee22(0x184)](([_0x2e057b,_0x17a449])=>{if(_0x17a449==null)_0x4e4282=!![];});(!_0x58bdea||_0x4e4282)&&(await initCoinResults(_0xb01f61[_0xfee22(0x23b)]),_0x58bdea=dbCoinResults[_0xfee22(0x1c4)](_0xfee22(0x273))[_0xfee22(0x1e1)]({'coin':_0xb01f61['coin']})[_0xfee22(0x153)]());_0xb01f61[_0xfee22(0x241)]&&(_0x1754b7={'filled':_0xb01f61[_0xfee22(0x18d)]*_0xb01f61['price'],'amount':_0xb01f61[_0xfee22(0x18d)]*_0xb01f61['price'],'side':_0xb01f61['side']==_0xfee22(0x24d)?'buy':_0xfee22(0x24d),'price':0x1/_0xb01f61['price']},_0xb01f61={..._0xb01f61,..._0x1754b7});_0x526903?_0x11bb23=_0xb01f61[_0xfee22(0x1ea)]==_0xfee22(0x156)?_0x58bdea[_0xfee22(0x25e)]+_0xb01f61[_0xfee22(0x18d)]:_0x58bdea['number']-_0xb01f61[_0xfee22(0x18d)]:_0x11bb23=await getCoinNumber(_0xb01f61[_0xfee22(0x23b)]);if(_0xb01f61[_0xfee22(0x254)]&&_0xb01f61[_0xfee22(0x254)][_0xfee22(0x188)]==config[_0xfee22(0x162)])_0x26ca9b=_0xb01f61[_0xfee22(0x254)][_0xfee22(0x14a)];else{if(_0xb01f61['fee']&&_0xb01f61['fee'][_0xfee22(0x188)]=='BNB'&&!_0x526903)_0x26ca9b=_0xb01f61[_0xfee22(0x254)][_0xfee22(0x14a)]*global['ticker']['BNB'+config[_0xfee22(0x162)]];else _0x26ca9b=defaultFee*_0xb01f61['filled']*_0xb01f61[_0xfee22(0x208)];}_0xb01f61[_0xfee22(0x1ea)]==_0xfee22(0x156)?(_0x4d5d00=_0x11bb23!=0x0?(_0x58bdea['breakeven']*_0x58bdea['number']+_0xb01f61[_0xfee22(0x208)]*(_0x11bb23-_0x58bdea[_0xfee22(0x25e)])+_0x26ca9b)/_0x11bb23:0x0,_0x2bf46e=_0x58bdea[_0xfee22(0x2bf)]):(_0x4d5d00=_0x11bb23!=0x0?(_0x58bdea[_0xfee22(0x181)]*_0x58bdea[_0xfee22(0x25e)]-_0xb01f61['price']*(_0x58bdea['number']-_0x11bb23)+_0x26ca9b)/_0x11bb23:0x0,_0x2bf46e=_0x58bdea[_0xfee22(0x2bf)]+(_0xb01f61[_0xfee22(0x208)]-_0x58bdea[_0xfee22(0x181)])*_0xb01f61[_0xfee22(0x18d)]);_0x16124b=(_0xb01f61[_0xfee22(0x208)]-_0x4d5d00-_0x26ca9b/_0xb01f61[_0xfee22(0x18d)])*_0x11bb23;let _0x11c11c={'coin':_0xb01f61[_0xfee22(0x23b)],'number':_0x11bb23,'breakeven':formatResult(_0x4d5d00,0x8),'realized':formatResult(_0x2bf46e,0x8),'unrealized':formatResult(_0x16124b,0x8),'fees':formatResult(_0x58bdea[_0xfee22(0x166)]+_0x26ca9b,0x8),'sells':_0xb01f61['side']==_0xfee22(0x24d)?_0x58bdea['sells']+0x1:_0x58bdea[_0xfee22(0x21f)],'buys':_0xb01f61[_0xfee22(0x1ea)]=='buy'?_0x58bdea[_0xfee22(0x2be)]+0x1:_0x58bdea[_0xfee22(0x2be)]};dbCoinResults[_0xfee22(0x1c4)](_0xfee22(0x273))[_0xfee22(0x1e1)]({'coin':_0xb01f61[_0xfee22(0x23b)]})[_0xfee22(0x14f)](_0x11c11c)[_0xfee22(0x22e)]();if(!_0x526903){if(_0xb01f61[_0xfee22(0x254)]&&_0xb01f61['fee'][_0xfee22(0x188)]==_0xfee22(0x28c)){const _0x3eb98e=currentCoins[_0xfee22(0x1e1)](_0x3a754a=>_0x3a754a['coin']==_0xfee22(0x28c));if(_0x3eb98e){let _0x1ccdf1=dbCoinResults[_0xfee22(0x1c4)](_0xfee22(0x273))['find']({'coin':'BNB'})[_0xfee22(0x153)]();_0x11c11c={..._0x1ccdf1,'number':_0x3eb98e['number']},dbCoinResults['get'](_0xfee22(0x273))[_0xfee22(0x1e1)]({'coin':_0xfee22(0x28c)})[_0xfee22(0x14f)](_0x11c11c)['write']();}}}}async function placeOrder(_0x5df0db){const _0x283987=_0x4a530d,_0x3d6c76=config[_0x283987(0x15a)]==_0x283987(0x1fd)?_0x283987(0x1fd):'limit';if(lockOrders==ORDERS[_0x283987(0x255)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x283987(0x1b4)],allOrdersPlaced=![],validateOrdersState='initial';let _0x5e689b=![];lastOrders=[];for(const _0x5102a1 of _0x5df0db){let _0x597419,_0x175e02,_0x2cd1ee,_0x1af43d,_0x2ad1dd,_0x48b409=_0x5102a1['symbol'];try{const _0x1df092=await exchange[_0x283987(0x1ec)](_0x48b409);_0x597419=_0x5102a1[_0x283987(0x241)]?0x1/_0x5102a1[_0x283987(0x2ad)]:_0x5102a1[_0x283987(0x2ad)],_0x175e02=_0x1df092[_0x283987(0x1c2)],_0x2cd1ee=_0x1df092[_0x283987(0x15c)];_0x5102a1[_0x283987(0x241)]?(_0x1af43d=_0x5102a1[_0x283987(0x1ea)]==_0x283987(0x156)?_0x283987(0x24d):'buy',_0x2ad1dd=Math[_0x283987(0x161)](_0x5102a1['trade'])/_0x597419):(_0x1af43d=_0x5102a1['side'],_0x2ad1dd=Math[_0x283987(0x161)](_0x5102a1[_0x283987(0x193)]));_0x3d6c76==_0x283987(0x1c8)&&(config[_0x283987(0x15a)]==_0x283987(0x1e5)&&(_0x597419=_0x1af43d==_0x283987(0x156)?_0x175e02:_0x2cd1ee),config[_0x283987(0x15a)]==_0x283987(0x147)&&(_0x597419=_0x1af43d==_0x283987(0x156)?_0x2cd1ee:_0x175e02));_0x2ad1dd=formatResult(_0x2ad1dd,0x8),_0x597419=formatResult(_0x597419,0x8);const _0x455561=_0x1af43d==_0x283987(0x24d)?config[_0x283987(0x259)]?String[_0x283987(0x24c)]('0x'+config[_0x283987(0x259)])+'\x20':'':config[_0x283987(0x19d)]?String['fromCodePoint']('0x'+config[_0x283987(0x19d)])+'\x20':'',_0x49d65b=_0x3d6c76==_0x283987(0x1fd)?'Market':config[_0x283987(0x15a)]==_0x283987(0x1e5)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x3965a0=(Math['floor'](Math[_0x283987(0x27b)]()*0x35a4e900)+0x5f5e100)[_0x283987(0x227)]();lastOrders[_0x283987(0x1a8)]({'customId':_0x3965a0,'symbol':_0x48b409,'coin':_0x5102a1['coin'],'amount':_0x2ad1dd,'price':_0x597419,'side':_0x1af43d,'reverse':_0x5102a1[_0x283987(0x241)],'filled':0x0});if(_0x3d6c76=='market')logHistory(_0x283987(0x173),''+_0x455561+_0x49d65b+_0x283987(0x17e)+_0x48b409+'\x20'+_0x1af43d+'\x20#'+formatResult(_0x2ad1dd,0x8)+'\x20@'+formatResult(_0x597419,0x8));else logHistory(_0x283987(0x173),''+_0x455561+_0x49d65b+_0x283987(0x17e)+_0x48b409+'\x20'+_0x1af43d+'\x20#'+formatResult(_0x2ad1dd,0x8)+'\x20@'+formatResult(_0x597419,0x8));const _0x2e9c26=await exchange['createOrder'](_0x48b409,_0x3d6c76,_0x1af43d,_0x2ad1dd,_0x597419);logger['debug'](_0x283987(0x205)+_0x2e9c26['id']+_0x283987(0x1d9)+_0x3965a0);const _0x46af44=lastOrders[_0x283987(0x19b)]-0x1;if(_0x46af44>=0x0&&lastOrders[_0x46af44][_0x283987(0x1a6)]==_0x3965a0){lastOrders[_0x46af44]['orderId']=_0x2e9c26['id'];if(_0x2e9c26['amount'])lastOrders[_0x46af44][_0x283987(0x1f7)]=_0x2e9c26[_0x283987(0x1f7)];if(_0x2e9c26[_0x283987(0x208)])lastOrders[_0x46af44]['price']=_0x2e9c26[_0x283987(0x208)];lastOrders[_0x46af44][_0x283987(0x254)]=_0x2e9c26[_0x283987(0x254)];}if(config['cooldown']!=0x0){let _0x437e88=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x437e88=cooldownTracker[_0x283987(0x2c3)]();const _0xe27564=getTimeStamp();cooldownTracker[_0x283987(0x1a8)](_0xe27564);if(_0x437e88){const _0x158f75=fns[_0x283987(0x1a2)](new Date(_0xe27564),new Date(_0x437e88));if(_0x158f75<cooldownInterval){logHistory(_0x283987(0x272),_0x283987(0x1f6)+config[_0x283987(0x175)]+_0x283987(0x203)+cooldownInterval/0x3c+_0x283987(0x1a1)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x1c1a37){if(_0x1c1a37['toString']()[_0x283987(0x1c3)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x1a9d39=>_0x1a9d39[_0x283987(0x151)]!=_0x48b409),logHistory(_0x283987(0x272),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x48b409),_0x5e689b=!![];else{if(_0x1c1a37[_0x283987(0x227)]()[_0x283987(0x1c3)](_0x283987(0x2b8)))lastOrders=lastOrders[_0x283987(0x155)](_0xbe4d2c=>_0xbe4d2c[_0x283987(0x151)]!=_0x48b409),logHistory(_0x283987(0x272),_0x283987(0x283)+_0x48b409),_0x5e689b=!![];else{if(_0x1c1a37[_0x283987(0x227)]()[_0x283987(0x1c3)]('InvalidOrder'))lastOrders=lastOrders[_0x283987(0x155)](_0x4d359d=>_0x4d359d[_0x283987(0x151)]!=_0x48b409),logHistory(_0x283987(0x272),_0x283987(0x1ca)+_0x48b409),_0x5e689b=!![];else _0x1c1a37[_0x283987(0x227)]()['includes'](_0x283987(0x1b2))?(lastOrders=lastOrders[_0x283987(0x155)](_0x54c4dc=>_0x54c4dc[_0x283987(0x151)]!=_0x48b409),logHistory(_0x283987(0x272),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x48b409),_0x5e689b=!![]):(lastOrders=lastOrders[_0x283987(0x155)](_0x5bfe46=>_0x5bfe46[_0x283987(0x151)]!=_0x48b409),await handleError(_0x1c1a37,'placeOrder()',_0x48b409));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x283987(0x19b)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x34b005=config[_0x283987(0x15a)]==_0x283987(0x1fd)?validateOrderTimeout*0x3c*0x3e8:config[_0x283987(0x1e6)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x34b005);}else unlockOrders();_0x5e689b&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x283987(0x1cf),_0x283987(0x19f)));}else{if(coolingDown)!config[_0x283987(0x25c)]&&logHistory('error',_0x283987(0x238));else lockOrders!=ORDERS[_0x283987(0x255)]&&(!config[_0x283987(0x25c)]&&(config['ordertype']==_0x283987(0x1fd)?logHistory('error',_0x283987(0x296)):logHistory(_0x283987(0x272),_0x283987(0x229))));}}function persistOpenOrders(_0x30e78a){const _0x3ccc9e=_0x4a530d,_0x284e17={...config,'openOrders':_0x30e78a};let _0x4c6874=dbConfig[_0x3ccc9e(0x1c4)](_0x3ccc9e(0x1de))[_0x3ccc9e(0x1e1)]({'botID':botID})[_0x3ccc9e(0x153)]();_0x4c6874&&dbConfig['get'](_0x3ccc9e(0x1de))[_0x3ccc9e(0x1e1)]({'botID':botID})[_0x3ccc9e(0x14f)](_0x284e17)[_0x3ccc9e(0x22e)]();}function restoreOrders(){const _0x4ac45b=_0x4a530d;let _0x1e0535;config['openOrders']&&allOpenOrders['forEach'](_0x35548a=>{const _0x2150c5=_0x2577,_0xa543dd=config[_0x2150c5(0x20c)][_0x2150c5(0x1e1)](_0x2456df=>_0x2456df['orderId']==_0x35548a['id']);_0xa543dd&&(lastOrders[_0x2150c5(0x1a8)](_0xa543dd),_0x1e0535=_0x35548a[_0x2150c5(0x1c1)]);});if(lastOrders[_0x4ac45b(0x19b)]>0x0){lockOrders=ORDERS[_0x4ac45b(0x1b4)],validateOrdersState=_0x4ac45b(0x1b8),allOrdersPlaced=!![];const _0x399589=new Date()[_0x4ac45b(0x258)](),_0x41e47e=config[_0x4ac45b(0x15a)]==_0x4ac45b(0x1fd)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x1e0535+_0x41e47e>_0x399589){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x7b95f9=_0x4ac45b;validateOrders(_0x7b95f9(0x249));},_0x1e0535+_0x41e47e-_0x399589);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x2da2b2=_0x4a530d;if(!coinsLoaded){process[_0x2da2b2(0x20b)]({'telegrammsg':_0x2da2b2(0x243)},_0x534bc4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x435e6c='';if(config[_0x2da2b2(0x145)])_0x435e6c=_0x2da2b2(0x1af)+config[_0x2da2b2(0x150)]+_0x2da2b2(0x23f);else _0x435e6c=_0x2da2b2(0x187)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4f04ea=getKPIs(_0x2da2b2(0x162)),_0x3cea23=getKPIs(_0x2da2b2(0x23a),config[_0x2da2b2(0x23a)]),_0x56c5de=getKPIs(_0x2da2b2(0x1cd)),_0x199dc7=getKPIs(_0x2da2b2(0x289),config['fiat']);_0x435e6c+='<pre>',_0x435e6c+=_0x4f04ea[_0x2da2b2(0x23d)]+_0x2da2b2(0x275)+_0x4f04ea[_0x2da2b2(0x153)]+'\x0a',_0x435e6c+=_0x4f04ea[_0x2da2b2(0x1b5)]+':\x20'+_0x4f04ea['change']+'%\x0a',_0x435e6c+=_0x3cea23[_0x2da2b2(0x23d)]+_0x2da2b2(0x275)+_0x3cea23[_0x2da2b2(0x153)]+'\x0a',_0x435e6c+=_0x3cea23[_0x2da2b2(0x1b5)]+':\x20'+_0x3cea23[_0x2da2b2(0x2ba)]+'%\x0a',_0x435e6c+=_0x56c5de[_0x2da2b2(0x23d)]+':\x20'+_0x56c5de['value']+'\x20('+config[_0x2da2b2(0x162)]+')\x0a',_0x435e6c+=_0x56c5de['rightTxt']+':\x20'+_0x56c5de[_0x2da2b2(0x2ba)]+'%\x20('+config[_0x2da2b2(0x162)]+')\x0a',_0x435e6c+=_0x199dc7[_0x2da2b2(0x23d)]+':\x20'+_0x199dc7[_0x2da2b2(0x153)]+'\x20('+config[_0x2da2b2(0x23a)]+')\x0a',_0x435e6c+=_0x199dc7['rightTxt']+':\x20'+_0x199dc7[_0x2da2b2(0x2ba)]+_0x2da2b2(0x28f)+config[_0x2da2b2(0x23a)]+')\x0a',_0x435e6c+=_0x2da2b2(0x1c5),process[_0x2da2b2(0x20b)]({'telegrammsg':_0x435e6c},_0x562f86=>{});}async function sendPortfolioTelegram(){const _0x290236=_0x4a530d;if(!coinsLoaded){process[_0x290236(0x20b)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x113259=>{});return;}let _0x2fe784='';if(config['showname'])_0x2fe784=_0x290236(0x1af)+config['botname']+_0x290236(0x29b);else _0x2fe784=_0x290236(0x187)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x2fe784+=_0x290236(0x2b0),_0x2fe784+=_0x290236(0x159),_0x2fe784+=_0x290236(0x16d),_0x2fe784+=_0x290236(0x159),currentCoins[_0x290236(0x184)](_0x243ee2=>{const _0x10c393=_0x290236;_0x2fe784+=_0x243ee2[_0x10c393(0x23b)][_0x10c393(0x168)](0x7)+'|\x20'+formatPad(_0x243ee2['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x243ee2[_0x10c393(0x1a5)],0x2,0x6)+'|\x20'+formatPad(_0x243ee2['delta']*0x64,0x2,0x6)+'\x0a';}),_0x2fe784+=_0x290236(0x1c5),process[_0x290236(0x20b)]({'telegrammsg':_0x2fe784},_0x46ddfe=>{});}function formatPad(_0x3a34af,_0x216329,_0x40a922){const _0x52de32=_0x4a530d,_0x511428=formatResultString(_0x3a34af,_0x216329);return _0x511428?_0x511428[_0x52de32(0x277)](_0x40a922):''[_0x52de32(0x277)](_0x40a922);}function logHistory(_0x18b093,_0x186b68,_0x3f0b41=''){const _0x3ee655=_0x4a530d;let _0x2757d3={'time':getTimeStamp(),'type':_0x18b093,'event':_0x186b68};dbLogs[_0x3ee655(0x1c4)](_0x3ee655(0x279))[_0x3ee655(0x1a8)](_0x2757d3)[_0x3ee655(0x22e)]();if(_0x3f0b41=='')_0x3f0b41=_0x186b68;proxyEmit('event',{'log':_0x2757d3,'summary':_0x3f0b41}),process[_0x3ee655(0x20b)]({'telegram':{..._0x2757d3,'botname':config[_0x3ee655(0x150)],'showname':config[_0x3ee655(0x145)]}},_0x278d28=>{}),logger['full'](''+_0x2757d3[_0x3ee655(0x22c)]);}function emitHistory(_0x3cabef={}){const _0x2f058e=_0x4a530d;Object[_0x2f058e(0x2ab)](_0x3cabef)[_0x2f058e(0x19b)]==0x0&&(_0x3cabef={'type':[_0x2f058e(0x173),_0x2f058e(0x22c)],'event':'','page':0x1});if(_0x3cabef['type'][_0x2f058e(0x1c3)](_0x2f058e(0x22c)))_0x3cabef[_0x2f058e(0x172)][_0x2f058e(0x169)](_0x3cabef[_0x2f058e(0x172)][_0x2f058e(0x246)](_0x2f058e(0x22c)),0x1,_0x2f058e(0x272),'warning',_0x2f058e(0x1cf));if(dbLogs['has'](_0x2f058e(0x279))[_0x2f058e(0x153)]()){let _0x29c380=dbLogs[_0x2f058e(0x1c4)](_0x2f058e(0x279))[_0x2f058e(0x155)](_0x22d2f3=>{const _0x338a30=_0x2f058e;if(_0x3cabef[_0x338a30(0x172)][_0x338a30(0x19b)]==0x0)return![];else return _0x3cabef[_0x338a30(0x172)][_0x338a30(0x1c3)](_0x22d2f3[_0x338a30(0x172)]);})[_0x2f058e(0x155)](_0x97ac0b=>{const _0x2f2fd6=_0x2f058e;if(_0x3cabef[_0x2f2fd6(0x22c)]=='')return!![];else return _0x97ac0b[_0x2f2fd6(0x22c)][_0x2f2fd6(0x1d2)]()[_0x2f2fd6(0x1c3)](_0x3cabef[_0x2f2fd6(0x22c)][_0x2f2fd6(0x1d2)]());})[_0x2f058e(0x2a1)]('time'),_0x1f6d20=_0x29c380['value']()[_0x2f058e(0x19b)];_0x29c380=_0x29c380[_0x2f058e(0x241)]()['slice']((_0x3cabef['page']-0x1)*logPageSize,_0x3cabef[_0x2f058e(0x293)]*logPageSize-0x1)[_0x2f058e(0x241)]()[_0x2f058e(0x153)](),proxyEmit('event-history',{'logs':_0x29c380,'total':_0x1f6d20});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x165c23){const _0x2a040d=_0x4a530d;if(dbLogs[_0x2a040d(0x1dc)](_0x2a040d(0x279))[_0x2a040d(0x153)]()){const _0x107380=dbLogs['get'](_0x2a040d(0x279))[_0x2a040d(0x2a1)]('time')[_0x2a040d(0x155)](_0x17773f=>{const _0x31c86b=_0x2a040d;return _0x17773f['type']==_0x31c86b(0x173);})[_0x2a040d(0x153)]();dbLogs[_0x2a040d(0x1c4)](_0x2a040d(0x279))[_0x2a040d(0x2a3)]()[_0x2a040d(0x22e)](),dbLogs[_0x2a040d(0x1c4)]('logs')[_0x2a040d(0x14f)](_0x107380)[_0x2a040d(0x22e)](),emitHistory(_0x165c23);}}async function pauseBot(_0x50008d=''){const _0xc8b80c=_0x4a530d,_0x3e14fd=new Date()[_0xc8b80c(0x258)]();if(!lastErrorShown||_0x3e14fd-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3e14fd;!lastBotPause?(lastBotPause=_0x3e14fd,consecutivePauses=0x1):(_0x3e14fd-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xc8b80c(0x20b)]({'stop':_0xc8b80c(0x234)},_0x1901f4=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xc8b80c(0x258)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x50008d)_0x50008d+='\x20|\x20';logHistory(_0xc8b80c(0x272),_0x50008d+_0xc8b80c(0x2a5)+pauseBotInterval/0xea60+_0xc8b80c(0x15d)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x540cd5=_0x4a530d;process[_0x540cd5(0x20b)]({'stop':'kill'},_0x1bee69=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4c1f76,_0x431965){const _0x14a82c=_0x4a530d;if(_0x4c1f76[_0x14a82c(0x227)]()[_0x14a82c(0x1c3)](_0x14a82c(0x1d8)))return logHistory(_0x14a82c(0x272),config[_0x14a82c(0x29a)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x4c1f76[_0x14a82c(0x227)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x14a82c(0x272),config[_0x14a82c(0x29a)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x4c1f76[_0x14a82c(0x227)]()[_0x14a82c(0x1c3)](_0x14a82c(0x2b4)))return logHistory(_0x14a82c(0x272),config[_0x14a82c(0x29a)]+_0x14a82c(0x1b7)),logHistory('error',_0x14a82c(0x140)),![];else await handleError(_0x4c1f76,_0x431965);}}}async function handleError(_0x417b16,_0x4f377f,_0x1e7c92=''){const _0x51b6f2=_0x4a530d,_0x4154a0=config[_0x51b6f2(0x29a)]||'Exchange';if(_0x417b16['toString']()['includes']('DDoSProtection')||_0x417b16[_0x51b6f2(0x227)]()[_0x51b6f2(0x1c3)](_0x51b6f2(0x14e)))await pauseBot(config['exchange']+_0x51b6f2(0x15e));else{if(_0x417b16[_0x51b6f2(0x227)]()[_0x51b6f2(0x1c3)](_0x51b6f2(0x251))||_0x417b16['toString']()[_0x51b6f2(0x1c3)](_0x51b6f2(0x233)))await pauseBot(config[_0x51b6f2(0x29a)]+_0x51b6f2(0x23c));else{if(_0x417b16[_0x51b6f2(0x227)]()['includes'](_0x51b6f2(0x1a4)))await pauseBot(config[_0x51b6f2(0x29a)]+_0x51b6f2(0x28d));else{if(_0x417b16['toString']()[_0x51b6f2(0x1c3)](_0x51b6f2(0x1b0)))await pauseBot(config[_0x51b6f2(0x29a)]+'\x20closed\x20the\x20connection');else{if(_0x417b16['toString']()['includes'](_0x51b6f2(0x207)))logHistory(_0x51b6f2(0x272),_0x4f377f+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x51b6f2(0x272),_0x51b6f2(0x236)),await killBot();else{if(_0x417b16[_0x51b6f2(0x227)]()['includes']('InvalidNonce'))logHistory(_0x51b6f2(0x272),_0x4f377f+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x51b6f2(0x272),_0x51b6f2(0x236)),await killBot();else{if(_0x417b16 instanceof ccxt[_0x51b6f2(0x204)])logger['debug']('Uncaught\x20NetworkError:',_0x417b16),await pauseBot(config['exchange']+'\x20network\x20error');else{if(_0x417b16['toString']()['includes'](_0x51b6f2(0x1d8)))logHistory(_0x51b6f2(0x272),_0x4f377f+_0x51b6f2(0x1da)+config['exchange']+_0x51b6f2(0x16c)),logHistory(_0x51b6f2(0x272),_0x51b6f2(0x236)),await killBot();else{if(_0x417b16['toString']()[_0x51b6f2(0x1c3)](_0x51b6f2(0x231)))logHistory(_0x51b6f2(0x272),_0x4f377f+_0x51b6f2(0x1da)+config['exchange']+_0x51b6f2(0x1d4)),logHistory(_0x51b6f2(0x272),_0x51b6f2(0x236)),await killBot();else{if(_0x417b16[_0x51b6f2(0x227)]()['includes']('AuthenticationError'))logHistory(_0x51b6f2(0x272),_0x4f377f+_0x51b6f2(0x1da)+config[_0x51b6f2(0x29a)]+_0x51b6f2(0x2a8)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x417b16[_0x51b6f2(0x227)]()[_0x51b6f2(0x1c3)](_0x51b6f2(0x1b3)))logHistory(_0x51b6f2(0x272),_0x4f377f+_0x51b6f2(0x2b9)+_0x1e7c92);else _0x417b16 instanceof ccxt[_0x51b6f2(0x1bd)]?(logger[_0x51b6f2(0x235)](_0x51b6f2(0x1eb),_0x417b16),logHistory(_0x51b6f2(0x272),_0x4f377f+'\x20|\x20'+config[_0x51b6f2(0x29a)]+_0x51b6f2(0x2c0))):(logger['full'](_0x4f377f+_0x51b6f2(0x1d3),_0x417b16),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}}}function formatResult(_0x55ebf5,_0x5e178f){const _0x19262d=_0x4a530d;return parseFloat(_0x55ebf5[_0x19262d(0x292)](_0x5e178f));}function formatResultTruncate(_0x7a9832,_0x76cb32){const _0x1c7398=_0x4a530d;let _0x4ae877=formatResultString(_0x7a9832,0xa),_0x54dc05=_0x4ae877[_0x1c7398(0x246)]('.');return _0x54dc05!=-0x1&&(_0x4ae877=_0x4ae877[_0x1c7398(0x165)](0x0,_0x54dc05+_0x76cb32+0x1)),Number(_0x4ae877);}function formatResultString(_0x8db047,_0x353906){const _0x139a73=_0x4a530d;let _0x2c933e;if(!(''+_0x8db047)[_0x139a73(0x1c3)]('e'))_0x2c933e=+(Math[_0x139a73(0x1e3)](_0x8db047+'e+'+_0x353906)+'e-'+_0x353906);else{let _0x43b5cb=(''+_0x8db047)[_0x139a73(0x1d0)]('e'),_0x30e68c='';+_0x43b5cb[0x1]+_0x353906>0x0&&(_0x30e68c='+'),_0x2c933e=+(Math[_0x139a73(0x1e3)](+_0x43b5cb[0x0]+'e'+_0x30e68c+(+_0x43b5cb[0x1]+_0x353906))+'e-'+_0x353906);}return Number(_0x2c933e)['toFixed'](_0x353906);}function getServerTime(){const _0x2e0e97=_0x4a530d,_0x5dd3c6=new Date();return _0x5dd3c6['getFullYear']()+'/'+(_0x5dd3c6[_0x2e0e97(0x25d)]()+0x1)[_0x2e0e97(0x227)]()[_0x2e0e97(0x277)](0x2,'0')+'/'+_0x5dd3c6['getDate']()[_0x2e0e97(0x227)]()['padStart'](0x2,'0')+'\x20'+_0x5dd3c6[_0x2e0e97(0x28e)]()[_0x2e0e97(0x227)]()['padStart'](0x2,'0')+':'+_0x5dd3c6['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x5dd3c6[_0x2e0e97(0x17c)]()[_0x2e0e97(0x227)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x28b344=_0x4a530d,_0x1478b0=shiftedTime();return _0x1478b0[_0x28b344(0x248)]()+'/'+(_0x1478b0['getMonth']()+0x1)[_0x28b344(0x227)]()[_0x28b344(0x277)](0x2,'0')+'/'+_0x1478b0[_0x28b344(0x245)]()[_0x28b344(0x227)]()[_0x28b344(0x277)](0x2,'0')+'\x20'+_0x1478b0[_0x28b344(0x28e)]()[_0x28b344(0x227)]()['padStart'](0x2,'0')+':'+_0x1478b0['getMinutes']()[_0x28b344(0x227)]()[_0x28b344(0x277)](0x2,'0')+':'+_0x1478b0[_0x28b344(0x17c)]()[_0x28b344(0x227)]()[_0x28b344(0x277)](0x2,'0');}function getDate(){const _0x5082ec=_0x4a530d,_0x499b8b=shiftedTime();return _0x499b8b['getFullYear']()+'/'+(_0x499b8b[_0x5082ec(0x25d)]()+0x1)[_0x5082ec(0x227)]()[_0x5082ec(0x277)](0x2,'0')+'/'+_0x499b8b[_0x5082ec(0x245)]()[_0x5082ec(0x227)]()[_0x5082ec(0x277)](0x2,'0');}function getHour(){const _0x1cc47d=_0x4a530d,_0x52dba0=shiftedTime();return _0x52dba0[_0x1cc47d(0x28e)]()[_0x1cc47d(0x227)]()[_0x1cc47d(0x277)](0x2,'0');}function sleep(_0x38d8d9){return new Promise(_0x549289=>setTimeout(_0x549289,_0x38d8d9));}function shiftedTime(){const _0x412a93=_0x4a530d,_0x3be130=new Date();let _0x43a9c2=_0x3be130;if(config&&config[_0x412a93(0x2af)]!==0x0)_0x43a9c2=fns[_0x412a93(0x197)](_0x3be130,{'hours':config[_0x412a93(0x2af)]});return _0x43a9c2;}function timer(_0x3e07df){const _0x2877aa=_0x4a530d,_0x1d146c=new Date();!lasttime?console[_0x2877aa(0x221)](getTimeStamp()+_0x2877aa(0x226),_0x3e07df,_0x1d146c):console[_0x2877aa(0x221)](getTimeStamp()+_0x2877aa(0x226),_0x3e07df,(_0x1d146c-lasttime)/0x3e8),lasttime=_0x1d146c;}