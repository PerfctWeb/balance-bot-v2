const _0x472155=_0x3389;(function(_0x2a5a06,_0x47adac){const _0x4d12ed=_0x3389,_0x5bd9df=_0x2a5a06();while(!![]){try{const _0x1b523e=parseInt(_0x4d12ed(0x194))/0x1+-parseInt(_0x4d12ed(0x215))/0x2+parseInt(_0x4d12ed(0x2c6))/0x3+parseInt(_0x4d12ed(0x1d7))/0x4+parseInt(_0x4d12ed(0x1dc))/0x5+-parseInt(_0x4d12ed(0x223))/0x6+-parseInt(_0x4d12ed(0x180))/0x7;if(_0x1b523e===_0x47adac)break;else _0x5bd9df['push'](_0x5bd9df['shift']());}catch(_0x1abfe6){_0x5bd9df['push'](_0x5bd9df['shift']());}}}(_0x5778,0x882de));const _0x121102=function(){let _0x5bb708=!![];return function(_0x3bc1f3,_0x195cfe){const _0x2beffe=_0x5bb708?function(){const _0x5de342=_0x3389;if(_0x195cfe){const _0x32d623=_0x195cfe[_0x5de342(0x23e)](_0x3bc1f3,arguments);return _0x195cfe=null,_0x32d623;}}:function(){};return _0x5bb708=![],_0x2beffe;};}(),_0x270543=_0x121102(this,function(){const _0x258901=_0x3389;return _0x270543[_0x258901(0x1d6)]()[_0x258901(0x151)]('(((.+)+)+)+$')['toString']()['constructor'](_0x270543)[_0x258901(0x151)](_0x258901(0x21a));});_0x270543();'use strict';const ccxt=require(_0x472155(0x28d))['pro'],low=require(_0x472155(0x25f)),FileSync=require(_0x472155(0x14f)),fs=require('fs'),fns=require(_0x472155(0x2a8)),Crypt=require(_0x472155(0x14d))['Crypt'],util=require(_0x472155(0x1a1)),argv=require('yargs/yargs')(process[_0x472155(0x2d3)][_0x472155(0x265)](0x2))[_0x472155(0x2d3)],path=require(_0x472155(0x2cd));let exchange;global['ticker']={},global[_0x472155(0x236)]={};const usdBasecoins=[_0x472155(0x239),_0x472155(0x242),_0x472155(0x261),_0x472155(0x20a),_0x472155(0x22a),'USDP'],exceptions={'binance':[_0x472155(0x24c),_0x472155(0x1c5),_0x472155(0x2a9),_0x472155(0x267),_0x472155(0x170)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x472155(0x204)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x472155(0x291))[_0x472155(0x20b)],environment=require(_0x472155(0x291))['environment']||_0x472155(0x27b),botID=process[_0x472155(0x2d3)][0x2]||_0x472155(0x264),pattern=/^[0-9]{3}$/;!pattern[_0x472155(0x1c0)](botID)&&(console[_0x472155(0x158)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x472155(0x25b)+userID+'/':_0x472155(0x25b),logspath=userID?'./logs/'+userID+'/':_0x472155(0x1e5),loggerfile=fs[_0x472155(0x29a)](logspath+_0x472155(0x218),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x472155(0x154)](configpath);!fs['existsSync'](logspath)&&fs[_0x472155(0x154)](logspath);const configfile=configpath+'bot-'+botID+_0x472155(0x1db),logfile=configpath+_0x472155(0x24b)+botID+_0x472155(0x2bd),performancefile=configpath+_0x472155(0x24b)+botID+_0x472155(0x1d4),coinresultsfile=configpath+_0x472155(0x24b)+botID+'-results.json',settingsfile=configpath+_0x472155(0x153),securefile=configpath+_0x472155(0x14c),configbackuppath=configpath+_0x472155(0x2ad),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x472155(0x19d)]({'logs':[],'version':serverversion})[_0x472155(0x171)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x472155(0x171)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x472155(0x19d)]({'bot':[],'version':serverversion})[_0x472155(0x171)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x472155(0x19d)]({'coins':[],'version':serverversion})[_0x472155(0x171)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x472155(0x164),'rsaStandard':_0x472155(0x198)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x57dfb3=>{console['log'](_0x57dfb3);},'simple':_0x49d855=>{const _0x182481=_0x472155;console['log'](_0x49d855),loggerfile[_0x182481(0x171)](util['format'](_0x49d855)+'\x0a');},'full':async(_0x16defb,_0x544158='')=>{const _0x569ebd=_0x472155;let _0x4f4ec7;if(config[_0x569ebd(0x2ca)])_0x4f4ec7=getTimeStamp()+':\x20'+config[_0x569ebd(0x166)]+_0x569ebd(0x18d)+_0x16defb;else _0x4f4ec7=getTimeStamp()+':\x20Bot\x20'+botID+_0x569ebd(0x18d)+_0x16defb;console[_0x569ebd(0x158)](_0x4f4ec7),loggerfile[_0x569ebd(0x171)](util[_0x569ebd(0x2be)](_0x4f4ec7)+'\x0a'),_0x544158&&(console[_0x569ebd(0x158)](_0x544158),loggerfile[_0x569ebd(0x171)](util[_0x569ebd(0x2be)](_0x544158)+'\x0a'));},'debug':async(_0x4d25f4,_0x5b1b23='')=>{const _0x5ed399=_0x472155;let _0x44a75d;if(config[_0x5ed399(0x2ca)])_0x44a75d=getTimeStamp()+':\x20'+config[_0x5ed399(0x166)]+'\x20>\x20[DEBUG]\x20'+_0x4d25f4;else _0x44a75d=getTimeStamp()+_0x5ed399(0x244)+botID+_0x5ed399(0x245)+_0x4d25f4;if(debugging)console['log'](_0x44a75d);loggerfile[_0x5ed399(0x171)](util[_0x5ed399(0x2be)](_0x44a75d)+'\x0a');if(_0x5b1b23){if(debugging)console['log'](_0x5b1b23);loggerfile[_0x5ed399(0x171)](util[_0x5ed399(0x2be)](_0x5b1b23)+'\x0a');}}};process['on'](_0x472155(0x1d2),function(_0x35e707){const _0x213541=_0x472155;logger[_0x213541(0x22c)]('Uncaught\x20Exception:',_0x35e707);});function _0x3389(_0x43bd91,_0x4e869c){const _0x5cb5ab=_0x5778();return _0x3389=function(_0x270543,_0x121102){_0x270543=_0x270543-0x140;let _0x57780e=_0x5cb5ab[_0x270543];return _0x57780e;},_0x3389(_0x43bd91,_0x4e869c);}settings[_0x472155(0x276)]!=config[_0x472155(0x276)]&&updateTimeshift(settings[_0x472155(0x276)]);settings[_0x472155(0x159)]!=config['onepagemode']&&updateOnepagemode(settings[_0x472155(0x159)]);process[_0x472155(0x2c7)]({'started':_0x472155(0x1b7)},_0x238791=>{}),initializeProcessListeners();function proxyEmit(_0x3d872e,_0x53d0a6=null){process['send']({'function':_0x3d872e,'args':_0x53d0a6},_0x39b56f=>{});}function initializeProcessListeners(){const _0x54b600=_0x472155;process['on'](_0x54b600(0x1f4),_0x5cadd1=>{const _0x3ee00f=_0x54b600;switch(Object[_0x3ee00f(0x2c9)](_0x5cadd1)[0x0]){case _0x3ee00f(0x276):_0x5cadd1[_0x3ee00f(0x276)]!=undefined&&(settings[_0x3ee00f(0x276)]=_0x5cadd1[_0x3ee00f(0x276)],updateTimeshift(settings['timeshift']));break;case _0x3ee00f(0x159):_0x5cadd1['onepagemode']!=undefined&&(settings[_0x3ee00f(0x159)]=_0x5cadd1[_0x3ee00f(0x159)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x5cadd1[_0x3ee00f(0x2ab)]!=undefined&&(bots=JSON[_0x3ee00f(0x297)](_0x5cadd1['bots']),proxyEmit(_0x3ee00f(0x2ab),bots));break;case'function':switch(_0x5cadd1['function']){case _0x3ee00f(0x1f9):initclient();break;case _0x3ee00f(0x2b1):toggleBotMode();break;case'emitHistory':emitHistory(_0x5cadd1[_0x3ee00f(0x26e)]);break;case _0x3ee00f(0x1a8):deleteHistoryAlerts(_0x5cadd1[_0x3ee00f(0x26e)]);break;case _0x3ee00f(0x186):getPortfolio(_0x5cadd1[_0x3ee00f(0x26e)]);break;case _0x3ee00f(0x1ad):storeConfiguration(_0x5cadd1['args']);break;case _0x3ee00f(0x1ca):storeHeadless(_0x5cadd1['args']);break;case _0x3ee00f(0x181):storeFiat(_0x5cadd1['args']);break;case'resetHistory':resetHistory();break;case _0x3ee00f(0x2b8):getStartingBalances(getNormalizedPerformance());break;case _0x3ee00f(0x16a):placeOrder(_0x5cadd1[_0x3ee00f(0x26e)]);break;case _0x3ee00f(0x212):cancelLoading();break;case _0x3ee00f(0x16e):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3ee00f(0x15c):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x2d5f4e=null,_0x75e607=![]){const _0x40028=_0x472155;logger[_0x40028(0x22c)](_0x40028(0x27a)+(_0x2d5f4e&&_0x2d5f4e[_0x40028(0x2c3)]>0x0?_0x40028(0x262)+_0x2d5f4e[_0x40028(0x283)](','):_0x40028(0x2bb))+_0x40028(0x225)+(_0x75e607?_0x40028(0x255):'exchange\x20not\x20reloaded')+_0x40028(0x146)+config[_0x40028(0x24a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x75e607)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x40028(0x254)]!=''&&config[_0x40028(0x254)]!='***'){if(_0x75e607){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3b3488){handleErrorNoStop(_0x3b3488,_0x40028(0x1c2));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x2d5f4e);const _0xd3a3c9=await getCoins();[currentCoins,currentCoinsAll]=_0xd3a3c9,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x40028(0x2c3)]==0x0&&allOpenOrders[_0x40028(0x2c3)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}function _0x5778(){const _0x508ae4=['3\x20-\x20handling\x20FILLED\x20order:\x20','<b>Bot\x20','1\x20-\x20Handle\x20open\x20orders','options','trade','getMinutes','UNLOCKED','\x20change','page','watchOrders','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Limit\x20(low-margin)','USDT','version','amount','limits','DDoSProtection','Uncaught\x20NetworkError:','getPortfolio(0)','buy','cancelLoading','cancelOrders()','order','66674qEVUfw','fetchTickers','BNB','/output-000.log','botID','(((.+)+)+)+$','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Bybit','type','timeout','ticker','ordertype','watchTransactions','changes','5701554HHkLHe','orderId','\x20|\x20','highest','bid','coin','\x20has\x20a\x2024h\x20drop\x20of\x20','USDC','getCoins()','debug','customId','average','ID:\x20','buys','fiat','yyyy/MM/dd','logs','map','***','change','cancel','NetworkError','USD','\x20|\x20Custom\x20ID:\x20','2.5.0','starting-balances','balances','apply','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20minutes','InsufficientFunds','BUSD','emojibuy',':\x20Bot\x20','\x20>\x20[DEBUG]\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','recovery','sort','InvalidNonce','exchange','bot-','DAI/','startprice','Net\x20','usd','ORDERS.LOCKED','Invalid\x20API\x20key\x20or\x20secret\x20entered','red_yellow_blue','canceled','apiKey','exchange\x20reloaded','filled','warning','\x20|\x20Error\x20details:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','sortBy','./config/','1\x20-\x20FILLED:\x20','coins','indexOf','lowdb','status','TUSD','additional\x20symbols\x20','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','001','slice','apiPassword','NANO/','push','Fee\x20discount\x20refund\x20detected:\x20','basecoin','breakeven','No\x20more\x20open\x20orders\x20-\x20','split','args','floor','last','\x20API\x20key\x20is\x20invalid','API-key\x20format\x20invalid','Order(s)\x20not\x20validated\x20after\x20','exchanges','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','timeshift','Saving\x20configuration','BTC','apiSecret','Reset\x20|\x20','production','/USD','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','price','Unfilled\x20order(s)\x20canceled\x20after\x20','password','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','balancing\x20resumes\x20when\x20cooldown\x20ends','join','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Exchange','restart','getDate','assign','success','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','symbol','closed','ccxt','entries','1\x20-\x20Unlock\x20orders','ExchangeNotAvailable','./version.json','getOpenOrders()','limit','/EUR','findIndex','Order\x20filled:\x20','parse','2.6.0','secure','createWriteStream','\x20closed\x20the\x20connection','exec','\x20portfolio:</b>\x20\x0a\x0a','getFullYear','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','differenceInSeconds','performance','time','\x20not\x20responding','Net\x20effect','limit-high','\x20API\x20secret\x20is\x20invalid','error','date-fns','XEM/BUSD','ORDERS.UNLOCKED','bots','createOrder','/backup/','set','cancelOrder','yyyy-MM-dd\x27T\x27HH:mm:ss','toggleBotMode','splice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','coin-loading-progress','\x20connection\x20problem','number','offset','getStartingBalances','\x20metrics:</b>\x20\x0a\x0a','sells','no\x20additional\x20symbols','market','-events.json','format','colorscheme','decrypt','</pre>','valid','length','Portfolio\x20change\x20detected:\x20','removed','2381157vpJbAV','send','RequestTimeout','keys','showname','configuration','includes','path','min','Fees\x20|\x20currency:\x20','random','no\x20open\x20orders','abs','argv','timestamp','Transaction\x20detection\x20blocked','\x20value','string','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','padEnd','\x20|\x20exchange:\x20','2\x20-\x20Validate\x20orders:\x20','2\x20-\x20FILLED\x20unknown\x20order:\x20','side','privateKey','recent20','bb-secure.json','hybrid-crypto-js','\x20order:\x20','lowdb/adapters/FileSync','none','search','Cooldown\x20ended\x20-\x20balancing\x20resumed','bb-settings.json','mkdirSync','orderstatus','loadMarkets','get','log','onepagemode','enabled','watchTrades','sendPortfolioTelegram','1\x20-\x20Validate\x20orders:\x20','target','amountToPrecision','MIN_NOTIONAL','Unknown\x20error\x20occured','realized','BNB/','sha256','kill','botname','UNLOCKING','getTime','************','placeOrder','2\x20-\x20FILLED\x20known\x20order:\x20','existsSync','filter','showConfig','net-fiat','YOYOW/','write','currency','distribution','datetime','Executing\x20exchange\x20reload','padStart','autoliquidity','<pre>','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Bot\x20','Waited\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','limit-low','excluded','getSeconds','6864844QiyNTE','storeFiat','delta','stringify','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','2.3.5','getPortfolio','headless','threshold','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','find','\x20exchange','portfolio','\x20>\x20','balancing\x20resumed','rightTxt','final','remove','\x20not\x20available','event-history','961114KkoTLw','getPortfolio(2)','symbols','\x20hour','RSA-OAEP','fetchBalance','initial','emojisell','Binance','defaults','fees','substring','AuthenticationError','util','open','round','startdate','.json','Resetting\x20coin\x20results:\x20','net-basecoin','deleteHistoryAlerts','getCoinNumber()','value','data','reverse','storeConfiguration','fetchTicker','toLowerCase','\x20:\x20','date','eur','milliseconds','\x20|\x20lock\x20orders:\x20','toFixed','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','running','Limit\x20(high-margin)','change24h','percentage','forEach','sell','ETH','isEqual','Pausing\x20for\x20','test','ask','loadSymbols()','fee','leftTxt','HOT/BTC','liquidity','fromCodePoint','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Order\x20amount\x20is\x20invalid:\x20','storeHeadless','Invalid\x20quantity','spot','cost','\x20orders\x20in\x20less\x20than\x20','shift','ORDERS.UNLOCKING','netoffset','uncaughtException','LOCKED','-performance.json','parseISO','toString','2185284aImsJU','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','getMonth','-results.json','-config.json','1104620awJreB','has','cloneDeep','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','replace','full','\x20minutes\x20-\x20','bot','unlinkSync','./logs/','fetchOpenOrders','EUR','InvalidOrder','starting-balance-','cooldown','max','total','Transaction\x20detection\x20unblocked','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again',':\x20timer\x20>','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','<b>','0\x20-\x20EXECUTION:\x20','event','message','OrderNotFound','Avoiding\x20continuous\x20order\x20attempts','openOrders','placeOrder()','initclient','recreateCoinResults()','fetchClosedOrders','remainingSymbols','ongoing'];_0x5778=function(){return _0x508ae4;};return _0x5778();}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x47b115=_0x472155;logger[_0x47b115(0x22c)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x47b115(0x204)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x47b115(0x22c)](_0x47b115(0x175)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5724d9=config[_0x472155(0x24a)],_0x593638=config[_0x472155(0x254)],_0x339f4e=config['apiSecret'],_0x417a3d=config[_0x472155(0x266)]){const _0x482678=_0x472155;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x5724d9)&&(logHistory(_0x482678(0x2a7),_0x482678(0x1b6)+_0x5724d9+_0x482678(0x18b)),killBot());const _0x27a9f0=ccxt[_0x5724d9['toLowerCase']()];exchange=new _0x27a9f0({'apiKey':_0x593638,'secret':_0x339f4e,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x5724d9==_0x482678(0x21c)&&(exchange[_0x482678(0x201)]={'defaultType':'spot'});if(_0x417a3d)exchange[_0x482678(0x280)]=_0x417a3d;}function setStableCoins(){const _0x36ae9c=_0x472155;let _0x1b1291=config['basecoin']==_0x36ae9c(0x1bd)?_0x36ae9c(0x1bd):_0x36ae9c(0x278),_0x179f9f=!allSymbols['includes'](_0x1b1291+_0x36ae9c(0x27c))?_0x36ae9c(0x20a):'USD',_0x1bc17e=!allSymbols[_0x36ae9c(0x2cc)](_0x1b1291+_0x36ae9c(0x294))?_0x179f9f:_0x36ae9c(0x1e7);stablecoins={'eur':{'coin':''+_0x1b1291+_0x1bc17e,'symbol':_0x1b1291+'/'+_0x1bc17e},'usd':{'coin':''+_0x1b1291+_0x179f9f,'symbol':_0x1b1291+'/'+_0x179f9f}};}async function initwsCcxt(_0x34589c){const _0x2cb076=_0x472155;_0x34589c==null&&(_0x34589c=[],config['portfolio']['forEach'](_0x46f441=>{const _0x584e95=_0x3389;if(!_0x46f441[_0x584e95(0x17e)]&&_0x46f441[_0x584e95(0x228)]!=config['basecoin'])_0x34589c['push'](_0x46f441['symbol']);}));if(!_0x34589c[_0x2cb076(0x2cc)](stablecoins[_0x2cb076(0x1b2)][_0x2cb076(0x28b)]))_0x34589c['push'](stablecoins[_0x2cb076(0x1b2)][_0x2cb076(0x28b)]);if(!_0x34589c[_0x2cb076(0x2cc)](stablecoins[_0x2cb076(0x24f)][_0x2cb076(0x28b)]))_0x34589c[_0x2cb076(0x268)](stablecoins[_0x2cb076(0x24f)][_0x2cb076(0x28b)]);if(config[_0x2cb076(0x24a)]['startsWith'](_0x2cb076(0x19c))){if(!_0x34589c['includes'](_0x2cb076(0x163)+config[_0x2cb076(0x26a)]))_0x34589c[_0x2cb076(0x268)](_0x2cb076(0x163)+config[_0x2cb076(0x26a)]);}loadCoins(_0x34589c);const _0x25e43c=async _0x421abb=>{const _0x465e37=_0x2cb076,_0x256340=await exchange['fetchTicker'](_0x421abb);global[_0x465e37(0x21f)][noslash(_0x256340['symbol'])]=_0x256340[_0x465e37(0x270)];while(!![]){if(!botPaused)try{const _0x267052=await exchange[_0x465e37(0x15b)](_0x421abb);global[_0x465e37(0x21f)][noslash(_0x267052[0x0][_0x465e37(0x28b)])]=_0x267052[0x0][_0x465e37(0x27e)],await sleep(0x3e8);}catch(_0x180839){if(!exchangeStopped)await handleError(_0x180839,'watchTrades',_0x421abb);}else await sleep(0x64);}},_0x932eef=async _0x346407=>{const _0x351692=_0x2cb076;while(!![]){if(!botPaused)try{const _0x35671f=await exchange[_0x351692(0x1ae)](_0x346407);global[_0x351692(0x236)][_0x35671f[_0x351692(0x28b)]]=_0x35671f[_0x351692(0x1ba)],await sleep(0x3c*0x3e8);}catch(_0x49c958){if(!exchangeStopped)await handleError(_0x49c958,_0x351692(0x216),_0x346407);}else await sleep(0x64);}},_0xc0b49f=async()=>{const _0x5295e2=_0x2cb076;while(!![]){if(!botPaused)try{const _0x57e1ac=await exchange['watchOrders']();_0x57e1ac[_0x5295e2(0x1bb)](_0x479508=>{updateNumberCoinsCcxt(_0x479508);});}catch(_0x35f06b){if(!exchangeStopped)await handleError(_0x35f06b,_0x5295e2(0x207));}else await sleep(0x64);}};_0x34589c[_0x2cb076(0x1bb)](_0x1b5e9e=>{_0x25e43c(_0x1b5e9e),_0x932eef(_0x1b5e9e);}),!wsEventsSet&&(wsEventsSet=!![],_0xc0b49f(),watchTransactions());}async function watchTransactions(){const _0xab6e3f=_0x472155;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x256e5d=await getCoins(),[_0x35a77f,_0x34ceeb]=_0x256e5d;let _0xb8cbc6=[];currentCoins[_0xab6e3f(0x1bb)](_0x4d641b=>{const _0x2407f1=_0xab6e3f,_0x104d70=_0x35a77f[_0x2407f1(0x18a)](_0x51abf6=>_0x51abf6[_0x2407f1(0x228)]==_0x4d641b[_0x2407f1(0x228)]);_0x104d70&&(_0x4d641b['number']!=_0x104d70[_0x2407f1(0x2b6)]&&_0xb8cbc6[_0x2407f1(0x268)]({'coin':_0x4d641b[_0x2407f1(0x228)],'symbol':_0x4d641b[_0x2407f1(0x28b)],'number':Number(formatResult(_0x104d70[_0x2407f1(0x2b6)]-_0x4d641b[_0x2407f1(0x2b6)],0x8))}));});if(_0xb8cbc6[_0xab6e3f(0x2c3)]==0x1&&!blockTransactionDetection){if(config[_0xab6e3f(0x177)]){logger[_0xab6e3f(0x22c)](_0xab6e3f(0x2cf)+lastFees['currency']+'\x20|\x20highest:\x20'+lastFees[_0xab6e3f(0x226)]);if(!lastFees[_0xab6e3f(0x172)]||_0xb8cbc6[0x0][_0xab6e3f(0x228)]!=lastFees['currency']||_0xb8cbc6[0x0][_0xab6e3f(0x2b6)]>lastFees[_0xab6e3f(0x226)]){let _0x4427f2;if(_0xb8cbc6[0x0][_0xab6e3f(0x228)]!=config[_0xab6e3f(0x26a)]){let _0x39540a=global[_0xab6e3f(0x21f)][noslash(_0xb8cbc6[0x0][_0xab6e3f(0x28b)])];_0x4427f2=_0xb8cbc6[0x0][_0xab6e3f(0x1ac)]?0x1/_0x39540a:_0x39540a;}else _0x4427f2=0x1;_0xb8cbc6[0x0][_0xab6e3f(0x27e)]=_0x4427f2,delete _0xb8cbc6[0x0][_0xab6e3f(0x28b)];let _0x4f6fa0=[],_0xd3337=[...config[_0xab6e3f(0x1c6)]]||[],_0x136ee6=config['liquidity'];_0xd3337[_0xab6e3f(0x248)]((_0x367606,_0x289e87)=>_0x367606[_0xab6e3f(0x1b1)]>_0x289e87[_0xab6e3f(0x1b1)]?-0x1:_0x289e87['date']>_0x367606[_0xab6e3f(0x1b1)]?0x1:0x0);const _0x33e8aa=getDate();if(_0xd3337[0x0]){const _0xd76945=fns[_0xab6e3f(0x297)](_0xd3337[0x0][_0xab6e3f(0x1b1)],_0xab6e3f(0x232),new Date()),_0x4b30d1=fns[_0xab6e3f(0x297)](_0x33e8aa,_0xab6e3f(0x232),new Date());if(fns[_0xab6e3f(0x1be)](_0xd76945,_0x4b30d1)){_0x4f6fa0=_0xd3337[0x0][_0xab6e3f(0x222)];const _0x57ea42=_0x4f6fa0[_0xab6e3f(0x18a)](_0x12094c=>_0x12094c[_0xab6e3f(0x228)]==_0xb8cbc6[0x0][_0xab6e3f(0x228)]);_0x57ea42?(_0x57ea42['number']+=_0xb8cbc6[0x0]['number'],_0x57ea42['number']==0x0&&(_0x4f6fa0=_0x4f6fa0[_0xab6e3f(0x16d)](_0x38acfe=>{const _0x210c17=_0xab6e3f;return _0x38acfe[_0x210c17(0x228)]!=_0xb8cbc6[0x0][_0x210c17(0x228)];}))):_0x4f6fa0[_0xab6e3f(0x268)](_0xb8cbc6[0x0]);const _0x1c4dd7=_0x136ee6['find'](_0x5dc9cf=>_0x5dc9cf[_0xab6e3f(0x1b1)]==_0x33e8aa);_0x1c4dd7[_0xab6e3f(0x222)]=_0x4f6fa0;}else _0x136ee6[_0xab6e3f(0x268)]({'date':_0x33e8aa,'changes':[_0xb8cbc6[0x0]]});}const _0x1912de=_0x136ee6[_0xab6e3f(0x18a)](_0x28c2c0=>_0x28c2c0['date']==_0x33e8aa);if(_0x1912de){let _0x5648bb=!![];_0x1912de['changes'][_0xab6e3f(0x1bb)](_0x4a9a48=>{const _0x41e6ce=_0xab6e3f;if(_0x4a9a48[_0x41e6ce(0x2b6)]!=0x0)_0x5648bb=![];}),_0x5648bb&&(_0x136ee6=_0x136ee6['filter'](_0x107c38=>{const _0x49e487=_0xab6e3f;return _0x107c38[_0x49e487(0x1b1)]!=_0x33e8aa;}));}let _0x57c7b9=dbConfig[_0xab6e3f(0x157)](_0xab6e3f(0x1e3))[_0xab6e3f(0x18a)]({'botID':botID})[_0xab6e3f(0x1aa)]();_0x57c7b9&&(dbConfig[_0xab6e3f(0x157)](_0xab6e3f(0x1e3))[_0xab6e3f(0x18a)]({'botID':botID})[_0xab6e3f(0x288)]({'liquidity':_0x136ee6})[_0xab6e3f(0x171)](),config[_0xab6e3f(0x1c6)]=_0x136ee6),logHistory(_0xab6e3f(0x289),_0xab6e3f(0x2c4)+Math[_0xab6e3f(0x2d2)](_0xb8cbc6[0x0][_0xab6e3f(0x2b6)])+'\x20'+_0xb8cbc6[0x0][_0xab6e3f(0x228)]+'\x20'+(_0xb8cbc6[0x0][_0xab6e3f(0x2b6)]>0x0?'added':_0xab6e3f(0x2c5))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0xab6e3f(0x2cb),emittedConfiguration());}else logger[_0xab6e3f(0x22c)](_0xab6e3f(0x269)+Math[_0xab6e3f(0x2d2)](_0xb8cbc6[0x0][_0xab6e3f(0x2b6)])+'\x20'+_0xb8cbc6[0x0]['coin']+'\x20'+(_0xb8cbc6[0x0][_0xab6e3f(0x2b6)]>0x0?'added':_0xab6e3f(0x2c5)));transactionDetected=!![],currentCoins=_0x35a77f,currentCoinsAll=_0x34ceeb;}else logger[_0xab6e3f(0x22c)](_0xab6e3f(0x2c4)+Math[_0xab6e3f(0x2d2)](_0xb8cbc6[0x0][_0xab6e3f(0x2b6)])+'\x20'+_0xb8cbc6[0x0][_0xab6e3f(0x228)]+'\x20'+(_0xb8cbc6[0x0]['number']>0x0?'added':_0xab6e3f(0x2c5))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x35a77f,currentCoinsAll=_0x34ceeb;}await sleep(watchTransactionsInterval);}catch(_0x5992be){if(!exchangeStopped)await handleError(_0x5992be,_0xab6e3f(0x221));}else await sleep(0x64);}}async function loadSymbols(_0x396904=config[_0x472155(0x24a)],_0x20451e=![]){const _0x44a26f=_0x472155;if(allSymbols&&!_0x20451e)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x44a26f(0x196)][_0x44a26f(0x16d)](_0x1ea35f=>{const _0x4dce7b=_0x44a26f;let _0x1e6293=![];const _0x4b74ca=exceptions[_0x396904[_0x4dce7b(0x1af)]()]||[];return _0x4b74ca[_0x4dce7b(0x1bb)](_0x3ff12a=>{const _0xada218=_0x4dce7b;if(_0x1ea35f[_0xada218(0x2cc)](_0x3ff12a))_0x1e6293=!![];}),!_0x1e6293;});}catch(_0x43c752){throw _0x43c752;}}async function initclient(){const _0x3fd22e=_0x472155;emitLoadingProgress(),proxyEmit(_0x3fd22e(0x2cb),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3fd22e(0x23d),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});emitHistory();const _0x3510fc=getNormalizedPerformance();emitPerformance(_0x3510fc),getStartingBalances(_0x3510fc);}async function toggleBotMode(){const _0xadcb48=_0x472155;let _0x46a750=dbConfig[_0xadcb48(0x157)](_0xadcb48(0x1e3))[_0xadcb48(0x18a)]({'botID':botID})[_0xadcb48(0x1aa)]();if(_0x46a750){const _0x5d3504=!_0x46a750[_0xadcb48(0x187)];dbConfig[_0xadcb48(0x157)](_0xadcb48(0x1e3))[_0xadcb48(0x18a)]({'botID':botID})[_0xadcb48(0x288)]({'headless':_0x5d3504})[_0xadcb48(0x171)](),config[_0xadcb48(0x187)]=_0x5d3504,proxyEmit(_0xadcb48(0x2cb),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x54737d=_0x472155;process[_0x54737d(0x2c7)]({'updatebotmanager':!![]},_0x30d552=>{});}async function loadCoins(_0x1f279f){const _0x2685db=_0x472155;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1c7d84,_0x2e1bf3=0x0,_0x1095b=0x0;_0x1f279f[_0x2685db(0x1bb)](_0x2b175d=>{loading['remainingSymbols']['push'](_0x2b175d);}),loadingCanceled=![];let _0x3493ac=![];while(_0x1c7d84!=_0x1f279f[_0x2685db(0x2c3)]){_0x1c7d84=0x0,_0x1f279f[_0x2685db(0x1bb)](_0x2abbe6=>{const _0x5360a2=_0x2685db;if(global[_0x5360a2(0x21f)][noslash(_0x2abbe6)]){loading[_0x5360a2(0x1fc)]=loading['remainingSymbols'][_0x5360a2(0x16d)](_0x4c46ea=>_0x4c46ea!=_0x2abbe6);if(!watchedSymbols['includes'](_0x2abbe6))watchedSymbols[_0x5360a2(0x268)](_0x2abbe6);_0x1c7d84++;}}),loading['progress']=Math[_0x2685db(0x1a3)](_0x1c7d84/_0x1f279f[_0x2685db(0x2c3)]*0x64);loading['progress']!=0x64&&(_0x1095b>0x1e*0x5&&(loading[_0x2685db(0x21e)]=!![],emitLoadingProgress()),_0x1095b>0x78*0x5&&!_0x3493ac&&(loading[_0x2685db(0x237)]=!![],emitLoadingProgress(),_0x3493ac=!![],logHistory(_0x2685db(0x2a7),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x2685db(0x283)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x2685db(0x2a7),_0x2685db(0x1bf)+loadCoinsRetryInterval/0xea60+_0x2685db(0x17c)),pidCoinReloading=setTimeout(()=>{const _0x785385=_0x2685db;process['send']({'stop':_0x785385(0x286)},_0x3a72db=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2685db(0x237)]=!![],emitLoadingProgress();break;}else _0x1c7d84!=_0x2e1bf3&&(_0x2e1bf3=_0x1c7d84,emitLoadingProgress()),_0x1095b++,await sleep(0xc8);}_0x1c7d84==_0x1f279f[_0x2685db(0x2c3)]&&(coinsLoaded=!![],process[_0x2685db(0x2c7)]({'status':_0x2685db(0x15a),'live':'running'},_0x2e0bc6=>{}),_0x3493ac&&logHistory(_0x2685db(0x289),_0x2685db(0x189)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x298f74=_0x472155;proxyEmit(_0x298f74(0x2cb),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x18da26=_0x472155;proxyEmit(_0x18da26(0x2b4),loading);}async function getFiat(){const _0x52881a=_0x472155;let _0x36cb39=global['ticker'][stablecoins[_0x52881a(0x1b2)][_0x52881a(0x228)]],_0x3d46df=global['ticker'][stablecoins[_0x52881a(0x24f)]['coin']];return{'eur':Number(_0x36cb39),'usd':Number(_0x3d46df)};}function capitalize(_0x2112fa){const _0x3c8503=_0x472155;return _0x2112fa[_0x3c8503(0x19f)](0x0,0x1)['toUpperCase']()+_0x2112fa['substring'](0x1);}function supportedExchanges(){const _0x534651=_0x472155,_0xf7f257=['ws',_0x534651(0x216),_0x534651(0x1ae),'watchTrades',_0x534651(0x207),'cancelOrder','createOrder',_0x534651(0x1e6),_0x534651(0x1fb),'fetchBalance'];let _0x2a6372=[],_0x36a297=[],_0x23a6d1=ccxt[_0x534651(0x274)];_0x23a6d1['forEach'](_0x2ea028=>{const _0xc05ab5=_0x534651;try{const _0x2fa61c=new ccxt[_0x2ea028]();if(_0x2fa61c[_0xc05ab5(0x1dd)]['ws'])_0x36a297[_0xc05ab5(0x268)](_0x2fa61c);}catch(_0x4c368d){}}),_0x36a297[_0x534651(0x1bb)](_0x3c62d1=>{const _0x1b12ae=_0x534651;let _0x140f88=0x0;_0xf7f257[_0x1b12ae(0x1bb)](_0x6c4d94=>{const _0x485b3d=_0x1b12ae;_0x6c4d94 in _0x3c62d1['has']&&_0x3c62d1[_0x485b3d(0x1dd)][_0x6c4d94]&&_0x140f88++;}),_0x140f88==_0xf7f257[_0x1b12ae(0x2c3)]&&_0x2a6372['push'](capitalize(_0x3c62d1['id']));});let _0xcec73e=[];return _0x23a6d1['forEach'](_0x35482e=>{const _0x21a982=_0x534651;_0x35482e=capitalize(_0x35482e);if(!_0x2a6372[_0x21a982(0x2cc)](_0x35482e))_0xcec73e[_0x21a982(0x268)](_0x35482e);}),_0x2a6372;}function setStartDatePerformance(){const _0x37d625=_0x472155;if(config&&config[_0x37d625(0x1c6)][0x0]['changes'][_0x37d625(0x2c3)]!=0x0){const _0x2a46a7=config[_0x37d625(0x1c6)][0x0][_0x37d625(0x222)];dbPerformance['get']('data')[_0x37d625(0x18a)]({'date':config[_0x37d625(0x1a4)]})[_0x37d625(0x288)]({'coins':_0x2a46a7})[_0x37d625(0x171)]();}}async function recreateCoinResults(){const _0x3a22a7=_0x472155;let _0x531bf3,_0x550e85=[];try{const _0x4a6b94=fns[_0x3a22a7(0x2be)](fns[_0x3a22a7(0x1d5)](config[_0x3a22a7(0x1a4)][_0x3a22a7(0x1e0)](/\//g,'-')),_0x3a22a7(0x2b0));for(const _0x9eb18d of currentCoins){if(_0x9eb18d[_0x3a22a7(0x228)]!=config['basecoin']){let _0x18f59f=0x0,_0x2cb8fe,_0x48d070;_0x531bf3=await getAllEventOrders(_0x9eb18d[_0x3a22a7(0x28b)]);if(_0x531bf3[_0x3a22a7(0x2c3)]>0x0)_0x531bf3['forEach'](_0x2b1d9c=>{const _0x59fd16=_0x3a22a7,_0x2508c4=_0x9eb18d[_0x59fd16(0x28b)][_0x59fd16(0x2cc)](config[_0x59fd16(0x26a)]+'/');_0x550e85['push']({'datetime':_0x2b1d9c[_0x59fd16(0x174)],'coin':_0x9eb18d[_0x59fd16(0x228)],'symbol':_0x9eb18d[_0x59fd16(0x28b)],'side':_0x2b1d9c[_0x59fd16(0x149)],'reverse':_0x2508c4,'amount':formatResult(_0x2b1d9c[_0x59fd16(0x256)],0x8),'filled':formatResult(_0x2b1d9c[_0x59fd16(0x256)],0x8),'price':formatResult(_0x2b1d9c['price'],0x8)}),_0x18f59f=_0x2b1d9c[_0x59fd16(0x149)]==_0x59fd16(0x211)?_0x18f59f+_0x2b1d9c[_0x59fd16(0x256)]:_0x18f59f-_0x2b1d9c[_0x59fd16(0x256)];if(!_0x48d070)_0x48d070=_0x2b1d9c[_0x59fd16(0x27e)];});_0x2cb8fe=_0x9eb18d[_0x3a22a7(0x2b6)]-_0x18f59f;let _0x245e87;config[_0x3a22a7(0x1c6)][_0x3a22a7(0x1bb)](_0x50a03f=>{const _0x52438f=_0x3a22a7;!_0x245e87&&(_0x245e87=_0x50a03f[_0x52438f(0x222)]['find'](_0x2e826c=>_0x2e826c[_0x52438f(0x228)]==_0x9eb18d[_0x52438f(0x228)]),_0x245e87&&(_0x2cb8fe=_0x245e87[_0x52438f(0x2b6)],_0x48d070=_0x245e87[_0x52438f(0x27e)]));});let _0x341318=dbCoinResults[_0x3a22a7(0x157)](_0x3a22a7(0x25d))['find']({'coin':_0x9eb18d['coin']})[_0x3a22a7(0x1aa)]();_0x341318={'coin':_0x9eb18d[_0x3a22a7(0x228)],'number':_0x2cb8fe,'breakeven':_0x48d070,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3a22a7(0x157)](_0x3a22a7(0x25d))['find']({'coin':_0x9eb18d[_0x3a22a7(0x228)]})['assign'](_0x341318)[_0x3a22a7(0x171)]();}}_0x550e85[_0x3a22a7(0x248)]((_0x3c4921,_0x557439)=>_0x3c4921['datetime']>_0x557439['datetime']?0x1:_0x557439[_0x3a22a7(0x174)]>_0x3c4921['datetime']?-0x1:0x0);let _0x133d11=0x0;for(let _0x11a1b3 of _0x550e85){await updateCoinResults(_0x11a1b3,!![]);}}catch(_0x1ef560){await handleError(_0x1ef560,_0x3a22a7(0x1fa));}}async function getAllEventOrders(_0x8fdd4){const _0x3254b9=_0x472155;let _0x1d34ca=[],_0x247c76=dbLogs['get'](_0x3254b9(0x233))[_0x3254b9(0x16d)](_0xd13422=>{const _0x1596a7=_0x3254b9,_0x3030d0=_0xd13422['event'][_0x1596a7(0x1af)]();return _0x3030d0['includes'](_0x8fdd4[_0x1596a7(0x1af)]())&&(_0x3030d0[_0x1596a7(0x2cc)](_0x1596a7(0x2bc))&&_0x3030d0[_0x1596a7(0x2cc)](_0x1596a7(0x214))||_0x3030d0['includes'](_0x1596a7(0x256))&&_0x3030d0[_0x1596a7(0x2cc)](_0x1596a7(0x214)));})[_0x3254b9(0x25a)](_0x3254b9(0x2a2))[_0x3254b9(0x1aa)]();return _0x247c76[_0x3254b9(0x1bb)](_0x3f4a1d=>{const _0x43329b=_0x3254b9,_0x2738bc=_0x3f4a1d[_0x43329b(0x1f3)][_0x43329b(0x2cc)](_0x43329b(0x1bc))?'sell':_0x43329b(0x211),_0x5a3e27=/#([0-9]|\.)+\s/i,_0x1da014=Number(_0x5a3e27[_0x43329b(0x29c)](_0x3f4a1d[_0x43329b(0x1f3)])[0x0][_0x43329b(0x265)](0x1)),_0x58ba7e=/@([0-9]|\.)+$/i,_0x32956f=Number(_0x58ba7e[_0x43329b(0x29c)](_0x3f4a1d[_0x43329b(0x1f3)])[0x0]['slice'](0x1));_0x1d34ca['push']({'datetime':_0x3f4a1d[_0x43329b(0x2a2)],'coin':symbolToCoin(_0x8fdd4),'symbol':_0x8fdd4,'side':_0x2738bc,'amount':_0x1da014,'filled':_0x1da014,'price':_0x32956f});}),_0x1d34ca;}async function getAllOrders(_0x1d3bce,_0x5e92ee){const _0xb19d9f=_0x472155;let _0x4fe57d=[];while(_0x5e92ee<exchange[_0xb19d9f(0x1b3)]()){const _0x55c35c=0x1f4,_0x31e8a5=await exchange['fetchClosedOrders'](_0x1d3bce,_0x5e92ee,_0x55c35c);if(_0x31e8a5['length'])_0x5e92ee=_0x31e8a5[_0x31e8a5[_0xb19d9f(0x2c3)]-0x1][_0xb19d9f(0x140)]+0x1,_0x4fe57d=_0x4fe57d['concat'](_0x31e8a5);else break;}return _0x4fe57d;}async function validate24hChanges(){const _0x1b864f=_0x472155;for(const _0x5e12b8 of currentCoins){if(_0x5e12b8[_0x1b864f(0x228)]!=config['basecoin']){let _0x3dfa51;_0x5e12b8[_0x1b864f(0x1ac)]?_0x3dfa51=formatResult((0x1/(global[_0x1b864f(0x236)][noslash(_0x5e12b8[_0x1b864f(0x28b)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3dfa51=global[_0x1b864f(0x236)][noslash(_0x5e12b8[_0x1b864f(0x28b)])],_0x3dfa51<config[_0x1b864f(0x1b9)]&&(logHistory(_0x1b864f(0x2a7),_0x5e12b8[_0x1b864f(0x228)]+_0x1b864f(0x229)+_0x3dfa51+'%'),logHistory(_0x1b864f(0x2a7),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x1b864f(0x2a7),_0x1b864f(0x1ee)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2a9fce,_0x4e135a){const _0x391817=_0x472155;if(!_0x2a9fce)return!![];const _0x255c2a=_0x4e135a['split']('.'),_0x37a0e8=_0x2a9fce[_0x391817(0x26d)]('.');for(var _0x1a83f7=0x0;_0x1a83f7<_0x37a0e8[_0x391817(0x2c3)];_0x1a83f7++){const _0x5cfa4a=~~_0x37a0e8[_0x1a83f7],_0x45a437=~~_0x255c2a[_0x1a83f7];if(_0x5cfa4a<_0x45a437)return!![];if(_0x5cfa4a>_0x45a437)return![];}return![];}async function oneTimeMigration(){const _0x1b239e=_0x472155;let _0x1044e5=dbLogs[_0x1b239e(0x157)](_0x1b239e(0x20b))['value']();if(isOlderVersion(_0x1044e5,_0x1b239e(0x185))){let _0x5342da=[];const _0x41d951=dbLogs[_0x1b239e(0x157)]('logs')[_0x1b239e(0x1aa)]();_0x41d951[_0x1b239e(0x1bb)](_0x1edb7a=>{const _0x46fa6a=_0x1b239e;_0x5342da[_0x46fa6a(0x268)]({'time':_0x1edb7a[_0x46fa6a(0x2a2)],'type':_0x1edb7a[_0x46fa6a(0x21d)],'event':_0x1edb7a['event']});}),dbLogs['get'](_0x1b239e(0x233))[_0x1b239e(0x288)](_0x5342da)['write']();}let _0x39707b=dbConfig[_0x1b239e(0x157)](_0x1b239e(0x20b))[_0x1b239e(0x1aa)]();if(isOlderVersion(_0x39707b,_0x1b239e(0x185))){let _0xca83ae=dbConfig[_0x1b239e(0x157)](_0x1b239e(0x1e3))['find']({'botID':botID})['value']();if(_0xca83ae){let _0x29e443=[];_0xca83ae[_0x1b239e(0x18c)][_0x1b239e(0x1bb)](_0x3931c3=>{const _0xb1c101=_0x1b239e;_0x29e443[_0xb1c101(0x268)]({'coin':_0x3931c3[_0xb1c101(0x228)],'number':_0x3931c3['startnumber'],'price':_0x3931c3[_0xb1c101(0x24d)]}),delete _0x3931c3['startnumber'],delete _0x3931c3['startprice'];});if(_0x29e443['length']!==0x0)fs['writeFile'](configbackuppath+(_0x1b239e(0x1e9)+botID+_0x1b239e(0x1a5)),JSON[_0x1b239e(0x183)](_0x29e443,null,0x4),function(_0x1af972){if(_0x1af972){}});const _0x39a28c=(_0xe16f90,_0x56c2a4)=>{const _0x1d9eac=_0x1b239e;let _0xbc5a48=[];_0x56c2a4[_0x1d9eac(0x1bb)](_0x2bd5ce=>{const _0x232d86=_0x1d9eac,_0x46318a=_0xe16f90['find'](_0x1ba42d=>_0x1ba42d[_0x232d86(0x228)]==_0x2bd5ce[_0x232d86(0x228)]);if(!_0x46318a)_0xbc5a48['push'](_0x2bd5ce);});let _0x25f136=[];return _0xe16f90['forEach'](_0x5b1654=>{const _0x471e81=_0x1d9eac,_0x3676da=_0x56c2a4[_0x471e81(0x18a)](_0x132b3d=>_0x132b3d['coin']==_0x5b1654['coin']);if(!_0x3676da||_0x3676da[_0x471e81(0x2b6)]==0x0&&_0x5b1654[_0x471e81(0x2b6)]!=0x0)_0x25f136['push'](_0x5b1654);}),{'missingDay1':_0xbc5a48,'notInDay2':_0x25f136};},_0x3104c5=dbPerformance['get'](_0x1b239e(0x1ab))[_0x1b239e(0x1de)]()['value']();if(_0x3104c5[_0x1b239e(0x2c3)]>0x1){const {missingDay1:_0x5c08ca,notInDay2:_0x16b17d}=_0x39a28c(_0x29e443,_0x3104c5[0x1]['coins']);_0x29e443=[..._0x29e443,..._0x5c08ca],_0x16b17d[_0x1b239e(0x1bb)](_0x3ca736=>{const _0x17625d=_0x1b239e;let _0x10d8d9=_0x29e443[_0x17625d(0x295)](_0x3ac58b=>_0x3ac58b[_0x17625d(0x228)]==_0x3ca736['coin']);_0x10d8d9!=-0x1&&_0x29e443[_0x17625d(0x2b2)](_0x10d8d9,0x1);});}_0x29e443[_0x1b239e(0x248)]((_0x3bedd0,_0x3e3b0f)=>_0x3bedd0['coin']>_0x3e3b0f[_0x1b239e(0x228)]?0x1:_0x3e3b0f['coin']>_0x3bedd0[_0x1b239e(0x228)]?-0x1:0x0);let _0x2b63bb=[{'date':_0xca83ae[_0x1b239e(0x1a4)],'changes':_0x29e443}];_0x3104c5['length']>0x2&&_0x3104c5[_0x1b239e(0x1bb)]((_0x406e3f,_0x481916)=>{const _0x40f3d3=_0x1b239e;if(_0x481916>0x0&&_0x481916<_0x3104c5[_0x40f3d3(0x2c3)]-0x1){const {missingDay1:_0x27283a,notInDay2:_0x4c4795}=_0x39a28c(_0x3104c5[_0x481916][_0x40f3d3(0x25d)],_0x3104c5[_0x481916+0x1]['coins']);_0x29e443=[],(_0x27283a['length']!=0x0||_0x4c4795[_0x40f3d3(0x2c3)]!=0x0)&&(_0x27283a[_0x40f3d3(0x2c3)]!=0x0&&_0x29e443[_0x40f3d3(0x268)](..._0x27283a),_0x4c4795['length']!=0x0&&(_0x4c4795[_0x40f3d3(0x1bb)](_0x301004=>{const _0x24de57=_0x40f3d3;_0x301004[_0x24de57(0x2b6)]=-_0x301004['number'];}),_0x29e443[_0x40f3d3(0x268)](..._0x4c4795)),_0x29e443['sort']((_0x2c5778,_0x1dc773)=>_0x2c5778[_0x40f3d3(0x228)]>_0x1dc773[_0x40f3d3(0x228)]?0x1:_0x1dc773[_0x40f3d3(0x228)]>_0x2c5778[_0x40f3d3(0x228)]?-0x1:0x0),_0x2b63bb[_0x40f3d3(0x268)]({'date':_0x3104c5[_0x481916+0x1][_0x40f3d3(0x1b1)],'changes':_0x29e443}));}}),dbConfig[_0x1b239e(0x157)](_0x1b239e(0x1e3))['find']({'botID':botID})[_0x1b239e(0x288)]({..._0xca83ae,'liquidity':_0x2b63bb})[_0x1b239e(0x171)]();}}if(isOlderVersion(_0x39707b,_0x1b239e(0x298))){let _0xb5c7e2=dbConfig[_0x1b239e(0x157)](_0x1b239e(0x1e3))['find']({'botID':botID})[_0x1b239e(0x1aa)]();if(_0xb5c7e2){const _0x3fe5da=_0xb5c7e2['exchange'],_0x4e1b06=_0x3fe5da?capitalize(_0x3fe5da):_0x1b239e(0x19c);dbConfig['get']('bot')[_0x1b239e(0x18a)]({'botID':botID})[_0x1b239e(0x288)]({'exchange':_0x4e1b06})[_0x1b239e(0x171)]();}}let _0xf3cb84=dbPerformance[_0x1b239e(0x157)]('version')[_0x1b239e(0x1aa)]();isOlderVersion(_0xf3cb84,_0x1b239e(0x185))&&setStartDatePerformance();let _0x1be3f1=dbCoinResults['get'](_0x1b239e(0x20b))[_0x1b239e(0x1aa)]();if(isOlderVersion(_0x1be3f1,_0x1b239e(0x23b))){let _0x1c1802=dbCoinResults[_0x1b239e(0x157)](_0x1b239e(0x25d))[_0x1b239e(0x1aa)]();if(_0x1c1802[_0x1b239e(0x2c3)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x26c74c=_0x472155;dbConfig[_0x26c74c(0x2ae)](_0x26c74c(0x20b),serverversion)[_0x26c74c(0x171)](),dbPerformance['set'](_0x26c74c(0x20b),serverversion)[_0x26c74c(0x171)](),dbLogs[_0x26c74c(0x2ae)](_0x26c74c(0x20b),serverversion)[_0x26c74c(0x171)](),dbCoinResults['set'](_0x26c74c(0x20b),serverversion)[_0x26c74c(0x171)]();}function getConfiguration(_0x2115c4){const _0x571816=_0x472155;let _0x58bbbf=dbConfig[_0x571816(0x157)](_0x571816(0x1e3))[_0x571816(0x18a)]({'botID':_0x2115c4})['value']();if(_0x58bbbf){let _0x109b9f=![];typeof _0x58bbbf[_0x571816(0x188)]==_0x571816(0x143)&&(_0x58bbbf={..._0x58bbbf,'threshold':Number(_0x58bbbf[_0x571816(0x188)])},_0x109b9f=!![]),_0x58bbbf['change24h']==null&&(_0x58bbbf={..._0x58bbbf,'change24h':-0x14},_0x109b9f=!![]),!_0x58bbbf['fiat']&&(_0x58bbbf={..._0x58bbbf,'fiat':_0x571816(0x239)},_0x109b9f=!![]),!_0x58bbbf['onepagemode']&&(_0x58bbbf={..._0x58bbbf,'onepagemode':settings[_0x571816(0x159)]},_0x109b9f=!![]),!_0x58bbbf[_0x571816(0x2bf)]&&(_0x58bbbf={..._0x58bbbf,'colorscheme':_0x571816(0x252)},_0x109b9f=!![]),!_0x58bbbf['autoliquidity']&&(_0x58bbbf={..._0x58bbbf,'autoliquidity':!![]},_0x109b9f=!![]),_0x109b9f&&(_0x58bbbf={'botID':_0x58bbbf[_0x571816(0x219)],'exchange':_0x58bbbf['exchange'],'apiKey':_0x58bbbf['apiKey'],'apiSecret':_0x58bbbf[_0x571816(0x279)],'apiPassword':_0x58bbbf[_0x571816(0x266)],'basecoin':_0x58bbbf[_0x571816(0x26a)],'botname':_0x58bbbf['botname'],'showname':_0x58bbbf[_0x571816(0x2ca)],'threshold':_0x58bbbf[_0x571816(0x188)],'ordertype':_0x58bbbf[_0x571816(0x220)],'timeout':_0x58bbbf[_0x571816(0x21e)],'fiat':_0x58bbbf[_0x571816(0x231)],'startdate':_0x58bbbf[_0x571816(0x1a4)],'recreate':_0x58bbbf['recreate'],'timeshift':_0x58bbbf[_0x571816(0x276)],'onepagemode':_0x58bbbf['onepagemode'],'headless':_0x58bbbf[_0x571816(0x187)],'cooldown':_0x58bbbf['cooldown'],'change24h':_0x58bbbf[_0x571816(0x1b9)],'emojibuy':_0x58bbbf[_0x571816(0x243)],'emojisell':_0x58bbbf[_0x571816(0x19b)],'colorscheme':_0x58bbbf[_0x571816(0x2bf)],'portfolio':_0x58bbbf[_0x571816(0x18c)],'autoliquidity':_0x58bbbf[_0x571816(0x177)],'liquidity':_0x58bbbf[_0x571816(0x1c6)],'openOrders':_0x58bbbf['openOrders']},dbConfig[_0x571816(0x157)]('bot')['remove']()[_0x571816(0x171)](),dbConfig['get'](_0x571816(0x1e3))[_0x571816(0x268)](_0x58bbbf)[_0x571816(0x171)]());}else _0x58bbbf={'botID':_0x2115c4,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x571816(0x17a)+_0x2115c4,'showname':![],'threshold':0x3,'ordertype':_0x571816(0x2bc),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x571816(0x276)],'onepagemode':settings[_0x571816(0x159)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x571816(0x252),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x58bbbf;}function emittedConfiguration(){const _0x1ed07f=_0x472155;let _0x5d8576;if(config[_0x1ed07f(0x254)]=='')_0x5d8576={...config,'configstate':_0x1ed07f(0x19a)};else config[_0x1ed07f(0x254)]==_0x1ed07f(0x235)?_0x5d8576={...config,'configstate':_0x1ed07f(0x247)}:(_0x5d8576={...config,'apiKey':_0x1ed07f(0x169),'apiSecret':'************'},config[_0x1ed07f(0x266)]&&(_0x5d8576[_0x1ed07f(0x266)]='************'));return _0x5d8576;}function getSettings(){const _0x6bdffb=_0x472155;return dbSettings['get']('settings')[_0x6bdffb(0x1aa)]();}function getSecure(){const _0x1513dc=_0x472155;return dbSecure[_0x1513dc(0x157)](_0x1513dc(0x299))[_0x1513dc(0x1aa)]()||{};}function updateTimeshift(_0x1b8053){const _0xf8fe0f=_0x472155;let _0x50af79=dbConfig[_0xf8fe0f(0x157)]('bot')['find']({'botID':botID})['value']();_0x50af79&&dbConfig[_0xf8fe0f(0x157)](_0xf8fe0f(0x1e3))[_0xf8fe0f(0x18a)]({'botID':botID})[_0xf8fe0f(0x288)]({'timeshift':_0x1b8053})[_0xf8fe0f(0x171)](),config['timeshift']=_0x1b8053,proxyEmit(_0xf8fe0f(0x2cb),emittedConfiguration());}function updateOnepagemode(_0x477af9){const _0x5c552=_0x472155;let _0x18156c=dbConfig[_0x5c552(0x157)]('bot')[_0x5c552(0x18a)]({'botID':botID})[_0x5c552(0x1aa)]();_0x18156c&&dbConfig['get'](_0x5c552(0x1e3))[_0x5c552(0x18a)]({'botID':botID})[_0x5c552(0x288)]({'onepagemode':_0x477af9})[_0x5c552(0x171)](),config[_0x5c552(0x159)]=_0x477af9,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x5c4fdd){const _0x3a1799=_0x472155;logger[_0x3a1799(0x22c)](_0x3a1799(0x277));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x3a1799(0x141));let _0xf7f59d=[],_0x162f6f=![],_0x4e0c85=![],_0x26e4ca=[];_0x5c4fdd['portfolio'][_0x3a1799(0x1bb)](_0x5edb24=>{const _0x229aa7=_0x3a1799;if(!_0x5edb24[_0x229aa7(0x17e)]&&_0x5edb24[_0x229aa7(0x228)]!=_0x5c4fdd[_0x229aa7(0x26a)])_0x26e4ca[_0x229aa7(0x268)](_0x5edb24['symbol']);}),_0x26e4ca[_0x3a1799(0x1bb)](_0x51f9df=>{const _0x220c6c=_0x3a1799,_0x5ed240=watchedSymbols[_0x220c6c(0x2cc)](_0x51f9df);!_0x5ed240&&_0xf7f59d[_0x220c6c(0x268)](_0x51f9df);}),_0x26e4ca[_0x3a1799(0x1bb)](_0x2254a6=>{const _0x2a7ded=_0x3a1799,_0x147193=currentCoins[_0x2a7ded(0x18a)](_0x46d58d=>_0x46d58d[_0x2a7ded(0x28b)]==_0x2254a6);!_0x147193&&(_0x162f6f=!![]);}),currentCoins[_0x3a1799(0x1bb)](_0x46576d=>{const _0x325722=_0x3a1799;if(_0x46576d['coin']!=config[_0x325722(0x26a)]){const _0x4a6f04=_0x26e4ca[_0x325722(0x18a)](_0x30174f=>_0x30174f==_0x46576d['symbol']);!_0x4a6f04&&(_0x162f6f=!![]);}}),_0x5c4fdd['portfolio'][_0x3a1799(0x1bb)](_0xb80d2=>{const _0x52bfa1=_0x3a1799,_0x58a930=config[_0x52bfa1(0x18c)][_0x52bfa1(0x18a)](_0x140211=>_0x140211[_0x52bfa1(0x228)]==_0xb80d2[_0x52bfa1(0x228)]);if(_0x58a930&&_0xb80d2[_0x52bfa1(0x2b7)]!=_0x58a930['offset'])_0x4e0c85=!![];});let _0x411da2=dbConfig[_0x3a1799(0x157)]('bot')[_0x3a1799(0x18a)]({'botID':botID})['value']();_0x5c4fdd={..._0x5c4fdd,'apiKey':crypt[_0x3a1799(0x2c0)](secure[_0x3a1799(0x14a)],_0x5c4fdd[_0x3a1799(0x254)])[_0x3a1799(0x1f4)],'apiSecret':crypt[_0x3a1799(0x2c0)](secure[_0x3a1799(0x14a)],_0x5c4fdd['apiSecret'])[_0x3a1799(0x1f4)]};_0x5c4fdd[_0x3a1799(0x266)]&&(_0x5c4fdd[_0x3a1799(0x266)]=crypt['decrypt'](secure['privateKey'],_0x5c4fdd[_0x3a1799(0x266)])[_0x3a1799(0x1f4)]);let _0x394a66=![];if(_0x411da2){_0x5c4fdd[_0x3a1799(0x254)]=='************'?_0x5c4fdd[_0x3a1799(0x254)]=config[_0x3a1799(0x254)]:_0x394a66=!![];_0x5c4fdd['apiSecret']==_0x3a1799(0x169)?_0x5c4fdd[_0x3a1799(0x279)]=config[_0x3a1799(0x279)]:_0x394a66=!![];if(_0x5c4fdd[_0x3a1799(0x266)]==_0x3a1799(0x169))_0x5c4fdd['apiPassword']=config[_0x3a1799(0x266)];else{if(_0x5c4fdd[_0x3a1799(0x266)])_0x394a66=!![];}dbConfig[_0x3a1799(0x157)](_0x3a1799(0x1e3))['find']({'botID':botID})[_0x3a1799(0x288)](_0x5c4fdd)[_0x3a1799(0x171)]();}else dbConfig[_0x3a1799(0x157)](_0x3a1799(0x1e3))[_0x3a1799(0x268)](_0x5c4fdd)[_0x3a1799(0x171)](),_0x394a66=!![],process[_0x3a1799(0x2c7)]({'status':_0x3a1799(0x15a),'live':_0x3a1799(0x1b7)},_0x56ae0d=>{});process[_0x3a1799(0x2c7)]({'botname':_0x5c4fdd[_0x3a1799(0x166)]},_0x2b30e4=>{}),updateBotManager(),config={..._0x5c4fdd},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x394a66)await reset(_0xf7f59d,!![]);else _0x162f6f||_0x4e0c85?await reset(_0xf7f59d,![]):getBalances();blockTransactionDetection=![],logger[_0x3a1799(0x22c)](_0x3a1799(0x1ed));}async function storeHeadless(_0x5a44bb){const _0x464324=_0x472155,_0x3b013e={...config,'headless':_0x5a44bb[_0x464324(0x187)]};let _0x38d101=dbConfig[_0x464324(0x157)](_0x464324(0x1e3))[_0x464324(0x18a)]({'botID':botID})[_0x464324(0x1aa)]();_0x38d101&&dbConfig[_0x464324(0x157)](_0x464324(0x1e3))[_0x464324(0x18a)]({'botID':botID})[_0x464324(0x288)](_0x3b013e)['write'](),config={..._0x3b013e},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4a4af2){const _0x485ed5=_0x472155,_0x4fb2f2={...config,'fiat':_0x4a4af2};let _0x575699=dbConfig[_0x485ed5(0x157)](_0x485ed5(0x1e3))[_0x485ed5(0x18a)]({'botID':botID})[_0x485ed5(0x1aa)]();_0x575699&&dbConfig['get']('bot')[_0x485ed5(0x18a)]({'botID':botID})[_0x485ed5(0x288)](_0x4fb2f2)['write'](),config={..._0x4fb2f2},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5c314e=_0x472155;logger[_0x5c314e(0x1e1)]('Resetting\x20bot\x20history');try{if(fs[_0x5c314e(0x16c)](path['join'](configpath,_0x5c314e(0x24b)+botID+_0x5c314e(0x2bd))))fs['unlinkSync'](path[_0x5c314e(0x283)](configpath,'bot-'+botID+_0x5c314e(0x2bd)));if(fs['existsSync'](path[_0x5c314e(0x283)](configpath,_0x5c314e(0x24b)+botID+_0x5c314e(0x1d4))))fs[_0x5c314e(0x1e4)](path[_0x5c314e(0x283)](configpath,'bot-'+botID+_0x5c314e(0x1d4)));if(fs[_0x5c314e(0x16c)](path[_0x5c314e(0x283)](configpath,_0x5c314e(0x24b)+botID+_0x5c314e(0x1da))))fs[_0x5c314e(0x1e4)](path[_0x5c314e(0x283)](configpath,'bot-'+botID+_0x5c314e(0x1da)));}catch(_0x954763){if(_0x954763)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x954763);}const _0x13584a=getDate();let _0x3a36c4=[];currentCoins[_0x5c314e(0x1bb)](_0x51b81a=>{const _0x4cea3d=_0x5c314e;_0x3a36c4['push']({'coin':_0x51b81a[_0x4cea3d(0x228)],'number':_0x51b81a[_0x4cea3d(0x2b6)],'price':_0x51b81a[_0x4cea3d(0x270)]});});let _0x1b0954=dbConfig['get'](_0x5c314e(0x1e3))[_0x5c314e(0x18a)]({'botID':botID})['value']();_0x1b0954&&(dbConfig['get'](_0x5c314e(0x1e3))[_0x5c314e(0x18a)]({'botID':botID})[_0x5c314e(0x288)]({'liquidity':[{'date':_0x13584a,'changes':_0x3a36c4}]})[_0x5c314e(0x171)](),config[_0x5c314e(0x1c6)]=[]),process[_0x5c314e(0x2c7)]({'stop':_0x5c314e(0x286)},_0x3d355c=>{});}function noslash(_0xe500f9){const _0xb7bb15=_0x472155;return _0xe500f9[_0xb7bb15(0x1e0)]('/','');}function updateHighestFee(_0x332634,_0xde18d4){const _0xf6c73a=_0x472155;lastFees[_0xf6c73a(0x172)]=_0x332634,lastFees[_0xf6c73a(0x14b)][_0xf6c73a(0x2c3)]===0x14&&lastFees['recent20'][_0xf6c73a(0x1cf)](),lastFees[_0xf6c73a(0x14b)][_0xf6c73a(0x268)](_0xde18d4),lastFees[_0xf6c73a(0x226)]=Math[_0xf6c73a(0x1eb)](...lastFees[_0xf6c73a(0x14b)]);}async function updateNumberCoinsCcxt(_0x1298a8){const _0xc55e57=_0x472155;logger['debug'](_0xc55e57(0x1f2)+_0x1298a8[_0xc55e57(0x28b)]+_0xc55e57(0x225)+_0x1298a8[_0xc55e57(0x260)]+_0xc55e57(0x225)+_0x1298a8['id']);let _0xedb58d=_0x1298a8[_0xc55e57(0x260)],_0x3a9a5e=![];currentCoins[_0xc55e57(0x1bb)](_0x5358be=>{const _0x534234=_0xc55e57;_0x5358be[_0x534234(0x28b)]==_0x1298a8[_0x534234(0x28b)]&&(_0x3a9a5e=!![]);});if(!_0x3a9a5e)return;const _0x17dc37=currentCoins[_0xc55e57(0x18a)](_0x371ae7=>_0x371ae7[_0xc55e57(0x28b)]==_0x1298a8[_0xc55e57(0x28b)]),_0x3bdb0a=_0x3b6d7d=>{if(_0x17dc37)_0x17dc37['orderstatus']=_0x3b6d7d;};if(_0xedb58d==_0xc55e57(0x1a2))_0x3bdb0a(_0xc55e57(0x1a2));else{if(_0xedb58d=='canceled'){_0x3bdb0a(_0xc55e57(0x253));const _0x1c9df4=await getCoins();[currentCoins,currentCoinsAll]=_0x1c9df4,await getOpenOrders(),handleOpenOrders();}else{if(_0xedb58d==_0xc55e57(0x28c)){logger[_0xc55e57(0x22c)](_0xc55e57(0x25c)+_0x1298a8[_0xc55e57(0x28b)]+_0xc55e57(0x225)+_0x1298a8['filled']+_0xc55e57(0x225)+_0x1298a8['id']);let _0x18631a=![];if(lastOrders)for(const _0xf45a7 of lastOrders){const _0x5c4857=0xc8,_0x25f835=0x1388;let _0x9bff43=0x0;while(!_0xf45a7[_0xc55e57(0x224)]&&_0x9bff43*_0x5c4857<_0x25f835){_0x9bff43++,await sleep(_0x5c4857);}if(_0x9bff43>0x0)logger[_0xc55e57(0x22c)](_0xc55e57(0x17b)+_0x9bff43*_0x5c4857/0x3e8+_0xc55e57(0x144));if(_0xf45a7[_0xc55e57(0x224)]==_0x1298a8['id']){logger[_0xc55e57(0x22c)](_0xc55e57(0x16b)+_0x1298a8['id']),_0x18631a=!![];if(_0xf45a7['filled']==0x0){logger[_0xc55e57(0x22c)](_0xc55e57(0x1fe)+_0x1298a8['id']);if(_0x1298a8[_0xc55e57(0x22e)])_0xf45a7[_0xc55e57(0x27e)]=_0x1298a8[_0xc55e57(0x22e)];else{if(_0x1298a8[_0xc55e57(0x27e)])_0xf45a7[_0xc55e57(0x27e)]=_0x1298a8[_0xc55e57(0x27e)];else{}}_0xf45a7['filled']=_0x1298a8[_0xc55e57(0x256)],_0xf45a7[_0xc55e57(0x1c3)]={'currency':_0x1298a8['fee']?_0x1298a8['fee'][_0xc55e57(0x172)]:null,'cost':_0x1298a8[_0xc55e57(0x1c3)]?_0x1298a8['fee'][_0xc55e57(0x1cd)]:0x0},updateHighestFee(_0xf45a7[_0xc55e57(0x1c3)][_0xc55e57(0x172)],_0xf45a7[_0xc55e57(0x1c3)][_0xc55e57(0x1cd)]),_0x3bdb0a(_0xc55e57(0x256)),await validateOrders();if(lockOrders==ORDERS[_0xc55e57(0x1d3)]){const _0x565127=await getCoins();[currentCoins,currentCoinsAll]=_0x565127;}await updateCoinResults(_0xf45a7);}}}if(!_0x18631a){logger['debug'](_0xc55e57(0x148)+_0x1298a8['id']),_0x3bdb0a(_0xc55e57(0x256));const _0x3d971a=await getCoins();[currentCoins,currentCoinsAll]=_0x3d971a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x111518=JSON['parse'](lastBalances[_0xc55e57(0x18c)]);const _0x5557d4=_0x111518[_0xc55e57(0x18a)](_0x10a8ad=>_0x10a8ad[_0xc55e57(0x28b)]==_0x1298a8['symbol']);if(_0x5557d4){if(_0xedb58d==_0xc55e57(0x1a2))_0x5557d4[_0xc55e57(0x155)]=_0x5557d4[_0xc55e57(0x155)]==_0xc55e57(0x256)?_0xc55e57(0x256):_0xc55e57(0x1a2);else{if(_0xedb58d=='canceled')_0x5557d4[_0xc55e57(0x155)]=_0x5557d4['orderstatus']=='filled'?_0xc55e57(0x256):_0xc55e57(0x253);else _0xedb58d=='closed'&&(_0x5557d4[_0xc55e57(0x155)]=_0xc55e57(0x256));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x111518)},proxyEmit(_0xc55e57(0x23d),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});}}async function updateOpenOrders(){const _0x42628b=_0x472155;await getOpenOrders();let _0x5e6d28=![];currentCoins[_0x42628b(0x1bb)](_0xd1830a=>{const _0x5b192f=_0x42628b;_0x5e6d28=allOpenOrders[_0x5b192f(0x18a)](_0x367679=>_0x367679['symbol']==_0xd1830a[_0x5b192f(0x28b)]),_0xd1830a[_0x5b192f(0x155)]=_0x5e6d28?_0x5b192f(0x1a2):'none';});}async function getCoins(_0x5b1662=!![],_0x9adb72=config[_0x472155(0x26a)]){const _0x4a48c9=_0x472155;let _0x583309,_0xc65010=[],_0x353248=[],_0x359f0b=[],_0x36630c=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x583309=await exchange['fetchBalance'](),mybalances=_0x583309[_0x4a48c9(0x1ec)];for(const [_0x5561f6,_0x4800e5]of Object[_0x4a48c9(0x28e)](mybalances)){_0x36630c[_0x4a48c9(0x268)](_0x5561f6);}if(_0x9adb72=='')for(const [_0x568bd1,_0x40267b]of Object['entries'](mybalances)){_0x40267b!=0x0&&_0x353248[_0x4a48c9(0x268)]({'coin':_0x568bd1});}else{let _0x334d6f=![];for(const [_0x49f970,_0x2a011e]of Object[_0x4a48c9(0x28e)](mybalances)){if(_0x36630c[_0x4a48c9(0x2cc)](_0x49f970)){const _0x3c920a=config[_0x4a48c9(0x18c)][_0x4a48c9(0x18a)](_0xa4aa8c=>_0xa4aa8c[_0x4a48c9(0x228)]==_0x49f970),_0x4c3698=_0x49f970+'/'+_0x9adb72,_0x36d530=_0x9adb72+'/'+_0x49f970,_0x4892bd=currentCoins[_0x4a48c9(0x18a)](_0x4229f8=>_0x4229f8[_0x4a48c9(0x228)]==_0x49f970);_0x334d6f=![];if((_0x2a011e!=0x0||_0x3c920a)&&(allSymbols[_0x4a48c9(0x2cc)](_0x4c3698)||_0x49f970==_0x9adb72))_0x49f970!=_0x9adb72&&_0xc65010[_0x4a48c9(0x268)](_0x4c3698),_0x353248['push']({'coin':_0x49f970,'symbol':_0x4c3698,'reverse':![],'number':Math['max'](_0x2a011e+(_0x3c920a&&_0x3c920a[_0x4a48c9(0x2b7)]||0x0),0x0),'orderstatus':_0x4892bd?_0x4892bd[_0x4a48c9(0x155)]:_0x4a48c9(0x150)});else(_0x2a011e!=0x0||_0x3c920a)&&allSymbols[_0x4a48c9(0x2cc)](_0x36d530)&&(_0x49f970!=_0x9adb72&&_0xc65010[_0x4a48c9(0x268)](_0x36d530),_0x353248[_0x4a48c9(0x268)]({'coin':_0x49f970,'symbol':_0x36d530,'reverse':!![],'number':Math[_0x4a48c9(0x1eb)](_0x2a011e+(_0x3c920a&&_0x3c920a[_0x4a48c9(0x2b7)]||0x0),0x0),'orderstatus':_0x4892bd?_0x4892bd[_0x4a48c9(0x155)]:_0x4a48c9(0x150)}));}}}}catch(_0x54053a){if(!_0x5b1662)handleErrorNoStop(_0x54053a,_0x4a48c9(0x22b));else await handleError(_0x54053a,'getCoins()');}return _0x359f0b=cloneDeep(_0x353248),_0x353248=_0x353248[_0x4a48c9(0x16d)](_0x498ef1=>{const _0x490470=_0x4a48c9,_0x38e6f0=config[_0x490470(0x18c)][_0x490470(0x18a)](_0x49fc9c=>_0x49fc9c[_0x490470(0x228)]==_0x498ef1[_0x490470(0x228)]);return _0x38e6f0&&!_0x38e6f0[_0x490470(0x17e)];}),[_0x353248,_0x359f0b];}async function getCoinNumber(_0x46f699){const _0x4c0966=_0x472155;let _0x4394d8;try{const _0x3166ec=await exchange[_0x4c0966(0x199)]();_0x4394d8=_0x3166ec[_0x4c0966(0x1ec)][_0x46f699];}catch(_0x527de5){await handleError(_0x527de5,_0x4c0966(0x1a9));}return _0x4394d8;}async function getOpenOrders(){const _0x52cc59=_0x472155;let _0x31dfe2;allOpenOrders=[];try{for(const _0x1512b7 of config[_0x52cc59(0x18c)]){!_0x1512b7[_0x52cc59(0x17e)]&&_0x1512b7['coin']!=config[_0x52cc59(0x26a)]&&(_0x31dfe2=await exchange['fetchOpenOrders'](_0x1512b7[_0x52cc59(0x28b)]),_0x31dfe2[_0x52cc59(0x2c3)]>0x0&&allOpenOrders[_0x52cc59(0x268)](_0x31dfe2[0x0]));}}catch(_0x19ad26){await handleError(_0x19ad26,_0x52cc59(0x292));}}async function handleOpenOrders(_0xac91b0=0x0){const _0x269776=_0x472155;allOpenOrders[_0x269776(0x2c3)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0xac91b0==0x0?(logger[_0x269776(0x22c)](_0x269776(0x200)),_0xac91b0++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x269776(0x2d1))));}async function testAPI(_0xf5692e){const _0x41779a=_0x472155,_0x1a3350=ccxt[_0xf5692e['exchange'][_0x41779a(0x1af)]()],_0x38fa64=new _0x1a3350({'apiKey':_0xf5692e[_0x41779a(0x254)],'secret':_0xf5692e['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0xf5692e['exchange']==_0x41779a(0x21c)&&(_0x38fa64[_0x41779a(0x201)]={'defaultType':_0x41779a(0x1cc)});if(_0xf5692e[_0x41779a(0x266)])_0x38fa64[_0x41779a(0x280)]=_0xf5692e[_0x41779a(0x266)];try{await _0x38fa64[_0x41779a(0x156)]();}catch(_0xeb7043){throw _0xeb7043;}}function cloneDeep(_0x3ebddb){const _0x11ddff=_0x472155;return JSON[_0x11ddff(0x297)](JSON[_0x11ddff(0x183)](_0x3ebddb));}async function getPortfolio(_0x1fae41){const _0x29af9a=_0x472155;let _0x54b63b=[],_0x1e5a71=[],_0xe808c2=[],_0x52e19d;if(_0x1fae41[_0x29af9a(0x254)]!==_0x29af9a(0x169)||_0x1fae41[_0x29af9a(0x279)]!==_0x29af9a(0x169)||_0x1fae41[_0x29af9a(0x266)]&&_0x1fae41[_0x29af9a(0x266)]!==_0x29af9a(0x169)){if(config[_0x29af9a(0x24a)]){if(_0x1fae41[_0x29af9a(0x254)]==_0x29af9a(0x169))_0x1fae41[_0x29af9a(0x254)]=config[_0x29af9a(0x254)];if(_0x1fae41[_0x29af9a(0x279)]=='************')_0x1fae41['apiSecret']=config[_0x29af9a(0x279)];if(_0x1fae41[_0x29af9a(0x266)]==_0x29af9a(0x169))_0x1fae41[_0x29af9a(0x266)]=config[_0x29af9a(0x266)];try{await testAPI(_0x1fae41);}catch(_0x5789b3){if(_0x5789b3[_0x29af9a(0x1d6)]()[_0x29af9a(0x2cc)](_0x29af9a(0x1a0))){logger[_0x29af9a(0x22c)](_0x29af9a(0x251)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5789b3,_0x29af9a(0x210));return;}}}await initExchange(_0x1fae41['exchange'],_0x1fae41[_0x29af9a(0x254)],_0x1fae41['apiSecret'],_0x1fae41[_0x29af9a(0x266)]);try{await loadSymbols(_0x1fae41[_0x29af9a(0x24a)],!![]);}catch(_0x476ca8){if(_0x476ca8[_0x29af9a(0x1d6)]()[_0x29af9a(0x2cc)]('AuthenticationError')){proxyEmit(_0x29af9a(0x18c),![]);return;}else{handleError(_0x476ca8,'getPortfolio(1)');return;}}const _0x5e2e7d=await getCoins(![],_0x1fae41[_0x29af9a(0x26a)]);_0xe808c2=cloneDeep(_0x5e2e7d[0x1]);}else _0xe808c2=cloneDeep(currentCoinsAll);if(_0x1fae41['basecoin']=='')proxyEmit(_0x29af9a(0x18c),_0xe808c2);else{_0xe808c2[_0x29af9a(0x1bb)](_0x226b25=>{const _0x574fc6=_0x29af9a;if(_0x226b25[_0x574fc6(0x228)]!=_0x1fae41['basecoin'])_0x54b63b[_0x574fc6(0x268)](_0x226b25[_0x574fc6(0x28b)]);});try{_0x1e5a71=await exchange['fetchTickers'](_0x54b63b);}catch(_0xd54262){if(_0xd54262[_0x29af9a(0x1d6)]()[_0x29af9a(0x2cc)](_0x29af9a(0x1a0))){proxyEmit('portfolio',![]);return;}else{handleError(_0xd54262,_0x29af9a(0x195));return;}}_0xe808c2['forEach'](_0x5c763f=>{const _0x5f04c6=_0x29af9a;_0x5c763f[_0x5f04c6(0x228)]!=_0x1fae41[_0x5f04c6(0x26a)]?_0x52e19d=_0x5c763f['reverse']?0x1/_0x1e5a71[_0x5c763f[_0x5f04c6(0x28b)]][_0x5f04c6(0x270)]:_0x1e5a71[_0x5c763f[_0x5f04c6(0x28b)]]['last']:_0x52e19d=0x1,_0x5c763f[_0x5f04c6(0x27e)]=formatResult(_0x52e19d,0x8);}),proxyEmit(_0x29af9a(0x18c),_0xe808c2);}}function truncateTradeAmount(_0x1d343f,_0x104cc3){const _0x5e5464=_0x472155;let _0x3c0a55=0x0;try{_0x3c0a55=exchange[_0x5e5464(0x15f)](_0x1d343f,_0x104cc3);}catch(_0x2b8110){}return _0x3c0a55;}function checkMinimums(_0x1e6ece){const _0x5e34c2=_0x472155;let _0xc02276=!![];const _0x4fb7bb=!_0x1e6ece[_0x5e34c2(0x1ac)]?markets[_0x1e6ece[_0x5e34c2(0x28b)]][_0x5e34c2(0x20d)][_0x5e34c2(0x20c)][_0x5e34c2(0x2ce)]:markets[_0x1e6ece[_0x5e34c2(0x28b)]][_0x5e34c2(0x20d)][_0x5e34c2(0x1cd)][_0x5e34c2(0x2ce)],_0x1d85e3=!_0x1e6ece['reverse']?markets[_0x1e6ece[_0x5e34c2(0x28b)]][_0x5e34c2(0x20d)][_0x5e34c2(0x1cd)][_0x5e34c2(0x2ce)]:markets[_0x1e6ece['symbol']][_0x5e34c2(0x20d)][_0x5e34c2(0x20c)]['min'],_0x5ea9df=truncateTradeAmount(_0x1e6ece[_0x5e34c2(0x28b)],_0x1e6ece['trade']);_0x1e6ece['trade']=_0x5ea9df;if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)<_0x4fb7bb)_0xc02276=![];if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)*_0x1e6ece[_0x5e34c2(0x270)]<_0x1d85e3)_0xc02276=![];if(_0x1e6ece[_0x5e34c2(0x149)]==_0x5e34c2(0x1bc)){let _0x44d457=config[_0x5e34c2(0x18c)][_0x5e34c2(0x18a)](_0x51e682=>_0x51e682[_0x5e34c2(0x228)]==_0x1e6ece[_0x5e34c2(0x228)]);if(_0x44d457['offset']>0x0){if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)>_0x1e6ece['number']-_0x44d457['offset'])_0xc02276=![];}else{if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)>_0x1e6ece[_0x5e34c2(0x2b6)])_0xc02276=![];}}if(_0x1e6ece[_0x5e34c2(0x149)]==_0x5e34c2(0x211)){let _0x579742=config[_0x5e34c2(0x18c)][_0x5e34c2(0x18a)](_0x495fe9=>_0x495fe9[_0x5e34c2(0x228)]==config[_0x5e34c2(0x26a)]),_0x205201=currentCoins['find'](_0x43570=>_0x43570[_0x5e34c2(0x228)]==config[_0x5e34c2(0x26a)]);if(_0x579742[_0x5e34c2(0x2b7)]>0x0){if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)*_0x1e6ece[_0x5e34c2(0x270)]>_0x205201[_0x5e34c2(0x2b6)]-_0x579742[_0x5e34c2(0x2b7)])_0xc02276=![];}else{if(Math[_0x5e34c2(0x2d2)](_0x5ea9df)*_0x1e6ece['last']>_0x205201[_0x5e34c2(0x2b6)])_0xc02276=![];}}return _0xc02276;}async function getBalances(_0x390e4d=!![]){const _0x40e5dc=_0x472155;let _0x3c0e87=0x0,_0xc399cd;const _0x2a6bef=config[_0x40e5dc(0x188)];if(config[_0x40e5dc(0x187)]&&config[_0x40e5dc(0x1b9)]<0x0)await validate24hChanges();currentCoins[_0x40e5dc(0x1bb)](_0x4f8936=>{const _0x992875=_0x40e5dc;if(_0x4f8936[_0x992875(0x228)]!=config[_0x992875(0x26a)]){let _0x4b91c0=global['ticker'][noslash(_0x4f8936['symbol'])];_0xc399cd=_0x4f8936[_0x992875(0x1ac)]?0x1/_0x4b91c0:_0x4b91c0;}else _0xc399cd=0x1;let _0x5e5c1a=_0x4f8936[_0x992875(0x2b6)]*_0xc399cd;_0x3c0e87+=_0x5e5c1a,_0x4f8936['last']=formatResult(Number(_0xc399cd),0x8),_0x4f8936[_0x992875(0x1aa)]=_0x5e5c1a;}),currentCoins[_0x40e5dc(0x1bb)](_0x321879=>{const _0x44166a=_0x40e5dc;let _0xe4446a=config['portfolio'][_0x44166a(0x18a)](_0x1e26a9=>_0x1e26a9[_0x44166a(0x228)]==_0x321879[_0x44166a(0x228)]),_0x399d29=Number(_0xe4446a['distribution']),_0x7b3462=_0x321879[_0x44166a(0x1aa)]/_0x3c0e87*0x64,_0x5eeb62=_0x399d29*_0x3c0e87/0x64/_0x321879[_0x44166a(0x270)]-_0x321879[_0x44166a(0x2b6)];_0x321879['distribution']=formatResult(_0x7b3462,0x3),_0x321879['target']=formatResult(_0x399d29,0x3),_0x321879[_0x44166a(0x202)]=formatResult(_0x5eeb62,0x8),_0x321879[_0x44166a(0x149)]='',_0x321879[_0x44166a(0x2c2)]=![];if(_0x321879[_0x44166a(0x228)]!=config['basecoin']){if(_0x321879[_0x44166a(0x173)]>_0x399d29)_0x321879[_0x44166a(0x149)]=_0x44166a(0x1bc),_0x321879[_0x44166a(0x2c2)]=checkMinimums(_0x321879);else _0x321879[_0x44166a(0x173)]<_0x399d29&&(_0x321879[_0x44166a(0x149)]=_0x44166a(0x211),_0x321879[_0x44166a(0x2c2)]=checkMinimums(_0x321879));}_0x321879['delta']=_0x321879[_0x44166a(0x173)]/_0x321879[_0x44166a(0x15e)]-0x1;if(_0x321879[_0x44166a(0x155)]==_0x44166a(0x256)||_0x321879[_0x44166a(0x155)]==_0x44166a(0x253))_0x321879[_0x44166a(0x155)]=_0x44166a(0x150);}),currentCoins[_0x40e5dc(0x248)]((_0x5f1d12,_0x217182)=>_0x5f1d12[_0x40e5dc(0x182)]<_0x217182['delta']?0x1:_0x217182[_0x40e5dc(0x182)]<_0x5f1d12['delta']?-0x1:0x0);const _0x59a4ac=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x59a4ac[_0x40e5dc(0x1b2)],'usd':_0x59a4ac[_0x40e5dc(0x24f)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x2a6bef},proxyEmit(_0x40e5dc(0x23d),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});if(_0x390e4d){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x2a6bef});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2a6bef});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4c2478=getNormalizedPerformance();getStartingBalances(_0x4c2478),emitPerformance(_0x4c2478);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x21dab4=getNormalizedPerformance();emitPerformance(_0x21dab4),getStartingBalances(_0x21dab4),logger[_0x40e5dc(0x22c)](_0x40e5dc(0x28a));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2b5d49=_0x472155;if(!lastBalances)return;let _0xb16564=[],_0x19adf1,_0x59f5f1=JSON[_0x2b5d49(0x297)](lastBalances[_0x2b5d49(0x18c)]);_0x59f5f1[_0x2b5d49(0x248)]((_0x1fe0ff,_0xbc76ce)=>_0x1fe0ff[_0x2b5d49(0x228)]>_0xbc76ce[_0x2b5d49(0x228)]?0x1:_0xbc76ce['coin']>_0x1fe0ff[_0x2b5d49(0x228)]?-0x1:0x0),_0x59f5f1[_0x2b5d49(0x1bb)](_0x3105ad=>{const _0x3cfc08=_0x2b5d49;let _0x543725={'coin':_0x3105ad[_0x3cfc08(0x228)],'number':_0x3105ad['number'],'price':_0x3105ad[_0x3cfc08(0x270)]};_0xb16564[_0x3cfc08(0x268)](_0x543725);});const _0x10593b=await getFiat();_0x19adf1={'date':lastBalances['time'][_0x2b5d49(0x26d)]('\x20')[0x0],'eur':_0x10593b[_0x2b5d49(0x1b2)],'usd':_0x10593b[_0x2b5d49(0x24f)],'coins':_0xb16564};let _0x21c422=dbPerformance[_0x2b5d49(0x157)]('data')[_0x2b5d49(0x18a)]({'date':_0x19adf1[_0x2b5d49(0x1b1)]})[_0x2b5d49(0x1aa)]();_0x21c422?_0x19adf1[_0x2b5d49(0x1b1)]!=config[_0x2b5d49(0x1a4)]&&dbPerformance[_0x2b5d49(0x157)](_0x2b5d49(0x1ab))['find']({'date':_0x19adf1[_0x2b5d49(0x1b1)]})[_0x2b5d49(0x288)](_0x19adf1)['write']():dbPerformance['get'](_0x2b5d49(0x1ab))['push'](_0x19adf1)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4cf5a7=_0x472155;let _0x1c8b56=[];if(dbPerformance[_0x4cf5a7(0x1dd)](_0x4cf5a7(0x1ab))[_0x4cf5a7(0x1aa)]()){let _0x4c0f04=dbPerformance[_0x4cf5a7(0x157)](_0x4cf5a7(0x1ab))[_0x4cf5a7(0x1de)]()[_0x4cf5a7(0x16d)](_0x25b2e9=>{if(_0x25b2e9['coins']['length']==0x0)return![];else return!![];})[_0x4cf5a7(0x25a)]('date')[_0x4cf5a7(0x1aa)](),_0xb3995f=[...config[_0x4cf5a7(0x1c6)]];_0xb3995f['sort']((_0x1977b4,_0x76c4ee)=>_0x1977b4[_0x4cf5a7(0x1b1)]>_0x76c4ee['date']?-0x1:_0x76c4ee[_0x4cf5a7(0x1b1)]>_0x1977b4['date']?0x1:0x0);let _0x25b252=0x1,_0x52ab56=[],_0x33005b=0x0;_0x4c0f04['slice']()['reverse']()['forEach']((_0x3e8ac4,_0x38a447)=>{const _0x279ecc=_0x4cf5a7;if(_0xb3995f[_0x33005b]){if(_0x4c0f04[_0x4c0f04[_0x279ecc(0x2c3)]-_0x38a447]&&_0xb3995f[_0x33005b][_0x279ecc(0x1b1)]==_0x4c0f04[_0x4c0f04['length']-_0x38a447][_0x279ecc(0x1b1)]){if(_0x38a447<_0x4c0f04[_0x279ecc(0x2c3)]){let _0x16867d=0x0,_0x34c294=0x0;_0x4c0f04[_0x4c0f04['length']-_0x38a447][_0x279ecc(0x25d)][_0x279ecc(0x1bb)](_0x5625a1=>{const _0x2212ca=_0x279ecc;_0x34c294+=_0x5625a1['number']*_0x5625a1[_0x2212ca(0x27e)];}),_0xb3995f[_0x33005b][_0x279ecc(0x222)][_0x279ecc(0x1bb)](_0x415b72=>{const _0x263682=_0x279ecc;_0x16867d+=_0x415b72[_0x263682(0x2b6)]*_0x415b72['price'];}),_0x25b252*=_0x16867d/(_0x34c294-_0x16867d)+0x1;}_0x33005b++;}}let _0x41debd=0x0;_0x3e8ac4[_0x279ecc(0x25d)][_0x279ecc(0x1bb)](_0x36f872=>{_0x41debd+=_0x36f872['number']*_0x36f872['price'];}),_0x52ab56[_0x4c0f04[_0x279ecc(0x2c3)]-_0x38a447-0x1]=_0x41debd*(_0x25b252-0x1);});let _0x325e91=[];_0xb3995f=[...config[_0x4cf5a7(0x1c6)]]||[];let _0x38f2ef=0x0;_0x33005b=0x0,_0x4c0f04[_0x4cf5a7(0x1bb)]((_0xb603b2,_0x1be26f)=>{const _0x3d46fb=_0x4cf5a7;if(_0xb3995f[_0x33005b]){const _0x34b15c=fns[_0x3d46fb(0x297)](_0xb3995f[_0x33005b]['date'],'yyyy/MM/dd',new Date()),_0x3782df=fns[_0x3d46fb(0x297)](_0xb603b2[_0x3d46fb(0x1b1)],_0x3d46fb(0x232),new Date());if(fns[_0x3d46fb(0x1be)](_0x34b15c,_0x3782df)){let _0x420b65=0x0;_0xb3995f[_0x33005b]['changes'][_0x3d46fb(0x1bb)](_0x4d14d9=>{const _0xa6cc9b=_0x3d46fb;!_0x325e91[_0x4d14d9[_0xa6cc9b(0x228)]]?_0x325e91[_0x4d14d9[_0xa6cc9b(0x228)]]=_0x4d14d9['number']:(_0x420b65=_0x325e91[_0x4d14d9[_0xa6cc9b(0x228)]],_0x325e91[_0x4d14d9[_0xa6cc9b(0x228)]]+=_0x4d14d9['number']);const _0x331281=_0xb603b2['coins']['find'](_0x534675=>_0x534675['coin']==_0x4d14d9[_0xa6cc9b(0x228)]);(!_0x331281||_0x331281['number']==0x0)&&(_0x38f2ef+=(-_0x4d14d9[_0xa6cc9b(0x2b6)]-_0x420b65)*_0x4d14d9[_0xa6cc9b(0x27e)]);}),_0x33005b++;}}_0xb603b2[_0x3d46fb(0x25d)][_0x3d46fb(0x1bb)]((_0x49fd73,_0x198f45)=>{const _0x101eda=_0x3d46fb;_0x325e91[_0x49fd73[_0x101eda(0x228)]]&&(_0x49fd73[_0x101eda(0x19a)]=_0x325e91[_0x49fd73[_0x101eda(0x228)]]);}),_0x1c8b56[_0x3d46fb(0x268)]({'date':_0xb603b2[_0x3d46fb(0x1b1)],'eur':_0xb603b2[_0x3d46fb(0x1b2)],'usd':_0xb603b2[_0x3d46fb(0x24f)],'offset':_0x52ab56[_0x1be26f],'netoffset':_0x38f2ef,'coins':_0xb603b2[_0x3d46fb(0x25d)]});});}return _0x1c8b56;}function emitPerformance(_0x3d0901){const _0x5ed95d=_0x472155;_0x3d0901[_0x5ed95d(0x2c3)]!==0x0?(proxyEmit(_0x5ed95d(0x2a1),_0x3d0901),lastPerformanceEmitted=getDate()):proxyEmit(_0x5ed95d(0x2a1),[]);}function getPerf(_0x414fe7,_0x11d836){const _0x2b4dd7=_0x472155;let _0x1997b6=0x0,_0x210d5a=0x0,_0x59e089=0x0;_0x414fe7[_0x2b4dd7(0x25d)][_0x2b4dd7(0x1bb)](_0x61b628=>{const _0x4a9dd7=_0x2b4dd7;_0x1997b6+=_0x61b628[_0x4a9dd7(0x2b6)]*_0x61b628[_0x4a9dd7(0x27e)];});_0x11d836&&(_0x1997b6+=_0x414fe7['offset']);if(config[_0x2b4dd7(0x26a)]===_0x2b4dd7(0x278)||config[_0x2b4dd7(0x26a)]===_0x2b4dd7(0x1bd))_0x210d5a=_0x1997b6*_0x414fe7[_0x2b4dd7(0x1b2)],_0x59e089=_0x1997b6*_0x414fe7[_0x2b4dd7(0x24f)];else{if(usdBasecoins['includes'](config[_0x2b4dd7(0x26a)]))_0x210d5a=_0x1997b6*_0x414fe7[_0x2b4dd7(0x1b2)]/_0x414fe7[_0x2b4dd7(0x24f)],_0x59e089=_0x1997b6;else config[_0x2b4dd7(0x26a)]===_0x2b4dd7(0x1e7)&&(_0x210d5a=_0x1997b6,_0x59e089=_0x1997b6*_0x414fe7[_0x2b4dd7(0x24f)]/_0x414fe7['eur']);}return[_0x1997b6,_0x210d5a,_0x59e089];}function getKPIs(_0x281453,_0x2f3d09=_0x472155(0x1e7)){const _0x5a4c3e=_0x472155,_0xef4b1e=config[_0x5a4c3e(0x26a)],_0x44ccd8=lastBalances,_0x123798=currentCoins,_0x5f426a=getNormalizedPerformance(),_0xb1d048=_0x281453==='basecoin'?_0xef4b1e:_0x281453===_0x5a4c3e(0x231)||_0x281453===_0x5a4c3e(0x16f)?_0x2f3d09:_0x5a4c3e(0x24e)+_0xef4b1e,_0x4fcb9f=_0x281453===_0x5a4c3e(0x1a7)?'Net\x20effect':_0x281453==='net-fiat'?_0x5a4c3e(0x2a4):_0xb1d048+_0x5a4c3e(0x142),_0x4d892c=_0x281453===_0x5a4c3e(0x1a7)||_0x281453==='net-fiat'?'Net\x20effect':_0xb1d048+_0x5a4c3e(0x205);let _0x2d671d=0x0;_0x123798['forEach'](_0x14650e=>{const _0x50c2d0=_0x5a4c3e;_0x2d671d+=_0x14650e[_0x50c2d0(0x2b6)]*_0x14650e[_0x50c2d0(0x270)];});if(_0x281453==='fiat'||_0x281453===_0x5a4c3e(0x16f)){if(_0xef4b1e===_0x5a4c3e(0x278)||_0xef4b1e==='ETH')_0x2d671d=_0x2d671d*(_0x2f3d09===_0x5a4c3e(0x1e7)?_0x44ccd8[_0x5a4c3e(0x1b2)]:_0x44ccd8['usd']);else{if(usdBasecoins['includes'](_0xef4b1e))_0x2d671d=_0x2d671d*(_0x2f3d09===_0x5a4c3e(0x1e7)?_0x44ccd8[_0x5a4c3e(0x1b2)]/_0x44ccd8[_0x5a4c3e(0x24f)]:0x1);else _0xef4b1e===_0x5a4c3e(0x1e7)&&(_0x2d671d=_0x2d671d*(_0x2f3d09==='EUR'?0x1:_0x44ccd8[_0x5a4c3e(0x24f)]/_0x44ccd8[_0x5a4c3e(0x1b2)]));}}let _0x30086a;if(_0x2d671d!==0x0){if(_0x281453===_0x5a4c3e(0x26a))_0x30086a=(_0x2d671d/startingBalances[_0x5a4c3e(0x26a)]-0x1)*0x64;else{if(_0x2f3d09==='EUR')_0x30086a=(_0x2d671d/startingBalances[_0x5a4c3e(0x1b2)]-0x1)*0x64;else _0x30086a=(_0x2d671d/startingBalances[_0x5a4c3e(0x24f)]-0x1)*0x64;}let _0x47dad7=0x0;if(startingBalances['coins'])_0x123798[_0x5a4c3e(0x1bb)](_0x57aa44=>{const _0x29dee8=_0x5a4c3e;let _0x397368=startingBalances[_0x29dee8(0x25d)]['find'](_0x49e69d=>_0x49e69d[_0x29dee8(0x228)]===_0x57aa44[_0x29dee8(0x228)]);if(_0x397368&&_0x397368[_0x29dee8(0x228)]&&_0x57aa44[_0x29dee8(0x2b6)]!==0x0)_0x47dad7+=_0x397368[_0x29dee8(0x2b6)]*_0x57aa44['last'];});let _0x4c0882=0x0;if(_0x5f426a[_0x5a4c3e(0x2c3)]!==0x0){let _0x526ad5=_0x5f426a[_0x5f426a[_0x5a4c3e(0x2c3)]-0x1];_0x4c0882=_0x526ad5[_0x5a4c3e(0x1d1)];}_0x47dad7-=_0x4c0882;_0x281453===_0x5a4c3e(0x1a7)&&(_0x30086a=(_0x2d671d-_0x47dad7)/startingBalances[_0x5a4c3e(0x26a)]*0x64,_0x2d671d=_0x2d671d-_0x47dad7);if(_0x281453==='net-fiat'){let _0x342c2d=_0x2f3d09===_0x5a4c3e(0x1e7)?startingBalances[_0x5a4c3e(0x1b2)]:startingBalances[_0x5a4c3e(0x24f)];if(_0xef4b1e===_0x5a4c3e(0x278)||_0xef4b1e==='ETH')_0x47dad7=_0x2f3d09===_0x5a4c3e(0x1e7)?_0x47dad7*_0x44ccd8[_0x5a4c3e(0x1b2)]:_0x47dad7*_0x44ccd8['usd'];else{if(usdBasecoins[_0x5a4c3e(0x2cc)](_0xef4b1e))_0x47dad7=_0x2f3d09==='EUR'?_0x47dad7*_0x44ccd8['eur']/_0x44ccd8[_0x5a4c3e(0x24f)]:_0x47dad7;else _0xef4b1e===_0x5a4c3e(0x1e7)&&(_0x47dad7=_0x2f3d09==='EUR'?_0x47dad7:_0x47dad7*_0x44ccd8[_0x5a4c3e(0x24f)]/_0x44ccd8[_0x5a4c3e(0x1b2)]);}_0x30086a=(_0x2d671d-_0x47dad7)/_0x342c2d*0x64,_0x2d671d=_0x2d671d-_0x47dad7;}if(_0x30086a){if(_0x30086a<0x64)_0x30086a=_0x30086a['toFixed'](0x2);else{if(_0x30086a<0x3e8)_0x30086a=_0x30086a[_0x5a4c3e(0x1b5)](0x1);else _0x30086a=_0x30086a['toFixed'](0x0);}}else _0x30086a=Number('0')[_0x5a4c3e(0x1b5)](0x2);if(_0x2d671d){if(Math['abs'](_0x2d671d)<0.000001)_0x2d671d=_0x2d671d['toFixed'](0x2);else{if(Math['abs'](_0x2d671d)<0.1)_0x2d671d=_0x2d671d[_0x5a4c3e(0x1b5)](0x6);else{if(Math[_0x5a4c3e(0x2d2)](_0x2d671d)<0x1)_0x2d671d=_0x2d671d[_0x5a4c3e(0x1b5)](0x5);else{if(Math['abs'](_0x2d671d)<0xa)_0x2d671d=_0x2d671d[_0x5a4c3e(0x1b5)](0x4);else{if(Math['abs'](_0x2d671d)<0x64)_0x2d671d=_0x2d671d['toFixed'](0x3);else{if(Math[_0x5a4c3e(0x2d2)](_0x2d671d)<0x3e8)_0x2d671d=_0x2d671d[_0x5a4c3e(0x1b5)](0x2);else _0x2d671d=_0x2d671d[_0x5a4c3e(0x1b5)](0x2);}}}}}}else _0x2d671d=Number('0')[_0x5a4c3e(0x1b5)](0x2);}else _0x30086a=Number('0')[_0x5a4c3e(0x1b5)](0x2);return{'value':_0x2d671d,'change':_0x30086a,'leftTxt':_0x4fcb9f,'rightTxt':_0x4d892c};}async function getStartingBalances(_0x545dda,_0x55d1fa=!![]){const _0x359ea8=_0x472155;if(_0x545dda['length']!==0x0){const [_0x37f80e,_0x4fa75f,_0x1484b8]=getPerf(_0x545dda[0x0],!![]);let _0x5df98c=[];config[_0x359ea8(0x18c)][_0x359ea8(0x1bb)](_0x3a615b=>{const _0x38cdd4=_0x359ea8;let _0xbfc5b3=0x0,_0x867982;config[_0x38cdd4(0x1c6)][_0x38cdd4(0x1bb)](_0x49653e=>{const _0x356022=_0x38cdd4;let _0x53d804=_0x49653e[_0x356022(0x222)][_0x356022(0x18a)](_0x2add3a=>_0x2add3a['coin']==_0x3a615b[_0x356022(0x228)]);if(_0x53d804){_0xbfc5b3+=_0x53d804[_0x356022(0x2b6)];if(!_0x867982)_0x867982=_0x53d804[_0x356022(0x27e)];}}),_0x5df98c[_0x38cdd4(0x268)]({'coin':_0x3a615b[_0x38cdd4(0x228)],'number':_0xbfc5b3,'initialprice':_0x867982});});const _0x4b63f6={'basecoin':_0x37f80e,'eur':_0x4fa75f,'usd':_0x1484b8,'coins':_0x5df98c};if(_0x55d1fa)proxyEmit(_0x359ea8(0x23c),_0x4b63f6);startingBalances=_0x4b63f6;}}function headlessMode(_0x3bf8fc){const _0x2eb400=_0x472155;let _0x2ae8cc=_0x3bf8fc['portfolio'],_0x22df9e=_0x3bf8fc[_0x2eb400(0x188)],_0x5d6282=[];for(let _0x1e613e of _0x2ae8cc){if(_0x1e613e['coin']!=config[_0x2eb400(0x26a)]){if(_0x1e613e[_0x2eb400(0x182)]>=_0x22df9e/0x64){if(_0x1e613e[_0x2eb400(0x2c2)])_0x5d6282[_0x2eb400(0x268)](_0x1e613e);}else{if(_0x1e613e[_0x2eb400(0x182)]<=-_0x22df9e/0x64){if(_0x1e613e[_0x2eb400(0x2c2)])_0x5d6282[_0x2eb400(0x268)](_0x1e613e);}}}}_0x5d6282['length']>0x0&&placeOrder(_0x5d6282);}function notifyBalance(_0x3be79b){const _0x5d14ac=_0x472155;let _0x412cda=_0x3be79b[_0x5d14ac(0x18c)],_0x15c1cf=_0x3be79b[_0x5d14ac(0x188)],_0x1016e2=[];for(let _0x4c3b4b of _0x412cda){if(_0x4c3b4b[_0x5d14ac(0x228)]!=config['basecoin']){if(_0x4c3b4b[_0x5d14ac(0x182)]>=_0x15c1cf/0x64){if(_0x4c3b4b[_0x5d14ac(0x2c2)])_0x1016e2[_0x5d14ac(0x268)](_0x4c3b4b);}else{if(_0x4c3b4b['delta']<=-_0x15c1cf/0x64){if(_0x4c3b4b[_0x5d14ac(0x2c2)])_0x1016e2[_0x5d14ac(0x268)](_0x4c3b4b);}}}}if(_0x1016e2[_0x5d14ac(0x2c3)]>0x0){let _0x2759a3=_0x1016e2[_0x5d14ac(0x234)](_0x4dd067=>_0x4dd067[_0x5d14ac(0x228)]);_0x2759a3[_0x5d14ac(0x248)]();let _0xd091d9=_0x2759a3[_0x5d14ac(0x283)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5d14ac(0x257),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xd091d9;}}function symbolToCoin(_0x14e8ab){const _0x42417d=_0x472155;let _0x44d59f;if(_0x14e8ab[_0x42417d(0x2cc)]('/'+config[_0x42417d(0x26a)]))_0x44d59f=_0x14e8ab[_0x42417d(0x1e0)]('/'+config[_0x42417d(0x26a)],'');if(_0x14e8ab['includes'](config['basecoin']+'/'))_0x44d59f=_0x14e8ab['replace'](config['basecoin']+'/','');return _0x44d59f;}async function unlockOrders(){const _0x4264f3=_0x472155;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4264f3(0x1d3)]){logger['debug'](_0x4264f3(0x28f)),lockOrders=ORDERS[_0x4264f3(0x167)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4622d8=await getCoins();[currentCoins,currentCoinsAll]=_0x4622d8,validateOrdersState=_0x4264f3(0x19a),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4264f3(0x22c)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x4450bc){const _0x421efe=_0x472155;if(_0x4450bc)validateOrdersState=_0x4450bc;logger[_0x421efe(0x22c)](_0x421efe(0x15d)+validateOrdersState+_0x421efe(0x1b4)+(lockOrders==0x1?_0x421efe(0x250):lockOrders==0x2?_0x421efe(0x1d0):_0x421efe(0x2aa)));let _0x1b030a=[],_0x4afcf4=config['ordertype']==_0x421efe(0x2bc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x421efe(0x22c)](_0x421efe(0x147)+validateOrdersState),lastOrders[_0x421efe(0x1bb)](_0x4248be=>{const _0x468b6e=_0x421efe;let _0x399041=![];_0x4248be[_0x468b6e(0x256)]>0x0&&(_0x399041=!![]),_0x1b030a[_0x468b6e(0x268)](_0x399041),_0x399041&&config[_0x468b6e(0x220)]!=_0x468b6e(0x2bc)&&logHistory(_0x468b6e(0x214),_0x468b6e(0x296)+_0x4248be[_0x468b6e(0x28b)]+'\x20'+_0x4248be[_0x468b6e(0x149)]+'\x20#'+formatResult(_0x4248be[_0x468b6e(0x256)],0x8)+'\x20@'+formatResult(_0x4248be[_0x468b6e(0x27e)],0x8));}),_0x1b030a[_0x421efe(0x1bb)]((_0x3e4b44,_0x2e449e)=>{const _0x47cb48=_0x421efe;if(_0x3e4b44)lastOrders[_0x47cb48(0x2b2)](_0x2e449e,0x1);}),persistOpenOrders(lastOrders);const _0x2c345e=coolingDown?_0x421efe(0x282):_0x421efe(0x18e);if(validateOrdersState==_0x421efe(0x19a)){validateOrdersState=_0x421efe(0x1fd);if(_0x1b030a['includes'](![])){if(config[_0x421efe(0x220)]==_0x421efe(0x2bc)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x421efe(0x1fd)){if(_0x1b030a[_0x421efe(0x2cc)](![])){}else{if(allOrdersPlaced){if(config[_0x421efe(0x220)]==_0x421efe(0x2bc)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x1b030a[_0x421efe(0x2cc)](![])&&(config['ordertype']==_0x421efe(0x2bc)?logHistory(_0x421efe(0x289),_0x421efe(0x273)+Math[_0x421efe(0x1a3)](_0x4afcf4*validateOrderInterval/0xea60)+_0x421efe(0x1e2)+_0x2c345e):(await cancelOrders(),logHistory(_0x421efe(0x289),_0x421efe(0x27f)+Math['round'](_0x4afcf4*validateOrderInterval/0xea60)+_0x421efe(0x1e2)+_0x2c345e))),await unlockOrders();else{if(validateOrdersState==_0x421efe(0x2d1)){if(config[_0x421efe(0x220)]!=_0x421efe(0x2bc))logHistory(_0x421efe(0x289),_0x421efe(0x26c)+_0x2c345e);await unlockOrders();}}}}}async function cancelOrders(){const _0x301ddd=_0x472155;lastOrders[_0x301ddd(0x1bb)](async _0x1ec43d=>{const _0x36366c=_0x301ddd;try{const _0x54f134=await exchange[_0x36366c(0x2af)](_0x1ec43d[_0x36366c(0x224)],_0x1ec43d[_0x36366c(0x28b)]);}catch(_0x3d0aa9){if(_0x3d0aa9[_0x36366c(0x1d6)]()[_0x36366c(0x2cc)](_0x36366c(0x1f5))){}else await handleError(_0x3d0aa9,_0x36366c(0x213));}});}async function initCoinResults(_0x27b390){const _0x2aa5b6=_0x472155;_0x27b390?logger[_0x2aa5b6(0x22c)](_0x2aa5b6(0x1a6)+_0x27b390):logger[_0x2aa5b6(0x22c)]('Initializing\x20coin\x20results'),config['portfolio'][_0x2aa5b6(0x1bb)](_0x1d959=>{const _0x198e60=_0x2aa5b6;if(!_0x1d959[_0x198e60(0x17e)]&&_0x1d959[_0x198e60(0x228)]!=config[_0x198e60(0x26a)]){const _0x59c3ce=currentCoins[_0x198e60(0x18a)](_0x302746=>_0x302746[_0x198e60(0x228)]==_0x1d959[_0x198e60(0x228)]),_0x306606=global[_0x198e60(0x21f)][noslash(_0x1d959['symbol'])];let _0x1559d8=_0x59c3ce?_0x59c3ce[_0x198e60(0x2b6)]:null,_0x388f05=_0x1d959[_0x198e60(0x1ac)]?0x1/_0x306606:_0x306606,_0x4c526d;config[_0x198e60(0x1c6)]['forEach'](_0x26158e=>{const _0x1dbabe=_0x198e60;!_0x4c526d&&(_0x4c526d=_0x26158e[_0x1dbabe(0x222)][_0x1dbabe(0x18a)](_0x5138e4=>_0x5138e4[_0x1dbabe(0x228)]==_0x1d959[_0x1dbabe(0x228)]),_0x4c526d&&(_0x1559d8=_0x4c526d[_0x1dbabe(0x2b6)],_0x388f05=_0x4c526d['price']));});let _0x4eb881=dbCoinResults[_0x198e60(0x157)](_0x198e60(0x25d))[_0x198e60(0x18a)]({'coin':_0x1d959[_0x198e60(0x228)]})['value']();if(!_0x4eb881){const _0x337c2a={'coin':_0x1d959[_0x198e60(0x228)],'number':_0x1559d8,'breakeven':_0x388f05,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x198e60(0x157)](_0x198e60(0x25d))[_0x198e60(0x268)](_0x337c2a)[_0x198e60(0x171)]();}else{if(_0x27b390&&_0x1d959['coin']==_0x27b390){const _0x487632={'coin':_0x1d959['coin'],'number':_0x1559d8,'breakeven':_0x388f05,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x198e60(0x25d))['find']({'coin':_0x1d959['coin']})['assign'](_0x487632)['write']();}}}});}async function updateCoinResults(_0x2e62d6,_0x372d0e=![]){const _0x58b89d=_0x472155;let _0x39570f,_0x571fe7,_0x4c23ff,_0x54dbba,_0x1cd15e,_0x272b3c,_0x432c06=dbCoinResults[_0x58b89d(0x157)]('coins')[_0x58b89d(0x18a)]({'coin':_0x2e62d6[_0x58b89d(0x228)]})[_0x58b89d(0x1aa)](),_0x3d5e4f=![];Object[_0x58b89d(0x28e)](_0x432c06)['forEach'](([_0x1988bf,_0x2da699])=>{if(_0x2da699==null)_0x3d5e4f=!![];});(!_0x432c06||_0x3d5e4f)&&(await initCoinResults(_0x2e62d6[_0x58b89d(0x228)]),_0x432c06=dbCoinResults[_0x58b89d(0x157)]('coins')[_0x58b89d(0x18a)]({'coin':_0x2e62d6[_0x58b89d(0x228)]})[_0x58b89d(0x1aa)]());_0x2e62d6[_0x58b89d(0x1ac)]&&(_0x272b3c={'filled':_0x2e62d6[_0x58b89d(0x256)]*_0x2e62d6[_0x58b89d(0x27e)],'amount':_0x2e62d6[_0x58b89d(0x256)]*_0x2e62d6[_0x58b89d(0x27e)],'side':_0x2e62d6['side']=='sell'?_0x58b89d(0x211):_0x58b89d(0x1bc),'price':0x1/_0x2e62d6[_0x58b89d(0x27e)]},_0x2e62d6={..._0x2e62d6,..._0x272b3c});_0x372d0e?_0x571fe7=_0x2e62d6['side']=='buy'?_0x432c06[_0x58b89d(0x2b6)]+_0x2e62d6[_0x58b89d(0x256)]:_0x432c06['number']-_0x2e62d6[_0x58b89d(0x256)]:_0x571fe7=await getCoinNumber(_0x2e62d6[_0x58b89d(0x228)]);if(_0x2e62d6[_0x58b89d(0x1c3)]&&_0x2e62d6[_0x58b89d(0x1c3)][_0x58b89d(0x172)]==config['basecoin'])_0x39570f=_0x2e62d6[_0x58b89d(0x1c3)][_0x58b89d(0x1cd)];else{if(_0x2e62d6[_0x58b89d(0x1c3)]&&_0x2e62d6[_0x58b89d(0x1c3)]['currency']=='BNB'&&!_0x372d0e)_0x39570f=_0x2e62d6['fee'][_0x58b89d(0x1cd)]*global[_0x58b89d(0x21f)][_0x58b89d(0x217)+config['basecoin']];else _0x39570f=defaultFee*_0x2e62d6['filled']*_0x2e62d6[_0x58b89d(0x27e)];}_0x2e62d6[_0x58b89d(0x149)]==_0x58b89d(0x211)?(_0x4c23ff=_0x571fe7!=0x0?(_0x432c06['breakeven']*_0x432c06['number']+_0x2e62d6['price']*(_0x571fe7-_0x432c06[_0x58b89d(0x2b6)])+_0x39570f)/_0x571fe7:0x0,_0x54dbba=_0x432c06[_0x58b89d(0x162)]):(_0x4c23ff=_0x571fe7!=0x0?(_0x432c06[_0x58b89d(0x26b)]*_0x432c06[_0x58b89d(0x2b6)]-_0x2e62d6[_0x58b89d(0x27e)]*(_0x432c06[_0x58b89d(0x2b6)]-_0x571fe7)+_0x39570f)/_0x571fe7:0x0,_0x54dbba=_0x432c06[_0x58b89d(0x162)]+(_0x2e62d6[_0x58b89d(0x27e)]-_0x432c06[_0x58b89d(0x26b)])*_0x2e62d6['filled']);_0x1cd15e=(_0x2e62d6[_0x58b89d(0x27e)]-_0x4c23ff-_0x39570f/_0x2e62d6[_0x58b89d(0x256)])*_0x571fe7;let _0x434273={'coin':_0x2e62d6['coin'],'number':_0x571fe7,'breakeven':formatResult(_0x4c23ff,0x8),'realized':formatResult(_0x54dbba,0x8),'unrealized':formatResult(_0x1cd15e,0x8),'fees':formatResult(_0x432c06[_0x58b89d(0x19e)]+_0x39570f,0x8),'sells':_0x2e62d6['side']==_0x58b89d(0x1bc)?_0x432c06[_0x58b89d(0x2ba)]+0x1:_0x432c06[_0x58b89d(0x2ba)],'buys':_0x2e62d6[_0x58b89d(0x149)]==_0x58b89d(0x211)?_0x432c06['buys']+0x1:_0x432c06[_0x58b89d(0x230)]};dbCoinResults['get']('coins')[_0x58b89d(0x18a)]({'coin':_0x2e62d6[_0x58b89d(0x228)]})[_0x58b89d(0x288)](_0x434273)[_0x58b89d(0x171)]();if(!_0x372d0e){if(_0x2e62d6[_0x58b89d(0x1c3)]&&_0x2e62d6[_0x58b89d(0x1c3)][_0x58b89d(0x172)]==_0x58b89d(0x217)){const _0x4da394=currentCoins[_0x58b89d(0x18a)](_0x57c648=>_0x57c648[_0x58b89d(0x228)]=='BNB');if(_0x4da394){let _0x35131a=dbCoinResults[_0x58b89d(0x157)](_0x58b89d(0x25d))['find']({'coin':_0x58b89d(0x217)})[_0x58b89d(0x1aa)]();_0x434273={..._0x35131a,'number':_0x4da394[_0x58b89d(0x2b6)]},dbCoinResults[_0x58b89d(0x157)]('coins')[_0x58b89d(0x18a)]({'coin':'BNB'})['assign'](_0x434273)['write']();}}}}async function placeOrder(_0x53027d){const _0x5bc1de=_0x472155,_0x453563=config['ordertype']==_0x5bc1de(0x2bc)?_0x5bc1de(0x2bc):_0x5bc1de(0x293);if(lockOrders==ORDERS[_0x5bc1de(0x204)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x5bc1de(0x1d3)],allOrdersPlaced=![],validateOrdersState=_0x5bc1de(0x19a);let _0xa0cbf0=![];lastOrders=[];for(const _0x140546 of _0x53027d){let _0x4c4efc,_0x1fb701,_0x27659f,_0x5f1963,_0x233bb7,_0x2910b3=_0x140546['symbol'];try{const _0x161e6a=await exchange['fetchTicker'](_0x2910b3);_0x4c4efc=_0x140546[_0x5bc1de(0x1ac)]?0x1/_0x140546[_0x5bc1de(0x270)]:_0x140546['last'],_0x1fb701=_0x161e6a[_0x5bc1de(0x227)],_0x27659f=_0x161e6a[_0x5bc1de(0x1c1)];_0x140546[_0x5bc1de(0x1ac)]?(_0x5f1963=_0x140546[_0x5bc1de(0x149)]=='buy'?'sell':'buy',_0x233bb7=Math[_0x5bc1de(0x2d2)](_0x140546[_0x5bc1de(0x202)])/_0x4c4efc):(_0x5f1963=_0x140546['side'],_0x233bb7=Math[_0x5bc1de(0x2d2)](_0x140546[_0x5bc1de(0x202)]));_0x453563==_0x5bc1de(0x293)&&(config[_0x5bc1de(0x220)]==_0x5bc1de(0x2a5)&&(_0x4c4efc=_0x5f1963=='buy'?_0x1fb701:_0x27659f),config[_0x5bc1de(0x220)]==_0x5bc1de(0x17d)&&(_0x4c4efc=_0x5f1963==_0x5bc1de(0x211)?_0x27659f:_0x1fb701));_0x233bb7=formatResult(_0x233bb7,0x8),_0x4c4efc=formatResult(_0x4c4efc,0x8);const _0x5ced76=_0x5f1963==_0x5bc1de(0x1bc)?config[_0x5bc1de(0x19b)]?String[_0x5bc1de(0x1c7)]('0x'+config[_0x5bc1de(0x19b)])+'\x20':'':config[_0x5bc1de(0x243)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x4a97e5=_0x453563==_0x5bc1de(0x2bc)?'Market':config[_0x5bc1de(0x220)]==_0x5bc1de(0x2a5)?_0x5bc1de(0x1b8):_0x5bc1de(0x209),_0x3e3a82=(Math[_0x5bc1de(0x26f)](Math[_0x5bc1de(0x2d0)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x3e3a82,'symbol':_0x2910b3,'coin':_0x140546['coin'],'amount':_0x233bb7,'price':_0x4c4efc,'side':_0x5f1963,'reverse':_0x140546[_0x5bc1de(0x1ac)],'filled':0x0});if(_0x453563==_0x5bc1de(0x2bc))logHistory(_0x5bc1de(0x214),''+_0x5ced76+_0x4a97e5+_0x5bc1de(0x14e)+_0x2910b3+'\x20'+_0x5f1963+'\x20#'+formatResult(_0x233bb7,0x8)+'\x20@'+formatResult(_0x4c4efc,0x8));else logHistory(_0x5bc1de(0x214),''+_0x5ced76+_0x4a97e5+_0x5bc1de(0x14e)+_0x2910b3+'\x20'+_0x5f1963+'\x20#'+formatResult(_0x233bb7,0x8)+'\x20@'+formatResult(_0x4c4efc,0x8));const _0x5d5653=await exchange[_0x5bc1de(0x2ac)](_0x2910b3,_0x453563,_0x5f1963,_0x233bb7,_0x4c4efc);logger['debug'](_0x5bc1de(0x22f)+_0x5d5653['id']+_0x5bc1de(0x23a)+_0x3e3a82);const _0x34f283=lastOrders['length']-0x1;if(_0x34f283>=0x0&&lastOrders[_0x34f283][_0x5bc1de(0x22d)]==_0x3e3a82){lastOrders[_0x34f283][_0x5bc1de(0x224)]=_0x5d5653['id'];if(_0x5d5653[_0x5bc1de(0x20c)])lastOrders[_0x34f283][_0x5bc1de(0x20c)]=_0x5d5653[_0x5bc1de(0x20c)];if(_0x5d5653[_0x5bc1de(0x27e)])lastOrders[_0x34f283]['price']=_0x5d5653[_0x5bc1de(0x27e)];lastOrders[_0x34f283][_0x5bc1de(0x1c3)]=_0x5d5653[_0x5bc1de(0x1c3)];}if(config[_0x5bc1de(0x1ea)]!=0x0){let _0x5bc7aa=null;if(cooldownTracker[_0x5bc1de(0x2c3)]==config[_0x5bc1de(0x1ea)]-0x1)_0x5bc7aa=cooldownTracker[_0x5bc1de(0x1cf)]();const _0x5e745c=getTimeStamp();cooldownTracker[_0x5bc1de(0x268)](_0x5e745c);if(_0x5bc7aa){const _0xfbe022=fns[_0x5bc1de(0x2a0)](new Date(_0x5e745c),new Date(_0x5bc7aa));if(_0xfbe022<cooldownInterval){logHistory(_0x5bc1de(0x2a7),'Executed\x20'+config[_0x5bc1de(0x1ea)]+_0x5bc1de(0x1ce)+cooldownInterval/0x3c+_0x5bc1de(0x284)+cooldownPeriod/(0xe10*0x3e8)+_0x5bc1de(0x197)),coolingDown=!![];break;}}}}catch(_0x385018){if(_0x385018[_0x5bc1de(0x1d6)]()[_0x5bc1de(0x2cc)](_0x5bc1de(0x160)))lastOrders=lastOrders[_0x5bc1de(0x16d)](_0x403ae9=>_0x403ae9['symbol']!=_0x2910b3),logHistory(_0x5bc1de(0x2a7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2910b3),_0xa0cbf0=!![];else{if(_0x385018[_0x5bc1de(0x1d6)]()[_0x5bc1de(0x2cc)](_0x5bc1de(0x1cb)))lastOrders=lastOrders[_0x5bc1de(0x16d)](_0x575986=>_0x575986[_0x5bc1de(0x28b)]!=_0x2910b3),logHistory(_0x5bc1de(0x2a7),_0x5bc1de(0x1c9)+_0x2910b3),_0xa0cbf0=!![];else{if(_0x385018[_0x5bc1de(0x1d6)]()[_0x5bc1de(0x2cc)](_0x5bc1de(0x1e8)))lastOrders=lastOrders[_0x5bc1de(0x16d)](_0x109ca2=>_0x109ca2[_0x5bc1de(0x28b)]!=_0x2910b3),logHistory(_0x5bc1de(0x2a7),'Order\x20is\x20invalid:\x20'+_0x2910b3),_0xa0cbf0=!![];else _0x385018['toString']()[_0x5bc1de(0x2cc)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x5bc1de(0x16d)](_0x3991ed=>_0x3991ed[_0x5bc1de(0x28b)]!=_0x2910b3),logHistory('error',_0x5bc1de(0x259)+_0x2910b3),_0xa0cbf0=!![]):(lastOrders=lastOrders['filter'](_0x159f32=>_0x159f32[_0x5bc1de(0x28b)]!=_0x2910b3),await handleError(_0x385018,_0x5bc1de(0x1f8),_0x2910b3));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x33a9da=config[_0x5bc1de(0x220)]==_0x5bc1de(0x2bc)?validateOrderTimeout*0x3c*0x3e8:config[_0x5bc1de(0x21e)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x177bb2=_0x5bc1de;validateOrders(_0x177bb2(0x190));},_0x33a9da);}else unlockOrders();_0xa0cbf0&&config[_0x5bc1de(0x187)]&&await pauseBot(_0x5bc1de(0x1f6)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5bc1de(0x289),_0x5bc1de(0x152)));}else{if(coolingDown)!config[_0x5bc1de(0x187)]&&logHistory(_0x5bc1de(0x2a7),_0x5bc1de(0x1c8));else lockOrders!=ORDERS[_0x5bc1de(0x204)]&&(!config[_0x5bc1de(0x187)]&&(config[_0x5bc1de(0x220)]==_0x5bc1de(0x2bc)?logHistory('error',_0x5bc1de(0x23f)):logHistory('error',_0x5bc1de(0x1df))));}}function persistOpenOrders(_0x245c72){const _0x5508d8=_0x472155,_0x459e8b={...config,'openOrders':_0x245c72};let _0x41b1d2=dbConfig['get'](_0x5508d8(0x1e3))[_0x5508d8(0x18a)]({'botID':botID})[_0x5508d8(0x1aa)]();_0x41b1d2&&dbConfig[_0x5508d8(0x157)](_0x5508d8(0x1e3))[_0x5508d8(0x18a)]({'botID':botID})[_0x5508d8(0x288)](_0x459e8b)[_0x5508d8(0x171)]();}function restoreOrders(){const _0x31ea8a=_0x472155;let _0x3335ea;config[_0x31ea8a(0x1f7)]&&allOpenOrders['forEach'](_0x3f5824=>{const _0x1127c3=_0x31ea8a,_0x2c72ae=config[_0x1127c3(0x1f7)][_0x1127c3(0x18a)](_0x575bb9=>_0x575bb9['orderId']==_0x3f5824['id']);_0x2c72ae&&(lastOrders[_0x1127c3(0x268)](_0x2c72ae),_0x3335ea=_0x3f5824[_0x1127c3(0x140)]);});if(lastOrders[_0x31ea8a(0x2c3)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x31ea8a(0x1fd),allOrdersPlaced=!![];const _0x144171=new Date()['getTime'](),_0x5a3192=config['ordertype']==_0x31ea8a(0x2bc)?validateOrderTimeout*0x3c*0x3e8:config[_0x31ea8a(0x21e)]*0x3c*0x3e8;if(_0x3335ea+_0x5a3192>_0x144171){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x37374e=_0x31ea8a;validateOrders(_0x37374e(0x190));},_0x3335ea+_0x5a3192-_0x144171);}else validateOrders(_0x31ea8a(0x190));}}async function sendMetricsTelegram(){const _0x34f1b6=_0x472155;if(!coinsLoaded){process[_0x34f1b6(0x2c7)]({'telegrammsg':_0x34f1b6(0x263)},_0x3b5b4b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1ff65a='';if(config[_0x34f1b6(0x2ca)])_0x1ff65a='<b>'+config[_0x34f1b6(0x166)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x1ff65a='<b>Bot\x20'+botID+_0x34f1b6(0x2b9);const _0x32abe3=getKPIs(_0x34f1b6(0x26a)),_0x15644b=getKPIs(_0x34f1b6(0x231),config[_0x34f1b6(0x231)]),_0x3af882=getKPIs('net-basecoin'),_0x106550=getKPIs('net-fiat',config[_0x34f1b6(0x231)]);_0x1ff65a+='<pre>',_0x1ff65a+=_0x32abe3[_0x34f1b6(0x1c4)]+_0x34f1b6(0x1b0)+_0x32abe3[_0x34f1b6(0x1aa)]+'\x0a',_0x1ff65a+=_0x32abe3[_0x34f1b6(0x18f)]+':\x20'+_0x32abe3[_0x34f1b6(0x236)]+'%\x0a',_0x1ff65a+=_0x15644b[_0x34f1b6(0x1c4)]+_0x34f1b6(0x1b0)+_0x15644b['value']+'\x0a',_0x1ff65a+=_0x15644b[_0x34f1b6(0x18f)]+':\x20'+_0x15644b['change']+'%\x0a',_0x1ff65a+=_0x3af882[_0x34f1b6(0x1c4)]+':\x20'+_0x3af882[_0x34f1b6(0x1aa)]+'\x20('+config[_0x34f1b6(0x26a)]+')\x0a',_0x1ff65a+=_0x3af882['rightTxt']+':\x20'+_0x3af882[_0x34f1b6(0x236)]+'%\x20('+config[_0x34f1b6(0x26a)]+')\x0a',_0x1ff65a+=_0x106550[_0x34f1b6(0x1c4)]+':\x20'+_0x106550[_0x34f1b6(0x1aa)]+'\x20('+config[_0x34f1b6(0x231)]+')\x0a',_0x1ff65a+=_0x106550[_0x34f1b6(0x18f)]+':\x20'+_0x106550[_0x34f1b6(0x236)]+'%\x20('+config[_0x34f1b6(0x231)]+')\x0a',_0x1ff65a+=_0x34f1b6(0x2c1),process[_0x34f1b6(0x2c7)]({'telegrammsg':_0x1ff65a},_0x985eec=>{});}async function sendPortfolioTelegram(){const _0x47e30f=_0x472155;if(!coinsLoaded){process[_0x47e30f(0x2c7)]({'telegrammsg':_0x47e30f(0x263)},_0x1a39fe=>{});return;}let _0x7286d7='';if(config[_0x47e30f(0x2ca)])_0x7286d7=_0x47e30f(0x1f1)+config[_0x47e30f(0x166)]+_0x47e30f(0x29d);else _0x7286d7=_0x47e30f(0x1ff)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x7286d7+=_0x47e30f(0x178),_0x7286d7+='-------------------------------\x0a',_0x7286d7+=_0x47e30f(0x29f),_0x7286d7+='-------------------------------\x0a',currentCoins[_0x47e30f(0x1bb)](_0x163a1d=>{const _0x26a823=_0x47e30f;_0x7286d7+=_0x163a1d[_0x26a823(0x228)][_0x26a823(0x145)](0x7)+'|\x20'+formatPad(_0x163a1d[_0x26a823(0x173)],0x2,0x6)+'|\x20'+formatPad(_0x163a1d[_0x26a823(0x15e)],0x2,0x6)+'|\x20'+formatPad(_0x163a1d[_0x26a823(0x182)]*0x64,0x2,0x6)+'\x0a';}),_0x7286d7+=_0x47e30f(0x2c1),process[_0x47e30f(0x2c7)]({'telegrammsg':_0x7286d7},_0x22b1ea=>{});}function formatPad(_0x3b95de,_0x5926f7,_0x2c6dbf){const _0x5858a9=_0x472155,_0x4705a9=formatResultString(_0x3b95de,_0x5926f7);return _0x4705a9?_0x4705a9[_0x5858a9(0x176)](_0x2c6dbf):''[_0x5858a9(0x176)](_0x2c6dbf);}function logHistory(_0x113d0c,_0x4d2ca5,_0xd8cb4a=''){const _0x32d809=_0x472155;let _0x201e33={'time':getTimeStamp(),'type':_0x113d0c,'event':_0x4d2ca5};dbLogs[_0x32d809(0x157)]('logs')[_0x32d809(0x268)](_0x201e33)['write']();if(_0xd8cb4a=='')_0xd8cb4a=_0x4d2ca5;proxyEmit(_0x32d809(0x1f3),{'log':_0x201e33,'summary':_0xd8cb4a}),process[_0x32d809(0x2c7)]({'telegram':{..._0x201e33,'botname':config['botname'],'showname':config[_0x32d809(0x2ca)]}},_0x8c73f4=>{}),logger[_0x32d809(0x1e1)](''+_0x201e33[_0x32d809(0x1f3)]);}function emitHistory(_0x28ef8c={}){const _0x35fbd4=_0x472155;Object[_0x35fbd4(0x2c9)](_0x28ef8c)[_0x35fbd4(0x2c3)]==0x0&&(_0x28ef8c={'type':[_0x35fbd4(0x214),_0x35fbd4(0x1f3)],'event':'','page':0x1});if(_0x28ef8c[_0x35fbd4(0x21d)][_0x35fbd4(0x2cc)](_0x35fbd4(0x1f3)))_0x28ef8c['type'][_0x35fbd4(0x2b2)](_0x28ef8c[_0x35fbd4(0x21d)][_0x35fbd4(0x25e)]('event'),0x1,'error',_0x35fbd4(0x257),_0x35fbd4(0x289));if(dbLogs[_0x35fbd4(0x1dd)](_0x35fbd4(0x233))[_0x35fbd4(0x1aa)]()){let _0x259a4a=dbLogs[_0x35fbd4(0x157)]('logs')['filter'](_0x4582bf=>{const _0x463d62=_0x35fbd4;if(_0x28ef8c[_0x463d62(0x21d)][_0x463d62(0x2c3)]==0x0)return![];else return _0x28ef8c[_0x463d62(0x21d)]['includes'](_0x4582bf[_0x463d62(0x21d)]);})[_0x35fbd4(0x16d)](_0x214247=>{const _0x1476b6=_0x35fbd4;if(_0x28ef8c[_0x1476b6(0x1f3)]=='')return!![];else return _0x214247[_0x1476b6(0x1f3)]['toLowerCase']()[_0x1476b6(0x2cc)](_0x28ef8c['event'][_0x1476b6(0x1af)]());})[_0x35fbd4(0x25a)](_0x35fbd4(0x2a2)),_0x36a90f=_0x259a4a[_0x35fbd4(0x1aa)]()[_0x35fbd4(0x2c3)];_0x259a4a=_0x259a4a[_0x35fbd4(0x1ac)]()['slice']((_0x28ef8c[_0x35fbd4(0x206)]-0x1)*logPageSize,_0x28ef8c[_0x35fbd4(0x206)]*logPageSize-0x1)['reverse']()[_0x35fbd4(0x1aa)](),proxyEmit(_0x35fbd4(0x193),{'logs':_0x259a4a,'total':_0x36a90f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3753af){const _0x5bffa3=_0x472155;if(dbLogs['has'](_0x5bffa3(0x233))[_0x5bffa3(0x1aa)]()){const _0x39388b=dbLogs[_0x5bffa3(0x157)]('logs')[_0x5bffa3(0x25a)](_0x5bffa3(0x2a2))[_0x5bffa3(0x16d)](_0x35794b=>{const _0x43c131=_0x5bffa3;return _0x35794b[_0x43c131(0x21d)]==_0x43c131(0x214);})[_0x5bffa3(0x1aa)]();dbLogs['get'](_0x5bffa3(0x233))[_0x5bffa3(0x191)]()[_0x5bffa3(0x171)](),dbLogs[_0x5bffa3(0x157)]('logs')['assign'](_0x39388b)['write'](),emitHistory(_0x3753af);}}async function pauseBot(_0x386976=''){const _0x3a037b=_0x472155,_0x1e655d=new Date()[_0x3a037b(0x168)]();if(!lastErrorShown||_0x1e655d-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1e655d;!lastBotPause?(lastBotPause=_0x1e655d,consecutivePauses=0x1):(_0x1e655d-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3a037b(0x2c7)]({'stop':_0x3a037b(0x286)},_0x5d9066=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3a037b(0x168)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x386976)_0x386976+=_0x3a037b(0x225);logHistory(_0x3a037b(0x2a7),_0x386976+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x3a037b(0x240)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x50f301=_0x472155;process[_0x50f301(0x2c7)]({'stop':_0x50f301(0x165)},_0x3598a2=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3d0e97,_0x590682){const _0x30c609=_0x472155;if(_0x3d0e97[_0x30c609(0x1d6)]()[_0x30c609(0x2cc)]('API-key\x20format\x20invalid'))return logHistory(_0x30c609(0x2a7),config[_0x30c609(0x24a)]+_0x30c609(0x1d8)),![];else{if(_0x3d0e97['toString']()['includes'](_0x30c609(0x184)))return logHistory(_0x30c609(0x2a7),config[_0x30c609(0x24a)]+_0x30c609(0x21b)),![];else{if(_0x3d0e97['toString']()[_0x30c609(0x2cc)](_0x30c609(0x1a0)))return logHistory(_0x30c609(0x2a7),config['exchange']+_0x30c609(0x179)),logHistory(_0x30c609(0x2a7),_0x30c609(0x1f0)),![];else await handleError(_0x3d0e97,_0x590682);}}}async function handleError(_0x29a718,_0x4a6bc3,_0x1804f9=''){const _0x37ffba=_0x472155,_0x1c9ada=config[_0x37ffba(0x24a)]||_0x37ffba(0x285);if(_0x29a718['toString']()[_0x37ffba(0x2cc)](_0x37ffba(0x20e)))await pauseBot(config[_0x37ffba(0x24a)]+_0x37ffba(0x27d));else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x290)))await pauseBot(config['exchange']+_0x37ffba(0x192));else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x2c8)))await pauseBot(config[_0x37ffba(0x24a)]+_0x37ffba(0x2a3));else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x275)))await pauseBot(config[_0x37ffba(0x24a)]+_0x37ffba(0x29b));else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x238)))logger['debug'](_0x37ffba(0x20f),_0x29a718),await pauseBot(config['exchange']+_0x37ffba(0x2b5));else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x37ffba(0x2a7),_0x4a6bc3+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x37ffba(0x2a7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x249)))logHistory(_0x37ffba(0x2a7),_0x4a6bc3+_0x37ffba(0x208)),logHistory(_0x37ffba(0x2a7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x29a718['toString']()[_0x37ffba(0x2cc)](_0x37ffba(0x272)))logHistory(_0x37ffba(0x2a7),_0x4a6bc3+_0x37ffba(0x225)+config[_0x37ffba(0x24a)]+_0x37ffba(0x271)),logHistory(_0x37ffba(0x2a7),_0x37ffba(0x2b3)),await killBot();else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x184)))logHistory('error',_0x4a6bc3+_0x37ffba(0x225)+config[_0x37ffba(0x24a)]+_0x37ffba(0x2a6)),logHistory('error',_0x37ffba(0x2b3)),await killBot();else{if(_0x29a718[_0x37ffba(0x1d6)]()[_0x37ffba(0x2cc)](_0x37ffba(0x1a0)))logHistory(_0x37ffba(0x2a7),_0x4a6bc3+_0x37ffba(0x225)+config[_0x37ffba(0x24a)]+_0x37ffba(0x281)),logHistory(_0x37ffba(0x2a7),_0x37ffba(0x2b3)),await killBot();else _0x29a718['toString']()[_0x37ffba(0x2cc)](_0x37ffba(0x241))?logHistory(_0x37ffba(0x2a7),_0x4a6bc3+_0x37ffba(0x246)+_0x1804f9):(logger[_0x37ffba(0x1e1)](_0x4a6bc3+_0x37ffba(0x258),_0x29a718),await pauseBot(_0x37ffba(0x161)));}}}}}}}}}}function formatResult(_0x52be0c,_0xf468a){const _0x1608b8=_0x472155;return parseFloat(_0x52be0c[_0x1608b8(0x1b5)](_0xf468a));}function formatResultTruncate(_0x4016e5,_0x30f946){let _0x361697=formatResultString(_0x4016e5,0xa),_0x477929=_0x361697['indexOf']('.');return _0x477929!=-0x1&&(_0x361697=_0x361697['slice'](0x0,_0x477929+_0x30f946+0x1)),Number(_0x361697);}function formatResultString(_0x1282c6,_0x47ed17){const _0x4a03fe=_0x472155;let _0x355168;if(!(''+_0x1282c6)[_0x4a03fe(0x2cc)]('e'))_0x355168=+(Math[_0x4a03fe(0x1a3)](_0x1282c6+'e+'+_0x47ed17)+'e-'+_0x47ed17);else{let _0x55e1fb=(''+_0x1282c6)['split']('e'),_0x4a3aac='';+_0x55e1fb[0x1]+_0x47ed17>0x0&&(_0x4a3aac='+'),_0x355168=+(Math['round'](+_0x55e1fb[0x0]+'e'+_0x4a3aac+(+_0x55e1fb[0x1]+_0x47ed17))+'e-'+_0x47ed17);}return Number(_0x355168)[_0x4a03fe(0x1b5)](_0x47ed17);}function getServerTime(){const _0x5952e8=_0x472155,_0x1ec07a=new Date();return _0x1ec07a[_0x5952e8(0x29e)]()+'/'+(_0x1ec07a[_0x5952e8(0x1d9)]()+0x1)[_0x5952e8(0x1d6)]()[_0x5952e8(0x176)](0x2,'0')+'/'+_0x1ec07a[_0x5952e8(0x287)]()[_0x5952e8(0x1d6)]()[_0x5952e8(0x176)](0x2,'0')+'\x20'+_0x1ec07a['getHours']()[_0x5952e8(0x1d6)]()[_0x5952e8(0x176)](0x2,'0')+':'+_0x1ec07a[_0x5952e8(0x203)]()['toString']()['padStart'](0x2,'0')+':'+_0x1ec07a[_0x5952e8(0x17f)]()[_0x5952e8(0x1d6)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3fe368=_0x472155,_0x2d708c=shiftedTime();return _0x2d708c[_0x3fe368(0x29e)]()+'/'+(_0x2d708c[_0x3fe368(0x1d9)]()+0x1)[_0x3fe368(0x1d6)]()['padStart'](0x2,'0')+'/'+_0x2d708c[_0x3fe368(0x287)]()['toString']()[_0x3fe368(0x176)](0x2,'0')+'\x20'+_0x2d708c['getHours']()[_0x3fe368(0x1d6)]()[_0x3fe368(0x176)](0x2,'0')+':'+_0x2d708c[_0x3fe368(0x203)]()[_0x3fe368(0x1d6)]()[_0x3fe368(0x176)](0x2,'0')+':'+_0x2d708c[_0x3fe368(0x17f)]()[_0x3fe368(0x1d6)]()[_0x3fe368(0x176)](0x2,'0');}function getDate(){const _0x5635cc=_0x472155,_0x518aca=shiftedTime();return _0x518aca['getFullYear']()+'/'+(_0x518aca['getMonth']()+0x1)[_0x5635cc(0x1d6)]()['padStart'](0x2,'0')+'/'+_0x518aca[_0x5635cc(0x287)]()['toString']()[_0x5635cc(0x176)](0x2,'0');}function getHour(){const _0x14b161=_0x472155,_0x668909=shiftedTime();return _0x668909['getHours']()[_0x14b161(0x1d6)]()[_0x14b161(0x176)](0x2,'0');}function sleep(_0x3e01c0){return new Promise(_0x20b63f=>setTimeout(_0x20b63f,_0x3e01c0));}function shiftedTime(){const _0x3305e7=_0x472155,_0x4ed0df=new Date();let _0x37bc09=_0x4ed0df;if(config&&config[_0x3305e7(0x276)]!==0x0)_0x37bc09=fns['add'](_0x4ed0df,{'hours':config[_0x3305e7(0x276)]});return _0x37bc09;}function timer(_0x120e80){const _0x1f4f4a=_0x472155,_0x2c0ab1=new Date();!lasttime?console['log'](getTimeStamp()+_0x1f4f4a(0x1ef),_0x120e80,_0x2c0ab1):console[_0x1f4f4a(0x158)](getTimeStamp()+':\x20timer\x20>',_0x120e80,(_0x2c0ab1-lasttime)/0x3e8),lasttime=_0x2c0ab1;}