const _0xb6fc61=_0xaae9;(function(_0x2063c8,_0x4cdf3d){const _0x17ea3f=_0xaae9,_0x529b25=_0x2063c8();while(!![]){try{const _0x20126a=parseInt(_0x17ea3f(0x16b))/0x1+parseInt(_0x17ea3f(0x1d9))/0x2*(parseInt(_0x17ea3f(0x17b))/0x3)+parseInt(_0x17ea3f(0x19c))/0x4*(-parseInt(_0x17ea3f(0x1f2))/0x5)+-parseInt(_0x17ea3f(0x9a))/0x6*(-parseInt(_0x17ea3f(0x93))/0x7)+-parseInt(_0x17ea3f(0xc1))/0x8+-parseInt(_0x17ea3f(0x10b))/0x9+parseInt(_0x17ea3f(0x209))/0xa*(parseInt(_0x17ea3f(0x1df))/0xb);if(_0x20126a===_0x4cdf3d)break;else _0x529b25['push'](_0x529b25['shift']());}catch(_0x4108b0){_0x529b25['push'](_0x529b25['shift']());}}}(_0x49c2,0x892e0));const _0x266156=function(){let _0x132854=!![];return function(_0x972712,_0x5e86d8){const _0x246687=_0x132854?function(){if(_0x5e86d8){const _0x179cfc=_0x5e86d8['apply'](_0x972712,arguments);return _0x5e86d8=null,_0x179cfc;}}:function(){};return _0x132854=![],_0x246687;};}(),_0x464269=_0x266156(this,function(){const _0x350c42=_0xaae9;return _0x464269[_0x350c42(0xd6)]()[_0x350c42(0x1ff)](_0x350c42(0xee))[_0x350c42(0xd6)]()[_0x350c42(0xbd)](_0x464269)[_0x350c42(0x1ff)](_0x350c42(0xee));});_0x464269();'use strict';const ccxt=require(_0xb6fc61(0x162)),low=require('lowdb'),FileSync=require(_0xb6fc61(0x1d2)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0xb6fc61(0xb1))['Crypt'],util=require(_0xb6fc61(0x1be)),argv=require(_0xb6fc61(0x113))(process['argv'][_0xb6fc61(0xb0)](0x2))[_0xb6fc61(0x7b)],path=require(_0xb6fc61(0x204));let exchange;global[_0xb6fc61(0x201)]={},global[_0xb6fc61(0x15c)]={};const usdBasecoins=['USD',_0xb6fc61(0x10d),_0xb6fc61(0x1da),_0xb6fc61(0x1d4),_0xb6fc61(0x1b7),_0xb6fc61(0x194)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xb6fc61(0xb2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xb6fc61(0xfc)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0xb6fc61(0xda),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xb6fc61(0xd2))[_0xb6fc61(0x83)],botID=process[_0xb6fc61(0x7b)][0x2]||_0xb6fc61(0xf3),pattern=/^[0-9]{3}$/;!pattern[_0xb6fc61(0xe9)](botID)&&(console[_0xb6fc61(0x107)](_0xb6fc61(0x98)+botID+_0xb6fc61(0xbe)),killBot());const userID=process[_0xb6fc61(0x7b)][0x3]||'',configpath=userID?_0xb6fc61(0x219)+userID+'/':_0xb6fc61(0x219),logspath=userID?_0xb6fc61(0x120)+userID+'/':_0xb6fc61(0x120),loggerfile=fs[_0xb6fc61(0x1fc)](logspath+_0xb6fc61(0x139),{'flags':'a'});!fs[_0xb6fc61(0x102)](configpath)&&fs['mkdirSync'](configpath);!fs[_0xb6fc61(0x102)](logspath)&&fs[_0xb6fc61(0x16a)](logspath);const configfile=configpath+'bot-'+botID+_0xb6fc61(0xf0),logfile=configpath+_0xb6fc61(0x18e)+botID+_0xb6fc61(0x10e),performancefile=configpath+_0xb6fc61(0x18e)+botID+_0xb6fc61(0x106),coinresultsfile=configpath+'bot-'+botID+_0xb6fc61(0xa2),settingsfile=configpath+_0xb6fc61(0x1c6),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0xb6fc61(0x7f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xb6fc61(0x20b)]({'logs':[],'version':serverversion})[_0xb6fc61(0xc4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xb6fc61(0x20b)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0xb6fc61(0xc4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xb6fc61(0x140),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xc529ed=>{const _0x52aab0=_0xb6fc61;console[_0x52aab0(0x107)](_0xc529ed);},'simple':_0x4b5727=>{const _0x54ea44=_0xb6fc61;console[_0x54ea44(0x107)](_0x4b5727),loggerfile['write'](util['format'](_0x4b5727)+'\x0a');},'full':async(_0x366745,_0x330658='')=>{const _0x32eccf=_0xb6fc61;let _0x2001b4;if(config[_0x32eccf(0x1d0)])_0x2001b4=getTimeStamp()+':\x20'+config[_0x32eccf(0x1a0)]+_0x32eccf(0xb7)+_0x366745;else _0x2001b4=getTimeStamp()+_0x32eccf(0x20e)+botID+_0x32eccf(0xb7)+_0x366745;console[_0x32eccf(0x107)](_0x2001b4),loggerfile[_0x32eccf(0xc4)](util[_0x32eccf(0x128)](_0x2001b4)+'\x0a'),_0x330658&&(console[_0x32eccf(0x107)](_0x330658),loggerfile[_0x32eccf(0xc4)](util['format'](_0x330658)+'\x0a'));},'debug':async(_0x434ae1,_0x4fff2c='')=>{const _0x328f2b=_0xb6fc61;let _0x2853fe;if(config[_0x328f2b(0x1d0)])_0x2853fe=getTimeStamp()+':\x20'+config[_0x328f2b(0x1a0)]+'\x20>\x20[DEBUG]\x20'+_0x434ae1;else _0x2853fe=getTimeStamp()+':\x20Bot\x20'+botID+_0x328f2b(0xaa)+_0x434ae1;if(debugging)console[_0x328f2b(0x107)](_0x2853fe);loggerfile[_0x328f2b(0xc4)](util[_0x328f2b(0x128)](_0x2853fe)+'\x0a');if(_0x4fff2c){if(debugging)console[_0x328f2b(0x107)](_0x4fff2c);loggerfile[_0x328f2b(0xc4)](util[_0x328f2b(0x128)](_0x4fff2c)+'\x0a');}}};process['on']('uncaughtException',function(_0x4c02e5){const _0x3f031c=_0xb6fc61;handleError(_0x4c02e5,_0x3f031c(0xbc));});settings[_0xb6fc61(0x1d7)]!=config[_0xb6fc61(0x1d7)]&&updateTimeshift(settings['timeshift']);settings[_0xb6fc61(0x206)]!=config[_0xb6fc61(0x206)]&&updateOnepagemode(settings['onepagemode']);process[_0xb6fc61(0xed)]({'started':'running'},_0x10c0e5=>{}),initializeProcessListeners();function proxyEmit(_0x360b45,_0x39efc5=null){process['send']({'function':_0x360b45,'args':_0x39efc5},_0x40529b=>{});}function initializeProcessListeners(){const _0x436fe5=_0xb6fc61;process['on'](_0x436fe5(0x14a),_0xce8dfc=>{const _0x4e4160=_0x436fe5;switch(Object['keys'](_0xce8dfc)[0x0]){case _0x4e4160(0x1d7):_0xce8dfc['timeshift']!=undefined&&(settings[_0x4e4160(0x1d7)]=_0xce8dfc[_0x4e4160(0x1d7)],updateTimeshift(settings[_0x4e4160(0x1d7)]));break;case'onepagemode':_0xce8dfc[_0x4e4160(0x206)]!=undefined&&(settings[_0x4e4160(0x206)]=_0xce8dfc[_0x4e4160(0x206)],updateOnepagemode(settings[_0x4e4160(0x206)]));break;case _0x4e4160(0xec):_0xce8dfc[_0x4e4160(0xec)]!=undefined&&(bots=JSON['parse'](_0xce8dfc[_0x4e4160(0xec)]),proxyEmit('bots',bots));break;case _0x4e4160(0xb9):switch(_0xce8dfc[_0x4e4160(0xb9)]){case _0x4e4160(0x14d):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x4e4160(0x17d):emitHistory(_0xce8dfc[_0x4e4160(0x1c4)]);break;case _0x4e4160(0xb6):deleteHistoryAlerts(_0xce8dfc[_0x4e4160(0x1c4)]);break;case _0x4e4160(0x101):getPortfolio(_0xce8dfc[_0x4e4160(0x1c4)]);break;case _0x4e4160(0x110):storeConfiguration(_0xce8dfc[_0x4e4160(0x1c4)]);break;case _0x4e4160(0xa5):storeHeadless(_0xce8dfc['args']);break;case _0x4e4160(0x9c):storeFiat(_0xce8dfc['args']);break;case _0x4e4160(0xb5):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xce8dfc[_0x4e4160(0x1c4)]);break;case _0x4e4160(0x1b9):cancelLoading();break;case _0x4e4160(0x21f):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4e4160(0x15e):sendPortfolioTelegram();break;}}});}function _0xaae9(_0x4611b2,_0x1a4b74){const _0x1a2a67=_0x49c2();return _0xaae9=function(_0x464269,_0x266156){_0x464269=_0x464269-0x7b;let _0x49c233=_0x1a2a67[_0x464269];return _0x49c233;},_0xaae9(_0x4611b2,_0x1a4b74);}reset(!![]);async function reset(_0x530b12=![]){const _0x5a5180=_0xb6fc61;logger[_0x5a5180(0x108)]('Reset\x20|\x20'+(_0x530b12?_0x5a5180(0x13d):'exchange\x20not\x20reloaded')+_0x5a5180(0xf1)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x530b12)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5a5180(0x141)]!=''&&config[_0x5a5180(0x141)]!=_0x5a5180(0x210)){loadingProgress=0x0;if(_0x530b12){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4161ec){handleErrorNoStop(_0x4161ec,_0x5a5180(0x192));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x508049=await getCoins();[currentCoins,currentCoinsAll]=_0x508049,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x5a5180(0x185)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5a5180(0xdd)]==0x0&&allOpenOrders[_0x5a5180(0xdd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2a7088=_0xb6fc61;exchangeStopped=!![];try{await exchange['close']();}catch(_0x1ab857){await handleError(_0x1ab857,_0x2a7088(0x145));}}async function reloadExchange(){const _0x5663a0=_0xb6fc61;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5663a0(0x108)](_0x5663a0(0x20c)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x2c7b32=config[_0xb6fc61(0xca)],_0x2b64be=config[_0xb6fc61(0x141)],_0x5bdb05=config['apiSecret'],_0x515e31=config[_0xb6fc61(0x1c5)]){const _0x36f3ba=_0xb6fc61;exchange&&await stopExchange();!supportedExchanges()[_0x36f3ba(0x11b)](_0x2c7b32)&&(logHistory(_0x36f3ba(0x1d6),_0x36f3ba(0x1a3)+_0x2c7b32+_0x36f3ba(0x1ea)),killBot());const _0x452a0f=ccxt[_0x36f3ba(0xfb)][_0x2c7b32['toLowerCase']()];exchange=new _0x452a0f({'apiKey':_0x2b64be,'secret':_0x5bdb05,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x36f3ba(0x8a)}});if(_0x515e31)exchange['password']=_0x515e31;}function setStableCoins(){const _0x519c7a=_0xb6fc61;let _0x30b4ea=config[_0x519c7a(0x1b8)]==_0x519c7a(0x9f)?_0x519c7a(0x9f):config['basecoin']=='PAXG'?_0x519c7a(0x12f):_0x519c7a(0x1fe),_0x298eab=!allSymbols[_0x519c7a(0x11b)](_0x30b4ea+_0x519c7a(0x138))?_0x519c7a(0x1d4):_0x519c7a(0x198),_0x1cdb30=!allSymbols[_0x519c7a(0x11b)](_0x30b4ea+_0x519c7a(0x154))?_0x298eab:_0x519c7a(0xf6);stablecoins={'eur':{'coin':''+_0x30b4ea+_0x1cdb30,'symbol':_0x30b4ea+'/'+_0x1cdb30},'usd':{'coin':''+_0x30b4ea+_0x298eab,'symbol':_0x30b4ea+'/'+_0x298eab}};}async function initwsCcxt(){const _0x175726=_0xb6fc61;initCycle++;const _0x181618=initCycle;let _0x32bef3=[];config['portfolio'][_0x175726(0x1cd)](_0x2a8dda=>{const _0x46ac84=_0x175726;if(!_0x2a8dda[_0x46ac84(0x12b)]&&_0x2a8dda[_0x46ac84(0x18a)]!=config[_0x46ac84(0x1b8)])_0x32bef3[_0x46ac84(0x117)](_0x2a8dda['symbol']);});if(!_0x32bef3[_0x175726(0x11b)](stablecoins[_0x175726(0x85)]['symbol']))_0x32bef3[_0x175726(0x117)](stablecoins[_0x175726(0x85)][_0x175726(0x1a6)]);if(!_0x32bef3['includes'](stablecoins['usd'][_0x175726(0x1a6)]))_0x32bef3['push'](stablecoins[_0x175726(0x10f)][_0x175726(0x1a6)]);if(config['exchange'][_0x175726(0x13b)]('Binance')&&config['basecoin']!='PAXG'){if(!_0x32bef3[_0x175726(0x11b)](_0x175726(0xe5)+config[_0x175726(0x1b8)]))_0x32bef3[_0x175726(0x117)](_0x175726(0xe5)+config[_0x175726(0x1b8)]);}loadCoins(_0x32bef3),_0x32bef3=validateSymbols(_0x32bef3);const _0x4db90c=async _0x426471=>{const _0x102ea9=_0x175726;let _0x3c6a81;try{const _0xce3289=await getTickers(_0x426471);Object['entries'](_0xce3289)[_0x102ea9(0x1cd)](_0x21cdfd=>{const _0x58e180=_0x102ea9;_0x3c6a81=_0x21cdfd[0x1][_0x58e180(0x1a6)],global[_0x58e180(0x201)][noslash(_0x3c6a81)]=_0x21cdfd[0x1][_0x58e180(0xd9)],global[_0x58e180(0x15c)][_0x3c6a81]=_0x21cdfd[0x1][_0x58e180(0x205)];});}catch(_0x4a17dd){await handleError(_0x4a17dd,_0x102ea9(0x14e),_0x3c6a81);}},_0x5a9d6a=async _0x39d6e8=>{const _0x2870b7=_0x175726;while(initCycle==_0x181618){if(!botPaused)try{const _0x2f6744=await exchange[_0x2870b7(0x136)](_0x39d6e8);global[_0x2870b7(0x201)][noslash(_0x2f6744[0x0]['symbol'])]=_0x2f6744[0x0][_0x2870b7(0x148)],await sleep(0x3e8);}catch(_0x256902){if(!exchangeStopped)await handleError(_0x256902,_0x2870b7(0xa9),_0x39d6e8);}else await sleep(0x64);}},_0x58f2cc=async _0x3853bc=>{const _0x24230d=_0x175726;while(initCycle==_0x181618){if(!botPaused){let _0x34e357;try{await sleep(0x3c*0x3e8);const _0x26de6d=await getTickers(_0x3853bc);Object[_0x24230d(0xe4)](_0x26de6d)['forEach'](_0x376301=>{const _0x556092=_0x24230d;_0x34e357=_0x376301[0x1][_0x556092(0x1a6)],global[_0x556092(0x15c)][_0x34e357]=_0x376301[0x1]['percentage'];});}catch(_0x6cd137){if(!exchangeStopped)await handleError(_0x6cd137,'fetchTickers()',_0x34e357);}}else await sleep(0x64);}},_0x178219=async _0x5de88b=>{const _0x2e46b0=_0x175726;while(initCycle==_0x181618){if(!botPaused)try{const _0x326fd6=await exchange['watchOrders'](_0x5de88b);initCycle==_0x181618&&_0x326fd6[_0x2e46b0(0x1cd)](_0x2a8d0a=>{updateNumberCoinsCcxt(_0x2a8d0a);});}catch(_0x5ed9b4){if(!exchangeStopped)await handleError(_0x5ed9b4,_0x2e46b0(0x1a8));}else await sleep(0x64);}};_0x4db90c(_0x32bef3),_0x58f2cc(_0x32bef3),_0x32bef3[_0x175726(0x1cd)](_0x47ac2a=>{_0x5a9d6a(_0x47ac2a),_0x178219(_0x47ac2a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1eeb06){const _0x46248e=_0xb6fc61;let _0x45c323={};try{if(config[_0x46248e(0xca)]!=_0x46248e(0xfe))_0x45c323=await exchange[_0x46248e(0x18d)](_0x1eeb06);else for(const _0x21c186 of _0x1eeb06){const _0x30c2e4=await exchange[_0x46248e(0x169)](_0x21c186);_0x45c323[_0x21c186]=_0x30c2e4;}return _0x45c323;}catch(_0x5a0d37){throw _0x5a0d37;}}async function watchTransactions(){const _0x94fb62=_0xb6fc61;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3b3944=await getCoins(),[_0x262510,_0x1fe215]=_0x3b3944;let _0xbdd570=[];currentCoins[_0x94fb62(0x1cd)](_0x4fe5e8=>{const _0x35b130=_0x94fb62,_0x3e4344=_0x262510[_0x35b130(0x170)](_0x394a08=>_0x394a08['coin']==_0x4fe5e8['coin']);if(_0x3e4344){if(_0x4fe5e8[_0x35b130(0xdf)]!=_0x3e4344[_0x35b130(0xdf)]){let _0xa7b1f0;if(_0x4fe5e8[_0x35b130(0x18a)]!=config[_0x35b130(0x1b8)]){const _0x993f4b=global[_0x35b130(0x201)][noslash(_0x4fe5e8[_0x35b130(0x1a6)])];_0xa7b1f0=_0x4fe5e8[_0x35b130(0x184)]?0x1/_0x993f4b:_0x993f4b;}else _0xa7b1f0=0x1;_0xbdd570[_0x35b130(0x117)]({'coin':_0x4fe5e8['coin'],'symbol':_0x4fe5e8[_0x35b130(0x1a6)],'price':_0xa7b1f0,'number':Number(formatResult(_0x3e4344[_0x35b130(0xdf)]-_0x4fe5e8[_0x35b130(0xdf)],0x8)),'basecoinvalue':_0xa7b1f0*(_0x3e4344[_0x35b130(0xdf)]-_0x4fe5e8['number'])});}}});if(_0xbdd570[_0x94fb62(0xdd)]==0x1&&!blockTransactionDetection){if(config[_0x94fb62(0x13f)]){logger['debug'](_0x94fb62(0x8f)+_0xbdd570[0x0]['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x94fb62(0x171)]==0x0||Math[_0x94fb62(0x146)](_0xbdd570[0x0][_0x94fb62(0x1dd)])>lastFees[_0x94fb62(0x171)]){delete _0xbdd570[0x0][_0x94fb62(0x1a6)],delete _0xbdd570[0x0][_0x94fb62(0x1dd)];let _0x387d5f=[],_0x5de8f9=[...config[_0x94fb62(0x1ca)]]||[],_0x49dcd7=config[_0x94fb62(0x1ca)];_0x5de8f9['sort']((_0x4ed07d,_0x4c2c8f)=>_0x4ed07d[_0x94fb62(0x103)]>_0x4c2c8f[_0x94fb62(0x103)]?-0x1:_0x4c2c8f[_0x94fb62(0x103)]>_0x4ed07d['date']?0x1:0x0);const _0x8b192b=getDate();if(_0x5de8f9[0x0]){const _0xb36b75=fns[_0x94fb62(0xe0)](_0x5de8f9[0x0][_0x94fb62(0x103)],_0x94fb62(0x1f0),new Date()),_0x4620d0=fns[_0x94fb62(0xe0)](_0x8b192b,_0x94fb62(0x1f0),new Date());if(fns[_0x94fb62(0x187)](_0xb36b75,_0x4620d0)){_0x387d5f=_0x5de8f9[0x0][_0x94fb62(0x19b)];const _0x5a1c5=_0x387d5f[_0x94fb62(0x170)](_0x473349=>_0x473349[_0x94fb62(0x18a)]==_0xbdd570[0x0][_0x94fb62(0x18a)]);_0x5a1c5?(_0x5a1c5[_0x94fb62(0xdf)]+=_0xbdd570[0x0]['number'],_0x5a1c5[_0x94fb62(0xdf)]==0x0&&(_0x387d5f=_0x387d5f[_0x94fb62(0x144)](_0x4b300c=>{const _0x245720=_0x94fb62;return _0x4b300c[_0x245720(0x18a)]!=_0xbdd570[0x0][_0x245720(0x18a)];}))):_0x387d5f[_0x94fb62(0x117)](_0xbdd570[0x0]);const _0x5e2050=_0x49dcd7['find'](_0x24c220=>_0x24c220[_0x94fb62(0x103)]==_0x8b192b);_0x5e2050[_0x94fb62(0x19b)]=_0x387d5f;}else _0x49dcd7[_0x94fb62(0x117)]({'date':_0x8b192b,'changes':[_0xbdd570[0x0]]});}const _0x2afe5c=_0x49dcd7[_0x94fb62(0x170)](_0x57a87f=>_0x57a87f[_0x94fb62(0x103)]==_0x8b192b);if(_0x2afe5c){let _0x4e36b4=!![];_0x2afe5c[_0x94fb62(0x19b)][_0x94fb62(0x1cd)](_0x4d35ff=>{const _0x54b9df=_0x94fb62;if(_0x4d35ff[_0x54b9df(0xdf)]!=0x0)_0x4e36b4=![];}),_0x4e36b4&&(_0x49dcd7=_0x49dcd7['filter'](_0x59f391=>{return _0x59f391['date']!=_0x8b192b;}));}let _0x5f0184=dbConfig['get'](_0x94fb62(0x1a7))[_0x94fb62(0x170)]({'botID':botID})[_0x94fb62(0x1bc)]();_0x5f0184&&(dbConfig[_0x94fb62(0x122)](_0x94fb62(0x1a7))[_0x94fb62(0x170)]({'botID':botID})[_0x94fb62(0x1b2)]({'liquidity':_0x49dcd7})[_0x94fb62(0xc4)](),config[_0x94fb62(0x1ca)]=_0x49dcd7),logHistory(_0x94fb62(0x19e),'Portfolio\x20change\x20detected:\x20'+Math[_0x94fb62(0x146)](_0xbdd570[0x0][_0x94fb62(0xdf)])+'\x20'+_0xbdd570[0x0][_0x94fb62(0x18a)]+'\x20'+(_0xbdd570[0x0]['number']>0x0?'added':_0x94fb62(0x213))+_0x94fb62(0x121)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x94fb62(0x108)](_0x94fb62(0x7e)+Math[_0x94fb62(0x146)](_0xbdd570[0x0][_0x94fb62(0xdf)])+'\x20'+_0xbdd570[0x0]['coin']+'\x20'+(_0xbdd570[0x0]['number']>0x0?_0x94fb62(0x143):_0x94fb62(0x213)));transactionDetected=!![];}else logger['debug'](_0x94fb62(0x1fd)+Math[_0x94fb62(0x146)](_0xbdd570[0x0][_0x94fb62(0xdf)])+'\x20'+_0xbdd570[0x0]['coin']+'\x20'+(_0xbdd570[0x0]['number']>0x0?'added':_0x94fb62(0x213))+_0x94fb62(0xcf));}currentCoins=_0x262510,currentCoinsAll=_0x1fe215,await sleep(watchTransactionsInterval);}catch(_0x5961e4){if(!exchangeStopped)await handleError(_0x5961e4,_0x94fb62(0x11e));}else await sleep(0x64);}}async function loadSymbols(){const _0x151fce=_0xb6fc61;try{markets=await exchange[_0x151fce(0x11f)](),allSymbols=[],Object['entries'](markets)[_0x151fce(0x1cd)](_0x6ed38d=>{const _0x20c958=_0x151fce;_0x6ed38d[0x1]['active']&&_0x6ed38d[0x1][_0x20c958(0x8a)]&&allSymbols[_0x20c958(0x117)](_0x6ed38d[0x0]);});}catch(_0x7b513){throw _0x7b513;}}function validateSymbols(_0x5dc093){const _0x388b24=_0xb6fc61;let _0xa90b5a=[];return _0x5dc093[_0x388b24(0x1cd)](_0x360592=>{const _0x37b11c=_0x388b24;!allSymbols[_0x37b11c(0x11b)](_0x360592)?logHistory(_0x37b11c(0x1d6),'Invalid\x20symbol:\x20'+_0x360592+_0x37b11c(0x8d)):_0xa90b5a[_0x37b11c(0x117)](_0x360592);}),_0xa90b5a;}async function initclient(){const _0x3423a1=_0xb6fc61;proxyEmit(_0x3423a1(0x99),emittedConfiguration()),proxyEmit(_0x3423a1(0x157),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3423a1(0xf2),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x20cb1b=getNormalizedPerformance();emitPerformance(_0x20cb1b),getStartingBalances(_0x20cb1b);}async function toggleBotMode(){const _0x3d6e2f=_0xb6fc61;let _0x43b47c=dbConfig['get'](_0x3d6e2f(0x1a7))[_0x3d6e2f(0x170)]({'botID':botID})[_0x3d6e2f(0x1bc)]();if(_0x43b47c){const _0x3149c3=!_0x43b47c[_0x3d6e2f(0x1ef)];dbConfig[_0x3d6e2f(0x122)](_0x3d6e2f(0x1a7))[_0x3d6e2f(0x170)]({'botID':botID})[_0x3d6e2f(0x1b2)]({'headless':_0x3149c3})[_0x3d6e2f(0xc4)](),config[_0x3d6e2f(0x1ef)]=_0x3149c3,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x53cb4b=_0xb6fc61;process[_0x53cb4b(0xed)]({'updatebotmanager':!![]},_0x29235e=>{}),logger[_0x53cb4b(0x108)](_0x53cb4b(0x1c8)+config['headless']);}async function loadCoins(_0x5af966){const _0x558fe2=_0xb6fc61;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2c620d,_0x57aa61=0x0,_0x42067d=0x0;_0x5af966['forEach'](_0xf286e2=>{const _0x495e8f=_0xaae9;loading[_0x495e8f(0x199)][_0x495e8f(0x117)](_0xf286e2);}),loadingCanceled=![];let _0x1c4931=![];while(_0x2c620d!=_0x5af966['length']+maxLoadingProgress){_0x2c620d=loadingProgress,_0x5af966[_0x558fe2(0x1cd)](_0x36a5fb=>{const _0x36f42d=_0x558fe2;if(global[_0x36f42d(0x201)][noslash(_0x36a5fb)]){loading[_0x36f42d(0x199)]=loading['remainingSymbols'][_0x36f42d(0x144)](_0x3d2b3c=>_0x3d2b3c!=_0x36a5fb);if(!watchedSymbols[_0x36f42d(0x11b)](_0x36a5fb))watchedSymbols[_0x36f42d(0x117)](_0x36a5fb);_0x2c620d++;}}),loading[_0x558fe2(0xbf)]=Math[_0x558fe2(0x16f)](_0x2c620d/(_0x5af966[_0x558fe2(0xdd)]+maxLoadingProgress)*0x64);loading[_0x558fe2(0xbf)]!=0x64&&(_0x42067d>0x1e*0x5&&(loading[_0x558fe2(0x1a4)]=!![],emitLoadingProgress()),_0x42067d>0x78*0x5&&!_0x1c4931&&(_0x1c4931=!![],logHistory(_0x558fe2(0x1d6),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x558fe2(0x199)][_0x558fe2(0x195)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x558fe2(0xcd)+loadCoinsRetryInterval/0xea60+_0x558fe2(0x84)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x52f8a0=_0x558fe2;process['send']({'stop':_0x52f8a0(0xe3)},_0x2f8c2f=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x558fe2(0x1d1)]=!![],emitLoadingProgress();break;}else _0x57aa61!=loading['progress']&&(_0x57aa61=loading[_0x558fe2(0xbf)],emitLoadingProgress()),_0x42067d++,await sleep(0xc8);}_0x2c620d==_0x5af966[_0x558fe2(0xdd)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x558fe2(0x166),'live':'running'},_0x461bd8=>{}),_0x1c4931&&logHistory(_0x558fe2(0x19e),_0x558fe2(0x1f8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x384817=_0xb6fc61;proxyEmit(_0x384817(0x99),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x189978=_0xb6fc61;proxyEmit(_0x189978(0x10a),loading);}async function getFiat(){const _0x53fdd4=_0xb6fc61;let _0x18ff9b=global['ticker'][stablecoins[_0x53fdd4(0x85)][_0x53fdd4(0x18a)]],_0x390e9b=global[_0x53fdd4(0x201)][stablecoins[_0x53fdd4(0x10f)]['coin']];return{'eur':Number(_0x18ff9b),'usd':Number(_0x390e9b)};}function capitalize(_0xbdb969){const _0x156245=_0xb6fc61;return _0xbdb969['substring'](0x0,0x1)[_0x156245(0x174)]()+_0xbdb969[_0x156245(0x90)](0x1);}function supportedExchanges(){const _0x26342a=_0xb6fc61,_0x486ad7=['ws',_0x26342a(0x18d),_0x26342a(0x169),'watchTrades',_0x26342a(0x191),_0x26342a(0x1d8),_0x26342a(0x1c9),'fetchOpenOrders',_0x26342a(0xd1),_0x26342a(0x186)];let _0x208e37=[],_0x3cc94e=[],_0xf6c9d7=ccxt['pro'][_0x26342a(0x157)];_0xf6c9d7[_0x26342a(0x1cd)](_0x11168f=>{const _0x5680f8=_0x26342a;try{const _0x1b0b57=new ccxt[(_0x5680f8(0xfb))][_0x11168f]();_0x3cc94e[_0x5680f8(0x117)](_0x1b0b57);}catch(_0x34e931){}}),_0x3cc94e['forEach'](_0x2241b5=>{const _0xe280c5=_0x26342a;let _0x19058d=0x0;_0x486ad7[_0xe280c5(0x1cd)](_0x21d5d8=>{const _0x43ab6f=_0xe280c5;_0x21d5d8 in _0x2241b5['has']&&_0x2241b5[_0x43ab6f(0xcb)][_0x21d5d8]&&_0x19058d++;}),_0x19058d==_0x486ad7[_0xe280c5(0xdd)]&&_0x208e37['push'](capitalize(_0x2241b5['id']));});let _0x51fb33=[];return _0xf6c9d7[_0x26342a(0x1cd)](_0x37ba49=>{const _0x8a3528=_0x26342a;_0x37ba49=capitalize(_0x37ba49);if(!_0x208e37[_0x8a3528(0x11b)](_0x37ba49))_0x51fb33[_0x8a3528(0x117)](_0x37ba49);}),_0x208e37;}function setStartDatePerformance(){const _0x11b89e=_0xb6fc61;if(config&&config['liquidity'][0x0][_0x11b89e(0x19b)][_0x11b89e(0xdd)]!=0x0){const _0x235f70=config[_0x11b89e(0x1ca)][0x0]['changes'];dbPerformance[_0x11b89e(0x122)](_0x11b89e(0xa3))['find']({'date':config[_0x11b89e(0x137)]})[_0x11b89e(0x1b2)]({'coins':_0x235f70})['write']();}}async function recreateCoinResults(){const _0x520de0=_0xb6fc61;let _0x154741,_0x27e930=[];try{const _0x5d1ee8=fns[_0x520de0(0x128)](fns[_0x520de0(0x1b1)](config[_0x520de0(0x137)][_0x520de0(0x13a)](/\//g,'-')),_0x520de0(0xa7));for(const _0x47dc3 of currentCoins){if(_0x47dc3[_0x520de0(0x18a)]!=config[_0x520de0(0x1b8)]){let _0x324718=0x0,_0x4d37d6,_0x53bc89;_0x154741=await getAllEventOrders(_0x47dc3[_0x520de0(0x1a6)]);if(_0x154741[_0x520de0(0xdd)]>0x0)_0x154741['forEach'](_0x522570=>{const _0x51b6f7=_0x520de0,_0x8a3efa=_0x47dc3[_0x51b6f7(0x1a6)][_0x51b6f7(0x11b)](config[_0x51b6f7(0x1b8)]+'/');_0x27e930[_0x51b6f7(0x117)]({'datetime':_0x522570[_0x51b6f7(0x123)],'coin':_0x47dc3[_0x51b6f7(0x18a)],'symbol':_0x47dc3['symbol'],'side':_0x522570[_0x51b6f7(0x200)],'reverse':_0x8a3efa,'amount':formatResult(_0x522570[_0x51b6f7(0x1ae)],0x8),'filled':formatResult(_0x522570[_0x51b6f7(0x1ae)],0x8),'price':formatResult(_0x522570[_0x51b6f7(0x148)],0x8)}),_0x324718=_0x522570['side']==_0x51b6f7(0xd3)?_0x324718+_0x522570['filled']:_0x324718-_0x522570['filled'];if(!_0x53bc89)_0x53bc89=_0x522570[_0x51b6f7(0x148)];});_0x4d37d6=_0x47dc3['number']-_0x324718;let _0x507672;config['liquidity'][_0x520de0(0x1cd)](_0x26de97=>{const _0x5c7208=_0x520de0;!_0x507672&&(_0x507672=_0x26de97['changes'][_0x5c7208(0x170)](_0x4000fc=>_0x4000fc[_0x5c7208(0x18a)]==_0x47dc3[_0x5c7208(0x18a)]),_0x507672&&(_0x4d37d6=_0x507672['number'],_0x53bc89=_0x507672[_0x5c7208(0x148)]));});let _0x3728f2=dbCoinResults[_0x520de0(0x122)]('coins')[_0x520de0(0x170)]({'coin':_0x47dc3[_0x520de0(0x18a)]})[_0x520de0(0x1bc)]();_0x3728f2={'coin':_0x47dc3[_0x520de0(0x18a)],'number':_0x4d37d6,'breakeven':_0x53bc89,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x520de0(0x122)](_0x520de0(0x1f5))[_0x520de0(0x170)]({'coin':_0x47dc3['coin']})[_0x520de0(0x1b2)](_0x3728f2)['write']();}}_0x27e930['sort']((_0x538d4f,_0x529301)=>_0x538d4f[_0x520de0(0x123)]>_0x529301['datetime']?0x1:_0x529301[_0x520de0(0x123)]>_0x538d4f[_0x520de0(0x123)]?-0x1:0x0);let _0x90929e=0x0;for(let _0x24d1fd of _0x27e930){await updateCoinResults(_0x24d1fd,!![]);}}catch(_0x16b187){await handleError(_0x16b187,_0x520de0(0x168));}}async function getAllEventOrders(_0x20be8a){const _0x5722e9=_0xb6fc61;let _0x2ea645=[],_0x4d45e0=dbLogs['get'](_0x5722e9(0x1e5))['filter'](_0xd9107e=>{const _0x4d58e7=_0x5722e9,_0x768208=_0xd9107e[_0x4d58e7(0x133)][_0x4d58e7(0x1f7)]();return _0x768208[_0x4d58e7(0x11b)](_0x20be8a[_0x4d58e7(0x1f7)]())&&(_0x768208[_0x4d58e7(0x11b)](_0x4d58e7(0x1e0))&&_0x768208['includes'](_0x4d58e7(0x12a))||_0x768208[_0x4d58e7(0x11b)](_0x4d58e7(0x1ae))&&_0x768208['includes'](_0x4d58e7(0x12a)));})['sortBy']('time')[_0x5722e9(0x1bc)]();return _0x4d45e0['forEach'](_0x586bf8=>{const _0x50487d=_0x5722e9,_0x1e8414=_0x586bf8[_0x50487d(0x133)][_0x50487d(0x11b)](_0x50487d(0xe7))?_0x50487d(0xe7):_0x50487d(0xd3),_0x436f27=/#([0-9]|\.)+\s/i,_0x53dff5=Number(_0x436f27[_0x50487d(0x134)](_0x586bf8[_0x50487d(0x133)])[0x0][_0x50487d(0xb0)](0x1)),_0x50f57f=/@([0-9]|\.)+$/i,_0x253722=Number(_0x50f57f[_0x50487d(0x134)](_0x586bf8['event'])[0x0][_0x50487d(0xb0)](0x1));_0x2ea645[_0x50487d(0x117)]({'datetime':_0x586bf8[_0x50487d(0x172)],'coin':symbolToCoin(_0x20be8a),'symbol':_0x20be8a,'side':_0x1e8414,'amount':_0x53dff5,'filled':_0x53dff5,'price':_0x253722});}),_0x2ea645;}async function getAllOrders(_0x4a3398,_0xf1d4b8){const _0x5f1a3f=_0xb6fc61;let _0x1ef0ce=[];while(_0xf1d4b8<exchange[_0x5f1a3f(0x20a)]()){const _0x231163=0x1f4;try{const _0x55a67e=await exchange[_0x5f1a3f(0xd1)](_0x4a3398,_0xf1d4b8,_0x231163);if(_0x55a67e['length'])_0xf1d4b8=_0x55a67e[_0x55a67e[_0x5f1a3f(0xdd)]-0x1][_0x5f1a3f(0x1c2)]+0x1,_0x1ef0ce=_0x1ef0ce[_0x5f1a3f(0x153)](_0x55a67e);else break;}catch(_0x2ef30f){await handleError(_0x2ef30f,_0x5f1a3f(0x21c),_0x4a3398);}}return _0x1ef0ce;}async function validate24hChanges(){const _0x242183=_0xb6fc61;for(const _0x4ed402 of currentCoins){if(_0x4ed402['coin']!=config[_0x242183(0x1b8)]){let _0xdcdd36;_0x4ed402['reverse']?_0xdcdd36=formatResult((0x1/(global[_0x242183(0x15c)][noslash(_0x4ed402[_0x242183(0x1a6)])]/0x64+0x1)-0x1)*0x64,0x3):_0xdcdd36=global[_0x242183(0x15c)][noslash(_0x4ed402[_0x242183(0x1a6)])],_0xdcdd36<config[_0x242183(0x13e)]&&(logHistory(_0x242183(0x1d6),_0x4ed402['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0xdcdd36+'%'),logHistory('error',_0x242183(0x20d)),logHistory(_0x242183(0x1d6),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xd9569f,_0x81ef24){const _0x2977c9=_0xb6fc61;if(!_0xd9569f)return!![];const _0x4bf600=_0x81ef24[_0x2977c9(0x208)]('.'),_0xf345c1=_0xd9569f[_0x2977c9(0x208)]('.');for(var _0x323047=0x0;_0x323047<_0xf345c1['length'];_0x323047++){const _0x338f31=~~_0xf345c1[_0x323047],_0x19fdc5=~~_0x4bf600[_0x323047];if(_0x338f31<_0x19fdc5)return!![];if(_0x338f31>_0x19fdc5)return![];}return![];}async function oneTimeMigration(){const _0x2e275c=_0xb6fc61;let _0x10dabb=dbLogs['get'](_0x2e275c(0x83))[_0x2e275c(0x1bc)]();if(isOlderVersion(_0x10dabb,_0x2e275c(0xa0))){let _0x14f53c=[];const _0x4c0677=dbLogs[_0x2e275c(0x122)](_0x2e275c(0x1e5))[_0x2e275c(0x1bc)]();_0x4c0677[_0x2e275c(0x1cd)](_0x9d3ca8=>{const _0x4b022c=_0x2e275c;_0x14f53c[_0x4b022c(0x117)]({'time':_0x9d3ca8[_0x4b022c(0x172)],'type':_0x9d3ca8[_0x4b022c(0x111)],'event':_0x9d3ca8['event']});}),dbLogs[_0x2e275c(0x122)](_0x2e275c(0x1e5))[_0x2e275c(0x1b2)](_0x14f53c)[_0x2e275c(0xc4)]();}let _0x4ea506=dbConfig[_0x2e275c(0x122)](_0x2e275c(0x83))['value']();if(isOlderVersion(_0x4ea506,_0x2e275c(0xa0))){let _0x45ad8a=dbConfig[_0x2e275c(0x122)]('bot')[_0x2e275c(0x170)]({'botID':botID})['value']();if(_0x45ad8a){let _0x23205b=[];_0x45ad8a[_0x2e275c(0x1db)][_0x2e275c(0x1cd)](_0x2dabe2=>{const _0x1dda71=_0x2e275c;_0x23205b[_0x1dda71(0x117)]({'coin':_0x2dabe2[_0x1dda71(0x18a)],'number':_0x2dabe2[_0x1dda71(0x1e4)],'price':_0x2dabe2[_0x1dda71(0xa6)]}),delete _0x2dabe2[_0x1dda71(0x1e4)],delete _0x2dabe2[_0x1dda71(0xa6)];});if(_0x23205b[_0x2e275c(0xdd)]!==0x0)fs[_0x2e275c(0x1cf)](configbackuppath+(_0x2e275c(0x112)+botID+_0x2e275c(0x147)),JSON[_0x2e275c(0x125)](_0x23205b,null,0x4),function(_0x3a0d27){if(_0x3a0d27){}});const _0x3c052e=(_0x912936,_0x382bb9)=>{const _0x44db73=_0x2e275c;let _0xeb75c2=[];_0x382bb9[_0x44db73(0x1cd)](_0x55abe7=>{const _0x461f41=_0x44db73,_0x42a431=_0x912936[_0x461f41(0x170)](_0x21421f=>_0x21421f['coin']==_0x55abe7[_0x461f41(0x18a)]);if(!_0x42a431)_0xeb75c2[_0x461f41(0x117)](_0x55abe7);});let _0x95dcfd=[];return _0x912936[_0x44db73(0x1cd)](_0x38ca16=>{const _0x145958=_0x44db73,_0x5abc4f=_0x382bb9[_0x145958(0x170)](_0x556603=>_0x556603[_0x145958(0x18a)]==_0x38ca16[_0x145958(0x18a)]);if(!_0x5abc4f||_0x5abc4f[_0x145958(0xdf)]==0x0&&_0x38ca16['number']!=0x0)_0x95dcfd[_0x145958(0x117)](_0x38ca16);}),{'missingDay1':_0xeb75c2,'notInDay2':_0x95dcfd};},_0x4e8a19=dbPerformance[_0x2e275c(0x122)](_0x2e275c(0xa3))[_0x2e275c(0x202)]()[_0x2e275c(0x1bc)]();if(_0x4e8a19['length']>0x1){const {missingDay1:_0x1c04a2,notInDay2:_0x490c3e}=_0x3c052e(_0x23205b,_0x4e8a19[0x1][_0x2e275c(0x1f5)]);_0x23205b=[..._0x23205b,..._0x1c04a2],_0x490c3e[_0x2e275c(0x1cd)](_0xb3f380=>{const _0x47c168=_0x2e275c;let _0x19bb8a=_0x23205b[_0x47c168(0x149)](_0x3e05a8=>_0x3e05a8[_0x47c168(0x18a)]==_0xb3f380[_0x47c168(0x18a)]);_0x19bb8a!=-0x1&&_0x23205b[_0x47c168(0x9d)](_0x19bb8a,0x1);});}_0x23205b['sort']((_0xa1cad7,_0x4d2576)=>_0xa1cad7[_0x2e275c(0x18a)]>_0x4d2576[_0x2e275c(0x18a)]?0x1:_0x4d2576[_0x2e275c(0x18a)]>_0xa1cad7[_0x2e275c(0x18a)]?-0x1:0x0);let _0x31896d=[{'date':_0x45ad8a[_0x2e275c(0x137)],'changes':_0x23205b}];_0x4e8a19[_0x2e275c(0xdd)]>0x2&&_0x4e8a19['forEach']((_0x4ecd1b,_0xce7740)=>{const _0x1e46a7=_0x2e275c;if(_0xce7740>0x0&&_0xce7740<_0x4e8a19[_0x1e46a7(0xdd)]-0x1){const {missingDay1:_0x4052eb,notInDay2:_0x3c615c}=_0x3c052e(_0x4e8a19[_0xce7740][_0x1e46a7(0x1f5)],_0x4e8a19[_0xce7740+0x1][_0x1e46a7(0x1f5)]);_0x23205b=[],(_0x4052eb[_0x1e46a7(0xdd)]!=0x0||_0x3c615c[_0x1e46a7(0xdd)]!=0x0)&&(_0x4052eb[_0x1e46a7(0xdd)]!=0x0&&_0x23205b[_0x1e46a7(0x117)](..._0x4052eb),_0x3c615c[_0x1e46a7(0xdd)]!=0x0&&(_0x3c615c['forEach'](_0x117203=>{const _0x41d8b5=_0x1e46a7;_0x117203[_0x41d8b5(0xdf)]=-_0x117203[_0x41d8b5(0xdf)];}),_0x23205b['push'](..._0x3c615c)),_0x23205b['sort']((_0x17c964,_0x1d9430)=>_0x17c964[_0x1e46a7(0x18a)]>_0x1d9430[_0x1e46a7(0x18a)]?0x1:_0x1d9430['coin']>_0x17c964['coin']?-0x1:0x0),_0x31896d['push']({'date':_0x4e8a19[_0xce7740+0x1][_0x1e46a7(0x103)],'changes':_0x23205b}));}}),dbConfig['get']('bot')['find']({'botID':botID})[_0x2e275c(0x1b2)]({..._0x45ad8a,'liquidity':_0x31896d})['write']();}}if(isOlderVersion(_0x4ea506,_0x2e275c(0x115))){let _0x17a0a7=dbConfig['get'](_0x2e275c(0x1a7))['find']({'botID':botID})[_0x2e275c(0x1bc)]();if(_0x17a0a7){const _0xc855b3=_0x17a0a7[_0x2e275c(0xca)],_0x9b3586=_0xc855b3?capitalize(_0xc855b3):_0x2e275c(0x1b0);dbConfig[_0x2e275c(0x122)](_0x2e275c(0x1a7))[_0x2e275c(0x170)]({'botID':botID})[_0x2e275c(0x1b2)]({'exchange':_0x9b3586})[_0x2e275c(0xc4)]();}}let _0x28e4cf=dbPerformance[_0x2e275c(0x122)](_0x2e275c(0x83))['value']();isOlderVersion(_0x28e4cf,_0x2e275c(0xa0))&&setStartDatePerformance();let _0xa94737=dbCoinResults['get'](_0x2e275c(0x83))['value']();if(isOlderVersion(_0xa94737,_0x2e275c(0xc6))){let _0x43c03c=dbCoinResults[_0x2e275c(0x122)]('coins')['value']();if(_0x43c03c[_0x2e275c(0xdd)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3c4c46=_0xb6fc61;dbConfig['set'](_0x3c4c46(0x83),serverversion)['write'](),dbPerformance[_0x3c4c46(0xae)]('version',serverversion)[_0x3c4c46(0xc4)](),dbLogs['set']('version',serverversion)['write'](),dbCoinResults[_0x3c4c46(0xae)](_0x3c4c46(0x83),serverversion)['write']();}function getConfiguration(_0x376893){const _0x26df63=_0xb6fc61;let _0x30df98=dbConfig['get'](_0x26df63(0x1a7))[_0x26df63(0x170)]({'botID':_0x376893})[_0x26df63(0x1bc)]();if(_0x30df98){let _0x35eae4=![];typeof _0x30df98[_0x26df63(0x21b)]==_0x26df63(0x17c)&&(_0x30df98={..._0x30df98,'threshold':Number(_0x30df98['threshold'])},_0x35eae4=!![]),_0x30df98[_0x26df63(0x13e)]==undefined&&(_0x30df98={..._0x30df98,'change24h':-0x14},_0x35eae4=!![]),_0x30df98[_0x26df63(0xea)]==undefined&&(_0x30df98={..._0x30df98,'fiat':_0x26df63(0x198)},_0x35eae4=!![]),_0x30df98[_0x26df63(0x206)]==undefined&&(_0x30df98={..._0x30df98,'onepagemode':settings[_0x26df63(0x206)]},_0x35eae4=!![]),_0x30df98[_0x26df63(0x20f)]==undefined&&(_0x30df98={..._0x30df98,'colorscheme':'red_yellow_blue'},_0x35eae4=!![]),_0x30df98['autoliquidity']==undefined&&(_0x30df98={..._0x30df98,'autoliquidity':!![]},_0x35eae4=!![]),_0x35eae4&&(_0x30df98={'botID':_0x30df98[_0x26df63(0x130)],'exchange':_0x30df98[_0x26df63(0xca)],'apiKey':_0x30df98[_0x26df63(0x141)],'apiSecret':_0x30df98[_0x26df63(0x1bb)],'apiPassword':_0x30df98[_0x26df63(0x1c5)],'basecoin':_0x30df98[_0x26df63(0x1b8)],'botname':_0x30df98[_0x26df63(0x1a0)],'showname':_0x30df98[_0x26df63(0x1d0)],'threshold':_0x30df98[_0x26df63(0x21b)],'ordertype':_0x30df98[_0x26df63(0x135)],'timeout':_0x30df98['timeout'],'fiat':_0x30df98['fiat'],'startdate':_0x30df98[_0x26df63(0x137)],'recreate':_0x30df98[_0x26df63(0x151)],'timeshift':_0x30df98[_0x26df63(0x1d7)],'onepagemode':_0x30df98[_0x26df63(0x206)],'headless':_0x30df98['headless'],'cooldown':_0x30df98['cooldown'],'change24h':_0x30df98[_0x26df63(0x13e)],'emojibuy':_0x30df98[_0x26df63(0xe2)],'emojisell':_0x30df98[_0x26df63(0xb3)],'colorscheme':_0x30df98[_0x26df63(0x20f)],'portfolio':_0x30df98[_0x26df63(0x1db)],'autoliquidity':_0x30df98[_0x26df63(0x13f)],'liquidity':_0x30df98[_0x26df63(0x1ca)],'openOrders':_0x30df98['openOrders']},dbConfig[_0x26df63(0x122)]('bot')[_0x26df63(0xd0)]()[_0x26df63(0xc4)](),dbConfig[_0x26df63(0x122)](_0x26df63(0x1a7))[_0x26df63(0x117)](_0x30df98)[_0x26df63(0xc4)]());}else _0x30df98={'botID':_0x376893,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x26df63(0x189)+_0x376893,'showname':![],'threshold':0x3,'ordertype':_0x26df63(0x1e0),'timeout':0x14,'fiat':_0x26df63(0x198),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x26df63(0x1f9),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x30df98;}function emittedConfiguration(){const _0x25fa69=_0xb6fc61;let _0x24b6ae;if(config['apiKey']=='')_0x24b6ae={...config,'configstate':_0x25fa69(0x80)};else config[_0x25fa69(0x141)]==_0x25fa69(0x210)?_0x24b6ae={...config,'configstate':_0x25fa69(0x92)}:(_0x24b6ae={...config,'apiKey':_0x25fa69(0x164),'apiSecret':_0x25fa69(0x164)},config[_0x25fa69(0x1c5)]&&(_0x24b6ae[_0x25fa69(0x1c5)]='************'));return _0x24b6ae;}function getSettings(){const _0x3cc0b2=_0xb6fc61;return dbSettings['get']('settings')[_0x3cc0b2(0x1bc)]();}function getSecure(){const _0x8a88c3=_0xb6fc61;return dbSecure[_0x8a88c3(0x122)](_0x8a88c3(0xf8))[_0x8a88c3(0x1bc)]()||{};}function updateTimeshift(_0x274a88){const _0x5a06ee=_0xb6fc61;let _0x4ffa26=dbConfig[_0x5a06ee(0x122)](_0x5a06ee(0x1a7))[_0x5a06ee(0x170)]({'botID':botID})[_0x5a06ee(0x1bc)]();_0x4ffa26&&dbConfig[_0x5a06ee(0x122)]('bot')[_0x5a06ee(0x170)]({'botID':botID})['assign']({'timeshift':_0x274a88})[_0x5a06ee(0xc4)](),config['timeshift']=_0x274a88,proxyEmit(_0x5a06ee(0x99),emittedConfiguration());}function updateOnepagemode(_0xaf2053){const _0x326dc9=_0xb6fc61;let _0x29eebe=dbConfig[_0x326dc9(0x122)](_0x326dc9(0x1a7))[_0x326dc9(0x170)]({'botID':botID})[_0x326dc9(0x1bc)]();_0x29eebe&&dbConfig[_0x326dc9(0x122)](_0x326dc9(0x1a7))[_0x326dc9(0x170)]({'botID':botID})[_0x326dc9(0x1b2)]({'onepagemode':_0xaf2053})[_0x326dc9(0xc4)](),config['onepagemode']=_0xaf2053,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x37a807){const _0x43356e=_0xb6fc61;logger[_0x43356e(0x108)](_0x43356e(0x1b5));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x43356e(0x108)](_0x43356e(0x126));let _0x3127bc=![],_0x5c947c=![],_0x5332ba=[];_0x37a807[_0x43356e(0x1db)][_0x43356e(0x1cd)](_0x4ca64d=>{const _0x1254bb=_0x43356e;if(!_0x4ca64d[_0x1254bb(0x12b)]&&_0x4ca64d[_0x1254bb(0x18a)]!=_0x37a807['basecoin'])_0x5332ba['push'](_0x4ca64d[_0x1254bb(0x1a6)]);}),_0x5332ba[_0x43356e(0x1cd)](_0x45f59d=>{const _0x3b082a=_0x43356e,_0x44044a=currentCoins[_0x3b082a(0x170)](_0x53dbca=>_0x53dbca[_0x3b082a(0x1a6)]==_0x45f59d);!_0x44044a&&(_0x3127bc=!![]);}),currentCoins[_0x43356e(0x1cd)](_0x11d5f7=>{const _0x2691a8=_0x43356e;if(_0x11d5f7[_0x2691a8(0x18a)]!=config[_0x2691a8(0x1b8)]){const _0x3620bc=_0x5332ba[_0x2691a8(0x170)](_0x3511bf=>_0x3511bf==_0x11d5f7[_0x2691a8(0x1a6)]);!_0x3620bc&&(_0x3127bc=!![]);}}),_0x37a807[_0x43356e(0x1db)]['forEach'](_0x1a8564=>{const _0x20b44e=_0x43356e,_0x2a5230=config[_0x20b44e(0x1db)]['find'](_0x447f4c=>_0x447f4c[_0x20b44e(0x18a)]==_0x1a8564[_0x20b44e(0x18a)]);if(_0x2a5230&&_0x1a8564[_0x20b44e(0x193)]!=_0x2a5230[_0x20b44e(0x193)])_0x5c947c=!![];});let _0x3b72d7=dbConfig[_0x43356e(0x122)](_0x43356e(0x1a7))['find']({'botID':botID})['value']();_0x37a807={..._0x37a807,'apiKey':crypt[_0x43356e(0x220)](secure[_0x43356e(0x1e2)],_0x37a807[_0x43356e(0x141)])[_0x43356e(0x14a)],'apiSecret':crypt[_0x43356e(0x220)](secure[_0x43356e(0x1e2)],_0x37a807['apiSecret'])[_0x43356e(0x14a)]};_0x37a807[_0x43356e(0x1c5)]&&(_0x37a807[_0x43356e(0x1c5)]=crypt[_0x43356e(0x220)](secure[_0x43356e(0x1e2)],_0x37a807['apiPassword'])[_0x43356e(0x14a)]);let _0xc1c4f4=![];if(_0x3b72d7){_0x37a807[_0x43356e(0x141)]==_0x43356e(0x164)?_0x37a807['apiKey']=config[_0x43356e(0x141)]:_0xc1c4f4=!![];_0x37a807['apiSecret']==_0x43356e(0x164)?_0x37a807[_0x43356e(0x1bb)]=config[_0x43356e(0x1bb)]:_0xc1c4f4=!![];if(_0x37a807[_0x43356e(0x1c5)]==_0x43356e(0x164))_0x37a807[_0x43356e(0x1c5)]=config[_0x43356e(0x1c5)];else{if(_0x37a807[_0x43356e(0x1c5)])_0xc1c4f4=!![];}dbConfig[_0x43356e(0x122)](_0x43356e(0x1a7))[_0x43356e(0x170)]({'botID':botID})[_0x43356e(0x1b2)](_0x37a807)[_0x43356e(0xc4)]();}else dbConfig['get'](_0x43356e(0x1a7))[_0x43356e(0x117)](_0x37a807)[_0x43356e(0xc4)](),_0xc1c4f4=!![],process[_0x43356e(0xed)]({'status':_0x43356e(0x166),'live':_0x43356e(0x173)},_0x3e6ce6=>{});process[_0x43356e(0xed)]({'botname':_0x37a807[_0x43356e(0x1a0)]},_0x4e4714=>{}),config={..._0x37a807},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xc1c4f4)await reset(!![]);else _0x3127bc||_0x5c947c?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x43356e(0x108)](_0x43356e(0x1f6));}async function storeHeadless(_0x5357ba){const _0x24f4b=_0xb6fc61,_0x55f724={...config,'headless':_0x5357ba[_0x24f4b(0x1ef)]};let _0x20c377=dbConfig[_0x24f4b(0x122)](_0x24f4b(0x1a7))[_0x24f4b(0x170)]({'botID':botID})[_0x24f4b(0x1bc)]();_0x20c377&&dbConfig['get'](_0x24f4b(0x1a7))[_0x24f4b(0x170)]({'botID':botID})['assign'](_0x55f724)[_0x24f4b(0xc4)](),config={..._0x55f724},updateBotManager(),proxyEmit(_0x24f4b(0x99),emittedConfiguration());}async function storeFiat(_0x52ae58){const _0x226230=_0xb6fc61,_0x3c8e71={...config,'fiat':_0x52ae58};let _0x54f2ff=dbConfig[_0x226230(0x122)](_0x226230(0x1a7))[_0x226230(0x170)]({'botID':botID})[_0x226230(0x1bc)]();_0x54f2ff&&dbConfig[_0x226230(0x122)](_0x226230(0x1a7))[_0x226230(0x170)]({'botID':botID})[_0x226230(0x1b2)](_0x3c8e71)[_0x226230(0xc4)](),config={..._0x3c8e71},proxyEmit(_0x226230(0x99),emittedConfiguration());}function resetHistory(){const _0x367739=_0xb6fc61;logger['full'](_0x367739(0x129));try{if(fs[_0x367739(0x102)](path[_0x367739(0x195)](configpath,_0x367739(0x18e)+botID+'-events.json')))fs['unlinkSync'](path[_0x367739(0x195)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x367739(0x102)](path[_0x367739(0x195)](configpath,_0x367739(0x18e)+botID+'-performance.json')))fs[_0x367739(0x182)](path[_0x367739(0x195)](configpath,_0x367739(0x18e)+botID+'-performance.json'));if(fs[_0x367739(0x102)](path[_0x367739(0x195)](configpath,'bot-'+botID+_0x367739(0xa2))))fs[_0x367739(0x182)](path[_0x367739(0x195)](configpath,_0x367739(0x18e)+botID+_0x367739(0xa2)));}catch(_0x20b154){if(_0x20b154)logger[_0x367739(0x1ee)](_0x367739(0x167),_0x20b154);}const _0x36a04a=getDate();let _0x321501=[];currentCoins['forEach'](_0x5107e1=>{const _0x1fd0fd=_0x367739;_0x321501[_0x1fd0fd(0x117)]({'coin':_0x5107e1[_0x1fd0fd(0x18a)],'number':_0x5107e1[_0x1fd0fd(0xdf)],'price':_0x5107e1[_0x1fd0fd(0xd9)]});});let _0x16625a=dbConfig['get'](_0x367739(0x1a7))[_0x367739(0x170)]({'botID':botID})[_0x367739(0x1bc)]();_0x16625a&&(dbConfig[_0x367739(0x122)](_0x367739(0x1a7))[_0x367739(0x170)]({'botID':botID})[_0x367739(0x1b2)]({'liquidity':[{'date':_0x36a04a,'changes':_0x321501}]})[_0x367739(0xc4)](),config[_0x367739(0x1ca)]=[]),process[_0x367739(0xed)]({'stop':'restart'},_0x5a3aaf=>{});}function noslash(_0x29e7ab){const _0x36dac2=_0xb6fc61;return _0x29e7ab[_0x36dac2(0x13a)]('/','');}function updateHighestFee(_0x4f07c5){const _0x3a2590=_0xb6fc61;if(_0x4f07c5['reverse']){let _0x130bd5={'filled':_0x4f07c5[_0x3a2590(0x1ae)]*_0x4f07c5[_0x3a2590(0x148)],'amount':_0x4f07c5[_0x3a2590(0x1ae)]*_0x4f07c5[_0x3a2590(0x148)],'side':_0x4f07c5[_0x3a2590(0x200)]==_0x3a2590(0xe7)?_0x3a2590(0xd3):'sell','price':0x1/_0x4f07c5[_0x3a2590(0x148)]};_0x4f07c5={..._0x4f07c5,..._0x130bd5};}const _0x405375=defaultFee*_0x4f07c5['filled']*_0x4f07c5[_0x3a2590(0x148)];lastFees[_0x3a2590(0x196)]['length']===0x14&&lastFees[_0x3a2590(0x196)][_0x3a2590(0x17a)](),lastFees[_0x3a2590(0x196)]['push'](_0x405375),lastFees[_0x3a2590(0x171)]=Math[_0x3a2590(0x132)](...lastFees[_0x3a2590(0x196)]);}async function updateNumberCoinsCcxt(_0x4b7b0d){const _0x3e2c11=_0xb6fc61;logger[_0x3e2c11(0x108)]('0\x20-\x20EXECUTION:\x20'+_0x4b7b0d['symbol']+_0x3e2c11(0xe1)+_0x4b7b0d['status']+_0x3e2c11(0xe1)+_0x4b7b0d['filled']+_0x3e2c11(0x207)+_0x4b7b0d[_0x3e2c11(0x9e)]+_0x3e2c11(0xe1)+_0x4b7b0d['id']);let _0x489b27=_0x4b7b0d['status'],_0x22d864=![];currentCoins[_0x3e2c11(0x1cd)](_0x166180=>{const _0x714a27=_0x3e2c11;_0x166180[_0x714a27(0x1a6)]==_0x4b7b0d[_0x714a27(0x1a6)]&&(_0x22d864=!![]);});if(!_0x22d864)return;const _0x22fafa=currentCoins[_0x3e2c11(0x170)](_0x333dfc=>_0x333dfc[_0x3e2c11(0x1a6)]==_0x4b7b0d[_0x3e2c11(0x1a6)]),_0x1a1b07=_0xf8eee8=>{const _0x29401f=_0x3e2c11;if(_0x22fafa)_0x22fafa[_0x29401f(0x179)]=_0xf8eee8;};if(_0x489b27==_0x3e2c11(0x1de))_0x1a1b07('open');else{if(_0x489b27==_0x3e2c11(0x109)){_0x1a1b07(_0x3e2c11(0x109));const _0x50d61a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x50d61a,await getOpenOrders(),handleOpenOrders();}else{if(_0x489b27==_0x3e2c11(0xad)){let _0x301bb1=![];if(lastOrders)for(const _0x91f7f of lastOrders){const _0x109ab5=0xc8,_0x4284ec=0x1388;let _0x56fba2=0x0;while(!_0x91f7f['orderId']&&_0x56fba2*_0x109ab5<_0x4284ec){_0x56fba2++,await sleep(_0x109ab5);}if(_0x56fba2>0x0)logger[_0x3e2c11(0x108)](_0x3e2c11(0x183)+_0x56fba2*_0x109ab5/0x3e8+_0x3e2c11(0x159));if(_0x91f7f[_0x3e2c11(0xff)]==_0x4b7b0d['id']){logger['debug'](_0x3e2c11(0xa4)+_0x4b7b0d['id']),_0x301bb1=!![];if(_0x91f7f[_0x3e2c11(0x1ae)]==0x0){logger[_0x3e2c11(0x108)](_0x3e2c11(0x158)+_0x4b7b0d['id']);if(_0x4b7b0d[_0x3e2c11(0xc2)])_0x91f7f[_0x3e2c11(0x148)]=_0x4b7b0d[_0x3e2c11(0xc2)];else{if(_0x4b7b0d[_0x3e2c11(0x148)])_0x91f7f[_0x3e2c11(0x148)]=_0x4b7b0d['price'];else{}}_0x91f7f['filled']=_0x4b7b0d[_0x3e2c11(0x1ae)],updateHighestFee(_0x91f7f),_0x1a1b07(_0x3e2c11(0x1ae)),await validateOrders();if(lockOrders==ORDERS[_0x3e2c11(0x131)]){const _0x349cb7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x349cb7;}_0x91f7f['fee']={'currency':_0x4b7b0d[_0x3e2c11(0x11d)]?_0x4b7b0d[_0x3e2c11(0x11d)][_0x3e2c11(0x1e6)]:null,'cost':_0x4b7b0d[_0x3e2c11(0x11d)]?_0x4b7b0d[_0x3e2c11(0x11d)]['cost']:0x0},await updateCoinResults(_0x91f7f);}}}if(!_0x301bb1){logger[_0x3e2c11(0x108)](_0x3e2c11(0xd7)+_0x4b7b0d['id']),_0x1a1b07(_0x3e2c11(0x1ae));const _0x4eb8eb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4eb8eb,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x41ad7f=JSON[_0x3e2c11(0xe0)](lastBalances[_0x3e2c11(0x1db)]);const _0x4f4b64=_0x41ad7f['find'](_0x1a2122=>_0x1a2122[_0x3e2c11(0x1a6)]==_0x4b7b0d[_0x3e2c11(0x1a6)]);if(_0x4f4b64){if(_0x489b27==_0x3e2c11(0x1de))_0x4f4b64['orderstatus']=_0x4f4b64[_0x3e2c11(0x179)]==_0x3e2c11(0x1ae)?'filled':_0x3e2c11(0x1de);else{if(_0x489b27==_0x3e2c11(0x109))_0x4f4b64[_0x3e2c11(0x179)]=_0x4f4b64[_0x3e2c11(0x179)]==_0x3e2c11(0x1ae)?'filled':_0x3e2c11(0x109);else _0x489b27==_0x3e2c11(0xad)&&(_0x4f4b64[_0x3e2c11(0x179)]=_0x3e2c11(0x1ae));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x41ad7f)},proxyEmit(_0x3e2c11(0xf2),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5f4711=_0xb6fc61;await getOpenOrders();let _0x2bc6ba=![];currentCoins[_0x5f4711(0x1cd)](_0x18dae9=>{const _0x33b60c=_0x5f4711;_0x2bc6ba=allOpenOrders[_0x33b60c(0x170)](_0x17f4d4=>_0x17f4d4[_0x33b60c(0x1a6)]==_0x18dae9[_0x33b60c(0x1a6)]),_0x18dae9['orderstatus']=_0x2bc6ba?_0x33b60c(0x1de):_0x33b60c(0x89);});}async function getCoins(_0x28afe4=0x0,_0x3f7947=!![],_0x3996db=config[_0xb6fc61(0x1b8)]){const _0x7c1c4f=_0xb6fc61;let _0x5252a6,_0x2af7fa=[],_0x3eb0aa=[],_0x4e786b=[];if(_0x28afe4)await sleep(_0x28afe4);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5252a6=await exchange[_0x7c1c4f(0x186)](),mybalances=_0x5252a6['total'];for(const [_0x22eadc,_0x22093d]of Object[_0x7c1c4f(0xe4)](mybalances)){_0x4e786b[_0x7c1c4f(0x117)](_0x22eadc);}config['portfolio'][_0x7c1c4f(0x1cd)](_0x35b002=>{const _0x25eb37=_0x7c1c4f;!_0x4e786b[_0x25eb37(0x11b)](_0x35b002['coin'])&&(mybalances[_0x35b002['coin']]=0x0);});if(_0x3996db=='')for(const [_0x314bfe,_0x597d3e]of Object[_0x7c1c4f(0xe4)](mybalances)){_0x597d3e!=0x0&&_0x2af7fa[_0x7c1c4f(0x117)]({'coin':_0x314bfe});}else{let _0xa396c6=![];for(const [_0x20b4b5,_0x3b2e62]of Object[_0x7c1c4f(0xe4)](mybalances)){const _0x4c2707=config['portfolio'][_0x7c1c4f(0x170)](_0x5dc2f1=>_0x5dc2f1[_0x7c1c4f(0x18a)]==_0x20b4b5),_0x5daf78=_0x20b4b5+'/'+_0x3996db,_0x2efac8=_0x3996db+'/'+_0x20b4b5,_0x2f2c8a=currentCoins['find'](_0x519b68=>_0x519b68['coin']==_0x20b4b5);_0xa396c6=![];if((_0x3b2e62!=0x0||_0x4c2707)&&(allSymbols[_0x7c1c4f(0x11b)](_0x5daf78)||_0x20b4b5==_0x3996db))_0x2af7fa[_0x7c1c4f(0x117)]({'coin':_0x20b4b5,'symbol':_0x5daf78,'reverse':![],'number':Math[_0x7c1c4f(0x132)](_0x3b2e62+(_0x4c2707&&_0x4c2707['offset']||0x0),0x0),'orderstatus':_0x2f2c8a?_0x2f2c8a['orderstatus']:_0x7c1c4f(0x89)});else{if((_0x3b2e62!=0x0||_0x4c2707)&&allSymbols[_0x7c1c4f(0x11b)](_0x2efac8))_0x2af7fa[_0x7c1c4f(0x117)]({'coin':_0x20b4b5,'symbol':_0x2efac8,'reverse':!![],'number':Math[_0x7c1c4f(0x132)](_0x3b2e62+(_0x4c2707&&_0x4c2707[_0x7c1c4f(0x193)]||0x0),0x0),'orderstatus':_0x2f2c8a?_0x2f2c8a[_0x7c1c4f(0x179)]:'none'});else _0x4c2707&&_0x2af7fa[_0x7c1c4f(0x117)]({'coin':_0x4c2707['coin'],'symbol':_0x4c2707['symbol'],'reverse':_0x4c2707[_0x7c1c4f(0x184)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x192d5a){if(!_0x3f7947)handleErrorNoStop(_0x192d5a,_0x7c1c4f(0x1b6));else await handleError(_0x192d5a,_0x7c1c4f(0x1b6));}return _0x3eb0aa=cloneDeep(_0x2af7fa),_0x2af7fa=_0x2af7fa[_0x7c1c4f(0x144)](_0x4f7336=>{const _0x4102a1=_0x7c1c4f,_0x509151=config[_0x4102a1(0x1db)][_0x4102a1(0x170)](_0x4641eb=>_0x4641eb['coin']==_0x4f7336[_0x4102a1(0x18a)]);return _0x509151&&!_0x509151[_0x4102a1(0x12b)];}),[_0x2af7fa,_0x3eb0aa];}async function getCoinNumber(_0x459856){const _0x3162ab=_0xb6fc61;let _0x18f596;try{const _0x4385da=await exchange[_0x3162ab(0x186)]();_0x18f596=_0x4385da['total'][_0x459856];}catch(_0x4d3121){await handleError(_0x4d3121,_0x3162ab(0x190));}return _0x18f596;}async function getOpenOrders(){const _0x2fd72b=_0xb6fc61;let _0x2cd214;allOpenOrders=[];try{for(const _0x3c388a of config[_0x2fd72b(0x1db)]){!_0x3c388a[_0x2fd72b(0x12b)]&&_0x3c388a[_0x2fd72b(0x18a)]!=config[_0x2fd72b(0x1b8)]&&(_0x2cd214=await exchange[_0x2fd72b(0x8e)](_0x3c388a[_0x2fd72b(0x1a6)]),_0x2cd214['length']>0x0&&allOpenOrders[_0x2fd72b(0x117)](_0x2cd214[0x0]));}}catch(_0x4122ff){await handleError(_0x4122ff,_0x2fd72b(0xfd));}}async function handleOpenOrders(_0xa5c392=0x0){const _0x4087b6=_0xb6fc61;allOpenOrders[_0x4087b6(0xdd)]==0x0&&lockOrders==ORDERS[_0x4087b6(0x131)]&&allOrdersPlaced&&(_0xa5c392==0x0?(logger[_0x4087b6(0x108)](_0x4087b6(0x1cb)),_0xa5c392++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x4087b6(0x1f4))));}async function testAPI(_0x223c09){const _0x48b0e2=_0xb6fc61,_0xc56c3b=ccxt[_0x48b0e2(0xfb)][_0x223c09[_0x48b0e2(0xca)][_0x48b0e2(0x1f7)]()],_0x339d0e=new _0xc56c3b({'apiKey':_0x223c09[_0x48b0e2(0x141)],'secret':_0x223c09[_0x48b0e2(0x1bb)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x223c09[_0x48b0e2(0x1c5)])_0x339d0e[_0x48b0e2(0x212)]=_0x223c09[_0x48b0e2(0x1c5)];try{await _0x339d0e[_0x48b0e2(0x11f)]();}catch(_0x46b65e){throw _0x46b65e;}}function cloneDeep(_0x5e7e8f){const _0x317007=_0xb6fc61;return JSON[_0x317007(0xe0)](JSON['stringify'](_0x5e7e8f));}async function getPortfolio(_0x591581){const _0x1d8fea=_0xb6fc61;let _0x3bb513=[],_0x5554e7=[],_0x32af52=[],_0x56c43c;if(_0x591581[_0x1d8fea(0x141)]!==_0x1d8fea(0x164)||_0x591581['apiSecret']!==_0x1d8fea(0x164)||_0x591581[_0x1d8fea(0x1c5)]&&_0x591581['apiPassword']!==_0x1d8fea(0x164)){if(config['exchange']){if(_0x591581[_0x1d8fea(0x141)]==_0x1d8fea(0x164))_0x591581[_0x1d8fea(0x141)]=config['apiKey'];if(_0x591581[_0x1d8fea(0x1bb)]==_0x1d8fea(0x164))_0x591581['apiSecret']=config['apiSecret'];if(_0x591581['apiPassword']==_0x1d8fea(0x164))_0x591581['apiPassword']=config[_0x1d8fea(0x1c5)];try{await testAPI(_0x591581);}catch(_0x4a74d4){if(_0x4a74d4[_0x1d8fea(0xd6)]()['includes'](_0x1d8fea(0x127))){logger[_0x1d8fea(0x108)](_0x1d8fea(0x105)),proxyEmit(_0x1d8fea(0x1db),![]);return;}else{handleError(_0x4a74d4,'getPortfolio(0)');return;}}}await initExchange(_0x591581[_0x1d8fea(0xca)],_0x591581[_0x1d8fea(0x141)],_0x591581[_0x1d8fea(0x1bb)],_0x591581[_0x1d8fea(0x1c5)]);try{await loadSymbols();}catch(_0x4972b6){if(_0x4972b6['toString']()[_0x1d8fea(0x11b)](_0x1d8fea(0x127))){proxyEmit(_0x1d8fea(0x1db),![]);return;}else{handleError(_0x4972b6,_0x1d8fea(0x1ed));return;}}const _0x351e83=await getCoins(0x0,![],_0x591581[_0x1d8fea(0x1b8)]);_0x32af52=cloneDeep(_0x351e83[0x1]);}else{const _0x263810=await getCoins();_0x32af52=cloneDeep(_0x263810[0x1]);}if(_0x591581[_0x1d8fea(0x1b8)]=='')proxyEmit(_0x1d8fea(0x1db),_0x32af52);else{_0x32af52[_0x1d8fea(0x1cd)](_0x1fa6f3=>{const _0x406a86=_0x1d8fea;if(_0x1fa6f3['coin']!=_0x591581[_0x406a86(0x1b8)]&&allSymbols[_0x406a86(0x11b)](_0x1fa6f3[_0x406a86(0x1a6)]))_0x3bb513[_0x406a86(0x117)](_0x1fa6f3[_0x406a86(0x1a6)]);});if(_0x3bb513[_0x1d8fea(0xdd)]==0x0)logHistory('error',_0x1d8fea(0xd5));else{try{_0x5554e7=await getTickers(_0x3bb513);}catch(_0x4c776f){if(_0x4c776f[_0x1d8fea(0xd6)]()[_0x1d8fea(0x11b)]('AuthenticationError')){proxyEmit(_0x1d8fea(0x1db),![]);return;}else handleError(_0x4c776f,_0x1d8fea(0x1ba));}_0x32af52[_0x1d8fea(0x1cd)](_0x399a7d=>{const _0x5a25e4=_0x1d8fea;_0x399a7d['coin']!=_0x591581[_0x5a25e4(0x1b8)]?_0x5554e7[_0x399a7d[_0x5a25e4(0x1a6)]]?_0x56c43c=_0x399a7d['reverse']?0x1/_0x5554e7[_0x399a7d['symbol']]['last']:_0x5554e7[_0x399a7d[_0x5a25e4(0x1a6)]][_0x5a25e4(0xd9)]:_0x56c43c=0x0:_0x56c43c=0x1,_0x399a7d[_0x5a25e4(0x148)]=formatResult(_0x56c43c,0x8);}),proxyEmit(_0x1d8fea(0x1db),_0x32af52);}}}function truncateTradeAmount(_0x4bb16e,_0x20534d){let _0x19fd86=0x0;try{_0x19fd86=exchange['amountToPrecision'](_0x4bb16e,_0x20534d);}catch(_0x18c73f){}return _0x19fd86;}function checkMinimums(_0x280ceb){const _0x4a10f8=_0xb6fc61;let _0x3a1cde=!![];const _0x188915=!_0x280ceb['reverse']?markets[_0x280ceb['symbol']]['limits'][_0x4a10f8(0x9e)][_0x4a10f8(0xc3)]:markets[_0x280ceb[_0x4a10f8(0x1a6)]][_0x4a10f8(0x1e3)][_0x4a10f8(0x18c)][_0x4a10f8(0xc3)],_0xb38ec7=!_0x280ceb[_0x4a10f8(0x184)]?markets[_0x280ceb['symbol']][_0x4a10f8(0x1e3)][_0x4a10f8(0x18c)]['min']:markets[_0x280ceb['symbol']][_0x4a10f8(0x1e3)][_0x4a10f8(0x9e)][_0x4a10f8(0xc3)],_0x51c069=truncateTradeAmount(_0x280ceb[_0x4a10f8(0x1a6)],_0x280ceb[_0x4a10f8(0x165)]);_0x280ceb['trade']=_0x51c069;if(Math[_0x4a10f8(0x146)](_0x51c069)<_0x188915)_0x3a1cde=![];if(Math[_0x4a10f8(0x146)](_0x51c069)*_0x280ceb[_0x4a10f8(0xd9)]<_0xb38ec7)_0x3a1cde=![];if(_0x280ceb['side']==_0x4a10f8(0xe7)){let _0x38a17c=config['portfolio'][_0x4a10f8(0x170)](_0x118adb=>_0x118adb[_0x4a10f8(0x18a)]==_0x280ceb['coin']);if(_0x38a17c['offset']>0x0){if(Math[_0x4a10f8(0x146)](_0x51c069)>_0x280ceb[_0x4a10f8(0xdf)]-_0x38a17c[_0x4a10f8(0x193)])_0x3a1cde=![];}else{if(Math[_0x4a10f8(0x146)](_0x51c069)>_0x280ceb[_0x4a10f8(0xdf)])_0x3a1cde=![];}}if(_0x280ceb['side']=='buy'){let _0x44505d=config[_0x4a10f8(0x1db)][_0x4a10f8(0x170)](_0x1b62f3=>_0x1b62f3[_0x4a10f8(0x18a)]==config['basecoin']),_0x4a5103=currentCoins[_0x4a10f8(0x170)](_0x59e3a3=>_0x59e3a3[_0x4a10f8(0x18a)]==config['basecoin']);if(_0x44505d[_0x4a10f8(0x193)]>0x0){if(Math[_0x4a10f8(0x146)](_0x51c069)*_0x280ceb['last']>_0x4a5103[_0x4a10f8(0xdf)]-_0x44505d[_0x4a10f8(0x193)])_0x3a1cde=![];}else{if(Math[_0x4a10f8(0x146)](_0x51c069)*_0x280ceb['last']>_0x4a5103[_0x4a10f8(0xdf)])_0x3a1cde=![];}}return _0x3a1cde;}async function getBalances(_0x1000df=!![]){const _0x131d0c=_0xb6fc61;let _0x3e8b04=0x0,_0x5a2261;const _0x4bfc11=config[_0x131d0c(0x21b)];if(config[_0x131d0c(0x1ef)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x3cc15f=>{const _0x10e7a1=_0x131d0c;if(_0x3cc15f[_0x10e7a1(0x18a)]!=config['basecoin']){let _0x2658bd=global[_0x10e7a1(0x201)][noslash(_0x3cc15f['symbol'])];_0x5a2261=_0x3cc15f[_0x10e7a1(0x184)]?0x1/_0x2658bd:_0x2658bd;}else _0x5a2261=0x1;let _0x4d9913=_0x3cc15f[_0x10e7a1(0xdf)]*_0x5a2261;_0x3e8b04+=_0x4d9913,_0x3cc15f[_0x10e7a1(0xd9)]=formatResult(Number(_0x5a2261),0x8),_0x3cc15f[_0x10e7a1(0x1bc)]=_0x4d9913;}),currentCoins['forEach'](_0x2ef758=>{const _0x112f6a=_0x131d0c;let _0x1d07b6=config[_0x112f6a(0x1db)]['find'](_0x1a1539=>_0x1a1539[_0x112f6a(0x18a)]==_0x2ef758[_0x112f6a(0x18a)]),_0x5d07de=Number(_0x1d07b6[_0x112f6a(0xce)]),_0x5ed5b8=_0x2ef758[_0x112f6a(0x1bc)]/_0x3e8b04*0x64,_0x5d7f1a=_0x5d07de*_0x3e8b04/0x64/_0x2ef758['last']-_0x2ef758[_0x112f6a(0xdf)];_0x2ef758['distribution']=formatResult(_0x5ed5b8,0x3),_0x2ef758['target']=formatResult(_0x5d07de,0x3),_0x2ef758[_0x112f6a(0x165)]=formatResult(_0x5d7f1a,0x8),_0x2ef758[_0x112f6a(0x200)]='',_0x2ef758['valid']=![];if(_0x2ef758[_0x112f6a(0x18a)]!=config['basecoin']){if(_0x2ef758[_0x112f6a(0xce)]>_0x5d07de)_0x2ef758[_0x112f6a(0x200)]=_0x112f6a(0xe7),_0x2ef758['valid']=checkMinimums(_0x2ef758);else _0x2ef758[_0x112f6a(0xce)]<_0x5d07de&&(_0x2ef758[_0x112f6a(0x200)]=_0x112f6a(0xd3),_0x2ef758[_0x112f6a(0x12d)]=checkMinimums(_0x2ef758));}_0x2ef758[_0x112f6a(0xab)]=_0x2ef758['distribution']/_0x2ef758[_0x112f6a(0xf4)]-0x1;if(_0x2ef758[_0x112f6a(0x179)]==_0x112f6a(0x1ae)||_0x2ef758['orderstatus']=='canceled')_0x2ef758[_0x112f6a(0x179)]='none';}),currentCoins[_0x131d0c(0x161)]((_0x18d3f5,_0x438536)=>_0x18d3f5[_0x131d0c(0xab)]<_0x438536['delta']?0x1:_0x438536[_0x131d0c(0xab)]<_0x18d3f5[_0x131d0c(0xab)]?-0x1:0x0);const _0x87fda9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x87fda9[_0x131d0c(0x85)],'usd':_0x87fda9[_0x131d0c(0x10f)],'portfolio':JSON[_0x131d0c(0x125)](currentCoins),'threshold':_0x4bfc11},proxyEmit(_0x131d0c(0xf2),{'serverversion':serverversion,'balances':lastBalances});if(_0x1000df){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4bfc11});else{if(lockOrders==ORDERS[_0x131d0c(0xfc)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4bfc11});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3eec50=getNormalizedPerformance();getStartingBalances(_0x3eec50),emitPerformance(_0x3eec50);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5f53bb=getNormalizedPerformance();emitPerformance(_0x5f53bb),getStartingBalances(_0x5f53bb),logger[_0x131d0c(0x108)](_0x131d0c(0x119));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x11e133=_0xb6fc61;if(!lastBalances)return;let _0x3ee1b5=[],_0x5b0f5a,_0xd3feac=JSON[_0x11e133(0xe0)](lastBalances['portfolio']);_0xd3feac[_0x11e133(0x161)]((_0x288516,_0x5ec4fb)=>_0x288516[_0x11e133(0x18a)]>_0x5ec4fb[_0x11e133(0x18a)]?0x1:_0x5ec4fb['coin']>_0x288516['coin']?-0x1:0x0),_0xd3feac[_0x11e133(0x1cd)](_0x56cfe2=>{const _0x6e2a46=_0x11e133;let _0x275e10={'coin':_0x56cfe2[_0x6e2a46(0x18a)],'number':_0x56cfe2[_0x6e2a46(0xdf)],'price':_0x56cfe2[_0x6e2a46(0xd9)]};_0x3ee1b5[_0x6e2a46(0x117)](_0x275e10);});const _0x4c655e=await getFiat();_0x5b0f5a={'date':lastBalances[_0x11e133(0x172)][_0x11e133(0x208)]('\x20')[0x0],'eur':_0x4c655e[_0x11e133(0x85)],'usd':_0x4c655e[_0x11e133(0x10f)],'coins':_0x3ee1b5};let _0xc12811=dbPerformance[_0x11e133(0x122)](_0x11e133(0xa3))[_0x11e133(0x170)]({'date':_0x5b0f5a[_0x11e133(0x103)]})[_0x11e133(0x1bc)]();_0xc12811?_0x5b0f5a[_0x11e133(0x103)]!=config[_0x11e133(0x137)]&&dbPerformance[_0x11e133(0x122)](_0x11e133(0xa3))[_0x11e133(0x170)]({'date':_0x5b0f5a[_0x11e133(0x103)]})['assign'](_0x5b0f5a)[_0x11e133(0xc4)]():dbPerformance[_0x11e133(0x122)](_0x11e133(0xa3))['push'](_0x5b0f5a)[_0x11e133(0xc4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x31308e=_0xb6fc61;let _0x1db609=[];if(dbPerformance[_0x31308e(0xcb)](_0x31308e(0xa3))[_0x31308e(0x1bc)]()){let _0x1c3f97=dbPerformance[_0x31308e(0x122)](_0x31308e(0xa3))['cloneDeep']()[_0x31308e(0x144)](_0x333c09=>{const _0x5119f6=_0x31308e;if(_0x333c09['coins'][_0x5119f6(0xdd)]==0x0)return![];else return!![];})[_0x31308e(0x96)](_0x31308e(0x103))[_0x31308e(0x1bc)](),_0x18ab00=[...config[_0x31308e(0x1ca)]];_0x18ab00[_0x31308e(0x161)]((_0x1bda67,_0x354ae6)=>_0x1bda67[_0x31308e(0x103)]>_0x354ae6[_0x31308e(0x103)]?-0x1:_0x354ae6[_0x31308e(0x103)]>_0x1bda67[_0x31308e(0x103)]?0x1:0x0);let _0x43abf5=0x1,_0x474fb6=[],_0x3ad0cb=0x0;_0x1c3f97[_0x31308e(0xb0)]()[_0x31308e(0x184)]()[_0x31308e(0x1cd)]((_0x303b77,_0x293886)=>{const _0x199155=_0x31308e;if(_0x18ab00[_0x3ad0cb]){if(_0x1c3f97[_0x1c3f97[_0x199155(0xdd)]-_0x293886]&&_0x18ab00[_0x3ad0cb][_0x199155(0x103)]==_0x1c3f97[_0x1c3f97[_0x199155(0xdd)]-_0x293886]['date']){if(_0x293886<_0x1c3f97[_0x199155(0xdd)]){let _0x1fb2f3=0x0,_0x2c8957=0x0;_0x1c3f97[_0x1c3f97[_0x199155(0xdd)]-_0x293886][_0x199155(0x1f5)]['forEach'](_0x1ce6f3=>{const _0x183188=_0x199155;_0x2c8957+=_0x1ce6f3[_0x183188(0xdf)]*_0x1ce6f3[_0x183188(0x148)];}),_0x18ab00[_0x3ad0cb]['changes'][_0x199155(0x1cd)](_0x3fce66=>{const _0xf6ab0e=_0x199155;_0x1fb2f3+=_0x3fce66[_0xf6ab0e(0xdf)]*_0x3fce66[_0xf6ab0e(0x148)];}),_0x43abf5*=_0x1fb2f3/(_0x2c8957-_0x1fb2f3)+0x1;}_0x3ad0cb++;}}let _0x5f11c3=0x0;_0x303b77[_0x199155(0x1f5)][_0x199155(0x1cd)](_0x2c1137=>{const _0x4f933e=_0x199155;_0x5f11c3+=_0x2c1137[_0x4f933e(0xdf)]*_0x2c1137[_0x4f933e(0x148)];}),_0x474fb6[_0x1c3f97[_0x199155(0xdd)]-_0x293886-0x1]=_0x5f11c3*(_0x43abf5-0x1);});let _0x29f2cf=[];_0x18ab00=[...config[_0x31308e(0x1ca)]]||[];let _0x52f34c=0x0;_0x3ad0cb=0x0,_0x1c3f97['forEach']((_0x2b8806,_0x4d364d)=>{const _0x1b98ad=_0x31308e;if(_0x18ab00[_0x3ad0cb]){const _0x28b160=fns[_0x1b98ad(0xe0)](_0x18ab00[_0x3ad0cb][_0x1b98ad(0x103)],'yyyy/MM/dd',new Date()),_0x18f7ce=fns[_0x1b98ad(0xe0)](_0x2b8806[_0x1b98ad(0x103)],_0x1b98ad(0x1f0),new Date());if(fns[_0x1b98ad(0x187)](_0x28b160,_0x18f7ce)){let _0x167e7f=0x0;_0x18ab00[_0x3ad0cb][_0x1b98ad(0x19b)][_0x1b98ad(0x1cd)](_0x3498df=>{const _0x10b5bb=_0x1b98ad;!_0x29f2cf[_0x3498df[_0x10b5bb(0x18a)]]?_0x29f2cf[_0x3498df['coin']]=_0x3498df['number']:(_0x167e7f=_0x29f2cf[_0x3498df['coin']],_0x29f2cf[_0x3498df['coin']]+=_0x3498df[_0x10b5bb(0xdf)]);const _0x1093f9=_0x2b8806['coins'][_0x10b5bb(0x170)](_0x49d9eb=>_0x49d9eb['coin']==_0x3498df[_0x10b5bb(0x18a)]);(!_0x1093f9||_0x1093f9[_0x10b5bb(0xdf)]==0x0)&&(_0x52f34c+=(-_0x3498df[_0x10b5bb(0xdf)]-_0x167e7f)*_0x3498df['price']);}),_0x3ad0cb++;}}_0x2b8806['coins']['forEach']((_0x218d93,_0x594051)=>{const _0x1aa4e8=_0x1b98ad;_0x29f2cf[_0x218d93[_0x1aa4e8(0x18a)]]&&(_0x218d93[_0x1aa4e8(0x80)]=_0x29f2cf[_0x218d93[_0x1aa4e8(0x18a)]]);}),_0x1db609['push']({'date':_0x2b8806[_0x1b98ad(0x103)],'eur':_0x2b8806['eur'],'usd':_0x2b8806[_0x1b98ad(0x10f)],'offset':_0x474fb6[_0x4d364d],'netoffset':_0x52f34c,'coins':_0x2b8806[_0x1b98ad(0x1f5)]});});}return _0x1db609;}function emitPerformance(_0x187abf){const _0x3ff1ff=_0xb6fc61;_0x187abf['length']!==0x0?(proxyEmit(_0x3ff1ff(0x1af),_0x187abf),lastPerformanceEmitted=getDate()):proxyEmit(_0x3ff1ff(0x1af),[]);}function getPerf(_0x374c03,_0x1eb695){const _0x325e99=_0xb6fc61;let _0x4ea940=0x0,_0x173e59=0x0,_0x2d7c7a=0x0;_0x374c03['coins']['forEach'](_0x3175b9=>{const _0x6f0f95=_0xaae9;_0x4ea940+=_0x3175b9['number']*_0x3175b9[_0x6f0f95(0x148)];});_0x1eb695&&(_0x4ea940+=_0x374c03[_0x325e99(0x193)]);if(config[_0x325e99(0x1b8)]===_0x325e99(0x1fe)||config[_0x325e99(0x1b8)]===_0x325e99(0x9f)||config[_0x325e99(0x1b8)]==='PAXG')_0x173e59=_0x4ea940*_0x374c03[_0x325e99(0x85)],_0x2d7c7a=_0x4ea940*_0x374c03['usd'];else{if(usdBasecoins[_0x325e99(0x11b)](config['basecoin']))_0x173e59=_0x4ea940*_0x374c03[_0x325e99(0x85)]/_0x374c03[_0x325e99(0x10f)],_0x2d7c7a=_0x4ea940;else config[_0x325e99(0x1b8)]===_0x325e99(0xf6)&&(_0x173e59=_0x4ea940,_0x2d7c7a=_0x4ea940*_0x374c03[_0x325e99(0x10f)]/_0x374c03[_0x325e99(0x85)]);}return[_0x4ea940,_0x173e59,_0x2d7c7a];}function getKPIs(_0xdee154,_0x19259b=_0xb6fc61(0xf6)){const _0x29ca9d=_0xb6fc61,_0x5991c9=config['basecoin'],_0x19c93d=lastBalances,_0x562efc=currentCoins,_0x16197e=getNormalizedPerformance(),_0x4ada86=_0xdee154===_0x29ca9d(0x1b8)?_0x5991c9:_0xdee154===_0x29ca9d(0xea)||_0xdee154===_0x29ca9d(0x118)?_0x19259b:_0x29ca9d(0x178)+_0x5991c9,_0x16599e=_0xdee154===_0x29ca9d(0x1ab)?'Net\x20effect':_0xdee154===_0x29ca9d(0x118)?'Net\x20effect':_0x4ada86+_0x29ca9d(0x9b),_0x361fdb=_0xdee154===_0x29ca9d(0x1ab)||_0xdee154===_0x29ca9d(0x118)?_0x29ca9d(0x81):_0x4ada86+_0x29ca9d(0x11a);let _0x5e6585=0x0;_0x562efc[_0x29ca9d(0x1cd)](_0x47cc8f=>{const _0x4cd6e6=_0x29ca9d;_0x5e6585+=_0x47cc8f['number']*_0x47cc8f[_0x4cd6e6(0xd9)];});if(_0xdee154===_0x29ca9d(0xea)||_0xdee154===_0x29ca9d(0x118)){if(_0x5991c9===_0x29ca9d(0x1fe)||_0x5991c9===_0x29ca9d(0x9f)||_0x5991c9===_0x29ca9d(0x12f))_0x5e6585=_0x5e6585*(_0x19259b===_0x29ca9d(0xf6)?_0x19c93d[_0x29ca9d(0x85)]:_0x19c93d[_0x29ca9d(0x10f)]);else{if(usdBasecoins['includes'](_0x5991c9))_0x5e6585=_0x5e6585*(_0x19259b===_0x29ca9d(0xf6)?_0x19c93d['eur']/_0x19c93d[_0x29ca9d(0x10f)]:0x1);else _0x5991c9===_0x29ca9d(0xf6)&&(_0x5e6585=_0x5e6585*(_0x19259b===_0x29ca9d(0xf6)?0x1:_0x19c93d['usd']/_0x19c93d[_0x29ca9d(0x85)]));}}let _0x18559f;if(_0x5e6585!==0x0){if(_0xdee154===_0x29ca9d(0x1b8))_0x18559f=(_0x5e6585/startingBalances[_0x29ca9d(0x1b8)]-0x1)*0x64;else{if(_0x19259b===_0x29ca9d(0xf6))_0x18559f=(_0x5e6585/startingBalances[_0x29ca9d(0x85)]-0x1)*0x64;else _0x18559f=(_0x5e6585/startingBalances[_0x29ca9d(0x10f)]-0x1)*0x64;}let _0x435dae=0x0;if(startingBalances['coins'])_0x562efc[_0x29ca9d(0x1cd)](_0x27f44f=>{const _0x433d23=_0x29ca9d;let _0x33b46a=startingBalances['coins'][_0x433d23(0x170)](_0x4a758f=>_0x4a758f['coin']===_0x27f44f[_0x433d23(0x18a)]);if(_0x33b46a&&_0x33b46a[_0x433d23(0x18a)]&&_0x27f44f[_0x433d23(0xdf)]!==0x0)_0x435dae+=_0x33b46a[_0x433d23(0xdf)]*_0x27f44f[_0x433d23(0xd9)];});let _0x1166d0=0x0;if(_0x16197e[_0x29ca9d(0xdd)]!==0x0){let _0x2d6522=_0x16197e[_0x16197e['length']-0x1];_0x1166d0=_0x2d6522[_0x29ca9d(0x1c7)];}_0x435dae-=_0x1166d0;_0xdee154==='net-basecoin'&&(_0x18559f=(_0x5e6585-_0x435dae)/startingBalances[_0x29ca9d(0x1b8)]*0x64,_0x5e6585=_0x5e6585-_0x435dae);if(_0xdee154===_0x29ca9d(0x118)){let _0x58f4a8=_0x19259b===_0x29ca9d(0xf6)?startingBalances[_0x29ca9d(0x85)]:startingBalances[_0x29ca9d(0x10f)];if(_0x5991c9==='BTC'||_0x5991c9==='ETH'||_0x5991c9===_0x29ca9d(0x12f))_0x435dae=_0x19259b==='EUR'?_0x435dae*_0x19c93d[_0x29ca9d(0x85)]:_0x435dae*_0x19c93d[_0x29ca9d(0x10f)];else{if(usdBasecoins[_0x29ca9d(0x11b)](_0x5991c9))_0x435dae=_0x19259b===_0x29ca9d(0xf6)?_0x435dae*_0x19c93d[_0x29ca9d(0x85)]/_0x19c93d[_0x29ca9d(0x10f)]:_0x435dae;else _0x5991c9==='EUR'&&(_0x435dae=_0x19259b===_0x29ca9d(0xf6)?_0x435dae:_0x435dae*_0x19c93d[_0x29ca9d(0x10f)]/_0x19c93d[_0x29ca9d(0x85)]);}_0x18559f=(_0x5e6585-_0x435dae)/_0x58f4a8*0x64,_0x5e6585=_0x5e6585-_0x435dae;}if(_0x18559f){if(_0x18559f<0x64)_0x18559f=_0x18559f['toFixed'](0x2);else{if(_0x18559f<0x3e8)_0x18559f=_0x18559f[_0x29ca9d(0x1e8)](0x1);else _0x18559f=_0x18559f[_0x29ca9d(0x1e8)](0x0);}}else _0x18559f=Number('0')['toFixed'](0x2);if(_0x5e6585){if(Math[_0x29ca9d(0x146)](_0x5e6585)<0.000001)_0x5e6585=_0x5e6585[_0x29ca9d(0x1e8)](0x2);else{if(Math[_0x29ca9d(0x146)](_0x5e6585)<0.1)_0x5e6585=_0x5e6585[_0x29ca9d(0x1e8)](0x6);else{if(Math[_0x29ca9d(0x146)](_0x5e6585)<0x1)_0x5e6585=_0x5e6585[_0x29ca9d(0x1e8)](0x5);else{if(Math['abs'](_0x5e6585)<0xa)_0x5e6585=_0x5e6585[_0x29ca9d(0x1e8)](0x4);else{if(Math[_0x29ca9d(0x146)](_0x5e6585)<0x64)_0x5e6585=_0x5e6585['toFixed'](0x3);else{if(Math[_0x29ca9d(0x146)](_0x5e6585)<0x3e8)_0x5e6585=_0x5e6585[_0x29ca9d(0x1e8)](0x2);else _0x5e6585=_0x5e6585['toFixed'](0x2);}}}}}}else _0x5e6585=Number('0')[_0x29ca9d(0x1e8)](0x2);}else _0x18559f=Number('0')[_0x29ca9d(0x1e8)](0x2);return{'value':_0x5e6585,'change':_0x18559f,'leftTxt':_0x16599e,'rightTxt':_0x361fdb};}async function getStartingBalances(_0x2e6c4c,_0x95aef5=!![]){const _0x58c6f6=_0xb6fc61;if(_0x2e6c4c[_0x58c6f6(0xdd)]!==0x0){const [_0x1187fa,_0x3262ba,_0x1bce4e]=getPerf(_0x2e6c4c[0x0],!![]);let _0x516be9=[];config['portfolio'][_0x58c6f6(0x1cd)](_0x18e5dc=>{const _0x405e59=_0x58c6f6;let _0x51695c=0x0,_0x1f76e3;config[_0x405e59(0x1ca)][_0x405e59(0x1cd)](_0x31b29c=>{const _0x2a0106=_0x405e59;let _0x3a6dae=_0x31b29c['changes'][_0x2a0106(0x170)](_0x4a17b7=>_0x4a17b7[_0x2a0106(0x18a)]==_0x18e5dc[_0x2a0106(0x18a)]);if(_0x3a6dae){_0x51695c+=_0x3a6dae[_0x2a0106(0xdf)];if(!_0x1f76e3)_0x1f76e3=_0x3a6dae['price'];}}),_0x516be9[_0x405e59(0x117)]({'coin':_0x18e5dc['coin'],'number':_0x51695c,'initialprice':_0x1f76e3});});const _0x108018={'basecoin':_0x1187fa,'eur':_0x3262ba,'usd':_0x1bce4e,'coins':_0x516be9};if(_0x95aef5)proxyEmit('starting-balances',_0x108018);startingBalances=_0x108018;}}function headlessMode(_0x34c6e6){const _0x3be588=_0xb6fc61;let _0x434074=_0x34c6e6[_0x3be588(0x1db)],_0x463f0c=_0x34c6e6[_0x3be588(0x21b)],_0x1bbe35=[];for(let _0x33226a of _0x434074){if(_0x33226a[_0x3be588(0x18a)]!=config[_0x3be588(0x1b8)]){if(_0x33226a['delta']>=_0x463f0c/0x64){if(_0x33226a['valid'])_0x1bbe35[_0x3be588(0x117)](_0x33226a);}else{if(_0x33226a['delta']<=-_0x463f0c/0x64){if(_0x33226a['valid'])_0x1bbe35[_0x3be588(0x117)](_0x33226a);}}}}_0x1bbe35[_0x3be588(0xdd)]>0x0&&(lockOrders==ORDERS[_0x3be588(0xfc)]&&!coolingDown&&_0x1bbe35[_0x3be588(0x1cd)](_0x2b3a70=>{const _0x3a145c=_0x3be588;logger[_0x3a145c(0x108)](_0x3a145c(0x1ac)+_0x2b3a70[_0x3a145c(0x18a)]+'\x20'+_0x2b3a70[_0x3a145c(0xdf)]+'\x20'+_0x2b3a70['last']+'\x20'+_0x2b3a70[_0x3a145c(0xce)]+'%\x20'+_0x2b3a70[_0x3a145c(0xf4)]+'%\x20'+(0x64*_0x2b3a70[_0x3a145c(0xab)])['toFixed'](0x2)+'%\x20('+_0x463f0c[_0x3a145c(0x1e8)](0x2)+'%)');}),placeOrder(_0x1bbe35));}function notifyBalance(_0x3521b0){const _0x34196d=_0xb6fc61;let _0x28b363=_0x3521b0[_0x34196d(0x1db)],_0x57af99=_0x3521b0[_0x34196d(0x21b)],_0x4e465d=[];for(let _0x11f17e of _0x28b363){if(_0x11f17e[_0x34196d(0x18a)]!=config['basecoin']){if(_0x11f17e[_0x34196d(0xab)]>=_0x57af99/0x64){if(_0x11f17e[_0x34196d(0x12d)])_0x4e465d[_0x34196d(0x117)](_0x11f17e);}else{if(_0x11f17e['delta']<=-_0x57af99/0x64){if(_0x11f17e['valid'])_0x4e465d['push'](_0x11f17e);}}}}if(_0x4e465d[_0x34196d(0xdd)]>0x0){let _0x136106=_0x4e465d[_0x34196d(0x1a9)](_0x2853f8=>_0x2853f8['coin']);_0x136106[_0x34196d(0x161)]();let _0x453710=_0x136106['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x34196d(0x14c),_0x34196d(0x16e));lastCoinsToBalance=_0x453710;}}function symbolToCoin(_0x1fb811){const _0x1c0bda=_0xb6fc61;let _0x431662;if(_0x1fb811[_0x1c0bda(0x11b)]('/'+config[_0x1c0bda(0x1b8)]))_0x431662=_0x1fb811[_0x1c0bda(0x13a)]('/'+config[_0x1c0bda(0x1b8)],'');if(_0x1fb811['includes'](config['basecoin']+'/'))_0x431662=_0x1fb811[_0x1c0bda(0x13a)](config[_0x1c0bda(0x1b8)]+'/','');return _0x431662;}async function unlockOrders(){const _0x409b49=_0xb6fc61;if(allOrdersPlaced&&lockOrders==ORDERS[_0x409b49(0x131)]){logger[_0x409b49(0x108)](_0x409b49(0x7d)),lockOrders=ORDERS[_0x409b49(0x18b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4606fc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4606fc,validateOrdersState=_0x409b49(0x80),persistOpenOrders([]),lockOrders=ORDERS[_0x409b49(0xfc)],logger[_0x409b49(0x108)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x29f21f){const _0x456662=_0xb6fc61;if(_0x29f21f)validateOrdersState=_0x29f21f;logger['debug'](_0x456662(0x19f)+validateOrdersState+_0x456662(0xd4)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x456662(0x21d):_0x456662(0x19d)));let _0x51ccd2=[],_0x2b8055=config[_0x456662(0x135)]==_0x456662(0x1e0)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x456662(0x1a4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x456662(0x108)](_0x456662(0x82)+validateOrdersState),lastOrders[_0x456662(0x1cd)](_0x833ce5=>{const _0x5d73ce=_0x456662;let _0x5a232b=![];_0x833ce5[_0x5d73ce(0x1ae)]>0x0&&(_0x5a232b=!![]),_0x51ccd2[_0x5d73ce(0x117)](_0x5a232b),_0x5a232b&&config['ordertype']!=_0x5d73ce(0x1e0)&&logHistory(_0x5d73ce(0x12a),'Order\x20filled:\x20'+_0x833ce5[_0x5d73ce(0x1a6)]+'\x20'+_0x833ce5[_0x5d73ce(0x200)]+'\x20#'+formatResult(_0x833ce5[_0x5d73ce(0x1ae)],0x8)+'\x20@'+formatResult(_0x833ce5[_0x5d73ce(0x148)],0x8));}),_0x51ccd2[_0x456662(0x1cd)]((_0xa28a23,_0x428e40)=>{const _0x416232=_0x456662;if(_0xa28a23)lastOrders[_0x416232(0x9d)](_0x428e40,0x1);}),persistOpenOrders(lastOrders);const _0x249bb5=coolingDown?_0x456662(0x180):_0x456662(0xa1);if(validateOrdersState=='initial'){validateOrdersState=_0x456662(0x181);if(_0x51ccd2[_0x456662(0x11b)](![])){if(config[_0x456662(0x135)]==_0x456662(0x1e0)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x456662(0x181)){if(_0x51ccd2[_0x456662(0x11b)](![])){}else{if(allOrdersPlaced){if(config[_0x456662(0x135)]==_0x456662(0x1e0)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x456662(0x14f))_0x51ccd2[_0x456662(0x11b)](![])&&(config[_0x456662(0x135)]=='market'?logHistory(_0x456662(0x19e),_0x456662(0xc5)+Math[_0x456662(0x16f)](_0x2b8055*validateOrderInterval/0xea60)+_0x456662(0x21e)+_0x249bb5):(await cancelOrders(),logHistory(_0x456662(0x19e),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x456662(0x16f)](_0x2b8055*validateOrderInterval/0xea60)+_0x456662(0x21e)+_0x249bb5))),await unlockOrders();else{if(validateOrdersState==_0x456662(0x1f4)){if(config[_0x456662(0x135)]!=_0x456662(0x1e0))logHistory(_0x456662(0x19e),_0x456662(0x1b3)+_0x249bb5);await unlockOrders();}}}}}async function cancelOrders(){const _0x568260=_0xb6fc61;lastOrders[_0x568260(0x1cd)](async _0x25025c=>{const _0x15720e=_0x568260;try{const _0x8ab7f8=await exchange[_0x15720e(0x1d8)](_0x25025c['orderId'],_0x25025c[_0x15720e(0x1a6)]);}catch(_0x6f5df0){if(_0x6f5df0[_0x15720e(0xd6)]()[_0x15720e(0x11b)](_0x15720e(0x86))){}else await handleError(_0x6f5df0,_0x15720e(0xba));}});}async function initCoinResults(_0x1d4755){const _0x3c231a=_0xb6fc61;_0x1d4755?logger['debug'](_0x3c231a(0x1a1)+_0x1d4755):logger['debug'](_0x3c231a(0xcc)),config['portfolio'][_0x3c231a(0x1cd)](_0xedad40=>{const _0x2f94b0=_0x3c231a;if(!_0xedad40[_0x2f94b0(0x12b)]&&_0xedad40[_0x2f94b0(0x18a)]!=config[_0x2f94b0(0x1b8)]){const _0x238851=currentCoins['find'](_0x36530b=>_0x36530b[_0x2f94b0(0x18a)]==_0xedad40[_0x2f94b0(0x18a)]),_0x369daa=global['ticker'][noslash(_0xedad40[_0x2f94b0(0x1a6)])];let _0x2192b=_0x238851?_0x238851[_0x2f94b0(0xdf)]:null,_0xe87fb8=_0xedad40[_0x2f94b0(0x184)]?0x1/_0x369daa:_0x369daa,_0x195f73;config[_0x2f94b0(0x1ca)][_0x2f94b0(0x1cd)](_0x5c9d70=>{const _0x378ff6=_0x2f94b0;!_0x195f73&&(_0x195f73=_0x5c9d70[_0x378ff6(0x19b)][_0x378ff6(0x170)](_0x49077e=>_0x49077e[_0x378ff6(0x18a)]==_0xedad40[_0x378ff6(0x18a)]),_0x195f73&&(_0x2192b=_0x195f73['number'],_0xe87fb8=_0x195f73[_0x378ff6(0x148)]));});let _0x94eb76=dbCoinResults[_0x2f94b0(0x122)](_0x2f94b0(0x1f5))[_0x2f94b0(0x170)]({'coin':_0xedad40[_0x2f94b0(0x18a)]})[_0x2f94b0(0x1bc)]();if(!_0x94eb76){const _0x5ba85b={'coin':_0xedad40[_0x2f94b0(0x18a)],'number':_0x2192b,'breakeven':_0xe87fb8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f94b0(0x122)](_0x2f94b0(0x1f5))[_0x2f94b0(0x117)](_0x5ba85b)['write']();}else{if(_0x1d4755&&_0xedad40[_0x2f94b0(0x18a)]==_0x1d4755){const _0x266dc7={'coin':_0xedad40[_0x2f94b0(0x18a)],'number':_0x2192b,'breakeven':_0xe87fb8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f94b0(0x122)](_0x2f94b0(0x1f5))[_0x2f94b0(0x170)]({'coin':_0xedad40[_0x2f94b0(0x18a)]})['assign'](_0x266dc7)[_0x2f94b0(0xc4)]();}}}});}async function updateCoinResults(_0x36a8bc,_0x22de3b=![]){const _0x584505=_0xb6fc61;let _0x22c7f3,_0x32c26c,_0x38e48a,_0x32befa,_0x45070b,_0x44bbcf,_0x4940f0=dbCoinResults['get']('coins')[_0x584505(0x170)]({'coin':_0x36a8bc['coin']})[_0x584505(0x1bc)](),_0x234165=![];_0x4940f0&&Object[_0x584505(0xe4)](_0x4940f0)[_0x584505(0x1cd)](([_0x18bc1c,_0x48d04f])=>{if(_0x48d04f==null)_0x234165=!![];});(!_0x4940f0||_0x234165)&&(await initCoinResults(_0x36a8bc[_0x584505(0x18a)]),_0x4940f0=dbCoinResults[_0x584505(0x122)](_0x584505(0x1f5))[_0x584505(0x170)]({'coin':_0x36a8bc[_0x584505(0x18a)]})[_0x584505(0x1bc)]());_0x36a8bc[_0x584505(0x184)]&&(_0x44bbcf={'filled':_0x36a8bc[_0x584505(0x1ae)]*_0x36a8bc[_0x584505(0x148)],'amount':_0x36a8bc[_0x584505(0x1ae)]*_0x36a8bc[_0x584505(0x148)],'side':_0x36a8bc[_0x584505(0x200)]==_0x584505(0xe7)?'buy':_0x584505(0xe7),'price':0x1/_0x36a8bc[_0x584505(0x148)]},_0x36a8bc={..._0x36a8bc,..._0x44bbcf});_0x22de3b?_0x32c26c=_0x36a8bc[_0x584505(0x200)]==_0x584505(0xd3)?_0x4940f0[_0x584505(0xdf)]+_0x36a8bc[_0x584505(0x1ae)]:_0x4940f0[_0x584505(0xdf)]-_0x36a8bc[_0x584505(0x1ae)]:_0x32c26c=await getCoinNumber(_0x36a8bc[_0x584505(0x18a)]);if(_0x36a8bc[_0x584505(0x11d)]&&_0x36a8bc[_0x584505(0x11d)]['currency']==config['basecoin'])_0x22c7f3=_0x36a8bc[_0x584505(0x11d)][_0x584505(0x18c)];else{if(_0x36a8bc['fee']&&_0x36a8bc[_0x584505(0x11d)][_0x584505(0x1e6)]==_0x584505(0x1a5)&&!_0x22de3b&&config[_0x584505(0x1b8)]!=_0x584505(0x12f))_0x22c7f3=_0x36a8bc[_0x584505(0x11d)][_0x584505(0x18c)]*global['ticker'][_0x584505(0x1a5)+config[_0x584505(0x1b8)]];else _0x22c7f3=defaultFee*_0x36a8bc[_0x584505(0x1ae)]*_0x36a8bc[_0x584505(0x148)];}_0x36a8bc[_0x584505(0x200)]==_0x584505(0xd3)?(_0x38e48a=_0x32c26c!=0x0?(_0x4940f0['breakeven']*_0x4940f0[_0x584505(0xdf)]+_0x36a8bc['price']*(_0x32c26c-_0x4940f0[_0x584505(0xdf)])+_0x22c7f3)/_0x32c26c:0x0,_0x32befa=_0x4940f0[_0x584505(0x10c)]):(_0x38e48a=_0x32c26c!=0x0?(_0x4940f0[_0x584505(0x11c)]*_0x4940f0[_0x584505(0xdf)]-_0x36a8bc[_0x584505(0x148)]*(_0x4940f0['number']-_0x32c26c)+_0x22c7f3)/_0x32c26c:0x0,_0x32befa=_0x4940f0[_0x584505(0x10c)]+(_0x36a8bc[_0x584505(0x148)]-_0x4940f0[_0x584505(0x11c)])*_0x36a8bc[_0x584505(0x1ae)]);_0x45070b=(_0x36a8bc['price']-_0x38e48a-_0x22c7f3/_0x36a8bc['filled'])*_0x32c26c;let _0x40a3da={'coin':_0x36a8bc[_0x584505(0x18a)],'number':_0x32c26c,'breakeven':formatResult(_0x38e48a,0x8),'realized':formatResult(_0x32befa,0x8),'unrealized':formatResult(_0x45070b,0x8),'fees':formatResult(_0x4940f0[_0x584505(0x13c)]+_0x22c7f3,0x8),'sells':_0x36a8bc[_0x584505(0x200)]=='sell'?_0x4940f0[_0x584505(0x15f)]+0x1:_0x4940f0[_0x584505(0x15f)],'buys':_0x36a8bc['side']==_0x584505(0xd3)?_0x4940f0[_0x584505(0x95)]+0x1:_0x4940f0[_0x584505(0x95)]};dbCoinResults['get'](_0x584505(0x1f5))[_0x584505(0x170)]({'coin':_0x36a8bc[_0x584505(0x18a)]})[_0x584505(0x1b2)](_0x40a3da)[_0x584505(0xc4)]();if(!_0x22de3b){if(_0x36a8bc[_0x584505(0x11d)]&&_0x36a8bc['fee'][_0x584505(0x1e6)]==_0x584505(0x1a5)){const _0x39c9c4=currentCoins[_0x584505(0x170)](_0x347ad1=>_0x347ad1['coin']==_0x584505(0x1a5));if(_0x39c9c4){let _0x48b6f3=dbCoinResults[_0x584505(0x122)](_0x584505(0x1f5))[_0x584505(0x170)]({'coin':_0x584505(0x1a5)})[_0x584505(0x1bc)]();_0x40a3da={..._0x48b6f3,'number':_0x39c9c4[_0x584505(0xdf)]},dbCoinResults[_0x584505(0x122)]('coins')['find']({'coin':'BNB'})['assign'](_0x40a3da)[_0x584505(0xc4)]();}}}}async function placeOrder(_0x18b11c){const _0x172291=_0xb6fc61,_0x575a64=config[_0x172291(0x135)]==_0x172291(0x1e0)?_0x172291(0x1e0):_0x172291(0x8c);if(lockOrders==ORDERS[_0x172291(0xfc)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x172291(0x131)],allOrdersPlaced=![],validateOrdersState=_0x172291(0x80);let _0x2b5c90=![];lastOrders=[];for(const _0x22b225 of _0x18b11c){let _0x36cf92,_0x563a45,_0x54f137,_0x27fdd9,_0x57b2f6,_0x5cbce6=_0x22b225['symbol'];try{const _0x1daa5f=await exchange[_0x172291(0x169)](_0x5cbce6);_0x36cf92=_0x22b225['reverse']?0x1/_0x22b225['last']:_0x22b225['last'],_0x563a45=_0x1daa5f['bid'],_0x54f137=_0x1daa5f['ask'];_0x22b225[_0x172291(0x184)]?(_0x27fdd9=_0x22b225[_0x172291(0x200)]==_0x172291(0xd3)?_0x172291(0xe7):_0x172291(0xd3),_0x57b2f6=Math[_0x172291(0x146)](_0x22b225[_0x172291(0x165)])/_0x36cf92):(_0x27fdd9=_0x22b225[_0x172291(0x200)],_0x57b2f6=Math['abs'](_0x22b225['trade']));_0x575a64==_0x172291(0x8c)&&(config[_0x172291(0x135)]==_0x172291(0xdb)&&(_0x36cf92=_0x27fdd9==_0x172291(0xd3)?_0x563a45:_0x54f137),config[_0x172291(0x135)]==_0x172291(0x217)&&(_0x36cf92=_0x27fdd9==_0x172291(0xd3)?_0x54f137:_0x563a45));_0x57b2f6=formatResult(_0x57b2f6,0x8),_0x36cf92=formatResult(_0x36cf92,0x8);const _0x28a611=_0x27fdd9==_0x172291(0xe7)?config[_0x172291(0xb3)]?String['fromCodePoint']('0x'+config[_0x172291(0xb3)])+'\x20':'':config[_0x172291(0xe2)]?String['fromCodePoint']('0x'+config[_0x172291(0xe2)])+'\x20':'',_0x1cf73f=_0x575a64=='market'?_0x172291(0xb8):config[_0x172291(0x135)]=='limit-high'?_0x172291(0x15d):_0x172291(0xd8),_0x4a1177=(Math[_0x172291(0xc8)](Math[_0x172291(0x100)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x172291(0x117)]({'customId':_0x4a1177,'symbol':_0x5cbce6,'coin':_0x22b225[_0x172291(0x18a)],'amount':_0x57b2f6,'price':_0x36cf92,'side':_0x27fdd9,'reverse':_0x22b225[_0x172291(0x184)],'filled':0x0});if(_0x575a64==_0x172291(0x1e0))logHistory(_0x172291(0x12a),''+_0x28a611+_0x1cf73f+_0x172291(0x1c3)+_0x5cbce6+'\x20'+_0x27fdd9+'\x20#'+formatResult(_0x57b2f6,0x8)+'\x20@'+formatResult(_0x36cf92,0x8));else logHistory(_0x172291(0x12a),''+_0x28a611+_0x1cf73f+'\x20order:\x20'+_0x5cbce6+'\x20'+_0x27fdd9+'\x20#'+formatResult(_0x57b2f6,0x8)+'\x20@'+formatResult(_0x36cf92,0x8));let _0x4dfe40;_0x575a64=='market'?_0x27fdd9=='buy'&&[_0x172291(0x21a),_0x172291(0x15a),'Cex',_0x172291(0x188),'Huobipro']['includes'](config[_0x172291(0xca)])?_0x4dfe40=await exchange[_0x172291(0x1c9)](_0x5cbce6,_0x575a64,_0x27fdd9,_0x57b2f6,_0x36cf92):_0x4dfe40=await exchange[_0x172291(0x1c9)](_0x5cbce6,_0x575a64,_0x27fdd9,_0x57b2f6,undefined):_0x4dfe40=await exchange[_0x172291(0x1c9)](_0x5cbce6,_0x575a64,_0x27fdd9,_0x57b2f6,_0x36cf92);logger['debug'](_0x172291(0xc9)+_0x4dfe40['id']+'\x20|\x20Custom\x20ID:\x20'+_0x4a1177);const _0x17908e=lastOrders['length']-0x1;if(_0x17908e>=0x0&&lastOrders[_0x17908e][_0x172291(0xa8)]==_0x4a1177){lastOrders[_0x17908e]['orderId']=_0x4dfe40['id'];if(_0x4dfe40[_0x172291(0x9e)])lastOrders[_0x17908e]['amount']=_0x4dfe40[_0x172291(0x9e)];if(_0x4dfe40[_0x172291(0x148)])lastOrders[_0x17908e][_0x172291(0x148)]=_0x4dfe40[_0x172291(0x148)];lastOrders[_0x17908e][_0x172291(0x11d)]=_0x4dfe40[_0x172291(0x11d)];}if(config[_0x172291(0x163)]!=0x0){let _0x37360a=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x37360a=cooldownTracker['shift']();const _0x5d9e76=getTimeStamp();cooldownTracker['push'](_0x5d9e76);if(_0x37360a){const _0x3cb69b=fns['differenceInSeconds'](new Date(_0x5d9e76),new Date(_0x37360a));if(_0x3cb69b<cooldownInterval){logHistory('error','Executed\x20'+config[_0x172291(0x163)]+_0x172291(0xe6)+cooldownInterval/0x3c+_0x172291(0xdc)+cooldownPeriod/(0xe10*0x3e8)+_0x172291(0x114)),coolingDown=!![];break;}}}}catch(_0x318dda){if(_0x318dda[_0x172291(0xd6)]()[_0x172291(0x11b)](_0x172291(0xde)))lastOrders=lastOrders['filter'](_0x2dcb45=>_0x2dcb45[_0x172291(0x1a6)]!=_0x5cbce6),logHistory(_0x172291(0x1d6),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5cbce6),_0x2b5c90=!![];else{if(_0x318dda[_0x172291(0xd6)]()[_0x172291(0x11b)](_0x172291(0x150)))lastOrders=lastOrders['filter'](_0x30199a=>_0x30199a[_0x172291(0x1a6)]!=_0x5cbce6),logHistory(_0x172291(0x1d6),_0x172291(0x216)+_0x5cbce6),_0x2b5c90=!![];else{if(_0x318dda['toString']()[_0x172291(0x11b)]('InvalidOrder'))lastOrders=lastOrders[_0x172291(0x144)](_0x5c0a12=>_0x5c0a12[_0x172291(0x1a6)]!=_0x5cbce6),logHistory(_0x172291(0x1d6),_0x172291(0xaf)+_0x5cbce6),logger['debug'](_0x318dda),_0x2b5c90=!![];else _0x318dda[_0x172291(0xd6)]()[_0x172291(0x11b)](_0x172291(0x1ce))?(lastOrders=lastOrders[_0x172291(0x144)](_0x573539=>_0x573539['symbol']!=_0x5cbce6),logHistory(_0x172291(0x1d6),_0x172291(0x203)+_0x5cbce6),_0x2b5c90=!![]):(lastOrders=lastOrders[_0x172291(0x144)](_0x4c64aa=>_0x4c64aa[_0x172291(0x1a6)]!=_0x5cbce6),await handleError(_0x318dda,'placeOrder()',_0x5cbce6));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x172291(0xdd)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4ad5ab=config['ordertype']==_0x172291(0x1e0)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x318677=_0x172291;validateOrders(_0x318677(0x14f));},_0x4ad5ab);}else unlockOrders();_0x2b5c90&&config[_0x172291(0x1ef)]&&(logHistory(_0x172291(0x1d6),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x172291(0x19e),_0x172291(0x1e9)));}else{if(coolingDown)!config[_0x172291(0x1ef)]&&logHistory(_0x172291(0x1d6),_0x172291(0x124));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x172291(0x1ef)]&&(config[_0x172291(0x135)]==_0x172291(0x1e0)?logHistory(_0x172291(0x1d6),_0x172291(0x1b4)):logHistory(_0x172291(0x1d6),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1bdaf9){const _0x144475=_0xb6fc61,_0x129a34={...config,'openOrders':_0x1bdaf9};let _0x3ed3de=dbConfig[_0x144475(0x122)](_0x144475(0x1a7))[_0x144475(0x170)]({'botID':botID})[_0x144475(0x1bc)]();_0x3ed3de&&dbConfig['get'](_0x144475(0x1a7))[_0x144475(0x170)]({'botID':botID})[_0x144475(0x1b2)](_0x129a34)[_0x144475(0xc4)]();}function restoreOrders(){const _0x10b519=_0xb6fc61;let _0x5efd8d;config[_0x10b519(0x1e7)]&&allOpenOrders[_0x10b519(0x1cd)](_0x2135a9=>{const _0x5ab062=_0x10b519,_0x30bf24=config[_0x5ab062(0x1e7)][_0x5ab062(0x170)](_0x368a79=>_0x368a79[_0x5ab062(0xff)]==_0x2135a9['id']);_0x30bf24&&(lastOrders[_0x5ab062(0x117)](_0x30bf24),_0x5efd8d=_0x2135a9[_0x5ab062(0x1c2)]);});if(lastOrders[_0x10b519(0xdd)]>0x0){lockOrders=ORDERS[_0x10b519(0x131)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1c4755=new Date()[_0x10b519(0x17f)](),_0x2200bd=config[_0x10b519(0x135)]==_0x10b519(0x1e0)?validateOrderTimeout*0x3c*0x3e8:config[_0x10b519(0x1a4)]*0x3c*0x3e8;if(_0x5efd8d+_0x2200bd>_0x1c4755){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xe13c68=_0x10b519;validateOrders(_0xe13c68(0x14f));},_0x5efd8d+_0x2200bd-_0x1c4755);}else validateOrders(_0x10b519(0x14f));}}async function sendMetricsTelegram(){const _0x4e85d2=_0xb6fc61;if(!coinsLoaded){process['send']({'telegrammsg':_0x4e85d2(0x1cc)},_0x270e08=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5f0deb='';if(config[_0x4e85d2(0x1d0)])_0x5f0deb='<b>'+config[_0x4e85d2(0x1a0)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x5f0deb=_0x4e85d2(0x88)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4cac74=getKPIs(_0x4e85d2(0x1b8)),_0x2d2e92=getKPIs(_0x4e85d2(0xea),config[_0x4e85d2(0xea)]),_0x4bdfe1=getKPIs('net-basecoin'),_0x4a7025=getKPIs(_0x4e85d2(0x118),config[_0x4e85d2(0xea)]);_0x5f0deb+=_0x4e85d2(0x116),_0x5f0deb+=_0x4cac74['leftTxt']+_0x4e85d2(0x1fb)+_0x4cac74[_0x4e85d2(0x1bc)]+'\x0a',_0x5f0deb+=_0x4cac74[_0x4e85d2(0x214)]+':\x20'+_0x4cac74[_0x4e85d2(0x15c)]+'%\x0a',_0x5f0deb+=_0x2d2e92['leftTxt']+_0x4e85d2(0x1fb)+_0x2d2e92[_0x4e85d2(0x1bc)]+'\x0a',_0x5f0deb+=_0x2d2e92[_0x4e85d2(0x214)]+':\x20'+_0x2d2e92[_0x4e85d2(0x15c)]+'%\x0a',_0x5f0deb+=_0x4bdfe1[_0x4e85d2(0x17e)]+':\x20'+_0x4bdfe1[_0x4e85d2(0x1bc)]+'\x20('+config[_0x4e85d2(0x1b8)]+')\x0a',_0x5f0deb+=_0x4bdfe1['rightTxt']+':\x20'+_0x4bdfe1['change']+_0x4e85d2(0x91)+config[_0x4e85d2(0x1b8)]+')\x0a',_0x5f0deb+=_0x4a7025[_0x4e85d2(0x17e)]+':\x20'+_0x4a7025[_0x4e85d2(0x1bc)]+'\x20('+config['fiat']+')\x0a',_0x5f0deb+=_0x4a7025[_0x4e85d2(0x214)]+':\x20'+_0x4a7025['change']+_0x4e85d2(0x91)+config[_0x4e85d2(0xea)]+')\x0a',_0x5f0deb+='</pre>',process[_0x4e85d2(0xed)]({'telegrammsg':_0x5f0deb},_0x2e03b9=>{});}async function sendPortfolioTelegram(){const _0x5ca833=_0xb6fc61;if(!coinsLoaded){process[_0x5ca833(0xed)]({'telegrammsg':_0x5ca833(0x1cc)},_0x1eca90=>{});return;}let _0x3a6941='';if(config[_0x5ca833(0x1d0)])_0x3a6941=_0x5ca833(0xf9)+config[_0x5ca833(0x1a0)]+_0x5ca833(0x156);else _0x3a6941=_0x5ca833(0x88)+botID+_0x5ca833(0x156);_0x3a6941+=_0x5ca833(0x116),_0x3a6941+=_0x5ca833(0x215),_0x3a6941+=_0x5ca833(0xc0),_0x3a6941+=_0x5ca833(0x215),currentCoins[_0x5ca833(0x1cd)](_0x2e7f68=>{const _0x3185b3=_0x5ca833;_0x3a6941+=_0x2e7f68['coin'][_0x3185b3(0x1a2)](0x7)+'|\x20'+formatPad(_0x2e7f68[_0x3185b3(0xce)],0x2,0x6)+'|\x20'+formatPad(_0x2e7f68['target'],0x2,0x6)+'|\x20'+formatPad(_0x2e7f68[_0x3185b3(0xab)]*0x64,0x2,0x6)+'\x0a';}),_0x3a6941+='</pre>',process[_0x5ca833(0xed)]({'telegrammsg':_0x3a6941},_0x2d486e=>{});}function formatPad(_0x28796d,_0x4d5a97,_0x13a918){const _0x24d78a=_0xb6fc61,_0x39a3f0=formatResultString(_0x28796d,_0x4d5a97);return _0x39a3f0?_0x39a3f0[_0x24d78a(0xe8)](_0x13a918):''['padStart'](_0x13a918);}function logHistory(_0xe5fb58,_0x5c5e77,_0xdfd002=''){const _0x191acd=_0xb6fc61;logger[_0x191acd(0x1ee)](''+_0x5c5e77);let _0x793704={'time':getTimeStamp(),'type':_0xe5fb58,'event':_0x5c5e77};dbLogs[_0x191acd(0x122)]('logs')[_0x191acd(0x117)](_0x793704)[_0x191acd(0xc4)]();if(_0xdfd002=='')_0xdfd002=_0x5c5e77;proxyEmit('event',{'log':_0x793704,'summary':_0xdfd002}),process['send']({'telegram':{..._0x793704,'botname':config[_0x191acd(0x1a0)],'showname':config['showname']}},_0x28b0e0=>{});}function emitHistory(_0xf43f31={}){const _0x1ea977=_0xb6fc61;Object[_0x1ea977(0x1bf)](_0xf43f31)[_0x1ea977(0xdd)]==0x0&&(_0xf43f31={'type':[_0x1ea977(0x12a),_0x1ea977(0x133)],'event':'','page':0x1});if(_0xf43f31['type'][_0x1ea977(0x11b)](_0x1ea977(0x133)))_0xf43f31[_0x1ea977(0x111)][_0x1ea977(0x9d)](_0xf43f31[_0x1ea977(0x111)][_0x1ea977(0x7c)](_0x1ea977(0x133)),0x1,_0x1ea977(0x1d6),'warning','success');if(dbLogs['has'](_0x1ea977(0x1e5))[_0x1ea977(0x1bc)]()){let _0x1b0cd5=dbLogs[_0x1ea977(0x122)](_0x1ea977(0x1e5))[_0x1ea977(0x144)](_0x23fb4a=>{const _0x21f926=_0x1ea977;if(_0xf43f31['type'][_0x21f926(0xdd)]==0x0)return![];else return _0xf43f31[_0x21f926(0x111)][_0x21f926(0x11b)](_0x23fb4a[_0x21f926(0x111)]);})[_0x1ea977(0x144)](_0x12ccf2=>{const _0x1da4f9=_0x1ea977;if(_0xf43f31[_0x1da4f9(0x133)]=='')return!![];else return _0x12ccf2[_0x1da4f9(0x133)]['toLowerCase']()[_0x1da4f9(0x11b)](_0xf43f31['event'][_0x1da4f9(0x1f7)]());})[_0x1ea977(0x96)]('time'),_0x5554b8=_0x1b0cd5[_0x1ea977(0x1bc)]()[_0x1ea977(0xdd)];_0x1b0cd5=_0x1b0cd5[_0x1ea977(0x184)]()[_0x1ea977(0xb0)]((_0xf43f31[_0x1ea977(0xf7)]-0x1)*logPageSize,_0xf43f31[_0x1ea977(0xf7)]*logPageSize-0x1)[_0x1ea977(0x184)]()[_0x1ea977(0x1bc)](),proxyEmit(_0x1ea977(0x1d3),{'logs':_0x1b0cd5,'total':_0x5554b8});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x47364d){const _0x203d97=_0xb6fc61;if(dbLogs[_0x203d97(0xcb)](_0x203d97(0x1e5))[_0x203d97(0x1bc)]()){const _0x2dbfa3=dbLogs[_0x203d97(0x122)](_0x203d97(0x1e5))[_0x203d97(0x96)]('time')[_0x203d97(0x144)](_0x29434f=>{const _0x5df225=_0x203d97;return _0x29434f[_0x5df225(0x111)]=='order';})[_0x203d97(0x1bc)]();dbLogs[_0x203d97(0x122)](_0x203d97(0x1e5))[_0x203d97(0xd0)]()[_0x203d97(0xc4)](),dbLogs[_0x203d97(0x122)]('logs')['assign'](_0x2dbfa3)[_0x203d97(0xc4)](),emitHistory(_0x47364d);}}async function pauseBot(_0x4b6ad4=pauseBotInterval){const _0x2e4fda=_0xb6fc61,_0xa164c0=new Date()[_0x2e4fda(0x17f)]();if(!lastErrorShown||_0xa164c0-lastErrorShown>=_0x4b6ad4){lastErrorShown=_0xa164c0;!lastBotPause?(lastBotPause=_0xa164c0,consecutivePauses=0x1):(_0xa164c0-lastBotPause-_0x4b6ad4<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2e4fda(0xed)]({'stop':'restart'},_0x6e182e=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2e4fda(0x17f)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x4b6ad4),botPaused=![],reset(!![]);}}}async function killBot(){const _0x5094b8=_0xb6fc61;botPaused=!![],await sleep(0x3e8),process[_0x5094b8(0xed)]({'stop':_0x5094b8(0x1ad)},_0x52953a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xa6ac6b,_0x358381){const _0x21d55c=_0xb6fc61;if(botPaused)return;const _0x282e61=config[_0x21d55c(0xca)]||'Exchange';if(_0x358381)logger[_0x21d55c(0x108)](_0x21d55c(0x1f1)+_0x358381);const _0x423738=()=>{const _0x42e629=_0x21d55c;loading[_0x42e629(0x1d6)]=!![],emitLoadingProgress();};if(_0xa6ac6b[_0x21d55c(0xd6)]()['includes'](_0x21d55c(0x16c)))logHistory(_0x21d55c(0x1d6),_0x282e61+_0x21d55c(0x160)),_0x423738();else{if(_0xa6ac6b[_0x21d55c(0xd6)]()[_0x21d55c(0x11b)](_0x21d55c(0x175)))logHistory(_0x21d55c(0x1d6),_0x282e61+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x423738();else _0xa6ac6b['toString']()['includes']('AuthenticationError')?(logHistory('error',_0x282e61+_0x21d55c(0xac)),logHistory(_0x21d55c(0x1d6),_0x21d55c(0x1fa)),_0x423738()):await handleError(_0xa6ac6b,null);}}async function handleError(_0x3c8a41,_0x58d833,_0x202ca9=''){const _0x546ec9=_0xb6fc61;if(botPaused)return;const _0x28dbf6=config[_0x546ec9(0xca)]||_0x546ec9(0x1dc);if(_0x58d833)logger['debug']('Exception\x20thrown\x20in\x20'+_0x58d833);if(_0x3c8a41['toString']()[_0x546ec9(0x11b)](_0x546ec9(0x1d5)))logHistory('error',_0x28dbf6+_0x546ec9(0x152)+pauseBotMsg),logger[_0x546ec9(0x108)](_0x546ec9(0x197),_0x3c8a41),await pauseBot();else{if(_0x3c8a41['toString']()[_0x546ec9(0x11b)]('RateLimitExceeded'))logHistory(_0x546ec9(0x1d6),_0x28dbf6+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x546ec9(0x108)](_0x546ec9(0x197),_0x3c8a41),await pauseBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)](_0x546ec9(0x16d))||_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)](_0x546ec9(0x12c)))logHistory(_0x546ec9(0x1d6),_0x28dbf6+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()['includes']('RequestTimeout'))logHistory(_0x546ec9(0x1d6),_0x28dbf6+_0x546ec9(0x1e1)+pauseBotMsg),await pauseBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x546ec9(0x1d6),_0x28dbf6+_0x546ec9(0x1aa)+pauseBotMsg),await pauseBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x1f7)]()[_0x546ec9(0x11b)]('timestamp')||_0x3c8a41[_0x546ec9(0xd6)]()['toLowerCase']()[_0x546ec9(0x11b)]('request-time')){const _0x2ba153=_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x1f7)]();let _0x24d603=![];if((config[_0x546ec9(0xca)]==_0x546ec9(0x1b0)||config[_0x546ec9(0xca)]==_0x546ec9(0x12e))&&(_0x2ba153[_0x546ec9(0x11b)](_0x546ec9(0xb4)[_0x546ec9(0x1f7)]())||_0x2ba153['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time'[_0x546ec9(0x1f7)]())))_0x24d603=!![];if(config[_0x546ec9(0xca)]=='Kucoin'&&_0x2ba153['includes']('KC-API-TIMESTAMP\x20Invalid'[_0x546ec9(0x1f7)]()))_0x24d603=!![];if(config[_0x546ec9(0xca)]==_0x546ec9(0x21a)&&_0x2ba153[_0x546ec9(0x11b)](_0x546ec9(0x1c1)[_0x546ec9(0x1f7)]()))_0x24d603=!![];if(config[_0x546ec9(0xca)]==_0x546ec9(0x15a)&&_0x2ba153[_0x546ec9(0x11b)](_0x546ec9(0x1f3)['toLowerCase']()))_0x24d603=!![];if((config[_0x546ec9(0xca)]==_0x546ec9(0x177)||config[_0x546ec9(0xca)]==_0x546ec9(0x15b))&&_0x2ba153[_0x546ec9(0x11b)]('invalid\x20Request-Time'[_0x546ec9(0x1f7)]()))_0x24d603=!![];_0x24d603?logHistory(_0x546ec9(0x1d6),_0x546ec9(0x14b)+pauseBotMsg):logHistory('error',_0x546ec9(0x19a)+pauseBotMsg),logger[_0x546ec9(0x108)]('Error\x20details:',_0x3c8a41[_0x546ec9(0xd6)]()),await pauseBot();}else{if(_0x3c8a41['toString']()['includes'](_0x546ec9(0xbb)))logHistory(_0x546ec9(0x1d6),_0x28dbf6+_0x546ec9(0x104)+pauseBotMsg),logger[_0x546ec9(0x108)]('Error\x20details:',_0x3c8a41),await pauseBot();else{if(_0x3c8a41 instanceof ccxt[_0x546ec9(0x1eb)])logHistory('error',_0x28dbf6+_0x546ec9(0xfa)+pauseBotMsg),logger[_0x546ec9(0x108)](_0x546ec9(0x197),_0x3c8a41),await pauseBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()['includes'](_0x546ec9(0x16c)))logHistory(_0x546ec9(0x1d6),_0x28dbf6+_0x546ec9(0xeb)),logHistory(_0x546ec9(0x1d6),_0x546ec9(0x87)),await killBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x546ec9(0x1d6),_0x28dbf6+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x546ec9(0x1d6),_0x546ec9(0x87)),await killBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)](_0x546ec9(0x127)))logHistory(_0x546ec9(0x1d6),_0x28dbf6+_0x546ec9(0x1bd)),logHistory(_0x546ec9(0x1d6),_0x546ec9(0x87)),await killBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)](_0x546ec9(0x18f)))logHistory('error',_0x28dbf6+_0x546ec9(0xef)),logHistory(_0x546ec9(0x1d6),_0x546ec9(0x87)),await killBot();else{if(_0x3c8a41[_0x546ec9(0xd6)]()[_0x546ec9(0x11b)](_0x546ec9(0x8b)))logHistory(_0x546ec9(0x1d6),_0x546ec9(0x97)+_0x202ca9);else _0x3c8a41 instanceof ccxt[_0x546ec9(0x211)]?(logHistory(_0x546ec9(0x1d6),_0x28dbf6+'\x20exchange\x20error'),logger[_0x546ec9(0x108)]('Error\x20details:',_0x3c8a41)):(logHistory(_0x546ec9(0x1d6),_0x546ec9(0x1c0)+pauseBotMsg),logger[_0x546ec9(0x108)](_0x546ec9(0x197),_0x3c8a41),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x53b3fb,_0x554afa){const _0xba885c=_0xb6fc61;return parseFloat(_0x53b3fb[_0xba885c(0x1e8)](_0x554afa));}function formatResultTruncate(_0x20da17,_0x429af1){const _0x3226fa=_0xb6fc61;let _0x2cc803=formatResultString(_0x20da17,0xa),_0x54ee6d=_0x2cc803[_0x3226fa(0x7c)]('.');return _0x54ee6d!=-0x1&&(_0x2cc803=_0x2cc803[_0x3226fa(0xb0)](0x0,_0x54ee6d+_0x429af1+0x1)),Number(_0x2cc803);}function formatResultString(_0x14efc2,_0x1d2713){const _0x4a7596=_0xb6fc61;let _0x5eef6f;if(!(''+_0x14efc2)[_0x4a7596(0x11b)]('e'))_0x5eef6f=+(Math[_0x4a7596(0x16f)](_0x14efc2+'e+'+_0x1d2713)+'e-'+_0x1d2713);else{let _0x29bcee=(''+_0x14efc2)[_0x4a7596(0x208)]('e'),_0x429911='';+_0x29bcee[0x1]+_0x1d2713>0x0&&(_0x429911='+'),_0x5eef6f=+(Math[_0x4a7596(0x16f)](+_0x29bcee[0x0]+'e'+_0x429911+(+_0x29bcee[0x1]+_0x1d2713))+'e-'+_0x1d2713);}return Number(_0x5eef6f)[_0x4a7596(0x1e8)](_0x1d2713);}function getServerTime(){const _0x5982ae=_0xb6fc61,_0x55e7cd=new Date();return _0x55e7cd['getFullYear']()+'/'+(_0x55e7cd[_0x5982ae(0xc7)]()+0x1)[_0x5982ae(0xd6)]()[_0x5982ae(0xe8)](0x2,'0')+'/'+_0x55e7cd['getDate']()[_0x5982ae(0xd6)]()['padStart'](0x2,'0')+'\x20'+_0x55e7cd[_0x5982ae(0x155)]()[_0x5982ae(0xd6)]()['padStart'](0x2,'0')+':'+_0x55e7cd[_0x5982ae(0x176)]()[_0x5982ae(0xd6)]()[_0x5982ae(0xe8)](0x2,'0')+':'+_0x55e7cd[_0x5982ae(0x142)]()[_0x5982ae(0xd6)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x318c87=_0xb6fc61,_0x253399=shiftedTime();return _0x253399[_0x318c87(0x94)]()+'/'+(_0x253399[_0x318c87(0xc7)]()+0x1)['toString']()[_0x318c87(0xe8)](0x2,'0')+'/'+_0x253399['getDate']()[_0x318c87(0xd6)]()[_0x318c87(0xe8)](0x2,'0')+'\x20'+_0x253399[_0x318c87(0x155)]()[_0x318c87(0xd6)]()[_0x318c87(0xe8)](0x2,'0')+':'+_0x253399[_0x318c87(0x176)]()[_0x318c87(0xd6)]()['padStart'](0x2,'0')+':'+_0x253399[_0x318c87(0x142)]()[_0x318c87(0xd6)]()[_0x318c87(0xe8)](0x2,'0');}function getDate(){const _0x3ed279=_0xb6fc61,_0x53e357=shiftedTime();return _0x53e357['getFullYear']()+'/'+(_0x53e357[_0x3ed279(0xc7)]()+0x1)[_0x3ed279(0xd6)]()['padStart'](0x2,'0')+'/'+_0x53e357[_0x3ed279(0x218)]()[_0x3ed279(0xd6)]()['padStart'](0x2,'0');}function getHour(){const _0x5282ae=_0xb6fc61,_0x5bec5b=shiftedTime();return _0x5bec5b[_0x5282ae(0x155)]()[_0x5282ae(0xd6)]()[_0x5282ae(0xe8)](0x2,'0');}function sleep(_0x503d21){return new Promise(_0x3b98e5=>setTimeout(_0x3b98e5,_0x503d21));}function _0x49c2(){const _0x48c42c=['Executing\x20exchange\x20reload','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses',':\x20Bot\x20','colorscheme','***','ExchangeError','password','removed','rightTxt','-------------------------------\x0a','Order\x20amount\x20is\x20invalid:\x20','limit-low','getDate','./config/','Bybit','threshold','getAllOrders()','ORDERS.UNLOCKING','\x20minutes\x20-\x20','showConfig','decrypt','argv','indexOf','1\x20-\x20Unlock\x20orders','Fee\x20discount\x20refund\x20detected:\x20','/backup/','initial','Net\x20effect','2\x20-\x20Validate\x20orders:\x20','version','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','eur','OrderNotFound','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','<b>Bot\x20','none','spot','InsufficientFunds','limit','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','fetchOpenOrders','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','substring','%\x20(','recovery','7yffEft','getFullYear','buys','sortBy','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Error:\x20Invalid\x20argument\x20','configuration','5498412AXWBqf','\x20value','storeFiat','splice','amount','ETH','2.3.5','balancing\x20resumed','-results.json','data','1\x20-\x20FILLED\x20known\x20order:\x20','storeHeadless','startprice','yyyy-MM-dd\x27T\x27HH:mm:ss','customId','watchTrades()','\x20>\x20[DEBUG]\x20','delta','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','closed','set','Order\x20is\x20invalid:\x20','slice','hybrid-crypto-js','freeze','emojisell','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','resetHistory','deleteHistoryAlerts','\x20>\x20','Market','function','cancelOrders()','InvalidNonce','uncaughtException','constructor',',\x20must\x20be\x20a\x203\x20digit\x20number','progress','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','3153536maTPvK','average','min','write','Order(s)\x20not\x20validated\x20after\x20','2.5.0','getMonth','floor','ID:\x20','exchange','has','Initializing\x20coin\x20results','Pausing\x20for\x20','distribution','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','remove','fetchClosedOrders','./version.json','buy','\x20|\x20lock\x20orders:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','toString','1\x20-\x20FILLED\x20unknown\x20order:\x20','Limit\x20(low-margin)','last','\x20minutes','limit-high','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','length','MIN_NOTIONAL','number','parse','\x20|\x20','emojibuy','restart','entries','BNB/','\x20orders\x20in\x20less\x20than\x20','sell','padStart','test','fiat','\x20API\x20key\x20is\x20invalid','bots','send','(((.+)+)+)+$','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','-config.json','\x20|\x20exchange:\x20','balances','001','target',':\x20timer\x20>','EUR','page','secure','<b>','\x20network\x20error','pro','UNLOCKED','getOpenOrders()','Cryptocom','orderId','random','getPortfolio','existsSync','date','\x20rejected\x20your\x20API\x20request','Invalid\x20API\x20key\x20or\x20secret\x20entered','-performance.json','log','debug','canceled','coin-loading-progress','2372409gFIbzO','realized','BUSD','-events.json','usd','storeConfiguration','type','starting-balance-','yargs/yargs','\x20hour','2.6.0','<pre>','push','net-fiat','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20change','includes','breakeven','fee','watchTransactions()','loadMarkets','./logs/','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','get','datetime','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','stringify','Transaction\x20detection\x20blocked','AuthenticationError','format','Resetting\x20bot\x20history','order','excluded','OnMaintenance','valid','Binanceus','PAXG','botID','LOCKED','max','event','exec','ordertype','watchTrades','startdate','/USD','/output-000.log','replace','startsWith','fees','exchange\x20reloaded','change24h','autoliquidity','sha256','apiKey','getSeconds','added','filter','stopExchange()','abs','.json','price','findIndex','message','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','warning','initclient','initTickers()','final','Invalid\x20quantity','recreate','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','concat','/EUR','getHours','\x20portfolio:</b>\x20\x0a\x0a','exchanges','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Bitget','Mexc3','change','Limit\x20(high-margin)','sendPortfolioTelegram','sells','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','sort','ccxt','cooldown','************','trade','enabled','Error\x20while\x20deleting\x20files:\x20','recreateCoinResults()','fetchTicker','mkdirSync','156487pWrbgj','API-key\x20format\x20invalid','ExchangeNotAvailable','Manual\x20balancing\x20required','round','find','highest','time','running','toUpperCase','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getMinutes','Mexc','Net\x20','orderstatus','shift','1545063tLXeeo','string','emitHistory','leftTxt','getTime','balancing\x20resumes\x20when\x20cooldown\x20ends','ongoing','unlinkSync','Waited\x20','reverse','Loading\x20completed','fetchBalance','isEqual','Huobi','Bot\x20','coin','UNLOCKING','cost','fetchTickers','bot-','PermissionDenied','getCoinNumber()','watchOrders','loadSymbols()','offset','USDP','join','recent20','Error\x20details:','USD','remainingSymbols','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','changes','4REpTqy','ORDERS.UNLOCKED','success','1\x20-\x20Validate\x20orders:\x20','botname','Resetting\x20coin\x20results:\x20','padEnd','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','timeout','BNB','symbol','bot','watchOrders()','map','\x20closed\x20the\x20connection','net-basecoin','Trigger:\x20','kill','filled','performance','Binance','parseISO','assign','No\x20more\x20open\x20orders\x20-\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Saving\x20configuration','getCoins()','USDC','basecoin','cancelLoading','getPortfolio(2)','apiSecret','value','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','util','keys','Unknown\x20error\x20occured','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','timestamp','\x20order:\x20','args','apiPassword','bb-settings.json','netoffset','Headless:\x20','createOrder','liquidity','1\x20-\x20Handle\x20open\x20orders','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','forEach','must\x20be\x20greater\x20than\x20minimum\x20amount','writeFile','showname','cancel','lowdb/adapters/FileSync','event-history','USDT','DDoSProtection','error','timeshift','cancelOrder','4zqaNrl','TUSD','portfolio','Exchange','basecoinvalue','open','13937BpdRoj','market','\x20not\x20responding','privateKey','limits','startnumber','logs','currency','openOrders','toFixed','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20exchange','NetworkError','add','getPortfolio(1)','full','headless','yyyy/MM/dd','Exception\x20thrown\x20in\x20','5417180IQVjAD','Invalid\x20ACCESS_TIMESTAMP','no\x20open\x20orders','coins','Transaction\x20detection\x20unblocked','toLowerCase','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','red_yellow_blue','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20:\x20','createWriteStream','Portfolio\x20change\x20detected:\x20','BTC','search','side','ticker','cloneDeep','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','path','percentage','onepagemode','\x20/\x20','split','1580OmQqrb','milliseconds','defaults'];_0x49c2=function(){return _0x48c42c;};return _0x49c2();}function shiftedTime(){const _0xc57a45=_0xb6fc61,_0x283787=new Date();let _0x2edd91=_0x283787;if(config&&config['timeshift']!==0x0)_0x2edd91=fns[_0xc57a45(0x1ec)](_0x283787,{'hours':config[_0xc57a45(0x1d7)]});return _0x2edd91;}function timer(_0x39000f){const _0x1d2760=_0xb6fc61,_0x31a44a=new Date();!lasttime?console[_0x1d2760(0x107)](getTimeStamp()+_0x1d2760(0xf5),_0x39000f,_0x31a44a):console[_0x1d2760(0x107)](getTimeStamp()+_0x1d2760(0xf5),_0x39000f,(_0x31a44a-lasttime)/0x3e8),lasttime=_0x31a44a;}