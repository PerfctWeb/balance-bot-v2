const _0xcb5e1f=_0x153b;(function(_0x3b017d,_0x45f8fe){const _0x2ca76a=_0x153b,_0x1c5d77=_0x3b017d();while(!![]){try{const _0x2e7df6=parseInt(_0x2ca76a(0x1e1))/0x1+-parseInt(_0x2ca76a(0x300))/0x2+-parseInt(_0x2ca76a(0x275))/0x3*(parseInt(_0x2ca76a(0x356))/0x4)+-parseInt(_0x2ca76a(0x1ce))/0x5*(-parseInt(_0x2ca76a(0x224))/0x6)+-parseInt(_0x2ca76a(0x201))/0x7*(-parseInt(_0x2ca76a(0x22d))/0x8)+-parseInt(_0x2ca76a(0x34e))/0x9+parseInt(_0x2ca76a(0x1cf))/0xa*(-parseInt(_0x2ca76a(0x206))/0xb);if(_0x2e7df6===_0x45f8fe)break;else _0x1c5d77['push'](_0x1c5d77['shift']());}catch(_0x5e0bd3){_0x1c5d77['push'](_0x1c5d77['shift']());}}}(_0x35ed,0x90806));const _0x1aaf2c=function(){let _0x50e9b1=!![];return function(_0x28f105,_0x4131ae){const _0x4806f8=_0x50e9b1?function(){const _0x3151b5=_0x153b;if(_0x4131ae){const _0x5e0f18=_0x4131ae[_0x3151b5(0x1db)](_0x28f105,arguments);return _0x4131ae=null,_0x5e0f18;}}:function(){};return _0x50e9b1=![],_0x4806f8;};}(),_0x37e4f1=_0x1aaf2c(this,function(){const _0x3ad22c=_0x153b;return _0x37e4f1[_0x3ad22c(0x1f6)]()[_0x3ad22c(0x284)](_0x3ad22c(0x2fb))['toString']()[_0x3ad22c(0x234)](_0x37e4f1)[_0x3ad22c(0x284)](_0x3ad22c(0x2fb));});_0x37e4f1();'use strict';const ccxt=require(_0xcb5e1f(0x307)),low=require(_0xcb5e1f(0x280)),FileSync=require(_0xcb5e1f(0x305)),fs=require('fs'),fns=require(_0xcb5e1f(0x365)),Crypt=require(_0xcb5e1f(0x2e1))[_0xcb5e1f(0x349)],util=require('util'),argv=require(_0xcb5e1f(0x2f7))(process[_0xcb5e1f(0x1d2)]['slice'](0x2))[_0xcb5e1f(0x1d2)],path=require(_0xcb5e1f(0x2c9));let exchange;global[_0xcb5e1f(0x2bb)]={},global[_0xcb5e1f(0x1ec)]={};const usdBasecoins=[_0xcb5e1f(0x28c),_0xcb5e1f(0x31e),_0xcb5e1f(0x2ab),_0xcb5e1f(0x285),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xcb5e1f(0x297)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xcb5e1f(0x1ca)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xcb5e1f(0x328)+pauseBotInterval/0xea60+_0xcb5e1f(0x2ac),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xcb5e1f(0x323))[_0xcb5e1f(0x26b)],botID=process[_0xcb5e1f(0x1d2)][0x2]||_0xcb5e1f(0x2e8),pattern=/^[0-9]{3}$/;!pattern[_0xcb5e1f(0x236)](botID)&&(console[_0xcb5e1f(0x35e)](_0xcb5e1f(0x322)+botID+_0xcb5e1f(0x2da)),killBot());const userID=process[_0xcb5e1f(0x1d2)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0xcb5e1f(0x1fc),loggerfile=fs['createWriteStream'](logspath+_0xcb5e1f(0x25b),{'flags':'a'});!fs[_0xcb5e1f(0x326)](configpath)&&fs[_0xcb5e1f(0x2d2)](configpath);!fs[_0xcb5e1f(0x326)](logspath)&&fs[_0xcb5e1f(0x2d2)](logspath);const configfile=configpath+'bot-'+botID+_0xcb5e1f(0x2e4),logfile=configpath+_0xcb5e1f(0x2bc)+botID+_0xcb5e1f(0x261),performancefile=configpath+_0xcb5e1f(0x2bc)+botID+'-performance.json',coinresultsfile=configpath+_0xcb5e1f(0x2bc)+botID+_0xcb5e1f(0x286),settingsfile=configpath+_0xcb5e1f(0x238),securefile=configpath+_0xcb5e1f(0x2ae),configbackuppath=configpath+_0xcb5e1f(0x1f3),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xcb5e1f(0x245)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xcb5e1f(0x33e)]({'data':[],'version':serverversion})[_0xcb5e1f(0x245)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xcb5e1f(0x33e)]({'bot':[],'version':serverversion})[_0xcb5e1f(0x245)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xcb5e1f(0x33e)]({'coins':[],'version':serverversion})[_0xcb5e1f(0x245)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xcb5e1f(0x2db),'rsaStandard':_0xcb5e1f(0x267)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x18a787=>{const _0x2c95e9=_0xcb5e1f;console[_0x2c95e9(0x35e)](_0x18a787);},'simple':_0x1b726f=>{const _0x1731d9=_0xcb5e1f;console[_0x1731d9(0x35e)](_0x1b726f),loggerfile['write'](util[_0x1731d9(0x282)](_0x1b726f)+'\x0a');},'full':async(_0x4e3dab,_0xdbadb0='')=>{const _0x5c3ad0=_0xcb5e1f;let _0x1093e4;if(config[_0x5c3ad0(0x218)])_0x1093e4=getTimeStamp()+':\x20'+config[_0x5c3ad0(0x1ef)]+'\x20>\x20'+_0x4e3dab;else _0x1093e4=getTimeStamp()+_0x5c3ad0(0x1cc)+botID+_0x5c3ad0(0x24c)+_0x4e3dab;console[_0x5c3ad0(0x35e)](_0x1093e4),loggerfile[_0x5c3ad0(0x245)](util[_0x5c3ad0(0x282)](_0x1093e4)+'\x0a'),_0xdbadb0&&(console['log'](_0xdbadb0),loggerfile[_0x5c3ad0(0x245)](util[_0x5c3ad0(0x282)](_0xdbadb0)+'\x0a'));},'debug':async(_0x1c0f24,_0x3acff8='')=>{const _0x452e41=_0xcb5e1f;let _0x314c8a;if(config['showname'])_0x314c8a=getTimeStamp()+':\x20'+config[_0x452e41(0x1ef)]+'\x20>\x20[DEBUG]\x20'+_0x1c0f24;else _0x314c8a=getTimeStamp()+_0x452e41(0x1cc)+botID+'\x20>\x20[DEBUG]\x20'+_0x1c0f24;if(debugging)console[_0x452e41(0x35e)](_0x314c8a);loggerfile[_0x452e41(0x245)](util[_0x452e41(0x282)](_0x314c8a)+'\x0a');if(_0x3acff8){if(debugging)console[_0x452e41(0x35e)](_0x3acff8);loggerfile[_0x452e41(0x245)](util[_0x452e41(0x282)](_0x3acff8)+'\x0a');}}};process['on'](_0xcb5e1f(0x338),function(_0x3db959){const _0x57cc43=_0xcb5e1f;handleError(_0x3db959,_0x57cc43(0x338));});settings[_0xcb5e1f(0x2aa)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0xcb5e1f(0x250)]!=config[_0xcb5e1f(0x250)]&&updateOnepagemode(settings[_0xcb5e1f(0x250)]);process[_0xcb5e1f(0x260)]({'started':'running'},_0x45c3a4=>{}),initializeProcessListeners();function proxyEmit(_0xd3f66,_0x26a5d6=null){const _0x44f017=_0xcb5e1f;process[_0x44f017(0x260)]({'function':_0xd3f66,'args':_0x26a5d6},_0x67681a=>{});}function initializeProcessListeners(){const _0x2436dd=_0xcb5e1f;process['on'](_0x2436dd(0x2b5),_0x3f2e62=>{const _0x32c40a=_0x2436dd;switch(Object[_0x32c40a(0x325)](_0x3f2e62)[0x0]){case _0x32c40a(0x2aa):_0x3f2e62['timeshift']!=undefined&&(settings[_0x32c40a(0x2aa)]=_0x3f2e62['timeshift'],updateTimeshift(settings[_0x32c40a(0x2aa)]));break;case _0x32c40a(0x250):_0x3f2e62[_0x32c40a(0x250)]!=undefined&&(settings[_0x32c40a(0x250)]=_0x3f2e62['onepagemode'],updateOnepagemode(settings[_0x32c40a(0x250)]));break;case _0x32c40a(0x26c):_0x3f2e62['bots']!=undefined&&(bots=JSON[_0x32c40a(0x2ca)](_0x3f2e62[_0x32c40a(0x26c)]),proxyEmit('bots',bots));break;case _0x32c40a(0x21e):switch(_0x3f2e62[_0x32c40a(0x21e)]){case _0x32c40a(0x205):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x32c40a(0x287):emitHistory(_0x3f2e62[_0x32c40a(0x28e)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x3f2e62[_0x32c40a(0x28e)]);break;case _0x32c40a(0x239):getPortfolio(_0x3f2e62['args']);break;case'storeConfiguration':storeConfiguration(_0x3f2e62['args']);break;case _0x32c40a(0x2d0):storeHeadless(_0x3f2e62[_0x32c40a(0x28e)]);break;case _0x32c40a(0x28a):storeFiat(_0x3f2e62[_0x32c40a(0x28e)]);break;case _0x32c40a(0x2fe):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x32c40a(0x315):placeOrder(_0x3f2e62['args']);break;case _0x32c40a(0x312):cancelLoading();break;case'showConfig':showConfig();break;case _0x32c40a(0x1d7):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x815ffc=![]){const _0x246090=_0xcb5e1f;logger[_0x246090(0x2a7)]('Reset\x20|\x20'+(_0x815ffc?_0x246090(0x20f):'exchange\x20not\x20reloaded')+_0x246090(0x212)+config[_0x246090(0x2c0)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x815ffc)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x246090(0x2d5)]!=''&&config[_0x246090(0x2d5)]!=_0x246090(0x2a4)){loadingProgress=0x0;if(_0x815ffc){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x567692){handleErrorNoStop(_0x567692,_0x246090(0x320));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4c8327=await getCoins();[currentCoins,currentCoinsAll]=_0x4c8327,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x246090(0x337)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x246090(0x28b)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x381020=_0xcb5e1f;exchangeStopped=!![];try{await exchange[_0x381020(0x33d)]();}catch(_0x3f3a3d){await handleError(_0x3f3a3d,'stopExchange()');}}async function reloadExchange(){const _0x2ea4f3=_0xcb5e1f;while(lockOrders!=ORDERS[_0x2ea4f3(0x1ca)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2ea4f3(0x2a7)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0xf0719f=config['exchange'],_0x51b181=config[_0xcb5e1f(0x2d5)],_0x4c2768=config['apiSecret'],_0x54921f=config[_0xcb5e1f(0x22b)]){const _0x131aad=_0xcb5e1f;exchange&&await stopExchange();!supportedExchanges()['includes'](_0xf0719f)&&(logHistory(_0x131aad(0x20e),_0x131aad(0x357)+_0xf0719f+_0x131aad(0x353)),killBot());const _0x54ddee=ccxt[_0x131aad(0x228)][_0xf0719f[_0x131aad(0x32f)]()];exchange=new _0x54ddee({'apiKey':_0x51b181,'secret':_0x4c2768,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x131aad(0x30f),'watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}});if(_0x54921f)exchange[_0x131aad(0x358)]=_0x54921f;}function setStableCoins(){const _0x376a75=_0xcb5e1f;let _0x3ab02c=config['basecoin']==_0x376a75(0x290)?_0x376a75(0x290):config[_0x376a75(0x2e7)]==_0x376a75(0x344)?'PAXG':'BTC',_0x5245fc=!allSymbols[_0x376a75(0x1e0)](_0x3ab02c+_0x376a75(0x25d))?'USDT':'USD',_0x2444d6=!allSymbols[_0x376a75(0x1e0)](_0x3ab02c+_0x376a75(0x240))?_0x5245fc:_0x376a75(0x20d);stablecoins={'eur':{'coin':''+_0x3ab02c+_0x2444d6,'symbol':_0x3ab02c+'/'+_0x2444d6},'usd':{'coin':''+_0x3ab02c+_0x5245fc,'symbol':_0x3ab02c+'/'+_0x5245fc}};}async function initwsCcxt(){const _0x50db8d=_0xcb5e1f;initCycle++;const _0x21bc30=initCycle;let _0x57bf52=[];config['portfolio'][_0x50db8d(0x256)](_0xc0b2d6=>{const _0x4d2fef=_0x50db8d;if(!_0xc0b2d6[_0x4d2fef(0x226)]&&_0xc0b2d6[_0x4d2fef(0x2ef)]!=config[_0x4d2fef(0x2e7)])_0x57bf52['push'](_0xc0b2d6['symbol']);});if(!_0x57bf52[_0x50db8d(0x1e0)](stablecoins[_0x50db8d(0x2c5)][_0x50db8d(0x29c)]))_0x57bf52[_0x50db8d(0x34f)](stablecoins[_0x50db8d(0x2c5)][_0x50db8d(0x29c)]);if(!_0x57bf52[_0x50db8d(0x1e0)](stablecoins['usd']['symbol']))_0x57bf52[_0x50db8d(0x34f)](stablecoins[_0x50db8d(0x1fa)]['symbol']);if(config[_0x50db8d(0x2c0)][_0x50db8d(0x204)]('Binance')&&config['basecoin']!=_0x50db8d(0x344)){if(!_0x57bf52[_0x50db8d(0x1e0)]('BNB/'+config[_0x50db8d(0x2e7)]))_0x57bf52[_0x50db8d(0x34f)](_0x50db8d(0x348)+config[_0x50db8d(0x2e7)]);}loadCoins(_0x57bf52),_0x57bf52=validateSymbols(_0x57bf52);const _0x4b49f3=async _0x5bf0ac=>{const _0x5b58d3=_0x50db8d;let _0x29857f;try{const _0x335a0f=await getTickers(_0x5bf0ac);Object['entries'](_0x335a0f)[_0x5b58d3(0x256)](_0x5281b7=>{const _0x5d16dc=_0x5b58d3;_0x29857f=_0x5281b7[0x1]['symbol'],global[_0x5d16dc(0x2bb)][noslash(_0x29857f)]=_0x5281b7[0x1][_0x5d16dc(0x302)],global[_0x5d16dc(0x1ec)][_0x29857f]=_0x5281b7[0x1][_0x5d16dc(0x1d8)];});}catch(_0x195bf2){await handleError(_0x195bf2,_0x5b58d3(0x1e3),_0x29857f);}},_0xa0f62a=async _0x9c66cd=>{const _0x4a3337=_0x50db8d;while(initCycle==_0x21bc30){if(!botPaused)try{const _0x29de08=await exchange[_0x4a3337(0x214)](_0x9c66cd);global[_0x4a3337(0x2bb)][noslash(_0x29de08[0x0][_0x4a3337(0x29c)])]=_0x29de08[0x0][_0x4a3337(0x246)],await sleep(0x3e8);}catch(_0x5860ba){if(!exchangeStopped)await handleError(_0x5860ba,_0x4a3337(0x2d1),_0x9c66cd);}else await sleep(0x64);}},_0x2fa430=async _0x35a485=>{const _0x1fa87c=_0x50db8d;while(initCycle==_0x21bc30){if(!botPaused){let _0x43e2dd;try{await sleep(0x3c*0x3e8);const _0x23b4a1=await getTickers(_0x35a485);Object[_0x1fa87c(0x30b)](_0x23b4a1)[_0x1fa87c(0x256)](_0x2a9732=>{const _0x327ff1=_0x1fa87c;_0x43e2dd=_0x2a9732[0x1][_0x327ff1(0x29c)],global[_0x327ff1(0x1ec)][_0x43e2dd]=_0x2a9732[0x1][_0x327ff1(0x1d8)];});}catch(_0x47d878){if(!exchangeStopped)await handleError(_0x47d878,_0x1fa87c(0x1ea),_0x43e2dd);}}else await sleep(0x64);}},_0x10703c=async _0x140ee9=>{const _0x4043d9=_0x50db8d;while(initCycle==_0x21bc30){if(!botPaused)try{const _0x38e326=await exchange[_0x4043d9(0x308)](_0x140ee9);initCycle==_0x21bc30&&_0x38e326['forEach'](_0x11216f=>{updateNumberCoinsCcxt(_0x11216f);});}catch(_0x40987d){if(!exchangeStopped)await handleError(_0x40987d,_0x4043d9(0x2f6));}else await sleep(0x64);}};_0x4b49f3(_0x57bf52),_0x2fa430(_0x57bf52),_0x57bf52[_0x50db8d(0x256)](_0x3f9ab7=>{_0xa0f62a(_0x3f9ab7),_0x10703c(_0x3f9ab7);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1dab3e){const _0x1974f0=_0xcb5e1f;let _0x1d8d1e={};try{if(config[_0x1974f0(0x2c0)]!='Cryptocom')_0x1d8d1e=await exchange[_0x1974f0(0x347)](_0x1dab3e);else for(const _0x5ed9d9 of _0x1dab3e){const _0x411c0e=await exchange[_0x1974f0(0x1eb)](_0x5ed9d9);_0x1d8d1e[_0x5ed9d9]=_0x411c0e;}return _0x1d8d1e;}catch(_0x56d6c4){throw _0x56d6c4;}}async function watchTransactions(){const _0x3b894f=_0xcb5e1f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x293263=await getCoins(),[_0x3192b6,_0x5dad1f]=_0x293263;let _0x5d6bc2=[];currentCoins['forEach'](_0x6b13af=>{const _0x316e2d=_0x153b,_0x2d723d=_0x3192b6[_0x316e2d(0x2bd)](_0x45d7ed=>_0x45d7ed[_0x316e2d(0x2ef)]==_0x6b13af['coin']);if(_0x2d723d){if(_0x6b13af['number']!=_0x2d723d[_0x316e2d(0x362)]){let _0x5a10cc;if(_0x6b13af[_0x316e2d(0x2ef)]!=config['basecoin']){const _0x10bd0e=global[_0x316e2d(0x2bb)][noslash(_0x6b13af[_0x316e2d(0x29c)])];_0x5a10cc=_0x6b13af[_0x316e2d(0x1cd)]?0x1/_0x10bd0e:_0x10bd0e;}else _0x5a10cc=0x1;_0x5d6bc2[_0x316e2d(0x34f)]({'coin':_0x6b13af['coin'],'symbol':_0x6b13af[_0x316e2d(0x29c)],'price':_0x5a10cc,'number':Number(formatResult(_0x2d723d[_0x316e2d(0x362)]-_0x6b13af[_0x316e2d(0x362)],0x8)),'basecoinvalue':_0x5a10cc*(_0x2d723d[_0x316e2d(0x362)]-_0x6b13af['number'])});}}});if(_0x5d6bc2[_0x3b894f(0x28b)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x3b894f(0x2a7)](_0x3b894f(0x2cd)+_0x5d6bc2[0x0][_0x3b894f(0x216)]+_0x3b894f(0x289)+lastFees[_0x3b894f(0x2a6)]);if(lastFees[_0x3b894f(0x2a6)]==0x0||Math['abs'](_0x5d6bc2[0x0][_0x3b894f(0x216)])>lastFees[_0x3b894f(0x2a6)]){delete _0x5d6bc2[0x0][_0x3b894f(0x29c)],delete _0x5d6bc2[0x0][_0x3b894f(0x216)];let _0x106c70=[],_0x597777=[...config[_0x3b894f(0x319)]]||[],_0x5f2cdb=config[_0x3b894f(0x319)];_0x597777[_0x3b894f(0x1d6)]((_0x5e8cf0,_0x552143)=>_0x5e8cf0[_0x3b894f(0x318)]>_0x552143[_0x3b894f(0x318)]?-0x1:_0x552143['date']>_0x5e8cf0['date']?0x1:0x0);const _0x4d2ad1=getDate();if(_0x597777[0x0]){const _0x3ebb49=fns[_0x3b894f(0x2ca)](_0x597777[0x0]['date'],_0x3b894f(0x333),new Date()),_0x5c1017=fns['parse'](_0x4d2ad1,_0x3b894f(0x333),new Date());if(fns[_0x3b894f(0x2a5)](_0x3ebb49,_0x5c1017)){_0x106c70=_0x597777[0x0][_0x3b894f(0x221)];const _0x1bf6f0=_0x106c70[_0x3b894f(0x2bd)](_0x5cf424=>_0x5cf424[_0x3b894f(0x2ef)]==_0x5d6bc2[0x0][_0x3b894f(0x2ef)]);_0x1bf6f0?(_0x1bf6f0[_0x3b894f(0x362)]+=_0x5d6bc2[0x0][_0x3b894f(0x362)],_0x1bf6f0['number']==0x0&&(_0x106c70=_0x106c70[_0x3b894f(0x24d)](_0x2b864b=>{const _0x29a827=_0x3b894f;return _0x2b864b[_0x29a827(0x2ef)]!=_0x5d6bc2[0x0]['coin'];}))):_0x106c70['push'](_0x5d6bc2[0x0]);const _0x1797b8=_0x5f2cdb['find'](_0x2dd1f9=>_0x2dd1f9[_0x3b894f(0x318)]==_0x4d2ad1);_0x1797b8[_0x3b894f(0x221)]=_0x106c70;}else _0x5f2cdb[_0x3b894f(0x34f)]({'date':_0x4d2ad1,'changes':[_0x5d6bc2[0x0]]});}const _0x1756d6=_0x5f2cdb[_0x3b894f(0x2bd)](_0x4cd0ec=>_0x4cd0ec['date']==_0x4d2ad1);if(_0x1756d6){let _0x47ecbb=!![];_0x1756d6[_0x3b894f(0x221)]['forEach'](_0x25d1b2=>{const _0x3e9b52=_0x3b894f;if(_0x25d1b2[_0x3e9b52(0x362)]!=0x0)_0x47ecbb=![];}),_0x47ecbb&&(_0x5f2cdb=_0x5f2cdb[_0x3b894f(0x24d)](_0x59559a=>{const _0x3c15fe=_0x3b894f;return _0x59559a[_0x3c15fe(0x318)]!=_0x4d2ad1;}));}let _0x4f33c9=dbConfig[_0x3b894f(0x272)](_0x3b894f(0x1e4))['find']({'botID':botID})['value']();_0x4f33c9&&(dbConfig['get'](_0x3b894f(0x1e4))[_0x3b894f(0x2bd)]({'botID':botID})[_0x3b894f(0x27f)]({'liquidity':_0x5f2cdb})['write'](),config['liquidity']=_0x5f2cdb),logHistory(_0x3b894f(0x25f),_0x3b894f(0x251)+Math['abs'](_0x5d6bc2[0x0][_0x3b894f(0x362)])+'\x20'+_0x5d6bc2[0x0][_0x3b894f(0x2ef)]+'\x20'+(_0x5d6bc2[0x0]['number']>0x0?_0x3b894f(0x227):_0x3b894f(0x298))+_0x3b894f(0x23d)),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x3b894f(0x351)+Math['abs'](_0x5d6bc2[0x0][_0x3b894f(0x362)])+'\x20'+_0x5d6bc2[0x0][_0x3b894f(0x2ef)]+'\x20'+(_0x5d6bc2[0x0][_0x3b894f(0x362)]>0x0?_0x3b894f(0x227):'removed'));transactionDetected=!![];}else logger['debug'](_0x3b894f(0x251)+Math[_0x3b894f(0x26f)](_0x5d6bc2[0x0][_0x3b894f(0x362)])+'\x20'+_0x5d6bc2[0x0][_0x3b894f(0x2ef)]+'\x20'+(_0x5d6bc2[0x0]['number']>0x0?'added':'removed')+_0x3b894f(0x257));}currentCoins=_0x3192b6,currentCoinsAll=_0x5dad1f,await sleep(watchTransactionsInterval);}catch(_0x59c97f){if(!exchangeStopped)await handleError(_0x59c97f,_0x3b894f(0x34c));}else await sleep(0x64);}}async function loadSymbols(){const _0x2ffe2f=_0xcb5e1f;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x2ffe2f(0x30b)](markets)[_0x2ffe2f(0x256)](_0x22f055=>{const _0x885ab6=_0x2ffe2f;_0x22f055[0x1][_0x885ab6(0x304)]&&_0x22f055[0x1][_0x885ab6(0x30f)]&&allSymbols[_0x885ab6(0x34f)](_0x22f055[0x0]);});}catch(_0x560710){throw _0x560710;}}function validateSymbols(_0x3ff7b0){const _0x39e853=_0xcb5e1f;let _0x3c4c08=[];return _0x3ff7b0[_0x39e853(0x256)](_0x37be42=>{const _0x5e6fd0=_0x39e853;!allSymbols[_0x5e6fd0(0x1e0)](_0x37be42)?logHistory(_0x5e6fd0(0x20e),_0x5e6fd0(0x321)+_0x37be42+_0x5e6fd0(0x1e7)):_0x3c4c08[_0x5e6fd0(0x34f)](_0x37be42);}),_0x3c4c08;}async function initclient(){const _0x4438fc=_0xcb5e1f;proxyEmit(_0x4438fc(0x30a),emittedConfiguration()),proxyEmit(_0x4438fc(0x359),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x36afcf=getNormalizedPerformance();emitPerformance(_0x36afcf),getStartingBalances(_0x36afcf);}async function toggleBotMode(){const _0x10f2b3=_0xcb5e1f;let _0x31894d=dbConfig[_0x10f2b3(0x272)]('bot')[_0x10f2b3(0x2bd)]({'botID':botID})[_0x10f2b3(0x317)]();if(_0x31894d){const _0x465f2d=!_0x31894d[_0x10f2b3(0x1f0)];dbConfig['get'](_0x10f2b3(0x1e4))[_0x10f2b3(0x2bd)]({'botID':botID})[_0x10f2b3(0x27f)]({'headless':_0x465f2d})[_0x10f2b3(0x245)](),config[_0x10f2b3(0x1f0)]=_0x465f2d,proxyEmit(_0x10f2b3(0x30a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x254ed5=_0xcb5e1f;process[_0x254ed5(0x260)]({'updatebotmanager':!![]},_0x35b7a3=>{}),logger[_0x254ed5(0x2a7)](_0x254ed5(0x2f5)+config[_0x254ed5(0x1f0)]);}async function loadCoins(_0x5ea03d){const _0x51c076=_0xcb5e1f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3b0d60,_0x3fdcbe=0x0,_0x250d4b=0x0;_0x5ea03d['forEach'](_0x41b384=>{const _0x1c6c96=_0x153b;loading[_0x1c6c96(0x2e3)][_0x1c6c96(0x34f)](_0x41b384);}),loadingCanceled=![];let _0x291287=![];while(_0x3b0d60!=_0x5ea03d[_0x51c076(0x28b)]+maxLoadingProgress){_0x3b0d60=loadingProgress,_0x5ea03d[_0x51c076(0x256)](_0x279c23=>{const _0x454e38=_0x51c076;if(global[_0x454e38(0x2bb)][noslash(_0x279c23)]){loading[_0x454e38(0x2e3)]=loading[_0x454e38(0x2e3)][_0x454e38(0x24d)](_0x12f9b5=>_0x12f9b5!=_0x279c23);if(!watchedSymbols[_0x454e38(0x1e0)](_0x279c23))watchedSymbols[_0x454e38(0x34f)](_0x279c23);_0x3b0d60++;}}),loading['progress']=Math[_0x51c076(0x268)](_0x3b0d60/(_0x5ea03d[_0x51c076(0x28b)]+maxLoadingProgress)*0x64);loading[_0x51c076(0x1f4)]!=0x64&&(_0x250d4b>0x1e*0x5&&(loading[_0x51c076(0x314)]=!![],emitLoadingProgress()),_0x250d4b>0x78*0x5&&!_0x291287&&(_0x291287=!![],logHistory('error',_0x51c076(0x1ed)+loading[_0x51c076(0x2e3)][_0x51c076(0x324)](',\x20')+_0x51c076(0x29d)),logHistory('error',_0x51c076(0x295)+loadCoinsRetryInterval/0xea60+_0x51c076(0x1e8)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x520851=_0x51c076;process[_0x520851(0x260)]({'stop':_0x520851(0x2b1)},_0x2dfea3=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x51c076(0x1f8)]=!![],emitLoadingProgress();break;}else _0x3fdcbe!=loading['progress']&&(_0x3fdcbe=loading['progress'],emitLoadingProgress()),_0x250d4b++,await sleep(0xc8);}_0x3b0d60==_0x5ea03d[_0x51c076(0x28b)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x51c076(0x33b),'live':_0x51c076(0x293)},_0x32ff2e=>{}),_0x291287&&logHistory(_0x51c076(0x25f),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xf9dfe8=_0xcb5e1f;proxyEmit(_0xf9dfe8(0x30a),{...emittedConfiguration(),'configstate':_0xf9dfe8(0x259)});}function emitLoadingProgress(){const _0x10b881=_0xcb5e1f;proxyEmit(_0x10b881(0x332),loading);}async function getFiat(){const _0x36fdf2=_0xcb5e1f;let _0x270c9f=global[_0x36fdf2(0x2bb)][stablecoins['eur'][_0x36fdf2(0x2ef)]],_0x15eb6f=global[_0x36fdf2(0x2bb)][stablecoins[_0x36fdf2(0x1fa)]['coin']];return{'eur':Number(_0x270c9f),'usd':Number(_0x15eb6f)};}function capitalize(_0x52ff19){const _0x3eb052=_0xcb5e1f;return _0x52ff19[_0x3eb052(0x1e6)](0x0,0x1)[_0x3eb052(0x2f4)]()+_0x52ff19[_0x3eb052(0x1e6)](0x1);}function supportedExchanges(){const _0x247896=_0xcb5e1f,_0xc8ef34=['ws','fetchTickers',_0x247896(0x1eb),_0x247896(0x214),'watchOrders','cancelOrder',_0x247896(0x247),_0x247896(0x29f),_0x247896(0x278),_0x247896(0x2f2)];let _0x1c332a=[],_0x23ac29=[],_0x352714=ccxt['pro'][_0x247896(0x359)];_0x352714['forEach'](_0xce84d4=>{const _0x468371=_0x247896;try{const _0x71bfe9=new ccxt[(_0x468371(0x228))][_0xce84d4]();_0x23ac29[_0x468371(0x34f)](_0x71bfe9);}catch(_0xe60866){}}),_0x23ac29[_0x247896(0x256)](_0x1685da=>{const _0x45180f=_0x247896;let _0x228d50=0x0;_0xc8ef34[_0x45180f(0x256)](_0x16115c=>{const _0x423bff=_0x45180f;_0x16115c in _0x1685da['has']&&_0x1685da[_0x423bff(0x258)][_0x16115c]&&_0x228d50++;}),_0x228d50==_0xc8ef34[_0x45180f(0x28b)]&&_0x1c332a[_0x45180f(0x34f)](capitalize(_0x1685da['id']));});let _0x3b8998=[];return _0x352714[_0x247896(0x256)](_0xaf8e42=>{const _0x3a2d60=_0x247896;_0xaf8e42=capitalize(_0xaf8e42);if(!_0x1c332a[_0x3a2d60(0x1e0)](_0xaf8e42))_0x3b8998[_0x3a2d60(0x34f)](_0xaf8e42);}),_0x1c332a;}function setStartDatePerformance(){const _0x12d5f7=_0xcb5e1f;if(config&&config['liquidity'][0x0][_0x12d5f7(0x221)]['length']!=0x0){const _0x29e6a9=config[_0x12d5f7(0x319)][0x0][_0x12d5f7(0x221)];dbPerformance[_0x12d5f7(0x272)](_0x12d5f7(0x1d3))['find']({'date':config['startdate']})[_0x12d5f7(0x27f)]({'coins':_0x29e6a9})[_0x12d5f7(0x245)]();}}async function recreateCoinResults(){const _0x53996d=_0xcb5e1f;let _0x18481a,_0x51eef9=[];try{const _0x52110d=fns[_0x53996d(0x282)](fns[_0x53996d(0x23c)](config[_0x53996d(0x364)][_0x53996d(0x2b7)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4c7cce of currentCoins){if(_0x4c7cce[_0x53996d(0x2ef)]!=config['basecoin']){let _0x14cba2=0x0,_0x4e5a12,_0x392614;_0x18481a=await getAllEventOrders(_0x4c7cce[_0x53996d(0x29c)]);if(_0x18481a[_0x53996d(0x28b)]>0x0)_0x18481a['forEach'](_0x5280ac=>{const _0x45b989=_0x53996d,_0x45274c=_0x4c7cce[_0x45b989(0x29c)][_0x45b989(0x1e0)](config['basecoin']+'/');_0x51eef9[_0x45b989(0x34f)]({'datetime':_0x5280ac['datetime'],'coin':_0x4c7cce[_0x45b989(0x2ef)],'symbol':_0x4c7cce['symbol'],'side':_0x5280ac['side'],'reverse':_0x45274c,'amount':formatResult(_0x5280ac[_0x45b989(0x208)],0x8),'filled':formatResult(_0x5280ac[_0x45b989(0x208)],0x8),'price':formatResult(_0x5280ac[_0x45b989(0x246)],0x8)}),_0x14cba2=_0x5280ac[_0x45b989(0x243)]==_0x45b989(0x21d)?_0x14cba2+_0x5280ac[_0x45b989(0x208)]:_0x14cba2-_0x5280ac[_0x45b989(0x208)];if(!_0x392614)_0x392614=_0x5280ac[_0x45b989(0x246)];});_0x4e5a12=_0x4c7cce[_0x53996d(0x362)]-_0x14cba2;let _0x5881a0;config['liquidity'][_0x53996d(0x256)](_0x93aa55=>{const _0x261c29=_0x53996d;!_0x5881a0&&(_0x5881a0=_0x93aa55[_0x261c29(0x221)]['find'](_0x163f50=>_0x163f50[_0x261c29(0x2ef)]==_0x4c7cce['coin']),_0x5881a0&&(_0x4e5a12=_0x5881a0[_0x261c29(0x362)],_0x392614=_0x5881a0[_0x261c29(0x246)]));});let _0x47cfc0=dbCoinResults[_0x53996d(0x272)]('coins')['find']({'coin':_0x4c7cce[_0x53996d(0x2ef)]})[_0x53996d(0x317)]();_0x47cfc0={'coin':_0x4c7cce['coin'],'number':_0x4e5a12,'breakeven':_0x392614,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x53996d(0x23f))[_0x53996d(0x2bd)]({'coin':_0x4c7cce[_0x53996d(0x2ef)]})['assign'](_0x47cfc0)[_0x53996d(0x245)]();}}_0x51eef9['sort']((_0x2c977e,_0x198963)=>_0x2c977e[_0x53996d(0x31c)]>_0x198963[_0x53996d(0x31c)]?0x1:_0x198963['datetime']>_0x2c977e[_0x53996d(0x31c)]?-0x1:0x0);let _0x45072b=0x0;for(let _0x36771a of _0x51eef9){await updateCoinResults(_0x36771a,!![]);}}catch(_0x28fdf4){await handleError(_0x28fdf4,_0x53996d(0x2e2));}}async function getAllEventOrders(_0x23b197){const _0x3ad8db=_0xcb5e1f;let _0x282729=[],_0x3aef9e=dbLogs['get'](_0x3ad8db(0x213))[_0x3ad8db(0x24d)](_0x37ead6=>{const _0x220c10=_0x3ad8db,_0x2d66ee=_0x37ead6[_0x220c10(0x233)]['toLowerCase']();return _0x2d66ee[_0x220c10(0x1e0)](_0x23b197[_0x220c10(0x32f)]())&&(_0x2d66ee[_0x220c10(0x1e0)](_0x220c10(0x273))&&_0x2d66ee['includes'](_0x220c10(0x1d5))||_0x2d66ee[_0x220c10(0x1e0)](_0x220c10(0x208))&&_0x2d66ee[_0x220c10(0x1e0)]('order'));})['sortBy'](_0x3ad8db(0x2de))[_0x3ad8db(0x317)]();return _0x3aef9e['forEach'](_0x5d04cf=>{const _0x262834=_0x3ad8db,_0x105274=_0x5d04cf[_0x262834(0x233)]['includes'](_0x262834(0x1da))?'sell':_0x262834(0x21d),_0x5611f6=/#([0-9]|\.)+\s/i,_0x537b90=Number(_0x5611f6[_0x262834(0x35b)](_0x5d04cf[_0x262834(0x233)])[0x0][_0x262834(0x31f)](0x1)),_0x1670f1=/@([0-9]|\.)+$/i,_0x594de0=Number(_0x1670f1['exec'](_0x5d04cf[_0x262834(0x233)])[0x0][_0x262834(0x31f)](0x1));_0x282729['push']({'datetime':_0x5d04cf['time'],'coin':symbolToCoin(_0x23b197),'symbol':_0x23b197,'side':_0x105274,'amount':_0x537b90,'filled':_0x537b90,'price':_0x594de0});}),_0x282729;}async function getAllOrders(_0x3fd2e5,_0x51df2c){const _0x2d53a0=_0xcb5e1f;let _0x7c3ea2=[];while(_0x51df2c<exchange[_0x2d53a0(0x2f3)]()){const _0x3528c6=0x1f4;try{const _0x5c9105=await exchange[_0x2d53a0(0x278)](_0x3fd2e5,_0x51df2c,_0x3528c6);if(_0x5c9105[_0x2d53a0(0x28b)])_0x51df2c=_0x5c9105[_0x5c9105['length']-0x1]['timestamp']+0x1,_0x7c3ea2=_0x7c3ea2['concat'](_0x5c9105);else break;}catch(_0xbbbe64){await handleError(_0xbbbe64,_0x2d53a0(0x2cc),_0x3fd2e5);}}return _0x7c3ea2;}async function validate24hChanges(){const _0x23887b=_0xcb5e1f;for(const _0x444d08 of currentCoins){if(_0x444d08[_0x23887b(0x2ef)]!=config[_0x23887b(0x2e7)]){let _0x59aeaa;_0x444d08[_0x23887b(0x1cd)]?_0x59aeaa=formatResult((0x1/(global[_0x23887b(0x1ec)][noslash(_0x444d08[_0x23887b(0x29c)])]/0x64+0x1)-0x1)*0x64,0x3):_0x59aeaa=global['change'][noslash(_0x444d08[_0x23887b(0x29c)])],_0x59aeaa<config['change24h']&&(logHistory(_0x23887b(0x20e),_0x444d08['coin']+_0x23887b(0x33c)+_0x59aeaa+'%'),logHistory('error',_0x23887b(0x232)),logHistory(_0x23887b(0x20e),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x469f81,_0x49f928){const _0x477527=_0xcb5e1f;if(!_0x469f81)return!![];const _0x37a0dd=_0x49f928[_0x477527(0x1c9)]('.'),_0x21252e=_0x469f81[_0x477527(0x1c9)]('.');for(var _0x157917=0x0;_0x157917<_0x21252e[_0x477527(0x28b)];_0x157917++){const _0x5b19fe=~~_0x21252e[_0x157917],_0x4f7ba1=~~_0x37a0dd[_0x157917];if(_0x5b19fe<_0x4f7ba1)return!![];if(_0x5b19fe>_0x4f7ba1)return![];}return![];}async function oneTimeMigration(){const _0x536dbd=_0xcb5e1f;let _0x270d86=dbLogs[_0x536dbd(0x272)](_0x536dbd(0x26b))[_0x536dbd(0x317)]();if(isOlderVersion(_0x270d86,_0x536dbd(0x340))){let _0x539d4c=[];const _0x1df106=dbLogs[_0x536dbd(0x272)]('logs')[_0x536dbd(0x317)]();_0x1df106[_0x536dbd(0x256)](_0x583d95=>{const _0x662147=_0x536dbd;_0x539d4c[_0x662147(0x34f)]({'time':_0x583d95['time'],'type':_0x583d95[_0x662147(0x350)],'event':_0x583d95[_0x662147(0x233)]});}),dbLogs[_0x536dbd(0x272)](_0x536dbd(0x213))['assign'](_0x539d4c)[_0x536dbd(0x245)]();}let _0x51ea9c=dbConfig[_0x536dbd(0x272)]('version')[_0x536dbd(0x317)]();if(isOlderVersion(_0x51ea9c,_0x536dbd(0x340))){let _0x291382=dbConfig[_0x536dbd(0x272)](_0x536dbd(0x1e4))[_0x536dbd(0x2bd)]({'botID':botID})[_0x536dbd(0x317)]();if(_0x291382){let _0x15272d=[];_0x291382[_0x536dbd(0x1ff)][_0x536dbd(0x256)](_0x5a6878=>{const _0x568b6d=_0x536dbd;_0x15272d[_0x568b6d(0x34f)]({'coin':_0x5a6878['coin'],'number':_0x5a6878[_0x568b6d(0x265)],'price':_0x5a6878['startprice']}),delete _0x5a6878['startnumber'],delete _0x5a6878[_0x568b6d(0x35f)];});if(_0x15272d[_0x536dbd(0x28b)]!==0x0)fs[_0x536dbd(0x34d)](configbackuppath+(_0x536dbd(0x1f7)+botID+'.json'),JSON[_0x536dbd(0x24a)](_0x15272d,null,0x4),function(_0x4a593f){if(_0x4a593f){}});const _0x22784e=(_0x4682b7,_0x101a2a)=>{const _0x414f08=_0x536dbd;let _0x25a280=[];_0x101a2a['forEach'](_0xe07514=>{const _0x3ba7ee=_0x153b,_0x34b333=_0x4682b7[_0x3ba7ee(0x2bd)](_0x5cc539=>_0x5cc539['coin']==_0xe07514[_0x3ba7ee(0x2ef)]);if(!_0x34b333)_0x25a280[_0x3ba7ee(0x34f)](_0xe07514);});let _0x35031e=[];return _0x4682b7[_0x414f08(0x256)](_0x3075be=>{const _0x566197=_0x414f08,_0x53ca0b=_0x101a2a[_0x566197(0x2bd)](_0x4df53b=>_0x4df53b[_0x566197(0x2ef)]==_0x3075be[_0x566197(0x2ef)]);if(!_0x53ca0b||_0x53ca0b[_0x566197(0x362)]==0x0&&_0x3075be['number']!=0x0)_0x35031e['push'](_0x3075be);}),{'missingDay1':_0x25a280,'notInDay2':_0x35031e};},_0x927583=dbPerformance[_0x536dbd(0x272)](_0x536dbd(0x1d3))[_0x536dbd(0x354)]()[_0x536dbd(0x317)]();if(_0x927583['length']>0x1){const {missingDay1:_0xce3f75,notInDay2:_0x45c545}=_0x22784e(_0x15272d,_0x927583[0x1]['coins']);_0x15272d=[..._0x15272d,..._0xce3f75],_0x45c545[_0x536dbd(0x256)](_0xa18a61=>{const _0x2323a4=_0x536dbd;let _0x484559=_0x15272d[_0x2323a4(0x27a)](_0x82aaf8=>_0x82aaf8[_0x2323a4(0x2ef)]==_0xa18a61[_0x2323a4(0x2ef)]);_0x484559!=-0x1&&_0x15272d[_0x2323a4(0x203)](_0x484559,0x1);});}_0x15272d[_0x536dbd(0x1d6)]((_0x5b188e,_0x2619c0)=>_0x5b188e[_0x536dbd(0x2ef)]>_0x2619c0[_0x536dbd(0x2ef)]?0x1:_0x2619c0[_0x536dbd(0x2ef)]>_0x5b188e[_0x536dbd(0x2ef)]?-0x1:0x0);let _0x3592bd=[{'date':_0x291382[_0x536dbd(0x364)],'changes':_0x15272d}];_0x927583[_0x536dbd(0x28b)]>0x2&&_0x927583['forEach']((_0xd4429f,_0xe3c7a0)=>{const _0x22a5eb=_0x536dbd;if(_0xe3c7a0>0x0&&_0xe3c7a0<_0x927583[_0x22a5eb(0x28b)]-0x1){const {missingDay1:_0x4b6c33,notInDay2:_0x5652fa}=_0x22784e(_0x927583[_0xe3c7a0][_0x22a5eb(0x23f)],_0x927583[_0xe3c7a0+0x1][_0x22a5eb(0x23f)]);_0x15272d=[],(_0x4b6c33[_0x22a5eb(0x28b)]!=0x0||_0x5652fa[_0x22a5eb(0x28b)]!=0x0)&&(_0x4b6c33['length']!=0x0&&_0x15272d[_0x22a5eb(0x34f)](..._0x4b6c33),_0x5652fa['length']!=0x0&&(_0x5652fa[_0x22a5eb(0x256)](_0x3d802a=>{const _0xd2b8ba=_0x22a5eb;_0x3d802a[_0xd2b8ba(0x362)]=-_0x3d802a['number'];}),_0x15272d[_0x22a5eb(0x34f)](..._0x5652fa)),_0x15272d['sort']((_0x556155,_0x566b67)=>_0x556155[_0x22a5eb(0x2ef)]>_0x566b67['coin']?0x1:_0x566b67[_0x22a5eb(0x2ef)]>_0x556155[_0x22a5eb(0x2ef)]?-0x1:0x0),_0x3592bd[_0x22a5eb(0x34f)]({'date':_0x927583[_0xe3c7a0+0x1][_0x22a5eb(0x318)],'changes':_0x15272d}));}}),dbConfig[_0x536dbd(0x272)](_0x536dbd(0x1e4))[_0x536dbd(0x2bd)]({'botID':botID})[_0x536dbd(0x27f)]({..._0x291382,'liquidity':_0x3592bd})[_0x536dbd(0x245)]();}}if(isOlderVersion(_0x51ea9c,_0x536dbd(0x274))){let _0x245a8e=dbConfig[_0x536dbd(0x272)](_0x536dbd(0x1e4))[_0x536dbd(0x2bd)]({'botID':botID})['value']();if(_0x245a8e){const _0x38c087=_0x245a8e['exchange'],_0x3dc894=_0x38c087?capitalize(_0x38c087):_0x536dbd(0x22f);dbConfig[_0x536dbd(0x272)]('bot')[_0x536dbd(0x2bd)]({'botID':botID})[_0x536dbd(0x27f)]({'exchange':_0x3dc894})['write']();}}let _0x30c0f4=dbPerformance[_0x536dbd(0x272)](_0x536dbd(0x26b))[_0x536dbd(0x317)]();isOlderVersion(_0x30c0f4,_0x536dbd(0x340))&&setStartDatePerformance();let _0xe74f79=dbCoinResults[_0x536dbd(0x272)](_0x536dbd(0x26b))[_0x536dbd(0x317)]();if(isOlderVersion(_0xe74f79,_0x536dbd(0x20b))){let _0xc4cdab=dbCoinResults[_0x536dbd(0x272)](_0x536dbd(0x23f))[_0x536dbd(0x317)]();if(_0xc4cdab[_0x536dbd(0x28b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3b59d3=_0xcb5e1f;dbConfig['set']('version',serverversion)[_0x3b59d3(0x245)](),dbPerformance[_0x3b59d3(0x241)](_0x3b59d3(0x26b),serverversion)[_0x3b59d3(0x245)](),dbLogs[_0x3b59d3(0x241)](_0x3b59d3(0x26b),serverversion)['write'](),dbCoinResults[_0x3b59d3(0x241)](_0x3b59d3(0x26b),serverversion)['write']();}function getConfiguration(_0x15cc53){const _0x4d056d=_0xcb5e1f;let _0x196bba=dbConfig['get'](_0x4d056d(0x1e4))[_0x4d056d(0x2bd)]({'botID':_0x15cc53})[_0x4d056d(0x317)]();if(_0x196bba){let _0x7088b7=![];typeof _0x196bba[_0x4d056d(0x32e)]=='string'&&(_0x196bba={..._0x196bba,'threshold':Number(_0x196bba['threshold'])},_0x7088b7=!![]),_0x196bba[_0x4d056d(0x2c7)]==undefined&&(_0x196bba={..._0x196bba,'change24h':-0x14},_0x7088b7=!![]),_0x196bba['fiat']==undefined&&(_0x196bba={..._0x196bba,'fiat':_0x4d056d(0x28c)},_0x7088b7=!![]),_0x196bba[_0x4d056d(0x250)]==undefined&&(_0x196bba={..._0x196bba,'onepagemode':settings[_0x4d056d(0x250)]},_0x7088b7=!![]),_0x196bba[_0x4d056d(0x342)]==undefined&&(_0x196bba={..._0x196bba,'colorscheme':_0x4d056d(0x2b9)},_0x7088b7=!![]),_0x196bba[_0x4d056d(0x2f1)]==undefined&&(_0x196bba={..._0x196bba,'autoliquidity':!![]},_0x7088b7=!![]),_0x7088b7&&(_0x196bba={'botID':_0x196bba[_0x4d056d(0x262)],'exchange':_0x196bba['exchange'],'apiKey':_0x196bba[_0x4d056d(0x2d5)],'apiSecret':_0x196bba['apiSecret'],'apiPassword':_0x196bba[_0x4d056d(0x22b)],'basecoin':_0x196bba['basecoin'],'botname':_0x196bba[_0x4d056d(0x1ef)],'showname':_0x196bba[_0x4d056d(0x218)],'threshold':_0x196bba[_0x4d056d(0x32e)],'ordertype':_0x196bba[_0x4d056d(0x346)],'timeout':_0x196bba[_0x4d056d(0x314)],'fiat':_0x196bba[_0x4d056d(0x30d)],'startdate':_0x196bba['startdate'],'recreate':_0x196bba['recreate'],'timeshift':_0x196bba['timeshift'],'onepagemode':_0x196bba[_0x4d056d(0x250)],'headless':_0x196bba[_0x4d056d(0x1f0)],'cooldown':_0x196bba[_0x4d056d(0x361)],'change24h':_0x196bba['change24h'],'emojibuy':_0x196bba[_0x4d056d(0x1f9)],'emojisell':_0x196bba[_0x4d056d(0x29e)],'colorscheme':_0x196bba[_0x4d056d(0x342)],'portfolio':_0x196bba[_0x4d056d(0x1ff)],'autoliquidity':_0x196bba['autoliquidity'],'liquidity':_0x196bba[_0x4d056d(0x319)],'openOrders':_0x196bba[_0x4d056d(0x266)]},dbConfig[_0x4d056d(0x272)]('bot')[_0x4d056d(0x2ee)]()[_0x4d056d(0x245)](),dbConfig[_0x4d056d(0x272)]('bot')['push'](_0x196bba)[_0x4d056d(0x245)]());}else _0x196bba={'botID':_0x15cc53,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4d056d(0x22c)+_0x15cc53,'showname':![],'threshold':0x3,'ordertype':_0x4d056d(0x273),'timeout':0x14,'fiat':_0x4d056d(0x28c),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4d056d(0x2aa)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x196bba;}function emittedConfiguration(){const _0x4d0337=_0xcb5e1f;let _0x4f71d6;if(config[_0x4d0337(0x2d5)]=='')_0x4f71d6={...config,'configstate':_0x4d0337(0x1e2)};else config[_0x4d0337(0x2d5)]=='***'?_0x4f71d6={...config,'configstate':_0x4d0337(0x207)}:(_0x4f71d6={...config,'apiKey':'************','apiSecret':_0x4d0337(0x306)},config[_0x4d0337(0x22b)]&&(_0x4f71d6[_0x4d0337(0x22b)]=_0x4d0337(0x306)));return _0x4f71d6;}function getSettings(){const _0x239d9d=_0xcb5e1f;return dbSettings[_0x239d9d(0x272)](_0x239d9d(0x32c))[_0x239d9d(0x317)]();}function getSecure(){const _0x45bba6=_0xcb5e1f;return dbSecure[_0x45bba6(0x272)](_0x45bba6(0x336))['value']()||{};}function updateTimeshift(_0xee5475){const _0x29d503=_0xcb5e1f;let _0x3eac80=dbConfig['get'](_0x29d503(0x1e4))[_0x29d503(0x2bd)]({'botID':botID})[_0x29d503(0x317)]();_0x3eac80&&dbConfig[_0x29d503(0x272)](_0x29d503(0x1e4))[_0x29d503(0x2bd)]({'botID':botID})['assign']({'timeshift':_0xee5475})[_0x29d503(0x245)](),config['timeshift']=_0xee5475,proxyEmit(_0x29d503(0x30a),emittedConfiguration());}function updateOnepagemode(_0x59e94e){const _0x168770=_0xcb5e1f;let _0x4bca4e=dbConfig[_0x168770(0x272)](_0x168770(0x1e4))['find']({'botID':botID})[_0x168770(0x317)]();_0x4bca4e&&dbConfig['get']('bot')[_0x168770(0x2bd)]({'botID':botID})['assign']({'onepagemode':_0x59e94e})[_0x168770(0x245)](),config['onepagemode']=_0x59e94e,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x33c6f3){const _0x51be6f=_0xcb5e1f;logger[_0x51be6f(0x2a7)](_0x51be6f(0x366));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x51be6f(0x20a));let _0x3a424a=![],_0x37f383=![],_0x38c97c=[];_0x33c6f3['portfolio'][_0x51be6f(0x256)](_0x5be693=>{const _0x26dd68=_0x51be6f;if(!_0x5be693[_0x26dd68(0x226)]&&_0x5be693['coin']!=_0x33c6f3[_0x26dd68(0x2e7)])_0x38c97c[_0x26dd68(0x34f)](_0x5be693[_0x26dd68(0x29c)]);}),_0x38c97c[_0x51be6f(0x256)](_0x330493=>{const _0x44ca76=_0x51be6f,_0x2a5a20=currentCoins[_0x44ca76(0x2bd)](_0x254f49=>_0x254f49['symbol']==_0x330493);!_0x2a5a20&&(_0x3a424a=!![]);}),currentCoins[_0x51be6f(0x256)](_0x27ea92=>{const _0x459a9a=_0x51be6f;if(_0x27ea92['coin']!=config[_0x459a9a(0x2e7)]){const _0xfd70f8=_0x38c97c[_0x459a9a(0x2bd)](_0x281b1a=>_0x281b1a==_0x27ea92['symbol']);!_0xfd70f8&&(_0x3a424a=!![]);}}),_0x33c6f3['portfolio'][_0x51be6f(0x256)](_0x25a1ae=>{const _0x192ce6=_0x51be6f,_0x5c75bc=config['portfolio'][_0x192ce6(0x2bd)](_0x5e32d9=>_0x5e32d9[_0x192ce6(0x2ef)]==_0x25a1ae[_0x192ce6(0x2ef)]);if(_0x5c75bc&&_0x25a1ae[_0x192ce6(0x2ed)]!=_0x5c75bc[_0x192ce6(0x2ed)])_0x37f383=!![];});let _0x1331df=dbConfig[_0x51be6f(0x272)](_0x51be6f(0x1e4))[_0x51be6f(0x2bd)]({'botID':botID})[_0x51be6f(0x317)]();_0x33c6f3={..._0x33c6f3,'apiKey':crypt[_0x51be6f(0x33a)](secure[_0x51be6f(0x329)],_0x33c6f3['apiKey'])['message'],'apiSecret':crypt[_0x51be6f(0x33a)](secure[_0x51be6f(0x329)],_0x33c6f3['apiSecret'])['message']};_0x33c6f3[_0x51be6f(0x22b)]&&(_0x33c6f3[_0x51be6f(0x22b)]=crypt[_0x51be6f(0x33a)](secure['privateKey'],_0x33c6f3['apiPassword'])[_0x51be6f(0x2b5)]);let _0x57e466=![];if(_0x1331df){_0x33c6f3[_0x51be6f(0x2d5)]=='************'?_0x33c6f3[_0x51be6f(0x2d5)]=config['apiKey']:_0x57e466=!![];_0x33c6f3[_0x51be6f(0x253)]==_0x51be6f(0x306)?_0x33c6f3[_0x51be6f(0x253)]=config['apiSecret']:_0x57e466=!![];if(_0x33c6f3[_0x51be6f(0x22b)]==_0x51be6f(0x306))_0x33c6f3[_0x51be6f(0x22b)]=config[_0x51be6f(0x22b)];else{if(_0x33c6f3['apiPassword'])_0x57e466=!![];}dbConfig[_0x51be6f(0x272)](_0x51be6f(0x1e4))[_0x51be6f(0x2bd)]({'botID':botID})[_0x51be6f(0x27f)](_0x33c6f3)[_0x51be6f(0x245)]();}else dbConfig[_0x51be6f(0x272)](_0x51be6f(0x1e4))[_0x51be6f(0x34f)](_0x33c6f3)[_0x51be6f(0x245)](),_0x57e466=!![],process['send']({'status':'enabled','live':_0x51be6f(0x293)},_0x4eca0f=>{});process[_0x51be6f(0x260)]({'botname':_0x33c6f3[_0x51be6f(0x1ef)]},_0x43aa5f=>{}),config={..._0x33c6f3},updateBotManager(),proxyEmit(_0x51be6f(0x229)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x57e466)await reset(!![]);else _0x3a424a||_0x37f383?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x51be6f(0x2a7)](_0x51be6f(0x230));}async function storeHeadless(_0x28d894){const _0x44890d=_0xcb5e1f,_0xc946a7={...config,'headless':_0x28d894[_0x44890d(0x1f0)]};let _0x1bd737=dbConfig[_0x44890d(0x272)](_0x44890d(0x1e4))[_0x44890d(0x2bd)]({'botID':botID})[_0x44890d(0x317)]();_0x1bd737&&dbConfig[_0x44890d(0x272)](_0x44890d(0x1e4))[_0x44890d(0x2bd)]({'botID':botID})['assign'](_0xc946a7)[_0x44890d(0x245)](),config={..._0xc946a7},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0xe0ff3){const _0x3d06b0=_0xcb5e1f,_0x56289c={...config,'fiat':_0xe0ff3};let _0x2b609a=dbConfig['get'](_0x3d06b0(0x1e4))[_0x3d06b0(0x2bd)]({'botID':botID})[_0x3d06b0(0x317)]();_0x2b609a&&dbConfig['get'](_0x3d06b0(0x1e4))[_0x3d06b0(0x2bd)]({'botID':botID})['assign'](_0x56289c)[_0x3d06b0(0x245)](),config={..._0x56289c},proxyEmit(_0x3d06b0(0x30a),emittedConfiguration());}function resetHistory(){const _0x1bd960=_0xcb5e1f;logger[_0x1bd960(0x24b)](_0x1bd960(0x309));try{if(fs['existsSync'](path[_0x1bd960(0x324)](configpath,_0x1bd960(0x2bc)+botID+_0x1bd960(0x261))))fs[_0x1bd960(0x21c)](path[_0x1bd960(0x324)](configpath,'bot-'+botID+_0x1bd960(0x261)));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-performance.json')))fs['unlinkSync'](path[_0x1bd960(0x324)](configpath,_0x1bd960(0x2bc)+botID+'-performance.json'));if(fs[_0x1bd960(0x326)](path['join'](configpath,'bot-'+botID+_0x1bd960(0x286))))fs[_0x1bd960(0x21c)](path['join'](configpath,_0x1bd960(0x2bc)+botID+_0x1bd960(0x286)));}catch(_0x198e42){if(_0x198e42)logger[_0x1bd960(0x24b)](_0x1bd960(0x2c1),_0x198e42);}const _0x30c893=getDate();let _0x53ba27=[];currentCoins[_0x1bd960(0x256)](_0xcf20e6=>{const _0x28cb21=_0x1bd960;_0x53ba27[_0x28cb21(0x34f)]({'coin':_0xcf20e6[_0x28cb21(0x2ef)],'number':_0xcf20e6[_0x28cb21(0x362)],'price':_0xcf20e6['last']});});let _0x399616=dbConfig[_0x1bd960(0x272)](_0x1bd960(0x1e4))['find']({'botID':botID})['value']();_0x399616&&(dbConfig[_0x1bd960(0x272)]('bot')['find']({'botID':botID})[_0x1bd960(0x27f)]({'liquidity':[{'date':_0x30c893,'changes':_0x53ba27}]})[_0x1bd960(0x245)](),config[_0x1bd960(0x319)]=[]),process['send']({'stop':_0x1bd960(0x2b1)},_0x37f309=>{});}function noslash(_0x38ed5a){return _0x38ed5a['replace']('/','');}function updateHighestFee(_0x266d45){const _0x28177a=_0xcb5e1f;if(_0x266d45[_0x28177a(0x1cd)]){let _0x3c7f7f={'filled':_0x266d45[_0x28177a(0x208)]*_0x266d45[_0x28177a(0x246)],'amount':_0x266d45['filled']*_0x266d45[_0x28177a(0x246)],'side':_0x266d45['side']==_0x28177a(0x1da)?_0x28177a(0x21d):_0x28177a(0x1da),'price':0x1/_0x266d45[_0x28177a(0x246)]};_0x266d45={..._0x266d45,..._0x3c7f7f};}const _0x4d0760=defaultFee*_0x266d45[_0x28177a(0x208)]*_0x266d45[_0x28177a(0x246)];lastFees['recent20'][_0x28177a(0x28b)]===0x14&&lastFees[_0x28177a(0x1e9)]['shift'](),lastFees[_0x28177a(0x1e9)][_0x28177a(0x34f)](_0x4d0760),lastFees[_0x28177a(0x2a6)]=Math['max'](...lastFees[_0x28177a(0x1e9)]);}async function updateNumberCoinsCcxt(_0x4a5bcb){const _0x41b759=_0xcb5e1f;logger[_0x41b759(0x2a7)](_0x41b759(0x1df)+_0x4a5bcb[_0x41b759(0x29c)]+_0x41b759(0x2eb)+_0x4a5bcb[_0x41b759(0x220)]+_0x41b759(0x2eb)+_0x4a5bcb[_0x41b759(0x208)]+_0x41b759(0x2fc)+_0x4a5bcb[_0x41b759(0x276)]+'\x20|\x20'+_0x4a5bcb['id']);let _0x3b4fef=_0x4a5bcb[_0x41b759(0x220)],_0x1d8008=![];currentCoins[_0x41b759(0x256)](_0x59aa6a=>{const _0x5b2291=_0x41b759;_0x59aa6a['symbol']==_0x4a5bcb[_0x5b2291(0x29c)]&&(_0x1d8008=!![]);});if(!_0x1d8008)return;const _0x31024f=currentCoins[_0x41b759(0x2bd)](_0x5e1865=>_0x5e1865[_0x41b759(0x29c)]==_0x4a5bcb[_0x41b759(0x29c)]),_0x5f3d24=_0x55f782=>{const _0x235501=_0x41b759;if(_0x31024f)_0x31024f[_0x235501(0x2c3)]=_0x55f782;};if(_0x3b4fef==_0x41b759(0x264))_0x5f3d24(_0x41b759(0x264));else{if(_0x3b4fef==_0x41b759(0x2be)){_0x5f3d24('canceled');const _0x576d8b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x576d8b,await getOpenOrders(),handleOpenOrders();}else{if(_0x3b4fef==_0x41b759(0x30c)){let _0x145cbc=![];if(lastOrders)for(const _0x45c368 of lastOrders){const _0x11caf0=0xc8,_0x10b68a=0x1388;let _0x495ee7=0x0;while(!_0x45c368[_0x41b759(0x29a)]&&_0x495ee7*_0x11caf0<_0x10b68a){_0x495ee7++,await sleep(_0x11caf0);}if(_0x495ee7>0x0)logger[_0x41b759(0x2a7)](_0x41b759(0x270)+_0x495ee7*_0x11caf0/0x3e8+_0x41b759(0x24f));if(_0x45c368[_0x41b759(0x29a)]==_0x4a5bcb['id']){logger[_0x41b759(0x2a7)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4a5bcb['id']),_0x145cbc=!![];if(_0x45c368[_0x41b759(0x208)]==0x0){logger[_0x41b759(0x2a7)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x4a5bcb['id']);if(_0x4a5bcb[_0x41b759(0x2b2)])_0x45c368[_0x41b759(0x246)]=_0x4a5bcb['average'];else{if(_0x4a5bcb['price'])_0x45c368['price']=_0x4a5bcb['price'];else{}}_0x45c368[_0x41b759(0x208)]=_0x4a5bcb['filled'],updateHighestFee(_0x45c368),_0x5f3d24(_0x41b759(0x208)),await validateOrders();if(lockOrders==ORDERS[_0x41b759(0x21f)]){const _0x48fe5b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x48fe5b;}_0x45c368['fee']={'currency':_0x4a5bcb[_0x41b759(0x1fe)]?_0x4a5bcb[_0x41b759(0x1fe)]['currency']:null,'cost':_0x4a5bcb['fee']?_0x4a5bcb[_0x41b759(0x1fe)]['cost']:0x0},await updateCoinResults(_0x45c368);}}}if(!_0x145cbc){logger['debug'](_0x41b759(0x2d8)+_0x4a5bcb['id']),_0x5f3d24(_0x41b759(0x208));const _0x4d3608=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4d3608,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x5c9403=JSON[_0x41b759(0x2ca)](lastBalances[_0x41b759(0x1ff)]);const _0x467466=_0x5c9403[_0x41b759(0x2bd)](_0x19cda6=>_0x19cda6[_0x41b759(0x29c)]==_0x4a5bcb[_0x41b759(0x29c)]);if(_0x467466){if(_0x3b4fef==_0x41b759(0x264))_0x467466[_0x41b759(0x2c3)]=_0x467466[_0x41b759(0x2c3)]==_0x41b759(0x208)?_0x41b759(0x208):_0x41b759(0x264);else{if(_0x3b4fef==_0x41b759(0x2be))_0x467466[_0x41b759(0x2c3)]=_0x467466['orderstatus']=='filled'?'filled':_0x41b759(0x2be);else _0x3b4fef==_0x41b759(0x30c)&&(_0x467466[_0x41b759(0x2c3)]=_0x41b759(0x208));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x5c9403)},proxyEmit(_0x41b759(0x22a),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1550fc=_0xcb5e1f;await getOpenOrders();let _0x22a0a3=![];currentCoins[_0x1550fc(0x256)](_0x3e0d7c=>{const _0x13e3b1=_0x1550fc;_0x22a0a3=allOpenOrders[_0x13e3b1(0x2bd)](_0x236122=>_0x236122[_0x13e3b1(0x29c)]==_0x3e0d7c[_0x13e3b1(0x29c)]),_0x3e0d7c[_0x13e3b1(0x2c3)]=_0x22a0a3?'open':_0x13e3b1(0x277);});}async function getCoins(_0x101116=0x0,_0x1191b7=!![],_0x15f55f=config['basecoin']){const _0x13cd8b=_0xcb5e1f;let _0x2afe95,_0x8309fa=[],_0x2d90d0=[],_0x12b905=[];if(_0x101116)await sleep(_0x101116);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2afe95=await exchange[_0x13cd8b(0x2f2)](),mybalances=_0x2afe95[_0x13cd8b(0x263)];for(const [_0x297854,_0x27e747]of Object[_0x13cd8b(0x30b)](mybalances)){_0x12b905[_0x13cd8b(0x34f)](_0x297854);}config[_0x13cd8b(0x1ff)][_0x13cd8b(0x256)](_0x2660e2=>{const _0x45dba1=_0x13cd8b;!_0x12b905['includes'](_0x2660e2[_0x45dba1(0x2ef)])&&(mybalances[_0x2660e2[_0x45dba1(0x2ef)]]=0x0);});if(_0x15f55f=='')for(const [_0x18eac0,_0x82ae91]of Object[_0x13cd8b(0x30b)](mybalances)){_0x82ae91!=0x0&&_0x8309fa[_0x13cd8b(0x34f)]({'coin':_0x18eac0});}else{let _0x1155c4=![];for(const [_0x3a77f4,_0x32d29f]of Object['entries'](mybalances)){const _0x4c12c3=config[_0x13cd8b(0x1ff)]['find'](_0x1ce4a2=>_0x1ce4a2[_0x13cd8b(0x2ef)]==_0x3a77f4),_0x3a21d1=_0x3a77f4+'/'+_0x15f55f,_0xb4a416=_0x15f55f+'/'+_0x3a77f4,_0x513c8e=currentCoins[_0x13cd8b(0x2bd)](_0x288173=>_0x288173[_0x13cd8b(0x2ef)]==_0x3a77f4);_0x1155c4=![];if((_0x32d29f!=0x0||_0x4c12c3)&&(allSymbols[_0x13cd8b(0x1e0)](_0x3a21d1)||_0x3a77f4==_0x15f55f))_0x8309fa[_0x13cd8b(0x34f)]({'coin':_0x3a77f4,'symbol':_0x3a21d1,'reverse':![],'number':Math[_0x13cd8b(0x1fb)](_0x32d29f+(_0x4c12c3&&_0x4c12c3['offset']||0x0),0x0),'orderstatus':_0x513c8e?_0x513c8e[_0x13cd8b(0x2c3)]:_0x13cd8b(0x277)});else{if((_0x32d29f!=0x0||_0x4c12c3)&&allSymbols[_0x13cd8b(0x1e0)](_0xb4a416))_0x8309fa['push']({'coin':_0x3a77f4,'symbol':_0xb4a416,'reverse':!![],'number':Math[_0x13cd8b(0x1fb)](_0x32d29f+(_0x4c12c3&&_0x4c12c3[_0x13cd8b(0x2ed)]||0x0),0x0),'orderstatus':_0x513c8e?_0x513c8e[_0x13cd8b(0x2c3)]:'none'});else _0x4c12c3&&_0x8309fa[_0x13cd8b(0x34f)]({'coin':_0x4c12c3[_0x13cd8b(0x2ef)],'symbol':_0x4c12c3[_0x13cd8b(0x29c)],'reverse':_0x4c12c3[_0x13cd8b(0x1cd)],'number':0x0,'orderstatus':_0x13cd8b(0x277)});}}}}catch(_0x39bdcf){if(!_0x1191b7)handleErrorNoStop(_0x39bdcf,_0x13cd8b(0x25e));else await handleError(_0x39bdcf,_0x13cd8b(0x25e));}return _0x2d90d0=cloneDeep(_0x8309fa),_0x8309fa=_0x8309fa[_0x13cd8b(0x24d)](_0x3e2b0b=>{const _0x409969=_0x13cd8b,_0x83ff02=config['portfolio']['find'](_0x4a17c3=>_0x4a17c3[_0x409969(0x2ef)]==_0x3e2b0b[_0x409969(0x2ef)]);return _0x83ff02&&!_0x83ff02[_0x409969(0x226)];}),[_0x8309fa,_0x2d90d0];}async function getCoinNumber(_0x5bf7a9){const _0x2166fb=_0xcb5e1f;let _0x45105e;try{const _0x313d45=await exchange[_0x2166fb(0x2f2)]();_0x45105e=_0x313d45[_0x2166fb(0x263)][_0x5bf7a9];}catch(_0x46644c){await handleError(_0x46644c,_0x2166fb(0x2b6));}return _0x45105e;}async function getOpenOrders(){const _0x441ba3=_0xcb5e1f;let _0x123f8c;allOpenOrders=[];try{for(const _0xf8d47a of config[_0x441ba3(0x1ff)]){!_0xf8d47a[_0x441ba3(0x226)]&&_0xf8d47a[_0x441ba3(0x2ef)]!=config[_0x441ba3(0x2e7)]&&(_0x123f8c=await exchange['fetchOpenOrders'](_0xf8d47a[_0x441ba3(0x29c)]),_0x123f8c[_0x441ba3(0x28b)]>0x0&&allOpenOrders[_0x441ba3(0x34f)](_0x123f8c[0x0]));}}catch(_0x276297){await handleError(_0x276297,'getOpenOrders()');}}async function handleOpenOrders(_0x378da3=0x0){const _0x211b9f=_0xcb5e1f;allOpenOrders[_0x211b9f(0x28b)]==0x0&&lockOrders==ORDERS[_0x211b9f(0x21f)]&&allOrdersPlaced&&(_0x378da3==0x0?(logger[_0x211b9f(0x2a7)](_0x211b9f(0x27c)),_0x378da3++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x211b9f(0x2a7)](_0x211b9f(0x26d)),validateOrders(_0x211b9f(0x2ad))));}async function testAPI(_0x39c1ae){const _0x2c0859=_0xcb5e1f,_0x3237a2=ccxt[_0x2c0859(0x228)][_0x39c1ae['exchange'][_0x2c0859(0x32f)]()],_0x27de86=new _0x3237a2({'apiKey':_0x39c1ae[_0x2c0859(0x2d5)],'secret':_0x39c1ae[_0x2c0859(0x253)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2c0859(0x30f)}});if(_0x39c1ae[_0x2c0859(0x22b)])_0x27de86['password']=_0x39c1ae[_0x2c0859(0x22b)];try{await _0x27de86[_0x2c0859(0x26e)]();}catch(_0x2851c9){throw _0x2851c9;}}function cloneDeep(_0x3d7d44){const _0x29017b=_0xcb5e1f;return JSON[_0x29017b(0x2ca)](JSON[_0x29017b(0x24a)](_0x3d7d44));}async function getPortfolio(_0x10bc2f){const _0x52eb5f=_0xcb5e1f;let _0x454891=[],_0x5a2bda=[],_0x2fa512=[],_0x43657a;if(_0x10bc2f[_0x52eb5f(0x2d5)]!=='************'||_0x10bc2f[_0x52eb5f(0x253)]!=='************'||_0x10bc2f[_0x52eb5f(0x22b)]&&_0x10bc2f[_0x52eb5f(0x22b)]!=='************'){if(config[_0x52eb5f(0x2c0)]){if(_0x10bc2f[_0x52eb5f(0x2d5)]==_0x52eb5f(0x306))_0x10bc2f['apiKey']=config[_0x52eb5f(0x2d5)];if(_0x10bc2f[_0x52eb5f(0x253)]==_0x52eb5f(0x306))_0x10bc2f[_0x52eb5f(0x253)]=config[_0x52eb5f(0x253)];if(_0x10bc2f[_0x52eb5f(0x22b)]=='************')_0x10bc2f['apiPassword']=config[_0x52eb5f(0x22b)];try{await testAPI(_0x10bc2f);}catch(_0x85df89){if(_0x85df89[_0x52eb5f(0x1f6)]()[_0x52eb5f(0x1e0)](_0x52eb5f(0x34b))){logger[_0x52eb5f(0x2a7)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x52eb5f(0x1ff),![]);return;}else{handleError(_0x85df89,_0x52eb5f(0x252));return;}}}await initExchange(_0x10bc2f['exchange'],_0x10bc2f[_0x52eb5f(0x2d5)],_0x10bc2f[_0x52eb5f(0x253)],_0x10bc2f['apiPassword']);try{await loadSymbols();}catch(_0x42d6b9){if(_0x42d6b9[_0x52eb5f(0x1f6)]()[_0x52eb5f(0x1e0)](_0x52eb5f(0x34b))){proxyEmit(_0x52eb5f(0x1ff),![]);return;}else{handleError(_0x42d6b9,'getPortfolio(1)');return;}}const _0x53bd36=await getCoins(0x0,![],_0x10bc2f[_0x52eb5f(0x2e7)]);_0x2fa512=cloneDeep(_0x53bd36[0x1]);}else{const _0x3dc7b3=await getCoins();_0x2fa512=cloneDeep(_0x3dc7b3[0x1]);}if(_0x10bc2f[_0x52eb5f(0x2e7)]=='')proxyEmit(_0x52eb5f(0x1ff),_0x2fa512);else{_0x2fa512[_0x52eb5f(0x256)](_0x1004c0=>{const _0x3da27c=_0x52eb5f;if(_0x1004c0[_0x3da27c(0x2ef)]!=_0x10bc2f['basecoin']&&allSymbols[_0x3da27c(0x1e0)](_0x1004c0[_0x3da27c(0x29c)]))_0x454891[_0x3da27c(0x34f)](_0x1004c0[_0x3da27c(0x29c)]);});if(_0x454891[_0x52eb5f(0x28b)]==0x0)logHistory('error',_0x52eb5f(0x2af));else{try{_0x5a2bda=await getTickers(_0x454891);}catch(_0xc11581){if(_0xc11581['toString']()[_0x52eb5f(0x1e0)]('AuthenticationError')){proxyEmit(_0x52eb5f(0x1ff),![]);return;}else handleError(_0xc11581,_0x52eb5f(0x2fd));}_0x2fa512['forEach'](_0x5aa850=>{const _0x44adf4=_0x52eb5f;_0x5aa850[_0x44adf4(0x2ef)]!=_0x10bc2f['basecoin']?_0x5a2bda[_0x5aa850[_0x44adf4(0x29c)]]?_0x43657a=_0x5aa850['reverse']?0x1/_0x5a2bda[_0x5aa850['symbol']]['last']:_0x5a2bda[_0x5aa850[_0x44adf4(0x29c)]]['last']:_0x43657a=0x0:_0x43657a=0x1,_0x5aa850[_0x44adf4(0x246)]=formatResult(_0x43657a,0x8);}),proxyEmit(_0x52eb5f(0x1ff),_0x2fa512);}}}function truncateTradeAmount(_0x2aa5d8,_0x3293c1){const _0x30961e=_0xcb5e1f;let _0xe6d3cd=0x0;try{_0xe6d3cd=exchange[_0x30961e(0x2c2)](_0x2aa5d8,_0x3293c1);}catch(_0x3fdf42){}return _0xe6d3cd;}function checkMinimums(_0x2462f8){const _0x151b2d=_0xcb5e1f;let _0x380cdd=!![];const _0x2931f5=!_0x2462f8[_0x151b2d(0x1cd)]?markets[_0x2462f8[_0x151b2d(0x29c)]][_0x151b2d(0x248)][_0x151b2d(0x276)]['min']:markets[_0x2462f8[_0x151b2d(0x29c)]][_0x151b2d(0x248)][_0x151b2d(0x2df)][_0x151b2d(0x283)],_0x151d4a=!_0x2462f8[_0x151b2d(0x1cd)]?markets[_0x2462f8[_0x151b2d(0x29c)]][_0x151b2d(0x248)]['cost'][_0x151b2d(0x283)]:markets[_0x2462f8[_0x151b2d(0x29c)]]['limits'][_0x151b2d(0x276)][_0x151b2d(0x283)],_0x2c11ee=truncateTradeAmount(_0x2462f8[_0x151b2d(0x29c)],_0x2462f8[_0x151b2d(0x22e)]);_0x2462f8['trade']=_0x2c11ee;if(Math[_0x151b2d(0x26f)](_0x2c11ee)<_0x2931f5)_0x380cdd=![];if(Math[_0x151b2d(0x26f)](_0x2c11ee)*_0x2462f8[_0x151b2d(0x302)]<_0x151d4a)_0x380cdd=![];if(_0x2462f8['side']==_0x151b2d(0x1da)){let _0x3feed0=config[_0x151b2d(0x1ff)][_0x151b2d(0x2bd)](_0x25bf34=>_0x25bf34[_0x151b2d(0x2ef)]==_0x2462f8[_0x151b2d(0x2ef)]);if(_0x3feed0[_0x151b2d(0x2ed)]>0x0){if(Math['abs'](_0x2c11ee)>_0x2462f8['number']-_0x3feed0[_0x151b2d(0x2ed)])_0x380cdd=![];}else{if(Math['abs'](_0x2c11ee)>_0x2462f8[_0x151b2d(0x362)])_0x380cdd=![];}}if(_0x2462f8['side']=='buy'){let _0x3cb8e0=config[_0x151b2d(0x1ff)][_0x151b2d(0x2bd)](_0x3e575d=>_0x3e575d[_0x151b2d(0x2ef)]==config[_0x151b2d(0x2e7)]),_0x390e96=currentCoins[_0x151b2d(0x2bd)](_0x463c8e=>_0x463c8e[_0x151b2d(0x2ef)]==config[_0x151b2d(0x2e7)]);if(_0x3cb8e0['offset']>0x0){if(Math[_0x151b2d(0x26f)](_0x2c11ee)*_0x2462f8[_0x151b2d(0x302)]>_0x390e96[_0x151b2d(0x362)]-_0x3cb8e0['offset'])_0x380cdd=![];}else{if(Math[_0x151b2d(0x26f)](_0x2c11ee)*_0x2462f8[_0x151b2d(0x302)]>_0x390e96[_0x151b2d(0x362)])_0x380cdd=![];}}return _0x380cdd;}async function getBalances(_0x415221=!![]){const _0x48b963=_0xcb5e1f;let _0x324ea5=0x0,_0x560fd0;const _0x1cdb0e=config[_0x48b963(0x32e)];if(config['headless']&&config[_0x48b963(0x2c7)]<0x0)await validate24hChanges();currentCoins[_0x48b963(0x256)](_0x48977d=>{const _0x2546da=_0x48b963;if(_0x48977d['coin']!=config[_0x2546da(0x2e7)]){let _0x53c9e7=global[_0x2546da(0x2bb)][noslash(_0x48977d[_0x2546da(0x29c)])];_0x560fd0=_0x48977d['reverse']?0x1/_0x53c9e7:_0x53c9e7;}else _0x560fd0=0x1;let _0x358e48=_0x48977d[_0x2546da(0x362)]*_0x560fd0;_0x324ea5+=_0x358e48,_0x48977d[_0x2546da(0x302)]=formatResult(Number(_0x560fd0),0x8),_0x48977d[_0x2546da(0x317)]=_0x358e48;}),currentCoins['forEach'](_0x567489=>{const _0x331464=_0x48b963;let _0x28bd57=config[_0x331464(0x1ff)][_0x331464(0x2bd)](_0x13c5d1=>_0x13c5d1['coin']==_0x567489[_0x331464(0x2ef)]),_0x3097ef=Number(_0x28bd57['distribution']),_0x1926b5=_0x567489['value']/_0x324ea5*0x64,_0x52d28a=_0x3097ef*_0x324ea5/0x64/_0x567489['last']-_0x567489[_0x331464(0x362)];_0x567489[_0x331464(0x2d9)]=formatResult(_0x1926b5,0x3),_0x567489[_0x331464(0x2a1)]=formatResult(_0x3097ef,0x3),_0x567489['trade']=formatResult(_0x52d28a,0x8),_0x567489[_0x331464(0x243)]='',_0x567489[_0x331464(0x360)]=![];if(_0x567489[_0x331464(0x2ef)]!=config[_0x331464(0x2e7)]){if(_0x567489[_0x331464(0x2d9)]>_0x3097ef)_0x567489[_0x331464(0x243)]='sell',_0x567489['valid']=checkMinimums(_0x567489);else _0x567489[_0x331464(0x2d9)]<_0x3097ef&&(_0x567489[_0x331464(0x243)]=_0x331464(0x21d),_0x567489['valid']=checkMinimums(_0x567489));}_0x567489[_0x331464(0x32a)]=_0x567489['distribution']/_0x567489['target']-0x1;if(_0x567489['orderstatus']=='filled'||_0x567489[_0x331464(0x2c3)]=='canceled')_0x567489['orderstatus']=_0x331464(0x277);}),currentCoins[_0x48b963(0x1d6)]((_0x13bbd7,_0x4fc795)=>_0x13bbd7[_0x48b963(0x32a)]<_0x4fc795[_0x48b963(0x32a)]?0x1:_0x4fc795[_0x48b963(0x32a)]<_0x13bbd7[_0x48b963(0x32a)]?-0x1:0x0);const _0x32eb21=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x32eb21['eur'],'usd':_0x32eb21[_0x48b963(0x1fa)],'portfolio':JSON[_0x48b963(0x24a)](currentCoins),'threshold':_0x1cdb0e},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x415221){if(config[_0x48b963(0x1f0)])headlessMode({'portfolio':currentCoins,'threshold':_0x1cdb0e});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1cdb0e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x87bbda=getNormalizedPerformance();getStartingBalances(_0x87bbda),emitPerformance(_0x87bbda);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5a94cc=getNormalizedPerformance();emitPerformance(_0x5a94cc),getStartingBalances(_0x5a94cc),logger[_0x48b963(0x2a7)](_0x48b963(0x21b));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x8ab276=_0xcb5e1f;if(!lastBalances)return;let _0x88874c=[],_0x6e3031,_0xdd4f80=JSON[_0x8ab276(0x2ca)](lastBalances[_0x8ab276(0x1ff)]);_0xdd4f80['sort']((_0x1dae63,_0x434694)=>_0x1dae63[_0x8ab276(0x2ef)]>_0x434694['coin']?0x1:_0x434694[_0x8ab276(0x2ef)]>_0x1dae63[_0x8ab276(0x2ef)]?-0x1:0x0),_0xdd4f80[_0x8ab276(0x256)](_0x354916=>{const _0x264fbe=_0x8ab276;let _0x4ed825={'coin':_0x354916[_0x264fbe(0x2ef)],'number':_0x354916[_0x264fbe(0x362)],'price':_0x354916[_0x264fbe(0x302)]};_0x88874c[_0x264fbe(0x34f)](_0x4ed825);});const _0x3c20b9=await getFiat();_0x6e3031={'date':lastBalances['time'][_0x8ab276(0x1c9)]('\x20')[0x0],'eur':_0x3c20b9['eur'],'usd':_0x3c20b9[_0x8ab276(0x1fa)],'coins':_0x88874c};let _0xf2dd80=dbPerformance[_0x8ab276(0x272)]('data')[_0x8ab276(0x2bd)]({'date':_0x6e3031['date']})['value']();_0xf2dd80?_0x6e3031[_0x8ab276(0x318)]!=config['startdate']&&dbPerformance[_0x8ab276(0x272)](_0x8ab276(0x1d3))[_0x8ab276(0x2bd)]({'date':_0x6e3031[_0x8ab276(0x318)]})['assign'](_0x6e3031)['write']():dbPerformance[_0x8ab276(0x272)](_0x8ab276(0x1d3))[_0x8ab276(0x34f)](_0x6e3031)[_0x8ab276(0x245)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x460ad4=_0xcb5e1f;let _0x1f618e=[];if(dbPerformance['has'](_0x460ad4(0x1d3))[_0x460ad4(0x317)]()){let _0x5ec549=dbPerformance[_0x460ad4(0x272)](_0x460ad4(0x1d3))['cloneDeep']()[_0x460ad4(0x24d)](_0x4cf2ec=>{const _0x4f7ffa=_0x460ad4;if(_0x4cf2ec[_0x4f7ffa(0x23f)]['length']==0x0)return![];else return!![];})[_0x460ad4(0x2d7)](_0x460ad4(0x318))['value'](),_0x5793ae=[...config[_0x460ad4(0x319)]];_0x5793ae[_0x460ad4(0x1d6)]((_0x39e0cf,_0x103b8a)=>_0x39e0cf[_0x460ad4(0x318)]>_0x103b8a[_0x460ad4(0x318)]?-0x1:_0x103b8a['date']>_0x39e0cf[_0x460ad4(0x318)]?0x1:0x0);let _0x2c8326=0x1,_0x5458d6=[],_0x382eb5=0x0;_0x5ec549[_0x460ad4(0x31f)]()[_0x460ad4(0x1cd)]()['forEach']((_0x5751b9,_0x205c9e)=>{const _0x113440=_0x460ad4;if(_0x5793ae[_0x382eb5]){if(_0x5ec549[_0x5ec549[_0x113440(0x28b)]-_0x205c9e]&&_0x5793ae[_0x382eb5][_0x113440(0x318)]==_0x5ec549[_0x5ec549[_0x113440(0x28b)]-_0x205c9e][_0x113440(0x318)]){if(_0x205c9e<_0x5ec549[_0x113440(0x28b)]){let _0x5c0b7a=0x0,_0x154ae3=0x0;_0x5ec549[_0x5ec549[_0x113440(0x28b)]-_0x205c9e]['coins']['forEach'](_0x383bee=>{const _0x597aa9=_0x113440;_0x154ae3+=_0x383bee[_0x597aa9(0x362)]*_0x383bee[_0x597aa9(0x246)];}),_0x5793ae[_0x382eb5][_0x113440(0x221)][_0x113440(0x256)](_0x567ae9=>{const _0x4c67cd=_0x113440;_0x5c0b7a+=_0x567ae9[_0x4c67cd(0x362)]*_0x567ae9[_0x4c67cd(0x246)];}),_0x2c8326*=_0x5c0b7a/(_0x154ae3-_0x5c0b7a)+0x1;}_0x382eb5++;}}let _0x2b3283=0x0;_0x5751b9[_0x113440(0x23f)][_0x113440(0x256)](_0x559c15=>{const _0x6b7bf4=_0x113440;_0x2b3283+=_0x559c15[_0x6b7bf4(0x362)]*_0x559c15[_0x6b7bf4(0x246)];}),_0x5458d6[_0x5ec549[_0x113440(0x28b)]-_0x205c9e-0x1]=_0x2b3283*(_0x2c8326-0x1);});let _0x44e2d7=[];_0x5793ae=[...config['liquidity']]||[];let _0xa4d2c8=0x0;_0x382eb5=0x0,_0x5ec549['forEach']((_0x39490a,_0x5ecb8c)=>{const _0x182727=_0x460ad4;if(_0x5793ae[_0x382eb5]){const _0x6be1f7=fns[_0x182727(0x2ca)](_0x5793ae[_0x382eb5]['date'],_0x182727(0x333),new Date()),_0x12131b=fns['parse'](_0x39490a[_0x182727(0x318)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x6be1f7,_0x12131b)){let _0x1d679a=0x0;_0x5793ae[_0x382eb5][_0x182727(0x221)]['forEach'](_0x4d2ef4=>{const _0x321b2b=_0x182727;!_0x44e2d7[_0x4d2ef4[_0x321b2b(0x2ef)]]?_0x44e2d7[_0x4d2ef4[_0x321b2b(0x2ef)]]=_0x4d2ef4[_0x321b2b(0x362)]:(_0x1d679a=_0x44e2d7[_0x4d2ef4[_0x321b2b(0x2ef)]],_0x44e2d7[_0x4d2ef4[_0x321b2b(0x2ef)]]+=_0x4d2ef4[_0x321b2b(0x362)]);const _0x5d369d=_0x39490a[_0x321b2b(0x23f)]['find'](_0x2c50b1=>_0x2c50b1[_0x321b2b(0x2ef)]==_0x4d2ef4[_0x321b2b(0x2ef)]);(!_0x5d369d||_0x5d369d[_0x321b2b(0x362)]==0x0)&&(_0xa4d2c8+=(-_0x4d2ef4[_0x321b2b(0x362)]-_0x1d679a)*_0x4d2ef4['price']);}),_0x382eb5++;}}_0x39490a[_0x182727(0x23f)]['forEach']((_0x15bd7a,_0x5b6a56)=>{const _0x26c1b5=_0x182727;_0x44e2d7[_0x15bd7a[_0x26c1b5(0x2ef)]]&&(_0x15bd7a['initial']=_0x44e2d7[_0x15bd7a['coin']]);}),_0x1f618e[_0x182727(0x34f)]({'date':_0x39490a[_0x182727(0x318)],'eur':_0x39490a[_0x182727(0x2c5)],'usd':_0x39490a['usd'],'offset':_0x5458d6[_0x5ecb8c],'netoffset':_0xa4d2c8,'coins':_0x39490a[_0x182727(0x23f)]});});}return _0x1f618e;}function emitPerformance(_0xcb68b3){const _0x291de4=_0xcb5e1f;_0xcb68b3[_0x291de4(0x28b)]!==0x0?(proxyEmit(_0x291de4(0x23e),_0xcb68b3),lastPerformanceEmitted=getDate()):proxyEmit(_0x291de4(0x23e),[]);}function getPerf(_0x25aa5f,_0x3ab57b){const _0x2c6678=_0xcb5e1f;let _0x5c4be2=0x0,_0x30b243=0x0,_0x2fbf7a=0x0;_0x25aa5f[_0x2c6678(0x23f)][_0x2c6678(0x256)](_0x18b40e=>{const _0x16f2a0=_0x2c6678;_0x5c4be2+=_0x18b40e[_0x16f2a0(0x362)]*_0x18b40e[_0x16f2a0(0x246)];});_0x3ab57b&&(_0x5c4be2+=_0x25aa5f[_0x2c6678(0x2ed)]);if(config[_0x2c6678(0x2e7)]===_0x2c6678(0x2ba)||config[_0x2c6678(0x2e7)]===_0x2c6678(0x290)||config[_0x2c6678(0x2e7)]==='PAXG')_0x30b243=_0x5c4be2*_0x25aa5f[_0x2c6678(0x2c5)],_0x2fbf7a=_0x5c4be2*_0x25aa5f[_0x2c6678(0x1fa)];else{if(usdBasecoins['includes'](config[_0x2c6678(0x2e7)]))_0x30b243=_0x5c4be2*_0x25aa5f['eur']/_0x25aa5f[_0x2c6678(0x1fa)],_0x2fbf7a=_0x5c4be2;else config[_0x2c6678(0x2e7)]===_0x2c6678(0x20d)&&(_0x30b243=_0x5c4be2,_0x2fbf7a=_0x5c4be2*_0x25aa5f[_0x2c6678(0x1fa)]/_0x25aa5f[_0x2c6678(0x2c5)]);}return[_0x5c4be2,_0x30b243,_0x2fbf7a];}function _0x153b(_0x20e7c7,_0x4706f3){const _0x5823ba=_0x35ed();return _0x153b=function(_0x37e4f1,_0x1aaf2c){_0x37e4f1=_0x37e4f1-0x1c7;let _0x35ed61=_0x5823ba[_0x37e4f1];return _0x35ed61;},_0x153b(_0x20e7c7,_0x4706f3);}function getKPIs(_0xaaa58a,_0x2e2943=_0xcb5e1f(0x20d)){const _0x581e15=_0xcb5e1f,_0x1bf150=config[_0x581e15(0x2e7)],_0x47be19=lastBalances,_0x5a56ae=currentCoins,_0x4a9e20=getNormalizedPerformance(),_0x1bf12c=_0xaaa58a==='basecoin'?_0x1bf150:_0xaaa58a===_0x581e15(0x30d)||_0xaaa58a===_0x581e15(0x2d4)?_0x2e2943:'Net\x20'+_0x1bf150,_0x413401=_0xaaa58a===_0x581e15(0x1c8)?_0x581e15(0x217):_0xaaa58a===_0x581e15(0x2d4)?'Net\x20effect':_0x1bf12c+_0x581e15(0x215),_0xbc7d63=_0xaaa58a==='net-basecoin'||_0xaaa58a===_0x581e15(0x2d4)?_0x581e15(0x217):_0x1bf12c+_0x581e15(0x355);let _0x4e3e39=0x0;_0x5a56ae['forEach'](_0x24e9c7=>{const _0x46fd84=_0x581e15;_0x4e3e39+=_0x24e9c7[_0x46fd84(0x362)]*_0x24e9c7['last'];});if(_0xaaa58a===_0x581e15(0x30d)||_0xaaa58a===_0x581e15(0x2d4)){if(_0x1bf150===_0x581e15(0x2ba)||_0x1bf150===_0x581e15(0x290)||_0x1bf150===_0x581e15(0x344))_0x4e3e39=_0x4e3e39*(_0x2e2943===_0x581e15(0x20d)?_0x47be19[_0x581e15(0x2c5)]:_0x47be19['usd']);else{if(usdBasecoins[_0x581e15(0x1e0)](_0x1bf150))_0x4e3e39=_0x4e3e39*(_0x2e2943===_0x581e15(0x20d)?_0x47be19['eur']/_0x47be19[_0x581e15(0x1fa)]:0x1);else _0x1bf150===_0x581e15(0x20d)&&(_0x4e3e39=_0x4e3e39*(_0x2e2943===_0x581e15(0x20d)?0x1:_0x47be19[_0x581e15(0x1fa)]/_0x47be19[_0x581e15(0x2c5)]));}}let _0x3aec12;if(_0x4e3e39!==0x0){if(_0xaaa58a===_0x581e15(0x2e7))_0x3aec12=(_0x4e3e39/startingBalances[_0x581e15(0x2e7)]-0x1)*0x64;else{if(_0x2e2943===_0x581e15(0x20d))_0x3aec12=(_0x4e3e39/startingBalances[_0x581e15(0x2c5)]-0x1)*0x64;else _0x3aec12=(_0x4e3e39/startingBalances[_0x581e15(0x1fa)]-0x1)*0x64;}let _0x171aad=0x0;if(startingBalances[_0x581e15(0x23f)])_0x5a56ae[_0x581e15(0x256)](_0x2873f7=>{const _0x174c82=_0x581e15;let _0x1ca287=startingBalances['coins'][_0x174c82(0x2bd)](_0x4b7099=>_0x4b7099[_0x174c82(0x2ef)]===_0x2873f7[_0x174c82(0x2ef)]);if(_0x1ca287&&_0x1ca287[_0x174c82(0x2ef)]&&_0x2873f7[_0x174c82(0x362)]!==0x0)_0x171aad+=_0x1ca287[_0x174c82(0x362)]*_0x2873f7['last'];});let _0x3482ec=0x0;if(_0x4a9e20['length']!==0x0){let _0x28fdcb=_0x4a9e20[_0x4a9e20['length']-0x1];_0x3482ec=_0x28fdcb['netoffset'];}_0x171aad-=_0x3482ec;_0xaaa58a===_0x581e15(0x1c8)&&(_0x3aec12=(_0x4e3e39-_0x171aad)/startingBalances[_0x581e15(0x2e7)]*0x64,_0x4e3e39=_0x4e3e39-_0x171aad);if(_0xaaa58a===_0x581e15(0x2d4)){let _0xd696ed=_0x2e2943===_0x581e15(0x20d)?startingBalances[_0x581e15(0x2c5)]:startingBalances['usd'];if(_0x1bf150===_0x581e15(0x2ba)||_0x1bf150===_0x581e15(0x290)||_0x1bf150===_0x581e15(0x344))_0x171aad=_0x2e2943===_0x581e15(0x20d)?_0x171aad*_0x47be19['eur']:_0x171aad*_0x47be19[_0x581e15(0x1fa)];else{if(usdBasecoins[_0x581e15(0x1e0)](_0x1bf150))_0x171aad=_0x2e2943===_0x581e15(0x20d)?_0x171aad*_0x47be19[_0x581e15(0x2c5)]/_0x47be19[_0x581e15(0x1fa)]:_0x171aad;else _0x1bf150==='EUR'&&(_0x171aad=_0x2e2943===_0x581e15(0x20d)?_0x171aad:_0x171aad*_0x47be19[_0x581e15(0x1fa)]/_0x47be19[_0x581e15(0x2c5)]);}_0x3aec12=(_0x4e3e39-_0x171aad)/_0xd696ed*0x64,_0x4e3e39=_0x4e3e39-_0x171aad;}if(_0x3aec12){if(_0x3aec12<0x64)_0x3aec12=_0x3aec12[_0x581e15(0x27e)](0x2);else{if(_0x3aec12<0x3e8)_0x3aec12=_0x3aec12[_0x581e15(0x27e)](0x1);else _0x3aec12=_0x3aec12[_0x581e15(0x27e)](0x0);}}else _0x3aec12=Number('0')[_0x581e15(0x27e)](0x2);if(_0x4e3e39){if(Math[_0x581e15(0x26f)](_0x4e3e39)<0.000001)_0x4e3e39=_0x4e3e39[_0x581e15(0x27e)](0x2);else{if(Math[_0x581e15(0x26f)](_0x4e3e39)<0.1)_0x4e3e39=_0x4e3e39[_0x581e15(0x27e)](0x6);else{if(Math['abs'](_0x4e3e39)<0x1)_0x4e3e39=_0x4e3e39[_0x581e15(0x27e)](0x5);else{if(Math[_0x581e15(0x26f)](_0x4e3e39)<0xa)_0x4e3e39=_0x4e3e39[_0x581e15(0x27e)](0x4);else{if(Math[_0x581e15(0x26f)](_0x4e3e39)<0x64)_0x4e3e39=_0x4e3e39['toFixed'](0x3);else{if(Math['abs'](_0x4e3e39)<0x3e8)_0x4e3e39=_0x4e3e39[_0x581e15(0x27e)](0x2);else _0x4e3e39=_0x4e3e39['toFixed'](0x2);}}}}}}else _0x4e3e39=Number('0')[_0x581e15(0x27e)](0x2);}else _0x3aec12=Number('0')[_0x581e15(0x27e)](0x2);return{'value':_0x4e3e39,'change':_0x3aec12,'leftTxt':_0x413401,'rightTxt':_0xbc7d63};}async function getStartingBalances(_0xd347ca,_0x197b19=!![]){const _0x493a2f=_0xcb5e1f;if(_0xd347ca['length']!==0x0){const [_0x5a2e5f,_0x186fe9,_0x4b78ab]=getPerf(_0xd347ca[0x0],!![]);let _0x4ae2df=[];config[_0x493a2f(0x1ff)][_0x493a2f(0x256)](_0xdd62=>{const _0x1fad25=_0x493a2f;let _0x276311=0x0,_0x2ac54a;config[_0x1fad25(0x319)][_0x1fad25(0x256)](_0x110df7=>{const _0xb922ec=_0x1fad25;let _0xfc4783=_0x110df7[_0xb922ec(0x221)]['find'](_0x2a88a7=>_0x2a88a7[_0xb922ec(0x2ef)]==_0xdd62[_0xb922ec(0x2ef)]);if(_0xfc4783){_0x276311+=_0xfc4783[_0xb922ec(0x362)];if(!_0x2ac54a)_0x2ac54a=_0xfc4783[_0xb922ec(0x246)];}}),_0x4ae2df['push']({'coin':_0xdd62[_0x1fad25(0x2ef)],'number':_0x276311,'initialprice':_0x2ac54a});});const _0x4d2ce9={'basecoin':_0x5a2e5f,'eur':_0x186fe9,'usd':_0x4b78ab,'coins':_0x4ae2df};if(_0x197b19)proxyEmit(_0x493a2f(0x335),_0x4d2ce9);startingBalances=_0x4d2ce9;}}function headlessMode(_0x1a51fe){const _0x989c8e=_0xcb5e1f;let _0x1362aa=_0x1a51fe['portfolio'],_0x3f6b2c=_0x1a51fe['threshold'],_0x29d234=[];for(let _0x2c1e3b of _0x1362aa){if(_0x2c1e3b['coin']!=config[_0x989c8e(0x2e7)]){if(_0x2c1e3b[_0x989c8e(0x32a)]>=_0x3f6b2c/0x64){if(_0x2c1e3b['valid'])_0x29d234[_0x989c8e(0x34f)](_0x2c1e3b);}else{if(_0x2c1e3b[_0x989c8e(0x32a)]<=-_0x3f6b2c/0x64){if(_0x2c1e3b[_0x989c8e(0x360)])_0x29d234[_0x989c8e(0x34f)](_0x2c1e3b);}}}}_0x29d234['length']>0x0&&(lockOrders==ORDERS[_0x989c8e(0x1ca)]&&!coolingDown&&_0x29d234['forEach'](_0x40ac9e=>{const _0x298042=_0x989c8e;logger[_0x298042(0x2a7)](_0x298042(0x31d)+_0x40ac9e[_0x298042(0x2ef)]+'\x20'+_0x40ac9e['number']+'\x20'+_0x40ac9e[_0x298042(0x302)]+'\x20'+_0x40ac9e[_0x298042(0x2d9)]+'%\x20'+_0x40ac9e['target']+'%\x20'+(0x64*_0x40ac9e['delta'])[_0x298042(0x27e)](0x2)+_0x298042(0x1f2)+_0x3f6b2c[_0x298042(0x27e)](0x2)+'%)');}),placeOrder(_0x29d234));}function notifyBalance(_0x4c6539){const _0xed4325=_0xcb5e1f;let _0x25a6ea=_0x4c6539['portfolio'],_0x5e7989=_0x4c6539['threshold'],_0x37c719=[];for(let _0x564aec of _0x25a6ea){if(_0x564aec[_0xed4325(0x2ef)]!=config[_0xed4325(0x2e7)]){if(_0x564aec[_0xed4325(0x32a)]>=_0x5e7989/0x64){if(_0x564aec[_0xed4325(0x360)])_0x37c719['push'](_0x564aec);}else{if(_0x564aec[_0xed4325(0x32a)]<=-_0x5e7989/0x64){if(_0x564aec[_0xed4325(0x360)])_0x37c719['push'](_0x564aec);}}}}if(_0x37c719[_0xed4325(0x28b)]>0x0){let _0x4b391a=_0x37c719[_0xed4325(0x32b)](_0x2128a9=>_0x2128a9[_0xed4325(0x2ef)]);_0x4b391a['sort']();let _0x461b21=_0x4b391a[_0xed4325(0x324)](',\x20');if(!lastCoinsToBalance)logHistory(_0xed4325(0x31b),_0xed4325(0x1fd));lastCoinsToBalance=_0x461b21;}}function symbolToCoin(_0x18776e){const _0x389bfe=_0xcb5e1f;let _0x159238;if(_0x18776e['includes']('/'+config[_0x389bfe(0x2e7)]))_0x159238=_0x18776e[_0x389bfe(0x2b7)]('/'+config['basecoin'],'');if(_0x18776e[_0x389bfe(0x1e0)](config['basecoin']+'/'))_0x159238=_0x18776e['replace'](config[_0x389bfe(0x2e7)]+'/','');return _0x159238;}async function unlockOrders(){const _0xfe7a15=_0xcb5e1f;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0xfe7a15(0x2a7)](_0xfe7a15(0x2e5)),lockOrders=ORDERS[_0xfe7a15(0x2f8)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4801c3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4801c3,validateOrdersState=_0xfe7a15(0x1e2),persistOpenOrders([]),lockOrders=ORDERS[_0xfe7a15(0x1ca)],logger['debug'](_0xfe7a15(0x2b8));}}async function validateOrders(_0x108d98){const _0x3e8398=_0xcb5e1f;if(_0x108d98)validateOrdersState=_0x108d98;logger[_0x3e8398(0x2a7)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x3e8398(0x231)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x3e8398(0x210):'ORDERS.UNLOCKED'));let _0xadf75=[],_0x5bb21b=config['ordertype']==_0x3e8398(0x273)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3e8398(0x21f)])return;logger[_0x3e8398(0x2a7)](_0x3e8398(0x1ee)+validateOrdersState),lastOrders['forEach'](_0x2c17f5=>{const _0x35e0a1=_0x3e8398;let _0x3d09e9=![];_0x2c17f5[_0x35e0a1(0x208)]>0x0&&(_0x3d09e9=!![]),_0xadf75[_0x35e0a1(0x34f)](_0x3d09e9),_0x3d09e9&&config['ordertype']!='market'&&logHistory(_0x35e0a1(0x1d5),'Order\x20filled:\x20'+_0x2c17f5[_0x35e0a1(0x29c)]+'\x20'+_0x2c17f5[_0x35e0a1(0x243)]+'\x20#'+formatResult(_0x2c17f5[_0x35e0a1(0x208)],0x8)+'\x20@'+formatResult(_0x2c17f5[_0x35e0a1(0x246)],0x8));}),_0xadf75[_0x3e8398(0x256)]((_0x168ba6,_0x181782)=>{const _0x1d16c0=_0x3e8398;if(_0x168ba6)lastOrders[_0x1d16c0(0x203)](_0x181782,0x1);}),persistOpenOrders(lastOrders);const _0x528037=coolingDown?_0x3e8398(0x2a2):_0x3e8398(0x1e5);if(validateOrdersState==_0x3e8398(0x1e2)){validateOrdersState=_0x3e8398(0x2b0);if(_0xadf75[_0x3e8398(0x1e0)](![])){if(config['ordertype']==_0x3e8398(0x273)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3e8398(0x2b0)){if(_0xadf75[_0x3e8398(0x1e0)](![])){}else{if(allOrdersPlaced){if(config[_0x3e8398(0x346)]==_0x3e8398(0x273)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3e8398(0x23b))_0xadf75[_0x3e8398(0x1e0)](![])&&(config[_0x3e8398(0x346)]==_0x3e8398(0x273)?logHistory(_0x3e8398(0x25f),_0x3e8398(0x1f5)+Math[_0x3e8398(0x268)](_0x5bb21b*validateOrderInterval/0xea60)+_0x3e8398(0x23a)+_0x528037):(await cancelOrders(),logHistory(_0x3e8398(0x25f),_0x3e8398(0x341)+Math['round'](_0x5bb21b*validateOrderInterval/0xea60)+_0x3e8398(0x23a)+_0x528037))),await unlockOrders();else{if(validateOrdersState==_0x3e8398(0x2ad)){if(config['ordertype']!='market')logHistory(_0x3e8398(0x25f),_0x3e8398(0x299)+_0x528037);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x3c6448=>{const _0x16ede6=_0x153b;try{const _0x22f99c=await exchange[_0x16ede6(0x2a9)](_0x3c6448[_0x16ede6(0x29a)],_0x3c6448[_0x16ede6(0x29c)]);}catch(_0x40dae9){if(_0x40dae9[_0x16ede6(0x1f6)]()[_0x16ede6(0x1e0)](_0x16ede6(0x310))){}else await handleError(_0x40dae9,_0x16ede6(0x1d4));}});}async function initCoinResults(_0x44fe3b){const _0xc13df3=_0xcb5e1f;_0x44fe3b?logger[_0xc13df3(0x2a7)](_0xc13df3(0x334)+_0x44fe3b):logger[_0xc13df3(0x2a7)](_0xc13df3(0x339)),config[_0xc13df3(0x1ff)]['forEach'](_0x1005be=>{const _0x1310c4=_0xc13df3;if(!_0x1005be[_0x1310c4(0x226)]&&_0x1005be['coin']!=config[_0x1310c4(0x2e7)]){const _0x382fe7=currentCoins[_0x1310c4(0x2bd)](_0x124ee9=>_0x124ee9[_0x1310c4(0x2ef)]==_0x1005be[_0x1310c4(0x2ef)]),_0x2ad3a0=global[_0x1310c4(0x2bb)][noslash(_0x1005be[_0x1310c4(0x29c)])];let _0x250c85=_0x382fe7?_0x382fe7[_0x1310c4(0x362)]:null,_0x197f74=_0x1005be[_0x1310c4(0x1cd)]?0x1/_0x2ad3a0:_0x2ad3a0,_0x56a7c3;config[_0x1310c4(0x319)][_0x1310c4(0x256)](_0xf4e4e6=>{const _0x356344=_0x1310c4;!_0x56a7c3&&(_0x56a7c3=_0xf4e4e6[_0x356344(0x221)][_0x356344(0x2bd)](_0x52814f=>_0x52814f['coin']==_0x1005be[_0x356344(0x2ef)]),_0x56a7c3&&(_0x250c85=_0x56a7c3[_0x356344(0x362)],_0x197f74=_0x56a7c3['price']));});let _0x3e7301=dbCoinResults[_0x1310c4(0x272)](_0x1310c4(0x23f))[_0x1310c4(0x2bd)]({'coin':_0x1005be[_0x1310c4(0x2ef)]})[_0x1310c4(0x317)]();if(!_0x3e7301){const _0x603cac={'coin':_0x1005be[_0x1310c4(0x2ef)],'number':_0x250c85,'breakeven':_0x197f74,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1310c4(0x272)](_0x1310c4(0x23f))[_0x1310c4(0x34f)](_0x603cac)[_0x1310c4(0x245)]();}else{if(_0x44fe3b&&_0x1005be[_0x1310c4(0x2ef)]==_0x44fe3b){const _0x5cdd97={'coin':_0x1005be[_0x1310c4(0x2ef)],'number':_0x250c85,'breakeven':_0x197f74,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x1310c4(0x2bd)]({'coin':_0x1005be[_0x1310c4(0x2ef)]})['assign'](_0x5cdd97)['write']();}}}});}async function updateCoinResults(_0x3ace18,_0xedba3=![]){const _0x4a4dc7=_0xcb5e1f;let _0x1d0a2b,_0x23ec9d,_0x386e0a,_0x18efb1,_0x58b253,_0x2bd482,_0x242e24=dbCoinResults[_0x4a4dc7(0x272)](_0x4a4dc7(0x23f))['find']({'coin':_0x3ace18[_0x4a4dc7(0x2ef)]})['value'](),_0x2defa4=![];_0x242e24&&Object[_0x4a4dc7(0x30b)](_0x242e24)[_0x4a4dc7(0x256)](([_0x456a49,_0x4f1e5d])=>{if(_0x4f1e5d==null)_0x2defa4=!![];});(!_0x242e24||_0x2defa4)&&(await initCoinResults(_0x3ace18[_0x4a4dc7(0x2ef)]),_0x242e24=dbCoinResults[_0x4a4dc7(0x272)]('coins')[_0x4a4dc7(0x2bd)]({'coin':_0x3ace18[_0x4a4dc7(0x2ef)]})[_0x4a4dc7(0x317)]());_0x3ace18[_0x4a4dc7(0x1cd)]&&(_0x2bd482={'filled':_0x3ace18[_0x4a4dc7(0x208)]*_0x3ace18[_0x4a4dc7(0x246)],'amount':_0x3ace18['filled']*_0x3ace18[_0x4a4dc7(0x246)],'side':_0x3ace18[_0x4a4dc7(0x243)]==_0x4a4dc7(0x1da)?_0x4a4dc7(0x21d):_0x4a4dc7(0x1da),'price':0x1/_0x3ace18[_0x4a4dc7(0x246)]},_0x3ace18={..._0x3ace18,..._0x2bd482});_0xedba3?_0x23ec9d=_0x3ace18['side']==_0x4a4dc7(0x21d)?_0x242e24[_0x4a4dc7(0x362)]+_0x3ace18[_0x4a4dc7(0x208)]:_0x242e24['number']-_0x3ace18['filled']:_0x23ec9d=await getCoinNumber(_0x3ace18[_0x4a4dc7(0x2ef)]);if(_0x3ace18[_0x4a4dc7(0x1fe)]&&_0x3ace18[_0x4a4dc7(0x1fe)][_0x4a4dc7(0x223)]==config[_0x4a4dc7(0x2e7)])_0x1d0a2b=_0x3ace18[_0x4a4dc7(0x1fe)]['cost'];else{if(_0x3ace18[_0x4a4dc7(0x1fe)]&&_0x3ace18[_0x4a4dc7(0x1fe)][_0x4a4dc7(0x223)]=='BNB'&&!_0xedba3&&config['basecoin']!=_0x4a4dc7(0x344))_0x1d0a2b=_0x3ace18['fee'][_0x4a4dc7(0x2df)]*global[_0x4a4dc7(0x2bb)][_0x4a4dc7(0x269)+config[_0x4a4dc7(0x2e7)]];else _0x1d0a2b=defaultFee*_0x3ace18[_0x4a4dc7(0x208)]*_0x3ace18['price'];}_0x3ace18[_0x4a4dc7(0x243)]==_0x4a4dc7(0x21d)?(_0x386e0a=_0x23ec9d!=0x0?(_0x242e24[_0x4a4dc7(0x2d6)]*_0x242e24['number']+_0x3ace18[_0x4a4dc7(0x246)]*(_0x23ec9d-_0x242e24[_0x4a4dc7(0x362)])+_0x1d0a2b)/_0x23ec9d:0x0,_0x18efb1=_0x242e24[_0x4a4dc7(0x2c6)]):(_0x386e0a=_0x23ec9d!=0x0?(_0x242e24[_0x4a4dc7(0x2d6)]*_0x242e24['number']-_0x3ace18['price']*(_0x242e24[_0x4a4dc7(0x362)]-_0x23ec9d)+_0x1d0a2b)/_0x23ec9d:0x0,_0x18efb1=_0x242e24[_0x4a4dc7(0x2c6)]+(_0x3ace18[_0x4a4dc7(0x246)]-_0x242e24[_0x4a4dc7(0x2d6)])*_0x3ace18['filled']);_0x58b253=(_0x3ace18[_0x4a4dc7(0x246)]-_0x386e0a-_0x1d0a2b/_0x3ace18[_0x4a4dc7(0x208)])*_0x23ec9d;let _0x152269={'coin':_0x3ace18[_0x4a4dc7(0x2ef)],'number':_0x23ec9d,'breakeven':formatResult(_0x386e0a,0x8),'realized':formatResult(_0x18efb1,0x8),'unrealized':formatResult(_0x58b253,0x8),'fees':formatResult(_0x242e24['fees']+_0x1d0a2b,0x8),'sells':_0x3ace18['side']==_0x4a4dc7(0x1da)?_0x242e24[_0x4a4dc7(0x2fa)]+0x1:_0x242e24[_0x4a4dc7(0x2fa)],'buys':_0x3ace18['side']==_0x4a4dc7(0x21d)?_0x242e24[_0x4a4dc7(0x2cb)]+0x1:_0x242e24[_0x4a4dc7(0x2cb)]};dbCoinResults[_0x4a4dc7(0x272)](_0x4a4dc7(0x23f))['find']({'coin':_0x3ace18[_0x4a4dc7(0x2ef)]})['assign'](_0x152269)['write']();if(!_0xedba3){if(_0x3ace18['fee']&&_0x3ace18[_0x4a4dc7(0x1fe)][_0x4a4dc7(0x223)]==_0x4a4dc7(0x269)){const _0xf424ce=currentCoins[_0x4a4dc7(0x2bd)](_0x1a4aef=>_0x1a4aef[_0x4a4dc7(0x2ef)]=='BNB');if(_0xf424ce){let _0x3410ac=dbCoinResults['get'](_0x4a4dc7(0x23f))[_0x4a4dc7(0x2bd)]({'coin':_0x4a4dc7(0x269)})[_0x4a4dc7(0x317)]();_0x152269={..._0x3410ac,'number':_0xf424ce[_0x4a4dc7(0x362)]},dbCoinResults[_0x4a4dc7(0x272)]('coins')[_0x4a4dc7(0x2bd)]({'coin':_0x4a4dc7(0x269)})[_0x4a4dc7(0x27f)](_0x152269)['write']();}}}}async function placeOrder(_0x41a0dc){const _0x5416e2=_0xcb5e1f,_0x2ecacc=config['ordertype']==_0x5416e2(0x273)?_0x5416e2(0x273):_0x5416e2(0x27b);if(lockOrders==ORDERS[_0x5416e2(0x1ca)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x5416e2(0x21f)],allOrdersPlaced=![],validateOrdersState=_0x5416e2(0x1e2);let _0x904157=![];lastOrders=[];for(const _0x1023c5 of _0x41a0dc){let _0xb69c5a,_0x91cf99,_0x4608a6,_0x188d40,_0x3c0969,_0x563072=_0x1023c5[_0x5416e2(0x29c)];try{const _0x2035bb=await exchange[_0x5416e2(0x1eb)](_0x563072);_0xb69c5a=_0x1023c5[_0x5416e2(0x1cd)]?0x1/_0x1023c5[_0x5416e2(0x302)]:_0x1023c5[_0x5416e2(0x302)],_0x91cf99=_0x2035bb[_0x5416e2(0x242)],_0x4608a6=_0x2035bb[_0x5416e2(0x32d)];_0x1023c5[_0x5416e2(0x1cd)]?(_0x188d40=_0x1023c5['side']==_0x5416e2(0x21d)?_0x5416e2(0x1da):_0x5416e2(0x21d),_0x3c0969=Math[_0x5416e2(0x26f)](_0x1023c5['trade'])/_0xb69c5a):(_0x188d40=_0x1023c5[_0x5416e2(0x243)],_0x3c0969=Math[_0x5416e2(0x26f)](_0x1023c5[_0x5416e2(0x22e)]));_0x2ecacc==_0x5416e2(0x27b)&&(config[_0x5416e2(0x346)]=='limit-high'&&(_0xb69c5a=_0x188d40==_0x5416e2(0x21d)?_0x91cf99:_0x4608a6),config['ordertype']==_0x5416e2(0x2d3)&&(_0xb69c5a=_0x188d40==_0x5416e2(0x21d)?_0x4608a6:_0x91cf99));_0x3c0969=formatResult(_0x3c0969,0x8),_0xb69c5a=formatResult(_0xb69c5a,0x8);const _0x360a58=_0x188d40==_0x5416e2(0x1da)?config[_0x5416e2(0x29e)]?String['fromCodePoint']('0x'+config[_0x5416e2(0x29e)])+'\x20':'':config[_0x5416e2(0x1f9)]?String[_0x5416e2(0x2bf)]('0x'+config[_0x5416e2(0x1f9)])+'\x20':'',_0x124783=_0x2ecacc=='market'?_0x5416e2(0x1de):config[_0x5416e2(0x346)]==_0x5416e2(0x303)?_0x5416e2(0x28d):_0x5416e2(0x211),_0xa9141f=(Math['floor'](Math[_0x5416e2(0x367)]()*0x35a4e900)+0x5f5e100)[_0x5416e2(0x1f6)]();lastOrders['push']({'customId':_0xa9141f,'symbol':_0x563072,'coin':_0x1023c5['coin'],'amount':_0x3c0969,'price':_0xb69c5a,'side':_0x188d40,'reverse':_0x1023c5[_0x5416e2(0x1cd)],'filled':0x0});if(_0x2ecacc==_0x5416e2(0x273))logHistory(_0x5416e2(0x1d5),''+_0x360a58+_0x124783+_0x5416e2(0x2e0)+_0x563072+'\x20'+_0x188d40+'\x20#'+formatResult(_0x3c0969,0x8)+'\x20@'+formatResult(_0xb69c5a,0x8));else logHistory('order',''+_0x360a58+_0x124783+_0x5416e2(0x2e0)+_0x563072+'\x20'+_0x188d40+'\x20#'+formatResult(_0x3c0969,0x8)+'\x20@'+formatResult(_0xb69c5a,0x8));let _0x506e82;_0x2ecacc==_0x5416e2(0x273)?_0x188d40=='buy'&&['Bybit',_0x5416e2(0x2ec),_0x5416e2(0x291),_0x5416e2(0x25c),_0x5416e2(0x27d)][_0x5416e2(0x1e0)](config[_0x5416e2(0x2c0)])?_0x506e82=await exchange[_0x5416e2(0x247)](_0x563072,_0x2ecacc,_0x188d40,_0x3c0969,_0xb69c5a):_0x506e82=await exchange['createOrder'](_0x563072,_0x2ecacc,_0x188d40,_0x3c0969,undefined):_0x506e82=await exchange[_0x5416e2(0x247)](_0x563072,_0x2ecacc,_0x188d40,_0x3c0969,_0xb69c5a);logger[_0x5416e2(0x2a7)](_0x5416e2(0x316)+_0x506e82['id']+'\x20|\x20Custom\x20ID:\x20'+_0xa9141f);const _0x22e382=lastOrders[_0x5416e2(0x28b)]-0x1;if(_0x22e382>=0x0&&lastOrders[_0x22e382][_0x5416e2(0x34a)]==_0xa9141f){lastOrders[_0x22e382][_0x5416e2(0x29a)]=_0x506e82['id'];if(_0x506e82['amount'])lastOrders[_0x22e382]['amount']=_0x506e82[_0x5416e2(0x276)];if(_0x506e82[_0x5416e2(0x246)])lastOrders[_0x22e382]['price']=_0x506e82[_0x5416e2(0x246)];lastOrders[_0x22e382][_0x5416e2(0x1fe)]=_0x506e82[_0x5416e2(0x1fe)];}if(config['cooldown']!=0x0){let _0x165316=null;if(cooldownTracker[_0x5416e2(0x28b)]==config[_0x5416e2(0x361)]-0x1)_0x165316=cooldownTracker[_0x5416e2(0x313)]();const _0x4abd4d=getTimeStamp();cooldownTracker[_0x5416e2(0x34f)](_0x4abd4d);if(_0x165316){const _0x59a9ac=fns['differenceInSeconds'](new Date(_0x4abd4d),new Date(_0x165316));if(_0x59a9ac<cooldownInterval){logHistory(_0x5416e2(0x20e),_0x5416e2(0x2ea)+config[_0x5416e2(0x361)]+_0x5416e2(0x2b3)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5416e2(0x225)),coolingDown=!![];break;}}}}catch(_0x5ee845){if(_0x5ee845['toString']()[_0x5416e2(0x1e0)](_0x5416e2(0x279)))lastOrders=lastOrders[_0x5416e2(0x24d)](_0x21b76e=>_0x21b76e[_0x5416e2(0x29c)]!=_0x563072),logHistory(_0x5416e2(0x20e),_0x5416e2(0x271)+_0x563072),_0x904157=!![];else{if(_0x5ee845[_0x5416e2(0x1f6)]()[_0x5416e2(0x1e0)](_0x5416e2(0x292)))lastOrders=lastOrders[_0x5416e2(0x24d)](_0x2b23bd=>_0x2b23bd[_0x5416e2(0x29c)]!=_0x563072),logHistory('error',_0x5416e2(0x1c7)+_0x563072),_0x904157=!![];else{if(_0x5ee845[_0x5416e2(0x1f6)]()['includes'](_0x5416e2(0x30e)))lastOrders=lastOrders[_0x5416e2(0x24d)](_0x449a39=>_0x449a39[_0x5416e2(0x29c)]!=_0x563072),logHistory(_0x5416e2(0x20e),'Order\x20is\x20invalid:\x20'+_0x563072),logger[_0x5416e2(0x2a7)](_0x5ee845),_0x904157=!![];else _0x5ee845['toString']()['includes'](_0x5416e2(0x2ff))?(lastOrders=lastOrders['filter'](_0x511a1d=>_0x511a1d[_0x5416e2(0x29c)]!=_0x563072),logHistory('error',_0x5416e2(0x271)+_0x563072),_0x904157=!![]):(lastOrders=lastOrders[_0x5416e2(0x24d)](_0x3fdbd4=>_0x3fdbd4[_0x5416e2(0x29c)]!=_0x563072),await handleError(_0x5ee845,_0x5416e2(0x2c8),_0x563072));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x30bed4=config[_0x5416e2(0x346)]==_0x5416e2(0x273)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x30bed4);}else unlockOrders();_0x904157&&config[_0x5416e2(0x1f0)]&&(logHistory('error',_0x5416e2(0x28f)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x5416e2(0x1f0)]&&logHistory(_0x5416e2(0x20e),_0x5416e2(0x200));else lockOrders!=ORDERS[_0x5416e2(0x1ca)]&&(!config[_0x5416e2(0x1f0)]&&(config[_0x5416e2(0x346)]==_0x5416e2(0x273)?logHistory(_0x5416e2(0x20e),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5416e2(0x20e),_0x5416e2(0x331))));}}function _0x35ed(){const _0x1d87bf=['fetchTicker','change','Failed\x20to\x20load\x20coin\x20data\x20for\x20','2\x20-\x20Validate\x20orders:\x20','botname','headless','getFullYear','%\x20(','/backup/','progress','Order(s)\x20not\x20validated\x20after\x20','toString','starting-balance-','cancel','emojibuy','usd','max','./logs/','Manual\x20balancing\x20required','fee','portfolio','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','28ZoQzgY','\x20not\x20available\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','splice','startsWith','initclient','275gNFTHY','recovery','filled','RequestTimeout','Transaction\x20detection\x20blocked','2.5.0','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','EUR','error','exchange\x20reloaded','ORDERS.UNLOCKING','Limit\x20(low-margin)','\x20|\x20exchange:\x20','logs','watchTrades','\x20value','basecoinvalue','Net\x20effect','showname','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','rightTxt','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','unlinkSync','buy','function','LOCKED','status','changes','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','currency','174JrHkYt','\x20hour','excluded','added','pro','configuration-stored','balances','apiPassword','Bot\x20','355928pLmMdF','trade','Binance','Transaction\x20detection\x20unblocked','\x20|\x20lock\x20orders:\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','event','constructor','\x20metrics:</b>\x20\x0a\x0a','test','API-key\x20format\x20invalid','bb-settings.json','getPortfolio','\x20minutes\x20-\x20','final','parseISO','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','performance','coins','/EUR','set','bid','side','timestamp','write','price','createOrder','limits','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','stringify','full','\x20>\x20','filter','getMonth','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','onepagemode','Portfolio\x20change\x20detected:\x20','getPortfolio(0)','apiSecret','\x20closed\x20the\x20connection\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','NetworkError','forEach','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','has','loading-canceled','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','/output-000.log','Huobi','/USD','getCoins()','success','send','-events.json','botID','total','open','startnumber','openOrders','RSA-OAEP','round','BNB','RateLimitExceeded','version','bots','2\x20-\x20Handled\x20open\x20orders','loadMarkets','abs','Waited\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','get','market','2.6.0','81BEdUKA','amount','none','fetchClosedOrders','MIN_NOTIONAL','findIndex','limit','1\x20-\x20Handle\x20open\x20orders','Huobipro','toFixed','assign','lowdb','padStart','format','min','search','USDT','-results.json','emitHistory','page','\x20|\x20highest\x20fee:\x20','storeFiat','length','USD','Limit\x20(high-margin)','args','Avoiding\x20continuous\x20order\x20attempts','ETH','Cex','Invalid\x20quantity','running',':\x20timer\x20>','Pausing\x20for\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','freeze','removed','No\x20more\x20open\x20orders\x20-\x20','orderId','Exchange','symbol','\x20-\x20bot\x20not\x20started','emojisell','fetchOpenOrders','<b>','target','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','***','isEqual','highest','debug','Insufficient\x20funds\x20to\x20execute\x20order:\x20','cancelOrder','timeshift','TUSD','\x20minutes','no\x20open\x20orders','bb-secure.json','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','ongoing','restart','average','\x20orders\x20in\x20less\x20than\x20','request-time','message','getCoinNumber()','replace','2\x20-\x20Orders\x20unlocked','red_yellow_blue','BTC','ticker','bot-','find','canceled','fromCodePoint','exchange','Error\x20while\x20deleting\x20files:\x20','amountToPrecision','orderstatus','\x20portfolio:</b>\x20\x0a\x0a','eur','realized','change24h','placeOrder()','path','parse','buys','getAllOrders()','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20network\x20error','\x20:\x20','storeHeadless','watchTrades()','mkdirSync','limit-low','net-fiat','apiKey','breakeven','sortBy','1\x20-\x20FILLED\x20unknown\x20order:\x20','distribution',',\x20must\x20be\x20a\x203\x20digit\x20number','sha256','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','PermissionDenied','time','cost','\x20order:\x20','hybrid-crypto-js','recreateCoinResults()','remainingSymbols','-config.json','1\x20-\x20Unlock\x20orders','</pre>','basecoin','001','getDate','Executed\x20','\x20|\x20','Bitget','offset','remove','coin','getHours','autoliquidity','fetchBalance','milliseconds','toUpperCase','Headless:\x20','watchOrders()','yargs/yargs','UNLOCKING','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20hodlerhacks.com/fix#clock-sync','sells','(((.+)+)+)+$','\x20/\x20','getPortfolio(2)','resetHistory','must\x20be\x20greater\x20than\x20minimum\x20amount','1195404NTvJjT','\x20not\x20responding\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','last','limit-high','active','lowdb/adapters/FileSync','************','ccxt','watchOrders','Resetting\x20bot\x20history','configuration','entries','closed','fiat','InvalidOrder','spot','OrderNotFound','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','cancelLoading','shift','timeout','placeOrder','ID:\x20','value','date','liquidity','getSeconds','warning','datetime','Trigger:\x20','BUSD','slice','loadSymbols()','Invalid\x20symbol:\x20','Error:\x20Invalid\x20argument\x20','./version.json','join','keys','existsSync','Exception\x20thrown\x20in\x20','\x20-\x20pausing\x20bot\x20for\x20','privateKey','delta','map','settings','ask','threshold','toLowerCase','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','coin-loading-progress','yyyy/MM/dd','Resetting\x20coin\x20results:\x20','starting-balances','secure','Loading\x20completed','uncaughtException','Initializing\x20coin\x20results','decrypt','enabled','\x20has\x20a\x2024h\x20drop\x20of\x20','close','defaults','getMinutes','2.3.5','Unfilled\x20order(s)\x20canceled\x20after\x20','colorscheme','kill','PAXG','InvalidNonce','ordertype','fetchTickers','BNB/','Crypt','customId','AuthenticationError','watchTransactions()','writeFile','2172429UpSPwP','push','type','Fee\x20discount\x20refund\x20detected:\x20','leftTxt','\x20exchange','cloneDeep','\x20change','19584YSGVry','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','password','exchanges','add','exec','InsufficientFunds','indexOf','log','startprice','valid','cooldown','number','event-history','startdate','date-fns','Saving\x20configuration','random','Order\x20amount\x20is\x20invalid:\x20','net-basecoin','split','UNLOCKED','\x20exchange\x20error',':\x20Bot\x20','reverse','58115ASBJpD','47790NUEJWL','getTime','\x20rejected\x20your\x20API\x20request\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-rejected','argv','data','cancelOrders()','order','sort','sendMetricsTelegram','percentage','-------------------------------\x0a','sell','apply','Error\x20details:','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','Market','0\x20-\x20EXECUTION:\x20','includes','1167597nFovLQ','initial','initTickers()','bot','balancing\x20resumed','substring','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','recent20','fetchTickers()'];_0x35ed=function(){return _0x1d87bf;};return _0x35ed();}function persistOpenOrders(_0x4eca5f){const _0x3a3d34=_0xcb5e1f,_0x5f2fcf={...config,'openOrders':_0x4eca5f};let _0x9c46f3=dbConfig[_0x3a3d34(0x272)]('bot')[_0x3a3d34(0x2bd)]({'botID':botID})[_0x3a3d34(0x317)]();_0x9c46f3&&dbConfig[_0x3a3d34(0x272)](_0x3a3d34(0x1e4))['find']({'botID':botID})[_0x3a3d34(0x27f)](_0x5f2fcf)[_0x3a3d34(0x245)]();}function restoreOrders(){const _0x25b9df=_0xcb5e1f;let _0xc07f27;config[_0x25b9df(0x266)]&&allOpenOrders[_0x25b9df(0x256)](_0x5acdfb=>{const _0x5cf848=_0x25b9df,_0xf8c685=config['openOrders'][_0x5cf848(0x2bd)](_0xd085b8=>_0xd085b8[_0x5cf848(0x29a)]==_0x5acdfb['id']);_0xf8c685&&(lastOrders[_0x5cf848(0x34f)](_0xf8c685),_0xc07f27=_0x5acdfb[_0x5cf848(0x244)]);});if(lastOrders[_0x25b9df(0x28b)]>0x0){lockOrders=ORDERS[_0x25b9df(0x21f)],validateOrdersState=_0x25b9df(0x2b0),allOrdersPlaced=!![];const _0x5e38fa=new Date()[_0x25b9df(0x1d0)](),_0x10d328=config[_0x25b9df(0x346)]==_0x25b9df(0x273)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0xc07f27+_0x10d328>_0x5e38fa){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1fa5e1=_0x25b9df;validateOrders(_0x1fa5e1(0x23b));},_0xc07f27+_0x10d328-_0x5e38fa);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4608c4=_0xcb5e1f;if(!coinsLoaded){process[_0x4608c4(0x260)]({'telegrammsg':_0x4608c4(0x25a)},_0x74bd03=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2611be='';if(config['showname'])_0x2611be=_0x4608c4(0x2a0)+config['botname']+_0x4608c4(0x235);else _0x2611be='<b>Bot\x20'+botID+_0x4608c4(0x235);const _0x1d09d7=getKPIs(_0x4608c4(0x2e7)),_0x533d16=getKPIs(_0x4608c4(0x30d),config[_0x4608c4(0x30d)]),_0x1cea07=getKPIs(_0x4608c4(0x1c8)),_0xc765cc=getKPIs(_0x4608c4(0x2d4),config[_0x4608c4(0x30d)]);_0x2611be+='<pre>',_0x2611be+=_0x1d09d7[_0x4608c4(0x352)]+'\x20:\x20'+_0x1d09d7[_0x4608c4(0x317)]+'\x0a',_0x2611be+=_0x1d09d7['rightTxt']+':\x20'+_0x1d09d7[_0x4608c4(0x1ec)]+'%\x0a',_0x2611be+=_0x533d16[_0x4608c4(0x352)]+_0x4608c4(0x2cf)+_0x533d16['value']+'\x0a',_0x2611be+=_0x533d16[_0x4608c4(0x21a)]+':\x20'+_0x533d16[_0x4608c4(0x1ec)]+'%\x0a',_0x2611be+=_0x1cea07[_0x4608c4(0x352)]+':\x20'+_0x1cea07[_0x4608c4(0x317)]+'\x20('+config[_0x4608c4(0x2e7)]+')\x0a',_0x2611be+=_0x1cea07[_0x4608c4(0x21a)]+':\x20'+_0x1cea07[_0x4608c4(0x1ec)]+_0x4608c4(0x1f2)+config['basecoin']+')\x0a',_0x2611be+=_0xc765cc[_0x4608c4(0x352)]+':\x20'+_0xc765cc[_0x4608c4(0x317)]+'\x20('+config[_0x4608c4(0x30d)]+')\x0a',_0x2611be+=_0xc765cc[_0x4608c4(0x21a)]+':\x20'+_0xc765cc[_0x4608c4(0x1ec)]+_0x4608c4(0x1f2)+config['fiat']+')\x0a',_0x2611be+='</pre>',process['send']({'telegrammsg':_0x2611be},_0x9e2a=>{});}async function sendPortfolioTelegram(){const _0x29340f=_0xcb5e1f;if(!coinsLoaded){process['send']({'telegrammsg':_0x29340f(0x25a)},_0x173774=>{});return;}let _0x5c2339='';if(config[_0x29340f(0x218)])_0x5c2339='<b>'+config[_0x29340f(0x1ef)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x5c2339='<b>Bot\x20'+botID+_0x29340f(0x2c4);_0x5c2339+='<pre>',_0x5c2339+=_0x29340f(0x1d9),_0x5c2339+=_0x29340f(0x330),_0x5c2339+='-------------------------------\x0a',currentCoins[_0x29340f(0x256)](_0x14a7dc=>{const _0x290027=_0x29340f;_0x5c2339+=_0x14a7dc['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x14a7dc[_0x290027(0x2d9)],0x2,0x6)+'|\x20'+formatPad(_0x14a7dc[_0x290027(0x2a1)],0x2,0x6)+'|\x20'+formatPad(_0x14a7dc[_0x290027(0x32a)]*0x64,0x2,0x6)+'\x0a';}),_0x5c2339+=_0x29340f(0x2e6),process['send']({'telegrammsg':_0x5c2339},_0x5c1a84=>{});}function formatPad(_0x4de3e3,_0x2551d0,_0x317095){const _0xa95169=_0xcb5e1f,_0x1ddf7b=formatResultString(_0x4de3e3,_0x2551d0);return _0x1ddf7b?_0x1ddf7b[_0xa95169(0x281)](_0x317095):''[_0xa95169(0x281)](_0x317095);}function logHistory(_0x3904f0,_0x20947c,_0x5ec542=''){const _0xd664b9=_0xcb5e1f;logger[_0xd664b9(0x24b)](''+_0x20947c);let _0xb3ff1d={'time':getTimeStamp(),'type':_0x3904f0,'event':_0x20947c};dbLogs[_0xd664b9(0x272)](_0xd664b9(0x213))['push'](_0xb3ff1d)[_0xd664b9(0x245)]();if(_0x5ec542=='')_0x5ec542=_0x20947c;proxyEmit(_0xd664b9(0x233),{'log':_0xb3ff1d,'summary':_0x5ec542}),process['send']({'telegram':{..._0xb3ff1d,'botname':config[_0xd664b9(0x1ef)],'showname':config[_0xd664b9(0x218)]}},_0x4dd854=>{});}function emitHistory(_0x5b81d0={}){const _0x3782ae=_0xcb5e1f;Object[_0x3782ae(0x325)](_0x5b81d0)['length']==0x0&&(_0x5b81d0={'type':['order',_0x3782ae(0x233)],'event':'','page':0x1});if(_0x5b81d0[_0x3782ae(0x350)]['includes']('event'))_0x5b81d0[_0x3782ae(0x350)][_0x3782ae(0x203)](_0x5b81d0[_0x3782ae(0x350)][_0x3782ae(0x35d)]('event'),0x1,_0x3782ae(0x20e),'warning',_0x3782ae(0x25f));if(dbLogs[_0x3782ae(0x258)](_0x3782ae(0x213))['value']()){let _0x1559f1=dbLogs['get']('logs')['filter'](_0x1ed71c=>{const _0x36d03b=_0x3782ae;if(_0x5b81d0[_0x36d03b(0x350)]['length']==0x0)return![];else return _0x5b81d0[_0x36d03b(0x350)][_0x36d03b(0x1e0)](_0x1ed71c[_0x36d03b(0x350)]);})[_0x3782ae(0x24d)](_0x3ac991=>{const _0x1aa39e=_0x3782ae;if(_0x5b81d0['event']=='')return!![];else return _0x3ac991[_0x1aa39e(0x233)][_0x1aa39e(0x32f)]()[_0x1aa39e(0x1e0)](_0x5b81d0[_0x1aa39e(0x233)][_0x1aa39e(0x32f)]());})[_0x3782ae(0x2d7)](_0x3782ae(0x2de)),_0x53941b=_0x1559f1[_0x3782ae(0x317)]()[_0x3782ae(0x28b)];_0x1559f1=_0x1559f1[_0x3782ae(0x1cd)]()[_0x3782ae(0x31f)]((_0x5b81d0[_0x3782ae(0x288)]-0x1)*logPageSize,_0x5b81d0[_0x3782ae(0x288)]*logPageSize-0x1)[_0x3782ae(0x1cd)]()[_0x3782ae(0x317)](),proxyEmit(_0x3782ae(0x363),{'logs':_0x1559f1,'total':_0x53941b});}else proxyEmit(_0x3782ae(0x363),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1727f2){const _0x34c554=_0xcb5e1f;if(dbLogs[_0x34c554(0x258)](_0x34c554(0x213))[_0x34c554(0x317)]()){const _0x32da0a=dbLogs[_0x34c554(0x272)](_0x34c554(0x213))[_0x34c554(0x2d7)](_0x34c554(0x2de))[_0x34c554(0x24d)](_0x513737=>{const _0x2d6009=_0x34c554;return _0x513737[_0x2d6009(0x350)]==_0x2d6009(0x1d5);})[_0x34c554(0x317)]();dbLogs['get'](_0x34c554(0x213))['remove']()[_0x34c554(0x245)](),dbLogs[_0x34c554(0x272)](_0x34c554(0x213))['assign'](_0x32da0a)[_0x34c554(0x245)](),emitHistory(_0x1727f2);}}async function pauseBot(_0x8217a2=pauseBotInterval){const _0x4af1f=_0xcb5e1f,_0x327914=new Date()[_0x4af1f(0x1d0)]();if(!lastErrorShown||_0x327914-lastErrorShown>=_0x8217a2){lastErrorShown=_0x327914;!lastBotPause?(lastBotPause=_0x327914,consecutivePauses=0x1):(_0x327914-lastBotPause-_0x8217a2<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x4af1f(0x260)]({'stop':_0x4af1f(0x2b1)},_0x3d3ab7=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x4af1f(0x1d0)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x8217a2),botPaused=![],reset(!![]);}}}async function killBot(){const _0x40f8c0=_0xcb5e1f;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x40f8c0(0x343)},_0x1d3b0f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3dab34,_0x392b88){const _0x6f20e9=_0xcb5e1f;if(botPaused)return;const _0x33693d=config[_0x6f20e9(0x2c0)]||'Exchange';if(_0x392b88)logger[_0x6f20e9(0x2a7)](_0x6f20e9(0x327)+_0x392b88);const _0x2cfa57=()=>{const _0x5c8d51=_0x6f20e9;loading[_0x5c8d51(0x20e)]=!![],emitLoadingProgress();};if(_0x3dab34[_0x6f20e9(0x1f6)]()['includes'](_0x6f20e9(0x237)))logHistory(_0x6f20e9(0x20e),_0x33693d+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid'),_0x2cfa57();else{if(_0x3dab34['toString']()[_0x6f20e9(0x1e0)](_0x6f20e9(0x249)))logHistory(_0x6f20e9(0x20e),_0x33693d+_0x6f20e9(0x1dd)),_0x2cfa57();else _0x3dab34[_0x6f20e9(0x1f6)]()['includes']('AuthenticationError')?(logHistory(_0x6f20e9(0x20e),_0x33693d+_0x6f20e9(0x2a3)),logHistory(_0x6f20e9(0x20e),_0x6f20e9(0x20c)),_0x2cfa57()):await handleError(_0x3dab34,null);}}async function handleError(_0x5d097e,_0x5e4315,_0x5b07b0=''){const _0x4c2e70=_0xcb5e1f;if(botPaused)return;const _0x2d41f2=config[_0x4c2e70(0x2c0)]||_0x4c2e70(0x29b);if(_0x5e4315)logger[_0x4c2e70(0x2a7)](_0x4c2e70(0x327)+_0x5e4315);if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)]('DDoSProtection'))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x219)+pauseBotMsg),logger[_0x4c2e70(0x2a7)](_0x4c2e70(0x1dc),_0x5d097e),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x26a)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x296)+pauseBotMsg),logger[_0x4c2e70(0x2a7)](_0x4c2e70(0x1dc),_0x5d097e),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)]('ExchangeNotAvailable')||_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)]('OnMaintenance'))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x202)+pauseBotMsg),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x209)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x301)+pauseBotMsg),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x254)+pauseBotMsg),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()['toLowerCase']()['includes'](_0x4c2e70(0x244))||_0x5d097e['toString']()[_0x4c2e70(0x32f)]()['includes'](_0x4c2e70(0x2b4)))logHistory('error',_0x4c2e70(0x2f9)+pauseBotMsg),logger[_0x4c2e70(0x2a7)]('Error\x20details:',_0x5d097e['toString']()),await pauseBot();else{if(_0x5d097e['toString']()[_0x4c2e70(0x1e0)](_0x4c2e70(0x345)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x1d1)+pauseBotMsg),logger['debug'](_0x4c2e70(0x1dc),_0x5d097e),await pauseBot();else{if(_0x5d097e instanceof ccxt[_0x4c2e70(0x255)])logHistory('error',_0x2d41f2+_0x4c2e70(0x2ce)+pauseBotMsg),logger[_0x4c2e70(0x2a7)]('Error\x20details:',_0x5d097e),await pauseBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x237)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x4c2e70(0x20e),_0x4c2e70(0x2dc)),await killBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x249)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x4c2e70(0x20e),_0x4c2e70(0x2dc)),await killBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()['includes'](_0x4c2e70(0x34b)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x311)),logHistory('error',_0x4c2e70(0x2dc)),await killBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x2dd)))logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x222)),logHistory(_0x4c2e70(0x20e),_0x4c2e70(0x2dc)),await killBot();else{if(_0x5d097e[_0x4c2e70(0x1f6)]()[_0x4c2e70(0x1e0)](_0x4c2e70(0x35c)))logHistory('error',_0x4c2e70(0x2a8)+_0x5b07b0);else _0x5d097e instanceof ccxt['ExchangeError']?(logHistory(_0x4c2e70(0x20e),_0x2d41f2+_0x4c2e70(0x1cb)),logger[_0x4c2e70(0x2a7)](_0x4c2e70(0x1dc),_0x5d097e)):(logHistory(_0x4c2e70(0x20e),'Unknown\x20error\x20occured'+pauseBotMsg),logger['debug'](_0x4c2e70(0x1dc),_0x5d097e),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x2352b2,_0xed5cfe){const _0x24368c=_0xcb5e1f;return parseFloat(_0x2352b2[_0x24368c(0x27e)](_0xed5cfe));}function formatResultTruncate(_0xe542e,_0x1ceaa3){const _0x20955b=_0xcb5e1f;let _0x139907=formatResultString(_0xe542e,0xa),_0x4f55a0=_0x139907[_0x20955b(0x35d)]('.');return _0x4f55a0!=-0x1&&(_0x139907=_0x139907[_0x20955b(0x31f)](0x0,_0x4f55a0+_0x1ceaa3+0x1)),Number(_0x139907);}function formatResultString(_0x3e2741,_0x963c37){const _0x2b5e8e=_0xcb5e1f;let _0x48085a;if(!(''+_0x3e2741)[_0x2b5e8e(0x1e0)]('e'))_0x48085a=+(Math[_0x2b5e8e(0x268)](_0x3e2741+'e+'+_0x963c37)+'e-'+_0x963c37);else{let _0xeec980=(''+_0x3e2741)[_0x2b5e8e(0x1c9)]('e'),_0x382f59='';+_0xeec980[0x1]+_0x963c37>0x0&&(_0x382f59='+'),_0x48085a=+(Math[_0x2b5e8e(0x268)](+_0xeec980[0x0]+'e'+_0x382f59+(+_0xeec980[0x1]+_0x963c37))+'e-'+_0x963c37);}return Number(_0x48085a)['toFixed'](_0x963c37);}function getServerTime(){const _0x2b894d=_0xcb5e1f,_0x226c22=new Date();return _0x226c22[_0x2b894d(0x1f1)]()+'/'+(_0x226c22['getMonth']()+0x1)[_0x2b894d(0x1f6)]()[_0x2b894d(0x281)](0x2,'0')+'/'+_0x226c22[_0x2b894d(0x2e9)]()['toString']()[_0x2b894d(0x281)](0x2,'0')+'\x20'+_0x226c22[_0x2b894d(0x2f0)]()['toString']()['padStart'](0x2,'0')+':'+_0x226c22[_0x2b894d(0x33f)]()['toString']()[_0x2b894d(0x281)](0x2,'0')+':'+_0x226c22[_0x2b894d(0x31a)]()[_0x2b894d(0x1f6)]()[_0x2b894d(0x281)](0x2,'0');}function getTimeStamp(){const _0x4cdb11=_0xcb5e1f,_0x47b20e=shiftedTime();return _0x47b20e[_0x4cdb11(0x1f1)]()+'/'+(_0x47b20e['getMonth']()+0x1)[_0x4cdb11(0x1f6)]()[_0x4cdb11(0x281)](0x2,'0')+'/'+_0x47b20e['getDate']()[_0x4cdb11(0x1f6)]()[_0x4cdb11(0x281)](0x2,'0')+'\x20'+_0x47b20e[_0x4cdb11(0x2f0)]()[_0x4cdb11(0x1f6)]()[_0x4cdb11(0x281)](0x2,'0')+':'+_0x47b20e[_0x4cdb11(0x33f)]()[_0x4cdb11(0x1f6)]()[_0x4cdb11(0x281)](0x2,'0')+':'+_0x47b20e[_0x4cdb11(0x31a)]()[_0x4cdb11(0x1f6)]()[_0x4cdb11(0x281)](0x2,'0');}function getDate(){const _0x373c0b=_0xcb5e1f,_0x4a879=shiftedTime();return _0x4a879[_0x373c0b(0x1f1)]()+'/'+(_0x4a879[_0x373c0b(0x24e)]()+0x1)[_0x373c0b(0x1f6)]()['padStart'](0x2,'0')+'/'+_0x4a879[_0x373c0b(0x2e9)]()[_0x373c0b(0x1f6)]()[_0x373c0b(0x281)](0x2,'0');}function getHour(){const _0x5000fc=_0xcb5e1f,_0xde4894=shiftedTime();return _0xde4894[_0x5000fc(0x2f0)]()[_0x5000fc(0x1f6)]()[_0x5000fc(0x281)](0x2,'0');}function sleep(_0x23aa81){return new Promise(_0x4c60cd=>setTimeout(_0x4c60cd,_0x23aa81));}function shiftedTime(){const _0x88a197=_0xcb5e1f,_0x22b4f7=new Date();let _0x4c2848=_0x22b4f7;if(config&&config[_0x88a197(0x2aa)]!==0x0)_0x4c2848=fns[_0x88a197(0x35a)](_0x22b4f7,{'hours':config[_0x88a197(0x2aa)]});return _0x4c2848;}function timer(_0x520be5){const _0x522b7f=_0xcb5e1f,_0x222cf5=new Date();!lasttime?console[_0x522b7f(0x35e)](getTimeStamp()+_0x522b7f(0x294),_0x520be5,_0x222cf5):console[_0x522b7f(0x35e)](getTimeStamp()+_0x522b7f(0x294),_0x520be5,(_0x222cf5-lasttime)/0x3e8),lasttime=_0x222cf5;}