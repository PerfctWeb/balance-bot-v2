const _0x2cbca9=_0x53b2;(function(_0x256c75,_0x5a57a8){const _0x568132=_0x53b2,_0x5cc0ea=_0x256c75();while(!![]){try{const _0x5f54ef=-parseInt(_0x568132(0x183))/0x1+parseInt(_0x568132(0x1a1))/0x2+parseInt(_0x568132(0xe2))/0x3+parseInt(_0x568132(0xb7))/0x4*(parseInt(_0x568132(0x1fa))/0x5)+parseInt(_0x568132(0x1a5))/0x6*(-parseInt(_0x568132(0x229))/0x7)+-parseInt(_0x568132(0xbf))/0x8*(parseInt(_0x568132(0x12c))/0x9)+parseInt(_0x568132(0x1cc))/0xa;if(_0x5f54ef===_0x5a57a8)break;else _0x5cc0ea['push'](_0x5cc0ea['shift']());}catch(_0x20e320){_0x5cc0ea['push'](_0x5cc0ea['shift']());}}}(_0x23cb,0xdf49b));const _0x29422e=function(){let _0x5508ce=!![];return function(_0xf5a9c6,_0x486c7d){const _0x423c37=_0x5508ce?function(){if(_0x486c7d){const _0x5123bb=_0x486c7d['apply'](_0xf5a9c6,arguments);return _0x486c7d=null,_0x5123bb;}}:function(){};return _0x5508ce=![],_0x423c37;};}(),_0x36078a=_0x29422e(this,function(){const _0x39fc99=_0x53b2;return _0x36078a[_0x39fc99(0x1b4)]()[_0x39fc99(0x219)]('(((.+)+)+)+$')[_0x39fc99(0x1b4)]()[_0x39fc99(0xe8)](_0x36078a)['search'](_0x39fc99(0xee));});_0x36078a();'use strict';const ccxt=require(_0x2cbca9(0x24b)),low=require(_0x2cbca9(0x220)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x2cbca9(0x139))[_0x2cbca9(0x25d)],util=require('util'),argv=require(_0x2cbca9(0x1db))(process['argv']['slice'](0x2))[_0x2cbca9(0x118)],path=require('path'),axios=require('axios');let exchange;global[_0x2cbca9(0x149)]={},global[_0x2cbca9(0xd2)]={};const usdBasecoins=[_0x2cbca9(0x192),_0x2cbca9(0x16b),_0x2cbca9(0x15b),'USDT','USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2cbca9(0x15e)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2cbca9(0xcc)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2cbca9(0x11a)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,marketCapInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,pidScheduler,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x23cb(){const _0x54ded8=['RETRY\x20-\x20Problem\x20resolved\x20after\x20','removed','ongoing','751548SDlPum','fromCodePoint','PAXG','recreateCoinResults()','\x20|\x20exchange:\x20','cloneDeep','length','bots','secure','emojibuy','update-liquidity','-events.json','net-basecoin','last','realized','toString','breakeven','pid','<pre>','orderId','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20-\x20switched\x20to\x20manual\x20mode','\x20API\x20secret\x20is\x20invalid','Net\x20','milliseconds','netoffset','cancelOrders()','side','padEnd','eur','\x20value','Cryptocom','Portfolio\x20change\x20detected:\x20','watchOrders()','writeFile','\x20minutes\x20-\x20',':\x20timer\x20>','headless','-performance.json','4570990UQetMJ','event-history','Limit\x20(low-margin)','open','\x20exchange','error','function','2.5.0','apiSecret','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','test','Fee\x20discount\x20refund\x20detected:\x20','existsSync','fetchTickers','balancing\x20resumed','yargs/yargs','write','coin','-------------------------------\x0a','round','Huobipro','Invalid\x20API\x20key\x20or\x20secret\x20entered','startdate','performance','1\x20-\x20Validate\x20orders:\x20','limits','RETRY\x20-\x20Error\x20in\x20','restart','split','price','process\x20','padStart','Reset\x20|\x20','min','\x20|\x20highest\x20fee:\x20','progress','bot','watchOrders','entries','getFullYear','marketcapEnabled','getPortfolio','code','./version.json','Order\x20filled:\x20','total','9445DnUoWY','symbol','average','marketcapApi',',\x20must\x20be\x20a\x203\x20digit\x20number','defaults','findIndex','\x20|\x20Custom\x20ID:\x20','closed','OrderNotFound','currency','getSeconds','fetchOpenOrders','balances','orderstatus','ETH','2.3.5','Error:\x20Invalid\x20argument\x20','bb-secure.json','marketcap','bid','getHours','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','createOrder','loadMarkets','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','AuthenticationError','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','BTC','\x20MB','trade','search','slice','amount','fiat','memoryUsage','\x20minutes','initTickers()','lowdb','splice','balancing\x20resumes\x20when\x20cooldown\x20ends','percentage','startnumber','cooldown','leftTxt','.json','Bitget','49wnbmqF','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','running','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','debug','filter','\x20orders\x20in\x20less\x20than\x20','Transaction\x20detection\x20blocked','-results.json','unlinkSync','sendPortfolioTelegram','bot-','ExchangeNotAvailable','\x20>\x20','find','distribution','kill','bb-settings.json','timestamp','Trigger:\x20','\x20portfolio:</b>\x20\x0a\x0a','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order\x20is\x20invalid:\x20','\x20exchange\x20error','filled','watchTransactions()','getAllOrders()','Waited\x20','mkdirSync','highest','Manual\x20balancing\x20required','configuration-stored','fee','Market','ccxt','emojisell','\x20uses\x20','get','ID:\x20','recent20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','placeOrder()','order','NetworkError','number','Initializing\x20coin\x20results','remainingSymbols','cancelOrder','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','format','warning','concat','Crypt','getCoinNumber()','2.6.23','./logs/','/EUR','***','Net\x20effect','parse','usd','data','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','2108afxexq','no\x20open\x20orders','toggleBotMode','initial','shift','logs','Binance','added','8lOOZWb','Loading\x20completed','Invalid\x20symbol:\x20','fetchTicker','indexOf','watchTrades','\x20has\x20a\x2024h\x20drop\x20of\x20','amountToPrecision','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20>\x20[DEBUG]\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','net-fiat','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','UNLOCKED','Insufficient\x20funds\x20to\x20execute\x20order:\x20','sell','getCoins()','PermissionDenied','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','change','DDoSProtection','Huobi','2\x20-\x20handling\x20FILLED\x20order:\x20','includes','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','getMonth','privateKey','liquidity','spot','args','timeout','OnMaintenance','sqrt','success','3183780pdFVTf','recovery','basecoinvalue','RateLimitExceeded','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','message','constructor','yyyy/MM/dd','abs','emitHistory','\x20change','buy','(((.+)+)+)+$','BNB','onepagemode','/USD','1\x20-\x20Handle\x20open\x20orders','ask','full','Cex','getDate','</pre>','basecoin','status','coin-loading-progress','ordertype','time','change24h','\x20attempts','getTime','send','Error\x20details:','assign','random','uncaughtException','getOpenOrders()','set','toFixed','has','Resetting\x20bot\x20history','keys','market','Saving\x20configuration','BNB/','001','portfolio','sells','autoliquidity','excluded','Bot\x20','ORDERS.LOCKED','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','close','remove','argv','date','\x20-\x20pausing\x20bot\x20for\x20','log','isEqual','Exception\x20thrown\x20in\x20','\x20metrics:</b>\x20\x0a\x0a','fetchBalance','datetime','marketcapsqrt','none','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','RSA-OAEP','sort','\x20>\x20details:','delta','differenceInSeconds','forEach','1\x20-\x20FILLED\x20known\x20order:\x20','add','14209101hOZEhG','changes','<b>Bot\x20','showname','max','2.6.22','InvalidOrder','Order\x20amount\x20is\x20invalid:\x20','ExchangeError','InsufficientFunds','settings','getMinutes','enabled','hybrid-crypto-js','market_cap','reverse','showConfig','API-key\x20format\x20invalid','sendMetricsTelegram','LOCKED','red_yellow_blue','startprice','configuration','<b>','join','0\x20-\x20EXECUTION:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ticker','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','valid','type','limit','toLowerCase','/backup/','EUR','yyyy-MM-dd\x27T\x27HH:mm:ss','InvalidNonce','recreate','cost','storeConfiguration','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','pro',':\x20Bot\x20','./config/','fees','TUSD','openOrders','Limit\x20(high-margin)','freeze','\x20network\x20error','rightTxt','target','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','offset','colorscheme','slider','event','************','floor','quote','exchange','BUSD','exchanges','getPortfolio(0)','push','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','replace','\x20|\x20','apiKey','%\x20(','\x20|\x20lock\x20orders:\x20','Error\x20while\x20deleting\x20files:\x20','string','password','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','2\x20-\x20Validate\x20orders:\x20','UNLOCKING','Unknown\x20error\x20occured','canceled','Executed\x20','\x20-\x20','fetchClosedOrders','decrypt','customId','placeOrder','826797kyrlMP','watchTradesForSymbols','\x20:\x20','getPortfolio(1)','timeshift','version','Order(s)\x20not\x20validated\x20after\x20','\x20API\x20key\x20is\x20invalid','final','switch-manual','stringify','botname','cancel','active','apiPassword','USD','Invalid\x20quantity','threshold','limit-low','value','sha256','starting-balances','Symbol(s):\x20','map','startsWith','page','RequestTimeout','\x20/\x20','Transaction\x20detection\x20unblocked','coins','3366234xtPvMM'];_0x23cb=function(){return _0x54ded8;};return _0x23cb();}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x2cbca9(0x1f7))[_0x2cbca9(0x188)],botID=process[_0x2cbca9(0x118)][0x2]||_0x2cbca9(0x10e),pattern=/^[0-9]{3}$/;!pattern[_0x2cbca9(0x1d6)](botID)&&(console[_0x2cbca9(0x11b)](_0x2cbca9(0x20b)+botID+_0x2cbca9(0x1fe)),killBot());const userID=process[_0x2cbca9(0x118)][0x3]||'',configpath=userID?_0x2cbca9(0x159)+userID+'/':'./config/',logspath=userID?_0x2cbca9(0xae)+userID+'/':_0x2cbca9(0xae),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0x2cbca9(0x1d8)](configpath)&&fs[_0x2cbca9(0x245)](configpath);!fs[_0x2cbca9(0x1d8)](logspath)&&fs[_0x2cbca9(0x245)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x2cbca9(0x234)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x2cbca9(0x1cb),coinresultsfile=configpath+_0x2cbca9(0x234)+botID+_0x2cbca9(0x231),settingsfile=configpath+_0x2cbca9(0x23a),securefile=configpath+_0x2cbca9(0x20c),configbackuppath=configpath+_0x2cbca9(0x14f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2cbca9(0x1ff)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x2cbca9(0x1dc)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x2cbca9(0x1dc)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x2cbca9(0x1dc)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2cbca9(0x197),'rsaStandard':_0x2cbca9(0x124)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1e1f83=>{const _0x241946=_0x2cbca9;console[_0x241946(0x11b)](_0x1e1f83);},'simple':_0x31dcf8=>{const _0x369bdc=_0x2cbca9;console['log'](_0x31dcf8),loggerfile[_0x369bdc(0x1dc)](util[_0x369bdc(0x25a)](_0x31dcf8)+'\x0a');},'full':async(_0x1a5789,_0x328312='')=>{const _0xf4a525=_0x2cbca9;let _0x2f9aac;if(config[_0xf4a525(0x12f)])_0x2f9aac=getTimeStamp()+':\x20'+config['botname']+_0xf4a525(0x236)+_0x1a5789;else _0x2f9aac=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x1a5789;console['log'](_0x2f9aac),loggerfile[_0xf4a525(0x1dc)](util[_0xf4a525(0x25a)](_0x2f9aac)+'\x0a'),_0x328312&&(console[_0xf4a525(0x11b)](_0x328312),loggerfile[_0xf4a525(0x1dc)](util['format'](_0x328312)+'\x0a'));},'debug':async(_0x4a3bd6,_0x3ad4be='')=>{const _0x3e441b=_0x2cbca9;let _0x2e76ae;if(config[_0x3e441b(0x12f)])_0x2e76ae=getTimeStamp()+':\x20'+config[_0x3e441b(0x18e)]+'\x20>\x20[DEBUG]\x20'+_0x4a3bd6;else _0x2e76ae=getTimeStamp()+_0x3e441b(0x158)+botID+_0x3e441b(0xc8)+_0x4a3bd6;if(debugging)console[_0x3e441b(0x11b)](_0x2e76ae);loggerfile[_0x3e441b(0x1dc)](util['format'](_0x2e76ae)+'\x0a');if(_0x3ad4be){if(debugging)console[_0x3e441b(0x11b)](_0x3ad4be);loggerfile[_0x3e441b(0x1dc)](util['format'](_0x3ad4be)+'\x0a');}}};process['on'](_0x2cbca9(0x104),function(_0x5cc8dc){handleError(_0x5cc8dc,'uncaughtException');});settings['timeshift']!=config[_0x2cbca9(0x187)]&&updateTimeshift(settings[_0x2cbca9(0x187)]);settings[_0x2cbca9(0xf0)]!=config[_0x2cbca9(0xf0)]&&updateOnepagemode(settings[_0x2cbca9(0xf0)]);(settings[_0x2cbca9(0x1fd)]&&!config['marketcapApi']||!settings[_0x2cbca9(0x1fd)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x2cbca9(0x1fd)]);process[_0x2cbca9(0x100)]({'started':_0x2cbca9(0x22b)},_0x27181a=>{}),initializeProcessListeners();function proxyEmit(_0x15a2e7,_0x4b515a=null){process['send']({'function':_0x15a2e7,'args':_0x4b515a},_0x2a4f96=>{});}function initializeProcessListeners(){const _0x3b62fa=_0x2cbca9;process['on'](_0x3b62fa(0xe7),_0x56154c=>{const _0x19dc30=_0x3b62fa;switch(Object[_0x19dc30(0x10a)](_0x56154c)[0x0]){case _0x19dc30(0x187):_0x56154c[_0x19dc30(0x187)]!=undefined&&(settings[_0x19dc30(0x187)]=_0x56154c[_0x19dc30(0x187)],updateTimeshift(settings['timeshift']));break;case _0x19dc30(0xf0):_0x56154c['onepagemode']!=undefined&&(settings[_0x19dc30(0xf0)]=_0x56154c[_0x19dc30(0xf0)],updateOnepagemode(settings['onepagemode']));break;case _0x19dc30(0x1fd):_0x56154c[_0x19dc30(0x1fd)]!=undefined&&(settings[_0x19dc30(0x1fd)]=_0x56154c[_0x19dc30(0x1fd)],updateMarketcapApi(settings[_0x19dc30(0x1fd)]));break;case _0x19dc30(0x1ac):_0x56154c[_0x19dc30(0x1ac)]!=undefined&&(bots=JSON[_0x19dc30(0xb2)](_0x56154c[_0x19dc30(0x1ac)]),proxyEmit(_0x19dc30(0x1ac),bots));break;case'function':switch(_0x56154c[_0x19dc30(0x1d2)]){case'initclient':initclient();break;case _0x19dc30(0xb9):toggleBotMode();break;case _0x19dc30(0xeb):emitHistory(_0x56154c[_0x19dc30(0xdd)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x56154c[_0x19dc30(0xdd)]);break;case _0x19dc30(0x1f5):getPortfolio(_0x56154c['args']);break;case _0x19dc30(0x155):storeConfiguration(_0x56154c[_0x19dc30(0xdd)]);break;case'storeHeadless':storeHeadless(_0x56154c[_0x19dc30(0xdd)]);break;case'storeFiat':storeFiat(_0x56154c[_0x19dc30(0xdd)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x19dc30(0x182):placeOrder(_0x56154c[_0x19dc30(0xdd)]);break;case'cancelLoading':cancelLoading();break;case _0x19dc30(0x13c):showConfig();break;case _0x19dc30(0x13e):sendMetricsTelegram();break;case _0x19dc30(0x233):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x4b22ba=![]){const _0x46f60c=_0x2cbca9;logger[_0x46f60c(0x22d)](_0x46f60c(0x1ec)+(_0x4b22ba?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x46f60c(0x1a9)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x4b22ba)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x46f60c(0x172)]!=''&&config['apiKey']!=_0x46f60c(0xb0)){loadingProgress=0x0;if(_0x4b22ba){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4b497c){handleErrorNoStop(_0x4b497c,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x175d91=await getCoins();[currentCoins,currentCoinsAll]=_0x175d91,getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x46f60c(0xc0)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x46f60c(0x1ab)]==0x0&&allOpenOrders[_0x46f60c(0x1ab)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0x35a84d){const _0x192137=_0x2cbca9;let _0x24c2f3=![];if(_0x35a84d)_0x24c2f3=!![];let _0x354234;_0x24c2f3?_0x354234=_0x35a84d['map'](_0x1d6b68=>_0x1d6b68[_0x192137(0x1dd)]):_0x354234=currentCoinsAll[_0x192137(0x19a)](_0x4b6971=>_0x4b6971[_0x192137(0x1dd)]);if(!config[_0x192137(0x1fd)]||!_0x24c2f3&&!config['marketcapEnabled']||_0x354234[_0x192137(0x1ab)]==0x0)return;let _0x5bee57=null;try{_0x5bee57=await axios[_0x192137(0x24e)](_0x192137(0xc9),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x192137(0x1fd)]},'params':{'symbol':_0x354234[_0x192137(0x1b4)]()}});}catch(_0x140ce0){_0x5bee57=null,_0x140ce0['toString']()[_0x192137(0xd6)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x192137(0x142),emittedConfiguration()),logHistory(_0x192137(0x1d1),_0x192137(0x123))):(logHistory('error',_0x192137(0xb6)+marketCapInterval/(0x3c*0x3e8)+_0x192137(0x21e)),logger[_0x192137(0x22d)](_0x192137(0x101),_0x140ce0['toString']()+_0x192137(0x17e)+_0x140ce0[_0x192137(0x1f6)]));}if(_0x5bee57){let _0x56bfbf=0x0;const _0x1dd9fe=_0x5bee57[_0x192137(0xb4)];_0x354234[_0x192137(0x129)](_0x244de5=>{const _0x745777=_0x192137;if(_0x1dd9fe[_0x745777(0xb4)][_0x244de5][0x0])_0x56bfbf+=_0x1dd9fe[_0x745777(0xb4)][_0x244de5][0x0][_0x745777(0x169)]['USD'][_0x745777(0x13a)];}),_0x354234['forEach'](_0x46902d=>{const _0x379d70=_0x192137,_0x798fa6=_0x1dd9fe['data'][_0x46902d][0x0]?_0x1dd9fe[_0x379d70(0xb4)][_0x46902d][0x0]['quote'][_0x379d70(0x192)][_0x379d70(0x13a)]:0x0;if(_0x24c2f3){const _0x1f5acd=_0x35a84d['find'](_0x18192a=>_0x18192a['coin']==_0x46902d);_0x1f5acd&&(_0x1f5acd['marketcap']=_0x798fa6);}else{const _0x483d4d=currentCoins['find'](_0x5eb6c4=>_0x5eb6c4[_0x379d70(0x1dd)]==_0x46902d);_0x483d4d&&(_0x483d4d[_0x379d70(0x20d)]=_0x798fa6);const _0xf2641f=currentCoinsAll[_0x379d70(0x237)](_0x54b29e=>_0x54b29e[_0x379d70(0x1dd)]==_0x46902d);_0xf2641f&&(_0xf2641f[_0x379d70(0x20d)]=_0x798fa6);}}),!_0x24c2f3&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2f2c92=_0x2cbca9,_0x4ef0ff=0x2;let _0x384380=0x0,_0x591ed5=0x0,_0x50fdd3=0x0,_0x34a43f=0x0,_0x2441fc=0x0;config['portfolio']['forEach'](_0x454f20=>{const _0x3c3f6d=_0x53b2;if(!_0x454f20[_0x3c3f6d(0x112)]){_0x50fdd3++,_0x384380+=_0x454f20[_0x3c3f6d(0x165)];if(_0x454f20[_0x3c3f6d(0x165)]===-0x1){_0x384380++;const _0x468161=currentCoinsAll[_0x3c3f6d(0x237)](_0x57b047=>_0x57b047[_0x3c3f6d(0x1dd)]==_0x454f20[_0x3c3f6d(0x1dd)]);_0x468161&&(_0x34a43f+=_0x468161[_0x3c3f6d(0x20d)],_0x2441fc+=Math[_0x3c3f6d(0xe0)](_0x468161[_0x3c3f6d(0x20d)]));}if(_0x454f20['slider']!==-0x1)_0x591ed5++;}});let _0x9545be;const _0x44da89=0x64-_0x384380,_0x46540d=_0x50fdd3-_0x591ed5;_0x9545be=_0x46540d===0x0?_0x384380:Math[_0x2f2c92(0x130)](0x64,_0x384380),config[_0x2f2c92(0x10f)][_0x2f2c92(0x129)](_0x3fefe2=>{const _0x286488=_0x2f2c92,_0x5b90f4=currentCoinsAll['find'](_0x2ba8c7=>_0x2ba8c7[_0x286488(0x1dd)]==_0x3fefe2[_0x286488(0x1dd)]);_0x5b90f4&&(_0x3fefe2[_0x286488(0x20d)]=_0x5b90f4[_0x286488(0x20d)]);if(!_0x3fefe2[_0x286488(0x112)]){if(_0x9545be<=0x64){if(_0x3fefe2['slider']===-0x1){if(_0x34a43f!==0x0&&config[_0x286488(0x1f4)]){if(_0x5b90f4){if(config[_0x286488(0x1f4)]==_0x286488(0x20d))_0x3fefe2[_0x286488(0x238)]=(_0x44da89/(_0x34a43f/_0x5b90f4[_0x286488(0x20d)]))[_0x286488(0x107)](_0x4ef0ff);else config['marketcapEnabled']==_0x286488(0x121)&&(_0x3fefe2[_0x286488(0x238)]=(_0x44da89/(_0x2441fc/Math[_0x286488(0xe0)](_0x5b90f4[_0x286488(0x20d)])))['toFixed'](_0x4ef0ff));}}}}}}),updateConfig();}function updateConfig(){const _0x1be609=_0x2cbca9;let _0x22937d=dbConfig[_0x1be609(0x24e)]('bot')[_0x1be609(0x237)]({'botID':botID})['value']();_0x22937d&&dbConfig['get'](_0x1be609(0x1f0))['find']({'botID':botID})[_0x1be609(0x102)](config)[_0x1be609(0x1dc)]();}function startScheduler(){const _0x511f23=_0x2cbca9,_0x210e09=process[_0x511f23(0x21d)]()['heapUsed']/0x400/0x400;logger[_0x511f23(0x22d)](_0x511f23(0x1ea)+process[_0x511f23(0x1b6)]+_0x511f23(0x24d)+_0x210e09+_0x511f23(0x217)),getMarketCap();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},marketCapInterval);}async function stopExchange(){const _0x4b5aee=_0x2cbca9;exchangeStopped=!![];try{await exchange[_0x4b5aee(0x116)]();}catch(_0x4a21f5){await handleError(_0x4a21f5,'stopExchange()');}}async function reloadExchange(){const _0x436231=_0x2cbca9;while(lockOrders!=ORDERS[_0x436231(0xcc)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x436231(0x22d)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x387b6d=config[_0x2cbca9(0x16a)],_0x445285=config[_0x2cbca9(0x172)],_0x254ba2=config[_0x2cbca9(0x1d4)],_0x11bec=config[_0x2cbca9(0x191)]){const _0x213617=_0x2cbca9;exchange&&await stopExchange();!supportedExchanges()[_0x213617(0xd6)](_0x387b6d)&&(logHistory(_0x213617(0x1d1),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x387b6d+_0x213617(0x1d0)),killBot());const _0x2feae3=ccxt['pro'][_0x387b6d['toLowerCase']()];exchange=new _0x2feae3({'apiKey':_0x445285,'secret':_0x254ba2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x213617(0xdc)}});if(_0x11bec)exchange[_0x213617(0x177)]=_0x11bec;}function setStableCoins(){const _0x361458=_0x2cbca9;let _0x24ad8d=config[_0x361458(0xf8)]==_0x361458(0x209)?_0x361458(0x209):config[_0x361458(0xf8)]==_0x361458(0x1a7)?_0x361458(0x1a7):'BTC',_0x1cf573=!allSymbols[_0x361458(0xd6)](_0x24ad8d+_0x361458(0xf1))?'USDT':_0x361458(0x192),_0x4c26e4=!allSymbols[_0x361458(0xd6)](_0x24ad8d+_0x361458(0xaf))?_0x1cf573:'EUR';stablecoins={'eur':{'coin':''+_0x24ad8d+_0x4c26e4,'symbol':_0x24ad8d+'/'+_0x4c26e4},'usd':{'coin':''+_0x24ad8d+_0x1cf573,'symbol':_0x24ad8d+'/'+_0x1cf573}};}async function initwsCcxt(){const _0x49bb32=_0x2cbca9;initCycle++;const _0x585638=initCycle;let _0x2ec984=[];config[_0x49bb32(0x10f)][_0x49bb32(0x129)](_0x199f1f=>{const _0x6596da=_0x49bb32;if(!_0x199f1f[_0x6596da(0x112)]&&_0x199f1f[_0x6596da(0x1dd)]!=config[_0x6596da(0xf8)])_0x2ec984[_0x6596da(0x16e)](_0x199f1f['symbol']);});if(!_0x2ec984[_0x49bb32(0xd6)](stablecoins[_0x49bb32(0x1c2)][_0x49bb32(0x1fb)]))_0x2ec984[_0x49bb32(0x16e)](stablecoins[_0x49bb32(0x1c2)][_0x49bb32(0x1fb)]);if(!_0x2ec984[_0x49bb32(0xd6)](stablecoins[_0x49bb32(0xb3)][_0x49bb32(0x1fb)]))_0x2ec984[_0x49bb32(0x16e)](stablecoins[_0x49bb32(0xb3)][_0x49bb32(0x1fb)]);if(config[_0x49bb32(0x16a)][_0x49bb32(0x19b)](_0x49bb32(0xbd))&&config['basecoin']!=_0x49bb32(0x1a7)){if(!_0x2ec984['includes'](_0x49bb32(0x10d)+config[_0x49bb32(0xf8)]))_0x2ec984[_0x49bb32(0x16e)](_0x49bb32(0x10d)+config[_0x49bb32(0xf8)]);}loadCoins(_0x2ec984),_0x2ec984=validateSymbols(_0x2ec984);const _0x37f6a6=async _0x2d22f9=>{const _0x4809e0=_0x49bb32;let _0x29a543;try{const _0x11a5e2=await getTickers(_0x2d22f9);Object[_0x4809e0(0x1f2)](_0x11a5e2)['forEach'](_0x4fd2fb=>{const _0x1f5893=_0x4809e0;_0x29a543=_0x4fd2fb[0x1][_0x1f5893(0x1fb)],global[_0x1f5893(0x149)][noslash(_0x29a543)]=_0x4fd2fb[0x1][_0x1f5893(0x1b2)],global[_0x1f5893(0xd2)][_0x29a543]=_0x4fd2fb[0x1][_0x1f5893(0x223)];});}catch(_0x4c1430){await handleError(_0x4c1430,_0x4809e0(0x21f),_0x29a543);}},_0x157f77=async _0x55667c=>{const _0xb46e22=_0x49bb32;while(initCycle==_0x585638){if(!botPaused)try{const _0x4f9d3d=await exchange[_0xb46e22(0xc4)](_0x55667c);global[_0xb46e22(0x149)][noslash(_0x4f9d3d[0x0]['symbol'])]=_0x4f9d3d[0x0][_0xb46e22(0x1e9)];}catch(_0x2117a9){if(!exchangeStopped)await handleError(_0x2117a9,'watchTrades()',_0x55667c);}else await sleep(0x64);}},_0x4328df=async _0x1a84d2=>{const _0x4e81da=_0x49bb32;while(initCycle==_0x585638){if(!botPaused)try{const _0x1973d4=await exchange[_0x4e81da(0x184)](_0x1a84d2),_0x4299fe=_0x1973d4['pop']();global[_0x4e81da(0x149)][noslash(_0x4299fe['symbol'])]=_0x4299fe[_0x4e81da(0x1e9)];}catch(_0x2a6ea5){if(!exchangeStopped)await handleError(_0x2a6ea5,'watchTradesForSymbols()',_0x1a84d2[_0x4e81da(0x1b4)]());}else await sleep(0x64);}},_0x52e53f=async _0x5d5d1b=>{const _0x5d43f4=_0x49bb32;while(initCycle==_0x585638){if(!botPaused){let _0x2a547e;try{await sleep(0x3c*0x3e8);const _0x45f599=await getTickers(_0x5d5d1b);Object[_0x5d43f4(0x1f2)](_0x45f599)[_0x5d43f4(0x129)](_0x27cc82=>{const _0x3917fb=_0x5d43f4;_0x2a547e=_0x27cc82[0x1]['symbol'],global[_0x3917fb(0xd2)][_0x2a547e]=_0x27cc82[0x1]['percentage'];});}catch(_0x2bbf16){if(!exchangeStopped)await handleError(_0x2bbf16,'fetchTickers()',_0x2a547e);}}else await sleep(0x64);}},_0x325096=async _0x3375d2=>{const _0x486279=_0x49bb32;while(initCycle==_0x585638){if(!botPaused)try{const _0x4f27da=await exchange[_0x486279(0x1f1)](_0x3375d2);initCycle==_0x585638&&_0x4f27da[_0x486279(0x129)](_0x2d4737=>{updateNumberCoinsCcxt(_0x2d4737);});}catch(_0x2e07ea){if(!exchangeStopped)await handleError(_0x2e07ea,_0x486279(0x1c6));}else await sleep(0x64);}};_0x37f6a6(_0x2ec984),_0x52e53f(_0x2ec984),exchange[_0x49bb32(0x108)][_0x49bb32(0x184)]?_0x4328df(_0x2ec984):_0x2ec984[_0x49bb32(0x129)](_0x5a2670=>{_0x157f77(_0x5a2670);}),_0x2ec984[_0x49bb32(0x129)](_0x36a347=>{_0x325096(_0x36a347);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x10fb17){const _0x2cf69c=_0x2cbca9;let _0x4c38fa={};try{if(config['exchange']!=_0x2cf69c(0x1c4))_0x4c38fa=await exchange[_0x2cf69c(0x1d9)](_0x10fb17);else for(const _0x63830b of _0x10fb17){const _0xc0d148=await exchange[_0x2cf69c(0xc2)](_0x63830b);_0x4c38fa[_0x63830b]=_0xc0d148;}return _0x4c38fa;}catch(_0x26f3b6){throw _0x26f3b6;}}async function watchTransactions(){const _0x36195d=_0x2cbca9;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x215be9=await getCoins(),[_0x26ca04,_0x40069a]=_0x215be9;let _0x436f73=[];currentCoins['forEach'](_0x232fd2=>{const _0x5c407f=_0x53b2,_0x234760=_0x26ca04[_0x5c407f(0x237)](_0x57b505=>_0x57b505[_0x5c407f(0x1dd)]==_0x232fd2[_0x5c407f(0x1dd)]);if(_0x234760){if(_0x232fd2[_0x5c407f(0x255)]!=_0x234760[_0x5c407f(0x255)]){let _0x5ee79f;if(_0x232fd2[_0x5c407f(0x1dd)]!=config[_0x5c407f(0xf8)]){const _0x2e8d2b=global[_0x5c407f(0x149)][noslash(_0x232fd2['symbol'])];_0x5ee79f=_0x232fd2['reverse']?0x1/_0x2e8d2b:_0x2e8d2b;}else _0x5ee79f=0x1;_0x436f73[_0x5c407f(0x16e)]({'coin':_0x232fd2[_0x5c407f(0x1dd)],'symbol':_0x232fd2['symbol'],'price':_0x5ee79f,'number':Number(formatResult(_0x234760['number']-_0x232fd2[_0x5c407f(0x255)],0x8)),'basecoinvalue':_0x5ee79f*(_0x234760[_0x5c407f(0x255)]-_0x232fd2[_0x5c407f(0x255)])});}}});if(_0x436f73[_0x36195d(0x1ab)]==0x1&&!blockTransactionDetection){if(config[_0x36195d(0x111)]){logger[_0x36195d(0x22d)](_0x36195d(0x251)+_0x436f73[0x0]['basecoinvalue']+_0x36195d(0x1ee)+lastFees[_0x36195d(0x246)]);if(lastFees[_0x36195d(0x246)]==0x0||Math[_0x36195d(0xea)](_0x436f73[0x0][_0x36195d(0xe4)])>lastFees[_0x36195d(0x246)]){if(config[_0x36195d(0x111)]==_0x36195d(0x1af)){delete _0x436f73[0x0]['symbol'],delete _0x436f73[0x0]['basecoinvalue'];let _0x155cbf=[],_0x328bce=[...config[_0x36195d(0xdb)]]||[],_0x4b26ec=config[_0x36195d(0xdb)];_0x328bce[_0x36195d(0x125)]((_0x2b2ce5,_0x4764b6)=>_0x2b2ce5[_0x36195d(0x119)]>_0x4764b6[_0x36195d(0x119)]?-0x1:_0x4764b6['date']>_0x2b2ce5[_0x36195d(0x119)]?0x1:0x0);const _0x5c676c=getDate();if(_0x328bce[0x0]){const _0x4ab757=fns[_0x36195d(0xb2)](_0x328bce[0x0][_0x36195d(0x119)],_0x36195d(0xe9),new Date()),_0x2dd833=fns[_0x36195d(0xb2)](_0x5c676c,_0x36195d(0xe9),new Date());if(fns[_0x36195d(0x11c)](_0x4ab757,_0x2dd833)){_0x155cbf=_0x328bce[0x0]['changes'];const _0x131758=_0x155cbf[_0x36195d(0x237)](_0x31fdd1=>_0x31fdd1[_0x36195d(0x1dd)]==_0x436f73[0x0][_0x36195d(0x1dd)]);_0x131758?(_0x131758[_0x36195d(0x255)]+=_0x436f73[0x0][_0x36195d(0x255)],_0x131758['number']==0x0&&(_0x155cbf=_0x155cbf[_0x36195d(0x22e)](_0x3a970b=>{return _0x3a970b['coin']!=_0x436f73[0x0]['coin'];}))):_0x155cbf['push'](_0x436f73[0x0]);const _0x4817f6=_0x4b26ec[_0x36195d(0x237)](_0x4bfb01=>_0x4bfb01[_0x36195d(0x119)]==_0x5c676c);_0x4817f6[_0x36195d(0x12d)]=_0x155cbf;}else _0x4b26ec[_0x36195d(0x16e)]({'date':_0x5c676c,'changes':[_0x436f73[0x0]]});}const _0xfdefba=_0x4b26ec[_0x36195d(0x237)](_0x566c87=>_0x566c87[_0x36195d(0x119)]==_0x5c676c);if(_0xfdefba){let _0x5d824b=!![];_0xfdefba[_0x36195d(0x12d)][_0x36195d(0x129)](_0x158911=>{if(_0x158911['number']!=0x0)_0x5d824b=![];}),_0x5d824b&&(_0x4b26ec=_0x4b26ec[_0x36195d(0x22e)](_0x4192a2=>{const _0x399aac=_0x36195d;return _0x4192a2[_0x399aac(0x119)]!=_0x5c676c;}));}let _0x427ccf=dbConfig[_0x36195d(0x24e)](_0x36195d(0x1f0))[_0x36195d(0x237)]({'botID':botID})[_0x36195d(0x196)]();_0x427ccf&&(dbConfig[_0x36195d(0x24e)](_0x36195d(0x1f0))['find']({'botID':botID})[_0x36195d(0x102)]({'liquidity':_0x4b26ec})[_0x36195d(0x1dc)](),config[_0x36195d(0xdb)]=_0x4b26ec),logHistory(_0x36195d(0xe1),_0x36195d(0x1c5)+Math['abs'](_0x436f73[0x0][_0x36195d(0x255)])+'\x20'+_0x436f73[0x0][_0x36195d(0x1dd)]+'\x20'+(_0x436f73[0x0][_0x36195d(0x255)]>0x0?'added':_0x36195d(0x1a3))+_0x36195d(0xd1)),proxyEmit(_0x36195d(0x142),emittedConfiguration());}else config[_0x36195d(0x111)]==_0x36195d(0x18c)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x36195d(0xe1),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x436f73[0x0]['number'])+'\x20'+_0x436f73[0x0][_0x36195d(0x1dd)]+'\x20'+(_0x436f73[0x0][_0x36195d(0x255)]>0x0?_0x36195d(0xbe):'removed')+_0x36195d(0x1ba))):logger[_0x36195d(0x22d)]('Portfolio\x20change\x20detected:\x20'+Math[_0x36195d(0xea)](_0x436f73[0x0][_0x36195d(0x255)])+'\x20'+_0x436f73[0x0][_0x36195d(0x1dd)]+'\x20'+(_0x436f73[0x0][_0x36195d(0x255)]>0x0?_0x36195d(0xbe):_0x36195d(0x1a3))+'\x20-\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x36195d(0x22d)](_0x36195d(0x1d7)+Math[_0x36195d(0xea)](_0x436f73[0x0]['number'])+'\x20'+_0x436f73[0x0][_0x36195d(0x1dd)]+'\x20'+(_0x436f73[0x0][_0x36195d(0x255)]>0x0?_0x36195d(0xbe):_0x36195d(0x1a3)));transactionDetected=!![];}else logger[_0x36195d(0x22d)](_0x36195d(0x1c5)+Math[_0x36195d(0xea)](_0x436f73[0x0][_0x36195d(0x255)])+'\x20'+_0x436f73[0x0][_0x36195d(0x1dd)]+'\x20'+(_0x436f73[0x0][_0x36195d(0x255)]>0x0?_0x36195d(0xbe):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x26ca04,currentCoinsAll=_0x40069a,await sleep(watchTransactionsInterval);}catch(_0x18a43e){if(!exchangeStopped)await handleError(_0x18a43e,_0x36195d(0x242));}else await sleep(0x64);}}async function loadSymbols(){const _0x2081a8=_0x2cbca9;try{markets=await exchange[_0x2081a8(0x212)](),allSymbols=[],Object[_0x2081a8(0x1f2)](markets)[_0x2081a8(0x129)](_0x3d4b72=>{const _0x4691ba=_0x2081a8;_0x3d4b72[0x1][_0x4691ba(0x190)]&&_0x3d4b72[0x1][_0x4691ba(0xdc)]&&allSymbols['push'](_0x3d4b72[0x0]);});}catch(_0x2c3b0e){throw _0x2c3b0e;}}function validateSymbols(_0x48febb){const _0x313944=_0x2cbca9;let _0x1f55ee=[];return _0x48febb[_0x313944(0x129)](_0x23f416=>{const _0x22dc18=_0x313944;!allSymbols[_0x22dc18(0xd6)](_0x23f416)?logHistory(_0x22dc18(0x1d1),_0x22dc18(0xc1)+_0x23f416+_0x22dc18(0xd8)):_0x1f55ee[_0x22dc18(0x16e)](_0x23f416);}),_0x1f55ee;}async function initclient(){const _0x2cb698=_0x2cbca9;proxyEmit(_0x2cb698(0x142),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2cb698(0x207),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x45d62b=getNormalizedPerformance();emitPerformance(_0x45d62b),getStartingBalances(_0x45d62b);}async function toggleBotMode(){const _0x32e641=_0x2cbca9;let _0x329bfc=dbConfig[_0x32e641(0x24e)](_0x32e641(0x1f0))[_0x32e641(0x237)]({'botID':botID})[_0x32e641(0x196)]();if(_0x329bfc){const _0x1268a5=!_0x329bfc[_0x32e641(0x1ca)];dbConfig[_0x32e641(0x24e)](_0x32e641(0x1f0))[_0x32e641(0x237)]({'botID':botID})[_0x32e641(0x102)]({'headless':_0x1268a5})[_0x32e641(0x1dc)](),config[_0x32e641(0x1ca)]=_0x1268a5,proxyEmit(_0x32e641(0x142),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x144707=_0x2cbca9;process[_0x144707(0x100)]({'updatebotmanager':!![]},_0x36c455=>{}),logger[_0x144707(0x22d)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x27df6b){const _0x2d4931=_0x2cbca9;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5215df,_0x2b1897=0x0,_0x5f5056=0x0;_0x27df6b[_0x2d4931(0x129)](_0xaf98a0=>{const _0x23b4a5=_0x2d4931;loading['remainingSymbols'][_0x23b4a5(0x16e)](_0xaf98a0);}),loadingCanceled=![];let _0x9e76e4=![];while(_0x5215df!=_0x27df6b[_0x2d4931(0x1ab)]+maxLoadingProgress){_0x5215df=loadingProgress,_0x27df6b[_0x2d4931(0x129)](_0x1fba2a=>{const _0x45fd74=_0x2d4931;if(global[_0x45fd74(0x149)][noslash(_0x1fba2a)]){loading['remainingSymbols']=loading[_0x45fd74(0x257)][_0x45fd74(0x22e)](_0x31a997=>_0x31a997!=_0x1fba2a);if(!watchedSymbols[_0x45fd74(0xd6)](_0x1fba2a))watchedSymbols[_0x45fd74(0x16e)](_0x1fba2a);_0x5215df++;}}),loading[_0x2d4931(0x1ef)]=Math[_0x2d4931(0x1df)](_0x5215df/(_0x27df6b[_0x2d4931(0x1ab)]+maxLoadingProgress)*0x64);loading[_0x2d4931(0x1ef)]!=0x64&&(_0x5f5056>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x5f5056>0x78*0x5&&!_0x9e76e4&&(_0x9e76e4=!![],logHistory(_0x2d4931(0x1d1),_0x2d4931(0xd7)+loading[_0x2d4931(0x257)][_0x2d4931(0x144)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x2d4931(0x1d1),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x2d4931(0x178)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x3dece3=_0x2d4931;process['send']({'stop':_0x3dece3(0x1e7)},_0xd56154=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2d4931(0x18f)]=!![],emitLoadingProgress();break;}else _0x2b1897!=loading[_0x2d4931(0x1ef)]&&(_0x2b1897=loading[_0x2d4931(0x1ef)],emitLoadingProgress()),_0x5f5056++,await sleep(0xc8);}_0x5215df==_0x27df6b[_0x2d4931(0x1ab)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2d4931(0x100)]({'status':_0x2d4931(0x138),'live':_0x2d4931(0x22b)},_0x12bc29=>{}),_0x9e76e4&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x177132=_0x2cbca9;proxyEmit(_0x177132(0x142),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x3694d8=_0x2cbca9;proxyEmit(_0x3694d8(0xfa),loading);}async function getFiat(){const _0x191ec3=_0x2cbca9;let _0x1b27b3=global['ticker'][stablecoins[_0x191ec3(0x1c2)][_0x191ec3(0x1dd)]],_0x5b8b8c=global[_0x191ec3(0x149)][stablecoins[_0x191ec3(0xb3)][_0x191ec3(0x1dd)]];return{'eur':Number(_0x1b27b3),'usd':Number(_0x5b8b8c)};}function capitalize(_0x4a2d06){return _0x4a2d06['substring'](0x0,0x1)['toUpperCase']()+_0x4a2d06['substring'](0x1);}function supportedExchanges(){const _0x235df8=_0x2cbca9,_0x4650ba=['ws','fetchTickers','fetchTicker',_0x235df8(0xc4),_0x235df8(0x1f1),'cancelOrder',_0x235df8(0x211),_0x235df8(0x206),_0x235df8(0x17f),_0x235df8(0x11f)];let _0x3ee9d6=[],_0x228a4f=[],_0x1a798a=ccxt[_0x235df8(0x157)][_0x235df8(0x16c)];_0x1a798a[_0x235df8(0x129)](_0x294fc8=>{const _0x1ca2e8=_0x235df8;try{const _0x53820f=new ccxt[(_0x1ca2e8(0x157))][_0x294fc8]();_0x228a4f[_0x1ca2e8(0x16e)](_0x53820f);}catch(_0x29e110){}}),_0x228a4f['forEach'](_0x34f6ba=>{const _0x3e78dd=_0x235df8;let _0x56b5fb=0x0;_0x4650ba[_0x3e78dd(0x129)](_0x384551=>{const _0x4f0d3b=_0x3e78dd;_0x384551 in _0x34f6ba[_0x4f0d3b(0x108)]&&_0x34f6ba['has'][_0x384551]&&_0x56b5fb++;}),_0x56b5fb==_0x4650ba[_0x3e78dd(0x1ab)]&&_0x3ee9d6[_0x3e78dd(0x16e)](capitalize(_0x34f6ba['id']));});let _0x5bb0c4=[];return _0x1a798a[_0x235df8(0x129)](_0x137681=>{const _0x141a2b=_0x235df8;_0x137681=capitalize(_0x137681);if(!_0x3ee9d6['includes'](_0x137681))_0x5bb0c4[_0x141a2b(0x16e)](_0x137681);}),_0x3ee9d6;}function setStartDatePerformance(){const _0x30bdb8=_0x2cbca9;if(config&&config[_0x30bdb8(0xdb)][0x0]['changes'][_0x30bdb8(0x1ab)]!=0x0){const _0x3f46bf=config[_0x30bdb8(0xdb)][0x0]['changes'];dbPerformance[_0x30bdb8(0x24e)](_0x30bdb8(0xb4))[_0x30bdb8(0x237)]({'date':config[_0x30bdb8(0x1e2)]})[_0x30bdb8(0x102)]({'coins':_0x3f46bf})[_0x30bdb8(0x1dc)]();}}async function recreateCoinResults(){const _0x9d6dbb=_0x2cbca9;let _0x137782,_0x12eaae=[];try{const _0x8500ca=fns[_0x9d6dbb(0x25a)](fns['parseISO'](config[_0x9d6dbb(0x1e2)][_0x9d6dbb(0x170)](/\//g,'-')),_0x9d6dbb(0x151));for(const _0x841b0 of currentCoins){if(_0x841b0[_0x9d6dbb(0x1dd)]!=config['basecoin']){let _0x9e02c4=0x0,_0x43f471,_0x3dee67;_0x137782=await getAllEventOrders(_0x841b0[_0x9d6dbb(0x1fb)]);if(_0x137782[_0x9d6dbb(0x1ab)]>0x0)_0x137782['forEach'](_0x95de95=>{const _0x3fc681=_0x9d6dbb,_0x1161cf=_0x841b0[_0x3fc681(0x1fb)][_0x3fc681(0xd6)](config[_0x3fc681(0xf8)]+'/');_0x12eaae['push']({'datetime':_0x95de95[_0x3fc681(0x120)],'coin':_0x841b0['coin'],'symbol':_0x841b0['symbol'],'side':_0x95de95[_0x3fc681(0x1c0)],'reverse':_0x1161cf,'amount':formatResult(_0x95de95[_0x3fc681(0x241)],0x8),'filled':formatResult(_0x95de95[_0x3fc681(0x241)],0x8),'price':formatResult(_0x95de95[_0x3fc681(0x1e9)],0x8)}),_0x9e02c4=_0x95de95[_0x3fc681(0x1c0)]==_0x3fc681(0xed)?_0x9e02c4+_0x95de95[_0x3fc681(0x241)]:_0x9e02c4-_0x95de95[_0x3fc681(0x241)];if(!_0x3dee67)_0x3dee67=_0x95de95[_0x3fc681(0x1e9)];});_0x43f471=_0x841b0[_0x9d6dbb(0x255)]-_0x9e02c4;let _0x298f56;config['liquidity'][_0x9d6dbb(0x129)](_0x378fbb=>{const _0x2b13ff=_0x9d6dbb;!_0x298f56&&(_0x298f56=_0x378fbb[_0x2b13ff(0x12d)]['find'](_0x3731be=>_0x3731be[_0x2b13ff(0x1dd)]==_0x841b0[_0x2b13ff(0x1dd)]),_0x298f56&&(_0x43f471=_0x298f56[_0x2b13ff(0x255)],_0x3dee67=_0x298f56[_0x2b13ff(0x1e9)]));});let _0x407483=dbCoinResults['get']('coins')[_0x9d6dbb(0x237)]({'coin':_0x841b0['coin']})[_0x9d6dbb(0x196)]();_0x407483={'coin':_0x841b0[_0x9d6dbb(0x1dd)],'number':_0x43f471,'breakeven':_0x3dee67,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x9d6dbb(0x24e)](_0x9d6dbb(0x1a0))[_0x9d6dbb(0x237)]({'coin':_0x841b0[_0x9d6dbb(0x1dd)]})[_0x9d6dbb(0x102)](_0x407483)[_0x9d6dbb(0x1dc)]();}}_0x12eaae[_0x9d6dbb(0x125)]((_0xc7a624,_0x1c1fa9)=>_0xc7a624['datetime']>_0x1c1fa9[_0x9d6dbb(0x120)]?0x1:_0x1c1fa9[_0x9d6dbb(0x120)]>_0xc7a624['datetime']?-0x1:0x0);let _0xe3bb7e=0x0;for(let _0x26dd8c of _0x12eaae){await updateCoinResults(_0x26dd8c,!![]);}}catch(_0x496c1f){await handleError(_0x496c1f,_0x9d6dbb(0x1a8));}}async function getAllEventOrders(_0x26a5b3){const _0x194e3a=_0x2cbca9;let _0x118737=[],_0x489079=dbLogs[_0x194e3a(0x24e)]('logs')[_0x194e3a(0x22e)](_0x49a2a8=>{const _0x3c9d59=_0x194e3a,_0x253e37=_0x49a2a8[_0x3c9d59(0x166)]['toLowerCase']();return _0x253e37['includes'](_0x26a5b3[_0x3c9d59(0x14e)]())&&(_0x253e37['includes'](_0x3c9d59(0x10b))&&_0x253e37[_0x3c9d59(0xd6)]('order')||_0x253e37['includes'](_0x3c9d59(0x241))&&_0x253e37[_0x3c9d59(0xd6)](_0x3c9d59(0x253)));})['sortBy']('time')[_0x194e3a(0x196)]();return _0x489079[_0x194e3a(0x129)](_0x18f72e=>{const _0x3dd9cd=_0x194e3a,_0x15da86=_0x18f72e[_0x3dd9cd(0x166)][_0x3dd9cd(0xd6)]('sell')?_0x3dd9cd(0xce):_0x3dd9cd(0xed),_0x2f2b62=/#([0-9]|\.)+\s/i,_0x5dfc89=Number(_0x2f2b62['exec'](_0x18f72e['event'])[0x0][_0x3dd9cd(0x21a)](0x1)),_0x4565e9=/@([0-9]|\.)+$/i,_0x3ec836=Number(_0x4565e9['exec'](_0x18f72e[_0x3dd9cd(0x166)])[0x0]['slice'](0x1));_0x118737[_0x3dd9cd(0x16e)]({'datetime':_0x18f72e[_0x3dd9cd(0xfc)],'coin':symbolToCoin(_0x26a5b3),'symbol':_0x26a5b3,'side':_0x15da86,'amount':_0x5dfc89,'filled':_0x5dfc89,'price':_0x3ec836});}),_0x118737;}async function getAllOrders(_0x192c57,_0x1bc1f8){const _0x97a1e6=_0x2cbca9;let _0x432fbd=[];while(_0x1bc1f8<exchange[_0x97a1e6(0x1bd)]()){const _0x10a2d3=0x1f4;try{const _0xa24bc1=await exchange['fetchClosedOrders'](_0x192c57,_0x1bc1f8,_0x10a2d3);if(_0xa24bc1[_0x97a1e6(0x1ab)])_0x1bc1f8=_0xa24bc1[_0xa24bc1[_0x97a1e6(0x1ab)]-0x1][_0x97a1e6(0x23b)]+0x1,_0x432fbd=_0x432fbd[_0x97a1e6(0x25c)](_0xa24bc1);else break;}catch(_0x113eba){await handleError(_0x113eba,_0x97a1e6(0x243),_0x192c57);}}return _0x432fbd;}async function validate24hChanges(){const _0x7f5256=_0x2cbca9;for(const _0xfb05b0 of currentCoins){if(_0xfb05b0[_0x7f5256(0x1dd)]!=config[_0x7f5256(0xf8)]){let _0x5055c9;_0xfb05b0['reverse']?_0x5055c9=formatResult((0x1/(global[_0x7f5256(0xd2)][_0xfb05b0['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x5055c9=global[_0x7f5256(0xd2)][_0xfb05b0[_0x7f5256(0x1fb)]],_0x5055c9<config[_0x7f5256(0xfd)]&&(logHistory(_0x7f5256(0x1d1),_0xfb05b0[_0x7f5256(0x1dd)]+_0x7f5256(0xc5)+_0x5055c9+'%'),logHistory('error',_0x7f5256(0x1d5)),logHistory(_0x7f5256(0x1d1),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x517c05,_0x5b0662){const _0x2092ab=_0x2cbca9;if(!_0x517c05)return!![];const _0x22527e=_0x5b0662[_0x2092ab(0x1e8)]('.'),_0x38e0da=_0x517c05['split']('.');for(var _0xee5800=0x0;_0xee5800<_0x38e0da[_0x2092ab(0x1ab)];_0xee5800++){const _0x16c2fd=~~_0x38e0da[_0xee5800],_0x3bacd0=~~_0x22527e[_0xee5800];if(_0x16c2fd<_0x3bacd0)return!![];if(_0x16c2fd>_0x3bacd0)return![];}return![];}async function oneTimeMigration(){const _0x491cbb=_0x2cbca9;let _0x104364=dbLogs[_0x491cbb(0x24e)](_0x491cbb(0x188))['value']();if(isOlderVersion(_0x104364,_0x491cbb(0x20a))){let _0x18c40d=[];const _0x5da07d=dbLogs[_0x491cbb(0x24e)]('logs')[_0x491cbb(0x196)]();_0x5da07d[_0x491cbb(0x129)](_0x25bf70=>{const _0x3e5cbf=_0x491cbb;_0x18c40d['push']({'time':_0x25bf70[_0x3e5cbf(0xfc)],'type':_0x25bf70[_0x3e5cbf(0x14c)],'event':_0x25bf70[_0x3e5cbf(0x166)]});}),dbLogs[_0x491cbb(0x24e)](_0x491cbb(0xbc))[_0x491cbb(0x102)](_0x18c40d)[_0x491cbb(0x1dc)]();}let _0x3d5f78=dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x188))[_0x491cbb(0x196)]();if(isOlderVersion(_0x3d5f78,_0x491cbb(0x20a))){let _0x40bbc7=dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))['find']({'botID':botID})[_0x491cbb(0x196)]();if(_0x40bbc7){let _0x39eae2=[];_0x40bbc7[_0x491cbb(0x10f)]['forEach'](_0x300996=>{const _0x1cc6b5=_0x491cbb;_0x39eae2[_0x1cc6b5(0x16e)]({'coin':_0x300996[_0x1cc6b5(0x1dd)],'number':_0x300996['startnumber'],'price':_0x300996['startprice']}),delete _0x300996[_0x1cc6b5(0x224)],delete _0x300996[_0x1cc6b5(0x141)];});if(_0x39eae2['length']!==0x0)fs[_0x491cbb(0x1c7)](configbackuppath+('starting-balance-'+botID+_0x491cbb(0x227)),JSON[_0x491cbb(0x18d)](_0x39eae2,null,0x4),function(_0x4f1fb7){if(_0x4f1fb7){}});const _0xa69c8a=(_0xeb2361,_0x24ebf1)=>{const _0x5dc904=_0x491cbb;let _0x60fe54=[];_0x24ebf1['forEach'](_0x539e16=>{const _0x100d2f=_0x53b2,_0x18c4ea=_0xeb2361[_0x100d2f(0x237)](_0x490af2=>_0x490af2[_0x100d2f(0x1dd)]==_0x539e16[_0x100d2f(0x1dd)]);if(!_0x18c4ea)_0x60fe54[_0x100d2f(0x16e)](_0x539e16);});let _0x275a05=[];return _0xeb2361[_0x5dc904(0x129)](_0x2c1134=>{const _0x4851ef=_0x5dc904,_0x5ba9e9=_0x24ebf1[_0x4851ef(0x237)](_0x237f52=>_0x237f52[_0x4851ef(0x1dd)]==_0x2c1134[_0x4851ef(0x1dd)]);if(!_0x5ba9e9||_0x5ba9e9[_0x4851ef(0x255)]==0x0&&_0x2c1134['number']!=0x0)_0x275a05[_0x4851ef(0x16e)](_0x2c1134);}),{'missingDay1':_0x60fe54,'notInDay2':_0x275a05};},_0x14e17f=dbPerformance[_0x491cbb(0x24e)](_0x491cbb(0xb4))[_0x491cbb(0x1aa)]()[_0x491cbb(0x196)]();if(_0x14e17f['length']>0x1){const {missingDay1:_0x2cce77,notInDay2:_0x8df8d9}=_0xa69c8a(_0x39eae2,_0x14e17f[0x1][_0x491cbb(0x1a0)]);_0x39eae2=[..._0x39eae2,..._0x2cce77],_0x8df8d9[_0x491cbb(0x129)](_0x59ff36=>{const _0x2ce6b4=_0x491cbb;let _0xfb9dc3=_0x39eae2[_0x2ce6b4(0x200)](_0x242841=>_0x242841[_0x2ce6b4(0x1dd)]==_0x59ff36[_0x2ce6b4(0x1dd)]);_0xfb9dc3!=-0x1&&_0x39eae2['splice'](_0xfb9dc3,0x1);});}_0x39eae2[_0x491cbb(0x125)]((_0x40b460,_0x1a6184)=>_0x40b460[_0x491cbb(0x1dd)]>_0x1a6184[_0x491cbb(0x1dd)]?0x1:_0x1a6184[_0x491cbb(0x1dd)]>_0x40b460[_0x491cbb(0x1dd)]?-0x1:0x0);let _0x2ba5bc=[{'date':_0x40bbc7[_0x491cbb(0x1e2)],'changes':_0x39eae2}];_0x14e17f[_0x491cbb(0x1ab)]>0x2&&_0x14e17f[_0x491cbb(0x129)]((_0x37a7fd,_0xbacd7f)=>{const _0x287cc8=_0x491cbb;if(_0xbacd7f>0x0&&_0xbacd7f<_0x14e17f[_0x287cc8(0x1ab)]-0x1){const {missingDay1:_0x5aa33f,notInDay2:_0x359021}=_0xa69c8a(_0x14e17f[_0xbacd7f][_0x287cc8(0x1a0)],_0x14e17f[_0xbacd7f+0x1]['coins']);_0x39eae2=[],(_0x5aa33f['length']!=0x0||_0x359021[_0x287cc8(0x1ab)]!=0x0)&&(_0x5aa33f[_0x287cc8(0x1ab)]!=0x0&&_0x39eae2[_0x287cc8(0x16e)](..._0x5aa33f),_0x359021[_0x287cc8(0x1ab)]!=0x0&&(_0x359021[_0x287cc8(0x129)](_0x4e5bef=>{const _0x2459a9=_0x287cc8;_0x4e5bef[_0x2459a9(0x255)]=-_0x4e5bef[_0x2459a9(0x255)];}),_0x39eae2['push'](..._0x359021)),_0x39eae2['sort']((_0x4c8e2f,_0x578644)=>_0x4c8e2f[_0x287cc8(0x1dd)]>_0x578644[_0x287cc8(0x1dd)]?0x1:_0x578644[_0x287cc8(0x1dd)]>_0x4c8e2f[_0x287cc8(0x1dd)]?-0x1:0x0),_0x2ba5bc[_0x287cc8(0x16e)]({'date':_0x14e17f[_0xbacd7f+0x1]['date'],'changes':_0x39eae2}));}}),dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x102)]({..._0x40bbc7,'liquidity':_0x2ba5bc})[_0x491cbb(0x1dc)]();}}if(isOlderVersion(_0x3d5f78,'2.6.0')){let _0x14e191=dbConfig[_0x491cbb(0x24e)]('bot')[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x196)]();if(_0x14e191){const _0x36d54f=_0x14e191['exchange'],_0x235ac2=_0x36d54f?capitalize(_0x36d54f):_0x491cbb(0xbd);dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x102)]({'exchange':_0x235ac2})['write']();}}if(isOlderVersion(_0x3d5f78,_0x491cbb(0x131))){let _0x7515d5=dbConfig['get'](_0x491cbb(0x1f0))[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x196)]();if(_0x7515d5){const _0x49c37e=_0x7515d5[_0x491cbb(0x1f4)],_0x15030d=_0x49c37e?'marketcap':![];dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))['find']({'botID':botID})[_0x491cbb(0x102)]({'marketcapEnabled':_0x15030d})['write']();}}if(isOlderVersion(_0x3d5f78,_0x491cbb(0xad))){let _0x280a46=dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x196)]();if(_0x280a46){const _0x32a6f3=_0x280a46[_0x491cbb(0x111)],_0xda7d15=_0x32a6f3?_0x491cbb(0x1af):![];dbConfig[_0x491cbb(0x24e)](_0x491cbb(0x1f0))[_0x491cbb(0x237)]({'botID':botID})[_0x491cbb(0x102)]({'autoliquidity':_0xda7d15})[_0x491cbb(0x1dc)]();}}let _0x432231=dbPerformance[_0x491cbb(0x24e)](_0x491cbb(0x188))['value']();isOlderVersion(_0x432231,_0x491cbb(0x20a))&&setStartDatePerformance();let _0x4789f6=dbCoinResults[_0x491cbb(0x24e)](_0x491cbb(0x188))[_0x491cbb(0x196)]();if(isOlderVersion(_0x4789f6,_0x491cbb(0x1d3))){let _0x165044=dbCoinResults['get'](_0x491cbb(0x1a0))[_0x491cbb(0x196)]();if(_0x165044['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x26e2e0=_0x2cbca9;dbConfig[_0x26e2e0(0x106)](_0x26e2e0(0x188),serverversion)[_0x26e2e0(0x1dc)](),dbPerformance['set'](_0x26e2e0(0x188),serverversion)[_0x26e2e0(0x1dc)](),dbLogs['set']('version',serverversion)['write'](),dbCoinResults[_0x26e2e0(0x106)](_0x26e2e0(0x188),serverversion)['write']();}function getConfiguration(_0x5cc64b){const _0x550117=_0x2cbca9;let _0x412a32=dbConfig[_0x550117(0x24e)]('bot')[_0x550117(0x237)]({'botID':_0x5cc64b})[_0x550117(0x196)]();if(_0x412a32){let _0x593595=![];typeof _0x412a32[_0x550117(0x194)]==_0x550117(0x176)&&(_0x412a32={..._0x412a32,'threshold':Number(_0x412a32[_0x550117(0x194)])},_0x593595=!![]),_0x412a32[_0x550117(0xfd)]==undefined&&(_0x412a32={..._0x412a32,'change24h':-0x14},_0x593595=!![]),_0x412a32[_0x550117(0x21c)]==undefined&&(_0x412a32={..._0x412a32,'fiat':_0x550117(0x192)},_0x593595=!![]),_0x412a32['onepagemode']==undefined&&(_0x412a32={..._0x412a32,'onepagemode':settings[_0x550117(0xf0)]},_0x593595=!![]),_0x412a32['colorscheme']==undefined&&(_0x412a32={..._0x412a32,'colorscheme':'red_yellow_blue'},_0x593595=!![]),_0x412a32[_0x550117(0x111)]==undefined&&(_0x412a32={..._0x412a32,'autoliquidity':_0x550117(0x1af)},_0x593595=!![]),_0x412a32[_0x550117(0x1fd)]==undefined&&(_0x412a32={..._0x412a32,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x593595=!![]),_0x412a32[_0x550117(0x1f4)]==undefined&&(_0x412a32={..._0x412a32,'marketcapEnabled':![]},_0x593595=!![]),_0x593595&&(_0x412a32={'botID':_0x412a32['botID'],'exchange':_0x412a32['exchange'],'apiKey':_0x412a32[_0x550117(0x172)],'apiSecret':_0x412a32[_0x550117(0x1d4)],'apiPassword':_0x412a32[_0x550117(0x191)],'basecoin':_0x412a32['basecoin'],'botname':_0x412a32[_0x550117(0x18e)],'showname':_0x412a32[_0x550117(0x12f)],'threshold':_0x412a32['threshold'],'ordertype':_0x412a32['ordertype'],'timeout':_0x412a32[_0x550117(0xde)],'fiat':_0x412a32[_0x550117(0x21c)],'startdate':_0x412a32[_0x550117(0x1e2)],'recreate':_0x412a32[_0x550117(0x153)],'timeshift':_0x412a32[_0x550117(0x187)],'onepagemode':_0x412a32[_0x550117(0xf0)],'headless':_0x412a32[_0x550117(0x1ca)],'cooldown':_0x412a32['cooldown'],'change24h':_0x412a32['change24h'],'emojibuy':_0x412a32[_0x550117(0x1ae)],'emojisell':_0x412a32['emojisell'],'colorscheme':_0x412a32[_0x550117(0x164)],'marketcapApi':_0x412a32[_0x550117(0x1fd)],'marketcapEnabled':_0x412a32[_0x550117(0x1f4)],'portfolio':_0x412a32[_0x550117(0x10f)],'autoliquidity':_0x412a32['autoliquidity'],'liquidity':_0x412a32[_0x550117(0xdb)],'openOrders':_0x412a32[_0x550117(0x15c)]},dbConfig[_0x550117(0x24e)](_0x550117(0x1f0))[_0x550117(0x117)]()[_0x550117(0x1dc)](),dbConfig[_0x550117(0x24e)](_0x550117(0x1f0))[_0x550117(0x16e)](_0x412a32)[_0x550117(0x1dc)]());}else _0x412a32={'botID':_0x5cc64b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x550117(0x113)+_0x5cc64b,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x550117(0x192),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x550117(0xf0)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x550117(0x140),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x550117(0x1af),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x412a32;}function emittedConfiguration(){const _0x2d328d=_0x2cbca9;let _0x19e470;if(config['apiKey']=='')_0x19e470={...config,'configstate':'initial'};else config[_0x2d328d(0x172)]==_0x2d328d(0xb0)?_0x19e470={...config,'configstate':_0x2d328d(0xe3)}:(_0x19e470={...config,'apiKey':_0x2d328d(0x167),'apiSecret':_0x2d328d(0x167)},config[_0x2d328d(0x191)]&&(_0x19e470['apiPassword']='************'));return _0x19e470;}function getSettings(){const _0x59044b=_0x2cbca9;return dbSettings[_0x59044b(0x24e)](_0x59044b(0x136))[_0x59044b(0x196)]();}function getSecure(){const _0x25bdd1=_0x2cbca9;return dbSecure[_0x25bdd1(0x24e)](_0x25bdd1(0x1ad))['value']()||{};}function updateTimeshift(_0x4cc53b){const _0x42e8ed=_0x2cbca9;let _0x11fbdf=dbConfig[_0x42e8ed(0x24e)](_0x42e8ed(0x1f0))[_0x42e8ed(0x237)]({'botID':botID})[_0x42e8ed(0x196)]();_0x11fbdf&&dbConfig[_0x42e8ed(0x24e)]('bot')[_0x42e8ed(0x237)]({'botID':botID})['assign']({'timeshift':_0x4cc53b})[_0x42e8ed(0x1dc)](),config['timeshift']=_0x4cc53b,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x5b06f1){const _0x2d4639=_0x2cbca9;let _0x442d4e=dbConfig[_0x2d4639(0x24e)]('bot')[_0x2d4639(0x237)]({'botID':botID})[_0x2d4639(0x196)]();_0x442d4e&&dbConfig[_0x2d4639(0x24e)]('bot')[_0x2d4639(0x237)]({'botID':botID})[_0x2d4639(0x102)]({'onepagemode':_0x5b06f1})['write'](),config['onepagemode']=_0x5b06f1,proxyEmit(_0x2d4639(0x142),emittedConfiguration());}function updateMarketcapApi(_0x428427){const _0x360072=_0x2cbca9,_0x5824a0=_0x428427?!![]:![];let _0x24c1df=dbConfig[_0x360072(0x24e)](_0x360072(0x1f0))[_0x360072(0x237)]({'botID':botID})[_0x360072(0x196)]();_0x24c1df&&dbConfig[_0x360072(0x24e)](_0x360072(0x1f0))[_0x360072(0x237)]({'botID':botID})[_0x360072(0x102)]({'marketcapApi':_0x5824a0})[_0x360072(0x1dc)](),config[_0x360072(0x1fd)]=_0x5824a0,getMarketCap(),proxyEmit(_0x360072(0x142),emittedConfiguration());}async function storeConfiguration(_0x389893){const _0x5bf64f=_0x2cbca9;logger[_0x5bf64f(0x22d)](_0x5bf64f(0x10c));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5bf64f(0x22d)](_0x5bf64f(0x230));let _0x26f777=![],_0x49cd3e=![],_0x2e31f6=[];_0x389893[_0x5bf64f(0x10f)][_0x5bf64f(0x129)](_0x3ef639=>{const _0x222319=_0x5bf64f;if(!_0x3ef639[_0x222319(0x112)]&&_0x3ef639[_0x222319(0x1dd)]!=_0x389893[_0x222319(0xf8)])_0x2e31f6[_0x222319(0x16e)](_0x3ef639[_0x222319(0x1fb)]);}),_0x2e31f6[_0x5bf64f(0x129)](_0x1dbb43=>{const _0x37197f=_0x5bf64f,_0x32de86=currentCoins[_0x37197f(0x237)](_0x406f3d=>_0x406f3d['symbol']==_0x1dbb43);!_0x32de86&&(_0x26f777=!![]);}),currentCoins[_0x5bf64f(0x129)](_0x586aa9=>{const _0x3b9fc3=_0x5bf64f;if(_0x586aa9['coin']!=config[_0x3b9fc3(0xf8)]){const _0x204997=_0x2e31f6['find'](_0x51cb29=>_0x51cb29==_0x586aa9[_0x3b9fc3(0x1fb)]);!_0x204997&&(_0x26f777=!![]);}}),_0x389893[_0x5bf64f(0x10f)]['forEach'](_0x393db2=>{const _0x41eedb=_0x5bf64f,_0x3c8c5f=config[_0x41eedb(0x10f)][_0x41eedb(0x237)](_0x3df1fc=>_0x3df1fc[_0x41eedb(0x1dd)]==_0x393db2['coin']);if(_0x3c8c5f&&_0x393db2[_0x41eedb(0x163)]!=_0x3c8c5f[_0x41eedb(0x163)])_0x49cd3e=!![];});let _0x48b555=dbConfig[_0x5bf64f(0x24e)](_0x5bf64f(0x1f0))[_0x5bf64f(0x237)]({'botID':botID})[_0x5bf64f(0x196)]();_0x389893={..._0x389893,'apiKey':crypt[_0x5bf64f(0x180)](secure['privateKey'],_0x389893[_0x5bf64f(0x172)])['message'],'apiSecret':crypt[_0x5bf64f(0x180)](secure[_0x5bf64f(0xda)],_0x389893['apiSecret'])['message']};_0x389893[_0x5bf64f(0x191)]&&(_0x389893[_0x5bf64f(0x191)]=crypt[_0x5bf64f(0x180)](secure[_0x5bf64f(0xda)],_0x389893['apiPassword'])[_0x5bf64f(0xe7)]);let _0x34e73a=![];if(_0x48b555){_0x389893['apiKey']==_0x5bf64f(0x167)?_0x389893[_0x5bf64f(0x172)]=config[_0x5bf64f(0x172)]:_0x34e73a=!![];_0x389893[_0x5bf64f(0x1d4)]==_0x5bf64f(0x167)?_0x389893[_0x5bf64f(0x1d4)]=config[_0x5bf64f(0x1d4)]:_0x34e73a=!![];if(_0x389893['apiPassword']==_0x5bf64f(0x167))_0x389893['apiPassword']=config['apiPassword'];else{if(_0x389893[_0x5bf64f(0x191)])_0x34e73a=!![];}dbConfig['get'](_0x5bf64f(0x1f0))[_0x5bf64f(0x237)]({'botID':botID})[_0x5bf64f(0x102)](_0x389893)[_0x5bf64f(0x1dc)]();}else dbConfig[_0x5bf64f(0x24e)](_0x5bf64f(0x1f0))[_0x5bf64f(0x16e)](_0x389893)[_0x5bf64f(0x1dc)](),_0x34e73a=!![],process[_0x5bf64f(0x100)]({'status':_0x5bf64f(0x138),'live':_0x5bf64f(0x22b)},_0xc9275b=>{});process[_0x5bf64f(0x100)]({'botname':_0x389893[_0x5bf64f(0x18e)]},_0x1c591d=>{}),config={..._0x389893},updateBotManager(),proxyEmit(_0x5bf64f(0x248)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x34e73a)await reset(!![]);else _0x26f777||_0x49cd3e?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x5bf64f(0x22d)](_0x5bf64f(0x19f));}async function storeHeadless(_0x4edbca){const _0x17d3a4=_0x2cbca9,_0x2d88fd={...config,'headless':_0x4edbca[_0x17d3a4(0x1ca)]};let _0x54382d=dbConfig[_0x17d3a4(0x24e)](_0x17d3a4(0x1f0))['find']({'botID':botID})['value']();_0x54382d&&dbConfig[_0x17d3a4(0x24e)](_0x17d3a4(0x1f0))[_0x17d3a4(0x237)]({'botID':botID})[_0x17d3a4(0x102)](_0x2d88fd)[_0x17d3a4(0x1dc)](),config={..._0x2d88fd},updateBotManager(),proxyEmit(_0x17d3a4(0x142),emittedConfiguration());}async function storeFiat(_0x4a492d){const _0x457d0a=_0x2cbca9,_0x1aca1e={...config,'fiat':_0x4a492d};let _0xdc254d=dbConfig['get']('bot')['find']({'botID':botID})[_0x457d0a(0x196)]();_0xdc254d&&dbConfig[_0x457d0a(0x24e)](_0x457d0a(0x1f0))[_0x457d0a(0x237)]({'botID':botID})[_0x457d0a(0x102)](_0x1aca1e)[_0x457d0a(0x1dc)](),config={..._0x1aca1e},proxyEmit(_0x457d0a(0x142),emittedConfiguration());}function resetHistory(){const _0x5486dc=_0x2cbca9;logger[_0x5486dc(0xf4)](_0x5486dc(0x109));try{if(fs[_0x5486dc(0x1d8)](path[_0x5486dc(0x144)](configpath,'bot-'+botID+_0x5486dc(0x1b0))))fs['unlinkSync'](path[_0x5486dc(0x144)](configpath,'bot-'+botID+_0x5486dc(0x1b0)));if(fs[_0x5486dc(0x1d8)](path[_0x5486dc(0x144)](configpath,_0x5486dc(0x234)+botID+_0x5486dc(0x1cb))))fs[_0x5486dc(0x232)](path[_0x5486dc(0x144)](configpath,_0x5486dc(0x234)+botID+_0x5486dc(0x1cb)));if(fs[_0x5486dc(0x1d8)](path[_0x5486dc(0x144)](configpath,_0x5486dc(0x234)+botID+_0x5486dc(0x231))))fs[_0x5486dc(0x232)](path[_0x5486dc(0x144)](configpath,_0x5486dc(0x234)+botID+_0x5486dc(0x231)));}catch(_0x448ef3){if(_0x448ef3)logger[_0x5486dc(0xf4)](_0x5486dc(0x175),_0x448ef3);}const _0x47b9cf=getDate();let _0x3cff60=[];currentCoins['forEach'](_0x2b8318=>{const _0xe05194=_0x5486dc;_0x3cff60[_0xe05194(0x16e)]({'coin':_0x2b8318['coin'],'number':_0x2b8318[_0xe05194(0x255)],'price':_0x2b8318[_0xe05194(0x1b2)]});});let _0x346294=dbConfig[_0x5486dc(0x24e)]('bot')[_0x5486dc(0x237)]({'botID':botID})[_0x5486dc(0x196)]();_0x346294&&(dbConfig[_0x5486dc(0x24e)](_0x5486dc(0x1f0))[_0x5486dc(0x237)]({'botID':botID})[_0x5486dc(0x102)]({'liquidity':[{'date':_0x47b9cf,'changes':_0x3cff60}]})[_0x5486dc(0x1dc)](),config['liquidity']=[]),process[_0x5486dc(0x100)]({'stop':_0x5486dc(0x1e7)},_0xe849a9=>{});}function noslash(_0x14bd5b){const _0x2cda76=_0x2cbca9;return _0x14bd5b[_0x2cda76(0x170)]('/','');}function updateHighestFee(_0x350d6e){const _0x167817=_0x2cbca9;if(_0x350d6e[_0x167817(0x13b)]){let _0x39c14c={'filled':_0x350d6e['filled']*_0x350d6e[_0x167817(0x1e9)],'amount':_0x350d6e['filled']*_0x350d6e[_0x167817(0x1e9)],'side':_0x350d6e[_0x167817(0x1c0)]=='sell'?_0x167817(0xed):_0x167817(0xce),'price':0x1/_0x350d6e[_0x167817(0x1e9)]};_0x350d6e={..._0x350d6e,..._0x39c14c};}const _0x41afdf=defaultFee*_0x350d6e[_0x167817(0x241)]*_0x350d6e[_0x167817(0x1e9)];lastFees['recent20']['length']===0x14&&lastFees[_0x167817(0x250)][_0x167817(0xbb)](),lastFees[_0x167817(0x250)][_0x167817(0x16e)](_0x41afdf),lastFees[_0x167817(0x246)]=Math[_0x167817(0x130)](...lastFees[_0x167817(0x250)]);}async function updateNumberCoinsCcxt(_0xfc2cc4){const _0x45e9aa=_0x2cbca9;logger['debug'](_0x45e9aa(0x145)+_0xfc2cc4['symbol']+_0x45e9aa(0x171)+_0xfc2cc4[_0x45e9aa(0xf9)]+_0x45e9aa(0x171)+_0xfc2cc4['filled']+_0x45e9aa(0x19e)+_0xfc2cc4[_0x45e9aa(0x21b)]+'\x20|\x20'+_0xfc2cc4['id']);let _0x41149f=_0xfc2cc4['status'],_0x66da03=![];currentCoins['forEach'](_0x4b2453=>{const _0x4d870b=_0x45e9aa;_0x4b2453[_0x4d870b(0x1fb)]==_0xfc2cc4[_0x4d870b(0x1fb)]&&(_0x66da03=!![]);});if(!_0x66da03)return;const _0x3be2bd=currentCoins[_0x45e9aa(0x237)](_0x302f37=>_0x302f37['symbol']==_0xfc2cc4[_0x45e9aa(0x1fb)]),_0x38aa04=_0x2e2bd8=>{if(_0x3be2bd)_0x3be2bd['orderstatus']=_0x2e2bd8;};if(_0x41149f=='open')_0x38aa04(_0x45e9aa(0x1cf));else{if(_0x41149f==_0x45e9aa(0x17c)){_0x38aa04(_0x45e9aa(0x17c));const _0x1d997a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1d997a,await getOpenOrders(),handleOpenOrders();}else{if(_0x41149f==_0x45e9aa(0x202)){let _0x5ab1fa=![];if(lastOrders)for(const _0x55462c of lastOrders){const _0x2fd871=0xc8,_0x3fde39=0x1388;let _0x5277c0=0x0;while(!_0x55462c[_0x45e9aa(0x1b8)]&&_0x5277c0*_0x2fd871<_0x3fde39){_0x5277c0++,await sleep(_0x2fd871);}if(_0x5277c0>0x0)logger[_0x45e9aa(0x22d)](_0x45e9aa(0x244)+_0x5277c0*_0x2fd871/0x3e8+_0x45e9aa(0xcb));if(_0x55462c[_0x45e9aa(0x1b8)]==_0xfc2cc4['id']){logger[_0x45e9aa(0x22d)](_0x45e9aa(0x12a)+_0xfc2cc4['id']),_0x5ab1fa=!![];if(_0x55462c[_0x45e9aa(0x241)]==0x0){logger[_0x45e9aa(0x22d)](_0x45e9aa(0xd5)+_0xfc2cc4['id']);if(_0xfc2cc4[_0x45e9aa(0x1fc)])_0x55462c[_0x45e9aa(0x1e9)]=_0xfc2cc4[_0x45e9aa(0x1fc)];else{if(_0xfc2cc4[_0x45e9aa(0x1e9)])_0x55462c['price']=_0xfc2cc4[_0x45e9aa(0x1e9)];else{}}_0x55462c[_0x45e9aa(0x241)]=_0xfc2cc4[_0x45e9aa(0x241)],updateHighestFee(_0x55462c),_0x38aa04('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x2b4f69=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2b4f69;}_0x55462c[_0x45e9aa(0x249)]={'currency':_0xfc2cc4[_0x45e9aa(0x249)]?_0xfc2cc4['fee']['currency']:null,'cost':_0xfc2cc4[_0x45e9aa(0x249)]?_0xfc2cc4[_0x45e9aa(0x249)][_0x45e9aa(0x154)]:0x0},await updateCoinResults(_0x55462c);}}}if(!_0x5ab1fa){logger[_0x45e9aa(0x22d)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0xfc2cc4['id']),_0x38aa04('filled');const _0x148d74=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x148d74,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x58b4d3=JSON[_0x45e9aa(0xb2)](lastBalances['portfolio']);const _0x27260f=_0x58b4d3[_0x45e9aa(0x237)](_0x373871=>_0x373871[_0x45e9aa(0x1fb)]==_0xfc2cc4[_0x45e9aa(0x1fb)]);if(_0x27260f){if(_0x41149f==_0x45e9aa(0x1cf))_0x27260f[_0x45e9aa(0x208)]=_0x27260f[_0x45e9aa(0x208)]==_0x45e9aa(0x241)?_0x45e9aa(0x241):_0x45e9aa(0x1cf);else{if(_0x41149f==_0x45e9aa(0x17c))_0x27260f['orderstatus']=_0x27260f[_0x45e9aa(0x208)]==_0x45e9aa(0x241)?_0x45e9aa(0x241):_0x45e9aa(0x17c);else _0x41149f==_0x45e9aa(0x202)&&(_0x27260f['orderstatus']=_0x45e9aa(0x241));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x58b4d3)},proxyEmit(_0x45e9aa(0x207),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3bfad4=_0x2cbca9;await getOpenOrders();let _0x37e0d6=![];currentCoins[_0x3bfad4(0x129)](_0x2f8b61=>{const _0x29de1b=_0x3bfad4;_0x37e0d6=allOpenOrders[_0x29de1b(0x237)](_0x51ec32=>_0x51ec32['symbol']==_0x2f8b61[_0x29de1b(0x1fb)]),_0x2f8b61[_0x29de1b(0x208)]=_0x37e0d6?_0x29de1b(0x1cf):_0x29de1b(0x122);});}async function getCoins(_0x1ed936=0x0,_0x19d52f=!![],_0x1b3355=config['basecoin']){const _0x249dce=_0x2cbca9;let _0x3dcb94,_0x4d0e08=[],_0x7e2dde=[],_0x5e3f3f=[];if(_0x1ed936)await sleep(_0x1ed936);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3dcb94=await exchange[_0x249dce(0x11f)](),mybalances=_0x3dcb94[_0x249dce(0x1f9)];for(const [_0x238038,_0x583087]of Object[_0x249dce(0x1f2)](mybalances)){_0x5e3f3f[_0x249dce(0x16e)](_0x238038);}config[_0x249dce(0x10f)][_0x249dce(0x129)](_0x4dda90=>{const _0x104a49=_0x249dce;!_0x5e3f3f[_0x104a49(0xd6)](_0x4dda90[_0x104a49(0x1dd)])&&(mybalances[_0x4dda90[_0x104a49(0x1dd)]]=0x0);});if(_0x1b3355=='')for(const [_0x452094,_0x2d5893]of Object[_0x249dce(0x1f2)](mybalances)){_0x2d5893!=0x0&&_0x4d0e08[_0x249dce(0x16e)]({'coin':_0x452094});}else for(const [_0x5615d2,_0x2f1268]of Object[_0x249dce(0x1f2)](mybalances)){const _0x1584ed=config['portfolio']['find'](_0x1b22d8=>_0x1b22d8[_0x249dce(0x1dd)]==_0x5615d2),_0x27a1a2=_0x5615d2+'/'+_0x1b3355,_0x4dc4b7=_0x1b3355+'/'+_0x5615d2,_0x488506=currentCoins[_0x249dce(0x237)](_0x19c2c0=>_0x19c2c0[_0x249dce(0x1dd)]==_0x5615d2);if((_0x2f1268!=0x0||_0x1584ed)&&(allSymbols[_0x249dce(0xd6)](_0x27a1a2)||_0x5615d2==_0x1b3355))_0x488506?_0x4d0e08[_0x249dce(0x16e)]({..._0x488506,'number':Math[_0x249dce(0x130)](_0x2f1268+(_0x1584ed&&_0x1584ed['offset']||0x0),0x0)}):_0x4d0e08[_0x249dce(0x16e)]({'coin':_0x5615d2,'symbol':_0x27a1a2,'reverse':![],'number':Math[_0x249dce(0x130)](_0x2f1268+(_0x1584ed&&_0x1584ed[_0x249dce(0x163)]||0x0),0x0),'orderstatus':'none'});else{if((_0x2f1268!=0x0||_0x1584ed)&&allSymbols[_0x249dce(0xd6)](_0x4dc4b7))_0x488506?_0x4d0e08[_0x249dce(0x16e)]({..._0x488506,'number':Math['max'](_0x2f1268+(_0x1584ed&&_0x1584ed['offset']||0x0),0x0)}):_0x4d0e08[_0x249dce(0x16e)]({'coin':_0x5615d2,'symbol':_0x4dc4b7,'reverse':!![],'number':Math[_0x249dce(0x130)](_0x2f1268+(_0x1584ed&&_0x1584ed[_0x249dce(0x163)]||0x0),0x0),'orderstatus':_0x249dce(0x122)});else _0x1584ed&&_0x4d0e08[_0x249dce(0x16e)]({'coin':_0x1584ed[_0x249dce(0x1dd)],'symbol':_0x1584ed[_0x249dce(0x1fb)],'reverse':_0x1584ed[_0x249dce(0x13b)],'number':0x0,'orderstatus':_0x249dce(0x122)});}}}catch(_0x51653c){if(!_0x19d52f)handleErrorNoStop(_0x51653c,_0x249dce(0xcf));else await handleError(_0x51653c,_0x249dce(0xcf));}return _0x4d0e08['sort']((_0x53721f,_0x2bc11f)=>_0x53721f['delta']<_0x2bc11f['delta']?0x1:_0x2bc11f[_0x249dce(0x127)]<_0x53721f[_0x249dce(0x127)]?-0x1:0x0),_0x7e2dde=cloneDeep(_0x4d0e08),_0x4d0e08=_0x4d0e08[_0x249dce(0x22e)](_0x10a5e3=>{const _0x33aa0e=_0x249dce,_0x2a5b5f=config[_0x33aa0e(0x10f)][_0x33aa0e(0x237)](_0x4d98f6=>_0x4d98f6['coin']==_0x10a5e3[_0x33aa0e(0x1dd)]);return _0x2a5b5f&&!_0x2a5b5f[_0x33aa0e(0x112)];}),[_0x4d0e08,_0x7e2dde];}async function getCoinNumber(_0x4ed89f){const _0x371b85=_0x2cbca9;let _0x4ada6c;try{const _0x3e7acd=await exchange[_0x371b85(0x11f)]();_0x4ada6c=_0x3e7acd[_0x371b85(0x1f9)][_0x4ed89f];}catch(_0x3b236a){await handleError(_0x3b236a,_0x371b85(0xac));}return _0x4ada6c;}async function getOpenOrders(){const _0xae7780=_0x2cbca9;let _0xa88e9a;allOpenOrders=[];try{for(const _0x54f4bc of config[_0xae7780(0x10f)]){!_0x54f4bc[_0xae7780(0x112)]&&_0x54f4bc[_0xae7780(0x1dd)]!=config[_0xae7780(0xf8)]&&(_0xa88e9a=await exchange[_0xae7780(0x206)](_0x54f4bc[_0xae7780(0x1fb)]),_0xa88e9a[_0xae7780(0x1ab)]>0x0&&allOpenOrders[_0xae7780(0x16e)](_0xa88e9a[0x0]));}}catch(_0x49c02e){await handleError(_0x49c02e,_0xae7780(0x105));}}async function handleOpenOrders(_0x401f9b=0x0){const _0x5202c=_0x2cbca9;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x5202c(0x13f)]&&allOrdersPlaced&&(_0x401f9b==0x0?(logger[_0x5202c(0x22d)](_0x5202c(0xf2)),_0x401f9b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x5202c(0xb8))));}async function testAPI(_0x57736d){const _0x34e279=_0x2cbca9,_0x4558b7=ccxt['pro'][_0x57736d['exchange'][_0x34e279(0x14e)]()],_0x3f82ef=new _0x4558b7({'apiKey':_0x57736d[_0x34e279(0x172)],'secret':_0x57736d[_0x34e279(0x1d4)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x34e279(0xdc)}});if(_0x57736d[_0x34e279(0x191)])_0x3f82ef[_0x34e279(0x177)]=_0x57736d[_0x34e279(0x191)];try{await _0x3f82ef[_0x34e279(0x212)]();}catch(_0x329de6){throw _0x329de6;}}function cloneDeep(_0x3c685d){const _0x58f89d=_0x2cbca9;return JSON[_0x58f89d(0xb2)](JSON['stringify'](_0x3c685d));}async function getPortfolio(_0x54d193){const _0x52d7fb=_0x2cbca9;let _0x5bc977=[],_0x10aecf=[],_0x3edcdb=[],_0x530e34;if(_0x54d193[_0x52d7fb(0x172)]!==_0x52d7fb(0x167)||_0x54d193['apiSecret']!=='************'||_0x54d193[_0x52d7fb(0x191)]&&_0x54d193[_0x52d7fb(0x191)]!==_0x52d7fb(0x167)){if(config[_0x52d7fb(0x16a)]){if(_0x54d193[_0x52d7fb(0x172)]==_0x52d7fb(0x167))_0x54d193['apiKey']=config[_0x52d7fb(0x172)];if(_0x54d193[_0x52d7fb(0x1d4)]=='************')_0x54d193['apiSecret']=config[_0x52d7fb(0x1d4)];if(_0x54d193[_0x52d7fb(0x191)]==_0x52d7fb(0x167))_0x54d193[_0x52d7fb(0x191)]=config[_0x52d7fb(0x191)];try{await testAPI(_0x54d193);}catch(_0x2be8f8){if(_0x2be8f8[_0x52d7fb(0x1b4)]()[_0x52d7fb(0xd6)](_0x52d7fb(0x214))){logger[_0x52d7fb(0x22d)](_0x52d7fb(0x1e1)),proxyEmit(_0x52d7fb(0x10f),![]);return;}else{handleError(_0x2be8f8,_0x52d7fb(0x16d));return;}}}await initExchange(_0x54d193[_0x52d7fb(0x16a)],_0x54d193[_0x52d7fb(0x172)],_0x54d193[_0x52d7fb(0x1d4)],_0x54d193['apiPassword']);try{await loadSymbols();}catch(_0x1008e2){if(_0x1008e2['toString']()['includes'](_0x52d7fb(0x214))){proxyEmit('portfolio',![]);return;}else{handleError(_0x1008e2,_0x52d7fb(0x186));return;}}const _0x167002=await getCoins(0x0,![],_0x54d193[_0x52d7fb(0xf8)]);_0x3edcdb=cloneDeep(_0x167002[0x1]);}else{const _0x4cdbbe=await getCoins();_0x3edcdb=cloneDeep(_0x4cdbbe[0x1]);}if(_0x54d193['basecoin']=='')proxyEmit(_0x52d7fb(0x10f),_0x3edcdb);else{_0x3edcdb[_0x52d7fb(0x129)](_0x113213=>{const _0x2cda78=_0x52d7fb;if(_0x113213['coin']!=_0x54d193[_0x2cda78(0xf8)]&&allSymbols[_0x2cda78(0xd6)](_0x113213['symbol']))_0x5bc977[_0x2cda78(0x16e)](_0x113213['symbol']);});if(_0x5bc977[_0x52d7fb(0x1ab)]==0x0)logHistory(_0x52d7fb(0x1d1),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x10aecf=await getTickers(_0x5bc977);}catch(_0x1d6797){if(_0x1d6797[_0x52d7fb(0x1b4)]()['includes'](_0x52d7fb(0x214))){proxyEmit(_0x52d7fb(0x10f),![]);return;}else handleError(_0x1d6797,'getPortfolio(2)');}_0x3edcdb[_0x52d7fb(0x129)](_0x593e46=>{const _0x404d7d=_0x52d7fb;_0x593e46[_0x404d7d(0x1dd)]!=_0x54d193[_0x404d7d(0xf8)]?_0x10aecf[_0x593e46[_0x404d7d(0x1fb)]]?_0x530e34=_0x593e46[_0x404d7d(0x13b)]?0x1/_0x10aecf[_0x593e46[_0x404d7d(0x1fb)]]['last']:_0x10aecf[_0x593e46[_0x404d7d(0x1fb)]][_0x404d7d(0x1b2)]:_0x530e34=0x0:_0x530e34=0x1,_0x593e46[_0x404d7d(0x1e9)]=formatResult(_0x530e34,0x8);}),await getMarketCap(_0x3edcdb),proxyEmit(_0x52d7fb(0x10f),_0x3edcdb);}}}function _0x53b2(_0x5d3711,_0xed9d74){const _0x349815=_0x23cb();return _0x53b2=function(_0x36078a,_0x29422e){_0x36078a=_0x36078a-0xac;let _0x23cb06=_0x349815[_0x36078a];return _0x23cb06;},_0x53b2(_0x5d3711,_0xed9d74);}function truncateTradeAmount(_0x3334d8,_0x266dc3){const _0x3847e4=_0x2cbca9;let _0x40c2e7=0x0;try{_0x40c2e7=exchange[_0x3847e4(0xc6)](_0x3334d8,_0x266dc3);}catch(_0x5d07e4){}return _0x40c2e7;}function checkMinimums(_0x551ea9){const _0x494ddb=_0x2cbca9;let _0x5606f1=!![];const _0x2ac4f1=!_0x551ea9[_0x494ddb(0x13b)]?markets[_0x551ea9[_0x494ddb(0x1fb)]][_0x494ddb(0x1e5)][_0x494ddb(0x21b)][_0x494ddb(0x1ed)]:markets[_0x551ea9[_0x494ddb(0x1fb)]][_0x494ddb(0x1e5)][_0x494ddb(0x154)][_0x494ddb(0x1ed)],_0x1d13d0=!_0x551ea9[_0x494ddb(0x13b)]?markets[_0x551ea9[_0x494ddb(0x1fb)]][_0x494ddb(0x1e5)][_0x494ddb(0x154)][_0x494ddb(0x1ed)]:markets[_0x551ea9[_0x494ddb(0x1fb)]][_0x494ddb(0x1e5)][_0x494ddb(0x21b)]['min'],_0x56ea4b=truncateTradeAmount(_0x551ea9[_0x494ddb(0x1fb)],_0x551ea9['trade']);_0x551ea9[_0x494ddb(0x218)]=_0x56ea4b;if(Math['abs'](_0x56ea4b)<_0x2ac4f1)_0x5606f1=![];if(Math['abs'](_0x56ea4b)*_0x551ea9['last']<_0x1d13d0)_0x5606f1=![];if(_0x551ea9[_0x494ddb(0x1c0)]==_0x494ddb(0xce)){let _0x57639b=config['portfolio'][_0x494ddb(0x237)](_0x5f4495=>_0x5f4495[_0x494ddb(0x1dd)]==_0x551ea9[_0x494ddb(0x1dd)]);if(_0x57639b[_0x494ddb(0x163)]>0x0){if(Math['abs'](_0x56ea4b)>_0x551ea9[_0x494ddb(0x255)]-_0x57639b[_0x494ddb(0x163)])_0x5606f1=![];}else{if(Math[_0x494ddb(0xea)](_0x56ea4b)>_0x551ea9[_0x494ddb(0x255)])_0x5606f1=![];}}if(_0x551ea9['side']==_0x494ddb(0xed)){let _0x5e44b1=config['portfolio']['find'](_0x535799=>_0x535799[_0x494ddb(0x1dd)]==config['basecoin']),_0x55c1ed=currentCoins[_0x494ddb(0x237)](_0x290b7a=>_0x290b7a[_0x494ddb(0x1dd)]==config[_0x494ddb(0xf8)]);if(_0x5e44b1[_0x494ddb(0x163)]>0x0){if(Math[_0x494ddb(0xea)](_0x56ea4b)*_0x551ea9[_0x494ddb(0x1b2)]>_0x55c1ed[_0x494ddb(0x255)]-_0x5e44b1[_0x494ddb(0x163)])_0x5606f1=![];}else{if(Math[_0x494ddb(0xea)](_0x56ea4b)*_0x551ea9[_0x494ddb(0x1b2)]>_0x55c1ed[_0x494ddb(0x255)])_0x5606f1=![];}}return _0x5606f1;}async function getBalances(_0x3e6d15=!![]){const _0x4085f9=_0x2cbca9;let _0x313b97=0x0,_0x2abb5b;const _0x2b46f8=config[_0x4085f9(0x194)];if(config['headless']&&config[_0x4085f9(0xfd)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x30ac50=>{const _0x449a16=_0x4085f9;if(_0x30ac50[_0x449a16(0x1dd)]!=config[_0x449a16(0xf8)]){let _0x2c6b3a=global[_0x449a16(0x149)][noslash(_0x30ac50[_0x449a16(0x1fb)])];_0x2abb5b=_0x30ac50[_0x449a16(0x13b)]?0x1/_0x2c6b3a:_0x2c6b3a;}else _0x2abb5b=0x1;let _0x5253cc=_0x30ac50['number']*_0x2abb5b;_0x313b97+=_0x5253cc,_0x30ac50[_0x449a16(0x1b2)]=formatResult(Number(_0x2abb5b),0x8),_0x30ac50[_0x449a16(0x196)]=_0x5253cc;}),currentCoins[_0x4085f9(0x129)](_0x491edc=>{const _0x2738dc=_0x4085f9;let _0x4acdb5=config[_0x2738dc(0x10f)]['find'](_0x53ef06=>_0x53ef06[_0x2738dc(0x1dd)]==_0x491edc[_0x2738dc(0x1dd)]),_0x4b4fb1=Number(_0x4acdb5[_0x2738dc(0x238)]),_0x336b25=_0x491edc[_0x2738dc(0x196)]/_0x313b97*0x64,_0x358c83=_0x4b4fb1*_0x313b97/0x64/_0x491edc[_0x2738dc(0x1b2)]-_0x491edc['number'];_0x491edc['distribution']=formatResult(_0x336b25,0x3),_0x491edc[_0x2738dc(0x161)]=formatResult(_0x4b4fb1,0x3),_0x491edc['trade']=formatResult(_0x358c83,0x8),_0x491edc[_0x2738dc(0x1c0)]='',_0x491edc[_0x2738dc(0x14b)]=![];if(_0x491edc['coin']!=config[_0x2738dc(0xf8)]){if(_0x491edc['distribution']>_0x4b4fb1)_0x491edc[_0x2738dc(0x1c0)]=_0x2738dc(0xce),_0x491edc['valid']=checkMinimums(_0x491edc);else _0x491edc[_0x2738dc(0x238)]<_0x4b4fb1&&(_0x491edc[_0x2738dc(0x1c0)]=_0x2738dc(0xed),_0x491edc[_0x2738dc(0x14b)]=checkMinimums(_0x491edc));}_0x491edc[_0x2738dc(0x127)]=_0x491edc[_0x2738dc(0x238)]/_0x491edc[_0x2738dc(0x161)]-0x1;if(_0x491edc[_0x2738dc(0x208)]==_0x2738dc(0x241)||_0x491edc['orderstatus']==_0x2738dc(0x17c))_0x491edc['orderstatus']=_0x2738dc(0x122);}),currentCoins['sort']((_0x4a8022,_0x3846a9)=>_0x4a8022[_0x4085f9(0x127)]<_0x3846a9[_0x4085f9(0x127)]?0x1:_0x3846a9[_0x4085f9(0x127)]<_0x4a8022[_0x4085f9(0x127)]?-0x1:0x0);const _0x2b7d57=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2b7d57[_0x4085f9(0x1c2)],'usd':_0x2b7d57['usd'],'portfolio':JSON[_0x4085f9(0x18d)](currentCoins),'threshold':_0x2b46f8},proxyEmit(_0x4085f9(0x207),{'serverversion':serverversion,'balances':lastBalances});if(_0x3e6d15){if(config[_0x4085f9(0x1ca)])headlessMode({'portfolio':currentCoins,'threshold':_0x2b46f8});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2b46f8});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1b0390=getNormalizedPerformance();getStartingBalances(_0x1b0390),emitPerformance(_0x1b0390);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5f4336=getNormalizedPerformance();emitPerformance(_0x5f4336),getStartingBalances(_0x5f4336),logger[_0x4085f9(0x22d)](_0x4085f9(0x259));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x43ac97=_0x2cbca9;if(!lastBalances)return;let _0x4a9b95=[],_0x2c6885,_0x2201fc=JSON['parse'](lastBalances[_0x43ac97(0x10f)]);_0x2201fc[_0x43ac97(0x125)]((_0x2053cf,_0x1b6749)=>_0x2053cf['coin']>_0x1b6749[_0x43ac97(0x1dd)]?0x1:_0x1b6749[_0x43ac97(0x1dd)]>_0x2053cf[_0x43ac97(0x1dd)]?-0x1:0x0),_0x2201fc[_0x43ac97(0x129)](_0x415e6c=>{const _0x3ef740=_0x43ac97;let _0x133f43={'coin':_0x415e6c[_0x3ef740(0x1dd)],'number':_0x415e6c[_0x3ef740(0x255)],'price':_0x415e6c[_0x3ef740(0x1b2)]};_0x4a9b95[_0x3ef740(0x16e)](_0x133f43);});const _0x42b360=await getFiat();_0x2c6885={'date':lastBalances[_0x43ac97(0xfc)]['split']('\x20')[0x0],'eur':_0x42b360[_0x43ac97(0x1c2)],'usd':_0x42b360['usd'],'coins':_0x4a9b95};let _0x4c6e3c=dbPerformance['get'](_0x43ac97(0xb4))['find']({'date':_0x2c6885[_0x43ac97(0x119)]})[_0x43ac97(0x196)]();_0x4c6e3c?_0x2c6885[_0x43ac97(0x119)]!=config['startdate']&&dbPerformance[_0x43ac97(0x24e)](_0x43ac97(0xb4))['find']({'date':_0x2c6885[_0x43ac97(0x119)]})[_0x43ac97(0x102)](_0x2c6885)['write']():dbPerformance[_0x43ac97(0x24e)]('data')['push'](_0x2c6885)[_0x43ac97(0x1dc)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x21bf76=_0x2cbca9;let _0x41005c=[];if(dbPerformance[_0x21bf76(0x108)](_0x21bf76(0xb4))[_0x21bf76(0x196)]()){let _0x232f7c=dbPerformance[_0x21bf76(0x24e)](_0x21bf76(0xb4))[_0x21bf76(0x1aa)]()[_0x21bf76(0x22e)](_0x95b61b=>{const _0x43fff3=_0x21bf76;if(_0x95b61b[_0x43fff3(0x1a0)][_0x43fff3(0x1ab)]==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x22381b=[...config[_0x21bf76(0xdb)]];_0x22381b[_0x21bf76(0x125)]((_0x2958ef,_0x3c82d8)=>_0x2958ef[_0x21bf76(0x119)]>_0x3c82d8[_0x21bf76(0x119)]?-0x1:_0x3c82d8['date']>_0x2958ef[_0x21bf76(0x119)]?0x1:0x0);let _0x295cac=0x1,_0x419b48=[],_0x270788=0x0;_0x232f7c[_0x21bf76(0x21a)]()[_0x21bf76(0x13b)]()[_0x21bf76(0x129)]((_0x2d7d0b,_0xbb6b94)=>{const _0x3e6567=_0x21bf76;if(_0x22381b[_0x270788]){if(_0x232f7c[_0x232f7c[_0x3e6567(0x1ab)]-_0xbb6b94]&&_0x22381b[_0x270788][_0x3e6567(0x119)]==_0x232f7c[_0x232f7c[_0x3e6567(0x1ab)]-_0xbb6b94][_0x3e6567(0x119)]){if(_0xbb6b94<_0x232f7c[_0x3e6567(0x1ab)]){let _0x3fc298=0x0,_0x475bce=0x0;_0x232f7c[_0x232f7c[_0x3e6567(0x1ab)]-_0xbb6b94][_0x3e6567(0x1a0)]['forEach'](_0x267560=>{const _0x4b31ca=_0x3e6567;_0x475bce+=_0x267560[_0x4b31ca(0x255)]*_0x267560[_0x4b31ca(0x1e9)];}),_0x22381b[_0x270788][_0x3e6567(0x12d)][_0x3e6567(0x129)](_0x52d882=>{const _0x386723=_0x3e6567;_0x3fc298+=_0x52d882[_0x386723(0x255)]*_0x52d882[_0x386723(0x1e9)];}),_0x295cac*=_0x3fc298/(_0x475bce-_0x3fc298)+0x1;}_0x270788++;}}let _0x5359b8=0x0;_0x2d7d0b[_0x3e6567(0x1a0)][_0x3e6567(0x129)](_0x1e19d5=>{const _0x2ef723=_0x3e6567;_0x5359b8+=_0x1e19d5[_0x2ef723(0x255)]*_0x1e19d5[_0x2ef723(0x1e9)];}),_0x419b48[_0x232f7c[_0x3e6567(0x1ab)]-_0xbb6b94-0x1]=_0x5359b8*(_0x295cac-0x1);});let _0x4d69bf=[];_0x22381b=[...config[_0x21bf76(0xdb)]]||[];let _0x19f09b=0x0;_0x270788=0x0,_0x232f7c['forEach']((_0x569755,_0x3203b9)=>{const _0x5ed8bc=_0x21bf76;if(_0x22381b[_0x270788]){const _0x37409c=fns[_0x5ed8bc(0xb2)](_0x22381b[_0x270788][_0x5ed8bc(0x119)],'yyyy/MM/dd',new Date()),_0x26ad52=fns[_0x5ed8bc(0xb2)](_0x569755[_0x5ed8bc(0x119)],_0x5ed8bc(0xe9),new Date());if(fns[_0x5ed8bc(0x11c)](_0x37409c,_0x26ad52)){let _0x4bccd6=0x0;_0x22381b[_0x270788][_0x5ed8bc(0x12d)][_0x5ed8bc(0x129)](_0x531a0e=>{const _0x3cec3e=_0x5ed8bc;!_0x4d69bf[_0x531a0e[_0x3cec3e(0x1dd)]]?_0x4d69bf[_0x531a0e[_0x3cec3e(0x1dd)]]=_0x531a0e[_0x3cec3e(0x255)]:(_0x4bccd6=_0x4d69bf[_0x531a0e[_0x3cec3e(0x1dd)]],_0x4d69bf[_0x531a0e['coin']]+=_0x531a0e[_0x3cec3e(0x255)]);const _0x497826=_0x569755[_0x3cec3e(0x1a0)]['find'](_0xdf6968=>_0xdf6968[_0x3cec3e(0x1dd)]==_0x531a0e['coin']);(!_0x497826||_0x497826['number']==0x0)&&(_0x19f09b+=(-_0x531a0e[_0x3cec3e(0x255)]-_0x4bccd6)*_0x531a0e[_0x3cec3e(0x1e9)]);}),_0x270788++;}}_0x569755[_0x5ed8bc(0x1a0)][_0x5ed8bc(0x129)]((_0x262867,_0x405d0f)=>{const _0x4e71e9=_0x5ed8bc;_0x4d69bf[_0x262867[_0x4e71e9(0x1dd)]]&&(_0x262867[_0x4e71e9(0xba)]=_0x4d69bf[_0x262867[_0x4e71e9(0x1dd)]]);}),_0x41005c[_0x5ed8bc(0x16e)]({'date':_0x569755['date'],'eur':_0x569755[_0x5ed8bc(0x1c2)],'usd':_0x569755[_0x5ed8bc(0xb3)],'offset':_0x419b48[_0x3203b9],'netoffset':_0x19f09b,'coins':_0x569755[_0x5ed8bc(0x1a0)]});});}return _0x41005c;}function emitPerformance(_0x50f885){const _0x322945=_0x2cbca9;_0x50f885[_0x322945(0x1ab)]!==0x0?(proxyEmit(_0x322945(0x1e3),_0x50f885),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x53ebb1,_0x343697){const _0x221b8f=_0x2cbca9;let _0x5c9335=0x0,_0x4ce854=0x0,_0x323348=0x0;_0x53ebb1[_0x221b8f(0x1a0)][_0x221b8f(0x129)](_0x4e7422=>{_0x5c9335+=_0x4e7422['number']*_0x4e7422['price'];});_0x343697&&(_0x5c9335+=_0x53ebb1['offset']);if(config[_0x221b8f(0xf8)]===_0x221b8f(0x216)||config[_0x221b8f(0xf8)]===_0x221b8f(0x209)||config[_0x221b8f(0xf8)]==='PAXG')_0x4ce854=_0x5c9335*_0x53ebb1[_0x221b8f(0x1c2)],_0x323348=_0x5c9335*_0x53ebb1[_0x221b8f(0xb3)];else{if(usdBasecoins[_0x221b8f(0xd6)](config['basecoin']))_0x4ce854=_0x5c9335*_0x53ebb1[_0x221b8f(0x1c2)]/_0x53ebb1[_0x221b8f(0xb3)],_0x323348=_0x5c9335;else config[_0x221b8f(0xf8)]===_0x221b8f(0x150)&&(_0x4ce854=_0x5c9335,_0x323348=_0x5c9335*_0x53ebb1[_0x221b8f(0xb3)]/_0x53ebb1[_0x221b8f(0x1c2)]);}return[_0x5c9335,_0x4ce854,_0x323348];}function getKPIs(_0x23044a,_0x5dc8d7=_0x2cbca9(0x150)){const _0x449268=_0x2cbca9,_0x2ceb63=config['basecoin'],_0x5affb8=lastBalances,_0x2da95b=currentCoins,_0x151b6b=getNormalizedPerformance(),_0x19fe9e=_0x23044a===_0x449268(0xf8)?_0x2ceb63:_0x23044a===_0x449268(0x21c)||_0x23044a===_0x449268(0xca)?_0x5dc8d7:_0x449268(0x1bc)+_0x2ceb63,_0x220b96=_0x23044a===_0x449268(0x1b1)?'Net\x20effect':_0x23044a==='net-fiat'?_0x449268(0xb1):_0x19fe9e+_0x449268(0x1c3),_0x5c098=_0x23044a===_0x449268(0x1b1)||_0x23044a===_0x449268(0xca)?_0x449268(0xb1):_0x19fe9e+_0x449268(0xec);let _0x4a44c5=0x0;_0x2da95b[_0x449268(0x129)](_0xcc8085=>{const _0x49bd06=_0x449268;_0x4a44c5+=_0xcc8085[_0x49bd06(0x255)]*_0xcc8085['last'];});if(_0x23044a===_0x449268(0x21c)||_0x23044a==='net-fiat'){if(_0x2ceb63===_0x449268(0x216)||_0x2ceb63==='ETH'||_0x2ceb63===_0x449268(0x1a7))_0x4a44c5=_0x4a44c5*(_0x5dc8d7===_0x449268(0x150)?_0x5affb8[_0x449268(0x1c2)]:_0x5affb8['usd']);else{if(usdBasecoins[_0x449268(0xd6)](_0x2ceb63))_0x4a44c5=_0x4a44c5*(_0x5dc8d7===_0x449268(0x150)?_0x5affb8[_0x449268(0x1c2)]/_0x5affb8[_0x449268(0xb3)]:0x1);else _0x2ceb63===_0x449268(0x150)&&(_0x4a44c5=_0x4a44c5*(_0x5dc8d7==='EUR'?0x1:_0x5affb8[_0x449268(0xb3)]/_0x5affb8[_0x449268(0x1c2)]));}}let _0x48fb58;if(_0x4a44c5!==0x0){if(_0x23044a===_0x449268(0xf8))_0x48fb58=(_0x4a44c5/startingBalances[_0x449268(0xf8)]-0x1)*0x64;else{if(_0x5dc8d7===_0x449268(0x150))_0x48fb58=(_0x4a44c5/startingBalances[_0x449268(0x1c2)]-0x1)*0x64;else _0x48fb58=(_0x4a44c5/startingBalances[_0x449268(0xb3)]-0x1)*0x64;}let _0x1e7d73=0x0;if(startingBalances[_0x449268(0x1a0)])_0x2da95b[_0x449268(0x129)](_0x419b3f=>{const _0x46de00=_0x449268;let _0x35ec77=startingBalances[_0x46de00(0x1a0)][_0x46de00(0x237)](_0x16ae05=>_0x16ae05['coin']===_0x419b3f['coin']);if(_0x35ec77&&_0x35ec77[_0x46de00(0x1dd)]&&_0x419b3f['number']!==0x0)_0x1e7d73+=_0x35ec77['number']*_0x419b3f[_0x46de00(0x1b2)];});let _0x1728cc=0x0;if(_0x151b6b[_0x449268(0x1ab)]!==0x0){let _0x1d4d12=_0x151b6b[_0x151b6b['length']-0x1];_0x1728cc=_0x1d4d12[_0x449268(0x1be)];}_0x1e7d73-=_0x1728cc;_0x23044a===_0x449268(0x1b1)&&(_0x48fb58=(_0x4a44c5-_0x1e7d73)/startingBalances[_0x449268(0xf8)]*0x64,_0x4a44c5=_0x4a44c5-_0x1e7d73);if(_0x23044a===_0x449268(0xca)){let _0x20ad7e=_0x5dc8d7===_0x449268(0x150)?startingBalances['eur']:startingBalances[_0x449268(0xb3)];if(_0x2ceb63===_0x449268(0x216)||_0x2ceb63===_0x449268(0x209)||_0x2ceb63===_0x449268(0x1a7))_0x1e7d73=_0x5dc8d7===_0x449268(0x150)?_0x1e7d73*_0x5affb8[_0x449268(0x1c2)]:_0x1e7d73*_0x5affb8['usd'];else{if(usdBasecoins['includes'](_0x2ceb63))_0x1e7d73=_0x5dc8d7===_0x449268(0x150)?_0x1e7d73*_0x5affb8[_0x449268(0x1c2)]/_0x5affb8['usd']:_0x1e7d73;else _0x2ceb63===_0x449268(0x150)&&(_0x1e7d73=_0x5dc8d7===_0x449268(0x150)?_0x1e7d73:_0x1e7d73*_0x5affb8[_0x449268(0xb3)]/_0x5affb8[_0x449268(0x1c2)]);}_0x48fb58=(_0x4a44c5-_0x1e7d73)/_0x20ad7e*0x64,_0x4a44c5=_0x4a44c5-_0x1e7d73;}if(_0x48fb58){if(_0x48fb58<0x64)_0x48fb58=_0x48fb58[_0x449268(0x107)](0x2);else{if(_0x48fb58<0x3e8)_0x48fb58=_0x48fb58['toFixed'](0x1);else _0x48fb58=_0x48fb58['toFixed'](0x0);}}else _0x48fb58=Number('0')[_0x449268(0x107)](0x2);if(_0x4a44c5){if(Math['abs'](_0x4a44c5)<0.000001)_0x4a44c5=_0x4a44c5[_0x449268(0x107)](0x2);else{if(Math[_0x449268(0xea)](_0x4a44c5)<0.1)_0x4a44c5=_0x4a44c5['toFixed'](0x6);else{if(Math[_0x449268(0xea)](_0x4a44c5)<0x1)_0x4a44c5=_0x4a44c5[_0x449268(0x107)](0x5);else{if(Math[_0x449268(0xea)](_0x4a44c5)<0xa)_0x4a44c5=_0x4a44c5[_0x449268(0x107)](0x4);else{if(Math[_0x449268(0xea)](_0x4a44c5)<0x64)_0x4a44c5=_0x4a44c5['toFixed'](0x3);else{if(Math[_0x449268(0xea)](_0x4a44c5)<0x3e8)_0x4a44c5=_0x4a44c5[_0x449268(0x107)](0x2);else _0x4a44c5=_0x4a44c5[_0x449268(0x107)](0x2);}}}}}}else _0x4a44c5=Number('0')['toFixed'](0x2);}else _0x48fb58=Number('0')[_0x449268(0x107)](0x2);return{'value':_0x4a44c5,'change':_0x48fb58,'leftTxt':_0x220b96,'rightTxt':_0x5c098};}async function getStartingBalances(_0x42c32f,_0x3f9786=!![]){const _0x786cd1=_0x2cbca9;if(_0x42c32f[_0x786cd1(0x1ab)]!==0x0){const [_0x5a4350,_0x240804,_0x4ea3a7]=getPerf(_0x42c32f[0x0],!![]);let _0x130969=[];config[_0x786cd1(0x10f)][_0x786cd1(0x129)](_0x49db87=>{const _0x1b2c18=_0x786cd1;let _0x337135=0x0,_0x3dc796;config[_0x1b2c18(0xdb)][_0x1b2c18(0x129)](_0x41b654=>{const _0x527f9c=_0x1b2c18;let _0x57f891=_0x41b654[_0x527f9c(0x12d)][_0x527f9c(0x237)](_0x3f356a=>_0x3f356a[_0x527f9c(0x1dd)]==_0x49db87[_0x527f9c(0x1dd)]);if(_0x57f891){_0x337135+=_0x57f891[_0x527f9c(0x255)];if(!_0x3dc796)_0x3dc796=_0x57f891[_0x527f9c(0x1e9)];}}),_0x130969[_0x1b2c18(0x16e)]({'coin':_0x49db87[_0x1b2c18(0x1dd)],'number':_0x337135,'initialprice':_0x3dc796});});const _0x12a6d9={'basecoin':_0x5a4350,'eur':_0x240804,'usd':_0x4ea3a7,'coins':_0x130969};if(_0x3f9786)proxyEmit(_0x786cd1(0x198),_0x12a6d9);startingBalances=_0x12a6d9;}}function headlessMode(_0x1d541e){const _0x52b68e=_0x2cbca9;let _0x51d7ab=_0x1d541e['portfolio'],_0x1e5c8f=_0x1d541e['threshold'],_0xafaf46=[];for(let _0x2463aa of _0x51d7ab){if(_0x2463aa['coin']!=config['basecoin']){if(_0x2463aa[_0x52b68e(0x127)]>=_0x1e5c8f/0x64){if(_0x2463aa[_0x52b68e(0x14b)])_0xafaf46[_0x52b68e(0x16e)](_0x2463aa);}else{if(_0x2463aa[_0x52b68e(0x127)]<=-_0x1e5c8f/0x64){if(_0x2463aa[_0x52b68e(0x14b)])_0xafaf46[_0x52b68e(0x16e)](_0x2463aa);}}}}_0xafaf46[_0x52b68e(0x1ab)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0xafaf46[_0x52b68e(0x129)](_0x184e4a=>{const _0x20cd64=_0x52b68e;logger[_0x20cd64(0x22d)](_0x20cd64(0x23c)+_0x184e4a[_0x20cd64(0x1dd)]+'\x20'+_0x184e4a[_0x20cd64(0x255)]+'\x20'+_0x184e4a[_0x20cd64(0x1b2)]+'\x20'+_0x184e4a[_0x20cd64(0x238)]+'%\x20'+_0x184e4a[_0x20cd64(0x161)]+'%\x20'+(0x64*_0x184e4a[_0x20cd64(0x127)])[_0x20cd64(0x107)](0x2)+'%\x20('+_0x1e5c8f[_0x20cd64(0x107)](0x2)+'%)');}),placeOrder(_0xafaf46));}function notifyBalance(_0x2aa1ab){const _0x19f5e8=_0x2cbca9;let _0x41ed84=_0x2aa1ab[_0x19f5e8(0x10f)],_0xefe245=_0x2aa1ab['threshold'],_0x52ac73=[];for(let _0x31a531 of _0x41ed84){if(_0x31a531[_0x19f5e8(0x1dd)]!=config['basecoin']){if(_0x31a531['delta']>=_0xefe245/0x64){if(_0x31a531[_0x19f5e8(0x14b)])_0x52ac73['push'](_0x31a531);}else{if(_0x31a531['delta']<=-_0xefe245/0x64){if(_0x31a531[_0x19f5e8(0x14b)])_0x52ac73[_0x19f5e8(0x16e)](_0x31a531);}}}}if(_0x52ac73['length']>0x0){let _0x310896=_0x52ac73[_0x19f5e8(0x19a)](_0x96b73e=>_0x96b73e[_0x19f5e8(0x1dd)]);_0x310896['sort']();let _0x16f439=_0x310896[_0x19f5e8(0x144)](',\x20');if(!lastCoinsToBalance)logHistory(_0x19f5e8(0x25b),_0x19f5e8(0x247));lastCoinsToBalance=_0x16f439;}}function symbolToCoin(_0x311cd1){const _0x2be0af=_0x2cbca9;let _0x32c241;if(_0x311cd1[_0x2be0af(0xd6)]('/'+config[_0x2be0af(0xf8)]))_0x32c241=_0x311cd1[_0x2be0af(0x170)]('/'+config[_0x2be0af(0xf8)],'');if(_0x311cd1['includes'](config[_0x2be0af(0xf8)]+'/'))_0x32c241=_0x311cd1['replace'](config[_0x2be0af(0xf8)]+'/','');return _0x32c241;}async function unlockOrders(){const _0x1d7a3f=_0x2cbca9;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1d7a3f(0x13f)]){logger[_0x1d7a3f(0x22d)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x1d7a3f(0x17a)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x157cca=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x157cca,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x1d7a3f(0xcc)],logger[_0x1d7a3f(0x22d)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x147427){const _0x5ae78d=_0x2cbca9;if(_0x147427)validateOrdersState=_0x147427;logger[_0x5ae78d(0x22d)](_0x5ae78d(0x1e4)+validateOrdersState+_0x5ae78d(0x174)+(lockOrders==0x1?_0x5ae78d(0x114):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x3b61d8=[],_0x1b2f03=config[_0x5ae78d(0xfb)]==_0x5ae78d(0x10b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5ae78d(0xde)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x5ae78d(0x22d)](_0x5ae78d(0x179)+validateOrdersState),lastOrders[_0x5ae78d(0x129)](_0x5c0863=>{const _0x5ed832=_0x5ae78d;let _0x351f75=![];_0x5c0863['filled']>0x0&&(_0x351f75=!![]),_0x3b61d8[_0x5ed832(0x16e)](_0x351f75),_0x351f75&&config[_0x5ed832(0xfb)]!=_0x5ed832(0x10b)&&logHistory(_0x5ed832(0x253),_0x5ed832(0x1f8)+_0x5c0863[_0x5ed832(0x1fb)]+'\x20'+_0x5c0863['side']+'\x20#'+formatResult(_0x5c0863[_0x5ed832(0x241)],0x8)+'\x20@'+formatResult(_0x5c0863[_0x5ed832(0x1e9)],0x8));}),_0x3b61d8[_0x5ae78d(0x129)]((_0x30ab8e,_0x116415)=>{const _0x597f17=_0x5ae78d;if(_0x30ab8e)lastOrders[_0x597f17(0x221)](_0x116415,0x1);}),persistOpenOrders(lastOrders);const _0x5804f7=coolingDown?_0x5ae78d(0x222):_0x5ae78d(0x1da);if(validateOrdersState==_0x5ae78d(0xba)){validateOrdersState=_0x5ae78d(0x1a4);if(_0x3b61d8[_0x5ae78d(0xd6)](![])){if(config[_0x5ae78d(0xfb)]==_0x5ae78d(0x10b)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3b61d8['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x5ae78d(0xfb)]==_0x5ae78d(0x10b)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5ae78d(0x18b))_0x3b61d8[_0x5ae78d(0xd6)](![])&&(config[_0x5ae78d(0xfb)]=='market'?logHistory(_0x5ae78d(0xe1),_0x5ae78d(0x189)+Math[_0x5ae78d(0x1df)](_0x1b2f03*validateOrderInterval/0xea60)+_0x5ae78d(0x1c8)+_0x5804f7):(await cancelOrders(),logHistory(_0x5ae78d(0xe1),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5ae78d(0x1df)](_0x1b2f03*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5804f7))),await unlockOrders();else{if(validateOrdersState==_0x5ae78d(0xb8)){if(config[_0x5ae78d(0xfb)]!=_0x5ae78d(0x10b))logHistory(_0x5ae78d(0xe1),'No\x20more\x20open\x20orders\x20-\x20'+_0x5804f7);await unlockOrders();}}}}}async function cancelOrders(){const _0x7a9746=_0x2cbca9;lastOrders[_0x7a9746(0x129)](async _0x5a6a92=>{const _0x1a8884=_0x7a9746;try{const _0x366118=await exchange[_0x1a8884(0x258)](_0x5a6a92[_0x1a8884(0x1b8)],_0x5a6a92['symbol']);}catch(_0x82c523){if(_0x82c523[_0x1a8884(0x1b4)]()[_0x1a8884(0xd6)](_0x1a8884(0x203))){}else await handleError(_0x82c523,_0x1a8884(0x1bf));}});}async function initCoinResults(_0x1caca6){const _0x4b4b4a=_0x2cbca9;_0x1caca6?logger[_0x4b4b4a(0x22d)]('Resetting\x20coin\x20results:\x20'+_0x1caca6):logger['debug'](_0x4b4b4a(0x256)),config[_0x4b4b4a(0x10f)][_0x4b4b4a(0x129)](_0x198726=>{const _0x46b49c=_0x4b4b4a;if(!_0x198726[_0x46b49c(0x112)]&&_0x198726[_0x46b49c(0x1dd)]!=config[_0x46b49c(0xf8)]){const _0x5ca8f6=currentCoins[_0x46b49c(0x237)](_0x5997ef=>_0x5997ef[_0x46b49c(0x1dd)]==_0x198726[_0x46b49c(0x1dd)]),_0x46da02=global[_0x46b49c(0x149)][noslash(_0x198726[_0x46b49c(0x1fb)])];let _0x358544=_0x5ca8f6?_0x5ca8f6[_0x46b49c(0x255)]:null,_0x203f70=_0x198726[_0x46b49c(0x13b)]?0x1/_0x46da02:_0x46da02,_0x578bd0;config[_0x46b49c(0xdb)][_0x46b49c(0x129)](_0x110339=>{const _0xb2e814=_0x46b49c;!_0x578bd0&&(_0x578bd0=_0x110339[_0xb2e814(0x12d)][_0xb2e814(0x237)](_0x2f7af4=>_0x2f7af4['coin']==_0x198726['coin']),_0x578bd0&&(_0x358544=_0x578bd0[_0xb2e814(0x255)],_0x203f70=_0x578bd0['price']));});let _0x4c5321=dbCoinResults[_0x46b49c(0x24e)](_0x46b49c(0x1a0))[_0x46b49c(0x237)]({'coin':_0x198726['coin']})[_0x46b49c(0x196)]();if(!_0x4c5321){const _0x5c1311={'coin':_0x198726[_0x46b49c(0x1dd)],'number':_0x358544,'breakeven':_0x203f70,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x46b49c(0x24e)](_0x46b49c(0x1a0))[_0x46b49c(0x16e)](_0x5c1311)[_0x46b49c(0x1dc)]();}else{if(_0x1caca6&&_0x198726[_0x46b49c(0x1dd)]==_0x1caca6){const _0x120369={'coin':_0x198726[_0x46b49c(0x1dd)],'number':_0x358544,'breakeven':_0x203f70,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x46b49c(0x24e)](_0x46b49c(0x1a0))[_0x46b49c(0x237)]({'coin':_0x198726[_0x46b49c(0x1dd)]})[_0x46b49c(0x102)](_0x120369)[_0x46b49c(0x1dc)]();}}}});}async function updateCoinResults(_0x10d726,_0x5615df=![]){const _0x31d4dd=_0x2cbca9;let _0x247d40,_0x368f0c,_0x43f578,_0x2a1d0a,_0x427e93,_0x175547,_0x2a1c8a=dbCoinResults['get'](_0x31d4dd(0x1a0))[_0x31d4dd(0x237)]({'coin':_0x10d726[_0x31d4dd(0x1dd)]})[_0x31d4dd(0x196)](),_0x1987c3=![];_0x2a1c8a&&Object['entries'](_0x2a1c8a)[_0x31d4dd(0x129)](([_0x3b56fa,_0x33b375])=>{if(_0x33b375==null)_0x1987c3=!![];});(!_0x2a1c8a||_0x1987c3)&&(await initCoinResults(_0x10d726[_0x31d4dd(0x1dd)]),_0x2a1c8a=dbCoinResults[_0x31d4dd(0x24e)](_0x31d4dd(0x1a0))[_0x31d4dd(0x237)]({'coin':_0x10d726['coin']})['value']());_0x10d726['reverse']&&(_0x175547={'filled':_0x10d726[_0x31d4dd(0x241)]*_0x10d726[_0x31d4dd(0x1e9)],'amount':_0x10d726['filled']*_0x10d726[_0x31d4dd(0x1e9)],'side':_0x10d726['side']=='sell'?_0x31d4dd(0xed):_0x31d4dd(0xce),'price':0x1/_0x10d726[_0x31d4dd(0x1e9)]},_0x10d726={..._0x10d726,..._0x175547});_0x5615df?_0x368f0c=_0x10d726['side']==_0x31d4dd(0xed)?_0x2a1c8a[_0x31d4dd(0x255)]+_0x10d726[_0x31d4dd(0x241)]:_0x2a1c8a[_0x31d4dd(0x255)]-_0x10d726[_0x31d4dd(0x241)]:_0x368f0c=await getCoinNumber(_0x10d726[_0x31d4dd(0x1dd)]);if(_0x10d726[_0x31d4dd(0x249)]&&_0x10d726[_0x31d4dd(0x249)]['currency']==config[_0x31d4dd(0xf8)])_0x247d40=Number(_0x10d726[_0x31d4dd(0x249)][_0x31d4dd(0x154)]);else{if(_0x10d726[_0x31d4dd(0x249)]&&_0x10d726[_0x31d4dd(0x249)][_0x31d4dd(0x204)]==_0x31d4dd(0xef)&&!_0x5615df&&config[_0x31d4dd(0xf8)]!='PAXG')_0x247d40=Number(_0x10d726['fee']['cost'])*global[_0x31d4dd(0x149)]['BNB'+config['basecoin']];else _0x247d40=defaultFee*_0x10d726[_0x31d4dd(0x241)]*_0x10d726[_0x31d4dd(0x1e9)];}_0x10d726[_0x31d4dd(0x1c0)]==_0x31d4dd(0xed)?(_0x43f578=_0x368f0c!=0x0?(_0x2a1c8a[_0x31d4dd(0x1b5)]*_0x2a1c8a[_0x31d4dd(0x255)]+_0x10d726[_0x31d4dd(0x1e9)]*(_0x368f0c-_0x2a1c8a[_0x31d4dd(0x255)])+_0x247d40)/_0x368f0c:0x0,_0x2a1d0a=_0x2a1c8a[_0x31d4dd(0x1b3)]):(_0x43f578=_0x368f0c!=0x0?(_0x2a1c8a[_0x31d4dd(0x1b5)]*_0x2a1c8a[_0x31d4dd(0x255)]-_0x10d726[_0x31d4dd(0x1e9)]*(_0x2a1c8a[_0x31d4dd(0x255)]-_0x368f0c)+_0x247d40)/_0x368f0c:0x0,_0x2a1d0a=_0x2a1c8a[_0x31d4dd(0x1b3)]+(_0x10d726['price']-_0x2a1c8a[_0x31d4dd(0x1b5)])*_0x10d726[_0x31d4dd(0x241)]);_0x427e93=(_0x10d726[_0x31d4dd(0x1e9)]-_0x43f578-_0x247d40/_0x10d726[_0x31d4dd(0x241)])*_0x368f0c;let _0x3bf0e5={'coin':_0x10d726[_0x31d4dd(0x1dd)],'number':_0x368f0c,'breakeven':formatResult(_0x43f578,0x8),'realized':formatResult(_0x2a1d0a,0x8),'unrealized':formatResult(_0x427e93,0x8),'fees':formatResult(_0x2a1c8a[_0x31d4dd(0x15a)]+_0x247d40,0x8),'sells':_0x10d726['side']==_0x31d4dd(0xce)?_0x2a1c8a[_0x31d4dd(0x110)]+0x1:_0x2a1c8a[_0x31d4dd(0x110)],'buys':_0x10d726[_0x31d4dd(0x1c0)]=='buy'?_0x2a1c8a['buys']+0x1:_0x2a1c8a['buys']};dbCoinResults['get']('coins')['find']({'coin':_0x10d726['coin']})['assign'](_0x3bf0e5)[_0x31d4dd(0x1dc)]();if(!_0x5615df){if(_0x10d726['fee']&&_0x10d726[_0x31d4dd(0x249)][_0x31d4dd(0x204)]=='BNB'){const _0xe58384=currentCoins[_0x31d4dd(0x237)](_0x31b7a4=>_0x31b7a4[_0x31d4dd(0x1dd)]=='BNB');if(_0xe58384){let _0x8970e1=dbCoinResults['get'](_0x31d4dd(0x1a0))['find']({'coin':_0x31d4dd(0xef)})[_0x31d4dd(0x196)]();_0x3bf0e5={..._0x8970e1,'number':_0xe58384[_0x31d4dd(0x255)]},dbCoinResults['get'](_0x31d4dd(0x1a0))[_0x31d4dd(0x237)]({'coin':'BNB'})['assign'](_0x3bf0e5)[_0x31d4dd(0x1dc)]();}}}}async function placeOrder(_0x455723){const _0x28d88f=_0x2cbca9,_0x1f2f7f=config[_0x28d88f(0xfb)]==_0x28d88f(0x10b)?'market':_0x28d88f(0x14d);if(lockOrders==ORDERS[_0x28d88f(0xcc)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x28d88f(0x13f)],allOrdersPlaced=![],validateOrdersState=_0x28d88f(0xba);let _0x43b20a=![];lastOrders=[];for(const _0x1414fc of _0x455723){let _0x21b2bd,_0x50bcb3,_0x12487e,_0x25676e,_0x453694,_0x2b67be=_0x1414fc[_0x28d88f(0x1fb)];try{const _0x53e0b0=await exchange[_0x28d88f(0xc2)](_0x2b67be);_0x21b2bd=_0x1414fc[_0x28d88f(0x13b)]?0x1/_0x1414fc[_0x28d88f(0x1b2)]:_0x1414fc[_0x28d88f(0x1b2)],_0x50bcb3=_0x53e0b0[_0x28d88f(0x20e)],_0x12487e=_0x53e0b0[_0x28d88f(0xf3)];_0x1414fc[_0x28d88f(0x13b)]?(_0x25676e=_0x1414fc[_0x28d88f(0x1c0)]==_0x28d88f(0xed)?_0x28d88f(0xce):_0x28d88f(0xed),_0x453694=Math[_0x28d88f(0xea)](_0x1414fc[_0x28d88f(0x218)])/_0x21b2bd):(_0x25676e=_0x1414fc[_0x28d88f(0x1c0)],_0x453694=Math[_0x28d88f(0xea)](_0x1414fc[_0x28d88f(0x218)]));_0x1f2f7f==_0x28d88f(0x14d)&&(config[_0x28d88f(0xfb)]=='limit-high'&&(_0x21b2bd=_0x25676e==_0x28d88f(0xed)?_0x50bcb3:_0x12487e),config[_0x28d88f(0xfb)]==_0x28d88f(0x195)&&(_0x21b2bd=_0x25676e==_0x28d88f(0xed)?_0x12487e:_0x50bcb3));_0x453694=formatResult(_0x453694,0x8),_0x21b2bd=formatResult(_0x21b2bd,0x8);const _0x34db4d=_0x25676e==_0x28d88f(0xce)?config['emojisell']?String['fromCodePoint']('0x'+config[_0x28d88f(0x24c)])+'\x20':'':config[_0x28d88f(0x1ae)]?String[_0x28d88f(0x1a6)]('0x'+config['emojibuy'])+'\x20':'',_0x33ab8c=_0x1f2f7f==_0x28d88f(0x10b)?_0x28d88f(0x24a):config[_0x28d88f(0xfb)]=='limit-high'?_0x28d88f(0x15d):_0x28d88f(0x1ce),_0x50c506=(Math[_0x28d88f(0x168)](Math[_0x28d88f(0x103)]()*0x35a4e900)+0x5f5e100)[_0x28d88f(0x1b4)]();lastOrders[_0x28d88f(0x16e)]({'customId':_0x50c506,'symbol':_0x2b67be,'coin':_0x1414fc[_0x28d88f(0x1dd)],'amount':_0x453694,'price':_0x21b2bd,'side':_0x25676e,'reverse':_0x1414fc[_0x28d88f(0x13b)],'filled':0x0});if(_0x1f2f7f==_0x28d88f(0x10b))logHistory(_0x28d88f(0x253),''+_0x34db4d+_0x33ab8c+'\x20order:\x20'+_0x2b67be+'\x20'+_0x25676e+'\x20#'+formatResult(_0x453694,0x8)+'\x20@'+formatResult(_0x21b2bd,0x8));else logHistory('order',''+_0x34db4d+_0x33ab8c+'\x20order:\x20'+_0x2b67be+'\x20'+_0x25676e+'\x20#'+formatResult(_0x453694,0x8)+'\x20@'+formatResult(_0x21b2bd,0x8));let _0x58f8c1;_0x1f2f7f==_0x28d88f(0x10b)?_0x25676e==_0x28d88f(0xed)&&['Bybit',_0x28d88f(0x228),_0x28d88f(0xf5),_0x28d88f(0xd4),_0x28d88f(0x1e0)]['includes'](config['exchange'])?_0x58f8c1=await exchange[_0x28d88f(0x211)](_0x2b67be,_0x1f2f7f,_0x25676e,_0x453694,_0x21b2bd):_0x58f8c1=await exchange[_0x28d88f(0x211)](_0x2b67be,_0x1f2f7f,_0x25676e,_0x453694,undefined):_0x58f8c1=await exchange[_0x28d88f(0x211)](_0x2b67be,_0x1f2f7f,_0x25676e,_0x453694,_0x21b2bd);logger['debug'](_0x28d88f(0x24f)+_0x58f8c1['id']+_0x28d88f(0x201)+_0x50c506);const _0x16f740=lastOrders['length']-0x1;if(_0x16f740>=0x0&&lastOrders[_0x16f740][_0x28d88f(0x181)]==_0x50c506){lastOrders[_0x16f740][_0x28d88f(0x1b8)]=_0x58f8c1['id'];if(_0x58f8c1[_0x28d88f(0x21b)])lastOrders[_0x16f740][_0x28d88f(0x21b)]=_0x58f8c1[_0x28d88f(0x21b)];if(_0x58f8c1[_0x28d88f(0x1e9)])lastOrders[_0x16f740][_0x28d88f(0x1e9)]=_0x58f8c1[_0x28d88f(0x1e9)];lastOrders[_0x16f740][_0x28d88f(0x249)]=_0x58f8c1[_0x28d88f(0x249)];}if(config[_0x28d88f(0x225)]!=0x0){let _0xa54ad3=null;if(cooldownTracker['length']==config[_0x28d88f(0x225)]-0x1)_0xa54ad3=cooldownTracker[_0x28d88f(0xbb)]();const _0x178850=getTimeStamp();cooldownTracker[_0x28d88f(0x16e)](_0x178850);if(_0xa54ad3){const _0x4ae054=fns[_0x28d88f(0x128)](new Date(_0x178850),new Date(_0xa54ad3));if(_0x4ae054<cooldownInterval){logHistory(_0x28d88f(0x1d1),_0x28d88f(0x17d)+config[_0x28d88f(0x225)]+_0x28d88f(0x22f)+cooldownInterval/0x3c+_0x28d88f(0xe6)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x2609d0){if(_0x2609d0[_0x28d88f(0x1b4)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x28d88f(0x22e)](_0x108c06=>_0x108c06['symbol']!=_0x2b67be),logHistory('error',_0x28d88f(0x148)+_0x2b67be),_0x43b20a=!![];else{if(_0x2609d0[_0x28d88f(0x1b4)]()[_0x28d88f(0xd6)](_0x28d88f(0x193)))lastOrders=lastOrders[_0x28d88f(0x22e)](_0x203c8f=>_0x203c8f[_0x28d88f(0x1fb)]!=_0x2b67be),logHistory('error',_0x28d88f(0x133)+_0x2b67be),_0x43b20a=!![];else{if(_0x2609d0[_0x28d88f(0x1b4)]()['includes'](_0x28d88f(0x132)))lastOrders=lastOrders['filter'](_0x319fb7=>_0x319fb7[_0x28d88f(0x1fb)]!=_0x2b67be),logHistory(_0x28d88f(0x1d1),_0x28d88f(0x23f)+_0x2b67be),logger[_0x28d88f(0x22d)](_0x2609d0),_0x43b20a=!![];else _0x2609d0[_0x28d88f(0x1b4)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x28d88f(0x22e)](_0x86f179=>_0x86f179['symbol']!=_0x2b67be),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2b67be),_0x43b20a=!![]):(lastOrders=lastOrders[_0x28d88f(0x22e)](_0x12dbce=>_0x12dbce[_0x28d88f(0x1fb)]!=_0x2b67be),await handleError(_0x2609d0,_0x28d88f(0x252),_0x2b67be));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x28d88f(0x1ab)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x53f547=config[_0x28d88f(0xfb)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x28d88f(0xde)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b73d1=_0x28d88f;validateOrders(_0x2b73d1(0x18b));},_0x53f547);}else unlockOrders();_0x43b20a&&config[_0x28d88f(0x1ca)]&&(logHistory(_0x28d88f(0x1d1),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x28d88f(0xe1),_0x28d88f(0x23e)));}else{if(coolingDown)!config[_0x28d88f(0x1ca)]&&logHistory('error',_0x28d88f(0x147));else lockOrders!=ORDERS[_0x28d88f(0xcc)]&&(!config[_0x28d88f(0x1ca)]&&(config[_0x28d88f(0xfb)]=='market'?logHistory(_0x28d88f(0x1d1),_0x28d88f(0x215)):logHistory(_0x28d88f(0x1d1),_0x28d88f(0x213))));}}function persistOpenOrders(_0x166e23){const _0x396943=_0x2cbca9,_0x267077={...config,'openOrders':_0x166e23};let _0x25917a=dbConfig[_0x396943(0x24e)](_0x396943(0x1f0))['find']({'botID':botID})[_0x396943(0x196)]();_0x25917a&&dbConfig['get'](_0x396943(0x1f0))[_0x396943(0x237)]({'botID':botID})['assign'](_0x267077)[_0x396943(0x1dc)]();}function restoreOrders(){const _0x432844=_0x2cbca9;let _0x47eefc;config['openOrders']&&allOpenOrders[_0x432844(0x129)](_0x42371b=>{const _0x42c86e=_0x432844,_0x5c68e3=config['openOrders'][_0x42c86e(0x237)](_0x297f1b=>_0x297f1b[_0x42c86e(0x1b8)]==_0x42371b['id']);_0x5c68e3&&(lastOrders[_0x42c86e(0x16e)](_0x5c68e3),_0x47eefc=_0x42371b[_0x42c86e(0x23b)]);});if(lastOrders[_0x432844(0x1ab)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x432844(0x1a4),allOrdersPlaced=!![];const _0x2b38c6=new Date()[_0x432844(0xff)](),_0x2f6419=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x432844(0xde)]*0x3c*0x3e8;if(_0x47eefc+_0x2f6419>_0x2b38c6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x47eefc+_0x2f6419-_0x2b38c6);}else validateOrders(_0x432844(0x18b));}}async function sendMetricsTelegram(){const _0x3b9d5d=_0x2cbca9;if(!coinsLoaded){process[_0x3b9d5d(0x100)]({'telegrammsg':_0x3b9d5d(0x22c)},_0x10c279=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x392811='';if(config[_0x3b9d5d(0x12f)])_0x392811=_0x3b9d5d(0x143)+config[_0x3b9d5d(0x18e)]+_0x3b9d5d(0x11e);else _0x392811=_0x3b9d5d(0x12e)+botID+_0x3b9d5d(0x11e);const _0x8c4121=getKPIs(_0x3b9d5d(0xf8)),_0x51ed9f=getKPIs(_0x3b9d5d(0x21c),config['fiat']),_0x221ee5=getKPIs('net-basecoin'),_0x3a99de=getKPIs(_0x3b9d5d(0xca),config[_0x3b9d5d(0x21c)]);_0x392811+=_0x3b9d5d(0x1b7),_0x392811+=_0x8c4121['leftTxt']+'\x20:\x20'+_0x8c4121[_0x3b9d5d(0x196)]+'\x0a',_0x392811+=_0x8c4121[_0x3b9d5d(0x160)]+':\x20'+_0x8c4121['change']+'%\x0a',_0x392811+=_0x51ed9f[_0x3b9d5d(0x226)]+_0x3b9d5d(0x185)+_0x51ed9f[_0x3b9d5d(0x196)]+'\x0a',_0x392811+=_0x51ed9f['rightTxt']+':\x20'+_0x51ed9f[_0x3b9d5d(0xd2)]+'%\x0a',_0x392811+=_0x221ee5[_0x3b9d5d(0x226)]+':\x20'+_0x221ee5[_0x3b9d5d(0x196)]+'\x20('+config[_0x3b9d5d(0xf8)]+')\x0a',_0x392811+=_0x221ee5[_0x3b9d5d(0x160)]+':\x20'+_0x221ee5['change']+_0x3b9d5d(0x173)+config[_0x3b9d5d(0xf8)]+')\x0a',_0x392811+=_0x3a99de['leftTxt']+':\x20'+_0x3a99de[_0x3b9d5d(0x196)]+'\x20('+config[_0x3b9d5d(0x21c)]+')\x0a',_0x392811+=_0x3a99de['rightTxt']+':\x20'+_0x3a99de['change']+_0x3b9d5d(0x173)+config[_0x3b9d5d(0x21c)]+')\x0a',_0x392811+=_0x3b9d5d(0xf7),process[_0x3b9d5d(0x100)]({'telegrammsg':_0x392811},_0x29249d=>{});}async function sendPortfolioTelegram(){const _0x17f7f4=_0x2cbca9;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x604612=>{});return;}let _0x386904='';if(config['showname'])_0x386904='<b>'+config[_0x17f7f4(0x18e)]+_0x17f7f4(0x23d);else _0x386904=_0x17f7f4(0x12e)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x386904+='<pre>',_0x386904+='-------------------------------\x0a',_0x386904+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x386904+=_0x17f7f4(0x1de),currentCoins[_0x17f7f4(0x129)](_0x347aab=>{const _0x1ce5ed=_0x17f7f4;_0x386904+=_0x347aab[_0x1ce5ed(0x1dd)][_0x1ce5ed(0x1c1)](0x7)+'|\x20'+formatPad(_0x347aab[_0x1ce5ed(0x238)],0x2,0x6)+'|\x20'+formatPad(_0x347aab[_0x1ce5ed(0x161)],0x2,0x6)+'|\x20'+formatPad(_0x347aab[_0x1ce5ed(0x127)]*0x64,0x2,0x6)+'\x0a';}),_0x386904+=_0x17f7f4(0xf7),process['send']({'telegrammsg':_0x386904},_0x4c1270=>{});}function formatPad(_0x56e8fd,_0x21fc00,_0x1f4ae1){const _0xda7adf=_0x2cbca9,_0x21cf85=formatResultString(_0x56e8fd,_0x21fc00);return _0x21cf85?_0x21cf85['padStart'](_0x1f4ae1):''[_0xda7adf(0x1eb)](_0x1f4ae1);}function logHistory(_0x226f07,_0x4d7e2d,_0x1b7dba=''){const _0x323100=_0x2cbca9;logger['full'](''+_0x4d7e2d);let _0x1055b1={'time':getTimeStamp(),'type':_0x226f07,'event':_0x4d7e2d};dbLogs[_0x323100(0x24e)]('logs')['push'](_0x1055b1)[_0x323100(0x1dc)]();if(_0x1b7dba=='')_0x1b7dba=_0x4d7e2d;proxyEmit(_0x323100(0x166),{'log':_0x1055b1,'summary':_0x1b7dba}),process['send']({'telegram':{..._0x1055b1,'botname':config[_0x323100(0x18e)],'showname':config[_0x323100(0x12f)]}},_0x21b630=>{});}function emitHistory(_0x3926f5={}){const _0x45ba8b=_0x2cbca9;Object[_0x45ba8b(0x10a)](_0x3926f5)['length']==0x0&&(_0x3926f5={'type':[_0x45ba8b(0x253),'event'],'event':'','page':0x1});if(_0x3926f5[_0x45ba8b(0x14c)][_0x45ba8b(0xd6)](_0x45ba8b(0x166)))_0x3926f5[_0x45ba8b(0x14c)]['splice'](_0x3926f5[_0x45ba8b(0x14c)][_0x45ba8b(0xc3)](_0x45ba8b(0x166)),0x1,_0x45ba8b(0x1d1),_0x45ba8b(0x25b),_0x45ba8b(0xe1));if(dbLogs['has'](_0x45ba8b(0xbc))['value']()){let _0x2faafe=dbLogs[_0x45ba8b(0x24e)](_0x45ba8b(0xbc))[_0x45ba8b(0x22e)](_0x1320cb=>{const _0x2547d7=_0x45ba8b;if(_0x3926f5[_0x2547d7(0x14c)]['length']==0x0)return![];else return _0x3926f5[_0x2547d7(0x14c)][_0x2547d7(0xd6)](_0x1320cb[_0x2547d7(0x14c)]);})['filter'](_0x362d90=>{const _0x231c95=_0x45ba8b;if(_0x3926f5[_0x231c95(0x166)]=='')return!![];else return _0x362d90[_0x231c95(0x166)][_0x231c95(0x14e)]()[_0x231c95(0xd6)](_0x3926f5[_0x231c95(0x166)]['toLowerCase']());})['sortBy'](_0x45ba8b(0xfc)),_0x48ba53=_0x2faafe['value']()[_0x45ba8b(0x1ab)];_0x2faafe=_0x2faafe[_0x45ba8b(0x13b)]()[_0x45ba8b(0x21a)]((_0x3926f5['page']-0x1)*logPageSize,_0x3926f5[_0x45ba8b(0x19c)]*logPageSize-0x1)[_0x45ba8b(0x13b)]()[_0x45ba8b(0x196)](),proxyEmit(_0x45ba8b(0x1cd),{'logs':_0x2faafe,'total':_0x48ba53});}else proxyEmit(_0x45ba8b(0x1cd),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x32551f){const _0x1c48cb=_0x2cbca9;if(dbLogs[_0x1c48cb(0x108)](_0x1c48cb(0xbc))[_0x1c48cb(0x196)]()){const _0x59480e=dbLogs['get']('logs')['sortBy'](_0x1c48cb(0xfc))[_0x1c48cb(0x22e)](_0x14b1f0=>{const _0x2137cd=_0x1c48cb;return _0x14b1f0['type']==_0x2137cd(0x253);})[_0x1c48cb(0x196)]();dbLogs[_0x1c48cb(0x24e)](_0x1c48cb(0xbc))['remove']()[_0x1c48cb(0x1dc)](),dbLogs[_0x1c48cb(0x24e)](_0x1c48cb(0xbc))[_0x1c48cb(0x102)](_0x59480e)[_0x1c48cb(0x1dc)](),emitHistory(_0x32551f);}}async function pauseBot(_0x8c0f7f=pauseBotIntervalShort,_0x3c9779){const _0x979e22=_0x2cbca9,_0x435f62=new Date()[_0x979e22(0xff)]();if(!lastErrorShown||_0x435f62-lastErrorShown>=_0x8c0f7f){lastErrorShown=_0x435f62;!lastBotPause?(lastBotPause=_0x435f62,consecutivePauses=0x1):(_0x435f62-lastBotPause-_0x8c0f7f<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory('error',_0x3c9779+pauseBotMsg),_0x8c0f7f=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=new Date()[_0x979e22(0xff)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x8c0f7f),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1c3f1e=_0x2cbca9;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1c3f1e(0x239)},_0xea7ab9=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3cdd93,_0x39c93a){const _0x40b9f9=_0x2cbca9;if(botPaused)return;const _0x3bf05e=config[_0x40b9f9(0x16a)]||'Exchange';if(_0x39c93a)logger[_0x40b9f9(0x22d)](_0x40b9f9(0x11d)+_0x39c93a);const _0x1a61c7=()=>{const _0x2b48d8=_0x40b9f9;loading[_0x2b48d8(0x1d1)]=!![],emitLoadingProgress();};if(_0x3cdd93[_0x40b9f9(0x1b4)]()[_0x40b9f9(0xd6)](_0x40b9f9(0x13d)))logHistory(_0x40b9f9(0x1d1),_0x3bf05e+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1a61c7();else{if(_0x3cdd93['toString']()[_0x40b9f9(0xd6)](_0x40b9f9(0x146)))logHistory(_0x40b9f9(0x1d1),_0x3bf05e+_0x40b9f9(0x156)),_0x1a61c7();else _0x3cdd93[_0x40b9f9(0x1b4)]()[_0x40b9f9(0xd6)](_0x40b9f9(0x214))?(logHistory('error',_0x3bf05e+_0x40b9f9(0x210)),logHistory(_0x40b9f9(0x1d1),_0x40b9f9(0xb5)),_0x1a61c7()):await handleError(_0x3cdd93,null);}}async function handleError(_0x4619f5,_0x2aa4c3,_0x4f0689=''){const _0x55a9fa=_0x2cbca9;if(botPaused)return;let _0xa0ad6c;const _0x46fbd9=config[_0x55a9fa(0x16a)]||'Exchange';if(_0x2aa4c3)logger[_0x55a9fa(0x22d)]('Exception\x20thrown\x20in\x20'+_0x2aa4c3);if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0xd3)))_0xa0ad6c=_0x46fbd9+_0x55a9fa(0x1b9),logger[_0x55a9fa(0x22d)](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5['toString']()[_0x55a9fa(0xd6)](_0x55a9fa(0xe5)))_0xa0ad6c=_0x46fbd9+_0x55a9fa(0x162),logger[_0x55a9fa(0x22d)](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5['toString']()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5['toString']()['includes'](_0x55a9fa(0x235))||_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0xdf)))_0xa0ad6c=_0x46fbd9+_0x55a9fa(0x22a),logger[_0x55a9fa(0x22d)](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5['toString']()[_0x55a9fa(0xd6)](_0x55a9fa(0x19d)))_0xa0ad6c=_0x46fbd9+_0x55a9fa(0x16f),logger[_0x55a9fa(0x22d)](_0xa0ad6c+'\x20>\x20details:',_0x4619f5['toString']()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5[_0x55a9fa(0x1b4)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0xa0ad6c=_0x46fbd9+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',logger['debug'](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0x14e)]()[_0x55a9fa(0xd6)](_0x55a9fa(0x23b))||_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0x14e)]()['includes']('request-time'))_0xa0ad6c='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',logger[_0x55a9fa(0x22d)](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5['toString']()['includes'](_0x55a9fa(0x152)))_0xa0ad6c=_0x46fbd9+_0x55a9fa(0xc7),logger[_0x55a9fa(0x22d)](_0xa0ad6c+'\x20>\x20details:',_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5 instanceof ccxt[_0x55a9fa(0x254)])_0xa0ad6c=_0x46fbd9+_0x55a9fa(0x15f),logger['debug'](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5[_0x55a9fa(0x1b4)]()),await pauseBot(undefined,_0xa0ad6c);else{if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0x13d)))logHistory(_0x55a9fa(0x1d1),_0x46fbd9+_0x55a9fa(0x18a)),logHistory(_0x55a9fa(0x1d1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0x146)))logHistory('error',_0x46fbd9+_0x55a9fa(0x1bb)),logHistory('error',_0x55a9fa(0x14a)),await killBot();else{if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0x214)))logHistory(_0x55a9fa(0x1d1),_0x46fbd9+_0x55a9fa(0x115)),logHistory('error',_0x55a9fa(0x14a)),await killBot();else{if(_0x4619f5[_0x55a9fa(0x1b4)]()['includes'](_0x55a9fa(0xd0)))logHistory('error',_0x46fbd9+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x55a9fa(0x1d1),_0x55a9fa(0x14a)),await killBot();else{if(_0x4619f5[_0x55a9fa(0x1b4)]()[_0x55a9fa(0xd6)](_0x55a9fa(0x135)))logHistory(_0x55a9fa(0x1d1),_0x55a9fa(0xcd)+_0x4f0689);else{if(_0x4619f5 instanceof ccxt[_0x55a9fa(0x134)]){logHistory(_0x55a9fa(0x1d1),_0x46fbd9+_0x55a9fa(0x240)),logger['debug'](_0x55a9fa(0x101),_0x4619f5);if(_0x4f0689)logger['debug']('Symbol(s):\x20'+_0x4f0689);}else{_0xa0ad6c=_0x55a9fa(0x17b),logger['debug'](_0xa0ad6c+_0x55a9fa(0x126),_0x4619f5);if(_0x4f0689)logger[_0x55a9fa(0x22d)](_0x55a9fa(0x199)+_0x4f0689);await pauseBot(undefined,_0xa0ad6c);}}}}}}}}}}}}}}}async function withRetry(_0x40a123,_0x312f43){const _0x4598cc=_0x2cbca9;let _0x18beb2=![],_0x245abe=0x0,_0x53bfbb,_0xa4c22a;while(_0x245abe<maxRetries){try{_0x53bfbb=await _0x312f43();break;}catch(_0x3029f2){_0xa4c22a=_0x3029f2,!_0x18beb2?(_0x18beb2=!![],logger['debug'](_0x4598cc(0x1e6)+_0x40a123+':',_0x3029f2['toString']())):await sleep(retryInterval);}_0x245abe++;}if(_0x245abe==0x0)return _0x53bfbb;if(_0x245abe>=maxRetries)throw _0xa4c22a;else return logger['debug'](_0x4598cc(0x1a2)+_0x245abe+_0x4598cc(0xfe)),_0x53bfbb;}function formatResult(_0x2bbc8f,_0x18822c){return parseFloat(_0x2bbc8f['toFixed'](_0x18822c));}function formatResultTruncate(_0x4d4104,_0xf7e8c1){const _0x1be146=_0x2cbca9;let _0x18bce9=formatResultString(_0x4d4104,0xa),_0x4c61ac=_0x18bce9['indexOf']('.');return _0x4c61ac!=-0x1&&(_0x18bce9=_0x18bce9[_0x1be146(0x21a)](0x0,_0x4c61ac+_0xf7e8c1+0x1)),Number(_0x18bce9);}function formatResultString(_0x2d710f,_0x132cf4){const _0x70b402=_0x2cbca9;let _0x56db47;if(!(''+_0x2d710f)[_0x70b402(0xd6)]('e'))_0x56db47=+(Math[_0x70b402(0x1df)](_0x2d710f+'e+'+_0x132cf4)+'e-'+_0x132cf4);else{let _0x6f365d=(''+_0x2d710f)[_0x70b402(0x1e8)]('e'),_0x3a94c7='';+_0x6f365d[0x1]+_0x132cf4>0x0&&(_0x3a94c7='+'),_0x56db47=+(Math['round'](+_0x6f365d[0x0]+'e'+_0x3a94c7+(+_0x6f365d[0x1]+_0x132cf4))+'e-'+_0x132cf4);}return Number(_0x56db47)['toFixed'](_0x132cf4);}function getServerTime(){const _0x2e0700=_0x2cbca9,_0x11409c=new Date();return _0x11409c[_0x2e0700(0x1f3)]()+'/'+(_0x11409c[_0x2e0700(0xd9)]()+0x1)['toString']()[_0x2e0700(0x1eb)](0x2,'0')+'/'+_0x11409c[_0x2e0700(0xf6)]()[_0x2e0700(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0x11409c['getHours']()[_0x2e0700(0x1b4)]()[_0x2e0700(0x1eb)](0x2,'0')+':'+_0x11409c['getMinutes']()[_0x2e0700(0x1b4)]()['padStart'](0x2,'0')+':'+_0x11409c[_0x2e0700(0x205)]()[_0x2e0700(0x1b4)]()[_0x2e0700(0x1eb)](0x2,'0');}function getTimeStamp(){const _0x5bea01=_0x2cbca9,_0x47798e=shiftedTime();return _0x47798e[_0x5bea01(0x1f3)]()+'/'+(_0x47798e['getMonth']()+0x1)['toString']()[_0x5bea01(0x1eb)](0x2,'0')+'/'+_0x47798e[_0x5bea01(0xf6)]()['toString']()[_0x5bea01(0x1eb)](0x2,'0')+'\x20'+_0x47798e['getHours']()[_0x5bea01(0x1b4)]()['padStart'](0x2,'0')+':'+_0x47798e[_0x5bea01(0x137)]()[_0x5bea01(0x1b4)]()[_0x5bea01(0x1eb)](0x2,'0')+':'+_0x47798e[_0x5bea01(0x205)]()[_0x5bea01(0x1b4)]()['padStart'](0x2,'0');}function getDate(){const _0x179836=_0x2cbca9,_0x304cf3=shiftedTime();return _0x304cf3[_0x179836(0x1f3)]()+'/'+(_0x304cf3['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x304cf3[_0x179836(0xf6)]()[_0x179836(0x1b4)]()['padStart'](0x2,'0');}function getHour(){const _0x1a5b88=_0x2cbca9,_0x59c8b9=shiftedTime();return _0x59c8b9[_0x1a5b88(0x20f)]()['toString']()[_0x1a5b88(0x1eb)](0x2,'0');}function sleep(_0x227634){return new Promise(_0x2537f1=>setTimeout(_0x2537f1,_0x227634));}function shiftedTime(){const _0x340177=_0x2cbca9,_0x239bae=new Date();let _0x57532b=_0x239bae;if(config&&config[_0x340177(0x187)]!==0x0)_0x57532b=fns[_0x340177(0x12b)](_0x239bae,{'hours':config[_0x340177(0x187)]});return _0x57532b;}function timer(_0x51a1d7){const _0x5b94e9=_0x2cbca9,_0x791204=new Date();!lasttime?console[_0x5b94e9(0x11b)](getTimeStamp()+_0x5b94e9(0x1c9),_0x51a1d7,_0x791204):console[_0x5b94e9(0x11b)](getTimeStamp()+_0x5b94e9(0x1c9),_0x51a1d7,(_0x791204-lasttime)/0x3e8),lasttime=_0x791204;}