const _0x464585=_0x3972;(function(_0x1dec48,_0x4785b3){const _0x4a1a54=_0x3972,_0x487055=_0x1dec48();while(!![]){try{const _0x5bb6e2=-parseInt(_0x4a1a54(0x264))/0x1*(parseInt(_0x4a1a54(0x27d))/0x2)+parseInt(_0x4a1a54(0x1ae))/0x3*(-parseInt(_0x4a1a54(0x258))/0x4)+-parseInt(_0x4a1a54(0x187))/0x5+-parseInt(_0x4a1a54(0x200))/0x6*(-parseInt(_0x4a1a54(0x222))/0x7)+parseInt(_0x4a1a54(0x23c))/0x8*(parseInt(_0x4a1a54(0x1b7))/0x9)+parseInt(_0x4a1a54(0x173))/0xa*(-parseInt(_0x4a1a54(0x228))/0xb)+parseInt(_0x4a1a54(0x183))/0xc;if(_0x5bb6e2===_0x4785b3)break;else _0x487055['push'](_0x487055['shift']());}catch(_0x10b813){_0x487055['push'](_0x487055['shift']());}}}(_0x4c43,0xb1c22));const _0x4d30cd=function(){let _0x3f1782=!![];return function(_0x37082d,_0x438523){const _0xcc7420=_0x3f1782?function(){const _0x1edf9a=_0x3972;if(_0x438523){const _0x5cb938=_0x438523[_0x1edf9a(0x185)](_0x37082d,arguments);return _0x438523=null,_0x5cb938;}}:function(){};return _0x3f1782=![],_0xcc7420;};}(),_0x496627=_0x4d30cd(this,function(){const _0x266875=_0x3972;return _0x496627[_0x266875(0x24a)]()[_0x266875(0x192)](_0x266875(0x221))['toString']()['constructor'](_0x496627)[_0x266875(0x192)](_0x266875(0x221));});_0x496627();'use strict';const ccxt=require(_0x464585(0x242)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x464585(0x282)),Crypt=require(_0x464585(0x169))['Crypt'];let exchange,wsClient;global[_0x464585(0x26b)]={},global[_0x464585(0x255)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x464585(0x23f),'HOT/BTC',_0x464585(0x18b),_0x464585(0x161),_0x464585(0x256),_0x464585(0x1bb)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x464585(0x1de))[_0x464585(0x1e6)],botID=process[_0x464585(0x1da)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x464585(0x18e)](botID)&&(console[_0x464585(0x277)](_0x464585(0x204)+botID+_0x464585(0x1c8)),process[_0x464585(0x1fe)](0x1));const userID=process[_0x464585(0x1da)][0x3]||'',configpath=userID?_0x464585(0x1d4)+userID+'/':_0x464585(0x1d4);!fs['existsSync'](configpath)&&fs[_0x464585(0x23e)](configpath);const configfile=configpath+_0x464585(0x26e)+botID+_0x464585(0x279),logfile=configpath+_0x464585(0x26e)+botID+_0x464585(0x1bc),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x464585(0x26e)+botID+_0x464585(0x1f6),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x464585(0x225),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x464585(0x238)]({'logs':[]})[_0x464585(0x249)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x464585(0x238)]({'data':[]})[_0x464585(0x249)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x464585(0x238)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3af05b)=>{},'debug':(..._0x5a0cca)=>{},'notice':(..._0x466988)=>{},'info':(..._0x459c5d)=>{},'warning':(..._0x1e75d6)=>{},'error':async function(..._0x4ddf8e){const _0x308c93=_0x464585,_0x5f1fca=new Date()[_0x308c93(0x1dc)]();if(!lastErrorShown||_0x5f1fca-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x308c93(0x1dc)]();let _0x4254ae='';if(_0x4ddf8e[0x0])_0x4254ae+=_0x4ddf8e[0x0];if(_0x4ddf8e[0x1]&&_0x4ddf8e[0x1][_0x308c93(0x1c3)]&&_0x4ddf8e[0x1]['error'][_0x308c93(0x25c)])_0x4254ae+=_0x308c93(0x1e9)+_0x4ddf8e[0x1][_0x308c93(0x1c3)][_0x308c93(0x25c)];logging(_0x308c93(0x283)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x4254ae),await pauseBot('Binance\x20not\x20available\x20(1)');}}},crypt=new Crypt({'md':_0x464585(0x195),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x464585(0x25a)]!=config[_0x464585(0x25a)]&&updateTimeshift(settings[_0x464585(0x25a)]);process[_0x464585(0x1ea)]({'started':_0x464585(0x164)},_0x1bca74=>{}),initializeProcessListeners();function proxyEmit(_0x42132b,_0x2fb964=null){process['send']({'function':_0x42132b,'args':_0x2fb964},_0x410692=>{});}function initializeProcessListeners(){process['on']('message',_0x19e1ba=>{const _0x1b69a4=_0x3972;switch(Object['keys'](_0x19e1ba)[0x0]){case _0x1b69a4(0x25a):_0x19e1ba[_0x1b69a4(0x25a)]!=undefined&&(settings['timeshift']=_0x19e1ba[_0x1b69a4(0x25a)],updateTimeshift(settings[_0x1b69a4(0x25a)]));break;case _0x1b69a4(0x17d):switch(_0x19e1ba[_0x1b69a4(0x17d)]){case'initclient':initclient();break;case _0x1b69a4(0x1ed):toggleBotMode();break;case _0x1b69a4(0x220):emitHistory(_0x19e1ba[_0x1b69a4(0x1db)]);break;case _0x1b69a4(0x16b):deleteHistoryAlerts(_0x19e1ba[_0x1b69a4(0x1db)]);break;case _0x1b69a4(0x159):getPortfolio(_0x19e1ba[_0x1b69a4(0x1db)]);break;case _0x1b69a4(0x1af):storeConfiguration(_0x19e1ba[_0x1b69a4(0x1db)]);break;case _0x1b69a4(0x1b6):storeHeadless(_0x19e1ba[_0x1b69a4(0x1db)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x1b69a4(0x1b4):placeOrder(_0x19e1ba[_0x1b69a4(0x1db)]);break;case _0x1b69a4(0x1a6):cancelLoading();break;case _0x1b69a4(0x1f3):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config['apiSecret']);let _0x87a7db=await loadSymbols();if(_0x87a7db){currentCoins=await getCoins(),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x1bd07a,_0xea1db4){const _0x5df7fa=_0x464585,_0x2d89d5=ccxt[config[_0x5df7fa(0x232)]];let _0x523de9;switch(config[_0x5df7fa(0x232)]){case'binance':_0x523de9=_0x5df7fa(0x22c);break;case _0x5df7fa(0x21e):_0x523de9='wss://stream.binance.us:9443';break;default:_0x523de9=_0x5df7fa(0x22c);}exchange=new _0x2d89d5({'apiKey':_0x1bd07a,'secret':_0xea1db4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1bd07a,'api_secret':_0xea1db4,'beautify':!![],'wsUrl':_0x523de9},logger);let _0x3b3217=config[_0x5df7fa(0x232)]==_0x5df7fa(0x21e)?_0x5df7fa(0x1a9):'EUR',_0x35734e=config['basecoin']==_0x5df7fa(0x174)?_0x5df7fa(0x174):_0x5df7fa(0x1b2);stablecoins={'eur':{'coin':''+_0x35734e+_0x3b3217,'symbol':_0x35734e+'/'+_0x3b3217},'usd':{'coin':_0x35734e+'USDT','symbol':_0x35734e+_0x5df7fa(0x17e)}};}async function loadSymbols(){const _0x2407ac=_0x464585;let _0x232715;try{markets=await exchange[_0x2407ac(0x15c)](),allSymbols=exchange[_0x2407ac(0x227)]['filter'](_0x4a0903=>{const _0x269d78=_0x2407ac;let _0x4f785d=![];return exceptions[_0x269d78(0x1a0)](_0x536a8c=>{if(_0x4a0903['includes'](_0x536a8c))_0x4f785d=!![];}),!_0x4f785d;}),_0x232715=!![];}catch(_0x48b945){await handleError(_0x48b945,_0x2407ac(0x1ca)),_0x232715=![];}return _0x232715;}async function initbot(){const _0x29b51c=_0x464585;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4e4a39=dbCoinResults[_0x29b51c(0x241)](_0x29b51c(0x20b))['value']();if(_0x4e4a39[_0x29b51c(0x278)]==0x0)await resetCoinResults();}async function initclient(){const _0x3103c1=_0x464585;proxyEmit(_0x3103c1(0x19b),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3103c1(0x170),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x11d35b=getNormalizedPerformance();emitPerformance(_0x11d35b),await getStartingBalances(_0x11d35b);}async function toggleBotMode(){const _0x7e6e4e=_0x464585;let _0x2d6d96=dbConfig[_0x7e6e4e(0x241)]('bot')[_0x7e6e4e(0x15a)]({'botID':botID})[_0x7e6e4e(0x158)]();if(_0x2d6d96){const _0x4d6adb=!_0x2d6d96[_0x7e6e4e(0x1e0)];dbConfig[_0x7e6e4e(0x241)]('bot')[_0x7e6e4e(0x15a)]({'botID':botID})[_0x7e6e4e(0x20c)]({'headless':_0x4d6adb})[_0x7e6e4e(0x249)](),config['headless']=_0x4d6adb,proxyEmit(_0x7e6e4e(0x19b),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0xf409a3=>{});}function cleanws(){const _0x20281c=_0x464585;wsinitialized=![];ws1&&(ws1[_0x20281c(0x1a0)](_0x13850e=>{const _0x31bae1=_0x20281c;try{wsClient[_0x31bae1(0x27b)](_0x13850e);}catch(_0x183913){}}),ws1=[]);if(ws2){try{wsClient[_0x20281c(0x27b)](ws2);}catch(_0x4d44f3){}ws2=null;}ws3&&(ws3[_0x20281c(0x1a0)](_0xa36cbc=>{const _0x1c3b11=_0x20281c;try{wsClient[_0x1c3b11(0x27b)](_0xa36cbc);}catch(_0x5e9a03){}}),ws3=[]);}async function initws(){const _0x191a08=_0x464585;cleanws();let _0x3bdd8c=[];currentCoins[_0x191a08(0x1a0)](_0x5900b2=>{const _0x436e76=_0x191a08;if(_0x5900b2[_0x436e76(0x1d5)]!=config[_0x436e76(0x216)])_0x3bdd8c[_0x436e76(0x199)](_0x5900b2[_0x436e76(0x1b9)]);});if(!_0x3bdd8c[_0x191a08(0x247)](stablecoins[_0x191a08(0x1df)][_0x191a08(0x1b9)]))_0x3bdd8c[_0x191a08(0x199)](stablecoins[_0x191a08(0x1df)][_0x191a08(0x1b9)]);if(!_0x3bdd8c[_0x191a08(0x247)](stablecoins[_0x191a08(0x184)]['symbol']))_0x3bdd8c['push'](stablecoins['usd'][_0x191a08(0x1b9)]);if(!_0x3bdd8c[_0x191a08(0x247)](_0x191a08(0x214)+config[_0x191a08(0x216)]))_0x3bdd8c[_0x191a08(0x199)]('BNB/'+config[_0x191a08(0x216)]);try{_0x3bdd8c[_0x191a08(0x1a0)]((_0x26d30e,_0x11e9f1)=>{const _0x22c4dd=_0x191a08;ws1[_0x11e9f1]=wsClient[_0x22c4dd(0x198)](noslash(_0x26d30e),'1m'),ws3[_0x11e9f1]=wsClient[_0x22c4dd(0x281)](noslash(_0x26d30e),_0x22c4dd(0x1f5));}),ws2=wsClient[_0x191a08(0x186)](),wsClient['on'](_0x191a08(0x1d6),_0x31ca82=>{const _0x403ad3=_0x191a08;if(isWsFormattedKline(_0x31ca82)){global[_0x403ad3(0x26b)][_0x31ca82[_0x403ad3(0x1be)]['symbol']]=_0x31ca82['kline'][_0x403ad3(0x165)];return;}else{if(isWsFormatted24hrTicker(_0x31ca82)){global['change'][_0x31ca82[_0x403ad3(0x1b9)]]=_0x31ca82[_0x403ad3(0x1b1)];return;}else{if(!Array['isArray'](_0x31ca82)&&_0x31ca82[_0x403ad3(0x261)][_0x403ad3(0x247)]('userData')){if(_0x31ca82[_0x403ad3(0x22a)][_0x403ad3(0x247)](_0x403ad3(0x1f5))){updateNumberCoins(_0x31ca82);return;}}}}}),wsClient['on'](_0x191a08(0x16c),async _0x2b1a23=>{if(!botPaused)currentCoins=await getCoins();logHistory('success','WebSocket\x20connection\x20restored');});}catch(_0x3601f4){await handleError(_0x3601f4,_0x191a08(0x226));}let _0x3adc90,_0xc2774=0x0;loading[_0x191a08(0x18a)]=[];let _0x2a7059=0x0;_0x3bdd8c[_0x191a08(0x1a0)](_0x34fb41=>{const _0x3b09bd=_0x191a08;loading[_0x3b09bd(0x18a)][_0x3b09bd(0x199)](_0x34fb41);}),loadingCanceled=![];while(_0x3adc90!=_0x3bdd8c[_0x191a08(0x278)]){_0x3adc90=0x0,_0x3bdd8c[_0x191a08(0x1a0)](_0x395f1a=>{const _0x1b7018=_0x191a08;global[_0x1b7018(0x26b)][noslash(_0x395f1a)]&&(loading[_0x1b7018(0x18a)]=loading['remainingSymbols'][_0x1b7018(0x189)](_0x54bc03=>_0x54bc03!=_0x395f1a),_0x3adc90++);}),loading[_0x191a08(0x236)]=Math[_0x191a08(0x20f)](_0x3adc90/_0x3bdd8c['length']*0x64);_0x2a7059>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3adc90!=_0xc2774&&(_0xc2774=_0x3adc90,emitLoadingProgress()),_0x2a7059++,await sleep(0xc8);}if(_0x3adc90==_0x3bdd8c['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0xf9ef6c=_0x464585;proxyEmit(_0xf9ef6c(0x15b),loading);}async function getFiat(){const _0x16a72f=_0x464585;let _0x224403=0x0,_0x4c1277=0x0;try{_0x224403=global['ticker'][stablecoins['eur']['coin']],_0x4c1277=global[_0x16a72f(0x26b)][stablecoins[_0x16a72f(0x184)][_0x16a72f(0x1d5)]];}catch(_0x454ef7){await handleError(_0x454ef7,_0x16a72f(0x270));}return{'eur':Number(_0x224403),'usd':Number(_0x4c1277)};}function setStartDatePerformance(){const _0x39ac31=_0x464585;if(config&&config[_0x39ac31(0x181)][0x0][_0x39ac31(0x262)][_0x39ac31(0x278)]!=0x0){const _0x9edda5=config[_0x39ac31(0x181)][0x0][_0x39ac31(0x262)];dbPerformance[_0x39ac31(0x241)](_0x39ac31(0x1e2))[_0x39ac31(0x15a)]({'date':config[_0x39ac31(0x248)]})[_0x39ac31(0x20c)]({'coins':_0x9edda5})[_0x39ac31(0x249)]();}}async function recreateHistory(_0x5e1bca){const _0x3f762f=_0x464585;let _0x4d475d,_0x2e154a=[];logHistory(_0x3f762f(0x280),_0x3f762f(0x19d)),_0x5e1bca['portfolio'][_0x3f762f(0x1a0)](_0x2b8ec1=>{const _0x18cefd=_0x3f762f;if(_0x2b8ec1[_0x18cefd(0x1d5)]!=config[_0x18cefd(0x216)]&&!_0x2b8ec1[_0x18cefd(0x26d)])_0x2e154a['push']({'coin':_0x2b8ec1[_0x18cefd(0x1d5)],'symbol':_0x2b8ec1[_0x18cefd(0x1b9)]});});let _0x40a060=[];try{const _0xa5187b=fns['format'](fns['parseISO'](_0x5e1bca[_0x3f762f(0x248)]['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0xbbd8b5 of _0x2e154a){if(_0xbbd8b5['coin']!=config['basecoin'])_0x4d475d=await exchange[_0x3f762f(0x1a3)](_0xbbd8b5[_0x3f762f(0x1b9)],Date[_0x3f762f(0x1e8)](_0xa5187b));_0x4d475d[_0x3f762f(0x1a0)](_0x25e066=>{const _0x39b43e=_0x3f762f,_0x41a307=_0xbbd8b5['symbol'][_0x39b43e(0x247)](config['basecoin']+'/'),_0x103165=fns['format'](fns['parseISO'](_0x25e066[_0x39b43e(0x212)]),_0x39b43e(0x1f9)),_0x21f792=fns[_0x39b43e(0x156)](fns[_0x39b43e(0x167)](_0x25e066[_0x39b43e(0x212)]),_0x39b43e(0x27e));let _0x257946;if(_0x25e066['side']==_0x39b43e(0x1d2)&&_0x41a307==![])_0x257946=_0x25e066[_0x39b43e(0x268)];if(_0x25e066['side']==_0x39b43e(0x1d2)&&_0x41a307==!![])_0x257946=-_0x25e066[_0x39b43e(0x268)]*_0x25e066['price'];if(_0x25e066[_0x39b43e(0x17c)]==_0x39b43e(0x266)&&_0x41a307==![])_0x257946=-_0x25e066[_0x39b43e(0x268)];if(_0x25e066[_0x39b43e(0x17c)]==_0x39b43e(0x266)&&_0x41a307==!![])_0x257946=_0x25e066['amount']*_0x25e066['price'];_0x40a060[_0x39b43e(0x199)]({'timestamp':_0x103165,'date':_0x21f792,'coin':_0xbbd8b5[_0x39b43e(0x1d5)],'symbol':_0xbbd8b5[_0x39b43e(0x1b9)],'type':_0x25e066[_0x39b43e(0x230)],'side':_0x25e066[_0x39b43e(0x17c)],'reverse':_0x41a307,'amount':formatResult(_0x25e066[_0x39b43e(0x1d9)],0x8),'filled':formatResult(_0x25e066[_0x39b43e(0x1d9)],0x8),'coinamount':formatResult(_0x257946,0x8),'price':formatResult(_0x25e066[_0x39b43e(0x17f)],0x8)});let _0x3f85b6;if(_0x25e066['side']==_0x39b43e(0x1d2)&&_0x41a307==![])_0x3f85b6=-_0x25e066[_0x39b43e(0x268)]*_0x25e066[_0x39b43e(0x17f)];if(_0x25e066[_0x39b43e(0x17c)]==_0x39b43e(0x1d2)&&_0x41a307==!![])_0x3f85b6=_0x25e066['amount'];if(_0x25e066[_0x39b43e(0x17c)]==_0x39b43e(0x266)&&_0x41a307==![])_0x3f85b6=_0x25e066[_0x39b43e(0x268)]*_0x25e066[_0x39b43e(0x17f)];if(_0x25e066[_0x39b43e(0x17c)]=='sell'&&_0x41a307==!![])_0x3f85b6=-_0x25e066['amount'];_0x40a060[_0x39b43e(0x199)]({'date':_0x21f792,'coin':config[_0x39b43e(0x216)],'coinamount':formatResult(_0x3f85b6,0x8)});});}_0x40a060['sort']((_0x260eae,_0x442bd6)=>_0x260eae['timestamp']>_0x442bd6[_0x3f762f(0x188)]?0x1:_0x442bd6['timestamp']>_0x260eae['timestamp']?-0x1:0x0),dbLogs[_0x3f762f(0x241)](_0x3f762f(0x202))['remove']()[_0x3f762f(0x249)](),_0x40a060[_0x3f762f(0x1a0)](_0xca5d69=>{const _0x4d2b71=_0x3f762f;let _0x4c0a30;_0xca5d69[_0x4d2b71(0x1d5)]!=config['basecoin']&&(_0x4c0a30={'time':_0xca5d69['timestamp'],'type':_0x4d2b71(0x22f),'event':_0x4d2b71(0x27f)+_0xca5d69[_0x4d2b71(0x1b9)]+'\x20'+_0xca5d69[_0x4d2b71(0x17c)]+'\x20#'+_0xca5d69[_0x4d2b71(0x268)]+'\x20@'+_0xca5d69['price']},dbLogs[_0x4d2b71(0x241)](_0x4d2b71(0x202))[_0x4d2b71(0x199)](_0x4c0a30)[_0x4d2b71(0x249)]());});const _0x2b70a4=fns[_0x3f762f(0x24c)]({'start':new Date(_0x5e1bca[_0x3f762f(0x248)]),'end':new Date()})[_0x3f762f(0x1d1)](_0x22715e=>fns[_0x3f762f(0x156)](_0x22715e,_0x3f762f(0x27e)));let _0x39f0a7=[];_0x5e1bca[_0x3f762f(0x1f4)][_0x3f762f(0x1a0)](_0x21c470=>{const _0x899c6c=_0x3f762f;if(!_0x21c470['excluded']){_0x39f0a7[_0x21c470['coin']]=[];let _0x2e5089=_0x21c470[_0x899c6c(0x1c7)];_0x2b70a4['forEach']((_0x5e715c,_0x124095)=>{const _0x2a0dfd=_0x899c6c;let _0x74de16=_0x40a060['filter'](_0xdb09cf=>_0xdb09cf[_0x2a0dfd(0x1d5)]==_0x21c470['coin']&&_0xdb09cf[_0x2a0dfd(0x1e3)]==_0x5e715c);if(_0x74de16[_0x2a0dfd(0x278)]!=0x0){let _0x562315=_0x74de16[_0x2a0dfd(0x1e5)]((_0x32016e,_0xdca377)=>{const _0x3324d3=_0x2a0dfd;return _0x32016e+=_0xdca377[_0x3324d3(0x168)],_0x32016e;},0x0);_0x2e5089+=_0x562315;}_0x39f0a7[_0x21c470[_0x2a0dfd(0x1d5)]][_0x5e715c]=_0x2e5089;});}});const _0x519a60=[..._0x2e154a];_0x519a60[_0x3f762f(0x199)]({'coin':stablecoins['eur'][_0x3f762f(0x1d5)],'symbol':stablecoins[_0x3f762f(0x1df)]['symbol']}),_0x519a60['push']({'coin':stablecoins[_0x3f762f(0x184)][_0x3f762f(0x1d5)],'symbol':stablecoins[_0x3f762f(0x184)]['symbol']});let _0x41b6e4=[];for(const _0xcd0f19 of _0x519a60){_0x41b6e4[_0xcd0f19['coin']]=await getCloses(_0xcd0f19[_0x3f762f(0x1b9)],new Date(_0x5e1bca['startdate']));}dbPerformance[_0x3f762f(0x241)](_0x3f762f(0x1e2))[_0x3f762f(0x209)]()[_0x3f762f(0x249)](),_0x2b70a4[_0x3f762f(0x1a0)]((_0x425688,_0x4494c7)=>{const _0x2c39e3=_0x3f762f;let _0x56ba4e,_0xea941a=[];_0x4494c7==0x0?(_0x5e1bca[_0x2c39e3(0x1f4)][_0x2c39e3(0x1a0)](_0x1891ea=>{const _0x28c08c=_0x2c39e3;!_0x1891ea[_0x28c08c(0x26d)]&&_0xea941a[_0x28c08c(0x199)]({'coin':_0x1891ea[_0x28c08c(0x1d5)],'number':_0x1891ea[_0x28c08c(0x1c7)],'price':_0x1891ea[_0x28c08c(0x25d)]});}),_0x56ba4e={'date':_0x425688,'eur':_0x41b6e4[stablecoins[_0x2c39e3(0x1df)][_0x2c39e3(0x1d5)]][_0x4494c7],'usd':_0x41b6e4[stablecoins[_0x2c39e3(0x184)][_0x2c39e3(0x1d5)]][_0x4494c7],'coins':_0xea941a}):(_0x5e1bca[_0x2c39e3(0x1f4)][_0x2c39e3(0x1a0)](_0x2b8783=>{const _0xf0e817=_0x2c39e3;!_0x2b8783[_0xf0e817(0x26d)]&&_0xea941a[_0xf0e817(0x199)]({'coin':_0x2b8783['coin'],'number':_0x39f0a7[_0x2b8783[_0xf0e817(0x1d5)]][_0x425688],'price':_0x2b8783[_0xf0e817(0x1d5)]==config[_0xf0e817(0x216)]?0x1:_0x41b6e4[_0x2b8783[_0xf0e817(0x1d5)]][_0x4494c7]});}),_0x56ba4e={'date':_0x425688,'eur':_0x41b6e4[stablecoins['eur'][_0x2c39e3(0x1d5)]][_0x4494c7],'usd':_0x41b6e4[stablecoins[_0x2c39e3(0x184)][_0x2c39e3(0x1d5)]][_0x4494c7],'coins':_0xea941a}),dbPerformance[_0x2c39e3(0x241)](_0x2c39e3(0x1e2))[_0x2c39e3(0x199)](_0x56ba4e)[_0x2c39e3(0x249)]();}),emitPerformance(getNormalizedPerformance()),await resetCoinResults();for(let _0xc3d5c0 of _0x40a060){_0xc3d5c0[_0x3f762f(0x1d5)]!=config[_0x3f762f(0x216)]&&await updateCoinResults(_0xc3d5c0);}logHistory('success','Performance\x20recreation\x20completed\x20successfully');}catch(_0x18ec97){await handleError(_0x18ec97,_0x3f762f(0x175));}}async function validate24hChanges(){const _0x58ac8b=_0x464585;let _0x122485;for(const _0x27c699 of currentCoins){if(_0x27c699[_0x58ac8b(0x1d5)]!=config[_0x58ac8b(0x216)]){let _0xd4a373;_0x27c699[_0x58ac8b(0x191)]?_0xd4a373=formatResult((0x1/(global['change'][noslash(_0x27c699[_0x58ac8b(0x1b9)])]/0x64+0x1)-0x1)*0x64,0x3):_0xd4a373=global[_0x58ac8b(0x255)][noslash(_0x27c699['symbol'])],_0xd4a373<config[_0x58ac8b(0x1a2)]&&(logHistory('error',_0x27c699[_0x58ac8b(0x1d5)]+_0x58ac8b(0x1cf)+_0xd4a373+'%'),logHistory('error',_0x58ac8b(0x19c)),logHistory('error',_0x58ac8b(0x208)),await storeHeadless({'headless':![]}));}}}async function getCloses(_0x3dc4fc,_0x35b6fc,_0xdfb6d0=undefined){const _0x51bd49=_0x464585,_0x242f33='1d';let _0x3b9a95,_0x110c6c;const _0x400b2c=fns[_0x51bd49(0x21f)](new Date(),_0x35b6fc)+0x1;try{const _0x4f9d44=exchange[_0x51bd49(0x1fb)]()-_0x400b2c*0x18*0xe10*0x3e8;_0x3b9a95=await exchange[_0x51bd49(0x1f2)](_0x3dc4fc,_0x242f33,_0x4f9d44,_0xdfb6d0),_0x110c6c=await exchange[_0x51bd49(0x24e)](_0x3dc4fc);}catch(_0x3da5bb){await handleError(_0x3da5bb,_0x51bd49(0x1cc));}let _0x5e9ec1=ohlcvToCloses(_0x3b9a95);return _0x5e9ec1[_0x51bd49(0x199)](_0x110c6c[_0x3dc4fc][_0x51bd49(0x254)]),_0x5e9ec1;}function ohlcvToCloses(_0x514582){const _0x4b5e19=_0x464585;let _0x5e32fd=[];return _0x514582[_0x4b5e19(0x1a0)](function(_0x254aef){const _0x4087aa=_0x4b5e19;_0x5e32fd[_0x4087aa(0x199)](_0x254aef[0x4]);}),_0x5e32fd;}function oneTimeMigration(){const _0x30fa86=_0x464585;let _0x4375a2=dbLogs[_0x30fa86(0x241)](_0x30fa86(0x1e6))[_0x30fa86(0x158)]();if(_0x4375a2!='2.3.5'){dbLogs[_0x30fa86(0x162)](_0x30fa86(0x1e6),_0x30fa86(0x219))[_0x30fa86(0x249)]();let _0x1c3c9b=[];const _0x402b3f=dbLogs[_0x30fa86(0x241)](_0x30fa86(0x202))['value']();_0x402b3f[_0x30fa86(0x1a0)](_0x161aa0=>{const _0x5c6cea=_0x30fa86;_0x1c3c9b[_0x5c6cea(0x199)]({'time':_0x161aa0[_0x5c6cea(0x18d)],'type':_0x161aa0['type'],'event':_0x161aa0[_0x5c6cea(0x245)]});}),dbLogs[_0x30fa86(0x241)](_0x30fa86(0x202))[_0x30fa86(0x20c)](_0x1c3c9b)[_0x30fa86(0x249)]();}let _0x54592c=dbConfig[_0x30fa86(0x241)](_0x30fa86(0x1e6))[_0x30fa86(0x158)]();if(_0x54592c!=_0x30fa86(0x219)){dbConfig['set']('version','2.3.5')[_0x30fa86(0x249)]();let _0x293192=dbConfig[_0x30fa86(0x241)](_0x30fa86(0x20a))[_0x30fa86(0x15a)]({'botID':botID})[_0x30fa86(0x158)]();if(_0x293192){let _0x44db6c=[];_0x293192[_0x30fa86(0x1f4)][_0x30fa86(0x1a0)](_0x3ac19d=>{const _0x5138a1=_0x30fa86;_0x44db6c[_0x5138a1(0x199)]({'coin':_0x3ac19d[_0x5138a1(0x1d5)],'number':_0x3ac19d[_0x5138a1(0x1c7)],'price':_0x3ac19d[_0x5138a1(0x25d)]}),delete _0x3ac19d['startnumber'],delete _0x3ac19d[_0x5138a1(0x25d)];});if(_0x44db6c[_0x30fa86(0x278)]!==0x0)fs[_0x30fa86(0x1f0)](configbackuppath+(_0x30fa86(0x24d)+botID+'.json'),JSON[_0x30fa86(0x1fd)](_0x44db6c,null,0x4),function(_0x3a4331){if(_0x3a4331){}});const _0x432a3e=(_0x47f206,_0x3530d3)=>{const _0xb4d511=_0x30fa86;let _0x365abe=[];_0x3530d3[_0xb4d511(0x1a0)](_0x32fd72=>{const _0x4f1084=_0xb4d511,_0x1daec5=_0x47f206[_0x4f1084(0x15a)](_0x296a66=>_0x296a66[_0x4f1084(0x1d5)]==_0x32fd72[_0x4f1084(0x1d5)]);if(!_0x1daec5)_0x365abe['push'](_0x32fd72);});let _0x24f968=[];return _0x47f206[_0xb4d511(0x1a0)](_0x4e194a=>{const _0x5f1c0c=_0xb4d511,_0x38e83f=_0x3530d3[_0x5f1c0c(0x15a)](_0x91ba68=>_0x91ba68[_0x5f1c0c(0x1d5)]==_0x4e194a[_0x5f1c0c(0x1d5)]);if(!_0x38e83f||_0x38e83f[_0x5f1c0c(0x177)]==0x0&&_0x4e194a[_0x5f1c0c(0x177)]!=0x0)_0x24f968[_0x5f1c0c(0x199)](_0x4e194a);}),{'missingDay1':_0x365abe,'notInDay2':_0x24f968};},_0x266cd0=dbPerformance[_0x30fa86(0x241)](_0x30fa86(0x1e2))[_0x30fa86(0x23b)]()[_0x30fa86(0x158)]();if(_0x266cd0[_0x30fa86(0x278)]>0x1){const {missingDay1:_0x27b793,notInDay2:_0x41935c}=_0x432a3e(_0x44db6c,_0x266cd0[0x1]['coins']);_0x44db6c=[..._0x44db6c,..._0x27b793],_0x41935c[_0x30fa86(0x1a0)](_0x589764=>{const _0x2fbb45=_0x30fa86;let _0x1c2462=_0x44db6c['findIndex'](_0x4e5f51=>_0x4e5f51[_0x2fbb45(0x1d5)]==_0x589764[_0x2fbb45(0x1d5)]);_0x1c2462!=-0x1&&_0x44db6c[_0x2fbb45(0x176)](_0x1c2462,0x1);});}_0x44db6c[_0x30fa86(0x196)]((_0x193dda,_0x2c4873)=>_0x193dda[_0x30fa86(0x1d5)]>_0x2c4873[_0x30fa86(0x1d5)]?0x1:_0x2c4873[_0x30fa86(0x1d5)]>_0x193dda['coin']?-0x1:0x0);let _0x42bfdb=[{'date':_0x293192[_0x30fa86(0x248)],'changes':_0x44db6c}];_0x266cd0[_0x30fa86(0x278)]>0x2&&_0x266cd0[_0x30fa86(0x1a0)]((_0x59cbdf,_0x361091)=>{const _0x1ac875=_0x30fa86;if(_0x361091>0x0&&_0x361091<_0x266cd0[_0x1ac875(0x278)]-0x1){const {missingDay1:_0x5e5e1e,notInDay2:_0x58bb0f}=_0x432a3e(_0x266cd0[_0x361091][_0x1ac875(0x20b)],_0x266cd0[_0x361091+0x1][_0x1ac875(0x20b)]);_0x44db6c=[],(_0x5e5e1e[_0x1ac875(0x278)]!=0x0||_0x58bb0f[_0x1ac875(0x278)]!=0x0)&&(_0x5e5e1e[_0x1ac875(0x278)]!=0x0&&_0x44db6c[_0x1ac875(0x199)](..._0x5e5e1e),_0x58bb0f['length']!=0x0&&(_0x58bb0f[_0x1ac875(0x1a0)](_0x124b5c=>{const _0x92a80d=_0x1ac875;_0x124b5c[_0x92a80d(0x177)]=-_0x124b5c[_0x92a80d(0x177)];}),_0x44db6c[_0x1ac875(0x199)](..._0x58bb0f)),_0x44db6c[_0x1ac875(0x196)]((_0x502c2d,_0x16782d)=>_0x502c2d[_0x1ac875(0x1d5)]>_0x16782d['coin']?0x1:_0x16782d[_0x1ac875(0x1d5)]>_0x502c2d[_0x1ac875(0x1d5)]?-0x1:0x0),_0x42bfdb[_0x1ac875(0x199)]({'date':_0x266cd0[_0x361091+0x1][_0x1ac875(0x1e3)],'changes':_0x44db6c}));}}),dbConfig[_0x30fa86(0x241)]('bot')[_0x30fa86(0x15a)]({'botID':botID})[_0x30fa86(0x20c)]({..._0x293192,'liquidity':_0x42bfdb})[_0x30fa86(0x249)]();}}config=getConfiguration(botID);let _0xcba078=dbPerformance[_0x30fa86(0x241)](_0x30fa86(0x1e6))[_0x30fa86(0x158)]();_0xcba078!=_0x30fa86(0x219)&&(dbPerformance[_0x30fa86(0x162)]('version',_0x30fa86(0x219))[_0x30fa86(0x249)](),setStartDatePerformance());let _0x2c6f0f=dbCoinResults[_0x30fa86(0x241)](_0x30fa86(0x1e6))[_0x30fa86(0x158)]();_0x2c6f0f!=_0x30fa86(0x219)&&dbCoinResults[_0x30fa86(0x162)](_0x30fa86(0x1e6),_0x30fa86(0x219))[_0x30fa86(0x249)]();}function getConfiguration(_0x37d82d){const _0x4a975c=_0x464585;let _0x8b8b80=dbConfig[_0x4a975c(0x241)](_0x4a975c(0x20a))[_0x4a975c(0x15a)]({'botID':_0x37d82d})[_0x4a975c(0x158)]();if(_0x8b8b80){let _0x2c1b29=![];typeof _0x8b8b80[_0x4a975c(0x274)]==_0x4a975c(0x27a)&&(_0x8b8b80={..._0x8b8b80,'threshold':Number(_0x8b8b80['threshold'])},_0x2c1b29=!![]),_0x8b8b80['change24h']==null&&(_0x8b8b80={..._0x8b8b80,'change24h':-0x14},_0x2c1b29=!![]),_0x2c1b29&&(_0x8b8b80={'botID':_0x8b8b80['botID'],'exchange':_0x8b8b80[_0x4a975c(0x232)],'apiKey':_0x8b8b80[_0x4a975c(0x211)],'apiSecret':_0x8b8b80[_0x4a975c(0x1ce)],'basecoin':_0x8b8b80[_0x4a975c(0x216)],'botname':_0x8b8b80[_0x4a975c(0x1e4)],'showname':_0x8b8b80['showname'],'threshold':_0x8b8b80[_0x4a975c(0x274)],'ordertype':_0x8b8b80[_0x4a975c(0x1c4)],'timeout':_0x8b8b80[_0x4a975c(0x17b)],'startdate':_0x8b8b80[_0x4a975c(0x248)],'recreate':_0x8b8b80[_0x4a975c(0x22b)],'timeshift':_0x8b8b80[_0x4a975c(0x25a)],'headless':_0x8b8b80[_0x4a975c(0x1e0)],'cooldown':_0x8b8b80['cooldown'],'change24h':_0x8b8b80[_0x4a975c(0x1a2)],'emojibuy':_0x8b8b80[_0x4a975c(0x16d)],'emojisell':_0x8b8b80[_0x4a975c(0x239)],'portfolio':_0x8b8b80[_0x4a975c(0x1f4)],'liquidity':_0x8b8b80[_0x4a975c(0x181)]},dbConfig['get'](_0x4a975c(0x20a))[_0x4a975c(0x209)]()[_0x4a975c(0x249)](),dbConfig[_0x4a975c(0x241)](_0x4a975c(0x20a))[_0x4a975c(0x199)](_0x8b8b80)[_0x4a975c(0x249)]());}else _0x8b8b80={'botID':_0x37d82d,'exchange':_0x4a975c(0x282),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x37d82d,'showname':![],'threshold':0x3,'ordertype':_0x4a975c(0x23a),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4a975c(0x25a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x8b8b80;}function emittedConfiguration(){const _0x1851f7=_0x464585;let _0x45ab1f;return config[_0x1851f7(0x211)]==''?_0x45ab1f=config:_0x45ab1f={...config,'apiKey':_0x1851f7(0x172),'apiSecret':_0x1851f7(0x172)},_0x45ab1f;}function getSettings(){const _0x2d5167=_0x464585;return dbSettings[_0x2d5167(0x241)]('settings')[_0x2d5167(0x158)]();}function getSecure(){const _0x547b03=_0x464585;return dbSecure[_0x547b03(0x241)](_0x547b03(0x1fa))[_0x547b03(0x158)]()||{};}function updateTimeshift(_0x40c6af){const _0xcf6247=_0x464585;let _0x2ace3b=dbConfig['get'](_0xcf6247(0x20a))[_0xcf6247(0x15a)]({'botID':botID})[_0xcf6247(0x158)]();_0x2ace3b&&dbConfig[_0xcf6247(0x241)](_0xcf6247(0x20a))[_0xcf6247(0x15a)]({'botID':botID})[_0xcf6247(0x20c)]({'timeshift':_0x40c6af})[_0xcf6247(0x249)](),config['timeshift']=_0x40c6af,proxyEmit(_0xcf6247(0x19b),emittedConfiguration());}async function storeConfiguration(_0x2fc8ba){const _0x4ff750=_0x464585;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x7835f4=dbConfig[_0x4ff750(0x241)](_0x4ff750(0x20a))['find']({'botID':botID})[_0x4ff750(0x158)]();_0x2fc8ba={..._0x2fc8ba,'apiKey':crypt[_0x4ff750(0x17a)](secure[_0x4ff750(0x233)],_0x2fc8ba[_0x4ff750(0x211)])['message'],'apiSecret':crypt[_0x4ff750(0x17a)](secure[_0x4ff750(0x233)],_0x2fc8ba[_0x4ff750(0x1ce)])[_0x4ff750(0x25c)]};if(_0x7835f4){if(_0x2fc8ba['apiKey']==_0x4ff750(0x172))_0x2fc8ba[_0x4ff750(0x211)]=config[_0x4ff750(0x211)];if(_0x2fc8ba[_0x4ff750(0x1ce)]==_0x4ff750(0x172))_0x2fc8ba[_0x4ff750(0x1ce)]=config[_0x4ff750(0x1ce)];dbConfig[_0x4ff750(0x241)](_0x4ff750(0x20a))[_0x4ff750(0x15a)]({'botID':botID})['assign'](_0x2fc8ba)['write']();}else dbConfig['get']('bot')['push'](_0x2fc8ba)['write'](),process['send']({'status':_0x4ff750(0x22e),'live':_0x4ff750(0x164)},_0x376d4b=>{});config={..._0x2fc8ba},setStartDatePerformance(),process['send']({'botname':_0x2fc8ba[_0x4ff750(0x1e4)]},_0x5335b8=>{}),updateBotManager();const _0xd47307=getNormalizedPerformance();getStartingBalances(_0xd47307),emitPerformance(_0xd47307),proxyEmit(_0x4ff750(0x1d3)),reset();}async function storeHeadless(_0x5ca7aa){const _0x10e361=_0x464585,_0x1f9cc1={...config,'headless':_0x5ca7aa[_0x10e361(0x1e0)]};let _0x59cbbc=dbConfig['get']('bot')[_0x10e361(0x15a)]({'botID':botID})[_0x10e361(0x158)]();_0x59cbbc&&dbConfig[_0x10e361(0x241)](_0x10e361(0x20a))[_0x10e361(0x15a)]({'botID':botID})[_0x10e361(0x20c)](_0x1f9cc1)[_0x10e361(0x249)](),config={..._0x1f9cc1},updateBotManager(),proxyEmit(_0x10e361(0x19b),emittedConfiguration());}function noslash(_0x3b92b0){return _0x3b92b0['replace']('/','');}async function updateNumberCoins(_0x1a5706){const _0x37e791=_0x464585;_0x1a5706['eventType']&&_0x1a5706[_0x37e791(0x267)]=='outboundAccountPosition'&&(_0x1a5706[_0x37e791(0x1d8)]!=lastOutboundEventTime&&(lastOutboundEventTime=_0x1a5706[_0x37e791(0x1d8)],currentCoins=await getCoins(),validateOrders()));if(_0x1a5706[_0x37e791(0x267)]&&_0x1a5706[_0x37e791(0x267)]==_0x37e791(0x1cb)){if(_0x1a5706['orderStatus']=='FILLED'){if(lastOrders)lastOrders[_0x37e791(0x1a0)](async _0x45e714=>{const _0x18dc5a=_0x37e791;_0x45e714['orderId']==_0x1a5706[_0x18dc5a(0x269)]&&_0x45e714['filled']==0x0&&(_0x45e714[_0x18dc5a(0x17f)]=_0x1a5706['cumulativeQuoteAssetTransactedQty']/_0x1a5706[_0x18dc5a(0x157)],_0x45e714[_0x18dc5a(0x1d9)]=_0x1a5706[_0x18dc5a(0x157)],_0x45e714[_0x18dc5a(0x26a)]={'cost':_0x1a5706[_0x18dc5a(0x1d0)],'currency':_0x1a5706['commissionAsset']},validateOrders(),currentCoins=await getCoins(),await updateCoinResults(_0x45e714));});}}}async function getCoins(_0x45f2ec=!![],_0xa8bc25=config['basecoin']){const _0x4df4fe=_0x464585;let _0x514f00,_0xdb58bb=[],_0x18710a=[],_0x2f7390=[];try{_0x514f00=await exchange['fetchBalance'](),mybalances=_0x514f00[_0x4df4fe(0x1ec)];if(!_0x45f2ec)for(const [_0x292bd2,_0x116466]of Object['entries'](mybalances)){_0x2f7390[_0x4df4fe(0x199)](_0x292bd2);}else config[_0x4df4fe(0x1f4)][_0x4df4fe(0x1a0)](_0x1e3360=>{const _0x285a2b=_0x4df4fe;if(!_0x1e3360['excluded'])_0x2f7390[_0x285a2b(0x199)](_0x1e3360[_0x285a2b(0x1d5)]);});if(_0xa8bc25=='')for(const [_0x5da4cc,_0x5bbe28]of Object['entries'](mybalances)){_0x5bbe28[_0x4df4fe(0x24a)]()!=0x0&&_0x18710a[_0x4df4fe(0x199)]({'coin':_0x5da4cc});}else{let _0x5af2b0=![],_0x4f2d98;allOpenOrders=[];for(const [_0x47860a,_0x10b439]of Object['entries'](mybalances)){if(_0x2f7390[_0x4df4fe(0x247)](_0x47860a)){const _0x467a7c=config[_0x4df4fe(0x1f4)]['find'](_0x3a2359=>_0x3a2359[_0x4df4fe(0x1d5)]==_0x47860a),_0x976da9=_0x47860a+'/'+_0xa8bc25,_0x2b213a=_0xa8bc25+'/'+_0x47860a;_0x5af2b0=![];if((_0x10b439[_0x4df4fe(0x24a)]()!=0x0||_0x467a7c)&&(allSymbols[_0x4df4fe(0x247)](_0x976da9)||_0x47860a==_0xa8bc25))_0x47860a!=_0xa8bc25&&(_0xdb58bb['push'](_0x976da9),_0x4f2d98=await exchange[_0x4df4fe(0x1bd)](_0x976da9),_0x4f2d98[_0x4df4fe(0x278)]>0x0&&(_0x5af2b0=!![])),_0x18710a[_0x4df4fe(0x199)]({'coin':_0x47860a,'symbol':_0x976da9,'reverse':![],'number':Math[_0x4df4fe(0x206)](_0x10b439+(_0x467a7c&&_0x467a7c[_0x4df4fe(0x21a)]||0x0),0x0),'order':_0x5af2b0});else(_0x10b439[_0x4df4fe(0x24a)]()!=0x0||_0x467a7c)&&allSymbols[_0x4df4fe(0x247)](_0x2b213a)&&(_0x47860a!=_0xa8bc25&&(_0xdb58bb['push'](_0x2b213a),_0x4f2d98=await exchange[_0x4df4fe(0x1bd)](_0x2b213a),_0x4f2d98[_0x4df4fe(0x278)]>0x0&&(_0x5af2b0=!![])),_0x18710a['push']({'coin':_0x47860a,'symbol':_0x2b213a,'reverse':!![],'number':Math[_0x4df4fe(0x206)](_0x10b439+(_0x467a7c&&_0x467a7c[_0x4df4fe(0x21a)]||0x0),0x0),'order':_0x5af2b0}));}_0x5af2b0&&allOpenOrders[_0x4df4fe(0x199)](_0x4f2d98[0x0]);}allOpenOrders['length']==0x0&&(lockOrders&&validateOrders(_0x4df4fe(0x21c)));}}catch(_0x59a89e){if(!_0x45f2ec){if(_0x59a89e[_0x4df4fe(0x24a)]()[_0x4df4fe(0x247)](_0x4df4fe(0x205)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x59a89e[_0x4df4fe(0x24a)]()[_0x4df4fe(0x247)]('AuthenticationError'))return logHistory(_0x4df4fe(0x1c3),_0x4df4fe(0x210)),![];else{if(_0x59a89e['toString']()[_0x4df4fe(0x247)](_0x4df4fe(0x265)))return logHistory(_0x4df4fe(0x1c3),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x59a89e,'getCoins()');}}}else await handleError(_0x59a89e,'getCoins()');}return _0x18710a;}async function getPortfolio(_0x523cee){const _0x13add5=_0x464585;let _0x151a0f=[],_0xcf7f39=[],_0x1da80c,_0x23ea61=[],_0x236806,_0x3764c1;_0x523cee[_0x13add5(0x211)]==='************'||_0x523cee[_0x13add5(0x1ce)]===_0x13add5(0x172)?(_0x236806=config[_0x13add5(0x211)],_0x3764c1=config[_0x13add5(0x1ce)]):(_0x236806=_0x523cee['apiKey'],_0x3764c1=_0x523cee[_0x13add5(0x1ce)]);await initExchange(_0x236806,_0x3764c1);let _0x45ce16=await loadSymbols();if(_0x45ce16){_0x23ea61=await getCoins(![],_0x523cee[_0x13add5(0x216)]);if(_0x23ea61===![])proxyEmit(_0x13add5(0x1f4),![]);else{if(_0x523cee[_0x13add5(0x216)]=='')proxyEmit('portfolio',_0x23ea61);else{_0x23ea61['forEach'](_0x3c3b90=>{const _0x58c875=_0x13add5;if(_0x3c3b90[_0x58c875(0x1d5)]!=_0x523cee['basecoin'])_0x151a0f['push'](_0x3c3b90[_0x58c875(0x1b9)]);});try{_0xcf7f39=await exchange['fetchTickers'](_0x151a0f);}catch(_0x49c1e3){await handleError(_0x49c1e3,_0x13add5(0x18f));}_0x23ea61[_0x13add5(0x1a0)](_0x448e51=>{const _0x46f8b1=_0x13add5;_0x448e51[_0x46f8b1(0x1d5)]!=_0x523cee[_0x46f8b1(0x216)]?_0x1da80c=_0x448e51['reverse']?0x1/_0xcf7f39[_0x448e51[_0x46f8b1(0x1b9)]][_0x46f8b1(0x254)]:_0xcf7f39[_0x448e51[_0x46f8b1(0x1b9)]][_0x46f8b1(0x254)]:_0x1da80c=0x1,_0x448e51[_0x46f8b1(0x17f)]=formatResult(_0x1da80c,0x8);}),proxyEmit(_0x13add5(0x1f4),_0x23ea61);}}}else proxyEmit(_0x13add5(0x1f4),![]);}function checkMinimums(_0x100026){const _0x50cfb4=_0x464585;let _0x1b72f0=!![];const _0x36f206=!_0x100026['reverse']?markets[_0x100026[_0x50cfb4(0x1b9)]][_0x50cfb4(0x1eb)][_0x50cfb4(0x268)][_0x50cfb4(0x1dd)]:markets[_0x100026[_0x50cfb4(0x1b9)]]['limits'][_0x50cfb4(0x1b8)]['min'],_0x43621b=!_0x100026[_0x50cfb4(0x191)]?markets[_0x100026[_0x50cfb4(0x1b9)]][_0x50cfb4(0x1eb)][_0x50cfb4(0x1b8)]['min']:markets[_0x100026[_0x50cfb4(0x1b9)]][_0x50cfb4(0x1eb)][_0x50cfb4(0x268)][_0x50cfb4(0x1dd)];if(Math[_0x50cfb4(0x1ad)](_0x100026[_0x50cfb4(0x1ba)])<_0x36f206)_0x1b72f0=![];if(Math[_0x50cfb4(0x1ad)](_0x100026['trade'])*_0x100026[_0x50cfb4(0x254)]<_0x43621b)_0x1b72f0=![];if(_0x100026[_0x50cfb4(0x17c)]=='sell'){let _0x323922=config['portfolio'][_0x50cfb4(0x15a)](_0x2dedaf=>_0x2dedaf[_0x50cfb4(0x1d5)]==_0x100026[_0x50cfb4(0x1d5)]);if(_0x323922[_0x50cfb4(0x21a)]>0x0){if(Math[_0x50cfb4(0x1ad)](_0x100026[_0x50cfb4(0x1ba)])>_0x100026[_0x50cfb4(0x177)]-_0x323922['offset'])_0x1b72f0=![];}else{if(Math[_0x50cfb4(0x1ad)](_0x100026['trade'])>_0x100026[_0x50cfb4(0x177)])_0x1b72f0=![];}}if(_0x100026[_0x50cfb4(0x17c)]==_0x50cfb4(0x1d2)){let _0x1bfa81=config[_0x50cfb4(0x1f4)][_0x50cfb4(0x15a)](_0x3ed99a=>_0x3ed99a[_0x50cfb4(0x1d5)]==config['basecoin']),_0x797818=currentCoins[_0x50cfb4(0x15a)](_0x4cd233=>_0x4cd233[_0x50cfb4(0x1d5)]==config[_0x50cfb4(0x216)]);if(_0x1bfa81['offset']>0x0){if(Math[_0x50cfb4(0x1ad)](_0x100026[_0x50cfb4(0x1ba)])*_0x100026[_0x50cfb4(0x254)]>_0x797818['number']-_0x1bfa81[_0x50cfb4(0x21a)])_0x1b72f0=![];}else{if(Math[_0x50cfb4(0x1ad)](_0x100026['trade'])*_0x100026[_0x50cfb4(0x254)]>_0x797818['number'])_0x1b72f0=![];}}return _0x1b72f0;}async function getBalances(){const _0x32065f=_0x464585;let _0x66edd4=0x0,_0x14ed55;const _0x4596db=config[_0x32065f(0x274)];if(config[_0x32065f(0x1e0)]&&config[_0x32065f(0x1a2)]<0x0)await validate24hChanges();currentCoins[_0x32065f(0x1a0)](_0x3fa726=>{const _0x514d47=_0x32065f;if(_0x3fa726[_0x514d47(0x1d5)]!=config[_0x514d47(0x216)]){let _0x333bb0=global[_0x514d47(0x26b)][noslash(_0x3fa726[_0x514d47(0x1b9)])];_0x14ed55=_0x3fa726['reverse']?0x1/_0x333bb0:_0x333bb0;}else _0x14ed55=0x1;let _0x37a1e8=_0x3fa726[_0x514d47(0x177)]*_0x14ed55;_0x66edd4+=_0x37a1e8,_0x3fa726[_0x514d47(0x254)]=formatResult(Number(_0x14ed55),0x8),_0x3fa726['value']=_0x37a1e8;}),currentCoins['forEach'](_0x2a9df2=>{const _0x4f1b79=_0x32065f;let _0x7b22d3=config['portfolio'][_0x4f1b79(0x15a)](_0xb0662d=>_0xb0662d[_0x4f1b79(0x1d5)]==_0x2a9df2[_0x4f1b79(0x1d5)]),_0x3e655a=Number(_0x7b22d3['distribution']),_0x4e16cb=_0x2a9df2[_0x4f1b79(0x158)]/_0x66edd4*0x64,_0x4ee792=_0x3e655a*_0x66edd4/0x64/_0x2a9df2[_0x4f1b79(0x254)]-_0x2a9df2[_0x4f1b79(0x177)];_0x2a9df2[_0x4f1b79(0x1a1)]=formatResult(_0x4e16cb,0x3),_0x2a9df2[_0x4f1b79(0x1ef)]=formatResult(_0x3e655a,0x3),_0x2a9df2[_0x4f1b79(0x1ba)]=formatResult(_0x4ee792,0x8),_0x2a9df2['side']='',_0x2a9df2['valid']=![];if(_0x2a9df2[_0x4f1b79(0x1d5)]!=config[_0x4f1b79(0x216)]){if(_0x2a9df2[_0x4f1b79(0x1a1)]>_0x3e655a)_0x2a9df2[_0x4f1b79(0x17c)]=_0x4f1b79(0x266),_0x2a9df2[_0x4f1b79(0x1d7)]=checkMinimums(_0x2a9df2);else _0x2a9df2['distribution']<_0x3e655a&&(_0x2a9df2['side']=_0x4f1b79(0x1d2),_0x2a9df2[_0x4f1b79(0x1d7)]=checkMinimums(_0x2a9df2));}_0x2a9df2['delta']=_0x2a9df2['distribution']/_0x2a9df2[_0x4f1b79(0x1ef)]-0x1;}),currentCoins[_0x32065f(0x196)]((_0x29b7d7,_0x5b8314)=>_0x29b7d7['delta']<_0x5b8314[_0x32065f(0x16e)]?0x1:_0x5b8314['delta']<_0x29b7d7['delta']?-0x1:0x0);const _0xd2cc8d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xd2cc8d[_0x32065f(0x1df)],'usd':_0xd2cc8d[_0x32065f(0x184)],'portfolio':JSON[_0x32065f(0x1fd)](currentCoins),'threshold':_0x4596db},proxyEmit(_0x32065f(0x170),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x32065f(0x1e0)])headlessMode({'portfolio':currentCoins,'threshold':_0x4596db});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x4596db});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x3972(_0x331641,_0x32a9e7){const _0x14c94d=_0x4c43();return _0x3972=function(_0x496627,_0x4d30cd){_0x496627=_0x496627-0x156;let _0x4c4375=_0x14c94d[_0x496627];return _0x4c4375;},_0x3972(_0x331641,_0x32a9e7);}async function storePerformance(){const _0x4ac522=_0x464585;if(!lastBalances)return;let _0x14bb39=[],_0x32f916,_0x1632f7=JSON[_0x4ac522(0x1e8)](lastBalances[_0x4ac522(0x1f4)]);_0x1632f7['sort']((_0x5bbc30,_0x57a391)=>_0x5bbc30[_0x4ac522(0x1d5)]>_0x57a391[_0x4ac522(0x1d5)]?0x1:_0x57a391[_0x4ac522(0x1d5)]>_0x5bbc30[_0x4ac522(0x1d5)]?-0x1:0x0),_0x1632f7[_0x4ac522(0x1a0)](_0x1d2fbc=>{const _0x184d31=_0x4ac522;let _0x8e78b0={'coin':_0x1d2fbc[_0x184d31(0x1d5)],'number':_0x1d2fbc['number'],'price':_0x1d2fbc[_0x184d31(0x254)]};_0x14bb39[_0x184d31(0x199)](_0x8e78b0);});const _0x7b8d46=await getFiat();_0x32f916={'date':lastBalances[_0x4ac522(0x18d)]['split']('\x20')[0x0],'eur':_0x7b8d46['eur'],'usd':_0x7b8d46[_0x4ac522(0x184)],'coins':_0x14bb39};let _0x1617ac=dbPerformance[_0x4ac522(0x241)](_0x4ac522(0x1e2))[_0x4ac522(0x15a)]({'date':_0x32f916['date']})[_0x4ac522(0x158)]();_0x1617ac?_0x32f916[_0x4ac522(0x1e3)]!=config[_0x4ac522(0x248)]&&dbPerformance['get'](_0x4ac522(0x1e2))[_0x4ac522(0x15a)]({'date':_0x32f916[_0x4ac522(0x1e3)]})[_0x4ac522(0x20c)](_0x32f916)[_0x4ac522(0x249)]():dbPerformance[_0x4ac522(0x241)](_0x4ac522(0x1e2))[_0x4ac522(0x199)](_0x32f916)[_0x4ac522(0x249)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3df28e=_0x464585;let _0x4caa89=[];if(dbPerformance[_0x3df28e(0x1c6)](_0x3df28e(0x1e2))[_0x3df28e(0x158)]()){let _0x4e8b03=dbPerformance[_0x3df28e(0x241)](_0x3df28e(0x1e2))[_0x3df28e(0x23b)]()[_0x3df28e(0x231)]('date')[_0x3df28e(0x158)](),_0x4d0812=[...config[_0x3df28e(0x181)]];_0x4d0812[_0x3df28e(0x196)]((_0x2c556e,_0x382119)=>_0x2c556e[_0x3df28e(0x1e3)]>_0x382119[_0x3df28e(0x1e3)]?-0x1:_0x382119[_0x3df28e(0x1e3)]>_0x2c556e[_0x3df28e(0x1e3)]?0x1:0x0);let _0x2d7b64=0x1,_0x1ad1d6=[],_0x22661e=0x0;_0x4e8b03[_0x3df28e(0x20e)]()[_0x3df28e(0x191)]()[_0x3df28e(0x1a0)]((_0xbb484b,_0x160a2e)=>{const _0x43ce74=_0x3df28e;if(_0x4d0812[_0x22661e]){if(_0x4e8b03[_0x4e8b03[_0x43ce74(0x278)]-_0x160a2e]&&_0x4d0812[_0x22661e]['date']==_0x4e8b03[_0x4e8b03[_0x43ce74(0x278)]-_0x160a2e][_0x43ce74(0x1e3)]){if(_0x160a2e<_0x4e8b03[_0x43ce74(0x278)]){let _0x428526=0x0,_0x2ef6bb=0x0;_0x4e8b03[_0x4e8b03[_0x43ce74(0x278)]-_0x160a2e]['coins'][_0x43ce74(0x1a0)](_0x3c378a=>{const _0x60653b=_0x43ce74;_0x2ef6bb+=_0x3c378a['number']*_0x3c378a[_0x60653b(0x17f)];}),_0x4d0812[_0x22661e][_0x43ce74(0x262)][_0x43ce74(0x1a0)](_0x450565=>{const _0x562d46=_0x43ce74;_0x428526+=_0x450565[_0x562d46(0x177)]*_0x450565['price'];}),_0x2d7b64*=_0x428526/(_0x2ef6bb-_0x428526)+0x1;}_0x22661e++;}}let _0x3bd71e=0x0;_0xbb484b[_0x43ce74(0x20b)]['forEach'](_0x269043=>{const _0x5a6dee=_0x43ce74;_0x3bd71e+=_0x269043[_0x5a6dee(0x177)]*_0x269043['price'];}),_0x1ad1d6[_0x4e8b03[_0x43ce74(0x278)]-_0x160a2e-0x1]=_0x3bd71e*(_0x2d7b64-0x1);});let _0x32ce96=[];_0x4d0812=[...config[_0x3df28e(0x181)]]||[];let _0xcc6cdc=0x0;_0x22661e=0x0,_0x4e8b03['forEach']((_0x4cb385,_0x2ed910)=>{const _0x5ad9bb=_0x3df28e;if(_0x4d0812[_0x22661e]){const _0x199787=fns['parse'](_0x4d0812[_0x22661e][_0x5ad9bb(0x1e3)],_0x5ad9bb(0x27e),new Date()),_0x314f87=fns['parse'](_0x4cb385['date'],_0x5ad9bb(0x27e),new Date());if(fns[_0x5ad9bb(0x24b)](_0x199787,_0x314f87)){let _0x49e213=0x0;_0x4d0812[_0x22661e]['changes']['forEach'](_0x56fb95=>{const _0x3550da=_0x5ad9bb;!_0x32ce96[_0x56fb95[_0x3550da(0x1d5)]]?_0x32ce96[_0x56fb95[_0x3550da(0x1d5)]]=_0x56fb95[_0x3550da(0x177)]:(_0x49e213=_0x32ce96[_0x56fb95[_0x3550da(0x1d5)]],_0x32ce96[_0x56fb95[_0x3550da(0x1d5)]]+=_0x56fb95[_0x3550da(0x177)]);const _0x3e51df=_0x4cb385[_0x3550da(0x20b)]['find'](_0xe3def6=>_0xe3def6[_0x3550da(0x1d5)]==_0x56fb95[_0x3550da(0x1d5)]);(!_0x3e51df||_0x3e51df[_0x3550da(0x177)]==0x0)&&(_0xcc6cdc+=(-_0x56fb95['number']-_0x49e213)*_0x56fb95[_0x3550da(0x17f)]);}),_0x22661e++;}}_0x4cb385[_0x5ad9bb(0x20b)][_0x5ad9bb(0x1a0)]((_0x5748c8,_0x3a2b51)=>{const _0x14fe5f=_0x5ad9bb;_0x32ce96[_0x5748c8[_0x14fe5f(0x1d5)]]&&(_0x5748c8={..._0x5748c8,'initial':_0x32ce96[_0x5748c8[_0x14fe5f(0x1d5)]]}),_0x4cb385[_0x14fe5f(0x20b)][_0x3a2b51]=_0x5748c8;}),_0x4caa89['push']({'date':_0x4cb385[_0x5ad9bb(0x1e3)],'eur':_0x4cb385[_0x5ad9bb(0x1df)],'usd':_0x4cb385[_0x5ad9bb(0x184)],'offset':_0x1ad1d6[_0x2ed910],'netoffset':_0xcc6cdc,'coins':_0x4cb385[_0x5ad9bb(0x20b)]});});}return _0x4caa89;}function emitPerformance(_0x5c9b7e){const _0x5ca1e8=_0x464585;_0x5c9b7e['length']!==0x0?(proxyEmit(_0x5ca1e8(0x1f1),_0x5c9b7e),lastPerformanceEmitted=getDate()):proxyEmit(_0x5ca1e8(0x1f1),[]);}function getPerf(_0x7447f9,_0x323b7e){const _0x2a7da5=_0x464585;let _0xd839=0x0,_0x547b66=0x0,_0x49facf=0x0;_0x7447f9[_0x2a7da5(0x20b)][_0x2a7da5(0x1a0)](_0x3cf423=>{const _0x11ddf1=_0x2a7da5;_0xd839+=_0x3cf423[_0x11ddf1(0x177)]*_0x3cf423[_0x11ddf1(0x17f)];});_0x323b7e&&(_0xd839+=_0x7447f9[_0x2a7da5(0x21a)]);if(config['basecoin']===_0x2a7da5(0x1b2)||config[_0x2a7da5(0x216)]==='ETH')_0x547b66=_0xd839*_0x7447f9[_0x2a7da5(0x1df)],_0x49facf=_0xd839*_0x7447f9[_0x2a7da5(0x184)];else{if(config['basecoin']===_0x2a7da5(0x171)||config[_0x2a7da5(0x216)]===_0x2a7da5(0x1a9)||config[_0x2a7da5(0x216)]===_0x2a7da5(0x1ee))_0x547b66=_0xd839*_0x7447f9[_0x2a7da5(0x1df)]/_0x7447f9[_0x2a7da5(0x184)],_0x49facf=_0xd839;else config[_0x2a7da5(0x216)]===_0x2a7da5(0x218)&&(_0x547b66=_0xd839,_0x49facf=_0xd839*_0x7447f9[_0x2a7da5(0x184)]/_0x7447f9[_0x2a7da5(0x1df)]);}return[_0xd839,_0x547b66,_0x49facf];}async function getStartingBalances(_0x5eeae9,_0x3e7ca6=!![]){const _0x5f45d9=_0x464585;if(_0x5eeae9['length']!==0x0){const [_0xbaeddf,_0x2766a1,_0x4791d2]=getPerf(_0x5eeae9[0x0],!![]);let _0x13fe02=[];config[_0x5f45d9(0x1f4)][_0x5f45d9(0x1a0)](_0x5910ab=>{const _0x5d2f5e=_0x5f45d9;let _0x1f29d1=0x0,_0x25d559;config[_0x5d2f5e(0x181)][_0x5d2f5e(0x1a0)](_0x51cc4d=>{const _0x5e40de=_0x5d2f5e;let _0x5b214b=_0x51cc4d['changes'][_0x5e40de(0x15a)](_0x37de38=>_0x37de38[_0x5e40de(0x1d5)]==_0x5910ab['coin']);if(_0x5b214b){_0x1f29d1+=_0x5b214b['number'];if(!_0x25d559)_0x25d559=_0x5b214b[_0x5e40de(0x17f)];}}),_0x13fe02[_0x5d2f5e(0x199)]({'coin':_0x5910ab[_0x5d2f5e(0x1d5)],'number':_0x1f29d1,'initialprice':_0x25d559});});const _0x4f9c72={'basecoin':_0xbaeddf,'eur':_0x2766a1,'usd':_0x4791d2,'coins':_0x13fe02};if(_0x3e7ca6)proxyEmit(_0x5f45d9(0x275),_0x4f9c72);return _0x4f9c72;}}function headlessMode(_0x235b39){const _0x32e039=_0x464585;let _0x461206=_0x235b39[_0x32e039(0x1f4)],_0x4b3ac8=_0x235b39[_0x32e039(0x274)],_0x305ee2=[];for(let _0x27c6b6 of _0x461206){if(_0x27c6b6[_0x32e039(0x1d5)]!=config[_0x32e039(0x216)]){if(_0x27c6b6[_0x32e039(0x16e)]>=_0x4b3ac8/0x64){if(_0x27c6b6[_0x32e039(0x1d7)])_0x305ee2[_0x32e039(0x199)](_0x27c6b6);}else{if(_0x27c6b6[_0x32e039(0x16e)]<=-_0x4b3ac8/0x64){if(_0x27c6b6[_0x32e039(0x1d7)])_0x305ee2[_0x32e039(0x199)](_0x27c6b6);}}}}_0x305ee2[_0x32e039(0x278)]>0x0&&placeOrder(_0x305ee2);}function notifyBalance(_0x4445f4){const _0x21df59=_0x464585;let _0x2704ac=_0x4445f4[_0x21df59(0x1f4)],_0x99d64a=_0x4445f4[_0x21df59(0x274)],_0x1b0904=[];for(let _0x4e6112 of _0x2704ac){if(_0x4e6112[_0x21df59(0x1d5)]!=config['basecoin']){if(_0x4e6112[_0x21df59(0x16e)]>=_0x99d64a/0x64){if(_0x4e6112['valid'])_0x1b0904['push'](_0x4e6112);}else{if(_0x4e6112[_0x21df59(0x16e)]<=-_0x99d64a/0x64){if(_0x4e6112[_0x21df59(0x1d7)])_0x1b0904['push'](_0x4e6112);}}}}if(_0x1b0904[_0x21df59(0x278)]>0x0){let _0x38081f=_0x1b0904[_0x21df59(0x1d1)](_0x554f80=>_0x554f80['coin']);_0x38081f[_0x21df59(0x196)]();let _0xa5dcfe=_0x38081f[_0x21df59(0x23d)](',\x20');if(lastCoinsToBalance!==_0xa5dcfe)logHistory(_0x21df59(0x280),_0x21df59(0x1c2)+_0xa5dcfe);lastCoinsToBalance=_0xa5dcfe;}}function symbolToCoin(_0x5605fc){const _0xcae6b6=_0x464585;let _0x1c1310;if(_0x5605fc['includes']('/'+config[_0xcae6b6(0x216)]))_0x1c1310=_0x5605fc['replace']('/'+config[_0xcae6b6(0x216)],'');if(_0x5605fc['includes'](config[_0xcae6b6(0x216)]+'/'))_0x1c1310=_0x5605fc[_0xcae6b6(0x246)](config[_0xcae6b6(0x216)]+'/','');return _0x1c1310;}async function validateOrders(_0x28ac9e){const _0x5d5c2f=_0x464585;if(_0x28ac9e)validateOrdersState=_0x28ac9e;let _0xe61044=[],_0x3bba3a=config[_0x5d5c2f(0x1c4)]==_0x5d5c2f(0x23a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5d5c2f(0x17b)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x5d5c2f(0x1a0)](_0x2ae4c4=>{const _0x130794=_0x5d5c2f;let _0x302b60=![];_0x2ae4c4[_0x130794(0x1d9)]>0x0&&(_0x302b60=!![]),_0xe61044[_0x130794(0x199)](_0x302b60),_0x302b60&&config[_0x130794(0x1c4)]!='market'&&logHistory(_0x130794(0x22f),_0x130794(0x194)+_0x2ae4c4[_0x130794(0x1b9)]+'\x20'+_0x2ae4c4['side']+'\x20#'+formatResult(_0x2ae4c4[_0x130794(0x1d9)],0x8)+'\x20@'+formatResult(_0x2ae4c4[_0x130794(0x17f)],0x8));}),_0xe61044[_0x5d5c2f(0x1a0)]((_0x5c1f54,_0x20b7c0)=>{const _0x478939=_0x5d5c2f;if(_0x5c1f54)lastOrders[_0x478939(0x176)](_0x20b7c0,0x1);});const _0x9d7715=coolingDown?_0x5d5c2f(0x251):_0x5d5c2f(0x27c);if(validateOrdersState==_0x5d5c2f(0x16a))validateOrdersState=_0x5d5c2f(0x240),_0xe61044[_0x5d5c2f(0x247)](![])?config['ordertype']==_0x5d5c2f(0x23a)?logHistory(_0x5d5c2f(0x1c3),_0x5d5c2f(0x1ab)):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):lockOrders=![];else{if(validateOrdersState==_0x5d5c2f(0x240)){if(_0xe61044[_0x5d5c2f(0x247)](![])){}else lockOrders=![],config[_0x5d5c2f(0x1c4)]==_0x5d5c2f(0x23a)?logHistory(_0x5d5c2f(0x280),'Order(s)\x20validated\x20-\x20'+_0x9d7715):logHistory(_0x5d5c2f(0x280),'Order(s)\x20filled\x20-\x20'+_0x9d7715);}else{if(validateOrdersState==_0x5d5c2f(0x1c5))lockOrders=![],_0xe61044[_0x5d5c2f(0x247)](![])?config[_0x5d5c2f(0x1c4)]=='market'?logHistory(_0x5d5c2f(0x280),_0x5d5c2f(0x259)+Math[_0x5d5c2f(0x20f)](_0x3bba3a*validateOrderInterval/0xea60)+_0x5d5c2f(0x160)+_0x9d7715):(await cancelOrders(),logHistory('success',_0x5d5c2f(0x26f)+Math['round'](_0x3bba3a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x9d7715)):logHistory(_0x5d5c2f(0x280),_0x5d5c2f(0x1ac)+_0x9d7715),currentCoins=await getCoins();else{if(validateOrdersState==_0x5d5c2f(0x21c)){lockOrders=![];if(config[_0x5d5c2f(0x1c4)]!='market')logHistory(_0x5d5c2f(0x280),'No\x20more\x20open\x20orders\x20-\x20'+_0x9d7715);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x14adcc=>{const _0x264091=_0x3972;try{const _0x135f53=await exchange[_0x264091(0x201)](_0x14adcc[_0x264091(0x269)],_0x14adcc[_0x264091(0x1b9)]);}catch(_0x5812d1){if(_0x5812d1[_0x264091(0x24a)]()[_0x264091(0x247)](_0x264091(0x235))){}else await handleError(_0x5812d1,'cancelOrders()');}});}function _0x4c43(){const _0x18bd88=['startnumber',',\x20must\x20be\x20a\x203\x20digit\x20number',':\x20Bot\x20','loadSymbols()','executionReport','getCloses()','\x20|\x20Binance\x20API\x20secret\x20invalid','apiSecret','\x20has\x20a\x2024h\x20drop\x20of\x20','commission','map','buy','configuration-stored','./config/','coin','formattedMessage','valid','eventTime','filled','argv','args','getTime','min','./version.json','eur','headless','getHours','data','date','botname','reduce','version','ExchangeNotAvailable','parse','\x20-\x20','send','limits','total','toggleBotMode','USDC','target','writeFile','performance','fetchOHLCV','sendPortfolioTelegram','portfolio','spot','-results.json','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','page','yyyy/MM/dd\x20HH:mm:ss','secure','milliseconds','DDoSProtection','stringify','exit','BNB','1794dqOWTS','cancelOrder','logs','MIN_NOTIONAL','Error:\x20Invalid\x20argument\x20','API-key\x20format\x20invalid','max','Pausing\x20for\x20','Carefully\x20evaludate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','remove','bot','coins','assign','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','slice','round','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apiKey','datetime','getSeconds','BNB/','sells','basecoin','padEnd','EUR','2.3.5','offset','Binance\x20not\x20responding','no\x20open\x20orders','shift','binanceus','differenceInCalendarDays','emitHistory','(((.+)+)+)+$','22603GNZJEi','Executed\x20','fromCodePoint','bb-secure.json','initws()','symbols','7953djkTNx','split','wsMarket','recreate','wss://stream.binance.com:9443','Limit\x20(low-margin)','enabled','order','type','sortBy','exchange','privateKey','</pre>','OrderNotFound','progress','RequestTimeout','defaults','emojisell','market','cloneDeep','200hzHbeZ','join','mkdirSync','DAI/','ongoing','get','ccxt','getMinutes','Binance\x20not\x20available\x20(2)','event','replace','includes','startdate','write','toString','isEqual','eachDayOfInterval','starting-balance-','fetchTickers','\x20>\x20','initialprice','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20orders\x20in\x20less\x20than\x20','currency','last','change','NANO/','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','4PPWsnI','Order(s)\x20not\x20validated\x20after\x20','timeshift','getDate','message','startprice','ask','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Order\x20amount\x20is\x20invalid:\x20','wsKey','changes','realized','217078rgIaTp','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','sell','eventType','amount','orderId','fee','ticker','Unknown\x20error\x20occured','excluded','bot-','Unfilled\x20order(s)\x20canceled\x20after\x20','getFiat()','createOrder','buys','Cooldown\x20ended\x20-\x20balancing\x20resumed','threshold','starting-balances','showname','log','length','-config.json','string','closeWs','balancing\x20resumed','4IONGHN','yyyy/MM/dd','Order:\x20','success','subscribeSymbol24hrTicker','binance','WebSockets(','format','accumulatedQuantity','value','getPortfolio','find','coin-loading-progress','loadMarkets','\x20|\x20','getFullYear','breakeven','\x20minutes\x20-\x20','XEM/BUSD','set','limit-high','running','close','limit-low','parseISO','coinamount','hybrid-crypto-js','initial','deleteHistoryAlerts','reconnected','emojibuy','delta','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','balances','BUSD','************','7320sdOwlv','ETH','recreateHistory()','splice','number','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','padStart','decrypt','timeout','side','function','/USDT','price','InvalidNonce','liquidity','cooldown','23155992IHiTnx','usd','apply','subscribeSpotUserDataStream','3080980IRCnfo','timestamp','filter','remainingSymbols','HOT/EUR','keys','time','test','getPortfolio()','API\x20or\x20clock\x20sync\x20issue','reverse','search','-------------------------------\x0a','Order\x20filled:\x20','sha256','sort','kill','subscribeSpotKline','push','differenceInSeconds','configuration','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','bid','\x20|\x20Binance\x20API\x20key\x20invalid','forEach','distribution','change24h','fetchOrders','fees','event-history','cancelLoading','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Market','USDT','limit','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','No\x20more\x20open\x20orders\x20-\x20','abs','3461628XBLkxB','storeConfiguration','\x20hour','priceChangePercent','BTC','Invalid\x20quantity','placeOrder','Binance\x20API\x20blocked','storeHeadless','203913iQezgc','cost','symbol','trade','YOYOW/','-events.json','fetchOpenOrders','kline','getMonth','toFixed','\x20order:\x20','Manual\x20balancing\x20required:\x20','error','ordertype','final','has'];_0x4c43=function(){return _0x18bd88;};return _0x4c43();}async function resetCoinResults(){const _0x100ca0=_0x464585;dbCoinResults['get'](_0x100ca0(0x20b))[_0x100ca0(0x209)]()[_0x100ca0(0x249)]();let _0x525a5c=await getStartingBalances(getNormalizedPerformance(),![]);_0x525a5c[_0x100ca0(0x20b)][_0x100ca0(0x1a0)](_0x5313b2=>{const _0x49eb15=_0x100ca0;if(_0x5313b2[_0x49eb15(0x1d5)]!=config['basecoin']){let _0x3ffe01={'coin':_0x5313b2[_0x49eb15(0x1d5)],'number':_0x5313b2[_0x49eb15(0x177)],'breakeven':formatResult(_0x5313b2[_0x49eb15(0x250)],0x8),'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x49eb15(0x241)]('coins')[_0x49eb15(0x199)](_0x3ffe01)[_0x49eb15(0x249)]();}});}async function updateCoinResults(_0x51cbd2){const _0x4bc9ac=_0x464585;let _0x1c9b68,_0x57d9f9,_0x1e1bfa,_0x4162bd,_0x5c39af,_0x27519c,_0x145c67=dbCoinResults[_0x4bc9ac(0x241)](_0x4bc9ac(0x20b))[_0x4bc9ac(0x15a)]({'coin':_0x51cbd2[_0x4bc9ac(0x1d5)]})[_0x4bc9ac(0x158)]();if(!_0x145c67)return;if(_0x51cbd2[_0x4bc9ac(0x26a)]&&_0x51cbd2[_0x4bc9ac(0x26a)][_0x4bc9ac(0x253)]==config['basecoin'])_0x1c9b68=_0x51cbd2[_0x4bc9ac(0x26a)][_0x4bc9ac(0x1b8)];else{if(_0x51cbd2['fee']&&_0x51cbd2[_0x4bc9ac(0x26a)][_0x4bc9ac(0x253)]==_0x4bc9ac(0x1ff))_0x1c9b68=_0x51cbd2['fee'][_0x4bc9ac(0x1b8)]*global[_0x4bc9ac(0x26b)][_0x4bc9ac(0x1ff)+config[_0x4bc9ac(0x216)]];else _0x1c9b68=defaultFee*_0x51cbd2[_0x4bc9ac(0x1d9)];}_0x51cbd2[_0x4bc9ac(0x191)]&&(_0x27519c={'coin':_0x51cbd2['coin'],'symbol':_0x51cbd2[_0x4bc9ac(0x1b9)],'filled':_0x51cbd2[_0x4bc9ac(0x1d9)]*_0x51cbd2[_0x4bc9ac(0x17f)],'amount':_0x51cbd2['filled']*_0x51cbd2[_0x4bc9ac(0x17f)],'side':_0x51cbd2[_0x4bc9ac(0x17c)]=='sell'?_0x4bc9ac(0x1d2):_0x4bc9ac(0x266),'price':0x1/_0x51cbd2[_0x4bc9ac(0x17f)]},_0x51cbd2={..._0x51cbd2,..._0x27519c});_0x51cbd2[_0x4bc9ac(0x17c)]==_0x4bc9ac(0x1d2)?_0x1e1bfa=(_0x145c67[_0x4bc9ac(0x15f)]*_0x145c67[_0x4bc9ac(0x177)]+_0x51cbd2[_0x4bc9ac(0x17f)]*_0x51cbd2[_0x4bc9ac(0x1d9)])/(_0x145c67['number']+_0x51cbd2[_0x4bc9ac(0x1d9)]):_0x1e1bfa=(_0x145c67[_0x4bc9ac(0x15f)]*_0x145c67[_0x4bc9ac(0x177)]-_0x51cbd2['price']*_0x51cbd2[_0x4bc9ac(0x1d9)])/(_0x145c67['number']-_0x51cbd2['filled']);_0x51cbd2[_0x4bc9ac(0x17c)]=='buy'?_0x4162bd=_0x145c67[_0x4bc9ac(0x263)]:_0x4162bd=_0x145c67[_0x4bc9ac(0x263)]+(_0x51cbd2[_0x4bc9ac(0x17f)]-_0x145c67['breakeven'])*_0x51cbd2[_0x4bc9ac(0x1d9)];const _0x36a224=currentCoins[_0x4bc9ac(0x15a)](_0x2c1b23=>_0x2c1b23[_0x4bc9ac(0x1d5)]==_0x51cbd2['coin']);_0x57d9f9=_0x36a224['number'],_0x5c39af=(_0x51cbd2[_0x4bc9ac(0x17f)]-_0x1e1bfa)*_0x57d9f9;let _0x355d48={'coin':_0x51cbd2[_0x4bc9ac(0x1d5)],'number':_0x57d9f9,'breakeven':formatResult(_0x1e1bfa,0x8),'realized':formatResult(_0x4162bd,0x8),'unrealized':formatResult(_0x5c39af,0x8),'fees':formatResult(_0x145c67[_0x4bc9ac(0x1a4)]+_0x1c9b68,0x8),'sells':_0x51cbd2[_0x4bc9ac(0x17c)]=='sell'?_0x145c67[_0x4bc9ac(0x215)]+0x1:_0x145c67[_0x4bc9ac(0x215)],'buys':_0x51cbd2['side']==_0x4bc9ac(0x1d2)?_0x145c67[_0x4bc9ac(0x272)]+0x1:_0x145c67['buys']};dbCoinResults['get'](_0x4bc9ac(0x20b))[_0x4bc9ac(0x15a)]({'coin':_0x51cbd2[_0x4bc9ac(0x1d5)]})[_0x4bc9ac(0x20c)](_0x355d48)[_0x4bc9ac(0x249)]();if(_0x51cbd2['fee']&&_0x51cbd2[_0x4bc9ac(0x26a)]['currency']=='BNB'){const _0x3b6a5b=currentCoins['find'](_0x2c02f3=>_0x2c02f3[_0x4bc9ac(0x1d5)]==_0x4bc9ac(0x1ff));if(_0x3b6a5b){_0x57d9f9=_0x3b6a5b[_0x4bc9ac(0x177)];let _0x59c360=dbCoinResults['get'](_0x4bc9ac(0x20b))['find']({'coin':_0x4bc9ac(0x1ff)})['value']();_0x355d48={..._0x59c360,'number':_0x57d9f9},dbCoinResults[_0x4bc9ac(0x241)]('coins')[_0x4bc9ac(0x15a)]({'coin':_0x4bc9ac(0x1ff)})[_0x4bc9ac(0x20c)](_0x355d48)[_0x4bc9ac(0x249)]();}}}async function placeOrder(_0x57f148){const _0x1b24e4=_0x464585,_0x2d6a2d=config[_0x1b24e4(0x1c4)]==_0x1b24e4(0x23a)?_0x1b24e4(0x23a):_0x1b24e4(0x1aa);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x501610 of _0x57f148){let _0x17d4f0,_0x1d1d4b,_0x424070,_0x2c7ac3,_0x31edb9,_0x34a0ee=_0x501610[_0x1b24e4(0x1b9)];try{const _0x549e27=await exchange[_0x1b24e4(0x24e)]([_0x34a0ee]),_0x48e950=_0x549e27[_0x34a0ee];_0x17d4f0=_0x501610[_0x1b24e4(0x191)]?0x1/_0x501610[_0x1b24e4(0x254)]:_0x501610[_0x1b24e4(0x254)],_0x1d1d4b=_0x48e950[_0x1b24e4(0x19e)],_0x424070=_0x48e950[_0x1b24e4(0x25e)];_0x501610[_0x1b24e4(0x191)]?(_0x2c7ac3=_0x501610[_0x1b24e4(0x17c)]=='buy'?_0x1b24e4(0x266):'buy',_0x31edb9=Math['abs'](_0x501610[_0x1b24e4(0x1ba)])/_0x17d4f0):(_0x2c7ac3=_0x501610[_0x1b24e4(0x17c)],_0x31edb9=Math[_0x1b24e4(0x1ad)](_0x501610[_0x1b24e4(0x1ba)]));_0x2d6a2d==_0x1b24e4(0x1aa)&&(config[_0x1b24e4(0x1c4)]==_0x1b24e4(0x163)&&(_0x17d4f0=_0x2c7ac3==_0x1b24e4(0x1d2)?_0x1d1d4b:_0x424070),config['ordertype']==_0x1b24e4(0x166)&&(_0x17d4f0=_0x2c7ac3==_0x1b24e4(0x1d2)?_0x424070:_0x1d1d4b));_0x31edb9=formatResult(_0x31edb9,0x8),_0x17d4f0=formatResult(_0x17d4f0,0x8);const _0xf3a310=await exchange[_0x1b24e4(0x271)](_0x34a0ee,_0x2d6a2d,_0x2c7ac3,_0x31edb9,_0x17d4f0);lastOrders[_0x1b24e4(0x199)]({'orderId':_0xf3a310['id'],'symbol':_0x34a0ee,'coin':_0x501610[_0x1b24e4(0x1d5)],'side':_0x2c7ac3,'reverse':_0x501610[_0x1b24e4(0x191)],'amount':_0xf3a310[_0x1b24e4(0x268)],'filled':0x0,'price':_0xf3a310[_0x1b24e4(0x17f)],'fee':_0xf3a310[_0x1b24e4(0x26a)]});const _0x73924=_0x2c7ac3==_0x1b24e4(0x266)?config[_0x1b24e4(0x239)]?String[_0x1b24e4(0x224)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x1b24e4(0x16d)])+'\x20':'',_0x8c474f=_0x2d6a2d==_0x1b24e4(0x23a)?_0x1b24e4(0x1a8):config['ordertype']==_0x1b24e4(0x163)?'Limit\x20(high-margin)':_0x1b24e4(0x22d);if(_0x2d6a2d=='market')logHistory(_0x1b24e4(0x22f),''+_0x73924+_0x8c474f+_0x1b24e4(0x1c1)+_0x34a0ee+'\x20'+_0x2c7ac3+'\x20#'+formatResult(_0xf3a310[_0x1b24e4(0x1d9)],0x8)+'\x20@'+formatResult(_0xf3a310[_0x1b24e4(0x17f)],0x8));else logHistory('order',''+_0x73924+_0x8c474f+_0x1b24e4(0x1c1)+_0x34a0ee+'\x20'+_0x2c7ac3+'\x20#'+formatResult(_0xf3a310[_0x1b24e4(0x268)],0x8)+'\x20@'+formatResult(_0xf3a310[_0x1b24e4(0x17f)],0x8));let _0x21453b=currentCoins[_0x1b24e4(0x15a)](_0x403068=>_0x403068[_0x1b24e4(0x1d5)]==_0x501610[_0x1b24e4(0x1d5)]);_0x21453b[_0x1b24e4(0x22f)]=!![];if(config[_0x1b24e4(0x182)]!=0x0){let _0x407753=null;if(cooldownTracker[_0x1b24e4(0x278)]==config[_0x1b24e4(0x182)]-0x1)_0x407753=cooldownTracker[_0x1b24e4(0x21d)]();const _0x5b2eeb=getTimeStamp();cooldownTracker['push'](_0x5b2eeb);if(_0x407753){const _0x27b018=fns[_0x1b24e4(0x19a)](new Date(_0x5b2eeb),new Date(_0x407753));if(_0x27b018<cooldownInterval){logHistory(_0x1b24e4(0x1c3),_0x1b24e4(0x223)+config['cooldown']+_0x1b24e4(0x252)+cooldownInterval/0x3c+_0x1b24e4(0x25f)+cooldownPeriod/(0xe10*0x3e8)+_0x1b24e4(0x1b0)),coolingDown=!![];break;}}}}catch(_0x13273f){if(_0x13273f[_0x1b24e4(0x24a)]()['includes'](_0x1b24e4(0x203)))logHistory('error',_0x1b24e4(0x257)+_0x34a0ee);else{if(_0x13273f[_0x1b24e4(0x24a)]()[_0x1b24e4(0x247)](_0x1b24e4(0x1b3)))logHistory(_0x1b24e4(0x1c3),_0x1b24e4(0x260)+_0x34a0ee);else await handleError(_0x13273f,'placeOrder()',_0x34a0ee);}}}if(lastOrders[_0x1b24e4(0x278)]!=0x0){lockOrders=!![],validateOrdersState='initial';const _0x4ead34=config[_0x1b24e4(0x1c4)]==_0x1b24e4(0x23a)?validateOrderTimeout*0x3c*0x3e8:config[_0x1b24e4(0x17b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36a651=_0x1b24e4;validateOrders(_0x36a651(0x1c5));},_0x4ead34);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1b24e4(0x280),_0x1b24e4(0x273)));}else{if(coolingDown)!config[_0x1b24e4(0x1e0)]&&logHistory(_0x1b24e4(0x1c3),_0x1b24e4(0x16f));else lockOrders&&(!config[_0x1b24e4(0x1e0)]&&(config['ordertype']==_0x1b24e4(0x23a)?logHistory(_0x1b24e4(0x1c3),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x1b24e4(0x1c3),_0x1b24e4(0x1f7))));}}function restoreOrders(){const _0x3c2682=_0x464585;let _0xe67e6a;lockOrders=!![],validateOrdersState='ongoing',currentCoins[_0x3c2682(0x1a0)](_0x127545=>{const _0x1ec3ed=_0x3c2682,_0x3a3fa9=allOpenOrders[_0x1ec3ed(0x15a)](_0x2a6ad1=>_0x2a6ad1[_0x1ec3ed(0x1b9)]==_0x127545[_0x1ec3ed(0x1b9)]);_0x3a3fa9&&(lastOrders[_0x1ec3ed(0x199)]({'orderId':_0x3a3fa9['id'],'symbol':_0x127545[_0x1ec3ed(0x1b9)],'coin':_0x127545['coin'],'side':_0x3a3fa9['side'],'reverse':_0x127545[_0x1ec3ed(0x191)],'amount':_0x3a3fa9['amount'],'filled':0x0,'price':_0x3a3fa9[_0x1ec3ed(0x17f)],'fee':_0x3a3fa9[_0x1ec3ed(0x26a)]}),_0x127545[_0x1ec3ed(0x22f)]=!![],_0xe67e6a=_0x3a3fa9['timestamp']);});const _0x28e604=new Date()['getTime'](),_0x53b128=config['ordertype']==_0x3c2682(0x23a)?validateOrderTimeout*0x3c*0x3e8:config[_0x3c2682(0x17b)]*0x3c*0x3e8;if(_0xe67e6a+_0x53b128>_0x28e604){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x59a50a=_0x3c2682;validateOrders(_0x59a50a(0x1c5));},_0xe67e6a+_0x53b128-_0x28e604);}else validateOrders(_0x3c2682(0x1c5));}function sendPortfolioTelegram(){const _0xbf25ce=_0x464585,_0x411a77=['EUR',_0xbf25ce(0x171),'USDT','USDC'],_0xbde86=_0x411a77[_0xbf25ce(0x247)](config[_0xbf25ce(0x216)])?0x2:0x8;let _0x52992d='<pre>';_0x52992d+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x52992d+=_0xbf25ce(0x193),currentCoins[_0xbf25ce(0x1a0)](_0x402160=>{const _0x169126=_0xbf25ce;_0x52992d+=_0x402160[_0x169126(0x1d5)][_0x169126(0x217)](0x7)+'|\x20'+formatPad(_0x402160[_0x169126(0x1a1)],0x2,0x6)+'|\x20'+formatPad(_0x402160['target'],0x2,0x6)+'|\x20'+formatPad(_0x402160[_0x169126(0x16e)]*0x64,0x2,0x6)+'\x0a';}),_0x52992d+=_0xbf25ce(0x234),process['send']({'telegrammsg':_0x52992d},_0xb7833f=>{});}function formatPad(_0x32ba81,_0xd2d5d5,_0x19af1d){const _0x40ddc1=_0x464585,_0x1dd516=formatResultString(_0x32ba81,_0xd2d5d5);return _0x1dd516?_0x1dd516[_0x40ddc1(0x179)](_0x19af1d):''['padStart'](_0x19af1d);}function logHistory(_0x1c292b,_0x1c7332,_0x106d79=''){const _0x43090f=_0x464585;let _0x5acbb6={'time':getTimeStamp(),'type':_0x1c292b,'event':_0x1c7332};dbLogs[_0x43090f(0x241)](_0x43090f(0x202))['push'](_0x5acbb6)[_0x43090f(0x249)]();if(_0x106d79=='')_0x106d79=_0x1c7332;proxyEmit('event',{'log':_0x5acbb6,'summary':_0x106d79}),process[_0x43090f(0x1ea)]({'telegram':{..._0x5acbb6,'botname':config[_0x43090f(0x1e4)],'showname':config[_0x43090f(0x276)]}},_0xe729fc=>{}),logging(''+_0x5acbb6[_0x43090f(0x245)]);}function emitHistory(_0x5c0048={}){const _0x2ceced=_0x464585;Object[_0x2ceced(0x18c)](_0x5c0048)[_0x2ceced(0x278)]==0x0&&(_0x5c0048={'type':[_0x2ceced(0x22f),'event'],'event':'','page':0x1});if(_0x5c0048[_0x2ceced(0x230)]['includes'](_0x2ceced(0x245)))_0x5c0048['type']['splice'](_0x5c0048[_0x2ceced(0x230)]['indexOf'](_0x2ceced(0x245)),0x1,'error',_0x2ceced(0x280));if(dbLogs[_0x2ceced(0x1c6)](_0x2ceced(0x202))[_0x2ceced(0x158)]()){let _0x7718e4=dbLogs[_0x2ceced(0x241)](_0x2ceced(0x202))[_0x2ceced(0x189)](_0x3b3694=>{const _0x8c271c=_0x2ceced;if(_0x5c0048[_0x8c271c(0x230)][_0x8c271c(0x278)]==0x0)return![];else return _0x5c0048['type'][_0x8c271c(0x247)](_0x3b3694[_0x8c271c(0x230)]);})[_0x2ceced(0x189)](_0x3e4c38=>{const _0x496d6b=_0x2ceced;if(_0x5c0048['event']=='')return!![];else return _0x3e4c38['event']['toLowerCase']()['includes'](_0x5c0048[_0x496d6b(0x245)]['toLowerCase']());})[_0x2ceced(0x231)](_0x2ceced(0x18d)),_0x176552=_0x7718e4[_0x2ceced(0x158)]()[_0x2ceced(0x278)];_0x7718e4=_0x7718e4[_0x2ceced(0x191)]()[_0x2ceced(0x20e)]((_0x5c0048[_0x2ceced(0x1f8)]-0x1)*logPageSize,_0x5c0048[_0x2ceced(0x1f8)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x2ceced(0x1a5),{'logs':_0x7718e4,'total':_0x176552});}else proxyEmit(_0x2ceced(0x1a5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3d4e98){const _0x1709c2=_0x464585;if(dbLogs[_0x1709c2(0x1c6)](_0x1709c2(0x202))[_0x1709c2(0x158)]()){const _0x3c7580=dbLogs['get']('logs')[_0x1709c2(0x231)]('time')[_0x1709c2(0x189)](_0x2746ee=>{const _0x8f2092=_0x1709c2;return _0x2746ee[_0x8f2092(0x230)]==_0x8f2092(0x22f);})['value']();dbLogs[_0x1709c2(0x241)](_0x1709c2(0x202))[_0x1709c2(0x209)]()[_0x1709c2(0x249)](),dbLogs['get']('logs')['assign'](_0x3c7580)[_0x1709c2(0x249)](),emitHistory(_0x3d4e98);}}async function pauseBot(_0x38d9dc=''){const _0x239988=_0x464585,_0x42071a=new Date()[_0x239988(0x1dc)]();if(!lastBotPause)lastBotPause=new Date()[_0x239988(0x1dc)](),consecutivePauses=0x1;else{if(_0x42071a-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process['send']({'stop':'restart'},_0x2c877d=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x239988(0x1dc)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x38d9dc)_0x38d9dc+=_0x239988(0x15d);logHistory(_0x239988(0x1c3),_0x38d9dc+_0x239988(0x207)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x4dc77d=_0x464585;process[_0x4dc77d(0x1ea)]({'stop':_0x4dc77d(0x197)},_0x354125=>{}),await sleep(0x7d0);}async function handleError(_0x385e07,_0x4ed56c,_0x1aa500=''){const _0x36e264=_0x464585;if(_0x385e07[_0x36e264(0x24a)]()['includes'](_0x36e264(0x1fc)))await pauseBot(_0x36e264(0x1b5));else{if(_0x385e07[_0x36e264(0x24a)]()['includes'](_0x36e264(0x1e7)))await pauseBot(_0x36e264(0x244));else{if(_0x385e07[_0x36e264(0x24a)]()[_0x36e264(0x247)](_0x36e264(0x237)))await pauseBot(_0x36e264(0x21b));else{if(_0x385e07[_0x36e264(0x24a)]()[_0x36e264(0x247)](_0x36e264(0x205)))logHistory(_0x36e264(0x1c3),_0x4ed56c+_0x36e264(0x19f)),logHistory(_0x36e264(0x1c3),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x385e07['toString']()[_0x36e264(0x247)]('AuthenticationError'))logHistory(_0x36e264(0x1c3),_0x4ed56c+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory('error',_0x36e264(0x178)),await killBot();else{if(_0x385e07[_0x36e264(0x24a)]()[_0x36e264(0x247)](_0x36e264(0x265)))logHistory(_0x36e264(0x1c3),_0x4ed56c+_0x36e264(0x1cd)),logHistory(_0x36e264(0x1c3),_0x36e264(0x178)),await killBot();else{if(_0x385e07[_0x36e264(0x24a)]()[_0x36e264(0x247)](_0x36e264(0x1a7)))logHistory(_0x36e264(0x1c3),_0x4ed56c+_0x36e264(0x20d)),logHistory(_0x36e264(0x1c3),_0x36e264(0x178)),await killBot();else{if(_0x385e07[_0x36e264(0x24a)]()['includes'](_0x36e264(0x180)))await pauseBot(_0x36e264(0x190)),process[_0x36e264(0x1ea)]({'stop':'restart'},_0x30321c=>{});else _0x385e07[_0x36e264(0x24a)]()[_0x36e264(0x247)]('InsufficientFunds')?logHistory('error',_0x4ed56c+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x1aa500):(logging(_0x4ed56c+'\x20|\x20Error\x20details:\x20',_0x385e07),await pauseBot(_0x36e264(0x26c)));}}}}}}}}function formatResult(_0x4153b1,_0x1efaff){const _0xf4cdb0=_0x464585;return _0x4153b1?parseFloat(_0x4153b1[_0xf4cdb0(0x1c0)](_0x1efaff)):null;}function formatResultString(_0x45cf19,_0x306855){const _0x208d30=_0x464585;if(!_0x45cf19)return null;let _0x219c88;if(!(''+_0x45cf19)[_0x208d30(0x247)]('e'))_0x219c88=+(Math[_0x208d30(0x20f)](_0x45cf19+'e+'+_0x306855)+'e-'+_0x306855);else{let _0xe9858e=(''+_0x45cf19)[_0x208d30(0x229)]('e'),_0x39cf46='';+_0xe9858e[0x1]+_0x306855>0x0&&(_0x39cf46='+'),_0x219c88=+(Math[_0x208d30(0x20f)](+_0xe9858e[0x0]+'e'+_0x39cf46+(+_0xe9858e[0x1]+_0x306855))+'e-'+_0x306855);}return Number(_0x219c88)[_0x208d30(0x1c0)](_0x306855);}function logging(_0x190532,_0x13f58c=''){const _0x2899c3=_0x464585;if(config['showname'])console[_0x2899c3(0x277)](getTimeStamp()+':\x20'+config[_0x2899c3(0x1e4)]+_0x2899c3(0x24f)+_0x190532,_0x13f58c);else console[_0x2899c3(0x277)](getTimeStamp()+_0x2899c3(0x1c9)+botID+_0x2899c3(0x24f)+_0x190532,_0x13f58c);}function getServerTime(){const _0x2f8d32=_0x464585,_0x351ae4=new Date();return _0x351ae4[_0x2f8d32(0x15e)]()+'/'+(_0x351ae4[_0x2f8d32(0x1bf)]()+0x1)[_0x2f8d32(0x24a)]()[_0x2f8d32(0x179)](0x2,'0')+'/'+_0x351ae4[_0x2f8d32(0x25b)]()[_0x2f8d32(0x24a)]()[_0x2f8d32(0x179)](0x2,'0')+'\x20'+_0x351ae4['getHours']()[_0x2f8d32(0x24a)]()[_0x2f8d32(0x179)](0x2,'0')+':'+_0x351ae4[_0x2f8d32(0x243)]()[_0x2f8d32(0x24a)]()[_0x2f8d32(0x179)](0x2,'0')+':'+_0x351ae4[_0x2f8d32(0x213)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x238579=_0x464585,_0x11f523=shiftedTime();return _0x11f523[_0x238579(0x15e)]()+'/'+(_0x11f523[_0x238579(0x1bf)]()+0x1)[_0x238579(0x24a)]()[_0x238579(0x179)](0x2,'0')+'/'+_0x11f523[_0x238579(0x25b)]()[_0x238579(0x24a)]()[_0x238579(0x179)](0x2,'0')+'\x20'+_0x11f523[_0x238579(0x1e1)]()[_0x238579(0x24a)]()[_0x238579(0x179)](0x2,'0')+':'+_0x11f523[_0x238579(0x243)]()[_0x238579(0x24a)]()[_0x238579(0x179)](0x2,'0')+':'+_0x11f523[_0x238579(0x213)]()['toString']()[_0x238579(0x179)](0x2,'0');}function getDate(){const _0x2e65c6=_0x464585,_0x560a06=shiftedTime();return _0x560a06[_0x2e65c6(0x15e)]()+'/'+(_0x560a06[_0x2e65c6(0x1bf)]()+0x1)[_0x2e65c6(0x24a)]()[_0x2e65c6(0x179)](0x2,'0')+'/'+_0x560a06[_0x2e65c6(0x25b)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x15addf=_0x464585,_0x3b8009=shiftedTime();return _0x3b8009[_0x15addf(0x1e1)]()[_0x15addf(0x24a)]()[_0x15addf(0x179)](0x2,'0');}function sleep(_0x448f6b){return new Promise(_0x1bfc79=>setTimeout(_0x1bfc79,_0x448f6b));}function shiftedTime(){const _0x509e82=_0x464585,_0x47d300=new Date();let _0x2eb79b=_0x47d300;if(config&&config[_0x509e82(0x25a)]!==0x0)_0x2eb79b=fns['add'](_0x47d300,{'hours':config[_0x509e82(0x25a)]});return _0x2eb79b;}