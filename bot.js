const _0x228c68=_0x214b;(function(_0x4935ba,_0x4cd82b){const _0x52837e=_0x214b,_0x390a22=_0x4935ba();while(!![]){try{const _0x14fee3=-parseInt(_0x52837e(0x103))/0x1*(-parseInt(_0x52837e(0x9f))/0x2)+parseInt(_0x52837e(0x168))/0x3*(-parseInt(_0x52837e(0xe4))/0x4)+parseInt(_0x52837e(0x125))/0x5+parseInt(_0x52837e(0xb5))/0x6*(-parseInt(_0x52837e(0xab))/0x7)+parseInt(_0x52837e(0x97))/0x8*(-parseInt(_0x52837e(0x173))/0x9)+-parseInt(_0x52837e(0xb2))/0xa+parseInt(_0x52837e(0xd1))/0xb;if(_0x14fee3===_0x4cd82b)break;else _0x390a22['push'](_0x390a22['shift']());}catch(_0x2e4c5b){_0x390a22['push'](_0x390a22['shift']());}}}(_0x2593,0x733a6));const _0x2da061=function(){let _0x374f10=!![];return function(_0xc7427,_0x1fafaf){const _0x16ab27=_0x374f10?function(){if(_0x1fafaf){const _0x1b7fe6=_0x1fafaf['apply'](_0xc7427,arguments);return _0x1fafaf=null,_0x1b7fe6;}}:function(){};return _0x374f10=![],_0x16ab27;};}(),_0x45bda4=_0x2da061(this,function(){const _0xb62e1c=_0x214b;return _0x45bda4[_0xb62e1c(0x11f)]()['search'](_0xb62e1c(0x16d))[_0xb62e1c(0x11f)]()[_0xb62e1c(0x184)](_0x45bda4)['search'](_0xb62e1c(0x16d));});_0x45bda4();'use strict';const ccxt=require(_0x228c68(0xa8)),low=require(_0x228c68(0x12d)),FileSync=require(_0x228c68(0x19a)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x228c68(0x12f)),Crypt=require(_0x228c68(0x94))['Crypt'];let exchange,wsClient;global[_0x228c68(0x141)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x228c68(0x170)],botID=process[_0x228c68(0xf9)][0x2]||_0x228c68(0xee),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x228c68(0x147)]('Error:\x20Invalid\x20argument\x20'+botID+_0x228c68(0x9d)),process[_0x228c68(0x12c)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x228c68(0x192)+userID+'/':_0x228c68(0x192);!fs[_0x228c68(0xbc)](configpath)&&fs[_0x228c68(0x152)](configpath);const configfile=configpath+_0x228c68(0x133)+botID+_0x228c68(0x160),logfile=configpath+_0x228c68(0x133)+botID+_0x228c68(0xd4),performancefile=configpath+_0x228c68(0x133)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x228c68(0xc1),settingsfile=configpath+_0x228c68(0xc8),securefile=configpath+_0x228c68(0x17c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x228c68(0x193)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x228c68(0x193)]();function _0x2593(){const _0x4963cd=['Bot\x20','DAI/','\x20|\x20Unknown\x20error\x20occured','API-key\x20format\x20invalid','toFixed','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','accumulatedQuantity','remove','close','usd','data','toString','kline','Executed\x20','round','Limit\x20(low-margin)','\x20orders\x20in\x20less\x20than\x20','986930djbXEM','Invalid\x20quantity','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','settings','isArray','storeHeadless','createOrder','exit','lowdb','BUSD','binance','BNB','starting-balances','timeout','bot-','function','remainingSymbols','wsKey','initclient','privateKey','price','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','secure','eur','reconnected','error','eventType','cost','ticker','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','has','sells','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','getMinutes','log','buy','timestamp','threshold','************','event-history','coin','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','AuthenticationError','reduce','placeOrder()','mkdirSync','Order(s)\x20validated\x20-\x20balancing\x20resumed','Binance\x20API\x20key\x20is\x20invalid','BTCUSDT','InvalidNonce','loadMarkets','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','type','basecoin','indexOf','message','RSA-OAEP','BTC/USDT','parseISO','-config.json','Order(s)\x20filled\x20-\x20balancing\x20resumed','getDate','datetime','coin-loading-progress','apiSecret','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','spot','489GHMjhO','yyyy/MM/dd','limit','market','storeConfiguration','(((.+)+)+)+$','Unfilled\x20order(s)\x20canceled\x20after\x20','abs','version','trade','configuration','675qmGLRK','limits','reverse','bid','emojisell','portfolio','apiKey','executionReport','timeshift','bb-secure.json','BTC','progress','length','ask','showname','date','valid','constructor','cooldown','USDC','fetchTickers','binanceus','args','event','availableBalance',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','placeOrder','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','decrypt','recreateHistory()','total','./config/','write','add','map','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','delta','padStart','symbol','lowdb/adapters/FileSync','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','getHours','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','value','wsMarket','startnumber','hybrid-crypto-js','sell','ExchangeNotAvailable','86672GwJlim','getSeconds','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','botname','last','closeWs',',\x20must\x20be\x20a\x203\x20digit\x20number','time','104792FfArCp','FILLED','formattedMessage',')\x20|\x20Error\x20details:\x20','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','keys','performance','headless','bot','ccxt','splice','exchange','77WqmSOB','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','wss://stream.binance.us:9443','initws()','DDoSProtection','cancelOrder()','differenceInSeconds','4353690RrZdSN','\x20minutes\x20-\x20balancing\x20resumed','BTC/EUR','355344XKekYx','order','coins','excluded','toLowerCase','balances','format','existsSync','BTCBUSD','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','startprice','get','-results.json','fee','shift','push','realized','\x20-\x20','sortBy','bb-settings.json','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','stringify','orderId','InsufficientFunds','\x20>\x20','Order(s)\x20not\x20validated\x20after\x20','recreate','fromCodePoint','24834425yqjwPq','entries','\x20order:\x20','-events.json','filter','filled','forEach','min','orderType','asset','amount','Order\x20amount\x20is\x20invalid:\x20','\x20hour','getMonth','startdate','parse','symbols','orderStatus','find','14912SBZYPq','currency','limit-low','HOT/BTC','MIN_NOTIONAL','OrderNotFound','success','enabled','userData','getTime','001','cancel','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','HOT/EUR','RequestTimeout','fetchOHLCV','ordertype','cancelOrder','subscribeSpotUserDataStream','coinamount','assign','argv','kill','emitHistory','send','cancelLoading','getFullYear','replace','getFiat()','Pausing\x20bot\x20for\x205\x20minutes\x20(','defaults','10VChRcf','distribution','fetchBalance','logs','yyyy/MM/dd\x20HH:mm:ss','limit-high','includes','getCoins()','target','Performance\x20recreation\x20completed\x20successfully','side','breakeven','getStartingBalances','number','sha256','loadSymbols()','page'];_0x2593=function(){return _0x4963cd;};return _0x2593();}const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x228c68(0x102)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x228c68(0x102)]({'coins':[]})[_0x228c68(0x193)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x228c68(0xb4)},'usd':{'coin':_0x228c68(0x155),'symbol':_0x228c68(0x15e)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0xbc9fde)=>{},'debug':(..._0x4fa73d)=>{},'notice':(..._0x32e9c9)=>{},'info':(..._0x56909d)=>{},'warning':(..._0x5d5499)=>{},'error':async function(..._0x581b97){const _0x2ac145=_0x228c68,_0x2e75f0=new Date()[_0x2ac145(0xed)]();if(!lastErrorShown||_0x2e75f0-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x2ac145(0xed)](),logHistory(_0x2ac145(0x13e),'WebSockets('+consecutivePauses+_0x2ac145(0x18c));let _0x21f73b='';if(_0x581b97[0x0])_0x21f73b+=_0x581b97[0x0];if(_0x581b97[0x1]&&_0x581b97[0x1][_0x2ac145(0x13e)]&&_0x581b97[0x1][_0x2ac145(0x13e)][_0x2ac145(0x15c)])_0x21f73b+=_0x2ac145(0xc6)+_0x581b97[0x1][_0x2ac145(0x13e)]['message'];logging('WebSockets('+consecutivePauses+_0x2ac145(0xa2),''+_0x21f73b),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x228c68(0x111),'rsaStandard':_0x228c68(0x15d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x228c68(0x17b)]!=config[_0x228c68(0x17b)]&&updateTimeshift(settings[_0x228c68(0x17b)]);process[_0x228c68(0xfc)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x421925,_0x5a4d21=null){process['send']({'function':_0x421925,'args':_0x5a4d21});}function initializeProcessListeners(){const _0x2f8b5d=_0x228c68;process['on'](_0x2f8b5d(0x15c),_0x2fc930=>{const _0x5e23fe=_0x2f8b5d;switch(Object[_0x5e23fe(0xa4)](_0x2fc930)[0x0]){case _0x5e23fe(0x17b):_0x2fc930[_0x5e23fe(0x17b)]!=undefined&&(settings[_0x5e23fe(0x17b)]=_0x2fc930['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x5e23fe(0x134):switch(_0x2fc930['function']){case _0x5e23fe(0x137):initclient();break;case _0x5e23fe(0xfb):emitHistory(_0x2fc930[_0x5e23fe(0x189)]);break;case'getPortfolio':getPortfolio(_0x2fc930[_0x5e23fe(0x189)]);break;case _0x5e23fe(0x16c):storeConfiguration(_0x2fc930['args']);break;case _0x5e23fe(0x12a):storeHeadless(_0x2fc930['args']);break;case _0x5e23fe(0x10f):getStartingBalances();break;case _0x5e23fe(0x18d):placeOrder(_0x2fc930[_0x5e23fe(0x189)]);break;case _0x5e23fe(0xfd):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x907b21=_0x228c68;if(pidBalances)clearTimeout(pidBalances);if(config[_0x907b21(0x179)]!=''){await initExchange(config['apiKey'],config[_0x907b21(0x165)]);let _0x4a8d40=await loadSymbols();_0x4a8d40&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1c3d92,_0x11ffc4){const _0x6bb02d=_0x228c68,_0x42ec0a=ccxt[config[_0x6bb02d(0xaa)]];let _0x41505f;switch(config[_0x6bb02d(0xaa)]){case _0x6bb02d(0x12f):_0x41505f='wss://stream.binance.com:9443';break;case _0x6bb02d(0x188):_0x41505f=_0x6bb02d(0xad);break;default:_0x41505f='wss://stream.binance.com:9443';}exchange=new _0x42ec0a({'apiKey':_0x1c3d92,'secret':_0x11ffc4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1c3d92,'api_secret':_0x11ffc4,'beautify':!![],'wsUrl':_0x41505f},logger),config['exchange']==_0x6bb02d(0x188)&&(stablecoins={'eur':{'coin':_0x6bb02d(0xbd),'symbol':'BTC/BUSD'},'usd':{'coin':'BTCUSDT','symbol':_0x6bb02d(0x15e)}});}async function loadSymbols(){const _0x1f8c91=_0x228c68;let _0x323d76;try{markets=await exchange[_0x1f8c91(0x157)]();const _0x2e72d8=[_0x1f8c91(0x115),_0x1f8c91(0xe7),_0x1f8c91(0xf1)];allSymbols=exchange[_0x1f8c91(0xe1)]['filter'](_0x31e796=>{let _0x29a5c5=![];return _0x2e72d8['forEach'](_0x53e451=>{const _0xc3dd7e=_0x214b;if(_0x31e796[_0xc3dd7e(0x109)](_0x53e451))_0x29a5c5=!![];}),!_0x29a5c5;}),_0x323d76=!![];}catch(_0x1d3376){await handleError(_0x1d3376,_0x1f8c91(0x112)),_0x323d76=![];}return _0x323d76;}async function initbot(){const _0xcb2d05=_0x228c68;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x58fdc3=dbCoinResults[_0xcb2d05(0xc0)](_0xcb2d05(0xb7))['value']();if(_0x58fdc3[_0xcb2d05(0x17f)]==0x0)await resetCoinResults();}async function initclient(){const _0x2ca4e4=_0x228c68;proxyEmit(_0x2ca4e4(0x172),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2ca4e4(0xba),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3dcf1f=_0x228c68;wsinitialized=![];ws1&&(ws1['forEach'](_0x1aa4ea=>{const _0x3fbccf=_0x214b;try{wsClient[_0x3fbccf(0x9c)](_0x1aa4ea);}catch(_0x250161){}}),ws1=[]);if(ws2){try{wsClient[_0x3dcf1f(0x9c)](ws2);}catch(_0x4d2c6e){}ws2=null;}}async function initws(){const _0x43729f=_0x228c68;cleanws();let _0x3609db=[];currentCoins[_0x43729f(0xd7)](_0x6ea0d0=>{const _0x46e33c=_0x43729f;if(_0x6ea0d0[_0x46e33c(0x14d)]!=config[_0x46e33c(0x15a)])_0x3609db['push'](noslash(_0x6ea0d0[_0x46e33c(0x199)]));});if(!_0x3609db[_0x43729f(0x109)](stablecoins[_0x43729f(0x13c)][_0x43729f(0x14d)]))_0x3609db[_0x43729f(0xc4)](stablecoins[_0x43729f(0x13c)][_0x43729f(0x14d)]);if(!_0x3609db[_0x43729f(0x109)](stablecoins[_0x43729f(0x11d)][_0x43729f(0x14d)]))_0x3609db[_0x43729f(0xc4)](stablecoins[_0x43729f(0x11d)][_0x43729f(0x14d)]);if(!_0x3609db[_0x43729f(0x109)]('BNB'+config[_0x43729f(0x15a)]))_0x3609db[_0x43729f(0xc4)]('BNB'+config[_0x43729f(0x15a)]);try{_0x3609db['forEach']((_0x41419e,_0x3def43)=>{ws1[_0x3def43]=wsClient['subscribeSpotKline'](_0x41419e,'1m');}),ws2=wsClient[_0x43729f(0xf6)](),wsClient['on'](_0x43729f(0xa1),_0x33eb15=>{const _0x487857=_0x43729f;if(!Array[_0x487857(0x129)](_0x33eb15)&&!_0x33eb15['wsKey'][_0x487857(0x109)](_0x487857(0xec))){if(_0x33eb15[_0x487857(0x13f)]===_0x487857(0x120)){global[_0x487857(0x141)][_0x33eb15['kline']['symbol']]=_0x33eb15['kline'][_0x487857(0x11c)];return;}}else{if(!Array[_0x487857(0x129)](_0x33eb15)&&_0x33eb15[_0x487857(0x136)][_0x487857(0x109)](_0x487857(0xec))){if(_0x33eb15[_0x487857(0x19f)][_0x487857(0x109)](_0x487857(0x167))){updateNumberCoins(_0x33eb15);return;}}}}),wsClient['on'](_0x43729f(0x13d),async _0x17465f=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x4c06e5){await handleError(_0x4c06e5,_0x43729f(0xae));}let _0x3378da,_0xbf7495=0x0;loading[_0x43729f(0x135)]=[];let _0x1977e8=0x0;currentCoins[_0x43729f(0xd7)](_0x139a40=>{const _0x635f87=_0x43729f;if(_0x139a40[_0x635f87(0x14d)]!=config[_0x635f87(0x15a)])loading[_0x635f87(0x135)][_0x635f87(0xc4)](_0x139a40[_0x635f87(0x199)]);}),loadingCanceled=![];while(_0x3378da!=currentCoins['length']-0x1){_0x3378da=0x0,currentCoins[_0x43729f(0xd7)](_0x392db9=>{const _0x46d5eb=_0x43729f;_0x392db9[_0x46d5eb(0x14d)]!=config[_0x46d5eb(0x15a)]&&global[_0x46d5eb(0x141)][noslash(_0x392db9[_0x46d5eb(0x199)])]&&(loading[_0x46d5eb(0x135)]=loading['remainingSymbols'][_0x46d5eb(0xd5)](_0x8bf6e9=>_0x8bf6e9!=_0x392db9['symbol']),_0x3378da++);}),loading[_0x43729f(0x17e)]=Math[_0x43729f(0x122)](_0x3378da/(currentCoins[_0x43729f(0x17f)]-0x1)*0x64);_0x1977e8>0x1e*0x5&&(loading[_0x43729f(0x132)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x43729f(0xef)]=!![],emitLoadingProgress();break;}else _0x3378da!=_0xbf7495&&(_0xbf7495=_0x3378da,emitLoadingProgress()),_0x1977e8++,await sleep(0xc8);}if(_0x3378da==currentCoins[_0x43729f(0x17f)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x42f80d=_0x228c68;proxyEmit(_0x42f80d(0x164),loading);}async function getFiat(){const _0x25d175=_0x228c68;let _0x19bb69=0x0,_0x596c47=0x0;try{_0x19bb69=global[_0x25d175(0x141)][stablecoins[_0x25d175(0x13c)]['coin']],_0x596c47=global[_0x25d175(0x141)][stablecoins[_0x25d175(0x11d)]['coin']];}catch(_0x575f37){await handleError(_0x575f37,_0x25d175(0x100));}return{'eur':Number(_0x19bb69),'usd':Number(_0x596c47)};}async function setStartDatePerformance(_0x874a4f){const _0x20d3f0=_0x228c68,_0x4ac292=fns[_0x20d3f0(0xbb)](new Date(_0x874a4f[_0x20d3f0(0xdf)]),_0x20d3f0(0x169));let _0x2dd09c=[];_0x2dd09c[stablecoins[_0x20d3f0(0x13c)][_0x20d3f0(0x14d)]]=await getCloses(stablecoins[_0x20d3f0(0x13c)][_0x20d3f0(0x199)],new Date(_0x874a4f['startdate']),0x1),_0x2dd09c[stablecoins['usd'][_0x20d3f0(0x14d)]]=await getCloses(stablecoins[_0x20d3f0(0x11d)][_0x20d3f0(0x199)],new Date(_0x874a4f[_0x20d3f0(0xdf)]),0x1);let _0x4305b5,_0x2ae6eb=[];_0x874a4f[_0x20d3f0(0x178)][_0x20d3f0(0xd7)](_0x34cfbb=>{const _0x223e63=_0x20d3f0;!_0x34cfbb['excluded']&&_0x2ae6eb['push']({'coin':_0x34cfbb[_0x223e63(0x14d)],'number':_0x34cfbb[_0x223e63(0x93)],'price':_0x34cfbb[_0x223e63(0xbf)]});}),_0x4305b5={'date':_0x4ac292,'eur':_0x2dd09c[stablecoins[_0x20d3f0(0x13c)][_0x20d3f0(0x14d)]][0x0],'usd':_0x2dd09c[stablecoins[_0x20d3f0(0x11d)][_0x20d3f0(0x14d)]][0x0],'coins':_0x2ae6eb};let _0x39047a=dbPerformance[_0x20d3f0(0xc0)](_0x20d3f0(0x11e))[_0x20d3f0(0xe3)]({'date':_0x4ac292})['value']();_0x39047a?dbPerformance['get'](_0x20d3f0(0x11e))[_0x20d3f0(0xe3)]({'date':_0x4ac292})[_0x20d3f0(0xf8)](_0x4305b5)[_0x20d3f0(0x193)]():dbPerformance[_0x20d3f0(0xc0)](_0x20d3f0(0x11e))[_0x20d3f0(0xc4)](_0x4305b5)[_0x20d3f0(0x193)](),_0x39047a=dbPerformance[_0x20d3f0(0xc0)](_0x20d3f0(0x11e))[_0x20d3f0(0xc7)](_0x20d3f0(0x182))[_0x20d3f0(0x19e)](),_0x39047a[_0x20d3f0(0xd7)](_0x1cbace=>{const _0x34eef4=_0x20d3f0;_0x1cbace[_0x34eef4(0x182)]<_0x4ac292&&dbPerformance[_0x34eef4(0xc0)](_0x34eef4(0x11e))[_0x34eef4(0x11b)]({'date':_0x1cbace[_0x34eef4(0x182)]})[_0x34eef4(0x193)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x48ebd6){const _0x46fae8=_0x228c68;let _0x5aeb0c,_0x344c05=[];logHistory(_0x46fae8(0xea),_0x46fae8(0x145)),_0x48ebd6[_0x46fae8(0x178)][_0x46fae8(0xd7)](_0x505e54=>{const _0x30e508=_0x46fae8;if(_0x505e54[_0x30e508(0x14d)]!=config[_0x30e508(0x15a)]&&!_0x505e54[_0x30e508(0xb8)])_0x344c05[_0x30e508(0xc4)]({'coin':_0x505e54[_0x30e508(0x14d)],'symbol':_0x505e54[_0x30e508(0x199)]});});let _0x5ab727=[];try{const _0x35989a=fns[_0x46fae8(0xbb)](fns[_0x46fae8(0x15f)](_0x48ebd6['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x36f67e of _0x344c05){if(_0x36f67e[_0x46fae8(0x14d)]!=config[_0x46fae8(0x15a)])_0x5aeb0c=await exchange['fetchOrders'](_0x36f67e[_0x46fae8(0x199)],Date['parse'](_0x35989a));_0x5aeb0c[_0x46fae8(0xd7)](_0x15f976=>{const _0x4164e=_0x46fae8,_0x15f2ac=_0x36f67e[_0x4164e(0x199)][_0x4164e(0x109)](config[_0x4164e(0x15a)]+'/'),_0x56c589=fns['format'](fns[_0x4164e(0x15f)](_0x15f976[_0x4164e(0x163)]),_0x4164e(0x107)),_0x19b011=fns[_0x4164e(0xbb)](fns[_0x4164e(0x15f)](_0x15f976[_0x4164e(0x163)]),_0x4164e(0x169));let _0x19fc95;if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x148)&&_0x15f2ac==![])_0x19fc95=_0x15f976['amount'];if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x148)&&_0x15f2ac==!![])_0x19fc95=-_0x15f976[_0x4164e(0xdb)]*_0x15f976['price'];if(_0x15f976['side']=='sell'&&_0x15f2ac==![])_0x19fc95=-_0x15f976[_0x4164e(0xdb)];if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x95)&&_0x15f2ac==!![])_0x19fc95=_0x15f976[_0x4164e(0xdb)]*_0x15f976[_0x4164e(0x139)];_0x5ab727[_0x4164e(0xc4)]({'timestamp':_0x56c589,'date':_0x19b011,'coin':_0x36f67e[_0x4164e(0x14d)],'symbol':_0x36f67e[_0x4164e(0x199)],'type':_0x15f976[_0x4164e(0x159)],'side':_0x15f976[_0x4164e(0x10d)],'reverse':_0x15f2ac,'amount':formatResult(_0x15f976['filled'],0x8),'filled':formatResult(_0x15f976[_0x4164e(0xd6)],0x8),'coinamount':formatResult(_0x19fc95,0x8),'price':formatResult(_0x15f976[_0x4164e(0x139)],0x8)});let _0x1feba4;if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x148)&&_0x15f2ac==![])_0x1feba4=-_0x15f976[_0x4164e(0xdb)]*_0x15f976['price'];if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x148)&&_0x15f2ac==!![])_0x1feba4=_0x15f976[_0x4164e(0xdb)];if(_0x15f976['side']==_0x4164e(0x95)&&_0x15f2ac==![])_0x1feba4=_0x15f976[_0x4164e(0xdb)]*_0x15f976[_0x4164e(0x139)];if(_0x15f976[_0x4164e(0x10d)]==_0x4164e(0x95)&&_0x15f2ac==!![])_0x1feba4=-_0x15f976['amount'];_0x5ab727[_0x4164e(0xc4)]({'date':_0x19b011,'coin':config['basecoin'],'coinamount':formatResult(_0x1feba4,0x8)});});}_0x5ab727['sort']((_0xad45cd,_0x244fab)=>_0xad45cd[_0x46fae8(0x149)]>_0x244fab[_0x46fae8(0x149)]?0x1:_0x244fab[_0x46fae8(0x149)]>_0xad45cd[_0x46fae8(0x149)]?-0x1:0x0),dbLogs[_0x46fae8(0xc0)](_0x46fae8(0x106))[_0x46fae8(0x11b)]()[_0x46fae8(0x193)](),_0x5ab727[_0x46fae8(0xd7)](_0x519887=>{const _0x1bdf72=_0x46fae8;let _0x161ffd;_0x519887[_0x1bdf72(0x14d)]!=config['basecoin']&&(_0x161ffd={'time':_0x519887[_0x1bdf72(0x149)],'type':'order','event':'Order:\x20'+_0x519887[_0x1bdf72(0x199)]+'\x20'+_0x519887[_0x1bdf72(0x10d)]+'\x20#'+_0x519887[_0x1bdf72(0xdb)]+'\x20@'+_0x519887[_0x1bdf72(0x139)]},dbLogs[_0x1bdf72(0xc0)](_0x1bdf72(0x106))[_0x1bdf72(0xc4)](_0x161ffd)[_0x1bdf72(0x193)]());});const _0x57972b=fns['eachDayOfInterval']({'start':new Date(_0x48ebd6[_0x46fae8(0xdf)]),'end':new Date()})[_0x46fae8(0x195)](_0x1c7580=>fns[_0x46fae8(0xbb)](_0x1c7580,'yyyy/MM/dd'));let _0x730c3d=[];_0x48ebd6[_0x46fae8(0x178)][_0x46fae8(0xd7)](_0x3c1055=>{const _0x415f1d=_0x46fae8;if(!_0x3c1055[_0x415f1d(0xb8)]){_0x730c3d[_0x3c1055[_0x415f1d(0x14d)]]=[];let _0x307fc4=_0x3c1055[_0x415f1d(0x93)];_0x57972b[_0x415f1d(0xd7)]((_0x32783b,_0x53e549)=>{const _0x1704bc=_0x415f1d;let _0x5d3d07=_0x5ab727[_0x1704bc(0xd5)](_0x52db5d=>_0x52db5d[_0x1704bc(0x14d)]==_0x3c1055[_0x1704bc(0x14d)]&&_0x52db5d[_0x1704bc(0x182)]==_0x32783b);if(_0x5d3d07[_0x1704bc(0x17f)]!=0x0){let _0x431f13=_0x5d3d07[_0x1704bc(0x150)]((_0x57d8b2,_0x4cfcfe)=>{const _0x44f20b=_0x1704bc;return _0x57d8b2+=_0x4cfcfe[_0x44f20b(0xf7)],_0x57d8b2;},0x0);_0x307fc4+=_0x431f13;}_0x730c3d[_0x3c1055[_0x1704bc(0x14d)]][_0x32783b]=_0x307fc4;});}});const _0x192c11=[..._0x344c05];_0x192c11[_0x46fae8(0xc4)]({'coin':stablecoins[_0x46fae8(0x13c)]['coin'],'symbol':stablecoins[_0x46fae8(0x13c)]['symbol']}),_0x192c11[_0x46fae8(0xc4)]({'coin':stablecoins[_0x46fae8(0x11d)][_0x46fae8(0x14d)],'symbol':stablecoins[_0x46fae8(0x11d)][_0x46fae8(0x199)]});let _0x5022fa=[];for(const _0x25ab56 of _0x192c11){_0x5022fa[_0x25ab56[_0x46fae8(0x14d)]]=await getCloses(_0x25ab56[_0x46fae8(0x199)],new Date(_0x48ebd6[_0x46fae8(0xdf)]));}dbPerformance[_0x46fae8(0xc0)](_0x46fae8(0x11e))['remove']()[_0x46fae8(0x193)](),_0x57972b[_0x46fae8(0xd7)]((_0x226106,_0x401f07)=>{const _0x27a14d=_0x46fae8;let _0x158f88,_0x5b6d00=[];_0x401f07==0x0?(_0x48ebd6[_0x27a14d(0x178)]['forEach'](_0xa6fcd2=>{const _0x51021a=_0x27a14d;!_0xa6fcd2[_0x51021a(0xb8)]&&_0x5b6d00[_0x51021a(0xc4)]({'coin':_0xa6fcd2['coin'],'number':_0xa6fcd2[_0x51021a(0x93)],'price':_0xa6fcd2['startprice']});}),_0x158f88={'date':_0x226106,'eur':_0x5022fa[stablecoins[_0x27a14d(0x13c)][_0x27a14d(0x14d)]][_0x401f07],'usd':_0x5022fa[stablecoins[_0x27a14d(0x11d)]['coin']][_0x401f07],'coins':_0x5b6d00}):(_0x48ebd6[_0x27a14d(0x178)][_0x27a14d(0xd7)](_0x511264=>{const _0x59d02a=_0x27a14d;!_0x511264[_0x59d02a(0xb8)]&&_0x5b6d00[_0x59d02a(0xc4)]({'coin':_0x511264[_0x59d02a(0x14d)],'number':_0x730c3d[_0x511264[_0x59d02a(0x14d)]][_0x226106],'price':_0x511264[_0x59d02a(0x14d)]==config[_0x59d02a(0x15a)]?0x1:_0x5022fa[_0x511264['coin']][_0x401f07]});}),_0x158f88={'date':_0x226106,'eur':_0x5022fa[stablecoins[_0x27a14d(0x13c)][_0x27a14d(0x14d)]][_0x401f07],'usd':_0x5022fa[stablecoins[_0x27a14d(0x11d)][_0x27a14d(0x14d)]][_0x401f07],'coins':_0x5b6d00}),dbPerformance['get']('data')['push'](_0x158f88)[_0x27a14d(0x193)]();}),emitPerformance(),await resetCoinResults();for(let _0x2d691a of _0x5ab727){_0x2d691a[_0x46fae8(0x14d)]!=config[_0x46fae8(0x15a)]&&await updateCoinResults(_0x2d691a);}logHistory(_0x46fae8(0xea),_0x46fae8(0x10c));}catch(_0x26e541){await handleError(_0x26e541,_0x46fae8(0x190));}}async function getCloses(_0x56c432,_0x4b7f75,_0x428b03=undefined){const _0x579b9b=_0x228c68,_0x3a4cf9='1d';let _0x1c289e,_0x321b2c;const _0xbdc87d=fns['differenceInCalendarDays'](new Date(),_0x4b7f75)+0x1;try{const _0x15953f=exchange['milliseconds']()-_0xbdc87d*0x18*0xe10*0x3e8;_0x1c289e=await exchange[_0x579b9b(0xf3)](_0x56c432,_0x3a4cf9,_0x15953f,_0x428b03),_0x321b2c=await exchange[_0x579b9b(0x187)](_0x56c432);}catch(_0x4421ad){await handleError(_0x4421ad,'getCloses()');}let _0x5b9a0e=ohlcvToCloses(_0x1c289e);return _0x5b9a0e['push'](_0x321b2c[_0x56c432]['last']),_0x5b9a0e;}function ohlcvToCloses(_0x4cc2fe){const _0x237c57=_0x228c68;let _0x4b1c4f=[];return _0x4cc2fe[_0x237c57(0xd7)](function(_0x4bfae6){const _0x1d2663=_0x237c57;_0x4b1c4f[_0x1d2663(0xc4)](_0x4bfae6[0x4]);}),_0x4b1c4f;}function getConfiguration(_0x5d87ff){const _0x1282b6=_0x228c68;let _0x2e0759=dbConfig[_0x1282b6(0xc0)](_0x1282b6(0xa7))[_0x1282b6(0xe3)]({'botID':_0x5d87ff})[_0x1282b6(0x19e)]();if(_0x2e0759){let _0x3620f1=![];!_0x2e0759[_0x1282b6(0xaa)]&&(_0x2e0759={..._0x2e0759,'exchange':_0x1282b6(0x12f)},_0x3620f1=!![]),!_0x2e0759[_0x1282b6(0x15a)]&&(_0x2e0759={..._0x2e0759,'basecoin':_0x1282b6(0x17d)},_0x3620f1=!![]),!_0x2e0759['ordertype']&&(_0x2e0759={..._0x2e0759,'ordertype':_0x1282b6(0x16b)},_0x3620f1=!![]),!_0x2e0759[_0x1282b6(0x132)]&&(_0x2e0759={..._0x2e0759,'timeout':0x14},_0x3620f1=!![]),!_0x2e0759['emojibuy']&&(_0x2e0759={..._0x2e0759,'emojibuy':''},_0x3620f1=!![]),!_0x2e0759[_0x1282b6(0x177)]&&(_0x2e0759={..._0x2e0759,'emojisell':''},_0x3620f1=!![]),!_0x2e0759['showname']&&(_0x2e0759={..._0x2e0759,'showname':![]},_0x3620f1=!![]),_0x3620f1&&(_0x2e0759={'botID':_0x2e0759['botID'],'exchange':_0x2e0759[_0x1282b6(0xaa)],'apiKey':_0x2e0759[_0x1282b6(0x179)],'apiSecret':_0x2e0759['apiSecret'],'basecoin':_0x2e0759[_0x1282b6(0x15a)],'botname':_0x2e0759['botname'],'showname':_0x2e0759[_0x1282b6(0x181)],'threshold':_0x2e0759[_0x1282b6(0x14a)],'ordertype':_0x2e0759[_0x1282b6(0xf4)],'timeout':_0x2e0759[_0x1282b6(0x132)],'startdate':_0x2e0759['startdate'],'recreate':_0x2e0759[_0x1282b6(0xcf)],'timeshift':_0x2e0759['timeshift'],'headless':_0x2e0759[_0x1282b6(0xa6)],'cooldown':_0x2e0759['cooldown'],'emojibuy':_0x2e0759['emojibuy'],'emojisell':_0x2e0759[_0x1282b6(0x177)],'portfolio':_0x2e0759[_0x1282b6(0x178)]},dbConfig[_0x1282b6(0xc0)](_0x1282b6(0xa7))[_0x1282b6(0x11b)]()['write'](),dbConfig['get'](_0x1282b6(0xa7))[_0x1282b6(0xc4)](_0x2e0759)[_0x1282b6(0x193)]());}else _0x2e0759={'botID':_0x5d87ff,'exchange':_0x1282b6(0x12f),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1282b6(0x114)+_0x5d87ff,'showname':![],'threshold':'3','ordertype':_0x1282b6(0x16b),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1282b6(0x17b)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2e0759;}function emittedConfiguration(){const _0x5643df=_0x228c68;let _0x1aa8f1;return config[_0x5643df(0x179)]==''?_0x1aa8f1=config:_0x1aa8f1={...config,'apiKey':_0x5643df(0x14b),'apiSecret':'************'},_0x1aa8f1;}function getSettings(){const _0x56b735=_0x228c68;return dbSettings['get'](_0x56b735(0x128))['value']();}function getSecure(){const _0x47e014=_0x228c68;return dbSecure[_0x47e014(0xc0)](_0x47e014(0x13b))['value']()||{};}function updateTimeshift(_0x625d9c){const _0x58ed08=_0x228c68;let _0x4176d4=dbConfig[_0x58ed08(0xc0)]('bot')[_0x58ed08(0xe3)]({'botID':botID})[_0x58ed08(0x19e)]();_0x4176d4&&dbConfig[_0x58ed08(0xc0)](_0x58ed08(0xa7))['find']({'botID':botID})['assign']({'timeshift':_0x625d9c})[_0x58ed08(0x193)](),config[_0x58ed08(0x17b)]=_0x625d9c,proxyEmit(_0x58ed08(0x172),emittedConfiguration());}async function storeConfiguration(_0x4196d5){const _0x58f105=_0x228c68;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x396d6f=dbConfig[_0x58f105(0xc0)](_0x58f105(0xa7))['find']({'botID':botID})[_0x58f105(0x19e)]();_0x4196d5={..._0x4196d5,'apiKey':crypt['decrypt'](secure[_0x58f105(0x138)],_0x4196d5['apiKey'])[_0x58f105(0x15c)],'apiSecret':crypt[_0x58f105(0x18f)](secure[_0x58f105(0x138)],_0x4196d5[_0x58f105(0x165)])[_0x58f105(0x15c)]};if(_0x396d6f){if(_0x4196d5['apiKey']==_0x58f105(0x14b))_0x4196d5['apiKey']=config['apiKey'];if(_0x4196d5[_0x58f105(0x165)]==_0x58f105(0x14b))_0x4196d5[_0x58f105(0x165)]=config[_0x58f105(0x165)];dbConfig['get'](_0x58f105(0xa7))[_0x58f105(0xe3)]({'botID':botID})[_0x58f105(0xf8)](_0x4196d5)[_0x58f105(0x193)]();}else dbConfig[_0x58f105(0xc0)](_0x58f105(0xa7))[_0x58f105(0xc4)](_0x4196d5)['write'](),process[_0x58f105(0xfc)]({'status':_0x58f105(0xeb),'live':'running'});config={..._0x4196d5};if(config[_0x58f105(0xcf)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x58f105(0xfc)]({'botname':_0x4196d5[_0x58f105(0x9a)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0xb9770e){const _0x10b1c9=_0x228c68,_0x39baba={...config,'headless':_0xb9770e[_0x10b1c9(0xa6)]};let _0x4ed3b5=dbConfig[_0x10b1c9(0xc0)](_0x10b1c9(0xa7))[_0x10b1c9(0xe3)]({'botID':botID})[_0x10b1c9(0x19e)]();_0x4ed3b5&&dbConfig[_0x10b1c9(0xc0)](_0x10b1c9(0xa7))[_0x10b1c9(0xe3)]({'botID':botID})['assign'](_0x39baba)['write'](),config={..._0x39baba},proxyEmit(_0x10b1c9(0x172),emittedConfiguration());}function noslash(_0x1db25a){return _0x1db25a['replace']('/','');}function updateNumberCoins(_0x1cbd3e){const _0x1ee9b2=_0x228c68;_0x1cbd3e[_0x1ee9b2(0x13f)]&&_0x1cbd3e['eventType']=='outboundAccountPosition'&&_0x1cbd3e['balances'][_0x1ee9b2(0xd7)](_0xbe07eb=>{const _0x15a4f6=_0x1ee9b2;let _0x557095=currentCoins['find'](_0x41837a=>_0x41837a['coin']==_0xbe07eb[_0x15a4f6(0xda)]);if(_0x557095)_0x557095[_0x15a4f6(0x110)]=Number(_0xbe07eb[_0x15a4f6(0x18b)]);});if(_0x1cbd3e[_0x1ee9b2(0x13f)]&&_0x1cbd3e[_0x1ee9b2(0x13f)]==_0x1ee9b2(0x17a)){if(_0x1cbd3e[_0x1ee9b2(0xd9)]=='LIMIT'&&_0x1cbd3e[_0x1ee9b2(0xe2)]==_0x1ee9b2(0xa0)){if(lastOrders)lastOrders[_0x1ee9b2(0xd7)](_0x3bdff1=>{const _0x58c430=_0x1ee9b2;if(_0x3bdff1[_0x58c430(0xcb)]==_0x1cbd3e[_0x58c430(0xcb)]){if(_0x3bdff1[_0x58c430(0x175)])_0x3bdff1[_0x58c430(0xd6)]=_0x1cbd3e[_0x58c430(0x11a)]*_0x3bdff1[_0x58c430(0x139)];else _0x3bdff1[_0x58c430(0xd6)]=_0x1cbd3e[_0x58c430(0x11a)];}});}}}async function getCoins(_0x2f7e01=!![],_0x1c351e=config['basecoin']){const _0x54554c=_0x228c68;let _0x187977,_0x27c011=[],_0x261906=[],_0x1ac897=[];try{_0x187977=await exchange[_0x54554c(0x105)](),mybalances=_0x187977[_0x54554c(0x191)];if(!_0x2f7e01)for(const [_0x9ce543,_0x50f992]of Object[_0x54554c(0xd2)](mybalances)){_0x1ac897[_0x54554c(0xc4)](_0x9ce543);}else config['portfolio'][_0x54554c(0xd7)](_0x5e66e0=>{const _0x16a1de=_0x54554c;if(!_0x5e66e0[_0x16a1de(0xb8)])_0x1ac897['push'](_0x5e66e0[_0x16a1de(0x14d)]);});if(_0x1c351e=='')for(const [_0x359239,_0x2ea650]of Object['entries'](mybalances)){_0x2ea650[_0x54554c(0x11f)]()!=0x0&&_0x261906[_0x54554c(0xc4)]({'coin':_0x359239});}else for(const [_0x128ddd,_0x6058b0]of Object[_0x54554c(0xd2)](mybalances)){if(_0x1ac897['includes'](_0x128ddd)){if((_0x6058b0['toString']()!=0x0||config[_0x54554c(0x178)][_0x54554c(0xe3)](_0x2781c6=>_0x2781c6[_0x54554c(0x14d)]==_0x128ddd))&&(allSymbols['includes'](_0x128ddd+'/'+_0x1c351e)||_0x128ddd==_0x1c351e))_0x261906['push']({'coin':_0x128ddd,'symbol':_0x128ddd+'/'+_0x1c351e,'reverse':![],'number':_0x6058b0}),_0x128ddd!=_0x1c351e&&_0x27c011['push'](_0x128ddd+'/'+_0x1c351e);else(_0x6058b0[_0x54554c(0x11f)]()!=0x0||config[_0x54554c(0x178)][_0x54554c(0xe3)](_0x1a1a58=>_0x1a1a58[_0x54554c(0x14d)]==_0x128ddd))&&allSymbols['includes'](_0x1c351e+'/'+_0x128ddd)&&(_0x261906['push']({'coin':_0x128ddd,'symbol':_0x1c351e+'/'+_0x128ddd,'reverse':!![],'number':_0x6058b0}),_0x128ddd!=_0x1c351e&&_0x27c011[_0x54554c(0xc4)](_0x1c351e+'/'+_0x128ddd));}}}catch(_0x516ecf){if(!_0x2f7e01){if(_0x516ecf['toString']()['includes'](_0x54554c(0x117)))return logHistory(_0x54554c(0x13e),_0x54554c(0x154)),![];else{if(_0x516ecf[_0x54554c(0x11f)]()[_0x54554c(0x109)](_0x54554c(0x14f)))return logHistory(_0x54554c(0x13e),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x516ecf[_0x54554c(0x11f)]()[_0x54554c(0x109)](_0x54554c(0x158)))return logHistory(_0x54554c(0x13e),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x516ecf,_0x54554c(0x10a));}}}else await handleError(_0x516ecf,'getCoins()');}return _0x261906;}function _0x214b(_0x5a6a73,_0x2a5c87){const _0x273fb9=_0x2593();return _0x214b=function(_0x45bda4,_0x2da061){_0x45bda4=_0x45bda4-0x93;let _0x259340=_0x273fb9[_0x45bda4];return _0x259340;},_0x214b(_0x5a6a73,_0x2a5c87);}async function getPortfolio(_0x38a52d){const _0x5dfada=_0x228c68;let _0x2470eb=[],_0x303179=[],_0x32ca2f,_0x9b3885=[],_0x3cb6db,_0x317656;_0x38a52d[_0x5dfada(0x179)]===_0x5dfada(0x14b)||_0x38a52d[_0x5dfada(0x165)]===_0x5dfada(0x14b)?(_0x3cb6db=config[_0x5dfada(0x179)],_0x317656=config['apiSecret']):(_0x3cb6db=_0x38a52d[_0x5dfada(0x179)],_0x317656=_0x38a52d[_0x5dfada(0x165)]);await initExchange(_0x3cb6db,_0x317656);let _0x404be7=await loadSymbols();if(_0x404be7){_0x9b3885=await getCoins(![],_0x38a52d[_0x5dfada(0x15a)]);if(_0x9b3885===![])proxyEmit(_0x5dfada(0x178),![]);else{if(_0x38a52d['basecoin']=='')proxyEmit(_0x5dfada(0x178),_0x9b3885);else{_0x9b3885[_0x5dfada(0xd7)](_0x1e3181=>{const _0x1c4883=_0x5dfada;_0x2470eb['push'](_0x1e3181[_0x1c4883(0x199)]);});try{_0x303179=await exchange['fetchTickers'](_0x2470eb);}catch(_0x6b86b9){await handleError(_0x6b86b9,'getPortfolio()');}_0x9b3885[_0x5dfada(0xd7)](_0x37a017=>{const _0xf2baa=_0x5dfada;_0x37a017[_0xf2baa(0x14d)]!=_0x38a52d[_0xf2baa(0x15a)]?_0x32ca2f=_0x37a017[_0xf2baa(0x175)]?0x1/_0x303179[_0x37a017[_0xf2baa(0x199)]]['last']:_0x303179[_0x37a017['symbol']][_0xf2baa(0x9b)]:_0x32ca2f=0x1,_0x37a017[_0xf2baa(0x139)]=formatResult(_0x32ca2f,0x8);}),proxyEmit(_0x5dfada(0x178),_0x9b3885);}}}else proxyEmit(_0x5dfada(0x178),![]);}function checkMinimums(_0x596e38){const _0x241b22=_0x228c68;let _0x1ddacf=!![];const _0x12e437=!_0x596e38[_0x241b22(0x175)]?markets[_0x596e38[_0x241b22(0x199)]][_0x241b22(0x174)]['amount'][_0x241b22(0xd8)]:markets[_0x596e38[_0x241b22(0x199)]][_0x241b22(0x174)][_0x241b22(0x140)][_0x241b22(0xd8)],_0x5af8a1=!_0x596e38[_0x241b22(0x175)]?markets[_0x596e38[_0x241b22(0x199)]]['limits'][_0x241b22(0x140)][_0x241b22(0xd8)]:markets[_0x596e38[_0x241b22(0x199)]]['limits']['amount']['min'];if(Math[_0x241b22(0x16f)](_0x596e38[_0x241b22(0x171)])<_0x12e437)_0x1ddacf=![];if(Math['abs'](_0x596e38['trade'])*_0x596e38[_0x241b22(0x9b)]<_0x5af8a1)_0x1ddacf=![];return _0x1ddacf;}async function getBalances(){const _0x3b9fa4=_0x228c68;let _0x31332d=0x0,_0x1ec0c3;const _0x1f9f40=config['threshold'];currentCoins[_0x3b9fa4(0xd7)](_0x268aae=>{const _0x409f76=_0x3b9fa4;if(_0x268aae['coin']!=config['basecoin']){let _0x865b0f=global[_0x409f76(0x141)][noslash(_0x268aae[_0x409f76(0x199)])];_0x1ec0c3=_0x268aae[_0x409f76(0x175)]?0x1/_0x865b0f:_0x865b0f;}else _0x1ec0c3=0x1;let _0x334c65=_0x268aae[_0x409f76(0x110)]*_0x1ec0c3;_0x31332d+=_0x334c65,_0x268aae[_0x409f76(0x9b)]=formatResult(Number(_0x1ec0c3),0x8),_0x268aae[_0x409f76(0x19e)]=_0x334c65;}),currentCoins[_0x3b9fa4(0xd7)](_0x419784=>{const _0x5f31b5=_0x3b9fa4;let _0x4c3c2=config[_0x5f31b5(0x178)]['find'](_0x31231b=>_0x31231b[_0x5f31b5(0x14d)]==_0x419784[_0x5f31b5(0x14d)]),_0x52a7a5=Number(_0x4c3c2[_0x5f31b5(0x104)]),_0x49c356=_0x419784[_0x5f31b5(0x19e)]/_0x31332d*0x64,_0x130b87=_0x52a7a5*_0x31332d/0x64/_0x419784[_0x5f31b5(0x9b)]-_0x419784[_0x5f31b5(0x110)];_0x419784[_0x5f31b5(0x104)]=formatResult(_0x49c356,0x3),_0x419784[_0x5f31b5(0x10b)]=formatResult(_0x52a7a5,0x3),_0x419784[_0x5f31b5(0x171)]=formatResult(_0x130b87,0x8),_0x419784['side']='',_0x419784[_0x5f31b5(0x183)]='';if(_0x419784['coin']!=config['basecoin']){if(_0x419784[_0x5f31b5(0x104)]>_0x52a7a5)_0x419784[_0x5f31b5(0x10d)]=_0x5f31b5(0x95),_0x419784[_0x5f31b5(0x183)]=checkMinimums(_0x419784);else _0x419784[_0x5f31b5(0x104)]<_0x52a7a5&&(_0x419784[_0x5f31b5(0x10d)]='buy',_0x419784[_0x5f31b5(0x183)]=checkMinimums(_0x419784));}_0x419784[_0x5f31b5(0x197)]=_0x419784[_0x5f31b5(0x104)]/_0x419784[_0x5f31b5(0x10b)]-0x1;}),currentCoins['sort']((_0x26083a,_0x1c7396)=>_0x26083a[_0x3b9fa4(0x197)]<_0x1c7396[_0x3b9fa4(0x197)]?0x1:_0x1c7396[_0x3b9fa4(0x197)]<_0x26083a[_0x3b9fa4(0x197)]?-0x1:0x0);const _0x127916=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x127916['eur'],'usd':_0x127916[_0x3b9fa4(0x11d)],'portfolio':JSON[_0x3b9fa4(0xca)](currentCoins),'threshold':_0x1f9f40},proxyEmit(_0x3b9fa4(0xba),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x1f9f40});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x8f44c=_0x228c68;if(!lastBalances)return;let _0x277c6a=await getStartingBalances(![]),_0x1a84a9=[],_0xdf8da1=[],_0x49b906;JSON[_0x8f44c(0xe0)](lastBalances['portfolio'])['forEach'](_0x180cb6=>{const _0x362c5b=_0x8f44c;let _0x56d0a5={'coin':_0x180cb6[_0x362c5b(0x14d)],'number':_0x180cb6[_0x362c5b(0x110)],'price':_0x180cb6[_0x362c5b(0x9b)]};_0x1a84a9[_0x362c5b(0xc4)](_0x56d0a5);if(!_0x277c6a[_0x362c5b(0xb7)]||!_0x277c6a['coins'][_0x362c5b(0xe3)](_0x2fdbfb=>_0x2fdbfb['coin']==_0x180cb6[_0x362c5b(0x14d)]&&_0x2fdbfb[_0x362c5b(0x110)]!=0x0))_0xdf8da1[_0x362c5b(0xc4)](_0x56d0a5);});const _0x214bb9=await getFiat();_0x49b906={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x214bb9['eur'],'usd':_0x214bb9['usd'],'coins':_0x1a84a9};let _0x541b39=dbPerformance['get'](_0x8f44c(0x11e))[_0x8f44c(0xe3)]({'date':_0x49b906[_0x8f44c(0x182)]})[_0x8f44c(0x19e)]();_0x541b39?dbPerformance[_0x8f44c(0xc0)](_0x8f44c(0x11e))[_0x8f44c(0xe3)]({'date':_0x49b906[_0x8f44c(0x182)]})[_0x8f44c(0xf8)](_0x49b906)[_0x8f44c(0x193)]():dbPerformance[_0x8f44c(0xc0)](_0x8f44c(0x11e))[_0x8f44c(0xc4)](_0x49b906)[_0x8f44c(0x193)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0xe1d2e5=_0x228c68;if(dbPerformance[_0xe1d2e5(0x143)](_0xe1d2e5(0x11e))[_0xe1d2e5(0x19e)]()){let _0x2ebb70=dbPerformance[_0xe1d2e5(0xc0)]('data')[_0xe1d2e5(0xc7)](_0xe1d2e5(0x182))[_0xe1d2e5(0x19e)]();proxyEmit(_0xe1d2e5(0xa5),_0x2ebb70),lastPerformanceEmitted=getDate();}else proxyEmit(_0xe1d2e5(0xa5),[]);}async function getStartingBalances(_0x1fed05=!![]){const _0x39e949=_0x228c68;let _0x13fbe9=dbPerformance[_0x39e949(0xc0)]('data')[_0x39e949(0xe3)]({'date':config[_0x39e949(0xdf)]})['value']();config[_0x39e949(0x179)]!=''&&!_0x13fbe9&&(await setStartDatePerformance(config),_0x13fbe9=dbPerformance[_0x39e949(0xc0)](_0x39e949(0x11e))[_0x39e949(0xe3)]({'date':config[_0x39e949(0xdf)]})[_0x39e949(0x19e)]());if(config[_0x39e949(0x179)]==''||!_0x13fbe9)return{};let _0x46a83e=0x0,_0x1b53ff=0x0,_0x4b4555=0x0,_0x55e423=[],_0x3a5dda=0x0;config[_0x39e949(0x178)][_0x39e949(0xd7)](_0x5e1965=>{const _0x28f00c=_0x39e949;if(!_0x5e1965[_0x28f00c(0xb8)]){_0x55e423[_0x3a5dda]={'coin':_0x5e1965['coin'],'symbol':_0x5e1965[_0x28f00c(0x199)],'number':_0x5e1965[_0x28f00c(0x93)],'price':_0x5e1965[_0x28f00c(0xbf)]},_0x46a83e+=_0x5e1965[_0x28f00c(0xbf)]*_0x5e1965[_0x28f00c(0x93)];if(config[_0x28f00c(0x15a)]==_0x28f00c(0x17d))_0x1b53ff+=_0x5e1965[_0x28f00c(0xbf)]*_0x5e1965['startnumber']*_0x13fbe9[_0x28f00c(0x13c)],_0x4b4555+=_0x5e1965[_0x28f00c(0xbf)]*_0x5e1965[_0x28f00c(0x93)]*_0x13fbe9[_0x28f00c(0x11d)];else{if(config[_0x28f00c(0x15a)]==_0x28f00c(0x12e)||config[_0x28f00c(0x15a)]=='USDT'||config[_0x28f00c(0x15a)]==_0x28f00c(0x186))_0x1b53ff+=_0x5e1965[_0x28f00c(0xbf)]*_0x5e1965['startnumber']*_0x13fbe9['eur']/_0x13fbe9[_0x28f00c(0x11d)],_0x4b4555+=_0x5e1965[_0x28f00c(0xbf)]*_0x5e1965[_0x28f00c(0x93)];else config[_0x28f00c(0x15a)]=='EUR'&&(_0x1b53ff+=_0x5e1965['startprice']*_0x5e1965[_0x28f00c(0x93)],_0x4b4555+=_0x5e1965['startprice']*_0x5e1965[_0x28f00c(0x93)]*_0x13fbe9[_0x28f00c(0x11d)]/_0x13fbe9[_0x28f00c(0x13c)]);}_0x3a5dda++;}});let _0x402d8c={'basecoin':_0x46a83e,'eur':_0x1b53ff,'usd':_0x4b4555,'coins':_0x55e423};if(_0x1fed05)proxyEmit(_0x39e949(0x131),_0x402d8c);return _0x402d8c;}function headlessMode(_0x592bc5){const _0x51b734=_0x228c68;let _0x3f7e5a=_0x592bc5[_0x51b734(0x178)],_0x45c737=_0x592bc5['threshold'],_0x430d12=[];for(let _0x1d3125 of _0x3f7e5a){if(_0x1d3125[_0x51b734(0x14d)]!=config[_0x51b734(0x15a)]){if(_0x1d3125[_0x51b734(0x104)]/_0x1d3125[_0x51b734(0x10b)]-0x1>=_0x45c737/0x64){if(_0x1d3125['valid'])_0x430d12['push'](_0x1d3125);}else{if(_0x1d3125[_0x51b734(0x104)]/_0x1d3125[_0x51b734(0x10b)]-0x1<=-_0x45c737/0x64){if(_0x1d3125[_0x51b734(0x183)])_0x430d12[_0x51b734(0xc4)](_0x1d3125);}}}}_0x430d12[_0x51b734(0x17f)]>0x0&&placeOrder(_0x430d12);}function symbolToCoin(_0x1db0f8){const _0x592c9d=_0x228c68;let _0x56244d;if(_0x1db0f8[_0x592c9d(0x109)]('/'+config[_0x592c9d(0x15a)]))_0x56244d=_0x1db0f8[_0x592c9d(0xff)]('/'+config[_0x592c9d(0x15a)],'');if(_0x1db0f8[_0x592c9d(0x109)](config[_0x592c9d(0x15a)]+'/'))_0x56244d=_0x1db0f8[_0x592c9d(0xff)](config[_0x592c9d(0x15a)]+'/','');return _0x56244d;}async function validateOrders(_0x28200f=0x0){const _0x4e01bc=_0x228c68;let _0x154ae3=[],_0x246871=config[_0x4e01bc(0xf4)]==_0x4e01bc(0x16b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x4e01bc(0xd7)](_0x3eeca6=>{const _0x4d6130=_0x4e01bc;let _0x4a64a4=previousCoins['find'](_0x452744=>_0x452744['coin']==symbolToCoin(_0x3eeca6[_0x4d6130(0x199)])),_0x20419e=currentCoins['find'](_0x46a184=>_0x46a184[_0x4d6130(0x14d)]==symbolToCoin(_0x3eeca6[_0x4d6130(0x199)])),_0x58e7db,_0x5bce18;_0x3eeca6[_0x4d6130(0x10d)]==_0x4d6130(0x148)&&!_0x3eeca6['reverse']||_0x3eeca6[_0x4d6130(0x10d)]==_0x4d6130(0x95)&&_0x3eeca6[_0x4d6130(0x175)]?(_0x58e7db=_0x4a64a4[_0x4d6130(0x110)]+0.9*_0x3eeca6['filled'],_0x5bce18=_0x4a64a4['number']+1.1*_0x3eeca6[_0x4d6130(0xd6)]):(_0x58e7db=_0x4a64a4[_0x4d6130(0x110)]-1.1*_0x3eeca6[_0x4d6130(0xd6)],_0x5bce18=_0x4a64a4[_0x4d6130(0x110)]-0.9*_0x3eeca6['filled']);const _0x153cfc=_0x3eeca6['filled']!=0x0&&_0x20419e[_0x4d6130(0x110)]>=_0x58e7db&&_0x20419e[_0x4d6130(0x110)]<=_0x5bce18;_0x154ae3['push'](_0x153cfc);if(_0x153cfc&&config[_0x4d6130(0xf4)]!=_0x4d6130(0x16b)){if(_0x3eeca6[_0x4d6130(0x175)])logHistory('order','Order\x20filled:\x20'+_0x3eeca6[_0x4d6130(0x199)]+'\x20'+_0x3eeca6[_0x4d6130(0x10d)]+'\x20#'+formatResult(_0x3eeca6[_0x4d6130(0xd6)]/_0x3eeca6[_0x4d6130(0x139)],0x8)+'\x20@'+formatResult(_0x3eeca6['price'],0x8));else logHistory(_0x4d6130(0xb6),'Order\x20filled:\x20'+_0x3eeca6[_0x4d6130(0x199)]+'\x20'+_0x3eeca6[_0x4d6130(0x10d)]+'\x20#'+formatResult(_0x3eeca6[_0x4d6130(0xd6)],0x8)+'\x20@'+formatResult(_0x3eeca6[_0x4d6130(0x139)],0x8));}}),_0x154ae3[_0x4e01bc(0xd7)]((_0x410c2e,_0x4294ae)=>{const _0x1c4d51=_0x4e01bc;if(_0x410c2e)lastOrders[_0x1c4d51(0xa9)](_0x4294ae,0x1);});if(_0x28200f<_0x246871&&_0x154ae3['includes'](![])){if(_0x28200f==0x0){config[_0x4e01bc(0xf4)]==_0x4e01bc(0x16b)?logHistory(_0x4e01bc(0x13e),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x4e01bc(0x13e),_0x4e01bc(0x19d));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x28200f);},0xa*0x3e8);}else{(_0x28200f==0x1||_0x28200f==Math[_0x4e01bc(0x122)](_0x246871/0x2)||_0x28200f==_0x246871-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x28200f);},validateOrderInterval);}}else{lockOrders=![];if(_0x28200f>0x0&&!_0x154ae3[_0x4e01bc(0x109)](![]))config[_0x4e01bc(0xf4)]=='market'?logHistory(_0x4e01bc(0xea),_0x4e01bc(0x153)):logHistory('success',_0x4e01bc(0x161));else _0x28200f>0x0&&_0x154ae3[_0x4e01bc(0x109)](![])&&(config[_0x4e01bc(0xf4)]=='market'?logHistory(_0x4e01bc(0xea),_0x4e01bc(0xce)+Math['round'](_0x246871*validateOrderInterval/0xea60)+_0x4e01bc(0xb3)):(lastOrders[_0x4e01bc(0xd7)](async _0x5a96b8=>{const _0x2d1b8e=_0x4e01bc;try{const _0x3a9209=await exchange[_0x2d1b8e(0xf5)](_0x5a96b8[_0x2d1b8e(0xcb)],_0x5a96b8[_0x2d1b8e(0x199)]);}catch(_0x16f6b9){if(_0x16f6b9[_0x2d1b8e(0x11f)]()[_0x2d1b8e(0x109)](_0x2d1b8e(0xe9))){}else await handleError(_0x16f6b9,_0x2d1b8e(0xb0));}}),logHistory(_0x4e01bc(0xea),_0x4e01bc(0x16e)+Math[_0x4e01bc(0x122)](_0x246871*validateOrderInterval/0xea60)+_0x4e01bc(0xb3))));}}async function resetCoinResults(){const _0x4cf6b3=_0x228c68;dbCoinResults['get'](_0x4cf6b3(0xb7))['remove']()[_0x4cf6b3(0x193)]();let _0x384628=await getStartingBalances(![]);_0x384628['coins'][_0x4cf6b3(0xd7)](_0x3505ac=>{const _0x60ff56=_0x4cf6b3,_0x18eeb4=_0x3505ac[_0x60ff56(0x199)]['includes'](config[_0x60ff56(0x15a)]+'/');if(_0x3505ac[_0x60ff56(0x14d)]!=config[_0x60ff56(0x15a)]){let _0x57b277={'coin':_0x3505ac['coin'],'number':_0x3505ac[_0x60ff56(0x110)],'breakeven':_0x3505ac['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x60ff56(0xc4)](_0x57b277)['write']();}});}async function updateCoinResults(_0x381fbc){const _0x138b3a=_0x228c68;let _0x1cd9f9,_0x3dfdcb,_0x66228b,_0xd8cfdd,_0x1378df,_0x3d80a4,_0x2e0f71=dbCoinResults['get'](_0x138b3a(0xb7))[_0x138b3a(0xe3)]({'coin':_0x381fbc[_0x138b3a(0x14d)]})[_0x138b3a(0x19e)]();if(!_0x2e0f71)return;if(_0x381fbc['fee']&&_0x381fbc[_0x138b3a(0xc2)][_0x138b3a(0xe5)]==config[_0x138b3a(0x15a)])_0x1cd9f9=_0x381fbc[_0x138b3a(0xc2)][_0x138b3a(0x140)];else{if(_0x381fbc['fee']&&_0x381fbc[_0x138b3a(0xc2)]['currency']=='BNB')_0x1cd9f9=_0x381fbc['fee'][_0x138b3a(0x140)]*global[_0x138b3a(0x141)][_0x138b3a(0x130)+config['basecoin']];else _0x1cd9f9=0.001*_0x381fbc['filled'];}const _0x399ecb=_0x381fbc['symbol'][_0x138b3a(0x109)](config['basecoin']+'/');_0x399ecb&&(_0x3d80a4={'coin':_0x381fbc[_0x138b3a(0x14d)],'symbol':_0x381fbc[_0x138b3a(0x199)],'filled':_0x381fbc['filled']*_0x381fbc[_0x138b3a(0x139)],'side':_0x381fbc[_0x138b3a(0x10d)]==_0x138b3a(0x95)?_0x138b3a(0x148):_0x138b3a(0x95),'price':0x1/_0x381fbc[_0x138b3a(0x139)]},_0x381fbc={..._0x3d80a4});_0x381fbc[_0x138b3a(0x10d)]==_0x138b3a(0x148)?_0x66228b=(_0x2e0f71[_0x138b3a(0x10e)]*_0x2e0f71['number']+_0x381fbc[_0x138b3a(0x139)]*_0x381fbc['filled'])/(_0x2e0f71[_0x138b3a(0x110)]+_0x381fbc[_0x138b3a(0xd6)]):_0x66228b=(_0x2e0f71[_0x138b3a(0x10e)]*_0x2e0f71[_0x138b3a(0x110)]-_0x381fbc[_0x138b3a(0x139)]*_0x381fbc[_0x138b3a(0xd6)])/(_0x2e0f71[_0x138b3a(0x110)]-_0x381fbc[_0x138b3a(0xd6)]);_0x381fbc['side']==_0x138b3a(0x148)?_0xd8cfdd=_0x2e0f71[_0x138b3a(0xc5)]:_0xd8cfdd=_0x2e0f71['realized']+(_0x381fbc['price']-_0x2e0f71[_0x138b3a(0x10e)])*_0x381fbc['filled'];_0x3dfdcb=_0x381fbc['side']==_0x138b3a(0x95)?_0x2e0f71[_0x138b3a(0x110)]-_0x381fbc['filled']:_0x2e0f71[_0x138b3a(0x110)]+_0x381fbc[_0x138b3a(0xd6)],_0x1378df=(_0x381fbc['price']-_0x66228b)*_0x3dfdcb;let _0x4c8d9a={'coin':_0x381fbc[_0x138b3a(0x14d)],'number':_0x3dfdcb,'breakeven':formatResult(_0x66228b,0x8),'realized':formatResult(_0xd8cfdd,0x8),'unrealized':formatResult(_0x1378df,0x8),'fees':formatResult(_0x2e0f71['fees']+_0x1cd9f9,0x8),'sells':_0x381fbc[_0x138b3a(0x10d)]=='sell'?_0x2e0f71[_0x138b3a(0x144)]+0x1:_0x2e0f71[_0x138b3a(0x144)],'buys':_0x381fbc[_0x138b3a(0x10d)]==_0x138b3a(0x148)?_0x2e0f71['buys']+0x1:_0x2e0f71['buys']};dbCoinResults[_0x138b3a(0xc0)](_0x138b3a(0xb7))[_0x138b3a(0xe3)]({'coin':_0x381fbc['coin']})[_0x138b3a(0xf8)](_0x4c8d9a)[_0x138b3a(0x193)]();}async function placeOrder(_0xf65da6){const _0x379f0a=_0x228c68,_0x488841=config[_0x379f0a(0xf4)]==_0x379f0a(0x16b)?_0x379f0a(0x16b):_0x379f0a(0x16a);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x379f0a(0xe0)](JSON[_0x379f0a(0xca)](currentCoins));for(const _0x2e4ccf of _0xf65da6){let _0x4a5461,_0xd3a8c7,_0x15b6dd,_0x45485a,_0x1d9caf,_0xaba836=_0x2e4ccf['symbol'];try{const _0x23b1e3=await exchange[_0x379f0a(0x187)](_0xaba836),_0x17e8a8=_0x23b1e3[_0xaba836];_0x4a5461=_0x17e8a8[_0x379f0a(0x9b)],_0xd3a8c7=_0x17e8a8[_0x379f0a(0x176)],_0x15b6dd=_0x17e8a8[_0x379f0a(0x180)];_0x2e4ccf[_0x379f0a(0x175)]?(_0x45485a=_0x2e4ccf[_0x379f0a(0x10d)]=='buy'?'sell':_0x379f0a(0x148),_0x1d9caf=Math[_0x379f0a(0x16f)](_0x2e4ccf[_0x379f0a(0x171)])/_0x4a5461):(_0x45485a=_0x2e4ccf['side'],_0x1d9caf=Math[_0x379f0a(0x16f)](_0x2e4ccf[_0x379f0a(0x171)]));_0x488841=='limit'&&(config[_0x379f0a(0xf4)]==_0x379f0a(0x108)&&(_0x4a5461=_0x45485a=='buy'?_0xd3a8c7:_0x15b6dd),config[_0x379f0a(0xf4)]==_0x379f0a(0xe6)&&(_0x4a5461=_0x45485a==_0x379f0a(0x148)?_0x15b6dd:_0xd3a8c7));_0x1d9caf=formatResult(_0x1d9caf,0x8),_0x4a5461=formatResult(_0x4a5461,0x8);const _0x41b2dc=await exchange[_0x379f0a(0x12b)](_0xaba836,_0x488841,_0x45485a,_0x1d9caf,_0x4a5461);lastOrders[_0x379f0a(0xc4)]({'orderId':_0x41b2dc['id'],'symbol':_0xaba836,'side':_0x45485a,'reverse':_0x2e4ccf['reverse'],'amount':_0x2e4ccf['reverse']?_0x41b2dc[_0x379f0a(0xdb)]*_0x41b2dc[_0x379f0a(0x139)]:_0x41b2dc['amount'],'filled':_0x2e4ccf[_0x379f0a(0x175)]?_0x41b2dc[_0x379f0a(0xd6)]*_0x41b2dc['price']:_0x41b2dc[_0x379f0a(0xd6)],'price':_0x41b2dc['price']});const _0x2aeff3=_0x45485a==_0x379f0a(0x95)?config[_0x379f0a(0x177)]?String[_0x379f0a(0xd0)]('0x'+config[_0x379f0a(0x177)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x2b21a2=_0x488841==_0x379f0a(0x16b)?'Market':config[_0x379f0a(0xf4)]==_0x379f0a(0x108)?'Limit\x20(high-margin)':_0x379f0a(0x123);if(_0x488841=='market')logHistory(_0x379f0a(0xb6),''+_0x2aeff3+_0x2b21a2+_0x379f0a(0xd3)+_0xaba836+'\x20'+_0x45485a+'\x20#'+formatResult(_0x41b2dc[_0x379f0a(0xd6)],0x8)+'\x20@'+formatResult(_0x41b2dc['price'],0x8));else logHistory('order',''+_0x2aeff3+_0x2b21a2+_0x379f0a(0xd3)+_0xaba836+'\x20'+_0x45485a+'\x20#'+formatResult(_0x41b2dc[_0x379f0a(0xdb)],0x8)+'\x20@'+formatResult(_0x41b2dc[_0x379f0a(0x139)],0x8));_0x41b2dc[_0x379f0a(0x14d)]=_0x2e4ccf[_0x379f0a(0x14d)],await updateCoinResults(_0x41b2dc);if(config[_0x379f0a(0x185)]!=0x0){let _0xae9d21=null;if(cooldownTracker[_0x379f0a(0x17f)]==config[_0x379f0a(0x185)]-0x1)_0xae9d21=cooldownTracker[_0x379f0a(0xc3)]();const _0x25a48e=getTimeStamp();cooldownTracker[_0x379f0a(0xc4)](_0x25a48e);if(_0xae9d21){const _0x279c7c=fns[_0x379f0a(0xb1)](new Date(_0x25a48e),new Date(_0xae9d21));_0x279c7c<cooldownInterval&&(logHistory(_0x379f0a(0x13e),_0x379f0a(0x121)+config[_0x379f0a(0x185)]+_0x379f0a(0x124)+cooldownInterval/0x3c+_0x379f0a(0xbe)+cooldownPeriod/(0xe10*0x3e8)+_0x379f0a(0xdd)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x26e2bc){if(_0x26e2bc[_0x379f0a(0x11f)]()['includes'](_0x379f0a(0xe8)))logHistory(_0x379f0a(0x13e),_0x379f0a(0x166)+_0xaba836);else{if(_0x26e2bc[_0x379f0a(0x11f)]()['includes'](_0x379f0a(0x126)))logHistory(_0x379f0a(0x13e),_0x379f0a(0xdc)+_0xaba836);else await handleError(_0x26e2bc,_0x379f0a(0x151));}}}if(lastOrders[_0x379f0a(0x17f)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x379f0a(0xa6)]&&(config[_0x379f0a(0xf4)]==_0x379f0a(0x16b)?logHistory(_0x379f0a(0x13e),_0x379f0a(0x127)):logHistory(_0x379f0a(0x13e),_0x379f0a(0xc9)));else coolingDown&&(!config['headless']&&logHistory(_0x379f0a(0x13e),_0x379f0a(0xf0)));}}function logHistory(_0x3a0690,_0x1900ed,_0x345538=''){const _0x2ac1b6=_0x228c68;let _0x2863f1={'time':getTimeStamp(),'type':_0x3a0690,'event':_0x1900ed,'botname':config[_0x2ac1b6(0x9a)],'showname':config[_0x2ac1b6(0x181)]};dbLogs[_0x2ac1b6(0xc0)](_0x2ac1b6(0x106))[_0x2ac1b6(0xc4)](_0x2863f1)[_0x2ac1b6(0x193)]();if(_0x345538=='')_0x345538=_0x1900ed;proxyEmit(_0x2ac1b6(0x18a),{'log':_0x2863f1,'summary':_0x345538}),process[_0x2ac1b6(0xfc)]({'telegram':_0x2863f1}),logging(''+_0x2863f1[_0x2ac1b6(0x18a)]);}function emitHistory(_0x263997={}){const _0x47504d=_0x228c68;Object[_0x47504d(0xa4)](_0x263997)[_0x47504d(0x17f)]==0x0&&(_0x263997={'type':[_0x47504d(0xb6),_0x47504d(0x18a)],'event':'','page':0x1});if(_0x263997['type'][_0x47504d(0x109)](_0x47504d(0x18a)))_0x263997['type']['splice'](_0x263997[_0x47504d(0x159)][_0x47504d(0x15b)](_0x47504d(0x18a)),0x1,'error',_0x47504d(0xea));if(dbLogs[_0x47504d(0x143)](_0x47504d(0x106))[_0x47504d(0x19e)]()){let _0x55ffa0=dbLogs[_0x47504d(0xc0)](_0x47504d(0x106))[_0x47504d(0xd5)](_0x4f2ca7=>{const _0x418591=_0x47504d;if(_0x263997[_0x418591(0x159)][_0x418591(0x17f)]==0x0)return![];else return _0x263997[_0x418591(0x159)][_0x418591(0x109)](_0x4f2ca7[_0x418591(0x159)]);})['filter'](_0x4dd318=>{const _0x55461f=_0x47504d;if(_0x263997[_0x55461f(0x18a)]=='')return!![];else return _0x4dd318[_0x55461f(0x18a)]['toLowerCase']()[_0x55461f(0x109)](_0x263997['event'][_0x55461f(0xb9)]());})[_0x47504d(0xc7)](_0x47504d(0x9e)),_0x2492b1=_0x55ffa0[_0x47504d(0x19e)]()[_0x47504d(0x17f)];_0x55ffa0=_0x55ffa0[_0x47504d(0x175)]()['slice']((_0x263997[_0x47504d(0x113)]-0x1)*logPageSize,_0x263997[_0x47504d(0x113)]*logPageSize-0x1)[_0x47504d(0x175)]()[_0x47504d(0x19e)](),proxyEmit(_0x47504d(0x14c),{'logs':_0x55ffa0,'total':_0x2492b1});}else proxyEmit(_0x47504d(0x14c),{'logs':[],'total':0x0});}async function pauseBot(_0x3ec74e){const _0x2a0a3a=_0x228c68,_0x46b98a=new Date()[_0x2a0a3a(0xed)]();if(!lastBotPause)lastBotPause=new Date()[_0x2a0a3a(0xed)](),consecutivePauses=0x1;else{if(_0x46b98a-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x2a0a3a(0xfc)]({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x2a0a3a(0xed)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2a0a3a(0x13e),_0x2a0a3a(0x101)+consecutivePauses+')'),await sleep(_0x3ec74e),botPaused=![],reset();}}async function handleError(_0x1118da,_0x1e2198,_0x23f22a=''){const _0xe1de8f=_0x228c68;if(_0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0xaf)))logHistory('error',_0x1e2198+_0xe1de8f(0xa3)),await pauseBot(pauseBotInterval);else{if(_0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0x96)))logHistory('error',_0x1e2198+_0xe1de8f(0xac)),await pauseBot(pauseBotInterval);else{if(_0x1118da[_0xe1de8f(0x11f)]()['includes'](_0xe1de8f(0xf2)))logHistory('error',_0x1e2198+_0xe1de8f(0x19b)),await pauseBot(pauseBotInterval);else{if(_0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0x117)))logHistory(_0xe1de8f(0x13e),_0x1e2198+_0xe1de8f(0x119)),logHistory(_0xe1de8f(0x13e),_0xe1de8f(0x142)),process[_0xe1de8f(0xfc)]({'stop':_0xe1de8f(0xfa)});else{if(_0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0x14f)))logHistory(_0xe1de8f(0x13e),_0x1e2198+_0xe1de8f(0x18e)),logHistory(_0xe1de8f(0x13e),_0xe1de8f(0x142)),process[_0xe1de8f(0xfc)]({'stop':_0xe1de8f(0xfa)});else{if(_0x1118da[_0xe1de8f(0x11f)]()['includes'](_0xe1de8f(0x158)))logHistory(_0xe1de8f(0x13e),_0x1e2198+_0xe1de8f(0x14e)),logHistory(_0xe1de8f(0x13e),_0xe1de8f(0x142)),process['send']({'stop':_0xe1de8f(0xfa)});else{if(_0x1118da[_0xe1de8f(0x11f)]()['includes'](_0xe1de8f(0x99)))logHistory('error',_0x1e2198+_0xe1de8f(0x13a)),logHistory(_0xe1de8f(0x13e),_0xe1de8f(0x142)),process[_0xe1de8f(0xfc)]({'stop':_0xe1de8f(0xfa)});else{if(_0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0x156)))logHistory(_0xe1de8f(0x13e),_0x1e2198+_0xe1de8f(0x196)),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'});else _0x1118da[_0xe1de8f(0x11f)]()[_0xe1de8f(0x109)](_0xe1de8f(0xcc))?logHistory('error',_0x1e2198+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0xe1de8f(0x13e),_0x1e2198+_0xe1de8f(0x116)),logging(_0x1e2198+'\x20|\x20Error\x20details:\x20',_0x1118da),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x4e40a3,_0x49dead){const _0x32b573=_0x228c68;return parseFloat(_0x4e40a3[_0x32b573(0x118)](_0x49dead));}function logging(_0x410f38,_0x33a0bf=''){const _0x39efc4=_0x228c68;if(config[_0x39efc4(0x181)])console['log'](getTimeStamp()+':\x20'+config[_0x39efc4(0x9a)]+_0x39efc4(0xcd)+_0x410f38,_0x33a0bf);else console[_0x39efc4(0x147)](getTimeStamp()+':\x20Bot\x20'+botID+_0x39efc4(0xcd)+_0x410f38,_0x33a0bf);}function getServerTime(){const _0x220656=_0x228c68,_0x2046d4=new Date();return _0x2046d4[_0x220656(0xfe)]()+'/'+(_0x2046d4['getMonth']()+0x1)[_0x220656(0x11f)]()[_0x220656(0x198)](0x2,'0')+'/'+_0x2046d4[_0x220656(0x162)]()[_0x220656(0x11f)]()[_0x220656(0x198)](0x2,'0')+'\x20'+_0x2046d4['getHours']()[_0x220656(0x11f)]()[_0x220656(0x198)](0x2,'0')+':'+_0x2046d4[_0x220656(0x146)]()[_0x220656(0x11f)]()['padStart'](0x2,'0')+':'+_0x2046d4[_0x220656(0x98)]()[_0x220656(0x11f)]()[_0x220656(0x198)](0x2,'0');}function getTimeStamp(){const _0x16a8b1=_0x228c68,_0x25ac37=shiftedTime();return _0x25ac37['getFullYear']()+'/'+(_0x25ac37[_0x16a8b1(0xde)]()+0x1)[_0x16a8b1(0x11f)]()[_0x16a8b1(0x198)](0x2,'0')+'/'+_0x25ac37[_0x16a8b1(0x162)]()[_0x16a8b1(0x11f)]()[_0x16a8b1(0x198)](0x2,'0')+'\x20'+_0x25ac37[_0x16a8b1(0x19c)]()[_0x16a8b1(0x11f)]()[_0x16a8b1(0x198)](0x2,'0')+':'+_0x25ac37['getMinutes']()[_0x16a8b1(0x11f)]()[_0x16a8b1(0x198)](0x2,'0')+':'+_0x25ac37[_0x16a8b1(0x98)]()[_0x16a8b1(0x11f)]()['padStart'](0x2,'0');}function getDate(){const _0x4b21b5=_0x228c68,_0x137772=shiftedTime();return _0x137772[_0x4b21b5(0xfe)]()+'/'+(_0x137772[_0x4b21b5(0xde)]()+0x1)[_0x4b21b5(0x11f)]()[_0x4b21b5(0x198)](0x2,'0')+'/'+_0x137772['getDate']()[_0x4b21b5(0x11f)]()[_0x4b21b5(0x198)](0x2,'0');}function getHour(){const _0x556517=_0x228c68,_0x4d74fb=shiftedTime();return _0x4d74fb[_0x556517(0x19c)]()['toString']()[_0x556517(0x198)](0x2,'0');}function sleep(_0x3cce9f){return new Promise(_0x3f4025=>setTimeout(_0x3f4025,_0x3cce9f));}function shiftedTime(){const _0x2826ed=_0x228c68,_0x2ffefd=new Date();let _0xad8b1f=_0x2ffefd;if(config&&config['timeshift']!==0x0)_0xad8b1f=fns[_0x2826ed(0x194)](_0x2ffefd,{'hours':config[_0x2826ed(0x17b)]});return _0xad8b1f;}