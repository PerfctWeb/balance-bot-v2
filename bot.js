const _0x1348f9=_0x4120;(function(_0x5c841d,_0x54746d){const _0x4ab4d4=_0x4120,_0x3d6f69=_0x5c841d();while(!![]){try{const _0x564735=parseInt(_0x4ab4d4(0x1f5))/0x1*(-parseInt(_0x4ab4d4(0x24a))/0x2)+-parseInt(_0x4ab4d4(0x24d))/0x3*(parseInt(_0x4ab4d4(0x277))/0x4)+parseInt(_0x4ab4d4(0x296))/0x5*(parseInt(_0x4ab4d4(0x204))/0x6)+-parseInt(_0x4ab4d4(0x1ef))/0x7+-parseInt(_0x4ab4d4(0x161))/0x8*(parseInt(_0x4ab4d4(0x26d))/0x9)+parseInt(_0x4ab4d4(0x137))/0xa+parseInt(_0x4ab4d4(0x118))/0xb;if(_0x564735===_0x54746d)break;else _0x3d6f69['push'](_0x3d6f69['shift']());}catch(_0x37202a){_0x3d6f69['push'](_0x3d6f69['shift']());}}}(_0x4079,0x5a7de));const _0x269d8d=function(){let _0x334656=!![];return function(_0x9512d1,_0x31b24d){const _0x866cf5=_0x334656?function(){const _0x19f903=_0x4120;if(_0x31b24d){const _0x56f158=_0x31b24d[_0x19f903(0x1a3)](_0x9512d1,arguments);return _0x31b24d=null,_0x56f158;}}:function(){};return _0x334656=![],_0x866cf5;};}(),_0x240974=_0x269d8d(this,function(){const _0x511114=_0x4120;return _0x240974[_0x511114(0x1f8)]()[_0x511114(0x281)](_0x511114(0x1b3))[_0x511114(0x1f8)]()[_0x511114(0x28a)](_0x240974)[_0x511114(0x281)](_0x511114(0x1b3));});_0x240974();function _0x4120(_0x49f278,_0x45a462){const _0x590273=_0x4079();return _0x4120=function(_0x240974,_0x269d8d){_0x240974=_0x240974-0x115;let _0x407946=_0x590273[_0x240974];return _0x407946;},_0x4120(_0x49f278,_0x45a462);}'use strict';const ccxt=require(_0x1348f9(0x115)),low=require(_0x1348f9(0x21c)),FileSync=require(_0x1348f9(0x1ba)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x1348f9(0x27e))['Crypt'],util=require('util'),argv=require(_0x1348f9(0x271))(process[_0x1348f9(0x1f0)][_0x1348f9(0x1e0)](0x2))['argv'],path=require('path');let exchange;global[_0x1348f9(0x13d)]={},global[_0x1348f9(0x209)]={};const usdBasecoins=[_0x1348f9(0x231),_0x1348f9(0x195),_0x1348f9(0x244),'USDT',_0x1348f9(0x19c),_0x1348f9(0x169)],debugging=argv['d']||![];function _0x4079(){const _0x5ab558=['ticker','1\x20-\x20Unlock\x20orders','ask','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','parseISO','\x20hour','apiKey','/USD','startsWith','\x20not\x20responding','fetchTickers','emojisell','open','openOrders','starting-balances','\x20>\x20[DEBUG]\x20','ORDERS.LOCKED','coin','stopExchange()','limit-high','min','price','getPortfolio(2)','\x20has\x20a\x2024h\x20drop\x20of\x20','timestamp','apiSecret','\x20order:\x20','OnMaintenance','trade','side','exchange','page','secure','Huobipro','cooldown','emitHistory','1207272ELRABL','value','Order\x20filled:\x20','Invalid\x20symbol:\x20','no\x20open\x20orders','storeConfiguration','toggleBotMode','2\x20-\x20Validate\x20orders:\x20','USDP','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','customId','apiPassword','botID','split','fetchTicker','Limit\x20(high-margin)','sortBy','loadMarkets','\x20network\x20error','watchOrders','cancel','AuthenticationError','Binance','length','round','basecoin','getMinutes','Order(s)\x20not\x20validated\x20after\x20','RateLimitExceeded','\x20>\x20','symbol','parse','fetchOpenOrders','performance','remainingSymbols','logs','password','-events.json','splice','ID:\x20','join','Saving\x20configuration','BNB','Manual\x20balancing\x20required','offset','target','toLowerCase','message','entries','added','configuration','portfolio','BUSD','ExchangeNotAvailable','BNB/','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','ETH','removed','deleteHistoryAlerts','USDC','args','debug','0\x20-\x20EXECUTION:\x20','configuration-stored','decrypt','MIN_NOTIONAL','apply','\x20|\x20Custom\x20ID:\x20','<pre>','startnumber','fee','getPortfolio(0)','abs','fetchTickers()','log','recreate','sort','\x20|\x20exchange:\x20','floor','LOCKED','fetchBalance','exchanges','(((.+)+)+)+$','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','string','add','spot','fromCodePoint','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','lowdb/adapters/FileSync','differenceInSeconds','netoffset','includes','write','fiat','************','defaults','1\x20-\x20Handle\x20open\x20orders','order','RequestTimeout','buys','concat','placeOrder','version','initial','getCoinNumber()','Trigger:\x20','percentage','padStart','leftTxt','currency','balances','Limit\x20(low-margin)','keys','number','sells','bb-secure.json','pro','Net\x20effect','time','\x20-\x20pausing\x20bot\x20for\x20','filter','data','enabled','-results.json','botname','existsSync','slice','push','coins','2.6.0','toUpperCase','reverse','starting-balance-','test','remove','001','\x20metrics:</b>\x20\x0a\x0a','createWriteStream','-performance.json','shift','\x20|\x20highest\x20fee:\x20','4584335YZhxvU','argv','recent20','none','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','UNLOCKED','449767zOumEo','function','Error\x20while\x20deleting\x20files:\x20','toString','\x20not\x20available','./logs/','send','stringify','Executing\x20exchange\x20reload','***','liquidity','<b>Bot\x20','\x20/\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','orderstatus','2119890KTswmx','\x20change','Bybit','getPortfolio','delta','change','max','storeFiat','rightTxt','Unfilled\x20order(s)\x20canceled\x20after\x20','ordertype','RSA-OAEP','last','Unknown\x20error\x20occured','highest',':\x20Bot\x20','exec','watchTrades','amount','warning','watchOrders()','unlinkSync','/output-000.log','\x20:\x20','lowdb','error','Bitget','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Reset\x20|\x20','loadSymbols()','startprice','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getFullYear','replace','excluded','running','bot','\x20API\x20secret\x20is\x20invalid','Error\x20details:','average','recreateCoinResults()','Cex','getSeconds','Invalid\x20API\x20key\x20or\x20secret\x20entered','limits','USD','sell','market','headless','%\x20(','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','change24h','onepagemode','Error:\x20Invalid\x20argument\x20','emojibuy','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','close','basecoinvalue','must\x20be\x20greater\x20than\x20minimum\x20amount','OrderNotFound','ORDERS.UNLOCKED','mkdirSync','Resetting\x20coin\x20results:\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','TUSD','getStartingBalances','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','loading-canceled','getMonth','getHours','2LxXAnx','bb-settings.json','type','114657OBBeIU','startdate','DDoSProtection','balancing\x20resumed','timeshift','buy','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','-------------------------------\x0a','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','final','progress','createOrder','autoliquidity','indexOf','Exchange','Cooldown\x20ended\x20-\x20balancing\x20resumed','storeHeadless','NetworkError','2\x20-\x20Orders\x20unlocked','get','net-fiat','showname','changes','\x20-\x20bot\x20not\x20started','Huobi','eur','\x20value','2.3.5','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2.5.0','assign','findIndex','9LjwDcL','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','distribution','<b>','yargs/yargs','threshold','Order\x20amount\x20is\x20invalid:\x20','cost','padEnd','toFixed','16BoZfDO','date','limit','isEqual','privateKey','getPortfolio(1)','usd','hybrid-crypto-js','\x20|\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','search','getTime','Insufficient\x20funds\x20to\x20execute\x20order:\x20','breakeven','exchange\x20reloaded','kill','EUR','active','yyyy/MM/dd','constructor','Pausing\x20for\x20','API-key\x20format\x20invalid','\x20minutes\x20-\x20','UNLOCKING','restart','Exception\x20thrown\x20in\x20','Resetting\x20bot\x20history','orderId','writeFile','ORDERS.UNLOCKING','\x20closed\x20the\x20connection','10UylLXz','limit-low','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Transaction\x20detection\x20unblocked','exchange\x20not\x20reloaded','getOpenOrders()','format','red_yellow_blue','cancelOrder','substring','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','find','bots','event-history','fetchClosedOrders','map','initclient','Fee\x20discount\x20refund\x20detected:\x20','filled','total','sendPortfolioTelegram','1\x20-\x20FILLED\x20known\x20order:\x20','net-basecoin','colorscheme','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','closed','bot-','forEach','./config/','BTC','/EUR','status','InvalidOrder','\x20portfolio:</b>\x20\x0a\x0a','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','timeout','ccxt','\x20|\x20lock\x20orders:\x20','1\x20-\x20Validate\x20orders:\x20','8241134QkPZSs','</pre>','watchTransactions()','ongoing','valid','freeze','Initializing\x20coin\x20results','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','showConfig','realized','success','Portfolio\x20change\x20detected:\x20','cloneDeep','bid','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','event','Loading\x20completed','Bot\x20','Market','ExchangeError','Waited\x20','getDate','1\x20-\x20FILLED\x20unknown\x20order:\x20','canceled','\x20exchange','datetime','full','has','yyyy-MM-dd\x27T\x27HH:mm:ss','getAllOrders()','Headless:\x20','3232870VNJzRw',':\x20timer\x20>','set','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','.json','./version.json'];_0x4079=function(){return _0x5ab558;};return _0x4079();}let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1348f9(0x11d)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1348f9(0x1f4)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1348f9(0x1d9)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1348f9(0x13c))['version'],botID=process[_0x1348f9(0x1f0)][0x2]||_0x1348f9(0x1e9),pattern=/^[0-9]{3}$/;!pattern[_0x1348f9(0x1e7)](botID)&&(console[_0x1348f9(0x1ab)](_0x1348f9(0x239)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x1348f9(0x1f0)][0x3]||'',configpath=userID?_0x1348f9(0x2b2)+userID+'/':_0x1348f9(0x2b2),logspath=userID?_0x1348f9(0x1fa)+userID+'/':_0x1348f9(0x1fa),loggerfile=fs[_0x1348f9(0x1eb)](logspath+_0x1348f9(0x21a),{'flags':'a'});!fs[_0x1348f9(0x1df)](configpath)&&fs[_0x1348f9(0x241)](configpath);!fs[_0x1348f9(0x1df)](logspath)&&fs[_0x1348f9(0x241)](logspath);const configfile=configpath+_0x1348f9(0x2b0)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x1348f9(0x186),performancefile=configpath+_0x1348f9(0x2b0)+botID+_0x1348f9(0x1ec),coinresultsfile=configpath+_0x1348f9(0x2b0)+botID+_0x1348f9(0x1dd),settingsfile=configpath+_0x1348f9(0x24b),securefile=configpath+_0x1348f9(0x1d5),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x1348f9(0x1be)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1348f9(0x1c1)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1348f9(0x1c1)]({'bot':[],'version':serverversion})[_0x1348f9(0x1be)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1348f9(0x1c1)]({'coins':[],'version':serverversion})[_0x1348f9(0x1be)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x1348f9(0x20f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x48e5ff=>{const _0x2c9028=_0x1348f9;console[_0x2c9028(0x1ab)](_0x48e5ff);},'simple':_0x526880=>{const _0x475420=_0x1348f9;console[_0x475420(0x1ab)](_0x526880),loggerfile['write'](util[_0x475420(0x29c)](_0x526880)+'\x0a');},'full':async(_0x24a6e3,_0x44ce4a='')=>{const _0x25b163=_0x1348f9;let _0x346620;if(config[_0x25b163(0x262)])_0x346620=getTimeStamp()+':\x20'+config[_0x25b163(0x1de)]+_0x25b163(0x17e)+_0x24a6e3;else _0x346620=getTimeStamp()+_0x25b163(0x213)+botID+_0x25b163(0x17e)+_0x24a6e3;console[_0x25b163(0x1ab)](_0x346620),loggerfile[_0x25b163(0x1be)](util[_0x25b163(0x29c)](_0x346620)+'\x0a'),_0x44ce4a&&(console[_0x25b163(0x1ab)](_0x44ce4a),loggerfile[_0x25b163(0x1be)](util[_0x25b163(0x29c)](_0x44ce4a)+'\x0a'));},'debug':async(_0x3394d5,_0xd2e925='')=>{const _0x1ded37=_0x1348f9;let _0x307a83;if(config[_0x1ded37(0x262)])_0x307a83=getTimeStamp()+':\x20'+config[_0x1ded37(0x1de)]+_0x1ded37(0x14c)+_0x3394d5;else _0x307a83=getTimeStamp()+_0x1ded37(0x213)+botID+_0x1ded37(0x14c)+_0x3394d5;if(debugging)console[_0x1ded37(0x1ab)](_0x307a83);loggerfile['write'](util[_0x1ded37(0x29c)](_0x307a83)+'\x0a');if(_0xd2e925){if(debugging)console[_0x1ded37(0x1ab)](_0xd2e925);loggerfile[_0x1ded37(0x1be)](util[_0x1ded37(0x29c)](_0xd2e925)+'\x0a');}}};process['on']('uncaughtException',function(_0x5ee5d2){const _0x496863=_0x1348f9;logHistory(_0x496863(0x21d),_0x496863(0x23b)),logger[_0x496863(0x19e)]('Uncaught\x20Exception:',_0x5ee5d2);});settings[_0x1348f9(0x251)]!=config[_0x1348f9(0x251)]&&updateTimeshift(settings[_0x1348f9(0x251)]);settings[_0x1348f9(0x238)]!=config['onepagemode']&&updateOnepagemode(settings[_0x1348f9(0x238)]);process[_0x1348f9(0x1fb)]({'started':'running'},_0x4c736d=>{}),initializeProcessListeners();function proxyEmit(_0x4bb65b,_0xa0e2a7=null){process['send']({'function':_0x4bb65b,'args':_0xa0e2a7},_0x1b26a1=>{});}function initializeProcessListeners(){process['on']('message',_0x1c8fd2=>{const _0x53c82d=_0x4120;switch(Object[_0x53c82d(0x1d2)](_0x1c8fd2)[0x0]){case'timeshift':_0x1c8fd2[_0x53c82d(0x251)]!=undefined&&(settings[_0x53c82d(0x251)]=_0x1c8fd2[_0x53c82d(0x251)],updateTimeshift(settings[_0x53c82d(0x251)]));break;case'onepagemode':_0x1c8fd2[_0x53c82d(0x238)]!=undefined&&(settings[_0x53c82d(0x238)]=_0x1c8fd2[_0x53c82d(0x238)],updateOnepagemode(settings[_0x53c82d(0x238)]));break;case _0x53c82d(0x2a2):_0x1c8fd2[_0x53c82d(0x2a2)]!=undefined&&(bots=JSON[_0x53c82d(0x180)](_0x1c8fd2['bots']),proxyEmit(_0x53c82d(0x2a2),bots));break;case _0x53c82d(0x1f6):switch(_0x1c8fd2[_0x53c82d(0x1f6)]){case _0x53c82d(0x2a6):initclient();break;case _0x53c82d(0x167):toggleBotMode();break;case _0x53c82d(0x160):emitHistory(_0x1c8fd2[_0x53c82d(0x19d)]);break;case _0x53c82d(0x19b):deleteHistoryAlerts(_0x1c8fd2[_0x53c82d(0x19d)]);break;case _0x53c82d(0x207):getPortfolio(_0x1c8fd2[_0x53c82d(0x19d)]);break;case _0x53c82d(0x166):storeConfiguration(_0x1c8fd2[_0x53c82d(0x19d)]);break;case _0x53c82d(0x25d):storeHeadless(_0x1c8fd2['args']);break;case _0x53c82d(0x20b):storeFiat(_0x1c8fd2[_0x53c82d(0x19d)]);break;case'resetHistory':resetHistory();break;case _0x53c82d(0x245):getStartingBalances(getNormalizedPerformance());break;case _0x53c82d(0x1c7):placeOrder(_0x1c8fd2[_0x53c82d(0x19d)]);break;case'cancelLoading':cancelLoading();break;case _0x53c82d(0x120):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x53c82d(0x2aa):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1b77dd=![]){const _0x25fe4e=_0x1348f9;logger[_0x25fe4e(0x19e)](_0x25fe4e(0x220)+(_0x1b77dd?_0x25fe4e(0x285):_0x25fe4e(0x29a))+_0x25fe4e(0x1ae)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x1b77dd)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x25fe4e(0x143)]!=''&&config[_0x25fe4e(0x143)]!=_0x25fe4e(0x1fe)){loadingProgress=0x0;if(_0x1b77dd){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xec5df1){handleErrorNoStop(_0xec5df1,_0x25fe4e(0x221));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xf38457=await getCoins();[currentCoins,currentCoinsAll]=_0xf38457,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x25fe4e(0x19e)](_0x25fe4e(0x128)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x25fe4e(0x178)]==0x0&&allOpenOrders[_0x25fe4e(0x178)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3b2fc3=_0x1348f9;exchangeStopped=!![];try{await exchange[_0x3b2fc3(0x23c)]();}catch(_0x4ea0d8){await handleError(_0x4ea0d8,_0x3b2fc3(0x14f));}}async function reloadExchange(){const _0x1a0a76=_0x1348f9;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x1a0a76(0x1fd)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1f861d=config[_0x1348f9(0x15b)],_0x466f02=config['apiKey'],_0x4f7452=config[_0x1348f9(0x156)],_0x313772=config[_0x1348f9(0x16c)]){const _0x20f1dc=_0x1348f9;exchange&&await stopExchange();!supportedExchanges()[_0x20f1dc(0x1bd)](_0x1f861d)&&(logHistory(_0x20f1dc(0x21d),_0x20f1dc(0x236)+_0x1f861d+_0x20f1dc(0x130)),killBot());const _0x39625a=ccxt[_0x20f1dc(0x1d6)][_0x1f861d[_0x20f1dc(0x18f)]()];exchange=new _0x39625a({'apiKey':_0x466f02,'secret':_0x4f7452,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x20f1dc(0x1b7)}});if(_0x313772)exchange[_0x20f1dc(0x185)]=_0x313772;}function setStableCoins(){const _0x226370=_0x1348f9;let _0x266ad2=config[_0x226370(0x17a)]=='ETH'?'ETH':_0x226370(0x2b3),_0x4ad075=!allSymbols['includes'](_0x266ad2+_0x226370(0x144))?'USDT':_0x226370(0x231),_0x45ec5b=!allSymbols[_0x226370(0x1bd)](_0x266ad2+_0x226370(0x2b4))?_0x4ad075:_0x226370(0x287);stablecoins={'eur':{'coin':''+_0x266ad2+_0x45ec5b,'symbol':_0x266ad2+'/'+_0x45ec5b},'usd':{'coin':''+_0x266ad2+_0x4ad075,'symbol':_0x266ad2+'/'+_0x4ad075}};}async function initwsCcxt(){const _0x4bd41c=_0x1348f9;initCycle++;const _0x2953a2=initCycle;let _0x34b907=[];config['portfolio']['forEach'](_0x3694ea=>{const _0x547a72=_0x4120;if(!_0x3694ea[_0x547a72(0x226)]&&_0x3694ea[_0x547a72(0x14e)]!=config[_0x547a72(0x17a)])_0x34b907[_0x547a72(0x1e1)](_0x3694ea['symbol']);});if(!_0x34b907['includes'](stablecoins['eur'][_0x4bd41c(0x17f)]))_0x34b907[_0x4bd41c(0x1e1)](stablecoins[_0x4bd41c(0x266)][_0x4bd41c(0x17f)]);if(!_0x34b907[_0x4bd41c(0x1bd)](stablecoins[_0x4bd41c(0x27d)]['symbol']))_0x34b907[_0x4bd41c(0x1e1)](stablecoins[_0x4bd41c(0x27d)][_0x4bd41c(0x17f)]);if(config[_0x4bd41c(0x15b)][_0x4bd41c(0x145)](_0x4bd41c(0x177))){if(!_0x34b907['includes'](_0x4bd41c(0x197)+config['basecoin']))_0x34b907[_0x4bd41c(0x1e1)](_0x4bd41c(0x197)+config['basecoin']);}loadCoins(_0x34b907),_0x34b907=validateSymbols(_0x34b907);const _0x5db1dd=async _0x5a75b7=>{const _0x18ced1=_0x4bd41c;let _0x553547;try{const _0x31fca1=await exchange[_0x18ced1(0x147)](_0x5a75b7);Object['entries'](_0x31fca1)[_0x18ced1(0x2b1)](_0x562557=>{const _0x36e54c=_0x18ced1;_0x553547=_0x562557[0x1][_0x36e54c(0x17f)],global[_0x36e54c(0x13d)][noslash(_0x553547)]=_0x562557[0x1][_0x36e54c(0x210)],global[_0x36e54c(0x209)][_0x553547]=_0x562557[0x1][_0x36e54c(0x1cc)];});}catch(_0x3720a6){await handleError(_0x3720a6,'initTickers()',_0x553547);}},_0x4ba35f=async _0x58eea9=>{const _0x517f51=_0x4bd41c;while(initCycle==_0x2953a2){if(!botPaused)try{const _0x43abb3=await exchange['watchTrades'](_0x58eea9);global[_0x517f51(0x13d)][noslash(_0x43abb3[0x0][_0x517f51(0x17f)])]=_0x43abb3[0x0][_0x517f51(0x152)],await sleep(0x3e8);}catch(_0x15a4fe){if(!exchangeStopped)await handleError(_0x15a4fe,'watchTrades()',_0x58eea9);}else await sleep(0x64);}},_0x469eb5=async _0x20e931=>{const _0x87185f=_0x4bd41c;await sleep(0x3c*0x3e8);while(initCycle==_0x2953a2){if(!botPaused){let _0x429f80;try{const _0x46abe8=await exchange[_0x87185f(0x147)](_0x20e931);Object['entries'](_0x46abe8)[_0x87185f(0x2b1)](_0x4d389a=>{const _0x5a4df2=_0x87185f;_0x429f80=_0x4d389a[0x1][_0x5a4df2(0x17f)],global['change'][_0x429f80]=_0x4d389a[0x1][_0x5a4df2(0x1cc)];}),await sleep(0x3c*0x3e8);}catch(_0x71f526){if(!exchangeStopped)await handleError(_0x71f526,_0x87185f(0x1aa),_0x429f80);}}else await sleep(0x64);}},_0xd9e55f=async _0x22e9f5=>{const _0x379bbf=_0x4bd41c;while(initCycle==_0x2953a2){if(!botPaused)try{const _0x49865b=await exchange[_0x379bbf(0x174)](_0x22e9f5);initCycle==_0x2953a2&&_0x49865b[_0x379bbf(0x2b1)](_0x17234b=>{updateNumberCoinsCcxt(_0x17234b);});}catch(_0x167109){if(!exchangeStopped)await handleError(_0x167109,_0x379bbf(0x218));}else await sleep(0x64);}};_0x5db1dd(_0x34b907),_0x469eb5(_0x34b907),_0x34b907['forEach'](_0x5826c3=>{_0x4ba35f(_0x5826c3),_0xd9e55f(_0x5826c3);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x2b226d=_0x1348f9;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x189b02=await getCoins(),[_0x4dc3f9,_0x2566c6]=_0x189b02;let _0x5a5c53=[];currentCoins['forEach'](_0x1880d1=>{const _0x5f1a86=_0x4120,_0x3f77da=_0x4dc3f9[_0x5f1a86(0x2a1)](_0x2e792f=>_0x2e792f[_0x5f1a86(0x14e)]==_0x1880d1[_0x5f1a86(0x14e)]);if(_0x3f77da){if(_0x1880d1[_0x5f1a86(0x1d3)]!=_0x3f77da[_0x5f1a86(0x1d3)]){let _0xba0d2d;if(_0x1880d1[_0x5f1a86(0x14e)]!=config['basecoin']){const _0x43d13b=global['ticker'][noslash(_0x1880d1[_0x5f1a86(0x17f)])];_0xba0d2d=_0x1880d1[_0x5f1a86(0x1e5)]?0x1/_0x43d13b:_0x43d13b;}else _0xba0d2d=0x1;_0x5a5c53[_0x5f1a86(0x1e1)]({'coin':_0x1880d1[_0x5f1a86(0x14e)],'symbol':_0x1880d1[_0x5f1a86(0x17f)],'price':_0xba0d2d,'number':Number(formatResult(_0x3f77da[_0x5f1a86(0x1d3)]-_0x1880d1['number'],0x8)),'basecoinvalue':_0xba0d2d*(_0x3f77da[_0x5f1a86(0x1d3)]-_0x1880d1[_0x5f1a86(0x1d3)])});}}});if(_0x5a5c53[_0x2b226d(0x178)]==0x1&&!blockTransactionDetection){if(config[_0x2b226d(0x259)]){logger[_0x2b226d(0x19e)](_0x2b226d(0x280)+_0x5a5c53[0x0][_0x2b226d(0x23d)]+_0x2b226d(0x1ee)+lastFees[_0x2b226d(0x212)]);if(lastFees[_0x2b226d(0x212)]==0x0||Math[_0x2b226d(0x1a9)](_0x5a5c53[0x0][_0x2b226d(0x23d)])>lastFees[_0x2b226d(0x212)]){delete _0x5a5c53[0x0]['symbol'],delete _0x5a5c53[0x0]['basecoinvalue'];let _0x4893a5=[],_0xfc225d=[...config['liquidity']]||[],_0x5a5a30=config[_0x2b226d(0x1ff)];_0xfc225d[_0x2b226d(0x1ad)]((_0x100456,_0x348844)=>_0x100456[_0x2b226d(0x278)]>_0x348844[_0x2b226d(0x278)]?-0x1:_0x348844['date']>_0x100456['date']?0x1:0x0);const _0x459c5c=getDate();if(_0xfc225d[0x0]){const _0x2d7725=fns['parse'](_0xfc225d[0x0][_0x2b226d(0x278)],_0x2b226d(0x289),new Date()),_0x2e8968=fns['parse'](_0x459c5c,'yyyy/MM/dd',new Date());if(fns[_0x2b226d(0x27a)](_0x2d7725,_0x2e8968)){_0x4893a5=_0xfc225d[0x0][_0x2b226d(0x263)];const _0x3a0c25=_0x4893a5['find'](_0x3bba74=>_0x3bba74[_0x2b226d(0x14e)]==_0x5a5c53[0x0][_0x2b226d(0x14e)]);_0x3a0c25?(_0x3a0c25[_0x2b226d(0x1d3)]+=_0x5a5c53[0x0]['number'],_0x3a0c25[_0x2b226d(0x1d3)]==0x0&&(_0x4893a5=_0x4893a5['filter'](_0x358de1=>{const _0x18d3d4=_0x2b226d;return _0x358de1[_0x18d3d4(0x14e)]!=_0x5a5c53[0x0]['coin'];}))):_0x4893a5[_0x2b226d(0x1e1)](_0x5a5c53[0x0]);const _0x48b4fe=_0x5a5a30[_0x2b226d(0x2a1)](_0x598674=>_0x598674[_0x2b226d(0x278)]==_0x459c5c);_0x48b4fe[_0x2b226d(0x263)]=_0x4893a5;}else _0x5a5a30[_0x2b226d(0x1e1)]({'date':_0x459c5c,'changes':[_0x5a5c53[0x0]]});}const _0x22f8dd=_0x5a5a30[_0x2b226d(0x2a1)](_0x5e4bda=>_0x5e4bda['date']==_0x459c5c);if(_0x22f8dd){let _0x28ff57=!![];_0x22f8dd['changes'][_0x2b226d(0x2b1)](_0x3d5ebe=>{const _0x2e5604=_0x2b226d;if(_0x3d5ebe[_0x2e5604(0x1d3)]!=0x0)_0x28ff57=![];}),_0x28ff57&&(_0x5a5a30=_0x5a5a30[_0x2b226d(0x1da)](_0x59fdda=>{return _0x59fdda['date']!=_0x459c5c;}));}let _0x1b22d4=dbConfig['get'](_0x2b226d(0x228))[_0x2b226d(0x2a1)]({'botID':botID})['value']();_0x1b22d4&&(dbConfig[_0x2b226d(0x260)](_0x2b226d(0x228))[_0x2b226d(0x2a1)]({'botID':botID})['assign']({'liquidity':_0x5a5a30})['write'](),config[_0x2b226d(0x1ff)]=_0x5a5a30),logHistory(_0x2b226d(0x122),_0x2b226d(0x123)+Math['abs'](_0x5a5c53[0x0][_0x2b226d(0x1d3)])+'\x20'+_0x5a5c53[0x0][_0x2b226d(0x14e)]+'\x20'+(_0x5a5c53[0x0]['number']>0x0?_0x2b226d(0x192):_0x2b226d(0x19a))+_0x2b226d(0x269)),proxyEmit(_0x2b226d(0x193),emittedConfiguration());}else logger[_0x2b226d(0x19e)](_0x2b226d(0x2a7)+Math[_0x2b226d(0x1a9)](_0x5a5c53[0x0][_0x2b226d(0x1d3)])+'\x20'+_0x5a5c53[0x0][_0x2b226d(0x14e)]+'\x20'+(_0x5a5c53[0x0][_0x2b226d(0x1d3)]>0x0?_0x2b226d(0x192):_0x2b226d(0x19a)));transactionDetected=!![];}else logger[_0x2b226d(0x19e)](_0x2b226d(0x123)+Math[_0x2b226d(0x1a9)](_0x5a5c53[0x0][_0x2b226d(0x1d3)])+'\x20'+_0x5a5c53[0x0][_0x2b226d(0x14e)]+'\x20'+(_0x5a5c53[0x0][_0x2b226d(0x1d3)]>0x0?_0x2b226d(0x192):'removed')+_0x2b226d(0x223));}currentCoins=_0x4dc3f9,currentCoinsAll=_0x2566c6,await sleep(watchTransactionsInterval);}catch(_0x5ec63a){if(!exchangeStopped)await handleError(_0x5ec63a,_0x2b226d(0x11a));}else await sleep(0x64);}}async function loadSymbols(){const _0x2429da=_0x1348f9;try{markets=await exchange[_0x2429da(0x172)](),allSymbols=[],Object[_0x2429da(0x191)](markets)[_0x2429da(0x2b1)](_0x4d062c=>{const _0x2c4d99=_0x2429da;_0x4d062c[0x1][_0x2c4d99(0x288)]&&_0x4d062c[0x1]['spot']&&allSymbols['push'](_0x4d062c[0x0]);});}catch(_0x4b055f){throw _0x4b055f;}}function validateSymbols(_0x46bce9){const _0x505371=_0x1348f9;let _0x34ab95=[];return _0x46bce9[_0x505371(0x2b1)](_0xed439a=>{const _0x5784dd=_0x505371;!allSymbols['includes'](_0xed439a)?logHistory(_0x5784dd(0x21d),_0x5784dd(0x164)+_0xed439a+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x34ab95[_0x5784dd(0x1e1)](_0xed439a);}),_0x34ab95;}async function initclient(){const _0x51dda2=_0x1348f9;proxyEmit(_0x51dda2(0x193),emittedConfiguration()),proxyEmit(_0x51dda2(0x1b2),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x51dda2(0x1d0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x37da9d=getNormalizedPerformance();emitPerformance(_0x37da9d),getStartingBalances(_0x37da9d);}async function toggleBotMode(){const _0x360343=_0x1348f9;let _0xda880=dbConfig[_0x360343(0x260)]('bot')['find']({'botID':botID})[_0x360343(0x162)]();if(_0xda880){const _0x887eea=!_0xda880[_0x360343(0x234)];dbConfig['get']('bot')[_0x360343(0x2a1)]({'botID':botID})[_0x360343(0x26b)]({'headless':_0x887eea})['write'](),config[_0x360343(0x234)]=_0x887eea,proxyEmit(_0x360343(0x193),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4c5736=_0x1348f9;process[_0x4c5736(0x1fb)]({'updatebotmanager':!![]},_0xfca45a=>{}),logger['debug'](_0x4c5736(0x136)+config[_0x4c5736(0x234)]);}async function loadCoins(_0x4cb0ff){const _0x18b764=_0x1348f9;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x351ede,_0x33c37c=0x0,_0x5c16a3=0x0;_0x4cb0ff[_0x18b764(0x2b1)](_0x33022=>{const _0x557442=_0x18b764;loading[_0x557442(0x183)][_0x557442(0x1e1)](_0x33022);}),loadingCanceled=![];let _0x50c68e=![];while(_0x351ede!=_0x4cb0ff['length']+maxLoadingProgress){_0x351ede=loadingProgress,_0x4cb0ff[_0x18b764(0x2b1)](_0x5af3c2=>{const _0x4ef145=_0x18b764;if(global[_0x4ef145(0x13d)][noslash(_0x5af3c2)]){loading[_0x4ef145(0x183)]=loading[_0x4ef145(0x183)][_0x4ef145(0x1da)](_0xa3f678=>_0xa3f678!=_0x5af3c2);if(!watchedSymbols[_0x4ef145(0x1bd)](_0x5af3c2))watchedSymbols[_0x4ef145(0x1e1)](_0x5af3c2);_0x351ede++;}}),loading[_0x18b764(0x257)]=Math['round'](_0x351ede/(_0x4cb0ff['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x5c16a3>0x1e*0x5&&(loading[_0x18b764(0x2b9)]=!![],emitLoadingProgress()),_0x5c16a3>0x78*0x5&&!_0x50c68e&&(_0x50c68e=!![],logHistory(_0x18b764(0x21d),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x18b764(0x183)]['join'](',\x20')+_0x18b764(0x264)),logHistory(_0x18b764(0x21d),_0x18b764(0x28b)+loadCoinsRetryInterval/0xea60+_0x18b764(0x2ae)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x16f725=_0x18b764;process[_0x16f725(0x1fb)]({'stop':_0x16f725(0x28f)},_0x230cd6=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x18b764(0x175)]=!![],emitLoadingProgress();break;}else _0x33c37c!=loading[_0x18b764(0x257)]&&(_0x33c37c=loading[_0x18b764(0x257)],emitLoadingProgress()),_0x5c16a3++,await sleep(0xc8);}_0x351ede==_0x4cb0ff['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x18b764(0x1dc),'live':_0x18b764(0x227)},_0x226868=>{}),_0x50c68e&&logHistory(_0x18b764(0x122),_0x18b764(0x255)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3bc1f0=_0x1348f9;proxyEmit(_0x3bc1f0(0x193),{...emittedConfiguration(),'configstate':_0x3bc1f0(0x247)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x20f116=_0x1348f9;let _0xc08c56=global[_0x20f116(0x13d)][stablecoins[_0x20f116(0x266)][_0x20f116(0x14e)]],_0x31b416=global[_0x20f116(0x13d)][stablecoins[_0x20f116(0x27d)][_0x20f116(0x14e)]];return{'eur':Number(_0xc08c56),'usd':Number(_0x31b416)};}function capitalize(_0x17a195){const _0x369f37=_0x1348f9;return _0x17a195[_0x369f37(0x29f)](0x0,0x1)[_0x369f37(0x1e4)]()+_0x17a195[_0x369f37(0x29f)](0x1);}function supportedExchanges(){const _0x1f40ba=_0x1348f9,_0xf08cfc=['ws',_0x1f40ba(0x147),_0x1f40ba(0x16f),_0x1f40ba(0x215),_0x1f40ba(0x174),'cancelOrder','createOrder',_0x1f40ba(0x181),_0x1f40ba(0x2a4),_0x1f40ba(0x1b1)];let _0x46bf39=[],_0x57bd63=[],_0x1381d6=ccxt[_0x1f40ba(0x1d6)][_0x1f40ba(0x1b2)];_0x1381d6[_0x1f40ba(0x2b1)](_0x281e26=>{const _0x35954d=_0x1f40ba;try{const _0x35bf33=new ccxt[(_0x35954d(0x1d6))][_0x281e26]();_0x57bd63[_0x35954d(0x1e1)](_0x35bf33);}catch(_0x5b4c34){}}),_0x57bd63[_0x1f40ba(0x2b1)](_0x3d4505=>{const _0x233e28=_0x1f40ba;let _0x33c6b3=0x0;_0xf08cfc[_0x233e28(0x2b1)](_0x304ec6=>{const _0x592fe8=_0x233e28;_0x304ec6 in _0x3d4505['has']&&_0x3d4505[_0x592fe8(0x133)][_0x304ec6]&&_0x33c6b3++;}),_0x33c6b3==_0xf08cfc[_0x233e28(0x178)]&&_0x46bf39[_0x233e28(0x1e1)](capitalize(_0x3d4505['id']));});let _0xed4df8=[];return _0x1381d6[_0x1f40ba(0x2b1)](_0x162525=>{const _0x146e8c=_0x1f40ba;_0x162525=capitalize(_0x162525);if(!_0x46bf39[_0x146e8c(0x1bd)](_0x162525))_0xed4df8['push'](_0x162525);}),_0x46bf39;}function setStartDatePerformance(){const _0xf98ee5=_0x1348f9;if(config&&config['liquidity'][0x0][_0xf98ee5(0x263)]['length']!=0x0){const _0x443bbc=config[_0xf98ee5(0x1ff)][0x0][_0xf98ee5(0x263)];dbPerformance['get']('data')[_0xf98ee5(0x2a1)]({'date':config['startdate']})['assign']({'coins':_0x443bbc})[_0xf98ee5(0x1be)]();}}async function recreateCoinResults(){const _0x4904fd=_0x1348f9;let _0x5b73a0,_0x12d66f=[];try{const _0x2d47be=fns[_0x4904fd(0x29c)](fns[_0x4904fd(0x141)](config[_0x4904fd(0x24e)][_0x4904fd(0x225)](/\//g,'-')),_0x4904fd(0x134));for(const _0x4225c7 of currentCoins){if(_0x4225c7[_0x4904fd(0x14e)]!=config[_0x4904fd(0x17a)]){let _0x597455=0x0,_0x1215a4,_0x362544;_0x5b73a0=await getAllEventOrders(_0x4225c7[_0x4904fd(0x17f)]);if(_0x5b73a0[_0x4904fd(0x178)]>0x0)_0x5b73a0[_0x4904fd(0x2b1)](_0x2f80e4=>{const _0x4f4b42=_0x4904fd,_0x176337=_0x4225c7['symbol'][_0x4f4b42(0x1bd)](config[_0x4f4b42(0x17a)]+'/');_0x12d66f['push']({'datetime':_0x2f80e4[_0x4f4b42(0x131)],'coin':_0x4225c7[_0x4f4b42(0x14e)],'symbol':_0x4225c7[_0x4f4b42(0x17f)],'side':_0x2f80e4[_0x4f4b42(0x15a)],'reverse':_0x176337,'amount':formatResult(_0x2f80e4[_0x4f4b42(0x2a8)],0x8),'filled':formatResult(_0x2f80e4[_0x4f4b42(0x2a8)],0x8),'price':formatResult(_0x2f80e4[_0x4f4b42(0x152)],0x8)}),_0x597455=_0x2f80e4[_0x4f4b42(0x15a)]=='buy'?_0x597455+_0x2f80e4[_0x4f4b42(0x2a8)]:_0x597455-_0x2f80e4[_0x4f4b42(0x2a8)];if(!_0x362544)_0x362544=_0x2f80e4['price'];});_0x1215a4=_0x4225c7[_0x4904fd(0x1d3)]-_0x597455;let _0x438bcc;config[_0x4904fd(0x1ff)][_0x4904fd(0x2b1)](_0x4feda4=>{const _0x39a261=_0x4904fd;!_0x438bcc&&(_0x438bcc=_0x4feda4[_0x39a261(0x263)][_0x39a261(0x2a1)](_0x36665b=>_0x36665b['coin']==_0x4225c7[_0x39a261(0x14e)]),_0x438bcc&&(_0x1215a4=_0x438bcc['number'],_0x362544=_0x438bcc[_0x39a261(0x152)]));});let _0x2d79ee=dbCoinResults[_0x4904fd(0x260)](_0x4904fd(0x1e2))[_0x4904fd(0x2a1)]({'coin':_0x4225c7[_0x4904fd(0x14e)]})[_0x4904fd(0x162)]();_0x2d79ee={'coin':_0x4225c7['coin'],'number':_0x1215a4,'breakeven':_0x362544,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4904fd(0x260)](_0x4904fd(0x1e2))[_0x4904fd(0x2a1)]({'coin':_0x4225c7[_0x4904fd(0x14e)]})[_0x4904fd(0x26b)](_0x2d79ee)[_0x4904fd(0x1be)]();}}_0x12d66f[_0x4904fd(0x1ad)]((_0x1c8ba9,_0x5700a0)=>_0x1c8ba9[_0x4904fd(0x131)]>_0x5700a0[_0x4904fd(0x131)]?0x1:_0x5700a0[_0x4904fd(0x131)]>_0x1c8ba9['datetime']?-0x1:0x0);let _0x2fd001=0x0;for(let _0x878ff3 of _0x12d66f){await updateCoinResults(_0x878ff3,!![]);}}catch(_0x2d89a0){await handleError(_0x2d89a0,_0x4904fd(0x22c));}}async function getAllEventOrders(_0x463e51){const _0x2da620=_0x1348f9;let _0x3e6917=[],_0x517775=dbLogs[_0x2da620(0x260)](_0x2da620(0x184))[_0x2da620(0x1da)](_0x3eb021=>{const _0x550343=_0x2da620,_0x1f2488=_0x3eb021[_0x550343(0x127)][_0x550343(0x18f)]();return _0x1f2488[_0x550343(0x1bd)](_0x463e51['toLowerCase']())&&(_0x1f2488[_0x550343(0x1bd)](_0x550343(0x233))&&_0x1f2488['includes'](_0x550343(0x1c3))||_0x1f2488[_0x550343(0x1bd)](_0x550343(0x2a8))&&_0x1f2488[_0x550343(0x1bd)](_0x550343(0x1c3)));})[_0x2da620(0x171)](_0x2da620(0x1d8))['value']();return _0x517775[_0x2da620(0x2b1)](_0x23b546=>{const _0x134da1=_0x2da620,_0x5343ce=_0x23b546[_0x134da1(0x127)]['includes'](_0x134da1(0x232))?_0x134da1(0x232):_0x134da1(0x252),_0x4e7cf8=/#([0-9]|\.)+\s/i,_0x7c536d=Number(_0x4e7cf8[_0x134da1(0x214)](_0x23b546[_0x134da1(0x127)])[0x0][_0x134da1(0x1e0)](0x1)),_0x1add13=/@([0-9]|\.)+$/i,_0x13cfd6=Number(_0x1add13[_0x134da1(0x214)](_0x23b546[_0x134da1(0x127)])[0x0][_0x134da1(0x1e0)](0x1));_0x3e6917[_0x134da1(0x1e1)]({'datetime':_0x23b546[_0x134da1(0x1d8)],'coin':symbolToCoin(_0x463e51),'symbol':_0x463e51,'side':_0x5343ce,'amount':_0x7c536d,'filled':_0x7c536d,'price':_0x13cfd6});}),_0x3e6917;}async function getAllOrders(_0x9ed58c,_0xbb83c4){const _0x1b3f1d=_0x1348f9;let _0x2a3a58=[];while(_0xbb83c4<exchange['milliseconds']()){const _0x50fbb5=0x1f4;try{const _0x470919=await exchange['fetchClosedOrders'](_0x9ed58c,_0xbb83c4,_0x50fbb5);if(_0x470919['length'])_0xbb83c4=_0x470919[_0x470919['length']-0x1][_0x1b3f1d(0x155)]+0x1,_0x2a3a58=_0x2a3a58[_0x1b3f1d(0x1c6)](_0x470919);else break;}catch(_0x2f7635){await handleError(_0x2f7635,_0x1b3f1d(0x135),_0x9ed58c);}}return _0x2a3a58;}async function validate24hChanges(){const _0x2e75fe=_0x1348f9;for(const _0x236681 of currentCoins){if(_0x236681[_0x2e75fe(0x14e)]!=config[_0x2e75fe(0x17a)]){let _0x148d4a;_0x236681[_0x2e75fe(0x1e5)]?_0x148d4a=formatResult((0x1/(global[_0x2e75fe(0x209)][noslash(_0x236681[_0x2e75fe(0x17f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x148d4a=global[_0x2e75fe(0x209)][noslash(_0x236681[_0x2e75fe(0x17f)])],_0x148d4a<config[_0x2e75fe(0x237)]&&(logHistory(_0x2e75fe(0x21d),_0x236681[_0x2e75fe(0x14e)]+_0x2e75fe(0x154)+_0x148d4a+'%'),logHistory('error',_0x2e75fe(0x140)),logHistory('error',_0x2e75fe(0x253)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x30eb39,_0x366ce5){const _0x3d97ee=_0x1348f9;if(!_0x30eb39)return!![];const _0x4d04d9=_0x366ce5[_0x3d97ee(0x16e)]('.'),_0x29007b=_0x30eb39[_0x3d97ee(0x16e)]('.');for(var _0x27bbfd=0x0;_0x27bbfd<_0x29007b[_0x3d97ee(0x178)];_0x27bbfd++){const _0x4573f6=~~_0x29007b[_0x27bbfd],_0x5ef59b=~~_0x4d04d9[_0x27bbfd];if(_0x4573f6<_0x5ef59b)return!![];if(_0x4573f6>_0x5ef59b)return![];}return![];}async function oneTimeMigration(){const _0x12e401=_0x1348f9;let _0x35b404=dbLogs['get'](_0x12e401(0x1c8))[_0x12e401(0x162)]();if(isOlderVersion(_0x35b404,_0x12e401(0x268))){let _0x548a3d=[];const _0x4cea19=dbLogs['get'](_0x12e401(0x184))[_0x12e401(0x162)]();_0x4cea19[_0x12e401(0x2b1)](_0x3a4701=>{const _0x5c2c13=_0x12e401;_0x548a3d['push']({'time':_0x3a4701[_0x5c2c13(0x1d8)],'type':_0x3a4701['type'],'event':_0x3a4701[_0x5c2c13(0x127)]});}),dbLogs[_0x12e401(0x260)]('logs')[_0x12e401(0x26b)](_0x548a3d)[_0x12e401(0x1be)]();}let _0x3fa29f=dbConfig['get'](_0x12e401(0x1c8))[_0x12e401(0x162)]();if(isOlderVersion(_0x3fa29f,_0x12e401(0x268))){let _0x3de9e6=dbConfig[_0x12e401(0x260)](_0x12e401(0x228))[_0x12e401(0x2a1)]({'botID':botID})[_0x12e401(0x162)]();if(_0x3de9e6){let _0x17d949=[];_0x3de9e6['portfolio'][_0x12e401(0x2b1)](_0x1df6bd=>{const _0x2d5d32=_0x12e401;_0x17d949[_0x2d5d32(0x1e1)]({'coin':_0x1df6bd[_0x2d5d32(0x14e)],'number':_0x1df6bd[_0x2d5d32(0x1a6)],'price':_0x1df6bd[_0x2d5d32(0x222)]}),delete _0x1df6bd[_0x2d5d32(0x1a6)],delete _0x1df6bd[_0x2d5d32(0x222)];});if(_0x17d949['length']!==0x0)fs[_0x12e401(0x293)](configbackuppath+(_0x12e401(0x1e6)+botID+_0x12e401(0x13b)),JSON[_0x12e401(0x1fc)](_0x17d949,null,0x4),function(_0x145ec8){if(_0x145ec8){}});const _0xc2d907=(_0x491d70,_0x14feaa)=>{const _0x45252b=_0x12e401;let _0x4bb1e4=[];_0x14feaa[_0x45252b(0x2b1)](_0x5bd33b=>{const _0x5217aa=_0x45252b,_0x27b73e=_0x491d70[_0x5217aa(0x2a1)](_0x15ea7f=>_0x15ea7f[_0x5217aa(0x14e)]==_0x5bd33b[_0x5217aa(0x14e)]);if(!_0x27b73e)_0x4bb1e4[_0x5217aa(0x1e1)](_0x5bd33b);});let _0x278661=[];return _0x491d70[_0x45252b(0x2b1)](_0x3d701c=>{const _0xaf3a21=_0x45252b,_0x1f5955=_0x14feaa[_0xaf3a21(0x2a1)](_0x1098bf=>_0x1098bf[_0xaf3a21(0x14e)]==_0x3d701c['coin']);if(!_0x1f5955||_0x1f5955[_0xaf3a21(0x1d3)]==0x0&&_0x3d701c['number']!=0x0)_0x278661[_0xaf3a21(0x1e1)](_0x3d701c);}),{'missingDay1':_0x4bb1e4,'notInDay2':_0x278661};},_0x1e7b92=dbPerformance['get']('data')[_0x12e401(0x124)]()['value']();if(_0x1e7b92['length']>0x1){const {missingDay1:_0x4b4213,notInDay2:_0x12e8ae}=_0xc2d907(_0x17d949,_0x1e7b92[0x1][_0x12e401(0x1e2)]);_0x17d949=[..._0x17d949,..._0x4b4213],_0x12e8ae[_0x12e401(0x2b1)](_0xd1d709=>{const _0x31ae5b=_0x12e401;let _0x100ceb=_0x17d949[_0x31ae5b(0x26c)](_0x44d166=>_0x44d166[_0x31ae5b(0x14e)]==_0xd1d709[_0x31ae5b(0x14e)]);_0x100ceb!=-0x1&&_0x17d949[_0x31ae5b(0x187)](_0x100ceb,0x1);});}_0x17d949[_0x12e401(0x1ad)]((_0x384ad4,_0x56df9a)=>_0x384ad4[_0x12e401(0x14e)]>_0x56df9a[_0x12e401(0x14e)]?0x1:_0x56df9a['coin']>_0x384ad4[_0x12e401(0x14e)]?-0x1:0x0);let _0x3e77ce=[{'date':_0x3de9e6[_0x12e401(0x24e)],'changes':_0x17d949}];_0x1e7b92['length']>0x2&&_0x1e7b92[_0x12e401(0x2b1)]((_0x5c1016,_0x7ce0dd)=>{const _0x447407=_0x12e401;if(_0x7ce0dd>0x0&&_0x7ce0dd<_0x1e7b92[_0x447407(0x178)]-0x1){const {missingDay1:_0x13bb14,notInDay2:_0x5087ff}=_0xc2d907(_0x1e7b92[_0x7ce0dd][_0x447407(0x1e2)],_0x1e7b92[_0x7ce0dd+0x1][_0x447407(0x1e2)]);_0x17d949=[],(_0x13bb14[_0x447407(0x178)]!=0x0||_0x5087ff['length']!=0x0)&&(_0x13bb14[_0x447407(0x178)]!=0x0&&_0x17d949[_0x447407(0x1e1)](..._0x13bb14),_0x5087ff[_0x447407(0x178)]!=0x0&&(_0x5087ff['forEach'](_0x5be1ba=>{const _0x328ec5=_0x447407;_0x5be1ba[_0x328ec5(0x1d3)]=-_0x5be1ba['number'];}),_0x17d949['push'](..._0x5087ff)),_0x17d949['sort']((_0x2bd722,_0x5d6aae)=>_0x2bd722[_0x447407(0x14e)]>_0x5d6aae[_0x447407(0x14e)]?0x1:_0x5d6aae['coin']>_0x2bd722['coin']?-0x1:0x0),_0x3e77ce['push']({'date':_0x1e7b92[_0x7ce0dd+0x1][_0x447407(0x278)],'changes':_0x17d949}));}}),dbConfig[_0x12e401(0x260)]('bot')[_0x12e401(0x2a1)]({'botID':botID})[_0x12e401(0x26b)]({..._0x3de9e6,'liquidity':_0x3e77ce})[_0x12e401(0x1be)]();}}if(isOlderVersion(_0x3fa29f,_0x12e401(0x1e3))){let _0x20a53e=dbConfig['get'](_0x12e401(0x228))[_0x12e401(0x2a1)]({'botID':botID})['value']();if(_0x20a53e){const _0xa470d8=_0x20a53e['exchange'],_0x5ecba2=_0xa470d8?capitalize(_0xa470d8):_0x12e401(0x177);dbConfig[_0x12e401(0x260)](_0x12e401(0x228))['find']({'botID':botID})[_0x12e401(0x26b)]({'exchange':_0x5ecba2})[_0x12e401(0x1be)]();}}let _0x46aabd=dbPerformance[_0x12e401(0x260)](_0x12e401(0x1c8))[_0x12e401(0x162)]();isOlderVersion(_0x46aabd,_0x12e401(0x268))&&setStartDatePerformance();let _0x40b851=dbCoinResults[_0x12e401(0x260)](_0x12e401(0x1c8))[_0x12e401(0x162)]();if(isOlderVersion(_0x40b851,_0x12e401(0x26a))){let _0x157463=dbCoinResults['get']('coins')[_0x12e401(0x162)]();if(_0x157463['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3027d5=_0x1348f9;dbConfig[_0x3027d5(0x139)]('version',serverversion)['write'](),dbPerformance[_0x3027d5(0x139)](_0x3027d5(0x1c8),serverversion)[_0x3027d5(0x1be)](),dbLogs['set'](_0x3027d5(0x1c8),serverversion)[_0x3027d5(0x1be)](),dbCoinResults['set'](_0x3027d5(0x1c8),serverversion)[_0x3027d5(0x1be)]();}function getConfiguration(_0x7b84f2){const _0x21549e=_0x1348f9;let _0x52969d=dbConfig['get'](_0x21549e(0x228))[_0x21549e(0x2a1)]({'botID':_0x7b84f2})[_0x21549e(0x162)]();if(_0x52969d){let _0x3bb63a=![];typeof _0x52969d['threshold']==_0x21549e(0x1b5)&&(_0x52969d={..._0x52969d,'threshold':Number(_0x52969d[_0x21549e(0x272)])},_0x3bb63a=!![]),_0x52969d[_0x21549e(0x237)]==undefined&&(_0x52969d={..._0x52969d,'change24h':-0x14},_0x3bb63a=!![]),_0x52969d[_0x21549e(0x1bf)]==undefined&&(_0x52969d={..._0x52969d,'fiat':_0x21549e(0x231)},_0x3bb63a=!![]),_0x52969d[_0x21549e(0x238)]==undefined&&(_0x52969d={..._0x52969d,'onepagemode':settings['onepagemode']},_0x3bb63a=!![]),_0x52969d[_0x21549e(0x2ad)]==undefined&&(_0x52969d={..._0x52969d,'colorscheme':'red_yellow_blue'},_0x3bb63a=!![]),_0x52969d[_0x21549e(0x259)]==undefined&&(_0x52969d={..._0x52969d,'autoliquidity':!![]},_0x3bb63a=!![]),_0x3bb63a&&(_0x52969d={'botID':_0x52969d[_0x21549e(0x16d)],'exchange':_0x52969d[_0x21549e(0x15b)],'apiKey':_0x52969d[_0x21549e(0x143)],'apiSecret':_0x52969d[_0x21549e(0x156)],'apiPassword':_0x52969d[_0x21549e(0x16c)],'basecoin':_0x52969d[_0x21549e(0x17a)],'botname':_0x52969d[_0x21549e(0x1de)],'showname':_0x52969d[_0x21549e(0x262)],'threshold':_0x52969d[_0x21549e(0x272)],'ordertype':_0x52969d[_0x21549e(0x20e)],'timeout':_0x52969d[_0x21549e(0x2b9)],'fiat':_0x52969d[_0x21549e(0x1bf)],'startdate':_0x52969d[_0x21549e(0x24e)],'recreate':_0x52969d[_0x21549e(0x1ac)],'timeshift':_0x52969d[_0x21549e(0x251)],'onepagemode':_0x52969d[_0x21549e(0x238)],'headless':_0x52969d['headless'],'cooldown':_0x52969d['cooldown'],'change24h':_0x52969d['change24h'],'emojibuy':_0x52969d['emojibuy'],'emojisell':_0x52969d[_0x21549e(0x148)],'colorscheme':_0x52969d['colorscheme'],'portfolio':_0x52969d[_0x21549e(0x194)],'autoliquidity':_0x52969d['autoliquidity'],'liquidity':_0x52969d['liquidity'],'openOrders':_0x52969d[_0x21549e(0x14a)]},dbConfig[_0x21549e(0x260)](_0x21549e(0x228))['remove']()['write'](),dbConfig[_0x21549e(0x260)](_0x21549e(0x228))[_0x21549e(0x1e1)](_0x52969d)[_0x21549e(0x1be)]());}else _0x52969d={'botID':_0x7b84f2,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x21549e(0x129)+_0x7b84f2,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x21549e(0x231),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x21549e(0x251)],'onepagemode':settings[_0x21549e(0x238)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x21549e(0x29d),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x52969d;}function emittedConfiguration(){const _0x326f6c=_0x1348f9;let _0x1d4b6b;if(config[_0x326f6c(0x143)]=='')_0x1d4b6b={...config,'configstate':_0x326f6c(0x1c9)};else config[_0x326f6c(0x143)]==_0x326f6c(0x1fe)?_0x1d4b6b={...config,'configstate':'recovery'}:(_0x1d4b6b={...config,'apiKey':'************','apiSecret':_0x326f6c(0x1c0)},config[_0x326f6c(0x16c)]&&(_0x1d4b6b[_0x326f6c(0x16c)]=_0x326f6c(0x1c0)));return _0x1d4b6b;}function getSettings(){const _0x55ab16=_0x1348f9;return dbSettings[_0x55ab16(0x260)]('settings')[_0x55ab16(0x162)]();}function getSecure(){const _0x272af5=_0x1348f9;return dbSecure[_0x272af5(0x260)](_0x272af5(0x15d))['value']()||{};}function updateTimeshift(_0x308a3b){const _0x1a3bd0=_0x1348f9;let _0x36aeca=dbConfig[_0x1a3bd0(0x260)]('bot')['find']({'botID':botID})['value']();_0x36aeca&&dbConfig[_0x1a3bd0(0x260)](_0x1a3bd0(0x228))[_0x1a3bd0(0x2a1)]({'botID':botID})[_0x1a3bd0(0x26b)]({'timeshift':_0x308a3b})[_0x1a3bd0(0x1be)](),config[_0x1a3bd0(0x251)]=_0x308a3b,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x2446cb){const _0x320979=_0x1348f9;let _0x3122ba=dbConfig[_0x320979(0x260)](_0x320979(0x228))['find']({'botID':botID})[_0x320979(0x162)]();_0x3122ba&&dbConfig[_0x320979(0x260)](_0x320979(0x228))[_0x320979(0x2a1)]({'botID':botID})[_0x320979(0x26b)]({'onepagemode':_0x2446cb})['write'](),config[_0x320979(0x238)]=_0x2446cb,proxyEmit(_0x320979(0x193),emittedConfiguration());}async function storeConfiguration(_0x18d28f){const _0x446cd5=_0x1348f9;logger['debug'](_0x446cd5(0x18a));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x4cdde4=![],_0x27eca5=![],_0x45d51f=[];_0x18d28f[_0x446cd5(0x194)][_0x446cd5(0x2b1)](_0x4898be=>{const _0x1c6400=_0x446cd5;if(!_0x4898be[_0x1c6400(0x226)]&&_0x4898be['coin']!=_0x18d28f['basecoin'])_0x45d51f[_0x1c6400(0x1e1)](_0x4898be[_0x1c6400(0x17f)]);}),_0x45d51f['forEach'](_0x71d4de=>{const _0x1bc29b=_0x446cd5,_0x3ab9d2=currentCoins[_0x1bc29b(0x2a1)](_0x9bca07=>_0x9bca07['symbol']==_0x71d4de);!_0x3ab9d2&&(_0x4cdde4=!![]);}),currentCoins['forEach'](_0x4671a9=>{const _0x1544da=_0x446cd5;if(_0x4671a9['coin']!=config[_0x1544da(0x17a)]){const _0x239022=_0x45d51f['find'](_0x27f34c=>_0x27f34c==_0x4671a9['symbol']);!_0x239022&&(_0x4cdde4=!![]);}}),_0x18d28f['portfolio'][_0x446cd5(0x2b1)](_0x407d1b=>{const _0x43b264=_0x446cd5,_0x28d127=config[_0x43b264(0x194)]['find'](_0x39ea14=>_0x39ea14['coin']==_0x407d1b[_0x43b264(0x14e)]);if(_0x28d127&&_0x407d1b['offset']!=_0x28d127['offset'])_0x27eca5=!![];});let _0x2624a5=dbConfig[_0x446cd5(0x260)](_0x446cd5(0x228))[_0x446cd5(0x2a1)]({'botID':botID})['value']();_0x18d28f={..._0x18d28f,'apiKey':crypt['decrypt'](secure[_0x446cd5(0x27b)],_0x18d28f[_0x446cd5(0x143)])[_0x446cd5(0x190)],'apiSecret':crypt[_0x446cd5(0x1a1)](secure[_0x446cd5(0x27b)],_0x18d28f[_0x446cd5(0x156)])['message']};_0x18d28f[_0x446cd5(0x16c)]&&(_0x18d28f[_0x446cd5(0x16c)]=crypt[_0x446cd5(0x1a1)](secure['privateKey'],_0x18d28f[_0x446cd5(0x16c)])[_0x446cd5(0x190)]);let _0x2bd804=![];if(_0x2624a5){_0x18d28f[_0x446cd5(0x143)]==_0x446cd5(0x1c0)?_0x18d28f[_0x446cd5(0x143)]=config['apiKey']:_0x2bd804=!![];_0x18d28f[_0x446cd5(0x156)]==_0x446cd5(0x1c0)?_0x18d28f[_0x446cd5(0x156)]=config[_0x446cd5(0x156)]:_0x2bd804=!![];if(_0x18d28f['apiPassword']==_0x446cd5(0x1c0))_0x18d28f['apiPassword']=config[_0x446cd5(0x16c)];else{if(_0x18d28f['apiPassword'])_0x2bd804=!![];}dbConfig['get'](_0x446cd5(0x228))['find']({'botID':botID})['assign'](_0x18d28f)[_0x446cd5(0x1be)]();}else dbConfig['get']('bot')['push'](_0x18d28f)[_0x446cd5(0x1be)](),_0x2bd804=!![],process[_0x446cd5(0x1fb)]({'status':'enabled','live':_0x446cd5(0x227)},_0x242a10=>{});process['send']({'botname':_0x18d28f['botname']},_0x183f20=>{}),config={..._0x18d28f},updateBotManager(),proxyEmit(_0x446cd5(0x1a0)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2bd804)await reset(!![]);else _0x4cdde4||_0x27eca5?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x446cd5(0x299));}async function storeHeadless(_0x370cf4){const _0x201283=_0x1348f9,_0x5cfe09={...config,'headless':_0x370cf4[_0x201283(0x234)]};let _0x75d7c=dbConfig['get'](_0x201283(0x228))[_0x201283(0x2a1)]({'botID':botID})[_0x201283(0x162)]();_0x75d7c&&dbConfig[_0x201283(0x260)](_0x201283(0x228))[_0x201283(0x2a1)]({'botID':botID})[_0x201283(0x26b)](_0x5cfe09)['write'](),config={..._0x5cfe09},updateBotManager(),proxyEmit(_0x201283(0x193),emittedConfiguration());}async function storeFiat(_0x337dbb){const _0x284afe=_0x1348f9,_0x1ae1b6={...config,'fiat':_0x337dbb};let _0x3bebbd=dbConfig[_0x284afe(0x260)](_0x284afe(0x228))[_0x284afe(0x2a1)]({'botID':botID})['value']();_0x3bebbd&&dbConfig[_0x284afe(0x260)](_0x284afe(0x228))[_0x284afe(0x2a1)]({'botID':botID})[_0x284afe(0x26b)](_0x1ae1b6)[_0x284afe(0x1be)](),config={..._0x1ae1b6},proxyEmit(_0x284afe(0x193),emittedConfiguration());}function resetHistory(){const _0x2ab9e2=_0x1348f9;logger['full'](_0x2ab9e2(0x291));try{if(fs[_0x2ab9e2(0x1df)](path[_0x2ab9e2(0x189)](configpath,_0x2ab9e2(0x2b0)+botID+_0x2ab9e2(0x186))))fs['unlinkSync'](path['join'](configpath,_0x2ab9e2(0x2b0)+botID+_0x2ab9e2(0x186)));if(fs[_0x2ab9e2(0x1df)](path[_0x2ab9e2(0x189)](configpath,_0x2ab9e2(0x2b0)+botID+'-performance.json')))fs[_0x2ab9e2(0x219)](path[_0x2ab9e2(0x189)](configpath,_0x2ab9e2(0x2b0)+botID+'-performance.json'));if(fs['existsSync'](path[_0x2ab9e2(0x189)](configpath,_0x2ab9e2(0x2b0)+botID+_0x2ab9e2(0x1dd))))fs[_0x2ab9e2(0x219)](path[_0x2ab9e2(0x189)](configpath,_0x2ab9e2(0x2b0)+botID+'-results.json'));}catch(_0x382147){if(_0x382147)logger[_0x2ab9e2(0x132)](_0x2ab9e2(0x1f7),_0x382147);}const _0x277050=getDate();let _0x58dbd0=[];currentCoins['forEach'](_0x339d96=>{const _0x3789c0=_0x2ab9e2;_0x58dbd0[_0x3789c0(0x1e1)]({'coin':_0x339d96[_0x3789c0(0x14e)],'number':_0x339d96[_0x3789c0(0x1d3)],'price':_0x339d96[_0x3789c0(0x210)]});});let _0x12eae2=dbConfig[_0x2ab9e2(0x260)](_0x2ab9e2(0x228))[_0x2ab9e2(0x2a1)]({'botID':botID})[_0x2ab9e2(0x162)]();_0x12eae2&&(dbConfig[_0x2ab9e2(0x260)](_0x2ab9e2(0x228))['find']({'botID':botID})[_0x2ab9e2(0x26b)]({'liquidity':[{'date':_0x277050,'changes':_0x58dbd0}]})[_0x2ab9e2(0x1be)](),config[_0x2ab9e2(0x1ff)]=[]),process[_0x2ab9e2(0x1fb)]({'stop':_0x2ab9e2(0x28f)},_0x2014a8=>{});}function noslash(_0x36bc38){const _0x349af1=_0x1348f9;return _0x36bc38[_0x349af1(0x225)]('/','');}function updateHighestFee(_0x2747e3){const _0x3560b8=_0x1348f9;if(_0x2747e3[_0x3560b8(0x1e5)]){let _0x20e959={'filled':_0x2747e3[_0x3560b8(0x2a8)]*_0x2747e3['price'],'amount':_0x2747e3['filled']*_0x2747e3['price'],'side':_0x2747e3[_0x3560b8(0x15a)]==_0x3560b8(0x232)?_0x3560b8(0x252):_0x3560b8(0x232),'price':0x1/_0x2747e3['price']};_0x2747e3={..._0x2747e3,..._0x20e959};}const _0x7a905e=defaultFee*_0x2747e3[_0x3560b8(0x2a8)]*_0x2747e3['price'];lastFees[_0x3560b8(0x1f1)]['length']===0x14&&lastFees['recent20'][_0x3560b8(0x1ed)](),lastFees[_0x3560b8(0x1f1)][_0x3560b8(0x1e1)](_0x7a905e),lastFees[_0x3560b8(0x212)]=Math[_0x3560b8(0x20a)](...lastFees[_0x3560b8(0x1f1)]);}async function updateNumberCoinsCcxt(_0x5d8c9e){const _0x5cb2f0=_0x1348f9;logger[_0x5cb2f0(0x19e)](_0x5cb2f0(0x19f)+_0x5d8c9e['symbol']+'\x20|\x20'+_0x5d8c9e[_0x5cb2f0(0x2b5)]+_0x5cb2f0(0x27f)+_0x5d8c9e['filled']+_0x5cb2f0(0x201)+_0x5d8c9e[_0x5cb2f0(0x216)]+_0x5cb2f0(0x27f)+_0x5d8c9e['id']);let _0x28ff5c=_0x5d8c9e[_0x5cb2f0(0x2b5)],_0x4d2c95=![];currentCoins[_0x5cb2f0(0x2b1)](_0x2b795f=>{const _0x4ed96e=_0x5cb2f0;_0x2b795f[_0x4ed96e(0x17f)]==_0x5d8c9e[_0x4ed96e(0x17f)]&&(_0x4d2c95=!![]);});if(!_0x4d2c95)return;const _0x1fe1d2=currentCoins[_0x5cb2f0(0x2a1)](_0x550122=>_0x550122[_0x5cb2f0(0x17f)]==_0x5d8c9e[_0x5cb2f0(0x17f)]),_0x419ace=_0x1c99de=>{const _0x522020=_0x5cb2f0;if(_0x1fe1d2)_0x1fe1d2[_0x522020(0x203)]=_0x1c99de;};if(_0x28ff5c==_0x5cb2f0(0x149))_0x419ace(_0x5cb2f0(0x149));else{if(_0x28ff5c==_0x5cb2f0(0x12f)){_0x419ace(_0x5cb2f0(0x12f));const _0x370c69=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x370c69,await getOpenOrders(),handleOpenOrders();}else{if(_0x28ff5c==_0x5cb2f0(0x2af)){let _0x2f4718=![];if(lastOrders)for(const _0x175107 of lastOrders){const _0x1e0fe8=0xc8,_0xc4e002=0x1388;let _0x2c2e55=0x0;while(!_0x175107['orderId']&&_0x2c2e55*_0x1e0fe8<_0xc4e002){_0x2c2e55++,await sleep(_0x1e0fe8);}if(_0x2c2e55>0x0)logger[_0x5cb2f0(0x19e)](_0x5cb2f0(0x12c)+_0x2c2e55*_0x1e0fe8/0x3e8+_0x5cb2f0(0x13a));if(_0x175107[_0x5cb2f0(0x292)]==_0x5d8c9e['id']){logger[_0x5cb2f0(0x19e)](_0x5cb2f0(0x2ab)+_0x5d8c9e['id']),_0x2f4718=!![];if(_0x175107[_0x5cb2f0(0x2a8)]==0x0){logger[_0x5cb2f0(0x19e)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x5d8c9e['id']);if(_0x5d8c9e[_0x5cb2f0(0x22b)])_0x175107[_0x5cb2f0(0x152)]=_0x5d8c9e[_0x5cb2f0(0x22b)];else{if(_0x5d8c9e[_0x5cb2f0(0x152)])_0x175107[_0x5cb2f0(0x152)]=_0x5d8c9e[_0x5cb2f0(0x152)];else{}}_0x175107[_0x5cb2f0(0x2a8)]=_0x5d8c9e[_0x5cb2f0(0x2a8)],updateHighestFee(_0x175107),_0x419ace(_0x5cb2f0(0x2a8)),await validateOrders();if(lockOrders==ORDERS[_0x5cb2f0(0x1b0)]){const _0x57ae9b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x57ae9b;}_0x175107[_0x5cb2f0(0x1a7)]={'currency':_0x5d8c9e[_0x5cb2f0(0x1a7)]?_0x5d8c9e[_0x5cb2f0(0x1a7)][_0x5cb2f0(0x1cf)]:null,'cost':_0x5d8c9e['fee']?_0x5d8c9e[_0x5cb2f0(0x1a7)]['cost']:0x0},await updateCoinResults(_0x175107);}}}if(!_0x2f4718){logger['debug'](_0x5cb2f0(0x12e)+_0x5d8c9e['id']),_0x419ace(_0x5cb2f0(0x2a8));const _0x3742eb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3742eb,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1db9bb=JSON[_0x5cb2f0(0x180)](lastBalances[_0x5cb2f0(0x194)]);const _0x184fa1=_0x1db9bb[_0x5cb2f0(0x2a1)](_0x1a492b=>_0x1a492b[_0x5cb2f0(0x17f)]==_0x5d8c9e['symbol']);if(_0x184fa1){if(_0x28ff5c==_0x5cb2f0(0x149))_0x184fa1[_0x5cb2f0(0x203)]=_0x184fa1[_0x5cb2f0(0x203)]==_0x5cb2f0(0x2a8)?_0x5cb2f0(0x2a8):_0x5cb2f0(0x149);else{if(_0x28ff5c=='canceled')_0x184fa1[_0x5cb2f0(0x203)]=_0x184fa1[_0x5cb2f0(0x203)]==_0x5cb2f0(0x2a8)?_0x5cb2f0(0x2a8):'canceled';else _0x28ff5c==_0x5cb2f0(0x2af)&&(_0x184fa1[_0x5cb2f0(0x203)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x5cb2f0(0x1fc)](_0x1db9bb)},proxyEmit(_0x5cb2f0(0x1d0),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x54e261=_0x1348f9;await getOpenOrders();let _0x5290e2=![];currentCoins[_0x54e261(0x2b1)](_0x107ecc=>{const _0x578213=_0x54e261;_0x5290e2=allOpenOrders[_0x578213(0x2a1)](_0xfb3bd6=>_0xfb3bd6[_0x578213(0x17f)]==_0x107ecc['symbol']),_0x107ecc['orderstatus']=_0x5290e2?'open':_0x578213(0x1f2);});}async function getCoins(_0x39fb8a=0x0,_0x3a3c00=!![],_0x28d666=config[_0x1348f9(0x17a)]){const _0x287f21=_0x1348f9;let _0x2fdee5,_0x1ebb29=[],_0xa4422d=[],_0x4fc3f2=[];if(_0x39fb8a)await sleep(_0x39fb8a);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2fdee5=await exchange['fetchBalance'](),mybalances=_0x2fdee5[_0x287f21(0x2a9)];for(const [_0x405669,_0x1b9df2]of Object[_0x287f21(0x191)](mybalances)){_0x4fc3f2['push'](_0x405669);}config[_0x287f21(0x194)][_0x287f21(0x2b1)](_0x4146a3=>{const _0x35213e=_0x287f21;!_0x4fc3f2['includes'](_0x4146a3[_0x35213e(0x14e)])&&(mybalances[_0x4146a3[_0x35213e(0x14e)]]=0x0);});if(_0x28d666=='')for(const [_0x4f9613,_0x473823]of Object[_0x287f21(0x191)](mybalances)){_0x473823!=0x0&&_0x1ebb29[_0x287f21(0x1e1)]({'coin':_0x4f9613});}else{let _0x163db6=![];for(const [_0x2e85f8,_0x40e02a]of Object[_0x287f21(0x191)](mybalances)){const _0xe62dc0=config[_0x287f21(0x194)]['find'](_0x44a93e=>_0x44a93e[_0x287f21(0x14e)]==_0x2e85f8),_0x1ef63a=_0x2e85f8+'/'+_0x28d666,_0x12a394=_0x28d666+'/'+_0x2e85f8,_0x11d144=currentCoins[_0x287f21(0x2a1)](_0x22a48e=>_0x22a48e[_0x287f21(0x14e)]==_0x2e85f8);_0x163db6=![];if((_0x40e02a!=0x0||_0xe62dc0)&&(allSymbols[_0x287f21(0x1bd)](_0x1ef63a)||_0x2e85f8==_0x28d666))_0x1ebb29['push']({'coin':_0x2e85f8,'symbol':_0x1ef63a,'reverse':![],'number':Math[_0x287f21(0x20a)](_0x40e02a+(_0xe62dc0&&_0xe62dc0[_0x287f21(0x18d)]||0x0),0x0),'orderstatus':_0x11d144?_0x11d144[_0x287f21(0x203)]:'none'});else{if((_0x40e02a!=0x0||_0xe62dc0)&&allSymbols[_0x287f21(0x1bd)](_0x12a394))_0x1ebb29[_0x287f21(0x1e1)]({'coin':_0x2e85f8,'symbol':_0x12a394,'reverse':!![],'number':Math[_0x287f21(0x20a)](_0x40e02a+(_0xe62dc0&&_0xe62dc0[_0x287f21(0x18d)]||0x0),0x0),'orderstatus':_0x11d144?_0x11d144[_0x287f21(0x203)]:_0x287f21(0x1f2)});else _0xe62dc0&&_0x1ebb29[_0x287f21(0x1e1)]({'coin':_0xe62dc0['coin'],'symbol':_0xe62dc0[_0x287f21(0x17f)],'reverse':_0xe62dc0[_0x287f21(0x1e5)],'number':0x0,'orderstatus':_0x287f21(0x1f2)});}}}}catch(_0x2e4423){if(!_0x3a3c00)handleErrorNoStop(_0x2e4423,'getCoins()');else await handleError(_0x2e4423,'getCoins()');}return _0xa4422d=cloneDeep(_0x1ebb29),_0x1ebb29=_0x1ebb29[_0x287f21(0x1da)](_0x2f520a=>{const _0x125801=_0x287f21,_0xe94ddc=config[_0x125801(0x194)]['find'](_0x2a54f7=>_0x2a54f7[_0x125801(0x14e)]==_0x2f520a[_0x125801(0x14e)]);return _0xe94ddc&&!_0xe94ddc[_0x125801(0x226)];}),[_0x1ebb29,_0xa4422d];}async function getCoinNumber(_0x28d723){const _0x43990e=_0x1348f9;let _0x1a2525;try{const _0x3ed819=await exchange[_0x43990e(0x1b1)]();_0x1a2525=_0x3ed819[_0x43990e(0x2a9)][_0x28d723];}catch(_0x1da1d1){await handleError(_0x1da1d1,_0x43990e(0x1ca));}return _0x1a2525;}async function getOpenOrders(){const _0x3fddbd=_0x1348f9;let _0x5311b0;allOpenOrders=[];try{for(const _0x1a67e6 of config['portfolio']){!_0x1a67e6[_0x3fddbd(0x226)]&&_0x1a67e6[_0x3fddbd(0x14e)]!=config[_0x3fddbd(0x17a)]&&(_0x5311b0=await exchange[_0x3fddbd(0x181)](_0x1a67e6['symbol']),_0x5311b0['length']>0x0&&allOpenOrders[_0x3fddbd(0x1e1)](_0x5311b0[0x0]));}}catch(_0x113ef3){await handleError(_0x113ef3,_0x3fddbd(0x29b));}}async function handleOpenOrders(_0x521162=0x0){const _0x2ea56b=_0x1348f9;allOpenOrders[_0x2ea56b(0x178)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x521162==0x0?(logger[_0x2ea56b(0x19e)](_0x2ea56b(0x1c2)),_0x521162++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2ea56b(0x19e)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x2ea56b(0x165))));}async function testAPI(_0x289b9e){const _0x5790aa=_0x1348f9,_0x1c8c26=ccxt[_0x5790aa(0x1d6)][_0x289b9e['exchange'][_0x5790aa(0x18f)]()],_0x3f8ed8=new _0x1c8c26({'apiKey':_0x289b9e[_0x5790aa(0x143)],'secret':_0x289b9e['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5790aa(0x1b7)}});if(_0x289b9e['apiPassword'])_0x3f8ed8[_0x5790aa(0x185)]=_0x289b9e[_0x5790aa(0x16c)];try{await _0x3f8ed8[_0x5790aa(0x172)]();}catch(_0x103a96){throw _0x103a96;}}function cloneDeep(_0x264661){const _0x259386=_0x1348f9;return JSON[_0x259386(0x180)](JSON[_0x259386(0x1fc)](_0x264661));}async function getPortfolio(_0x3c723e){const _0x45c506=_0x1348f9;let _0x56922e=[],_0x162fd2=[],_0x2be8a8=[],_0x4e67c3;if(_0x3c723e['apiKey']!==_0x45c506(0x1c0)||_0x3c723e[_0x45c506(0x156)]!==_0x45c506(0x1c0)||_0x3c723e['apiPassword']&&_0x3c723e[_0x45c506(0x16c)]!=='************'){if(config[_0x45c506(0x15b)]){if(_0x3c723e[_0x45c506(0x143)]==_0x45c506(0x1c0))_0x3c723e[_0x45c506(0x143)]=config[_0x45c506(0x143)];if(_0x3c723e[_0x45c506(0x156)]==_0x45c506(0x1c0))_0x3c723e[_0x45c506(0x156)]=config[_0x45c506(0x156)];if(_0x3c723e['apiPassword']=='************')_0x3c723e[_0x45c506(0x16c)]=config['apiPassword'];try{await testAPI(_0x3c723e);}catch(_0xb4a5bd){if(_0xb4a5bd[_0x45c506(0x1f8)]()['includes'](_0x45c506(0x176))){logger[_0x45c506(0x19e)](_0x45c506(0x22f)),proxyEmit(_0x45c506(0x194),![]);return;}else{handleError(_0xb4a5bd,_0x45c506(0x1a8));return;}}}await initExchange(_0x3c723e['exchange'],_0x3c723e[_0x45c506(0x143)],_0x3c723e[_0x45c506(0x156)],_0x3c723e[_0x45c506(0x16c)]);try{await loadSymbols();}catch(_0x2a42a1){if(_0x2a42a1[_0x45c506(0x1f8)]()[_0x45c506(0x1bd)]('AuthenticationError')){proxyEmit(_0x45c506(0x194),![]);return;}else{handleError(_0x2a42a1,_0x45c506(0x27c));return;}}const _0x3bf41b=await getCoins(0x0,![],_0x3c723e[_0x45c506(0x17a)]);_0x2be8a8=cloneDeep(_0x3bf41b[0x1]);}else _0x2be8a8=cloneDeep(currentCoinsAll);if(_0x3c723e[_0x45c506(0x17a)]=='')proxyEmit('portfolio',_0x2be8a8);else{_0x2be8a8[_0x45c506(0x2b1)](_0x583ca7=>{const _0x9bd754=_0x45c506;if(_0x583ca7[_0x9bd754(0x14e)]!=_0x3c723e['basecoin']&&allSymbols[_0x9bd754(0x1bd)](_0x583ca7[_0x9bd754(0x17f)]))_0x56922e[_0x9bd754(0x1e1)](_0x583ca7[_0x9bd754(0x17f)]);});if(_0x56922e[_0x45c506(0x178)]==0x0)logHistory(_0x45c506(0x21d),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x162fd2=await exchange['fetchTickers'](_0x56922e);}catch(_0x115a1c){if(_0x115a1c[_0x45c506(0x1f8)]()[_0x45c506(0x1bd)](_0x45c506(0x176))){proxyEmit(_0x45c506(0x194),![]);return;}else handleError(_0x115a1c,_0x45c506(0x153));}_0x2be8a8[_0x45c506(0x2b1)](_0x328643=>{const _0x26ff34=_0x45c506;_0x328643['coin']!=_0x3c723e[_0x26ff34(0x17a)]?_0x162fd2[_0x328643[_0x26ff34(0x17f)]]?_0x4e67c3=_0x328643[_0x26ff34(0x1e5)]?0x1/_0x162fd2[_0x328643[_0x26ff34(0x17f)]][_0x26ff34(0x210)]:_0x162fd2[_0x328643[_0x26ff34(0x17f)]]['last']:_0x4e67c3=0x0:_0x4e67c3=0x1,_0x328643['price']=formatResult(_0x4e67c3,0x8);}),proxyEmit('portfolio',_0x2be8a8);}}}function truncateTradeAmount(_0x1b265c,_0x353a48){let _0x31a014=0x0;try{_0x31a014=exchange['amountToPrecision'](_0x1b265c,_0x353a48);}catch(_0x54aee8){}return _0x31a014;}function checkMinimums(_0x5cb220){const _0x5169e0=_0x1348f9;let _0x74c5bb=!![];const _0xaa8b46=!_0x5cb220[_0x5169e0(0x1e5)]?markets[_0x5cb220[_0x5169e0(0x17f)]][_0x5169e0(0x230)][_0x5169e0(0x216)][_0x5169e0(0x151)]:markets[_0x5cb220[_0x5169e0(0x17f)]][_0x5169e0(0x230)][_0x5169e0(0x274)][_0x5169e0(0x151)],_0x569558=!_0x5cb220[_0x5169e0(0x1e5)]?markets[_0x5cb220[_0x5169e0(0x17f)]]['limits'][_0x5169e0(0x274)]['min']:markets[_0x5cb220[_0x5169e0(0x17f)]][_0x5169e0(0x230)][_0x5169e0(0x216)][_0x5169e0(0x151)],_0xf10d13=truncateTradeAmount(_0x5cb220[_0x5169e0(0x17f)],_0x5cb220[_0x5169e0(0x159)]);_0x5cb220[_0x5169e0(0x159)]=_0xf10d13;if(Math[_0x5169e0(0x1a9)](_0xf10d13)<_0xaa8b46)_0x74c5bb=![];if(Math[_0x5169e0(0x1a9)](_0xf10d13)*_0x5cb220[_0x5169e0(0x210)]<_0x569558)_0x74c5bb=![];if(_0x5cb220[_0x5169e0(0x15a)]==_0x5169e0(0x232)){let _0x5a1d21=config['portfolio'][_0x5169e0(0x2a1)](_0x42b6b1=>_0x42b6b1[_0x5169e0(0x14e)]==_0x5cb220[_0x5169e0(0x14e)]);if(_0x5a1d21[_0x5169e0(0x18d)]>0x0){if(Math['abs'](_0xf10d13)>_0x5cb220[_0x5169e0(0x1d3)]-_0x5a1d21['offset'])_0x74c5bb=![];}else{if(Math[_0x5169e0(0x1a9)](_0xf10d13)>_0x5cb220[_0x5169e0(0x1d3)])_0x74c5bb=![];}}if(_0x5cb220[_0x5169e0(0x15a)]==_0x5169e0(0x252)){let _0x5a1928=config[_0x5169e0(0x194)][_0x5169e0(0x2a1)](_0x3d7296=>_0x3d7296[_0x5169e0(0x14e)]==config[_0x5169e0(0x17a)]),_0x4281b5=currentCoins[_0x5169e0(0x2a1)](_0x1093dc=>_0x1093dc[_0x5169e0(0x14e)]==config['basecoin']);if(_0x5a1928[_0x5169e0(0x18d)]>0x0){if(Math['abs'](_0xf10d13)*_0x5cb220['last']>_0x4281b5['number']-_0x5a1928[_0x5169e0(0x18d)])_0x74c5bb=![];}else{if(Math[_0x5169e0(0x1a9)](_0xf10d13)*_0x5cb220['last']>_0x4281b5['number'])_0x74c5bb=![];}}return _0x74c5bb;}async function getBalances(_0x52d65e=!![]){const _0x1c1671=_0x1348f9;let _0x27ffd8=0x0,_0x51c2c8;const _0x3a30a2=config[_0x1c1671(0x272)];if(config[_0x1c1671(0x234)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x436aa9=>{const _0x49a60e=_0x1c1671;if(_0x436aa9[_0x49a60e(0x14e)]!=config[_0x49a60e(0x17a)]){let _0x189df4=global['ticker'][noslash(_0x436aa9['symbol'])];_0x51c2c8=_0x436aa9[_0x49a60e(0x1e5)]?0x1/_0x189df4:_0x189df4;}else _0x51c2c8=0x1;let _0x499c92=_0x436aa9[_0x49a60e(0x1d3)]*_0x51c2c8;_0x27ffd8+=_0x499c92,_0x436aa9[_0x49a60e(0x210)]=formatResult(Number(_0x51c2c8),0x8),_0x436aa9['value']=_0x499c92;}),currentCoins[_0x1c1671(0x2b1)](_0x4f1b87=>{const _0x4cb8fd=_0x1c1671;let _0xb20fd6=config[_0x4cb8fd(0x194)]['find'](_0x209981=>_0x209981[_0x4cb8fd(0x14e)]==_0x4f1b87['coin']),_0x4fd066=Number(_0xb20fd6['distribution']),_0x5d9b3c=_0x4f1b87[_0x4cb8fd(0x162)]/_0x27ffd8*0x64,_0x3b00ed=_0x4fd066*_0x27ffd8/0x64/_0x4f1b87[_0x4cb8fd(0x210)]-_0x4f1b87[_0x4cb8fd(0x1d3)];_0x4f1b87[_0x4cb8fd(0x26f)]=formatResult(_0x5d9b3c,0x3),_0x4f1b87[_0x4cb8fd(0x18e)]=formatResult(_0x4fd066,0x3),_0x4f1b87[_0x4cb8fd(0x159)]=formatResult(_0x3b00ed,0x8),_0x4f1b87[_0x4cb8fd(0x15a)]='',_0x4f1b87[_0x4cb8fd(0x11c)]=![];if(_0x4f1b87[_0x4cb8fd(0x14e)]!=config[_0x4cb8fd(0x17a)]){if(_0x4f1b87[_0x4cb8fd(0x26f)]>_0x4fd066)_0x4f1b87['side']='sell',_0x4f1b87[_0x4cb8fd(0x11c)]=checkMinimums(_0x4f1b87);else _0x4f1b87['distribution']<_0x4fd066&&(_0x4f1b87[_0x4cb8fd(0x15a)]=_0x4cb8fd(0x252),_0x4f1b87[_0x4cb8fd(0x11c)]=checkMinimums(_0x4f1b87));}_0x4f1b87[_0x4cb8fd(0x208)]=_0x4f1b87[_0x4cb8fd(0x26f)]/_0x4f1b87[_0x4cb8fd(0x18e)]-0x1;if(_0x4f1b87[_0x4cb8fd(0x203)]==_0x4cb8fd(0x2a8)||_0x4f1b87[_0x4cb8fd(0x203)]==_0x4cb8fd(0x12f))_0x4f1b87[_0x4cb8fd(0x203)]='none';}),currentCoins[_0x1c1671(0x1ad)]((_0x44d98e,_0xb58423)=>_0x44d98e[_0x1c1671(0x208)]<_0xb58423['delta']?0x1:_0xb58423[_0x1c1671(0x208)]<_0x44d98e[_0x1c1671(0x208)]?-0x1:0x0);const _0x4fb8bf=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4fb8bf[_0x1c1671(0x266)],'usd':_0x4fb8bf['usd'],'portfolio':JSON[_0x1c1671(0x1fc)](currentCoins),'threshold':_0x3a30a2},proxyEmit(_0x1c1671(0x1d0),{'serverversion':serverversion,'balances':lastBalances});if(_0x52d65e){if(config[_0x1c1671(0x234)])headlessMode({'portfolio':currentCoins,'threshold':_0x3a30a2});else{if(lockOrders==ORDERS[_0x1c1671(0x1f4)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3a30a2});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x46dbc8=getNormalizedPerformance();getStartingBalances(_0x46dbc8),emitPerformance(_0x46dbc8);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4dbe71=getNormalizedPerformance();emitPerformance(_0x4dbe71),getStartingBalances(_0x4dbe71),logger[_0x1c1671(0x19e)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x54a5a0=_0x1348f9;if(!lastBalances)return;let _0x16a763=[],_0x487456,_0x337e88=JSON['parse'](lastBalances['portfolio']);_0x337e88[_0x54a5a0(0x1ad)]((_0x5224c0,_0x33b999)=>_0x5224c0[_0x54a5a0(0x14e)]>_0x33b999[_0x54a5a0(0x14e)]?0x1:_0x33b999[_0x54a5a0(0x14e)]>_0x5224c0[_0x54a5a0(0x14e)]?-0x1:0x0),_0x337e88[_0x54a5a0(0x2b1)](_0x1eec4f=>{const _0x46a5bc=_0x54a5a0;let _0x4edaeb={'coin':_0x1eec4f[_0x46a5bc(0x14e)],'number':_0x1eec4f[_0x46a5bc(0x1d3)],'price':_0x1eec4f['last']};_0x16a763[_0x46a5bc(0x1e1)](_0x4edaeb);});const _0x4d31cd=await getFiat();_0x487456={'date':lastBalances['time'][_0x54a5a0(0x16e)]('\x20')[0x0],'eur':_0x4d31cd[_0x54a5a0(0x266)],'usd':_0x4d31cd[_0x54a5a0(0x27d)],'coins':_0x16a763};let _0x40f06e=dbPerformance[_0x54a5a0(0x260)](_0x54a5a0(0x1db))[_0x54a5a0(0x2a1)]({'date':_0x487456[_0x54a5a0(0x278)]})['value']();_0x40f06e?_0x487456[_0x54a5a0(0x278)]!=config[_0x54a5a0(0x24e)]&&dbPerformance[_0x54a5a0(0x260)]('data')[_0x54a5a0(0x2a1)]({'date':_0x487456[_0x54a5a0(0x278)]})[_0x54a5a0(0x26b)](_0x487456)[_0x54a5a0(0x1be)]():dbPerformance['get'](_0x54a5a0(0x1db))['push'](_0x487456)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5d78a0=_0x1348f9;let _0x5146ef=[];if(dbPerformance[_0x5d78a0(0x133)](_0x5d78a0(0x1db))[_0x5d78a0(0x162)]()){let _0x2a34b7=dbPerformance[_0x5d78a0(0x260)](_0x5d78a0(0x1db))[_0x5d78a0(0x124)]()[_0x5d78a0(0x1da)](_0x7d625d=>{const _0x1059a0=_0x5d78a0;if(_0x7d625d[_0x1059a0(0x1e2)]['length']==0x0)return![];else return!![];})[_0x5d78a0(0x171)](_0x5d78a0(0x278))[_0x5d78a0(0x162)](),_0x5b86cc=[...config[_0x5d78a0(0x1ff)]];_0x5b86cc[_0x5d78a0(0x1ad)]((_0x3cb8d7,_0x34e524)=>_0x3cb8d7['date']>_0x34e524[_0x5d78a0(0x278)]?-0x1:_0x34e524[_0x5d78a0(0x278)]>_0x3cb8d7[_0x5d78a0(0x278)]?0x1:0x0);let _0xf57ba0=0x1,_0x556e95=[],_0x5bf614=0x0;_0x2a34b7[_0x5d78a0(0x1e0)]()[_0x5d78a0(0x1e5)]()[_0x5d78a0(0x2b1)]((_0x288d03,_0xfaa8f3)=>{const _0x3c3059=_0x5d78a0;if(_0x5b86cc[_0x5bf614]){if(_0x2a34b7[_0x2a34b7[_0x3c3059(0x178)]-_0xfaa8f3]&&_0x5b86cc[_0x5bf614]['date']==_0x2a34b7[_0x2a34b7[_0x3c3059(0x178)]-_0xfaa8f3][_0x3c3059(0x278)]){if(_0xfaa8f3<_0x2a34b7[_0x3c3059(0x178)]){let _0x34149d=0x0,_0x10d52d=0x0;_0x2a34b7[_0x2a34b7[_0x3c3059(0x178)]-_0xfaa8f3][_0x3c3059(0x1e2)][_0x3c3059(0x2b1)](_0x13db41=>{const _0x852a6b=_0x3c3059;_0x10d52d+=_0x13db41['number']*_0x13db41[_0x852a6b(0x152)];}),_0x5b86cc[_0x5bf614]['changes']['forEach'](_0x3f74e7=>{const _0x2e753f=_0x3c3059;_0x34149d+=_0x3f74e7[_0x2e753f(0x1d3)]*_0x3f74e7['price'];}),_0xf57ba0*=_0x34149d/(_0x10d52d-_0x34149d)+0x1;}_0x5bf614++;}}let _0x4ae53b=0x0;_0x288d03[_0x3c3059(0x1e2)][_0x3c3059(0x2b1)](_0x4f51e1=>{const _0x44af62=_0x3c3059;_0x4ae53b+=_0x4f51e1[_0x44af62(0x1d3)]*_0x4f51e1[_0x44af62(0x152)];}),_0x556e95[_0x2a34b7['length']-_0xfaa8f3-0x1]=_0x4ae53b*(_0xf57ba0-0x1);});let _0x579e13=[];_0x5b86cc=[...config[_0x5d78a0(0x1ff)]]||[];let _0x4d847d=0x0;_0x5bf614=0x0,_0x2a34b7[_0x5d78a0(0x2b1)]((_0x3ff28c,_0x3e7f91)=>{const _0xdcf916=_0x5d78a0;if(_0x5b86cc[_0x5bf614]){const _0x28f32c=fns[_0xdcf916(0x180)](_0x5b86cc[_0x5bf614][_0xdcf916(0x278)],'yyyy/MM/dd',new Date()),_0x17f0a6=fns[_0xdcf916(0x180)](_0x3ff28c[_0xdcf916(0x278)],_0xdcf916(0x289),new Date());if(fns[_0xdcf916(0x27a)](_0x28f32c,_0x17f0a6)){let _0x578d60=0x0;_0x5b86cc[_0x5bf614]['changes']['forEach'](_0x5d70b8=>{const _0x19b2e9=_0xdcf916;!_0x579e13[_0x5d70b8['coin']]?_0x579e13[_0x5d70b8[_0x19b2e9(0x14e)]]=_0x5d70b8['number']:(_0x578d60=_0x579e13[_0x5d70b8[_0x19b2e9(0x14e)]],_0x579e13[_0x5d70b8[_0x19b2e9(0x14e)]]+=_0x5d70b8['number']);const _0x44cd54=_0x3ff28c[_0x19b2e9(0x1e2)][_0x19b2e9(0x2a1)](_0x1b7cf1=>_0x1b7cf1[_0x19b2e9(0x14e)]==_0x5d70b8[_0x19b2e9(0x14e)]);(!_0x44cd54||_0x44cd54[_0x19b2e9(0x1d3)]==0x0)&&(_0x4d847d+=(-_0x5d70b8[_0x19b2e9(0x1d3)]-_0x578d60)*_0x5d70b8[_0x19b2e9(0x152)]);}),_0x5bf614++;}}_0x3ff28c['coins'][_0xdcf916(0x2b1)]((_0x44b878,_0x3ff021)=>{const _0x1c0374=_0xdcf916;_0x579e13[_0x44b878['coin']]&&(_0x44b878[_0x1c0374(0x1c9)]=_0x579e13[_0x44b878[_0x1c0374(0x14e)]]);}),_0x5146ef[_0xdcf916(0x1e1)]({'date':_0x3ff28c[_0xdcf916(0x278)],'eur':_0x3ff28c[_0xdcf916(0x266)],'usd':_0x3ff28c['usd'],'offset':_0x556e95[_0x3e7f91],'netoffset':_0x4d847d,'coins':_0x3ff28c['coins']});});}return _0x5146ef;}function emitPerformance(_0x58a0bc){const _0x2f7888=_0x1348f9;_0x58a0bc[_0x2f7888(0x178)]!==0x0?(proxyEmit(_0x2f7888(0x182),_0x58a0bc),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5267d1,_0x41a45d){const _0x5ddb00=_0x1348f9;let _0x1bd07e=0x0,_0x5ae550=0x0,_0x46fb8c=0x0;_0x5267d1[_0x5ddb00(0x1e2)][_0x5ddb00(0x2b1)](_0x18c4ac=>{const _0x5de95f=_0x5ddb00;_0x1bd07e+=_0x18c4ac[_0x5de95f(0x1d3)]*_0x18c4ac['price'];});_0x41a45d&&(_0x1bd07e+=_0x5267d1[_0x5ddb00(0x18d)]);if(config[_0x5ddb00(0x17a)]==='BTC'||config[_0x5ddb00(0x17a)]===_0x5ddb00(0x199))_0x5ae550=_0x1bd07e*_0x5267d1[_0x5ddb00(0x266)],_0x46fb8c=_0x1bd07e*_0x5267d1[_0x5ddb00(0x27d)];else{if(usdBasecoins[_0x5ddb00(0x1bd)](config[_0x5ddb00(0x17a)]))_0x5ae550=_0x1bd07e*_0x5267d1['eur']/_0x5267d1['usd'],_0x46fb8c=_0x1bd07e;else config[_0x5ddb00(0x17a)]==='EUR'&&(_0x5ae550=_0x1bd07e,_0x46fb8c=_0x1bd07e*_0x5267d1['usd']/_0x5267d1[_0x5ddb00(0x266)]);}return[_0x1bd07e,_0x5ae550,_0x46fb8c];}function getKPIs(_0x2f81d0,_0x1e0d1d='EUR'){const _0x2a15c2=_0x1348f9,_0x4e827e=config[_0x2a15c2(0x17a)],_0x57adc8=lastBalances,_0x2fd9bf=currentCoins,_0x1da74f=getNormalizedPerformance(),_0x3e3ac1=_0x2f81d0===_0x2a15c2(0x17a)?_0x4e827e:_0x2f81d0==='fiat'||_0x2f81d0===_0x2a15c2(0x261)?_0x1e0d1d:'Net\x20'+_0x4e827e,_0x132ccd=_0x2f81d0==='net-basecoin'?_0x2a15c2(0x1d7):_0x2f81d0===_0x2a15c2(0x261)?_0x2a15c2(0x1d7):_0x3e3ac1+_0x2a15c2(0x267),_0x553222=_0x2f81d0===_0x2a15c2(0x2ac)||_0x2f81d0===_0x2a15c2(0x261)?_0x2a15c2(0x1d7):_0x3e3ac1+_0x2a15c2(0x205);let _0x20ffcf=0x0;_0x2fd9bf[_0x2a15c2(0x2b1)](_0x22bb17=>{const _0x4a3555=_0x2a15c2;_0x20ffcf+=_0x22bb17[_0x4a3555(0x1d3)]*_0x22bb17['last'];});if(_0x2f81d0==='fiat'||_0x2f81d0===_0x2a15c2(0x261)){if(_0x4e827e===_0x2a15c2(0x2b3)||_0x4e827e===_0x2a15c2(0x199))_0x20ffcf=_0x20ffcf*(_0x1e0d1d==='EUR'?_0x57adc8['eur']:_0x57adc8[_0x2a15c2(0x27d)]);else{if(usdBasecoins[_0x2a15c2(0x1bd)](_0x4e827e))_0x20ffcf=_0x20ffcf*(_0x1e0d1d===_0x2a15c2(0x287)?_0x57adc8[_0x2a15c2(0x266)]/_0x57adc8['usd']:0x1);else _0x4e827e===_0x2a15c2(0x287)&&(_0x20ffcf=_0x20ffcf*(_0x1e0d1d===_0x2a15c2(0x287)?0x1:_0x57adc8[_0x2a15c2(0x27d)]/_0x57adc8[_0x2a15c2(0x266)]));}}let _0x47e013;if(_0x20ffcf!==0x0){if(_0x2f81d0===_0x2a15c2(0x17a))_0x47e013=(_0x20ffcf/startingBalances[_0x2a15c2(0x17a)]-0x1)*0x64;else{if(_0x1e0d1d==='EUR')_0x47e013=(_0x20ffcf/startingBalances[_0x2a15c2(0x266)]-0x1)*0x64;else _0x47e013=(_0x20ffcf/startingBalances[_0x2a15c2(0x27d)]-0x1)*0x64;}let _0xf86cf3=0x0;if(startingBalances[_0x2a15c2(0x1e2)])_0x2fd9bf[_0x2a15c2(0x2b1)](_0x33dff1=>{const _0x1b8e3f=_0x2a15c2;let _0xd2aea1=startingBalances['coins']['find'](_0x8f13b5=>_0x8f13b5[_0x1b8e3f(0x14e)]===_0x33dff1['coin']);if(_0xd2aea1&&_0xd2aea1[_0x1b8e3f(0x14e)]&&_0x33dff1[_0x1b8e3f(0x1d3)]!==0x0)_0xf86cf3+=_0xd2aea1['number']*_0x33dff1[_0x1b8e3f(0x210)];});let _0x237011=0x0;if(_0x1da74f[_0x2a15c2(0x178)]!==0x0){let _0xc5dd59=_0x1da74f[_0x1da74f[_0x2a15c2(0x178)]-0x1];_0x237011=_0xc5dd59[_0x2a15c2(0x1bc)];}_0xf86cf3-=_0x237011;_0x2f81d0===_0x2a15c2(0x2ac)&&(_0x47e013=(_0x20ffcf-_0xf86cf3)/startingBalances[_0x2a15c2(0x17a)]*0x64,_0x20ffcf=_0x20ffcf-_0xf86cf3);if(_0x2f81d0==='net-fiat'){let _0x5ca943=_0x1e0d1d===_0x2a15c2(0x287)?startingBalances['eur']:startingBalances[_0x2a15c2(0x27d)];if(_0x4e827e===_0x2a15c2(0x2b3)||_0x4e827e===_0x2a15c2(0x199))_0xf86cf3=_0x1e0d1d==='EUR'?_0xf86cf3*_0x57adc8[_0x2a15c2(0x266)]:_0xf86cf3*_0x57adc8['usd'];else{if(usdBasecoins[_0x2a15c2(0x1bd)](_0x4e827e))_0xf86cf3=_0x1e0d1d===_0x2a15c2(0x287)?_0xf86cf3*_0x57adc8['eur']/_0x57adc8[_0x2a15c2(0x27d)]:_0xf86cf3;else _0x4e827e===_0x2a15c2(0x287)&&(_0xf86cf3=_0x1e0d1d===_0x2a15c2(0x287)?_0xf86cf3:_0xf86cf3*_0x57adc8[_0x2a15c2(0x27d)]/_0x57adc8[_0x2a15c2(0x266)]);}_0x47e013=(_0x20ffcf-_0xf86cf3)/_0x5ca943*0x64,_0x20ffcf=_0x20ffcf-_0xf86cf3;}if(_0x47e013){if(_0x47e013<0x64)_0x47e013=_0x47e013[_0x2a15c2(0x276)](0x2);else{if(_0x47e013<0x3e8)_0x47e013=_0x47e013[_0x2a15c2(0x276)](0x1);else _0x47e013=_0x47e013['toFixed'](0x0);}}else _0x47e013=Number('0')[_0x2a15c2(0x276)](0x2);if(_0x20ffcf){if(Math[_0x2a15c2(0x1a9)](_0x20ffcf)<0.000001)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x2);else{if(Math['abs'](_0x20ffcf)<0.1)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x6);else{if(Math[_0x2a15c2(0x1a9)](_0x20ffcf)<0x1)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x5);else{if(Math[_0x2a15c2(0x1a9)](_0x20ffcf)<0xa)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x4);else{if(Math[_0x2a15c2(0x1a9)](_0x20ffcf)<0x64)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x3);else{if(Math['abs'](_0x20ffcf)<0x3e8)_0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x2);else _0x20ffcf=_0x20ffcf[_0x2a15c2(0x276)](0x2);}}}}}}else _0x20ffcf=Number('0')[_0x2a15c2(0x276)](0x2);}else _0x47e013=Number('0')[_0x2a15c2(0x276)](0x2);return{'value':_0x20ffcf,'change':_0x47e013,'leftTxt':_0x132ccd,'rightTxt':_0x553222};}async function getStartingBalances(_0x49094f,_0x3b14ae=!![]){const _0x202641=_0x1348f9;if(_0x49094f[_0x202641(0x178)]!==0x0){const [_0x57a7cc,_0x9ac18,_0x7bc4f9]=getPerf(_0x49094f[0x0],!![]);let _0x49079f=[];config[_0x202641(0x194)][_0x202641(0x2b1)](_0x3716ad=>{const _0x4e99d4=_0x202641;let _0xac4456=0x0,_0x444f2d;config[_0x4e99d4(0x1ff)][_0x4e99d4(0x2b1)](_0x194c0e=>{const _0x4c2061=_0x4e99d4;let _0x2fc3f0=_0x194c0e[_0x4c2061(0x263)]['find'](_0x12f8a6=>_0x12f8a6[_0x4c2061(0x14e)]==_0x3716ad[_0x4c2061(0x14e)]);if(_0x2fc3f0){_0xac4456+=_0x2fc3f0[_0x4c2061(0x1d3)];if(!_0x444f2d)_0x444f2d=_0x2fc3f0['price'];}}),_0x49079f['push']({'coin':_0x3716ad['coin'],'number':_0xac4456,'initialprice':_0x444f2d});});const _0x2253c4={'basecoin':_0x57a7cc,'eur':_0x9ac18,'usd':_0x7bc4f9,'coins':_0x49079f};if(_0x3b14ae)proxyEmit(_0x202641(0x14b),_0x2253c4);startingBalances=_0x2253c4;}}function headlessMode(_0x3d27ca){const _0x31748b=_0x1348f9;let _0x45d68c=_0x3d27ca['portfolio'],_0x482013=_0x3d27ca[_0x31748b(0x272)],_0x430908=[];for(let _0x33232e of _0x45d68c){if(_0x33232e[_0x31748b(0x14e)]!=config[_0x31748b(0x17a)]){if(_0x33232e['delta']>=_0x482013/0x64){if(_0x33232e['valid'])_0x430908['push'](_0x33232e);}else{if(_0x33232e[_0x31748b(0x208)]<=-_0x482013/0x64){if(_0x33232e[_0x31748b(0x11c)])_0x430908[_0x31748b(0x1e1)](_0x33232e);}}}}_0x430908[_0x31748b(0x178)]>0x0&&(lockOrders==ORDERS[_0x31748b(0x1f4)]&&!coolingDown&&_0x430908[_0x31748b(0x2b1)](_0x57cad8=>{const _0x5743a8=_0x31748b;logger[_0x5743a8(0x19e)](_0x5743a8(0x1cb)+_0x57cad8[_0x5743a8(0x14e)]+'\x20'+_0x57cad8['number']+'\x20'+_0x57cad8['last']+'\x20'+_0x57cad8['distribution']+'%\x20'+_0x57cad8[_0x5743a8(0x18e)]+'%\x20'+(0x64*_0x57cad8[_0x5743a8(0x208)])[_0x5743a8(0x276)](0x2)+'%\x20('+_0x482013[_0x5743a8(0x276)](0x2)+'%)');}),placeOrder(_0x430908));}function notifyBalance(_0x329688){const _0x15bc31=_0x1348f9;let _0x572bc8=_0x329688[_0x15bc31(0x194)],_0x35b1b3=_0x329688[_0x15bc31(0x272)],_0x369345=[];for(let _0x20b7b1 of _0x572bc8){if(_0x20b7b1[_0x15bc31(0x14e)]!=config[_0x15bc31(0x17a)]){if(_0x20b7b1[_0x15bc31(0x208)]>=_0x35b1b3/0x64){if(_0x20b7b1['valid'])_0x369345[_0x15bc31(0x1e1)](_0x20b7b1);}else{if(_0x20b7b1[_0x15bc31(0x208)]<=-_0x35b1b3/0x64){if(_0x20b7b1[_0x15bc31(0x11c)])_0x369345[_0x15bc31(0x1e1)](_0x20b7b1);}}}}if(_0x369345[_0x15bc31(0x178)]>0x0){let _0x485320=_0x369345[_0x15bc31(0x2a5)](_0x38f6d0=>_0x38f6d0[_0x15bc31(0x14e)]);_0x485320[_0x15bc31(0x1ad)]();let _0x5947bc=_0x485320[_0x15bc31(0x189)](',\x20');if(!lastCoinsToBalance)logHistory(_0x15bc31(0x217),_0x15bc31(0x18c));lastCoinsToBalance=_0x5947bc;}}function symbolToCoin(_0x3817a4){const _0x59b1aa=_0x1348f9;let _0x24e198;if(_0x3817a4['includes']('/'+config[_0x59b1aa(0x17a)]))_0x24e198=_0x3817a4[_0x59b1aa(0x225)]('/'+config[_0x59b1aa(0x17a)],'');if(_0x3817a4[_0x59b1aa(0x1bd)](config[_0x59b1aa(0x17a)]+'/'))_0x24e198=_0x3817a4[_0x59b1aa(0x225)](config['basecoin']+'/','');return _0x24e198;}async function unlockOrders(){const _0xab8ad=_0x1348f9;if(allOrdersPlaced&&lockOrders==ORDERS[_0xab8ad(0x1b0)]){logger[_0xab8ad(0x19e)](_0xab8ad(0x13e)),lockOrders=ORDERS[_0xab8ad(0x28e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x433fb7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x433fb7,validateOrdersState=_0xab8ad(0x1c9),persistOpenOrders([]),lockOrders=ORDERS[_0xab8ad(0x1f4)],logger[_0xab8ad(0x19e)](_0xab8ad(0x25f));}}async function validateOrders(_0x36d8a5){const _0x3e619f=_0x1348f9;if(_0x36d8a5)validateOrdersState=_0x36d8a5;logger[_0x3e619f(0x19e)](_0x3e619f(0x117)+validateOrdersState+_0x3e619f(0x116)+(lockOrders==0x1?_0x3e619f(0x14d):lockOrders==0x2?_0x3e619f(0x294):_0x3e619f(0x240)));let _0x540e7a=[],_0x16e92f=config[_0x3e619f(0x20e)]==_0x3e619f(0x233)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3e619f(0x2b9)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3e619f(0x1b0)])return;logger[_0x3e619f(0x19e)](_0x3e619f(0x168)+validateOrdersState),lastOrders[_0x3e619f(0x2b1)](_0x438ec7=>{const _0x522b40=_0x3e619f;let _0x25ab15=![];_0x438ec7[_0x522b40(0x2a8)]>0x0&&(_0x25ab15=!![]),_0x540e7a[_0x522b40(0x1e1)](_0x25ab15),_0x25ab15&&config[_0x522b40(0x20e)]!=_0x522b40(0x233)&&logHistory(_0x522b40(0x1c3),_0x522b40(0x163)+_0x438ec7[_0x522b40(0x17f)]+'\x20'+_0x438ec7[_0x522b40(0x15a)]+'\x20#'+formatResult(_0x438ec7[_0x522b40(0x2a8)],0x8)+'\x20@'+formatResult(_0x438ec7[_0x522b40(0x152)],0x8));}),_0x540e7a['forEach']((_0x4d6192,_0x3c40f8)=>{if(_0x4d6192)lastOrders['splice'](_0x3c40f8,0x1);}),persistOpenOrders(lastOrders);const _0xdede5f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x3e619f(0x250);if(validateOrdersState==_0x3e619f(0x1c9)){validateOrdersState=_0x3e619f(0x11b);if(_0x540e7a[_0x3e619f(0x1bd)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3e619f(0x11b)){if(_0x540e7a[_0x3e619f(0x1bd)](![])){}else{if(allOrdersPlaced){if(config[_0x3e619f(0x20e)]==_0x3e619f(0x233)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3e619f(0x256))_0x540e7a[_0x3e619f(0x1bd)](![])&&(config[_0x3e619f(0x20e)]==_0x3e619f(0x233)?logHistory(_0x3e619f(0x122),_0x3e619f(0x17c)+Math[_0x3e619f(0x179)](_0x16e92f*validateOrderInterval/0xea60)+_0x3e619f(0x28d)+_0xdede5f):(await cancelOrders(),logHistory(_0x3e619f(0x122),_0x3e619f(0x20d)+Math[_0x3e619f(0x179)](_0x16e92f*validateOrderInterval/0xea60)+_0x3e619f(0x28d)+_0xdede5f))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x3e619f(0x20e)]!=_0x3e619f(0x233))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0xdede5f);await unlockOrders();}}}}}async function cancelOrders(){const _0x18734f=_0x1348f9;lastOrders[_0x18734f(0x2b1)](async _0x637de9=>{const _0x250c85=_0x18734f;try{const _0x583e65=await exchange[_0x250c85(0x29e)](_0x637de9['orderId'],_0x637de9[_0x250c85(0x17f)]);}catch(_0x5c4268){if(_0x5c4268[_0x250c85(0x1f8)]()['includes'](_0x250c85(0x23f))){}else await handleError(_0x5c4268,'cancelOrders()');}});}async function initCoinResults(_0x5d3120){const _0x3f35cf=_0x1348f9;_0x5d3120?logger['debug'](_0x3f35cf(0x242)+_0x5d3120):logger[_0x3f35cf(0x19e)](_0x3f35cf(0x11e)),config[_0x3f35cf(0x194)][_0x3f35cf(0x2b1)](_0x37c653=>{const _0x5e579a=_0x3f35cf;if(!_0x37c653[_0x5e579a(0x226)]&&_0x37c653[_0x5e579a(0x14e)]!=config['basecoin']){const _0x189882=currentCoins[_0x5e579a(0x2a1)](_0x3e83fd=>_0x3e83fd['coin']==_0x37c653['coin']),_0x49ff7b=global[_0x5e579a(0x13d)][noslash(_0x37c653[_0x5e579a(0x17f)])];let _0xafeb24=_0x189882?_0x189882['number']:null,_0x1be084=_0x37c653[_0x5e579a(0x1e5)]?0x1/_0x49ff7b:_0x49ff7b,_0x2354c3;config['liquidity'][_0x5e579a(0x2b1)](_0xcf5575=>{const _0x54c98a=_0x5e579a;!_0x2354c3&&(_0x2354c3=_0xcf5575['changes'][_0x54c98a(0x2a1)](_0x3bddd5=>_0x3bddd5[_0x54c98a(0x14e)]==_0x37c653[_0x54c98a(0x14e)]),_0x2354c3&&(_0xafeb24=_0x2354c3[_0x54c98a(0x1d3)],_0x1be084=_0x2354c3[_0x54c98a(0x152)]));});let _0x57e68a=dbCoinResults['get'](_0x5e579a(0x1e2))[_0x5e579a(0x2a1)]({'coin':_0x37c653['coin']})[_0x5e579a(0x162)]();if(!_0x57e68a){const _0x2763ab={'coin':_0x37c653[_0x5e579a(0x14e)],'number':_0xafeb24,'breakeven':_0x1be084,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5e579a(0x260)](_0x5e579a(0x1e2))['push'](_0x2763ab)[_0x5e579a(0x1be)]();}else{if(_0x5d3120&&_0x37c653[_0x5e579a(0x14e)]==_0x5d3120){const _0x464cb4={'coin':_0x37c653[_0x5e579a(0x14e)],'number':_0xafeb24,'breakeven':_0x1be084,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5e579a(0x260)](_0x5e579a(0x1e2))[_0x5e579a(0x2a1)]({'coin':_0x37c653[_0x5e579a(0x14e)]})[_0x5e579a(0x26b)](_0x464cb4)[_0x5e579a(0x1be)]();}}}});}async function updateCoinResults(_0x3f720c,_0x241014=![]){const _0x590c53=_0x1348f9;let _0xefbe76,_0x1b77d2,_0x11cea9,_0x5ab903,_0x4e2b8e,_0x1b8225,_0x589fbe=dbCoinResults['get'](_0x590c53(0x1e2))[_0x590c53(0x2a1)]({'coin':_0x3f720c['coin']})[_0x590c53(0x162)](),_0x2e6817=![];_0x589fbe&&Object['entries'](_0x589fbe)[_0x590c53(0x2b1)](([_0x35ee79,_0xdf6ac5])=>{if(_0xdf6ac5==null)_0x2e6817=!![];});(!_0x589fbe||_0x2e6817)&&(await initCoinResults(_0x3f720c[_0x590c53(0x14e)]),_0x589fbe=dbCoinResults[_0x590c53(0x260)]('coins')[_0x590c53(0x2a1)]({'coin':_0x3f720c[_0x590c53(0x14e)]})['value']());_0x3f720c[_0x590c53(0x1e5)]&&(_0x1b8225={'filled':_0x3f720c[_0x590c53(0x2a8)]*_0x3f720c[_0x590c53(0x152)],'amount':_0x3f720c[_0x590c53(0x2a8)]*_0x3f720c[_0x590c53(0x152)],'side':_0x3f720c['side']=='sell'?_0x590c53(0x252):'sell','price':0x1/_0x3f720c['price']},_0x3f720c={..._0x3f720c,..._0x1b8225});_0x241014?_0x1b77d2=_0x3f720c[_0x590c53(0x15a)]=='buy'?_0x589fbe['number']+_0x3f720c[_0x590c53(0x2a8)]:_0x589fbe[_0x590c53(0x1d3)]-_0x3f720c['filled']:_0x1b77d2=await getCoinNumber(_0x3f720c[_0x590c53(0x14e)]);if(_0x3f720c[_0x590c53(0x1a7)]&&_0x3f720c[_0x590c53(0x1a7)]['currency']==config[_0x590c53(0x17a)])_0xefbe76=_0x3f720c[_0x590c53(0x1a7)][_0x590c53(0x274)];else{if(_0x3f720c[_0x590c53(0x1a7)]&&_0x3f720c[_0x590c53(0x1a7)][_0x590c53(0x1cf)]==_0x590c53(0x18b)&&!_0x241014)_0xefbe76=_0x3f720c['fee']['cost']*global[_0x590c53(0x13d)][_0x590c53(0x18b)+config[_0x590c53(0x17a)]];else _0xefbe76=defaultFee*_0x3f720c['filled']*_0x3f720c[_0x590c53(0x152)];}_0x3f720c[_0x590c53(0x15a)]==_0x590c53(0x252)?(_0x11cea9=_0x1b77d2!=0x0?(_0x589fbe[_0x590c53(0x284)]*_0x589fbe['number']+_0x3f720c[_0x590c53(0x152)]*(_0x1b77d2-_0x589fbe[_0x590c53(0x1d3)])+_0xefbe76)/_0x1b77d2:0x0,_0x5ab903=_0x589fbe[_0x590c53(0x121)]):(_0x11cea9=_0x1b77d2!=0x0?(_0x589fbe['breakeven']*_0x589fbe['number']-_0x3f720c[_0x590c53(0x152)]*(_0x589fbe['number']-_0x1b77d2)+_0xefbe76)/_0x1b77d2:0x0,_0x5ab903=_0x589fbe[_0x590c53(0x121)]+(_0x3f720c['price']-_0x589fbe[_0x590c53(0x284)])*_0x3f720c[_0x590c53(0x2a8)]);_0x4e2b8e=(_0x3f720c[_0x590c53(0x152)]-_0x11cea9-_0xefbe76/_0x3f720c[_0x590c53(0x2a8)])*_0x1b77d2;let _0x10e82a={'coin':_0x3f720c['coin'],'number':_0x1b77d2,'breakeven':formatResult(_0x11cea9,0x8),'realized':formatResult(_0x5ab903,0x8),'unrealized':formatResult(_0x4e2b8e,0x8),'fees':formatResult(_0x589fbe['fees']+_0xefbe76,0x8),'sells':_0x3f720c[_0x590c53(0x15a)]==_0x590c53(0x232)?_0x589fbe['sells']+0x1:_0x589fbe[_0x590c53(0x1d4)],'buys':_0x3f720c[_0x590c53(0x15a)]==_0x590c53(0x252)?_0x589fbe[_0x590c53(0x1c5)]+0x1:_0x589fbe[_0x590c53(0x1c5)]};dbCoinResults[_0x590c53(0x260)]('coins')[_0x590c53(0x2a1)]({'coin':_0x3f720c[_0x590c53(0x14e)]})['assign'](_0x10e82a)['write']();if(!_0x241014){if(_0x3f720c[_0x590c53(0x1a7)]&&_0x3f720c['fee']['currency']=='BNB'){const _0xb91f89=currentCoins[_0x590c53(0x2a1)](_0x3152a2=>_0x3152a2['coin']==_0x590c53(0x18b));if(_0xb91f89){let _0x531884=dbCoinResults['get']('coins')[_0x590c53(0x2a1)]({'coin':_0x590c53(0x18b)})[_0x590c53(0x162)]();_0x10e82a={..._0x531884,'number':_0xb91f89[_0x590c53(0x1d3)]},dbCoinResults[_0x590c53(0x260)](_0x590c53(0x1e2))[_0x590c53(0x2a1)]({'coin':_0x590c53(0x18b)})[_0x590c53(0x26b)](_0x10e82a)[_0x590c53(0x1be)]();}}}}async function placeOrder(_0x44f937){const _0x193ffe=_0x1348f9,_0x562bfa=config[_0x193ffe(0x20e)]=='market'?_0x193ffe(0x233):_0x193ffe(0x279);if(lockOrders==ORDERS[_0x193ffe(0x1f4)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x193ffe(0x1b0)],allOrdersPlaced=![],validateOrdersState=_0x193ffe(0x1c9);let _0x470222=![];lastOrders=[];for(const _0x430e9d of _0x44f937){let _0x1ec17f,_0x15b0ca,_0x4649f5,_0x1f8915,_0x17bac1,_0x3c3475=_0x430e9d['symbol'];try{const _0xb78796=await exchange[_0x193ffe(0x16f)](_0x3c3475);_0x1ec17f=_0x430e9d[_0x193ffe(0x1e5)]?0x1/_0x430e9d[_0x193ffe(0x210)]:_0x430e9d[_0x193ffe(0x210)],_0x15b0ca=_0xb78796[_0x193ffe(0x125)],_0x4649f5=_0xb78796[_0x193ffe(0x13f)];_0x430e9d['reverse']?(_0x1f8915=_0x430e9d['side']=='buy'?_0x193ffe(0x232):'buy',_0x17bac1=Math[_0x193ffe(0x1a9)](_0x430e9d[_0x193ffe(0x159)])/_0x1ec17f):(_0x1f8915=_0x430e9d['side'],_0x17bac1=Math[_0x193ffe(0x1a9)](_0x430e9d['trade']));_0x562bfa=='limit'&&(config['ordertype']==_0x193ffe(0x150)&&(_0x1ec17f=_0x1f8915=='buy'?_0x15b0ca:_0x4649f5),config['ordertype']==_0x193ffe(0x297)&&(_0x1ec17f=_0x1f8915=='buy'?_0x4649f5:_0x15b0ca));_0x17bac1=formatResult(_0x17bac1,0x8),_0x1ec17f=formatResult(_0x1ec17f,0x8);const _0x3e9b44=_0x1f8915==_0x193ffe(0x232)?config[_0x193ffe(0x148)]?String[_0x193ffe(0x1b8)]('0x'+config['emojisell'])+'\x20':'':config[_0x193ffe(0x23a)]?String[_0x193ffe(0x1b8)]('0x'+config[_0x193ffe(0x23a)])+'\x20':'',_0x695d79=_0x562bfa==_0x193ffe(0x233)?_0x193ffe(0x12a):config[_0x193ffe(0x20e)]==_0x193ffe(0x150)?_0x193ffe(0x170):_0x193ffe(0x1d1),_0x47f5b5=(Math[_0x193ffe(0x1af)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x193ffe(0x1e1)]({'customId':_0x47f5b5,'symbol':_0x3c3475,'coin':_0x430e9d[_0x193ffe(0x14e)],'amount':_0x17bac1,'price':_0x1ec17f,'side':_0x1f8915,'reverse':_0x430e9d[_0x193ffe(0x1e5)],'filled':0x0});if(_0x562bfa=='market')logHistory('order',''+_0x3e9b44+_0x695d79+_0x193ffe(0x157)+_0x3c3475+'\x20'+_0x1f8915+'\x20#'+formatResult(_0x17bac1,0x8)+'\x20@'+formatResult(_0x1ec17f,0x8));else logHistory(_0x193ffe(0x1c3),''+_0x3e9b44+_0x695d79+'\x20order:\x20'+_0x3c3475+'\x20'+_0x1f8915+'\x20#'+formatResult(_0x17bac1,0x8)+'\x20@'+formatResult(_0x1ec17f,0x8));let _0x4dd7df;_0x562bfa==_0x193ffe(0x233)?_0x1f8915==_0x193ffe(0x252)&&[_0x193ffe(0x206),_0x193ffe(0x21e),_0x193ffe(0x22d),_0x193ffe(0x265),_0x193ffe(0x15e)][_0x193ffe(0x1bd)](config[_0x193ffe(0x15b)])?_0x4dd7df=await exchange[_0x193ffe(0x258)](_0x3c3475,_0x562bfa,_0x1f8915,_0x17bac1,_0x1ec17f):_0x4dd7df=await exchange[_0x193ffe(0x258)](_0x3c3475,_0x562bfa,_0x1f8915,_0x17bac1,undefined):_0x4dd7df=await exchange[_0x193ffe(0x258)](_0x3c3475,_0x562bfa,_0x1f8915,_0x17bac1,_0x1ec17f);logger[_0x193ffe(0x19e)](_0x193ffe(0x188)+_0x4dd7df['id']+_0x193ffe(0x1a4)+_0x47f5b5);const _0x148fc3=lastOrders['length']-0x1;if(_0x148fc3>=0x0&&lastOrders[_0x148fc3][_0x193ffe(0x16b)]==_0x47f5b5){lastOrders[_0x148fc3][_0x193ffe(0x292)]=_0x4dd7df['id'];if(_0x4dd7df[_0x193ffe(0x216)])lastOrders[_0x148fc3][_0x193ffe(0x216)]=_0x4dd7df[_0x193ffe(0x216)];if(_0x4dd7df['price'])lastOrders[_0x148fc3]['price']=_0x4dd7df[_0x193ffe(0x152)];lastOrders[_0x148fc3]['fee']=_0x4dd7df[_0x193ffe(0x1a7)];}if(config[_0x193ffe(0x15f)]!=0x0){let _0x291bcb=null;if(cooldownTracker['length']==config[_0x193ffe(0x15f)]-0x1)_0x291bcb=cooldownTracker[_0x193ffe(0x1ed)]();const _0x5dcd4e=getTimeStamp();cooldownTracker[_0x193ffe(0x1e1)](_0x5dcd4e);if(_0x291bcb){const _0x3f911b=fns[_0x193ffe(0x1bb)](new Date(_0x5dcd4e),new Date(_0x291bcb));if(_0x3f911b<cooldownInterval){logHistory('error','Executed\x20'+config[_0x193ffe(0x15f)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x193ffe(0x1f3)+cooldownPeriod/(0xe10*0x3e8)+_0x193ffe(0x142)),coolingDown=!![];break;}}}}catch(_0x4614d2){if(_0x4614d2[_0x193ffe(0x1f8)]()[_0x193ffe(0x1bd)](_0x193ffe(0x1a2)))lastOrders=lastOrders[_0x193ffe(0x1da)](_0x4936d8=>_0x4936d8[_0x193ffe(0x17f)]!=_0x3c3475),logHistory(_0x193ffe(0x21d),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3c3475),_0x470222=!![];else{if(_0x4614d2[_0x193ffe(0x1f8)]()[_0x193ffe(0x1bd)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x193ffe(0x1da)](_0x4239a9=>_0x4239a9[_0x193ffe(0x17f)]!=_0x3c3475),logHistory('error',_0x193ffe(0x273)+_0x3c3475),_0x470222=!![];else{if(_0x4614d2[_0x193ffe(0x1f8)]()[_0x193ffe(0x1bd)](_0x193ffe(0x2b6)))lastOrders=lastOrders[_0x193ffe(0x1da)](_0x4c2901=>_0x4c2901[_0x193ffe(0x17f)]!=_0x3c3475),logHistory(_0x193ffe(0x21d),'Order\x20is\x20invalid:\x20'+_0x3c3475),logger[_0x193ffe(0x19e)](_0x4614d2),_0x470222=!![];else _0x4614d2[_0x193ffe(0x1f8)]()[_0x193ffe(0x1bd)](_0x193ffe(0x23e))?(lastOrders=lastOrders[_0x193ffe(0x1da)](_0x7ab185=>_0x7ab185['symbol']!=_0x3c3475),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3c3475),_0x470222=!![]):(lastOrders=lastOrders['filter'](_0xd74d9a=>_0xd74d9a[_0x193ffe(0x17f)]!=_0x3c3475),await handleError(_0x4614d2,'placeOrder()',_0x3c3475));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x193ffe(0x178)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4bdeeb=config[_0x193ffe(0x20e)]==_0x193ffe(0x233)?validateOrderTimeout*0x3c*0x3e8:config[_0x193ffe(0x2b9)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4bdeeb);}else unlockOrders();_0x470222&&config[_0x193ffe(0x234)]&&(logHistory(_0x193ffe(0x21d),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x193ffe(0x122),_0x193ffe(0x25c)));}else{if(coolingDown)!config[_0x193ffe(0x234)]&&logHistory(_0x193ffe(0x21d),_0x193ffe(0x1b9));else lockOrders!=ORDERS[_0x193ffe(0x1f4)]&&(!config[_0x193ffe(0x234)]&&(config[_0x193ffe(0x20e)]==_0x193ffe(0x233)?logHistory('error',_0x193ffe(0x16a)):logHistory(_0x193ffe(0x21d),_0x193ffe(0x26e))));}}function persistOpenOrders(_0x2d522e){const _0x412db9=_0x1348f9,_0x1d4d82={...config,'openOrders':_0x2d522e};let _0xe6ae98=dbConfig['get'](_0x412db9(0x228))['find']({'botID':botID})[_0x412db9(0x162)]();_0xe6ae98&&dbConfig['get'](_0x412db9(0x228))[_0x412db9(0x2a1)]({'botID':botID})[_0x412db9(0x26b)](_0x1d4d82)['write']();}function restoreOrders(){const _0x7ee394=_0x1348f9;let _0x253de3;config[_0x7ee394(0x14a)]&&allOpenOrders['forEach'](_0x4d2ce1=>{const _0x3e9396=_0x7ee394,_0x8330d8=config[_0x3e9396(0x14a)][_0x3e9396(0x2a1)](_0x1df587=>_0x1df587[_0x3e9396(0x292)]==_0x4d2ce1['id']);_0x8330d8&&(lastOrders[_0x3e9396(0x1e1)](_0x8330d8),_0x253de3=_0x4d2ce1['timestamp']);});if(lastOrders[_0x7ee394(0x178)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x42bcc4=new Date()[_0x7ee394(0x282)](),_0x383d63=config[_0x7ee394(0x20e)]==_0x7ee394(0x233)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x253de3+_0x383d63>_0x42bcc4){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x253de3+_0x383d63-_0x42bcc4);}else validateOrders(_0x7ee394(0x256));}}async function sendMetricsTelegram(){const _0x7fb533=_0x1348f9;if(!coinsLoaded){process[_0x7fb533(0x1fb)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2d0878=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x46715='';if(config[_0x7fb533(0x262)])_0x46715=_0x7fb533(0x270)+config[_0x7fb533(0x1de)]+_0x7fb533(0x1ea);else _0x46715='<b>Bot\x20'+botID+_0x7fb533(0x1ea);const _0xc15def=getKPIs(_0x7fb533(0x17a)),_0xd39bb9=getKPIs(_0x7fb533(0x1bf),config[_0x7fb533(0x1bf)]),_0x255c82=getKPIs('net-basecoin'),_0x311c1c=getKPIs(_0x7fb533(0x261),config[_0x7fb533(0x1bf)]);_0x46715+=_0x7fb533(0x1a5),_0x46715+=_0xc15def[_0x7fb533(0x1ce)]+_0x7fb533(0x21b)+_0xc15def[_0x7fb533(0x162)]+'\x0a',_0x46715+=_0xc15def['rightTxt']+':\x20'+_0xc15def[_0x7fb533(0x209)]+'%\x0a',_0x46715+=_0xd39bb9[_0x7fb533(0x1ce)]+'\x20:\x20'+_0xd39bb9[_0x7fb533(0x162)]+'\x0a',_0x46715+=_0xd39bb9[_0x7fb533(0x20c)]+':\x20'+_0xd39bb9[_0x7fb533(0x209)]+'%\x0a',_0x46715+=_0x255c82[_0x7fb533(0x1ce)]+':\x20'+_0x255c82[_0x7fb533(0x162)]+'\x20('+config[_0x7fb533(0x17a)]+')\x0a',_0x46715+=_0x255c82[_0x7fb533(0x20c)]+':\x20'+_0x255c82[_0x7fb533(0x209)]+_0x7fb533(0x235)+config['basecoin']+')\x0a',_0x46715+=_0x311c1c['leftTxt']+':\x20'+_0x311c1c[_0x7fb533(0x162)]+'\x20('+config[_0x7fb533(0x1bf)]+')\x0a',_0x46715+=_0x311c1c[_0x7fb533(0x20c)]+':\x20'+_0x311c1c['change']+_0x7fb533(0x235)+config['fiat']+')\x0a',_0x46715+=_0x7fb533(0x119),process[_0x7fb533(0x1fb)]({'telegrammsg':_0x46715},_0x467630=>{});}async function sendPortfolioTelegram(){const _0x449332=_0x1348f9;if(!coinsLoaded){process[_0x449332(0x1fb)]({'telegrammsg':_0x449332(0x246)},_0x288d86=>{});return;}let _0x167f50='';if(config[_0x449332(0x262)])_0x167f50=_0x449332(0x270)+config[_0x449332(0x1de)]+_0x449332(0x2b7);else _0x167f50=_0x449332(0x200)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x167f50+=_0x449332(0x1a5),_0x167f50+=_0x449332(0x254),_0x167f50+=_0x449332(0x21f),_0x167f50+=_0x449332(0x254),currentCoins['forEach'](_0x3c67a3=>{const _0x41bcdd=_0x449332;_0x167f50+=_0x3c67a3[_0x41bcdd(0x14e)][_0x41bcdd(0x275)](0x7)+'|\x20'+formatPad(_0x3c67a3[_0x41bcdd(0x26f)],0x2,0x6)+'|\x20'+formatPad(_0x3c67a3[_0x41bcdd(0x18e)],0x2,0x6)+'|\x20'+formatPad(_0x3c67a3[_0x41bcdd(0x208)]*0x64,0x2,0x6)+'\x0a';}),_0x167f50+='</pre>',process[_0x449332(0x1fb)]({'telegrammsg':_0x167f50},_0x397155=>{});}function formatPad(_0x377d34,_0x1758ab,_0x39c66b){const _0xa835af=_0x1348f9,_0x57f763=formatResultString(_0x377d34,_0x1758ab);return _0x57f763?_0x57f763['padStart'](_0x39c66b):''[_0xa835af(0x1cd)](_0x39c66b);}function logHistory(_0x25ad3e,_0x27d49d,_0x501811=''){const _0x2585f2=_0x1348f9;logger[_0x2585f2(0x132)](''+_0x27d49d);let _0x457702={'time':getTimeStamp(),'type':_0x25ad3e,'event':_0x27d49d};dbLogs['get'](_0x2585f2(0x184))[_0x2585f2(0x1e1)](_0x457702)[_0x2585f2(0x1be)]();if(_0x501811=='')_0x501811=_0x27d49d;proxyEmit('event',{'log':_0x457702,'summary':_0x501811}),process[_0x2585f2(0x1fb)]({'telegram':{..._0x457702,'botname':config[_0x2585f2(0x1de)],'showname':config[_0x2585f2(0x262)]}},_0x257ca6=>{});}function emitHistory(_0x4703df={}){const _0x302758=_0x1348f9;Object['keys'](_0x4703df)[_0x302758(0x178)]==0x0&&(_0x4703df={'type':[_0x302758(0x1c3),_0x302758(0x127)],'event':'','page':0x1});if(_0x4703df[_0x302758(0x24c)][_0x302758(0x1bd)]('event'))_0x4703df[_0x302758(0x24c)][_0x302758(0x187)](_0x4703df[_0x302758(0x24c)]['indexOf'](_0x302758(0x127)),0x1,'error',_0x302758(0x217),'success');if(dbLogs[_0x302758(0x133)]('logs')[_0x302758(0x162)]()){let _0x46c7ab=dbLogs['get'](_0x302758(0x184))[_0x302758(0x1da)](_0x29126c=>{const _0x3c41cd=_0x302758;if(_0x4703df[_0x3c41cd(0x24c)][_0x3c41cd(0x178)]==0x0)return![];else return _0x4703df[_0x3c41cd(0x24c)][_0x3c41cd(0x1bd)](_0x29126c[_0x3c41cd(0x24c)]);})[_0x302758(0x1da)](_0x96a469=>{const _0x527881=_0x302758;if(_0x4703df['event']=='')return!![];else return _0x96a469['event']['toLowerCase']()['includes'](_0x4703df[_0x527881(0x127)][_0x527881(0x18f)]());})['sortBy']('time'),_0xcf843f=_0x46c7ab['value']()[_0x302758(0x178)];_0x46c7ab=_0x46c7ab[_0x302758(0x1e5)]()[_0x302758(0x1e0)]((_0x4703df[_0x302758(0x15c)]-0x1)*logPageSize,_0x4703df[_0x302758(0x15c)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit('event-history',{'logs':_0x46c7ab,'total':_0xcf843f});}else proxyEmit(_0x302758(0x2a3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x36fb7d){const _0x7b817e=_0x1348f9;if(dbLogs[_0x7b817e(0x133)](_0x7b817e(0x184))[_0x7b817e(0x162)]()){const _0x4bc217=dbLogs[_0x7b817e(0x260)](_0x7b817e(0x184))[_0x7b817e(0x171)](_0x7b817e(0x1d8))[_0x7b817e(0x1da)](_0xa94aa3=>{const _0x49eb47=_0x7b817e;return _0xa94aa3[_0x49eb47(0x24c)]=='order';})[_0x7b817e(0x162)]();dbLogs[_0x7b817e(0x260)](_0x7b817e(0x184))[_0x7b817e(0x1e8)]()[_0x7b817e(0x1be)](),dbLogs[_0x7b817e(0x260)](_0x7b817e(0x184))['assign'](_0x4bc217)[_0x7b817e(0x1be)](),emitHistory(_0x36fb7d);}}async function pauseBot(){const _0xed14d7=_0x1348f9,_0x30c8f2=new Date()[_0xed14d7(0x282)]();if(!lastErrorShown||_0x30c8f2-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x30c8f2;!lastBotPause?(lastBotPause=_0x30c8f2,consecutivePauses=0x1):(_0x30c8f2-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xed14d7(0x1fb)]({'stop':_0xed14d7(0x28f)},_0x50759b=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xed14d7(0x282)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1e1f42=_0x1348f9;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1e1f42(0x286)},_0x4dbeb1=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2564c8,_0x2ab64a){const _0x284d3d=_0x1348f9;if(botPaused)return;const _0x4285c4=config[_0x284d3d(0x15b)]||_0x284d3d(0x25b);if(_0x2ab64a)logger[_0x284d3d(0x19e)](_0x284d3d(0x290)+_0x2ab64a);if(_0x2564c8['toString']()[_0x284d3d(0x1bd)]('API-key\x20format\x20invalid'))logHistory(_0x284d3d(0x21d),_0x4285c4+_0x284d3d(0x11f));else{if(_0x2564c8[_0x284d3d(0x1f8)]()[_0x284d3d(0x1bd)](_0x284d3d(0x2a0)))logHistory(_0x284d3d(0x21d),_0x4285c4+_0x284d3d(0x198));else _0x2564c8[_0x284d3d(0x1f8)]()['includes'](_0x284d3d(0x176))?(logHistory(_0x284d3d(0x21d),_0x4285c4+_0x284d3d(0x202)),logHistory(_0x284d3d(0x21d),_0x284d3d(0x126))):await handleError(_0x2564c8,null);}}async function handleError(_0x5e7767,_0x2c11c7,_0x220710=''){const _0x5531e7=_0x1348f9;if(botPaused)return;const _0x95da32=config[_0x5531e7(0x15b)]||_0x5531e7(0x25b);if(_0x2c11c7)logger['debug'](_0x5531e7(0x290)+_0x2c11c7);if(_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)](_0x5531e7(0x24f))||_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)](_0x5531e7(0x17d)))logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x298)+pauseBotMsg),await pauseBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()['includes'](_0x5531e7(0x196))||_0x5e7767[_0x5531e7(0x1f8)]()['includes'](_0x5531e7(0x158)))logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x1f9)+pauseBotMsg),await pauseBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)](_0x5531e7(0x1c4)))logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x146)+pauseBotMsg),await pauseBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x295)+pauseBotMsg),await pauseBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)](_0x5531e7(0x243)))logHistory('error',_0x5531e7(0x1b4)),logHistory(_0x5531e7(0x21d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)]('InvalidNonce'))logHistory(_0x5531e7(0x21d),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x5531e7(0x21d),_0x5531e7(0x2b8)),await killBot();else{if(_0x5e7767 instanceof ccxt[_0x5531e7(0x25e)])logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x173)+pauseBotMsg),logger[_0x5531e7(0x19e)](_0x5531e7(0x22a),_0x5e7767),await pauseBot();else{if(_0x5e7767['toString']()[_0x5531e7(0x1bd)](_0x5531e7(0x28c)))logHistory('error',_0x95da32+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x5531e7(0x21d),_0x5531e7(0x2b8)),await killBot();else{if(_0x5e7767[_0x5531e7(0x1f8)]()[_0x5531e7(0x1bd)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5531e7(0x21d),_0x95da32+_0x5531e7(0x229)),logHistory(_0x5531e7(0x21d),_0x5531e7(0x2b8)),await killBot();else{if(_0x5e7767['toString']()[_0x5531e7(0x1bd)](_0x5531e7(0x176)))logHistory(_0x5531e7(0x21d),_0x95da32+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x5531e7(0x21d),_0x5531e7(0x2b8)),await killBot();else{if(_0x5e7767['toString']()[_0x5531e7(0x1bd)]('InsufficientFunds'))logHistory(_0x5531e7(0x21d),_0x5531e7(0x283)+_0x220710);else _0x5e7767 instanceof ccxt[_0x5531e7(0x12b)]?(logHistory(_0x5531e7(0x21d),_0x95da32+'\x20exchange\x20error'),logger[_0x5531e7(0x19e)]('Error\x20details:',_0x5e7767)):(logHistory(_0x5531e7(0x21d),_0x5531e7(0x211)+pauseBotMsg),logger[_0x5531e7(0x19e)](_0x5531e7(0x22a),_0x5e7767),await pauseBot());}}}}}}}}}}}function formatResult(_0x4f6e90,_0x383e72){const _0x2dcfbb=_0x1348f9;return parseFloat(_0x4f6e90[_0x2dcfbb(0x276)](_0x383e72));}function formatResultTruncate(_0x1eaf1c,_0x5a942d){const _0x18bc27=_0x1348f9;let _0x463782=formatResultString(_0x1eaf1c,0xa),_0x51687e=_0x463782[_0x18bc27(0x25a)]('.');return _0x51687e!=-0x1&&(_0x463782=_0x463782['slice'](0x0,_0x51687e+_0x5a942d+0x1)),Number(_0x463782);}function formatResultString(_0x1e2f47,_0x25215c){const _0x251029=_0x1348f9;let _0x1e9757;if(!(''+_0x1e2f47)[_0x251029(0x1bd)]('e'))_0x1e9757=+(Math[_0x251029(0x179)](_0x1e2f47+'e+'+_0x25215c)+'e-'+_0x25215c);else{let _0x50b1f0=(''+_0x1e2f47)[_0x251029(0x16e)]('e'),_0x29049f='';+_0x50b1f0[0x1]+_0x25215c>0x0&&(_0x29049f='+'),_0x1e9757=+(Math[_0x251029(0x179)](+_0x50b1f0[0x0]+'e'+_0x29049f+(+_0x50b1f0[0x1]+_0x25215c))+'e-'+_0x25215c);}return Number(_0x1e9757)[_0x251029(0x276)](_0x25215c);}function getServerTime(){const _0x5e5c69=_0x1348f9,_0x23c295=new Date();return _0x23c295[_0x5e5c69(0x224)]()+'/'+(_0x23c295['getMonth']()+0x1)['toString']()[_0x5e5c69(0x1cd)](0x2,'0')+'/'+_0x23c295['getDate']()[_0x5e5c69(0x1f8)]()['padStart'](0x2,'0')+'\x20'+_0x23c295['getHours']()[_0x5e5c69(0x1f8)]()[_0x5e5c69(0x1cd)](0x2,'0')+':'+_0x23c295[_0x5e5c69(0x17b)]()[_0x5e5c69(0x1f8)]()['padStart'](0x2,'0')+':'+_0x23c295['getSeconds']()[_0x5e5c69(0x1f8)]()[_0x5e5c69(0x1cd)](0x2,'0');}function getTimeStamp(){const _0x217af0=_0x1348f9,_0x37070e=shiftedTime();return _0x37070e[_0x217af0(0x224)]()+'/'+(_0x37070e[_0x217af0(0x248)]()+0x1)[_0x217af0(0x1f8)]()['padStart'](0x2,'0')+'/'+_0x37070e['getDate']()[_0x217af0(0x1f8)]()[_0x217af0(0x1cd)](0x2,'0')+'\x20'+_0x37070e[_0x217af0(0x249)]()['toString']()['padStart'](0x2,'0')+':'+_0x37070e['getMinutes']()['toString']()[_0x217af0(0x1cd)](0x2,'0')+':'+_0x37070e[_0x217af0(0x22e)]()[_0x217af0(0x1f8)]()[_0x217af0(0x1cd)](0x2,'0');}function getDate(){const _0x5c36b8=_0x1348f9,_0x38f53f=shiftedTime();return _0x38f53f[_0x5c36b8(0x224)]()+'/'+(_0x38f53f['getMonth']()+0x1)['toString']()[_0x5c36b8(0x1cd)](0x2,'0')+'/'+_0x38f53f[_0x5c36b8(0x12d)]()['toString']()[_0x5c36b8(0x1cd)](0x2,'0');}function getHour(){const _0x43b75e=_0x1348f9,_0x2bd8db=shiftedTime();return _0x2bd8db['getHours']()[_0x43b75e(0x1f8)]()[_0x43b75e(0x1cd)](0x2,'0');}function sleep(_0x4bd071){return new Promise(_0x123c9b=>setTimeout(_0x123c9b,_0x4bd071));}function shiftedTime(){const _0x4b4c3e=_0x1348f9,_0x187769=new Date();let _0x40201d=_0x187769;if(config&&config[_0x4b4c3e(0x251)]!==0x0)_0x40201d=fns[_0x4b4c3e(0x1b6)](_0x187769,{'hours':config[_0x4b4c3e(0x251)]});return _0x40201d;}function timer(_0x139f56){const _0x3d6468=_0x1348f9,_0x38a8bd=new Date();!lasttime?console[_0x3d6468(0x1ab)](getTimeStamp()+_0x3d6468(0x138),_0x139f56,_0x38a8bd):console[_0x3d6468(0x1ab)](getTimeStamp()+_0x3d6468(0x138),_0x139f56,(_0x38a8bd-lasttime)/0x3e8),lasttime=_0x38a8bd;}