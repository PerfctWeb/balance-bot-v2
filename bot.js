const _0x40896d=_0x2ce9;(function(_0x12af6b,_0x2fb7c2){const _0x4a1fef=_0x2ce9,_0x4cd74d=_0x12af6b();while(!![]){try{const _0xa3546c=parseInt(_0x4a1fef(0x2d1))/0x1+parseInt(_0x4a1fef(0x2b0))/0x2*(-parseInt(_0x4a1fef(0x32f))/0x3)+-parseInt(_0x4a1fef(0x217))/0x4+-parseInt(_0x4a1fef(0x2af))/0x5*(parseInt(_0x4a1fef(0x24e))/0x6)+-parseInt(_0x4a1fef(0x301))/0x7+-parseInt(_0x4a1fef(0x247))/0x8+-parseInt(_0x4a1fef(0x32d))/0x9*(-parseInt(_0x4a1fef(0x2bc))/0xa);if(_0xa3546c===_0x2fb7c2)break;else _0x4cd74d['push'](_0x4cd74d['shift']());}catch(_0x5ed6d2){_0x4cd74d['push'](_0x4cd74d['shift']());}}}(_0x5cb9,0x49d04));const _0x154180=function(){let _0x25f044=!![];return function(_0x91f899,_0x147520){const _0x23f537=_0x25f044?function(){const _0x4b2a18=_0x2ce9;if(_0x147520){const _0x35bbaf=_0x147520[_0x4b2a18(0x220)](_0x91f899,arguments);return _0x147520=null,_0x35bbaf;}}:function(){};return _0x25f044=![],_0x23f537;};}(),_0x1c85a5=_0x154180(this,function(){const _0x25d48d=_0x2ce9;return _0x1c85a5[_0x25d48d(0x287)]()['search'](_0x25d48d(0x23e))[_0x25d48d(0x287)]()['constructor'](_0x1c85a5)[_0x25d48d(0x2cb)](_0x25d48d(0x23e));});_0x1c85a5();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x40896d(0x297))[_0x40896d(0x264)],util=require(_0x40896d(0x30e)),argv=require(_0x40896d(0x315))(process['argv'][_0x40896d(0x361)](0x2))[_0x40896d(0x223)],path=require(_0x40896d(0x234));let exchange;global[_0x40896d(0x291)]={},global[_0x40896d(0x2f4)]={};const usdBasecoins=[_0x40896d(0x1f4),_0x40896d(0x26e),'TUSD','USDT',_0x40896d(0x20c),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x40896d(0x204)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x40896d(0x2e6)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x40896d(0x268),pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x40896d(0x329)+pauseBotIntervalLong/0xea60+_0x40896d(0x268),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x40896d(0x2d9))[_0x40896d(0x347)],botID=process[_0x40896d(0x223)][0x2]||_0x40896d(0x29b),pattern=/^[0-9]{3}$/;!pattern[_0x40896d(0x20b)](botID)&&(console[_0x40896d(0x214)](_0x40896d(0x1d8)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x40896d(0x223)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x40896d(0x363),logspath=userID?_0x40896d(0x2c9)+userID+'/':'./logs/',loggerfile=fs[_0x40896d(0x1fb)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x40896d(0x25a)](configpath)&&fs[_0x40896d(0x2a0)](configpath);!fs['existsSync'](logspath)&&fs[_0x40896d(0x2a0)](logspath);const configfile=configpath+_0x40896d(0x230)+botID+_0x40896d(0x30f),logfile=configpath+'bot-'+botID+_0x40896d(0x2c7),performancefile=configpath+_0x40896d(0x230)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x40896d(0x2bd),settingsfile=configpath+_0x40896d(0x1d7),securefile=configpath+_0x40896d(0x2e7),configbackuppath=configpath+_0x40896d(0x2ca),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x40896d(0x2a9)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x40896d(0x2e2)]({'bot':[],'version':serverversion})[_0x40896d(0x2a9)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x40896d(0x2e2)]({'coins':[],'version':serverversion})[_0x40896d(0x2a9)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x40896d(0x1f5)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x283a1b=>{const _0x432188=_0x40896d;console[_0x432188(0x214)](_0x283a1b);},'simple':_0x46f331=>{const _0x174004=_0x40896d;console[_0x174004(0x214)](_0x46f331),loggerfile[_0x174004(0x2a9)](util[_0x174004(0x33c)](_0x46f331)+'\x0a');},'full':async(_0x238800,_0xbbc39e='')=>{const _0x2dc6d3=_0x40896d;let _0x1b69b6;if(config['showname'])_0x1b69b6=getTimeStamp()+':\x20'+config[_0x2dc6d3(0x273)]+_0x2dc6d3(0x2dc)+_0x238800;else _0x1b69b6=getTimeStamp()+_0x2dc6d3(0x2f1)+botID+_0x2dc6d3(0x2dc)+_0x238800;console['log'](_0x1b69b6),loggerfile[_0x2dc6d3(0x2a9)](util['format'](_0x1b69b6)+'\x0a'),_0xbbc39e&&(console['log'](_0xbbc39e),loggerfile[_0x2dc6d3(0x2a9)](util[_0x2dc6d3(0x33c)](_0xbbc39e)+'\x0a'));},'debug':async(_0x59770b,_0x4a6c94='')=>{const _0x38b104=_0x40896d;let _0x478809;if(config[_0x38b104(0x1e5)])_0x478809=getTimeStamp()+':\x20'+config[_0x38b104(0x273)]+'\x20>\x20[DEBUG]\x20'+_0x59770b;else _0x478809=getTimeStamp()+_0x38b104(0x2f1)+botID+'\x20>\x20[DEBUG]\x20'+_0x59770b;if(debugging)console['log'](_0x478809);loggerfile[_0x38b104(0x2a9)](util[_0x38b104(0x33c)](_0x478809)+'\x0a');if(_0x4a6c94){if(debugging)console[_0x38b104(0x214)](_0x4a6c94);loggerfile[_0x38b104(0x2a9)](util[_0x38b104(0x33c)](_0x4a6c94)+'\x0a');}}};process['on'](_0x40896d(0x28b),function(_0x3f789f){const _0x48ab21=_0x40896d;logHistory(_0x48ab21(0x239),_0x48ab21(0x2f5)),logger[_0x48ab21(0x257)]('Uncaught\x20Exception:',_0x3f789f);});settings['timeshift']!=config[_0x40896d(0x30d)]&&updateTimeshift(settings['timeshift']);settings[_0x40896d(0x25e)]!=config[_0x40896d(0x25e)]&&updateOnepagemode(settings[_0x40896d(0x25e)]);process[_0x40896d(0x336)]({'started':'running'},_0x5e8c30=>{}),initializeProcessListeners();function proxyEmit(_0x531103,_0x49f961=null){const _0x4a6e34=_0x40896d;process[_0x4a6e34(0x336)]({'function':_0x531103,'args':_0x49f961},_0x559558=>{});}function initializeProcessListeners(){process['on']('message',_0x2b88aa=>{const _0x52db2f=_0x2ce9;switch(Object['keys'](_0x2b88aa)[0x0]){case _0x52db2f(0x30d):_0x2b88aa[_0x52db2f(0x30d)]!=undefined&&(settings[_0x52db2f(0x30d)]=_0x2b88aa[_0x52db2f(0x30d)],updateTimeshift(settings[_0x52db2f(0x30d)]));break;case'onepagemode':_0x2b88aa['onepagemode']!=undefined&&(settings[_0x52db2f(0x25e)]=_0x2b88aa[_0x52db2f(0x25e)],updateOnepagemode(settings['onepagemode']));break;case _0x52db2f(0x2f6):_0x2b88aa[_0x52db2f(0x2f6)]!=undefined&&(bots=JSON[_0x52db2f(0x31b)](_0x2b88aa[_0x52db2f(0x2f6)]),proxyEmit(_0x52db2f(0x2f6),bots));break;case _0x52db2f(0x2a1):switch(_0x2b88aa[_0x52db2f(0x2a1)]){case _0x52db2f(0x348):initclient();break;case _0x52db2f(0x23f):toggleBotMode();break;case _0x52db2f(0x31f):emitHistory(_0x2b88aa['args']);break;case _0x52db2f(0x321):deleteHistoryAlerts(_0x2b88aa['args']);break;case _0x52db2f(0x345):getPortfolio(_0x2b88aa[_0x52db2f(0x26d)]);break;case _0x52db2f(0x357):storeConfiguration(_0x2b88aa[_0x52db2f(0x26d)]);break;case'storeHeadless':storeHeadless(_0x2b88aa[_0x52db2f(0x26d)]);break;case _0x52db2f(0x2be):storeFiat(_0x2b88aa['args']);break;case _0x52db2f(0x311):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x52db2f(0x2f8):placeOrder(_0x2b88aa['args']);break;case _0x52db2f(0x1fc):cancelLoading();break;case _0x52db2f(0x20a):showConfig();break;case _0x52db2f(0x202):sendMetricsTelegram();break;case _0x52db2f(0x210):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x244f4f=![]){const _0x2b13e9=_0x40896d;logger[_0x2b13e9(0x257)](_0x2b13e9(0x27f)+(_0x244f4f?'exchange\x20reloaded':_0x2b13e9(0x26c))+_0x2b13e9(0x24c)+config[_0x2b13e9(0x218)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x244f4f)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2b13e9(0x21f)]!=''&&config[_0x2b13e9(0x21f)]!=_0x2b13e9(0x286)){loadingProgress=0x0;if(_0x244f4f){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4c42a2){handleErrorNoStop(_0x4c42a2,_0x2b13e9(0x2d3));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xd06706=await getCoins();[currentCoins,currentCoinsAll]=_0xd06706,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2b13e9(0x257)](_0x2b13e9(0x1d5)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2b13e9(0x265)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4cc295=_0x40896d;exchangeStopped=!![];try{await exchange[_0x4cc295(0x310)]();}catch(_0x2c2bcd){await handleError(_0x2c2bcd,_0x4cc295(0x28f));}}async function reloadExchange(){const _0x4d637e=_0x40896d;while(lockOrders!=ORDERS[_0x4d637e(0x2e6)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x4d637e(0x257)](_0x4d637e(0x35a)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1dbb66=config['exchange'],_0x25f2e7=config['apiKey'],_0x5b011d=config[_0x40896d(0x23c)],_0x154b39=config[_0x40896d(0x353)]){const _0x183359=_0x40896d;exchange&&await stopExchange();!supportedExchanges()[_0x183359(0x368)](_0x1dbb66)&&(logHistory(_0x183359(0x239),_0x183359(0x207)+_0x1dbb66+'\x20exchange'),killBot());const _0x27b7db=ccxt[_0x183359(0x26b)][_0x1dbb66['toLowerCase']()];exchange=new _0x27b7db({'apiKey':_0x25f2e7,'secret':_0x5b011d,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x183359(0x28e)}});if(_0x154b39)exchange[_0x183359(0x29c)]=_0x154b39;}function setStableCoins(){const _0x686131=_0x40896d;let _0x45baf2=config['basecoin']==_0x686131(0x20e)?'ETH':config['basecoin']==_0x686131(0x2e4)?'PAXG':_0x686131(0x235),_0x472d23=!allSymbols[_0x686131(0x368)](_0x45baf2+_0x686131(0x308))?_0x686131(0x1ef):_0x686131(0x1f4),_0x27bc3c=!allSymbols['includes'](_0x45baf2+_0x686131(0x1db))?_0x472d23:_0x686131(0x1ff);stablecoins={'eur':{'coin':''+_0x45baf2+_0x27bc3c,'symbol':_0x45baf2+'/'+_0x27bc3c},'usd':{'coin':''+_0x45baf2+_0x472d23,'symbol':_0x45baf2+'/'+_0x472d23}};}async function initwsCcxt(){const _0x38f41a=_0x40896d;initCycle++;const _0x24c60f=initCycle;let _0xbecac4=[];config[_0x38f41a(0x24f)][_0x38f41a(0x272)](_0x25bf06=>{const _0x47d4d5=_0x38f41a;if(!_0x25bf06[_0x47d4d5(0x307)]&&_0x25bf06['coin']!=config['basecoin'])_0xbecac4[_0x47d4d5(0x238)](_0x25bf06['symbol']);});if(!_0xbecac4[_0x38f41a(0x368)](stablecoins[_0x38f41a(0x271)]['symbol']))_0xbecac4[_0x38f41a(0x238)](stablecoins['eur'][_0x38f41a(0x211)]);if(!_0xbecac4['includes'](stablecoins[_0x38f41a(0x203)][_0x38f41a(0x211)]))_0xbecac4[_0x38f41a(0x238)](stablecoins[_0x38f41a(0x203)][_0x38f41a(0x211)]);if(config['exchange'][_0x38f41a(0x2ef)](_0x38f41a(0x366))&&config['basecoin']!=_0x38f41a(0x2e4)){if(!_0xbecac4[_0x38f41a(0x368)]('BNB/'+config[_0x38f41a(0x205)]))_0xbecac4[_0x38f41a(0x238)](_0x38f41a(0x335)+config[_0x38f41a(0x205)]);}loadCoins(_0xbecac4),_0xbecac4=validateSymbols(_0xbecac4);const _0x464add=async _0x19c139=>{const _0x3e43d0=_0x38f41a;let _0xb4199;try{const _0x3cc62f=await getTickers(_0x19c139);Object[_0x3e43d0(0x1eb)](_0x3cc62f)[_0x3e43d0(0x272)](_0x31cfee=>{const _0x13b950=_0x3e43d0;_0xb4199=_0x31cfee[0x1][_0x13b950(0x211)],global[_0x13b950(0x291)][noslash(_0xb4199)]=_0x31cfee[0x1]['last'],global[_0x13b950(0x2f4)][_0xb4199]=_0x31cfee[0x1][_0x13b950(0x1e4)];});}catch(_0x1e3142){await handleError(_0x1e3142,_0x3e43d0(0x34b),_0xb4199);}},_0x274098=async _0x5003a1=>{const _0x58935=_0x38f41a;while(initCycle==_0x24c60f){if(!botPaused)try{const _0x631e1f=await exchange[_0x58935(0x1e2)](_0x5003a1);global[_0x58935(0x291)][noslash(_0x631e1f[0x0][_0x58935(0x211)])]=_0x631e1f[0x0][_0x58935(0x319)],await sleep(0x3e8);}catch(_0x536abe){if(!exchangeStopped)await handleError(_0x536abe,_0x58935(0x25d),_0x5003a1);}else await sleep(0x64);}},_0x4fe631=async _0x5dfb21=>{const _0x137e2a=_0x38f41a;while(initCycle==_0x24c60f){if(!botPaused){let _0x46d3dc;try{await sleep(0x3c*0x3e8);const _0x57575e=await getTickers(_0x5dfb21);Object[_0x137e2a(0x1eb)](_0x57575e)[_0x137e2a(0x272)](_0x4686c1=>{const _0x22f340=_0x137e2a;_0x46d3dc=_0x4686c1[0x1]['symbol'],global[_0x22f340(0x2f4)][_0x46d3dc]=_0x4686c1[0x1]['percentage'];});}catch(_0x7c14b8){if(!exchangeStopped)await handleError(_0x7c14b8,_0x137e2a(0x22e),_0x46d3dc);}}else await sleep(0x64);}},_0x55078c=async _0x315aa2=>{const _0x110884=_0x38f41a;while(initCycle==_0x24c60f){if(!botPaused)try{const _0x528b89=await exchange[_0x110884(0x330)](_0x315aa2);initCycle==_0x24c60f&&_0x528b89[_0x110884(0x272)](_0x58854e=>{updateNumberCoinsCcxt(_0x58854e);});}catch(_0x551675){if(!exchangeStopped)await handleError(_0x551675,'watchOrders()');}else await sleep(0x64);}};_0x464add(_0xbecac4),_0x4fe631(_0xbecac4),_0xbecac4['forEach'](_0x40cead=>{_0x274098(_0x40cead),_0x55078c(_0x40cead);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x407023){const _0x19d71e=_0x40896d;let _0x427f51={};try{if(config[_0x19d71e(0x218)]!=_0x19d71e(0x253))_0x427f51=await exchange['fetchTickers'](_0x407023);else for(const _0x122a97 of _0x407023){const _0x42752e=await exchange[_0x19d71e(0x1ec)](_0x122a97);_0x427f51[_0x122a97]=_0x42752e;}return _0x427f51;}catch(_0x26f8bc){throw _0x26f8bc;}}async function watchTransactions(){const _0x15beb6=_0x40896d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3fd398=await getCoins(),[_0x17cb36,_0x7ee99f]=_0x3fd398;let _0x1bb506=[];currentCoins[_0x15beb6(0x272)](_0x2b62fb=>{const _0x10d6b2=_0x15beb6,_0x395ef7=_0x17cb36['find'](_0x179e54=>_0x179e54['coin']==_0x2b62fb['coin']);if(_0x395ef7){if(_0x2b62fb['number']!=_0x395ef7['number']){let _0x53b56a;if(_0x2b62fb['coin']!=config[_0x10d6b2(0x205)]){const _0x564e76=global[_0x10d6b2(0x291)][noslash(_0x2b62fb[_0x10d6b2(0x211)])];_0x53b56a=_0x2b62fb[_0x10d6b2(0x1e6)]?0x1/_0x564e76:_0x564e76;}else _0x53b56a=0x1;_0x1bb506[_0x10d6b2(0x238)]({'coin':_0x2b62fb['coin'],'symbol':_0x2b62fb[_0x10d6b2(0x211)],'price':_0x53b56a,'number':Number(formatResult(_0x395ef7['number']-_0x2b62fb[_0x10d6b2(0x27a)],0x8)),'basecoinvalue':_0x53b56a*(_0x395ef7[_0x10d6b2(0x27a)]-_0x2b62fb[_0x10d6b2(0x27a)])});}}});if(_0x1bb506[_0x15beb6(0x265)]==0x1&&!blockTransactionDetection){if(config[_0x15beb6(0x1f6)]){logger[_0x15beb6(0x257)](_0x15beb6(0x206)+_0x1bb506[0x0][_0x15beb6(0x30a)]+_0x15beb6(0x327)+lastFees[_0x15beb6(0x2c6)]);if(lastFees['highest']==0x0||Math[_0x15beb6(0x2b9)](_0x1bb506[0x0]['basecoinvalue'])>lastFees[_0x15beb6(0x2c6)]){delete _0x1bb506[0x0]['symbol'],delete _0x1bb506[0x0][_0x15beb6(0x30a)];let _0x3bfff6=[],_0x569fd4=[...config['liquidity']]||[],_0x433170=config[_0x15beb6(0x261)];_0x569fd4[_0x15beb6(0x21b)]((_0x1b3623,_0xdbc7ea)=>_0x1b3623[_0x15beb6(0x242)]>_0xdbc7ea[_0x15beb6(0x242)]?-0x1:_0xdbc7ea[_0x15beb6(0x242)]>_0x1b3623['date']?0x1:0x0);const _0x7cace7=getDate();if(_0x569fd4[0x0]){const _0x3e0864=fns['parse'](_0x569fd4[0x0][_0x15beb6(0x242)],'yyyy/MM/dd',new Date()),_0x16c4a7=fns['parse'](_0x7cace7,_0x15beb6(0x300),new Date());if(fns[_0x15beb6(0x304)](_0x3e0864,_0x16c4a7)){_0x3bfff6=_0x569fd4[0x0][_0x15beb6(0x2ab)];const _0x19308c=_0x3bfff6[_0x15beb6(0x277)](_0x218b1c=>_0x218b1c[_0x15beb6(0x303)]==_0x1bb506[0x0][_0x15beb6(0x303)]);_0x19308c?(_0x19308c[_0x15beb6(0x27a)]+=_0x1bb506[0x0][_0x15beb6(0x27a)],_0x19308c[_0x15beb6(0x27a)]==0x0&&(_0x3bfff6=_0x3bfff6[_0x15beb6(0x1e8)](_0x7202f=>{const _0xfbf407=_0x15beb6;return _0x7202f[_0xfbf407(0x303)]!=_0x1bb506[0x0][_0xfbf407(0x303)];}))):_0x3bfff6['push'](_0x1bb506[0x0]);const _0x1262dd=_0x433170[_0x15beb6(0x277)](_0x108a06=>_0x108a06[_0x15beb6(0x242)]==_0x7cace7);_0x1262dd['changes']=_0x3bfff6;}else _0x433170[_0x15beb6(0x238)]({'date':_0x7cace7,'changes':[_0x1bb506[0x0]]});}const _0x33904a=_0x433170[_0x15beb6(0x277)](_0x3d30f5=>_0x3d30f5['date']==_0x7cace7);if(_0x33904a){let _0x4ec0dc=!![];_0x33904a['changes']['forEach'](_0x335172=>{const _0x5e3ede=_0x15beb6;if(_0x335172[_0x5e3ede(0x27a)]!=0x0)_0x4ec0dc=![];}),_0x4ec0dc&&(_0x433170=_0x433170[_0x15beb6(0x1e8)](_0x1b7b7b=>{const _0x50e588=_0x15beb6;return _0x1b7b7b[_0x50e588(0x242)]!=_0x7cace7;}));}let _0x57037a=dbConfig[_0x15beb6(0x337)](_0x15beb6(0x2e0))[_0x15beb6(0x277)]({'botID':botID})[_0x15beb6(0x32a)]();_0x57037a&&(dbConfig['get'](_0x15beb6(0x2e0))[_0x15beb6(0x277)]({'botID':botID})[_0x15beb6(0x240)]({'liquidity':_0x433170})[_0x15beb6(0x2a9)](),config[_0x15beb6(0x261)]=_0x433170),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x15beb6(0x2b9)](_0x1bb506[0x0]['number'])+'\x20'+_0x1bb506[0x0][_0x15beb6(0x303)]+'\x20'+(_0x1bb506[0x0][_0x15beb6(0x27a)]>0x0?_0x15beb6(0x1d6):_0x15beb6(0x342))+_0x15beb6(0x2c3)),proxyEmit(_0x15beb6(0x349),emittedConfiguration());}else logger['debug'](_0x15beb6(0x229)+Math[_0x15beb6(0x2b9)](_0x1bb506[0x0][_0x15beb6(0x27a)])+'\x20'+_0x1bb506[0x0][_0x15beb6(0x303)]+'\x20'+(_0x1bb506[0x0][_0x15beb6(0x27a)]>0x0?_0x15beb6(0x1d6):_0x15beb6(0x342)));transactionDetected=!![];}else logger[_0x15beb6(0x257)]('Portfolio\x20change\x20detected:\x20'+Math[_0x15beb6(0x2b9)](_0x1bb506[0x0]['number'])+'\x20'+_0x1bb506[0x0]['coin']+'\x20'+(_0x1bb506[0x0][_0x15beb6(0x27a)]>0x0?_0x15beb6(0x1d6):'removed')+_0x15beb6(0x370));}currentCoins=_0x17cb36,currentCoinsAll=_0x7ee99f,await sleep(watchTransactionsInterval);}catch(_0x4b6958){if(!exchangeStopped)await handleError(_0x4b6958,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x7e7438=_0x40896d;try{markets=await exchange[_0x7e7438(0x372)](),allSymbols=[],Object[_0x7e7438(0x1eb)](markets)[_0x7e7438(0x272)](_0x4a3a61=>{const _0x124b71=_0x7e7438;_0x4a3a61[0x1]['active']&&_0x4a3a61[0x1][_0x124b71(0x28e)]&&allSymbols[_0x124b71(0x238)](_0x4a3a61[0x0]);});}catch(_0x3ae0b9){throw _0x3ae0b9;}}function validateSymbols(_0x2c2cce){const _0x1e62c4=_0x40896d;let _0x49b42d=[];return _0x2c2cce[_0x1e62c4(0x272)](_0x109568=>{const _0x814f6a=_0x1e62c4;!allSymbols[_0x814f6a(0x368)](_0x109568)?logHistory(_0x814f6a(0x239),_0x814f6a(0x365)+_0x109568+_0x814f6a(0x2ac)):_0x49b42d[_0x814f6a(0x238)](_0x109568);}),_0x49b42d;}async function initclient(){const _0x1dec3f=_0x40896d;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x1dec3f(0x2d7),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1dec3f(0x2ad),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4a71df=getNormalizedPerformance();emitPerformance(_0x4a71df),getStartingBalances(_0x4a71df);}async function toggleBotMode(){const _0xb6b736=_0x40896d;let _0x269b7d=dbConfig[_0xb6b736(0x337)](_0xb6b736(0x2e0))[_0xb6b736(0x277)]({'botID':botID})['value']();if(_0x269b7d){const _0x85e8ce=!_0x269b7d['headless'];dbConfig[_0xb6b736(0x337)](_0xb6b736(0x2e0))[_0xb6b736(0x277)]({'botID':botID})[_0xb6b736(0x240)]({'headless':_0x85e8ce})[_0xb6b736(0x2a9)](),config['headless']=_0x85e8ce,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2f4bea=_0x40896d;process[_0x2f4bea(0x336)]({'updatebotmanager':!![]},_0x39d7c9=>{}),logger[_0x2f4bea(0x257)](_0x2f4bea(0x237)+config[_0x2f4bea(0x282)]);}async function loadCoins(_0x4ffc47){const _0x443cc1=_0x40896d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4d18d5,_0x841f0c=0x0,_0x48c0fa=0x0;_0x4ffc47[_0x443cc1(0x272)](_0x2a9baf=>{const _0x14f30c=_0x443cc1;loading[_0x14f30c(0x2dd)][_0x14f30c(0x238)](_0x2a9baf);}),loadingCanceled=![];let _0x2cc56e=![];while(_0x4d18d5!=_0x4ffc47[_0x443cc1(0x265)]+maxLoadingProgress){_0x4d18d5=loadingProgress,_0x4ffc47[_0x443cc1(0x272)](_0x2e4223=>{const _0x13ed6d=_0x443cc1;if(global['ticker'][noslash(_0x2e4223)]){loading['remainingSymbols']=loading[_0x13ed6d(0x2dd)][_0x13ed6d(0x1e8)](_0xb3d015=>_0xb3d015!=_0x2e4223);if(!watchedSymbols[_0x13ed6d(0x368)](_0x2e4223))watchedSymbols[_0x13ed6d(0x238)](_0x2e4223);_0x4d18d5++;}}),loading[_0x443cc1(0x34e)]=Math[_0x443cc1(0x36a)](_0x4d18d5/(_0x4ffc47[_0x443cc1(0x265)]+maxLoadingProgress)*0x64);loading[_0x443cc1(0x34e)]!=0x64&&(_0x48c0fa>0x1e*0x5&&(loading[_0x443cc1(0x236)]=!![],emitLoadingProgress()),_0x48c0fa>0x78*0x5&&!_0x2cc56e&&(_0x2cc56e=!![],logHistory(_0x443cc1(0x239),_0x443cc1(0x246)+loading['remainingSymbols'][_0x443cc1(0x212)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x443cc1(0x239),_0x443cc1(0x30b)+loadCoinsRetryInterval/0xea60+_0x443cc1(0x29a)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x13c9c0=_0x443cc1;process['send']({'stop':_0x13c9c0(0x2b7)},_0x3e4556=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x443cc1(0x32b)]=!![],emitLoadingProgress();break;}else _0x841f0c!=loading[_0x443cc1(0x34e)]&&(_0x841f0c=loading[_0x443cc1(0x34e)],emitLoadingProgress()),_0x48c0fa++,await sleep(0xc8);}_0x4d18d5==_0x4ffc47[_0x443cc1(0x265)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x443cc1(0x336)]({'status':_0x443cc1(0x1e0),'live':_0x443cc1(0x24a)},_0x51eaa0=>{}),_0x2cc56e&&logHistory(_0x443cc1(0x2c4),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x949ae2=_0x40896d;proxyEmit(_0x949ae2(0x349),{...emittedConfiguration(),'configstate':_0x949ae2(0x244)});}function emitLoadingProgress(){const _0x2d875a=_0x40896d;proxyEmit(_0x2d875a(0x27e),loading);}async function getFiat(){const _0x4b6624=_0x40896d;let _0x39001c=global[_0x4b6624(0x291)][stablecoins[_0x4b6624(0x271)]['coin']],_0x3b357f=global['ticker'][stablecoins[_0x4b6624(0x203)][_0x4b6624(0x303)]];return{'eur':Number(_0x39001c),'usd':Number(_0x3b357f)};}function capitalize(_0x3037a8){const _0x510d70=_0x40896d;return _0x3037a8[_0x510d70(0x2b2)](0x0,0x1)[_0x510d70(0x2b3)]()+_0x3037a8['substring'](0x1);}function supportedExchanges(){const _0x214167=_0x40896d,_0x493219=['ws','fetchTickers',_0x214167(0x1ec),'watchTrades',_0x214167(0x330),_0x214167(0x34f),_0x214167(0x306),_0x214167(0x294),'fetchClosedOrders',_0x214167(0x1e9)];let _0x5cb74a=[],_0x2746ab=[],_0x4138da=ccxt[_0x214167(0x26b)][_0x214167(0x2d7)];_0x4138da[_0x214167(0x272)](_0x40898c=>{const _0x4b324b=_0x214167;try{const _0x548f5f=new ccxt[(_0x4b324b(0x26b))][_0x40898c]();_0x2746ab[_0x4b324b(0x238)](_0x548f5f);}catch(_0x525402){}}),_0x2746ab[_0x214167(0x272)](_0x11e8d5=>{const _0x2e9e23=_0x214167;let _0x38b4a7=0x0;_0x493219[_0x2e9e23(0x272)](_0x347555=>{const _0x363886=_0x2e9e23;_0x347555 in _0x11e8d5['has']&&_0x11e8d5[_0x363886(0x2bf)][_0x347555]&&_0x38b4a7++;}),_0x38b4a7==_0x493219[_0x2e9e23(0x265)]&&_0x5cb74a[_0x2e9e23(0x238)](capitalize(_0x11e8d5['id']));});let _0x19be3b=[];return _0x4138da[_0x214167(0x272)](_0x246977=>{const _0xacee39=_0x214167;_0x246977=capitalize(_0x246977);if(!_0x5cb74a[_0xacee39(0x368)](_0x246977))_0x19be3b['push'](_0x246977);}),_0x5cb74a;}function setStartDatePerformance(){const _0x262033=_0x40896d;if(config&&config['liquidity'][0x0][_0x262033(0x2ab)][_0x262033(0x265)]!=0x0){const _0x33aa6a=config['liquidity'][0x0][_0x262033(0x2ab)];dbPerformance[_0x262033(0x337)](_0x262033(0x2fa))[_0x262033(0x277)]({'date':config[_0x262033(0x352)]})[_0x262033(0x240)]({'coins':_0x33aa6a})['write']();}}async function recreateCoinResults(){const _0x3c40a9=_0x40896d;let _0x55ebdd,_0x3780de=[];try{const _0x272378=fns[_0x3c40a9(0x33c)](fns[_0x3c40a9(0x373)](config[_0x3c40a9(0x352)][_0x3c40a9(0x2df)](/\//g,'-')),_0x3c40a9(0x302));for(const _0x4e2b0d of currentCoins){if(_0x4e2b0d[_0x3c40a9(0x303)]!=config[_0x3c40a9(0x205)]){let _0x1ccf3c=0x0,_0x2d3c84,_0xb3216a;_0x55ebdd=await getAllEventOrders(_0x4e2b0d['symbol']);if(_0x55ebdd['length']>0x0)_0x55ebdd['forEach'](_0x3698d6=>{const _0x5eaf10=_0x3c40a9,_0x4129d1=_0x4e2b0d[_0x5eaf10(0x211)][_0x5eaf10(0x368)](config['basecoin']+'/');_0x3780de[_0x5eaf10(0x238)]({'datetime':_0x3698d6[_0x5eaf10(0x215)],'coin':_0x4e2b0d[_0x5eaf10(0x303)],'symbol':_0x4e2b0d['symbol'],'side':_0x3698d6[_0x5eaf10(0x228)],'reverse':_0x4129d1,'amount':formatResult(_0x3698d6[_0x5eaf10(0x1f0)],0x8),'filled':formatResult(_0x3698d6['filled'],0x8),'price':formatResult(_0x3698d6[_0x5eaf10(0x319)],0x8)}),_0x1ccf3c=_0x3698d6[_0x5eaf10(0x228)]==_0x5eaf10(0x2a3)?_0x1ccf3c+_0x3698d6[_0x5eaf10(0x1f0)]:_0x1ccf3c-_0x3698d6['filled'];if(!_0xb3216a)_0xb3216a=_0x3698d6[_0x5eaf10(0x319)];});_0x2d3c84=_0x4e2b0d[_0x3c40a9(0x27a)]-_0x1ccf3c;let _0x24ff15;config[_0x3c40a9(0x261)]['forEach'](_0x1d9418=>{const _0x5956e1=_0x3c40a9;!_0x24ff15&&(_0x24ff15=_0x1d9418[_0x5956e1(0x2ab)][_0x5956e1(0x277)](_0x3c6158=>_0x3c6158['coin']==_0x4e2b0d[_0x5956e1(0x303)]),_0x24ff15&&(_0x2d3c84=_0x24ff15[_0x5956e1(0x27a)],_0xb3216a=_0x24ff15['price']));});let _0x377f69=dbCoinResults[_0x3c40a9(0x337)](_0x3c40a9(0x339))[_0x3c40a9(0x277)]({'coin':_0x4e2b0d[_0x3c40a9(0x303)]})[_0x3c40a9(0x32a)]();_0x377f69={'coin':_0x4e2b0d[_0x3c40a9(0x303)],'number':_0x2d3c84,'breakeven':_0xb3216a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x3c40a9(0x339))[_0x3c40a9(0x277)]({'coin':_0x4e2b0d[_0x3c40a9(0x303)]})[_0x3c40a9(0x240)](_0x377f69)['write']();}}_0x3780de[_0x3c40a9(0x21b)]((_0x202447,_0x4ca54d)=>_0x202447[_0x3c40a9(0x215)]>_0x4ca54d[_0x3c40a9(0x215)]?0x1:_0x4ca54d[_0x3c40a9(0x215)]>_0x202447['datetime']?-0x1:0x0);let _0x516aab=0x0;for(let _0xc5c116 of _0x3780de){await updateCoinResults(_0xc5c116,!![]);}}catch(_0xabc822){await handleError(_0xabc822,'recreateCoinResults()');}}async function getAllEventOrders(_0x20af73){const _0x577939=_0x40896d;let _0x191f11=[],_0x52868c=dbLogs['get'](_0x577939(0x225))[_0x577939(0x1e8)](_0x2cfe52=>{const _0x1d035c=_0x577939,_0x3a1c43=_0x2cfe52[_0x1d035c(0x1dc)][_0x1d035c(0x1e3)]();return _0x3a1c43[_0x1d035c(0x368)](_0x20af73[_0x1d035c(0x1e3)]())&&(_0x3a1c43[_0x1d035c(0x368)](_0x1d035c(0x2db))&&_0x3a1c43[_0x1d035c(0x368)](_0x1d035c(0x254))||_0x3a1c43[_0x1d035c(0x368)]('filled')&&_0x3a1c43['includes']('order'));})[_0x577939(0x28a)](_0x577939(0x362))[_0x577939(0x32a)]();return _0x52868c['forEach'](_0x15e5cf=>{const _0x313e40=_0x577939,_0x437d38=_0x15e5cf[_0x313e40(0x1dc)][_0x313e40(0x368)]('sell')?_0x313e40(0x2ec):_0x313e40(0x2a3),_0xf7be79=/#([0-9]|\.)+\s/i,_0x4520a5=Number(_0xf7be79[_0x313e40(0x2fc)](_0x15e5cf['event'])[0x0][_0x313e40(0x361)](0x1)),_0x3d18a9=/@([0-9]|\.)+$/i,_0x638ff4=Number(_0x3d18a9['exec'](_0x15e5cf[_0x313e40(0x1dc)])[0x0]['slice'](0x1));_0x191f11[_0x313e40(0x238)]({'datetime':_0x15e5cf[_0x313e40(0x362)],'coin':symbolToCoin(_0x20af73),'symbol':_0x20af73,'side':_0x437d38,'amount':_0x4520a5,'filled':_0x4520a5,'price':_0x638ff4});}),_0x191f11;}async function getAllOrders(_0x352729,_0x80e274){const _0x405e07=_0x40896d;let _0x2c5c8c=[];while(_0x80e274<exchange[_0x405e07(0x2d4)]()){const _0x489171=0x1f4;try{const _0x529d78=await exchange[_0x405e07(0x1e7)](_0x352729,_0x80e274,_0x489171);if(_0x529d78[_0x405e07(0x265)])_0x80e274=_0x529d78[_0x529d78['length']-0x1][_0x405e07(0x279)]+0x1,_0x2c5c8c=_0x2c5c8c['concat'](_0x529d78);else break;}catch(_0x4631cc){await handleError(_0x4631cc,_0x405e07(0x2cf),_0x352729);}}return _0x2c5c8c;}async function validate24hChanges(){const _0x4b0567=_0x40896d;for(const _0xf8c4d0 of currentCoins){if(_0xf8c4d0[_0x4b0567(0x303)]!=config[_0x4b0567(0x205)]){let _0x46abe3;_0xf8c4d0['reverse']?_0x46abe3=formatResult((0x1/(global[_0x4b0567(0x2f4)][noslash(_0xf8c4d0[_0x4b0567(0x211)])]/0x64+0x1)-0x1)*0x64,0x3):_0x46abe3=global[_0x4b0567(0x2f4)][noslash(_0xf8c4d0['symbol'])],_0x46abe3<config[_0x4b0567(0x2e1)]&&(logHistory(_0x4b0567(0x239),_0xf8c4d0['coin']+_0x4b0567(0x243)+_0x46abe3+'%'),logHistory(_0x4b0567(0x239),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x4b0567(0x239),_0x4b0567(0x318)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1c3b17,_0xc51d69){const _0x17a6bc=_0x40896d;if(!_0x1c3b17)return!![];const _0x5c364b=_0xc51d69['split']('.'),_0x14900f=_0x1c3b17[_0x17a6bc(0x309)]('.');for(var _0x44dffe=0x0;_0x44dffe<_0x14900f['length'];_0x44dffe++){const _0x575a7c=~~_0x14900f[_0x44dffe],_0xb2311e=~~_0x5c364b[_0x44dffe];if(_0x575a7c<_0xb2311e)return!![];if(_0x575a7c>_0xb2311e)return![];}return![];}async function oneTimeMigration(){const _0x3fe774=_0x40896d;let _0x5ad0a6=dbLogs[_0x3fe774(0x337)](_0x3fe774(0x347))['value']();if(isOlderVersion(_0x5ad0a6,_0x3fe774(0x32c))){let _0x5cbb81=[];const _0x1c899e=dbLogs[_0x3fe774(0x337)](_0x3fe774(0x225))[_0x3fe774(0x32a)]();_0x1c899e[_0x3fe774(0x272)](_0x5a29f3=>{const _0x19478b=_0x3fe774;_0x5cbb81[_0x19478b(0x238)]({'time':_0x5a29f3['time'],'type':_0x5a29f3[_0x19478b(0x32e)],'event':_0x5a29f3[_0x19478b(0x1dc)]});}),dbLogs[_0x3fe774(0x337)](_0x3fe774(0x225))[_0x3fe774(0x240)](_0x5cbb81)['write']();}let _0x4358a5=dbConfig[_0x3fe774(0x337)](_0x3fe774(0x347))[_0x3fe774(0x32a)]();if(isOlderVersion(_0x4358a5,_0x3fe774(0x32c))){let _0x4040c2=dbConfig[_0x3fe774(0x337)](_0x3fe774(0x2e0))[_0x3fe774(0x277)]({'botID':botID})[_0x3fe774(0x32a)]();if(_0x4040c2){let _0x410e45=[];_0x4040c2[_0x3fe774(0x24f)][_0x3fe774(0x272)](_0x3e6d3f=>{const _0x210f4b=_0x3fe774;_0x410e45[_0x210f4b(0x238)]({'coin':_0x3e6d3f[_0x210f4b(0x303)],'number':_0x3e6d3f['startnumber'],'price':_0x3e6d3f['startprice']}),delete _0x3e6d3f[_0x210f4b(0x245)],delete _0x3e6d3f[_0x210f4b(0x1de)];});if(_0x410e45[_0x3fe774(0x265)]!==0x0)fs[_0x3fe774(0x22c)](configbackuppath+('starting-balance-'+botID+_0x3fe774(0x232)),JSON[_0x3fe774(0x343)](_0x410e45,null,0x4),function(_0x3408b5){if(_0x3408b5){}});const _0x28368a=(_0xa09f91,_0x13a1ea)=>{const _0x7a2b94=_0x3fe774;let _0x362e95=[];_0x13a1ea[_0x7a2b94(0x272)](_0x416675=>{const _0x48b42b=_0x7a2b94,_0x28139c=_0xa09f91[_0x48b42b(0x277)](_0x7fb4eb=>_0x7fb4eb[_0x48b42b(0x303)]==_0x416675[_0x48b42b(0x303)]);if(!_0x28139c)_0x362e95[_0x48b42b(0x238)](_0x416675);});let _0x18047e=[];return _0xa09f91[_0x7a2b94(0x272)](_0x23294a=>{const _0x28bfc4=_0x7a2b94,_0xc57e18=_0x13a1ea['find'](_0x110201=>_0x110201['coin']==_0x23294a[_0x28bfc4(0x303)]);if(!_0xc57e18||_0xc57e18['number']==0x0&&_0x23294a[_0x28bfc4(0x27a)]!=0x0)_0x18047e[_0x28bfc4(0x238)](_0x23294a);}),{'missingDay1':_0x362e95,'notInDay2':_0x18047e};},_0x3eb740=dbPerformance[_0x3fe774(0x337)](_0x3fe774(0x2fa))['cloneDeep']()[_0x3fe774(0x32a)]();if(_0x3eb740['length']>0x1){const {missingDay1:_0x14250d,notInDay2:_0x20b019}=_0x28368a(_0x410e45,_0x3eb740[0x1][_0x3fe774(0x339)]);_0x410e45=[..._0x410e45,..._0x14250d],_0x20b019[_0x3fe774(0x272)](_0x159aee=>{const _0x5c7b7b=_0x3fe774;let _0x197e91=_0x410e45[_0x5c7b7b(0x293)](_0x222712=>_0x222712[_0x5c7b7b(0x303)]==_0x159aee[_0x5c7b7b(0x303)]);_0x197e91!=-0x1&&_0x410e45[_0x5c7b7b(0x312)](_0x197e91,0x1);});}_0x410e45[_0x3fe774(0x21b)]((_0x54f40c,_0x2a9507)=>_0x54f40c['coin']>_0x2a9507['coin']?0x1:_0x2a9507[_0x3fe774(0x303)]>_0x54f40c[_0x3fe774(0x303)]?-0x1:0x0);let _0x325569=[{'date':_0x4040c2['startdate'],'changes':_0x410e45}];_0x3eb740[_0x3fe774(0x265)]>0x2&&_0x3eb740['forEach']((_0x3bac29,_0x3c7a56)=>{const _0x5dbb6c=_0x3fe774;if(_0x3c7a56>0x0&&_0x3c7a56<_0x3eb740['length']-0x1){const {missingDay1:_0x44deb4,notInDay2:_0x25c53f}=_0x28368a(_0x3eb740[_0x3c7a56][_0x5dbb6c(0x339)],_0x3eb740[_0x3c7a56+0x1][_0x5dbb6c(0x339)]);_0x410e45=[],(_0x44deb4[_0x5dbb6c(0x265)]!=0x0||_0x25c53f[_0x5dbb6c(0x265)]!=0x0)&&(_0x44deb4['length']!=0x0&&_0x410e45[_0x5dbb6c(0x238)](..._0x44deb4),_0x25c53f[_0x5dbb6c(0x265)]!=0x0&&(_0x25c53f[_0x5dbb6c(0x272)](_0x12d7ba=>{const _0x424d5e=_0x5dbb6c;_0x12d7ba[_0x424d5e(0x27a)]=-_0x12d7ba[_0x424d5e(0x27a)];}),_0x410e45[_0x5dbb6c(0x238)](..._0x25c53f)),_0x410e45['sort']((_0x3f1aa7,_0x25d721)=>_0x3f1aa7['coin']>_0x25d721[_0x5dbb6c(0x303)]?0x1:_0x25d721[_0x5dbb6c(0x303)]>_0x3f1aa7[_0x5dbb6c(0x303)]?-0x1:0x0),_0x325569['push']({'date':_0x3eb740[_0x3c7a56+0x1][_0x5dbb6c(0x242)],'changes':_0x410e45}));}}),dbConfig[_0x3fe774(0x337)](_0x3fe774(0x2e0))[_0x3fe774(0x277)]({'botID':botID})[_0x3fe774(0x240)]({..._0x4040c2,'liquidity':_0x325569})[_0x3fe774(0x2a9)]();}}if(isOlderVersion(_0x4358a5,'2.6.0')){let _0x43a7b9=dbConfig[_0x3fe774(0x337)](_0x3fe774(0x2e0))[_0x3fe774(0x277)]({'botID':botID})['value']();if(_0x43a7b9){const _0x578a76=_0x43a7b9[_0x3fe774(0x218)],_0x34b646=_0x578a76?capitalize(_0x578a76):_0x3fe774(0x366);dbConfig['get']('bot')[_0x3fe774(0x277)]({'botID':botID})['assign']({'exchange':_0x34b646})['write']();}}let _0x302d91=dbPerformance['get'](_0x3fe774(0x347))[_0x3fe774(0x32a)]();isOlderVersion(_0x302d91,'2.3.5')&&setStartDatePerformance();let _0x56d110=dbCoinResults[_0x3fe774(0x337)](_0x3fe774(0x347))[_0x3fe774(0x32a)]();if(isOlderVersion(_0x56d110,_0x3fe774(0x22f))){let _0x325863=dbCoinResults[_0x3fe774(0x337)](_0x3fe774(0x339))[_0x3fe774(0x32a)]();if(_0x325863[_0x3fe774(0x265)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x584b9c=_0x40896d;dbConfig[_0x584b9c(0x28d)]('version',serverversion)[_0x584b9c(0x2a9)](),dbPerformance[_0x584b9c(0x28d)]('version',serverversion)[_0x584b9c(0x2a9)](),dbLogs[_0x584b9c(0x28d)](_0x584b9c(0x347),serverversion)[_0x584b9c(0x2a9)](),dbCoinResults['set'](_0x584b9c(0x347),serverversion)[_0x584b9c(0x2a9)]();}function getConfiguration(_0x6cbe05){const _0x4602f1=_0x40896d;let _0x17036a=dbConfig[_0x4602f1(0x337)](_0x4602f1(0x2e0))[_0x4602f1(0x277)]({'botID':_0x6cbe05})['value']();if(_0x17036a){let _0x521406=![];typeof _0x17036a[_0x4602f1(0x31e)]=='string'&&(_0x17036a={..._0x17036a,'threshold':Number(_0x17036a[_0x4602f1(0x31e)])},_0x521406=!![]),_0x17036a[_0x4602f1(0x2e1)]==undefined&&(_0x17036a={..._0x17036a,'change24h':-0x14},_0x521406=!![]),_0x17036a[_0x4602f1(0x2e9)]==undefined&&(_0x17036a={..._0x17036a,'fiat':'USD'},_0x521406=!![]),_0x17036a[_0x4602f1(0x25e)]==undefined&&(_0x17036a={..._0x17036a,'onepagemode':settings['onepagemode']},_0x521406=!![]),_0x17036a[_0x4602f1(0x274)]==undefined&&(_0x17036a={..._0x17036a,'colorscheme':_0x4602f1(0x354)},_0x521406=!![]),_0x17036a['autoliquidity']==undefined&&(_0x17036a={..._0x17036a,'autoliquidity':!![]},_0x521406=!![]),_0x521406&&(_0x17036a={'botID':_0x17036a[_0x4602f1(0x276)],'exchange':_0x17036a[_0x4602f1(0x218)],'apiKey':_0x17036a[_0x4602f1(0x21f)],'apiSecret':_0x17036a[_0x4602f1(0x23c)],'apiPassword':_0x17036a['apiPassword'],'basecoin':_0x17036a[_0x4602f1(0x205)],'botname':_0x17036a[_0x4602f1(0x273)],'showname':_0x17036a[_0x4602f1(0x1e5)],'threshold':_0x17036a[_0x4602f1(0x31e)],'ordertype':_0x17036a[_0x4602f1(0x216)],'timeout':_0x17036a[_0x4602f1(0x236)],'fiat':_0x17036a[_0x4602f1(0x2e9)],'startdate':_0x17036a[_0x4602f1(0x352)],'recreate':_0x17036a[_0x4602f1(0x259)],'timeshift':_0x17036a['timeshift'],'onepagemode':_0x17036a[_0x4602f1(0x25e)],'headless':_0x17036a[_0x4602f1(0x282)],'cooldown':_0x17036a[_0x4602f1(0x375)],'change24h':_0x17036a['change24h'],'emojibuy':_0x17036a[_0x4602f1(0x2a6)],'emojisell':_0x17036a[_0x4602f1(0x2cd)],'colorscheme':_0x17036a['colorscheme'],'portfolio':_0x17036a['portfolio'],'autoliquidity':_0x17036a[_0x4602f1(0x1f6)],'liquidity':_0x17036a[_0x4602f1(0x261)],'openOrders':_0x17036a[_0x4602f1(0x296)]},dbConfig[_0x4602f1(0x337)]('bot')['remove']()['write'](),dbConfig[_0x4602f1(0x337)]('bot')['push'](_0x17036a)[_0x4602f1(0x2a9)]());}else _0x17036a={'botID':_0x6cbe05,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4602f1(0x2c0)+_0x6cbe05,'showname':![],'threshold':0x3,'ordertype':_0x4602f1(0x2db),'timeout':0x14,'fiat':_0x4602f1(0x1f4),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4602f1(0x30d)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4602f1(0x354),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x17036a;}function emittedConfiguration(){const _0x80c62b=_0x40896d;let _0x414035;if(config[_0x80c62b(0x21f)]=='')_0x414035={...config,'configstate':_0x80c62b(0x224)};else config[_0x80c62b(0x21f)]==_0x80c62b(0x286)?_0x414035={...config,'configstate':_0x80c62b(0x344)}:(_0x414035={...config,'apiKey':'************','apiSecret':'************'},config['apiPassword']&&(_0x414035['apiPassword']=_0x80c62b(0x356)));return _0x414035;}function getSettings(){const _0x3346db=_0x40896d;return dbSettings['get'](_0x3346db(0x33b))[_0x3346db(0x32a)]();}function getSecure(){const _0x43db13=_0x40896d;return dbSecure['get'](_0x43db13(0x27d))[_0x43db13(0x32a)]()||{};}function updateTimeshift(_0x3f7fbc){const _0x5c856a=_0x40896d;let _0x1818ea=dbConfig['get'](_0x5c856a(0x2e0))[_0x5c856a(0x277)]({'botID':botID})[_0x5c856a(0x32a)]();_0x1818ea&&dbConfig['get']('bot')[_0x5c856a(0x277)]({'botID':botID})[_0x5c856a(0x240)]({'timeshift':_0x3f7fbc})[_0x5c856a(0x2a9)](),config[_0x5c856a(0x30d)]=_0x3f7fbc,proxyEmit(_0x5c856a(0x349),emittedConfiguration());}function updateOnepagemode(_0x24836d){const _0x588cd8=_0x40896d;let _0x51bc9d=dbConfig[_0x588cd8(0x337)](_0x588cd8(0x2e0))[_0x588cd8(0x277)]({'botID':botID})[_0x588cd8(0x32a)]();_0x51bc9d&&dbConfig[_0x588cd8(0x337)](_0x588cd8(0x2e0))[_0x588cd8(0x277)]({'botID':botID})['assign']({'onepagemode':_0x24836d})[_0x588cd8(0x2a9)](),config[_0x588cd8(0x25e)]=_0x24836d,proxyEmit(_0x588cd8(0x349),emittedConfiguration());}async function storeConfiguration(_0x186491){const _0x4ee74f=_0x40896d;logger['debug'](_0x4ee74f(0x34d));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4ee74f(0x257)](_0x4ee74f(0x333));let _0x5484b2=![],_0x35bc18=![],_0x4f4f5d=[];_0x186491[_0x4ee74f(0x24f)][_0x4ee74f(0x272)](_0x545db7=>{const _0x3bf040=_0x4ee74f;if(!_0x545db7['excluded']&&_0x545db7[_0x3bf040(0x303)]!=_0x186491[_0x3bf040(0x205)])_0x4f4f5d[_0x3bf040(0x238)](_0x545db7[_0x3bf040(0x211)]);}),_0x4f4f5d[_0x4ee74f(0x272)](_0x5747dd=>{const _0x42e624=_0x4ee74f,_0x4d9b98=currentCoins['find'](_0x406025=>_0x406025[_0x42e624(0x211)]==_0x5747dd);!_0x4d9b98&&(_0x5484b2=!![]);}),currentCoins['forEach'](_0x31f1c6=>{const _0x3f8ce0=_0x4ee74f;if(_0x31f1c6[_0x3f8ce0(0x303)]!=config[_0x3f8ce0(0x205)]){const _0x499585=_0x4f4f5d[_0x3f8ce0(0x277)](_0x23efbf=>_0x23efbf==_0x31f1c6[_0x3f8ce0(0x211)]);!_0x499585&&(_0x5484b2=!![]);}}),_0x186491[_0x4ee74f(0x24f)]['forEach'](_0x4077e9=>{const _0x43e317=_0x4ee74f,_0x3677e3=config['portfolio'][_0x43e317(0x277)](_0x1b2a38=>_0x1b2a38[_0x43e317(0x303)]==_0x4077e9[_0x43e317(0x303)]);if(_0x3677e3&&_0x4077e9[_0x43e317(0x364)]!=_0x3677e3[_0x43e317(0x364)])_0x35bc18=!![];});let _0x151550=dbConfig[_0x4ee74f(0x337)]('bot')[_0x4ee74f(0x277)]({'botID':botID})['value']();_0x186491={..._0x186491,'apiKey':crypt['decrypt'](secure[_0x4ee74f(0x328)],_0x186491[_0x4ee74f(0x21f)])[_0x4ee74f(0x35d)],'apiSecret':crypt[_0x4ee74f(0x221)](secure[_0x4ee74f(0x328)],_0x186491['apiSecret'])[_0x4ee74f(0x35d)]};_0x186491[_0x4ee74f(0x353)]&&(_0x186491[_0x4ee74f(0x353)]=crypt[_0x4ee74f(0x221)](secure[_0x4ee74f(0x328)],_0x186491[_0x4ee74f(0x353)])[_0x4ee74f(0x35d)]);let _0x1416ec=![];if(_0x151550){_0x186491[_0x4ee74f(0x21f)]==_0x4ee74f(0x356)?_0x186491[_0x4ee74f(0x21f)]=config[_0x4ee74f(0x21f)]:_0x1416ec=!![];_0x186491[_0x4ee74f(0x23c)]==_0x4ee74f(0x356)?_0x186491['apiSecret']=config['apiSecret']:_0x1416ec=!![];if(_0x186491[_0x4ee74f(0x353)]==_0x4ee74f(0x356))_0x186491[_0x4ee74f(0x353)]=config['apiPassword'];else{if(_0x186491['apiPassword'])_0x1416ec=!![];}dbConfig[_0x4ee74f(0x337)](_0x4ee74f(0x2e0))[_0x4ee74f(0x277)]({'botID':botID})[_0x4ee74f(0x240)](_0x186491)[_0x4ee74f(0x2a9)]();}else dbConfig[_0x4ee74f(0x337)]('bot')[_0x4ee74f(0x238)](_0x186491)[_0x4ee74f(0x2a9)](),_0x1416ec=!![],process['send']({'status':_0x4ee74f(0x1e0),'live':_0x4ee74f(0x24a)},_0x15eb08=>{});process[_0x4ee74f(0x336)]({'botname':_0x186491['botname']},_0x4ed3a1=>{}),config={..._0x186491},updateBotManager(),proxyEmit(_0x4ee74f(0x298)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1416ec)await reset(!![]);else _0x5484b2||_0x35bc18?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x4ee74f(0x257)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x53ced0){const _0x134b53=_0x40896d,_0x581c75={...config,'headless':_0x53ced0[_0x134b53(0x282)]};let _0x25fe88=dbConfig[_0x134b53(0x337)](_0x134b53(0x2e0))[_0x134b53(0x277)]({'botID':botID})[_0x134b53(0x32a)]();_0x25fe88&&dbConfig[_0x134b53(0x337)](_0x134b53(0x2e0))[_0x134b53(0x277)]({'botID':botID})[_0x134b53(0x240)](_0x581c75)[_0x134b53(0x2a9)](),config={..._0x581c75},updateBotManager(),proxyEmit(_0x134b53(0x349),emittedConfiguration());}async function storeFiat(_0x1affca){const _0x4288c4=_0x40896d,_0x1328a0={...config,'fiat':_0x1affca};let _0xb14ff0=dbConfig['get'](_0x4288c4(0x2e0))[_0x4288c4(0x277)]({'botID':botID})['value']();_0xb14ff0&&dbConfig[_0x4288c4(0x337)]('bot')[_0x4288c4(0x277)]({'botID':botID})[_0x4288c4(0x240)](_0x1328a0)[_0x4288c4(0x2a9)](),config={..._0x1328a0},proxyEmit(_0x4288c4(0x349),emittedConfiguration());}function resetHistory(){const _0xa28b55=_0x40896d;logger[_0xa28b55(0x292)](_0xa28b55(0x1dd));try{if(fs[_0xa28b55(0x25a)](path[_0xa28b55(0x212)](configpath,_0xa28b55(0x230)+botID+_0xa28b55(0x2c7))))fs['unlinkSync'](path[_0xa28b55(0x212)](configpath,_0xa28b55(0x230)+botID+_0xa28b55(0x2c7)));if(fs[_0xa28b55(0x25a)](path[_0xa28b55(0x212)](configpath,'bot-'+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0xa28b55(0x230)+botID+'-performance.json'));if(fs[_0xa28b55(0x25a)](path[_0xa28b55(0x212)](configpath,_0xa28b55(0x230)+botID+'-results.json')))fs[_0xa28b55(0x1d9)](path[_0xa28b55(0x212)](configpath,_0xa28b55(0x230)+botID+_0xa28b55(0x2bd)));}catch(_0x36f9d8){if(_0x36f9d8)logger['full'](_0xa28b55(0x2b6),_0x36f9d8);}const _0x30ead3=getDate();let _0x532f7c=[];currentCoins[_0xa28b55(0x272)](_0x33947d=>{const _0x57d267=_0xa28b55;_0x532f7c[_0x57d267(0x238)]({'coin':_0x33947d['coin'],'number':_0x33947d[_0x57d267(0x27a)],'price':_0x33947d[_0x57d267(0x2e5)]});});let _0x124fc0=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x124fc0&&(dbConfig[_0xa28b55(0x337)]('bot')[_0xa28b55(0x277)]({'botID':botID})[_0xa28b55(0x240)]({'liquidity':[{'date':_0x30ead3,'changes':_0x532f7c}]})['write'](),config['liquidity']=[]),process[_0xa28b55(0x336)]({'stop':_0xa28b55(0x2b7)},_0x2c8f67=>{});}function noslash(_0x58ba14){const _0x4744f2=_0x40896d;return _0x58ba14[_0x4744f2(0x2df)]('/','');}function updateHighestFee(_0xc889df){const _0x65941b=_0x40896d;if(_0xc889df[_0x65941b(0x1e6)]){let _0x42fd1f={'filled':_0xc889df[_0x65941b(0x1f0)]*_0xc889df[_0x65941b(0x319)],'amount':_0xc889df[_0x65941b(0x1f0)]*_0xc889df[_0x65941b(0x319)],'side':_0xc889df[_0x65941b(0x228)]=='sell'?_0x65941b(0x2a3):_0x65941b(0x2ec),'price':0x1/_0xc889df[_0x65941b(0x319)]};_0xc889df={..._0xc889df,..._0x42fd1f};}const _0x1e9391=defaultFee*_0xc889df[_0x65941b(0x1f0)]*_0xc889df[_0x65941b(0x319)];lastFees['recent20'][_0x65941b(0x265)]===0x14&&lastFees[_0x65941b(0x35e)][_0x65941b(0x209)](),lastFees[_0x65941b(0x35e)][_0x65941b(0x238)](_0x1e9391),lastFees[_0x65941b(0x2c6)]=Math[_0x65941b(0x290)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x41b165){const _0x310ef3=_0x40896d;logger[_0x310ef3(0x257)](_0x310ef3(0x222)+_0x41b165[_0x310ef3(0x211)]+'\x20|\x20'+_0x41b165[_0x310ef3(0x25f)]+_0x310ef3(0x341)+_0x41b165[_0x310ef3(0x1f0)]+_0x310ef3(0x376)+_0x41b165[_0x310ef3(0x231)]+_0x310ef3(0x341)+_0x41b165['id']);let _0x76dafd=_0x41b165['status'],_0x264567=![];currentCoins[_0x310ef3(0x272)](_0x406c25=>{const _0x460431=_0x310ef3;_0x406c25[_0x460431(0x211)]==_0x41b165[_0x460431(0x211)]&&(_0x264567=!![]);});if(!_0x264567)return;const _0x27ceed=currentCoins[_0x310ef3(0x277)](_0x5d2742=>_0x5d2742[_0x310ef3(0x211)]==_0x41b165[_0x310ef3(0x211)]),_0x469a97=_0x564a32=>{if(_0x27ceed)_0x27ceed['orderstatus']=_0x564a32;};if(_0x76dafd=='open')_0x469a97(_0x310ef3(0x35b));else{if(_0x76dafd==_0x310ef3(0x2c1)){_0x469a97(_0x310ef3(0x2c1));const _0x3df792=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3df792,await getOpenOrders(),handleOpenOrders();}else{if(_0x76dafd=='closed'){let _0x19e069=![];if(lastOrders)for(const _0x15b1e3 of lastOrders){const _0x5ab596=0xc8,_0x160457=0x1388;let _0x6824f2=0x0;while(!_0x15b1e3[_0x310ef3(0x2b1)]&&_0x6824f2*_0x5ab596<_0x160457){_0x6824f2++,await sleep(_0x5ab596);}if(_0x6824f2>0x0)logger[_0x310ef3(0x257)](_0x310ef3(0x269)+_0x6824f2*_0x5ab596/0x3e8+_0x310ef3(0x208));if(_0x15b1e3[_0x310ef3(0x2b1)]==_0x41b165['id']){logger['debug'](_0x310ef3(0x371)+_0x41b165['id']),_0x19e069=!![];if(_0x15b1e3[_0x310ef3(0x1f0)]==0x0){logger['debug'](_0x310ef3(0x24b)+_0x41b165['id']);if(_0x41b165[_0x310ef3(0x201)])_0x15b1e3[_0x310ef3(0x319)]=_0x41b165[_0x310ef3(0x201)];else{if(_0x41b165[_0x310ef3(0x319)])_0x15b1e3[_0x310ef3(0x319)]=_0x41b165[_0x310ef3(0x319)];else{}}_0x15b1e3[_0x310ef3(0x1f0)]=_0x41b165[_0x310ef3(0x1f0)],updateHighestFee(_0x15b1e3),_0x469a97(_0x310ef3(0x1f0)),await validateOrders();if(lockOrders==ORDERS[_0x310ef3(0x351)]){const _0x2522a2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2522a2;}_0x15b1e3[_0x310ef3(0x36c)]={'currency':_0x41b165[_0x310ef3(0x36c)]?_0x41b165[_0x310ef3(0x36c)]['currency']:null,'cost':_0x41b165['fee']?_0x41b165[_0x310ef3(0x36c)][_0x310ef3(0x2ce)]:0x0},await updateCoinResults(_0x15b1e3);}}}if(!_0x19e069){logger[_0x310ef3(0x257)](_0x310ef3(0x252)+_0x41b165['id']),_0x469a97(_0x310ef3(0x1f0));const _0x523a5c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x523a5c,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1703d6=JSON[_0x310ef3(0x31b)](lastBalances[_0x310ef3(0x24f)]);const _0x25a34e=_0x1703d6[_0x310ef3(0x277)](_0x5cce7f=>_0x5cce7f[_0x310ef3(0x211)]==_0x41b165['symbol']);if(_0x25a34e){if(_0x76dafd==_0x310ef3(0x35b))_0x25a34e[_0x310ef3(0x36b)]=_0x25a34e['orderstatus']==_0x310ef3(0x1f0)?_0x310ef3(0x1f0):_0x310ef3(0x35b);else{if(_0x76dafd==_0x310ef3(0x2c1))_0x25a34e[_0x310ef3(0x36b)]=_0x25a34e['orderstatus']==_0x310ef3(0x1f0)?'filled':'canceled';else _0x76dafd==_0x310ef3(0x334)&&(_0x25a34e[_0x310ef3(0x36b)]=_0x310ef3(0x1f0));}}lastBalances={...lastBalances,'portfolio':JSON[_0x310ef3(0x343)](_0x1703d6)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xabfeed=_0x40896d;await getOpenOrders();let _0x24f6a0=![];currentCoins[_0xabfeed(0x272)](_0x1b16e0=>{const _0x1f729b=_0xabfeed;_0x24f6a0=allOpenOrders[_0x1f729b(0x277)](_0x48e85b=>_0x48e85b[_0x1f729b(0x211)]==_0x1b16e0['symbol']),_0x1b16e0['orderstatus']=_0x24f6a0?_0x1f729b(0x35b):'none';});}async function getCoins(_0x4ccde2=0x0,_0x2bf274=!![],_0x49d4f8=config[_0x40896d(0x205)]){const _0x549023=_0x40896d;let _0x356351,_0x2494b1=[],_0x4e612a=[],_0x38266c=[];if(_0x4ccde2)await sleep(_0x4ccde2);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x356351=await exchange[_0x549023(0x1e9)](),mybalances=_0x356351[_0x549023(0x2fe)];for(const [_0xe7dc5e,_0x101ba2]of Object[_0x549023(0x1eb)](mybalances)){_0x38266c[_0x549023(0x238)](_0xe7dc5e);}config[_0x549023(0x24f)][_0x549023(0x272)](_0x2422ba=>{const _0x36e532=_0x549023;!_0x38266c[_0x36e532(0x368)](_0x2422ba['coin'])&&(mybalances[_0x2422ba['coin']]=0x0);});if(_0x49d4f8=='')for(const [_0x2c0524,_0x1de72c]of Object[_0x549023(0x1eb)](mybalances)){_0x1de72c!=0x0&&_0x2494b1[_0x549023(0x238)]({'coin':_0x2c0524});}else{let _0x1f4384=![];for(const [_0x236da0,_0x58bdbc]of Object[_0x549023(0x1eb)](mybalances)){const _0x39327e=config[_0x549023(0x24f)][_0x549023(0x277)](_0x89f395=>_0x89f395[_0x549023(0x303)]==_0x236da0),_0x4b8819=_0x236da0+'/'+_0x49d4f8,_0x156cec=_0x49d4f8+'/'+_0x236da0,_0x1288bb=currentCoins[_0x549023(0x277)](_0x4545f8=>_0x4545f8[_0x549023(0x303)]==_0x236da0);_0x1f4384=![];if((_0x58bdbc!=0x0||_0x39327e)&&(allSymbols[_0x549023(0x368)](_0x4b8819)||_0x236da0==_0x49d4f8))_0x2494b1[_0x549023(0x238)]({'coin':_0x236da0,'symbol':_0x4b8819,'reverse':![],'number':Math[_0x549023(0x290)](_0x58bdbc+(_0x39327e&&_0x39327e[_0x549023(0x364)]||0x0),0x0),'orderstatus':_0x1288bb?_0x1288bb['orderstatus']:'none'});else{if((_0x58bdbc!=0x0||_0x39327e)&&allSymbols['includes'](_0x156cec))_0x2494b1[_0x549023(0x238)]({'coin':_0x236da0,'symbol':_0x156cec,'reverse':!![],'number':Math[_0x549023(0x290)](_0x58bdbc+(_0x39327e&&_0x39327e[_0x549023(0x364)]||0x0),0x0),'orderstatus':_0x1288bb?_0x1288bb[_0x549023(0x36b)]:_0x549023(0x283)});else _0x39327e&&_0x2494b1[_0x549023(0x238)]({'coin':_0x39327e[_0x549023(0x303)],'symbol':_0x39327e['symbol'],'reverse':_0x39327e[_0x549023(0x1e6)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x1b2d6d){if(!_0x2bf274)handleErrorNoStop(_0x1b2d6d,_0x549023(0x25b));else await handleError(_0x1b2d6d,_0x549023(0x25b));}return _0x4e612a=cloneDeep(_0x2494b1),_0x2494b1=_0x2494b1['filter'](_0x451777=>{const _0x5c946f=_0x549023,_0x2a8d96=config[_0x5c946f(0x24f)][_0x5c946f(0x277)](_0x38d3ad=>_0x38d3ad['coin']==_0x451777[_0x5c946f(0x303)]);return _0x2a8d96&&!_0x2a8d96[_0x5c946f(0x307)];}),[_0x2494b1,_0x4e612a];}async function getCoinNumber(_0x5e947f){const _0x86483d=_0x40896d;let _0x547f38;try{const _0x291a9f=await exchange['fetchBalance']();_0x547f38=_0x291a9f['total'][_0x5e947f];}catch(_0x4d46e2){await handleError(_0x4d46e2,_0x86483d(0x1e1));}return _0x547f38;}async function getOpenOrders(){const _0x1dc697=_0x40896d;let _0x36c76a;allOpenOrders=[];try{for(const _0x2e1e79 of config[_0x1dc697(0x24f)]){!_0x2e1e79[_0x1dc697(0x307)]&&_0x2e1e79[_0x1dc697(0x303)]!=config[_0x1dc697(0x205)]&&(_0x36c76a=await exchange['fetchOpenOrders'](_0x2e1e79[_0x1dc697(0x211)]),_0x36c76a[_0x1dc697(0x265)]>0x0&&allOpenOrders[_0x1dc697(0x238)](_0x36c76a[0x0]));}}catch(_0x2acf3f){await handleError(_0x2acf3f,_0x1dc697(0x374));}}async function handleOpenOrders(_0x4ceff5=0x0){const _0x1106a5=_0x40896d;allOpenOrders[_0x1106a5(0x265)]==0x0&&lockOrders==ORDERS[_0x1106a5(0x351)]&&allOrdersPlaced&&(_0x4ceff5==0x0?(logger[_0x1106a5(0x257)]('1\x20-\x20Handle\x20open\x20orders'),_0x4ceff5++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1106a5(0x257)](_0x1106a5(0x29f)),validateOrders(_0x1106a5(0x33d))));}async function testAPI(_0x52d817){const _0x3b169f=_0x40896d,_0x1a592a=ccxt[_0x3b169f(0x26b)][_0x52d817['exchange'][_0x3b169f(0x1e3)]()],_0x5c3064=new _0x1a592a({'apiKey':_0x52d817[_0x3b169f(0x21f)],'secret':_0x52d817[_0x3b169f(0x23c)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3b169f(0x28e)}});if(_0x52d817[_0x3b169f(0x353)])_0x5c3064[_0x3b169f(0x29c)]=_0x52d817[_0x3b169f(0x353)];try{await _0x5c3064[_0x3b169f(0x372)]();}catch(_0x3690a1){throw _0x3690a1;}}function cloneDeep(_0x4f5a01){const _0xe605ae=_0x40896d;return JSON[_0xe605ae(0x31b)](JSON['stringify'](_0x4f5a01));}async function getPortfolio(_0x21a642){const _0x38ee99=_0x40896d;let _0x590429=[],_0x3c71bb=[],_0x4b4f2e=[],_0x2093a0;if(_0x21a642[_0x38ee99(0x21f)]!==_0x38ee99(0x356)||_0x21a642[_0x38ee99(0x23c)]!==_0x38ee99(0x356)||_0x21a642[_0x38ee99(0x353)]&&_0x21a642[_0x38ee99(0x353)]!==_0x38ee99(0x356)){if(config[_0x38ee99(0x218)]){if(_0x21a642['apiKey']==_0x38ee99(0x356))_0x21a642['apiKey']=config[_0x38ee99(0x21f)];if(_0x21a642['apiSecret']=='************')_0x21a642[_0x38ee99(0x23c)]=config[_0x38ee99(0x23c)];if(_0x21a642[_0x38ee99(0x353)]=='************')_0x21a642[_0x38ee99(0x353)]=config[_0x38ee99(0x353)];try{await testAPI(_0x21a642);}catch(_0x38f905){if(_0x38f905[_0x38ee99(0x287)]()[_0x38ee99(0x368)]('AuthenticationError')){logger[_0x38ee99(0x257)](_0x38ee99(0x241)),proxyEmit('portfolio',![]);return;}else{handleError(_0x38f905,'getPortfolio(0)');return;}}}await initExchange(_0x21a642[_0x38ee99(0x218)],_0x21a642[_0x38ee99(0x21f)],_0x21a642[_0x38ee99(0x23c)],_0x21a642['apiPassword']);try{await loadSymbols();}catch(_0x2ccd33){if(_0x2ccd33[_0x38ee99(0x287)]()[_0x38ee99(0x368)](_0x38ee99(0x2ea))){proxyEmit('portfolio',![]);return;}else{handleError(_0x2ccd33,'getPortfolio(1)');return;}}const _0x52aa5c=await getCoins(0x0,![],_0x21a642[_0x38ee99(0x205)]);_0x4b4f2e=cloneDeep(_0x52aa5c[0x1]);}else _0x4b4f2e=cloneDeep(currentCoinsAll);if(_0x21a642[_0x38ee99(0x205)]=='')proxyEmit('portfolio',_0x4b4f2e);else{_0x4b4f2e[_0x38ee99(0x272)](_0x3aa994=>{const _0x452a18=_0x38ee99;if(_0x3aa994[_0x452a18(0x303)]!=_0x21a642[_0x452a18(0x205)]&&allSymbols[_0x452a18(0x368)](_0x3aa994['symbol']))_0x590429['push'](_0x3aa994[_0x452a18(0x211)]);});if(_0x590429['length']==0x0)logHistory(_0x38ee99(0x239),_0x38ee99(0x256));else{try{_0x3c71bb=await getTickers(_0x590429);}catch(_0x4ba988){if(_0x4ba988[_0x38ee99(0x287)]()['includes'](_0x38ee99(0x2ea))){proxyEmit(_0x38ee99(0x24f),![]);return;}else handleError(_0x4ba988,_0x38ee99(0x22a));}_0x4b4f2e[_0x38ee99(0x272)](_0x4f8551=>{const _0x28d405=_0x38ee99;_0x4f8551['coin']!=_0x21a642[_0x28d405(0x205)]?_0x3c71bb[_0x4f8551[_0x28d405(0x211)]]?_0x2093a0=_0x4f8551[_0x28d405(0x1e6)]?0x1/_0x3c71bb[_0x4f8551['symbol']][_0x28d405(0x2e5)]:_0x3c71bb[_0x4f8551[_0x28d405(0x211)]][_0x28d405(0x2e5)]:_0x2093a0=0x0:_0x2093a0=0x1,_0x4f8551[_0x28d405(0x319)]=formatResult(_0x2093a0,0x8);}),proxyEmit(_0x38ee99(0x24f),_0x4b4f2e);}}}function truncateTradeAmount(_0x42349b,_0x28a3ed){const _0x3b3c10=_0x40896d;let _0x56faeb=0x0;try{_0x56faeb=exchange[_0x3b3c10(0x21d)](_0x42349b,_0x28a3ed);}catch(_0x5b2e22){}return _0x56faeb;}function _0x5cb9(){const _0x3b0f52=['initclient','configuration','\x20order:\x20','initTickers()','net-basecoin','Saving\x20configuration','progress','cancelOrder','indexOf','LOCKED','startdate','apiPassword','red_yellow_blue','Order\x20amount\x20is\x20invalid:\x20','************','storeConfiguration','Error\x20details:','customId','Executing\x20exchange\x20reload','open','\x20|\x20Custom\x20ID:\x20','message','recent20','\x20hour','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','slice','time','./config/','offset','Invalid\x20symbol:\x20','Binance','Huobipro','includes','warning','round','orderstatus','fee','\x20minutes\x20-\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','ORDERS.LOCKED','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','1\x20-\x20FILLED\x20known\x20order:\x20','loadMarkets','parseISO','getOpenOrders()','cooldown','\x20/\x20','net-fiat','keys','Loading\x20completed','added','bb-settings.json','Error:\x20Invalid\x20argument\x20','unlinkSync','getHours','/EUR','event','Resetting\x20bot\x20history','startprice','ongoing','enabled','getCoinNumber()','watchTrades','toLowerCase','percentage','showname','reverse','fetchClosedOrders','filter','fetchBalance','limit-high','entries','fetchTicker','Manual\x20balancing\x20required','getFullYear','USDT','filled','breakeven','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20metrics:</b>\x20\x0a\x0a','USD','RSA-OAEP','autoliquidity','add','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','remove','createWriteStream','cancelLoading','2\x20-\x20Orders\x20unlocked','ORDERS.UNLOCKED','EUR','event-history','average','sendMetricsTelegram','usd','freeze','basecoin','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','shift','showConfig','test','USDC','InvalidNonce','ETH','ID:\x20','sendPortfolioTelegram','symbol','join','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','log','datetime','ordertype','554244ZHJrwR','exchange','rightTxt','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','sort','\x20orders\x20in\x20less\x20than\x20','amountToPrecision','getMinutes','apiKey','apply','decrypt','0\x20-\x20EXECUTION:\x20','argv','initial','logs','1\x20-\x20Unlock\x20orders','RateLimitExceeded','side','Fee\x20discount\x20refund\x20detected:\x20','getPortfolio(2)','ExchangeNotAvailable','writeFile','\x20value','fetchTickers()','2.5.0','bot-','amount','.json','must\x20be\x20greater\x20than\x20minimum\x20amount','path','BTC','timeout','Headless:\x20','push','error','Order(s)\x20not\x20validated\x20after\x20','getDate','apiSecret','min','(((.+)+)+)+$','toggleBotMode','assign','Invalid\x20API\x20key\x20or\x20secret\x20entered','date','\x20has\x20a\x2024h\x20drop\x20of\x20','loading-canceled','startnumber','Failed\x20to\x20load\x20coin\x20data\x20for\x20','2672848myhbJL','map','delta','running','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20|\x20exchange:\x20','floor','30dZcodP','portfolio','fromCodePoint','OrderNotFound','1\x20-\x20FILLED\x20unknown\x20order:\x20','Cryptocom','order','cancelOrders()','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','debug','Resetting\x20coin\x20results:\x20','recreate','existsSync','getCoins()','getSeconds','watchTrades()','onepagemode','status','UNLOCKING','liquidity','<b>Bot\x20','toFixed','Crypt','length','Avoiding\x20continuous\x20order\x20attempts','limits','\x20minutes','Waited\x20','PermissionDenied','pro','exchange\x20not\x20reloaded','args','BUSD','-------------------------------\x0a','realized','eur','forEach','botname','colorscheme','balancing\x20resumed','botID','find','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','timestamp','number','bid','Order\x20is\x20invalid:\x20','secure','coin-loading-progress','Reset\x20|\x20','MIN_NOTIONAL','<pre>','headless','none','<b>','\x20closed\x20the\x20connection','***','toString','limit','performance','sortBy','uncaughtException','Cex','set','spot','stopExchange()','max','ticker','full','findIndex','fetchOpenOrders','OnMaintenance','openOrders','hybrid-crypto-js','configuration-stored','cloneDeep','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','001','password','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','trade','2\x20-\x20Handled\x20open\x20orders','mkdirSync','function','starting-balances','buy','Limit\x20(high-margin)','Exception\x20thrown\x20in\x20','emojibuy','API-key\x20format\x20invalid','page','write','\x20blocked\x20your\x20API','changes','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','balances','distribution','464305nfmBKo','14clKguz','orderId','substring','toUpperCase','Order\x20filled:\x20','RequestTimeout','Error\x20while\x20deleting\x20files:\x20','restart','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','abs','Net\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','30XwryfJ','-results.json','storeFiat','has','Bot\x20','canceled','\x20|\x20lock\x20orders:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','success','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','highest','-events.json','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','./logs/','/backup/','search','Cooldown\x20ended\x20-\x20balancing\x20resumed','emojisell','cost','getAllOrders()','currency','519386XwoGGD','ExchangeError','loadSymbols()','milliseconds','Unfilled\x20order(s)\x20canceled\x20after\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','exchanges','%\x20(','./version.json','</pre>','market','\x20>\x20','remainingSymbols','Executed\x20','replace','bot','change24h','defaults','\x20not\x20available','PAXG','last','UNLOCKED','bb-secure.json','ORDERS.UNLOCKING','fiat','AuthenticationError','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','sell','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Unknown\x20error\x20occured','startsWith','2\x20-\x20Validate\x20orders:\x20',':\x20Bot\x20','\x20portfolio:</b>\x20\x0a\x0a','buys','change','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','bots','Huobi','placeOrder','Trigger:\x20','data','valid','exec','getTime','total','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','yyyy/MM/dd','4215323bEdjgu','yyyy-MM-dd\x27T\x27HH:mm:ss','coin','isEqual','Exchange','createOrder','excluded','/USD','split','basecoinvalue','Pausing\x20for\x20','netoffset','timeshift','util','-config.json','close','resetHistory','splice','target','Market','yargs/yargs','ask','BNB','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','price','placeOrder()','parse','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','kill','threshold','emitHistory','padStart','deleteHistoryAlerts','fees','getMonth','InvalidOrder','Bitget','No\x20more\x20open\x20orders\x20-\x20','\x20|\x20highest\x20fee:\x20','privateKey','\x20-\x20pausing\x20bot\x20for\x20','value','cancel','2.3.5','5658714FwVfzJ','type','241767CCOifz','watchOrders','\x20API\x20secret\x20is\x20invalid','sells','Transaction\x20detection\x20blocked','closed','BNB/','send','get','leftTxt','coins','Net\x20effect','settings','format','no\x20open\x20orders','Initializing\x20coin\x20results',':\x20timer\x20>','\x20:\x20','\x20|\x20','removed','stringify','recovery','getPortfolio','final','version'];_0x5cb9=function(){return _0x3b0f52;};return _0x5cb9();}function checkMinimums(_0x422e73){const _0x7c5af=_0x40896d;let _0x4ac276=!![];const _0x20afc6=!_0x422e73['reverse']?markets[_0x422e73['symbol']][_0x7c5af(0x267)][_0x7c5af(0x231)][_0x7c5af(0x23d)]:markets[_0x422e73['symbol']][_0x7c5af(0x267)][_0x7c5af(0x2ce)]['min'],_0x6ce7b=!_0x422e73[_0x7c5af(0x1e6)]?markets[_0x422e73[_0x7c5af(0x211)]]['limits'][_0x7c5af(0x2ce)][_0x7c5af(0x23d)]:markets[_0x422e73['symbol']]['limits'][_0x7c5af(0x231)][_0x7c5af(0x23d)],_0x384ac4=truncateTradeAmount(_0x422e73[_0x7c5af(0x211)],_0x422e73[_0x7c5af(0x29e)]);_0x422e73[_0x7c5af(0x29e)]=_0x384ac4;if(Math['abs'](_0x384ac4)<_0x20afc6)_0x4ac276=![];if(Math['abs'](_0x384ac4)*_0x422e73[_0x7c5af(0x2e5)]<_0x6ce7b)_0x4ac276=![];if(_0x422e73[_0x7c5af(0x228)]==_0x7c5af(0x2ec)){let _0x729af3=config[_0x7c5af(0x24f)][_0x7c5af(0x277)](_0x160eb6=>_0x160eb6['coin']==_0x422e73[_0x7c5af(0x303)]);if(_0x729af3['offset']>0x0){if(Math['abs'](_0x384ac4)>_0x422e73[_0x7c5af(0x27a)]-_0x729af3['offset'])_0x4ac276=![];}else{if(Math['abs'](_0x384ac4)>_0x422e73['number'])_0x4ac276=![];}}if(_0x422e73[_0x7c5af(0x228)]=='buy'){let _0x18d1e0=config[_0x7c5af(0x24f)][_0x7c5af(0x277)](_0x246f03=>_0x246f03[_0x7c5af(0x303)]==config[_0x7c5af(0x205)]),_0x11f064=currentCoins[_0x7c5af(0x277)](_0x1bac9d=>_0x1bac9d[_0x7c5af(0x303)]==config[_0x7c5af(0x205)]);if(_0x18d1e0[_0x7c5af(0x364)]>0x0){if(Math['abs'](_0x384ac4)*_0x422e73[_0x7c5af(0x2e5)]>_0x11f064['number']-_0x18d1e0[_0x7c5af(0x364)])_0x4ac276=![];}else{if(Math[_0x7c5af(0x2b9)](_0x384ac4)*_0x422e73[_0x7c5af(0x2e5)]>_0x11f064[_0x7c5af(0x27a)])_0x4ac276=![];}}return _0x4ac276;}async function getBalances(_0x3805a7=!![]){const _0x43f1df=_0x40896d;let _0x378254=0x0,_0x30a29a;const _0x7166fd=config['threshold'];if(config[_0x43f1df(0x282)]&&config[_0x43f1df(0x2e1)]<0x0)await validate24hChanges();currentCoins[_0x43f1df(0x272)](_0x2147f9=>{const _0x2f64a1=_0x43f1df;if(_0x2147f9['coin']!=config[_0x2f64a1(0x205)]){let _0x1cfd06=global[_0x2f64a1(0x291)][noslash(_0x2147f9[_0x2f64a1(0x211)])];_0x30a29a=_0x2147f9[_0x2f64a1(0x1e6)]?0x1/_0x1cfd06:_0x1cfd06;}else _0x30a29a=0x1;let _0x46c4b1=_0x2147f9['number']*_0x30a29a;_0x378254+=_0x46c4b1,_0x2147f9[_0x2f64a1(0x2e5)]=formatResult(Number(_0x30a29a),0x8),_0x2147f9[_0x2f64a1(0x32a)]=_0x46c4b1;}),currentCoins[_0x43f1df(0x272)](_0x8c526f=>{const _0xe72356=_0x43f1df;let _0x3df8a4=config[_0xe72356(0x24f)][_0xe72356(0x277)](_0x3b57b5=>_0x3b57b5[_0xe72356(0x303)]==_0x8c526f[_0xe72356(0x303)]),_0x27eb10=Number(_0x3df8a4[_0xe72356(0x2ae)]),_0x5776e0=_0x8c526f[_0xe72356(0x32a)]/_0x378254*0x64,_0x3a06d0=_0x27eb10*_0x378254/0x64/_0x8c526f[_0xe72356(0x2e5)]-_0x8c526f[_0xe72356(0x27a)];_0x8c526f[_0xe72356(0x2ae)]=formatResult(_0x5776e0,0x3),_0x8c526f['target']=formatResult(_0x27eb10,0x3),_0x8c526f[_0xe72356(0x29e)]=formatResult(_0x3a06d0,0x8),_0x8c526f[_0xe72356(0x228)]='',_0x8c526f[_0xe72356(0x2fb)]=![];if(_0x8c526f[_0xe72356(0x303)]!=config[_0xe72356(0x205)]){if(_0x8c526f[_0xe72356(0x2ae)]>_0x27eb10)_0x8c526f[_0xe72356(0x228)]=_0xe72356(0x2ec),_0x8c526f[_0xe72356(0x2fb)]=checkMinimums(_0x8c526f);else _0x8c526f[_0xe72356(0x2ae)]<_0x27eb10&&(_0x8c526f[_0xe72356(0x228)]=_0xe72356(0x2a3),_0x8c526f[_0xe72356(0x2fb)]=checkMinimums(_0x8c526f));}_0x8c526f[_0xe72356(0x249)]=_0x8c526f['distribution']/_0x8c526f[_0xe72356(0x313)]-0x1;if(_0x8c526f[_0xe72356(0x36b)]==_0xe72356(0x1f0)||_0x8c526f[_0xe72356(0x36b)]==_0xe72356(0x2c1))_0x8c526f[_0xe72356(0x36b)]=_0xe72356(0x283);}),currentCoins[_0x43f1df(0x21b)]((_0x2a353f,_0x1bee49)=>_0x2a353f[_0x43f1df(0x249)]<_0x1bee49[_0x43f1df(0x249)]?0x1:_0x1bee49['delta']<_0x2a353f['delta']?-0x1:0x0);const _0x30547b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x30547b[_0x43f1df(0x271)],'usd':_0x30547b[_0x43f1df(0x203)],'portfolio':JSON[_0x43f1df(0x343)](currentCoins),'threshold':_0x7166fd},proxyEmit(_0x43f1df(0x2ad),{'serverversion':serverversion,'balances':lastBalances});if(_0x3805a7){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x7166fd});else{if(lockOrders==ORDERS[_0x43f1df(0x2e6)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x7166fd});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x453170=getNormalizedPerformance();getStartingBalances(_0x453170),emitPerformance(_0x453170);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1a32e5=getNormalizedPerformance();emitPerformance(_0x1a32e5),getStartingBalances(_0x1a32e5),logger[_0x43f1df(0x257)](_0x43f1df(0x1f8));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x176fe5=_0x40896d;if(!lastBalances)return;let _0x5d2f1f=[],_0x231a62,_0x523b1d=JSON[_0x176fe5(0x31b)](lastBalances[_0x176fe5(0x24f)]);_0x523b1d[_0x176fe5(0x21b)]((_0x56c485,_0x16a4b6)=>_0x56c485['coin']>_0x16a4b6[_0x176fe5(0x303)]?0x1:_0x16a4b6[_0x176fe5(0x303)]>_0x56c485[_0x176fe5(0x303)]?-0x1:0x0),_0x523b1d[_0x176fe5(0x272)](_0x1bda28=>{const _0x412b75=_0x176fe5;let _0x53f515={'coin':_0x1bda28['coin'],'number':_0x1bda28[_0x412b75(0x27a)],'price':_0x1bda28[_0x412b75(0x2e5)]};_0x5d2f1f[_0x412b75(0x238)](_0x53f515);});const _0x39246a=await getFiat();_0x231a62={'date':lastBalances[_0x176fe5(0x362)][_0x176fe5(0x309)]('\x20')[0x0],'eur':_0x39246a[_0x176fe5(0x271)],'usd':_0x39246a[_0x176fe5(0x203)],'coins':_0x5d2f1f};let _0xae4b9f=dbPerformance[_0x176fe5(0x337)](_0x176fe5(0x2fa))[_0x176fe5(0x277)]({'date':_0x231a62[_0x176fe5(0x242)]})[_0x176fe5(0x32a)]();_0xae4b9f?_0x231a62[_0x176fe5(0x242)]!=config[_0x176fe5(0x352)]&&dbPerformance[_0x176fe5(0x337)](_0x176fe5(0x2fa))['find']({'date':_0x231a62[_0x176fe5(0x242)]})[_0x176fe5(0x240)](_0x231a62)['write']():dbPerformance[_0x176fe5(0x337)](_0x176fe5(0x2fa))[_0x176fe5(0x238)](_0x231a62)[_0x176fe5(0x2a9)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5a8b56=_0x40896d;let _0x2d4cf7=[];if(dbPerformance[_0x5a8b56(0x2bf)](_0x5a8b56(0x2fa))[_0x5a8b56(0x32a)]()){let _0x8fb01e=dbPerformance['get']('data')[_0x5a8b56(0x299)]()[_0x5a8b56(0x1e8)](_0x40f521=>{if(_0x40f521['coins']['length']==0x0)return![];else return!![];})[_0x5a8b56(0x28a)](_0x5a8b56(0x242))[_0x5a8b56(0x32a)](),_0x1cb4ef=[...config[_0x5a8b56(0x261)]];_0x1cb4ef[_0x5a8b56(0x21b)]((_0xf31ed4,_0x2c5761)=>_0xf31ed4[_0x5a8b56(0x242)]>_0x2c5761[_0x5a8b56(0x242)]?-0x1:_0x2c5761[_0x5a8b56(0x242)]>_0xf31ed4[_0x5a8b56(0x242)]?0x1:0x0);let _0x863caa=0x1,_0x1df59c=[],_0x3fdbcf=0x0;_0x8fb01e['slice']()[_0x5a8b56(0x1e6)]()[_0x5a8b56(0x272)]((_0x4375f1,_0x162115)=>{const _0x113f59=_0x5a8b56;if(_0x1cb4ef[_0x3fdbcf]){if(_0x8fb01e[_0x8fb01e[_0x113f59(0x265)]-_0x162115]&&_0x1cb4ef[_0x3fdbcf][_0x113f59(0x242)]==_0x8fb01e[_0x8fb01e[_0x113f59(0x265)]-_0x162115][_0x113f59(0x242)]){if(_0x162115<_0x8fb01e[_0x113f59(0x265)]){let _0xd68891=0x0,_0x41f63a=0x0;_0x8fb01e[_0x8fb01e[_0x113f59(0x265)]-_0x162115][_0x113f59(0x339)][_0x113f59(0x272)](_0x2119be=>{const _0x3bd488=_0x113f59;_0x41f63a+=_0x2119be[_0x3bd488(0x27a)]*_0x2119be[_0x3bd488(0x319)];}),_0x1cb4ef[_0x3fdbcf][_0x113f59(0x2ab)][_0x113f59(0x272)](_0xc030c=>{_0xd68891+=_0xc030c['number']*_0xc030c['price'];}),_0x863caa*=_0xd68891/(_0x41f63a-_0xd68891)+0x1;}_0x3fdbcf++;}}let _0x29b8ce=0x0;_0x4375f1[_0x113f59(0x339)][_0x113f59(0x272)](_0x23342c=>{const _0x16b45a=_0x113f59;_0x29b8ce+=_0x23342c['number']*_0x23342c[_0x16b45a(0x319)];}),_0x1df59c[_0x8fb01e[_0x113f59(0x265)]-_0x162115-0x1]=_0x29b8ce*(_0x863caa-0x1);});let _0x48755b=[];_0x1cb4ef=[...config['liquidity']]||[];let _0x47add9=0x0;_0x3fdbcf=0x0,_0x8fb01e[_0x5a8b56(0x272)]((_0x42610d,_0x37ca3f)=>{const _0x2c1248=_0x5a8b56;if(_0x1cb4ef[_0x3fdbcf]){const _0x2fe61=fns[_0x2c1248(0x31b)](_0x1cb4ef[_0x3fdbcf]['date'],_0x2c1248(0x300),new Date()),_0x8e40fa=fns[_0x2c1248(0x31b)](_0x42610d[_0x2c1248(0x242)],_0x2c1248(0x300),new Date());if(fns[_0x2c1248(0x304)](_0x2fe61,_0x8e40fa)){let _0x145614=0x0;_0x1cb4ef[_0x3fdbcf]['changes'][_0x2c1248(0x272)](_0x2d51f4=>{const _0x37a5e4=_0x2c1248;!_0x48755b[_0x2d51f4['coin']]?_0x48755b[_0x2d51f4[_0x37a5e4(0x303)]]=_0x2d51f4[_0x37a5e4(0x27a)]:(_0x145614=_0x48755b[_0x2d51f4[_0x37a5e4(0x303)]],_0x48755b[_0x2d51f4[_0x37a5e4(0x303)]]+=_0x2d51f4[_0x37a5e4(0x27a)]);const _0x4905a0=_0x42610d['coins'][_0x37a5e4(0x277)](_0x650ab8=>_0x650ab8['coin']==_0x2d51f4[_0x37a5e4(0x303)]);(!_0x4905a0||_0x4905a0[_0x37a5e4(0x27a)]==0x0)&&(_0x47add9+=(-_0x2d51f4['number']-_0x145614)*_0x2d51f4[_0x37a5e4(0x319)]);}),_0x3fdbcf++;}}_0x42610d[_0x2c1248(0x339)][_0x2c1248(0x272)]((_0x1f6846,_0x37ecfb)=>{const _0x5f55f0=_0x2c1248;_0x48755b[_0x1f6846[_0x5f55f0(0x303)]]&&(_0x1f6846[_0x5f55f0(0x224)]=_0x48755b[_0x1f6846[_0x5f55f0(0x303)]]);}),_0x2d4cf7[_0x2c1248(0x238)]({'date':_0x42610d[_0x2c1248(0x242)],'eur':_0x42610d[_0x2c1248(0x271)],'usd':_0x42610d[_0x2c1248(0x203)],'offset':_0x1df59c[_0x37ca3f],'netoffset':_0x47add9,'coins':_0x42610d[_0x2c1248(0x339)]});});}return _0x2d4cf7;}function _0x2ce9(_0x334011,_0x3cb15a){const _0x5a47a3=_0x5cb9();return _0x2ce9=function(_0x1c85a5,_0x154180){_0x1c85a5=_0x1c85a5-0x1d5;let _0x5cb9ee=_0x5a47a3[_0x1c85a5];return _0x5cb9ee;},_0x2ce9(_0x334011,_0x3cb15a);}function emitPerformance(_0x5d6c6b){const _0xe63b9b=_0x40896d;_0x5d6c6b[_0xe63b9b(0x265)]!==0x0?(proxyEmit('performance',_0x5d6c6b),lastPerformanceEmitted=getDate()):proxyEmit(_0xe63b9b(0x289),[]);}function getPerf(_0x3f84b9,_0x57ecd6){const _0x1062e4=_0x40896d;let _0x42458f=0x0,_0x6c841f=0x0,_0x57ddcb=0x0;_0x3f84b9[_0x1062e4(0x339)][_0x1062e4(0x272)](_0x1f16df=>{const _0x5d165d=_0x1062e4;_0x42458f+=_0x1f16df[_0x5d165d(0x27a)]*_0x1f16df[_0x5d165d(0x319)];});_0x57ecd6&&(_0x42458f+=_0x3f84b9[_0x1062e4(0x364)]);if(config[_0x1062e4(0x205)]==='BTC'||config[_0x1062e4(0x205)]===_0x1062e4(0x20e)||config[_0x1062e4(0x205)]===_0x1062e4(0x2e4))_0x6c841f=_0x42458f*_0x3f84b9['eur'],_0x57ddcb=_0x42458f*_0x3f84b9[_0x1062e4(0x203)];else{if(usdBasecoins[_0x1062e4(0x368)](config[_0x1062e4(0x205)]))_0x6c841f=_0x42458f*_0x3f84b9[_0x1062e4(0x271)]/_0x3f84b9[_0x1062e4(0x203)],_0x57ddcb=_0x42458f;else config[_0x1062e4(0x205)]==='EUR'&&(_0x6c841f=_0x42458f,_0x57ddcb=_0x42458f*_0x3f84b9[_0x1062e4(0x203)]/_0x3f84b9[_0x1062e4(0x271)]);}return[_0x42458f,_0x6c841f,_0x57ddcb];}function getKPIs(_0x3a05d9,_0x1306a7=_0x40896d(0x1ff)){const _0x20c66e=_0x40896d,_0x1351b6=config[_0x20c66e(0x205)],_0x1fbb7a=lastBalances,_0x20a4c0=currentCoins,_0x1fda27=getNormalizedPerformance(),_0x2b5a10=_0x3a05d9==='basecoin'?_0x1351b6:_0x3a05d9===_0x20c66e(0x2e9)||_0x3a05d9===_0x20c66e(0x377)?_0x1306a7:_0x20c66e(0x2ba)+_0x1351b6,_0x1369fd=_0x3a05d9===_0x20c66e(0x34c)?_0x20c66e(0x33a):_0x3a05d9===_0x20c66e(0x377)?_0x20c66e(0x33a):_0x2b5a10+_0x20c66e(0x22d),_0x549915=_0x3a05d9===_0x20c66e(0x34c)||_0x3a05d9===_0x20c66e(0x377)?_0x20c66e(0x33a):_0x2b5a10+'\x20change';let _0x1e60f2=0x0;_0x20a4c0[_0x20c66e(0x272)](_0x3f2604=>{const _0x1af2ef=_0x20c66e;_0x1e60f2+=_0x3f2604[_0x1af2ef(0x27a)]*_0x3f2604[_0x1af2ef(0x2e5)];});if(_0x3a05d9===_0x20c66e(0x2e9)||_0x3a05d9==='net-fiat'){if(_0x1351b6===_0x20c66e(0x235)||_0x1351b6===_0x20c66e(0x20e)||_0x1351b6==='PAXG')_0x1e60f2=_0x1e60f2*(_0x1306a7===_0x20c66e(0x1ff)?_0x1fbb7a[_0x20c66e(0x271)]:_0x1fbb7a[_0x20c66e(0x203)]);else{if(usdBasecoins[_0x20c66e(0x368)](_0x1351b6))_0x1e60f2=_0x1e60f2*(_0x1306a7===_0x20c66e(0x1ff)?_0x1fbb7a[_0x20c66e(0x271)]/_0x1fbb7a[_0x20c66e(0x203)]:0x1);else _0x1351b6===_0x20c66e(0x1ff)&&(_0x1e60f2=_0x1e60f2*(_0x1306a7===_0x20c66e(0x1ff)?0x1:_0x1fbb7a[_0x20c66e(0x203)]/_0x1fbb7a[_0x20c66e(0x271)]));}}let _0x4e5932;if(_0x1e60f2!==0x0){if(_0x3a05d9===_0x20c66e(0x205))_0x4e5932=(_0x1e60f2/startingBalances[_0x20c66e(0x205)]-0x1)*0x64;else{if(_0x1306a7===_0x20c66e(0x1ff))_0x4e5932=(_0x1e60f2/startingBalances['eur']-0x1)*0x64;else _0x4e5932=(_0x1e60f2/startingBalances['usd']-0x1)*0x64;}let _0x4c7580=0x0;if(startingBalances[_0x20c66e(0x339)])_0x20a4c0['forEach'](_0x1526b3=>{const _0x3e5bda=_0x20c66e;let _0x2fc6aa=startingBalances[_0x3e5bda(0x339)][_0x3e5bda(0x277)](_0x15b033=>_0x15b033[_0x3e5bda(0x303)]===_0x1526b3['coin']);if(_0x2fc6aa&&_0x2fc6aa[_0x3e5bda(0x303)]&&_0x1526b3['number']!==0x0)_0x4c7580+=_0x2fc6aa[_0x3e5bda(0x27a)]*_0x1526b3['last'];});let _0x364feb=0x0;if(_0x1fda27['length']!==0x0){let _0x2c68fe=_0x1fda27[_0x1fda27[_0x20c66e(0x265)]-0x1];_0x364feb=_0x2c68fe[_0x20c66e(0x30c)];}_0x4c7580-=_0x364feb;_0x3a05d9==='net-basecoin'&&(_0x4e5932=(_0x1e60f2-_0x4c7580)/startingBalances[_0x20c66e(0x205)]*0x64,_0x1e60f2=_0x1e60f2-_0x4c7580);if(_0x3a05d9===_0x20c66e(0x377)){let _0x117d56=_0x1306a7===_0x20c66e(0x1ff)?startingBalances[_0x20c66e(0x271)]:startingBalances[_0x20c66e(0x203)];if(_0x1351b6===_0x20c66e(0x235)||_0x1351b6==='ETH'||_0x1351b6===_0x20c66e(0x2e4))_0x4c7580=_0x1306a7===_0x20c66e(0x1ff)?_0x4c7580*_0x1fbb7a[_0x20c66e(0x271)]:_0x4c7580*_0x1fbb7a['usd'];else{if(usdBasecoins[_0x20c66e(0x368)](_0x1351b6))_0x4c7580=_0x1306a7===_0x20c66e(0x1ff)?_0x4c7580*_0x1fbb7a[_0x20c66e(0x271)]/_0x1fbb7a[_0x20c66e(0x203)]:_0x4c7580;else _0x1351b6===_0x20c66e(0x1ff)&&(_0x4c7580=_0x1306a7==='EUR'?_0x4c7580:_0x4c7580*_0x1fbb7a[_0x20c66e(0x203)]/_0x1fbb7a[_0x20c66e(0x271)]);}_0x4e5932=(_0x1e60f2-_0x4c7580)/_0x117d56*0x64,_0x1e60f2=_0x1e60f2-_0x4c7580;}if(_0x4e5932){if(_0x4e5932<0x64)_0x4e5932=_0x4e5932['toFixed'](0x2);else{if(_0x4e5932<0x3e8)_0x4e5932=_0x4e5932[_0x20c66e(0x263)](0x1);else _0x4e5932=_0x4e5932[_0x20c66e(0x263)](0x0);}}else _0x4e5932=Number('0')[_0x20c66e(0x263)](0x2);if(_0x1e60f2){if(Math[_0x20c66e(0x2b9)](_0x1e60f2)<0.000001)_0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x2);else{if(Math[_0x20c66e(0x2b9)](_0x1e60f2)<0.1)_0x1e60f2=_0x1e60f2['toFixed'](0x6);else{if(Math[_0x20c66e(0x2b9)](_0x1e60f2)<0x1)_0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x5);else{if(Math[_0x20c66e(0x2b9)](_0x1e60f2)<0xa)_0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x4);else{if(Math[_0x20c66e(0x2b9)](_0x1e60f2)<0x64)_0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x3);else{if(Math['abs'](_0x1e60f2)<0x3e8)_0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x2);else _0x1e60f2=_0x1e60f2[_0x20c66e(0x263)](0x2);}}}}}}else _0x1e60f2=Number('0')[_0x20c66e(0x263)](0x2);}else _0x4e5932=Number('0')['toFixed'](0x2);return{'value':_0x1e60f2,'change':_0x4e5932,'leftTxt':_0x1369fd,'rightTxt':_0x549915};}async function getStartingBalances(_0x3cd7b9,_0x1c7838=!![]){const _0x424cda=_0x40896d;if(_0x3cd7b9[_0x424cda(0x265)]!==0x0){const [_0x54b228,_0x4caa0c,_0x221a09]=getPerf(_0x3cd7b9[0x0],!![]);let _0x5676c8=[];config[_0x424cda(0x24f)][_0x424cda(0x272)](_0x28f550=>{const _0xcc1af1=_0x424cda;let _0x3bd18a=0x0,_0x2e39f1;config['liquidity'][_0xcc1af1(0x272)](_0x5d3065=>{const _0xf1a68d=_0xcc1af1;let _0x47d788=_0x5d3065[_0xf1a68d(0x2ab)]['find'](_0x22882e=>_0x22882e['coin']==_0x28f550[_0xf1a68d(0x303)]);if(_0x47d788){_0x3bd18a+=_0x47d788[_0xf1a68d(0x27a)];if(!_0x2e39f1)_0x2e39f1=_0x47d788[_0xf1a68d(0x319)];}}),_0x5676c8[_0xcc1af1(0x238)]({'coin':_0x28f550['coin'],'number':_0x3bd18a,'initialprice':_0x2e39f1});});const _0x161d92={'basecoin':_0x54b228,'eur':_0x4caa0c,'usd':_0x221a09,'coins':_0x5676c8};if(_0x1c7838)proxyEmit(_0x424cda(0x2a2),_0x161d92);startingBalances=_0x161d92;}}function headlessMode(_0x27e228){const _0x38a2fe=_0x40896d;let _0x1ee826=_0x27e228[_0x38a2fe(0x24f)],_0x49f20d=_0x27e228['threshold'],_0x7815f3=[];for(let _0x7559c7 of _0x1ee826){if(_0x7559c7[_0x38a2fe(0x303)]!=config[_0x38a2fe(0x205)]){if(_0x7559c7['delta']>=_0x49f20d/0x64){if(_0x7559c7['valid'])_0x7815f3[_0x38a2fe(0x238)](_0x7559c7);}else{if(_0x7559c7[_0x38a2fe(0x249)]<=-_0x49f20d/0x64){if(_0x7559c7[_0x38a2fe(0x2fb)])_0x7815f3[_0x38a2fe(0x238)](_0x7559c7);}}}}_0x7815f3['length']>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x7815f3[_0x38a2fe(0x272)](_0x5edb3d=>{const _0x95ecfa=_0x38a2fe;logger[_0x95ecfa(0x257)](_0x95ecfa(0x2f9)+_0x5edb3d['coin']+'\x20'+_0x5edb3d['number']+'\x20'+_0x5edb3d['last']+'\x20'+_0x5edb3d[_0x95ecfa(0x2ae)]+'%\x20'+_0x5edb3d[_0x95ecfa(0x313)]+'%\x20'+(0x64*_0x5edb3d[_0x95ecfa(0x249)])[_0x95ecfa(0x263)](0x2)+'%\x20('+_0x49f20d[_0x95ecfa(0x263)](0x2)+'%)');}),placeOrder(_0x7815f3));}function notifyBalance(_0xe03632){const _0x250287=_0x40896d;let _0x39f054=_0xe03632[_0x250287(0x24f)],_0xa810d=_0xe03632[_0x250287(0x31e)],_0x5b0b79=[];for(let _0x509a07 of _0x39f054){if(_0x509a07[_0x250287(0x303)]!=config['basecoin']){if(_0x509a07[_0x250287(0x249)]>=_0xa810d/0x64){if(_0x509a07['valid'])_0x5b0b79['push'](_0x509a07);}else{if(_0x509a07[_0x250287(0x249)]<=-_0xa810d/0x64){if(_0x509a07['valid'])_0x5b0b79[_0x250287(0x238)](_0x509a07);}}}}if(_0x5b0b79['length']>0x0){let _0x3b33de=_0x5b0b79[_0x250287(0x248)](_0x4c8aa5=>_0x4c8aa5[_0x250287(0x303)]);_0x3b33de[_0x250287(0x21b)]();let _0x59b17d=_0x3b33de['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x250287(0x1ed));lastCoinsToBalance=_0x59b17d;}}function symbolToCoin(_0x393d1d){const _0x5c12af=_0x40896d;let _0x2ae1a3;if(_0x393d1d[_0x5c12af(0x368)]('/'+config[_0x5c12af(0x205)]))_0x2ae1a3=_0x393d1d[_0x5c12af(0x2df)]('/'+config[_0x5c12af(0x205)],'');if(_0x393d1d['includes'](config['basecoin']+'/'))_0x2ae1a3=_0x393d1d[_0x5c12af(0x2df)](config[_0x5c12af(0x205)]+'/','');return _0x2ae1a3;}async function unlockOrders(){const _0x42f5fc=_0x40896d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x42f5fc(0x351)]){logger['debug'](_0x42f5fc(0x226)),lockOrders=ORDERS[_0x42f5fc(0x260)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x53844=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x53844,validateOrdersState=_0x42f5fc(0x224),persistOpenOrders([]),lockOrders=ORDERS[_0x42f5fc(0x2e6)],logger[_0x42f5fc(0x257)](_0x42f5fc(0x1fd));}}async function validateOrders(_0x18045d){const _0x363817=_0x40896d;if(_0x18045d)validateOrdersState=_0x18045d;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x363817(0x2c2)+(lockOrders==0x1?_0x363817(0x36f):lockOrders==0x2?_0x363817(0x2e8):_0x363817(0x1fe)));let _0x42ac25=[],_0x3ad5b3=config[_0x363817(0x216)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x363817(0x236)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x363817(0x351)])return;logger['debug'](_0x363817(0x2f0)+validateOrdersState),lastOrders[_0x363817(0x272)](_0x5cee04=>{const _0x46f893=_0x363817;let _0x2f44e7=![];_0x5cee04[_0x46f893(0x1f0)]>0x0&&(_0x2f44e7=!![]),_0x42ac25[_0x46f893(0x238)](_0x2f44e7),_0x2f44e7&&config[_0x46f893(0x216)]!=_0x46f893(0x2db)&&logHistory(_0x46f893(0x254),_0x46f893(0x2b4)+_0x5cee04[_0x46f893(0x211)]+'\x20'+_0x5cee04[_0x46f893(0x228)]+'\x20#'+formatResult(_0x5cee04['filled'],0x8)+'\x20@'+formatResult(_0x5cee04[_0x46f893(0x319)],0x8));}),_0x42ac25[_0x363817(0x272)]((_0x14f6ad,_0x27e5f0)=>{const _0x36ff45=_0x363817;if(_0x14f6ad)lastOrders[_0x36ff45(0x312)](_0x27e5f0,0x1);}),persistOpenOrders(lastOrders);const _0x4e5ab4=coolingDown?_0x363817(0x1f2):_0x363817(0x275);if(validateOrdersState==_0x363817(0x224)){validateOrdersState=_0x363817(0x1df);if(_0x42ac25[_0x363817(0x368)](![])){if(config[_0x363817(0x216)]==_0x363817(0x2db)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x363817(0x1df)){if(_0x42ac25[_0x363817(0x368)](![])){}else{if(allOrdersPlaced){if(config[_0x363817(0x216)]==_0x363817(0x2db)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x363817(0x346))_0x42ac25['includes'](![])&&(config['ordertype']=='market'?logHistory('success',_0x363817(0x23a)+Math[_0x363817(0x36a)](_0x3ad5b3*validateOrderInterval/0xea60)+_0x363817(0x36d)+_0x4e5ab4):(await cancelOrders(),logHistory(_0x363817(0x2c4),_0x363817(0x2d5)+Math[_0x363817(0x36a)](_0x3ad5b3*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4e5ab4))),await unlockOrders();else{if(validateOrdersState==_0x363817(0x33d)){if(config[_0x363817(0x216)]!=_0x363817(0x2db))logHistory(_0x363817(0x2c4),_0x363817(0x326)+_0x4e5ab4);await unlockOrders();}}}}}async function cancelOrders(){const _0x163438=_0x40896d;lastOrders[_0x163438(0x272)](async _0x511f0f=>{const _0x4a35de=_0x163438;try{const _0x5e34df=await exchange[_0x4a35de(0x34f)](_0x511f0f[_0x4a35de(0x2b1)],_0x511f0f[_0x4a35de(0x211)]);}catch(_0x254fe9){if(_0x254fe9['toString']()[_0x4a35de(0x368)](_0x4a35de(0x251))){}else await handleError(_0x254fe9,_0x4a35de(0x255));}});}async function initCoinResults(_0x572ffa){const _0x285459=_0x40896d;_0x572ffa?logger['debug'](_0x285459(0x258)+_0x572ffa):logger[_0x285459(0x257)](_0x285459(0x33e)),config[_0x285459(0x24f)][_0x285459(0x272)](_0xa64fb2=>{const _0x16c3e5=_0x285459;if(!_0xa64fb2[_0x16c3e5(0x307)]&&_0xa64fb2[_0x16c3e5(0x303)]!=config[_0x16c3e5(0x205)]){const _0x6cc11f=currentCoins[_0x16c3e5(0x277)](_0x38fa87=>_0x38fa87[_0x16c3e5(0x303)]==_0xa64fb2[_0x16c3e5(0x303)]),_0x11bc4f=global['ticker'][noslash(_0xa64fb2['symbol'])];let _0x50ffb2=_0x6cc11f?_0x6cc11f['number']:null,_0x5a0c69=_0xa64fb2[_0x16c3e5(0x1e6)]?0x1/_0x11bc4f:_0x11bc4f,_0x1491ba;config['liquidity'][_0x16c3e5(0x272)](_0x2603a1=>{const _0x8bb285=_0x16c3e5;!_0x1491ba&&(_0x1491ba=_0x2603a1[_0x8bb285(0x2ab)][_0x8bb285(0x277)](_0x2c63ab=>_0x2c63ab[_0x8bb285(0x303)]==_0xa64fb2[_0x8bb285(0x303)]),_0x1491ba&&(_0x50ffb2=_0x1491ba[_0x8bb285(0x27a)],_0x5a0c69=_0x1491ba[_0x8bb285(0x319)]));});let _0x3a98c4=dbCoinResults[_0x16c3e5(0x337)](_0x16c3e5(0x339))[_0x16c3e5(0x277)]({'coin':_0xa64fb2[_0x16c3e5(0x303)]})[_0x16c3e5(0x32a)]();if(!_0x3a98c4){const _0x2e8c04={'coin':_0xa64fb2[_0x16c3e5(0x303)],'number':_0x50ffb2,'breakeven':_0x5a0c69,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x16c3e5(0x339))[_0x16c3e5(0x238)](_0x2e8c04)['write']();}else{if(_0x572ffa&&_0xa64fb2[_0x16c3e5(0x303)]==_0x572ffa){const _0x46d681={'coin':_0xa64fb2[_0x16c3e5(0x303)],'number':_0x50ffb2,'breakeven':_0x5a0c69,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['find']({'coin':_0xa64fb2['coin']})[_0x16c3e5(0x240)](_0x46d681)[_0x16c3e5(0x2a9)]();}}}});}async function updateCoinResults(_0x15dcc0,_0x245b62=![]){const _0x968c25=_0x40896d;let _0x303d6f,_0x5bcc02,_0x5ef7a7,_0x1fe80b,_0x43431b,_0x4cf562,_0x4ad888=dbCoinResults[_0x968c25(0x337)](_0x968c25(0x339))[_0x968c25(0x277)]({'coin':_0x15dcc0[_0x968c25(0x303)]})['value'](),_0x56e36f=![];_0x4ad888&&Object[_0x968c25(0x1eb)](_0x4ad888)[_0x968c25(0x272)](([_0x5908d5,_0x293089])=>{if(_0x293089==null)_0x56e36f=!![];});(!_0x4ad888||_0x56e36f)&&(await initCoinResults(_0x15dcc0[_0x968c25(0x303)]),_0x4ad888=dbCoinResults[_0x968c25(0x337)]('coins')[_0x968c25(0x277)]({'coin':_0x15dcc0[_0x968c25(0x303)]})['value']());_0x15dcc0['reverse']&&(_0x4cf562={'filled':_0x15dcc0[_0x968c25(0x1f0)]*_0x15dcc0['price'],'amount':_0x15dcc0[_0x968c25(0x1f0)]*_0x15dcc0[_0x968c25(0x319)],'side':_0x15dcc0['side']==_0x968c25(0x2ec)?_0x968c25(0x2a3):_0x968c25(0x2ec),'price':0x1/_0x15dcc0[_0x968c25(0x319)]},_0x15dcc0={..._0x15dcc0,..._0x4cf562});_0x245b62?_0x5bcc02=_0x15dcc0[_0x968c25(0x228)]==_0x968c25(0x2a3)?_0x4ad888[_0x968c25(0x27a)]+_0x15dcc0[_0x968c25(0x1f0)]:_0x4ad888[_0x968c25(0x27a)]-_0x15dcc0[_0x968c25(0x1f0)]:_0x5bcc02=await getCoinNumber(_0x15dcc0['coin']);if(_0x15dcc0[_0x968c25(0x36c)]&&_0x15dcc0[_0x968c25(0x36c)][_0x968c25(0x2d0)]==config[_0x968c25(0x205)])_0x303d6f=_0x15dcc0[_0x968c25(0x36c)][_0x968c25(0x2ce)];else{if(_0x15dcc0['fee']&&_0x15dcc0['fee']['currency']==_0x968c25(0x317)&&!_0x245b62&&config[_0x968c25(0x205)]!=_0x968c25(0x2e4))_0x303d6f=_0x15dcc0['fee'][_0x968c25(0x2ce)]*global['ticker'][_0x968c25(0x317)+config[_0x968c25(0x205)]];else _0x303d6f=defaultFee*_0x15dcc0[_0x968c25(0x1f0)]*_0x15dcc0[_0x968c25(0x319)];}_0x15dcc0[_0x968c25(0x228)]==_0x968c25(0x2a3)?(_0x5ef7a7=_0x5bcc02!=0x0?(_0x4ad888[_0x968c25(0x1f1)]*_0x4ad888[_0x968c25(0x27a)]+_0x15dcc0[_0x968c25(0x319)]*(_0x5bcc02-_0x4ad888[_0x968c25(0x27a)])+_0x303d6f)/_0x5bcc02:0x0,_0x1fe80b=_0x4ad888[_0x968c25(0x270)]):(_0x5ef7a7=_0x5bcc02!=0x0?(_0x4ad888[_0x968c25(0x1f1)]*_0x4ad888[_0x968c25(0x27a)]-_0x15dcc0[_0x968c25(0x319)]*(_0x4ad888[_0x968c25(0x27a)]-_0x5bcc02)+_0x303d6f)/_0x5bcc02:0x0,_0x1fe80b=_0x4ad888[_0x968c25(0x270)]+(_0x15dcc0[_0x968c25(0x319)]-_0x4ad888['breakeven'])*_0x15dcc0[_0x968c25(0x1f0)]);_0x43431b=(_0x15dcc0[_0x968c25(0x319)]-_0x5ef7a7-_0x303d6f/_0x15dcc0['filled'])*_0x5bcc02;let _0x1a4ece={'coin':_0x15dcc0[_0x968c25(0x303)],'number':_0x5bcc02,'breakeven':formatResult(_0x5ef7a7,0x8),'realized':formatResult(_0x1fe80b,0x8),'unrealized':formatResult(_0x43431b,0x8),'fees':formatResult(_0x4ad888[_0x968c25(0x322)]+_0x303d6f,0x8),'sells':_0x15dcc0['side']==_0x968c25(0x2ec)?_0x4ad888[_0x968c25(0x332)]+0x1:_0x4ad888['sells'],'buys':_0x15dcc0[_0x968c25(0x228)]==_0x968c25(0x2a3)?_0x4ad888[_0x968c25(0x2f3)]+0x1:_0x4ad888[_0x968c25(0x2f3)]};dbCoinResults['get'](_0x968c25(0x339))['find']({'coin':_0x15dcc0['coin']})[_0x968c25(0x240)](_0x1a4ece)['write']();if(!_0x245b62){if(_0x15dcc0[_0x968c25(0x36c)]&&_0x15dcc0['fee'][_0x968c25(0x2d0)]==_0x968c25(0x317)){const _0x75bfa0=currentCoins[_0x968c25(0x277)](_0x410501=>_0x410501[_0x968c25(0x303)]==_0x968c25(0x317));if(_0x75bfa0){let _0x5b20ae=dbCoinResults[_0x968c25(0x337)](_0x968c25(0x339))['find']({'coin':_0x968c25(0x317)})[_0x968c25(0x32a)]();_0x1a4ece={..._0x5b20ae,'number':_0x75bfa0['number']},dbCoinResults[_0x968c25(0x337)](_0x968c25(0x339))[_0x968c25(0x277)]({'coin':_0x968c25(0x317)})[_0x968c25(0x240)](_0x1a4ece)[_0x968c25(0x2a9)]();}}}}async function placeOrder(_0x5f56c5){const _0x1d40be=_0x40896d,_0x3ae8c0=config[_0x1d40be(0x216)]==_0x1d40be(0x2db)?_0x1d40be(0x2db):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1d40be(0x351)],allOrdersPlaced=![],validateOrdersState=_0x1d40be(0x224);let _0x275690=![];lastOrders=[];for(const _0x34557e of _0x5f56c5){let _0x21ab26,_0x39a85a,_0x35485e,_0x56650c,_0x209a9f,_0x132a33=_0x34557e['symbol'];try{const _0x5c90f4=await exchange[_0x1d40be(0x1ec)](_0x132a33);_0x21ab26=_0x34557e[_0x1d40be(0x1e6)]?0x1/_0x34557e[_0x1d40be(0x2e5)]:_0x34557e[_0x1d40be(0x2e5)],_0x39a85a=_0x5c90f4[_0x1d40be(0x27b)],_0x35485e=_0x5c90f4[_0x1d40be(0x316)];_0x34557e['reverse']?(_0x56650c=_0x34557e[_0x1d40be(0x228)]==_0x1d40be(0x2a3)?'sell':'buy',_0x209a9f=Math[_0x1d40be(0x2b9)](_0x34557e[_0x1d40be(0x29e)])/_0x21ab26):(_0x56650c=_0x34557e[_0x1d40be(0x228)],_0x209a9f=Math['abs'](_0x34557e[_0x1d40be(0x29e)]));_0x3ae8c0==_0x1d40be(0x288)&&(config['ordertype']=='limit-high'&&(_0x21ab26=_0x56650c==_0x1d40be(0x2a3)?_0x39a85a:_0x35485e),config[_0x1d40be(0x216)]=='limit-low'&&(_0x21ab26=_0x56650c==_0x1d40be(0x2a3)?_0x35485e:_0x39a85a));_0x209a9f=formatResult(_0x209a9f,0x8),_0x21ab26=formatResult(_0x21ab26,0x8);const _0x6baac0=_0x56650c=='sell'?config[_0x1d40be(0x2cd)]?String[_0x1d40be(0x250)]('0x'+config[_0x1d40be(0x2cd)])+'\x20':'':config[_0x1d40be(0x2a6)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x130df7=_0x3ae8c0==_0x1d40be(0x2db)?_0x1d40be(0x314):config[_0x1d40be(0x216)]==_0x1d40be(0x1ea)?_0x1d40be(0x2a4):'Limit\x20(low-margin)',_0x1d0e2a=(Math[_0x1d40be(0x24d)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x1d40be(0x287)]();lastOrders[_0x1d40be(0x238)]({'customId':_0x1d0e2a,'symbol':_0x132a33,'coin':_0x34557e[_0x1d40be(0x303)],'amount':_0x209a9f,'price':_0x21ab26,'side':_0x56650c,'reverse':_0x34557e[_0x1d40be(0x1e6)],'filled':0x0});if(_0x3ae8c0==_0x1d40be(0x2db))logHistory(_0x1d40be(0x254),''+_0x6baac0+_0x130df7+_0x1d40be(0x34a)+_0x132a33+'\x20'+_0x56650c+'\x20#'+formatResult(_0x209a9f,0x8)+'\x20@'+formatResult(_0x21ab26,0x8));else logHistory('order',''+_0x6baac0+_0x130df7+_0x1d40be(0x34a)+_0x132a33+'\x20'+_0x56650c+'\x20#'+formatResult(_0x209a9f,0x8)+'\x20@'+formatResult(_0x21ab26,0x8));let _0x91c2d8;_0x3ae8c0==_0x1d40be(0x2db)?_0x56650c==_0x1d40be(0x2a3)&&['Bybit',_0x1d40be(0x325),_0x1d40be(0x28c),_0x1d40be(0x2f7),_0x1d40be(0x367)][_0x1d40be(0x368)](config[_0x1d40be(0x218)])?_0x91c2d8=await exchange['createOrder'](_0x132a33,_0x3ae8c0,_0x56650c,_0x209a9f,_0x21ab26):_0x91c2d8=await exchange[_0x1d40be(0x306)](_0x132a33,_0x3ae8c0,_0x56650c,_0x209a9f,undefined):_0x91c2d8=await exchange['createOrder'](_0x132a33,_0x3ae8c0,_0x56650c,_0x209a9f,_0x21ab26);logger[_0x1d40be(0x257)](_0x1d40be(0x20f)+_0x91c2d8['id']+_0x1d40be(0x35c)+_0x1d0e2a);const _0x3606f3=lastOrders['length']-0x1;if(_0x3606f3>=0x0&&lastOrders[_0x3606f3][_0x1d40be(0x359)]==_0x1d0e2a){lastOrders[_0x3606f3][_0x1d40be(0x2b1)]=_0x91c2d8['id'];if(_0x91c2d8['amount'])lastOrders[_0x3606f3][_0x1d40be(0x231)]=_0x91c2d8[_0x1d40be(0x231)];if(_0x91c2d8[_0x1d40be(0x319)])lastOrders[_0x3606f3][_0x1d40be(0x319)]=_0x91c2d8[_0x1d40be(0x319)];lastOrders[_0x3606f3]['fee']=_0x91c2d8[_0x1d40be(0x36c)];}if(config[_0x1d40be(0x375)]!=0x0){let _0x46092a=null;if(cooldownTracker[_0x1d40be(0x265)]==config[_0x1d40be(0x375)]-0x1)_0x46092a=cooldownTracker[_0x1d40be(0x209)]();const _0x2b8ccb=getTimeStamp();cooldownTracker[_0x1d40be(0x238)](_0x2b8ccb);if(_0x46092a){const _0x1b5428=fns['differenceInSeconds'](new Date(_0x2b8ccb),new Date(_0x46092a));if(_0x1b5428<cooldownInterval){logHistory(_0x1d40be(0x239),_0x1d40be(0x2de)+config[_0x1d40be(0x375)]+_0x1d40be(0x21c)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1d40be(0x35f)),coolingDown=!![];break;}}}}catch(_0x575194){if(_0x575194['toString']()[_0x1d40be(0x368)](_0x1d40be(0x280)))lastOrders=lastOrders[_0x1d40be(0x1e8)](_0x4facb6=>_0x4facb6['symbol']!=_0x132a33),logHistory(_0x1d40be(0x239),_0x1d40be(0x2b8)+_0x132a33),_0x275690=!![];else{if(_0x575194[_0x1d40be(0x287)]()[_0x1d40be(0x368)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x1d40be(0x1e8)](_0x1c995e=>_0x1c995e[_0x1d40be(0x211)]!=_0x132a33),logHistory(_0x1d40be(0x239),_0x1d40be(0x355)+_0x132a33),_0x275690=!![];else{if(_0x575194['toString']()['includes'](_0x1d40be(0x324)))lastOrders=lastOrders[_0x1d40be(0x1e8)](_0x2685e5=>_0x2685e5[_0x1d40be(0x211)]!=_0x132a33),logHistory(_0x1d40be(0x239),_0x1d40be(0x27c)+_0x132a33),logger[_0x1d40be(0x257)](_0x575194),_0x275690=!![];else _0x575194['toString']()[_0x1d40be(0x368)](_0x1d40be(0x233))?(lastOrders=lastOrders['filter'](_0x592e0f=>_0x592e0f[_0x1d40be(0x211)]!=_0x132a33),logHistory(_0x1d40be(0x239),_0x1d40be(0x2b8)+_0x132a33),_0x275690=!![]):(lastOrders=lastOrders[_0x1d40be(0x1e8)](_0x381371=>_0x381371[_0x1d40be(0x211)]!=_0x132a33),await handleError(_0x575194,_0x1d40be(0x31a),_0x132a33));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1d40be(0x265)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x430075=config[_0x1d40be(0x216)]==_0x1d40be(0x2db)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3d911c=_0x1d40be;validateOrders(_0x3d911c(0x346));},_0x430075);}else unlockOrders();_0x275690&&config[_0x1d40be(0x282)]&&(logHistory('error',_0x1d40be(0x266)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1d40be(0x2c4),_0x1d40be(0x2cc)));}else{if(coolingDown)!config[_0x1d40be(0x282)]&&logHistory(_0x1d40be(0x239),_0x1d40be(0x278));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x1d40be(0x282)]&&(config[_0x1d40be(0x216)]==_0x1d40be(0x2db)?logHistory(_0x1d40be(0x239),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x1d40be(0x36e))));}}function persistOpenOrders(_0x50318c){const _0x69f34f=_0x40896d,_0x2b8448={...config,'openOrders':_0x50318c};let _0x36136f=dbConfig[_0x69f34f(0x337)]('bot')[_0x69f34f(0x277)]({'botID':botID})[_0x69f34f(0x32a)]();_0x36136f&&dbConfig[_0x69f34f(0x337)]('bot')[_0x69f34f(0x277)]({'botID':botID})['assign'](_0x2b8448)[_0x69f34f(0x2a9)]();}function restoreOrders(){const _0x34cafe=_0x40896d;let _0x7b348b;config[_0x34cafe(0x296)]&&allOpenOrders['forEach'](_0x3f813e=>{const _0x5ce416=_0x34cafe,_0x5a41f4=config[_0x5ce416(0x296)][_0x5ce416(0x277)](_0x3725e8=>_0x3725e8['orderId']==_0x3f813e['id']);_0x5a41f4&&(lastOrders['push'](_0x5a41f4),_0x7b348b=_0x3f813e[_0x5ce416(0x279)]);});if(lastOrders[_0x34cafe(0x265)]>0x0){lockOrders=ORDERS[_0x34cafe(0x351)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x121543=new Date()[_0x34cafe(0x2fd)](),_0x157790=config[_0x34cafe(0x216)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x34cafe(0x236)]*0x3c*0x3e8;if(_0x7b348b+_0x157790>_0x121543){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xb00361=_0x34cafe;validateOrders(_0xb00361(0x346));},_0x7b348b+_0x157790-_0x121543);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4b2e17=_0x40896d;if(!coinsLoaded){process[_0x4b2e17(0x336)]({'telegrammsg':_0x4b2e17(0x360)},_0xa1ca75=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x30a7e5='';if(config[_0x4b2e17(0x1e5)])_0x30a7e5=_0x4b2e17(0x284)+config[_0x4b2e17(0x273)]+_0x4b2e17(0x1f3);else _0x30a7e5=_0x4b2e17(0x262)+botID+_0x4b2e17(0x1f3);const _0x43dbe0=getKPIs('basecoin'),_0x34fd57=getKPIs(_0x4b2e17(0x2e9),config[_0x4b2e17(0x2e9)]),_0x4685e3=getKPIs(_0x4b2e17(0x34c)),_0x7f3bb8=getKPIs(_0x4b2e17(0x377),config[_0x4b2e17(0x2e9)]);_0x30a7e5+='<pre>',_0x30a7e5+=_0x43dbe0['leftTxt']+_0x4b2e17(0x340)+_0x43dbe0['value']+'\x0a',_0x30a7e5+=_0x43dbe0[_0x4b2e17(0x219)]+':\x20'+_0x43dbe0[_0x4b2e17(0x2f4)]+'%\x0a',_0x30a7e5+=_0x34fd57[_0x4b2e17(0x338)]+_0x4b2e17(0x340)+_0x34fd57[_0x4b2e17(0x32a)]+'\x0a',_0x30a7e5+=_0x34fd57[_0x4b2e17(0x219)]+':\x20'+_0x34fd57[_0x4b2e17(0x2f4)]+'%\x0a',_0x30a7e5+=_0x4685e3['leftTxt']+':\x20'+_0x4685e3[_0x4b2e17(0x32a)]+'\x20('+config[_0x4b2e17(0x205)]+')\x0a',_0x30a7e5+=_0x4685e3[_0x4b2e17(0x219)]+':\x20'+_0x4685e3[_0x4b2e17(0x2f4)]+_0x4b2e17(0x2d8)+config[_0x4b2e17(0x205)]+')\x0a',_0x30a7e5+=_0x7f3bb8[_0x4b2e17(0x338)]+':\x20'+_0x7f3bb8['value']+'\x20('+config[_0x4b2e17(0x2e9)]+')\x0a',_0x30a7e5+=_0x7f3bb8['rightTxt']+':\x20'+_0x7f3bb8['change']+_0x4b2e17(0x2d8)+config['fiat']+')\x0a',_0x30a7e5+=_0x4b2e17(0x2da),process[_0x4b2e17(0x336)]({'telegrammsg':_0x30a7e5},_0x151877=>{});}async function sendPortfolioTelegram(){const _0x3c9a31=_0x40896d;if(!coinsLoaded){process[_0x3c9a31(0x336)]({'telegrammsg':_0x3c9a31(0x360)},_0x4223e2=>{});return;}let _0x5f5dca='';if(config[_0x3c9a31(0x1e5)])_0x5f5dca=_0x3c9a31(0x284)+config[_0x3c9a31(0x273)]+_0x3c9a31(0x2f2);else _0x5f5dca=_0x3c9a31(0x262)+botID+_0x3c9a31(0x2f2);_0x5f5dca+=_0x3c9a31(0x281),_0x5f5dca+=_0x3c9a31(0x26f),_0x5f5dca+=_0x3c9a31(0x2c8),_0x5f5dca+=_0x3c9a31(0x26f),currentCoins[_0x3c9a31(0x272)](_0x2446d1=>{const _0x1254c1=_0x3c9a31;_0x5f5dca+=_0x2446d1['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x2446d1[_0x1254c1(0x2ae)],0x2,0x6)+'|\x20'+formatPad(_0x2446d1[_0x1254c1(0x313)],0x2,0x6)+'|\x20'+formatPad(_0x2446d1['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5f5dca+='</pre>',process[_0x3c9a31(0x336)]({'telegrammsg':_0x5f5dca},_0x1fec1a=>{});}function formatPad(_0x575108,_0x308319,_0x132ee9){const _0x5aecaa=_0x40896d,_0x1d60c0=formatResultString(_0x575108,_0x308319);return _0x1d60c0?_0x1d60c0[_0x5aecaa(0x320)](_0x132ee9):''['padStart'](_0x132ee9);}function logHistory(_0x32f72e,_0x1d47ce,_0x41464d=''){const _0x4b52b9=_0x40896d;logger[_0x4b52b9(0x292)](''+_0x1d47ce);let _0x1c4226={'time':getTimeStamp(),'type':_0x32f72e,'event':_0x1d47ce};dbLogs['get'](_0x4b52b9(0x225))['push'](_0x1c4226)[_0x4b52b9(0x2a9)]();if(_0x41464d=='')_0x41464d=_0x1d47ce;proxyEmit('event',{'log':_0x1c4226,'summary':_0x41464d}),process[_0x4b52b9(0x336)]({'telegram':{..._0x1c4226,'botname':config['botname'],'showname':config[_0x4b52b9(0x1e5)]}},_0x17b9c5=>{});}function emitHistory(_0x55a829={}){const _0x355275=_0x40896d;Object[_0x355275(0x378)](_0x55a829)[_0x355275(0x265)]==0x0&&(_0x55a829={'type':[_0x355275(0x254),_0x355275(0x1dc)],'event':'','page':0x1});if(_0x55a829['type'][_0x355275(0x368)](_0x355275(0x1dc)))_0x55a829[_0x355275(0x32e)][_0x355275(0x312)](_0x55a829[_0x355275(0x32e)][_0x355275(0x350)](_0x355275(0x1dc)),0x1,_0x355275(0x239),_0x355275(0x369),_0x355275(0x2c4));if(dbLogs['has'](_0x355275(0x225))[_0x355275(0x32a)]()){let _0x2edbfb=dbLogs[_0x355275(0x337)](_0x355275(0x225))[_0x355275(0x1e8)](_0x2fc20c=>{const _0x2fbc4d=_0x355275;if(_0x55a829[_0x2fbc4d(0x32e)][_0x2fbc4d(0x265)]==0x0)return![];else return _0x55a829[_0x2fbc4d(0x32e)][_0x2fbc4d(0x368)](_0x2fc20c[_0x2fbc4d(0x32e)]);})[_0x355275(0x1e8)](_0x5388fc=>{const _0x5ce920=_0x355275;if(_0x55a829['event']=='')return!![];else return _0x5388fc['event']['toLowerCase']()[_0x5ce920(0x368)](_0x55a829[_0x5ce920(0x1dc)][_0x5ce920(0x1e3)]());})['sortBy'](_0x355275(0x362)),_0x38709b=_0x2edbfb[_0x355275(0x32a)]()[_0x355275(0x265)];_0x2edbfb=_0x2edbfb[_0x355275(0x1e6)]()[_0x355275(0x361)]((_0x55a829[_0x355275(0x2a8)]-0x1)*logPageSize,_0x55a829[_0x355275(0x2a8)]*logPageSize-0x1)[_0x355275(0x1e6)]()[_0x355275(0x32a)](),proxyEmit('event-history',{'logs':_0x2edbfb,'total':_0x38709b});}else proxyEmit(_0x355275(0x200),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x10c8a7){const _0xb3ff01=_0x40896d;if(dbLogs[_0xb3ff01(0x2bf)](_0xb3ff01(0x225))[_0xb3ff01(0x32a)]()){const _0x4f16ac=dbLogs[_0xb3ff01(0x337)](_0xb3ff01(0x225))[_0xb3ff01(0x28a)](_0xb3ff01(0x362))[_0xb3ff01(0x1e8)](_0x450663=>{const _0xba422a=_0xb3ff01;return _0x450663[_0xba422a(0x32e)]==_0xba422a(0x254);})[_0xb3ff01(0x32a)]();dbLogs['get']('logs')[_0xb3ff01(0x1fa)]()[_0xb3ff01(0x2a9)](),dbLogs[_0xb3ff01(0x337)](_0xb3ff01(0x225))[_0xb3ff01(0x240)](_0x4f16ac)[_0xb3ff01(0x2a9)](),emitHistory(_0x10c8a7);}}async function pauseBot(_0x57539c=pauseBotInterval){const _0x40a241=_0x40896d,_0x4b4e3b=new Date()[_0x40a241(0x2fd)]();if(!lastErrorShown||_0x4b4e3b-lastErrorShown>=_0x57539c){lastErrorShown=_0x4b4e3b;!lastBotPause?(lastBotPause=_0x4b4e3b,consecutivePauses=0x1):(_0x4b4e3b-lastBotPause-_0x57539c<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x40a241(0x336)]({'stop':'restart'},_0x48c883=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x57539c),botPaused=![],reset(!![]);}}}async function killBot(){const _0x58cdf6=_0x40896d;botPaused=!![],await sleep(0x3e8),process[_0x58cdf6(0x336)]({'stop':_0x58cdf6(0x31d)},_0x3b8572=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5eec8e,_0xdcff32){const _0x5abc0e=_0x40896d;if(botPaused)return;const _0x3f74b4=config[_0x5abc0e(0x218)]||_0x5abc0e(0x305);if(_0xdcff32)logger['debug'](_0x5abc0e(0x2a5)+_0xdcff32);const _0x3b312b=()=>{const _0x136221=_0x5abc0e;loading[_0x136221(0x239)]=!![],emitLoadingProgress();};if(_0x5eec8e[_0x5abc0e(0x287)]()[_0x5abc0e(0x368)](_0x5abc0e(0x2a7)))logHistory(_0x5abc0e(0x239),_0x3f74b4+_0x5abc0e(0x2ed)),_0x3b312b();else{if(_0x5eec8e[_0x5abc0e(0x287)]()[_0x5abc0e(0x368)](_0x5abc0e(0x2ff)))logHistory(_0x5abc0e(0x239),_0x3f74b4+_0x5abc0e(0x2bb)),_0x3b312b();else _0x5eec8e[_0x5abc0e(0x287)]()['includes'](_0x5abc0e(0x2ea))?(logHistory('error',_0x3f74b4+_0x5abc0e(0x1f9)),logHistory(_0x5abc0e(0x239),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x3b312b()):await handleError(_0x5eec8e,null);}}async function handleError(_0x2159a7,_0x232c0a,_0x52c610=''){const _0x35e9be=_0x40896d;if(botPaused)return;const _0x20bd83=config['exchange']||'Exchange';if(_0x232c0a)logger[_0x35e9be(0x257)](_0x35e9be(0x2a5)+_0x232c0a);if(_0x2159a7['toString']()[_0x35e9be(0x368)]('DDoSProtection')||_0x2159a7['toString']()[_0x35e9be(0x368)](_0x35e9be(0x227)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x2eb)+pauseBotMsg),await pauseBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x22b))||_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x295)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x2e3)+pauseBotMsg),await pauseBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x2b5)))logHistory(_0x35e9be(0x239),_0x20bd83+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x213)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x285)+pauseBotMsg),await pauseBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x29d)))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x35e9be(0x21a)),await killBot();else{if(_0x2159a7[_0x35e9be(0x287)]()['includes'](_0x35e9be(0x20d)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x2aa)+pauseBotMsgLong),logHistory(_0x35e9be(0x239),_0x35e9be(0x2c5)),await pauseBot(pauseBotIntervalLong);else{if(_0x2159a7 instanceof ccxt['NetworkError'])logHistory('error',_0x20bd83+'\x20network\x20error'+pauseBotMsg),logger['debug'](_0x35e9be(0x358),_0x2159a7),await pauseBot();else{if(_0x2159a7[_0x35e9be(0x287)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x35e9be(0x239),_0x20bd83+'\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x35e9be(0x21a)),await killBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x2ff)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x331)),logHistory('error',_0x35e9be(0x21a)),await killBot();else{if(_0x2159a7[_0x35e9be(0x287)]()[_0x35e9be(0x368)](_0x35e9be(0x2ea)))logHistory(_0x35e9be(0x239),_0x20bd83+_0x35e9be(0x31c)),logHistory(_0x35e9be(0x239),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2159a7[_0x35e9be(0x287)]()['includes'](_0x35e9be(0x26a)))logHistory('error',_0x20bd83+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory('error',_0x35e9be(0x21a)),await killBot();else{if(_0x2159a7['toString']()['includes']('InsufficientFunds'))logHistory(_0x35e9be(0x239),_0x35e9be(0x2d6)+_0x52c610);else _0x2159a7 instanceof ccxt[_0x35e9be(0x2d2)]?(logHistory('error',_0x20bd83+'\x20exchange\x20error'),logger[_0x35e9be(0x257)](_0x35e9be(0x358),_0x2159a7)):(logHistory('error',_0x35e9be(0x2ee)+pauseBotMsg),logger['debug'](_0x35e9be(0x358),_0x2159a7),await pauseBot());}}}}}}}}}}}}function formatResult(_0x3d3417,_0x4cfbf7){const _0x2184d3=_0x40896d;return parseFloat(_0x3d3417[_0x2184d3(0x263)](_0x4cfbf7));}function formatResultTruncate(_0x1f279f,_0x28275c){const _0x242b5d=_0x40896d;let _0x27ef82=formatResultString(_0x1f279f,0xa),_0x395cb0=_0x27ef82[_0x242b5d(0x350)]('.');return _0x395cb0!=-0x1&&(_0x27ef82=_0x27ef82[_0x242b5d(0x361)](0x0,_0x395cb0+_0x28275c+0x1)),Number(_0x27ef82);}function formatResultString(_0x42d61e,_0x476c01){const _0x410d40=_0x40896d;let _0x378891;if(!(''+_0x42d61e)[_0x410d40(0x368)]('e'))_0x378891=+(Math[_0x410d40(0x36a)](_0x42d61e+'e+'+_0x476c01)+'e-'+_0x476c01);else{let _0x44a9f5=(''+_0x42d61e)['split']('e'),_0x599f5c='';+_0x44a9f5[0x1]+_0x476c01>0x0&&(_0x599f5c='+'),_0x378891=+(Math[_0x410d40(0x36a)](+_0x44a9f5[0x0]+'e'+_0x599f5c+(+_0x44a9f5[0x1]+_0x476c01))+'e-'+_0x476c01);}return Number(_0x378891)[_0x410d40(0x263)](_0x476c01);}function getServerTime(){const _0x164e72=_0x40896d,_0x32f3eb=new Date();return _0x32f3eb[_0x164e72(0x1ee)]()+'/'+(_0x32f3eb[_0x164e72(0x323)]()+0x1)[_0x164e72(0x287)]()[_0x164e72(0x320)](0x2,'0')+'/'+_0x32f3eb['getDate']()[_0x164e72(0x287)]()[_0x164e72(0x320)](0x2,'0')+'\x20'+_0x32f3eb['getHours']()[_0x164e72(0x287)]()[_0x164e72(0x320)](0x2,'0')+':'+_0x32f3eb[_0x164e72(0x21e)]()[_0x164e72(0x287)]()[_0x164e72(0x320)](0x2,'0')+':'+_0x32f3eb['getSeconds']()['toString']()[_0x164e72(0x320)](0x2,'0');}function getTimeStamp(){const _0x1ffb3f=_0x40896d,_0x22e697=shiftedTime();return _0x22e697['getFullYear']()+'/'+(_0x22e697[_0x1ffb3f(0x323)]()+0x1)['toString']()[_0x1ffb3f(0x320)](0x2,'0')+'/'+_0x22e697[_0x1ffb3f(0x23b)]()[_0x1ffb3f(0x287)]()[_0x1ffb3f(0x320)](0x2,'0')+'\x20'+_0x22e697[_0x1ffb3f(0x1da)]()[_0x1ffb3f(0x287)]()['padStart'](0x2,'0')+':'+_0x22e697[_0x1ffb3f(0x21e)]()[_0x1ffb3f(0x287)]()['padStart'](0x2,'0')+':'+_0x22e697[_0x1ffb3f(0x25c)]()[_0x1ffb3f(0x287)]()['padStart'](0x2,'0');}function getDate(){const _0x5a98fb=_0x40896d,_0x27baa6=shiftedTime();return _0x27baa6[_0x5a98fb(0x1ee)]()+'/'+(_0x27baa6['getMonth']()+0x1)[_0x5a98fb(0x287)]()[_0x5a98fb(0x320)](0x2,'0')+'/'+_0x27baa6['getDate']()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x2bc77a=_0x40896d,_0x1e9e60=shiftedTime();return _0x1e9e60[_0x2bc77a(0x1da)]()[_0x2bc77a(0x287)]()[_0x2bc77a(0x320)](0x2,'0');}function sleep(_0x17cb84){return new Promise(_0x18c8b4=>setTimeout(_0x18c8b4,_0x17cb84));}function shiftedTime(){const _0x2a934a=_0x40896d,_0x17b032=new Date();let _0x256195=_0x17b032;if(config&&config['timeshift']!==0x0)_0x256195=fns[_0x2a934a(0x1f7)](_0x17b032,{'hours':config['timeshift']});return _0x256195;}function timer(_0x36a6f4){const _0x445936=_0x40896d,_0x47ce45=new Date();!lasttime?console[_0x445936(0x214)](getTimeStamp()+_0x445936(0x33f),_0x36a6f4,_0x47ce45):console[_0x445936(0x214)](getTimeStamp()+_0x445936(0x33f),_0x36a6f4,(_0x47ce45-lasttime)/0x3e8),lasttime=_0x47ce45;}