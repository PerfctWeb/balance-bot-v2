const _0x3ad44d=_0xa7ef;(function(_0x127036,_0x28c1cd){const _0x1f9ec5=_0xa7ef,_0x53486e=_0x127036();while(!![]){try{const _0x41b4cc=-parseInt(_0x1f9ec5(0x2c7))/0x1+-parseInt(_0x1f9ec5(0x244))/0x2*(-parseInt(_0x1f9ec5(0x289))/0x3)+parseInt(_0x1f9ec5(0x21f))/0x4+-parseInt(_0x1f9ec5(0x20b))/0x5+-parseInt(_0x1f9ec5(0x274))/0x6+parseInt(_0x1f9ec5(0x24d))/0x7+parseInt(_0x1f9ec5(0x2eb))/0x8*(-parseInt(_0x1f9ec5(0x262))/0x9);if(_0x41b4cc===_0x28c1cd)break;else _0x53486e['push'](_0x53486e['shift']());}catch(_0x2f0637){_0x53486e['push'](_0x53486e['shift']());}}}(_0x3dd4,0x6747f));const _0x3b5404=function(){let _0x225880=!![];return function(_0x8b1baf,_0x3b4397){const _0x53b05e=_0x225880?function(){const _0x4aa12b=_0xa7ef;if(_0x3b4397){const _0x196c12=_0x3b4397[_0x4aa12b(0x1d9)](_0x8b1baf,arguments);return _0x3b4397=null,_0x196c12;}}:function(){};return _0x225880=![],_0x53b05e;};}(),_0xe4b24d=_0x3b5404(this,function(){const _0x3bab41=_0xa7ef;return _0xe4b24d[_0x3bab41(0x270)]()[_0x3bab41(0x1b4)](_0x3bab41(0x1b2))[_0x3bab41(0x270)]()['constructor'](_0xe4b24d)['search'](_0x3bab41(0x1b2));});_0xe4b24d();'use strict';const ccxt=require(_0x3ad44d(0x28c)),low=require(_0x3ad44d(0x201)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3ad44d(0x2c6)),Crypt=require(_0x3ad44d(0x25e))['Crypt'],util=require(_0x3ad44d(0x2f8)),argv=require(_0x3ad44d(0x1ba))(process[_0x3ad44d(0x214)][_0x3ad44d(0x1e2)](0x2))[_0x3ad44d(0x214)],path=require(_0x3ad44d(0x26d));let exchange;global[_0x3ad44d(0x2c5)]={},global[_0x3ad44d(0x294)]={};const usdBasecoins=[_0x3ad44d(0x1ad),'BUSD',_0x3ad44d(0x1eb),_0x3ad44d(0x1f5),'USDC',_0x3ad44d(0x215)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3ad44d(0x1fd)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3ad44d(0x296)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3ad44d(0x2b0)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3ad44d(0x1d3))[_0x3ad44d(0x2ec)],botID=process['argv'][0x2]||_0x3ad44d(0x1cf),pattern=/^[0-9]{3}$/;!pattern[_0x3ad44d(0x20c)](botID)&&(console[_0x3ad44d(0x2df)](_0x3ad44d(0x22f)+botID+_0x3ad44d(0x24a)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x3ad44d(0x2d8)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x3ad44d(0x2bd)](logspath+_0x3ad44d(0x266),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x3ad44d(0x19a)](configpath);!fs[_0x3ad44d(0x210)](logspath)&&fs[_0x3ad44d(0x19a)](logspath);const configfile=configpath+_0x3ad44d(0x202)+botID+_0x3ad44d(0x21a),logfile=configpath+'bot-'+botID+_0x3ad44d(0x2fe),performancefile=configpath+_0x3ad44d(0x202)+botID+_0x3ad44d(0x281),coinresultsfile=configpath+_0x3ad44d(0x202)+botID+_0x3ad44d(0x2ff),settingsfile=configpath+_0x3ad44d(0x1ef),securefile=configpath+_0x3ad44d(0x1b0),configbackuppath=configpath+_0x3ad44d(0x315),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x3ad44d(0x2d6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3ad44d(0x1b7)]({'data':[],'version':serverversion})[_0x3ad44d(0x2d6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3ad44d(0x1b7)]({'bot':[],'version':serverversion})[_0x3ad44d(0x2d6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3ad44d(0x1b7)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3ad44d(0x1a9),'rsaStandard':_0x3ad44d(0x1f2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x100c6e=>{const _0x3dccf0=_0x3ad44d;console[_0x3dccf0(0x2df)](_0x100c6e);},'simple':_0x118fda=>{const _0x26d92c=_0x3ad44d;console[_0x26d92c(0x2df)](_0x118fda),loggerfile[_0x26d92c(0x2d6)](util[_0x26d92c(0x231)](_0x118fda)+'\x0a');},'full':async(_0x545643,_0xb954bd='')=>{const _0x241410=_0x3ad44d;let _0x157e95;if(config[_0x241410(0x241)])_0x157e95=getTimeStamp()+':\x20'+config[_0x241410(0x1a0)]+'\x20>\x20'+_0x545643;else _0x157e95=getTimeStamp()+':\x20Bot\x20'+botID+_0x241410(0x275)+_0x545643;console[_0x241410(0x2df)](_0x157e95),loggerfile[_0x241410(0x2d6)](util['format'](_0x157e95)+'\x0a'),_0xb954bd&&(console[_0x241410(0x2df)](_0xb954bd),loggerfile[_0x241410(0x2d6)](util[_0x241410(0x231)](_0xb954bd)+'\x0a'));},'debug':async(_0x342401,_0x3f4c80='')=>{const _0x39497d=_0x3ad44d;let _0x48083b;if(config[_0x39497d(0x241)])_0x48083b=getTimeStamp()+':\x20'+config[_0x39497d(0x1a0)]+_0x39497d(0x326)+_0x342401;else _0x48083b=getTimeStamp()+_0x39497d(0x1c0)+botID+_0x39497d(0x326)+_0x342401;if(debugging)console[_0x39497d(0x2df)](_0x48083b);loggerfile['write'](util[_0x39497d(0x231)](_0x48083b)+'\x0a');if(_0x3f4c80){if(debugging)console[_0x39497d(0x2df)](_0x3f4c80);loggerfile[_0x39497d(0x2d6)](util['format'](_0x3f4c80)+'\x0a');}}};process['on'](_0x3ad44d(0x298),function(_0x174432){const _0x283c3c=_0x3ad44d;logHistory(_0x283c3c(0x1bb),_0x283c3c(0x2d1)),logger['debug'](_0x283c3c(0x268),_0x174432);});settings['timeshift']!=config[_0x3ad44d(0x278)]&&updateTimeshift(settings['timeshift']);settings[_0x3ad44d(0x247)]!=config[_0x3ad44d(0x247)]&&updateOnepagemode(settings[_0x3ad44d(0x247)]);process['send']({'started':_0x3ad44d(0x322)},_0x1f7149=>{}),initializeProcessListeners();function proxyEmit(_0x35c6fd,_0x375775=null){const _0x4c94b4=_0x3ad44d;process[_0x4c94b4(0x285)]({'function':_0x35c6fd,'args':_0x375775},_0x1f3543=>{});}function initializeProcessListeners(){const _0x25f47b=_0x3ad44d;process['on'](_0x25f47b(0x21c),_0x3dc35f=>{const _0x1c3aa4=_0x25f47b;switch(Object[_0x1c3aa4(0x190)](_0x3dc35f)[0x0]){case _0x1c3aa4(0x278):_0x3dc35f['timeshift']!=undefined&&(settings[_0x1c3aa4(0x278)]=_0x3dc35f['timeshift'],updateTimeshift(settings[_0x1c3aa4(0x278)]));break;case _0x1c3aa4(0x247):_0x3dc35f[_0x1c3aa4(0x247)]!=undefined&&(settings[_0x1c3aa4(0x247)]=_0x3dc35f[_0x1c3aa4(0x247)],updateOnepagemode(settings[_0x1c3aa4(0x247)]));break;case'bots':_0x3dc35f[_0x1c3aa4(0x26e)]!=undefined&&(bots=JSON[_0x1c3aa4(0x1d8)](_0x3dc35f[_0x1c3aa4(0x26e)]),proxyEmit('bots',bots));break;case _0x1c3aa4(0x2b6):switch(_0x3dc35f['function']){case _0x1c3aa4(0x240):initclient();break;case _0x1c3aa4(0x1de):toggleBotMode();break;case _0x1c3aa4(0x1c8):emitHistory(_0x3dc35f['args']);break;case _0x1c3aa4(0x2dd):deleteHistoryAlerts(_0x3dc35f[_0x1c3aa4(0x251)]);break;case _0x1c3aa4(0x312):getPortfolio(_0x3dc35f[_0x1c3aa4(0x251)]);break;case'storeConfiguration':storeConfiguration(_0x3dc35f[_0x1c3aa4(0x251)]);break;case _0x1c3aa4(0x2d2):storeHeadless(_0x3dc35f[_0x1c3aa4(0x251)]);break;case _0x1c3aa4(0x256):storeFiat(_0x3dc35f[_0x1c3aa4(0x251)]);break;case _0x1c3aa4(0x23d):resetHistory();break;case _0x1c3aa4(0x18a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3dc35f['args']);break;case'cancelLoading':cancelLoading();break;case _0x1c3aa4(0x204):showConfig();break;case _0x1c3aa4(0x233):sendMetricsTelegram();break;case _0x1c3aa4(0x20e):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x341428=null,_0x772c49=![]){const _0x454db9=_0x3ad44d;logger[_0x454db9(0x308)](_0x454db9(0x2b7)+(_0x341428&&_0x341428[_0x454db9(0x24e)]>0x0?_0x454db9(0x1b3)+_0x341428[_0x454db9(0x273)](','):_0x454db9(0x323))+'\x20|\x20'+(_0x772c49?_0x454db9(0x19f):_0x454db9(0x264))+_0x454db9(0x2bb)+config[_0x454db9(0x212)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x772c49)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x454db9(0x1c9)]!=''&&config[_0x454db9(0x1c9)]!=_0x454db9(0x2ca)){loadingProgress=0x0;if(_0x772c49){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1bfe72){handleErrorNoStop(_0x1bfe72,_0x454db9(0x327));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x341428);const _0x1b24b7=await getCoins();[currentCoins,currentCoinsAll]=_0x1b24b7,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x454db9(0x221)](_0x454db9(0x276)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x454db9(0x24e)]==0x0&&allOpenOrders[_0x454db9(0x24e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x17f676=_0x3ad44d;exchangeStopped=!![];try{await exchange[_0x17f676(0x280)]();}catch(_0x2e9613){await handleError(_0x2e9613,_0x17f676(0x1cc));}}async function reloadExchange(){const _0x2cbab9=_0x3ad44d;logger[_0x2cbab9(0x308)](_0x2cbab9(0x2c1));while(lockOrders!=ORDERS[_0x2cbab9(0x296)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2cbab9(0x308)](_0x2cbab9(0x217)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x3dc764=config[_0x3ad44d(0x212)],_0x26335e=config[_0x3ad44d(0x1c9)],_0x53fba1=config['apiSecret'],_0x1bc965=config[_0x3ad44d(0x1ed)]){const _0x3ba262=_0x3ad44d;exchange&&await stopExchange();!supportedExchanges()[_0x3ba262(0x23e)](_0x3dc764)&&(logHistory(_0x3ba262(0x1bb),_0x3ba262(0x211)+_0x3dc764+_0x3ba262(0x27c)),killBot());const _0x4b222a=ccxt[_0x3ba262(0x26c)][_0x3dc764[_0x3ba262(0x209)]()];exchange=new _0x4b222a({'apiKey':_0x26335e,'secret':_0x53fba1,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1bc965)exchange[_0x3ba262(0x29a)]=_0x1bc965;}function setStableCoins(){const _0x4c163e=_0x3ad44d;let _0xc877cb=config[_0x4c163e(0x2f4)]==_0x4c163e(0x29d)?_0x4c163e(0x29d):_0x4c163e(0x2f3),_0x3bd984=!allSymbols[_0x4c163e(0x23e)](_0xc877cb+_0x4c163e(0x254))?_0x4c163e(0x1f5):_0x4c163e(0x1ad),_0x1fc719=!allSymbols['includes'](_0xc877cb+_0x4c163e(0x229))?_0x3bd984:_0x4c163e(0x200);stablecoins={'eur':{'coin':''+_0xc877cb+_0x1fc719,'symbol':_0xc877cb+'/'+_0x1fc719},'usd':{'coin':''+_0xc877cb+_0x3bd984,'symbol':_0xc877cb+'/'+_0x3bd984}};}async function initwsCcxt(_0x4b31b4){const _0x59ceea=_0x3ad44d;_0x4b31b4==null&&(_0x4b31b4=[],config[_0x59ceea(0x287)]['forEach'](_0x2b6ea4=>{const _0xdfd9ae=_0x59ceea;if(!_0x2b6ea4[_0xdfd9ae(0x2aa)]&&_0x2b6ea4[_0xdfd9ae(0x253)]!=config[_0xdfd9ae(0x2f4)])_0x4b31b4[_0xdfd9ae(0x1a1)](_0x2b6ea4[_0xdfd9ae(0x237)]);}));if(!_0x4b31b4[_0x59ceea(0x23e)](stablecoins['eur'][_0x59ceea(0x237)]))_0x4b31b4[_0x59ceea(0x1a1)](stablecoins[_0x59ceea(0x31d)][_0x59ceea(0x237)]);if(!_0x4b31b4[_0x59ceea(0x23e)](stablecoins[_0x59ceea(0x2d0)][_0x59ceea(0x237)]))_0x4b31b4[_0x59ceea(0x1a1)](stablecoins['usd'][_0x59ceea(0x237)]);if(config['exchange'][_0x59ceea(0x30a)](_0x59ceea(0x228))){if(!_0x4b31b4['includes'](_0x59ceea(0x31b)+config[_0x59ceea(0x2f4)]))_0x4b31b4[_0x59ceea(0x1a1)](_0x59ceea(0x31b)+config[_0x59ceea(0x2f4)]);}loadCoins(_0x4b31b4),_0x4b31b4=validateSymbols(_0x4b31b4);const _0x46aa87=async _0x12e225=>{const _0x31782b=_0x59ceea;let _0xb68e82;try{const _0x491f42=await exchange[_0x31782b(0x28e)](_0x12e225);Object[_0x31782b(0x314)](_0x491f42)[_0x31782b(0x1ea)](_0xacb017=>{const _0x496ede=_0x31782b;_0xb68e82=_0xacb017[0x1]['symbol'],global[_0x496ede(0x2c5)][noslash(_0xb68e82)]=_0xacb017[0x1]['last'];});}catch(_0x4202e9){await handleError(_0x4202e9,_0x31782b(0x1ce),_0xb68e82);}},_0x53a8f8=async _0x25f3ea=>{const _0x444e46=_0x59ceea;while(!![]){if(!botPaused)try{const _0x1daa62=await exchange[_0x444e46(0x2c4)](_0x25f3ea);global['ticker'][noslash(_0x1daa62[0x0][_0x444e46(0x237)])]=_0x1daa62[0x0][_0x444e46(0x1f0)],await sleep(0x3e8);}catch(_0x125530){if(!exchangeStopped)await handleError(_0x125530,_0x444e46(0x196),_0x25f3ea);}else await sleep(0x64);}},_0x265272=async _0x586bf3=>{const _0x414383=_0x59ceea;while(!![]){if(!botPaused)try{const _0x4aea71=await exchange['fetchTicker'](_0x586bf3);global[_0x414383(0x294)][_0x4aea71['symbol']]=_0x4aea71['percentage'],await sleep(0x3c*0x3e8);}catch(_0x37d568){if(!exchangeStopped)await handleError(_0x37d568,_0x414383(0x248),_0x586bf3);}else await sleep(0x64);}},_0x4eb292=async _0x2161bc=>{const _0x5a46bf=_0x59ceea;while(!![]){if(!botPaused)try{const _0x291a5a=await exchange[_0x5a46bf(0x222)](_0x2161bc);_0x291a5a[_0x5a46bf(0x1ea)](_0x3149d4=>{updateNumberCoinsCcxt(_0x3149d4);});}catch(_0x540415){if(!exchangeStopped)await handleError(_0x540415,'watchOrders()');}else await sleep(0x64);}};_0x46aa87(_0x4b31b4),_0x4b31b4[_0x59ceea(0x1ea)](_0x1f5d45=>{_0x53a8f8(_0x1f5d45),_0x265272(_0x1f5d45),_0x4eb292(_0x1f5d45);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x228d5e=_0x3ad44d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4774b9=await getCoins(),[_0x4fb072,_0x2205ad]=_0x4774b9;let _0x57c66a=[];currentCoins[_0x228d5e(0x1ea)](_0x1c4795=>{const _0xaf1ba0=_0x228d5e,_0x5327a1=_0x4fb072[_0xaf1ba0(0x1b9)](_0x567beb=>_0x567beb[_0xaf1ba0(0x253)]==_0x1c4795['coin']);if(_0x5327a1){if(_0x1c4795[_0xaf1ba0(0x2e2)]!=_0x5327a1[_0xaf1ba0(0x2e2)]){let _0x3720b3;if(_0x1c4795[_0xaf1ba0(0x253)]!=config[_0xaf1ba0(0x2f4)]){const _0x29ecaa=global['ticker'][noslash(_0x1c4795[_0xaf1ba0(0x237)])];_0x3720b3=_0x1c4795['reverse']?0x1/_0x29ecaa:_0x29ecaa;}else _0x3720b3=0x1;_0x57c66a[_0xaf1ba0(0x1a1)]({'coin':_0x1c4795[_0xaf1ba0(0x253)],'symbol':_0x1c4795[_0xaf1ba0(0x237)],'price':_0x3720b3,'number':Number(formatResult(_0x5327a1[_0xaf1ba0(0x2e2)]-_0x1c4795[_0xaf1ba0(0x2e2)],0x8)),'basecoinvalue':_0x3720b3*(_0x5327a1['number']-_0x1c4795[_0xaf1ba0(0x2e2)])});}}});if(_0x57c66a[_0x228d5e(0x24e)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x228d5e(0x308)](_0x228d5e(0x2b3)+_0x57c66a[0x0][_0x228d5e(0x2d4)]+_0x228d5e(0x22a)+lastFees[_0x228d5e(0x1a3)]);if(lastFees['highest']==0x0||Math[_0x228d5e(0x317)](_0x57c66a[0x0][_0x228d5e(0x2d4)])>lastFees[_0x228d5e(0x1a3)]){delete _0x57c66a[0x0]['symbol'],delete _0x57c66a[0x0]['basecoinvalue'];let _0x2f4847=[],_0x56c156=[...config[_0x228d5e(0x2c2)]]||[],_0x14052d=config['liquidity'];_0x56c156['sort']((_0x15fac0,_0x2df262)=>_0x15fac0[_0x228d5e(0x284)]>_0x2df262[_0x228d5e(0x284)]?-0x1:_0x2df262[_0x228d5e(0x284)]>_0x15fac0['date']?0x1:0x0);const _0x3ae74e=getDate();if(_0x56c156[0x0]){const _0x1aa7a5=fns[_0x228d5e(0x1d8)](_0x56c156[0x0][_0x228d5e(0x284)],'yyyy/MM/dd',new Date()),_0x13277d=fns[_0x228d5e(0x1d8)](_0x3ae74e,_0x228d5e(0x299),new Date());if(fns['isEqual'](_0x1aa7a5,_0x13277d)){_0x2f4847=_0x56c156[0x0]['changes'];const _0x536ff5=_0x2f4847[_0x228d5e(0x1b9)](_0x2ced1f=>_0x2ced1f[_0x228d5e(0x253)]==_0x57c66a[0x0]['coin']);_0x536ff5?(_0x536ff5[_0x228d5e(0x2e2)]+=_0x57c66a[0x0][_0x228d5e(0x2e2)],_0x536ff5[_0x228d5e(0x2e2)]==0x0&&(_0x2f4847=_0x2f4847['filter'](_0x55b68b=>{const _0x1ca3d4=_0x228d5e;return _0x55b68b[_0x1ca3d4(0x253)]!=_0x57c66a[0x0]['coin'];}))):_0x2f4847[_0x228d5e(0x1a1)](_0x57c66a[0x0]);const _0x2ceb7b=_0x14052d[_0x228d5e(0x1b9)](_0xa8686c=>_0xa8686c['date']==_0x3ae74e);_0x2ceb7b['changes']=_0x2f4847;}else _0x14052d['push']({'date':_0x3ae74e,'changes':[_0x57c66a[0x0]]});}const _0x5400b7=_0x14052d[_0x228d5e(0x1b9)](_0x4ac1f4=>_0x4ac1f4[_0x228d5e(0x284)]==_0x3ae74e);if(_0x5400b7){let _0x501591=!![];_0x5400b7['changes'][_0x228d5e(0x1ea)](_0x439c02=>{const _0x513690=_0x228d5e;if(_0x439c02[_0x513690(0x2e2)]!=0x0)_0x501591=![];}),_0x501591&&(_0x14052d=_0x14052d[_0x228d5e(0x1ae)](_0x5aad43=>{return _0x5aad43['date']!=_0x3ae74e;}));}let _0x746dac=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x746dac&&(dbConfig[_0x228d5e(0x267)](_0x228d5e(0x1e3))[_0x228d5e(0x1b9)]({'botID':botID})[_0x228d5e(0x1c1)]({'liquidity':_0x14052d})[_0x228d5e(0x2d6)](),config[_0x228d5e(0x2c2)]=_0x14052d),logHistory(_0x228d5e(0x2b1),'Portfolio\x20change\x20detected:\x20'+Math[_0x228d5e(0x317)](_0x57c66a[0x0]['number'])+'\x20'+_0x57c66a[0x0][_0x228d5e(0x253)]+'\x20'+(_0x57c66a[0x0][_0x228d5e(0x2e2)]>0x0?_0x228d5e(0x191):'removed')+_0x228d5e(0x1d1)),proxyEmit(_0x228d5e(0x1e7),emittedConfiguration());}else logger[_0x228d5e(0x308)](_0x228d5e(0x2ef)+Math[_0x228d5e(0x317)](_0x57c66a[0x0]['number'])+'\x20'+_0x57c66a[0x0][_0x228d5e(0x253)]+'\x20'+(_0x57c66a[0x0][_0x228d5e(0x2e2)]>0x0?_0x228d5e(0x191):_0x228d5e(0x243)));transactionDetected=!![],currentCoins=_0x4fb072,currentCoinsAll=_0x2205ad;}else logger[_0x228d5e(0x308)](_0x228d5e(0x2e1)+Math[_0x228d5e(0x317)](_0x57c66a[0x0][_0x228d5e(0x2e2)])+'\x20'+_0x57c66a[0x0]['coin']+'\x20'+(_0x57c66a[0x0]['number']>0x0?_0x228d5e(0x191):_0x228d5e(0x243))+_0x228d5e(0x2c3)),currentCoins=_0x4fb072,currentCoinsAll=_0x2205ad;}await sleep(watchTransactionsInterval);}catch(_0xc38e4d){if(!exchangeStopped)await handleError(_0xc38e4d,_0x228d5e(0x1a4));}else await sleep(0x64);}}async function loadSymbols(){const _0xf18d52=_0x3ad44d;try{markets=await exchange[_0xf18d52(0x2cc)](),allSymbols=[],Object[_0xf18d52(0x314)](markets)['forEach'](_0x3710e9=>{const _0x3ad21d=_0xf18d52;_0x3710e9[0x1][_0x3ad21d(0x2cd)]&&_0x3710e9[0x1][_0x3ad21d(0x316)]&&allSymbols['push'](_0x3710e9[0x0]);});}catch(_0x24b885){throw _0x24b885;}}function validateSymbols(_0x5ba19e){const _0x3ff349=_0x3ad44d;let _0x3ca242=[];return _0x5ba19e[_0x3ff349(0x1ea)](_0x3c0be4=>{const _0x37d1c8=_0x3ff349;!allSymbols[_0x37d1c8(0x23e)](_0x3c0be4)?logHistory('error',_0x37d1c8(0x23b)+_0x3c0be4+_0x37d1c8(0x2a1)):_0x3ca242['push'](_0x3c0be4);}),_0x3ca242;}async function initclient(){const _0x58731e=_0x3ad44d;proxyEmit(_0x58731e(0x1e7),emittedConfiguration()),proxyEmit(_0x58731e(0x1c6),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x58731e(0x1be),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3b072d=getNormalizedPerformance();emitPerformance(_0x3b072d),getStartingBalances(_0x3b072d);}async function toggleBotMode(){const _0x3165f6=_0x3ad44d;let _0x466b70=dbConfig[_0x3165f6(0x267)]('bot')[_0x3165f6(0x1b9)]({'botID':botID})[_0x3165f6(0x260)]();if(_0x466b70){const _0x27f28d=!_0x466b70['headless'];dbConfig[_0x3165f6(0x267)]('bot')[_0x3165f6(0x1b9)]({'botID':botID})[_0x3165f6(0x1c1)]({'headless':_0x27f28d})[_0x3165f6(0x2d6)](),config[_0x3165f6(0x302)]=_0x27f28d,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x592095=_0x3ad44d;process[_0x592095(0x285)]({'updatebotmanager':!![]},_0x557da1=>{});}async function loadCoins(_0x395d29){const _0x2df92f=_0x3ad44d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x51e9f5,_0xee1788=0x0,_0x20e0c9=0x0;_0x395d29[_0x2df92f(0x1ea)](_0x46c864=>{const _0x5f0db2=_0x2df92f;loading['remainingSymbols'][_0x5f0db2(0x1a1)](_0x46c864);}),loadingCanceled=![];let _0x551cc6=![];while(_0x51e9f5!=_0x395d29[_0x2df92f(0x24e)]+maxLoadingProgress){_0x51e9f5=loadingProgress,_0x395d29[_0x2df92f(0x1ea)](_0x5429bd=>{const _0x3067b6=_0x2df92f;if(global['ticker'][noslash(_0x5429bd)]){loading[_0x3067b6(0x25c)]=loading[_0x3067b6(0x25c)]['filter'](_0x5beca8=>_0x5beca8!=_0x5429bd);if(!watchedSymbols['includes'](_0x5429bd))watchedSymbols['push'](_0x5429bd);_0x51e9f5++;}}),loading['progress']=Math[_0x2df92f(0x27d)](_0x51e9f5/(_0x395d29[_0x2df92f(0x24e)]+maxLoadingProgress)*0x64);loading[_0x2df92f(0x1a8)]!=0x64&&(_0x20e0c9>0x1e*0x5&&(loading[_0x2df92f(0x1f8)]=!![],emitLoadingProgress()),_0x20e0c9>0x78*0x5&&!_0x551cc6&&(loading[_0x2df92f(0x306)]=!![],emitLoadingProgress(),_0x551cc6=!![],logHistory('error',_0x2df92f(0x1bf)+loading[_0x2df92f(0x25c)][_0x2df92f(0x273)](',\x20')+_0x2df92f(0x1d0)),logHistory(_0x2df92f(0x1bb),_0x2df92f(0x279)+loadCoinsRetryInterval/0xea60+_0x2df92f(0x321)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x2309c4=_0x2df92f;process[_0x2309c4(0x285)]({'stop':_0x2309c4(0x263)},_0x34e796=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xee1788!=loading[_0x2df92f(0x1a8)]&&(_0xee1788=loading[_0x2df92f(0x1a8)],emitLoadingProgress()),_0x20e0c9++,await sleep(0xc8);}_0x51e9f5==_0x395d29[_0x2df92f(0x24e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2df92f(0x285)]({'status':_0x2df92f(0x28d),'live':_0x2df92f(0x322)},_0x2e1f63=>{}),_0x551cc6&&logHistory(_0x2df92f(0x2b1),_0x2df92f(0x25f)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x30672a=_0x3ad44d;proxyEmit(_0x30672a(0x1e7),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x2aab92=_0x3ad44d;let _0x5dfef8=global[_0x2aab92(0x2c5)][stablecoins[_0x2aab92(0x31d)][_0x2aab92(0x253)]],_0x217451=global['ticker'][stablecoins[_0x2aab92(0x2d0)][_0x2aab92(0x253)]];return{'eur':Number(_0x5dfef8),'usd':Number(_0x217451)};}function capitalize(_0x5c0e3c){const _0x5a6428=_0x3ad44d;return _0x5c0e3c[_0x5a6428(0x1e4)](0x0,0x1)['toUpperCase']()+_0x5c0e3c[_0x5a6428(0x1e4)](0x1);}function supportedExchanges(){const _0x52ff42=_0x3ad44d,_0x42e9cf=['ws',_0x52ff42(0x28e),_0x52ff42(0x320),'watchTrades',_0x52ff42(0x222),'cancelOrder','createOrder',_0x52ff42(0x28a),_0x52ff42(0x2e8),'fetchBalance'];let _0x19c71d=[],_0xfabb3f=[],_0x40e7eb=ccxt[_0x52ff42(0x26c)][_0x52ff42(0x1c6)];_0x40e7eb[_0x52ff42(0x1ea)](_0x51cdf2=>{const _0x388424=_0x52ff42;try{const _0x8971bb=new ccxt[(_0x388424(0x26c))][_0x51cdf2]();_0xfabb3f['push'](_0x8971bb);}catch(_0x54e01c){}}),_0xfabb3f[_0x52ff42(0x1ea)](_0x5a5a5d=>{const _0x22dc37=_0x52ff42;let _0x560353=0x0;_0x42e9cf[_0x22dc37(0x1ea)](_0x272b90=>{const _0x223595=_0x22dc37;_0x272b90 in _0x5a5a5d['has']&&_0x5a5a5d[_0x223595(0x1fc)][_0x272b90]&&_0x560353++;}),_0x560353==_0x42e9cf[_0x22dc37(0x24e)]&&_0x19c71d[_0x22dc37(0x1a1)](capitalize(_0x5a5a5d['id']));});let _0xe2c980=[];return _0x40e7eb[_0x52ff42(0x1ea)](_0xf83944=>{const _0x171fed=_0x52ff42;_0xf83944=capitalize(_0xf83944);if(!_0x19c71d['includes'](_0xf83944))_0xe2c980[_0x171fed(0x1a1)](_0xf83944);}),_0x19c71d;}function setStartDatePerformance(){const _0x5674ec=_0x3ad44d;if(config&&config['liquidity'][0x0][_0x5674ec(0x20f)]['length']!=0x0){const _0x36e8ae=config['liquidity'][0x0]['changes'];dbPerformance[_0x5674ec(0x267)]('data')[_0x5674ec(0x1b9)]({'date':config[_0x5674ec(0x290)]})[_0x5674ec(0x1c1)]({'coins':_0x36e8ae})['write']();}}async function recreateCoinResults(){const _0x49c384=_0x3ad44d;let _0x2649f7,_0x44cbba=[];try{const _0x2a8adb=fns[_0x49c384(0x231)](fns['parseISO'](config[_0x49c384(0x290)][_0x49c384(0x1f3)](/\//g,'-')),_0x49c384(0x2e3));for(const _0x32f0f0 of currentCoins){if(_0x32f0f0[_0x49c384(0x253)]!=config[_0x49c384(0x2f4)]){let _0x44cb9c=0x0,_0x3e2ec8,_0x2f4747;_0x2649f7=await getAllEventOrders(_0x32f0f0[_0x49c384(0x237)]);if(_0x2649f7[_0x49c384(0x24e)]>0x0)_0x2649f7[_0x49c384(0x1ea)](_0x4b6d37=>{const _0x431863=_0x49c384,_0xedc972=_0x32f0f0['symbol'][_0x431863(0x23e)](config[_0x431863(0x2f4)]+'/');_0x44cbba[_0x431863(0x1a1)]({'datetime':_0x4b6d37['datetime'],'coin':_0x32f0f0[_0x431863(0x253)],'symbol':_0x32f0f0[_0x431863(0x237)],'side':_0x4b6d37[_0x431863(0x1e6)],'reverse':_0xedc972,'amount':formatResult(_0x4b6d37[_0x431863(0x1f6)],0x8),'filled':formatResult(_0x4b6d37[_0x431863(0x1f6)],0x8),'price':formatResult(_0x4b6d37[_0x431863(0x1f0)],0x8)}),_0x44cb9c=_0x4b6d37[_0x431863(0x1e6)]=='buy'?_0x44cb9c+_0x4b6d37[_0x431863(0x1f6)]:_0x44cb9c-_0x4b6d37[_0x431863(0x1f6)];if(!_0x2f4747)_0x2f4747=_0x4b6d37['price'];});_0x3e2ec8=_0x32f0f0['number']-_0x44cb9c;let _0x18d8dc;config['liquidity'][_0x49c384(0x1ea)](_0xb58504=>{const _0x119b98=_0x49c384;!_0x18d8dc&&(_0x18d8dc=_0xb58504[_0x119b98(0x20f)][_0x119b98(0x1b9)](_0x59bde8=>_0x59bde8['coin']==_0x32f0f0[_0x119b98(0x253)]),_0x18d8dc&&(_0x3e2ec8=_0x18d8dc[_0x119b98(0x2e2)],_0x2f4747=_0x18d8dc[_0x119b98(0x1f0)]));});let _0x523c5a=dbCoinResults[_0x49c384(0x267)]('coins')[_0x49c384(0x1b9)]({'coin':_0x32f0f0['coin']})['value']();_0x523c5a={'coin':_0x32f0f0['coin'],'number':_0x3e2ec8,'breakeven':_0x2f4747,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x49c384(0x20d))[_0x49c384(0x1b9)]({'coin':_0x32f0f0[_0x49c384(0x253)]})[_0x49c384(0x1c1)](_0x523c5a)[_0x49c384(0x2d6)]();}}_0x44cbba[_0x49c384(0x1ca)]((_0x5a623f,_0x152f27)=>_0x5a623f[_0x49c384(0x31e)]>_0x152f27[_0x49c384(0x31e)]?0x1:_0x152f27[_0x49c384(0x31e)]>_0x5a623f[_0x49c384(0x31e)]?-0x1:0x0);let _0x2175c8=0x0;for(let _0x2efe3e of _0x44cbba){await updateCoinResults(_0x2efe3e,!![]);}}catch(_0x45c846){await handleError(_0x45c846,_0x49c384(0x2f5));}}async function getAllEventOrders(_0x541f68){const _0x3b1dc3=_0x3ad44d;let _0x1ed27c=[],_0x205b0b=dbLogs[_0x3b1dc3(0x267)]('logs')['filter'](_0x471ef3=>{const _0x9bf3a7=_0x3b1dc3,_0x210fbe=_0x471ef3[_0x9bf3a7(0x2e4)][_0x9bf3a7(0x209)]();return _0x210fbe[_0x9bf3a7(0x23e)](_0x541f68[_0x9bf3a7(0x209)]())&&(_0x210fbe[_0x9bf3a7(0x23e)](_0x9bf3a7(0x1c4))&&_0x210fbe['includes']('order')||_0x210fbe[_0x9bf3a7(0x23e)]('filled')&&_0x210fbe[_0x9bf3a7(0x23e)]('order'));})['sortBy'](_0x3b1dc3(0x2cf))[_0x3b1dc3(0x260)]();return _0x205b0b[_0x3b1dc3(0x1ea)](_0x509777=>{const _0x51c625=_0x3b1dc3,_0x306b2e=_0x509777['event'][_0x51c625(0x23e)](_0x51c625(0x1d5))?'sell':_0x51c625(0x203),_0x3f0fc9=/#([0-9]|\.)+\s/i,_0x4cac92=Number(_0x3f0fc9[_0x51c625(0x18f)](_0x509777['event'])[0x0][_0x51c625(0x1e2)](0x1)),_0x1695c9=/@([0-9]|\.)+$/i,_0xfb704a=Number(_0x1695c9[_0x51c625(0x18f)](_0x509777[_0x51c625(0x2e4)])[0x0][_0x51c625(0x1e2)](0x1));_0x1ed27c[_0x51c625(0x1a1)]({'datetime':_0x509777[_0x51c625(0x2cf)],'coin':symbolToCoin(_0x541f68),'symbol':_0x541f68,'side':_0x306b2e,'amount':_0x4cac92,'filled':_0x4cac92,'price':_0xfb704a});}),_0x1ed27c;}async function getAllOrders(_0x1b6a61,_0x47b8b3){const _0x4d2cba=_0x3ad44d;let _0x52f9f3=[];while(_0x47b8b3<exchange[_0x4d2cba(0x194)]()){const _0x15dcc5=0x1f4;try{const _0x345b9d=await exchange[_0x4d2cba(0x2e8)](_0x1b6a61,_0x47b8b3,_0x15dcc5);if(_0x345b9d[_0x4d2cba(0x24e)])_0x47b8b3=_0x345b9d[_0x345b9d[_0x4d2cba(0x24e)]-0x1]['timestamp']+0x1,_0x52f9f3=_0x52f9f3[_0x4d2cba(0x2ba)](_0x345b9d);else break;}catch(_0x40b244){await handleError(_0x40b244,_0x4d2cba(0x19d),_0x1b6a61);}}return _0x52f9f3;}async function validate24hChanges(){const _0xdc8190=_0x3ad44d;for(const _0x2bdbe4 of currentCoins){if(_0x2bdbe4[_0xdc8190(0x253)]!=config[_0xdc8190(0x2f4)]){let _0x1c91bb;_0x2bdbe4[_0xdc8190(0x213)]?_0x1c91bb=formatResult((0x1/(global[_0xdc8190(0x294)][noslash(_0x2bdbe4[_0xdc8190(0x237)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1c91bb=global[_0xdc8190(0x294)][noslash(_0x2bdbe4[_0xdc8190(0x237)])],_0x1c91bb<config[_0xdc8190(0x1d2)]&&(logHistory(_0xdc8190(0x1bb),_0x2bdbe4[_0xdc8190(0x253)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1c91bb+'%'),logHistory(_0xdc8190(0x1bb),_0xdc8190(0x1ee)),logHistory('error',_0xdc8190(0x216)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x41de29,_0x46e32f){const _0x21e78f=_0x3ad44d;if(!_0x41de29)return!![];const _0x5c7243=_0x46e32f[_0x21e78f(0x2b2)]('.'),_0x3cb848=_0x41de29['split']('.');for(var _0x2fa863=0x0;_0x2fa863<_0x3cb848[_0x21e78f(0x24e)];_0x2fa863++){const _0x35f5b5=~~_0x3cb848[_0x2fa863],_0x473320=~~_0x5c7243[_0x2fa863];if(_0x35f5b5<_0x473320)return!![];if(_0x35f5b5>_0x473320)return![];}return![];}async function oneTimeMigration(){const _0x292036=_0x3ad44d;let _0x197d59=dbLogs[_0x292036(0x267)](_0x292036(0x2ec))['value']();if(isOlderVersion(_0x197d59,_0x292036(0x303))){let _0x2880a9=[];const _0x393b3f=dbLogs[_0x292036(0x267)]('logs')[_0x292036(0x260)]();_0x393b3f[_0x292036(0x1ea)](_0x39ce8c=>{const _0x4041b4=_0x292036;_0x2880a9['push']({'time':_0x39ce8c[_0x4041b4(0x2cf)],'type':_0x39ce8c['type'],'event':_0x39ce8c['event']});}),dbLogs[_0x292036(0x267)](_0x292036(0x30d))[_0x292036(0x1c1)](_0x2880a9)[_0x292036(0x2d6)]();}let _0x205213=dbConfig['get'](_0x292036(0x2ec))[_0x292036(0x260)]();if(isOlderVersion(_0x205213,_0x292036(0x303))){let _0x429f7c=dbConfig['get']('bot')[_0x292036(0x1b9)]({'botID':botID})[_0x292036(0x260)]();if(_0x429f7c){let _0x2ead63=[];_0x429f7c[_0x292036(0x287)][_0x292036(0x1ea)](_0x48ef4b=>{const _0x120ac0=_0x292036;_0x2ead63[_0x120ac0(0x1a1)]({'coin':_0x48ef4b[_0x120ac0(0x253)],'number':_0x48ef4b[_0x120ac0(0x2ac)],'price':_0x48ef4b[_0x120ac0(0x23a)]}),delete _0x48ef4b[_0x120ac0(0x2ac)],delete _0x48ef4b[_0x120ac0(0x23a)];});if(_0x2ead63[_0x292036(0x24e)]!==0x0)fs[_0x292036(0x2da)](configbackuppath+(_0x292036(0x197)+botID+_0x292036(0x255)),JSON[_0x292036(0x234)](_0x2ead63,null,0x4),function(_0x430777){if(_0x430777){}});const _0x585fa2=(_0x3c3fa2,_0x9ba72)=>{const _0x13c993=_0x292036;let _0x2016b5=[];_0x9ba72['forEach'](_0x15ca87=>{const _0x541a66=_0xa7ef,_0x114096=_0x3c3fa2['find'](_0xd53343=>_0xd53343[_0x541a66(0x253)]==_0x15ca87[_0x541a66(0x253)]);if(!_0x114096)_0x2016b5[_0x541a66(0x1a1)](_0x15ca87);});let _0x17f852=[];return _0x3c3fa2[_0x13c993(0x1ea)](_0x38a1a7=>{const _0x2414fe=_0x13c993,_0x55f8db=_0x9ba72[_0x2414fe(0x1b9)](_0x2d5bf5=>_0x2d5bf5[_0x2414fe(0x253)]==_0x38a1a7[_0x2414fe(0x253)]);if(!_0x55f8db||_0x55f8db[_0x2414fe(0x2e2)]==0x0&&_0x38a1a7[_0x2414fe(0x2e2)]!=0x0)_0x17f852['push'](_0x38a1a7);}),{'missingDay1':_0x2016b5,'notInDay2':_0x17f852};},_0x7fdf81=dbPerformance['get']('data')[_0x292036(0x2f6)]()[_0x292036(0x260)]();if(_0x7fdf81[_0x292036(0x24e)]>0x1){const {missingDay1:_0x51b8be,notInDay2:_0x1a20c4}=_0x585fa2(_0x2ead63,_0x7fdf81[0x1]['coins']);_0x2ead63=[..._0x2ead63,..._0x51b8be],_0x1a20c4[_0x292036(0x1ea)](_0x5270cc=>{const _0x498d1a=_0x292036;let _0x21a836=_0x2ead63['findIndex'](_0x194834=>_0x194834['coin']==_0x5270cc[_0x498d1a(0x253)]);_0x21a836!=-0x1&&_0x2ead63[_0x498d1a(0x28f)](_0x21a836,0x1);});}_0x2ead63[_0x292036(0x1ca)]((_0x448dfc,_0xc049d3)=>_0x448dfc['coin']>_0xc049d3[_0x292036(0x253)]?0x1:_0xc049d3[_0x292036(0x253)]>_0x448dfc['coin']?-0x1:0x0);let _0x135e40=[{'date':_0x429f7c[_0x292036(0x290)],'changes':_0x2ead63}];_0x7fdf81[_0x292036(0x24e)]>0x2&&_0x7fdf81[_0x292036(0x1ea)]((_0x41710a,_0x41795b)=>{const _0x53159c=_0x292036;if(_0x41795b>0x0&&_0x41795b<_0x7fdf81['length']-0x1){const {missingDay1:_0xd0487f,notInDay2:_0x6fb304}=_0x585fa2(_0x7fdf81[_0x41795b][_0x53159c(0x20d)],_0x7fdf81[_0x41795b+0x1]['coins']);_0x2ead63=[],(_0xd0487f['length']!=0x0||_0x6fb304[_0x53159c(0x24e)]!=0x0)&&(_0xd0487f['length']!=0x0&&_0x2ead63[_0x53159c(0x1a1)](..._0xd0487f),_0x6fb304[_0x53159c(0x24e)]!=0x0&&(_0x6fb304[_0x53159c(0x1ea)](_0xadb526=>{const _0x325001=_0x53159c;_0xadb526[_0x325001(0x2e2)]=-_0xadb526[_0x325001(0x2e2)];}),_0x2ead63['push'](..._0x6fb304)),_0x2ead63[_0x53159c(0x1ca)]((_0xc70102,_0x16c3ed)=>_0xc70102[_0x53159c(0x253)]>_0x16c3ed[_0x53159c(0x253)]?0x1:_0x16c3ed[_0x53159c(0x253)]>_0xc70102['coin']?-0x1:0x0),_0x135e40[_0x53159c(0x1a1)]({'date':_0x7fdf81[_0x41795b+0x1]['date'],'changes':_0x2ead63}));}}),dbConfig[_0x292036(0x267)](_0x292036(0x1e3))['find']({'botID':botID})['assign']({..._0x429f7c,'liquidity':_0x135e40})[_0x292036(0x2d6)]();}}if(isOlderVersion(_0x205213,_0x292036(0x2fd))){let _0x3cee1b=dbConfig['get']('bot')[_0x292036(0x1b9)]({'botID':botID})[_0x292036(0x260)]();if(_0x3cee1b){const _0x266673=_0x3cee1b['exchange'],_0x292425=_0x266673?capitalize(_0x266673):_0x292036(0x228);dbConfig[_0x292036(0x267)](_0x292036(0x1e3))[_0x292036(0x1b9)]({'botID':botID})[_0x292036(0x1c1)]({'exchange':_0x292425})[_0x292036(0x2d6)]();}}let _0x3fb772=dbPerformance[_0x292036(0x267)]('version')[_0x292036(0x260)]();isOlderVersion(_0x3fb772,_0x292036(0x303))&&setStartDatePerformance();let _0x4bcda0=dbCoinResults[_0x292036(0x267)](_0x292036(0x2ec))[_0x292036(0x260)]();if(isOlderVersion(_0x4bcda0,'2.5.0')){let _0x5d3a59=dbCoinResults[_0x292036(0x267)](_0x292036(0x20d))['value']();if(_0x5d3a59[_0x292036(0x24e)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x80c2ae=_0x3ad44d;dbConfig['set']('version',serverversion)[_0x80c2ae(0x2d6)](),dbPerformance[_0x80c2ae(0x27f)](_0x80c2ae(0x2ec),serverversion)[_0x80c2ae(0x2d6)](),dbLogs[_0x80c2ae(0x27f)](_0x80c2ae(0x2ec),serverversion)[_0x80c2ae(0x2d6)](),dbCoinResults[_0x80c2ae(0x27f)](_0x80c2ae(0x2ec),serverversion)[_0x80c2ae(0x2d6)]();}function getConfiguration(_0x380c84){const _0x3862eb=_0x3ad44d;let _0x2e2a83=dbConfig[_0x3862eb(0x267)](_0x3862eb(0x1e3))[_0x3862eb(0x1b9)]({'botID':_0x380c84})['value']();if(_0x2e2a83){let _0x680184=![];typeof _0x2e2a83['threshold']==_0x3862eb(0x271)&&(_0x2e2a83={..._0x2e2a83,'threshold':Number(_0x2e2a83[_0x3862eb(0x1b5)])},_0x680184=!![]),_0x2e2a83[_0x3862eb(0x1d2)]==undefined&&(_0x2e2a83={..._0x2e2a83,'change24h':-0x14},_0x680184=!![]),_0x2e2a83[_0x3862eb(0x24c)]==undefined&&(_0x2e2a83={..._0x2e2a83,'fiat':_0x3862eb(0x1ad)},_0x680184=!![]),_0x2e2a83['onepagemode']==undefined&&(_0x2e2a83={..._0x2e2a83,'onepagemode':settings[_0x3862eb(0x247)]},_0x680184=!![]),_0x2e2a83[_0x3862eb(0x2bc)]==undefined&&(_0x2e2a83={..._0x2e2a83,'colorscheme':_0x3862eb(0x313)},_0x680184=!![]),_0x2e2a83[_0x3862eb(0x304)]==undefined&&(_0x2e2a83={..._0x2e2a83,'autoliquidity':!![]},_0x680184=!![]),_0x680184&&(_0x2e2a83={'botID':_0x2e2a83[_0x3862eb(0x2b4)],'exchange':_0x2e2a83[_0x3862eb(0x212)],'apiKey':_0x2e2a83['apiKey'],'apiSecret':_0x2e2a83[_0x3862eb(0x2db)],'apiPassword':_0x2e2a83['apiPassword'],'basecoin':_0x2e2a83[_0x3862eb(0x2f4)],'botname':_0x2e2a83[_0x3862eb(0x1a0)],'showname':_0x2e2a83[_0x3862eb(0x241)],'threshold':_0x2e2a83['threshold'],'ordertype':_0x2e2a83['ordertype'],'timeout':_0x2e2a83[_0x3862eb(0x1f8)],'fiat':_0x2e2a83[_0x3862eb(0x24c)],'startdate':_0x2e2a83['startdate'],'recreate':_0x2e2a83['recreate'],'timeshift':_0x2e2a83['timeshift'],'onepagemode':_0x2e2a83[_0x3862eb(0x247)],'headless':_0x2e2a83['headless'],'cooldown':_0x2e2a83[_0x3862eb(0x1f1)],'change24h':_0x2e2a83[_0x3862eb(0x1d2)],'emojibuy':_0x2e2a83[_0x3862eb(0x1fb)],'emojisell':_0x2e2a83[_0x3862eb(0x307)],'colorscheme':_0x2e2a83[_0x3862eb(0x2bc)],'portfolio':_0x2e2a83['portfolio'],'autoliquidity':_0x2e2a83[_0x3862eb(0x304)],'liquidity':_0x2e2a83[_0x3862eb(0x2c2)],'openOrders':_0x2e2a83['openOrders']},dbConfig['get'](_0x3862eb(0x1e3))[_0x3862eb(0x2b8)]()[_0x3862eb(0x2d6)](),dbConfig['get'](_0x3862eb(0x1e3))['push'](_0x2e2a83)[_0x3862eb(0x2d6)]());}else _0x2e2a83={'botID':_0x380c84,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3862eb(0x27b)+_0x380c84,'showname':![],'threshold':0x3,'ordertype':_0x3862eb(0x1c4),'timeout':0x14,'fiat':_0x3862eb(0x1ad),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x3862eb(0x247)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3862eb(0x313),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2e2a83;}function emittedConfiguration(){const _0x31cc43=_0x3ad44d;let _0x1262ee;if(config[_0x31cc43(0x1c9)]=='')_0x1262ee={...config,'configstate':_0x31cc43(0x2d3)};else config[_0x31cc43(0x1c9)]==_0x31cc43(0x2ca)?_0x1262ee={...config,'configstate':_0x31cc43(0x2ae)}:(_0x1262ee={...config,'apiKey':_0x31cc43(0x232),'apiSecret':_0x31cc43(0x232)},config['apiPassword']&&(_0x1262ee['apiPassword']=_0x31cc43(0x232)));return _0x1262ee;}function getSettings(){const _0x286566=_0x3ad44d;return dbSettings['get']('settings')[_0x286566(0x260)]();}function getSecure(){const _0x4f6e48=_0x3ad44d;return dbSecure[_0x4f6e48(0x267)]('secure')[_0x4f6e48(0x260)]()||{};}function updateTimeshift(_0x525753){const _0x918353=_0x3ad44d;let _0x46d726=dbConfig[_0x918353(0x267)](_0x918353(0x1e3))['find']({'botID':botID})['value']();_0x46d726&&dbConfig['get'](_0x918353(0x1e3))[_0x918353(0x1b9)]({'botID':botID})['assign']({'timeshift':_0x525753})[_0x918353(0x2d6)](),config['timeshift']=_0x525753,proxyEmit(_0x918353(0x1e7),emittedConfiguration());}function updateOnepagemode(_0x3fafa4){const _0x13f421=_0x3ad44d;let _0x216ceb=dbConfig[_0x13f421(0x267)](_0x13f421(0x1e3))[_0x13f421(0x1b9)]({'botID':botID})[_0x13f421(0x260)]();_0x216ceb&&dbConfig['get']('bot')[_0x13f421(0x1b9)]({'botID':botID})[_0x13f421(0x1c1)]({'onepagemode':_0x3fafa4})[_0x13f421(0x2d6)](),config[_0x13f421(0x247)]=_0x3fafa4,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x49d8bb){const _0x447507=_0x3ad44d;logger['debug'](_0x447507(0x2a8));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x447507(0x308)](_0x447507(0x2cb));let _0x17515f=[],_0x370011=![],_0x527cf7=![],_0x2754a9=[];_0x49d8bb['portfolio'][_0x447507(0x1ea)](_0x16d378=>{const _0x3c751a=_0x447507;if(!_0x16d378[_0x3c751a(0x2aa)]&&_0x16d378['coin']!=_0x49d8bb['basecoin'])_0x2754a9[_0x3c751a(0x1a1)](_0x16d378[_0x3c751a(0x237)]);}),_0x2754a9[_0x447507(0x1ea)](_0xe05abd=>{const _0xaa0cb7=_0x447507,_0x890e8a=watchedSymbols[_0xaa0cb7(0x23e)](_0xe05abd);!_0x890e8a&&_0x17515f['push'](_0xe05abd);}),_0x2754a9['forEach'](_0x374e6e=>{const _0x5eeabb=_0x447507,_0x391b2e=currentCoins[_0x5eeabb(0x1b9)](_0x3ae9d0=>_0x3ae9d0[_0x5eeabb(0x237)]==_0x374e6e);!_0x391b2e&&(_0x370011=!![]);}),currentCoins[_0x447507(0x1ea)](_0x1e89d2=>{const _0x4bf204=_0x447507;if(_0x1e89d2[_0x4bf204(0x253)]!=config[_0x4bf204(0x2f4)]){const _0x2962d4=_0x2754a9['find'](_0x524e72=>_0x524e72==_0x1e89d2[_0x4bf204(0x237)]);!_0x2962d4&&(_0x370011=!![]);}}),_0x49d8bb[_0x447507(0x287)][_0x447507(0x1ea)](_0x1276a4=>{const _0x2b972c=_0x447507,_0x375bf0=config[_0x2b972c(0x287)]['find'](_0x51583e=>_0x51583e[_0x2b972c(0x253)]==_0x1276a4[_0x2b972c(0x253)]);if(_0x375bf0&&_0x1276a4[_0x2b972c(0x22b)]!=_0x375bf0[_0x2b972c(0x22b)])_0x527cf7=!![];});let _0x34d972=dbConfig[_0x447507(0x267)](_0x447507(0x1e3))[_0x447507(0x1b9)]({'botID':botID})[_0x447507(0x260)]();_0x49d8bb={..._0x49d8bb,'apiKey':crypt[_0x447507(0x2a9)](secure[_0x447507(0x1a5)],_0x49d8bb['apiKey'])['message'],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x49d8bb[_0x447507(0x2db)])[_0x447507(0x21c)]};_0x49d8bb[_0x447507(0x1ed)]&&(_0x49d8bb['apiPassword']=crypt[_0x447507(0x2a9)](secure[_0x447507(0x1a5)],_0x49d8bb[_0x447507(0x1ed)])[_0x447507(0x21c)]);let _0x3e391f=![];if(_0x34d972){_0x49d8bb[_0x447507(0x1c9)]==_0x447507(0x232)?_0x49d8bb[_0x447507(0x1c9)]=config[_0x447507(0x1c9)]:_0x3e391f=!![];_0x49d8bb[_0x447507(0x2db)]==_0x447507(0x232)?_0x49d8bb[_0x447507(0x2db)]=config['apiSecret']:_0x3e391f=!![];if(_0x49d8bb[_0x447507(0x1ed)]=='************')_0x49d8bb[_0x447507(0x1ed)]=config['apiPassword'];else{if(_0x49d8bb[_0x447507(0x1ed)])_0x3e391f=!![];}dbConfig[_0x447507(0x267)](_0x447507(0x1e3))[_0x447507(0x1b9)]({'botID':botID})[_0x447507(0x1c1)](_0x49d8bb)[_0x447507(0x2d6)]();}else dbConfig[_0x447507(0x267)]('bot')['push'](_0x49d8bb)[_0x447507(0x2d6)](),_0x3e391f=!![],process['send']({'status':'enabled','live':_0x447507(0x322)},_0x5aac1a=>{});process[_0x447507(0x285)]({'botname':_0x49d8bb['botname']},_0x308069=>{}),updateBotManager(),config={..._0x49d8bb},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3e391f)await reset(_0x17515f,!![]);else _0x370011||_0x527cf7?await reset(_0x17515f,![]):getBalances();blockTransactionDetection=![],logger[_0x447507(0x308)](_0x447507(0x328));}async function storeHeadless(_0x19f45c){const _0x429616=_0x3ad44d,_0x425658={...config,'headless':_0x19f45c['headless']};let _0x523fdf=dbConfig[_0x429616(0x267)](_0x429616(0x1e3))[_0x429616(0x1b9)]({'botID':botID})['value']();_0x523fdf&&dbConfig[_0x429616(0x267)](_0x429616(0x1e3))[_0x429616(0x1b9)]({'botID':botID})[_0x429616(0x1c1)](_0x425658)[_0x429616(0x2d6)](),config={..._0x425658},updateBotManager(),proxyEmit(_0x429616(0x1e7),emittedConfiguration());}async function storeFiat(_0x1fd2da){const _0x1d98c4=_0x3ad44d,_0x45b2b2={...config,'fiat':_0x1fd2da};let _0x105524=dbConfig['get'](_0x1d98c4(0x1e3))[_0x1d98c4(0x1b9)]({'botID':botID})['value']();_0x105524&&dbConfig[_0x1d98c4(0x267)]('bot')[_0x1d98c4(0x1b9)]({'botID':botID})[_0x1d98c4(0x1c1)](_0x45b2b2)['write'](),config={..._0x45b2b2},proxyEmit(_0x1d98c4(0x1e7),emittedConfiguration());}function resetHistory(){const _0x1d05dd=_0x3ad44d;logger[_0x1d05dd(0x221)]('Resetting\x20bot\x20history');try{if(fs[_0x1d05dd(0x210)](path['join'](configpath,_0x1d05dd(0x202)+botID+_0x1d05dd(0x2fe))))fs['unlinkSync'](path[_0x1d05dd(0x273)](configpath,_0x1d05dd(0x202)+botID+_0x1d05dd(0x2fe)));if(fs[_0x1d05dd(0x210)](path[_0x1d05dd(0x273)](configpath,_0x1d05dd(0x202)+botID+_0x1d05dd(0x281))))fs[_0x1d05dd(0x1fa)](path['join'](configpath,_0x1d05dd(0x202)+botID+'-performance.json'));if(fs['existsSync'](path[_0x1d05dd(0x273)](configpath,_0x1d05dd(0x202)+botID+_0x1d05dd(0x2ff))))fs[_0x1d05dd(0x1fa)](path[_0x1d05dd(0x273)](configpath,_0x1d05dd(0x202)+botID+_0x1d05dd(0x2ff)));}catch(_0x43f9ef){if(_0x43f9ef)logger['full'](_0x1d05dd(0x319),_0x43f9ef);}const _0x38c2ed=getDate();let _0x23ee0a=[];currentCoins[_0x1d05dd(0x1ea)](_0x21aceb=>{const _0x3ae9b7=_0x1d05dd;_0x23ee0a[_0x3ae9b7(0x1a1)]({'coin':_0x21aceb[_0x3ae9b7(0x253)],'number':_0x21aceb[_0x3ae9b7(0x2e2)],'price':_0x21aceb[_0x3ae9b7(0x2ee)]});});let _0x48d44f=dbConfig[_0x1d05dd(0x267)](_0x1d05dd(0x1e3))[_0x1d05dd(0x1b9)]({'botID':botID})['value']();_0x48d44f&&(dbConfig[_0x1d05dd(0x267)]('bot')[_0x1d05dd(0x1b9)]({'botID':botID})[_0x1d05dd(0x1c1)]({'liquidity':[{'date':_0x38c2ed,'changes':_0x23ee0a}]})['write'](),config[_0x1d05dd(0x2c2)]=[]),process[_0x1d05dd(0x285)]({'stop':_0x1d05dd(0x263)},_0xf08429=>{});}function noslash(_0x5307bc){const _0x235633=_0x3ad44d;return _0x5307bc[_0x235633(0x1f3)]('/','');}function updateHighestFee(_0x416fd7){const _0xd538ad=_0x3ad44d;if(_0x416fd7[_0xd538ad(0x213)]){let _0x2d21b5={'filled':_0x416fd7[_0xd538ad(0x1f6)]*_0x416fd7[_0xd538ad(0x1f0)],'amount':_0x416fd7[_0xd538ad(0x1f6)]*_0x416fd7[_0xd538ad(0x1f0)],'side':_0x416fd7['side']=='sell'?_0xd538ad(0x203):_0xd538ad(0x1d5),'price':0x1/_0x416fd7[_0xd538ad(0x1f0)]};_0x416fd7={..._0x416fd7,..._0x2d21b5};}const _0x2273f7=defaultFee*_0x416fd7[_0xd538ad(0x1f6)]*_0x416fd7[_0xd538ad(0x1f0)];lastFees[_0xd538ad(0x1d7)]['length']===0x14&&lastFees[_0xd538ad(0x1d7)][_0xd538ad(0x292)](),lastFees[_0xd538ad(0x1d7)][_0xd538ad(0x1a1)](_0x2273f7),lastFees[_0xd538ad(0x1a3)]=Math[_0xd538ad(0x2f1)](...lastFees[_0xd538ad(0x1d7)]);}async function updateNumberCoinsCcxt(_0x54b54b){const _0x106dc3=_0x3ad44d;logger[_0x106dc3(0x308)](_0x106dc3(0x206)+_0x54b54b[_0x106dc3(0x237)]+_0x106dc3(0x1c5)+_0x54b54b[_0x106dc3(0x1bd)]+'\x20|\x20'+_0x54b54b['id']);let _0x3cc583=_0x54b54b[_0x106dc3(0x1bd)],_0x4f9301=![];currentCoins[_0x106dc3(0x1ea)](_0x449180=>{_0x449180['symbol']==_0x54b54b['symbol']&&(_0x4f9301=!![]);});if(!_0x4f9301)return;const _0x227756=currentCoins[_0x106dc3(0x1b9)](_0x5a05cc=>_0x5a05cc[_0x106dc3(0x237)]==_0x54b54b[_0x106dc3(0x237)]),_0x3f9a78=_0x58dc33=>{const _0x1ff56b=_0x106dc3;if(_0x227756)_0x227756[_0x1ff56b(0x195)]=_0x58dc33;};if(_0x3cc583==_0x106dc3(0x291))_0x3f9a78(_0x106dc3(0x291));else{if(_0x3cc583==_0x106dc3(0x1da)){_0x3f9a78('canceled');const _0x41b761=await getCoins();[currentCoins,currentCoinsAll]=_0x41b761,await getOpenOrders(),handleOpenOrders();}else{if(_0x3cc583==_0x106dc3(0x239)){logger['debug'](_0x106dc3(0x257)+_0x54b54b['symbol']+_0x106dc3(0x1c5)+_0x54b54b[_0x106dc3(0x1f6)]+_0x106dc3(0x1c5)+_0x54b54b['id']);let _0x21cd79=![];if(lastOrders)for(const _0x2b7a2f of lastOrders){const _0x222160=0xc8,_0x293fb8=0x1388;let _0x57cccd=0x0;while(!_0x2b7a2f['orderId']&&_0x57cccd*_0x222160<_0x293fb8){_0x57cccd++,await sleep(_0x222160);}if(_0x57cccd>0x0)logger[_0x106dc3(0x308)](_0x106dc3(0x19b)+_0x57cccd*_0x222160/0x3e8+_0x106dc3(0x269));if(_0x2b7a2f[_0x106dc3(0x20a)]==_0x54b54b['id']){logger[_0x106dc3(0x308)](_0x106dc3(0x236)+_0x54b54b['id']),_0x21cd79=!![];if(_0x2b7a2f[_0x106dc3(0x1f6)]==0x0){logger[_0x106dc3(0x308)](_0x106dc3(0x2fa)+_0x54b54b['id']);if(_0x54b54b[_0x106dc3(0x223)])_0x2b7a2f[_0x106dc3(0x1f0)]=_0x54b54b[_0x106dc3(0x223)];else{if(_0x54b54b[_0x106dc3(0x1f0)])_0x2b7a2f[_0x106dc3(0x1f0)]=_0x54b54b[_0x106dc3(0x1f0)];else{}}_0x2b7a2f[_0x106dc3(0x1f6)]=_0x54b54b[_0x106dc3(0x1f6)],updateHighestFee(_0x2b7a2f),_0x3f9a78('filled'),await validateOrders();if(lockOrders==ORDERS[_0x106dc3(0x205)]){const _0x4cf4cb=await getCoins();[currentCoins,currentCoinsAll]=_0x4cf4cb;}_0x2b7a2f['fee']={'currency':_0x54b54b[_0x106dc3(0x2f0)]?_0x54b54b[_0x106dc3(0x2f0)][_0x106dc3(0x22c)]:null,'cost':_0x54b54b['fee']?_0x54b54b['fee'][_0x106dc3(0x18e)]:0x0},await updateCoinResults(_0x2b7a2f);}}}if(!_0x21cd79){logger[_0x106dc3(0x308)](_0x106dc3(0x2fc)+_0x54b54b['id']),_0x3f9a78(_0x106dc3(0x1f6));const _0x273c3f=await getCoins();[currentCoins,currentCoinsAll]=_0x273c3f,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4cdc00=JSON[_0x106dc3(0x1d8)](lastBalances[_0x106dc3(0x287)]);const _0x59a34a=_0x4cdc00[_0x106dc3(0x1b9)](_0x15320f=>_0x15320f[_0x106dc3(0x237)]==_0x54b54b[_0x106dc3(0x237)]);if(_0x59a34a){if(_0x3cc583=='open')_0x59a34a['orderstatus']=_0x59a34a[_0x106dc3(0x195)]=='filled'?_0x106dc3(0x1f6):_0x106dc3(0x291);else{if(_0x3cc583==_0x106dc3(0x1da))_0x59a34a[_0x106dc3(0x195)]=_0x59a34a['orderstatus']=='filled'?_0x106dc3(0x1f6):_0x106dc3(0x1da);else _0x3cc583=='closed'&&(_0x59a34a['orderstatus']=_0x106dc3(0x1f6));}}lastBalances={...lastBalances,'portfolio':JSON[_0x106dc3(0x234)](_0x4cdc00)},proxyEmit(_0x106dc3(0x1be),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xe5407=_0x3ad44d;await getOpenOrders();let _0x30465c=![];currentCoins[_0xe5407(0x1ea)](_0x138955=>{const _0x59c6d7=_0xe5407;_0x30465c=allOpenOrders['find'](_0x3b2094=>_0x3b2094[_0x59c6d7(0x237)]==_0x138955[_0x59c6d7(0x237)]),_0x138955[_0x59c6d7(0x195)]=_0x30465c?_0x59c6d7(0x291):'none';});}async function getCoins(_0x3412ae=!![],_0x23c267=config[_0x3ad44d(0x2f4)]){const _0x262976=_0x3ad44d;let _0x5a9c94,_0x70bf3e=[],_0x1fb320=[],_0x5de330=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5a9c94=await exchange[_0x262976(0x29b)](),mybalances=_0x5a9c94['total'];for(const [_0xce4a57,_0xd7ab9c]of Object[_0x262976(0x314)](mybalances)){_0x5de330[_0x262976(0x1a1)](_0xce4a57);}config[_0x262976(0x287)][_0x262976(0x1ea)](_0x1e5ff9=>{const _0x577238=_0x262976;!_0x5de330[_0x577238(0x23e)](_0x1e5ff9[_0x577238(0x253)])&&(mybalances[_0x1e5ff9[_0x577238(0x253)]]=0x0);});if(_0x23c267=='')for(const [_0xef3439,_0x36aca0]of Object[_0x262976(0x314)](mybalances)){_0x36aca0!=0x0&&_0x70bf3e['push']({'coin':_0xef3439});}else{let _0x19946c=![];for(const [_0x138f55,_0x1e883f]of Object[_0x262976(0x314)](mybalances)){const _0x1c6233=config[_0x262976(0x287)][_0x262976(0x1b9)](_0x1b4cd3=>_0x1b4cd3['coin']==_0x138f55),_0x13865a=_0x138f55+'/'+_0x23c267,_0x5481cf=_0x23c267+'/'+_0x138f55,_0xe22956=currentCoins[_0x262976(0x1b9)](_0x4a3b85=>_0x4a3b85[_0x262976(0x253)]==_0x138f55);_0x19946c=![];if((_0x1e883f!=0x0||_0x1c6233)&&(allSymbols[_0x262976(0x23e)](_0x13865a)||_0x138f55==_0x23c267))_0x70bf3e[_0x262976(0x1a1)]({'coin':_0x138f55,'symbol':_0x13865a,'reverse':![],'number':Math[_0x262976(0x2f1)](_0x1e883f+(_0x1c6233&&_0x1c6233['offset']||0x0),0x0),'orderstatus':_0xe22956?_0xe22956['orderstatus']:'none'});else{if((_0x1e883f!=0x0||_0x1c6233)&&allSymbols[_0x262976(0x23e)](_0x5481cf))_0x70bf3e[_0x262976(0x1a1)]({'coin':_0x138f55,'symbol':_0x5481cf,'reverse':!![],'number':Math[_0x262976(0x2f1)](_0x1e883f+(_0x1c6233&&_0x1c6233['offset']||0x0),0x0),'orderstatus':_0xe22956?_0xe22956[_0x262976(0x195)]:_0x262976(0x2a5)});else _0x1c6233&&_0x70bf3e[_0x262976(0x1a1)]({'coin':_0x1c6233[_0x262976(0x253)],'symbol':_0x1c6233[_0x262976(0x237)],'reverse':_0x1c6233[_0x262976(0x213)],'number':0x0,'orderstatus':_0x262976(0x2a5)});}}}}catch(_0x5ef926){if(!_0x3412ae)handleErrorNoStop(_0x5ef926,_0x262976(0x2a7));else await handleError(_0x5ef926,_0x262976(0x2a7));}return _0x1fb320=cloneDeep(_0x70bf3e),_0x70bf3e=_0x70bf3e[_0x262976(0x1ae)](_0x166df0=>{const _0x4ab001=_0x262976,_0x1d2ef4=config[_0x4ab001(0x287)]['find'](_0x507e78=>_0x507e78[_0x4ab001(0x253)]==_0x166df0[_0x4ab001(0x253)]);return _0x1d2ef4&&!_0x1d2ef4[_0x4ab001(0x2aa)];}),[_0x70bf3e,_0x1fb320];}async function getCoinNumber(_0x373730){const _0xcb892f=_0x3ad44d;let _0x4379ae;try{const _0x5aaba4=await exchange[_0xcb892f(0x29b)]();_0x4379ae=_0x5aaba4['total'][_0x373730];}catch(_0x2e3105){await handleError(_0x2e3105,_0xcb892f(0x1c2));}return _0x4379ae;}async function getOpenOrders(){const _0x12a172=_0x3ad44d;let _0x426d40;allOpenOrders=[];try{for(const _0x1c7599 of config['portfolio']){!_0x1c7599['excluded']&&_0x1c7599[_0x12a172(0x253)]!=config[_0x12a172(0x2f4)]&&(_0x426d40=await exchange['fetchOpenOrders'](_0x1c7599[_0x12a172(0x237)]),_0x426d40['length']>0x0&&allOpenOrders[_0x12a172(0x1a1)](_0x426d40[0x0]));}}catch(_0x7983bf){await handleError(_0x7983bf,'getOpenOrders()');}}async function handleOpenOrders(_0x120971=0x0){const _0x5bc48f=_0x3ad44d;allOpenOrders[_0x5bc48f(0x24e)]==0x0&&lockOrders==ORDERS[_0x5bc48f(0x205)]&&allOrdersPlaced&&(_0x120971==0x0?(logger[_0x5bc48f(0x308)](_0x5bc48f(0x29f)),_0x120971++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5bc48f(0x308)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x5bc48f(0x1ec))));}async function testAPI(_0xa79c3){const _0x5c4c9f=_0x3ad44d,_0xc01ceb=ccxt[_0x5c4c9f(0x26c)][_0xa79c3[_0x5c4c9f(0x212)][_0x5c4c9f(0x209)]()],_0x1ea4c9=new _0xc01ceb({'apiKey':_0xa79c3[_0x5c4c9f(0x1c9)],'secret':_0xa79c3[_0x5c4c9f(0x2db)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5c4c9f(0x316)}});if(_0xa79c3[_0x5c4c9f(0x1ed)])_0x1ea4c9[_0x5c4c9f(0x29a)]=_0xa79c3[_0x5c4c9f(0x1ed)];try{await _0x1ea4c9[_0x5c4c9f(0x2cc)]();}catch(_0x5bcd7e){throw _0x5bcd7e;}}function cloneDeep(_0x288a49){const _0x380687=_0x3ad44d;return JSON[_0x380687(0x1d8)](JSON[_0x380687(0x234)](_0x288a49));}async function getPortfolio(_0x28db7d){const _0x297a12=_0x3ad44d;let _0x2a9c5b=[],_0x1cbe2f=[],_0x119b61=[],_0x257a4b;if(_0x28db7d['apiKey']!==_0x297a12(0x232)||_0x28db7d[_0x297a12(0x2db)]!==_0x297a12(0x232)||_0x28db7d[_0x297a12(0x1ed)]&&_0x28db7d['apiPassword']!==_0x297a12(0x232)){if(config['exchange']){if(_0x28db7d[_0x297a12(0x1c9)]==_0x297a12(0x232))_0x28db7d['apiKey']=config[_0x297a12(0x1c9)];if(_0x28db7d['apiSecret']==_0x297a12(0x232))_0x28db7d[_0x297a12(0x2db)]=config[_0x297a12(0x2db)];if(_0x28db7d[_0x297a12(0x1ed)]=='************')_0x28db7d[_0x297a12(0x1ed)]=config['apiPassword'];try{await testAPI(_0x28db7d);}catch(_0x68e6eb){if(_0x68e6eb['toString']()[_0x297a12(0x23e)](_0x297a12(0x26b))){logger[_0x297a12(0x308)](_0x297a12(0x2b5)),proxyEmit('portfolio',![]);return;}else{handleError(_0x68e6eb,_0x297a12(0x2d9));return;}}}await initExchange(_0x28db7d[_0x297a12(0x212)],_0x28db7d[_0x297a12(0x1c9)],_0x28db7d[_0x297a12(0x2db)],_0x28db7d[_0x297a12(0x1ed)]);try{await loadSymbols();}catch(_0x400e8b){if(_0x400e8b['toString']()[_0x297a12(0x23e)](_0x297a12(0x26b))){proxyEmit(_0x297a12(0x287),![]);return;}else{handleError(_0x400e8b,_0x297a12(0x1ac));return;}}const _0x34941d=await getCoins(![],_0x28db7d[_0x297a12(0x2f4)]);_0x119b61=cloneDeep(_0x34941d[0x1]);}else _0x119b61=cloneDeep(currentCoinsAll);if(_0x28db7d[_0x297a12(0x2f4)]=='')proxyEmit(_0x297a12(0x287),_0x119b61);else{_0x119b61[_0x297a12(0x1ea)](_0x395f97=>{const _0x4d3f53=_0x297a12;if(_0x395f97[_0x4d3f53(0x253)]!=_0x28db7d['basecoin']&&allSymbols[_0x4d3f53(0x23e)](_0x395f97[_0x4d3f53(0x237)]))_0x2a9c5b[_0x4d3f53(0x1a1)](_0x395f97[_0x4d3f53(0x237)]);});if(_0x2a9c5b[_0x297a12(0x24e)]==0x0)logHistory(_0x297a12(0x1bb),_0x297a12(0x2e0));else{try{_0x1cbe2f=await exchange[_0x297a12(0x28e)](_0x2a9c5b);}catch(_0x4d1aa4){if(_0x4d1aa4[_0x297a12(0x270)]()['includes'](_0x297a12(0x26b))){proxyEmit(_0x297a12(0x287),![]);return;}else handleError(_0x4d1aa4,_0x297a12(0x23f));}_0x119b61['forEach'](_0x2dbb80=>{const _0x518b6b=_0x297a12;_0x2dbb80['coin']!=_0x28db7d[_0x518b6b(0x2f4)]?_0x1cbe2f[_0x2dbb80[_0x518b6b(0x237)]]?_0x257a4b=_0x2dbb80[_0x518b6b(0x213)]?0x1/_0x1cbe2f[_0x2dbb80[_0x518b6b(0x237)]][_0x518b6b(0x2ee)]:_0x1cbe2f[_0x2dbb80[_0x518b6b(0x237)]][_0x518b6b(0x2ee)]:_0x257a4b=0x0:_0x257a4b=0x1,_0x2dbb80[_0x518b6b(0x1f0)]=formatResult(_0x257a4b,0x8);}),proxyEmit(_0x297a12(0x287),_0x119b61);}}}function truncateTradeAmount(_0x1827e0,_0x35c9d3){const _0x111b38=_0x3ad44d;let _0x65f36d=0x0;try{_0x65f36d=exchange[_0x111b38(0x2d7)](_0x1827e0,_0x35c9d3);}catch(_0x34fd2a){}return _0x65f36d;}function checkMinimums(_0xe4848b){const _0x172b02=_0x3ad44d;let _0x246f17=!![];const _0xaff514=!_0xe4848b[_0x172b02(0x213)]?markets[_0xe4848b['symbol']][_0x172b02(0x2d5)][_0x172b02(0x1b1)][_0x172b02(0x22d)]:markets[_0xe4848b[_0x172b02(0x237)]][_0x172b02(0x2d5)][_0x172b02(0x18e)]['min'],_0x1e4b49=!_0xe4848b[_0x172b02(0x213)]?markets[_0xe4848b[_0x172b02(0x237)]][_0x172b02(0x2d5)][_0x172b02(0x18e)][_0x172b02(0x22d)]:markets[_0xe4848b[_0x172b02(0x237)]][_0x172b02(0x2d5)]['amount']['min'],_0x207918=truncateTradeAmount(_0xe4848b['symbol'],_0xe4848b[_0x172b02(0x305)]);_0xe4848b['trade']=_0x207918;if(Math[_0x172b02(0x317)](_0x207918)<_0xaff514)_0x246f17=![];if(Math['abs'](_0x207918)*_0xe4848b['last']<_0x1e4b49)_0x246f17=![];if(_0xe4848b[_0x172b02(0x1e6)]=='sell'){let _0x7db62=config[_0x172b02(0x287)][_0x172b02(0x1b9)](_0x593e58=>_0x593e58['coin']==_0xe4848b[_0x172b02(0x253)]);if(_0x7db62['offset']>0x0){if(Math[_0x172b02(0x317)](_0x207918)>_0xe4848b[_0x172b02(0x2e2)]-_0x7db62[_0x172b02(0x22b)])_0x246f17=![];}else{if(Math[_0x172b02(0x317)](_0x207918)>_0xe4848b[_0x172b02(0x2e2)])_0x246f17=![];}}if(_0xe4848b[_0x172b02(0x1e6)]==_0x172b02(0x203)){let _0x4c73e6=config[_0x172b02(0x287)][_0x172b02(0x1b9)](_0x35a7ee=>_0x35a7ee[_0x172b02(0x253)]==config[_0x172b02(0x2f4)]),_0x45f9be=currentCoins['find'](_0x3a1904=>_0x3a1904['coin']==config[_0x172b02(0x2f4)]);if(_0x4c73e6['offset']>0x0){if(Math[_0x172b02(0x317)](_0x207918)*_0xe4848b[_0x172b02(0x2ee)]>_0x45f9be[_0x172b02(0x2e2)]-_0x4c73e6[_0x172b02(0x22b)])_0x246f17=![];}else{if(Math[_0x172b02(0x317)](_0x207918)*_0xe4848b[_0x172b02(0x2ee)]>_0x45f9be[_0x172b02(0x2e2)])_0x246f17=![];}}return _0x246f17;}async function getBalances(_0x1adce0=!![]){const _0x541bb8=_0x3ad44d;let _0x233f28=0x0,_0x681289;const _0x232c03=config[_0x541bb8(0x1b5)];if(config[_0x541bb8(0x302)]&&config[_0x541bb8(0x1d2)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x40ed3f=>{const _0x51b54b=_0x541bb8;if(_0x40ed3f[_0x51b54b(0x253)]!=config[_0x51b54b(0x2f4)]){let _0x22cda1=global[_0x51b54b(0x2c5)][noslash(_0x40ed3f[_0x51b54b(0x237)])];_0x681289=_0x40ed3f[_0x51b54b(0x213)]?0x1/_0x22cda1:_0x22cda1;}else _0x681289=0x1;let _0x3a30be=_0x40ed3f[_0x51b54b(0x2e2)]*_0x681289;_0x233f28+=_0x3a30be,_0x40ed3f[_0x51b54b(0x2ee)]=formatResult(Number(_0x681289),0x8),_0x40ed3f['value']=_0x3a30be;}),currentCoins[_0x541bb8(0x1ea)](_0x48a485=>{const _0x42f985=_0x541bb8;let _0x144a2b=config['portfolio'][_0x42f985(0x1b9)](_0x3d487f=>_0x3d487f[_0x42f985(0x253)]==_0x48a485[_0x42f985(0x253)]),_0x4d111b=Number(_0x144a2b[_0x42f985(0x2ab)]),_0xad66e7=_0x48a485['value']/_0x233f28*0x64,_0x592763=_0x4d111b*_0x233f28/0x64/_0x48a485[_0x42f985(0x2ee)]-_0x48a485[_0x42f985(0x2e2)];_0x48a485[_0x42f985(0x2ab)]=formatResult(_0xad66e7,0x3),_0x48a485['target']=formatResult(_0x4d111b,0x3),_0x48a485[_0x42f985(0x305)]=formatResult(_0x592763,0x8),_0x48a485['side']='',_0x48a485[_0x42f985(0x261)]=![];if(_0x48a485[_0x42f985(0x253)]!=config[_0x42f985(0x2f4)]){if(_0x48a485['distribution']>_0x4d111b)_0x48a485[_0x42f985(0x1e6)]='sell',_0x48a485['valid']=checkMinimums(_0x48a485);else _0x48a485[_0x42f985(0x2ab)]<_0x4d111b&&(_0x48a485[_0x42f985(0x1e6)]=_0x42f985(0x203),_0x48a485[_0x42f985(0x261)]=checkMinimums(_0x48a485));}_0x48a485[_0x42f985(0x198)]=_0x48a485['distribution']/_0x48a485[_0x42f985(0x2ce)]-0x1;if(_0x48a485[_0x42f985(0x195)]==_0x42f985(0x1f6)||_0x48a485['orderstatus']=='canceled')_0x48a485['orderstatus']=_0x42f985(0x2a5);}),currentCoins['sort']((_0x215afd,_0x3cb650)=>_0x215afd['delta']<_0x3cb650[_0x541bb8(0x198)]?0x1:_0x3cb650[_0x541bb8(0x198)]<_0x215afd[_0x541bb8(0x198)]?-0x1:0x0);const _0x324456=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x324456[_0x541bb8(0x31d)],'usd':_0x324456[_0x541bb8(0x2d0)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x232c03},proxyEmit(_0x541bb8(0x1be),{'serverversion':serverversion,'balances':lastBalances});if(_0x1adce0){if(config[_0x541bb8(0x302)])headlessMode({'portfolio':currentCoins,'threshold':_0x232c03});else{if(lockOrders==ORDERS[_0x541bb8(0x296)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x232c03});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1725cf=getNormalizedPerformance();getStartingBalances(_0x1725cf),emitPerformance(_0x1725cf);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x143fe9=getNormalizedPerformance();emitPerformance(_0x143fe9),getStartingBalances(_0x143fe9),logger['debug'](_0x541bb8(0x2c9));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xe14d47=_0x3ad44d;if(!lastBalances)return;let _0x5144ab=[],_0x116be6,_0x6dd5c1=JSON[_0xe14d47(0x1d8)](lastBalances[_0xe14d47(0x287)]);_0x6dd5c1[_0xe14d47(0x1ca)]((_0x207db1,_0x2ed675)=>_0x207db1[_0xe14d47(0x253)]>_0x2ed675['coin']?0x1:_0x2ed675['coin']>_0x207db1[_0xe14d47(0x253)]?-0x1:0x0),_0x6dd5c1[_0xe14d47(0x1ea)](_0x21a93c=>{const _0xcd9191=_0xe14d47;let _0x4d4f6c={'coin':_0x21a93c[_0xcd9191(0x253)],'number':_0x21a93c[_0xcd9191(0x2e2)],'price':_0x21a93c[_0xcd9191(0x2ee)]};_0x5144ab[_0xcd9191(0x1a1)](_0x4d4f6c);});const _0x4f2ba8=await getFiat();_0x116be6={'date':lastBalances[_0xe14d47(0x2cf)][_0xe14d47(0x2b2)]('\x20')[0x0],'eur':_0x4f2ba8['eur'],'usd':_0x4f2ba8[_0xe14d47(0x2d0)],'coins':_0x5144ab};let _0x242a40=dbPerformance[_0xe14d47(0x267)](_0xe14d47(0x1cd))[_0xe14d47(0x1b9)]({'date':_0x116be6[_0xe14d47(0x284)]})[_0xe14d47(0x260)]();_0x242a40?_0x116be6[_0xe14d47(0x284)]!=config[_0xe14d47(0x290)]&&dbPerformance[_0xe14d47(0x267)](_0xe14d47(0x1cd))['find']({'date':_0x116be6[_0xe14d47(0x284)]})[_0xe14d47(0x1c1)](_0x116be6)[_0xe14d47(0x2d6)]():dbPerformance[_0xe14d47(0x267)]('data')[_0xe14d47(0x1a1)](_0x116be6)[_0xe14d47(0x2d6)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x57b4e3=_0x3ad44d;let _0x291ee8=[];if(dbPerformance[_0x57b4e3(0x1fc)](_0x57b4e3(0x1cd))[_0x57b4e3(0x260)]()){let _0x21b317=dbPerformance['get'](_0x57b4e3(0x1cd))[_0x57b4e3(0x2f6)]()[_0x57b4e3(0x1ae)](_0x3476a7=>{const _0x4c0853=_0x57b4e3;if(_0x3476a7[_0x4c0853(0x20d)]['length']==0x0)return![];else return!![];})[_0x57b4e3(0x31c)](_0x57b4e3(0x284))[_0x57b4e3(0x260)](),_0x1ecd79=[...config['liquidity']];_0x1ecd79[_0x57b4e3(0x1ca)]((_0x193cfc,_0x35da37)=>_0x193cfc[_0x57b4e3(0x284)]>_0x35da37[_0x57b4e3(0x284)]?-0x1:_0x35da37['date']>_0x193cfc['date']?0x1:0x0);let _0xb33a3e=0x1,_0x4af016=[],_0x20f00e=0x0;_0x21b317[_0x57b4e3(0x1e2)]()[_0x57b4e3(0x213)]()[_0x57b4e3(0x1ea)]((_0x59d234,_0x426ef7)=>{const _0x546b56=_0x57b4e3;if(_0x1ecd79[_0x20f00e]){if(_0x21b317[_0x21b317[_0x546b56(0x24e)]-_0x426ef7]&&_0x1ecd79[_0x20f00e]['date']==_0x21b317[_0x21b317[_0x546b56(0x24e)]-_0x426ef7][_0x546b56(0x284)]){if(_0x426ef7<_0x21b317[_0x546b56(0x24e)]){let _0x452ae5=0x0,_0x346b82=0x0;_0x21b317[_0x21b317[_0x546b56(0x24e)]-_0x426ef7][_0x546b56(0x20d)][_0x546b56(0x1ea)](_0x165981=>{const _0x10b4b8=_0x546b56;_0x346b82+=_0x165981[_0x10b4b8(0x2e2)]*_0x165981[_0x10b4b8(0x1f0)];}),_0x1ecd79[_0x20f00e]['changes'][_0x546b56(0x1ea)](_0x4c5bed=>{const _0x5cd472=_0x546b56;_0x452ae5+=_0x4c5bed[_0x5cd472(0x2e2)]*_0x4c5bed[_0x5cd472(0x1f0)];}),_0xb33a3e*=_0x452ae5/(_0x346b82-_0x452ae5)+0x1;}_0x20f00e++;}}let _0x4c0a8b=0x0;_0x59d234[_0x546b56(0x20d)][_0x546b56(0x1ea)](_0x583b91=>{const _0xabe78c=_0x546b56;_0x4c0a8b+=_0x583b91[_0xabe78c(0x2e2)]*_0x583b91[_0xabe78c(0x1f0)];}),_0x4af016[_0x21b317[_0x546b56(0x24e)]-_0x426ef7-0x1]=_0x4c0a8b*(_0xb33a3e-0x1);});let _0x2775d1=[];_0x1ecd79=[...config[_0x57b4e3(0x2c2)]]||[];let _0x384d49=0x0;_0x20f00e=0x0,_0x21b317[_0x57b4e3(0x1ea)]((_0x238ddc,_0x499e3a)=>{const _0x5a39fa=_0x57b4e3;if(_0x1ecd79[_0x20f00e]){const _0x2894f0=fns[_0x5a39fa(0x1d8)](_0x1ecd79[_0x20f00e][_0x5a39fa(0x284)],'yyyy/MM/dd',new Date()),_0x56d031=fns[_0x5a39fa(0x1d8)](_0x238ddc[_0x5a39fa(0x284)],_0x5a39fa(0x299),new Date());if(fns[_0x5a39fa(0x2f7)](_0x2894f0,_0x56d031)){let _0x131dea=0x0;_0x1ecd79[_0x20f00e][_0x5a39fa(0x20f)][_0x5a39fa(0x1ea)](_0x835632=>{const _0x32f71c=_0x5a39fa;!_0x2775d1[_0x835632[_0x32f71c(0x253)]]?_0x2775d1[_0x835632[_0x32f71c(0x253)]]=_0x835632[_0x32f71c(0x2e2)]:(_0x131dea=_0x2775d1[_0x835632[_0x32f71c(0x253)]],_0x2775d1[_0x835632[_0x32f71c(0x253)]]+=_0x835632[_0x32f71c(0x2e2)]);const _0x55419a=_0x238ddc[_0x32f71c(0x20d)]['find'](_0x3a36e9=>_0x3a36e9[_0x32f71c(0x253)]==_0x835632[_0x32f71c(0x253)]);(!_0x55419a||_0x55419a['number']==0x0)&&(_0x384d49+=(-_0x835632[_0x32f71c(0x2e2)]-_0x131dea)*_0x835632['price']);}),_0x20f00e++;}}_0x238ddc[_0x5a39fa(0x20d)]['forEach']((_0x1b5313,_0x11493e)=>{const _0x19196f=_0x5a39fa;_0x2775d1[_0x1b5313[_0x19196f(0x253)]]&&(_0x1b5313[_0x19196f(0x2d3)]=_0x2775d1[_0x1b5313[_0x19196f(0x253)]]);}),_0x291ee8[_0x5a39fa(0x1a1)]({'date':_0x238ddc[_0x5a39fa(0x284)],'eur':_0x238ddc['eur'],'usd':_0x238ddc[_0x5a39fa(0x2d0)],'offset':_0x4af016[_0x499e3a],'netoffset':_0x384d49,'coins':_0x238ddc[_0x5a39fa(0x20d)]});});}return _0x291ee8;}function emitPerformance(_0x1d3df0){const _0x585986=_0x3ad44d;_0x1d3df0['length']!==0x0?(proxyEmit(_0x585986(0x24f),_0x1d3df0),lastPerformanceEmitted=getDate()):proxyEmit(_0x585986(0x24f),[]);}function getPerf(_0x3a9904,_0x27d270){const _0x5ba1d7=_0x3ad44d;let _0x31d17b=0x0,_0x316726=0x0,_0x2eb7d7=0x0;_0x3a9904['coins'][_0x5ba1d7(0x1ea)](_0x1cbcc9=>{_0x31d17b+=_0x1cbcc9['number']*_0x1cbcc9['price'];});_0x27d270&&(_0x31d17b+=_0x3a9904[_0x5ba1d7(0x22b)]);if(config['basecoin']===_0x5ba1d7(0x2f3)||config['basecoin']==='ETH')_0x316726=_0x31d17b*_0x3a9904[_0x5ba1d7(0x31d)],_0x2eb7d7=_0x31d17b*_0x3a9904[_0x5ba1d7(0x2d0)];else{if(usdBasecoins[_0x5ba1d7(0x23e)](config[_0x5ba1d7(0x2f4)]))_0x316726=_0x31d17b*_0x3a9904['eur']/_0x3a9904['usd'],_0x2eb7d7=_0x31d17b;else config[_0x5ba1d7(0x2f4)]===_0x5ba1d7(0x200)&&(_0x316726=_0x31d17b,_0x2eb7d7=_0x31d17b*_0x3a9904[_0x5ba1d7(0x2d0)]/_0x3a9904['eur']);}return[_0x31d17b,_0x316726,_0x2eb7d7];}function getKPIs(_0x4ddf62,_0x1110c4=_0x3ad44d(0x200)){const _0x4c9aa9=_0x3ad44d,_0x552dd4=config['basecoin'],_0x4d1fd4=lastBalances,_0x416859=currentCoins,_0x4daa8d=getNormalizedPerformance(),_0x4d22b4=_0x4ddf62===_0x4c9aa9(0x2f4)?_0x552dd4:_0x4ddf62==='fiat'||_0x4ddf62==='net-fiat'?_0x1110c4:'Net\x20'+_0x552dd4,_0x3b0250=_0x4ddf62===_0x4c9aa9(0x1dc)?_0x4c9aa9(0x1af):_0x4ddf62===_0x4c9aa9(0x192)?_0x4c9aa9(0x1af):_0x4d22b4+'\x20value',_0x25d6dd=_0x4ddf62===_0x4c9aa9(0x1dc)||_0x4ddf62===_0x4c9aa9(0x192)?'Net\x20effect':_0x4d22b4+_0x4c9aa9(0x277);let _0x1f93be=0x0;_0x416859[_0x4c9aa9(0x1ea)](_0x595d5b=>{const _0x5e13ab=_0x4c9aa9;_0x1f93be+=_0x595d5b[_0x5e13ab(0x2e2)]*_0x595d5b[_0x5e13ab(0x2ee)];});if(_0x4ddf62===_0x4c9aa9(0x24c)||_0x4ddf62==='net-fiat'){if(_0x552dd4===_0x4c9aa9(0x2f3)||_0x552dd4===_0x4c9aa9(0x29d))_0x1f93be=_0x1f93be*(_0x1110c4===_0x4c9aa9(0x200)?_0x4d1fd4[_0x4c9aa9(0x31d)]:_0x4d1fd4[_0x4c9aa9(0x2d0)]);else{if(usdBasecoins['includes'](_0x552dd4))_0x1f93be=_0x1f93be*(_0x1110c4===_0x4c9aa9(0x200)?_0x4d1fd4[_0x4c9aa9(0x31d)]/_0x4d1fd4[_0x4c9aa9(0x2d0)]:0x1);else _0x552dd4===_0x4c9aa9(0x200)&&(_0x1f93be=_0x1f93be*(_0x1110c4==='EUR'?0x1:_0x4d1fd4[_0x4c9aa9(0x2d0)]/_0x4d1fd4[_0x4c9aa9(0x31d)]));}}let _0x2be1d1;if(_0x1f93be!==0x0){if(_0x4ddf62===_0x4c9aa9(0x2f4))_0x2be1d1=(_0x1f93be/startingBalances['basecoin']-0x1)*0x64;else{if(_0x1110c4===_0x4c9aa9(0x200))_0x2be1d1=(_0x1f93be/startingBalances['eur']-0x1)*0x64;else _0x2be1d1=(_0x1f93be/startingBalances[_0x4c9aa9(0x2d0)]-0x1)*0x64;}let _0x15a5ea=0x0;if(startingBalances[_0x4c9aa9(0x20d)])_0x416859['forEach'](_0x416afc=>{const _0x49ac29=_0x4c9aa9;let _0x3d7137=startingBalances['coins']['find'](_0x31d0ed=>_0x31d0ed[_0x49ac29(0x253)]===_0x416afc['coin']);if(_0x3d7137&&_0x3d7137[_0x49ac29(0x253)]&&_0x416afc[_0x49ac29(0x2e2)]!==0x0)_0x15a5ea+=_0x3d7137[_0x49ac29(0x2e2)]*_0x416afc[_0x49ac29(0x2ee)];});let _0x116c3b=0x0;if(_0x4daa8d['length']!==0x0){let _0x23ae48=_0x4daa8d[_0x4daa8d[_0x4c9aa9(0x24e)]-0x1];_0x116c3b=_0x23ae48['netoffset'];}_0x15a5ea-=_0x116c3b;_0x4ddf62===_0x4c9aa9(0x1dc)&&(_0x2be1d1=(_0x1f93be-_0x15a5ea)/startingBalances[_0x4c9aa9(0x2f4)]*0x64,_0x1f93be=_0x1f93be-_0x15a5ea);if(_0x4ddf62===_0x4c9aa9(0x192)){let _0x4ecf0d=_0x1110c4==='EUR'?startingBalances[_0x4c9aa9(0x31d)]:startingBalances[_0x4c9aa9(0x2d0)];if(_0x552dd4===_0x4c9aa9(0x2f3)||_0x552dd4==='ETH')_0x15a5ea=_0x1110c4==='EUR'?_0x15a5ea*_0x4d1fd4[_0x4c9aa9(0x31d)]:_0x15a5ea*_0x4d1fd4['usd'];else{if(usdBasecoins[_0x4c9aa9(0x23e)](_0x552dd4))_0x15a5ea=_0x1110c4===_0x4c9aa9(0x200)?_0x15a5ea*_0x4d1fd4['eur']/_0x4d1fd4[_0x4c9aa9(0x2d0)]:_0x15a5ea;else _0x552dd4===_0x4c9aa9(0x200)&&(_0x15a5ea=_0x1110c4===_0x4c9aa9(0x200)?_0x15a5ea:_0x15a5ea*_0x4d1fd4[_0x4c9aa9(0x2d0)]/_0x4d1fd4[_0x4c9aa9(0x31d)]);}_0x2be1d1=(_0x1f93be-_0x15a5ea)/_0x4ecf0d*0x64,_0x1f93be=_0x1f93be-_0x15a5ea;}if(_0x2be1d1){if(_0x2be1d1<0x64)_0x2be1d1=_0x2be1d1[_0x4c9aa9(0x21d)](0x2);else{if(_0x2be1d1<0x3e8)_0x2be1d1=_0x2be1d1[_0x4c9aa9(0x21d)](0x1);else _0x2be1d1=_0x2be1d1['toFixed'](0x0);}}else _0x2be1d1=Number('0')[_0x4c9aa9(0x21d)](0x2);if(_0x1f93be){if(Math[_0x4c9aa9(0x317)](_0x1f93be)<0.000001)_0x1f93be=_0x1f93be['toFixed'](0x2);else{if(Math['abs'](_0x1f93be)<0.1)_0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x6);else{if(Math[_0x4c9aa9(0x317)](_0x1f93be)<0x1)_0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x5);else{if(Math[_0x4c9aa9(0x317)](_0x1f93be)<0xa)_0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x4);else{if(Math['abs'](_0x1f93be)<0x64)_0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x3);else{if(Math[_0x4c9aa9(0x317)](_0x1f93be)<0x3e8)_0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x2);else _0x1f93be=_0x1f93be[_0x4c9aa9(0x21d)](0x2);}}}}}}else _0x1f93be=Number('0')[_0x4c9aa9(0x21d)](0x2);}else _0x2be1d1=Number('0')[_0x4c9aa9(0x21d)](0x2);return{'value':_0x1f93be,'change':_0x2be1d1,'leftTxt':_0x3b0250,'rightTxt':_0x25d6dd};}async function getStartingBalances(_0x4ee3cc,_0x20ef25=!![]){const _0x20b310=_0x3ad44d;if(_0x4ee3cc['length']!==0x0){const [_0x1a00af,_0x28e30b,_0xfb712e]=getPerf(_0x4ee3cc[0x0],!![]);let _0x3a0f8d=[];config[_0x20b310(0x287)][_0x20b310(0x1ea)](_0x18965f=>{const _0x3f2236=_0x20b310;let _0x509b3f=0x0,_0x5475d5;config['liquidity']['forEach'](_0x25c990=>{const _0x5990cb=_0xa7ef;let _0x24be23=_0x25c990[_0x5990cb(0x20f)][_0x5990cb(0x1b9)](_0xf5d0e1=>_0xf5d0e1['coin']==_0x18965f[_0x5990cb(0x253)]);if(_0x24be23){_0x509b3f+=_0x24be23[_0x5990cb(0x2e2)];if(!_0x5475d5)_0x5475d5=_0x24be23['price'];}}),_0x3a0f8d[_0x3f2236(0x1a1)]({'coin':_0x18965f[_0x3f2236(0x253)],'number':_0x509b3f,'initialprice':_0x5475d5});});const _0x551655={'basecoin':_0x1a00af,'eur':_0x28e30b,'usd':_0xfb712e,'coins':_0x3a0f8d};if(_0x20ef25)proxyEmit(_0x20b310(0x242),_0x551655);startingBalances=_0x551655;}}function headlessMode(_0x3a2dc3){const _0x142a5e=_0x3ad44d;let _0x5dc515=_0x3a2dc3[_0x142a5e(0x287)],_0xc0a868=_0x3a2dc3['threshold'],_0x531deb=[];for(let _0x2303c0 of _0x5dc515){if(_0x2303c0['coin']!=config['basecoin']){if(_0x2303c0[_0x142a5e(0x198)]>=_0xc0a868/0x64){if(_0x2303c0['valid'])_0x531deb[_0x142a5e(0x1a1)](_0x2303c0);}else{if(_0x2303c0[_0x142a5e(0x198)]<=-_0xc0a868/0x64){if(_0x2303c0[_0x142a5e(0x261)])_0x531deb[_0x142a5e(0x1a1)](_0x2303c0);}}}}_0x531deb['length']>0x0&&placeOrder(_0x531deb);}function notifyBalance(_0x5751bc){const _0x3e8acf=_0x3ad44d;let _0x1b0b37=_0x5751bc[_0x3e8acf(0x287)],_0x390d81=_0x5751bc[_0x3e8acf(0x1b5)],_0x324611=[];for(let _0x55f558 of _0x1b0b37){if(_0x55f558['coin']!=config[_0x3e8acf(0x2f4)]){if(_0x55f558['delta']>=_0x390d81/0x64){if(_0x55f558[_0x3e8acf(0x261)])_0x324611[_0x3e8acf(0x1a1)](_0x55f558);}else{if(_0x55f558['delta']<=-_0x390d81/0x64){if(_0x55f558['valid'])_0x324611['push'](_0x55f558);}}}}if(_0x324611['length']>0x0){let _0x43006c=_0x324611[_0x3e8acf(0x1b8)](_0x33700d=>_0x33700d[_0x3e8acf(0x253)]);_0x43006c[_0x3e8acf(0x1ca)]();let _0x18dc2d=_0x43006c[_0x3e8acf(0x273)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3e8acf(0x224),_0x3e8acf(0x318));lastCoinsToBalance=_0x18dc2d;}}function symbolToCoin(_0x118e01){const _0x240cf5=_0x3ad44d;let _0x23c447;if(_0x118e01[_0x240cf5(0x23e)]('/'+config[_0x240cf5(0x2f4)]))_0x23c447=_0x118e01[_0x240cf5(0x1f3)]('/'+config[_0x240cf5(0x2f4)],'');if(_0x118e01[_0x240cf5(0x23e)](config[_0x240cf5(0x2f4)]+'/'))_0x23c447=_0x118e01['replace'](config[_0x240cf5(0x2f4)]+'/','');return _0x23c447;}async function unlockOrders(){const _0x146192=_0x3ad44d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x146192(0x205)]){logger[_0x146192(0x308)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x146192(0x230)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x51671e=await getCoins();[currentCoins,currentCoinsAll]=_0x51671e,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x146192(0x296)],logger[_0x146192(0x308)](_0x146192(0x21b));}}async function validateOrders(_0x226f57){const _0x291c92=_0x3ad44d;if(_0x226f57)validateOrdersState=_0x226f57;logger[_0x291c92(0x308)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x291c92(0x1e0)+(lockOrders==0x1?_0x291c92(0x295):lockOrders==0x2?_0x291c92(0x1e8):_0x291c92(0x249)));let _0x5b2df0=[],_0x490ebb=config[_0x291c92(0x208)]==_0x291c92(0x1c4)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x291c92(0x1f8)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x291c92(0x308)](_0x291c92(0x18c)+validateOrdersState),lastOrders[_0x291c92(0x1ea)](_0x5f27a5=>{const _0x5588d5=_0x291c92;let _0x511576=![];_0x5f27a5['filled']>0x0&&(_0x511576=!![]),_0x5b2df0[_0x5588d5(0x1a1)](_0x511576),_0x511576&&config['ordertype']!=_0x5588d5(0x1c4)&&logHistory(_0x5588d5(0x2c0),_0x5588d5(0x1bc)+_0x5f27a5[_0x5588d5(0x237)]+'\x20'+_0x5f27a5[_0x5588d5(0x1e6)]+'\x20#'+formatResult(_0x5f27a5['filled'],0x8)+'\x20@'+formatResult(_0x5f27a5[_0x5588d5(0x1f0)],0x8));}),_0x5b2df0[_0x291c92(0x1ea)]((_0x1c05a1,_0x374f8b)=>{const _0x4d0037=_0x291c92;if(_0x1c05a1)lastOrders[_0x4d0037(0x28f)](_0x374f8b,0x1);}),persistOpenOrders(lastOrders);const _0x39db56=coolingDown?_0x291c92(0x1e9):'balancing\x20resumed';if(validateOrdersState==_0x291c92(0x2d3)){validateOrdersState=_0x291c92(0x1f7);if(_0x5b2df0[_0x291c92(0x23e)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x291c92(0x1f7)){if(_0x5b2df0[_0x291c92(0x23e)](![])){}else{if(allOrdersPlaced){if(config[_0x291c92(0x208)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x291c92(0x225))_0x5b2df0['includes'](![])&&(config[_0x291c92(0x208)]==_0x291c92(0x1c4)?logHistory(_0x291c92(0x2b1),_0x291c92(0x293)+Math[_0x291c92(0x27d)](_0x490ebb*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x39db56):(await cancelOrders(),logHistory(_0x291c92(0x2b1),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x291c92(0x27d)](_0x490ebb*validateOrderInterval/0xea60)+_0x291c92(0x2e6)+_0x39db56))),await unlockOrders();else{if(validateOrdersState==_0x291c92(0x1ec)){if(config[_0x291c92(0x208)]!=_0x291c92(0x1c4))logHistory('success',_0x291c92(0x18b)+_0x39db56);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x50e831=>{const _0x4897df=_0xa7ef;try{const _0x2914d3=await exchange[_0x4897df(0x238)](_0x50e831[_0x4897df(0x20a)],_0x50e831[_0x4897df(0x237)]);}catch(_0x5a6c84){if(_0x5a6c84['toString']()[_0x4897df(0x23e)](_0x4897df(0x28b))){}else await handleError(_0x5a6c84,_0x4897df(0x227));}});}async function initCoinResults(_0x1a47d6){const _0x1d9bd2=_0x3ad44d;_0x1a47d6?logger[_0x1d9bd2(0x308)](_0x1d9bd2(0x30b)+_0x1a47d6):logger['debug'](_0x1d9bd2(0x25b)),config[_0x1d9bd2(0x287)][_0x1d9bd2(0x1ea)](_0x536a78=>{const _0x2d0857=_0x1d9bd2;if(!_0x536a78[_0x2d0857(0x2aa)]&&_0x536a78[_0x2d0857(0x253)]!=config[_0x2d0857(0x2f4)]){const _0x126cd0=currentCoins['find'](_0x4df146=>_0x4df146[_0x2d0857(0x253)]==_0x536a78[_0x2d0857(0x253)]),_0x19be25=global[_0x2d0857(0x2c5)][noslash(_0x536a78[_0x2d0857(0x237)])];let _0x298b3d=_0x126cd0?_0x126cd0[_0x2d0857(0x2e2)]:null,_0x8f014e=_0x536a78[_0x2d0857(0x213)]?0x1/_0x19be25:_0x19be25,_0x1c5afb;config[_0x2d0857(0x2c2)][_0x2d0857(0x1ea)](_0x5d14b6=>{const _0x146526=_0x2d0857;!_0x1c5afb&&(_0x1c5afb=_0x5d14b6[_0x146526(0x20f)][_0x146526(0x1b9)](_0x5c151f=>_0x5c151f[_0x146526(0x253)]==_0x536a78[_0x146526(0x253)]),_0x1c5afb&&(_0x298b3d=_0x1c5afb[_0x146526(0x2e2)],_0x8f014e=_0x1c5afb[_0x146526(0x1f0)]));});let _0x3e8a42=dbCoinResults['get'](_0x2d0857(0x20d))['find']({'coin':_0x536a78['coin']})[_0x2d0857(0x260)]();if(!_0x3e8a42){const _0x37ddcd={'coin':_0x536a78['coin'],'number':_0x298b3d,'breakeven':_0x8f014e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x2d0857(0x1a1)](_0x37ddcd)[_0x2d0857(0x2d6)]();}else{if(_0x1a47d6&&_0x536a78['coin']==_0x1a47d6){const _0x4981ed={'coin':_0x536a78['coin'],'number':_0x298b3d,'breakeven':_0x8f014e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2d0857(0x267)](_0x2d0857(0x20d))['find']({'coin':_0x536a78[_0x2d0857(0x253)]})[_0x2d0857(0x1c1)](_0x4981ed)[_0x2d0857(0x2d6)]();}}}});}async function updateCoinResults(_0x1e7417,_0x34fc99=![]){const _0x51c24e=_0x3ad44d;let _0x20eb93,_0x57ac78,_0x1e6416,_0x2a6a06,_0x482203,_0x294b5c,_0x31056d=dbCoinResults['get'](_0x51c24e(0x20d))['find']({'coin':_0x1e7417['coin']})[_0x51c24e(0x260)](),_0x244c05=![];_0x31056d&&Object[_0x51c24e(0x314)](_0x31056d)[_0x51c24e(0x1ea)](([_0x5d5568,_0x561798])=>{if(_0x561798==null)_0x244c05=!![];});(!_0x31056d||_0x244c05)&&(await initCoinResults(_0x1e7417['coin']),_0x31056d=dbCoinResults[_0x51c24e(0x267)](_0x51c24e(0x20d))[_0x51c24e(0x1b9)]({'coin':_0x1e7417['coin']})['value']());_0x1e7417['reverse']&&(_0x294b5c={'filled':_0x1e7417[_0x51c24e(0x1f6)]*_0x1e7417[_0x51c24e(0x1f0)],'amount':_0x1e7417['filled']*_0x1e7417['price'],'side':_0x1e7417[_0x51c24e(0x1e6)]==_0x51c24e(0x1d5)?_0x51c24e(0x203):_0x51c24e(0x1d5),'price':0x1/_0x1e7417[_0x51c24e(0x1f0)]},_0x1e7417={..._0x1e7417,..._0x294b5c});_0x34fc99?_0x57ac78=_0x1e7417[_0x51c24e(0x1e6)]==_0x51c24e(0x203)?_0x31056d[_0x51c24e(0x2e2)]+_0x1e7417['filled']:_0x31056d[_0x51c24e(0x2e2)]-_0x1e7417[_0x51c24e(0x1f6)]:_0x57ac78=await getCoinNumber(_0x1e7417['coin']);if(_0x1e7417[_0x51c24e(0x2f0)]&&_0x1e7417[_0x51c24e(0x2f0)][_0x51c24e(0x22c)]==config[_0x51c24e(0x2f4)])_0x20eb93=_0x1e7417['fee']['cost'];else{if(_0x1e7417['fee']&&_0x1e7417[_0x51c24e(0x2f0)]['currency']==_0x51c24e(0x1d6)&&!_0x34fc99)_0x20eb93=_0x1e7417[_0x51c24e(0x2f0)]['cost']*global[_0x51c24e(0x2c5)][_0x51c24e(0x1d6)+config[_0x51c24e(0x2f4)]];else _0x20eb93=defaultFee*_0x1e7417[_0x51c24e(0x1f6)]*_0x1e7417[_0x51c24e(0x1f0)];}_0x1e7417[_0x51c24e(0x1e6)]=='buy'?(_0x1e6416=_0x57ac78!=0x0?(_0x31056d['breakeven']*_0x31056d[_0x51c24e(0x2e2)]+_0x1e7417['price']*(_0x57ac78-_0x31056d[_0x51c24e(0x2e2)])+_0x20eb93)/_0x57ac78:0x0,_0x2a6a06=_0x31056d[_0x51c24e(0x31a)]):(_0x1e6416=_0x57ac78!=0x0?(_0x31056d['breakeven']*_0x31056d[_0x51c24e(0x2e2)]-_0x1e7417[_0x51c24e(0x1f0)]*(_0x31056d[_0x51c24e(0x2e2)]-_0x57ac78)+_0x20eb93)/_0x57ac78:0x0,_0x2a6a06=_0x31056d['realized']+(_0x1e7417[_0x51c24e(0x1f0)]-_0x31056d[_0x51c24e(0x325)])*_0x1e7417[_0x51c24e(0x1f6)]);_0x482203=(_0x1e7417[_0x51c24e(0x1f0)]-_0x1e6416-_0x20eb93/_0x1e7417['filled'])*_0x57ac78;let _0x15566b={'coin':_0x1e7417[_0x51c24e(0x253)],'number':_0x57ac78,'breakeven':formatResult(_0x1e6416,0x8),'realized':formatResult(_0x2a6a06,0x8),'unrealized':formatResult(_0x482203,0x8),'fees':formatResult(_0x31056d[_0x51c24e(0x2e5)]+_0x20eb93,0x8),'sells':_0x1e7417[_0x51c24e(0x1e6)]==_0x51c24e(0x1d5)?_0x31056d[_0x51c24e(0x324)]+0x1:_0x31056d[_0x51c24e(0x324)],'buys':_0x1e7417[_0x51c24e(0x1e6)]==_0x51c24e(0x203)?_0x31056d[_0x51c24e(0x309)]+0x1:_0x31056d[_0x51c24e(0x309)]};dbCoinResults[_0x51c24e(0x267)](_0x51c24e(0x20d))[_0x51c24e(0x1b9)]({'coin':_0x1e7417[_0x51c24e(0x253)]})[_0x51c24e(0x1c1)](_0x15566b)['write']();if(!_0x34fc99){if(_0x1e7417[_0x51c24e(0x2f0)]&&_0x1e7417[_0x51c24e(0x2f0)][_0x51c24e(0x22c)]=='BNB'){const _0x537335=currentCoins['find'](_0x5797b2=>_0x5797b2['coin']==_0x51c24e(0x1d6));if(_0x537335){let _0x51cafe=dbCoinResults[_0x51c24e(0x267)]('coins')['find']({'coin':'BNB'})[_0x51c24e(0x260)]();_0x15566b={..._0x51cafe,'number':_0x537335[_0x51c24e(0x2e2)]},dbCoinResults[_0x51c24e(0x267)](_0x51c24e(0x20d))[_0x51c24e(0x1b9)]({'coin':_0x51c24e(0x1d6)})[_0x51c24e(0x1c1)](_0x15566b)['write']();}}}}async function placeOrder(_0x35faa2){const _0x1fcc55=_0x3ad44d,_0x1d8d58=config[_0x1fcc55(0x208)]=='market'?_0x1fcc55(0x1c4):_0x1fcc55(0x29c);if(lockOrders==ORDERS[_0x1fcc55(0x296)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1fcc55(0x205)],allOrdersPlaced=![],validateOrdersState='initial';let _0x3d6b48=![];lastOrders=[];for(const _0x594420 of _0x35faa2){let _0x2e0255,_0x297b43,_0x757515,_0x2143a9,_0x2e221a,_0x38c8aa=_0x594420[_0x1fcc55(0x237)];try{const _0x5a69e6=await exchange[_0x1fcc55(0x320)](_0x38c8aa);_0x2e0255=_0x594420[_0x1fcc55(0x213)]?0x1/_0x594420[_0x1fcc55(0x2ee)]:_0x594420[_0x1fcc55(0x2ee)],_0x297b43=_0x5a69e6[_0x1fcc55(0x226)],_0x757515=_0x5a69e6[_0x1fcc55(0x246)];_0x594420[_0x1fcc55(0x213)]?(_0x2143a9=_0x594420[_0x1fcc55(0x1e6)]==_0x1fcc55(0x203)?'sell':'buy',_0x2e221a=Math['abs'](_0x594420[_0x1fcc55(0x305)])/_0x2e0255):(_0x2143a9=_0x594420[_0x1fcc55(0x1e6)],_0x2e221a=Math[_0x1fcc55(0x317)](_0x594420[_0x1fcc55(0x305)]));_0x1d8d58==_0x1fcc55(0x29c)&&(config[_0x1fcc55(0x208)]=='limit-high'&&(_0x2e0255=_0x2143a9=='buy'?_0x297b43:_0x757515),config[_0x1fcc55(0x208)]==_0x1fcc55(0x27a)&&(_0x2e0255=_0x2143a9==_0x1fcc55(0x203)?_0x757515:_0x297b43));_0x2e221a=formatResult(_0x2e221a,0x8),_0x2e0255=formatResult(_0x2e0255,0x8);const _0x418d9a=_0x2143a9==_0x1fcc55(0x1d5)?config[_0x1fcc55(0x307)]?String[_0x1fcc55(0x2b9)]('0x'+config[_0x1fcc55(0x307)])+'\x20':'':config[_0x1fcc55(0x1fb)]?String[_0x1fcc55(0x2b9)]('0x'+config['emojibuy'])+'\x20':'',_0x488937=_0x1d8d58==_0x1fcc55(0x1c4)?_0x1fcc55(0x18d):config[_0x1fcc55(0x208)]==_0x1fcc55(0x1f9)?_0x1fcc55(0x24b):'Limit\x20(low-margin)',_0x4686a2=(Math[_0x1fcc55(0x2fb)](Math[_0x1fcc55(0x1a2)]()*0x35a4e900)+0x5f5e100)[_0x1fcc55(0x270)]();lastOrders[_0x1fcc55(0x1a1)]({'customId':_0x4686a2,'symbol':_0x38c8aa,'coin':_0x594420[_0x1fcc55(0x253)],'amount':_0x2e221a,'price':_0x2e0255,'side':_0x2143a9,'reverse':_0x594420[_0x1fcc55(0x213)],'filled':0x0});if(_0x1d8d58==_0x1fcc55(0x1c4))logHistory(_0x1fcc55(0x2c0),''+_0x418d9a+_0x488937+_0x1fcc55(0x1df)+_0x38c8aa+'\x20'+_0x2143a9+'\x20#'+formatResult(_0x2e221a,0x8)+'\x20@'+formatResult(_0x2e0255,0x8));else logHistory('order',''+_0x418d9a+_0x488937+_0x1fcc55(0x1df)+_0x38c8aa+'\x20'+_0x2143a9+'\x20#'+formatResult(_0x2e221a,0x8)+'\x20@'+formatResult(_0x2e0255,0x8));let _0x3d6156;_0x1d8d58==_0x1fcc55(0x1c4)?_0x2143a9=='buy'&&[_0x1fcc55(0x220),'Bitget','Cex',_0x1fcc55(0x1db),_0x1fcc55(0x2c8)]['includes'](config[_0x1fcc55(0x212)])?_0x3d6156=await exchange[_0x1fcc55(0x1cb)](_0x38c8aa,_0x1d8d58,_0x2143a9,_0x2e221a,_0x2e0255):_0x3d6156=await exchange['createOrder'](_0x38c8aa,_0x1d8d58,_0x2143a9,_0x2e221a,undefined):_0x3d6156=await exchange['createOrder'](_0x38c8aa,_0x1d8d58,_0x2143a9,_0x2e221a,_0x2e0255);logger[_0x1fcc55(0x308)](_0x1fcc55(0x235)+_0x3d6156['id']+_0x1fcc55(0x1ab)+_0x4686a2);const _0x4c0054=lastOrders[_0x1fcc55(0x24e)]-0x1;if(_0x4c0054>=0x0&&lastOrders[_0x4c0054][_0x1fcc55(0x29e)]==_0x4686a2){lastOrders[_0x4c0054][_0x1fcc55(0x20a)]=_0x3d6156['id'];if(_0x3d6156[_0x1fcc55(0x1b1)])lastOrders[_0x4c0054]['amount']=_0x3d6156[_0x1fcc55(0x1b1)];if(_0x3d6156[_0x1fcc55(0x1f0)])lastOrders[_0x4c0054][_0x1fcc55(0x1f0)]=_0x3d6156[_0x1fcc55(0x1f0)];lastOrders[_0x4c0054][_0x1fcc55(0x2f0)]=_0x3d6156['fee'];}if(config[_0x1fcc55(0x1f1)]!=0x0){let _0x139de2=null;if(cooldownTracker[_0x1fcc55(0x24e)]==config[_0x1fcc55(0x1f1)]-0x1)_0x139de2=cooldownTracker[_0x1fcc55(0x292)]();const _0x1233c9=getTimeStamp();cooldownTracker[_0x1fcc55(0x1a1)](_0x1233c9);if(_0x139de2){const _0x106be4=fns[_0x1fcc55(0x250)](new Date(_0x1233c9),new Date(_0x139de2));if(_0x106be4<cooldownInterval){logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x23c)+config[_0x1fcc55(0x1f1)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x1fcc55(0x2bf)+cooldownPeriod/(0xe10*0x3e8)+_0x1fcc55(0x1ff)),coolingDown=!![];break;}}}}catch(_0xb84b8){if(_0xb84b8[_0x1fcc55(0x270)]()[_0x1fcc55(0x23e)](_0x1fcc55(0x30c)))lastOrders=lastOrders[_0x1fcc55(0x1ae)](_0x25e198=>_0x25e198[_0x1fcc55(0x237)]!=_0x38c8aa),logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x21e)+_0x38c8aa),_0x3d6b48=!![];else{if(_0xb84b8[_0x1fcc55(0x270)]()[_0x1fcc55(0x23e)](_0x1fcc55(0x1a6)))lastOrders=lastOrders['filter'](_0x1be7b2=>_0x1be7b2[_0x1fcc55(0x237)]!=_0x38c8aa),logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x300)+_0x38c8aa),_0x3d6b48=!![];else{if(_0xb84b8['toString']()[_0x1fcc55(0x23e)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x682cf0=>_0x682cf0[_0x1fcc55(0x237)]!=_0x38c8aa),logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x19c)+_0x38c8aa),logger[_0x1fcc55(0x308)](_0xb84b8),_0x3d6b48=!![];else _0xb84b8['toString']()[_0x1fcc55(0x23e)](_0x1fcc55(0x199))?(lastOrders=lastOrders['filter'](_0x25bea3=>_0x25bea3[_0x1fcc55(0x237)]!=_0x38c8aa),logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x21e)+_0x38c8aa),_0x3d6b48=!![]):(lastOrders=lastOrders['filter'](_0x1abcf9=>_0x1abcf9[_0x1fcc55(0x237)]!=_0x38c8aa),await handleError(_0xb84b8,'placeOrder()',_0x38c8aa));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1fcc55(0x24e)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x39e5a1=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1fcc55(0x1f8)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x199eb0=_0x1fcc55;validateOrders(_0x199eb0(0x225));},_0x39e5a1);}else unlockOrders();_0x3d6b48&&config[_0x1fcc55(0x302)]&&(logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x2de)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1fcc55(0x2b1),_0x1fcc55(0x2af)));}else{if(coolingDown)!config[_0x1fcc55(0x302)]&&logHistory(_0x1fcc55(0x1bb),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x1fcc55(0x302)]&&(config[_0x1fcc55(0x208)]=='market'?logHistory(_0x1fcc55(0x1bb),_0x1fcc55(0x1aa)):logHistory(_0x1fcc55(0x1bb),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x42ef69){const _0x1d9c24=_0x3ad44d,_0x227ba7={...config,'openOrders':_0x42ef69};let _0x1fa169=dbConfig[_0x1d9c24(0x267)](_0x1d9c24(0x1e3))[_0x1d9c24(0x1b9)]({'botID':botID})[_0x1d9c24(0x260)]();_0x1fa169&&dbConfig[_0x1d9c24(0x267)](_0x1d9c24(0x1e3))[_0x1d9c24(0x1b9)]({'botID':botID})[_0x1d9c24(0x1c1)](_0x227ba7)[_0x1d9c24(0x2d6)]();}function restoreOrders(){const _0x162b2c=_0x3ad44d;let _0x186266;config['openOrders']&&allOpenOrders['forEach'](_0x4d4fe8=>{const _0x1b76ca=config['openOrders']['find'](_0x12de9d=>_0x12de9d['orderId']==_0x4d4fe8['id']);_0x1b76ca&&(lastOrders['push'](_0x1b76ca),_0x186266=_0x4d4fe8['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x162b2c(0x205)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1d4625=new Date()[_0x162b2c(0x193)](),_0x51ea84=config[_0x162b2c(0x208)]==_0x162b2c(0x1c4)?validateOrderTimeout*0x3c*0x3e8:config[_0x162b2c(0x1f8)]*0x3c*0x3e8;if(_0x186266+_0x51ea84>_0x1d4625){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5b25ae=_0x162b2c;validateOrders(_0x5b25ae(0x225));},_0x186266+_0x51ea84-_0x1d4625);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4f55a7=_0x3ad44d;if(!coinsLoaded){process['send']({'telegrammsg':_0x4f55a7(0x283)},_0x46f30f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x10820b='';if(config[_0x4f55a7(0x241)])_0x10820b=_0x4f55a7(0x2f9)+config[_0x4f55a7(0x1a0)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x10820b=_0x4f55a7(0x1e5)+botID+_0x4f55a7(0x2ad);const _0x512e6c=getKPIs(_0x4f55a7(0x2f4)),_0x1a2627=getKPIs(_0x4f55a7(0x24c),config[_0x4f55a7(0x24c)]),_0x553274=getKPIs(_0x4f55a7(0x1dc)),_0x4f96b7=getKPIs('net-fiat',config[_0x4f55a7(0x24c)]);_0x10820b+=_0x4f55a7(0x252),_0x10820b+=_0x512e6c[_0x4f55a7(0x1b6)]+_0x4f55a7(0x265)+_0x512e6c[_0x4f55a7(0x260)]+'\x0a',_0x10820b+=_0x512e6c[_0x4f55a7(0x31f)]+':\x20'+_0x512e6c[_0x4f55a7(0x294)]+'%\x0a',_0x10820b+=_0x1a2627[_0x4f55a7(0x1b6)]+_0x4f55a7(0x265)+_0x1a2627[_0x4f55a7(0x260)]+'\x0a',_0x10820b+=_0x1a2627[_0x4f55a7(0x31f)]+':\x20'+_0x1a2627[_0x4f55a7(0x294)]+'%\x0a',_0x10820b+=_0x553274[_0x4f55a7(0x1b6)]+':\x20'+_0x553274['value']+'\x20('+config['basecoin']+')\x0a',_0x10820b+=_0x553274[_0x4f55a7(0x31f)]+':\x20'+_0x553274['change']+'%\x20('+config[_0x4f55a7(0x2f4)]+')\x0a',_0x10820b+=_0x4f96b7['leftTxt']+':\x20'+_0x4f96b7[_0x4f55a7(0x260)]+'\x20('+config[_0x4f55a7(0x24c)]+')\x0a',_0x10820b+=_0x4f96b7[_0x4f55a7(0x31f)]+':\x20'+_0x4f96b7[_0x4f55a7(0x294)]+_0x4f55a7(0x2e7)+config[_0x4f55a7(0x24c)]+')\x0a',_0x10820b+=_0x4f55a7(0x218),process[_0x4f55a7(0x285)]({'telegrammsg':_0x10820b},_0x5352ae=>{});}async function sendPortfolioTelegram(){const _0x419b93=_0x3ad44d;if(!coinsLoaded){process[_0x419b93(0x285)]({'telegrammsg':_0x419b93(0x283)},_0x4fa8bf=>{});return;}let _0x1350e4='';if(config[_0x419b93(0x241)])_0x1350e4=_0x419b93(0x2f9)+config[_0x419b93(0x1a0)]+_0x419b93(0x1fe);else _0x1350e4='<b>Bot\x20'+botID+_0x419b93(0x1fe);_0x1350e4+=_0x419b93(0x252),_0x1350e4+=_0x419b93(0x301),_0x1350e4+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1350e4+=_0x419b93(0x301),currentCoins[_0x419b93(0x1ea)](_0x4bab84=>{const _0x4ec822=_0x419b93;_0x1350e4+=_0x4bab84[_0x4ec822(0x253)][_0x4ec822(0x282)](0x7)+'|\x20'+formatPad(_0x4bab84['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x4bab84[_0x4ec822(0x2ce)],0x2,0x6)+'|\x20'+formatPad(_0x4bab84[_0x4ec822(0x198)]*0x64,0x2,0x6)+'\x0a';}),_0x1350e4+=_0x419b93(0x218),process[_0x419b93(0x285)]({'telegrammsg':_0x1350e4},_0x279504=>{});}function formatPad(_0x2cc568,_0x44c0c6,_0x446f99){const _0x2a99a1=_0x3ad44d,_0x48f0be=formatResultString(_0x2cc568,_0x44c0c6);return _0x48f0be?_0x48f0be[_0x2a99a1(0x2a6)](_0x446f99):''[_0x2a99a1(0x2a6)](_0x446f99);}function logHistory(_0xc45ebd,_0x7f29c2,_0x525140=''){const _0x1acc06=_0x3ad44d;logger[_0x1acc06(0x221)](''+_0x7f29c2);let _0x2a7ed1={'time':getTimeStamp(),'type':_0xc45ebd,'event':_0x7f29c2};dbLogs[_0x1acc06(0x267)](_0x1acc06(0x30d))[_0x1acc06(0x1a1)](_0x2a7ed1)['write']();if(_0x525140=='')_0x525140=_0x7f29c2;proxyEmit(_0x1acc06(0x2e4),{'log':_0x2a7ed1,'summary':_0x525140}),process[_0x1acc06(0x285)]({'telegram':{..._0x2a7ed1,'botname':config[_0x1acc06(0x1a0)],'showname':config[_0x1acc06(0x241)]}},_0x833e08=>{});}function _0x3dd4(){const _0x2208e9=['padEnd','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','date','send','Unknown\x20error\x20occured','portfolio','getDate','2139327fxTOhj','fetchOpenOrders','OrderNotFound','ccxt','enabled','fetchTickers','splice','startdate','open','shift','Order(s)\x20not\x20validated\x20after\x20','change','ORDERS.LOCKED','UNLOCKED','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','uncaughtException','yyyy/MM/dd','password','fetchBalance','limit','ETH','customId','1\x20-\x20Handle\x20open\x20orders','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','API-key\x20format\x20invalid','type','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','none','padStart','getCoins()','Saving\x20configuration','decrypt','excluded','distribution','startnumber','\x20metrics:</b>\x20\x0a\x0a','recovery','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20-\x20pausing\x20bot\x20for\x20','success','split','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','botID','Invalid\x20API\x20key\x20or\x20secret\x20entered','function','Reset\x20|\x20','remove','fromCodePoint','concat','\x20|\x20exchange:\x20','colorscheme','createWriteStream','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','order','Initiating\x20exchange\x20reload','liquidity','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','watchTrades','ticker','date-fns','359561PuojHc','Huobipro','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','***','Transaction\x20detection\x20blocked','loadMarkets','active','target','time','usd','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','storeHeadless','initial','basecoinvalue','limits','write','amountToPrecision','./config/','getPortfolio(0)','writeFile','apiSecret','\x20API\x20secret\x20is\x20invalid','deleteHistoryAlerts','Avoiding\x20continuous\x20order\x20attempts','log','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Portfolio\x20change\x20detected:\x20','number','yyyy-MM-dd\x27T\x27HH:mm:ss','event','fees','\x20minutes\x20-\x20','%\x20(','fetchClosedOrders',':\x20timer\x20>','ExchangeNotAvailable','1101400SKUZoW','version','getSeconds','last','Fee\x20discount\x20refund\x20detected:\x20','fee','max','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','BTC','basecoin','recreateCoinResults()','cloneDeep','isEqual','util','<b>','3\x20-\x20handling\x20FILLED\x20order:\x20','floor','2\x20-\x20FILLED\x20unknown\x20order:\x20','2.6.0','-events.json','-results.json','Order\x20amount\x20is\x20invalid:\x20','-------------------------------\x0a','headless','2.3.5','autoliquidity','trade','cancel','emojisell','debug','buys','startsWith','Resetting\x20coin\x20results:\x20','MIN_NOTIONAL','logs','getMinutes','getMonth','getHours','Exception\x20thrown\x20in\x20','getPortfolio','red_yellow_blue','entries','/backup/','spot','abs','Manual\x20balancing\x20required','Error\x20while\x20deleting\x20files:\x20','realized','BNB/','sortBy','eur','datetime','rightTxt','fetchTicker','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','running','no\x20additional\x20symbols','sells','breakeven','\x20>\x20[DEBUG]\x20','loadSymbols()','Transaction\x20detection\x20unblocked','getStartingBalances','No\x20more\x20open\x20orders\x20-\x20','2\x20-\x20Validate\x20orders:\x20','Market','cost','exec','keys','added','net-fiat','getTime','milliseconds','orderstatus','watchTrades()','starting-balance-','delta','must\x20be\x20greater\x20than\x20minimum\x20amount','mkdirSync','Waited\x20','Order\x20is\x20invalid:\x20','getAllOrders()','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','exchange\x20reloaded','botname','push','random','highest','watchTransactions()','privateKey','Invalid\x20quantity','RateLimitExceeded','progress','sha256','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20|\x20Custom\x20ID:\x20','getPortfolio(1)','USD','filter','Net\x20effect','bb-secure.json','amount','(((.+)+)+)+$','additional\x20symbols\x20','search','threshold','leftTxt','defaults','map','find','yargs/yargs','error','Order\x20filled:\x20','status','balances','Failed\x20to\x20load\x20coin\x20data\x20for\x20',':\x20Bot\x20','assign','getCoinNumber()','event-history','market','\x20|\x20','exchanges','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','emitHistory','apiKey','sort','createOrder','stopExchange()','data','initTickers()','001','\x20-\x20bot\x20not\x20started','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','change24h','./version.json','kill','sell','BNB','recent20','parse','apply','canceled','Huobi','net-basecoin','Error\x20details:','toggleBotMode','\x20order:\x20','\x20|\x20lock\x20orders:\x20','indexOf','slice','bot','substring','<b>Bot\x20','side','configuration','ORDERS.UNLOCKING','balancing\x20resumes\x20when\x20cooldown\x20ends','forEach','TUSD','no\x20open\x20orders','apiPassword','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','bb-settings.json','price','cooldown','RSA-OAEP','replace','page','USDT','filled','ongoing','timeout','limit-high','unlinkSync','emojibuy','has','freeze','\x20portfolio:</b>\x20\x0a\x0a','\x20hour','EUR','lowdb','bot-','buy','showConfig','LOCKED','0\x20-\x20EXECUTION:\x20','\x20network\x20error','ordertype','toLowerCase','orderId','2767990LLRSzL','test','coins','sendPortfolioTelegram','changes','existsSync','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','exchange','reverse','argv','USDP','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Executing\x20exchange\x20reload','</pre>','RequestTimeout','-config.json','2\x20-\x20Orders\x20unlocked','message','toFixed','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','1111516avxsVQ','Bybit','full','watchOrders','average','warning','final','bid','cancelOrders()','Binance','/EUR','\x20|\x20highest\x20fee:\x20','offset','currency','min','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Error:\x20Invalid\x20argument\x20','UNLOCKING','format','************','sendMetricsTelegram','stringify','ID:\x20','2\x20-\x20FILLED\x20known\x20order:\x20','symbol','cancelOrder','closed','startprice','Invalid\x20symbol:\x20','Executed\x20','resetHistory','includes','getPortfolio(2)','initclient','showname','starting-balances','removed','2LAFPKw','\x20exchange\x20error','ask','onepagemode','fetchTickers()','ORDERS.UNLOCKED',',\x20must\x20be\x20a\x203\x20digit\x20number','Limit\x20(high-margin)','fiat','5424741GsMyRL','length','performance','differenceInSeconds','args','<pre>','coin','/USD','.json','storeFiat','1\x20-\x20FILLED:\x20','getFullYear','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','DDoSProtection','Initializing\x20coin\x20results','remainingSymbols','Insufficient\x20funds\x20to\x20execute\x20order:\x20','hybrid-crypto-js','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','value','valid','9KsLbOQ','restart','exchange\x20not\x20reloaded','\x20:\x20','/output-000.log','get','Uncaught\x20Exception:','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','add','AuthenticationError','pro','path','bots','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','toString','string','Exchange','join','1752468sMnjfn','\x20>\x20','Loading\x20completed','\x20change','timeshift','Pausing\x20for\x20','limit-low','Bot\x20','\x20exchange','round','\x20closed\x20the\x20connection','set','close','-performance.json'];_0x3dd4=function(){return _0x2208e9;};return _0x3dd4();}function emitHistory(_0x5b01b0={}){const _0x54a7c8=_0x3ad44d;Object[_0x54a7c8(0x190)](_0x5b01b0)[_0x54a7c8(0x24e)]==0x0&&(_0x5b01b0={'type':['order',_0x54a7c8(0x2e4)],'event':'','page':0x1});if(_0x5b01b0[_0x54a7c8(0x2a3)][_0x54a7c8(0x23e)](_0x54a7c8(0x2e4)))_0x5b01b0['type'][_0x54a7c8(0x28f)](_0x5b01b0[_0x54a7c8(0x2a3)][_0x54a7c8(0x1e1)]('event'),0x1,_0x54a7c8(0x1bb),_0x54a7c8(0x224),_0x54a7c8(0x2b1));if(dbLogs[_0x54a7c8(0x1fc)](_0x54a7c8(0x30d))[_0x54a7c8(0x260)]()){let _0xdf859a=dbLogs['get'](_0x54a7c8(0x30d))[_0x54a7c8(0x1ae)](_0x24a6dd=>{const _0x29ca70=_0x54a7c8;if(_0x5b01b0[_0x29ca70(0x2a3)][_0x29ca70(0x24e)]==0x0)return![];else return _0x5b01b0[_0x29ca70(0x2a3)][_0x29ca70(0x23e)](_0x24a6dd[_0x29ca70(0x2a3)]);})[_0x54a7c8(0x1ae)](_0x37746a=>{const _0xb9dd88=_0x54a7c8;if(_0x5b01b0[_0xb9dd88(0x2e4)]=='')return!![];else return _0x37746a['event']['toLowerCase']()[_0xb9dd88(0x23e)](_0x5b01b0[_0xb9dd88(0x2e4)][_0xb9dd88(0x209)]());})['sortBy'](_0x54a7c8(0x2cf)),_0x1d9383=_0xdf859a[_0x54a7c8(0x260)]()['length'];_0xdf859a=_0xdf859a[_0x54a7c8(0x213)]()[_0x54a7c8(0x1e2)]((_0x5b01b0[_0x54a7c8(0x1f4)]-0x1)*logPageSize,_0x5b01b0[_0x54a7c8(0x1f4)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x54a7c8(0x1c3),{'logs':_0xdf859a,'total':_0x1d9383});}else proxyEmit(_0x54a7c8(0x1c3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x373bfd){const _0x233744=_0x3ad44d;if(dbLogs[_0x233744(0x1fc)](_0x233744(0x30d))[_0x233744(0x260)]()){const _0x3f7217=dbLogs[_0x233744(0x267)]('logs')[_0x233744(0x31c)](_0x233744(0x2cf))[_0x233744(0x1ae)](_0x51cc3f=>{const _0x3bebaf=_0x233744;return _0x51cc3f[_0x3bebaf(0x2a3)]==_0x3bebaf(0x2c0);})[_0x233744(0x260)]();dbLogs[_0x233744(0x267)](_0x233744(0x30d))[_0x233744(0x2b8)]()['write'](),dbLogs['get'](_0x233744(0x30d))[_0x233744(0x1c1)](_0x3f7217)[_0x233744(0x2d6)](),emitHistory(_0x373bfd);}}async function pauseBot(){const _0xa709bd=_0x3ad44d,_0x4679f5=new Date()[_0xa709bd(0x193)]();if(!lastErrorShown||_0x4679f5-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4679f5;!lastBotPause?(lastBotPause=_0x4679f5,consecutivePauses=0x1):(_0x4679f5-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xa709bd(0x285)]({'stop':'restart'},_0x181cdb=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xa709bd(0x193)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x94a855=_0x3ad44d;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x94a855(0x1d4)},_0x5f092c=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2019d0,_0x26a6d4){const _0x1b67d1=_0x3ad44d;if(botPaused)return;const _0x36f624=config[_0x1b67d1(0x212)]||_0x1b67d1(0x272);if(_0x26a6d4)logger[_0x1b67d1(0x308)](_0x1b67d1(0x311)+_0x26a6d4);if(_0x2019d0[_0x1b67d1(0x270)]()[_0x1b67d1(0x23e)](_0x1b67d1(0x2a2)))logHistory(_0x1b67d1(0x1bb),_0x36f624+_0x1b67d1(0x2f2));else{if(_0x2019d0[_0x1b67d1(0x270)]()[_0x1b67d1(0x23e)](_0x1b67d1(0x2a0)))logHistory('error',_0x36f624+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration');else _0x2019d0['toString']()[_0x1b67d1(0x23e)]('AuthenticationError')?(logHistory(_0x1b67d1(0x1bb),_0x36f624+_0x1b67d1(0x26f)),logHistory(_0x1b67d1(0x1bb),_0x1b67d1(0x259))):await handleError(_0x2019d0,null);}}function _0xa7ef(_0x11ae59,_0x4c5cd4){const _0x28269e=_0x3dd4();return _0xa7ef=function(_0xe4b24d,_0x3b5404){_0xe4b24d=_0xe4b24d-0x18a;let _0x3dd447=_0x28269e[_0xe4b24d];return _0x3dd447;},_0xa7ef(_0x11ae59,_0x4c5cd4);}async function handleError(_0x180645,_0x5cb86e,_0x4c83d3=''){const _0x4b94f4=_0x3ad44d;if(botPaused)return;const _0x319c0c=config[_0x4b94f4(0x212)]||_0x4b94f4(0x272);if(_0x5cb86e)logger[_0x4b94f4(0x308)](_0x4b94f4(0x311)+_0x5cb86e);if(_0x180645['toString']()[_0x4b94f4(0x23e)](_0x4b94f4(0x25a))||_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)](_0x4b94f4(0x1a7)))logHistory(_0x4b94f4(0x1bb),_0x319c0c+_0x4b94f4(0x297)+pauseBotMsg),await pauseBot();else{if(_0x180645[_0x4b94f4(0x270)]()['includes'](_0x4b94f4(0x2ea))||_0x180645['toString']()['includes']('OnMaintenance'))logHistory(_0x4b94f4(0x1bb),_0x319c0c+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)](_0x4b94f4(0x219)))logHistory(_0x4b94f4(0x1bb),_0x319c0c+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)](_0x4b94f4(0x1c7)))logHistory('error',_0x319c0c+_0x4b94f4(0x27e)+pauseBotMsg),await pauseBot();else{if(_0x180645['toString']()[_0x4b94f4(0x23e)](_0x4b94f4(0x2a4)))logHistory(_0x4b94f4(0x1bb),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x4b94f4(0x2be)),await killBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)]('InvalidNonce'))logHistory(_0x4b94f4(0x1bb),_0x4b94f4(0x19e)),logHistory(_0x4b94f4(0x1bb),_0x4b94f4(0x2be)),await killBot();else{if(_0x180645 instanceof ccxt['NetworkError'])logHistory('error',_0x319c0c+_0x4b94f4(0x207)+pauseBotMsg),logger[_0x4b94f4(0x308)](_0x4b94f4(0x1dd),_0x180645),await pauseBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)](_0x4b94f4(0x2a2)))logHistory(_0x4b94f4(0x1bb),_0x319c0c+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x4b94f4(0x1bb),_0x4b94f4(0x2be)),await killBot();else{if(_0x180645[_0x4b94f4(0x270)]()['includes'](_0x4b94f4(0x2a0)))logHistory(_0x4b94f4(0x1bb),_0x319c0c+_0x4b94f4(0x2dc)),logHistory(_0x4b94f4(0x1bb),_0x4b94f4(0x2be)),await killBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)](_0x4b94f4(0x26b)))logHistory('error',_0x319c0c+_0x4b94f4(0x22e)),logHistory('error',_0x4b94f4(0x2be)),await killBot();else{if(_0x180645[_0x4b94f4(0x270)]()[_0x4b94f4(0x23e)]('InsufficientFunds'))logHistory('error',_0x4b94f4(0x25d)+_0x4c83d3);else _0x180645 instanceof ccxt['ExchangeError']?(logHistory(_0x4b94f4(0x1bb),_0x319c0c+_0x4b94f4(0x245)),logger[_0x4b94f4(0x308)]('Error\x20details:',_0x180645)):(logHistory(_0x4b94f4(0x1bb),_0x4b94f4(0x286)+pauseBotMsg),logger[_0x4b94f4(0x308)](_0x4b94f4(0x1dd),_0x180645),await pauseBot());}}}}}}}}}}}function formatResult(_0xe7071d,_0x5e92d1){const _0x489814=_0x3ad44d;return parseFloat(_0xe7071d[_0x489814(0x21d)](_0x5e92d1));}function formatResultTruncate(_0xb49b9e,_0x59a22e){const _0x2460ba=_0x3ad44d;let _0x2e12b8=formatResultString(_0xb49b9e,0xa),_0x2672c9=_0x2e12b8[_0x2460ba(0x1e1)]('.');return _0x2672c9!=-0x1&&(_0x2e12b8=_0x2e12b8['slice'](0x0,_0x2672c9+_0x59a22e+0x1)),Number(_0x2e12b8);}function formatResultString(_0x508592,_0xc18687){const _0x17345a=_0x3ad44d;let _0x465c0e;if(!(''+_0x508592)[_0x17345a(0x23e)]('e'))_0x465c0e=+(Math[_0x17345a(0x27d)](_0x508592+'e+'+_0xc18687)+'e-'+_0xc18687);else{let _0x3286c9=(''+_0x508592)[_0x17345a(0x2b2)]('e'),_0xfd3fd4='';+_0x3286c9[0x1]+_0xc18687>0x0&&(_0xfd3fd4='+'),_0x465c0e=+(Math[_0x17345a(0x27d)](+_0x3286c9[0x0]+'e'+_0xfd3fd4+(+_0x3286c9[0x1]+_0xc18687))+'e-'+_0xc18687);}return Number(_0x465c0e)[_0x17345a(0x21d)](_0xc18687);}function getServerTime(){const _0x2e5c43=_0x3ad44d,_0x134fd2=new Date();return _0x134fd2[_0x2e5c43(0x258)]()+'/'+(_0x134fd2[_0x2e5c43(0x30f)]()+0x1)[_0x2e5c43(0x270)]()[_0x2e5c43(0x2a6)](0x2,'0')+'/'+_0x134fd2[_0x2e5c43(0x288)]()[_0x2e5c43(0x270)]()[_0x2e5c43(0x2a6)](0x2,'0')+'\x20'+_0x134fd2[_0x2e5c43(0x310)]()['toString']()[_0x2e5c43(0x2a6)](0x2,'0')+':'+_0x134fd2[_0x2e5c43(0x30e)]()['toString']()[_0x2e5c43(0x2a6)](0x2,'0')+':'+_0x134fd2['getSeconds']()[_0x2e5c43(0x270)]()[_0x2e5c43(0x2a6)](0x2,'0');}function getTimeStamp(){const _0x4a827e=_0x3ad44d,_0x4ffc22=shiftedTime();return _0x4ffc22[_0x4a827e(0x258)]()+'/'+(_0x4ffc22[_0x4a827e(0x30f)]()+0x1)[_0x4a827e(0x270)]()[_0x4a827e(0x2a6)](0x2,'0')+'/'+_0x4ffc22['getDate']()[_0x4a827e(0x270)]()[_0x4a827e(0x2a6)](0x2,'0')+'\x20'+_0x4ffc22[_0x4a827e(0x310)]()['toString']()[_0x4a827e(0x2a6)](0x2,'0')+':'+_0x4ffc22[_0x4a827e(0x30e)]()[_0x4a827e(0x270)]()[_0x4a827e(0x2a6)](0x2,'0')+':'+_0x4ffc22[_0x4a827e(0x2ed)]()[_0x4a827e(0x270)]()[_0x4a827e(0x2a6)](0x2,'0');}function getDate(){const _0x42d44d=_0x3ad44d,_0xdec959=shiftedTime();return _0xdec959[_0x42d44d(0x258)]()+'/'+(_0xdec959[_0x42d44d(0x30f)]()+0x1)['toString']()[_0x42d44d(0x2a6)](0x2,'0')+'/'+_0xdec959[_0x42d44d(0x288)]()[_0x42d44d(0x270)]()['padStart'](0x2,'0');}function getHour(){const _0xff66a9=_0x3ad44d,_0x377f2d=shiftedTime();return _0x377f2d[_0xff66a9(0x310)]()[_0xff66a9(0x270)]()[_0xff66a9(0x2a6)](0x2,'0');}function sleep(_0x4a4c8e){return new Promise(_0x5e851a=>setTimeout(_0x5e851a,_0x4a4c8e));}function shiftedTime(){const _0x1a89ab=_0x3ad44d,_0x405c33=new Date();let _0x4b69dc=_0x405c33;if(config&&config[_0x1a89ab(0x278)]!==0x0)_0x4b69dc=fns[_0x1a89ab(0x26a)](_0x405c33,{'hours':config[_0x1a89ab(0x278)]});return _0x4b69dc;}function timer(_0x3b0ae8){const _0x2237bb=_0x3ad44d,_0x10849f=new Date();!lasttime?console[_0x2237bb(0x2df)](getTimeStamp()+_0x2237bb(0x2e9),_0x3b0ae8,_0x10849f):console['log'](getTimeStamp()+_0x2237bb(0x2e9),_0x3b0ae8,(_0x10849f-lasttime)/0x3e8),lasttime=_0x10849f;}