const _0x2c39c=_0x4b10;(function(_0x2a582c,_0x2b8a40){const _0x3350b3=_0x4b10,_0x2ba3f3=_0x2a582c();while(!![]){try{const _0x866923=parseInt(_0x3350b3(0x16f))/0x1+-parseInt(_0x3350b3(0x262))/0x2*(-parseInt(_0x3350b3(0x162))/0x3)+-parseInt(_0x3350b3(0x194))/0x4+-parseInt(_0x3350b3(0x18d))/0x5*(-parseInt(_0x3350b3(0x1a0))/0x6)+-parseInt(_0x3350b3(0x1cd))/0x7*(-parseInt(_0x3350b3(0x1de))/0x8)+-parseInt(_0x3350b3(0x1f7))/0x9*(parseInt(_0x3350b3(0x245))/0xa)+parseInt(_0x3350b3(0x254))/0xb*(-parseInt(_0x3350b3(0x23f))/0xc);if(_0x866923===_0x2b8a40)break;else _0x2ba3f3['push'](_0x2ba3f3['shift']());}catch(_0x22298d){_0x2ba3f3['push'](_0x2ba3f3['shift']());}}}(_0x32e8,0x2e2b5));const _0x3126fb=function(){let _0x2ed122=!![];return function(_0x28208e,_0xc548de){const _0x3c6906=_0x2ed122?function(){const _0x54ba46=_0x4b10;if(_0xc548de){const _0x5a3528=_0xc548de[_0x54ba46(0x1f1)](_0x28208e,arguments);return _0xc548de=null,_0x5a3528;}}:function(){};return _0x2ed122=![],_0x3c6906;};}(),_0x539a5d=_0x3126fb(this,function(){const _0x55ed21=_0x4b10;return _0x539a5d[_0x55ed21(0x25e)]()['search'](_0x55ed21(0x1a8))[_0x55ed21(0x25e)]()[_0x55ed21(0x1c2)](_0x539a5d)['search']('(((.+)+)+)+$');});_0x539a5d();'use strict';const ccxt=require(_0x2c39c(0x228)),low=require('lowdb'),FileSync=require(_0x2c39c(0x241)),fs=require('fs'),fns=require(_0x2c39c(0x167)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require(_0x2c39c(0x1d7))[_0x2c39c(0x1dc)];let exchange,wsClient;global[_0x2c39c(0x207)]={},global[_0x2c39c(0x210)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x2c39c(0x22e),'HOT/BTC',_0x2c39c(0x1f9),_0x2c39c(0x1da),_0x2c39c(0x163),_0x2c39c(0x208)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x2c39c(0x23e))[_0x2c39c(0x154)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x2c39c(0x1ac)]('Error:\x20Invalid\x20argument\x20'+botID+_0x2c39c(0x202)),process[_0x2c39c(0x14d)](0x1));const userID=process[_0x2c39c(0x224)][0x3]||'',configpath=userID?_0x2c39c(0x243)+userID+'/':_0x2c39c(0x243);!fs[_0x2c39c(0x263)](configpath)&&fs[_0x2c39c(0x215)](configpath);const configfile=configpath+_0x2c39c(0x150)+botID+_0x2c39c(0x1ae),logfile=configpath+_0x2c39c(0x150)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x2c39c(0x18b),coinresultsfile=configpath+_0x2c39c(0x150)+botID+_0x2c39c(0x166),settingsfile=configpath+_0x2c39c(0x247),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2c39c(0x206),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2c39c(0x1e1)]({'logs':[]})[_0x2c39c(0x1a7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2c39c(0x1e1)]({'data':[]})[_0x2c39c(0x1a7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x2c39c(0x1a7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2c39c(0x1e1)]({'coins':[]})[_0x2c39c(0x1a7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5bbc78)=>{},'debug':(..._0x3f4059)=>{},'notice':(..._0x188ff6)=>{},'info':(..._0x2f53da)=>{},'warning':(..._0x564cbd)=>{},'error':async function(..._0x553b6d){const _0x4dc657=_0x2c39c,_0x71857f=new Date()[_0x4dc657(0x151)]();if(!lastErrorShown||_0x71857f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime']();let _0x5bb722='';if(_0x553b6d[0x0])_0x5bb722+=_0x553b6d[0x0];if(_0x553b6d[0x1]&&_0x553b6d[0x1][_0x4dc657(0x1b6)]&&_0x553b6d[0x1]['error'][_0x4dc657(0x251)])_0x5bb722+='\x20-\x20'+_0x553b6d[0x1]['error'][_0x4dc657(0x251)];logging(_0x4dc657(0x24d)+consecutivePauses+_0x4dc657(0x23a),''+_0x5bb722),await pauseBot(_0x4dc657(0x21e));}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x2c39c(0x1e6)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x2c39c(0x16b)]!=config[_0x2c39c(0x16b)]&&updateTimeshift(settings[_0x2c39c(0x16b)]);process[_0x2c39c(0x213)]({'started':'running'},_0x5aac70=>{}),initializeProcessListeners();function proxyEmit(_0x4317cf,_0x2c01a7=null){const _0x25599a=_0x2c39c;process[_0x25599a(0x213)]({'function':_0x4317cf,'args':_0x2c01a7},_0x43d370=>{});}function initializeProcessListeners(){process['on']('message',_0x5c27cb=>{const _0x56478c=_0x4b10;switch(Object[_0x56478c(0x260)](_0x5c27cb)[0x0]){case _0x56478c(0x16b):_0x5c27cb[_0x56478c(0x16b)]!=undefined&&(settings[_0x56478c(0x16b)]=_0x5c27cb[_0x56478c(0x16b)],updateTimeshift(settings[_0x56478c(0x16b)]));break;case _0x56478c(0x190):switch(_0x5c27cb['function']){case _0x56478c(0x18f):initclient();break;case _0x56478c(0x15d):toggleBotMode();break;case _0x56478c(0x16a):emitHistory(_0x5c27cb[_0x56478c(0x1c9)]);break;case _0x56478c(0x217):deleteHistoryAlerts(_0x5c27cb['args']);break;case'getPortfolio':getPortfolio(_0x5c27cb['args']);break;case _0x56478c(0x1d0):storeConfiguration(_0x5c27cb['args']);break;case _0x56478c(0x152):storeHeadless(_0x5c27cb[_0x56478c(0x1c9)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x56478c(0x14e):placeOrder(_0x5c27cb['args']);break;case _0x56478c(0x239):cancelLoading();break;case _0x56478c(0x267):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x56c696=_0x2c39c;if(pidBalances)clearTimeout(pidBalances);if(config[_0x56c696(0x187)]!=''){await initExchange(config[_0x56c696(0x187)],config[_0x56c696(0x174)]),await initWsEvents();let _0x7db0fe=await loadSymbols();if(_0x7db0fe){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x56c696(0x20f)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x4609b0,_0xe186cf){const _0x19cb75=_0x2c39c,_0x421a39=ccxt[config[_0x19cb75(0x178)]];let _0xa8d888;switch(config[_0x19cb75(0x178)]){case _0x19cb75(0x15e):_0xa8d888='wss://stream.binance.com:9443';break;case _0x19cb75(0x153):_0xa8d888=_0x19cb75(0x1c3);break;default:_0xa8d888='wss://stream.binance.com:9443';}exchange=new _0x421a39({'apiKey':_0x4609b0,'secret':_0xe186cf,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4609b0,'api_secret':_0xe186cf,'beautify':!![],'wsUrl':_0xa8d888},logger);let _0x578b39=config[_0x19cb75(0x178)]==_0x19cb75(0x153)?_0x19cb75(0x171):_0x19cb75(0x235),_0x1f96f9=config['basecoin']==_0x19cb75(0x25c)?_0x19cb75(0x25c):'BTC';stablecoins={'eur':{'coin':''+_0x1f96f9+_0x578b39,'symbol':_0x1f96f9+'/'+_0x578b39},'usd':{'coin':_0x1f96f9+_0x19cb75(0x171),'symbol':_0x1f96f9+_0x19cb75(0x14c)}};}async function initWsEvents(){const _0x586b06=_0x2c39c;!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x586b06(0x148),_0x3f6e8e=>{const _0x627a87=_0x586b06;if(isWsFormattedKline(_0x3f6e8e)){global['ticker'][_0x3f6e8e[_0x627a87(0x1bd)][_0x627a87(0x240)]]=_0x3f6e8e[_0x627a87(0x1bd)][_0x627a87(0x253)];return;}else{if(isWsFormatted24hrTicker(_0x3f6e8e)){global[_0x627a87(0x210)][_0x3f6e8e['symbol']]=_0x3f6e8e['priceChangePercent'];return;}else{if(!Array[_0x627a87(0x1e3)](_0x3f6e8e)&&_0x3f6e8e[_0x627a87(0x230)][_0x627a87(0x1a9)](_0x627a87(0x1b7))){if(_0x3f6e8e[_0x627a87(0x188)][_0x627a87(0x1a9)](_0x627a87(0x266))){updateNumberCoins(_0x3f6e8e);return;}}}}}),wsClient['on'](_0x586b06(0x14f),async _0x15c040=>{if(!botPaused)currentCoins=await getCoins(!![]);}));}async function loadSymbols(){const _0x168af1=_0x2c39c;let _0x3cc769;try{markets=await exchange[_0x168af1(0x143)](),allSymbols=exchange[_0x168af1(0x221)][_0x168af1(0x220)](_0x34d706=>{let _0x253c84=![];return exceptions['forEach'](_0x391476=>{const _0x36f435=_0x4b10;if(_0x34d706[_0x36f435(0x1a9)](_0x391476))_0x253c84=!![];}),!_0x253c84;}),_0x3cc769=!![];}catch(_0x1a0f73){await handleError(_0x1a0f73,'loadSymbols()'),_0x3cc769=![];}return _0x3cc769;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0xf2eb0d=_0x2c39c;proxyEmit(_0xf2eb0d(0x25f),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xf2eb0d(0x1b4),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x429a1b=getNormalizedPerformance();emitPerformance(_0x429a1b),await getStartingBalances(_0x429a1b);}async function toggleBotMode(){const _0x26b243=_0x2c39c;let _0x14152c=dbConfig['get'](_0x26b243(0x13e))[_0x26b243(0x22a)]({'botID':botID})[_0x26b243(0x19d)]();if(_0x14152c){const _0xcdda72=!_0x14152c[_0x26b243(0x17c)];dbConfig['get']('bot')[_0x26b243(0x22a)]({'botID':botID})[_0x26b243(0x16d)]({'headless':_0xcdda72})['write'](),config[_0x26b243(0x17c)]=_0xcdda72,proxyEmit(_0x26b243(0x25f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x8d2d4a=_0x2c39c;process[_0x8d2d4a(0x213)]({'updatebotmanager':!![]},_0x2a36c=>{});}function cleanws(){const _0x2f40e8=_0x2c39c;wsinitialized=![];ws1&&(ws1[_0x2f40e8(0x23d)](_0x4ece21=>{const _0x442cfc=_0x2f40e8;try{wsClient[_0x442cfc(0x253)](_0x4ece21);}catch(_0x3bd964){}}),ws1=[]);if(ws2){try{wsClient[_0x2f40e8(0x253)](ws2);}catch(_0x590238){}ws2=null;}ws3&&(ws3[_0x2f40e8(0x23d)](_0xfa361e=>{const _0x3ed362=_0x2f40e8;try{wsClient[_0x3ed362(0x253)](_0xfa361e);}catch(_0x5ea849){}}),ws3=[]);}async function initws(){const _0x14cd7d=_0x2c39c;cleanws();let _0x35a57d=[];currentCoins['forEach'](_0x1b4c0b=>{const _0x36dba4=_0x4b10;if(_0x1b4c0b['coin']!=config[_0x36dba4(0x216)])_0x35a57d['push'](_0x1b4c0b[_0x36dba4(0x240)]);});if(!_0x35a57d[_0x14cd7d(0x1a9)](stablecoins['eur'][_0x14cd7d(0x240)]))_0x35a57d[_0x14cd7d(0x186)](stablecoins[_0x14cd7d(0x219)][_0x14cd7d(0x240)]);if(!_0x35a57d[_0x14cd7d(0x1a9)](stablecoins[_0x14cd7d(0x1c6)][_0x14cd7d(0x240)]))_0x35a57d['push'](stablecoins['usd'][_0x14cd7d(0x240)]);if(!_0x35a57d[_0x14cd7d(0x1a9)](_0x14cd7d(0x1fa)+config[_0x14cd7d(0x216)]))_0x35a57d[_0x14cd7d(0x186)](_0x14cd7d(0x1fa)+config[_0x14cd7d(0x216)]);try{_0x35a57d['forEach']((_0x325073,_0x3cf7d7)=>{const _0x858f9b=_0x14cd7d;ws1[_0x3cf7d7]=wsClient[_0x858f9b(0x140)](noslash(_0x325073),'1m'),ws3[_0x3cf7d7]=wsClient[_0x858f9b(0x1a5)](noslash(_0x325073),_0x858f9b(0x266));}),ws2=wsClient[_0x14cd7d(0x1f3)]();}catch(_0x41fea3){await handleError(_0x41fea3,'initws()');}let _0x12747e,_0x286c82=0x0;loading[_0x14cd7d(0x1ba)]=[];let _0x3cda25=0x0;_0x35a57d[_0x14cd7d(0x23d)](_0x4f7631=>{const _0x37e67f=_0x14cd7d;loading[_0x37e67f(0x1ba)][_0x37e67f(0x186)](_0x4f7631);}),loadingCanceled=![];let _0x5ceedb=![];while(_0x12747e!=_0x35a57d[_0x14cd7d(0x20f)]){_0x12747e=0x0,_0x35a57d['forEach'](_0x5b4dc=>{const _0x2b1c1a=_0x14cd7d;global[_0x2b1c1a(0x207)][noslash(_0x5b4dc)]&&(loading[_0x2b1c1a(0x1ba)]=loading['remainingSymbols'][_0x2b1c1a(0x220)](_0x3fc92f=>_0x3fc92f!=_0x5b4dc),_0x12747e++);}),loading['progress']=Math[_0x14cd7d(0x1f6)](_0x12747e/_0x35a57d[_0x14cd7d(0x20f)]*0x64);loading[_0x14cd7d(0x264)]!=0x64&&(_0x3cda25>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x3cda25>0x3c*0x5&&!_0x5ceedb&&(_0x5ceedb=!![],logHistory(_0x14cd7d(0x1b6),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x14cd7d(0x1ba)][_0x14cd7d(0x1c8)](',\x20')+'\x20-\x20bot\x20not\x20started')));if(loadingCanceled){loading[_0x14cd7d(0x18e)]=!![],emitLoadingProgress();break;}else _0x12747e!=_0x286c82&&(_0x286c82=_0x12747e,emitLoadingProgress()),_0x3cda25++,await sleep(0xc8);}_0x5ceedb&&logHistory(_0x14cd7d(0x17d),_0x14cd7d(0x1c0));if(_0x12747e==_0x35a57d[_0x14cd7d(0x20f)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x379098=_0x2c39c;let _0x57025e=0x0,_0x327fac=0x0;try{_0x57025e=global[_0x379098(0x207)][stablecoins[_0x379098(0x219)]['coin']],_0x327fac=global[_0x379098(0x207)][stablecoins[_0x379098(0x1c6)][_0x379098(0x1d3)]];}catch(_0x1d4d39){await handleError(_0x1d4d39,_0x379098(0x1b3));}return{'eur':Number(_0x57025e),'usd':Number(_0x327fac)};}function setStartDatePerformance(){const _0x230d2d=_0x2c39c;if(config&&config[_0x230d2d(0x1fe)][0x0][_0x230d2d(0x159)][_0x230d2d(0x20f)]!=0x0){const _0x553663=config[_0x230d2d(0x1fe)][0x0][_0x230d2d(0x159)];dbPerformance[_0x230d2d(0x1db)]('data')[_0x230d2d(0x22a)]({'date':config[_0x230d2d(0x1bf)]})[_0x230d2d(0x16d)]({'coins':_0x553663})['write']();}}async function recreateCoinResults(){const _0x4a28f5=_0x2c39c;let _0x11683c,_0x440bd5=[];try{const _0xdc6640=fns[_0x4a28f5(0x19c)](fns['parseISO'](config[_0x4a28f5(0x1bf)][_0x4a28f5(0x161)](/\//g,'-')),_0x4a28f5(0x1b0));for(const _0x4581b4 of currentCoins){if(_0x4581b4[_0x4a28f5(0x1d3)]!=config[_0x4a28f5(0x216)]){let _0x2d4cc0=0x0,_0x3620f2,_0x14f681;_0x11683c=await getAllEventOrders(_0x4581b4[_0x4a28f5(0x240)]);if(_0x11683c['length']>0x0)_0x11683c['forEach'](_0x316ba2=>{const _0x25ac31=_0x4a28f5,_0x27186e=_0x4581b4[_0x25ac31(0x240)][_0x25ac31(0x1a9)](config[_0x25ac31(0x216)]+'/');_0x440bd5[_0x25ac31(0x186)]({'datetime':_0x316ba2[_0x25ac31(0x15a)],'coin':_0x4581b4[_0x25ac31(0x1d3)],'symbol':_0x4581b4['symbol'],'side':_0x316ba2['side'],'reverse':_0x27186e,'amount':formatResult(_0x316ba2[_0x25ac31(0x1bc)],0x8),'filled':formatResult(_0x316ba2[_0x25ac31(0x1bc)],0x8),'price':formatResult(_0x316ba2[_0x25ac31(0x203)],0x8)}),_0x2d4cc0=_0x316ba2[_0x25ac31(0x232)]=='buy'?_0x2d4cc0+_0x316ba2[_0x25ac31(0x1bc)]:_0x2d4cc0-_0x316ba2[_0x25ac31(0x1bc)];if(!_0x14f681)_0x14f681=_0x316ba2[_0x25ac31(0x203)];});_0x3620f2=_0x4581b4[_0x4a28f5(0x25b)]-_0x2d4cc0;let _0xde28b8;config['liquidity'][_0x4a28f5(0x23d)](_0x239f69=>{const _0x3307f7=_0x4a28f5;!_0xde28b8&&(_0xde28b8=_0x239f69[_0x3307f7(0x159)][_0x3307f7(0x22a)](_0x4b7d40=>_0x4b7d40['coin']==_0x4581b4[_0x3307f7(0x1d3)]),_0xde28b8&&(_0x3620f2=_0xde28b8[_0x3307f7(0x25b)],_0x14f681=_0xde28b8[_0x3307f7(0x203)]));});let _0x177b62=dbCoinResults[_0x4a28f5(0x1db)]('coins')['find']({'coin':_0x4581b4[_0x4a28f5(0x1d3)]})[_0x4a28f5(0x19d)]();_0x177b62={'coin':_0x4581b4[_0x4a28f5(0x1d3)],'number':_0x3620f2,'breakeven':_0x14f681,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4a28f5(0x1db)](_0x4a28f5(0x24c))['find']({'coin':_0x4581b4[_0x4a28f5(0x1d3)]})[_0x4a28f5(0x16d)](_0x177b62)[_0x4a28f5(0x1a7)]();}}_0x440bd5[_0x4a28f5(0x1e8)]((_0x251490,_0x116990)=>_0x251490[_0x4a28f5(0x15a)]>_0x116990[_0x4a28f5(0x15a)]?0x1:_0x116990[_0x4a28f5(0x15a)]>_0x251490['datetime']?-0x1:0x0);let _0x46a648=0x0;for(let _0xd49367 of _0x440bd5){await updateCoinResults(_0xd49367,!![]);}}catch(_0x393d0b){await handleError(_0x393d0b,_0x4a28f5(0x169));}}async function getAllEventOrders(_0x395ece){const _0x5855c4=_0x2c39c;let _0x4e0c8c=[],_0x361401=dbLogs[_0x5855c4(0x1db)]('logs')[_0x5855c4(0x220)](_0x3a781d=>{const _0x5dc01f=_0x5855c4,_0x3a2aab=_0x3a781d['event'][_0x5dc01f(0x256)]();return _0x3a2aab[_0x5dc01f(0x1a9)](_0x395ece['toLowerCase']())&&(_0x3a2aab[_0x5dc01f(0x1a9)](_0x5dc01f(0x233))&&_0x3a2aab[_0x5dc01f(0x1a9)](_0x5dc01f(0x1f8))||_0x3a2aab[_0x5dc01f(0x1a9)](_0x5dc01f(0x1bc))&&_0x3a2aab['includes'](_0x5dc01f(0x1f8)));})[_0x5855c4(0x1ca)](_0x5855c4(0x1e0))['value']();return _0x361401[_0x5855c4(0x23d)](_0xd95bca=>{const _0x1e6b97=_0x5855c4,_0x2eca86=_0xd95bca['event']['includes'](_0x1e6b97(0x255))?_0x1e6b97(0x255):_0x1e6b97(0x176),_0x392c91=/#([0-9]|\.)+\s/i,_0x41420a=Number(_0x392c91['exec'](_0xd95bca[_0x1e6b97(0x244)])[0x0]['slice'](0x1)),_0x5390fd=/@([0-9]|\.)+$/i,_0x21b32c=Number(_0x5390fd[_0x1e6b97(0x269)](_0xd95bca[_0x1e6b97(0x244)])[0x0][_0x1e6b97(0x226)](0x1));_0x4e0c8c[_0x1e6b97(0x186)]({'datetime':_0xd95bca['time'],'coin':symbolToCoin(_0x395ece),'symbol':_0x395ece,'side':_0x2eca86,'amount':_0x41420a,'filled':_0x41420a,'price':_0x21b32c});}),_0x4e0c8c;}function _0x32e8(){const _0x1f9e9c=['/backup/','ticker','YOYOW/','startnumber','add','\x20>\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','performance','balancing\x20resumes\x20when\x20cooldown\x20ends','length','change','getSeconds','yyyy/MM/dd','send','fetchOpenOrders','mkdirSync','basecoin','deleteHistoryAlerts','Market','eur','enabled','getPortfolio()','initial','getDate','Binance\x20not\x20available\x20(1)','stringify','filter','symbols','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','excluded','argv','No\x20more\x20open\x20orders\x20-\x20','slice','buys','ccxt','reverse','find','limit-low','fetchBalance','fromCodePoint','DAI/','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','wsKey','\x20|\x20','side','market','Order(s)\x20validated\x20-\x20','EUR','Order\x20filled:\x20','Executed\x20','commission','cancelLoading',')\x20|\x20Error\x20details:\x20','getCoins()','starting-balances','forEach','./version.json','21852TXFGFB','symbol','lowdb/adapters/FileSync','offset','./config/','event','3370fDVwcJ','-------------------------------\x0a','bb-settings.json','eventTime','type','BNB','commissionAsset','coins','WebSockets(','API-key\x20format\x20invalid','orderId','fetchTickers','message','cancelOrders()','close','2827KDcycC','sell','toLowerCase','has','<pre>','min','no\x20open\x20orders','number','ETH','change24h','toString','configuration','keys','delta','42078cuPukk','existsSync','progress','valid','spot','sendPortfolioTelegram','fees','exec','Limit\x20(low-margin)','eventType','balancing\x20resumed','bot','\x20portfolio:\x20\x0a\x0a','subscribeSpotKline','timeout','restart','loadMarkets','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','breakeven','.json','accumulatedQuantity','formattedMessage','date','last','startprice','/USDT','exit','placeOrder','reconnected','bot-','getTime','storeHeadless','binanceus','version','recreate','bid','trade','cumulativeQuoteAssetTransactedQty','changes','datetime','target','final','toggleBotMode','binance','abs','indexOf','replace','3iivIrv','NANO/','2.3.5','\x20orders\x20in\x20less\x20than\x20','-results.json','date-fns','starting-balance-','recreateCoinResults()','emitHistory','timeshift','logs','assign','split','212243yCrbrZ','kill','USDT','ordertype','settings','apiSecret','\x20hour','buy','page','exchange','\x20|\x20Binance\x20API\x20key\x20invalid','ask','running','headless','success','amount','placeOrder()','parse','fetchClosedOrders','InvalidNonce','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20|\x20Error\x20details:\x20','push','apiKey','wsMarket','event-history','concat','-performance.json','botname','5poPEkK','cancel','initclient','function','Binance\x20API\x20blocked','set','precision','73024LoYcQi','sells','ExchangeNotAvailable','padStart','differenceInSeconds','findIndex','Cooldown\x20ended\x20-\x20balancing\x20resumed','cloneDeep','format','value','Binance\x20API\x20key\x20is\x20invalid','map','1865358jMGLbA','Invalid\x20quantity','Binance\x20not\x20responding','writeFile','toFixed','subscribeSymbol24hrTicker','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','write','(((.+)+)+)+$','includes','max','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','log','limit','-config.json','ongoing','yyyy-MM-dd\x27T\x27HH:mm:ss','string','getMinutes','getFiat()','balances','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','error','userData','getMonth','getFullYear','remainingSymbols','data','filled','kline','distribution','startdate','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','total','constructor','wss://stream.binance.us:9443','API\x20or\x20clock\x20sync\x20issue','RequestTimeout','usd','decrypt','join','args','sortBy','getHours','Manual\x20balancing\x20required:\x20','1630727uBYGgZ','cooldown','************','storeConfiguration','portfolio','OrderNotFound','coin','Unknown\x20error\x20occured','DDoSProtection','shift','hybrid-crypto-js','cost','secure','XEM/BUSD','get','Crypt','limits','8wqliap','emojisell','time','defaults','executionReport','isArray','entries','showname','RSA-OAEP','Order\x20amount\x20is\x20invalid:\x20','sort','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','Order(s)\x20not\x20validated\x20after\x20','threshold','Binance\x20API\x20secret\x20is\x20invalid','\x20order:\x20','cancelOrder','Bot\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','apply','emojibuy','subscribeSpotUserDataStream','\x20minutes\x20-\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','round','2718XiDjuS','order','HOT/EUR','BNB/','Limit\x20(high-margin)','fee','configuration-stored','liquidity','remove','MIN_NOTIONAL','currency',',\x20must\x20be\x20a\x203\x20digit\x20number','price','privateKey','splice'];_0x32e8=function(){return _0x1f9e9c;};return _0x32e8();}async function getAllOrders(_0x302006,_0x256587){const _0x325bfd=_0x2c39c;let _0x1b3da4=[];while(_0x256587<exchange['milliseconds']()){const _0x3bef8c=0x1f4,_0x556a12=await exchange[_0x325bfd(0x181)](_0x302006,_0x256587,_0x3bef8c);if(_0x556a12[_0x325bfd(0x20f)])_0x256587=_0x556a12[_0x556a12[_0x325bfd(0x20f)]-0x1]['timestamp']+0x1,_0x1b3da4=_0x1b3da4[_0x325bfd(0x18a)](_0x556a12);else break;}return _0x1b3da4;}async function validate24hChanges(){const _0x1feef5=_0x2c39c;let _0x3d728b;for(const _0x437e83 of currentCoins){if(_0x437e83[_0x1feef5(0x1d3)]!=config[_0x1feef5(0x216)]){let _0x51f029;_0x437e83['reverse']?_0x51f029=formatResult((0x1/(global['change'][noslash(_0x437e83[_0x1feef5(0x240)])]/0x64+0x1)-0x1)*0x64,0x3):_0x51f029=global['change'][noslash(_0x437e83[_0x1feef5(0x240)])],_0x51f029<config[_0x1feef5(0x25d)]&&(logHistory(_0x1feef5(0x1b6),_0x437e83['coin']+_0x1feef5(0x20c)+_0x51f029+'%'),logHistory(_0x1feef5(0x1b6),_0x1feef5(0x1f0)),logHistory(_0x1feef5(0x1b6),_0x1feef5(0x184)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x4b5ab4=_0x2c39c;let _0x4746b2=dbLogs[_0x4b5ab4(0x1db)]('version')['value']();if(_0x4746b2!=_0x4b5ab4(0x164)){dbLogs[_0x4b5ab4(0x192)]('version',_0x4b5ab4(0x164))[_0x4b5ab4(0x1a7)]();let _0x1baaba=[];const _0x321e55=dbLogs[_0x4b5ab4(0x1db)](_0x4b5ab4(0x16c))[_0x4b5ab4(0x19d)]();_0x321e55['forEach'](_0x73fbad=>{const _0x308b94=_0x4b5ab4;_0x1baaba[_0x308b94(0x186)]({'time':_0x73fbad[_0x308b94(0x1e0)],'type':_0x73fbad[_0x308b94(0x249)],'event':_0x73fbad[_0x308b94(0x244)]});}),dbLogs[_0x4b5ab4(0x1db)]('logs')[_0x4b5ab4(0x16d)](_0x1baaba)['write']();}let _0x4b43e8=dbConfig[_0x4b5ab4(0x1db)](_0x4b5ab4(0x154))[_0x4b5ab4(0x19d)]();if(_0x4b43e8!=_0x4b5ab4(0x164)){dbConfig[_0x4b5ab4(0x192)](_0x4b5ab4(0x154),_0x4b5ab4(0x164))[_0x4b5ab4(0x1a7)]();let _0x1cd7be=dbConfig[_0x4b5ab4(0x1db)](_0x4b5ab4(0x13e))['find']({'botID':botID})['value']();if(_0x1cd7be){let _0x5eb38b=[];_0x1cd7be[_0x4b5ab4(0x1d1)][_0x4b5ab4(0x23d)](_0x50ba38=>{const _0x44f25e=_0x4b5ab4;_0x5eb38b[_0x44f25e(0x186)]({'coin':_0x50ba38[_0x44f25e(0x1d3)],'number':_0x50ba38[_0x44f25e(0x209)],'price':_0x50ba38[_0x44f25e(0x14b)]}),delete _0x50ba38[_0x44f25e(0x209)],delete _0x50ba38[_0x44f25e(0x14b)];});if(_0x5eb38b['length']!==0x0)fs[_0x4b5ab4(0x1a3)](configbackuppath+(_0x4b5ab4(0x168)+botID+_0x4b5ab4(0x146)),JSON[_0x4b5ab4(0x21f)](_0x5eb38b,null,0x4),function(_0xf276f0){if(_0xf276f0){}});const _0x363a52=(_0x1e67be,_0x3fe831)=>{const _0x5a89eb=_0x4b5ab4;let _0x28affb=[];_0x3fe831[_0x5a89eb(0x23d)](_0x3c4a79=>{const _0x48f5b8=_0x5a89eb,_0x12376e=_0x1e67be[_0x48f5b8(0x22a)](_0x399a52=>_0x399a52[_0x48f5b8(0x1d3)]==_0x3c4a79['coin']);if(!_0x12376e)_0x28affb[_0x48f5b8(0x186)](_0x3c4a79);});let _0x2644ef=[];return _0x1e67be['forEach'](_0x18a579=>{const _0xacfc29=_0x5a89eb,_0x142950=_0x3fe831['find'](_0x1b5498=>_0x1b5498[_0xacfc29(0x1d3)]==_0x18a579[_0xacfc29(0x1d3)]);if(!_0x142950||_0x142950[_0xacfc29(0x25b)]==0x0&&_0x18a579[_0xacfc29(0x25b)]!=0x0)_0x2644ef['push'](_0x18a579);}),{'missingDay1':_0x28affb,'notInDay2':_0x2644ef};},_0x521c3f=dbPerformance['get'](_0x4b5ab4(0x1bb))[_0x4b5ab4(0x19b)]()[_0x4b5ab4(0x19d)]();if(_0x521c3f[_0x4b5ab4(0x20f)]>0x1){const {missingDay1:_0x49bcb8,notInDay2:_0x5e24b2}=_0x363a52(_0x5eb38b,_0x521c3f[0x1]['coins']);_0x5eb38b=[..._0x5eb38b,..._0x49bcb8],_0x5e24b2[_0x4b5ab4(0x23d)](_0x200bc7=>{const _0x2f6ab4=_0x4b5ab4;let _0x5bede8=_0x5eb38b[_0x2f6ab4(0x199)](_0x88ee57=>_0x88ee57[_0x2f6ab4(0x1d3)]==_0x200bc7['coin']);_0x5bede8!=-0x1&&_0x5eb38b[_0x2f6ab4(0x205)](_0x5bede8,0x1);});}_0x5eb38b['sort']((_0x289c5e,_0x40cf33)=>_0x289c5e[_0x4b5ab4(0x1d3)]>_0x40cf33[_0x4b5ab4(0x1d3)]?0x1:_0x40cf33[_0x4b5ab4(0x1d3)]>_0x289c5e['coin']?-0x1:0x0);let _0x34200c=[{'date':_0x1cd7be[_0x4b5ab4(0x1bf)],'changes':_0x5eb38b}];_0x521c3f[_0x4b5ab4(0x20f)]>0x2&&_0x521c3f[_0x4b5ab4(0x23d)]((_0x3c24f8,_0x53975d)=>{const _0x3a87a=_0x4b5ab4;if(_0x53975d>0x0&&_0x53975d<_0x521c3f[_0x3a87a(0x20f)]-0x1){const {missingDay1:_0x32a536,notInDay2:_0x1e1d8a}=_0x363a52(_0x521c3f[_0x53975d][_0x3a87a(0x24c)],_0x521c3f[_0x53975d+0x1]['coins']);_0x5eb38b=[],(_0x32a536[_0x3a87a(0x20f)]!=0x0||_0x1e1d8a[_0x3a87a(0x20f)]!=0x0)&&(_0x32a536[_0x3a87a(0x20f)]!=0x0&&_0x5eb38b[_0x3a87a(0x186)](..._0x32a536),_0x1e1d8a[_0x3a87a(0x20f)]!=0x0&&(_0x1e1d8a[_0x3a87a(0x23d)](_0x36b447=>{const _0x4d49ea=_0x3a87a;_0x36b447[_0x4d49ea(0x25b)]=-_0x36b447[_0x4d49ea(0x25b)];}),_0x5eb38b[_0x3a87a(0x186)](..._0x1e1d8a)),_0x5eb38b['sort']((_0x2ae078,_0x1517d0)=>_0x2ae078[_0x3a87a(0x1d3)]>_0x1517d0[_0x3a87a(0x1d3)]?0x1:_0x1517d0[_0x3a87a(0x1d3)]>_0x2ae078[_0x3a87a(0x1d3)]?-0x1:0x0),_0x34200c[_0x3a87a(0x186)]({'date':_0x521c3f[_0x53975d+0x1][_0x3a87a(0x149)],'changes':_0x5eb38b}));}}),dbConfig[_0x4b5ab4(0x1db)](_0x4b5ab4(0x13e))[_0x4b5ab4(0x22a)]({'botID':botID})[_0x4b5ab4(0x16d)]({..._0x1cd7be,'liquidity':_0x34200c})[_0x4b5ab4(0x1a7)]();}}config=getConfiguration(botID);let _0x5cd4c5=dbPerformance[_0x4b5ab4(0x1db)]('version')[_0x4b5ab4(0x19d)]();_0x5cd4c5!=_0x4b5ab4(0x164)&&(dbPerformance[_0x4b5ab4(0x192)]('version',_0x4b5ab4(0x164))[_0x4b5ab4(0x1a7)](),setStartDatePerformance());let _0x2d7388=dbCoinResults['get'](_0x4b5ab4(0x154))[_0x4b5ab4(0x19d)]();if(_0x2d7388!='2.5.0'){dbCoinResults[_0x4b5ab4(0x192)](_0x4b5ab4(0x154),'2.5.0')[_0x4b5ab4(0x1a7)]();let _0x555981=dbCoinResults['get'](_0x4b5ab4(0x24c))[_0x4b5ab4(0x19d)]();if(_0x555981[_0x4b5ab4(0x20f)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x253e3e){const _0x59272f=_0x2c39c;let _0x38c487=dbConfig[_0x59272f(0x1db)](_0x59272f(0x13e))[_0x59272f(0x22a)]({'botID':_0x253e3e})[_0x59272f(0x19d)]();if(_0x38c487){let _0x59df1f=![];typeof _0x38c487[_0x59272f(0x1eb)]==_0x59272f(0x1b1)&&(_0x38c487={..._0x38c487,'threshold':Number(_0x38c487[_0x59272f(0x1eb)])},_0x59df1f=!![]),_0x38c487[_0x59272f(0x25d)]==null&&(_0x38c487={..._0x38c487,'change24h':-0x14},_0x59df1f=!![]),_0x59df1f&&(_0x38c487={'botID':_0x38c487['botID'],'exchange':_0x38c487[_0x59272f(0x178)],'apiKey':_0x38c487[_0x59272f(0x187)],'apiSecret':_0x38c487[_0x59272f(0x174)],'basecoin':_0x38c487[_0x59272f(0x216)],'botname':_0x38c487['botname'],'showname':_0x38c487[_0x59272f(0x1e5)],'threshold':_0x38c487[_0x59272f(0x1eb)],'ordertype':_0x38c487['ordertype'],'timeout':_0x38c487['timeout'],'startdate':_0x38c487[_0x59272f(0x1bf)],'recreate':_0x38c487[_0x59272f(0x155)],'timeshift':_0x38c487['timeshift'],'headless':_0x38c487[_0x59272f(0x17c)],'cooldown':_0x38c487['cooldown'],'change24h':_0x38c487[_0x59272f(0x25d)],'emojibuy':_0x38c487[_0x59272f(0x1f2)],'emojisell':_0x38c487[_0x59272f(0x1df)],'portfolio':_0x38c487[_0x59272f(0x1d1)],'liquidity':_0x38c487[_0x59272f(0x1fe)]},dbConfig[_0x59272f(0x1db)]('bot')['remove']()[_0x59272f(0x1a7)](),dbConfig[_0x59272f(0x1db)]('bot')['push'](_0x38c487)[_0x59272f(0x1a7)]());}else _0x38c487={'botID':_0x253e3e,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x253e3e,'showname':![],'threshold':0x3,'ordertype':_0x59272f(0x233),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x59272f(0x16b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x38c487;}function emittedConfiguration(){const _0x29e851=_0x2c39c;let _0x3bce1b;return config['apiKey']==''?_0x3bce1b=config:_0x3bce1b={...config,'apiKey':_0x29e851(0x1cf),'apiSecret':_0x29e851(0x1cf)},_0x3bce1b;}function getSettings(){const _0x1588c7=_0x2c39c;return dbSettings[_0x1588c7(0x1db)](_0x1588c7(0x173))[_0x1588c7(0x19d)]();}function getSecure(){const _0x302f37=_0x2c39c;return dbSecure['get'](_0x302f37(0x1d9))[_0x302f37(0x19d)]()||{};}function updateTimeshift(_0x402bca){const _0x31293a=_0x2c39c;let _0x3ec66c=dbConfig[_0x31293a(0x1db)]('bot')[_0x31293a(0x22a)]({'botID':botID})[_0x31293a(0x19d)]();_0x3ec66c&&dbConfig[_0x31293a(0x1db)](_0x31293a(0x13e))[_0x31293a(0x22a)]({'botID':botID})[_0x31293a(0x16d)]({'timeshift':_0x402bca})[_0x31293a(0x1a7)](),config[_0x31293a(0x16b)]=_0x402bca,proxyEmit(_0x31293a(0x25f),emittedConfiguration());}async function storeConfiguration(_0x2ff8c0){const _0xfa0407=_0x2c39c;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x1a0f58=dbConfig[_0xfa0407(0x1db)](_0xfa0407(0x13e))[_0xfa0407(0x22a)]({'botID':botID})['value']();_0x2ff8c0={..._0x2ff8c0,'apiKey':crypt['decrypt'](secure[_0xfa0407(0x204)],_0x2ff8c0[_0xfa0407(0x187)])[_0xfa0407(0x251)],'apiSecret':crypt[_0xfa0407(0x1c7)](secure['privateKey'],_0x2ff8c0[_0xfa0407(0x174)])[_0xfa0407(0x251)]};if(_0x1a0f58){if(_0x2ff8c0[_0xfa0407(0x187)]==_0xfa0407(0x1cf))_0x2ff8c0[_0xfa0407(0x187)]=config[_0xfa0407(0x187)];if(_0x2ff8c0['apiSecret']==_0xfa0407(0x1cf))_0x2ff8c0[_0xfa0407(0x174)]=config[_0xfa0407(0x174)];dbConfig['get']('bot')[_0xfa0407(0x22a)]({'botID':botID})[_0xfa0407(0x16d)](_0x2ff8c0)[_0xfa0407(0x1a7)]();}else dbConfig['get'](_0xfa0407(0x13e))['push'](_0x2ff8c0)[_0xfa0407(0x1a7)](),process[_0xfa0407(0x213)]({'status':_0xfa0407(0x21a),'live':_0xfa0407(0x17b)},_0x301f9e=>{});config={..._0x2ff8c0},setStartDatePerformance(),process['send']({'botname':_0x2ff8c0[_0xfa0407(0x18c)]},_0x350941=>{}),updateBotManager();const _0x461b34=getNormalizedPerformance();getStartingBalances(_0x461b34),emitPerformance(_0x461b34),proxyEmit(_0xfa0407(0x1fd)),await initCoinResults(),reset();}async function storeHeadless(_0x4a1112){const _0x37d1d3=_0x2c39c,_0x136679={...config,'headless':_0x4a1112[_0x37d1d3(0x17c)]};let _0x44b439=dbConfig[_0x37d1d3(0x1db)](_0x37d1d3(0x13e))[_0x37d1d3(0x22a)]({'botID':botID})[_0x37d1d3(0x19d)]();_0x44b439&&dbConfig[_0x37d1d3(0x1db)]('bot')['find']({'botID':botID})['assign'](_0x136679)[_0x37d1d3(0x1a7)](),config={..._0x136679},updateBotManager(),proxyEmit(_0x37d1d3(0x25f),emittedConfiguration());}function noslash(_0xd4d281){const _0x3b2996=_0x2c39c;return _0xd4d281[_0x3b2996(0x161)]('/','');}async function updateNumberCoins(_0x171d53){const _0x537a50=_0x2c39c;if(_0x171d53[_0x537a50(0x13c)]&&_0x171d53[_0x537a50(0x13c)]=='outboundAccountPosition'){if(_0x171d53[_0x537a50(0x248)]!=lastOutboundEventTime){lastOutboundEventTime=_0x171d53[_0x537a50(0x248)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x2aa405=JSON[_0x537a50(0x180)](lastBalances[_0x537a50(0x1d1)]);_0x2aa405[_0x537a50(0x23d)](_0x16616b=>{const _0x580144=_0x537a50,_0x298988=currentCoins[_0x580144(0x22a)](_0x51b1cf=>_0x51b1cf['coin']==_0x16616b['coin']);if(_0x298988[_0x580144(0x1f8)])_0x16616b['order']=_0x298988['order'];}),lastBalances={...lastBalances,'portfolio':JSON[_0x537a50(0x21f)](_0x2aa405)},proxyEmit(_0x537a50(0x1b4),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x171d53[_0x537a50(0x13c)]&&_0x171d53[_0x537a50(0x13c)]==_0x537a50(0x1e2)){if(_0x171d53['orderStatus']=='FILLED'){if(lastOrders)lastOrders[_0x537a50(0x23d)](async _0x5d58fc=>{const _0x356445=_0x537a50;_0x5d58fc[_0x356445(0x24f)]==_0x171d53[_0x356445(0x24f)]&&_0x5d58fc[_0x356445(0x1bc)]==0x0&&(_0x5d58fc[_0x356445(0x203)]=_0x171d53[_0x356445(0x158)]/_0x171d53[_0x356445(0x147)],_0x5d58fc[_0x356445(0x1bc)]=_0x171d53[_0x356445(0x147)],_0x5d58fc['fee']={'cost':_0x171d53[_0x356445(0x238)],'currency':_0x171d53[_0x356445(0x24b)]},await validateOrders(),await updateCoinResults(_0x5d58fc));});}}}async function getCoins(_0x3ba0c1=![],_0x174f18=!![],_0x57d080=config[_0x2c39c(0x216)]){const _0x4470f2=_0x2c39c;let _0x3e7d3f,_0x5327d6=[],_0x1e75b6=[],_0x32e0a1=[];try{_0x3e7d3f=await exchange[_0x4470f2(0x22c)](),mybalances=_0x3e7d3f[_0x4470f2(0x1c1)];if(!_0x174f18)for(const [_0x567834,_0x58ed24]of Object[_0x4470f2(0x1e4)](mybalances)){_0x32e0a1['push'](_0x567834);}else config[_0x4470f2(0x1d1)]['forEach'](_0x32b4e1=>{const _0x19efd7=_0x4470f2;if(!_0x32b4e1[_0x19efd7(0x223)])_0x32e0a1[_0x19efd7(0x186)](_0x32b4e1['coin']);});if(_0x57d080=='')for(const [_0x1543e3,_0x459a05]of Object[_0x4470f2(0x1e4)](mybalances)){_0x459a05[_0x4470f2(0x25e)]()!=0x0&&_0x1e75b6[_0x4470f2(0x186)]({'coin':_0x1543e3});}else{let _0x5e95b3=![],_0xb8f111;allOpenOrders=[];for(const [_0x12efd0,_0x3005eb]of Object[_0x4470f2(0x1e4)](mybalances)){if(_0x32e0a1[_0x4470f2(0x1a9)](_0x12efd0)){const _0x4bde99=config['portfolio'][_0x4470f2(0x22a)](_0x37f017=>_0x37f017[_0x4470f2(0x1d3)]==_0x12efd0),_0x19b09d=_0x12efd0+'/'+_0x57d080,_0x1f69a5=_0x57d080+'/'+_0x12efd0;_0x5e95b3=![];if((_0x3005eb[_0x4470f2(0x25e)]()!=0x0||_0x4bde99)&&(allSymbols['includes'](_0x19b09d)||_0x12efd0==_0x57d080))_0x12efd0!=_0x57d080&&(_0x5327d6[_0x4470f2(0x186)](_0x19b09d),_0x3ba0c1&&(_0xb8f111=await exchange[_0x4470f2(0x214)](_0x19b09d),_0xb8f111[_0x4470f2(0x20f)]>0x0&&(_0x5e95b3=!![]))),_0x1e75b6[_0x4470f2(0x186)]({'coin':_0x12efd0,'symbol':_0x19b09d,'reverse':![],'number':Math[_0x4470f2(0x1aa)](_0x3005eb+(_0x4bde99&&_0x4bde99[_0x4470f2(0x242)]||0x0),0x0),'order':_0x5e95b3});else(_0x3005eb[_0x4470f2(0x25e)]()!=0x0||_0x4bde99)&&allSymbols[_0x4470f2(0x1a9)](_0x1f69a5)&&(_0x12efd0!=_0x57d080&&(_0x5327d6[_0x4470f2(0x186)](_0x1f69a5),_0x3ba0c1&&(_0xb8f111=await exchange[_0x4470f2(0x214)](_0x1f69a5),_0xb8f111[_0x4470f2(0x20f)]>0x0&&(_0x5e95b3=!![]))),_0x1e75b6['push']({'coin':_0x12efd0,'symbol':_0x1f69a5,'reverse':!![],'number':Math['max'](_0x3005eb+(_0x4bde99&&_0x4bde99[_0x4470f2(0x242)]||0x0),0x0),'order':_0x5e95b3}));}_0x5e95b3&&allOpenOrders[_0x4470f2(0x186)](_0xb8f111[0x0]);}_0x3ba0c1&&allOpenOrders[_0x4470f2(0x20f)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x4470f2(0x25a))));}}catch(_0x1e559e){if(!_0x174f18){if(_0x1e559e['toString']()['includes'](_0x4470f2(0x24e)))return logHistory(_0x4470f2(0x1b6),_0x4470f2(0x19e)),![];else{if(_0x1e559e[_0x4470f2(0x25e)]()[_0x4470f2(0x1a9)]('AuthenticationError'))return logHistory(_0x4470f2(0x1b6),_0x4470f2(0x1b5)),![];else{if(_0x1e559e[_0x4470f2(0x25e)]()[_0x4470f2(0x1a9)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x4470f2(0x1b6),_0x4470f2(0x1ec)),![];else await handleError(_0x1e559e,_0x4470f2(0x23b));}}}else await handleError(_0x1e559e,'getCoins()');}return _0x1e75b6;}async function getPortfolio(_0x19136a){const _0x4c14a4=_0x2c39c;let _0x593f5d=[],_0x50e408=[],_0x21d251,_0x959db2=[],_0x15073a,_0x2d858c;_0x19136a['apiKey']===_0x4c14a4(0x1cf)||_0x19136a[_0x4c14a4(0x174)]===_0x4c14a4(0x1cf)?(_0x15073a=config[_0x4c14a4(0x187)],_0x2d858c=config[_0x4c14a4(0x174)]):(_0x15073a=_0x19136a['apiKey'],_0x2d858c=_0x19136a['apiSecret']);await initExchange(_0x15073a,_0x2d858c);let _0x2e1258=await loadSymbols();if(_0x2e1258){_0x959db2=await getCoins(![],![],_0x19136a['basecoin']);if(_0x959db2===![])proxyEmit('portfolio',![]);else{if(_0x19136a['basecoin']=='')proxyEmit(_0x4c14a4(0x1d1),_0x959db2);else{_0x959db2[_0x4c14a4(0x23d)](_0x55df91=>{const _0x319080=_0x4c14a4;if(_0x55df91[_0x319080(0x1d3)]!=_0x19136a[_0x319080(0x216)])_0x593f5d['push'](_0x55df91[_0x319080(0x240)]);});try{_0x50e408=await exchange[_0x4c14a4(0x250)](_0x593f5d);}catch(_0x454f16){await handleError(_0x454f16,_0x4c14a4(0x21b));}_0x959db2[_0x4c14a4(0x23d)](_0x3588bc=>{const _0x6ee397=_0x4c14a4;_0x3588bc['coin']!=_0x19136a[_0x6ee397(0x216)]?_0x21d251=_0x3588bc[_0x6ee397(0x229)]?0x1/_0x50e408[_0x3588bc[_0x6ee397(0x240)]][_0x6ee397(0x14a)]:_0x50e408[_0x3588bc[_0x6ee397(0x240)]][_0x6ee397(0x14a)]:_0x21d251=0x1,_0x3588bc[_0x6ee397(0x203)]=formatResult(_0x21d251,0x8);}),proxyEmit(_0x4c14a4(0x1d1),_0x959db2);}}}else proxyEmit(_0x4c14a4(0x1d1),![]);}function checkMinimums(_0x277b83){const _0x26809c=_0x2c39c;let _0x5d256d=!![];const _0x5abddc=!_0x277b83[_0x26809c(0x229)]?markets[_0x277b83[_0x26809c(0x240)]]['limits'][_0x26809c(0x17e)][_0x26809c(0x259)]:markets[_0x277b83[_0x26809c(0x240)]][_0x26809c(0x1dd)][_0x26809c(0x1d8)][_0x26809c(0x259)],_0x215879=!_0x277b83[_0x26809c(0x229)]?markets[_0x277b83[_0x26809c(0x240)]]['limits']['cost']['min']:markets[_0x277b83[_0x26809c(0x240)]][_0x26809c(0x1dd)][_0x26809c(0x17e)][_0x26809c(0x259)],_0x4ac74c=markets[_0x277b83[_0x26809c(0x240)]][_0x26809c(0x193)][_0x26809c(0x17e)];_0x277b83[_0x26809c(0x157)]=formatResultTruncate(_0x277b83[_0x26809c(0x157)],_0x4ac74c);if(Math[_0x26809c(0x15f)](_0x277b83[_0x26809c(0x157)])<_0x5abddc)_0x5d256d=![];if(Math['abs'](_0x277b83[_0x26809c(0x157)])*_0x277b83[_0x26809c(0x14a)]<_0x215879)_0x5d256d=![];if(_0x277b83[_0x26809c(0x232)]==_0x26809c(0x255)){let _0x96964=config[_0x26809c(0x1d1)][_0x26809c(0x22a)](_0x1a87e5=>_0x1a87e5[_0x26809c(0x1d3)]==_0x277b83[_0x26809c(0x1d3)]);if(_0x96964[_0x26809c(0x242)]>0x0){if(Math[_0x26809c(0x15f)](_0x277b83[_0x26809c(0x157)])>_0x277b83['number']-_0x96964[_0x26809c(0x242)])_0x5d256d=![];}else{if(Math[_0x26809c(0x15f)](_0x277b83['trade'])>_0x277b83[_0x26809c(0x25b)])_0x5d256d=![];}}if(_0x277b83[_0x26809c(0x232)]==_0x26809c(0x176)){let _0x30a9f1=config[_0x26809c(0x1d1)][_0x26809c(0x22a)](_0x445eef=>_0x445eef[_0x26809c(0x1d3)]==config[_0x26809c(0x216)]),_0x14b969=currentCoins[_0x26809c(0x22a)](_0x2952e4=>_0x2952e4['coin']==config[_0x26809c(0x216)]);if(_0x30a9f1['offset']>0x0){if(Math[_0x26809c(0x15f)](_0x277b83['trade'])*_0x277b83[_0x26809c(0x14a)]>_0x14b969['number']-_0x30a9f1['offset'])_0x5d256d=![];}else{if(Math[_0x26809c(0x15f)](_0x277b83['trade'])*_0x277b83[_0x26809c(0x14a)]>_0x14b969[_0x26809c(0x25b)])_0x5d256d=![];}}return _0x5d256d;}async function getBalances(){const _0x2cc1e8=_0x2c39c;let _0x4fe7db=0x0,_0x5188a9;const _0x4deb64=config[_0x2cc1e8(0x1eb)];if(config[_0x2cc1e8(0x17c)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2cc1e8(0x23d)](_0x2088d0=>{const _0x20b7a4=_0x2cc1e8;if(_0x2088d0[_0x20b7a4(0x1d3)]!=config[_0x20b7a4(0x216)]){let _0x36cdf4=global[_0x20b7a4(0x207)][noslash(_0x2088d0[_0x20b7a4(0x240)])];_0x5188a9=_0x2088d0[_0x20b7a4(0x229)]?0x1/_0x36cdf4:_0x36cdf4;}else _0x5188a9=0x1;let _0x44121a=_0x2088d0['number']*_0x5188a9;_0x4fe7db+=_0x44121a,_0x2088d0[_0x20b7a4(0x14a)]=formatResult(Number(_0x5188a9),0x8),_0x2088d0['value']=_0x44121a;}),currentCoins[_0x2cc1e8(0x23d)](_0x1a0f18=>{const _0x1bbf64=_0x2cc1e8;let _0x43f4a4=config['portfolio'][_0x1bbf64(0x22a)](_0x52da96=>_0x52da96[_0x1bbf64(0x1d3)]==_0x1a0f18[_0x1bbf64(0x1d3)]),_0x5730e3=Number(_0x43f4a4[_0x1bbf64(0x1be)]),_0x537a4d=_0x1a0f18[_0x1bbf64(0x19d)]/_0x4fe7db*0x64,_0x20b792=_0x5730e3*_0x4fe7db/0x64/_0x1a0f18[_0x1bbf64(0x14a)]-_0x1a0f18[_0x1bbf64(0x25b)];_0x1a0f18[_0x1bbf64(0x1be)]=formatResult(_0x537a4d,0x3),_0x1a0f18['target']=formatResult(_0x5730e3,0x3),_0x1a0f18['trade']=formatResult(_0x20b792,0x8),_0x1a0f18[_0x1bbf64(0x232)]='',_0x1a0f18[_0x1bbf64(0x265)]=![];if(_0x1a0f18[_0x1bbf64(0x1d3)]!=config[_0x1bbf64(0x216)]){if(_0x1a0f18[_0x1bbf64(0x1be)]>_0x5730e3)_0x1a0f18['side']='sell',_0x1a0f18['valid']=checkMinimums(_0x1a0f18);else _0x1a0f18[_0x1bbf64(0x1be)]<_0x5730e3&&(_0x1a0f18[_0x1bbf64(0x232)]=_0x1bbf64(0x176),_0x1a0f18[_0x1bbf64(0x265)]=checkMinimums(_0x1a0f18));}_0x1a0f18[_0x1bbf64(0x261)]=_0x1a0f18['distribution']/_0x1a0f18['target']-0x1;}),currentCoins['sort']((_0x42f817,_0x177c23)=>_0x42f817['delta']<_0x177c23['delta']?0x1:_0x177c23[_0x2cc1e8(0x261)]<_0x42f817[_0x2cc1e8(0x261)]?-0x1:0x0);const _0x699fee=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x699fee[_0x2cc1e8(0x219)],'usd':_0x699fee[_0x2cc1e8(0x1c6)],'portfolio':JSON[_0x2cc1e8(0x21f)](currentCoins),'threshold':_0x4deb64},proxyEmit(_0x2cc1e8(0x1b4),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2cc1e8(0x17c)])headlessMode({'portfolio':currentCoins,'threshold':_0x4deb64});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x4deb64});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x58ea4d=_0x2c39c;if(!lastBalances)return;let _0x24e4b6=[],_0x1c6470,_0x35bb82=JSON['parse'](lastBalances[_0x58ea4d(0x1d1)]);_0x35bb82[_0x58ea4d(0x1e8)]((_0x2a014c,_0x33b5f9)=>_0x2a014c[_0x58ea4d(0x1d3)]>_0x33b5f9[_0x58ea4d(0x1d3)]?0x1:_0x33b5f9[_0x58ea4d(0x1d3)]>_0x2a014c['coin']?-0x1:0x0),_0x35bb82[_0x58ea4d(0x23d)](_0x84d513=>{const _0x41260b=_0x58ea4d;let _0x40c2a3={'coin':_0x84d513[_0x41260b(0x1d3)],'number':_0x84d513[_0x41260b(0x25b)],'price':_0x84d513[_0x41260b(0x14a)]};_0x24e4b6[_0x41260b(0x186)](_0x40c2a3);});const _0x12b8c1=await getFiat();_0x1c6470={'date':lastBalances['time'][_0x58ea4d(0x16e)]('\x20')[0x0],'eur':_0x12b8c1[_0x58ea4d(0x219)],'usd':_0x12b8c1['usd'],'coins':_0x24e4b6};let _0x3d5f30=dbPerformance[_0x58ea4d(0x1db)](_0x58ea4d(0x1bb))[_0x58ea4d(0x22a)]({'date':_0x1c6470['date']})[_0x58ea4d(0x19d)]();_0x3d5f30?_0x1c6470[_0x58ea4d(0x149)]!=config['startdate']&&dbPerformance['get'](_0x58ea4d(0x1bb))[_0x58ea4d(0x22a)]({'date':_0x1c6470[_0x58ea4d(0x149)]})[_0x58ea4d(0x16d)](_0x1c6470)[_0x58ea4d(0x1a7)]():dbPerformance[_0x58ea4d(0x1db)](_0x58ea4d(0x1bb))[_0x58ea4d(0x186)](_0x1c6470)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x562de6=_0x2c39c;let _0x1cee8e=[];if(dbPerformance[_0x562de6(0x257)]('data')['value']()){let _0x5ac17a=dbPerformance[_0x562de6(0x1db)](_0x562de6(0x1bb))['cloneDeep']()[_0x562de6(0x1ca)](_0x562de6(0x149))['value'](),_0x2652ab=[...config[_0x562de6(0x1fe)]];_0x2652ab[_0x562de6(0x1e8)]((_0x497e0a,_0x306f7a)=>_0x497e0a['date']>_0x306f7a[_0x562de6(0x149)]?-0x1:_0x306f7a[_0x562de6(0x149)]>_0x497e0a[_0x562de6(0x149)]?0x1:0x0);let _0x54dc6e=0x1,_0x5a4f3b=[],_0x4f5442=0x0;_0x5ac17a[_0x562de6(0x226)]()[_0x562de6(0x229)]()[_0x562de6(0x23d)]((_0x5bcddd,_0xce0be6)=>{const _0xb0e458=_0x562de6;if(_0x2652ab[_0x4f5442]){if(_0x5ac17a[_0x5ac17a[_0xb0e458(0x20f)]-_0xce0be6]&&_0x2652ab[_0x4f5442][_0xb0e458(0x149)]==_0x5ac17a[_0x5ac17a[_0xb0e458(0x20f)]-_0xce0be6][_0xb0e458(0x149)]){if(_0xce0be6<_0x5ac17a[_0xb0e458(0x20f)]){let _0x16d873=0x0,_0x5cc568=0x0;_0x5ac17a[_0x5ac17a[_0xb0e458(0x20f)]-_0xce0be6][_0xb0e458(0x24c)]['forEach'](_0x3b6ba0=>{const _0x1ad457=_0xb0e458;_0x5cc568+=_0x3b6ba0[_0x1ad457(0x25b)]*_0x3b6ba0[_0x1ad457(0x203)];}),_0x2652ab[_0x4f5442][_0xb0e458(0x159)][_0xb0e458(0x23d)](_0x4e6078=>{const _0x16e4c5=_0xb0e458;_0x16d873+=_0x4e6078[_0x16e4c5(0x25b)]*_0x4e6078[_0x16e4c5(0x203)];}),_0x54dc6e*=_0x16d873/(_0x5cc568-_0x16d873)+0x1;}_0x4f5442++;}}let _0x18254d=0x0;_0x5bcddd[_0xb0e458(0x24c)][_0xb0e458(0x23d)](_0x1a97db=>{const _0x2ca675=_0xb0e458;_0x18254d+=_0x1a97db[_0x2ca675(0x25b)]*_0x1a97db['price'];}),_0x5a4f3b[_0x5ac17a[_0xb0e458(0x20f)]-_0xce0be6-0x1]=_0x18254d*(_0x54dc6e-0x1);});let _0x163e93=[];_0x2652ab=[...config[_0x562de6(0x1fe)]]||[];let _0x582145=0x0;_0x4f5442=0x0,_0x5ac17a[_0x562de6(0x23d)]((_0xa59c3f,_0xbf6041)=>{const _0xab6423=_0x562de6;if(_0x2652ab[_0x4f5442]){const _0x4a8103=fns[_0xab6423(0x180)](_0x2652ab[_0x4f5442][_0xab6423(0x149)],'yyyy/MM/dd',new Date()),_0xfa2ff3=fns[_0xab6423(0x180)](_0xa59c3f[_0xab6423(0x149)],_0xab6423(0x212),new Date());if(fns['isEqual'](_0x4a8103,_0xfa2ff3)){let _0x5049db=0x0;_0x2652ab[_0x4f5442]['changes'][_0xab6423(0x23d)](_0x2f8608=>{const _0x20153e=_0xab6423;!_0x163e93[_0x2f8608['coin']]?_0x163e93[_0x2f8608[_0x20153e(0x1d3)]]=_0x2f8608[_0x20153e(0x25b)]:(_0x5049db=_0x163e93[_0x2f8608[_0x20153e(0x1d3)]],_0x163e93[_0x2f8608[_0x20153e(0x1d3)]]+=_0x2f8608[_0x20153e(0x25b)]);const _0x101b17=_0xa59c3f['coins'][_0x20153e(0x22a)](_0x29c6cd=>_0x29c6cd[_0x20153e(0x1d3)]==_0x2f8608[_0x20153e(0x1d3)]);(!_0x101b17||_0x101b17[_0x20153e(0x25b)]==0x0)&&(_0x582145+=(-_0x2f8608[_0x20153e(0x25b)]-_0x5049db)*_0x2f8608[_0x20153e(0x203)]);}),_0x4f5442++;}}_0xa59c3f['coins']['forEach']((_0x4f0306,_0x7ab8be)=>{const _0xfcd568=_0xab6423;_0x163e93[_0x4f0306[_0xfcd568(0x1d3)]]&&(_0x4f0306={..._0x4f0306,'initial':_0x163e93[_0x4f0306[_0xfcd568(0x1d3)]]}),_0xa59c3f[_0xfcd568(0x24c)][_0x7ab8be]=_0x4f0306;}),_0x1cee8e[_0xab6423(0x186)]({'date':_0xa59c3f['date'],'eur':_0xa59c3f[_0xab6423(0x219)],'usd':_0xa59c3f['usd'],'offset':_0x5a4f3b[_0xbf6041],'netoffset':_0x582145,'coins':_0xa59c3f[_0xab6423(0x24c)]});});}return _0x1cee8e;}function emitPerformance(_0x2d7feb){const _0x31dd50=_0x2c39c;_0x2d7feb[_0x31dd50(0x20f)]!==0x0?(proxyEmit('performance',_0x2d7feb),lastPerformanceEmitted=getDate()):proxyEmit(_0x31dd50(0x20d),[]);}function getPerf(_0x3ec41f,_0x27fd44){const _0x28a030=_0x2c39c;let _0x3285c1=0x0,_0x4ade30=0x0,_0x3b3569=0x0;_0x3ec41f[_0x28a030(0x24c)]['forEach'](_0x5d1dd9=>{const _0x49433e=_0x28a030;_0x3285c1+=_0x5d1dd9[_0x49433e(0x25b)]*_0x5d1dd9[_0x49433e(0x203)];});_0x27fd44&&(_0x3285c1+=_0x3ec41f[_0x28a030(0x242)]);if(config['basecoin']==='BTC'||config[_0x28a030(0x216)]===_0x28a030(0x25c))_0x4ade30=_0x3285c1*_0x3ec41f['eur'],_0x3b3569=_0x3285c1*_0x3ec41f[_0x28a030(0x1c6)];else{if(config[_0x28a030(0x216)]==='BUSD'||config['basecoin']===_0x28a030(0x171))_0x4ade30=_0x3285c1*_0x3ec41f[_0x28a030(0x219)]/_0x3ec41f[_0x28a030(0x1c6)],_0x3b3569=_0x3285c1;else config['basecoin']===_0x28a030(0x235)&&(_0x4ade30=_0x3285c1,_0x3b3569=_0x3285c1*_0x3ec41f[_0x28a030(0x1c6)]/_0x3ec41f[_0x28a030(0x219)]);}return[_0x3285c1,_0x4ade30,_0x3b3569];}async function getStartingBalances(_0x46eb82,_0x310fb6=!![]){const _0x3f767e=_0x2c39c;if(_0x46eb82[_0x3f767e(0x20f)]!==0x0){const [_0x5a1e21,_0x31e7e3,_0x2cab53]=getPerf(_0x46eb82[0x0],!![]);let _0x2c0b96=[];config[_0x3f767e(0x1d1)][_0x3f767e(0x23d)](_0x328dd8=>{const _0x4d33a2=_0x3f767e;let _0x55ae7a=0x0,_0x59783a;config[_0x4d33a2(0x1fe)][_0x4d33a2(0x23d)](_0x36ae60=>{const _0x31ddc5=_0x4d33a2;let _0x679c80=_0x36ae60[_0x31ddc5(0x159)][_0x31ddc5(0x22a)](_0x2c71e5=>_0x2c71e5[_0x31ddc5(0x1d3)]==_0x328dd8[_0x31ddc5(0x1d3)]);if(_0x679c80){_0x55ae7a+=_0x679c80['number'];if(!_0x59783a)_0x59783a=_0x679c80[_0x31ddc5(0x203)];}}),_0x2c0b96[_0x4d33a2(0x186)]({'coin':_0x328dd8[_0x4d33a2(0x1d3)],'number':_0x55ae7a,'initialprice':_0x59783a});});const _0x3036dd={'basecoin':_0x5a1e21,'eur':_0x31e7e3,'usd':_0x2cab53,'coins':_0x2c0b96};if(_0x310fb6)proxyEmit(_0x3f767e(0x23c),_0x3036dd);return _0x3036dd;}}function headlessMode(_0x3e4d06){const _0x113554=_0x2c39c;let _0x51686b=_0x3e4d06[_0x113554(0x1d1)],_0x3beb09=_0x3e4d06['threshold'],_0x16570a=[];for(let _0x464644 of _0x51686b){if(_0x464644['coin']!=config[_0x113554(0x216)]){if(_0x464644[_0x113554(0x261)]>=_0x3beb09/0x64){if(_0x464644[_0x113554(0x265)])_0x16570a[_0x113554(0x186)](_0x464644);}else{if(_0x464644[_0x113554(0x261)]<=-_0x3beb09/0x64){if(_0x464644[_0x113554(0x265)])_0x16570a['push'](_0x464644);}}}}_0x16570a['length']>0x0&&(allOrdersPlaced=![],placeOrder(_0x16570a));}function notifyBalance(_0x214c5b){const _0x33be5e=_0x2c39c;let _0x1bc678=_0x214c5b[_0x33be5e(0x1d1)],_0x398cdf=_0x214c5b[_0x33be5e(0x1eb)],_0xb3ea67=[];for(let _0x1acd89 of _0x1bc678){if(_0x1acd89[_0x33be5e(0x1d3)]!=config[_0x33be5e(0x216)]){if(_0x1acd89[_0x33be5e(0x261)]>=_0x398cdf/0x64){if(_0x1acd89[_0x33be5e(0x265)])_0xb3ea67[_0x33be5e(0x186)](_0x1acd89);}else{if(_0x1acd89[_0x33be5e(0x261)]<=-_0x398cdf/0x64){if(_0x1acd89[_0x33be5e(0x265)])_0xb3ea67[_0x33be5e(0x186)](_0x1acd89);}}}}if(_0xb3ea67[_0x33be5e(0x20f)]>0x0){let _0x206056=_0xb3ea67[_0x33be5e(0x19f)](_0xc06e2c=>_0xc06e2c[_0x33be5e(0x1d3)]);_0x206056[_0x33be5e(0x1e8)]();let _0x121420=_0x206056[_0x33be5e(0x1c8)](',\x20');if(lastCoinsToBalance!==_0x121420)logHistory('success',_0x33be5e(0x1cc)+_0x121420);lastCoinsToBalance=_0x121420;}}function symbolToCoin(_0x3de55f){const _0x5f3afd=_0x2c39c;let _0x5ea2c4;if(_0x3de55f[_0x5f3afd(0x1a9)]('/'+config[_0x5f3afd(0x216)]))_0x5ea2c4=_0x3de55f['replace']('/'+config[_0x5f3afd(0x216)],'');if(_0x3de55f[_0x5f3afd(0x1a9)](config[_0x5f3afd(0x216)]+'/'))_0x5ea2c4=_0x3de55f[_0x5f3afd(0x161)](config[_0x5f3afd(0x216)]+'/','');return _0x5ea2c4;}async function unlockOrders(){const _0x5aa466=_0x2c39c;currentCoins=await getCoins(),validateOrdersState=_0x5aa466(0x21c);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x97ea91){const _0x1f725d=_0x2c39c;if(_0x97ea91)validateOrdersState=_0x97ea91;let _0xdab237=[],_0x144c38=config[_0x1f725d(0x172)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1f725d(0x141)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders['forEach'](_0x49d196=>{const _0x7aeb52=_0x1f725d;let _0xf249c2=![];_0x49d196[_0x7aeb52(0x1bc)]>0x0&&(_0xf249c2=!![]),_0xdab237[_0x7aeb52(0x186)](_0xf249c2),_0xf249c2&&config[_0x7aeb52(0x172)]!=_0x7aeb52(0x233)&&logHistory('order',_0x7aeb52(0x236)+_0x49d196['symbol']+'\x20'+_0x49d196[_0x7aeb52(0x232)]+'\x20#'+formatResult(_0x49d196['filled'],0x8)+'\x20@'+formatResult(_0x49d196[_0x7aeb52(0x203)],0x8));}),_0xdab237[_0x1f725d(0x23d)]((_0x300db6,_0x50425e)=>{if(_0x300db6)lastOrders['splice'](_0x50425e,0x1);});const _0x3ddc79=coolingDown?_0x1f725d(0x20e):_0x1f725d(0x13d);if(validateOrdersState==_0x1f725d(0x21c))validateOrdersState=_0x1f725d(0x1af),_0xdab237[_0x1f725d(0x1a9)](![])?config['ordertype']==_0x1f725d(0x233)?logHistory(_0x1f725d(0x1b6),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x1f725d(0x1af)){if(_0xdab237['includes'](![])){}else config[_0x1f725d(0x172)]==_0x1f725d(0x233)?logHistory(_0x1f725d(0x17d),_0x1f725d(0x234)+_0x3ddc79):logHistory('success','Order(s)\x20filled\x20-\x20'+_0x3ddc79),await unlockOrders();}else{if(validateOrdersState==_0x1f725d(0x15c))_0xdab237[_0x1f725d(0x1a9)](![])?config[_0x1f725d(0x172)]==_0x1f725d(0x233)?logHistory(_0x1f725d(0x17d),_0x1f725d(0x1ea)+Math[_0x1f725d(0x1f6)](_0x144c38*validateOrderInterval/0xea60)+_0x1f725d(0x1f4)+_0x3ddc79):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x1f725d(0x1f6)](_0x144c38*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3ddc79)):logHistory(_0x1f725d(0x17d),_0x1f725d(0x225)+_0x3ddc79),await unlockOrders();else{if(validateOrdersState==_0x1f725d(0x25a)){if(config[_0x1f725d(0x172)]!=_0x1f725d(0x233))logHistory(_0x1f725d(0x17d),'No\x20more\x20open\x20orders\x20-\x20'+_0x3ddc79);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x38b537=>{const _0x67d944=_0x4b10;try{const _0xbbcc43=await exchange[_0x67d944(0x1ee)](_0x38b537['orderId'],_0x38b537[_0x67d944(0x240)]);}catch(_0x4f4d98){if(_0x4f4d98[_0x67d944(0x25e)]()[_0x67d944(0x1a9)](_0x67d944(0x1d2))){}else await handleError(_0x4f4d98,_0x67d944(0x252));}});}async function initCoinResults(){const _0x1ada75=_0x2c39c;let _0x558685=[];config['portfolio'][_0x1ada75(0x23d)](_0x4fa60d=>{const _0x45c1df=_0x1ada75;if(!_0x4fa60d[_0x45c1df(0x223)]&&_0x4fa60d['coin']!=config['basecoin']){let _0x4625d4=dbCoinResults[_0x45c1df(0x1db)](_0x45c1df(0x24c))[_0x45c1df(0x22a)]({'coin':_0x4fa60d[_0x45c1df(0x1d3)]})[_0x45c1df(0x19d)]();if(!_0x4625d4){const _0x12ad40=currentCoins[_0x45c1df(0x22a)](_0x4db3ba=>_0x4db3ba[_0x45c1df(0x1d3)]==_0x4fa60d[_0x45c1df(0x1d3)]),_0x183a12=global[_0x45c1df(0x207)][noslash(_0x4fa60d[_0x45c1df(0x240)])];let _0x7dc26b=_0x12ad40?_0x12ad40['number']:null,_0x15776d=_0x4fa60d[_0x45c1df(0x229)]?0x1/_0x183a12:_0x183a12,_0x519e17;config[_0x45c1df(0x1fe)]['forEach'](_0x23738e=>{const _0x5eece0=_0x45c1df;!_0x519e17&&(_0x519e17=_0x23738e[_0x5eece0(0x159)]['find'](_0x4a9a5b=>_0x4a9a5b[_0x5eece0(0x1d3)]==_0x4fa60d[_0x5eece0(0x1d3)]),_0x519e17&&(_0x7dc26b=_0x519e17[_0x5eece0(0x25b)],_0x15776d=_0x519e17[_0x5eece0(0x203)]));}),_0x558685[_0x45c1df(0x186)]({'coin':_0x4fa60d[_0x45c1df(0x1d3)],'number':_0x7dc26b,'price':_0x15776d});}}}),_0x558685['forEach'](_0x3dcf45=>{const _0x2209b5=_0x1ada75,_0x1c1ffd={'coin':_0x3dcf45[_0x2209b5(0x1d3)],'number':_0x3dcf45['number'],'breakeven':_0x3dcf45[_0x2209b5(0x203)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2209b5(0x1db)](_0x2209b5(0x24c))[_0x2209b5(0x186)](_0x1c1ffd)[_0x2209b5(0x1a7)]();});}async function updateCoinResults(_0x23490a,_0x450912=![]){const _0x58ad13=_0x2c39c;let _0x2d252f,_0x1aa049,_0x3b8e0c,_0x1e1a35,_0x2b645b,_0x4cc979,_0x3d105d=dbCoinResults[_0x58ad13(0x1db)](_0x58ad13(0x24c))[_0x58ad13(0x22a)]({'coin':_0x23490a[_0x58ad13(0x1d3)]})[_0x58ad13(0x19d)]();!_0x3d105d&&await initCoinResults();_0x23490a[_0x58ad13(0x229)]&&(_0x4cc979={'filled':_0x23490a[_0x58ad13(0x1bc)]*_0x23490a[_0x58ad13(0x203)],'amount':_0x23490a[_0x58ad13(0x1bc)]*_0x23490a[_0x58ad13(0x203)],'side':_0x23490a[_0x58ad13(0x232)]==_0x58ad13(0x255)?_0x58ad13(0x176):_0x58ad13(0x255),'price':0x1/_0x23490a[_0x58ad13(0x203)]},_0x23490a={..._0x23490a,..._0x4cc979});if(_0x450912)_0x1aa049=_0x23490a[_0x58ad13(0x232)]==_0x58ad13(0x176)?_0x3d105d[_0x58ad13(0x25b)]+_0x23490a[_0x58ad13(0x1bc)]:_0x3d105d[_0x58ad13(0x25b)]-_0x23490a[_0x58ad13(0x1bc)];else{const _0x36373f=currentCoins['find'](_0x73b7d=>_0x73b7d[_0x58ad13(0x1d3)]==_0x23490a['coin']);_0x1aa049=_0x36373f[_0x58ad13(0x25b)];}if(_0x23490a[_0x58ad13(0x1fc)]&&_0x23490a['fee']['currency']==config['basecoin'])_0x2d252f=_0x23490a[_0x58ad13(0x1fc)][_0x58ad13(0x1d8)];else{if(_0x23490a[_0x58ad13(0x1fc)]&&_0x23490a[_0x58ad13(0x1fc)]['currency']==_0x58ad13(0x24a)&&!_0x450912)_0x2d252f=_0x23490a[_0x58ad13(0x1fc)][_0x58ad13(0x1d8)]*global['ticker'][_0x58ad13(0x24a)+config[_0x58ad13(0x216)]];else _0x2d252f=defaultFee*_0x23490a[_0x58ad13(0x1bc)]*_0x23490a[_0x58ad13(0x203)];}_0x23490a['side']==_0x58ad13(0x176)?(_0x3b8e0c=_0x1aa049!=0x0?(_0x3d105d[_0x58ad13(0x145)]*_0x3d105d[_0x58ad13(0x25b)]+_0x23490a[_0x58ad13(0x203)]*(_0x1aa049-_0x3d105d['number'])+_0x2d252f)/_0x1aa049:0x0,_0x1e1a35=_0x3d105d['realized']):(_0x3b8e0c=_0x1aa049!=0x0?(_0x3d105d['breakeven']*_0x3d105d[_0x58ad13(0x25b)]-_0x23490a[_0x58ad13(0x203)]*(_0x3d105d[_0x58ad13(0x25b)]-_0x1aa049)+_0x2d252f)/_0x1aa049:0x0,_0x1e1a35=_0x3d105d['realized']+(_0x23490a[_0x58ad13(0x203)]-_0x3d105d['breakeven'])*_0x23490a[_0x58ad13(0x1bc)]);_0x2b645b=(_0x23490a[_0x58ad13(0x203)]-_0x3b8e0c-_0x2d252f/_0x23490a['filled'])*_0x1aa049;let _0x18a821={'coin':_0x23490a['coin'],'number':_0x1aa049,'breakeven':formatResult(_0x3b8e0c,0x8),'realized':formatResult(_0x1e1a35,0x8),'unrealized':formatResult(_0x2b645b,0x8),'fees':formatResult(_0x3d105d[_0x58ad13(0x268)]+_0x2d252f,0x8),'sells':_0x23490a[_0x58ad13(0x232)]==_0x58ad13(0x255)?_0x3d105d[_0x58ad13(0x195)]+0x1:_0x3d105d[_0x58ad13(0x195)],'buys':_0x23490a[_0x58ad13(0x232)]==_0x58ad13(0x176)?_0x3d105d[_0x58ad13(0x227)]+0x1:_0x3d105d[_0x58ad13(0x227)]};dbCoinResults[_0x58ad13(0x1db)](_0x58ad13(0x24c))[_0x58ad13(0x22a)]({'coin':_0x23490a[_0x58ad13(0x1d3)]})[_0x58ad13(0x16d)](_0x18a821)['write']();if(!_0x450912){if(_0x23490a[_0x58ad13(0x1fc)]&&_0x23490a[_0x58ad13(0x1fc)][_0x58ad13(0x201)]=='BNB'){const _0x28b3e0=currentCoins[_0x58ad13(0x22a)](_0x52dffd=>_0x52dffd[_0x58ad13(0x1d3)]==_0x58ad13(0x24a));if(_0x28b3e0){let _0x5d7fe9=dbCoinResults['get']('coins')['find']({'coin':_0x58ad13(0x24a)})[_0x58ad13(0x19d)]();_0x18a821={..._0x5d7fe9,'number':_0x28b3e0[_0x58ad13(0x25b)]},dbCoinResults[_0x58ad13(0x1db)]('coins')[_0x58ad13(0x22a)]({'coin':_0x58ad13(0x24a)})['assign'](_0x18a821)['write']();}}}}async function placeOrder(_0x19044c){const _0xca8ca2=_0x2c39c,_0x2ceffb=config[_0xca8ca2(0x172)]==_0xca8ca2(0x233)?_0xca8ca2(0x233):_0xca8ca2(0x1ad);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x12507a of _0x19044c){let _0x2e48c4,_0x3d1935,_0x391838,_0x38c7e4,_0x466430,_0x184f78=_0x12507a['symbol'];try{const _0x541c72=await exchange[_0xca8ca2(0x250)]([_0x184f78]),_0x6677d0=_0x541c72[_0x184f78];_0x2e48c4=_0x12507a[_0xca8ca2(0x229)]?0x1/_0x12507a[_0xca8ca2(0x14a)]:_0x12507a[_0xca8ca2(0x14a)],_0x3d1935=_0x6677d0[_0xca8ca2(0x156)],_0x391838=_0x6677d0[_0xca8ca2(0x17a)];_0x12507a[_0xca8ca2(0x229)]?(_0x38c7e4=_0x12507a['side']==_0xca8ca2(0x176)?_0xca8ca2(0x255):_0xca8ca2(0x176),_0x466430=Math[_0xca8ca2(0x15f)](_0x12507a[_0xca8ca2(0x157)])/_0x2e48c4):(_0x38c7e4=_0x12507a[_0xca8ca2(0x232)],_0x466430=Math[_0xca8ca2(0x15f)](_0x12507a[_0xca8ca2(0x157)]));_0x2ceffb=='limit'&&(config[_0xca8ca2(0x172)]=='limit-high'&&(_0x2e48c4=_0x38c7e4==_0xca8ca2(0x176)?_0x3d1935:_0x391838),config[_0xca8ca2(0x172)]==_0xca8ca2(0x22b)&&(_0x2e48c4=_0x38c7e4=='buy'?_0x391838:_0x3d1935));_0x466430=formatResult(_0x466430,0x8),_0x2e48c4=formatResult(_0x2e48c4,0x8);const _0x5e9cbb=await exchange['createOrder'](_0x184f78,_0x2ceffb,_0x38c7e4,_0x466430,_0x2e48c4);lastOrders[_0xca8ca2(0x186)]({'orderId':_0x5e9cbb['id'],'symbol':_0x184f78,'coin':_0x12507a['coin'],'side':_0x38c7e4,'reverse':_0x12507a['reverse'],'amount':_0x5e9cbb[_0xca8ca2(0x17e)],'filled':0x0,'price':_0x5e9cbb[_0xca8ca2(0x203)],'fee':_0x5e9cbb[_0xca8ca2(0x1fc)]});const _0x2a0cc2=_0x38c7e4==_0xca8ca2(0x255)?config[_0xca8ca2(0x1df)]?String[_0xca8ca2(0x22d)]('0x'+config['emojisell'])+'\x20':'':config[_0xca8ca2(0x1f2)]?String[_0xca8ca2(0x22d)]('0x'+config[_0xca8ca2(0x1f2)])+'\x20':'',_0x2bad74=_0x2ceffb==_0xca8ca2(0x233)?_0xca8ca2(0x218):config['ordertype']=='limit-high'?_0xca8ca2(0x1fb):_0xca8ca2(0x26a);if(_0x2ceffb=='market')logHistory(_0xca8ca2(0x1f8),''+_0x2a0cc2+_0x2bad74+_0xca8ca2(0x1ed)+_0x184f78+'\x20'+_0x38c7e4+'\x20#'+formatResult(_0x5e9cbb[_0xca8ca2(0x1bc)],0x8)+'\x20@'+formatResult(_0x5e9cbb[_0xca8ca2(0x203)],0x8));else logHistory(_0xca8ca2(0x1f8),''+_0x2a0cc2+_0x2bad74+_0xca8ca2(0x1ed)+_0x184f78+'\x20'+_0x38c7e4+'\x20#'+formatResult(_0x5e9cbb[_0xca8ca2(0x17e)],0x8)+'\x20@'+formatResult(_0x5e9cbb['price'],0x8));let _0x3df85a=currentCoins[_0xca8ca2(0x22a)](_0x38c1be=>_0x38c1be[_0xca8ca2(0x1d3)]==_0x12507a[_0xca8ca2(0x1d3)]);_0x3df85a['order']=!![];if(config[_0xca8ca2(0x1ce)]!=0x0){let _0x1d2801=null;if(cooldownTracker[_0xca8ca2(0x20f)]==config[_0xca8ca2(0x1ce)]-0x1)_0x1d2801=cooldownTracker[_0xca8ca2(0x1d6)]();const _0x34a97a=getTimeStamp();cooldownTracker[_0xca8ca2(0x186)](_0x34a97a);if(_0x1d2801){const _0x3bd256=fns[_0xca8ca2(0x198)](new Date(_0x34a97a),new Date(_0x1d2801));if(_0x3bd256<cooldownInterval){logHistory(_0xca8ca2(0x1b6),_0xca8ca2(0x237)+config[_0xca8ca2(0x1ce)]+_0xca8ca2(0x165)+cooldownInterval/0x3c+_0xca8ca2(0x144)+cooldownPeriod/(0xe10*0x3e8)+_0xca8ca2(0x175)),coolingDown=!![];break;}}}}catch(_0x5ef07c){if(_0x5ef07c['toString']()[_0xca8ca2(0x1a9)](_0xca8ca2(0x200)))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x184f78);else{if(_0x5ef07c[_0xca8ca2(0x25e)]()[_0xca8ca2(0x1a9)](_0xca8ca2(0x1a1)))logHistory(_0xca8ca2(0x1b6),_0xca8ca2(0x1e7)+_0x184f78);else await handleError(_0x5ef07c,_0xca8ca2(0x17f),_0x184f78);}}}allOrdersPlaced=!![];if(lastOrders[_0xca8ca2(0x20f)]!=0x0){lockOrders=!![],validateOrdersState='initial',setTimeout(function(){validateOrders();},0x1388);const _0x8f4981=config[_0xca8ca2(0x172)]==_0xca8ca2(0x233)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x10e38f=_0xca8ca2;validateOrders(_0x10e38f(0x15c));},_0x8f4981);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xca8ca2(0x17d),_0xca8ca2(0x19a)));}else{if(coolingDown)!config[_0xca8ca2(0x17c)]&&logHistory(_0xca8ca2(0x1b6),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders&&(!config[_0xca8ca2(0x17c)]&&(config[_0xca8ca2(0x172)]==_0xca8ca2(0x233)?logHistory(_0xca8ca2(0x1b6),_0xca8ca2(0x183)):logHistory(_0xca8ca2(0x1b6),_0xca8ca2(0x1f5))));}}function restoreOrders(){const _0x3b1d98=_0x2c39c;let _0x1448ec;lockOrders=!![],validateOrdersState='ongoing',currentCoins['forEach'](_0x3eb4eb=>{const _0xa53308=_0x4b10,_0x49ebfc=allOpenOrders[_0xa53308(0x22a)](_0xc53ff=>_0xc53ff[_0xa53308(0x240)]==_0x3eb4eb[_0xa53308(0x240)]);_0x49ebfc&&(lastOrders[_0xa53308(0x186)]({'orderId':_0x49ebfc['id'],'symbol':_0x3eb4eb[_0xa53308(0x240)],'coin':_0x3eb4eb[_0xa53308(0x1d3)],'side':_0x49ebfc[_0xa53308(0x232)],'reverse':_0x3eb4eb[_0xa53308(0x229)],'amount':_0x49ebfc[_0xa53308(0x17e)],'filled':0x0,'price':_0x49ebfc['price'],'fee':_0x49ebfc[_0xa53308(0x1fc)]}),_0x3eb4eb[_0xa53308(0x1f8)]=!![],_0x1448ec=_0x49ebfc['timestamp']);});const _0x290b9d=new Date()[_0x3b1d98(0x151)](),_0x385197=config[_0x3b1d98(0x172)]==_0x3b1d98(0x233)?validateOrderTimeout*0x3c*0x3e8:config[_0x3b1d98(0x141)]*0x3c*0x3e8;if(_0x1448ec+_0x385197>_0x290b9d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xdbd936=_0x3b1d98;validateOrders(_0xdbd936(0x15c));},_0x1448ec+_0x385197-_0x290b9d);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x573d45=_0x2c39c,_0x5722b5=['EUR','BUSD',_0x573d45(0x171)],_0xdc7c3f=_0x5722b5[_0x573d45(0x1a9)](config['basecoin'])?0x2:0x8;let _0x29b299='';if(config[_0x573d45(0x1e5)])_0x29b299=config[_0x573d45(0x18c)]+'\x20portfolio:\x20\x0a\x0a';else _0x29b299=_0x573d45(0x1ef)+botID+_0x573d45(0x13f);_0x29b299+=_0x573d45(0x258),_0x29b299+=_0x573d45(0x1a6),_0x29b299+=_0x573d45(0x246),currentCoins[_0x573d45(0x23d)](_0x238231=>{const _0x47f7ac=_0x573d45;_0x29b299+=_0x238231[_0x47f7ac(0x1d3)]['padEnd'](0x7)+'|\x20'+formatPad(_0x238231[_0x47f7ac(0x1be)],0x2,0x6)+'|\x20'+formatPad(_0x238231[_0x47f7ac(0x15b)],0x2,0x6)+'|\x20'+formatPad(_0x238231[_0x47f7ac(0x261)]*0x64,0x2,0x6)+'\x0a';}),_0x29b299+='</pre>',process[_0x573d45(0x213)]({'telegrammsg':_0x29b299},_0x264059=>{});}function formatPad(_0x292e76,_0x49065d,_0x504729){const _0x61ebe=_0x2c39c,_0x3852ea=formatResultString(_0x292e76,_0x49065d);return _0x3852ea?_0x3852ea[_0x61ebe(0x197)](_0x504729):''[_0x61ebe(0x197)](_0x504729);}function logHistory(_0x3624d9,_0x12fd13,_0x5aacab=''){const _0x3999bd=_0x2c39c;let _0x198621={'time':getTimeStamp(),'type':_0x3624d9,'event':_0x12fd13};dbLogs['get'](_0x3999bd(0x16c))[_0x3999bd(0x186)](_0x198621)['write']();if(_0x5aacab=='')_0x5aacab=_0x12fd13;proxyEmit(_0x3999bd(0x244),{'log':_0x198621,'summary':_0x5aacab}),process['send']({'telegram':{..._0x198621,'botname':config[_0x3999bd(0x18c)],'showname':config['showname']}},_0x79ff19=>{}),logging(''+_0x198621[_0x3999bd(0x244)]);}function _0x4b10(_0x92adb0,_0x3488ab){const _0x5ab1c9=_0x32e8();return _0x4b10=function(_0x539a5d,_0x3126fb){_0x539a5d=_0x539a5d-0x13c;let _0x32e8f9=_0x5ab1c9[_0x539a5d];return _0x32e8f9;},_0x4b10(_0x92adb0,_0x3488ab);}function emitHistory(_0x1b1de4={}){const _0xd7bdb2=_0x2c39c;Object['keys'](_0x1b1de4)['length']==0x0&&(_0x1b1de4={'type':[_0xd7bdb2(0x1f8),'event'],'event':'','page':0x1});if(_0x1b1de4[_0xd7bdb2(0x249)][_0xd7bdb2(0x1a9)](_0xd7bdb2(0x244)))_0x1b1de4['type']['splice'](_0x1b1de4[_0xd7bdb2(0x249)]['indexOf'](_0xd7bdb2(0x244)),0x1,'error',_0xd7bdb2(0x17d));if(dbLogs[_0xd7bdb2(0x257)](_0xd7bdb2(0x16c))[_0xd7bdb2(0x19d)]()){let _0x377308=dbLogs[_0xd7bdb2(0x1db)](_0xd7bdb2(0x16c))[_0xd7bdb2(0x220)](_0x392a53=>{const _0x1bac9b=_0xd7bdb2;if(_0x1b1de4[_0x1bac9b(0x249)][_0x1bac9b(0x20f)]==0x0)return![];else return _0x1b1de4['type'][_0x1bac9b(0x1a9)](_0x392a53[_0x1bac9b(0x249)]);})[_0xd7bdb2(0x220)](_0x5ba76f=>{const _0x261987=_0xd7bdb2;if(_0x1b1de4[_0x261987(0x244)]=='')return!![];else return _0x5ba76f[_0x261987(0x244)][_0x261987(0x256)]()[_0x261987(0x1a9)](_0x1b1de4[_0x261987(0x244)]['toLowerCase']());})[_0xd7bdb2(0x1ca)](_0xd7bdb2(0x1e0)),_0x2194ec=_0x377308[_0xd7bdb2(0x19d)]()[_0xd7bdb2(0x20f)];_0x377308=_0x377308[_0xd7bdb2(0x229)]()[_0xd7bdb2(0x226)]((_0x1b1de4[_0xd7bdb2(0x177)]-0x1)*logPageSize,_0x1b1de4['page']*logPageSize-0x1)[_0xd7bdb2(0x229)]()['value'](),proxyEmit(_0xd7bdb2(0x189),{'logs':_0x377308,'total':_0x2194ec});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x563bef){const _0x1793ba=_0x2c39c;if(dbLogs[_0x1793ba(0x257)](_0x1793ba(0x16c))[_0x1793ba(0x19d)]()){const _0x44fa98=dbLogs[_0x1793ba(0x1db)]('logs')[_0x1793ba(0x1ca)](_0x1793ba(0x1e0))[_0x1793ba(0x220)](_0x461ee3=>{const _0x279c3a=_0x1793ba;return _0x461ee3[_0x279c3a(0x249)]==_0x279c3a(0x1f8);})[_0x1793ba(0x19d)]();dbLogs[_0x1793ba(0x1db)](_0x1793ba(0x16c))[_0x1793ba(0x1ff)]()['write'](),dbLogs['get'](_0x1793ba(0x16c))[_0x1793ba(0x16d)](_0x44fa98)[_0x1793ba(0x1a7)](),emitHistory(_0x563bef);}}async function pauseBot(_0x4ffb32=''){const _0x46a129=_0x2c39c,_0x3bfefe=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x3bfefe-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x46a129(0x213)]({'stop':_0x46a129(0x142)},_0x364f35=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x4ffb32)_0x4ffb32+=_0x46a129(0x231);logHistory(_0x46a129(0x1b6),_0x4ffb32+'Pausing\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0xf60ec6=_0x2c39c;process['send']({'stop':_0xf60ec6(0x170)},_0x5dda7e=>{}),await sleep(0x7d0);}async function handleError(_0x457a51,_0x2f27c2,_0x2f2f27=''){const _0x52c4cf=_0x2c39c;if(_0x457a51[_0x52c4cf(0x25e)]()[_0x52c4cf(0x1a9)](_0x52c4cf(0x1d5)))await pauseBot(_0x52c4cf(0x191));else{if(_0x457a51[_0x52c4cf(0x25e)]()[_0x52c4cf(0x1a9)](_0x52c4cf(0x196)))await pauseBot('Binance\x20not\x20available\x20(2)');else{if(_0x457a51['toString']()[_0x52c4cf(0x1a9)](_0x52c4cf(0x1c5)))await pauseBot(_0x52c4cf(0x1a2));else{if(_0x457a51[_0x52c4cf(0x25e)]()['includes']('API-key\x20format\x20invalid'))logHistory('error',_0x2f27c2+_0x52c4cf(0x179)),logHistory(_0x52c4cf(0x1b6),_0x52c4cf(0x222)),await killBot();else{if(_0x457a51['toString']()[_0x52c4cf(0x1a9)]('AuthenticationError'))logHistory(_0x52c4cf(0x1b6),_0x2f27c2+_0x52c4cf(0x22f)),logHistory(_0x52c4cf(0x1b6),_0x52c4cf(0x222)),await killBot();else{if(_0x457a51[_0x52c4cf(0x25e)]()[_0x52c4cf(0x1a9)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x52c4cf(0x1b6),_0x2f27c2+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x52c4cf(0x1b6),_0x52c4cf(0x222)),await killBot();else{if(_0x457a51[_0x52c4cf(0x25e)]()[_0x52c4cf(0x1a9)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x52c4cf(0x1b6),_0x2f27c2+_0x52c4cf(0x1ab)),logHistory('error',_0x52c4cf(0x222)),await killBot();else{if(_0x457a51[_0x52c4cf(0x25e)]()[_0x52c4cf(0x1a9)](_0x52c4cf(0x182)))await pauseBot(_0x52c4cf(0x1c4)),process[_0x52c4cf(0x213)]({'stop':_0x52c4cf(0x142)},_0x5344ba=>{});else _0x457a51['toString']()['includes']('InsufficientFunds')?logHistory('error',_0x2f27c2+_0x52c4cf(0x1e9)+_0x2f2f27):(logging(_0x2f27c2+_0x52c4cf(0x185),_0x457a51),await pauseBot(_0x52c4cf(0x1d4)));}}}}}}}}function formatResult(_0x19c04f,_0x5a6826){const _0x404d7d=_0x2c39c;return parseFloat(_0x19c04f[_0x404d7d(0x1a4)](_0x5a6826));}function formatResultTruncate(_0x17ba23,_0x205e56){const _0x2e16c9=_0x2c39c;let _0x504eb4=formatResultString(_0x17ba23,0xa),_0x2f046e=_0x504eb4[_0x2e16c9(0x160)]('.');return _0x2f046e!=-0x1&&(_0x504eb4=_0x504eb4[_0x2e16c9(0x226)](0x0,_0x2f046e+_0x205e56+0x1)),Number(_0x504eb4);}function formatResultString(_0x1d64a4,_0x54a6d2){const _0x400ffa=_0x2c39c;let _0x53f3d7;if(!(''+_0x1d64a4)[_0x400ffa(0x1a9)]('e'))_0x53f3d7=+(Math['round'](_0x1d64a4+'e+'+_0x54a6d2)+'e-'+_0x54a6d2);else{let _0x100844=(''+_0x1d64a4)['split']('e'),_0x52a6de='';+_0x100844[0x1]+_0x54a6d2>0x0&&(_0x52a6de='+'),_0x53f3d7=+(Math[_0x400ffa(0x1f6)](+_0x100844[0x0]+'e'+_0x52a6de+(+_0x100844[0x1]+_0x54a6d2))+'e-'+_0x54a6d2);}return Number(_0x53f3d7)['toFixed'](_0x54a6d2);}function logging(_0x24dfdb,_0x47c0a4=''){const _0xf55cbf=_0x2c39c;if(config['showname'])console[_0xf55cbf(0x1ac)](getTimeStamp()+':\x20'+config[_0xf55cbf(0x18c)]+_0xf55cbf(0x20b)+_0x24dfdb,_0x47c0a4);else console[_0xf55cbf(0x1ac)](getTimeStamp()+':\x20Bot\x20'+botID+_0xf55cbf(0x20b)+_0x24dfdb,_0x47c0a4);}function getServerTime(){const _0x8dd771=_0x2c39c,_0x1170f8=new Date();return _0x1170f8['getFullYear']()+'/'+(_0x1170f8['getMonth']()+0x1)[_0x8dd771(0x25e)]()['padStart'](0x2,'0')+'/'+_0x1170f8[_0x8dd771(0x21d)]()['toString']()[_0x8dd771(0x197)](0x2,'0')+'\x20'+_0x1170f8['getHours']()[_0x8dd771(0x25e)]()[_0x8dd771(0x197)](0x2,'0')+':'+_0x1170f8[_0x8dd771(0x1b2)]()[_0x8dd771(0x25e)]()[_0x8dd771(0x197)](0x2,'0')+':'+_0x1170f8['getSeconds']()[_0x8dd771(0x25e)]()[_0x8dd771(0x197)](0x2,'0');}function getTimeStamp(){const _0x129bb0=_0x2c39c,_0x2a7e9b=shiftedTime();return _0x2a7e9b[_0x129bb0(0x1b9)]()+'/'+(_0x2a7e9b[_0x129bb0(0x1b8)]()+0x1)[_0x129bb0(0x25e)]()[_0x129bb0(0x197)](0x2,'0')+'/'+_0x2a7e9b[_0x129bb0(0x21d)]()['toString']()[_0x129bb0(0x197)](0x2,'0')+'\x20'+_0x2a7e9b[_0x129bb0(0x1cb)]()[_0x129bb0(0x25e)]()[_0x129bb0(0x197)](0x2,'0')+':'+_0x2a7e9b[_0x129bb0(0x1b2)]()[_0x129bb0(0x25e)]()[_0x129bb0(0x197)](0x2,'0')+':'+_0x2a7e9b[_0x129bb0(0x211)]()[_0x129bb0(0x25e)]()[_0x129bb0(0x197)](0x2,'0');}function getDate(){const _0xc552ae=_0x2c39c,_0x1ea829=shiftedTime();return _0x1ea829[_0xc552ae(0x1b9)]()+'/'+(_0x1ea829[_0xc552ae(0x1b8)]()+0x1)[_0xc552ae(0x25e)]()[_0xc552ae(0x197)](0x2,'0')+'/'+_0x1ea829[_0xc552ae(0x21d)]()['toString']()[_0xc552ae(0x197)](0x2,'0');}function getHour(){const _0x37d2ae=_0x2c39c,_0x503186=shiftedTime();return _0x503186['getHours']()[_0x37d2ae(0x25e)]()['padStart'](0x2,'0');}function sleep(_0x390ac3){return new Promise(_0x5c88a0=>setTimeout(_0x5c88a0,_0x390ac3));}function shiftedTime(){const _0x461fdb=_0x2c39c,_0x213363=new Date();let _0x181e23=_0x213363;if(config&&config[_0x461fdb(0x16b)]!==0x0)_0x181e23=fns[_0x461fdb(0x20a)](_0x213363,{'hours':config[_0x461fdb(0x16b)]});return _0x181e23;}