const _0x4916b1=_0x59e7;(function(_0xa2cd07,_0x5773f6){const _0x535470=_0x59e7,_0x50d0b0=_0xa2cd07();while(!![]){try{const _0x34fe82=-parseInt(_0x535470(0x178))/0x1*(-parseInt(_0x535470(0x264))/0x2)+-parseInt(_0x535470(0x236))/0x3*(parseInt(_0x535470(0x187))/0x4)+parseInt(_0x535470(0x192))/0x5+parseInt(_0x535470(0x17c))/0x6+-parseInt(_0x535470(0x19c))/0x7+-parseInt(_0x535470(0x1b0))/0x8*(-parseInt(_0x535470(0x1aa))/0x9)+parseInt(_0x535470(0x259))/0xa*(-parseInt(_0x535470(0x219))/0xb);if(_0x34fe82===_0x5773f6)break;else _0x50d0b0['push'](_0x50d0b0['shift']());}catch(_0x53dbf5){_0x50d0b0['push'](_0x50d0b0['shift']());}}}(_0x28e8,0xe1205));const _0x942a6f=function(){let _0x38931e=!![];return function(_0x32bc8f,_0x32a07b){const _0xbc18af=_0x38931e?function(){const _0x41a71e=_0x59e7;if(_0x32a07b){const _0x5ad09b=_0x32a07b[_0x41a71e(0x18f)](_0x32bc8f,arguments);return _0x32a07b=null,_0x5ad09b;}}:function(){};return _0x38931e=![],_0xbc18af;};}(),_0x438be2=_0x942a6f(this,function(){const _0x104578=_0x59e7;return _0x438be2[_0x104578(0x1c8)]()[_0x104578(0x26c)](_0x104578(0x22e))[_0x104578(0x1c8)]()['constructor'](_0x438be2)['search'](_0x104578(0x22e));});_0x438be2();'use strict';const ccxt=require(_0x4916b1(0x1ee)),low=require(_0x4916b1(0x19b)),FileSync=require(_0x4916b1(0x215)),fs=require('fs'),fns=require(_0x4916b1(0x171)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require(_0x4916b1(0x1e8))[_0x4916b1(0x17d)];let exchange,wsClient;global['ticker']={},global['change']={};let ws1=[],ws2=null,ws3=[];const exceptions=['DAI/',_0x4916b1(0x1e6),_0x4916b1(0x23c),_0x4916b1(0x25c),_0x4916b1(0x1b4),_0x4916b1(0x1cb)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4916b1(0x1bd))[_0x4916b1(0x24c)],botID=process[_0x4916b1(0x214)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x4916b1(0x17e)](_0x4916b1(0x20d)+botID+_0x4916b1(0x1a0)),process['exit'](0x1));const userID=process['argv'][0x3]||'',configpath=userID?_0x4916b1(0x204)+userID+'/':'./config/';function _0x28e8(){const _0x4a794b=['starting-balances','usd','getTime','splice','DDoSProtection','(((.+)+)+)+$','format','amount',')\x20|\x20Error\x20details:\x20','getCoins()','\x20order:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','realized','3Rbecfi','running','getMonth','exchange','<pre>','find','HOT/EUR','send','Unfilled\x20order(s)\x20canceled\x20after\x20','number','offset','split','privateKey','market','orderId','recreate','sells','Unknown\x20error\x20occured','\x20hour','/backup/','MIN_NOTIONAL','sha256','version','deleteHistoryAlerts','BNB/','\x20-\x20','kline','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','distribution','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','change24h','entries','apiKey','event','1270cewaGk','sortBy','defaults','XEM/BUSD','\x20minutes\x20-\x20','symbol','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','RSA-OAEP','breakeven','no\x20open\x20orders','coins','2gtTkbt','emitHistory','subscribeSymbol24hrTicker','fetchOpenOrders','remainingSymbols','getFullYear','getStartingBalances','keys','search','value','decrypt','page','subscribeSpotUserDataStream','cloneDeep','get','findIndex','ordertype','binance','target','cumulativeQuoteAssetTransactedQty','2.5.0','Market','botname','-performance.json','Binance\x20API\x20key\x20is\x20invalid','kill','Bot\x20','wss://stream.binance.us:9443','recreateCoinResults()','limits','limit','stringify','loadMarkets','userData','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','includes','fetchTickers','eventTime','bb-secure.json','bot-','USDT','sort','BTC','configuration-stored','getSeconds','\x20>\x20','precision','cancelOrder','botID','orderStatus','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2.3.5','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','headless','storeHeadless','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','fees','sell','subscribeSpotKline','WebSockets(','changes','replace','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Order\x20filled:\x20','milliseconds','eventType','close','date-fns','side','eur','success','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','timeout','apiSecret','463038RurgQT','Limit\x20(high-margin)','coin','toLowerCase','5867538pjHSdO','Crypt','log','cancel','ticker','BNB','startnumber','showname','trade','date','remove','971276VTOWjD','length','message','\x20portfolio:\x20\x0a\x0a','yyyy-MM-dd\x27T\x27HH:mm:ss','buys','reconnected','bot','apply','error','\x20minutes','1674870jocJcb','push','ETH','add','isArray','wsKey','padStart','wss://stream.binance.com:9443','bid','lowdb','7180054XbCMAH','Binance\x20not\x20available\x20(1)','getFiat()','writeFile',',\x20must\x20be\x20a\x203\x20digit\x20number','exec','startdate','Binance\x20not\x20responding','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','placeOrder()','portfolio','binanceus','parseISO','InvalidNonce','458559rLuhnq','datetime','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','total','\x20orders\x20in\x20less\x20than\x20','Manual\x20balancing\x20required:\x20','192eNrcRe','secure','emojibuy','startprice','NANO/','\x20-\x20bot\x20not\x20started','getDate','fromCodePoint','limit-high','No\x20more\x20open\x20orders\x20-\x20','toggleBotMode','liquidity','change','./version.json','fee','cooldown','ongoing','AuthenticationError','Order(s)\x20validated\x20-\x20','isEqual','timeshift','function','Failed\x20to\x20load\x20coin\x20data\x20for\x20','commission','toString','InsufficientFunds','************','YOYOW/','ask','</pre>','getPortfolio','toFixed','Executed\x20','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Binance\x20not\x20available\x20(2)','Cooldown\x20ended\x20-\x20balancing\x20resumed','symbols','.json','existsSync','assign','cancelLoading','data','has','cost','getHours','-results.json','Limit\x20(low-margin)','getMinutes','currency','slice','reverse','balances','starting-balance-','shift','HOT/BTC','API\x20or\x20clock\x20sync\x20issue','hybrid-crypto-js','EUR','basecoin','final','time','initws()','ccxt','round','last','-config.json','accumulatedQuantity','Order(s)\x20not\x20validated\x20after\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','restart','\x20|\x20Binance\x20API\x20key\x20invalid','spot','-events.json','parse','indexOf','type','API-key\x20format\x20invalid','emojisell','threshold','mkdirSync','loadSymbols()','order','priceChangePercent','./config/','performance','min',':\x20Bot\x20','balancing\x20resumed','delta','Binance\x20API\x20secret\x20is\x20invalid','string','configuration','Error:\x20Invalid\x20argument\x20','progress','executionReport','event-history','filter','initial','fetchClosedOrders','argv','lowdb/adapters/FileSync','forEach','args','filled','69993CqKOwG','outboundAccountPosition','BUSD','valid','wsMarket','Binance\x20API\x20blocked','RequestTimeout','set','write','abs','storeConfiguration','logs','buy','price','balancing\x20resumes\x20when\x20cooldown\x20ends','join'];_0x28e8=function(){return _0x4a794b;};return _0x28e8();}!fs[_0x4916b1(0x1d6)](configpath)&&fs[_0x4916b1(0x200)](configpath);const configfile=configpath+_0x4916b1(0x28c)+botID+_0x4916b1(0x1f1),logfile=configpath+_0x4916b1(0x28c)+botID+_0x4916b1(0x1f9),performancefile=configpath+_0x4916b1(0x28c)+botID+_0x4916b1(0x27b),coinresultsfile=configpath+_0x4916b1(0x28c)+botID+_0x4916b1(0x1dd),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4916b1(0x28b),configbackuppath=configpath+_0x4916b1(0x249),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4916b1(0x25b)]({'logs':[]})[_0x4916b1(0x221)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4916b1(0x25b)]({'data':[]})[_0x4916b1(0x221)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4916b1(0x25b)]({'coins':[]})[_0x4916b1(0x221)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x1e3f43)=>{},'debug':(..._0x38b347)=>{},'notice':(..._0x553d14)=>{},'info':(..._0x589a9e)=>{},'warning':(..._0xae7eb8)=>{},'error':async function(..._0x209ab1){const _0xf40c9a=_0x4916b1,_0x1e6dc9=new Date()['getTime']();if(!lastErrorShown||_0x1e6dc9-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0xf40c9a(0x22b)]();let _0x506b56='';if(_0x209ab1[0x0])_0x506b56+=_0x209ab1[0x0];if(_0x209ab1[0x1]&&_0x209ab1[0x1][_0xf40c9a(0x190)]&&_0x209ab1[0x1][_0xf40c9a(0x190)][_0xf40c9a(0x189)])_0x506b56+=_0xf40c9a(0x24f)+_0x209ab1[0x1]['error']['message'];logging(_0xf40c9a(0x169)+consecutivePauses+_0xf40c9a(0x231),''+_0x506b56),await pauseBot(_0xf40c9a(0x19d));}}},crypt=new Crypt({'md':_0x4916b1(0x24b),'rsaStandard':_0x4916b1(0x260)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x4916b1(0x1c4)]!=config['timeshift']&&updateTimeshift(settings[_0x4916b1(0x1c4)]);process[_0x4916b1(0x23d)]({'started':_0x4916b1(0x237)},_0x9b735f=>{}),initializeProcessListeners();function proxyEmit(_0x432f45,_0x25e6ac=null){const _0x3b80c1=_0x4916b1;process[_0x3b80c1(0x23d)]({'function':_0x432f45,'args':_0x25e6ac},_0x5bfb5b=>{});}function initializeProcessListeners(){const _0x21c8fa=_0x4916b1;process['on'](_0x21c8fa(0x189),_0x59331c=>{const _0x2df692=_0x21c8fa;switch(Object[_0x2df692(0x26b)](_0x59331c)[0x0]){case'timeshift':_0x59331c[_0x2df692(0x1c4)]!=undefined&&(settings[_0x2df692(0x1c4)]=_0x59331c[_0x2df692(0x1c4)],updateTimeshift(settings[_0x2df692(0x1c4)]));break;case _0x2df692(0x1c5):switch(_0x59331c['function']){case'initclient':initclient();break;case _0x2df692(0x1ba):toggleBotMode();break;case _0x2df692(0x265):emitHistory(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x24d):deleteHistoryAlerts(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x1ce):getPortfolio(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x223):storeConfiguration(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x164):storeHeadless(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x26a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x59331c[_0x2df692(0x217)]);break;case _0x2df692(0x1d8):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x4faa79=_0x4916b1;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config[_0x4faa79(0x177)]);let _0x2ed246=await loadSymbols();if(_0x2ed246){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x4faa79(0x188)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x4183ac,_0x432674){const _0x4fe63e=_0x4916b1,_0x3e0fc2=ccxt[config[_0x4fe63e(0x239)]];let _0x37cdca;switch(config[_0x4fe63e(0x239)]){case _0x4fe63e(0x275):_0x37cdca=_0x4fe63e(0x199);break;case _0x4fe63e(0x1a7):_0x37cdca=_0x4fe63e(0x27f);break;default:_0x37cdca='wss://stream.binance.com:9443';}exchange=new _0x3e0fc2({'apiKey':_0x4183ac,'secret':_0x432674,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4183ac,'api_secret':_0x432674,'beautify':!![],'wsUrl':_0x37cdca},logger);!wstriggersset&&(wstriggersset=!![],wsClient['on']('formattedMessage',_0x5f3b4c=>{const _0x307727=_0x4fe63e;if(isWsFormattedKline(_0x5f3b4c)){global['ticker'][_0x5f3b4c[_0x307727(0x250)][_0x307727(0x25e)]]=_0x5f3b4c[_0x307727(0x250)][_0x307727(0x170)];return;}else{if(isWsFormatted24hrTicker(_0x5f3b4c)){global[_0x307727(0x1bc)][_0x5f3b4c[_0x307727(0x25e)]]=_0x5f3b4c[_0x307727(0x203)];return;}else{if(!Array[_0x307727(0x196)](_0x5f3b4c)&&_0x5f3b4c[_0x307727(0x197)][_0x307727(0x288)](_0x307727(0x285))){if(_0x5f3b4c[_0x307727(0x21d)][_0x307727(0x288)](_0x307727(0x1f8))){updateNumberCoins(_0x5f3b4c);return;}}}}}),wsClient['on'](_0x4fe63e(0x18d),async _0x14889a=>{if(!botPaused)currentCoins=await getCoins(!![]);}));let _0x4dc26c=config[_0x4fe63e(0x239)]==_0x4fe63e(0x1a7)?_0x4fe63e(0x28d):_0x4fe63e(0x1e9),_0x401010=config[_0x4fe63e(0x1ea)]==_0x4fe63e(0x194)?_0x4fe63e(0x194):_0x4fe63e(0x28f);stablecoins={'eur':{'coin':''+_0x401010+_0x4dc26c,'symbol':_0x401010+'/'+_0x4dc26c},'usd':{'coin':_0x401010+_0x4fe63e(0x28d),'symbol':_0x401010+'/USDT'}};}async function loadSymbols(){const _0x3a0d86=_0x4916b1;let _0x4af006;try{markets=await exchange[_0x3a0d86(0x284)](),allSymbols=exchange[_0x3a0d86(0x1d4)]['filter'](_0x1cb143=>{let _0x300d62=![];return exceptions['forEach'](_0x2b2436=>{const _0x4c9731=_0x59e7;if(_0x1cb143[_0x4c9731(0x288)](_0x2b2436))_0x300d62=!![];}),!_0x300d62;}),_0x4af006=!![];}catch(_0x5d1d9d){await handleError(_0x5d1d9d,_0x3a0d86(0x201)),_0x4af006=![];}return _0x4af006;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x202c9d=_0x4916b1;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x202c9d(0x1e3),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x29318a=getNormalizedPerformance();emitPerformance(_0x29318a),await getStartingBalances(_0x29318a);}async function toggleBotMode(){const _0xd726a0=_0x4916b1;let _0x209153=dbConfig[_0xd726a0(0x272)](_0xd726a0(0x18e))[_0xd726a0(0x23b)]({'botID':botID})[_0xd726a0(0x26d)]();if(_0x209153){const _0x358264=!_0x209153[_0xd726a0(0x163)];dbConfig[_0xd726a0(0x272)](_0xd726a0(0x18e))[_0xd726a0(0x23b)]({'botID':botID})[_0xd726a0(0x1d7)]({'headless':_0x358264})[_0xd726a0(0x221)](),config[_0xd726a0(0x163)]=_0x358264,proxyEmit(_0xd726a0(0x20c),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x20ff3a=_0x4916b1;process[_0x20ff3a(0x23d)]({'updatebotmanager':!![]},_0x63e87b=>{});}function cleanws(){const _0x2bf269=_0x4916b1;wsinitialized=![];ws1&&(ws1['forEach'](_0x165b0a=>{try{wsClient['close'](_0x165b0a);}catch(_0x37abfd){}}),ws1=[]);if(ws2){try{wsClient[_0x2bf269(0x170)](ws2);}catch(_0x5f7791){}ws2=null;}ws3&&(ws3['forEach'](_0x1b27ad=>{try{wsClient['close'](_0x1b27ad);}catch(_0x129db2){}}),ws3=[]);}async function initws(){const _0x4194ed=_0x4916b1;cleanws();let _0x34f432=[];currentCoins[_0x4194ed(0x216)](_0x9cd0d7=>{const _0x377aa0=_0x4194ed;if(_0x9cd0d7[_0x377aa0(0x17a)]!=config[_0x377aa0(0x1ea)])_0x34f432[_0x377aa0(0x193)](_0x9cd0d7['symbol']);});if(!_0x34f432['includes'](stablecoins['eur'][_0x4194ed(0x25e)]))_0x34f432[_0x4194ed(0x193)](stablecoins[_0x4194ed(0x173)][_0x4194ed(0x25e)]);if(!_0x34f432[_0x4194ed(0x288)](stablecoins[_0x4194ed(0x22a)][_0x4194ed(0x25e)]))_0x34f432[_0x4194ed(0x193)](stablecoins[_0x4194ed(0x22a)][_0x4194ed(0x25e)]);if(!_0x34f432[_0x4194ed(0x288)](_0x4194ed(0x24e)+config['basecoin']))_0x34f432[_0x4194ed(0x193)](_0x4194ed(0x24e)+config[_0x4194ed(0x1ea)]);try{_0x34f432[_0x4194ed(0x216)]((_0x41a3a5,_0x306131)=>{const _0x1140b0=_0x4194ed;ws1[_0x306131]=wsClient[_0x1140b0(0x168)](noslash(_0x41a3a5),'1m'),ws3[_0x306131]=wsClient[_0x1140b0(0x266)](noslash(_0x41a3a5),_0x1140b0(0x1f8));}),ws2=wsClient[_0x4194ed(0x270)]();}catch(_0x574362){await handleError(_0x574362,_0x4194ed(0x1ed));}let _0x3501cf,_0x500982=0x0;loading[_0x4194ed(0x268)]=[];let _0x46a87d=0x0;_0x34f432[_0x4194ed(0x216)](_0x46f199=>{const _0x5018e5=_0x4194ed;loading[_0x5018e5(0x268)][_0x5018e5(0x193)](_0x46f199);}),loadingCanceled=![];let _0x34525f=![];while(_0x3501cf!=_0x34f432['length']){_0x3501cf=0x0,_0x34f432[_0x4194ed(0x216)](_0x115792=>{const _0x3f6d04=_0x4194ed;global['ticker'][noslash(_0x115792)]&&(loading[_0x3f6d04(0x268)]=loading['remainingSymbols'][_0x3f6d04(0x211)](_0x2754f0=>_0x2754f0!=_0x115792),_0x3501cf++);}),loading[_0x4194ed(0x20e)]=Math[_0x4194ed(0x1ef)](_0x3501cf/_0x34f432[_0x4194ed(0x188)]*0x64);loading[_0x4194ed(0x20e)]!=0x64&&(_0x46a87d>0x1e*0x5&&(loading[_0x4194ed(0x176)]=!![],emitLoadingProgress()),_0x46a87d>0x3c*0x5&&!_0x34525f&&(_0x34525f=!![],logHistory(_0x4194ed(0x190),_0x4194ed(0x1c6)+loading['remainingSymbols']+_0x4194ed(0x1b5))));if(loadingCanceled){loading[_0x4194ed(0x17f)]=!![],emitLoadingProgress();break;}else _0x3501cf!=_0x500982&&(_0x500982=_0x3501cf,emitLoadingProgress()),_0x46a87d++,await sleep(0xc8);}_0x34525f&&logHistory('success',_0x4194ed(0x1f5));if(_0x3501cf==_0x34f432['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x495aa8=_0x4916b1;let _0x4fb757=0x0,_0x3d8323=0x0;try{_0x4fb757=global[_0x495aa8(0x180)][stablecoins[_0x495aa8(0x173)][_0x495aa8(0x17a)]],_0x3d8323=global[_0x495aa8(0x180)][stablecoins[_0x495aa8(0x22a)]['coin']];}catch(_0x21ee62){await handleError(_0x21ee62,_0x495aa8(0x19e));}return{'eur':Number(_0x4fb757),'usd':Number(_0x3d8323)};}function setStartDatePerformance(){const _0x1662c5=_0x4916b1;if(config&&config[_0x1662c5(0x1bb)][0x0]['changes'][_0x1662c5(0x188)]!=0x0){const _0x2cf576=config[_0x1662c5(0x1bb)][0x0]['changes'];dbPerformance[_0x1662c5(0x272)](_0x1662c5(0x1d9))['find']({'date':config[_0x1662c5(0x1a2)]})[_0x1662c5(0x1d7)]({'coins':_0x2cf576})[_0x1662c5(0x221)]();}}async function recreateCoinResults(){const _0x17dd24=_0x4916b1;let _0x5ee77f,_0x51bcca=[];try{const _0x527bd2=fns[_0x17dd24(0x22f)](fns[_0x17dd24(0x1a8)](config['startdate'][_0x17dd24(0x16b)](/\//g,'-')),_0x17dd24(0x18b));for(const _0x3f7797 of currentCoins){if(_0x3f7797[_0x17dd24(0x17a)]!=config[_0x17dd24(0x1ea)]){let _0x2114e6=0x0,_0x4a3378,_0x5dcf49;_0x5ee77f=await getAllEventOrders(_0x3f7797[_0x17dd24(0x25e)]);if(_0x5ee77f['length']>0x0)_0x5ee77f['forEach'](_0x2bfdbd=>{const _0x251e83=_0x17dd24,_0xcacfb6=_0x3f7797['symbol'][_0x251e83(0x288)](config[_0x251e83(0x1ea)]+'/');_0x51bcca[_0x251e83(0x193)]({'datetime':_0x2bfdbd[_0x251e83(0x1ab)],'coin':_0x3f7797[_0x251e83(0x17a)],'symbol':_0x3f7797[_0x251e83(0x25e)],'side':_0x2bfdbd['side'],'reverse':_0xcacfb6,'amount':formatResult(_0x2bfdbd[_0x251e83(0x218)],0x8),'filled':formatResult(_0x2bfdbd[_0x251e83(0x218)],0x8),'price':formatResult(_0x2bfdbd[_0x251e83(0x226)],0x8)}),_0x2114e6=_0x2bfdbd[_0x251e83(0x172)]==_0x251e83(0x225)?_0x2114e6+_0x2bfdbd[_0x251e83(0x218)]:_0x2114e6-_0x2bfdbd[_0x251e83(0x218)];if(!_0x5dcf49)_0x5dcf49=_0x2bfdbd[_0x251e83(0x226)];});_0x4a3378=_0x3f7797['number']-_0x2114e6;let _0x3a14cb;config[_0x17dd24(0x1bb)]['forEach'](_0x2ba2ad=>{const _0xf557b4=_0x17dd24;!_0x3a14cb&&(_0x3a14cb=_0x2ba2ad[_0xf557b4(0x16a)][_0xf557b4(0x23b)](_0x2ae385=>_0x2ae385[_0xf557b4(0x17a)]==_0x3f7797['coin']),_0x3a14cb&&(_0x4a3378=_0x3a14cb[_0xf557b4(0x23f)],_0x5dcf49=_0x3a14cb[_0xf557b4(0x226)]));});let _0x18f9f7=dbCoinResults[_0x17dd24(0x272)]('coins')[_0x17dd24(0x23b)]({'coin':_0x3f7797['coin']})['value']();_0x18f9f7={'coin':_0x3f7797[_0x17dd24(0x17a)],'number':_0x4a3378,'breakeven':_0x5dcf49,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x17dd24(0x272)](_0x17dd24(0x263))[_0x17dd24(0x23b)]({'coin':_0x3f7797[_0x17dd24(0x17a)]})['assign'](_0x18f9f7)['write']();}}_0x51bcca[_0x17dd24(0x28e)]((_0x5b9c05,_0x490348)=>_0x5b9c05[_0x17dd24(0x1ab)]>_0x490348[_0x17dd24(0x1ab)]?0x1:_0x490348[_0x17dd24(0x1ab)]>_0x5b9c05[_0x17dd24(0x1ab)]?-0x1:0x0);let _0xd3d060=0x0;for(let _0x597f57 of _0x51bcca){await updateCoinResults(_0x597f57,!![]);}}catch(_0x1b8410){await handleError(_0x1b8410,_0x17dd24(0x280));}}async function getAllEventOrders(_0xfe5a9b){const _0x41bd1f=_0x4916b1;let _0x2ec958=[],_0x509631=dbLogs[_0x41bd1f(0x272)](_0x41bd1f(0x224))[_0x41bd1f(0x211)](_0x118f2a=>{const _0x15ea50=_0x41bd1f,_0x2e140d=_0x118f2a[_0x15ea50(0x258)][_0x15ea50(0x17b)]();return _0x2e140d['includes'](_0xfe5a9b[_0x15ea50(0x17b)]())&&(_0x2e140d[_0x15ea50(0x288)]('market')&&_0x2e140d[_0x15ea50(0x288)](_0x15ea50(0x202))||_0x2e140d[_0x15ea50(0x288)]('filled')&&_0x2e140d[_0x15ea50(0x288)](_0x15ea50(0x202)));})[_0x41bd1f(0x25a)](_0x41bd1f(0x1ec))[_0x41bd1f(0x26d)]();return _0x509631[_0x41bd1f(0x216)](_0x523efc=>{const _0x1b9174=_0x41bd1f,_0x562de9=_0x523efc[_0x1b9174(0x258)][_0x1b9174(0x288)](_0x1b9174(0x167))?_0x1b9174(0x167):_0x1b9174(0x225),_0x396e34=/#([0-9]|\.)+\s/i,_0x5e53ee=Number(_0x396e34[_0x1b9174(0x1a1)](_0x523efc[_0x1b9174(0x258)])[0x0][_0x1b9174(0x1e1)](0x1)),_0x4407c3=/@([0-9]|\.)+$/i,_0x1adf15=Number(_0x4407c3[_0x1b9174(0x1a1)](_0x523efc['event'])[0x0][_0x1b9174(0x1e1)](0x1));_0x2ec958[_0x1b9174(0x193)]({'datetime':_0x523efc[_0x1b9174(0x1ec)],'coin':symbolToCoin(_0xfe5a9b),'symbol':_0xfe5a9b,'side':_0x562de9,'amount':_0x5e53ee,'filled':_0x5e53ee,'price':_0x1adf15});}),_0x2ec958;}async function getAllOrders(_0x3deacf,_0x104b0c){const _0x49b79e=_0x4916b1;let _0x4d0059=[];while(_0x104b0c<exchange[_0x49b79e(0x16e)]()){const _0x217652=0x1f4,_0x1d86d3=await exchange[_0x49b79e(0x213)](_0x3deacf,_0x104b0c,_0x217652);if(_0x1d86d3[_0x49b79e(0x188)])_0x104b0c=_0x1d86d3[_0x1d86d3['length']-0x1]['timestamp']+0x1,_0x4d0059=_0x4d0059['concat'](_0x1d86d3);else break;}return _0x4d0059;}async function validate24hChanges(){const _0xdef8b9=_0x4916b1;let _0x5aeb1d;for(const _0x286011 of currentCoins){if(_0x286011[_0xdef8b9(0x17a)]!=config[_0xdef8b9(0x1ea)]){let _0x8d103c;_0x286011['reverse']?_0x8d103c=formatResult((0x1/(global[_0xdef8b9(0x1bc)][noslash(_0x286011[_0xdef8b9(0x25e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x8d103c=global[_0xdef8b9(0x1bc)][noslash(_0x286011['symbol'])],_0x8d103c<config[_0xdef8b9(0x255)]&&(logHistory('error',_0x286011[_0xdef8b9(0x17a)]+_0xdef8b9(0x234)+_0x8d103c+'%'),logHistory(_0xdef8b9(0x190),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0xdef8b9(0x190),_0xdef8b9(0x16c)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x14e22c=_0x4916b1;let _0x4264cc=dbLogs[_0x14e22c(0x272)](_0x14e22c(0x24c))[_0x14e22c(0x26d)]();if(_0x4264cc!=_0x14e22c(0x161)){dbLogs[_0x14e22c(0x220)](_0x14e22c(0x24c),_0x14e22c(0x161))[_0x14e22c(0x221)]();let _0x25195a=[];const _0x3b88e6=dbLogs[_0x14e22c(0x272)]('logs')[_0x14e22c(0x26d)]();_0x3b88e6[_0x14e22c(0x216)](_0x40aea6=>{const _0x5c53b5=_0x14e22c;_0x25195a['push']({'time':_0x40aea6[_0x5c53b5(0x1ec)],'type':_0x40aea6[_0x5c53b5(0x1fc)],'event':_0x40aea6[_0x5c53b5(0x258)]});}),dbLogs[_0x14e22c(0x272)]('logs')[_0x14e22c(0x1d7)](_0x25195a)[_0x14e22c(0x221)]();}let _0x593693=dbConfig[_0x14e22c(0x272)]('version')[_0x14e22c(0x26d)]();if(_0x593693!='2.3.5'){dbConfig['set']('version',_0x14e22c(0x161))[_0x14e22c(0x221)]();let _0x4376bf=dbConfig[_0x14e22c(0x272)]('bot')['find']({'botID':botID})[_0x14e22c(0x26d)]();if(_0x4376bf){let _0x116f52=[];_0x4376bf[_0x14e22c(0x1a6)][_0x14e22c(0x216)](_0x536613=>{const _0x4c85e3=_0x14e22c;_0x116f52[_0x4c85e3(0x193)]({'coin':_0x536613[_0x4c85e3(0x17a)],'number':_0x536613[_0x4c85e3(0x182)],'price':_0x536613[_0x4c85e3(0x1b3)]}),delete _0x536613[_0x4c85e3(0x182)],delete _0x536613[_0x4c85e3(0x1b3)];});if(_0x116f52[_0x14e22c(0x188)]!==0x0)fs[_0x14e22c(0x19f)](configbackuppath+(_0x14e22c(0x1e4)+botID+_0x14e22c(0x1d5)),JSON[_0x14e22c(0x283)](_0x116f52,null,0x4),function(_0xc6ca9b){if(_0xc6ca9b){}});const _0x15612a=(_0x4958c9,_0x4310a7)=>{const _0x2b361d=_0x14e22c;let _0x10cfc9=[];_0x4310a7[_0x2b361d(0x216)](_0xdd39ee=>{const _0x262672=_0x2b361d,_0x374e00=_0x4958c9[_0x262672(0x23b)](_0x25489f=>_0x25489f[_0x262672(0x17a)]==_0xdd39ee['coin']);if(!_0x374e00)_0x10cfc9[_0x262672(0x193)](_0xdd39ee);});let _0x169935=[];return _0x4958c9[_0x2b361d(0x216)](_0x8d3989=>{const _0x36d7c3=_0x2b361d,_0x5e6485=_0x4310a7[_0x36d7c3(0x23b)](_0x238428=>_0x238428['coin']==_0x8d3989[_0x36d7c3(0x17a)]);if(!_0x5e6485||_0x5e6485['number']==0x0&&_0x8d3989['number']!=0x0)_0x169935['push'](_0x8d3989);}),{'missingDay1':_0x10cfc9,'notInDay2':_0x169935};},_0x416253=dbPerformance['get'](_0x14e22c(0x1d9))['cloneDeep']()[_0x14e22c(0x26d)]();if(_0x416253['length']>0x1){const {missingDay1:_0x18f40f,notInDay2:_0x2b478d}=_0x15612a(_0x116f52,_0x416253[0x1][_0x14e22c(0x263)]);_0x116f52=[..._0x116f52,..._0x18f40f],_0x2b478d[_0x14e22c(0x216)](_0x10f027=>{const _0x501a0b=_0x14e22c;let _0x419739=_0x116f52[_0x501a0b(0x273)](_0x52e2a4=>_0x52e2a4[_0x501a0b(0x17a)]==_0x10f027[_0x501a0b(0x17a)]);_0x419739!=-0x1&&_0x116f52[_0x501a0b(0x22c)](_0x419739,0x1);});}_0x116f52['sort']((_0x566b89,_0x38e806)=>_0x566b89[_0x14e22c(0x17a)]>_0x38e806[_0x14e22c(0x17a)]?0x1:_0x38e806[_0x14e22c(0x17a)]>_0x566b89['coin']?-0x1:0x0);let _0x1460ff=[{'date':_0x4376bf[_0x14e22c(0x1a2)],'changes':_0x116f52}];_0x416253[_0x14e22c(0x188)]>0x2&&_0x416253[_0x14e22c(0x216)]((_0x1cc40e,_0x59c3de)=>{const _0x448084=_0x14e22c;if(_0x59c3de>0x0&&_0x59c3de<_0x416253[_0x448084(0x188)]-0x1){const {missingDay1:_0x231798,notInDay2:_0xa8d475}=_0x15612a(_0x416253[_0x59c3de][_0x448084(0x263)],_0x416253[_0x59c3de+0x1]['coins']);_0x116f52=[],(_0x231798[_0x448084(0x188)]!=0x0||_0xa8d475['length']!=0x0)&&(_0x231798['length']!=0x0&&_0x116f52['push'](..._0x231798),_0xa8d475[_0x448084(0x188)]!=0x0&&(_0xa8d475[_0x448084(0x216)](_0x39e471=>{const _0x2eb6e3=_0x448084;_0x39e471[_0x2eb6e3(0x23f)]=-_0x39e471[_0x2eb6e3(0x23f)];}),_0x116f52[_0x448084(0x193)](..._0xa8d475)),_0x116f52[_0x448084(0x28e)]((_0x33db61,_0x71703b)=>_0x33db61[_0x448084(0x17a)]>_0x71703b[_0x448084(0x17a)]?0x1:_0x71703b['coin']>_0x33db61['coin']?-0x1:0x0),_0x1460ff['push']({'date':_0x416253[_0x59c3de+0x1]['date'],'changes':_0x116f52}));}}),dbConfig[_0x14e22c(0x272)]('bot')[_0x14e22c(0x23b)]({'botID':botID})[_0x14e22c(0x1d7)]({..._0x4376bf,'liquidity':_0x1460ff})['write']();}}config=getConfiguration(botID);let _0x554771=dbPerformance[_0x14e22c(0x272)]('version')[_0x14e22c(0x26d)]();_0x554771!=_0x14e22c(0x161)&&(dbPerformance[_0x14e22c(0x220)](_0x14e22c(0x24c),_0x14e22c(0x161))[_0x14e22c(0x221)](),setStartDatePerformance());let _0x510e56=dbCoinResults[_0x14e22c(0x272)](_0x14e22c(0x24c))[_0x14e22c(0x26d)]();if(_0x510e56!=_0x14e22c(0x278)){dbCoinResults[_0x14e22c(0x220)](_0x14e22c(0x24c),_0x14e22c(0x278))['write']();let _0x23613e=dbCoinResults[_0x14e22c(0x272)](_0x14e22c(0x263))[_0x14e22c(0x26d)]();if(_0x23613e[_0x14e22c(0x188)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x345e37){const _0x2273cc=_0x4916b1;let _0x2263f8=dbConfig[_0x2273cc(0x272)](_0x2273cc(0x18e))[_0x2273cc(0x23b)]({'botID':_0x345e37})[_0x2273cc(0x26d)]();if(_0x2263f8){let _0x1b4515=![];typeof _0x2263f8[_0x2273cc(0x1ff)]==_0x2273cc(0x20b)&&(_0x2263f8={..._0x2263f8,'threshold':Number(_0x2263f8[_0x2273cc(0x1ff)])},_0x1b4515=!![]),_0x2263f8[_0x2273cc(0x255)]==null&&(_0x2263f8={..._0x2263f8,'change24h':-0x14},_0x1b4515=!![]),_0x1b4515&&(_0x2263f8={'botID':_0x2263f8[_0x2273cc(0x15e)],'exchange':_0x2263f8[_0x2273cc(0x239)],'apiKey':_0x2263f8['apiKey'],'apiSecret':_0x2263f8[_0x2273cc(0x177)],'basecoin':_0x2263f8[_0x2273cc(0x1ea)],'botname':_0x2263f8[_0x2273cc(0x27a)],'showname':_0x2263f8[_0x2273cc(0x183)],'threshold':_0x2263f8[_0x2273cc(0x1ff)],'ordertype':_0x2263f8[_0x2273cc(0x274)],'timeout':_0x2263f8[_0x2273cc(0x176)],'startdate':_0x2263f8[_0x2273cc(0x1a2)],'recreate':_0x2263f8[_0x2273cc(0x245)],'timeshift':_0x2263f8['timeshift'],'headless':_0x2263f8[_0x2273cc(0x163)],'cooldown':_0x2263f8[_0x2273cc(0x1bf)],'change24h':_0x2263f8[_0x2273cc(0x255)],'emojibuy':_0x2263f8[_0x2273cc(0x1b2)],'emojisell':_0x2263f8[_0x2273cc(0x1fe)],'portfolio':_0x2263f8[_0x2273cc(0x1a6)],'liquidity':_0x2263f8[_0x2273cc(0x1bb)]},dbConfig[_0x2273cc(0x272)]('bot')[_0x2273cc(0x186)]()[_0x2273cc(0x221)](),dbConfig[_0x2273cc(0x272)](_0x2273cc(0x18e))[_0x2273cc(0x193)](_0x2263f8)[_0x2273cc(0x221)]());}else _0x2263f8={'botID':_0x345e37,'exchange':_0x2273cc(0x275),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x2273cc(0x27e)+_0x345e37,'showname':![],'threshold':0x3,'ordertype':_0x2273cc(0x243),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2273cc(0x1c4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x2263f8;}function emittedConfiguration(){const _0x5eb433=_0x4916b1;let _0x1ff2b8;return config['apiKey']==''?_0x1ff2b8=config:_0x1ff2b8={...config,'apiKey':'************','apiSecret':_0x5eb433(0x1ca)},_0x1ff2b8;}function getSettings(){const _0x4610eb=_0x4916b1;return dbSettings[_0x4610eb(0x272)]('settings')['value']();}function getSecure(){const _0x49a77e=_0x4916b1;return dbSecure['get'](_0x49a77e(0x1b1))['value']()||{};}function updateTimeshift(_0x290ecf){const _0x5a4e3c=_0x4916b1;let _0x57f8c1=dbConfig['get'](_0x5a4e3c(0x18e))[_0x5a4e3c(0x23b)]({'botID':botID})['value']();_0x57f8c1&&dbConfig[_0x5a4e3c(0x272)]('bot')[_0x5a4e3c(0x23b)]({'botID':botID})[_0x5a4e3c(0x1d7)]({'timeshift':_0x290ecf})[_0x5a4e3c(0x221)](),config[_0x5a4e3c(0x1c4)]=_0x290ecf,proxyEmit(_0x5a4e3c(0x20c),emittedConfiguration());}async function storeConfiguration(_0x9810e3){const _0x3c1889=_0x4916b1;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x470a53=dbConfig[_0x3c1889(0x272)](_0x3c1889(0x18e))[_0x3c1889(0x23b)]({'botID':botID})[_0x3c1889(0x26d)]();_0x9810e3={..._0x9810e3,'apiKey':crypt[_0x3c1889(0x26e)](secure[_0x3c1889(0x242)],_0x9810e3[_0x3c1889(0x257)])[_0x3c1889(0x189)],'apiSecret':crypt[_0x3c1889(0x26e)](secure[_0x3c1889(0x242)],_0x9810e3[_0x3c1889(0x177)])[_0x3c1889(0x189)]};if(_0x470a53){if(_0x9810e3[_0x3c1889(0x257)]==_0x3c1889(0x1ca))_0x9810e3['apiKey']=config[_0x3c1889(0x257)];if(_0x9810e3[_0x3c1889(0x177)]==_0x3c1889(0x1ca))_0x9810e3[_0x3c1889(0x177)]=config[_0x3c1889(0x177)];dbConfig[_0x3c1889(0x272)](_0x3c1889(0x18e))[_0x3c1889(0x23b)]({'botID':botID})[_0x3c1889(0x1d7)](_0x9810e3)[_0x3c1889(0x221)]();}else dbConfig[_0x3c1889(0x272)](_0x3c1889(0x18e))['push'](_0x9810e3)['write'](),process[_0x3c1889(0x23d)]({'status':'enabled','live':_0x3c1889(0x237)},_0x969412=>{});config={..._0x9810e3},setStartDatePerformance(),process[_0x3c1889(0x23d)]({'botname':_0x9810e3[_0x3c1889(0x27a)]},_0x4e60bc=>{}),updateBotManager();const _0x4bd778=getNormalizedPerformance();getStartingBalances(_0x4bd778),emitPerformance(_0x4bd778),proxyEmit(_0x3c1889(0x290)),await initCoinResults(),reset();}async function storeHeadless(_0x10cc43){const _0x4219a7=_0x4916b1,_0x47fbf9={...config,'headless':_0x10cc43['headless']};let _0x155a02=dbConfig[_0x4219a7(0x272)](_0x4219a7(0x18e))['find']({'botID':botID})[_0x4219a7(0x26d)]();_0x155a02&&dbConfig['get'](_0x4219a7(0x18e))[_0x4219a7(0x23b)]({'botID':botID})[_0x4219a7(0x1d7)](_0x47fbf9)[_0x4219a7(0x221)](),config={..._0x47fbf9},updateBotManager(),proxyEmit(_0x4219a7(0x20c),emittedConfiguration());}function noslash(_0x954b2){const _0x66de96=_0x4916b1;return _0x954b2[_0x66de96(0x16b)]('/','');}async function updateNumberCoins(_0x1f6d9e){const _0x4f6db0=_0x4916b1;console[_0x4f6db0(0x17e)](_0x1f6d9e);if(_0x1f6d9e['eventType']&&_0x1f6d9e[_0x4f6db0(0x16f)]==_0x4f6db0(0x21a)){if(_0x1f6d9e['eventTime']!=lastOutboundEventTime){lastOutboundEventTime=_0x1f6d9e[_0x4f6db0(0x28a)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x2ade7c=JSON[_0x4f6db0(0x1fa)](lastBalances[_0x4f6db0(0x1a6)]);_0x2ade7c[_0x4f6db0(0x216)](_0x3941fe=>{const _0x137a1d=_0x4f6db0,_0x6502fe=currentCoins[_0x137a1d(0x23b)](_0x1def5b=>_0x1def5b[_0x137a1d(0x17a)]==_0x3941fe['coin']);if(_0x6502fe[_0x137a1d(0x202)])_0x3941fe[_0x137a1d(0x202)]=_0x6502fe[_0x137a1d(0x202)];}),lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x2ade7c)},proxyEmit(_0x4f6db0(0x1e3),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x1f6d9e[_0x4f6db0(0x16f)]&&_0x1f6d9e['eventType']==_0x4f6db0(0x20f)){if(_0x1f6d9e[_0x4f6db0(0x15f)]=='FILLED'){if(lastOrders)lastOrders['forEach'](async _0x174e7e=>{const _0x4ee3b8=_0x4f6db0;_0x174e7e[_0x4ee3b8(0x244)]==_0x1f6d9e[_0x4ee3b8(0x244)]&&_0x174e7e[_0x4ee3b8(0x218)]==0x0&&(_0x174e7e[_0x4ee3b8(0x226)]=_0x1f6d9e[_0x4ee3b8(0x277)]/_0x1f6d9e[_0x4ee3b8(0x1f2)],_0x174e7e[_0x4ee3b8(0x218)]=_0x1f6d9e[_0x4ee3b8(0x1f2)],_0x174e7e[_0x4ee3b8(0x1be)]={'cost':_0x1f6d9e[_0x4ee3b8(0x1c7)],'currency':_0x1f6d9e['commissionAsset']},await validateOrders(),await updateCoinResults(_0x174e7e));});}}}async function getCoins(_0x5062d9=![],_0x5d03c1=!![],_0x296cb8=config[_0x4916b1(0x1ea)]){const _0x16f10f=_0x4916b1;let _0x567abe,_0x497e53=[],_0x22c225=[],_0x3e9685=[];try{_0x567abe=await exchange['fetchBalance'](),mybalances=_0x567abe[_0x16f10f(0x1ad)];if(!_0x5d03c1)for(const [_0x434c2b,_0x365493]of Object[_0x16f10f(0x256)](mybalances)){_0x3e9685['push'](_0x434c2b);}else config[_0x16f10f(0x1a6)][_0x16f10f(0x216)](_0x1a67a9=>{const _0x5e95c1=_0x16f10f;if(!_0x1a67a9['excluded'])_0x3e9685['push'](_0x1a67a9[_0x5e95c1(0x17a)]);});if(_0x296cb8=='')for(const [_0x409bad,_0x5b6d4f]of Object[_0x16f10f(0x256)](mybalances)){_0x5b6d4f['toString']()!=0x0&&_0x22c225['push']({'coin':_0x409bad});}else{let _0x2cf515=![],_0x5859cf;allOpenOrders=[];for(const [_0x53f392,_0x38e801]of Object[_0x16f10f(0x256)](mybalances)){if(_0x3e9685[_0x16f10f(0x288)](_0x53f392)){const _0x1c268b=config[_0x16f10f(0x1a6)][_0x16f10f(0x23b)](_0xc5f5dd=>_0xc5f5dd[_0x16f10f(0x17a)]==_0x53f392),_0x23cc2b=_0x53f392+'/'+_0x296cb8,_0x21a04c=_0x296cb8+'/'+_0x53f392;_0x2cf515=![];if((_0x38e801[_0x16f10f(0x1c8)]()!=0x0||_0x1c268b)&&(allSymbols[_0x16f10f(0x288)](_0x23cc2b)||_0x53f392==_0x296cb8))_0x53f392!=_0x296cb8&&(_0x497e53[_0x16f10f(0x193)](_0x23cc2b),_0x5062d9&&(_0x5859cf=await exchange[_0x16f10f(0x267)](_0x23cc2b),_0x5859cf[_0x16f10f(0x188)]>0x0&&(_0x2cf515=!![]))),_0x22c225[_0x16f10f(0x193)]({'coin':_0x53f392,'symbol':_0x23cc2b,'reverse':![],'number':Math['max'](_0x38e801+(_0x1c268b&&_0x1c268b['offset']||0x0),0x0),'order':_0x2cf515});else(_0x38e801['toString']()!=0x0||_0x1c268b)&&allSymbols[_0x16f10f(0x288)](_0x21a04c)&&(_0x53f392!=_0x296cb8&&(_0x497e53['push'](_0x21a04c),_0x5062d9&&(_0x5859cf=await exchange['fetchOpenOrders'](_0x21a04c),_0x5859cf[_0x16f10f(0x188)]>0x0&&(_0x2cf515=!![]))),_0x22c225[_0x16f10f(0x193)]({'coin':_0x53f392,'symbol':_0x21a04c,'reverse':!![],'number':Math['max'](_0x38e801+(_0x1c268b&&_0x1c268b[_0x16f10f(0x240)]||0x0),0x0),'order':_0x2cf515}));}_0x2cf515&&allOpenOrders[_0x16f10f(0x193)](_0x5859cf[0x0]);}_0x5062d9&&allOpenOrders[_0x16f10f(0x188)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x16f10f(0x262))));}}catch(_0x2e4b56){if(!_0x5d03c1){if(_0x2e4b56['toString']()[_0x16f10f(0x288)](_0x16f10f(0x1fd)))return logHistory(_0x16f10f(0x190),_0x16f10f(0x27c)),![];else{if(_0x2e4b56[_0x16f10f(0x1c8)]()[_0x16f10f(0x288)]('AuthenticationError'))return logHistory(_0x16f10f(0x190),_0x16f10f(0x165)),![];else{if(_0x2e4b56['toString']()['includes'](_0x16f10f(0x251)))return logHistory(_0x16f10f(0x190),_0x16f10f(0x20a)),![];else await handleError(_0x2e4b56,_0x16f10f(0x232));}}}else await handleError(_0x2e4b56,_0x16f10f(0x232));}return _0x22c225;}async function getPortfolio(_0x5b4a79){const _0x3fb001=_0x4916b1;let _0x3ce841=[],_0xcf7666=[],_0x59401c,_0x1efb69=[],_0x445b26,_0x3fec87;_0x5b4a79['apiKey']===_0x3fb001(0x1ca)||_0x5b4a79['apiSecret']===_0x3fb001(0x1ca)?(_0x445b26=config[_0x3fb001(0x257)],_0x3fec87=config[_0x3fb001(0x177)]):(_0x445b26=_0x5b4a79['apiKey'],_0x3fec87=_0x5b4a79[_0x3fb001(0x177)]);await initExchange(_0x445b26,_0x3fec87);let _0x5b13b7=await loadSymbols();if(_0x5b13b7){_0x1efb69=await getCoins(![],![],_0x5b4a79[_0x3fb001(0x1ea)]);if(_0x1efb69===![])proxyEmit(_0x3fb001(0x1a6),![]);else{if(_0x5b4a79[_0x3fb001(0x1ea)]=='')proxyEmit(_0x3fb001(0x1a6),_0x1efb69);else{_0x1efb69['forEach'](_0x5de2a9=>{const _0xa5f7e4=_0x3fb001;if(_0x5de2a9[_0xa5f7e4(0x17a)]!=_0x5b4a79[_0xa5f7e4(0x1ea)])_0x3ce841[_0xa5f7e4(0x193)](_0x5de2a9[_0xa5f7e4(0x25e)]);});try{_0xcf7666=await exchange[_0x3fb001(0x289)](_0x3ce841);}catch(_0x391eca){await handleError(_0x391eca,'getPortfolio()');}_0x1efb69[_0x3fb001(0x216)](_0x1bb568=>{const _0x21ed02=_0x3fb001;_0x1bb568['coin']!=_0x5b4a79[_0x21ed02(0x1ea)]?_0x59401c=_0x1bb568[_0x21ed02(0x1e2)]?0x1/_0xcf7666[_0x1bb568[_0x21ed02(0x25e)]][_0x21ed02(0x1f0)]:_0xcf7666[_0x1bb568[_0x21ed02(0x25e)]]['last']:_0x59401c=0x1,_0x1bb568[_0x21ed02(0x226)]=formatResult(_0x59401c,0x8);}),proxyEmit(_0x3fb001(0x1a6),_0x1efb69);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x236c31){const _0x43331a=_0x4916b1;let _0x481679=!![];const _0x2d3e3f=!_0x236c31[_0x43331a(0x1e2)]?markets[_0x236c31['symbol']][_0x43331a(0x281)][_0x43331a(0x230)][_0x43331a(0x206)]:markets[_0x236c31[_0x43331a(0x25e)]][_0x43331a(0x281)][_0x43331a(0x1db)][_0x43331a(0x206)],_0x2ffb5b=!_0x236c31['reverse']?markets[_0x236c31[_0x43331a(0x25e)]][_0x43331a(0x281)][_0x43331a(0x1db)]['min']:markets[_0x236c31[_0x43331a(0x25e)]][_0x43331a(0x281)]['amount'][_0x43331a(0x206)],_0xd590cd=markets[_0x236c31[_0x43331a(0x25e)]][_0x43331a(0x293)]['amount'];_0x236c31['trade']=formatResultTruncate(_0x236c31['trade'],_0xd590cd);if(Math['abs'](_0x236c31[_0x43331a(0x184)])<_0x2d3e3f)_0x481679=![];if(Math[_0x43331a(0x222)](_0x236c31[_0x43331a(0x184)])*_0x236c31[_0x43331a(0x1f0)]<_0x2ffb5b)_0x481679=![];if(_0x236c31[_0x43331a(0x172)]==_0x43331a(0x167)){let _0x5c920e=config[_0x43331a(0x1a6)][_0x43331a(0x23b)](_0x3b41f4=>_0x3b41f4[_0x43331a(0x17a)]==_0x236c31[_0x43331a(0x17a)]);if(_0x5c920e['offset']>0x0){if(Math[_0x43331a(0x222)](_0x236c31[_0x43331a(0x184)])>_0x236c31[_0x43331a(0x23f)]-_0x5c920e[_0x43331a(0x240)])_0x481679=![];}else{if(Math['abs'](_0x236c31[_0x43331a(0x184)])>_0x236c31[_0x43331a(0x23f)])_0x481679=![];}}if(_0x236c31[_0x43331a(0x172)]==_0x43331a(0x225)){let _0x1b668b=config[_0x43331a(0x1a6)][_0x43331a(0x23b)](_0x1691f7=>_0x1691f7[_0x43331a(0x17a)]==config[_0x43331a(0x1ea)]),_0x4a166e=currentCoins[_0x43331a(0x23b)](_0x14fdb7=>_0x14fdb7['coin']==config['basecoin']);if(_0x1b668b['offset']>0x0){if(Math[_0x43331a(0x222)](_0x236c31[_0x43331a(0x184)])*_0x236c31[_0x43331a(0x1f0)]>_0x4a166e[_0x43331a(0x23f)]-_0x1b668b[_0x43331a(0x240)])_0x481679=![];}else{if(Math[_0x43331a(0x222)](_0x236c31[_0x43331a(0x184)])*_0x236c31[_0x43331a(0x1f0)]>_0x4a166e[_0x43331a(0x23f)])_0x481679=![];}}return _0x481679;}async function getBalances(){const _0x2a36f8=_0x4916b1;let _0x3cfea6=0x0,_0xb8d171;const _0x3c9b04=config[_0x2a36f8(0x1ff)];if(config[_0x2a36f8(0x163)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2a36f8(0x216)](_0x3832c3=>{const _0x5443f4=_0x2a36f8;if(_0x3832c3[_0x5443f4(0x17a)]!=config[_0x5443f4(0x1ea)]){let _0x4ddf3e=global[_0x5443f4(0x180)][noslash(_0x3832c3[_0x5443f4(0x25e)])];_0xb8d171=_0x3832c3[_0x5443f4(0x1e2)]?0x1/_0x4ddf3e:_0x4ddf3e;}else _0xb8d171=0x1;let _0x3002a1=_0x3832c3[_0x5443f4(0x23f)]*_0xb8d171;_0x3cfea6+=_0x3002a1,_0x3832c3[_0x5443f4(0x1f0)]=formatResult(Number(_0xb8d171),0x8),_0x3832c3[_0x5443f4(0x26d)]=_0x3002a1;}),currentCoins['forEach'](_0x28f6e0=>{const _0x35dc0c=_0x2a36f8;let _0x1dc23d=config[_0x35dc0c(0x1a6)][_0x35dc0c(0x23b)](_0x49f1d4=>_0x49f1d4['coin']==_0x28f6e0['coin']),_0x25e752=Number(_0x1dc23d['distribution']),_0x468cf2=_0x28f6e0[_0x35dc0c(0x26d)]/_0x3cfea6*0x64,_0x582eb5=_0x25e752*_0x3cfea6/0x64/_0x28f6e0[_0x35dc0c(0x1f0)]-_0x28f6e0[_0x35dc0c(0x23f)];_0x28f6e0['distribution']=formatResult(_0x468cf2,0x3),_0x28f6e0[_0x35dc0c(0x276)]=formatResult(_0x25e752,0x3),_0x28f6e0['trade']=formatResult(_0x582eb5,0x8),_0x28f6e0[_0x35dc0c(0x172)]='',_0x28f6e0['valid']=![];if(_0x28f6e0['coin']!=config[_0x35dc0c(0x1ea)]){if(_0x28f6e0[_0x35dc0c(0x252)]>_0x25e752)_0x28f6e0[_0x35dc0c(0x172)]=_0x35dc0c(0x167),_0x28f6e0[_0x35dc0c(0x21c)]=checkMinimums(_0x28f6e0);else _0x28f6e0[_0x35dc0c(0x252)]<_0x25e752&&(_0x28f6e0[_0x35dc0c(0x172)]=_0x35dc0c(0x225),_0x28f6e0[_0x35dc0c(0x21c)]=checkMinimums(_0x28f6e0));}_0x28f6e0[_0x35dc0c(0x209)]=_0x28f6e0[_0x35dc0c(0x252)]/_0x28f6e0[_0x35dc0c(0x276)]-0x1;}),currentCoins[_0x2a36f8(0x28e)]((_0xb908a5,_0x400bae)=>_0xb908a5[_0x2a36f8(0x209)]<_0x400bae['delta']?0x1:_0x400bae[_0x2a36f8(0x209)]<_0xb908a5[_0x2a36f8(0x209)]?-0x1:0x0);const _0x4b46eb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4b46eb[_0x2a36f8(0x173)],'usd':_0x4b46eb['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x3c9b04},proxyEmit(_0x2a36f8(0x1e3),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2a36f8(0x163)])headlessMode({'portfolio':currentCoins,'threshold':_0x3c9b04});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x3c9b04});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x54c24b=_0x4916b1;if(!lastBalances)return;let _0x37c7c2=[],_0x8a2fb2,_0x4c9d01=JSON[_0x54c24b(0x1fa)](lastBalances[_0x54c24b(0x1a6)]);_0x4c9d01[_0x54c24b(0x28e)]((_0x4b0258,_0x5c395c)=>_0x4b0258[_0x54c24b(0x17a)]>_0x5c395c[_0x54c24b(0x17a)]?0x1:_0x5c395c[_0x54c24b(0x17a)]>_0x4b0258[_0x54c24b(0x17a)]?-0x1:0x0),_0x4c9d01[_0x54c24b(0x216)](_0x381323=>{const _0x45dcf2=_0x54c24b;let _0x3849bb={'coin':_0x381323[_0x45dcf2(0x17a)],'number':_0x381323[_0x45dcf2(0x23f)],'price':_0x381323[_0x45dcf2(0x1f0)]};_0x37c7c2[_0x45dcf2(0x193)](_0x3849bb);});const _0xfc9540=await getFiat();_0x8a2fb2={'date':lastBalances[_0x54c24b(0x1ec)][_0x54c24b(0x241)]('\x20')[0x0],'eur':_0xfc9540[_0x54c24b(0x173)],'usd':_0xfc9540[_0x54c24b(0x22a)],'coins':_0x37c7c2};let _0x57b21=dbPerformance['get'](_0x54c24b(0x1d9))[_0x54c24b(0x23b)]({'date':_0x8a2fb2[_0x54c24b(0x185)]})[_0x54c24b(0x26d)]();_0x57b21?_0x8a2fb2[_0x54c24b(0x185)]!=config['startdate']&&dbPerformance['get'](_0x54c24b(0x1d9))['find']({'date':_0x8a2fb2[_0x54c24b(0x185)]})[_0x54c24b(0x1d7)](_0x8a2fb2)[_0x54c24b(0x221)]():dbPerformance[_0x54c24b(0x272)](_0x54c24b(0x1d9))['push'](_0x8a2fb2)[_0x54c24b(0x221)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4eb5cd=_0x4916b1;let _0x474c28=[];if(dbPerformance[_0x4eb5cd(0x1da)](_0x4eb5cd(0x1d9))[_0x4eb5cd(0x26d)]()){let _0x2268e9=dbPerformance['get'](_0x4eb5cd(0x1d9))[_0x4eb5cd(0x271)]()[_0x4eb5cd(0x25a)](_0x4eb5cd(0x185))['value'](),_0x97174b=[...config['liquidity']];_0x97174b[_0x4eb5cd(0x28e)]((_0x5a8494,_0x58fe80)=>_0x5a8494[_0x4eb5cd(0x185)]>_0x58fe80['date']?-0x1:_0x58fe80[_0x4eb5cd(0x185)]>_0x5a8494[_0x4eb5cd(0x185)]?0x1:0x0);let _0x3734bd=0x1,_0x5e8c19=[],_0x42f246=0x0;_0x2268e9[_0x4eb5cd(0x1e1)]()[_0x4eb5cd(0x1e2)]()[_0x4eb5cd(0x216)]((_0x1b49c5,_0x2892d4)=>{const _0x3697c0=_0x4eb5cd;if(_0x97174b[_0x42f246]){if(_0x2268e9[_0x2268e9[_0x3697c0(0x188)]-_0x2892d4]&&_0x97174b[_0x42f246][_0x3697c0(0x185)]==_0x2268e9[_0x2268e9[_0x3697c0(0x188)]-_0x2892d4]['date']){if(_0x2892d4<_0x2268e9[_0x3697c0(0x188)]){let _0x227f36=0x0,_0x53fc0c=0x0;_0x2268e9[_0x2268e9[_0x3697c0(0x188)]-_0x2892d4][_0x3697c0(0x263)][_0x3697c0(0x216)](_0x3b9fe3=>{const _0x419e6a=_0x3697c0;_0x53fc0c+=_0x3b9fe3[_0x419e6a(0x23f)]*_0x3b9fe3['price'];}),_0x97174b[_0x42f246][_0x3697c0(0x16a)][_0x3697c0(0x216)](_0x611564=>{const _0x3a6003=_0x3697c0;_0x227f36+=_0x611564[_0x3a6003(0x23f)]*_0x611564[_0x3a6003(0x226)];}),_0x3734bd*=_0x227f36/(_0x53fc0c-_0x227f36)+0x1;}_0x42f246++;}}let _0x558914=0x0;_0x1b49c5[_0x3697c0(0x263)][_0x3697c0(0x216)](_0x486af8=>{const _0x4821d5=_0x3697c0;_0x558914+=_0x486af8['number']*_0x486af8[_0x4821d5(0x226)];}),_0x5e8c19[_0x2268e9['length']-_0x2892d4-0x1]=_0x558914*(_0x3734bd-0x1);});let _0x49a29a=[];_0x97174b=[...config['liquidity']]||[];let _0x20467b=0x0;_0x42f246=0x0,_0x2268e9[_0x4eb5cd(0x216)]((_0xb8fea7,_0x20d8e6)=>{const _0x1218ed=_0x4eb5cd;if(_0x97174b[_0x42f246]){const _0x4ff2d1=fns[_0x1218ed(0x1fa)](_0x97174b[_0x42f246][_0x1218ed(0x185)],'yyyy/MM/dd',new Date()),_0x12c83e=fns[_0x1218ed(0x1fa)](_0xb8fea7['date'],'yyyy/MM/dd',new Date());if(fns[_0x1218ed(0x1c3)](_0x4ff2d1,_0x12c83e)){let _0x59e7fd=0x0;_0x97174b[_0x42f246][_0x1218ed(0x16a)]['forEach'](_0x2dd228=>{const _0x8c42c4=_0x1218ed;!_0x49a29a[_0x2dd228[_0x8c42c4(0x17a)]]?_0x49a29a[_0x2dd228[_0x8c42c4(0x17a)]]=_0x2dd228['number']:(_0x59e7fd=_0x49a29a[_0x2dd228[_0x8c42c4(0x17a)]],_0x49a29a[_0x2dd228['coin']]+=_0x2dd228[_0x8c42c4(0x23f)]);const _0x2facd7=_0xb8fea7['coins'][_0x8c42c4(0x23b)](_0x504dd1=>_0x504dd1[_0x8c42c4(0x17a)]==_0x2dd228[_0x8c42c4(0x17a)]);(!_0x2facd7||_0x2facd7['number']==0x0)&&(_0x20467b+=(-_0x2dd228[_0x8c42c4(0x23f)]-_0x59e7fd)*_0x2dd228[_0x8c42c4(0x226)]);}),_0x42f246++;}}_0xb8fea7['coins'][_0x1218ed(0x216)]((_0x2afed9,_0x427fab)=>{const _0x879d92=_0x1218ed;_0x49a29a[_0x2afed9[_0x879d92(0x17a)]]&&(_0x2afed9={..._0x2afed9,'initial':_0x49a29a[_0x2afed9['coin']]}),_0xb8fea7['coins'][_0x427fab]=_0x2afed9;}),_0x474c28['push']({'date':_0xb8fea7['date'],'eur':_0xb8fea7[_0x1218ed(0x173)],'usd':_0xb8fea7['usd'],'offset':_0x5e8c19[_0x20d8e6],'netoffset':_0x20467b,'coins':_0xb8fea7[_0x1218ed(0x263)]});});}return _0x474c28;}function emitPerformance(_0x7a5222){const _0x1816ee=_0x4916b1;_0x7a5222[_0x1816ee(0x188)]!==0x0?(proxyEmit('performance',_0x7a5222),lastPerformanceEmitted=getDate()):proxyEmit(_0x1816ee(0x205),[]);}function getPerf(_0x541331,_0x23324a){const _0x4c62bf=_0x4916b1;let _0x20aa6c=0x0,_0x5ed855=0x0,_0xfc5ebd=0x0;_0x541331['coins'][_0x4c62bf(0x216)](_0x3f6de8=>{const _0x57060d=_0x4c62bf;_0x20aa6c+=_0x3f6de8[_0x57060d(0x23f)]*_0x3f6de8[_0x57060d(0x226)];});_0x23324a&&(_0x20aa6c+=_0x541331[_0x4c62bf(0x240)]);if(config[_0x4c62bf(0x1ea)]===_0x4c62bf(0x28f)||config[_0x4c62bf(0x1ea)]==='ETH')_0x5ed855=_0x20aa6c*_0x541331[_0x4c62bf(0x173)],_0xfc5ebd=_0x20aa6c*_0x541331[_0x4c62bf(0x22a)];else{if(config[_0x4c62bf(0x1ea)]===_0x4c62bf(0x21b)||config[_0x4c62bf(0x1ea)]===_0x4c62bf(0x28d))_0x5ed855=_0x20aa6c*_0x541331[_0x4c62bf(0x173)]/_0x541331['usd'],_0xfc5ebd=_0x20aa6c;else config[_0x4c62bf(0x1ea)]===_0x4c62bf(0x1e9)&&(_0x5ed855=_0x20aa6c,_0xfc5ebd=_0x20aa6c*_0x541331[_0x4c62bf(0x22a)]/_0x541331[_0x4c62bf(0x173)]);}return[_0x20aa6c,_0x5ed855,_0xfc5ebd];}async function getStartingBalances(_0x29e8fe,_0x57c4fe=!![]){const _0x1e085d=_0x4916b1;if(_0x29e8fe[_0x1e085d(0x188)]!==0x0){const [_0x3e7864,_0x12ba9b,_0x27a14]=getPerf(_0x29e8fe[0x0],!![]);let _0x2acbc6=[];config[_0x1e085d(0x1a6)][_0x1e085d(0x216)](_0x2389d9=>{const _0x52a810=_0x1e085d;let _0x7253e5=0x0,_0x384af4;config[_0x52a810(0x1bb)][_0x52a810(0x216)](_0x3b6d39=>{const _0x325578=_0x52a810;let _0x2fd03c=_0x3b6d39[_0x325578(0x16a)][_0x325578(0x23b)](_0x3c8d42=>_0x3c8d42['coin']==_0x2389d9['coin']);if(_0x2fd03c){_0x7253e5+=_0x2fd03c[_0x325578(0x23f)];if(!_0x384af4)_0x384af4=_0x2fd03c[_0x325578(0x226)];}}),_0x2acbc6[_0x52a810(0x193)]({'coin':_0x2389d9[_0x52a810(0x17a)],'number':_0x7253e5,'initialprice':_0x384af4});});const _0x2fb2b6={'basecoin':_0x3e7864,'eur':_0x12ba9b,'usd':_0x27a14,'coins':_0x2acbc6};if(_0x57c4fe)proxyEmit(_0x1e085d(0x229),_0x2fb2b6);return _0x2fb2b6;}}function headlessMode(_0xaba34f){const _0x33bd57=_0x4916b1;let _0x4dcce3=_0xaba34f['portfolio'],_0x3afb36=_0xaba34f[_0x33bd57(0x1ff)],_0x39fc32=[];for(let _0x212b9d of _0x4dcce3){if(_0x212b9d[_0x33bd57(0x17a)]!=config['basecoin']){if(_0x212b9d['delta']>=_0x3afb36/0x64){if(_0x212b9d[_0x33bd57(0x21c)])_0x39fc32[_0x33bd57(0x193)](_0x212b9d);}else{if(_0x212b9d['delta']<=-_0x3afb36/0x64){if(_0x212b9d[_0x33bd57(0x21c)])_0x39fc32[_0x33bd57(0x193)](_0x212b9d);}}}}_0x39fc32[_0x33bd57(0x188)]>0x0&&(allOrdersPlaced=![],placeOrder(_0x39fc32));}function notifyBalance(_0x21c809){const _0x5f933b=_0x4916b1;let _0xe22f60=_0x21c809[_0x5f933b(0x1a6)],_0xc94d02=_0x21c809[_0x5f933b(0x1ff)],_0x38223b=[];for(let _0x1bd40a of _0xe22f60){if(_0x1bd40a[_0x5f933b(0x17a)]!=config[_0x5f933b(0x1ea)]){if(_0x1bd40a['delta']>=_0xc94d02/0x64){if(_0x1bd40a['valid'])_0x38223b[_0x5f933b(0x193)](_0x1bd40a);}else{if(_0x1bd40a[_0x5f933b(0x209)]<=-_0xc94d02/0x64){if(_0x1bd40a[_0x5f933b(0x21c)])_0x38223b[_0x5f933b(0x193)](_0x1bd40a);}}}}if(_0x38223b['length']>0x0){let _0x4dcea4=_0x38223b['map'](_0x441dbb=>_0x441dbb[_0x5f933b(0x17a)]);_0x4dcea4[_0x5f933b(0x28e)]();let _0x1a99a8=_0x4dcea4[_0x5f933b(0x228)](',\x20');if(lastCoinsToBalance!==_0x1a99a8)logHistory('success',_0x5f933b(0x1af)+_0x1a99a8);lastCoinsToBalance=_0x1a99a8;}}function symbolToCoin(_0x8fc767){const _0x58b032=_0x4916b1;let _0x44e567;if(_0x8fc767['includes']('/'+config[_0x58b032(0x1ea)]))_0x44e567=_0x8fc767[_0x58b032(0x16b)]('/'+config['basecoin'],'');if(_0x8fc767[_0x58b032(0x288)](config['basecoin']+'/'))_0x44e567=_0x8fc767[_0x58b032(0x16b)](config['basecoin']+'/','');return _0x44e567;}async function unlockOrders(){const _0x2237ca=_0x4916b1;currentCoins=await getCoins(),validateOrdersState=_0x2237ca(0x212);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x2f1e50){const _0x4b943d=_0x4916b1;if(_0x2f1e50)validateOrdersState=_0x2f1e50;let _0x519eeb=[],_0x4f3d2e=config[_0x4b943d(0x274)]==_0x4b943d(0x243)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4b943d(0x176)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+_0x4b943d(0x24f)+_0x2f1e50),lastOrders[_0x4b943d(0x216)](_0x3c72e5=>{const _0x9290ed=_0x4b943d;let _0x7418bd=![];_0x3c72e5[_0x9290ed(0x218)]>0x0&&(_0x7418bd=!![]),_0x519eeb['push'](_0x7418bd),_0x7418bd&&config[_0x9290ed(0x274)]!=_0x9290ed(0x243)&&logHistory(_0x9290ed(0x202),_0x9290ed(0x16d)+_0x3c72e5[_0x9290ed(0x25e)]+'\x20'+_0x3c72e5[_0x9290ed(0x172)]+'\x20#'+formatResult(_0x3c72e5['filled'],0x8)+'\x20@'+formatResult(_0x3c72e5[_0x9290ed(0x226)],0x8));}),_0x519eeb[_0x4b943d(0x216)]((_0x2359e8,_0x450dfb)=>{const _0x2c8354=_0x4b943d;if(_0x2359e8)lastOrders[_0x2c8354(0x22c)](_0x450dfb,0x1);});const _0x22cc89=coolingDown?_0x4b943d(0x227):_0x4b943d(0x208);if(validateOrdersState==_0x4b943d(0x212))validateOrdersState=_0x4b943d(0x1c0),_0x519eeb[_0x4b943d(0x288)](![])?config[_0x4b943d(0x274)]==_0x4b943d(0x243)?logHistory(_0x4b943d(0x190),_0x4b943d(0x1f4)):logHistory(_0x4b943d(0x190),_0x4b943d(0x1ac)):await unlockOrders();else{if(validateOrdersState==_0x4b943d(0x1c0)){if(_0x519eeb[_0x4b943d(0x288)](![])){}else config[_0x4b943d(0x274)]=='market'?logHistory(_0x4b943d(0x174),_0x4b943d(0x1c2)+_0x22cc89):logHistory('success','Order(s)\x20filled\x20-\x20'+_0x22cc89),await unlockOrders();}else{if(validateOrdersState==_0x4b943d(0x1eb))_0x519eeb[_0x4b943d(0x288)](![])?config[_0x4b943d(0x274)]==_0x4b943d(0x243)?logHistory('success',_0x4b943d(0x1f3)+Math[_0x4b943d(0x1ef)](_0x4f3d2e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x22cc89):(await cancelOrders(),logHistory('success',_0x4b943d(0x23e)+Math['round'](_0x4f3d2e*validateOrderInterval/0xea60)+_0x4b943d(0x25d)+_0x22cc89)):logHistory(_0x4b943d(0x174),'No\x20more\x20open\x20orders\x20-\x20'+_0x22cc89),await unlockOrders();else{if(validateOrdersState==_0x4b943d(0x262)){if(config['ordertype']!=_0x4b943d(0x243))logHistory('success',_0x4b943d(0x1b9)+_0x22cc89);await unlockOrders();}}}}}async function cancelOrders(){const _0x15a422=_0x4916b1;lastOrders[_0x15a422(0x216)](async _0x5c86f7=>{const _0x116e16=_0x15a422;try{const _0x2f28e2=await exchange[_0x116e16(0x15d)](_0x5c86f7[_0x116e16(0x244)],_0x5c86f7[_0x116e16(0x25e)]);}catch(_0x161055){if(_0x161055[_0x116e16(0x1c8)]()[_0x116e16(0x288)]('OrderNotFound')){}else await handleError(_0x161055,'cancelOrders()');}});}async function initCoinResults(){const _0x1ef2cc=_0x4916b1;let _0x1170d2=[];config[_0x1ef2cc(0x1a6)][_0x1ef2cc(0x216)](_0x11c5bd=>{const _0x3dc6f6=_0x1ef2cc;if(!_0x11c5bd['excluded']&&_0x11c5bd['coin']!=config[_0x3dc6f6(0x1ea)]){let _0x4de9b1=dbCoinResults[_0x3dc6f6(0x272)](_0x3dc6f6(0x263))['find']({'coin':_0x11c5bd[_0x3dc6f6(0x17a)]})[_0x3dc6f6(0x26d)]();if(!_0x4de9b1){const _0x56b3bf=currentCoins[_0x3dc6f6(0x23b)](_0x4711c2=>_0x4711c2['coin']==_0x11c5bd[_0x3dc6f6(0x17a)]),_0x3d9f2c=global[_0x3dc6f6(0x180)][noslash(_0x11c5bd[_0x3dc6f6(0x25e)])];let _0x44fa38=_0x56b3bf?_0x56b3bf['number']:null,_0xdad21e=_0x11c5bd[_0x3dc6f6(0x1e2)]?0x1/_0x3d9f2c:_0x3d9f2c,_0x13b0c9;config[_0x3dc6f6(0x1bb)][_0x3dc6f6(0x216)](_0x38870b=>{const _0x5e6dda=_0x3dc6f6;!_0x13b0c9&&(_0x13b0c9=_0x38870b[_0x5e6dda(0x16a)][_0x5e6dda(0x23b)](_0x2ddc8e=>_0x2ddc8e[_0x5e6dda(0x17a)]==_0x11c5bd[_0x5e6dda(0x17a)]),_0x13b0c9&&(_0x44fa38=_0x13b0c9[_0x5e6dda(0x23f)],_0xdad21e=_0x13b0c9[_0x5e6dda(0x226)]));}),_0x1170d2[_0x3dc6f6(0x193)]({'coin':_0x11c5bd[_0x3dc6f6(0x17a)],'number':_0x44fa38,'price':_0xdad21e});}}}),_0x1170d2[_0x1ef2cc(0x216)](_0x3a8e25=>{const _0xe2a9b7=_0x1ef2cc,_0x5cc196={'coin':_0x3a8e25[_0xe2a9b7(0x17a)],'number':_0x3a8e25[_0xe2a9b7(0x23f)],'breakeven':_0x3a8e25['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xe2a9b7(0x272)]('coins')['push'](_0x5cc196)[_0xe2a9b7(0x221)]();});}async function updateCoinResults(_0x464070,_0x5d8338=![]){const _0x3d7f1d=_0x4916b1;let _0x172a50,_0x5abece,_0x3c7c47,_0x13f7e1,_0x1152ef,_0x1f7df9,_0x232a3a=dbCoinResults['get'](_0x3d7f1d(0x263))[_0x3d7f1d(0x23b)]({'coin':_0x464070[_0x3d7f1d(0x17a)]})[_0x3d7f1d(0x26d)]();!_0x232a3a&&await initCoinResults();_0x464070[_0x3d7f1d(0x1e2)]&&(_0x1f7df9={'filled':_0x464070[_0x3d7f1d(0x218)]*_0x464070[_0x3d7f1d(0x226)],'amount':_0x464070[_0x3d7f1d(0x218)]*_0x464070[_0x3d7f1d(0x226)],'side':_0x464070['side']==_0x3d7f1d(0x167)?_0x3d7f1d(0x225):_0x3d7f1d(0x167),'price':0x1/_0x464070[_0x3d7f1d(0x226)]},_0x464070={..._0x464070,..._0x1f7df9});if(_0x5d8338)_0x5abece=_0x464070[_0x3d7f1d(0x172)]=='buy'?_0x232a3a[_0x3d7f1d(0x23f)]+_0x464070[_0x3d7f1d(0x218)]:_0x232a3a['number']-_0x464070[_0x3d7f1d(0x218)];else{const _0x458df7=currentCoins[_0x3d7f1d(0x23b)](_0x2c2b9a=>_0x2c2b9a[_0x3d7f1d(0x17a)]==_0x464070['coin']);_0x5abece=_0x458df7[_0x3d7f1d(0x23f)];}if(_0x464070['fee']&&_0x464070[_0x3d7f1d(0x1be)][_0x3d7f1d(0x1e0)]==config[_0x3d7f1d(0x1ea)])_0x172a50=_0x464070[_0x3d7f1d(0x1be)][_0x3d7f1d(0x1db)];else{if(_0x464070['fee']&&_0x464070['fee'][_0x3d7f1d(0x1e0)]==_0x3d7f1d(0x181)&&!_0x5d8338)_0x172a50=_0x464070[_0x3d7f1d(0x1be)][_0x3d7f1d(0x1db)]*global[_0x3d7f1d(0x180)][_0x3d7f1d(0x181)+config[_0x3d7f1d(0x1ea)]];else _0x172a50=defaultFee*_0x464070[_0x3d7f1d(0x218)]*_0x464070[_0x3d7f1d(0x226)];}_0x464070[_0x3d7f1d(0x172)]=='buy'?(_0x3c7c47=_0x5abece!=0x0?(_0x232a3a[_0x3d7f1d(0x261)]*_0x232a3a['number']+_0x464070[_0x3d7f1d(0x226)]*(_0x5abece-_0x232a3a[_0x3d7f1d(0x23f)])+_0x172a50)/_0x5abece:0x0,_0x13f7e1=_0x232a3a[_0x3d7f1d(0x235)]):(_0x3c7c47=_0x5abece!=0x0?(_0x232a3a['breakeven']*_0x232a3a[_0x3d7f1d(0x23f)]-_0x464070[_0x3d7f1d(0x226)]*(_0x232a3a[_0x3d7f1d(0x23f)]-_0x5abece)+_0x172a50)/_0x5abece:0x0,_0x13f7e1=_0x232a3a[_0x3d7f1d(0x235)]+(_0x464070[_0x3d7f1d(0x226)]-_0x232a3a[_0x3d7f1d(0x261)])*_0x464070['filled']);_0x1152ef=(_0x464070['price']-_0x3c7c47-_0x172a50/_0x464070[_0x3d7f1d(0x218)])*_0x5abece;let _0x15eb80={'coin':_0x464070[_0x3d7f1d(0x17a)],'number':_0x5abece,'breakeven':formatResult(_0x3c7c47,0x8),'realized':formatResult(_0x13f7e1,0x8),'unrealized':formatResult(_0x1152ef,0x8),'fees':formatResult(_0x232a3a[_0x3d7f1d(0x166)]+_0x172a50,0x8),'sells':_0x464070[_0x3d7f1d(0x172)]==_0x3d7f1d(0x167)?_0x232a3a[_0x3d7f1d(0x246)]+0x1:_0x232a3a['sells'],'buys':_0x464070[_0x3d7f1d(0x172)]==_0x3d7f1d(0x225)?_0x232a3a[_0x3d7f1d(0x18c)]+0x1:_0x232a3a[_0x3d7f1d(0x18c)]};dbCoinResults[_0x3d7f1d(0x272)](_0x3d7f1d(0x263))[_0x3d7f1d(0x23b)]({'coin':_0x464070['coin']})[_0x3d7f1d(0x1d7)](_0x15eb80)[_0x3d7f1d(0x221)]();if(!_0x5d8338){if(_0x464070[_0x3d7f1d(0x1be)]&&_0x464070[_0x3d7f1d(0x1be)]['currency']==_0x3d7f1d(0x181)){const _0x35e23e=currentCoins['find'](_0x1e4cd4=>_0x1e4cd4['coin']=='BNB');if(_0x35e23e){let _0xb84d81=dbCoinResults[_0x3d7f1d(0x272)](_0x3d7f1d(0x263))[_0x3d7f1d(0x23b)]({'coin':'BNB'})[_0x3d7f1d(0x26d)]();_0x15eb80={..._0xb84d81,'number':_0x35e23e[_0x3d7f1d(0x23f)]},dbCoinResults['get'](_0x3d7f1d(0x263))[_0x3d7f1d(0x23b)]({'coin':_0x3d7f1d(0x181)})[_0x3d7f1d(0x1d7)](_0x15eb80)[_0x3d7f1d(0x221)]();}}}}async function placeOrder(_0x50dea7){const _0xc634bb=_0x4916b1,_0x1dbe21=config[_0xc634bb(0x274)]=='market'?'market':_0xc634bb(0x282);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x31d7e9 of _0x50dea7){let _0x46eca9,_0x170888,_0x208065,_0x5d9d1f,_0x3ecd2b,_0x29b06f=_0x31d7e9[_0xc634bb(0x25e)];try{const _0x28fdc5=await exchange[_0xc634bb(0x289)]([_0x29b06f]),_0x49898a=_0x28fdc5[_0x29b06f];_0x46eca9=_0x31d7e9['reverse']?0x1/_0x31d7e9[_0xc634bb(0x1f0)]:_0x31d7e9[_0xc634bb(0x1f0)],_0x170888=_0x49898a[_0xc634bb(0x19a)],_0x208065=_0x49898a[_0xc634bb(0x1cc)];_0x31d7e9['reverse']?(_0x5d9d1f=_0x31d7e9['side']==_0xc634bb(0x225)?_0xc634bb(0x167):_0xc634bb(0x225),_0x3ecd2b=Math[_0xc634bb(0x222)](_0x31d7e9[_0xc634bb(0x184)])/_0x46eca9):(_0x5d9d1f=_0x31d7e9[_0xc634bb(0x172)],_0x3ecd2b=Math[_0xc634bb(0x222)](_0x31d7e9['trade']));_0x1dbe21==_0xc634bb(0x282)&&(config[_0xc634bb(0x274)]=='limit-high'&&(_0x46eca9=_0x5d9d1f=='buy'?_0x170888:_0x208065),config[_0xc634bb(0x274)]=='limit-low'&&(_0x46eca9=_0x5d9d1f=='buy'?_0x208065:_0x170888));_0x3ecd2b=formatResult(_0x3ecd2b,0x8),_0x46eca9=formatResult(_0x46eca9,0x8);const _0x562599=await exchange['createOrder'](_0x29b06f,_0x1dbe21,_0x5d9d1f,_0x3ecd2b,_0x46eca9);lastOrders['push']({'orderId':_0x562599['id'],'symbol':_0x29b06f,'coin':_0x31d7e9['coin'],'side':_0x5d9d1f,'reverse':_0x31d7e9[_0xc634bb(0x1e2)],'amount':_0x562599[_0xc634bb(0x230)],'filled':0x0,'price':_0x562599[_0xc634bb(0x226)],'fee':_0x562599[_0xc634bb(0x1be)]});const _0x2f95cb=_0x5d9d1f==_0xc634bb(0x167)?config[_0xc634bb(0x1fe)]?String[_0xc634bb(0x1b7)]('0x'+config[_0xc634bb(0x1fe)])+'\x20':'':config['emojibuy']?String[_0xc634bb(0x1b7)]('0x'+config['emojibuy'])+'\x20':'',_0x28d607=_0x1dbe21==_0xc634bb(0x243)?_0xc634bb(0x279):config[_0xc634bb(0x274)]==_0xc634bb(0x1b8)?_0xc634bb(0x179):_0xc634bb(0x1de);if(_0x1dbe21==_0xc634bb(0x243))logHistory(_0xc634bb(0x202),''+_0x2f95cb+_0x28d607+'\x20order:\x20'+_0x29b06f+'\x20'+_0x5d9d1f+'\x20#'+formatResult(_0x562599[_0xc634bb(0x218)],0x8)+'\x20@'+formatResult(_0x562599[_0xc634bb(0x226)],0x8));else logHistory(_0xc634bb(0x202),''+_0x2f95cb+_0x28d607+_0xc634bb(0x233)+_0x29b06f+'\x20'+_0x5d9d1f+'\x20#'+formatResult(_0x562599[_0xc634bb(0x230)],0x8)+'\x20@'+formatResult(_0x562599[_0xc634bb(0x226)],0x8));let _0x286eaa=currentCoins[_0xc634bb(0x23b)](_0x3bd73b=>_0x3bd73b[_0xc634bb(0x17a)]==_0x31d7e9[_0xc634bb(0x17a)]);_0x286eaa['order']=!![];if(config[_0xc634bb(0x1bf)]!=0x0){let _0x5225cc=null;if(cooldownTracker[_0xc634bb(0x188)]==config[_0xc634bb(0x1bf)]-0x1)_0x5225cc=cooldownTracker[_0xc634bb(0x1e5)]();const _0x57e59d=getTimeStamp();cooldownTracker['push'](_0x57e59d);if(_0x5225cc){const _0x16e294=fns['differenceInSeconds'](new Date(_0x57e59d),new Date(_0x5225cc));if(_0x16e294<cooldownInterval){logHistory(_0xc634bb(0x190),_0xc634bb(0x1d0)+config['cooldown']+_0xc634bb(0x1ae)+cooldownInterval/0x3c+_0xc634bb(0x254)+cooldownPeriod/(0xe10*0x3e8)+_0xc634bb(0x248)),coolingDown=!![];break;}}}}catch(_0x4508d8){if(_0x4508d8[_0xc634bb(0x1c8)]()[_0xc634bb(0x288)](_0xc634bb(0x24a)))logHistory(_0xc634bb(0x190),_0xc634bb(0x286)+_0x29b06f);else{if(_0x4508d8[_0xc634bb(0x1c8)]()['includes']('Invalid\x20quantity'))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x29b06f);else await handleError(_0x4508d8,_0xc634bb(0x1a5),_0x29b06f);}}}allOrdersPlaced=!![];if(lastOrders[_0xc634bb(0x188)]!=0x0){lockOrders=!![],validateOrdersState=_0xc634bb(0x212),setTimeout(function(){validateOrders();},0x1388);const _0x541923=config['ordertype']==_0xc634bb(0x243)?validateOrderTimeout*0x3c*0x3e8:config[_0xc634bb(0x176)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x541923);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xc634bb(0x174),_0xc634bb(0x1d3)));}else{if(coolingDown)!config[_0xc634bb(0x163)]&&logHistory(_0xc634bb(0x190),_0xc634bb(0x287));else lockOrders&&(!config[_0xc634bb(0x163)]&&(config['ordertype']==_0xc634bb(0x243)?logHistory('error',_0xc634bb(0x253)):logHistory('error',_0xc634bb(0x25f))));}}function restoreOrders(){const _0x50c303=_0x4916b1;let _0x41ca43;lockOrders=!![],validateOrdersState=_0x50c303(0x1c0),currentCoins[_0x50c303(0x216)](_0x29a0fd=>{const _0x15a90e=_0x50c303,_0x1c832e=allOpenOrders[_0x15a90e(0x23b)](_0x191870=>_0x191870[_0x15a90e(0x25e)]==_0x29a0fd['symbol']);_0x1c832e&&(lastOrders[_0x15a90e(0x193)]({'orderId':_0x1c832e['id'],'symbol':_0x29a0fd['symbol'],'coin':_0x29a0fd[_0x15a90e(0x17a)],'side':_0x1c832e[_0x15a90e(0x172)],'reverse':_0x29a0fd[_0x15a90e(0x1e2)],'amount':_0x1c832e[_0x15a90e(0x230)],'filled':0x0,'price':_0x1c832e[_0x15a90e(0x226)],'fee':_0x1c832e['fee']}),_0x29a0fd[_0x15a90e(0x202)]=!![],_0x41ca43=_0x1c832e['timestamp']);});const _0x4aa10f=new Date()['getTime'](),_0x3b5a29=config[_0x50c303(0x274)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x41ca43+_0x3b5a29>_0x4aa10f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xc1a57d=_0x50c303;validateOrders(_0xc1a57d(0x1eb));},_0x41ca43+_0x3b5a29-_0x4aa10f);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x11efdb=_0x4916b1,_0x3269f3=[_0x11efdb(0x1e9),_0x11efdb(0x21b),_0x11efdb(0x28d)],_0x34c9a4=_0x3269f3[_0x11efdb(0x288)](config[_0x11efdb(0x1ea)])?0x2:0x8;let _0x557625='';if(config[_0x11efdb(0x183)])_0x557625=config[_0x11efdb(0x27a)]+_0x11efdb(0x18a);else _0x557625='Bot\x20'+botID+'\x20portfolio:\x20\x0a\x0a';_0x557625+=_0x11efdb(0x23a),_0x557625+=_0x11efdb(0x1a4),_0x557625+='-------------------------------\x0a',currentCoins[_0x11efdb(0x216)](_0x572222=>{const _0x25f50a=_0x11efdb;_0x557625+=_0x572222[_0x25f50a(0x17a)]['padEnd'](0x7)+'|\x20'+formatPad(_0x572222[_0x25f50a(0x252)],0x2,0x6)+'|\x20'+formatPad(_0x572222[_0x25f50a(0x276)],0x2,0x6)+'|\x20'+formatPad(_0x572222[_0x25f50a(0x209)]*0x64,0x2,0x6)+'\x0a';}),_0x557625+=_0x11efdb(0x1cd),process[_0x11efdb(0x23d)]({'telegrammsg':_0x557625},_0x2aa5f5=>{});}function formatPad(_0x4079a2,_0x3e0c3b,_0x277068){const _0x5c88be=_0x4916b1,_0x51309a=formatResultString(_0x4079a2,_0x3e0c3b);return _0x51309a?_0x51309a[_0x5c88be(0x198)](_0x277068):''['padStart'](_0x277068);}function logHistory(_0xedbda7,_0x1ce260,_0xbee12=''){const _0x34da63=_0x4916b1;let _0x444145={'time':getTimeStamp(),'type':_0xedbda7,'event':_0x1ce260};dbLogs[_0x34da63(0x272)](_0x34da63(0x224))['push'](_0x444145)['write']();if(_0xbee12=='')_0xbee12=_0x1ce260;proxyEmit(_0x34da63(0x258),{'log':_0x444145,'summary':_0xbee12}),process[_0x34da63(0x23d)]({'telegram':{..._0x444145,'botname':config[_0x34da63(0x27a)],'showname':config['showname']}},_0x4ac300=>{}),logging(''+_0x444145[_0x34da63(0x258)]);}function emitHistory(_0xbbf247={}){const _0x1219ca=_0x4916b1;Object['keys'](_0xbbf247)[_0x1219ca(0x188)]==0x0&&(_0xbbf247={'type':['order',_0x1219ca(0x258)],'event':'','page':0x1});if(_0xbbf247[_0x1219ca(0x1fc)][_0x1219ca(0x288)](_0x1219ca(0x258)))_0xbbf247['type'][_0x1219ca(0x22c)](_0xbbf247[_0x1219ca(0x1fc)][_0x1219ca(0x1fb)]('event'),0x1,_0x1219ca(0x190),_0x1219ca(0x174));if(dbLogs['has'](_0x1219ca(0x224))[_0x1219ca(0x26d)]()){let _0x536860=dbLogs[_0x1219ca(0x272)](_0x1219ca(0x224))[_0x1219ca(0x211)](_0x38d9cd=>{const _0x579687=_0x1219ca;if(_0xbbf247[_0x579687(0x1fc)]['length']==0x0)return![];else return _0xbbf247['type'][_0x579687(0x288)](_0x38d9cd[_0x579687(0x1fc)]);})[_0x1219ca(0x211)](_0xf1b5fd=>{const _0x2f8270=_0x1219ca;if(_0xbbf247['event']=='')return!![];else return _0xf1b5fd[_0x2f8270(0x258)]['toLowerCase']()[_0x2f8270(0x288)](_0xbbf247[_0x2f8270(0x258)][_0x2f8270(0x17b)]());})['sortBy'](_0x1219ca(0x1ec)),_0x3c1d0f=_0x536860[_0x1219ca(0x26d)]()[_0x1219ca(0x188)];_0x536860=_0x536860['reverse']()[_0x1219ca(0x1e1)]((_0xbbf247[_0x1219ca(0x26f)]-0x1)*logPageSize,_0xbbf247[_0x1219ca(0x26f)]*logPageSize-0x1)['reverse']()[_0x1219ca(0x26d)](),proxyEmit(_0x1219ca(0x210),{'logs':_0x536860,'total':_0x3c1d0f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1155ba){const _0x1cfeb9=_0x4916b1;if(dbLogs[_0x1cfeb9(0x1da)]('logs')[_0x1cfeb9(0x26d)]()){const _0x4d014c=dbLogs[_0x1cfeb9(0x272)](_0x1cfeb9(0x224))[_0x1cfeb9(0x25a)](_0x1cfeb9(0x1ec))[_0x1cfeb9(0x211)](_0x1a1a66=>{const _0x1b2759=_0x1cfeb9;return _0x1a1a66[_0x1b2759(0x1fc)]==_0x1b2759(0x202);})['value']();dbLogs[_0x1cfeb9(0x272)]('logs')[_0x1cfeb9(0x186)]()['write'](),dbLogs[_0x1cfeb9(0x272)](_0x1cfeb9(0x224))['assign'](_0x4d014c)['write'](),emitHistory(_0x1155ba);}}async function pauseBot(_0xff3987=''){const _0x2a44cf=_0x4916b1,_0x5f3791=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x5f3791-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x2a44cf(0x23d)]({'stop':_0x2a44cf(0x1f6)},_0x40898a=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x2a44cf(0x22b)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0xff3987)_0xff3987+='\x20|\x20';logHistory(_0x2a44cf(0x190),_0xff3987+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x2a44cf(0x191)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0xe9432a=_0x4916b1;process[_0xe9432a(0x23d)]({'stop':_0xe9432a(0x27d)},_0xf1068a=>{}),await sleep(0x7d0);}async function handleError(_0x4c5965,_0x519c2a,_0x4d0245=''){const _0x2b6ea0=_0x4916b1;if(_0x4c5965[_0x2b6ea0(0x1c8)]()['includes'](_0x2b6ea0(0x22d)))await pauseBot(_0x2b6ea0(0x21e));else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()['includes']('ExchangeNotAvailable'))await pauseBot(_0x2b6ea0(0x1d2));else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()[_0x2b6ea0(0x288)](_0x2b6ea0(0x21f)))await pauseBot(_0x2b6ea0(0x1a3));else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()[_0x2b6ea0(0x288)]('API-key\x20format\x20invalid'))logHistory('error',_0x519c2a+_0x2b6ea0(0x1f7)),logHistory(_0x2b6ea0(0x190),_0x2b6ea0(0x160)),await killBot();else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()[_0x2b6ea0(0x288)](_0x2b6ea0(0x1c1)))logHistory(_0x2b6ea0(0x190),_0x519c2a+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x2b6ea0(0x190),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()[_0x2b6ea0(0x288)](_0x2b6ea0(0x251)))logHistory(_0x2b6ea0(0x190),_0x519c2a+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x2b6ea0(0x190),_0x2b6ea0(0x160)),await killBot();else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()['includes'](_0x2b6ea0(0x175)))logHistory(_0x2b6ea0(0x190),_0x519c2a+_0x2b6ea0(0x1d1)),logHistory(_0x2b6ea0(0x190),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4c5965[_0x2b6ea0(0x1c8)]()[_0x2b6ea0(0x288)](_0x2b6ea0(0x1a9)))await pauseBot(_0x2b6ea0(0x1e7)),process[_0x2b6ea0(0x23d)]({'stop':_0x2b6ea0(0x1f6)},_0xfac138=>{});else _0x4c5965[_0x2b6ea0(0x1c8)]()['includes'](_0x2b6ea0(0x1c9))?logHistory(_0x2b6ea0(0x190),_0x519c2a+_0x2b6ea0(0x162)+_0x4d0245):(logging(_0x519c2a+'\x20|\x20Error\x20details:\x20',_0x4c5965),await pauseBot(_0x2b6ea0(0x247)));}}}}}}}}function formatResult(_0x48e21a,_0x32315e){const _0x1067a0=_0x4916b1;return parseFloat(_0x48e21a[_0x1067a0(0x1cf)](_0x32315e));}function formatResultTruncate(_0x40b79a,_0xf52ee4){const _0xfa586b=_0x4916b1;let _0x48169c=formatResultString(_0x40b79a,0xa),_0x258ab4=_0x48169c[_0xfa586b(0x1fb)]('.');return _0x258ab4!=-0x1&&(_0x48169c=_0x48169c['slice'](0x0,_0x258ab4+_0xf52ee4+0x1)),Number(_0x48169c);}function _0x59e7(_0x11e3fb,_0x4d4fc3){const _0x41a83e=_0x28e8();return _0x59e7=function(_0x438be2,_0x942a6f){_0x438be2=_0x438be2-0x15d;let _0x28e847=_0x41a83e[_0x438be2];return _0x28e847;},_0x59e7(_0x11e3fb,_0x4d4fc3);}function formatResultString(_0x32e50b,_0x1448dd){const _0x2c7112=_0x4916b1;let _0x4a2241;if(!(''+_0x32e50b)[_0x2c7112(0x288)]('e'))_0x4a2241=+(Math[_0x2c7112(0x1ef)](_0x32e50b+'e+'+_0x1448dd)+'e-'+_0x1448dd);else{let _0x532435=(''+_0x32e50b)[_0x2c7112(0x241)]('e'),_0x4ac0d6='';+_0x532435[0x1]+_0x1448dd>0x0&&(_0x4ac0d6='+'),_0x4a2241=+(Math[_0x2c7112(0x1ef)](+_0x532435[0x0]+'e'+_0x4ac0d6+(+_0x532435[0x1]+_0x1448dd))+'e-'+_0x1448dd);}return Number(_0x4a2241)[_0x2c7112(0x1cf)](_0x1448dd);}function logging(_0x3022a2,_0x5a7b43=''){const _0x3f1067=_0x4916b1;if(config['showname'])console[_0x3f1067(0x17e)](getTimeStamp()+':\x20'+config[_0x3f1067(0x27a)]+'\x20>\x20'+_0x3022a2,_0x5a7b43);else console['log'](getTimeStamp()+_0x3f1067(0x207)+botID+_0x3f1067(0x292)+_0x3022a2,_0x5a7b43);}function getServerTime(){const _0x4a95ec=_0x4916b1,_0x4f55c7=new Date();return _0x4f55c7[_0x4a95ec(0x269)]()+'/'+(_0x4f55c7['getMonth']()+0x1)[_0x4a95ec(0x1c8)]()[_0x4a95ec(0x198)](0x2,'0')+'/'+_0x4f55c7['getDate']()[_0x4a95ec(0x1c8)]()[_0x4a95ec(0x198)](0x2,'0')+'\x20'+_0x4f55c7[_0x4a95ec(0x1dc)]()[_0x4a95ec(0x1c8)]()['padStart'](0x2,'0')+':'+_0x4f55c7[_0x4a95ec(0x1df)]()[_0x4a95ec(0x1c8)]()[_0x4a95ec(0x198)](0x2,'0')+':'+_0x4f55c7[_0x4a95ec(0x291)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x39fac3=_0x4916b1,_0x31107f=shiftedTime();return _0x31107f[_0x39fac3(0x269)]()+'/'+(_0x31107f[_0x39fac3(0x238)]()+0x1)['toString']()[_0x39fac3(0x198)](0x2,'0')+'/'+_0x31107f['getDate']()[_0x39fac3(0x1c8)]()[_0x39fac3(0x198)](0x2,'0')+'\x20'+_0x31107f[_0x39fac3(0x1dc)]()[_0x39fac3(0x1c8)]()['padStart'](0x2,'0')+':'+_0x31107f[_0x39fac3(0x1df)]()['toString']()[_0x39fac3(0x198)](0x2,'0')+':'+_0x31107f[_0x39fac3(0x291)]()[_0x39fac3(0x1c8)]()[_0x39fac3(0x198)](0x2,'0');}function getDate(){const _0x1a1839=_0x4916b1,_0x1c5e60=shiftedTime();return _0x1c5e60[_0x1a1839(0x269)]()+'/'+(_0x1c5e60[_0x1a1839(0x238)]()+0x1)[_0x1a1839(0x1c8)]()[_0x1a1839(0x198)](0x2,'0')+'/'+_0x1c5e60[_0x1a1839(0x1b6)]()[_0x1a1839(0x1c8)]()[_0x1a1839(0x198)](0x2,'0');}function getHour(){const _0xe6b1d9=_0x4916b1,_0x54711f=shiftedTime();return _0x54711f[_0xe6b1d9(0x1dc)]()[_0xe6b1d9(0x1c8)]()[_0xe6b1d9(0x198)](0x2,'0');}function sleep(_0x2b340c){return new Promise(_0x1ddc7d=>setTimeout(_0x1ddc7d,_0x2b340c));}function shiftedTime(){const _0x5e84c0=_0x4916b1,_0x541bff=new Date();let _0x5988c9=_0x541bff;if(config&&config[_0x5e84c0(0x1c4)]!==0x0)_0x5988c9=fns[_0x5e84c0(0x195)](_0x541bff,{'hours':config['timeshift']});return _0x5988c9;}