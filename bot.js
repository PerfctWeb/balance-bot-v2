const _0x393299=_0x5109;(function(_0x4a25c3,_0xbec2d7){const _0x4d6dea=_0x5109,_0x3f59c9=_0x4a25c3();while(!![]){try{const _0x41d558=parseInt(_0x4d6dea(0x27a))/0x1+parseInt(_0x4d6dea(0x1e9))/0x2+parseInt(_0x4d6dea(0x248))/0x3*(parseInt(_0x4d6dea(0x222))/0x4)+parseInt(_0x4d6dea(0x2b2))/0x5+parseInt(_0x4d6dea(0x279))/0x6*(-parseInt(_0x4d6dea(0x12f))/0x7)+-parseInt(_0x4d6dea(0x12b))/0x8*(-parseInt(_0x4d6dea(0x193))/0x9)+-parseInt(_0x4d6dea(0x2a8))/0xa;if(_0x41d558===_0xbec2d7)break;else _0x3f59c9['push'](_0x3f59c9['shift']());}catch(_0x3f59d7){_0x3f59c9['push'](_0x3f59c9['shift']());}}}(_0x1686,0xcb128));const _0x5a23ae=function(){let _0x438085=!![];return function(_0x2ffcdc,_0x3ed405){const _0x151329=_0x438085?function(){const _0x16ac9a=_0x5109;if(_0x3ed405){const _0x4db3dc=_0x3ed405[_0x16ac9a(0x178)](_0x2ffcdc,arguments);return _0x3ed405=null,_0x4db3dc;}}:function(){};return _0x438085=![],_0x151329;};}(),_0x4c2e51=_0x5a23ae(this,function(){const _0x2efe7e=_0x5109;return _0x4c2e51['toString']()[_0x2efe7e(0x2a7)](_0x2efe7e(0x2b7))[_0x2efe7e(0x29d)]()[_0x2efe7e(0x285)](_0x4c2e51)[_0x2efe7e(0x2a7)](_0x2efe7e(0x2b7));});_0x4c2e51();'use strict';const ccxt=require(_0x393299(0x228)),low=require('lowdb'),FileSync=require(_0x393299(0x18c)),fs=require('fs'),fns=require(_0x393299(0x28d)),Crypt=require(_0x393299(0x2a6))[_0x393299(0x176)],util=require('util'),argv=require('yargs/yargs')(process['argv'][_0x393299(0x171)](0x2))[_0x393299(0x225)],path=require(_0x393299(0x2af));let exchange;global[_0x393299(0x19a)]={},global[_0x393299(0x1cb)]={};const usdBasecoins=['USD','BUSD',_0x393299(0x18e),_0x393299(0x25c),_0x393299(0x170),_0x393299(0x278)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x393299(0x1f3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x393299(0x1a1))[_0x393299(0x2b3)],botID=process[_0x393299(0x225)][0x2]||_0x393299(0x233),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x393299(0x1ce)]('Error:\x20Invalid\x20argument\x20'+botID+_0x393299(0x1c4)),killBot());const userID=process[_0x393299(0x225)][0x3]||'',configpath=userID?_0x393299(0x242)+userID+'/':_0x393299(0x242),logspath=userID?'./logs/'+userID+'/':_0x393299(0x18a),loggerfile=fs[_0x393299(0x254)](logspath+_0x393299(0x156),{'flags':'a'});!fs[_0x393299(0x26a)](configpath)&&fs[_0x393299(0x220)](configpath);!fs[_0x393299(0x26a)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x393299(0x199)+botID+_0x393299(0x17a),logfile=configpath+_0x393299(0x199)+botID+_0x393299(0x263),performancefile=configpath+_0x393299(0x199)+botID+_0x393299(0x218),coinresultsfile=configpath+_0x393299(0x199)+botID+_0x393299(0x244),settingsfile=configpath+_0x393299(0x22e),securefile=configpath+_0x393299(0x15b),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x393299(0x257)]({'data':[],'version':serverversion})[_0x393299(0x2b4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x393299(0x257)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x393299(0x2b4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x393299(0x200),'rsaStandard':_0x393299(0x19b)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x27061b=>{const _0xbb30fa=_0x393299;console[_0xbb30fa(0x1ce)](_0x27061b);},'simple':_0x52a9da=>{const _0x1eb32c=_0x393299;console[_0x1eb32c(0x1ce)](_0x52a9da),loggerfile[_0x1eb32c(0x2b4)](util['format'](_0x52a9da)+'\x0a');},'full':async(_0x4e03d0,_0x2da0b0='')=>{const _0x4a1274=_0x393299;let _0xc43835;if(config[_0x4a1274(0x28e)])_0xc43835=getTimeStamp()+':\x20'+config[_0x4a1274(0x1e6)]+_0x4a1274(0x22d)+_0x4e03d0;else _0xc43835=getTimeStamp()+':\x20Bot\x20'+botID+_0x4a1274(0x22d)+_0x4e03d0;console[_0x4a1274(0x1ce)](_0xc43835),loggerfile['write'](util[_0x4a1274(0x12c)](_0xc43835)+'\x0a'),_0x2da0b0&&(console[_0x4a1274(0x1ce)](_0x2da0b0),loggerfile[_0x4a1274(0x2b4)](util[_0x4a1274(0x12c)](_0x2da0b0)+'\x0a'));},'debug':async(_0x3e22f2,_0x5e7758='')=>{const _0xc3b121=_0x393299;let _0x3c70b3;if(config['showname'])_0x3c70b3=getTimeStamp()+':\x20'+config[_0xc3b121(0x1e6)]+'\x20>\x20[DEBUG]\x20'+_0x3e22f2;else _0x3c70b3=getTimeStamp()+_0xc3b121(0x1fa)+botID+'\x20>\x20[DEBUG]\x20'+_0x3e22f2;if(debugging)console[_0xc3b121(0x1ce)](_0x3c70b3);loggerfile['write'](util['format'](_0x3c70b3)+'\x0a');if(_0x5e7758){if(debugging)console[_0xc3b121(0x1ce)](_0x5e7758);loggerfile[_0xc3b121(0x2b4)](util[_0xc3b121(0x12c)](_0x5e7758)+'\x0a');}}};process['on'](_0x393299(0x1f7),function(_0x1c118a){const _0x52e691=_0x393299;logHistory(_0x52e691(0x2ac),_0x52e691(0x273)),logger[_0x52e691(0x24e)]('Uncaught\x20Exception:',_0x1c118a);});settings[_0x393299(0x19d)]!=config[_0x393299(0x19d)]&&updateTimeshift(settings[_0x393299(0x19d)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x393299(0x219)]);process[_0x393299(0x16b)]({'started':_0x393299(0x240)},_0x23d194=>{}),initializeProcessListeners();function _0x5109(_0x12d7cf,_0x52495a){const _0x3ae631=_0x1686();return _0x5109=function(_0x4c2e51,_0x5a23ae){_0x4c2e51=_0x4c2e51-0x127;let _0x168631=_0x3ae631[_0x4c2e51];return _0x168631;},_0x5109(_0x12d7cf,_0x52495a);}function proxyEmit(_0x4f0d15,_0x22abb2=null){const _0x2fbbcf=_0x393299;process[_0x2fbbcf(0x16b)]({'function':_0x4f0d15,'args':_0x22abb2},_0x116142=>{});}function initializeProcessListeners(){const _0x549c55=_0x393299;process['on'](_0x549c55(0x155),_0x54df5f=>{const _0x55abbb=_0x549c55;switch(Object[_0x55abbb(0x282)](_0x54df5f)[0x0]){case _0x55abbb(0x19d):_0x54df5f[_0x55abbb(0x19d)]!=undefined&&(settings[_0x55abbb(0x19d)]=_0x54df5f[_0x55abbb(0x19d)],updateTimeshift(settings[_0x55abbb(0x19d)]));break;case _0x55abbb(0x219):_0x54df5f[_0x55abbb(0x219)]!=undefined&&(settings[_0x55abbb(0x219)]=_0x54df5f[_0x55abbb(0x219)],updateOnepagemode(settings[_0x55abbb(0x219)]));break;case _0x55abbb(0x160):_0x54df5f[_0x55abbb(0x160)]!=undefined&&(bots=JSON['parse'](_0x54df5f[_0x55abbb(0x160)]),proxyEmit('bots',bots));break;case _0x55abbb(0x13e):switch(_0x54df5f[_0x55abbb(0x13e)]){case _0x55abbb(0x198):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x55abbb(0x23a):emitHistory(_0x54df5f[_0x55abbb(0x26c)]);break;case _0x55abbb(0x1a6):deleteHistoryAlerts(_0x54df5f['args']);break;case _0x55abbb(0x265):getPortfolio(_0x54df5f[_0x55abbb(0x26c)]);break;case _0x55abbb(0x1e3):storeConfiguration(_0x54df5f[_0x55abbb(0x26c)]);break;case _0x55abbb(0x185):storeHeadless(_0x54df5f[_0x55abbb(0x26c)]);break;case _0x55abbb(0x262):storeFiat(_0x54df5f[_0x55abbb(0x26c)]);break;case _0x55abbb(0x25e):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x54df5f[_0x55abbb(0x26c)]);break;case'cancelLoading':cancelLoading();break;case _0x55abbb(0x16e):showConfig();break;case _0x55abbb(0x146):sendMetricsTelegram();break;case _0x55abbb(0x294):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x46651e=null,_0x3c1ecc=![]){const _0x3c15e2=_0x393299;logger[_0x3c15e2(0x24e)](_0x3c15e2(0x23e)+(_0x46651e&&_0x46651e['length']>0x0?'additional\x20symbols\x20'+_0x46651e['join'](','):_0x3c15e2(0x28b))+'\x20|\x20'+(_0x3c1ecc?_0x3c15e2(0x1be):_0x3c15e2(0x239))+'\x20|\x20exchange:\x20'+config[_0x3c15e2(0x250)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3c1ecc)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3c15e2(0x1ec)]!=''&&config[_0x3c15e2(0x1ec)]!='***'){if(_0x3c1ecc){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x36427a){handleErrorNoStop(_0x36427a,_0x3c15e2(0x13c));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x46651e);const _0x23b93f=await getCoins();[currentCoins,currentCoinsAll]=_0x23b93f,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3c15e2(0x197)]==0x0&&allOpenOrders[_0x3c15e2(0x197)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x45758f=_0x393299;exchangeStopped=!![],await exchange[_0x45758f(0x153)]();}async function reloadExchange(){const _0x1b6ea3=_0x393299;logger['debug'](_0x1b6ea3(0x177));while(lockOrders!=ORDERS[_0x1b6ea3(0x1b1)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1b6ea3(0x24e)](_0x1b6ea3(0x208)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x411cab=config[_0x393299(0x250)],_0x11d7dd=config[_0x393299(0x1ec)],_0x38ac42=config[_0x393299(0x1a5)],_0x234834=config[_0x393299(0x24b)]){const _0x46b799=_0x393299;exchange&&await stopExchange();!supportedExchanges()[_0x46b799(0x1b4)](_0x411cab)&&(logHistory(_0x46b799(0x2ac),_0x46b799(0x284)+_0x411cab+_0x46b799(0x266)),killBot());const _0x5cc7f1=ccxt[_0x46b799(0x221)][_0x411cab['toLowerCase']()];exchange=new _0x5cc7f1({'apiKey':_0x11d7dd,'secret':_0x38ac42,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x234834)exchange['password']=_0x234834;}function setStableCoins(){const _0x2ca9b6=_0x393299;let _0x14eb61=config[_0x2ca9b6(0x16f)]==_0x2ca9b6(0x17e)?'ETH':_0x2ca9b6(0x15e),_0x4cb494=!allSymbols[_0x2ca9b6(0x1b4)](_0x14eb61+'/USD')?_0x2ca9b6(0x25c):'USD',_0x1358c6=!allSymbols[_0x2ca9b6(0x1b4)](_0x14eb61+_0x2ca9b6(0x202))?_0x4cb494:_0x2ca9b6(0x133);stablecoins={'eur':{'coin':''+_0x14eb61+_0x1358c6,'symbol':_0x14eb61+'/'+_0x1358c6},'usd':{'coin':''+_0x14eb61+_0x4cb494,'symbol':_0x14eb61+'/'+_0x4cb494}};}async function initwsCcxt(_0x59dc7b){const _0x514dfa=_0x393299;_0x59dc7b==null&&(_0x59dc7b=[],config[_0x514dfa(0x1f2)][_0x514dfa(0x145)](_0x44a309=>{const _0x53cbc3=_0x514dfa;if(!_0x44a309[_0x53cbc3(0x204)]&&_0x44a309[_0x53cbc3(0x1c7)]!=config[_0x53cbc3(0x16f)])_0x59dc7b['push'](_0x44a309[_0x53cbc3(0x129)]);}));if(!_0x59dc7b[_0x514dfa(0x1b4)](stablecoins[_0x514dfa(0x1ee)]['symbol']))_0x59dc7b[_0x514dfa(0x1c3)](stablecoins[_0x514dfa(0x1ee)]['symbol']);if(!_0x59dc7b[_0x514dfa(0x1b4)](stablecoins[_0x514dfa(0x23f)][_0x514dfa(0x129)]))_0x59dc7b[_0x514dfa(0x1c3)](stablecoins[_0x514dfa(0x23f)][_0x514dfa(0x129)]);if(config[_0x514dfa(0x250)][_0x514dfa(0x24f)](_0x514dfa(0x2a0))){if(!_0x59dc7b[_0x514dfa(0x1b4)]('BNB/'+config[_0x514dfa(0x16f)]))_0x59dc7b[_0x514dfa(0x1c3)](_0x514dfa(0x14b)+config[_0x514dfa(0x16f)]);}loadCoins(_0x59dc7b);const _0x347616=async _0x569377=>{const _0x3dd027=_0x514dfa,_0x484116=await exchange[_0x3dd027(0x217)](_0x569377);global['ticker'][noslash(_0x484116[_0x3dd027(0x129)])]=_0x484116[_0x3dd027(0x194)];while(!![]){if(!botPaused)try{const _0x13d2cb=await exchange[_0x3dd027(0x137)](_0x569377);global[_0x3dd027(0x19a)][noslash(_0x13d2cb[0x0][_0x3dd027(0x129)])]=_0x13d2cb[0x0][_0x3dd027(0x231)],await sleep(0x3e8);}catch(_0x358831){if(!exchangeStopped)await handleError(_0x358831,_0x3dd027(0x137),_0x569377);}else await sleep(0x64);}},_0x5dcca6=async _0x1f48d1=>{const _0x45197e=_0x514dfa;while(!![]){if(!botPaused)try{const _0x5a9104=await exchange['fetchTicker'](_0x1f48d1);global[_0x45197e(0x1cb)][_0x5a9104[_0x45197e(0x129)]]=_0x5a9104[_0x45197e(0x14f)],await sleep(0x3c*0x3e8);}catch(_0x102feb){if(!exchangeStopped)await handleError(_0x102feb,_0x45197e(0x1a9),_0x1f48d1);}else await sleep(0x64);}},_0x43160e=async()=>{const _0x2f89b7=_0x514dfa;while(!![]){if(!botPaused)try{const _0x129917=await exchange['watchOrders']();_0x129917[_0x2f89b7(0x145)](_0x3cd950=>{updateNumberCoinsCcxt(_0x3cd950);});}catch(_0x1eb71e){if(!exchangeStopped)await handleError(_0x1eb71e,_0x2f89b7(0x26d));}else await sleep(0x64);}};_0x59dc7b[_0x514dfa(0x145)](_0x2321ea=>{_0x347616(_0x2321ea),_0x5dcca6(_0x2321ea);}),!wsEventsSet&&(wsEventsSet=!![],_0x43160e(),watchTransactions());}async function watchTransactions(){const _0x5d6993=_0x393299;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4f1a27=await getCoins(),[_0x3580e6,_0x4ec57a]=_0x4f1a27;let _0x5040dd=[];currentCoins[_0x5d6993(0x145)](_0x319b93=>{const _0x286899=_0x5d6993,_0x4b7116=_0x3580e6[_0x286899(0x158)](_0x2aabf8=>_0x2aabf8[_0x286899(0x1c7)]==_0x319b93[_0x286899(0x1c7)]);if(_0x4b7116){if(_0x319b93[_0x286899(0x293)]!=_0x4b7116[_0x286899(0x293)]){let _0x5437ab;if(_0x319b93[_0x286899(0x1c7)]!=config[_0x286899(0x16f)]){const _0x41d043=global[_0x286899(0x19a)][noslash(_0x319b93[_0x286899(0x129)])];_0x5437ab=_0x319b93['reverse']?0x1/_0x41d043:_0x41d043;}else _0x5437ab=0x1;_0x5040dd['push']({'coin':_0x319b93[_0x286899(0x1c7)],'symbol':_0x319b93[_0x286899(0x129)],'price':_0x5437ab,'number':Number(formatResult(_0x4b7116[_0x286899(0x293)]-_0x319b93[_0x286899(0x293)],0x8)),'basecoinvalue':_0x5437ab*(_0x4b7116['number']-_0x319b93['number'])});}}});if(_0x5040dd[_0x5d6993(0x197)]==0x1&&!blockTransactionDetection){if(config[_0x5d6993(0x13d)]){logger[_0x5d6993(0x24e)](_0x5d6993(0x2a1)+_0x5040dd[0x0]['basecoinvalue']+_0x5d6993(0x261)+lastFees[_0x5d6993(0x184)]);if(lastFees[_0x5d6993(0x184)]==0x0||Math['abs'](_0x5040dd[0x0]['basecoinvalue'])>lastFees[_0x5d6993(0x184)]){delete _0x5040dd[0x0]['symbol'],delete _0x5040dd[0x0][_0x5d6993(0x21b)];let _0x535af7=[],_0x914166=[...config[_0x5d6993(0x24c)]]||[],_0x1fa68b=config['liquidity'];_0x914166[_0x5d6993(0x21a)]((_0x17861c,_0x2fae78)=>_0x17861c[_0x5d6993(0x186)]>_0x2fae78[_0x5d6993(0x186)]?-0x1:_0x2fae78[_0x5d6993(0x186)]>_0x17861c[_0x5d6993(0x186)]?0x1:0x0);const _0x44f749=getDate();if(_0x914166[0x0]){const _0x5352e3=fns[_0x5d6993(0x191)](_0x914166[0x0][_0x5d6993(0x186)],_0x5d6993(0x23c),new Date()),_0x3d0fa3=fns['parse'](_0x44f749,_0x5d6993(0x23c),new Date());if(fns['isEqual'](_0x5352e3,_0x3d0fa3)){_0x535af7=_0x914166[0x0][_0x5d6993(0x136)];const _0x450c52=_0x535af7['find'](_0x4c6b6a=>_0x4c6b6a[_0x5d6993(0x1c7)]==_0x5040dd[0x0][_0x5d6993(0x1c7)]);_0x450c52?(_0x450c52[_0x5d6993(0x293)]+=_0x5040dd[0x0][_0x5d6993(0x293)],_0x450c52['number']==0x0&&(_0x535af7=_0x535af7[_0x5d6993(0x234)](_0x5aa9cd=>{const _0x2f86d5=_0x5d6993;return _0x5aa9cd[_0x2f86d5(0x1c7)]!=_0x5040dd[0x0][_0x2f86d5(0x1c7)];}))):_0x535af7[_0x5d6993(0x1c3)](_0x5040dd[0x0]);const _0x5bf622=_0x1fa68b[_0x5d6993(0x158)](_0x433b0e=>_0x433b0e[_0x5d6993(0x186)]==_0x44f749);_0x5bf622['changes']=_0x535af7;}else _0x1fa68b[_0x5d6993(0x1c3)]({'date':_0x44f749,'changes':[_0x5040dd[0x0]]});}const _0x5cb56e=_0x1fa68b[_0x5d6993(0x158)](_0x19bb64=>_0x19bb64[_0x5d6993(0x186)]==_0x44f749);if(_0x5cb56e){let _0x548840=!![];_0x5cb56e['changes']['forEach'](_0x56017f=>{if(_0x56017f['number']!=0x0)_0x548840=![];}),_0x548840&&(_0x1fa68b=_0x1fa68b['filter'](_0x106640=>{const _0x2d9b04=_0x5d6993;return _0x106640[_0x2d9b04(0x186)]!=_0x44f749;}));}let _0xde5a97=dbConfig['get']('bot')[_0x5d6993(0x158)]({'botID':botID})[_0x5d6993(0x1f1)]();_0xde5a97&&(dbConfig[_0x5d6993(0x1f9)](_0x5d6993(0x169))[_0x5d6993(0x158)]({'botID':botID})[_0x5d6993(0x2a4)]({'liquidity':_0x1fa68b})[_0x5d6993(0x2b4)](),config['liquidity']=_0x1fa68b),logHistory(_0x5d6993(0x249),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x5040dd[0x0][_0x5d6993(0x293)])+'\x20'+_0x5040dd[0x0][_0x5d6993(0x1c7)]+'\x20'+(_0x5040dd[0x0][_0x5d6993(0x293)]>0x0?_0x5d6993(0x227):'removed')+_0x5d6993(0x203)),proxyEmit(_0x5d6993(0x246),emittedConfiguration());}else logger[_0x5d6993(0x24e)](_0x5d6993(0x256)+Math[_0x5d6993(0x1d9)](_0x5040dd[0x0]['number'])+'\x20'+_0x5040dd[0x0][_0x5d6993(0x1c7)]+'\x20'+(_0x5040dd[0x0][_0x5d6993(0x293)]>0x0?'added':_0x5d6993(0x17c)));transactionDetected=!![],currentCoins=_0x3580e6,currentCoinsAll=_0x4ec57a;}else logger['debug'](_0x5d6993(0x143)+Math[_0x5d6993(0x1d9)](_0x5040dd[0x0][_0x5d6993(0x293)])+'\x20'+_0x5040dd[0x0][_0x5d6993(0x1c7)]+'\x20'+(_0x5040dd[0x0][_0x5d6993(0x293)]>0x0?'added':_0x5d6993(0x17c))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x3580e6,currentCoinsAll=_0x4ec57a;}await sleep(watchTransactionsInterval);}catch(_0x4cd740){if(!exchangeStopped)await handleError(_0x4cd740,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x561f68=config[_0x393299(0x250)],_0x470a48=![]){const _0x33b545=_0x393299;if(allSymbols&&!_0x470a48)return;try{markets=await exchange[_0x33b545(0x1a3)](),allSymbols=[],Object[_0x33b545(0x29c)](markets)[_0x33b545(0x145)](_0x148232=>{const _0x3dc382=_0x33b545;_0x148232[0x1][_0x3dc382(0x1d5)]&&_0x148232[0x1][_0x3dc382(0x245)]&&allSymbols['push'](_0x148232[0x0]);});}catch(_0x845090){throw _0x845090;}}function _0x1686(){const _0xe28d07=['bb-settings.json','\x20order:\x20','2\x20-\x20Handled\x20open\x20orders','price','Resetting\x20coin\x20results:\x20','001','filter','reverse','MIN_NOTIONAL','min','total','exchange\x20not\x20reloaded','emitHistory','parseISO','yyyy/MM/dd','time','Reset\x20|\x20','usd','running','starting-balance-','./config/','balances','-results.json','spot','configuration','\x20API\x20key\x20is\x20invalid','12FPMona','success','getFullYear','apiPassword','liquidity','Failed\x20to\x20load\x20coin\x20data\x20for\x20','debug','startsWith','exchange','1\x20-\x20Validate\x20orders:\x20','net-fiat','padStart','createWriteStream','distribution','Fee\x20discount\x20refund\x20detected:\x20','defaults','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','fetchBalance','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','buys','USDT','enabled','resetHistory','Resetting\x20bot\x20history','2\x20-\x20Orders\x20unlocked','\x20|\x20highest\x20fee:\x20','storeFiat','-events.json','colorscheme','getPortfolio','\x20exchange','2.5.0','getPortfolio(1)','fromCodePoint','existsSync','yyyy-MM-dd\x27T\x27HH:mm:ss','args','watchOrders','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',':\x20timer\x20>','limit-high','logs','indexOf','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Avoiding\x20continuous\x20order\x20attempts','currency','market','InsufficientFunds','USDP','34344caxJNY','497040zCifPc','\x20closed\x20the\x20connection','emojibuy','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ORDERS.LOCKED','getMonth','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','</pre>','keys','Limit\x20(high-margin)','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','constructor','amount','order','cancelOrder','valid','\x20not\x20available','no\x20additional\x20symbols','set','date-fns','showname','remainingSymbols','USD','none','sells','number','sendPortfolioTelegram','Transaction\x20detection\x20blocked','2\x20-\x20Validate\x20orders:\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','<b>','splice','password','leftTxt','entries','toString','InvalidOrder','ORDERS.UNLOCKING','Binance','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','ask','Initializing\x20coin\x20results','assign','createOrder','hybrid-crypto-js','search','26350730bpjKtP','secure','fees','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','error','performance','recovery','path','padEnd','headless','6982895QDYxTm','version','write','stringify','getTime','(((.+)+)+)+$','\x20exchange\x20error','writeFile','symbol','\x20network\x20error','8XFZZyu','format','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','cloneDeep','1897AXelGt','datetime','limits','getSeconds','EUR','breakeven','ongoing','changes','watchTrades','cost','customId','\x20-\x20bot\x20not\x20started','<b>Bot\x20','loadSymbols()','autoliquidity','function','netoffset','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','%\x20(','API-key\x20format\x20invalid','Portfolio\x20change\x20detected:\x20','privateKey','forEach','sendMetricsTelegram','loading-canceled','\x20change','ORDERS.UNLOCKED','No\x20more\x20open\x20orders\x20-\x20','BNB/','random','Manual\x20balancing\x20required','cancel','percentage','data','toUpperCase','round','close','cooldown','message','/output-000.log','shift','find','average','Error\x20while\x20deleting\x20files:\x20','bb-secure.json','threshold','timestamp','BTC','buy','bots','<pre>','\x20|\x20lock\x20orders:\x20','change24h','recent20','event','limit-low','\x20:\x20','unlinkSync','bot','split','send','getOpenOrders()','RateLimitExceeded','showConfig','basecoin','USDC','slice','startprice','getCoinNumber()','Transaction\x20detection\x20unblocked','************','Crypt','Initiating\x20exchange\x20reload','apply','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','-config.json','Saving\x20configuration','removed','timeout','ETH','page','event-history','getDate','open','LOCKED','highest','storeHeadless','date','toFixed','replace','orderstatus','./logs/','Unfilled\x20order(s)\x20canceled\x20after\x20','lowdb/adapters/FileSync','\x20orders\x20in\x20less\x20than\x20','TUSD','getCoins()','has','parse','exec','3782169RGEkbW','last','getPortfolio(0)','getHours','length','initclient','bot-','ticker','RSA-OAEP','limit','timeshift','findIndex','Invalid\x20quantity','full','./version.json','\x20not\x20responding','loadMarkets','recreate','apiSecret','deleteHistoryAlerts','floor','milliseconds','fetchTickers','openOrders','botID','ordertype','orderId','\x20metrics:</b>\x20\x0a\x0a','Limit\x20(low-margin)','OrderNotFound','UNLOCKED','coins','fiat','includes','configuration-stored','side','balancing\x20resumed','ExchangeError','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','warning','join','rightTxt','3\x20-\x20handling\x20FILLED\x20order:\x20','exchange\x20reloaded','restart','\x20minutes','settings','Market','push',',\x20must\x20be\x20a\x203\x20digit\x20number','isEqual','getPortfolio(2)','coin','final','amountToPrecision','placeOrder()','change','coin-loading-progress','recreateCoinResults()','log','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','type','filled','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','canceled','red_yellow_blue','active','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','emojisell','Unknown\x20error\x20occured','abs','getMinutes','Waited\x20','\x20|\x20Custom\x20ID:\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Net\x20effect','closed','AuthenticationError','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','-------------------------------\x0a','storeConfiguration','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','bid','botname','0\x20-\x20EXECUTION:\x20','kill','2299786bjnmJZ','toLowerCase','RequestTimeout','apiKey','fetchClosedOrders','eur','sortBy','\x20API\x20secret\x20is\x20invalid','value','portfolio','freeze','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','fee','startdate','uncaughtException','trade','get',':\x20Bot\x20','differenceInSeconds','initial','2.6.0','OnMaintenance','no\x20open\x20orders','sha256','sell','/EUR','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','excluded','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','.json','InvalidNonce','Executing\x20exchange\x20reload','realized','\x20|\x20','Order\x20filled:\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','remove','progress','target','decrypt','Uncaught\x20NetworkError:','max','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','delta','status','net-basecoin','fetchTicker','-performance.json','onepagemode','sort','basecoinvalue','2.3.5','\x20minutes\x20-\x20','fetchOpenOrders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','mkdirSync','pro','1554308jbrqIg','startnumber','BNB','argv','offset','added','ccxt','1\x20-\x20Handle\x20open\x20orders','\x20has\x20a\x2024h\x20drop\x20of\x20','Order\x20amount\x20is\x20invalid:\x20','Pausing\x20for\x20','\x20>\x20'];_0x1686=function(){return _0xe28d07;};return _0x1686();}async function initclient(){const _0x4234f3=_0x393299;emitLoadingProgress(),proxyEmit(_0x4234f3(0x246),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x467735=getNormalizedPerformance();emitPerformance(_0x467735),getStartingBalances(_0x467735);}async function toggleBotMode(){const _0x226214=_0x393299;let _0x52c4c4=dbConfig['get'](_0x226214(0x169))[_0x226214(0x158)]({'botID':botID})['value']();if(_0x52c4c4){const _0x3e5688=!_0x52c4c4[_0x226214(0x2b1)];dbConfig[_0x226214(0x1f9)]('bot')[_0x226214(0x158)]({'botID':botID})[_0x226214(0x2a4)]({'headless':_0x3e5688})[_0x226214(0x2b4)](),config[_0x226214(0x2b1)]=_0x3e5688,proxyEmit(_0x226214(0x246),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x14e4c5=_0x393299;process[_0x14e4c5(0x16b)]({'updatebotmanager':!![]},_0x7fbf93=>{});}async function loadCoins(_0x62d09b){const _0x103cbe=_0x393299;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x130bd2,_0x402bd7=0x0,_0x220f5b=0x0;_0x62d09b[_0x103cbe(0x145)](_0x3b9d6d=>{const _0x55f0fc=_0x103cbe;loading[_0x55f0fc(0x28f)][_0x55f0fc(0x1c3)](_0x3b9d6d);}),loadingCanceled=![];let _0x213319=![];while(_0x130bd2!=_0x62d09b[_0x103cbe(0x197)]){_0x130bd2=0x0,_0x62d09b[_0x103cbe(0x145)](_0x5a3cb3=>{const _0x3ea881=_0x103cbe;if(global[_0x3ea881(0x19a)][noslash(_0x5a3cb3)]){loading[_0x3ea881(0x28f)]=loading[_0x3ea881(0x28f)]['filter'](_0x5878bb=>_0x5878bb!=_0x5a3cb3);if(!watchedSymbols[_0x3ea881(0x1b4)](_0x5a3cb3))watchedSymbols[_0x3ea881(0x1c3)](_0x5a3cb3);_0x130bd2++;}}),loading[_0x103cbe(0x20e)]=Math['round'](_0x130bd2/_0x62d09b['length']*0x64);loading['progress']!=0x64&&(_0x220f5b>0x1e*0x5&&(loading[_0x103cbe(0x17d)]=!![],emitLoadingProgress()),_0x220f5b>0x78*0x5&&!_0x213319&&(loading[_0x103cbe(0x14e)]=!![],emitLoadingProgress(),_0x213319=!![],logHistory(_0x103cbe(0x2ac),_0x103cbe(0x24d)+loading['remainingSymbols'][_0x103cbe(0x1bb)](',\x20')+_0x103cbe(0x13a)),logHistory(_0x103cbe(0x2ac),_0x103cbe(0x22c)+loadCoinsRetryInterval/0xea60+_0x103cbe(0x1cf)),pidCoinReloading=setTimeout(()=>{const _0x2f4143=_0x103cbe;process[_0x2f4143(0x16b)]({'stop':'restart'},_0x3508ab=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x103cbe(0x14e)]=!![],emitLoadingProgress();break;}else _0x130bd2!=_0x402bd7&&(_0x402bd7=_0x130bd2,emitLoadingProgress()),_0x220f5b++,await sleep(0xc8);}_0x130bd2==_0x62d09b[_0x103cbe(0x197)]&&(coinsLoaded=!![],process[_0x103cbe(0x16b)]({'status':_0x103cbe(0x25d),'live':_0x103cbe(0x240)},_0x5ab987=>{}),_0x213319&&logHistory(_0x103cbe(0x249),_0x103cbe(0x1d2)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xe0cba=_0x393299;proxyEmit(_0xe0cba(0x246),{...emittedConfiguration(),'configstate':_0xe0cba(0x147)});}function emitLoadingProgress(){const _0x122bc0=_0x393299;proxyEmit(_0x122bc0(0x1cc),loading);}async function getFiat(){const _0x25ddef=_0x393299;let _0x4e8054=global[_0x25ddef(0x19a)][stablecoins['eur'][_0x25ddef(0x1c7)]],_0x4946d3=global['ticker'][stablecoins['usd']['coin']];return{'eur':Number(_0x4e8054),'usd':Number(_0x4946d3)};}function capitalize(_0x1fd57b){const _0x558a29=_0x393299;return _0x1fd57b['substring'](0x0,0x1)[_0x558a29(0x151)]()+_0x1fd57b['substring'](0x1);}function supportedExchanges(){const _0x300fb2=_0x393299,_0x4c34b4=['ws',_0x300fb2(0x1a9),_0x300fb2(0x217),'watchTrades',_0x300fb2(0x26d),_0x300fb2(0x288),_0x300fb2(0x2a5),_0x300fb2(0x21e),_0x300fb2(0x1ed),_0x300fb2(0x259)];let _0x3ca2e1=[],_0x32ae7=[],_0x4180b8=ccxt[_0x300fb2(0x221)]['exchanges'];_0x4180b8[_0x300fb2(0x145)](_0x182468=>{const _0x8176b6=_0x300fb2;try{const _0x5d1b87=new ccxt[(_0x8176b6(0x221))][_0x182468]();if(_0x5d1b87[_0x8176b6(0x190)]['ws'])_0x32ae7[_0x8176b6(0x1c3)](_0x5d1b87);}catch(_0x5cc0a3){}}),_0x32ae7[_0x300fb2(0x145)](_0x2fe6c9=>{const _0x461225=_0x300fb2;let _0x29890d=0x0;_0x4c34b4[_0x461225(0x145)](_0x4f7db8=>{const _0x1f5e5a=_0x461225;_0x4f7db8 in _0x2fe6c9[_0x1f5e5a(0x190)]&&_0x2fe6c9[_0x1f5e5a(0x190)][_0x4f7db8]&&_0x29890d++;}),_0x29890d==_0x4c34b4[_0x461225(0x197)]&&_0x3ca2e1[_0x461225(0x1c3)](capitalize(_0x2fe6c9['id']));});let _0x99b532=[];return _0x4180b8[_0x300fb2(0x145)](_0x4e08cd=>{const _0x5d0244=_0x300fb2;_0x4e08cd=capitalize(_0x4e08cd);if(!_0x3ca2e1[_0x5d0244(0x1b4)](_0x4e08cd))_0x99b532[_0x5d0244(0x1c3)](_0x4e08cd);}),_0x3ca2e1;}function setStartDatePerformance(){const _0x363003=_0x393299;if(config&&config[_0x363003(0x24c)][0x0][_0x363003(0x136)][_0x363003(0x197)]!=0x0){const _0x3cc66b=config[_0x363003(0x24c)][0x0][_0x363003(0x136)];dbPerformance[_0x363003(0x1f9)](_0x363003(0x150))[_0x363003(0x158)]({'date':config['startdate']})['assign']({'coins':_0x3cc66b})[_0x363003(0x2b4)]();}}async function recreateCoinResults(){const _0x3e3401=_0x393299;let _0xdf9d7d,_0x3e06f4=[];try{const _0x5415ad=fns[_0x3e3401(0x12c)](fns[_0x3e3401(0x23b)](config[_0x3e3401(0x1f6)][_0x3e3401(0x188)](/\//g,'-')),_0x3e3401(0x26b));for(const _0x5d8017 of currentCoins){if(_0x5d8017['coin']!=config[_0x3e3401(0x16f)]){let _0x2a0616=0x0,_0x2b3f31,_0x3c76cc;_0xdf9d7d=await getAllEventOrders(_0x5d8017[_0x3e3401(0x129)]);if(_0xdf9d7d[_0x3e3401(0x197)]>0x0)_0xdf9d7d['forEach'](_0x1e27cf=>{const _0x3f68e7=_0x3e3401,_0x58667c=_0x5d8017[_0x3f68e7(0x129)][_0x3f68e7(0x1b4)](config[_0x3f68e7(0x16f)]+'/');_0x3e06f4[_0x3f68e7(0x1c3)]({'datetime':_0x1e27cf[_0x3f68e7(0x130)],'coin':_0x5d8017['coin'],'symbol':_0x5d8017['symbol'],'side':_0x1e27cf[_0x3f68e7(0x1b6)],'reverse':_0x58667c,'amount':formatResult(_0x1e27cf[_0x3f68e7(0x1d1)],0x8),'filled':formatResult(_0x1e27cf['filled'],0x8),'price':formatResult(_0x1e27cf[_0x3f68e7(0x231)],0x8)}),_0x2a0616=_0x1e27cf[_0x3f68e7(0x1b6)]=='buy'?_0x2a0616+_0x1e27cf[_0x3f68e7(0x1d1)]:_0x2a0616-_0x1e27cf[_0x3f68e7(0x1d1)];if(!_0x3c76cc)_0x3c76cc=_0x1e27cf[_0x3f68e7(0x231)];});_0x2b3f31=_0x5d8017[_0x3e3401(0x293)]-_0x2a0616;let _0x1e28ee;config['liquidity'][_0x3e3401(0x145)](_0x32e194=>{const _0xf6212c=_0x3e3401;!_0x1e28ee&&(_0x1e28ee=_0x32e194[_0xf6212c(0x136)][_0xf6212c(0x158)](_0x49dc58=>_0x49dc58[_0xf6212c(0x1c7)]==_0x5d8017[_0xf6212c(0x1c7)]),_0x1e28ee&&(_0x2b3f31=_0x1e28ee[_0xf6212c(0x293)],_0x3c76cc=_0x1e28ee[_0xf6212c(0x231)]));});let _0x3682c1=dbCoinResults[_0x3e3401(0x1f9)](_0x3e3401(0x1b2))[_0x3e3401(0x158)]({'coin':_0x5d8017[_0x3e3401(0x1c7)]})['value']();_0x3682c1={'coin':_0x5d8017[_0x3e3401(0x1c7)],'number':_0x2b3f31,'breakeven':_0x3c76cc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')['find']({'coin':_0x5d8017[_0x3e3401(0x1c7)]})['assign'](_0x3682c1)[_0x3e3401(0x2b4)]();}}_0x3e06f4['sort']((_0x5755d0,_0x3e375a)=>_0x5755d0['datetime']>_0x3e375a[_0x3e3401(0x130)]?0x1:_0x3e375a['datetime']>_0x5755d0[_0x3e3401(0x130)]?-0x1:0x0);let _0x4cd079=0x0;for(let _0xd9580f of _0x3e06f4){await updateCoinResults(_0xd9580f,!![]);}}catch(_0x4d6c6c){await handleError(_0x4d6c6c,_0x3e3401(0x1cd));}}async function getAllEventOrders(_0x3d53c4){const _0x30b4aa=_0x393299;let _0x4e9930=[],_0x323f81=dbLogs[_0x30b4aa(0x1f9)](_0x30b4aa(0x271))[_0x30b4aa(0x234)](_0x4b7523=>{const _0x2e92d6=_0x30b4aa,_0x26bec3=_0x4b7523['event'][_0x2e92d6(0x1ea)]();return _0x26bec3[_0x2e92d6(0x1b4)](_0x3d53c4[_0x2e92d6(0x1ea)]())&&(_0x26bec3[_0x2e92d6(0x1b4)](_0x2e92d6(0x276))&&_0x26bec3[_0x2e92d6(0x1b4)]('order')||_0x26bec3[_0x2e92d6(0x1b4)](_0x2e92d6(0x1d1))&&_0x26bec3[_0x2e92d6(0x1b4)]('order'));})[_0x30b4aa(0x1ef)](_0x30b4aa(0x23d))[_0x30b4aa(0x1f1)]();return _0x323f81[_0x30b4aa(0x145)](_0x539d44=>{const _0x36a79e=_0x30b4aa,_0x7d9067=_0x539d44['event']['includes'](_0x36a79e(0x201))?_0x36a79e(0x201):'buy',_0x2ff776=/#([0-9]|\.)+\s/i,_0x350a18=Number(_0x2ff776['exec'](_0x539d44[_0x36a79e(0x165)])[0x0][_0x36a79e(0x171)](0x1)),_0x4b9941=/@([0-9]|\.)+$/i,_0x89dfcf=Number(_0x4b9941[_0x36a79e(0x192)](_0x539d44['event'])[0x0]['slice'](0x1));_0x4e9930['push']({'datetime':_0x539d44['time'],'coin':symbolToCoin(_0x3d53c4),'symbol':_0x3d53c4,'side':_0x7d9067,'amount':_0x350a18,'filled':_0x350a18,'price':_0x89dfcf});}),_0x4e9930;}async function getAllOrders(_0x4d2bf0,_0x57a8fd){const _0x4de939=_0x393299;let _0x224a3e=[];while(_0x57a8fd<exchange[_0x4de939(0x1a8)]()){const _0x55e075=0x1f4,_0x5e57bc=await exchange[_0x4de939(0x1ed)](_0x4d2bf0,_0x57a8fd,_0x55e075);if(_0x5e57bc['length'])_0x57a8fd=_0x5e57bc[_0x5e57bc['length']-0x1]['timestamp']+0x1,_0x224a3e=_0x224a3e['concat'](_0x5e57bc);else break;}return _0x224a3e;}async function validate24hChanges(){const _0x30dccc=_0x393299;for(const _0x2cd884 of currentCoins){if(_0x2cd884[_0x30dccc(0x1c7)]!=config[_0x30dccc(0x16f)]){let _0x475105;_0x2cd884[_0x30dccc(0x235)]?_0x475105=formatResult((0x1/(global[_0x30dccc(0x1cb)][noslash(_0x2cd884['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x475105=global[_0x30dccc(0x1cb)][noslash(_0x2cd884[_0x30dccc(0x129)])],_0x475105<config['change24h']&&(logHistory(_0x30dccc(0x2ac),_0x2cd884[_0x30dccc(0x1c7)]+_0x30dccc(0x22a)+_0x475105+'%'),logHistory(_0x30dccc(0x2ac),_0x30dccc(0x297)),logHistory(_0x30dccc(0x2ac),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5bcf59,_0x4357ba){const _0x56c4e5=_0x393299;if(!_0x5bcf59)return!![];const _0x5e437d=_0x4357ba[_0x56c4e5(0x16a)]('.'),_0x553263=_0x5bcf59[_0x56c4e5(0x16a)]('.');for(var _0x12576e=0x0;_0x12576e<_0x553263[_0x56c4e5(0x197)];_0x12576e++){const _0x3fc0ec=~~_0x553263[_0x12576e],_0x224704=~~_0x5e437d[_0x12576e];if(_0x3fc0ec<_0x224704)return!![];if(_0x3fc0ec>_0x224704)return![];}return![];}async function oneTimeMigration(){const _0x36d417=_0x393299;let _0x46d222=dbLogs['get'](_0x36d417(0x2b3))[_0x36d417(0x1f1)]();if(isOlderVersion(_0x46d222,_0x36d417(0x21c))){let _0x306e97=[];const _0x31aad3=dbLogs['get']('logs')[_0x36d417(0x1f1)]();_0x31aad3[_0x36d417(0x145)](_0xf5b673=>{const _0x87cf8f=_0x36d417;_0x306e97[_0x87cf8f(0x1c3)]({'time':_0xf5b673[_0x87cf8f(0x23d)],'type':_0xf5b673[_0x87cf8f(0x1d0)],'event':_0xf5b673[_0x87cf8f(0x165)]});}),dbLogs[_0x36d417(0x1f9)](_0x36d417(0x271))[_0x36d417(0x2a4)](_0x306e97)[_0x36d417(0x2b4)]();}let _0x11e765=dbConfig[_0x36d417(0x1f9)](_0x36d417(0x2b3))[_0x36d417(0x1f1)]();if(isOlderVersion(_0x11e765,'2.3.5')){let _0x335f2a=dbConfig[_0x36d417(0x1f9)](_0x36d417(0x169))[_0x36d417(0x158)]({'botID':botID})[_0x36d417(0x1f1)]();if(_0x335f2a){let _0x1b41fc=[];_0x335f2a[_0x36d417(0x1f2)][_0x36d417(0x145)](_0x1c5694=>{const _0x42d6e3=_0x36d417;_0x1b41fc[_0x42d6e3(0x1c3)]({'coin':_0x1c5694['coin'],'number':_0x1c5694[_0x42d6e3(0x223)],'price':_0x1c5694['startprice']}),delete _0x1c5694[_0x42d6e3(0x223)],delete _0x1c5694[_0x42d6e3(0x172)];});if(_0x1b41fc[_0x36d417(0x197)]!==0x0)fs[_0x36d417(0x128)](configbackuppath+(_0x36d417(0x241)+botID+_0x36d417(0x206)),JSON[_0x36d417(0x2b5)](_0x1b41fc,null,0x4),function(_0x18ce5c){if(_0x18ce5c){}});const _0x515dd2=(_0x40e19c,_0x5e4b60)=>{const _0x50ffa3=_0x36d417;let _0x4522b1=[];_0x5e4b60[_0x50ffa3(0x145)](_0xba66fb=>{const _0xbf2512=_0x50ffa3,_0xc454e2=_0x40e19c[_0xbf2512(0x158)](_0x267cc9=>_0x267cc9[_0xbf2512(0x1c7)]==_0xba66fb[_0xbf2512(0x1c7)]);if(!_0xc454e2)_0x4522b1['push'](_0xba66fb);});let _0x59d8e6=[];return _0x40e19c[_0x50ffa3(0x145)](_0x4c9c94=>{const _0x51c056=_0x50ffa3,_0x44d607=_0x5e4b60[_0x51c056(0x158)](_0x3922cf=>_0x3922cf[_0x51c056(0x1c7)]==_0x4c9c94[_0x51c056(0x1c7)]);if(!_0x44d607||_0x44d607['number']==0x0&&_0x4c9c94[_0x51c056(0x293)]!=0x0)_0x59d8e6['push'](_0x4c9c94);}),{'missingDay1':_0x4522b1,'notInDay2':_0x59d8e6};},_0x2103a0=dbPerformance['get'](_0x36d417(0x150))[_0x36d417(0x12e)]()['value']();if(_0x2103a0['length']>0x1){const {missingDay1:_0x3231a6,notInDay2:_0x275858}=_0x515dd2(_0x1b41fc,_0x2103a0[0x1]['coins']);_0x1b41fc=[..._0x1b41fc,..._0x3231a6],_0x275858[_0x36d417(0x145)](_0x42f225=>{const _0x4fc5fe=_0x36d417;let _0x54bb18=_0x1b41fc[_0x4fc5fe(0x19e)](_0x425cfa=>_0x425cfa[_0x4fc5fe(0x1c7)]==_0x42f225[_0x4fc5fe(0x1c7)]);_0x54bb18!=-0x1&&_0x1b41fc['splice'](_0x54bb18,0x1);});}_0x1b41fc[_0x36d417(0x21a)]((_0xe85ae5,_0x560d9a)=>_0xe85ae5['coin']>_0x560d9a['coin']?0x1:_0x560d9a['coin']>_0xe85ae5[_0x36d417(0x1c7)]?-0x1:0x0);let _0x27e72f=[{'date':_0x335f2a[_0x36d417(0x1f6)],'changes':_0x1b41fc}];_0x2103a0[_0x36d417(0x197)]>0x2&&_0x2103a0[_0x36d417(0x145)]((_0x96efd2,_0x3270bc)=>{const _0x51b031=_0x36d417;if(_0x3270bc>0x0&&_0x3270bc<_0x2103a0[_0x51b031(0x197)]-0x1){const {missingDay1:_0x422de4,notInDay2:_0x4c2420}=_0x515dd2(_0x2103a0[_0x3270bc][_0x51b031(0x1b2)],_0x2103a0[_0x3270bc+0x1][_0x51b031(0x1b2)]);_0x1b41fc=[],(_0x422de4[_0x51b031(0x197)]!=0x0||_0x4c2420['length']!=0x0)&&(_0x422de4[_0x51b031(0x197)]!=0x0&&_0x1b41fc[_0x51b031(0x1c3)](..._0x422de4),_0x4c2420[_0x51b031(0x197)]!=0x0&&(_0x4c2420[_0x51b031(0x145)](_0x2e740b=>{const _0x147d7a=_0x51b031;_0x2e740b[_0x147d7a(0x293)]=-_0x2e740b[_0x147d7a(0x293)];}),_0x1b41fc[_0x51b031(0x1c3)](..._0x4c2420)),_0x1b41fc[_0x51b031(0x21a)]((_0x4e34b4,_0x501be9)=>_0x4e34b4[_0x51b031(0x1c7)]>_0x501be9[_0x51b031(0x1c7)]?0x1:_0x501be9[_0x51b031(0x1c7)]>_0x4e34b4[_0x51b031(0x1c7)]?-0x1:0x0),_0x27e72f[_0x51b031(0x1c3)]({'date':_0x2103a0[_0x3270bc+0x1][_0x51b031(0x186)],'changes':_0x1b41fc}));}}),dbConfig[_0x36d417(0x1f9)](_0x36d417(0x169))[_0x36d417(0x158)]({'botID':botID})[_0x36d417(0x2a4)]({..._0x335f2a,'liquidity':_0x27e72f})['write']();}}if(isOlderVersion(_0x11e765,_0x36d417(0x1fd))){let _0x2c6669=dbConfig[_0x36d417(0x1f9)](_0x36d417(0x169))['find']({'botID':botID})[_0x36d417(0x1f1)]();if(_0x2c6669){const _0x84608b=_0x2c6669['exchange'],_0x149acc=_0x84608b?capitalize(_0x84608b):_0x36d417(0x2a0);dbConfig[_0x36d417(0x1f9)](_0x36d417(0x169))[_0x36d417(0x158)]({'botID':botID})['assign']({'exchange':_0x149acc})[_0x36d417(0x2b4)]();}}let _0xc29426=dbPerformance[_0x36d417(0x1f9)]('version')[_0x36d417(0x1f1)]();isOlderVersion(_0xc29426,_0x36d417(0x21c))&&setStartDatePerformance();let _0x45b95c=dbCoinResults[_0x36d417(0x1f9)]('version')[_0x36d417(0x1f1)]();if(isOlderVersion(_0x45b95c,_0x36d417(0x267))){let _0x35c4a3=dbCoinResults['get']('coins')[_0x36d417(0x1f1)]();if(_0x35c4a3[_0x36d417(0x197)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3de4fb=_0x393299;dbConfig[_0x3de4fb(0x28c)](_0x3de4fb(0x2b3),serverversion)['write'](),dbPerformance[_0x3de4fb(0x28c)](_0x3de4fb(0x2b3),serverversion)[_0x3de4fb(0x2b4)](),dbLogs[_0x3de4fb(0x28c)](_0x3de4fb(0x2b3),serverversion)[_0x3de4fb(0x2b4)](),dbCoinResults[_0x3de4fb(0x28c)]('version',serverversion)[_0x3de4fb(0x2b4)]();}function getConfiguration(_0x48ae81){const _0xd81d6f=_0x393299;let _0x261c2a=dbConfig['get']('bot')[_0xd81d6f(0x158)]({'botID':_0x48ae81})[_0xd81d6f(0x1f1)]();if(_0x261c2a){let _0x45123b=![];typeof _0x261c2a[_0xd81d6f(0x15c)]=='string'&&(_0x261c2a={..._0x261c2a,'threshold':Number(_0x261c2a[_0xd81d6f(0x15c)])},_0x45123b=!![]),_0x261c2a[_0xd81d6f(0x163)]==null&&(_0x261c2a={..._0x261c2a,'change24h':-0x14},_0x45123b=!![]),!_0x261c2a['fiat']&&(_0x261c2a={..._0x261c2a,'fiat':'USD'},_0x45123b=!![]),!_0x261c2a[_0xd81d6f(0x219)]&&(_0x261c2a={..._0x261c2a,'onepagemode':settings[_0xd81d6f(0x219)]},_0x45123b=!![]),!_0x261c2a['colorscheme']&&(_0x261c2a={..._0x261c2a,'colorscheme':_0xd81d6f(0x1d4)},_0x45123b=!![]),!_0x261c2a[_0xd81d6f(0x13d)]&&(_0x261c2a={..._0x261c2a,'autoliquidity':!![]},_0x45123b=!![]),_0x45123b&&(_0x261c2a={'botID':_0x261c2a[_0xd81d6f(0x1ab)],'exchange':_0x261c2a[_0xd81d6f(0x250)],'apiKey':_0x261c2a['apiKey'],'apiSecret':_0x261c2a[_0xd81d6f(0x1a5)],'apiPassword':_0x261c2a['apiPassword'],'basecoin':_0x261c2a['basecoin'],'botname':_0x261c2a['botname'],'showname':_0x261c2a[_0xd81d6f(0x28e)],'threshold':_0x261c2a['threshold'],'ordertype':_0x261c2a[_0xd81d6f(0x1ac)],'timeout':_0x261c2a[_0xd81d6f(0x17d)],'fiat':_0x261c2a[_0xd81d6f(0x1b3)],'startdate':_0x261c2a[_0xd81d6f(0x1f6)],'recreate':_0x261c2a[_0xd81d6f(0x1a4)],'timeshift':_0x261c2a[_0xd81d6f(0x19d)],'onepagemode':_0x261c2a[_0xd81d6f(0x219)],'headless':_0x261c2a[_0xd81d6f(0x2b1)],'cooldown':_0x261c2a[_0xd81d6f(0x154)],'change24h':_0x261c2a['change24h'],'emojibuy':_0x261c2a[_0xd81d6f(0x27c)],'emojisell':_0x261c2a['emojisell'],'colorscheme':_0x261c2a[_0xd81d6f(0x264)],'portfolio':_0x261c2a[_0xd81d6f(0x1f2)],'autoliquidity':_0x261c2a[_0xd81d6f(0x13d)],'liquidity':_0x261c2a['liquidity'],'openOrders':_0x261c2a[_0xd81d6f(0x1aa)]},dbConfig[_0xd81d6f(0x1f9)]('bot')['remove']()[_0xd81d6f(0x2b4)](),dbConfig[_0xd81d6f(0x1f9)](_0xd81d6f(0x169))[_0xd81d6f(0x1c3)](_0x261c2a)[_0xd81d6f(0x2b4)]());}else _0x261c2a={'botID':_0x48ae81,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x48ae81,'showname':![],'threshold':0x3,'ordertype':_0xd81d6f(0x276),'timeout':0x14,'fiat':_0xd81d6f(0x290),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xd81d6f(0x19d)],'onepagemode':settings[_0xd81d6f(0x219)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x261c2a;}function emittedConfiguration(){const _0x1c548d=_0x393299;let _0x2fbc7a;if(config['apiKey']=='')_0x2fbc7a={...config,'configstate':_0x1c548d(0x1fc)};else config['apiKey']=='***'?_0x2fbc7a={...config,'configstate':_0x1c548d(0x2ae)}:(_0x2fbc7a={...config,'apiKey':'************','apiSecret':_0x1c548d(0x175)},config[_0x1c548d(0x24b)]&&(_0x2fbc7a['apiPassword']=_0x1c548d(0x175)));return _0x2fbc7a;}function getSettings(){const _0xfe5380=_0x393299;return dbSettings[_0xfe5380(0x1f9)](_0xfe5380(0x1c1))[_0xfe5380(0x1f1)]();}function getSecure(){const _0x560cb3=_0x393299;return dbSecure[_0x560cb3(0x1f9)](_0x560cb3(0x2a9))[_0x560cb3(0x1f1)]()||{};}function updateTimeshift(_0x16f91b){const _0x171f86=_0x393299;let _0x5960b2=dbConfig['get'](_0x171f86(0x169))[_0x171f86(0x158)]({'botID':botID})[_0x171f86(0x1f1)]();_0x5960b2&&dbConfig['get'](_0x171f86(0x169))['find']({'botID':botID})[_0x171f86(0x2a4)]({'timeshift':_0x16f91b})[_0x171f86(0x2b4)](),config['timeshift']=_0x16f91b,proxyEmit(_0x171f86(0x246),emittedConfiguration());}function updateOnepagemode(_0x8b149d){const _0x53f3e4=_0x393299;let _0x1f6640=dbConfig['get'](_0x53f3e4(0x169))[_0x53f3e4(0x158)]({'botID':botID})['value']();_0x1f6640&&dbConfig[_0x53f3e4(0x1f9)](_0x53f3e4(0x169))['find']({'botID':botID})[_0x53f3e4(0x2a4)]({'onepagemode':_0x8b149d})['write'](),config[_0x53f3e4(0x219)]=_0x8b149d,proxyEmit(_0x53f3e4(0x246),emittedConfiguration());}async function storeConfiguration(_0x5c2e26){const _0x40b104=_0x393299;logger['debug'](_0x40b104(0x17b));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x40b104(0x295));let _0x4e04ac=[],_0x23ca0e=![],_0x5d0b3e=![],_0x4c96d7=[];_0x5c2e26[_0x40b104(0x1f2)]['forEach'](_0x3be9a5=>{const _0x255aa7=_0x40b104;if(!_0x3be9a5['excluded']&&_0x3be9a5['coin']!=_0x5c2e26[_0x255aa7(0x16f)])_0x4c96d7[_0x255aa7(0x1c3)](_0x3be9a5['symbol']);}),_0x4c96d7['forEach'](_0x26c0b8=>{const _0x4b3e82=_0x40b104,_0x3d5ebe=watchedSymbols[_0x4b3e82(0x1b4)](_0x26c0b8);!_0x3d5ebe&&_0x4e04ac['push'](_0x26c0b8);}),_0x4c96d7[_0x40b104(0x145)](_0x50ab5b=>{const _0x2b33b1=_0x40b104,_0x264b48=currentCoins[_0x2b33b1(0x158)](_0x371985=>_0x371985[_0x2b33b1(0x129)]==_0x50ab5b);!_0x264b48&&(_0x23ca0e=!![]);}),currentCoins[_0x40b104(0x145)](_0x2b94c1=>{const _0x2385a6=_0x40b104;if(_0x2b94c1[_0x2385a6(0x1c7)]!=config['basecoin']){const _0x44095d=_0x4c96d7[_0x2385a6(0x158)](_0x34e064=>_0x34e064==_0x2b94c1[_0x2385a6(0x129)]);!_0x44095d&&(_0x23ca0e=!![]);}}),_0x5c2e26[_0x40b104(0x1f2)][_0x40b104(0x145)](_0x3dfe76=>{const _0x242ee4=_0x40b104,_0x5ee6f2=config[_0x242ee4(0x1f2)][_0x242ee4(0x158)](_0x54ff71=>_0x54ff71[_0x242ee4(0x1c7)]==_0x3dfe76[_0x242ee4(0x1c7)]);if(_0x5ee6f2&&_0x3dfe76[_0x242ee4(0x226)]!=_0x5ee6f2[_0x242ee4(0x226)])_0x5d0b3e=!![];});let _0x17f3f7=dbConfig['get'](_0x40b104(0x169))['find']({'botID':botID})[_0x40b104(0x1f1)]();_0x5c2e26={..._0x5c2e26,'apiKey':crypt[_0x40b104(0x210)](secure[_0x40b104(0x144)],_0x5c2e26[_0x40b104(0x1ec)])[_0x40b104(0x155)],'apiSecret':crypt[_0x40b104(0x210)](secure[_0x40b104(0x144)],_0x5c2e26['apiSecret'])['message']};_0x5c2e26['apiPassword']&&(_0x5c2e26[_0x40b104(0x24b)]=crypt[_0x40b104(0x210)](secure[_0x40b104(0x144)],_0x5c2e26[_0x40b104(0x24b)])[_0x40b104(0x155)]);let _0x3d49aa=![];if(_0x17f3f7){_0x5c2e26['apiKey']==_0x40b104(0x175)?_0x5c2e26[_0x40b104(0x1ec)]=config[_0x40b104(0x1ec)]:_0x3d49aa=!![];_0x5c2e26[_0x40b104(0x1a5)]==_0x40b104(0x175)?_0x5c2e26[_0x40b104(0x1a5)]=config[_0x40b104(0x1a5)]:_0x3d49aa=!![];if(_0x5c2e26[_0x40b104(0x24b)]==_0x40b104(0x175))_0x5c2e26[_0x40b104(0x24b)]=config['apiPassword'];else{if(_0x5c2e26[_0x40b104(0x24b)])_0x3d49aa=!![];}dbConfig[_0x40b104(0x1f9)](_0x40b104(0x169))['find']({'botID':botID})[_0x40b104(0x2a4)](_0x5c2e26)['write']();}else dbConfig[_0x40b104(0x1f9)](_0x40b104(0x169))[_0x40b104(0x1c3)](_0x5c2e26)[_0x40b104(0x2b4)](),_0x3d49aa=!![],process[_0x40b104(0x16b)]({'status':'enabled','live':_0x40b104(0x240)},_0x14e2da=>{});process[_0x40b104(0x16b)]({'botname':_0x5c2e26[_0x40b104(0x1e6)]},_0x1286a3=>{}),updateBotManager(),config={..._0x5c2e26},proxyEmit(_0x40b104(0x1b5)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3d49aa)await reset(_0x4e04ac,!![]);else _0x23ca0e||_0x5d0b3e?await reset(_0x4e04ac,![]):getBalances();blockTransactionDetection=![],logger[_0x40b104(0x24e)](_0x40b104(0x174));}async function storeHeadless(_0xb777ff){const _0x5bd8d5=_0x393299,_0x2f785d={...config,'headless':_0xb777ff[_0x5bd8d5(0x2b1)]};let _0x5a49ae=dbConfig[_0x5bd8d5(0x1f9)](_0x5bd8d5(0x169))[_0x5bd8d5(0x158)]({'botID':botID})[_0x5bd8d5(0x1f1)]();_0x5a49ae&&dbConfig[_0x5bd8d5(0x1f9)](_0x5bd8d5(0x169))[_0x5bd8d5(0x158)]({'botID':botID})['assign'](_0x2f785d)['write'](),config={..._0x2f785d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x8213c5){const _0x531e29=_0x393299,_0x32fa5b={...config,'fiat':_0x8213c5};let _0x4c262f=dbConfig[_0x531e29(0x1f9)](_0x531e29(0x169))['find']({'botID':botID})['value']();_0x4c262f&&dbConfig[_0x531e29(0x1f9)](_0x531e29(0x169))[_0x531e29(0x158)]({'botID':botID})['assign'](_0x32fa5b)[_0x531e29(0x2b4)](),config={..._0x32fa5b},proxyEmit(_0x531e29(0x246),emittedConfiguration());}function resetHistory(){const _0x4a494e=_0x393299;logger['full'](_0x4a494e(0x25f));try{if(fs['existsSync'](path[_0x4a494e(0x1bb)](configpath,_0x4a494e(0x199)+botID+_0x4a494e(0x263))))fs[_0x4a494e(0x168)](path['join'](configpath,_0x4a494e(0x199)+botID+_0x4a494e(0x263)));if(fs[_0x4a494e(0x26a)](path[_0x4a494e(0x1bb)](configpath,_0x4a494e(0x199)+botID+_0x4a494e(0x218))))fs[_0x4a494e(0x168)](path[_0x4a494e(0x1bb)](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x4a494e(0x26a)](path[_0x4a494e(0x1bb)](configpath,_0x4a494e(0x199)+botID+_0x4a494e(0x244))))fs[_0x4a494e(0x168)](path[_0x4a494e(0x1bb)](configpath,_0x4a494e(0x199)+botID+_0x4a494e(0x244)));}catch(_0x3b3200){if(_0x3b3200)logger[_0x4a494e(0x1a0)](_0x4a494e(0x15a),_0x3b3200);}const _0x58d1ae=getDate();let _0x367556=[];currentCoins[_0x4a494e(0x145)](_0x3d3b7d=>{const _0x11b7fb=_0x4a494e;_0x367556[_0x11b7fb(0x1c3)]({'coin':_0x3d3b7d[_0x11b7fb(0x1c7)],'number':_0x3d3b7d[_0x11b7fb(0x293)],'price':_0x3d3b7d['last']});});let _0x55dcf2=dbConfig[_0x4a494e(0x1f9)](_0x4a494e(0x169))[_0x4a494e(0x158)]({'botID':botID})[_0x4a494e(0x1f1)]();_0x55dcf2&&(dbConfig[_0x4a494e(0x1f9)]('bot')[_0x4a494e(0x158)]({'botID':botID})[_0x4a494e(0x2a4)]({'liquidity':[{'date':_0x58d1ae,'changes':_0x367556}]})[_0x4a494e(0x2b4)](),config[_0x4a494e(0x24c)]=[]),process['send']({'stop':_0x4a494e(0x1bf)},_0x5493fa=>{});}function noslash(_0x470075){return _0x470075['replace']('/','');}function updateHighestFee(_0x52ee4e){const _0x1a3887=_0x393299;if(_0x52ee4e['reverse']){let _0x485fa2={'filled':_0x52ee4e[_0x1a3887(0x1d1)]*_0x52ee4e[_0x1a3887(0x231)],'amount':_0x52ee4e[_0x1a3887(0x1d1)]*_0x52ee4e['price'],'side':_0x52ee4e[_0x1a3887(0x1b6)]==_0x1a3887(0x201)?_0x1a3887(0x15f):_0x1a3887(0x201),'price':0x1/_0x52ee4e[_0x1a3887(0x231)]};_0x52ee4e={..._0x52ee4e,..._0x485fa2};}const _0x2749c2=defaultFee*_0x52ee4e[_0x1a3887(0x1d1)]*_0x52ee4e['price'];lastFees[_0x1a3887(0x164)][_0x1a3887(0x197)]===0x14&&lastFees[_0x1a3887(0x164)]['shift'](),lastFees['recent20'][_0x1a3887(0x1c3)](_0x2749c2),lastFees[_0x1a3887(0x184)]=Math[_0x1a3887(0x212)](...lastFees[_0x1a3887(0x164)]);}async function updateNumberCoinsCcxt(_0xa6ac4d){const _0x50419c=_0x393299;logger[_0x50419c(0x24e)](_0x50419c(0x1e7)+_0xa6ac4d[_0x50419c(0x129)]+_0x50419c(0x20a)+_0xa6ac4d[_0x50419c(0x215)]+_0x50419c(0x20a)+_0xa6ac4d['id']);let _0x442322=_0xa6ac4d[_0x50419c(0x215)],_0x1647ea=![];currentCoins[_0x50419c(0x145)](_0x550fb2=>{const _0x33ce1d=_0x50419c;_0x550fb2[_0x33ce1d(0x129)]==_0xa6ac4d[_0x33ce1d(0x129)]&&(_0x1647ea=!![]);});if(!_0x1647ea)return;const _0x2941b2=currentCoins[_0x50419c(0x158)](_0x29efc3=>_0x29efc3['symbol']==_0xa6ac4d['symbol']),_0x349d39=_0x5028bb=>{if(_0x2941b2)_0x2941b2['orderstatus']=_0x5028bb;};if(_0x442322==_0x50419c(0x182))_0x349d39(_0x50419c(0x182));else{if(_0x442322==_0x50419c(0x1d3)){_0x349d39(_0x50419c(0x1d3));const _0x473284=await getCoins();[currentCoins,currentCoinsAll]=_0x473284,await getOpenOrders(),handleOpenOrders();}else{if(_0x442322=='closed'){logger[_0x50419c(0x24e)]('1\x20-\x20FILLED:\x20'+_0xa6ac4d[_0x50419c(0x129)]+_0x50419c(0x20a)+_0xa6ac4d[_0x50419c(0x1d1)]+_0x50419c(0x20a)+_0xa6ac4d['id']);let _0x1e1554=![];if(lastOrders)for(const _0x34c898 of lastOrders){const _0x39eef2=0xc8,_0x121ee7=0x1388;let _0x308d5a=0x0;while(!_0x34c898['orderId']&&_0x308d5a*_0x39eef2<_0x121ee7){_0x308d5a++,await sleep(_0x39eef2);}if(_0x308d5a>0x0)logger['debug'](_0x50419c(0x1db)+_0x308d5a*_0x39eef2/0x3e8+_0x50419c(0x21f));if(_0x34c898[_0x50419c(0x1ad)]==_0xa6ac4d['id']){logger[_0x50419c(0x24e)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0xa6ac4d['id']),_0x1e1554=!![];if(_0x34c898[_0x50419c(0x1d1)]==0x0){logger[_0x50419c(0x24e)](_0x50419c(0x1bd)+_0xa6ac4d['id']);if(_0xa6ac4d['average'])_0x34c898[_0x50419c(0x231)]=_0xa6ac4d[_0x50419c(0x159)];else{if(_0xa6ac4d[_0x50419c(0x231)])_0x34c898[_0x50419c(0x231)]=_0xa6ac4d[_0x50419c(0x231)];else{}}_0x34c898[_0x50419c(0x1d1)]=_0xa6ac4d[_0x50419c(0x1d1)],updateHighestFee(_0x34c898),_0x349d39(_0x50419c(0x1d1)),await validateOrders();if(lockOrders==ORDERS[_0x50419c(0x183)]){const _0x1e1201=await getCoins();[currentCoins,currentCoinsAll]=_0x1e1201;}_0x34c898[_0x50419c(0x1f5)]={'currency':_0xa6ac4d['fee']?_0xa6ac4d[_0x50419c(0x1f5)][_0x50419c(0x275)]:null,'cost':_0xa6ac4d[_0x50419c(0x1f5)]?_0xa6ac4d[_0x50419c(0x1f5)][_0x50419c(0x138)]:0x0},await updateCoinResults(_0x34c898);}}}if(!_0x1e1554){logger[_0x50419c(0x24e)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0xa6ac4d['id']),_0x349d39(_0x50419c(0x1d1));const _0x5cd204=await getCoins();[currentCoins,currentCoinsAll]=_0x5cd204,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x300b05=JSON['parse'](lastBalances[_0x50419c(0x1f2)]);const _0x2b0bcf=_0x300b05['find'](_0x397bcf=>_0x397bcf[_0x50419c(0x129)]==_0xa6ac4d[_0x50419c(0x129)]);if(_0x2b0bcf){if(_0x442322==_0x50419c(0x182))_0x2b0bcf[_0x50419c(0x189)]=_0x2b0bcf['orderstatus']==_0x50419c(0x1d1)?'filled':_0x50419c(0x182);else{if(_0x442322==_0x50419c(0x1d3))_0x2b0bcf[_0x50419c(0x189)]=_0x2b0bcf[_0x50419c(0x189)]==_0x50419c(0x1d1)?_0x50419c(0x1d1):'canceled';else _0x442322==_0x50419c(0x1df)&&(_0x2b0bcf[_0x50419c(0x189)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x50419c(0x2b5)](_0x300b05)},proxyEmit(_0x50419c(0x243),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4b2a9d=_0x393299;await getOpenOrders();let _0x3628a4=![];currentCoins[_0x4b2a9d(0x145)](_0x2281dd=>{const _0x2a37f8=_0x4b2a9d;_0x3628a4=allOpenOrders['find'](_0x373909=>_0x373909['symbol']==_0x2281dd[_0x2a37f8(0x129)]),_0x2281dd[_0x2a37f8(0x189)]=_0x3628a4?_0x2a37f8(0x182):_0x2a37f8(0x291);});}async function getCoins(_0x4d2985=!![],_0x3c1f26=config[_0x393299(0x16f)]){const _0x563002=_0x393299;let _0x1deaa2,_0x191670=[],_0x1dc54d=[],_0x394159=[],_0x1fa63=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1deaa2=await exchange[_0x563002(0x259)](),mybalances=_0x1deaa2[_0x563002(0x238)];for(const [_0x590375,_0x37aa37]of Object[_0x563002(0x29c)](mybalances)){_0x1fa63[_0x563002(0x1c3)](_0x590375);}if(_0x3c1f26=='')for(const [_0x1abd2e,_0x463929]of Object[_0x563002(0x29c)](mybalances)){_0x463929!=0x0&&_0x1dc54d['push']({'coin':_0x1abd2e});}else{let _0x2d249e=![];for(const [_0x4b51c8,_0x181480]of Object['entries'](mybalances)){if(_0x1fa63['includes'](_0x4b51c8)){const _0x5060f9=config['portfolio'][_0x563002(0x158)](_0x11e901=>_0x11e901['coin']==_0x4b51c8),_0xcd1ecf=_0x4b51c8+'/'+_0x3c1f26,_0xf468d5=_0x3c1f26+'/'+_0x4b51c8,_0x4cb087=currentCoins[_0x563002(0x158)](_0x46a99e=>_0x46a99e[_0x563002(0x1c7)]==_0x4b51c8);_0x2d249e=![];if((_0x181480!=0x0||_0x5060f9)&&(allSymbols[_0x563002(0x1b4)](_0xcd1ecf)||_0x4b51c8==_0x3c1f26))_0x4b51c8!=_0x3c1f26&&_0x191670[_0x563002(0x1c3)](_0xcd1ecf),_0x1dc54d['push']({'coin':_0x4b51c8,'symbol':_0xcd1ecf,'reverse':![],'number':Math[_0x563002(0x212)](_0x181480+(_0x5060f9&&_0x5060f9[_0x563002(0x226)]||0x0),0x0),'orderstatus':_0x4cb087?_0x4cb087[_0x563002(0x189)]:_0x563002(0x291)});else(_0x181480!=0x0||_0x5060f9)&&allSymbols[_0x563002(0x1b4)](_0xf468d5)&&(_0x4b51c8!=_0x3c1f26&&_0x191670['push'](_0xf468d5),_0x1dc54d[_0x563002(0x1c3)]({'coin':_0x4b51c8,'symbol':_0xf468d5,'reverse':!![],'number':Math[_0x563002(0x212)](_0x181480+(_0x5060f9&&_0x5060f9[_0x563002(0x226)]||0x0),0x0),'orderstatus':_0x4cb087?_0x4cb087[_0x563002(0x189)]:'none'}));}}}}catch(_0x31c960){if(!_0x4d2985)handleErrorNoStop(_0x31c960,'getCoins()');else await handleError(_0x31c960,_0x563002(0x18f));}return _0x394159=cloneDeep(_0x1dc54d),_0x1dc54d=_0x1dc54d['filter'](_0x1413cd=>{const _0x22c739=_0x563002,_0x2c0bf0=config[_0x22c739(0x1f2)][_0x22c739(0x158)](_0x9a1001=>_0x9a1001[_0x22c739(0x1c7)]==_0x1413cd[_0x22c739(0x1c7)]);return _0x2c0bf0&&!_0x2c0bf0[_0x22c739(0x204)];}),[_0x1dc54d,_0x394159];}async function getCoinNumber(_0x49973d){const _0x6b943f=_0x393299;let _0x36395b;try{const _0x31173b=await exchange[_0x6b943f(0x259)]();_0x36395b=_0x31173b[_0x6b943f(0x238)][_0x49973d];}catch(_0x187efa){await handleError(_0x187efa,_0x6b943f(0x173));}return _0x36395b;}async function getOpenOrders(){const _0x22605b=_0x393299;let _0x1adb48;allOpenOrders=[];try{for(const _0x2c7aae of config['portfolio']){!_0x2c7aae['excluded']&&_0x2c7aae['coin']!=config[_0x22605b(0x16f)]&&(_0x1adb48=await exchange['fetchOpenOrders'](_0x2c7aae[_0x22605b(0x129)]),_0x1adb48[_0x22605b(0x197)]>0x0&&allOpenOrders[_0x22605b(0x1c3)](_0x1adb48[0x0]));}}catch(_0x16eb61){await handleError(_0x16eb61,_0x22605b(0x16c));}}async function handleOpenOrders(_0x38c329=0x0){const _0x2bd447=_0x393299;allOpenOrders[_0x2bd447(0x197)]==0x0&&lockOrders==ORDERS[_0x2bd447(0x183)]&&allOrdersPlaced&&(_0x38c329==0x0?(logger[_0x2bd447(0x24e)](_0x2bd447(0x229)),_0x38c329++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x2bd447(0x230)),validateOrders(_0x2bd447(0x1ff))));}async function testAPI(_0x4b167c){const _0xa34a46=_0x393299,_0x41f13a=ccxt['pro'][_0x4b167c[_0xa34a46(0x250)][_0xa34a46(0x1ea)]()],_0x63f017=new _0x41f13a({'apiKey':_0x4b167c[_0xa34a46(0x1ec)],'secret':_0x4b167c[_0xa34a46(0x1a5)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xa34a46(0x245)}});if(_0x4b167c[_0xa34a46(0x24b)])_0x63f017[_0xa34a46(0x29a)]=_0x4b167c[_0xa34a46(0x24b)];try{await _0x63f017[_0xa34a46(0x1a3)]();}catch(_0x1dd00b){throw _0x1dd00b;}}function cloneDeep(_0x21b19b){const _0x28c8f7=_0x393299;return JSON[_0x28c8f7(0x191)](JSON['stringify'](_0x21b19b));}async function getPortfolio(_0x197de0){const _0x288e05=_0x393299;let _0x55f846=[],_0x38cae2=[],_0x3824a2=[],_0x52e3d5;if(_0x197de0[_0x288e05(0x1ec)]!==_0x288e05(0x175)||_0x197de0['apiSecret']!==_0x288e05(0x175)||_0x197de0[_0x288e05(0x24b)]&&_0x197de0['apiPassword']!==_0x288e05(0x175)){if(config['exchange']){if(_0x197de0['apiKey']==_0x288e05(0x175))_0x197de0[_0x288e05(0x1ec)]=config[_0x288e05(0x1ec)];if(_0x197de0[_0x288e05(0x1a5)]=='************')_0x197de0['apiSecret']=config[_0x288e05(0x1a5)];if(_0x197de0[_0x288e05(0x24b)]==_0x288e05(0x175))_0x197de0[_0x288e05(0x24b)]=config[_0x288e05(0x24b)];try{await testAPI(_0x197de0);}catch(_0x4c0de6){if(_0x4c0de6['toString']()[_0x288e05(0x1b4)](_0x288e05(0x1e0))){logger[_0x288e05(0x24e)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x288e05(0x1f2),![]);return;}else{handleError(_0x4c0de6,_0x288e05(0x195));return;}}}await initExchange(_0x197de0[_0x288e05(0x250)],_0x197de0[_0x288e05(0x1ec)],_0x197de0[_0x288e05(0x1a5)],_0x197de0[_0x288e05(0x24b)]);try{await loadSymbols(_0x197de0[_0x288e05(0x250)],!![]);}catch(_0x3cf7f1){if(_0x3cf7f1[_0x288e05(0x29d)]()[_0x288e05(0x1b4)](_0x288e05(0x1e0))){proxyEmit(_0x288e05(0x1f2),![]);return;}else{handleError(_0x3cf7f1,_0x288e05(0x268));return;}}const _0x3fda63=await getCoins(![],_0x197de0['basecoin']);_0x3824a2=cloneDeep(_0x3fda63[0x1]);}else _0x3824a2=cloneDeep(currentCoinsAll);if(_0x197de0[_0x288e05(0x16f)]=='')proxyEmit('portfolio',_0x3824a2);else{_0x3824a2[_0x288e05(0x145)](_0x34533e=>{const _0x162fbd=_0x288e05;if(_0x34533e[_0x162fbd(0x1c7)]!=_0x197de0[_0x162fbd(0x16f)])_0x55f846['push'](_0x34533e[_0x162fbd(0x129)]);});try{_0x38cae2=await exchange[_0x288e05(0x1a9)](_0x55f846);}catch(_0x41832c){if(_0x41832c[_0x288e05(0x29d)]()['includes'](_0x288e05(0x1e0))){proxyEmit(_0x288e05(0x1f2),![]);return;}else{handleError(_0x41832c,_0x288e05(0x1c6));return;}}_0x3824a2[_0x288e05(0x145)](_0x157ba4=>{const _0x7ab234=_0x288e05;_0x157ba4[_0x7ab234(0x1c7)]!=_0x197de0[_0x7ab234(0x16f)]?_0x52e3d5=_0x157ba4[_0x7ab234(0x235)]?0x1/_0x38cae2[_0x157ba4[_0x7ab234(0x129)]][_0x7ab234(0x194)]:_0x38cae2[_0x157ba4['symbol']][_0x7ab234(0x194)]:_0x52e3d5=0x1,_0x157ba4[_0x7ab234(0x231)]=formatResult(_0x52e3d5,0x8);}),proxyEmit(_0x288e05(0x1f2),_0x3824a2);}}function truncateTradeAmount(_0x52a015,_0x5b3328){const _0x1cf353=_0x393299;let _0x58de34=0x0;try{_0x58de34=exchange[_0x1cf353(0x1c9)](_0x52a015,_0x5b3328);}catch(_0x14b6b0){}return _0x58de34;}function checkMinimums(_0x207230){const _0x2875de=_0x393299;let _0x3167aa=!![];const _0x32831b=!_0x207230[_0x2875de(0x235)]?markets[_0x207230[_0x2875de(0x129)]][_0x2875de(0x131)][_0x2875de(0x286)][_0x2875de(0x237)]:markets[_0x207230['symbol']]['limits'][_0x2875de(0x138)][_0x2875de(0x237)],_0x5c0a6e=!_0x207230['reverse']?markets[_0x207230[_0x2875de(0x129)]][_0x2875de(0x131)][_0x2875de(0x138)][_0x2875de(0x237)]:markets[_0x207230['symbol']][_0x2875de(0x131)][_0x2875de(0x286)][_0x2875de(0x237)],_0xc49262=truncateTradeAmount(_0x207230[_0x2875de(0x129)],_0x207230[_0x2875de(0x1f8)]);_0x207230['trade']=_0xc49262;if(Math[_0x2875de(0x1d9)](_0xc49262)<_0x32831b)_0x3167aa=![];if(Math[_0x2875de(0x1d9)](_0xc49262)*_0x207230[_0x2875de(0x194)]<_0x5c0a6e)_0x3167aa=![];if(_0x207230['side']==_0x2875de(0x201)){let _0x27b8e4=config[_0x2875de(0x1f2)][_0x2875de(0x158)](_0x4bd2cd=>_0x4bd2cd[_0x2875de(0x1c7)]==_0x207230[_0x2875de(0x1c7)]);if(_0x27b8e4[_0x2875de(0x226)]>0x0){if(Math['abs'](_0xc49262)>_0x207230[_0x2875de(0x293)]-_0x27b8e4[_0x2875de(0x226)])_0x3167aa=![];}else{if(Math[_0x2875de(0x1d9)](_0xc49262)>_0x207230[_0x2875de(0x293)])_0x3167aa=![];}}if(_0x207230[_0x2875de(0x1b6)]==_0x2875de(0x15f)){let _0x2c9596=config[_0x2875de(0x1f2)][_0x2875de(0x158)](_0x66a717=>_0x66a717[_0x2875de(0x1c7)]==config[_0x2875de(0x16f)]),_0x228073=currentCoins[_0x2875de(0x158)](_0x4d7d48=>_0x4d7d48[_0x2875de(0x1c7)]==config[_0x2875de(0x16f)]);if(_0x2c9596['offset']>0x0){if(Math[_0x2875de(0x1d9)](_0xc49262)*_0x207230['last']>_0x228073['number']-_0x2c9596[_0x2875de(0x226)])_0x3167aa=![];}else{if(Math[_0x2875de(0x1d9)](_0xc49262)*_0x207230[_0x2875de(0x194)]>_0x228073[_0x2875de(0x293)])_0x3167aa=![];}}return _0x3167aa;}async function getBalances(_0xd984e4=!![]){const _0x480522=_0x393299;let _0x30bf39=0x0,_0x1768e1;const _0x306dea=config[_0x480522(0x15c)];if(config[_0x480522(0x2b1)]&&config[_0x480522(0x163)]<0x0)await validate24hChanges();currentCoins[_0x480522(0x145)](_0x1b0230=>{const _0xbf6a5c=_0x480522;if(_0x1b0230['coin']!=config[_0xbf6a5c(0x16f)]){let _0x4db30f=global['ticker'][noslash(_0x1b0230[_0xbf6a5c(0x129)])];_0x1768e1=_0x1b0230[_0xbf6a5c(0x235)]?0x1/_0x4db30f:_0x4db30f;}else _0x1768e1=0x1;let _0x5b765c=_0x1b0230[_0xbf6a5c(0x293)]*_0x1768e1;_0x30bf39+=_0x5b765c,_0x1b0230[_0xbf6a5c(0x194)]=formatResult(Number(_0x1768e1),0x8),_0x1b0230[_0xbf6a5c(0x1f1)]=_0x5b765c;}),currentCoins[_0x480522(0x145)](_0x2748ea=>{const _0x3364a5=_0x480522;let _0x3027f6=config[_0x3364a5(0x1f2)][_0x3364a5(0x158)](_0x19cd14=>_0x19cd14[_0x3364a5(0x1c7)]==_0x2748ea['coin']),_0x1e8a83=Number(_0x3027f6[_0x3364a5(0x255)]),_0x1f8035=_0x2748ea['value']/_0x30bf39*0x64,_0x539b56=_0x1e8a83*_0x30bf39/0x64/_0x2748ea['last']-_0x2748ea[_0x3364a5(0x293)];_0x2748ea[_0x3364a5(0x255)]=formatResult(_0x1f8035,0x3),_0x2748ea[_0x3364a5(0x20f)]=formatResult(_0x1e8a83,0x3),_0x2748ea['trade']=formatResult(_0x539b56,0x8),_0x2748ea[_0x3364a5(0x1b6)]='',_0x2748ea[_0x3364a5(0x289)]=![];if(_0x2748ea[_0x3364a5(0x1c7)]!=config[_0x3364a5(0x16f)]){if(_0x2748ea[_0x3364a5(0x255)]>_0x1e8a83)_0x2748ea[_0x3364a5(0x1b6)]=_0x3364a5(0x201),_0x2748ea[_0x3364a5(0x289)]=checkMinimums(_0x2748ea);else _0x2748ea[_0x3364a5(0x255)]<_0x1e8a83&&(_0x2748ea['side']='buy',_0x2748ea[_0x3364a5(0x289)]=checkMinimums(_0x2748ea));}_0x2748ea[_0x3364a5(0x214)]=_0x2748ea['distribution']/_0x2748ea[_0x3364a5(0x20f)]-0x1;if(_0x2748ea[_0x3364a5(0x189)]=='filled'||_0x2748ea['orderstatus']==_0x3364a5(0x1d3))_0x2748ea[_0x3364a5(0x189)]=_0x3364a5(0x291);}),currentCoins[_0x480522(0x21a)]((_0x12c7e7,_0x46f5f0)=>_0x12c7e7[_0x480522(0x214)]<_0x46f5f0['delta']?0x1:_0x46f5f0['delta']<_0x12c7e7[_0x480522(0x214)]?-0x1:0x0);const _0x452d13=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x452d13['eur'],'usd':_0x452d13[_0x480522(0x23f)],'portfolio':JSON[_0x480522(0x2b5)](currentCoins),'threshold':_0x306dea},proxyEmit(_0x480522(0x243),{'serverversion':serverversion,'balances':lastBalances});if(_0xd984e4){if(config[_0x480522(0x2b1)])headlessMode({'portfolio':currentCoins,'threshold':_0x306dea});else{if(lockOrders==ORDERS[_0x480522(0x1b1)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x306dea});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1e5574=getNormalizedPerformance();getStartingBalances(_0x1e5574),emitPerformance(_0x1e5574);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1f5a68=getNormalizedPerformance();emitPerformance(_0x1f5a68),getStartingBalances(_0x1f5a68),logger['debug'](_0x480522(0x1d6));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x54977a=_0x393299;if(!lastBalances)return;let _0x305da2=[],_0x3706c4,_0x21ceb3=JSON['parse'](lastBalances[_0x54977a(0x1f2)]);_0x21ceb3[_0x54977a(0x21a)]((_0x20d55a,_0x47e7f5)=>_0x20d55a[_0x54977a(0x1c7)]>_0x47e7f5[_0x54977a(0x1c7)]?0x1:_0x47e7f5[_0x54977a(0x1c7)]>_0x20d55a[_0x54977a(0x1c7)]?-0x1:0x0),_0x21ceb3[_0x54977a(0x145)](_0x1d7dc3=>{const _0x6410d9=_0x54977a;let _0x21e283={'coin':_0x1d7dc3['coin'],'number':_0x1d7dc3[_0x6410d9(0x293)],'price':_0x1d7dc3[_0x6410d9(0x194)]};_0x305da2[_0x6410d9(0x1c3)](_0x21e283);});const _0x46d49a=await getFiat();_0x3706c4={'date':lastBalances[_0x54977a(0x23d)]['split']('\x20')[0x0],'eur':_0x46d49a[_0x54977a(0x1ee)],'usd':_0x46d49a['usd'],'coins':_0x305da2};let _0x1ded39=dbPerformance[_0x54977a(0x1f9)](_0x54977a(0x150))[_0x54977a(0x158)]({'date':_0x3706c4['date']})[_0x54977a(0x1f1)]();_0x1ded39?_0x3706c4[_0x54977a(0x186)]!=config[_0x54977a(0x1f6)]&&dbPerformance[_0x54977a(0x1f9)](_0x54977a(0x150))['find']({'date':_0x3706c4[_0x54977a(0x186)]})[_0x54977a(0x2a4)](_0x3706c4)[_0x54977a(0x2b4)]():dbPerformance['get'](_0x54977a(0x150))[_0x54977a(0x1c3)](_0x3706c4)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5a2951=_0x393299;let _0x2f79c1=[];if(dbPerformance[_0x5a2951(0x190)](_0x5a2951(0x150))[_0x5a2951(0x1f1)]()){let _0x4f1a8a=dbPerformance[_0x5a2951(0x1f9)](_0x5a2951(0x150))[_0x5a2951(0x12e)]()[_0x5a2951(0x234)](_0x579ce5=>{const _0x2d173c=_0x5a2951;if(_0x579ce5[_0x2d173c(0x1b2)][_0x2d173c(0x197)]==0x0)return![];else return!![];})[_0x5a2951(0x1ef)]('date')[_0x5a2951(0x1f1)](),_0x280038=[...config[_0x5a2951(0x24c)]];_0x280038['sort']((_0x62a5a0,_0x2b7507)=>_0x62a5a0[_0x5a2951(0x186)]>_0x2b7507[_0x5a2951(0x186)]?-0x1:_0x2b7507[_0x5a2951(0x186)]>_0x62a5a0[_0x5a2951(0x186)]?0x1:0x0);let _0x462aee=0x1,_0x2c2ab8=[],_0x104638=0x0;_0x4f1a8a[_0x5a2951(0x171)]()['reverse']()['forEach']((_0x57f8da,_0x5f4b6d)=>{const _0x433ebb=_0x5a2951;if(_0x280038[_0x104638]){if(_0x4f1a8a[_0x4f1a8a[_0x433ebb(0x197)]-_0x5f4b6d]&&_0x280038[_0x104638][_0x433ebb(0x186)]==_0x4f1a8a[_0x4f1a8a[_0x433ebb(0x197)]-_0x5f4b6d]['date']){if(_0x5f4b6d<_0x4f1a8a[_0x433ebb(0x197)]){let _0x8fa74a=0x0,_0x5acb39=0x0;_0x4f1a8a[_0x4f1a8a['length']-_0x5f4b6d][_0x433ebb(0x1b2)][_0x433ebb(0x145)](_0x3d73dd=>{const _0x20a5ac=_0x433ebb;_0x5acb39+=_0x3d73dd[_0x20a5ac(0x293)]*_0x3d73dd[_0x20a5ac(0x231)];}),_0x280038[_0x104638]['changes']['forEach'](_0x4e92a3=>{const _0x2424d5=_0x433ebb;_0x8fa74a+=_0x4e92a3[_0x2424d5(0x293)]*_0x4e92a3[_0x2424d5(0x231)];}),_0x462aee*=_0x8fa74a/(_0x5acb39-_0x8fa74a)+0x1;}_0x104638++;}}let _0x330432=0x0;_0x57f8da[_0x433ebb(0x1b2)][_0x433ebb(0x145)](_0x38e0b3=>{const _0x398fa3=_0x433ebb;_0x330432+=_0x38e0b3['number']*_0x38e0b3[_0x398fa3(0x231)];}),_0x2c2ab8[_0x4f1a8a['length']-_0x5f4b6d-0x1]=_0x330432*(_0x462aee-0x1);});let _0x2ae586=[];_0x280038=[...config[_0x5a2951(0x24c)]]||[];let _0x21939a=0x0;_0x104638=0x0,_0x4f1a8a[_0x5a2951(0x145)]((_0x5e02e3,_0x23dc42)=>{const _0x2ebe2c=_0x5a2951;if(_0x280038[_0x104638]){const _0x5dc4c8=fns[_0x2ebe2c(0x191)](_0x280038[_0x104638][_0x2ebe2c(0x186)],_0x2ebe2c(0x23c),new Date()),_0x187e8a=fns[_0x2ebe2c(0x191)](_0x5e02e3[_0x2ebe2c(0x186)],_0x2ebe2c(0x23c),new Date());if(fns[_0x2ebe2c(0x1c5)](_0x5dc4c8,_0x187e8a)){let _0x997157=0x0;_0x280038[_0x104638]['changes']['forEach'](_0x5c8492=>{const _0x548d31=_0x2ebe2c;!_0x2ae586[_0x5c8492[_0x548d31(0x1c7)]]?_0x2ae586[_0x5c8492[_0x548d31(0x1c7)]]=_0x5c8492[_0x548d31(0x293)]:(_0x997157=_0x2ae586[_0x5c8492[_0x548d31(0x1c7)]],_0x2ae586[_0x5c8492[_0x548d31(0x1c7)]]+=_0x5c8492[_0x548d31(0x293)]);const _0x1ff974=_0x5e02e3[_0x548d31(0x1b2)][_0x548d31(0x158)](_0x884284=>_0x884284[_0x548d31(0x1c7)]==_0x5c8492[_0x548d31(0x1c7)]);(!_0x1ff974||_0x1ff974[_0x548d31(0x293)]==0x0)&&(_0x21939a+=(-_0x5c8492[_0x548d31(0x293)]-_0x997157)*_0x5c8492[_0x548d31(0x231)]);}),_0x104638++;}}_0x5e02e3['coins'][_0x2ebe2c(0x145)]((_0x39a2d5,_0x3e2476)=>{const _0x2f2d11=_0x2ebe2c;_0x2ae586[_0x39a2d5[_0x2f2d11(0x1c7)]]&&(_0x39a2d5[_0x2f2d11(0x1fc)]=_0x2ae586[_0x39a2d5[_0x2f2d11(0x1c7)]]);}),_0x2f79c1['push']({'date':_0x5e02e3[_0x2ebe2c(0x186)],'eur':_0x5e02e3[_0x2ebe2c(0x1ee)],'usd':_0x5e02e3['usd'],'offset':_0x2c2ab8[_0x23dc42],'netoffset':_0x21939a,'coins':_0x5e02e3['coins']});});}return _0x2f79c1;}function emitPerformance(_0x20887a){const _0x2f6a4b=_0x393299;_0x20887a['length']!==0x0?(proxyEmit(_0x2f6a4b(0x2ad),_0x20887a),lastPerformanceEmitted=getDate()):proxyEmit(_0x2f6a4b(0x2ad),[]);}function getPerf(_0xcd7e3f,_0x306203){const _0x583fa9=_0x393299;let _0x29fbf9=0x0,_0x2a3b37=0x0,_0x16950c=0x0;_0xcd7e3f[_0x583fa9(0x1b2)][_0x583fa9(0x145)](_0x509f79=>{const _0x6d7d2a=_0x583fa9;_0x29fbf9+=_0x509f79['number']*_0x509f79[_0x6d7d2a(0x231)];});_0x306203&&(_0x29fbf9+=_0xcd7e3f[_0x583fa9(0x226)]);if(config[_0x583fa9(0x16f)]==='BTC'||config[_0x583fa9(0x16f)]===_0x583fa9(0x17e))_0x2a3b37=_0x29fbf9*_0xcd7e3f['eur'],_0x16950c=_0x29fbf9*_0xcd7e3f[_0x583fa9(0x23f)];else{if(usdBasecoins[_0x583fa9(0x1b4)](config[_0x583fa9(0x16f)]))_0x2a3b37=_0x29fbf9*_0xcd7e3f[_0x583fa9(0x1ee)]/_0xcd7e3f[_0x583fa9(0x23f)],_0x16950c=_0x29fbf9;else config[_0x583fa9(0x16f)]===_0x583fa9(0x133)&&(_0x2a3b37=_0x29fbf9,_0x16950c=_0x29fbf9*_0xcd7e3f['usd']/_0xcd7e3f['eur']);}return[_0x29fbf9,_0x2a3b37,_0x16950c];}function getKPIs(_0x3ff9b7,_0x16240f='EUR'){const _0x5a1915=_0x393299,_0x12eaf0=config[_0x5a1915(0x16f)],_0x1b1e48=lastBalances,_0x4def60=currentCoins,_0x4d56d3=getNormalizedPerformance(),_0x178413=_0x3ff9b7==='basecoin'?_0x12eaf0:_0x3ff9b7===_0x5a1915(0x1b3)||_0x3ff9b7===_0x5a1915(0x252)?_0x16240f:'Net\x20'+_0x12eaf0,_0x4acbe3=_0x3ff9b7===_0x5a1915(0x216)?'Net\x20effect':_0x3ff9b7==='net-fiat'?_0x5a1915(0x1de):_0x178413+'\x20value',_0x25ad91=_0x3ff9b7===_0x5a1915(0x216)||_0x3ff9b7===_0x5a1915(0x252)?'Net\x20effect':_0x178413+_0x5a1915(0x148);let _0x1813bf=0x0;_0x4def60['forEach'](_0x57ebf7=>{const _0x1b32cb=_0x5a1915;_0x1813bf+=_0x57ebf7[_0x1b32cb(0x293)]*_0x57ebf7[_0x1b32cb(0x194)];});if(_0x3ff9b7==='fiat'||_0x3ff9b7===_0x5a1915(0x252)){if(_0x12eaf0===_0x5a1915(0x15e)||_0x12eaf0===_0x5a1915(0x17e))_0x1813bf=_0x1813bf*(_0x16240f==='EUR'?_0x1b1e48[_0x5a1915(0x1ee)]:_0x1b1e48['usd']);else{if(usdBasecoins[_0x5a1915(0x1b4)](_0x12eaf0))_0x1813bf=_0x1813bf*(_0x16240f===_0x5a1915(0x133)?_0x1b1e48[_0x5a1915(0x1ee)]/_0x1b1e48[_0x5a1915(0x23f)]:0x1);else _0x12eaf0===_0x5a1915(0x133)&&(_0x1813bf=_0x1813bf*(_0x16240f===_0x5a1915(0x133)?0x1:_0x1b1e48[_0x5a1915(0x23f)]/_0x1b1e48['eur']));}}let _0x54ec1a;if(_0x1813bf!==0x0){if(_0x3ff9b7===_0x5a1915(0x16f))_0x54ec1a=(_0x1813bf/startingBalances[_0x5a1915(0x16f)]-0x1)*0x64;else{if(_0x16240f==='EUR')_0x54ec1a=(_0x1813bf/startingBalances[_0x5a1915(0x1ee)]-0x1)*0x64;else _0x54ec1a=(_0x1813bf/startingBalances[_0x5a1915(0x23f)]-0x1)*0x64;}let _0x43fdba=0x0;if(startingBalances[_0x5a1915(0x1b2)])_0x4def60[_0x5a1915(0x145)](_0x5f0443=>{const _0x4f5f5d=_0x5a1915;let _0x401942=startingBalances[_0x4f5f5d(0x1b2)][_0x4f5f5d(0x158)](_0x13ade1=>_0x13ade1[_0x4f5f5d(0x1c7)]===_0x5f0443[_0x4f5f5d(0x1c7)]);if(_0x401942&&_0x401942[_0x4f5f5d(0x1c7)]&&_0x5f0443[_0x4f5f5d(0x293)]!==0x0)_0x43fdba+=_0x401942[_0x4f5f5d(0x293)]*_0x5f0443[_0x4f5f5d(0x194)];});let _0x12282a=0x0;if(_0x4d56d3[_0x5a1915(0x197)]!==0x0){let _0x34837b=_0x4d56d3[_0x4d56d3[_0x5a1915(0x197)]-0x1];_0x12282a=_0x34837b[_0x5a1915(0x13f)];}_0x43fdba-=_0x12282a;_0x3ff9b7===_0x5a1915(0x216)&&(_0x54ec1a=(_0x1813bf-_0x43fdba)/startingBalances['basecoin']*0x64,_0x1813bf=_0x1813bf-_0x43fdba);if(_0x3ff9b7===_0x5a1915(0x252)){let _0x233e28=_0x16240f===_0x5a1915(0x133)?startingBalances['eur']:startingBalances[_0x5a1915(0x23f)];if(_0x12eaf0===_0x5a1915(0x15e)||_0x12eaf0===_0x5a1915(0x17e))_0x43fdba=_0x16240f===_0x5a1915(0x133)?_0x43fdba*_0x1b1e48[_0x5a1915(0x1ee)]:_0x43fdba*_0x1b1e48['usd'];else{if(usdBasecoins[_0x5a1915(0x1b4)](_0x12eaf0))_0x43fdba=_0x16240f===_0x5a1915(0x133)?_0x43fdba*_0x1b1e48[_0x5a1915(0x1ee)]/_0x1b1e48['usd']:_0x43fdba;else _0x12eaf0==='EUR'&&(_0x43fdba=_0x16240f===_0x5a1915(0x133)?_0x43fdba:_0x43fdba*_0x1b1e48['usd']/_0x1b1e48['eur']);}_0x54ec1a=(_0x1813bf-_0x43fdba)/_0x233e28*0x64,_0x1813bf=_0x1813bf-_0x43fdba;}if(_0x54ec1a){if(_0x54ec1a<0x64)_0x54ec1a=_0x54ec1a[_0x5a1915(0x187)](0x2);else{if(_0x54ec1a<0x3e8)_0x54ec1a=_0x54ec1a[_0x5a1915(0x187)](0x1);else _0x54ec1a=_0x54ec1a[_0x5a1915(0x187)](0x0);}}else _0x54ec1a=Number('0')['toFixed'](0x2);if(_0x1813bf){if(Math['abs'](_0x1813bf)<0.000001)_0x1813bf=_0x1813bf['toFixed'](0x2);else{if(Math['abs'](_0x1813bf)<0.1)_0x1813bf=_0x1813bf[_0x5a1915(0x187)](0x6);else{if(Math[_0x5a1915(0x1d9)](_0x1813bf)<0x1)_0x1813bf=_0x1813bf[_0x5a1915(0x187)](0x5);else{if(Math[_0x5a1915(0x1d9)](_0x1813bf)<0xa)_0x1813bf=_0x1813bf['toFixed'](0x4);else{if(Math[_0x5a1915(0x1d9)](_0x1813bf)<0x64)_0x1813bf=_0x1813bf['toFixed'](0x3);else{if(Math[_0x5a1915(0x1d9)](_0x1813bf)<0x3e8)_0x1813bf=_0x1813bf[_0x5a1915(0x187)](0x2);else _0x1813bf=_0x1813bf[_0x5a1915(0x187)](0x2);}}}}}}else _0x1813bf=Number('0')['toFixed'](0x2);}else _0x54ec1a=Number('0')[_0x5a1915(0x187)](0x2);return{'value':_0x1813bf,'change':_0x54ec1a,'leftTxt':_0x4acbe3,'rightTxt':_0x25ad91};}async function getStartingBalances(_0x1a9a7a,_0x4110e8=!![]){const _0x16f283=_0x393299;if(_0x1a9a7a[_0x16f283(0x197)]!==0x0){const [_0x4d8878,_0x521601,_0x415c88]=getPerf(_0x1a9a7a[0x0],!![]);let _0x4ff27d=[];config[_0x16f283(0x1f2)][_0x16f283(0x145)](_0x5d8d7a=>{const _0x339ec7=_0x16f283;let _0x358706=0x0,_0x4c4762;config[_0x339ec7(0x24c)][_0x339ec7(0x145)](_0x45fb20=>{const _0x141de9=_0x339ec7;let _0x5a5454=_0x45fb20['changes'][_0x141de9(0x158)](_0x122f23=>_0x122f23['coin']==_0x5d8d7a[_0x141de9(0x1c7)]);if(_0x5a5454){_0x358706+=_0x5a5454[_0x141de9(0x293)];if(!_0x4c4762)_0x4c4762=_0x5a5454[_0x141de9(0x231)];}}),_0x4ff27d[_0x339ec7(0x1c3)]({'coin':_0x5d8d7a[_0x339ec7(0x1c7)],'number':_0x358706,'initialprice':_0x4c4762});});const _0x44120f={'basecoin':_0x4d8878,'eur':_0x521601,'usd':_0x415c88,'coins':_0x4ff27d};if(_0x4110e8)proxyEmit('starting-balances',_0x44120f);startingBalances=_0x44120f;}}function headlessMode(_0x515073){const _0x254102=_0x393299;let _0x17ed29=_0x515073['portfolio'],_0x2542d4=_0x515073[_0x254102(0x15c)],_0x35e45b=[];for(let _0x1053b8 of _0x17ed29){if(_0x1053b8[_0x254102(0x1c7)]!=config[_0x254102(0x16f)]){if(_0x1053b8[_0x254102(0x214)]>=_0x2542d4/0x64){if(_0x1053b8[_0x254102(0x289)])_0x35e45b[_0x254102(0x1c3)](_0x1053b8);}else{if(_0x1053b8[_0x254102(0x214)]<=-_0x2542d4/0x64){if(_0x1053b8['valid'])_0x35e45b[_0x254102(0x1c3)](_0x1053b8);}}}}_0x35e45b[_0x254102(0x197)]>0x0&&placeOrder(_0x35e45b);}function notifyBalance(_0x50a40f){const _0x7fd9d2=_0x393299;let _0x2c59c8=_0x50a40f[_0x7fd9d2(0x1f2)],_0x448ee5=_0x50a40f[_0x7fd9d2(0x15c)],_0x55323c=[];for(let _0x43038e of _0x2c59c8){if(_0x43038e[_0x7fd9d2(0x1c7)]!=config['basecoin']){if(_0x43038e[_0x7fd9d2(0x214)]>=_0x448ee5/0x64){if(_0x43038e['valid'])_0x55323c[_0x7fd9d2(0x1c3)](_0x43038e);}else{if(_0x43038e[_0x7fd9d2(0x214)]<=-_0x448ee5/0x64){if(_0x43038e[_0x7fd9d2(0x289)])_0x55323c[_0x7fd9d2(0x1c3)](_0x43038e);}}}}if(_0x55323c[_0x7fd9d2(0x197)]>0x0){let _0x4f96d0=_0x55323c['map'](_0x222e61=>_0x222e61[_0x7fd9d2(0x1c7)]);_0x4f96d0[_0x7fd9d2(0x21a)]();let _0x3a5703=_0x4f96d0[_0x7fd9d2(0x1bb)](',\x20');if(!lastCoinsToBalance)logHistory(_0x7fd9d2(0x1ba),_0x7fd9d2(0x14d));lastCoinsToBalance=_0x3a5703;}}function symbolToCoin(_0x20da46){const _0x5b6004=_0x393299;let _0x260d2d;if(_0x20da46[_0x5b6004(0x1b4)]('/'+config[_0x5b6004(0x16f)]))_0x260d2d=_0x20da46['replace']('/'+config[_0x5b6004(0x16f)],'');if(_0x20da46['includes'](config[_0x5b6004(0x16f)]+'/'))_0x260d2d=_0x20da46[_0x5b6004(0x188)](config['basecoin']+'/','');return _0x260d2d;}async function unlockOrders(){const _0x404ee5=_0x393299;if(allOrdersPlaced&&lockOrders==ORDERS[_0x404ee5(0x183)]){logger[_0x404ee5(0x24e)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x211a26=await getCoins();[currentCoins,currentCoinsAll]=_0x211a26,validateOrdersState=_0x404ee5(0x1fc),persistOpenOrders([]),lockOrders=ORDERS[_0x404ee5(0x1b1)],logger[_0x404ee5(0x24e)](_0x404ee5(0x260));}}async function validateOrders(_0x1394c4){const _0x4e8924=_0x393299;if(_0x1394c4)validateOrdersState=_0x1394c4;logger[_0x4e8924(0x24e)](_0x4e8924(0x251)+validateOrdersState+_0x4e8924(0x162)+(lockOrders==0x1?_0x4e8924(0x27e):lockOrders==0x2?_0x4e8924(0x29f):_0x4e8924(0x149)));let _0x3c61fb=[],_0x3feb2f=config[_0x4e8924(0x1ac)]==_0x4e8924(0x276)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4e8924(0x17d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4e8924(0x183)])return;logger[_0x4e8924(0x24e)](_0x4e8924(0x296)+validateOrdersState),lastOrders[_0x4e8924(0x145)](_0x128e1d=>{const _0x4e59ff=_0x4e8924;let _0x4dac5c=![];_0x128e1d[_0x4e59ff(0x1d1)]>0x0&&(_0x4dac5c=!![]),_0x3c61fb[_0x4e59ff(0x1c3)](_0x4dac5c),_0x4dac5c&&config['ordertype']!=_0x4e59ff(0x276)&&logHistory(_0x4e59ff(0x287),_0x4e59ff(0x20b)+_0x128e1d[_0x4e59ff(0x129)]+'\x20'+_0x128e1d['side']+'\x20#'+formatResult(_0x128e1d[_0x4e59ff(0x1d1)],0x8)+'\x20@'+formatResult(_0x128e1d['price'],0x8));}),_0x3c61fb[_0x4e8924(0x145)]((_0x49d89a,_0x39b9a3)=>{const _0x5c7175=_0x4e8924;if(_0x49d89a)lastOrders[_0x5c7175(0x299)](_0x39b9a3,0x1);}),persistOpenOrders(lastOrders);const _0x1181c2=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4e8924(0x1b7);if(validateOrdersState=='initial'){validateOrdersState=_0x4e8924(0x135);if(_0x3c61fb[_0x4e8924(0x1b4)](![])){if(config[_0x4e8924(0x1ac)]==_0x4e8924(0x276)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4e8924(0x135)){if(_0x3c61fb[_0x4e8924(0x1b4)](![])){}else{if(allOrdersPlaced){if(config[_0x4e8924(0x1ac)]==_0x4e8924(0x276)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4e8924(0x1c8))_0x3c61fb['includes'](![])&&(config['ordertype']==_0x4e8924(0x276)?logHistory(_0x4e8924(0x249),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4e8924(0x152)](_0x3feb2f*validateOrderInterval/0xea60)+_0x4e8924(0x21d)+_0x1181c2):(await cancelOrders(),logHistory(_0x4e8924(0x249),_0x4e8924(0x18b)+Math['round'](_0x3feb2f*validateOrderInterval/0xea60)+_0x4e8924(0x21d)+_0x1181c2))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x4e8924(0x276))logHistory(_0x4e8924(0x249),_0x4e8924(0x14a)+_0x1181c2);await unlockOrders();}}}}}async function cancelOrders(){const _0x498ac1=_0x393299;lastOrders[_0x498ac1(0x145)](async _0x1e0ecc=>{const _0x3e3d63=_0x498ac1;try{const _0xa2a6f7=await exchange[_0x3e3d63(0x288)](_0x1e0ecc[_0x3e3d63(0x1ad)],_0x1e0ecc['symbol']);}catch(_0x511b23){if(_0x511b23[_0x3e3d63(0x29d)]()[_0x3e3d63(0x1b4)](_0x3e3d63(0x1b0))){}else await handleError(_0x511b23,'cancelOrders()');}});}async function initCoinResults(_0x38275f){const _0x183066=_0x393299;_0x38275f?logger[_0x183066(0x24e)](_0x183066(0x232)+_0x38275f):logger[_0x183066(0x24e)](_0x183066(0x2a3)),config[_0x183066(0x1f2)][_0x183066(0x145)](_0x1a5f3f=>{const _0x56209e=_0x183066;if(!_0x1a5f3f[_0x56209e(0x204)]&&_0x1a5f3f['coin']!=config[_0x56209e(0x16f)]){const _0x5842e6=currentCoins[_0x56209e(0x158)](_0x91796c=>_0x91796c[_0x56209e(0x1c7)]==_0x1a5f3f[_0x56209e(0x1c7)]),_0x247932=global['ticker'][noslash(_0x1a5f3f[_0x56209e(0x129)])];let _0x3433e4=_0x5842e6?_0x5842e6['number']:null,_0x1aac64=_0x1a5f3f[_0x56209e(0x235)]?0x1/_0x247932:_0x247932,_0x167370;config[_0x56209e(0x24c)][_0x56209e(0x145)](_0x3fdbce=>{const _0x1135b0=_0x56209e;!_0x167370&&(_0x167370=_0x3fdbce[_0x1135b0(0x136)]['find'](_0x34493a=>_0x34493a[_0x1135b0(0x1c7)]==_0x1a5f3f[_0x1135b0(0x1c7)]),_0x167370&&(_0x3433e4=_0x167370[_0x1135b0(0x293)],_0x1aac64=_0x167370[_0x1135b0(0x231)]));});let _0x3ef8dd=dbCoinResults[_0x56209e(0x1f9)]('coins')[_0x56209e(0x158)]({'coin':_0x1a5f3f[_0x56209e(0x1c7)]})['value']();if(!_0x3ef8dd){const _0x1552b4={'coin':_0x1a5f3f[_0x56209e(0x1c7)],'number':_0x3433e4,'breakeven':_0x1aac64,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x56209e(0x1f9)](_0x56209e(0x1b2))[_0x56209e(0x1c3)](_0x1552b4)[_0x56209e(0x2b4)]();}else{if(_0x38275f&&_0x1a5f3f[_0x56209e(0x1c7)]==_0x38275f){const _0x78470e={'coin':_0x1a5f3f[_0x56209e(0x1c7)],'number':_0x3433e4,'breakeven':_0x1aac64,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x56209e(0x1b2))[_0x56209e(0x158)]({'coin':_0x1a5f3f[_0x56209e(0x1c7)]})['assign'](_0x78470e)[_0x56209e(0x2b4)]();}}}});}async function updateCoinResults(_0x1d757c,_0x12bd1e=![]){const _0x592f52=_0x393299;let _0x2aeeaa,_0x39fb79,_0x220d64,_0x6607dd,_0x5b64d7,_0x20daad,_0x47b18c=dbCoinResults[_0x592f52(0x1f9)](_0x592f52(0x1b2))[_0x592f52(0x158)]({'coin':_0x1d757c[_0x592f52(0x1c7)]})[_0x592f52(0x1f1)](),_0x1bd737=![];Object[_0x592f52(0x29c)](_0x47b18c)[_0x592f52(0x145)](([_0x417833,_0x9a8cd5])=>{if(_0x9a8cd5==null)_0x1bd737=!![];});(!_0x47b18c||_0x1bd737)&&(await initCoinResults(_0x1d757c['coin']),_0x47b18c=dbCoinResults[_0x592f52(0x1f9)](_0x592f52(0x1b2))[_0x592f52(0x158)]({'coin':_0x1d757c[_0x592f52(0x1c7)]})[_0x592f52(0x1f1)]());_0x1d757c['reverse']&&(_0x20daad={'filled':_0x1d757c[_0x592f52(0x1d1)]*_0x1d757c[_0x592f52(0x231)],'amount':_0x1d757c['filled']*_0x1d757c['price'],'side':_0x1d757c['side']==_0x592f52(0x201)?_0x592f52(0x15f):_0x592f52(0x201),'price':0x1/_0x1d757c['price']},_0x1d757c={..._0x1d757c,..._0x20daad});_0x12bd1e?_0x39fb79=_0x1d757c[_0x592f52(0x1b6)]=='buy'?_0x47b18c[_0x592f52(0x293)]+_0x1d757c[_0x592f52(0x1d1)]:_0x47b18c[_0x592f52(0x293)]-_0x1d757c[_0x592f52(0x1d1)]:_0x39fb79=await getCoinNumber(_0x1d757c[_0x592f52(0x1c7)]);if(_0x1d757c['fee']&&_0x1d757c['fee'][_0x592f52(0x275)]==config[_0x592f52(0x16f)])_0x2aeeaa=_0x1d757c[_0x592f52(0x1f5)][_0x592f52(0x138)];else{if(_0x1d757c[_0x592f52(0x1f5)]&&_0x1d757c[_0x592f52(0x1f5)][_0x592f52(0x275)]==_0x592f52(0x224)&&!_0x12bd1e)_0x2aeeaa=_0x1d757c[_0x592f52(0x1f5)]['cost']*global['ticker']['BNB'+config['basecoin']];else _0x2aeeaa=defaultFee*_0x1d757c[_0x592f52(0x1d1)]*_0x1d757c[_0x592f52(0x231)];}_0x1d757c[_0x592f52(0x1b6)]==_0x592f52(0x15f)?(_0x220d64=_0x39fb79!=0x0?(_0x47b18c[_0x592f52(0x134)]*_0x47b18c[_0x592f52(0x293)]+_0x1d757c[_0x592f52(0x231)]*(_0x39fb79-_0x47b18c[_0x592f52(0x293)])+_0x2aeeaa)/_0x39fb79:0x0,_0x6607dd=_0x47b18c[_0x592f52(0x209)]):(_0x220d64=_0x39fb79!=0x0?(_0x47b18c[_0x592f52(0x134)]*_0x47b18c['number']-_0x1d757c[_0x592f52(0x231)]*(_0x47b18c[_0x592f52(0x293)]-_0x39fb79)+_0x2aeeaa)/_0x39fb79:0x0,_0x6607dd=_0x47b18c[_0x592f52(0x209)]+(_0x1d757c['price']-_0x47b18c[_0x592f52(0x134)])*_0x1d757c[_0x592f52(0x1d1)]);_0x5b64d7=(_0x1d757c[_0x592f52(0x231)]-_0x220d64-_0x2aeeaa/_0x1d757c[_0x592f52(0x1d1)])*_0x39fb79;let _0x465eaf={'coin':_0x1d757c[_0x592f52(0x1c7)],'number':_0x39fb79,'breakeven':formatResult(_0x220d64,0x8),'realized':formatResult(_0x6607dd,0x8),'unrealized':formatResult(_0x5b64d7,0x8),'fees':formatResult(_0x47b18c[_0x592f52(0x2aa)]+_0x2aeeaa,0x8),'sells':_0x1d757c[_0x592f52(0x1b6)]==_0x592f52(0x201)?_0x47b18c[_0x592f52(0x292)]+0x1:_0x47b18c['sells'],'buys':_0x1d757c[_0x592f52(0x1b6)]=='buy'?_0x47b18c[_0x592f52(0x25b)]+0x1:_0x47b18c[_0x592f52(0x25b)]};dbCoinResults['get'](_0x592f52(0x1b2))[_0x592f52(0x158)]({'coin':_0x1d757c[_0x592f52(0x1c7)]})[_0x592f52(0x2a4)](_0x465eaf)['write']();if(!_0x12bd1e){if(_0x1d757c[_0x592f52(0x1f5)]&&_0x1d757c['fee'][_0x592f52(0x275)]==_0x592f52(0x224)){const _0x172319=currentCoins[_0x592f52(0x158)](_0x3c8158=>_0x3c8158[_0x592f52(0x1c7)]==_0x592f52(0x224));if(_0x172319){let _0x5ef601=dbCoinResults[_0x592f52(0x1f9)](_0x592f52(0x1b2))['find']({'coin':_0x592f52(0x224)})['value']();_0x465eaf={..._0x5ef601,'number':_0x172319[_0x592f52(0x293)]},dbCoinResults[_0x592f52(0x1f9)](_0x592f52(0x1b2))['find']({'coin':_0x592f52(0x224)})['assign'](_0x465eaf)['write']();}}}}async function placeOrder(_0x22a884){const _0x4738ea=_0x393299,_0x3366f9=config[_0x4738ea(0x1ac)]==_0x4738ea(0x276)?_0x4738ea(0x276):_0x4738ea(0x19c);if(lockOrders==ORDERS[_0x4738ea(0x1b1)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4738ea(0x183)],allOrdersPlaced=![],validateOrdersState='initial';let _0x473538=![];lastOrders=[];for(const _0x54e1bd of _0x22a884){let _0x389e97,_0x18dc5e,_0x23f89e,_0x307c7a,_0x3ff19f,_0xeb7571=_0x54e1bd[_0x4738ea(0x129)];try{const _0x270236=await exchange[_0x4738ea(0x217)](_0xeb7571);_0x389e97=_0x54e1bd['reverse']?0x1/_0x54e1bd['last']:_0x54e1bd['last'],_0x18dc5e=_0x270236[_0x4738ea(0x1e5)],_0x23f89e=_0x270236[_0x4738ea(0x2a2)];_0x54e1bd[_0x4738ea(0x235)]?(_0x307c7a=_0x54e1bd[_0x4738ea(0x1b6)]==_0x4738ea(0x15f)?_0x4738ea(0x201):_0x4738ea(0x15f),_0x3ff19f=Math[_0x4738ea(0x1d9)](_0x54e1bd[_0x4738ea(0x1f8)])/_0x389e97):(_0x307c7a=_0x54e1bd['side'],_0x3ff19f=Math[_0x4738ea(0x1d9)](_0x54e1bd[_0x4738ea(0x1f8)]));_0x3366f9==_0x4738ea(0x19c)&&(config[_0x4738ea(0x1ac)]==_0x4738ea(0x270)&&(_0x389e97=_0x307c7a=='buy'?_0x18dc5e:_0x23f89e),config[_0x4738ea(0x1ac)]==_0x4738ea(0x166)&&(_0x389e97=_0x307c7a==_0x4738ea(0x15f)?_0x23f89e:_0x18dc5e));_0x3ff19f=formatResult(_0x3ff19f,0x8),_0x389e97=formatResult(_0x389e97,0x8);const _0x315fd1=_0x307c7a==_0x4738ea(0x201)?config[_0x4738ea(0x1d7)]?String[_0x4738ea(0x269)]('0x'+config[_0x4738ea(0x1d7)])+'\x20':'':config[_0x4738ea(0x27c)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x1d9528=_0x3366f9=='market'?_0x4738ea(0x1c2):config[_0x4738ea(0x1ac)]==_0x4738ea(0x270)?_0x4738ea(0x283):_0x4738ea(0x1af),_0x274c06=(Math[_0x4738ea(0x1a7)](Math[_0x4738ea(0x14c)]()*0x35a4e900)+0x5f5e100)[_0x4738ea(0x29d)]();lastOrders[_0x4738ea(0x1c3)]({'customId':_0x274c06,'symbol':_0xeb7571,'coin':_0x54e1bd[_0x4738ea(0x1c7)],'amount':_0x3ff19f,'price':_0x389e97,'side':_0x307c7a,'reverse':_0x54e1bd['reverse'],'filled':0x0});if(_0x3366f9=='market')logHistory('order',''+_0x315fd1+_0x1d9528+_0x4738ea(0x22f)+_0xeb7571+'\x20'+_0x307c7a+'\x20#'+formatResult(_0x3ff19f,0x8)+'\x20@'+formatResult(_0x389e97,0x8));else logHistory(_0x4738ea(0x287),''+_0x315fd1+_0x1d9528+_0x4738ea(0x22f)+_0xeb7571+'\x20'+_0x307c7a+'\x20#'+formatResult(_0x3ff19f,0x8)+'\x20@'+formatResult(_0x389e97,0x8));const _0xcc059c=await exchange['createOrder'](_0xeb7571,_0x3366f9,_0x307c7a,_0x3ff19f,_0x389e97);logger[_0x4738ea(0x24e)]('ID:\x20'+_0xcc059c['id']+_0x4738ea(0x1dc)+_0x274c06);const _0x49df96=lastOrders['length']-0x1;if(_0x49df96>=0x0&&lastOrders[_0x49df96][_0x4738ea(0x139)]==_0x274c06){lastOrders[_0x49df96][_0x4738ea(0x1ad)]=_0xcc059c['id'];if(_0xcc059c['amount'])lastOrders[_0x49df96][_0x4738ea(0x286)]=_0xcc059c[_0x4738ea(0x286)];if(_0xcc059c[_0x4738ea(0x231)])lastOrders[_0x49df96]['price']=_0xcc059c[_0x4738ea(0x231)];lastOrders[_0x49df96][_0x4738ea(0x1f5)]=_0xcc059c[_0x4738ea(0x1f5)];}if(config[_0x4738ea(0x154)]!=0x0){let _0x1da846=null;if(cooldownTracker[_0x4738ea(0x197)]==config[_0x4738ea(0x154)]-0x1)_0x1da846=cooldownTracker[_0x4738ea(0x157)]();const _0x455a1b=getTimeStamp();cooldownTracker['push'](_0x455a1b);if(_0x1da846){const _0x244411=fns[_0x4738ea(0x1fb)](new Date(_0x455a1b),new Date(_0x1da846));if(_0x244411<cooldownInterval){logHistory('error','Executed\x20'+config['cooldown']+_0x4738ea(0x18d)+cooldownInterval/0x3c+_0x4738ea(0x1b9)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x37504c){if(_0x37504c[_0x4738ea(0x29d)]()[_0x4738ea(0x1b4)](_0x4738ea(0x236)))lastOrders=lastOrders[_0x4738ea(0x234)](_0x40ab6b=>_0x40ab6b[_0x4738ea(0x129)]!=_0xeb7571),logHistory(_0x4738ea(0x2ac),_0x4738ea(0x27d)+_0xeb7571),_0x473538=!![];else{if(_0x37504c[_0x4738ea(0x29d)]()[_0x4738ea(0x1b4)](_0x4738ea(0x19f)))lastOrders=lastOrders[_0x4738ea(0x234)](_0x3e2a80=>_0x3e2a80[_0x4738ea(0x129)]!=_0xeb7571),logHistory('error',_0x4738ea(0x22b)+_0xeb7571),_0x473538=!![];else{if(_0x37504c[_0x4738ea(0x29d)]()[_0x4738ea(0x1b4)](_0x4738ea(0x29e)))lastOrders=lastOrders[_0x4738ea(0x234)](_0x28c172=>_0x28c172[_0x4738ea(0x129)]!=_0xeb7571),logHistory('error','Order\x20is\x20invalid:\x20'+_0xeb7571),_0x473538=!![];else _0x37504c[_0x4738ea(0x29d)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4738ea(0x234)](_0x189540=>_0x189540[_0x4738ea(0x129)]!=_0xeb7571),logHistory('error',_0x4738ea(0x27d)+_0xeb7571),_0x473538=!![]):(lastOrders=lastOrders[_0x4738ea(0x234)](_0x342ad7=>_0x342ad7[_0x4738ea(0x129)]!=_0xeb7571),await handleError(_0x37504c,_0x4738ea(0x1ca),_0xeb7571));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4738ea(0x197)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4abffd=config[_0x4738ea(0x1ac)]==_0x4738ea(0x276)?validateOrderTimeout*0x3c*0x3e8:config[_0x4738ea(0x17d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x56fc58=_0x4738ea;validateOrders(_0x56fc58(0x1c8));},_0x4abffd);}else unlockOrders();_0x473538&&config['headless']&&await pauseBot(_0x4738ea(0x274)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4738ea(0x249),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4738ea(0x2b1)]&&logHistory('error',_0x4738ea(0x2ab));else lockOrders!=ORDERS[_0x4738ea(0x1b1)]&&(!config[_0x4738ea(0x2b1)]&&(config[_0x4738ea(0x1ac)]==_0x4738ea(0x276)?logHistory(_0x4738ea(0x2ac),_0x4738ea(0x258)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x12582b){const _0x2f3940=_0x393299,_0x2b94af={...config,'openOrders':_0x12582b};let _0x34af5b=dbConfig[_0x2f3940(0x1f9)](_0x2f3940(0x169))[_0x2f3940(0x158)]({'botID':botID})[_0x2f3940(0x1f1)]();_0x34af5b&&dbConfig[_0x2f3940(0x1f9)](_0x2f3940(0x169))['find']({'botID':botID})[_0x2f3940(0x2a4)](_0x2b94af)[_0x2f3940(0x2b4)]();}function restoreOrders(){const _0xd5000b=_0x393299;let _0x50e5d4;config['openOrders']&&allOpenOrders[_0xd5000b(0x145)](_0x2a8034=>{const _0x10991e=_0xd5000b,_0x3bc351=config[_0x10991e(0x1aa)][_0x10991e(0x158)](_0x237ed8=>_0x237ed8[_0x10991e(0x1ad)]==_0x2a8034['id']);_0x3bc351&&(lastOrders[_0x10991e(0x1c3)](_0x3bc351),_0x50e5d4=_0x2a8034[_0x10991e(0x15d)]);});if(lastOrders[_0xd5000b(0x197)]>0x0){lockOrders=ORDERS[_0xd5000b(0x183)],validateOrdersState=_0xd5000b(0x135),allOrdersPlaced=!![];const _0x5794d4=new Date()[_0xd5000b(0x2b6)](),_0x78db9b=config[_0xd5000b(0x1ac)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xd5000b(0x17d)]*0x3c*0x3e8;if(_0x50e5d4+_0x78db9b>_0x5794d4){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b4385=_0xd5000b;validateOrders(_0x1b4385(0x1c8));},_0x50e5d4+_0x78db9b-_0x5794d4);}else validateOrders(_0xd5000b(0x1c8));}}async function sendMetricsTelegram(){const _0x4e6985=_0x393299;if(!coinsLoaded){process[_0x4e6985(0x16b)]({'telegrammsg':_0x4e6985(0x179)},_0x340b1d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4388f5='';if(config['showname'])_0x4388f5='<b>'+config[_0x4e6985(0x1e6)]+_0x4e6985(0x1ae);else _0x4388f5='<b>Bot\x20'+botID+_0x4e6985(0x1ae);const _0x2f2c5b=getKPIs(_0x4e6985(0x16f)),_0x3b8b1c=getKPIs(_0x4e6985(0x1b3),config[_0x4e6985(0x1b3)]),_0x1b73f9=getKPIs('net-basecoin'),_0x66b0e6=getKPIs(_0x4e6985(0x252),config[_0x4e6985(0x1b3)]);_0x4388f5+='<pre>',_0x4388f5+=_0x2f2c5b[_0x4e6985(0x29b)]+_0x4e6985(0x167)+_0x2f2c5b[_0x4e6985(0x1f1)]+'\x0a',_0x4388f5+=_0x2f2c5b['rightTxt']+':\x20'+_0x2f2c5b[_0x4e6985(0x1cb)]+'%\x0a',_0x4388f5+=_0x3b8b1c[_0x4e6985(0x29b)]+_0x4e6985(0x167)+_0x3b8b1c[_0x4e6985(0x1f1)]+'\x0a',_0x4388f5+=_0x3b8b1c[_0x4e6985(0x1bc)]+':\x20'+_0x3b8b1c[_0x4e6985(0x1cb)]+'%\x0a',_0x4388f5+=_0x1b73f9['leftTxt']+':\x20'+_0x1b73f9[_0x4e6985(0x1f1)]+'\x20('+config['basecoin']+')\x0a',_0x4388f5+=_0x1b73f9[_0x4e6985(0x1bc)]+':\x20'+_0x1b73f9['change']+_0x4e6985(0x141)+config[_0x4e6985(0x16f)]+')\x0a',_0x4388f5+=_0x66b0e6[_0x4e6985(0x29b)]+':\x20'+_0x66b0e6[_0x4e6985(0x1f1)]+'\x20('+config[_0x4e6985(0x1b3)]+')\x0a',_0x4388f5+=_0x66b0e6[_0x4e6985(0x1bc)]+':\x20'+_0x66b0e6[_0x4e6985(0x1cb)]+'%\x20('+config['fiat']+')\x0a',_0x4388f5+=_0x4e6985(0x281),process[_0x4e6985(0x16b)]({'telegrammsg':_0x4388f5},_0xa0787d=>{});}async function sendPortfolioTelegram(){const _0x5bfa26=_0x393299;if(!coinsLoaded){process['send']({'telegrammsg':_0x5bfa26(0x179)},_0x2f94e5=>{});return;}let _0xdd4e6b='';if(config['showname'])_0xdd4e6b=_0x5bfa26(0x298)+config[_0x5bfa26(0x1e6)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0xdd4e6b=_0x5bfa26(0x13b)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xdd4e6b+=_0x5bfa26(0x161),_0xdd4e6b+=_0x5bfa26(0x1e2),_0xdd4e6b+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xdd4e6b+=_0x5bfa26(0x1e2),currentCoins[_0x5bfa26(0x145)](_0x30a0e2=>{const _0x2c45d8=_0x5bfa26;_0xdd4e6b+=_0x30a0e2[_0x2c45d8(0x1c7)][_0x2c45d8(0x2b0)](0x7)+'|\x20'+formatPad(_0x30a0e2[_0x2c45d8(0x255)],0x2,0x6)+'|\x20'+formatPad(_0x30a0e2[_0x2c45d8(0x20f)],0x2,0x6)+'|\x20'+formatPad(_0x30a0e2[_0x2c45d8(0x214)]*0x64,0x2,0x6)+'\x0a';}),_0xdd4e6b+=_0x5bfa26(0x281),process['send']({'telegrammsg':_0xdd4e6b},_0x2cdead=>{});}function formatPad(_0xa329ba,_0x27c3ab,_0x1ed0ae){const _0x2e901a=_0x393299,_0x47caaf=formatResultString(_0xa329ba,_0x27c3ab);return _0x47caaf?_0x47caaf['padStart'](_0x1ed0ae):''[_0x2e901a(0x253)](_0x1ed0ae);}function logHistory(_0x6f1b49,_0x16f8b2,_0x209bd3=''){const _0x1c9312=_0x393299;let _0x26707a={'time':getTimeStamp(),'type':_0x6f1b49,'event':_0x16f8b2};dbLogs[_0x1c9312(0x1f9)](_0x1c9312(0x271))['push'](_0x26707a)[_0x1c9312(0x2b4)]();if(_0x209bd3=='')_0x209bd3=_0x16f8b2;proxyEmit(_0x1c9312(0x165),{'log':_0x26707a,'summary':_0x209bd3}),process['send']({'telegram':{..._0x26707a,'botname':config[_0x1c9312(0x1e6)],'showname':config['showname']}},_0x2583ac=>{}),logger[_0x1c9312(0x1a0)](''+_0x26707a[_0x1c9312(0x165)]);}function emitHistory(_0x3fa59d={}){const _0x5920e6=_0x393299;Object[_0x5920e6(0x282)](_0x3fa59d)[_0x5920e6(0x197)]==0x0&&(_0x3fa59d={'type':[_0x5920e6(0x287),_0x5920e6(0x165)],'event':'','page':0x1});if(_0x3fa59d[_0x5920e6(0x1d0)][_0x5920e6(0x1b4)](_0x5920e6(0x165)))_0x3fa59d['type']['splice'](_0x3fa59d[_0x5920e6(0x1d0)]['indexOf']('event'),0x1,_0x5920e6(0x2ac),'warning',_0x5920e6(0x249));if(dbLogs['has'](_0x5920e6(0x271))[_0x5920e6(0x1f1)]()){let _0x1dcda9=dbLogs[_0x5920e6(0x1f9)](_0x5920e6(0x271))[_0x5920e6(0x234)](_0x5491a9=>{const _0x3b9fa2=_0x5920e6;if(_0x3fa59d[_0x3b9fa2(0x1d0)][_0x3b9fa2(0x197)]==0x0)return![];else return _0x3fa59d[_0x3b9fa2(0x1d0)][_0x3b9fa2(0x1b4)](_0x5491a9[_0x3b9fa2(0x1d0)]);})[_0x5920e6(0x234)](_0x415b57=>{const _0x130dba=_0x5920e6;if(_0x3fa59d['event']=='')return!![];else return _0x415b57[_0x130dba(0x165)][_0x130dba(0x1ea)]()[_0x130dba(0x1b4)](_0x3fa59d[_0x130dba(0x165)][_0x130dba(0x1ea)]());})[_0x5920e6(0x1ef)](_0x5920e6(0x23d)),_0x9172ff=_0x1dcda9[_0x5920e6(0x1f1)]()[_0x5920e6(0x197)];_0x1dcda9=_0x1dcda9[_0x5920e6(0x235)]()[_0x5920e6(0x171)]((_0x3fa59d[_0x5920e6(0x17f)]-0x1)*logPageSize,_0x3fa59d[_0x5920e6(0x17f)]*logPageSize-0x1)[_0x5920e6(0x235)]()[_0x5920e6(0x1f1)](),proxyEmit(_0x5920e6(0x180),{'logs':_0x1dcda9,'total':_0x9172ff});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5e66a2){const _0x45dfeb=_0x393299;if(dbLogs[_0x45dfeb(0x190)]('logs')[_0x45dfeb(0x1f1)]()){const _0x43134a=dbLogs['get']('logs')['sortBy'](_0x45dfeb(0x23d))[_0x45dfeb(0x234)](_0x1b8bf6=>{const _0x5b6ca1=_0x45dfeb;return _0x1b8bf6[_0x5b6ca1(0x1d0)]=='order';})[_0x45dfeb(0x1f1)]();dbLogs[_0x45dfeb(0x1f9)](_0x45dfeb(0x271))[_0x45dfeb(0x20d)]()[_0x45dfeb(0x2b4)](),dbLogs['get'](_0x45dfeb(0x271))[_0x45dfeb(0x2a4)](_0x43134a)[_0x45dfeb(0x2b4)](),emitHistory(_0x5e66a2);}}async function pauseBot(_0x7028a8=''){const _0x39126e=_0x393299,_0x47845f=new Date()[_0x39126e(0x2b6)]();if(!lastErrorShown||_0x47845f-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x47845f;!lastBotPause?(lastBotPause=_0x47845f,consecutivePauses=0x1):(_0x47845f-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x39126e(0x16b)]({'stop':_0x39126e(0x1bf)},_0x2c08a1=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x7028a8)_0x7028a8+=_0x39126e(0x20a);logHistory(_0x39126e(0x2ac),_0x7028a8+_0x39126e(0x22c)+pauseBotInterval/0xea60+_0x39126e(0x1c0)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x698c3f=_0x393299;process['send']({'stop':_0x698c3f(0x1e8)},_0x44f140=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x20c562,_0x1af764){const _0x16b2e2=_0x393299;if(_0x20c562[_0x16b2e2(0x29d)]()['includes'](_0x16b2e2(0x142)))return logHistory(_0x16b2e2(0x2ac),config[_0x16b2e2(0x250)]+_0x16b2e2(0x140)),![];else{if(_0x20c562[_0x16b2e2(0x29d)]()[_0x16b2e2(0x1b4)](_0x16b2e2(0x1e4)))return logHistory(_0x16b2e2(0x2ac),config[_0x16b2e2(0x250)]+_0x16b2e2(0x12d)),![];else{if(_0x20c562[_0x16b2e2(0x29d)]()['includes']('AuthenticationError'))return logHistory(_0x16b2e2(0x2ac),config[_0x16b2e2(0x250)]+_0x16b2e2(0x1f4)),logHistory(_0x16b2e2(0x2ac),_0x16b2e2(0x25a)),![];else await handleError(_0x20c562,_0x1af764);}}}async function handleError(_0x42d1da,_0x59228b,_0x27ff3a=''){const _0x130ff8=_0x393299,_0x43a0de=config[_0x130ff8(0x250)]||'Exchange';if(_0x42d1da['toString']()[_0x130ff8(0x1b4)]('DDoSProtection')||_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)](_0x130ff8(0x16d)))await pauseBot(config[_0x130ff8(0x250)]+_0x130ff8(0x26e));else{if(_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)]('ExchangeNotAvailable')||_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)](_0x130ff8(0x1fe)))await pauseBot(config[_0x130ff8(0x250)]+_0x130ff8(0x28a));else{if(_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)](_0x130ff8(0x1eb)))await pauseBot(config[_0x130ff8(0x250)]+_0x130ff8(0x1a2));else{if(_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0x130ff8(0x27b));else{if(_0x42d1da['toString']()[_0x130ff8(0x1b4)](_0x130ff8(0x1dd)))logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x205)),logHistory('error',_0x130ff8(0x213)),await killBot();else{if(_0x42d1da[_0x130ff8(0x29d)]()['includes'](_0x130ff8(0x207)))logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x20c)),logHistory('error',_0x130ff8(0x213)),await killBot();else{if(_0x42d1da instanceof ccxt['NetworkError'])logger['debug'](_0x130ff8(0x211),_0x42d1da),await pauseBot(config[_0x130ff8(0x250)]+_0x130ff8(0x12a));else{if(_0x42d1da['toString']()[_0x130ff8(0x1b4)]('API-key\x20format\x20invalid'))logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x20a)+config[_0x130ff8(0x250)]+_0x130ff8(0x247)),logHistory(_0x130ff8(0x2ac),_0x130ff8(0x213)),await killBot();else{if(_0x42d1da['toString']()[_0x130ff8(0x1b4)](_0x130ff8(0x1e4)))logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x20a)+config[_0x130ff8(0x250)]+_0x130ff8(0x1f0)),logHistory(_0x130ff8(0x2ac),_0x130ff8(0x213)),await killBot();else{if(_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)](_0x130ff8(0x1e0)))logHistory(_0x130ff8(0x2ac),_0x59228b+'\x20|\x20'+config['exchange']+_0x130ff8(0x1e1)),logHistory(_0x130ff8(0x2ac),_0x130ff8(0x213)),await killBot();else{if(_0x42d1da[_0x130ff8(0x29d)]()[_0x130ff8(0x1b4)](_0x130ff8(0x277)))logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x280)+_0x27ff3a);else _0x42d1da instanceof ccxt[_0x130ff8(0x1b8)]?(logger[_0x130ff8(0x24e)]('Uncaught\x20ExchangeError:',_0x42d1da),logHistory(_0x130ff8(0x2ac),_0x59228b+_0x130ff8(0x20a)+config[_0x130ff8(0x250)]+_0x130ff8(0x127))):(logger[_0x130ff8(0x1a0)](_0x59228b+'\x20|\x20Error\x20details:\x20',_0x42d1da),await pauseBot(_0x130ff8(0x1d8)));}}}}}}}}}}}function formatResult(_0x127f4f,_0x1cfd9f){const _0x545c5a=_0x393299;return parseFloat(_0x127f4f[_0x545c5a(0x187)](_0x1cfd9f));}function formatResultTruncate(_0x513d8f,_0x5b9159){const _0x3427ae=_0x393299;let _0x11da0d=formatResultString(_0x513d8f,0xa),_0x956fbd=_0x11da0d[_0x3427ae(0x272)]('.');return _0x956fbd!=-0x1&&(_0x11da0d=_0x11da0d[_0x3427ae(0x171)](0x0,_0x956fbd+_0x5b9159+0x1)),Number(_0x11da0d);}function formatResultString(_0x498c6c,_0x458358){const _0x23a721=_0x393299;let _0x133ddd;if(!(''+_0x498c6c)[_0x23a721(0x1b4)]('e'))_0x133ddd=+(Math[_0x23a721(0x152)](_0x498c6c+'e+'+_0x458358)+'e-'+_0x458358);else{let _0x46286f=(''+_0x498c6c)[_0x23a721(0x16a)]('e'),_0x5237a7='';+_0x46286f[0x1]+_0x458358>0x0&&(_0x5237a7='+'),_0x133ddd=+(Math[_0x23a721(0x152)](+_0x46286f[0x0]+'e'+_0x5237a7+(+_0x46286f[0x1]+_0x458358))+'e-'+_0x458358);}return Number(_0x133ddd)[_0x23a721(0x187)](_0x458358);}function getServerTime(){const _0x4117d8=_0x393299,_0x3bbe17=new Date();return _0x3bbe17[_0x4117d8(0x24a)]()+'/'+(_0x3bbe17[_0x4117d8(0x27f)]()+0x1)['toString']()[_0x4117d8(0x253)](0x2,'0')+'/'+_0x3bbe17[_0x4117d8(0x181)]()['toString']()[_0x4117d8(0x253)](0x2,'0')+'\x20'+_0x3bbe17['getHours']()[_0x4117d8(0x29d)]()[_0x4117d8(0x253)](0x2,'0')+':'+_0x3bbe17[_0x4117d8(0x1da)]()[_0x4117d8(0x29d)]()[_0x4117d8(0x253)](0x2,'0')+':'+_0x3bbe17[_0x4117d8(0x132)]()[_0x4117d8(0x29d)]()[_0x4117d8(0x253)](0x2,'0');}function getTimeStamp(){const _0x376295=_0x393299,_0x2eb06c=shiftedTime();return _0x2eb06c[_0x376295(0x24a)]()+'/'+(_0x2eb06c['getMonth']()+0x1)['toString']()[_0x376295(0x253)](0x2,'0')+'/'+_0x2eb06c['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x2eb06c[_0x376295(0x196)]()[_0x376295(0x29d)]()[_0x376295(0x253)](0x2,'0')+':'+_0x2eb06c[_0x376295(0x1da)]()['toString']()[_0x376295(0x253)](0x2,'0')+':'+_0x2eb06c[_0x376295(0x132)]()['toString']()[_0x376295(0x253)](0x2,'0');}function getDate(){const _0x25e8c5=_0x393299,_0x468cab=shiftedTime();return _0x468cab[_0x25e8c5(0x24a)]()+'/'+(_0x468cab[_0x25e8c5(0x27f)]()+0x1)[_0x25e8c5(0x29d)]()[_0x25e8c5(0x253)](0x2,'0')+'/'+_0x468cab[_0x25e8c5(0x181)]()['toString']()[_0x25e8c5(0x253)](0x2,'0');}function getHour(){const _0x5b542b=_0x393299,_0x5f301c=shiftedTime();return _0x5f301c['getHours']()[_0x5b542b(0x29d)]()['padStart'](0x2,'0');}function sleep(_0x562a18){return new Promise(_0x185a2d=>setTimeout(_0x185a2d,_0x562a18));}function shiftedTime(){const _0x443949=_0x393299,_0x170eea=new Date();let _0x1bcfd3=_0x170eea;if(config&&config[_0x443949(0x19d)]!==0x0)_0x1bcfd3=fns['add'](_0x170eea,{'hours':config[_0x443949(0x19d)]});return _0x1bcfd3;}function timer(_0x1d6092){const _0x533e1b=_0x393299,_0x1bd677=new Date();!lasttime?console[_0x533e1b(0x1ce)](getTimeStamp()+_0x533e1b(0x26f),_0x1d6092,_0x1bd677):console[_0x533e1b(0x1ce)](getTimeStamp()+':\x20timer\x20>',_0x1d6092,(_0x1bd677-lasttime)/0x3e8),lasttime=_0x1bd677;}