const _0x2d865c=_0x4a8e;(function(_0x25877c,_0x257a26){const _0xa2423a=_0x4a8e,_0x42677d=_0x25877c();while(!![]){try{const _0x3e29e4=-parseInt(_0xa2423a(0x29d))/0x1*(-parseInt(_0xa2423a(0x2b3))/0x2)+-parseInt(_0xa2423a(0x330))/0x3*(parseInt(_0xa2423a(0x2fc))/0x4)+parseInt(_0xa2423a(0x2bd))/0x5*(-parseInt(_0xa2423a(0x311))/0x6)+-parseInt(_0xa2423a(0x23f))/0x7+-parseInt(_0xa2423a(0x304))/0x8+-parseInt(_0xa2423a(0x353))/0x9+-parseInt(_0xa2423a(0x21c))/0xa*(-parseInt(_0xa2423a(0x270))/0xb);if(_0x3e29e4===_0x257a26)break;else _0x42677d['push'](_0x42677d['shift']());}catch(_0x3db6f4){_0x42677d['push'](_0x42677d['shift']());}}}(_0x48e2,0x84efc));const _0x5b060e=function(){let _0x36e3cf=!![];return function(_0x479740,_0x2b9f5b){const _0x5a5682=_0x36e3cf?function(){const _0x49eb34=_0x4a8e;if(_0x2b9f5b){const _0x30b14d=_0x2b9f5b[_0x49eb34(0x2bc)](_0x479740,arguments);return _0x2b9f5b=null,_0x30b14d;}}:function(){};return _0x36e3cf=![],_0x5a5682;};}(),_0x2a4c1f=_0x5b060e(this,function(){const _0x3d8b72=_0x4a8e;return _0x2a4c1f['toString']()[_0x3d8b72(0x1e9)](_0x3d8b72(0x349))[_0x3d8b72(0x275)]()[_0x3d8b72(0x33b)](_0x2a4c1f)[_0x3d8b72(0x1e9)](_0x3d8b72(0x349));});_0x2a4c1f();'use strict';function _0x48e2(){const _0x51038a=['Huobi','bb-secure.json','format','excluded','stopExchange()','target','has','-results.json','currency','getPortfolio','remainingSymbols','\x20API\x20key\x20is\x20invalid','\x20closed\x20the\x20connection','placeOrder','Crypt','isEqual','./config/','fee','watchTrades','secure','getCoins()','min','success','botID','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','limit','test','netoffset','ORDERS.UNLOCKED','Resetting\x20bot\x20history','showname','length',':\x20Bot\x20','2650AOgKCH','indexOf','active','fetchClosedOrders','2\x20-\x20Handled\x20open\x20orders','getPortfolio(0)','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','coin','exchange','startdate','findIndex','no\x20open\x20orders','amount','map','Initiating\x20exchange\x20reload','.json','USDP','parseISO','change','cancelOrders()','open','Cooldown\x20ended\x20-\x20balancing\x20resumed','ExchangeNotAvailable','slice','\x20minutes','fetchTickers','cancel','price','milliseconds','final','Order\x20amount\x20is\x20invalid:\x20','spot','resetHistory','string','2242527YyfoFU','distribution','startsWith','</pre>','UNLOCKING','watchTrades()','ordertype','fetchBalance','bb-settings.json','getTime','replace','orderstatus','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','exec','getSeconds','loadSymbols()','toLowerCase','\x20|\x20highest\x20fee:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','version','cloneDeep','function','autoliquidity','bot','side','keys','realized','added','percentage','additional\x20symbols\x20','getOpenOrders()','Manual\x20balancing\x20required','average','************','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','performance','AuthenticationError','debug','\x20-\x20bot\x20not\x20started','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','logs','includes','-config.json','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','padStart','ongoing','add','Net\x20','starting-balances','139073DdsupN','startprice','Initializing\x20coin\x20results','limit-high','get','toString','round','entries','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','cooldown','assign','API-key\x20format\x20invalid','createOrder','bot-','split','message','trade','-performance.json','-events.json','getFullYear','usd','Bitget','symbol','fromCodePoint','onepagemode','padEnd','Limit\x20(low-margin)','Order\x20filled:\x20','\x20|\x20','pro','argv','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','max','forEach','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','abs','Invalid\x20API\x20key\x20or\x20secret\x20entered','3\x20-\x20handling\x20FILLED\x20order:\x20','watchTransactions()','rightTxt','limits','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getPortfolio(2)','Failed\x20to\x20load\x20coin\x20data\x20for\x20','<b>Bot\x20','8OPBChm','loadMarkets','basecoin','BNB','emitHistory','balancing\x20resumed','LOCKED','Limit\x20(high-margin)',':\x20timer\x20>','defaults','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ID:\x20','eur','amountToPrecision','balances','Error\x20while\x20deleting\x20files:\x20','2.5.0','filter','\x20exchange','progress','Invalid\x20symbol:\x20','storeHeadless','12174YVTFbF','type','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','OnMaintenance','fiat','BTC','customId','\x20has\x20a\x2024h\x20drop\x20of\x20','apply','10NidTZl','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timeout','Executing\x20exchange\x20reload','2\x20-\x20Orders\x20unlocked','threshold','1\x20-\x20Handle\x20open\x20orders','UNLOCKED','page','exchanges','placeOrder()','./version.json','\x20-\x20exclude\x20from\x20balancing\x20in\x20the\x20configuration','EUR','coin-loading-progress','enabled','colorscheme','concat','yyyy/MM/dd','net-basecoin','sell','Unknown\x20error\x20occured','fees','1\x20-\x20Unlock\x20orders','\x20portfolio:</b>\x20\x0a\x0a','valid','yargs/yargs','breakeven','red_yellow_blue','2\x20-\x20FILLED\x20known\x20order:\x20','coins','change24h','emojisell','find','datetime','ETH','configuration-stored','storeFiat','Bybit','mkdirSync','\x20order:\x20','delta','NetworkError','getMonth','USDT','floor','fetchTicker','Resetting\x20coin\x20results:\x20','001','Exception\x20thrown\x20in\x20','Error:\x20Invalid\x20argument\x20','initial','stringify','total','-------------------------------\x0a','timeshift','/output-000.log','Pausing\x20for\x20','highest','cost','\x20>\x20','existsSync','set','274844ukulyA','ask','freeze','bots','buys','buy','Order(s)\x20not\x20validated\x20after\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','8084272HKAFdz','Order\x20is\x20invalid:\x20','write','openOrders','random','status','\x20API\x20secret\x20is\x20invalid','configuration','Net\x20effect','portfolio','removed','date','toFixed','1904382KFuTYo','getDate','getHours','\x20|\x20Custom\x20ID:\x20','decrypt','event','1\x20-\x20FILLED:\x20','writeFile','botname','sells','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','apiSecret','password','Pausing\x20bot\x20for\x20','lowdb/adapters/FileSync','ticker','restart','getMinutes','USDC','DDoSProtection','apiPassword',',\x20must\x20be\x20a\x203\x20digit\x20number','closed','order','full','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','<b>','value','\x20>\x20[DEBUG]\x20','BNB/','remove','30pURRHQ','event-history','util','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','sort','Exchange','exchange\x20not\x20reloaded','args','unlinkSync','recent20','apiKey','constructor','send','recreateCoinResults()','canceled','net-fiat','Portfolio\x20change\x20detected:\x20','date-fns','***','\x20hour','Saving\x20configuration','\x20network\x20error','market','storeConfiguration','./logs/','(((.+)+)+)+$','\x20metrics:</b>\x20\x0a\x0a','0\x20-\x20EXECUTION:\x20','ORDERS.LOCKED','sortBy','warning','running','lowdb','watchOrders','Error\x20details:','1816056rXDtIz','uncaughtException','Avoiding\x20continuous\x20order\x20attempts','none','\x20minutes\x20-\x20','offset','headless','\x20:\x20','path','join','privateKey','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','recreate','log','differenceInSeconds','reverse','initclient','number','ORDERS.UNLOCKING','liquidity','last','\x20change','time','sendMetricsTelegram','\x20|\x20exchange:\x20','filled','OrderNotFound','InsufficientFunds','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','changes','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','splice','Waited\x20','data','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','parse','close','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','leftTxt','USD','sha256','search','emojibuy','toUpperCase','basecoinvalue','Reset\x20|\x20','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','push','orderId','substring','showConfig','2.3.5','must\x20be\x20greater\x20than\x20minimum\x20amount','Executed\x20','<pre>','BUSD','timestamp','Unfilled\x20order(s)\x20canceled\x20after\x20','error'];_0x48e2=function(){return _0x51038a;};return _0x48e2();}const ccxt=require('ccxt'),low=require(_0x2d865c(0x350)),FileSync=require(_0x2d865c(0x31f)),fs=require('fs'),fns=require(_0x2d865c(0x341)),Crypt=require('hybrid-crypto-js')[_0x2d865c(0x209)],util=require(_0x2d865c(0x332)),argv=require(_0x2d865c(0x2d7))(process[_0x2d865c(0x28e)][_0x2d865c(0x234)](0x2))[_0x2d865c(0x28e)],path=require(_0x2d865c(0x1c8));let exchange;global[_0x2d865c(0x320)]={},global[_0x2d865c(0x22f)]={};const usdBasecoins=[_0x2d865c(0x1e7),_0x2d865c(0x1f7),'TUSD',_0x2d865c(0x2e9),_0x2d865c(0x323),_0x2d865c(0x22d)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2d865c(0x2fe)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2d865c(0x2c4)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2d865c(0x2c8))[_0x2d865c(0x252)],botID=process['argv'][0x2]||_0x2d865c(0x2ed),pattern=/^[0-9]{3}$/;!pattern[_0x2d865c(0x215)](botID)&&(console['log'](_0x2d865c(0x2ef)+botID+_0x2d865c(0x326)),killBot());const userID=process[_0x2d865c(0x28e)][0x3]||'',configpath=userID?_0x2d865c(0x20b)+userID+'/':_0x2d865c(0x20b),logspath=userID?_0x2d865c(0x348)+userID+'/':_0x2d865c(0x348),loggerfile=fs['createWriteStream'](logspath+_0x2d865c(0x2f5),{'flags':'a'});!fs[_0x2d865c(0x2fa)](configpath)&&fs[_0x2d865c(0x2e4)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x2d865c(0x27d)+botID+_0x2d865c(0x269),logfile=configpath+_0x2d865c(0x27d)+botID+'-events.json',performancefile=configpath+_0x2d865c(0x27d)+botID+_0x2d865c(0x281),coinresultsfile=configpath+_0x2d865c(0x27d)+botID+_0x2d865c(0x202),settingsfile=configpath+_0x2d865c(0x247),securefile=configpath+_0x2d865c(0x1fc),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2d865c(0x2a6)]({'logs':[],'version':serverversion})[_0x2d865c(0x306)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x2d865c(0x306)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2d865c(0x2a6)]({'bot':[],'version':serverversion})[_0x2d865c(0x306)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2d865c(0x2a6)]({'coins':[],'version':serverversion})[_0x2d865c(0x306)]();function _0x4a8e(_0x32a946,_0x5eddf1){const _0x44cafd=_0x48e2();return _0x4a8e=function(_0x2a4c1f,_0x5b060e){_0x2a4c1f=_0x2a4c1f-0x1c1;let _0x48e229=_0x44cafd[_0x2a4c1f];return _0x48e229;},_0x4a8e(_0x32a946,_0x5eddf1);}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2d865c(0x1e8),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3eec8b=>{const _0x1fac4d=_0x2d865c;console[_0x1fac4d(0x1cd)](_0x3eec8b);},'simple':_0x668a62=>{const _0x4807d1=_0x2d865c;console[_0x4807d1(0x1cd)](_0x668a62),loggerfile['write'](util[_0x4807d1(0x1fd)](_0x668a62)+'\x0a');},'full':async(_0xb7717a,_0x137148='')=>{const _0x1e2ad1=_0x2d865c;let _0x2ab2b1;if(config[_0x1e2ad1(0x219)])_0x2ab2b1=getTimeStamp()+':\x20'+config[_0x1e2ad1(0x319)]+_0x1e2ad1(0x2f9)+_0xb7717a;else _0x2ab2b1=getTimeStamp()+_0x1e2ad1(0x21b)+botID+_0x1e2ad1(0x2f9)+_0xb7717a;console[_0x1e2ad1(0x1cd)](_0x2ab2b1),loggerfile['write'](util['format'](_0x2ab2b1)+'\x0a'),_0x137148&&(console['log'](_0x137148),loggerfile['write'](util['format'](_0x137148)+'\x0a'));},'debug':async(_0x50246a,_0x1a841d='')=>{const _0x1356d2=_0x2d865c;let _0x58e545;if(config[_0x1356d2(0x219)])_0x58e545=getTimeStamp()+':\x20'+config[_0x1356d2(0x319)]+'\x20>\x20[DEBUG]\x20'+_0x50246a;else _0x58e545=getTimeStamp()+_0x1356d2(0x21b)+botID+_0x1356d2(0x32d)+_0x50246a;if(debugging)console[_0x1356d2(0x1cd)](_0x58e545);loggerfile[_0x1356d2(0x306)](util[_0x1356d2(0x1fd)](_0x58e545)+'\x0a');if(_0x1a841d){if(debugging)console['log'](_0x1a841d);loggerfile[_0x1356d2(0x306)](util[_0x1356d2(0x1fd)](_0x1a841d)+'\x0a');}}};process['on'](_0x2d865c(0x1c1),function(_0x49d355){const _0x184e7c=_0x2d865c;logHistory(_0x184e7c(0x1fa),_0x184e7c(0x261)),logger['debug']('Uncaught\x20Exception:',_0x49d355);});settings[_0x2d865c(0x2f4)]!=config['timeshift']&&updateTimeshift(settings[_0x2d865c(0x2f4)]);settings[_0x2d865c(0x288)]!=config[_0x2d865c(0x288)]&&updateOnepagemode(settings[_0x2d865c(0x288)]);process['send']({'started':_0x2d865c(0x34f)},_0x48801=>{}),initializeProcessListeners();function proxyEmit(_0x3a9a2c,_0x2708ad=null){const _0x38345a=_0x2d865c;process[_0x38345a(0x33c)]({'function':_0x3a9a2c,'args':_0x2708ad},_0x535b56=>{});}function initializeProcessListeners(){const _0x43de8c=_0x2d865c;process['on'](_0x43de8c(0x27f),_0x17923f=>{const _0x479cf1=_0x43de8c;switch(Object[_0x479cf1(0x258)](_0x17923f)[0x0]){case _0x479cf1(0x2f4):_0x17923f[_0x479cf1(0x2f4)]!=undefined&&(settings[_0x479cf1(0x2f4)]=_0x17923f[_0x479cf1(0x2f4)],updateTimeshift(settings[_0x479cf1(0x2f4)]));break;case _0x479cf1(0x288):_0x17923f[_0x479cf1(0x288)]!=undefined&&(settings[_0x479cf1(0x288)]=_0x17923f[_0x479cf1(0x288)],updateOnepagemode(settings['onepagemode']));break;case _0x479cf1(0x2ff):_0x17923f['bots']!=undefined&&(bots=JSON[_0x479cf1(0x1e3)](_0x17923f['bots']),proxyEmit(_0x479cf1(0x2ff),bots));break;case _0x479cf1(0x254):switch(_0x17923f[_0x479cf1(0x254)]){case _0x479cf1(0x1d0):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x479cf1(0x2a1):emitHistory(_0x17923f[_0x479cf1(0x337)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x17923f[_0x479cf1(0x337)]);break;case _0x479cf1(0x204):getPortfolio(_0x17923f[_0x479cf1(0x337)]);break;case _0x479cf1(0x347):storeConfiguration(_0x17923f[_0x479cf1(0x337)]);break;case _0x479cf1(0x2b2):storeHeadless(_0x17923f[_0x479cf1(0x337)]);break;case _0x479cf1(0x2e2):storeFiat(_0x17923f[_0x479cf1(0x337)]);break;case _0x479cf1(0x23d):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x479cf1(0x208):placeOrder(_0x17923f[_0x479cf1(0x337)]);break;case'cancelLoading':cancelLoading();break;case _0x479cf1(0x1f2):showConfig();break;case _0x479cf1(0x1d7):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x5d97e7=null,_0x113bb7=![]){const _0xdb6e00=_0x2d865c;logger[_0xdb6e00(0x264)](_0xdb6e00(0x1ed)+(_0x5d97e7&&_0x5d97e7[_0xdb6e00(0x21a)]>0x0?_0xdb6e00(0x25c)+_0x5d97e7[_0xdb6e00(0x1c9)](','):'no\x20additional\x20symbols')+_0xdb6e00(0x28c)+(_0x113bb7?'exchange\x20reloaded':_0xdb6e00(0x336))+_0xdb6e00(0x1d8)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x113bb7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xdb6e00(0x33a)]!=''&&config[_0xdb6e00(0x33a)]!=_0xdb6e00(0x342)){loadingProgress=0x0;if(_0x113bb7){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x379512){handleErrorNoStop(_0x379512,_0xdb6e00(0x24e));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x5d97e7);const _0x56a480=await getCoins();[currentCoins,currentCoinsAll]=_0x56a480,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0xdb6e00(0x329)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xdb6e00(0x21a)]==0x0&&allOpenOrders[_0xdb6e00(0x21a)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x475a09=_0x2d865c;exchangeStopped=!![];try{await exchange[_0x475a09(0x1e4)]();}catch(_0x46ae7d){await handleError(_0x46ae7d,_0x475a09(0x1ff));}}async function reloadExchange(){const _0x5ca373=_0x2d865c;logger['debug'](_0x5ca373(0x22b));while(lockOrders!=ORDERS[_0x5ca373(0x2c4)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5ca373(0x264)](_0x5ca373(0x2c0)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5096a6=config[_0x2d865c(0x225)],_0xaa0f69=config[_0x2d865c(0x33a)],_0x834a42=config[_0x2d865c(0x31c)],_0x1d0687=config[_0x2d865c(0x325)]){const _0x337cc7=_0x2d865c;exchange&&await stopExchange();!supportedExchanges()[_0x337cc7(0x268)](_0x5096a6)&&(logHistory(_0x337cc7(0x1fa),_0x337cc7(0x303)+_0x5096a6+_0x337cc7(0x2af)),killBot());const _0x2d6a2e=ccxt[_0x337cc7(0x28d)][_0x5096a6[_0x337cc7(0x24f)]()];exchange=new _0x2d6a2e({'apiKey':_0xaa0f69,'secret':_0x834a42,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1d0687)exchange[_0x337cc7(0x31d)]=_0x1d0687;}function setStableCoins(){const _0x25f84d=_0x2d865c;let _0x40d397=config[_0x25f84d(0x29f)]==_0x25f84d(0x2e0)?'ETH':_0x25f84d(0x2b9),_0x597bbb=!allSymbols['includes'](_0x40d397+'/USD')?_0x25f84d(0x2e9):_0x25f84d(0x1e7),_0x174632=!allSymbols[_0x25f84d(0x268)](_0x40d397+'/EUR')?_0x597bbb:_0x25f84d(0x2ca);stablecoins={'eur':{'coin':''+_0x40d397+_0x174632,'symbol':_0x40d397+'/'+_0x174632},'usd':{'coin':''+_0x40d397+_0x597bbb,'symbol':_0x40d397+'/'+_0x597bbb}};}async function initwsCcxt(_0xb7b24c){const _0x55e8e2=_0x2d865c;_0xb7b24c==null&&(_0xb7b24c=[],config[_0x55e8e2(0x30d)][_0x55e8e2(0x291)](_0x7067a7=>{const _0x2e27be=_0x55e8e2;if(!_0x7067a7[_0x2e27be(0x1fe)]&&_0x7067a7[_0x2e27be(0x224)]!=config['basecoin'])_0xb7b24c[_0x2e27be(0x1ef)](_0x7067a7[_0x2e27be(0x286)]);}));if(!_0xb7b24c[_0x55e8e2(0x268)](stablecoins[_0x55e8e2(0x2a9)][_0x55e8e2(0x286)]))_0xb7b24c['push'](stablecoins[_0x55e8e2(0x2a9)][_0x55e8e2(0x286)]);if(!_0xb7b24c[_0x55e8e2(0x268)](stablecoins[_0x55e8e2(0x284)][_0x55e8e2(0x286)]))_0xb7b24c[_0x55e8e2(0x1ef)](stablecoins[_0x55e8e2(0x284)][_0x55e8e2(0x286)]);if(config['exchange'][_0x55e8e2(0x241)]('Binance')){if(!_0xb7b24c[_0x55e8e2(0x268)](_0x55e8e2(0x32e)+config[_0x55e8e2(0x29f)]))_0xb7b24c[_0x55e8e2(0x1ef)](_0x55e8e2(0x32e)+config[_0x55e8e2(0x29f)]);}loadCoins(_0xb7b24c),_0xb7b24c=validateSymbols(_0xb7b24c);const _0x30e7f7=async _0x35fb99=>{const _0x2ce98a=_0x55e8e2;let _0x37eb97;try{const _0x48dbf4=await exchange[_0x2ce98a(0x236)](_0x35fb99);Object[_0x2ce98a(0x277)](_0x48dbf4)[_0x2ce98a(0x291)](_0x42a17d=>{const _0x174fa5=_0x2ce98a;_0x37eb97=_0x42a17d[0x1][_0x174fa5(0x286)],global['ticker'][noslash(_0x37eb97)]=_0x42a17d[0x1][_0x174fa5(0x1d4)];});}catch(_0x807e82){await handleError(_0x807e82,'initTickers()',_0x37eb97);}},_0x3b314b=async _0x328bcd=>{const _0x811eec=_0x55e8e2;while(!![]){if(!botPaused)try{const _0x476a2f=await exchange[_0x811eec(0x20d)](_0x328bcd);global[_0x811eec(0x320)][noslash(_0x476a2f[0x0][_0x811eec(0x286)])]=_0x476a2f[0x0][_0x811eec(0x238)],await sleep(0x3e8);}catch(_0x47673e){if(!exchangeStopped)await handleError(_0x47673e,_0x811eec(0x244),_0x328bcd);}else await sleep(0x64);}},_0x114d1a=async _0x49a8de=>{const _0x595846=_0x55e8e2;while(!![]){if(!botPaused)try{const _0x31fcc7=await exchange[_0x595846(0x2eb)](_0x49a8de);global[_0x595846(0x22f)][_0x31fcc7['symbol']]=_0x31fcc7[_0x595846(0x25b)],await sleep(0x3c*0x3e8);}catch(_0x5c251a){if(!exchangeStopped)await handleError(_0x5c251a,'fetchTickers()',_0x49a8de);}else await sleep(0x64);}},_0x5b6801=async _0x4fb47a=>{const _0x2a42c0=_0x55e8e2;while(!![]){if(!botPaused)try{const _0x431c05=await exchange[_0x2a42c0(0x351)](_0x4fb47a);_0x431c05[_0x2a42c0(0x291)](_0x14cdc8=>{updateNumberCoinsCcxt(_0x14cdc8);});}catch(_0x173a9b){if(!exchangeStopped)await handleError(_0x173a9b,'watchOrders()');}else await sleep(0x64);}};_0x30e7f7(_0xb7b24c),_0xb7b24c['forEach'](_0x544301=>{_0x3b314b(_0x544301),_0x114d1a(_0x544301),_0x5b6801(_0x544301);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x5b718a=_0x2d865c;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x225733=await getCoins(),[_0x55921e,_0x382c41]=_0x225733;let _0x3b8eb0=[];currentCoins[_0x5b718a(0x291)](_0xfdfb03=>{const _0xb79df8=_0x5b718a,_0xff06f6=_0x55921e['find'](_0x349f45=>_0x349f45[_0xb79df8(0x224)]==_0xfdfb03[_0xb79df8(0x224)]);if(_0xff06f6){if(_0xfdfb03[_0xb79df8(0x1d1)]!=_0xff06f6[_0xb79df8(0x1d1)]){let _0x11a417;if(_0xfdfb03[_0xb79df8(0x224)]!=config[_0xb79df8(0x29f)]){const _0x11d39f=global[_0xb79df8(0x320)][noslash(_0xfdfb03['symbol'])];_0x11a417=_0xfdfb03[_0xb79df8(0x1cf)]?0x1/_0x11d39f:_0x11d39f;}else _0x11a417=0x1;_0x3b8eb0[_0xb79df8(0x1ef)]({'coin':_0xfdfb03['coin'],'symbol':_0xfdfb03['symbol'],'price':_0x11a417,'number':Number(formatResult(_0xff06f6[_0xb79df8(0x1d1)]-_0xfdfb03[_0xb79df8(0x1d1)],0x8)),'basecoinvalue':_0x11a417*(_0xff06f6[_0xb79df8(0x1d1)]-_0xfdfb03[_0xb79df8(0x1d1)])});}}});if(_0x3b8eb0[_0x5b718a(0x21a)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x5b718a(0x264)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x3b8eb0[0x0][_0x5b718a(0x1ec)]+_0x5b718a(0x250)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x5b718a(0x293)](_0x3b8eb0[0x0][_0x5b718a(0x1ec)])>lastFees['highest']){delete _0x3b8eb0[0x0][_0x5b718a(0x286)],delete _0x3b8eb0[0x0][_0x5b718a(0x1ec)];let _0x292e9f=[],_0x3215e5=[...config['liquidity']]||[],_0x1d4e9b=config[_0x5b718a(0x1d3)];_0x3215e5['sort']((_0x398f10,_0x2ac1a0)=>_0x398f10[_0x5b718a(0x30f)]>_0x2ac1a0[_0x5b718a(0x30f)]?-0x1:_0x2ac1a0['date']>_0x398f10[_0x5b718a(0x30f)]?0x1:0x0);const _0x304071=getDate();if(_0x3215e5[0x0]){const _0xe97e7=fns[_0x5b718a(0x1e3)](_0x3215e5[0x0][_0x5b718a(0x30f)],_0x5b718a(0x2cf),new Date()),_0x4fa00b=fns[_0x5b718a(0x1e3)](_0x304071,_0x5b718a(0x2cf),new Date());if(fns[_0x5b718a(0x20a)](_0xe97e7,_0x4fa00b)){_0x292e9f=_0x3215e5[0x0][_0x5b718a(0x1dd)];const _0x4d8086=_0x292e9f[_0x5b718a(0x2de)](_0x8b9878=>_0x8b9878[_0x5b718a(0x224)]==_0x3b8eb0[0x0]['coin']);_0x4d8086?(_0x4d8086[_0x5b718a(0x1d1)]+=_0x3b8eb0[0x0]['number'],_0x4d8086['number']==0x0&&(_0x292e9f=_0x292e9f[_0x5b718a(0x2ae)](_0x47da74=>{const _0x4ab151=_0x5b718a;return _0x47da74[_0x4ab151(0x224)]!=_0x3b8eb0[0x0][_0x4ab151(0x224)];}))):_0x292e9f[_0x5b718a(0x1ef)](_0x3b8eb0[0x0]);const _0xf5a6a6=_0x1d4e9b[_0x5b718a(0x2de)](_0x5a5372=>_0x5a5372[_0x5b718a(0x30f)]==_0x304071);_0xf5a6a6[_0x5b718a(0x1dd)]=_0x292e9f;}else _0x1d4e9b[_0x5b718a(0x1ef)]({'date':_0x304071,'changes':[_0x3b8eb0[0x0]]});}const _0xf4a2cc=_0x1d4e9b[_0x5b718a(0x2de)](_0x52ea8a=>_0x52ea8a[_0x5b718a(0x30f)]==_0x304071);if(_0xf4a2cc){let _0x1dbbeb=!![];_0xf4a2cc[_0x5b718a(0x1dd)][_0x5b718a(0x291)](_0x41cb52=>{if(_0x41cb52['number']!=0x0)_0x1dbbeb=![];}),_0x1dbbeb&&(_0x1d4e9b=_0x1d4e9b[_0x5b718a(0x2ae)](_0x2606f2=>{const _0x1f25a7=_0x5b718a;return _0x2606f2[_0x1f25a7(0x30f)]!=_0x304071;}));}let _0x12d372=dbConfig[_0x5b718a(0x274)](_0x5b718a(0x256))['find']({'botID':botID})[_0x5b718a(0x32c)]();_0x12d372&&(dbConfig['get'](_0x5b718a(0x256))['find']({'botID':botID})['assign']({'liquidity':_0x1d4e9b})[_0x5b718a(0x306)](),config[_0x5b718a(0x1d3)]=_0x1d4e9b),logHistory('success',_0x5b718a(0x340)+Math[_0x5b718a(0x293)](_0x3b8eb0[0x0][_0x5b718a(0x1d1)])+'\x20'+_0x3b8eb0[0x0][_0x5b718a(0x224)]+'\x20'+(_0x3b8eb0[0x0][_0x5b718a(0x1d1)]>0x0?_0x5b718a(0x25a):_0x5b718a(0x30e))+_0x5b718a(0x2be)),proxyEmit(_0x5b718a(0x30b),emittedConfiguration());}else logger[_0x5b718a(0x264)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x5b718a(0x293)](_0x3b8eb0[0x0][_0x5b718a(0x1d1)])+'\x20'+_0x3b8eb0[0x0][_0x5b718a(0x224)]+'\x20'+(_0x3b8eb0[0x0][_0x5b718a(0x1d1)]>0x0?_0x5b718a(0x25a):_0x5b718a(0x30e)));transactionDetected=!![],currentCoins=_0x55921e,currentCoinsAll=_0x382c41;}else logger[_0x5b718a(0x264)](_0x5b718a(0x340)+Math[_0x5b718a(0x293)](_0x3b8eb0[0x0][_0x5b718a(0x1d1)])+'\x20'+_0x3b8eb0[0x0][_0x5b718a(0x224)]+'\x20'+(_0x3b8eb0[0x0][_0x5b718a(0x1d1)]>0x0?_0x5b718a(0x25a):_0x5b718a(0x30e))+_0x5b718a(0x299)),currentCoins=_0x55921e,currentCoinsAll=_0x382c41;}await sleep(watchTransactionsInterval);}catch(_0x435733){if(!exchangeStopped)await handleError(_0x435733,_0x5b718a(0x296));}else await sleep(0x64);}}async function loadSymbols(){const _0x5e18c4=_0x2d865c;try{markets=await exchange[_0x5e18c4(0x29e)](),allSymbols=[],Object[_0x5e18c4(0x277)](markets)[_0x5e18c4(0x291)](_0x261344=>{const _0x362e1a=_0x5e18c4;_0x261344[0x1][_0x362e1a(0x21e)]&&_0x261344[0x1][_0x362e1a(0x23c)]&&allSymbols[_0x362e1a(0x1ef)](_0x261344[0x0]);});}catch(_0x26efdf){throw _0x26efdf;}}function validateSymbols(_0x5b667f){let _0xc0734b=[];return _0x5b667f['forEach'](_0x21330d=>{const _0x5f0d1c=_0x4a8e;!allSymbols[_0x5f0d1c(0x268)](_0x21330d)?logHistory(_0x5f0d1c(0x1fa),_0x5f0d1c(0x2b1)+_0x21330d+_0x5f0d1c(0x2c9)):_0xc0734b[_0x5f0d1c(0x1ef)](_0x21330d);}),_0xc0734b;}async function initclient(){const _0x1b4109=_0x2d865c;proxyEmit(_0x1b4109(0x30b),emittedConfiguration()),proxyEmit(_0x1b4109(0x2c6),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1b4109(0x2ab),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1f4057=getNormalizedPerformance();emitPerformance(_0x1f4057),getStartingBalances(_0x1f4057);}async function toggleBotMode(){const _0x53b3be=_0x2d865c;let _0x5b2c80=dbConfig['get']('bot')[_0x53b3be(0x2de)]({'botID':botID})[_0x53b3be(0x32c)]();if(_0x5b2c80){const _0x1f5019=!_0x5b2c80[_0x53b3be(0x1c6)];dbConfig[_0x53b3be(0x274)](_0x53b3be(0x256))[_0x53b3be(0x2de)]({'botID':botID})[_0x53b3be(0x27a)]({'headless':_0x1f5019})[_0x53b3be(0x306)](),config['headless']=_0x1f5019,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x36914b=>{});}async function loadCoins(_0x224ce6){const _0x10b3cd=_0x2d865c;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x199e64,_0x139c78=0x0,_0x353798=0x0;_0x224ce6[_0x10b3cd(0x291)](_0xd15e03=>{const _0xa97e9=_0x10b3cd;loading['remainingSymbols'][_0xa97e9(0x1ef)](_0xd15e03);}),loadingCanceled=![];let _0xc019b2=![];while(_0x199e64!=_0x224ce6[_0x10b3cd(0x21a)]+maxLoadingProgress){_0x199e64=loadingProgress,_0x224ce6[_0x10b3cd(0x291)](_0x12a37b=>{const _0x468f15=_0x10b3cd;if(global[_0x468f15(0x320)][noslash(_0x12a37b)]){loading[_0x468f15(0x205)]=loading[_0x468f15(0x205)][_0x468f15(0x2ae)](_0x12337e=>_0x12337e!=_0x12a37b);if(!watchedSymbols['includes'](_0x12a37b))watchedSymbols[_0x468f15(0x1ef)](_0x12a37b);_0x199e64++;}}),loading[_0x10b3cd(0x2b0)]=Math[_0x10b3cd(0x276)](_0x199e64/(_0x224ce6[_0x10b3cd(0x21a)]+maxLoadingProgress)*0x64);loading[_0x10b3cd(0x2b0)]!=0x64&&(_0x353798>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x353798>0x78*0x5&&!_0xc019b2&&(loading['cancel']=!![],emitLoadingProgress(),_0xc019b2=!![],logHistory('error',_0x10b3cd(0x29b)+loading[_0x10b3cd(0x205)][_0x10b3cd(0x1c9)](',\x20')+_0x10b3cd(0x265)),logHistory(_0x10b3cd(0x1fa),_0x10b3cd(0x2f6)+loadCoinsRetryInterval/0xea60+_0x10b3cd(0x2b6)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x335993=_0x10b3cd;process[_0x335993(0x33c)]({'stop':_0x335993(0x321)},_0x39cc1f=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x10b3cd(0x237)]=!![],emitLoadingProgress();break;}else _0x139c78!=loading['progress']&&(_0x139c78=loading[_0x10b3cd(0x2b0)],emitLoadingProgress()),_0x353798++,await sleep(0xc8);}_0x199e64==_0x224ce6[_0x10b3cd(0x21a)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x10b3cd(0x33c)]({'status':_0x10b3cd(0x2cc),'live':_0x10b3cd(0x34f)},_0x10d04c=>{}),_0xc019b2&&logHistory(_0x10b3cd(0x211),_0x10b3cd(0x278)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1dd997=_0x2d865c;proxyEmit(_0x1dd997(0x30b),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0xb3f09f=_0x2d865c;proxyEmit(_0xb3f09f(0x2cb),loading);}async function getFiat(){const _0x17c109=_0x2d865c;let _0x116b4c=global[_0x17c109(0x320)][stablecoins[_0x17c109(0x2a9)][_0x17c109(0x224)]],_0x4a7104=global['ticker'][stablecoins[_0x17c109(0x284)][_0x17c109(0x224)]];return{'eur':Number(_0x116b4c),'usd':Number(_0x4a7104)};}function capitalize(_0x5cb4e7){const _0x33504a=_0x2d865c;return _0x5cb4e7[_0x33504a(0x1f1)](0x0,0x1)[_0x33504a(0x1eb)]()+_0x5cb4e7[_0x33504a(0x1f1)](0x1);}function supportedExchanges(){const _0x422a2e=_0x2d865c,_0x9d0a13=['ws',_0x422a2e(0x236),_0x422a2e(0x2eb),'watchTrades',_0x422a2e(0x351),'cancelOrder',_0x422a2e(0x27c),'fetchOpenOrders',_0x422a2e(0x21f),_0x422a2e(0x246)];let _0x12d5f8=[],_0x5562c2=[],_0x39c43d=ccxt[_0x422a2e(0x28d)][_0x422a2e(0x2c6)];_0x39c43d[_0x422a2e(0x291)](_0x4c0804=>{const _0x1c9a19=_0x422a2e;try{const _0x4bea3e=new ccxt[(_0x1c9a19(0x28d))][_0x4c0804]();_0x5562c2[_0x1c9a19(0x1ef)](_0x4bea3e);}catch(_0x321db1){}}),_0x5562c2['forEach'](_0xd2469f=>{const _0x460431=_0x422a2e;let _0x1f14c4=0x0;_0x9d0a13[_0x460431(0x291)](_0x322e54=>{const _0x2f4b61=_0x460431;_0x322e54 in _0xd2469f['has']&&_0xd2469f[_0x2f4b61(0x201)][_0x322e54]&&_0x1f14c4++;}),_0x1f14c4==_0x9d0a13['length']&&_0x12d5f8[_0x460431(0x1ef)](capitalize(_0xd2469f['id']));});let _0x50044c=[];return _0x39c43d[_0x422a2e(0x291)](_0x29613c=>{const _0x329184=_0x422a2e;_0x29613c=capitalize(_0x29613c);if(!_0x12d5f8['includes'](_0x29613c))_0x50044c[_0x329184(0x1ef)](_0x29613c);}),_0x12d5f8;}function setStartDatePerformance(){const _0x5e9cf5=_0x2d865c;if(config&&config[_0x5e9cf5(0x1d3)][0x0]['changes']['length']!=0x0){const _0x1c1a56=config[_0x5e9cf5(0x1d3)][0x0][_0x5e9cf5(0x1dd)];dbPerformance[_0x5e9cf5(0x274)](_0x5e9cf5(0x1e1))[_0x5e9cf5(0x2de)]({'date':config[_0x5e9cf5(0x226)]})[_0x5e9cf5(0x27a)]({'coins':_0x1c1a56})[_0x5e9cf5(0x306)]();}}async function recreateCoinResults(){const _0x29f231=_0x2d865c;let _0x21b382,_0x2bec1e=[];try{const _0x2a93dd=fns[_0x29f231(0x1fd)](fns[_0x29f231(0x22e)](config['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5c6080 of currentCoins){if(_0x5c6080[_0x29f231(0x224)]!=config[_0x29f231(0x29f)]){let _0xf81d2e=0x0,_0x20f1ad,_0x45838d;_0x21b382=await getAllEventOrders(_0x5c6080[_0x29f231(0x286)]);if(_0x21b382[_0x29f231(0x21a)]>0x0)_0x21b382[_0x29f231(0x291)](_0x5e60a4=>{const _0x5c9b6c=_0x29f231,_0x21819c=_0x5c6080[_0x5c9b6c(0x286)][_0x5c9b6c(0x268)](config[_0x5c9b6c(0x29f)]+'/');_0x2bec1e[_0x5c9b6c(0x1ef)]({'datetime':_0x5e60a4[_0x5c9b6c(0x2df)],'coin':_0x5c6080[_0x5c9b6c(0x224)],'symbol':_0x5c6080[_0x5c9b6c(0x286)],'side':_0x5e60a4[_0x5c9b6c(0x257)],'reverse':_0x21819c,'amount':formatResult(_0x5e60a4[_0x5c9b6c(0x1d9)],0x8),'filled':formatResult(_0x5e60a4[_0x5c9b6c(0x1d9)],0x8),'price':formatResult(_0x5e60a4[_0x5c9b6c(0x238)],0x8)}),_0xf81d2e=_0x5e60a4[_0x5c9b6c(0x257)]==_0x5c9b6c(0x301)?_0xf81d2e+_0x5e60a4[_0x5c9b6c(0x1d9)]:_0xf81d2e-_0x5e60a4[_0x5c9b6c(0x1d9)];if(!_0x45838d)_0x45838d=_0x5e60a4[_0x5c9b6c(0x238)];});_0x20f1ad=_0x5c6080['number']-_0xf81d2e;let _0x5c9164;config[_0x29f231(0x1d3)][_0x29f231(0x291)](_0x527228=>{const _0x3b4af6=_0x29f231;!_0x5c9164&&(_0x5c9164=_0x527228[_0x3b4af6(0x1dd)][_0x3b4af6(0x2de)](_0x22755c=>_0x22755c[_0x3b4af6(0x224)]==_0x5c6080[_0x3b4af6(0x224)]),_0x5c9164&&(_0x20f1ad=_0x5c9164[_0x3b4af6(0x1d1)],_0x45838d=_0x5c9164[_0x3b4af6(0x238)]));});let _0x3b0418=dbCoinResults[_0x29f231(0x274)](_0x29f231(0x2db))[_0x29f231(0x2de)]({'coin':_0x5c6080['coin']})[_0x29f231(0x32c)]();_0x3b0418={'coin':_0x5c6080[_0x29f231(0x224)],'number':_0x20f1ad,'breakeven':_0x45838d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')['find']({'coin':_0x5c6080[_0x29f231(0x224)]})[_0x29f231(0x27a)](_0x3b0418)[_0x29f231(0x306)]();}}_0x2bec1e[_0x29f231(0x334)]((_0x43d6ea,_0x94d715)=>_0x43d6ea[_0x29f231(0x2df)]>_0x94d715[_0x29f231(0x2df)]?0x1:_0x94d715[_0x29f231(0x2df)]>_0x43d6ea[_0x29f231(0x2df)]?-0x1:0x0);let _0x38df97=0x0;for(let _0x18e5c9 of _0x2bec1e){await updateCoinResults(_0x18e5c9,!![]);}}catch(_0x16d7de){await handleError(_0x16d7de,_0x29f231(0x33d));}}async function getAllEventOrders(_0x2aedfb){const _0x2b74a8=_0x2d865c;let _0x5ea6d0=[],_0x1995f8=dbLogs[_0x2b74a8(0x274)](_0x2b74a8(0x267))[_0x2b74a8(0x2ae)](_0x5fce2c=>{const _0x32cdc0=_0x2b74a8,_0x20edd8=_0x5fce2c[_0x32cdc0(0x316)][_0x32cdc0(0x24f)]();return _0x20edd8['includes'](_0x2aedfb[_0x32cdc0(0x24f)]())&&(_0x20edd8[_0x32cdc0(0x268)](_0x32cdc0(0x346))&&_0x20edd8['includes'](_0x32cdc0(0x328))||_0x20edd8['includes'](_0x32cdc0(0x1d9))&&_0x20edd8[_0x32cdc0(0x268)]('order'));})[_0x2b74a8(0x34d)](_0x2b74a8(0x1d6))[_0x2b74a8(0x32c)]();return _0x1995f8['forEach'](_0x44bb5e=>{const _0x2b6464=_0x2b74a8,_0x479574=_0x44bb5e[_0x2b6464(0x316)][_0x2b6464(0x268)]('sell')?_0x2b6464(0x2d1):'buy',_0x4162b1=/#([0-9]|\.)+\s/i,_0x2b55db=Number(_0x4162b1[_0x2b6464(0x24c)](_0x44bb5e[_0x2b6464(0x316)])[0x0]['slice'](0x1)),_0x2879be=/@([0-9]|\.)+$/i,_0x154fae=Number(_0x2879be[_0x2b6464(0x24c)](_0x44bb5e['event'])[0x0][_0x2b6464(0x234)](0x1));_0x5ea6d0['push']({'datetime':_0x44bb5e[_0x2b6464(0x1d6)],'coin':symbolToCoin(_0x2aedfb),'symbol':_0x2aedfb,'side':_0x479574,'amount':_0x2b55db,'filled':_0x2b55db,'price':_0x154fae});}),_0x5ea6d0;}async function getAllOrders(_0x4ec9a0,_0xb15f37){const _0x3f9b15=_0x2d865c;let _0x1cac6c=[];while(_0xb15f37<exchange[_0x3f9b15(0x239)]()){const _0x35b078=0x1f4;try{const _0x1d7eb6=await exchange[_0x3f9b15(0x21f)](_0x4ec9a0,_0xb15f37,_0x35b078);if(_0x1d7eb6[_0x3f9b15(0x21a)])_0xb15f37=_0x1d7eb6[_0x1d7eb6[_0x3f9b15(0x21a)]-0x1][_0x3f9b15(0x1f8)]+0x1,_0x1cac6c=_0x1cac6c[_0x3f9b15(0x2ce)](_0x1d7eb6);else break;}catch(_0xa1f3b8){await handleError(_0xa1f3b8,'getAllOrders()',_0x4ec9a0);}}return _0x1cac6c;}async function validate24hChanges(){const _0x5c135a=_0x2d865c;for(const _0x5a57f9 of currentCoins){if(_0x5a57f9['coin']!=config[_0x5c135a(0x29f)]){let _0x1e1749;_0x5a57f9['reverse']?_0x1e1749=formatResult((0x1/(global['change'][noslash(_0x5a57f9[_0x5c135a(0x286)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1e1749=global['change'][noslash(_0x5a57f9[_0x5c135a(0x286)])],_0x1e1749<config[_0x5c135a(0x2dc)]&&(logHistory(_0x5c135a(0x1fa),_0x5a57f9[_0x5c135a(0x224)]+_0x5c135a(0x2bb)+_0x1e1749+'%'),logHistory(_0x5c135a(0x1fa),_0x5c135a(0x223)),logHistory(_0x5c135a(0x1fa),_0x5c135a(0x213)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x33a960,_0x3e7917){const _0x12f3ba=_0x2d865c;if(!_0x33a960)return!![];const _0xdfcf27=_0x3e7917[_0x12f3ba(0x27e)]('.'),_0x34eb7f=_0x33a960['split']('.');for(var _0x280f4b=0x0;_0x280f4b<_0x34eb7f[_0x12f3ba(0x21a)];_0x280f4b++){const _0x3a2a36=~~_0x34eb7f[_0x280f4b],_0x1949b4=~~_0xdfcf27[_0x280f4b];if(_0x3a2a36<_0x1949b4)return!![];if(_0x3a2a36>_0x1949b4)return![];}return![];}async function oneTimeMigration(){const _0x277222=_0x2d865c;let _0x3b9082=dbLogs[_0x277222(0x274)]('version')[_0x277222(0x32c)]();if(isOlderVersion(_0x3b9082,_0x277222(0x1f3))){let _0x253be6=[];const _0x17df07=dbLogs[_0x277222(0x274)](_0x277222(0x267))[_0x277222(0x32c)]();_0x17df07[_0x277222(0x291)](_0x4d6630=>{const _0x56ab71=_0x277222;_0x253be6[_0x56ab71(0x1ef)]({'time':_0x4d6630[_0x56ab71(0x1d6)],'type':_0x4d6630[_0x56ab71(0x2b4)],'event':_0x4d6630[_0x56ab71(0x316)]});}),dbLogs[_0x277222(0x274)](_0x277222(0x267))['assign'](_0x253be6)[_0x277222(0x306)]();}let _0x1b71f5=dbConfig['get']('version')['value']();if(isOlderVersion(_0x1b71f5,'2.3.5')){let _0x4afcd7=dbConfig[_0x277222(0x274)](_0x277222(0x256))[_0x277222(0x2de)]({'botID':botID})[_0x277222(0x32c)]();if(_0x4afcd7){let _0x51f3ba=[];_0x4afcd7[_0x277222(0x30d)]['forEach'](_0xea270e=>{const _0x3a59f9=_0x277222;_0x51f3ba[_0x3a59f9(0x1ef)]({'coin':_0xea270e[_0x3a59f9(0x224)],'number':_0xea270e['startnumber'],'price':_0xea270e[_0x3a59f9(0x271)]}),delete _0xea270e['startnumber'],delete _0xea270e['startprice'];});if(_0x51f3ba[_0x277222(0x21a)]!==0x0)fs[_0x277222(0x318)](configbackuppath+('starting-balance-'+botID+_0x277222(0x22c)),JSON[_0x277222(0x2f1)](_0x51f3ba,null,0x4),function(_0x15bb8e){if(_0x15bb8e){}});const _0x46a84c=(_0x357344,_0x3064d6)=>{const _0xdd6fe5=_0x277222;let _0x2e4ceb=[];_0x3064d6[_0xdd6fe5(0x291)](_0x3bf3d2=>{const _0x5b19be=_0xdd6fe5,_0x1c7be4=_0x357344[_0x5b19be(0x2de)](_0x26d575=>_0x26d575[_0x5b19be(0x224)]==_0x3bf3d2['coin']);if(!_0x1c7be4)_0x2e4ceb[_0x5b19be(0x1ef)](_0x3bf3d2);});let _0x58aadc=[];return _0x357344[_0xdd6fe5(0x291)](_0x515945=>{const _0x1167e9=_0xdd6fe5,_0x170b95=_0x3064d6['find'](_0x24413f=>_0x24413f[_0x1167e9(0x224)]==_0x515945['coin']);if(!_0x170b95||_0x170b95['number']==0x0&&_0x515945[_0x1167e9(0x1d1)]!=0x0)_0x58aadc[_0x1167e9(0x1ef)](_0x515945);}),{'missingDay1':_0x2e4ceb,'notInDay2':_0x58aadc};},_0x32ab8e=dbPerformance[_0x277222(0x274)](_0x277222(0x1e1))[_0x277222(0x253)]()[_0x277222(0x32c)]();if(_0x32ab8e[_0x277222(0x21a)]>0x1){const {missingDay1:_0x32eb1e,notInDay2:_0x4687c8}=_0x46a84c(_0x51f3ba,_0x32ab8e[0x1][_0x277222(0x2db)]);_0x51f3ba=[..._0x51f3ba,..._0x32eb1e],_0x4687c8['forEach'](_0x403144=>{const _0x377a35=_0x277222;let _0x39d84d=_0x51f3ba[_0x377a35(0x227)](_0x10f59e=>_0x10f59e[_0x377a35(0x224)]==_0x403144['coin']);_0x39d84d!=-0x1&&_0x51f3ba[_0x377a35(0x1df)](_0x39d84d,0x1);});}_0x51f3ba[_0x277222(0x334)]((_0x253059,_0x47ff46)=>_0x253059['coin']>_0x47ff46[_0x277222(0x224)]?0x1:_0x47ff46[_0x277222(0x224)]>_0x253059['coin']?-0x1:0x0);let _0x447268=[{'date':_0x4afcd7[_0x277222(0x226)],'changes':_0x51f3ba}];_0x32ab8e[_0x277222(0x21a)]>0x2&&_0x32ab8e['forEach']((_0x16cc63,_0x1cab8f)=>{const _0x383ec9=_0x277222;if(_0x1cab8f>0x0&&_0x1cab8f<_0x32ab8e[_0x383ec9(0x21a)]-0x1){const {missingDay1:_0x350173,notInDay2:_0x3a7344}=_0x46a84c(_0x32ab8e[_0x1cab8f][_0x383ec9(0x2db)],_0x32ab8e[_0x1cab8f+0x1][_0x383ec9(0x2db)]);_0x51f3ba=[],(_0x350173['length']!=0x0||_0x3a7344[_0x383ec9(0x21a)]!=0x0)&&(_0x350173['length']!=0x0&&_0x51f3ba['push'](..._0x350173),_0x3a7344[_0x383ec9(0x21a)]!=0x0&&(_0x3a7344['forEach'](_0x1c39aa=>{const _0x330206=_0x383ec9;_0x1c39aa[_0x330206(0x1d1)]=-_0x1c39aa[_0x330206(0x1d1)];}),_0x51f3ba[_0x383ec9(0x1ef)](..._0x3a7344)),_0x51f3ba[_0x383ec9(0x334)]((_0xba85a4,_0x410cea)=>_0xba85a4[_0x383ec9(0x224)]>_0x410cea['coin']?0x1:_0x410cea['coin']>_0xba85a4[_0x383ec9(0x224)]?-0x1:0x0),_0x447268['push']({'date':_0x32ab8e[_0x1cab8f+0x1][_0x383ec9(0x30f)],'changes':_0x51f3ba}));}}),dbConfig['get'](_0x277222(0x256))[_0x277222(0x2de)]({'botID':botID})[_0x277222(0x27a)]({..._0x4afcd7,'liquidity':_0x447268})['write']();}}if(isOlderVersion(_0x1b71f5,'2.6.0')){let _0x17a11b=dbConfig[_0x277222(0x274)]('bot')[_0x277222(0x2de)]({'botID':botID})[_0x277222(0x32c)]();if(_0x17a11b){const _0x10cb60=_0x17a11b[_0x277222(0x225)],_0x5d3ebf=_0x10cb60?capitalize(_0x10cb60):'Binance';dbConfig[_0x277222(0x274)](_0x277222(0x256))[_0x277222(0x2de)]({'botID':botID})[_0x277222(0x27a)]({'exchange':_0x5d3ebf})[_0x277222(0x306)]();}}let _0x240384=dbPerformance['get'](_0x277222(0x252))[_0x277222(0x32c)]();isOlderVersion(_0x240384,_0x277222(0x1f3))&&setStartDatePerformance();let _0x4ea7e1=dbCoinResults[_0x277222(0x274)](_0x277222(0x252))[_0x277222(0x32c)]();if(isOlderVersion(_0x4ea7e1,_0x277222(0x2ad))){let _0x1788aa=dbCoinResults[_0x277222(0x274)](_0x277222(0x2db))[_0x277222(0x32c)]();if(_0x1788aa['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x391bdf=_0x2d865c;dbConfig[_0x391bdf(0x2fb)](_0x391bdf(0x252),serverversion)[_0x391bdf(0x306)](),dbPerformance['set'](_0x391bdf(0x252),serverversion)[_0x391bdf(0x306)](),dbLogs[_0x391bdf(0x2fb)](_0x391bdf(0x252),serverversion)[_0x391bdf(0x306)](),dbCoinResults[_0x391bdf(0x2fb)]('version',serverversion)[_0x391bdf(0x306)]();}function getConfiguration(_0x25f835){const _0x1fc97d=_0x2d865c;let _0x25a185=dbConfig[_0x1fc97d(0x274)](_0x1fc97d(0x256))['find']({'botID':_0x25f835})[_0x1fc97d(0x32c)]();if(_0x25a185){let _0x5ce165=![];typeof _0x25a185[_0x1fc97d(0x2c2)]==_0x1fc97d(0x23e)&&(_0x25a185={..._0x25a185,'threshold':Number(_0x25a185['threshold'])},_0x5ce165=!![]),_0x25a185[_0x1fc97d(0x2dc)]==undefined&&(_0x25a185={..._0x25a185,'change24h':-0x14},_0x5ce165=!![]),_0x25a185[_0x1fc97d(0x2b8)]==undefined&&(_0x25a185={..._0x25a185,'fiat':_0x1fc97d(0x1e7)},_0x5ce165=!![]),_0x25a185[_0x1fc97d(0x288)]==undefined&&(_0x25a185={..._0x25a185,'onepagemode':settings[_0x1fc97d(0x288)]},_0x5ce165=!![]),_0x25a185['colorscheme']==undefined&&(_0x25a185={..._0x25a185,'colorscheme':_0x1fc97d(0x2d9)},_0x5ce165=!![]),_0x25a185['autoliquidity']==undefined&&(_0x25a185={..._0x25a185,'autoliquidity':!![]},_0x5ce165=!![]),_0x5ce165&&(_0x25a185={'botID':_0x25a185[_0x1fc97d(0x212)],'exchange':_0x25a185[_0x1fc97d(0x225)],'apiKey':_0x25a185[_0x1fc97d(0x33a)],'apiSecret':_0x25a185['apiSecret'],'apiPassword':_0x25a185['apiPassword'],'basecoin':_0x25a185['basecoin'],'botname':_0x25a185[_0x1fc97d(0x319)],'showname':_0x25a185[_0x1fc97d(0x219)],'threshold':_0x25a185[_0x1fc97d(0x2c2)],'ordertype':_0x25a185[_0x1fc97d(0x245)],'timeout':_0x25a185[_0x1fc97d(0x2bf)],'fiat':_0x25a185[_0x1fc97d(0x2b8)],'startdate':_0x25a185['startdate'],'recreate':_0x25a185[_0x1fc97d(0x1cc)],'timeshift':_0x25a185['timeshift'],'onepagemode':_0x25a185['onepagemode'],'headless':_0x25a185[_0x1fc97d(0x1c6)],'cooldown':_0x25a185[_0x1fc97d(0x279)],'change24h':_0x25a185[_0x1fc97d(0x2dc)],'emojibuy':_0x25a185[_0x1fc97d(0x1ea)],'emojisell':_0x25a185[_0x1fc97d(0x2dd)],'colorscheme':_0x25a185[_0x1fc97d(0x2cd)],'portfolio':_0x25a185[_0x1fc97d(0x30d)],'autoliquidity':_0x25a185[_0x1fc97d(0x255)],'liquidity':_0x25a185[_0x1fc97d(0x1d3)],'openOrders':_0x25a185['openOrders']},dbConfig[_0x1fc97d(0x274)](_0x1fc97d(0x256))['remove']()[_0x1fc97d(0x306)](),dbConfig[_0x1fc97d(0x274)]('bot')['push'](_0x25a185)[_0x1fc97d(0x306)]());}else _0x25a185={'botID':_0x25f835,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x25f835,'showname':![],'threshold':0x3,'ordertype':_0x1fc97d(0x346),'timeout':0x14,'fiat':_0x1fc97d(0x1e7),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x1fc97d(0x288)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1fc97d(0x2d9),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x25a185;}function emittedConfiguration(){const _0x57d72f=_0x2d865c;let _0x5eebcc;if(config['apiKey']=='')_0x5eebcc={...config,'configstate':_0x57d72f(0x2f0)};else config[_0x57d72f(0x33a)]==_0x57d72f(0x342)?_0x5eebcc={...config,'configstate':'recovery'}:(_0x5eebcc={...config,'apiKey':_0x57d72f(0x260),'apiSecret':_0x57d72f(0x260)},config['apiPassword']&&(_0x5eebcc['apiPassword']=_0x57d72f(0x260)));return _0x5eebcc;}function getSettings(){return dbSettings['get']('settings')['value']();}function getSecure(){const _0x283cf4=_0x2d865c;return dbSecure[_0x283cf4(0x274)](_0x283cf4(0x20e))[_0x283cf4(0x32c)]()||{};}function updateTimeshift(_0x24b393){const _0x2273a1=_0x2d865c;let _0x3ee256=dbConfig[_0x2273a1(0x274)]('bot')[_0x2273a1(0x2de)]({'botID':botID})['value']();_0x3ee256&&dbConfig[_0x2273a1(0x274)](_0x2273a1(0x256))['find']({'botID':botID})['assign']({'timeshift':_0x24b393})[_0x2273a1(0x306)](),config[_0x2273a1(0x2f4)]=_0x24b393,proxyEmit(_0x2273a1(0x30b),emittedConfiguration());}function updateOnepagemode(_0x58e202){const _0x14a95b=_0x2d865c;let _0x3e37cd=dbConfig[_0x14a95b(0x274)](_0x14a95b(0x256))['find']({'botID':botID})[_0x14a95b(0x32c)]();_0x3e37cd&&dbConfig[_0x14a95b(0x274)](_0x14a95b(0x256))[_0x14a95b(0x2de)]({'botID':botID})[_0x14a95b(0x27a)]({'onepagemode':_0x58e202})['write'](),config[_0x14a95b(0x288)]=_0x58e202,proxyEmit(_0x14a95b(0x30b),emittedConfiguration());}async function storeConfiguration(_0x3f569c){const _0x566c8b=_0x2d865c;logger[_0x566c8b(0x264)](_0x566c8b(0x344));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x566c8b(0x264)]('Transaction\x20detection\x20blocked');let _0x302f0d=[],_0x5f387c=![],_0xd48a05=![],_0x44058c=[];_0x3f569c['portfolio'][_0x566c8b(0x291)](_0x236bd2=>{const _0x1d32b7=_0x566c8b;if(!_0x236bd2[_0x1d32b7(0x1fe)]&&_0x236bd2[_0x1d32b7(0x224)]!=_0x3f569c[_0x1d32b7(0x29f)])_0x44058c['push'](_0x236bd2[_0x1d32b7(0x286)]);}),_0x44058c[_0x566c8b(0x291)](_0x2aa5a0=>{const _0x39bc0b=_0x566c8b,_0x263526=watchedSymbols[_0x39bc0b(0x268)](_0x2aa5a0);!_0x263526&&_0x302f0d[_0x39bc0b(0x1ef)](_0x2aa5a0);}),_0x44058c['forEach'](_0x51a919=>{const _0x52ca9c=_0x566c8b,_0x3c2019=currentCoins[_0x52ca9c(0x2de)](_0x1c1704=>_0x1c1704[_0x52ca9c(0x286)]==_0x51a919);!_0x3c2019&&(_0x5f387c=!![]);}),currentCoins[_0x566c8b(0x291)](_0x2b9274=>{const _0x4e2921=_0x566c8b;if(_0x2b9274[_0x4e2921(0x224)]!=config[_0x4e2921(0x29f)]){const _0x214c2c=_0x44058c[_0x4e2921(0x2de)](_0x51c14f=>_0x51c14f==_0x2b9274[_0x4e2921(0x286)]);!_0x214c2c&&(_0x5f387c=!![]);}}),_0x3f569c[_0x566c8b(0x30d)]['forEach'](_0x369e2c=>{const _0x2c9f50=_0x566c8b,_0x3cf8ec=config[_0x2c9f50(0x30d)][_0x2c9f50(0x2de)](_0x272017=>_0x272017[_0x2c9f50(0x224)]==_0x369e2c[_0x2c9f50(0x224)]);if(_0x3cf8ec&&_0x369e2c[_0x2c9f50(0x1c5)]!=_0x3cf8ec['offset'])_0xd48a05=!![];});let _0x4eaaa0=dbConfig[_0x566c8b(0x274)](_0x566c8b(0x256))[_0x566c8b(0x2de)]({'botID':botID})[_0x566c8b(0x32c)]();_0x3f569c={..._0x3f569c,'apiKey':crypt[_0x566c8b(0x315)](secure[_0x566c8b(0x1ca)],_0x3f569c[_0x566c8b(0x33a)])[_0x566c8b(0x27f)],'apiSecret':crypt['decrypt'](secure[_0x566c8b(0x1ca)],_0x3f569c[_0x566c8b(0x31c)])['message']};_0x3f569c[_0x566c8b(0x325)]&&(_0x3f569c['apiPassword']=crypt['decrypt'](secure[_0x566c8b(0x1ca)],_0x3f569c[_0x566c8b(0x325)])['message']);let _0x27dd72=![];if(_0x4eaaa0){_0x3f569c['apiKey']==_0x566c8b(0x260)?_0x3f569c[_0x566c8b(0x33a)]=config[_0x566c8b(0x33a)]:_0x27dd72=!![];_0x3f569c[_0x566c8b(0x31c)]=='************'?_0x3f569c[_0x566c8b(0x31c)]=config[_0x566c8b(0x31c)]:_0x27dd72=!![];if(_0x3f569c[_0x566c8b(0x325)]==_0x566c8b(0x260))_0x3f569c[_0x566c8b(0x325)]=config['apiPassword'];else{if(_0x3f569c[_0x566c8b(0x325)])_0x27dd72=!![];}dbConfig[_0x566c8b(0x274)]('bot')[_0x566c8b(0x2de)]({'botID':botID})['assign'](_0x3f569c)[_0x566c8b(0x306)]();}else dbConfig['get']('bot')[_0x566c8b(0x1ef)](_0x3f569c)[_0x566c8b(0x306)](),_0x27dd72=!![],process[_0x566c8b(0x33c)]({'status':_0x566c8b(0x2cc),'live':_0x566c8b(0x34f)},_0x246980=>{});process['send']({'botname':_0x3f569c['botname']},_0x36a81c=>{}),updateBotManager(),config={..._0x3f569c},proxyEmit(_0x566c8b(0x2e1)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x27dd72)await reset(_0x302f0d,!![]);else _0x5f387c||_0xd48a05?await reset(_0x302f0d,![]):getBalances();blockTransactionDetection=![],logger[_0x566c8b(0x264)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x1371cf){const _0x17815f=_0x2d865c,_0x38a9f6={...config,'headless':_0x1371cf[_0x17815f(0x1c6)]};let _0x85881f=dbConfig[_0x17815f(0x274)]('bot')[_0x17815f(0x2de)]({'botID':botID})['value']();_0x85881f&&dbConfig[_0x17815f(0x274)](_0x17815f(0x256))['find']({'botID':botID})['assign'](_0x38a9f6)[_0x17815f(0x306)](),config={..._0x38a9f6},updateBotManager(),proxyEmit(_0x17815f(0x30b),emittedConfiguration());}async function storeFiat(_0x54c3e9){const _0x216dca=_0x2d865c,_0x4df9d5={...config,'fiat':_0x54c3e9};let _0x20f712=dbConfig['get'](_0x216dca(0x256))[_0x216dca(0x2de)]({'botID':botID})['value']();_0x20f712&&dbConfig[_0x216dca(0x274)](_0x216dca(0x256))[_0x216dca(0x2de)]({'botID':botID})[_0x216dca(0x27a)](_0x4df9d5)[_0x216dca(0x306)](),config={..._0x4df9d5},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x13c4a9=_0x2d865c;logger[_0x13c4a9(0x329)](_0x13c4a9(0x218));try{if(fs[_0x13c4a9(0x2fa)](path[_0x13c4a9(0x1c9)](configpath,'bot-'+botID+_0x13c4a9(0x282))))fs[_0x13c4a9(0x338)](path[_0x13c4a9(0x1c9)](configpath,_0x13c4a9(0x27d)+botID+'-events.json'));if(fs[_0x13c4a9(0x2fa)](path['join'](configpath,_0x13c4a9(0x27d)+botID+_0x13c4a9(0x281))))fs[_0x13c4a9(0x338)](path[_0x13c4a9(0x1c9)](configpath,'bot-'+botID+_0x13c4a9(0x281)));if(fs[_0x13c4a9(0x2fa)](path[_0x13c4a9(0x1c9)](configpath,_0x13c4a9(0x27d)+botID+'-results.json')))fs[_0x13c4a9(0x338)](path['join'](configpath,_0x13c4a9(0x27d)+botID+_0x13c4a9(0x202)));}catch(_0x3405a4){if(_0x3405a4)logger[_0x13c4a9(0x329)](_0x13c4a9(0x2ac),_0x3405a4);}const _0x192603=getDate();let _0x5e493e=[];currentCoins[_0x13c4a9(0x291)](_0x326b07=>{const _0xdfba05=_0x13c4a9;_0x5e493e[_0xdfba05(0x1ef)]({'coin':_0x326b07[_0xdfba05(0x224)],'number':_0x326b07[_0xdfba05(0x1d1)],'price':_0x326b07[_0xdfba05(0x1d4)]});});let _0x5e5196=dbConfig['get'](_0x13c4a9(0x256))[_0x13c4a9(0x2de)]({'botID':botID})[_0x13c4a9(0x32c)]();_0x5e5196&&(dbConfig[_0x13c4a9(0x274)](_0x13c4a9(0x256))[_0x13c4a9(0x2de)]({'botID':botID})[_0x13c4a9(0x27a)]({'liquidity':[{'date':_0x192603,'changes':_0x5e493e}]})[_0x13c4a9(0x306)](),config['liquidity']=[]),process[_0x13c4a9(0x33c)]({'stop':_0x13c4a9(0x321)},_0x2b033b=>{});}function noslash(_0x4eb84b){const _0x6db1f=_0x2d865c;return _0x4eb84b[_0x6db1f(0x249)]('/','');}function updateHighestFee(_0x17c9ed){const _0x187c82=_0x2d865c;if(_0x17c9ed['reverse']){let _0x5e91e3={'filled':_0x17c9ed[_0x187c82(0x1d9)]*_0x17c9ed['price'],'amount':_0x17c9ed[_0x187c82(0x1d9)]*_0x17c9ed[_0x187c82(0x238)],'side':_0x17c9ed[_0x187c82(0x257)]=='sell'?_0x187c82(0x301):_0x187c82(0x2d1),'price':0x1/_0x17c9ed[_0x187c82(0x238)]};_0x17c9ed={..._0x17c9ed,..._0x5e91e3};}const _0x360fad=defaultFee*_0x17c9ed['filled']*_0x17c9ed['price'];lastFees[_0x187c82(0x339)][_0x187c82(0x21a)]===0x14&&lastFees[_0x187c82(0x339)]['shift'](),lastFees['recent20'][_0x187c82(0x1ef)](_0x360fad),lastFees[_0x187c82(0x2f7)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x47483b){const _0xa7f623=_0x2d865c;logger[_0xa7f623(0x264)](_0xa7f623(0x34b)+_0x47483b[_0xa7f623(0x286)]+'\x20|\x20'+_0x47483b['status']+_0xa7f623(0x28c)+_0x47483b['id']);let _0x5ec8ea=_0x47483b[_0xa7f623(0x309)],_0xb5c4ac=![];currentCoins['forEach'](_0x291947=>{const _0x136e75=_0xa7f623;_0x291947[_0x136e75(0x286)]==_0x47483b[_0x136e75(0x286)]&&(_0xb5c4ac=!![]);});if(!_0xb5c4ac)return;const _0x301eea=currentCoins[_0xa7f623(0x2de)](_0x43856a=>_0x43856a['symbol']==_0x47483b[_0xa7f623(0x286)]),_0x2900a8=_0x473eb2=>{const _0x425b4d=_0xa7f623;if(_0x301eea)_0x301eea[_0x425b4d(0x24a)]=_0x473eb2;};if(_0x5ec8ea==_0xa7f623(0x231))_0x2900a8(_0xa7f623(0x231));else{if(_0x5ec8ea==_0xa7f623(0x33e)){_0x2900a8(_0xa7f623(0x33e));const _0x275bee=await getCoins();[currentCoins,currentCoinsAll]=_0x275bee,await getOpenOrders(),handleOpenOrders();}else{if(_0x5ec8ea==_0xa7f623(0x327)){logger[_0xa7f623(0x264)](_0xa7f623(0x317)+_0x47483b['symbol']+_0xa7f623(0x28c)+_0x47483b[_0xa7f623(0x1d9)]+_0xa7f623(0x28c)+_0x47483b['id']);let _0x3f9cb7=![];if(lastOrders)for(const _0x27749c of lastOrders){const _0xcfa602=0xc8,_0x1e751a=0x1388;let _0x149115=0x0;while(!_0x27749c['orderId']&&_0x149115*_0xcfa602<_0x1e751a){_0x149115++,await sleep(_0xcfa602);}if(_0x149115>0x0)logger[_0xa7f623(0x264)](_0xa7f623(0x1e0)+_0x149115*_0xcfa602/0x3e8+_0xa7f623(0x292));if(_0x27749c[_0xa7f623(0x1f0)]==_0x47483b['id']){logger['debug'](_0xa7f623(0x2da)+_0x47483b['id']),_0x3f9cb7=!![];if(_0x27749c[_0xa7f623(0x1d9)]==0x0){logger['debug'](_0xa7f623(0x295)+_0x47483b['id']);if(_0x47483b[_0xa7f623(0x25f)])_0x27749c[_0xa7f623(0x238)]=_0x47483b[_0xa7f623(0x25f)];else{if(_0x47483b[_0xa7f623(0x238)])_0x27749c[_0xa7f623(0x238)]=_0x47483b[_0xa7f623(0x238)];else{}}_0x27749c[_0xa7f623(0x1d9)]=_0x47483b[_0xa7f623(0x1d9)],updateHighestFee(_0x27749c),_0x2900a8(_0xa7f623(0x1d9)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x42a66f=await getCoins();[currentCoins,currentCoinsAll]=_0x42a66f;}_0x27749c['fee']={'currency':_0x47483b[_0xa7f623(0x20c)]?_0x47483b[_0xa7f623(0x20c)][_0xa7f623(0x203)]:null,'cost':_0x47483b[_0xa7f623(0x20c)]?_0x47483b['fee'][_0xa7f623(0x2f8)]:0x0},await updateCoinResults(_0x27749c);}}}if(!_0x3f9cb7){logger['debug']('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x47483b['id']),_0x2900a8(_0xa7f623(0x1d9));const _0x29e29c=await getCoins();[currentCoins,currentCoinsAll]=_0x29e29c,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3fea48=JSON['parse'](lastBalances['portfolio']);const _0x3675b7=_0x3fea48[_0xa7f623(0x2de)](_0x4aadd9=>_0x4aadd9[_0xa7f623(0x286)]==_0x47483b[_0xa7f623(0x286)]);if(_0x3675b7){if(_0x5ec8ea==_0xa7f623(0x231))_0x3675b7[_0xa7f623(0x24a)]=_0x3675b7[_0xa7f623(0x24a)]==_0xa7f623(0x1d9)?_0xa7f623(0x1d9):_0xa7f623(0x231);else{if(_0x5ec8ea=='canceled')_0x3675b7[_0xa7f623(0x24a)]=_0x3675b7['orderstatus']==_0xa7f623(0x1d9)?_0xa7f623(0x1d9):'canceled';else _0x5ec8ea==_0xa7f623(0x327)&&(_0x3675b7['orderstatus']=_0xa7f623(0x1d9));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3fea48)},proxyEmit(_0xa7f623(0x2ab),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x16f2fe=_0x2d865c;await getOpenOrders();let _0x40af84=![];currentCoins[_0x16f2fe(0x291)](_0x52e0b2=>{const _0x45bfe4=_0x16f2fe;_0x40af84=allOpenOrders['find'](_0x3ed415=>_0x3ed415[_0x45bfe4(0x286)]==_0x52e0b2[_0x45bfe4(0x286)]),_0x52e0b2[_0x45bfe4(0x24a)]=_0x40af84?_0x45bfe4(0x231):_0x45bfe4(0x1c3);});}async function getCoins(_0xba519a=!![],_0x49c512=config['basecoin']){const _0x3effc1=_0x2d865c;let _0x48e05e,_0x4bea20=[],_0x48bf02=[],_0x71caf0=[],_0x48af62=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x48e05e=await exchange[_0x3effc1(0x246)](),mybalances=_0x48e05e[_0x3effc1(0x2f2)];for(const [_0x53724d,_0x9eb0db]of Object['entries'](mybalances)){_0x48af62[_0x3effc1(0x1ef)](_0x53724d);}if(_0x49c512=='')for(const [_0x242bdf,_0x213d8a]of Object['entries'](mybalances)){_0x213d8a!=0x0&&_0x48bf02['push']({'coin':_0x242bdf});}else{let _0x536211=![];for(const [_0x4a59a0,_0xb2d27a]of Object['entries'](mybalances)){if(_0x48af62[_0x3effc1(0x268)](_0x4a59a0)){const _0x1108a9=config[_0x3effc1(0x30d)][_0x3effc1(0x2de)](_0x303d40=>_0x303d40[_0x3effc1(0x224)]==_0x4a59a0),_0x8ee2f7=_0x4a59a0+'/'+_0x49c512,_0x12b347=_0x49c512+'/'+_0x4a59a0,_0x5bebcd=currentCoins['find'](_0x2e2d9a=>_0x2e2d9a['coin']==_0x4a59a0);_0x536211=![];if((_0xb2d27a!=0x0||_0x1108a9)&&(allSymbols[_0x3effc1(0x268)](_0x8ee2f7)||_0x4a59a0==_0x49c512))_0x4a59a0!=_0x49c512&&_0x4bea20['push'](_0x8ee2f7),_0x48bf02[_0x3effc1(0x1ef)]({'coin':_0x4a59a0,'symbol':_0x8ee2f7,'reverse':![],'number':Math[_0x3effc1(0x290)](_0xb2d27a+(_0x1108a9&&_0x1108a9[_0x3effc1(0x1c5)]||0x0),0x0),'orderstatus':_0x5bebcd?_0x5bebcd[_0x3effc1(0x24a)]:_0x3effc1(0x1c3)});else(_0xb2d27a!=0x0||_0x1108a9)&&allSymbols[_0x3effc1(0x268)](_0x12b347)&&(_0x4a59a0!=_0x49c512&&_0x4bea20[_0x3effc1(0x1ef)](_0x12b347),_0x48bf02[_0x3effc1(0x1ef)]({'coin':_0x4a59a0,'symbol':_0x12b347,'reverse':!![],'number':Math[_0x3effc1(0x290)](_0xb2d27a+(_0x1108a9&&_0x1108a9[_0x3effc1(0x1c5)]||0x0),0x0),'orderstatus':_0x5bebcd?_0x5bebcd[_0x3effc1(0x24a)]:'none'}));}}}}catch(_0x2369be){if(!_0xba519a)handleErrorNoStop(_0x2369be,_0x3effc1(0x20f));else await handleError(_0x2369be,_0x3effc1(0x20f));}return _0x71caf0=cloneDeep(_0x48bf02),_0x48bf02=_0x48bf02['filter'](_0x2dbea5=>{const _0x506b9f=_0x3effc1,_0x5da6af=config[_0x506b9f(0x30d)][_0x506b9f(0x2de)](_0x5b3110=>_0x5b3110[_0x506b9f(0x224)]==_0x2dbea5[_0x506b9f(0x224)]);return _0x5da6af&&!_0x5da6af['excluded'];}),[_0x48bf02,_0x71caf0];}async function getCoinNumber(_0x4eb31f){const _0xc3ab4b=_0x2d865c;let _0x333c63;try{const _0x171273=await exchange[_0xc3ab4b(0x246)]();_0x333c63=_0x171273[_0xc3ab4b(0x2f2)][_0x4eb31f];}catch(_0xb4270d){await handleError(_0xb4270d,'getCoinNumber()');}return _0x333c63;}async function getOpenOrders(){const _0x5ea6cc=_0x2d865c;let _0xaa852f;allOpenOrders=[];try{for(const _0x569917 of config['portfolio']){!_0x569917[_0x5ea6cc(0x1fe)]&&_0x569917[_0x5ea6cc(0x224)]!=config[_0x5ea6cc(0x29f)]&&(_0xaa852f=await exchange['fetchOpenOrders'](_0x569917[_0x5ea6cc(0x286)]),_0xaa852f[_0x5ea6cc(0x21a)]>0x0&&allOpenOrders[_0x5ea6cc(0x1ef)](_0xaa852f[0x0]));}}catch(_0x59243f){await handleError(_0x59243f,_0x5ea6cc(0x25d));}}async function handleOpenOrders(_0x5724f3=0x0){const _0x19d5fa=_0x2d865c;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x19d5fa(0x2a3)]&&allOrdersPlaced&&(_0x5724f3==0x0?(logger[_0x19d5fa(0x264)](_0x19d5fa(0x2c3)),_0x5724f3++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x19d5fa(0x264)](_0x19d5fa(0x220)),validateOrders(_0x19d5fa(0x228))));}async function testAPI(_0x471ddb){const _0x328458=_0x2d865c,_0x56c16b=ccxt[_0x328458(0x28d)][_0x471ddb[_0x328458(0x225)]['toLowerCase']()],_0x1d74ad=new _0x56c16b({'apiKey':_0x471ddb[_0x328458(0x33a)],'secret':_0x471ddb['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x328458(0x23c)}});if(_0x471ddb[_0x328458(0x325)])_0x1d74ad['password']=_0x471ddb[_0x328458(0x325)];try{await _0x1d74ad[_0x328458(0x29e)]();}catch(_0xf5693a){throw _0xf5693a;}}function cloneDeep(_0xa1b2bf){const _0x30c984=_0x2d865c;return JSON[_0x30c984(0x1e3)](JSON[_0x30c984(0x2f1)](_0xa1b2bf));}async function getPortfolio(_0x2c4364){const _0x2408c2=_0x2d865c;let _0x366d34=[],_0x5b360b=[],_0x3a4015=[],_0x4a8d6b;if(_0x2c4364[_0x2408c2(0x33a)]!==_0x2408c2(0x260)||_0x2c4364[_0x2408c2(0x31c)]!==_0x2408c2(0x260)||_0x2c4364[_0x2408c2(0x325)]&&_0x2c4364[_0x2408c2(0x325)]!==_0x2408c2(0x260)){if(config[_0x2408c2(0x225)]){if(_0x2c4364[_0x2408c2(0x33a)]==_0x2408c2(0x260))_0x2c4364['apiKey']=config[_0x2408c2(0x33a)];if(_0x2c4364['apiSecret']=='************')_0x2c4364[_0x2408c2(0x31c)]=config['apiSecret'];if(_0x2c4364[_0x2408c2(0x325)]==_0x2408c2(0x260))_0x2c4364['apiPassword']=config[_0x2408c2(0x325)];try{await testAPI(_0x2c4364);}catch(_0x5aeea4){if(_0x5aeea4[_0x2408c2(0x275)]()[_0x2408c2(0x268)](_0x2408c2(0x263))){logger['debug'](_0x2408c2(0x294)),proxyEmit(_0x2408c2(0x30d),![]);return;}else{handleError(_0x5aeea4,_0x2408c2(0x221));return;}}}await initExchange(_0x2c4364['exchange'],_0x2c4364['apiKey'],_0x2c4364[_0x2408c2(0x31c)],_0x2c4364[_0x2408c2(0x325)]);try{await loadSymbols();}catch(_0x107007){if(_0x107007[_0x2408c2(0x275)]()['includes'](_0x2408c2(0x263))){proxyEmit(_0x2408c2(0x30d),![]);return;}else{handleError(_0x107007,'getPortfolio(1)');return;}}const _0xda37f2=await getCoins(![],_0x2c4364[_0x2408c2(0x29f)]);_0x3a4015=cloneDeep(_0xda37f2[0x1]);}else _0x3a4015=cloneDeep(currentCoinsAll);if(_0x2c4364['basecoin']=='')proxyEmit('portfolio',_0x3a4015);else{_0x3a4015[_0x2408c2(0x291)](_0x1ed12d=>{const _0x251f5f=_0x2408c2;if(_0x1ed12d[_0x251f5f(0x224)]!=_0x2c4364[_0x251f5f(0x29f)])_0x366d34[_0x251f5f(0x1ef)](_0x1ed12d[_0x251f5f(0x286)]);});if(_0x366d34[_0x2408c2(0x21a)]==0x0)logHistory(_0x2408c2(0x1fa),_0x2408c2(0x26a));else{try{_0x5b360b=await exchange[_0x2408c2(0x236)](_0x366d34);}catch(_0x1ad1e9){if(_0x1ad1e9[_0x2408c2(0x275)]()[_0x2408c2(0x268)](_0x2408c2(0x263))){proxyEmit(_0x2408c2(0x30d),![]);return;}else{handleError(_0x1ad1e9,_0x2408c2(0x29a));return;}}_0x3a4015[_0x2408c2(0x291)](_0x469b55=>{const _0x323eff=_0x2408c2;_0x469b55['coin']!=_0x2c4364[_0x323eff(0x29f)]?_0x4a8d6b=_0x469b55[_0x323eff(0x1cf)]?0x1/_0x5b360b[_0x469b55['symbol']][_0x323eff(0x1d4)]:_0x5b360b[_0x469b55[_0x323eff(0x286)]]['last']:_0x4a8d6b=0x1,_0x469b55[_0x323eff(0x238)]=formatResult(_0x4a8d6b,0x8);}),proxyEmit(_0x2408c2(0x30d),_0x3a4015);}}}function truncateTradeAmount(_0x41e652,_0x140419){const _0x1fe0e9=_0x2d865c;let _0x4636a9=0x0;try{_0x4636a9=exchange[_0x1fe0e9(0x2aa)](_0x41e652,_0x140419);}catch(_0x590265){}return _0x4636a9;}function checkMinimums(_0x2bc894){const _0x36fef6=_0x2d865c;let _0x49f31c=!![];const _0x58386b=!_0x2bc894['reverse']?markets[_0x2bc894[_0x36fef6(0x286)]]['limits'][_0x36fef6(0x229)]['min']:markets[_0x2bc894['symbol']][_0x36fef6(0x298)][_0x36fef6(0x2f8)][_0x36fef6(0x210)],_0x5b264b=!_0x2bc894[_0x36fef6(0x1cf)]?markets[_0x2bc894[_0x36fef6(0x286)]]['limits']['cost'][_0x36fef6(0x210)]:markets[_0x2bc894[_0x36fef6(0x286)]][_0x36fef6(0x298)]['amount'][_0x36fef6(0x210)],_0x10e0f8=truncateTradeAmount(_0x2bc894[_0x36fef6(0x286)],_0x2bc894['trade']);_0x2bc894[_0x36fef6(0x280)]=_0x10e0f8;if(Math[_0x36fef6(0x293)](_0x10e0f8)<_0x58386b)_0x49f31c=![];if(Math[_0x36fef6(0x293)](_0x10e0f8)*_0x2bc894[_0x36fef6(0x1d4)]<_0x5b264b)_0x49f31c=![];if(_0x2bc894['side']=='sell'){let _0x33b9c4=config[_0x36fef6(0x30d)]['find'](_0xdf8d88=>_0xdf8d88[_0x36fef6(0x224)]==_0x2bc894[_0x36fef6(0x224)]);if(_0x33b9c4[_0x36fef6(0x1c5)]>0x0){if(Math[_0x36fef6(0x293)](_0x10e0f8)>_0x2bc894[_0x36fef6(0x1d1)]-_0x33b9c4['offset'])_0x49f31c=![];}else{if(Math[_0x36fef6(0x293)](_0x10e0f8)>_0x2bc894[_0x36fef6(0x1d1)])_0x49f31c=![];}}if(_0x2bc894[_0x36fef6(0x257)]=='buy'){let _0x3942c4=config[_0x36fef6(0x30d)][_0x36fef6(0x2de)](_0x7550ed=>_0x7550ed[_0x36fef6(0x224)]==config[_0x36fef6(0x29f)]),_0x107606=currentCoins[_0x36fef6(0x2de)](_0x35718c=>_0x35718c[_0x36fef6(0x224)]==config['basecoin']);if(_0x3942c4[_0x36fef6(0x1c5)]>0x0){if(Math[_0x36fef6(0x293)](_0x10e0f8)*_0x2bc894['last']>_0x107606['number']-_0x3942c4[_0x36fef6(0x1c5)])_0x49f31c=![];}else{if(Math[_0x36fef6(0x293)](_0x10e0f8)*_0x2bc894[_0x36fef6(0x1d4)]>_0x107606[_0x36fef6(0x1d1)])_0x49f31c=![];}}return _0x49f31c;}async function getBalances(_0x229152=!![]){const _0x57f068=_0x2d865c;let _0x11d958=0x0,_0x127da3;const _0x24f1f4=config[_0x57f068(0x2c2)];if(config[_0x57f068(0x1c6)]&&config[_0x57f068(0x2dc)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x208376=>{const _0x4297e0=_0x57f068;if(_0x208376[_0x4297e0(0x224)]!=config[_0x4297e0(0x29f)]){let _0x4372d5=global[_0x4297e0(0x320)][noslash(_0x208376[_0x4297e0(0x286)])];_0x127da3=_0x208376['reverse']?0x1/_0x4372d5:_0x4372d5;}else _0x127da3=0x1;let _0x4881bc=_0x208376[_0x4297e0(0x1d1)]*_0x127da3;_0x11d958+=_0x4881bc,_0x208376[_0x4297e0(0x1d4)]=formatResult(Number(_0x127da3),0x8),_0x208376[_0x4297e0(0x32c)]=_0x4881bc;}),currentCoins[_0x57f068(0x291)](_0x59432c=>{const _0xea0dc9=_0x57f068;let _0x2cdddc=config[_0xea0dc9(0x30d)][_0xea0dc9(0x2de)](_0x36066c=>_0x36066c['coin']==_0x59432c['coin']),_0x7cedf1=Number(_0x2cdddc['distribution']),_0x1860d9=_0x59432c['value']/_0x11d958*0x64,_0xac4557=_0x7cedf1*_0x11d958/0x64/_0x59432c['last']-_0x59432c['number'];_0x59432c[_0xea0dc9(0x240)]=formatResult(_0x1860d9,0x3),_0x59432c[_0xea0dc9(0x200)]=formatResult(_0x7cedf1,0x3),_0x59432c[_0xea0dc9(0x280)]=formatResult(_0xac4557,0x8),_0x59432c[_0xea0dc9(0x257)]='',_0x59432c[_0xea0dc9(0x2d6)]=![];if(_0x59432c['coin']!=config[_0xea0dc9(0x29f)]){if(_0x59432c[_0xea0dc9(0x240)]>_0x7cedf1)_0x59432c['side']=_0xea0dc9(0x2d1),_0x59432c['valid']=checkMinimums(_0x59432c);else _0x59432c[_0xea0dc9(0x240)]<_0x7cedf1&&(_0x59432c[_0xea0dc9(0x257)]='buy',_0x59432c['valid']=checkMinimums(_0x59432c));}_0x59432c[_0xea0dc9(0x2e6)]=_0x59432c[_0xea0dc9(0x240)]/_0x59432c[_0xea0dc9(0x200)]-0x1;if(_0x59432c[_0xea0dc9(0x24a)]==_0xea0dc9(0x1d9)||_0x59432c[_0xea0dc9(0x24a)]=='canceled')_0x59432c[_0xea0dc9(0x24a)]='none';}),currentCoins[_0x57f068(0x334)]((_0x40c6c1,_0x2e3c76)=>_0x40c6c1[_0x57f068(0x2e6)]<_0x2e3c76[_0x57f068(0x2e6)]?0x1:_0x2e3c76[_0x57f068(0x2e6)]<_0x40c6c1[_0x57f068(0x2e6)]?-0x1:0x0);const _0x1fc6af=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1fc6af[_0x57f068(0x2a9)],'usd':_0x1fc6af[_0x57f068(0x284)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x24f1f4},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x229152){if(config[_0x57f068(0x1c6)])headlessMode({'portfolio':currentCoins,'threshold':_0x24f1f4});else{if(lockOrders==ORDERS[_0x57f068(0x2c4)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x24f1f4});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5ae302=getNormalizedPerformance();getStartingBalances(_0x5ae302),emitPerformance(_0x5ae302);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x453609=getNormalizedPerformance();emitPerformance(_0x453609),getStartingBalances(_0x453609),logger['debug'](_0x57f068(0x222));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x8c2c21=_0x2d865c;if(!lastBalances)return;let _0x4f2740=[],_0x4a3d86,_0xf0c01e=JSON[_0x8c2c21(0x1e3)](lastBalances[_0x8c2c21(0x30d)]);_0xf0c01e['sort']((_0x38be0c,_0x103100)=>_0x38be0c['coin']>_0x103100[_0x8c2c21(0x224)]?0x1:_0x103100[_0x8c2c21(0x224)]>_0x38be0c[_0x8c2c21(0x224)]?-0x1:0x0),_0xf0c01e[_0x8c2c21(0x291)](_0x33d30e=>{const _0x2572ff=_0x8c2c21;let _0x204f89={'coin':_0x33d30e[_0x2572ff(0x224)],'number':_0x33d30e[_0x2572ff(0x1d1)],'price':_0x33d30e[_0x2572ff(0x1d4)]};_0x4f2740[_0x2572ff(0x1ef)](_0x204f89);});const _0x10ecac=await getFiat();_0x4a3d86={'date':lastBalances[_0x8c2c21(0x1d6)][_0x8c2c21(0x27e)]('\x20')[0x0],'eur':_0x10ecac['eur'],'usd':_0x10ecac['usd'],'coins':_0x4f2740};let _0xbfb869=dbPerformance[_0x8c2c21(0x274)]('data')[_0x8c2c21(0x2de)]({'date':_0x4a3d86[_0x8c2c21(0x30f)]})['value']();_0xbfb869?_0x4a3d86[_0x8c2c21(0x30f)]!=config[_0x8c2c21(0x226)]&&dbPerformance[_0x8c2c21(0x274)]('data')['find']({'date':_0x4a3d86[_0x8c2c21(0x30f)]})['assign'](_0x4a3d86)[_0x8c2c21(0x306)]():dbPerformance[_0x8c2c21(0x274)]('data')[_0x8c2c21(0x1ef)](_0x4a3d86)[_0x8c2c21(0x306)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5ed8a=_0x2d865c;let _0xcc6d1e=[];if(dbPerformance['has'](_0x5ed8a(0x1e1))['value']()){let _0x782dd5=dbPerformance[_0x5ed8a(0x274)](_0x5ed8a(0x1e1))[_0x5ed8a(0x253)]()[_0x5ed8a(0x2ae)](_0xb7f1f5=>{const _0x19443f=_0x5ed8a;if(_0xb7f1f5[_0x19443f(0x2db)]['length']==0x0)return![];else return!![];})[_0x5ed8a(0x34d)](_0x5ed8a(0x30f))[_0x5ed8a(0x32c)](),_0x51a761=[...config[_0x5ed8a(0x1d3)]];_0x51a761[_0x5ed8a(0x334)]((_0x12a67d,_0x54d14c)=>_0x12a67d[_0x5ed8a(0x30f)]>_0x54d14c['date']?-0x1:_0x54d14c[_0x5ed8a(0x30f)]>_0x12a67d['date']?0x1:0x0);let _0x40bfb8=0x1,_0x43b636=[],_0x366d56=0x0;_0x782dd5[_0x5ed8a(0x234)]()[_0x5ed8a(0x1cf)]()['forEach']((_0x26d8e5,_0x1d737a)=>{const _0x56713f=_0x5ed8a;if(_0x51a761[_0x366d56]){if(_0x782dd5[_0x782dd5['length']-_0x1d737a]&&_0x51a761[_0x366d56][_0x56713f(0x30f)]==_0x782dd5[_0x782dd5[_0x56713f(0x21a)]-_0x1d737a][_0x56713f(0x30f)]){if(_0x1d737a<_0x782dd5[_0x56713f(0x21a)]){let _0x120312=0x0,_0x2425e5=0x0;_0x782dd5[_0x782dd5[_0x56713f(0x21a)]-_0x1d737a][_0x56713f(0x2db)][_0x56713f(0x291)](_0xa06c6f=>{const _0xe5a0a0=_0x56713f;_0x2425e5+=_0xa06c6f[_0xe5a0a0(0x1d1)]*_0xa06c6f[_0xe5a0a0(0x238)];}),_0x51a761[_0x366d56][_0x56713f(0x1dd)][_0x56713f(0x291)](_0x51fe05=>{const _0x1a9549=_0x56713f;_0x120312+=_0x51fe05[_0x1a9549(0x1d1)]*_0x51fe05[_0x1a9549(0x238)];}),_0x40bfb8*=_0x120312/(_0x2425e5-_0x120312)+0x1;}_0x366d56++;}}let _0x10cf7f=0x0;_0x26d8e5[_0x56713f(0x2db)]['forEach'](_0x1b52ad=>{const _0x2897e3=_0x56713f;_0x10cf7f+=_0x1b52ad[_0x2897e3(0x1d1)]*_0x1b52ad[_0x2897e3(0x238)];}),_0x43b636[_0x782dd5[_0x56713f(0x21a)]-_0x1d737a-0x1]=_0x10cf7f*(_0x40bfb8-0x1);});let _0x5af61e=[];_0x51a761=[...config[_0x5ed8a(0x1d3)]]||[];let _0x206e0b=0x0;_0x366d56=0x0,_0x782dd5[_0x5ed8a(0x291)]((_0xe107b9,_0x34ed00)=>{const _0x1c8a20=_0x5ed8a;if(_0x51a761[_0x366d56]){const _0x5803cb=fns[_0x1c8a20(0x1e3)](_0x51a761[_0x366d56][_0x1c8a20(0x30f)],'yyyy/MM/dd',new Date()),_0x133456=fns[_0x1c8a20(0x1e3)](_0xe107b9[_0x1c8a20(0x30f)],_0x1c8a20(0x2cf),new Date());if(fns['isEqual'](_0x5803cb,_0x133456)){let _0x11ba34=0x0;_0x51a761[_0x366d56]['changes']['forEach'](_0x8601ee=>{const _0x10c487=_0x1c8a20;!_0x5af61e[_0x8601ee[_0x10c487(0x224)]]?_0x5af61e[_0x8601ee['coin']]=_0x8601ee[_0x10c487(0x1d1)]:(_0x11ba34=_0x5af61e[_0x8601ee[_0x10c487(0x224)]],_0x5af61e[_0x8601ee['coin']]+=_0x8601ee['number']);const _0x51d6a0=_0xe107b9[_0x10c487(0x2db)][_0x10c487(0x2de)](_0x2e7317=>_0x2e7317['coin']==_0x8601ee[_0x10c487(0x224)]);(!_0x51d6a0||_0x51d6a0[_0x10c487(0x1d1)]==0x0)&&(_0x206e0b+=(-_0x8601ee[_0x10c487(0x1d1)]-_0x11ba34)*_0x8601ee[_0x10c487(0x238)]);}),_0x366d56++;}}_0xe107b9[_0x1c8a20(0x2db)]['forEach']((_0x4a8869,_0x3362da)=>{const _0x5b7ed2=_0x1c8a20;_0x5af61e[_0x4a8869[_0x5b7ed2(0x224)]]&&(_0x4a8869[_0x5b7ed2(0x2f0)]=_0x5af61e[_0x4a8869['coin']]);}),_0xcc6d1e[_0x1c8a20(0x1ef)]({'date':_0xe107b9['date'],'eur':_0xe107b9[_0x1c8a20(0x2a9)],'usd':_0xe107b9['usd'],'offset':_0x43b636[_0x34ed00],'netoffset':_0x206e0b,'coins':_0xe107b9[_0x1c8a20(0x2db)]});});}return _0xcc6d1e;}function emitPerformance(_0x23e86d){const _0x372bba=_0x2d865c;_0x23e86d[_0x372bba(0x21a)]!==0x0?(proxyEmit(_0x372bba(0x262),_0x23e86d),lastPerformanceEmitted=getDate()):proxyEmit(_0x372bba(0x262),[]);}function getPerf(_0x5a2255,_0x123a80){const _0x1160c7=_0x2d865c;let _0x3b0c59=0x0,_0x126d11=0x0,_0x5e1861=0x0;_0x5a2255['coins']['forEach'](_0x12e4f1=>{const _0x492407=_0x4a8e;_0x3b0c59+=_0x12e4f1[_0x492407(0x1d1)]*_0x12e4f1[_0x492407(0x238)];});_0x123a80&&(_0x3b0c59+=_0x5a2255['offset']);if(config['basecoin']===_0x1160c7(0x2b9)||config[_0x1160c7(0x29f)]===_0x1160c7(0x2e0))_0x126d11=_0x3b0c59*_0x5a2255[_0x1160c7(0x2a9)],_0x5e1861=_0x3b0c59*_0x5a2255[_0x1160c7(0x284)];else{if(usdBasecoins[_0x1160c7(0x268)](config[_0x1160c7(0x29f)]))_0x126d11=_0x3b0c59*_0x5a2255['eur']/_0x5a2255[_0x1160c7(0x284)],_0x5e1861=_0x3b0c59;else config[_0x1160c7(0x29f)]==='EUR'&&(_0x126d11=_0x3b0c59,_0x5e1861=_0x3b0c59*_0x5a2255[_0x1160c7(0x284)]/_0x5a2255['eur']);}return[_0x3b0c59,_0x126d11,_0x5e1861];}function getKPIs(_0x484a0f,_0x9a00d9='EUR'){const _0x4de8c2=_0x2d865c,_0x1bab14=config[_0x4de8c2(0x29f)],_0x4d3451=lastBalances,_0xb299f4=currentCoins,_0x4957ca=getNormalizedPerformance(),_0x340852=_0x484a0f===_0x4de8c2(0x29f)?_0x1bab14:_0x484a0f==='fiat'||_0x484a0f===_0x4de8c2(0x33f)?_0x9a00d9:_0x4de8c2(0x26e)+_0x1bab14,_0x3528bb=_0x484a0f===_0x4de8c2(0x2d0)?_0x4de8c2(0x30c):_0x484a0f===_0x4de8c2(0x33f)?_0x4de8c2(0x30c):_0x340852+'\x20value',_0xe5e950=_0x484a0f===_0x4de8c2(0x2d0)||_0x484a0f==='net-fiat'?_0x4de8c2(0x30c):_0x340852+_0x4de8c2(0x1d5);let _0x39f9da=0x0;_0xb299f4[_0x4de8c2(0x291)](_0x5934ca=>{const _0x1a483a=_0x4de8c2;_0x39f9da+=_0x5934ca[_0x1a483a(0x1d1)]*_0x5934ca[_0x1a483a(0x1d4)];});if(_0x484a0f===_0x4de8c2(0x2b8)||_0x484a0f==='net-fiat'){if(_0x1bab14===_0x4de8c2(0x2b9)||_0x1bab14===_0x4de8c2(0x2e0))_0x39f9da=_0x39f9da*(_0x9a00d9==='EUR'?_0x4d3451[_0x4de8c2(0x2a9)]:_0x4d3451[_0x4de8c2(0x284)]);else{if(usdBasecoins['includes'](_0x1bab14))_0x39f9da=_0x39f9da*(_0x9a00d9===_0x4de8c2(0x2ca)?_0x4d3451['eur']/_0x4d3451[_0x4de8c2(0x284)]:0x1);else _0x1bab14===_0x4de8c2(0x2ca)&&(_0x39f9da=_0x39f9da*(_0x9a00d9===_0x4de8c2(0x2ca)?0x1:_0x4d3451[_0x4de8c2(0x284)]/_0x4d3451[_0x4de8c2(0x2a9)]));}}let _0x414426;if(_0x39f9da!==0x0){if(_0x484a0f==='basecoin')_0x414426=(_0x39f9da/startingBalances[_0x4de8c2(0x29f)]-0x1)*0x64;else{if(_0x9a00d9===_0x4de8c2(0x2ca))_0x414426=(_0x39f9da/startingBalances[_0x4de8c2(0x2a9)]-0x1)*0x64;else _0x414426=(_0x39f9da/startingBalances[_0x4de8c2(0x284)]-0x1)*0x64;}let _0x29bdad=0x0;if(startingBalances['coins'])_0xb299f4['forEach'](_0x26c660=>{const _0x244050=_0x4de8c2;let _0x29e079=startingBalances[_0x244050(0x2db)][_0x244050(0x2de)](_0xba2880=>_0xba2880['coin']===_0x26c660[_0x244050(0x224)]);if(_0x29e079&&_0x29e079[_0x244050(0x224)]&&_0x26c660[_0x244050(0x1d1)]!==0x0)_0x29bdad+=_0x29e079[_0x244050(0x1d1)]*_0x26c660['last'];});let _0x5ed9bb=0x0;if(_0x4957ca['length']!==0x0){let _0x1b114a=_0x4957ca[_0x4957ca[_0x4de8c2(0x21a)]-0x1];_0x5ed9bb=_0x1b114a[_0x4de8c2(0x216)];}_0x29bdad-=_0x5ed9bb;_0x484a0f===_0x4de8c2(0x2d0)&&(_0x414426=(_0x39f9da-_0x29bdad)/startingBalances[_0x4de8c2(0x29f)]*0x64,_0x39f9da=_0x39f9da-_0x29bdad);if(_0x484a0f===_0x4de8c2(0x33f)){let _0x2dd3b4=_0x9a00d9===_0x4de8c2(0x2ca)?startingBalances[_0x4de8c2(0x2a9)]:startingBalances[_0x4de8c2(0x284)];if(_0x1bab14===_0x4de8c2(0x2b9)||_0x1bab14===_0x4de8c2(0x2e0))_0x29bdad=_0x9a00d9==='EUR'?_0x29bdad*_0x4d3451['eur']:_0x29bdad*_0x4d3451[_0x4de8c2(0x284)];else{if(usdBasecoins[_0x4de8c2(0x268)](_0x1bab14))_0x29bdad=_0x9a00d9===_0x4de8c2(0x2ca)?_0x29bdad*_0x4d3451[_0x4de8c2(0x2a9)]/_0x4d3451[_0x4de8c2(0x284)]:_0x29bdad;else _0x1bab14===_0x4de8c2(0x2ca)&&(_0x29bdad=_0x9a00d9===_0x4de8c2(0x2ca)?_0x29bdad:_0x29bdad*_0x4d3451[_0x4de8c2(0x284)]/_0x4d3451[_0x4de8c2(0x2a9)]);}_0x414426=(_0x39f9da-_0x29bdad)/_0x2dd3b4*0x64,_0x39f9da=_0x39f9da-_0x29bdad;}if(_0x414426){if(_0x414426<0x64)_0x414426=_0x414426['toFixed'](0x2);else{if(_0x414426<0x3e8)_0x414426=_0x414426[_0x4de8c2(0x310)](0x1);else _0x414426=_0x414426[_0x4de8c2(0x310)](0x0);}}else _0x414426=Number('0')[_0x4de8c2(0x310)](0x2);if(_0x39f9da){if(Math[_0x4de8c2(0x293)](_0x39f9da)<0.000001)_0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x2);else{if(Math[_0x4de8c2(0x293)](_0x39f9da)<0.1)_0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x6);else{if(Math[_0x4de8c2(0x293)](_0x39f9da)<0x1)_0x39f9da=_0x39f9da['toFixed'](0x5);else{if(Math['abs'](_0x39f9da)<0xa)_0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x4);else{if(Math[_0x4de8c2(0x293)](_0x39f9da)<0x64)_0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x3);else{if(Math['abs'](_0x39f9da)<0x3e8)_0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x2);else _0x39f9da=_0x39f9da[_0x4de8c2(0x310)](0x2);}}}}}}else _0x39f9da=Number('0')[_0x4de8c2(0x310)](0x2);}else _0x414426=Number('0')[_0x4de8c2(0x310)](0x2);return{'value':_0x39f9da,'change':_0x414426,'leftTxt':_0x3528bb,'rightTxt':_0xe5e950};}async function getStartingBalances(_0x52b9ab,_0x3a92a3=!![]){const _0x22601a=_0x2d865c;if(_0x52b9ab[_0x22601a(0x21a)]!==0x0){const [_0x3de863,_0x237cd6,_0x266984]=getPerf(_0x52b9ab[0x0],!![]);let _0xa44598=[];config[_0x22601a(0x30d)][_0x22601a(0x291)](_0x1743a4=>{const _0xecb667=_0x22601a;let _0xa77481=0x0,_0x2ed061;config[_0xecb667(0x1d3)][_0xecb667(0x291)](_0x231a44=>{const _0x319de6=_0xecb667;let _0x2286ec=_0x231a44[_0x319de6(0x1dd)]['find'](_0x17fa2f=>_0x17fa2f[_0x319de6(0x224)]==_0x1743a4[_0x319de6(0x224)]);if(_0x2286ec){_0xa77481+=_0x2286ec[_0x319de6(0x1d1)];if(!_0x2ed061)_0x2ed061=_0x2286ec[_0x319de6(0x238)];}}),_0xa44598[_0xecb667(0x1ef)]({'coin':_0x1743a4[_0xecb667(0x224)],'number':_0xa77481,'initialprice':_0x2ed061});});const _0x12d26f={'basecoin':_0x3de863,'eur':_0x237cd6,'usd':_0x266984,'coins':_0xa44598};if(_0x3a92a3)proxyEmit(_0x22601a(0x26f),_0x12d26f);startingBalances=_0x12d26f;}}function headlessMode(_0x373851){const _0x2cad54=_0x2d865c;let _0x1752c3=_0x373851['portfolio'],_0x4239f5=_0x373851[_0x2cad54(0x2c2)],_0x11de93=[];for(let _0x1200e7 of _0x1752c3){if(_0x1200e7[_0x2cad54(0x224)]!=config[_0x2cad54(0x29f)]){if(_0x1200e7[_0x2cad54(0x2e6)]>=_0x4239f5/0x64){if(_0x1200e7[_0x2cad54(0x2d6)])_0x11de93[_0x2cad54(0x1ef)](_0x1200e7);}else{if(_0x1200e7[_0x2cad54(0x2e6)]<=-_0x4239f5/0x64){if(_0x1200e7['valid'])_0x11de93[_0x2cad54(0x1ef)](_0x1200e7);}}}}_0x11de93['length']>0x0&&placeOrder(_0x11de93);}function notifyBalance(_0x4fa2dc){const _0x10c9e8=_0x2d865c;let _0x318318=_0x4fa2dc['portfolio'],_0x4e79c2=_0x4fa2dc[_0x10c9e8(0x2c2)],_0x1e5f35=[];for(let _0x180078 of _0x318318){if(_0x180078[_0x10c9e8(0x224)]!=config[_0x10c9e8(0x29f)]){if(_0x180078[_0x10c9e8(0x2e6)]>=_0x4e79c2/0x64){if(_0x180078[_0x10c9e8(0x2d6)])_0x1e5f35[_0x10c9e8(0x1ef)](_0x180078);}else{if(_0x180078[_0x10c9e8(0x2e6)]<=-_0x4e79c2/0x64){if(_0x180078[_0x10c9e8(0x2d6)])_0x1e5f35['push'](_0x180078);}}}}if(_0x1e5f35[_0x10c9e8(0x21a)]>0x0){let _0xa1c4c2=_0x1e5f35[_0x10c9e8(0x22a)](_0x333685=>_0x333685['coin']);_0xa1c4c2['sort']();let _0x458f6c=_0xa1c4c2[_0x10c9e8(0x1c9)](',\x20');if(!lastCoinsToBalance)logHistory(_0x10c9e8(0x34e),_0x10c9e8(0x25e));lastCoinsToBalance=_0x458f6c;}}function symbolToCoin(_0x51563f){const _0x8707a5=_0x2d865c;let _0x1d42fd;if(_0x51563f[_0x8707a5(0x268)]('/'+config['basecoin']))_0x1d42fd=_0x51563f['replace']('/'+config[_0x8707a5(0x29f)],'');if(_0x51563f[_0x8707a5(0x268)](config['basecoin']+'/'))_0x1d42fd=_0x51563f[_0x8707a5(0x249)](config[_0x8707a5(0x29f)]+'/','');return _0x1d42fd;}async function unlockOrders(){const _0x45bf88=_0x2d865c;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x45bf88(0x2d4)),lockOrders=ORDERS[_0x45bf88(0x243)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5b99c1=await getCoins();[currentCoins,currentCoinsAll]=_0x5b99c1,validateOrdersState=_0x45bf88(0x2f0),persistOpenOrders([]),lockOrders=ORDERS[_0x45bf88(0x2c4)],logger[_0x45bf88(0x264)](_0x45bf88(0x2c1));}}async function validateOrders(_0x3dac2e){const _0x4546ae=_0x2d865c;if(_0x3dac2e)validateOrdersState=_0x3dac2e;logger[_0x4546ae(0x264)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x4546ae(0x34c):lockOrders==0x2?_0x4546ae(0x1d2):_0x4546ae(0x217)));let _0x1388a1=[],_0x5a0031=config[_0x4546ae(0x245)]==_0x4546ae(0x346)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x4546ae(0x291)](_0x5a5f7e=>{const _0x1b99c0=_0x4546ae;let _0x478459=![];_0x5a5f7e['filled']>0x0&&(_0x478459=!![]),_0x1388a1[_0x1b99c0(0x1ef)](_0x478459),_0x478459&&config['ordertype']!=_0x1b99c0(0x346)&&logHistory(_0x1b99c0(0x328),_0x1b99c0(0x28b)+_0x5a5f7e['symbol']+'\x20'+_0x5a5f7e[_0x1b99c0(0x257)]+'\x20#'+formatResult(_0x5a5f7e[_0x1b99c0(0x1d9)],0x8)+'\x20@'+formatResult(_0x5a5f7e['price'],0x8));}),_0x1388a1[_0x4546ae(0x291)]((_0x18bcbb,_0x2cc0c8)=>{const _0x5ea23b=_0x4546ae;if(_0x18bcbb)lastOrders[_0x5ea23b(0x1df)](_0x2cc0c8,0x1);}),persistOpenOrders(lastOrders);const _0x266a0f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4546ae(0x2a2);if(validateOrdersState==_0x4546ae(0x2f0)){validateOrdersState=_0x4546ae(0x26c);if(_0x1388a1[_0x4546ae(0x268)](![])){if(config[_0x4546ae(0x245)]==_0x4546ae(0x346)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1388a1[_0x4546ae(0x268)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x4546ae(0x346)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4546ae(0x23a))_0x1388a1[_0x4546ae(0x268)](![])&&(config[_0x4546ae(0x245)]==_0x4546ae(0x346)?logHistory('success',_0x4546ae(0x302)+Math['round'](_0x5a0031*validateOrderInterval/0xea60)+_0x4546ae(0x1c4)+_0x266a0f):(await cancelOrders(),logHistory('success',_0x4546ae(0x1f9)+Math[_0x4546ae(0x276)](_0x5a0031*validateOrderInterval/0xea60)+_0x4546ae(0x1c4)+_0x266a0f))),await unlockOrders();else{if(validateOrdersState==_0x4546ae(0x228)){if(config['ordertype']!=_0x4546ae(0x346))logHistory(_0x4546ae(0x211),'No\x20more\x20open\x20orders\x20-\x20'+_0x266a0f);await unlockOrders();}}}}}async function cancelOrders(){const _0x40a4ca=_0x2d865c;lastOrders[_0x40a4ca(0x291)](async _0x436085=>{const _0x447b16=_0x40a4ca;try{const _0x36e0fa=await exchange['cancelOrder'](_0x436085[_0x447b16(0x1f0)],_0x436085[_0x447b16(0x286)]);}catch(_0x157312){if(_0x157312[_0x447b16(0x275)]()[_0x447b16(0x268)](_0x447b16(0x1da))){}else await handleError(_0x157312,_0x447b16(0x230));}});}async function initCoinResults(_0x412b15){const _0x13e808=_0x2d865c;_0x412b15?logger['debug'](_0x13e808(0x2ec)+_0x412b15):logger[_0x13e808(0x264)](_0x13e808(0x272)),config[_0x13e808(0x30d)][_0x13e808(0x291)](_0x1280be=>{const _0x31f138=_0x13e808;if(!_0x1280be['excluded']&&_0x1280be[_0x31f138(0x224)]!=config[_0x31f138(0x29f)]){const _0x4564bc=currentCoins[_0x31f138(0x2de)](_0x327008=>_0x327008[_0x31f138(0x224)]==_0x1280be[_0x31f138(0x224)]),_0x2383ca=global['ticker'][noslash(_0x1280be['symbol'])];let _0x30d8d1=_0x4564bc?_0x4564bc[_0x31f138(0x1d1)]:null,_0x4bfb3b=_0x1280be[_0x31f138(0x1cf)]?0x1/_0x2383ca:_0x2383ca,_0x207e4f;config['liquidity'][_0x31f138(0x291)](_0x376790=>{const _0x2a64b0=_0x31f138;!_0x207e4f&&(_0x207e4f=_0x376790[_0x2a64b0(0x1dd)]['find'](_0x9ec37f=>_0x9ec37f['coin']==_0x1280be[_0x2a64b0(0x224)]),_0x207e4f&&(_0x30d8d1=_0x207e4f[_0x2a64b0(0x1d1)],_0x4bfb3b=_0x207e4f[_0x2a64b0(0x238)]));});let _0xd5c304=dbCoinResults[_0x31f138(0x274)](_0x31f138(0x2db))['find']({'coin':_0x1280be[_0x31f138(0x224)]})[_0x31f138(0x32c)]();if(!_0xd5c304){const _0x594df5={'coin':_0x1280be[_0x31f138(0x224)],'number':_0x30d8d1,'breakeven':_0x4bfb3b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x31f138(0x2db))[_0x31f138(0x1ef)](_0x594df5)[_0x31f138(0x306)]();}else{if(_0x412b15&&_0x1280be[_0x31f138(0x224)]==_0x412b15){const _0x282264={'coin':_0x1280be[_0x31f138(0x224)],'number':_0x30d8d1,'breakeven':_0x4bfb3b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x31f138(0x274)](_0x31f138(0x2db))['find']({'coin':_0x1280be[_0x31f138(0x224)]})[_0x31f138(0x27a)](_0x282264)['write']();}}}});}async function updateCoinResults(_0x23a83b,_0x16ac73=![]){const _0x491c91=_0x2d865c;let _0x4dfd11,_0x2cc0e1,_0x2cb94d,_0x1880b1,_0x1f1551,_0x6549d1,_0x3d84c3=dbCoinResults[_0x491c91(0x274)](_0x491c91(0x2db))[_0x491c91(0x2de)]({'coin':_0x23a83b[_0x491c91(0x224)]})[_0x491c91(0x32c)](),_0x4eee92=![];_0x3d84c3&&Object[_0x491c91(0x277)](_0x3d84c3)['forEach'](([_0x1f0a1a,_0x1b90f0])=>{if(_0x1b90f0==null)_0x4eee92=!![];});(!_0x3d84c3||_0x4eee92)&&(await initCoinResults(_0x23a83b[_0x491c91(0x224)]),_0x3d84c3=dbCoinResults[_0x491c91(0x274)](_0x491c91(0x2db))[_0x491c91(0x2de)]({'coin':_0x23a83b['coin']})[_0x491c91(0x32c)]());_0x23a83b[_0x491c91(0x1cf)]&&(_0x6549d1={'filled':_0x23a83b[_0x491c91(0x1d9)]*_0x23a83b[_0x491c91(0x238)],'amount':_0x23a83b['filled']*_0x23a83b['price'],'side':_0x23a83b[_0x491c91(0x257)]=='sell'?'buy':_0x491c91(0x2d1),'price':0x1/_0x23a83b[_0x491c91(0x238)]},_0x23a83b={..._0x23a83b,..._0x6549d1});_0x16ac73?_0x2cc0e1=_0x23a83b[_0x491c91(0x257)]==_0x491c91(0x301)?_0x3d84c3[_0x491c91(0x1d1)]+_0x23a83b[_0x491c91(0x1d9)]:_0x3d84c3['number']-_0x23a83b[_0x491c91(0x1d9)]:_0x2cc0e1=await getCoinNumber(_0x23a83b[_0x491c91(0x224)]);if(_0x23a83b[_0x491c91(0x20c)]&&_0x23a83b[_0x491c91(0x20c)][_0x491c91(0x203)]==config[_0x491c91(0x29f)])_0x4dfd11=_0x23a83b['fee'][_0x491c91(0x2f8)];else{if(_0x23a83b[_0x491c91(0x20c)]&&_0x23a83b[_0x491c91(0x20c)]['currency']=='BNB'&&!_0x16ac73)_0x4dfd11=_0x23a83b[_0x491c91(0x20c)]['cost']*global[_0x491c91(0x320)][_0x491c91(0x2a0)+config[_0x491c91(0x29f)]];else _0x4dfd11=defaultFee*_0x23a83b['filled']*_0x23a83b[_0x491c91(0x238)];}_0x23a83b['side']==_0x491c91(0x301)?(_0x2cb94d=_0x2cc0e1!=0x0?(_0x3d84c3[_0x491c91(0x2d8)]*_0x3d84c3[_0x491c91(0x1d1)]+_0x23a83b[_0x491c91(0x238)]*(_0x2cc0e1-_0x3d84c3['number'])+_0x4dfd11)/_0x2cc0e1:0x0,_0x1880b1=_0x3d84c3['realized']):(_0x2cb94d=_0x2cc0e1!=0x0?(_0x3d84c3[_0x491c91(0x2d8)]*_0x3d84c3[_0x491c91(0x1d1)]-_0x23a83b[_0x491c91(0x238)]*(_0x3d84c3[_0x491c91(0x1d1)]-_0x2cc0e1)+_0x4dfd11)/_0x2cc0e1:0x0,_0x1880b1=_0x3d84c3[_0x491c91(0x259)]+(_0x23a83b[_0x491c91(0x238)]-_0x3d84c3[_0x491c91(0x2d8)])*_0x23a83b['filled']);_0x1f1551=(_0x23a83b['price']-_0x2cb94d-_0x4dfd11/_0x23a83b[_0x491c91(0x1d9)])*_0x2cc0e1;let _0x242e0a={'coin':_0x23a83b[_0x491c91(0x224)],'number':_0x2cc0e1,'breakeven':formatResult(_0x2cb94d,0x8),'realized':formatResult(_0x1880b1,0x8),'unrealized':formatResult(_0x1f1551,0x8),'fees':formatResult(_0x3d84c3[_0x491c91(0x2d3)]+_0x4dfd11,0x8),'sells':_0x23a83b[_0x491c91(0x257)]==_0x491c91(0x2d1)?_0x3d84c3[_0x491c91(0x31a)]+0x1:_0x3d84c3['sells'],'buys':_0x23a83b[_0x491c91(0x257)]==_0x491c91(0x301)?_0x3d84c3['buys']+0x1:_0x3d84c3[_0x491c91(0x300)]};dbCoinResults[_0x491c91(0x274)]('coins')[_0x491c91(0x2de)]({'coin':_0x23a83b[_0x491c91(0x224)]})['assign'](_0x242e0a)[_0x491c91(0x306)]();if(!_0x16ac73){if(_0x23a83b[_0x491c91(0x20c)]&&_0x23a83b[_0x491c91(0x20c)][_0x491c91(0x203)]=='BNB'){const _0x505a14=currentCoins[_0x491c91(0x2de)](_0x338bb2=>_0x338bb2[_0x491c91(0x224)]==_0x491c91(0x2a0));if(_0x505a14){let _0x54f5ea=dbCoinResults['get'](_0x491c91(0x2db))[_0x491c91(0x2de)]({'coin':'BNB'})[_0x491c91(0x32c)]();_0x242e0a={..._0x54f5ea,'number':_0x505a14[_0x491c91(0x1d1)]},dbCoinResults[_0x491c91(0x274)](_0x491c91(0x2db))[_0x491c91(0x2de)]({'coin':_0x491c91(0x2a0)})[_0x491c91(0x27a)](_0x242e0a)['write']();}}}}async function placeOrder(_0x5e6df8){const _0x200008=_0x2d865c,_0x3570af=config['ordertype']==_0x200008(0x346)?'market':_0x200008(0x214);if(lockOrders==ORDERS[_0x200008(0x2c4)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x200008(0x2f0);let _0x190d22=![];lastOrders=[];for(const _0x126e82 of _0x5e6df8){let _0x5b4991,_0x5c3e94,_0x4af21c,_0x4953ca,_0x218bbd,_0x35d00d=_0x126e82['symbol'];try{const _0x1b349e=await exchange[_0x200008(0x2eb)](_0x35d00d);_0x5b4991=_0x126e82[_0x200008(0x1cf)]?0x1/_0x126e82['last']:_0x126e82['last'],_0x5c3e94=_0x1b349e['bid'],_0x4af21c=_0x1b349e[_0x200008(0x2fd)];_0x126e82[_0x200008(0x1cf)]?(_0x4953ca=_0x126e82[_0x200008(0x257)]==_0x200008(0x301)?_0x200008(0x2d1):_0x200008(0x301),_0x218bbd=Math[_0x200008(0x293)](_0x126e82[_0x200008(0x280)])/_0x5b4991):(_0x4953ca=_0x126e82[_0x200008(0x257)],_0x218bbd=Math['abs'](_0x126e82[_0x200008(0x280)]));_0x3570af==_0x200008(0x214)&&(config[_0x200008(0x245)]=='limit-high'&&(_0x5b4991=_0x4953ca==_0x200008(0x301)?_0x5c3e94:_0x4af21c),config['ordertype']=='limit-low'&&(_0x5b4991=_0x4953ca=='buy'?_0x4af21c:_0x5c3e94));_0x218bbd=formatResult(_0x218bbd,0x8),_0x5b4991=formatResult(_0x5b4991,0x8);const _0x2f137a=_0x4953ca==_0x200008(0x2d1)?config[_0x200008(0x2dd)]?String[_0x200008(0x287)]('0x'+config[_0x200008(0x2dd)])+'\x20':'':config['emojibuy']?String[_0x200008(0x287)]('0x'+config[_0x200008(0x1ea)])+'\x20':'',_0x91555=_0x3570af=='market'?'Market':config[_0x200008(0x245)]==_0x200008(0x273)?_0x200008(0x2a4):_0x200008(0x28a),_0x329c42=(Math[_0x200008(0x2ea)](Math[_0x200008(0x308)]()*0x35a4e900)+0x5f5e100)[_0x200008(0x275)]();lastOrders[_0x200008(0x1ef)]({'customId':_0x329c42,'symbol':_0x35d00d,'coin':_0x126e82[_0x200008(0x224)],'amount':_0x218bbd,'price':_0x5b4991,'side':_0x4953ca,'reverse':_0x126e82[_0x200008(0x1cf)],'filled':0x0});if(_0x3570af=='market')logHistory(_0x200008(0x328),''+_0x2f137a+_0x91555+_0x200008(0x2e5)+_0x35d00d+'\x20'+_0x4953ca+'\x20#'+formatResult(_0x218bbd,0x8)+'\x20@'+formatResult(_0x5b4991,0x8));else logHistory(_0x200008(0x328),''+_0x2f137a+_0x91555+_0x200008(0x2e5)+_0x35d00d+'\x20'+_0x4953ca+'\x20#'+formatResult(_0x218bbd,0x8)+'\x20@'+formatResult(_0x5b4991,0x8));let _0x95da2;_0x3570af==_0x200008(0x346)?_0x4953ca==_0x200008(0x301)&&[_0x200008(0x2e3),_0x200008(0x285),'Cex',_0x200008(0x1fb),'Huobipro'][_0x200008(0x268)](config[_0x200008(0x225)])?_0x95da2=await exchange[_0x200008(0x27c)](_0x35d00d,_0x3570af,_0x4953ca,_0x218bbd,_0x5b4991):_0x95da2=await exchange['createOrder'](_0x35d00d,_0x3570af,_0x4953ca,_0x218bbd,undefined):_0x95da2=await exchange[_0x200008(0x27c)](_0x35d00d,_0x3570af,_0x4953ca,_0x218bbd,_0x5b4991);logger[_0x200008(0x264)](_0x200008(0x2a8)+_0x95da2['id']+_0x200008(0x314)+_0x329c42);const _0x152bc6=lastOrders[_0x200008(0x21a)]-0x1;if(_0x152bc6>=0x0&&lastOrders[_0x152bc6][_0x200008(0x2ba)]==_0x329c42){lastOrders[_0x152bc6][_0x200008(0x1f0)]=_0x95da2['id'];if(_0x95da2[_0x200008(0x229)])lastOrders[_0x152bc6][_0x200008(0x229)]=_0x95da2[_0x200008(0x229)];if(_0x95da2[_0x200008(0x238)])lastOrders[_0x152bc6][_0x200008(0x238)]=_0x95da2[_0x200008(0x238)];lastOrders[_0x152bc6][_0x200008(0x20c)]=_0x95da2[_0x200008(0x20c)];}if(config[_0x200008(0x279)]!=0x0){let _0x51e4fb=null;if(cooldownTracker[_0x200008(0x21a)]==config[_0x200008(0x279)]-0x1)_0x51e4fb=cooldownTracker['shift']();const _0x3822d7=getTimeStamp();cooldownTracker[_0x200008(0x1ef)](_0x3822d7);if(_0x51e4fb){const _0x40a95a=fns[_0x200008(0x1ce)](new Date(_0x3822d7),new Date(_0x51e4fb));if(_0x40a95a<cooldownInterval){logHistory(_0x200008(0x1fa),_0x200008(0x1f5)+config[_0x200008(0x279)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x200008(0x31b)+cooldownPeriod/(0xe10*0x3e8)+_0x200008(0x343)),coolingDown=!![];break;}}}}catch(_0x4402be){if(_0x4402be[_0x200008(0x275)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x200008(0x2ae)](_0x3577f9=>_0x3577f9[_0x200008(0x286)]!=_0x35d00d),logHistory(_0x200008(0x1fa),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x35d00d),_0x190d22=!![];else{if(_0x4402be[_0x200008(0x275)]()[_0x200008(0x268)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x7e475=>_0x7e475['symbol']!=_0x35d00d),logHistory(_0x200008(0x1fa),_0x200008(0x23b)+_0x35d00d),_0x190d22=!![];else{if(_0x4402be[_0x200008(0x275)]()['includes']('InvalidOrder'))lastOrders=lastOrders['filter'](_0x153c6e=>_0x153c6e[_0x200008(0x286)]!=_0x35d00d),logHistory(_0x200008(0x1fa),_0x200008(0x305)+_0x35d00d),logger['debug'](_0x4402be),_0x190d22=!![];else _0x4402be[_0x200008(0x275)]()[_0x200008(0x268)](_0x200008(0x1f4))?(lastOrders=lastOrders['filter'](_0x47771c=>_0x47771c['symbol']!=_0x35d00d),logHistory(_0x200008(0x1fa),_0x200008(0x1dc)+_0x35d00d),_0x190d22=!![]):(lastOrders=lastOrders[_0x200008(0x2ae)](_0x3517e5=>_0x3517e5['symbol']!=_0x35d00d),await handleError(_0x4402be,_0x200008(0x2c7),_0x35d00d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x200008(0x21a)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x39bfcd=config[_0x200008(0x245)]==_0x200008(0x346)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b5efb=_0x200008;validateOrders(_0x2b5efb(0x23a));},_0x39bfcd);}else unlockOrders();_0x190d22&&config[_0x200008(0x1c6)]&&(logHistory(_0x200008(0x1fa),_0x200008(0x1c2)),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x200008(0x211),_0x200008(0x232)));}else{if(coolingDown)!config[_0x200008(0x1c6)]&&logHistory('error',_0x200008(0x1e5));else lockOrders!=ORDERS[_0x200008(0x2c4)]&&(!config['headless']&&(config['ordertype']==_0x200008(0x346)?logHistory(_0x200008(0x1fa),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x200008(0x1fa),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5c39b5){const _0x33068b=_0x2d865c,_0x3dfc75={...config,'openOrders':_0x5c39b5};let _0x4f5e78=dbConfig[_0x33068b(0x274)](_0x33068b(0x256))['find']({'botID':botID})[_0x33068b(0x32c)]();_0x4f5e78&&dbConfig[_0x33068b(0x274)](_0x33068b(0x256))['find']({'botID':botID})[_0x33068b(0x27a)](_0x3dfc75)[_0x33068b(0x306)]();}function restoreOrders(){const _0x1b704c=_0x2d865c;let _0x5c8856;config['openOrders']&&allOpenOrders['forEach'](_0x46fd0e=>{const _0x1a203b=_0x4a8e,_0x5d8119=config[_0x1a203b(0x307)][_0x1a203b(0x2de)](_0x2badad=>_0x2badad[_0x1a203b(0x1f0)]==_0x46fd0e['id']);_0x5d8119&&(lastOrders['push'](_0x5d8119),_0x5c8856=_0x46fd0e[_0x1a203b(0x1f8)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x1b704c(0x2a3)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0xa3c0c2=new Date()[_0x1b704c(0x248)](),_0x5bf5b0=config[_0x1b704c(0x245)]==_0x1b704c(0x346)?validateOrderTimeout*0x3c*0x3e8:config[_0x1b704c(0x2bf)]*0x3c*0x3e8;if(_0x5c8856+_0x5bf5b0>_0xa3c0c2){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x367dc4=_0x1b704c;validateOrders(_0x367dc4(0x23a));},_0x5c8856+_0x5bf5b0-_0xa3c0c2);}else validateOrders(_0x1b704c(0x23a));}}async function sendMetricsTelegram(){const _0x3a571f=_0x2d865c;if(!coinsLoaded){process[_0x3a571f(0x33c)]({'telegrammsg':_0x3a571f(0x28f)},_0x34b920=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x30df74='';if(config['showname'])_0x30df74=_0x3a571f(0x32b)+config[_0x3a571f(0x319)]+_0x3a571f(0x34a);else _0x30df74=_0x3a571f(0x29c)+botID+_0x3a571f(0x34a);const _0x110357=getKPIs(_0x3a571f(0x29f)),_0x140fd0=getKPIs(_0x3a571f(0x2b8),config[_0x3a571f(0x2b8)]),_0x5bb1b9=getKPIs(_0x3a571f(0x2d0)),_0xf26803=getKPIs(_0x3a571f(0x33f),config[_0x3a571f(0x2b8)]);_0x30df74+=_0x3a571f(0x1f6),_0x30df74+=_0x110357[_0x3a571f(0x1e6)]+_0x3a571f(0x1c7)+_0x110357['value']+'\x0a',_0x30df74+=_0x110357[_0x3a571f(0x297)]+':\x20'+_0x110357[_0x3a571f(0x22f)]+'%\x0a',_0x30df74+=_0x140fd0[_0x3a571f(0x1e6)]+_0x3a571f(0x1c7)+_0x140fd0[_0x3a571f(0x32c)]+'\x0a',_0x30df74+=_0x140fd0[_0x3a571f(0x297)]+':\x20'+_0x140fd0[_0x3a571f(0x22f)]+'%\x0a',_0x30df74+=_0x5bb1b9[_0x3a571f(0x1e6)]+':\x20'+_0x5bb1b9['value']+'\x20('+config[_0x3a571f(0x29f)]+')\x0a',_0x30df74+=_0x5bb1b9[_0x3a571f(0x297)]+':\x20'+_0x5bb1b9[_0x3a571f(0x22f)]+'%\x20('+config[_0x3a571f(0x29f)]+')\x0a',_0x30df74+=_0xf26803['leftTxt']+':\x20'+_0xf26803[_0x3a571f(0x32c)]+'\x20('+config[_0x3a571f(0x2b8)]+')\x0a',_0x30df74+=_0xf26803[_0x3a571f(0x297)]+':\x20'+_0xf26803[_0x3a571f(0x22f)]+'%\x20('+config[_0x3a571f(0x2b8)]+')\x0a',_0x30df74+=_0x3a571f(0x242),process[_0x3a571f(0x33c)]({'telegrammsg':_0x30df74},_0x43a86c=>{});}async function sendPortfolioTelegram(){const _0x49a805=_0x2d865c;if(!coinsLoaded){process[_0x49a805(0x33c)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4e73b5=>{});return;}let _0x4e22ad='';if(config[_0x49a805(0x219)])_0x4e22ad=_0x49a805(0x32b)+config[_0x49a805(0x319)]+_0x49a805(0x2d5);else _0x4e22ad=_0x49a805(0x29c)+botID+_0x49a805(0x2d5);_0x4e22ad+='<pre>',_0x4e22ad+=_0x49a805(0x2f3),_0x4e22ad+=_0x49a805(0x32a),_0x4e22ad+=_0x49a805(0x2f3),currentCoins[_0x49a805(0x291)](_0x30158d=>{const _0x101641=_0x49a805;_0x4e22ad+=_0x30158d[_0x101641(0x224)][_0x101641(0x289)](0x7)+'|\x20'+formatPad(_0x30158d[_0x101641(0x240)],0x2,0x6)+'|\x20'+formatPad(_0x30158d[_0x101641(0x200)],0x2,0x6)+'|\x20'+formatPad(_0x30158d['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4e22ad+=_0x49a805(0x242),process[_0x49a805(0x33c)]({'telegrammsg':_0x4e22ad},_0xd26f17=>{});}function formatPad(_0x380316,_0x3fcb2f,_0x1e215d){const _0x372b97=_0x2d865c,_0x176e43=formatResultString(_0x380316,_0x3fcb2f);return _0x176e43?_0x176e43[_0x372b97(0x26b)](_0x1e215d):''['padStart'](_0x1e215d);}function logHistory(_0x532b80,_0x144b2e,_0x1b0212=''){const _0x184180=_0x2d865c;logger['full'](''+_0x144b2e);let _0x368029={'time':getTimeStamp(),'type':_0x532b80,'event':_0x144b2e};dbLogs[_0x184180(0x274)](_0x184180(0x267))[_0x184180(0x1ef)](_0x368029)['write']();if(_0x1b0212=='')_0x1b0212=_0x144b2e;proxyEmit(_0x184180(0x316),{'log':_0x368029,'summary':_0x1b0212}),process[_0x184180(0x33c)]({'telegram':{..._0x368029,'botname':config[_0x184180(0x319)],'showname':config['showname']}},_0x3279d4=>{});}function emitHistory(_0x57e354={}){const _0xa7adb9=_0x2d865c;Object[_0xa7adb9(0x258)](_0x57e354)[_0xa7adb9(0x21a)]==0x0&&(_0x57e354={'type':[_0xa7adb9(0x328),_0xa7adb9(0x316)],'event':'','page':0x1});if(_0x57e354[_0xa7adb9(0x2b4)][_0xa7adb9(0x268)](_0xa7adb9(0x316)))_0x57e354[_0xa7adb9(0x2b4)][_0xa7adb9(0x1df)](_0x57e354[_0xa7adb9(0x2b4)][_0xa7adb9(0x21d)](_0xa7adb9(0x316)),0x1,'error',_0xa7adb9(0x34e),_0xa7adb9(0x211));if(dbLogs[_0xa7adb9(0x201)](_0xa7adb9(0x267))[_0xa7adb9(0x32c)]()){let _0x416c14=dbLogs[_0xa7adb9(0x274)]('logs')[_0xa7adb9(0x2ae)](_0x3deb6a=>{const _0x1d39e9=_0xa7adb9;if(_0x57e354[_0x1d39e9(0x2b4)][_0x1d39e9(0x21a)]==0x0)return![];else return _0x57e354[_0x1d39e9(0x2b4)]['includes'](_0x3deb6a[_0x1d39e9(0x2b4)]);})[_0xa7adb9(0x2ae)](_0x3b7378=>{const _0x3326a2=_0xa7adb9;if(_0x57e354[_0x3326a2(0x316)]=='')return!![];else return _0x3b7378[_0x3326a2(0x316)][_0x3326a2(0x24f)]()['includes'](_0x57e354[_0x3326a2(0x316)]['toLowerCase']());})[_0xa7adb9(0x34d)](_0xa7adb9(0x1d6)),_0x83fe14=_0x416c14['value']()[_0xa7adb9(0x21a)];_0x416c14=_0x416c14['reverse']()['slice']((_0x57e354[_0xa7adb9(0x2c5)]-0x1)*logPageSize,_0x57e354[_0xa7adb9(0x2c5)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0xa7adb9(0x331),{'logs':_0x416c14,'total':_0x83fe14});}else proxyEmit(_0xa7adb9(0x331),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4394f9){const _0x545875=_0x2d865c;if(dbLogs['has'](_0x545875(0x267))[_0x545875(0x32c)]()){const _0x5f3496=dbLogs[_0x545875(0x274)]('logs')[_0x545875(0x34d)](_0x545875(0x1d6))[_0x545875(0x2ae)](_0x4dcdbd=>{const _0x46c704=_0x545875;return _0x4dcdbd[_0x46c704(0x2b4)]=='order';})['value']();dbLogs[_0x545875(0x274)](_0x545875(0x267))[_0x545875(0x32f)]()[_0x545875(0x306)](),dbLogs['get'](_0x545875(0x267))[_0x545875(0x27a)](_0x5f3496)[_0x545875(0x306)](),emitHistory(_0x4394f9);}}async function pauseBot(){const _0x56135c=_0x2d865c,_0x4bedb=new Date()[_0x56135c(0x248)]();if(!lastErrorShown||_0x4bedb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4bedb;!lastBotPause?(lastBotPause=_0x4bedb,consecutivePauses=0x1):(_0x4bedb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x56135c(0x321)},_0x5666d7=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x56135c(0x248)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory('error',_0x56135c(0x31e)+pauseBotInterval/0xea60+_0x56135c(0x235)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x48c7b3=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x430492,_0x55e026){const _0x108ebf=_0x2d865c;if(botPaused)return;const _0x11f1be=config[_0x108ebf(0x225)]||_0x108ebf(0x335);if(_0x55e026)logger[_0x108ebf(0x264)]('Exception\x20thrown\x20in\x20'+_0x55e026);if(_0x430492[_0x108ebf(0x275)]()[_0x108ebf(0x268)](_0x108ebf(0x27b)))logHistory(_0x108ebf(0x1fa),_0x11f1be+_0x108ebf(0x1cb));else{if(_0x430492['toString']()[_0x108ebf(0x268)](_0x108ebf(0x2a7)))logHistory(_0x108ebf(0x1fa),_0x11f1be+_0x108ebf(0x1e2));else _0x430492[_0x108ebf(0x275)]()[_0x108ebf(0x268)](_0x108ebf(0x263))?(logHistory(_0x108ebf(0x1fa),_0x11f1be+_0x108ebf(0x266)),logHistory(_0x108ebf(0x1fa),_0x108ebf(0x1ee))):await handleError(_0x430492,null);}}async function handleError(_0x2af0a3,_0x1dd380,_0x372ed0=''){const _0x31182c=_0x2d865c;if(botPaused)return;const _0x4e026b=config[_0x31182c(0x225)]||_0x31182c(0x335);if(_0x1dd380)logger[_0x31182c(0x264)](_0x31182c(0x2ee)+_0x1dd380);if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)](_0x31182c(0x324))||_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)]('RateLimitExceeded'))logHistory(_0x31182c(0x1fa),_0x4e026b+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'),await pauseBot();else{if(_0x2af0a3['toString']()[_0x31182c(0x268)](_0x31182c(0x233))||_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)](_0x31182c(0x2b7)))logHistory(_0x31182c(0x1fa),_0x4e026b+'\x20not\x20available'),await pauseBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)]('RequestTimeout'))logHistory(_0x31182c(0x1fa),_0x4e026b+'\x20not\x20responding'),await pauseBot();else{if(_0x2af0a3['toString']()[_0x31182c(0x268)](_0x31182c(0x2b5)))logHistory(_0x31182c(0x1fa),_0x4e026b+_0x31182c(0x207)),await pauseBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)](_0x31182c(0x333)))logHistory(_0x31182c(0x1fa),_0x31182c(0x24b)),logHistory(_0x31182c(0x1fa),_0x31182c(0x251)),await killBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)]('InvalidNonce'))logHistory(_0x31182c(0x1fa),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x31182c(0x1fa),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2af0a3 instanceof ccxt[_0x31182c(0x2e7)])logHistory('error',_0x4e026b+_0x31182c(0x345)),logger[_0x31182c(0x264)](_0x31182c(0x352),_0x2af0a3),await pauseBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)](_0x31182c(0x27b)))logHistory('error',_0x4e026b+_0x31182c(0x206)),logHistory(_0x31182c(0x1fa),_0x31182c(0x251)),await killBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x31182c(0x1fa),_0x4e026b+_0x31182c(0x30a)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2af0a3[_0x31182c(0x275)]()[_0x31182c(0x268)]('AuthenticationError'))logHistory(_0x31182c(0x1fa),_0x4e026b+_0x31182c(0x1de)),logHistory(_0x31182c(0x1fa),_0x31182c(0x251)),await killBot();else{if(_0x2af0a3['toString']()[_0x31182c(0x268)](_0x31182c(0x1db)))logHistory(_0x31182c(0x1fa),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x372ed0);else _0x2af0a3 instanceof ccxt['ExchangeError']?(logHistory(_0x31182c(0x1fa),_0x4e026b+'\x20exchange\x20error'),logger[_0x31182c(0x264)](_0x31182c(0x352),_0x2af0a3)):(logHistory(_0x31182c(0x1fa),_0x31182c(0x2d2)),logger['debug']('Error\x20details:',_0x2af0a3),await pauseBot());}}}}}}}}}}}function formatResult(_0x447258,_0x53da31){const _0xda73f7=_0x2d865c;return parseFloat(_0x447258[_0xda73f7(0x310)](_0x53da31));}function formatResultTruncate(_0x57947f,_0xa4efe8){const _0x124cb1=_0x2d865c;let _0x413030=formatResultString(_0x57947f,0xa),_0xe56b73=_0x413030[_0x124cb1(0x21d)]('.');return _0xe56b73!=-0x1&&(_0x413030=_0x413030['slice'](0x0,_0xe56b73+_0xa4efe8+0x1)),Number(_0x413030);}function formatResultString(_0x180eea,_0x453918){const _0x475d13=_0x2d865c;let _0xfc2bf8;if(!(''+_0x180eea)[_0x475d13(0x268)]('e'))_0xfc2bf8=+(Math[_0x475d13(0x276)](_0x180eea+'e+'+_0x453918)+'e-'+_0x453918);else{let _0x8ecd22=(''+_0x180eea)[_0x475d13(0x27e)]('e'),_0x50b5ea='';+_0x8ecd22[0x1]+_0x453918>0x0&&(_0x50b5ea='+'),_0xfc2bf8=+(Math['round'](+_0x8ecd22[0x0]+'e'+_0x50b5ea+(+_0x8ecd22[0x1]+_0x453918))+'e-'+_0x453918);}return Number(_0xfc2bf8)[_0x475d13(0x310)](_0x453918);}function getServerTime(){const _0x2d0ea5=_0x2d865c,_0x13a00b=new Date();return _0x13a00b[_0x2d0ea5(0x283)]()+'/'+(_0x13a00b[_0x2d0ea5(0x2e8)]()+0x1)[_0x2d0ea5(0x275)]()[_0x2d0ea5(0x26b)](0x2,'0')+'/'+_0x13a00b[_0x2d0ea5(0x312)]()[_0x2d0ea5(0x275)]()[_0x2d0ea5(0x26b)](0x2,'0')+'\x20'+_0x13a00b[_0x2d0ea5(0x313)]()[_0x2d0ea5(0x275)]()[_0x2d0ea5(0x26b)](0x2,'0')+':'+_0x13a00b[_0x2d0ea5(0x322)]()[_0x2d0ea5(0x275)]()[_0x2d0ea5(0x26b)](0x2,'0')+':'+_0x13a00b[_0x2d0ea5(0x24d)]()[_0x2d0ea5(0x275)]()[_0x2d0ea5(0x26b)](0x2,'0');}function getTimeStamp(){const _0x42e8a0=_0x2d865c,_0x3b3229=shiftedTime();return _0x3b3229[_0x42e8a0(0x283)]()+'/'+(_0x3b3229['getMonth']()+0x1)[_0x42e8a0(0x275)]()[_0x42e8a0(0x26b)](0x2,'0')+'/'+_0x3b3229[_0x42e8a0(0x312)]()[_0x42e8a0(0x275)]()[_0x42e8a0(0x26b)](0x2,'0')+'\x20'+_0x3b3229['getHours']()[_0x42e8a0(0x275)]()['padStart'](0x2,'0')+':'+_0x3b3229[_0x42e8a0(0x322)]()[_0x42e8a0(0x275)]()['padStart'](0x2,'0')+':'+_0x3b3229[_0x42e8a0(0x24d)]()[_0x42e8a0(0x275)]()[_0x42e8a0(0x26b)](0x2,'0');}function getDate(){const _0x53e73a=_0x2d865c,_0x196b62=shiftedTime();return _0x196b62[_0x53e73a(0x283)]()+'/'+(_0x196b62[_0x53e73a(0x2e8)]()+0x1)[_0x53e73a(0x275)]()[_0x53e73a(0x26b)](0x2,'0')+'/'+_0x196b62[_0x53e73a(0x312)]()[_0x53e73a(0x275)]()[_0x53e73a(0x26b)](0x2,'0');}function getHour(){const _0x36070c=_0x2d865c,_0x4dd84e=shiftedTime();return _0x4dd84e['getHours']()[_0x36070c(0x275)]()[_0x36070c(0x26b)](0x2,'0');}function sleep(_0x1ee9e3){return new Promise(_0x5eeb86=>setTimeout(_0x5eeb86,_0x1ee9e3));}function shiftedTime(){const _0x23612a=_0x2d865c,_0x32d03f=new Date();let _0x1ad156=_0x32d03f;if(config&&config[_0x23612a(0x2f4)]!==0x0)_0x1ad156=fns[_0x23612a(0x26d)](_0x32d03f,{'hours':config[_0x23612a(0x2f4)]});return _0x1ad156;}function timer(_0x519daa){const _0x1d0a87=_0x2d865c,_0x342da9=new Date();!lasttime?console['log'](getTimeStamp()+_0x1d0a87(0x2a5),_0x519daa,_0x342da9):console['log'](getTimeStamp()+_0x1d0a87(0x2a5),_0x519daa,(_0x342da9-lasttime)/0x3e8),lasttime=_0x342da9;}