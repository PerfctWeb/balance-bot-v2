const _0xd052f1=_0x2bde;(function(_0x200e9f,_0x4111ff){const _0x55b814=_0x2bde,_0x2a407b=_0x200e9f();while(!![]){try{const _0x21c4ad=parseInt(_0x55b814(0x20c))/0x1*(parseInt(_0x55b814(0x1c4))/0x2)+parseInt(_0x55b814(0x24e))/0x3+parseInt(_0x55b814(0x162))/0x4*(-parseInt(_0x55b814(0x211))/0x5)+parseInt(_0x55b814(0x1b4))/0x6+-parseInt(_0x55b814(0x28b))/0x7+parseInt(_0x55b814(0x284))/0x8+-parseInt(_0x55b814(0x250))/0x9*(parseInt(_0x55b814(0x18e))/0xa);if(_0x21c4ad===_0x4111ff)break;else _0x2a407b['push'](_0x2a407b['shift']());}catch(_0x524d80){_0x2a407b['push'](_0x2a407b['shift']());}}}(_0x1728,0x6aea4));const _0x19873e=function(){let _0x57769a=!![];return function(_0x9109f6,_0x6a6f7){const _0x286a0e=_0x57769a?function(){const _0x45e224=_0x2bde;if(_0x6a6f7){const _0x15faf0=_0x6a6f7[_0x45e224(0x1f2)](_0x9109f6,arguments);return _0x6a6f7=null,_0x15faf0;}}:function(){};return _0x57769a=![],_0x286a0e;};}(),_0x29ea4f=_0x19873e(this,function(){const _0x12c518=_0x2bde;return _0x29ea4f[_0x12c518(0x192)]()[_0x12c518(0x1e3)]('(((.+)+)+)+$')['toString']()[_0x12c518(0x10d)](_0x29ea4f)[_0x12c518(0x1e3)](_0x12c518(0x15f));});_0x29ea4f();'use strict';const ccxt=require(_0xd052f1(0x1ef)),low=require(_0xd052f1(0x119)),FileSync=require(_0xd052f1(0x285)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0xd052f1(0x151))[_0xd052f1(0x16c)],util=require('util'),argv=require(_0xd052f1(0x25b))(process[_0xd052f1(0x223)][_0xd052f1(0x16d)](0x2))[_0xd052f1(0x223)],path=require(_0xd052f1(0x19d));let exchange;global['ticker']={},global[_0xd052f1(0x1cd)]={};const usdBasecoins=[_0xd052f1(0x152),_0xd052f1(0x261),_0xd052f1(0x188),'USDT',_0xd052f1(0x168),_0xd052f1(0x17f)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xd052f1(0x273)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xd052f1(0x14f)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xd052f1(0x109)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xd052f1(0x1d4))[_0xd052f1(0x23a)],botID=process[_0xd052f1(0x223)][0x2]||'001',pattern=/^[0-9]{3}$/;function _0x1728(){const _0x3c7201=['portfolio','abs','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20/\x20','change','performance','botID','sell','OnMaintenance','fee','timeout','./version.json','open','format','buys','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','success','error','getDate','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','get','exchanges','autoliquidity','substring','excluded','active','search','price','must\x20be\x20greater\x20than\x20minimum\x20amount','total','bot','%\x20(','orderstatus','fiat','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20|\x20exchange:\x20','Saving\x20configuration','ccxt','order','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','apply','coin','No\x20more\x20open\x20orders\x20-\x20','decrypt','\x20API\x20secret\x20is\x20invalid','Exchange','status','getTime','mkdirSync','sortBy','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','deleteHistoryAlerts','timeshift','\x20portfolio:</b>\x20\x0a\x0a','BTC','Transaction\x20detection\x20blocked','limit-high','replace','write','<b>','loadMarkets','stringify','uncaughtException','recreateCoinResults()','bot-','Avoiding\x20continuous\x20order\x20attempts','143AeAlDK','currency','ORDERS.LOCKED','message','ordertype','191295yfYfXU','0\x20-\x20EXECUTION:\x20','starting-balances','timestamp','breakeven','/USD','2\x20-\x20Orders\x20unlocked','BNB/','function','sha256','defaults','NetworkError','send','showConfig','secure','exec','getSeconds','warning','argv','number','filled','getStartingBalances','final','Net\x20','RateLimitExceeded','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','progress','emitHistory','findIndex','exchange','existsSync','EUR','emojibuy','Order\x20amount\x20is\x20invalid:\x20','watchOrders','valid','Market','-performance.json','getPortfolio(1)','storeHeadless','canceled','version','\x20order:\x20','\x20|\x20Custom\x20ID:\x20','getMonth','getCoinNumber()','2\x20-\x20Validate\x20orders:\x20','balances','Limit\x20(low-margin)','distribution','customId','orderId','logs','getCoins()','initial','\x20not\x20responding','getPortfolio','ongoing','API-key\x20format\x20invalid','Waited\x20','netoffset','1334679ctbaox','recent20','3554703ROnBbR','DDoSProtection','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','.json','filter','yyyy/MM/dd','milliseconds','Unfilled\x20order(s)\x20canceled\x20after\x20','entries','highest','amount','yargs/yargs','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Order(s)\x20not\x20validated\x20after\x20','usd','realized','apiSecret','BUSD','round','Error\x20details:','restart','fetchClosedOrders','fetchTickers()','cancelOrder','Transaction\x20detection\x20unblocked','LOCKED','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','join','apiKey','getFullYear','\x20|\x20highest\x20fee:\x20','ExchangeError','yyyy-MM-dd\x27T\x27HH:mm:ss','net-basecoin','balancing\x20resumes\x20when\x20cooldown\x20ends','freeze','last','has','password','added','Invalid\x20API\x20key\x20or\x20secret\x20entered','max','Executing\x20exchange\x20reload','ORDERS.UNLOCKED','cancelLoading','2\x20-\x20Handled\x20open\x20orders','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','event-history','length','emojisell','Net\x20effect','cooldown','1034176FIDwyl','lowdb/adapters/FileSync','\x20not\x20available','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','event','USDT','configuration','4517814aftRhN',',\x20must\x20be\x20a\x203\x20digit\x20number','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','UNLOCKING','placeOrder','InvalidNonce','Resetting\x20coin\x20results:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','find','changes','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20|\x20lock\x20orders:\x20','none','***',':\x20Bot\x20','value','\x20minutes\x20-\x20','openOrders','basecoinvalue','Exception\x20thrown\x20in\x20','test','remainingSymbols','\x20-\x20pausing\x20bot\x20for\x20','running','createOrder','/EUR','constructor','red_yellow_blue','BNB','Error:\x20Invalid\x20argument\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','fetchOpenOrders','Loading\x20completed','initclient','-config.json','exchange\x20reloaded','Huobipro','Cryptocom','lowdb','time','\x20|\x20','indexOf','closed','botname','bb-settings.json','starting-balance-','amountToPrecision','colorscheme','<b>Bot\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','cancel','/output-000.log','removed','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','settings','date','floor','startnumber','market','bots','string','Cooldown\x20ended\x20-\x20balancing\x20resumed','eur','leftTxt','side','./logs/','./config/','no\x20open\x20orders','2.3.5','Pausing\x20for\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','change24h','Limit\x20(high-margin)','<pre>','full','exchange\x20not\x20reloaded','delta','log','privateKey','assign','parseISO','bb-secure.json','fromCodePoint','startdate','fees','ticker','2\x20-\x20handling\x20FILLED\x20order:\x20','Binance','pro','Cex','ETH','average','UNLOCKED','type','hybrid-crypto-js','USD','includes','recreate','Portfolio\x20change\x20detected:\x20','loadSymbols()','min','forEach','random','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','1\x20-\x20FILLED\x20known\x20order:\x20','sendMetricsTelegram','initTickers()','map','(((.+)+)+)+$','percentage','args','4JYaaIz','parse','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','net-fiat','padStart','MIN_NOTIONAL','USDC','placeOrder()','configuration-stored','watchTransactions()','Crypt','slice','target','fetchBalance','Reset\x20|\x20','</pre>','coins','************','split','headless','cancelOrders()','remove','threshold','-events.json','onepagemode','coin-loading-progress','cost','datetime','getMinutes','USDP','PermissionDenied','balancing\x20resumed','Invalid\x20quantity','symbol','watchTrades','/backup/','push',':\x20timer\x20>','TUSD','\x20>\x20[DEBUG]\x20','\x20:\x20','getHours','writeFile','recovery','10wuxVxD','\x20has\x20a\x2024h\x20drop\x20of\x20','Error\x20while\x20deleting\x20files:\x20','toFixed','toString','unlinkSync','concat','storeFiat','rightTxt','Manual\x20balancing\x20required','isEqual','Bybit','Executed\x20','AuthenticationError','liquidity','path','Huobi','spot','\x20metrics:</b>\x20\x0a\x0a','showname','1\x20-\x20Validate\x20orders:\x20','buy','createWriteStream','ORDERS.UNLOCKING','1\x20-\x20Handle\x20open\x20orders','Unknown\x20error\x20occured','limits','keys','ask','basecoin','sort','2.6.0','offset','\x20value','bid','-results.json','toLowerCase','Bitget','4043856Tsfwto','page','reverse','debug','trade','splice','storeConfiguration','Failed\x20to\x20load\x20coin\x20data\x20for\x20','fetchTicker','stopExchange()','\x20>\x20','fetchTickers','-------------------------------\x0a','apiPassword','watchTrades()','data','3754ehUnRS','getPortfolio(0)','cloneDeep','set','startprice'];_0x1728=function(){return _0x3c7201;};return _0x1728();}!pattern[_0xd052f1(0x107)](botID)&&(console[_0xd052f1(0x140)](_0xd052f1(0x110)+botID+_0xd052f1(0x28c)),killBot());const userID=process[_0xd052f1(0x223)][0x3]||'',configpath=userID?_0xd052f1(0x135)+userID+'/':_0xd052f1(0x135),logspath=userID?'./logs/'+userID+'/':_0xd052f1(0x134),loggerfile=fs[_0xd052f1(0x1a4)](logspath+_0xd052f1(0x126),{'flags':'a'});!fs[_0xd052f1(0x22f)](configpath)&&fs[_0xd052f1(0x1fa)](configpath);!fs[_0xd052f1(0x22f)](logspath)&&fs[_0xd052f1(0x1fa)](logspath);const configfile=configpath+'bot-'+botID+_0xd052f1(0x115),logfile=configpath+_0xd052f1(0x20a)+botID+_0xd052f1(0x179),performancefile=configpath+'bot-'+botID+_0xd052f1(0x236),coinresultsfile=configpath+_0xd052f1(0x20a)+botID+_0xd052f1(0x1b1),settingsfile=configpath+_0xd052f1(0x11f),securefile=configpath+_0xd052f1(0x144),configbackuppath=configpath+_0xd052f1(0x185),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xd052f1(0x21b)]({'logs':[],'version':serverversion})[_0xd052f1(0x204)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xd052f1(0x21b)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xd052f1(0x21b)]({'bot':[],'version':serverversion})[_0xd052f1(0x204)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xd052f1(0x21b)]({'coins':[],'version':serverversion})[_0xd052f1(0x204)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xd052f1(0x21a),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3a9cc0=>{const _0x2b381e=_0xd052f1;console[_0x2b381e(0x140)](_0x3a9cc0);},'simple':_0x2381c0=>{const _0x21e970=_0xd052f1;console[_0x21e970(0x140)](_0x2381c0),loggerfile[_0x21e970(0x204)](util['format'](_0x2381c0)+'\x0a');},'full':async(_0x19ec54,_0x713fed='')=>{const _0x5e061d=_0xd052f1;let _0x468ccc;if(config[_0x5e061d(0x1a1)])_0x468ccc=getTimeStamp()+':\x20'+config[_0x5e061d(0x11e)]+'\x20>\x20'+_0x19ec54;else _0x468ccc=getTimeStamp()+_0x5e061d(0x29a)+botID+_0x5e061d(0x1be)+_0x19ec54;console[_0x5e061d(0x140)](_0x468ccc),loggerfile[_0x5e061d(0x204)](util['format'](_0x468ccc)+'\x0a'),_0x713fed&&(console[_0x5e061d(0x140)](_0x713fed),loggerfile[_0x5e061d(0x204)](util['format'](_0x713fed)+'\x0a'));},'debug':async(_0x4cff05,_0x332e32='')=>{const _0x5df1a1=_0xd052f1;let _0x550453;if(config[_0x5df1a1(0x1a1)])_0x550453=getTimeStamp()+':\x20'+config[_0x5df1a1(0x11e)]+'\x20>\x20[DEBUG]\x20'+_0x4cff05;else _0x550453=getTimeStamp()+_0x5df1a1(0x29a)+botID+_0x5df1a1(0x189)+_0x4cff05;if(debugging)console[_0x5df1a1(0x140)](_0x550453);loggerfile[_0x5df1a1(0x204)](util[_0x5df1a1(0x1d6)](_0x550453)+'\x0a');if(_0x332e32){if(debugging)console['log'](_0x332e32);loggerfile[_0x5df1a1(0x204)](util[_0x5df1a1(0x1d6)](_0x332e32)+'\x0a');}}};function _0x2bde(_0x2a7496,_0x549938){const _0x445ddb=_0x1728();return _0x2bde=function(_0x29ea4f,_0x19873e){_0x29ea4f=_0x29ea4f-0x106;let _0x172854=_0x445ddb[_0x29ea4f];return _0x172854;},_0x2bde(_0x2a7496,_0x549938);}process['on'](_0xd052f1(0x208),function(_0x506d7f){const _0x2f7c8b=_0xd052f1;logHistory(_0x2f7c8b(0x1da),_0x2f7c8b(0x124)),logger[_0x2f7c8b(0x1b7)]('Uncaught\x20Exception:',_0x506d7f);});settings[_0xd052f1(0x1fe)]!=config[_0xd052f1(0x1fe)]&&updateTimeshift(settings[_0xd052f1(0x1fe)]);settings[_0xd052f1(0x17a)]!=config[_0xd052f1(0x17a)]&&updateOnepagemode(settings['onepagemode']);process['send']({'started':_0xd052f1(0x10a)},_0x4da601=>{}),initializeProcessListeners();function proxyEmit(_0x4c3efb,_0x19150e=null){process['send']({'function':_0x4c3efb,'args':_0x19150e},_0x162df8=>{});}function initializeProcessListeners(){const _0x2d2bff=_0xd052f1;process['on'](_0x2d2bff(0x20f),_0x1644c6=>{const _0x4f74dd=_0x2d2bff;switch(Object[_0x4f74dd(0x1a9)](_0x1644c6)[0x0]){case _0x4f74dd(0x1fe):_0x1644c6[_0x4f74dd(0x1fe)]!=undefined&&(settings[_0x4f74dd(0x1fe)]=_0x1644c6[_0x4f74dd(0x1fe)],updateTimeshift(settings[_0x4f74dd(0x1fe)]));break;case _0x4f74dd(0x17a):_0x1644c6[_0x4f74dd(0x17a)]!=undefined&&(settings[_0x4f74dd(0x17a)]=_0x1644c6[_0x4f74dd(0x17a)],updateOnepagemode(settings['onepagemode']));break;case _0x4f74dd(0x12e):_0x1644c6[_0x4f74dd(0x12e)]!=undefined&&(bots=JSON[_0x4f74dd(0x163)](_0x1644c6[_0x4f74dd(0x12e)]),proxyEmit(_0x4f74dd(0x12e),bots));break;case'function':switch(_0x1644c6[_0x4f74dd(0x219)]){case _0x4f74dd(0x114):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x4f74dd(0x22c):emitHistory(_0x1644c6['args']);break;case _0x4f74dd(0x1fd):deleteHistoryAlerts(_0x1644c6[_0x4f74dd(0x161)]);break;case _0x4f74dd(0x249):getPortfolio(_0x1644c6[_0x4f74dd(0x161)]);break;case _0x4f74dd(0x1ba):storeConfiguration(_0x1644c6['args']);break;case _0x4f74dd(0x238):storeHeadless(_0x1644c6['args']);break;case _0x4f74dd(0x195):storeFiat(_0x1644c6[_0x4f74dd(0x161)]);break;case'resetHistory':resetHistory();break;case _0x4f74dd(0x226):getStartingBalances(getNormalizedPerformance());break;case _0x4f74dd(0x28f):placeOrder(_0x1644c6['args']);break;case _0x4f74dd(0x27c):cancelLoading();break;case _0x4f74dd(0x21e):showConfig();break;case _0x4f74dd(0x15c):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x4e14af=![]){const _0x5b0a69=_0xd052f1;logger[_0x5b0a69(0x1b7)](_0x5b0a69(0x170)+(_0x4e14af?_0x5b0a69(0x116):_0x5b0a69(0x13e))+_0x5b0a69(0x1ed)+config[_0x5b0a69(0x22e)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4e14af)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5b0a69(0x26c)]!=''&&config[_0x5b0a69(0x26c)]!=_0x5b0a69(0x299)){loadingProgress=0x0;if(_0x4e14af){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x57290a){handleErrorNoStop(_0x57290a,_0x5b0a69(0x156));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x59e9b9=await getCoins();[currentCoins,currentCoinsAll]=_0x59e9b9,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x5b0a69(0x1b7)](_0x5b0a69(0x113)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5b0a69(0x280)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1159fe=_0xd052f1;exchangeStopped=!![];try{await exchange['close']();}catch(_0x10b430){await handleError(_0x10b430,_0x1159fe(0x1bd));}}async function reloadExchange(){const _0x436a6c=_0xd052f1;while(lockOrders!=ORDERS[_0x436a6c(0x14f)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x436a6c(0x1b7)](_0x436a6c(0x27a)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x18d8a8=config['exchange'],_0xc9ecc8=config[_0xd052f1(0x26c)],_0x45b2a2=config[_0xd052f1(0x260)],_0xa6ae3b=config[_0xd052f1(0x1c1)]){const _0x4563c0=_0xd052f1;exchange&&await stopExchange();!supportedExchanges()[_0x4563c0(0x153)](_0x18d8a8)&&(logHistory(_0x4563c0(0x1da),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x18d8a8+'\x20exchange'),killBot());const _0x13044f=ccxt['pro'][_0x18d8a8[_0x4563c0(0x1b2)]()];exchange=new _0x13044f({'apiKey':_0xc9ecc8,'secret':_0x45b2a2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4563c0(0x19f)}});if(_0xa6ae3b)exchange['password']=_0xa6ae3b;}function setStableCoins(){const _0x46ce00=_0xd052f1;let _0x5f11c9=config['basecoin']==_0x46ce00(0x14d)?_0x46ce00(0x14d):'BTC',_0x3a2075=!allSymbols[_0x46ce00(0x153)](_0x5f11c9+_0x46ce00(0x216))?_0x46ce00(0x289):'USD',_0x241756=!allSymbols[_0x46ce00(0x153)](_0x5f11c9+_0x46ce00(0x10c))?_0x3a2075:'EUR';stablecoins={'eur':{'coin':''+_0x5f11c9+_0x241756,'symbol':_0x5f11c9+'/'+_0x241756},'usd':{'coin':''+_0x5f11c9+_0x3a2075,'symbol':_0x5f11c9+'/'+_0x3a2075}};}async function initwsCcxt(){const _0x15cdc8=_0xd052f1;initCycle++;const _0x52a9ae=initCycle;let _0x5a2ae9=[];config[_0x15cdc8(0x1c9)][_0x15cdc8(0x158)](_0x3af617=>{const _0x365043=_0x15cdc8;if(!_0x3af617['excluded']&&_0x3af617[_0x365043(0x1f3)]!=config['basecoin'])_0x5a2ae9['push'](_0x3af617[_0x365043(0x183)]);});if(!_0x5a2ae9['includes'](stablecoins['eur'][_0x15cdc8(0x183)]))_0x5a2ae9[_0x15cdc8(0x186)](stablecoins[_0x15cdc8(0x131)][_0x15cdc8(0x183)]);if(!_0x5a2ae9['includes'](stablecoins[_0x15cdc8(0x25e)]['symbol']))_0x5a2ae9['push'](stablecoins['usd'][_0x15cdc8(0x183)]);if(config[_0x15cdc8(0x22e)]['startsWith']('Binance')){if(!_0x5a2ae9[_0x15cdc8(0x153)](_0x15cdc8(0x218)+config['basecoin']))_0x5a2ae9['push'](_0x15cdc8(0x218)+config['basecoin']);}loadCoins(_0x5a2ae9),_0x5a2ae9=validateSymbols(_0x5a2ae9);const _0x2b19e5=async _0x33d657=>{const _0x2ba16f=_0x15cdc8;let _0x154406;try{const _0x45705c=await getTickers(_0x33d657);Object[_0x2ba16f(0x258)](_0x45705c)[_0x2ba16f(0x158)](_0x6b1870=>{const _0x3d6d8=_0x2ba16f;_0x154406=_0x6b1870[0x1][_0x3d6d8(0x183)],global[_0x3d6d8(0x148)][noslash(_0x154406)]=_0x6b1870[0x1]['last'],global[_0x3d6d8(0x1cd)][_0x154406]=_0x6b1870[0x1]['percentage'];});}catch(_0x56e4e0){await handleError(_0x56e4e0,_0x2ba16f(0x15d),_0x154406);}},_0x1bc768=async _0x22e25e=>{const _0x51625a=_0x15cdc8;while(initCycle==_0x52a9ae){if(!botPaused)try{const _0x525933=await exchange[_0x51625a(0x184)](_0x22e25e);global[_0x51625a(0x148)][noslash(_0x525933[0x0][_0x51625a(0x183)])]=_0x525933[0x0][_0x51625a(0x1e4)],await sleep(0x3e8);}catch(_0x4999fb){if(!exchangeStopped)await handleError(_0x4999fb,_0x51625a(0x1c2),_0x22e25e);}else await sleep(0x64);}},_0x18bf5c=async _0x16da54=>{const _0xce7777=_0x15cdc8;while(initCycle==_0x52a9ae){if(!botPaused){let _0x4c4c50;try{await sleep(0x3c*0x3e8);const _0x534efd=await getTickers(_0x16da54);Object[_0xce7777(0x258)](_0x534efd)['forEach'](_0x48ac02=>{const _0x3d4f0a=_0xce7777;_0x4c4c50=_0x48ac02[0x1][_0x3d4f0a(0x183)],global[_0x3d4f0a(0x1cd)][_0x4c4c50]=_0x48ac02[0x1][_0x3d4f0a(0x160)];});}catch(_0x558738){if(!exchangeStopped)await handleError(_0x558738,_0xce7777(0x266),_0x4c4c50);}}else await sleep(0x64);}},_0x3ba62a=async _0x22455a=>{const _0x20053e=_0x15cdc8;while(initCycle==_0x52a9ae){if(!botPaused)try{const _0x5b2f44=await exchange[_0x20053e(0x233)](_0x22455a);initCycle==_0x52a9ae&&_0x5b2f44['forEach'](_0x5be345=>{updateNumberCoinsCcxt(_0x5be345);});}catch(_0x2cf315){if(!exchangeStopped)await handleError(_0x2cf315,'watchOrders()');}else await sleep(0x64);}};_0x2b19e5(_0x5a2ae9),_0x18bf5c(_0x5a2ae9),_0x5a2ae9[_0x15cdc8(0x158)](_0x549abe=>{_0x1bc768(_0x549abe),_0x3ba62a(_0x549abe);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x55972f){const _0x1db47f=_0xd052f1;let _0x318b48={};try{if(config[_0x1db47f(0x22e)]!=_0x1db47f(0x118))_0x318b48=await exchange[_0x1db47f(0x1bf)](_0x55972f);else for(const _0x4e904e of _0x55972f){const _0x362549=await exchange[_0x1db47f(0x1bc)](_0x4e904e);_0x318b48[_0x4e904e]=_0x362549;}return _0x318b48;}catch(_0x5da274){throw _0x5da274;}}async function watchTransactions(){const _0x2c1425=_0xd052f1;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3888f2=await getCoins(),[_0x211228,_0x204236]=_0x3888f2;let _0x160fee=[];currentCoins[_0x2c1425(0x158)](_0x2637dc=>{const _0xfde711=_0x2c1425,_0x4e1a75=_0x211228['find'](_0x178240=>_0x178240[_0xfde711(0x1f3)]==_0x2637dc[_0xfde711(0x1f3)]);if(_0x4e1a75){if(_0x2637dc[_0xfde711(0x224)]!=_0x4e1a75[_0xfde711(0x224)]){let _0x454424;if(_0x2637dc[_0xfde711(0x1f3)]!=config[_0xfde711(0x1ab)]){const _0xc85c21=global[_0xfde711(0x148)][noslash(_0x2637dc[_0xfde711(0x183)])];_0x454424=_0x2637dc[_0xfde711(0x1b6)]?0x1/_0xc85c21:_0xc85c21;}else _0x454424=0x1;_0x160fee[_0xfde711(0x186)]({'coin':_0x2637dc['coin'],'symbol':_0x2637dc[_0xfde711(0x183)],'price':_0x454424,'number':Number(formatResult(_0x4e1a75[_0xfde711(0x224)]-_0x2637dc[_0xfde711(0x224)],0x8)),'basecoinvalue':_0x454424*(_0x4e1a75[_0xfde711(0x224)]-_0x2637dc[_0xfde711(0x224)])});}}});if(_0x160fee['length']==0x1&&!blockTransactionDetection){if(config[_0x2c1425(0x1df)]){logger[_0x2c1425(0x1b7)](_0x2c1425(0x287)+_0x160fee[0x0][_0x2c1425(0x29e)]+_0x2c1425(0x26e)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x2c1425(0x1ca)](_0x160fee[0x0][_0x2c1425(0x29e)])>lastFees[_0x2c1425(0x259)]){delete _0x160fee[0x0]['symbol'],delete _0x160fee[0x0][_0x2c1425(0x29e)];let _0x24c1f2=[],_0x498d67=[...config[_0x2c1425(0x19c)]]||[],_0x5294a3=config['liquidity'];_0x498d67[_0x2c1425(0x1ac)]((_0x357ead,_0x319baa)=>_0x357ead[_0x2c1425(0x12a)]>_0x319baa[_0x2c1425(0x12a)]?-0x1:_0x319baa[_0x2c1425(0x12a)]>_0x357ead['date']?0x1:0x0);const _0x35b326=getDate();if(_0x498d67[0x0]){const _0x3ffd44=fns[_0x2c1425(0x163)](_0x498d67[0x0][_0x2c1425(0x12a)],_0x2c1425(0x255),new Date()),_0x10108f=fns['parse'](_0x35b326,'yyyy/MM/dd',new Date());if(fns[_0x2c1425(0x198)](_0x3ffd44,_0x10108f)){_0x24c1f2=_0x498d67[0x0][_0x2c1425(0x294)];const _0x1feaed=_0x24c1f2[_0x2c1425(0x293)](_0x52db44=>_0x52db44['coin']==_0x160fee[0x0]['coin']);_0x1feaed?(_0x1feaed[_0x2c1425(0x224)]+=_0x160fee[0x0][_0x2c1425(0x224)],_0x1feaed[_0x2c1425(0x224)]==0x0&&(_0x24c1f2=_0x24c1f2[_0x2c1425(0x254)](_0x3e62b5=>{const _0x3649a9=_0x2c1425;return _0x3e62b5[_0x3649a9(0x1f3)]!=_0x160fee[0x0][_0x3649a9(0x1f3)];}))):_0x24c1f2[_0x2c1425(0x186)](_0x160fee[0x0]);const _0x371925=_0x5294a3[_0x2c1425(0x293)](_0x2b532b=>_0x2b532b['date']==_0x35b326);_0x371925[_0x2c1425(0x294)]=_0x24c1f2;}else _0x5294a3[_0x2c1425(0x186)]({'date':_0x35b326,'changes':[_0x160fee[0x0]]});}const _0x317e2f=_0x5294a3[_0x2c1425(0x293)](_0x5b449c=>_0x5b449c[_0x2c1425(0x12a)]==_0x35b326);if(_0x317e2f){let _0x2749c4=!![];_0x317e2f[_0x2c1425(0x294)]['forEach'](_0x4ed1ce=>{const _0x1a3d47=_0x2c1425;if(_0x4ed1ce[_0x1a3d47(0x224)]!=0x0)_0x2749c4=![];}),_0x2749c4&&(_0x5294a3=_0x5294a3[_0x2c1425(0x254)](_0x1df925=>{const _0x3e856c=_0x2c1425;return _0x1df925[_0x3e856c(0x12a)]!=_0x35b326;}));}let _0x4141ec=dbConfig[_0x2c1425(0x1dd)](_0x2c1425(0x1e7))[_0x2c1425(0x293)]({'botID':botID})['value']();_0x4141ec&&(dbConfig['get']('bot')[_0x2c1425(0x293)]({'botID':botID})[_0x2c1425(0x142)]({'liquidity':_0x5294a3})[_0x2c1425(0x204)](),config['liquidity']=_0x5294a3),logHistory(_0x2c1425(0x1d9),_0x2c1425(0x155)+Math[_0x2c1425(0x1ca)](_0x160fee[0x0]['number'])+'\x20'+_0x160fee[0x0][_0x2c1425(0x1f3)]+'\x20'+(_0x160fee[0x0]['number']>0x0?_0x2c1425(0x277):_0x2c1425(0x127))+_0x2c1425(0x1d8)),proxyEmit(_0x2c1425(0x28a),emittedConfiguration());}else logger[_0x2c1425(0x1b7)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x2c1425(0x1ca)](_0x160fee[0x0][_0x2c1425(0x224)])+'\x20'+_0x160fee[0x0]['coin']+'\x20'+(_0x160fee[0x0][_0x2c1425(0x224)]>0x0?_0x2c1425(0x277):_0x2c1425(0x127)));transactionDetected=!![];}else logger[_0x2c1425(0x1b7)](_0x2c1425(0x155)+Math[_0x2c1425(0x1ca)](_0x160fee[0x0][_0x2c1425(0x224)])+'\x20'+_0x160fee[0x0][_0x2c1425(0x1f3)]+'\x20'+(_0x160fee[0x0][_0x2c1425(0x224)]>0x0?_0x2c1425(0x277):_0x2c1425(0x127))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x211228,currentCoinsAll=_0x204236,await sleep(watchTransactionsInterval);}catch(_0x13cd92){if(!exchangeStopped)await handleError(_0x13cd92,_0x2c1425(0x16b));}else await sleep(0x64);}}async function loadSymbols(){try{markets=await exchange['loadMarkets'](),allSymbols=[],Object['entries'](markets)['forEach'](_0x39fc59=>{const _0x4d3754=_0x2bde;_0x39fc59[0x1][_0x4d3754(0x1e2)]&&_0x39fc59[0x1][_0x4d3754(0x19f)]&&allSymbols[_0x4d3754(0x186)](_0x39fc59[0x0]);});}catch(_0x112879){throw _0x112879;}}function validateSymbols(_0x44e582){const _0x5de67e=_0xd052f1;let _0x4156fc=[];return _0x44e582[_0x5de67e(0x158)](_0x40b93b=>{const _0x5d846e=_0x5de67e;!allSymbols[_0x5d846e(0x153)](_0x40b93b)?logHistory(_0x5d846e(0x1da),'Invalid\x20symbol:\x20'+_0x40b93b+_0x5d846e(0x128)):_0x4156fc[_0x5d846e(0x186)](_0x40b93b);}),_0x4156fc;}async function initclient(){const _0x5464e1=_0xd052f1;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5464e1(0x1de),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5464e1(0x240),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xef6c2b=getNormalizedPerformance();emitPerformance(_0xef6c2b),getStartingBalances(_0xef6c2b);}async function toggleBotMode(){const _0x23bfbc=_0xd052f1;let _0x449d7d=dbConfig['get']('bot')[_0x23bfbc(0x293)]({'botID':botID})['value']();if(_0x449d7d){const _0x23efac=!_0x449d7d[_0x23bfbc(0x175)];dbConfig[_0x23bfbc(0x1dd)](_0x23bfbc(0x1e7))[_0x23bfbc(0x293)]({'botID':botID})[_0x23bfbc(0x142)]({'headless':_0x23efac})[_0x23bfbc(0x204)](),config[_0x23bfbc(0x175)]=_0x23efac,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x29281c=_0xd052f1;process[_0x29281c(0x21d)]({'updatebotmanager':!![]},_0x54acaf=>{}),logger[_0x29281c(0x1b7)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x5e7ce9){const _0x5ba415=_0xd052f1;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1460e5,_0x47ae07=0x0,_0x1d47cf=0x0;_0x5e7ce9[_0x5ba415(0x158)](_0x1a84d8=>{const _0x169887=_0x5ba415;loading['remainingSymbols'][_0x169887(0x186)](_0x1a84d8);}),loadingCanceled=![];let _0x10f4d3=![];while(_0x1460e5!=_0x5e7ce9[_0x5ba415(0x280)]+maxLoadingProgress){_0x1460e5=loadingProgress,_0x5e7ce9['forEach'](_0x26b61f=>{const _0x5a07e=_0x5ba415;if(global[_0x5a07e(0x148)][noslash(_0x26b61f)]){loading[_0x5a07e(0x108)]=loading['remainingSymbols'][_0x5a07e(0x254)](_0x5602d8=>_0x5602d8!=_0x26b61f);if(!watchedSymbols[_0x5a07e(0x153)](_0x26b61f))watchedSymbols[_0x5a07e(0x186)](_0x26b61f);_0x1460e5++;}}),loading['progress']=Math[_0x5ba415(0x262)](_0x1460e5/(_0x5e7ce9[_0x5ba415(0x280)]+maxLoadingProgress)*0x64);loading[_0x5ba415(0x22b)]!=0x64&&(_0x1d47cf>0x1e*0x5&&(loading[_0x5ba415(0x1d3)]=!![],emitLoadingProgress()),_0x1d47cf>0x78*0x5&&!_0x10f4d3&&(_0x10f4d3=!![],logHistory(_0x5ba415(0x1da),_0x5ba415(0x1bb)+loading[_0x5ba415(0x108)][_0x5ba415(0x26b)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x5ba415(0x1da),_0x5ba415(0x138)+loadCoinsRetryInterval/0xea60+_0x5ba415(0x1f1)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x2fbadf=_0x5ba415;process[_0x2fbadf(0x21d)]({'stop':_0x2fbadf(0x264)},_0x3eba87=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5ba415(0x125)]=!![],emitLoadingProgress();break;}else _0x47ae07!=loading[_0x5ba415(0x22b)]&&(_0x47ae07=loading[_0x5ba415(0x22b)],emitLoadingProgress()),_0x1d47cf++,await sleep(0xc8);}_0x1460e5==_0x5e7ce9['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x5ba415(0x10a)},_0xbfc3d7=>{}),_0x10f4d3&&logHistory(_0x5ba415(0x1d9),_0x5ba415(0x252)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4d9f51=_0xd052f1;proxyEmit(_0x4d9f51(0x28a),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x58cab8=_0xd052f1;proxyEmit(_0x58cab8(0x17b),loading);}async function getFiat(){const _0x4aa941=_0xd052f1;let _0x248fb3=global[_0x4aa941(0x148)][stablecoins[_0x4aa941(0x131)][_0x4aa941(0x1f3)]],_0x400e2f=global[_0x4aa941(0x148)][stablecoins['usd'][_0x4aa941(0x1f3)]];return{'eur':Number(_0x248fb3),'usd':Number(_0x400e2f)};}function capitalize(_0x23bcf0){const _0x13e5f5=_0xd052f1;return _0x23bcf0['substring'](0x0,0x1)['toUpperCase']()+_0x23bcf0[_0x13e5f5(0x1e0)](0x1);}function supportedExchanges(){const _0x34d144=_0xd052f1,_0x33654c=['ws','fetchTickers',_0x34d144(0x1bc),'watchTrades',_0x34d144(0x233),_0x34d144(0x267),_0x34d144(0x10b),_0x34d144(0x112),_0x34d144(0x265),_0x34d144(0x16f)];let _0x46816d=[],_0x581524=[],_0x57087a=ccxt['pro'][_0x34d144(0x1de)];_0x57087a[_0x34d144(0x158)](_0x34e673=>{const _0x1b4051=_0x34d144;try{const _0x168bee=new ccxt['pro'][_0x34e673]();_0x581524[_0x1b4051(0x186)](_0x168bee);}catch(_0x493cfc){}}),_0x581524[_0x34d144(0x158)](_0x127c16=>{const _0xd66af5=_0x34d144;let _0x5cc0c9=0x0;_0x33654c[_0xd66af5(0x158)](_0x59c0a6=>{const _0x571d72=_0xd66af5;_0x59c0a6 in _0x127c16[_0x571d72(0x275)]&&_0x127c16[_0x571d72(0x275)][_0x59c0a6]&&_0x5cc0c9++;}),_0x5cc0c9==_0x33654c[_0xd66af5(0x280)]&&_0x46816d[_0xd66af5(0x186)](capitalize(_0x127c16['id']));});let _0x51e8ba=[];return _0x57087a['forEach'](_0x57f996=>{const _0x44c338=_0x34d144;_0x57f996=capitalize(_0x57f996);if(!_0x46816d[_0x44c338(0x153)](_0x57f996))_0x51e8ba[_0x44c338(0x186)](_0x57f996);}),_0x46816d;}function setStartDatePerformance(){const _0x40565d=_0xd052f1;if(config&&config[_0x40565d(0x19c)][0x0]['changes'][_0x40565d(0x280)]!=0x0){const _0x2a25c8=config[_0x40565d(0x19c)][0x0]['changes'];dbPerformance[_0x40565d(0x1dd)](_0x40565d(0x1c3))[_0x40565d(0x293)]({'date':config['startdate']})['assign']({'coins':_0x2a25c8})[_0x40565d(0x204)]();}}async function recreateCoinResults(){const _0x4554f0=_0xd052f1;let _0x4ce71e,_0x3a971b=[];try{const _0x8396e8=fns[_0x4554f0(0x1d6)](fns[_0x4554f0(0x143)](config['startdate'][_0x4554f0(0x203)](/\//g,'-')),_0x4554f0(0x270));for(const _0x553076 of currentCoins){if(_0x553076[_0x4554f0(0x1f3)]!=config['basecoin']){let _0x3c08a7=0x0,_0x3ba681,_0x2321ae;_0x4ce71e=await getAllEventOrders(_0x553076['symbol']);if(_0x4ce71e[_0x4554f0(0x280)]>0x0)_0x4ce71e[_0x4554f0(0x158)](_0x28b167=>{const _0x38098c=_0x4554f0,_0x3c7653=_0x553076[_0x38098c(0x183)][_0x38098c(0x153)](config[_0x38098c(0x1ab)]+'/');_0x3a971b[_0x38098c(0x186)]({'datetime':_0x28b167[_0x38098c(0x17d)],'coin':_0x553076['coin'],'symbol':_0x553076[_0x38098c(0x183)],'side':_0x28b167[_0x38098c(0x133)],'reverse':_0x3c7653,'amount':formatResult(_0x28b167['filled'],0x8),'filled':formatResult(_0x28b167[_0x38098c(0x225)],0x8),'price':formatResult(_0x28b167[_0x38098c(0x1e4)],0x8)}),_0x3c08a7=_0x28b167[_0x38098c(0x133)]=='buy'?_0x3c08a7+_0x28b167[_0x38098c(0x225)]:_0x3c08a7-_0x28b167['filled'];if(!_0x2321ae)_0x2321ae=_0x28b167['price'];});_0x3ba681=_0x553076[_0x4554f0(0x224)]-_0x3c08a7;let _0x10dd00;config[_0x4554f0(0x19c)][_0x4554f0(0x158)](_0x29e7dd=>{const _0x50f1fb=_0x4554f0;!_0x10dd00&&(_0x10dd00=_0x29e7dd[_0x50f1fb(0x294)][_0x50f1fb(0x293)](_0x22d8fc=>_0x22d8fc[_0x50f1fb(0x1f3)]==_0x553076[_0x50f1fb(0x1f3)]),_0x10dd00&&(_0x3ba681=_0x10dd00[_0x50f1fb(0x224)],_0x2321ae=_0x10dd00['price']));});let _0x3f7044=dbCoinResults['get'](_0x4554f0(0x172))[_0x4554f0(0x293)]({'coin':_0x553076[_0x4554f0(0x1f3)]})['value']();_0x3f7044={'coin':_0x553076[_0x4554f0(0x1f3)],'number':_0x3ba681,'breakeven':_0x2321ae,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4554f0(0x1dd)](_0x4554f0(0x172))['find']({'coin':_0x553076[_0x4554f0(0x1f3)]})[_0x4554f0(0x142)](_0x3f7044)[_0x4554f0(0x204)]();}}_0x3a971b['sort']((_0x3b3c5f,_0x1f32c2)=>_0x3b3c5f[_0x4554f0(0x17d)]>_0x1f32c2[_0x4554f0(0x17d)]?0x1:_0x1f32c2[_0x4554f0(0x17d)]>_0x3b3c5f[_0x4554f0(0x17d)]?-0x1:0x0);let _0x1d8f52=0x0;for(let _0x5d4d9e of _0x3a971b){await updateCoinResults(_0x5d4d9e,!![]);}}catch(_0x41368c){await handleError(_0x41368c,_0x4554f0(0x209));}}async function getAllEventOrders(_0x54ecfe){const _0x259f6b=_0xd052f1;let _0x22e80f=[],_0x5eb031=dbLogs[_0x259f6b(0x1dd)]('logs')[_0x259f6b(0x254)](_0x8276de=>{const _0x571e0a=_0x259f6b,_0x25654c=_0x8276de['event']['toLowerCase']();return _0x25654c[_0x571e0a(0x153)](_0x54ecfe[_0x571e0a(0x1b2)]())&&(_0x25654c[_0x571e0a(0x153)]('market')&&_0x25654c['includes'](_0x571e0a(0x1f0))||_0x25654c[_0x571e0a(0x153)](_0x571e0a(0x225))&&_0x25654c[_0x571e0a(0x153)](_0x571e0a(0x1f0)));})[_0x259f6b(0x1fb)](_0x259f6b(0x11a))['value']();return _0x5eb031[_0x259f6b(0x158)](_0xbdf04a=>{const _0x452940=_0x259f6b,_0x507936=_0xbdf04a[_0x452940(0x288)][_0x452940(0x153)](_0x452940(0x1d0))?'sell':_0x452940(0x1a3),_0x377933=/#([0-9]|\.)+\s/i,_0x21a0ef=Number(_0x377933['exec'](_0xbdf04a['event'])[0x0][_0x452940(0x16d)](0x1)),_0x21d547=/@([0-9]|\.)+$/i,_0x110c1c=Number(_0x21d547[_0x452940(0x220)](_0xbdf04a[_0x452940(0x288)])[0x0]['slice'](0x1));_0x22e80f['push']({'datetime':_0xbdf04a[_0x452940(0x11a)],'coin':symbolToCoin(_0x54ecfe),'symbol':_0x54ecfe,'side':_0x507936,'amount':_0x21a0ef,'filled':_0x21a0ef,'price':_0x110c1c});}),_0x22e80f;}async function getAllOrders(_0x3304dd,_0x2a78d3){const _0x2cf672=_0xd052f1;let _0x500c95=[];while(_0x2a78d3<exchange[_0x2cf672(0x256)]()){const _0x3f5934=0x1f4;try{const _0x3e7ae2=await exchange['fetchClosedOrders'](_0x3304dd,_0x2a78d3,_0x3f5934);if(_0x3e7ae2[_0x2cf672(0x280)])_0x2a78d3=_0x3e7ae2[_0x3e7ae2['length']-0x1][_0x2cf672(0x214)]+0x1,_0x500c95=_0x500c95[_0x2cf672(0x194)](_0x3e7ae2);else break;}catch(_0x4a3316){await handleError(_0x4a3316,'getAllOrders()',_0x3304dd);}}return _0x500c95;}async function validate24hChanges(){const _0x41b481=_0xd052f1;for(const _0x11cad9 of currentCoins){if(_0x11cad9[_0x41b481(0x1f3)]!=config[_0x41b481(0x1ab)]){let _0x3c8c71;_0x11cad9[_0x41b481(0x1b6)]?_0x3c8c71=formatResult((0x1/(global[_0x41b481(0x1cd)][noslash(_0x11cad9['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x3c8c71=global[_0x41b481(0x1cd)][noslash(_0x11cad9[_0x41b481(0x183)])],_0x3c8c71<config[_0x41b481(0x13a)]&&(logHistory(_0x41b481(0x1da),_0x11cad9[_0x41b481(0x1f3)]+_0x41b481(0x18f)+_0x3c8c71+'%'),logHistory(_0x41b481(0x1da),_0x41b481(0x1ec)),logHistory(_0x41b481(0x1da),_0x41b481(0x28d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x27e6b0,_0xcde816){const _0x39ef61=_0xd052f1;if(!_0x27e6b0)return!![];const _0x36c69d=_0xcde816[_0x39ef61(0x174)]('.'),_0x423938=_0x27e6b0[_0x39ef61(0x174)]('.');for(var _0xa58cb0=0x0;_0xa58cb0<_0x423938[_0x39ef61(0x280)];_0xa58cb0++){const _0x2c7b0d=~~_0x423938[_0xa58cb0],_0x1e6afd=~~_0x36c69d[_0xa58cb0];if(_0x2c7b0d<_0x1e6afd)return!![];if(_0x2c7b0d>_0x1e6afd)return![];}return![];}async function oneTimeMigration(){const _0x73861d=_0xd052f1;let _0xcb73e=dbLogs[_0x73861d(0x1dd)](_0x73861d(0x23a))[_0x73861d(0x29b)]();if(isOlderVersion(_0xcb73e,'2.3.5')){let _0x440cf6=[];const _0x4d4046=dbLogs['get'](_0x73861d(0x245))[_0x73861d(0x29b)]();_0x4d4046[_0x73861d(0x158)](_0x1f675a=>{const _0x4bc9fb=_0x73861d;_0x440cf6[_0x4bc9fb(0x186)]({'time':_0x1f675a['time'],'type':_0x1f675a[_0x4bc9fb(0x150)],'event':_0x1f675a[_0x4bc9fb(0x288)]});}),dbLogs[_0x73861d(0x1dd)](_0x73861d(0x245))['assign'](_0x440cf6)[_0x73861d(0x204)]();}let _0x5d1344=dbConfig['get'](_0x73861d(0x23a))['value']();if(isOlderVersion(_0x5d1344,_0x73861d(0x137))){let _0x481532=dbConfig['get'](_0x73861d(0x1e7))[_0x73861d(0x293)]({'botID':botID})[_0x73861d(0x29b)]();if(_0x481532){let _0x9aa552=[];_0x481532[_0x73861d(0x1c9)][_0x73861d(0x158)](_0xf68e69=>{const _0xe62fbf=_0x73861d;_0x9aa552[_0xe62fbf(0x186)]({'coin':_0xf68e69['coin'],'number':_0xf68e69[_0xe62fbf(0x12c)],'price':_0xf68e69[_0xe62fbf(0x1c8)]}),delete _0xf68e69[_0xe62fbf(0x12c)],delete _0xf68e69[_0xe62fbf(0x1c8)];});if(_0x9aa552[_0x73861d(0x280)]!==0x0)fs[_0x73861d(0x18c)](configbackuppath+(_0x73861d(0x120)+botID+_0x73861d(0x253)),JSON['stringify'](_0x9aa552,null,0x4),function(_0x400d38){if(_0x400d38){}});const _0xe6cee6=(_0x2df566,_0xec00e9)=>{const _0x462421=_0x73861d;let _0x5f5971=[];_0xec00e9[_0x462421(0x158)](_0x2c4b45=>{const _0x46131e=_0x462421,_0x98213e=_0x2df566[_0x46131e(0x293)](_0x37c414=>_0x37c414[_0x46131e(0x1f3)]==_0x2c4b45[_0x46131e(0x1f3)]);if(!_0x98213e)_0x5f5971['push'](_0x2c4b45);});let _0x5147c8=[];return _0x2df566[_0x462421(0x158)](_0x53aa65=>{const _0x25de97=_0x462421,_0x431a6f=_0xec00e9[_0x25de97(0x293)](_0x4e37ff=>_0x4e37ff[_0x25de97(0x1f3)]==_0x53aa65['coin']);if(!_0x431a6f||_0x431a6f[_0x25de97(0x224)]==0x0&&_0x53aa65['number']!=0x0)_0x5147c8[_0x25de97(0x186)](_0x53aa65);}),{'missingDay1':_0x5f5971,'notInDay2':_0x5147c8};},_0x325bce=dbPerformance[_0x73861d(0x1dd)](_0x73861d(0x1c3))[_0x73861d(0x1c6)]()[_0x73861d(0x29b)]();if(_0x325bce[_0x73861d(0x280)]>0x1){const {missingDay1:_0x4b214e,notInDay2:_0x348b03}=_0xe6cee6(_0x9aa552,_0x325bce[0x1][_0x73861d(0x172)]);_0x9aa552=[..._0x9aa552,..._0x4b214e],_0x348b03['forEach'](_0x20ede1=>{const _0x4518a2=_0x73861d;let _0x1050dc=_0x9aa552[_0x4518a2(0x22d)](_0xe740a8=>_0xe740a8[_0x4518a2(0x1f3)]==_0x20ede1[_0x4518a2(0x1f3)]);_0x1050dc!=-0x1&&_0x9aa552[_0x4518a2(0x1b9)](_0x1050dc,0x1);});}_0x9aa552[_0x73861d(0x1ac)]((_0x208a4b,_0xd0998e)=>_0x208a4b[_0x73861d(0x1f3)]>_0xd0998e[_0x73861d(0x1f3)]?0x1:_0xd0998e[_0x73861d(0x1f3)]>_0x208a4b[_0x73861d(0x1f3)]?-0x1:0x0);let _0x4b330d=[{'date':_0x481532['startdate'],'changes':_0x9aa552}];_0x325bce[_0x73861d(0x280)]>0x2&&_0x325bce[_0x73861d(0x158)]((_0x1ea56c,_0x211979)=>{const _0x209168=_0x73861d;if(_0x211979>0x0&&_0x211979<_0x325bce['length']-0x1){const {missingDay1:_0x7c058a,notInDay2:_0x5e6b02}=_0xe6cee6(_0x325bce[_0x211979][_0x209168(0x172)],_0x325bce[_0x211979+0x1][_0x209168(0x172)]);_0x9aa552=[],(_0x7c058a[_0x209168(0x280)]!=0x0||_0x5e6b02[_0x209168(0x280)]!=0x0)&&(_0x7c058a[_0x209168(0x280)]!=0x0&&_0x9aa552[_0x209168(0x186)](..._0x7c058a),_0x5e6b02[_0x209168(0x280)]!=0x0&&(_0x5e6b02[_0x209168(0x158)](_0x2dd631=>{const _0x1f0a14=_0x209168;_0x2dd631[_0x1f0a14(0x224)]=-_0x2dd631[_0x1f0a14(0x224)];}),_0x9aa552[_0x209168(0x186)](..._0x5e6b02)),_0x9aa552[_0x209168(0x1ac)]((_0x37a2d7,_0x29d897)=>_0x37a2d7[_0x209168(0x1f3)]>_0x29d897[_0x209168(0x1f3)]?0x1:_0x29d897[_0x209168(0x1f3)]>_0x37a2d7[_0x209168(0x1f3)]?-0x1:0x0),_0x4b330d['push']({'date':_0x325bce[_0x211979+0x1][_0x209168(0x12a)],'changes':_0x9aa552}));}}),dbConfig[_0x73861d(0x1dd)]('bot')[_0x73861d(0x293)]({'botID':botID})[_0x73861d(0x142)]({..._0x481532,'liquidity':_0x4b330d})[_0x73861d(0x204)]();}}if(isOlderVersion(_0x5d1344,_0x73861d(0x1ad))){let _0x33ccbd=dbConfig[_0x73861d(0x1dd)](_0x73861d(0x1e7))['find']({'botID':botID})[_0x73861d(0x29b)]();if(_0x33ccbd){const _0xd1014a=_0x33ccbd['exchange'],_0x42ef58=_0xd1014a?capitalize(_0xd1014a):_0x73861d(0x14a);dbConfig[_0x73861d(0x1dd)](_0x73861d(0x1e7))[_0x73861d(0x293)]({'botID':botID})['assign']({'exchange':_0x42ef58})[_0x73861d(0x204)]();}}let _0x12f568=dbPerformance['get'](_0x73861d(0x23a))['value']();isOlderVersion(_0x12f568,_0x73861d(0x137))&&setStartDatePerformance();let _0x122bdc=dbCoinResults[_0x73861d(0x1dd)]('version')[_0x73861d(0x29b)]();if(isOlderVersion(_0x122bdc,'2.5.0')){let _0x40b014=dbCoinResults[_0x73861d(0x1dd)](_0x73861d(0x172))[_0x73861d(0x29b)]();if(_0x40b014[_0x73861d(0x280)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x28cfeb=_0xd052f1;dbConfig['set'](_0x28cfeb(0x23a),serverversion)[_0x28cfeb(0x204)](),dbPerformance[_0x28cfeb(0x1c7)](_0x28cfeb(0x23a),serverversion)[_0x28cfeb(0x204)](),dbLogs[_0x28cfeb(0x1c7)](_0x28cfeb(0x23a),serverversion)[_0x28cfeb(0x204)](),dbCoinResults[_0x28cfeb(0x1c7)](_0x28cfeb(0x23a),serverversion)[_0x28cfeb(0x204)]();}function getConfiguration(_0x1dcc11){const _0x476144=_0xd052f1;let _0x3be160=dbConfig[_0x476144(0x1dd)](_0x476144(0x1e7))[_0x476144(0x293)]({'botID':_0x1dcc11})[_0x476144(0x29b)]();if(_0x3be160){let _0x45141f=![];typeof _0x3be160[_0x476144(0x178)]==_0x476144(0x12f)&&(_0x3be160={..._0x3be160,'threshold':Number(_0x3be160[_0x476144(0x178)])},_0x45141f=!![]),_0x3be160[_0x476144(0x13a)]==undefined&&(_0x3be160={..._0x3be160,'change24h':-0x14},_0x45141f=!![]),_0x3be160[_0x476144(0x1ea)]==undefined&&(_0x3be160={..._0x3be160,'fiat':_0x476144(0x152)},_0x45141f=!![]),_0x3be160[_0x476144(0x17a)]==undefined&&(_0x3be160={..._0x3be160,'onepagemode':settings[_0x476144(0x17a)]},_0x45141f=!![]),_0x3be160[_0x476144(0x122)]==undefined&&(_0x3be160={..._0x3be160,'colorscheme':_0x476144(0x10e)},_0x45141f=!![]),_0x3be160[_0x476144(0x1df)]==undefined&&(_0x3be160={..._0x3be160,'autoliquidity':!![]},_0x45141f=!![]),_0x45141f&&(_0x3be160={'botID':_0x3be160[_0x476144(0x1cf)],'exchange':_0x3be160['exchange'],'apiKey':_0x3be160[_0x476144(0x26c)],'apiSecret':_0x3be160[_0x476144(0x260)],'apiPassword':_0x3be160[_0x476144(0x1c1)],'basecoin':_0x3be160[_0x476144(0x1ab)],'botname':_0x3be160['botname'],'showname':_0x3be160['showname'],'threshold':_0x3be160['threshold'],'ordertype':_0x3be160[_0x476144(0x210)],'timeout':_0x3be160['timeout'],'fiat':_0x3be160[_0x476144(0x1ea)],'startdate':_0x3be160[_0x476144(0x146)],'recreate':_0x3be160[_0x476144(0x154)],'timeshift':_0x3be160['timeshift'],'onepagemode':_0x3be160[_0x476144(0x17a)],'headless':_0x3be160[_0x476144(0x175)],'cooldown':_0x3be160[_0x476144(0x283)],'change24h':_0x3be160[_0x476144(0x13a)],'emojibuy':_0x3be160[_0x476144(0x231)],'emojisell':_0x3be160[_0x476144(0x281)],'colorscheme':_0x3be160[_0x476144(0x122)],'portfolio':_0x3be160[_0x476144(0x1c9)],'autoliquidity':_0x3be160[_0x476144(0x1df)],'liquidity':_0x3be160[_0x476144(0x19c)],'openOrders':_0x3be160['openOrders']},dbConfig['get'](_0x476144(0x1e7))['remove']()[_0x476144(0x204)](),dbConfig[_0x476144(0x1dd)](_0x476144(0x1e7))[_0x476144(0x186)](_0x3be160)[_0x476144(0x204)]());}else _0x3be160={'botID':_0x1dcc11,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x1dcc11,'showname':![],'threshold':0x3,'ordertype':_0x476144(0x12d),'timeout':0x14,'fiat':_0x476144(0x152),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x476144(0x1fe)],'onepagemode':settings[_0x476144(0x17a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x476144(0x10e),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3be160;}function emittedConfiguration(){const _0x68ce5=_0xd052f1;let _0xd76ef9;if(config[_0x68ce5(0x26c)]=='')_0xd76ef9={...config,'configstate':_0x68ce5(0x247)};else config[_0x68ce5(0x26c)]=='***'?_0xd76ef9={...config,'configstate':_0x68ce5(0x18d)}:(_0xd76ef9={...config,'apiKey':_0x68ce5(0x173),'apiSecret':_0x68ce5(0x173)},config[_0x68ce5(0x1c1)]&&(_0xd76ef9['apiPassword']=_0x68ce5(0x173)));return _0xd76ef9;}function getSettings(){const _0x2c757=_0xd052f1;return dbSettings[_0x2c757(0x1dd)](_0x2c757(0x129))[_0x2c757(0x29b)]();}function getSecure(){const _0x31604b=_0xd052f1;return dbSecure[_0x31604b(0x1dd)](_0x31604b(0x21f))[_0x31604b(0x29b)]()||{};}function updateTimeshift(_0x15ea2f){const _0x5e8a6d=_0xd052f1;let _0x51be76=dbConfig[_0x5e8a6d(0x1dd)](_0x5e8a6d(0x1e7))[_0x5e8a6d(0x293)]({'botID':botID})['value']();_0x51be76&&dbConfig[_0x5e8a6d(0x1dd)](_0x5e8a6d(0x1e7))[_0x5e8a6d(0x293)]({'botID':botID})[_0x5e8a6d(0x142)]({'timeshift':_0x15ea2f})['write'](),config['timeshift']=_0x15ea2f,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x149e74){const _0x18f88e=_0xd052f1;let _0x4edd39=dbConfig[_0x18f88e(0x1dd)](_0x18f88e(0x1e7))[_0x18f88e(0x293)]({'botID':botID})[_0x18f88e(0x29b)]();_0x4edd39&&dbConfig['get'](_0x18f88e(0x1e7))[_0x18f88e(0x293)]({'botID':botID})[_0x18f88e(0x142)]({'onepagemode':_0x149e74})[_0x18f88e(0x204)](),config[_0x18f88e(0x17a)]=_0x149e74,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x339dde){const _0x341c74=_0xd052f1;logger['debug'](_0x341c74(0x1ee));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x341c74(0x1b7)](_0x341c74(0x201));let _0x41d51b=![],_0x4e2a18=![],_0x493de5=[];_0x339dde[_0x341c74(0x1c9)][_0x341c74(0x158)](_0x2c7a5e=>{const _0x5bd04b=_0x341c74;if(!_0x2c7a5e[_0x5bd04b(0x1e1)]&&_0x2c7a5e[_0x5bd04b(0x1f3)]!=_0x339dde[_0x5bd04b(0x1ab)])_0x493de5[_0x5bd04b(0x186)](_0x2c7a5e[_0x5bd04b(0x183)]);}),_0x493de5['forEach'](_0x483659=>{const _0x987f16=_0x341c74,_0x1758cd=currentCoins['find'](_0xb67e7=>_0xb67e7[_0x987f16(0x183)]==_0x483659);!_0x1758cd&&(_0x41d51b=!![]);}),currentCoins[_0x341c74(0x158)](_0x1b9f36=>{const _0x4abd8b=_0x341c74;if(_0x1b9f36[_0x4abd8b(0x1f3)]!=config[_0x4abd8b(0x1ab)]){const _0xef5d1d=_0x493de5['find'](_0x24269e=>_0x24269e==_0x1b9f36[_0x4abd8b(0x183)]);!_0xef5d1d&&(_0x41d51b=!![]);}}),_0x339dde[_0x341c74(0x1c9)][_0x341c74(0x158)](_0xdd531a=>{const _0x23a895=_0x341c74,_0x176508=config['portfolio'][_0x23a895(0x293)](_0x10d876=>_0x10d876[_0x23a895(0x1f3)]==_0xdd531a[_0x23a895(0x1f3)]);if(_0x176508&&_0xdd531a[_0x23a895(0x1ae)]!=_0x176508[_0x23a895(0x1ae)])_0x4e2a18=!![];});let _0x38bef9=dbConfig[_0x341c74(0x1dd)]('bot')[_0x341c74(0x293)]({'botID':botID})[_0x341c74(0x29b)]();_0x339dde={..._0x339dde,'apiKey':crypt['decrypt'](secure[_0x341c74(0x141)],_0x339dde[_0x341c74(0x26c)])['message'],'apiSecret':crypt[_0x341c74(0x1f5)](secure[_0x341c74(0x141)],_0x339dde[_0x341c74(0x260)])['message']};_0x339dde[_0x341c74(0x1c1)]&&(_0x339dde[_0x341c74(0x1c1)]=crypt[_0x341c74(0x1f5)](secure[_0x341c74(0x141)],_0x339dde['apiPassword'])['message']);let _0x2c5e05=![];if(_0x38bef9){_0x339dde[_0x341c74(0x26c)]==_0x341c74(0x173)?_0x339dde['apiKey']=config[_0x341c74(0x26c)]:_0x2c5e05=!![];_0x339dde[_0x341c74(0x260)]==_0x341c74(0x173)?_0x339dde[_0x341c74(0x260)]=config[_0x341c74(0x260)]:_0x2c5e05=!![];if(_0x339dde[_0x341c74(0x1c1)]==_0x341c74(0x173))_0x339dde[_0x341c74(0x1c1)]=config[_0x341c74(0x1c1)];else{if(_0x339dde[_0x341c74(0x1c1)])_0x2c5e05=!![];}dbConfig[_0x341c74(0x1dd)](_0x341c74(0x1e7))[_0x341c74(0x293)]({'botID':botID})[_0x341c74(0x142)](_0x339dde)[_0x341c74(0x204)]();}else dbConfig['get'](_0x341c74(0x1e7))[_0x341c74(0x186)](_0x339dde)[_0x341c74(0x204)](),_0x2c5e05=!![],process[_0x341c74(0x21d)]({'status':'enabled','live':'running'},_0x5146b2=>{});process[_0x341c74(0x21d)]({'botname':_0x339dde[_0x341c74(0x11e)]},_0x57dbcb=>{}),config={..._0x339dde},updateBotManager(),proxyEmit(_0x341c74(0x16a)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2c5e05)await reset(!![]);else _0x41d51b||_0x4e2a18?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x341c74(0x1b7)](_0x341c74(0x268));}async function storeHeadless(_0x13949d){const _0x25e4a3=_0xd052f1,_0x1f5f13={...config,'headless':_0x13949d[_0x25e4a3(0x175)]};let _0x2b5a00=dbConfig[_0x25e4a3(0x1dd)]('bot')[_0x25e4a3(0x293)]({'botID':botID})[_0x25e4a3(0x29b)]();_0x2b5a00&&dbConfig[_0x25e4a3(0x1dd)](_0x25e4a3(0x1e7))[_0x25e4a3(0x293)]({'botID':botID})[_0x25e4a3(0x142)](_0x1f5f13)['write'](),config={..._0x1f5f13},updateBotManager(),proxyEmit(_0x25e4a3(0x28a),emittedConfiguration());}async function storeFiat(_0x1fc278){const _0x354db4=_0xd052f1,_0x3b748c={...config,'fiat':_0x1fc278};let _0x1165dc=dbConfig[_0x354db4(0x1dd)]('bot')[_0x354db4(0x293)]({'botID':botID})['value']();_0x1165dc&&dbConfig[_0x354db4(0x1dd)](_0x354db4(0x1e7))['find']({'botID':botID})[_0x354db4(0x142)](_0x3b748c)[_0x354db4(0x204)](),config={..._0x3b748c},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x2b4aa1=_0xd052f1;logger['full']('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x2b4aa1(0x26b)](configpath,_0x2b4aa1(0x20a)+botID+_0x2b4aa1(0x179))))fs[_0x2b4aa1(0x193)](path[_0x2b4aa1(0x26b)](configpath,_0x2b4aa1(0x20a)+botID+_0x2b4aa1(0x179)));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x2b4aa1(0x236))))fs[_0x2b4aa1(0x193)](path[_0x2b4aa1(0x26b)](configpath,_0x2b4aa1(0x20a)+botID+_0x2b4aa1(0x236)));if(fs[_0x2b4aa1(0x22f)](path[_0x2b4aa1(0x26b)](configpath,_0x2b4aa1(0x20a)+botID+'-results.json')))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x2b4aa1(0x1b1)));}catch(_0x30d8c6){if(_0x30d8c6)logger['full'](_0x2b4aa1(0x190),_0x30d8c6);}const _0x129890=getDate();let _0x4a34c5=[];currentCoins[_0x2b4aa1(0x158)](_0x263699=>{const _0x10d8ad=_0x2b4aa1;_0x4a34c5[_0x10d8ad(0x186)]({'coin':_0x263699['coin'],'number':_0x263699[_0x10d8ad(0x224)],'price':_0x263699[_0x10d8ad(0x274)]});});let _0x499645=dbConfig[_0x2b4aa1(0x1dd)](_0x2b4aa1(0x1e7))[_0x2b4aa1(0x293)]({'botID':botID})[_0x2b4aa1(0x29b)]();_0x499645&&(dbConfig[_0x2b4aa1(0x1dd)](_0x2b4aa1(0x1e7))[_0x2b4aa1(0x293)]({'botID':botID})['assign']({'liquidity':[{'date':_0x129890,'changes':_0x4a34c5}]})[_0x2b4aa1(0x204)](),config['liquidity']=[]),process['send']({'stop':_0x2b4aa1(0x264)},_0x5b5ad7=>{});}function noslash(_0x2210b4){const _0x347a2d=_0xd052f1;return _0x2210b4[_0x347a2d(0x203)]('/','');}function updateHighestFee(_0x1d5910){const _0x3cb2fa=_0xd052f1;if(_0x1d5910[_0x3cb2fa(0x1b6)]){let _0x37d4fb={'filled':_0x1d5910[_0x3cb2fa(0x225)]*_0x1d5910[_0x3cb2fa(0x1e4)],'amount':_0x1d5910[_0x3cb2fa(0x225)]*_0x1d5910[_0x3cb2fa(0x1e4)],'side':_0x1d5910[_0x3cb2fa(0x133)]==_0x3cb2fa(0x1d0)?'buy':_0x3cb2fa(0x1d0),'price':0x1/_0x1d5910[_0x3cb2fa(0x1e4)]};_0x1d5910={..._0x1d5910,..._0x37d4fb};}const _0x39bd2d=defaultFee*_0x1d5910[_0x3cb2fa(0x225)]*_0x1d5910[_0x3cb2fa(0x1e4)];lastFees[_0x3cb2fa(0x24f)][_0x3cb2fa(0x280)]===0x14&&lastFees[_0x3cb2fa(0x24f)]['shift'](),lastFees[_0x3cb2fa(0x24f)][_0x3cb2fa(0x186)](_0x39bd2d),lastFees['highest']=Math[_0x3cb2fa(0x279)](...lastFees[_0x3cb2fa(0x24f)]);}async function updateNumberCoinsCcxt(_0x107e40){const _0x1d1f0a=_0xd052f1;logger['debug'](_0x1d1f0a(0x212)+_0x107e40['symbol']+_0x1d1f0a(0x11b)+_0x107e40[_0x1d1f0a(0x1f8)]+_0x1d1f0a(0x11b)+_0x107e40[_0x1d1f0a(0x225)]+_0x1d1f0a(0x1cc)+_0x107e40[_0x1d1f0a(0x25a)]+_0x1d1f0a(0x11b)+_0x107e40['id']);let _0xd16d01=_0x107e40['status'],_0x119d47=![];currentCoins[_0x1d1f0a(0x158)](_0x386cf8=>{const _0xe4f5e3=_0x1d1f0a;_0x386cf8[_0xe4f5e3(0x183)]==_0x107e40[_0xe4f5e3(0x183)]&&(_0x119d47=!![]);});if(!_0x119d47)return;const _0x242cc2=currentCoins[_0x1d1f0a(0x293)](_0x301edb=>_0x301edb[_0x1d1f0a(0x183)]==_0x107e40[_0x1d1f0a(0x183)]),_0x233852=_0x3a4356=>{const _0x7b5594=_0x1d1f0a;if(_0x242cc2)_0x242cc2[_0x7b5594(0x1e9)]=_0x3a4356;};if(_0xd16d01==_0x1d1f0a(0x1d5))_0x233852(_0x1d1f0a(0x1d5));else{if(_0xd16d01==_0x1d1f0a(0x239)){_0x233852(_0x1d1f0a(0x239));const _0x457f6c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x457f6c,await getOpenOrders(),handleOpenOrders();}else{if(_0xd16d01=='closed'){let _0x411ecf=![];if(lastOrders)for(const _0x549855 of lastOrders){const _0xd3cf3d=0xc8,_0x592a33=0x1388;let _0x5d4268=0x0;while(!_0x549855[_0x1d1f0a(0x244)]&&_0x5d4268*_0xd3cf3d<_0x592a33){_0x5d4268++,await sleep(_0xd3cf3d);}if(_0x5d4268>0x0)logger[_0x1d1f0a(0x1b7)](_0x1d1f0a(0x24c)+_0x5d4268*_0xd3cf3d/0x3e8+_0x1d1f0a(0x1eb));if(_0x549855['orderId']==_0x107e40['id']){logger[_0x1d1f0a(0x1b7)](_0x1d1f0a(0x15b)+_0x107e40['id']),_0x411ecf=!![];if(_0x549855[_0x1d1f0a(0x225)]==0x0){logger[_0x1d1f0a(0x1b7)](_0x1d1f0a(0x149)+_0x107e40['id']);if(_0x107e40[_0x1d1f0a(0x14e)])_0x549855[_0x1d1f0a(0x1e4)]=_0x107e40[_0x1d1f0a(0x14e)];else{if(_0x107e40[_0x1d1f0a(0x1e4)])_0x549855[_0x1d1f0a(0x1e4)]=_0x107e40['price'];else{}}_0x549855[_0x1d1f0a(0x225)]=_0x107e40[_0x1d1f0a(0x225)],updateHighestFee(_0x549855),_0x233852(_0x1d1f0a(0x225)),await validateOrders();if(lockOrders==ORDERS[_0x1d1f0a(0x269)]){const _0x3f1308=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3f1308;}_0x549855[_0x1d1f0a(0x1d2)]={'currency':_0x107e40[_0x1d1f0a(0x1d2)]?_0x107e40[_0x1d1f0a(0x1d2)][_0x1d1f0a(0x20d)]:null,'cost':_0x107e40['fee']?_0x107e40[_0x1d1f0a(0x1d2)][_0x1d1f0a(0x17c)]:0x0},await updateCoinResults(_0x549855);}}}if(!_0x411ecf){logger[_0x1d1f0a(0x1b7)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x107e40['id']),_0x233852(_0x1d1f0a(0x225));const _0x17805f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x17805f,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x22a7c8=JSON['parse'](lastBalances[_0x1d1f0a(0x1c9)]);const _0x52244d=_0x22a7c8[_0x1d1f0a(0x293)](_0x1c81ba=>_0x1c81ba[_0x1d1f0a(0x183)]==_0x107e40[_0x1d1f0a(0x183)]);if(_0x52244d){if(_0xd16d01==_0x1d1f0a(0x1d5))_0x52244d[_0x1d1f0a(0x1e9)]=_0x52244d[_0x1d1f0a(0x1e9)]=='filled'?'filled':_0x1d1f0a(0x1d5);else{if(_0xd16d01=='canceled')_0x52244d['orderstatus']=_0x52244d[_0x1d1f0a(0x1e9)]==_0x1d1f0a(0x225)?_0x1d1f0a(0x225):'canceled';else _0xd16d01==_0x1d1f0a(0x11d)&&(_0x52244d[_0x1d1f0a(0x1e9)]=_0x1d1f0a(0x225));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1d1f0a(0x207)](_0x22a7c8)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x42a43d=_0xd052f1;await getOpenOrders();let _0x45e9b0=![];currentCoins[_0x42a43d(0x158)](_0x590975=>{const _0x416d2b=_0x42a43d;_0x45e9b0=allOpenOrders[_0x416d2b(0x293)](_0x712487=>_0x712487[_0x416d2b(0x183)]==_0x590975['symbol']),_0x590975[_0x416d2b(0x1e9)]=_0x45e9b0?_0x416d2b(0x1d5):'none';});}async function getCoins(_0x563607=0x0,_0x1429d3=!![],_0x850d5f=config[_0xd052f1(0x1ab)]){const _0x30cfd8=_0xd052f1;let _0x3ac342,_0x32214f=[],_0x3ee8b6=[],_0x441c85=[];if(_0x563607)await sleep(_0x563607);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3ac342=await exchange[_0x30cfd8(0x16f)](),mybalances=_0x3ac342[_0x30cfd8(0x1e6)];for(const [_0x19e2ae,_0x2724b4]of Object[_0x30cfd8(0x258)](mybalances)){_0x441c85[_0x30cfd8(0x186)](_0x19e2ae);}config['portfolio']['forEach'](_0x298d55=>{const _0x253150=_0x30cfd8;!_0x441c85[_0x253150(0x153)](_0x298d55[_0x253150(0x1f3)])&&(mybalances[_0x298d55[_0x253150(0x1f3)]]=0x0);});if(_0x850d5f=='')for(const [_0x4e3053,_0x351c49]of Object[_0x30cfd8(0x258)](mybalances)){_0x351c49!=0x0&&_0x32214f[_0x30cfd8(0x186)]({'coin':_0x4e3053});}else{let _0x1af7d4=![];for(const [_0x386133,_0x46f13e]of Object[_0x30cfd8(0x258)](mybalances)){const _0x53b077=config[_0x30cfd8(0x1c9)][_0x30cfd8(0x293)](_0x4c5dd5=>_0x4c5dd5[_0x30cfd8(0x1f3)]==_0x386133),_0x38278c=_0x386133+'/'+_0x850d5f,_0x11ac31=_0x850d5f+'/'+_0x386133,_0x5e32df=currentCoins[_0x30cfd8(0x293)](_0x3462d9=>_0x3462d9[_0x30cfd8(0x1f3)]==_0x386133);_0x1af7d4=![];if((_0x46f13e!=0x0||_0x53b077)&&(allSymbols[_0x30cfd8(0x153)](_0x38278c)||_0x386133==_0x850d5f))_0x32214f['push']({'coin':_0x386133,'symbol':_0x38278c,'reverse':![],'number':Math['max'](_0x46f13e+(_0x53b077&&_0x53b077[_0x30cfd8(0x1ae)]||0x0),0x0),'orderstatus':_0x5e32df?_0x5e32df[_0x30cfd8(0x1e9)]:_0x30cfd8(0x298)});else{if((_0x46f13e!=0x0||_0x53b077)&&allSymbols[_0x30cfd8(0x153)](_0x11ac31))_0x32214f['push']({'coin':_0x386133,'symbol':_0x11ac31,'reverse':!![],'number':Math[_0x30cfd8(0x279)](_0x46f13e+(_0x53b077&&_0x53b077[_0x30cfd8(0x1ae)]||0x0),0x0),'orderstatus':_0x5e32df?_0x5e32df[_0x30cfd8(0x1e9)]:_0x30cfd8(0x298)});else _0x53b077&&_0x32214f[_0x30cfd8(0x186)]({'coin':_0x53b077[_0x30cfd8(0x1f3)],'symbol':_0x53b077[_0x30cfd8(0x183)],'reverse':_0x53b077['reverse'],'number':0x0,'orderstatus':'none'});}}}}catch(_0x5825d3){if(!_0x1429d3)handleErrorNoStop(_0x5825d3,'getCoins()');else await handleError(_0x5825d3,_0x30cfd8(0x246));}return _0x3ee8b6=cloneDeep(_0x32214f),_0x32214f=_0x32214f[_0x30cfd8(0x254)](_0x493b69=>{const _0x5b613d=_0x30cfd8,_0x304f54=config['portfolio'][_0x5b613d(0x293)](_0x583183=>_0x583183[_0x5b613d(0x1f3)]==_0x493b69[_0x5b613d(0x1f3)]);return _0x304f54&&!_0x304f54[_0x5b613d(0x1e1)];}),[_0x32214f,_0x3ee8b6];}async function getCoinNumber(_0x343cd0){const _0x3ece54=_0xd052f1;let _0xb58e5f;try{const _0x2d28d3=await exchange[_0x3ece54(0x16f)]();_0xb58e5f=_0x2d28d3[_0x3ece54(0x1e6)][_0x343cd0];}catch(_0x4f1a70){await handleError(_0x4f1a70,_0x3ece54(0x23e));}return _0xb58e5f;}async function getOpenOrders(){const _0x507247=_0xd052f1;let _0x40863c;allOpenOrders=[];try{for(const _0x4698f7 of config[_0x507247(0x1c9)]){!_0x4698f7[_0x507247(0x1e1)]&&_0x4698f7[_0x507247(0x1f3)]!=config[_0x507247(0x1ab)]&&(_0x40863c=await exchange[_0x507247(0x112)](_0x4698f7['symbol']),_0x40863c[_0x507247(0x280)]>0x0&&allOpenOrders[_0x507247(0x186)](_0x40863c[0x0]));}}catch(_0x145781){await handleError(_0x145781,'getOpenOrders()');}}async function handleOpenOrders(_0x3874c1=0x0){const _0x3196b1=_0xd052f1;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3196b1(0x269)]&&allOrdersPlaced&&(_0x3874c1==0x0?(logger[_0x3196b1(0x1b7)](_0x3196b1(0x1a6)),_0x3874c1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3196b1(0x1b7)](_0x3196b1(0x27d)),validateOrders(_0x3196b1(0x136))));}async function testAPI(_0x9a5520){const _0x42e1e3=_0xd052f1,_0x3e3930=ccxt[_0x42e1e3(0x14b)][_0x9a5520[_0x42e1e3(0x22e)][_0x42e1e3(0x1b2)]()],_0x42d38b=new _0x3e3930({'apiKey':_0x9a5520[_0x42e1e3(0x26c)],'secret':_0x9a5520[_0x42e1e3(0x260)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x42e1e3(0x19f)}});if(_0x9a5520[_0x42e1e3(0x1c1)])_0x42d38b[_0x42e1e3(0x276)]=_0x9a5520[_0x42e1e3(0x1c1)];try{await _0x42d38b[_0x42e1e3(0x206)]();}catch(_0x4f56b9){throw _0x4f56b9;}}function cloneDeep(_0x153960){const _0x473b48=_0xd052f1;return JSON[_0x473b48(0x163)](JSON['stringify'](_0x153960));}async function getPortfolio(_0x3d6af5){const _0x2f1790=_0xd052f1;let _0x362d2c=[],_0x5cbd23=[],_0x49f1f8=[],_0x2981a3;if(_0x3d6af5['apiKey']!==_0x2f1790(0x173)||_0x3d6af5[_0x2f1790(0x260)]!==_0x2f1790(0x173)||_0x3d6af5[_0x2f1790(0x1c1)]&&_0x3d6af5[_0x2f1790(0x1c1)]!==_0x2f1790(0x173)){if(config[_0x2f1790(0x22e)]){if(_0x3d6af5['apiKey']==_0x2f1790(0x173))_0x3d6af5[_0x2f1790(0x26c)]=config[_0x2f1790(0x26c)];if(_0x3d6af5['apiSecret']==_0x2f1790(0x173))_0x3d6af5['apiSecret']=config[_0x2f1790(0x260)];if(_0x3d6af5[_0x2f1790(0x1c1)]==_0x2f1790(0x173))_0x3d6af5[_0x2f1790(0x1c1)]=config[_0x2f1790(0x1c1)];try{await testAPI(_0x3d6af5);}catch(_0x5b3244){if(_0x5b3244[_0x2f1790(0x192)]()[_0x2f1790(0x153)](_0x2f1790(0x19b))){logger[_0x2f1790(0x1b7)](_0x2f1790(0x278)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5b3244,_0x2f1790(0x1c5));return;}}}await initExchange(_0x3d6af5[_0x2f1790(0x22e)],_0x3d6af5[_0x2f1790(0x26c)],_0x3d6af5['apiSecret'],_0x3d6af5[_0x2f1790(0x1c1)]);try{await loadSymbols();}catch(_0x205765){if(_0x205765[_0x2f1790(0x192)]()[_0x2f1790(0x153)](_0x2f1790(0x19b))){proxyEmit(_0x2f1790(0x1c9),![]);return;}else{handleError(_0x205765,_0x2f1790(0x237));return;}}const _0x4237d5=await getCoins(0x0,![],_0x3d6af5[_0x2f1790(0x1ab)]);_0x49f1f8=cloneDeep(_0x4237d5[0x1]);}else _0x49f1f8=cloneDeep(currentCoinsAll);if(_0x3d6af5[_0x2f1790(0x1ab)]=='')proxyEmit('portfolio',_0x49f1f8);else{_0x49f1f8[_0x2f1790(0x158)](_0x2fec54=>{const _0x988945=_0x2f1790;if(_0x2fec54[_0x988945(0x1f3)]!=_0x3d6af5[_0x988945(0x1ab)]&&allSymbols['includes'](_0x2fec54['symbol']))_0x362d2c[_0x988945(0x186)](_0x2fec54[_0x988945(0x183)]);});if(_0x362d2c[_0x2f1790(0x280)]==0x0)logHistory(_0x2f1790(0x1da),_0x2f1790(0x111));else{try{_0x5cbd23=await getTickers(_0x362d2c);}catch(_0x2b178e){if(_0x2b178e[_0x2f1790(0x192)]()[_0x2f1790(0x153)]('AuthenticationError')){proxyEmit('portfolio',![]);return;}else handleError(_0x2b178e,'getPortfolio(2)');}_0x49f1f8[_0x2f1790(0x158)](_0x15e13c=>{const _0xd7124=_0x2f1790;_0x15e13c[_0xd7124(0x1f3)]!=_0x3d6af5['basecoin']?_0x5cbd23[_0x15e13c[_0xd7124(0x183)]]?_0x2981a3=_0x15e13c[_0xd7124(0x1b6)]?0x1/_0x5cbd23[_0x15e13c[_0xd7124(0x183)]][_0xd7124(0x274)]:_0x5cbd23[_0x15e13c[_0xd7124(0x183)]][_0xd7124(0x274)]:_0x2981a3=0x0:_0x2981a3=0x1,_0x15e13c[_0xd7124(0x1e4)]=formatResult(_0x2981a3,0x8);}),proxyEmit('portfolio',_0x49f1f8);}}}function truncateTradeAmount(_0x3bdbcc,_0x29452b){const _0x49e24c=_0xd052f1;let _0x5df525=0x0;try{_0x5df525=exchange[_0x49e24c(0x121)](_0x3bdbcc,_0x29452b);}catch(_0x519cc9){}return _0x5df525;}function checkMinimums(_0x552529){const _0x4848d6=_0xd052f1;let _0xaa6def=!![];const _0x35bd06=!_0x552529['reverse']?markets[_0x552529[_0x4848d6(0x183)]][_0x4848d6(0x1a8)][_0x4848d6(0x25a)]['min']:markets[_0x552529[_0x4848d6(0x183)]][_0x4848d6(0x1a8)][_0x4848d6(0x17c)][_0x4848d6(0x157)],_0x134da0=!_0x552529[_0x4848d6(0x1b6)]?markets[_0x552529['symbol']][_0x4848d6(0x1a8)][_0x4848d6(0x17c)][_0x4848d6(0x157)]:markets[_0x552529[_0x4848d6(0x183)]][_0x4848d6(0x1a8)][_0x4848d6(0x25a)][_0x4848d6(0x157)],_0x2c0f05=truncateTradeAmount(_0x552529[_0x4848d6(0x183)],_0x552529[_0x4848d6(0x1b8)]);_0x552529[_0x4848d6(0x1b8)]=_0x2c0f05;if(Math[_0x4848d6(0x1ca)](_0x2c0f05)<_0x35bd06)_0xaa6def=![];if(Math[_0x4848d6(0x1ca)](_0x2c0f05)*_0x552529[_0x4848d6(0x274)]<_0x134da0)_0xaa6def=![];if(_0x552529[_0x4848d6(0x133)]==_0x4848d6(0x1d0)){let _0x39a7d8=config[_0x4848d6(0x1c9)][_0x4848d6(0x293)](_0x518af8=>_0x518af8['coin']==_0x552529[_0x4848d6(0x1f3)]);if(_0x39a7d8[_0x4848d6(0x1ae)]>0x0){if(Math['abs'](_0x2c0f05)>_0x552529['number']-_0x39a7d8[_0x4848d6(0x1ae)])_0xaa6def=![];}else{if(Math[_0x4848d6(0x1ca)](_0x2c0f05)>_0x552529[_0x4848d6(0x224)])_0xaa6def=![];}}if(_0x552529[_0x4848d6(0x133)]==_0x4848d6(0x1a3)){let _0x47e848=config['portfolio']['find'](_0x48418f=>_0x48418f['coin']==config[_0x4848d6(0x1ab)]),_0x2462ee=currentCoins['find'](_0x28207c=>_0x28207c['coin']==config[_0x4848d6(0x1ab)]);if(_0x47e848[_0x4848d6(0x1ae)]>0x0){if(Math[_0x4848d6(0x1ca)](_0x2c0f05)*_0x552529[_0x4848d6(0x274)]>_0x2462ee[_0x4848d6(0x224)]-_0x47e848['offset'])_0xaa6def=![];}else{if(Math['abs'](_0x2c0f05)*_0x552529[_0x4848d6(0x274)]>_0x2462ee[_0x4848d6(0x224)])_0xaa6def=![];}}return _0xaa6def;}async function getBalances(_0x59b6e9=!![]){const _0x2a3cd3=_0xd052f1;let _0x4e5173=0x0,_0x1b9ab1;const _0x4c9f3c=config[_0x2a3cd3(0x178)];if(config[_0x2a3cd3(0x175)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x27b1da=>{const _0x1a12bf=_0x2a3cd3;if(_0x27b1da[_0x1a12bf(0x1f3)]!=config[_0x1a12bf(0x1ab)]){let _0x3ba86e=global[_0x1a12bf(0x148)][noslash(_0x27b1da[_0x1a12bf(0x183)])];_0x1b9ab1=_0x27b1da[_0x1a12bf(0x1b6)]?0x1/_0x3ba86e:_0x3ba86e;}else _0x1b9ab1=0x1;let _0x2a6d9e=_0x27b1da[_0x1a12bf(0x224)]*_0x1b9ab1;_0x4e5173+=_0x2a6d9e,_0x27b1da['last']=formatResult(Number(_0x1b9ab1),0x8),_0x27b1da[_0x1a12bf(0x29b)]=_0x2a6d9e;}),currentCoins[_0x2a3cd3(0x158)](_0x4233e5=>{const _0x4565d7=_0x2a3cd3;let _0x4021c4=config['portfolio'][_0x4565d7(0x293)](_0x1985c0=>_0x1985c0['coin']==_0x4233e5[_0x4565d7(0x1f3)]),_0x5b9082=Number(_0x4021c4[_0x4565d7(0x242)]),_0x27279e=_0x4233e5[_0x4565d7(0x29b)]/_0x4e5173*0x64,_0x34e558=_0x5b9082*_0x4e5173/0x64/_0x4233e5[_0x4565d7(0x274)]-_0x4233e5[_0x4565d7(0x224)];_0x4233e5['distribution']=formatResult(_0x27279e,0x3),_0x4233e5[_0x4565d7(0x16e)]=formatResult(_0x5b9082,0x3),_0x4233e5[_0x4565d7(0x1b8)]=formatResult(_0x34e558,0x8),_0x4233e5[_0x4565d7(0x133)]='',_0x4233e5[_0x4565d7(0x234)]=![];if(_0x4233e5[_0x4565d7(0x1f3)]!=config[_0x4565d7(0x1ab)]){if(_0x4233e5['distribution']>_0x5b9082)_0x4233e5['side']=_0x4565d7(0x1d0),_0x4233e5[_0x4565d7(0x234)]=checkMinimums(_0x4233e5);else _0x4233e5[_0x4565d7(0x242)]<_0x5b9082&&(_0x4233e5[_0x4565d7(0x133)]=_0x4565d7(0x1a3),_0x4233e5[_0x4565d7(0x234)]=checkMinimums(_0x4233e5));}_0x4233e5[_0x4565d7(0x13f)]=_0x4233e5['distribution']/_0x4233e5[_0x4565d7(0x16e)]-0x1;if(_0x4233e5[_0x4565d7(0x1e9)]==_0x4565d7(0x225)||_0x4233e5[_0x4565d7(0x1e9)]=='canceled')_0x4233e5[_0x4565d7(0x1e9)]='none';}),currentCoins[_0x2a3cd3(0x1ac)]((_0x5a2528,_0x249a36)=>_0x5a2528['delta']<_0x249a36[_0x2a3cd3(0x13f)]?0x1:_0x249a36[_0x2a3cd3(0x13f)]<_0x5a2528[_0x2a3cd3(0x13f)]?-0x1:0x0);const _0x43af00=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x43af00[_0x2a3cd3(0x131)],'usd':_0x43af00[_0x2a3cd3(0x25e)],'portfolio':JSON[_0x2a3cd3(0x207)](currentCoins),'threshold':_0x4c9f3c},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x59b6e9){if(config[_0x2a3cd3(0x175)])headlessMode({'portfolio':currentCoins,'threshold':_0x4c9f3c});else{if(lockOrders==ORDERS[_0x2a3cd3(0x14f)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4c9f3c});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2ebb22=getNormalizedPerformance();getStartingBalances(_0x2ebb22),emitPerformance(_0x2ebb22);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4b0f38=getNormalizedPerformance();emitPerformance(_0x4b0f38),getStartingBalances(_0x4b0f38),logger['debug'](_0x2a3cd3(0x292));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x37cc04=_0xd052f1;if(!lastBalances)return;let _0x7a7389=[],_0x275ec4,_0x432e3d=JSON[_0x37cc04(0x163)](lastBalances[_0x37cc04(0x1c9)]);_0x432e3d[_0x37cc04(0x1ac)]((_0x3f24ad,_0x298799)=>_0x3f24ad[_0x37cc04(0x1f3)]>_0x298799[_0x37cc04(0x1f3)]?0x1:_0x298799[_0x37cc04(0x1f3)]>_0x3f24ad[_0x37cc04(0x1f3)]?-0x1:0x0),_0x432e3d['forEach'](_0x1dc128=>{const _0x5127a3=_0x37cc04;let _0x4b4841={'coin':_0x1dc128[_0x5127a3(0x1f3)],'number':_0x1dc128[_0x5127a3(0x224)],'price':_0x1dc128[_0x5127a3(0x274)]};_0x7a7389[_0x5127a3(0x186)](_0x4b4841);});const _0x4a5a12=await getFiat();_0x275ec4={'date':lastBalances[_0x37cc04(0x11a)][_0x37cc04(0x174)]('\x20')[0x0],'eur':_0x4a5a12[_0x37cc04(0x131)],'usd':_0x4a5a12[_0x37cc04(0x25e)],'coins':_0x7a7389};let _0xb9cf91=dbPerformance[_0x37cc04(0x1dd)]('data')[_0x37cc04(0x293)]({'date':_0x275ec4[_0x37cc04(0x12a)]})[_0x37cc04(0x29b)]();_0xb9cf91?_0x275ec4[_0x37cc04(0x12a)]!=config[_0x37cc04(0x146)]&&dbPerformance[_0x37cc04(0x1dd)]('data')[_0x37cc04(0x293)]({'date':_0x275ec4['date']})[_0x37cc04(0x142)](_0x275ec4)['write']():dbPerformance[_0x37cc04(0x1dd)]('data')['push'](_0x275ec4)[_0x37cc04(0x204)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x103ed3=_0xd052f1;let _0x141163=[];if(dbPerformance['has'](_0x103ed3(0x1c3))[_0x103ed3(0x29b)]()){let _0x16b7d4=dbPerformance[_0x103ed3(0x1dd)](_0x103ed3(0x1c3))['cloneDeep']()[_0x103ed3(0x254)](_0xebd1d4=>{const _0x270147=_0x103ed3;if(_0xebd1d4['coins'][_0x270147(0x280)]==0x0)return![];else return!![];})[_0x103ed3(0x1fb)](_0x103ed3(0x12a))['value'](),_0x605c8b=[...config['liquidity']];_0x605c8b[_0x103ed3(0x1ac)]((_0x1d27af,_0x49312c)=>_0x1d27af['date']>_0x49312c['date']?-0x1:_0x49312c[_0x103ed3(0x12a)]>_0x1d27af[_0x103ed3(0x12a)]?0x1:0x0);let _0x49b299=0x1,_0x1b89b5=[],_0x1161af=0x0;_0x16b7d4[_0x103ed3(0x16d)]()['reverse']()[_0x103ed3(0x158)]((_0x158767,_0x16c02f)=>{const _0x431f38=_0x103ed3;if(_0x605c8b[_0x1161af]){if(_0x16b7d4[_0x16b7d4[_0x431f38(0x280)]-_0x16c02f]&&_0x605c8b[_0x1161af]['date']==_0x16b7d4[_0x16b7d4[_0x431f38(0x280)]-_0x16c02f][_0x431f38(0x12a)]){if(_0x16c02f<_0x16b7d4[_0x431f38(0x280)]){let _0x39ed78=0x0,_0x4bb0ed=0x0;_0x16b7d4[_0x16b7d4[_0x431f38(0x280)]-_0x16c02f][_0x431f38(0x172)][_0x431f38(0x158)](_0x565052=>{const _0x2959f8=_0x431f38;_0x4bb0ed+=_0x565052[_0x2959f8(0x224)]*_0x565052[_0x2959f8(0x1e4)];}),_0x605c8b[_0x1161af][_0x431f38(0x294)][_0x431f38(0x158)](_0x31ff07=>{const _0x8323e6=_0x431f38;_0x39ed78+=_0x31ff07[_0x8323e6(0x224)]*_0x31ff07['price'];}),_0x49b299*=_0x39ed78/(_0x4bb0ed-_0x39ed78)+0x1;}_0x1161af++;}}let _0x25dfa8=0x0;_0x158767[_0x431f38(0x172)][_0x431f38(0x158)](_0x57b1f0=>{const _0x17ceff=_0x431f38;_0x25dfa8+=_0x57b1f0['number']*_0x57b1f0[_0x17ceff(0x1e4)];}),_0x1b89b5[_0x16b7d4[_0x431f38(0x280)]-_0x16c02f-0x1]=_0x25dfa8*(_0x49b299-0x1);});let _0x482fa4=[];_0x605c8b=[...config['liquidity']]||[];let _0x1dfffd=0x0;_0x1161af=0x0,_0x16b7d4[_0x103ed3(0x158)]((_0x348027,_0x23b010)=>{const _0x2ab4b5=_0x103ed3;if(_0x605c8b[_0x1161af]){const _0x45b8a0=fns[_0x2ab4b5(0x163)](_0x605c8b[_0x1161af][_0x2ab4b5(0x12a)],_0x2ab4b5(0x255),new Date()),_0xb8c930=fns[_0x2ab4b5(0x163)](_0x348027[_0x2ab4b5(0x12a)],'yyyy/MM/dd',new Date());if(fns[_0x2ab4b5(0x198)](_0x45b8a0,_0xb8c930)){let _0x504d6f=0x0;_0x605c8b[_0x1161af][_0x2ab4b5(0x294)]['forEach'](_0x565547=>{const _0x49ba66=_0x2ab4b5;!_0x482fa4[_0x565547['coin']]?_0x482fa4[_0x565547['coin']]=_0x565547[_0x49ba66(0x224)]:(_0x504d6f=_0x482fa4[_0x565547[_0x49ba66(0x1f3)]],_0x482fa4[_0x565547['coin']]+=_0x565547[_0x49ba66(0x224)]);const _0x5ef47f=_0x348027['coins'][_0x49ba66(0x293)](_0x1d9dd4=>_0x1d9dd4['coin']==_0x565547['coin']);(!_0x5ef47f||_0x5ef47f[_0x49ba66(0x224)]==0x0)&&(_0x1dfffd+=(-_0x565547['number']-_0x504d6f)*_0x565547[_0x49ba66(0x1e4)]);}),_0x1161af++;}}_0x348027['coins'][_0x2ab4b5(0x158)]((_0x348a65,_0x523012)=>{const _0x3743ba=_0x2ab4b5;_0x482fa4[_0x348a65[_0x3743ba(0x1f3)]]&&(_0x348a65[_0x3743ba(0x247)]=_0x482fa4[_0x348a65['coin']]);}),_0x141163[_0x2ab4b5(0x186)]({'date':_0x348027[_0x2ab4b5(0x12a)],'eur':_0x348027[_0x2ab4b5(0x131)],'usd':_0x348027[_0x2ab4b5(0x25e)],'offset':_0x1b89b5[_0x23b010],'netoffset':_0x1dfffd,'coins':_0x348027[_0x2ab4b5(0x172)]});});}return _0x141163;}function emitPerformance(_0x485615){const _0x3d96dc=_0xd052f1;_0x485615[_0x3d96dc(0x280)]!==0x0?(proxyEmit(_0x3d96dc(0x1ce),_0x485615),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3f7173,_0x1e9cc1){const _0x2b6e29=_0xd052f1;let _0x17b179=0x0,_0x4bb622=0x0,_0x48086e=0x0;_0x3f7173['coins'][_0x2b6e29(0x158)](_0xcd4a2=>{const _0x5f58a6=_0x2b6e29;_0x17b179+=_0xcd4a2[_0x5f58a6(0x224)]*_0xcd4a2[_0x5f58a6(0x1e4)];});_0x1e9cc1&&(_0x17b179+=_0x3f7173[_0x2b6e29(0x1ae)]);if(config[_0x2b6e29(0x1ab)]===_0x2b6e29(0x200)||config['basecoin']==='ETH')_0x4bb622=_0x17b179*_0x3f7173[_0x2b6e29(0x131)],_0x48086e=_0x17b179*_0x3f7173[_0x2b6e29(0x25e)];else{if(usdBasecoins[_0x2b6e29(0x153)](config[_0x2b6e29(0x1ab)]))_0x4bb622=_0x17b179*_0x3f7173['eur']/_0x3f7173['usd'],_0x48086e=_0x17b179;else config[_0x2b6e29(0x1ab)]===_0x2b6e29(0x230)&&(_0x4bb622=_0x17b179,_0x48086e=_0x17b179*_0x3f7173['usd']/_0x3f7173[_0x2b6e29(0x131)]);}return[_0x17b179,_0x4bb622,_0x48086e];}function getKPIs(_0x2eeac8,_0x41e5bc=_0xd052f1(0x230)){const _0x1bdeab=_0xd052f1,_0x1f3b3f=config[_0x1bdeab(0x1ab)],_0x5b55b6=lastBalances,_0x58fc8e=currentCoins,_0x98c012=getNormalizedPerformance(),_0x23ad92=_0x2eeac8===_0x1bdeab(0x1ab)?_0x1f3b3f:_0x2eeac8==='fiat'||_0x2eeac8==='net-fiat'?_0x41e5bc:_0x1bdeab(0x228)+_0x1f3b3f,_0x4272a7=_0x2eeac8===_0x1bdeab(0x271)?_0x1bdeab(0x282):_0x2eeac8===_0x1bdeab(0x165)?_0x1bdeab(0x282):_0x23ad92+_0x1bdeab(0x1af),_0x23bd9d=_0x2eeac8===_0x1bdeab(0x271)||_0x2eeac8===_0x1bdeab(0x165)?_0x1bdeab(0x282):_0x23ad92+'\x20change';let _0x33fad5=0x0;_0x58fc8e[_0x1bdeab(0x158)](_0x3d6f92=>{const _0x1bb3f5=_0x1bdeab;_0x33fad5+=_0x3d6f92[_0x1bb3f5(0x224)]*_0x3d6f92[_0x1bb3f5(0x274)];});if(_0x2eeac8==='fiat'||_0x2eeac8==='net-fiat'){if(_0x1f3b3f===_0x1bdeab(0x200)||_0x1f3b3f===_0x1bdeab(0x14d))_0x33fad5=_0x33fad5*(_0x41e5bc==='EUR'?_0x5b55b6[_0x1bdeab(0x131)]:_0x5b55b6[_0x1bdeab(0x25e)]);else{if(usdBasecoins[_0x1bdeab(0x153)](_0x1f3b3f))_0x33fad5=_0x33fad5*(_0x41e5bc==='EUR'?_0x5b55b6[_0x1bdeab(0x131)]/_0x5b55b6[_0x1bdeab(0x25e)]:0x1);else _0x1f3b3f===_0x1bdeab(0x230)&&(_0x33fad5=_0x33fad5*(_0x41e5bc===_0x1bdeab(0x230)?0x1:_0x5b55b6[_0x1bdeab(0x25e)]/_0x5b55b6[_0x1bdeab(0x131)]));}}let _0x3a860f;if(_0x33fad5!==0x0){if(_0x2eeac8===_0x1bdeab(0x1ab))_0x3a860f=(_0x33fad5/startingBalances['basecoin']-0x1)*0x64;else{if(_0x41e5bc===_0x1bdeab(0x230))_0x3a860f=(_0x33fad5/startingBalances[_0x1bdeab(0x131)]-0x1)*0x64;else _0x3a860f=(_0x33fad5/startingBalances[_0x1bdeab(0x25e)]-0x1)*0x64;}let _0x2ac034=0x0;if(startingBalances['coins'])_0x58fc8e[_0x1bdeab(0x158)](_0x3be685=>{const _0x25edc0=_0x1bdeab;let _0x51b9de=startingBalances['coins'][_0x25edc0(0x293)](_0x59915e=>_0x59915e[_0x25edc0(0x1f3)]===_0x3be685[_0x25edc0(0x1f3)]);if(_0x51b9de&&_0x51b9de[_0x25edc0(0x1f3)]&&_0x3be685[_0x25edc0(0x224)]!==0x0)_0x2ac034+=_0x51b9de[_0x25edc0(0x224)]*_0x3be685[_0x25edc0(0x274)];});let _0x471914=0x0;if(_0x98c012['length']!==0x0){let _0x248da7=_0x98c012[_0x98c012['length']-0x1];_0x471914=_0x248da7[_0x1bdeab(0x24d)];}_0x2ac034-=_0x471914;_0x2eeac8==='net-basecoin'&&(_0x3a860f=(_0x33fad5-_0x2ac034)/startingBalances[_0x1bdeab(0x1ab)]*0x64,_0x33fad5=_0x33fad5-_0x2ac034);if(_0x2eeac8===_0x1bdeab(0x165)){let _0x3a7ca2=_0x41e5bc===_0x1bdeab(0x230)?startingBalances[_0x1bdeab(0x131)]:startingBalances['usd'];if(_0x1f3b3f===_0x1bdeab(0x200)||_0x1f3b3f===_0x1bdeab(0x14d))_0x2ac034=_0x41e5bc==='EUR'?_0x2ac034*_0x5b55b6[_0x1bdeab(0x131)]:_0x2ac034*_0x5b55b6['usd'];else{if(usdBasecoins['includes'](_0x1f3b3f))_0x2ac034=_0x41e5bc===_0x1bdeab(0x230)?_0x2ac034*_0x5b55b6['eur']/_0x5b55b6[_0x1bdeab(0x25e)]:_0x2ac034;else _0x1f3b3f===_0x1bdeab(0x230)&&(_0x2ac034=_0x41e5bc===_0x1bdeab(0x230)?_0x2ac034:_0x2ac034*_0x5b55b6[_0x1bdeab(0x25e)]/_0x5b55b6[_0x1bdeab(0x131)]);}_0x3a860f=(_0x33fad5-_0x2ac034)/_0x3a7ca2*0x64,_0x33fad5=_0x33fad5-_0x2ac034;}if(_0x3a860f){if(_0x3a860f<0x64)_0x3a860f=_0x3a860f['toFixed'](0x2);else{if(_0x3a860f<0x3e8)_0x3a860f=_0x3a860f['toFixed'](0x1);else _0x3a860f=_0x3a860f['toFixed'](0x0);}}else _0x3a860f=Number('0')[_0x1bdeab(0x191)](0x2);if(_0x33fad5){if(Math[_0x1bdeab(0x1ca)](_0x33fad5)<0.000001)_0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x2);else{if(Math[_0x1bdeab(0x1ca)](_0x33fad5)<0.1)_0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x6);else{if(Math['abs'](_0x33fad5)<0x1)_0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x5);else{if(Math[_0x1bdeab(0x1ca)](_0x33fad5)<0xa)_0x33fad5=_0x33fad5['toFixed'](0x4);else{if(Math[_0x1bdeab(0x1ca)](_0x33fad5)<0x64)_0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x3);else{if(Math[_0x1bdeab(0x1ca)](_0x33fad5)<0x3e8)_0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x2);else _0x33fad5=_0x33fad5[_0x1bdeab(0x191)](0x2);}}}}}}else _0x33fad5=Number('0')[_0x1bdeab(0x191)](0x2);}else _0x3a860f=Number('0')[_0x1bdeab(0x191)](0x2);return{'value':_0x33fad5,'change':_0x3a860f,'leftTxt':_0x4272a7,'rightTxt':_0x23bd9d};}async function getStartingBalances(_0x130d31,_0x4a044b=!![]){const _0x4e7fa4=_0xd052f1;if(_0x130d31[_0x4e7fa4(0x280)]!==0x0){const [_0x3a0f5b,_0x182e86,_0x3b8fde]=getPerf(_0x130d31[0x0],!![]);let _0x4a75eb=[];config['portfolio'][_0x4e7fa4(0x158)](_0x53f18f=>{const _0x4e6fb9=_0x4e7fa4;let _0x2448b5=0x0,_0x5cff4d;config[_0x4e6fb9(0x19c)][_0x4e6fb9(0x158)](_0x3bde55=>{const _0x3a6764=_0x4e6fb9;let _0x1c40b0=_0x3bde55[_0x3a6764(0x294)]['find'](_0x16ef26=>_0x16ef26['coin']==_0x53f18f[_0x3a6764(0x1f3)]);if(_0x1c40b0){_0x2448b5+=_0x1c40b0[_0x3a6764(0x224)];if(!_0x5cff4d)_0x5cff4d=_0x1c40b0['price'];}}),_0x4a75eb[_0x4e6fb9(0x186)]({'coin':_0x53f18f['coin'],'number':_0x2448b5,'initialprice':_0x5cff4d});});const _0x346735={'basecoin':_0x3a0f5b,'eur':_0x182e86,'usd':_0x3b8fde,'coins':_0x4a75eb};if(_0x4a044b)proxyEmit(_0x4e7fa4(0x213),_0x346735);startingBalances=_0x346735;}}function headlessMode(_0x1a4173){const _0x13c413=_0xd052f1;let _0x3de6b2=_0x1a4173['portfolio'],_0x1558c9=_0x1a4173[_0x13c413(0x178)],_0xb20a2c=[];for(let _0x1f0f8f of _0x3de6b2){if(_0x1f0f8f['coin']!=config[_0x13c413(0x1ab)]){if(_0x1f0f8f['delta']>=_0x1558c9/0x64){if(_0x1f0f8f[_0x13c413(0x234)])_0xb20a2c[_0x13c413(0x186)](_0x1f0f8f);}else{if(_0x1f0f8f[_0x13c413(0x13f)]<=-_0x1558c9/0x64){if(_0x1f0f8f['valid'])_0xb20a2c[_0x13c413(0x186)](_0x1f0f8f);}}}}_0xb20a2c[_0x13c413(0x280)]>0x0&&(lockOrders==ORDERS[_0x13c413(0x14f)]&&!coolingDown&&_0xb20a2c[_0x13c413(0x158)](_0xdb71e5=>{const _0x47b207=_0x13c413;logger[_0x47b207(0x1b7)]('Trigger:\x20'+_0xdb71e5[_0x47b207(0x1f3)]+'\x20'+_0xdb71e5[_0x47b207(0x224)]+'\x20'+_0xdb71e5[_0x47b207(0x274)]+'\x20'+_0xdb71e5[_0x47b207(0x242)]+'%\x20'+_0xdb71e5[_0x47b207(0x16e)]+'%\x20'+(0x64*_0xdb71e5['delta'])[_0x47b207(0x191)](0x2)+_0x47b207(0x1e8)+_0x1558c9[_0x47b207(0x191)](0x2)+'%)');}),placeOrder(_0xb20a2c));}function notifyBalance(_0x254f0f){const _0x5c1d91=_0xd052f1;let _0xaa1376=_0x254f0f[_0x5c1d91(0x1c9)],_0x37cb2f=_0x254f0f[_0x5c1d91(0x178)],_0x987372=[];for(let _0x78793e of _0xaa1376){if(_0x78793e[_0x5c1d91(0x1f3)]!=config['basecoin']){if(_0x78793e[_0x5c1d91(0x13f)]>=_0x37cb2f/0x64){if(_0x78793e[_0x5c1d91(0x234)])_0x987372[_0x5c1d91(0x186)](_0x78793e);}else{if(_0x78793e[_0x5c1d91(0x13f)]<=-_0x37cb2f/0x64){if(_0x78793e[_0x5c1d91(0x234)])_0x987372[_0x5c1d91(0x186)](_0x78793e);}}}}if(_0x987372[_0x5c1d91(0x280)]>0x0){let _0x169109=_0x987372[_0x5c1d91(0x15e)](_0x163029=>_0x163029[_0x5c1d91(0x1f3)]);_0x169109['sort']();let _0x3dd8d7=_0x169109[_0x5c1d91(0x26b)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5c1d91(0x222),_0x5c1d91(0x197));lastCoinsToBalance=_0x3dd8d7;}}function symbolToCoin(_0x311a89){const _0x354c6d=_0xd052f1;let _0x4532e8;if(_0x311a89[_0x354c6d(0x153)]('/'+config[_0x354c6d(0x1ab)]))_0x4532e8=_0x311a89[_0x354c6d(0x203)]('/'+config[_0x354c6d(0x1ab)],'');if(_0x311a89[_0x354c6d(0x153)](config[_0x354c6d(0x1ab)]+'/'))_0x4532e8=_0x311a89['replace'](config[_0x354c6d(0x1ab)]+'/','');return _0x4532e8;}async function unlockOrders(){const _0x6ce417=_0xd052f1;if(allOrdersPlaced&&lockOrders==ORDERS[_0x6ce417(0x269)]){logger[_0x6ce417(0x1b7)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x6ce417(0x28e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x39b48b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x39b48b,validateOrdersState=_0x6ce417(0x247),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x6ce417(0x1b7)](_0x6ce417(0x217));}}async function validateOrders(_0x2ccd2c){const _0x9032cf=_0xd052f1;if(_0x2ccd2c)validateOrdersState=_0x2ccd2c;logger['debug'](_0x9032cf(0x1a2)+validateOrdersState+_0x9032cf(0x297)+(lockOrders==0x1?_0x9032cf(0x20e):lockOrders==0x2?_0x9032cf(0x1a5):_0x9032cf(0x27b)));let _0x351c5e=[],_0x5546b7=config[_0x9032cf(0x210)]==_0x9032cf(0x12d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x9032cf(0x1d3)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x9032cf(0x269)])return;logger[_0x9032cf(0x1b7)](_0x9032cf(0x23f)+validateOrdersState),lastOrders[_0x9032cf(0x158)](_0x5dd349=>{const _0xf7313d=_0x9032cf;let _0x47e144=![];_0x5dd349[_0xf7313d(0x225)]>0x0&&(_0x47e144=!![]),_0x351c5e[_0xf7313d(0x186)](_0x47e144),_0x47e144&&config['ordertype']!=_0xf7313d(0x12d)&&logHistory(_0xf7313d(0x1f0),'Order\x20filled:\x20'+_0x5dd349[_0xf7313d(0x183)]+'\x20'+_0x5dd349[_0xf7313d(0x133)]+'\x20#'+formatResult(_0x5dd349['filled'],0x8)+'\x20@'+formatResult(_0x5dd349[_0xf7313d(0x1e4)],0x8));}),_0x351c5e['forEach']((_0x51a0b2,_0x4ad934)=>{if(_0x51a0b2)lastOrders['splice'](_0x4ad934,0x1);}),persistOpenOrders(lastOrders);const _0x5a57c6=coolingDown?_0x9032cf(0x272):_0x9032cf(0x181);if(validateOrdersState==_0x9032cf(0x247)){validateOrdersState=_0x9032cf(0x24a);if(_0x351c5e['includes'](![])){if(config[_0x9032cf(0x210)]==_0x9032cf(0x12d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x9032cf(0x24a)){if(_0x351c5e[_0x9032cf(0x153)](![])){}else{if(allOrdersPlaced){if(config[_0x9032cf(0x210)]==_0x9032cf(0x12d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x9032cf(0x227))_0x351c5e[_0x9032cf(0x153)](![])&&(config[_0x9032cf(0x210)]==_0x9032cf(0x12d)?logHistory(_0x9032cf(0x1d9),_0x9032cf(0x25d)+Math[_0x9032cf(0x262)](_0x5546b7*validateOrderInterval/0xea60)+_0x9032cf(0x29c)+_0x5a57c6):(await cancelOrders(),logHistory('success',_0x9032cf(0x257)+Math['round'](_0x5546b7*validateOrderInterval/0xea60)+_0x9032cf(0x29c)+_0x5a57c6))),await unlockOrders();else{if(validateOrdersState==_0x9032cf(0x136)){if(config[_0x9032cf(0x210)]!=_0x9032cf(0x12d))logHistory(_0x9032cf(0x1d9),_0x9032cf(0x1f4)+_0x5a57c6);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x776748=>{const _0x5cb9a1=_0x2bde;try{const _0x372046=await exchange[_0x5cb9a1(0x267)](_0x776748['orderId'],_0x776748[_0x5cb9a1(0x183)]);}catch(_0x326aaf){if(_0x326aaf[_0x5cb9a1(0x192)]()[_0x5cb9a1(0x153)]('OrderNotFound')){}else await handleError(_0x326aaf,_0x5cb9a1(0x176));}});}async function initCoinResults(_0x52ad60){const _0x1fc26a=_0xd052f1;_0x52ad60?logger['debug'](_0x1fc26a(0x291)+_0x52ad60):logger[_0x1fc26a(0x1b7)]('Initializing\x20coin\x20results'),config['portfolio'][_0x1fc26a(0x158)](_0x264c5a=>{const _0x3a9c59=_0x1fc26a;if(!_0x264c5a[_0x3a9c59(0x1e1)]&&_0x264c5a['coin']!=config[_0x3a9c59(0x1ab)]){const _0x14e1c7=currentCoins[_0x3a9c59(0x293)](_0x46ef0a=>_0x46ef0a[_0x3a9c59(0x1f3)]==_0x264c5a[_0x3a9c59(0x1f3)]),_0x16eaf7=global[_0x3a9c59(0x148)][noslash(_0x264c5a[_0x3a9c59(0x183)])];let _0x422c72=_0x14e1c7?_0x14e1c7[_0x3a9c59(0x224)]:null,_0x2f3ef9=_0x264c5a[_0x3a9c59(0x1b6)]?0x1/_0x16eaf7:_0x16eaf7,_0x33ba62;config['liquidity'][_0x3a9c59(0x158)](_0x1fbbe0=>{const _0x4f63aa=_0x3a9c59;!_0x33ba62&&(_0x33ba62=_0x1fbbe0['changes'][_0x4f63aa(0x293)](_0xd26cb1=>_0xd26cb1[_0x4f63aa(0x1f3)]==_0x264c5a[_0x4f63aa(0x1f3)]),_0x33ba62&&(_0x422c72=_0x33ba62[_0x4f63aa(0x224)],_0x2f3ef9=_0x33ba62[_0x4f63aa(0x1e4)]));});let _0x4d23cf=dbCoinResults[_0x3a9c59(0x1dd)](_0x3a9c59(0x172))[_0x3a9c59(0x293)]({'coin':_0x264c5a[_0x3a9c59(0x1f3)]})[_0x3a9c59(0x29b)]();if(!_0x4d23cf){const _0x544a2c={'coin':_0x264c5a[_0x3a9c59(0x1f3)],'number':_0x422c72,'breakeven':_0x2f3ef9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3a9c59(0x1dd)](_0x3a9c59(0x172))[_0x3a9c59(0x186)](_0x544a2c)['write']();}else{if(_0x52ad60&&_0x264c5a[_0x3a9c59(0x1f3)]==_0x52ad60){const _0x336d45={'coin':_0x264c5a[_0x3a9c59(0x1f3)],'number':_0x422c72,'breakeven':_0x2f3ef9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3a9c59(0x172))[_0x3a9c59(0x293)]({'coin':_0x264c5a[_0x3a9c59(0x1f3)]})[_0x3a9c59(0x142)](_0x336d45)['write']();}}}});}async function updateCoinResults(_0x4b4a34,_0x53d827=![]){const _0x4b5125=_0xd052f1;let _0x5c51c9,_0x30330e,_0x118f2,_0x16b70c,_0x1fc111,_0x1e9f75,_0x4104a2=dbCoinResults[_0x4b5125(0x1dd)](_0x4b5125(0x172))[_0x4b5125(0x293)]({'coin':_0x4b4a34['coin']})[_0x4b5125(0x29b)](),_0x3ac4dd=![];_0x4104a2&&Object[_0x4b5125(0x258)](_0x4104a2)['forEach'](([_0x3727ca,_0x4d0115])=>{if(_0x4d0115==null)_0x3ac4dd=!![];});(!_0x4104a2||_0x3ac4dd)&&(await initCoinResults(_0x4b4a34[_0x4b5125(0x1f3)]),_0x4104a2=dbCoinResults[_0x4b5125(0x1dd)](_0x4b5125(0x172))[_0x4b5125(0x293)]({'coin':_0x4b4a34[_0x4b5125(0x1f3)]})[_0x4b5125(0x29b)]());_0x4b4a34[_0x4b5125(0x1b6)]&&(_0x1e9f75={'filled':_0x4b4a34['filled']*_0x4b4a34[_0x4b5125(0x1e4)],'amount':_0x4b4a34['filled']*_0x4b4a34[_0x4b5125(0x1e4)],'side':_0x4b4a34['side']==_0x4b5125(0x1d0)?_0x4b5125(0x1a3):_0x4b5125(0x1d0),'price':0x1/_0x4b4a34['price']},_0x4b4a34={..._0x4b4a34,..._0x1e9f75});_0x53d827?_0x30330e=_0x4b4a34[_0x4b5125(0x133)]==_0x4b5125(0x1a3)?_0x4104a2[_0x4b5125(0x224)]+_0x4b4a34[_0x4b5125(0x225)]:_0x4104a2[_0x4b5125(0x224)]-_0x4b4a34[_0x4b5125(0x225)]:_0x30330e=await getCoinNumber(_0x4b4a34['coin']);if(_0x4b4a34[_0x4b5125(0x1d2)]&&_0x4b4a34[_0x4b5125(0x1d2)]['currency']==config[_0x4b5125(0x1ab)])_0x5c51c9=_0x4b4a34['fee'][_0x4b5125(0x17c)];else{if(_0x4b4a34['fee']&&_0x4b4a34['fee'][_0x4b5125(0x20d)]==_0x4b5125(0x10f)&&!_0x53d827)_0x5c51c9=_0x4b4a34['fee'][_0x4b5125(0x17c)]*global[_0x4b5125(0x148)][_0x4b5125(0x10f)+config[_0x4b5125(0x1ab)]];else _0x5c51c9=defaultFee*_0x4b4a34[_0x4b5125(0x225)]*_0x4b4a34[_0x4b5125(0x1e4)];}_0x4b4a34['side']=='buy'?(_0x118f2=_0x30330e!=0x0?(_0x4104a2['breakeven']*_0x4104a2[_0x4b5125(0x224)]+_0x4b4a34[_0x4b5125(0x1e4)]*(_0x30330e-_0x4104a2[_0x4b5125(0x224)])+_0x5c51c9)/_0x30330e:0x0,_0x16b70c=_0x4104a2['realized']):(_0x118f2=_0x30330e!=0x0?(_0x4104a2[_0x4b5125(0x215)]*_0x4104a2[_0x4b5125(0x224)]-_0x4b4a34[_0x4b5125(0x1e4)]*(_0x4104a2['number']-_0x30330e)+_0x5c51c9)/_0x30330e:0x0,_0x16b70c=_0x4104a2[_0x4b5125(0x25f)]+(_0x4b4a34[_0x4b5125(0x1e4)]-_0x4104a2[_0x4b5125(0x215)])*_0x4b4a34[_0x4b5125(0x225)]);_0x1fc111=(_0x4b4a34[_0x4b5125(0x1e4)]-_0x118f2-_0x5c51c9/_0x4b4a34[_0x4b5125(0x225)])*_0x30330e;let _0x34c092={'coin':_0x4b4a34[_0x4b5125(0x1f3)],'number':_0x30330e,'breakeven':formatResult(_0x118f2,0x8),'realized':formatResult(_0x16b70c,0x8),'unrealized':formatResult(_0x1fc111,0x8),'fees':formatResult(_0x4104a2[_0x4b5125(0x147)]+_0x5c51c9,0x8),'sells':_0x4b4a34[_0x4b5125(0x133)]==_0x4b5125(0x1d0)?_0x4104a2['sells']+0x1:_0x4104a2['sells'],'buys':_0x4b4a34[_0x4b5125(0x133)]==_0x4b5125(0x1a3)?_0x4104a2[_0x4b5125(0x1d7)]+0x1:_0x4104a2[_0x4b5125(0x1d7)]};dbCoinResults['get'](_0x4b5125(0x172))[_0x4b5125(0x293)]({'coin':_0x4b4a34[_0x4b5125(0x1f3)]})[_0x4b5125(0x142)](_0x34c092)[_0x4b5125(0x204)]();if(!_0x53d827){if(_0x4b4a34[_0x4b5125(0x1d2)]&&_0x4b4a34[_0x4b5125(0x1d2)][_0x4b5125(0x20d)]==_0x4b5125(0x10f)){const _0x15e376=currentCoins['find'](_0x2bc32b=>_0x2bc32b['coin']==_0x4b5125(0x10f));if(_0x15e376){let _0x297d08=dbCoinResults[_0x4b5125(0x1dd)]('coins')[_0x4b5125(0x293)]({'coin':_0x4b5125(0x10f)})[_0x4b5125(0x29b)]();_0x34c092={..._0x297d08,'number':_0x15e376[_0x4b5125(0x224)]},dbCoinResults['get'](_0x4b5125(0x172))[_0x4b5125(0x293)]({'coin':'BNB'})[_0x4b5125(0x142)](_0x34c092)[_0x4b5125(0x204)]();}}}}async function placeOrder(_0xa095b1){const _0x515747=_0xd052f1,_0x255eb8=config['ordertype']==_0x515747(0x12d)?_0x515747(0x12d):'limit';if(lockOrders==ORDERS[_0x515747(0x14f)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x515747(0x269)],allOrdersPlaced=![],validateOrdersState=_0x515747(0x247);let _0x1411be=![];lastOrders=[];for(const _0x37d4cc of _0xa095b1){let _0x330c55,_0x3dbd2f,_0x452f7f,_0x24adc4,_0x4536b2,_0x50c1ba=_0x37d4cc['symbol'];try{const _0x123a44=await exchange['fetchTicker'](_0x50c1ba);_0x330c55=_0x37d4cc[_0x515747(0x1b6)]?0x1/_0x37d4cc[_0x515747(0x274)]:_0x37d4cc[_0x515747(0x274)],_0x3dbd2f=_0x123a44[_0x515747(0x1b0)],_0x452f7f=_0x123a44[_0x515747(0x1aa)];_0x37d4cc[_0x515747(0x1b6)]?(_0x24adc4=_0x37d4cc['side']==_0x515747(0x1a3)?_0x515747(0x1d0):_0x515747(0x1a3),_0x4536b2=Math['abs'](_0x37d4cc[_0x515747(0x1b8)])/_0x330c55):(_0x24adc4=_0x37d4cc[_0x515747(0x133)],_0x4536b2=Math[_0x515747(0x1ca)](_0x37d4cc[_0x515747(0x1b8)]));_0x255eb8=='limit'&&(config[_0x515747(0x210)]==_0x515747(0x202)&&(_0x330c55=_0x24adc4==_0x515747(0x1a3)?_0x3dbd2f:_0x452f7f),config['ordertype']=='limit-low'&&(_0x330c55=_0x24adc4==_0x515747(0x1a3)?_0x452f7f:_0x3dbd2f));_0x4536b2=formatResult(_0x4536b2,0x8),_0x330c55=formatResult(_0x330c55,0x8);const _0x11113a=_0x24adc4=='sell'?config[_0x515747(0x281)]?String['fromCodePoint']('0x'+config[_0x515747(0x281)])+'\x20':'':config[_0x515747(0x231)]?String[_0x515747(0x145)]('0x'+config[_0x515747(0x231)])+'\x20':'',_0xf6936f=_0x255eb8==_0x515747(0x12d)?_0x515747(0x235):config[_0x515747(0x210)]==_0x515747(0x202)?_0x515747(0x13b):_0x515747(0x241),_0x2d31c4=(Math[_0x515747(0x12b)](Math[_0x515747(0x159)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x515747(0x186)]({'customId':_0x2d31c4,'symbol':_0x50c1ba,'coin':_0x37d4cc[_0x515747(0x1f3)],'amount':_0x4536b2,'price':_0x330c55,'side':_0x24adc4,'reverse':_0x37d4cc['reverse'],'filled':0x0});if(_0x255eb8=='market')logHistory(_0x515747(0x1f0),''+_0x11113a+_0xf6936f+_0x515747(0x23b)+_0x50c1ba+'\x20'+_0x24adc4+'\x20#'+formatResult(_0x4536b2,0x8)+'\x20@'+formatResult(_0x330c55,0x8));else logHistory(_0x515747(0x1f0),''+_0x11113a+_0xf6936f+_0x515747(0x23b)+_0x50c1ba+'\x20'+_0x24adc4+'\x20#'+formatResult(_0x4536b2,0x8)+'\x20@'+formatResult(_0x330c55,0x8));let _0x220514;_0x255eb8==_0x515747(0x12d)?_0x24adc4==_0x515747(0x1a3)&&[_0x515747(0x199),_0x515747(0x1b3),_0x515747(0x14c),_0x515747(0x19e),_0x515747(0x117)][_0x515747(0x153)](config[_0x515747(0x22e)])?_0x220514=await exchange[_0x515747(0x10b)](_0x50c1ba,_0x255eb8,_0x24adc4,_0x4536b2,_0x330c55):_0x220514=await exchange[_0x515747(0x10b)](_0x50c1ba,_0x255eb8,_0x24adc4,_0x4536b2,undefined):_0x220514=await exchange[_0x515747(0x10b)](_0x50c1ba,_0x255eb8,_0x24adc4,_0x4536b2,_0x330c55);logger['debug']('ID:\x20'+_0x220514['id']+_0x515747(0x23c)+_0x2d31c4);const _0x2b14cb=lastOrders['length']-0x1;if(_0x2b14cb>=0x0&&lastOrders[_0x2b14cb][_0x515747(0x243)]==_0x2d31c4){lastOrders[_0x2b14cb][_0x515747(0x244)]=_0x220514['id'];if(_0x220514['amount'])lastOrders[_0x2b14cb][_0x515747(0x25a)]=_0x220514[_0x515747(0x25a)];if(_0x220514[_0x515747(0x1e4)])lastOrders[_0x2b14cb][_0x515747(0x1e4)]=_0x220514[_0x515747(0x1e4)];lastOrders[_0x2b14cb][_0x515747(0x1d2)]=_0x220514['fee'];}if(config[_0x515747(0x283)]!=0x0){let _0x1d0844=null;if(cooldownTracker[_0x515747(0x280)]==config[_0x515747(0x283)]-0x1)_0x1d0844=cooldownTracker['shift']();const _0x39df73=getTimeStamp();cooldownTracker['push'](_0x39df73);if(_0x1d0844){const _0x3f0e4a=fns['differenceInSeconds'](new Date(_0x39df73),new Date(_0x1d0844));if(_0x3f0e4a<cooldownInterval){logHistory(_0x515747(0x1da),_0x515747(0x19a)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x398bbc){if(_0x398bbc[_0x515747(0x192)]()[_0x515747(0x153)](_0x515747(0x167)))lastOrders=lastOrders[_0x515747(0x254)](_0x32de3c=>_0x32de3c['symbol']!=_0x50c1ba),logHistory('error',_0x515747(0x22a)+_0x50c1ba),_0x1411be=!![];else{if(_0x398bbc[_0x515747(0x192)]()['includes'](_0x515747(0x182)))lastOrders=lastOrders[_0x515747(0x254)](_0x29be22=>_0x29be22[_0x515747(0x183)]!=_0x50c1ba),logHistory('error',_0x515747(0x232)+_0x50c1ba),_0x1411be=!![];else{if(_0x398bbc[_0x515747(0x192)]()[_0x515747(0x153)]('InvalidOrder'))lastOrders=lastOrders[_0x515747(0x254)](_0x579d7b=>_0x579d7b[_0x515747(0x183)]!=_0x50c1ba),logHistory(_0x515747(0x1da),'Order\x20is\x20invalid:\x20'+_0x50c1ba),logger['debug'](_0x398bbc),_0x1411be=!![];else _0x398bbc[_0x515747(0x192)]()[_0x515747(0x153)](_0x515747(0x1e5))?(lastOrders=lastOrders[_0x515747(0x254)](_0x152259=>_0x152259[_0x515747(0x183)]!=_0x50c1ba),logHistory('error',_0x515747(0x22a)+_0x50c1ba),_0x1411be=!![]):(lastOrders=lastOrders[_0x515747(0x254)](_0x42866f=>_0x42866f['symbol']!=_0x50c1ba),await handleError(_0x398bbc,_0x515747(0x169),_0x50c1ba));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x515747(0x280)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x491774=config[_0x515747(0x210)]==_0x515747(0x12d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x21bd21=_0x515747;validateOrders(_0x21bd21(0x227));},_0x491774);}else unlockOrders();_0x1411be&&config['headless']&&(logHistory(_0x515747(0x1da),_0x515747(0x20b)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x515747(0x130)));}else{if(coolingDown)!config[_0x515747(0x175)]&&logHistory(_0x515747(0x1da),_0x515747(0x295));else lockOrders!=ORDERS[_0x515747(0x14f)]&&(!config[_0x515747(0x175)]&&(config[_0x515747(0x210)]==_0x515747(0x12d)?logHistory(_0x515747(0x1da),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x515747(0x1da),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1c43dc){const _0x4d2ad9=_0xd052f1,_0x5eb366={...config,'openOrders':_0x1c43dc};let _0x288ac5=dbConfig[_0x4d2ad9(0x1dd)]('bot')[_0x4d2ad9(0x293)]({'botID':botID})['value']();_0x288ac5&&dbConfig[_0x4d2ad9(0x1dd)](_0x4d2ad9(0x1e7))[_0x4d2ad9(0x293)]({'botID':botID})[_0x4d2ad9(0x142)](_0x5eb366)[_0x4d2ad9(0x204)]();}function restoreOrders(){const _0x5ba0e6=_0xd052f1;let _0x1c8375;config['openOrders']&&allOpenOrders['forEach'](_0x17e5f9=>{const _0x1e43c0=_0x2bde,_0x574d6f=config[_0x1e43c0(0x29d)][_0x1e43c0(0x293)](_0x581ef5=>_0x581ef5['orderId']==_0x17e5f9['id']);_0x574d6f&&(lastOrders[_0x1e43c0(0x186)](_0x574d6f),_0x1c8375=_0x17e5f9[_0x1e43c0(0x214)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0xf0596e=new Date()['getTime'](),_0x4dcf49=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x5ba0e6(0x1d3)]*0x3c*0x3e8;if(_0x1c8375+_0x4dcf49>_0xf0596e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x19a157=_0x5ba0e6;validateOrders(_0x19a157(0x227));},_0x1c8375+_0x4dcf49-_0xf0596e);}else validateOrders(_0x5ba0e6(0x227));}}async function sendMetricsTelegram(){const _0x4d6b72=_0xd052f1;if(!coinsLoaded){process[_0x4d6b72(0x21d)]({'telegrammsg':_0x4d6b72(0x26a)},_0x511fd1=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1c014f='';if(config[_0x4d6b72(0x1a1)])_0x1c014f=_0x4d6b72(0x205)+config[_0x4d6b72(0x11e)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x1c014f=_0x4d6b72(0x123)+botID+_0x4d6b72(0x1a0);const _0x57cbf7=getKPIs(_0x4d6b72(0x1ab)),_0x3d64db=getKPIs('fiat',config['fiat']),_0x74511c=getKPIs(_0x4d6b72(0x271)),_0x123ff3=getKPIs(_0x4d6b72(0x165),config[_0x4d6b72(0x1ea)]);_0x1c014f+='<pre>',_0x1c014f+=_0x57cbf7['leftTxt']+_0x4d6b72(0x18a)+_0x57cbf7['value']+'\x0a',_0x1c014f+=_0x57cbf7[_0x4d6b72(0x196)]+':\x20'+_0x57cbf7[_0x4d6b72(0x1cd)]+'%\x0a',_0x1c014f+=_0x3d64db[_0x4d6b72(0x132)]+_0x4d6b72(0x18a)+_0x3d64db[_0x4d6b72(0x29b)]+'\x0a',_0x1c014f+=_0x3d64db[_0x4d6b72(0x196)]+':\x20'+_0x3d64db['change']+'%\x0a',_0x1c014f+=_0x74511c[_0x4d6b72(0x132)]+':\x20'+_0x74511c[_0x4d6b72(0x29b)]+'\x20('+config[_0x4d6b72(0x1ab)]+')\x0a',_0x1c014f+=_0x74511c[_0x4d6b72(0x196)]+':\x20'+_0x74511c[_0x4d6b72(0x1cd)]+_0x4d6b72(0x1e8)+config['basecoin']+')\x0a',_0x1c014f+=_0x123ff3[_0x4d6b72(0x132)]+':\x20'+_0x123ff3['value']+'\x20('+config['fiat']+')\x0a',_0x1c014f+=_0x123ff3[_0x4d6b72(0x196)]+':\x20'+_0x123ff3[_0x4d6b72(0x1cd)]+_0x4d6b72(0x1e8)+config[_0x4d6b72(0x1ea)]+')\x0a',_0x1c014f+=_0x4d6b72(0x171),process[_0x4d6b72(0x21d)]({'telegrammsg':_0x1c014f},_0x2d2e9a=>{});}async function sendPortfolioTelegram(){const _0x11dbaa=_0xd052f1;if(!coinsLoaded){process[_0x11dbaa(0x21d)]({'telegrammsg':_0x11dbaa(0x26a)},_0x48ac6d=>{});return;}let _0x5d4633='';if(config[_0x11dbaa(0x1a1)])_0x5d4633=_0x11dbaa(0x205)+config[_0x11dbaa(0x11e)]+_0x11dbaa(0x1ff);else _0x5d4633=_0x11dbaa(0x123)+botID+_0x11dbaa(0x1ff);_0x5d4633+=_0x11dbaa(0x13c),_0x5d4633+=_0x11dbaa(0x1c0),_0x5d4633+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5d4633+='-------------------------------\x0a',currentCoins['forEach'](_0x24a756=>{const _0x284dc1=_0x11dbaa;_0x5d4633+=_0x24a756[_0x284dc1(0x1f3)]['padEnd'](0x7)+'|\x20'+formatPad(_0x24a756[_0x284dc1(0x242)],0x2,0x6)+'|\x20'+formatPad(_0x24a756['target'],0x2,0x6)+'|\x20'+formatPad(_0x24a756['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5d4633+=_0x11dbaa(0x171),process[_0x11dbaa(0x21d)]({'telegrammsg':_0x5d4633},_0x103207=>{});}function formatPad(_0xaffc97,_0x2ac170,_0x32d07d){const _0x1904e4=_0xd052f1,_0x279be3=formatResultString(_0xaffc97,_0x2ac170);return _0x279be3?_0x279be3[_0x1904e4(0x166)](_0x32d07d):''['padStart'](_0x32d07d);}function logHistory(_0x57baeb,_0x4bfe80,_0x2b814c=''){const _0x537925=_0xd052f1;logger[_0x537925(0x13d)](''+_0x4bfe80);let _0x215cae={'time':getTimeStamp(),'type':_0x57baeb,'event':_0x4bfe80};dbLogs['get'](_0x537925(0x245))[_0x537925(0x186)](_0x215cae)[_0x537925(0x204)]();if(_0x2b814c=='')_0x2b814c=_0x4bfe80;proxyEmit(_0x537925(0x288),{'log':_0x215cae,'summary':_0x2b814c}),process[_0x537925(0x21d)]({'telegram':{..._0x215cae,'botname':config['botname'],'showname':config[_0x537925(0x1a1)]}},_0x5cc95c=>{});}function emitHistory(_0x4cb861={}){const _0x9797a7=_0xd052f1;Object[_0x9797a7(0x1a9)](_0x4cb861)['length']==0x0&&(_0x4cb861={'type':[_0x9797a7(0x1f0),'event'],'event':'','page':0x1});if(_0x4cb861['type'][_0x9797a7(0x153)](_0x9797a7(0x288)))_0x4cb861[_0x9797a7(0x150)][_0x9797a7(0x1b9)](_0x4cb861['type'][_0x9797a7(0x11c)](_0x9797a7(0x288)),0x1,_0x9797a7(0x1da),_0x9797a7(0x222),_0x9797a7(0x1d9));if(dbLogs[_0x9797a7(0x275)](_0x9797a7(0x245))[_0x9797a7(0x29b)]()){let _0x74a96b=dbLogs[_0x9797a7(0x1dd)]('logs')[_0x9797a7(0x254)](_0x1bacf3=>{const _0x163d8c=_0x9797a7;if(_0x4cb861[_0x163d8c(0x150)][_0x163d8c(0x280)]==0x0)return![];else return _0x4cb861[_0x163d8c(0x150)][_0x163d8c(0x153)](_0x1bacf3[_0x163d8c(0x150)]);})[_0x9797a7(0x254)](_0x5966b3=>{const _0xb9cd5b=_0x9797a7;if(_0x4cb861[_0xb9cd5b(0x288)]=='')return!![];else return _0x5966b3[_0xb9cd5b(0x288)]['toLowerCase']()[_0xb9cd5b(0x153)](_0x4cb861[_0xb9cd5b(0x288)][_0xb9cd5b(0x1b2)]());})[_0x9797a7(0x1fb)]('time'),_0x54664c=_0x74a96b['value']()[_0x9797a7(0x280)];_0x74a96b=_0x74a96b[_0x9797a7(0x1b6)]()['slice']((_0x4cb861[_0x9797a7(0x1b5)]-0x1)*logPageSize,_0x4cb861[_0x9797a7(0x1b5)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit('event-history',{'logs':_0x74a96b,'total':_0x54664c});}else proxyEmit(_0x9797a7(0x27f),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5dce9d){const _0x3d6f01=_0xd052f1;if(dbLogs[_0x3d6f01(0x275)](_0x3d6f01(0x245))[_0x3d6f01(0x29b)]()){const _0x2bc24e=dbLogs['get'](_0x3d6f01(0x245))[_0x3d6f01(0x1fb)](_0x3d6f01(0x11a))[_0x3d6f01(0x254)](_0x807c14=>{const _0xf4d454=_0x3d6f01;return _0x807c14[_0xf4d454(0x150)]=='order';})['value']();dbLogs[_0x3d6f01(0x1dd)](_0x3d6f01(0x245))[_0x3d6f01(0x177)]()[_0x3d6f01(0x204)](),dbLogs[_0x3d6f01(0x1dd)](_0x3d6f01(0x245))[_0x3d6f01(0x142)](_0x2bc24e)[_0x3d6f01(0x204)](),emitHistory(_0x5dce9d);}}async function pauseBot(){const _0x302b85=_0xd052f1,_0x56d6f3=new Date()[_0x302b85(0x1f9)]();if(!lastErrorShown||_0x56d6f3-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x56d6f3;!lastBotPause?(lastBotPause=_0x56d6f3,consecutivePauses=0x1):(_0x56d6f3-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x302b85(0x21d)]({'stop':_0x302b85(0x264)},_0x2af2f0=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x302b85(0x1f9)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x4edce4=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x493371,_0x2542e1){const _0x85e71=_0xd052f1;if(botPaused)return;const _0x36652a=config[_0x85e71(0x22e)]||'Exchange';if(_0x2542e1)logger[_0x85e71(0x1b7)]('Exception\x20thrown\x20in\x20'+_0x2542e1);const _0x4a68dc=()=>{const _0x26798c=_0x85e71;loading[_0x26798c(0x1da)]=!![],emitLoadingProgress();};if(_0x493371[_0x85e71(0x192)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x85e71(0x1da),_0x36652a+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x4a68dc();else{if(_0x493371[_0x85e71(0x192)]()[_0x85e71(0x153)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x85e71(0x1da),_0x36652a+_0x85e71(0x15a)),_0x4a68dc();else _0x493371[_0x85e71(0x192)]()[_0x85e71(0x153)]('AuthenticationError')?(logHistory(_0x85e71(0x1da),_0x36652a+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x85e71(0x1da),_0x85e71(0x164)),_0x4a68dc()):await handleError(_0x493371,null);}}async function handleError(_0x22ea86,_0x4d8186,_0x3a27f4=''){const _0x381426=_0xd052f1;if(botPaused)return;const _0x1624a4=config['exchange']||_0x381426(0x1f7);if(_0x4d8186)logger[_0x381426(0x1b7)](_0x381426(0x106)+_0x4d8186);if(_0x22ea86[_0x381426(0x192)]()['includes'](_0x381426(0x251))||_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)](_0x381426(0x229)))logHistory(_0x381426(0x1da),_0x1624a4+_0x381426(0x27e)+pauseBotMsg),await pauseBot();else{if(_0x22ea86[_0x381426(0x192)]()['includes']('ExchangeNotAvailable')||_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)](_0x381426(0x1d1)))logHistory(_0x381426(0x1da),_0x1624a4+_0x381426(0x286)+pauseBotMsg),await pauseBot();else{if(_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)]('RequestTimeout'))logHistory('error',_0x1624a4+_0x381426(0x248)+pauseBotMsg),await pauseBot();else{if(_0x22ea86['toString']()[_0x381426(0x153)](_0x381426(0x1dc)))logHistory(_0x381426(0x1da),_0x1624a4+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)](_0x381426(0x25c)))logHistory(_0x381426(0x1da),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x381426(0x1da),_0x381426(0x296)),await killBot();else{if(_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)](_0x381426(0x290)))logHistory(_0x381426(0x1da),_0x381426(0x1cb)),logHistory(_0x381426(0x1da),_0x381426(0x296)),await killBot();else{if(_0x22ea86 instanceof ccxt[_0x381426(0x21c)])logHistory('error',_0x1624a4+'\x20network\x20error'+pauseBotMsg),logger['debug'](_0x381426(0x263),_0x22ea86),await pauseBot();else{if(_0x22ea86[_0x381426(0x192)]()['includes'](_0x381426(0x24b)))logHistory('error',_0x1624a4+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x381426(0x1da),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x22ea86['toString']()[_0x381426(0x153)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x381426(0x1da),_0x1624a4+_0x381426(0x1f6)),logHistory(_0x381426(0x1da),_0x381426(0x296)),await killBot();else{if(_0x22ea86['toString']()[_0x381426(0x153)](_0x381426(0x19b)))logHistory(_0x381426(0x1da),_0x1624a4+_0x381426(0x1fc)),logHistory('error',_0x381426(0x296)),await killBot();else{if(_0x22ea86[_0x381426(0x192)]()['includes'](_0x381426(0x180)))logHistory(_0x381426(0x1da),_0x1624a4+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x381426(0x1da),_0x381426(0x296)),await killBot();else{if(_0x22ea86[_0x381426(0x192)]()[_0x381426(0x153)]('InsufficientFunds'))logHistory(_0x381426(0x1da),_0x381426(0x139)+_0x3a27f4);else _0x22ea86 instanceof ccxt[_0x381426(0x26f)]?(logHistory(_0x381426(0x1da),_0x1624a4+'\x20exchange\x20error'),logger[_0x381426(0x1b7)](_0x381426(0x263),_0x22ea86)):(logHistory(_0x381426(0x1da),_0x381426(0x1a7)+pauseBotMsg),logger[_0x381426(0x1b7)](_0x381426(0x263),_0x22ea86),await pauseBot());}}}}}}}}}}}}function formatResult(_0x3f9806,_0x307134){return parseFloat(_0x3f9806['toFixed'](_0x307134));}function formatResultTruncate(_0x8e7dd8,_0x275d09){const _0x20a234=_0xd052f1;let _0x1225be=formatResultString(_0x8e7dd8,0xa),_0x2cafbe=_0x1225be[_0x20a234(0x11c)]('.');return _0x2cafbe!=-0x1&&(_0x1225be=_0x1225be[_0x20a234(0x16d)](0x0,_0x2cafbe+_0x275d09+0x1)),Number(_0x1225be);}function formatResultString(_0x7f43f9,_0x341a11){const _0x23c45f=_0xd052f1;let _0x527251;if(!(''+_0x7f43f9)[_0x23c45f(0x153)]('e'))_0x527251=+(Math['round'](_0x7f43f9+'e+'+_0x341a11)+'e-'+_0x341a11);else{let _0x34ae16=(''+_0x7f43f9)[_0x23c45f(0x174)]('e'),_0x43210d='';+_0x34ae16[0x1]+_0x341a11>0x0&&(_0x43210d='+'),_0x527251=+(Math['round'](+_0x34ae16[0x0]+'e'+_0x43210d+(+_0x34ae16[0x1]+_0x341a11))+'e-'+_0x341a11);}return Number(_0x527251)['toFixed'](_0x341a11);}function getServerTime(){const _0x4f67fb=_0xd052f1,_0x5e140c=new Date();return _0x5e140c['getFullYear']()+'/'+(_0x5e140c['getMonth']()+0x1)[_0x4f67fb(0x192)]()[_0x4f67fb(0x166)](0x2,'0')+'/'+_0x5e140c[_0x4f67fb(0x1db)]()[_0x4f67fb(0x192)]()['padStart'](0x2,'0')+'\x20'+_0x5e140c[_0x4f67fb(0x18b)]()[_0x4f67fb(0x192)]()[_0x4f67fb(0x166)](0x2,'0')+':'+_0x5e140c[_0x4f67fb(0x17e)]()[_0x4f67fb(0x192)]()[_0x4f67fb(0x166)](0x2,'0')+':'+_0x5e140c[_0x4f67fb(0x221)]()[_0x4f67fb(0x192)]()[_0x4f67fb(0x166)](0x2,'0');}function getTimeStamp(){const _0x36c8fa=_0xd052f1,_0x26ab2c=shiftedTime();return _0x26ab2c['getFullYear']()+'/'+(_0x26ab2c[_0x36c8fa(0x23d)]()+0x1)['toString']()[_0x36c8fa(0x166)](0x2,'0')+'/'+_0x26ab2c['getDate']()[_0x36c8fa(0x192)]()[_0x36c8fa(0x166)](0x2,'0')+'\x20'+_0x26ab2c['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x26ab2c[_0x36c8fa(0x17e)]()[_0x36c8fa(0x192)]()[_0x36c8fa(0x166)](0x2,'0')+':'+_0x26ab2c[_0x36c8fa(0x221)]()[_0x36c8fa(0x192)]()[_0x36c8fa(0x166)](0x2,'0');}function getDate(){const _0x3e312e=_0xd052f1,_0x50da54=shiftedTime();return _0x50da54[_0x3e312e(0x26d)]()+'/'+(_0x50da54[_0x3e312e(0x23d)]()+0x1)[_0x3e312e(0x192)]()[_0x3e312e(0x166)](0x2,'0')+'/'+_0x50da54[_0x3e312e(0x1db)]()[_0x3e312e(0x192)]()['padStart'](0x2,'0');}function getHour(){const _0x777d=_0xd052f1,_0x49969c=shiftedTime();return _0x49969c['getHours']()[_0x777d(0x192)]()['padStart'](0x2,'0');}function sleep(_0x463751){return new Promise(_0x2e059b=>setTimeout(_0x2e059b,_0x463751));}function shiftedTime(){const _0x3c1770=new Date();let _0x37d862=_0x3c1770;if(config&&config['timeshift']!==0x0)_0x37d862=fns['add'](_0x3c1770,{'hours':config['timeshift']});return _0x37d862;}function timer(_0x4cf91c){const _0xebdebd=_0xd052f1,_0x3cda2f=new Date();!lasttime?console[_0xebdebd(0x140)](getTimeStamp()+_0xebdebd(0x187),_0x4cf91c,_0x3cda2f):console[_0xebdebd(0x140)](getTimeStamp()+_0xebdebd(0x187),_0x4cf91c,(_0x3cda2f-lasttime)/0x3e8),lasttime=_0x3cda2f;}