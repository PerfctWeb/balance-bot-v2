const _0x217fa0=_0x3bf8;(function(_0x1de855,_0x4338a9){const _0x17ef36=_0x3bf8,_0x2e869a=_0x1de855();while(!![]){try{const _0x1c0b41=parseInt(_0x17ef36(0x18b))/0x1+-parseInt(_0x17ef36(0x1b7))/0x2+-parseInt(_0x17ef36(0x256))/0x3+-parseInt(_0x17ef36(0x192))/0x4+parseInt(_0x17ef36(0x1a8))/0x5+parseInt(_0x17ef36(0x2a0))/0x6*(parseInt(_0x17ef36(0x239))/0x7)+-parseInt(_0x17ef36(0x276))/0x8;if(_0x1c0b41===_0x4338a9)break;else _0x2e869a['push'](_0x2e869a['shift']());}catch(_0x2aeb62){_0x2e869a['push'](_0x2e869a['shift']());}}}(_0xfdf6,0xc24f7));function _0xfdf6(){const _0x43395b=['Binance\x20not\x20responding','MIN_NOTIONAL','ticker','changes','remove','close','change24h','kill','decrypt','data','market','8048226epyBug','subscribeSymbol24hrTicker','buys','length','showname','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getPortfolio()','wsMarket','buy','log','BTCBUSD','BTC/USDT','outboundAccountPosition','usd','map','emojisell',':\x20Bot\x20','API\x20or\x20clock\x20sync\x20issue','args','max','type','859901ZWGkDm','orderId','cancelOrder','initws()','subscribeSpotUserDataStream','abs','startnumber','3510652XZmQsn','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','BTCEUR','LIMIT','\x20|\x20','-results.json','target','************','apiSecret','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','AuthenticationError','eur','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ask','has','coinamount','filled','exit',')\x20|\x20Error\x20details:\x20','includes','send','stringify','7713405VMGRMX','eventType','priceChangePercent','Limit\x20(low-margin)','binance','set','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','XEM/BUSD','privateKey','cooldown','sortBy','running','progress','balances','findIndex','1561246pZMvsF','bot','format','basecoin','Order(s)\x20not\x20validated\x20after\x20','push','getTime','keys','message','limit-high','loadMarkets','USDT','storeConfiguration','coins','spot','Binance\x20not\x20available\x20(2)','DAI/','apiKey','getMinutes','logs','-events.json','isEqual','startprice','performance','./config/','wss://stream.binance.us:9443','coin','argv','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','assign','binanceus','\x20minutes','\x20>\x20','headless','get','date','Order(s)\x20filled\x20-\x20balancing\x20resumed','sha256','limits','DDoSProtection','cancel','timestamp','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','currency','indexOf','getCoins()','botname','getStartingBalances','BTCUSDT','isArray','getDate','parse','last','page','sells','./version.json','test','\x20|\x20Error\x20details:\x20','breakeven','find','fetchOrders','startdate','excluded','BUSD','realized','orderStatus','Carefully\x20evaludate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','orderType','distribution','2.3.5','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Binance\x20API\x20secret\x20is\x20invalid','asset','differenceInCalendarDays','yyyy-MM-dd\x27T\x27HH:mm:ss','NANO/','entries','FILLED','\x20has\x20a\x2024h\x20drop\x20of\x20','search','\x20order:\x20','round','BTC','enabled','fromCodePoint','cost','HOT/EUR','HOT/BTC','Unknown\x20error\x20occured','starting-balances','limit','version','change','bb-secure.json','time','sell','differenceInSeconds','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','BTC/EUR','emojibuy','write','side','\x20minutes\x20-\x20balancing\x20resumed','value','symbol','fetchTickers','valid','deleteHistoryAlerts','reduce','getMonth','\x20hour','yyyy/MM/dd','toFixed','sort','defaults','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','milliseconds','configuration','delta','number','success','reverse','error','recreate','order','executionReport','limit-low','settings','getFullYear','7cMTquJ','hybrid-crypto-js',',\x20must\x20be\x20a\x203\x20digit\x20number','BNB','loadSymbols()','join','accumulatedQuantity','portfolio','restart','getPortfolio','.json','BTC/BUSD','timeshift','lowdb','liquidity','Invalid\x20quantity','placeOrder','min','userData','bid','price','001','event-history','Crypt','Manual\x20balancing\x20required:\x20','bb-settings.json','ordertype','Market','remainingSymbols','1065549ekcyZN','timeout','fetchOHLCV','apply','formattedMessage','Unfilled\x20order(s)\x20canceled\x20after\x20','Order:\x20','closeWs','mkdirSync','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','add','/backup/','API-key\x20format\x20invalid','ExchangeNotAvailable','offset','-config.json','toLowerCase','wss://stream.binance.com:9443','\x20orders\x20in\x20less\x20than\x20','total','amount','trade','\x20|\x20Binance\x20API\x20key\x20invalid','padStart','forEach','RSA-OAEP','filter','parseISO','slice','starting-balance-','Order(s)\x20validated\x20-\x20balancing\x20resumed','7476712yGCbOt','Binance\x20not\x20available\x20(1)','toString','existsSync','Pausing\x20for\x20','threshold','(((.+)+)+)+$','BNB/','\x20|\x20Binance\x20API\x20secret\x20invalid','OrderNotFound','fee','splice','Order\x20filled:\x20','replace','InsufficientFunds','subscribeSpotKline','string','getSeconds','yyyy/MM/dd\x20HH:mm:ss','fetchBalance','-performance.json','event','Binance\x20API\x20blocked','availableBalance','ETH','function','bot-','recreateHistory()','EUR','cloneDeep','exchange'];_0xfdf6=function(){return _0x43395b;};return _0xfdf6();}const _0x2c76fe=function(){let _0x290778=!![];return function(_0x4f4927,_0x35e110){const _0x123444=_0x290778?function(){const _0x2a1d87=_0x3bf8;if(_0x35e110){const _0x5a7d3c=_0x35e110[_0x2a1d87(0x259)](_0x4f4927,arguments);return _0x35e110=null,_0x5a7d3c;}}:function(){};return _0x290778=![],_0x123444;};}(),_0xcdc8fb=_0x2c76fe(this,function(){const _0x2981f1=_0x3bf8;return _0xcdc8fb['toString']()[_0x2981f1(0x206)](_0x2981f1(0x27c))[_0x2981f1(0x278)]()['constructor'](_0xcdc8fb)[_0x2981f1(0x206)](_0x2981f1(0x27c));});_0xcdc8fb();'use strict';const ccxt=require('ccxt'),low=require(_0x217fa0(0x246)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x217fa0(0x1ac)),Crypt=require(_0x217fa0(0x23a))[_0x217fa0(0x250)];let exchange,wsClient;global['ticker']={},global[_0x217fa0(0x213)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x217fa0(0x1c7),_0x217fa0(0x20e),_0x217fa0(0x20d),_0x217fa0(0x1af),_0x217fa0(0x202),'YOYOW/'];let config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x217fa0(0x1ee))[_0x217fa0(0x212)],botID=process[_0x217fa0(0x1d2)][0x2]||_0x217fa0(0x24e),pattern=/^[0-9]{3}$/;!pattern[_0x217fa0(0x1ef)](botID)&&(console[_0x217fa0(0x2a9)]('Error:\x20Invalid\x20argument\x20'+botID+_0x217fa0(0x23b)),process[_0x217fa0(0x1a3)](0x1));const userID=process[_0x217fa0(0x1d2)][0x3]||'',configpath=userID?_0x217fa0(0x1cf)+userID+'/':_0x217fa0(0x1cf);!fs[_0x217fa0(0x279)](configpath)&&fs[_0x217fa0(0x25e)](configpath);const configfile=configpath+_0x217fa0(0x290)+botID+_0x217fa0(0x266),logfile=configpath+_0x217fa0(0x290)+botID+_0x217fa0(0x1cb),performancefile=configpath+'bot-'+botID+_0x217fa0(0x28a),coinresultsfile=configpath+'bot-'+botID+_0x217fa0(0x197),settingsfile=configpath+_0x217fa0(0x252),securefile=configpath+_0x217fa0(0x214),configbackuppath=configpath+_0x217fa0(0x262),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x217fa0(0x229)]({'logs':[]})[_0x217fa0(0x21b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x217fa0(0x229)]({'data':[]})[_0x217fa0(0x21b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x217fa0(0x229)]({'bot':[]})[_0x217fa0(0x21b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x217fa0(0x229)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x217fa0(0x194),'symbol':_0x217fa0(0x219)},'usd':{'coin':_0x217fa0(0x1e7),'symbol':_0x217fa0(0x2ab)}},lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x161ccc)=>{},'debug':(..._0x118ac3)=>{},'notice':(..._0x5667f1)=>{},'info':(..._0x4db5d1)=>{},'warning':(..._0xe9ecff)=>{},'error':async function(..._0xd746ac){const _0xd41d7e=_0x217fa0,_0x30ea0a=new Date()[_0xd41d7e(0x1bd)]();if(!lastErrorShown||_0x30ea0a-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0xd41d7e(0x1bd)]();let _0x3821fc='';if(_0xd746ac[0x0])_0x3821fc+=_0xd746ac[0x0];if(_0xd746ac[0x1]&&_0xd746ac[0x1][_0xd41d7e(0x232)]&&_0xd746ac[0x1][_0xd41d7e(0x232)][_0xd41d7e(0x1bf)])_0x3821fc+='\x20-\x20'+_0xd746ac[0x1][_0xd41d7e(0x232)]['message'];logging('WebSockets('+consecutivePauses+_0xd41d7e(0x1a4),''+_0x3821fc),await pauseBot(_0xd41d7e(0x277));}}},crypt=new Crypt({'md':_0x217fa0(0x1dc),'rsaStandard':_0x217fa0(0x270)});let settings=getSettings(),secure=getSecure();function _0x3bf8(_0x52456e,_0x294004){const _0x4db5b7=_0xfdf6();return _0x3bf8=function(_0xcdc8fb,_0x2c76fe){_0xcdc8fb=_0xcdc8fb-0x186;let _0xfdf63f=_0x4db5b7[_0xcdc8fb];return _0xfdf63f;},_0x3bf8(_0x52456e,_0x294004);}oneTimeMigration(),config=getConfiguration(botID);settings[_0x217fa0(0x245)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process['send']({'started':_0x217fa0(0x1b3)},_0x47ba14=>{}),initializeProcessListeners();function proxyEmit(_0x25dcba,_0x482feb=null){const _0x52238b=_0x217fa0;process[_0x52238b(0x1a6)]({'function':_0x25dcba,'args':_0x482feb},_0x5e6c9d=>{});}function initializeProcessListeners(){process['on']('message',_0x147ef3=>{const _0x12fdab=_0x3bf8;switch(Object[_0x12fdab(0x1be)](_0x147ef3)[0x0]){case'timeshift':_0x147ef3[_0x12fdab(0x245)]!=undefined&&(settings[_0x12fdab(0x245)]=_0x147ef3[_0x12fdab(0x245)],updateTimeshift(settings[_0x12fdab(0x245)]));break;case'function':switch(_0x147ef3[_0x12fdab(0x28f)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x147ef3[_0x12fdab(0x188)]);break;case _0x12fdab(0x222):deleteHistoryAlerts(_0x147ef3['args']);break;case _0x12fdab(0x242):getPortfolio(_0x147ef3[_0x12fdab(0x188)]);break;case _0x12fdab(0x1c3):storeConfiguration(_0x147ef3[_0x12fdab(0x188)]);break;case'storeHeadless':storeHeadless(_0x147ef3[_0x12fdab(0x188)]);break;case _0x12fdab(0x1e6):getStartingBalances(getNormalizedPerformance());break;case _0x12fdab(0x249):placeOrder(_0x147ef3[_0x12fdab(0x188)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1b68ab=_0x217fa0;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x1b68ab(0x1c8)],config[_0x1b68ab(0x19a)]);let _0x4533b0=await loadSymbols();_0x4533b0&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1f9024,_0x5490b3){const _0x5b2a92=_0x217fa0,_0x23be20=ccxt[config['exchange']];let _0x3920d3;switch(config[_0x5b2a92(0x294)]){case _0x5b2a92(0x1ac):_0x3920d3='wss://stream.binance.com:9443';break;case _0x5b2a92(0x1d5):_0x3920d3=_0x5b2a92(0x1d0);break;default:_0x3920d3=_0x5b2a92(0x268);}exchange=new _0x23be20({'apiKey':_0x1f9024,'secret':_0x5490b3,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1f9024,'api_secret':_0x5490b3,'beautify':!![],'wsUrl':_0x3920d3},logger),config['exchange']==_0x5b2a92(0x1d5)&&(stablecoins={'eur':{'coin':_0x5b2a92(0x2aa),'symbol':_0x5b2a92(0x244)},'usd':{'coin':_0x5b2a92(0x1e7),'symbol':_0x5b2a92(0x2ab)}});}async function loadSymbols(){const _0x2834f8=_0x217fa0;let _0x23dac2;try{markets=await exchange[_0x2834f8(0x1c1)](),allSymbols=exchange['symbols'][_0x2834f8(0x271)](_0x529eee=>{let _0x43c5b7=![];return exceptions['forEach'](_0x22850c=>{if(_0x529eee['includes'](_0x22850c))_0x43c5b7=!![];}),!_0x43c5b7;}),_0x23dac2=!![];}catch(_0xf5bdb8){await handleError(_0xf5bdb8,_0x2834f8(0x23d)),_0x23dac2=![];}return _0x23dac2;}async function initbot(){const _0x25f340=_0x217fa0;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4a1040=dbCoinResults[_0x25f340(0x1d9)]('coins')[_0x25f340(0x21e)]();if(_0x4a1040[_0x25f340(0x2a3)]==0x0)await resetCoinResults();}async function initclient(){const _0x4cd220=_0x217fa0;proxyEmit(_0x4cd220(0x22d),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4cd220(0x1b5),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x32bf91=getNormalizedPerformance();emitPerformance(_0x32bf91),await getStartingBalances(_0x32bf91);}async function toggleBotMode(){const _0x4948a9=_0x217fa0;let _0xa70ffe=dbConfig[_0x4948a9(0x1d9)](_0x4948a9(0x1b8))[_0x4948a9(0x1f2)]({'botID':botID})[_0x4948a9(0x21e)]();if(_0xa70ffe){const _0x4c05f7=!_0xa70ffe['headless'];dbConfig[_0x4948a9(0x1d9)]('bot')[_0x4948a9(0x1f2)]({'botID':botID})[_0x4948a9(0x1d4)]({'headless':_0x4c05f7})[_0x4948a9(0x21b)](),config[_0x4948a9(0x1d8)]=_0x4c05f7,proxyEmit(_0x4948a9(0x22d),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x6dde8=_0x217fa0;process[_0x6dde8(0x1a6)]({'updatebotmanager':!![]},_0x322923=>{});}function cleanws(){const _0x1bcd08=_0x217fa0;wsinitialized=![];ws1&&(ws1[_0x1bcd08(0x26f)](_0x46f97b=>{const _0x1a3ef7=_0x1bcd08;try{wsClient[_0x1a3ef7(0x25d)](_0x46f97b);}catch(_0x7698fa){}}),ws1=[]);if(ws2){try{wsClient[_0x1bcd08(0x25d)](ws2);}catch(_0x3da8a2){}ws2=null;}ws3&&(ws3[_0x1bcd08(0x26f)](_0x235fb9=>{const _0xcfcf58=_0x1bcd08;try{wsClient[_0xcfcf58(0x25d)](_0x235fb9);}catch(_0x535760){}}),ws3=[]);}async function initws(){const _0x2212b6=_0x217fa0;cleanws();let _0x101bd2=[];currentCoins['forEach'](_0x405668=>{const _0x5c1c02=_0x3bf8;if(_0x405668[_0x5c1c02(0x1d1)]!=config['basecoin'])_0x101bd2[_0x5c1c02(0x1bc)](_0x405668[_0x5c1c02(0x21f)]);});if(!_0x101bd2[_0x2212b6(0x1a5)](stablecoins[_0x2212b6(0x19d)][_0x2212b6(0x21f)]))_0x101bd2[_0x2212b6(0x1bc)](stablecoins[_0x2212b6(0x19d)]['symbol']);if(!_0x101bd2['includes'](stablecoins['usd'][_0x2212b6(0x21f)]))_0x101bd2[_0x2212b6(0x1bc)](stablecoins[_0x2212b6(0x2ad)][_0x2212b6(0x21f)]);if(!_0x101bd2[_0x2212b6(0x1a5)](_0x2212b6(0x27d)+config[_0x2212b6(0x1ba)]))_0x101bd2[_0x2212b6(0x1bc)](_0x2212b6(0x27d)+config[_0x2212b6(0x1ba)]);try{_0x101bd2[_0x2212b6(0x26f)]((_0x39aff4,_0x36bb46)=>{const _0x19b2bf=_0x2212b6;ws1[_0x36bb46]=wsClient[_0x19b2bf(0x285)](noslash(_0x39aff4),'1m'),ws3[_0x36bb46]=wsClient[_0x19b2bf(0x2a1)](noslash(_0x39aff4),_0x19b2bf(0x1c5));}),ws2=wsClient[_0x2212b6(0x18f)](),wsClient['on'](_0x2212b6(0x25a),_0x577a39=>{const _0xb2f4c0=_0x2212b6;if(isWsFormattedKline(_0x577a39)){global[_0xb2f4c0(0x297)][_0x577a39['kline'][_0xb2f4c0(0x21f)]]=_0x577a39['kline'][_0xb2f4c0(0x29a)];return;}else{if(isWsFormatted24hrTicker(_0x577a39)){global[_0xb2f4c0(0x213)][_0x577a39[_0xb2f4c0(0x21f)]]=_0x577a39[_0xb2f4c0(0x1aa)];return;}else{if(!Array[_0xb2f4c0(0x1e8)](_0x577a39)&&_0x577a39['wsKey'][_0xb2f4c0(0x1a5)](_0xb2f4c0(0x24b))){if(_0x577a39[_0xb2f4c0(0x2a7)][_0xb2f4c0(0x1a5)](_0xb2f4c0(0x1c5))){updateNumberCoins(_0x577a39);return;}}}}}),wsClient['on']('reconnected',async _0x1d0981=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x12ef83){await handleError(_0x12ef83,_0x2212b6(0x18e));}let _0x191b1f,_0x52889c=0x0;loading[_0x2212b6(0x255)]=[];let _0x158397=0x0;_0x101bd2['forEach'](_0x29579e=>{const _0x5da506=_0x2212b6;loading[_0x5da506(0x255)]['push'](_0x29579e);}),loadingCanceled=![];while(_0x191b1f!=_0x101bd2['length']){_0x191b1f=0x0,_0x101bd2['forEach'](_0x310546=>{const _0x21a5da=_0x2212b6;global[_0x21a5da(0x297)][noslash(_0x310546)]&&(loading[_0x21a5da(0x255)]=loading[_0x21a5da(0x255)][_0x21a5da(0x271)](_0x39ff26=>_0x39ff26!=_0x310546),_0x191b1f++);}),loading[_0x2212b6(0x1b4)]=Math[_0x2212b6(0x208)](_0x191b1f/_0x101bd2['length']*0x64);_0x158397>0x1e*0x5&&(loading[_0x2212b6(0x257)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x2212b6(0x1df)]=!![],emitLoadingProgress();break;}else _0x191b1f!=_0x52889c&&(_0x52889c=_0x191b1f,emitLoadingProgress()),_0x158397++,await sleep(0xc8);}if(_0x191b1f==_0x101bd2[_0x2212b6(0x2a3)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x153628=_0x217fa0;let _0x46c345=0x0,_0x237799=0x0;try{_0x46c345=global['ticker'][stablecoins[_0x153628(0x19d)][_0x153628(0x1d1)]],_0x237799=global[_0x153628(0x297)][stablecoins[_0x153628(0x2ad)][_0x153628(0x1d1)]];}catch(_0x38cbf9){await handleError(_0x38cbf9,'getFiat()');}return{'eur':Number(_0x46c345),'usd':Number(_0x237799)};}function setStartDatePerformance(){const _0x40d3db=_0x217fa0;if(config&&config[_0x40d3db(0x247)][0x0][_0x40d3db(0x298)]['length']!=0x0){const _0x40ea09=config[_0x40d3db(0x247)][0x0][_0x40d3db(0x298)];dbPerformance[_0x40d3db(0x1d9)](_0x40d3db(0x29e))[_0x40d3db(0x1f2)]({'date':config[_0x40d3db(0x1f4)]})[_0x40d3db(0x1d4)]({'coins':_0x40ea09})['write']();}}async function recreateHistory(_0x11bf8d){const _0x19eed3=_0x217fa0;let _0x408525,_0x3a07cf=[];logHistory(_0x19eed3(0x230),_0x19eed3(0x218)),_0x11bf8d[_0x19eed3(0x240)]['forEach'](_0x2083cd=>{const _0x313261=_0x19eed3;if(_0x2083cd[_0x313261(0x1d1)]!=config['basecoin']&&!_0x2083cd[_0x313261(0x1f5)])_0x3a07cf[_0x313261(0x1bc)]({'coin':_0x2083cd[_0x313261(0x1d1)],'symbol':_0x2083cd[_0x313261(0x21f)]});});let _0x34d355=[];try{const _0x625363=fns[_0x19eed3(0x1b9)](fns['parseISO'](_0x11bf8d[_0x19eed3(0x1f4)]['replace'](/\//g,'-')),_0x19eed3(0x201));for(const _0x165a62 of _0x3a07cf){if(_0x165a62[_0x19eed3(0x1d1)]!=config[_0x19eed3(0x1ba)])_0x408525=await exchange[_0x19eed3(0x1f3)](_0x165a62[_0x19eed3(0x21f)],Date[_0x19eed3(0x1ea)](_0x625363));_0x408525[_0x19eed3(0x26f)](_0x2983c8=>{const _0x407c8e=_0x19eed3,_0x233f72=_0x165a62[_0x407c8e(0x21f)]['includes'](config[_0x407c8e(0x1ba)]+'/'),_0xd7e0f8=fns['format'](fns[_0x407c8e(0x272)](_0x2983c8['datetime']),_0x407c8e(0x288)),_0x30a195=fns[_0x407c8e(0x1b9)](fns['parseISO'](_0x2983c8['datetime']),_0x407c8e(0x226));let _0x151d0e;if(_0x2983c8['side']==_0x407c8e(0x2a8)&&_0x233f72==![])_0x151d0e=_0x2983c8[_0x407c8e(0x26b)];if(_0x2983c8['side']==_0x407c8e(0x2a8)&&_0x233f72==!![])_0x151d0e=-_0x2983c8['amount']*_0x2983c8[_0x407c8e(0x24d)];if(_0x2983c8[_0x407c8e(0x21c)]==_0x407c8e(0x216)&&_0x233f72==![])_0x151d0e=-_0x2983c8['amount'];if(_0x2983c8['side']=='sell'&&_0x233f72==!![])_0x151d0e=_0x2983c8[_0x407c8e(0x26b)]*_0x2983c8[_0x407c8e(0x24d)];_0x34d355[_0x407c8e(0x1bc)]({'timestamp':_0xd7e0f8,'date':_0x30a195,'coin':_0x165a62['coin'],'symbol':_0x165a62['symbol'],'type':_0x2983c8[_0x407c8e(0x18a)],'side':_0x2983c8[_0x407c8e(0x21c)],'reverse':_0x233f72,'amount':formatResult(_0x2983c8[_0x407c8e(0x1a2)],0x8),'filled':formatResult(_0x2983c8[_0x407c8e(0x1a2)],0x8),'coinamount':formatResult(_0x151d0e,0x8),'price':formatResult(_0x2983c8[_0x407c8e(0x24d)],0x8)});let _0x33a654;if(_0x2983c8[_0x407c8e(0x21c)]==_0x407c8e(0x2a8)&&_0x233f72==![])_0x33a654=-_0x2983c8[_0x407c8e(0x26b)]*_0x2983c8['price'];if(_0x2983c8['side']==_0x407c8e(0x2a8)&&_0x233f72==!![])_0x33a654=_0x2983c8[_0x407c8e(0x26b)];if(_0x2983c8[_0x407c8e(0x21c)]==_0x407c8e(0x216)&&_0x233f72==![])_0x33a654=_0x2983c8[_0x407c8e(0x26b)]*_0x2983c8[_0x407c8e(0x24d)];if(_0x2983c8['side']==_0x407c8e(0x216)&&_0x233f72==!![])_0x33a654=-_0x2983c8[_0x407c8e(0x26b)];_0x34d355[_0x407c8e(0x1bc)]({'date':_0x30a195,'coin':config[_0x407c8e(0x1ba)],'coinamount':formatResult(_0x33a654,0x8)});});}_0x34d355[_0x19eed3(0x228)]((_0x1462f3,_0x19f5cf)=>_0x1462f3[_0x19eed3(0x1e0)]>_0x19f5cf[_0x19eed3(0x1e0)]?0x1:_0x19f5cf[_0x19eed3(0x1e0)]>_0x1462f3['timestamp']?-0x1:0x0),dbLogs[_0x19eed3(0x1d9)](_0x19eed3(0x1ca))['remove']()[_0x19eed3(0x21b)](),_0x34d355[_0x19eed3(0x26f)](_0xf5c840=>{const _0xbe17e9=_0x19eed3;let _0xb1b769;_0xf5c840[_0xbe17e9(0x1d1)]!=config[_0xbe17e9(0x1ba)]&&(_0xb1b769={'time':_0xf5c840[_0xbe17e9(0x1e0)],'type':_0xbe17e9(0x234),'event':_0xbe17e9(0x25c)+_0xf5c840[_0xbe17e9(0x21f)]+'\x20'+_0xf5c840['side']+'\x20#'+_0xf5c840[_0xbe17e9(0x26b)]+'\x20@'+_0xf5c840[_0xbe17e9(0x24d)]},dbLogs[_0xbe17e9(0x1d9)](_0xbe17e9(0x1ca))[_0xbe17e9(0x1bc)](_0xb1b769)[_0xbe17e9(0x21b)]());});const _0x2384ed=fns['eachDayOfInterval']({'start':new Date(_0x11bf8d['startdate']),'end':new Date()})[_0x19eed3(0x2ae)](_0x1de88=>fns['format'](_0x1de88,_0x19eed3(0x226)));let _0x315131=[];_0x11bf8d[_0x19eed3(0x240)]['forEach'](_0xb12193=>{const _0x3f858c=_0x19eed3;if(!_0xb12193[_0x3f858c(0x1f5)]){_0x315131[_0xb12193[_0x3f858c(0x1d1)]]=[];let _0x107c9b=_0xb12193[_0x3f858c(0x191)];_0x2384ed[_0x3f858c(0x26f)]((_0x10fec0,_0x445e48)=>{const _0x5cd405=_0x3f858c;let _0x21d19f=_0x34d355[_0x5cd405(0x271)](_0x10748d=>_0x10748d['coin']==_0xb12193['coin']&&_0x10748d[_0x5cd405(0x1da)]==_0x10fec0);if(_0x21d19f[_0x5cd405(0x2a3)]!=0x0){let _0x2505f9=_0x21d19f[_0x5cd405(0x223)]((_0x14199c,_0x3ff92a)=>{const _0x167d04=_0x5cd405;return _0x14199c+=_0x3ff92a[_0x167d04(0x1a1)],_0x14199c;},0x0);_0x107c9b+=_0x2505f9;}_0x315131[_0xb12193[_0x5cd405(0x1d1)]][_0x10fec0]=_0x107c9b;});}});const _0x3bc56f=[..._0x3a07cf];_0x3bc56f[_0x19eed3(0x1bc)]({'coin':stablecoins[_0x19eed3(0x19d)][_0x19eed3(0x1d1)],'symbol':stablecoins['eur'][_0x19eed3(0x21f)]}),_0x3bc56f[_0x19eed3(0x1bc)]({'coin':stablecoins['usd'][_0x19eed3(0x1d1)],'symbol':stablecoins[_0x19eed3(0x2ad)][_0x19eed3(0x21f)]});let _0x436280=[];for(const _0x170263 of _0x3bc56f){_0x436280[_0x170263[_0x19eed3(0x1d1)]]=await getCloses(_0x170263[_0x19eed3(0x21f)],new Date(_0x11bf8d[_0x19eed3(0x1f4)]));}dbPerformance[_0x19eed3(0x1d9)](_0x19eed3(0x29e))[_0x19eed3(0x299)]()['write'](),_0x2384ed[_0x19eed3(0x26f)]((_0x2cda3b,_0x4fec13)=>{const _0x1c4e88=_0x19eed3;let _0x8903a6,_0x3c19af=[];_0x4fec13==0x0?(_0x11bf8d['portfolio'][_0x1c4e88(0x26f)](_0x4c32d6=>{const _0x56263f=_0x1c4e88;!_0x4c32d6[_0x56263f(0x1f5)]&&_0x3c19af[_0x56263f(0x1bc)]({'coin':_0x4c32d6[_0x56263f(0x1d1)],'number':_0x4c32d6[_0x56263f(0x191)],'price':_0x4c32d6[_0x56263f(0x1cd)]});}),_0x8903a6={'date':_0x2cda3b,'eur':_0x436280[stablecoins[_0x1c4e88(0x19d)][_0x1c4e88(0x1d1)]][_0x4fec13],'usd':_0x436280[stablecoins[_0x1c4e88(0x2ad)][_0x1c4e88(0x1d1)]][_0x4fec13],'coins':_0x3c19af}):(_0x11bf8d['portfolio'][_0x1c4e88(0x26f)](_0x1fbf12=>{const _0x5c9493=_0x1c4e88;!_0x1fbf12[_0x5c9493(0x1f5)]&&_0x3c19af[_0x5c9493(0x1bc)]({'coin':_0x1fbf12['coin'],'number':_0x315131[_0x1fbf12['coin']][_0x2cda3b],'price':_0x1fbf12[_0x5c9493(0x1d1)]==config[_0x5c9493(0x1ba)]?0x1:_0x436280[_0x1fbf12[_0x5c9493(0x1d1)]][_0x4fec13]});}),_0x8903a6={'date':_0x2cda3b,'eur':_0x436280[stablecoins[_0x1c4e88(0x19d)]['coin']][_0x4fec13],'usd':_0x436280[stablecoins[_0x1c4e88(0x2ad)]['coin']][_0x4fec13],'coins':_0x3c19af}),dbPerformance[_0x1c4e88(0x1d9)](_0x1c4e88(0x29e))['push'](_0x8903a6)[_0x1c4e88(0x21b)]();}),emitPerformance(getNormalizedPerformance()),await resetCoinResults();for(let _0x1a6c03 of _0x34d355){_0x1a6c03[_0x19eed3(0x1d1)]!=config[_0x19eed3(0x1ba)]&&await updateCoinResults(_0x1a6c03);}logHistory(_0x19eed3(0x230),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x5f2e18){await handleError(_0x5f2e18,_0x19eed3(0x291));}}async function validate24hChanges(){const _0x40bf74=_0x217fa0;let _0x638110;for(const _0x30e610 of currentCoins){if(_0x30e610[_0x40bf74(0x1d1)]!=config['basecoin']){let _0x1da73d;_0x30e610[_0x40bf74(0x231)]?_0x1da73d=formatResult((0x1/(global[_0x40bf74(0x213)][noslash(_0x30e610[_0x40bf74(0x21f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1da73d=global['change'][noslash(_0x30e610[_0x40bf74(0x21f)])],_0x1da73d<config[_0x40bf74(0x29b)]&&(logHistory(_0x40bf74(0x232),_0x30e610[_0x40bf74(0x1d1)]+_0x40bf74(0x205)+_0x1da73d+'%'),logHistory(_0x40bf74(0x232),_0x40bf74(0x1e1)),logHistory(_0x40bf74(0x232),_0x40bf74(0x1f9)),await storeHeadless({'headless':![]}));}}}async function getCloses(_0x427e11,_0x2593a0,_0x1d3562=undefined){const _0x4830bb=_0x217fa0,_0x40e9f4='1d';let _0x417fef,_0x54625c;const _0xe8c548=fns[_0x4830bb(0x200)](new Date(),_0x2593a0)+0x1;try{const _0x3fde34=exchange[_0x4830bb(0x22c)]()-_0xe8c548*0x18*0xe10*0x3e8;_0x417fef=await exchange[_0x4830bb(0x258)](_0x427e11,_0x40e9f4,_0x3fde34,_0x1d3562),_0x54625c=await exchange[_0x4830bb(0x220)](_0x427e11);}catch(_0x4fc07c){await handleError(_0x4fc07c,'getCloses()');}let _0x5a2172=ohlcvToCloses(_0x417fef);return _0x5a2172['push'](_0x54625c[_0x427e11][_0x4830bb(0x1eb)]),_0x5a2172;}function ohlcvToCloses(_0xdb7c99){const _0x1df6f2=_0x217fa0;let _0x36cd35=[];return _0xdb7c99[_0x1df6f2(0x26f)](function(_0x594762){const _0x23b736=_0x1df6f2;_0x36cd35[_0x23b736(0x1bc)](_0x594762[0x4]);}),_0x36cd35;}function oneTimeMigration(){const _0x4b3b57=_0x217fa0;let _0x2569c7=dbLogs[_0x4b3b57(0x1d9)]('version')[_0x4b3b57(0x21e)]();if(_0x2569c7!=_0x4b3b57(0x1fc)){dbLogs['set'](_0x4b3b57(0x212),_0x4b3b57(0x1fc))[_0x4b3b57(0x21b)]();let _0x4dffcf=[];const _0x34606f=dbLogs[_0x4b3b57(0x1d9)](_0x4b3b57(0x1ca))[_0x4b3b57(0x21e)]();_0x34606f[_0x4b3b57(0x26f)](_0x4511a2=>{const _0x41aad3=_0x4b3b57;_0x4dffcf['push']({'time':_0x4511a2[_0x41aad3(0x215)],'type':_0x4511a2[_0x41aad3(0x18a)],'event':_0x4511a2[_0x41aad3(0x28b)]});}),dbLogs['get'](_0x4b3b57(0x1ca))[_0x4b3b57(0x1d4)](_0x4dffcf)[_0x4b3b57(0x21b)]();}let _0x2eb55c=dbConfig[_0x4b3b57(0x1d9)]('version')[_0x4b3b57(0x21e)]();if(_0x2eb55c!=_0x4b3b57(0x1fc)){dbConfig[_0x4b3b57(0x1ad)](_0x4b3b57(0x212),'2.3.5')[_0x4b3b57(0x21b)]();let _0x1a31e1=dbConfig['get'](_0x4b3b57(0x1b8))[_0x4b3b57(0x1f2)]({'botID':botID})['value']();if(_0x1a31e1){let _0x28add7=[];_0x1a31e1['portfolio']['forEach'](_0x20266d=>{const _0x577064=_0x4b3b57;_0x28add7[_0x577064(0x1bc)]({'coin':_0x20266d[_0x577064(0x1d1)],'number':_0x20266d[_0x577064(0x191)],'price':_0x20266d[_0x577064(0x1cd)]}),delete _0x20266d[_0x577064(0x191)],delete _0x20266d[_0x577064(0x1cd)];});if(_0x28add7[_0x4b3b57(0x2a3)]!==0x0)fs['writeFile'](configbackuppath+(_0x4b3b57(0x274)+botID+_0x4b3b57(0x243)),JSON[_0x4b3b57(0x1a7)](_0x28add7,null,0x4),function(_0x20cf2f){if(_0x20cf2f){}});const _0x5e626a=(_0x59e47f,_0x27ffcb)=>{const _0x1149c6=_0x4b3b57;let _0x20a2c3=[];_0x27ffcb[_0x1149c6(0x26f)](_0x22d1dd=>{const _0x2b9e3=_0x1149c6,_0x48a469=_0x59e47f[_0x2b9e3(0x1f2)](_0x5036bb=>_0x5036bb[_0x2b9e3(0x1d1)]==_0x22d1dd[_0x2b9e3(0x1d1)]);if(!_0x48a469)_0x20a2c3[_0x2b9e3(0x1bc)](_0x22d1dd);});let _0x38d84e=[];return _0x59e47f[_0x1149c6(0x26f)](_0x4bf68d=>{const _0x247c6c=_0x1149c6,_0x145643=_0x27ffcb[_0x247c6c(0x1f2)](_0x20fb48=>_0x20fb48[_0x247c6c(0x1d1)]==_0x4bf68d[_0x247c6c(0x1d1)]);if(!_0x145643||_0x145643[_0x247c6c(0x22f)]==0x0&&_0x4bf68d[_0x247c6c(0x22f)]!=0x0)_0x38d84e[_0x247c6c(0x1bc)](_0x4bf68d);}),{'missingDay1':_0x20a2c3,'notInDay2':_0x38d84e};},_0x486450=dbPerformance[_0x4b3b57(0x1d9)]('data')['cloneDeep']()[_0x4b3b57(0x21e)]();if(_0x486450['length']>0x1){const {missingDay1:_0x356e88,notInDay2:_0x4b2979}=_0x5e626a(_0x28add7,_0x486450[0x1][_0x4b3b57(0x1c4)]);_0x28add7=[..._0x28add7,..._0x356e88],_0x4b2979[_0x4b3b57(0x26f)](_0xab5ebb=>{const _0x3b08c1=_0x4b3b57;let _0xde482d=_0x28add7[_0x3b08c1(0x1b6)](_0x47b346=>_0x47b346[_0x3b08c1(0x1d1)]==_0xab5ebb[_0x3b08c1(0x1d1)]);_0xde482d!=-0x1&&_0x28add7['splice'](_0xde482d,0x1);});}_0x28add7[_0x4b3b57(0x228)]((_0x3e44e0,_0x2547ea)=>_0x3e44e0[_0x4b3b57(0x1d1)]>_0x2547ea[_0x4b3b57(0x1d1)]?0x1:_0x2547ea[_0x4b3b57(0x1d1)]>_0x3e44e0[_0x4b3b57(0x1d1)]?-0x1:0x0);let _0x32093e=[{'date':_0x1a31e1['startdate'],'changes':_0x28add7}];_0x486450[_0x4b3b57(0x2a3)]>0x2&&_0x486450['forEach']((_0x836746,_0x41b8ce)=>{const _0x410308=_0x4b3b57;if(_0x41b8ce>0x0&&_0x41b8ce<_0x486450[_0x410308(0x2a3)]-0x1){const {missingDay1:_0x5cf036,notInDay2:_0x35de80}=_0x5e626a(_0x486450[_0x41b8ce][_0x410308(0x1c4)],_0x486450[_0x41b8ce+0x1]['coins']);_0x28add7=[],(_0x5cf036[_0x410308(0x2a3)]!=0x0||_0x35de80['length']!=0x0)&&(_0x5cf036['length']!=0x0&&_0x28add7[_0x410308(0x1bc)](..._0x5cf036),_0x35de80[_0x410308(0x2a3)]!=0x0&&(_0x35de80[_0x410308(0x26f)](_0x2a7f14=>{const _0x2c0011=_0x410308;_0x2a7f14[_0x2c0011(0x22f)]=-_0x2a7f14['number'];}),_0x28add7[_0x410308(0x1bc)](..._0x35de80)),_0x28add7[_0x410308(0x228)]((_0x4837f0,_0xcd4dbb)=>_0x4837f0[_0x410308(0x1d1)]>_0xcd4dbb[_0x410308(0x1d1)]?0x1:_0xcd4dbb[_0x410308(0x1d1)]>_0x4837f0[_0x410308(0x1d1)]?-0x1:0x0),_0x32093e['push']({'date':_0x486450[_0x41b8ce+0x1][_0x410308(0x1da)],'changes':_0x28add7}));}}),dbConfig[_0x4b3b57(0x1d9)](_0x4b3b57(0x1b8))[_0x4b3b57(0x1f2)]({'botID':botID})[_0x4b3b57(0x1d4)]({..._0x1a31e1,'liquidity':_0x32093e})['write']();}}config=getConfiguration(botID);let _0x3165f2=dbPerformance[_0x4b3b57(0x1d9)](_0x4b3b57(0x212))[_0x4b3b57(0x21e)]();_0x3165f2!=_0x4b3b57(0x1fc)&&(dbPerformance[_0x4b3b57(0x1ad)](_0x4b3b57(0x212),_0x4b3b57(0x1fc))[_0x4b3b57(0x21b)](),setStartDatePerformance());let _0x25bb6d=dbCoinResults[_0x4b3b57(0x1d9)](_0x4b3b57(0x212))['value']();_0x25bb6d!=_0x4b3b57(0x1fc)&&dbCoinResults[_0x4b3b57(0x1ad)](_0x4b3b57(0x212),_0x4b3b57(0x1fc))[_0x4b3b57(0x21b)]();}function getConfiguration(_0x4c30fc){const _0x1925ed=_0x217fa0;let _0x371d80=dbConfig[_0x1925ed(0x1d9)](_0x1925ed(0x1b8))[_0x1925ed(0x1f2)]({'botID':_0x4c30fc})[_0x1925ed(0x21e)]();if(_0x371d80){let _0x8f01a7=![];typeof _0x371d80[_0x1925ed(0x27b)]==_0x1925ed(0x286)&&(_0x371d80={..._0x371d80,'threshold':Number(_0x371d80['threshold'])},_0x8f01a7=!![]),_0x371d80[_0x1925ed(0x29b)]==null&&(_0x371d80={..._0x371d80,'change24h':-0x14},_0x8f01a7=!![]),_0x8f01a7&&(_0x371d80={'botID':_0x371d80['botID'],'exchange':_0x371d80[_0x1925ed(0x294)],'apiKey':_0x371d80[_0x1925ed(0x1c8)],'apiSecret':_0x371d80[_0x1925ed(0x19a)],'basecoin':_0x371d80[_0x1925ed(0x1ba)],'botname':_0x371d80[_0x1925ed(0x1e5)],'showname':_0x371d80[_0x1925ed(0x2a4)],'threshold':_0x371d80[_0x1925ed(0x27b)],'ordertype':_0x371d80[_0x1925ed(0x253)],'timeout':_0x371d80['timeout'],'startdate':_0x371d80[_0x1925ed(0x1f4)],'recreate':_0x371d80[_0x1925ed(0x233)],'timeshift':_0x371d80[_0x1925ed(0x245)],'headless':_0x371d80['headless'],'cooldown':_0x371d80[_0x1925ed(0x1b1)],'change24h':_0x371d80[_0x1925ed(0x29b)],'emojibuy':_0x371d80['emojibuy'],'emojisell':_0x371d80['emojisell'],'portfolio':_0x371d80[_0x1925ed(0x240)],'liquidity':_0x371d80[_0x1925ed(0x247)]},dbConfig[_0x1925ed(0x1d9)](_0x1925ed(0x1b8))[_0x1925ed(0x299)]()[_0x1925ed(0x21b)](),dbConfig[_0x1925ed(0x1d9)](_0x1925ed(0x1b8))['push'](_0x371d80)[_0x1925ed(0x21b)]());}else _0x371d80={'botID':_0x4c30fc,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x4c30fc,'showname':![],'threshold':0x3,'ordertype':_0x1925ed(0x29f),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1925ed(0x245)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x371d80;}function emittedConfiguration(){const _0x61b571=_0x217fa0;let _0x1fdaff;return config[_0x61b571(0x1c8)]==''?_0x1fdaff=config:_0x1fdaff={...config,'apiKey':_0x61b571(0x199),'apiSecret':_0x61b571(0x199)},_0x1fdaff;}function getSettings(){const _0x5d3f65=_0x217fa0;return dbSettings[_0x5d3f65(0x1d9)](_0x5d3f65(0x237))[_0x5d3f65(0x21e)]();}function getSecure(){const _0x96829e=_0x217fa0;return dbSecure['get']('secure')[_0x96829e(0x21e)]()||{};}function updateTimeshift(_0x1d02f4){const _0x56b455=_0x217fa0;let _0x575f39=dbConfig['get']('bot')[_0x56b455(0x1f2)]({'botID':botID})['value']();_0x575f39&&dbConfig[_0x56b455(0x1d9)](_0x56b455(0x1b8))[_0x56b455(0x1f2)]({'botID':botID})[_0x56b455(0x1d4)]({'timeshift':_0x1d02f4})[_0x56b455(0x21b)](),config[_0x56b455(0x245)]=_0x1d02f4,proxyEmit(_0x56b455(0x22d),emittedConfiguration());}async function storeConfiguration(_0x20b8f0){const _0x324835=_0x217fa0;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3bbd37=dbConfig[_0x324835(0x1d9)]('bot')[_0x324835(0x1f2)]({'botID':botID})[_0x324835(0x21e)]();_0x20b8f0={..._0x20b8f0,'apiKey':crypt['decrypt'](secure[_0x324835(0x1b0)],_0x20b8f0['apiKey'])[_0x324835(0x1bf)],'apiSecret':crypt[_0x324835(0x29d)](secure[_0x324835(0x1b0)],_0x20b8f0[_0x324835(0x19a)])[_0x324835(0x1bf)]};if(_0x3bbd37){if(_0x20b8f0[_0x324835(0x1c8)]==_0x324835(0x199))_0x20b8f0[_0x324835(0x1c8)]=config[_0x324835(0x1c8)];if(_0x20b8f0[_0x324835(0x19a)]=='************')_0x20b8f0[_0x324835(0x19a)]=config[_0x324835(0x19a)];dbConfig[_0x324835(0x1d9)](_0x324835(0x1b8))[_0x324835(0x1f2)]({'botID':botID})[_0x324835(0x1d4)](_0x20b8f0)[_0x324835(0x21b)]();}else dbConfig[_0x324835(0x1d9)](_0x324835(0x1b8))[_0x324835(0x1bc)](_0x20b8f0)[_0x324835(0x21b)](),process[_0x324835(0x1a6)]({'status':_0x324835(0x20a),'live':_0x324835(0x1b3)},_0x13e3c0=>{});config={..._0x20b8f0},setStartDatePerformance(),process[_0x324835(0x1a6)]({'botname':_0x20b8f0[_0x324835(0x1e5)]},_0x26e8e6=>{}),updateBotManager();const _0x36004a=getNormalizedPerformance();getStartingBalances(_0x36004a),emitPerformance(_0x36004a),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x53cac9){const _0xcc2647=_0x217fa0,_0x23b4c3={...config,'headless':_0x53cac9['headless']};let _0x392774=dbConfig['get'](_0xcc2647(0x1b8))[_0xcc2647(0x1f2)]({'botID':botID})['value']();_0x392774&&dbConfig[_0xcc2647(0x1d9)](_0xcc2647(0x1b8))['find']({'botID':botID})[_0xcc2647(0x1d4)](_0x23b4c3)['write'](),config={..._0x23b4c3},updateBotManager(),proxyEmit(_0xcc2647(0x22d),emittedConfiguration());}function noslash(_0x20e864){const _0x1b44be=_0x217fa0;return _0x20e864[_0x1b44be(0x283)]('/','');}function updateNumberCoins(_0x1a73e9){const _0x2260aa=_0x217fa0;_0x1a73e9['eventType']&&_0x1a73e9[_0x2260aa(0x1a9)]==_0x2260aa(0x2ac)&&_0x1a73e9['balances'][_0x2260aa(0x26f)](_0xc3633f=>{const _0xbcca39=_0x2260aa;let _0x5022a9=currentCoins[_0xbcca39(0x1f2)](_0x458d19=>_0x458d19['coin']==_0xc3633f[_0xbcca39(0x1ff)]),_0x3428fa=config[_0xbcca39(0x240)]['find'](_0xc771d9=>_0xc771d9[_0xbcca39(0x1d1)]==_0xc3633f['asset']);if(_0x5022a9&&_0x3428fa)_0x5022a9[_0xbcca39(0x22f)]=Math['max'](Number(_0xc3633f[_0xbcca39(0x28d)])+(_0x3428fa['offset']||0x0),0x0);});if(_0x1a73e9[_0x2260aa(0x1a9)]&&_0x1a73e9['eventType']==_0x2260aa(0x235)){if(_0x1a73e9[_0x2260aa(0x1fa)]==_0x2260aa(0x195)&&_0x1a73e9[_0x2260aa(0x1f8)]==_0x2260aa(0x204)){if(lastOrders)lastOrders[_0x2260aa(0x26f)](_0x4a43b5=>{const _0xf14fe5=_0x2260aa;if(_0x4a43b5[_0xf14fe5(0x18c)]==_0x1a73e9['orderId']){if(_0x4a43b5[_0xf14fe5(0x231)])_0x4a43b5['filled']=_0x1a73e9[_0xf14fe5(0x23f)]*_0x4a43b5['price'];else _0x4a43b5[_0xf14fe5(0x1a2)]=_0x1a73e9[_0xf14fe5(0x23f)];}});}}}async function getCoins(_0x5d6b42=!![],_0x27a57d=config[_0x217fa0(0x1ba)]){const _0x16075c=_0x217fa0;let _0x1a0256,_0x477733=[],_0x15d603=[],_0x3e5046=[];try{_0x1a0256=await exchange[_0x16075c(0x289)](),mybalances=_0x1a0256[_0x16075c(0x26a)];if(!_0x5d6b42)for(const [_0x3578ac,_0x22a0c0]of Object[_0x16075c(0x203)](mybalances)){_0x3e5046['push'](_0x3578ac);}else config[_0x16075c(0x240)][_0x16075c(0x26f)](_0x410c20=>{const _0x5165c5=_0x16075c;if(!_0x410c20[_0x5165c5(0x1f5)])_0x3e5046[_0x5165c5(0x1bc)](_0x410c20[_0x5165c5(0x1d1)]);});if(_0x27a57d=='')for(const [_0x27bd89,_0x2e5fff]of Object[_0x16075c(0x203)](mybalances)){_0x2e5fff['toString']()!=0x0&&_0x15d603[_0x16075c(0x1bc)]({'coin':_0x27bd89});}else for(const [_0x264b91,_0x5bbcb2]of Object[_0x16075c(0x203)](mybalances)){if(_0x3e5046[_0x16075c(0x1a5)](_0x264b91)){const _0x4b0126=config['portfolio'][_0x16075c(0x1f2)](_0x38baa3=>_0x38baa3[_0x16075c(0x1d1)]==_0x264b91);if((_0x5bbcb2[_0x16075c(0x278)]()!=0x0||_0x4b0126)&&(allSymbols[_0x16075c(0x1a5)](_0x264b91+'/'+_0x27a57d)||_0x264b91==_0x27a57d))_0x15d603['push']({'coin':_0x264b91,'symbol':_0x264b91+'/'+_0x27a57d,'reverse':![],'number':Math['max'](_0x5bbcb2+(_0x4b0126&&_0x4b0126[_0x16075c(0x265)]||0x0),0x0)}),_0x264b91!=_0x27a57d&&_0x477733[_0x16075c(0x1bc)](_0x264b91+'/'+_0x27a57d);else(_0x5bbcb2[_0x16075c(0x278)]()!=0x0||_0x4b0126)&&allSymbols[_0x16075c(0x1a5)](_0x27a57d+'/'+_0x264b91)&&(_0x15d603['push']({'coin':_0x264b91,'symbol':_0x27a57d+'/'+_0x264b91,'reverse':!![],'number':Math[_0x16075c(0x189)](_0x5bbcb2+(_0x4b0126&&_0x4b0126[_0x16075c(0x265)]||0x0),0x0)}),_0x264b91!=_0x27a57d&&_0x477733['push'](_0x27a57d+'/'+_0x264b91));}}}catch(_0x30dae8){if(!_0x5d6b42){if(_0x30dae8[_0x16075c(0x278)]()['includes'](_0x16075c(0x263)))return logHistory(_0x16075c(0x232),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x30dae8['toString']()['includes'](_0x16075c(0x19c)))return logHistory(_0x16075c(0x232),_0x16075c(0x22b)),![];else{if(_0x30dae8[_0x16075c(0x278)]()[_0x16075c(0x1a5)](_0x16075c(0x2a5)))return logHistory(_0x16075c(0x232),_0x16075c(0x1fe)),![];else await handleError(_0x30dae8,_0x16075c(0x1e4));}}}else await handleError(_0x30dae8,_0x16075c(0x1e4));}return _0x15d603;}async function getPortfolio(_0x4917ae){const _0x5dd971=_0x217fa0;let _0x306167=[],_0x429de0=[],_0x27dad3,_0x5cf98d=[],_0x23eb7c,_0xf778df;_0x4917ae[_0x5dd971(0x1c8)]==='************'||_0x4917ae[_0x5dd971(0x19a)]===_0x5dd971(0x199)?(_0x23eb7c=config['apiKey'],_0xf778df=config[_0x5dd971(0x19a)]):(_0x23eb7c=_0x4917ae[_0x5dd971(0x1c8)],_0xf778df=_0x4917ae[_0x5dd971(0x19a)]);await initExchange(_0x23eb7c,_0xf778df);let _0x4b541a=await loadSymbols();if(_0x4b541a){_0x5cf98d=await getCoins(![],_0x4917ae[_0x5dd971(0x1ba)]);if(_0x5cf98d===![])proxyEmit(_0x5dd971(0x240),![]);else{if(_0x4917ae[_0x5dd971(0x1ba)]=='')proxyEmit('portfolio',_0x5cf98d);else{_0x5cf98d['forEach'](_0x250974=>{const _0x5ed7d9=_0x5dd971;_0x306167['push'](_0x250974[_0x5ed7d9(0x21f)]);});try{_0x429de0=await exchange[_0x5dd971(0x220)](_0x306167);}catch(_0xd387a8){await handleError(_0xd387a8,_0x5dd971(0x2a6));}_0x5cf98d[_0x5dd971(0x26f)](_0x5dd562=>{const _0x3f4921=_0x5dd971;_0x5dd562[_0x3f4921(0x1d1)]!=_0x4917ae['basecoin']?_0x27dad3=_0x5dd562['reverse']?0x1/_0x429de0[_0x5dd562['symbol']][_0x3f4921(0x1eb)]:_0x429de0[_0x5dd562[_0x3f4921(0x21f)]][_0x3f4921(0x1eb)]:_0x27dad3=0x1,_0x5dd562[_0x3f4921(0x24d)]=formatResult(_0x27dad3,0x8);}),proxyEmit(_0x5dd971(0x240),_0x5cf98d);}}}else proxyEmit(_0x5dd971(0x240),![]);}function checkMinimums(_0x3f4285){const _0x425c4a=_0x217fa0;let _0x1afc03=!![];const _0x5b868f=!_0x3f4285['reverse']?markets[_0x3f4285[_0x425c4a(0x21f)]][_0x425c4a(0x1dd)][_0x425c4a(0x26b)]['min']:markets[_0x3f4285[_0x425c4a(0x21f)]][_0x425c4a(0x1dd)][_0x425c4a(0x20c)][_0x425c4a(0x24a)],_0x54090c=!_0x3f4285[_0x425c4a(0x231)]?markets[_0x3f4285[_0x425c4a(0x21f)]][_0x425c4a(0x1dd)][_0x425c4a(0x20c)][_0x425c4a(0x24a)]:markets[_0x3f4285[_0x425c4a(0x21f)]][_0x425c4a(0x1dd)][_0x425c4a(0x26b)][_0x425c4a(0x24a)];if(Math[_0x425c4a(0x190)](_0x3f4285[_0x425c4a(0x26c)])<_0x5b868f)_0x1afc03=![];if(Math[_0x425c4a(0x190)](_0x3f4285[_0x425c4a(0x26c)])*_0x3f4285[_0x425c4a(0x1eb)]<_0x54090c)_0x1afc03=![];if(_0x3f4285['side']==_0x425c4a(0x216)){let _0x415f5c=config[_0x425c4a(0x240)]['find'](_0x5a60b6=>_0x5a60b6[_0x425c4a(0x1d1)]==_0x3f4285[_0x425c4a(0x1d1)]);if(Math[_0x425c4a(0x190)](_0x3f4285['trade'])>_0x3f4285[_0x425c4a(0x22f)]-_0x415f5c[_0x425c4a(0x265)])_0x1afc03=![];}return _0x1afc03;}async function getBalances(){const _0x5ede07=_0x217fa0;let _0x2f9f89=0x0,_0xebbcc3;const _0xda8eab=config['threshold'];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x19a838=>{const _0xbec662=_0x3bf8;if(_0x19a838['coin']!=config[_0xbec662(0x1ba)]){let _0x892ecd=global['ticker'][noslash(_0x19a838[_0xbec662(0x21f)])];_0xebbcc3=_0x19a838[_0xbec662(0x231)]?0x1/_0x892ecd:_0x892ecd;}else _0xebbcc3=0x1;let _0x511ce0=_0x19a838[_0xbec662(0x22f)]*_0xebbcc3;_0x2f9f89+=_0x511ce0,_0x19a838['last']=formatResult(Number(_0xebbcc3),0x8),_0x19a838[_0xbec662(0x21e)]=_0x511ce0;}),currentCoins[_0x5ede07(0x26f)](_0x3496ca=>{const _0x4e2c9a=_0x5ede07;let _0x3d763e=config[_0x4e2c9a(0x240)]['find'](_0x5e93ca=>_0x5e93ca[_0x4e2c9a(0x1d1)]==_0x3496ca[_0x4e2c9a(0x1d1)]),_0x142d4c=Number(_0x3d763e[_0x4e2c9a(0x1fb)]),_0x54cf4c=_0x3496ca[_0x4e2c9a(0x21e)]/_0x2f9f89*0x64,_0xbff8b3=_0x142d4c*_0x2f9f89/0x64/_0x3496ca['last']-_0x3496ca['number'];_0x3496ca['distribution']=formatResult(_0x54cf4c,0x3),_0x3496ca[_0x4e2c9a(0x198)]=formatResult(_0x142d4c,0x3),_0x3496ca[_0x4e2c9a(0x26c)]=formatResult(_0xbff8b3,0x8),_0x3496ca[_0x4e2c9a(0x21c)]='',_0x3496ca[_0x4e2c9a(0x221)]=![];if(_0x3496ca['coin']!=config[_0x4e2c9a(0x1ba)]){if(_0x3496ca[_0x4e2c9a(0x1fb)]>_0x142d4c)_0x3496ca[_0x4e2c9a(0x21c)]=_0x4e2c9a(0x216),_0x3496ca[_0x4e2c9a(0x221)]=checkMinimums(_0x3496ca);else _0x3496ca[_0x4e2c9a(0x1fb)]<_0x142d4c&&(_0x3496ca[_0x4e2c9a(0x21c)]='buy',_0x3496ca[_0x4e2c9a(0x221)]=checkMinimums(_0x3496ca));}_0x3496ca['delta']=_0x3496ca[_0x4e2c9a(0x1fb)]/_0x3496ca[_0x4e2c9a(0x198)]-0x1;}),currentCoins[_0x5ede07(0x228)]((_0x4ca55b,_0x5789de)=>_0x4ca55b[_0x5ede07(0x22e)]<_0x5789de[_0x5ede07(0x22e)]?0x1:_0x5789de['delta']<_0x4ca55b[_0x5ede07(0x22e)]?-0x1:0x0);const _0x45201f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x45201f['eur'],'usd':_0x45201f['usd'],'portfolio':JSON[_0x5ede07(0x1a7)](currentCoins),'threshold':_0xda8eab},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xda8eab});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0xda8eab});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x772f3d=_0x217fa0;if(!lastBalances)return;let _0x3415d9=[],_0x1b8504,_0x20c7a6=JSON['parse'](lastBalances[_0x772f3d(0x240)]);_0x20c7a6['sort']((_0x5bbd48,_0x5e3ac4)=>_0x5bbd48[_0x772f3d(0x1d1)]>_0x5e3ac4[_0x772f3d(0x1d1)]?0x1:_0x5e3ac4[_0x772f3d(0x1d1)]>_0x5bbd48['coin']?-0x1:0x0),_0x20c7a6[_0x772f3d(0x26f)](_0x45d6d6=>{const _0x48a80e=_0x772f3d;let _0x3a73c6={'coin':_0x45d6d6[_0x48a80e(0x1d1)],'number':_0x45d6d6[_0x48a80e(0x22f)],'price':_0x45d6d6[_0x48a80e(0x1eb)]};_0x3415d9[_0x48a80e(0x1bc)](_0x3a73c6);});const _0x2abf12=await getFiat();_0x1b8504={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x2abf12[_0x772f3d(0x19d)],'usd':_0x2abf12[_0x772f3d(0x2ad)],'coins':_0x3415d9};let _0x21b7c0=dbPerformance[_0x772f3d(0x1d9)]('data')['find']({'date':_0x1b8504[_0x772f3d(0x1da)]})[_0x772f3d(0x21e)]();_0x21b7c0?_0x1b8504['date']!=config[_0x772f3d(0x1f4)]&&dbPerformance[_0x772f3d(0x1d9)]('data')[_0x772f3d(0x1f2)]({'date':_0x1b8504[_0x772f3d(0x1da)]})[_0x772f3d(0x1d4)](_0x1b8504)['write']():dbPerformance[_0x772f3d(0x1d9)](_0x772f3d(0x29e))['push'](_0x1b8504)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2443a5=_0x217fa0;let _0x1e5dbc=[];if(dbPerformance[_0x2443a5(0x1a0)]('data')[_0x2443a5(0x21e)]()){let _0x155036=dbPerformance[_0x2443a5(0x1d9)](_0x2443a5(0x29e))[_0x2443a5(0x293)]()['sortBy'](_0x2443a5(0x1da))[_0x2443a5(0x21e)](),_0x580404=[...config[_0x2443a5(0x247)]];_0x580404[_0x2443a5(0x228)]((_0x10353d,_0x614e45)=>_0x10353d['date']>_0x614e45[_0x2443a5(0x1da)]?-0x1:_0x614e45[_0x2443a5(0x1da)]>_0x10353d[_0x2443a5(0x1da)]?0x1:0x0);let _0x49ccc4=0x1,_0x391eee=[],_0x3900ea=0x0;_0x155036['slice']()[_0x2443a5(0x231)]()[_0x2443a5(0x26f)]((_0x231bb9,_0x5afb94)=>{const _0x40368d=_0x2443a5;if(_0x580404[_0x3900ea]){if(_0x155036[_0x155036[_0x40368d(0x2a3)]-_0x5afb94]&&_0x580404[_0x3900ea][_0x40368d(0x1da)]==_0x155036[_0x155036[_0x40368d(0x2a3)]-_0x5afb94][_0x40368d(0x1da)]){if(_0x5afb94<_0x155036['length']){let _0x52dbc5=0x0,_0x27143f=0x0;_0x155036[_0x155036[_0x40368d(0x2a3)]-_0x5afb94][_0x40368d(0x1c4)][_0x40368d(0x26f)](_0x4a016e=>{const _0xcebc43=_0x40368d;_0x27143f+=_0x4a016e[_0xcebc43(0x22f)]*_0x4a016e[_0xcebc43(0x24d)];}),_0x580404[_0x3900ea][_0x40368d(0x298)][_0x40368d(0x26f)](_0x139a61=>{const _0x40d033=_0x40368d;_0x52dbc5+=_0x139a61[_0x40d033(0x22f)]*_0x139a61[_0x40d033(0x24d)];}),_0x49ccc4*=_0x52dbc5/(_0x27143f-_0x52dbc5)+0x1;}_0x3900ea++;}}let _0x5eeeea=0x0;_0x231bb9['coins'][_0x40368d(0x26f)](_0x56923e=>{const _0x2af954=_0x40368d;_0x5eeeea+=_0x56923e[_0x2af954(0x22f)]*_0x56923e[_0x2af954(0x24d)];}),_0x391eee[_0x155036[_0x40368d(0x2a3)]-_0x5afb94-0x1]=_0x5eeeea*(_0x49ccc4-0x1);});let _0x36d031=[];_0x580404=[...config[_0x2443a5(0x247)]]||[];let _0x51c809=0x0;_0x3900ea=0x0,_0x155036[_0x2443a5(0x26f)]((_0x256be3,_0x558677)=>{const _0x2c9b63=_0x2443a5;if(_0x580404[_0x3900ea]){const _0x26dfff=fns[_0x2c9b63(0x1ea)](_0x580404[_0x3900ea][_0x2c9b63(0x1da)],_0x2c9b63(0x226),new Date()),_0x322c11=fns[_0x2c9b63(0x1ea)](_0x256be3[_0x2c9b63(0x1da)],_0x2c9b63(0x226),new Date());if(fns[_0x2c9b63(0x1cc)](_0x26dfff,_0x322c11)){let _0x287112=0x0;_0x580404[_0x3900ea]['changes'][_0x2c9b63(0x26f)](_0x101fdd=>{const _0xe54be0=_0x2c9b63;!_0x36d031[_0x101fdd[_0xe54be0(0x1d1)]]?_0x36d031[_0x101fdd[_0xe54be0(0x1d1)]]=_0x101fdd[_0xe54be0(0x22f)]:(_0x287112=_0x36d031[_0x101fdd[_0xe54be0(0x1d1)]],_0x36d031[_0x101fdd[_0xe54be0(0x1d1)]]+=_0x101fdd['number']);const _0x50221b=_0x256be3[_0xe54be0(0x1c4)][_0xe54be0(0x1f2)](_0x52bbe0=>_0x52bbe0[_0xe54be0(0x1d1)]==_0x101fdd[_0xe54be0(0x1d1)]);(!_0x50221b||_0x50221b['number']==0x0)&&(_0x51c809+=(-_0x101fdd[_0xe54be0(0x22f)]-_0x287112)*_0x101fdd['price']);}),_0x3900ea++;}}_0x256be3[_0x2c9b63(0x1c4)][_0x2c9b63(0x26f)]((_0x5573d0,_0x1d8e6b)=>{const _0x36002a=_0x2c9b63;_0x36d031[_0x5573d0[_0x36002a(0x1d1)]]&&(_0x5573d0={..._0x5573d0,'initial':_0x36d031[_0x5573d0[_0x36002a(0x1d1)]]}),_0x256be3[_0x36002a(0x1c4)][_0x1d8e6b]=_0x5573d0;}),_0x1e5dbc['push']({'date':_0x256be3[_0x2c9b63(0x1da)],'eur':_0x256be3[_0x2c9b63(0x19d)],'usd':_0x256be3[_0x2c9b63(0x2ad)],'offset':_0x391eee[_0x558677],'netoffset':_0x51c809,'coins':_0x256be3[_0x2c9b63(0x1c4)]});});}return _0x1e5dbc;}function emitPerformance(_0x301fac){const _0x160dac=_0x217fa0;_0x301fac[_0x160dac(0x2a3)]!==0x0?(proxyEmit(_0x160dac(0x1ce),_0x301fac),lastPerformanceEmitted=getDate()):proxyEmit(_0x160dac(0x1ce),[]);}function getPerf(_0x475050,_0x35daf5){const _0x299a7a=_0x217fa0;let _0x9c13b8=0x0,_0x234f80=0x0,_0x10a71b=0x0;_0x475050['coins'][_0x299a7a(0x26f)](_0x295e45=>{const _0x39cb65=_0x299a7a;_0x9c13b8+=_0x295e45[_0x39cb65(0x22f)]*_0x295e45['price'];});_0x35daf5&&(_0x9c13b8+=_0x475050['offset']);if(config['basecoin']===_0x299a7a(0x209)||config['basecoin']===_0x299a7a(0x28e))_0x234f80=_0x9c13b8*_0x475050[_0x299a7a(0x19d)],_0x10a71b=_0x9c13b8*_0x475050[_0x299a7a(0x2ad)];else{if(config[_0x299a7a(0x1ba)]===_0x299a7a(0x1f6)||config[_0x299a7a(0x1ba)]===_0x299a7a(0x1c2)||config['basecoin']==='USDC')_0x234f80=_0x9c13b8*_0x475050[_0x299a7a(0x19d)]/_0x475050[_0x299a7a(0x2ad)],_0x10a71b=_0x9c13b8;else config[_0x299a7a(0x1ba)]===_0x299a7a(0x292)&&(_0x234f80=_0x9c13b8,_0x10a71b=_0x9c13b8*_0x475050['usd']/_0x475050[_0x299a7a(0x19d)]);}return[_0x9c13b8,_0x234f80,_0x10a71b];}async function getStartingBalances(_0x59c603,_0x11c7c7=!![]){const _0xb8440d=_0x217fa0;if(_0x59c603['length']!==0x0){const [_0x9e3c6b,_0x40d3f,_0x446e66]=getPerf(_0x59c603[0x0],!![]);let _0x8e8663=[];config[_0xb8440d(0x240)]['forEach'](_0x9cafa8=>{const _0x25ea23=_0xb8440d;let _0x4f53a7=0x0;config[_0x25ea23(0x247)][_0x25ea23(0x26f)](_0x38f20d=>{const _0x38fa60=_0x25ea23;let _0xd40d1c=_0x38f20d[_0x38fa60(0x298)]['find'](_0x515883=>_0x515883[_0x38fa60(0x1d1)]==_0x9cafa8[_0x38fa60(0x1d1)]);if(_0xd40d1c)_0x4f53a7+=_0xd40d1c[_0x38fa60(0x22f)];}),_0x8e8663[_0x25ea23(0x1bc)]({'coin':_0x9cafa8['coin'],'number':_0x4f53a7,'price':_0x9cafa8['price']});});const _0x205d6a={'basecoin':_0x9e3c6b,'eur':_0x40d3f,'usd':_0x446e66,'coins':_0x8e8663};if(_0x11c7c7)proxyEmit(_0xb8440d(0x210),_0x205d6a);return _0x205d6a;}}function headlessMode(_0x38303f){const _0x3642b3=_0x217fa0;let _0x12996b=_0x38303f['portfolio'],_0x178ea1=_0x38303f[_0x3642b3(0x27b)],_0x26138c=[];for(let _0x3edb27 of _0x12996b){if(_0x3edb27[_0x3642b3(0x1d1)]!=config[_0x3642b3(0x1ba)]){if(_0x3edb27[_0x3642b3(0x1fb)]/_0x3edb27['target']-0x1>=_0x178ea1/0x64){if(_0x3edb27[_0x3642b3(0x221)])_0x26138c[_0x3642b3(0x1bc)](_0x3edb27);}else{if(_0x3edb27['distribution']/_0x3edb27[_0x3642b3(0x198)]-0x1<=-_0x178ea1/0x64){if(_0x3edb27[_0x3642b3(0x221)])_0x26138c[_0x3642b3(0x1bc)](_0x3edb27);}}}}_0x26138c['length']>0x0&&placeOrder(_0x26138c);}function notifyBalance(_0x20af85){const _0x411f77=_0x217fa0;let _0x54bb98=_0x20af85[_0x411f77(0x240)],_0x129bc9=_0x20af85[_0x411f77(0x27b)],_0x4fab01=[];for(let _0x299f64 of _0x54bb98){if(_0x299f64[_0x411f77(0x1d1)]!=config[_0x411f77(0x1ba)]){if(_0x299f64[_0x411f77(0x1fb)]/_0x299f64[_0x411f77(0x198)]-0x1>=_0x129bc9/0x64){if(_0x299f64['valid'])_0x4fab01[_0x411f77(0x1bc)](_0x299f64);}else{if(_0x299f64[_0x411f77(0x1fb)]/_0x299f64[_0x411f77(0x198)]-0x1<=-_0x129bc9/0x64){if(_0x299f64[_0x411f77(0x221)])_0x4fab01['push'](_0x299f64);}}}}if(_0x4fab01[_0x411f77(0x2a3)]>0x0){let _0x283a0f=_0x4fab01[_0x411f77(0x2ae)](_0x443469=>_0x443469[_0x411f77(0x1d1)]);_0x283a0f[_0x411f77(0x228)]();let _0x5966e0=_0x283a0f[_0x411f77(0x23e)](',\x20');if(lastCoinsToBalance!==_0x5966e0)logHistory('success',_0x411f77(0x251)+_0x5966e0);lastCoinsToBalance=_0x5966e0;}}function symbolToCoin(_0x413769){const _0x4ef542=_0x217fa0;let _0x7c62e0;if(_0x413769['includes']('/'+config[_0x4ef542(0x1ba)]))_0x7c62e0=_0x413769['replace']('/'+config[_0x4ef542(0x1ba)],'');if(_0x413769['includes'](config[_0x4ef542(0x1ba)]+'/'))_0x7c62e0=_0x413769[_0x4ef542(0x283)](config[_0x4ef542(0x1ba)]+'/','');return _0x7c62e0;}async function validateOrders(_0x4d3b7d=0x0){const _0x4c1ad3=_0x217fa0;let _0x5841aa=[],_0x7d8971=config[_0x4c1ad3(0x253)]==_0x4c1ad3(0x29f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4c1ad3(0x257)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x10bcdb=>{const _0x198861=_0x4c1ad3;let _0x517935=previousCoins[_0x198861(0x1f2)](_0x23377c=>_0x23377c['coin']==symbolToCoin(_0x10bcdb[_0x198861(0x21f)])),_0x14f415=currentCoins[_0x198861(0x1f2)](_0x434118=>_0x434118[_0x198861(0x1d1)]==symbolToCoin(_0x10bcdb['symbol'])),_0x304fdf,_0x184e35;_0x10bcdb[_0x198861(0x21c)]==_0x198861(0x2a8)&&!_0x10bcdb[_0x198861(0x231)]||_0x10bcdb[_0x198861(0x21c)]==_0x198861(0x216)&&_0x10bcdb['reverse']?(_0x304fdf=_0x517935['number']+0.9*_0x10bcdb[_0x198861(0x1a2)],_0x184e35=_0x517935[_0x198861(0x22f)]+1.1*_0x10bcdb[_0x198861(0x1a2)]):(_0x304fdf=_0x517935[_0x198861(0x22f)]-1.1*_0x10bcdb[_0x198861(0x1a2)],_0x184e35=_0x517935[_0x198861(0x22f)]-0.9*_0x10bcdb[_0x198861(0x1a2)]);const _0x36b60f=_0x10bcdb[_0x198861(0x1a2)]!=0x0&&_0x14f415[_0x198861(0x22f)]>=_0x304fdf&&_0x14f415[_0x198861(0x22f)]<=_0x184e35;_0x5841aa[_0x198861(0x1bc)](_0x36b60f);if(_0x36b60f&&config[_0x198861(0x253)]!=_0x198861(0x29f)){if(_0x10bcdb[_0x198861(0x231)])logHistory('order',_0x198861(0x282)+_0x10bcdb[_0x198861(0x21f)]+'\x20'+_0x10bcdb[_0x198861(0x21c)]+'\x20#'+formatResult(_0x10bcdb[_0x198861(0x1a2)]/_0x10bcdb[_0x198861(0x24d)],0x8)+'\x20@'+formatResult(_0x10bcdb[_0x198861(0x24d)],0x8));else logHistory('order','Order\x20filled:\x20'+_0x10bcdb['symbol']+'\x20'+_0x10bcdb[_0x198861(0x21c)]+'\x20#'+formatResult(_0x10bcdb[_0x198861(0x1a2)],0x8)+'\x20@'+formatResult(_0x10bcdb['price'],0x8));}}),_0x5841aa[_0x4c1ad3(0x26f)]((_0x11d599,_0x553fe6)=>{const _0x4eb074=_0x4c1ad3;if(_0x11d599)lastOrders[_0x4eb074(0x281)](_0x553fe6,0x1);});if(_0x4d3b7d<_0x7d8971&&_0x5841aa[_0x4c1ad3(0x1a5)](![])){if(_0x4d3b7d==0x0){config[_0x4c1ad3(0x253)]=='market'?logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory('error',_0x4c1ad3(0x1d3));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4d3b7d);},0xa*0x3e8);}else{(_0x4d3b7d==0x1||_0x4d3b7d==Math[_0x4c1ad3(0x208)](_0x7d8971/0x2)||_0x4d3b7d==_0x7d8971-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4d3b7d);},validateOrderInterval);}}else{lockOrders=![];if(_0x4d3b7d>0x0&&!_0x5841aa['includes'](![]))config['ordertype']==_0x4c1ad3(0x29f)?logHistory('success',_0x4c1ad3(0x275)):logHistory(_0x4c1ad3(0x230),_0x4c1ad3(0x1db));else _0x4d3b7d>0x0&&_0x5841aa[_0x4c1ad3(0x1a5)](![])&&(config['ordertype']==_0x4c1ad3(0x29f)?logHistory(_0x4c1ad3(0x230),_0x4c1ad3(0x1bb)+Math[_0x4c1ad3(0x208)](_0x7d8971*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x4c1ad3(0x26f)](async _0x1f3ecd=>{const _0x21e713=_0x4c1ad3;try{const _0x34ff6c=await exchange[_0x21e713(0x18d)](_0x1f3ecd[_0x21e713(0x18c)],_0x1f3ecd['symbol']);}catch(_0x15712d){if(_0x15712d[_0x21e713(0x278)]()['includes'](_0x21e713(0x27f))){}else await handleError(_0x15712d,'cancelOrder()');}}),logHistory(_0x4c1ad3(0x230),_0x4c1ad3(0x25b)+Math[_0x4c1ad3(0x208)](_0x7d8971*validateOrderInterval/0xea60)+_0x4c1ad3(0x21d))));}}async function resetCoinResults(){const _0x326375=_0x217fa0;dbCoinResults[_0x326375(0x1d9)](_0x326375(0x1c4))['remove']()[_0x326375(0x21b)]();let _0x52cb78=await getStartingBalances(getNormalizedPerformance(),![]);_0x52cb78[_0x326375(0x1c4)]['forEach'](_0xe4eb6a=>{const _0x28219d=_0x326375;if(_0xe4eb6a[_0x28219d(0x1d1)]!=config['basecoin']){let _0x5c09bb={'coin':_0xe4eb6a[_0x28219d(0x1d1)],'number':_0xe4eb6a[_0x28219d(0x22f)],'breakeven':_0xe4eb6a[_0x28219d(0x24d)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x28219d(0x1c4))[_0x28219d(0x1bc)](_0x5c09bb)['write']();}});}async function updateCoinResults(_0x5ed3c0){const _0x2cc987=_0x217fa0;let _0x247723,_0x474ef6,_0x27d5c5,_0x42e3b4,_0xe85850,_0x1db487,_0x147dfe=dbCoinResults[_0x2cc987(0x1d9)](_0x2cc987(0x1c4))[_0x2cc987(0x1f2)]({'coin':_0x5ed3c0[_0x2cc987(0x1d1)]})[_0x2cc987(0x21e)]();if(!_0x147dfe)return;if(_0x5ed3c0['fee']&&_0x5ed3c0['fee'][_0x2cc987(0x1e2)]==config[_0x2cc987(0x1ba)])_0x247723=_0x5ed3c0['fee'][_0x2cc987(0x20c)];else{if(_0x5ed3c0[_0x2cc987(0x280)]&&_0x5ed3c0['fee'][_0x2cc987(0x1e2)]==_0x2cc987(0x23c))_0x247723=_0x5ed3c0[_0x2cc987(0x280)]['cost']*global['ticker'][_0x2cc987(0x23c)+config[_0x2cc987(0x1ba)]];else _0x247723=0.001*_0x5ed3c0['filled'];}const _0x394559=_0x5ed3c0[_0x2cc987(0x21f)][_0x2cc987(0x1a5)](config[_0x2cc987(0x1ba)]+'/');_0x394559&&(_0x1db487={'coin':_0x5ed3c0[_0x2cc987(0x1d1)],'symbol':_0x5ed3c0[_0x2cc987(0x21f)],'filled':_0x5ed3c0[_0x2cc987(0x1a2)]*_0x5ed3c0[_0x2cc987(0x24d)],'side':_0x5ed3c0[_0x2cc987(0x21c)]==_0x2cc987(0x216)?_0x2cc987(0x2a8):_0x2cc987(0x216),'price':0x1/_0x5ed3c0[_0x2cc987(0x24d)]},_0x5ed3c0={..._0x1db487});_0x5ed3c0[_0x2cc987(0x21c)]==_0x2cc987(0x2a8)?_0x27d5c5=(_0x147dfe[_0x2cc987(0x1f1)]*_0x147dfe[_0x2cc987(0x22f)]+_0x5ed3c0[_0x2cc987(0x24d)]*_0x5ed3c0[_0x2cc987(0x1a2)])/(_0x147dfe[_0x2cc987(0x22f)]+_0x5ed3c0[_0x2cc987(0x1a2)]):_0x27d5c5=(_0x147dfe[_0x2cc987(0x1f1)]*_0x147dfe[_0x2cc987(0x22f)]-_0x5ed3c0['price']*_0x5ed3c0[_0x2cc987(0x1a2)])/(_0x147dfe[_0x2cc987(0x22f)]-_0x5ed3c0[_0x2cc987(0x1a2)]);_0x5ed3c0[_0x2cc987(0x21c)]==_0x2cc987(0x2a8)?_0x42e3b4=_0x147dfe['realized']:_0x42e3b4=_0x147dfe[_0x2cc987(0x1f7)]+(_0x5ed3c0[_0x2cc987(0x24d)]-_0x147dfe[_0x2cc987(0x1f1)])*_0x5ed3c0[_0x2cc987(0x1a2)];_0x474ef6=_0x5ed3c0['side']==_0x2cc987(0x216)?_0x147dfe[_0x2cc987(0x22f)]-_0x5ed3c0[_0x2cc987(0x1a2)]:_0x147dfe[_0x2cc987(0x22f)]+_0x5ed3c0[_0x2cc987(0x1a2)],_0xe85850=(_0x5ed3c0['price']-_0x27d5c5)*_0x474ef6;let _0x41f6c={'coin':_0x5ed3c0[_0x2cc987(0x1d1)],'number':_0x474ef6,'breakeven':formatResult(_0x27d5c5,0x8),'realized':formatResult(_0x42e3b4,0x8),'unrealized':formatResult(_0xe85850,0x8),'fees':formatResult(_0x147dfe['fees']+_0x247723,0x8),'sells':_0x5ed3c0[_0x2cc987(0x21c)]==_0x2cc987(0x216)?_0x147dfe[_0x2cc987(0x1ed)]+0x1:_0x147dfe[_0x2cc987(0x1ed)],'buys':_0x5ed3c0[_0x2cc987(0x21c)]==_0x2cc987(0x2a8)?_0x147dfe['buys']+0x1:_0x147dfe[_0x2cc987(0x2a2)]};dbCoinResults[_0x2cc987(0x1d9)](_0x2cc987(0x1c4))[_0x2cc987(0x1f2)]({'coin':_0x5ed3c0[_0x2cc987(0x1d1)]})['assign'](_0x41f6c)[_0x2cc987(0x21b)]();}async function placeOrder(_0x17a8e4){const _0x414e58=_0x217fa0,_0xa81d7e=config[_0x414e58(0x253)]=='market'?_0x414e58(0x29f):_0x414e58(0x211);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x414e58(0x1ea)](JSON[_0x414e58(0x1a7)](currentCoins));for(const _0x168077 of _0x17a8e4){let _0x2c5472,_0x1801c6,_0x3fc5b4,_0x5e83a3,_0x4fec51,_0x23c170=_0x168077['symbol'];try{const _0x146c4e=await exchange['fetchTickers'](_0x23c170),_0x47caca=_0x146c4e[_0x23c170];_0x2c5472=_0x168077[_0x414e58(0x231)]?0x1/_0x168077[_0x414e58(0x1eb)]:_0x168077[_0x414e58(0x1eb)],_0x1801c6=_0x47caca[_0x414e58(0x24c)],_0x3fc5b4=_0x47caca[_0x414e58(0x19f)];_0x168077[_0x414e58(0x231)]?(_0x5e83a3=_0x168077[_0x414e58(0x21c)]==_0x414e58(0x2a8)?'sell':'buy',_0x4fec51=Math[_0x414e58(0x190)](_0x168077[_0x414e58(0x26c)])/_0x2c5472):(_0x5e83a3=_0x168077['side'],_0x4fec51=Math[_0x414e58(0x190)](_0x168077[_0x414e58(0x26c)]));_0xa81d7e=='limit'&&(config[_0x414e58(0x253)]==_0x414e58(0x1c0)&&(_0x2c5472=_0x5e83a3==_0x414e58(0x2a8)?_0x1801c6:_0x3fc5b4),config[_0x414e58(0x253)]==_0x414e58(0x236)&&(_0x2c5472=_0x5e83a3==_0x414e58(0x2a8)?_0x3fc5b4:_0x1801c6));_0x4fec51=formatResult(_0x4fec51,0x8),_0x2c5472=formatResult(_0x2c5472,0x8);const _0x44b597=await exchange['createOrder'](_0x23c170,_0xa81d7e,_0x5e83a3,_0x4fec51,_0x2c5472);lastOrders[_0x414e58(0x1bc)]({'orderId':_0x44b597['id'],'symbol':_0x23c170,'side':_0x5e83a3,'reverse':_0x168077['reverse'],'amount':_0x168077[_0x414e58(0x231)]?_0x44b597['amount']*_0x44b597[_0x414e58(0x24d)]:_0x44b597[_0x414e58(0x26b)],'filled':_0x168077[_0x414e58(0x231)]?_0x44b597[_0x414e58(0x1a2)]*_0x44b597['price']:_0x44b597[_0x414e58(0x1a2)],'price':_0x44b597[_0x414e58(0x24d)]});const _0x4f3f90=_0x5e83a3==_0x414e58(0x216)?config[_0x414e58(0x2af)]?String[_0x414e58(0x20b)]('0x'+config['emojisell'])+'\x20':'':config[_0x414e58(0x21a)]?String[_0x414e58(0x20b)]('0x'+config[_0x414e58(0x21a)])+'\x20':'',_0x9546ca=_0xa81d7e==_0x414e58(0x29f)?_0x414e58(0x254):config['ordertype']==_0x414e58(0x1c0)?'Limit\x20(high-margin)':_0x414e58(0x1ab);if(_0xa81d7e==_0x414e58(0x29f))logHistory(_0x414e58(0x234),''+_0x4f3f90+_0x9546ca+_0x414e58(0x207)+_0x23c170+'\x20'+_0x5e83a3+'\x20#'+formatResult(_0x44b597[_0x414e58(0x1a2)],0x8)+'\x20@'+formatResult(_0x44b597[_0x414e58(0x24d)],0x8));else logHistory(_0x414e58(0x234),''+_0x4f3f90+_0x9546ca+_0x414e58(0x207)+_0x23c170+'\x20'+_0x5e83a3+'\x20#'+formatResult(_0x44b597[_0x414e58(0x26b)],0x8)+'\x20@'+formatResult(_0x44b597[_0x414e58(0x24d)],0x8));_0x44b597[_0x414e58(0x1d1)]=_0x168077[_0x414e58(0x1d1)],await updateCoinResults(_0x44b597);if(config['cooldown']!=0x0){let _0x305853=null;if(cooldownTracker[_0x414e58(0x2a3)]==config['cooldown']-0x1)_0x305853=cooldownTracker['shift']();const _0xabbde1=getTimeStamp();cooldownTracker[_0x414e58(0x1bc)](_0xabbde1);if(_0x305853){const _0x4fbaca=fns[_0x414e58(0x217)](new Date(_0xabbde1),new Date(_0x305853));_0x4fbaca<cooldownInterval&&(logHistory('error','Executed\x20'+config[_0x414e58(0x1b1)]+_0x414e58(0x269)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x414e58(0x225)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x2a2aca){if(_0x2a2aca['toString']()[_0x414e58(0x1a5)](_0x414e58(0x296)))logHistory(_0x414e58(0x232),_0x414e58(0x1ae)+_0x23c170);else{if(_0x2a2aca['toString']()[_0x414e58(0x1a5)](_0x414e58(0x248)))logHistory(_0x414e58(0x232),'Order\x20amount\x20is\x20invalid:\x20'+_0x23c170);else await handleError(_0x2a2aca,'placeOrder()');}}}if(lastOrders[_0x414e58(0x2a3)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x414e58(0x1d8)]&&(config[_0x414e58(0x253)]==_0x414e58(0x29f)?logHistory(_0x414e58(0x232),_0x414e58(0x260)):logHistory('error',_0x414e58(0x193)));else coolingDown&&(!config[_0x414e58(0x1d8)]&&logHistory(_0x414e58(0x232),_0x414e58(0x19e)));}}function logHistory(_0x345d1d,_0x5da57e,_0x46e4e1=''){const _0x2554cd=_0x217fa0;let _0x1e386c={'time':getTimeStamp(),'type':_0x345d1d,'event':_0x5da57e};dbLogs[_0x2554cd(0x1d9)](_0x2554cd(0x1ca))[_0x2554cd(0x1bc)](_0x1e386c)['write']();if(_0x46e4e1=='')_0x46e4e1=_0x5da57e;proxyEmit(_0x2554cd(0x28b),{'log':_0x1e386c,'summary':_0x46e4e1}),process[_0x2554cd(0x1a6)]({'telegram':{..._0x1e386c,'botname':config[_0x2554cd(0x1e5)],'showname':config[_0x2554cd(0x2a4)]}},_0x358720=>{}),logging(''+_0x1e386c['event']);}function emitHistory(_0x2f49f0={}){const _0x4e02c3=_0x217fa0;Object['keys'](_0x2f49f0)['length']==0x0&&(_0x2f49f0={'type':[_0x4e02c3(0x234),_0x4e02c3(0x28b)],'event':'','page':0x1});if(_0x2f49f0[_0x4e02c3(0x18a)][_0x4e02c3(0x1a5)]('event'))_0x2f49f0['type']['splice'](_0x2f49f0[_0x4e02c3(0x18a)][_0x4e02c3(0x1e3)](_0x4e02c3(0x28b)),0x1,_0x4e02c3(0x232),_0x4e02c3(0x230));if(dbLogs[_0x4e02c3(0x1a0)](_0x4e02c3(0x1ca))[_0x4e02c3(0x21e)]()){let _0x3ab6f5=dbLogs[_0x4e02c3(0x1d9)](_0x4e02c3(0x1ca))['filter'](_0x3601e0=>{const _0x8e6382=_0x4e02c3;if(_0x2f49f0[_0x8e6382(0x18a)][_0x8e6382(0x2a3)]==0x0)return![];else return _0x2f49f0[_0x8e6382(0x18a)]['includes'](_0x3601e0[_0x8e6382(0x18a)]);})[_0x4e02c3(0x271)](_0x4625ec=>{const _0x4ef419=_0x4e02c3;if(_0x2f49f0[_0x4ef419(0x28b)]=='')return!![];else return _0x4625ec['event'][_0x4ef419(0x267)]()[_0x4ef419(0x1a5)](_0x2f49f0[_0x4ef419(0x28b)][_0x4ef419(0x267)]());})[_0x4e02c3(0x1b2)](_0x4e02c3(0x215)),_0x487508=_0x3ab6f5[_0x4e02c3(0x21e)]()[_0x4e02c3(0x2a3)];_0x3ab6f5=_0x3ab6f5[_0x4e02c3(0x231)]()[_0x4e02c3(0x273)]((_0x2f49f0[_0x4e02c3(0x1ec)]-0x1)*logPageSize,_0x2f49f0[_0x4e02c3(0x1ec)]*logPageSize-0x1)[_0x4e02c3(0x231)]()[_0x4e02c3(0x21e)](),proxyEmit(_0x4e02c3(0x24f),{'logs':_0x3ab6f5,'total':_0x487508});}else proxyEmit(_0x4e02c3(0x24f),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2f45c0){const _0x57db32=_0x217fa0;if(dbLogs[_0x57db32(0x1a0)](_0x57db32(0x1ca))['value']()){const _0x1fc062=dbLogs[_0x57db32(0x1d9)](_0x57db32(0x1ca))[_0x57db32(0x1b2)](_0x57db32(0x215))[_0x57db32(0x271)](_0x1b7481=>{const _0x5b30e1=_0x57db32;return _0x1b7481[_0x5b30e1(0x18a)]==_0x5b30e1(0x234);})[_0x57db32(0x21e)]();dbLogs[_0x57db32(0x1d9)](_0x57db32(0x1ca))[_0x57db32(0x299)]()[_0x57db32(0x21b)](),dbLogs[_0x57db32(0x1d9)]('logs')[_0x57db32(0x1d4)](_0x1fc062)[_0x57db32(0x21b)](),emitHistory(_0x2f45c0);}}async function pauseBot(_0x1ad579=''){const _0x3051c2=_0x217fa0,_0x44266f=new Date()[_0x3051c2(0x1bd)]();if(!lastBotPause)lastBotPause=new Date()[_0x3051c2(0x1bd)](),consecutivePauses=0x1;else{if(_0x44266f-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x3051c2(0x1a6)]({'stop':_0x3051c2(0x241)},_0x4b74a8=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x3051c2(0x1bd)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x1ad579)_0x1ad579+=_0x3051c2(0x196);logHistory(_0x3051c2(0x232),_0x1ad579+_0x3051c2(0x27a)+pauseBotInterval/0xea60+_0x3051c2(0x1d6)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x2028e0=_0x217fa0;process['send']({'stop':_0x2028e0(0x29c)},_0x3f4b11=>{}),await sleep(0x7d0);}async function handleError(_0x8b6bad,_0x5d623a,_0x784669=''){const _0x319fb1=_0x217fa0;if(_0x8b6bad[_0x319fb1(0x278)]()[_0x319fb1(0x1a5)](_0x319fb1(0x1de)))await pauseBot(_0x319fb1(0x28c));else{if(_0x8b6bad[_0x319fb1(0x278)]()[_0x319fb1(0x1a5)](_0x319fb1(0x264)))await pauseBot(_0x319fb1(0x1c6));else{if(_0x8b6bad['toString']()['includes']('RequestTimeout'))await pauseBot(_0x319fb1(0x295));else{if(_0x8b6bad[_0x319fb1(0x278)]()['includes'](_0x319fb1(0x263)))logHistory(_0x319fb1(0x232),_0x5d623a+_0x319fb1(0x26d)),logHistory(_0x319fb1(0x232),_0x319fb1(0x1fd)),await killBot();else{if(_0x8b6bad['toString']()[_0x319fb1(0x1a5)](_0x319fb1(0x19c)))logHistory('error',_0x5d623a+_0x319fb1(0x22a)),logHistory('error',_0x319fb1(0x1fd)),await killBot();else{if(_0x8b6bad[_0x319fb1(0x278)]()[_0x319fb1(0x1a5)](_0x319fb1(0x2a5)))logHistory(_0x319fb1(0x232),_0x5d623a+_0x319fb1(0x27e)),logHistory(_0x319fb1(0x232),_0x319fb1(0x1fd)),await killBot();else{if(_0x8b6bad[_0x319fb1(0x278)]()[_0x319fb1(0x1a5)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x319fb1(0x232),_0x5d623a+_0x319fb1(0x25f)),logHistory(_0x319fb1(0x232),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x8b6bad['toString']()['includes']('InvalidNonce'))await pauseBot(_0x319fb1(0x187)),process[_0x319fb1(0x1a6)]({'stop':_0x319fb1(0x241)},_0x27d91d=>{});else _0x8b6bad[_0x319fb1(0x278)]()[_0x319fb1(0x1a5)](_0x319fb1(0x284))?logHistory(_0x319fb1(0x232),_0x5d623a+_0x319fb1(0x19b)):(logging(_0x5d623a+_0x319fb1(0x1f0),_0x8b6bad),await pauseBot(_0x319fb1(0x20f)));}}}}}}}}function formatResult(_0xec819c,_0x2276a8){const _0x11af90=_0x217fa0;return parseFloat(_0xec819c[_0x11af90(0x227)](_0x2276a8));}function logging(_0x31d140,_0x21d2fc=''){const _0x3b14ab=_0x217fa0;if(config[_0x3b14ab(0x2a4)])console[_0x3b14ab(0x2a9)](getTimeStamp()+':\x20'+config[_0x3b14ab(0x1e5)]+_0x3b14ab(0x1d7)+_0x31d140,_0x21d2fc);else console[_0x3b14ab(0x2a9)](getTimeStamp()+_0x3b14ab(0x186)+botID+_0x3b14ab(0x1d7)+_0x31d140,_0x21d2fc);}function getServerTime(){const _0x55b7ce=_0x217fa0,_0x53b0fc=new Date();return _0x53b0fc[_0x55b7ce(0x238)]()+'/'+(_0x53b0fc[_0x55b7ce(0x224)]()+0x1)[_0x55b7ce(0x278)]()[_0x55b7ce(0x26e)](0x2,'0')+'/'+_0x53b0fc[_0x55b7ce(0x1e9)]()[_0x55b7ce(0x278)]()[_0x55b7ce(0x26e)](0x2,'0')+'\x20'+_0x53b0fc['getHours']()[_0x55b7ce(0x278)]()['padStart'](0x2,'0')+':'+_0x53b0fc[_0x55b7ce(0x1c9)]()[_0x55b7ce(0x278)]()[_0x55b7ce(0x26e)](0x2,'0')+':'+_0x53b0fc['getSeconds']()['toString']()[_0x55b7ce(0x26e)](0x2,'0');}function getTimeStamp(){const _0x16d083=_0x217fa0,_0x28354c=shiftedTime();return _0x28354c[_0x16d083(0x238)]()+'/'+(_0x28354c[_0x16d083(0x224)]()+0x1)[_0x16d083(0x278)]()[_0x16d083(0x26e)](0x2,'0')+'/'+_0x28354c[_0x16d083(0x1e9)]()[_0x16d083(0x278)]()['padStart'](0x2,'0')+'\x20'+_0x28354c['getHours']()[_0x16d083(0x278)]()[_0x16d083(0x26e)](0x2,'0')+':'+_0x28354c[_0x16d083(0x1c9)]()['toString']()[_0x16d083(0x26e)](0x2,'0')+':'+_0x28354c[_0x16d083(0x287)]()[_0x16d083(0x278)]()[_0x16d083(0x26e)](0x2,'0');}function getDate(){const _0xd92b4b=_0x217fa0,_0x14e351=shiftedTime();return _0x14e351[_0xd92b4b(0x238)]()+'/'+(_0x14e351['getMonth']()+0x1)[_0xd92b4b(0x278)]()[_0xd92b4b(0x26e)](0x2,'0')+'/'+_0x14e351['getDate']()['toString']()[_0xd92b4b(0x26e)](0x2,'0');}function getHour(){const _0x426e08=_0x217fa0,_0x565329=shiftedTime();return _0x565329['getHours']()[_0x426e08(0x278)]()['padStart'](0x2,'0');}function sleep(_0x1ade53){return new Promise(_0xce706d=>setTimeout(_0xce706d,_0x1ade53));}function shiftedTime(){const _0x5741c4=_0x217fa0,_0x452541=new Date();let _0x372c77=_0x452541;if(config&&config[_0x5741c4(0x245)]!==0x0)_0x372c77=fns[_0x5741c4(0x261)](_0x452541,{'hours':config[_0x5741c4(0x245)]});return _0x372c77;}