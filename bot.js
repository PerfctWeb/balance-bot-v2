const _0x466c51=_0x5776;(function(_0x3adbc9,_0x212ffa){const _0x3aecad=_0x5776,_0x2962fb=_0x3adbc9();while(!![]){try{const _0x398a7a=parseInt(_0x3aecad(0x271))/0x1*(parseInt(_0x3aecad(0x215))/0x2)+parseInt(_0x3aecad(0x258))/0x3+parseInt(_0x3aecad(0x2cf))/0x4+-parseInt(_0x3aecad(0x23d))/0x5*(-parseInt(_0x3aecad(0x202))/0x6)+-parseInt(_0x3aecad(0x277))/0x7*(-parseInt(_0x3aecad(0x217))/0x8)+parseInt(_0x3aecad(0x248))/0x9*(parseInt(_0x3aecad(0x1c5))/0xa)+-parseInt(_0x3aecad(0x22e))/0xb*(parseInt(_0x3aecad(0x272))/0xc);if(_0x398a7a===_0x212ffa)break;else _0x2962fb['push'](_0x2962fb['shift']());}catch(_0x32fba6){_0x2962fb['push'](_0x2962fb['shift']());}}}(_0x27fd,0x80a5c));const _0x57d12c=function(){let _0x6a8b42=!![];return function(_0x33144c,_0x107479){const _0x33b77d=_0x6a8b42?function(){const _0x134654=_0x5776;if(_0x107479){const _0x343f3c=_0x107479[_0x134654(0x212)](_0x33144c,arguments);return _0x107479=null,_0x343f3c;}}:function(){};return _0x6a8b42=![],_0x33b77d;};}(),_0x3feefa=_0x57d12c(this,function(){const _0x373557=_0x5776;return _0x3feefa[_0x373557(0x285)]()[_0x373557(0x25c)](_0x373557(0x253))[_0x373557(0x285)]()[_0x373557(0x1e2)](_0x3feefa)[_0x373557(0x25c)]('(((.+)+)+)+$');});_0x3feefa();'use strict';const ccxt=require(_0x466c51(0x1bf))['pro'],low=require(_0x466c51(0x19f)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x466c51(0x243))['Crypt'],util=require(_0x466c51(0x257)),argv=require('yargs/yargs')(process[_0x466c51(0x278)][_0x466c51(0x1ca)](0x2))[_0x466c51(0x278)];let exchange;global['ticker']={},global[_0x466c51(0x187)]={};const exceptions={'binance':[_0x466c51(0x1a0),_0x466c51(0x284),_0x466c51(0x25e),_0x466c51(0x239),_0x466c51(0x1a3)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x466c51(0x26a)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x466c51(0x18b)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x466c51(0x1a5))[_0x466c51(0x1cb)],botID=process[_0x466c51(0x278)][0x2]||_0x466c51(0x209),pattern=/^[0-9]{3}$/;!pattern[_0x466c51(0x1ab)](botID)&&(console[_0x466c51(0x1a6)](_0x466c51(0x1d9)+botID+_0x466c51(0x2c8)),killBot());const userID=process[_0x466c51(0x278)][0x3]||'',configpath=userID?_0x466c51(0x213)+userID+'/':'./config/',logspath=userID?_0x466c51(0x1c6)+userID+'/':_0x466c51(0x1c6),loggerfile=fs[_0x466c51(0x2a7)](logspath+_0x466c51(0x195),{'flags':'a'});!fs[_0x466c51(0x250)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x466c51(0x250)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x466c51(0x182)+botID+_0x466c51(0x1f3),logfile=configpath+'bot-'+botID+_0x466c51(0x2a4),performancefile=configpath+_0x466c51(0x182)+botID+_0x466c51(0x2ab),coinresultsfile=configpath+_0x466c51(0x182)+botID+_0x466c51(0x2a5),settingsfile=configpath+_0x466c51(0x221),securefile=configpath+_0x466c51(0x1e1),configbackuppath=configpath+_0x466c51(0x225),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x466c51(0x2a0)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x466c51(0x2a0)]({'data':[],'version':serverversion})[_0x466c51(0x1ac)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x466c51(0x2a0)]({'bot':[],'version':serverversion})[_0x466c51(0x1ac)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x466c51(0x1ac)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x466c51(0x1f2),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xd77217=>{const _0x4f5ffd=_0x466c51;console[_0x4f5ffd(0x1a6)](_0xd77217);},'simple':_0x38c6da=>{const _0x3aeedf=_0x466c51;console[_0x3aeedf(0x1a6)](_0x38c6da),loggerfile['write'](util[_0x3aeedf(0x23f)](_0x38c6da)+'\x0a');},'full':async(_0xe21ed1,_0xf783b3='')=>{const _0x35147b=_0x466c51;let _0xa71b94;if(config[_0x35147b(0x2a8)])_0xa71b94=getTimeStamp()+':\x20'+config[_0x35147b(0x22b)]+'\x20>\x20'+_0xe21ed1;else _0xa71b94=getTimeStamp()+_0x35147b(0x2cc)+botID+_0x35147b(0x27a)+_0xe21ed1;console[_0x35147b(0x1a6)](_0xa71b94),loggerfile['write'](util['format'](_0xa71b94)+'\x0a'),_0xf783b3&&(console[_0x35147b(0x1a6)](_0xf783b3),loggerfile[_0x35147b(0x1ac)](util['format'](_0xf783b3)+'\x0a'));},'debug':async(_0x511213,_0x48b0e1='')=>{const _0x4130c8=_0x466c51;let _0x23a121;if(config[_0x4130c8(0x2a8)])_0x23a121=getTimeStamp()+':\x20'+config[_0x4130c8(0x22b)]+_0x4130c8(0x2ce)+_0x511213;else _0x23a121=getTimeStamp()+_0x4130c8(0x2cc)+botID+_0x4130c8(0x2ce)+_0x511213;if(debugging)console[_0x4130c8(0x1a6)](_0x23a121);loggerfile[_0x4130c8(0x1ac)](util[_0x4130c8(0x23f)](_0x23a121)+'\x0a');if(_0x48b0e1){if(debugging)console['log'](_0x48b0e1);loggerfile[_0x4130c8(0x1ac)](util[_0x4130c8(0x23f)](_0x48b0e1)+'\x0a');}}};process['on']('uncaughtException',function(_0xc777d2){const _0x1229a4=_0x466c51;logger[_0x1229a4(0x1b5)](_0xc777d2);});settings[_0x466c51(0x1b4)]!=config[_0x466c51(0x1b4)]&&updateTimeshift(settings[_0x466c51(0x1b4)]);process[_0x466c51(0x261)]({'started':_0x466c51(0x17b)},_0x21b3f5=>{}),initializeProcessListeners();function proxyEmit(_0x5d7881,_0x33d3bb=null){const _0x229f94=_0x466c51;process[_0x229f94(0x261)]({'function':_0x5d7881,'args':_0x33d3bb},_0x1660a7=>{});}function initializeProcessListeners(){const _0x4a1e49=_0x466c51;process['on'](_0x4a1e49(0x281),_0x228f9e=>{const _0x557c6d=_0x4a1e49;switch(Object[_0x557c6d(0x20a)](_0x228f9e)[0x0]){case _0x557c6d(0x1b4):_0x228f9e['timeshift']!=undefined&&(settings[_0x557c6d(0x1b4)]=_0x228f9e[_0x557c6d(0x1b4)],updateTimeshift(settings[_0x557c6d(0x1b4)]));break;case'function':switch(_0x228f9e['function']){case _0x557c6d(0x1f4):initclient();break;case _0x557c6d(0x21f):toggleBotMode();break;case _0x557c6d(0x2b6):emitHistory(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x25f):deleteHistoryAlerts(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x28e):getPortfolio(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x262):storeConfiguration(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x19a):storeHeadless(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x265):getStartingBalances(getNormalizedPerformance());break;case _0x557c6d(0x1e0):placeOrder(_0x228f9e[_0x557c6d(0x1d2)]);break;case _0x557c6d(0x293):cancelLoading();break;case _0x557c6d(0x29b):showConfig();break;case _0x557c6d(0x286):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x50c3b3=null,_0x234c62=![]){const _0x21aee0=_0x466c51;logger[_0x21aee0(0x1ae)](_0x21aee0(0x2b1)+(_0x50c3b3!=null)+'\x20|\x20'+_0x234c62);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x234c62)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config['apiKey']!=''&&config[_0x21aee0(0x1f6)]!='***'){await initExchange();let _0x313dc5=![];_0x313dc5=await loadSymbols();if(_0x313dc5){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x50c3b3),exchangeStopped=![];if(lastOrders[_0x21aee0(0x2ad)]==0x0&&allOpenOrders[_0x21aee0(0x2ad)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x11da20=_0x466c51;logger[_0x11da20(0x1ae)](_0x11da20(0x180));while(lockOrders!=ORDERS[_0x11da20(0x18b)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x2474a0=config['exchange'],_0x29ea58=config['apiKey'],_0x425ee0=config[_0x466c51(0x218)]){const _0x23ee97=_0x466c51;exchange&&await stopExchange();!supportedExchanges()[_0x23ee97(0x1f8)](_0x2474a0)&&(logger[_0x23ee97(0x224)](_0x23ee97(0x22a)+_0x2474a0+'\x20exchange'),killBot());const _0x17d17c=ccxt[_0x2474a0[_0x23ee97(0x2ac)]()];exchange=new _0x17d17c({'apiKey':_0x29ea58,'secret':_0x425ee0,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x3a6575=_0x466c51;let _0x136c45=config[_0x3a6575(0x1c1)]==_0x3a6575(0x206)?_0x3a6575(0x206):_0x3a6575(0x1b8),_0x4e92e=!allSymbols[_0x3a6575(0x1f8)](_0x136c45+'/USD')?_0x3a6575(0x2b2):'USD',_0x257263=!allSymbols[_0x3a6575(0x1f8)](_0x136c45+'/EUR')?_0x4e92e:_0x3a6575(0x26c);stablecoins={'eur':{'coin':''+_0x136c45+_0x257263,'symbol':_0x136c45+'/'+_0x257263},'usd':{'coin':''+_0x136c45+_0x4e92e,'symbol':_0x136c45+'/'+_0x4e92e}};}async function initwsCcxt(_0x27bc81){const _0x2dd863=_0x466c51;_0x27bc81==null&&(_0x27bc81=[],currentCoins['forEach'](_0x1326b8=>{const _0x1b698b=_0x5776;if(_0x1326b8['coin']!=config[_0x1b698b(0x1c1)])_0x27bc81[_0x1b698b(0x2bc)](_0x1326b8['symbol']);}));if(!_0x27bc81[_0x2dd863(0x1f8)](stablecoins['eur'][_0x2dd863(0x26d)]))_0x27bc81[_0x2dd863(0x2bc)](stablecoins[_0x2dd863(0x2d1)][_0x2dd863(0x26d)]);if(!_0x27bc81[_0x2dd863(0x1f8)](stablecoins[_0x2dd863(0x1bc)][_0x2dd863(0x26d)]))_0x27bc81[_0x2dd863(0x2bc)](stablecoins[_0x2dd863(0x1bc)][_0x2dd863(0x26d)]);if(!_0x27bc81[_0x2dd863(0x1f8)](_0x2dd863(0x1cc)+config[_0x2dd863(0x1c1)]))_0x27bc81[_0x2dd863(0x2bc)](_0x2dd863(0x1cc)+config['basecoin']);loadCoins(_0x27bc81);const _0x4b4c01=async _0xd1a848=>{const _0xed80b=_0x2dd863,_0x3a43fd=await exchange[_0xed80b(0x24a)](_0xd1a848);global[_0xed80b(0x2be)][noslash(_0x3a43fd['symbol'])]=_0x3a43fd[_0xed80b(0x211)];while(!![]){if(!botPaused)try{const _0x37ad4c=await exchange[_0xed80b(0x2d5)](_0xd1a848);global['ticker'][noslash(_0x37ad4c[0x0]['symbol'])]=_0x37ad4c[0x0][_0xed80b(0x1fd)],await sleep(0x3e8);}catch(_0x13c361){if(!exchangeStopped)await handleError(_0x13c361,_0xed80b(0x2d5),_0xd1a848);}else await sleep(0x3e8);}},_0x25f712=async _0x5acaa7=>{const _0x404e59=_0x2dd863;while(!![]){if(!botPaused)try{const _0x54c606=await exchange[_0x404e59(0x24a)](_0x5acaa7);global[_0x404e59(0x187)][_0x54c606[_0x404e59(0x26d)]]=_0x54c606['percentage'],await sleep(0x2710);}catch(_0x2ec523){if(!exchangeStopped)await handleError(_0x2ec523,'fetchTickers',_0x5acaa7);}else await sleep(0x3e8);}},_0x1d3e97=async()=>{const _0x216bbc=_0x2dd863;while(!![]){if(!botPaused)try{const _0x4fa986=await exchange[_0x216bbc(0x189)]();_0x4fa986['forEach'](_0x2d6b95=>{updateNumberCoinsCcxt(_0x2d6b95);});}catch(_0x42511b){if(!exchangeStopped)await handleError(_0x42511b,_0x216bbc(0x189));}else await sleep(0x3e8);}};_0x27bc81['forEach'](async _0x42a8fe=>{_0x4b4c01(_0x42a8fe),_0x25f712(_0x42a8fe);}),!wsEventsSet&&(wsEventsSet=!![],_0x1d3e97());}async function loadSymbols(_0x35f53b=config[_0x466c51(0x29e)]){const _0x27af70=_0x466c51;if(allSymbols)return!![];let _0x8427a5=![];try{markets=await exchange[_0x27af70(0x29d)](),allSymbols=exchange[_0x27af70(0x1fb)]['filter'](_0x4a4ecf=>{const _0x255f5d=_0x27af70;let _0x9b4f1=![];const _0x14ad5c=exceptions[_0x35f53b[_0x255f5d(0x2ac)]()]||[];return _0x14ad5c[_0x255f5d(0x1d4)](_0x4d5522=>{const _0x314bfc=_0x255f5d;if(_0x4a4ecf[_0x314bfc(0x1f8)](_0x4d5522))_0x9b4f1=!![];}),!_0x9b4f1;}),_0x8427a5=!![];}catch(_0x1bf852){_0x8427a5=![],handleError(_0x1bf852,_0x27af70(0x1f1));}return _0x8427a5;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x5a8a4d=_0x466c51;proxyEmit(_0x5a8a4d(0x226),emittedConfiguration()),proxyEmit(_0x5a8a4d(0x267),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x28f78d=getNormalizedPerformance();emitPerformance(_0x28f78d),await getStartingBalances(_0x28f78d);}async function toggleBotMode(){const _0x964a99=_0x466c51;let _0x59f9e5=dbConfig[_0x964a99(0x1a8)](_0x964a99(0x1d8))[_0x964a99(0x1da)]({'botID':botID})[_0x964a99(0x17f)]();if(_0x59f9e5){const _0x37a10c=!_0x59f9e5['headless'];dbConfig[_0x964a99(0x1a8)](_0x964a99(0x1d8))[_0x964a99(0x1da)]({'botID':botID})[_0x964a99(0x1ba)]({'headless':_0x37a10c})['write'](),config['headless']=_0x37a10c,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1fdb16=_0x466c51;process[_0x1fdb16(0x261)]({'updatebotmanager':!![]},_0x3a2fd4=>{});}async function loadCoins(_0xf9fadf){const _0x49b9da=_0x466c51;let _0x372871,_0x5823f2=0x0;loading['remainingSymbols']=[];let _0x2fb44a=0x0;_0xf9fadf[_0x49b9da(0x1d4)](_0x53692d=>{const _0x21aeb3=_0x49b9da;loading[_0x21aeb3(0x2d0)][_0x21aeb3(0x2bc)](_0x53692d);}),loadingCanceled=![];let _0x208d7e=![];while(_0x372871!=_0xf9fadf[_0x49b9da(0x2ad)]){_0x372871=0x0,_0xf9fadf['forEach'](_0x48ed17=>{const _0x2088d3=_0x49b9da;global['ticker'][noslash(_0x48ed17)]&&(loading[_0x2088d3(0x2d0)]=loading[_0x2088d3(0x2d0)]['filter'](_0x25c898=>_0x25c898!=_0x48ed17),_0x372871++);}),loading[_0x49b9da(0x1d5)]=Math['round'](_0x372871/_0xf9fadf['length']*0x64);loading[_0x49b9da(0x1d5)]!=0x64&&(_0x2fb44a>0x1e*0x5&&(loading[_0x49b9da(0x255)]=!![],emitLoadingProgress()),_0x2fb44a>0x78*0x5&&!_0x208d7e&&(loading[_0x49b9da(0x2b7)]=!![],emitLoadingProgress(),_0x208d7e=!![],logHistory(_0x49b9da(0x1d7),_0x49b9da(0x198)+loading[_0x49b9da(0x2d0)][_0x49b9da(0x23b)](',\x20')+_0x49b9da(0x269)),logHistory(_0x49b9da(0x1d7),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x49b9da(0x24c)),pidCoinReloading=setTimeout(()=>{const _0x6e7fff=_0x49b9da;process[_0x6e7fff(0x261)]({'stop':_0x6e7fff(0x1d6)},_0x19b73e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x49b9da(0x2b7)]=!![],emitLoadingProgress();break;}else _0x372871!=_0x5823f2&&(_0x5823f2=_0x372871,emitLoadingProgress()),_0x2fb44a++,await sleep(0xc8);}_0x372871==_0xf9fadf[_0x49b9da(0x2ad)]&&(coinsLoaded=!![],_0x208d7e&&logHistory(_0x49b9da(0x1b3),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4a6427=_0x466c51;proxyEmit(_0x4a6427(0x226),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x2f3c38=_0x466c51;proxyEmit(_0x2f3c38(0x1cf),loading);}async function getFiat(){const _0x2b2567=_0x466c51;let _0x58c583=global[_0x2b2567(0x2be)][stablecoins[_0x2b2567(0x2d1)][_0x2b2567(0x28b)]],_0x6f2bc7=global['ticker'][stablecoins[_0x2b2567(0x1bc)][_0x2b2567(0x28b)]];return{'eur':Number(_0x58c583),'usd':Number(_0x6f2bc7)};}function capitalize(_0x5544ea){const _0x8489c4=_0x466c51;return _0x5544ea[_0x8489c4(0x28f)](0x0,0x1)[_0x8489c4(0x1c2)]()+_0x5544ea['substring'](0x1);}function supportedExchanges(){const _0xb16a73=_0x466c51,_0x320e7d=['ws',_0xb16a73(0x238),_0xb16a73(0x24a),_0xb16a73(0x2d5),'watchOrders',_0xb16a73(0x282),_0xb16a73(0x1cd),_0xb16a73(0x207),_0xb16a73(0x2c7),_0xb16a73(0x1e8)];let _0x54e160=[];const _0x4b0189=ccxt['exchanges']['map'](_0x244820=>new ccxt[_0x244820]())[_0xb16a73(0x230)](_0x262d04=>_0x262d04[_0xb16a73(0x1c7)]['ws']);return _0x4b0189[_0xb16a73(0x1d4)](_0x19438a=>{const _0x48fe21=_0xb16a73;let _0x4be09d=0x0;_0x320e7d['forEach'](_0x72e9da=>{const _0x3bf362=_0x5776;_0x72e9da in _0x19438a[_0x3bf362(0x1c7)]&&_0x19438a[_0x3bf362(0x1c7)][_0x72e9da]&&_0x4be09d++;}),_0x4be09d==_0x320e7d[_0x48fe21(0x2ad)]&&_0x54e160['push'](capitalize(_0x19438a['id']));}),_0x54e160;}function setStartDatePerformance(){const _0x44db81=_0x466c51;if(config&&config['liquidity'][0x0]['changes'][_0x44db81(0x2ad)]!=0x0){const _0x2a510c=config['liquidity'][0x0][_0x44db81(0x18e)];dbPerformance[_0x44db81(0x1a8)](_0x44db81(0x2aa))[_0x44db81(0x1da)]({'date':config['startdate']})[_0x44db81(0x1ba)]({'coins':_0x2a510c})[_0x44db81(0x1ac)]();}}function _0x27fd(){const _0x2eda66=['realized','getHours','starting-balances','-------------------------------\x0a','109467hwKyXE','settings','fetchTicker','change24h','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Bot\x20','Market','orderId','existsSync','closed','getPortfolio()','(((.+)+)+)+$','%\x20\x0a','timeout','logs','util','882681GRMSXg','\x20minutes','padEnd','MIN_NOTIONAL','search','1\x20-\x20Validate\x20orders:\x20','XEM/BUSD','deleteHistoryAlerts','status','send','storeConfiguration','\x20minutes\x20-\x20','2\x20-\x20Validate\x20orders:\x20','getStartingBalances','Order\x20filled:\x20','exchanges','amount','\x20-\x20bot\x20not\x20started','freeze','parse','EUR','symbol','Unknown\x20error\x20occured','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','distribution','12aSgIGp','30746076iTNfVN','\x20change','min','\x20:\x20','OrderNotFound','6115081IPucNR','argv','fiat','\x20>\x20','initial','1\x20-\x20Handle\x20open\x20orders','Cooldown\x20ended\x20-\x20balancing\x20resumed','random','\x20not\x20responding','privateKey','message','cancelOrder','InvalidNonce','HOT/BTC','toString','sendPortfolioTelegram','threshold','net-basecoin','2.3.5','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','coin','add','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getPortfolio','substring','balances','<b>Bot\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','cancelLoading','.json','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','<b>','trade','datetime','emojibuy','startprice','showConfig','warning','loadMarkets','exchange','cloneDeep','defaults','reverse','buy','balancing\x20resumed','-events.json','-results.json','Limit\x20(low-margin)','createWriteStream','showname','</pre>','data','-performance.json','toLowerCase','length','ordertype','event-history','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','Reset\x20|\x20','USDT','milliseconds','AuthenticationError','Order(s)\x20not\x20validated\x20after\x20','emitHistory','cancel','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','no\x20open\x20orders','sortBy','push','performance','ticker','map','ExchangeNotAvailable','ORDERS.UNLOCKED','set','\x20API\x20secret\x20is\x20invalid','USD','LOCKED','<pre>','fetchClosedOrders',',\x20must\x20be\x20a\x203\x20digit\x20number','netoffset','portfolio','Net\x20',':\x20Bot\x20','getMinutes','\x20>\x20[DEBUG]\x20','3471412IORdZc','remainingSymbols','eur','number','replace','recreate','watchTrades','none','running','bid','Order(s)\x20validated\x20-\x20','rightTxt','value','Initiating\x20exchange\x20reload','emojisell','bot-','2\x20-\x20FILLED\x20unknown\x20order:\x20','date','exec','2\x20-\x20Orders\x20unlocked','change','kill','watchOrders','Unfilled\x20order(s)\x20canceled\x20after\x20','UNLOCKED','recovery','canceled','changes','sort','getTime','Invalid\x20quantity','fee','limit','\x20API\x20blocked\x20(DDoS\x20protection)','/output-000.log','1\x20-\x20Unlock\x20orders','ORDERS.LOCKED','Failed\x20to\x20load\x20coin\x20data\x20for\x20','average','storeHeadless','page','Pausing\x20for\x20','target','timestamp','lowdb','DAI/','getFullYear','limit-low','YOYOW/','type','./version.json','log','Limit\x20(high-margin)','get','leftTxt','splice','test','write','sell','debug','shift','padStart','botID','time','success','timeshift','simple','timer:','cooldown','BTC','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','assign','differenceInSeconds','usd','parseISO','0\x20-\x20EXECUTION:\x20','ccxt','getOpenOrders()','basecoin','toUpperCase','2\x20-\x20Handled\x20open\x20orders','max','210kgKssl','./logs/','has','coins','\x20|\x20','slice','version','BNB/','createOrder','indexOf','coin-loading-progress','BNB','event','args','\x20has\x20a\x2024h\x20drop\x20of\x20','forEach','progress','restart','error','bot','Error:\x20Invalid\x20argument\x20','find','open','stringify','\x20hour','toFixed','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','placeOrder','bb-secure.json','constructor','remove','offset','Executed\x20','API-key\x20format\x20invalid','round','fetchBalance','cost','yyyy/MM/dd','************','***','valid','side','1\x20-\x20FILLED:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','loadSymbols()','sha256','-config.json','initclient','startnumber','apiKey','startdate','includes','filled','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','symbols','\x20order:\x20','price','sells','order','concat','split','12666TiPDaT','BUSD','secure','final','ETH','fetchOpenOrders','orderstatus','001','keys','clientOrderId','limits','\x20not\x20available','currency','\x20portfolio:</b>\x20\x0a\x0a','Manual\x20balancing\x20required','last','apply','./config/','\x20API\x20key\x20is\x20invalid','3178KKkknB','limit-high','8RPLVhi','apiSecret','DDoSProtection','net-fiat','fromCodePoint','getMonth','openOrders','getCoinNumber()','toggleBotMode','delta','bb-settings.json','abs','market','full','/backup/','configuration','getCoins()','\x20orders\x20in\x20less\x20than\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','botname','getDate','breakeven','11fKKtlK','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','filter','UNLOCKING','excluded','ongoing','liquidity','string','buys','yyyy-MM-dd\x27T\x27HH:mm:ss','fetchTickers','NANO/','headless','join','precision','1845yHehoG','decrypt','format','cancelOrders()','\x20value','entries','hybrid-crypto-js'];_0x27fd=function(){return _0x2eda66;};return _0x27fd();}async function recreateCoinResults(){const _0x24af14=_0x466c51;let _0x3109b3,_0x2b4fa9=[];try{const _0x2ae264=fns[_0x24af14(0x23f)](fns[_0x24af14(0x1bd)](config[_0x24af14(0x1f7)][_0x24af14(0x2d3)](/\//g,'-')),_0x24af14(0x237));for(const _0x3efd85 of currentCoins){if(_0x3efd85[_0x24af14(0x28b)]!=config[_0x24af14(0x1c1)]){let _0x1db7f8=0x0,_0x139003,_0x4e0473;_0x3109b3=await getAllEventOrders(_0x3efd85[_0x24af14(0x26d)]);if(_0x3109b3['length']>0x0)_0x3109b3['forEach'](_0x12347a=>{const _0x5832b4=_0x24af14,_0x38147a=_0x3efd85[_0x5832b4(0x26d)]['includes'](config[_0x5832b4(0x1c1)]+'/');_0x2b4fa9[_0x5832b4(0x2bc)]({'datetime':_0x12347a[_0x5832b4(0x298)],'coin':_0x3efd85[_0x5832b4(0x28b)],'symbol':_0x3efd85[_0x5832b4(0x26d)],'side':_0x12347a['side'],'reverse':_0x38147a,'amount':formatResult(_0x12347a[_0x5832b4(0x1f9)],0x8),'filled':formatResult(_0x12347a[_0x5832b4(0x1f9)],0x8),'price':formatResult(_0x12347a[_0x5832b4(0x1fd)],0x8)}),_0x1db7f8=_0x12347a[_0x5832b4(0x1ee)]==_0x5832b4(0x2a2)?_0x1db7f8+_0x12347a[_0x5832b4(0x1f9)]:_0x1db7f8-_0x12347a[_0x5832b4(0x1f9)];if(!_0x4e0473)_0x4e0473=_0x12347a['price'];});_0x139003=_0x3efd85[_0x24af14(0x2d2)]-_0x1db7f8;let _0x155704;config['liquidity'][_0x24af14(0x1d4)](_0x4ca562=>{const _0x392bf9=_0x24af14;!_0x155704&&(_0x155704=_0x4ca562['changes'][_0x392bf9(0x1da)](_0x4d5d46=>_0x4d5d46['coin']==_0x3efd85[_0x392bf9(0x28b)]),_0x155704&&(_0x139003=_0x155704[_0x392bf9(0x2d2)],_0x4e0473=_0x155704[_0x392bf9(0x1fd)]));});let _0x1426bd=dbCoinResults['get'](_0x24af14(0x1c8))[_0x24af14(0x1da)]({'coin':_0x3efd85['coin']})['value']();_0x1426bd={'coin':_0x3efd85['coin'],'number':_0x139003,'breakeven':_0x4e0473,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x24af14(0x1a8)](_0x24af14(0x1c8))['find']({'coin':_0x3efd85['coin']})['assign'](_0x1426bd)[_0x24af14(0x1ac)]();}}_0x2b4fa9[_0x24af14(0x18f)]((_0x261bc5,_0x48d30d)=>_0x261bc5[_0x24af14(0x298)]>_0x48d30d['datetime']?0x1:_0x48d30d[_0x24af14(0x298)]>_0x261bc5['datetime']?-0x1:0x0);let _0x92ea2a=0x0;for(let _0x453bc9 of _0x2b4fa9){await updateCoinResults(_0x453bc9,!![]);}}catch(_0xf177ee){await handleError(_0xf177ee,'recreateCoinResults()');}}async function getAllEventOrders(_0x390db7){const _0x56ea8a=_0x466c51;let _0x13c36a=[],_0x38ea5f=dbLogs[_0x56ea8a(0x1a8)](_0x56ea8a(0x256))[_0x56ea8a(0x230)](_0x5625c5=>{const _0x2212ca=_0x56ea8a,_0x45999d=_0x5625c5[_0x2212ca(0x1d1)]['toLowerCase']();return _0x45999d['includes'](_0x390db7[_0x2212ca(0x2ac)]())&&(_0x45999d['includes'](_0x2212ca(0x223))&&_0x45999d['includes'](_0x2212ca(0x1ff))||_0x45999d[_0x2212ca(0x1f8)](_0x2212ca(0x1f9))&&_0x45999d[_0x2212ca(0x1f8)](_0x2212ca(0x1ff)));})[_0x56ea8a(0x2bb)](_0x56ea8a(0x1b2))['value']();return _0x38ea5f['forEach'](_0x2695be=>{const _0x4036ef=_0x56ea8a,_0x4ad048=_0x2695be[_0x4036ef(0x1d1)][_0x4036ef(0x1f8)]('sell')?_0x4036ef(0x1ad):_0x4036ef(0x2a2),_0x5d633a=/#([0-9]|\.)+\s/i,_0x17bf18=Number(_0x5d633a[_0x4036ef(0x185)](_0x2695be[_0x4036ef(0x1d1)])[0x0]['slice'](0x1)),_0x527d16=/@([0-9]|\.)+$/i,_0x2b087d=Number(_0x527d16['exec'](_0x2695be['event'])[0x0][_0x4036ef(0x1ca)](0x1));_0x13c36a[_0x4036ef(0x2bc)]({'datetime':_0x2695be[_0x4036ef(0x1b2)],'coin':symbolToCoin(_0x390db7),'symbol':_0x390db7,'side':_0x4ad048,'amount':_0x17bf18,'filled':_0x17bf18,'price':_0x2b087d});}),_0x13c36a;}async function getAllOrders(_0x1e4081,_0x47ecd8){const _0x16be82=_0x466c51;let _0x2f3315=[];while(_0x47ecd8<exchange[_0x16be82(0x2b3)]()){const _0x30a800=0x1f4,_0x40e256=await exchange[_0x16be82(0x2c7)](_0x1e4081,_0x47ecd8,_0x30a800);if(_0x40e256[_0x16be82(0x2ad)])_0x47ecd8=_0x40e256[_0x40e256[_0x16be82(0x2ad)]-0x1][_0x16be82(0x19e)]+0x1,_0x2f3315=_0x2f3315[_0x16be82(0x200)](_0x40e256);else break;}return _0x2f3315;}async function validate24hChanges(){const _0x30c77e=_0x466c51;for(const _0x51b84b of currentCoins){if(_0x51b84b[_0x30c77e(0x28b)]!=config['basecoin']){let _0x2f75d2;_0x51b84b[_0x30c77e(0x2a1)]?_0x2f75d2=formatResult((0x1/(global['change'][noslash(_0x51b84b['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x2f75d2=global[_0x30c77e(0x187)][noslash(_0x51b84b[_0x30c77e(0x26d)])],_0x2f75d2<config['change24h']&&(logHistory(_0x30c77e(0x1d7),_0x51b84b[_0x30c77e(0x28b)]+_0x30c77e(0x1d3)+_0x2f75d2+'%'),logHistory(_0x30c77e(0x1d7),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x30c77e(0x1d7),_0x30c77e(0x2b9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x482406,_0x1a92e8){const _0x38752e=_0x466c51;if(!_0x482406)return!![];const _0x52ac7a=_0x1a92e8[_0x38752e(0x201)]('.'),_0x259454=_0x482406[_0x38752e(0x201)]('.');for(var _0x5ba756=0x0;_0x5ba756<_0x259454[_0x38752e(0x2ad)];_0x5ba756++){const _0x54ad77=~~_0x259454[_0x5ba756],_0x2a0107=~~_0x52ac7a[_0x5ba756];if(_0x54ad77<_0x2a0107)return!![];if(_0x54ad77>_0x2a0107)return![];}return![];}async function oneTimeMigration(){const _0xfaa95a=_0x466c51;let _0x1010b5=dbLogs[_0xfaa95a(0x1a8)](_0xfaa95a(0x1cb))[_0xfaa95a(0x17f)]();if(isOlderVersion(_0x1010b5,'2.3.5')){let _0xae041b=[];const _0x469aee=dbLogs[_0xfaa95a(0x1a8)]('logs')['value']();_0x469aee[_0xfaa95a(0x1d4)](_0x40cc18=>{const _0x47dd8f=_0xfaa95a;_0xae041b[_0x47dd8f(0x2bc)]({'time':_0x40cc18[_0x47dd8f(0x1b2)],'type':_0x40cc18[_0x47dd8f(0x1a4)],'event':_0x40cc18[_0x47dd8f(0x1d1)]});}),dbLogs[_0xfaa95a(0x1a8)](_0xfaa95a(0x256))[_0xfaa95a(0x1ba)](_0xae041b)[_0xfaa95a(0x1ac)]();}let _0x33fdc9=dbConfig[_0xfaa95a(0x1a8)](_0xfaa95a(0x1cb))[_0xfaa95a(0x17f)]();if(isOlderVersion(_0x33fdc9,_0xfaa95a(0x289))){let _0x1bc5f6=dbConfig['get'](_0xfaa95a(0x1d8))[_0xfaa95a(0x1da)]({'botID':botID})[_0xfaa95a(0x17f)]();if(_0x1bc5f6){let _0x541b16=[];_0x1bc5f6[_0xfaa95a(0x2ca)][_0xfaa95a(0x1d4)](_0xc7b9d4=>{const _0x311192=_0xfaa95a;_0x541b16[_0x311192(0x2bc)]({'coin':_0xc7b9d4[_0x311192(0x28b)],'number':_0xc7b9d4[_0x311192(0x1f5)],'price':_0xc7b9d4[_0x311192(0x29a)]}),delete _0xc7b9d4[_0x311192(0x1f5)],delete _0xc7b9d4[_0x311192(0x29a)];});if(_0x541b16['length']!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0xfaa95a(0x294)),JSON[_0xfaa95a(0x1dc)](_0x541b16,null,0x4),function(_0x2d6318){if(_0x2d6318){}});const _0x3635dd=(_0x14d2df,_0x23b4f9)=>{const _0x34852a=_0xfaa95a;let _0x48cb06=[];_0x23b4f9[_0x34852a(0x1d4)](_0x168867=>{const _0x4cd0ec=_0x34852a,_0x5c6cd1=_0x14d2df['find'](_0x4d8902=>_0x4d8902[_0x4cd0ec(0x28b)]==_0x168867[_0x4cd0ec(0x28b)]);if(!_0x5c6cd1)_0x48cb06[_0x4cd0ec(0x2bc)](_0x168867);});let _0x322b71=[];return _0x14d2df[_0x34852a(0x1d4)](_0x5bb4f4=>{const _0xb5afa4=_0x34852a,_0x3af103=_0x23b4f9[_0xb5afa4(0x1da)](_0x32969d=>_0x32969d[_0xb5afa4(0x28b)]==_0x5bb4f4[_0xb5afa4(0x28b)]);if(!_0x3af103||_0x3af103['number']==0x0&&_0x5bb4f4[_0xb5afa4(0x2d2)]!=0x0)_0x322b71[_0xb5afa4(0x2bc)](_0x5bb4f4);}),{'missingDay1':_0x48cb06,'notInDay2':_0x322b71};},_0x38d14b=dbPerformance[_0xfaa95a(0x1a8)](_0xfaa95a(0x2aa))[_0xfaa95a(0x29f)]()[_0xfaa95a(0x17f)]();if(_0x38d14b['length']>0x1){const {missingDay1:_0x591a5c,notInDay2:_0x2bbe5c}=_0x3635dd(_0x541b16,_0x38d14b[0x1][_0xfaa95a(0x1c8)]);_0x541b16=[..._0x541b16,..._0x591a5c],_0x2bbe5c[_0xfaa95a(0x1d4)](_0xacc3f6=>{const _0x318c0b=_0xfaa95a;let _0x5bfb59=_0x541b16['findIndex'](_0x25ff08=>_0x25ff08[_0x318c0b(0x28b)]==_0xacc3f6[_0x318c0b(0x28b)]);_0x5bfb59!=-0x1&&_0x541b16['splice'](_0x5bfb59,0x1);});}_0x541b16[_0xfaa95a(0x18f)]((_0x412d0a,_0x522fbe)=>_0x412d0a['coin']>_0x522fbe[_0xfaa95a(0x28b)]?0x1:_0x522fbe[_0xfaa95a(0x28b)]>_0x412d0a[_0xfaa95a(0x28b)]?-0x1:0x0);let _0x57f324=[{'date':_0x1bc5f6[_0xfaa95a(0x1f7)],'changes':_0x541b16}];_0x38d14b['length']>0x2&&_0x38d14b[_0xfaa95a(0x1d4)]((_0x5b33af,_0x525fca)=>{const _0x11ab19=_0xfaa95a;if(_0x525fca>0x0&&_0x525fca<_0x38d14b[_0x11ab19(0x2ad)]-0x1){const {missingDay1:_0x52207f,notInDay2:_0x1231e4}=_0x3635dd(_0x38d14b[_0x525fca]['coins'],_0x38d14b[_0x525fca+0x1][_0x11ab19(0x1c8)]);_0x541b16=[],(_0x52207f[_0x11ab19(0x2ad)]!=0x0||_0x1231e4[_0x11ab19(0x2ad)]!=0x0)&&(_0x52207f['length']!=0x0&&_0x541b16[_0x11ab19(0x2bc)](..._0x52207f),_0x1231e4[_0x11ab19(0x2ad)]!=0x0&&(_0x1231e4['forEach'](_0x46d8b8=>{const _0x28431a=_0x11ab19;_0x46d8b8[_0x28431a(0x2d2)]=-_0x46d8b8[_0x28431a(0x2d2)];}),_0x541b16[_0x11ab19(0x2bc)](..._0x1231e4)),_0x541b16[_0x11ab19(0x18f)]((_0x33d402,_0x2c8093)=>_0x33d402[_0x11ab19(0x28b)]>_0x2c8093[_0x11ab19(0x28b)]?0x1:_0x2c8093[_0x11ab19(0x28b)]>_0x33d402['coin']?-0x1:0x0),_0x57f324['push']({'date':_0x38d14b[_0x525fca+0x1][_0x11ab19(0x184)],'changes':_0x541b16}));}}),dbConfig[_0xfaa95a(0x1a8)](_0xfaa95a(0x1d8))[_0xfaa95a(0x1da)]({'botID':botID})[_0xfaa95a(0x1ba)]({..._0x1bc5f6,'liquidity':_0x57f324})[_0xfaa95a(0x1ac)]();}}if(isOlderVersion(_0x33fdc9,'2.6.0')){let _0x488f25=dbConfig[_0xfaa95a(0x1a8)](_0xfaa95a(0x1d8))[_0xfaa95a(0x1da)]({'botID':botID})[_0xfaa95a(0x17f)]();if(_0x488f25){const _0x81ee6c=_0x488f25[_0xfaa95a(0x29e)],_0x94919c=_0x81ee6c?capitalize(_0x81ee6c):'Binance';dbConfig[_0xfaa95a(0x1a8)](_0xfaa95a(0x1d8))[_0xfaa95a(0x1da)]({'botID':botID})[_0xfaa95a(0x1ba)]({'exchange':_0x94919c})[_0xfaa95a(0x1ac)]();}}config=getConfiguration(botID);let _0x159587=dbPerformance[_0xfaa95a(0x1a8)](_0xfaa95a(0x1cb))[_0xfaa95a(0x17f)]();isOlderVersion(_0x159587,_0xfaa95a(0x289))&&setStartDatePerformance();let _0x3657ed=dbCoinResults['get'](_0xfaa95a(0x1cb))[_0xfaa95a(0x17f)]();if(isOlderVersion(_0x3657ed,'2.5.0')){let _0x18171f=dbCoinResults['get']('coins')[_0xfaa95a(0x17f)]();if(_0x18171f[_0xfaa95a(0x2ad)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x493eb9=_0x466c51;dbConfig[_0x493eb9(0x2c2)](_0x493eb9(0x1cb),serverversion)[_0x493eb9(0x1ac)](),dbPerformance['set'](_0x493eb9(0x1cb),serverversion)['write'](),dbLogs[_0x493eb9(0x2c2)]('version',serverversion)[_0x493eb9(0x1ac)](),dbCoinResults[_0x493eb9(0x2c2)](_0x493eb9(0x1cb),serverversion)[_0x493eb9(0x1ac)]();}function getConfiguration(_0x33adc6){const _0x454019=_0x466c51;let _0x30a066=dbConfig['get'](_0x454019(0x1d8))[_0x454019(0x1da)]({'botID':_0x33adc6})[_0x454019(0x17f)]();if(_0x30a066){let _0x2a6fc0=![];typeof _0x30a066[_0x454019(0x287)]==_0x454019(0x235)&&(_0x30a066={..._0x30a066,'threshold':Number(_0x30a066[_0x454019(0x287)])},_0x2a6fc0=!![]),_0x30a066[_0x454019(0x24b)]==null&&(_0x30a066={..._0x30a066,'change24h':-0x14},_0x2a6fc0=!![]),_0x2a6fc0&&(_0x30a066={'botID':_0x30a066[_0x454019(0x1b1)],'exchange':_0x30a066[_0x454019(0x29e)],'apiKey':_0x30a066[_0x454019(0x1f6)],'apiSecret':_0x30a066['apiSecret'],'basecoin':_0x30a066[_0x454019(0x1c1)],'botname':_0x30a066['botname'],'showname':_0x30a066['showname'],'threshold':_0x30a066[_0x454019(0x287)],'ordertype':_0x30a066[_0x454019(0x2ae)],'timeout':_0x30a066[_0x454019(0x255)],'startdate':_0x30a066['startdate'],'recreate':_0x30a066[_0x454019(0x2d4)],'timeshift':_0x30a066[_0x454019(0x1b4)],'headless':_0x30a066[_0x454019(0x23a)],'cooldown':_0x30a066[_0x454019(0x1b7)],'change24h':_0x30a066['change24h'],'emojibuy':_0x30a066[_0x454019(0x299)],'emojisell':_0x30a066[_0x454019(0x181)],'portfolio':_0x30a066[_0x454019(0x2ca)],'liquidity':_0x30a066[_0x454019(0x234)]},dbConfig[_0x454019(0x1a8)]('bot')[_0x454019(0x1e3)]()[_0x454019(0x1ac)](),dbConfig['get'](_0x454019(0x1d8))['push'](_0x30a066)[_0x454019(0x1ac)]());}else _0x30a066={'botID':_0x33adc6,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x454019(0x24d)+_0x33adc6,'showname':![],'threshold':0x3,'ordertype':_0x454019(0x223),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x454019(0x1b4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x30a066;}function emittedConfiguration(){const _0x512005=_0x466c51;let _0x4406f4;if(config['apiKey']=='')_0x4406f4={...config,'configstate':_0x512005(0x27b)};else config[_0x512005(0x1f6)]==_0x512005(0x1ec)?_0x4406f4={...config,'configstate':_0x512005(0x18c)}:_0x4406f4={...config,'apiKey':_0x512005(0x1eb),'apiSecret':'************'};return _0x4406f4;}function getSettings(){const _0x191fd2=_0x466c51;return dbSettings['get'](_0x191fd2(0x249))[_0x191fd2(0x17f)]();}function getSecure(){const _0x1250b8=_0x466c51;return dbSecure['get'](_0x1250b8(0x204))[_0x1250b8(0x17f)]()||{};}function updateTimeshift(_0x2a0a42){const _0x5d572c=_0x466c51;let _0x449b05=dbConfig[_0x5d572c(0x1a8)](_0x5d572c(0x1d8))[_0x5d572c(0x1da)]({'botID':botID})[_0x5d572c(0x17f)]();_0x449b05&&dbConfig[_0x5d572c(0x1a8)](_0x5d572c(0x1d8))['find']({'botID':botID})[_0x5d572c(0x1ba)]({'timeshift':_0x2a0a42})['write'](),config[_0x5d572c(0x1b4)]=_0x2a0a42,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4d6d1b){const _0x4af883=_0x466c51;let _0x198a5a=[],_0x4ebdb6=[];_0x4d6d1b['portfolio']['forEach'](_0x2ebf4e=>{const _0x9ae6dd=_0x5776;if(!_0x2ebf4e['excluded']&&_0x2ebf4e[_0x9ae6dd(0x28b)]!=_0x4d6d1b[_0x9ae6dd(0x1c1)])_0x4ebdb6[_0x9ae6dd(0x2bc)](_0x2ebf4e[_0x9ae6dd(0x26d)]);});currentCoins['length']==0x0?_0x198a5a=_0x4ebdb6:_0x4ebdb6[_0x4af883(0x1d4)](_0x54d821=>{const _0x75fe6e=_0x4af883,_0x55e433=currentCoins[_0x75fe6e(0x1da)](_0x183dd1=>_0x183dd1[_0x75fe6e(0x26d)]==_0x54d821);!_0x55e433&&_0x198a5a[_0x75fe6e(0x2bc)](_0x54d821);});let _0x5ab565=dbConfig['get'](_0x4af883(0x1d8))[_0x4af883(0x1da)]({'botID':botID})[_0x4af883(0x17f)]();_0x4d6d1b={..._0x4d6d1b,'apiKey':crypt[_0x4af883(0x23e)](secure[_0x4af883(0x280)],_0x4d6d1b['apiKey'])['message'],'apiSecret':crypt[_0x4af883(0x23e)](secure['privateKey'],_0x4d6d1b[_0x4af883(0x218)])[_0x4af883(0x281)]};if(_0x5ab565){if(_0x4d6d1b[_0x4af883(0x1f6)]=='************')_0x4d6d1b[_0x4af883(0x1f6)]=config[_0x4af883(0x1f6)];if(_0x4d6d1b[_0x4af883(0x218)]==_0x4af883(0x1eb))_0x4d6d1b[_0x4af883(0x218)]=config['apiSecret'];dbConfig[_0x4af883(0x1a8)]('bot')['find']({'botID':botID})[_0x4af883(0x1ba)](_0x4d6d1b)[_0x4af883(0x1ac)]();}else dbConfig[_0x4af883(0x1a8)](_0x4af883(0x1d8))[_0x4af883(0x2bc)](_0x4d6d1b)[_0x4af883(0x1ac)](),process['send']({'status':'enabled','live':_0x4af883(0x17b)},_0xbb2510=>{});config={..._0x4d6d1b},setStartDatePerformance(),process[_0x4af883(0x261)]({'botname':_0x4d6d1b[_0x4af883(0x22b)]},_0x13046a=>{}),updateBotManager();const _0x31652e=getNormalizedPerformance();getStartingBalances(_0x31652e),emitPerformance(_0x31652e),proxyEmit('configuration-stored'),await initCoinResults(),reset(_0x198a5a);}async function storeHeadless(_0x329750){const _0x4f54e8=_0x466c51,_0x21b3a2={...config,'headless':_0x329750[_0x4f54e8(0x23a)]};let _0x374fc7=dbConfig[_0x4f54e8(0x1a8)](_0x4f54e8(0x1d8))[_0x4f54e8(0x1da)]({'botID':botID})[_0x4f54e8(0x17f)]();_0x374fc7&&dbConfig['get']('bot')[_0x4f54e8(0x1da)]({'botID':botID})[_0x4f54e8(0x1ba)](_0x21b3a2)[_0x4f54e8(0x1ac)](),config={..._0x21b3a2},updateBotManager(),proxyEmit(_0x4f54e8(0x226),emittedConfiguration());}function noslash(_0x150975){return _0x150975['replace']('/','');}async function updateNumberCoinsCcxt(_0xfdb96b){const _0x3fd3d5=_0x466c51;logger['debug'](_0x3fd3d5(0x1be)+_0xfdb96b[_0x3fd3d5(0x26d)]+'\x20|\x20'+_0xfdb96b[_0x3fd3d5(0x260)]+'\x20|\x20'+_0xfdb96b['id']+'\x20|\x20'+_0xfdb96b[_0x3fd3d5(0x20b)]);let _0x13b399=_0xfdb96b[_0x3fd3d5(0x260)],_0x11e50f=![];currentCoins['forEach'](_0x284fc6=>{const _0x1a38ba=_0x3fd3d5;_0x284fc6[_0x1a38ba(0x26d)]==_0xfdb96b[_0x1a38ba(0x26d)]&&(_0x11e50f=!![]);});if(!_0x11e50f)return;const _0x536f44=currentCoins[_0x3fd3d5(0x1da)](_0x34bad0=>_0x34bad0[_0x3fd3d5(0x26d)]==_0xfdb96b[_0x3fd3d5(0x26d)]),_0x106cde=_0x105bab=>{const _0xb15fd0=_0x3fd3d5;if(_0x536f44)_0x536f44[_0xb15fd0(0x208)]=_0x105bab;};if(_0x13b399==_0x3fd3d5(0x1db))_0x106cde('open');else{if(_0x13b399==_0x3fd3d5(0x18d))_0x106cde('canceled'),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x13b399==_0x3fd3d5(0x251)){logger['debug'](_0x3fd3d5(0x1ef)+_0xfdb96b['symbol']+_0x3fd3d5(0x1c9)+_0xfdb96b[_0x3fd3d5(0x1f9)]+_0x3fd3d5(0x1c9)+_0xfdb96b['id']+_0x3fd3d5(0x1c9)+_0xfdb96b[_0x3fd3d5(0x20b)]);let _0x52ac9f=![];if(lastOrders)lastOrders[_0x3fd3d5(0x1d4)](async _0x40a6d7=>{const _0x4656af=_0x3fd3d5;if(_0x40a6d7['customId']==_0xfdb96b[_0x4656af(0x20b)]){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0xfdb96b[_0x4656af(0x20b)]),_0x52ac9f=!![];if(_0x40a6d7[_0x4656af(0x1f9)]==0x0){logger['debug']('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0xfdb96b[_0x4656af(0x20b)]),_0x40a6d7['price']=_0xfdb96b[_0x4656af(0x199)],_0x40a6d7[_0x4656af(0x1f9)]=_0xfdb96b[_0x4656af(0x1f9)],_0x40a6d7['fee']={'cost':_0xfdb96b['fee']['cost'],'currency':_0xfdb96b[_0x4656af(0x192)][_0x4656af(0x20e)]},_0x106cde('filled'),await validateOrders();if(lockOrders==ORDERS[_0x4656af(0x2c5)])currentCoins=await getCoins();await updateCoinResults(_0x40a6d7);}}});!_0x52ac9f&&(logger[_0x3fd3d5(0x1ae)](_0x3fd3d5(0x183)+_0xfdb96b['id']),_0x106cde(_0x3fd3d5(0x1f9)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x4cac4a=JSON[_0x3fd3d5(0x26b)](lastBalances[_0x3fd3d5(0x2ca)]);const _0x45fe34=_0x4cac4a[_0x3fd3d5(0x1da)](_0x25beba=>_0x25beba[_0x3fd3d5(0x26d)]==_0xfdb96b['symbol']);if(_0x45fe34){if(_0x13b399==_0x3fd3d5(0x1db))_0x45fe34[_0x3fd3d5(0x208)]=_0x45fe34['orderstatus']==_0x3fd3d5(0x1f9)?_0x3fd3d5(0x1f9):_0x3fd3d5(0x1db);else{if(_0x13b399==_0x3fd3d5(0x18d))_0x45fe34['orderstatus']=_0x45fe34[_0x3fd3d5(0x208)]==_0x3fd3d5(0x1f9)?'filled':_0x3fd3d5(0x18d);else _0x13b399=='closed'&&(_0x45fe34[_0x3fd3d5(0x208)]=_0x3fd3d5(0x1f9));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3fd3d5(0x1dc)](_0x4cac4a)},proxyEmit(_0x3fd3d5(0x290),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x4490da=![],_0x301f49=!![],_0x1c6a8f=config[_0x466c51(0x1c1)]){const _0x1585f6=_0x466c51;let _0x1d9d62,_0x908ed8=[],_0x2ee994=[],_0x31d9fd=[];try{_0x1d9d62=await exchange[_0x1585f6(0x1e8)](),mybalances=_0x1d9d62['total'];if(!_0x301f49)for(const [_0x2cb460,_0x11b4bd]of Object[_0x1585f6(0x242)](mybalances)){_0x31d9fd[_0x1585f6(0x2bc)](_0x2cb460);}else config[_0x1585f6(0x2ca)][_0x1585f6(0x1d4)](_0x351788=>{const _0x31b275=_0x1585f6;if(!_0x351788[_0x31b275(0x232)])_0x31d9fd[_0x31b275(0x2bc)](_0x351788[_0x31b275(0x28b)]);});if(_0x1c6a8f=='')for(const [_0x23f853,_0x46c764]of Object[_0x1585f6(0x242)](mybalances)){_0x46c764[_0x1585f6(0x285)]()!=0x0&&_0x2ee994['push']({'coin':_0x23f853});}else{if(_0x4490da)await getOpenOrders();let _0x53ef27=![];for(const [_0x19dbf5,_0x260b4f]of Object[_0x1585f6(0x242)](mybalances)){if(_0x31d9fd[_0x1585f6(0x1f8)](_0x19dbf5)){const _0x3747c9=config[_0x1585f6(0x2ca)][_0x1585f6(0x1da)](_0x4af109=>_0x4af109[_0x1585f6(0x28b)]==_0x19dbf5),_0x3946e5=_0x19dbf5+'/'+_0x1c6a8f,_0x470297=_0x1c6a8f+'/'+_0x19dbf5,_0x290b1d=currentCoins[_0x1585f6(0x1da)](_0x43ae9d=>_0x43ae9d[_0x1585f6(0x28b)]==_0x19dbf5);_0x53ef27=![];_0x4490da&&(_0x53ef27=allOpenOrders[_0x1585f6(0x1da)](_0x1057e8=>_0x1057e8[_0x1585f6(0x26d)]==_0x3747c9[_0x1585f6(0x26d)]));if((_0x260b4f[_0x1585f6(0x285)]()!=0x0||_0x3747c9)&&(allSymbols[_0x1585f6(0x1f8)](_0x3946e5)||_0x19dbf5==_0x1c6a8f))_0x19dbf5!=_0x1c6a8f&&_0x908ed8['push'](_0x3946e5),_0x2ee994[_0x1585f6(0x2bc)]({'coin':_0x19dbf5,'symbol':_0x3946e5,'reverse':![],'number':Math[_0x1585f6(0x1c4)](_0x260b4f+(_0x3747c9&&_0x3747c9['offset']||0x0),0x0),'orderstatus':_0x4490da?_0x53ef27?_0x1585f6(0x1db):_0x1585f6(0x17a):_0x290b1d?_0x290b1d[_0x1585f6(0x208)]:_0x1585f6(0x17a)});else(_0x260b4f[_0x1585f6(0x285)]()!=0x0||_0x3747c9)&&allSymbols[_0x1585f6(0x1f8)](_0x470297)&&(_0x19dbf5!=_0x1c6a8f&&_0x908ed8[_0x1585f6(0x2bc)](_0x470297),_0x2ee994[_0x1585f6(0x2bc)]({'coin':_0x19dbf5,'symbol':_0x470297,'reverse':!![],'number':Math['max'](_0x260b4f+(_0x3747c9&&_0x3747c9[_0x1585f6(0x1e4)]||0x0),0x0),'orderstatus':_0x4490da?_0x53ef27?'open':_0x1585f6(0x17a):_0x290b1d?_0x290b1d[_0x1585f6(0x208)]:'none'}));}}}}catch(_0x5c092e){if(!_0x301f49)handleErrorNoStop(_0x5c092e,'getCoins()');else await handleError(_0x5c092e,_0x1585f6(0x227));}return _0x2ee994;}async function getCoinNumber(_0x299e71){const _0x335c56=_0x466c51;let _0x2c047e;try{const _0x3a8464=await exchange['fetchBalance']();_0x2c047e=_0x3a8464['total'][_0x299e71];}catch(_0x2cb326){await handleError(_0x2cb326,_0x335c56(0x21e));}return _0x2c047e;}async function getOpenOrders(){const _0x4f143d=_0x466c51;let _0x59a3ef;allOpenOrders=[];try{for(const _0x1eb353 of config[_0x4f143d(0x2ca)]){!_0x1eb353['excluded']&&_0x1eb353[_0x4f143d(0x28b)]!=config[_0x4f143d(0x1c1)]&&(_0x59a3ef=await exchange[_0x4f143d(0x207)](_0x1eb353[_0x4f143d(0x26d)]),_0x59a3ef[_0x4f143d(0x2ad)]>0x0&&allOpenOrders['push'](_0x59a3ef[0x0]));}}catch(_0x1d1cfa){await handleError(_0x1d1cfa,_0x4f143d(0x1c0));}}async function handleOpenOrders(_0xe3c6c8=0x0){const _0xf66787=_0x466c51;allOpenOrders[_0xf66787(0x2ad)]==0x0&&lockOrders==ORDERS[_0xf66787(0x2c5)]&&allOrdersPlaced&&(_0xe3c6c8==0x0?(logger[_0xf66787(0x1ae)](_0xf66787(0x27c)),_0xe3c6c8++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0xf66787(0x1c3)),validateOrders(_0xf66787(0x2ba))));}async function getPortfolio(_0x3b92fe){const _0x2d2d80=_0x466c51;let _0x4e286b=[],_0x14e706=[],_0x13836c,_0x404654=[],_0x3cefe1=![];if(_0x3b92fe[_0x2d2d80(0x1f6)]===_0x2d2d80(0x1eb)||_0x3b92fe['apiSecret']===_0x2d2d80(0x1eb))_0x3cefe1=!![];else{await initExchange(_0x3b92fe[_0x2d2d80(0x29e)],_0x3b92fe[_0x2d2d80(0x1f6)],_0x3b92fe[_0x2d2d80(0x218)]);try{_0x3cefe1=await loadSymbols(_0x3b92fe['exchange']);}catch(_0x277564){_0x3cefe1=![],handleErrorNoStop(_0x277564,'loadSymbols()');}}if(_0x3cefe1){_0x404654=await getCoins(![],![],_0x3b92fe[_0x2d2d80(0x1c1)]);if(_0x404654===![])proxyEmit(_0x2d2d80(0x2ca),![]);else{if(_0x3b92fe[_0x2d2d80(0x1c1)]=='')proxyEmit('portfolio',_0x404654);else{_0x404654[_0x2d2d80(0x1d4)](_0x1950f5=>{const _0x360a40=_0x2d2d80;if(_0x1950f5['coin']!=_0x3b92fe[_0x360a40(0x1c1)])_0x4e286b['push'](_0x1950f5[_0x360a40(0x26d)]);});try{_0x14e706=await exchange[_0x2d2d80(0x238)](_0x4e286b);}catch(_0x3a765b){await handleError(_0x3a765b,_0x2d2d80(0x252));}_0x404654['forEach'](_0x69511e=>{const _0x787410=_0x2d2d80;_0x69511e[_0x787410(0x28b)]!=_0x3b92fe[_0x787410(0x1c1)]?_0x13836c=_0x69511e[_0x787410(0x2a1)]?0x1/_0x14e706[_0x69511e['symbol']][_0x787410(0x211)]:_0x14e706[_0x69511e[_0x787410(0x26d)]]['last']:_0x13836c=0x1,_0x69511e[_0x787410(0x1fd)]=formatResult(_0x13836c,0x8);}),proxyEmit(_0x2d2d80(0x2ca),_0x404654);}}}else proxyEmit(_0x2d2d80(0x2ca),![]);}function checkMinimums(_0x56934c){const _0x581b90=_0x466c51;let _0x4129bb=!![];const _0x8699d4=!_0x56934c[_0x581b90(0x2a1)]?markets[_0x56934c[_0x581b90(0x26d)]][_0x581b90(0x20c)][_0x581b90(0x268)][_0x581b90(0x274)]:markets[_0x56934c[_0x581b90(0x26d)]][_0x581b90(0x20c)]['cost'][_0x581b90(0x274)],_0x193235=!_0x56934c[_0x581b90(0x2a1)]?markets[_0x56934c[_0x581b90(0x26d)]][_0x581b90(0x20c)][_0x581b90(0x1e9)][_0x581b90(0x274)]:markets[_0x56934c['symbol']][_0x581b90(0x20c)]['amount'][_0x581b90(0x274)],_0x18bb54=markets[_0x56934c[_0x581b90(0x26d)]][_0x581b90(0x23c)][_0x581b90(0x268)];_0x56934c['trade']=formatResultTruncate(_0x56934c[_0x581b90(0x297)],_0x18bb54);if(Math[_0x581b90(0x222)](_0x56934c[_0x581b90(0x297)])<_0x8699d4)_0x4129bb=![];if(Math['abs'](_0x56934c[_0x581b90(0x297)])*_0x56934c[_0x581b90(0x211)]<_0x193235)_0x4129bb=![];if(_0x56934c['side']=='sell'){let _0x1476bc=config[_0x581b90(0x2ca)][_0x581b90(0x1da)](_0x474eb9=>_0x474eb9[_0x581b90(0x28b)]==_0x56934c[_0x581b90(0x28b)]);if(_0x1476bc[_0x581b90(0x1e4)]>0x0){if(Math['abs'](_0x56934c['trade'])>_0x56934c[_0x581b90(0x2d2)]-_0x1476bc[_0x581b90(0x1e4)])_0x4129bb=![];}else{if(Math[_0x581b90(0x222)](_0x56934c[_0x581b90(0x297)])>_0x56934c[_0x581b90(0x2d2)])_0x4129bb=![];}}if(_0x56934c[_0x581b90(0x1ee)]==_0x581b90(0x2a2)){let _0xb98cb1=config[_0x581b90(0x2ca)]['find'](_0x412241=>_0x412241[_0x581b90(0x28b)]==config[_0x581b90(0x1c1)]),_0xae7da0=currentCoins[_0x581b90(0x1da)](_0xdc8dbe=>_0xdc8dbe[_0x581b90(0x28b)]==config[_0x581b90(0x1c1)]);if(_0xb98cb1[_0x581b90(0x1e4)]>0x0){if(Math[_0x581b90(0x222)](_0x56934c['trade'])*_0x56934c[_0x581b90(0x211)]>_0xae7da0['number']-_0xb98cb1[_0x581b90(0x1e4)])_0x4129bb=![];}else{if(Math[_0x581b90(0x222)](_0x56934c['trade'])*_0x56934c[_0x581b90(0x211)]>_0xae7da0[_0x581b90(0x2d2)])_0x4129bb=![];}}return _0x4129bb;}async function getBalances(){const _0x491b78=_0x466c51;let _0x40af27=0x0,_0xdb86c4;const _0x3ff4a8=config['threshold'];if(config[_0x491b78(0x23a)]&&config[_0x491b78(0x24b)]<0x0)await validate24hChanges();currentCoins[_0x491b78(0x1d4)](_0x87aa49=>{const _0x165863=_0x491b78;if(_0x87aa49[_0x165863(0x28b)]!=config[_0x165863(0x1c1)]){let _0x2fdd63=global[_0x165863(0x2be)][noslash(_0x87aa49['symbol'])];_0xdb86c4=_0x87aa49['reverse']?0x1/_0x2fdd63:_0x2fdd63;}else _0xdb86c4=0x1;let _0x21026b=_0x87aa49[_0x165863(0x2d2)]*_0xdb86c4;_0x40af27+=_0x21026b,_0x87aa49[_0x165863(0x211)]=formatResult(Number(_0xdb86c4),0x8),_0x87aa49['value']=_0x21026b;}),currentCoins[_0x491b78(0x1d4)](_0x5c3c9c=>{const _0x87f04c=_0x491b78;let _0x216fae=config[_0x87f04c(0x2ca)][_0x87f04c(0x1da)](_0x1044cd=>_0x1044cd['coin']==_0x5c3c9c[_0x87f04c(0x28b)]),_0x6080d4=Number(_0x216fae[_0x87f04c(0x270)]),_0x4cb8e1=_0x5c3c9c[_0x87f04c(0x17f)]/_0x40af27*0x64,_0x268a57=_0x6080d4*_0x40af27/0x64/_0x5c3c9c[_0x87f04c(0x211)]-_0x5c3c9c['number'];_0x5c3c9c[_0x87f04c(0x270)]=formatResult(_0x4cb8e1,0x3),_0x5c3c9c[_0x87f04c(0x19d)]=formatResult(_0x6080d4,0x3),_0x5c3c9c[_0x87f04c(0x297)]=formatResult(_0x268a57,0x8),_0x5c3c9c[_0x87f04c(0x1ee)]='',_0x5c3c9c[_0x87f04c(0x1ed)]=![];if(_0x5c3c9c[_0x87f04c(0x28b)]!=config[_0x87f04c(0x1c1)]){if(_0x5c3c9c[_0x87f04c(0x270)]>_0x6080d4)_0x5c3c9c['side']=_0x87f04c(0x1ad),_0x5c3c9c[_0x87f04c(0x1ed)]=checkMinimums(_0x5c3c9c);else _0x5c3c9c[_0x87f04c(0x270)]<_0x6080d4&&(_0x5c3c9c[_0x87f04c(0x1ee)]=_0x87f04c(0x2a2),_0x5c3c9c[_0x87f04c(0x1ed)]=checkMinimums(_0x5c3c9c));}_0x5c3c9c[_0x87f04c(0x220)]=_0x5c3c9c[_0x87f04c(0x270)]/_0x5c3c9c[_0x87f04c(0x19d)]-0x1;if(_0x5c3c9c[_0x87f04c(0x208)]==_0x87f04c(0x1f9)||_0x5c3c9c[_0x87f04c(0x208)]==_0x87f04c(0x18d))_0x5c3c9c[_0x87f04c(0x208)]=_0x87f04c(0x17a);}),currentCoins[_0x491b78(0x18f)]((_0x42db0f,_0x50fda6)=>_0x42db0f['delta']<_0x50fda6[_0x491b78(0x220)]?0x1:_0x50fda6['delta']<_0x42db0f[_0x491b78(0x220)]?-0x1:0x0);const _0x1457de=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1457de['eur'],'usd':_0x1457de[_0x491b78(0x1bc)],'portfolio':JSON[_0x491b78(0x1dc)](currentCoins),'threshold':_0x3ff4a8},proxyEmit(_0x491b78(0x290),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x491b78(0x23a)])headlessMode({'portfolio':currentCoins,'threshold':_0x3ff4a8});else{if(lockOrders==ORDERS[_0x491b78(0x18b)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3ff4a8});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x562de8=_0x466c51;if(!lastBalances)return;let _0x5d32ab=[],_0x4dde0b,_0x32b864=JSON[_0x562de8(0x26b)](lastBalances[_0x562de8(0x2ca)]);_0x32b864['sort']((_0x2c12a9,_0x4039eb)=>_0x2c12a9[_0x562de8(0x28b)]>_0x4039eb[_0x562de8(0x28b)]?0x1:_0x4039eb[_0x562de8(0x28b)]>_0x2c12a9[_0x562de8(0x28b)]?-0x1:0x0),_0x32b864[_0x562de8(0x1d4)](_0x16757c=>{const _0x599836=_0x562de8;let _0x6e3ee6={'coin':_0x16757c['coin'],'number':_0x16757c[_0x599836(0x2d2)],'price':_0x16757c['last']};_0x5d32ab[_0x599836(0x2bc)](_0x6e3ee6);});const _0x58a3d5=await getFiat();_0x4dde0b={'date':lastBalances[_0x562de8(0x1b2)][_0x562de8(0x201)]('\x20')[0x0],'eur':_0x58a3d5[_0x562de8(0x2d1)],'usd':_0x58a3d5[_0x562de8(0x1bc)],'coins':_0x5d32ab};let _0x32d73a=dbPerformance[_0x562de8(0x1a8)](_0x562de8(0x2aa))[_0x562de8(0x1da)]({'date':_0x4dde0b[_0x562de8(0x184)]})[_0x562de8(0x17f)]();_0x32d73a?_0x4dde0b[_0x562de8(0x184)]!=config[_0x562de8(0x1f7)]&&dbPerformance[_0x562de8(0x1a8)]('data')[_0x562de8(0x1da)]({'date':_0x4dde0b[_0x562de8(0x184)]})[_0x562de8(0x1ba)](_0x4dde0b)[_0x562de8(0x1ac)]():dbPerformance[_0x562de8(0x1a8)](_0x562de8(0x2aa))['push'](_0x4dde0b)[_0x562de8(0x1ac)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x23fe77=_0x466c51;let _0xc0b79d=[];if(dbPerformance['has'](_0x23fe77(0x2aa))[_0x23fe77(0x17f)]()){let _0x499b69=dbPerformance[_0x23fe77(0x1a8)](_0x23fe77(0x2aa))['cloneDeep']()[_0x23fe77(0x2bb)](_0x23fe77(0x184))[_0x23fe77(0x17f)](),_0x3352ba=[...config[_0x23fe77(0x234)]];_0x3352ba[_0x23fe77(0x18f)]((_0x1dc453,_0x1d1318)=>_0x1dc453[_0x23fe77(0x184)]>_0x1d1318[_0x23fe77(0x184)]?-0x1:_0x1d1318['date']>_0x1dc453[_0x23fe77(0x184)]?0x1:0x0);let _0x21fbef=0x1,_0x153fe9=[],_0x2cf82d=0x0;_0x499b69[_0x23fe77(0x1ca)]()[_0x23fe77(0x2a1)]()['forEach']((_0x6df459,_0x376979)=>{const _0x367af9=_0x23fe77;if(_0x3352ba[_0x2cf82d]){if(_0x499b69[_0x499b69[_0x367af9(0x2ad)]-_0x376979]&&_0x3352ba[_0x2cf82d][_0x367af9(0x184)]==_0x499b69[_0x499b69['length']-_0x376979][_0x367af9(0x184)]){if(_0x376979<_0x499b69['length']){let _0xfe29d6=0x0,_0x47870e=0x0;_0x499b69[_0x499b69['length']-_0x376979][_0x367af9(0x1c8)][_0x367af9(0x1d4)](_0x436178=>{const _0x4bf463=_0x367af9;_0x47870e+=_0x436178[_0x4bf463(0x2d2)]*_0x436178[_0x4bf463(0x1fd)];}),_0x3352ba[_0x2cf82d]['changes'][_0x367af9(0x1d4)](_0x2c9da1=>{const _0x3c9ad8=_0x367af9;_0xfe29d6+=_0x2c9da1[_0x3c9ad8(0x2d2)]*_0x2c9da1[_0x3c9ad8(0x1fd)];}),_0x21fbef*=_0xfe29d6/(_0x47870e-_0xfe29d6)+0x1;}_0x2cf82d++;}}let _0x3ccfca=0x0;_0x6df459['coins'][_0x367af9(0x1d4)](_0x15eb63=>{const _0x5812b1=_0x367af9;_0x3ccfca+=_0x15eb63[_0x5812b1(0x2d2)]*_0x15eb63[_0x5812b1(0x1fd)];}),_0x153fe9[_0x499b69['length']-_0x376979-0x1]=_0x3ccfca*(_0x21fbef-0x1);});let _0x1de595=[];_0x3352ba=[...config[_0x23fe77(0x234)]]||[];let _0xc0a4e7=0x0;_0x2cf82d=0x0,_0x499b69['forEach']((_0x304b58,_0x6c5afa)=>{const _0x3f75ef=_0x23fe77;if(_0x3352ba[_0x2cf82d]){const _0x559f80=fns[_0x3f75ef(0x26b)](_0x3352ba[_0x2cf82d][_0x3f75ef(0x184)],_0x3f75ef(0x1ea),new Date()),_0x2828fb=fns['parse'](_0x304b58[_0x3f75ef(0x184)],_0x3f75ef(0x1ea),new Date());if(fns['isEqual'](_0x559f80,_0x2828fb)){let _0x90e98b=0x0;_0x3352ba[_0x2cf82d][_0x3f75ef(0x18e)][_0x3f75ef(0x1d4)](_0x3e4674=>{const _0x38aa5c=_0x3f75ef;!_0x1de595[_0x3e4674['coin']]?_0x1de595[_0x3e4674[_0x38aa5c(0x28b)]]=_0x3e4674['number']:(_0x90e98b=_0x1de595[_0x3e4674[_0x38aa5c(0x28b)]],_0x1de595[_0x3e4674['coin']]+=_0x3e4674[_0x38aa5c(0x2d2)]);const _0x5d8653=_0x304b58[_0x38aa5c(0x1c8)][_0x38aa5c(0x1da)](_0x42046f=>_0x42046f['coin']==_0x3e4674['coin']);(!_0x5d8653||_0x5d8653[_0x38aa5c(0x2d2)]==0x0)&&(_0xc0a4e7+=(-_0x3e4674['number']-_0x90e98b)*_0x3e4674[_0x38aa5c(0x1fd)]);}),_0x2cf82d++;}}_0x304b58[_0x3f75ef(0x1c8)][_0x3f75ef(0x1d4)]((_0x251647,_0x1b2d42)=>{const _0x5f2f4b=_0x3f75ef;_0x1de595[_0x251647[_0x5f2f4b(0x28b)]]&&(_0x251647={..._0x251647,'initial':_0x1de595[_0x251647[_0x5f2f4b(0x28b)]]}),_0x304b58[_0x5f2f4b(0x1c8)][_0x1b2d42]=_0x251647;}),_0xc0b79d['push']({'date':_0x304b58[_0x3f75ef(0x184)],'eur':_0x304b58[_0x3f75ef(0x2d1)],'usd':_0x304b58[_0x3f75ef(0x1bc)],'offset':_0x153fe9[_0x6c5afa],'netoffset':_0xc0a4e7,'coins':_0x304b58[_0x3f75ef(0x1c8)]});});}return _0xc0b79d;}function emitPerformance(_0x25e74a){const _0x35c01c=_0x466c51;_0x25e74a['length']!==0x0?(proxyEmit('performance',_0x25e74a),lastPerformanceEmitted=getDate()):proxyEmit(_0x35c01c(0x2bd),[]);}function getPerf(_0x31e69f,_0x40b078){const _0x55a3f5=_0x466c51;let _0x5c89b8=0x0,_0x468fd7=0x0,_0x4abcc6=0x0;_0x31e69f[_0x55a3f5(0x1c8)][_0x55a3f5(0x1d4)](_0x8bd347=>{const _0x2e95db=_0x55a3f5;_0x5c89b8+=_0x8bd347[_0x2e95db(0x2d2)]*_0x8bd347[_0x2e95db(0x1fd)];});_0x40b078&&(_0x5c89b8+=_0x31e69f['offset']);if(config['basecoin']===_0x55a3f5(0x1b8)||config[_0x55a3f5(0x1c1)]===_0x55a3f5(0x206))_0x468fd7=_0x5c89b8*_0x31e69f['eur'],_0x4abcc6=_0x5c89b8*_0x31e69f['usd'];else{if(config['basecoin']===_0x55a3f5(0x203)||config['basecoin']==='USDT'||config[_0x55a3f5(0x1c1)]===_0x55a3f5(0x2c4))_0x468fd7=_0x5c89b8*_0x31e69f['eur']/_0x31e69f[_0x55a3f5(0x1bc)],_0x4abcc6=_0x5c89b8;else config['basecoin']===_0x55a3f5(0x26c)&&(_0x468fd7=_0x5c89b8,_0x4abcc6=_0x5c89b8*_0x31e69f['usd']/_0x31e69f[_0x55a3f5(0x2d1)]);}return[_0x5c89b8,_0x468fd7,_0x4abcc6];}function getKPIs(_0x3cbd29,_0x22e7db=_0x466c51(0x26c)){const _0x3a90c1=_0x466c51,_0x4fe4d4=config[_0x3a90c1(0x1c1)],_0x589757=config[_0x3a90c1(0x290)],_0x138fe2=currentCoins,_0x2f5333=getNormalizedPerformance(),_0x4606a1=_0x3cbd29===_0x3a90c1(0x1c1)?_0x4fe4d4:_0x3cbd29===_0x3a90c1(0x279)||_0x3cbd29===_0x3a90c1(0x21a)?_0x22e7db:_0x3a90c1(0x2cb)+_0x4fe4d4,_0x12c3b6=_0x3cbd29===_0x3a90c1(0x288)?'Net\x20effect':_0x3cbd29===_0x3a90c1(0x21a)?'Net\x20effect\x20('+_0x4606a1+')':_0x4606a1+_0x3a90c1(0x241),_0x322c7b=_0x3cbd29===_0x3a90c1(0x288)||_0x3cbd29===_0x3a90c1(0x21a)?'Net\x20effect':_0x4606a1+_0x3a90c1(0x273);let _0x3b3f9b=0x0;_0x138fe2[_0x3a90c1(0x1d4)](_0x7a2c14=>{const _0x138b26=_0x3a90c1;_0x3b3f9b+=_0x7a2c14[_0x138b26(0x2d2)]*_0x7a2c14[_0x138b26(0x211)];});if(_0x3cbd29===_0x3a90c1(0x279)||_0x3cbd29===_0x3a90c1(0x21a)){if(_0x4fe4d4===_0x3a90c1(0x1b8)||_0x4fe4d4===_0x3a90c1(0x206))_0x3b3f9b=_0x3b3f9b*(_0x22e7db===_0x3a90c1(0x26c)?_0x589757[_0x3a90c1(0x2d1)]:_0x589757['usd']);else{if(_0x4fe4d4===_0x3a90c1(0x203)||_0x4fe4d4===_0x3a90c1(0x2b2)||_0x4fe4d4===_0x3a90c1(0x2c4))_0x3b3f9b=_0x3b3f9b*(_0x22e7db==='EUR'?_0x589757['eur']/_0x589757[_0x3a90c1(0x1bc)]:0x1);else _0x4fe4d4===_0x3a90c1(0x26c)&&(_0x3b3f9b=_0x3b3f9b*(_0x22e7db===_0x3a90c1(0x26c)?0x1:_0x589757[_0x3a90c1(0x1bc)]/_0x589757['eur']));}}let _0x4a8085;if(_0x3b3f9b!==0x0){if(_0x3cbd29===_0x3a90c1(0x1c1))_0x4a8085=(_0x3b3f9b/startingBalances[_0x3a90c1(0x1c1)]-0x1)*0x64;else{if(_0x22e7db===_0x3a90c1(0x26c))_0x4a8085=(_0x3b3f9b/startingBalances[_0x3a90c1(0x2d1)]-0x1)*0x64;else _0x4a8085=(_0x3b3f9b/startingBalances['usd']-0x1)*0x64;}let _0x68770b=0x0;if(startingBalances['coins'])_0x138fe2['forEach'](_0x11ac0e=>{const _0x424370=_0x3a90c1;let _0x5e7908=startingBalances[_0x424370(0x1c8)][_0x424370(0x1da)](_0x328f91=>_0x328f91[_0x424370(0x28b)]===_0x11ac0e[_0x424370(0x28b)]);if(_0x5e7908&&_0x5e7908[_0x424370(0x28b)]&&_0x11ac0e[_0x424370(0x2d2)]!==0x0)_0x68770b+=_0x5e7908[_0x424370(0x2d2)]*_0x11ac0e[_0x424370(0x211)];});let _0x3cc00a=0x0;if(_0x2f5333[_0x3a90c1(0x2ad)]!==0x0){let _0x450fd9=_0x2f5333[_0x2f5333[_0x3a90c1(0x2ad)]-0x1];_0x3cc00a=_0x450fd9[_0x3a90c1(0x2c9)];}_0x68770b-=_0x3cc00a;_0x3cbd29===_0x3a90c1(0x288)&&(_0x4a8085=(_0x3b3f9b-_0x68770b)/startingBalances['basecoin']*0x64,_0x3b3f9b=_0x3b3f9b-_0x68770b);if(_0x3cbd29===_0x3a90c1(0x21a)){let _0x2e5642=_0x22e7db===_0x3a90c1(0x26c)?startingBalances[_0x3a90c1(0x2d1)]:startingBalances[_0x3a90c1(0x1bc)];if(_0x4fe4d4===_0x3a90c1(0x1b8)||_0x4fe4d4===_0x3a90c1(0x206))_0x68770b=_0x22e7db===_0x3a90c1(0x26c)?_0x68770b*_0x589757[_0x3a90c1(0x2d1)]:_0x68770b*_0x589757['usd'];else{if(_0x4fe4d4==='BUSD'||_0x4fe4d4==='USDT'||_0x4fe4d4===_0x3a90c1(0x2c4))_0x68770b=_0x22e7db==='EUR'?_0x68770b*_0x589757[_0x3a90c1(0x2d1)]/_0x589757[_0x3a90c1(0x1bc)]:_0x68770b;else _0x4fe4d4===_0x3a90c1(0x26c)&&(_0x68770b=_0x22e7db===_0x3a90c1(0x26c)?_0x68770b:_0x68770b*_0x589757['usd']/_0x589757[_0x3a90c1(0x2d1)]);}_0x4a8085=(_0x3b3f9b-_0x68770b)/_0x2e5642*0x64,_0x3b3f9b=_0x3b3f9b-_0x68770b;}if(_0x4a8085){if(_0x4a8085<0x64)_0x4a8085=_0x4a8085[_0x3a90c1(0x1de)](0x2);else{if(_0x4a8085<0x3e8)_0x4a8085=_0x4a8085[_0x3a90c1(0x1de)](0x1);else _0x4a8085=_0x4a8085[_0x3a90c1(0x1de)](0x0);}}else _0x4a8085=Number('0')[_0x3a90c1(0x1de)](0x2);if(_0x3b3f9b){if(Math[_0x3a90c1(0x222)](_0x3b3f9b)<0.000001)_0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x2);else{if(Math[_0x3a90c1(0x222)](_0x3b3f9b)<0.1)_0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x6);else{if(Math[_0x3a90c1(0x222)](_0x3b3f9b)<0x1)_0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x5);else{if(Math[_0x3a90c1(0x222)](_0x3b3f9b)<0xa)_0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x4);else{if(Math[_0x3a90c1(0x222)](_0x3b3f9b)<0x64)_0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x3);else{if(Math['abs'](_0x3b3f9b)<0x3e8)_0x3b3f9b=_0x3b3f9b['toFixed'](0x2);else _0x3b3f9b=_0x3b3f9b[_0x3a90c1(0x1de)](0x2);}}}}}}else _0x3b3f9b=Number('0')[_0x3a90c1(0x1de)](0x2);}else _0x4a8085=Number('0')[_0x3a90c1(0x1de)](0x2);return{'value':_0x3b3f9b,'change':_0x4a8085,'leftTxt':_0x12c3b6,'rightTxt':_0x322c7b};}async function getStartingBalances(_0x2b65e0,_0xa88fa3=!![]){const _0x1968ca=_0x466c51;if(_0x2b65e0[_0x1968ca(0x2ad)]!==0x0){const [_0x1984c5,_0x1e3ae8,_0xe13461]=getPerf(_0x2b65e0[0x0],!![]);let _0x58d8af=[];config[_0x1968ca(0x2ca)][_0x1968ca(0x1d4)](_0x4b68fc=>{const _0x3d5131=_0x1968ca;let _0x48234b=0x0,_0x46a5bd;config[_0x3d5131(0x234)][_0x3d5131(0x1d4)](_0x1f3d78=>{const _0x5325f9=_0x3d5131;let _0x527843=_0x1f3d78[_0x5325f9(0x18e)][_0x5325f9(0x1da)](_0x47d1de=>_0x47d1de['coin']==_0x4b68fc[_0x5325f9(0x28b)]);if(_0x527843){_0x48234b+=_0x527843[_0x5325f9(0x2d2)];if(!_0x46a5bd)_0x46a5bd=_0x527843[_0x5325f9(0x1fd)];}}),_0x58d8af['push']({'coin':_0x4b68fc['coin'],'number':_0x48234b,'initialprice':_0x46a5bd});});const _0x1ae88a={'basecoin':_0x1984c5,'eur':_0x1e3ae8,'usd':_0xe13461,'coins':_0x58d8af};if(_0xa88fa3)proxyEmit(_0x1968ca(0x246),_0x1ae88a);startingBalances=_0x1ae88a;}}function headlessMode(_0xa9642f){const _0x385c8f=_0x466c51;let _0x1ddc73=_0xa9642f[_0x385c8f(0x2ca)],_0x284e89=_0xa9642f[_0x385c8f(0x287)],_0x673bce=[];for(let _0x437632 of _0x1ddc73){if(_0x437632[_0x385c8f(0x28b)]!=config[_0x385c8f(0x1c1)]){if(_0x437632[_0x385c8f(0x220)]>=_0x284e89/0x64){if(_0x437632[_0x385c8f(0x1ed)])_0x673bce[_0x385c8f(0x2bc)](_0x437632);}else{if(_0x437632[_0x385c8f(0x220)]<=-_0x284e89/0x64){if(_0x437632[_0x385c8f(0x1ed)])_0x673bce[_0x385c8f(0x2bc)](_0x437632);}}}}_0x673bce['length']>0x0&&placeOrder(_0x673bce);}function notifyBalance(_0x25ca0b){const _0x402912=_0x466c51;let _0x4458b9=_0x25ca0b[_0x402912(0x2ca)],_0x1c3d59=_0x25ca0b[_0x402912(0x287)],_0x428e20=[];for(let _0x40a41f of _0x4458b9){if(_0x40a41f[_0x402912(0x28b)]!=config[_0x402912(0x1c1)]){if(_0x40a41f[_0x402912(0x220)]>=_0x1c3d59/0x64){if(_0x40a41f[_0x402912(0x1ed)])_0x428e20[_0x402912(0x2bc)](_0x40a41f);}else{if(_0x40a41f[_0x402912(0x220)]<=-_0x1c3d59/0x64){if(_0x40a41f[_0x402912(0x1ed)])_0x428e20[_0x402912(0x2bc)](_0x40a41f);}}}}if(_0x428e20[_0x402912(0x2ad)]>0x0){let _0x584e5e=_0x428e20[_0x402912(0x2bf)](_0x430929=>_0x430929['coin']);_0x584e5e['sort']();let _0x3b7830=_0x584e5e[_0x402912(0x23b)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x402912(0x210));lastCoinsToBalance=_0x3b7830;}}function symbolToCoin(_0x4f0bdb){const _0x4fedeb=_0x466c51;let _0x37b9b8;if(_0x4f0bdb[_0x4fedeb(0x1f8)]('/'+config[_0x4fedeb(0x1c1)]))_0x37b9b8=_0x4f0bdb[_0x4fedeb(0x2d3)]('/'+config['basecoin'],'');if(_0x4f0bdb[_0x4fedeb(0x1f8)](config[_0x4fedeb(0x1c1)]+'/'))_0x37b9b8=_0x4f0bdb[_0x4fedeb(0x2d3)](config[_0x4fedeb(0x1c1)]+'/','');return _0x37b9b8;}async function unlockOrders(){const _0x4388ee=_0x466c51;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x4388ee(0x196)),lockOrders=ORDERS[_0x4388ee(0x231)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4388ee(0x1ae)](_0x4388ee(0x186));}}async function validateOrders(_0x5dfafb){const _0x248255=_0x466c51;if(_0x5dfafb)validateOrdersState=_0x5dfafb;logger[_0x248255(0x1ae)](_0x248255(0x25d)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x248255(0x197):lockOrders==0x2?'ORDERS.UNLOCKING':_0x248255(0x2c1)));let _0x13f3e6=[],_0x3a9e08=config[_0x248255(0x2ae)]==_0x248255(0x223)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x248255(0x255)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x248255(0x2c5)])return;logger[_0x248255(0x1ae)](_0x248255(0x264)+validateOrdersState),lastOrders[_0x248255(0x1d4)](_0x544297=>{const _0x706f4b=_0x248255;let _0x53a87e=![];_0x544297['filled']>0x0&&(_0x53a87e=!![]),_0x13f3e6[_0x706f4b(0x2bc)](_0x53a87e),_0x53a87e&&config[_0x706f4b(0x2ae)]!=_0x706f4b(0x223)&&logHistory(_0x706f4b(0x1ff),_0x706f4b(0x266)+_0x544297[_0x706f4b(0x26d)]+'\x20'+_0x544297[_0x706f4b(0x1ee)]+'\x20#'+formatResult(_0x544297[_0x706f4b(0x1f9)],0x8)+'\x20@'+formatResult(_0x544297[_0x706f4b(0x1fd)],0x8));}),_0x13f3e6[_0x248255(0x1d4)]((_0x505ca7,_0x38699a)=>{const _0x3ff2ee=_0x248255;if(_0x505ca7)lastOrders[_0x3ff2ee(0x1aa)](_0x38699a,0x1);}),persistOpenOrders(lastOrders);const _0x2d594e=coolingDown?_0x248255(0x1f0):_0x248255(0x2a3);if(validateOrdersState=='initial')validateOrdersState=_0x248255(0x233),_0x13f3e6[_0x248255(0x1f8)](![])?config['ordertype']==_0x248255(0x223)?logHistory(_0x248255(0x29c),_0x248255(0x292)):logHistory(_0x248255(0x29c),_0x248255(0x295)):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x13f3e6['includes'](![])){}else allOrdersPlaced&&(config['ordertype']==_0x248255(0x223)?logHistory(_0x248255(0x1b3),_0x248255(0x17d)+_0x2d594e):logHistory('success','Order(s)\x20filled\x20-\x20'+_0x2d594e),await unlockOrders());}else{if(validateOrdersState==_0x248255(0x205))_0x13f3e6['includes'](![])&&(config['ordertype']==_0x248255(0x223)?logHistory(_0x248255(0x1b3),_0x248255(0x2b5)+Math[_0x248255(0x1e7)](_0x3a9e08*validateOrderInterval/0xea60)+_0x248255(0x263)+_0x2d594e):(await cancelOrders(),logHistory(_0x248255(0x1b3),_0x248255(0x18a)+Math[_0x248255(0x1e7)](_0x3a9e08*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2d594e))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x248255(0x2ae)]!=_0x248255(0x223))logHistory(_0x248255(0x1b3),'No\x20more\x20open\x20orders\x20-\x20'+_0x2d594e);await unlockOrders();}}}}}async function cancelOrders(){const _0x242967=_0x466c51;lastOrders[_0x242967(0x1d4)](async _0x5ec840=>{const _0x42dbea=_0x242967;try{const _0x3b7344=await exchange['cancelOrder'](_0x5ec840[_0x42dbea(0x24f)],_0x5ec840[_0x42dbea(0x26d)]);}catch(_0xee1ace){if(_0xee1ace[_0x42dbea(0x285)]()[_0x42dbea(0x1f8)](_0x42dbea(0x276))){}else await handleError(_0xee1ace,_0x42dbea(0x240));}});}async function initCoinResults(){const _0x5bf3b6=_0x466c51;let _0x28189a=[];config[_0x5bf3b6(0x2ca)]['forEach'](_0x2f3634=>{const _0x55fbd5=_0x5bf3b6;if(!_0x2f3634['excluded']&&_0x2f3634[_0x55fbd5(0x28b)]!=config[_0x55fbd5(0x1c1)]){let _0x3be1f4=dbCoinResults[_0x55fbd5(0x1a8)](_0x55fbd5(0x1c8))[_0x55fbd5(0x1da)]({'coin':_0x2f3634[_0x55fbd5(0x28b)]})[_0x55fbd5(0x17f)]();if(!_0x3be1f4){const _0x44f2a7=currentCoins[_0x55fbd5(0x1da)](_0x180609=>_0x180609['coin']==_0x2f3634[_0x55fbd5(0x28b)]),_0x32c6aa=global['ticker'][noslash(_0x2f3634['symbol'])];let _0x40a0d6=_0x44f2a7?_0x44f2a7[_0x55fbd5(0x2d2)]:null,_0x2c34ef=_0x2f3634['reverse']?0x1/_0x32c6aa:_0x32c6aa,_0x15531b;config[_0x55fbd5(0x234)][_0x55fbd5(0x1d4)](_0x34dfca=>{const _0x5e54f9=_0x55fbd5;!_0x15531b&&(_0x15531b=_0x34dfca[_0x5e54f9(0x18e)]['find'](_0xa6dc70=>_0xa6dc70['coin']==_0x2f3634[_0x5e54f9(0x28b)]),_0x15531b&&(_0x40a0d6=_0x15531b['number'],_0x2c34ef=_0x15531b[_0x5e54f9(0x1fd)]));}),_0x28189a[_0x55fbd5(0x2bc)]({'coin':_0x2f3634[_0x55fbd5(0x28b)],'number':_0x40a0d6,'price':_0x2c34ef});}}}),_0x28189a['forEach'](_0x52cd5f=>{const _0x4b9495=_0x5bf3b6,_0x14d72f={'coin':_0x52cd5f[_0x4b9495(0x28b)],'number':_0x52cd5f[_0x4b9495(0x2d2)],'breakeven':_0x52cd5f['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4b9495(0x1a8)](_0x4b9495(0x1c8))[_0x4b9495(0x2bc)](_0x14d72f)[_0x4b9495(0x1ac)]();});}async function updateCoinResults(_0x2f0b1f,_0x2524b3=![]){const _0x436360=_0x466c51;let _0x4d0ae4,_0x2892c6,_0x2c43c5,_0x22c4f8,_0x353f53,_0x3142f2,_0xb9c882=dbCoinResults[_0x436360(0x1a8)]('coins')[_0x436360(0x1da)]({'coin':_0x2f0b1f[_0x436360(0x28b)]})['value']();!_0xb9c882&&await initCoinResults();_0x2f0b1f[_0x436360(0x2a1)]&&(_0x3142f2={'filled':_0x2f0b1f[_0x436360(0x1f9)]*_0x2f0b1f[_0x436360(0x1fd)],'amount':_0x2f0b1f[_0x436360(0x1f9)]*_0x2f0b1f[_0x436360(0x1fd)],'side':_0x2f0b1f[_0x436360(0x1ee)]==_0x436360(0x1ad)?_0x436360(0x2a2):_0x436360(0x1ad),'price':0x1/_0x2f0b1f[_0x436360(0x1fd)]},_0x2f0b1f={..._0x2f0b1f,..._0x3142f2});_0x2524b3?_0x2892c6=_0x2f0b1f[_0x436360(0x1ee)]=='buy'?_0xb9c882[_0x436360(0x2d2)]+_0x2f0b1f[_0x436360(0x1f9)]:_0xb9c882[_0x436360(0x2d2)]-_0x2f0b1f[_0x436360(0x1f9)]:_0x2892c6=await getCoinNumber(_0x2f0b1f[_0x436360(0x28b)]);if(_0x2f0b1f[_0x436360(0x192)]&&_0x2f0b1f['fee'][_0x436360(0x20e)]==config['basecoin'])_0x4d0ae4=_0x2f0b1f[_0x436360(0x192)]['cost'];else{if(_0x2f0b1f[_0x436360(0x192)]&&_0x2f0b1f[_0x436360(0x192)]['currency']==_0x436360(0x1d0)&&!_0x2524b3)_0x4d0ae4=_0x2f0b1f[_0x436360(0x192)][_0x436360(0x1e9)]*global[_0x436360(0x2be)]['BNB'+config[_0x436360(0x1c1)]];else _0x4d0ae4=defaultFee*_0x2f0b1f[_0x436360(0x1f9)]*_0x2f0b1f[_0x436360(0x1fd)];}_0x2f0b1f[_0x436360(0x1ee)]=='buy'?(_0x2c43c5=_0x2892c6!=0x0?(_0xb9c882[_0x436360(0x22d)]*_0xb9c882['number']+_0x2f0b1f['price']*(_0x2892c6-_0xb9c882['number'])+_0x4d0ae4)/_0x2892c6:0x0,_0x22c4f8=_0xb9c882[_0x436360(0x244)]):(_0x2c43c5=_0x2892c6!=0x0?(_0xb9c882[_0x436360(0x22d)]*_0xb9c882[_0x436360(0x2d2)]-_0x2f0b1f['price']*(_0xb9c882[_0x436360(0x2d2)]-_0x2892c6)+_0x4d0ae4)/_0x2892c6:0x0,_0x22c4f8=_0xb9c882[_0x436360(0x244)]+(_0x2f0b1f[_0x436360(0x1fd)]-_0xb9c882[_0x436360(0x22d)])*_0x2f0b1f['filled']);_0x353f53=(_0x2f0b1f['price']-_0x2c43c5-_0x4d0ae4/_0x2f0b1f['filled'])*_0x2892c6;let _0xb6a24a={'coin':_0x2f0b1f[_0x436360(0x28b)],'number':_0x2892c6,'breakeven':formatResult(_0x2c43c5,0x8),'realized':formatResult(_0x22c4f8,0x8),'unrealized':formatResult(_0x353f53,0x8),'fees':formatResult(_0xb9c882['fees']+_0x4d0ae4,0x8),'sells':_0x2f0b1f[_0x436360(0x1ee)]==_0x436360(0x1ad)?_0xb9c882[_0x436360(0x1fe)]+0x1:_0xb9c882[_0x436360(0x1fe)],'buys':_0x2f0b1f[_0x436360(0x1ee)]=='buy'?_0xb9c882[_0x436360(0x236)]+0x1:_0xb9c882[_0x436360(0x236)]};dbCoinResults[_0x436360(0x1a8)](_0x436360(0x1c8))[_0x436360(0x1da)]({'coin':_0x2f0b1f['coin']})[_0x436360(0x1ba)](_0xb6a24a)[_0x436360(0x1ac)]();if(!_0x2524b3){if(_0x2f0b1f[_0x436360(0x192)]&&_0x2f0b1f[_0x436360(0x192)][_0x436360(0x20e)]=='BNB'){const _0x513f2c=currentCoins[_0x436360(0x1da)](_0x5d2380=>_0x5d2380['coin']==_0x436360(0x1d0));if(_0x513f2c){let _0x2a6a94=dbCoinResults['get'](_0x436360(0x1c8))[_0x436360(0x1da)]({'coin':_0x436360(0x1d0)})[_0x436360(0x17f)]();_0xb6a24a={..._0x2a6a94,'number':_0x513f2c[_0x436360(0x2d2)]},dbCoinResults[_0x436360(0x1a8)](_0x436360(0x1c8))[_0x436360(0x1da)]({'coin':_0x436360(0x1d0)})[_0x436360(0x1ba)](_0xb6a24a)[_0x436360(0x1ac)]();}}}}async function placeOrder(_0x2f7d17){const _0x475d33=_0x466c51,_0x396224=config[_0x475d33(0x2ae)]==_0x475d33(0x223)?_0x475d33(0x223):_0x475d33(0x193);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x475d33(0x2c5)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x2f9da3 of _0x2f7d17){let _0x5bd2b8,_0x11e464,_0x32d7db,_0x48a2c7,_0x922902,_0x1e419b=_0x2f9da3[_0x475d33(0x26d)];try{const _0x26036f=await exchange['fetchTicker'](_0x1e419b);_0x5bd2b8=_0x2f9da3[_0x475d33(0x2a1)]?0x1/_0x2f9da3[_0x475d33(0x211)]:_0x2f9da3[_0x475d33(0x211)],_0x11e464=_0x26036f[_0x475d33(0x17c)],_0x32d7db=_0x26036f['ask'];_0x2f9da3[_0x475d33(0x2a1)]?(_0x48a2c7=_0x2f9da3[_0x475d33(0x1ee)]=='buy'?_0x475d33(0x1ad):_0x475d33(0x2a2),_0x922902=Math[_0x475d33(0x222)](_0x2f9da3[_0x475d33(0x297)])/_0x5bd2b8):(_0x48a2c7=_0x2f9da3[_0x475d33(0x1ee)],_0x922902=Math[_0x475d33(0x222)](_0x2f9da3[_0x475d33(0x297)]));_0x396224==_0x475d33(0x193)&&(config[_0x475d33(0x2ae)]==_0x475d33(0x216)&&(_0x5bd2b8=_0x48a2c7==_0x475d33(0x2a2)?_0x11e464:_0x32d7db),config[_0x475d33(0x2ae)]==_0x475d33(0x1a2)&&(_0x5bd2b8=_0x48a2c7==_0x475d33(0x2a2)?_0x32d7db:_0x11e464));_0x922902=formatResult(_0x922902,0x8),_0x5bd2b8=formatResult(_0x5bd2b8,0x8);const _0x2002be=_0x48a2c7==_0x475d33(0x1ad)?config[_0x475d33(0x181)]?String['fromCodePoint']('0x'+config[_0x475d33(0x181)])+'\x20':'':config[_0x475d33(0x299)]?String[_0x475d33(0x21b)]('0x'+config['emojibuy'])+'\x20':'',_0x51e6f5=_0x396224==_0x475d33(0x223)?_0x475d33(0x24e):config[_0x475d33(0x2ae)]==_0x475d33(0x216)?_0x475d33(0x1a7):_0x475d33(0x2a6),_0x2d6ea9=new Date()['getTime']()[_0x475d33(0x285)]()[_0x475d33(0x1ca)](-0x6)+'-'+Math[_0x475d33(0x27e)]()[_0x475d33(0x285)]()[_0x475d33(0x1ca)](-0x6);lastOrders[_0x475d33(0x2bc)]({'customId':_0x2d6ea9,'symbol':_0x1e419b,'coin':_0x2f9da3['coin'],'side':_0x48a2c7,'reverse':_0x2f9da3['reverse'],'filled':0x0});if(_0x396224==_0x475d33(0x223))logHistory(_0x475d33(0x1ff),''+_0x2002be+_0x51e6f5+_0x475d33(0x1fc)+_0x1e419b+'\x20'+_0x48a2c7+'\x20#'+formatResult(_0x922902,0x8)+'\x20@'+formatResult(_0x5bd2b8,0x8));else logHistory(_0x475d33(0x1ff),''+_0x2002be+_0x51e6f5+_0x475d33(0x1fc)+_0x1e419b+'\x20'+_0x48a2c7+'\x20#'+formatResult(_0x922902,0x8)+'\x20@'+formatResult(_0x5bd2b8,0x8));const _0x5e6fcd=await exchange[_0x475d33(0x1cd)](_0x1e419b,_0x396224,_0x48a2c7,_0x922902,_0x5bd2b8,{'clientOrderId':_0x2d6ea9}),_0x2d0153=lastOrders[_0x475d33(0x2ad)]-0x1;_0x2d0153>=0x0&&lastOrders[_0x2d0153]['customId']==_0x2d6ea9&&(lastOrders[_0x2d0153]={...lastOrders[_0x2d0153],'orderId':_0x5e6fcd['id'],'amount':_0x5e6fcd['amount'],'price':_0x5e6fcd[_0x475d33(0x1fd)],'fee':_0x5e6fcd[_0x475d33(0x192)]});if(config[_0x475d33(0x1b7)]!=0x0){let _0x47857e=null;if(cooldownTracker[_0x475d33(0x2ad)]==config[_0x475d33(0x1b7)]-0x1)_0x47857e=cooldownTracker[_0x475d33(0x1af)]();const _0xa0f898=getTimeStamp();cooldownTracker[_0x475d33(0x2bc)](_0xa0f898);if(_0x47857e){const _0x5f4787=fns[_0x475d33(0x1bb)](new Date(_0xa0f898),new Date(_0x47857e));if(_0x5f4787<cooldownInterval){logHistory(_0x475d33(0x1d7),_0x475d33(0x1e5)+config[_0x475d33(0x1b7)]+_0x475d33(0x228)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x475d33(0x1dd)),coolingDown=!![];break;}}}}catch(_0x26e611){if(_0x26e611[_0x475d33(0x285)]()[_0x475d33(0x1f8)](_0x475d33(0x25b)))lastOrders=lastOrders[_0x475d33(0x230)](_0x34c6f0=>_0x34c6f0[_0x475d33(0x26d)]!=_0x1e419b),logHistory(_0x475d33(0x1d7),_0x475d33(0x22f)+_0x1e419b);else _0x26e611['toString']()[_0x475d33(0x1f8)](_0x475d33(0x191))?(lastOrders=lastOrders[_0x475d33(0x230)](_0x2c02c9=>_0x2c02c9[_0x475d33(0x26d)]!=_0x1e419b),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1e419b)):(lastOrders=lastOrders[_0x475d33(0x230)](_0x40cbd0=>_0x40cbd0[_0x475d33(0x26d)]!=_0x1e419b),await handleError(_0x26e611,'placeOrder()',_0x1e419b));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x475d33(0x2ad)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x225608=config[_0x475d33(0x2ae)]==_0x475d33(0x223)?validateOrderTimeout*0x3c*0x3e8:config[_0x475d33(0x255)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b4022=_0x475d33;validateOrders(_0x1b4022(0x205));},_0x225608);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x475d33(0x1b3),_0x475d33(0x27d)));}else{if(coolingDown)!config['headless']&&logHistory(_0x475d33(0x1d7),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x475d33(0x18b)]&&(!config[_0x475d33(0x23a)]&&(config[_0x475d33(0x2ae)]==_0x475d33(0x223)?logHistory(_0x475d33(0x1d7),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function _0x5776(_0x29ae12,_0x95271f){const _0x4e3d1c=_0x27fd();return _0x5776=function(_0x3feefa,_0x57d12c){_0x3feefa=_0x3feefa-0x17a;let _0x27fd7d=_0x4e3d1c[_0x3feefa];return _0x27fd7d;},_0x5776(_0x29ae12,_0x95271f);}function persistOpenOrders(_0x1264a1){const _0x2bb6be=_0x466c51,_0x3b4fc1={...config,'openOrders':_0x1264a1};let _0x5d1855=dbConfig['get'](_0x2bb6be(0x1d8))[_0x2bb6be(0x1da)]({'botID':botID})[_0x2bb6be(0x17f)]();_0x5d1855&&dbConfig[_0x2bb6be(0x1a8)](_0x2bb6be(0x1d8))[_0x2bb6be(0x1da)]({'botID':botID})['assign'](_0x3b4fc1)[_0x2bb6be(0x1ac)]();}function restoreOrders(){const _0x2770df=_0x466c51;let _0xeb68d5;config[_0x2770df(0x21d)]&&allOpenOrders[_0x2770df(0x1d4)](_0x3f593f=>{const _0x504d9d=_0x2770df,_0x529b5e=config[_0x504d9d(0x21d)][_0x504d9d(0x1da)](_0x2797df=>_0x2797df['orderId']==_0x3f593f['id']);_0x529b5e&&(lastOrders[_0x504d9d(0x2bc)](_0x529b5e),_0xeb68d5=_0x3f593f[_0x504d9d(0x19e)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x2770df(0x2c5)],validateOrdersState=_0x2770df(0x233),allOrdersPlaced=!![];const _0x3690d2=new Date()['getTime'](),_0xfd83bb=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2770df(0x255)]*0x3c*0x3e8;if(_0xeb68d5+_0xfd83bb>_0x3690d2){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x38273f=_0x2770df;validateOrders(_0x38273f(0x205));},_0xeb68d5+_0xfd83bb-_0x3690d2);}else validateOrders('final');}}async function sendPortfolioTelegram(){const _0x2c9d5a=_0x466c51;if(!coinsLoaded){process[_0x2c9d5a(0x261)]({'telegrammsg':_0x2c9d5a(0x2b8)},_0x154bef=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x191faf=[_0x2c9d5a(0x26c),_0x2c9d5a(0x2c4),_0x2c9d5a(0x203),_0x2c9d5a(0x2b2)],_0x56d612=_0x191faf['includes'](config[_0x2c9d5a(0x1c1)])?0x2:0x8;let _0x1bdfe0='';if(config[_0x2c9d5a(0x2a8)])_0x1bdfe0=_0x2c9d5a(0x296)+config[_0x2c9d5a(0x22b)]+_0x2c9d5a(0x20f);else _0x1bdfe0=_0x2c9d5a(0x291)+botID+_0x2c9d5a(0x20f);const _0x9ebfbf=getKPIs(_0x2c9d5a(0x1c1)),_0x12e11a=getKPIs('net-basecoin');_0x1bdfe0+=_0x2c9d5a(0x2c6),_0x1bdfe0+=_0x9ebfbf[_0x2c9d5a(0x1a9)]+_0x2c9d5a(0x275)+_0x9ebfbf[_0x2c9d5a(0x17f)]+'\x20\x0a',_0x1bdfe0+=_0x9ebfbf[_0x2c9d5a(0x17e)]+':\x20'+_0x9ebfbf[_0x2c9d5a(0x187)]+_0x2c9d5a(0x254),_0x1bdfe0+=_0x12e11a['leftTxt']+':\x20'+_0x12e11a[_0x2c9d5a(0x17f)]+'\x20'+config[_0x2c9d5a(0x1c1)]+'\x0a',_0x1bdfe0+=_0x12e11a['rightTxt']+':\x20'+_0x12e11a[_0x2c9d5a(0x187)]+_0x2c9d5a(0x254),_0x1bdfe0+='\x0a',_0x1bdfe0+=_0x2c9d5a(0x247),_0x1bdfe0+=_0x2c9d5a(0x28d),_0x1bdfe0+=_0x2c9d5a(0x247),currentCoins['forEach'](_0x1242fd=>{const _0x46c974=_0x2c9d5a;_0x1bdfe0+=_0x1242fd[_0x46c974(0x28b)][_0x46c974(0x25a)](0x7)+'|\x20'+formatPad(_0x1242fd[_0x46c974(0x270)],0x2,0x6)+'|\x20'+formatPad(_0x1242fd[_0x46c974(0x19d)],0x2,0x6)+'|\x20'+formatPad(_0x1242fd[_0x46c974(0x220)]*0x64,0x2,0x6)+'\x0a';}),_0x1bdfe0+=_0x2c9d5a(0x2a9),process['send']({'telegrammsg':_0x1bdfe0},_0x20f407=>{});}function formatPad(_0x4f7478,_0x2e7abd,_0x26e8eb){const _0x27ebe4=_0x466c51,_0x2c0c54=formatResultString(_0x4f7478,_0x2e7abd);return _0x2c0c54?_0x2c0c54[_0x27ebe4(0x1b0)](_0x26e8eb):''[_0x27ebe4(0x1b0)](_0x26e8eb);}function logHistory(_0x4afb81,_0x1c54a0,_0x39820b=''){const _0x992cb7=_0x466c51;let _0x593b06={'time':getTimeStamp(),'type':_0x4afb81,'event':_0x1c54a0};dbLogs[_0x992cb7(0x1a8)](_0x992cb7(0x256))['push'](_0x593b06)[_0x992cb7(0x1ac)]();if(_0x39820b=='')_0x39820b=_0x1c54a0;proxyEmit(_0x992cb7(0x1d1),{'log':_0x593b06,'summary':_0x39820b}),process[_0x992cb7(0x261)]({'telegram':{..._0x593b06,'botname':config[_0x992cb7(0x22b)],'showname':config['showname']}},_0x274a1e=>{}),logger[_0x992cb7(0x224)](''+_0x593b06[_0x992cb7(0x1d1)]);}function emitHistory(_0x225d95={}){const _0x393a3d=_0x466c51;Object[_0x393a3d(0x20a)](_0x225d95)[_0x393a3d(0x2ad)]==0x0&&(_0x225d95={'type':[_0x393a3d(0x1ff),_0x393a3d(0x1d1)],'event':'','page':0x1});if(_0x225d95[_0x393a3d(0x1a4)]['includes']('event'))_0x225d95[_0x393a3d(0x1a4)][_0x393a3d(0x1aa)](_0x225d95[_0x393a3d(0x1a4)][_0x393a3d(0x1ce)](_0x393a3d(0x1d1)),0x1,'error',_0x393a3d(0x1b3));if(dbLogs[_0x393a3d(0x1c7)]('logs')[_0x393a3d(0x17f)]()){let _0x328ce6=dbLogs[_0x393a3d(0x1a8)]('logs')[_0x393a3d(0x230)](_0xc6c1db=>{const _0x3b117a=_0x393a3d;if(_0x225d95[_0x3b117a(0x1a4)][_0x3b117a(0x2ad)]==0x0)return![];else return _0x225d95[_0x3b117a(0x1a4)][_0x3b117a(0x1f8)](_0xc6c1db['type']);})['filter'](_0x238635=>{const _0x375713=_0x393a3d;if(_0x225d95['event']=='')return!![];else return _0x238635[_0x375713(0x1d1)][_0x375713(0x2ac)]()[_0x375713(0x1f8)](_0x225d95['event'][_0x375713(0x2ac)]());})[_0x393a3d(0x2bb)](_0x393a3d(0x1b2)),_0x2cd334=_0x328ce6[_0x393a3d(0x17f)]()[_0x393a3d(0x2ad)];_0x328ce6=_0x328ce6[_0x393a3d(0x2a1)]()[_0x393a3d(0x1ca)]((_0x225d95[_0x393a3d(0x19b)]-0x1)*logPageSize,_0x225d95['page']*logPageSize-0x1)[_0x393a3d(0x2a1)]()[_0x393a3d(0x17f)](),proxyEmit(_0x393a3d(0x2af),{'logs':_0x328ce6,'total':_0x2cd334});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x29dcce){const _0x4e4d65=_0x466c51;if(dbLogs[_0x4e4d65(0x1c7)](_0x4e4d65(0x256))[_0x4e4d65(0x17f)]()){const _0x57d3f9=dbLogs[_0x4e4d65(0x1a8)](_0x4e4d65(0x256))[_0x4e4d65(0x2bb)]('time')[_0x4e4d65(0x230)](_0x544eb4=>{const _0x5d3292=_0x4e4d65;return _0x544eb4['type']==_0x5d3292(0x1ff);})[_0x4e4d65(0x17f)]();dbLogs[_0x4e4d65(0x1a8)]('logs')[_0x4e4d65(0x1e3)]()[_0x4e4d65(0x1ac)](),dbLogs[_0x4e4d65(0x1a8)](_0x4e4d65(0x256))['assign'](_0x57d3f9)[_0x4e4d65(0x1ac)](),emitHistory(_0x29dcce);}}async function pauseBot(_0x3c7874=''){const _0x456ed8=_0x466c51,_0xbbcaaf=new Date()[_0x456ed8(0x190)]();if(!lastErrorShown||_0xbbcaaf-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xbbcaaf;!lastBotPause?(lastBotPause=_0xbbcaaf,consecutivePauses=0x1):(_0xbbcaaf-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x456ed8(0x261)]({'stop':_0x456ed8(0x1d6)},_0x3bb613=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3c7874)_0x3c7874+=_0x456ed8(0x1c9);logHistory(_0x456ed8(0x1d7),_0x3c7874+_0x456ed8(0x19c)+pauseBotInterval/0xea60+_0x456ed8(0x259)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x30d8a4=_0x466c51;process[_0x30d8a4(0x261)]({'stop':_0x30d8a4(0x188)},_0x577633=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x18dc35,_0x17eff1){const _0xab0588=_0x466c51;if(_0x18dc35[_0xab0588(0x285)]()[_0xab0588(0x1f8)]('API-key\x20format\x20invalid'))return logHistory(_0xab0588(0x1d7),config[_0xab0588(0x29e)]+_0xab0588(0x214)),![];else{if(_0x18dc35[_0xab0588(0x285)]()[_0xab0588(0x1f8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0xab0588(0x1d7),config[_0xab0588(0x29e)]+_0xab0588(0x2c3)),![];else{if(_0x18dc35['toString']()[_0xab0588(0x1f8)](_0xab0588(0x2b4)))return logHistory(_0xab0588(0x1d7),config[_0xab0588(0x29e)]+_0xab0588(0x2b0)+config[_0xab0588(0x29e)]),![];else await handleError(_0x18dc35,_0x17eff1);}}}async function handleError(_0x47a343,_0x53a063,_0x3e880f=''){const _0x3e4abe=_0x466c51;if(_0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)](_0x3e4abe(0x219)))await pauseBot(config[_0x3e4abe(0x29e)]+_0x3e4abe(0x194));else{if(_0x47a343['toString']()['includes'](_0x3e4abe(0x2c0)))await pauseBot(config['exchange']+_0x3e4abe(0x20d));else{if(_0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)]('RequestTimeout'))await pauseBot(config[_0x3e4abe(0x29e)]+_0x3e4abe(0x27f));else{if(_0x47a343['toString']()[_0x3e4abe(0x1f8)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3e4abe(0x1d7),_0x53a063+_0x3e4abe(0x1b9)),logHistory(_0x3e4abe(0x1d7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)](_0x3e4abe(0x283)))logHistory(_0x3e4abe(0x1d7),_0x53a063+_0x3e4abe(0x1fa)),logHistory(_0x3e4abe(0x1d7),_0x3e4abe(0x28a)),await killBot();else{if(_0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)](_0x3e4abe(0x1e6)))logHistory(_0x3e4abe(0x1d7),_0x53a063+_0x3e4abe(0x1c9)+config[_0x3e4abe(0x29e)]+'\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x3e4abe(0x28a)),await killBot();else{if(_0x47a343[_0x3e4abe(0x285)]()['includes'](_0x3e4abe(0x229)))logHistory(_0x3e4abe(0x1d7),_0x53a063+'\x20|\x20'+config[_0x3e4abe(0x29e)]+_0x3e4abe(0x2c3)),logHistory('error',_0x3e4abe(0x28a)),await killBot();else{if(_0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)](_0x3e4abe(0x2b4)))logHistory(_0x3e4abe(0x1d7),_0x53a063+'\x20|\x20'+config[_0x3e4abe(0x29e)]+_0x3e4abe(0x1df)+config['exchange']),logHistory(_0x3e4abe(0x1d7),_0x3e4abe(0x28a)),await killBot();else _0x47a343[_0x3e4abe(0x285)]()[_0x3e4abe(0x1f8)]('InsufficientFunds')?logHistory(_0x3e4abe(0x1d7),_0x53a063+_0x3e4abe(0x26f)+_0x3e880f):(logger[_0x3e4abe(0x224)](_0x53a063+'\x20|\x20Error\x20details:\x20',_0x47a343),await pauseBot(_0x3e4abe(0x26e)));}}}}}}}}function formatResult(_0x2f8537,_0x8e79fd){const _0x2fa744=_0x466c51;return parseFloat(_0x2f8537[_0x2fa744(0x1de)](_0x8e79fd));}function formatResultTruncate(_0x2cc81d,_0x192140){const _0x4d478d=_0x466c51;let _0x4b5dc5=formatResultString(_0x2cc81d,0xa),_0x4bd11f=_0x4b5dc5['indexOf']('.');return _0x4bd11f!=-0x1&&(_0x4b5dc5=_0x4b5dc5[_0x4d478d(0x1ca)](0x0,_0x4bd11f+_0x192140+0x1)),Number(_0x4b5dc5);}function formatResultString(_0x25ee34,_0x2f2e0c){const _0x43f493=_0x466c51;let _0x1e8971;if(!(''+_0x25ee34)[_0x43f493(0x1f8)]('e'))_0x1e8971=+(Math[_0x43f493(0x1e7)](_0x25ee34+'e+'+_0x2f2e0c)+'e-'+_0x2f2e0c);else{let _0x3c81c0=(''+_0x25ee34)[_0x43f493(0x201)]('e'),_0x15a25c='';+_0x3c81c0[0x1]+_0x2f2e0c>0x0&&(_0x15a25c='+'),_0x1e8971=+(Math[_0x43f493(0x1e7)](+_0x3c81c0[0x0]+'e'+_0x15a25c+(+_0x3c81c0[0x1]+_0x2f2e0c))+'e-'+_0x2f2e0c);}return Number(_0x1e8971)[_0x43f493(0x1de)](_0x2f2e0c);}function getServerTime(){const _0x486266=_0x466c51,_0x40e4a1=new Date();return _0x40e4a1[_0x486266(0x1a1)]()+'/'+(_0x40e4a1[_0x486266(0x21c)]()+0x1)[_0x486266(0x285)]()[_0x486266(0x1b0)](0x2,'0')+'/'+_0x40e4a1[_0x486266(0x22c)]()[_0x486266(0x285)]()['padStart'](0x2,'0')+'\x20'+_0x40e4a1[_0x486266(0x245)]()[_0x486266(0x285)]()[_0x486266(0x1b0)](0x2,'0')+':'+_0x40e4a1['getMinutes']()[_0x486266(0x285)]()['padStart'](0x2,'0')+':'+_0x40e4a1['getSeconds']()[_0x486266(0x285)]()[_0x486266(0x1b0)](0x2,'0');}function getTimeStamp(){const _0x26d492=_0x466c51,_0x5b242e=shiftedTime();return _0x5b242e['getFullYear']()+'/'+(_0x5b242e[_0x26d492(0x21c)]()+0x1)[_0x26d492(0x285)]()[_0x26d492(0x1b0)](0x2,'0')+'/'+_0x5b242e[_0x26d492(0x22c)]()[_0x26d492(0x285)]()[_0x26d492(0x1b0)](0x2,'0')+'\x20'+_0x5b242e[_0x26d492(0x245)]()[_0x26d492(0x285)]()[_0x26d492(0x1b0)](0x2,'0')+':'+_0x5b242e[_0x26d492(0x2cd)]()['toString']()[_0x26d492(0x1b0)](0x2,'0')+':'+_0x5b242e['getSeconds']()['toString']()[_0x26d492(0x1b0)](0x2,'0');}function getDate(){const _0x496030=_0x466c51,_0x3fd2ad=shiftedTime();return _0x3fd2ad['getFullYear']()+'/'+(_0x3fd2ad['getMonth']()+0x1)[_0x496030(0x285)]()[_0x496030(0x1b0)](0x2,'0')+'/'+_0x3fd2ad[_0x496030(0x22c)]()[_0x496030(0x285)]()[_0x496030(0x1b0)](0x2,'0');}function getHour(){const _0x1f28e5=_0x466c51,_0x23907d=shiftedTime();return _0x23907d[_0x1f28e5(0x245)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x23428a){return new Promise(_0x4cb11e=>setTimeout(_0x4cb11e,_0x23428a));}function shiftedTime(){const _0x1c23ae=_0x466c51,_0x512d30=new Date();let _0x3a2016=_0x512d30;if(config&&config[_0x1c23ae(0x1b4)]!==0x0)_0x3a2016=fns[_0x1c23ae(0x28c)](_0x512d30,{'hours':config[_0x1c23ae(0x1b4)]});return _0x3a2016;}function timer(_0x46c387){const _0xc86c10=_0x466c51,_0x3522e0=new Date();!lasttime?console['log'](_0xc86c10(0x1b6),_0x46c387,_0x3522e0):console['log'](_0xc86c10(0x1b6),_0x46c387,(_0x3522e0-lasttime)/0x3e8),lasttime=_0x3522e0;}