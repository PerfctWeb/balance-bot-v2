const _0x1488c4=_0x210b;(function(_0x4844bd,_0xc96f62){const _0x13bb0c=_0x210b,_0x395ed3=_0x4844bd();while(!![]){try{const _0x10111b=-parseInt(_0x13bb0c(0x180))/0x1+-parseInt(_0x13bb0c(0x1b3))/0x2*(-parseInt(_0x13bb0c(0x115))/0x3)+parseInt(_0x13bb0c(0x151))/0x4+-parseInt(_0x13bb0c(0x13a))/0x5*(-parseInt(_0x13bb0c(0x1ac))/0x6)+-parseInt(_0x13bb0c(0x222))/0x7*(-parseInt(_0x13bb0c(0x235))/0x8)+-parseInt(_0x13bb0c(0x1e7))/0x9+parseInt(_0x13bb0c(0x184))/0xa;if(_0x10111b===_0xc96f62)break;else _0x395ed3['push'](_0x395ed3['shift']());}catch(_0x5ce576){_0x395ed3['push'](_0x395ed3['shift']());}}}(_0x3855,0x6e44d));const _0x3836ae=function(){let _0x382c55=!![];return function(_0x2b8328,_0x3a5c00){const _0x1cdd82=_0x382c55?function(){const _0x4b017b=_0x210b;if(_0x3a5c00){const _0x2f6a14=_0x3a5c00[_0x4b017b(0x1b0)](_0x2b8328,arguments);return _0x3a5c00=null,_0x2f6a14;}}:function(){};return _0x382c55=![],_0x1cdd82;};}(),_0x4dc959=_0x3836ae(this,function(){const _0x2748c1=_0x210b;return _0x4dc959[_0x2748c1(0x10f)]()[_0x2748c1(0x167)](_0x2748c1(0x17c))[_0x2748c1(0x10f)]()[_0x2748c1(0x22f)](_0x4dc959)[_0x2748c1(0x167)](_0x2748c1(0x17c));});_0x4dc959();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x1488c4(0x1ef)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x1488c4(0x165))[_0x1488c4(0x153)],util=require(_0x1488c4(0x1ca)),argv=require(_0x1488c4(0x1fc))(process['argv'][_0x1488c4(0x149)](0x2))['argv'],path=require(_0x1488c4(0x239));let exchange;global['ticker']={},global[_0x1488c4(0xc5)]={};const usdBasecoins=[_0x1488c4(0x21d),_0x1488c4(0xd1),_0x1488c4(0x131),'USDT',_0x1488c4(0x16d),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1488c4(0x1c2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];function _0x3855(){const _0x30a0e4=['max','Limit\x20(low-margin)','excluded','bb-settings.json','7FXwkzr','datetime','running','symbol','split','createOrder','BTC','3\x20-\x20handling\x20FILLED\x20order:\x20','substring','stringify','sells','rightTxt','Binance','constructor','resetHistory','replace','RequestTimeout','storeHeadless','<b>','3365480eDYAHH','fetchOpenOrders','set','message','path','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit-high','password','limit','\x20:\x20','value','timeout','Manual\x20balancing\x20required','send','%\x20(','MIN_NOTIONAL','getPortfolio(0)','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','exchange','Exchange','warning','Avoiding\x20continuous\x20order\x20attempts','min','Limit\x20(high-margin)','UNLOCKING','configuration','getPortfolio(1)','change','************','2.6.0','getFullYear','customId','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','portfolio','total','exchanges','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','ongoing','price','BUSD','padStart','apiPassword','restart','net-basecoin','existsSync','performance','./config/','toUpperCase','orderId','netoffset','forEach','Initiating\x20exchange\x20reload','privateKey','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','threshold','realized','\x20metrics:</b>\x20\x0a\x0a','limits',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Uncaught\x20NetworkError:','target','date','format','Waited\x20','net-fiat',':\x20Bot\x20','distribution','yyyy-MM-dd\x27T\x27HH:mm:ss','sell','keys','\x20orders\x20in\x20less\x20than\x20','\x20change','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','cooldown','001','has','getDate','botname','offset','final','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','close','LOCKED','valid','timeshift','Unknown\x20error\x20occured','liquidity','Error\x20while\x20deleting\x20files:\x20','\x20|\x20lock\x20orders:\x20','fromCodePoint','cloneDeep','getTime','percentage','getPortfolio','Unfilled\x20order(s)\x20canceled\x20after\x20','2.3.5','\x20exchange','timestamp','Order\x20is\x20invalid:\x20','padEnd','toString','assign','\x20has\x20a\x2024h\x20drop\x20of\x20','cost','findIndex','/USD','297456QxAKxR','sortBy','Saving\x20configuration','closed','number','getStartingBalances','Fee\x20discount\x20refund\x20detected:\x20','EUR','uncaughtException','getCoinNumber()','bb-secure.json','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','***','secure','full','apiKey','ORDERS.LOCKED','side','ExchangeNotAvailable','RateLimitExceeded','ETH','event-history','sendPortfolioTelegram','emojibuy','enabled','OrderNotFound','args','loading-canceled','TUSD','trade','error','<pre>','Order(s)\x20not\x20validated\x20after\x20','loadSymbols()','coin-loading-progress','abs','pro','100QwUBXg','includes','fetchTickers','/EUR','Net\x20effect','open','2\x20-\x20Validate\x20orders:\x20','bid','reverse','Order\x20filled:\x20','write','random','\x20>\x20','deleteHistoryAlerts','ordertype','slice','fetchTicker','toLowerCase','\x20not\x20responding','watchTrades','0\x20-\x20EXECUTION:\x20',':\x20timer\x20>','ORDERS.UNLOCKED','2055952XkCOBe','toggleBotMode','Crypt','sort','remainingSymbols','showname','shift','filled','\x20not\x20available','buys','Invalid\x20API\x20key\x20or\x20secret\x20entered','kill','version','add','fiat','\x20minutes\x20-\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','2\x20-\x20Handled\x20open\x20orders','\x20|\x20exchange:\x20','Executed\x20','hybrid-crypto-js','time','search','getCoins()','floor','startnumber','<b>Bot\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','USDC','</pre>','find','settings','InsufficientFunds','yyyy/MM/dd','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','/output-000.log','botID','Resetting\x20coin\x20results:\x20','buy','average','last','USDT','coin','(((.+)+)+)+$','debug','defaults','2.5.0','857874ymAulE','NetworkError','Net\x20','Invalid\x20quantity','2830140ficGcQ','balancing\x20resumes\x20when\x20cooldown\x20ends','getSeconds','removed','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','bot-','storeConfiguration','unlinkSync','Market','splice','exec','orderstatus','./logs/','test','Cooldown\x20ended\x20-\x20balancing\x20resumed','API-key\x20format\x20invalid','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','spot','Pausing\x20for\x20','createWriteStream','DDoSProtection','initial','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','watchOrders','-events.json','ID:\x20','mkdirSync','AuthenticationError','openOrders','Uncaught\x20Exception:','event','round','-------------------------------\x0a','apiSecret','loadMarkets','function','get','placeOrder()','bot','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','267798gTjIvy','emitHistory','basecoin','autoliquidity','apply','type','2\x20-\x20FILLED\x20unknown\x20order:\x20','2JIahrw','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','delta','cancelLoading','success','progress','fee','getMinutes','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20|\x20Error\x20details:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','highest','Bot\x20','starting-balances','UNLOCKED','getPortfolio(2)','balances','fetchClosedOrders','data','exchange\x20not\x20reloaded','currency','\x20portfolio:</b>\x20\x0a\x0a','util','emojisell','status','recreateCoinResults()','exchange\x20reloaded','length','startdate','added','headless','page','\x20order:\x20','startprice','getMonth','colorscheme','cancel','getOpenOrders()','eur','decrypt','BNB','breakeven','indexOf','bots','log','cancelOrder','OnMaintenance','-results.json','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','logs','usd','8099676lkbfaZ','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','BNB/','2\x20-\x20FILLED\x20known\x20order:\x20','Executing\x20exchange\x20reload','filter','no\x20open\x20orders','changes','lowdb/adapters/FileSync','cancelOrders()','getHours','push','concat','order','\x20>\x20[DEBUG]\x20','basecoinvalue','fetchBalance','Portfolio\x20change\x20detected:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','join','1\x20-\x20FILLED:\x20','yargs/yargs','coins','leftTxt','showConfig','Order\x20amount\x20is\x20invalid:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','isEqual','market','ask','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','remove','Transaction\x20detection\x20blocked','No\x20more\x20open\x20orders\x20-\x20','red_yellow_blue','\x20|\x20','parse','onepagemode','toFixed','change24h','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','fees','entries','amount','none','storeFiat','initclient','.json','recent20','parseISO','ticker','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Failed\x20to\x20load\x20coin\x20data\x20for\x20','-performance.json','USD'];_0x3855=function(){return _0x30a0e4;};return _0x3855();}const serverversion=require('./version.json')[_0x1488c4(0x15d)],botID=process['argv'][0x2]||_0x1488c4(0xf5),pattern=/^[0-9]{3}$/;!pattern[_0x1488c4(0x191)](botID)&&(console[_0x1488c4(0x1e0)]('Error:\x20Invalid\x20argument\x20'+botID+_0x1488c4(0xe4)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x1488c4(0xd8)+userID+'/':'./config/',logspath=userID?_0x1488c4(0x190)+userID+'/':_0x1488c4(0x190),loggerfile=fs[_0x1488c4(0x197)](logspath+_0x1488c4(0x174),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x1488c4(0x19e)](configpath);!fs[_0x1488c4(0xd6)](logspath)&&fs[_0x1488c4(0x19e)](logspath);const configfile=configpath+_0x1488c4(0x189)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x1488c4(0x19c),performancefile=configpath+_0x1488c4(0x189)+botID+_0x1488c4(0x21c),coinresultsfile=configpath+_0x1488c4(0x189)+botID+'-results.json',settingsfile=configpath+_0x1488c4(0x221),securefile=configpath+_0x1488c4(0x11f),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1488c4(0x17e)]({'logs':[],'version':serverversion})[_0x1488c4(0x144)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1488c4(0x17e)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1488c4(0x17e)]({'bot':[],'version':serverversion})[_0x1488c4(0x144)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x1488c4(0x144)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1245db=>{const _0x31c9cd=_0x1488c4;console[_0x31c9cd(0x1e0)](_0x1245db);},'simple':_0x5574bb=>{const _0x317335=_0x1488c4;console[_0x317335(0x1e0)](_0x5574bb),loggerfile[_0x317335(0x144)](util['format'](_0x5574bb)+'\x0a');},'full':async(_0x459367,_0x4c1a51='')=>{const _0x358e0c=_0x1488c4;let _0x4c073a;if(config[_0x358e0c(0x156)])_0x4c073a=getTimeStamp()+':\x20'+config[_0x358e0c(0xf8)]+_0x358e0c(0x146)+_0x459367;else _0x4c073a=getTimeStamp()+':\x20Bot\x20'+botID+_0x358e0c(0x146)+_0x459367;console[_0x358e0c(0x1e0)](_0x4c073a),loggerfile['write'](util[_0x358e0c(0xe9)](_0x4c073a)+'\x0a'),_0x4c1a51&&(console[_0x358e0c(0x1e0)](_0x4c1a51),loggerfile[_0x358e0c(0x144)](util['format'](_0x4c1a51)+'\x0a'));},'debug':async(_0x1261a4,_0x1af4c8='')=>{const _0x2ada5b=_0x1488c4;let _0x1bafae;if(config['showname'])_0x1bafae=getTimeStamp()+':\x20'+config[_0x2ada5b(0xf8)]+_0x2ada5b(0x1f5)+_0x1261a4;else _0x1bafae=getTimeStamp()+_0x2ada5b(0xec)+botID+'\x20>\x20[DEBUG]\x20'+_0x1261a4;if(debugging)console['log'](_0x1bafae);loggerfile[_0x2ada5b(0x144)](util['format'](_0x1bafae)+'\x0a');if(_0x1af4c8){if(debugging)console[_0x2ada5b(0x1e0)](_0x1af4c8);loggerfile[_0x2ada5b(0x144)](util[_0x2ada5b(0xe9)](_0x1af4c8)+'\x0a');}}};process['on'](_0x1488c4(0x11d),function(_0x56dba5){const _0x5e0e47=_0x1488c4;logHistory('error','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x5e0e47(0x17d)](_0x5e0e47(0x1a1),_0x56dba5);});settings[_0x1488c4(0xff)]!=config[_0x1488c4(0xff)]&&updateTimeshift(settings[_0x1488c4(0xff)]);settings[_0x1488c4(0x20c)]!=config[_0x1488c4(0x20c)]&&updateOnepagemode(settings[_0x1488c4(0x20c)]);process[_0x1488c4(0xb7)]({'started':_0x1488c4(0x224)},_0x567bb4=>{}),initializeProcessListeners();function proxyEmit(_0x54c70b,_0x2326b5=null){const _0x2a6fff=_0x1488c4;process[_0x2a6fff(0xb7)]({'function':_0x54c70b,'args':_0x2326b5},_0x2b88fe=>{});}function initializeProcessListeners(){const _0x2ba67d=_0x1488c4;process['on'](_0x2ba67d(0x238),_0x4da3b6=>{const _0x3f0777=_0x2ba67d;switch(Object[_0x3f0777(0xf0)](_0x4da3b6)[0x0]){case _0x3f0777(0xff):_0x4da3b6[_0x3f0777(0xff)]!=undefined&&(settings[_0x3f0777(0xff)]=_0x4da3b6[_0x3f0777(0xff)],updateTimeshift(settings[_0x3f0777(0xff)]));break;case _0x3f0777(0x20c):_0x4da3b6['onepagemode']!=undefined&&(settings[_0x3f0777(0x20c)]=_0x4da3b6[_0x3f0777(0x20c)],updateOnepagemode(settings['onepagemode']));break;case _0x3f0777(0x1df):_0x4da3b6[_0x3f0777(0x1df)]!=undefined&&(bots=JSON[_0x3f0777(0x20b)](_0x4da3b6[_0x3f0777(0x1df)]),proxyEmit('bots',bots));break;case'function':switch(_0x4da3b6[_0x3f0777(0x1a7)]){case _0x3f0777(0x215):initclient();break;case _0x3f0777(0x152):toggleBotMode();break;case _0x3f0777(0x1ad):emitHistory(_0x4da3b6[_0x3f0777(0x12f)]);break;case _0x3f0777(0x147):deleteHistoryAlerts(_0x4da3b6[_0x3f0777(0x12f)]);break;case _0x3f0777(0x108):getPortfolio(_0x4da3b6['args']);break;case _0x3f0777(0x18a):storeConfiguration(_0x4da3b6[_0x3f0777(0x12f)]);break;case _0x3f0777(0x233):storeHeadless(_0x4da3b6['args']);break;case _0x3f0777(0x214):storeFiat(_0x4da3b6['args']);break;case _0x3f0777(0x230):resetHistory();break;case _0x3f0777(0x11a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4da3b6[_0x3f0777(0x12f)]);break;case _0x3f0777(0x1b6):cancelLoading();break;case _0x3f0777(0x1ff):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3f0777(0x12b):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3e3c6a=null,_0x55dff0=![]){const _0x257101=_0x1488c4;logger['debug']('Reset\x20|\x20'+(_0x3e3c6a&&_0x3e3c6a[_0x257101(0x1cf)]>0x0?'additional\x20symbols\x20'+_0x3e3c6a[_0x257101(0x1fa)](','):'no\x20additional\x20symbols')+_0x257101(0x20a)+(_0x55dff0?_0x257101(0x1ce):_0x257101(0x1c7))+_0x257101(0x163)+config[_0x257101(0xbc)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x55dff0)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x257101(0x124)]!=''&&config[_0x257101(0x124)]!='***'){if(_0x55dff0){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x165340){handleErrorNoStop(_0x165340,_0x257101(0x136));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3e3c6a);const _0x336bfb=await getCoins();[currentCoins,currentCoinsAll]=_0x336bfb,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x257101(0x1cf)]==0x0&&allOpenOrders[_0x257101(0x1cf)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2cf95c=_0x1488c4;exchangeStopped=!![],await exchange[_0x2cf95c(0xfc)]();}async function reloadExchange(){const _0x4dcd42=_0x1488c4;logger[_0x4dcd42(0x17d)](_0x4dcd42(0xdd));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x4dcd42(0x1eb)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4f8945=config[_0x1488c4(0xbc)],_0x212ddc=config['apiKey'],_0x22bcd6=config[_0x1488c4(0x1a5)],_0x377fee=config['apiPassword']){const _0x2d26e7=_0x1488c4;exchange&&await stopExchange();!supportedExchanges()[_0x2d26e7(0x13b)](_0x4f8945)&&(logHistory(_0x2d26e7(0x133),_0x2d26e7(0x1e8)+_0x4f8945+_0x2d26e7(0x10b)),killBot());const _0x405b73=ccxt[_0x2d26e7(0x139)][_0x4f8945[_0x2d26e7(0x14b)]()];exchange=new _0x405b73({'apiKey':_0x212ddc,'secret':_0x22bcd6,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2d26e7(0x195)}});if(_0x377fee)exchange[_0x2d26e7(0x23c)]=_0x377fee;}function setStableCoins(){const _0x3dab91=_0x1488c4;let _0x47de51=config[_0x3dab91(0x1ae)]==_0x3dab91(0x129)?_0x3dab91(0x129):'BTC',_0xfdffe6=!allSymbols[_0x3dab91(0x13b)](_0x47de51+_0x3dab91(0x114))?_0x3dab91(0x17a):_0x3dab91(0x21d),_0x236042=!allSymbols['includes'](_0x47de51+_0x3dab91(0x13d))?_0xfdffe6:'EUR';stablecoins={'eur':{'coin':''+_0x47de51+_0x236042,'symbol':_0x47de51+'/'+_0x236042},'usd':{'coin':''+_0x47de51+_0xfdffe6,'symbol':_0x47de51+'/'+_0xfdffe6}};}async function initwsCcxt(_0x226b31){const _0x376bbe=_0x1488c4;_0x226b31==null&&(_0x226b31=[],config[_0x376bbe(0xcb)][_0x376bbe(0xdc)](_0x2f7ba5=>{const _0x21fa5e=_0x376bbe;if(!_0x2f7ba5['excluded']&&_0x2f7ba5[_0x21fa5e(0x17b)]!=config['basecoin'])_0x226b31['push'](_0x2f7ba5[_0x21fa5e(0x225)]);}));if(!_0x226b31[_0x376bbe(0x13b)](stablecoins[_0x376bbe(0x1da)]['symbol']))_0x226b31[_0x376bbe(0x1f2)](stablecoins[_0x376bbe(0x1da)][_0x376bbe(0x225)]);if(!_0x226b31[_0x376bbe(0x13b)](stablecoins[_0x376bbe(0x1e6)]['symbol']))_0x226b31[_0x376bbe(0x1f2)](stablecoins[_0x376bbe(0x1e6)][_0x376bbe(0x225)]);if(config['exchange']['startsWith']('Binance')){if(!_0x226b31[_0x376bbe(0x13b)](_0x376bbe(0x1e9)+config[_0x376bbe(0x1ae)]))_0x226b31['push'](_0x376bbe(0x1e9)+config[_0x376bbe(0x1ae)]);}loadCoins(_0x226b31);const _0x570ed7=async _0x1d411a=>{const _0x48a7f0=_0x376bbe,_0x5d3656=await exchange[_0x48a7f0(0x14a)](_0x1d411a);global[_0x48a7f0(0x219)][noslash(_0x5d3656[_0x48a7f0(0x225)])]=_0x5d3656[_0x48a7f0(0x179)];while(!![]){if(!botPaused)try{const _0x16859f=await exchange[_0x48a7f0(0x14d)](_0x1d411a);global[_0x48a7f0(0x219)][noslash(_0x16859f[0x0][_0x48a7f0(0x225)])]=_0x16859f[0x0][_0x48a7f0(0xd0)],await sleep(0x3e8);}catch(_0x123374){if(!exchangeStopped)await handleError(_0x123374,'watchTrades',_0x1d411a);}else await sleep(0x64);}},_0x19eee6=async _0x31536a=>{const _0x1db7b2=_0x376bbe;while(!![]){if(!botPaused)try{const _0x428dd9=await exchange['fetchTicker'](_0x31536a);global[_0x1db7b2(0xc5)][_0x428dd9['symbol']]=_0x428dd9[_0x1db7b2(0x107)],await sleep(0x3c*0x3e8);}catch(_0x22ef0b){if(!exchangeStopped)await handleError(_0x22ef0b,_0x1db7b2(0x13c),_0x31536a);}else await sleep(0x64);}},_0x152d54=async()=>{const _0x2f0978=_0x376bbe;while(!![]){if(!botPaused)try{const _0x5190d7=await exchange['watchOrders']();_0x5190d7[_0x2f0978(0xdc)](_0xa44640=>{updateNumberCoinsCcxt(_0xa44640);});}catch(_0x30df92){if(!exchangeStopped)await handleError(_0x30df92,'watchOrders');}else await sleep(0x64);}};_0x226b31[_0x376bbe(0xdc)](_0x51ac35=>{_0x570ed7(_0x51ac35),_0x19eee6(_0x51ac35);}),!wsEventsSet&&(wsEventsSet=!![],_0x152d54(),watchTransactions());}async function watchTransactions(){const _0x293206=_0x1488c4;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x17a356=await getCoins(),[_0x230ee4,_0x24433c]=_0x17a356;let _0x3de852=[];currentCoins[_0x293206(0xdc)](_0x2925a0=>{const _0x2cec6e=_0x293206,_0xe30e8e=_0x230ee4[_0x2cec6e(0x16f)](_0x51b273=>_0x51b273['coin']==_0x2925a0[_0x2cec6e(0x17b)]);if(_0xe30e8e){if(_0x2925a0[_0x2cec6e(0x119)]!=_0xe30e8e[_0x2cec6e(0x119)]){let _0x1a2855;if(_0x2925a0[_0x2cec6e(0x17b)]!=config['basecoin']){const _0x141ae9=global['ticker'][noslash(_0x2925a0[_0x2cec6e(0x225)])];_0x1a2855=_0x2925a0[_0x2cec6e(0x142)]?0x1/_0x141ae9:_0x141ae9;}else _0x1a2855=0x1;_0x3de852['push']({'coin':_0x2925a0[_0x2cec6e(0x17b)],'symbol':_0x2925a0[_0x2cec6e(0x225)],'price':_0x1a2855,'number':Number(formatResult(_0xe30e8e['number']-_0x2925a0['number'],0x8)),'basecoinvalue':_0x1a2855*(_0xe30e8e[_0x2cec6e(0x119)]-_0x2925a0['number'])});}}});if(_0x3de852['length']==0x1&&!blockTransactionDetection){if(config[_0x293206(0x1af)]){logger[_0x293206(0x17d)](_0x293206(0x1bc)+_0x3de852[0x0][_0x293206(0x1f6)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x293206(0x138)](_0x3de852[0x0][_0x293206(0x1f6)])>lastFees[_0x293206(0x1bf)]){delete _0x3de852[0x0][_0x293206(0x225)],delete _0x3de852[0x0]['basecoinvalue'];let _0x5276a7=[],_0x3dd16c=[...config[_0x293206(0x101)]]||[],_0x38305f=config[_0x293206(0x101)];_0x3dd16c[_0x293206(0x154)]((_0xb56ad1,_0x40868b)=>_0xb56ad1[_0x293206(0xe8)]>_0x40868b[_0x293206(0xe8)]?-0x1:_0x40868b['date']>_0xb56ad1[_0x293206(0xe8)]?0x1:0x0);const _0x40315d=getDate();if(_0x3dd16c[0x0]){const _0x1cee42=fns[_0x293206(0x20b)](_0x3dd16c[0x0]['date'],_0x293206(0x172),new Date()),_0x59195a=fns['parse'](_0x40315d,'yyyy/MM/dd',new Date());if(fns[_0x293206(0x202)](_0x1cee42,_0x59195a)){_0x5276a7=_0x3dd16c[0x0][_0x293206(0x1ee)];const _0x297e0f=_0x5276a7['find'](_0x48ac31=>_0x48ac31['coin']==_0x3de852[0x0][_0x293206(0x17b)]);_0x297e0f?(_0x297e0f[_0x293206(0x119)]+=_0x3de852[0x0]['number'],_0x297e0f['number']==0x0&&(_0x5276a7=_0x5276a7[_0x293206(0x1ec)](_0x455684=>{const _0x16bae1=_0x293206;return _0x455684[_0x16bae1(0x17b)]!=_0x3de852[0x0][_0x16bae1(0x17b)];}))):_0x5276a7[_0x293206(0x1f2)](_0x3de852[0x0]);const _0x4c8985=_0x38305f['find'](_0x530e6d=>_0x530e6d[_0x293206(0xe8)]==_0x40315d);_0x4c8985['changes']=_0x5276a7;}else _0x38305f[_0x293206(0x1f2)]({'date':_0x40315d,'changes':[_0x3de852[0x0]]});}const _0x4ac7b5=_0x38305f[_0x293206(0x16f)](_0x28139b=>_0x28139b[_0x293206(0xe8)]==_0x40315d);if(_0x4ac7b5){let _0x2929f9=!![];_0x4ac7b5['changes']['forEach'](_0x2e29da=>{const _0x54e944=_0x293206;if(_0x2e29da[_0x54e944(0x119)]!=0x0)_0x2929f9=![];}),_0x2929f9&&(_0x38305f=_0x38305f[_0x293206(0x1ec)](_0x206ce4=>{const _0x9dc4d3=_0x293206;return _0x206ce4[_0x9dc4d3(0xe8)]!=_0x40315d;}));}let _0x50bdd1=dbConfig['get'](_0x293206(0x1aa))[_0x293206(0x16f)]({'botID':botID})[_0x293206(0xb4)]();_0x50bdd1&&(dbConfig[_0x293206(0x1a8)](_0x293206(0x1aa))[_0x293206(0x16f)]({'botID':botID})[_0x293206(0x110)]({'liquidity':_0x38305f})[_0x293206(0x144)](),config[_0x293206(0x101)]=_0x38305f),logHistory('success',_0x293206(0x1f8)+Math[_0x293206(0x138)](_0x3de852[0x0]['number'])+'\x20'+_0x3de852[0x0][_0x293206(0x17b)]+'\x20'+(_0x3de852[0x0][_0x293206(0x119)]>0x0?_0x293206(0x1d1):'removed')+_0x293206(0x201)),proxyEmit(_0x293206(0xc3),emittedConfiguration());}else logger[_0x293206(0x17d)](_0x293206(0x11b)+Math[_0x293206(0x138)](_0x3de852[0x0][_0x293206(0x119)])+'\x20'+_0x3de852[0x0][_0x293206(0x17b)]+'\x20'+(_0x3de852[0x0][_0x293206(0x119)]>0x0?_0x293206(0x1d1):'removed'));transactionDetected=!![],currentCoins=_0x230ee4,currentCoinsAll=_0x24433c;}else logger['debug'](_0x293206(0x1f8)+Math['abs'](_0x3de852[0x0]['number'])+'\x20'+_0x3de852[0x0][_0x293206(0x17b)]+'\x20'+(_0x3de852[0x0][_0x293206(0x119)]>0x0?_0x293206(0x1d1):_0x293206(0x187))+_0x293206(0x1be)),currentCoins=_0x230ee4,currentCoinsAll=_0x24433c;}await sleep(watchTransactionsInterval);}catch(_0x3d16eb){if(!exchangeStopped)await handleError(_0x3d16eb,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x3d09d8=config[_0x1488c4(0xbc)],_0x5a94cc=![]){const _0x348752=_0x1488c4;if(allSymbols&&!_0x5a94cc)return;try{markets=await exchange[_0x348752(0x1a6)](),allSymbols=[],Object['entries'](markets)[_0x348752(0xdc)](_0x55bd27=>{const _0x3e1855=_0x348752;_0x55bd27[0x1]['active']&&_0x55bd27[0x1][_0x3e1855(0x195)]&&allSymbols[_0x3e1855(0x1f2)](_0x55bd27[0x0]);});}catch(_0x4049fa){throw _0x4049fa;}}async function initclient(){const _0x751073=_0x1488c4;emitLoadingProgress(),proxyEmit(_0x751073(0xc3),emittedConfiguration()),proxyEmit(_0x751073(0xcd),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2baaec=getNormalizedPerformance();emitPerformance(_0x2baaec),getStartingBalances(_0x2baaec);}async function toggleBotMode(){const _0x753221=_0x1488c4;let _0x20d684=dbConfig['get'](_0x753221(0x1aa))[_0x753221(0x16f)]({'botID':botID})[_0x753221(0xb4)]();if(_0x20d684){const _0x3e3fe0=!_0x20d684['headless'];dbConfig[_0x753221(0x1a8)](_0x753221(0x1aa))['find']({'botID':botID})['assign']({'headless':_0x3e3fe0})[_0x753221(0x144)](),config[_0x753221(0x1d2)]=_0x3e3fe0,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x11b99f=>{});}async function loadCoins(_0x5c33bb){const _0x474116=_0x1488c4;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x511bcf,_0x17cd4e=0x0,_0xaf0adf=0x0;_0x5c33bb['forEach'](_0x404ce2=>{const _0x17b0bd=_0x210b;loading[_0x17b0bd(0x155)][_0x17b0bd(0x1f2)](_0x404ce2);}),loadingCanceled=![];let _0x136573=![];while(_0x511bcf!=_0x5c33bb[_0x474116(0x1cf)]){_0x511bcf=0x0,_0x5c33bb[_0x474116(0xdc)](_0x2ca62b=>{const _0x1e81ed=_0x474116;if(global[_0x1e81ed(0x219)][noslash(_0x2ca62b)]){loading[_0x1e81ed(0x155)]=loading[_0x1e81ed(0x155)][_0x1e81ed(0x1ec)](_0x3a706e=>_0x3a706e!=_0x2ca62b);if(!watchedSymbols[_0x1e81ed(0x13b)](_0x2ca62b))watchedSymbols[_0x1e81ed(0x1f2)](_0x2ca62b);_0x511bcf++;}}),loading[_0x474116(0x1b8)]=Math[_0x474116(0x1a3)](_0x511bcf/_0x5c33bb[_0x474116(0x1cf)]*0x64);loading[_0x474116(0x1b8)]!=0x64&&(_0xaf0adf>0x1e*0x5&&(loading[_0x474116(0xb5)]=!![],emitLoadingProgress()),_0xaf0adf>0x78*0x5&&!_0x136573&&(loading['cancel']=!![],emitLoadingProgress(),_0x136573=!![],logHistory(_0x474116(0x133),_0x474116(0x21b)+loading['remainingSymbols'][_0x474116(0x1fa)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x474116(0x1ab)),pidCoinReloading=setTimeout(()=>{const _0x408efe=_0x474116;process[_0x408efe(0xb7)]({'stop':_0x408efe(0xd4)},_0xb7a733=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x474116(0x1d8)]=!![],emitLoadingProgress();break;}else _0x511bcf!=_0x17cd4e&&(_0x17cd4e=_0x511bcf,emitLoadingProgress()),_0xaf0adf++,await sleep(0xc8);}_0x511bcf==_0x5c33bb[_0x474116(0x1cf)]&&(coinsLoaded=!![],process['send']({'status':_0x474116(0x12d),'live':_0x474116(0x224)},_0x2c728d=>{}),_0x136573&&logHistory(_0x474116(0x1b7),_0x474116(0x16c)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4ee3a7=_0x1488c4;proxyEmit(_0x4ee3a7(0xc3),{...emittedConfiguration(),'configstate':_0x4ee3a7(0x130)});}function emitLoadingProgress(){const _0x264fbd=_0x1488c4;proxyEmit(_0x264fbd(0x137),loading);}async function getFiat(){const _0x2c3b83=_0x1488c4;let _0x276859=global[_0x2c3b83(0x219)][stablecoins[_0x2c3b83(0x1da)][_0x2c3b83(0x17b)]],_0x3b7627=global[_0x2c3b83(0x219)][stablecoins[_0x2c3b83(0x1e6)]['coin']];return{'eur':Number(_0x276859),'usd':Number(_0x3b7627)};}function capitalize(_0x3e13ee){const _0x2f8a50=_0x1488c4;return _0x3e13ee[_0x2f8a50(0x22a)](0x0,0x1)[_0x2f8a50(0xd9)]()+_0x3e13ee[_0x2f8a50(0x22a)](0x1);}function supportedExchanges(){const _0x577d7b=_0x1488c4,_0x2b873c=['ws',_0x577d7b(0x13c),_0x577d7b(0x14a),_0x577d7b(0x14d),_0x577d7b(0x19b),_0x577d7b(0x1e1),'createOrder','fetchOpenOrders',_0x577d7b(0x1c5),_0x577d7b(0x1f7)];let _0x45578e=[],_0x47909f=[],_0x1571ed=ccxt[_0x577d7b(0x139)][_0x577d7b(0xcd)];_0x1571ed['forEach'](_0x2becff=>{const _0x491db9=_0x577d7b;try{const _0x267328=new ccxt[(_0x491db9(0x139))][_0x2becff]();if(_0x267328[_0x491db9(0xf6)]['ws'])_0x47909f[_0x491db9(0x1f2)](_0x267328);}catch(_0x239bdd){}}),_0x47909f[_0x577d7b(0xdc)](_0x42d612=>{const _0x3f92d6=_0x577d7b;let _0x2d7aec=0x0;_0x2b873c[_0x3f92d6(0xdc)](_0x3de521=>{const _0x59c9f5=_0x3f92d6;_0x3de521 in _0x42d612[_0x59c9f5(0xf6)]&&_0x42d612['has'][_0x3de521]&&_0x2d7aec++;}),_0x2d7aec==_0x2b873c['length']&&_0x45578e['push'](capitalize(_0x42d612['id']));});let _0x1c00c4=[];return _0x1571ed['forEach'](_0x77dcb9=>{_0x77dcb9=capitalize(_0x77dcb9);if(!_0x45578e['includes'](_0x77dcb9))_0x1c00c4['push'](_0x77dcb9);}),_0x45578e;}function setStartDatePerformance(){const _0x45b14d=_0x1488c4;if(config&&config[_0x45b14d(0x101)][0x0][_0x45b14d(0x1ee)]['length']!=0x0){const _0x23f234=config[_0x45b14d(0x101)][0x0][_0x45b14d(0x1ee)];dbPerformance['get'](_0x45b14d(0x1c6))[_0x45b14d(0x16f)]({'date':config['startdate']})[_0x45b14d(0x110)]({'coins':_0x23f234})['write']();}}async function recreateCoinResults(){const _0x27799e=_0x1488c4;let _0x2853ca,_0x226d51=[];try{const _0xd26acc=fns[_0x27799e(0xe9)](fns[_0x27799e(0x218)](config[_0x27799e(0x1d0)][_0x27799e(0x231)](/\//g,'-')),_0x27799e(0xee));for(const _0x23f01f of currentCoins){if(_0x23f01f[_0x27799e(0x17b)]!=config[_0x27799e(0x1ae)]){let _0x596e1a=0x0,_0xd75ff7,_0xcdd100;_0x2853ca=await getAllEventOrders(_0x23f01f[_0x27799e(0x225)]);if(_0x2853ca[_0x27799e(0x1cf)]>0x0)_0x2853ca[_0x27799e(0xdc)](_0x147bec=>{const _0x3eb466=_0x27799e,_0x40fa5c=_0x23f01f['symbol']['includes'](config[_0x3eb466(0x1ae)]+'/');_0x226d51['push']({'datetime':_0x147bec[_0x3eb466(0x223)],'coin':_0x23f01f[_0x3eb466(0x17b)],'symbol':_0x23f01f[_0x3eb466(0x225)],'side':_0x147bec[_0x3eb466(0x126)],'reverse':_0x40fa5c,'amount':formatResult(_0x147bec[_0x3eb466(0x158)],0x8),'filled':formatResult(_0x147bec[_0x3eb466(0x158)],0x8),'price':formatResult(_0x147bec[_0x3eb466(0xd0)],0x8)}),_0x596e1a=_0x147bec[_0x3eb466(0x126)]=='buy'?_0x596e1a+_0x147bec[_0x3eb466(0x158)]:_0x596e1a-_0x147bec[_0x3eb466(0x158)];if(!_0xcdd100)_0xcdd100=_0x147bec[_0x3eb466(0xd0)];});_0xd75ff7=_0x23f01f[_0x27799e(0x119)]-_0x596e1a;let _0x6003ba;config['liquidity'][_0x27799e(0xdc)](_0x117f67=>{const _0x23ae10=_0x27799e;!_0x6003ba&&(_0x6003ba=_0x117f67[_0x23ae10(0x1ee)][_0x23ae10(0x16f)](_0x2e6a30=>_0x2e6a30[_0x23ae10(0x17b)]==_0x23f01f[_0x23ae10(0x17b)]),_0x6003ba&&(_0xd75ff7=_0x6003ba[_0x23ae10(0x119)],_0xcdd100=_0x6003ba['price']));});let _0x53450e=dbCoinResults[_0x27799e(0x1a8)](_0x27799e(0x1fd))[_0x27799e(0x16f)]({'coin':_0x23f01f['coin']})[_0x27799e(0xb4)]();_0x53450e={'coin':_0x23f01f[_0x27799e(0x17b)],'number':_0xd75ff7,'breakeven':_0xcdd100,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x27799e(0x1a8)](_0x27799e(0x1fd))[_0x27799e(0x16f)]({'coin':_0x23f01f[_0x27799e(0x17b)]})[_0x27799e(0x110)](_0x53450e)[_0x27799e(0x144)]();}}_0x226d51[_0x27799e(0x154)]((_0x976d4d,_0x175428)=>_0x976d4d[_0x27799e(0x223)]>_0x175428[_0x27799e(0x223)]?0x1:_0x175428['datetime']>_0x976d4d[_0x27799e(0x223)]?-0x1:0x0);let _0x495b4a=0x0;for(let _0x10d69b of _0x226d51){await updateCoinResults(_0x10d69b,!![]);}}catch(_0x3ceca7){await handleError(_0x3ceca7,_0x27799e(0x1cd));}}async function getAllEventOrders(_0x887c75){const _0x4cb312=_0x1488c4;let _0x3a34c4=[],_0x4c0dd8=dbLogs['get'](_0x4cb312(0x1e5))['filter'](_0x395670=>{const _0x1e8093=_0x4cb312,_0x3ba13c=_0x395670[_0x1e8093(0x1a2)]['toLowerCase']();return _0x3ba13c[_0x1e8093(0x13b)](_0x887c75[_0x1e8093(0x14b)]())&&(_0x3ba13c['includes'](_0x1e8093(0x203))&&_0x3ba13c['includes'](_0x1e8093(0x1f4))||_0x3ba13c[_0x1e8093(0x13b)]('filled')&&_0x3ba13c['includes']('order'));})[_0x4cb312(0x116)](_0x4cb312(0x166))[_0x4cb312(0xb4)]();return _0x4c0dd8[_0x4cb312(0xdc)](_0x54f17d=>{const _0x49a1c5=_0x4cb312,_0x4ef921=_0x54f17d['event'][_0x49a1c5(0x13b)](_0x49a1c5(0xef))?_0x49a1c5(0xef):_0x49a1c5(0x177),_0x3b9050=/#([0-9]|\.)+\s/i,_0x5c414a=Number(_0x3b9050[_0x49a1c5(0x18e)](_0x54f17d[_0x49a1c5(0x1a2)])[0x0][_0x49a1c5(0x149)](0x1)),_0x4369cc=/@([0-9]|\.)+$/i,_0x15bb23=Number(_0x4369cc[_0x49a1c5(0x18e)](_0x54f17d[_0x49a1c5(0x1a2)])[0x0][_0x49a1c5(0x149)](0x1));_0x3a34c4[_0x49a1c5(0x1f2)]({'datetime':_0x54f17d[_0x49a1c5(0x166)],'coin':symbolToCoin(_0x887c75),'symbol':_0x887c75,'side':_0x4ef921,'amount':_0x5c414a,'filled':_0x5c414a,'price':_0x15bb23});}),_0x3a34c4;}async function getAllOrders(_0x559bdb,_0x446456){const _0x56817f=_0x1488c4;let _0x3fa730=[];while(_0x446456<exchange['milliseconds']()){const _0x420cb6=0x1f4,_0x183583=await exchange[_0x56817f(0x1c5)](_0x559bdb,_0x446456,_0x420cb6);if(_0x183583[_0x56817f(0x1cf)])_0x446456=_0x183583[_0x183583['length']-0x1]['timestamp']+0x1,_0x3fa730=_0x3fa730[_0x56817f(0x1f3)](_0x183583);else break;}return _0x3fa730;}async function validate24hChanges(){const _0x26193a=_0x1488c4;for(const _0x1edc6f of currentCoins){if(_0x1edc6f[_0x26193a(0x17b)]!=config['basecoin']){let _0x47f150;_0x1edc6f['reverse']?_0x47f150=formatResult((0x1/(global[_0x26193a(0xc5)][noslash(_0x1edc6f[_0x26193a(0x225)])]/0x64+0x1)-0x1)*0x64,0x3):_0x47f150=global[_0x26193a(0xc5)][noslash(_0x1edc6f[_0x26193a(0x225)])],_0x47f150<config[_0x26193a(0x20e)]&&(logHistory('error',_0x1edc6f[_0x26193a(0x17b)]+_0x26193a(0x111)+_0x47f150+'%'),logHistory(_0x26193a(0x133),_0x26193a(0x1e4)),logHistory(_0x26193a(0x133),_0x26193a(0x19a)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x74ffc3,_0x54df63){const _0x12c0c3=_0x1488c4;if(!_0x74ffc3)return!![];const _0x520d14=_0x54df63[_0x12c0c3(0x226)]('.'),_0x1bf959=_0x74ffc3[_0x12c0c3(0x226)]('.');for(var _0x18ee0a=0x0;_0x18ee0a<_0x1bf959[_0x12c0c3(0x1cf)];_0x18ee0a++){const _0x1838d7=~~_0x1bf959[_0x18ee0a],_0x544187=~~_0x520d14[_0x18ee0a];if(_0x1838d7<_0x544187)return!![];if(_0x1838d7>_0x544187)return![];}return![];}async function oneTimeMigration(){const _0x3c7340=_0x1488c4;let _0x26606e=dbLogs[_0x3c7340(0x1a8)](_0x3c7340(0x15d))[_0x3c7340(0xb4)]();if(isOlderVersion(_0x26606e,'2.3.5')){let _0x3f6f11=[];const _0x67c7b=dbLogs[_0x3c7340(0x1a8)](_0x3c7340(0x1e5))[_0x3c7340(0xb4)]();_0x67c7b[_0x3c7340(0xdc)](_0x41951c=>{const _0x938436=_0x3c7340;_0x3f6f11['push']({'time':_0x41951c[_0x938436(0x166)],'type':_0x41951c['type'],'event':_0x41951c[_0x938436(0x1a2)]});}),dbLogs['get']('logs')[_0x3c7340(0x110)](_0x3f6f11)['write']();}let _0x4fca55=dbConfig['get'](_0x3c7340(0x15d))[_0x3c7340(0xb4)]();if(isOlderVersion(_0x4fca55,'2.3.5')){let _0x2012ff=dbConfig['get'](_0x3c7340(0x1aa))[_0x3c7340(0x16f)]({'botID':botID})['value']();if(_0x2012ff){let _0x123122=[];_0x2012ff[_0x3c7340(0xcb)]['forEach'](_0x56d127=>{const _0x1bd3e9=_0x3c7340;_0x123122[_0x1bd3e9(0x1f2)]({'coin':_0x56d127[_0x1bd3e9(0x17b)],'number':_0x56d127[_0x1bd3e9(0x16a)],'price':_0x56d127[_0x1bd3e9(0x1d5)]}),delete _0x56d127[_0x1bd3e9(0x16a)],delete _0x56d127[_0x1bd3e9(0x1d5)];});if(_0x123122[_0x3c7340(0x1cf)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x3c7340(0x216)),JSON[_0x3c7340(0x22b)](_0x123122,null,0x4),function(_0x7daf37){if(_0x7daf37){}});const _0x2a01f6=(_0x317919,_0xfa677c)=>{const _0x548576=_0x3c7340;let _0x3e19a7=[];_0xfa677c[_0x548576(0xdc)](_0x18e469=>{const _0x29266a=_0x548576,_0x1f75fe=_0x317919[_0x29266a(0x16f)](_0x13fbe5=>_0x13fbe5['coin']==_0x18e469[_0x29266a(0x17b)]);if(!_0x1f75fe)_0x3e19a7[_0x29266a(0x1f2)](_0x18e469);});let _0x37c8bc=[];return _0x317919['forEach'](_0x4607b2=>{const _0x3c7a3d=_0x548576,_0x38c227=_0xfa677c['find'](_0x5e96e9=>_0x5e96e9[_0x3c7a3d(0x17b)]==_0x4607b2[_0x3c7a3d(0x17b)]);if(!_0x38c227||_0x38c227[_0x3c7a3d(0x119)]==0x0&&_0x4607b2[_0x3c7a3d(0x119)]!=0x0)_0x37c8bc['push'](_0x4607b2);}),{'missingDay1':_0x3e19a7,'notInDay2':_0x37c8bc};},_0x43e44c=dbPerformance[_0x3c7340(0x1a8)](_0x3c7340(0x1c6))[_0x3c7340(0x105)]()[_0x3c7340(0xb4)]();if(_0x43e44c['length']>0x1){const {missingDay1:_0x1eeccf,notInDay2:_0xd6abe3}=_0x2a01f6(_0x123122,_0x43e44c[0x1]['coins']);_0x123122=[..._0x123122,..._0x1eeccf],_0xd6abe3['forEach'](_0x4daa1a=>{const _0x1ab472=_0x3c7340;let _0x3d00ef=_0x123122[_0x1ab472(0x113)](_0x440b1c=>_0x440b1c['coin']==_0x4daa1a[_0x1ab472(0x17b)]);_0x3d00ef!=-0x1&&_0x123122[_0x1ab472(0x18d)](_0x3d00ef,0x1);});}_0x123122[_0x3c7340(0x154)]((_0x1747b9,_0x323f59)=>_0x1747b9[_0x3c7340(0x17b)]>_0x323f59['coin']?0x1:_0x323f59[_0x3c7340(0x17b)]>_0x1747b9['coin']?-0x1:0x0);let _0x101391=[{'date':_0x2012ff[_0x3c7340(0x1d0)],'changes':_0x123122}];_0x43e44c['length']>0x2&&_0x43e44c[_0x3c7340(0xdc)]((_0x2901a1,_0x1efe1c)=>{const _0x8b0540=_0x3c7340;if(_0x1efe1c>0x0&&_0x1efe1c<_0x43e44c['length']-0x1){const {missingDay1:_0x9566ed,notInDay2:_0x3181a1}=_0x2a01f6(_0x43e44c[_0x1efe1c][_0x8b0540(0x1fd)],_0x43e44c[_0x1efe1c+0x1][_0x8b0540(0x1fd)]);_0x123122=[],(_0x9566ed[_0x8b0540(0x1cf)]!=0x0||_0x3181a1[_0x8b0540(0x1cf)]!=0x0)&&(_0x9566ed[_0x8b0540(0x1cf)]!=0x0&&_0x123122[_0x8b0540(0x1f2)](..._0x9566ed),_0x3181a1[_0x8b0540(0x1cf)]!=0x0&&(_0x3181a1[_0x8b0540(0xdc)](_0x143f7a=>{const _0x52b0e=_0x8b0540;_0x143f7a[_0x52b0e(0x119)]=-_0x143f7a[_0x52b0e(0x119)];}),_0x123122[_0x8b0540(0x1f2)](..._0x3181a1)),_0x123122[_0x8b0540(0x154)]((_0x138ed2,_0x1a0474)=>_0x138ed2[_0x8b0540(0x17b)]>_0x1a0474[_0x8b0540(0x17b)]?0x1:_0x1a0474[_0x8b0540(0x17b)]>_0x138ed2[_0x8b0540(0x17b)]?-0x1:0x0),_0x101391[_0x8b0540(0x1f2)]({'date':_0x43e44c[_0x1efe1c+0x1][_0x8b0540(0xe8)],'changes':_0x123122}));}}),dbConfig[_0x3c7340(0x1a8)]('bot')[_0x3c7340(0x16f)]({'botID':botID})[_0x3c7340(0x110)]({..._0x2012ff,'liquidity':_0x101391})['write']();}}if(isOlderVersion(_0x4fca55,_0x3c7340(0xc7))){let _0x29271e=dbConfig['get']('bot')[_0x3c7340(0x16f)]({'botID':botID})[_0x3c7340(0xb4)]();if(_0x29271e){const _0x3620b2=_0x29271e[_0x3c7340(0xbc)],_0x34141a=_0x3620b2?capitalize(_0x3620b2):_0x3c7340(0x22e);dbConfig[_0x3c7340(0x1a8)](_0x3c7340(0x1aa))[_0x3c7340(0x16f)]({'botID':botID})[_0x3c7340(0x110)]({'exchange':_0x34141a})[_0x3c7340(0x144)]();}}let _0x48749a=dbPerformance[_0x3c7340(0x1a8)]('version')[_0x3c7340(0xb4)]();isOlderVersion(_0x48749a,_0x3c7340(0x10a))&&setStartDatePerformance();let _0xa9de86=dbCoinResults[_0x3c7340(0x1a8)](_0x3c7340(0x15d))[_0x3c7340(0xb4)]();if(isOlderVersion(_0xa9de86,_0x3c7340(0x17f))){let _0x3e6c0e=dbCoinResults['get'](_0x3c7340(0x1fd))[_0x3c7340(0xb4)]();if(_0x3e6c0e['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x13493c=_0x1488c4;dbConfig[_0x13493c(0x237)](_0x13493c(0x15d),serverversion)['write'](),dbPerformance[_0x13493c(0x237)]('version',serverversion)[_0x13493c(0x144)](),dbLogs[_0x13493c(0x237)]('version',serverversion)[_0x13493c(0x144)](),dbCoinResults[_0x13493c(0x237)](_0x13493c(0x15d),serverversion)['write']();}function getConfiguration(_0x2fad93){const _0xb132a4=_0x1488c4;let _0x3e9909=dbConfig['get'](_0xb132a4(0x1aa))[_0xb132a4(0x16f)]({'botID':_0x2fad93})['value']();if(_0x3e9909){let _0x20a2d7=![];typeof _0x3e9909[_0xb132a4(0xe0)]=='string'&&(_0x3e9909={..._0x3e9909,'threshold':Number(_0x3e9909['threshold'])},_0x20a2d7=!![]),_0x3e9909[_0xb132a4(0x20e)]==null&&(_0x3e9909={..._0x3e9909,'change24h':-0x14},_0x20a2d7=!![]),!_0x3e9909[_0xb132a4(0x15f)]&&(_0x3e9909={..._0x3e9909,'fiat':_0xb132a4(0x21d)},_0x20a2d7=!![]),!_0x3e9909[_0xb132a4(0x20c)]&&(_0x3e9909={..._0x3e9909,'onepagemode':settings[_0xb132a4(0x20c)]},_0x20a2d7=!![]),!_0x3e9909['colorscheme']&&(_0x3e9909={..._0x3e9909,'colorscheme':_0xb132a4(0x209)},_0x20a2d7=!![]),!_0x3e9909['autoliquidity']&&(_0x3e9909={..._0x3e9909,'autoliquidity':!![]},_0x20a2d7=!![]),_0x20a2d7&&(_0x3e9909={'botID':_0x3e9909[_0xb132a4(0x175)],'exchange':_0x3e9909[_0xb132a4(0xbc)],'apiKey':_0x3e9909[_0xb132a4(0x124)],'apiSecret':_0x3e9909[_0xb132a4(0x1a5)],'apiPassword':_0x3e9909['apiPassword'],'basecoin':_0x3e9909[_0xb132a4(0x1ae)],'botname':_0x3e9909[_0xb132a4(0xf8)],'showname':_0x3e9909[_0xb132a4(0x156)],'threshold':_0x3e9909['threshold'],'ordertype':_0x3e9909['ordertype'],'timeout':_0x3e9909[_0xb132a4(0xb5)],'fiat':_0x3e9909[_0xb132a4(0x15f)],'startdate':_0x3e9909[_0xb132a4(0x1d0)],'recreate':_0x3e9909['recreate'],'timeshift':_0x3e9909[_0xb132a4(0xff)],'onepagemode':_0x3e9909[_0xb132a4(0x20c)],'headless':_0x3e9909[_0xb132a4(0x1d2)],'cooldown':_0x3e9909['cooldown'],'change24h':_0x3e9909['change24h'],'emojibuy':_0x3e9909[_0xb132a4(0x12c)],'emojisell':_0x3e9909['emojisell'],'colorscheme':_0x3e9909[_0xb132a4(0x1d7)],'portfolio':_0x3e9909['portfolio'],'autoliquidity':_0x3e9909[_0xb132a4(0x1af)],'liquidity':_0x3e9909[_0xb132a4(0x101)],'openOrders':_0x3e9909['openOrders']},dbConfig['get'](_0xb132a4(0x1aa))['remove']()['write'](),dbConfig['get'](_0xb132a4(0x1aa))['push'](_0x3e9909)['write']());}else _0x3e9909={'botID':_0x2fad93,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xb132a4(0x1c0)+_0x2fad93,'showname':![],'threshold':0x3,'ordertype':_0xb132a4(0x203),'timeout':0x14,'fiat':_0xb132a4(0x21d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xb132a4(0xff)],'onepagemode':settings[_0xb132a4(0x20c)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xb132a4(0x209),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3e9909;}function emittedConfiguration(){const _0x2e2af4=_0x1488c4;let _0x493b66;if(config['apiKey']=='')_0x493b66={...config,'configstate':'initial'};else config[_0x2e2af4(0x124)]==_0x2e2af4(0x121)?_0x493b66={...config,'configstate':'recovery'}:(_0x493b66={...config,'apiKey':_0x2e2af4(0xc6),'apiSecret':_0x2e2af4(0xc6)},config[_0x2e2af4(0xd3)]&&(_0x493b66[_0x2e2af4(0xd3)]=_0x2e2af4(0xc6)));return _0x493b66;}function getSettings(){const _0x361c96=_0x1488c4;return dbSettings['get'](_0x361c96(0x170))['value']();}function getSecure(){const _0x2bdc64=_0x1488c4;return dbSecure['get'](_0x2bdc64(0x122))[_0x2bdc64(0xb4)]()||{};}function updateTimeshift(_0x8a4b8a){const _0x3f513c=_0x1488c4;let _0x4f8b7a=dbConfig[_0x3f513c(0x1a8)](_0x3f513c(0x1aa))[_0x3f513c(0x16f)]({'botID':botID})[_0x3f513c(0xb4)]();_0x4f8b7a&&dbConfig[_0x3f513c(0x1a8)](_0x3f513c(0x1aa))[_0x3f513c(0x16f)]({'botID':botID})[_0x3f513c(0x110)]({'timeshift':_0x8a4b8a})['write'](),config[_0x3f513c(0xff)]=_0x8a4b8a,proxyEmit(_0x3f513c(0xc3),emittedConfiguration());}function updateOnepagemode(_0x4167fc){const _0x2e152a=_0x1488c4;let _0x2f011f=dbConfig[_0x2e152a(0x1a8)](_0x2e152a(0x1aa))[_0x2e152a(0x16f)]({'botID':botID})['value']();_0x2f011f&&dbConfig[_0x2e152a(0x1a8)](_0x2e152a(0x1aa))[_0x2e152a(0x16f)]({'botID':botID})['assign']({'onepagemode':_0x4167fc})[_0x2e152a(0x144)](),config[_0x2e152a(0x20c)]=_0x4167fc,proxyEmit(_0x2e152a(0xc3),emittedConfiguration());}async function storeConfiguration(_0xb45845){const _0x40a3a3=_0x1488c4;logger['debug'](_0x40a3a3(0x117));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x40a3a3(0x17d)](_0x40a3a3(0x207));let _0xcca853=[],_0x2f8fe3=![],_0xb0de5b=![],_0x536c61=[];_0xb45845[_0x40a3a3(0xcb)][_0x40a3a3(0xdc)](_0x15294a=>{const _0x256f03=_0x40a3a3;if(!_0x15294a[_0x256f03(0x220)]&&_0x15294a['coin']!=_0xb45845[_0x256f03(0x1ae)])_0x536c61[_0x256f03(0x1f2)](_0x15294a[_0x256f03(0x225)]);}),_0x536c61[_0x40a3a3(0xdc)](_0x35373d=>{const _0x4126c5=_0x40a3a3,_0x4720e4=watchedSymbols[_0x4126c5(0x13b)](_0x35373d);!_0x4720e4&&_0xcca853[_0x4126c5(0x1f2)](_0x35373d);}),_0x536c61['forEach'](_0x506ca6=>{const _0x22d340=_0x40a3a3,_0x10e536=currentCoins[_0x22d340(0x16f)](_0x1e6e53=>_0x1e6e53[_0x22d340(0x225)]==_0x506ca6);!_0x10e536&&(_0x2f8fe3=!![]);}),currentCoins['forEach'](_0x29270e=>{const _0x508b8c=_0x40a3a3;if(_0x29270e[_0x508b8c(0x17b)]!=config[_0x508b8c(0x1ae)]){const _0x381175=_0x536c61[_0x508b8c(0x16f)](_0x19cd87=>_0x19cd87==_0x29270e[_0x508b8c(0x225)]);!_0x381175&&(_0x2f8fe3=!![]);}}),_0xb45845[_0x40a3a3(0xcb)][_0x40a3a3(0xdc)](_0x5aeea9=>{const _0x4544ed=_0x40a3a3,_0x2b59ca=config[_0x4544ed(0xcb)][_0x4544ed(0x16f)](_0xaf623=>_0xaf623[_0x4544ed(0x17b)]==_0x5aeea9[_0x4544ed(0x17b)]);if(_0x2b59ca&&_0x5aeea9[_0x4544ed(0xf9)]!=_0x2b59ca['offset'])_0xb0de5b=!![];});let _0x108c71=dbConfig['get'](_0x40a3a3(0x1aa))['find']({'botID':botID})[_0x40a3a3(0xb4)]();_0xb45845={..._0xb45845,'apiKey':crypt[_0x40a3a3(0x1db)](secure[_0x40a3a3(0xde)],_0xb45845[_0x40a3a3(0x124)])[_0x40a3a3(0x238)],'apiSecret':crypt[_0x40a3a3(0x1db)](secure[_0x40a3a3(0xde)],_0xb45845[_0x40a3a3(0x1a5)])[_0x40a3a3(0x238)]};_0xb45845['apiPassword']&&(_0xb45845[_0x40a3a3(0xd3)]=crypt[_0x40a3a3(0x1db)](secure['privateKey'],_0xb45845['apiPassword'])[_0x40a3a3(0x238)]);let _0x258cf4=![];if(_0x108c71){_0xb45845['apiKey']=='************'?_0xb45845[_0x40a3a3(0x124)]=config[_0x40a3a3(0x124)]:_0x258cf4=!![];_0xb45845['apiSecret']==_0x40a3a3(0xc6)?_0xb45845[_0x40a3a3(0x1a5)]=config[_0x40a3a3(0x1a5)]:_0x258cf4=!![];if(_0xb45845[_0x40a3a3(0xd3)]=='************')_0xb45845[_0x40a3a3(0xd3)]=config[_0x40a3a3(0xd3)];else{if(_0xb45845[_0x40a3a3(0xd3)])_0x258cf4=!![];}dbConfig[_0x40a3a3(0x1a8)](_0x40a3a3(0x1aa))[_0x40a3a3(0x16f)]({'botID':botID})[_0x40a3a3(0x110)](_0xb45845)['write']();}else dbConfig[_0x40a3a3(0x1a8)](_0x40a3a3(0x1aa))['push'](_0xb45845)['write'](),_0x258cf4=!![],process[_0x40a3a3(0xb7)]({'status':_0x40a3a3(0x12d),'live':_0x40a3a3(0x224)},_0x2497cb=>{});process['send']({'botname':_0xb45845[_0x40a3a3(0xf8)]},_0x2dba9a=>{}),updateBotManager(),config={..._0xb45845},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x258cf4)await reset(_0xcca853,!![]);else _0x2f8fe3||_0xb0de5b?await reset(_0xcca853,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x2a8e09){const _0x39f74e=_0x1488c4,_0x47dfca={...config,'headless':_0x2a8e09[_0x39f74e(0x1d2)]};let _0x591947=dbConfig['get']('bot')[_0x39f74e(0x16f)]({'botID':botID})[_0x39f74e(0xb4)]();_0x591947&&dbConfig['get']('bot')['find']({'botID':botID})['assign'](_0x47dfca)[_0x39f74e(0x144)](),config={..._0x47dfca},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x17b7c3){const _0x4c8371=_0x1488c4,_0x10d031={...config,'fiat':_0x17b7c3};let _0x56ce1c=dbConfig[_0x4c8371(0x1a8)]('bot')[_0x4c8371(0x16f)]({'botID':botID})[_0x4c8371(0xb4)]();_0x56ce1c&&dbConfig[_0x4c8371(0x1a8)](_0x4c8371(0x1aa))[_0x4c8371(0x16f)]({'botID':botID})[_0x4c8371(0x110)](_0x10d031)['write'](),config={..._0x10d031},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x246687=_0x1488c4;logger[_0x246687(0x123)]('Resetting\x20bot\x20history');try{if(fs[_0x246687(0xd6)](path[_0x246687(0x1fa)](configpath,'bot-'+botID+_0x246687(0x19c))))fs[_0x246687(0x18b)](path[_0x246687(0x1fa)](configpath,_0x246687(0x189)+botID+_0x246687(0x19c)));if(fs['existsSync'](path[_0x246687(0x1fa)](configpath,'bot-'+botID+_0x246687(0x21c))))fs[_0x246687(0x18b)](path[_0x246687(0x1fa)](configpath,_0x246687(0x189)+botID+_0x246687(0x21c)));if(fs[_0x246687(0xd6)](path[_0x246687(0x1fa)](configpath,_0x246687(0x189)+botID+_0x246687(0x1e3))))fs[_0x246687(0x18b)](path[_0x246687(0x1fa)](configpath,_0x246687(0x189)+botID+_0x246687(0x1e3)));}catch(_0x3db1a4){if(_0x3db1a4)logger[_0x246687(0x123)](_0x246687(0x102),_0x3db1a4);}const _0x3d6062=getDate();let _0x1cfa69=[];currentCoins[_0x246687(0xdc)](_0x543af3=>{const _0x3f18ad=_0x246687;_0x1cfa69[_0x3f18ad(0x1f2)]({'coin':_0x543af3[_0x3f18ad(0x17b)],'number':_0x543af3[_0x3f18ad(0x119)],'price':_0x543af3[_0x3f18ad(0x179)]});});let _0x550752=dbConfig[_0x246687(0x1a8)]('bot')['find']({'botID':botID})[_0x246687(0xb4)]();_0x550752&&(dbConfig['get']('bot')[_0x246687(0x16f)]({'botID':botID})[_0x246687(0x110)]({'liquidity':[{'date':_0x3d6062,'changes':_0x1cfa69}]})[_0x246687(0x144)](),config[_0x246687(0x101)]=[]),process[_0x246687(0xb7)]({'stop':'restart'},_0x421688=>{});}function noslash(_0x2e3a97){const _0x4b7c41=_0x1488c4;return _0x2e3a97[_0x4b7c41(0x231)]('/','');}function updateHighestFee(_0xcf18ac){const _0x9c29e6=_0x1488c4;if(_0xcf18ac['reverse']){let _0x373449={'filled':_0xcf18ac[_0x9c29e6(0x158)]*_0xcf18ac[_0x9c29e6(0xd0)],'amount':_0xcf18ac['filled']*_0xcf18ac[_0x9c29e6(0xd0)],'side':_0xcf18ac[_0x9c29e6(0x126)]==_0x9c29e6(0xef)?_0x9c29e6(0x177):_0x9c29e6(0xef),'price':0x1/_0xcf18ac[_0x9c29e6(0xd0)]};_0xcf18ac={..._0xcf18ac,..._0x373449};}const _0x4cb0f2=defaultFee*_0xcf18ac['filled']*_0xcf18ac[_0x9c29e6(0xd0)];lastFees[_0x9c29e6(0x217)][_0x9c29e6(0x1cf)]===0x14&&lastFees['recent20'][_0x9c29e6(0x157)](),lastFees[_0x9c29e6(0x217)]['push'](_0x4cb0f2),lastFees[_0x9c29e6(0x1bf)]=Math[_0x9c29e6(0x21e)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0xef3396){const _0x54cb02=_0x1488c4;logger[_0x54cb02(0x17d)](_0x54cb02(0x14e)+_0xef3396[_0x54cb02(0x225)]+_0x54cb02(0x20a)+_0xef3396[_0x54cb02(0x1cc)]+'\x20|\x20'+_0xef3396['id']);let _0x44f3ea=_0xef3396[_0x54cb02(0x1cc)],_0x374b14=![];currentCoins[_0x54cb02(0xdc)](_0x48afb2=>{const _0x459878=_0x54cb02;_0x48afb2[_0x459878(0x225)]==_0xef3396[_0x459878(0x225)]&&(_0x374b14=!![]);});if(!_0x374b14)return;const _0x2d8dd6=currentCoins[_0x54cb02(0x16f)](_0xc84e1b=>_0xc84e1b[_0x54cb02(0x225)]==_0xef3396[_0x54cb02(0x225)]),_0x27bfdc=_0x273e90=>{if(_0x2d8dd6)_0x2d8dd6['orderstatus']=_0x273e90;};if(_0x44f3ea=='open')_0x27bfdc(_0x54cb02(0x13f));else{if(_0x44f3ea=='canceled'){_0x27bfdc('canceled');const _0x1faaf5=await getCoins();[currentCoins,currentCoinsAll]=_0x1faaf5,await getOpenOrders(),handleOpenOrders();}else{if(_0x44f3ea==_0x54cb02(0x118)){logger[_0x54cb02(0x17d)](_0x54cb02(0x1fb)+_0xef3396[_0x54cb02(0x225)]+_0x54cb02(0x20a)+_0xef3396['filled']+_0x54cb02(0x20a)+_0xef3396['id']);let _0x12564c=![];if(lastOrders)for(const _0x5d5c61 of lastOrders){const _0x331120=0xc8,_0x221b03=0x1388;let _0x357957=0x0;while(!_0x5d5c61[_0x54cb02(0xda)]&&_0x357957*_0x331120<_0x221b03){_0x357957++,await sleep(_0x331120);}if(_0x357957>0x0)logger['debug'](_0x54cb02(0xea)+_0x357957*_0x331120/0x3e8+_0x54cb02(0x1b4));if(_0x5d5c61['orderId']==_0xef3396['id']){logger[_0x54cb02(0x17d)](_0x54cb02(0x1ea)+_0xef3396['id']),_0x12564c=!![];if(_0x5d5c61[_0x54cb02(0x158)]==0x0){logger[_0x54cb02(0x17d)](_0x54cb02(0x229)+_0xef3396['id']);if(_0xef3396['average'])_0x5d5c61[_0x54cb02(0xd0)]=_0xef3396[_0x54cb02(0x178)];else{if(_0xef3396[_0x54cb02(0xd0)])_0x5d5c61[_0x54cb02(0xd0)]=_0xef3396[_0x54cb02(0xd0)];else{}}_0x5d5c61[_0x54cb02(0x158)]=_0xef3396[_0x54cb02(0x158)],updateHighestFee(_0x5d5c61),_0x27bfdc(_0x54cb02(0x158)),await validateOrders();if(lockOrders==ORDERS[_0x54cb02(0xfd)]){const _0x49756e=await getCoins();[currentCoins,currentCoinsAll]=_0x49756e;}_0x5d5c61[_0x54cb02(0x1b9)]={'currency':_0xef3396[_0x54cb02(0x1b9)]?_0xef3396[_0x54cb02(0x1b9)]['currency']:null,'cost':_0xef3396['fee']?_0xef3396[_0x54cb02(0x1b9)][_0x54cb02(0x112)]:0x0},await updateCoinResults(_0x5d5c61);}}}if(!_0x12564c){logger['debug'](_0x54cb02(0x1b2)+_0xef3396['id']),_0x27bfdc('filled');const _0x51ba98=await getCoins();[currentCoins,currentCoinsAll]=_0x51ba98,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x567bf0=JSON[_0x54cb02(0x20b)](lastBalances['portfolio']);const _0x2a42cb=_0x567bf0[_0x54cb02(0x16f)](_0x1ab99a=>_0x1ab99a[_0x54cb02(0x225)]==_0xef3396[_0x54cb02(0x225)]);if(_0x2a42cb){if(_0x44f3ea=='open')_0x2a42cb[_0x54cb02(0x18f)]=_0x2a42cb[_0x54cb02(0x18f)]=='filled'?_0x54cb02(0x158):'open';else{if(_0x44f3ea=='canceled')_0x2a42cb['orderstatus']=_0x2a42cb['orderstatus']=='filled'?'filled':'canceled';else _0x44f3ea=='closed'&&(_0x2a42cb['orderstatus']=_0x54cb02(0x158));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x567bf0)},proxyEmit(_0x54cb02(0x1c4),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x28def5=_0x1488c4;await getOpenOrders();let _0x454f60=![];currentCoins[_0x28def5(0xdc)](_0x277878=>{const _0x4253bf=_0x28def5;_0x454f60=allOpenOrders[_0x4253bf(0x16f)](_0x2e3252=>_0x2e3252['symbol']==_0x277878['symbol']),_0x277878[_0x4253bf(0x18f)]=_0x454f60?_0x4253bf(0x13f):_0x4253bf(0x213);});}async function getCoins(_0x212327=!![],_0x1fa70c=config[_0x1488c4(0x1ae)]){const _0x24666c=_0x1488c4;let _0x3fd021,_0x5a83af=[],_0x3dd5a8=[],_0x55df3e=[],_0x2d00b9=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3fd021=await exchange[_0x24666c(0x1f7)](),mybalances=_0x3fd021[_0x24666c(0xcc)];for(const [_0x7d92f8,_0x5e4685]of Object[_0x24666c(0x211)](mybalances)){_0x2d00b9[_0x24666c(0x1f2)](_0x7d92f8);}if(_0x1fa70c=='')for(const [_0xb7597c,_0x3775f9]of Object[_0x24666c(0x211)](mybalances)){_0x3775f9!=0x0&&_0x3dd5a8[_0x24666c(0x1f2)]({'coin':_0xb7597c});}else{let _0x26b2bd=![];for(const [_0x4e4ef8,_0x35f367]of Object[_0x24666c(0x211)](mybalances)){if(_0x2d00b9[_0x24666c(0x13b)](_0x4e4ef8)){const _0x310670=config['portfolio']['find'](_0x480df9=>_0x480df9[_0x24666c(0x17b)]==_0x4e4ef8),_0x299471=_0x4e4ef8+'/'+_0x1fa70c,_0x21a479=_0x1fa70c+'/'+_0x4e4ef8,_0x10965f=currentCoins[_0x24666c(0x16f)](_0x262d3e=>_0x262d3e[_0x24666c(0x17b)]==_0x4e4ef8);_0x26b2bd=![];if((_0x35f367!=0x0||_0x310670)&&(allSymbols[_0x24666c(0x13b)](_0x299471)||_0x4e4ef8==_0x1fa70c))_0x4e4ef8!=_0x1fa70c&&_0x5a83af[_0x24666c(0x1f2)](_0x299471),_0x3dd5a8[_0x24666c(0x1f2)]({'coin':_0x4e4ef8,'symbol':_0x299471,'reverse':![],'number':Math[_0x24666c(0x21e)](_0x35f367+(_0x310670&&_0x310670[_0x24666c(0xf9)]||0x0),0x0),'orderstatus':_0x10965f?_0x10965f[_0x24666c(0x18f)]:_0x24666c(0x213)});else(_0x35f367!=0x0||_0x310670)&&allSymbols['includes'](_0x21a479)&&(_0x4e4ef8!=_0x1fa70c&&_0x5a83af['push'](_0x21a479),_0x3dd5a8[_0x24666c(0x1f2)]({'coin':_0x4e4ef8,'symbol':_0x21a479,'reverse':!![],'number':Math[_0x24666c(0x21e)](_0x35f367+(_0x310670&&_0x310670[_0x24666c(0xf9)]||0x0),0x0),'orderstatus':_0x10965f?_0x10965f[_0x24666c(0x18f)]:_0x24666c(0x213)}));}}}}catch(_0x59e6c9){if(!_0x212327)handleErrorNoStop(_0x59e6c9,_0x24666c(0x168));else await handleError(_0x59e6c9,_0x24666c(0x168));}return _0x55df3e=cloneDeep(_0x3dd5a8),_0x3dd5a8=_0x3dd5a8[_0x24666c(0x1ec)](_0x4193ef=>{const _0x866769=_0x24666c,_0x5cecb3=config[_0x866769(0xcb)][_0x866769(0x16f)](_0x40752c=>_0x40752c[_0x866769(0x17b)]==_0x4193ef['coin']);return _0x5cecb3&&!_0x5cecb3['excluded'];}),[_0x3dd5a8,_0x55df3e];}async function getCoinNumber(_0x5404b9){const _0x2d8099=_0x1488c4;let _0x20fbfa;try{const _0x300336=await exchange[_0x2d8099(0x1f7)]();_0x20fbfa=_0x300336[_0x2d8099(0xcc)][_0x5404b9];}catch(_0x4cf778){await handleError(_0x4cf778,_0x2d8099(0x11e));}return _0x20fbfa;}async function getOpenOrders(){const _0x1ab46b=_0x1488c4;let _0xa26e2;allOpenOrders=[];try{for(const _0x1c4460 of config[_0x1ab46b(0xcb)]){!_0x1c4460['excluded']&&_0x1c4460[_0x1ab46b(0x17b)]!=config[_0x1ab46b(0x1ae)]&&(_0xa26e2=await exchange[_0x1ab46b(0x236)](_0x1c4460[_0x1ab46b(0x225)]),_0xa26e2[_0x1ab46b(0x1cf)]>0x0&&allOpenOrders[_0x1ab46b(0x1f2)](_0xa26e2[0x0]));}}catch(_0x606cee){await handleError(_0x606cee,_0x1ab46b(0x1d9));}}async function handleOpenOrders(_0x27866d=0x0){const _0x221c64=_0x1488c4;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x221c64(0xfd)]&&allOrdersPlaced&&(_0x27866d==0x0?(logger[_0x221c64(0x17d)]('1\x20-\x20Handle\x20open\x20orders'),_0x27866d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x221c64(0x17d)](_0x221c64(0x162)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0xc598fb){const _0x4382a1=_0x1488c4,_0x54c40c=ccxt['pro'][_0xc598fb['exchange'][_0x4382a1(0x14b)]()],_0x2d0491=new _0x54c40c({'apiKey':_0xc598fb['apiKey'],'secret':_0xc598fb[_0x4382a1(0x1a5)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4382a1(0x195)}});if(_0xc598fb[_0x4382a1(0xd3)])_0x2d0491[_0x4382a1(0x23c)]=_0xc598fb['apiPassword'];try{await _0x2d0491[_0x4382a1(0x1a6)]();}catch(_0xe2ecc4){throw _0xe2ecc4;}}function cloneDeep(_0x1f0df4){const _0x46ffbb=_0x1488c4;return JSON[_0x46ffbb(0x20b)](JSON[_0x46ffbb(0x22b)](_0x1f0df4));}async function getPortfolio(_0xe3634b){const _0x41a236=_0x1488c4;let _0x480393=[],_0x22b1fb=[],_0x26e7ec=[],_0x3ff006;if(_0xe3634b[_0x41a236(0x124)]!==_0x41a236(0xc6)||_0xe3634b['apiSecret']!=='************'||_0xe3634b[_0x41a236(0xd3)]&&_0xe3634b[_0x41a236(0xd3)]!==_0x41a236(0xc6)){if(config[_0x41a236(0xbc)]){if(_0xe3634b[_0x41a236(0x124)]==_0x41a236(0xc6))_0xe3634b[_0x41a236(0x124)]=config[_0x41a236(0x124)];if(_0xe3634b[_0x41a236(0x1a5)]=='************')_0xe3634b[_0x41a236(0x1a5)]=config[_0x41a236(0x1a5)];if(_0xe3634b[_0x41a236(0xd3)]==_0x41a236(0xc6))_0xe3634b['apiPassword']=config[_0x41a236(0xd3)];try{await testAPI(_0xe3634b);}catch(_0x4bb5b0){if(_0x4bb5b0[_0x41a236(0x10f)]()['includes'](_0x41a236(0x19f))){logger[_0x41a236(0x17d)](_0x41a236(0x15b)),proxyEmit(_0x41a236(0xcb),![]);return;}else{handleError(_0x4bb5b0,_0x41a236(0xba));return;}}}await initExchange(_0xe3634b[_0x41a236(0xbc)],_0xe3634b[_0x41a236(0x124)],_0xe3634b[_0x41a236(0x1a5)],_0xe3634b[_0x41a236(0xd3)]);try{await loadSymbols(_0xe3634b[_0x41a236(0xbc)],!![]);}catch(_0x41b3de){if(_0x41b3de[_0x41a236(0x10f)]()[_0x41a236(0x13b)](_0x41a236(0x19f))){proxyEmit(_0x41a236(0xcb),![]);return;}else{handleError(_0x41b3de,_0x41a236(0xc4));return;}}const _0x229506=await getCoins(![],_0xe3634b['basecoin']);_0x26e7ec=cloneDeep(_0x229506[0x1]);}else _0x26e7ec=cloneDeep(currentCoinsAll);if(_0xe3634b[_0x41a236(0x1ae)]=='')proxyEmit(_0x41a236(0xcb),_0x26e7ec);else{_0x26e7ec['forEach'](_0x3f21c2=>{if(_0x3f21c2['coin']!=_0xe3634b['basecoin'])_0x480393['push'](_0x3f21c2['symbol']);});try{_0x22b1fb=await exchange[_0x41a236(0x13c)](_0x480393);}catch(_0x50d5c7){if(_0x50d5c7[_0x41a236(0x10f)]()[_0x41a236(0x13b)](_0x41a236(0x19f))){proxyEmit(_0x41a236(0xcb),![]);return;}else{handleError(_0x50d5c7,_0x41a236(0x1c3));return;}}_0x26e7ec['forEach'](_0x31acb0=>{const _0x203164=_0x41a236;_0x31acb0['coin']!=_0xe3634b[_0x203164(0x1ae)]?_0x3ff006=_0x31acb0[_0x203164(0x142)]?0x1/_0x22b1fb[_0x31acb0[_0x203164(0x225)]][_0x203164(0x179)]:_0x22b1fb[_0x31acb0[_0x203164(0x225)]][_0x203164(0x179)]:_0x3ff006=0x1,_0x31acb0[_0x203164(0xd0)]=formatResult(_0x3ff006,0x8);}),proxyEmit(_0x41a236(0xcb),_0x26e7ec);}}function truncateTradeAmount(_0x3e8e29,_0xacc455){let _0x1d7f92=0x0;try{_0x1d7f92=exchange['amountToPrecision'](_0x3e8e29,_0xacc455);}catch(_0x14c364){}return _0x1d7f92;}function checkMinimums(_0x39adb9){const _0x10f620=_0x1488c4;let _0x3ddef3=!![];const _0x4f11b2=!_0x39adb9[_0x10f620(0x142)]?markets[_0x39adb9[_0x10f620(0x225)]]['limits']['amount'][_0x10f620(0xc0)]:markets[_0x39adb9[_0x10f620(0x225)]][_0x10f620(0xe3)][_0x10f620(0x112)][_0x10f620(0xc0)],_0x5c03ca=!_0x39adb9[_0x10f620(0x142)]?markets[_0x39adb9[_0x10f620(0x225)]][_0x10f620(0xe3)][_0x10f620(0x112)]['min']:markets[_0x39adb9[_0x10f620(0x225)]][_0x10f620(0xe3)][_0x10f620(0x212)]['min'],_0x3b9725=truncateTradeAmount(_0x39adb9[_0x10f620(0x225)],_0x39adb9['trade']);_0x39adb9[_0x10f620(0x132)]=_0x3b9725;if(Math[_0x10f620(0x138)](_0x3b9725)<_0x4f11b2)_0x3ddef3=![];if(Math[_0x10f620(0x138)](_0x3b9725)*_0x39adb9[_0x10f620(0x179)]<_0x5c03ca)_0x3ddef3=![];if(_0x39adb9[_0x10f620(0x126)]=='sell'){let _0x5cb012=config[_0x10f620(0xcb)]['find'](_0xe9d334=>_0xe9d334[_0x10f620(0x17b)]==_0x39adb9[_0x10f620(0x17b)]);if(_0x5cb012['offset']>0x0){if(Math['abs'](_0x3b9725)>_0x39adb9['number']-_0x5cb012[_0x10f620(0xf9)])_0x3ddef3=![];}else{if(Math[_0x10f620(0x138)](_0x3b9725)>_0x39adb9[_0x10f620(0x119)])_0x3ddef3=![];}}if(_0x39adb9[_0x10f620(0x126)]==_0x10f620(0x177)){let _0xf86421=config[_0x10f620(0xcb)][_0x10f620(0x16f)](_0x278ecd=>_0x278ecd['coin']==config[_0x10f620(0x1ae)]),_0x4a4f50=currentCoins['find'](_0xed57ac=>_0xed57ac[_0x10f620(0x17b)]==config['basecoin']);if(_0xf86421[_0x10f620(0xf9)]>0x0){if(Math['abs'](_0x3b9725)*_0x39adb9[_0x10f620(0x179)]>_0x4a4f50['number']-_0xf86421[_0x10f620(0xf9)])_0x3ddef3=![];}else{if(Math[_0x10f620(0x138)](_0x3b9725)*_0x39adb9[_0x10f620(0x179)]>_0x4a4f50[_0x10f620(0x119)])_0x3ddef3=![];}}return _0x3ddef3;}async function getBalances(_0x568211=!![]){const _0x183956=_0x1488c4;let _0xf71d00=0x0,_0x94e4d8;const _0x305e75=config['threshold'];if(config['headless']&&config[_0x183956(0x20e)]<0x0)await validate24hChanges();currentCoins[_0x183956(0xdc)](_0x2e45f1=>{const _0xf23b80=_0x183956;if(_0x2e45f1[_0xf23b80(0x17b)]!=config[_0xf23b80(0x1ae)]){let _0x3dd660=global[_0xf23b80(0x219)][noslash(_0x2e45f1[_0xf23b80(0x225)])];_0x94e4d8=_0x2e45f1['reverse']?0x1/_0x3dd660:_0x3dd660;}else _0x94e4d8=0x1;let _0xc204f1=_0x2e45f1[_0xf23b80(0x119)]*_0x94e4d8;_0xf71d00+=_0xc204f1,_0x2e45f1[_0xf23b80(0x179)]=formatResult(Number(_0x94e4d8),0x8),_0x2e45f1[_0xf23b80(0xb4)]=_0xc204f1;}),currentCoins[_0x183956(0xdc)](_0x27678a=>{const _0x23591d=_0x183956;let _0x503b0e=config[_0x23591d(0xcb)][_0x23591d(0x16f)](_0x4656f5=>_0x4656f5['coin']==_0x27678a['coin']),_0xb98d51=Number(_0x503b0e[_0x23591d(0xed)]),_0xaccd18=_0x27678a[_0x23591d(0xb4)]/_0xf71d00*0x64,_0x497904=_0xb98d51*_0xf71d00/0x64/_0x27678a[_0x23591d(0x179)]-_0x27678a['number'];_0x27678a[_0x23591d(0xed)]=formatResult(_0xaccd18,0x3),_0x27678a[_0x23591d(0xe7)]=formatResult(_0xb98d51,0x3),_0x27678a['trade']=formatResult(_0x497904,0x8),_0x27678a[_0x23591d(0x126)]='',_0x27678a[_0x23591d(0xfe)]=![];if(_0x27678a['coin']!=config[_0x23591d(0x1ae)]){if(_0x27678a[_0x23591d(0xed)]>_0xb98d51)_0x27678a[_0x23591d(0x126)]=_0x23591d(0xef),_0x27678a[_0x23591d(0xfe)]=checkMinimums(_0x27678a);else _0x27678a[_0x23591d(0xed)]<_0xb98d51&&(_0x27678a[_0x23591d(0x126)]='buy',_0x27678a['valid']=checkMinimums(_0x27678a));}_0x27678a[_0x23591d(0x1b5)]=_0x27678a[_0x23591d(0xed)]/_0x27678a[_0x23591d(0xe7)]-0x1;if(_0x27678a['orderstatus']==_0x23591d(0x158)||_0x27678a[_0x23591d(0x18f)]=='canceled')_0x27678a[_0x23591d(0x18f)]=_0x23591d(0x213);}),currentCoins[_0x183956(0x154)]((_0x1361cf,_0x3f8f2e)=>_0x1361cf[_0x183956(0x1b5)]<_0x3f8f2e[_0x183956(0x1b5)]?0x1:_0x3f8f2e[_0x183956(0x1b5)]<_0x1361cf[_0x183956(0x1b5)]?-0x1:0x0);const _0x568b93=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x568b93[_0x183956(0x1da)],'usd':_0x568b93['usd'],'portfolio':JSON[_0x183956(0x22b)](currentCoins),'threshold':_0x305e75},proxyEmit(_0x183956(0x1c4),{'serverversion':serverversion,'balances':lastBalances});if(_0x568211){if(config[_0x183956(0x1d2)])headlessMode({'portfolio':currentCoins,'threshold':_0x305e75});else{if(lockOrders==ORDERS[_0x183956(0x1c2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x305e75});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x328d74=getNormalizedPerformance();getStartingBalances(_0x328d74),emitPerformance(_0x328d74);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x415e22=getNormalizedPerformance();emitPerformance(_0x415e22),getStartingBalances(_0x415e22),logger['debug'](_0x183956(0x194));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x210b(_0x38a6c0,_0x16275f){const _0x404a20=_0x3855();return _0x210b=function(_0x4dc959,_0x3836ae){_0x4dc959=_0x4dc959-0xb3;let _0x385509=_0x404a20[_0x4dc959];return _0x385509;},_0x210b(_0x38a6c0,_0x16275f);}async function storePerformance(){const _0x23f4fc=_0x1488c4;if(!lastBalances)return;let _0x534022=[],_0x516e7e,_0x3a3ee7=JSON[_0x23f4fc(0x20b)](lastBalances['portfolio']);_0x3a3ee7[_0x23f4fc(0x154)]((_0x46e84f,_0x419a07)=>_0x46e84f[_0x23f4fc(0x17b)]>_0x419a07[_0x23f4fc(0x17b)]?0x1:_0x419a07[_0x23f4fc(0x17b)]>_0x46e84f['coin']?-0x1:0x0),_0x3a3ee7['forEach'](_0x964578=>{const _0x188602=_0x23f4fc;let _0x3a378f={'coin':_0x964578[_0x188602(0x17b)],'number':_0x964578[_0x188602(0x119)],'price':_0x964578[_0x188602(0x179)]};_0x534022[_0x188602(0x1f2)](_0x3a378f);});const _0x289e7b=await getFiat();_0x516e7e={'date':lastBalances[_0x23f4fc(0x166)][_0x23f4fc(0x226)]('\x20')[0x0],'eur':_0x289e7b['eur'],'usd':_0x289e7b[_0x23f4fc(0x1e6)],'coins':_0x534022};let _0x42dd9d=dbPerformance[_0x23f4fc(0x1a8)]('data')['find']({'date':_0x516e7e[_0x23f4fc(0xe8)]})[_0x23f4fc(0xb4)]();_0x42dd9d?_0x516e7e[_0x23f4fc(0xe8)]!=config[_0x23f4fc(0x1d0)]&&dbPerformance[_0x23f4fc(0x1a8)]('data')[_0x23f4fc(0x16f)]({'date':_0x516e7e[_0x23f4fc(0xe8)]})[_0x23f4fc(0x110)](_0x516e7e)[_0x23f4fc(0x144)]():dbPerformance['get'](_0x23f4fc(0x1c6))[_0x23f4fc(0x1f2)](_0x516e7e)[_0x23f4fc(0x144)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x42fa28=_0x1488c4;let _0x87594d=[];if(dbPerformance[_0x42fa28(0xf6)](_0x42fa28(0x1c6))['value']()){let _0x43acec=dbPerformance['get']('data')[_0x42fa28(0x105)]()[_0x42fa28(0x1ec)](_0x41df9f=>{const _0x30c6ff=_0x42fa28;if(_0x41df9f[_0x30c6ff(0x1fd)][_0x30c6ff(0x1cf)]==0x0)return![];else return!![];})[_0x42fa28(0x116)](_0x42fa28(0xe8))['value'](),_0x2f9638=[...config[_0x42fa28(0x101)]];_0x2f9638[_0x42fa28(0x154)]((_0x1b5f78,_0x4e67a2)=>_0x1b5f78[_0x42fa28(0xe8)]>_0x4e67a2['date']?-0x1:_0x4e67a2[_0x42fa28(0xe8)]>_0x1b5f78['date']?0x1:0x0);let _0x1406b3=0x1,_0xed294f=[],_0x38c3e3=0x0;_0x43acec[_0x42fa28(0x149)]()['reverse']()[_0x42fa28(0xdc)]((_0x362a25,_0x52515d)=>{const _0x2b8afa=_0x42fa28;if(_0x2f9638[_0x38c3e3]){if(_0x43acec[_0x43acec['length']-_0x52515d]&&_0x2f9638[_0x38c3e3][_0x2b8afa(0xe8)]==_0x43acec[_0x43acec[_0x2b8afa(0x1cf)]-_0x52515d][_0x2b8afa(0xe8)]){if(_0x52515d<_0x43acec[_0x2b8afa(0x1cf)]){let _0x2a1d59=0x0,_0x52ab2e=0x0;_0x43acec[_0x43acec[_0x2b8afa(0x1cf)]-_0x52515d][_0x2b8afa(0x1fd)][_0x2b8afa(0xdc)](_0x4a8683=>{const _0x48b03a=_0x2b8afa;_0x52ab2e+=_0x4a8683[_0x48b03a(0x119)]*_0x4a8683[_0x48b03a(0xd0)];}),_0x2f9638[_0x38c3e3][_0x2b8afa(0x1ee)][_0x2b8afa(0xdc)](_0x161b74=>{const _0x10e9c6=_0x2b8afa;_0x2a1d59+=_0x161b74[_0x10e9c6(0x119)]*_0x161b74['price'];}),_0x1406b3*=_0x2a1d59/(_0x52ab2e-_0x2a1d59)+0x1;}_0x38c3e3++;}}let _0x3d9a3d=0x0;_0x362a25[_0x2b8afa(0x1fd)][_0x2b8afa(0xdc)](_0x504728=>{const _0x375ade=_0x2b8afa;_0x3d9a3d+=_0x504728[_0x375ade(0x119)]*_0x504728[_0x375ade(0xd0)];}),_0xed294f[_0x43acec[_0x2b8afa(0x1cf)]-_0x52515d-0x1]=_0x3d9a3d*(_0x1406b3-0x1);});let _0x29ded4=[];_0x2f9638=[...config[_0x42fa28(0x101)]]||[];let _0x39fca9=0x0;_0x38c3e3=0x0,_0x43acec[_0x42fa28(0xdc)]((_0x5639ac,_0x44c2d8)=>{const _0x3a9bdd=_0x42fa28;if(_0x2f9638[_0x38c3e3]){const _0x2b8208=fns['parse'](_0x2f9638[_0x38c3e3]['date'],_0x3a9bdd(0x172),new Date()),_0x140d37=fns[_0x3a9bdd(0x20b)](_0x5639ac['date'],'yyyy/MM/dd',new Date());if(fns[_0x3a9bdd(0x202)](_0x2b8208,_0x140d37)){let _0x2fd9b7=0x0;_0x2f9638[_0x38c3e3][_0x3a9bdd(0x1ee)][_0x3a9bdd(0xdc)](_0x79b1a6=>{const _0x4ac05e=_0x3a9bdd;!_0x29ded4[_0x79b1a6[_0x4ac05e(0x17b)]]?_0x29ded4[_0x79b1a6[_0x4ac05e(0x17b)]]=_0x79b1a6[_0x4ac05e(0x119)]:(_0x2fd9b7=_0x29ded4[_0x79b1a6[_0x4ac05e(0x17b)]],_0x29ded4[_0x79b1a6[_0x4ac05e(0x17b)]]+=_0x79b1a6[_0x4ac05e(0x119)]);const _0xdfbd70=_0x5639ac['coins'][_0x4ac05e(0x16f)](_0x3384d0=>_0x3384d0[_0x4ac05e(0x17b)]==_0x79b1a6[_0x4ac05e(0x17b)]);(!_0xdfbd70||_0xdfbd70[_0x4ac05e(0x119)]==0x0)&&(_0x39fca9+=(-_0x79b1a6[_0x4ac05e(0x119)]-_0x2fd9b7)*_0x79b1a6[_0x4ac05e(0xd0)]);}),_0x38c3e3++;}}_0x5639ac[_0x3a9bdd(0x1fd)][_0x3a9bdd(0xdc)]((_0x33a904,_0x116e14)=>{const _0x431af7=_0x3a9bdd;_0x29ded4[_0x33a904[_0x431af7(0x17b)]]&&(_0x33a904['initial']=_0x29ded4[_0x33a904[_0x431af7(0x17b)]]);}),_0x87594d['push']({'date':_0x5639ac[_0x3a9bdd(0xe8)],'eur':_0x5639ac[_0x3a9bdd(0x1da)],'usd':_0x5639ac['usd'],'offset':_0xed294f[_0x44c2d8],'netoffset':_0x39fca9,'coins':_0x5639ac[_0x3a9bdd(0x1fd)]});});}return _0x87594d;}function emitPerformance(_0x5d8495){const _0x4ae007=_0x1488c4;_0x5d8495[_0x4ae007(0x1cf)]!==0x0?(proxyEmit(_0x4ae007(0xd7),_0x5d8495),lastPerformanceEmitted=getDate()):proxyEmit(_0x4ae007(0xd7),[]);}function getPerf(_0x2f3657,_0x3c9058){const _0x196a4e=_0x1488c4;let _0x37f687=0x0,_0x4a4fc6=0x0,_0x5b5365=0x0;_0x2f3657[_0x196a4e(0x1fd)]['forEach'](_0x305c1=>{const _0xadbc4d=_0x196a4e;_0x37f687+=_0x305c1[_0xadbc4d(0x119)]*_0x305c1[_0xadbc4d(0xd0)];});_0x3c9058&&(_0x37f687+=_0x2f3657[_0x196a4e(0xf9)]);if(config['basecoin']===_0x196a4e(0x228)||config[_0x196a4e(0x1ae)]==='ETH')_0x4a4fc6=_0x37f687*_0x2f3657[_0x196a4e(0x1da)],_0x5b5365=_0x37f687*_0x2f3657[_0x196a4e(0x1e6)];else{if(usdBasecoins['includes'](config['basecoin']))_0x4a4fc6=_0x37f687*_0x2f3657['eur']/_0x2f3657[_0x196a4e(0x1e6)],_0x5b5365=_0x37f687;else config[_0x196a4e(0x1ae)]===_0x196a4e(0x11c)&&(_0x4a4fc6=_0x37f687,_0x5b5365=_0x37f687*_0x2f3657[_0x196a4e(0x1e6)]/_0x2f3657[_0x196a4e(0x1da)]);}return[_0x37f687,_0x4a4fc6,_0x5b5365];}function getKPIs(_0x4ea1dc,_0x106946=_0x1488c4(0x11c)){const _0x554766=_0x1488c4,_0x321acb=config[_0x554766(0x1ae)],_0x16681b=lastBalances,_0x5e55f7=currentCoins,_0x43aeb5=getNormalizedPerformance(),_0xa31105=_0x4ea1dc==='basecoin'?_0x321acb:_0x4ea1dc===_0x554766(0x15f)||_0x4ea1dc==='net-fiat'?_0x106946:_0x554766(0x182)+_0x321acb,_0x3a2359=_0x4ea1dc==='net-basecoin'?'Net\x20effect':_0x4ea1dc==='net-fiat'?_0x554766(0x13e):_0xa31105+'\x20value',_0x1b7379=_0x4ea1dc===_0x554766(0xd5)||_0x4ea1dc===_0x554766(0xeb)?'Net\x20effect':_0xa31105+_0x554766(0xf2);let _0x1cd32b=0x0;_0x5e55f7[_0x554766(0xdc)](_0x59fd6e=>{const _0x4a561f=_0x554766;_0x1cd32b+=_0x59fd6e[_0x4a561f(0x119)]*_0x59fd6e['last'];});if(_0x4ea1dc===_0x554766(0x15f)||_0x4ea1dc===_0x554766(0xeb)){if(_0x321acb===_0x554766(0x228)||_0x321acb===_0x554766(0x129))_0x1cd32b=_0x1cd32b*(_0x106946===_0x554766(0x11c)?_0x16681b[_0x554766(0x1da)]:_0x16681b['usd']);else{if(usdBasecoins[_0x554766(0x13b)](_0x321acb))_0x1cd32b=_0x1cd32b*(_0x106946===_0x554766(0x11c)?_0x16681b[_0x554766(0x1da)]/_0x16681b['usd']:0x1);else _0x321acb===_0x554766(0x11c)&&(_0x1cd32b=_0x1cd32b*(_0x106946===_0x554766(0x11c)?0x1:_0x16681b[_0x554766(0x1e6)]/_0x16681b['eur']));}}let _0x232947;if(_0x1cd32b!==0x0){if(_0x4ea1dc===_0x554766(0x1ae))_0x232947=(_0x1cd32b/startingBalances['basecoin']-0x1)*0x64;else{if(_0x106946===_0x554766(0x11c))_0x232947=(_0x1cd32b/startingBalances[_0x554766(0x1da)]-0x1)*0x64;else _0x232947=(_0x1cd32b/startingBalances[_0x554766(0x1e6)]-0x1)*0x64;}let _0x548cfc=0x0;if(startingBalances[_0x554766(0x1fd)])_0x5e55f7['forEach'](_0x112013=>{const _0x3f2b5d=_0x554766;let _0x3fdb7e=startingBalances['coins'][_0x3f2b5d(0x16f)](_0x959fef=>_0x959fef[_0x3f2b5d(0x17b)]===_0x112013['coin']);if(_0x3fdb7e&&_0x3fdb7e['coin']&&_0x112013['number']!==0x0)_0x548cfc+=_0x3fdb7e[_0x3f2b5d(0x119)]*_0x112013[_0x3f2b5d(0x179)];});let _0x5b9384=0x0;if(_0x43aeb5[_0x554766(0x1cf)]!==0x0){let _0xc306e5=_0x43aeb5[_0x43aeb5[_0x554766(0x1cf)]-0x1];_0x5b9384=_0xc306e5[_0x554766(0xdb)];}_0x548cfc-=_0x5b9384;_0x4ea1dc===_0x554766(0xd5)&&(_0x232947=(_0x1cd32b-_0x548cfc)/startingBalances['basecoin']*0x64,_0x1cd32b=_0x1cd32b-_0x548cfc);if(_0x4ea1dc===_0x554766(0xeb)){let _0x21c664=_0x106946===_0x554766(0x11c)?startingBalances[_0x554766(0x1da)]:startingBalances['usd'];if(_0x321acb===_0x554766(0x228)||_0x321acb===_0x554766(0x129))_0x548cfc=_0x106946===_0x554766(0x11c)?_0x548cfc*_0x16681b['eur']:_0x548cfc*_0x16681b[_0x554766(0x1e6)];else{if(usdBasecoins[_0x554766(0x13b)](_0x321acb))_0x548cfc=_0x106946===_0x554766(0x11c)?_0x548cfc*_0x16681b[_0x554766(0x1da)]/_0x16681b[_0x554766(0x1e6)]:_0x548cfc;else _0x321acb===_0x554766(0x11c)&&(_0x548cfc=_0x106946==='EUR'?_0x548cfc:_0x548cfc*_0x16681b[_0x554766(0x1e6)]/_0x16681b[_0x554766(0x1da)]);}_0x232947=(_0x1cd32b-_0x548cfc)/_0x21c664*0x64,_0x1cd32b=_0x1cd32b-_0x548cfc;}if(_0x232947){if(_0x232947<0x64)_0x232947=_0x232947['toFixed'](0x2);else{if(_0x232947<0x3e8)_0x232947=_0x232947[_0x554766(0x20d)](0x1);else _0x232947=_0x232947[_0x554766(0x20d)](0x0);}}else _0x232947=Number('0')[_0x554766(0x20d)](0x2);if(_0x1cd32b){if(Math[_0x554766(0x138)](_0x1cd32b)<0.000001)_0x1cd32b=_0x1cd32b['toFixed'](0x2);else{if(Math[_0x554766(0x138)](_0x1cd32b)<0.1)_0x1cd32b=_0x1cd32b[_0x554766(0x20d)](0x6);else{if(Math['abs'](_0x1cd32b)<0x1)_0x1cd32b=_0x1cd32b[_0x554766(0x20d)](0x5);else{if(Math[_0x554766(0x138)](_0x1cd32b)<0xa)_0x1cd32b=_0x1cd32b['toFixed'](0x4);else{if(Math[_0x554766(0x138)](_0x1cd32b)<0x64)_0x1cd32b=_0x1cd32b[_0x554766(0x20d)](0x3);else{if(Math[_0x554766(0x138)](_0x1cd32b)<0x3e8)_0x1cd32b=_0x1cd32b[_0x554766(0x20d)](0x2);else _0x1cd32b=_0x1cd32b[_0x554766(0x20d)](0x2);}}}}}}else _0x1cd32b=Number('0')[_0x554766(0x20d)](0x2);}else _0x232947=Number('0')[_0x554766(0x20d)](0x2);return{'value':_0x1cd32b,'change':_0x232947,'leftTxt':_0x3a2359,'rightTxt':_0x1b7379};}async function getStartingBalances(_0x3ac82b,_0x21611f=!![]){const _0x84176a=_0x1488c4;if(_0x3ac82b[_0x84176a(0x1cf)]!==0x0){const [_0x1bce9d,_0x527654,_0x2359a8]=getPerf(_0x3ac82b[0x0],!![]);let _0x40a4de=[];config['portfolio'][_0x84176a(0xdc)](_0x5380df=>{const _0x48688e=_0x84176a;let _0x332bac=0x0,_0x157a6f;config[_0x48688e(0x101)][_0x48688e(0xdc)](_0x58f85e=>{const _0x15a635=_0x48688e;let _0x4d6d80=_0x58f85e[_0x15a635(0x1ee)][_0x15a635(0x16f)](_0x4c6148=>_0x4c6148['coin']==_0x5380df['coin']);if(_0x4d6d80){_0x332bac+=_0x4d6d80['number'];if(!_0x157a6f)_0x157a6f=_0x4d6d80[_0x15a635(0xd0)];}}),_0x40a4de[_0x48688e(0x1f2)]({'coin':_0x5380df[_0x48688e(0x17b)],'number':_0x332bac,'initialprice':_0x157a6f});});const _0x3403e6={'basecoin':_0x1bce9d,'eur':_0x527654,'usd':_0x2359a8,'coins':_0x40a4de};if(_0x21611f)proxyEmit(_0x84176a(0x1c1),_0x3403e6);startingBalances=_0x3403e6;}}function headlessMode(_0xe47733){const _0x2015d4=_0x1488c4;let _0x100509=_0xe47733['portfolio'],_0x546fa6=_0xe47733[_0x2015d4(0xe0)],_0x209375=[];for(let _0x464fff of _0x100509){if(_0x464fff[_0x2015d4(0x17b)]!=config[_0x2015d4(0x1ae)]){if(_0x464fff[_0x2015d4(0x1b5)]>=_0x546fa6/0x64){if(_0x464fff[_0x2015d4(0xfe)])_0x209375[_0x2015d4(0x1f2)](_0x464fff);}else{if(_0x464fff['delta']<=-_0x546fa6/0x64){if(_0x464fff['valid'])_0x209375[_0x2015d4(0x1f2)](_0x464fff);}}}}_0x209375['length']>0x0&&placeOrder(_0x209375);}function notifyBalance(_0x51cabb){const _0x4799d0=_0x1488c4;let _0x531da7=_0x51cabb[_0x4799d0(0xcb)],_0x5a254c=_0x51cabb[_0x4799d0(0xe0)],_0x3b209c=[];for(let _0x3456d8 of _0x531da7){if(_0x3456d8['coin']!=config[_0x4799d0(0x1ae)]){if(_0x3456d8[_0x4799d0(0x1b5)]>=_0x5a254c/0x64){if(_0x3456d8[_0x4799d0(0xfe)])_0x3b209c[_0x4799d0(0x1f2)](_0x3456d8);}else{if(_0x3456d8[_0x4799d0(0x1b5)]<=-_0x5a254c/0x64){if(_0x3456d8['valid'])_0x3b209c['push'](_0x3456d8);}}}}if(_0x3b209c[_0x4799d0(0x1cf)]>0x0){let _0x1dd8de=_0x3b209c['map'](_0x1596e5=>_0x1596e5[_0x4799d0(0x17b)]);_0x1dd8de[_0x4799d0(0x154)]();let _0x58f1ca=_0x1dd8de['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x4799d0(0xbe),_0x4799d0(0xb6));lastCoinsToBalance=_0x58f1ca;}}function symbolToCoin(_0x486966){const _0x253ed7=_0x1488c4;let _0x34fcb4;if(_0x486966['includes']('/'+config[_0x253ed7(0x1ae)]))_0x34fcb4=_0x486966[_0x253ed7(0x231)]('/'+config['basecoin'],'');if(_0x486966[_0x253ed7(0x13b)](config[_0x253ed7(0x1ae)]+'/'))_0x34fcb4=_0x486966['replace'](config[_0x253ed7(0x1ae)]+'/','');return _0x34fcb4;}async function unlockOrders(){const _0x50a8da=_0x1488c4;if(allOrdersPlaced&&lockOrders==ORDERS[_0x50a8da(0xfd)]){logger[_0x50a8da(0x17d)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x50a8da(0xc2)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x30b583=await getCoins();[currentCoins,currentCoinsAll]=_0x30b583,validateOrdersState=_0x50a8da(0x199),persistOpenOrders([]),lockOrders=ORDERS[_0x50a8da(0x1c2)],logger['debug']('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x574f05){const _0x39f850=_0x1488c4;if(_0x574f05)validateOrdersState=_0x574f05;logger[_0x39f850(0x17d)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x39f850(0x103)+(lockOrders==0x1?_0x39f850(0x125):lockOrders==0x2?'ORDERS.UNLOCKING':_0x39f850(0x150)));let _0x3c7486=[],_0x184c68=config[_0x39f850(0x148)]==_0x39f850(0x203)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x39f850(0xb5)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x39f850(0x17d)](_0x39f850(0x140)+validateOrdersState),lastOrders[_0x39f850(0xdc)](_0x2037f3=>{const _0x4585af=_0x39f850;let _0x17acff=![];_0x2037f3[_0x4585af(0x158)]>0x0&&(_0x17acff=!![]),_0x3c7486[_0x4585af(0x1f2)](_0x17acff),_0x17acff&&config[_0x4585af(0x148)]!=_0x4585af(0x203)&&logHistory(_0x4585af(0x1f4),_0x4585af(0x143)+_0x2037f3[_0x4585af(0x225)]+'\x20'+_0x2037f3[_0x4585af(0x126)]+'\x20#'+formatResult(_0x2037f3['filled'],0x8)+'\x20@'+formatResult(_0x2037f3[_0x4585af(0xd0)],0x8));}),_0x3c7486[_0x39f850(0xdc)]((_0x46e013,_0x588cb0)=>{const _0xf309a9=_0x39f850;if(_0x46e013)lastOrders[_0xf309a9(0x18d)](_0x588cb0,0x1);}),persistOpenOrders(lastOrders);const _0x42eb40=coolingDown?_0x39f850(0x185):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x39f850(0xcf);if(_0x3c7486['includes'](![])){if(config[_0x39f850(0x148)]==_0x39f850(0x203)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x39f850(0xcf)){if(_0x3c7486['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x39f850(0x148)]==_0x39f850(0x203)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x39f850(0xfa))_0x3c7486[_0x39f850(0x13b)](![])&&(config[_0x39f850(0x148)]==_0x39f850(0x203)?logHistory(_0x39f850(0x1b7),_0x39f850(0x135)+Math[_0x39f850(0x1a3)](_0x184c68*validateOrderInterval/0xea60)+_0x39f850(0x160)+_0x42eb40):(await cancelOrders(),logHistory('success',_0x39f850(0x109)+Math[_0x39f850(0x1a3)](_0x184c68*validateOrderInterval/0xea60)+_0x39f850(0x160)+_0x42eb40))),await unlockOrders();else{if(validateOrdersState==_0x39f850(0x1ed)){if(config[_0x39f850(0x148)]!=_0x39f850(0x203))logHistory('success',_0x39f850(0x208)+_0x42eb40);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x51bcb6=>{const _0x1bb702=_0x210b;try{const _0x4318aa=await exchange[_0x1bb702(0x1e1)](_0x51bcb6['orderId'],_0x51bcb6['symbol']);}catch(_0x3ed173){if(_0x3ed173[_0x1bb702(0x10f)]()['includes'](_0x1bb702(0x12e))){}else await handleError(_0x3ed173,_0x1bb702(0x1f0));}});}async function initCoinResults(_0x1f1d12){const _0x3f9ca1=_0x1488c4;_0x1f1d12?logger['debug'](_0x3f9ca1(0x176)+_0x1f1d12):logger[_0x3f9ca1(0x17d)]('Initializing\x20coin\x20results'),config[_0x3f9ca1(0xcb)]['forEach'](_0x9857fb=>{const _0x53ce8c=_0x3f9ca1;if(!_0x9857fb[_0x53ce8c(0x220)]&&_0x9857fb[_0x53ce8c(0x17b)]!=config[_0x53ce8c(0x1ae)]){const _0x5e280e=currentCoins[_0x53ce8c(0x16f)](_0x4d3cc4=>_0x4d3cc4[_0x53ce8c(0x17b)]==_0x9857fb[_0x53ce8c(0x17b)]),_0x30988a=global[_0x53ce8c(0x219)][noslash(_0x9857fb[_0x53ce8c(0x225)])];let _0x1b3d5f=_0x5e280e?_0x5e280e[_0x53ce8c(0x119)]:null,_0x27d266=_0x9857fb[_0x53ce8c(0x142)]?0x1/_0x30988a:_0x30988a,_0x2be9fe;config[_0x53ce8c(0x101)]['forEach'](_0x56618e=>{const _0x388524=_0x53ce8c;!_0x2be9fe&&(_0x2be9fe=_0x56618e['changes'][_0x388524(0x16f)](_0x550c0a=>_0x550c0a[_0x388524(0x17b)]==_0x9857fb[_0x388524(0x17b)]),_0x2be9fe&&(_0x1b3d5f=_0x2be9fe['number'],_0x27d266=_0x2be9fe[_0x388524(0xd0)]));});let _0x303137=dbCoinResults[_0x53ce8c(0x1a8)]('coins')[_0x53ce8c(0x16f)]({'coin':_0x9857fb[_0x53ce8c(0x17b)]})[_0x53ce8c(0xb4)]();if(!_0x303137){const _0xf47ede={'coin':_0x9857fb[_0x53ce8c(0x17b)],'number':_0x1b3d5f,'breakeven':_0x27d266,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x53ce8c(0x1a8)](_0x53ce8c(0x1fd))[_0x53ce8c(0x1f2)](_0xf47ede)[_0x53ce8c(0x144)]();}else{if(_0x1f1d12&&_0x9857fb[_0x53ce8c(0x17b)]==_0x1f1d12){const _0x1bd880={'coin':_0x9857fb[_0x53ce8c(0x17b)],'number':_0x1b3d5f,'breakeven':_0x27d266,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x53ce8c(0x1fd))[_0x53ce8c(0x16f)]({'coin':_0x9857fb[_0x53ce8c(0x17b)]})[_0x53ce8c(0x110)](_0x1bd880)[_0x53ce8c(0x144)]();}}}});}async function updateCoinResults(_0x3411fc,_0x2a0f1a=![]){const _0x5cd796=_0x1488c4;let _0x5bb160,_0x59c40c,_0x3a33c5,_0x55a007,_0x34360f,_0x19fdae,_0x46982c=dbCoinResults['get'](_0x5cd796(0x1fd))[_0x5cd796(0x16f)]({'coin':_0x3411fc[_0x5cd796(0x17b)]})[_0x5cd796(0xb4)](),_0x5cafbe=![];Object[_0x5cd796(0x211)](_0x46982c)[_0x5cd796(0xdc)](([_0x21a307,_0x1738be])=>{if(_0x1738be==null)_0x5cafbe=!![];});(!_0x46982c||_0x5cafbe)&&(await initCoinResults(_0x3411fc['coin']),_0x46982c=dbCoinResults[_0x5cd796(0x1a8)](_0x5cd796(0x1fd))[_0x5cd796(0x16f)]({'coin':_0x3411fc[_0x5cd796(0x17b)]})[_0x5cd796(0xb4)]());_0x3411fc['reverse']&&(_0x19fdae={'filled':_0x3411fc[_0x5cd796(0x158)]*_0x3411fc[_0x5cd796(0xd0)],'amount':_0x3411fc[_0x5cd796(0x158)]*_0x3411fc[_0x5cd796(0xd0)],'side':_0x3411fc[_0x5cd796(0x126)]==_0x5cd796(0xef)?'buy':_0x5cd796(0xef),'price':0x1/_0x3411fc[_0x5cd796(0xd0)]},_0x3411fc={..._0x3411fc,..._0x19fdae});_0x2a0f1a?_0x59c40c=_0x3411fc['side']==_0x5cd796(0x177)?_0x46982c[_0x5cd796(0x119)]+_0x3411fc[_0x5cd796(0x158)]:_0x46982c[_0x5cd796(0x119)]-_0x3411fc[_0x5cd796(0x158)]:_0x59c40c=await getCoinNumber(_0x3411fc['coin']);if(_0x3411fc[_0x5cd796(0x1b9)]&&_0x3411fc[_0x5cd796(0x1b9)][_0x5cd796(0x1c8)]==config[_0x5cd796(0x1ae)])_0x5bb160=_0x3411fc[_0x5cd796(0x1b9)][_0x5cd796(0x112)];else{if(_0x3411fc[_0x5cd796(0x1b9)]&&_0x3411fc[_0x5cd796(0x1b9)][_0x5cd796(0x1c8)]==_0x5cd796(0x1dc)&&!_0x2a0f1a)_0x5bb160=_0x3411fc[_0x5cd796(0x1b9)][_0x5cd796(0x112)]*global['ticker']['BNB'+config[_0x5cd796(0x1ae)]];else _0x5bb160=defaultFee*_0x3411fc[_0x5cd796(0x158)]*_0x3411fc[_0x5cd796(0xd0)];}_0x3411fc[_0x5cd796(0x126)]==_0x5cd796(0x177)?(_0x3a33c5=_0x59c40c!=0x0?(_0x46982c[_0x5cd796(0x1dd)]*_0x46982c[_0x5cd796(0x119)]+_0x3411fc[_0x5cd796(0xd0)]*(_0x59c40c-_0x46982c[_0x5cd796(0x119)])+_0x5bb160)/_0x59c40c:0x0,_0x55a007=_0x46982c[_0x5cd796(0xe1)]):(_0x3a33c5=_0x59c40c!=0x0?(_0x46982c[_0x5cd796(0x1dd)]*_0x46982c[_0x5cd796(0x119)]-_0x3411fc['price']*(_0x46982c['number']-_0x59c40c)+_0x5bb160)/_0x59c40c:0x0,_0x55a007=_0x46982c[_0x5cd796(0xe1)]+(_0x3411fc['price']-_0x46982c['breakeven'])*_0x3411fc[_0x5cd796(0x158)]);_0x34360f=(_0x3411fc['price']-_0x3a33c5-_0x5bb160/_0x3411fc[_0x5cd796(0x158)])*_0x59c40c;let _0x57f1e2={'coin':_0x3411fc[_0x5cd796(0x17b)],'number':_0x59c40c,'breakeven':formatResult(_0x3a33c5,0x8),'realized':formatResult(_0x55a007,0x8),'unrealized':formatResult(_0x34360f,0x8),'fees':formatResult(_0x46982c[_0x5cd796(0x210)]+_0x5bb160,0x8),'sells':_0x3411fc[_0x5cd796(0x126)]==_0x5cd796(0xef)?_0x46982c['sells']+0x1:_0x46982c[_0x5cd796(0x22c)],'buys':_0x3411fc['side']=='buy'?_0x46982c['buys']+0x1:_0x46982c[_0x5cd796(0x15a)]};dbCoinResults['get']('coins')[_0x5cd796(0x16f)]({'coin':_0x3411fc[_0x5cd796(0x17b)]})[_0x5cd796(0x110)](_0x57f1e2)[_0x5cd796(0x144)]();if(!_0x2a0f1a){if(_0x3411fc[_0x5cd796(0x1b9)]&&_0x3411fc['fee']['currency']==_0x5cd796(0x1dc)){const _0x13dbb8=currentCoins[_0x5cd796(0x16f)](_0x58ba47=>_0x58ba47[_0x5cd796(0x17b)]==_0x5cd796(0x1dc));if(_0x13dbb8){let _0x134da4=dbCoinResults[_0x5cd796(0x1a8)]('coins')[_0x5cd796(0x16f)]({'coin':'BNB'})[_0x5cd796(0xb4)]();_0x57f1e2={..._0x134da4,'number':_0x13dbb8[_0x5cd796(0x119)]},dbCoinResults[_0x5cd796(0x1a8)]('coins')[_0x5cd796(0x16f)]({'coin':'BNB'})['assign'](_0x57f1e2)[_0x5cd796(0x144)]();}}}}async function placeOrder(_0x40fb33){const _0xb10243=_0x1488c4,_0x1232e5=config['ordertype']==_0xb10243(0x203)?'market':_0xb10243(0x23d);if(lockOrders==ORDERS[_0xb10243(0x1c2)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xb10243(0xfd)],allOrdersPlaced=![],validateOrdersState=_0xb10243(0x199);let _0x435ff1=![];lastOrders=[];for(const _0x2381b2 of _0x40fb33){let _0x2aad07,_0x591c9c,_0x3719e8,_0x5e80cb,_0x52b6aa,_0x350318=_0x2381b2['symbol'];try{const _0x5956cb=await exchange[_0xb10243(0x14a)](_0x350318);_0x2aad07=_0x2381b2['reverse']?0x1/_0x2381b2[_0xb10243(0x179)]:_0x2381b2['last'],_0x591c9c=_0x5956cb[_0xb10243(0x141)],_0x3719e8=_0x5956cb[_0xb10243(0x204)];_0x2381b2['reverse']?(_0x5e80cb=_0x2381b2[_0xb10243(0x126)]==_0xb10243(0x177)?'sell':_0xb10243(0x177),_0x52b6aa=Math[_0xb10243(0x138)](_0x2381b2[_0xb10243(0x132)])/_0x2aad07):(_0x5e80cb=_0x2381b2[_0xb10243(0x126)],_0x52b6aa=Math[_0xb10243(0x138)](_0x2381b2['trade']));_0x1232e5=='limit'&&(config[_0xb10243(0x148)]==_0xb10243(0x23b)&&(_0x2aad07=_0x5e80cb==_0xb10243(0x177)?_0x591c9c:_0x3719e8),config[_0xb10243(0x148)]=='limit-low'&&(_0x2aad07=_0x5e80cb==_0xb10243(0x177)?_0x3719e8:_0x591c9c));_0x52b6aa=formatResult(_0x52b6aa,0x8),_0x2aad07=formatResult(_0x2aad07,0x8);const _0x13af85=_0x5e80cb==_0xb10243(0xef)?config[_0xb10243(0x1cb)]?String['fromCodePoint']('0x'+config[_0xb10243(0x1cb)])+'\x20':'':config['emojibuy']?String[_0xb10243(0x104)]('0x'+config[_0xb10243(0x12c)])+'\x20':'',_0x20f0d0=_0x1232e5==_0xb10243(0x203)?_0xb10243(0x18c):config[_0xb10243(0x148)]==_0xb10243(0x23b)?_0xb10243(0xc1):_0xb10243(0x21f),_0x1024e3=(Math[_0xb10243(0x169)](Math[_0xb10243(0x145)]()*0x35a4e900)+0x5f5e100)[_0xb10243(0x10f)]();lastOrders[_0xb10243(0x1f2)]({'customId':_0x1024e3,'symbol':_0x350318,'coin':_0x2381b2['coin'],'amount':_0x52b6aa,'price':_0x2aad07,'side':_0x5e80cb,'reverse':_0x2381b2[_0xb10243(0x142)],'filled':0x0});if(_0x1232e5==_0xb10243(0x203))logHistory(_0xb10243(0x1f4),''+_0x13af85+_0x20f0d0+_0xb10243(0x1d4)+_0x350318+'\x20'+_0x5e80cb+'\x20#'+formatResult(_0x52b6aa,0x8)+'\x20@'+formatResult(_0x2aad07,0x8));else logHistory(_0xb10243(0x1f4),''+_0x13af85+_0x20f0d0+_0xb10243(0x1d4)+_0x350318+'\x20'+_0x5e80cb+'\x20#'+formatResult(_0x52b6aa,0x8)+'\x20@'+formatResult(_0x2aad07,0x8));const _0xf0472d=await exchange[_0xb10243(0x227)](_0x350318,_0x1232e5,_0x5e80cb,_0x52b6aa,_0x2aad07);logger[_0xb10243(0x17d)](_0xb10243(0x19d)+_0xf0472d['id']+'\x20|\x20Custom\x20ID:\x20'+_0x1024e3);const _0x2c005d=lastOrders['length']-0x1;if(_0x2c005d>=0x0&&lastOrders[_0x2c005d][_0xb10243(0xc9)]==_0x1024e3){lastOrders[_0x2c005d][_0xb10243(0xda)]=_0xf0472d['id'];if(_0xf0472d[_0xb10243(0x212)])lastOrders[_0x2c005d][_0xb10243(0x212)]=_0xf0472d[_0xb10243(0x212)];if(_0xf0472d[_0xb10243(0xd0)])lastOrders[_0x2c005d]['price']=_0xf0472d[_0xb10243(0xd0)];lastOrders[_0x2c005d][_0xb10243(0x1b9)]=_0xf0472d[_0xb10243(0x1b9)];}if(config[_0xb10243(0xf4)]!=0x0){let _0x4d46b3=null;if(cooldownTracker[_0xb10243(0x1cf)]==config[_0xb10243(0xf4)]-0x1)_0x4d46b3=cooldownTracker['shift']();const _0x2cdac2=getTimeStamp();cooldownTracker[_0xb10243(0x1f2)](_0x2cdac2);if(_0x4d46b3){const _0x574371=fns['differenceInSeconds'](new Date(_0x2cdac2),new Date(_0x4d46b3));if(_0x574371<cooldownInterval){logHistory(_0xb10243(0x133),_0xb10243(0x164)+config['cooldown']+_0xb10243(0xf1)+cooldownInterval/0x3c+_0xb10243(0xf3)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x3f1d41){if(_0x3f1d41['toString']()[_0xb10243(0x13b)](_0xb10243(0xb9)))lastOrders=lastOrders['filter'](_0x360b56=>_0x360b56[_0xb10243(0x225)]!=_0x350318),logHistory(_0xb10243(0x133),_0xb10243(0x1bb)+_0x350318),_0x435ff1=!![];else{if(_0x3f1d41[_0xb10243(0x10f)]()[_0xb10243(0x13b)](_0xb10243(0x183)))lastOrders=lastOrders['filter'](_0x1d96f9=>_0x1d96f9[_0xb10243(0x225)]!=_0x350318),logHistory('error',_0xb10243(0x200)+_0x350318),_0x435ff1=!![];else{if(_0x3f1d41['toString']()[_0xb10243(0x13b)]('InvalidOrder'))lastOrders=lastOrders[_0xb10243(0x1ec)](_0x19e7d6=>_0x19e7d6['symbol']!=_0x350318),logHistory(_0xb10243(0x133),_0xb10243(0x10d)+_0x350318),_0x435ff1=!![];else _0x3f1d41[_0xb10243(0x10f)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0xb10243(0x1ec)](_0x1c3f3b=>_0x1c3f3b[_0xb10243(0x225)]!=_0x350318),logHistory(_0xb10243(0x133),_0xb10243(0x1bb)+_0x350318),_0x435ff1=!![]):(lastOrders=lastOrders[_0xb10243(0x1ec)](_0x2a537b=>_0x2a537b[_0xb10243(0x225)]!=_0x350318),await handleError(_0x3f1d41,_0xb10243(0x1a9),_0x350318));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x409b1b=config[_0xb10243(0x148)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xb10243(0xb5)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x191fff=_0xb10243;validateOrders(_0x191fff(0xfa));},_0x409b1b);}else unlockOrders();_0x435ff1&&config[_0xb10243(0x1d2)]&&await pauseBot(_0xb10243(0xbf)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xb10243(0x1b7),_0xb10243(0x192)));}else{if(coolingDown)!config[_0xb10243(0x1d2)]&&logHistory(_0xb10243(0x133),_0xb10243(0xdf));else lockOrders!=ORDERS[_0xb10243(0x1c2)]&&(!config[_0xb10243(0x1d2)]&&(config[_0xb10243(0x148)]==_0xb10243(0x203)?logHistory(_0xb10243(0x133),_0xb10243(0x173)):logHistory(_0xb10243(0x133),_0xb10243(0x161))));}}function persistOpenOrders(_0x2cd0c5){const _0x32bec2=_0x1488c4,_0xaec516={...config,'openOrders':_0x2cd0c5};let _0xbcc4a6=dbConfig[_0x32bec2(0x1a8)](_0x32bec2(0x1aa))[_0x32bec2(0x16f)]({'botID':botID})[_0x32bec2(0xb4)]();_0xbcc4a6&&dbConfig[_0x32bec2(0x1a8)](_0x32bec2(0x1aa))[_0x32bec2(0x16f)]({'botID':botID})[_0x32bec2(0x110)](_0xaec516)[_0x32bec2(0x144)]();}function restoreOrders(){const _0x34dc86=_0x1488c4;let _0xe9da52;config[_0x34dc86(0x1a0)]&&allOpenOrders[_0x34dc86(0xdc)](_0x210e0c=>{const _0x38e0ac=_0x34dc86,_0x447e4a=config[_0x38e0ac(0x1a0)][_0x38e0ac(0x16f)](_0x4b650c=>_0x4b650c[_0x38e0ac(0xda)]==_0x210e0c['id']);_0x447e4a&&(lastOrders['push'](_0x447e4a),_0xe9da52=_0x210e0c[_0x38e0ac(0x10c)]);});if(lastOrders[_0x34dc86(0x1cf)]>0x0){lockOrders=ORDERS[_0x34dc86(0xfd)],validateOrdersState=_0x34dc86(0xcf),allOrdersPlaced=!![];const _0x37eaf7=new Date()[_0x34dc86(0x106)](),_0x2d97f0=config[_0x34dc86(0x148)]==_0x34dc86(0x203)?validateOrderTimeout*0x3c*0x3e8:config[_0x34dc86(0xb5)]*0x3c*0x3e8;if(_0xe9da52+_0x2d97f0>_0x37eaf7){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x49e850=_0x34dc86;validateOrders(_0x49e850(0xfa));},_0xe9da52+_0x2d97f0-_0x37eaf7);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x25e063=_0x1488c4;if(!coinsLoaded){process['send']({'telegrammsg':_0x25e063(0xca)},_0x4448aa=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x587c97='';if(config[_0x25e063(0x156)])_0x587c97='<b>'+config[_0x25e063(0xf8)]+_0x25e063(0xe2);else _0x587c97=_0x25e063(0x16b)+botID+_0x25e063(0xe2);const _0x2c6988=getKPIs(_0x25e063(0x1ae)),_0x15608d=getKPIs('fiat',config[_0x25e063(0x15f)]),_0x563472=getKPIs('net-basecoin'),_0x24e628=getKPIs(_0x25e063(0xeb),config[_0x25e063(0x15f)]);_0x587c97+='<pre>',_0x587c97+=_0x2c6988['leftTxt']+_0x25e063(0xb3)+_0x2c6988['value']+'\x0a',_0x587c97+=_0x2c6988[_0x25e063(0x22d)]+':\x20'+_0x2c6988[_0x25e063(0xc5)]+'%\x0a',_0x587c97+=_0x15608d['leftTxt']+_0x25e063(0xb3)+_0x15608d['value']+'\x0a',_0x587c97+=_0x15608d['rightTxt']+':\x20'+_0x15608d[_0x25e063(0xc5)]+'%\x0a',_0x587c97+=_0x563472[_0x25e063(0x1fe)]+':\x20'+_0x563472[_0x25e063(0xb4)]+'\x20('+config[_0x25e063(0x1ae)]+')\x0a',_0x587c97+=_0x563472[_0x25e063(0x22d)]+':\x20'+_0x563472[_0x25e063(0xc5)]+_0x25e063(0xb8)+config[_0x25e063(0x1ae)]+')\x0a',_0x587c97+=_0x24e628[_0x25e063(0x1fe)]+':\x20'+_0x24e628[_0x25e063(0xb4)]+'\x20('+config[_0x25e063(0x15f)]+')\x0a',_0x587c97+=_0x24e628[_0x25e063(0x22d)]+':\x20'+_0x24e628['change']+'%\x20('+config['fiat']+')\x0a',_0x587c97+='</pre>',process[_0x25e063(0xb7)]({'telegrammsg':_0x587c97},_0x2be9eb=>{});}async function sendPortfolioTelegram(){const _0x9aac94=_0x1488c4;if(!coinsLoaded){process[_0x9aac94(0xb7)]({'telegrammsg':_0x9aac94(0xca)},_0x4684e6=>{});return;}let _0x5a9088='';if(config['showname'])_0x5a9088=_0x9aac94(0x234)+config['botname']+_0x9aac94(0x1c9);else _0x5a9088='<b>Bot\x20'+botID+_0x9aac94(0x1c9);_0x5a9088+=_0x9aac94(0x134),_0x5a9088+=_0x9aac94(0x1a4),_0x5a9088+=_0x9aac94(0xce),_0x5a9088+=_0x9aac94(0x1a4),currentCoins['forEach'](_0xf4cad0=>{const _0x4f8b9a=_0x9aac94;_0x5a9088+=_0xf4cad0[_0x4f8b9a(0x17b)][_0x4f8b9a(0x10e)](0x7)+'|\x20'+formatPad(_0xf4cad0['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xf4cad0['target'],0x2,0x6)+'|\x20'+formatPad(_0xf4cad0[_0x4f8b9a(0x1b5)]*0x64,0x2,0x6)+'\x0a';}),_0x5a9088+=_0x9aac94(0x16e),process[_0x9aac94(0xb7)]({'telegrammsg':_0x5a9088},_0x135ea1=>{});}function formatPad(_0x31fabc,_0x50133e,_0x4072b1){const _0x2e39d8=_0x1488c4,_0x5e0d5e=formatResultString(_0x31fabc,_0x50133e);return _0x5e0d5e?_0x5e0d5e[_0x2e39d8(0xd2)](_0x4072b1):''[_0x2e39d8(0xd2)](_0x4072b1);}function logHistory(_0x103dcd,_0x56d28b,_0x12d24f=''){const _0x5afe7c=_0x1488c4;let _0x145b7f={'time':getTimeStamp(),'type':_0x103dcd,'event':_0x56d28b};dbLogs[_0x5afe7c(0x1a8)](_0x5afe7c(0x1e5))['push'](_0x145b7f)[_0x5afe7c(0x144)]();if(_0x12d24f=='')_0x12d24f=_0x56d28b;proxyEmit(_0x5afe7c(0x1a2),{'log':_0x145b7f,'summary':_0x12d24f}),process['send']({'telegram':{..._0x145b7f,'botname':config['botname'],'showname':config[_0x5afe7c(0x156)]}},_0x2878a0=>{}),logger[_0x5afe7c(0x123)](''+_0x145b7f[_0x5afe7c(0x1a2)]);}function emitHistory(_0x48b4c9={}){const _0x427835=_0x1488c4;Object[_0x427835(0xf0)](_0x48b4c9)[_0x427835(0x1cf)]==0x0&&(_0x48b4c9={'type':[_0x427835(0x1f4),_0x427835(0x1a2)],'event':'','page':0x1});if(_0x48b4c9['type'][_0x427835(0x13b)](_0x427835(0x1a2)))_0x48b4c9[_0x427835(0x1b1)][_0x427835(0x18d)](_0x48b4c9[_0x427835(0x1b1)][_0x427835(0x1de)]('event'),0x1,_0x427835(0x133),_0x427835(0xbe),_0x427835(0x1b7));if(dbLogs[_0x427835(0xf6)](_0x427835(0x1e5))[_0x427835(0xb4)]()){let _0x13041d=dbLogs['get'](_0x427835(0x1e5))['filter'](_0x5a2eb1=>{const _0x3a3372=_0x427835;if(_0x48b4c9[_0x3a3372(0x1b1)]['length']==0x0)return![];else return _0x48b4c9[_0x3a3372(0x1b1)][_0x3a3372(0x13b)](_0x5a2eb1[_0x3a3372(0x1b1)]);})[_0x427835(0x1ec)](_0x2f9897=>{const _0x26f671=_0x427835;if(_0x48b4c9['event']=='')return!![];else return _0x2f9897[_0x26f671(0x1a2)][_0x26f671(0x14b)]()[_0x26f671(0x13b)](_0x48b4c9[_0x26f671(0x1a2)][_0x26f671(0x14b)]());})[_0x427835(0x116)]('time'),_0xba6bea=_0x13041d['value']()[_0x427835(0x1cf)];_0x13041d=_0x13041d['reverse']()['slice']((_0x48b4c9[_0x427835(0x1d3)]-0x1)*logPageSize,_0x48b4c9['page']*logPageSize-0x1)['reverse']()[_0x427835(0xb4)](),proxyEmit(_0x427835(0x12a),{'logs':_0x13041d,'total':_0xba6bea});}else proxyEmit(_0x427835(0x12a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x29bdd5){const _0x142a35=_0x1488c4;if(dbLogs[_0x142a35(0xf6)](_0x142a35(0x1e5))[_0x142a35(0xb4)]()){const _0x3c4298=dbLogs[_0x142a35(0x1a8)](_0x142a35(0x1e5))[_0x142a35(0x116)](_0x142a35(0x166))[_0x142a35(0x1ec)](_0x2a8b84=>{const _0x36e48d=_0x142a35;return _0x2a8b84[_0x36e48d(0x1b1)]==_0x36e48d(0x1f4);})[_0x142a35(0xb4)]();dbLogs['get']('logs')[_0x142a35(0x206)]()[_0x142a35(0x144)](),dbLogs['get']('logs')[_0x142a35(0x110)](_0x3c4298)[_0x142a35(0x144)](),emitHistory(_0x29bdd5);}}async function pauseBot(_0x364771=''){const _0x17ba22=_0x1488c4,_0x289570=new Date()[_0x17ba22(0x106)]();if(!lastErrorShown||_0x289570-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x289570;!lastBotPause?(lastBotPause=_0x289570,consecutivePauses=0x1):(_0x289570-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x17ba22(0xb7)]({'stop':_0x17ba22(0xd4)},_0x2aca34=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x364771)_0x364771+=_0x17ba22(0x20a);logHistory(_0x17ba22(0x133),_0x364771+_0x17ba22(0x196)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5e0368=_0x1488c4;process[_0x5e0368(0xb7)]({'stop':_0x5e0368(0x15c)},_0x37dbc8=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x443960,_0x41d935){const _0x15e722=_0x1488c4;if(_0x443960['toString']()[_0x15e722(0x13b)](_0x15e722(0x193)))return logHistory('error',config[_0x15e722(0xbc)]+_0x15e722(0xe5)),![];else{if(_0x443960['toString']()[_0x15e722(0x13b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',config['exchange']+_0x15e722(0xbb)),![];else{if(_0x443960['toString']()[_0x15e722(0x13b)](_0x15e722(0x19f)))return logHistory(_0x15e722(0x133),config[_0x15e722(0xbc)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x15e722(0x133),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x443960,_0x41d935);}}}async function handleError(_0x4a1ec3,_0x5978b0,_0x1f4f01=''){const _0x422b7b=_0x1488c4,_0x3b0975=config['exchange']||_0x422b7b(0xbd);if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x198))||_0x4a1ec3['toString']()['includes'](_0x422b7b(0x128)))await pauseBot(config[_0x422b7b(0xbc)]+_0x422b7b(0x120));else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x127))||_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x1e2)))await pauseBot(config[_0x422b7b(0xbc)]+_0x422b7b(0x159));else{if(_0x4a1ec3['toString']()['includes'](_0x422b7b(0x232)))await pauseBot(config['exchange']+_0x422b7b(0x14c));else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x21a)))await pauseBot(config[_0x422b7b(0xbc)]+'\x20closed\x20the\x20connection');else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x205)))logHistory(_0x422b7b(0x133),_0x5978b0+_0x422b7b(0x20f)),logHistory(_0x422b7b(0x133),_0x422b7b(0x1f9)),await killBot();else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)]('InvalidNonce'))logHistory(_0x422b7b(0x133),_0x5978b0+_0x422b7b(0x23a)),logHistory(_0x422b7b(0x133),_0x422b7b(0x1f9)),await killBot();else{if(_0x4a1ec3 instanceof ccxt[_0x422b7b(0x181)])logger['debug'](_0x422b7b(0xe6),_0x4a1ec3),await pauseBot(config[_0x422b7b(0xbc)]+'\x20network\x20error');else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x193)))logHistory(_0x422b7b(0x133),_0x5978b0+'\x20|\x20'+config[_0x422b7b(0xbc)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x422b7b(0x133),_0x422b7b(0x1f9)),await killBot();else{if(_0x4a1ec3[_0x422b7b(0x10f)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x422b7b(0x133),_0x5978b0+'\x20|\x20'+config[_0x422b7b(0xbc)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x422b7b(0x133),_0x422b7b(0x1f9)),await killBot();else{if(_0x4a1ec3['toString']()[_0x422b7b(0x13b)](_0x422b7b(0x19f)))logHistory(_0x422b7b(0x133),_0x5978b0+_0x422b7b(0x20a)+config[_0x422b7b(0xbc)]+_0x422b7b(0xfb)),logHistory(_0x422b7b(0x133),_0x422b7b(0x1f9)),await killBot();else{if(_0x4a1ec3[_0x422b7b(0x10f)]()[_0x422b7b(0x13b)](_0x422b7b(0x171)))logHistory(_0x422b7b(0x133),_0x5978b0+_0x422b7b(0x188)+_0x1f4f01);else _0x4a1ec3 instanceof ccxt['ExchangeError']?(logger[_0x422b7b(0x17d)]('Uncaught\x20ExchangeError:',_0x4a1ec3),logHistory(_0x422b7b(0x133),_0x5978b0+_0x422b7b(0x20a)+config[_0x422b7b(0xbc)]+'\x20exchange\x20error')):(logger[_0x422b7b(0x123)](_0x5978b0+_0x422b7b(0x1bd),_0x4a1ec3),await pauseBot(_0x422b7b(0x100)));}}}}}}}}}}}function formatResult(_0x3589ca,_0xa01f50){return parseFloat(_0x3589ca['toFixed'](_0xa01f50));}function formatResultTruncate(_0x5561a5,_0x483e6f){const _0x2b4906=_0x1488c4;let _0x4c0b63=formatResultString(_0x5561a5,0xa),_0x1daacf=_0x4c0b63[_0x2b4906(0x1de)]('.');return _0x1daacf!=-0x1&&(_0x4c0b63=_0x4c0b63['slice'](0x0,_0x1daacf+_0x483e6f+0x1)),Number(_0x4c0b63);}function formatResultString(_0x3171eb,_0x24d99a){const _0x3c912c=_0x1488c4;let _0x38e620;if(!(''+_0x3171eb)[_0x3c912c(0x13b)]('e'))_0x38e620=+(Math['round'](_0x3171eb+'e+'+_0x24d99a)+'e-'+_0x24d99a);else{let _0x10fe9a=(''+_0x3171eb)['split']('e'),_0x5a7238='';+_0x10fe9a[0x1]+_0x24d99a>0x0&&(_0x5a7238='+'),_0x38e620=+(Math[_0x3c912c(0x1a3)](+_0x10fe9a[0x0]+'e'+_0x5a7238+(+_0x10fe9a[0x1]+_0x24d99a))+'e-'+_0x24d99a);}return Number(_0x38e620)['toFixed'](_0x24d99a);}function getServerTime(){const _0x52efb6=_0x1488c4,_0x115c4a=new Date();return _0x115c4a['getFullYear']()+'/'+(_0x115c4a[_0x52efb6(0x1d6)]()+0x1)['toString']()[_0x52efb6(0xd2)](0x2,'0')+'/'+_0x115c4a[_0x52efb6(0xf7)]()['toString']()[_0x52efb6(0xd2)](0x2,'0')+'\x20'+_0x115c4a['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x115c4a[_0x52efb6(0x1ba)]()[_0x52efb6(0x10f)]()[_0x52efb6(0xd2)](0x2,'0')+':'+_0x115c4a[_0x52efb6(0x186)]()[_0x52efb6(0x10f)]()[_0x52efb6(0xd2)](0x2,'0');}function getTimeStamp(){const _0x4ce261=_0x1488c4,_0x48858e=shiftedTime();return _0x48858e['getFullYear']()+'/'+(_0x48858e[_0x4ce261(0x1d6)]()+0x1)[_0x4ce261(0x10f)]()[_0x4ce261(0xd2)](0x2,'0')+'/'+_0x48858e[_0x4ce261(0xf7)]()['toString']()[_0x4ce261(0xd2)](0x2,'0')+'\x20'+_0x48858e[_0x4ce261(0x1f1)]()['toString']()[_0x4ce261(0xd2)](0x2,'0')+':'+_0x48858e['getMinutes']()['toString']()[_0x4ce261(0xd2)](0x2,'0')+':'+_0x48858e[_0x4ce261(0x186)]()[_0x4ce261(0x10f)]()[_0x4ce261(0xd2)](0x2,'0');}function getDate(){const _0x611e6b=_0x1488c4,_0x214b95=shiftedTime();return _0x214b95[_0x611e6b(0xc8)]()+'/'+(_0x214b95[_0x611e6b(0x1d6)]()+0x1)[_0x611e6b(0x10f)]()[_0x611e6b(0xd2)](0x2,'0')+'/'+_0x214b95[_0x611e6b(0xf7)]()[_0x611e6b(0x10f)]()[_0x611e6b(0xd2)](0x2,'0');}function getHour(){const _0x4b9793=_0x1488c4,_0x91557d=shiftedTime();return _0x91557d[_0x4b9793(0x1f1)]()[_0x4b9793(0x10f)]()[_0x4b9793(0xd2)](0x2,'0');}function sleep(_0xb66110){return new Promise(_0xa93b6c=>setTimeout(_0xa93b6c,_0xb66110));}function shiftedTime(){const _0x4eaa0a=_0x1488c4,_0xb65758=new Date();let _0x444052=_0xb65758;if(config&&config[_0x4eaa0a(0xff)]!==0x0)_0x444052=fns[_0x4eaa0a(0x15e)](_0xb65758,{'hours':config[_0x4eaa0a(0xff)]});return _0x444052;}function timer(_0x34d78a){const _0x54f8e6=_0x1488c4,_0x28f71d=new Date();!lasttime?console[_0x54f8e6(0x1e0)](getTimeStamp()+':\x20timer\x20>',_0x34d78a,_0x28f71d):console[_0x54f8e6(0x1e0)](getTimeStamp()+_0x54f8e6(0x14f),_0x34d78a,(_0x28f71d-lasttime)/0x3e8),lasttime=_0x28f71d;}