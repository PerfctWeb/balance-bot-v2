const _0x30c2d2=_0x47f4;function _0x27b0(){const _0x15600f=['Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ticker','-results.json','date','open','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','133KtBAeQ','format','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','mkdirSync','\x20>\x20[DEBUG]\x20','sort','bb-settings.json','emojibuy','\x20exchange','botname','side','deleteHistoryAlerts','startsWith','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20|\x20','max','cloneDeep','toggleBotMode','sortBy',':\x20timer\x20>','\x20:\x20','2.5.0','usd','eur','restart','getHours','Exchange','\x20network\x20error','offset','defaults','active','sha256','BUSD','coins','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','-events.json','-performance.json','2\x20-\x20Validate\x20orders:\x20','initial','price','buys','ETH','orderId','2.3.5','yyyy/MM/dd','10yNzpyG','date-fns','apply','target','619515mrrINV','Order(s)\x20not\x20validated\x20after\x20','headless','\x20|\x20highest\x20fee:\x20','Crypt','getSeconds','exchange\x20reloaded','***','realized','Huobipro','************','Cex','customId','cost','running','LOCKED','market','emitHistory','Huobi','average','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','yyyy-MM-dd\x27T\x27HH:mm:ss','none','\x20|\x20lock\x20orders:\x20','BNB','freeze','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','removed','recreate','join','startdate','basecoin','Net\x20','timestamp','Bybit','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','function','./logs/','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','enabled','Cryptocom','starting-balances','forEach','distribution','Transaction\x20detection\x20blocked','ExchangeNotAvailable','\x20not\x20available','trade','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','getOpenOrders()','openOrders','<pre>','428840WfuRNz','-config.json','Unknown\x20error\x20occured','USD','001','push','kill','RSA-OAEP','final','remainingSymbols','RequestTimeout','assign','Loading\x20completed','last','sell','getCoins()','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','amount','recovery','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','performance','error','splice','argv','-------------------------------\x0a','/backup/','</pre>','replace','event','exchanges','shift','fetchTicker','Invalid\x20API\x20key\x20or\x20secret\x20entered','write','fee','timeshift','datetime',',\x20must\x20be\x20a\x203\x20digit\x20number','findIndex','success','exchange','API-key\x20format\x20invalid','buy','storeHeadless','Market','apiPassword','limit-high','getAllOrders()','excluded','watchOrders','canceled','balances','unlinkSync','Waited\x20','close','warning','hybrid-crypto-js','Limit\x20(high-margin)','substring','differenceInSeconds','getFullYear','InvalidOrder','log','coin-loading-progress','909322BkeUwL','storeConfiguration','Invalid\x20symbol:\x20','.json','has',':\x20Bot\x20','configuration','USDP','search','\x20-\x20bot\x20not\x20started','\x20orders\x20in\x20less\x20than\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','pro','added','string','3785250IKjVec','Uncaught\x20Exception:','apiKey','type','apiSecret','value','remove','highest','Transaction\x20detection\x20unblocked','timeout','sendPortfolioTelegram','/EUR','test','/output-000.log','number','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','map','watchTrades()','bots','lowdb','getDate','slice','total','initclient','<b>Bot\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','find','2703308tuMSJv','symbol','change','loadSymbols()','fetchClosedOrders','bb-secure.json','bot','exchange\x20not\x20reloaded','\x20hour','time','ongoing','message','createOrder','fetchOpenOrders','padEnd','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','1890690SXRemo','rightTxt','sells','Error:\x20Invalid\x20argument\x20','includes','USDT','keys','fromCodePoint','\x20closed\x20the\x20connection','yargs/yargs','UNLOCKED','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','2\x20-\x20Orders\x20unlocked','placeOrder()','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','toLowerCase','NetworkError','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','breakeven','No\x20more\x20open\x20orders\x20-\x20','reverse','red_yellow_blue','cancel','full','RateLimitExceeded','fetchTickers()','(((.+)+)+)+$','recent20','watchTransactions()','\x20value','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Order\x20amount\x20is\x20invalid:\x20','fetchBalance','Headless:\x20','change24h','Unfilled\x20order(s)\x20canceled\x20after\x20','writeFile','orderstatus','delta','version','\x20metrics:</b>\x20\x0a\x0a','Binance','<b>','round','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','TUSD','1\x20-\x20Validate\x20orders:\x20','getMonth','stringify','get','\x20exchange\x20error','isEqual','starting-balance-','onepagemode','fiat','privateKey','Avoiding\x20continuous\x20order\x20attempts','debug','createWriteStream','milliseconds','Order\x20filled:\x20','resetHistory','Fee\x20discount\x20refund\x20detected:\x20','min','order','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchTickers','ID:\x20','abs','EUR','netoffset','Portfolio\x20change\x20detected:\x20','ask','\x20>\x20','BNB/','/USD','loadMarkets','\x20|\x20exchange:\x20','Error\x20details:','liquidity','exec','set','currency','data','2XppIuy','\x20minutes\x20-\x20','page','constructor','limits','ordertype','InsufficientFunds','percentage','%\x20(','showConfig','event-history','bot-','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','getPortfolio(2)','\x20order:\x20','coin','decrypt','\x20|\x20Custom\x20ID:\x20','BTC','spot','send','indexOf','net-basecoin','parse','existsSync','lowdb/adapters/FileSync','portfolio','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','uncaughtException','basecoinvalue','leftTxt','Resetting\x20coin\x20results:\x20','startnumber','args','no\x20open\x20orders','2\x20-\x20Handled\x20open\x20orders','fees','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','changes','length','secure','status','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20/\x20','startprice','limit','valid','placeOrder','ExchangeError','\x20-\x20pausing\x20bot\x20for\x20','showname','loading-canceled','Initializing\x20coin\x20results','logs','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','storeFiat','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Error\x20while\x20deleting\x20files:\x20','threshold','getStartingBalances','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','watchTrades','colorscheme','cancelOrder','getMinutes','ORDERS.UNLOCKING','filled','toFixed','1\x20-\x20FILLED\x20known\x20order:\x20','24228873eJSGSy','\x20minutes','Failed\x20to\x20load\x20coin\x20data\x20for\x20','AuthenticationError','net-fiat','Net\x20effect','\x20not\x20responding','0\x20-\x20EXECUTION:\x20','Exception\x20thrown\x20in\x20','toString','cooldown','closed','emojisell','padStart','filter','entries','split','autoliquidity','USDC','parseISO','getCoinNumber()','Bitget','Limit\x20(low-margin)'];_0x27b0=function(){return _0x15600f;};return _0x27b0();}(function(_0x2ad39d,_0x271361){const _0x8a550e=_0x47f4,_0x508c78=_0x2ad39d();while(!![]){try{const _0x3f17b8=-parseInt(_0x8a550e(0x12f))/0x1+parseInt(_0x8a550e(0x1be))/0x2*(parseInt(_0x8a550e(0xbb))/0x3)+-parseInt(_0x8a550e(0x15a))/0x4+-parseInt(_0x8a550e(0x16a))/0x5+parseInt(_0x8a550e(0x13e))/0x6+-parseInt(_0x8a550e(0x89))/0x7*(parseInt(_0x8a550e(0xef))/0x8)+-parseInt(_0x8a550e(0x203))/0x9*(-parseInt(_0x8a550e(0xb7))/0xa);if(_0x3f17b8===_0x271361)break;else _0x508c78['push'](_0x508c78['shift']());}catch(_0x2fa075){_0x508c78['push'](_0x508c78['shift']());}}}(_0x27b0,0x85b6f));const _0x462c4a=function(){let _0x18f714=!![];return function(_0xd3b51f,_0x191575){const _0x35affa=_0x18f714?function(){const _0x2daae2=_0x47f4;if(_0x191575){const _0x443858=_0x191575[_0x2daae2(0xb9)](_0xd3b51f,arguments);return _0x191575=null,_0x443858;}}:function(){};return _0x18f714=![],_0x35affa;};}(),_0x4b1dcf=_0x462c4a(this,function(){const _0x27a2ed=_0x47f4;return _0x4b1dcf[_0x27a2ed(0x75)]()[_0x27a2ed(0x137)](_0x27a2ed(0x184))[_0x27a2ed(0x75)]()[_0x27a2ed(0x1c1)](_0x4b1dcf)[_0x27a2ed(0x137)]('(((.+)+)+)+$');});_0x4b1dcf();'use strict';const ccxt=require('ccxt'),low=require(_0x30c2d2(0x151)),FileSync=require(_0x30c2d2(0x1d7)),fs=require('fs'),fns=require(_0x30c2d2(0xb8)),Crypt=require(_0x30c2d2(0x127))[_0x30c2d2(0xbf)],util=require('util'),argv=require(_0x30c2d2(0x173))(process[_0x30c2d2(0x106)]['slice'](0x2))[_0x30c2d2(0x106)],path=require('path');let exchange;global[_0x30c2d2(0x84)]={},global[_0x30c2d2(0x15c)]={};const usdBasecoins=[_0x30c2d2(0xf2),_0x30c2d2(0xa9),_0x30c2d2(0x197),_0x30c2d2(0x16f),_0x30c2d2(0x7e),_0x30c2d2(0x136)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x30c2d2(0xd4)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x30c2d2(0x174)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x30c2d2(0x1ef)+pauseBotInterval/0xea60+_0x30c2d2(0x204),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')['version'],botID=process['argv'][0x2]||_0x30c2d2(0xf3),pattern=/^[0-9]{3}$/;!pattern[_0x30c2d2(0x14a)](botID)&&(console[_0x30c2d2(0x12d)](_0x30c2d2(0x16d)+botID+_0x30c2d2(0x114)),killBot());const userID=process[_0x30c2d2(0x106)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0x30c2d2(0xe0),loggerfile=fs[_0x30c2d2(0x1a4)](logspath+_0x30c2d2(0x14b),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x30c2d2(0x8c)](configpath);!fs[_0x30c2d2(0x1d6)](logspath)&&fs[_0x30c2d2(0x8c)](logspath);const configfile=configpath+_0x30c2d2(0x1c9)+botID+_0x30c2d2(0xf0),logfile=configpath+'bot-'+botID+_0x30c2d2(0xad),performancefile=configpath+_0x30c2d2(0x1c9)+botID+_0x30c2d2(0xae),coinresultsfile=configpath+_0x30c2d2(0x1c9)+botID+_0x30c2d2(0x85),settingsfile=configpath+_0x30c2d2(0x8f),securefile=configpath+_0x30c2d2(0x15f),configbackuppath=configpath+_0x30c2d2(0x108),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x30c2d2(0xa6)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x30c2d2(0xa6)]({'data':[],'version':serverversion})[_0x30c2d2(0x110)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x30c2d2(0xa6)]({'bot':[],'version':serverversion})[_0x30c2d2(0x110)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x30c2d2(0xa6)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x30c2d2(0xa8),'rsaStandard':_0x30c2d2(0xf6)});let settings=getSettings(),secure=getSecure();function _0x47f4(_0x1580f9,_0x100307){const _0x5dd8df=_0x27b0();return _0x47f4=function(_0x4b1dcf,_0x462c4a){_0x4b1dcf=_0x4b1dcf-0x6f;let _0x27b0ca=_0x5dd8df[_0x4b1dcf];return _0x27b0ca;},_0x47f4(_0x1580f9,_0x100307);}oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x179461=>{const _0x36a709=_0x30c2d2;console[_0x36a709(0x12d)](_0x179461);},'simple':_0x122b77=>{const _0x425cd7=_0x30c2d2;console['log'](_0x122b77),loggerfile[_0x425cd7(0x110)](util[_0x425cd7(0x8a)](_0x122b77)+'\x0a');},'full':async(_0xa1d1e4,_0x4b39b0='')=>{const _0xb086b0=_0x30c2d2;let _0x4c286e;if(config[_0xb086b0(0x1f0)])_0x4c286e=getTimeStamp()+':\x20'+config[_0xb086b0(0x92)]+'\x20>\x20'+_0xa1d1e4;else _0x4c286e=getTimeStamp()+_0xb086b0(0x134)+botID+_0xb086b0(0x1b3)+_0xa1d1e4;console[_0xb086b0(0x12d)](_0x4c286e),loggerfile[_0xb086b0(0x110)](util[_0xb086b0(0x8a)](_0x4c286e)+'\x0a'),_0x4b39b0&&(console[_0xb086b0(0x12d)](_0x4b39b0),loggerfile[_0xb086b0(0x110)](util[_0xb086b0(0x8a)](_0x4b39b0)+'\x0a'));},'debug':async(_0x2f7d8a,_0x358c15='')=>{const _0x15e4a4=_0x30c2d2;let _0x5ba876;if(config[_0x15e4a4(0x1f0)])_0x5ba876=getTimeStamp()+':\x20'+config['botname']+_0x15e4a4(0x8d)+_0x2f7d8a;else _0x5ba876=getTimeStamp()+_0x15e4a4(0x134)+botID+_0x15e4a4(0x8d)+_0x2f7d8a;if(debugging)console[_0x15e4a4(0x12d)](_0x5ba876);loggerfile[_0x15e4a4(0x110)](util[_0x15e4a4(0x8a)](_0x5ba876)+'\x0a');if(_0x358c15){if(debugging)console[_0x15e4a4(0x12d)](_0x358c15);loggerfile['write'](util[_0x15e4a4(0x8a)](_0x358c15)+'\x0a');}}};process['on'](_0x30c2d2(0x1da),function(_0x390e31){const _0x3e39ca=_0x30c2d2;logHistory(_0x3e39ca(0x104),_0x3e39ca(0xab)),logger[_0x3e39ca(0x1a3)](_0x3e39ca(0x13f),_0x390e31);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config[_0x30c2d2(0x19f)]&&updateOnepagemode(settings[_0x30c2d2(0x19f)]);process[_0x30c2d2(0x1d2)]({'started':_0x30c2d2(0xc9)},_0x2187c2=>{}),initializeProcessListeners();function proxyEmit(_0x4b1cfc,_0x1d33aa=null){process['send']({'function':_0x4b1cfc,'args':_0x1d33aa},_0x570ce0=>{});}function initializeProcessListeners(){const _0xd396dd=_0x30c2d2;process['on'](_0xd396dd(0x165),_0xe2ffba=>{const _0x5933f3=_0xd396dd;switch(Object[_0x5933f3(0x170)](_0xe2ffba)[0x0]){case'timeshift':_0xe2ffba[_0x5933f3(0x112)]!=undefined&&(settings['timeshift']=_0xe2ffba[_0x5933f3(0x112)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0xe2ffba['onepagemode']!=undefined&&(settings['onepagemode']=_0xe2ffba['onepagemode'],updateOnepagemode(settings[_0x5933f3(0x19f)]));break;case _0x5933f3(0x150):_0xe2ffba['bots']!=undefined&&(bots=JSON[_0x5933f3(0x1d5)](_0xe2ffba[_0x5933f3(0x150)]),proxyEmit(_0x5933f3(0x150),bots));break;case _0x5933f3(0xdf):switch(_0xe2ffba[_0x5933f3(0xdf)]){case _0x5933f3(0x155):initclient();break;case _0x5933f3(0x9a):toggleBotMode();break;case _0x5933f3(0xcc):emitHistory(_0xe2ffba[_0x5933f3(0x1df)]);break;case _0x5933f3(0x94):deleteHistoryAlerts(_0xe2ffba[_0x5933f3(0x1df)]);break;case'getPortfolio':getPortfolio(_0xe2ffba[_0x5933f3(0x1df)]);break;case _0x5933f3(0x130):storeConfiguration(_0xe2ffba['args']);break;case _0x5933f3(0x11a):storeHeadless(_0xe2ffba[_0x5933f3(0x1df)]);break;case _0x5933f3(0x1f5):storeFiat(_0xe2ffba[_0x5933f3(0x1df)]);break;case _0x5933f3(0x1a7):resetHistory();break;case _0x5933f3(0x1f9):getStartingBalances(getNormalizedPerformance());break;case _0x5933f3(0x1ed):placeOrder(_0xe2ffba[_0x5933f3(0x1df)]);break;case'cancelLoading':cancelLoading();break;case _0x5933f3(0x1c7):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x5933f3(0x148):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x244ed7=![]){const _0x54e071=_0x30c2d2;logger[_0x54e071(0x1a3)]('Reset\x20|\x20'+(_0x244ed7?_0x54e071(0xc1):_0x54e071(0x161))+_0x54e071(0x1b7)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x244ed7)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x54e071(0xc2)){loadingProgress=0x0;if(_0x244ed7){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2395d0){handleErrorNoStop(_0x2395d0,_0x54e071(0x15d));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x507f22=await getCoins();[currentCoins,currentCoinsAll]=_0x507f22,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x54e071(0x1a3)](_0x54e071(0xfb)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x54e071(0x1e5)]==0x0&&allOpenOrders[_0x54e071(0x1e5)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x266b9b=_0x30c2d2;exchangeStopped=!![];try{await exchange[_0x266b9b(0x125)]();}catch(_0x9111c8){await handleError(_0x9111c8,'stopExchange()');}}async function reloadExchange(){const _0x10e38c=_0x30c2d2;while(lockOrders!=ORDERS[_0x10e38c(0x174)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x10e38c(0x1a3)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1f1422=config['exchange'],_0x5abc32=config['apiKey'],_0x4ae36e=config['apiSecret'],_0x12041a=config[_0x30c2d2(0x11c)]){const _0x5c0729=_0x30c2d2;exchange&&await stopExchange();!supportedExchanges()[_0x5c0729(0x16e)](_0x1f1422)&&(logHistory('error',_0x5c0729(0x13a)+_0x1f1422+_0x5c0729(0x91)),killBot());const _0x168d64=ccxt[_0x5c0729(0x13b)][_0x1f1422[_0x5c0729(0x179)]()];exchange=new _0x168d64({'apiKey':_0x5abc32,'secret':_0x4ae36e,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5c0729(0x1d1)}});if(_0x12041a)exchange['password']=_0x12041a;}function setStableCoins(){const _0x5c9e83=_0x30c2d2;let _0x5213c5=config[_0x5c9e83(0xda)]==_0x5c9e83(0xb3)?_0x5c9e83(0xb3):_0x5c9e83(0x1d0),_0x315579=!allSymbols['includes'](_0x5213c5+_0x5c9e83(0x1b5))?_0x5c9e83(0x16f):'USD',_0x559a37=!allSymbols[_0x5c9e83(0x16e)](_0x5213c5+_0x5c9e83(0x149))?_0x315579:_0x5c9e83(0x1af);stablecoins={'eur':{'coin':''+_0x5213c5+_0x559a37,'symbol':_0x5213c5+'/'+_0x559a37},'usd':{'coin':''+_0x5213c5+_0x315579,'symbol':_0x5213c5+'/'+_0x315579}};}async function initwsCcxt(){const _0x19a2fe=_0x30c2d2;initCycle++;const _0x5d31b1=initCycle;let _0x2b74ed=[];config['portfolio']['forEach'](_0x44b9e0=>{const _0x48d8b3=_0x47f4;if(!_0x44b9e0['excluded']&&_0x44b9e0['coin']!=config['basecoin'])_0x2b74ed[_0x48d8b3(0xf4)](_0x44b9e0[_0x48d8b3(0x15b)]);});if(!_0x2b74ed[_0x19a2fe(0x16e)](stablecoins[_0x19a2fe(0xa0)][_0x19a2fe(0x15b)]))_0x2b74ed[_0x19a2fe(0xf4)](stablecoins[_0x19a2fe(0xa0)][_0x19a2fe(0x15b)]);if(!_0x2b74ed[_0x19a2fe(0x16e)](stablecoins['usd'][_0x19a2fe(0x15b)]))_0x2b74ed['push'](stablecoins[_0x19a2fe(0x9f)]['symbol']);if(config[_0x19a2fe(0x117)][_0x19a2fe(0x95)](_0x19a2fe(0x193))){if(!_0x2b74ed[_0x19a2fe(0x16e)]('BNB/'+config[_0x19a2fe(0xda)]))_0x2b74ed[_0x19a2fe(0xf4)](_0x19a2fe(0x1b4)+config['basecoin']);}loadCoins(_0x2b74ed),_0x2b74ed=validateSymbols(_0x2b74ed);const _0x48c3bb=async _0x5bc7f6=>{const _0xd3f8cd=_0x19a2fe;let _0x4f4f97;try{const _0xd67c44=await getTickers(_0x5bc7f6);Object[_0xd3f8cd(0x7b)](_0xd67c44)[_0xd3f8cd(0xe5)](_0x5cb7c9=>{const _0x3c9a9f=_0xd3f8cd;_0x4f4f97=_0x5cb7c9[0x1][_0x3c9a9f(0x15b)],global[_0x3c9a9f(0x84)][noslash(_0x4f4f97)]=_0x5cb7c9[0x1][_0x3c9a9f(0xfc)],global[_0x3c9a9f(0x15c)][_0x4f4f97]=_0x5cb7c9[0x1][_0x3c9a9f(0x1c5)];});}catch(_0x37752d){await handleError(_0x37752d,'initTickers()',_0x4f4f97);}},_0x51cbcf=async _0x5e1ecf=>{const _0x331609=_0x19a2fe;while(initCycle==_0x5d31b1){if(!botPaused)try{const _0x478aef=await exchange[_0x331609(0x1fb)](_0x5e1ecf);global[_0x331609(0x84)][noslash(_0x478aef[0x0][_0x331609(0x15b)])]=_0x478aef[0x0][_0x331609(0xb1)],await sleep(0x3e8);}catch(_0x382961){if(!exchangeStopped)await handleError(_0x382961,_0x331609(0x14f),_0x5e1ecf);}else await sleep(0x64);}},_0x5b8c63=async _0x59514a=>{const _0xbc3df2=_0x19a2fe;while(initCycle==_0x5d31b1){if(!botPaused){let _0x44f8df;try{await sleep(0x3c*0x3e8);const _0x35ff43=await getTickers(_0x59514a);Object[_0xbc3df2(0x7b)](_0x35ff43)[_0xbc3df2(0xe5)](_0x1cf425=>{const _0x290da3=_0xbc3df2;_0x44f8df=_0x1cf425[0x1][_0x290da3(0x15b)],global[_0x290da3(0x15c)][_0x44f8df]=_0x1cf425[0x1][_0x290da3(0x1c5)];});}catch(_0xdd5bbd){if(!exchangeStopped)await handleError(_0xdd5bbd,_0xbc3df2(0x183),_0x44f8df);}}else await sleep(0x64);}},_0x49c41d=async _0x214963=>{while(initCycle==_0x5d31b1){if(!botPaused)try{const _0x10dde3=await exchange['watchOrders'](_0x214963);initCycle==_0x5d31b1&&_0x10dde3['forEach'](_0x493dcb=>{updateNumberCoinsCcxt(_0x493dcb);});}catch(_0x3b975b){if(!exchangeStopped)await handleError(_0x3b975b,'watchOrders()');}else await sleep(0x64);}};_0x48c3bb(_0x2b74ed),_0x5b8c63(_0x2b74ed),_0x2b74ed['forEach'](_0x44c891=>{_0x51cbcf(_0x44c891),_0x49c41d(_0x44c891);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5f348c){const _0x3fe770=_0x30c2d2;let _0x11764e={};try{if(config[_0x3fe770(0x117)]!=_0x3fe770(0xe3))_0x11764e=await exchange['fetchTickers'](_0x5f348c);else for(const _0x2a6e4c of _0x5f348c){const _0x14b499=await exchange['fetchTicker'](_0x2a6e4c);_0x11764e[_0x2a6e4c]=_0x14b499;}return _0x11764e;}catch(_0xd1b953){throw _0xd1b953;}}async function watchTransactions(){const _0x4d9595=_0x30c2d2;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2475a4=await getCoins(),[_0x2a32da,_0x58c0dd]=_0x2475a4;let _0x40c155=[];currentCoins[_0x4d9595(0xe5)](_0x3cc5fa=>{const _0x4f99c8=_0x4d9595,_0x44d681=_0x2a32da[_0x4f99c8(0x159)](_0x2dded6=>_0x2dded6[_0x4f99c8(0x1cd)]==_0x3cc5fa[_0x4f99c8(0x1cd)]);if(_0x44d681){if(_0x3cc5fa[_0x4f99c8(0x14c)]!=_0x44d681[_0x4f99c8(0x14c)]){let _0x1aa128;if(_0x3cc5fa[_0x4f99c8(0x1cd)]!=config[_0x4f99c8(0xda)]){const _0x212637=global[_0x4f99c8(0x84)][noslash(_0x3cc5fa['symbol'])];_0x1aa128=_0x3cc5fa[_0x4f99c8(0x17e)]?0x1/_0x212637:_0x212637;}else _0x1aa128=0x1;_0x40c155[_0x4f99c8(0xf4)]({'coin':_0x3cc5fa[_0x4f99c8(0x1cd)],'symbol':_0x3cc5fa[_0x4f99c8(0x15b)],'price':_0x1aa128,'number':Number(formatResult(_0x44d681[_0x4f99c8(0x14c)]-_0x3cc5fa[_0x4f99c8(0x14c)],0x8)),'basecoinvalue':_0x1aa128*(_0x44d681[_0x4f99c8(0x14c)]-_0x3cc5fa['number'])});}}});if(_0x40c155[_0x4d9595(0x1e5)]==0x1&&!blockTransactionDetection){if(config[_0x4d9595(0x7d)]){logger[_0x4d9595(0x1a3)](_0x4d9595(0x196)+_0x40c155[0x0][_0x4d9595(0x1db)]+_0x4d9595(0xbe)+lastFees[_0x4d9595(0x145)]);if(lastFees[_0x4d9595(0x145)]==0x0||Math[_0x4d9595(0x1ae)](_0x40c155[0x0][_0x4d9595(0x1db)])>lastFees[_0x4d9595(0x145)]){delete _0x40c155[0x0]['symbol'],delete _0x40c155[0x0][_0x4d9595(0x1db)];let _0x5aafc2=[],_0x18931b=[...config['liquidity']]||[],_0xaa6c86=config[_0x4d9595(0x1b9)];_0x18931b['sort']((_0x2f38c6,_0x34ab40)=>_0x2f38c6['date']>_0x34ab40[_0x4d9595(0x86)]?-0x1:_0x34ab40[_0x4d9595(0x86)]>_0x2f38c6[_0x4d9595(0x86)]?0x1:0x0);const _0x1e7ce0=getDate();if(_0x18931b[0x0]){const _0x53a3c4=fns['parse'](_0x18931b[0x0][_0x4d9595(0x86)],_0x4d9595(0xb6),new Date()),_0x3a4462=fns[_0x4d9595(0x1d5)](_0x1e7ce0,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x53a3c4,_0x3a4462)){_0x5aafc2=_0x18931b[0x0][_0x4d9595(0x1e4)];const _0x362386=_0x5aafc2['find'](_0x5eeb10=>_0x5eeb10[_0x4d9595(0x1cd)]==_0x40c155[0x0][_0x4d9595(0x1cd)]);_0x362386?(_0x362386['number']+=_0x40c155[0x0][_0x4d9595(0x14c)],_0x362386[_0x4d9595(0x14c)]==0x0&&(_0x5aafc2=_0x5aafc2[_0x4d9595(0x7a)](_0x822329=>{return _0x822329['coin']!=_0x40c155[0x0]['coin'];}))):_0x5aafc2[_0x4d9595(0xf4)](_0x40c155[0x0]);const _0x4a18c0=_0xaa6c86[_0x4d9595(0x159)](_0x548ff5=>_0x548ff5[_0x4d9595(0x86)]==_0x1e7ce0);_0x4a18c0['changes']=_0x5aafc2;}else _0xaa6c86[_0x4d9595(0xf4)]({'date':_0x1e7ce0,'changes':[_0x40c155[0x0]]});}const _0x13c0ca=_0xaa6c86['find'](_0x37821d=>_0x37821d[_0x4d9595(0x86)]==_0x1e7ce0);if(_0x13c0ca){let _0x533b91=!![];_0x13c0ca['changes'][_0x4d9595(0xe5)](_0x4c5753=>{const _0x1bc12d=_0x4d9595;if(_0x4c5753[_0x1bc12d(0x14c)]!=0x0)_0x533b91=![];}),_0x533b91&&(_0xaa6c86=_0xaa6c86[_0x4d9595(0x7a)](_0x337a0a=>{return _0x337a0a['date']!=_0x1e7ce0;}));}let _0x39157d=dbConfig[_0x4d9595(0x19b)]('bot')[_0x4d9595(0x159)]({'botID':botID})[_0x4d9595(0x143)]();_0x39157d&&(dbConfig['get'](_0x4d9595(0x160))['find']({'botID':botID})[_0x4d9595(0xfa)]({'liquidity':_0xaa6c86})[_0x4d9595(0x110)](),config[_0x4d9595(0x1b9)]=_0xaa6c86),logHistory(_0x4d9595(0x116),_0x4d9595(0x1b1)+Math['abs'](_0x40c155[0x0]['number'])+'\x20'+_0x40c155[0x0][_0x4d9595(0x1cd)]+'\x20'+(_0x40c155[0x0][_0x4d9595(0x14c)]>0x0?'added':'removed')+_0x4d9595(0xeb)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x4d9595(0x1a3)](_0x4d9595(0x1a8)+Math[_0x4d9595(0x1ae)](_0x40c155[0x0][_0x4d9595(0x14c)])+'\x20'+_0x40c155[0x0][_0x4d9595(0x1cd)]+'\x20'+(_0x40c155[0x0][_0x4d9595(0x14c)]>0x0?_0x4d9595(0x13c):'removed'));transactionDetected=!![];}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x4d9595(0x1ae)](_0x40c155[0x0][_0x4d9595(0x14c)])+'\x20'+_0x40c155[0x0]['coin']+'\x20'+(_0x40c155[0x0][_0x4d9595(0x14c)]>0x0?_0x4d9595(0x13c):_0x4d9595(0xd6))+_0x4d9595(0x1fa));}currentCoins=_0x2a32da,currentCoinsAll=_0x58c0dd,await sleep(watchTransactionsInterval);}catch(_0x455dcc){if(!exchangeStopped)await handleError(_0x455dcc,_0x4d9595(0x186));}else await sleep(0x64);}}async function loadSymbols(){const _0x191669=_0x30c2d2;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x191669(0x7b)](markets)[_0x191669(0xe5)](_0x10f9f5=>{const _0x55cb0c=_0x191669;_0x10f9f5[0x1][_0x55cb0c(0xa7)]&&_0x10f9f5[0x1][_0x55cb0c(0x1d1)]&&allSymbols[_0x55cb0c(0xf4)](_0x10f9f5[0x0]);});}catch(_0x13226d){throw _0x13226d;}}function validateSymbols(_0x46fb3b){const _0xd21e02=_0x30c2d2;let _0x52efc5=[];return _0x46fb3b[_0xd21e02(0xe5)](_0x360148=>{const _0x4724a9=_0xd21e02;!allSymbols['includes'](_0x360148)?logHistory(_0x4724a9(0x104),_0x4724a9(0x131)+_0x360148+_0x4724a9(0x1ca)):_0x52efc5['push'](_0x360148);}),_0x52efc5;}async function initclient(){const _0x598d63=_0x30c2d2;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x598d63(0x10c),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x598d63(0x122),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xe5d980=getNormalizedPerformance();emitPerformance(_0xe5d980),getStartingBalances(_0xe5d980);}async function toggleBotMode(){const _0xd2085=_0x30c2d2;let _0x15deac=dbConfig[_0xd2085(0x19b)](_0xd2085(0x160))['find']({'botID':botID})[_0xd2085(0x143)]();if(_0x15deac){const _0x1c8f80=!_0x15deac[_0xd2085(0xbd)];dbConfig[_0xd2085(0x19b)]('bot')['find']({'botID':botID})[_0xd2085(0xfa)]({'headless':_0x1c8f80})[_0xd2085(0x110)](),config[_0xd2085(0xbd)]=_0x1c8f80,proxyEmit(_0xd2085(0x135),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x43eeae=_0x30c2d2;process[_0x43eeae(0x1d2)]({'updatebotmanager':!![]},_0x40e148=>{}),logger[_0x43eeae(0x1a3)](_0x43eeae(0x18b)+config[_0x43eeae(0xbd)]);}async function loadCoins(_0x276c04){const _0x278dd2=_0x30c2d2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x18cfa9,_0x12a1eb=0x0,_0x14b360=0x0;_0x276c04[_0x278dd2(0xe5)](_0x16b35e=>{const _0x168140=_0x278dd2;loading[_0x168140(0xf8)][_0x168140(0xf4)](_0x16b35e);}),loadingCanceled=![];let _0x1e3ec8=![];while(_0x18cfa9!=_0x276c04[_0x278dd2(0x1e5)]+maxLoadingProgress){_0x18cfa9=loadingProgress,_0x276c04['forEach'](_0xa11721=>{const _0xe72da7=_0x278dd2;if(global[_0xe72da7(0x84)][noslash(_0xa11721)]){loading['remainingSymbols']=loading['remainingSymbols']['filter'](_0x24d558=>_0x24d558!=_0xa11721);if(!watchedSymbols['includes'](_0xa11721))watchedSymbols[_0xe72da7(0xf4)](_0xa11721);_0x18cfa9++;}}),loading['progress']=Math[_0x278dd2(0x195)](_0x18cfa9/(_0x276c04[_0x278dd2(0x1e5)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x14b360>0x1e*0x5&&(loading[_0x278dd2(0x147)]=!![],emitLoadingProgress()),_0x14b360>0x78*0x5&&!_0x1e3ec8&&(_0x1e3ec8=!![],logHistory(_0x278dd2(0x104),_0x278dd2(0x205)+loading[_0x278dd2(0xf8)][_0x278dd2(0xd8)](',\x20')+_0x278dd2(0x138)),logHistory(_0x278dd2(0x104),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x278dd2(0xe1)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x42db09=_0x278dd2;process[_0x42db09(0x1d2)]({'stop':_0x42db09(0xa1)},_0xe7fa7a=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x278dd2(0x180)]=!![],emitLoadingProgress();break;}else _0x12a1eb!=loading['progress']&&(_0x12a1eb=loading['progress'],emitLoadingProgress()),_0x14b360++,await sleep(0xc8);}_0x18cfa9==_0x276c04[_0x278dd2(0x1e5)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x278dd2(0xe2),'live':_0x278dd2(0xc9)},_0x54400a=>{}),_0x1e3ec8&&logHistory(_0x278dd2(0x116),_0x278dd2(0xff)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1d5c42=_0x30c2d2;proxyEmit(_0x1d5c42(0x135),{...emittedConfiguration(),'configstate':_0x1d5c42(0x1f1)});}function emitLoadingProgress(){const _0x223e8a=_0x30c2d2;proxyEmit(_0x223e8a(0x12e),loading);}async function getFiat(){const _0x3dbac7=_0x30c2d2;let _0x23e007=global[_0x3dbac7(0x84)][stablecoins[_0x3dbac7(0xa0)]['coin']],_0x23141d=global[_0x3dbac7(0x84)][stablecoins[_0x3dbac7(0x9f)]['coin']];return{'eur':Number(_0x23e007),'usd':Number(_0x23141d)};}function capitalize(_0x34a1ec){const _0xc565b3=_0x30c2d2;return _0x34a1ec[_0xc565b3(0x129)](0x0,0x1)['toUpperCase']()+_0x34a1ec['substring'](0x1);}function supportedExchanges(){const _0x1568c2=_0x30c2d2,_0x586f6e=['ws',_0x1568c2(0x1ac),_0x1568c2(0x10e),'watchTrades',_0x1568c2(0x120),_0x1568c2(0x1fd),_0x1568c2(0x166),_0x1568c2(0x167),_0x1568c2(0x15e),_0x1568c2(0x18a)];let _0x1a7783=[],_0x1f21f5=[],_0xa24380=ccxt[_0x1568c2(0x13b)][_0x1568c2(0x10c)];_0xa24380[_0x1568c2(0xe5)](_0x26b0b9=>{const _0x454a5d=_0x1568c2;try{const _0x47dd90=new ccxt[(_0x454a5d(0x13b))][_0x26b0b9]();_0x1f21f5[_0x454a5d(0xf4)](_0x47dd90);}catch(_0x5ab0d3){}}),_0x1f21f5[_0x1568c2(0xe5)](_0x350f5c=>{const _0x2774d7=_0x1568c2;let _0x374bc9=0x0;_0x586f6e[_0x2774d7(0xe5)](_0x33e654=>{const _0x48d211=_0x2774d7;_0x33e654 in _0x350f5c[_0x48d211(0x133)]&&_0x350f5c[_0x48d211(0x133)][_0x33e654]&&_0x374bc9++;}),_0x374bc9==_0x586f6e[_0x2774d7(0x1e5)]&&_0x1a7783[_0x2774d7(0xf4)](capitalize(_0x350f5c['id']));});let _0x4b2c62=[];return _0xa24380[_0x1568c2(0xe5)](_0x4f3f6b=>{const _0x1ed2a0=_0x1568c2;_0x4f3f6b=capitalize(_0x4f3f6b);if(!_0x1a7783[_0x1ed2a0(0x16e)](_0x4f3f6b))_0x4b2c62[_0x1ed2a0(0xf4)](_0x4f3f6b);}),_0x1a7783;}function setStartDatePerformance(){const _0x4144ea=_0x30c2d2;if(config&&config['liquidity'][0x0]['changes'][_0x4144ea(0x1e5)]!=0x0){const _0x1d7d00=config[_0x4144ea(0x1b9)][0x0][_0x4144ea(0x1e4)];dbPerformance[_0x4144ea(0x19b)]('data')[_0x4144ea(0x159)]({'date':config[_0x4144ea(0xd9)]})[_0x4144ea(0xfa)]({'coins':_0x1d7d00})['write']();}}async function recreateCoinResults(){const _0x59a53a=_0x30c2d2;let _0x31e849,_0x3179d6=[];try{const _0x9ee2e3=fns['format'](fns[_0x59a53a(0x7f)](config['startdate']['replace'](/\//g,'-')),_0x59a53a(0xd0));for(const _0x182cf5 of currentCoins){if(_0x182cf5['coin']!=config[_0x59a53a(0xda)]){let _0x2688b7=0x0,_0x116337,_0x23c8b6;_0x31e849=await getAllEventOrders(_0x182cf5[_0x59a53a(0x15b)]);if(_0x31e849[_0x59a53a(0x1e5)]>0x0)_0x31e849[_0x59a53a(0xe5)](_0x3023e8=>{const _0xba143a=_0x59a53a,_0x9e9580=_0x182cf5[_0xba143a(0x15b)][_0xba143a(0x16e)](config[_0xba143a(0xda)]+'/');_0x3179d6[_0xba143a(0xf4)]({'datetime':_0x3023e8[_0xba143a(0x113)],'coin':_0x182cf5[_0xba143a(0x1cd)],'symbol':_0x182cf5[_0xba143a(0x15b)],'side':_0x3023e8[_0xba143a(0x93)],'reverse':_0x9e9580,'amount':formatResult(_0x3023e8[_0xba143a(0x200)],0x8),'filled':formatResult(_0x3023e8['filled'],0x8),'price':formatResult(_0x3023e8['price'],0x8)}),_0x2688b7=_0x3023e8[_0xba143a(0x93)]==_0xba143a(0x119)?_0x2688b7+_0x3023e8[_0xba143a(0x200)]:_0x2688b7-_0x3023e8[_0xba143a(0x200)];if(!_0x23c8b6)_0x23c8b6=_0x3023e8[_0xba143a(0xb1)];});_0x116337=_0x182cf5['number']-_0x2688b7;let _0x1d0df6;config['liquidity']['forEach'](_0x22f139=>{const _0x3bcc9f=_0x59a53a;!_0x1d0df6&&(_0x1d0df6=_0x22f139[_0x3bcc9f(0x1e4)][_0x3bcc9f(0x159)](_0x443635=>_0x443635[_0x3bcc9f(0x1cd)]==_0x182cf5[_0x3bcc9f(0x1cd)]),_0x1d0df6&&(_0x116337=_0x1d0df6[_0x3bcc9f(0x14c)],_0x23c8b6=_0x1d0df6[_0x3bcc9f(0xb1)]));});let _0x9e84a6=dbCoinResults[_0x59a53a(0x19b)](_0x59a53a(0xaa))[_0x59a53a(0x159)]({'coin':_0x182cf5[_0x59a53a(0x1cd)]})['value']();_0x9e84a6={'coin':_0x182cf5['coin'],'number':_0x116337,'breakeven':_0x23c8b6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x59a53a(0x19b)](_0x59a53a(0xaa))[_0x59a53a(0x159)]({'coin':_0x182cf5[_0x59a53a(0x1cd)]})[_0x59a53a(0xfa)](_0x9e84a6)[_0x59a53a(0x110)]();}}_0x3179d6[_0x59a53a(0x8e)]((_0x42beef,_0x15eeb7)=>_0x42beef[_0x59a53a(0x113)]>_0x15eeb7[_0x59a53a(0x113)]?0x1:_0x15eeb7['datetime']>_0x42beef[_0x59a53a(0x113)]?-0x1:0x0);let _0x4f3081=0x0;for(let _0x43e44e of _0x3179d6){await updateCoinResults(_0x43e44e,!![]);}}catch(_0x43f356){await handleError(_0x43f356,'recreateCoinResults()');}}async function getAllEventOrders(_0x545ce4){const _0x44d74c=_0x30c2d2;let _0x1ceff4=[],_0x344ff3=dbLogs[_0x44d74c(0x19b)](_0x44d74c(0x1f3))['filter'](_0x24edce=>{const _0x4eb9b6=_0x44d74c,_0x1c8398=_0x24edce[_0x4eb9b6(0x10b)][_0x4eb9b6(0x179)]();return _0x1c8398[_0x4eb9b6(0x16e)](_0x545ce4[_0x4eb9b6(0x179)]())&&(_0x1c8398[_0x4eb9b6(0x16e)](_0x4eb9b6(0xcb))&&_0x1c8398[_0x4eb9b6(0x16e)]('order')||_0x1c8398[_0x4eb9b6(0x16e)](_0x4eb9b6(0x200))&&_0x1c8398[_0x4eb9b6(0x16e)](_0x4eb9b6(0x1aa)));})['sortBy']('time')[_0x44d74c(0x143)]();return _0x344ff3[_0x44d74c(0xe5)](_0x4b35a0=>{const _0x2f9b7c=_0x44d74c,_0x44c7b8=_0x4b35a0[_0x2f9b7c(0x10b)][_0x2f9b7c(0x16e)]('sell')?_0x2f9b7c(0xfd):_0x2f9b7c(0x119),_0x497a10=/#([0-9]|\.)+\s/i,_0x53ffb5=Number(_0x497a10[_0x2f9b7c(0x1ba)](_0x4b35a0[_0x2f9b7c(0x10b)])[0x0][_0x2f9b7c(0x153)](0x1)),_0x27e355=/@([0-9]|\.)+$/i,_0x14a23e=Number(_0x27e355[_0x2f9b7c(0x1ba)](_0x4b35a0[_0x2f9b7c(0x10b)])[0x0][_0x2f9b7c(0x153)](0x1));_0x1ceff4[_0x2f9b7c(0xf4)]({'datetime':_0x4b35a0[_0x2f9b7c(0x163)],'coin':symbolToCoin(_0x545ce4),'symbol':_0x545ce4,'side':_0x44c7b8,'amount':_0x53ffb5,'filled':_0x53ffb5,'price':_0x14a23e});}),_0x1ceff4;}async function getAllOrders(_0x558c03,_0x43563d){const _0x57f184=_0x30c2d2;let _0x3f27cb=[];while(_0x43563d<exchange[_0x57f184(0x1a5)]()){const _0x174fd5=0x1f4;try{const _0x23b8cc=await exchange[_0x57f184(0x15e)](_0x558c03,_0x43563d,_0x174fd5);if(_0x23b8cc[_0x57f184(0x1e5)])_0x43563d=_0x23b8cc[_0x23b8cc['length']-0x1]['timestamp']+0x1,_0x3f27cb=_0x3f27cb['concat'](_0x23b8cc);else break;}catch(_0x25b031){await handleError(_0x25b031,_0x57f184(0x11e),_0x558c03);}}return _0x3f27cb;}async function validate24hChanges(){const _0x3a0b75=_0x30c2d2;for(const _0xf98e3c of currentCoins){if(_0xf98e3c[_0x3a0b75(0x1cd)]!=config[_0x3a0b75(0xda)]){let _0x5b1380;_0xf98e3c[_0x3a0b75(0x17e)]?_0x5b1380=formatResult((0x1/(global[_0x3a0b75(0x15c)][noslash(_0xf98e3c[_0x3a0b75(0x15b)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5b1380=global[_0x3a0b75(0x15c)][noslash(_0xf98e3c[_0x3a0b75(0x15b)])],_0x5b1380<config[_0x3a0b75(0x18c)]&&(logHistory(_0x3a0b75(0x104),_0xf98e3c['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x5b1380+'%'),logHistory(_0x3a0b75(0x104),_0x3a0b75(0x169)),logHistory(_0x3a0b75(0x104),_0x3a0b75(0x178)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5d7aea,_0x3a6eeb){const _0x92dc74=_0x30c2d2;if(!_0x5d7aea)return!![];const _0x4ece27=_0x3a6eeb['split']('.'),_0x299980=_0x5d7aea[_0x92dc74(0x7c)]('.');for(var _0x2667f1=0x0;_0x2667f1<_0x299980['length'];_0x2667f1++){const _0x9727e8=~~_0x299980[_0x2667f1],_0x1e090b=~~_0x4ece27[_0x2667f1];if(_0x9727e8<_0x1e090b)return!![];if(_0x9727e8>_0x1e090b)return![];}return![];}async function oneTimeMigration(){const _0x44c1b5=_0x30c2d2;let _0x2f2ef9=dbLogs[_0x44c1b5(0x19b)]('version')['value']();if(isOlderVersion(_0x2f2ef9,'2.3.5')){let _0x332403=[];const _0x20423e=dbLogs[_0x44c1b5(0x19b)](_0x44c1b5(0x1f3))['value']();_0x20423e[_0x44c1b5(0xe5)](_0x5a2098=>{const _0x1876dd=_0x44c1b5;_0x332403[_0x1876dd(0xf4)]({'time':_0x5a2098[_0x1876dd(0x163)],'type':_0x5a2098[_0x1876dd(0x141)],'event':_0x5a2098[_0x1876dd(0x10b)]});}),dbLogs[_0x44c1b5(0x19b)]('logs')[_0x44c1b5(0xfa)](_0x332403)[_0x44c1b5(0x110)]();}let _0x462dfe=dbConfig[_0x44c1b5(0x19b)](_0x44c1b5(0x191))[_0x44c1b5(0x143)]();if(isOlderVersion(_0x462dfe,_0x44c1b5(0xb5))){let _0x180b24=dbConfig['get'](_0x44c1b5(0x160))[_0x44c1b5(0x159)]({'botID':botID})[_0x44c1b5(0x143)]();if(_0x180b24){let _0x141bc9=[];_0x180b24[_0x44c1b5(0x1d8)][_0x44c1b5(0xe5)](_0x5aed72=>{const _0xc3e50d=_0x44c1b5;_0x141bc9['push']({'coin':_0x5aed72['coin'],'number':_0x5aed72['startnumber'],'price':_0x5aed72[_0xc3e50d(0x1ea)]}),delete _0x5aed72[_0xc3e50d(0x1de)],delete _0x5aed72[_0xc3e50d(0x1ea)];});if(_0x141bc9['length']!==0x0)fs[_0x44c1b5(0x18e)](configbackuppath+(_0x44c1b5(0x19e)+botID+_0x44c1b5(0x132)),JSON[_0x44c1b5(0x19a)](_0x141bc9,null,0x4),function(_0x5dcc67){if(_0x5dcc67){}});const _0x474891=(_0x2c1bd0,_0x1ece5b)=>{const _0x6886d=_0x44c1b5;let _0x15db1a=[];_0x1ece5b[_0x6886d(0xe5)](_0x416469=>{const _0x5d1545=_0x6886d,_0x1cf116=_0x2c1bd0['find'](_0x561c23=>_0x561c23[_0x5d1545(0x1cd)]==_0x416469[_0x5d1545(0x1cd)]);if(!_0x1cf116)_0x15db1a[_0x5d1545(0xf4)](_0x416469);});let _0x3d1f53=[];return _0x2c1bd0[_0x6886d(0xe5)](_0xce7e6e=>{const _0x12cbce=_0x6886d,_0x3d2bbc=_0x1ece5b['find'](_0x594969=>_0x594969['coin']==_0xce7e6e[_0x12cbce(0x1cd)]);if(!_0x3d2bbc||_0x3d2bbc[_0x12cbce(0x14c)]==0x0&&_0xce7e6e[_0x12cbce(0x14c)]!=0x0)_0x3d1f53[_0x12cbce(0xf4)](_0xce7e6e);}),{'missingDay1':_0x15db1a,'notInDay2':_0x3d1f53};},_0x5165e2=dbPerformance[_0x44c1b5(0x19b)]('data')[_0x44c1b5(0x99)]()['value']();if(_0x5165e2['length']>0x1){const {missingDay1:_0x519a58,notInDay2:_0x47cf81}=_0x474891(_0x141bc9,_0x5165e2[0x1][_0x44c1b5(0xaa)]);_0x141bc9=[..._0x141bc9,..._0x519a58],_0x47cf81[_0x44c1b5(0xe5)](_0x3ce056=>{const _0x48535c=_0x44c1b5;let _0x288b7f=_0x141bc9[_0x48535c(0x115)](_0x1709bb=>_0x1709bb[_0x48535c(0x1cd)]==_0x3ce056[_0x48535c(0x1cd)]);_0x288b7f!=-0x1&&_0x141bc9[_0x48535c(0x105)](_0x288b7f,0x1);});}_0x141bc9[_0x44c1b5(0x8e)]((_0xf62928,_0x52b195)=>_0xf62928[_0x44c1b5(0x1cd)]>_0x52b195[_0x44c1b5(0x1cd)]?0x1:_0x52b195[_0x44c1b5(0x1cd)]>_0xf62928['coin']?-0x1:0x0);let _0x2ffaa6=[{'date':_0x180b24['startdate'],'changes':_0x141bc9}];_0x5165e2[_0x44c1b5(0x1e5)]>0x2&&_0x5165e2[_0x44c1b5(0xe5)]((_0x59a376,_0x39abe7)=>{const _0x1b9412=_0x44c1b5;if(_0x39abe7>0x0&&_0x39abe7<_0x5165e2[_0x1b9412(0x1e5)]-0x1){const {missingDay1:_0x36096d,notInDay2:_0x2e077e}=_0x474891(_0x5165e2[_0x39abe7]['coins'],_0x5165e2[_0x39abe7+0x1][_0x1b9412(0xaa)]);_0x141bc9=[],(_0x36096d[_0x1b9412(0x1e5)]!=0x0||_0x2e077e[_0x1b9412(0x1e5)]!=0x0)&&(_0x36096d[_0x1b9412(0x1e5)]!=0x0&&_0x141bc9['push'](..._0x36096d),_0x2e077e[_0x1b9412(0x1e5)]!=0x0&&(_0x2e077e[_0x1b9412(0xe5)](_0xd255e5=>{_0xd255e5['number']=-_0xd255e5['number'];}),_0x141bc9[_0x1b9412(0xf4)](..._0x2e077e)),_0x141bc9[_0x1b9412(0x8e)]((_0x5205ce,_0x36ef65)=>_0x5205ce[_0x1b9412(0x1cd)]>_0x36ef65[_0x1b9412(0x1cd)]?0x1:_0x36ef65[_0x1b9412(0x1cd)]>_0x5205ce['coin']?-0x1:0x0),_0x2ffaa6[_0x1b9412(0xf4)]({'date':_0x5165e2[_0x39abe7+0x1][_0x1b9412(0x86)],'changes':_0x141bc9}));}}),dbConfig['get'](_0x44c1b5(0x160))['find']({'botID':botID})[_0x44c1b5(0xfa)]({..._0x180b24,'liquidity':_0x2ffaa6})['write']();}}if(isOlderVersion(_0x462dfe,'2.6.0')){let _0x444019=dbConfig['get'](_0x44c1b5(0x160))[_0x44c1b5(0x159)]({'botID':botID})['value']();if(_0x444019){const _0x183cf3=_0x444019['exchange'],_0x116ae0=_0x183cf3?capitalize(_0x183cf3):_0x44c1b5(0x193);dbConfig['get'](_0x44c1b5(0x160))['find']({'botID':botID})['assign']({'exchange':_0x116ae0})[_0x44c1b5(0x110)]();}}let _0x37f383=dbPerformance[_0x44c1b5(0x19b)](_0x44c1b5(0x191))[_0x44c1b5(0x143)]();isOlderVersion(_0x37f383,'2.3.5')&&setStartDatePerformance();let _0x366e3b=dbCoinResults[_0x44c1b5(0x19b)](_0x44c1b5(0x191))[_0x44c1b5(0x143)]();if(isOlderVersion(_0x366e3b,_0x44c1b5(0x9e))){let _0x396c64=dbCoinResults[_0x44c1b5(0x19b)](_0x44c1b5(0xaa))[_0x44c1b5(0x143)]();if(_0x396c64[_0x44c1b5(0x1e5)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x109b11=_0x30c2d2;dbConfig[_0x109b11(0x1bb)](_0x109b11(0x191),serverversion)[_0x109b11(0x110)](),dbPerformance[_0x109b11(0x1bb)](_0x109b11(0x191),serverversion)[_0x109b11(0x110)](),dbLogs[_0x109b11(0x1bb)](_0x109b11(0x191),serverversion)[_0x109b11(0x110)](),dbCoinResults[_0x109b11(0x1bb)]('version',serverversion)[_0x109b11(0x110)]();}function getConfiguration(_0x3f8c4b){const _0x5199ee=_0x30c2d2;let _0x1e7fa4=dbConfig['get'](_0x5199ee(0x160))[_0x5199ee(0x159)]({'botID':_0x3f8c4b})[_0x5199ee(0x143)]();if(_0x1e7fa4){let _0x466e17=![];typeof _0x1e7fa4[_0x5199ee(0x1f8)]==_0x5199ee(0x13d)&&(_0x1e7fa4={..._0x1e7fa4,'threshold':Number(_0x1e7fa4[_0x5199ee(0x1f8)])},_0x466e17=!![]),_0x1e7fa4[_0x5199ee(0x18c)]==undefined&&(_0x1e7fa4={..._0x1e7fa4,'change24h':-0x14},_0x466e17=!![]),_0x1e7fa4['fiat']==undefined&&(_0x1e7fa4={..._0x1e7fa4,'fiat':_0x5199ee(0xf2)},_0x466e17=!![]),_0x1e7fa4['onepagemode']==undefined&&(_0x1e7fa4={..._0x1e7fa4,'onepagemode':settings[_0x5199ee(0x19f)]},_0x466e17=!![]),_0x1e7fa4['colorscheme']==undefined&&(_0x1e7fa4={..._0x1e7fa4,'colorscheme':_0x5199ee(0x17f)},_0x466e17=!![]),_0x1e7fa4[_0x5199ee(0x7d)]==undefined&&(_0x1e7fa4={..._0x1e7fa4,'autoliquidity':!![]},_0x466e17=!![]),_0x466e17&&(_0x1e7fa4={'botID':_0x1e7fa4['botID'],'exchange':_0x1e7fa4[_0x5199ee(0x117)],'apiKey':_0x1e7fa4['apiKey'],'apiSecret':_0x1e7fa4[_0x5199ee(0x142)],'apiPassword':_0x1e7fa4['apiPassword'],'basecoin':_0x1e7fa4[_0x5199ee(0xda)],'botname':_0x1e7fa4[_0x5199ee(0x92)],'showname':_0x1e7fa4['showname'],'threshold':_0x1e7fa4[_0x5199ee(0x1f8)],'ordertype':_0x1e7fa4[_0x5199ee(0x1c3)],'timeout':_0x1e7fa4[_0x5199ee(0x147)],'fiat':_0x1e7fa4[_0x5199ee(0x1a0)],'startdate':_0x1e7fa4['startdate'],'recreate':_0x1e7fa4[_0x5199ee(0xd7)],'timeshift':_0x1e7fa4[_0x5199ee(0x112)],'onepagemode':_0x1e7fa4[_0x5199ee(0x19f)],'headless':_0x1e7fa4[_0x5199ee(0xbd)],'cooldown':_0x1e7fa4[_0x5199ee(0x76)],'change24h':_0x1e7fa4[_0x5199ee(0x18c)],'emojibuy':_0x1e7fa4[_0x5199ee(0x90)],'emojisell':_0x1e7fa4['emojisell'],'colorscheme':_0x1e7fa4[_0x5199ee(0x1fc)],'portfolio':_0x1e7fa4['portfolio'],'autoliquidity':_0x1e7fa4[_0x5199ee(0x7d)],'liquidity':_0x1e7fa4['liquidity'],'openOrders':_0x1e7fa4[_0x5199ee(0xed)]},dbConfig['get'](_0x5199ee(0x160))[_0x5199ee(0x144)]()[_0x5199ee(0x110)](),dbConfig[_0x5199ee(0x19b)](_0x5199ee(0x160))[_0x5199ee(0xf4)](_0x1e7fa4)[_0x5199ee(0x110)]());}else _0x1e7fa4={'botID':_0x3f8c4b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3f8c4b,'showname':![],'threshold':0x3,'ordertype':_0x5199ee(0xcb),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x5199ee(0x112)],'onepagemode':settings[_0x5199ee(0x19f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5199ee(0x17f),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1e7fa4;}function emittedConfiguration(){const _0x3b6c60=_0x30c2d2;let _0x170729;if(config[_0x3b6c60(0x140)]=='')_0x170729={...config,'configstate':'initial'};else config[_0x3b6c60(0x140)]==_0x3b6c60(0xc2)?_0x170729={...config,'configstate':_0x3b6c60(0x101)}:(_0x170729={...config,'apiKey':'************','apiSecret':'************'},config[_0x3b6c60(0x11c)]&&(_0x170729['apiPassword']=_0x3b6c60(0xc5)));return _0x170729;}function getSettings(){const _0x36b62b=_0x30c2d2;return dbSettings['get']('settings')[_0x36b62b(0x143)]();}function getSecure(){const _0x9fd18b=_0x30c2d2;return dbSecure[_0x9fd18b(0x19b)](_0x9fd18b(0x1e6))[_0x9fd18b(0x143)]()||{};}function updateTimeshift(_0x35bdfa){const _0x193eef=_0x30c2d2;let _0x4d6420=dbConfig[_0x193eef(0x19b)]('bot')['find']({'botID':botID})[_0x193eef(0x143)]();_0x4d6420&&dbConfig[_0x193eef(0x19b)](_0x193eef(0x160))[_0x193eef(0x159)]({'botID':botID})[_0x193eef(0xfa)]({'timeshift':_0x35bdfa})[_0x193eef(0x110)](),config[_0x193eef(0x112)]=_0x35bdfa,proxyEmit(_0x193eef(0x135),emittedConfiguration());}function updateOnepagemode(_0x16d809){const _0x1b5fd3=_0x30c2d2;let _0x252ab2=dbConfig[_0x1b5fd3(0x19b)]('bot')[_0x1b5fd3(0x159)]({'botID':botID})[_0x1b5fd3(0x143)]();_0x252ab2&&dbConfig[_0x1b5fd3(0x19b)]('bot')['find']({'botID':botID})[_0x1b5fd3(0xfa)]({'onepagemode':_0x16d809})['write'](),config[_0x1b5fd3(0x19f)]=_0x16d809,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x513496){const _0x4a698d=_0x30c2d2;logger[_0x4a698d(0x1a3)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4a698d(0x1a3)](_0x4a698d(0xe7));let _0x10bc37=![],_0x34f950=![],_0x518c46=[];_0x513496[_0x4a698d(0x1d8)][_0x4a698d(0xe5)](_0x7fa31=>{const _0x2a1737=_0x4a698d;if(!_0x7fa31[_0x2a1737(0x11f)]&&_0x7fa31[_0x2a1737(0x1cd)]!=_0x513496['basecoin'])_0x518c46[_0x2a1737(0xf4)](_0x7fa31[_0x2a1737(0x15b)]);}),_0x518c46[_0x4a698d(0xe5)](_0x4859f8=>{const _0xbd62b=_0x4a698d,_0x57a1be=currentCoins[_0xbd62b(0x159)](_0x5e943f=>_0x5e943f[_0xbd62b(0x15b)]==_0x4859f8);!_0x57a1be&&(_0x10bc37=!![]);}),currentCoins[_0x4a698d(0xe5)](_0xf5d820=>{const _0x172c5c=_0x4a698d;if(_0xf5d820[_0x172c5c(0x1cd)]!=config['basecoin']){const _0x4455e2=_0x518c46[_0x172c5c(0x159)](_0x324418=>_0x324418==_0xf5d820[_0x172c5c(0x15b)]);!_0x4455e2&&(_0x10bc37=!![]);}}),_0x513496['portfolio']['forEach'](_0x3239ad=>{const _0x5f363c=_0x4a698d,_0x5bff06=config[_0x5f363c(0x1d8)][_0x5f363c(0x159)](_0x52117a=>_0x52117a['coin']==_0x3239ad[_0x5f363c(0x1cd)]);if(_0x5bff06&&_0x3239ad['offset']!=_0x5bff06['offset'])_0x34f950=!![];});let _0x207af1=dbConfig['get'](_0x4a698d(0x160))[_0x4a698d(0x159)]({'botID':botID})[_0x4a698d(0x143)]();_0x513496={..._0x513496,'apiKey':crypt['decrypt'](secure['privateKey'],_0x513496[_0x4a698d(0x140)])[_0x4a698d(0x165)],'apiSecret':crypt[_0x4a698d(0x1ce)](secure[_0x4a698d(0x1a1)],_0x513496[_0x4a698d(0x142)])['message']};_0x513496[_0x4a698d(0x11c)]&&(_0x513496[_0x4a698d(0x11c)]=crypt[_0x4a698d(0x1ce)](secure[_0x4a698d(0x1a1)],_0x513496[_0x4a698d(0x11c)])[_0x4a698d(0x165)]);let _0x10a3d5=![];if(_0x207af1){_0x513496['apiKey']==_0x4a698d(0xc5)?_0x513496[_0x4a698d(0x140)]=config[_0x4a698d(0x140)]:_0x10a3d5=!![];_0x513496[_0x4a698d(0x142)]=='************'?_0x513496[_0x4a698d(0x142)]=config[_0x4a698d(0x142)]:_0x10a3d5=!![];if(_0x513496['apiPassword']==_0x4a698d(0xc5))_0x513496[_0x4a698d(0x11c)]=config[_0x4a698d(0x11c)];else{if(_0x513496[_0x4a698d(0x11c)])_0x10a3d5=!![];}dbConfig[_0x4a698d(0x19b)](_0x4a698d(0x160))[_0x4a698d(0x159)]({'botID':botID})[_0x4a698d(0xfa)](_0x513496)[_0x4a698d(0x110)]();}else dbConfig[_0x4a698d(0x19b)](_0x4a698d(0x160))[_0x4a698d(0xf4)](_0x513496)['write'](),_0x10a3d5=!![],process[_0x4a698d(0x1d2)]({'status':'enabled','live':'running'},_0x24b4cb=>{});process[_0x4a698d(0x1d2)]({'botname':_0x513496['botname']},_0x345cd8=>{}),config={..._0x513496},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x10a3d5)await reset(!![]);else _0x10bc37||_0x34f950?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x4a698d(0x1a3)](_0x4a698d(0x146));}async function storeHeadless(_0x3c3d67){const _0x1a2756=_0x30c2d2,_0x4ed0b3={...config,'headless':_0x3c3d67[_0x1a2756(0xbd)]};let _0x17cab6=dbConfig['get'](_0x1a2756(0x160))[_0x1a2756(0x159)]({'botID':botID})[_0x1a2756(0x143)]();_0x17cab6&&dbConfig[_0x1a2756(0x19b)](_0x1a2756(0x160))[_0x1a2756(0x159)]({'botID':botID})[_0x1a2756(0xfa)](_0x4ed0b3)[_0x1a2756(0x110)](),config={..._0x4ed0b3},updateBotManager(),proxyEmit(_0x1a2756(0x135),emittedConfiguration());}async function storeFiat(_0x2fd49d){const _0x4a0884=_0x30c2d2,_0x1eeefa={...config,'fiat':_0x2fd49d};let _0x54f756=dbConfig[_0x4a0884(0x19b)](_0x4a0884(0x160))[_0x4a0884(0x159)]({'botID':botID})[_0x4a0884(0x143)]();_0x54f756&&dbConfig['get'](_0x4a0884(0x160))[_0x4a0884(0x159)]({'botID':botID})[_0x4a0884(0xfa)](_0x1eeefa)[_0x4a0884(0x110)](),config={..._0x1eeefa},proxyEmit(_0x4a0884(0x135),emittedConfiguration());}function resetHistory(){const _0x31b680=_0x30c2d2;logger[_0x31b680(0x181)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x31b680(0xad))))fs[_0x31b680(0x123)](path[_0x31b680(0xd8)](configpath,_0x31b680(0x1c9)+botID+_0x31b680(0xad)));if(fs[_0x31b680(0x1d6)](path[_0x31b680(0xd8)](configpath,'bot-'+botID+_0x31b680(0xae))))fs['unlinkSync'](path[_0x31b680(0xd8)](configpath,_0x31b680(0x1c9)+botID+_0x31b680(0xae)));if(fs[_0x31b680(0x1d6)](path['join'](configpath,_0x31b680(0x1c9)+botID+_0x31b680(0x85))))fs[_0x31b680(0x123)](path['join'](configpath,'bot-'+botID+_0x31b680(0x85)));}catch(_0x2ce2a5){if(_0x2ce2a5)logger['full'](_0x31b680(0x1f7),_0x2ce2a5);}const _0x1f2cc0=getDate();let _0x2e2ae1=[];currentCoins['forEach'](_0x2d2748=>{const _0x1a7161=_0x31b680;_0x2e2ae1[_0x1a7161(0xf4)]({'coin':_0x2d2748['coin'],'number':_0x2d2748[_0x1a7161(0x14c)],'price':_0x2d2748[_0x1a7161(0xfc)]});});let _0xddb938=dbConfig[_0x31b680(0x19b)](_0x31b680(0x160))['find']({'botID':botID})[_0x31b680(0x143)]();_0xddb938&&(dbConfig[_0x31b680(0x19b)]('bot')[_0x31b680(0x159)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1f2cc0,'changes':_0x2e2ae1}]})[_0x31b680(0x110)](),config[_0x31b680(0x1b9)]=[]),process['send']({'stop':'restart'},_0x23728b=>{});}function noslash(_0x1d5cf8){const _0x5596df=_0x30c2d2;return _0x1d5cf8[_0x5596df(0x10a)]('/','');}function updateHighestFee(_0x5075c8){const _0x2da7f0=_0x30c2d2;if(_0x5075c8['reverse']){let _0xee4694={'filled':_0x5075c8[_0x2da7f0(0x200)]*_0x5075c8[_0x2da7f0(0xb1)],'amount':_0x5075c8[_0x2da7f0(0x200)]*_0x5075c8['price'],'side':_0x5075c8[_0x2da7f0(0x93)]==_0x2da7f0(0xfd)?_0x2da7f0(0x119):_0x2da7f0(0xfd),'price':0x1/_0x5075c8[_0x2da7f0(0xb1)]};_0x5075c8={..._0x5075c8,..._0xee4694};}const _0x1a803e=defaultFee*_0x5075c8[_0x2da7f0(0x200)]*_0x5075c8[_0x2da7f0(0xb1)];lastFees[_0x2da7f0(0x185)][_0x2da7f0(0x1e5)]===0x14&&lastFees['recent20'][_0x2da7f0(0x10d)](),lastFees[_0x2da7f0(0x185)][_0x2da7f0(0xf4)](_0x1a803e),lastFees[_0x2da7f0(0x145)]=Math['max'](...lastFees[_0x2da7f0(0x185)]);}async function updateNumberCoinsCcxt(_0x4bdaab){const _0x2eed87=_0x30c2d2;logger[_0x2eed87(0x1a3)](_0x2eed87(0x73)+_0x4bdaab[_0x2eed87(0x15b)]+_0x2eed87(0x97)+_0x4bdaab[_0x2eed87(0x1e7)]+'\x20|\x20'+_0x4bdaab[_0x2eed87(0x200)]+_0x2eed87(0x1e9)+_0x4bdaab[_0x2eed87(0x100)]+'\x20|\x20'+_0x4bdaab['id']);let _0x2eb332=_0x4bdaab[_0x2eed87(0x1e7)],_0x2944ec=![];currentCoins[_0x2eed87(0xe5)](_0x2ee4dc=>{const _0x5813f4=_0x2eed87;_0x2ee4dc[_0x5813f4(0x15b)]==_0x4bdaab[_0x5813f4(0x15b)]&&(_0x2944ec=!![]);});if(!_0x2944ec)return;const _0x226b21=currentCoins[_0x2eed87(0x159)](_0x23aacf=>_0x23aacf[_0x2eed87(0x15b)]==_0x4bdaab[_0x2eed87(0x15b)]),_0x358504=_0x390356=>{if(_0x226b21)_0x226b21['orderstatus']=_0x390356;};if(_0x2eb332=='open')_0x358504(_0x2eed87(0x87));else{if(_0x2eb332==_0x2eed87(0x121)){_0x358504('canceled');const _0x587393=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x587393,await getOpenOrders(),handleOpenOrders();}else{if(_0x2eb332==_0x2eed87(0x77)){let _0x560dfc=![];if(lastOrders)for(const _0x318a6d of lastOrders){const _0x67e70d=0xc8,_0x1ac4db=0x1388;let _0x3e6c59=0x0;while(!_0x318a6d[_0x2eed87(0xb4)]&&_0x3e6c59*_0x67e70d<_0x1ac4db){_0x3e6c59++,await sleep(_0x67e70d);}if(_0x3e6c59>0x0)logger[_0x2eed87(0x1a3)](_0x2eed87(0x124)+_0x3e6c59*_0x67e70d/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x318a6d[_0x2eed87(0xb4)]==_0x4bdaab['id']){logger[_0x2eed87(0x1a3)](_0x2eed87(0x202)+_0x4bdaab['id']),_0x560dfc=!![];if(_0x318a6d[_0x2eed87(0x200)]==0x0){logger[_0x2eed87(0x1a3)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x4bdaab['id']);if(_0x4bdaab['average'])_0x318a6d[_0x2eed87(0xb1)]=_0x4bdaab[_0x2eed87(0xce)];else{if(_0x4bdaab[_0x2eed87(0xb1)])_0x318a6d['price']=_0x4bdaab[_0x2eed87(0xb1)];else{}}_0x318a6d['filled']=_0x4bdaab[_0x2eed87(0x200)],updateHighestFee(_0x318a6d),_0x358504(_0x2eed87(0x200)),await validateOrders();if(lockOrders==ORDERS[_0x2eed87(0xca)]){const _0x5a230f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5a230f;}_0x318a6d[_0x2eed87(0x111)]={'currency':_0x4bdaab['fee']?_0x4bdaab['fee'][_0x2eed87(0x1bc)]:null,'cost':_0x4bdaab[_0x2eed87(0x111)]?_0x4bdaab['fee']['cost']:0x0},await updateCoinResults(_0x318a6d);}}}if(!_0x560dfc){logger[_0x2eed87(0x1a3)](_0x2eed87(0x157)+_0x4bdaab['id']),_0x358504(_0x2eed87(0x200));const _0xd306df=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd306df,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x504888=JSON[_0x2eed87(0x1d5)](lastBalances[_0x2eed87(0x1d8)]);const _0x5d6e95=_0x504888[_0x2eed87(0x159)](_0x3cc742=>_0x3cc742[_0x2eed87(0x15b)]==_0x4bdaab[_0x2eed87(0x15b)]);if(_0x5d6e95){if(_0x2eb332=='open')_0x5d6e95['orderstatus']=_0x5d6e95[_0x2eed87(0x18f)]==_0x2eed87(0x200)?_0x2eed87(0x200):'open';else{if(_0x2eb332==_0x2eed87(0x121))_0x5d6e95[_0x2eed87(0x18f)]=_0x5d6e95[_0x2eed87(0x18f)]=='filled'?_0x2eed87(0x200):_0x2eed87(0x121);else _0x2eb332==_0x2eed87(0x77)&&(_0x5d6e95[_0x2eed87(0x18f)]=_0x2eed87(0x200));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x504888)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1320ed=_0x30c2d2;await getOpenOrders();let _0x155cc9=![];currentCoins[_0x1320ed(0xe5)](_0x411b16=>{const _0x7aa77e=_0x1320ed;_0x155cc9=allOpenOrders['find'](_0x190a2f=>_0x190a2f[_0x7aa77e(0x15b)]==_0x411b16[_0x7aa77e(0x15b)]),_0x411b16[_0x7aa77e(0x18f)]=_0x155cc9?_0x7aa77e(0x87):_0x7aa77e(0xd1);});}async function getCoins(_0x35ddcd=0x0,_0x3d46bd=!![],_0x1462c0=config[_0x30c2d2(0xda)]){const _0xcb0306=_0x30c2d2;let _0x3707ae,_0x23794d=[],_0x54c7f5=[],_0xcf1478=[];if(_0x35ddcd)await sleep(_0x35ddcd);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3707ae=await exchange[_0xcb0306(0x18a)](),mybalances=_0x3707ae['total'];for(const [_0x51ad61,_0x4eca64]of Object[_0xcb0306(0x7b)](mybalances)){_0xcf1478['push'](_0x51ad61);}config[_0xcb0306(0x1d8)][_0xcb0306(0xe5)](_0x2d7eaa=>{const _0x34e2c7=_0xcb0306;!_0xcf1478[_0x34e2c7(0x16e)](_0x2d7eaa[_0x34e2c7(0x1cd)])&&(mybalances[_0x2d7eaa[_0x34e2c7(0x1cd)]]=0x0);});if(_0x1462c0=='')for(const [_0x331454,_0x2c18e2]of Object[_0xcb0306(0x7b)](mybalances)){_0x2c18e2!=0x0&&_0x23794d['push']({'coin':_0x331454});}else{let _0x4108c6=![];for(const [_0x4f95fe,_0x5ecf95]of Object[_0xcb0306(0x7b)](mybalances)){const _0x870d7e=config[_0xcb0306(0x1d8)][_0xcb0306(0x159)](_0x4da8d3=>_0x4da8d3[_0xcb0306(0x1cd)]==_0x4f95fe),_0xf2a01b=_0x4f95fe+'/'+_0x1462c0,_0x310403=_0x1462c0+'/'+_0x4f95fe,_0x3f31f3=currentCoins[_0xcb0306(0x159)](_0xe57e96=>_0xe57e96[_0xcb0306(0x1cd)]==_0x4f95fe);_0x4108c6=![];if((_0x5ecf95!=0x0||_0x870d7e)&&(allSymbols[_0xcb0306(0x16e)](_0xf2a01b)||_0x4f95fe==_0x1462c0))_0x23794d[_0xcb0306(0xf4)]({'coin':_0x4f95fe,'symbol':_0xf2a01b,'reverse':![],'number':Math[_0xcb0306(0x98)](_0x5ecf95+(_0x870d7e&&_0x870d7e[_0xcb0306(0xa5)]||0x0),0x0),'orderstatus':_0x3f31f3?_0x3f31f3[_0xcb0306(0x18f)]:_0xcb0306(0xd1)});else{if((_0x5ecf95!=0x0||_0x870d7e)&&allSymbols['includes'](_0x310403))_0x23794d[_0xcb0306(0xf4)]({'coin':_0x4f95fe,'symbol':_0x310403,'reverse':!![],'number':Math[_0xcb0306(0x98)](_0x5ecf95+(_0x870d7e&&_0x870d7e[_0xcb0306(0xa5)]||0x0),0x0),'orderstatus':_0x3f31f3?_0x3f31f3[_0xcb0306(0x18f)]:'none'});else _0x870d7e&&_0x23794d['push']({'coin':_0x870d7e[_0xcb0306(0x1cd)],'symbol':_0x870d7e['symbol'],'reverse':_0x870d7e['reverse'],'number':0x0,'orderstatus':_0xcb0306(0xd1)});}}}}catch(_0x4dbeb5){if(!_0x3d46bd)handleErrorNoStop(_0x4dbeb5,_0xcb0306(0xfe));else await handleError(_0x4dbeb5,'getCoins()');}return _0x54c7f5=cloneDeep(_0x23794d),_0x23794d=_0x23794d[_0xcb0306(0x7a)](_0x3c65c6=>{const _0x18a21e=_0xcb0306,_0x4007fa=config[_0x18a21e(0x1d8)]['find'](_0x1734c4=>_0x1734c4['coin']==_0x3c65c6['coin']);return _0x4007fa&&!_0x4007fa['excluded'];}),[_0x23794d,_0x54c7f5];}async function getCoinNumber(_0x1cb20f){const _0x216500=_0x30c2d2;let _0x137a6b;try{const _0x469558=await exchange[_0x216500(0x18a)]();_0x137a6b=_0x469558[_0x216500(0x154)][_0x1cb20f];}catch(_0x5a3d9d){await handleError(_0x5a3d9d,_0x216500(0x80));}return _0x137a6b;}async function getOpenOrders(){const _0x5d5107=_0x30c2d2;let _0x3e2f64;allOpenOrders=[];try{for(const _0x548a0c of config[_0x5d5107(0x1d8)]){!_0x548a0c[_0x5d5107(0x11f)]&&_0x548a0c[_0x5d5107(0x1cd)]!=config[_0x5d5107(0xda)]&&(_0x3e2f64=await exchange['fetchOpenOrders'](_0x548a0c[_0x5d5107(0x15b)]),_0x3e2f64[_0x5d5107(0x1e5)]>0x0&&allOpenOrders[_0x5d5107(0xf4)](_0x3e2f64[0x0]));}}catch(_0x386af6){await handleError(_0x386af6,_0x5d5107(0xec));}}async function handleOpenOrders(_0x85a73b=0x0){const _0x5be6fd=_0x30c2d2;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x5be6fd(0xca)]&&allOrdersPlaced&&(_0x85a73b==0x0?(logger[_0x5be6fd(0x1a3)]('1\x20-\x20Handle\x20open\x20orders'),_0x85a73b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5be6fd(0x1a3)](_0x5be6fd(0x1e1)),validateOrders(_0x5be6fd(0x1e0))));}async function testAPI(_0x489676){const _0xd25002=_0x30c2d2,_0x5c60c7=ccxt['pro'][_0x489676[_0xd25002(0x117)][_0xd25002(0x179)]()],_0x12d6d1=new _0x5c60c7({'apiKey':_0x489676[_0xd25002(0x140)],'secret':_0x489676[_0xd25002(0x142)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xd25002(0x1d1)}});if(_0x489676[_0xd25002(0x11c)])_0x12d6d1['password']=_0x489676['apiPassword'];try{await _0x12d6d1[_0xd25002(0x1b6)]();}catch(_0x7348af){throw _0x7348af;}}function cloneDeep(_0x368a11){const _0x79ca38=_0x30c2d2;return JSON[_0x79ca38(0x1d5)](JSON['stringify'](_0x368a11));}async function getPortfolio(_0x3533b6){const _0x43fcb7=_0x30c2d2;let _0x54c63c=[],_0x3206a8=[],_0x5b7fcd=[],_0x3931b4;if(_0x3533b6['apiKey']!==_0x43fcb7(0xc5)||_0x3533b6[_0x43fcb7(0x142)]!==_0x43fcb7(0xc5)||_0x3533b6[_0x43fcb7(0x11c)]&&_0x3533b6['apiPassword']!==_0x43fcb7(0xc5)){if(config[_0x43fcb7(0x117)]){if(_0x3533b6[_0x43fcb7(0x140)]==_0x43fcb7(0xc5))_0x3533b6[_0x43fcb7(0x140)]=config[_0x43fcb7(0x140)];if(_0x3533b6['apiSecret']==_0x43fcb7(0xc5))_0x3533b6[_0x43fcb7(0x142)]=config['apiSecret'];if(_0x3533b6[_0x43fcb7(0x11c)]=='************')_0x3533b6['apiPassword']=config[_0x43fcb7(0x11c)];try{await testAPI(_0x3533b6);}catch(_0x1bd3ec){if(_0x1bd3ec[_0x43fcb7(0x75)]()[_0x43fcb7(0x16e)]('AuthenticationError')){logger['debug'](_0x43fcb7(0x10f)),proxyEmit(_0x43fcb7(0x1d8),![]);return;}else{handleError(_0x1bd3ec,'getPortfolio(0)');return;}}}await initExchange(_0x3533b6['exchange'],_0x3533b6[_0x43fcb7(0x140)],_0x3533b6['apiSecret'],_0x3533b6[_0x43fcb7(0x11c)]);try{await loadSymbols();}catch(_0x1b3a4a){if(_0x1b3a4a[_0x43fcb7(0x75)]()[_0x43fcb7(0x16e)](_0x43fcb7(0x6f))){proxyEmit(_0x43fcb7(0x1d8),![]);return;}else{handleError(_0x1b3a4a,'getPortfolio(1)');return;}}const _0x807d35=await getCoins(0x0,![],_0x3533b6[_0x43fcb7(0xda)]);_0x5b7fcd=cloneDeep(_0x807d35[0x1]);}else _0x5b7fcd=cloneDeep(currentCoinsAll);if(_0x3533b6[_0x43fcb7(0xda)]=='')proxyEmit('portfolio',_0x5b7fcd);else{_0x5b7fcd[_0x43fcb7(0xe5)](_0x1b11c8=>{const _0x2bd5dd=_0x43fcb7;if(_0x1b11c8[_0x2bd5dd(0x1cd)]!=_0x3533b6['basecoin']&&allSymbols[_0x2bd5dd(0x16e)](_0x1b11c8[_0x2bd5dd(0x15b)]))_0x54c63c[_0x2bd5dd(0xf4)](_0x1b11c8[_0x2bd5dd(0x15b)]);});if(_0x54c63c[_0x43fcb7(0x1e5)]==0x0)logHistory(_0x43fcb7(0x104),_0x43fcb7(0x17b));else{try{_0x3206a8=await getTickers(_0x54c63c);}catch(_0x5198f8){if(_0x5198f8[_0x43fcb7(0x75)]()[_0x43fcb7(0x16e)](_0x43fcb7(0x6f))){proxyEmit(_0x43fcb7(0x1d8),![]);return;}else handleError(_0x5198f8,_0x43fcb7(0x1cb));}_0x5b7fcd[_0x43fcb7(0xe5)](_0x529f46=>{const _0x47e5c7=_0x43fcb7;_0x529f46['coin']!=_0x3533b6[_0x47e5c7(0xda)]?_0x3206a8[_0x529f46[_0x47e5c7(0x15b)]]?_0x3931b4=_0x529f46[_0x47e5c7(0x17e)]?0x1/_0x3206a8[_0x529f46['symbol']][_0x47e5c7(0xfc)]:_0x3206a8[_0x529f46[_0x47e5c7(0x15b)]][_0x47e5c7(0xfc)]:_0x3931b4=0x0:_0x3931b4=0x1,_0x529f46[_0x47e5c7(0xb1)]=formatResult(_0x3931b4,0x8);}),proxyEmit(_0x43fcb7(0x1d8),_0x5b7fcd);}}}function truncateTradeAmount(_0x4df5e3,_0x3f54b2){let _0x58c545=0x0;try{_0x58c545=exchange['amountToPrecision'](_0x4df5e3,_0x3f54b2);}catch(_0x354fc0){}return _0x58c545;}function checkMinimums(_0x34fd6f){const _0x1eb8ce=_0x30c2d2;let _0x1df556=!![];const _0x208763=!_0x34fd6f[_0x1eb8ce(0x17e)]?markets[_0x34fd6f[_0x1eb8ce(0x15b)]][_0x1eb8ce(0x1c2)][_0x1eb8ce(0x100)][_0x1eb8ce(0x1a9)]:markets[_0x34fd6f['symbol']]['limits'][_0x1eb8ce(0xc8)][_0x1eb8ce(0x1a9)],_0x2ff7b5=!_0x34fd6f[_0x1eb8ce(0x17e)]?markets[_0x34fd6f[_0x1eb8ce(0x15b)]][_0x1eb8ce(0x1c2)][_0x1eb8ce(0xc8)][_0x1eb8ce(0x1a9)]:markets[_0x34fd6f['symbol']][_0x1eb8ce(0x1c2)][_0x1eb8ce(0x100)][_0x1eb8ce(0x1a9)],_0x20d757=truncateTradeAmount(_0x34fd6f[_0x1eb8ce(0x15b)],_0x34fd6f[_0x1eb8ce(0xea)]);_0x34fd6f[_0x1eb8ce(0xea)]=_0x20d757;if(Math[_0x1eb8ce(0x1ae)](_0x20d757)<_0x208763)_0x1df556=![];if(Math[_0x1eb8ce(0x1ae)](_0x20d757)*_0x34fd6f['last']<_0x2ff7b5)_0x1df556=![];if(_0x34fd6f[_0x1eb8ce(0x93)]=='sell'){let _0x1af684=config[_0x1eb8ce(0x1d8)][_0x1eb8ce(0x159)](_0x106a9a=>_0x106a9a[_0x1eb8ce(0x1cd)]==_0x34fd6f[_0x1eb8ce(0x1cd)]);if(_0x1af684['offset']>0x0){if(Math['abs'](_0x20d757)>_0x34fd6f[_0x1eb8ce(0x14c)]-_0x1af684[_0x1eb8ce(0xa5)])_0x1df556=![];}else{if(Math['abs'](_0x20d757)>_0x34fd6f['number'])_0x1df556=![];}}if(_0x34fd6f[_0x1eb8ce(0x93)]==_0x1eb8ce(0x119)){let _0x365882=config[_0x1eb8ce(0x1d8)][_0x1eb8ce(0x159)](_0x4170cb=>_0x4170cb[_0x1eb8ce(0x1cd)]==config[_0x1eb8ce(0xda)]),_0x1e2cc6=currentCoins[_0x1eb8ce(0x159)](_0x4da512=>_0x4da512[_0x1eb8ce(0x1cd)]==config[_0x1eb8ce(0xda)]);if(_0x365882[_0x1eb8ce(0xa5)]>0x0){if(Math[_0x1eb8ce(0x1ae)](_0x20d757)*_0x34fd6f[_0x1eb8ce(0xfc)]>_0x1e2cc6[_0x1eb8ce(0x14c)]-_0x365882[_0x1eb8ce(0xa5)])_0x1df556=![];}else{if(Math[_0x1eb8ce(0x1ae)](_0x20d757)*_0x34fd6f[_0x1eb8ce(0xfc)]>_0x1e2cc6['number'])_0x1df556=![];}}return _0x1df556;}async function getBalances(_0x51b432=!![]){const _0x2b5fa1=_0x30c2d2;let _0xdeaee2=0x0,_0x54ebfd;const _0x1c05cb=config[_0x2b5fa1(0x1f8)];if(config[_0x2b5fa1(0xbd)]&&config[_0x2b5fa1(0x18c)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x6ddbd9=>{const _0x25b3c5=_0x2b5fa1;if(_0x6ddbd9[_0x25b3c5(0x1cd)]!=config[_0x25b3c5(0xda)]){let _0x510f58=global[_0x25b3c5(0x84)][noslash(_0x6ddbd9[_0x25b3c5(0x15b)])];_0x54ebfd=_0x6ddbd9[_0x25b3c5(0x17e)]?0x1/_0x510f58:_0x510f58;}else _0x54ebfd=0x1;let _0x30791b=_0x6ddbd9[_0x25b3c5(0x14c)]*_0x54ebfd;_0xdeaee2+=_0x30791b,_0x6ddbd9[_0x25b3c5(0xfc)]=formatResult(Number(_0x54ebfd),0x8),_0x6ddbd9[_0x25b3c5(0x143)]=_0x30791b;}),currentCoins[_0x2b5fa1(0xe5)](_0x3f4428=>{const _0x3ad5f8=_0x2b5fa1;let _0x1f6a83=config[_0x3ad5f8(0x1d8)]['find'](_0x412468=>_0x412468[_0x3ad5f8(0x1cd)]==_0x3f4428[_0x3ad5f8(0x1cd)]),_0x90313=Number(_0x1f6a83[_0x3ad5f8(0xe6)]),_0x5bfb29=_0x3f4428[_0x3ad5f8(0x143)]/_0xdeaee2*0x64,_0x4d863d=_0x90313*_0xdeaee2/0x64/_0x3f4428['last']-_0x3f4428[_0x3ad5f8(0x14c)];_0x3f4428['distribution']=formatResult(_0x5bfb29,0x3),_0x3f4428[_0x3ad5f8(0xba)]=formatResult(_0x90313,0x3),_0x3f4428[_0x3ad5f8(0xea)]=formatResult(_0x4d863d,0x8),_0x3f4428['side']='',_0x3f4428['valid']=![];if(_0x3f4428[_0x3ad5f8(0x1cd)]!=config['basecoin']){if(_0x3f4428[_0x3ad5f8(0xe6)]>_0x90313)_0x3f4428[_0x3ad5f8(0x93)]=_0x3ad5f8(0xfd),_0x3f4428[_0x3ad5f8(0x1ec)]=checkMinimums(_0x3f4428);else _0x3f4428['distribution']<_0x90313&&(_0x3f4428[_0x3ad5f8(0x93)]=_0x3ad5f8(0x119),_0x3f4428['valid']=checkMinimums(_0x3f4428));}_0x3f4428[_0x3ad5f8(0x190)]=_0x3f4428[_0x3ad5f8(0xe6)]/_0x3f4428[_0x3ad5f8(0xba)]-0x1;if(_0x3f4428['orderstatus']==_0x3ad5f8(0x200)||_0x3f4428[_0x3ad5f8(0x18f)]==_0x3ad5f8(0x121))_0x3f4428['orderstatus']=_0x3ad5f8(0xd1);}),currentCoins[_0x2b5fa1(0x8e)]((_0x1bae6c,_0x5bafaa)=>_0x1bae6c[_0x2b5fa1(0x190)]<_0x5bafaa[_0x2b5fa1(0x190)]?0x1:_0x5bafaa[_0x2b5fa1(0x190)]<_0x1bae6c[_0x2b5fa1(0x190)]?-0x1:0x0);const _0x30752b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x30752b[_0x2b5fa1(0xa0)],'usd':_0x30752b[_0x2b5fa1(0x9f)],'portfolio':JSON[_0x2b5fa1(0x19a)](currentCoins),'threshold':_0x1c05cb},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x51b432){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x1c05cb});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1c05cb});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x346945=getNormalizedPerformance();getStartingBalances(_0x346945),emitPerformance(_0x346945);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x38b4e5=getNormalizedPerformance();emitPerformance(_0x38b4e5),getStartingBalances(_0x38b4e5),logger[_0x2b5fa1(0x1a3)](_0x2b5fa1(0x88));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5cd5af=_0x30c2d2;if(!lastBalances)return;let _0x4b19a6=[],_0x4ba9f1,_0x17d4ec=JSON[_0x5cd5af(0x1d5)](lastBalances[_0x5cd5af(0x1d8)]);_0x17d4ec[_0x5cd5af(0x8e)]((_0xa999f4,_0x321a74)=>_0xa999f4[_0x5cd5af(0x1cd)]>_0x321a74[_0x5cd5af(0x1cd)]?0x1:_0x321a74[_0x5cd5af(0x1cd)]>_0xa999f4[_0x5cd5af(0x1cd)]?-0x1:0x0),_0x17d4ec[_0x5cd5af(0xe5)](_0x929b83=>{const _0x296be5=_0x5cd5af;let _0x5d95c0={'coin':_0x929b83[_0x296be5(0x1cd)],'number':_0x929b83[_0x296be5(0x14c)],'price':_0x929b83[_0x296be5(0xfc)]};_0x4b19a6[_0x296be5(0xf4)](_0x5d95c0);});const _0x1473b1=await getFiat();_0x4ba9f1={'date':lastBalances['time'][_0x5cd5af(0x7c)]('\x20')[0x0],'eur':_0x1473b1[_0x5cd5af(0xa0)],'usd':_0x1473b1[_0x5cd5af(0x9f)],'coins':_0x4b19a6};let _0x29f57a=dbPerformance[_0x5cd5af(0x19b)](_0x5cd5af(0x1bd))['find']({'date':_0x4ba9f1['date']})[_0x5cd5af(0x143)]();_0x29f57a?_0x4ba9f1[_0x5cd5af(0x86)]!=config['startdate']&&dbPerformance[_0x5cd5af(0x19b)](_0x5cd5af(0x1bd))[_0x5cd5af(0x159)]({'date':_0x4ba9f1[_0x5cd5af(0x86)]})[_0x5cd5af(0xfa)](_0x4ba9f1)[_0x5cd5af(0x110)]():dbPerformance[_0x5cd5af(0x19b)](_0x5cd5af(0x1bd))[_0x5cd5af(0xf4)](_0x4ba9f1)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x300cd8=_0x30c2d2;let _0x1379fd=[];if(dbPerformance[_0x300cd8(0x133)](_0x300cd8(0x1bd))[_0x300cd8(0x143)]()){let _0x3a5370=dbPerformance[_0x300cd8(0x19b)](_0x300cd8(0x1bd))['cloneDeep']()['filter'](_0x581050=>{if(_0x581050['coins']['length']==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0xd498e9=[...config['liquidity']];_0xd498e9['sort']((_0x300bc1,_0x57390b)=>_0x300bc1['date']>_0x57390b[_0x300cd8(0x86)]?-0x1:_0x57390b[_0x300cd8(0x86)]>_0x300bc1[_0x300cd8(0x86)]?0x1:0x0);let _0x54cccb=0x1,_0x1bb15d=[],_0x3c65df=0x0;_0x3a5370[_0x300cd8(0x153)]()[_0x300cd8(0x17e)]()[_0x300cd8(0xe5)]((_0x5a7f5f,_0x2132a7)=>{const _0x1e6ad7=_0x300cd8;if(_0xd498e9[_0x3c65df]){if(_0x3a5370[_0x3a5370[_0x1e6ad7(0x1e5)]-_0x2132a7]&&_0xd498e9[_0x3c65df][_0x1e6ad7(0x86)]==_0x3a5370[_0x3a5370[_0x1e6ad7(0x1e5)]-_0x2132a7][_0x1e6ad7(0x86)]){if(_0x2132a7<_0x3a5370[_0x1e6ad7(0x1e5)]){let _0x4f0638=0x0,_0x20dbf5=0x0;_0x3a5370[_0x3a5370[_0x1e6ad7(0x1e5)]-_0x2132a7][_0x1e6ad7(0xaa)][_0x1e6ad7(0xe5)](_0x1c1e7d=>{_0x20dbf5+=_0x1c1e7d['number']*_0x1c1e7d['price'];}),_0xd498e9[_0x3c65df][_0x1e6ad7(0x1e4)]['forEach'](_0x596bdc=>{const _0x2df575=_0x1e6ad7;_0x4f0638+=_0x596bdc[_0x2df575(0x14c)]*_0x596bdc[_0x2df575(0xb1)];}),_0x54cccb*=_0x4f0638/(_0x20dbf5-_0x4f0638)+0x1;}_0x3c65df++;}}let _0x2659f9=0x0;_0x5a7f5f[_0x1e6ad7(0xaa)][_0x1e6ad7(0xe5)](_0x20a134=>{const _0x4edb7a=_0x1e6ad7;_0x2659f9+=_0x20a134[_0x4edb7a(0x14c)]*_0x20a134[_0x4edb7a(0xb1)];}),_0x1bb15d[_0x3a5370[_0x1e6ad7(0x1e5)]-_0x2132a7-0x1]=_0x2659f9*(_0x54cccb-0x1);});let _0x1319ff=[];_0xd498e9=[...config[_0x300cd8(0x1b9)]]||[];let _0xe28faa=0x0;_0x3c65df=0x0,_0x3a5370[_0x300cd8(0xe5)]((_0x5def55,_0x738084)=>{const _0x59bf89=_0x300cd8;if(_0xd498e9[_0x3c65df]){const _0x117bde=fns[_0x59bf89(0x1d5)](_0xd498e9[_0x3c65df]['date'],_0x59bf89(0xb6),new Date()),_0x8c046d=fns['parse'](_0x5def55[_0x59bf89(0x86)],_0x59bf89(0xb6),new Date());if(fns[_0x59bf89(0x19d)](_0x117bde,_0x8c046d)){let _0x5f3dd0=0x0;_0xd498e9[_0x3c65df][_0x59bf89(0x1e4)][_0x59bf89(0xe5)](_0x39b6ab=>{const _0x57884b=_0x59bf89;!_0x1319ff[_0x39b6ab[_0x57884b(0x1cd)]]?_0x1319ff[_0x39b6ab[_0x57884b(0x1cd)]]=_0x39b6ab[_0x57884b(0x14c)]:(_0x5f3dd0=_0x1319ff[_0x39b6ab['coin']],_0x1319ff[_0x39b6ab[_0x57884b(0x1cd)]]+=_0x39b6ab[_0x57884b(0x14c)]);const _0x196a35=_0x5def55[_0x57884b(0xaa)]['find'](_0x438741=>_0x438741[_0x57884b(0x1cd)]==_0x39b6ab[_0x57884b(0x1cd)]);(!_0x196a35||_0x196a35['number']==0x0)&&(_0xe28faa+=(-_0x39b6ab['number']-_0x5f3dd0)*_0x39b6ab[_0x57884b(0xb1)]);}),_0x3c65df++;}}_0x5def55[_0x59bf89(0xaa)][_0x59bf89(0xe5)]((_0x3d16ff,_0x4d2168)=>{const _0x4b24f0=_0x59bf89;_0x1319ff[_0x3d16ff[_0x4b24f0(0x1cd)]]&&(_0x3d16ff['initial']=_0x1319ff[_0x3d16ff[_0x4b24f0(0x1cd)]]);}),_0x1379fd[_0x59bf89(0xf4)]({'date':_0x5def55[_0x59bf89(0x86)],'eur':_0x5def55[_0x59bf89(0xa0)],'usd':_0x5def55[_0x59bf89(0x9f)],'offset':_0x1bb15d[_0x738084],'netoffset':_0xe28faa,'coins':_0x5def55['coins']});});}return _0x1379fd;}function emitPerformance(_0x1d594a){const _0x4a6314=_0x30c2d2;_0x1d594a[_0x4a6314(0x1e5)]!==0x0?(proxyEmit(_0x4a6314(0x103),_0x1d594a),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x19561b,_0x147098){const _0x2d75e1=_0x30c2d2;let _0x2972e3=0x0,_0x4a5ea6=0x0,_0x3c3ca3=0x0;_0x19561b['coins'][_0x2d75e1(0xe5)](_0x3c6623=>{const _0x17a108=_0x2d75e1;_0x2972e3+=_0x3c6623[_0x17a108(0x14c)]*_0x3c6623[_0x17a108(0xb1)];});_0x147098&&(_0x2972e3+=_0x19561b['offset']);if(config[_0x2d75e1(0xda)]===_0x2d75e1(0x1d0)||config[_0x2d75e1(0xda)]===_0x2d75e1(0xb3))_0x4a5ea6=_0x2972e3*_0x19561b[_0x2d75e1(0xa0)],_0x3c3ca3=_0x2972e3*_0x19561b['usd'];else{if(usdBasecoins[_0x2d75e1(0x16e)](config[_0x2d75e1(0xda)]))_0x4a5ea6=_0x2972e3*_0x19561b['eur']/_0x19561b['usd'],_0x3c3ca3=_0x2972e3;else config['basecoin']===_0x2d75e1(0x1af)&&(_0x4a5ea6=_0x2972e3,_0x3c3ca3=_0x2972e3*_0x19561b[_0x2d75e1(0x9f)]/_0x19561b[_0x2d75e1(0xa0)]);}return[_0x2972e3,_0x4a5ea6,_0x3c3ca3];}function getKPIs(_0x2362c1,_0x4c8f3c=_0x30c2d2(0x1af)){const _0x498953=_0x30c2d2,_0x3f4d1d=config['basecoin'],_0x5ba36d=lastBalances,_0x368cb5=currentCoins,_0xb0ead=getNormalizedPerformance(),_0x1605be=_0x2362c1==='basecoin'?_0x3f4d1d:_0x2362c1===_0x498953(0x1a0)||_0x2362c1===_0x498953(0x70)?_0x4c8f3c:_0x498953(0xdb)+_0x3f4d1d,_0x1558a8=_0x2362c1==='net-basecoin'?_0x498953(0x71):_0x2362c1===_0x498953(0x70)?_0x498953(0x71):_0x1605be+_0x498953(0x187),_0x5c7a32=_0x2362c1===_0x498953(0x1d4)||_0x2362c1===_0x498953(0x70)?_0x498953(0x71):_0x1605be+'\x20change';let _0x335cbb=0x0;_0x368cb5[_0x498953(0xe5)](_0x19f21c=>{const _0x1ce295=_0x498953;_0x335cbb+=_0x19f21c[_0x1ce295(0x14c)]*_0x19f21c['last'];});if(_0x2362c1==='fiat'||_0x2362c1===_0x498953(0x70)){if(_0x3f4d1d===_0x498953(0x1d0)||_0x3f4d1d===_0x498953(0xb3))_0x335cbb=_0x335cbb*(_0x4c8f3c===_0x498953(0x1af)?_0x5ba36d[_0x498953(0xa0)]:_0x5ba36d[_0x498953(0x9f)]);else{if(usdBasecoins[_0x498953(0x16e)](_0x3f4d1d))_0x335cbb=_0x335cbb*(_0x4c8f3c===_0x498953(0x1af)?_0x5ba36d['eur']/_0x5ba36d[_0x498953(0x9f)]:0x1);else _0x3f4d1d===_0x498953(0x1af)&&(_0x335cbb=_0x335cbb*(_0x4c8f3c==='EUR'?0x1:_0x5ba36d['usd']/_0x5ba36d[_0x498953(0xa0)]));}}let _0x4f96d0;if(_0x335cbb!==0x0){if(_0x2362c1==='basecoin')_0x4f96d0=(_0x335cbb/startingBalances[_0x498953(0xda)]-0x1)*0x64;else{if(_0x4c8f3c===_0x498953(0x1af))_0x4f96d0=(_0x335cbb/startingBalances[_0x498953(0xa0)]-0x1)*0x64;else _0x4f96d0=(_0x335cbb/startingBalances[_0x498953(0x9f)]-0x1)*0x64;}let _0x557440=0x0;if(startingBalances[_0x498953(0xaa)])_0x368cb5[_0x498953(0xe5)](_0x2f6674=>{const _0x2c3183=_0x498953;let _0x4ddd4e=startingBalances[_0x2c3183(0xaa)][_0x2c3183(0x159)](_0x35246d=>_0x35246d[_0x2c3183(0x1cd)]===_0x2f6674[_0x2c3183(0x1cd)]);if(_0x4ddd4e&&_0x4ddd4e[_0x2c3183(0x1cd)]&&_0x2f6674[_0x2c3183(0x14c)]!==0x0)_0x557440+=_0x4ddd4e[_0x2c3183(0x14c)]*_0x2f6674[_0x2c3183(0xfc)];});let _0x1b10b7=0x0;if(_0xb0ead[_0x498953(0x1e5)]!==0x0){let _0x1eba9c=_0xb0ead[_0xb0ead['length']-0x1];_0x1b10b7=_0x1eba9c[_0x498953(0x1b0)];}_0x557440-=_0x1b10b7;_0x2362c1==='net-basecoin'&&(_0x4f96d0=(_0x335cbb-_0x557440)/startingBalances[_0x498953(0xda)]*0x64,_0x335cbb=_0x335cbb-_0x557440);if(_0x2362c1==='net-fiat'){let _0x3aff80=_0x4c8f3c===_0x498953(0x1af)?startingBalances['eur']:startingBalances['usd'];if(_0x3f4d1d==='BTC'||_0x3f4d1d===_0x498953(0xb3))_0x557440=_0x4c8f3c===_0x498953(0x1af)?_0x557440*_0x5ba36d[_0x498953(0xa0)]:_0x557440*_0x5ba36d['usd'];else{if(usdBasecoins['includes'](_0x3f4d1d))_0x557440=_0x4c8f3c===_0x498953(0x1af)?_0x557440*_0x5ba36d['eur']/_0x5ba36d[_0x498953(0x9f)]:_0x557440;else _0x3f4d1d===_0x498953(0x1af)&&(_0x557440=_0x4c8f3c===_0x498953(0x1af)?_0x557440:_0x557440*_0x5ba36d['usd']/_0x5ba36d[_0x498953(0xa0)]);}_0x4f96d0=(_0x335cbb-_0x557440)/_0x3aff80*0x64,_0x335cbb=_0x335cbb-_0x557440;}if(_0x4f96d0){if(_0x4f96d0<0x64)_0x4f96d0=_0x4f96d0[_0x498953(0x201)](0x2);else{if(_0x4f96d0<0x3e8)_0x4f96d0=_0x4f96d0[_0x498953(0x201)](0x1);else _0x4f96d0=_0x4f96d0[_0x498953(0x201)](0x0);}}else _0x4f96d0=Number('0')[_0x498953(0x201)](0x2);if(_0x335cbb){if(Math['abs'](_0x335cbb)<0.000001)_0x335cbb=_0x335cbb[_0x498953(0x201)](0x2);else{if(Math[_0x498953(0x1ae)](_0x335cbb)<0.1)_0x335cbb=_0x335cbb[_0x498953(0x201)](0x6);else{if(Math[_0x498953(0x1ae)](_0x335cbb)<0x1)_0x335cbb=_0x335cbb['toFixed'](0x5);else{if(Math[_0x498953(0x1ae)](_0x335cbb)<0xa)_0x335cbb=_0x335cbb['toFixed'](0x4);else{if(Math[_0x498953(0x1ae)](_0x335cbb)<0x64)_0x335cbb=_0x335cbb[_0x498953(0x201)](0x3);else{if(Math['abs'](_0x335cbb)<0x3e8)_0x335cbb=_0x335cbb[_0x498953(0x201)](0x2);else _0x335cbb=_0x335cbb[_0x498953(0x201)](0x2);}}}}}}else _0x335cbb=Number('0')[_0x498953(0x201)](0x2);}else _0x4f96d0=Number('0')[_0x498953(0x201)](0x2);return{'value':_0x335cbb,'change':_0x4f96d0,'leftTxt':_0x1558a8,'rightTxt':_0x5c7a32};}async function getStartingBalances(_0x259ecc,_0x1b05ae=!![]){const _0x57a98a=_0x30c2d2;if(_0x259ecc['length']!==0x0){const [_0x476a6e,_0x230ed2,_0x475dfb]=getPerf(_0x259ecc[0x0],!![]);let _0x219c94=[];config[_0x57a98a(0x1d8)][_0x57a98a(0xe5)](_0xe3f2b7=>{const _0x44e800=_0x57a98a;let _0x5f2e10=0x0,_0x507c5a;config['liquidity'][_0x44e800(0xe5)](_0x47de88=>{const _0x43dbe6=_0x44e800;let _0x56f2b2=_0x47de88[_0x43dbe6(0x1e4)][_0x43dbe6(0x159)](_0x286f91=>_0x286f91['coin']==_0xe3f2b7[_0x43dbe6(0x1cd)]);if(_0x56f2b2){_0x5f2e10+=_0x56f2b2[_0x43dbe6(0x14c)];if(!_0x507c5a)_0x507c5a=_0x56f2b2['price'];}}),_0x219c94[_0x44e800(0xf4)]({'coin':_0xe3f2b7['coin'],'number':_0x5f2e10,'initialprice':_0x507c5a});});const _0x4c94e2={'basecoin':_0x476a6e,'eur':_0x230ed2,'usd':_0x475dfb,'coins':_0x219c94};if(_0x1b05ae)proxyEmit(_0x57a98a(0xe4),_0x4c94e2);startingBalances=_0x4c94e2;}}function headlessMode(_0x4c2ea4){const _0x10efcd=_0x30c2d2;let _0x2434a5=_0x4c2ea4[_0x10efcd(0x1d8)],_0x2cb547=_0x4c2ea4['threshold'],_0x3937f9=[];for(let _0x5bb39e of _0x2434a5){if(_0x5bb39e[_0x10efcd(0x1cd)]!=config['basecoin']){if(_0x5bb39e[_0x10efcd(0x190)]>=_0x2cb547/0x64){if(_0x5bb39e[_0x10efcd(0x1ec)])_0x3937f9['push'](_0x5bb39e);}else{if(_0x5bb39e[_0x10efcd(0x190)]<=-_0x2cb547/0x64){if(_0x5bb39e[_0x10efcd(0x1ec)])_0x3937f9[_0x10efcd(0xf4)](_0x5bb39e);}}}}_0x3937f9['length']>0x0&&(lockOrders==ORDERS[_0x10efcd(0x174)]&&!coolingDown&&_0x3937f9[_0x10efcd(0xe5)](_0x374e0e=>{const _0xf8266c=_0x10efcd;logger[_0xf8266c(0x1a3)]('Trigger:\x20'+_0x374e0e[_0xf8266c(0x1cd)]+'\x20'+_0x374e0e[_0xf8266c(0x14c)]+'\x20'+_0x374e0e[_0xf8266c(0xfc)]+'\x20'+_0x374e0e[_0xf8266c(0xe6)]+'%\x20'+_0x374e0e[_0xf8266c(0xba)]+'%\x20'+(0x64*_0x374e0e['delta'])['toFixed'](0x2)+'%\x20('+_0x2cb547[_0xf8266c(0x201)](0x2)+'%)');}),placeOrder(_0x3937f9));}function notifyBalance(_0x1d99a9){const _0x38bfad=_0x30c2d2;let _0x2232f3=_0x1d99a9[_0x38bfad(0x1d8)],_0x4749bd=_0x1d99a9['threshold'],_0x324af4=[];for(let _0x7ac342 of _0x2232f3){if(_0x7ac342[_0x38bfad(0x1cd)]!=config['basecoin']){if(_0x7ac342['delta']>=_0x4749bd/0x64){if(_0x7ac342[_0x38bfad(0x1ec)])_0x324af4[_0x38bfad(0xf4)](_0x7ac342);}else{if(_0x7ac342[_0x38bfad(0x190)]<=-_0x4749bd/0x64){if(_0x7ac342[_0x38bfad(0x1ec)])_0x324af4['push'](_0x7ac342);}}}}if(_0x324af4['length']>0x0){let _0x2d9533=_0x324af4[_0x38bfad(0x14e)](_0x631594=>_0x631594[_0x38bfad(0x1cd)]);_0x2d9533['sort']();let _0x1aeffb=_0x2d9533['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x38bfad(0x126),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x1aeffb;}}function symbolToCoin(_0x2e6e9f){const _0x251ced=_0x30c2d2;let _0x423e47;if(_0x2e6e9f[_0x251ced(0x16e)]('/'+config[_0x251ced(0xda)]))_0x423e47=_0x2e6e9f[_0x251ced(0x10a)]('/'+config[_0x251ced(0xda)],'');if(_0x2e6e9f['includes'](config[_0x251ced(0xda)]+'/'))_0x423e47=_0x2e6e9f['replace'](config['basecoin']+'/','');return _0x423e47;}async function unlockOrders(){const _0xd96854=_0x30c2d2;if(allOrdersPlaced&&lockOrders==ORDERS[_0xd96854(0xca)]){logger[_0xd96854(0x1a3)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x174023=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x174023,validateOrdersState=_0xd96854(0xb0),persistOpenOrders([]),lockOrders=ORDERS[_0xd96854(0x174)],logger[_0xd96854(0x1a3)](_0xd96854(0x176));}}async function validateOrders(_0x391b6e){const _0x145315=_0x30c2d2;if(_0x391b6e)validateOrdersState=_0x391b6e;logger[_0x145315(0x1a3)](_0x145315(0x198)+validateOrdersState+_0x145315(0xd2)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x145315(0x1ff):'ORDERS.UNLOCKED'));let _0x39c7cf=[],_0x157519=config[_0x145315(0x1c3)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x145315(0x147)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x145315(0xca)])return;logger[_0x145315(0x1a3)](_0x145315(0xaf)+validateOrdersState),lastOrders[_0x145315(0xe5)](_0x1fa6b3=>{const _0x304350=_0x145315;let _0x808fd8=![];_0x1fa6b3[_0x304350(0x200)]>0x0&&(_0x808fd8=!![]),_0x39c7cf['push'](_0x808fd8),_0x808fd8&&config['ordertype']!='market'&&logHistory(_0x304350(0x1aa),_0x304350(0x1a6)+_0x1fa6b3[_0x304350(0x15b)]+'\x20'+_0x1fa6b3[_0x304350(0x93)]+'\x20#'+formatResult(_0x1fa6b3[_0x304350(0x200)],0x8)+'\x20@'+formatResult(_0x1fa6b3['price'],0x8));}),_0x39c7cf[_0x145315(0xe5)]((_0x1814fc,_0x212932)=>{const _0x1641a2=_0x145315;if(_0x1814fc)lastOrders[_0x1641a2(0x105)](_0x212932,0x1);}),persistOpenOrders(lastOrders);const _0x4f1eb9=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x39c7cf[_0x145315(0x16e)](![])){if(config[_0x145315(0x1c3)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x145315(0x164)){if(_0x39c7cf[_0x145315(0x16e)](![])){}else{if(allOrdersPlaced){if(config[_0x145315(0x1c3)]==_0x145315(0xcb)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x145315(0xf7))_0x39c7cf[_0x145315(0x16e)](![])&&(config[_0x145315(0x1c3)]==_0x145315(0xcb)?logHistory(_0x145315(0x116),_0x145315(0xbc)+Math[_0x145315(0x195)](_0x157519*validateOrderInterval/0xea60)+_0x145315(0x1bf)+_0x4f1eb9):(await cancelOrders(),logHistory(_0x145315(0x116),_0x145315(0x18d)+Math[_0x145315(0x195)](_0x157519*validateOrderInterval/0xea60)+_0x145315(0x1bf)+_0x4f1eb9))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x145315(0x1c3)]!=_0x145315(0xcb))logHistory(_0x145315(0x116),_0x145315(0x17d)+_0x4f1eb9);await unlockOrders();}}}}}async function cancelOrders(){const _0x184e25=_0x30c2d2;lastOrders[_0x184e25(0xe5)](async _0x3b339d=>{const _0x53010f=_0x184e25;try{const _0x3bba26=await exchange[_0x53010f(0x1fd)](_0x3b339d['orderId'],_0x3b339d[_0x53010f(0x15b)]);}catch(_0x3b370d){if(_0x3b370d[_0x53010f(0x75)]()[_0x53010f(0x16e)]('OrderNotFound')){}else await handleError(_0x3b370d,'cancelOrders()');}});}async function initCoinResults(_0x6d9ad9){const _0x49a9c1=_0x30c2d2;_0x6d9ad9?logger[_0x49a9c1(0x1a3)](_0x49a9c1(0x1dd)+_0x6d9ad9):logger[_0x49a9c1(0x1a3)](_0x49a9c1(0x1f2)),config['portfolio'][_0x49a9c1(0xe5)](_0x53d739=>{const _0x3f2403=_0x49a9c1;if(!_0x53d739[_0x3f2403(0x11f)]&&_0x53d739[_0x3f2403(0x1cd)]!=config[_0x3f2403(0xda)]){const _0x4af0e4=currentCoins['find'](_0x360507=>_0x360507['coin']==_0x53d739['coin']),_0x228c58=global['ticker'][noslash(_0x53d739[_0x3f2403(0x15b)])];let _0x55e190=_0x4af0e4?_0x4af0e4['number']:null,_0x349992=_0x53d739[_0x3f2403(0x17e)]?0x1/_0x228c58:_0x228c58,_0x321c72;config['liquidity'][_0x3f2403(0xe5)](_0x431ed5=>{const _0x37ea66=_0x3f2403;!_0x321c72&&(_0x321c72=_0x431ed5[_0x37ea66(0x1e4)][_0x37ea66(0x159)](_0x32b5b6=>_0x32b5b6['coin']==_0x53d739[_0x37ea66(0x1cd)]),_0x321c72&&(_0x55e190=_0x321c72[_0x37ea66(0x14c)],_0x349992=_0x321c72[_0x37ea66(0xb1)]));});let _0x556f60=dbCoinResults['get'](_0x3f2403(0xaa))['find']({'coin':_0x53d739['coin']})[_0x3f2403(0x143)]();if(!_0x556f60){const _0x39e19c={'coin':_0x53d739['coin'],'number':_0x55e190,'breakeven':_0x349992,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3f2403(0x19b)](_0x3f2403(0xaa))[_0x3f2403(0xf4)](_0x39e19c)[_0x3f2403(0x110)]();}else{if(_0x6d9ad9&&_0x53d739[_0x3f2403(0x1cd)]==_0x6d9ad9){const _0x1b85ab={'coin':_0x53d739[_0x3f2403(0x1cd)],'number':_0x55e190,'breakeven':_0x349992,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3f2403(0x19b)](_0x3f2403(0xaa))[_0x3f2403(0x159)]({'coin':_0x53d739[_0x3f2403(0x1cd)]})[_0x3f2403(0xfa)](_0x1b85ab)[_0x3f2403(0x110)]();}}}});}async function updateCoinResults(_0xaece86,_0xaa5359=![]){const _0x5ebb82=_0x30c2d2;let _0x32503b,_0x4d29cc,_0x32b56f,_0x2136fe,_0x1d60ee,_0x5a0420,_0x3377c2=dbCoinResults['get'](_0x5ebb82(0xaa))[_0x5ebb82(0x159)]({'coin':_0xaece86[_0x5ebb82(0x1cd)]})[_0x5ebb82(0x143)](),_0x5de768=![];_0x3377c2&&Object[_0x5ebb82(0x7b)](_0x3377c2)['forEach'](([_0x267375,_0x185026])=>{if(_0x185026==null)_0x5de768=!![];});(!_0x3377c2||_0x5de768)&&(await initCoinResults(_0xaece86[_0x5ebb82(0x1cd)]),_0x3377c2=dbCoinResults[_0x5ebb82(0x19b)](_0x5ebb82(0xaa))['find']({'coin':_0xaece86[_0x5ebb82(0x1cd)]})[_0x5ebb82(0x143)]());_0xaece86['reverse']&&(_0x5a0420={'filled':_0xaece86[_0x5ebb82(0x200)]*_0xaece86[_0x5ebb82(0xb1)],'amount':_0xaece86['filled']*_0xaece86['price'],'side':_0xaece86[_0x5ebb82(0x93)]==_0x5ebb82(0xfd)?_0x5ebb82(0x119):_0x5ebb82(0xfd),'price':0x1/_0xaece86['price']},_0xaece86={..._0xaece86,..._0x5a0420});_0xaa5359?_0x4d29cc=_0xaece86[_0x5ebb82(0x93)]==_0x5ebb82(0x119)?_0x3377c2[_0x5ebb82(0x14c)]+_0xaece86[_0x5ebb82(0x200)]:_0x3377c2[_0x5ebb82(0x14c)]-_0xaece86[_0x5ebb82(0x200)]:_0x4d29cc=await getCoinNumber(_0xaece86[_0x5ebb82(0x1cd)]);if(_0xaece86[_0x5ebb82(0x111)]&&_0xaece86['fee'][_0x5ebb82(0x1bc)]==config[_0x5ebb82(0xda)])_0x32503b=_0xaece86['fee']['cost'];else{if(_0xaece86['fee']&&_0xaece86[_0x5ebb82(0x111)]['currency']==_0x5ebb82(0xd3)&&!_0xaa5359)_0x32503b=_0xaece86[_0x5ebb82(0x111)][_0x5ebb82(0xc8)]*global[_0x5ebb82(0x84)][_0x5ebb82(0xd3)+config[_0x5ebb82(0xda)]];else _0x32503b=defaultFee*_0xaece86['filled']*_0xaece86['price'];}_0xaece86[_0x5ebb82(0x93)]=='buy'?(_0x32b56f=_0x4d29cc!=0x0?(_0x3377c2[_0x5ebb82(0x17c)]*_0x3377c2[_0x5ebb82(0x14c)]+_0xaece86[_0x5ebb82(0xb1)]*(_0x4d29cc-_0x3377c2['number'])+_0x32503b)/_0x4d29cc:0x0,_0x2136fe=_0x3377c2[_0x5ebb82(0xc3)]):(_0x32b56f=_0x4d29cc!=0x0?(_0x3377c2[_0x5ebb82(0x17c)]*_0x3377c2[_0x5ebb82(0x14c)]-_0xaece86[_0x5ebb82(0xb1)]*(_0x3377c2[_0x5ebb82(0x14c)]-_0x4d29cc)+_0x32503b)/_0x4d29cc:0x0,_0x2136fe=_0x3377c2['realized']+(_0xaece86[_0x5ebb82(0xb1)]-_0x3377c2['breakeven'])*_0xaece86[_0x5ebb82(0x200)]);_0x1d60ee=(_0xaece86['price']-_0x32b56f-_0x32503b/_0xaece86[_0x5ebb82(0x200)])*_0x4d29cc;let _0x66c40={'coin':_0xaece86['coin'],'number':_0x4d29cc,'breakeven':formatResult(_0x32b56f,0x8),'realized':formatResult(_0x2136fe,0x8),'unrealized':formatResult(_0x1d60ee,0x8),'fees':formatResult(_0x3377c2[_0x5ebb82(0x1e2)]+_0x32503b,0x8),'sells':_0xaece86['side']==_0x5ebb82(0xfd)?_0x3377c2[_0x5ebb82(0x16c)]+0x1:_0x3377c2[_0x5ebb82(0x16c)],'buys':_0xaece86[_0x5ebb82(0x93)]==_0x5ebb82(0x119)?_0x3377c2[_0x5ebb82(0xb2)]+0x1:_0x3377c2[_0x5ebb82(0xb2)]};dbCoinResults[_0x5ebb82(0x19b)]('coins')[_0x5ebb82(0x159)]({'coin':_0xaece86[_0x5ebb82(0x1cd)]})[_0x5ebb82(0xfa)](_0x66c40)[_0x5ebb82(0x110)]();if(!_0xaa5359){if(_0xaece86['fee']&&_0xaece86[_0x5ebb82(0x111)][_0x5ebb82(0x1bc)]==_0x5ebb82(0xd3)){const _0x38efa3=currentCoins['find'](_0x55fc86=>_0x55fc86[_0x5ebb82(0x1cd)]==_0x5ebb82(0xd3));if(_0x38efa3){let _0x2e1496=dbCoinResults['get'](_0x5ebb82(0xaa))[_0x5ebb82(0x159)]({'coin':_0x5ebb82(0xd3)})['value']();_0x66c40={..._0x2e1496,'number':_0x38efa3['number']},dbCoinResults[_0x5ebb82(0x19b)](_0x5ebb82(0xaa))[_0x5ebb82(0x159)]({'coin':'BNB'})[_0x5ebb82(0xfa)](_0x66c40)[_0x5ebb82(0x110)]();}}}}async function placeOrder(_0x5ccbc6){const _0xeeda6d=_0x30c2d2,_0x2a8e78=config[_0xeeda6d(0x1c3)]==_0xeeda6d(0xcb)?'market':_0xeeda6d(0x1eb);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xeeda6d(0xca)],allOrdersPlaced=![],validateOrdersState='initial';let _0x3aea01=![];lastOrders=[];for(const _0x2ff418 of _0x5ccbc6){let _0x56570b,_0x18878e,_0x5f3019,_0x34bfd1,_0x5773f0,_0x52e9a8=_0x2ff418[_0xeeda6d(0x15b)];try{const _0x2442f0=await exchange[_0xeeda6d(0x10e)](_0x52e9a8);_0x56570b=_0x2ff418[_0xeeda6d(0x17e)]?0x1/_0x2ff418['last']:_0x2ff418[_0xeeda6d(0xfc)],_0x18878e=_0x2442f0['bid'],_0x5f3019=_0x2442f0[_0xeeda6d(0x1b2)];_0x2ff418[_0xeeda6d(0x17e)]?(_0x34bfd1=_0x2ff418[_0xeeda6d(0x93)]==_0xeeda6d(0x119)?'sell':_0xeeda6d(0x119),_0x5773f0=Math[_0xeeda6d(0x1ae)](_0x2ff418[_0xeeda6d(0xea)])/_0x56570b):(_0x34bfd1=_0x2ff418[_0xeeda6d(0x93)],_0x5773f0=Math[_0xeeda6d(0x1ae)](_0x2ff418['trade']));_0x2a8e78=='limit'&&(config[_0xeeda6d(0x1c3)]==_0xeeda6d(0x11d)&&(_0x56570b=_0x34bfd1==_0xeeda6d(0x119)?_0x18878e:_0x5f3019),config['ordertype']=='limit-low'&&(_0x56570b=_0x34bfd1==_0xeeda6d(0x119)?_0x5f3019:_0x18878e));_0x5773f0=formatResult(_0x5773f0,0x8),_0x56570b=formatResult(_0x56570b,0x8);const _0x3e3d0b=_0x34bfd1==_0xeeda6d(0xfd)?config[_0xeeda6d(0x78)]?String[_0xeeda6d(0x171)]('0x'+config[_0xeeda6d(0x78)])+'\x20':'':config[_0xeeda6d(0x90)]?String[_0xeeda6d(0x171)]('0x'+config[_0xeeda6d(0x90)])+'\x20':'',_0xc56a82=_0x2a8e78==_0xeeda6d(0xcb)?_0xeeda6d(0x11b):config['ordertype']==_0xeeda6d(0x11d)?_0xeeda6d(0x128):_0xeeda6d(0x82),_0x43cce3=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0xeeda6d(0xf4)]({'customId':_0x43cce3,'symbol':_0x52e9a8,'coin':_0x2ff418[_0xeeda6d(0x1cd)],'amount':_0x5773f0,'price':_0x56570b,'side':_0x34bfd1,'reverse':_0x2ff418[_0xeeda6d(0x17e)],'filled':0x0});if(_0x2a8e78==_0xeeda6d(0xcb))logHistory(_0xeeda6d(0x1aa),''+_0x3e3d0b+_0xc56a82+'\x20order:\x20'+_0x52e9a8+'\x20'+_0x34bfd1+'\x20#'+formatResult(_0x5773f0,0x8)+'\x20@'+formatResult(_0x56570b,0x8));else logHistory(_0xeeda6d(0x1aa),''+_0x3e3d0b+_0xc56a82+_0xeeda6d(0x1cc)+_0x52e9a8+'\x20'+_0x34bfd1+'\x20#'+formatResult(_0x5773f0,0x8)+'\x20@'+formatResult(_0x56570b,0x8));let _0x42eb74;_0x2a8e78==_0xeeda6d(0xcb)?_0x34bfd1==_0xeeda6d(0x119)&&[_0xeeda6d(0xdd),_0xeeda6d(0x81),_0xeeda6d(0xc6),_0xeeda6d(0xcd),_0xeeda6d(0xc4)][_0xeeda6d(0x16e)](config[_0xeeda6d(0x117)])?_0x42eb74=await exchange[_0xeeda6d(0x166)](_0x52e9a8,_0x2a8e78,_0x34bfd1,_0x5773f0,_0x56570b):_0x42eb74=await exchange[_0xeeda6d(0x166)](_0x52e9a8,_0x2a8e78,_0x34bfd1,_0x5773f0,undefined):_0x42eb74=await exchange[_0xeeda6d(0x166)](_0x52e9a8,_0x2a8e78,_0x34bfd1,_0x5773f0,_0x56570b);logger[_0xeeda6d(0x1a3)](_0xeeda6d(0x1ad)+_0x42eb74['id']+_0xeeda6d(0x1cf)+_0x43cce3);const _0x3d6796=lastOrders[_0xeeda6d(0x1e5)]-0x1;if(_0x3d6796>=0x0&&lastOrders[_0x3d6796][_0xeeda6d(0xc7)]==_0x43cce3){lastOrders[_0x3d6796][_0xeeda6d(0xb4)]=_0x42eb74['id'];if(_0x42eb74[_0xeeda6d(0x100)])lastOrders[_0x3d6796][_0xeeda6d(0x100)]=_0x42eb74[_0xeeda6d(0x100)];if(_0x42eb74[_0xeeda6d(0xb1)])lastOrders[_0x3d6796]['price']=_0x42eb74[_0xeeda6d(0xb1)];lastOrders[_0x3d6796][_0xeeda6d(0x111)]=_0x42eb74['fee'];}if(config[_0xeeda6d(0x76)]!=0x0){let _0x44ffa5=null;if(cooldownTracker[_0xeeda6d(0x1e5)]==config[_0xeeda6d(0x76)]-0x1)_0x44ffa5=cooldownTracker['shift']();const _0x51f368=getTimeStamp();cooldownTracker[_0xeeda6d(0xf4)](_0x51f368);if(_0x44ffa5){const _0x3a7d5d=fns[_0xeeda6d(0x12a)](new Date(_0x51f368),new Date(_0x44ffa5));if(_0x3a7d5d<cooldownInterval){logHistory('error','Executed\x20'+config[_0xeeda6d(0x76)]+_0xeeda6d(0x139)+cooldownInterval/0x3c+_0xeeda6d(0xde)+cooldownPeriod/(0xe10*0x3e8)+_0xeeda6d(0x162)),coolingDown=!![];break;}}}}catch(_0x2189e4){if(_0x2189e4['toString']()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0xeeda6d(0x7a)](_0xe8cc0b=>_0xe8cc0b[_0xeeda6d(0x15b)]!=_0x52e9a8),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x52e9a8),_0x3aea01=!![];else{if(_0x2189e4[_0xeeda6d(0x75)]()[_0xeeda6d(0x16e)]('Invalid\x20quantity'))lastOrders=lastOrders[_0xeeda6d(0x7a)](_0x374518=>_0x374518['symbol']!=_0x52e9a8),logHistory(_0xeeda6d(0x104),_0xeeda6d(0x189)+_0x52e9a8),_0x3aea01=!![];else{if(_0x2189e4[_0xeeda6d(0x75)]()[_0xeeda6d(0x16e)](_0xeeda6d(0x12c)))lastOrders=lastOrders[_0xeeda6d(0x7a)](_0x4f460f=>_0x4f460f[_0xeeda6d(0x15b)]!=_0x52e9a8),logHistory('error','Order\x20is\x20invalid:\x20'+_0x52e9a8),logger[_0xeeda6d(0x1a3)](_0x2189e4),_0x3aea01=!![];else _0x2189e4['toString']()[_0xeeda6d(0x16e)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0xeeda6d(0x7a)](_0x19dbd9=>_0x19dbd9[_0xeeda6d(0x15b)]!=_0x52e9a8),logHistory(_0xeeda6d(0x104),_0xeeda6d(0x1f6)+_0x52e9a8),_0x3aea01=!![]):(lastOrders=lastOrders[_0xeeda6d(0x7a)](_0x45dbc2=>_0x45dbc2[_0xeeda6d(0x15b)]!=_0x52e9a8),await handleError(_0x2189e4,_0xeeda6d(0x177),_0x52e9a8));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xeeda6d(0x1e5)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xbb169f=config[_0xeeda6d(0x1c3)]==_0xeeda6d(0xcb)?validateOrderTimeout*0x3c*0x3e8:config[_0xeeda6d(0x147)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x49bda6=_0xeeda6d;validateOrders(_0x49bda6(0xf7));},_0xbb169f);}else unlockOrders();_0x3aea01&&config[_0xeeda6d(0xbd)]&&(logHistory(_0xeeda6d(0x104),_0xeeda6d(0x1a2)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xeeda6d(0x116),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0xeeda6d(0xbd)]&&logHistory(_0xeeda6d(0x104),_0xeeda6d(0x1e3));else lockOrders!=ORDERS[_0xeeda6d(0x174)]&&(!config[_0xeeda6d(0xbd)]&&(config[_0xeeda6d(0x1c3)]=='market'?logHistory(_0xeeda6d(0x104),_0xeeda6d(0x14d)):logHistory('error',_0xeeda6d(0xcf))));}}function persistOpenOrders(_0x48a769){const _0x2173c5=_0x30c2d2,_0x16e785={...config,'openOrders':_0x48a769};let _0x1aa24c=dbConfig[_0x2173c5(0x19b)](_0x2173c5(0x160))[_0x2173c5(0x159)]({'botID':botID})[_0x2173c5(0x143)]();_0x1aa24c&&dbConfig[_0x2173c5(0x19b)](_0x2173c5(0x160))[_0x2173c5(0x159)]({'botID':botID})[_0x2173c5(0xfa)](_0x16e785)['write']();}function restoreOrders(){const _0x35106b=_0x30c2d2;let _0x1d0e25;config['openOrders']&&allOpenOrders[_0x35106b(0xe5)](_0x2fd2a2=>{const _0x4856b9=_0x35106b,_0x4f50af=config[_0x4856b9(0xed)][_0x4856b9(0x159)](_0x401874=>_0x401874[_0x4856b9(0xb4)]==_0x2fd2a2['id']);_0x4f50af&&(lastOrders[_0x4856b9(0xf4)](_0x4f50af),_0x1d0e25=_0x2fd2a2[_0x4856b9(0xdc)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x35106b(0xca)],validateOrdersState=_0x35106b(0x164),allOrdersPlaced=!![];const _0x354549=new Date()['getTime'](),_0x1b641e=config[_0x35106b(0x1c3)]==_0x35106b(0xcb)?validateOrderTimeout*0x3c*0x3e8:config[_0x35106b(0x147)]*0x3c*0x3e8;if(_0x1d0e25+_0x1b641e>_0x354549){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x1d0e25+_0x1b641e-_0x354549);}else validateOrders(_0x35106b(0xf7));}}async function sendMetricsTelegram(){const _0x4eeb7a=_0x30c2d2;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3d833f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4b1630='';if(config[_0x4eeb7a(0x1f0)])_0x4b1630='<b>'+config[_0x4eeb7a(0x92)]+_0x4eeb7a(0x192);else _0x4b1630=_0x4eeb7a(0x156)+botID+_0x4eeb7a(0x192);const _0x3b980a=getKPIs(_0x4eeb7a(0xda)),_0x2a33ff=getKPIs('fiat',config[_0x4eeb7a(0x1a0)]),_0x4808c9=getKPIs('net-basecoin'),_0x2909e6=getKPIs(_0x4eeb7a(0x70),config[_0x4eeb7a(0x1a0)]);_0x4b1630+=_0x4eeb7a(0xee),_0x4b1630+=_0x3b980a['leftTxt']+'\x20:\x20'+_0x3b980a['value']+'\x0a',_0x4b1630+=_0x3b980a['rightTxt']+':\x20'+_0x3b980a[_0x4eeb7a(0x15c)]+'%\x0a',_0x4b1630+=_0x2a33ff[_0x4eeb7a(0x1dc)]+_0x4eeb7a(0x9d)+_0x2a33ff[_0x4eeb7a(0x143)]+'\x0a',_0x4b1630+=_0x2a33ff[_0x4eeb7a(0x16b)]+':\x20'+_0x2a33ff[_0x4eeb7a(0x15c)]+'%\x0a',_0x4b1630+=_0x4808c9[_0x4eeb7a(0x1dc)]+':\x20'+_0x4808c9['value']+'\x20('+config['basecoin']+')\x0a',_0x4b1630+=_0x4808c9[_0x4eeb7a(0x16b)]+':\x20'+_0x4808c9[_0x4eeb7a(0x15c)]+_0x4eeb7a(0x1c6)+config[_0x4eeb7a(0xda)]+')\x0a',_0x4b1630+=_0x2909e6['leftTxt']+':\x20'+_0x2909e6[_0x4eeb7a(0x143)]+'\x20('+config[_0x4eeb7a(0x1a0)]+')\x0a',_0x4b1630+=_0x2909e6[_0x4eeb7a(0x16b)]+':\x20'+_0x2909e6[_0x4eeb7a(0x15c)]+_0x4eeb7a(0x1c6)+config[_0x4eeb7a(0x1a0)]+')\x0a',_0x4b1630+=_0x4eeb7a(0x109),process['send']({'telegrammsg':_0x4b1630},_0x33ff5f=>{});}async function sendPortfolioTelegram(){const _0x27a260=_0x30c2d2;if(!coinsLoaded){process[_0x27a260(0x1d2)]({'telegrammsg':_0x27a260(0x1d9)},_0x2c53ee=>{});return;}let _0x13afc7='';if(config[_0x27a260(0x1f0)])_0x13afc7=_0x27a260(0x194)+config[_0x27a260(0x92)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x13afc7=_0x27a260(0x156)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x13afc7+=_0x27a260(0xee),_0x13afc7+='-------------------------------\x0a',_0x13afc7+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x13afc7+=_0x27a260(0x107),currentCoins['forEach'](_0x2fee5d=>{const _0xf5c0f9=_0x27a260;_0x13afc7+=_0x2fee5d[_0xf5c0f9(0x1cd)][_0xf5c0f9(0x168)](0x7)+'|\x20'+formatPad(_0x2fee5d['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2fee5d[_0xf5c0f9(0xba)],0x2,0x6)+'|\x20'+formatPad(_0x2fee5d[_0xf5c0f9(0x190)]*0x64,0x2,0x6)+'\x0a';}),_0x13afc7+=_0x27a260(0x109),process[_0x27a260(0x1d2)]({'telegrammsg':_0x13afc7},_0x54ea1e=>{});}function formatPad(_0x3252bc,_0x42bad9,_0x498cfd){const _0x2a904d=_0x30c2d2,_0x599086=formatResultString(_0x3252bc,_0x42bad9);return _0x599086?_0x599086[_0x2a904d(0x79)](_0x498cfd):''[_0x2a904d(0x79)](_0x498cfd);}function logHistory(_0x33dee4,_0x56b8a8,_0x3de313=''){const _0x1bf83f=_0x30c2d2;logger[_0x1bf83f(0x181)](''+_0x56b8a8);let _0x5dea33={'time':getTimeStamp(),'type':_0x33dee4,'event':_0x56b8a8};dbLogs[_0x1bf83f(0x19b)]('logs')[_0x1bf83f(0xf4)](_0x5dea33)[_0x1bf83f(0x110)]();if(_0x3de313=='')_0x3de313=_0x56b8a8;proxyEmit(_0x1bf83f(0x10b),{'log':_0x5dea33,'summary':_0x3de313}),process['send']({'telegram':{..._0x5dea33,'botname':config[_0x1bf83f(0x92)],'showname':config['showname']}},_0x4e7185=>{});}function emitHistory(_0x378bb7={}){const _0x3bfae2=_0x30c2d2;Object[_0x3bfae2(0x170)](_0x378bb7)[_0x3bfae2(0x1e5)]==0x0&&(_0x378bb7={'type':['order',_0x3bfae2(0x10b)],'event':'','page':0x1});if(_0x378bb7[_0x3bfae2(0x141)]['includes'](_0x3bfae2(0x10b)))_0x378bb7[_0x3bfae2(0x141)][_0x3bfae2(0x105)](_0x378bb7[_0x3bfae2(0x141)][_0x3bfae2(0x1d3)](_0x3bfae2(0x10b)),0x1,_0x3bfae2(0x104),'warning','success');if(dbLogs[_0x3bfae2(0x133)](_0x3bfae2(0x1f3))[_0x3bfae2(0x143)]()){let _0x1b51b8=dbLogs[_0x3bfae2(0x19b)](_0x3bfae2(0x1f3))[_0x3bfae2(0x7a)](_0x57be7b=>{const _0x20f525=_0x3bfae2;if(_0x378bb7[_0x20f525(0x141)][_0x20f525(0x1e5)]==0x0)return![];else return _0x378bb7[_0x20f525(0x141)][_0x20f525(0x16e)](_0x57be7b[_0x20f525(0x141)]);})['filter'](_0x2c0396=>{const _0x310695=_0x3bfae2;if(_0x378bb7[_0x310695(0x10b)]=='')return!![];else return _0x2c0396[_0x310695(0x10b)][_0x310695(0x179)]()[_0x310695(0x16e)](_0x378bb7[_0x310695(0x10b)]['toLowerCase']());})[_0x3bfae2(0x9b)](_0x3bfae2(0x163)),_0x1c9fba=_0x1b51b8[_0x3bfae2(0x143)]()[_0x3bfae2(0x1e5)];_0x1b51b8=_0x1b51b8[_0x3bfae2(0x17e)]()[_0x3bfae2(0x153)]((_0x378bb7[_0x3bfae2(0x1c0)]-0x1)*logPageSize,_0x378bb7[_0x3bfae2(0x1c0)]*logPageSize-0x1)['reverse']()[_0x3bfae2(0x143)](),proxyEmit(_0x3bfae2(0x1c8),{'logs':_0x1b51b8,'total':_0x1c9fba});}else proxyEmit(_0x3bfae2(0x1c8),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x366dcf){const _0xa79988=_0x30c2d2;if(dbLogs['has'](_0xa79988(0x1f3))[_0xa79988(0x143)]()){const _0x1e3bed=dbLogs[_0xa79988(0x19b)](_0xa79988(0x1f3))['sortBy']('time')[_0xa79988(0x7a)](_0x1c4b6d=>{const _0x4941f5=_0xa79988;return _0x1c4b6d[_0x4941f5(0x141)]==_0x4941f5(0x1aa);})[_0xa79988(0x143)]();dbLogs[_0xa79988(0x19b)](_0xa79988(0x1f3))['remove']()[_0xa79988(0x110)](),dbLogs[_0xa79988(0x19b)](_0xa79988(0x1f3))[_0xa79988(0xfa)](_0x1e3bed)[_0xa79988(0x110)](),emitHistory(_0x366dcf);}}async function pauseBot(){const _0x34af9b=_0x30c2d2,_0x38ff14=new Date()['getTime']();if(!lastErrorShown||_0x38ff14-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x38ff14;!lastBotPause?(lastBotPause=_0x38ff14,consecutivePauses=0x1):(_0x38ff14-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x34af9b(0x1d2)]({'stop':_0x34af9b(0xa1)},_0x392a14=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x108f7e=_0x30c2d2;botPaused=!![],await sleep(0x3e8),process[_0x108f7e(0x1d2)]({'stop':_0x108f7e(0xf5)},_0x54a71b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x25fb3e,_0x414a4a){const _0x4446d4=_0x30c2d2;if(botPaused)return;const _0x58962b=config['exchange']||_0x4446d4(0xa3);if(_0x414a4a)logger[_0x4446d4(0x1a3)](_0x4446d4(0x74)+_0x414a4a);const _0x538eaa=()=>{const _0x1ace8e=_0x4446d4;loading[_0x1ace8e(0x104)]=!![],emitLoadingProgress();};if(_0x25fb3e[_0x4446d4(0x75)]()[_0x4446d4(0x16e)](_0x4446d4(0x118)))logHistory(_0x4446d4(0x104),_0x58962b+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x538eaa();else{if(_0x25fb3e[_0x4446d4(0x75)]()[_0x4446d4(0x16e)](_0x4446d4(0x158)))logHistory('error',_0x58962b+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x538eaa();else _0x25fb3e[_0x4446d4(0x75)]()['includes'](_0x4446d4(0x6f))?(logHistory(_0x4446d4(0x104),_0x58962b+_0x4446d4(0x96)),logHistory(_0x4446d4(0x104),_0x4446d4(0x1ab)),_0x538eaa()):await handleError(_0x25fb3e,null);}}async function handleError(_0x116e5a,_0x22ad33,_0x1d0b79=''){const _0x123010=_0x30c2d2;if(botPaused)return;const _0x34af0c=config[_0x123010(0x117)]||_0x123010(0xa3);if(_0x22ad33)logger[_0x123010(0x1a3)](_0x123010(0x74)+_0x22ad33);if(_0x116e5a['toString']()[_0x123010(0x16e)]('DDoSProtection')||_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)](_0x123010(0x182)))logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0x102)+pauseBotMsg),await pauseBot();else{if(_0x116e5a['toString']()[_0x123010(0x16e)](_0x123010(0xe8))||_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)]('OnMaintenance'))logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0xe9)+pauseBotMsg),await pauseBot();else{if(_0x116e5a['toString']()[_0x123010(0x16e)](_0x123010(0xf9)))logHistory('error',_0x34af0c+_0x123010(0x72)+pauseBotMsg),await pauseBot();else{if(_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)](_0x123010(0x1f4)))logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0x172)+pauseBotMsg),await pauseBot();else{if(_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)](_0x123010(0x175)))logHistory(_0x123010(0x104),_0x123010(0x83)),logHistory(_0x123010(0x104),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x116e5a['toString']()['includes']('InvalidNonce'))logHistory(_0x123010(0x104),_0x123010(0x1e8)),logHistory(_0x123010(0x104),_0x123010(0xac)),await killBot();else{if(_0x116e5a instanceof ccxt[_0x123010(0x17a)])logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0xa4)+pauseBotMsg),logger[_0x123010(0x1a3)](_0x123010(0x1b8),_0x116e5a),await pauseBot();else{if(_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)](_0x123010(0x118)))logHistory('error',_0x34af0c+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x123010(0x104),_0x123010(0xac)),await killBot();else{if(_0x116e5a['toString']()[_0x123010(0x16e)](_0x123010(0x158)))logHistory('error',_0x34af0c+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x123010(0x104),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)]('AuthenticationError'))logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0x8b)),logHistory(_0x123010(0x104),_0x123010(0xac)),await killBot();else{if(_0x116e5a['toString']()[_0x123010(0x16e)]('PermissionDenied'))logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0xd5)),logHistory('error',_0x123010(0xac)),await killBot();else{if(_0x116e5a[_0x123010(0x75)]()[_0x123010(0x16e)](_0x123010(0x1c4)))logHistory(_0x123010(0x104),_0x123010(0x188)+_0x1d0b79);else _0x116e5a instanceof ccxt[_0x123010(0x1ee)]?(logHistory(_0x123010(0x104),_0x34af0c+_0x123010(0x19c)),logger[_0x123010(0x1a3)](_0x123010(0x1b8),_0x116e5a)):(logHistory(_0x123010(0x104),_0x123010(0xf1)+pauseBotMsg),logger[_0x123010(0x1a3)](_0x123010(0x1b8),_0x116e5a),await pauseBot());}}}}}}}}}}}}function formatResult(_0x502c98,_0x141876){return parseFloat(_0x502c98['toFixed'](_0x141876));}function formatResultTruncate(_0x5527d2,_0x1e04e8){const _0x4ccc6f=_0x30c2d2;let _0x2657da=formatResultString(_0x5527d2,0xa),_0x43d8ba=_0x2657da[_0x4ccc6f(0x1d3)]('.');return _0x43d8ba!=-0x1&&(_0x2657da=_0x2657da[_0x4ccc6f(0x153)](0x0,_0x43d8ba+_0x1e04e8+0x1)),Number(_0x2657da);}function formatResultString(_0x1d9da9,_0x52f6b3){const _0x2279ab=_0x30c2d2;let _0x5d1be7;if(!(''+_0x1d9da9)[_0x2279ab(0x16e)]('e'))_0x5d1be7=+(Math[_0x2279ab(0x195)](_0x1d9da9+'e+'+_0x52f6b3)+'e-'+_0x52f6b3);else{let _0x125055=(''+_0x1d9da9)[_0x2279ab(0x7c)]('e'),_0x1c7175='';+_0x125055[0x1]+_0x52f6b3>0x0&&(_0x1c7175='+'),_0x5d1be7=+(Math['round'](+_0x125055[0x0]+'e'+_0x1c7175+(+_0x125055[0x1]+_0x52f6b3))+'e-'+_0x52f6b3);}return Number(_0x5d1be7)[_0x2279ab(0x201)](_0x52f6b3);}function getServerTime(){const _0x30c439=_0x30c2d2,_0xcf1afd=new Date();return _0xcf1afd[_0x30c439(0x12b)]()+'/'+(_0xcf1afd[_0x30c439(0x199)]()+0x1)[_0x30c439(0x75)]()[_0x30c439(0x79)](0x2,'0')+'/'+_0xcf1afd[_0x30c439(0x152)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xcf1afd[_0x30c439(0xa2)]()[_0x30c439(0x75)]()[_0x30c439(0x79)](0x2,'0')+':'+_0xcf1afd['getMinutes']()[_0x30c439(0x75)]()[_0x30c439(0x79)](0x2,'0')+':'+_0xcf1afd[_0x30c439(0xc0)]()['toString']()[_0x30c439(0x79)](0x2,'0');}function getTimeStamp(){const _0x19bfed=_0x30c2d2,_0x5e9a86=shiftedTime();return _0x5e9a86[_0x19bfed(0x12b)]()+'/'+(_0x5e9a86[_0x19bfed(0x199)]()+0x1)[_0x19bfed(0x75)]()[_0x19bfed(0x79)](0x2,'0')+'/'+_0x5e9a86[_0x19bfed(0x152)]()[_0x19bfed(0x75)]()[_0x19bfed(0x79)](0x2,'0')+'\x20'+_0x5e9a86['getHours']()[_0x19bfed(0x75)]()[_0x19bfed(0x79)](0x2,'0')+':'+_0x5e9a86[_0x19bfed(0x1fe)]()[_0x19bfed(0x75)]()[_0x19bfed(0x79)](0x2,'0')+':'+_0x5e9a86[_0x19bfed(0xc0)]()[_0x19bfed(0x75)]()[_0x19bfed(0x79)](0x2,'0');}function getDate(){const _0x2dceef=_0x30c2d2,_0x53c22d=shiftedTime();return _0x53c22d[_0x2dceef(0x12b)]()+'/'+(_0x53c22d['getMonth']()+0x1)[_0x2dceef(0x75)]()[_0x2dceef(0x79)](0x2,'0')+'/'+_0x53c22d[_0x2dceef(0x152)]()[_0x2dceef(0x75)]()[_0x2dceef(0x79)](0x2,'0');}function getHour(){const _0x1a6de0=_0x30c2d2,_0x1a2f24=shiftedTime();return _0x1a2f24[_0x1a6de0(0xa2)]()[_0x1a6de0(0x75)]()[_0x1a6de0(0x79)](0x2,'0');}function sleep(_0x363bd6){return new Promise(_0x269207=>setTimeout(_0x269207,_0x363bd6));}function shiftedTime(){const _0x280439=_0x30c2d2,_0x27f91f=new Date();let _0x40bf0b=_0x27f91f;if(config&&config['timeshift']!==0x0)_0x40bf0b=fns['add'](_0x27f91f,{'hours':config[_0x280439(0x112)]});return _0x40bf0b;}function timer(_0x132c02){const _0x309b49=_0x30c2d2,_0x4c6c54=new Date();!lasttime?console[_0x309b49(0x12d)](getTimeStamp()+':\x20timer\x20>',_0x132c02,_0x4c6c54):console[_0x309b49(0x12d)](getTimeStamp()+_0x309b49(0x9c),_0x132c02,(_0x4c6c54-lasttime)/0x3e8),lasttime=_0x4c6c54;}