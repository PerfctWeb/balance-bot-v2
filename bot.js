const _0x212dba=_0x3927;(function(_0x2fdf0f,_0x452c5d){const _0x1b99ef=_0x3927,_0x9a2c1e=_0x2fdf0f();while(!![]){try{const _0xcea614=parseInt(_0x1b99ef(0x102))/0x1+-parseInt(_0x1b99ef(0x20e))/0x2*(-parseInt(_0x1b99ef(0x175))/0x3)+parseInt(_0x1b99ef(0x240))/0x4*(-parseInt(_0x1b99ef(0x200))/0x5)+-parseInt(_0x1b99ef(0x192))/0x6+parseInt(_0x1b99ef(0xc6))/0x7*(-parseInt(_0x1b99ef(0x241))/0x8)+-parseInt(_0x1b99ef(0x187))/0x9+parseInt(_0x1b99ef(0x110))/0xa*(parseInt(_0x1b99ef(0x21e))/0xb);if(_0xcea614===_0x452c5d)break;else _0x9a2c1e['push'](_0x9a2c1e['shift']());}catch(_0x2ad9f6){_0x9a2c1e['push'](_0x9a2c1e['shift']());}}}(_0x245e,0x99f57));const _0x33d2b9=function(){let _0x4ca455=!![];return function(_0x50dc4c,_0x4c0f44){const _0x21bc85=_0x4ca455?function(){if(_0x4c0f44){const _0x37193a=_0x4c0f44['apply'](_0x50dc4c,arguments);return _0x4c0f44=null,_0x37193a;}}:function(){};return _0x4ca455=![],_0x21bc85;};}(),_0x3f0184=_0x33d2b9(this,function(){const _0x556b8e=_0x3927;return _0x3f0184['toString']()[_0x556b8e(0xec)](_0x556b8e(0x1fe))[_0x556b8e(0xcd)]()[_0x556b8e(0x20f)](_0x3f0184)['search']('(((.+)+)+)+$');});_0x3f0184();'use strict';const ccxt=require(_0x212dba(0x236)),low=require(_0x212dba(0xc5)),FileSync=require(_0x212dba(0x23d)),fs=require('fs'),fns=require(_0x212dba(0xf0)),Crypt=require(_0x212dba(0x22f))[_0x212dba(0x1af)],util=require(_0x212dba(0xe7)),argv=require(_0x212dba(0x1cf))(process[_0x212dba(0x1fb)][_0x212dba(0xeb)](0x2))[_0x212dba(0x1fb)],path=require('path');let exchange;global['ticker']={},global[_0x212dba(0x109)]={};const usdBasecoins=[_0x212dba(0xca),_0x212dba(0x1e4),_0x212dba(0x232),_0x212dba(0x11d),_0x212dba(0x17a),_0x212dba(0x182)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x212dba(0xc3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x212dba(0x1ae))['version'],botID=process['argv'][0x2]||_0x212dba(0x1ce),pattern=/^[0-9]{3}$/;!pattern[_0x212dba(0x180)](botID)&&(console[_0x212dba(0x151)](_0x212dba(0x195)+botID+_0x212dba(0x1cc)),killBot());const userID=process[_0x212dba(0x1fb)][0x3]||'',configpath=userID?_0x212dba(0x13a)+userID+'/':'./config/',logspath=userID?_0x212dba(0x24b)+userID+'/':'./logs/',loggerfile=fs[_0x212dba(0xc8)](logspath+_0x212dba(0x1c7),{'flags':'a'});!fs[_0x212dba(0x1b7)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x212dba(0x1b7)](logspath)&&fs[_0x212dba(0x1d1)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x212dba(0x1f4)+botID+_0x212dba(0x230),performancefile=configpath+_0x212dba(0x1f4)+botID+_0x212dba(0x15f),coinresultsfile=configpath+_0x212dba(0x1f4)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x212dba(0x113),configbackuppath=configpath+_0x212dba(0x204),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x212dba(0x20b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x212dba(0x197)]({'data':[],'version':serverversion})[_0x212dba(0x20b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x212dba(0x197)]({'bot':[],'version':serverversion})[_0x212dba(0x20b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x212dba(0x197)]({'coins':[],'version':serverversion})[_0x212dba(0x20b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x212dba(0xc7),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x30e309=>{console['log'](_0x30e309);},'simple':_0x2cce64=>{const _0x434b40=_0x212dba;console[_0x434b40(0x151)](_0x2cce64),loggerfile['write'](util[_0x434b40(0xe3)](_0x2cce64)+'\x0a');},'full':async(_0x598ebe,_0x31983c='')=>{const _0x30307c=_0x212dba;let _0x2ed499;if(config[_0x30307c(0xfb)])_0x2ed499=getTimeStamp()+':\x20'+config[_0x30307c(0x22d)]+_0x30307c(0x173)+_0x598ebe;else _0x2ed499=getTimeStamp()+_0x30307c(0xd4)+botID+_0x30307c(0x173)+_0x598ebe;console['log'](_0x2ed499),loggerfile[_0x30307c(0x20b)](util[_0x30307c(0xe3)](_0x2ed499)+'\x0a'),_0x31983c&&(console[_0x30307c(0x151)](_0x31983c),loggerfile[_0x30307c(0x20b)](util[_0x30307c(0xe3)](_0x31983c)+'\x0a'));},'debug':async(_0x43288a,_0x171c42='')=>{const _0xbfff79=_0x212dba;let _0x1fb5ce;if(config[_0xbfff79(0xfb)])_0x1fb5ce=getTimeStamp()+':\x20'+config[_0xbfff79(0x22d)]+_0xbfff79(0x225)+_0x43288a;else _0x1fb5ce=getTimeStamp()+_0xbfff79(0xd4)+botID+_0xbfff79(0x225)+_0x43288a;if(debugging)console[_0xbfff79(0x151)](_0x1fb5ce);loggerfile['write'](util['format'](_0x1fb5ce)+'\x0a');if(_0x171c42){if(debugging)console['log'](_0x171c42);loggerfile[_0xbfff79(0x20b)](util[_0xbfff79(0xe3)](_0x171c42)+'\x0a');}}};process['on']('uncaughtException',function(_0x4a2702){const _0x399464=_0x212dba;logHistory('error',_0x399464(0xcc)),logger[_0x399464(0x1ca)](_0x399464(0x1e1),_0x4a2702);});settings[_0x212dba(0x206)]!=config[_0x212dba(0x206)]&&updateTimeshift(settings[_0x212dba(0x206)]);settings[_0x212dba(0xd9)]!=config[_0x212dba(0xd9)]&&updateOnepagemode(settings[_0x212dba(0xd9)]);process[_0x212dba(0x1bb)]({'started':_0x212dba(0xda)},_0x310c91=>{}),initializeProcessListeners();function proxyEmit(_0x1882b9,_0x381c30=null){process['send']({'function':_0x1882b9,'args':_0x381c30},_0x53910e=>{});}function initializeProcessListeners(){const _0x5d193c=_0x212dba;process['on'](_0x5d193c(0x237),_0x4202b3=>{const _0x434b2b=_0x5d193c;switch(Object[_0x434b2b(0x1ef)](_0x4202b3)[0x0]){case _0x434b2b(0x206):_0x4202b3[_0x434b2b(0x206)]!=undefined&&(settings['timeshift']=_0x4202b3[_0x434b2b(0x206)],updateTimeshift(settings[_0x434b2b(0x206)]));break;case'onepagemode':_0x4202b3['onepagemode']!=undefined&&(settings['onepagemode']=_0x4202b3['onepagemode'],updateOnepagemode(settings[_0x434b2b(0xd9)]));break;case'bots':_0x4202b3[_0x434b2b(0x12b)]!=undefined&&(bots=JSON[_0x434b2b(0x100)](_0x4202b3[_0x434b2b(0x12b)]),proxyEmit(_0x434b2b(0x12b),bots));break;case _0x434b2b(0xff):switch(_0x4202b3[_0x434b2b(0xff)]){case'initclient':initclient();break;case _0x434b2b(0x176):toggleBotMode();break;case _0x434b2b(0x13f):emitHistory(_0x4202b3[_0x434b2b(0xf8)]);break;case _0x434b2b(0x1a4):deleteHistoryAlerts(_0x4202b3['args']);break;case _0x434b2b(0x249):getPortfolio(_0x4202b3[_0x434b2b(0xf8)]);break;case _0x434b2b(0x1d8):storeConfiguration(_0x4202b3[_0x434b2b(0xf8)]);break;case _0x434b2b(0xfa):storeHeadless(_0x4202b3[_0x434b2b(0xf8)]);break;case _0x434b2b(0x242):storeFiat(_0x4202b3[_0x434b2b(0xf8)]);break;case'resetHistory':resetHistory();break;case _0x434b2b(0x133):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4202b3[_0x434b2b(0xf8)]);break;case'cancelLoading':cancelLoading();break;case _0x434b2b(0x114):showConfig();break;case _0x434b2b(0x183):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);function _0x245e(){const _0x2fa44a=['order','liquidity','\x20|\x20lock\x20orders:\x20','write','EUR','loading-canceled','654876jvLyTz','constructor','valid','error','configuration','getCoins()','amountToPrecision','rightTxt','portfolio','getFullYear','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2\x20-\x20Handled\x20open\x20orders','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','fiat','autoliquidity','Manual\x20balancing\x20required','22187ujcter','filled','ID:\x20','\x20portfolio:</b>\x20\x0a\x0a','placeOrder()','watchTransactions','\x20minutes','\x20>\x20[DEBUG]\x20','UNLOCKED','ordertype','closed','must\x20be\x20greater\x20than\x20minimum\x20amount','type','fetchTicker','has','botname','loadSymbols()','hybrid-crypto-js','-events.json','full','TUSD','Cooldown\x20ended\x20-\x20balancing\x20resumed','target','data','ccxt','message','concat','API-key\x20format\x20invalid','symbol','usd','pro','lowdb/adapters/FileSync','substring','2.3.5','1773736kfuchW','32ixcNSY','storeFiat','Order\x20is\x20invalid:\x20','watchTrades(2)','watchOrders','RequestTimeout','\x20not\x20responding','exec','getPortfolio','-------------------------------\x0a','./logs/','Unknown\x20error\x20occured','fetchBalance','highest','round','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Limit\x20(high-margin)','padEnd','stringify','ExchangeError','startnumber','average','progress','toLowerCase','freeze','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','lowdb','1434174EGkaZh','sha256','createWriteStream','fees','USD','startprice','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','toString','changes','page','coin-loading-progress','red_yellow_blue','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','basecoin',':\x20Bot\x20','version','limit','kill','1\x20-\x20Unlock\x20orders','onepagemode','running','timestamp','canceled','2.6.0','ticker','milliseconds','fetchOpenOrders','BNB/','getTime','format','1\x20-\x20FILLED:\x20','<pre>','coin','util','2\x20-\x20FILLED\x20unknown\x20order:\x20','MIN_NOTIONAL','\x20order:\x20','slice','search','LOCKED','privateKey','balancing\x20resumes\x20when\x20cooldown\x20ends','date-fns','excluded','Executing\x20exchange\x20reload','Order\x20amount\x20is\x20invalid:\x20','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','max','Limit\x20(low-margin)','\x20hour','args','cooldown','storeHeadless','showname','ETH','configuration-stored','\x20has\x20a\x2024h\x20drop\x20of\x20','function','parse','ask','1111825GRSCDW','cancelOrders()','\x20-\x20bot\x20not\x20started','%\x20(','sells','netoffset','\x20API\x20key\x20is\x20invalid','change','3\x20-\x20handling\x20FILLED\x20order:\x20','change24h','distribution','</pre>','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','<b>Bot\x20','9220KCiVsI','forEach','net-fiat','bb-secure.json','showConfig','includes','ORDERS.UNLOCKING','Portfolio\x20change\x20detected:\x20','filter','event','Net\x20effect','buy','length','USDT','active','getMinutes','watchTrades(1)','2\x20-\x20FILLED\x20known\x20order:\x20',':\x20timer\x20>','leftTxt','offset','limits','\x20exchange','\x20not\x20available','exchange\x20reloaded','getCoinNumber()','InsufficientFunds','bots','2\x20-\x20Orders\x20unlocked','event-history','no\x20open\x20orders','NetworkError','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','OrderNotFound','restart','getStartingBalances','<b>','success','push','datetime','\x20closed\x20the\x20connection','apiSecret','./config/','ORDERS.LOCKED','remainingSymbols','final','Uncaught\x20NetworkError:','emitHistory','price','toFixed','string','ExchangeNotAvailable','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20minutes\x20-\x20','date','additional\x20symbols\x20','trade','unlinkSync','Invalid\x20quantity','status','2.5.0','Initializing\x20coin\x20results','yyyy/MM/dd','ORDERS.UNLOCKED','apiKey','log','1\x20-\x20Handle\x20open\x20orders','\x20metrics:</b>\x20\x0a\x0a','AuthenticationError','limit-high','Pausing\x20for\x20','warning','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Bybit','\x20:\x20','set','getPortfolio(1)','orderId','-performance.json','Exchange','eur','performance','parseISO','basecoinvalue','openOrders','market','realized','reverse','ongoing','Initiating\x20exchange\x20reload','\x20exchange\x20error','sell','find','\x20value','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','close','value','balances','\x20>\x20','none','3cSPFtS','toggleBotMode','DDoSProtection','total','join','USDC','getPortfolio(2)','timeout','decrypt','sort','orderstatus','test','-results.json','USDP','sendMetricsTelegram','InvalidOrder','getOpenOrders()','side','3167802aYgxEv','apiPassword','OnMaintenance','getSeconds','Uncaught\x20ExchangeError:','Saving\x20configuration','\x20|\x20Error\x20details:\x20','initial','replace','BNB','/USD','3659688Vzcxzq','getHours','cancelOrder','Error:\x20Invalid\x20argument\x20','net-basecoin','defaults','getDate','secure','open','exchanges','toUpperCase','bid','Invalid\x20API\x20key\x20or\x20secret\x20entered','InvalidNonce','fetchTickers','writeFile','removed','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','deleteHistoryAlerts','percentage','delta','amount','remove','fromCodePoint','************','BTC','watchTrades','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','./version.json','Crypt','cost','emojisell','splice','\x20API\x20secret\x20is\x20invalid','sortBy','logs','currency','existsSync','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','threshold','entries','send','Resetting\x20coin\x20results:\x20','shift','2\x20-\x20Validate\x20orders:\x20','.json','Net\x20','\x20orders\x20in\x20less\x20than\x20','\x20network\x20error','fetchClosedOrders','Transaction\x20detection\x20unblocked','get','enabled','/output-000.log','floor','Waited\x20','debug','abs',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20change','001','yargs/yargs','/EUR','mkdirSync','differenceInSeconds','split','exchange','recent20','headless','Error\x20while\x20deleting\x20files:\x20','storeConfiguration','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','password','assign','bot','last','padStart','getAllOrders','breakeven','Uncaught\x20Exception:','Fee\x20discount\x20refund\x20detected:\x20','recreate','BUSD','time','customId','coins','added','Reset\x20|\x20','fee','indexOf','startdate','cloneDeep','No\x20more\x20open\x20orders\x20-\x20','keys','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','spot','number','bot-','\x20|\x20','Executed\x20','***','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Bot\x20','emojibuy','argv','createOrder','balancing\x20resumed','(((.+)+)+)+$','Order(s)\x20not\x20validated\x20after\x20','10EALnxv','RateLimitExceeded','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','UNLOCKING','/backup/','isEqual','timeshift','Binance'];_0x245e=function(){return _0x2fa44a;};return _0x245e();}async function reset(_0x1075a8=null,_0x5d166b=![]){const _0x14f418=_0x212dba;logger['debug'](_0x14f418(0x1e9)+(_0x1075a8&&_0x1075a8[_0x14f418(0x11c)]>0x0?_0x14f418(0x147)+_0x1075a8[_0x14f418(0x179)](','):'no\x20additional\x20symbols')+_0x14f418(0x1f5)+(_0x5d166b?_0x14f418(0x128):'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x5d166b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x14f418(0x150)]!=''&&config['apiKey']!=_0x14f418(0x1f7)){if(_0x5d166b){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x16534e){handleErrorNoStop(_0x16534e,_0x14f418(0x22e));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1075a8);const _0x1d50ce=await getCoins();[currentCoins,currentCoinsAll]=_0x1d50ce,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x14f418(0x11c)]==0x0&&allOpenOrders[_0x14f418(0x11c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x33607d=_0x212dba;exchangeStopped=!![];try{await exchange[_0x33607d(0x170)]();}catch(_0x75317c){await handleError(_0x75317c,'stopExchange()');}}async function reloadExchange(){const _0x31d044=_0x212dba;logger['debug'](_0x31d044(0x16a));while(lockOrders!=ORDERS[_0x31d044(0x226)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x31d044(0x1ca)](_0x31d044(0xf2)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x3d7c25=config[_0x212dba(0x1d4)],_0x931bf2=config[_0x212dba(0x150)],_0x23d0a8=config[_0x212dba(0x139)],_0x4759e1=config[_0x212dba(0x188)]){const _0x16c452=_0x212dba;exchange&&await stopExchange();!supportedExchanges()[_0x16c452(0x115)](_0x3d7c25)&&(logHistory(_0x16c452(0x211),_0x16c452(0x1f0)+_0x3d7c25+_0x16c452(0x126)),killBot());const _0x546a92=ccxt['pro'][_0x3d7c25[_0x16c452(0xc2)]()];exchange=new _0x546a92({'apiKey':_0x931bf2,'secret':_0x23d0a8,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x16c452(0x1f2)}});if(_0x4759e1)exchange[_0x16c452(0x1da)]=_0x4759e1;}function setStableCoins(){const _0x41df48=_0x212dba;let _0x564fe5=config[_0x41df48(0xd3)]==_0x41df48(0xfc)?'ETH':_0x41df48(0x1ab),_0x2981c4=!allSymbols[_0x41df48(0x115)](_0x564fe5+_0x41df48(0x191))?_0x41df48(0x11d):'USD',_0x19974c=!allSymbols['includes'](_0x564fe5+_0x41df48(0x1d0))?_0x2981c4:'EUR';stablecoins={'eur':{'coin':''+_0x564fe5+_0x19974c,'symbol':_0x564fe5+'/'+_0x19974c},'usd':{'coin':''+_0x564fe5+_0x2981c4,'symbol':_0x564fe5+'/'+_0x2981c4}};}async function initwsCcxt(_0x46dd64){const _0x17d2c5=_0x212dba;_0x46dd64==null&&(_0x46dd64=[],config[_0x17d2c5(0x216)][_0x17d2c5(0x111)](_0x89fabc=>{const _0x3b76e9=_0x17d2c5;if(!_0x89fabc[_0x3b76e9(0xf1)]&&_0x89fabc[_0x3b76e9(0xe6)]!=config[_0x3b76e9(0xd3)])_0x46dd64[_0x3b76e9(0x136)](_0x89fabc[_0x3b76e9(0x23a)]);}));if(!_0x46dd64[_0x17d2c5(0x115)](stablecoins[_0x17d2c5(0x161)][_0x17d2c5(0x23a)]))_0x46dd64[_0x17d2c5(0x136)](stablecoins[_0x17d2c5(0x161)][_0x17d2c5(0x23a)]);if(!_0x46dd64[_0x17d2c5(0x115)](stablecoins['usd']['symbol']))_0x46dd64[_0x17d2c5(0x136)](stablecoins[_0x17d2c5(0x23b)]['symbol']);if(config[_0x17d2c5(0x1d4)]['startsWith'](_0x17d2c5(0x207))){if(!_0x46dd64[_0x17d2c5(0x115)](_0x17d2c5(0xe1)+config[_0x17d2c5(0xd3)]))_0x46dd64['push'](_0x17d2c5(0xe1)+config['basecoin']);}loadCoins(_0x46dd64);const _0x564a5b=async _0x6ddd9b=>{const _0x55aed9=_0x17d2c5;try{const _0x28853e=await exchange['fetchTicker'](_0x6ddd9b);global['ticker'][noslash(_0x28853e[_0x55aed9(0x23a)])]=_0x28853e[_0x55aed9(0x1dd)];}catch(_0x3da617){await handleError(_0x3da617,_0x55aed9(0x120),_0x6ddd9b);}while(!![]){if(!botPaused)try{const _0x2e6046=await exchange[_0x55aed9(0x1ac)](_0x6ddd9b);global['ticker'][noslash(_0x2e6046[0x0][_0x55aed9(0x23a)])]=_0x2e6046[0x0][_0x55aed9(0x140)],await sleep(0x3e8);}catch(_0x33e69a){if(!exchangeStopped)await handleError(_0x33e69a,_0x55aed9(0x244),_0x6ddd9b);}else await sleep(0x64);}},_0x536ba9=async _0x3d1452=>{const _0x47d0e0=_0x17d2c5;while(!![]){if(!botPaused)try{const _0x1ebf5d=await exchange[_0x47d0e0(0x22b)](_0x3d1452);global[_0x47d0e0(0x109)][_0x1ebf5d[_0x47d0e0(0x23a)]]=_0x1ebf5d[_0x47d0e0(0x1a5)],await sleep(0x3c*0x3e8);}catch(_0x394244){if(!exchangeStopped)await handleError(_0x394244,'fetchTickers',_0x3d1452);}else await sleep(0x64);}},_0x8997ba=async _0xbed8aa=>{const _0xefe50e=_0x17d2c5;while(!![]){if(!botPaused)try{const _0x4885ba=await exchange[_0xefe50e(0x245)](_0xbed8aa);_0x4885ba[_0xefe50e(0x111)](_0x5a9da0=>{updateNumberCoinsCcxt(_0x5a9da0);});}catch(_0x3ad182){if(!exchangeStopped)await handleError(_0x3ad182,_0xefe50e(0x245));}else await sleep(0x64);}};_0x46dd64[_0x17d2c5(0x111)](_0x52259a=>{_0x564a5b(_0x52259a),_0x536ba9(_0x52259a),_0x8997ba(_0x52259a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x4d0da4=_0x212dba;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x447669=await getCoins(),[_0x4b1ccd,_0x490d15]=_0x447669;let _0x4a49a1=[];currentCoins[_0x4d0da4(0x111)](_0x19b945=>{const _0xa094ae=_0x4d0da4,_0x18b46e=_0x4b1ccd[_0xa094ae(0x16d)](_0x8a65af=>_0x8a65af['coin']==_0x19b945[_0xa094ae(0xe6)]);if(_0x18b46e){if(_0x19b945[_0xa094ae(0x1f3)]!=_0x18b46e[_0xa094ae(0x1f3)]){let _0x21d6ec;if(_0x19b945[_0xa094ae(0xe6)]!=config[_0xa094ae(0xd3)]){const _0x1645ea=global['ticker'][noslash(_0x19b945[_0xa094ae(0x23a)])];_0x21d6ec=_0x19b945['reverse']?0x1/_0x1645ea:_0x1645ea;}else _0x21d6ec=0x1;_0x4a49a1['push']({'coin':_0x19b945[_0xa094ae(0xe6)],'symbol':_0x19b945['symbol'],'price':_0x21d6ec,'number':Number(formatResult(_0x18b46e['number']-_0x19b945[_0xa094ae(0x1f3)],0x8)),'basecoinvalue':_0x21d6ec*(_0x18b46e['number']-_0x19b945[_0xa094ae(0x1f3)])});}}});if(_0x4a49a1[_0x4d0da4(0x11c)]==0x1&&!blockTransactionDetection){if(config[_0x4d0da4(0x21c)]){logger[_0x4d0da4(0x1ca)](_0x4d0da4(0xd2)+_0x4a49a1[0x0][_0x4d0da4(0x164)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x4d0da4(0x24e)]==0x0||Math[_0x4d0da4(0x1cb)](_0x4a49a1[0x0][_0x4d0da4(0x164)])>lastFees[_0x4d0da4(0x24e)]){delete _0x4a49a1[0x0][_0x4d0da4(0x23a)],delete _0x4a49a1[0x0][_0x4d0da4(0x164)];let _0x42f038=[],_0x24a7c0=[...config[_0x4d0da4(0x209)]]||[],_0x2b405c=config[_0x4d0da4(0x209)];_0x24a7c0[_0x4d0da4(0x17e)]((_0x3de5be,_0x189108)=>_0x3de5be[_0x4d0da4(0x146)]>_0x189108[_0x4d0da4(0x146)]?-0x1:_0x189108['date']>_0x3de5be['date']?0x1:0x0);const _0x3ae393=getDate();if(_0x24a7c0[0x0]){const _0x5ede87=fns[_0x4d0da4(0x100)](_0x24a7c0[0x0][_0x4d0da4(0x146)],_0x4d0da4(0x14e),new Date()),_0x54d21f=fns[_0x4d0da4(0x100)](_0x3ae393,_0x4d0da4(0x14e),new Date());if(fns['isEqual'](_0x5ede87,_0x54d21f)){_0x42f038=_0x24a7c0[0x0][_0x4d0da4(0xce)];const _0xdd6f45=_0x42f038['find'](_0x306b53=>_0x306b53['coin']==_0x4a49a1[0x0][_0x4d0da4(0xe6)]);_0xdd6f45?(_0xdd6f45[_0x4d0da4(0x1f3)]+=_0x4a49a1[0x0][_0x4d0da4(0x1f3)],_0xdd6f45[_0x4d0da4(0x1f3)]==0x0&&(_0x42f038=_0x42f038[_0x4d0da4(0x118)](_0x7f152a=>{const _0x12faa9=_0x4d0da4;return _0x7f152a[_0x12faa9(0xe6)]!=_0x4a49a1[0x0][_0x12faa9(0xe6)];}))):_0x42f038[_0x4d0da4(0x136)](_0x4a49a1[0x0]);const _0xb96757=_0x2b405c[_0x4d0da4(0x16d)](_0xf50f1=>_0xf50f1[_0x4d0da4(0x146)]==_0x3ae393);_0xb96757[_0x4d0da4(0xce)]=_0x42f038;}else _0x2b405c[_0x4d0da4(0x136)]({'date':_0x3ae393,'changes':[_0x4a49a1[0x0]]});}const _0xfc4047=_0x2b405c[_0x4d0da4(0x16d)](_0x2f8ef2=>_0x2f8ef2[_0x4d0da4(0x146)]==_0x3ae393);if(_0xfc4047){let _0x4264c1=!![];_0xfc4047[_0x4d0da4(0xce)][_0x4d0da4(0x111)](_0x1c4524=>{const _0x1cb8c6=_0x4d0da4;if(_0x1c4524[_0x1cb8c6(0x1f3)]!=0x0)_0x4264c1=![];}),_0x4264c1&&(_0x2b405c=_0x2b405c[_0x4d0da4(0x118)](_0x2dff3e=>{const _0x710d7f=_0x4d0da4;return _0x2dff3e[_0x710d7f(0x146)]!=_0x3ae393;}));}let _0x266c96=dbConfig['get'](_0x4d0da4(0x1dc))[_0x4d0da4(0x16d)]({'botID':botID})['value']();_0x266c96&&(dbConfig[_0x4d0da4(0x1c5)](_0x4d0da4(0x1dc))[_0x4d0da4(0x16d)]({'botID':botID})[_0x4d0da4(0x1db)]({'liquidity':_0x2b405c})['write'](),config[_0x4d0da4(0x209)]=_0x2b405c),logHistory('success',_0x4d0da4(0x117)+Math[_0x4d0da4(0x1cb)](_0x4a49a1[0x0][_0x4d0da4(0x1f3)])+'\x20'+_0x4a49a1[0x0][_0x4d0da4(0xe6)]+'\x20'+(_0x4a49a1[0x0][_0x4d0da4(0x1f3)]>0x0?_0x4d0da4(0x1e8):_0x4d0da4(0x1a2))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x4d0da4(0x212),emittedConfiguration());}else logger['debug'](_0x4d0da4(0x1e2)+Math[_0x4d0da4(0x1cb)](_0x4a49a1[0x0][_0x4d0da4(0x1f3)])+'\x20'+_0x4a49a1[0x0][_0x4d0da4(0xe6)]+'\x20'+(_0x4a49a1[0x0][_0x4d0da4(0x1f3)]>0x0?_0x4d0da4(0x1e8):_0x4d0da4(0x1a2)));transactionDetected=!![],currentCoins=_0x4b1ccd,currentCoinsAll=_0x490d15;}else logger[_0x4d0da4(0x1ca)](_0x4d0da4(0x117)+Math['abs'](_0x4a49a1[0x0]['number'])+'\x20'+_0x4a49a1[0x0][_0x4d0da4(0xe6)]+'\x20'+(_0x4a49a1[0x0][_0x4d0da4(0x1f3)]>0x0?_0x4d0da4(0x1e8):_0x4d0da4(0x1a2))+_0x4d0da4(0x21a)),currentCoins=_0x4b1ccd,currentCoinsAll=_0x490d15;}await sleep(watchTransactionsInterval);}catch(_0x1a0138){if(!exchangeStopped)await handleError(_0x1a0138,_0x4d0da4(0x223));}else await sleep(0x64);}}async function loadSymbols(){const _0x4faa15=_0x212dba;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x4faa15(0x1ba)](markets)[_0x4faa15(0x111)](_0x5709d3=>{const _0x3b6a7=_0x4faa15;_0x5709d3[0x1][_0x3b6a7(0x11e)]&&_0x5709d3[0x1][_0x3b6a7(0x1f2)]&&allSymbols[_0x3b6a7(0x136)](_0x5709d3[0x0]);});}catch(_0x50e9ea){throw _0x50e9ea;}}async function initclient(){const _0x58ca1c=_0x212dba;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x58ca1c(0x19b),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x58ca1c(0x172),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3e3c4f=getNormalizedPerformance();emitPerformance(_0x3e3c4f),getStartingBalances(_0x3e3c4f);}async function toggleBotMode(){const _0x54d353=_0x212dba;let _0xd8d669=dbConfig[_0x54d353(0x1c5)](_0x54d353(0x1dc))[_0x54d353(0x16d)]({'botID':botID})['value']();if(_0xd8d669){const _0x4732b7=!_0xd8d669[_0x54d353(0x1d6)];dbConfig[_0x54d353(0x1c5)](_0x54d353(0x1dc))[_0x54d353(0x16d)]({'botID':botID})[_0x54d353(0x1db)]({'headless':_0x4732b7})['write'](),config[_0x54d353(0x1d6)]=_0x4732b7,proxyEmit(_0x54d353(0x212),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5ce874=_0x212dba;process[_0x5ce874(0x1bb)]({'updatebotmanager':!![]},_0x37b0c8=>{});}async function loadCoins(_0x5c4534){const _0x33b7d6=_0x212dba;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x502404,_0x40130a=0x0,_0x498f1f=0x0;_0x5c4534[_0x33b7d6(0x111)](_0x437cdf=>{const _0x2b9759=_0x33b7d6;loading[_0x2b9759(0x13c)][_0x2b9759(0x136)](_0x437cdf);}),loadingCanceled=![];let _0x9717cf=![];while(_0x502404!=_0x5c4534[_0x33b7d6(0x11c)]){_0x502404=0x0,_0x5c4534[_0x33b7d6(0x111)](_0x187d58=>{const _0x57a8da=_0x33b7d6;if(global[_0x57a8da(0xde)][noslash(_0x187d58)]){loading[_0x57a8da(0x13c)]=loading['remainingSymbols']['filter'](_0x4b41d4=>_0x4b41d4!=_0x187d58);if(!watchedSymbols[_0x57a8da(0x115)](_0x187d58))watchedSymbols[_0x57a8da(0x136)](_0x187d58);_0x502404++;}}),loading['progress']=Math[_0x33b7d6(0x24f)](_0x502404/_0x5c4534['length']*0x64);loading[_0x33b7d6(0xc1)]!=0x64&&(_0x498f1f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x498f1f>0x78*0x5&&!_0x9717cf&&(loading['cancel']=!![],emitLoadingProgress(),_0x9717cf=!![],logHistory(_0x33b7d6(0x211),_0x33b7d6(0x1f8)+loading['remainingSymbols'][_0x33b7d6(0x179)](',\x20')+_0x33b7d6(0x104)),logHistory(_0x33b7d6(0x211),_0x33b7d6(0x156)+loadCoinsRetryInterval/0xea60+_0x33b7d6(0x1ad)),pidCoinReloading=setTimeout(()=>{const _0x1163e6=_0x33b7d6;process[_0x1163e6(0x1bb)]({'stop':_0x1163e6(0x132)},_0x45db69=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x502404!=_0x40130a&&(_0x40130a=_0x502404,emitLoadingProgress()),_0x498f1f++,await sleep(0xc8);}_0x502404==_0x5c4534[_0x33b7d6(0x11c)]&&(coinsLoaded=!![],process[_0x33b7d6(0x1bb)]({'status':'enabled','live':_0x33b7d6(0xda)},_0x503606=>{}),_0x9717cf&&logHistory(_0x33b7d6(0x135),_0x33b7d6(0x1b8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5eaf37=_0x212dba;proxyEmit(_0x5eaf37(0x212),{...emittedConfiguration(),'configstate':_0x5eaf37(0x20d)});}function emitLoadingProgress(){const _0xec6318=_0x212dba;proxyEmit(_0xec6318(0xd0),loading);}async function getFiat(){const _0x4de5ce=_0x212dba;let _0x308f17=global[_0x4de5ce(0xde)][stablecoins[_0x4de5ce(0x161)][_0x4de5ce(0xe6)]],_0x530037=global['ticker'][stablecoins[_0x4de5ce(0x23b)]['coin']];return{'eur':Number(_0x308f17),'usd':Number(_0x530037)};}function capitalize(_0x517820){const _0x19e9fe=_0x212dba;return _0x517820[_0x19e9fe(0x23e)](0x0,0x1)[_0x19e9fe(0x19c)]()+_0x517820[_0x19e9fe(0x23e)](0x1);}function supportedExchanges(){const _0x2eadcd=_0x212dba,_0x3f2610=['ws',_0x2eadcd(0x1a0),_0x2eadcd(0x22b),'watchTrades',_0x2eadcd(0x245),_0x2eadcd(0x194),_0x2eadcd(0x1fc),'fetchOpenOrders',_0x2eadcd(0x1c3),_0x2eadcd(0x24d)];let _0x33ee0c=[],_0x58153a=[],_0x40c9e7=ccxt[_0x2eadcd(0x23c)][_0x2eadcd(0x19b)];_0x40c9e7[_0x2eadcd(0x111)](_0x174d43=>{const _0x381001=_0x2eadcd;try{const _0x3ef52d=new ccxt['pro'][_0x174d43]();_0x58153a[_0x381001(0x136)](_0x3ef52d);}catch(_0x175778){}}),_0x58153a[_0x2eadcd(0x111)](_0xe793fd=>{const _0x233dcd=_0x2eadcd;let _0x3e06db=0x0;_0x3f2610[_0x233dcd(0x111)](_0x427caf=>{const _0x16ca76=_0x233dcd;_0x427caf in _0xe793fd[_0x16ca76(0x22c)]&&_0xe793fd['has'][_0x427caf]&&_0x3e06db++;}),_0x3e06db==_0x3f2610[_0x233dcd(0x11c)]&&_0x33ee0c[_0x233dcd(0x136)](capitalize(_0xe793fd['id']));});let _0x1899ee=[];return _0x40c9e7[_0x2eadcd(0x111)](_0x385ee9=>{const _0x3299a4=_0x2eadcd;_0x385ee9=capitalize(_0x385ee9);if(!_0x33ee0c[_0x3299a4(0x115)](_0x385ee9))_0x1899ee[_0x3299a4(0x136)](_0x385ee9);}),_0x33ee0c;}function setStartDatePerformance(){const _0x567f82=_0x212dba;if(config&&config[_0x567f82(0x209)][0x0][_0x567f82(0xce)][_0x567f82(0x11c)]!=0x0){const _0xecda2f=config[_0x567f82(0x209)][0x0][_0x567f82(0xce)];dbPerformance['get'](_0x567f82(0x235))['find']({'date':config[_0x567f82(0x1ec)]})[_0x567f82(0x1db)]({'coins':_0xecda2f})[_0x567f82(0x20b)]();}}async function recreateCoinResults(){const _0x122440=_0x212dba;let _0x27c430,_0x3aa55b=[];try{const _0x4d4063=fns[_0x122440(0xe3)](fns[_0x122440(0x163)](config[_0x122440(0x1ec)][_0x122440(0x18f)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x2b8dbb of currentCoins){if(_0x2b8dbb['coin']!=config[_0x122440(0xd3)]){let _0x5dd3c1=0x0,_0x81dbee,_0x4147fb;_0x27c430=await getAllEventOrders(_0x2b8dbb[_0x122440(0x23a)]);if(_0x27c430['length']>0x0)_0x27c430[_0x122440(0x111)](_0x495117=>{const _0x297c34=_0x122440,_0x51a94d=_0x2b8dbb[_0x297c34(0x23a)][_0x297c34(0x115)](config[_0x297c34(0xd3)]+'/');_0x3aa55b['push']({'datetime':_0x495117['datetime'],'coin':_0x2b8dbb[_0x297c34(0xe6)],'symbol':_0x2b8dbb[_0x297c34(0x23a)],'side':_0x495117['side'],'reverse':_0x51a94d,'amount':formatResult(_0x495117[_0x297c34(0x21f)],0x8),'filled':formatResult(_0x495117['filled'],0x8),'price':formatResult(_0x495117[_0x297c34(0x140)],0x8)}),_0x5dd3c1=_0x495117[_0x297c34(0x186)]==_0x297c34(0x11b)?_0x5dd3c1+_0x495117['filled']:_0x5dd3c1-_0x495117[_0x297c34(0x21f)];if(!_0x4147fb)_0x4147fb=_0x495117[_0x297c34(0x140)];});_0x81dbee=_0x2b8dbb['number']-_0x5dd3c1;let _0x5473b3;config[_0x122440(0x209)][_0x122440(0x111)](_0x5baa56=>{const _0x24e011=_0x122440;!_0x5473b3&&(_0x5473b3=_0x5baa56[_0x24e011(0xce)][_0x24e011(0x16d)](_0x3fe7fe=>_0x3fe7fe[_0x24e011(0xe6)]==_0x2b8dbb['coin']),_0x5473b3&&(_0x81dbee=_0x5473b3[_0x24e011(0x1f3)],_0x4147fb=_0x5473b3[_0x24e011(0x140)]));});let _0x1003be=dbCoinResults[_0x122440(0x1c5)](_0x122440(0x1e7))[_0x122440(0x16d)]({'coin':_0x2b8dbb['coin']})[_0x122440(0x171)]();_0x1003be={'coin':_0x2b8dbb[_0x122440(0xe6)],'number':_0x81dbee,'breakeven':_0x4147fb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x122440(0x1e7))[_0x122440(0x16d)]({'coin':_0x2b8dbb['coin']})['assign'](_0x1003be)[_0x122440(0x20b)]();}}_0x3aa55b[_0x122440(0x17e)]((_0x7f9862,_0x193b78)=>_0x7f9862[_0x122440(0x137)]>_0x193b78[_0x122440(0x137)]?0x1:_0x193b78[_0x122440(0x137)]>_0x7f9862[_0x122440(0x137)]?-0x1:0x0);let _0x1addd8=0x0;for(let _0xcbaed3 of _0x3aa55b){await updateCoinResults(_0xcbaed3,!![]);}}catch(_0x2209bb){await handleError(_0x2209bb,'recreateCoinResults()');}}async function getAllEventOrders(_0x3f4d7a){const _0x1994ad=_0x212dba;let _0x5a7b4c=[],_0x43c1ce=dbLogs[_0x1994ad(0x1c5)](_0x1994ad(0x1b5))[_0x1994ad(0x118)](_0x1bebf1=>{const _0xb8e46d=_0x1994ad,_0x424eb1=_0x1bebf1[_0xb8e46d(0x119)]['toLowerCase']();return _0x424eb1[_0xb8e46d(0x115)](_0x3f4d7a[_0xb8e46d(0xc2)]())&&(_0x424eb1['includes'](_0xb8e46d(0x166))&&_0x424eb1[_0xb8e46d(0x115)](_0xb8e46d(0x208))||_0x424eb1[_0xb8e46d(0x115)](_0xb8e46d(0x21f))&&_0x424eb1['includes']('order'));})[_0x1994ad(0x1b4)](_0x1994ad(0x1e5))[_0x1994ad(0x171)]();return _0x43c1ce[_0x1994ad(0x111)](_0x488b02=>{const _0x2bf227=_0x1994ad,_0x57fdb6=_0x488b02[_0x2bf227(0x119)][_0x2bf227(0x115)]('sell')?_0x2bf227(0x16c):_0x2bf227(0x11b),_0x536afe=/#([0-9]|\.)+\s/i,_0x268606=Number(_0x536afe[_0x2bf227(0x248)](_0x488b02[_0x2bf227(0x119)])[0x0][_0x2bf227(0xeb)](0x1)),_0x1359b6=/@([0-9]|\.)+$/i,_0x54f9f6=Number(_0x1359b6[_0x2bf227(0x248)](_0x488b02[_0x2bf227(0x119)])[0x0][_0x2bf227(0xeb)](0x1));_0x5a7b4c['push']({'datetime':_0x488b02['time'],'coin':symbolToCoin(_0x3f4d7a),'symbol':_0x3f4d7a,'side':_0x57fdb6,'amount':_0x268606,'filled':_0x268606,'price':_0x54f9f6});}),_0x5a7b4c;}async function getAllOrders(_0x5faf5e,_0x285183){const _0x303500=_0x212dba;let _0x46536b=[];while(_0x285183<exchange[_0x303500(0xdf)]()){const _0x4d1268=0x1f4;try{const _0x134ee9=await exchange[_0x303500(0x1c3)](_0x5faf5e,_0x285183,_0x4d1268);if(_0x134ee9[_0x303500(0x11c)])_0x285183=_0x134ee9[_0x134ee9[_0x303500(0x11c)]-0x1][_0x303500(0xdb)]+0x1,_0x46536b=_0x46536b[_0x303500(0x238)](_0x134ee9);else break;}catch(_0x10f244){await handleError(_0x10f244,_0x303500(0x1df),_0x5faf5e);}}return _0x46536b;}async function validate24hChanges(){const _0x56baeb=_0x212dba;for(const _0x338d01 of currentCoins){if(_0x338d01['coin']!=config[_0x56baeb(0xd3)]){let _0x1731c4;_0x338d01[_0x56baeb(0x168)]?_0x1731c4=formatResult((0x1/(global['change'][noslash(_0x338d01[_0x56baeb(0x23a)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1731c4=global[_0x56baeb(0x109)][noslash(_0x338d01[_0x56baeb(0x23a)])],_0x1731c4<config['change24h']&&(logHistory(_0x56baeb(0x211),_0x338d01['coin']+_0x56baeb(0xfe)+_0x1731c4+'%'),logHistory(_0x56baeb(0x211),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x56baeb(0x211),_0x56baeb(0x16f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4d8fdd,_0x59f962){const _0xb561b6=_0x212dba;if(!_0x4d8fdd)return!![];const _0x56b30d=_0x59f962[_0xb561b6(0x1d3)]('.'),_0x59ef88=_0x4d8fdd[_0xb561b6(0x1d3)]('.');for(var _0x363103=0x0;_0x363103<_0x59ef88[_0xb561b6(0x11c)];_0x363103++){const _0x5ebbe6=~~_0x59ef88[_0x363103],_0x4dadc5=~~_0x56b30d[_0x363103];if(_0x5ebbe6<_0x4dadc5)return!![];if(_0x5ebbe6>_0x4dadc5)return![];}return![];}async function oneTimeMigration(){const _0x47f044=_0x212dba;let _0x49d2c0=dbLogs[_0x47f044(0x1c5)]('version')['value']();if(isOlderVersion(_0x49d2c0,_0x47f044(0x23f))){let _0x2d6ea1=[];const _0x52f43d=dbLogs['get'](_0x47f044(0x1b5))['value']();_0x52f43d['forEach'](_0x5e3f07=>{const _0x4914fe=_0x47f044;_0x2d6ea1[_0x4914fe(0x136)]({'time':_0x5e3f07[_0x4914fe(0x1e5)],'type':_0x5e3f07[_0x4914fe(0x22a)],'event':_0x5e3f07[_0x4914fe(0x119)]});}),dbLogs['get'](_0x47f044(0x1b5))['assign'](_0x2d6ea1)[_0x47f044(0x20b)]();}let _0x12a4e3=dbConfig[_0x47f044(0x1c5)](_0x47f044(0xd5))[_0x47f044(0x171)]();if(isOlderVersion(_0x12a4e3,_0x47f044(0x23f))){let _0x2900a8=dbConfig[_0x47f044(0x1c5)]('bot')['find']({'botID':botID})[_0x47f044(0x171)]();if(_0x2900a8){let _0x5668f4=[];_0x2900a8[_0x47f044(0x216)]['forEach'](_0x1e718f=>{const _0x320273=_0x47f044;_0x5668f4[_0x320273(0x136)]({'coin':_0x1e718f[_0x320273(0xe6)],'number':_0x1e718f[_0x320273(0xbf)],'price':_0x1e718f[_0x320273(0xcb)]}),delete _0x1e718f['startnumber'],delete _0x1e718f['startprice'];});if(_0x5668f4['length']!==0x0)fs[_0x47f044(0x1a1)](configbackuppath+('starting-balance-'+botID+_0x47f044(0x1bf)),JSON[_0x47f044(0xbd)](_0x5668f4,null,0x4),function(_0x551ffa){if(_0x551ffa){}});const _0x2c3960=(_0x2e9f66,_0x46a4b2)=>{const _0x209830=_0x47f044;let _0x4460be=[];_0x46a4b2[_0x209830(0x111)](_0x2dfc69=>{const _0x3f3032=_0x209830,_0x3110dc=_0x2e9f66[_0x3f3032(0x16d)](_0xe9be45=>_0xe9be45[_0x3f3032(0xe6)]==_0x2dfc69['coin']);if(!_0x3110dc)_0x4460be[_0x3f3032(0x136)](_0x2dfc69);});let _0x4e731f=[];return _0x2e9f66[_0x209830(0x111)](_0x1c9146=>{const _0x5945bc=_0x209830,_0x593fe7=_0x46a4b2['find'](_0x49b7f9=>_0x49b7f9[_0x5945bc(0xe6)]==_0x1c9146[_0x5945bc(0xe6)]);if(!_0x593fe7||_0x593fe7[_0x5945bc(0x1f3)]==0x0&&_0x1c9146[_0x5945bc(0x1f3)]!=0x0)_0x4e731f['push'](_0x1c9146);}),{'missingDay1':_0x4460be,'notInDay2':_0x4e731f};},_0x2d3d2b=dbPerformance[_0x47f044(0x1c5)](_0x47f044(0x235))[_0x47f044(0x1ed)]()['value']();if(_0x2d3d2b[_0x47f044(0x11c)]>0x1){const {missingDay1:_0x2170cb,notInDay2:_0x19498f}=_0x2c3960(_0x5668f4,_0x2d3d2b[0x1]['coins']);_0x5668f4=[..._0x5668f4,..._0x2170cb],_0x19498f['forEach'](_0x37559d=>{const _0x1aa242=_0x47f044;let _0x116805=_0x5668f4['findIndex'](_0x4b66ed=>_0x4b66ed[_0x1aa242(0xe6)]==_0x37559d[_0x1aa242(0xe6)]);_0x116805!=-0x1&&_0x5668f4['splice'](_0x116805,0x1);});}_0x5668f4['sort']((_0x386c17,_0x2e7414)=>_0x386c17[_0x47f044(0xe6)]>_0x2e7414[_0x47f044(0xe6)]?0x1:_0x2e7414[_0x47f044(0xe6)]>_0x386c17[_0x47f044(0xe6)]?-0x1:0x0);let _0x2371c3=[{'date':_0x2900a8[_0x47f044(0x1ec)],'changes':_0x5668f4}];_0x2d3d2b[_0x47f044(0x11c)]>0x2&&_0x2d3d2b['forEach']((_0x40c88b,_0x22e3f8)=>{const _0x57a5e8=_0x47f044;if(_0x22e3f8>0x0&&_0x22e3f8<_0x2d3d2b[_0x57a5e8(0x11c)]-0x1){const {missingDay1:_0x4b7507,notInDay2:_0x46f7ee}=_0x2c3960(_0x2d3d2b[_0x22e3f8][_0x57a5e8(0x1e7)],_0x2d3d2b[_0x22e3f8+0x1]['coins']);_0x5668f4=[],(_0x4b7507['length']!=0x0||_0x46f7ee[_0x57a5e8(0x11c)]!=0x0)&&(_0x4b7507[_0x57a5e8(0x11c)]!=0x0&&_0x5668f4['push'](..._0x4b7507),_0x46f7ee[_0x57a5e8(0x11c)]!=0x0&&(_0x46f7ee[_0x57a5e8(0x111)](_0x3b6340=>{const _0x29b748=_0x57a5e8;_0x3b6340[_0x29b748(0x1f3)]=-_0x3b6340['number'];}),_0x5668f4[_0x57a5e8(0x136)](..._0x46f7ee)),_0x5668f4['sort']((_0x38536f,_0x5ee388)=>_0x38536f[_0x57a5e8(0xe6)]>_0x5ee388[_0x57a5e8(0xe6)]?0x1:_0x5ee388[_0x57a5e8(0xe6)]>_0x38536f['coin']?-0x1:0x0),_0x2371c3[_0x57a5e8(0x136)]({'date':_0x2d3d2b[_0x22e3f8+0x1][_0x57a5e8(0x146)],'changes':_0x5668f4}));}}),dbConfig[_0x47f044(0x1c5)](_0x47f044(0x1dc))['find']({'botID':botID})[_0x47f044(0x1db)]({..._0x2900a8,'liquidity':_0x2371c3})[_0x47f044(0x20b)]();}}if(isOlderVersion(_0x12a4e3,_0x47f044(0xdd))){let _0x20fb9e=dbConfig[_0x47f044(0x1c5)]('bot')[_0x47f044(0x16d)]({'botID':botID})[_0x47f044(0x171)]();if(_0x20fb9e){const _0x172311=_0x20fb9e['exchange'],_0x159cae=_0x172311?capitalize(_0x172311):_0x47f044(0x207);dbConfig[_0x47f044(0x1c5)](_0x47f044(0x1dc))[_0x47f044(0x16d)]({'botID':botID})['assign']({'exchange':_0x159cae})[_0x47f044(0x20b)]();}}let _0x293c49=dbPerformance[_0x47f044(0x1c5)]('version')[_0x47f044(0x171)]();isOlderVersion(_0x293c49,_0x47f044(0x23f))&&setStartDatePerformance();let _0x1b2e78=dbCoinResults[_0x47f044(0x1c5)]('version')[_0x47f044(0x171)]();if(isOlderVersion(_0x1b2e78,_0x47f044(0x14c))){let _0x581a36=dbCoinResults[_0x47f044(0x1c5)](_0x47f044(0x1e7))[_0x47f044(0x171)]();if(_0x581a36['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2f880f=_0x212dba;dbConfig[_0x2f880f(0x15c)]('version',serverversion)[_0x2f880f(0x20b)](),dbPerformance[_0x2f880f(0x15c)](_0x2f880f(0xd5),serverversion)[_0x2f880f(0x20b)](),dbLogs[_0x2f880f(0x15c)](_0x2f880f(0xd5),serverversion)[_0x2f880f(0x20b)](),dbCoinResults[_0x2f880f(0x15c)](_0x2f880f(0xd5),serverversion)[_0x2f880f(0x20b)]();}function getConfiguration(_0x49ab7c){const _0x5c022b=_0x212dba;let _0x4e7d27=dbConfig[_0x5c022b(0x1c5)](_0x5c022b(0x1dc))[_0x5c022b(0x16d)]({'botID':_0x49ab7c})['value']();if(_0x4e7d27){let _0x31332b=![];typeof _0x4e7d27[_0x5c022b(0x1b9)]==_0x5c022b(0x142)&&(_0x4e7d27={..._0x4e7d27,'threshold':Number(_0x4e7d27['threshold'])},_0x31332b=!![]),_0x4e7d27['change24h']==undefined&&(_0x4e7d27={..._0x4e7d27,'change24h':-0x14},_0x31332b=!![]),_0x4e7d27[_0x5c022b(0x21b)]==undefined&&(_0x4e7d27={..._0x4e7d27,'fiat':_0x5c022b(0xca)},_0x31332b=!![]),_0x4e7d27[_0x5c022b(0xd9)]==undefined&&(_0x4e7d27={..._0x4e7d27,'onepagemode':settings[_0x5c022b(0xd9)]},_0x31332b=!![]),_0x4e7d27['colorscheme']==undefined&&(_0x4e7d27={..._0x4e7d27,'colorscheme':_0x5c022b(0xd1)},_0x31332b=!![]),_0x4e7d27[_0x5c022b(0x21c)]==undefined&&(_0x4e7d27={..._0x4e7d27,'autoliquidity':!![]},_0x31332b=!![]),_0x31332b&&(_0x4e7d27={'botID':_0x4e7d27['botID'],'exchange':_0x4e7d27['exchange'],'apiKey':_0x4e7d27[_0x5c022b(0x150)],'apiSecret':_0x4e7d27[_0x5c022b(0x139)],'apiPassword':_0x4e7d27['apiPassword'],'basecoin':_0x4e7d27['basecoin'],'botname':_0x4e7d27[_0x5c022b(0x22d)],'showname':_0x4e7d27['showname'],'threshold':_0x4e7d27[_0x5c022b(0x1b9)],'ordertype':_0x4e7d27[_0x5c022b(0x227)],'timeout':_0x4e7d27[_0x5c022b(0x17c)],'fiat':_0x4e7d27[_0x5c022b(0x21b)],'startdate':_0x4e7d27[_0x5c022b(0x1ec)],'recreate':_0x4e7d27[_0x5c022b(0x1e3)],'timeshift':_0x4e7d27[_0x5c022b(0x206)],'onepagemode':_0x4e7d27[_0x5c022b(0xd9)],'headless':_0x4e7d27[_0x5c022b(0x1d6)],'cooldown':_0x4e7d27['cooldown'],'change24h':_0x4e7d27[_0x5c022b(0x10b)],'emojibuy':_0x4e7d27['emojibuy'],'emojisell':_0x4e7d27[_0x5c022b(0x1b1)],'colorscheme':_0x4e7d27['colorscheme'],'portfolio':_0x4e7d27[_0x5c022b(0x216)],'autoliquidity':_0x4e7d27[_0x5c022b(0x21c)],'liquidity':_0x4e7d27[_0x5c022b(0x209)],'openOrders':_0x4e7d27[_0x5c022b(0x165)]},dbConfig[_0x5c022b(0x1c5)](_0x5c022b(0x1dc))[_0x5c022b(0x1a8)]()[_0x5c022b(0x20b)](),dbConfig[_0x5c022b(0x1c5)](_0x5c022b(0x1dc))[_0x5c022b(0x136)](_0x4e7d27)[_0x5c022b(0x20b)]());}else _0x4e7d27={'botID':_0x49ab7c,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5c022b(0x1f9)+_0x49ab7c,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x5c022b(0xca),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5c022b(0x206)],'onepagemode':settings[_0x5c022b(0xd9)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5c022b(0xd1),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4e7d27;}function emittedConfiguration(){const _0x395209=_0x212dba;let _0x47777f;if(config[_0x395209(0x150)]=='')_0x47777f={...config,'configstate':_0x395209(0x18e)};else config[_0x395209(0x150)]==_0x395209(0x1f7)?_0x47777f={...config,'configstate':'recovery'}:(_0x47777f={...config,'apiKey':'************','apiSecret':_0x395209(0x1aa)},config[_0x395209(0x188)]&&(_0x47777f['apiPassword']='************'));return _0x47777f;}function getSettings(){const _0x13fffe=_0x212dba;return dbSettings[_0x13fffe(0x1c5)]('settings')[_0x13fffe(0x171)]();}function getSecure(){const _0x2607b7=_0x212dba;return dbSecure[_0x2607b7(0x1c5)](_0x2607b7(0x199))[_0x2607b7(0x171)]()||{};}function updateTimeshift(_0x21ed1c){const _0x1f9541=_0x212dba;let _0x40922d=dbConfig[_0x1f9541(0x1c5)](_0x1f9541(0x1dc))['find']({'botID':botID})['value']();_0x40922d&&dbConfig[_0x1f9541(0x1c5)]('bot')[_0x1f9541(0x16d)]({'botID':botID})['assign']({'timeshift':_0x21ed1c})['write'](),config[_0x1f9541(0x206)]=_0x21ed1c,proxyEmit(_0x1f9541(0x212),emittedConfiguration());}function updateOnepagemode(_0x4e12be){const _0x1aefec=_0x212dba;let _0x2afa97=dbConfig[_0x1aefec(0x1c5)]('bot')['find']({'botID':botID})[_0x1aefec(0x171)]();_0x2afa97&&dbConfig['get'](_0x1aefec(0x1dc))['find']({'botID':botID})[_0x1aefec(0x1db)]({'onepagemode':_0x4e12be})['write'](),config['onepagemode']=_0x4e12be,proxyEmit(_0x1aefec(0x212),emittedConfiguration());}async function storeConfiguration(_0xe5856b){const _0x182c5c=_0x212dba;logger['debug'](_0x182c5c(0x18c));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x182c5c(0x1ca)]('Transaction\x20detection\x20blocked');let _0x5d08c0=[],_0x46e06c=![],_0x2c3872=![],_0x327447=[];_0xe5856b['portfolio'][_0x182c5c(0x111)](_0x36d766=>{const _0x47e647=_0x182c5c;if(!_0x36d766[_0x47e647(0xf1)]&&_0x36d766[_0x47e647(0xe6)]!=_0xe5856b[_0x47e647(0xd3)])_0x327447['push'](_0x36d766[_0x47e647(0x23a)]);}),_0x327447[_0x182c5c(0x111)](_0xe9cd23=>{const _0x5ee107=_0x182c5c,_0x3ff598=watchedSymbols[_0x5ee107(0x115)](_0xe9cd23);!_0x3ff598&&_0x5d08c0[_0x5ee107(0x136)](_0xe9cd23);}),_0x327447[_0x182c5c(0x111)](_0x3966d9=>{const _0x51e4c1=_0x182c5c,_0x15c5ba=currentCoins[_0x51e4c1(0x16d)](_0x2e6ce1=>_0x2e6ce1[_0x51e4c1(0x23a)]==_0x3966d9);!_0x15c5ba&&(_0x46e06c=!![]);}),currentCoins[_0x182c5c(0x111)](_0xe6b469=>{const _0x1cbd8d=_0x182c5c;if(_0xe6b469[_0x1cbd8d(0xe6)]!=config[_0x1cbd8d(0xd3)]){const _0x440293=_0x327447[_0x1cbd8d(0x16d)](_0x3d2934=>_0x3d2934==_0xe6b469[_0x1cbd8d(0x23a)]);!_0x440293&&(_0x46e06c=!![]);}}),_0xe5856b[_0x182c5c(0x216)][_0x182c5c(0x111)](_0x427eca=>{const _0x45049a=_0x182c5c,_0x40b2c0=config[_0x45049a(0x216)][_0x45049a(0x16d)](_0x4a638b=>_0x4a638b[_0x45049a(0xe6)]==_0x427eca[_0x45049a(0xe6)]);if(_0x40b2c0&&_0x427eca[_0x45049a(0x124)]!=_0x40b2c0[_0x45049a(0x124)])_0x2c3872=!![];});let _0x260615=dbConfig[_0x182c5c(0x1c5)](_0x182c5c(0x1dc))[_0x182c5c(0x16d)]({'botID':botID})[_0x182c5c(0x171)]();_0xe5856b={..._0xe5856b,'apiKey':crypt['decrypt'](secure['privateKey'],_0xe5856b['apiKey'])[_0x182c5c(0x237)],'apiSecret':crypt[_0x182c5c(0x17d)](secure[_0x182c5c(0xee)],_0xe5856b[_0x182c5c(0x139)])[_0x182c5c(0x237)]};_0xe5856b[_0x182c5c(0x188)]&&(_0xe5856b[_0x182c5c(0x188)]=crypt['decrypt'](secure[_0x182c5c(0xee)],_0xe5856b['apiPassword'])[_0x182c5c(0x237)]);let _0xd2f840=![];if(_0x260615){_0xe5856b['apiKey']==_0x182c5c(0x1aa)?_0xe5856b[_0x182c5c(0x150)]=config[_0x182c5c(0x150)]:_0xd2f840=!![];_0xe5856b['apiSecret']==_0x182c5c(0x1aa)?_0xe5856b[_0x182c5c(0x139)]=config[_0x182c5c(0x139)]:_0xd2f840=!![];if(_0xe5856b[_0x182c5c(0x188)]==_0x182c5c(0x1aa))_0xe5856b[_0x182c5c(0x188)]=config[_0x182c5c(0x188)];else{if(_0xe5856b[_0x182c5c(0x188)])_0xd2f840=!![];}dbConfig[_0x182c5c(0x1c5)]('bot')[_0x182c5c(0x16d)]({'botID':botID})[_0x182c5c(0x1db)](_0xe5856b)[_0x182c5c(0x20b)]();}else dbConfig[_0x182c5c(0x1c5)](_0x182c5c(0x1dc))['push'](_0xe5856b)['write'](),_0xd2f840=!![],process[_0x182c5c(0x1bb)]({'status':_0x182c5c(0x1c6),'live':_0x182c5c(0xda)},_0x53e317=>{});process[_0x182c5c(0x1bb)]({'botname':_0xe5856b[_0x182c5c(0x22d)]},_0x5dc54d=>{}),updateBotManager(),config={..._0xe5856b},proxyEmit(_0x182c5c(0xfd)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xd2f840)await reset(_0x5d08c0,!![]);else _0x46e06c||_0x2c3872?await reset(_0x5d08c0,![]):getBalances();blockTransactionDetection=![],logger[_0x182c5c(0x1ca)](_0x182c5c(0x1c4));}async function storeHeadless(_0x7210d6){const _0x2f72a1=_0x212dba,_0x10f4fd={...config,'headless':_0x7210d6[_0x2f72a1(0x1d6)]};let _0x51a2ae=dbConfig[_0x2f72a1(0x1c5)](_0x2f72a1(0x1dc))['find']({'botID':botID})[_0x2f72a1(0x171)]();_0x51a2ae&&dbConfig[_0x2f72a1(0x1c5)](_0x2f72a1(0x1dc))[_0x2f72a1(0x16d)]({'botID':botID})['assign'](_0x10f4fd)['write'](),config={..._0x10f4fd},updateBotManager(),proxyEmit(_0x2f72a1(0x212),emittedConfiguration());}async function storeFiat(_0x7b9747){const _0x177b91=_0x212dba,_0x2a9acd={...config,'fiat':_0x7b9747};let _0x9c6cd2=dbConfig['get'](_0x177b91(0x1dc))[_0x177b91(0x16d)]({'botID':botID})[_0x177b91(0x171)]();_0x9c6cd2&&dbConfig[_0x177b91(0x1c5)](_0x177b91(0x1dc))[_0x177b91(0x16d)]({'botID':botID})[_0x177b91(0x1db)](_0x2a9acd)[_0x177b91(0x20b)](),config={..._0x2a9acd},proxyEmit(_0x177b91(0x212),emittedConfiguration());}function resetHistory(){const _0x4415fa=_0x212dba;logger[_0x4415fa(0x231)]('Resetting\x20bot\x20history');try{if(fs[_0x4415fa(0x1b7)](path[_0x4415fa(0x179)](configpath,_0x4415fa(0x1f4)+botID+_0x4415fa(0x230))))fs[_0x4415fa(0x149)](path[_0x4415fa(0x179)](configpath,_0x4415fa(0x1f4)+botID+_0x4415fa(0x230)));if(fs['existsSync'](path[_0x4415fa(0x179)](configpath,'bot-'+botID+_0x4415fa(0x15f))))fs[_0x4415fa(0x149)](path['join'](configpath,_0x4415fa(0x1f4)+botID+'-performance.json'));if(fs[_0x4415fa(0x1b7)](path['join'](configpath,'bot-'+botID+_0x4415fa(0x181))))fs[_0x4415fa(0x149)](path[_0x4415fa(0x179)](configpath,_0x4415fa(0x1f4)+botID+_0x4415fa(0x181)));}catch(_0x3b69b9){if(_0x3b69b9)logger[_0x4415fa(0x231)](_0x4415fa(0x1d7),_0x3b69b9);}const _0x805a4f=getDate();let _0x599393=[];currentCoins[_0x4415fa(0x111)](_0xd09651=>{const _0x22d331=_0x4415fa;_0x599393['push']({'coin':_0xd09651[_0x22d331(0xe6)],'number':_0xd09651[_0x22d331(0x1f3)],'price':_0xd09651['last']});});let _0xb9ccae=dbConfig['get'](_0x4415fa(0x1dc))[_0x4415fa(0x16d)]({'botID':botID})[_0x4415fa(0x171)]();_0xb9ccae&&(dbConfig['get']('bot')[_0x4415fa(0x16d)]({'botID':botID})[_0x4415fa(0x1db)]({'liquidity':[{'date':_0x805a4f,'changes':_0x599393}]})[_0x4415fa(0x20b)](),config[_0x4415fa(0x209)]=[]),process[_0x4415fa(0x1bb)]({'stop':_0x4415fa(0x132)},_0x43dfeb=>{});}function noslash(_0x5d76b0){const _0x4de2a2=_0x212dba;return _0x5d76b0[_0x4de2a2(0x18f)]('/','');}function updateHighestFee(_0x1ef063){const _0x18d984=_0x212dba;if(_0x1ef063[_0x18d984(0x168)]){let _0x507e78={'filled':_0x1ef063[_0x18d984(0x21f)]*_0x1ef063[_0x18d984(0x140)],'amount':_0x1ef063[_0x18d984(0x21f)]*_0x1ef063['price'],'side':_0x1ef063['side']=='sell'?_0x18d984(0x11b):'sell','price':0x1/_0x1ef063[_0x18d984(0x140)]};_0x1ef063={..._0x1ef063,..._0x507e78};}const _0x30fdc8=defaultFee*_0x1ef063[_0x18d984(0x21f)]*_0x1ef063[_0x18d984(0x140)];lastFees[_0x18d984(0x1d5)][_0x18d984(0x11c)]===0x14&&lastFees['recent20'][_0x18d984(0x1bd)](),lastFees[_0x18d984(0x1d5)]['push'](_0x30fdc8),lastFees[_0x18d984(0x24e)]=Math[_0x18d984(0xf5)](...lastFees[_0x18d984(0x1d5)]);}async function updateNumberCoinsCcxt(_0x1b3a98){const _0x3bccde=_0x212dba;logger[_0x3bccde(0x1ca)]('0\x20-\x20EXECUTION:\x20'+_0x1b3a98[_0x3bccde(0x23a)]+'\x20|\x20'+_0x1b3a98[_0x3bccde(0x14b)]+'\x20|\x20'+_0x1b3a98['id']);let _0x2fdc5e=_0x1b3a98[_0x3bccde(0x14b)],_0x2491d5=![];currentCoins[_0x3bccde(0x111)](_0x2d8dab=>{const _0x356dd3=_0x3bccde;_0x2d8dab[_0x356dd3(0x23a)]==_0x1b3a98[_0x356dd3(0x23a)]&&(_0x2491d5=!![]);});if(!_0x2491d5)return;const _0x1c6161=currentCoins[_0x3bccde(0x16d)](_0x4c6ddf=>_0x4c6ddf['symbol']==_0x1b3a98[_0x3bccde(0x23a)]),_0x144b6a=_0x9ffd88=>{if(_0x1c6161)_0x1c6161['orderstatus']=_0x9ffd88;};if(_0x2fdc5e=='open')_0x144b6a(_0x3bccde(0x19a));else{if(_0x2fdc5e=='canceled'){_0x144b6a(_0x3bccde(0xdc));const _0x4aff66=await getCoins();[currentCoins,currentCoinsAll]=_0x4aff66,await getOpenOrders(),handleOpenOrders();}else{if(_0x2fdc5e==_0x3bccde(0x228)){logger[_0x3bccde(0x1ca)](_0x3bccde(0xe4)+_0x1b3a98[_0x3bccde(0x23a)]+'\x20|\x20'+_0x1b3a98['filled']+_0x3bccde(0x1f5)+_0x1b3a98['id']);let _0x616bfa=![];if(lastOrders)for(const _0x5e7cf3 of lastOrders){const _0x45e1f5=0xc8,_0x40a4ae=0x1388;let _0x443c7b=0x0;while(!_0x5e7cf3[_0x3bccde(0x15e)]&&_0x443c7b*_0x45e1f5<_0x40a4ae){_0x443c7b++,await sleep(_0x45e1f5);}if(_0x443c7b>0x0)logger[_0x3bccde(0x1ca)](_0x3bccde(0x1c9)+_0x443c7b*_0x45e1f5/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x5e7cf3[_0x3bccde(0x15e)]==_0x1b3a98['id']){logger['debug'](_0x3bccde(0x121)+_0x1b3a98['id']),_0x616bfa=!![];if(_0x5e7cf3[_0x3bccde(0x21f)]==0x0){logger[_0x3bccde(0x1ca)](_0x3bccde(0x10a)+_0x1b3a98['id']);if(_0x1b3a98['average'])_0x5e7cf3[_0x3bccde(0x140)]=_0x1b3a98[_0x3bccde(0xc0)];else{if(_0x1b3a98['price'])_0x5e7cf3['price']=_0x1b3a98[_0x3bccde(0x140)];else{}}_0x5e7cf3[_0x3bccde(0x21f)]=_0x1b3a98[_0x3bccde(0x21f)],updateHighestFee(_0x5e7cf3),_0x144b6a('filled'),await validateOrders();if(lockOrders==ORDERS[_0x3bccde(0xed)]){const _0x2f8514=await getCoins();[currentCoins,currentCoinsAll]=_0x2f8514;}_0x5e7cf3[_0x3bccde(0x1ea)]={'currency':_0x1b3a98[_0x3bccde(0x1ea)]?_0x1b3a98[_0x3bccde(0x1ea)][_0x3bccde(0x1b6)]:null,'cost':_0x1b3a98[_0x3bccde(0x1ea)]?_0x1b3a98['fee'][_0x3bccde(0x1b0)]:0x0},await updateCoinResults(_0x5e7cf3);}}}if(!_0x616bfa){logger['debug'](_0x3bccde(0xe8)+_0x1b3a98['id']),_0x144b6a('filled');const _0x4cbad2=await getCoins();[currentCoins,currentCoinsAll]=_0x4cbad2,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x44901e=JSON[_0x3bccde(0x100)](lastBalances[_0x3bccde(0x216)]);const _0x4beb40=_0x44901e[_0x3bccde(0x16d)](_0x3a0170=>_0x3a0170[_0x3bccde(0x23a)]==_0x1b3a98[_0x3bccde(0x23a)]);if(_0x4beb40){if(_0x2fdc5e=='open')_0x4beb40[_0x3bccde(0x17f)]=_0x4beb40[_0x3bccde(0x17f)]=='filled'?_0x3bccde(0x21f):_0x3bccde(0x19a);else{if(_0x2fdc5e==_0x3bccde(0xdc))_0x4beb40[_0x3bccde(0x17f)]=_0x4beb40['orderstatus']==_0x3bccde(0x21f)?'filled':_0x3bccde(0xdc);else _0x2fdc5e==_0x3bccde(0x228)&&(_0x4beb40[_0x3bccde(0x17f)]=_0x3bccde(0x21f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3bccde(0xbd)](_0x44901e)},proxyEmit(_0x3bccde(0x172),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x10aeca=_0x212dba;await getOpenOrders();let _0x4dfdee=![];currentCoins[_0x10aeca(0x111)](_0x5677f0=>{const _0x39bbe1=_0x10aeca;_0x4dfdee=allOpenOrders['find'](_0x2409ed=>_0x2409ed[_0x39bbe1(0x23a)]==_0x5677f0[_0x39bbe1(0x23a)]),_0x5677f0['orderstatus']=_0x4dfdee?'open':_0x39bbe1(0x174);});}async function getCoins(_0x22f7b8=!![],_0x2f2888=config[_0x212dba(0xd3)]){const _0x5041e7=_0x212dba;let _0x33b732,_0x381eb6=[],_0x4c5819=[],_0x8f9545=[],_0x1e9e91=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x33b732=await exchange[_0x5041e7(0x24d)](),mybalances=_0x33b732[_0x5041e7(0x178)];for(const [_0x2a1c67,_0x2588fa]of Object[_0x5041e7(0x1ba)](mybalances)){_0x1e9e91[_0x5041e7(0x136)](_0x2a1c67);}if(_0x2f2888=='')for(const [_0x51bd0f,_0x1f1367]of Object[_0x5041e7(0x1ba)](mybalances)){_0x1f1367!=0x0&&_0x4c5819[_0x5041e7(0x136)]({'coin':_0x51bd0f});}else{let _0x2b5add=![];for(const [_0x5cfe03,_0x33806f]of Object[_0x5041e7(0x1ba)](mybalances)){if(_0x1e9e91['includes'](_0x5cfe03)){const _0x5bef60=config[_0x5041e7(0x216)][_0x5041e7(0x16d)](_0x3920e6=>_0x3920e6[_0x5041e7(0xe6)]==_0x5cfe03),_0x9b1e16=_0x5cfe03+'/'+_0x2f2888,_0x574383=_0x2f2888+'/'+_0x5cfe03,_0x4f52db=currentCoins[_0x5041e7(0x16d)](_0x5a8ccf=>_0x5a8ccf['coin']==_0x5cfe03);_0x2b5add=![];if((_0x33806f!=0x0||_0x5bef60)&&(allSymbols[_0x5041e7(0x115)](_0x9b1e16)||_0x5cfe03==_0x2f2888))_0x5cfe03!=_0x2f2888&&_0x381eb6['push'](_0x9b1e16),_0x4c5819[_0x5041e7(0x136)]({'coin':_0x5cfe03,'symbol':_0x9b1e16,'reverse':![],'number':Math[_0x5041e7(0xf5)](_0x33806f+(_0x5bef60&&_0x5bef60['offset']||0x0),0x0),'orderstatus':_0x4f52db?_0x4f52db[_0x5041e7(0x17f)]:_0x5041e7(0x174)});else(_0x33806f!=0x0||_0x5bef60)&&allSymbols[_0x5041e7(0x115)](_0x574383)&&(_0x5cfe03!=_0x2f2888&&_0x381eb6['push'](_0x574383),_0x4c5819[_0x5041e7(0x136)]({'coin':_0x5cfe03,'symbol':_0x574383,'reverse':!![],'number':Math[_0x5041e7(0xf5)](_0x33806f+(_0x5bef60&&_0x5bef60[_0x5041e7(0x124)]||0x0),0x0),'orderstatus':_0x4f52db?_0x4f52db[_0x5041e7(0x17f)]:_0x5041e7(0x174)}));}}}}catch(_0xb2ec38){if(!_0x22f7b8)handleErrorNoStop(_0xb2ec38,_0x5041e7(0x213));else await handleError(_0xb2ec38,_0x5041e7(0x213));}return _0x8f9545=cloneDeep(_0x4c5819),_0x4c5819=_0x4c5819[_0x5041e7(0x118)](_0xbe80a9=>{const _0x454591=_0x5041e7,_0x2d831b=config[_0x454591(0x216)][_0x454591(0x16d)](_0xde2500=>_0xde2500[_0x454591(0xe6)]==_0xbe80a9[_0x454591(0xe6)]);return _0x2d831b&&!_0x2d831b[_0x454591(0xf1)];}),[_0x4c5819,_0x8f9545];}async function getCoinNumber(_0x1c5704){const _0x45349f=_0x212dba;let _0x55f3e5;try{const _0x587691=await exchange[_0x45349f(0x24d)]();_0x55f3e5=_0x587691[_0x45349f(0x178)][_0x1c5704];}catch(_0x3299de){await handleError(_0x3299de,_0x45349f(0x129));}return _0x55f3e5;}async function getOpenOrders(){const _0xbdebe=_0x212dba;let _0x503e1a;allOpenOrders=[];try{for(const _0x511538 of config[_0xbdebe(0x216)]){!_0x511538['excluded']&&_0x511538[_0xbdebe(0xe6)]!=config[_0xbdebe(0xd3)]&&(_0x503e1a=await exchange[_0xbdebe(0xe0)](_0x511538[_0xbdebe(0x23a)]),_0x503e1a[_0xbdebe(0x11c)]>0x0&&allOpenOrders[_0xbdebe(0x136)](_0x503e1a[0x0]));}}catch(_0x28be78){await handleError(_0x28be78,_0xbdebe(0x185));}}async function handleOpenOrders(_0x45009a=0x0){const _0x50480e=_0x212dba;allOpenOrders[_0x50480e(0x11c)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x45009a==0x0?(logger[_0x50480e(0x1ca)](_0x50480e(0x152)),_0x45009a++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x50480e(0x1ca)](_0x50480e(0x219)),validateOrders(_0x50480e(0x12e))));}async function testAPI(_0x7bfd4){const _0x23ac27=_0x212dba,_0x1c5743=ccxt['pro'][_0x7bfd4[_0x23ac27(0x1d4)][_0x23ac27(0xc2)]()],_0x1dbf69=new _0x1c5743({'apiKey':_0x7bfd4[_0x23ac27(0x150)],'secret':_0x7bfd4[_0x23ac27(0x139)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x7bfd4[_0x23ac27(0x188)])_0x1dbf69['password']=_0x7bfd4[_0x23ac27(0x188)];try{await _0x1dbf69['loadMarkets']();}catch(_0x4af41b){throw _0x4af41b;}}function cloneDeep(_0xed4630){return JSON['parse'](JSON['stringify'](_0xed4630));}async function getPortfolio(_0x4b4561){const _0x231d3a=_0x212dba;let _0x28ab0c=[],_0x415ade=[],_0x3ca8c3=[],_0xaa60c5;if(_0x4b4561[_0x231d3a(0x150)]!==_0x231d3a(0x1aa)||_0x4b4561[_0x231d3a(0x139)]!==_0x231d3a(0x1aa)||_0x4b4561[_0x231d3a(0x188)]&&_0x4b4561['apiPassword']!=='************'){if(config['exchange']){if(_0x4b4561[_0x231d3a(0x150)]==_0x231d3a(0x1aa))_0x4b4561[_0x231d3a(0x150)]=config['apiKey'];if(_0x4b4561[_0x231d3a(0x139)]==_0x231d3a(0x1aa))_0x4b4561['apiSecret']=config[_0x231d3a(0x139)];if(_0x4b4561['apiPassword']=='************')_0x4b4561[_0x231d3a(0x188)]=config[_0x231d3a(0x188)];try{await testAPI(_0x4b4561);}catch(_0x54d6c3){if(_0x54d6c3[_0x231d3a(0xcd)]()['includes'](_0x231d3a(0x154))){logger[_0x231d3a(0x1ca)](_0x231d3a(0x19e)),proxyEmit('portfolio',![]);return;}else{handleError(_0x54d6c3,'getPortfolio(0)');return;}}}await initExchange(_0x4b4561[_0x231d3a(0x1d4)],_0x4b4561[_0x231d3a(0x150)],_0x4b4561['apiSecret'],_0x4b4561[_0x231d3a(0x188)]);try{await loadSymbols();}catch(_0x5270cf){if(_0x5270cf['toString']()['includes'](_0x231d3a(0x154))){proxyEmit(_0x231d3a(0x216),![]);return;}else{handleError(_0x5270cf,_0x231d3a(0x15d));return;}}const _0x2a43fe=await getCoins(![],_0x4b4561[_0x231d3a(0xd3)]);_0x3ca8c3=cloneDeep(_0x2a43fe[0x1]);}else _0x3ca8c3=cloneDeep(currentCoinsAll);if(_0x4b4561[_0x231d3a(0xd3)]=='')proxyEmit(_0x231d3a(0x216),_0x3ca8c3);else{_0x3ca8c3[_0x231d3a(0x111)](_0x52ae45=>{const _0x844632=_0x231d3a;if(_0x52ae45['coin']!=_0x4b4561[_0x844632(0xd3)])_0x28ab0c[_0x844632(0x136)](_0x52ae45[_0x844632(0x23a)]);});if(_0x28ab0c[_0x231d3a(0x11c)]==0x0)logHistory(_0x231d3a(0x211),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x415ade=await exchange[_0x231d3a(0x1a0)](_0x28ab0c);}catch(_0x5929a4){if(_0x5929a4['toString']()['includes'](_0x231d3a(0x154))){proxyEmit(_0x231d3a(0x216),![]);return;}else{handleError(_0x5929a4,_0x231d3a(0x17b));return;}}_0x3ca8c3[_0x231d3a(0x111)](_0x4ca4d0=>{const _0x5ef451=_0x231d3a;_0x4ca4d0[_0x5ef451(0xe6)]!=_0x4b4561[_0x5ef451(0xd3)]?_0xaa60c5=_0x4ca4d0['reverse']?0x1/_0x415ade[_0x4ca4d0[_0x5ef451(0x23a)]][_0x5ef451(0x1dd)]:_0x415ade[_0x4ca4d0['symbol']][_0x5ef451(0x1dd)]:_0xaa60c5=0x1,_0x4ca4d0[_0x5ef451(0x140)]=formatResult(_0xaa60c5,0x8);}),proxyEmit('portfolio',_0x3ca8c3);}}}function truncateTradeAmount(_0x27ca16,_0x2bf2d7){const _0x3f6921=_0x212dba;let _0x4d7dd4=0x0;try{_0x4d7dd4=exchange[_0x3f6921(0x214)](_0x27ca16,_0x2bf2d7);}catch(_0x2564ad){}return _0x4d7dd4;}function checkMinimums(_0x2690b8){const _0x228f92=_0x212dba;let _0x230c27=!![];const _0x164951=!_0x2690b8[_0x228f92(0x168)]?markets[_0x2690b8[_0x228f92(0x23a)]][_0x228f92(0x125)][_0x228f92(0x1a7)]['min']:markets[_0x2690b8[_0x228f92(0x23a)]][_0x228f92(0x125)][_0x228f92(0x1b0)]['min'],_0x356c9e=!_0x2690b8[_0x228f92(0x168)]?markets[_0x2690b8[_0x228f92(0x23a)]][_0x228f92(0x125)]['cost']['min']:markets[_0x2690b8[_0x228f92(0x23a)]]['limits']['amount']['min'],_0x43a395=truncateTradeAmount(_0x2690b8['symbol'],_0x2690b8[_0x228f92(0x148)]);_0x2690b8[_0x228f92(0x148)]=_0x43a395;if(Math[_0x228f92(0x1cb)](_0x43a395)<_0x164951)_0x230c27=![];if(Math[_0x228f92(0x1cb)](_0x43a395)*_0x2690b8['last']<_0x356c9e)_0x230c27=![];if(_0x2690b8[_0x228f92(0x186)]==_0x228f92(0x16c)){let _0x5f1955=config[_0x228f92(0x216)][_0x228f92(0x16d)](_0x3f2dae=>_0x3f2dae[_0x228f92(0xe6)]==_0x2690b8[_0x228f92(0xe6)]);if(_0x5f1955[_0x228f92(0x124)]>0x0){if(Math[_0x228f92(0x1cb)](_0x43a395)>_0x2690b8[_0x228f92(0x1f3)]-_0x5f1955[_0x228f92(0x124)])_0x230c27=![];}else{if(Math[_0x228f92(0x1cb)](_0x43a395)>_0x2690b8['number'])_0x230c27=![];}}if(_0x2690b8[_0x228f92(0x186)]==_0x228f92(0x11b)){let _0x691c04=config[_0x228f92(0x216)][_0x228f92(0x16d)](_0x40aa22=>_0x40aa22[_0x228f92(0xe6)]==config[_0x228f92(0xd3)]),_0x1901da=currentCoins[_0x228f92(0x16d)](_0x508800=>_0x508800[_0x228f92(0xe6)]==config[_0x228f92(0xd3)]);if(_0x691c04[_0x228f92(0x124)]>0x0){if(Math[_0x228f92(0x1cb)](_0x43a395)*_0x2690b8[_0x228f92(0x1dd)]>_0x1901da[_0x228f92(0x1f3)]-_0x691c04[_0x228f92(0x124)])_0x230c27=![];}else{if(Math[_0x228f92(0x1cb)](_0x43a395)*_0x2690b8[_0x228f92(0x1dd)]>_0x1901da[_0x228f92(0x1f3)])_0x230c27=![];}}return _0x230c27;}async function getBalances(_0x56a42c=!![]){const _0x49e240=_0x212dba;let _0x115cc0=0x0,_0xe7051d;const _0x213688=config[_0x49e240(0x1b9)];if(config[_0x49e240(0x1d6)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x49e240(0x111)](_0x39f39c=>{const _0x3376f3=_0x49e240;if(_0x39f39c[_0x3376f3(0xe6)]!=config['basecoin']){let _0x5ebc10=global['ticker'][noslash(_0x39f39c[_0x3376f3(0x23a)])];_0xe7051d=_0x39f39c[_0x3376f3(0x168)]?0x1/_0x5ebc10:_0x5ebc10;}else _0xe7051d=0x1;let _0x295cf2=_0x39f39c[_0x3376f3(0x1f3)]*_0xe7051d;_0x115cc0+=_0x295cf2,_0x39f39c[_0x3376f3(0x1dd)]=formatResult(Number(_0xe7051d),0x8),_0x39f39c['value']=_0x295cf2;}),currentCoins[_0x49e240(0x111)](_0x2f4559=>{const _0x1fc552=_0x49e240;let _0x4cb372=config[_0x1fc552(0x216)][_0x1fc552(0x16d)](_0x5bcb1f=>_0x5bcb1f[_0x1fc552(0xe6)]==_0x2f4559[_0x1fc552(0xe6)]),_0x4adbb0=Number(_0x4cb372['distribution']),_0x29120a=_0x2f4559['value']/_0x115cc0*0x64,_0x94e65e=_0x4adbb0*_0x115cc0/0x64/_0x2f4559[_0x1fc552(0x1dd)]-_0x2f4559[_0x1fc552(0x1f3)];_0x2f4559[_0x1fc552(0x10c)]=formatResult(_0x29120a,0x3),_0x2f4559['target']=formatResult(_0x4adbb0,0x3),_0x2f4559[_0x1fc552(0x148)]=formatResult(_0x94e65e,0x8),_0x2f4559['side']='',_0x2f4559[_0x1fc552(0x210)]=![];if(_0x2f4559[_0x1fc552(0xe6)]!=config['basecoin']){if(_0x2f4559[_0x1fc552(0x10c)]>_0x4adbb0)_0x2f4559['side']=_0x1fc552(0x16c),_0x2f4559[_0x1fc552(0x210)]=checkMinimums(_0x2f4559);else _0x2f4559[_0x1fc552(0x10c)]<_0x4adbb0&&(_0x2f4559[_0x1fc552(0x186)]='buy',_0x2f4559[_0x1fc552(0x210)]=checkMinimums(_0x2f4559));}_0x2f4559[_0x1fc552(0x1a6)]=_0x2f4559[_0x1fc552(0x10c)]/_0x2f4559[_0x1fc552(0x234)]-0x1;if(_0x2f4559[_0x1fc552(0x17f)]==_0x1fc552(0x21f)||_0x2f4559[_0x1fc552(0x17f)]==_0x1fc552(0xdc))_0x2f4559[_0x1fc552(0x17f)]=_0x1fc552(0x174);}),currentCoins['sort']((_0x189545,_0x536a32)=>_0x189545[_0x49e240(0x1a6)]<_0x536a32[_0x49e240(0x1a6)]?0x1:_0x536a32[_0x49e240(0x1a6)]<_0x189545[_0x49e240(0x1a6)]?-0x1:0x0);const _0x4d8b36=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4d8b36[_0x49e240(0x161)],'usd':_0x4d8b36['usd'],'portfolio':JSON[_0x49e240(0xbd)](currentCoins),'threshold':_0x213688},proxyEmit(_0x49e240(0x172),{'serverversion':serverversion,'balances':lastBalances});if(_0x56a42c){if(config[_0x49e240(0x1d6)])headlessMode({'portfolio':currentCoins,'threshold':_0x213688});else{if(lockOrders==ORDERS[_0x49e240(0x226)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x213688});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x363bcc=getNormalizedPerformance();getStartingBalances(_0x363bcc),emitPerformance(_0x363bcc);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x52b08e=getNormalizedPerformance();emitPerformance(_0x52b08e),getStartingBalances(_0x52b08e),logger[_0x49e240(0x1ca)](_0x49e240(0xc4));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x3927(_0x34424c,_0x4de3eb){const _0x2526b4=_0x245e();return _0x3927=function(_0x3f0184,_0x33d2b9){_0x3f0184=_0x3f0184-0xba;let _0x245e3f=_0x2526b4[_0x3f0184];return _0x245e3f;},_0x3927(_0x34424c,_0x4de3eb);}async function storePerformance(){const _0x1a08fd=_0x212dba;if(!lastBalances)return;let _0x521255=[],_0x5458b7,_0x5180bf=JSON[_0x1a08fd(0x100)](lastBalances[_0x1a08fd(0x216)]);_0x5180bf['sort']((_0x561620,_0x3c62ad)=>_0x561620['coin']>_0x3c62ad[_0x1a08fd(0xe6)]?0x1:_0x3c62ad['coin']>_0x561620[_0x1a08fd(0xe6)]?-0x1:0x0),_0x5180bf[_0x1a08fd(0x111)](_0x3e700d=>{const _0x4c02c3=_0x1a08fd;let _0x493c3e={'coin':_0x3e700d[_0x4c02c3(0xe6)],'number':_0x3e700d[_0x4c02c3(0x1f3)],'price':_0x3e700d[_0x4c02c3(0x1dd)]};_0x521255[_0x4c02c3(0x136)](_0x493c3e);});const _0x514799=await getFiat();_0x5458b7={'date':lastBalances[_0x1a08fd(0x1e5)]['split']('\x20')[0x0],'eur':_0x514799['eur'],'usd':_0x514799[_0x1a08fd(0x23b)],'coins':_0x521255};let _0x3b2f8e=dbPerformance[_0x1a08fd(0x1c5)](_0x1a08fd(0x235))['find']({'date':_0x5458b7[_0x1a08fd(0x146)]})[_0x1a08fd(0x171)]();_0x3b2f8e?_0x5458b7[_0x1a08fd(0x146)]!=config[_0x1a08fd(0x1ec)]&&dbPerformance[_0x1a08fd(0x1c5)]('data')['find']({'date':_0x5458b7[_0x1a08fd(0x146)]})[_0x1a08fd(0x1db)](_0x5458b7)['write']():dbPerformance['get'](_0x1a08fd(0x235))[_0x1a08fd(0x136)](_0x5458b7)[_0x1a08fd(0x20b)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x310483=_0x212dba;let _0x56314f=[];if(dbPerformance[_0x310483(0x22c)](_0x310483(0x235))['value']()){let _0x262fc3=dbPerformance[_0x310483(0x1c5)]('data')[_0x310483(0x1ed)]()['filter'](_0xc9cd9a=>{const _0x2e5d84=_0x310483;if(_0xc9cd9a[_0x2e5d84(0x1e7)][_0x2e5d84(0x11c)]==0x0)return![];else return!![];})[_0x310483(0x1b4)](_0x310483(0x146))[_0x310483(0x171)](),_0x1b3b58=[...config[_0x310483(0x209)]];_0x1b3b58[_0x310483(0x17e)]((_0x40125e,_0x80e297)=>_0x40125e[_0x310483(0x146)]>_0x80e297[_0x310483(0x146)]?-0x1:_0x80e297[_0x310483(0x146)]>_0x40125e[_0x310483(0x146)]?0x1:0x0);let _0x3afef2=0x1,_0x29f8d3=[],_0x4064ae=0x0;_0x262fc3[_0x310483(0xeb)]()[_0x310483(0x168)]()[_0x310483(0x111)]((_0x270b30,_0x2c0793)=>{const _0x35f5bd=_0x310483;if(_0x1b3b58[_0x4064ae]){if(_0x262fc3[_0x262fc3[_0x35f5bd(0x11c)]-_0x2c0793]&&_0x1b3b58[_0x4064ae]['date']==_0x262fc3[_0x262fc3['length']-_0x2c0793][_0x35f5bd(0x146)]){if(_0x2c0793<_0x262fc3[_0x35f5bd(0x11c)]){let _0x4cc70e=0x0,_0x5c4c69=0x0;_0x262fc3[_0x262fc3[_0x35f5bd(0x11c)]-_0x2c0793][_0x35f5bd(0x1e7)][_0x35f5bd(0x111)](_0x317a66=>{const _0x23f749=_0x35f5bd;_0x5c4c69+=_0x317a66[_0x23f749(0x1f3)]*_0x317a66[_0x23f749(0x140)];}),_0x1b3b58[_0x4064ae][_0x35f5bd(0xce)][_0x35f5bd(0x111)](_0x30f16c=>{const _0x35d24b=_0x35f5bd;_0x4cc70e+=_0x30f16c[_0x35d24b(0x1f3)]*_0x30f16c[_0x35d24b(0x140)];}),_0x3afef2*=_0x4cc70e/(_0x5c4c69-_0x4cc70e)+0x1;}_0x4064ae++;}}let _0x278bb1=0x0;_0x270b30[_0x35f5bd(0x1e7)][_0x35f5bd(0x111)](_0x4700b7=>{const _0x2bf0af=_0x35f5bd;_0x278bb1+=_0x4700b7[_0x2bf0af(0x1f3)]*_0x4700b7[_0x2bf0af(0x140)];}),_0x29f8d3[_0x262fc3['length']-_0x2c0793-0x1]=_0x278bb1*(_0x3afef2-0x1);});let _0x3126b1=[];_0x1b3b58=[...config[_0x310483(0x209)]]||[];let _0x1686bd=0x0;_0x4064ae=0x0,_0x262fc3['forEach']((_0x1bde98,_0x53e372)=>{const _0x297424=_0x310483;if(_0x1b3b58[_0x4064ae]){const _0x2ea999=fns['parse'](_0x1b3b58[_0x4064ae][_0x297424(0x146)],_0x297424(0x14e),new Date()),_0x2a96f5=fns[_0x297424(0x100)](_0x1bde98[_0x297424(0x146)],'yyyy/MM/dd',new Date());if(fns[_0x297424(0x205)](_0x2ea999,_0x2a96f5)){let _0x2dc66a=0x0;_0x1b3b58[_0x4064ae]['changes'][_0x297424(0x111)](_0x1d7292=>{const _0xd738ba=_0x297424;!_0x3126b1[_0x1d7292[_0xd738ba(0xe6)]]?_0x3126b1[_0x1d7292['coin']]=_0x1d7292[_0xd738ba(0x1f3)]:(_0x2dc66a=_0x3126b1[_0x1d7292['coin']],_0x3126b1[_0x1d7292['coin']]+=_0x1d7292[_0xd738ba(0x1f3)]);const _0x2fb65b=_0x1bde98[_0xd738ba(0x1e7)][_0xd738ba(0x16d)](_0x13c3c6=>_0x13c3c6[_0xd738ba(0xe6)]==_0x1d7292[_0xd738ba(0xe6)]);(!_0x2fb65b||_0x2fb65b[_0xd738ba(0x1f3)]==0x0)&&(_0x1686bd+=(-_0x1d7292[_0xd738ba(0x1f3)]-_0x2dc66a)*_0x1d7292[_0xd738ba(0x140)]);}),_0x4064ae++;}}_0x1bde98[_0x297424(0x1e7)]['forEach']((_0x7c5997,_0x214f45)=>{const _0x543d19=_0x297424;_0x3126b1[_0x7c5997[_0x543d19(0xe6)]]&&(_0x7c5997[_0x543d19(0x18e)]=_0x3126b1[_0x7c5997['coin']]);}),_0x56314f[_0x297424(0x136)]({'date':_0x1bde98['date'],'eur':_0x1bde98[_0x297424(0x161)],'usd':_0x1bde98[_0x297424(0x23b)],'offset':_0x29f8d3[_0x53e372],'netoffset':_0x1686bd,'coins':_0x1bde98[_0x297424(0x1e7)]});});}return _0x56314f;}function emitPerformance(_0x39aed5){const _0x30b121=_0x212dba;_0x39aed5[_0x30b121(0x11c)]!==0x0?(proxyEmit(_0x30b121(0x162),_0x39aed5),lastPerformanceEmitted=getDate()):proxyEmit(_0x30b121(0x162),[]);}function getPerf(_0x3e9fc6,_0x2969a6){const _0x5c9651=_0x212dba;let _0x5936d5=0x0,_0xfcba82=0x0,_0x470912=0x0;_0x3e9fc6['coins']['forEach'](_0xccbf4c=>{const _0x2b47b6=_0x3927;_0x5936d5+=_0xccbf4c[_0x2b47b6(0x1f3)]*_0xccbf4c['price'];});_0x2969a6&&(_0x5936d5+=_0x3e9fc6['offset']);if(config['basecoin']==='BTC'||config['basecoin']===_0x5c9651(0xfc))_0xfcba82=_0x5936d5*_0x3e9fc6['eur'],_0x470912=_0x5936d5*_0x3e9fc6['usd'];else{if(usdBasecoins[_0x5c9651(0x115)](config[_0x5c9651(0xd3)]))_0xfcba82=_0x5936d5*_0x3e9fc6['eur']/_0x3e9fc6[_0x5c9651(0x23b)],_0x470912=_0x5936d5;else config[_0x5c9651(0xd3)]===_0x5c9651(0x20c)&&(_0xfcba82=_0x5936d5,_0x470912=_0x5936d5*_0x3e9fc6[_0x5c9651(0x23b)]/_0x3e9fc6[_0x5c9651(0x161)]);}return[_0x5936d5,_0xfcba82,_0x470912];}function getKPIs(_0x354eb5,_0x1605d4='EUR'){const _0x3ce5a6=_0x212dba,_0x5b82eb=config['basecoin'],_0x54db99=lastBalances,_0x6ae641=currentCoins,_0x28aa58=getNormalizedPerformance(),_0x42cd49=_0x354eb5==='basecoin'?_0x5b82eb:_0x354eb5===_0x3ce5a6(0x21b)||_0x354eb5==='net-fiat'?_0x1605d4:_0x3ce5a6(0x1c0)+_0x5b82eb,_0x235fda=_0x354eb5===_0x3ce5a6(0x196)?_0x3ce5a6(0x11a):_0x354eb5==='net-fiat'?_0x3ce5a6(0x11a):_0x42cd49+_0x3ce5a6(0x16e),_0x1a333d=_0x354eb5===_0x3ce5a6(0x196)||_0x354eb5===_0x3ce5a6(0x112)?_0x3ce5a6(0x11a):_0x42cd49+_0x3ce5a6(0x1cd);let _0xc8aeb7=0x0;_0x6ae641[_0x3ce5a6(0x111)](_0x88519d=>{const _0x251704=_0x3ce5a6;_0xc8aeb7+=_0x88519d[_0x251704(0x1f3)]*_0x88519d[_0x251704(0x1dd)];});if(_0x354eb5===_0x3ce5a6(0x21b)||_0x354eb5===_0x3ce5a6(0x112)){if(_0x5b82eb===_0x3ce5a6(0x1ab)||_0x5b82eb===_0x3ce5a6(0xfc))_0xc8aeb7=_0xc8aeb7*(_0x1605d4===_0x3ce5a6(0x20c)?_0x54db99[_0x3ce5a6(0x161)]:_0x54db99[_0x3ce5a6(0x23b)]);else{if(usdBasecoins[_0x3ce5a6(0x115)](_0x5b82eb))_0xc8aeb7=_0xc8aeb7*(_0x1605d4===_0x3ce5a6(0x20c)?_0x54db99[_0x3ce5a6(0x161)]/_0x54db99['usd']:0x1);else _0x5b82eb===_0x3ce5a6(0x20c)&&(_0xc8aeb7=_0xc8aeb7*(_0x1605d4===_0x3ce5a6(0x20c)?0x1:_0x54db99[_0x3ce5a6(0x23b)]/_0x54db99[_0x3ce5a6(0x161)]));}}let _0x56ba45;if(_0xc8aeb7!==0x0){if(_0x354eb5==='basecoin')_0x56ba45=(_0xc8aeb7/startingBalances[_0x3ce5a6(0xd3)]-0x1)*0x64;else{if(_0x1605d4==='EUR')_0x56ba45=(_0xc8aeb7/startingBalances[_0x3ce5a6(0x161)]-0x1)*0x64;else _0x56ba45=(_0xc8aeb7/startingBalances[_0x3ce5a6(0x23b)]-0x1)*0x64;}let _0x208893=0x0;if(startingBalances[_0x3ce5a6(0x1e7)])_0x6ae641[_0x3ce5a6(0x111)](_0x1de708=>{const _0x23afbb=_0x3ce5a6;let _0x4711ca=startingBalances[_0x23afbb(0x1e7)][_0x23afbb(0x16d)](_0x2313e0=>_0x2313e0[_0x23afbb(0xe6)]===_0x1de708[_0x23afbb(0xe6)]);if(_0x4711ca&&_0x4711ca[_0x23afbb(0xe6)]&&_0x1de708[_0x23afbb(0x1f3)]!==0x0)_0x208893+=_0x4711ca[_0x23afbb(0x1f3)]*_0x1de708[_0x23afbb(0x1dd)];});let _0x2fa78c=0x0;if(_0x28aa58[_0x3ce5a6(0x11c)]!==0x0){let _0x3f6277=_0x28aa58[_0x28aa58[_0x3ce5a6(0x11c)]-0x1];_0x2fa78c=_0x3f6277[_0x3ce5a6(0x107)];}_0x208893-=_0x2fa78c;_0x354eb5===_0x3ce5a6(0x196)&&(_0x56ba45=(_0xc8aeb7-_0x208893)/startingBalances[_0x3ce5a6(0xd3)]*0x64,_0xc8aeb7=_0xc8aeb7-_0x208893);if(_0x354eb5===_0x3ce5a6(0x112)){let _0x6f99a1=_0x1605d4===_0x3ce5a6(0x20c)?startingBalances['eur']:startingBalances[_0x3ce5a6(0x23b)];if(_0x5b82eb===_0x3ce5a6(0x1ab)||_0x5b82eb==='ETH')_0x208893=_0x1605d4==='EUR'?_0x208893*_0x54db99['eur']:_0x208893*_0x54db99[_0x3ce5a6(0x23b)];else{if(usdBasecoins['includes'](_0x5b82eb))_0x208893=_0x1605d4===_0x3ce5a6(0x20c)?_0x208893*_0x54db99[_0x3ce5a6(0x161)]/_0x54db99['usd']:_0x208893;else _0x5b82eb===_0x3ce5a6(0x20c)&&(_0x208893=_0x1605d4==='EUR'?_0x208893:_0x208893*_0x54db99[_0x3ce5a6(0x23b)]/_0x54db99[_0x3ce5a6(0x161)]);}_0x56ba45=(_0xc8aeb7-_0x208893)/_0x6f99a1*0x64,_0xc8aeb7=_0xc8aeb7-_0x208893;}if(_0x56ba45){if(_0x56ba45<0x64)_0x56ba45=_0x56ba45[_0x3ce5a6(0x141)](0x2);else{if(_0x56ba45<0x3e8)_0x56ba45=_0x56ba45[_0x3ce5a6(0x141)](0x1);else _0x56ba45=_0x56ba45['toFixed'](0x0);}}else _0x56ba45=Number('0')[_0x3ce5a6(0x141)](0x2);if(_0xc8aeb7){if(Math['abs'](_0xc8aeb7)<0.000001)_0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x2);else{if(Math['abs'](_0xc8aeb7)<0.1)_0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x6);else{if(Math[_0x3ce5a6(0x1cb)](_0xc8aeb7)<0x1)_0xc8aeb7=_0xc8aeb7['toFixed'](0x5);else{if(Math['abs'](_0xc8aeb7)<0xa)_0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x4);else{if(Math[_0x3ce5a6(0x1cb)](_0xc8aeb7)<0x64)_0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x3);else{if(Math[_0x3ce5a6(0x1cb)](_0xc8aeb7)<0x3e8)_0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x2);else _0xc8aeb7=_0xc8aeb7[_0x3ce5a6(0x141)](0x2);}}}}}}else _0xc8aeb7=Number('0')[_0x3ce5a6(0x141)](0x2);}else _0x56ba45=Number('0')[_0x3ce5a6(0x141)](0x2);return{'value':_0xc8aeb7,'change':_0x56ba45,'leftTxt':_0x235fda,'rightTxt':_0x1a333d};}async function getStartingBalances(_0x5b37a0,_0xd7a606=!![]){const _0x44276e=_0x212dba;if(_0x5b37a0[_0x44276e(0x11c)]!==0x0){const [_0x3e4d1d,_0x4a2dd3,_0x2f5327]=getPerf(_0x5b37a0[0x0],!![]);let _0x5be37b=[];config[_0x44276e(0x216)][_0x44276e(0x111)](_0x2408f7=>{const _0x250208=_0x44276e;let _0x2126f1=0x0,_0x3fe877;config['liquidity'][_0x250208(0x111)](_0x5a01d3=>{const _0x77a303=_0x250208;let _0x57c984=_0x5a01d3[_0x77a303(0xce)][_0x77a303(0x16d)](_0x1b3552=>_0x1b3552[_0x77a303(0xe6)]==_0x2408f7[_0x77a303(0xe6)]);if(_0x57c984){_0x2126f1+=_0x57c984[_0x77a303(0x1f3)];if(!_0x3fe877)_0x3fe877=_0x57c984[_0x77a303(0x140)];}}),_0x5be37b[_0x250208(0x136)]({'coin':_0x2408f7[_0x250208(0xe6)],'number':_0x2126f1,'initialprice':_0x3fe877});});const _0x409bf0={'basecoin':_0x3e4d1d,'eur':_0x4a2dd3,'usd':_0x2f5327,'coins':_0x5be37b};if(_0xd7a606)proxyEmit('starting-balances',_0x409bf0);startingBalances=_0x409bf0;}}function headlessMode(_0x246c9d){const _0x51990e=_0x212dba;let _0x3764e8=_0x246c9d[_0x51990e(0x216)],_0x52116d=_0x246c9d[_0x51990e(0x1b9)],_0x21d039=[];for(let _0x380099 of _0x3764e8){if(_0x380099[_0x51990e(0xe6)]!=config[_0x51990e(0xd3)]){if(_0x380099[_0x51990e(0x1a6)]>=_0x52116d/0x64){if(_0x380099['valid'])_0x21d039[_0x51990e(0x136)](_0x380099);}else{if(_0x380099[_0x51990e(0x1a6)]<=-_0x52116d/0x64){if(_0x380099[_0x51990e(0x210)])_0x21d039[_0x51990e(0x136)](_0x380099);}}}}_0x21d039[_0x51990e(0x11c)]>0x0&&placeOrder(_0x21d039);}function notifyBalance(_0xb89a0a){const _0x2b098c=_0x212dba;let _0xe2d745=_0xb89a0a[_0x2b098c(0x216)],_0x1eda30=_0xb89a0a[_0x2b098c(0x1b9)],_0x58b789=[];for(let _0x442d46 of _0xe2d745){if(_0x442d46[_0x2b098c(0xe6)]!=config[_0x2b098c(0xd3)]){if(_0x442d46[_0x2b098c(0x1a6)]>=_0x1eda30/0x64){if(_0x442d46[_0x2b098c(0x210)])_0x58b789[_0x2b098c(0x136)](_0x442d46);}else{if(_0x442d46[_0x2b098c(0x1a6)]<=-_0x1eda30/0x64){if(_0x442d46['valid'])_0x58b789['push'](_0x442d46);}}}}if(_0x58b789['length']>0x0){let _0x3fdf16=_0x58b789['map'](_0xdeb14c=>_0xdeb14c[_0x2b098c(0xe6)]);_0x3fdf16[_0x2b098c(0x17e)]();let _0x4207ce=_0x3fdf16['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2b098c(0x157),_0x2b098c(0x21d));lastCoinsToBalance=_0x4207ce;}}function symbolToCoin(_0x2766f9){const _0x342cc4=_0x212dba;let _0x16491f;if(_0x2766f9[_0x342cc4(0x115)]('/'+config[_0x342cc4(0xd3)]))_0x16491f=_0x2766f9[_0x342cc4(0x18f)]('/'+config[_0x342cc4(0xd3)],'');if(_0x2766f9['includes'](config['basecoin']+'/'))_0x16491f=_0x2766f9[_0x342cc4(0x18f)](config[_0x342cc4(0xd3)]+'/','');return _0x16491f;}async function unlockOrders(){const _0x13948d=_0x212dba;if(allOrdersPlaced&&lockOrders==ORDERS[_0x13948d(0xed)]){logger[_0x13948d(0x1ca)](_0x13948d(0xd8)),lockOrders=ORDERS[_0x13948d(0x203)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x563bb3=await getCoins();[currentCoins,currentCoinsAll]=_0x563bb3,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x13948d(0x1ca)](_0x13948d(0x12c));}}async function validateOrders(_0x29ee13){const _0x552b71=_0x212dba;if(_0x29ee13)validateOrdersState=_0x29ee13;logger[_0x552b71(0x1ca)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x552b71(0x20a)+(lockOrders==0x1?_0x552b71(0x13b):lockOrders==0x2?_0x552b71(0x116):_0x552b71(0x14f)));let _0x2aa3ed=[],_0x9d8a2f=config[_0x552b71(0x227)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x552b71(0x17c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x552b71(0xed)])return;logger[_0x552b71(0x1ca)](_0x552b71(0x1be)+validateOrdersState),lastOrders[_0x552b71(0x111)](_0x9a0a62=>{const _0x518c67=_0x552b71;let _0x2c93ef=![];_0x9a0a62[_0x518c67(0x21f)]>0x0&&(_0x2c93ef=!![]),_0x2aa3ed[_0x518c67(0x136)](_0x2c93ef),_0x2c93ef&&config[_0x518c67(0x227)]!=_0x518c67(0x166)&&logHistory(_0x518c67(0x208),'Order\x20filled:\x20'+_0x9a0a62[_0x518c67(0x23a)]+'\x20'+_0x9a0a62[_0x518c67(0x186)]+'\x20#'+formatResult(_0x9a0a62[_0x518c67(0x21f)],0x8)+'\x20@'+formatResult(_0x9a0a62[_0x518c67(0x140)],0x8));}),_0x2aa3ed[_0x552b71(0x111)]((_0xb4d693,_0x308938)=>{const _0x589eb0=_0x552b71;if(_0xb4d693)lastOrders[_0x589eb0(0x1b2)](_0x308938,0x1);}),persistOpenOrders(lastOrders);const _0x2e4a0d=coolingDown?_0x552b71(0xef):_0x552b71(0x1fd);if(validateOrdersState==_0x552b71(0x18e)){validateOrdersState='ongoing';if(_0x2aa3ed['includes'](![])){if(config[_0x552b71(0x227)]==_0x552b71(0x166)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x2aa3ed[_0x552b71(0x115)](![])){}else{if(allOrdersPlaced){if(config[_0x552b71(0x227)]==_0x552b71(0x166)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x2aa3ed['includes'](![])&&(config[_0x552b71(0x227)]==_0x552b71(0x166)?logHistory(_0x552b71(0x135),_0x552b71(0x1ff)+Math[_0x552b71(0x24f)](_0x9d8a2f*validateOrderInterval/0xea60)+_0x552b71(0x145)+_0x2e4a0d):(await cancelOrders(),logHistory(_0x552b71(0x135),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x552b71(0x24f)](_0x9d8a2f*validateOrderInterval/0xea60)+_0x552b71(0x145)+_0x2e4a0d))),await unlockOrders();else{if(validateOrdersState==_0x552b71(0x12e)){if(config[_0x552b71(0x227)]!='market')logHistory(_0x552b71(0x135),_0x552b71(0x1ee)+_0x2e4a0d);await unlockOrders();}}}}}async function cancelOrders(){const _0x517e08=_0x212dba;lastOrders[_0x517e08(0x111)](async _0x3b9d54=>{const _0x3f042f=_0x517e08;try{const _0x30c190=await exchange[_0x3f042f(0x194)](_0x3b9d54[_0x3f042f(0x15e)],_0x3b9d54['symbol']);}catch(_0x207cc2){if(_0x207cc2['toString']()[_0x3f042f(0x115)](_0x3f042f(0x131))){}else await handleError(_0x207cc2,_0x3f042f(0x103));}});}async function initCoinResults(_0x1b6f63){const _0x34c302=_0x212dba;_0x1b6f63?logger[_0x34c302(0x1ca)](_0x34c302(0x1bc)+_0x1b6f63):logger[_0x34c302(0x1ca)](_0x34c302(0x14d)),config[_0x34c302(0x216)]['forEach'](_0x4b04bc=>{const _0x44344c=_0x34c302;if(!_0x4b04bc[_0x44344c(0xf1)]&&_0x4b04bc[_0x44344c(0xe6)]!=config[_0x44344c(0xd3)]){const _0xa55119=currentCoins['find'](_0x56280e=>_0x56280e[_0x44344c(0xe6)]==_0x4b04bc[_0x44344c(0xe6)]),_0x22d0c0=global[_0x44344c(0xde)][noslash(_0x4b04bc['symbol'])];let _0xce3d33=_0xa55119?_0xa55119[_0x44344c(0x1f3)]:null,_0x40f1c1=_0x4b04bc['reverse']?0x1/_0x22d0c0:_0x22d0c0,_0x4b1477;config[_0x44344c(0x209)][_0x44344c(0x111)](_0x38eb0d=>{const _0x1c434b=_0x44344c;!_0x4b1477&&(_0x4b1477=_0x38eb0d[_0x1c434b(0xce)][_0x1c434b(0x16d)](_0x48a60d=>_0x48a60d[_0x1c434b(0xe6)]==_0x4b04bc['coin']),_0x4b1477&&(_0xce3d33=_0x4b1477['number'],_0x40f1c1=_0x4b1477[_0x1c434b(0x140)]));});let _0x193fa3=dbCoinResults[_0x44344c(0x1c5)](_0x44344c(0x1e7))['find']({'coin':_0x4b04bc[_0x44344c(0xe6)]})[_0x44344c(0x171)]();if(!_0x193fa3){const _0x45566d={'coin':_0x4b04bc[_0x44344c(0xe6)],'number':_0xce3d33,'breakeven':_0x40f1c1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x44344c(0x1c5)](_0x44344c(0x1e7))['push'](_0x45566d)[_0x44344c(0x20b)]();}else{if(_0x1b6f63&&_0x4b04bc[_0x44344c(0xe6)]==_0x1b6f63){const _0x517f64={'coin':_0x4b04bc[_0x44344c(0xe6)],'number':_0xce3d33,'breakeven':_0x40f1c1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x44344c(0x1c5)](_0x44344c(0x1e7))[_0x44344c(0x16d)]({'coin':_0x4b04bc[_0x44344c(0xe6)]})[_0x44344c(0x1db)](_0x517f64)['write']();}}}});}async function updateCoinResults(_0xbe83bf,_0xee36d5=![]){const _0xfb9f5c=_0x212dba;let _0x5ae429,_0x46f5f7,_0x4a878d,_0x35757c,_0x3f7c9d,_0x2f7c3b,_0x1a07e3=dbCoinResults[_0xfb9f5c(0x1c5)](_0xfb9f5c(0x1e7))[_0xfb9f5c(0x16d)]({'coin':_0xbe83bf[_0xfb9f5c(0xe6)]})['value'](),_0xc6fed1=![];_0x1a07e3&&Object[_0xfb9f5c(0x1ba)](_0x1a07e3)[_0xfb9f5c(0x111)](([_0x10b72e,_0x2bc739])=>{if(_0x2bc739==null)_0xc6fed1=!![];});(!_0x1a07e3||_0xc6fed1)&&(await initCoinResults(_0xbe83bf[_0xfb9f5c(0xe6)]),_0x1a07e3=dbCoinResults['get'](_0xfb9f5c(0x1e7))[_0xfb9f5c(0x16d)]({'coin':_0xbe83bf[_0xfb9f5c(0xe6)]})[_0xfb9f5c(0x171)]());_0xbe83bf[_0xfb9f5c(0x168)]&&(_0x2f7c3b={'filled':_0xbe83bf['filled']*_0xbe83bf[_0xfb9f5c(0x140)],'amount':_0xbe83bf[_0xfb9f5c(0x21f)]*_0xbe83bf['price'],'side':_0xbe83bf['side']=='sell'?'buy':_0xfb9f5c(0x16c),'price':0x1/_0xbe83bf[_0xfb9f5c(0x140)]},_0xbe83bf={..._0xbe83bf,..._0x2f7c3b});_0xee36d5?_0x46f5f7=_0xbe83bf[_0xfb9f5c(0x186)]==_0xfb9f5c(0x11b)?_0x1a07e3[_0xfb9f5c(0x1f3)]+_0xbe83bf['filled']:_0x1a07e3[_0xfb9f5c(0x1f3)]-_0xbe83bf[_0xfb9f5c(0x21f)]:_0x46f5f7=await getCoinNumber(_0xbe83bf['coin']);if(_0xbe83bf[_0xfb9f5c(0x1ea)]&&_0xbe83bf['fee']['currency']==config[_0xfb9f5c(0xd3)])_0x5ae429=_0xbe83bf['fee'][_0xfb9f5c(0x1b0)];else{if(_0xbe83bf[_0xfb9f5c(0x1ea)]&&_0xbe83bf[_0xfb9f5c(0x1ea)]['currency']==_0xfb9f5c(0x190)&&!_0xee36d5)_0x5ae429=_0xbe83bf[_0xfb9f5c(0x1ea)][_0xfb9f5c(0x1b0)]*global[_0xfb9f5c(0xde)][_0xfb9f5c(0x190)+config['basecoin']];else _0x5ae429=defaultFee*_0xbe83bf['filled']*_0xbe83bf['price'];}_0xbe83bf['side']=='buy'?(_0x4a878d=_0x46f5f7!=0x0?(_0x1a07e3[_0xfb9f5c(0x1e0)]*_0x1a07e3[_0xfb9f5c(0x1f3)]+_0xbe83bf[_0xfb9f5c(0x140)]*(_0x46f5f7-_0x1a07e3[_0xfb9f5c(0x1f3)])+_0x5ae429)/_0x46f5f7:0x0,_0x35757c=_0x1a07e3[_0xfb9f5c(0x167)]):(_0x4a878d=_0x46f5f7!=0x0?(_0x1a07e3[_0xfb9f5c(0x1e0)]*_0x1a07e3['number']-_0xbe83bf['price']*(_0x1a07e3[_0xfb9f5c(0x1f3)]-_0x46f5f7)+_0x5ae429)/_0x46f5f7:0x0,_0x35757c=_0x1a07e3['realized']+(_0xbe83bf[_0xfb9f5c(0x140)]-_0x1a07e3[_0xfb9f5c(0x1e0)])*_0xbe83bf[_0xfb9f5c(0x21f)]);_0x3f7c9d=(_0xbe83bf[_0xfb9f5c(0x140)]-_0x4a878d-_0x5ae429/_0xbe83bf['filled'])*_0x46f5f7;let _0xeaf873={'coin':_0xbe83bf['coin'],'number':_0x46f5f7,'breakeven':formatResult(_0x4a878d,0x8),'realized':formatResult(_0x35757c,0x8),'unrealized':formatResult(_0x3f7c9d,0x8),'fees':formatResult(_0x1a07e3[_0xfb9f5c(0xc9)]+_0x5ae429,0x8),'sells':_0xbe83bf['side']==_0xfb9f5c(0x16c)?_0x1a07e3['sells']+0x1:_0x1a07e3[_0xfb9f5c(0x106)],'buys':_0xbe83bf[_0xfb9f5c(0x186)]=='buy'?_0x1a07e3['buys']+0x1:_0x1a07e3['buys']};dbCoinResults[_0xfb9f5c(0x1c5)](_0xfb9f5c(0x1e7))[_0xfb9f5c(0x16d)]({'coin':_0xbe83bf[_0xfb9f5c(0xe6)]})[_0xfb9f5c(0x1db)](_0xeaf873)['write']();if(!_0xee36d5){if(_0xbe83bf[_0xfb9f5c(0x1ea)]&&_0xbe83bf[_0xfb9f5c(0x1ea)][_0xfb9f5c(0x1b6)]=='BNB'){const _0x2c5899=currentCoins[_0xfb9f5c(0x16d)](_0x157322=>_0x157322['coin']==_0xfb9f5c(0x190));if(_0x2c5899){let _0x25556=dbCoinResults[_0xfb9f5c(0x1c5)](_0xfb9f5c(0x1e7))[_0xfb9f5c(0x16d)]({'coin':_0xfb9f5c(0x190)})[_0xfb9f5c(0x171)]();_0xeaf873={..._0x25556,'number':_0x2c5899[_0xfb9f5c(0x1f3)]},dbCoinResults[_0xfb9f5c(0x1c5)]('coins')[_0xfb9f5c(0x16d)]({'coin':'BNB'})[_0xfb9f5c(0x1db)](_0xeaf873)['write']();}}}}async function placeOrder(_0x387288){const _0x16d4dc=_0x212dba,_0x59c37c=config[_0x16d4dc(0x227)]=='market'?_0x16d4dc(0x166):_0x16d4dc(0xd6);if(lockOrders==ORDERS[_0x16d4dc(0x226)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x16d4dc(0xed)],allOrdersPlaced=![],validateOrdersState='initial';let _0x259df8=![];lastOrders=[];for(const _0x17cb51 of _0x387288){let _0xbd309f,_0x5547bf,_0x164f76,_0x52738,_0x42bdea,_0x16ef55=_0x17cb51[_0x16d4dc(0x23a)];try{const _0x404f8d=await exchange[_0x16d4dc(0x22b)](_0x16ef55);_0xbd309f=_0x17cb51[_0x16d4dc(0x168)]?0x1/_0x17cb51[_0x16d4dc(0x1dd)]:_0x17cb51['last'],_0x5547bf=_0x404f8d[_0x16d4dc(0x19d)],_0x164f76=_0x404f8d[_0x16d4dc(0x101)];_0x17cb51[_0x16d4dc(0x168)]?(_0x52738=_0x17cb51[_0x16d4dc(0x186)]=='buy'?'sell':'buy',_0x42bdea=Math[_0x16d4dc(0x1cb)](_0x17cb51[_0x16d4dc(0x148)])/_0xbd309f):(_0x52738=_0x17cb51['side'],_0x42bdea=Math[_0x16d4dc(0x1cb)](_0x17cb51[_0x16d4dc(0x148)]));_0x59c37c=='limit'&&(config['ordertype']==_0x16d4dc(0x155)&&(_0xbd309f=_0x52738==_0x16d4dc(0x11b)?_0x5547bf:_0x164f76),config['ordertype']=='limit-low'&&(_0xbd309f=_0x52738=='buy'?_0x164f76:_0x5547bf));_0x42bdea=formatResult(_0x42bdea,0x8),_0xbd309f=formatResult(_0xbd309f,0x8);const _0x551373=_0x52738==_0x16d4dc(0x16c)?config[_0x16d4dc(0x1b1)]?String[_0x16d4dc(0x1a9)]('0x'+config[_0x16d4dc(0x1b1)])+'\x20':'':config[_0x16d4dc(0x1fa)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x53f486=_0x59c37c==_0x16d4dc(0x166)?'Market':config[_0x16d4dc(0x227)]==_0x16d4dc(0x155)?_0x16d4dc(0xbb):_0x16d4dc(0xf6),_0x10fa1c=(Math[_0x16d4dc(0x1c8)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x16d4dc(0x136)]({'customId':_0x10fa1c,'symbol':_0x16ef55,'coin':_0x17cb51[_0x16d4dc(0xe6)],'amount':_0x42bdea,'price':_0xbd309f,'side':_0x52738,'reverse':_0x17cb51['reverse'],'filled':0x0});if(_0x59c37c==_0x16d4dc(0x166))logHistory('order',''+_0x551373+_0x53f486+'\x20order:\x20'+_0x16ef55+'\x20'+_0x52738+'\x20#'+formatResult(_0x42bdea,0x8)+'\x20@'+formatResult(_0xbd309f,0x8));else logHistory(_0x16d4dc(0x208),''+_0x551373+_0x53f486+_0x16d4dc(0xea)+_0x16ef55+'\x20'+_0x52738+'\x20#'+formatResult(_0x42bdea,0x8)+'\x20@'+formatResult(_0xbd309f,0x8));let _0x46a61a;_0x59c37c=='market'?_0x52738==_0x16d4dc(0x11b)&&(config['exchange']==_0x16d4dc(0x15a)||config[_0x16d4dc(0x1d4)]=='Bitget')?_0x46a61a=await exchange[_0x16d4dc(0x1fc)](_0x16ef55,_0x59c37c,_0x52738,_0x42bdea,_0xbd309f):_0x46a61a=await exchange['createOrder'](_0x16ef55,_0x59c37c,_0x52738,_0x42bdea,undefined):_0x46a61a=await exchange[_0x16d4dc(0x1fc)](_0x16ef55,_0x59c37c,_0x52738,_0x42bdea,_0xbd309f);logger[_0x16d4dc(0x1ca)](_0x16d4dc(0x220)+_0x46a61a['id']+'\x20|\x20Custom\x20ID:\x20'+_0x10fa1c);const _0x7338b5=lastOrders[_0x16d4dc(0x11c)]-0x1;if(_0x7338b5>=0x0&&lastOrders[_0x7338b5][_0x16d4dc(0x1e6)]==_0x10fa1c){lastOrders[_0x7338b5][_0x16d4dc(0x15e)]=_0x46a61a['id'];if(_0x46a61a[_0x16d4dc(0x1a7)])lastOrders[_0x7338b5][_0x16d4dc(0x1a7)]=_0x46a61a['amount'];if(_0x46a61a[_0x16d4dc(0x140)])lastOrders[_0x7338b5][_0x16d4dc(0x140)]=_0x46a61a[_0x16d4dc(0x140)];lastOrders[_0x7338b5][_0x16d4dc(0x1ea)]=_0x46a61a['fee'];}if(config['cooldown']!=0x0){let _0x379e94=null;if(cooldownTracker[_0x16d4dc(0x11c)]==config[_0x16d4dc(0xf9)]-0x1)_0x379e94=cooldownTracker[_0x16d4dc(0x1bd)]();const _0x4d88f2=getTimeStamp();cooldownTracker['push'](_0x4d88f2);if(_0x379e94){const _0xa1f9c1=fns[_0x16d4dc(0x1d2)](new Date(_0x4d88f2),new Date(_0x379e94));if(_0xa1f9c1<cooldownInterval){logHistory('error',_0x16d4dc(0x1f6)+config[_0x16d4dc(0xf9)]+_0x16d4dc(0x1c1)+cooldownInterval/0x3c+_0x16d4dc(0x10e)+cooldownPeriod/(0xe10*0x3e8)+_0x16d4dc(0xf7)),coolingDown=!![];break;}}}}catch(_0x43f8ab){if(_0x43f8ab[_0x16d4dc(0xcd)]()[_0x16d4dc(0x115)](_0x16d4dc(0xe9)))lastOrders=lastOrders['filter'](_0x40fd01=>_0x40fd01[_0x16d4dc(0x23a)]!=_0x16ef55),logHistory('error',_0x16d4dc(0x158)+_0x16ef55),_0x259df8=!![];else{if(_0x43f8ab[_0x16d4dc(0xcd)]()[_0x16d4dc(0x115)](_0x16d4dc(0x14a)))lastOrders=lastOrders[_0x16d4dc(0x118)](_0x481be0=>_0x481be0[_0x16d4dc(0x23a)]!=_0x16ef55),logHistory(_0x16d4dc(0x211),_0x16d4dc(0xf3)+_0x16ef55),_0x259df8=!![];else{if(_0x43f8ab[_0x16d4dc(0xcd)]()[_0x16d4dc(0x115)](_0x16d4dc(0x184)))lastOrders=lastOrders[_0x16d4dc(0x118)](_0x1144ae=>_0x1144ae[_0x16d4dc(0x23a)]!=_0x16ef55),logHistory(_0x16d4dc(0x211),_0x16d4dc(0x243)+_0x16ef55),logger[_0x16d4dc(0x1ca)](_0x43f8ab),_0x259df8=!![];else _0x43f8ab[_0x16d4dc(0xcd)]()[_0x16d4dc(0x115)](_0x16d4dc(0x229))?(lastOrders=lastOrders[_0x16d4dc(0x118)](_0x395835=>_0x395835['symbol']!=_0x16ef55),logHistory(_0x16d4dc(0x211),_0x16d4dc(0x158)+_0x16ef55),_0x259df8=!![]):(lastOrders=lastOrders[_0x16d4dc(0x118)](_0x3f646b=>_0x3f646b[_0x16d4dc(0x23a)]!=_0x16ef55),await handleError(_0x43f8ab,_0x16d4dc(0x222),_0x16ef55));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x16d4dc(0x11c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x461df8=config['ordertype']==_0x16d4dc(0x166)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x461df8);}else unlockOrders();_0x259df8&&config[_0x16d4dc(0x1d6)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x16d4dc(0x135),_0x16d4dc(0x233)));}else{if(coolingDown)!config['headless']&&logHistory(_0x16d4dc(0x211),_0x16d4dc(0x1a3));else lockOrders!=ORDERS[_0x16d4dc(0x226)]&&(!config[_0x16d4dc(0x1d6)]&&(config[_0x16d4dc(0x227)]==_0x16d4dc(0x166)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x16d4dc(0x130))));}}function persistOpenOrders(_0x36330a){const _0x357d0a=_0x212dba,_0x38935c={...config,'openOrders':_0x36330a};let _0x27486e=dbConfig['get'](_0x357d0a(0x1dc))[_0x357d0a(0x16d)]({'botID':botID})[_0x357d0a(0x171)]();_0x27486e&&dbConfig[_0x357d0a(0x1c5)](_0x357d0a(0x1dc))[_0x357d0a(0x16d)]({'botID':botID})[_0x357d0a(0x1db)](_0x38935c)[_0x357d0a(0x20b)]();}function restoreOrders(){const _0x47fc57=_0x212dba;let _0x2785f9;config['openOrders']&&allOpenOrders[_0x47fc57(0x111)](_0x39438e=>{const _0xe1bd74=_0x47fc57,_0x27e803=config[_0xe1bd74(0x165)][_0xe1bd74(0x16d)](_0x5b3bea=>_0x5b3bea[_0xe1bd74(0x15e)]==_0x39438e['id']);_0x27e803&&(lastOrders[_0xe1bd74(0x136)](_0x27e803),_0x2785f9=_0x39438e['timestamp']);});if(lastOrders[_0x47fc57(0x11c)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x47fc57(0x169),allOrdersPlaced=!![];const _0x36de41=new Date()[_0x47fc57(0xe2)](),_0x5efdf4=config[_0x47fc57(0x227)]==_0x47fc57(0x166)?validateOrderTimeout*0x3c*0x3e8:config[_0x47fc57(0x17c)]*0x3c*0x3e8;if(_0x2785f9+_0x5efdf4>_0x36de41){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x346eee=_0x47fc57;validateOrders(_0x346eee(0x13d));},_0x2785f9+_0x5efdf4-_0x36de41);}else validateOrders(_0x47fc57(0x13d));}}async function sendMetricsTelegram(){const _0x468c9f=_0x212dba;if(!coinsLoaded){process[_0x468c9f(0x1bb)]({'telegrammsg':_0x468c9f(0xf4)},_0xd0e9ab=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x43c90c='';if(config[_0x468c9f(0xfb)])_0x43c90c=_0x468c9f(0x134)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x43c90c='<b>Bot\x20'+botID+_0x468c9f(0x153);const _0x5a1b8a=getKPIs(_0x468c9f(0xd3)),_0x4831b6=getKPIs('fiat',config[_0x468c9f(0x21b)]),_0x2ac56c=getKPIs(_0x468c9f(0x196)),_0x10a94d=getKPIs(_0x468c9f(0x112),config[_0x468c9f(0x21b)]);_0x43c90c+=_0x468c9f(0xe5),_0x43c90c+=_0x5a1b8a[_0x468c9f(0x123)]+_0x468c9f(0x15b)+_0x5a1b8a[_0x468c9f(0x171)]+'\x0a',_0x43c90c+=_0x5a1b8a['rightTxt']+':\x20'+_0x5a1b8a['change']+'%\x0a',_0x43c90c+=_0x4831b6[_0x468c9f(0x123)]+_0x468c9f(0x15b)+_0x4831b6['value']+'\x0a',_0x43c90c+=_0x4831b6[_0x468c9f(0x215)]+':\x20'+_0x4831b6[_0x468c9f(0x109)]+'%\x0a',_0x43c90c+=_0x2ac56c[_0x468c9f(0x123)]+':\x20'+_0x2ac56c[_0x468c9f(0x171)]+'\x20('+config[_0x468c9f(0xd3)]+')\x0a',_0x43c90c+=_0x2ac56c[_0x468c9f(0x215)]+':\x20'+_0x2ac56c[_0x468c9f(0x109)]+'%\x20('+config[_0x468c9f(0xd3)]+')\x0a',_0x43c90c+=_0x10a94d[_0x468c9f(0x123)]+':\x20'+_0x10a94d[_0x468c9f(0x171)]+'\x20('+config['fiat']+')\x0a',_0x43c90c+=_0x10a94d[_0x468c9f(0x215)]+':\x20'+_0x10a94d[_0x468c9f(0x109)]+_0x468c9f(0x105)+config[_0x468c9f(0x21b)]+')\x0a',_0x43c90c+='</pre>',process[_0x468c9f(0x1bb)]({'telegrammsg':_0x43c90c},_0x317e69=>{});}async function sendPortfolioTelegram(){const _0x1036b4=_0x212dba;if(!coinsLoaded){process[_0x1036b4(0x1bb)]({'telegrammsg':_0x1036b4(0xf4)},_0x39d981=>{});return;}let _0x58bea3='';if(config['showname'])_0x58bea3=_0x1036b4(0x134)+config['botname']+_0x1036b4(0x221);else _0x58bea3=_0x1036b4(0x10f)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x58bea3+=_0x1036b4(0xe5),_0x58bea3+=_0x1036b4(0x24a),_0x58bea3+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x58bea3+=_0x1036b4(0x24a),currentCoins[_0x1036b4(0x111)](_0x59d51=>{const _0x2f17ea=_0x1036b4;_0x58bea3+=_0x59d51[_0x2f17ea(0xe6)][_0x2f17ea(0xbc)](0x7)+'|\x20'+formatPad(_0x59d51['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x59d51[_0x2f17ea(0x234)],0x2,0x6)+'|\x20'+formatPad(_0x59d51[_0x2f17ea(0x1a6)]*0x64,0x2,0x6)+'\x0a';}),_0x58bea3+=_0x1036b4(0x10d),process[_0x1036b4(0x1bb)]({'telegrammsg':_0x58bea3},_0x12097e=>{});}function formatPad(_0x3979aa,_0x366dbc,_0x208b42){const _0x314c92=_0x212dba,_0x558d97=formatResultString(_0x3979aa,_0x366dbc);return _0x558d97?_0x558d97[_0x314c92(0x1de)](_0x208b42):''[_0x314c92(0x1de)](_0x208b42);}function logHistory(_0x3d0838,_0x556b91,_0x44f9cb=''){const _0x41ba40=_0x212dba;let _0x5ecd0d={'time':getTimeStamp(),'type':_0x3d0838,'event':_0x556b91};dbLogs[_0x41ba40(0x1c5)](_0x41ba40(0x1b5))[_0x41ba40(0x136)](_0x5ecd0d)[_0x41ba40(0x20b)]();if(_0x44f9cb=='')_0x44f9cb=_0x556b91;proxyEmit('event',{'log':_0x5ecd0d,'summary':_0x44f9cb}),process['send']({'telegram':{..._0x5ecd0d,'botname':config[_0x41ba40(0x22d)],'showname':config['showname']}},_0x12a21b=>{}),logger[_0x41ba40(0x231)](''+_0x5ecd0d[_0x41ba40(0x119)]);}function emitHistory(_0x124170={}){const _0x2aafa8=_0x212dba;Object[_0x2aafa8(0x1ef)](_0x124170)[_0x2aafa8(0x11c)]==0x0&&(_0x124170={'type':[_0x2aafa8(0x208),'event'],'event':'','page':0x1});if(_0x124170[_0x2aafa8(0x22a)][_0x2aafa8(0x115)]('event'))_0x124170['type']['splice'](_0x124170['type'][_0x2aafa8(0x1eb)]('event'),0x1,_0x2aafa8(0x211),_0x2aafa8(0x157),'success');if(dbLogs[_0x2aafa8(0x22c)](_0x2aafa8(0x1b5))['value']()){let _0x2bfd76=dbLogs['get']('logs')[_0x2aafa8(0x118)](_0x13f4a4=>{const _0x13f697=_0x2aafa8;if(_0x124170['type'][_0x13f697(0x11c)]==0x0)return![];else return _0x124170[_0x13f697(0x22a)][_0x13f697(0x115)](_0x13f4a4[_0x13f697(0x22a)]);})[_0x2aafa8(0x118)](_0x56755e=>{const _0x4cc061=_0x2aafa8;if(_0x124170[_0x4cc061(0x119)]=='')return!![];else return _0x56755e[_0x4cc061(0x119)][_0x4cc061(0xc2)]()[_0x4cc061(0x115)](_0x124170[_0x4cc061(0x119)][_0x4cc061(0xc2)]());})[_0x2aafa8(0x1b4)](_0x2aafa8(0x1e5)),_0x1c43cf=_0x2bfd76[_0x2aafa8(0x171)]()[_0x2aafa8(0x11c)];_0x2bfd76=_0x2bfd76['reverse']()[_0x2aafa8(0xeb)]((_0x124170[_0x2aafa8(0xcf)]-0x1)*logPageSize,_0x124170['page']*logPageSize-0x1)[_0x2aafa8(0x168)]()['value'](),proxyEmit(_0x2aafa8(0x12d),{'logs':_0x2bfd76,'total':_0x1c43cf});}else proxyEmit(_0x2aafa8(0x12d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1eeff0){const _0x45fc06=_0x212dba;if(dbLogs[_0x45fc06(0x22c)](_0x45fc06(0x1b5))[_0x45fc06(0x171)]()){const _0x277b58=dbLogs[_0x45fc06(0x1c5)]('logs')[_0x45fc06(0x1b4)](_0x45fc06(0x1e5))[_0x45fc06(0x118)](_0x5dbb7a=>{const _0x3862f2=_0x45fc06;return _0x5dbb7a[_0x3862f2(0x22a)]==_0x3862f2(0x208);})[_0x45fc06(0x171)]();dbLogs[_0x45fc06(0x1c5)]('logs')[_0x45fc06(0x1a8)]()[_0x45fc06(0x20b)](),dbLogs[_0x45fc06(0x1c5)](_0x45fc06(0x1b5))[_0x45fc06(0x1db)](_0x277b58)['write'](),emitHistory(_0x1eeff0);}}async function pauseBot(_0x615801=''){const _0x3faff5=_0x212dba,_0x1e1112=new Date()[_0x3faff5(0xe2)]();if(!lastErrorShown||_0x1e1112-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1e1112;!lastBotPause?(lastBotPause=_0x1e1112,consecutivePauses=0x1):(_0x1e1112-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3faff5(0x1bb)]({'stop':'restart'},_0x139967=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x615801)_0x615801+=_0x3faff5(0x1f5);logHistory(_0x3faff5(0x211),_0x615801+_0x3faff5(0x156)+pauseBotInterval/0xea60+_0x3faff5(0x224)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x1f8442=_0x212dba;process[_0x1f8442(0x1bb)]({'stop':_0x1f8442(0xd7)},_0x53bc93=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x494661,_0x2d7b18){const _0x23b2e7=_0x212dba;if(_0x494661[_0x23b2e7(0xcd)]()[_0x23b2e7(0x115)](_0x23b2e7(0x239)))return logHistory('error',config[_0x23b2e7(0x1d4)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x494661[_0x23b2e7(0xcd)]()[_0x23b2e7(0x115)](_0x23b2e7(0x1f1)))return logHistory(_0x23b2e7(0x211),config[_0x23b2e7(0x1d4)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x494661[_0x23b2e7(0xcd)]()[_0x23b2e7(0x115)]('AuthenticationError'))return logHistory('error',config[_0x23b2e7(0x1d4)]+_0x23b2e7(0x144)),logHistory(_0x23b2e7(0x211),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x494661,_0x2d7b18);}}}async function handleError(_0x5ad791,_0x5cb3e6,_0x3c4abd=''){const _0x5caa89=_0x212dba,_0x3e6006=config[_0x5caa89(0x1d4)]||_0x5caa89(0x160);if(_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x177))||_0x5ad791[_0x5caa89(0xcd)]()['includes'](_0x5caa89(0x201)))await pauseBot(config['exchange']+_0x5caa89(0xba));else{if(_0x5ad791['toString']()[_0x5caa89(0x115)](_0x5caa89(0x143))||_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x189)))await pauseBot(config[_0x5caa89(0x1d4)]+_0x5caa89(0x127));else{if(_0x5ad791['toString']()[_0x5caa89(0x115)](_0x5caa89(0x246)))await pauseBot(config['exchange']+_0x5caa89(0x247));else{if(_0x5ad791[_0x5caa89(0xcd)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x5caa89(0x1d4)]+_0x5caa89(0x138));else{if(_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x159)))logHistory(_0x5caa89(0x211),_0x5cb3e6+_0x5caa89(0x1d9)),logHistory(_0x5caa89(0x211),_0x5caa89(0x218)),await killBot();else{if(_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x19f)))logHistory(_0x5caa89(0x211),_0x5cb3e6+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x5caa89(0x211),_0x5caa89(0x218)),await killBot();else{if(_0x5ad791 instanceof ccxt[_0x5caa89(0x12f)])logger[_0x5caa89(0x1ca)](_0x5caa89(0x13e),_0x5ad791),await pauseBot(config[_0x5caa89(0x1d4)]+_0x5caa89(0x1c2));else{if(_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x239)))logHistory(_0x5caa89(0x211),_0x5cb3e6+_0x5caa89(0x1f5)+config['exchange']+_0x5caa89(0x108)),logHistory(_0x5caa89(0x211),_0x5caa89(0x218)),await killBot();else{if(_0x5ad791['toString']()[_0x5caa89(0x115)](_0x5caa89(0x1f1)))logHistory(_0x5caa89(0x211),_0x5cb3e6+_0x5caa89(0x1f5)+config[_0x5caa89(0x1d4)]+_0x5caa89(0x1b3)),logHistory('error',_0x5caa89(0x218)),await killBot();else{if(_0x5ad791[_0x5caa89(0xcd)]()['includes'](_0x5caa89(0x154)))logHistory(_0x5caa89(0x211),_0x5cb3e6+_0x5caa89(0x1f5)+config[_0x5caa89(0x1d4)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x5caa89(0x211),_0x5caa89(0x218)),await killBot();else{if(_0x5ad791[_0x5caa89(0xcd)]()[_0x5caa89(0x115)](_0x5caa89(0x12a)))logHistory(_0x5caa89(0x211),_0x5cb3e6+_0x5caa89(0x202)+_0x3c4abd);else _0x5ad791 instanceof ccxt[_0x5caa89(0xbe)]?(logger[_0x5caa89(0x1ca)](_0x5caa89(0x18b),_0x5ad791),logHistory(_0x5caa89(0x211),_0x5cb3e6+'\x20|\x20'+config['exchange']+_0x5caa89(0x16b))):(logger[_0x5caa89(0x231)](_0x5cb3e6+_0x5caa89(0x18d),_0x5ad791),await pauseBot(_0x5caa89(0x24c)));}}}}}}}}}}}function formatResult(_0x4f580b,_0x2448bd){const _0x2e3a8d=_0x212dba;return parseFloat(_0x4f580b[_0x2e3a8d(0x141)](_0x2448bd));}function formatResultTruncate(_0x13cadb,_0x396fcd){const _0x278983=_0x212dba;let _0x24a52f=formatResultString(_0x13cadb,0xa),_0xe73115=_0x24a52f[_0x278983(0x1eb)]('.');return _0xe73115!=-0x1&&(_0x24a52f=_0x24a52f[_0x278983(0xeb)](0x0,_0xe73115+_0x396fcd+0x1)),Number(_0x24a52f);}function formatResultString(_0x33bb82,_0x54fbc7){const _0x1e0dda=_0x212dba;let _0x41390e;if(!(''+_0x33bb82)[_0x1e0dda(0x115)]('e'))_0x41390e=+(Math[_0x1e0dda(0x24f)](_0x33bb82+'e+'+_0x54fbc7)+'e-'+_0x54fbc7);else{let _0x415e0a=(''+_0x33bb82)[_0x1e0dda(0x1d3)]('e'),_0x51219e='';+_0x415e0a[0x1]+_0x54fbc7>0x0&&(_0x51219e='+'),_0x41390e=+(Math[_0x1e0dda(0x24f)](+_0x415e0a[0x0]+'e'+_0x51219e+(+_0x415e0a[0x1]+_0x54fbc7))+'e-'+_0x54fbc7);}return Number(_0x41390e)[_0x1e0dda(0x141)](_0x54fbc7);}function getServerTime(){const _0x4131d2=_0x212dba,_0x56de95=new Date();return _0x56de95[_0x4131d2(0x217)]()+'/'+(_0x56de95['getMonth']()+0x1)[_0x4131d2(0xcd)]()['padStart'](0x2,'0')+'/'+_0x56de95['getDate']()[_0x4131d2(0xcd)]()[_0x4131d2(0x1de)](0x2,'0')+'\x20'+_0x56de95[_0x4131d2(0x193)]()['toString']()[_0x4131d2(0x1de)](0x2,'0')+':'+_0x56de95[_0x4131d2(0x11f)]()[_0x4131d2(0xcd)]()[_0x4131d2(0x1de)](0x2,'0')+':'+_0x56de95['getSeconds']()[_0x4131d2(0xcd)]()[_0x4131d2(0x1de)](0x2,'0');}function getTimeStamp(){const _0x2fe7be=_0x212dba,_0x17d6e0=shiftedTime();return _0x17d6e0['getFullYear']()+'/'+(_0x17d6e0['getMonth']()+0x1)[_0x2fe7be(0xcd)]()['padStart'](0x2,'0')+'/'+_0x17d6e0[_0x2fe7be(0x198)]()[_0x2fe7be(0xcd)]()[_0x2fe7be(0x1de)](0x2,'0')+'\x20'+_0x17d6e0[_0x2fe7be(0x193)]()['toString']()[_0x2fe7be(0x1de)](0x2,'0')+':'+_0x17d6e0[_0x2fe7be(0x11f)]()[_0x2fe7be(0xcd)]()[_0x2fe7be(0x1de)](0x2,'0')+':'+_0x17d6e0[_0x2fe7be(0x18a)]()[_0x2fe7be(0xcd)]()[_0x2fe7be(0x1de)](0x2,'0');}function getDate(){const _0x371af6=_0x212dba,_0x573220=shiftedTime();return _0x573220[_0x371af6(0x217)]()+'/'+(_0x573220['getMonth']()+0x1)[_0x371af6(0xcd)]()['padStart'](0x2,'0')+'/'+_0x573220['getDate']()[_0x371af6(0xcd)]()[_0x371af6(0x1de)](0x2,'0');}function getHour(){const _0x4eddf3=_0x212dba,_0x534e0a=shiftedTime();return _0x534e0a[_0x4eddf3(0x193)]()[_0x4eddf3(0xcd)]()[_0x4eddf3(0x1de)](0x2,'0');}function sleep(_0x138d73){return new Promise(_0x19ae02=>setTimeout(_0x19ae02,_0x138d73));}function shiftedTime(){const _0xb102=_0x212dba,_0x1f30b7=new Date();let _0x3f5bb1=_0x1f30b7;if(config&&config[_0xb102(0x206)]!==0x0)_0x3f5bb1=fns['add'](_0x1f30b7,{'hours':config[_0xb102(0x206)]});return _0x3f5bb1;}function timer(_0x7162a6){const _0x1706a2=_0x212dba,_0x4aecef=new Date();!lasttime?console[_0x1706a2(0x151)](getTimeStamp()+_0x1706a2(0x122),_0x7162a6,_0x4aecef):console[_0x1706a2(0x151)](getTimeStamp()+':\x20timer\x20>',_0x7162a6,(_0x4aecef-lasttime)/0x3e8),lasttime=_0x4aecef;}