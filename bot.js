const _0x4aaaad=_0x3226;(function(_0x522f38,_0x31431c){const _0x58e793=_0x3226,_0x599786=_0x522f38();while(!![]){try{const _0x29958d=parseInt(_0x58e793(0x2ff))/0x1+parseInt(_0x58e793(0x1a9))/0x2*(-parseInt(_0x58e793(0x1b3))/0x3)+-parseInt(_0x58e793(0x2e7))/0x4+parseInt(_0x58e793(0x1d8))/0x5*(parseInt(_0x58e793(0x2b9))/0x6)+parseInt(_0x58e793(0x1e8))/0x7+parseInt(_0x58e793(0x2df))/0x8+parseInt(_0x58e793(0x20d))/0x9;if(_0x29958d===_0x31431c)break;else _0x599786['push'](_0x599786['shift']());}catch(_0x4f091a){_0x599786['push'](_0x599786['shift']());}}}(_0x12a6,0x3447f));const _0x4da558=function(){let _0x3fadab=!![];return function(_0x3d9400,_0x6b93b3){const _0x1da7b3=_0x3fadab?function(){const _0x5e11d4=_0x3226;if(_0x6b93b3){const _0x37459f=_0x6b93b3[_0x5e11d4(0x291)](_0x3d9400,arguments);return _0x6b93b3=null,_0x37459f;}}:function(){};return _0x3fadab=![],_0x1da7b3;};}(),_0x2ac179=_0x4da558(this,function(){const _0x43c329=_0x3226;return _0x2ac179[_0x43c329(0x2f5)]()[_0x43c329(0x255)](_0x43c329(0x1c4))[_0x43c329(0x2f5)]()['constructor'](_0x2ac179)[_0x43c329(0x255)](_0x43c329(0x1c4));});_0x2ac179();'use strict';const ccxt=require(_0x4aaaad(0x2af)),low=require(_0x4aaaad(0x1cb)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4aaaad(0x2d9)),Crypt=require(_0x4aaaad(0x1e9))['Crypt'],util=require(_0x4aaaad(0x2d7)),argv=require(_0x4aaaad(0x262))(process['argv'][_0x4aaaad(0x1be)](0x2))['argv'],path=require(_0x4aaaad(0x1ad));let exchange;global['ticker']={},global[_0x4aaaad(0x2ae)]={};const usdBasecoins=[_0x4aaaad(0x29d),_0x4aaaad(0x2cf),'TUSD','USDT',_0x4aaaad(0x302),_0x4aaaad(0x1e4)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4aaaad(0x1d5)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4aaaad(0x1db)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0x3226(_0x114fcf,_0x4efe7f){const _0x2c2cdc=_0x12a6();return _0x3226=function(_0x2ac179,_0x4da558){_0x2ac179=_0x2ac179-0x1a8;let _0x12a6f6=_0x2c2cdc[_0x2ac179];return _0x12a6f6;},_0x3226(_0x114fcf,_0x4efe7f);}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x4aaaad(0x297)],botID=process[_0x4aaaad(0x2be)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x4aaaad(0x248)]('Error:\x20Invalid\x20argument\x20'+botID+_0x4aaaad(0x274)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x4aaaad(0x21f)+userID+'/':_0x4aaaad(0x21f),logspath=userID?_0x4aaaad(0x2e3)+userID+'/':_0x4aaaad(0x2e3),loggerfile=fs['createWriteStream'](logspath+_0x4aaaad(0x250),{'flags':'a'});!fs[_0x4aaaad(0x1e3)](configpath)&&fs[_0x4aaaad(0x205)](configpath);!fs[_0x4aaaad(0x1e3)](logspath)&&fs[_0x4aaaad(0x205)](logspath);const configfile=configpath+_0x4aaaad(0x2ec)+botID+_0x4aaaad(0x22c),logfile=configpath+_0x4aaaad(0x2ec)+botID+_0x4aaaad(0x1f4),performancefile=configpath+_0x4aaaad(0x2ec)+botID+_0x4aaaad(0x281),coinresultsfile=configpath+_0x4aaaad(0x2ec)+botID+_0x4aaaad(0x1bf),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4aaaad(0x288),configbackuppath=configpath+_0x4aaaad(0x2fb),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4aaaad(0x1bc)]({'logs':[],'version':serverversion})[_0x4aaaad(0x1cf)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4aaaad(0x1bc)]({'data':[],'version':serverversion})[_0x4aaaad(0x1cf)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4aaaad(0x1bc)]({'bot':[],'version':serverversion})[_0x4aaaad(0x1cf)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4aaaad(0x1bc)]({'coins':[],'version':serverversion})[_0x4aaaad(0x1cf)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4aaaad(0x1b0),'rsaStandard':_0x4aaaad(0x23a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x50b1c4=>{const _0x2462f9=_0x4aaaad;console[_0x2462f9(0x248)](_0x50b1c4);},'simple':_0x2bd22f=>{const _0x446702=_0x4aaaad;console['log'](_0x2bd22f),loggerfile[_0x446702(0x1cf)](util[_0x446702(0x22a)](_0x2bd22f)+'\x0a');},'full':async(_0x4bd56a,_0x2a5408='')=>{const _0xe50300=_0x4aaaad;let _0x3934be;if(config[_0xe50300(0x266)])_0x3934be=getTimeStamp()+':\x20'+config[_0xe50300(0x1ac)]+_0xe50300(0x32b)+_0x4bd56a;else _0x3934be=getTimeStamp()+_0xe50300(0x27f)+botID+_0xe50300(0x32b)+_0x4bd56a;console['log'](_0x3934be),loggerfile[_0xe50300(0x1cf)](util[_0xe50300(0x22a)](_0x3934be)+'\x0a'),_0x2a5408&&(console[_0xe50300(0x248)](_0x2a5408),loggerfile[_0xe50300(0x1cf)](util[_0xe50300(0x22a)](_0x2a5408)+'\x0a'));},'debug':async(_0x2a274f,_0x5f0b5f='')=>{const _0x18f9a4=_0x4aaaad;let _0x1ea5b8;if(config['showname'])_0x1ea5b8=getTimeStamp()+':\x20'+config[_0x18f9a4(0x1ac)]+_0x18f9a4(0x2b8)+_0x2a274f;else _0x1ea5b8=getTimeStamp()+_0x18f9a4(0x27f)+botID+_0x18f9a4(0x2b8)+_0x2a274f;if(debugging)console['log'](_0x1ea5b8);loggerfile[_0x18f9a4(0x1cf)](util['format'](_0x1ea5b8)+'\x0a');if(_0x5f0b5f){if(debugging)console[_0x18f9a4(0x248)](_0x5f0b5f);loggerfile[_0x18f9a4(0x1cf)](util[_0x18f9a4(0x22a)](_0x5f0b5f)+'\x0a');}}};process['on'](_0x4aaaad(0x2bd),function(_0x380f18){const _0x152cb4=_0x4aaaad;logHistory(_0x152cb4(0x229),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x152cb4(0x1c7)](_0x152cb4(0x1aa),_0x380f18);});settings[_0x4aaaad(0x320)]!=config[_0x4aaaad(0x320)]&&updateTimeshift(settings[_0x4aaaad(0x320)]);settings[_0x4aaaad(0x2e4)]!=config[_0x4aaaad(0x2e4)]&&updateOnepagemode(settings['onepagemode']);process[_0x4aaaad(0x29e)]({'started':_0x4aaaad(0x22e)},_0x5b2149=>{}),initializeProcessListeners();function proxyEmit(_0xe8299,_0x3b2459=null){process['send']({'function':_0xe8299,'args':_0x3b2459},_0x3a4051=>{});}function initializeProcessListeners(){const _0x3c61ad=_0x4aaaad;process['on'](_0x3c61ad(0x1bd),_0x504d59=>{const _0x1a3df3=_0x3c61ad;switch(Object[_0x1a3df3(0x292)](_0x504d59)[0x0]){case'timeshift':_0x504d59[_0x1a3df3(0x320)]!=undefined&&(settings[_0x1a3df3(0x320)]=_0x504d59['timeshift'],updateTimeshift(settings[_0x1a3df3(0x320)]));break;case _0x1a3df3(0x2e4):_0x504d59[_0x1a3df3(0x2e4)]!=undefined&&(settings['onepagemode']=_0x504d59[_0x1a3df3(0x2e4)],updateOnepagemode(settings[_0x1a3df3(0x2e4)]));break;case'bots':_0x504d59[_0x1a3df3(0x277)]!=undefined&&(bots=JSON[_0x1a3df3(0x1eb)](_0x504d59[_0x1a3df3(0x277)]),proxyEmit(_0x1a3df3(0x277),bots));break;case _0x1a3df3(0x289):switch(_0x504d59[_0x1a3df3(0x289)]){case _0x1a3df3(0x321):initclient();break;case _0x1a3df3(0x239):toggleBotMode();break;case _0x1a3df3(0x314):emitHistory(_0x504d59['args']);break;case _0x1a3df3(0x2e6):deleteHistoryAlerts(_0x504d59['args']);break;case _0x1a3df3(0x1ae):getPortfolio(_0x504d59[_0x1a3df3(0x26e)]);break;case _0x1a3df3(0x200):storeConfiguration(_0x504d59[_0x1a3df3(0x26e)]);break;case'storeHeadless':storeHeadless(_0x504d59['args']);break;case _0x1a3df3(0x2a8):storeFiat(_0x504d59[_0x1a3df3(0x26e)]);break;case'resetHistory':resetHistory();break;case _0x1a3df3(0x2ee):getStartingBalances(getNormalizedPerformance());break;case _0x1a3df3(0x2f4):placeOrder(_0x504d59[_0x1a3df3(0x26e)]);break;case _0x1a3df3(0x1d3):cancelLoading();break;case _0x1a3df3(0x271):showConfig();break;case _0x1a3df3(0x230):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x21c914=null,_0x281195=![]){const _0x570752=_0x4aaaad;logger[_0x570752(0x1c7)](_0x570752(0x2ea)+(_0x21c914&&_0x21c914[_0x570752(0x1f7)]>0x0?_0x570752(0x323)+_0x21c914[_0x570752(0x1df)](','):_0x570752(0x2e5))+_0x570752(0x2a2)+(_0x281195?_0x570752(0x2b4):'exchange\x20not\x20reloaded')+_0x570752(0x2b2)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x281195)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x570752(0x24a)]!='***'){if(_0x281195){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x5e4a9a){handleErrorNoStop(_0x5e4a9a,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x21c914);const _0x1d2710=await getCoins();[currentCoins,currentCoinsAll]=_0x1d2710,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x570752(0x1f7)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x5c9613=_0x4aaaad;exchangeStopped=!![],await exchange[_0x5c9613(0x203)]();}async function reloadExchange(){const _0x345d39=_0x4aaaad;logger['debug']('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x345d39(0x1c7)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x3cdd1b=config[_0x4aaaad(0x26b)],_0x482db3=config['apiKey'],_0x379d3c=config[_0x4aaaad(0x2f1)],_0xdd0f4=config['apiPassword']){const _0x564aa9=_0x4aaaad;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x3cdd1b)&&(logHistory(_0x564aa9(0x229),_0x564aa9(0x1b2)+_0x3cdd1b+_0x564aa9(0x221)),killBot());const _0x4fe71d=ccxt[_0x564aa9(0x1dc)][_0x3cdd1b[_0x564aa9(0x1c6)]()];exchange=new _0x4fe71d({'apiKey':_0x482db3,'secret':_0x379d3c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0xdd0f4)exchange[_0x564aa9(0x1ea)]=_0xdd0f4;}function setStableCoins(){const _0x5b1fae=_0x4aaaad;let _0x1bc26f=config[_0x5b1fae(0x1e7)]==_0x5b1fae(0x308)?_0x5b1fae(0x308):'BTC',_0x293a8b=!allSymbols['includes'](_0x1bc26f+_0x5b1fae(0x267))?_0x5b1fae(0x240):'USD',_0x276e6=!allSymbols[_0x5b1fae(0x30c)](_0x1bc26f+'/EUR')?_0x293a8b:_0x5b1fae(0x2cc);stablecoins={'eur':{'coin':''+_0x1bc26f+_0x276e6,'symbol':_0x1bc26f+'/'+_0x276e6},'usd':{'coin':''+_0x1bc26f+_0x293a8b,'symbol':_0x1bc26f+'/'+_0x293a8b}};}async function initwsCcxt(_0x2bc448){const _0x448c65=_0x4aaaad;_0x2bc448==null&&(_0x2bc448=[],config[_0x448c65(0x234)][_0x448c65(0x309)](_0x599743=>{const _0x23bed1=_0x448c65;if(!_0x599743[_0x23bed1(0x317)]&&_0x599743[_0x23bed1(0x2e2)]!=config[_0x23bed1(0x1e7)])_0x2bc448[_0x23bed1(0x2d4)](_0x599743[_0x23bed1(0x296)]);}));if(!_0x2bc448[_0x448c65(0x30c)](stablecoins[_0x448c65(0x315)][_0x448c65(0x296)]))_0x2bc448[_0x448c65(0x2d4)](stablecoins[_0x448c65(0x315)][_0x448c65(0x296)]);if(!_0x2bc448['includes'](stablecoins[_0x448c65(0x1f8)][_0x448c65(0x296)]))_0x2bc448[_0x448c65(0x2d4)](stablecoins['usd'][_0x448c65(0x296)]);if(config[_0x448c65(0x26b)][_0x448c65(0x28e)](_0x448c65(0x272))){if(!_0x2bc448[_0x448c65(0x30c)](_0x448c65(0x258)+config[_0x448c65(0x1e7)]))_0x2bc448[_0x448c65(0x2d4)](_0x448c65(0x258)+config[_0x448c65(0x1e7)]);}loadCoins(_0x2bc448);const _0x1a6dd3=async _0x2c5421=>{const _0x31e1fa=_0x448c65,_0x3b5507=await exchange['fetchTicker'](_0x2c5421);global['ticker'][noslash(_0x3b5507[_0x31e1fa(0x296)])]=_0x3b5507['last'];while(!![]){if(!botPaused)try{const _0x5e5142=await exchange[_0x31e1fa(0x28a)](_0x2c5421);global[_0x31e1fa(0x26d)][noslash(_0x5e5142[0x0]['symbol'])]=_0x5e5142[0x0][_0x31e1fa(0x1d0)],await sleep(0x3e8);}catch(_0x39fca3){if(!exchangeStopped)await handleError(_0x39fca3,_0x31e1fa(0x28a),_0x2c5421);}else await sleep(0x64);}},_0x4ff419=async _0x46ef65=>{const _0x359c09=_0x448c65;while(!![]){if(!botPaused)try{const _0x2ac499=await exchange[_0x359c09(0x231)](_0x46ef65);global['change'][_0x2ac499['symbol']]=_0x2ac499[_0x359c09(0x23d)],await sleep(0x3c*0x3e8);}catch(_0x4b8717){if(!exchangeStopped)await handleError(_0x4b8717,'fetchTickers',_0x46ef65);}else await sleep(0x64);}},_0x1d5339=async()=>{const _0x581d91=_0x448c65;while(!![]){if(!botPaused)try{const _0x801156=await exchange[_0x581d91(0x32a)]();_0x801156[_0x581d91(0x309)](_0x52f776=>{updateNumberCoinsCcxt(_0x52f776);});}catch(_0x172acb){if(!exchangeStopped)await handleError(_0x172acb,_0x581d91(0x32a));}else await sleep(0x64);}};_0x2bc448[_0x448c65(0x309)](_0x130b29=>{_0x1a6dd3(_0x130b29),_0x4ff419(_0x130b29);}),!wsEventsSet&&(wsEventsSet=!![],_0x1d5339(),watchTransactions());}async function watchTransactions(){const _0x43ef6b=_0x4aaaad;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5a225f=await getCoins(),[_0x19f96c,_0x43d0f2]=_0x5a225f;let _0x58458d=[];currentCoins[_0x43ef6b(0x309)](_0x19087d=>{const _0x9c0a92=_0x43ef6b,_0x2f7f82=_0x19f96c[_0x9c0a92(0x307)](_0x56a865=>_0x56a865[_0x9c0a92(0x2e2)]==_0x19087d[_0x9c0a92(0x2e2)]);if(_0x2f7f82){if(_0x19087d[_0x9c0a92(0x228)]!=_0x2f7f82['number']){let _0x5c199a;if(_0x19087d['coin']!=config[_0x9c0a92(0x1e7)]){const _0x555b4f=global['ticker'][noslash(_0x19087d['symbol'])];_0x5c199a=_0x19087d[_0x9c0a92(0x310)]?0x1/_0x555b4f:_0x555b4f;}else _0x5c199a=0x1;_0x58458d['push']({'coin':_0x19087d[_0x9c0a92(0x2e2)],'symbol':_0x19087d[_0x9c0a92(0x296)],'price':_0x5c199a,'number':Number(formatResult(_0x2f7f82[_0x9c0a92(0x228)]-_0x19087d[_0x9c0a92(0x228)],0x8)),'basecoinvalue':_0x5c199a*(_0x2f7f82[_0x9c0a92(0x228)]-_0x19087d[_0x9c0a92(0x228)])});}}});if(_0x58458d['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x43ef6b(0x1f6)+_0x58458d[0x0][_0x43ef6b(0x1c9)]+_0x43ef6b(0x24f)+lastFees[_0x43ef6b(0x1e1)]);if(lastFees['highest']==0x0||Math[_0x43ef6b(0x29a)](_0x58458d[0x0][_0x43ef6b(0x1c9)])>lastFees[_0x43ef6b(0x1e1)]){delete _0x58458d[0x0][_0x43ef6b(0x296)],delete _0x58458d[0x0][_0x43ef6b(0x1c9)];let _0x22a812=[],_0x22d90a=[...config[_0x43ef6b(0x27c)]]||[],_0xe4fa55=config[_0x43ef6b(0x27c)];_0x22d90a[_0x43ef6b(0x268)]((_0x4aca23,_0x624bfd)=>_0x4aca23[_0x43ef6b(0x2a1)]>_0x624bfd[_0x43ef6b(0x2a1)]?-0x1:_0x624bfd['date']>_0x4aca23['date']?0x1:0x0);const _0x2d6931=getDate();if(_0x22d90a[0x0]){const _0x152161=fns[_0x43ef6b(0x1eb)](_0x22d90a[0x0][_0x43ef6b(0x2a1)],_0x43ef6b(0x2a3),new Date()),_0x4d7851=fns[_0x43ef6b(0x1eb)](_0x2d6931,_0x43ef6b(0x2a3),new Date());if(fns[_0x43ef6b(0x220)](_0x152161,_0x4d7851)){_0x22a812=_0x22d90a[0x0][_0x43ef6b(0x2d8)];const _0xe619b9=_0x22a812['find'](_0x45eb92=>_0x45eb92['coin']==_0x58458d[0x0][_0x43ef6b(0x2e2)]);_0xe619b9?(_0xe619b9[_0x43ef6b(0x228)]+=_0x58458d[0x0][_0x43ef6b(0x228)],_0xe619b9[_0x43ef6b(0x228)]==0x0&&(_0x22a812=_0x22a812['filter'](_0x3b89cf=>{const _0x3fb15c=_0x43ef6b;return _0x3b89cf[_0x3fb15c(0x2e2)]!=_0x58458d[0x0]['coin'];}))):_0x22a812[_0x43ef6b(0x2d4)](_0x58458d[0x0]);const _0x2240b6=_0xe4fa55['find'](_0x2a0158=>_0x2a0158[_0x43ef6b(0x2a1)]==_0x2d6931);_0x2240b6[_0x43ef6b(0x2d8)]=_0x22a812;}else _0xe4fa55['push']({'date':_0x2d6931,'changes':[_0x58458d[0x0]]});}const _0x2d4e01=_0xe4fa55[_0x43ef6b(0x307)](_0x817a9a=>_0x817a9a['date']==_0x2d6931);if(_0x2d4e01){let _0x591b53=!![];_0x2d4e01['changes'][_0x43ef6b(0x309)](_0x536bb4=>{const _0x7454cb=_0x43ef6b;if(_0x536bb4[_0x7454cb(0x228)]!=0x0)_0x591b53=![];}),_0x591b53&&(_0xe4fa55=_0xe4fa55[_0x43ef6b(0x245)](_0x337c1f=>{const _0x2e7d56=_0x43ef6b;return _0x337c1f[_0x2e7d56(0x2a1)]!=_0x2d6931;}));}let _0x581412=dbConfig['get'](_0x43ef6b(0x313))['find']({'botID':botID})[_0x43ef6b(0x204)]();_0x581412&&(dbConfig[_0x43ef6b(0x25e)]('bot')[_0x43ef6b(0x307)]({'botID':botID})[_0x43ef6b(0x30f)]({'liquidity':_0xe4fa55})[_0x43ef6b(0x1cf)](),config[_0x43ef6b(0x27c)]=_0xe4fa55),logHistory(_0x43ef6b(0x1b5),_0x43ef6b(0x2c7)+Math[_0x43ef6b(0x29a)](_0x58458d[0x0][_0x43ef6b(0x228)])+'\x20'+_0x58458d[0x0][_0x43ef6b(0x2e2)]+'\x20'+(_0x58458d[0x0]['number']>0x0?_0x43ef6b(0x2b1):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x43ef6b(0x24c),emittedConfiguration());}else logger[_0x43ef6b(0x1c7)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x43ef6b(0x29a)](_0x58458d[0x0][_0x43ef6b(0x228)])+'\x20'+_0x58458d[0x0][_0x43ef6b(0x2e2)]+'\x20'+(_0x58458d[0x0]['number']>0x0?_0x43ef6b(0x2b1):'removed'));transactionDetected=!![],currentCoins=_0x19f96c,currentCoinsAll=_0x43d0f2;}else logger['debug'](_0x43ef6b(0x2c7)+Math[_0x43ef6b(0x29a)](_0x58458d[0x0][_0x43ef6b(0x228)])+'\x20'+_0x58458d[0x0]['coin']+'\x20'+(_0x58458d[0x0][_0x43ef6b(0x228)]>0x0?_0x43ef6b(0x2b1):_0x43ef6b(0x2b3))+_0x43ef6b(0x222)),currentCoins=_0x19f96c,currentCoinsAll=_0x43d0f2;}await sleep(watchTransactionsInterval);}catch(_0x2be752){if(!exchangeStopped)await handleError(_0x2be752,_0x43ef6b(0x305));}else await sleep(0x64);}}async function loadSymbols(_0x1387e6=config['exchange'],_0x3a2cd6=![]){const _0xb0fd10=_0x4aaaad;if(allSymbols&&!_0x3a2cd6)return;try{markets=await exchange[_0xb0fd10(0x2c3)](),allSymbols=[],Object[_0xb0fd10(0x304)](markets)[_0xb0fd10(0x309)](_0x56bc99=>{const _0x4230f6=_0xb0fd10;_0x56bc99[0x1]['active']&&_0x56bc99[0x1]['spot']&&allSymbols[_0x4230f6(0x2d4)](_0x56bc99[0x0]);});}catch(_0x1c615f){throw _0x1c615f;}}async function initclient(){const _0x1a37c8=_0x4aaaad;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x1a37c8(0x254),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1a37c8(0x206),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x34bc8f=getNormalizedPerformance();emitPerformance(_0x34bc8f),getStartingBalances(_0x34bc8f);}async function toggleBotMode(){const _0x4c239c=_0x4aaaad;let _0x84b46f=dbConfig[_0x4c239c(0x25e)](_0x4c239c(0x313))[_0x4c239c(0x307)]({'botID':botID})['value']();if(_0x84b46f){const _0xab4b75=!_0x84b46f[_0x4c239c(0x233)];dbConfig[_0x4c239c(0x25e)](_0x4c239c(0x313))[_0x4c239c(0x307)]({'botID':botID})[_0x4c239c(0x30f)]({'headless':_0xab4b75})[_0x4c239c(0x1cf)](),config[_0x4c239c(0x233)]=_0xab4b75,proxyEmit(_0x4c239c(0x24c),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x18dc52=>{});}async function loadCoins(_0x3ee4f6){const _0x285a04=_0x4aaaad;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x12d7aa,_0x2e7582=0x0,_0x2cff97=0x0;_0x3ee4f6[_0x285a04(0x309)](_0x138dac=>{const _0x32eb3a=_0x285a04;loading[_0x32eb3a(0x21b)][_0x32eb3a(0x2d4)](_0x138dac);}),loadingCanceled=![];let _0x5e0ba7=![];while(_0x12d7aa!=_0x3ee4f6[_0x285a04(0x1f7)]){_0x12d7aa=0x0,_0x3ee4f6[_0x285a04(0x309)](_0x91293d=>{const _0x4ea6b6=_0x285a04;if(global['ticker'][noslash(_0x91293d)]){loading[_0x4ea6b6(0x21b)]=loading[_0x4ea6b6(0x21b)][_0x4ea6b6(0x245)](_0x1c2ef5=>_0x1c2ef5!=_0x91293d);if(!watchedSymbols[_0x4ea6b6(0x30c)](_0x91293d))watchedSymbols[_0x4ea6b6(0x2d4)](_0x91293d);_0x12d7aa++;}}),loading['progress']=Math['round'](_0x12d7aa/_0x3ee4f6[_0x285a04(0x1f7)]*0x64);loading[_0x285a04(0x1c8)]!=0x64&&(_0x2cff97>0x1e*0x5&&(loading[_0x285a04(0x27b)]=!![],emitLoadingProgress()),_0x2cff97>0x78*0x5&&!_0x5e0ba7&&(loading[_0x285a04(0x1b1)]=!![],emitLoadingProgress(),_0x5e0ba7=!![],logHistory(_0x285a04(0x229),_0x285a04(0x1ab)+loading['remainingSymbols'][_0x285a04(0x1df)](',\x20')+_0x285a04(0x324)),logHistory(_0x285a04(0x229),_0x285a04(0x22d)+loadCoinsRetryInterval/0xea60+_0x285a04(0x26c)),pidCoinReloading=setTimeout(()=>{const _0x5369ff=_0x285a04;process[_0x5369ff(0x29e)]({'stop':_0x5369ff(0x213)},_0x364c9f=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x285a04(0x1b1)]=!![],emitLoadingProgress();break;}else _0x12d7aa!=_0x2e7582&&(_0x2e7582=_0x12d7aa,emitLoadingProgress()),_0x2cff97++,await sleep(0xc8);}_0x12d7aa==_0x3ee4f6[_0x285a04(0x1f7)]&&(coinsLoaded=!![],process[_0x285a04(0x29e)]({'status':_0x285a04(0x283),'live':_0x285a04(0x22e)},_0x4cf0c9=>{}),_0x5e0ba7&&logHistory('success',_0x285a04(0x2e1)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x430109=_0x4aaaad;proxyEmit(_0x430109(0x24c),{...emittedConfiguration(),'configstate':_0x430109(0x22f)});}function emitLoadingProgress(){const _0xb7ce38=_0x4aaaad;proxyEmit(_0xb7ce38(0x2db),loading);}async function getFiat(){const _0xd8c0c3=_0x4aaaad;let _0x5358b8=global[_0xd8c0c3(0x26d)][stablecoins[_0xd8c0c3(0x315)][_0xd8c0c3(0x2e2)]],_0x328827=global[_0xd8c0c3(0x26d)][stablecoins['usd'][_0xd8c0c3(0x2e2)]];return{'eur':Number(_0x5358b8),'usd':Number(_0x328827)};}function capitalize(_0xdf3059){const _0x22fadd=_0x4aaaad;return _0xdf3059[_0x22fadd(0x31a)](0x0,0x1)['toUpperCase']()+_0xdf3059[_0x22fadd(0x31a)](0x1);}function supportedExchanges(){const _0x58e7f9=_0x4aaaad,_0x275679=['ws','fetchTickers',_0x58e7f9(0x231),'watchTrades',_0x58e7f9(0x32a),_0x58e7f9(0x242),'createOrder',_0x58e7f9(0x261),_0x58e7f9(0x303),_0x58e7f9(0x278)];let _0x3248e8=[],_0x39fa7e=[],_0x2041e8=ccxt[_0x58e7f9(0x1dc)][_0x58e7f9(0x254)];_0x2041e8[_0x58e7f9(0x309)](_0x1b173e=>{const _0x5e50d4=_0x58e7f9;try{const _0x2ee179=new ccxt[(_0x5e50d4(0x1dc))][_0x1b173e]();_0x39fa7e[_0x5e50d4(0x2d4)](_0x2ee179);}catch(_0x54d537){}}),_0x39fa7e[_0x58e7f9(0x309)](_0x14c008=>{const _0x243ac9=_0x58e7f9;let _0x213200=0x0;_0x275679[_0x243ac9(0x309)](_0x56c56d=>{_0x56c56d in _0x14c008['has']&&_0x14c008['has'][_0x56c56d]&&_0x213200++;}),_0x213200==_0x275679[_0x243ac9(0x1f7)]&&_0x3248e8[_0x243ac9(0x2d4)](capitalize(_0x14c008['id']));});let _0x4239e6=[];return _0x2041e8[_0x58e7f9(0x309)](_0xa4f963=>{const _0x165b48=_0x58e7f9;_0xa4f963=capitalize(_0xa4f963);if(!_0x3248e8[_0x165b48(0x30c)](_0xa4f963))_0x4239e6[_0x165b48(0x2d4)](_0xa4f963);}),_0x3248e8;}function setStartDatePerformance(){const _0x44245d=_0x4aaaad;if(config&&config[_0x44245d(0x27c)][0x0]['changes']['length']!=0x0){const _0x19e8f2=config[_0x44245d(0x27c)][0x0][_0x44245d(0x2d8)];dbPerformance[_0x44245d(0x25e)](_0x44245d(0x27e))[_0x44245d(0x307)]({'date':config[_0x44245d(0x312)]})[_0x44245d(0x30f)]({'coins':_0x19e8f2})[_0x44245d(0x1cf)]();}}async function recreateCoinResults(){const _0x55c006=_0x4aaaad;let _0x23fe4b,_0x22b1c6=[];try{const _0xb49d99=fns[_0x55c006(0x22a)](fns[_0x55c006(0x1d2)](config[_0x55c006(0x312)][_0x55c006(0x2d5)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0xcca004 of currentCoins){if(_0xcca004[_0x55c006(0x2e2)]!=config[_0x55c006(0x1e7)]){let _0x38cdbb=0x0,_0xd91de3,_0x24bbcb;_0x23fe4b=await getAllEventOrders(_0xcca004['symbol']);if(_0x23fe4b[_0x55c006(0x1f7)]>0x0)_0x23fe4b[_0x55c006(0x309)](_0x4f812a=>{const _0x2e78e4=_0x55c006,_0x64371b=_0xcca004[_0x2e78e4(0x296)][_0x2e78e4(0x30c)](config[_0x2e78e4(0x1e7)]+'/');_0x22b1c6[_0x2e78e4(0x2d4)]({'datetime':_0x4f812a[_0x2e78e4(0x21a)],'coin':_0xcca004['coin'],'symbol':_0xcca004[_0x2e78e4(0x296)],'side':_0x4f812a['side'],'reverse':_0x64371b,'amount':formatResult(_0x4f812a['filled'],0x8),'filled':formatResult(_0x4f812a[_0x2e78e4(0x2f0)],0x8),'price':formatResult(_0x4f812a['price'],0x8)}),_0x38cdbb=_0x4f812a[_0x2e78e4(0x2d2)]==_0x2e78e4(0x1b7)?_0x38cdbb+_0x4f812a[_0x2e78e4(0x2f0)]:_0x38cdbb-_0x4f812a[_0x2e78e4(0x2f0)];if(!_0x24bbcb)_0x24bbcb=_0x4f812a[_0x2e78e4(0x1d0)];});_0xd91de3=_0xcca004[_0x55c006(0x228)]-_0x38cdbb;let _0x30c6dd;config[_0x55c006(0x27c)][_0x55c006(0x309)](_0x43e1a6=>{const _0x488b4e=_0x55c006;!_0x30c6dd&&(_0x30c6dd=_0x43e1a6[_0x488b4e(0x2d8)]['find'](_0x532576=>_0x532576[_0x488b4e(0x2e2)]==_0xcca004[_0x488b4e(0x2e2)]),_0x30c6dd&&(_0xd91de3=_0x30c6dd['number'],_0x24bbcb=_0x30c6dd[_0x488b4e(0x1d0)]));});let _0x567735=dbCoinResults[_0x55c006(0x25e)](_0x55c006(0x269))[_0x55c006(0x307)]({'coin':_0xcca004['coin']})['value']();_0x567735={'coin':_0xcca004[_0x55c006(0x2e2)],'number':_0xd91de3,'breakeven':_0x24bbcb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x55c006(0x25e)]('coins')[_0x55c006(0x307)]({'coin':_0xcca004[_0x55c006(0x2e2)]})['assign'](_0x567735)[_0x55c006(0x1cf)]();}}_0x22b1c6[_0x55c006(0x268)]((_0x17fcd5,_0x3106dc)=>_0x17fcd5[_0x55c006(0x21a)]>_0x3106dc[_0x55c006(0x21a)]?0x1:_0x3106dc[_0x55c006(0x21a)]>_0x17fcd5[_0x55c006(0x21a)]?-0x1:0x0);let _0xe65113=0x0;for(let _0x10a9ce of _0x22b1c6){await updateCoinResults(_0x10a9ce,!![]);}}catch(_0x11802f){await handleError(_0x11802f,_0x55c006(0x25c));}}async function getAllEventOrders(_0x57d6db){const _0x109ca6=_0x4aaaad;let _0x126b2e=[],_0x348d06=dbLogs[_0x109ca6(0x25e)](_0x109ca6(0x1ed))[_0x109ca6(0x245)](_0x35ef5e=>{const _0x14bf03=_0x109ca6,_0x2e43e1=_0x35ef5e[_0x14bf03(0x249)][_0x14bf03(0x1c6)]();return _0x2e43e1[_0x14bf03(0x30c)](_0x57d6db[_0x14bf03(0x1c6)]())&&(_0x2e43e1['includes'](_0x14bf03(0x1b9))&&_0x2e43e1[_0x14bf03(0x30c)](_0x14bf03(0x30b))||_0x2e43e1['includes']('filled')&&_0x2e43e1[_0x14bf03(0x30c)](_0x14bf03(0x30b)));})[_0x109ca6(0x2e8)]('time')[_0x109ca6(0x204)]();return _0x348d06[_0x109ca6(0x309)](_0x40aca8=>{const _0x38ff49=_0x109ca6,_0x300fe9=_0x40aca8[_0x38ff49(0x249)][_0x38ff49(0x30c)](_0x38ff49(0x286))?_0x38ff49(0x286):_0x38ff49(0x1b7),_0x4a90ac=/#([0-9]|\.)+\s/i,_0x1b0b2b=Number(_0x4a90ac[_0x38ff49(0x1e6)](_0x40aca8[_0x38ff49(0x249)])[0x0][_0x38ff49(0x1be)](0x1)),_0x340bde=/@([0-9]|\.)+$/i,_0x793f21=Number(_0x340bde[_0x38ff49(0x1e6)](_0x40aca8[_0x38ff49(0x249)])[0x0]['slice'](0x1));_0x126b2e[_0x38ff49(0x2d4)]({'datetime':_0x40aca8['time'],'coin':symbolToCoin(_0x57d6db),'symbol':_0x57d6db,'side':_0x300fe9,'amount':_0x1b0b2b,'filled':_0x1b0b2b,'price':_0x793f21});}),_0x126b2e;}async function getAllOrders(_0x55b2b7,_0x2b38ea){const _0x4b2a44=_0x4aaaad;let _0x431296=[];while(_0x2b38ea<exchange[_0x4b2a44(0x259)]()){const _0x1b399e=0x1f4,_0x3ff8ba=await exchange[_0x4b2a44(0x303)](_0x55b2b7,_0x2b38ea,_0x1b399e);if(_0x3ff8ba['length'])_0x2b38ea=_0x3ff8ba[_0x3ff8ba[_0x4b2a44(0x1f7)]-0x1][_0x4b2a44(0x2bb)]+0x1,_0x431296=_0x431296['concat'](_0x3ff8ba);else break;}return _0x431296;}async function validate24hChanges(){const _0x219e02=_0x4aaaad;for(const _0x16ba8 of currentCoins){if(_0x16ba8[_0x219e02(0x2e2)]!=config['basecoin']){let _0x1ea5c3;_0x16ba8[_0x219e02(0x310)]?_0x1ea5c3=formatResult((0x1/(global[_0x219e02(0x2ae)][noslash(_0x16ba8[_0x219e02(0x296)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1ea5c3=global[_0x219e02(0x2ae)][noslash(_0x16ba8[_0x219e02(0x296)])],_0x1ea5c3<config['change24h']&&(logHistory(_0x219e02(0x229),_0x16ba8[_0x219e02(0x2e2)]+_0x219e02(0x1bb)+_0x1ea5c3+'%'),logHistory(_0x219e02(0x229),_0x219e02(0x1fe)),logHistory(_0x219e02(0x229),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x6d6b1c,_0x39dc98){const _0x26a3d5=_0x4aaaad;if(!_0x6d6b1c)return!![];const _0x5877e2=_0x39dc98[_0x26a3d5(0x1fc)]('.'),_0x2f0a27=_0x6d6b1c[_0x26a3d5(0x1fc)]('.');for(var _0x3bd7f1=0x0;_0x3bd7f1<_0x2f0a27['length'];_0x3bd7f1++){const _0x4eaf25=~~_0x2f0a27[_0x3bd7f1],_0x16f823=~~_0x5877e2[_0x3bd7f1];if(_0x4eaf25<_0x16f823)return!![];if(_0x4eaf25>_0x16f823)return![];}return![];}async function oneTimeMigration(){const _0x4aca44=_0x4aaaad;let _0x1f5adb=dbLogs[_0x4aca44(0x25e)](_0x4aca44(0x297))[_0x4aca44(0x204)]();if(isOlderVersion(_0x1f5adb,_0x4aca44(0x32e))){let _0x421e38=[];const _0x2f0bcb=dbLogs[_0x4aca44(0x25e)](_0x4aca44(0x1ed))[_0x4aca44(0x204)]();_0x2f0bcb[_0x4aca44(0x309)](_0x17560c=>{const _0x1fdad4=_0x4aca44;_0x421e38[_0x1fdad4(0x2d4)]({'time':_0x17560c[_0x1fdad4(0x2a0)],'type':_0x17560c[_0x1fdad4(0x251)],'event':_0x17560c[_0x1fdad4(0x249)]});}),dbLogs[_0x4aca44(0x25e)](_0x4aca44(0x1ed))[_0x4aca44(0x30f)](_0x421e38)[_0x4aca44(0x1cf)]();}let _0x5d371b=dbConfig[_0x4aca44(0x25e)](_0x4aca44(0x297))['value']();if(isOlderVersion(_0x5d371b,_0x4aca44(0x32e))){let _0x1b8a72=dbConfig['get'](_0x4aca44(0x313))[_0x4aca44(0x307)]({'botID':botID})[_0x4aca44(0x204)]();if(_0x1b8a72){let _0x348227=[];_0x1b8a72[_0x4aca44(0x234)]['forEach'](_0x8ecec4=>{const _0x1992c8=_0x4aca44;_0x348227[_0x1992c8(0x2d4)]({'coin':_0x8ecec4[_0x1992c8(0x2e2)],'number':_0x8ecec4[_0x1992c8(0x270)],'price':_0x8ecec4[_0x1992c8(0x28d)]}),delete _0x8ecec4['startnumber'],delete _0x8ecec4[_0x1992c8(0x28d)];});if(_0x348227[_0x4aca44(0x1f7)]!==0x0)fs['writeFile'](configbackuppath+(_0x4aca44(0x2f6)+botID+_0x4aca44(0x2c6)),JSON['stringify'](_0x348227,null,0x4),function(_0x4f60b5){if(_0x4f60b5){}});const _0x4b6b05=(_0x3dd35b,_0x3c16c2)=>{const _0x3203cd=_0x4aca44;let _0x119d62=[];_0x3c16c2[_0x3203cd(0x309)](_0x45b133=>{const _0x2d73af=_0x3203cd,_0x579c05=_0x3dd35b['find'](_0x2c568c=>_0x2c568c['coin']==_0x45b133[_0x2d73af(0x2e2)]);if(!_0x579c05)_0x119d62[_0x2d73af(0x2d4)](_0x45b133);});let _0x42aa76=[];return _0x3dd35b['forEach'](_0x1e226a=>{const _0x22341c=_0x3203cd,_0x4d5f01=_0x3c16c2[_0x22341c(0x307)](_0x4db7c0=>_0x4db7c0[_0x22341c(0x2e2)]==_0x1e226a[_0x22341c(0x2e2)]);if(!_0x4d5f01||_0x4d5f01['number']==0x0&&_0x1e226a[_0x22341c(0x228)]!=0x0)_0x42aa76[_0x22341c(0x2d4)](_0x1e226a);}),{'missingDay1':_0x119d62,'notInDay2':_0x42aa76};},_0x27b7f7=dbPerformance['get'](_0x4aca44(0x27e))[_0x4aca44(0x2fc)]()[_0x4aca44(0x204)]();if(_0x27b7f7[_0x4aca44(0x1f7)]>0x1){const {missingDay1:_0x1693d9,notInDay2:_0x3ef7db}=_0x4b6b05(_0x348227,_0x27b7f7[0x1][_0x4aca44(0x269)]);_0x348227=[..._0x348227,..._0x1693d9],_0x3ef7db['forEach'](_0x11b3a9=>{const _0x5b7a99=_0x4aca44;let _0x3698d2=_0x348227['findIndex'](_0x360c4b=>_0x360c4b[_0x5b7a99(0x2e2)]==_0x11b3a9[_0x5b7a99(0x2e2)]);_0x3698d2!=-0x1&&_0x348227['splice'](_0x3698d2,0x1);});}_0x348227['sort']((_0x369d48,_0x271936)=>_0x369d48[_0x4aca44(0x2e2)]>_0x271936[_0x4aca44(0x2e2)]?0x1:_0x271936[_0x4aca44(0x2e2)]>_0x369d48[_0x4aca44(0x2e2)]?-0x1:0x0);let _0xa546a4=[{'date':_0x1b8a72[_0x4aca44(0x312)],'changes':_0x348227}];_0x27b7f7['length']>0x2&&_0x27b7f7[_0x4aca44(0x309)]((_0x94b1c1,_0x1f4d6f)=>{const _0x203633=_0x4aca44;if(_0x1f4d6f>0x0&&_0x1f4d6f<_0x27b7f7[_0x203633(0x1f7)]-0x1){const {missingDay1:_0x222fc8,notInDay2:_0x160f5a}=_0x4b6b05(_0x27b7f7[_0x1f4d6f][_0x203633(0x269)],_0x27b7f7[_0x1f4d6f+0x1][_0x203633(0x269)]);_0x348227=[],(_0x222fc8[_0x203633(0x1f7)]!=0x0||_0x160f5a[_0x203633(0x1f7)]!=0x0)&&(_0x222fc8[_0x203633(0x1f7)]!=0x0&&_0x348227['push'](..._0x222fc8),_0x160f5a['length']!=0x0&&(_0x160f5a[_0x203633(0x309)](_0x220aeb=>{const _0x558cfb=_0x203633;_0x220aeb[_0x558cfb(0x228)]=-_0x220aeb[_0x558cfb(0x228)];}),_0x348227[_0x203633(0x2d4)](..._0x160f5a)),_0x348227['sort']((_0xa674ec,_0x246bdc)=>_0xa674ec[_0x203633(0x2e2)]>_0x246bdc[_0x203633(0x2e2)]?0x1:_0x246bdc[_0x203633(0x2e2)]>_0xa674ec[_0x203633(0x2e2)]?-0x1:0x0),_0xa546a4[_0x203633(0x2d4)]({'date':_0x27b7f7[_0x1f4d6f+0x1][_0x203633(0x2a1)],'changes':_0x348227}));}}),dbConfig[_0x4aca44(0x25e)](_0x4aca44(0x313))[_0x4aca44(0x307)]({'botID':botID})[_0x4aca44(0x30f)]({..._0x1b8a72,'liquidity':_0xa546a4})[_0x4aca44(0x1cf)]();}}if(isOlderVersion(_0x5d371b,_0x4aca44(0x1da))){let _0x395574=dbConfig[_0x4aca44(0x25e)](_0x4aca44(0x313))[_0x4aca44(0x307)]({'botID':botID})[_0x4aca44(0x204)]();if(_0x395574){const _0x2730de=_0x395574[_0x4aca44(0x26b)],_0x2ec05d=_0x2730de?capitalize(_0x2730de):_0x4aca44(0x272);dbConfig[_0x4aca44(0x25e)]('bot')[_0x4aca44(0x307)]({'botID':botID})[_0x4aca44(0x30f)]({'exchange':_0x2ec05d})[_0x4aca44(0x1cf)]();}}let _0x2b28a4=dbPerformance['get'](_0x4aca44(0x297))[_0x4aca44(0x204)]();isOlderVersion(_0x2b28a4,_0x4aca44(0x32e))&&setStartDatePerformance();let _0x517eeb=dbCoinResults[_0x4aca44(0x25e)](_0x4aca44(0x297))[_0x4aca44(0x204)]();if(isOlderVersion(_0x517eeb,'2.5.0')){let _0x24e065=dbCoinResults['get'](_0x4aca44(0x269))[_0x4aca44(0x204)]();if(_0x24e065[_0x4aca44(0x1f7)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1c4dd3=_0x4aaaad;dbConfig[_0x1c4dd3(0x280)](_0x1c4dd3(0x297),serverversion)[_0x1c4dd3(0x1cf)](),dbPerformance[_0x1c4dd3(0x280)](_0x1c4dd3(0x297),serverversion)[_0x1c4dd3(0x1cf)](),dbLogs[_0x1c4dd3(0x280)]('version',serverversion)[_0x1c4dd3(0x1cf)](),dbCoinResults[_0x1c4dd3(0x280)](_0x1c4dd3(0x297),serverversion)[_0x1c4dd3(0x1cf)]();}function getConfiguration(_0x421a39){const _0xd068e4=_0x4aaaad;let _0x19e741=dbConfig[_0xd068e4(0x25e)]('bot')[_0xd068e4(0x307)]({'botID':_0x421a39})[_0xd068e4(0x204)]();if(_0x19e741){let _0x9d60af=![];typeof _0x19e741[_0xd068e4(0x218)]==_0xd068e4(0x24d)&&(_0x19e741={..._0x19e741,'threshold':Number(_0x19e741[_0xd068e4(0x218)])},_0x9d60af=!![]),_0x19e741[_0xd068e4(0x306)]==undefined&&(_0x19e741={..._0x19e741,'change24h':-0x14},_0x9d60af=!![]),_0x19e741['fiat']==undefined&&(_0x19e741={..._0x19e741,'fiat':_0xd068e4(0x29d)},_0x9d60af=!![]),_0x19e741[_0xd068e4(0x2e4)]==undefined&&(_0x19e741={..._0x19e741,'onepagemode':settings[_0xd068e4(0x2e4)]},_0x9d60af=!![]),_0x19e741[_0xd068e4(0x23b)]==undefined&&(_0x19e741={..._0x19e741,'colorscheme':_0xd068e4(0x2ef)},_0x9d60af=!![]),_0x19e741['autoliquidity']==undefined&&(_0x19e741={..._0x19e741,'autoliquidity':!![]},_0x9d60af=!![]),_0x9d60af&&(_0x19e741={'botID':_0x19e741[_0xd068e4(0x318)],'exchange':_0x19e741[_0xd068e4(0x26b)],'apiKey':_0x19e741[_0xd068e4(0x24a)],'apiSecret':_0x19e741[_0xd068e4(0x2f1)],'apiPassword':_0x19e741[_0xd068e4(0x1ce)],'basecoin':_0x19e741[_0xd068e4(0x1e7)],'botname':_0x19e741[_0xd068e4(0x1ac)],'showname':_0x19e741[_0xd068e4(0x266)],'threshold':_0x19e741['threshold'],'ordertype':_0x19e741[_0xd068e4(0x2b7)],'timeout':_0x19e741[_0xd068e4(0x27b)],'fiat':_0x19e741['fiat'],'startdate':_0x19e741[_0xd068e4(0x312)],'recreate':_0x19e741[_0xd068e4(0x319)],'timeshift':_0x19e741[_0xd068e4(0x320)],'onepagemode':_0x19e741['onepagemode'],'headless':_0x19e741[_0xd068e4(0x233)],'cooldown':_0x19e741['cooldown'],'change24h':_0x19e741[_0xd068e4(0x306)],'emojibuy':_0x19e741[_0xd068e4(0x20b)],'emojisell':_0x19e741[_0xd068e4(0x1d7)],'colorscheme':_0x19e741[_0xd068e4(0x23b)],'portfolio':_0x19e741['portfolio'],'autoliquidity':_0x19e741[_0xd068e4(0x27d)],'liquidity':_0x19e741[_0xd068e4(0x27c)],'openOrders':_0x19e741[_0xd068e4(0x2ba)]},dbConfig['get']('bot')['remove']()[_0xd068e4(0x1cf)](),dbConfig[_0xd068e4(0x25e)]('bot')[_0xd068e4(0x2d4)](_0x19e741)['write']());}else _0x19e741={'botID':_0x421a39,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xd068e4(0x294)+_0x421a39,'showname':![],'threshold':0x3,'ordertype':_0xd068e4(0x1b9),'timeout':0x14,'fiat':_0xd068e4(0x29d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xd068e4(0x320)],'onepagemode':settings[_0xd068e4(0x2e4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xd068e4(0x2ef),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x19e741;}function emittedConfiguration(){const _0x1eb2c2=_0x4aaaad;let _0x43ca5f;if(config[_0x1eb2c2(0x24a)]=='')_0x43ca5f={...config,'configstate':_0x1eb2c2(0x2e0)};else config['apiKey']==_0x1eb2c2(0x2f3)?_0x43ca5f={...config,'configstate':_0x1eb2c2(0x208)}:(_0x43ca5f={...config,'apiKey':_0x1eb2c2(0x202),'apiSecret':_0x1eb2c2(0x202)},config[_0x1eb2c2(0x1ce)]&&(_0x43ca5f[_0x1eb2c2(0x1ce)]=_0x1eb2c2(0x202)));return _0x43ca5f;}function getSettings(){const _0x28d9d2=_0x4aaaad;return dbSettings[_0x28d9d2(0x25e)](_0x28d9d2(0x2d1))['value']();}function getSecure(){const _0x170b14=_0x4aaaad;return dbSecure[_0x170b14(0x25e)](_0x170b14(0x2e9))[_0x170b14(0x204)]()||{};}function updateTimeshift(_0x56161d){const _0x5d6f1c=_0x4aaaad;let _0x40aa92=dbConfig['get']('bot')[_0x5d6f1c(0x307)]({'botID':botID})[_0x5d6f1c(0x204)]();_0x40aa92&&dbConfig[_0x5d6f1c(0x25e)](_0x5d6f1c(0x313))[_0x5d6f1c(0x307)]({'botID':botID})[_0x5d6f1c(0x30f)]({'timeshift':_0x56161d})[_0x5d6f1c(0x1cf)](),config[_0x5d6f1c(0x320)]=_0x56161d,proxyEmit(_0x5d6f1c(0x24c),emittedConfiguration());}function updateOnepagemode(_0x26d7d6){const _0x1154a9=_0x4aaaad;let _0x5add49=dbConfig[_0x1154a9(0x25e)](_0x1154a9(0x313))[_0x1154a9(0x307)]({'botID':botID})[_0x1154a9(0x204)]();_0x5add49&&dbConfig[_0x1154a9(0x25e)]('bot')['find']({'botID':botID})[_0x1154a9(0x30f)]({'onepagemode':_0x26d7d6})[_0x1154a9(0x1cf)](),config[_0x1154a9(0x2e4)]=_0x26d7d6,proxyEmit(_0x1154a9(0x24c),emittedConfiguration());}async function storeConfiguration(_0x5cb7d4){const _0x132179=_0x4aaaad;logger['debug'](_0x132179(0x23c));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x132179(0x1c7)](_0x132179(0x2ed));let _0x157416=[],_0x1dd5a9=![],_0x503b34=![],_0x1efcf7=[];_0x5cb7d4['portfolio']['forEach'](_0x474c66=>{const _0x4b894b=_0x132179;if(!_0x474c66['excluded']&&_0x474c66[_0x4b894b(0x2e2)]!=_0x5cb7d4[_0x4b894b(0x1e7)])_0x1efcf7[_0x4b894b(0x2d4)](_0x474c66[_0x4b894b(0x296)]);}),_0x1efcf7[_0x132179(0x309)](_0x589af6=>{const _0x169a51=watchedSymbols['includes'](_0x589af6);!_0x169a51&&_0x157416['push'](_0x589af6);}),_0x1efcf7[_0x132179(0x309)](_0x28b8a5=>{const _0x1fd3b3=_0x132179,_0x5da420=currentCoins['find'](_0x373794=>_0x373794[_0x1fd3b3(0x296)]==_0x28b8a5);!_0x5da420&&(_0x1dd5a9=!![]);}),currentCoins[_0x132179(0x309)](_0x5c0ae3=>{const _0x14a961=_0x132179;if(_0x5c0ae3[_0x14a961(0x2e2)]!=config['basecoin']){const _0x7fe046=_0x1efcf7['find'](_0x18b5ce=>_0x18b5ce==_0x5c0ae3[_0x14a961(0x296)]);!_0x7fe046&&(_0x1dd5a9=!![]);}}),_0x5cb7d4[_0x132179(0x234)][_0x132179(0x309)](_0x5b60fb=>{const _0x3dea33=_0x132179,_0x7dd325=config[_0x3dea33(0x234)]['find'](_0x42866e=>_0x42866e[_0x3dea33(0x2e2)]==_0x5b60fb[_0x3dea33(0x2e2)]);if(_0x7dd325&&_0x5b60fb[_0x3dea33(0x2a6)]!=_0x7dd325[_0x3dea33(0x2a6)])_0x503b34=!![];});let _0x40f1b4=dbConfig[_0x132179(0x25e)]('bot')[_0x132179(0x307)]({'botID':botID})[_0x132179(0x204)]();_0x5cb7d4={..._0x5cb7d4,'apiKey':crypt[_0x132179(0x2eb)](secure[_0x132179(0x2b0)],_0x5cb7d4['apiKey'])[_0x132179(0x1bd)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x5cb7d4[_0x132179(0x2f1)])['message']};_0x5cb7d4[_0x132179(0x1ce)]&&(_0x5cb7d4['apiPassword']=crypt[_0x132179(0x2eb)](secure[_0x132179(0x2b0)],_0x5cb7d4[_0x132179(0x1ce)])['message']);let _0x29b550=![];if(_0x40f1b4){_0x5cb7d4['apiKey']==_0x132179(0x202)?_0x5cb7d4[_0x132179(0x24a)]=config[_0x132179(0x24a)]:_0x29b550=!![];_0x5cb7d4[_0x132179(0x2f1)]==_0x132179(0x202)?_0x5cb7d4[_0x132179(0x2f1)]=config[_0x132179(0x2f1)]:_0x29b550=!![];if(_0x5cb7d4['apiPassword']==_0x132179(0x202))_0x5cb7d4[_0x132179(0x1ce)]=config['apiPassword'];else{if(_0x5cb7d4[_0x132179(0x1ce)])_0x29b550=!![];}dbConfig[_0x132179(0x25e)](_0x132179(0x313))['find']({'botID':botID})[_0x132179(0x30f)](_0x5cb7d4)[_0x132179(0x1cf)]();}else dbConfig[_0x132179(0x25e)]('bot')[_0x132179(0x2d4)](_0x5cb7d4)['write'](),_0x29b550=!![],process[_0x132179(0x29e)]({'status':'enabled','live':_0x132179(0x22e)},_0x3454a0=>{});process[_0x132179(0x29e)]({'botname':_0x5cb7d4[_0x132179(0x1ac)]},_0x4a018c=>{}),updateBotManager(),config={..._0x5cb7d4},proxyEmit(_0x132179(0x1f2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x29b550)await reset(_0x157416,!![]);else _0x1dd5a9||_0x503b34?await reset(_0x157416,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0xeda30f){const _0xb498e5=_0x4aaaad,_0x197fca={...config,'headless':_0xeda30f[_0xb498e5(0x233)]};let _0x7a7398=dbConfig['get'](_0xb498e5(0x313))[_0xb498e5(0x307)]({'botID':botID})[_0xb498e5(0x204)]();_0x7a7398&&dbConfig[_0xb498e5(0x25e)]('bot')['find']({'botID':botID})['assign'](_0x197fca)[_0xb498e5(0x1cf)](),config={..._0x197fca},updateBotManager(),proxyEmit(_0xb498e5(0x24c),emittedConfiguration());}async function storeFiat(_0x53b66b){const _0xe2915c=_0x4aaaad,_0x19906c={...config,'fiat':_0x53b66b};let _0x13f02b=dbConfig[_0xe2915c(0x25e)](_0xe2915c(0x313))[_0xe2915c(0x307)]({'botID':botID})['value']();_0x13f02b&&dbConfig['get'](_0xe2915c(0x313))[_0xe2915c(0x307)]({'botID':botID})['assign'](_0x19906c)[_0xe2915c(0x1cf)](),config={..._0x19906c},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x2a0f3f=_0x4aaaad;logger[_0x2a0f3f(0x1f0)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,_0x2a0f3f(0x2ec)+botID+_0x2a0f3f(0x1f4))))fs[_0x2a0f3f(0x26a)](path[_0x2a0f3f(0x1df)](configpath,_0x2a0f3f(0x2ec)+botID+_0x2a0f3f(0x1f4)));if(fs[_0x2a0f3f(0x1e3)](path['join'](configpath,_0x2a0f3f(0x2ec)+botID+_0x2a0f3f(0x281))))fs[_0x2a0f3f(0x26a)](path[_0x2a0f3f(0x1df)](configpath,'bot-'+botID+_0x2a0f3f(0x281)));if(fs[_0x2a0f3f(0x1e3)](path[_0x2a0f3f(0x1df)](configpath,_0x2a0f3f(0x2ec)+botID+_0x2a0f3f(0x1bf))))fs[_0x2a0f3f(0x26a)](path['join'](configpath,_0x2a0f3f(0x2ec)+botID+'-results.json'));}catch(_0x2efd64){if(_0x2efd64)logger[_0x2a0f3f(0x1f0)](_0x2a0f3f(0x1d6),_0x2efd64);}const _0x2155b7=getDate();let _0x535205=[];currentCoins[_0x2a0f3f(0x309)](_0x428f14=>{const _0x3813ed=_0x2a0f3f;_0x535205['push']({'coin':_0x428f14[_0x3813ed(0x2e2)],'number':_0x428f14[_0x3813ed(0x228)],'price':_0x428f14[_0x3813ed(0x28c)]});});let _0x823f7a=dbConfig[_0x2a0f3f(0x25e)](_0x2a0f3f(0x313))[_0x2a0f3f(0x307)]({'botID':botID})[_0x2a0f3f(0x204)]();_0x823f7a&&(dbConfig[_0x2a0f3f(0x25e)](_0x2a0f3f(0x313))[_0x2a0f3f(0x307)]({'botID':botID})[_0x2a0f3f(0x30f)]({'liquidity':[{'date':_0x2155b7,'changes':_0x535205}]})[_0x2a0f3f(0x1cf)](),config[_0x2a0f3f(0x27c)]=[]),process[_0x2a0f3f(0x29e)]({'stop':_0x2a0f3f(0x213)},_0x234776=>{});}function noslash(_0x54aa57){const _0x5bea54=_0x4aaaad;return _0x54aa57[_0x5bea54(0x2d5)]('/','');}function updateHighestFee(_0x49675b){const _0x49bf6a=_0x4aaaad;if(_0x49675b['reverse']){let _0x352da0={'filled':_0x49675b[_0x49bf6a(0x2f0)]*_0x49675b[_0x49bf6a(0x1d0)],'amount':_0x49675b[_0x49bf6a(0x2f0)]*_0x49675b[_0x49bf6a(0x1d0)],'side':_0x49675b['side']==_0x49bf6a(0x286)?'buy':_0x49bf6a(0x286),'price':0x1/_0x49675b['price']};_0x49675b={..._0x49675b,..._0x352da0};}const _0x3f7476=defaultFee*_0x49675b[_0x49bf6a(0x2f0)]*_0x49675b[_0x49bf6a(0x1d0)];lastFees['recent20'][_0x49bf6a(0x1f7)]===0x14&&lastFees[_0x49bf6a(0x290)][_0x49bf6a(0x32f)](),lastFees[_0x49bf6a(0x290)][_0x49bf6a(0x2d4)](_0x3f7476),lastFees[_0x49bf6a(0x1e1)]=Math[_0x49bf6a(0x2c1)](...lastFees[_0x49bf6a(0x290)]);}async function updateNumberCoinsCcxt(_0x2547a7){const _0x598e12=_0x4aaaad;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x2547a7['symbol']+_0x598e12(0x2a2)+_0x2547a7['status']+_0x598e12(0x2a2)+_0x2547a7['id']);let _0x28794a=_0x2547a7[_0x598e12(0x2ca)],_0x16d6cd=![];currentCoins[_0x598e12(0x309)](_0x2b9b99=>{const _0x4e1ae0=_0x598e12;_0x2b9b99[_0x4e1ae0(0x296)]==_0x2547a7[_0x4e1ae0(0x296)]&&(_0x16d6cd=!![]);});if(!_0x16d6cd)return;const _0x181a3f=currentCoins['find'](_0x14e797=>_0x14e797['symbol']==_0x2547a7['symbol']),_0x3b6f66=_0x3da448=>{const _0x39e477=_0x598e12;if(_0x181a3f)_0x181a3f[_0x39e477(0x1f9)]=_0x3da448;};if(_0x28794a=='open')_0x3b6f66(_0x598e12(0x225));else{if(_0x28794a==_0x598e12(0x247)){_0x3b6f66(_0x598e12(0x247));const _0x2f0a64=await getCoins();[currentCoins,currentCoinsAll]=_0x2f0a64,await getOpenOrders(),handleOpenOrders();}else{if(_0x28794a==_0x598e12(0x1d4)){logger[_0x598e12(0x1c7)]('1\x20-\x20FILLED:\x20'+_0x2547a7[_0x598e12(0x296)]+'\x20|\x20'+_0x2547a7[_0x598e12(0x2f0)]+_0x598e12(0x2a2)+_0x2547a7['id']);let _0x2fbc67=![];if(lastOrders)for(const _0x17285f of lastOrders){const _0x418e49=0xc8,_0x47eac3=0x1388;let _0x78b529=0x0;while(!_0x17285f[_0x598e12(0x2ad)]&&_0x78b529*_0x418e49<_0x47eac3){_0x78b529++,await sleep(_0x418e49);}if(_0x78b529>0x0)logger[_0x598e12(0x1c7)]('Waited\x20'+_0x78b529*_0x418e49/0x3e8+_0x598e12(0x2c4));if(_0x17285f[_0x598e12(0x2ad)]==_0x2547a7['id']){logger['debug'](_0x598e12(0x207)+_0x2547a7['id']),_0x2fbc67=!![];if(_0x17285f[_0x598e12(0x2f0)]==0x0){logger[_0x598e12(0x1c7)](_0x598e12(0x2f7)+_0x2547a7['id']);if(_0x2547a7[_0x598e12(0x216)])_0x17285f[_0x598e12(0x1d0)]=_0x2547a7[_0x598e12(0x216)];else{if(_0x2547a7[_0x598e12(0x1d0)])_0x17285f[_0x598e12(0x1d0)]=_0x2547a7[_0x598e12(0x1d0)];else{}}_0x17285f[_0x598e12(0x2f0)]=_0x2547a7[_0x598e12(0x2f0)],updateHighestFee(_0x17285f),_0x3b6f66('filled'),await validateOrders();if(lockOrders==ORDERS[_0x598e12(0x1d1)]){const _0x17ba9d=await getCoins();[currentCoins,currentCoinsAll]=_0x17ba9d;}_0x17285f['fee']={'currency':_0x2547a7[_0x598e12(0x29b)]?_0x2547a7[_0x598e12(0x29b)][_0x598e12(0x31b)]:null,'cost':_0x2547a7[_0x598e12(0x29b)]?_0x2547a7['fee'][_0x598e12(0x2aa)]:0x0},await updateCoinResults(_0x17285f);}}}if(!_0x2fbc67){logger[_0x598e12(0x1c7)](_0x598e12(0x30d)+_0x2547a7['id']),_0x3b6f66('filled');const _0x180db8=await getCoins();[currentCoins,currentCoinsAll]=_0x180db8,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x299bf2=JSON['parse'](lastBalances[_0x598e12(0x234)]);const _0x58e941=_0x299bf2[_0x598e12(0x307)](_0x534522=>_0x534522['symbol']==_0x2547a7['symbol']);if(_0x58e941){if(_0x28794a=='open')_0x58e941[_0x598e12(0x1f9)]=_0x58e941['orderstatus']==_0x598e12(0x2f0)?'filled':'open';else{if(_0x28794a=='canceled')_0x58e941[_0x598e12(0x1f9)]=_0x58e941[_0x598e12(0x1f9)]==_0x598e12(0x2f0)?_0x598e12(0x2f0):_0x598e12(0x247);else _0x28794a==_0x598e12(0x1d4)&&(_0x58e941[_0x598e12(0x1f9)]=_0x598e12(0x2f0));}}lastBalances={...lastBalances,'portfolio':JSON[_0x598e12(0x1f1)](_0x299bf2)},proxyEmit(_0x598e12(0x206),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x47fafb=_0x4aaaad;await getOpenOrders();let _0x944d0b=![];currentCoins[_0x47fafb(0x309)](_0x27e427=>{const _0x55457c=_0x47fafb;_0x944d0b=allOpenOrders[_0x55457c(0x307)](_0x36855b=>_0x36855b[_0x55457c(0x296)]==_0x27e427['symbol']),_0x27e427[_0x55457c(0x1f9)]=_0x944d0b?_0x55457c(0x225):_0x55457c(0x275);});}async function getCoins(_0x5c9974=!![],_0x99d4b1=config[_0x4aaaad(0x1e7)]){const _0x4852c9=_0x4aaaad;let _0x12179b,_0x445562=[],_0x52bb7f=[],_0x521263=[],_0x983898=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x12179b=await exchange[_0x4852c9(0x278)](),mybalances=_0x12179b[_0x4852c9(0x1ff)];for(const [_0x1f0114,_0x2189bf]of Object[_0x4852c9(0x304)](mybalances)){_0x983898[_0x4852c9(0x2d4)](_0x1f0114);}if(_0x99d4b1=='')for(const [_0x1c83ba,_0x2eb265]of Object['entries'](mybalances)){_0x2eb265!=0x0&&_0x52bb7f['push']({'coin':_0x1c83ba});}else{let _0x53c58e=![];for(const [_0x50114c,_0x24a0ee]of Object[_0x4852c9(0x304)](mybalances)){if(_0x983898[_0x4852c9(0x30c)](_0x50114c)){const _0xd1ac3=config[_0x4852c9(0x234)]['find'](_0x5a1948=>_0x5a1948[_0x4852c9(0x2e2)]==_0x50114c),_0x5651e8=_0x50114c+'/'+_0x99d4b1,_0x586de8=_0x99d4b1+'/'+_0x50114c,_0x21fe69=currentCoins['find'](_0x1babd5=>_0x1babd5[_0x4852c9(0x2e2)]==_0x50114c);_0x53c58e=![];if((_0x24a0ee!=0x0||_0xd1ac3)&&(allSymbols[_0x4852c9(0x30c)](_0x5651e8)||_0x50114c==_0x99d4b1))_0x50114c!=_0x99d4b1&&_0x445562[_0x4852c9(0x2d4)](_0x5651e8),_0x52bb7f[_0x4852c9(0x2d4)]({'coin':_0x50114c,'symbol':_0x5651e8,'reverse':![],'number':Math[_0x4852c9(0x2c1)](_0x24a0ee+(_0xd1ac3&&_0xd1ac3['offset']||0x0),0x0),'orderstatus':_0x21fe69?_0x21fe69[_0x4852c9(0x1f9)]:_0x4852c9(0x275)});else(_0x24a0ee!=0x0||_0xd1ac3)&&allSymbols[_0x4852c9(0x30c)](_0x586de8)&&(_0x50114c!=_0x99d4b1&&_0x445562[_0x4852c9(0x2d4)](_0x586de8),_0x52bb7f[_0x4852c9(0x2d4)]({'coin':_0x50114c,'symbol':_0x586de8,'reverse':!![],'number':Math[_0x4852c9(0x2c1)](_0x24a0ee+(_0xd1ac3&&_0xd1ac3[_0x4852c9(0x2a6)]||0x0),0x0),'orderstatus':_0x21fe69?_0x21fe69['orderstatus']:'none'}));}}}}catch(_0x443495){if(!_0x5c9974)handleErrorNoStop(_0x443495,'getCoins()');else await handleError(_0x443495,_0x4852c9(0x26f));}return _0x521263=cloneDeep(_0x52bb7f),_0x52bb7f=_0x52bb7f[_0x4852c9(0x245)](_0x50e083=>{const _0x4ddb21=_0x4852c9,_0x21fbfc=config[_0x4ddb21(0x234)][_0x4ddb21(0x307)](_0x5268a8=>_0x5268a8[_0x4ddb21(0x2e2)]==_0x50e083[_0x4ddb21(0x2e2)]);return _0x21fbfc&&!_0x21fbfc[_0x4ddb21(0x317)];}),[_0x52bb7f,_0x521263];}async function getCoinNumber(_0x26628c){const _0x578639=_0x4aaaad;let _0x4354fe;try{const _0x5b1739=await exchange[_0x578639(0x278)]();_0x4354fe=_0x5b1739[_0x578639(0x1ff)][_0x26628c];}catch(_0x57beaf){await handleError(_0x57beaf,_0x578639(0x20e));}return _0x4354fe;}async function getOpenOrders(){const _0x5101e2=_0x4aaaad;let _0x92e344;allOpenOrders=[];try{for(const _0x5811b1 of config[_0x5101e2(0x234)]){!_0x5811b1['excluded']&&_0x5811b1[_0x5101e2(0x2e2)]!=config['basecoin']&&(_0x92e344=await exchange[_0x5101e2(0x261)](_0x5811b1[_0x5101e2(0x296)]),_0x92e344[_0x5101e2(0x1f7)]>0x0&&allOpenOrders[_0x5101e2(0x2d4)](_0x92e344[0x0]));}}catch(_0x594ad5){await handleError(_0x594ad5,'getOpenOrders()');}}async function handleOpenOrders(_0x4af26e=0x0){const _0x1aad73=_0x4aaaad;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x4af26e==0x0?(logger[_0x1aad73(0x1c7)](_0x1aad73(0x2d6)),_0x4af26e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1aad73(0x1c7)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x5766fb){const _0x1a79e7=_0x4aaaad,_0x26e04a=ccxt[_0x1a79e7(0x1dc)][_0x5766fb[_0x1a79e7(0x26b)][_0x1a79e7(0x1c6)]()],_0x1a20ea=new _0x26e04a({'apiKey':_0x5766fb[_0x1a79e7(0x24a)],'secret':_0x5766fb[_0x1a79e7(0x2f1)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1a79e7(0x2fe)}});if(_0x5766fb[_0x1a79e7(0x1ce)])_0x1a20ea['password']=_0x5766fb['apiPassword'];try{await _0x1a20ea['loadMarkets']();}catch(_0x2e4863){throw _0x2e4863;}}function cloneDeep(_0x4a87b8){const _0x37068e=_0x4aaaad;return JSON[_0x37068e(0x1eb)](JSON[_0x37068e(0x1f1)](_0x4a87b8));}async function getPortfolio(_0x5cab5f){const _0x4b7419=_0x4aaaad;let _0x1503d4=[],_0x345a5e=[],_0x451462=[],_0x5649ef;if(_0x5cab5f[_0x4b7419(0x24a)]!=='************'||_0x5cab5f[_0x4b7419(0x2f1)]!=='************'||_0x5cab5f[_0x4b7419(0x1ce)]&&_0x5cab5f[_0x4b7419(0x1ce)]!==_0x4b7419(0x202)){if(config['exchange']){if(_0x5cab5f[_0x4b7419(0x24a)]==_0x4b7419(0x202))_0x5cab5f[_0x4b7419(0x24a)]=config[_0x4b7419(0x24a)];if(_0x5cab5f[_0x4b7419(0x2f1)]==_0x4b7419(0x202))_0x5cab5f[_0x4b7419(0x2f1)]=config['apiSecret'];if(_0x5cab5f['apiPassword']==_0x4b7419(0x202))_0x5cab5f[_0x4b7419(0x1ce)]=config[_0x4b7419(0x1ce)];try{await testAPI(_0x5cab5f);}catch(_0x3c35c2){if(_0x3c35c2[_0x4b7419(0x2f5)]()[_0x4b7419(0x30c)](_0x4b7419(0x253))){logger[_0x4b7419(0x1c7)](_0x4b7419(0x2da)),proxyEmit(_0x4b7419(0x234),![]);return;}else{handleError(_0x3c35c2,_0x4b7419(0x2a5));return;}}}await initExchange(_0x5cab5f[_0x4b7419(0x26b)],_0x5cab5f[_0x4b7419(0x24a)],_0x5cab5f['apiSecret'],_0x5cab5f[_0x4b7419(0x1ce)]);try{await loadSymbols(_0x5cab5f['exchange'],!![]);}catch(_0x4419e0){if(_0x4419e0[_0x4b7419(0x2f5)]()[_0x4b7419(0x30c)](_0x4b7419(0x253))){proxyEmit(_0x4b7419(0x234),![]);return;}else{handleError(_0x4419e0,_0x4b7419(0x265));return;}}const _0x5574ea=await getCoins(![],_0x5cab5f[_0x4b7419(0x1e7)]);_0x451462=cloneDeep(_0x5574ea[0x1]);}else _0x451462=cloneDeep(currentCoinsAll);if(_0x5cab5f[_0x4b7419(0x1e7)]=='')proxyEmit(_0x4b7419(0x234),_0x451462);else{_0x451462[_0x4b7419(0x309)](_0x1694e8=>{const _0x5dcf82=_0x4b7419;if(_0x1694e8[_0x5dcf82(0x2e2)]!=_0x5cab5f[_0x5dcf82(0x1e7)])_0x1503d4['push'](_0x1694e8['symbol']);});if(_0x1503d4[_0x4b7419(0x1f7)]==0x0)logHistory(_0x4b7419(0x229),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x345a5e=await exchange[_0x4b7419(0x30a)](_0x1503d4);}catch(_0x49b8c0){if(_0x49b8c0[_0x4b7419(0x2f5)]()[_0x4b7419(0x30c)](_0x4b7419(0x253))){proxyEmit(_0x4b7419(0x234),![]);return;}else{handleError(_0x49b8c0,_0x4b7419(0x325));return;}}_0x451462['forEach'](_0x10de38=>{const _0x25a148=_0x4b7419;_0x10de38[_0x25a148(0x2e2)]!=_0x5cab5f[_0x25a148(0x1e7)]?_0x5649ef=_0x10de38[_0x25a148(0x310)]?0x1/_0x345a5e[_0x10de38[_0x25a148(0x296)]][_0x25a148(0x28c)]:_0x345a5e[_0x10de38[_0x25a148(0x296)]][_0x25a148(0x28c)]:_0x5649ef=0x1,_0x10de38['price']=formatResult(_0x5649ef,0x8);}),proxyEmit(_0x4b7419(0x234),_0x451462);}}}function truncateTradeAmount(_0x42ff24,_0x15d0db){const _0x267373=_0x4aaaad;let _0x1a3e51=0x0;try{_0x1a3e51=exchange[_0x267373(0x219)](_0x42ff24,_0x15d0db);}catch(_0x5208ff){}return _0x1a3e51;}function checkMinimums(_0x29fdf0){const _0x3e2601=_0x4aaaad;let _0x584ad0=!![];const _0x3e243f=!_0x29fdf0[_0x3e2601(0x310)]?markets[_0x29fdf0[_0x3e2601(0x296)]][_0x3e2601(0x328)]['amount']['min']:markets[_0x29fdf0[_0x3e2601(0x296)]][_0x3e2601(0x328)][_0x3e2601(0x2aa)][_0x3e2601(0x2a4)],_0x3453af=!_0x29fdf0['reverse']?markets[_0x29fdf0[_0x3e2601(0x296)]]['limits'][_0x3e2601(0x2aa)][_0x3e2601(0x2a4)]:markets[_0x29fdf0[_0x3e2601(0x296)]][_0x3e2601(0x328)][_0x3e2601(0x246)][_0x3e2601(0x2a4)],_0x235ff8=truncateTradeAmount(_0x29fdf0['symbol'],_0x29fdf0['trade']);_0x29fdf0[_0x3e2601(0x21c)]=_0x235ff8;if(Math[_0x3e2601(0x29a)](_0x235ff8)<_0x3e243f)_0x584ad0=![];if(Math[_0x3e2601(0x29a)](_0x235ff8)*_0x29fdf0[_0x3e2601(0x28c)]<_0x3453af)_0x584ad0=![];if(_0x29fdf0[_0x3e2601(0x2d2)]==_0x3e2601(0x286)){let _0x14decf=config[_0x3e2601(0x234)]['find'](_0x2d26cf=>_0x2d26cf['coin']==_0x29fdf0[_0x3e2601(0x2e2)]);if(_0x14decf[_0x3e2601(0x2a6)]>0x0){if(Math[_0x3e2601(0x29a)](_0x235ff8)>_0x29fdf0[_0x3e2601(0x228)]-_0x14decf[_0x3e2601(0x2a6)])_0x584ad0=![];}else{if(Math[_0x3e2601(0x29a)](_0x235ff8)>_0x29fdf0[_0x3e2601(0x228)])_0x584ad0=![];}}if(_0x29fdf0[_0x3e2601(0x2d2)]=='buy'){let _0x291c07=config[_0x3e2601(0x234)][_0x3e2601(0x307)](_0x33c9a3=>_0x33c9a3['coin']==config[_0x3e2601(0x1e7)]),_0x5db922=currentCoins[_0x3e2601(0x307)](_0x17dea4=>_0x17dea4['coin']==config[_0x3e2601(0x1e7)]);if(_0x291c07['offset']>0x0){if(Math[_0x3e2601(0x29a)](_0x235ff8)*_0x29fdf0[_0x3e2601(0x28c)]>_0x5db922[_0x3e2601(0x228)]-_0x291c07['offset'])_0x584ad0=![];}else{if(Math[_0x3e2601(0x29a)](_0x235ff8)*_0x29fdf0[_0x3e2601(0x28c)]>_0x5db922[_0x3e2601(0x228)])_0x584ad0=![];}}return _0x584ad0;}async function getBalances(_0x1646f1=!![]){const _0x56c61a=_0x4aaaad;let _0x468319=0x0,_0x172290;const _0x469392=config[_0x56c61a(0x218)];if(config[_0x56c61a(0x233)]&&config[_0x56c61a(0x306)]<0x0)await validate24hChanges();currentCoins[_0x56c61a(0x309)](_0x5e99e7=>{const _0x5c7bee=_0x56c61a;if(_0x5e99e7[_0x5c7bee(0x2e2)]!=config['basecoin']){let _0x417a8a=global[_0x5c7bee(0x26d)][noslash(_0x5e99e7[_0x5c7bee(0x296)])];_0x172290=_0x5e99e7['reverse']?0x1/_0x417a8a:_0x417a8a;}else _0x172290=0x1;let _0x4666e8=_0x5e99e7['number']*_0x172290;_0x468319+=_0x4666e8,_0x5e99e7[_0x5c7bee(0x28c)]=formatResult(Number(_0x172290),0x8),_0x5e99e7[_0x5c7bee(0x204)]=_0x4666e8;}),currentCoins[_0x56c61a(0x309)](_0x3b6a70=>{const _0x2c523e=_0x56c61a;let _0x4ff479=config[_0x2c523e(0x234)][_0x2c523e(0x307)](_0x19f6a8=>_0x19f6a8['coin']==_0x3b6a70[_0x2c523e(0x2e2)]),_0x4f9099=Number(_0x4ff479['distribution']),_0x1f13f0=_0x3b6a70[_0x2c523e(0x204)]/_0x468319*0x64,_0x766a3b=_0x4f9099*_0x468319/0x64/_0x3b6a70[_0x2c523e(0x28c)]-_0x3b6a70[_0x2c523e(0x228)];_0x3b6a70[_0x2c523e(0x29f)]=formatResult(_0x1f13f0,0x3),_0x3b6a70[_0x2c523e(0x252)]=formatResult(_0x4f9099,0x3),_0x3b6a70[_0x2c523e(0x21c)]=formatResult(_0x766a3b,0x8),_0x3b6a70['side']='',_0x3b6a70['valid']=![];if(_0x3b6a70['coin']!=config[_0x2c523e(0x1e7)]){if(_0x3b6a70[_0x2c523e(0x29f)]>_0x4f9099)_0x3b6a70['side']=_0x2c523e(0x286),_0x3b6a70['valid']=checkMinimums(_0x3b6a70);else _0x3b6a70[_0x2c523e(0x29f)]<_0x4f9099&&(_0x3b6a70[_0x2c523e(0x2d2)]=_0x2c523e(0x1b7),_0x3b6a70[_0x2c523e(0x2c0)]=checkMinimums(_0x3b6a70));}_0x3b6a70[_0x2c523e(0x21d)]=_0x3b6a70[_0x2c523e(0x29f)]/_0x3b6a70[_0x2c523e(0x252)]-0x1;if(_0x3b6a70['orderstatus']==_0x2c523e(0x2f0)||_0x3b6a70[_0x2c523e(0x1f9)]=='canceled')_0x3b6a70[_0x2c523e(0x1f9)]=_0x2c523e(0x275);}),currentCoins[_0x56c61a(0x268)]((_0x208a6a,_0x220491)=>_0x208a6a[_0x56c61a(0x21d)]<_0x220491['delta']?0x1:_0x220491[_0x56c61a(0x21d)]<_0x208a6a['delta']?-0x1:0x0);const _0x3a7d94=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a7d94[_0x56c61a(0x315)],'usd':_0x3a7d94['usd'],'portfolio':JSON[_0x56c61a(0x1f1)](currentCoins),'threshold':_0x469392},proxyEmit(_0x56c61a(0x206),{'serverversion':serverversion,'balances':lastBalances});if(_0x1646f1){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x469392});else{if(lockOrders==ORDERS[_0x56c61a(0x1db)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x469392});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3203f1=getNormalizedPerformance();getStartingBalances(_0x3203f1),emitPerformance(_0x3203f1);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1536f2=getNormalizedPerformance();emitPerformance(_0x1536f2),getStartingBalances(_0x1536f2),logger[_0x56c61a(0x1c7)](_0x56c61a(0x223));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2c1e2b=_0x4aaaad;if(!lastBalances)return;let _0xac3a6e=[],_0x5d3ac0,_0x3bdb49=JSON[_0x2c1e2b(0x1eb)](lastBalances['portfolio']);_0x3bdb49[_0x2c1e2b(0x268)]((_0x4abc5c,_0x1bc58d)=>_0x4abc5c[_0x2c1e2b(0x2e2)]>_0x1bc58d[_0x2c1e2b(0x2e2)]?0x1:_0x1bc58d['coin']>_0x4abc5c['coin']?-0x1:0x0),_0x3bdb49[_0x2c1e2b(0x309)](_0x508994=>{const _0x10101b=_0x2c1e2b;let _0x974011={'coin':_0x508994[_0x10101b(0x2e2)],'number':_0x508994[_0x10101b(0x228)],'price':_0x508994[_0x10101b(0x28c)]};_0xac3a6e['push'](_0x974011);});const _0x5ed391=await getFiat();_0x5d3ac0={'date':lastBalances[_0x2c1e2b(0x2a0)][_0x2c1e2b(0x1fc)]('\x20')[0x0],'eur':_0x5ed391[_0x2c1e2b(0x315)],'usd':_0x5ed391[_0x2c1e2b(0x1f8)],'coins':_0xac3a6e};let _0x452738=dbPerformance[_0x2c1e2b(0x25e)]('data')[_0x2c1e2b(0x307)]({'date':_0x5d3ac0[_0x2c1e2b(0x2a1)]})[_0x2c1e2b(0x204)]();_0x452738?_0x5d3ac0[_0x2c1e2b(0x2a1)]!=config[_0x2c1e2b(0x312)]&&dbPerformance[_0x2c1e2b(0x25e)](_0x2c1e2b(0x27e))[_0x2c1e2b(0x307)]({'date':_0x5d3ac0[_0x2c1e2b(0x2a1)]})['assign'](_0x5d3ac0)[_0x2c1e2b(0x1cf)]():dbPerformance['get'](_0x2c1e2b(0x27e))[_0x2c1e2b(0x2d4)](_0x5d3ac0)[_0x2c1e2b(0x1cf)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x135e50=_0x4aaaad;let _0x23746e=[];if(dbPerformance[_0x135e50(0x301)](_0x135e50(0x27e))['value']()){let _0x2d2459=dbPerformance[_0x135e50(0x25e)]('data')[_0x135e50(0x2fc)]()[_0x135e50(0x245)](_0x38e457=>{const _0x3d8562=_0x135e50;if(_0x38e457[_0x3d8562(0x269)][_0x3d8562(0x1f7)]==0x0)return![];else return!![];})['sortBy'](_0x135e50(0x2a1))[_0x135e50(0x204)](),_0x28f07a=[...config[_0x135e50(0x27c)]];_0x28f07a['sort']((_0x1e2576,_0x2530af)=>_0x1e2576[_0x135e50(0x2a1)]>_0x2530af[_0x135e50(0x2a1)]?-0x1:_0x2530af[_0x135e50(0x2a1)]>_0x1e2576[_0x135e50(0x2a1)]?0x1:0x0);let _0x1b58bb=0x1,_0x329a7d=[],_0x4db7ab=0x0;_0x2d2459['slice']()[_0x135e50(0x310)]()[_0x135e50(0x309)]((_0x548d14,_0x159d21)=>{const _0x5c1fb7=_0x135e50;if(_0x28f07a[_0x4db7ab]){if(_0x2d2459[_0x2d2459[_0x5c1fb7(0x1f7)]-_0x159d21]&&_0x28f07a[_0x4db7ab][_0x5c1fb7(0x2a1)]==_0x2d2459[_0x2d2459[_0x5c1fb7(0x1f7)]-_0x159d21][_0x5c1fb7(0x2a1)]){if(_0x159d21<_0x2d2459[_0x5c1fb7(0x1f7)]){let _0x9a1530=0x0,_0x1f35b3=0x0;_0x2d2459[_0x2d2459[_0x5c1fb7(0x1f7)]-_0x159d21]['coins']['forEach'](_0x402375=>{const _0x17d531=_0x5c1fb7;_0x1f35b3+=_0x402375[_0x17d531(0x228)]*_0x402375[_0x17d531(0x1d0)];}),_0x28f07a[_0x4db7ab][_0x5c1fb7(0x2d8)][_0x5c1fb7(0x309)](_0x442f4c=>{const _0x40dcc0=_0x5c1fb7;_0x9a1530+=_0x442f4c[_0x40dcc0(0x228)]*_0x442f4c[_0x40dcc0(0x1d0)];}),_0x1b58bb*=_0x9a1530/(_0x1f35b3-_0x9a1530)+0x1;}_0x4db7ab++;}}let _0x127bb6=0x0;_0x548d14[_0x5c1fb7(0x269)][_0x5c1fb7(0x309)](_0x7f5f99=>{const _0x5e42b2=_0x5c1fb7;_0x127bb6+=_0x7f5f99[_0x5e42b2(0x228)]*_0x7f5f99['price'];}),_0x329a7d[_0x2d2459[_0x5c1fb7(0x1f7)]-_0x159d21-0x1]=_0x127bb6*(_0x1b58bb-0x1);});let _0x5f32fe=[];_0x28f07a=[...config[_0x135e50(0x27c)]]||[];let _0x5c5cd5=0x0;_0x4db7ab=0x0,_0x2d2459[_0x135e50(0x309)]((_0x4a542a,_0xba7136)=>{const _0x3be16c=_0x135e50;if(_0x28f07a[_0x4db7ab]){const _0x5e98d4=fns[_0x3be16c(0x1eb)](_0x28f07a[_0x4db7ab]['date'],'yyyy/MM/dd',new Date()),_0x391aed=fns['parse'](_0x4a542a[_0x3be16c(0x2a1)],_0x3be16c(0x2a3),new Date());if(fns[_0x3be16c(0x220)](_0x5e98d4,_0x391aed)){let _0xd62473=0x0;_0x28f07a[_0x4db7ab]['changes'][_0x3be16c(0x309)](_0x25ebe0=>{const _0xbd7024=_0x3be16c;!_0x5f32fe[_0x25ebe0[_0xbd7024(0x2e2)]]?_0x5f32fe[_0x25ebe0[_0xbd7024(0x2e2)]]=_0x25ebe0[_0xbd7024(0x228)]:(_0xd62473=_0x5f32fe[_0x25ebe0[_0xbd7024(0x2e2)]],_0x5f32fe[_0x25ebe0[_0xbd7024(0x2e2)]]+=_0x25ebe0[_0xbd7024(0x228)]);const _0x4675ad=_0x4a542a[_0xbd7024(0x269)][_0xbd7024(0x307)](_0x350605=>_0x350605[_0xbd7024(0x2e2)]==_0x25ebe0['coin']);(!_0x4675ad||_0x4675ad[_0xbd7024(0x228)]==0x0)&&(_0x5c5cd5+=(-_0x25ebe0[_0xbd7024(0x228)]-_0xd62473)*_0x25ebe0[_0xbd7024(0x1d0)]);}),_0x4db7ab++;}}_0x4a542a['coins']['forEach']((_0x2de051,_0x412ab9)=>{const _0x2b6980=_0x3be16c;_0x5f32fe[_0x2de051[_0x2b6980(0x2e2)]]&&(_0x2de051['initial']=_0x5f32fe[_0x2de051[_0x2b6980(0x2e2)]]);}),_0x23746e[_0x3be16c(0x2d4)]({'date':_0x4a542a[_0x3be16c(0x2a1)],'eur':_0x4a542a[_0x3be16c(0x315)],'usd':_0x4a542a[_0x3be16c(0x1f8)],'offset':_0x329a7d[_0xba7136],'netoffset':_0x5c5cd5,'coins':_0x4a542a[_0x3be16c(0x269)]});});}return _0x23746e;}function emitPerformance(_0x217301){const _0x1e22d3=_0x4aaaad;_0x217301[_0x1e22d3(0x1f7)]!==0x0?(proxyEmit(_0x1e22d3(0x2fd),_0x217301),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x4b5854,_0x2eba78){const _0x6813fb=_0x4aaaad;let _0x49c3f1=0x0,_0x4c5acb=0x0,_0x5ee4f8=0x0;_0x4b5854[_0x6813fb(0x269)][_0x6813fb(0x309)](_0x2bf000=>{const _0x233873=_0x6813fb;_0x49c3f1+=_0x2bf000[_0x233873(0x228)]*_0x2bf000['price'];});_0x2eba78&&(_0x49c3f1+=_0x4b5854[_0x6813fb(0x2a6)]);if(config['basecoin']===_0x6813fb(0x2bc)||config[_0x6813fb(0x1e7)]===_0x6813fb(0x308))_0x4c5acb=_0x49c3f1*_0x4b5854[_0x6813fb(0x315)],_0x5ee4f8=_0x49c3f1*_0x4b5854['usd'];else{if(usdBasecoins[_0x6813fb(0x30c)](config[_0x6813fb(0x1e7)]))_0x4c5acb=_0x49c3f1*_0x4b5854['eur']/_0x4b5854[_0x6813fb(0x1f8)],_0x5ee4f8=_0x49c3f1;else config[_0x6813fb(0x1e7)]===_0x6813fb(0x2cc)&&(_0x4c5acb=_0x49c3f1,_0x5ee4f8=_0x49c3f1*_0x4b5854[_0x6813fb(0x1f8)]/_0x4b5854[_0x6813fb(0x315)]);}return[_0x49c3f1,_0x4c5acb,_0x5ee4f8];}function getKPIs(_0x581fcc,_0x183df9=_0x4aaaad(0x2cc)){const _0x8cf780=_0x4aaaad,_0x21f5a5=config['basecoin'],_0xcfdfe4=lastBalances,_0x599064=currentCoins,_0x210888=getNormalizedPerformance(),_0x478e21=_0x581fcc==='basecoin'?_0x21f5a5:_0x581fcc===_0x8cf780(0x2ab)||_0x581fcc===_0x8cf780(0x2a7)?_0x183df9:_0x8cf780(0x20f)+_0x21f5a5,_0x893dbe=_0x581fcc==='net-basecoin'?_0x8cf780(0x2f2):_0x581fcc==='net-fiat'?'Net\x20effect':_0x478e21+_0x8cf780(0x332),_0x33092a=_0x581fcc==='net-basecoin'||_0x581fcc===_0x8cf780(0x2a7)?'Net\x20effect':_0x478e21+_0x8cf780(0x2c2);let _0x341e45=0x0;_0x599064[_0x8cf780(0x309)](_0x1c3445=>{const _0x5860d2=_0x8cf780;_0x341e45+=_0x1c3445['number']*_0x1c3445[_0x5860d2(0x28c)];});if(_0x581fcc===_0x8cf780(0x2ab)||_0x581fcc===_0x8cf780(0x2a7)){if(_0x21f5a5===_0x8cf780(0x2bc)||_0x21f5a5===_0x8cf780(0x308))_0x341e45=_0x341e45*(_0x183df9==='EUR'?_0xcfdfe4['eur']:_0xcfdfe4[_0x8cf780(0x1f8)]);else{if(usdBasecoins[_0x8cf780(0x30c)](_0x21f5a5))_0x341e45=_0x341e45*(_0x183df9===_0x8cf780(0x2cc)?_0xcfdfe4[_0x8cf780(0x315)]/_0xcfdfe4[_0x8cf780(0x1f8)]:0x1);else _0x21f5a5===_0x8cf780(0x2cc)&&(_0x341e45=_0x341e45*(_0x183df9===_0x8cf780(0x2cc)?0x1:_0xcfdfe4['usd']/_0xcfdfe4[_0x8cf780(0x315)]));}}let _0x5d2721;if(_0x341e45!==0x0){if(_0x581fcc===_0x8cf780(0x1e7))_0x5d2721=(_0x341e45/startingBalances[_0x8cf780(0x1e7)]-0x1)*0x64;else{if(_0x183df9===_0x8cf780(0x2cc))_0x5d2721=(_0x341e45/startingBalances[_0x8cf780(0x315)]-0x1)*0x64;else _0x5d2721=(_0x341e45/startingBalances[_0x8cf780(0x1f8)]-0x1)*0x64;}let _0x382ac2=0x0;if(startingBalances[_0x8cf780(0x269)])_0x599064['forEach'](_0x3a3cf9=>{const _0x338025=_0x8cf780;let _0x6e8e4d=startingBalances['coins'][_0x338025(0x307)](_0x12e89b=>_0x12e89b[_0x338025(0x2e2)]===_0x3a3cf9[_0x338025(0x2e2)]);if(_0x6e8e4d&&_0x6e8e4d[_0x338025(0x2e2)]&&_0x3a3cf9[_0x338025(0x228)]!==0x0)_0x382ac2+=_0x6e8e4d[_0x338025(0x228)]*_0x3a3cf9['last'];});let _0x14cff6=0x0;if(_0x210888[_0x8cf780(0x1f7)]!==0x0){let _0x30b573=_0x210888[_0x210888[_0x8cf780(0x1f7)]-0x1];_0x14cff6=_0x30b573['netoffset'];}_0x382ac2-=_0x14cff6;_0x581fcc===_0x8cf780(0x322)&&(_0x5d2721=(_0x341e45-_0x382ac2)/startingBalances[_0x8cf780(0x1e7)]*0x64,_0x341e45=_0x341e45-_0x382ac2);if(_0x581fcc===_0x8cf780(0x2a7)){let _0x2e0ea4=_0x183df9===_0x8cf780(0x2cc)?startingBalances['eur']:startingBalances[_0x8cf780(0x1f8)];if(_0x21f5a5===_0x8cf780(0x2bc)||_0x21f5a5===_0x8cf780(0x308))_0x382ac2=_0x183df9===_0x8cf780(0x2cc)?_0x382ac2*_0xcfdfe4[_0x8cf780(0x315)]:_0x382ac2*_0xcfdfe4['usd'];else{if(usdBasecoins[_0x8cf780(0x30c)](_0x21f5a5))_0x382ac2=_0x183df9==='EUR'?_0x382ac2*_0xcfdfe4['eur']/_0xcfdfe4[_0x8cf780(0x1f8)]:_0x382ac2;else _0x21f5a5===_0x8cf780(0x2cc)&&(_0x382ac2=_0x183df9===_0x8cf780(0x2cc)?_0x382ac2:_0x382ac2*_0xcfdfe4['usd']/_0xcfdfe4['eur']);}_0x5d2721=(_0x341e45-_0x382ac2)/_0x2e0ea4*0x64,_0x341e45=_0x341e45-_0x382ac2;}if(_0x5d2721){if(_0x5d2721<0x64)_0x5d2721=_0x5d2721[_0x8cf780(0x237)](0x2);else{if(_0x5d2721<0x3e8)_0x5d2721=_0x5d2721[_0x8cf780(0x237)](0x1);else _0x5d2721=_0x5d2721['toFixed'](0x0);}}else _0x5d2721=Number('0')[_0x8cf780(0x237)](0x2);if(_0x341e45){if(Math['abs'](_0x341e45)<0.000001)_0x341e45=_0x341e45[_0x8cf780(0x237)](0x2);else{if(Math['abs'](_0x341e45)<0.1)_0x341e45=_0x341e45[_0x8cf780(0x237)](0x6);else{if(Math['abs'](_0x341e45)<0x1)_0x341e45=_0x341e45['toFixed'](0x5);else{if(Math[_0x8cf780(0x29a)](_0x341e45)<0xa)_0x341e45=_0x341e45['toFixed'](0x4);else{if(Math[_0x8cf780(0x29a)](_0x341e45)<0x64)_0x341e45=_0x341e45[_0x8cf780(0x237)](0x3);else{if(Math[_0x8cf780(0x29a)](_0x341e45)<0x3e8)_0x341e45=_0x341e45['toFixed'](0x2);else _0x341e45=_0x341e45[_0x8cf780(0x237)](0x2);}}}}}}else _0x341e45=Number('0')[_0x8cf780(0x237)](0x2);}else _0x5d2721=Number('0')[_0x8cf780(0x237)](0x2);return{'value':_0x341e45,'change':_0x5d2721,'leftTxt':_0x893dbe,'rightTxt':_0x33092a};}async function getStartingBalances(_0x43bba3,_0xc2efb=!![]){const _0x230487=_0x4aaaad;if(_0x43bba3[_0x230487(0x1f7)]!==0x0){const [_0x2995f4,_0x3b6efc,_0x314c40]=getPerf(_0x43bba3[0x0],!![]);let _0x26a64f=[];config['portfolio'][_0x230487(0x309)](_0x5ae8fb=>{const _0x4cd78c=_0x230487;let _0x118a76=0x0,_0x12b375;config[_0x4cd78c(0x27c)][_0x4cd78c(0x309)](_0x4460da=>{const _0x6c50dd=_0x4cd78c;let _0x160f92=_0x4460da[_0x6c50dd(0x2d8)]['find'](_0x101503=>_0x101503[_0x6c50dd(0x2e2)]==_0x5ae8fb[_0x6c50dd(0x2e2)]);if(_0x160f92){_0x118a76+=_0x160f92[_0x6c50dd(0x228)];if(!_0x12b375)_0x12b375=_0x160f92[_0x6c50dd(0x1d0)];}}),_0x26a64f['push']({'coin':_0x5ae8fb[_0x4cd78c(0x2e2)],'number':_0x118a76,'initialprice':_0x12b375});});const _0x2e6ba1={'basecoin':_0x2995f4,'eur':_0x3b6efc,'usd':_0x314c40,'coins':_0x26a64f};if(_0xc2efb)proxyEmit('starting-balances',_0x2e6ba1);startingBalances=_0x2e6ba1;}}function headlessMode(_0x317fd9){const _0xf16ad2=_0x4aaaad;let _0x5ec6b1=_0x317fd9[_0xf16ad2(0x234)],_0x4f4a87=_0x317fd9['threshold'],_0x1f057b=[];for(let _0xb5ace1 of _0x5ec6b1){if(_0xb5ace1[_0xf16ad2(0x2e2)]!=config[_0xf16ad2(0x1e7)]){if(_0xb5ace1[_0xf16ad2(0x21d)]>=_0x4f4a87/0x64){if(_0xb5ace1[_0xf16ad2(0x2c0)])_0x1f057b['push'](_0xb5ace1);}else{if(_0xb5ace1[_0xf16ad2(0x21d)]<=-_0x4f4a87/0x64){if(_0xb5ace1['valid'])_0x1f057b[_0xf16ad2(0x2d4)](_0xb5ace1);}}}}_0x1f057b['length']>0x0&&placeOrder(_0x1f057b);}function notifyBalance(_0x51df45){const _0x59e6be=_0x4aaaad;let _0x266830=_0x51df45['portfolio'],_0xb87bff=_0x51df45[_0x59e6be(0x218)],_0x50cb1f=[];for(let _0x586260 of _0x266830){if(_0x586260[_0x59e6be(0x2e2)]!=config[_0x59e6be(0x1e7)]){if(_0x586260[_0x59e6be(0x21d)]>=_0xb87bff/0x64){if(_0x586260[_0x59e6be(0x2c0)])_0x50cb1f[_0x59e6be(0x2d4)](_0x586260);}else{if(_0x586260[_0x59e6be(0x21d)]<=-_0xb87bff/0x64){if(_0x586260[_0x59e6be(0x2c0)])_0x50cb1f[_0x59e6be(0x2d4)](_0x586260);}}}}if(_0x50cb1f[_0x59e6be(0x1f7)]>0x0){let _0x3d299b=_0x50cb1f[_0x59e6be(0x244)](_0x1277dd=>_0x1277dd['coin']);_0x3d299b[_0x59e6be(0x268)]();let _0x27863d=_0x3d299b['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x59e6be(0x2d0),_0x59e6be(0x235));lastCoinsToBalance=_0x27863d;}}function symbolToCoin(_0x5e853c){const _0x39d761=_0x4aaaad;let _0x2a2c8b;if(_0x5e853c[_0x39d761(0x30c)]('/'+config[_0x39d761(0x1e7)]))_0x2a2c8b=_0x5e853c[_0x39d761(0x2d5)]('/'+config['basecoin'],'');if(_0x5e853c[_0x39d761(0x30c)](config[_0x39d761(0x1e7)]+'/'))_0x2a2c8b=_0x5e853c[_0x39d761(0x2d5)](config['basecoin']+'/','');return _0x2a2c8b;}async function unlockOrders(){const _0x248055=_0x4aaaad;if(allOrdersPlaced&&lockOrders==ORDERS[_0x248055(0x1d1)]){logger[_0x248055(0x1c7)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x248055(0x1fd)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x20ecf9=await getCoins();[currentCoins,currentCoinsAll]=_0x20ecf9,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x248055(0x1c7)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x5dbab3){const _0x5854d2=_0x4aaaad;if(_0x5dbab3)validateOrdersState=_0x5dbab3;logger[_0x5854d2(0x1c7)](_0x5854d2(0x2c8)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x5854d2(0x27a):lockOrders==0x2?_0x5854d2(0x236):_0x5854d2(0x2ce)));let _0xba75dd=[],_0x4038f6=config[_0x5854d2(0x2b7)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5854d2(0x27b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5854d2(0x1d1)])return;logger[_0x5854d2(0x1c7)](_0x5854d2(0x333)+validateOrdersState),lastOrders['forEach'](_0x20f370=>{const _0x3fa5f8=_0x5854d2;let _0x4255f6=![];_0x20f370[_0x3fa5f8(0x2f0)]>0x0&&(_0x4255f6=!![]),_0xba75dd[_0x3fa5f8(0x2d4)](_0x4255f6),_0x4255f6&&config[_0x3fa5f8(0x2b7)]!=_0x3fa5f8(0x1b9)&&logHistory(_0x3fa5f8(0x30b),_0x3fa5f8(0x20a)+_0x20f370[_0x3fa5f8(0x296)]+'\x20'+_0x20f370[_0x3fa5f8(0x2d2)]+'\x20#'+formatResult(_0x20f370[_0x3fa5f8(0x2f0)],0x8)+'\x20@'+formatResult(_0x20f370['price'],0x8));}),_0xba75dd['forEach']((_0x55246a,_0x514205)=>{if(_0x55246a)lastOrders['splice'](_0x514205,0x1);}),persistOpenOrders(lastOrders);const _0x3ae486=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x5854d2(0x1ec);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0xba75dd[_0x5854d2(0x30c)](![])){if(config[_0x5854d2(0x2b7)]==_0x5854d2(0x1b9)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0xba75dd[_0x5854d2(0x30c)](![])){}else{if(allOrdersPlaced){if(config[_0x5854d2(0x2b7)]==_0x5854d2(0x1b9)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5854d2(0x31e))_0xba75dd['includes'](![])&&(config[_0x5854d2(0x2b7)]=='market'?logHistory('success',_0x5854d2(0x25f)+Math[_0x5854d2(0x279)](_0x4038f6*validateOrderInterval/0xea60)+_0x5854d2(0x1a8)+_0x3ae486):(await cancelOrders(),logHistory(_0x5854d2(0x1b5),_0x5854d2(0x1e2)+Math[_0x5854d2(0x279)](_0x4038f6*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3ae486))),await unlockOrders();else{if(validateOrdersState==_0x5854d2(0x29c)){if(config[_0x5854d2(0x2b7)]!='market')logHistory(_0x5854d2(0x1b5),_0x5854d2(0x241)+_0x3ae486);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x4cd402=>{const _0x4c1b8a=_0x3226;try{const _0x144f50=await exchange[_0x4c1b8a(0x242)](_0x4cd402[_0x4c1b8a(0x2ad)],_0x4cd402['symbol']);}catch(_0x56929d){if(_0x56929d[_0x4c1b8a(0x2f5)]()[_0x4c1b8a(0x30c)](_0x4c1b8a(0x243))){}else await handleError(_0x56929d,_0x4c1b8a(0x282));}});}async function initCoinResults(_0x5c02d7){const _0x38a65f=_0x4aaaad;_0x5c02d7?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x5c02d7):logger[_0x38a65f(0x1c7)](_0x38a65f(0x284)),config[_0x38a65f(0x234)][_0x38a65f(0x309)](_0xc187cf=>{const _0x3e2a65=_0x38a65f;if(!_0xc187cf[_0x3e2a65(0x317)]&&_0xc187cf[_0x3e2a65(0x2e2)]!=config['basecoin']){const _0x25bcda=currentCoins[_0x3e2a65(0x307)](_0x301f82=>_0x301f82[_0x3e2a65(0x2e2)]==_0xc187cf[_0x3e2a65(0x2e2)]),_0x1bd446=global['ticker'][noslash(_0xc187cf['symbol'])];let _0x25aae4=_0x25bcda?_0x25bcda[_0x3e2a65(0x228)]:null,_0x12db6d=_0xc187cf[_0x3e2a65(0x310)]?0x1/_0x1bd446:_0x1bd446,_0x18ff40;config[_0x3e2a65(0x27c)][_0x3e2a65(0x309)](_0x1d4dc3=>{const _0x5ac36c=_0x3e2a65;!_0x18ff40&&(_0x18ff40=_0x1d4dc3[_0x5ac36c(0x2d8)]['find'](_0x2c9560=>_0x2c9560[_0x5ac36c(0x2e2)]==_0xc187cf[_0x5ac36c(0x2e2)]),_0x18ff40&&(_0x25aae4=_0x18ff40[_0x5ac36c(0x228)],_0x12db6d=_0x18ff40[_0x5ac36c(0x1d0)]));});let _0x53befb=dbCoinResults[_0x3e2a65(0x25e)](_0x3e2a65(0x269))[_0x3e2a65(0x307)]({'coin':_0xc187cf['coin']})[_0x3e2a65(0x204)]();if(!_0x53befb){const _0x5261aa={'coin':_0xc187cf[_0x3e2a65(0x2e2)],'number':_0x25aae4,'breakeven':_0x12db6d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3e2a65(0x269))[_0x3e2a65(0x2d4)](_0x5261aa)[_0x3e2a65(0x1cf)]();}else{if(_0x5c02d7&&_0xc187cf[_0x3e2a65(0x2e2)]==_0x5c02d7){const _0x4ccf32={'coin':_0xc187cf['coin'],'number':_0x25aae4,'breakeven':_0x12db6d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3e2a65(0x25e)]('coins')[_0x3e2a65(0x307)]({'coin':_0xc187cf[_0x3e2a65(0x2e2)]})[_0x3e2a65(0x30f)](_0x4ccf32)['write']();}}}});}async function updateCoinResults(_0x4873d9,_0x19ce44=![]){const _0x1c32ea=_0x4aaaad;let _0x4e2faf,_0x2cdf88,_0x39bea3,_0x4c590f,_0x2e01c4,_0x48d25e,_0x2eda1d=dbCoinResults['get']('coins')['find']({'coin':_0x4873d9[_0x1c32ea(0x2e2)]})[_0x1c32ea(0x204)](),_0x54b845=![];_0x2eda1d&&Object[_0x1c32ea(0x304)](_0x2eda1d)[_0x1c32ea(0x309)](([_0x20fb8a,_0x1c0082])=>{if(_0x1c0082==null)_0x54b845=!![];});(!_0x2eda1d||_0x54b845)&&(await initCoinResults(_0x4873d9['coin']),_0x2eda1d=dbCoinResults[_0x1c32ea(0x25e)]('coins')['find']({'coin':_0x4873d9['coin']})[_0x1c32ea(0x204)]());_0x4873d9['reverse']&&(_0x48d25e={'filled':_0x4873d9[_0x1c32ea(0x2f0)]*_0x4873d9['price'],'amount':_0x4873d9[_0x1c32ea(0x2f0)]*_0x4873d9['price'],'side':_0x4873d9[_0x1c32ea(0x2d2)]==_0x1c32ea(0x286)?_0x1c32ea(0x1b7):_0x1c32ea(0x286),'price':0x1/_0x4873d9['price']},_0x4873d9={..._0x4873d9,..._0x48d25e});_0x19ce44?_0x2cdf88=_0x4873d9[_0x1c32ea(0x2d2)]=='buy'?_0x2eda1d[_0x1c32ea(0x228)]+_0x4873d9['filled']:_0x2eda1d[_0x1c32ea(0x228)]-_0x4873d9[_0x1c32ea(0x2f0)]:_0x2cdf88=await getCoinNumber(_0x4873d9[_0x1c32ea(0x2e2)]);if(_0x4873d9[_0x1c32ea(0x29b)]&&_0x4873d9[_0x1c32ea(0x29b)][_0x1c32ea(0x31b)]==config['basecoin'])_0x4e2faf=_0x4873d9[_0x1c32ea(0x29b)][_0x1c32ea(0x2aa)];else{if(_0x4873d9[_0x1c32ea(0x29b)]&&_0x4873d9[_0x1c32ea(0x29b)]['currency']=='BNB'&&!_0x19ce44)_0x4e2faf=_0x4873d9['fee'][_0x1c32ea(0x2aa)]*global[_0x1c32ea(0x26d)][_0x1c32ea(0x2a9)+config['basecoin']];else _0x4e2faf=defaultFee*_0x4873d9[_0x1c32ea(0x2f0)]*_0x4873d9[_0x1c32ea(0x1d0)];}_0x4873d9[_0x1c32ea(0x2d2)]==_0x1c32ea(0x1b7)?(_0x39bea3=_0x2cdf88!=0x0?(_0x2eda1d[_0x1c32ea(0x24b)]*_0x2eda1d['number']+_0x4873d9[_0x1c32ea(0x1d0)]*(_0x2cdf88-_0x2eda1d[_0x1c32ea(0x228)])+_0x4e2faf)/_0x2cdf88:0x0,_0x4c590f=_0x2eda1d[_0x1c32ea(0x21e)]):(_0x39bea3=_0x2cdf88!=0x0?(_0x2eda1d[_0x1c32ea(0x24b)]*_0x2eda1d['number']-_0x4873d9[_0x1c32ea(0x1d0)]*(_0x2eda1d[_0x1c32ea(0x228)]-_0x2cdf88)+_0x4e2faf)/_0x2cdf88:0x0,_0x4c590f=_0x2eda1d['realized']+(_0x4873d9[_0x1c32ea(0x1d0)]-_0x2eda1d[_0x1c32ea(0x24b)])*_0x4873d9[_0x1c32ea(0x2f0)]);_0x2e01c4=(_0x4873d9[_0x1c32ea(0x1d0)]-_0x39bea3-_0x4e2faf/_0x4873d9['filled'])*_0x2cdf88;let _0x54fd88={'coin':_0x4873d9[_0x1c32ea(0x2e2)],'number':_0x2cdf88,'breakeven':formatResult(_0x39bea3,0x8),'realized':formatResult(_0x4c590f,0x8),'unrealized':formatResult(_0x2e01c4,0x8),'fees':formatResult(_0x2eda1d[_0x1c32ea(0x226)]+_0x4e2faf,0x8),'sells':_0x4873d9[_0x1c32ea(0x2d2)]==_0x1c32ea(0x286)?_0x2eda1d['sells']+0x1:_0x2eda1d[_0x1c32ea(0x32c)],'buys':_0x4873d9['side']==_0x1c32ea(0x1b7)?_0x2eda1d['buys']+0x1:_0x2eda1d[_0x1c32ea(0x1c5)]};dbCoinResults[_0x1c32ea(0x25e)](_0x1c32ea(0x269))[_0x1c32ea(0x307)]({'coin':_0x4873d9[_0x1c32ea(0x2e2)]})[_0x1c32ea(0x30f)](_0x54fd88)[_0x1c32ea(0x1cf)]();if(!_0x19ce44){if(_0x4873d9[_0x1c32ea(0x29b)]&&_0x4873d9[_0x1c32ea(0x29b)][_0x1c32ea(0x31b)]==_0x1c32ea(0x2a9)){const _0x4242e2=currentCoins[_0x1c32ea(0x307)](_0x5c28af=>_0x5c28af[_0x1c32ea(0x2e2)]==_0x1c32ea(0x2a9));if(_0x4242e2){let _0x2d5eff=dbCoinResults[_0x1c32ea(0x25e)](_0x1c32ea(0x269))[_0x1c32ea(0x307)]({'coin':_0x1c32ea(0x2a9)})['value']();_0x54fd88={..._0x2d5eff,'number':_0x4242e2['number']},dbCoinResults[_0x1c32ea(0x25e)](_0x1c32ea(0x269))[_0x1c32ea(0x307)]({'coin':'BNB'})[_0x1c32ea(0x30f)](_0x54fd88)[_0x1c32ea(0x1cf)]();}}}}async function placeOrder(_0x52d2d1){const _0xc2c14b=_0x4aaaad,_0x5b9b5e=config[_0xc2c14b(0x2b7)]==_0xc2c14b(0x1b9)?_0xc2c14b(0x1b9):_0xc2c14b(0x264);if(lockOrders==ORDERS[_0xc2c14b(0x1db)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xc2c14b(0x1d1)],allOrdersPlaced=![],validateOrdersState=_0xc2c14b(0x2e0);let _0xb1070a=![];lastOrders=[];for(const _0x285364 of _0x52d2d1){let _0x47b271,_0x5242a6,_0x4b880f,_0x2b0113,_0x356736,_0x4e048a=_0x285364[_0xc2c14b(0x296)];try{const _0x21afb2=await exchange[_0xc2c14b(0x231)](_0x4e048a);_0x47b271=_0x285364[_0xc2c14b(0x310)]?0x1/_0x285364[_0xc2c14b(0x28c)]:_0x285364['last'],_0x5242a6=_0x21afb2['bid'],_0x4b880f=_0x21afb2[_0xc2c14b(0x227)];_0x285364[_0xc2c14b(0x310)]?(_0x2b0113=_0x285364[_0xc2c14b(0x2d2)]=='buy'?_0xc2c14b(0x286):'buy',_0x356736=Math[_0xc2c14b(0x29a)](_0x285364[_0xc2c14b(0x21c)])/_0x47b271):(_0x2b0113=_0x285364[_0xc2c14b(0x2d2)],_0x356736=Math[_0xc2c14b(0x29a)](_0x285364[_0xc2c14b(0x21c)]));_0x5b9b5e==_0xc2c14b(0x264)&&(config[_0xc2c14b(0x2b7)]==_0xc2c14b(0x238)&&(_0x47b271=_0x2b0113==_0xc2c14b(0x1b7)?_0x5242a6:_0x4b880f),config['ordertype']==_0xc2c14b(0x25b)&&(_0x47b271=_0x2b0113==_0xc2c14b(0x1b7)?_0x4b880f:_0x5242a6));_0x356736=formatResult(_0x356736,0x8),_0x47b271=formatResult(_0x47b271,0x8);const _0x1ab463=_0x2b0113==_0xc2c14b(0x286)?config['emojisell']?String['fromCodePoint']('0x'+config[_0xc2c14b(0x1d7)])+'\x20':'':config[_0xc2c14b(0x20b)]?String[_0xc2c14b(0x232)]('0x'+config['emojibuy'])+'\x20':'',_0x134416=_0x5b9b5e==_0xc2c14b(0x1b9)?'Market':config[_0xc2c14b(0x2b7)]==_0xc2c14b(0x238)?_0xc2c14b(0x257):'Limit\x20(low-margin)',_0x274892=(Math[_0xc2c14b(0x1b8)](Math[_0xc2c14b(0x214)]()*0x35a4e900)+0x5f5e100)[_0xc2c14b(0x2f5)]();lastOrders[_0xc2c14b(0x2d4)]({'customId':_0x274892,'symbol':_0x4e048a,'coin':_0x285364[_0xc2c14b(0x2e2)],'amount':_0x356736,'price':_0x47b271,'side':_0x2b0113,'reverse':_0x285364['reverse'],'filled':0x0});if(_0x5b9b5e==_0xc2c14b(0x1b9))logHistory('order',''+_0x1ab463+_0x134416+'\x20order:\x20'+_0x4e048a+'\x20'+_0x2b0113+'\x20#'+formatResult(_0x356736,0x8)+'\x20@'+formatResult(_0x47b271,0x8));else logHistory('order',''+_0x1ab463+_0x134416+_0xc2c14b(0x2b5)+_0x4e048a+'\x20'+_0x2b0113+'\x20#'+formatResult(_0x356736,0x8)+'\x20@'+formatResult(_0x47b271,0x8));let _0x575235;if(_0x5b9b5e==_0xc2c14b(0x1b9))_0x575235=await exchange[_0xc2c14b(0x1cd)](_0x4e048a,_0x5b9b5e,_0x2b0113,_0x356736,undefined);else _0x575235=await exchange[_0xc2c14b(0x1cd)](_0x4e048a,_0x5b9b5e,_0x2b0113,_0x356736,_0x47b271);logger['debug'](_0xc2c14b(0x260)+_0x575235['id']+_0xc2c14b(0x1af)+_0x274892);const _0x4b87c9=lastOrders[_0xc2c14b(0x1f7)]-0x1;if(_0x4b87c9>=0x0&&lastOrders[_0x4b87c9][_0xc2c14b(0x1f3)]==_0x274892){lastOrders[_0x4b87c9][_0xc2c14b(0x2ad)]=_0x575235['id'];if(_0x575235['amount'])lastOrders[_0x4b87c9]['amount']=_0x575235[_0xc2c14b(0x246)];if(_0x575235[_0xc2c14b(0x1d0)])lastOrders[_0x4b87c9][_0xc2c14b(0x1d0)]=_0x575235['price'];lastOrders[_0x4b87c9][_0xc2c14b(0x29b)]=_0x575235[_0xc2c14b(0x29b)];}if(config[_0xc2c14b(0x2f9)]!=0x0){let _0x541a51=null;if(cooldownTracker['length']==config[_0xc2c14b(0x2f9)]-0x1)_0x541a51=cooldownTracker[_0xc2c14b(0x32f)]();const _0x5990cb=getTimeStamp();cooldownTracker['push'](_0x5990cb);if(_0x541a51){const _0x242805=fns[_0xc2c14b(0x209)](new Date(_0x5990cb),new Date(_0x541a51));if(_0x242805<cooldownInterval){logHistory(_0xc2c14b(0x229),_0xc2c14b(0x2b6)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xc2c14b(0x1c2)),coolingDown=!![];break;}}}}catch(_0x4594d1){if(_0x4594d1['toString']()[_0xc2c14b(0x30c)](_0xc2c14b(0x28f)))lastOrders=lastOrders[_0xc2c14b(0x245)](_0x3ea6ee=>_0x3ea6ee[_0xc2c14b(0x296)]!=_0x4e048a),logHistory(_0xc2c14b(0x229),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4e048a),_0xb1070a=!![];else{if(_0x4594d1[_0xc2c14b(0x2f5)]()[_0xc2c14b(0x30c)](_0xc2c14b(0x2cd)))lastOrders=lastOrders['filter'](_0x39c972=>_0x39c972[_0xc2c14b(0x296)]!=_0x4e048a),logHistory('error',_0xc2c14b(0x1ba)+_0x4e048a),_0xb1070a=!![];else{if(_0x4594d1[_0xc2c14b(0x2f5)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0xc2c14b(0x245)](_0x502228=>_0x502228['symbol']!=_0x4e048a),logHistory(_0xc2c14b(0x229),'Order\x20is\x20invalid:\x20'+_0x4e048a),_0xb1070a=!![];else _0x4594d1[_0xc2c14b(0x2f5)]()['includes'](_0xc2c14b(0x25d))?(lastOrders=lastOrders[_0xc2c14b(0x245)](_0x3047a=>_0x3047a[_0xc2c14b(0x296)]!=_0x4e048a),logHistory(_0xc2c14b(0x229),_0xc2c14b(0x31f)+_0x4e048a),_0xb1070a=!![]):(lastOrders=lastOrders[_0xc2c14b(0x245)](_0x1487d9=>_0x1487d9[_0xc2c14b(0x296)]!=_0x4e048a),await handleError(_0x4594d1,_0xc2c14b(0x326),_0x4e048a));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4a5738=config[_0xc2c14b(0x2b7)]==_0xc2c14b(0x1b9)?validateOrderTimeout*0x3c*0x3e8:config[_0xc2c14b(0x27b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4017eb=_0xc2c14b;validateOrders(_0x4017eb(0x31e));},_0x4a5738);}else unlockOrders();_0xb1070a&&config[_0xc2c14b(0x233)]&&await pauseBot(_0xc2c14b(0x23f)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xc2c14b(0x1b5),_0xc2c14b(0x1ef)));}else{if(coolingDown)!config[_0xc2c14b(0x233)]&&logHistory('error',_0xc2c14b(0x1de));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0xc2c14b(0x2b7)]=='market'?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xc2c14b(0x229),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x32710f){const _0x415a90=_0x4aaaad,_0x53a9d4={...config,'openOrders':_0x32710f};let _0x2d797c=dbConfig['get'](_0x415a90(0x313))[_0x415a90(0x307)]({'botID':botID})[_0x415a90(0x204)]();_0x2d797c&&dbConfig[_0x415a90(0x25e)](_0x415a90(0x313))['find']({'botID':botID})['assign'](_0x53a9d4)[_0x415a90(0x1cf)]();}function _0x12a6(){const _0x42bdfa=['red_yellow_blue','filled','apiSecret','Net\x20effect','***','placeOrder','toString','starting-balance-','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','cooldown','DDoSProtection','/backup/','cloneDeep','performance','spot','61824pYzUXB','getSeconds','has','USDC','fetchClosedOrders','entries','watchTransactions','change24h','find','ETH','forEach','fetchTickers','order','includes','2\x20-\x20FILLED\x20unknown\x20order:\x20','-------------------------------\x0a','assign','reverse','InvalidNonce','startdate','bot','emitHistory','eur','remove','excluded','botID','recreate','substring','currency','ongoing','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','final','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','timeshift','initclient','net-basecoin','additional\x20symbols\x20','\x20-\x20bot\x20not\x20started','getPortfolio(2)','placeOrder()','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','limits','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','watchOrders','\x20>\x20','sells','Unknown\x20error\x20occured','2.3.5','shift','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20value','2\x20-\x20Validate\x20orders:\x20','\x20minutes\x20-\x20','85616DPDxNA','Uncaught\x20Exception:','Failed\x20to\x20load\x20coin\x20data\x20for\x20','botname','path','getPortfolio','\x20|\x20Custom\x20ID:\x20','sha256','cancel','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','15gueJpo','add','success','\x20:\x20','buy','floor','market','Order\x20amount\x20is\x20invalid:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','defaults','message','slice','-results.json','OnMaintenance','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20hour','padEnd','(((.+)+)+)+$','buys','toLowerCase','debug','progress','basecoinvalue','Exchange','lowdb','\x20API\x20key\x20is\x20invalid','createOrder','apiPassword','write','price','LOCKED','parseISO','cancelLoading','closed','freeze','Error\x20while\x20deleting\x20files:\x20','emojisell','7130TDkYPp','API-key\x20format\x20invalid','2.6.0','UNLOCKED','pro','getMonth','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','join','getHours','highest','Unfilled\x20order(s)\x20canceled\x20after\x20','existsSync','USDP','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','exec','basecoin','2805677PUkkHB','hybrid-crypto-js','password','parse','balancing\x20resumed','logs','getDate','Cooldown\x20ended\x20-\x20balancing\x20resumed','full','stringify','configuration-stored','customId','-events.json','page','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','length','usd','orderstatus','\x20closed\x20the\x20connection','Uncaught\x20ExchangeError:','split','UNLOCKING','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','total','storeConfiguration','getFullYear','************','close','value','mkdirSync','balances','2\x20-\x20FILLED\x20known\x20order:\x20','recovery','differenceInSeconds','Order\x20filled:\x20','emojibuy','%\x20(','1512108THhlqV','getCoinNumber()','Net\x20','</pre>','\x20minutes','\x20network\x20error','restart','random','RequestTimeout','average','leftTxt','threshold','amountToPrecision','datetime','remainingSymbols','trade','delta','realized','./config/','isEqual','\x20exchange','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','<b>','open','fees','ask','number','error','format','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','-config.json','Pausing\x20for\x20','running','loading-canceled','sendMetricsTelegram','fetchTicker','fromCodePoint','headless','portfolio','Manual\x20balancing\x20required','ORDERS.UNLOCKING','toFixed','limit-high','toggleBotMode','RSA-OAEP','colorscheme','Saving\x20configuration','percentage','padStart','Avoiding\x20continuous\x20order\x20attempts','USDT','No\x20more\x20open\x20orders\x20-\x20','cancelOrder','OrderNotFound','map','filter','amount','canceled','log','event','apiKey','breakeven','configuration','string','getMinutes','\x20|\x20highest\x20fee:\x20','/output-000.log','type','target','AuthenticationError','exchanges','search','NetworkError','Limit\x20(high-margin)','BNB/','milliseconds',':\x20timer\x20>','limit-low','recreateCoinResults()','must\x20be\x20greater\x20than\x20minimum\x20amount','get','Order(s)\x20not\x20validated\x20after\x20','ID:\x20','fetchOpenOrders','yargs/yargs','InsufficientFunds','limit','getPortfolio(1)','showname','/USD','sort','coins','unlinkSync','exchange','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','ticker','args','getCoins()','startnumber','showConfig','Binance','\x20|\x20Error\x20details:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','none','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','bots','fetchBalance','round','ORDERS.LOCKED','timeout','liquidity','autoliquidity','data',':\x20Bot\x20','set','-performance.json','cancelOrders()','enabled','Initializing\x20coin\x20results','\x20portfolio:</b>\x20\x0a\x0a','sell','rightTxt','bb-secure.json','function','watchTrades','indexOf','last','startprice','startsWith','MIN_NOTIONAL','recent20','apply','keys','kill','Bot\x20','getTime','symbol','version','RateLimitExceeded','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','abs','fee','no\x20open\x20orders','USD','send','distribution','time','date','\x20|\x20','yyyy/MM/dd','min','getPortfolio(0)','offset','net-fiat','storeFiat','BNB','cost','fiat','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','orderId','change','ccxt','privateKey','added','\x20|\x20exchange:\x20','removed','exchange\x20reloaded','\x20order:\x20','Executed\x20','ordertype','\x20>\x20[DEBUG]\x20','606DEBLZZ','openOrders','timestamp','BTC','uncaughtException','argv','event-history','valid','max','\x20change','loadMarkets','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','.json','Portfolio\x20change\x20detected:\x20','1\x20-\x20Validate\x20orders:\x20','ExchangeNotAvailable','status','\x20not\x20available','EUR','Invalid\x20quantity','ORDERS.UNLOCKED','BUSD','warning','settings','side','\x20exchange\x20error','push','replace','1\x20-\x20Handle\x20open\x20orders','util','changes','date-fns','Invalid\x20API\x20key\x20or\x20secret\x20entered','coin-loading-progress','<b>Bot\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','<pre>','36848yRAduQ','initial','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','coin','./logs/','onepagemode','no\x20additional\x20symbols','deleteHistoryAlerts','1404384mrOgYv','sortBy','secure','Reset\x20|\x20','decrypt','bot-','Transaction\x20detection\x20blocked','getStartingBalances'];_0x12a6=function(){return _0x42bdfa;};return _0x12a6();}function restoreOrders(){const _0x326fb5=_0x4aaaad;let _0x4bb37e;config[_0x326fb5(0x2ba)]&&allOpenOrders['forEach'](_0x389b57=>{const _0x23d993=_0x326fb5,_0x1dc473=config[_0x23d993(0x2ba)][_0x23d993(0x307)](_0xb0b001=>_0xb0b001[_0x23d993(0x2ad)]==_0x389b57['id']);_0x1dc473&&(lastOrders[_0x23d993(0x2d4)](_0x1dc473),_0x4bb37e=_0x389b57[_0x23d993(0x2bb)]);});if(lastOrders[_0x326fb5(0x1f7)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x326fb5(0x31c),allOrdersPlaced=!![];const _0x4bd624=new Date()['getTime'](),_0x31fe9a=config[_0x326fb5(0x2b7)]==_0x326fb5(0x1b9)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4bb37e+_0x31fe9a>_0x4bd624){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x297e7a=_0x326fb5;validateOrders(_0x297e7a(0x31e));},_0x4bb37e+_0x31fe9a-_0x4bd624);}else validateOrders(_0x326fb5(0x31e));}}async function sendMetricsTelegram(){const _0x1d8e3a=_0x4aaaad;if(!coinsLoaded){process[_0x1d8e3a(0x29e)]({'telegrammsg':_0x1d8e3a(0x299)},_0x2e5a61=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x288937='';if(config[_0x1d8e3a(0x266)])_0x288937=_0x1d8e3a(0x224)+config[_0x1d8e3a(0x1ac)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x288937=_0x1d8e3a(0x2dc)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x8212ea=getKPIs('basecoin'),_0x5df74c=getKPIs(_0x1d8e3a(0x2ab),config['fiat']),_0x50904f=getKPIs('net-basecoin'),_0x4cc0dc=getKPIs(_0x1d8e3a(0x2a7),config[_0x1d8e3a(0x2ab)]);_0x288937+='<pre>',_0x288937+=_0x8212ea['leftTxt']+_0x1d8e3a(0x1b6)+_0x8212ea[_0x1d8e3a(0x204)]+'\x0a',_0x288937+=_0x8212ea[_0x1d8e3a(0x287)]+':\x20'+_0x8212ea[_0x1d8e3a(0x2ae)]+'%\x0a',_0x288937+=_0x5df74c[_0x1d8e3a(0x217)]+_0x1d8e3a(0x1b6)+_0x5df74c[_0x1d8e3a(0x204)]+'\x0a',_0x288937+=_0x5df74c['rightTxt']+':\x20'+_0x5df74c['change']+'%\x0a',_0x288937+=_0x50904f['leftTxt']+':\x20'+_0x50904f[_0x1d8e3a(0x204)]+'\x20('+config[_0x1d8e3a(0x1e7)]+')\x0a',_0x288937+=_0x50904f[_0x1d8e3a(0x287)]+':\x20'+_0x50904f[_0x1d8e3a(0x2ae)]+'%\x20('+config['basecoin']+')\x0a',_0x288937+=_0x4cc0dc[_0x1d8e3a(0x217)]+':\x20'+_0x4cc0dc[_0x1d8e3a(0x204)]+'\x20('+config[_0x1d8e3a(0x2ab)]+')\x0a',_0x288937+=_0x4cc0dc['rightTxt']+':\x20'+_0x4cc0dc[_0x1d8e3a(0x2ae)]+_0x1d8e3a(0x20c)+config[_0x1d8e3a(0x2ab)]+')\x0a',_0x288937+=_0x1d8e3a(0x210),process[_0x1d8e3a(0x29e)]({'telegrammsg':_0x288937},_0x2b218d=>{});}async function sendPortfolioTelegram(){const _0x980f99=_0x4aaaad;if(!coinsLoaded){process[_0x980f99(0x29e)]({'telegrammsg':_0x980f99(0x299)},_0x1f52bc=>{});return;}let _0x5e37f8='';if(config['showname'])_0x5e37f8='<b>'+config[_0x980f99(0x1ac)]+_0x980f99(0x285);else _0x5e37f8=_0x980f99(0x2dc)+botID+_0x980f99(0x285);_0x5e37f8+=_0x980f99(0x2de),_0x5e37f8+=_0x980f99(0x30e),_0x5e37f8+=_0x980f99(0x22b),_0x5e37f8+=_0x980f99(0x30e),currentCoins['forEach'](_0x11433f=>{const _0x326ade=_0x980f99;_0x5e37f8+=_0x11433f[_0x326ade(0x2e2)][_0x326ade(0x1c3)](0x7)+'|\x20'+formatPad(_0x11433f[_0x326ade(0x29f)],0x2,0x6)+'|\x20'+formatPad(_0x11433f['target'],0x2,0x6)+'|\x20'+formatPad(_0x11433f[_0x326ade(0x21d)]*0x64,0x2,0x6)+'\x0a';}),_0x5e37f8+=_0x980f99(0x210),process[_0x980f99(0x29e)]({'telegrammsg':_0x5e37f8},_0x555b84=>{});}function formatPad(_0x5f0cd9,_0x1410e3,_0x5b2523){const _0x347a32=_0x4aaaad,_0x463495=formatResultString(_0x5f0cd9,_0x1410e3);return _0x463495?_0x463495[_0x347a32(0x23e)](_0x5b2523):''['padStart'](_0x5b2523);}function logHistory(_0x24f2cb,_0x14cb09,_0x5cb770=''){const _0x46bcce=_0x4aaaad;let _0x3756f1={'time':getTimeStamp(),'type':_0x24f2cb,'event':_0x14cb09};dbLogs[_0x46bcce(0x25e)](_0x46bcce(0x1ed))['push'](_0x3756f1)[_0x46bcce(0x1cf)]();if(_0x5cb770=='')_0x5cb770=_0x14cb09;proxyEmit(_0x46bcce(0x249),{'log':_0x3756f1,'summary':_0x5cb770}),process['send']({'telegram':{..._0x3756f1,'botname':config[_0x46bcce(0x1ac)],'showname':config['showname']}},_0x5103ba=>{}),logger['full'](''+_0x3756f1['event']);}function emitHistory(_0x49e505={}){const _0x21b0ad=_0x4aaaad;Object['keys'](_0x49e505)['length']==0x0&&(_0x49e505={'type':[_0x21b0ad(0x30b),_0x21b0ad(0x249)],'event':'','page':0x1});if(_0x49e505['type'][_0x21b0ad(0x30c)](_0x21b0ad(0x249)))_0x49e505['type']['splice'](_0x49e505[_0x21b0ad(0x251)][_0x21b0ad(0x28b)](_0x21b0ad(0x249)),0x1,_0x21b0ad(0x229),_0x21b0ad(0x2d0),_0x21b0ad(0x1b5));if(dbLogs[_0x21b0ad(0x301)]('logs')[_0x21b0ad(0x204)]()){let _0xee2078=dbLogs[_0x21b0ad(0x25e)]('logs')[_0x21b0ad(0x245)](_0x4f9747=>{const _0x27b24d=_0x21b0ad;if(_0x49e505[_0x27b24d(0x251)][_0x27b24d(0x1f7)]==0x0)return![];else return _0x49e505['type'][_0x27b24d(0x30c)](_0x4f9747[_0x27b24d(0x251)]);})[_0x21b0ad(0x245)](_0xf4fa4d=>{const _0x1d5872=_0x21b0ad;if(_0x49e505[_0x1d5872(0x249)]=='')return!![];else return _0xf4fa4d[_0x1d5872(0x249)][_0x1d5872(0x1c6)]()[_0x1d5872(0x30c)](_0x49e505['event'][_0x1d5872(0x1c6)]());})[_0x21b0ad(0x2e8)](_0x21b0ad(0x2a0)),_0x362ad7=_0xee2078['value']()['length'];_0xee2078=_0xee2078[_0x21b0ad(0x310)]()[_0x21b0ad(0x1be)]((_0x49e505[_0x21b0ad(0x1f5)]-0x1)*logPageSize,_0x49e505['page']*logPageSize-0x1)[_0x21b0ad(0x310)]()[_0x21b0ad(0x204)](),proxyEmit(_0x21b0ad(0x2bf),{'logs':_0xee2078,'total':_0x362ad7});}else proxyEmit(_0x21b0ad(0x2bf),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xc022a7){const _0x3615b7=_0x4aaaad;if(dbLogs[_0x3615b7(0x301)](_0x3615b7(0x1ed))[_0x3615b7(0x204)]()){const _0x5007f7=dbLogs[_0x3615b7(0x25e)](_0x3615b7(0x1ed))[_0x3615b7(0x2e8)](_0x3615b7(0x2a0))[_0x3615b7(0x245)](_0x146c27=>{const _0x5a8982=_0x3615b7;return _0x146c27['type']==_0x5a8982(0x30b);})[_0x3615b7(0x204)]();dbLogs['get'](_0x3615b7(0x1ed))[_0x3615b7(0x316)]()['write'](),dbLogs['get'](_0x3615b7(0x1ed))['assign'](_0x5007f7)['write'](),emitHistory(_0xc022a7);}}async function pauseBot(_0x445298=''){const _0x23779e=_0x4aaaad,_0x593acb=new Date()[_0x23779e(0x295)]();if(!lastErrorShown||_0x593acb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x593acb;!lastBotPause?(lastBotPause=_0x593acb,consecutivePauses=0x1):(_0x593acb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x23779e(0x29e)]({'stop':_0x23779e(0x213)},_0x4dbfb0=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x445298)_0x445298+='\x20|\x20';logHistory(_0x23779e(0x229),_0x445298+_0x23779e(0x22d)+pauseBotInterval/0xea60+_0x23779e(0x211)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0xd37519=_0x4aaaad;process[_0xd37519(0x29e)]({'stop':_0xd37519(0x293)},_0x2d59b8=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1daf42,_0x5e56a7){const _0x14faf2=_0x4aaaad;if(_0x1daf42['toString']()[_0x14faf2(0x30c)](_0x14faf2(0x1d9)))return logHistory(_0x14faf2(0x229),config['exchange']+_0x14faf2(0x1e5)),![];else{if(_0x1daf42[_0x14faf2(0x2f5)]()['includes'](_0x14faf2(0x31d)))return logHistory(_0x14faf2(0x229),config[_0x14faf2(0x26b)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x1daf42[_0x14faf2(0x2f5)]()['includes'](_0x14faf2(0x253)))return logHistory('error',config[_0x14faf2(0x26b)]+_0x14faf2(0x331)),logHistory(_0x14faf2(0x229),_0x14faf2(0x2c5)),![];else await handleError(_0x1daf42,_0x5e56a7);}}}async function handleError(_0xfd8442,_0x430b65,_0x1f425b=''){const _0x5f238c=_0x4aaaad,_0x31940b=config[_0x5f238c(0x26b)]||_0x5f238c(0x1ca);if(_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x2fa))||_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x298)))await pauseBot(config['exchange']+_0x5f238c(0x327));else{if(_0xfd8442[_0x5f238c(0x2f5)]()['includes'](_0x5f238c(0x2c9))||_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x1c0)))await pauseBot(config[_0x5f238c(0x26b)]+_0x5f238c(0x2cb));else{if(_0xfd8442['toString']()['includes'](_0x5f238c(0x215)))await pauseBot(config[_0x5f238c(0x26b)]+'\x20not\x20responding');else{if(_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x330)))await pauseBot(config[_0x5f238c(0x26b)]+_0x5f238c(0x1fa));else{if(_0xfd8442[_0x5f238c(0x2f5)]()['includes'](_0x5f238c(0x276)))logHistory(_0x5f238c(0x229),_0x430b65+_0x5f238c(0x2ac)),logHistory(_0x5f238c(0x229),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x311)))logHistory('error',_0x430b65+_0x5f238c(0x1c1)),logHistory(_0x5f238c(0x229),_0x5f238c(0x329)),await killBot();else{if(_0xfd8442 instanceof ccxt[_0x5f238c(0x256)])logger[_0x5f238c(0x1c7)]('Uncaught\x20NetworkError:',_0xfd8442),await pauseBot(config[_0x5f238c(0x26b)]+_0x5f238c(0x212));else{if(_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)]('API-key\x20format\x20invalid'))logHistory(_0x5f238c(0x229),_0x430b65+_0x5f238c(0x2a2)+config[_0x5f238c(0x26b)]+_0x5f238c(0x1cc)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xfd8442[_0x5f238c(0x2f5)]()[_0x5f238c(0x30c)](_0x5f238c(0x31d)))logHistory(_0x5f238c(0x229),_0x430b65+_0x5f238c(0x2a2)+config[_0x5f238c(0x26b)]+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x5f238c(0x329)),await killBot();else{if(_0xfd8442[_0x5f238c(0x2f5)]()['includes'](_0x5f238c(0x253)))logHistory(_0x5f238c(0x229),_0x430b65+'\x20|\x20'+config['exchange']+_0x5f238c(0x2f8)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xfd8442[_0x5f238c(0x2f5)]()['includes'](_0x5f238c(0x263)))logHistory(_0x5f238c(0x229),_0x430b65+_0x5f238c(0x2dd)+_0x1f425b);else _0xfd8442 instanceof ccxt['ExchangeError']?(logger[_0x5f238c(0x1c7)](_0x5f238c(0x1fb),_0xfd8442),logHistory(_0x5f238c(0x229),_0x430b65+_0x5f238c(0x2a2)+config['exchange']+_0x5f238c(0x2d3))):(logger[_0x5f238c(0x1f0)](_0x430b65+_0x5f238c(0x273),_0xfd8442),await pauseBot(_0x5f238c(0x32d)));}}}}}}}}}}}function formatResult(_0x1c5388,_0x458dfb){const _0x47f06e=_0x4aaaad;return parseFloat(_0x1c5388[_0x47f06e(0x237)](_0x458dfb));}function formatResultTruncate(_0x585594,_0x4b9b01){const _0x28105b=_0x4aaaad;let _0x1ab191=formatResultString(_0x585594,0xa),_0x20018b=_0x1ab191[_0x28105b(0x28b)]('.');return _0x20018b!=-0x1&&(_0x1ab191=_0x1ab191[_0x28105b(0x1be)](0x0,_0x20018b+_0x4b9b01+0x1)),Number(_0x1ab191);}function formatResultString(_0xff0dc2,_0x2e09e3){const _0x464787=_0x4aaaad;let _0x4042dd;if(!(''+_0xff0dc2)['includes']('e'))_0x4042dd=+(Math['round'](_0xff0dc2+'e+'+_0x2e09e3)+'e-'+_0x2e09e3);else{let _0x4cd7c0=(''+_0xff0dc2)[_0x464787(0x1fc)]('e'),_0x4732e5='';+_0x4cd7c0[0x1]+_0x2e09e3>0x0&&(_0x4732e5='+'),_0x4042dd=+(Math[_0x464787(0x279)](+_0x4cd7c0[0x0]+'e'+_0x4732e5+(+_0x4cd7c0[0x1]+_0x2e09e3))+'e-'+_0x2e09e3);}return Number(_0x4042dd)[_0x464787(0x237)](_0x2e09e3);}function getServerTime(){const _0x3a0ecb=_0x4aaaad,_0x4e9db5=new Date();return _0x4e9db5[_0x3a0ecb(0x201)]()+'/'+(_0x4e9db5[_0x3a0ecb(0x1dd)]()+0x1)[_0x3a0ecb(0x2f5)]()[_0x3a0ecb(0x23e)](0x2,'0')+'/'+_0x4e9db5[_0x3a0ecb(0x1ee)]()[_0x3a0ecb(0x2f5)]()[_0x3a0ecb(0x23e)](0x2,'0')+'\x20'+_0x4e9db5[_0x3a0ecb(0x1e0)]()[_0x3a0ecb(0x2f5)]()[_0x3a0ecb(0x23e)](0x2,'0')+':'+_0x4e9db5[_0x3a0ecb(0x24e)]()['toString']()[_0x3a0ecb(0x23e)](0x2,'0')+':'+_0x4e9db5[_0x3a0ecb(0x300)]()[_0x3a0ecb(0x2f5)]()[_0x3a0ecb(0x23e)](0x2,'0');}function getTimeStamp(){const _0x3ddf2b=_0x4aaaad,_0x23d849=shiftedTime();return _0x23d849[_0x3ddf2b(0x201)]()+'/'+(_0x23d849[_0x3ddf2b(0x1dd)]()+0x1)[_0x3ddf2b(0x2f5)]()['padStart'](0x2,'0')+'/'+_0x23d849[_0x3ddf2b(0x1ee)]()[_0x3ddf2b(0x2f5)]()[_0x3ddf2b(0x23e)](0x2,'0')+'\x20'+_0x23d849[_0x3ddf2b(0x1e0)]()[_0x3ddf2b(0x2f5)]()['padStart'](0x2,'0')+':'+_0x23d849[_0x3ddf2b(0x24e)]()[_0x3ddf2b(0x2f5)]()[_0x3ddf2b(0x23e)](0x2,'0')+':'+_0x23d849[_0x3ddf2b(0x300)]()[_0x3ddf2b(0x2f5)]()[_0x3ddf2b(0x23e)](0x2,'0');}function getDate(){const _0x237a18=_0x4aaaad,_0x5d003a=shiftedTime();return _0x5d003a[_0x237a18(0x201)]()+'/'+(_0x5d003a['getMonth']()+0x1)['toString']()[_0x237a18(0x23e)](0x2,'0')+'/'+_0x5d003a['getDate']()['toString']()[_0x237a18(0x23e)](0x2,'0');}function getHour(){const _0x2725e2=_0x4aaaad,_0x487b14=shiftedTime();return _0x487b14['getHours']()[_0x2725e2(0x2f5)]()['padStart'](0x2,'0');}function sleep(_0x4513c7){return new Promise(_0x3d23d6=>setTimeout(_0x3d23d6,_0x4513c7));}function shiftedTime(){const _0x4da70d=_0x4aaaad,_0x19b16d=new Date();let _0x4d9f01=_0x19b16d;if(config&&config['timeshift']!==0x0)_0x4d9f01=fns[_0x4da70d(0x1b4)](_0x19b16d,{'hours':config[_0x4da70d(0x320)]});return _0x4d9f01;}function timer(_0x592a70){const _0xaa2ae3=_0x4aaaad,_0x43c2d6=new Date();!lasttime?console['log'](getTimeStamp()+_0xaa2ae3(0x25a),_0x592a70,_0x43c2d6):console[_0xaa2ae3(0x248)](getTimeStamp()+_0xaa2ae3(0x25a),_0x592a70,(_0x43c2d6-lasttime)/0x3e8),lasttime=_0x43c2d6;}