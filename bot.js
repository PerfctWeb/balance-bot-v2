const _0x323520=_0x377d;(function(_0x58379a,_0x498596){const _0x59ffcc=_0x377d,_0x1bb622=_0x58379a();while(!![]){try{const _0x2a3975=parseInt(_0x59ffcc(0x16c))/0x1*(parseInt(_0x59ffcc(0x1ce))/0x2)+-parseInt(_0x59ffcc(0x1ae))/0x3*(-parseInt(_0x59ffcc(0x211))/0x4)+parseInt(_0x59ffcc(0x191))/0x5+-parseInt(_0x59ffcc(0x229))/0x6+-parseInt(_0x59ffcc(0x1bb))/0x7+-parseInt(_0x59ffcc(0x1d3))/0x8+parseInt(_0x59ffcc(0x14c))/0x9;if(_0x2a3975===_0x498596)break;else _0x1bb622['push'](_0x1bb622['shift']());}catch(_0xf9e663){_0x1bb622['push'](_0x1bb622['shift']());}}}(_0x3449,0xd684c));const _0x438d51=function(){let _0x444c13=!![];return function(_0x2bc06d,_0x5d31c7){const _0x55df79=_0x444c13?function(){const _0x6467=_0x377d;if(_0x5d31c7){const _0x48ddfc=_0x5d31c7[_0x6467(0x18b)](_0x2bc06d,arguments);return _0x5d31c7=null,_0x48ddfc;}}:function(){};return _0x444c13=![],_0x55df79;};}(),_0x4f2474=_0x438d51(this,function(){const _0x2b9b3d=_0x377d;return _0x4f2474[_0x2b9b3d(0x17c)]()['search']('(((.+)+)+)+$')[_0x2b9b3d(0x17c)]()[_0x2b9b3d(0x152)](_0x4f2474)[_0x2b9b3d(0x14f)](_0x2b9b3d(0x204));});_0x4f2474();'use strict';const ccxt=require(_0x323520(0x1fc)),low=require('lowdb'),FileSync=require(_0x323520(0x1e2)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x323520(0x136)),Crypt=require(_0x323520(0x141))[_0x323520(0x17a)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require('./version.json')['version'],botID=process[_0x323520(0x1cc)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x323520(0x175)](botID))return console['log'](_0x323520(0x1cf)+botID+_0x323520(0x14a)),process[_0x323520(0x1d8)](0x1);const configpath=_0x323520(0x1b7);!fs['existsSync'](configpath)&&fs[_0x323520(0x1f2)](configpath);const configfile=configpath+_0x323520(0x224)+botID+_0x323520(0x20c),logfile=configpath+_0x323520(0x224)+botID+_0x323520(0x1c1),performancefile=configpath+_0x323520(0x224)+botID+_0x323520(0x1f8),coinresultsfile=configpath+_0x323520(0x224)+botID+_0x323520(0x134),settingsfile=configpath+_0x323520(0x1e1),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x323520(0x178)]({'logs':[]})[_0x323520(0x123)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x323520(0x178)]({'bot':[]})[_0x323520(0x123)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x323520(0x178)]({'coins':[]})[_0x323520(0x123)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x323520(0x18f),'symbol':_0x323520(0x147)},'usd':{'coin':'BTCUSDT','symbol':_0x323520(0x192)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x54a4ad)=>{},'debug':(..._0x1f2959)=>{},'notice':(..._0x482ca7)=>{},'info':(..._0x3a7a32)=>{},'warning':(..._0x531194)=>{},'error':async function(..._0xc3e14e){const _0x54d545=_0x323520,_0x349a21=new Date()[_0x54d545(0x1a1)]();if(!lastErrorShown||_0x349a21-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x54d545(0x1a1)](),logHistory(_0x54d545(0x1cd),'WebSockets('+consecutivePauses+_0x54d545(0x1e6));let _0x18044e='';if(_0xc3e14e[0x0])_0x18044e+=_0xc3e14e[0x0];if(_0xc3e14e[0x1]&&_0xc3e14e[0x1][_0x54d545(0x1cd)]&&_0xc3e14e[0x1]['error'][_0x54d545(0x12b)])_0x18044e+=_0x54d545(0x14d)+_0xc3e14e[0x1][_0x54d545(0x1cd)][_0x54d545(0x12b)];logging(_0x54d545(0x1ea)+consecutivePauses+_0x54d545(0x183),''+_0x18044e),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x323520(0x15c),'rsaStandard':_0x323520(0x21d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x323520(0x140)]);process[_0x323520(0x1d6)]({'started':_0x323520(0x128)}),initializeProcessListeners();function proxyEmit(_0x270501,_0x2a13a0=null){const _0x2e47f0=_0x323520;process[_0x2e47f0(0x1d6)]({'function':_0x270501,'args':_0x2a13a0});}function initializeProcessListeners(){process['on']('message',_0x54b31a=>{const _0x5629df=_0x377d;switch(Object[_0x5629df(0x153)](_0x54b31a)[0x0]){case _0x5629df(0x140):_0x54b31a[_0x5629df(0x140)]!=undefined&&(settings['timeshift']=_0x54b31a['timeshift'],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x54b31a['function']){case _0x5629df(0x1a8):initclient();break;case _0x5629df(0x186):emitHistory(_0x54b31a['args']);break;case _0x5629df(0x219):getPortfolio(_0x54b31a[_0x5629df(0x1f0)]);break;case _0x5629df(0x16d):storeConfiguration(_0x54b31a[_0x5629df(0x1f0)]);break;case'storeHeadless':storeHeadless(_0x54b31a[_0x5629df(0x1f0)]);break;case _0x5629df(0x203):getStartingBalances();break;case _0x5629df(0x1a4):placeOrder(_0x54b31a['args']);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x52e4c8=_0x323520;if(pidBalances)clearTimeout(pidBalances);if(config[_0x52e4c8(0x1ed)]!=''){await initExchange(config[_0x52e4c8(0x1ed)],config[_0x52e4c8(0x158)]);let _0x28203e=await loadSymbols();_0x28203e&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4c1621,_0x1e5fef){const _0x396f80=_0x323520,_0x5e76b8=ccxt[config['exchange']];let _0x33d5f1;switch(config[_0x396f80(0x212)]){case'binance':_0x33d5f1=_0x396f80(0x220);break;case _0x396f80(0x157):_0x33d5f1=_0x396f80(0x1ff);break;default:_0x33d5f1=_0x396f80(0x220);}exchange=new _0x5e76b8({'apiKey':_0x4c1621,'secret':_0x1e5fef,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4c1621,'api_secret':_0x1e5fef,'beautify':!![],'wsUrl':_0x33d5f1},logger),config['exchange']==_0x396f80(0x157)&&(stablecoins={'eur':{'coin':_0x396f80(0x22a),'symbol':_0x396f80(0x18e)},'usd':{'coin':_0x396f80(0x208),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x61ba11=_0x323520;let _0x39ee06;try{markets=await exchange[_0x61ba11(0x1d0)](),allSymbols=exchange['symbols'][_0x61ba11(0x1db)](_0x433bec=>{const _0x23723f=_0x61ba11;return _0x433bec[_0x23723f(0x1e5)](_0x23723f(0x206))&&!_0x433bec['includes'](_0x23723f(0x1b3));}),_0x39ee06=!![];}catch(_0x585cd5){await handleError(_0x585cd5,_0x61ba11(0x144)),_0x39ee06=![];}return _0x39ee06;}async function initbot(){const _0xe3de65=_0x323520;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x33b2e3=dbCoinResults['get'](_0xe3de65(0x1ca))[_0xe3de65(0x149)]();if(_0x33b2e3[_0xe3de65(0x138)]==0x0)await resetCoinResults();}async function initclient(){const _0x54b35a=_0x323520;proxyEmit('configuration',emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x54b35a(0x14b),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x53953e=_0x323520;wsinitialized=![];ws1&&(ws1[_0x53953e(0x12f)](_0x5c30d1=>{try{wsClient['closeWs'](_0x5c30d1);}catch(_0xbb8b28){}}),ws1=[]);if(ws2){try{wsClient[_0x53953e(0x193)](ws2);}catch(_0x2f601b){}ws2=null;}}async function initws(){const _0x1a1909=_0x323520;cleanws();let _0x3c8cf2=[];currentCoins['forEach'](_0x26f317=>{const _0x27b49d=_0x377d;if(_0x26f317['coin']!='BTC')_0x3c8cf2[_0x27b49d(0x1f3)](noslash(_0x26f317[_0x27b49d(0x1b6)]));});if(!_0x3c8cf2[_0x1a1909(0x1e5)](stablecoins[_0x1a1909(0x1ac)][_0x1a1909(0x226)]))_0x3c8cf2[_0x1a1909(0x1f3)](stablecoins[_0x1a1909(0x1ac)]['coin']);if(!_0x3c8cf2[_0x1a1909(0x1e5)](stablecoins[_0x1a1909(0x176)][_0x1a1909(0x226)]))_0x3c8cf2[_0x1a1909(0x1f3)](stablecoins[_0x1a1909(0x176)]['coin']);if(!_0x3c8cf2[_0x1a1909(0x1e5)]('BNBBTC'))_0x3c8cf2[_0x1a1909(0x1f3)]('BNBBTC');try{_0x3c8cf2[_0x1a1909(0x12f)]((_0x9d2246,_0x51ffba)=>{const _0x336454=_0x1a1909;ws1[_0x51ffba]=wsClient[_0x336454(0x20f)](_0x9d2246,'1m');}),ws2=wsClient[_0x1a1909(0x1b4)](),wsClient['on']('formattedMessage',_0x23a6aa=>{const _0x38747c=_0x1a1909;if(!Array[_0x38747c(0x21f)](_0x23a6aa)&&!_0x23a6aa[_0x38747c(0x181)][_0x38747c(0x1e5)](_0x38747c(0x16f))){if(_0x23a6aa['eventType']===_0x38747c(0x188)){global[_0x38747c(0x1ba)][_0x23a6aa[_0x38747c(0x188)][_0x38747c(0x1b6)]]=_0x23a6aa[_0x38747c(0x188)][_0x38747c(0x21b)];return;}}else{if(!Array['isArray'](_0x23a6aa)&&_0x23a6aa[_0x38747c(0x181)][_0x38747c(0x1e5)](_0x38747c(0x16f))){if(_0x23a6aa[_0x38747c(0x12d)][_0x38747c(0x1e5)](_0x38747c(0x18d))){updateNumberCoins(_0x23a6aa);return;}}}}),wsClient['on']('reconnected',async _0x3a606e=>{currentCoins=await getCoins();});}catch(_0x49ef46){await handleError(_0x49ef46,_0x1a1909(0x132));}let _0x34dc46;while(_0x34dc46!=currentCoins[_0x1a1909(0x138)]-0x1){_0x34dc46=0x0,currentCoins[_0x1a1909(0x12f)](_0x349664=>{const _0x57c6c1=_0x1a1909;if(_0x349664[_0x57c6c1(0x226)]!=_0x57c6c1(0x206)&&global['ticker'][noslash(_0x349664[_0x57c6c1(0x1b6)])])_0x34dc46++;});let _0x48d672=Math[_0x1a1909(0x129)](_0x34dc46/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x1a1909(0x19b),_0x48d672),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x2454a6=_0x323520;let _0x4ae30f=0x0,_0x591e5a=0x0;try{_0x4ae30f=global[_0x2454a6(0x1ba)][stablecoins['eur'][_0x2454a6(0x226)]],_0x591e5a=global[_0x2454a6(0x1ba)][stablecoins[_0x2454a6(0x176)][_0x2454a6(0x226)]];}catch(_0x42bc6f){await handleError(_0x42bc6f,_0x2454a6(0x1c4));}return{'eur':Number(_0x4ae30f),'usd':Number(_0x591e5a)};}async function setStartDatePerformance(_0x3bc368){const _0x562702=_0x323520,_0x4c75e7=fns[_0x562702(0x1c2)](new Date(_0x3bc368[_0x562702(0x205)]),_0x562702(0x1ad));let _0x2f76b0=[];_0x2f76b0[stablecoins[_0x562702(0x1ac)][_0x562702(0x226)]]=await getCloses(stablecoins[_0x562702(0x1ac)][_0x562702(0x1b6)],new Date(_0x3bc368[_0x562702(0x205)]),0x1),_0x2f76b0[stablecoins[_0x562702(0x176)][_0x562702(0x226)]]=await getCloses(stablecoins[_0x562702(0x176)][_0x562702(0x1b6)],new Date(_0x3bc368[_0x562702(0x205)]),0x1);let _0x750074,_0x5a9a58=[];_0x3bc368[_0x562702(0x180)][_0x562702(0x12f)](_0x5ba3f2=>{const _0x33ffa4=_0x562702;!_0x5ba3f2[_0x33ffa4(0x13c)]&&_0x5a9a58['push']({'coin':_0x5ba3f2[_0x33ffa4(0x226)],'number':_0x5ba3f2['startnumber'],'price':_0x5ba3f2['startprice']});}),_0x750074={'date':_0x4c75e7,'eur':_0x2f76b0[stablecoins[_0x562702(0x1ac)]['coin']][0x0],'usd':_0x2f76b0[stablecoins[_0x562702(0x176)][_0x562702(0x226)]][0x0],'coins':_0x5a9a58};let _0x291974=dbPerformance[_0x562702(0x127)]('data')[_0x562702(0x13f)]({'date':_0x4c75e7})[_0x562702(0x149)]();_0x291974?dbPerformance[_0x562702(0x127)](_0x562702(0x1e8))[_0x562702(0x13f)]({'date':_0x4c75e7})[_0x562702(0x196)](_0x750074)[_0x562702(0x123)]():dbPerformance[_0x562702(0x127)]('data')[_0x562702(0x1f3)](_0x750074)['write'](),_0x291974=dbPerformance[_0x562702(0x127)]('data')[_0x562702(0x215)](_0x562702(0x1ef))[_0x562702(0x149)](),_0x291974['forEach'](_0x2acf0c=>{const _0x54f620=_0x562702;_0x2acf0c[_0x54f620(0x1ef)]<_0x4c75e7&&dbPerformance[_0x54f620(0x127)](_0x54f620(0x1e8))[_0x54f620(0x1f4)]({'date':_0x2acf0c[_0x54f620(0x1ef)]})[_0x54f620(0x123)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x2872b0){const _0x18e731=_0x323520;let _0x48dba4,_0x46ea2b=[];logHistory('success',_0x18e731(0x131)),_0x2872b0[_0x18e731(0x180)][_0x18e731(0x12f)](_0x549269=>{const _0x194058=_0x18e731;if(_0x549269['coin']!=_0x194058(0x206)&&!_0x549269[_0x194058(0x13c)])_0x46ea2b['push']({'coin':_0x549269[_0x194058(0x226)],'symbol':_0x549269[_0x194058(0x1b6)]});});let _0xaf4ceb=[];try{const _0x266466=fns[_0x18e731(0x1c2)](fns[_0x18e731(0x207)](_0x2872b0['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x39d6f4 of _0x46ea2b){if(_0x39d6f4[_0x18e731(0x226)]!='BTC')_0x48dba4=await exchange[_0x18e731(0x1c7)](_0x39d6f4[_0x18e731(0x1b6)],Date[_0x18e731(0x1e3)](_0x266466));_0x48dba4[_0x18e731(0x12f)](_0x572280=>{const _0x22cf6=_0x18e731,_0x471934=_0x39d6f4[_0x22cf6(0x1b6)][_0x22cf6(0x1e5)](_0x22cf6(0x19c)),_0x4082f3=fns['format'](fns['parseISO'](_0x572280['datetime']),_0x22cf6(0x1bc)),_0x54aa5a=fns['format'](fns[_0x22cf6(0x207)](_0x572280[_0x22cf6(0x221)]),_0x22cf6(0x1ad));let _0x5082a8;if(_0x572280[_0x22cf6(0x162)]==_0x22cf6(0x159)&&_0x471934==![])_0x5082a8=_0x572280['amount'];if(_0x572280['side']==_0x22cf6(0x159)&&_0x471934==!![])_0x5082a8=-_0x572280[_0x22cf6(0x1dc)]*_0x572280[_0x22cf6(0x12a)];if(_0x572280[_0x22cf6(0x162)]=='sell'&&_0x471934==![])_0x5082a8=-_0x572280[_0x22cf6(0x1dc)];if(_0x572280['side']==_0x22cf6(0x1c0)&&_0x471934==!![])_0x5082a8=_0x572280[_0x22cf6(0x1dc)]*_0x572280['price'];_0xaf4ceb[_0x22cf6(0x1f3)]({'timestamp':_0x4082f3,'date':_0x54aa5a,'coin':_0x39d6f4[_0x22cf6(0x226)],'symbol':_0x39d6f4[_0x22cf6(0x1b6)],'type':_0x572280[_0x22cf6(0x145)],'side':_0x572280[_0x22cf6(0x162)],'reverse':_0x471934,'amount':formatResult(_0x572280['filled'],0x8),'filled':formatResult(_0x572280[_0x22cf6(0x177)],0x8),'coinamount':formatResult(_0x5082a8,0x8),'price':formatResult(_0x572280['price'],0x8)});let _0x275fe9;if(_0x572280['side']=='buy'&&_0x471934==![])_0x275fe9=-_0x572280['amount']*_0x572280['price'];if(_0x572280[_0x22cf6(0x162)]=='buy'&&_0x471934==!![])_0x275fe9=_0x572280[_0x22cf6(0x1dc)];if(_0x572280[_0x22cf6(0x162)]=='sell'&&_0x471934==![])_0x275fe9=_0x572280['amount']*_0x572280[_0x22cf6(0x12a)];if(_0x572280['side']==_0x22cf6(0x1c0)&&_0x471934==!![])_0x275fe9=-_0x572280[_0x22cf6(0x1dc)];_0xaf4ceb[_0x22cf6(0x1f3)]({'date':_0x54aa5a,'coin':_0x22cf6(0x206),'coinamount':formatResult(_0x275fe9,0x8)});});}_0xaf4ceb[_0x18e731(0x190)]((_0x3f384f,_0x3a8910)=>_0x3f384f[_0x18e731(0x15b)]>_0x3a8910[_0x18e731(0x15b)]?0x1:_0x3a8910[_0x18e731(0x15b)]>_0x3f384f['timestamp']?-0x1:0x0),dbLogs['get'](_0x18e731(0x19e))[_0x18e731(0x1f4)]()[_0x18e731(0x123)](),_0xaf4ceb[_0x18e731(0x12f)](_0x5a9c94=>{const _0xfa1e69=_0x18e731;let _0x4492fa;_0x5a9c94[_0xfa1e69(0x226)]!=_0xfa1e69(0x206)&&(_0x4492fa={'time':_0x5a9c94[_0xfa1e69(0x15b)],'type':_0xfa1e69(0x161),'event':_0xfa1e69(0x1de)+_0x5a9c94['symbol']+'\x20'+_0x5a9c94[_0xfa1e69(0x162)]+'\x20#'+_0x5a9c94[_0xfa1e69(0x1dc)]+'\x20@'+_0x5a9c94[_0xfa1e69(0x12a)]},dbLogs[_0xfa1e69(0x127)]('logs')['push'](_0x4492fa)['write']());});const _0x383add=fns[_0x18e731(0x1d1)]({'start':new Date(_0x2872b0[_0x18e731(0x205)]),'end':new Date()})[_0x18e731(0x173)](_0x26003a=>fns[_0x18e731(0x1c2)](_0x26003a,'yyyy/MM/dd'));let _0x398100=[];_0x2872b0[_0x18e731(0x180)][_0x18e731(0x12f)](_0x4dbbb8=>{const _0x489e3e=_0x18e731;if(!_0x4dbbb8[_0x489e3e(0x13c)]){_0x398100[_0x4dbbb8[_0x489e3e(0x226)]]=[];let _0x5e9a24=_0x4dbbb8[_0x489e3e(0x194)];_0x383add[_0x489e3e(0x12f)]((_0x232e6d,_0x14d7ab)=>{const _0x5327a9=_0x489e3e;let _0x32884e=_0xaf4ceb[_0x5327a9(0x1db)](_0x1c6ded=>_0x1c6ded[_0x5327a9(0x226)]==_0x4dbbb8['coin']&&_0x1c6ded[_0x5327a9(0x1ef)]==_0x232e6d);if(_0x32884e[_0x5327a9(0x138)]!=0x0){let _0x58a9c7=_0x32884e[_0x5327a9(0x163)]((_0x44763a,_0x27d3a7)=>{const _0x1d7518=_0x5327a9;return _0x44763a+=_0x27d3a7[_0x1d7518(0x1d7)],_0x44763a;},0x0);_0x5e9a24+=_0x58a9c7;}_0x398100[_0x4dbbb8[_0x5327a9(0x226)]][_0x232e6d]=_0x5e9a24;});}});const _0x1faaa5=[..._0x46ea2b];_0x1faaa5[_0x18e731(0x1f3)]({'coin':stablecoins[_0x18e731(0x1ac)][_0x18e731(0x226)],'symbol':stablecoins[_0x18e731(0x1ac)][_0x18e731(0x1b6)]}),_0x1faaa5[_0x18e731(0x1f3)]({'coin':stablecoins[_0x18e731(0x176)][_0x18e731(0x226)],'symbol':stablecoins[_0x18e731(0x176)][_0x18e731(0x1b6)]});let _0xb44a12=[];for(const _0x2c1f28 of _0x1faaa5){_0xb44a12[_0x2c1f28[_0x18e731(0x226)]]=await getCloses(_0x2c1f28[_0x18e731(0x1b6)],new Date(_0x2872b0[_0x18e731(0x205)]));}dbPerformance[_0x18e731(0x127)](_0x18e731(0x1e8))[_0x18e731(0x1f4)]()[_0x18e731(0x123)](),_0x383add[_0x18e731(0x12f)]((_0x5cea16,_0x2d1007)=>{const _0x264fcc=_0x18e731;let _0x2a0da1,_0x2a6288=[];_0x2d1007==0x0?(_0x2872b0[_0x264fcc(0x180)][_0x264fcc(0x12f)](_0x36d48e=>{const _0x21930f=_0x264fcc;!_0x36d48e[_0x21930f(0x13c)]&&_0x2a6288[_0x21930f(0x1f3)]({'coin':_0x36d48e['coin'],'number':_0x36d48e[_0x21930f(0x194)],'price':_0x36d48e['startprice']});}),_0x2a0da1={'date':_0x5cea16,'eur':_0xb44a12[stablecoins[_0x264fcc(0x1ac)][_0x264fcc(0x226)]][_0x2d1007],'usd':_0xb44a12[stablecoins[_0x264fcc(0x176)][_0x264fcc(0x226)]][_0x2d1007],'coins':_0x2a6288}):(_0x2872b0[_0x264fcc(0x180)][_0x264fcc(0x12f)](_0x4c295a=>{const _0x5374df=_0x264fcc;!_0x4c295a[_0x5374df(0x13c)]&&_0x2a6288[_0x5374df(0x1f3)]({'coin':_0x4c295a[_0x5374df(0x226)],'number':_0x398100[_0x4c295a[_0x5374df(0x226)]][_0x5cea16],'price':_0x4c295a[_0x5374df(0x226)]==_0x5374df(0x206)?0x1:_0xb44a12[_0x4c295a['coin']][_0x2d1007]});}),_0x2a0da1={'date':_0x5cea16,'eur':_0xb44a12[stablecoins[_0x264fcc(0x1ac)][_0x264fcc(0x226)]][_0x2d1007],'usd':_0xb44a12[stablecoins['usd'][_0x264fcc(0x226)]][_0x2d1007],'coins':_0x2a6288}),dbPerformance[_0x264fcc(0x127)]('data')[_0x264fcc(0x1f3)](_0x2a0da1)[_0x264fcc(0x123)]();}),emitPerformance(),await resetCoinResults();for(let _0x4814a7 of _0xaf4ceb){_0x4814a7[_0x18e731(0x226)]!=_0x18e731(0x206)&&await updateCoinResults(_0x4814a7);}logHistory(_0x18e731(0x197),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x27ac6d){await handleError(_0x27ac6d,_0x18e731(0x21e));}}async function getCloses(_0x1945a9,_0x1a7f7d,_0x2bd338=undefined){const _0x3643a7=_0x323520,_0x91a876='1d';let _0x50c869,_0x3fe582;const _0x5e8f76=fns[_0x3643a7(0x1fb)](new Date(),_0x1a7f7d)+0x1;try{const _0x307158=exchange[_0x3643a7(0x1b0)]()-_0x5e8f76*0x18*0xe10*0x3e8;_0x50c869=await exchange[_0x3643a7(0x169)](_0x1945a9,_0x91a876,_0x307158,_0x2bd338),_0x3fe582=await exchange[_0x3643a7(0x15d)](_0x1945a9);}catch(_0x2e5784){await handleError(_0x2e5784,_0x3643a7(0x17f));}let _0xd70462=ohlcvToCloses(_0x50c869);return _0xd70462[_0x3643a7(0x1f3)](_0x3fe582[_0x1945a9][_0x3643a7(0x1e7)]),_0xd70462;}function ohlcvToCloses(_0xba9f1d){const _0x3e0b8f=_0x323520;let _0x31a96d=[];return _0xba9f1d[_0x3e0b8f(0x12f)](function(_0x523584){const _0x4c5825=_0x3e0b8f;_0x31a96d[_0x4c5825(0x1f3)](_0x523584[0x4]);}),_0x31a96d;}function getConfiguration(_0x582353){const _0x36444e=_0x323520;let _0x2f86e1=dbConfig[_0x36444e(0x127)](_0x36444e(0x1c9))[_0x36444e(0x13f)]({'botID':_0x582353})['value']();if(_0x2f86e1){let _0x5042a1=![];!_0x2f86e1['exchange']&&(_0x2f86e1={..._0x2f86e1,'exchange':_0x36444e(0x136)},_0x5042a1=!![]),!_0x2f86e1['ordertype']&&(_0x2f86e1={..._0x2f86e1,'ordertype':_0x36444e(0x19a)},_0x5042a1=!![]),!_0x2f86e1[_0x36444e(0x125)]&&(_0x2f86e1={..._0x2f86e1,'timeout':0x14},_0x5042a1=!![]),_0x5042a1&&(_0x2f86e1={'botID':_0x2f86e1['botID'],'exchange':_0x2f86e1['exchange'],'apiKey':_0x2f86e1['apiKey'],'apiSecret':_0x2f86e1[_0x36444e(0x158)],'botname':_0x2f86e1[_0x36444e(0x1a7)],'threshold':_0x2f86e1['threshold'],'ordertype':_0x2f86e1[_0x36444e(0x20e)],'timeout':_0x2f86e1[_0x36444e(0x125)],'startdate':_0x2f86e1['startdate'],'recreate':_0x2f86e1[_0x36444e(0x1d4)],'timeshift':_0x2f86e1[_0x36444e(0x140)],'headless':_0x2f86e1['headless'],'cooldown':_0x2f86e1['cooldown'],'portfolio':_0x2f86e1[_0x36444e(0x180)]},dbConfig[_0x36444e(0x127)]('bot')[_0x36444e(0x1f4)]()[_0x36444e(0x123)](),dbConfig['get'](_0x36444e(0x1c9))['push'](_0x2f86e1)[_0x36444e(0x123)]());}else _0x2f86e1={'botID':_0x582353,'exchange':_0x36444e(0x136),'apiKey':'','apiSecret':'','botname':'Bot\x20'+_0x582353,'threshold':'3','ordertype':_0x36444e(0x19a),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x36444e(0x140)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x2f86e1;}function emittedConfiguration(){const _0x533c9d=_0x323520;let _0xd704b1;return config[_0x533c9d(0x1ed)]==''?_0xd704b1=config:_0xd704b1={...config,'apiKey':_0x533c9d(0x1a6),'apiSecret':_0x533c9d(0x1a6)},_0xd704b1;}function getSettings(){const _0x22f242=_0x323520;return dbSettings[_0x22f242(0x127)](_0x22f242(0x126))[_0x22f242(0x149)]();}function getSecure(){const _0x456588=_0x323520;return dbSecure['get'](_0x456588(0x1ee))[_0x456588(0x149)]()||{};}function updateTimeshift(_0x381b02){const _0x431627=_0x323520;let _0x1d6528=dbConfig[_0x431627(0x127)](_0x431627(0x1c9))[_0x431627(0x13f)]({'botID':botID})['value']();_0x1d6528&&dbConfig[_0x431627(0x127)](_0x431627(0x1c9))['find']({'botID':botID})[_0x431627(0x196)]({'timeshift':_0x381b02})[_0x431627(0x123)](),config[_0x431627(0x140)]=_0x381b02,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1f5f16){const _0x522f49=_0x323520;let _0x550a67=dbConfig['get'](_0x522f49(0x1c9))[_0x522f49(0x13f)]({'botID':botID})[_0x522f49(0x149)]();_0x1f5f16={..._0x1f5f16,'apiKey':crypt[_0x522f49(0x13e)](secure[_0x522f49(0x154)],_0x1f5f16[_0x522f49(0x1ed)])[_0x522f49(0x12b)],'apiSecret':crypt[_0x522f49(0x13e)](secure['privateKey'],_0x1f5f16[_0x522f49(0x158)])[_0x522f49(0x12b)]};if(_0x550a67){if(_0x1f5f16[_0x522f49(0x1ed)]==_0x522f49(0x1a6))_0x1f5f16[_0x522f49(0x1ed)]=config[_0x522f49(0x1ed)];if(_0x1f5f16[_0x522f49(0x158)]=='************')_0x1f5f16[_0x522f49(0x158)]=config[_0x522f49(0x158)];dbConfig[_0x522f49(0x127)](_0x522f49(0x1c9))['find']({'botID':botID})['assign'](_0x1f5f16)['write']();}else dbConfig['get'](_0x522f49(0x1c9))[_0x522f49(0x1f3)](_0x1f5f16)[_0x522f49(0x123)](),process[_0x522f49(0x1d6)]({'status':_0x522f49(0x133),'live':_0x522f49(0x128)});config={..._0x1f5f16};if(config[_0x522f49(0x1d4)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x522f49(0x1d6)]({'botname':_0x1f5f16[_0x522f49(0x1a7)]}),proxyEmit(_0x522f49(0x1a5)),reset();}async function storeHeadless(_0x48c896){const _0x8f2cba=_0x323520,_0x1ad9c2={...config,'headless':_0x48c896[_0x8f2cba(0x13d)]};let _0x237774=dbConfig[_0x8f2cba(0x127)](_0x8f2cba(0x1c9))['find']({'botID':botID})[_0x8f2cba(0x149)]();_0x237774&&dbConfig[_0x8f2cba(0x127)]('bot')[_0x8f2cba(0x13f)]({'botID':botID})['assign'](_0x1ad9c2)[_0x8f2cba(0x123)](),config={..._0x1ad9c2},proxyEmit(_0x8f2cba(0x1d5),emittedConfiguration());}function noslash(_0x5ca6e4){const _0x58f075=_0x323520;return _0x5ca6e4[_0x58f075(0x195)]('/','');}function updateNumberCoins(_0x543f5a){const _0x5dc247=_0x323520;_0x543f5a[_0x5dc247(0x122)]&&_0x543f5a['eventType']=='outboundAccountPosition'&&_0x543f5a[_0x5dc247(0x14b)]['forEach'](_0x2844a4=>{const _0x2b5c79=_0x5dc247;let _0x6f9b1=currentCoins['find'](_0x31c37b=>_0x31c37b['coin']==_0x2844a4[_0x2b5c79(0x17b)]);if(_0x6f9b1)_0x6f9b1[_0x2b5c79(0x13a)]=Number(_0x2844a4['availableBalance']);}),_0x543f5a[_0x5dc247(0x122)]&&_0x543f5a[_0x5dc247(0x122)]==_0x5dc247(0x15f)&&(_0x543f5a[_0x5dc247(0x148)]==_0x5dc247(0x1e4)&&_0x543f5a[_0x5dc247(0x17d)]==_0x5dc247(0x1bf)&&lastOrders[_0x5dc247(0x12f)](_0x502e81=>{const _0x5938db=_0x5dc247;if(_0x502e81['orderId']==_0x543f5a[_0x5938db(0x1b1)]){if(_0x502e81['reverse'])_0x502e81[_0x5938db(0x177)]=_0x543f5a[_0x5938db(0x222)]*_0x502e81[_0x5938db(0x12a)];else _0x502e81[_0x5938db(0x177)]=_0x543f5a['accumulatedQuantity'];}}));}async function getCoins(_0x7bac2e=!![]){const _0x545016=_0x323520;let _0x4ed60a,_0x5aa8bd=[],_0x4d5aa3=[],_0xe2dac0=[];try{_0x4ed60a=await exchange[_0x545016(0x182)](),mybalances=_0x4ed60a['total'];if(!_0x7bac2e)for(const [_0x1abe21,_0x46ca97]of Object[_0x545016(0x12c)](mybalances)){_0xe2dac0[_0x545016(0x1f3)](_0x1abe21);}else config[_0x545016(0x180)]['forEach'](_0x5b1cf0=>{const _0x3f57d3=_0x545016;if(!_0x5b1cf0[_0x3f57d3(0x13c)])_0xe2dac0[_0x3f57d3(0x1f3)](_0x5b1cf0['coin']);});for(const [_0x4a8fad,_0x276130]of Object['entries'](mybalances)){if(_0xe2dac0['includes'](_0x4a8fad)){if((_0x276130[_0x545016(0x17c)]()!=0x0||config[_0x545016(0x180)][_0x545016(0x13f)](_0x7bdfe7=>_0x7bdfe7[_0x545016(0x226)]==_0x4a8fad))&&(allSymbols[_0x545016(0x1e5)](_0x4a8fad+_0x545016(0x1a0))||_0x4a8fad==_0x545016(0x206)))_0x4d5aa3[_0x545016(0x1f3)]({'coin':_0x4a8fad,'symbol':_0x4a8fad+_0x545016(0x1a0),'reverse':![],'number':_0x276130}),_0x4a8fad!=_0x545016(0x206)&&_0x5aa8bd[_0x545016(0x1f3)](_0x4a8fad+_0x545016(0x1a0));else(_0x276130[_0x545016(0x17c)]()!=0x0||config[_0x545016(0x180)][_0x545016(0x13f)](_0x3b1008=>_0x3b1008[_0x545016(0x226)]==_0x4a8fad))&&allSymbols[_0x545016(0x1e5)](_0x545016(0x19c)+_0x4a8fad)&&(_0x4d5aa3[_0x545016(0x1f3)]({'coin':_0x4a8fad,'symbol':_0x545016(0x19c)+_0x4a8fad,'reverse':!![],'number':_0x276130}),_0x4a8fad!=_0x545016(0x206)&&_0x5aa8bd[_0x545016(0x1f3)](_0x545016(0x19c)+_0x4a8fad));}}}catch(_0x467e54){if(!_0x7bac2e){if(_0x467e54['toString']()['includes']('API-key\x20format\x20invalid'))return logHistory(_0x545016(0x1cd),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x467e54[_0x545016(0x17c)]()[_0x545016(0x1e5)](_0x545016(0x218)))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x467e54[_0x545016(0x17c)]()[_0x545016(0x1e5)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x545016(0x1cd),_0x545016(0x18a)),![];else await handleError(_0x467e54,_0x545016(0x1f5));}}}else await handleError(_0x467e54,_0x545016(0x1f5));}return _0x4d5aa3;}async function getPortfolio(_0xb4093){const _0x478676=_0x323520;let _0x10e5bb=[],_0x1cc085=[],_0x5296c1,_0xe24759=[],_0x58b381,_0x52e8bc;_0xb4093['apiKey']===_0x478676(0x1a6)||_0xb4093[_0x478676(0x158)]===_0x478676(0x1a6)?(_0x58b381=config[_0x478676(0x1ed)],_0x52e8bc=config[_0x478676(0x158)]):(_0x58b381=_0xb4093[_0x478676(0x1ed)],_0x52e8bc=_0xb4093['apiSecret']);await initExchange(_0x58b381,_0x52e8bc);let _0x2d7651=await loadSymbols();if(_0x2d7651){_0xe24759=await getCoins(![]);if(_0xe24759===![])proxyEmit(_0x478676(0x180),![]);else{_0xe24759[_0x478676(0x12f)](_0x487d32=>{const _0x1b4f52=_0x478676;_0x10e5bb[_0x1b4f52(0x1f3)](_0x487d32[_0x1b4f52(0x1b6)]);});try{_0x1cc085=await exchange[_0x478676(0x15d)](_0x10e5bb);}catch(_0x2b847c){await handleError(_0x2b847c,'getPortfolio()');}_0xe24759['forEach'](_0x2f164c=>{const _0x425b1d=_0x478676;_0x2f164c[_0x425b1d(0x226)]!='BTC'?_0x5296c1=_0x2f164c[_0x425b1d(0x1c3)]?0x1/_0x1cc085[_0x2f164c[_0x425b1d(0x1b6)]][_0x425b1d(0x1e7)]:_0x1cc085[_0x2f164c[_0x425b1d(0x1b6)]][_0x425b1d(0x1e7)]:_0x5296c1=0x1,_0x2f164c['price']=formatResult(_0x5296c1,0x8);}),proxyEmit(_0x478676(0x180),_0xe24759);}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x304558){const _0x54d897=_0x323520;let _0x402dcc=!![];const _0xd06a06=!_0x304558[_0x54d897(0x1c3)]?markets[_0x304558[_0x54d897(0x1b6)]][_0x54d897(0x1be)]['amount'][_0x54d897(0x1d9)]:markets[_0x304558[_0x54d897(0x1b6)]][_0x54d897(0x1be)][_0x54d897(0x21c)][_0x54d897(0x1d9)],_0x5622c4=!_0x304558[_0x54d897(0x1c3)]?markets[_0x304558[_0x54d897(0x1b6)]][_0x54d897(0x1be)][_0x54d897(0x21c)][_0x54d897(0x1d9)]:markets[_0x304558[_0x54d897(0x1b6)]][_0x54d897(0x1be)][_0x54d897(0x1dc)][_0x54d897(0x1d9)];if(Math[_0x54d897(0x1da)](_0x304558[_0x54d897(0x213)])<_0xd06a06)_0x402dcc=![];if(Math[_0x54d897(0x1da)](_0x304558[_0x54d897(0x213)])*_0x304558[_0x54d897(0x1e7)]<_0x5622c4)_0x402dcc=![];return _0x402dcc;}async function getBalances(){const _0x3855d8=_0x323520;let _0x87e379=0x0,_0xea2aab;const _0x100da6=config['threshold'];currentCoins[_0x3855d8(0x12f)](_0x4af47c=>{const _0x4dc3a=_0x3855d8;if(_0x4af47c[_0x4dc3a(0x226)]!='BTC'){let _0x163e45=global[_0x4dc3a(0x1ba)][noslash(_0x4af47c[_0x4dc3a(0x1b6)])];_0xea2aab=_0x4af47c[_0x4dc3a(0x1c3)]?0x1/_0x163e45:_0x163e45;}else _0xea2aab=0x1;let _0x150891=_0x4af47c[_0x4dc3a(0x13a)]*_0xea2aab;_0x87e379+=_0x150891,_0x4af47c[_0x4dc3a(0x1e7)]=formatResult(Number(_0xea2aab),0x8),_0x4af47c['value']=_0x150891;}),currentCoins['forEach'](_0x2f61bd=>{const _0x425a7b=_0x3855d8;let _0x5b4e05=config[_0x425a7b(0x180)][_0x425a7b(0x13f)](_0x3900d7=>_0x3900d7[_0x425a7b(0x226)]==_0x2f61bd['coin']),_0x113b08=Number(_0x5b4e05[_0x425a7b(0x19f)]),_0xbc8d22=_0x2f61bd[_0x425a7b(0x149)]/_0x87e379*0x64,_0x41f2db=_0x113b08*_0x87e379/0x64/_0x2f61bd[_0x425a7b(0x1e7)]-_0x2f61bd[_0x425a7b(0x13a)];_0x2f61bd['distribution']=formatResult(_0xbc8d22,0x3),_0x2f61bd[_0x425a7b(0x1f7)]=formatResult(_0x113b08,0x3),_0x2f61bd[_0x425a7b(0x213)]=formatResult(_0x41f2db,0x8),_0x2f61bd[_0x425a7b(0x162)]='',_0x2f61bd[_0x425a7b(0x1b2)]='';if(_0x2f61bd['coin']!=_0x425a7b(0x206)){if(_0x2f61bd['distribution']>_0x113b08)_0x2f61bd[_0x425a7b(0x162)]=_0x425a7b(0x1c0),_0x2f61bd[_0x425a7b(0x1b2)]=checkMinimums(_0x2f61bd);else _0x2f61bd['distribution']<_0x113b08&&(_0x2f61bd['side']=_0x425a7b(0x159),_0x2f61bd[_0x425a7b(0x1b2)]=checkMinimums(_0x2f61bd));}_0x2f61bd[_0x425a7b(0x199)]=_0x2f61bd[_0x425a7b(0x19f)]/_0x2f61bd[_0x425a7b(0x1f7)]-0x1;}),currentCoins[_0x3855d8(0x190)]((_0x23a43e,_0x49dd2b)=>_0x23a43e[_0x3855d8(0x199)]<_0x49dd2b[_0x3855d8(0x199)]?0x1:_0x49dd2b['delta']<_0x23a43e['delta']?-0x1:0x0);const _0x2dce0c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2dce0c[_0x3855d8(0x1ac)],'usd':_0x2dce0c[_0x3855d8(0x176)],'portfolio':JSON[_0x3855d8(0x1a3)](currentCoins),'threshold':_0x100da6},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3855d8(0x13d)])headlessMode({'portfolio':currentCoins,'threshold':_0x100da6});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x53bea6=_0x323520;if(!lastBalances)return;let _0x852832=await getStartingBalances(![]),_0x257be2=[],_0xc384ad=[],_0x3d8815;JSON[_0x53bea6(0x1e3)](lastBalances['portfolio'])[_0x53bea6(0x12f)](_0x98748=>{const _0x34e76f=_0x53bea6;let _0x5ea19c={'coin':_0x98748[_0x34e76f(0x226)],'number':_0x98748[_0x34e76f(0x13a)],'price':_0x98748[_0x34e76f(0x1e7)]};_0x257be2[_0x34e76f(0x1f3)](_0x5ea19c);if(!_0x852832['coins']||!_0x852832['coins']['find'](_0x16b669=>_0x16b669[_0x34e76f(0x226)]==_0x98748[_0x34e76f(0x226)]&&_0x16b669[_0x34e76f(0x13a)]!=0x0))_0xc384ad[_0x34e76f(0x1f3)](_0x5ea19c);});const _0x3a918f=await getFiat();_0x3d8815={'date':lastBalances[_0x53bea6(0x124)][_0x53bea6(0x15e)]('\x20')[0x0],'eur':_0x3a918f['eur'],'usd':_0x3a918f['usd'],'coins':_0x257be2};let _0x2fafb0=dbPerformance['get'](_0x53bea6(0x1e8))[_0x53bea6(0x13f)]({'date':_0x3d8815[_0x53bea6(0x1ef)]})['value']();_0x2fafb0?dbPerformance['get'](_0x53bea6(0x1e8))[_0x53bea6(0x13f)]({'date':_0x3d8815[_0x53bea6(0x1ef)]})['assign'](_0x3d8815)[_0x53bea6(0x123)]():dbPerformance[_0x53bea6(0x127)](_0x53bea6(0x1e8))[_0x53bea6(0x1f3)](_0x3d8815)[_0x53bea6(0x123)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x55549a=_0x323520;if(dbPerformance[_0x55549a(0x19d)](_0x55549a(0x1e8))[_0x55549a(0x149)]()){let _0x2f533d=dbPerformance[_0x55549a(0x127)]('data')[_0x55549a(0x215)](_0x55549a(0x1ef))[_0x55549a(0x149)]();proxyEmit(_0x55549a(0x18c),_0x2f533d),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x2d1f9e=!![]){const _0x363e9c=_0x323520;let _0x3bf98b=dbPerformance[_0x363e9c(0x127)](_0x363e9c(0x1e8))[_0x363e9c(0x13f)]({'date':config['startdate']})[_0x363e9c(0x149)]();config['apiKey']!=''&&!_0x3bf98b&&(await setStartDatePerformance(config),_0x3bf98b=dbPerformance[_0x363e9c(0x127)]('data')[_0x363e9c(0x13f)]({'date':config['startdate']})[_0x363e9c(0x149)]());if(config[_0x363e9c(0x1ed)]==''||!_0x3bf98b)return{};let _0x13c2dd=0x0,_0x318c0e=0x0,_0x4a8bdd=0x0,_0x2a509a=[],_0x14cb00=0x0;config['portfolio'][_0x363e9c(0x12f)](_0x1ddd4b=>{const _0x5ef899=_0x363e9c;!_0x1ddd4b[_0x5ef899(0x13c)]&&(_0x2a509a[_0x14cb00]={'coin':_0x1ddd4b['coin'],'symbol':_0x1ddd4b[_0x5ef899(0x1b6)],'number':_0x1ddd4b[_0x5ef899(0x194)],'price':_0x1ddd4b[_0x5ef899(0x171)]},_0x13c2dd+=_0x1ddd4b['startprice']*_0x1ddd4b[_0x5ef899(0x194)],_0x318c0e+=_0x1ddd4b[_0x5ef899(0x171)]*_0x1ddd4b['startnumber']*_0x3bf98b[_0x5ef899(0x1ac)],_0x4a8bdd+=_0x1ddd4b[_0x5ef899(0x171)]*_0x1ddd4b[_0x5ef899(0x194)]*_0x3bf98b['usd'],_0x14cb00++);});let _0x526994={'btc':_0x13c2dd,'eur':_0x318c0e,'usd':_0x4a8bdd,'coins':_0x2a509a};if(_0x2d1f9e)proxyEmit(_0x363e9c(0x1e0),_0x526994);return _0x526994;}function headlessMode(_0x584e8d){const _0x2670a9=_0x323520;let _0x43c49a=_0x584e8d[_0x2670a9(0x180)],_0x33a943=_0x584e8d['threshold'],_0x5ede89=[];for(let _0xc04a5d of _0x43c49a){if(_0xc04a5d['coin']!=_0x2670a9(0x206)){if(_0xc04a5d[_0x2670a9(0x19f)]/_0xc04a5d[_0x2670a9(0x1f7)]-0x1>=_0x33a943/0x64){if(_0xc04a5d[_0x2670a9(0x1b2)])_0x5ede89[_0x2670a9(0x1f3)](_0xc04a5d);}else{if(_0xc04a5d[_0x2670a9(0x19f)]/_0xc04a5d[_0x2670a9(0x1f7)]-0x1<=-_0x33a943/0x64){if(_0xc04a5d[_0x2670a9(0x1b2)])_0x5ede89['push'](_0xc04a5d);}}}}_0x5ede89[_0x2670a9(0x138)]>0x0&&placeOrder(_0x5ede89);}function _0x3449(){const _0x2c7dfa=['getMinutes','Order(s)\x20validated\x20-\x20balancing\x20resumed','apiKey','secure','date','args','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(2)\x20-\x20please\x20sync\x20clock','mkdirSync','push','remove','getCoins()','API-key\x20format\x20invalid','target','-performance.json','getHours','slice','differenceInCalendarDays','ccxt','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','wss://stream.binance.us:9443','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','padStart','ExchangeNotAvailable','getStartingBalances','(((.+)+)+)+$','startdate','BTC','parseISO','BTCUSDT','Order\x20filled:\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','currency','-config.json','Order(s)\x20not\x20validated\x20after\x20','ordertype','subscribeSpotKline','\x20orders\x20in\x20less\x20than\x20','1412612pnUrht','exchange','trade','breakeven','sortBy','toFixed','InvalidNonce','AuthenticationError','getPortfolio','fee','close','cost','RSA-OAEP','recreateHistory()','isArray','wss://stream.binance.com:9443','datetime','accumulatedQuantity','getSeconds','bot-','restart','coin','\x20hour',':\x20Bot\x20','1743108bjbhYz','BTCBUSD','eventType','write','time','timeout','settings','get','running','round','price','message','entries','wsMarket','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','forEach','buys','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','initws()','enabled','-results.json','\x20|\x20Error\x20details:\x20','binance','placeOrder()','length','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','number','BNBBTC','excluded','headless','decrypt','find','timeshift','hybrid-crypto-js','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','indexOf','loadSymbols()','type','cooldown','BTC/EUR','orderType','value',',\x20must\x20be\x20a\x203\x20digit\x20number','balances','14230152wZqPtC','\x20-\x20','\x20>\x20','search','event','createOrder','constructor','keys','privateKey','limit-low','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','binanceus','apiSecret','buy','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','timestamp','sha256','fetchTickers','split','executionReport','fees','order','side','reduce','Order\x20amount\x20is\x20invalid:\x20','bid','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','toLowerCase','fetchOHLCV','getDate','Order(s)\x20filled\x20-\x20balancing\x20resumed','36srqjhF','storeConfiguration','MIN_NOTIONAL','userData','event-history','startprice','Limit\x20(high-margin)','map','BNB','test','usd','filled','defaults','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Crypt','asset','toString','orderStatus','limit-high','getCloses()','portfolio','wsKey','fetchBalance',')\x20|\x20Error\x20details:\x20','getFullYear','ask','emitHistory','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','kline','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(1)\x20-\x20please\x20sync\x20clock','Binance\x20API\x20secret\x20is\x20invalid','apply','performance','spot','BTC/BUSD','BTCEUR','sort','3879275RqMnzZ','BTC/USDT','closeWs','startnumber','replace','assign','success','\x20minutes\x20-\x20balancing\x20resumed','delta','market','coin-loading-progress','BTC/','has','logs','distribution','/BTC','getTime','Unfilled\x20order(s)\x20canceled\x20after\x20','stringify','placeOrder','configuration-stored','************','botname','initclient','sells','Executed\x20','differenceInSeconds','eur','yyyy/MM/dd','3vmodlX','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','milliseconds','orderId','valid','DAI/','subscribeSpotUserDataStream','log','symbol','./config/','splice','Limit\x20(low-margin)','ticker','4600043aldlMe','yyyy/MM/dd\x20HH:mm:ss','cancelOrder','limits','FILLED','sell','-events.json','format','reverse','getFiat()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20order:\x20','fetchOrders','limit','bot','coins','getMonth','argv','error','37018SznbgM','Error:\x20Invalid\x20argument\x20','loadMarkets','eachDayOfInterval','cancelOrder()','12401000auJMSS','recreate','configuration','send','coinamount','exit','min','abs','filter','amount','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','Order:\x20','kill','starting-balances','bb-settings.json','lowdb/adapters/FileSync','parse','LIMIT','includes',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','last','data','page','WebSockets('];_0x3449=function(){return _0x2c7dfa;};return _0x3449();}function symbolToCoin(_0x41b64c){const _0x115a88=_0x323520;let _0x23fb5b;if(_0x41b64c[_0x115a88(0x1e5)]('/BTC'))_0x23fb5b=_0x41b64c[_0x115a88(0x195)](_0x115a88(0x1a0),'');if(_0x41b64c[_0x115a88(0x1e5)](_0x115a88(0x19c)))_0x23fb5b=_0x41b64c[_0x115a88(0x195)](_0x115a88(0x19c),'');return _0x23fb5b;}async function validateOrders(_0x3142fa=0x0){const _0x2182a6=_0x323520;let _0x515e6d=[],_0x3580de=config[_0x2182a6(0x20e)]==_0x2182a6(0x19a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2182a6(0x125)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x42db9a=>{const _0x14f551=_0x2182a6;let _0x74a95f=previousCoins[_0x14f551(0x13f)](_0x15b6e2=>_0x15b6e2['coin']==symbolToCoin(_0x42db9a[_0x14f551(0x1b6)])),_0x28a838=currentCoins['find'](_0x33914e=>_0x33914e['coin']==symbolToCoin(_0x42db9a[_0x14f551(0x1b6)])),_0x1fde26,_0x24e990;_0x42db9a[_0x14f551(0x162)]==_0x14f551(0x159)&&!_0x42db9a[_0x14f551(0x1c3)]||_0x42db9a['side']==_0x14f551(0x1c0)&&_0x42db9a['reverse']?(_0x1fde26=_0x74a95f[_0x14f551(0x13a)]+0.9*_0x42db9a[_0x14f551(0x177)],_0x24e990=_0x74a95f[_0x14f551(0x13a)]+1.1*_0x42db9a[_0x14f551(0x177)]):(_0x1fde26=_0x74a95f['number']-1.1*_0x42db9a[_0x14f551(0x177)],_0x24e990=_0x74a95f['number']-0.9*_0x42db9a[_0x14f551(0x177)]);const _0x31f7fb=_0x42db9a[_0x14f551(0x177)]!=0x0&&_0x28a838[_0x14f551(0x13a)]>=_0x1fde26&&_0x28a838[_0x14f551(0x13a)]<=_0x24e990;_0x515e6d[_0x14f551(0x1f3)](_0x31f7fb);if(_0x31f7fb&&config['ordertype']!='market'){if(_0x42db9a[_0x14f551(0x1c3)])logHistory('order',_0x14f551(0x209)+_0x42db9a['symbol']+'\x20'+_0x42db9a['side']+'\x20#'+formatResult(_0x42db9a[_0x14f551(0x177)]/_0x42db9a['price'],0x8)+'\x20@'+formatResult(_0x42db9a[_0x14f551(0x12a)],0x8));else logHistory(_0x14f551(0x161),'Order\x20filled:\x20'+_0x42db9a['symbol']+'\x20'+_0x42db9a['side']+'\x20#'+formatResult(_0x42db9a['filled'],0x8)+'\x20@'+formatResult(_0x42db9a['price'],0x8));}}),_0x515e6d[_0x2182a6(0x12f)]((_0x4312b5,_0x5f233e)=>{const _0xe27887=_0x2182a6;if(_0x4312b5)lastOrders[_0xe27887(0x1b8)](_0x5f233e,0x1);});if(_0x3142fa<_0x3580de&&_0x515e6d[_0x2182a6(0x1e5)](![])){if(_0x3142fa==0x0){config['ordertype']==_0x2182a6(0x19a)?logHistory(_0x2182a6(0x1cd),_0x2182a6(0x187)):logHistory(_0x2182a6(0x1cd),_0x2182a6(0x142));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3142fa);},0xa*0x3e8);}else{(_0x3142fa==0x1||_0x3142fa==Math[_0x2182a6(0x129)](_0x3580de/0x2)||_0x3142fa==_0x3580de-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3142fa);},validateOrderInterval);}}else{lockOrders=![];if(_0x3142fa>0x0&&!_0x515e6d[_0x2182a6(0x1e5)](![]))config[_0x2182a6(0x20e)]=='market'?logHistory(_0x2182a6(0x197),_0x2182a6(0x1ec)):logHistory(_0x2182a6(0x197),_0x2182a6(0x16b));else _0x3142fa>0x0&&_0x515e6d[_0x2182a6(0x1e5)](![])&&(config[_0x2182a6(0x20e)]==_0x2182a6(0x19a)?logHistory('success',_0x2182a6(0x20d)+Math[_0x2182a6(0x129)](_0x3580de*validateOrderInterval/0xea60)+_0x2182a6(0x198)):(lastOrders[_0x2182a6(0x12f)](async _0x13087d=>{const _0x1a2fa1=_0x2182a6;try{const _0x106cfa=await exchange[_0x1a2fa1(0x1bd)](_0x13087d['orderId'],_0x13087d[_0x1a2fa1(0x1b6)]);}catch(_0x34437b){if(_0x34437b[_0x1a2fa1(0x17c)]()[_0x1a2fa1(0x1e5)]('OrderNotFound')){}else await handleError(_0x34437b,_0x1a2fa1(0x1d2));}}),logHistory('success',_0x2182a6(0x1a2)+Math[_0x2182a6(0x129)](_0x3580de*validateOrderInterval/0xea60)+_0x2182a6(0x198))));}}function _0x377d(_0x269869,_0xf0aed){const _0x1d0c73=_0x3449();return _0x377d=function(_0x4f2474,_0x438d51){_0x4f2474=_0x4f2474-0x122;let _0x3449a9=_0x1d0c73[_0x4f2474];return _0x3449a9;},_0x377d(_0x269869,_0xf0aed);}async function resetCoinResults(){const _0x16f525=_0x323520;dbCoinResults['get'](_0x16f525(0x1ca))[_0x16f525(0x1f4)]()[_0x16f525(0x123)]();let _0x2f308e=await getStartingBalances(![]);_0x2f308e[_0x16f525(0x1ca)][_0x16f525(0x12f)](_0xde76d7=>{const _0x3fb9a7=_0x16f525,_0x3cb294=_0xde76d7[_0x3fb9a7(0x1b6)][_0x3fb9a7(0x1e5)]('BTC/');if(_0xde76d7['coin']!='BTC'){let _0xfbfff0={'coin':_0xde76d7['coin'],'number':_0xde76d7['number'],'breakeven':_0xde76d7['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3fb9a7(0x127)](_0x3fb9a7(0x1ca))['push'](_0xfbfff0)['write']();}});}async function updateCoinResults(_0x3e97b9){const _0x5f28a5=_0x323520;let _0x4cf077,_0x1d65c9,_0x1d4ae4,_0x433509,_0x49229e,_0x529624,_0x4cf3cd=dbCoinResults[_0x5f28a5(0x127)](_0x5f28a5(0x1ca))[_0x5f28a5(0x13f)]({'coin':_0x3e97b9['coin']})[_0x5f28a5(0x149)]();if(!_0x4cf3cd)return;if(_0x3e97b9[_0x5f28a5(0x21a)]&&_0x3e97b9[_0x5f28a5(0x21a)][_0x5f28a5(0x20b)]==_0x5f28a5(0x206))_0x4cf077=_0x3e97b9[_0x5f28a5(0x21a)][_0x5f28a5(0x21c)];else{if(_0x3e97b9[_0x5f28a5(0x21a)]&&_0x3e97b9['fee'][_0x5f28a5(0x20b)]==_0x5f28a5(0x174))_0x4cf077=_0x3e97b9[_0x5f28a5(0x21a)][_0x5f28a5(0x21c)]*global[_0x5f28a5(0x1ba)][_0x5f28a5(0x13b)];else _0x4cf077=0.001*_0x3e97b9['filled'];}const _0x40075e=_0x3e97b9[_0x5f28a5(0x1b6)][_0x5f28a5(0x1e5)]('BTC/');_0x40075e&&(_0x529624={'coin':_0x3e97b9[_0x5f28a5(0x226)],'symbol':_0x3e97b9[_0x5f28a5(0x1b6)],'filled':_0x3e97b9[_0x5f28a5(0x177)]*_0x3e97b9[_0x5f28a5(0x12a)],'side':_0x3e97b9[_0x5f28a5(0x162)]==_0x5f28a5(0x1c0)?_0x5f28a5(0x159):_0x5f28a5(0x1c0),'price':0x1/_0x3e97b9[_0x5f28a5(0x12a)]},_0x3e97b9={..._0x529624});_0x3e97b9['side']=='buy'?_0x1d4ae4=(_0x4cf3cd[_0x5f28a5(0x214)]*_0x4cf3cd['number']+_0x3e97b9[_0x5f28a5(0x12a)]*_0x3e97b9[_0x5f28a5(0x177)])/(_0x4cf3cd[_0x5f28a5(0x13a)]+_0x3e97b9[_0x5f28a5(0x177)]):_0x1d4ae4=(_0x4cf3cd['breakeven']*_0x4cf3cd[_0x5f28a5(0x13a)]-_0x3e97b9['price']*_0x3e97b9[_0x5f28a5(0x177)])/(_0x4cf3cd[_0x5f28a5(0x13a)]-_0x3e97b9[_0x5f28a5(0x177)]);_0x3e97b9[_0x5f28a5(0x162)]==_0x5f28a5(0x159)?_0x433509=_0x4cf3cd['realized']:_0x433509=_0x4cf3cd['realized']+(_0x3e97b9[_0x5f28a5(0x12a)]-_0x4cf3cd[_0x5f28a5(0x214)])*_0x3e97b9[_0x5f28a5(0x177)];_0x1d65c9=_0x3e97b9[_0x5f28a5(0x162)]==_0x5f28a5(0x1c0)?_0x4cf3cd[_0x5f28a5(0x13a)]-_0x3e97b9['filled']:_0x4cf3cd[_0x5f28a5(0x13a)]+_0x3e97b9[_0x5f28a5(0x177)],_0x49229e=(_0x3e97b9[_0x5f28a5(0x12a)]-_0x1d4ae4)*_0x1d65c9;let _0x599746={'coin':_0x3e97b9['coin'],'number':_0x1d65c9,'breakeven':formatResult(_0x1d4ae4,0x8),'realized':formatResult(_0x433509,0x8),'unrealized':formatResult(_0x49229e,0x8),'fees':formatResult(_0x4cf3cd[_0x5f28a5(0x160)]+_0x4cf077,0x8),'sells':_0x3e97b9[_0x5f28a5(0x162)]==_0x5f28a5(0x1c0)?_0x4cf3cd['sells']+0x1:_0x4cf3cd[_0x5f28a5(0x1a9)],'buys':_0x3e97b9[_0x5f28a5(0x162)]==_0x5f28a5(0x159)?_0x4cf3cd[_0x5f28a5(0x130)]+0x1:_0x4cf3cd[_0x5f28a5(0x130)]};dbCoinResults[_0x5f28a5(0x127)](_0x5f28a5(0x1ca))['find']({'coin':_0x3e97b9['coin']})[_0x5f28a5(0x196)](_0x599746)[_0x5f28a5(0x123)]();}async function placeOrder(_0x5b1c42){const _0x56f98d=_0x323520,_0x551ed8=config[_0x56f98d(0x20e)]==_0x56f98d(0x19a)?_0x56f98d(0x19a):_0x56f98d(0x1c8);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x56f98d(0x1e3)](JSON[_0x56f98d(0x1a3)](currentCoins));for(const _0x5dad10 of _0x5b1c42){let _0x35e19c,_0x54007a,_0x49c5de,_0x3694ee,_0x10ae7e,_0x44fc98=_0x5dad10[_0x56f98d(0x1b6)];try{const _0x195408=await exchange[_0x56f98d(0x15d)](_0x44fc98),_0x16eec9=_0x195408[_0x44fc98];_0x35e19c=_0x16eec9[_0x56f98d(0x1e7)],_0x54007a=_0x16eec9[_0x56f98d(0x165)],_0x49c5de=_0x16eec9[_0x56f98d(0x185)];_0x5dad10['reverse']?(_0x3694ee=_0x5dad10['side']==_0x56f98d(0x159)?_0x56f98d(0x1c0):'buy',_0x10ae7e=Math['abs'](_0x5dad10['trade'])/_0x35e19c):(_0x3694ee=_0x5dad10[_0x56f98d(0x162)],_0x10ae7e=Math[_0x56f98d(0x1da)](_0x5dad10['trade']));_0x551ed8==_0x56f98d(0x1c8)&&(config['ordertype']==_0x56f98d(0x17e)&&(_0x35e19c=_0x3694ee==_0x56f98d(0x159)?_0x54007a:_0x49c5de),config[_0x56f98d(0x20e)]==_0x56f98d(0x155)&&(_0x35e19c=_0x3694ee==_0x56f98d(0x159)?_0x49c5de:_0x54007a));_0x10ae7e=formatResult(_0x10ae7e,0x8),_0x35e19c=formatResult(_0x35e19c,0x8);const _0x3ff2fc=await exchange[_0x56f98d(0x151)](_0x44fc98,_0x551ed8,_0x3694ee,_0x10ae7e,_0x35e19c);lastOrders[_0x56f98d(0x1f3)]({'orderId':_0x3ff2fc['id'],'symbol':_0x44fc98,'side':_0x3694ee,'reverse':_0x5dad10[_0x56f98d(0x1c3)],'amount':_0x5dad10['reverse']?_0x3ff2fc['amount']*_0x3ff2fc[_0x56f98d(0x12a)]:_0x3ff2fc[_0x56f98d(0x1dc)],'filled':_0x5dad10[_0x56f98d(0x1c3)]?_0x3ff2fc[_0x56f98d(0x177)]*_0x3ff2fc[_0x56f98d(0x12a)]:_0x3ff2fc[_0x56f98d(0x177)],'price':_0x3ff2fc[_0x56f98d(0x12a)]});const _0x3aa7ef=_0x551ed8==_0x56f98d(0x19a)?'Market':config['ordertype']==_0x56f98d(0x17e)?_0x56f98d(0x172):_0x56f98d(0x1b9);if(_0x551ed8==_0x56f98d(0x19a))logHistory(_0x56f98d(0x161),_0x3aa7ef+_0x56f98d(0x1c6)+_0x44fc98+'\x20'+_0x3694ee+'\x20#'+formatResult(_0x3ff2fc[_0x56f98d(0x177)],0x8)+'\x20@'+formatResult(_0x3ff2fc[_0x56f98d(0x12a)],0x8));else logHistory(_0x56f98d(0x161),_0x3aa7ef+'\x20order:\x20'+_0x44fc98+'\x20'+_0x3694ee+'\x20#'+formatResult(_0x3ff2fc[_0x56f98d(0x1dc)],0x8)+'\x20@'+formatResult(_0x3ff2fc['price'],0x8));_0x3ff2fc[_0x56f98d(0x226)]=_0x5dad10['coin'],await updateCoinResults(_0x3ff2fc);if(config[_0x56f98d(0x146)]!=0x0){let _0x13539d=null;if(cooldownTracker[_0x56f98d(0x138)]==config[_0x56f98d(0x146)]-0x1)_0x13539d=cooldownTracker['shift']();const _0x171b6c=getTimeStamp();cooldownTracker[_0x56f98d(0x1f3)](_0x171b6c);if(_0x13539d){const _0x444768=fns[_0x56f98d(0x1ab)](new Date(_0x171b6c),new Date(_0x13539d));_0x444768<cooldownInterval&&(logHistory(_0x56f98d(0x1cd),_0x56f98d(0x1aa)+config['cooldown']+_0x56f98d(0x210)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x56f98d(0x227)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x3901d2){if(_0x3901d2['toString']()[_0x56f98d(0x1e5)](_0x56f98d(0x16e)))logHistory(_0x56f98d(0x1cd),_0x56f98d(0x1fd)+_0x44fc98);else{if(_0x3901d2[_0x56f98d(0x17c)]()['includes']('Invalid\x20quantity'))logHistory('error',_0x56f98d(0x164)+_0x44fc98);else await handleError(_0x3901d2,_0x56f98d(0x137));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x56f98d(0x20e)]==_0x56f98d(0x19a)?logHistory(_0x56f98d(0x1cd),_0x56f98d(0x139)):logHistory(_0x56f98d(0x1cd),_0x56f98d(0x1c5)));else coolingDown&&(!config['headless']&&logHistory('error',_0x56f98d(0x1af)));}}function logHistory(_0x3c0ed5,_0x43997b,_0xec3a88=''){const _0x5da54b=_0x323520;let _0xbce0ea={'time':getTimeStamp(),'type':_0x3c0ed5,'event':_0x43997b};dbLogs[_0x5da54b(0x127)](_0x5da54b(0x19e))['push'](_0xbce0ea)[_0x5da54b(0x123)]();if(_0xec3a88=='')_0xec3a88=_0x43997b;proxyEmit(_0x5da54b(0x150),{'log':_0xbce0ea,'summary':_0xec3a88}),process[_0x5da54b(0x1d6)]({'telegram':_0xbce0ea}),logging(''+_0xbce0ea[_0x5da54b(0x150)]);}function emitHistory(_0x66cd3f={}){const _0x4190f2=_0x323520;Object['keys'](_0x66cd3f)[_0x4190f2(0x138)]==0x0&&(_0x66cd3f={'type':[_0x4190f2(0x161),_0x4190f2(0x150)],'event':'','page':0x1});if(_0x66cd3f[_0x4190f2(0x145)][_0x4190f2(0x1e5)](_0x4190f2(0x150)))_0x66cd3f[_0x4190f2(0x145)][_0x4190f2(0x1b8)](_0x66cd3f['type'][_0x4190f2(0x143)](_0x4190f2(0x150)),0x1,_0x4190f2(0x1cd),_0x4190f2(0x197));if(dbLogs[_0x4190f2(0x19d)](_0x4190f2(0x19e))[_0x4190f2(0x149)]()){let _0x28867b=dbLogs[_0x4190f2(0x127)](_0x4190f2(0x19e))[_0x4190f2(0x1db)](_0xe92020=>{const _0x2aeb6b=_0x4190f2;if(_0x66cd3f[_0x2aeb6b(0x145)]['length']==0x0)return![];else return _0x66cd3f[_0x2aeb6b(0x145)][_0x2aeb6b(0x1e5)](_0xe92020[_0x2aeb6b(0x145)]);})[_0x4190f2(0x1db)](_0x363798=>{const _0x28018f=_0x4190f2;if(_0x66cd3f[_0x28018f(0x150)]=='')return!![];else return _0x363798[_0x28018f(0x150)][_0x28018f(0x168)]()[_0x28018f(0x1e5)](_0x66cd3f[_0x28018f(0x150)]['toLowerCase']());})[_0x4190f2(0x215)](_0x4190f2(0x124)),_0x4a7e01=_0x28867b[_0x4190f2(0x149)]()['length'];_0x28867b=_0x28867b[_0x4190f2(0x1c3)]()[_0x4190f2(0x1fa)]((_0x66cd3f['page']-0x1)*logPageSize,_0x66cd3f[_0x4190f2(0x1e9)]*logPageSize-0x1)['reverse']()[_0x4190f2(0x149)](),proxyEmit(_0x4190f2(0x170),{'logs':_0x28867b,'total':_0x4a7e01});}else proxyEmit(_0x4190f2(0x170),{'logs':[],'total':0x0});}async function pauseBot(_0x47b686){const _0x386370=_0x323520,_0x5bb7bf=new Date()[_0x386370(0x1a1)]();if(!lastBotPause)lastBotPause=new Date()[_0x386370(0x1a1)](),consecutivePauses=0x1;else{if(_0x5bb7bf-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x386370(0x225)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x386370(0x1a1)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x47b686),botPaused=![],reset();}}async function handleError(_0x521c44,_0x10c784,_0x17c812=''){const _0x1fe884=_0x323520;if(_0x521c44[_0x1fe884(0x17c)]()['includes']('DDoSProtection'))logHistory(_0x1fe884(0x1cd),_0x10c784+_0x1fe884(0x12e)),await pauseBot(pauseBotInterval);else{if(_0x521c44[_0x1fe884(0x17c)]()['includes'](_0x1fe884(0x202)))logHistory('error',_0x10c784+_0x1fe884(0x20a)),await pauseBot(pauseBotInterval);else{if(_0x521c44[_0x1fe884(0x17c)]()['includes']('RequestTimeout'))logHistory('error',_0x10c784+_0x1fe884(0x1dd)),await pauseBot(pauseBotInterval);else{if(_0x521c44[_0x1fe884(0x17c)]()[_0x1fe884(0x1e5)](_0x1fe884(0x1f6)))logHistory('error',_0x10c784+_0x1fe884(0x15a)),logHistory(_0x1fe884(0x1cd),_0x1fe884(0x156)),process[_0x1fe884(0x1d6)]({'stop':_0x1fe884(0x1df)});else{if(_0x521c44[_0x1fe884(0x17c)]()[_0x1fe884(0x1e5)](_0x1fe884(0x218)))logHistory(_0x1fe884(0x1cd),_0x10c784+_0x1fe884(0x179)),logHistory(_0x1fe884(0x1cd),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x1fe884(0x1d6)]({'stop':_0x1fe884(0x1df)});else{if(_0x521c44[_0x1fe884(0x17c)]()[_0x1fe884(0x1e5)](_0x1fe884(0x167)))logHistory(_0x1fe884(0x1cd),_0x10c784+_0x1fe884(0x166)),logHistory(_0x1fe884(0x1cd),_0x1fe884(0x156)),process[_0x1fe884(0x1d6)]({'stop':'kill'});else{if(_0x521c44['toString']()[_0x1fe884(0x1e5)](_0x1fe884(0x1fe)))logHistory('error',_0x10c784+_0x1fe884(0x189)),logHistory(_0x1fe884(0x1cd),_0x1fe884(0x156)),process['send']({'stop':_0x1fe884(0x1df)});else{if(_0x521c44[_0x1fe884(0x17c)]()[_0x1fe884(0x1e5)](_0x1fe884(0x217)))logHistory(_0x1fe884(0x1cd),_0x10c784+_0x1fe884(0x1f1)),logHistory('error',_0x1fe884(0x156)),process[_0x1fe884(0x1d6)]({'stop':_0x1fe884(0x1df)});else _0x521c44[_0x1fe884(0x17c)]()[_0x1fe884(0x1e5)]('InsufficientFunds')?logHistory('error',_0x10c784+_0x1fe884(0x200)):(logHistory(_0x1fe884(0x1cd),_0x10c784+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0x10c784+_0x1fe884(0x135),_0x521c44),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x45d732,_0x4b0798){const _0x2c969d=_0x323520;return parseFloat(_0x45d732[_0x2c969d(0x216)](_0x4b0798));}function logging(_0x3b8e1e,_0x5b911d=''){const _0x1efd3c=_0x323520;console[_0x1efd3c(0x1b5)](getTimeStamp()+_0x1efd3c(0x228)+botID+_0x1efd3c(0x14e)+_0x3b8e1e,_0x5b911d);}function getServerTime(){const _0x5a2e2a=_0x323520,_0x304cef=new Date();return _0x304cef[_0x5a2e2a(0x184)]()+'/'+(_0x304cef[_0x5a2e2a(0x1cb)]()+0x1)['toString']()[_0x5a2e2a(0x201)](0x2,'0')+'/'+_0x304cef[_0x5a2e2a(0x16a)]()[_0x5a2e2a(0x17c)]()[_0x5a2e2a(0x201)](0x2,'0')+'\x20'+_0x304cef[_0x5a2e2a(0x1f9)]()[_0x5a2e2a(0x17c)]()['padStart'](0x2,'0')+':'+_0x304cef[_0x5a2e2a(0x1eb)]()[_0x5a2e2a(0x17c)]()[_0x5a2e2a(0x201)](0x2,'0')+':'+_0x304cef['getSeconds']()[_0x5a2e2a(0x17c)]()[_0x5a2e2a(0x201)](0x2,'0');}function getTimeStamp(){const _0x120490=_0x323520,_0x328b66=shiftedTime();return _0x328b66[_0x120490(0x184)]()+'/'+(_0x328b66[_0x120490(0x1cb)]()+0x1)[_0x120490(0x17c)]()['padStart'](0x2,'0')+'/'+_0x328b66[_0x120490(0x16a)]()[_0x120490(0x17c)]()['padStart'](0x2,'0')+'\x20'+_0x328b66[_0x120490(0x1f9)]()[_0x120490(0x17c)]()['padStart'](0x2,'0')+':'+_0x328b66[_0x120490(0x1eb)]()['toString']()[_0x120490(0x201)](0x2,'0')+':'+_0x328b66[_0x120490(0x223)]()['toString']()[_0x120490(0x201)](0x2,'0');}function getDate(){const _0x1cc322=_0x323520,_0x20a58f=shiftedTime();return _0x20a58f[_0x1cc322(0x184)]()+'/'+(_0x20a58f['getMonth']()+0x1)[_0x1cc322(0x17c)]()[_0x1cc322(0x201)](0x2,'0')+'/'+_0x20a58f[_0x1cc322(0x16a)]()[_0x1cc322(0x17c)]()[_0x1cc322(0x201)](0x2,'0');}function getHour(){const _0x10cf43=_0x323520,_0x96e3d2=shiftedTime();return _0x96e3d2[_0x10cf43(0x1f9)]()[_0x10cf43(0x17c)]()[_0x10cf43(0x201)](0x2,'0');}function sleep(_0x506aac){return new Promise(_0x2a1ad5=>setTimeout(_0x2a1ad5,_0x506aac));}function shiftedTime(){const _0x41065a=_0x323520,_0xdba63f=new Date();let _0x2900fc=_0xdba63f;if(config&&config[_0x41065a(0x140)]!==0x0)_0x2900fc=fns['add'](_0xdba63f,{'hours':config[_0x41065a(0x140)]});return _0x2900fc;}