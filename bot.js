const _0x9abfb9=_0x31af;(function(_0x2b778b,_0x2b2176){const _0x6f6759=_0x31af,_0x40a327=_0x2b778b();while(!![]){try{const _0xf26355=-parseInt(_0x6f6759(0x2f1))/0x1*(parseInt(_0x6f6759(0x31f))/0x2)+parseInt(_0x6f6759(0x30d))/0x3+-parseInt(_0x6f6759(0x1de))/0x4*(parseInt(_0x6f6759(0x200))/0x5)+parseInt(_0x6f6759(0x1d9))/0x6*(-parseInt(_0x6f6759(0x25d))/0x7)+-parseInt(_0x6f6759(0x2c1))/0x8+parseInt(_0x6f6759(0x2a5))/0x9+-parseInt(_0x6f6759(0x1e2))/0xa*(-parseInt(_0x6f6759(0x1d5))/0xb);if(_0xf26355===_0x2b2176)break;else _0x40a327['push'](_0x40a327['shift']());}catch(_0x3723b7){_0x40a327['push'](_0x40a327['shift']());}}}(_0x304b,0x4c522));const _0x27c9dc=function(){let _0x104b0f=!![];return function(_0x55aa4d,_0xc6e689){const _0x4ee632=_0x104b0f?function(){const _0x36e949=_0x31af;if(_0xc6e689){const _0x3ed030=_0xc6e689[_0x36e949(0x23a)](_0x55aa4d,arguments);return _0xc6e689=null,_0x3ed030;}}:function(){};return _0x104b0f=![],_0x4ee632;};}(),_0x5c4b04=_0x27c9dc(this,function(){const _0x44d585=_0x31af;return _0x5c4b04[_0x44d585(0x240)]()['search'](_0x44d585(0x2b6))[_0x44d585(0x240)]()[_0x44d585(0x33f)](_0x5c4b04)[_0x44d585(0x2d6)](_0x44d585(0x2b6));});_0x5c4b04();'use strict';const ccxt=require(_0x9abfb9(0x328)),low=require(_0x9abfb9(0x260)),FileSync=require(_0x9abfb9(0x2da)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x9abfb9(0x204))[_0x9abfb9(0x336)],util=require(_0x9abfb9(0x277)),argv=require('yargs/yargs')(process['argv'][_0x9abfb9(0x34d)](0x2))['argv'],path=require('path');let exchange;global['ticker']={},global['change']={};const usdBasecoins=[_0x9abfb9(0x267),_0x9abfb9(0x1f1),_0x9abfb9(0x1cc),_0x9abfb9(0x341),_0x9abfb9(0x22e),_0x9abfb9(0x1fb)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x9abfb9(0x31b)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x9abfb9(0x2ca)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x9abfb9(0x2e7)+pauseBotInterval/0xea60+_0x9abfb9(0x1d8),pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x9abfb9(0x2e7)+pauseBotIntervalLong/0xea60+_0x9abfb9(0x1d8),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x9abfb9(0x217))['version'],botID=process[_0x9abfb9(0x1c5)][0x2]||_0x9abfb9(0x29f),pattern=/^[0-9]{3}$/;!pattern[_0x9abfb9(0x1e0)](botID)&&(console[_0x9abfb9(0x1df)]('Error:\x20Invalid\x20argument\x20'+botID+_0x9abfb9(0x264)),killBot());const userID=process[_0x9abfb9(0x1c5)][0x3]||'',configpath=userID?_0x9abfb9(0x2c3)+userID+'/':_0x9abfb9(0x2c3),logspath=userID?_0x9abfb9(0x32c)+userID+'/':_0x9abfb9(0x32c),loggerfile=fs[_0x9abfb9(0x23d)](logspath+_0x9abfb9(0x221),{'flags':'a'});!fs[_0x9abfb9(0x24b)](configpath)&&fs[_0x9abfb9(0x2a3)](configpath);!fs[_0x9abfb9(0x24b)](logspath)&&fs[_0x9abfb9(0x2a3)](logspath);function _0x31af(_0xf081e,_0x51d843){const _0x3f4fe9=_0x304b();return _0x31af=function(_0x5c4b04,_0x27c9dc){_0x5c4b04=_0x5c4b04-0x1c0;let _0x304bcb=_0x3f4fe9[_0x5c4b04];return _0x304bcb;},_0x31af(_0xf081e,_0x51d843);}const configfile=configpath+_0x9abfb9(0x1d4)+botID+'-config.json',logfile=configpath+_0x9abfb9(0x1d4)+botID+_0x9abfb9(0x325),performancefile=configpath+_0x9abfb9(0x1d4)+botID+_0x9abfb9(0x256),coinresultsfile=configpath+_0x9abfb9(0x1d4)+botID+_0x9abfb9(0x214),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x9abfb9(0x252),configbackuppath=configpath+_0x9abfb9(0x2d9),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x9abfb9(0x29e)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x9abfb9(0x29e)]({'data':[],'version':serverversion})[_0x9abfb9(0x2e4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x9abfb9(0x2e4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x9abfb9(0x344),'rsaStandard':_0x9abfb9(0x27d)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2139a0=>{const _0x13b8bf=_0x9abfb9;console[_0x13b8bf(0x1df)](_0x2139a0);},'simple':_0x15e4f3=>{const _0x44634f=_0x9abfb9;console[_0x44634f(0x1df)](_0x15e4f3),loggerfile[_0x44634f(0x2e4)](util[_0x44634f(0x22b)](_0x15e4f3)+'\x0a');},'full':async(_0x2be07b,_0xa4d8ab='')=>{const _0x26a94c=_0x9abfb9;let _0x4baebb;if(config[_0x26a94c(0x340)])_0x4baebb=getTimeStamp()+':\x20'+config['botname']+_0x26a94c(0x2df)+_0x2be07b;else _0x4baebb=getTimeStamp()+_0x26a94c(0x1d1)+botID+_0x26a94c(0x2df)+_0x2be07b;console['log'](_0x4baebb),loggerfile[_0x26a94c(0x2e4)](util[_0x26a94c(0x22b)](_0x4baebb)+'\x0a'),_0xa4d8ab&&(console['log'](_0xa4d8ab),loggerfile['write'](util['format'](_0xa4d8ab)+'\x0a'));},'debug':async(_0x4f11fa,_0x5320f0='')=>{const _0xba6d5d=_0x9abfb9;let _0x5b28f0;if(config[_0xba6d5d(0x340)])_0x5b28f0=getTimeStamp()+':\x20'+config['botname']+_0xba6d5d(0x1c2)+_0x4f11fa;else _0x5b28f0=getTimeStamp()+_0xba6d5d(0x1d1)+botID+_0xba6d5d(0x1c2)+_0x4f11fa;if(debugging)console[_0xba6d5d(0x1df)](_0x5b28f0);loggerfile[_0xba6d5d(0x2e4)](util['format'](_0x5b28f0)+'\x0a');if(_0x5320f0){if(debugging)console[_0xba6d5d(0x1df)](_0x5320f0);loggerfile['write'](util[_0xba6d5d(0x22b)](_0x5320f0)+'\x0a');}}};process['on']('uncaughtException',function(_0x50f5bf){const _0x416d45=_0x9abfb9;logHistory(_0x416d45(0x2b8),_0x416d45(0x21b)),logger['debug']('Uncaught\x20Exception:',_0x50f5bf);});settings[_0x9abfb9(0x299)]!=config[_0x9abfb9(0x299)]&&updateTimeshift(settings[_0x9abfb9(0x299)]);settings[_0x9abfb9(0x2c2)]!=config[_0x9abfb9(0x2c2)]&&updateOnepagemode(settings[_0x9abfb9(0x2c2)]);process['send']({'started':'running'},_0x1c8789=>{}),initializeProcessListeners();function proxyEmit(_0x1a45ec,_0x1b3583=null){const _0x4f37a4=_0x9abfb9;process[_0x4f37a4(0x262)]({'function':_0x1a45ec,'args':_0x1b3583},_0x489f48=>{});}function initializeProcessListeners(){const _0x9b4486=_0x9abfb9;process['on'](_0x9b4486(0x218),_0x39eab1=>{const _0x4fcfd7=_0x9b4486;switch(Object[_0x4fcfd7(0x2cb)](_0x39eab1)[0x0]){case _0x4fcfd7(0x299):_0x39eab1[_0x4fcfd7(0x299)]!=undefined&&(settings['timeshift']=_0x39eab1[_0x4fcfd7(0x299)],updateTimeshift(settings[_0x4fcfd7(0x299)]));break;case'onepagemode':_0x39eab1[_0x4fcfd7(0x2c2)]!=undefined&&(settings[_0x4fcfd7(0x2c2)]=_0x39eab1[_0x4fcfd7(0x2c2)],updateOnepagemode(settings[_0x4fcfd7(0x2c2)]));break;case _0x4fcfd7(0x1e9):_0x39eab1['bots']!=undefined&&(bots=JSON[_0x4fcfd7(0x21d)](_0x39eab1[_0x4fcfd7(0x1e9)]),proxyEmit(_0x4fcfd7(0x1e9),bots));break;case _0x4fcfd7(0x335):switch(_0x39eab1[_0x4fcfd7(0x335)]){case'initclient':initclient();break;case _0x4fcfd7(0x281):toggleBotMode();break;case _0x4fcfd7(0x270):emitHistory(_0x39eab1[_0x4fcfd7(0x1f5)]);break;case _0x4fcfd7(0x34b):deleteHistoryAlerts(_0x39eab1[_0x4fcfd7(0x1f5)]);break;case'getPortfolio':getPortfolio(_0x39eab1['args']);break;case'storeConfiguration':storeConfiguration(_0x39eab1[_0x4fcfd7(0x1f5)]);break;case _0x4fcfd7(0x33c):storeHeadless(_0x39eab1['args']);break;case'storeFiat':storeFiat(_0x39eab1[_0x4fcfd7(0x1f5)]);break;case'resetHistory':resetHistory();break;case _0x4fcfd7(0x2c4):getStartingBalances(getNormalizedPerformance());break;case _0x4fcfd7(0x289):placeOrder(_0x39eab1[_0x4fcfd7(0x1f5)]);break;case'cancelLoading':cancelLoading();break;case _0x4fcfd7(0x28f):showConfig();break;case _0x4fcfd7(0x2e0):sendMetricsTelegram();break;case _0x4fcfd7(0x20c):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3d0238=![]){const _0x43c074=_0x9abfb9;logger[_0x43c074(0x1fe)](_0x43c074(0x296)+(_0x3d0238?'exchange\x20reloaded':_0x43c074(0x2f0))+_0x43c074(0x22d)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x3d0238)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x43c074(0x2fe)]!=''&&config[_0x43c074(0x2fe)]!='***'){loadingProgress=0x0;if(_0x3d0238){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x48784b){handleErrorNoStop(_0x48784b,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x5e5496=await getCoins();[currentCoins,currentCoinsAll]=_0x5e5496,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x43c074(0x34c)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x43c074(0x348)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2c6e82=_0x9abfb9;exchangeStopped=!![];try{await exchange[_0x2c6e82(0x2ff)]();}catch(_0x3f48a7){await handleError(_0x3f48a7,_0x2c6e82(0x309));}}async function reloadExchange(){const _0x32324c=_0x9abfb9;while(lockOrders!=ORDERS[_0x32324c(0x2ca)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x32324c(0x1fe)](_0x32324c(0x34a)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1e2833=config['exchange'],_0x3dbc15=config[_0x9abfb9(0x2fe)],_0x29478b=config['apiSecret'],_0xdfa70a=config['apiPassword']){const _0x52a762=_0x9abfb9;exchange&&await stopExchange();!supportedExchanges()[_0x52a762(0x228)](_0x1e2833)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x1e2833+_0x52a762(0x251)),killBot());const _0x41384c=ccxt[_0x52a762(0x2b3)][_0x1e2833[_0x52a762(0x201)]()];exchange=new _0x41384c({'apiKey':_0x3dbc15,'secret':_0x29478b,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0xdfa70a)exchange[_0x52a762(0x24d)]=_0xdfa70a;}function setStableCoins(){const _0x2c0781=_0x9abfb9;let _0x27dc23=config['basecoin']==_0x2c0781(0x332)?'ETH':config[_0x2c0781(0x33b)]=='PAXG'?_0x2c0781(0x1dd):_0x2c0781(0x25f),_0x5eab2c=!allSymbols['includes'](_0x27dc23+'/USD')?_0x2c0781(0x341):_0x2c0781(0x267),_0x338d41=!allSymbols['includes'](_0x27dc23+'/EUR')?_0x5eab2c:'EUR';stablecoins={'eur':{'coin':''+_0x27dc23+_0x338d41,'symbol':_0x27dc23+'/'+_0x338d41},'usd':{'coin':''+_0x27dc23+_0x5eab2c,'symbol':_0x27dc23+'/'+_0x5eab2c}};}async function initwsCcxt(){const _0x4ac6b3=_0x9abfb9;initCycle++;const _0x581905=initCycle;let _0x5b82e4=[];config[_0x4ac6b3(0x303)][_0x4ac6b3(0x234)](_0x258bea=>{const _0x32ca36=_0x4ac6b3;if(!_0x258bea[_0x32ca36(0x2cf)]&&_0x258bea[_0x32ca36(0x2f5)]!=config[_0x32ca36(0x33b)])_0x5b82e4[_0x32ca36(0x1ea)](_0x258bea[_0x32ca36(0x282)]);});if(!_0x5b82e4[_0x4ac6b3(0x228)](stablecoins[_0x4ac6b3(0x209)][_0x4ac6b3(0x282)]))_0x5b82e4['push'](stablecoins['eur']['symbol']);if(!_0x5b82e4[_0x4ac6b3(0x228)](stablecoins[_0x4ac6b3(0x266)]['symbol']))_0x5b82e4[_0x4ac6b3(0x1ea)](stablecoins[_0x4ac6b3(0x266)][_0x4ac6b3(0x282)]);if(config['exchange'][_0x4ac6b3(0x25e)](_0x4ac6b3(0x1ff))&&config[_0x4ac6b3(0x33b)]!=_0x4ac6b3(0x1dd)){if(!_0x5b82e4[_0x4ac6b3(0x228)](_0x4ac6b3(0x339)+config['basecoin']))_0x5b82e4[_0x4ac6b3(0x1ea)](_0x4ac6b3(0x339)+config['basecoin']);}loadCoins(_0x5b82e4),_0x5b82e4=validateSymbols(_0x5b82e4);const _0x4fef2d=async _0xa77a58=>{const _0x4cff74=_0x4ac6b3;let _0x4df3c9;try{const _0x1d9132=await getTickers(_0xa77a58);Object[_0x4cff74(0x245)](_0x1d9132)[_0x4cff74(0x234)](_0x2ec6b7=>{const _0x55c818=_0x4cff74;_0x4df3c9=_0x2ec6b7[0x1]['symbol'],global[_0x55c818(0x257)][noslash(_0x4df3c9)]=_0x2ec6b7[0x1][_0x55c818(0x292)],global[_0x55c818(0x315)][_0x4df3c9]=_0x2ec6b7[0x1][_0x55c818(0x1e5)];});}catch(_0x3b6fb0){await handleError(_0x3b6fb0,_0x4cff74(0x306),_0x4df3c9);}},_0x194d8c=async _0x5ddea3=>{const _0x54f06e=_0x4ac6b3;while(initCycle==_0x581905){if(!botPaused)try{const _0x5bae00=await exchange[_0x54f06e(0x254)](_0x5ddea3);global[_0x54f06e(0x257)][noslash(_0x5bae00[0x0]['symbol'])]=_0x5bae00[0x0][_0x54f06e(0x2bb)],await sleep(0x3e8);}catch(_0x488246){if(!exchangeStopped)await handleError(_0x488246,'watchTrades()',_0x5ddea3);}else await sleep(0x64);}},_0x280649=async _0x5c2bbf=>{const _0x2e7e59=_0x4ac6b3;while(initCycle==_0x581905){if(!botPaused){let _0x9fe592;try{await sleep(0x3c*0x3e8);const _0x5b7558=await getTickers(_0x5c2bbf);Object['entries'](_0x5b7558)[_0x2e7e59(0x234)](_0x1ae985=>{const _0x2caaf3=_0x2e7e59;_0x9fe592=_0x1ae985[0x1][_0x2caaf3(0x282)],global[_0x2caaf3(0x315)][_0x9fe592]=_0x1ae985[0x1][_0x2caaf3(0x1e5)];});}catch(_0x5d720d){if(!exchangeStopped)await handleError(_0x5d720d,'fetchTickers()',_0x9fe592);}}else await sleep(0x64);}},_0x244fef=async _0x745b0c=>{const _0x21c6cd=_0x4ac6b3;while(initCycle==_0x581905){if(!botPaused)try{const _0x2b95f2=await exchange['watchOrders'](_0x745b0c);initCycle==_0x581905&&_0x2b95f2[_0x21c6cd(0x234)](_0x37e639=>{updateNumberCoinsCcxt(_0x37e639);});}catch(_0x21ac58){if(!exchangeStopped)await handleError(_0x21ac58,_0x21c6cd(0x2ac));}else await sleep(0x64);}};_0x4fef2d(_0x5b82e4),_0x280649(_0x5b82e4),_0x5b82e4[_0x4ac6b3(0x234)](_0x1bc4ca=>{_0x194d8c(_0x1bc4ca),_0x244fef(_0x1bc4ca);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x18b1f9){const _0x152fbf=_0x9abfb9;let _0x449cbd={};try{if(config['exchange']!=_0x152fbf(0x278))_0x449cbd=await exchange[_0x152fbf(0x244)](_0x18b1f9);else for(const _0x28a386 of _0x18b1f9){const _0x1f0f42=await exchange[_0x152fbf(0x2b1)](_0x28a386);_0x449cbd[_0x28a386]=_0x1f0f42;}return _0x449cbd;}catch(_0x2ab4a6){throw _0x2ab4a6;}}async function watchTransactions(){const _0x344f85=_0x9abfb9;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x55888c=await getCoins(),[_0x4e9f51,_0x5a53d4]=_0x55888c;let _0x4afb02=[];currentCoins['forEach'](_0x1eb25d=>{const _0x1bea52=_0x31af,_0x29b60d=_0x4e9f51[_0x1bea52(0x1e4)](_0x3a6834=>_0x3a6834['coin']==_0x1eb25d[_0x1bea52(0x2f5)]);if(_0x29b60d){if(_0x1eb25d['number']!=_0x29b60d[_0x1bea52(0x33a)]){let _0x1506da;if(_0x1eb25d[_0x1bea52(0x2f5)]!=config[_0x1bea52(0x33b)]){const _0x335e69=global['ticker'][noslash(_0x1eb25d[_0x1bea52(0x282)])];_0x1506da=_0x1eb25d['reverse']?0x1/_0x335e69:_0x335e69;}else _0x1506da=0x1;_0x4afb02[_0x1bea52(0x1ea)]({'coin':_0x1eb25d[_0x1bea52(0x2f5)],'symbol':_0x1eb25d[_0x1bea52(0x282)],'price':_0x1506da,'number':Number(formatResult(_0x29b60d[_0x1bea52(0x33a)]-_0x1eb25d['number'],0x8)),'basecoinvalue':_0x1506da*(_0x29b60d[_0x1bea52(0x33a)]-_0x1eb25d[_0x1bea52(0x33a)])});}}});if(_0x4afb02['length']==0x1&&!blockTransactionDetection){if(config[_0x344f85(0x33d)]){logger[_0x344f85(0x1fe)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x4afb02[0x0][_0x344f85(0x274)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x344f85(0x2e6)]);if(lastFees[_0x344f85(0x2e6)]==0x0||Math[_0x344f85(0x238)](_0x4afb02[0x0][_0x344f85(0x274)])>lastFees[_0x344f85(0x2e6)]){delete _0x4afb02[0x0][_0x344f85(0x282)],delete _0x4afb02[0x0][_0x344f85(0x274)];let _0x27b42f=[],_0x4668d7=[...config['liquidity']]||[],_0x22ea83=config['liquidity'];_0x4668d7[_0x344f85(0x239)]((_0x1cd26b,_0x14dd54)=>_0x1cd26b[_0x344f85(0x1ca)]>_0x14dd54[_0x344f85(0x1ca)]?-0x1:_0x14dd54[_0x344f85(0x1ca)]>_0x1cd26b[_0x344f85(0x1ca)]?0x1:0x0);const _0x11058f=getDate();if(_0x4668d7[0x0]){const _0x309149=fns[_0x344f85(0x21d)](_0x4668d7[0x0][_0x344f85(0x1ca)],_0x344f85(0x2bc),new Date()),_0x17b817=fns[_0x344f85(0x21d)](_0x11058f,_0x344f85(0x2bc),new Date());if(fns[_0x344f85(0x285)](_0x309149,_0x17b817)){_0x27b42f=_0x4668d7[0x0][_0x344f85(0x227)];const _0x27b9e0=_0x27b42f[_0x344f85(0x1e4)](_0x382b0d=>_0x382b0d['coin']==_0x4afb02[0x0][_0x344f85(0x2f5)]);_0x27b9e0?(_0x27b9e0[_0x344f85(0x33a)]+=_0x4afb02[0x0][_0x344f85(0x33a)],_0x27b9e0['number']==0x0&&(_0x27b42f=_0x27b42f['filter'](_0x2d70eb=>{const _0x43e74b=_0x344f85;return _0x2d70eb[_0x43e74b(0x2f5)]!=_0x4afb02[0x0][_0x43e74b(0x2f5)];}))):_0x27b42f[_0x344f85(0x1ea)](_0x4afb02[0x0]);const _0x47f3e3=_0x22ea83['find'](_0x2b867f=>_0x2b867f[_0x344f85(0x1ca)]==_0x11058f);_0x47f3e3[_0x344f85(0x227)]=_0x27b42f;}else _0x22ea83[_0x344f85(0x1ea)]({'date':_0x11058f,'changes':[_0x4afb02[0x0]]});}const _0x2f0a89=_0x22ea83[_0x344f85(0x1e4)](_0xe1dd76=>_0xe1dd76[_0x344f85(0x1ca)]==_0x11058f);if(_0x2f0a89){let _0x43ab9a=!![];_0x2f0a89['changes'][_0x344f85(0x234)](_0x3cabe7=>{if(_0x3cabe7['number']!=0x0)_0x43ab9a=![];}),_0x43ab9a&&(_0x22ea83=_0x22ea83[_0x344f85(0x20d)](_0x5cbf66=>{const _0x54789f=_0x344f85;return _0x5cbf66[_0x54789f(0x1ca)]!=_0x11058f;}));}let _0x2669b1=dbConfig[_0x344f85(0x334)](_0x344f85(0x205))[_0x344f85(0x1e4)]({'botID':botID})['value']();_0x2669b1&&(dbConfig[_0x344f85(0x334)](_0x344f85(0x205))['find']({'botID':botID})[_0x344f85(0x314)]({'liquidity':_0x22ea83})[_0x344f85(0x2e4)](),config[_0x344f85(0x1f8)]=_0x22ea83),logHistory(_0x344f85(0x2bf),'Portfolio\x20change\x20detected:\x20'+Math[_0x344f85(0x238)](_0x4afb02[0x0][_0x344f85(0x33a)])+'\x20'+_0x4afb02[0x0][_0x344f85(0x2f5)]+'\x20'+(_0x4afb02[0x0][_0x344f85(0x33a)]>0x0?_0x344f85(0x333):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x344f85(0x2a4),emittedConfiguration());}else logger[_0x344f85(0x1fe)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x344f85(0x238)](_0x4afb02[0x0]['number'])+'\x20'+_0x4afb02[0x0][_0x344f85(0x2f5)]+'\x20'+(_0x4afb02[0x0]['number']>0x0?_0x344f85(0x333):'removed'));transactionDetected=!![];}else logger['debug'](_0x344f85(0x220)+Math[_0x344f85(0x238)](_0x4afb02[0x0][_0x344f85(0x33a)])+'\x20'+_0x4afb02[0x0]['coin']+'\x20'+(_0x4afb02[0x0]['number']>0x0?_0x344f85(0x333):_0x344f85(0x34e))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x4e9f51,currentCoinsAll=_0x5a53d4,await sleep(watchTransactionsInterval);}catch(_0x28905c){if(!exchangeStopped)await handleError(_0x28905c,_0x344f85(0x1cf));}else await sleep(0x64);}}async function loadSymbols(){const _0x4e5f7c=_0x9abfb9;try{markets=await exchange[_0x4e5f7c(0x2f2)](),allSymbols=[],Object[_0x4e5f7c(0x245)](markets)[_0x4e5f7c(0x234)](_0x3e0b59=>{const _0x39d537=_0x4e5f7c;_0x3e0b59[0x1][_0x39d537(0x2ef)]&&_0x3e0b59[0x1][_0x39d537(0x23e)]&&allSymbols[_0x39d537(0x1ea)](_0x3e0b59[0x0]);});}catch(_0x398ff5){throw _0x398ff5;}}function validateSymbols(_0x5a3e7a){const _0x368f69=_0x9abfb9;let _0x28fbd2=[];return _0x5a3e7a[_0x368f69(0x234)](_0xdcaa2=>{const _0x2cb3a6=_0x368f69;!allSymbols['includes'](_0xdcaa2)?logHistory(_0x2cb3a6(0x2b8),'Invalid\x20symbol:\x20'+_0xdcaa2+_0x2cb3a6(0x203)):_0x28fbd2[_0x2cb3a6(0x1ea)](_0xdcaa2);}),_0x28fbd2;}async function initclient(){const _0x9dfff1=_0x9abfb9;proxyEmit(_0x9dfff1(0x2a4),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4c8015=getNormalizedPerformance();emitPerformance(_0x4c8015),getStartingBalances(_0x4c8015);}async function toggleBotMode(){const _0x432a3f=_0x9abfb9;let _0x20fce6=dbConfig['get'](_0x432a3f(0x205))[_0x432a3f(0x1e4)]({'botID':botID})[_0x432a3f(0x346)]();if(_0x20fce6){const _0x4588d3=!_0x20fce6[_0x432a3f(0x2c8)];dbConfig['get'](_0x432a3f(0x205))[_0x432a3f(0x1e4)]({'botID':botID})['assign']({'headless':_0x4588d3})['write'](),config[_0x432a3f(0x2c8)]=_0x4588d3,proxyEmit(_0x432a3f(0x2a4),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2ea172=_0x9abfb9;process[_0x2ea172(0x262)]({'updatebotmanager':!![]},_0x4d93af=>{}),logger[_0x2ea172(0x1fe)](_0x2ea172(0x308)+config[_0x2ea172(0x2c8)]);}async function loadCoins(_0x2cb8e6){const _0x44fac5=_0x9abfb9;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x37e740,_0x520882=0x0,_0x58fc58=0x0;_0x2cb8e6['forEach'](_0x2e006a=>{const _0x280ab0=_0x31af;loading[_0x280ab0(0x23f)][_0x280ab0(0x1ea)](_0x2e006a);}),loadingCanceled=![];let _0x336d85=![];while(_0x37e740!=_0x2cb8e6[_0x44fac5(0x348)]+maxLoadingProgress){_0x37e740=loadingProgress,_0x2cb8e6[_0x44fac5(0x234)](_0x4aa234=>{const _0x13e261=_0x44fac5;if(global[_0x13e261(0x257)][noslash(_0x4aa234)]){loading['remainingSymbols']=loading[_0x13e261(0x23f)]['filter'](_0x435d25=>_0x435d25!=_0x4aa234);if(!watchedSymbols[_0x13e261(0x228)](_0x4aa234))watchedSymbols['push'](_0x4aa234);_0x37e740++;}}),loading['progress']=Math[_0x44fac5(0x1f3)](_0x37e740/(_0x2cb8e6[_0x44fac5(0x348)]+maxLoadingProgress)*0x64);loading[_0x44fac5(0x342)]!=0x64&&(_0x58fc58>0x1e*0x5&&(loading[_0x44fac5(0x202)]=!![],emitLoadingProgress()),_0x58fc58>0x78*0x5&&!_0x336d85&&(_0x336d85=!![],logHistory('error',_0x44fac5(0x237)+loading[_0x44fac5(0x23f)][_0x44fac5(0x317)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x44fac5(0x2b8),_0x44fac5(0x1d0)+loadCoinsRetryInterval/0xea60+_0x44fac5(0x323)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x38eeb0=_0x44fac5;process[_0x38eeb0(0x262)]({'stop':'restart'},_0x2b594c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x520882!=loading[_0x44fac5(0x342)]&&(_0x520882=loading['progress'],emitLoadingProgress()),_0x58fc58++,await sleep(0xc8);}_0x37e740==_0x2cb8e6[_0x44fac5(0x348)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x44fac5(0x262)]({'status':_0x44fac5(0x2ad),'live':_0x44fac5(0x1d7)},_0x31305b=>{}),_0x336d85&&logHistory(_0x44fac5(0x2bf),_0x44fac5(0x20a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x17393d=_0x9abfb9;proxyEmit(_0x17393d(0x2a4),{...emittedConfiguration(),'configstate':_0x17393d(0x213)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5d1257=_0x9abfb9;let _0x4464c4=global[_0x5d1257(0x257)][stablecoins[_0x5d1257(0x209)]['coin']],_0x4e4a64=global[_0x5d1257(0x257)][stablecoins[_0x5d1257(0x266)]['coin']];return{'eur':Number(_0x4464c4),'usd':Number(_0x4e4a64)};}function capitalize(_0x3c485a){const _0x22a274=_0x9abfb9;return _0x3c485a[_0x22a274(0x1e7)](0x0,0x1)[_0x22a274(0x28a)]()+_0x3c485a[_0x22a274(0x1e7)](0x1);}function supportedExchanges(){const _0x2593e4=_0x9abfb9,_0x21ba1e=['ws',_0x2593e4(0x244),_0x2593e4(0x2b1),'watchTrades','watchOrders',_0x2593e4(0x326),_0x2593e4(0x1ec),_0x2593e4(0x233),_0x2593e4(0x23c),_0x2593e4(0x305)];let _0x1cbed9=[],_0x150c13=[],_0xc3b4a0=ccxt['pro'][_0x2593e4(0x2d5)];_0xc3b4a0['forEach'](_0x52fc68=>{const _0x4457ec=_0x2593e4;try{const _0x3033a9=new ccxt[(_0x4457ec(0x2b3))][_0x52fc68]();_0x150c13[_0x4457ec(0x1ea)](_0x3033a9);}catch(_0x5d4571){}}),_0x150c13[_0x2593e4(0x234)](_0x2df86f=>{const _0x40ff7c=_0x2593e4;let _0x9f85f6=0x0;_0x21ba1e[_0x40ff7c(0x234)](_0x10b8eb=>{const _0x49fa2a=_0x40ff7c;_0x10b8eb in _0x2df86f[_0x49fa2a(0x24e)]&&_0x2df86f[_0x49fa2a(0x24e)][_0x10b8eb]&&_0x9f85f6++;}),_0x9f85f6==_0x21ba1e['length']&&_0x1cbed9[_0x40ff7c(0x1ea)](capitalize(_0x2df86f['id']));});let _0x1683a7=[];return _0xc3b4a0[_0x2593e4(0x234)](_0x4bb9c4=>{const _0x3b46c0=_0x2593e4;_0x4bb9c4=capitalize(_0x4bb9c4);if(!_0x1cbed9[_0x3b46c0(0x228)](_0x4bb9c4))_0x1683a7['push'](_0x4bb9c4);}),_0x1cbed9;}function setStartDatePerformance(){const _0x46c6ad=_0x9abfb9;if(config&&config['liquidity'][0x0]['changes'][_0x46c6ad(0x348)]!=0x0){const _0x52fc18=config['liquidity'][0x0]['changes'];dbPerformance[_0x46c6ad(0x334)](_0x46c6ad(0x235))[_0x46c6ad(0x1e4)]({'date':config[_0x46c6ad(0x33e)]})[_0x46c6ad(0x314)]({'coins':_0x52fc18})['write']();}}async function recreateCoinResults(){const _0x27fd15=_0x9abfb9;let _0x5ad01a,_0x578536=[];try{const _0x16357c=fns['format'](fns[_0x27fd15(0x1f9)](config[_0x27fd15(0x33e)][_0x27fd15(0x1cd)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x445344 of currentCoins){if(_0x445344[_0x27fd15(0x2f5)]!=config[_0x27fd15(0x33b)]){let _0x57ba15=0x0,_0x20887f,_0x160976;_0x5ad01a=await getAllEventOrders(_0x445344['symbol']);if(_0x5ad01a['length']>0x0)_0x5ad01a[_0x27fd15(0x234)](_0x313cca=>{const _0x558a1d=_0x27fd15,_0x32ea9a=_0x445344[_0x558a1d(0x282)]['includes'](config[_0x558a1d(0x33b)]+'/');_0x578536['push']({'datetime':_0x313cca['datetime'],'coin':_0x445344[_0x558a1d(0x2f5)],'symbol':_0x445344[_0x558a1d(0x282)],'side':_0x313cca[_0x558a1d(0x1d6)],'reverse':_0x32ea9a,'amount':formatResult(_0x313cca[_0x558a1d(0x2fc)],0x8),'filled':formatResult(_0x313cca[_0x558a1d(0x2fc)],0x8),'price':formatResult(_0x313cca[_0x558a1d(0x2bb)],0x8)}),_0x57ba15=_0x313cca[_0x558a1d(0x1d6)]==_0x558a1d(0x25c)?_0x57ba15+_0x313cca['filled']:_0x57ba15-_0x313cca[_0x558a1d(0x2fc)];if(!_0x160976)_0x160976=_0x313cca['price'];});_0x20887f=_0x445344[_0x27fd15(0x33a)]-_0x57ba15;let _0x41475e;config[_0x27fd15(0x1f8)][_0x27fd15(0x234)](_0x3f3800=>{const _0x23a127=_0x27fd15;!_0x41475e&&(_0x41475e=_0x3f3800[_0x23a127(0x227)]['find'](_0x24abdd=>_0x24abdd['coin']==_0x445344['coin']),_0x41475e&&(_0x20887f=_0x41475e[_0x23a127(0x33a)],_0x160976=_0x41475e[_0x23a127(0x2bb)]));});let _0x18234e=dbCoinResults[_0x27fd15(0x334)](_0x27fd15(0x226))[_0x27fd15(0x1e4)]({'coin':_0x445344['coin']})[_0x27fd15(0x346)]();_0x18234e={'coin':_0x445344['coin'],'number':_0x20887f,'breakeven':_0x160976,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x27fd15(0x334)](_0x27fd15(0x226))['find']({'coin':_0x445344['coin']})[_0x27fd15(0x314)](_0x18234e)[_0x27fd15(0x2e4)]();}}_0x578536[_0x27fd15(0x239)]((_0x395e46,_0x33012a)=>_0x395e46[_0x27fd15(0x2ce)]>_0x33012a[_0x27fd15(0x2ce)]?0x1:_0x33012a[_0x27fd15(0x2ce)]>_0x395e46['datetime']?-0x1:0x0);let _0x46399a=0x0;for(let _0xe87969 of _0x578536){await updateCoinResults(_0xe87969,!![]);}}catch(_0x27b5a8){await handleError(_0x27b5a8,_0x27fd15(0x22a));}}async function getAllEventOrders(_0x5ccf82){const _0xc0a91a=_0x9abfb9;let _0x58522b=[],_0x5b5a40=dbLogs['get'](_0xc0a91a(0x30e))[_0xc0a91a(0x20d)](_0x187cfd=>{const _0x3bbd24=_0xc0a91a,_0x377a93=_0x187cfd[_0x3bbd24(0x2a6)][_0x3bbd24(0x201)]();return _0x377a93[_0x3bbd24(0x228)](_0x5ccf82[_0x3bbd24(0x201)]())&&(_0x377a93[_0x3bbd24(0x228)](_0x3bbd24(0x2f7))&&_0x377a93['includes'](_0x3bbd24(0x329))||_0x377a93[_0x3bbd24(0x228)](_0x3bbd24(0x2fc))&&_0x377a93['includes'](_0x3bbd24(0x329)));})[_0xc0a91a(0x208)]('time')[_0xc0a91a(0x346)]();return _0x5b5a40[_0xc0a91a(0x234)](_0x19c569=>{const _0x406e06=_0xc0a91a,_0x5ceda9=_0x19c569[_0x406e06(0x2a6)]['includes']('sell')?_0x406e06(0x23b):_0x406e06(0x25c),_0xba8fea=/#([0-9]|\.)+\s/i,_0x41ceb3=Number(_0xba8fea[_0x406e06(0x2ec)](_0x19c569[_0x406e06(0x2a6)])[0x0][_0x406e06(0x34d)](0x1)),_0x3c0ed1=/@([0-9]|\.)+$/i,_0x10cd6d=Number(_0x3c0ed1[_0x406e06(0x2ec)](_0x19c569['event'])[0x0][_0x406e06(0x34d)](0x1));_0x58522b[_0x406e06(0x1ea)]({'datetime':_0x19c569[_0x406e06(0x316)],'coin':symbolToCoin(_0x5ccf82),'symbol':_0x5ccf82,'side':_0x5ceda9,'amount':_0x41ceb3,'filled':_0x41ceb3,'price':_0x10cd6d});}),_0x58522b;}async function getAllOrders(_0x447f54,_0x50146d){const _0x246b3b=_0x9abfb9;let _0x4d32f0=[];while(_0x50146d<exchange[_0x246b3b(0x307)]()){const _0x34e945=0x1f4;try{const _0x57d908=await exchange['fetchClosedOrders'](_0x447f54,_0x50146d,_0x34e945);if(_0x57d908['length'])_0x50146d=_0x57d908[_0x57d908[_0x246b3b(0x348)]-0x1][_0x246b3b(0x297)]+0x1,_0x4d32f0=_0x4d32f0[_0x246b3b(0x2a1)](_0x57d908);else break;}catch(_0x444b77){await handleError(_0x444b77,_0x246b3b(0x224),_0x447f54);}}return _0x4d32f0;}async function validate24hChanges(){const _0x3fbdbd=_0x9abfb9;for(const _0x2559ee of currentCoins){if(_0x2559ee['coin']!=config['basecoin']){let _0x3882e3;_0x2559ee[_0x3fbdbd(0x273)]?_0x3882e3=formatResult((0x1/(global[_0x3fbdbd(0x315)][noslash(_0x2559ee[_0x3fbdbd(0x282)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3882e3=global[_0x3fbdbd(0x315)][noslash(_0x2559ee[_0x3fbdbd(0x282)])],_0x3882e3<config[_0x3fbdbd(0x1f2)]&&(logHistory(_0x3fbdbd(0x2b8),_0x2559ee[_0x3fbdbd(0x2f5)]+_0x3fbdbd(0x1ed)+_0x3882e3+'%'),logHistory('error',_0x3fbdbd(0x29b)),logHistory(_0x3fbdbd(0x2b8),_0x3fbdbd(0x301)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5ef91f,_0x165f53){const _0x1490ef=_0x9abfb9;if(!_0x5ef91f)return!![];const _0xb4dd3f=_0x165f53['split']('.'),_0x376b52=_0x5ef91f[_0x1490ef(0x1ee)]('.');for(var _0x3d0bad=0x0;_0x3d0bad<_0x376b52[_0x1490ef(0x348)];_0x3d0bad++){const _0x5aeea1=~~_0x376b52[_0x3d0bad],_0x3a3c1f=~~_0xb4dd3f[_0x3d0bad];if(_0x5aeea1<_0x3a3c1f)return!![];if(_0x5aeea1>_0x3a3c1f)return![];}return![];}async function oneTimeMigration(){const _0x5b9cb3=_0x9abfb9;let _0x3848ce=dbLogs[_0x5b9cb3(0x334)](_0x5b9cb3(0x1f0))[_0x5b9cb3(0x346)]();if(isOlderVersion(_0x3848ce,_0x5b9cb3(0x241))){let _0x3fb402=[];const _0x23366c=dbLogs['get'](_0x5b9cb3(0x30e))[_0x5b9cb3(0x346)]();_0x23366c[_0x5b9cb3(0x234)](_0x2c149c=>{const _0x13df5e=_0x5b9cb3;_0x3fb402[_0x13df5e(0x1ea)]({'time':_0x2c149c[_0x13df5e(0x316)],'type':_0x2c149c[_0x13df5e(0x28b)],'event':_0x2c149c[_0x13df5e(0x2a6)]});}),dbLogs['get']('logs')[_0x5b9cb3(0x314)](_0x3fb402)['write']();}let _0x30ea16=dbConfig[_0x5b9cb3(0x334)](_0x5b9cb3(0x1f0))[_0x5b9cb3(0x346)]();if(isOlderVersion(_0x30ea16,_0x5b9cb3(0x241))){let _0x599355=dbConfig[_0x5b9cb3(0x334)]('bot')[_0x5b9cb3(0x1e4)]({'botID':botID})[_0x5b9cb3(0x346)]();if(_0x599355){let _0x814b86=[];_0x599355[_0x5b9cb3(0x303)][_0x5b9cb3(0x234)](_0x17b14c=>{const _0x2d9e18=_0x5b9cb3;_0x814b86[_0x2d9e18(0x1ea)]({'coin':_0x17b14c['coin'],'number':_0x17b14c[_0x2d9e18(0x34f)],'price':_0x17b14c[_0x2d9e18(0x1db)]}),delete _0x17b14c[_0x2d9e18(0x34f)],delete _0x17b14c[_0x2d9e18(0x1db)];});if(_0x814b86[_0x5b9cb3(0x348)]!==0x0)fs[_0x5b9cb3(0x2ee)](configbackuppath+('starting-balance-'+botID+_0x5b9cb3(0x211)),JSON['stringify'](_0x814b86,null,0x4),function(_0x21e32c){if(_0x21e32c){}});const _0xc21a6d=(_0x3faf97,_0x35d3c9)=>{const _0x5319ec=_0x5b9cb3;let _0x5e71e3=[];_0x35d3c9['forEach'](_0x38ff3e=>{const _0xece656=_0x31af,_0x33a735=_0x3faf97[_0xece656(0x1e4)](_0x9e7ec5=>_0x9e7ec5[_0xece656(0x2f5)]==_0x38ff3e[_0xece656(0x2f5)]);if(!_0x33a735)_0x5e71e3[_0xece656(0x1ea)](_0x38ff3e);});let _0x13b1cc=[];return _0x3faf97[_0x5319ec(0x234)](_0x4fa33d=>{const _0x53fd80=_0x5319ec,_0xecb889=_0x35d3c9[_0x53fd80(0x1e4)](_0x505e64=>_0x505e64[_0x53fd80(0x2f5)]==_0x4fa33d[_0x53fd80(0x2f5)]);if(!_0xecb889||_0xecb889[_0x53fd80(0x33a)]==0x0&&_0x4fa33d[_0x53fd80(0x33a)]!=0x0)_0x13b1cc[_0x53fd80(0x1ea)](_0x4fa33d);}),{'missingDay1':_0x5e71e3,'notInDay2':_0x13b1cc};},_0x37fe07=dbPerformance[_0x5b9cb3(0x334)](_0x5b9cb3(0x235))[_0x5b9cb3(0x31e)]()[_0x5b9cb3(0x346)]();if(_0x37fe07[_0x5b9cb3(0x348)]>0x1){const {missingDay1:_0x3894d5,notInDay2:_0x2e8d0e}=_0xc21a6d(_0x814b86,_0x37fe07[0x1][_0x5b9cb3(0x226)]);_0x814b86=[..._0x814b86,..._0x3894d5],_0x2e8d0e[_0x5b9cb3(0x234)](_0x393eff=>{const _0x2c480e=_0x5b9cb3;let _0x2d11c3=_0x814b86[_0x2c480e(0x2f6)](_0x452196=>_0x452196[_0x2c480e(0x2f5)]==_0x393eff[_0x2c480e(0x2f5)]);_0x2d11c3!=-0x1&&_0x814b86[_0x2c480e(0x2eb)](_0x2d11c3,0x1);});}_0x814b86['sort']((_0x464899,_0x5f5523)=>_0x464899[_0x5b9cb3(0x2f5)]>_0x5f5523[_0x5b9cb3(0x2f5)]?0x1:_0x5f5523[_0x5b9cb3(0x2f5)]>_0x464899[_0x5b9cb3(0x2f5)]?-0x1:0x0);let _0x2e6a48=[{'date':_0x599355[_0x5b9cb3(0x33e)],'changes':_0x814b86}];_0x37fe07[_0x5b9cb3(0x348)]>0x2&&_0x37fe07['forEach']((_0x293874,_0x52f45e)=>{const _0x20a41d=_0x5b9cb3;if(_0x52f45e>0x0&&_0x52f45e<_0x37fe07['length']-0x1){const {missingDay1:_0x59bcd0,notInDay2:_0x2ea540}=_0xc21a6d(_0x37fe07[_0x52f45e][_0x20a41d(0x226)],_0x37fe07[_0x52f45e+0x1][_0x20a41d(0x226)]);_0x814b86=[],(_0x59bcd0['length']!=0x0||_0x2ea540[_0x20a41d(0x348)]!=0x0)&&(_0x59bcd0[_0x20a41d(0x348)]!=0x0&&_0x814b86['push'](..._0x59bcd0),_0x2ea540[_0x20a41d(0x348)]!=0x0&&(_0x2ea540[_0x20a41d(0x234)](_0x2c603e=>{_0x2c603e['number']=-_0x2c603e['number'];}),_0x814b86[_0x20a41d(0x1ea)](..._0x2ea540)),_0x814b86[_0x20a41d(0x239)]((_0x5ddfdc,_0xef0e77)=>_0x5ddfdc[_0x20a41d(0x2f5)]>_0xef0e77[_0x20a41d(0x2f5)]?0x1:_0xef0e77['coin']>_0x5ddfdc[_0x20a41d(0x2f5)]?-0x1:0x0),_0x2e6a48['push']({'date':_0x37fe07[_0x52f45e+0x1]['date'],'changes':_0x814b86}));}}),dbConfig[_0x5b9cb3(0x334)](_0x5b9cb3(0x205))[_0x5b9cb3(0x1e4)]({'botID':botID})['assign']({..._0x599355,'liquidity':_0x2e6a48})[_0x5b9cb3(0x2e4)]();}}if(isOlderVersion(_0x30ea16,_0x5b9cb3(0x2b5))){let _0x1a46e6=dbConfig[_0x5b9cb3(0x334)](_0x5b9cb3(0x205))[_0x5b9cb3(0x1e4)]({'botID':botID})[_0x5b9cb3(0x346)]();if(_0x1a46e6){const _0x4d7683=_0x1a46e6['exchange'],_0x5e5d73=_0x4d7683?capitalize(_0x4d7683):_0x5b9cb3(0x1ff);dbConfig['get'](_0x5b9cb3(0x205))['find']({'botID':botID})[_0x5b9cb3(0x314)]({'exchange':_0x5e5d73})['write']();}}let _0x186fa9=dbPerformance[_0x5b9cb3(0x334)](_0x5b9cb3(0x1f0))['value']();isOlderVersion(_0x186fa9,_0x5b9cb3(0x241))&&setStartDatePerformance();let _0x18ed02=dbCoinResults[_0x5b9cb3(0x334)](_0x5b9cb3(0x1f0))['value']();if(isOlderVersion(_0x18ed02,_0x5b9cb3(0x20e))){let _0xcc77a8=dbCoinResults[_0x5b9cb3(0x334)]('coins')[_0x5b9cb3(0x346)]();if(_0xcc77a8['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x23d00d=_0x9abfb9;dbConfig['set'](_0x23d00d(0x1f0),serverversion)[_0x23d00d(0x2e4)](),dbPerformance[_0x23d00d(0x1c4)]('version',serverversion)[_0x23d00d(0x2e4)](),dbLogs['set']('version',serverversion)[_0x23d00d(0x2e4)](),dbCoinResults[_0x23d00d(0x1c4)](_0x23d00d(0x1f0),serverversion)[_0x23d00d(0x2e4)]();}function getConfiguration(_0x3d96f4){const _0x7787d9=_0x9abfb9;let _0x402cb4=dbConfig[_0x7787d9(0x334)](_0x7787d9(0x205))[_0x7787d9(0x1e4)]({'botID':_0x3d96f4})[_0x7787d9(0x346)]();if(_0x402cb4){let _0x986392=![];typeof _0x402cb4['threshold']==_0x7787d9(0x2cd)&&(_0x402cb4={..._0x402cb4,'threshold':Number(_0x402cb4['threshold'])},_0x986392=!![]),_0x402cb4[_0x7787d9(0x1f2)]==undefined&&(_0x402cb4={..._0x402cb4,'change24h':-0x14},_0x986392=!![]),_0x402cb4[_0x7787d9(0x248)]==undefined&&(_0x402cb4={..._0x402cb4,'fiat':_0x7787d9(0x267)},_0x986392=!![]),_0x402cb4[_0x7787d9(0x2c2)]==undefined&&(_0x402cb4={..._0x402cb4,'onepagemode':settings[_0x7787d9(0x2c2)]},_0x986392=!![]),_0x402cb4['colorscheme']==undefined&&(_0x402cb4={..._0x402cb4,'colorscheme':_0x7787d9(0x1eb)},_0x986392=!![]),_0x402cb4[_0x7787d9(0x33d)]==undefined&&(_0x402cb4={..._0x402cb4,'autoliquidity':!![]},_0x986392=!![]),_0x986392&&(_0x402cb4={'botID':_0x402cb4['botID'],'exchange':_0x402cb4[_0x7787d9(0x302)],'apiKey':_0x402cb4[_0x7787d9(0x2fe)],'apiSecret':_0x402cb4['apiSecret'],'apiPassword':_0x402cb4[_0x7787d9(0x2e8)],'basecoin':_0x402cb4[_0x7787d9(0x33b)],'botname':_0x402cb4[_0x7787d9(0x2a8)],'showname':_0x402cb4[_0x7787d9(0x340)],'threshold':_0x402cb4[_0x7787d9(0x2b7)],'ordertype':_0x402cb4[_0x7787d9(0x2c7)],'timeout':_0x402cb4[_0x7787d9(0x202)],'fiat':_0x402cb4[_0x7787d9(0x248)],'startdate':_0x402cb4[_0x7787d9(0x33e)],'recreate':_0x402cb4[_0x7787d9(0x327)],'timeshift':_0x402cb4[_0x7787d9(0x299)],'onepagemode':_0x402cb4[_0x7787d9(0x2c2)],'headless':_0x402cb4[_0x7787d9(0x2c8)],'cooldown':_0x402cb4['cooldown'],'change24h':_0x402cb4['change24h'],'emojibuy':_0x402cb4[_0x7787d9(0x2d7)],'emojisell':_0x402cb4[_0x7787d9(0x243)],'colorscheme':_0x402cb4[_0x7787d9(0x206)],'portfolio':_0x402cb4[_0x7787d9(0x303)],'autoliquidity':_0x402cb4[_0x7787d9(0x33d)],'liquidity':_0x402cb4[_0x7787d9(0x1f8)],'openOrders':_0x402cb4[_0x7787d9(0x2e1)]},dbConfig[_0x7787d9(0x334)](_0x7787d9(0x205))['remove']()['write'](),dbConfig[_0x7787d9(0x334)](_0x7787d9(0x205))[_0x7787d9(0x1ea)](_0x402cb4)[_0x7787d9(0x2e4)]());}else _0x402cb4={'botID':_0x3d96f4,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3d96f4,'showname':![],'threshold':0x3,'ordertype':_0x7787d9(0x2f7),'timeout':0x14,'fiat':_0x7787d9(0x267),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x7787d9(0x299)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x7787d9(0x1eb),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x402cb4;}function emittedConfiguration(){const _0x53c875=_0x9abfb9;let _0x4d92a0;if(config[_0x53c875(0x2fe)]=='')_0x4d92a0={...config,'configstate':_0x53c875(0x20b)};else config[_0x53c875(0x2fe)]=='***'?_0x4d92a0={...config,'configstate':'recovery'}:(_0x4d92a0={...config,'apiKey':'************','apiSecret':_0x53c875(0x247)},config[_0x53c875(0x2e8)]&&(_0x4d92a0[_0x53c875(0x2e8)]=_0x53c875(0x247)));return _0x4d92a0;}function getSettings(){const _0x37b46f=_0x9abfb9;return dbSettings[_0x37b46f(0x334)](_0x37b46f(0x2af))['value']();}function getSecure(){const _0x2fce5b=_0x9abfb9;return dbSecure[_0x2fce5b(0x334)](_0x2fce5b(0x2f8))[_0x2fce5b(0x346)]()||{};}function updateTimeshift(_0x572fb3){const _0x4116c3=_0x9abfb9;let _0x5c9648=dbConfig[_0x4116c3(0x334)]('bot')[_0x4116c3(0x1e4)]({'botID':botID})[_0x4116c3(0x346)]();_0x5c9648&&dbConfig[_0x4116c3(0x334)]('bot')[_0x4116c3(0x1e4)]({'botID':botID})[_0x4116c3(0x314)]({'timeshift':_0x572fb3})[_0x4116c3(0x2e4)](),config[_0x4116c3(0x299)]=_0x572fb3,proxyEmit(_0x4116c3(0x2a4),emittedConfiguration());}function updateOnepagemode(_0x55069c){const _0x1557a0=_0x9abfb9;let _0x1d892d=dbConfig[_0x1557a0(0x334)](_0x1557a0(0x205))[_0x1557a0(0x1e4)]({'botID':botID})[_0x1557a0(0x346)]();_0x1d892d&&dbConfig[_0x1557a0(0x334)](_0x1557a0(0x205))[_0x1557a0(0x1e4)]({'botID':botID})[_0x1557a0(0x314)]({'onepagemode':_0x55069c})['write'](),config['onepagemode']=_0x55069c,proxyEmit(_0x1557a0(0x2a4),emittedConfiguration());}async function storeConfiguration(_0x193803){const _0x2b8d67=_0x9abfb9;logger[_0x2b8d67(0x1fe)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x2b8d67(0x21a));let _0x7f9f63=![],_0x3e9d52=![],_0x56f19d=[];_0x193803['portfolio'][_0x2b8d67(0x234)](_0xb3d2a3=>{const _0x4aad6f=_0x2b8d67;if(!_0xb3d2a3[_0x4aad6f(0x2cf)]&&_0xb3d2a3[_0x4aad6f(0x2f5)]!=_0x193803[_0x4aad6f(0x33b)])_0x56f19d[_0x4aad6f(0x1ea)](_0xb3d2a3[_0x4aad6f(0x282)]);}),_0x56f19d[_0x2b8d67(0x234)](_0x24176a=>{const _0x58d917=_0x2b8d67,_0x5f139d=currentCoins[_0x58d917(0x1e4)](_0x2d0438=>_0x2d0438[_0x58d917(0x282)]==_0x24176a);!_0x5f139d&&(_0x7f9f63=!![]);}),currentCoins['forEach'](_0x5d5b94=>{const _0x4e45c3=_0x2b8d67;if(_0x5d5b94[_0x4e45c3(0x2f5)]!=config['basecoin']){const _0x31140e=_0x56f19d[_0x4e45c3(0x1e4)](_0x4faa8e=>_0x4faa8e==_0x5d5b94['symbol']);!_0x31140e&&(_0x7f9f63=!![]);}}),_0x193803[_0x2b8d67(0x303)][_0x2b8d67(0x234)](_0x5dd9bd=>{const _0x11332c=_0x2b8d67,_0x3efa54=config[_0x11332c(0x303)][_0x11332c(0x1e4)](_0x2f4342=>_0x2f4342[_0x11332c(0x2f5)]==_0x5dd9bd[_0x11332c(0x2f5)]);if(_0x3efa54&&_0x5dd9bd[_0x11332c(0x255)]!=_0x3efa54[_0x11332c(0x255)])_0x3e9d52=!![];});let _0x559428=dbConfig[_0x2b8d67(0x334)]('bot')[_0x2b8d67(0x1e4)]({'botID':botID})[_0x2b8d67(0x346)]();_0x193803={..._0x193803,'apiKey':crypt[_0x2b8d67(0x2aa)](secure[_0x2b8d67(0x28e)],_0x193803[_0x2b8d67(0x2fe)])[_0x2b8d67(0x218)],'apiSecret':crypt[_0x2b8d67(0x2aa)](secure['privateKey'],_0x193803[_0x2b8d67(0x2be)])[_0x2b8d67(0x218)]};_0x193803['apiPassword']&&(_0x193803[_0x2b8d67(0x2e8)]=crypt[_0x2b8d67(0x2aa)](secure['privateKey'],_0x193803['apiPassword'])['message']);let _0x17de5d=![];if(_0x559428){_0x193803[_0x2b8d67(0x2fe)]==_0x2b8d67(0x247)?_0x193803[_0x2b8d67(0x2fe)]=config[_0x2b8d67(0x2fe)]:_0x17de5d=!![];_0x193803[_0x2b8d67(0x2be)]==_0x2b8d67(0x247)?_0x193803[_0x2b8d67(0x2be)]=config['apiSecret']:_0x17de5d=!![];if(_0x193803[_0x2b8d67(0x2e8)]==_0x2b8d67(0x247))_0x193803['apiPassword']=config[_0x2b8d67(0x2e8)];else{if(_0x193803['apiPassword'])_0x17de5d=!![];}dbConfig[_0x2b8d67(0x334)]('bot')[_0x2b8d67(0x1e4)]({'botID':botID})[_0x2b8d67(0x314)](_0x193803)[_0x2b8d67(0x2e4)]();}else dbConfig[_0x2b8d67(0x334)](_0x2b8d67(0x205))['push'](_0x193803)[_0x2b8d67(0x2e4)](),_0x17de5d=!![],process[_0x2b8d67(0x262)]({'status':_0x2b8d67(0x2ad),'live':_0x2b8d67(0x1d7)},_0x216471=>{});process[_0x2b8d67(0x262)]({'botname':_0x193803[_0x2b8d67(0x2a8)]},_0x4dd190=>{}),config={..._0x193803},updateBotManager(),proxyEmit(_0x2b8d67(0x25b)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x17de5d)await reset(!![]);else _0x7f9f63||_0x3e9d52?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x2b8d67(0x1fe)](_0x2b8d67(0x25a));}async function storeHeadless(_0x1642c9){const _0x616557=_0x9abfb9,_0x575b13={...config,'headless':_0x1642c9[_0x616557(0x2c8)]};let _0x573582=dbConfig[_0x616557(0x334)](_0x616557(0x205))[_0x616557(0x1e4)]({'botID':botID})[_0x616557(0x346)]();_0x573582&&dbConfig['get']('bot')[_0x616557(0x1e4)]({'botID':botID})[_0x616557(0x314)](_0x575b13)[_0x616557(0x2e4)](),config={..._0x575b13},updateBotManager(),proxyEmit(_0x616557(0x2a4),emittedConfiguration());}async function storeFiat(_0x158602){const _0x430537=_0x9abfb9,_0x62a67a={...config,'fiat':_0x158602};let _0x41b11f=dbConfig[_0x430537(0x334)](_0x430537(0x205))[_0x430537(0x1e4)]({'botID':botID})[_0x430537(0x346)]();_0x41b11f&&dbConfig['get']('bot')[_0x430537(0x1e4)]({'botID':botID})['assign'](_0x62a67a)[_0x430537(0x2e4)](),config={..._0x62a67a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x4b2a17=_0x9abfb9;logger[_0x4b2a17(0x269)]('Resetting\x20bot\x20history');try{if(fs[_0x4b2a17(0x24b)](path[_0x4b2a17(0x317)](configpath,_0x4b2a17(0x1d4)+botID+_0x4b2a17(0x325))))fs[_0x4b2a17(0x2e9)](path['join'](configpath,_0x4b2a17(0x1d4)+botID+_0x4b2a17(0x325)));if(fs[_0x4b2a17(0x24b)](path[_0x4b2a17(0x317)](configpath,_0x4b2a17(0x1d4)+botID+_0x4b2a17(0x256))))fs[_0x4b2a17(0x2e9)](path[_0x4b2a17(0x317)](configpath,'bot-'+botID+_0x4b2a17(0x256)));if(fs[_0x4b2a17(0x24b)](path[_0x4b2a17(0x317)](configpath,_0x4b2a17(0x1d4)+botID+_0x4b2a17(0x214))))fs[_0x4b2a17(0x2e9)](path[_0x4b2a17(0x317)](configpath,'bot-'+botID+_0x4b2a17(0x214)));}catch(_0x420737){if(_0x420737)logger[_0x4b2a17(0x269)](_0x4b2a17(0x287),_0x420737);}const _0x252ac7=getDate();let _0x338568=[];currentCoins['forEach'](_0x56375e=>{const _0x2b7f38=_0x4b2a17;_0x338568[_0x2b7f38(0x1ea)]({'coin':_0x56375e[_0x2b7f38(0x2f5)],'number':_0x56375e[_0x2b7f38(0x33a)],'price':_0x56375e[_0x2b7f38(0x292)]});});let _0x4cc722=dbConfig['get'](_0x4b2a17(0x205))[_0x4b2a17(0x1e4)]({'botID':botID})[_0x4b2a17(0x346)]();_0x4cc722&&(dbConfig[_0x4b2a17(0x334)](_0x4b2a17(0x205))[_0x4b2a17(0x1e4)]({'botID':botID})[_0x4b2a17(0x314)]({'liquidity':[{'date':_0x252ac7,'changes':_0x338568}]})[_0x4b2a17(0x2e4)](),config['liquidity']=[]),process[_0x4b2a17(0x262)]({'stop':'restart'},_0x4ede04=>{});}function noslash(_0x154956){const _0xa44f79=_0x9abfb9;return _0x154956[_0xa44f79(0x1cd)]('/','');}function updateHighestFee(_0x12c088){const _0x4cfc58=_0x9abfb9;if(_0x12c088['reverse']){let _0x45957c={'filled':_0x12c088[_0x4cfc58(0x2fc)]*_0x12c088[_0x4cfc58(0x2bb)],'amount':_0x12c088[_0x4cfc58(0x2fc)]*_0x12c088[_0x4cfc58(0x2bb)],'side':_0x12c088['side']==_0x4cfc58(0x23b)?'buy':'sell','price':0x1/_0x12c088[_0x4cfc58(0x2bb)]};_0x12c088={..._0x12c088,..._0x45957c};}const _0x3be696=defaultFee*_0x12c088[_0x4cfc58(0x2fc)]*_0x12c088[_0x4cfc58(0x2bb)];lastFees[_0x4cfc58(0x337)][_0x4cfc58(0x348)]===0x14&&lastFees['recent20'][_0x4cfc58(0x330)](),lastFees[_0x4cfc58(0x337)][_0x4cfc58(0x1ea)](_0x3be696),lastFees['highest']=Math[_0x4cfc58(0x2dd)](...lastFees[_0x4cfc58(0x337)]);}async function updateNumberCoinsCcxt(_0x180ada){const _0x4f0127=_0x9abfb9;logger['debug'](_0x4f0127(0x350)+_0x180ada['symbol']+_0x4f0127(0x288)+_0x180ada['status']+_0x4f0127(0x288)+_0x180ada[_0x4f0127(0x2fc)]+_0x4f0127(0x1fa)+_0x180ada['amount']+_0x4f0127(0x288)+_0x180ada['id']);let _0x434ac7=_0x180ada[_0x4f0127(0x26d)],_0xca71cc=![];currentCoins[_0x4f0127(0x234)](_0x39a3f0=>{const _0x51c5e6=_0x4f0127;_0x39a3f0[_0x51c5e6(0x282)]==_0x180ada['symbol']&&(_0xca71cc=!![]);});if(!_0xca71cc)return;const _0x52f3bd=currentCoins[_0x4f0127(0x1e4)](_0x528b37=>_0x528b37['symbol']==_0x180ada[_0x4f0127(0x282)]),_0x445212=_0x7a7d2e=>{const _0x397b69=_0x4f0127;if(_0x52f3bd)_0x52f3bd[_0x397b69(0x1c9)]=_0x7a7d2e;};if(_0x434ac7==_0x4f0127(0x26b))_0x445212('open');else{if(_0x434ac7==_0x4f0127(0x219)){_0x445212(_0x4f0127(0x219));const _0x420d5e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x420d5e,await getOpenOrders(),handleOpenOrders();}else{if(_0x434ac7=='closed'){let _0x560675=![];if(lastOrders)for(const _0x515e33 of lastOrders){const _0xa714ed=0xc8,_0x12cb46=0x1388;let _0x3e861d=0x0;while(!_0x515e33['orderId']&&_0x3e861d*_0xa714ed<_0x12cb46){_0x3e861d++,await sleep(_0xa714ed);}if(_0x3e861d>0x0)logger[_0x4f0127(0x1fe)](_0x4f0127(0x21e)+_0x3e861d*_0xa714ed/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x515e33[_0x4f0127(0x21f)]==_0x180ada['id']){logger['debug']('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x180ada['id']),_0x560675=!![];if(_0x515e33[_0x4f0127(0x2fc)]==0x0){logger[_0x4f0127(0x1fe)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x180ada['id']);if(_0x180ada[_0x4f0127(0x280)])_0x515e33[_0x4f0127(0x2bb)]=_0x180ada[_0x4f0127(0x280)];else{if(_0x180ada['price'])_0x515e33[_0x4f0127(0x2bb)]=_0x180ada[_0x4f0127(0x2bb)];else{}}_0x515e33[_0x4f0127(0x2fc)]=_0x180ada['filled'],updateHighestFee(_0x515e33),_0x445212(_0x4f0127(0x2fc)),await validateOrders();if(lockOrders==ORDERS[_0x4f0127(0x271)]){const _0x3cad77=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3cad77;}_0x515e33[_0x4f0127(0x27b)]={'currency':_0x180ada[_0x4f0127(0x27b)]?_0x180ada[_0x4f0127(0x27b)][_0x4f0127(0x27f)]:null,'cost':_0x180ada[_0x4f0127(0x27b)]?_0x180ada['fee'][_0x4f0127(0x24f)]:0x0},await updateCoinResults(_0x515e33);}}}if(!_0x560675){logger[_0x4f0127(0x1fe)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x180ada['id']),_0x445212('filled');const _0x41a4b4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x41a4b4,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1d65fc=JSON['parse'](lastBalances[_0x4f0127(0x303)]);const _0x967a9=_0x1d65fc[_0x4f0127(0x1e4)](_0x13b0ae=>_0x13b0ae[_0x4f0127(0x282)]==_0x180ada[_0x4f0127(0x282)]);if(_0x967a9){if(_0x434ac7==_0x4f0127(0x26b))_0x967a9['orderstatus']=_0x967a9[_0x4f0127(0x1c9)]=='filled'?_0x4f0127(0x2fc):_0x4f0127(0x26b);else{if(_0x434ac7==_0x4f0127(0x219))_0x967a9[_0x4f0127(0x1c9)]=_0x967a9[_0x4f0127(0x1c9)]==_0x4f0127(0x2fc)?_0x4f0127(0x2fc):_0x4f0127(0x219);else _0x434ac7==_0x4f0127(0x2ea)&&(_0x967a9[_0x4f0127(0x1c9)]=_0x4f0127(0x2fc));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x1d65fc)},proxyEmit(_0x4f0127(0x32a),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x423c32=![];currentCoins['forEach'](_0x8b4697=>{const _0x377400=_0x31af;_0x423c32=allOpenOrders[_0x377400(0x1e4)](_0x352fcf=>_0x352fcf[_0x377400(0x282)]==_0x8b4697['symbol']),_0x8b4697[_0x377400(0x1c9)]=_0x423c32?'open':_0x377400(0x2e5);});}async function getCoins(_0x47ca12=0x0,_0x56d98c=!![],_0x4a2554=config['basecoin']){const _0x17b387=_0x9abfb9;let _0x30d1ff,_0x48be41=[],_0x418914=[],_0x50bd55=[];if(_0x47ca12)await sleep(_0x47ca12);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x30d1ff=await exchange[_0x17b387(0x305)](),mybalances=_0x30d1ff['total'];for(const [_0x2aa24b,_0x44c281]of Object['entries'](mybalances)){_0x50bd55[_0x17b387(0x1ea)](_0x2aa24b);}config[_0x17b387(0x303)][_0x17b387(0x234)](_0x23b9cc=>{const _0x59dccf=_0x17b387;!_0x50bd55['includes'](_0x23b9cc[_0x59dccf(0x2f5)])&&(mybalances[_0x23b9cc[_0x59dccf(0x2f5)]]=0x0);});if(_0x4a2554=='')for(const [_0x1a33d5,_0x359604]of Object['entries'](mybalances)){_0x359604!=0x0&&_0x48be41[_0x17b387(0x1ea)]({'coin':_0x1a33d5});}else{let _0x3c263f=![];for(const [_0x320a59,_0x4025f0]of Object[_0x17b387(0x245)](mybalances)){const _0x38cc6e=config[_0x17b387(0x303)][_0x17b387(0x1e4)](_0x17daa1=>_0x17daa1[_0x17b387(0x2f5)]==_0x320a59),_0x23f80a=_0x320a59+'/'+_0x4a2554,_0x572ce0=_0x4a2554+'/'+_0x320a59,_0x5f1bca=currentCoins['find'](_0x45edc5=>_0x45edc5[_0x17b387(0x2f5)]==_0x320a59);_0x3c263f=![];if((_0x4025f0!=0x0||_0x38cc6e)&&(allSymbols[_0x17b387(0x228)](_0x23f80a)||_0x320a59==_0x4a2554))_0x48be41[_0x17b387(0x1ea)]({'coin':_0x320a59,'symbol':_0x23f80a,'reverse':![],'number':Math[_0x17b387(0x2dd)](_0x4025f0+(_0x38cc6e&&_0x38cc6e[_0x17b387(0x255)]||0x0),0x0),'orderstatus':_0x5f1bca?_0x5f1bca[_0x17b387(0x1c9)]:_0x17b387(0x2e5)});else{if((_0x4025f0!=0x0||_0x38cc6e)&&allSymbols[_0x17b387(0x228)](_0x572ce0))_0x48be41[_0x17b387(0x1ea)]({'coin':_0x320a59,'symbol':_0x572ce0,'reverse':!![],'number':Math[_0x17b387(0x2dd)](_0x4025f0+(_0x38cc6e&&_0x38cc6e[_0x17b387(0x255)]||0x0),0x0),'orderstatus':_0x5f1bca?_0x5f1bca[_0x17b387(0x1c9)]:_0x17b387(0x2e5)});else _0x38cc6e&&_0x48be41['push']({'coin':_0x38cc6e[_0x17b387(0x2f5)],'symbol':_0x38cc6e['symbol'],'reverse':_0x38cc6e[_0x17b387(0x273)],'number':0x0,'orderstatus':_0x17b387(0x2e5)});}}}}catch(_0x1428eb){if(!_0x56d98c)handleErrorNoStop(_0x1428eb,_0x17b387(0x2bd));else await handleError(_0x1428eb,_0x17b387(0x2bd));}return _0x418914=cloneDeep(_0x48be41),_0x48be41=_0x48be41[_0x17b387(0x20d)](_0x11c1b2=>{const _0x3bc25d=_0x17b387,_0x29642d=config[_0x3bc25d(0x303)]['find'](_0x5b80bf=>_0x5b80bf[_0x3bc25d(0x2f5)]==_0x11c1b2[_0x3bc25d(0x2f5)]);return _0x29642d&&!_0x29642d[_0x3bc25d(0x2cf)];}),[_0x48be41,_0x418914];}async function getCoinNumber(_0x280cdd){const _0x545c69=_0x9abfb9;let _0x29a178;try{const _0x1c06dd=await exchange[_0x545c69(0x305)]();_0x29a178=_0x1c06dd[_0x545c69(0x30b)][_0x280cdd];}catch(_0xeb8f88){await handleError(_0xeb8f88,_0x545c69(0x212));}return _0x29a178;}async function getOpenOrders(){const _0x3af55d=_0x9abfb9;let _0x325b4c;allOpenOrders=[];try{for(const _0x50b7ff of config['portfolio']){!_0x50b7ff['excluded']&&_0x50b7ff['coin']!=config[_0x3af55d(0x33b)]&&(_0x325b4c=await exchange[_0x3af55d(0x233)](_0x50b7ff[_0x3af55d(0x282)]),_0x325b4c[_0x3af55d(0x348)]>0x0&&allOpenOrders[_0x3af55d(0x1ea)](_0x325b4c[0x0]));}}catch(_0x5d51c9){await handleError(_0x5d51c9,'getOpenOrders()');}}async function handleOpenOrders(_0x553196=0x0){const _0x28416e=_0x9abfb9;allOpenOrders[_0x28416e(0x348)]==0x0&&lockOrders==ORDERS[_0x28416e(0x271)]&&allOrdersPlaced&&(_0x553196==0x0?(logger['debug'](_0x28416e(0x2fd)),_0x553196++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x28416e(0x1fe)](_0x28416e(0x331)),validateOrders(_0x28416e(0x1c8))));}async function testAPI(_0x27ec47){const _0x15768c=_0x9abfb9,_0x8c6fe3=ccxt['pro'][_0x27ec47['exchange']['toLowerCase']()],_0x273320=new _0x8c6fe3({'apiKey':_0x27ec47['apiKey'],'secret':_0x27ec47[_0x15768c(0x2be)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x15768c(0x23e)}});if(_0x27ec47['apiPassword'])_0x273320[_0x15768c(0x24d)]=_0x27ec47[_0x15768c(0x2e8)];try{await _0x273320[_0x15768c(0x2f2)]();}catch(_0x4a9bea){throw _0x4a9bea;}}function cloneDeep(_0x27d992){const _0xa2a012=_0x9abfb9;return JSON['parse'](JSON[_0xa2a012(0x22f)](_0x27d992));}async function getPortfolio(_0x34e55d){const _0x1d61bf=_0x9abfb9;let _0x2e4be6=[],_0x1393a2=[],_0x59dfc6=[],_0x159ed6;if(_0x34e55d['apiKey']!=='************'||_0x34e55d[_0x1d61bf(0x2be)]!==_0x1d61bf(0x247)||_0x34e55d['apiPassword']&&_0x34e55d['apiPassword']!==_0x1d61bf(0x247)){if(config['exchange']){if(_0x34e55d[_0x1d61bf(0x2fe)]==_0x1d61bf(0x247))_0x34e55d['apiKey']=config[_0x1d61bf(0x2fe)];if(_0x34e55d['apiSecret']==_0x1d61bf(0x247))_0x34e55d['apiSecret']=config[_0x1d61bf(0x2be)];if(_0x34e55d[_0x1d61bf(0x2e8)]==_0x1d61bf(0x247))_0x34e55d[_0x1d61bf(0x2e8)]=config[_0x1d61bf(0x2e8)];try{await testAPI(_0x34e55d);}catch(_0x5b7cae){if(_0x5b7cae[_0x1d61bf(0x240)]()[_0x1d61bf(0x228)]('AuthenticationError')){logger[_0x1d61bf(0x1fe)](_0x1d61bf(0x1e8)),proxyEmit(_0x1d61bf(0x303),![]);return;}else{handleError(_0x5b7cae,'getPortfolio(0)');return;}}}await initExchange(_0x34e55d[_0x1d61bf(0x302)],_0x34e55d[_0x1d61bf(0x2fe)],_0x34e55d[_0x1d61bf(0x2be)],_0x34e55d[_0x1d61bf(0x2e8)]);try{await loadSymbols();}catch(_0xec8fc1){if(_0xec8fc1['toString']()[_0x1d61bf(0x228)](_0x1d61bf(0x26c))){proxyEmit('portfolio',![]);return;}else{handleError(_0xec8fc1,_0x1d61bf(0x1e6));return;}}const _0x4c3111=await getCoins(0x0,![],_0x34e55d[_0x1d61bf(0x33b)]);_0x59dfc6=cloneDeep(_0x4c3111[0x1]);}else _0x59dfc6=cloneDeep(currentCoinsAll);if(_0x34e55d[_0x1d61bf(0x33b)]=='')proxyEmit('portfolio',_0x59dfc6);else{_0x59dfc6[_0x1d61bf(0x234)](_0x2be37f=>{const _0x453906=_0x1d61bf;if(_0x2be37f[_0x453906(0x2f5)]!=_0x34e55d[_0x453906(0x33b)]&&allSymbols[_0x453906(0x228)](_0x2be37f[_0x453906(0x282)]))_0x2e4be6[_0x453906(0x1ea)](_0x2be37f[_0x453906(0x282)]);});if(_0x2e4be6[_0x1d61bf(0x348)]==0x0)logHistory(_0x1d61bf(0x2b8),_0x1d61bf(0x2d4));else{try{_0x1393a2=await getTickers(_0x2e4be6);}catch(_0x4952bf){if(_0x4952bf[_0x1d61bf(0x240)]()['includes']('AuthenticationError')){proxyEmit(_0x1d61bf(0x303),![]);return;}else handleError(_0x4952bf,_0x1d61bf(0x2c0));}_0x59dfc6[_0x1d61bf(0x234)](_0x5a62b2=>{const _0x1e2caf=_0x1d61bf;_0x5a62b2[_0x1e2caf(0x2f5)]!=_0x34e55d[_0x1e2caf(0x33b)]?_0x1393a2[_0x5a62b2[_0x1e2caf(0x282)]]?_0x159ed6=_0x5a62b2[_0x1e2caf(0x273)]?0x1/_0x1393a2[_0x5a62b2['symbol']][_0x1e2caf(0x292)]:_0x1393a2[_0x5a62b2['symbol']]['last']:_0x159ed6=0x0:_0x159ed6=0x1,_0x5a62b2[_0x1e2caf(0x2bb)]=formatResult(_0x159ed6,0x8);}),proxyEmit('portfolio',_0x59dfc6);}}}function truncateTradeAmount(_0x3a1952,_0x32c3e8){let _0x4aff82=0x0;try{_0x4aff82=exchange['amountToPrecision'](_0x3a1952,_0x32c3e8);}catch(_0x1a0b52){}return _0x4aff82;}function checkMinimums(_0x2a0568){const _0x25732f=_0x9abfb9;let _0x4704e0=!![];const _0x16826e=!_0x2a0568[_0x25732f(0x273)]?markets[_0x2a0568[_0x25732f(0x282)]][_0x25732f(0x29c)][_0x25732f(0x2ab)][_0x25732f(0x347)]:markets[_0x2a0568[_0x25732f(0x282)]][_0x25732f(0x29c)][_0x25732f(0x24f)][_0x25732f(0x347)],_0x188cc1=!_0x2a0568['reverse']?markets[_0x2a0568[_0x25732f(0x282)]][_0x25732f(0x29c)]['cost']['min']:markets[_0x2a0568[_0x25732f(0x282)]][_0x25732f(0x29c)][_0x25732f(0x2ab)][_0x25732f(0x347)],_0x2300a6=truncateTradeAmount(_0x2a0568[_0x25732f(0x282)],_0x2a0568['trade']);_0x2a0568[_0x25732f(0x318)]=_0x2300a6;if(Math[_0x25732f(0x238)](_0x2300a6)<_0x16826e)_0x4704e0=![];if(Math['abs'](_0x2300a6)*_0x2a0568[_0x25732f(0x292)]<_0x188cc1)_0x4704e0=![];if(_0x2a0568[_0x25732f(0x1d6)]==_0x25732f(0x23b)){let _0x46d5b9=config['portfolio'][_0x25732f(0x1e4)](_0x5f00af=>_0x5f00af['coin']==_0x2a0568['coin']);if(_0x46d5b9[_0x25732f(0x255)]>0x0){if(Math[_0x25732f(0x238)](_0x2300a6)>_0x2a0568[_0x25732f(0x33a)]-_0x46d5b9[_0x25732f(0x255)])_0x4704e0=![];}else{if(Math['abs'](_0x2300a6)>_0x2a0568['number'])_0x4704e0=![];}}if(_0x2a0568['side']=='buy'){let _0x57a677=config[_0x25732f(0x303)][_0x25732f(0x1e4)](_0x3fb387=>_0x3fb387[_0x25732f(0x2f5)]==config['basecoin']),_0x5a200c=currentCoins[_0x25732f(0x1e4)](_0x26f524=>_0x26f524[_0x25732f(0x2f5)]==config[_0x25732f(0x33b)]);if(_0x57a677[_0x25732f(0x255)]>0x0){if(Math[_0x25732f(0x238)](_0x2300a6)*_0x2a0568[_0x25732f(0x292)]>_0x5a200c[_0x25732f(0x33a)]-_0x57a677[_0x25732f(0x255)])_0x4704e0=![];}else{if(Math[_0x25732f(0x238)](_0x2300a6)*_0x2a0568['last']>_0x5a200c[_0x25732f(0x33a)])_0x4704e0=![];}}return _0x4704e0;}async function getBalances(_0x3b2f3e=!![]){const _0x5308fb=_0x9abfb9;let _0x584965=0x0,_0x4ed54f;const _0x48431e=config[_0x5308fb(0x2b7)];if(config[_0x5308fb(0x2c8)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x5308fb(0x234)](_0x29d218=>{const _0x2fc279=_0x5308fb;if(_0x29d218['coin']!=config[_0x2fc279(0x33b)]){let _0x13f422=global[_0x2fc279(0x257)][noslash(_0x29d218[_0x2fc279(0x282)])];_0x4ed54f=_0x29d218[_0x2fc279(0x273)]?0x1/_0x13f422:_0x13f422;}else _0x4ed54f=0x1;let _0x5ba00c=_0x29d218[_0x2fc279(0x33a)]*_0x4ed54f;_0x584965+=_0x5ba00c,_0x29d218[_0x2fc279(0x292)]=formatResult(Number(_0x4ed54f),0x8),_0x29d218[_0x2fc279(0x346)]=_0x5ba00c;}),currentCoins[_0x5308fb(0x234)](_0x3680a4=>{const _0x1a7856=_0x5308fb;let _0x179326=config[_0x1a7856(0x303)][_0x1a7856(0x1e4)](_0x78d4ba=>_0x78d4ba[_0x1a7856(0x2f5)]==_0x3680a4[_0x1a7856(0x2f5)]),_0x5674a3=Number(_0x179326[_0x1a7856(0x2c9)]),_0x55f629=_0x3680a4[_0x1a7856(0x346)]/_0x584965*0x64,_0x2a2721=_0x5674a3*_0x584965/0x64/_0x3680a4[_0x1a7856(0x292)]-_0x3680a4['number'];_0x3680a4[_0x1a7856(0x2c9)]=formatResult(_0x55f629,0x3),_0x3680a4[_0x1a7856(0x1c0)]=formatResult(_0x5674a3,0x3),_0x3680a4[_0x1a7856(0x318)]=formatResult(_0x2a2721,0x8),_0x3680a4[_0x1a7856(0x1d6)]='',_0x3680a4['valid']=![];if(_0x3680a4[_0x1a7856(0x2f5)]!=config[_0x1a7856(0x33b)]){if(_0x3680a4[_0x1a7856(0x2c9)]>_0x5674a3)_0x3680a4[_0x1a7856(0x1d6)]=_0x1a7856(0x23b),_0x3680a4[_0x1a7856(0x284)]=checkMinimums(_0x3680a4);else _0x3680a4[_0x1a7856(0x2c9)]<_0x5674a3&&(_0x3680a4[_0x1a7856(0x1d6)]=_0x1a7856(0x25c),_0x3680a4[_0x1a7856(0x284)]=checkMinimums(_0x3680a4));}_0x3680a4['delta']=_0x3680a4[_0x1a7856(0x2c9)]/_0x3680a4['target']-0x1;if(_0x3680a4['orderstatus']=='filled'||_0x3680a4[_0x1a7856(0x1c9)]=='canceled')_0x3680a4['orderstatus']='none';}),currentCoins[_0x5308fb(0x239)]((_0x1d49aa,_0x50ffdb)=>_0x1d49aa[_0x5308fb(0x2d3)]<_0x50ffdb['delta']?0x1:_0x50ffdb[_0x5308fb(0x2d3)]<_0x1d49aa[_0x5308fb(0x2d3)]?-0x1:0x0);const _0x1d0fb0=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1d0fb0[_0x5308fb(0x209)],'usd':_0x1d0fb0[_0x5308fb(0x266)],'portfolio':JSON[_0x5308fb(0x22f)](currentCoins),'threshold':_0x48431e},proxyEmit(_0x5308fb(0x32a),{'serverversion':serverversion,'balances':lastBalances});if(_0x3b2f3e){if(config[_0x5308fb(0x2c8)])headlessMode({'portfolio':currentCoins,'threshold':_0x48431e});else{if(lockOrders==ORDERS[_0x5308fb(0x2ca)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x48431e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x483926=getNormalizedPerformance();getStartingBalances(_0x483926),emitPerformance(_0x483926);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2b1ac0=getNormalizedPerformance();emitPerformance(_0x2b1ac0),getStartingBalances(_0x2b1ac0),logger['debug'](_0x5308fb(0x207));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xfe534b=_0x9abfb9;if(!lastBalances)return;let _0x2d89cb=[],_0x24bdc0,_0xb76706=JSON['parse'](lastBalances[_0xfe534b(0x303)]);_0xb76706[_0xfe534b(0x239)]((_0x1d304f,_0xffcb19)=>_0x1d304f['coin']>_0xffcb19[_0xfe534b(0x2f5)]?0x1:_0xffcb19[_0xfe534b(0x2f5)]>_0x1d304f['coin']?-0x1:0x0),_0xb76706[_0xfe534b(0x234)](_0x356e29=>{const _0x2436d2=_0xfe534b;let _0x2d4125={'coin':_0x356e29[_0x2436d2(0x2f5)],'number':_0x356e29[_0x2436d2(0x33a)],'price':_0x356e29[_0x2436d2(0x292)]};_0x2d89cb[_0x2436d2(0x1ea)](_0x2d4125);});const _0x18a95a=await getFiat();_0x24bdc0={'date':lastBalances['time'][_0xfe534b(0x1ee)]('\x20')[0x0],'eur':_0x18a95a['eur'],'usd':_0x18a95a[_0xfe534b(0x266)],'coins':_0x2d89cb};let _0x149e3d=dbPerformance[_0xfe534b(0x334)](_0xfe534b(0x235))['find']({'date':_0x24bdc0[_0xfe534b(0x1ca)]})[_0xfe534b(0x346)]();_0x149e3d?_0x24bdc0[_0xfe534b(0x1ca)]!=config[_0xfe534b(0x33e)]&&dbPerformance[_0xfe534b(0x334)](_0xfe534b(0x235))['find']({'date':_0x24bdc0['date']})[_0xfe534b(0x314)](_0x24bdc0)[_0xfe534b(0x2e4)]():dbPerformance[_0xfe534b(0x334)]('data')[_0xfe534b(0x1ea)](_0x24bdc0)[_0xfe534b(0x2e4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xdf8cf4=_0x9abfb9;let _0x15f6da=[];if(dbPerformance[_0xdf8cf4(0x24e)]('data')[_0xdf8cf4(0x346)]()){let _0x4ff0b8=dbPerformance[_0xdf8cf4(0x334)](_0xdf8cf4(0x235))[_0xdf8cf4(0x31e)]()['filter'](_0x485a75=>{const _0x44a165=_0xdf8cf4;if(_0x485a75[_0x44a165(0x226)][_0x44a165(0x348)]==0x0)return![];else return!![];})['sortBy'](_0xdf8cf4(0x1ca))[_0xdf8cf4(0x346)](),_0x15b932=[...config[_0xdf8cf4(0x1f8)]];_0x15b932[_0xdf8cf4(0x239)]((_0x1f1ad5,_0x1aac7a)=>_0x1f1ad5[_0xdf8cf4(0x1ca)]>_0x1aac7a[_0xdf8cf4(0x1ca)]?-0x1:_0x1aac7a[_0xdf8cf4(0x1ca)]>_0x1f1ad5['date']?0x1:0x0);let _0x3fa80c=0x1,_0x502d1b=[],_0x32d644=0x0;_0x4ff0b8['slice']()['reverse']()['forEach']((_0x54ef51,_0x396d18)=>{const _0x8ebdb3=_0xdf8cf4;if(_0x15b932[_0x32d644]){if(_0x4ff0b8[_0x4ff0b8[_0x8ebdb3(0x348)]-_0x396d18]&&_0x15b932[_0x32d644]['date']==_0x4ff0b8[_0x4ff0b8[_0x8ebdb3(0x348)]-_0x396d18][_0x8ebdb3(0x1ca)]){if(_0x396d18<_0x4ff0b8[_0x8ebdb3(0x348)]){let _0xbe657=0x0,_0x180521=0x0;_0x4ff0b8[_0x4ff0b8[_0x8ebdb3(0x348)]-_0x396d18][_0x8ebdb3(0x226)][_0x8ebdb3(0x234)](_0x152d88=>{const _0xd3581e=_0x8ebdb3;_0x180521+=_0x152d88[_0xd3581e(0x33a)]*_0x152d88['price'];}),_0x15b932[_0x32d644][_0x8ebdb3(0x227)][_0x8ebdb3(0x234)](_0x279d40=>{_0xbe657+=_0x279d40['number']*_0x279d40['price'];}),_0x3fa80c*=_0xbe657/(_0x180521-_0xbe657)+0x1;}_0x32d644++;}}let _0x1d254f=0x0;_0x54ef51[_0x8ebdb3(0x226)][_0x8ebdb3(0x234)](_0xf656a6=>{const _0x2e1ce4=_0x8ebdb3;_0x1d254f+=_0xf656a6[_0x2e1ce4(0x33a)]*_0xf656a6['price'];}),_0x502d1b[_0x4ff0b8['length']-_0x396d18-0x1]=_0x1d254f*(_0x3fa80c-0x1);});let _0x423cd6=[];_0x15b932=[...config['liquidity']]||[];let _0x21cf12=0x0;_0x32d644=0x0,_0x4ff0b8['forEach']((_0x4519f3,_0x36ff62)=>{const _0x41adca=_0xdf8cf4;if(_0x15b932[_0x32d644]){const _0x4c357a=fns[_0x41adca(0x21d)](_0x15b932[_0x32d644][_0x41adca(0x1ca)],_0x41adca(0x2bc),new Date()),_0x38911a=fns[_0x41adca(0x21d)](_0x4519f3[_0x41adca(0x1ca)],_0x41adca(0x2bc),new Date());if(fns[_0x41adca(0x285)](_0x4c357a,_0x38911a)){let _0x58f2bd=0x0;_0x15b932[_0x32d644]['changes']['forEach'](_0xd88999=>{const _0x15c9c9=_0x41adca;!_0x423cd6[_0xd88999[_0x15c9c9(0x2f5)]]?_0x423cd6[_0xd88999[_0x15c9c9(0x2f5)]]=_0xd88999['number']:(_0x58f2bd=_0x423cd6[_0xd88999['coin']],_0x423cd6[_0xd88999[_0x15c9c9(0x2f5)]]+=_0xd88999[_0x15c9c9(0x33a)]);const _0x370924=_0x4519f3['coins'][_0x15c9c9(0x1e4)](_0x55786e=>_0x55786e['coin']==_0xd88999[_0x15c9c9(0x2f5)]);(!_0x370924||_0x370924[_0x15c9c9(0x33a)]==0x0)&&(_0x21cf12+=(-_0xd88999['number']-_0x58f2bd)*_0xd88999[_0x15c9c9(0x2bb)]);}),_0x32d644++;}}_0x4519f3['coins'][_0x41adca(0x234)]((_0x351d14,_0x363b01)=>{const _0xeb0f01=_0x41adca;_0x423cd6[_0x351d14[_0xeb0f01(0x2f5)]]&&(_0x351d14[_0xeb0f01(0x20b)]=_0x423cd6[_0x351d14[_0xeb0f01(0x2f5)]]);}),_0x15f6da['push']({'date':_0x4519f3[_0x41adca(0x1ca)],'eur':_0x4519f3['eur'],'usd':_0x4519f3[_0x41adca(0x266)],'offset':_0x502d1b[_0x36ff62],'netoffset':_0x21cf12,'coins':_0x4519f3[_0x41adca(0x226)]});});}return _0x15f6da;}function emitPerformance(_0x9d53c0){const _0x2f60a5=_0x9abfb9;_0x9d53c0[_0x2f60a5(0x348)]!==0x0?(proxyEmit(_0x2f60a5(0x324),_0x9d53c0),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x77def0,_0x202ac9){const _0xa4a2a5=_0x9abfb9;let _0xec2835=0x0,_0x43e5dc=0x0,_0x4225d4=0x0;_0x77def0[_0xa4a2a5(0x226)][_0xa4a2a5(0x234)](_0x2469ea=>{const _0x4fd185=_0xa4a2a5;_0xec2835+=_0x2469ea['number']*_0x2469ea[_0x4fd185(0x2bb)];});_0x202ac9&&(_0xec2835+=_0x77def0[_0xa4a2a5(0x255)]);if(config[_0xa4a2a5(0x33b)]===_0xa4a2a5(0x25f)||config[_0xa4a2a5(0x33b)]===_0xa4a2a5(0x332)||config['basecoin']==='PAXG')_0x43e5dc=_0xec2835*_0x77def0[_0xa4a2a5(0x209)],_0x4225d4=_0xec2835*_0x77def0[_0xa4a2a5(0x266)];else{if(usdBasecoins[_0xa4a2a5(0x228)](config['basecoin']))_0x43e5dc=_0xec2835*_0x77def0[_0xa4a2a5(0x209)]/_0x77def0['usd'],_0x4225d4=_0xec2835;else config[_0xa4a2a5(0x33b)]===_0xa4a2a5(0x259)&&(_0x43e5dc=_0xec2835,_0x4225d4=_0xec2835*_0x77def0[_0xa4a2a5(0x266)]/_0x77def0[_0xa4a2a5(0x209)]);}return[_0xec2835,_0x43e5dc,_0x4225d4];}function getKPIs(_0x281864,_0xa34e5d=_0x9abfb9(0x259)){const _0x1a224b=_0x9abfb9,_0x503335=config[_0x1a224b(0x33b)],_0x1d2cb9=lastBalances,_0x526f48=currentCoins,_0x850cda=getNormalizedPerformance(),_0x53ea60=_0x281864===_0x1a224b(0x33b)?_0x503335:_0x281864===_0x1a224b(0x248)||_0x281864===_0x1a224b(0x250)?_0xa34e5d:_0x1a224b(0x2a0)+_0x503335,_0x1f66e2=_0x281864==='net-basecoin'?_0x1a224b(0x1dc):_0x281864==='net-fiat'?_0x1a224b(0x1dc):_0x53ea60+'\x20value',_0x4d15fd=_0x281864===_0x1a224b(0x29d)||_0x281864===_0x1a224b(0x250)?_0x1a224b(0x1dc):_0x53ea60+_0x1a224b(0x283);let _0x54beb3=0x0;_0x526f48[_0x1a224b(0x234)](_0x3f2ad1=>{const _0x85550=_0x1a224b;_0x54beb3+=_0x3f2ad1[_0x85550(0x33a)]*_0x3f2ad1[_0x85550(0x292)];});if(_0x281864===_0x1a224b(0x248)||_0x281864==='net-fiat'){if(_0x503335==='BTC'||_0x503335===_0x1a224b(0x332)||_0x503335===_0x1a224b(0x1dd))_0x54beb3=_0x54beb3*(_0xa34e5d===_0x1a224b(0x259)?_0x1d2cb9[_0x1a224b(0x209)]:_0x1d2cb9[_0x1a224b(0x266)]);else{if(usdBasecoins['includes'](_0x503335))_0x54beb3=_0x54beb3*(_0xa34e5d===_0x1a224b(0x259)?_0x1d2cb9['eur']/_0x1d2cb9[_0x1a224b(0x266)]:0x1);else _0x503335===_0x1a224b(0x259)&&(_0x54beb3=_0x54beb3*(_0xa34e5d===_0x1a224b(0x259)?0x1:_0x1d2cb9[_0x1a224b(0x266)]/_0x1d2cb9[_0x1a224b(0x209)]));}}let _0x2ac0b6;if(_0x54beb3!==0x0){if(_0x281864===_0x1a224b(0x33b))_0x2ac0b6=(_0x54beb3/startingBalances[_0x1a224b(0x33b)]-0x1)*0x64;else{if(_0xa34e5d===_0x1a224b(0x259))_0x2ac0b6=(_0x54beb3/startingBalances[_0x1a224b(0x209)]-0x1)*0x64;else _0x2ac0b6=(_0x54beb3/startingBalances['usd']-0x1)*0x64;}let _0x5ee6c5=0x0;if(startingBalances[_0x1a224b(0x226)])_0x526f48['forEach'](_0x178a3c=>{const _0x468e40=_0x1a224b;let _0x3de6b6=startingBalances[_0x468e40(0x226)]['find'](_0x35187f=>_0x35187f[_0x468e40(0x2f5)]===_0x178a3c['coin']);if(_0x3de6b6&&_0x3de6b6[_0x468e40(0x2f5)]&&_0x178a3c[_0x468e40(0x33a)]!==0x0)_0x5ee6c5+=_0x3de6b6['number']*_0x178a3c['last'];});let _0x76a27e=0x0;if(_0x850cda[_0x1a224b(0x348)]!==0x0){let _0x1e78f9=_0x850cda[_0x850cda[_0x1a224b(0x348)]-0x1];_0x76a27e=_0x1e78f9[_0x1a224b(0x27a)];}_0x5ee6c5-=_0x76a27e;_0x281864===_0x1a224b(0x29d)&&(_0x2ac0b6=(_0x54beb3-_0x5ee6c5)/startingBalances[_0x1a224b(0x33b)]*0x64,_0x54beb3=_0x54beb3-_0x5ee6c5);if(_0x281864==='net-fiat'){let _0x54d341=_0xa34e5d==='EUR'?startingBalances[_0x1a224b(0x209)]:startingBalances[_0x1a224b(0x266)];if(_0x503335===_0x1a224b(0x25f)||_0x503335===_0x1a224b(0x332)||_0x503335===_0x1a224b(0x1dd))_0x5ee6c5=_0xa34e5d===_0x1a224b(0x259)?_0x5ee6c5*_0x1d2cb9[_0x1a224b(0x209)]:_0x5ee6c5*_0x1d2cb9[_0x1a224b(0x266)];else{if(usdBasecoins[_0x1a224b(0x228)](_0x503335))_0x5ee6c5=_0xa34e5d==='EUR'?_0x5ee6c5*_0x1d2cb9['eur']/_0x1d2cb9[_0x1a224b(0x266)]:_0x5ee6c5;else _0x503335==='EUR'&&(_0x5ee6c5=_0xa34e5d===_0x1a224b(0x259)?_0x5ee6c5:_0x5ee6c5*_0x1d2cb9[_0x1a224b(0x266)]/_0x1d2cb9[_0x1a224b(0x209)]);}_0x2ac0b6=(_0x54beb3-_0x5ee6c5)/_0x54d341*0x64,_0x54beb3=_0x54beb3-_0x5ee6c5;}if(_0x2ac0b6){if(_0x2ac0b6<0x64)_0x2ac0b6=_0x2ac0b6[_0x1a224b(0x1c6)](0x2);else{if(_0x2ac0b6<0x3e8)_0x2ac0b6=_0x2ac0b6[_0x1a224b(0x1c6)](0x1);else _0x2ac0b6=_0x2ac0b6[_0x1a224b(0x1c6)](0x0);}}else _0x2ac0b6=Number('0')[_0x1a224b(0x1c6)](0x2);if(_0x54beb3){if(Math['abs'](_0x54beb3)<0.000001)_0x54beb3=_0x54beb3[_0x1a224b(0x1c6)](0x2);else{if(Math[_0x1a224b(0x238)](_0x54beb3)<0.1)_0x54beb3=_0x54beb3[_0x1a224b(0x1c6)](0x6);else{if(Math[_0x1a224b(0x238)](_0x54beb3)<0x1)_0x54beb3=_0x54beb3[_0x1a224b(0x1c6)](0x5);else{if(Math[_0x1a224b(0x238)](_0x54beb3)<0xa)_0x54beb3=_0x54beb3['toFixed'](0x4);else{if(Math['abs'](_0x54beb3)<0x64)_0x54beb3=_0x54beb3[_0x1a224b(0x1c6)](0x3);else{if(Math[_0x1a224b(0x238)](_0x54beb3)<0x3e8)_0x54beb3=_0x54beb3[_0x1a224b(0x1c6)](0x2);else _0x54beb3=_0x54beb3['toFixed'](0x2);}}}}}}else _0x54beb3=Number('0')[_0x1a224b(0x1c6)](0x2);}else _0x2ac0b6=Number('0')['toFixed'](0x2);return{'value':_0x54beb3,'change':_0x2ac0b6,'leftTxt':_0x1f66e2,'rightTxt':_0x4d15fd};}async function getStartingBalances(_0x8314c8,_0x32b9e8=!![]){const _0x2becc7=_0x9abfb9;if(_0x8314c8[_0x2becc7(0x348)]!==0x0){const [_0x219424,_0x51611a,_0x42b97e]=getPerf(_0x8314c8[0x0],!![]);let _0x46137f=[];config[_0x2becc7(0x303)][_0x2becc7(0x234)](_0x107db6=>{const _0x42868a=_0x2becc7;let _0xb7c317=0x0,_0x3042ad;config[_0x42868a(0x1f8)]['forEach'](_0x404c5c=>{const _0x49b1e6=_0x42868a;let _0x5e25a6=_0x404c5c[_0x49b1e6(0x227)][_0x49b1e6(0x1e4)](_0x2bf50f=>_0x2bf50f[_0x49b1e6(0x2f5)]==_0x107db6['coin']);if(_0x5e25a6){_0xb7c317+=_0x5e25a6[_0x49b1e6(0x33a)];if(!_0x3042ad)_0x3042ad=_0x5e25a6['price'];}}),_0x46137f[_0x42868a(0x1ea)]({'coin':_0x107db6[_0x42868a(0x2f5)],'number':_0xb7c317,'initialprice':_0x3042ad});});const _0x54fc55={'basecoin':_0x219424,'eur':_0x51611a,'usd':_0x42b97e,'coins':_0x46137f};if(_0x32b9e8)proxyEmit('starting-balances',_0x54fc55);startingBalances=_0x54fc55;}}function headlessMode(_0x52bc32){const _0x13b0e7=_0x9abfb9;let _0x507405=_0x52bc32[_0x13b0e7(0x303)],_0x2c79ad=_0x52bc32['threshold'],_0x42c505=[];for(let _0x591ba7 of _0x507405){if(_0x591ba7[_0x13b0e7(0x2f5)]!=config['basecoin']){if(_0x591ba7[_0x13b0e7(0x2d3)]>=_0x2c79ad/0x64){if(_0x591ba7['valid'])_0x42c505[_0x13b0e7(0x1ea)](_0x591ba7);}else{if(_0x591ba7['delta']<=-_0x2c79ad/0x64){if(_0x591ba7[_0x13b0e7(0x284)])_0x42c505[_0x13b0e7(0x1ea)](_0x591ba7);}}}}_0x42c505[_0x13b0e7(0x348)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x42c505[_0x13b0e7(0x234)](_0x4cd85b=>{const _0x120460=_0x13b0e7;logger[_0x120460(0x1fe)]('Trigger:\x20'+_0x4cd85b['coin']+'\x20'+_0x4cd85b[_0x120460(0x33a)]+'\x20'+_0x4cd85b['last']+'\x20'+_0x4cd85b[_0x120460(0x2c9)]+'%\x20'+_0x4cd85b['target']+'%\x20'+(0x64*_0x4cd85b[_0x120460(0x2d3)])['toFixed'](0x2)+_0x120460(0x32d)+_0x2c79ad[_0x120460(0x1c6)](0x2)+'%)');}),placeOrder(_0x42c505));}function notifyBalance(_0x33e562){const _0x371ae3=_0x9abfb9;let _0x3ab590=_0x33e562[_0x371ae3(0x303)],_0x3d5a4c=_0x33e562[_0x371ae3(0x2b7)],_0x3ec4b9=[];for(let _0x3c76dc of _0x3ab590){if(_0x3c76dc[_0x371ae3(0x2f5)]!=config[_0x371ae3(0x33b)]){if(_0x3c76dc[_0x371ae3(0x2d3)]>=_0x3d5a4c/0x64){if(_0x3c76dc[_0x371ae3(0x284)])_0x3ec4b9[_0x371ae3(0x1ea)](_0x3c76dc);}else{if(_0x3c76dc[_0x371ae3(0x2d3)]<=-_0x3d5a4c/0x64){if(_0x3c76dc[_0x371ae3(0x284)])_0x3ec4b9[_0x371ae3(0x1ea)](_0x3c76dc);}}}}if(_0x3ec4b9[_0x371ae3(0x348)]>0x0){let _0x480fd4=_0x3ec4b9[_0x371ae3(0x295)](_0x333946=>_0x333946[_0x371ae3(0x2f5)]);_0x480fd4[_0x371ae3(0x239)]();let _0x379cc8=_0x480fd4[_0x371ae3(0x317)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x371ae3(0x276));lastCoinsToBalance=_0x379cc8;}}function symbolToCoin(_0x64cc9a){const _0x18a3c5=_0x9abfb9;let _0x1c4a75;if(_0x64cc9a['includes']('/'+config[_0x18a3c5(0x33b)]))_0x1c4a75=_0x64cc9a[_0x18a3c5(0x1cd)]('/'+config['basecoin'],'');if(_0x64cc9a[_0x18a3c5(0x228)](config[_0x18a3c5(0x33b)]+'/'))_0x1c4a75=_0x64cc9a['replace'](config[_0x18a3c5(0x33b)]+'/','');return _0x1c4a75;}async function unlockOrders(){const _0x1b6bed=_0x9abfb9;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x1b6bed(0x1fe)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x1b6bed(0x20f)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xd3da9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd3da9,validateOrdersState=_0x1b6bed(0x20b),persistOpenOrders([]),lockOrders=ORDERS[_0x1b6bed(0x2ca)],logger[_0x1b6bed(0x1fe)](_0x1b6bed(0x294));}}async function validateOrders(_0x1c0cfb){const _0x333d01=_0x9abfb9;if(_0x1c0cfb)validateOrdersState=_0x1c0cfb;logger['debug'](_0x333d01(0x2a2)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x333d01(0x263):lockOrders==0x2?_0x333d01(0x300):_0x333d01(0x2a9)));let _0x409063=[],_0x55dc54=config['ordertype']==_0x333d01(0x2f7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x333d01(0x202)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x333d01(0x271)])return;logger[_0x333d01(0x1fe)](_0x333d01(0x31c)+validateOrdersState),lastOrders[_0x333d01(0x234)](_0x43e985=>{const _0x5a71c4=_0x333d01;let _0x4f58bd=![];_0x43e985[_0x5a71c4(0x2fc)]>0x0&&(_0x4f58bd=!![]),_0x409063[_0x5a71c4(0x1ea)](_0x4f58bd),_0x4f58bd&&config[_0x5a71c4(0x2c7)]!=_0x5a71c4(0x2f7)&&logHistory(_0x5a71c4(0x329),_0x5a71c4(0x258)+_0x43e985[_0x5a71c4(0x282)]+'\x20'+_0x43e985[_0x5a71c4(0x1d6)]+'\x20#'+formatResult(_0x43e985[_0x5a71c4(0x2fc)],0x8)+'\x20@'+formatResult(_0x43e985['price'],0x8));}),_0x409063[_0x333d01(0x234)]((_0x62a503,_0x476043)=>{const _0xead1d3=_0x333d01;if(_0x62a503)lastOrders[_0xead1d3(0x2eb)](_0x476043,0x1);}),persistOpenOrders(lastOrders);const _0x39fb95=coolingDown?_0x333d01(0x249):'balancing\x20resumed';if(validateOrdersState==_0x333d01(0x20b)){validateOrdersState=_0x333d01(0x2d2);if(_0x409063[_0x333d01(0x228)](![])){if(config[_0x333d01(0x2c7)]==_0x333d01(0x2f7)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x333d01(0x2d2)){if(_0x409063[_0x333d01(0x228)](![])){}else{if(allOrdersPlaced){if(config[_0x333d01(0x2c7)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x333d01(0x290))_0x409063[_0x333d01(0x228)](![])&&(config[_0x333d01(0x2c7)]==_0x333d01(0x2f7)?logHistory(_0x333d01(0x2bf),_0x333d01(0x279)+Math[_0x333d01(0x1f3)](_0x55dc54*validateOrderInterval/0xea60)+_0x333d01(0x232)+_0x39fb95):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x333d01(0x1f3)](_0x55dc54*validateOrderInterval/0xea60)+_0x333d01(0x232)+_0x39fb95))),await unlockOrders();else{if(validateOrdersState==_0x333d01(0x1c8)){if(config[_0x333d01(0x2c7)]!=_0x333d01(0x2f7))logHistory(_0x333d01(0x2bf),_0x333d01(0x26e)+_0x39fb95);await unlockOrders();}}}}}async function cancelOrders(){const _0x3aa37a=_0x9abfb9;lastOrders[_0x3aa37a(0x234)](async _0x5dac22=>{const _0x4bee1d=_0x3aa37a;try{const _0x416b50=await exchange[_0x4bee1d(0x326)](_0x5dac22['orderId'],_0x5dac22['symbol']);}catch(_0x16b446){if(_0x16b446['toString']()[_0x4bee1d(0x228)](_0x4bee1d(0x1f7))){}else await handleError(_0x16b446,_0x4bee1d(0x2b4));}});}async function initCoinResults(_0x858411){const _0x143399=_0x9abfb9;_0x858411?logger[_0x143399(0x1fe)](_0x143399(0x2b2)+_0x858411):logger[_0x143399(0x1fe)]('Initializing\x20coin\x20results'),config[_0x143399(0x303)][_0x143399(0x234)](_0x191909=>{const _0x27920e=_0x143399;if(!_0x191909[_0x27920e(0x2cf)]&&_0x191909[_0x27920e(0x2f5)]!=config[_0x27920e(0x33b)]){const _0x327de1=currentCoins[_0x27920e(0x1e4)](_0x578904=>_0x578904[_0x27920e(0x2f5)]==_0x191909[_0x27920e(0x2f5)]),_0x4f75d6=global[_0x27920e(0x257)][noslash(_0x191909['symbol'])];let _0x130c74=_0x327de1?_0x327de1[_0x27920e(0x33a)]:null,_0x2b06d1=_0x191909[_0x27920e(0x273)]?0x1/_0x4f75d6:_0x4f75d6,_0x3efbd4;config[_0x27920e(0x1f8)][_0x27920e(0x234)](_0x18f45f=>{const _0x354b84=_0x27920e;!_0x3efbd4&&(_0x3efbd4=_0x18f45f['changes'][_0x354b84(0x1e4)](_0x4ef96b=>_0x4ef96b[_0x354b84(0x2f5)]==_0x191909[_0x354b84(0x2f5)]),_0x3efbd4&&(_0x130c74=_0x3efbd4[_0x354b84(0x33a)],_0x2b06d1=_0x3efbd4[_0x354b84(0x2bb)]));});let _0x194c4a=dbCoinResults[_0x27920e(0x334)](_0x27920e(0x226))[_0x27920e(0x1e4)]({'coin':_0x191909['coin']})[_0x27920e(0x346)]();if(!_0x194c4a){const _0x491310={'coin':_0x191909[_0x27920e(0x2f5)],'number':_0x130c74,'breakeven':_0x2b06d1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x27920e(0x334)](_0x27920e(0x226))[_0x27920e(0x1ea)](_0x491310)[_0x27920e(0x2e4)]();}else{if(_0x858411&&_0x191909[_0x27920e(0x2f5)]==_0x858411){const _0xab3b34={'coin':_0x191909[_0x27920e(0x2f5)],'number':_0x130c74,'breakeven':_0x2b06d1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x27920e(0x334)](_0x27920e(0x226))['find']({'coin':_0x191909['coin']})['assign'](_0xab3b34)[_0x27920e(0x2e4)]();}}}});}async function updateCoinResults(_0x52959c,_0x20fd32=![]){const _0x465f1c=_0x9abfb9;let _0x35bb5f,_0x3107,_0x10d259,_0x585297,_0x46e747,_0x1bf8c6,_0x4adeed=dbCoinResults['get'](_0x465f1c(0x226))[_0x465f1c(0x1e4)]({'coin':_0x52959c[_0x465f1c(0x2f5)]})[_0x465f1c(0x346)](),_0xd31c25=![];_0x4adeed&&Object[_0x465f1c(0x245)](_0x4adeed)[_0x465f1c(0x234)](([_0x2eafd4,_0x421cbd])=>{if(_0x421cbd==null)_0xd31c25=!![];});(!_0x4adeed||_0xd31c25)&&(await initCoinResults(_0x52959c[_0x465f1c(0x2f5)]),_0x4adeed=dbCoinResults['get'](_0x465f1c(0x226))[_0x465f1c(0x1e4)]({'coin':_0x52959c[_0x465f1c(0x2f5)]})[_0x465f1c(0x346)]());_0x52959c[_0x465f1c(0x273)]&&(_0x1bf8c6={'filled':_0x52959c[_0x465f1c(0x2fc)]*_0x52959c[_0x465f1c(0x2bb)],'amount':_0x52959c[_0x465f1c(0x2fc)]*_0x52959c['price'],'side':_0x52959c[_0x465f1c(0x1d6)]==_0x465f1c(0x23b)?_0x465f1c(0x25c):_0x465f1c(0x23b),'price':0x1/_0x52959c[_0x465f1c(0x2bb)]},_0x52959c={..._0x52959c,..._0x1bf8c6});_0x20fd32?_0x3107=_0x52959c[_0x465f1c(0x1d6)]==_0x465f1c(0x25c)?_0x4adeed[_0x465f1c(0x33a)]+_0x52959c[_0x465f1c(0x2fc)]:_0x4adeed[_0x465f1c(0x33a)]-_0x52959c[_0x465f1c(0x2fc)]:_0x3107=await getCoinNumber(_0x52959c[_0x465f1c(0x2f5)]);if(_0x52959c[_0x465f1c(0x27b)]&&_0x52959c['fee'][_0x465f1c(0x27f)]==config[_0x465f1c(0x33b)])_0x35bb5f=_0x52959c['fee']['cost'];else{if(_0x52959c[_0x465f1c(0x27b)]&&_0x52959c[_0x465f1c(0x27b)][_0x465f1c(0x27f)]==_0x465f1c(0x275)&&!_0x20fd32&&config[_0x465f1c(0x33b)]!=_0x465f1c(0x1dd))_0x35bb5f=_0x52959c[_0x465f1c(0x27b)][_0x465f1c(0x24f)]*global['ticker']['BNB'+config[_0x465f1c(0x33b)]];else _0x35bb5f=defaultFee*_0x52959c[_0x465f1c(0x2fc)]*_0x52959c[_0x465f1c(0x2bb)];}_0x52959c[_0x465f1c(0x1d6)]==_0x465f1c(0x25c)?(_0x10d259=_0x3107!=0x0?(_0x4adeed[_0x465f1c(0x210)]*_0x4adeed[_0x465f1c(0x33a)]+_0x52959c[_0x465f1c(0x2bb)]*(_0x3107-_0x4adeed[_0x465f1c(0x33a)])+_0x35bb5f)/_0x3107:0x0,_0x585297=_0x4adeed['realized']):(_0x10d259=_0x3107!=0x0?(_0x4adeed[_0x465f1c(0x210)]*_0x4adeed['number']-_0x52959c[_0x465f1c(0x2bb)]*(_0x4adeed[_0x465f1c(0x33a)]-_0x3107)+_0x35bb5f)/_0x3107:0x0,_0x585297=_0x4adeed['realized']+(_0x52959c[_0x465f1c(0x2bb)]-_0x4adeed[_0x465f1c(0x210)])*_0x52959c[_0x465f1c(0x2fc)]);_0x46e747=(_0x52959c[_0x465f1c(0x2bb)]-_0x10d259-_0x35bb5f/_0x52959c[_0x465f1c(0x2fc)])*_0x3107;let _0x3bb76c={'coin':_0x52959c['coin'],'number':_0x3107,'breakeven':formatResult(_0x10d259,0x8),'realized':formatResult(_0x585297,0x8),'unrealized':formatResult(_0x46e747,0x8),'fees':formatResult(_0x4adeed[_0x465f1c(0x236)]+_0x35bb5f,0x8),'sells':_0x52959c[_0x465f1c(0x1d6)]==_0x465f1c(0x23b)?_0x4adeed[_0x465f1c(0x2d0)]+0x1:_0x4adeed[_0x465f1c(0x2d0)],'buys':_0x52959c[_0x465f1c(0x1d6)]==_0x465f1c(0x25c)?_0x4adeed[_0x465f1c(0x1c3)]+0x1:_0x4adeed[_0x465f1c(0x1c3)]};dbCoinResults[_0x465f1c(0x334)](_0x465f1c(0x226))['find']({'coin':_0x52959c[_0x465f1c(0x2f5)]})[_0x465f1c(0x314)](_0x3bb76c)['write']();if(!_0x20fd32){if(_0x52959c[_0x465f1c(0x27b)]&&_0x52959c[_0x465f1c(0x27b)][_0x465f1c(0x27f)]==_0x465f1c(0x275)){const _0x30d075=currentCoins[_0x465f1c(0x1e4)](_0x599006=>_0x599006['coin']=='BNB');if(_0x30d075){let _0x12e454=dbCoinResults[_0x465f1c(0x334)]('coins')[_0x465f1c(0x1e4)]({'coin':_0x465f1c(0x275)})['value']();_0x3bb76c={..._0x12e454,'number':_0x30d075[_0x465f1c(0x33a)]},dbCoinResults['get'](_0x465f1c(0x226))[_0x465f1c(0x1e4)]({'coin':_0x465f1c(0x275)})[_0x465f1c(0x314)](_0x3bb76c)[_0x465f1c(0x2e4)]();}}}}async function placeOrder(_0x5e0570){const _0x1cecc4=_0x9abfb9,_0x5054ab=config['ordertype']==_0x1cecc4(0x2f7)?_0x1cecc4(0x2f7):_0x1cecc4(0x343);if(lockOrders==ORDERS[_0x1cecc4(0x2ca)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1cecc4(0x271)],allOrdersPlaced=![],validateOrdersState=_0x1cecc4(0x20b);let _0x359f72=![];lastOrders=[];for(const _0x255e49 of _0x5e0570){let _0x4330e2,_0x1da0c2,_0x2cec19,_0x2d37d3,_0x52bb89,_0x76dfa8=_0x255e49[_0x1cecc4(0x282)];try{const _0x2c2fb0=await exchange[_0x1cecc4(0x2b1)](_0x76dfa8);_0x4330e2=_0x255e49['reverse']?0x1/_0x255e49['last']:_0x255e49[_0x1cecc4(0x292)],_0x1da0c2=_0x2c2fb0[_0x1cecc4(0x1ef)],_0x2cec19=_0x2c2fb0['ask'];_0x255e49[_0x1cecc4(0x273)]?(_0x2d37d3=_0x255e49[_0x1cecc4(0x1d6)]=='buy'?_0x1cecc4(0x23b):_0x1cecc4(0x25c),_0x52bb89=Math[_0x1cecc4(0x238)](_0x255e49['trade'])/_0x4330e2):(_0x2d37d3=_0x255e49[_0x1cecc4(0x1d6)],_0x52bb89=Math['abs'](_0x255e49['trade']));_0x5054ab==_0x1cecc4(0x343)&&(config['ordertype']==_0x1cecc4(0x2ba)&&(_0x4330e2=_0x2d37d3==_0x1cecc4(0x25c)?_0x1da0c2:_0x2cec19),config[_0x1cecc4(0x2c7)]==_0x1cecc4(0x231)&&(_0x4330e2=_0x2d37d3=='buy'?_0x2cec19:_0x1da0c2));_0x52bb89=formatResult(_0x52bb89,0x8),_0x4330e2=formatResult(_0x4330e2,0x8);const _0x47cfb5=_0x2d37d3==_0x1cecc4(0x23b)?config[_0x1cecc4(0x243)]?String[_0x1cecc4(0x2ae)]('0x'+config['emojisell'])+'\x20':'':config[_0x1cecc4(0x2d7)]?String[_0x1cecc4(0x2ae)]('0x'+config['emojibuy'])+'\x20':'',_0x2a207c=_0x5054ab==_0x1cecc4(0x2f7)?_0x1cecc4(0x2e3):config[_0x1cecc4(0x2c7)]==_0x1cecc4(0x2ba)?_0x1cecc4(0x349):_0x1cecc4(0x2de),_0x1e9064=(Math['floor'](Math[_0x1cecc4(0x215)]()*0x35a4e900)+0x5f5e100)[_0x1cecc4(0x240)]();lastOrders[_0x1cecc4(0x1ea)]({'customId':_0x1e9064,'symbol':_0x76dfa8,'coin':_0x255e49[_0x1cecc4(0x2f5)],'amount':_0x52bb89,'price':_0x4330e2,'side':_0x2d37d3,'reverse':_0x255e49[_0x1cecc4(0x273)],'filled':0x0});if(_0x5054ab==_0x1cecc4(0x2f7))logHistory(_0x1cecc4(0x329),''+_0x47cfb5+_0x2a207c+'\x20order:\x20'+_0x76dfa8+'\x20'+_0x2d37d3+'\x20#'+formatResult(_0x52bb89,0x8)+'\x20@'+formatResult(_0x4330e2,0x8));else logHistory('order',''+_0x47cfb5+_0x2a207c+'\x20order:\x20'+_0x76dfa8+'\x20'+_0x2d37d3+'\x20#'+formatResult(_0x52bb89,0x8)+'\x20@'+formatResult(_0x4330e2,0x8));let _0x310e84;_0x5054ab==_0x1cecc4(0x2f7)?_0x2d37d3==_0x1cecc4(0x25c)&&[_0x1cecc4(0x286),'Bitget',_0x1cecc4(0x30a),'Huobi',_0x1cecc4(0x261)][_0x1cecc4(0x228)](config[_0x1cecc4(0x302)])?_0x310e84=await exchange[_0x1cecc4(0x1ec)](_0x76dfa8,_0x5054ab,_0x2d37d3,_0x52bb89,_0x4330e2):_0x310e84=await exchange[_0x1cecc4(0x1ec)](_0x76dfa8,_0x5054ab,_0x2d37d3,_0x52bb89,undefined):_0x310e84=await exchange[_0x1cecc4(0x1ec)](_0x76dfa8,_0x5054ab,_0x2d37d3,_0x52bb89,_0x4330e2);logger[_0x1cecc4(0x1fe)]('ID:\x20'+_0x310e84['id']+_0x1cecc4(0x216)+_0x1e9064);const _0x2d4ab0=lastOrders[_0x1cecc4(0x348)]-0x1;if(_0x2d4ab0>=0x0&&lastOrders[_0x2d4ab0][_0x1cecc4(0x2f4)]==_0x1e9064){lastOrders[_0x2d4ab0][_0x1cecc4(0x21f)]=_0x310e84['id'];if(_0x310e84[_0x1cecc4(0x2ab)])lastOrders[_0x2d4ab0][_0x1cecc4(0x2ab)]=_0x310e84['amount'];if(_0x310e84['price'])lastOrders[_0x2d4ab0][_0x1cecc4(0x2bb)]=_0x310e84[_0x1cecc4(0x2bb)];lastOrders[_0x2d4ab0][_0x1cecc4(0x27b)]=_0x310e84[_0x1cecc4(0x27b)];}if(config[_0x1cecc4(0x22c)]!=0x0){let _0x4f32a2=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x4f32a2=cooldownTracker[_0x1cecc4(0x330)]();const _0x523d46=getTimeStamp();cooldownTracker[_0x1cecc4(0x1ea)](_0x523d46);if(_0x4f32a2){const _0x5d4e9a=fns[_0x1cecc4(0x225)](new Date(_0x523d46),new Date(_0x4f32a2));if(_0x5d4e9a<cooldownInterval){logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x2f3)+config['cooldown']+_0x1cecc4(0x230)+cooldownInterval/0x3c+_0x1cecc4(0x2a7)+cooldownPeriod/(0xe10*0x3e8)+_0x1cecc4(0x2dc)),coolingDown=!![];break;}}}}catch(_0x3c5b21){if(_0x3c5b21[_0x1cecc4(0x240)]()[_0x1cecc4(0x228)](_0x1cecc4(0x30f)))lastOrders=lastOrders[_0x1cecc4(0x20d)](_0x363afe=>_0x363afe[_0x1cecc4(0x282)]!=_0x76dfa8),logHistory(_0x1cecc4(0x2b8),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x76dfa8),_0x359f72=!![];else{if(_0x3c5b21[_0x1cecc4(0x240)]()[_0x1cecc4(0x228)](_0x1cecc4(0x2c5)))lastOrders=lastOrders[_0x1cecc4(0x20d)](_0x21f639=>_0x21f639[_0x1cecc4(0x282)]!=_0x76dfa8),logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x2c6)+_0x76dfa8),_0x359f72=!![];else{if(_0x3c5b21[_0x1cecc4(0x240)]()[_0x1cecc4(0x228)]('InvalidOrder'))lastOrders=lastOrders[_0x1cecc4(0x20d)](_0x4e7b64=>_0x4e7b64[_0x1cecc4(0x282)]!=_0x76dfa8),logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x322)+_0x76dfa8),logger[_0x1cecc4(0x1fe)](_0x3c5b21),_0x359f72=!![];else _0x3c5b21[_0x1cecc4(0x240)]()[_0x1cecc4(0x228)](_0x1cecc4(0x246))?(lastOrders=lastOrders[_0x1cecc4(0x20d)](_0x5b9d61=>_0x5b9d61[_0x1cecc4(0x282)]!=_0x76dfa8),logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x293)+_0x76dfa8),_0x359f72=!![]):(lastOrders=lastOrders[_0x1cecc4(0x20d)](_0xb3aebb=>_0xb3aebb[_0x1cecc4(0x282)]!=_0x76dfa8),await handleError(_0x3c5b21,_0x1cecc4(0x321),_0x76dfa8));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1cecc4(0x348)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1a4044=config[_0x1cecc4(0x2c7)]==_0x1cecc4(0x2f7)?validateOrderTimeout*0x3c*0x3e8:config[_0x1cecc4(0x202)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4deca8=_0x1cecc4;validateOrders(_0x4deca8(0x290));},_0x1a4044);}else unlockOrders();_0x359f72&&config['headless']&&(logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x2fb)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1cecc4(0x2bf),_0x1cecc4(0x222)));}else{if(coolingDown)!config[_0x1cecc4(0x2c8)]&&logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x2db));else lockOrders!=ORDERS[_0x1cecc4(0x2ca)]&&(!config['headless']&&(config[_0x1cecc4(0x2c7)]==_0x1cecc4(0x2f7)?logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x21c)):logHistory(_0x1cecc4(0x2b8),_0x1cecc4(0x1fd))));}}function persistOpenOrders(_0x19a8e4){const _0x1580d9=_0x9abfb9,_0x303474={...config,'openOrders':_0x19a8e4};let _0x30ddfa=dbConfig[_0x1580d9(0x334)](_0x1580d9(0x205))[_0x1580d9(0x1e4)]({'botID':botID})[_0x1580d9(0x346)]();_0x30ddfa&&dbConfig[_0x1580d9(0x334)]('bot')[_0x1580d9(0x1e4)]({'botID':botID})[_0x1580d9(0x314)](_0x303474)[_0x1580d9(0x2e4)]();}function restoreOrders(){const _0x2663f4=_0x9abfb9;let _0x1a5763;config[_0x2663f4(0x2e1)]&&allOpenOrders[_0x2663f4(0x234)](_0x395dbd=>{const _0x441154=_0x2663f4,_0x52a1aa=config[_0x441154(0x2e1)]['find'](_0x156b83=>_0x156b83[_0x441154(0x21f)]==_0x395dbd['id']);_0x52a1aa&&(lastOrders[_0x441154(0x1ea)](_0x52a1aa),_0x1a5763=_0x395dbd[_0x441154(0x297)]);});if(lastOrders[_0x2663f4(0x348)]>0x0){lockOrders=ORDERS[_0x2663f4(0x271)],validateOrdersState=_0x2663f4(0x2d2),allOrdersPlaced=!![];const _0x26c41e=new Date()['getTime'](),_0x30ebb6=config[_0x2663f4(0x2c7)]==_0x2663f4(0x2f7)?validateOrderTimeout*0x3c*0x3e8:config[_0x2663f4(0x202)]*0x3c*0x3e8;if(_0x1a5763+_0x30ebb6>_0x26c41e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2577af=_0x2663f4;validateOrders(_0x2577af(0x290));},_0x1a5763+_0x30ebb6-_0x26c41e);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x37f95e=_0x9abfb9;if(!coinsLoaded){process[_0x37f95e(0x262)]({'telegrammsg':_0x37f95e(0x291)},_0x5bbfa0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4c1a0f='';if(config[_0x37f95e(0x340)])_0x4c1a0f='<b>'+config[_0x37f95e(0x2a8)]+_0x37f95e(0x272);else _0x4c1a0f=_0x37f95e(0x1ce)+botID+_0x37f95e(0x272);const _0x27e96d=getKPIs(_0x37f95e(0x33b)),_0x35896b=getKPIs(_0x37f95e(0x248),config['fiat']),_0x4c3544=getKPIs('net-basecoin'),_0x1511f5=getKPIs(_0x37f95e(0x250),config[_0x37f95e(0x248)]);_0x4c1a0f+=_0x37f95e(0x1e3),_0x4c1a0f+=_0x27e96d['leftTxt']+_0x37f95e(0x265)+_0x27e96d['value']+'\x0a',_0x4c1a0f+=_0x27e96d['rightTxt']+':\x20'+_0x27e96d['change']+'%\x0a',_0x4c1a0f+=_0x35896b[_0x37f95e(0x310)]+'\x20:\x20'+_0x35896b[_0x37f95e(0x346)]+'\x0a',_0x4c1a0f+=_0x35896b[_0x37f95e(0x31a)]+':\x20'+_0x35896b[_0x37f95e(0x315)]+'%\x0a',_0x4c1a0f+=_0x4c3544[_0x37f95e(0x310)]+':\x20'+_0x4c3544[_0x37f95e(0x346)]+'\x20('+config[_0x37f95e(0x33b)]+')\x0a',_0x4c1a0f+=_0x4c3544[_0x37f95e(0x31a)]+':\x20'+_0x4c3544[_0x37f95e(0x315)]+'%\x20('+config[_0x37f95e(0x33b)]+')\x0a',_0x4c1a0f+=_0x1511f5[_0x37f95e(0x310)]+':\x20'+_0x1511f5[_0x37f95e(0x346)]+'\x20('+config[_0x37f95e(0x248)]+')\x0a',_0x4c1a0f+=_0x1511f5[_0x37f95e(0x31a)]+':\x20'+_0x1511f5[_0x37f95e(0x315)]+_0x37f95e(0x32d)+config[_0x37f95e(0x248)]+')\x0a',_0x4c1a0f+='</pre>',process[_0x37f95e(0x262)]({'telegrammsg':_0x4c1a0f},_0xb83ada=>{});}async function sendPortfolioTelegram(){const _0x16f262=_0x9abfb9;if(!coinsLoaded){process[_0x16f262(0x262)]({'telegrammsg':_0x16f262(0x291)},_0xda5526=>{});return;}let _0x5c58f9='';if(config[_0x16f262(0x340)])_0x5c58f9=_0x16f262(0x1da)+config[_0x16f262(0x2a8)]+_0x16f262(0x2cc);else _0x5c58f9=_0x16f262(0x1ce)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5c58f9+=_0x16f262(0x1e3),_0x5c58f9+=_0x16f262(0x1c1),_0x5c58f9+=_0x16f262(0x345),_0x5c58f9+='-------------------------------\x0a',currentCoins['forEach'](_0x2d433e=>{const _0x4e6fee=_0x16f262;_0x5c58f9+=_0x2d433e[_0x4e6fee(0x2f5)][_0x4e6fee(0x242)](0x7)+'|\x20'+formatPad(_0x2d433e[_0x4e6fee(0x2c9)],0x2,0x6)+'|\x20'+formatPad(_0x2d433e['target'],0x2,0x6)+'|\x20'+formatPad(_0x2d433e[_0x4e6fee(0x2d3)]*0x64,0x2,0x6)+'\x0a';}),_0x5c58f9+='</pre>',process[_0x16f262(0x262)]({'telegrammsg':_0x5c58f9},_0x139cd9=>{});}function formatPad(_0x5b9c1a,_0x4ac668,_0x9f0e48){const _0x4cb429=_0x9abfb9,_0x32696f=formatResultString(_0x5b9c1a,_0x4ac668);return _0x32696f?_0x32696f[_0x4cb429(0x31d)](_0x9f0e48):''[_0x4cb429(0x31d)](_0x9f0e48);}function logHistory(_0x4eca65,_0x595cfb,_0x5ead0e=''){const _0x134781=_0x9abfb9;logger['full'](''+_0x595cfb);let _0x20650e={'time':getTimeStamp(),'type':_0x4eca65,'event':_0x595cfb};dbLogs[_0x134781(0x334)](_0x134781(0x30e))['push'](_0x20650e)[_0x134781(0x2e4)]();if(_0x5ead0e=='')_0x5ead0e=_0x595cfb;proxyEmit(_0x134781(0x2a6),{'log':_0x20650e,'summary':_0x5ead0e}),process[_0x134781(0x262)]({'telegram':{..._0x20650e,'botname':config['botname'],'showname':config['showname']}},_0x30e445=>{});}function emitHistory(_0x391e43={}){const _0x53bbef=_0x9abfb9;Object[_0x53bbef(0x2cb)](_0x391e43)['length']==0x0&&(_0x391e43={'type':[_0x53bbef(0x329),_0x53bbef(0x2a6)],'event':'','page':0x1});if(_0x391e43['type'][_0x53bbef(0x228)](_0x53bbef(0x2a6)))_0x391e43[_0x53bbef(0x28b)][_0x53bbef(0x2eb)](_0x391e43['type'][_0x53bbef(0x298)](_0x53bbef(0x2a6)),0x1,_0x53bbef(0x2b8),_0x53bbef(0x268),_0x53bbef(0x2bf));if(dbLogs[_0x53bbef(0x24e)](_0x53bbef(0x30e))[_0x53bbef(0x346)]()){let _0x34fedb=dbLogs[_0x53bbef(0x334)]('logs')[_0x53bbef(0x20d)](_0x594eef=>{const _0x24a61b=_0x53bbef;if(_0x391e43['type'][_0x24a61b(0x348)]==0x0)return![];else return _0x391e43[_0x24a61b(0x28b)][_0x24a61b(0x228)](_0x594eef[_0x24a61b(0x28b)]);})[_0x53bbef(0x20d)](_0x11c0e6=>{const _0x191982=_0x53bbef;if(_0x391e43[_0x191982(0x2a6)]=='')return!![];else return _0x11c0e6[_0x191982(0x2a6)][_0x191982(0x201)]()['includes'](_0x391e43[_0x191982(0x2a6)]['toLowerCase']());})['sortBy']('time'),_0x1ee8a3=_0x34fedb[_0x53bbef(0x346)]()[_0x53bbef(0x348)];_0x34fedb=_0x34fedb[_0x53bbef(0x273)]()[_0x53bbef(0x34d)]((_0x391e43[_0x53bbef(0x26a)]-0x1)*logPageSize,_0x391e43['page']*logPageSize-0x1)[_0x53bbef(0x273)]()[_0x53bbef(0x346)](),proxyEmit(_0x53bbef(0x304),{'logs':_0x34fedb,'total':_0x1ee8a3});}else proxyEmit(_0x53bbef(0x304),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x20b227){const _0x27b32a=_0x9abfb9;if(dbLogs[_0x27b32a(0x24e)]('logs')[_0x27b32a(0x346)]()){const _0x456729=dbLogs[_0x27b32a(0x334)](_0x27b32a(0x30e))['sortBy'](_0x27b32a(0x316))[_0x27b32a(0x20d)](_0x596239=>{const _0x12c85d=_0x27b32a;return _0x596239[_0x12c85d(0x28b)]==_0x12c85d(0x329);})[_0x27b32a(0x346)]();dbLogs['get'](_0x27b32a(0x30e))[_0x27b32a(0x26f)]()[_0x27b32a(0x2e4)](),dbLogs[_0x27b32a(0x334)]('logs')[_0x27b32a(0x314)](_0x456729)[_0x27b32a(0x2e4)](),emitHistory(_0x20b227);}}async function pauseBot(_0x4e48db=pauseBotInterval){const _0x261895=_0x9abfb9,_0x5e2c01=new Date()[_0x261895(0x223)]();if(!lastErrorShown||_0x5e2c01-lastErrorShown>=_0x4e48db){lastErrorShown=_0x5e2c01;!lastBotPause?(lastBotPause=_0x5e2c01,consecutivePauses=0x1):(_0x5e2c01-lastBotPause-_0x4e48db<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x261895(0x262)]({'stop':_0x261895(0x2b0)},_0x4099f5=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x261895(0x223)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x4e48db),botPaused=![],reset(!![]);}}}function _0x304b(){const _0x418379=['/output-000.log','Cooldown\x20ended\x20-\x20balancing\x20resumed','getTime','getAllOrders()','differenceInSeconds','coins','changes','includes','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','recreateCoinResults()','format','cooldown','\x20|\x20exchange:\x20','USDC','stringify','\x20orders\x20in\x20less\x20than\x20','limit-low','\x20minutes\x20-\x20','fetchOpenOrders','forEach','data','fees','Failed\x20to\x20load\x20coin\x20data\x20for\x20','abs','sort','apply','sell','fetchClosedOrders','createWriteStream','spot','remainingSymbols','toString','2.3.5','padEnd','emojisell','fetchTickers','entries','must\x20be\x20greater\x20than\x20minimum\x20amount','************','fiat','balancing\x20resumes\x20when\x20cooldown\x20ends','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','existsSync','Error\x20details:','password','has','cost','net-fiat','\x20exchange','bb-secure.json','getMinutes','watchTrades','offset','-performance.json','ticker','Order\x20filled:\x20','EUR','Transaction\x20detection\x20unblocked','configuration-stored','buy','49SfAFnB','startsWith','BTC','lowdb','Huobipro','send','ORDERS.LOCKED',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20:\x20','usd','USD','warning','full','page','open','AuthenticationError','status','No\x20more\x20open\x20orders\x20-\x20','remove','emitHistory','LOCKED','\x20metrics:</b>\x20\x0a\x0a','reverse','basecoinvalue','BNB','Manual\x20balancing\x20required','util','Cryptocom','Order(s)\x20not\x20validated\x20after\x20','netoffset','fee','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','RSA-OAEP','getSeconds','currency','average','toggleBotMode','symbol','\x20change','valid','isEqual','Bybit','Error\x20while\x20deleting\x20files:\x20','\x20|\x20','placeOrder','toUpperCase','type','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Unknown\x20error\x20occured','privateKey','showConfig','final','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','last','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','2\x20-\x20Orders\x20unlocked','map','Reset\x20|\x20','timestamp','indexOf','timeshift','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','limits','net-basecoin','defaults','001','Net\x20','concat','1\x20-\x20Validate\x20orders:\x20','mkdirSync','configuration','3750804hHJgGu','event','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','botname','ORDERS.UNLOCKED','decrypt','amount','watchOrders()','enabled','fromCodePoint','settings','restart','fetchTicker','Resetting\x20coin\x20results:\x20','pro','cancelOrders()','2.6.0','(((.+)+)+)+$','threshold','error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','limit-high','price','yyyy/MM/dd','getCoins()','apiSecret','success','getPortfolio(2)','1862032Ioipyg','onepagemode','./config/','getStartingBalances','Invalid\x20quantity','Order\x20amount\x20is\x20invalid:\x20','ordertype','headless','distribution','UNLOCKED','keys','\x20portfolio:</b>\x20\x0a\x0a','string','datetime','excluded','sells','kill','ongoing','delta','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','exchanges','search','emojibuy','Exception\x20thrown\x20in\x20','/backup/','lowdb/adapters/FileSync','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20hour','max','Limit\x20(low-margin)','\x20>\x20','sendMetricsTelegram','openOrders','API-key\x20format\x20invalid','Market','write','none','highest','\x20-\x20pausing\x20bot\x20for\x20','apiPassword','unlinkSync','closed','splice','exec','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','writeFile','active','exchange\x20not\x20reloaded','851TdjJLE','loadMarkets','Executed\x20','customId','coin','findIndex','market','secure','Exchange','getHours','Avoiding\x20continuous\x20order\x20attempts','filled','1\x20-\x20Handle\x20open\x20orders','apiKey','close','ORDERS.UNLOCKING','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','exchange','portfolio','event-history','fetchBalance','initTickers()','milliseconds','Headless:\x20','stopExchange()','Cex','total','\x20network\x20error','1607889tbdyaF','logs','MIN_NOTIONAL','leftTxt','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','assign','change','time','join','trade','\x20API\x20secret\x20is\x20invalid','rightTxt','freeze','2\x20-\x20Validate\x20orders:\x20','padStart','cloneDeep','326HreXoe',':\x20timer\x20>','placeOrder()','Order\x20is\x20invalid:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','performance','-events.json','cancelOrder','recreate','ccxt','order','balances','InsufficientFunds','./logs/','%\x20(','getDate','\x20exchange\x20error','shift','2\x20-\x20Handled\x20open\x20orders','ETH','added','get','function','Crypt','recent20','\x20closed\x20the\x20connection','BNB/','number','basecoin','storeHeadless','autoliquidity','startdate','constructor','showname','USDT','progress','limit','sha256','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','value','min','length','Limit\x20(high-margin)','Executing\x20exchange\x20reload','deleteHistoryAlerts','Loading\x20completed','slice','removed','startnumber','0\x20-\x20EXECUTION:\x20','target','-------------------------------\x0a','\x20>\x20[DEBUG]\x20','buys','set','argv','toFixed','PermissionDenied','no\x20open\x20orders','orderstatus','date','RateLimitExceeded','TUSD','replace','<b>Bot\x20','watchTransactions()','Pausing\x20for\x20',':\x20Bot\x20','\x20blocked\x20your\x20API','\x20not\x20responding','bot-','30074BfdhiM','side','running','\x20minutes','131220YYOJfg','<b>','startprice','Net\x20effect','PAXG','2096MOMwvu','log','test','add','160sFcgTu','<pre>','find','percentage','getPortfolio(1)','substring','Invalid\x20API\x20key\x20or\x20secret\x20entered','bots','push','red_yellow_blue','createOrder','\x20has\x20a\x2024h\x20drop\x20of\x20','split','bid','version','BUSD','change24h','round','getMonth','args','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','OrderNotFound','liquidity','parseISO','\x20/\x20','USDP','getFullYear','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','debug','Binance','1520lBGzby','toLowerCase','timeout','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','hybrid-crypto-js','bot','colorscheme','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','sortBy','eur','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','initial','sendPortfolioTelegram','filter','2.5.0','UNLOCKING','breakeven','.json','getCoinNumber()','loading-canceled','-results.json','random','\x20|\x20Custom\x20ID:\x20','./version.json','message','canceled','Transaction\x20detection\x20blocked','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','parse','Waited\x20','orderId','Portfolio\x20change\x20detected:\x20'];_0x304b=function(){return _0x418379;};return _0x304b();}async function killBot(){const _0x252b06=_0x9abfb9;botPaused=!![],await sleep(0x3e8),process[_0x252b06(0x262)]({'stop':_0x252b06(0x2d1)},_0x58c2d5=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3ff45e,_0x3b712f){const _0x1d013d=_0x9abfb9;if(botPaused)return;const _0x5a6560=config['exchange']||_0x1d013d(0x2f9);if(_0x3b712f)logger['debug'](_0x1d013d(0x2d8)+_0x3b712f);const _0xed73c1=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x3ff45e[_0x1d013d(0x240)]()[_0x1d013d(0x228)](_0x1d013d(0x2e2)))logHistory('error',_0x5a6560+_0x1d013d(0x311)),_0xed73c1();else{if(_0x3ff45e[_0x1d013d(0x240)]()[_0x1d013d(0x228)](_0x1d013d(0x29a)))logHistory('error',_0x5a6560+_0x1d013d(0x28c)),_0xed73c1();else _0x3ff45e['toString']()[_0x1d013d(0x228)](_0x1d013d(0x26c))?(logHistory(_0x1d013d(0x2b8),_0x5a6560+_0x1d013d(0x313)),logHistory(_0x1d013d(0x2b8),_0x1d013d(0x24a)),_0xed73c1()):await handleError(_0x3ff45e,null);}}async function handleError(_0x596a94,_0x4a89bb,_0x9b931e=''){const _0x55b05a=_0x9abfb9;if(botPaused)return;const _0x5ad55d=config['exchange']||_0x55b05a(0x2f9);if(_0x4a89bb)logger[_0x55b05a(0x1fe)](_0x55b05a(0x2d8)+_0x4a89bb);if(_0x596a94['toString']()[_0x55b05a(0x228)]('DDoSProtection')||_0x596a94[_0x55b05a(0x240)]()['includes'](_0x55b05a(0x1cb)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x596a94['toString']()[_0x55b05a(0x228)]('ExchangeNotAvailable')||_0x596a94[_0x55b05a(0x240)]()[_0x55b05a(0x228)]('OnMaintenance'))logHistory(_0x55b05a(0x2b8),_0x5ad55d+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x596a94[_0x55b05a(0x240)]()['includes']('RequestTimeout'))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x1d3)+pauseBotMsg),await pauseBot();else{if(_0x596a94[_0x55b05a(0x240)]()[_0x55b05a(0x228)](_0x55b05a(0x27c)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x338)+pauseBotMsg),await pauseBot();else{if(_0x596a94[_0x55b05a(0x240)]()[_0x55b05a(0x228)](_0x55b05a(0x312)))logHistory(_0x55b05a(0x2b8),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x55b05a(0x2b8),_0x55b05a(0x2b9)),await killBot();else{if(_0x596a94['toString']()['includes']('InvalidNonce'))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x1d2)+pauseBotMsgLong),logHistory(_0x55b05a(0x2b8),_0x55b05a(0x2ed)),await pauseBot(pauseBotIntervalLong);else{if(_0x596a94 instanceof ccxt['NetworkError'])logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x30c)+pauseBotMsg),logger[_0x55b05a(0x1fe)](_0x55b05a(0x24c),_0x596a94),await pauseBot();else{if(_0x596a94[_0x55b05a(0x240)]()['includes'](_0x55b05a(0x2e2)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x55b05a(0x2b8),_0x55b05a(0x2b9)),await killBot();else{if(_0x596a94[_0x55b05a(0x240)]()[_0x55b05a(0x228)](_0x55b05a(0x29a)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x319)),logHistory('error',_0x55b05a(0x2b9)),await killBot();else{if(_0x596a94['toString']()[_0x55b05a(0x228)](_0x55b05a(0x26c)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x1f6)),logHistory(_0x55b05a(0x2b8),_0x55b05a(0x2b9)),await killBot();else{if(_0x596a94['toString']()[_0x55b05a(0x228)](_0x55b05a(0x1c7)))logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x229)),logHistory(_0x55b05a(0x2b8),_0x55b05a(0x2b9)),await killBot();else{if(_0x596a94[_0x55b05a(0x240)]()[_0x55b05a(0x228)](_0x55b05a(0x32b)))logHistory(_0x55b05a(0x2b8),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x9b931e);else _0x596a94 instanceof ccxt['ExchangeError']?(logHistory(_0x55b05a(0x2b8),_0x5ad55d+_0x55b05a(0x32f)),logger[_0x55b05a(0x1fe)](_0x55b05a(0x24c),_0x596a94)):(logHistory('error',_0x55b05a(0x28d)+pauseBotMsg),logger[_0x55b05a(0x1fe)](_0x55b05a(0x24c),_0x596a94),await pauseBot());}}}}}}}}}}}}function formatResult(_0x3ba7e1,_0x2d79b6){return parseFloat(_0x3ba7e1['toFixed'](_0x2d79b6));}function formatResultTruncate(_0x812554,_0xbd646b){const _0x59a4e5=_0x9abfb9;let _0x443afa=formatResultString(_0x812554,0xa),_0x3311c2=_0x443afa[_0x59a4e5(0x298)]('.');return _0x3311c2!=-0x1&&(_0x443afa=_0x443afa[_0x59a4e5(0x34d)](0x0,_0x3311c2+_0xbd646b+0x1)),Number(_0x443afa);}function formatResultString(_0x97f318,_0xb02e6){const _0x16a7e3=_0x9abfb9;let _0x594879;if(!(''+_0x97f318)[_0x16a7e3(0x228)]('e'))_0x594879=+(Math[_0x16a7e3(0x1f3)](_0x97f318+'e+'+_0xb02e6)+'e-'+_0xb02e6);else{let _0x1dd9e2=(''+_0x97f318)[_0x16a7e3(0x1ee)]('e'),_0x3b6636='';+_0x1dd9e2[0x1]+_0xb02e6>0x0&&(_0x3b6636='+'),_0x594879=+(Math[_0x16a7e3(0x1f3)](+_0x1dd9e2[0x0]+'e'+_0x3b6636+(+_0x1dd9e2[0x1]+_0xb02e6))+'e-'+_0xb02e6);}return Number(_0x594879)[_0x16a7e3(0x1c6)](_0xb02e6);}function getServerTime(){const _0x27ef21=_0x9abfb9,_0x96d29f=new Date();return _0x96d29f[_0x27ef21(0x1fc)]()+'/'+(_0x96d29f[_0x27ef21(0x1f4)]()+0x1)[_0x27ef21(0x240)]()[_0x27ef21(0x31d)](0x2,'0')+'/'+_0x96d29f[_0x27ef21(0x32e)]()[_0x27ef21(0x240)]()['padStart'](0x2,'0')+'\x20'+_0x96d29f[_0x27ef21(0x2fa)]()[_0x27ef21(0x240)]()[_0x27ef21(0x31d)](0x2,'0')+':'+_0x96d29f[_0x27ef21(0x253)]()['toString']()[_0x27ef21(0x31d)](0x2,'0')+':'+_0x96d29f[_0x27ef21(0x27e)]()[_0x27ef21(0x240)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2d043c=_0x9abfb9,_0x787a63=shiftedTime();return _0x787a63[_0x2d043c(0x1fc)]()+'/'+(_0x787a63[_0x2d043c(0x1f4)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x787a63[_0x2d043c(0x32e)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x787a63['getHours']()['toString']()[_0x2d043c(0x31d)](0x2,'0')+':'+_0x787a63['getMinutes']()['toString']()[_0x2d043c(0x31d)](0x2,'0')+':'+_0x787a63['getSeconds']()[_0x2d043c(0x240)]()[_0x2d043c(0x31d)](0x2,'0');}function getDate(){const _0x3b545f=_0x9abfb9,_0x303e88=shiftedTime();return _0x303e88['getFullYear']()+'/'+(_0x303e88[_0x3b545f(0x1f4)]()+0x1)[_0x3b545f(0x240)]()[_0x3b545f(0x31d)](0x2,'0')+'/'+_0x303e88[_0x3b545f(0x32e)]()[_0x3b545f(0x240)]()[_0x3b545f(0x31d)](0x2,'0');}function getHour(){const _0x147624=shiftedTime();return _0x147624['getHours']()['toString']()['padStart'](0x2,'0');}function sleep(_0x4db09b){return new Promise(_0x54b5a6=>setTimeout(_0x54b5a6,_0x4db09b));}function shiftedTime(){const _0xc5e552=_0x9abfb9,_0x2b9c3e=new Date();let _0x497355=_0x2b9c3e;if(config&&config[_0xc5e552(0x299)]!==0x0)_0x497355=fns[_0xc5e552(0x1e1)](_0x2b9c3e,{'hours':config[_0xc5e552(0x299)]});return _0x497355;}function timer(_0x44a69d){const _0x2e1739=_0x9abfb9,_0x83aee7=new Date();!lasttime?console[_0x2e1739(0x1df)](getTimeStamp()+_0x2e1739(0x320),_0x44a69d,_0x83aee7):console[_0x2e1739(0x1df)](getTimeStamp()+_0x2e1739(0x320),_0x44a69d,(_0x83aee7-lasttime)/0x3e8),lasttime=_0x83aee7;}