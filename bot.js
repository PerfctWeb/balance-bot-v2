const _0x4b61f0=_0x2234;(function(_0x1aec2a,_0xc0277a){const _0x585f60=_0x2234,_0x19f8c9=_0x1aec2a();while(!![]){try{const _0x5742b5=-parseInt(_0x585f60(0x2ed))/0x1+-parseInt(_0x585f60(0x20e))/0x2+parseInt(_0x585f60(0x279))/0x3*(parseInt(_0x585f60(0x256))/0x4)+parseInt(_0x585f60(0x2d2))/0x5+parseInt(_0x585f60(0x21e))/0x6+parseInt(_0x585f60(0x21f))/0x7*(-parseInt(_0x585f60(0x2c4))/0x8)+-parseInt(_0x585f60(0x28b))/0x9*(-parseInt(_0x585f60(0x26a))/0xa);if(_0x5742b5===_0xc0277a)break;else _0x19f8c9['push'](_0x19f8c9['shift']());}catch(_0x106f71){_0x19f8c9['push'](_0x19f8c9['shift']());}}}(_0x13bc,0x97625));const _0x441a1e=function(){let _0x409393=!![];return function(_0x442108,_0x58d2e4){const _0x214011=_0x409393?function(){const _0x11b7ae=_0x2234;if(_0x58d2e4){const _0x82eb0=_0x58d2e4[_0x11b7ae(0x2c0)](_0x442108,arguments);return _0x58d2e4=null,_0x82eb0;}}:function(){};return _0x409393=![],_0x214011;};}(),_0x3a7af9=_0x441a1e(this,function(){const _0x271f64=_0x2234;return _0x3a7af9[_0x271f64(0x1e2)]()[_0x271f64(0x21d)](_0x271f64(0x201))[_0x271f64(0x1e2)]()['constructor'](_0x3a7af9)['search'](_0x271f64(0x201));});_0x3a7af9();'use strict';const ccxt=require(_0x4b61f0(0x2bf)),low=require(_0x4b61f0(0x281)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require(_0x4b61f0(0x2f1))[_0x4b61f0(0x20b)];let exchange,wsClient;global[_0x4b61f0(0x202)]={},global[_0x4b61f0(0x2d9)]={};let ws1=[],ws2=null,ws3=[];const exceptions=['DAI/',_0x4b61f0(0x2f3),'HOT/EUR',_0x4b61f0(0x2d3),_0x4b61f0(0x23e),_0x4b61f0(0x1fa)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4b61f0(0x2a7))[_0x4b61f0(0x289)],botID=process[_0x4b61f0(0x2cd)][0x2]||_0x4b61f0(0x232),pattern=/^[0-9]{3}$/;!pattern[_0x4b61f0(0x1fd)](botID)&&(console[_0x4b61f0(0x23f)](_0x4b61f0(0x2f0)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x4b61f0(0x253)](0x1));const userID=process[_0x4b61f0(0x2cd)][0x3]||'',configpath=userID?_0x4b61f0(0x21b)+userID+'/':'./config/';function _0x13bc(){const _0x1b08b4=['starting-balance-','.json','coin-loading-progress','/USDT','fetchOpenOrders','breakeven','change24h','\x20|\x20Binance\x20API\x20key\x20invalid','delta','ask','toString','data','Executed\x20','filled','2.3.5','differenceInSeconds','last','bot-','headless','split','Validation\x20period\x20ended','format','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','includes','target','toLowerCase','sendPortfolioTelegram','valid','FILLED','cost','abs','logs','keys','getCloses()','YOYOW/','Binance\x20not\x20responding','push','test','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','buys','remove','(((.+)+)+)+$','ticker','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','string','stringify','Limit\x20(low-margin)',')\x20|\x20Error\x20details:\x20','showname','event-history','number','Crypt','commissionAsset','DDoSProtection','1566502eHwpDX','privateKey','changes','Binance\x20not\x20available\x20(1)','filter','cloneDeep','timestamp','Order(s)\x20filled\x20-\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','no\x20open\x20orders','USDT','existsSync','botname','./config/','limits','search','6320088XjGFyF','7LOLjuh','ordertype','Set\x20timeout\x20to:','success','time','placeOrder','ongoing','toFixed','OrderNotFound','order','running','max','eventType','has','send','getPortfolio','map','performance','eventTime','001','getCoins()','defaults','market','Invalid\x20quantity','Order(s)\x20not\x20validated\x20after\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20order:\x20','side','initws()','cancelOrder','Placed\x20orders:','NANO/','log','Pausing\x20for\x20','coinamount','round','milliseconds','wss://stream.binance.com:9443','WebSockets(','buy','cancelOrders()','message','apiKey','threshold','/backup/','ETH','outboundAccountPosition','\x20orders\x20in\x20less\x20than\x20','excluded','wss://stream.binance.us:9443','apiSecret','fetchOrders','exit','wsKey','distribution','44GnNLHQ','subscribeSymbol24hrTicker','eur','userData','\x20|\x20Binance\x20API\x20secret\x20invalid','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','join','yyyy/MM/dd\x20HH:mm:ss','Unfilled\x20order(s)\x20canceled\x20after\x20','cooldown','fetchBalance','loadSymbols()','fetchTickers','exchange','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','args','trade','starttime','limit-low','portfolio','1412810zdRlBb','getPortfolio()','getTime','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','-performance.json','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','loadMarkets','-events.json','value','currency','coins','writeFile','BNB','parseISO','-results.json','64299ebcTbk','enabled','getDate','yyyy-MM-dd\x27T\x27HH:mm:ss','API\x20or\x20clock\x20sync\x20issue','accumulatedQuantity','Binance\x20API\x20secret\x20is\x20invalid','subscribeSpotUserDataStream','lowdb','Order:\x20','parse','getMinutes','bot','2.4.4','reverse','balancing\x20resumes\x20when\x20cooldown\x20ends','version','type','27BpYljO','Coin\x20|\x20Distr%\x20|\x20Target%\x20|\x20Delta%\x0a','startprice','liquidity','MIN_NOTIONAL','emitHistory','progress','function','min','Unknown\x20error\x20occured','findIndex','RequestTimeout','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','decrypt','recreate','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','event','AuthenticationError','sells','kline','getFullYear','InsufficientFunds','placeOrder()','bid','isArray','sell','spot','\x20minutes\x20-\x20','./version.json','starting-balances','realized','emojisell','add','priceChangePercent','timeshift','cancel','Performance\x20recreation\x20completed\x20successfully','No\x20more\x20open\x20orders\x20-\x20','sortBy','cumulativeQuoteAssetTransactedQty','Binance\x20API\x20key\x20is\x20invalid','bb-settings.json','subscribeSpotKline','write','basecoin','slice','limit-high','balancing\x20resumed','Order\x20amount\x20is\x20invalid:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','splice','startnumber','ccxt','apply','storeHeadless','binanceus','BNB/','5556720hIfTnl','getHours','Order\x20filled:\x20','amount','EUR','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','replace','InvalidNonce','remainingSymbols','argv','isEqual','getMonth','symbol','\x20|\x20','5675185Qthvxm','XEM/BUSD','\x20|\x20Error\x20details:\x20','Order(s)\x20validated\x20-\x20','forEach','BUSD','API-key\x20format\x20invalid','change','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','fromCodePoint','balances','configuration-stored','yyyy/MM/dd','Limit\x20(high-margin)','\x20-\x20','total','initial','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','executionReport','assign','length','usd','padStart','configuration','emojibuy','entries','kill','750081ErOGUD','sort','page','Error:\x20Invalid\x20argument\x20','hybrid-crypto-js','\x20>\x20','HOT/BTC','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fees','limit','fee','************','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','BTC','set','restart','find','price','reconnected','startdate','timeout','ExchangeNotAvailable','mkdirSync','error','bb-secure.json','-config.json','date','initialprice','Restored\x20orders:','shift','orderId',':\x20Bot\x20','secure','offset','\x20minutes','datetime','coin','get','final','USDC'];_0x13bc=function(){return _0x1b08b4;};return _0x13bc();}!fs[_0x4b61f0(0x219)](configpath)&&fs[_0x4b61f0(0x303)](configpath);const configfile=configpath+'bot-'+botID+_0x4b61f0(0x306),logfile=configpath+_0x4b61f0(0x1e9)+botID+_0x4b61f0(0x271),performancefile=configpath+_0x4b61f0(0x1e9)+botID+_0x4b61f0(0x26e),coinresultsfile=configpath+_0x4b61f0(0x1e9)+botID+_0x4b61f0(0x278),settingsfile=configpath+_0x4b61f0(0x2b4),securefile=configpath+_0x4b61f0(0x305),configbackuppath=configpath+_0x4b61f0(0x24b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4b61f0(0x234)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4b61f0(0x234)]({'data':[]})[_0x4b61f0(0x2b6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4b61f0(0x234)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4b61f0(0x234)]({'coins':[]})[_0x4b61f0(0x2b6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3bb711)=>{},'debug':(..._0x63fd02)=>{},'notice':(..._0x3a873d)=>{},'info':(..._0x3b0168)=>{},'warning':(..._0x133b93)=>{},'error':async function(..._0x2c66d9){const _0xe5bd8c=_0x4b61f0,_0x41167a=new Date()[_0xe5bd8c(0x26c)]();if(!lastErrorShown||_0x41167a-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime']();let _0x525c8c='';if(_0x2c66d9[0x0])_0x525c8c+=_0x2c66d9[0x0];if(_0x2c66d9[0x1]&&_0x2c66d9[0x1]['error']&&_0x2c66d9[0x1][_0xe5bd8c(0x304)]['message'])_0x525c8c+=_0xe5bd8c(0x2e0)+_0x2c66d9[0x1][_0xe5bd8c(0x304)][_0xe5bd8c(0x248)];logging(_0xe5bd8c(0x245)+consecutivePauses+_0xe5bd8c(0x207),''+_0x525c8c),await pauseBot(_0xe5bd8c(0x211));}}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x4b61f0(0x2ad)]!=config[_0x4b61f0(0x2ad)]&&updateTimeshift(settings['timeshift']);process[_0x4b61f0(0x22d)]({'started':_0x4b61f0(0x229)},_0x3949ea=>{}),initializeProcessListeners();function proxyEmit(_0x1a771a,_0xc8d3aa=null){const _0x2402f4=_0x4b61f0;process[_0x2402f4(0x22d)]({'function':_0x1a771a,'args':_0xc8d3aa},_0x449120=>{});}function initializeProcessListeners(){const _0x5266b5=_0x4b61f0;process['on'](_0x5266b5(0x248),_0x46b7cc=>{const _0x71a32d=_0x5266b5;switch(Object['keys'](_0x46b7cc)[0x0]){case _0x71a32d(0x2ad):_0x46b7cc[_0x71a32d(0x2ad)]!=undefined&&(settings[_0x71a32d(0x2ad)]=_0x46b7cc['timeshift'],updateTimeshift(settings[_0x71a32d(0x2ad)]));break;case'function':switch(_0x46b7cc[_0x71a32d(0x292)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x71a32d(0x290):emitHistory(_0x46b7cc['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x46b7cc[_0x71a32d(0x265)]);break;case _0x71a32d(0x22e):getPortfolio(_0x46b7cc[_0x71a32d(0x265)]);break;case'storeConfiguration':storeConfiguration(_0x46b7cc[_0x71a32d(0x265)]);break;case _0x71a32d(0x2c1):storeHeadless(_0x46b7cc[_0x71a32d(0x265)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x71a32d(0x224):placeOrder(_0x46b7cc[_0x71a32d(0x265)]);break;case'cancelLoading':cancelLoading();break;case _0x71a32d(0x1f2):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x10a5de=_0x4b61f0;if(pidBalances)clearTimeout(pidBalances);if(config[_0x10a5de(0x249)]!=''){await initExchange(config[_0x10a5de(0x249)],config['apiSecret']);let _0x296213=await loadSymbols();if(_0x296213){currentCoins=await getCoins(),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x5ba1c8,_0x40150a){const _0x3c82f2=_0x4b61f0,_0x258f7a=ccxt[config['exchange']];let _0x298041;switch(config['exchange']){case'binance':_0x298041=_0x3c82f2(0x244);break;case _0x3c82f2(0x2c2):_0x298041=_0x3c82f2(0x250);break;default:_0x298041=_0x3c82f2(0x244);}exchange=new _0x258f7a({'apiKey':_0x5ba1c8,'secret':_0x40150a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5ba1c8,'api_secret':_0x40150a,'beautify':!![],'wsUrl':_0x298041},logger);let _0x1b217a=config[_0x3c82f2(0x263)]==_0x3c82f2(0x2c2)?'USDT':_0x3c82f2(0x2c8),_0x153f47=config[_0x3c82f2(0x2b7)]==_0x3c82f2(0x24c)?_0x3c82f2(0x24c):'BTC';stablecoins={'eur':{'coin':''+_0x153f47+_0x1b217a,'symbol':_0x153f47+'/'+_0x1b217a},'usd':{'coin':_0x153f47+'USDT','symbol':_0x153f47+_0x3c82f2(0x1db)}};}async function loadSymbols(){const _0x1ffcdd=_0x4b61f0;let _0x4e030c;try{markets=await exchange[_0x1ffcdd(0x270)](),allSymbols=exchange['symbols'][_0x1ffcdd(0x212)](_0x5688b7=>{const _0x50b63a=_0x1ffcdd;let _0x5c3e5b=![];return exceptions[_0x50b63a(0x2d6)](_0x37297e=>{const _0xcf566c=_0x50b63a;if(_0x5688b7[_0xcf566c(0x1ef)](_0x37297e))_0x5c3e5b=!![];}),!_0x5c3e5b;}),_0x4e030c=!![];}catch(_0xb900d1){await handleError(_0xb900d1,_0x1ffcdd(0x261)),_0x4e030c=![];}return _0x4e030c;}async function initbot(){const _0x50d004=_0x4b61f0;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x18a12e=dbCoinResults[_0x50d004(0x312)](_0x50d004(0x274))['value']();if(_0x18a12e[_0x50d004(0x2e6)]==0x0)await resetCoinResults();}function _0x2234(_0x22b9ea,_0x1ae18c){const _0x1e5e26=_0x13bc();return _0x2234=function(_0x3a7af9,_0x441a1e){_0x3a7af9=_0x3a7af9-0x1db;let _0x13bc1d=_0x1e5e26[_0x3a7af9];return _0x13bc1d;},_0x2234(_0x22b9ea,_0x1ae18c);}async function initclient(){const _0x3676ce=_0x4b61f0;proxyEmit(_0x3676ce(0x2e9),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3676ce(0x2dc),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2c6b98=getNormalizedPerformance();emitPerformance(_0x2c6b98),await getStartingBalances(_0x2c6b98);}async function toggleBotMode(){const _0x1d14ad=_0x4b61f0;let _0x861a53=dbConfig[_0x1d14ad(0x312)](_0x1d14ad(0x285))[_0x1d14ad(0x2fd)]({'botID':botID})['value']();if(_0x861a53){const _0x3cf028=!_0x861a53[_0x1d14ad(0x1ea)];dbConfig[_0x1d14ad(0x312)](_0x1d14ad(0x285))[_0x1d14ad(0x2fd)]({'botID':botID})[_0x1d14ad(0x2e5)]({'headless':_0x3cf028})[_0x1d14ad(0x2b6)](),config[_0x1d14ad(0x1ea)]=_0x3cf028,proxyEmit(_0x1d14ad(0x2e9),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x15c74e=>{});}function cleanws(){const _0x1b6004=_0x4b61f0;wsinitialized=![];ws1&&(ws1[_0x1b6004(0x2d6)](_0xdc6e18=>{try{wsClient['closeWs'](_0xdc6e18);}catch(_0xb8a762){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x387443){}ws2=null;}ws3&&(ws3[_0x1b6004(0x2d6)](_0x1b14bc=>{try{wsClient['closeWs'](_0x1b14bc);}catch(_0x3ec523){}}),ws3=[]);}async function initws(){const _0x17caa6=_0x4b61f0;cleanws();let _0x371d11=[];currentCoins[_0x17caa6(0x2d6)](_0x267284=>{const _0x293ca4=_0x17caa6;if(_0x267284[_0x293ca4(0x311)]!=config[_0x293ca4(0x2b7)])_0x371d11[_0x293ca4(0x1fc)](_0x267284[_0x293ca4(0x2d0)]);});if(!_0x371d11[_0x17caa6(0x1ef)](stablecoins[_0x17caa6(0x258)][_0x17caa6(0x2d0)]))_0x371d11[_0x17caa6(0x1fc)](stablecoins[_0x17caa6(0x258)][_0x17caa6(0x2d0)]);if(!_0x371d11[_0x17caa6(0x1ef)](stablecoins[_0x17caa6(0x2e7)][_0x17caa6(0x2d0)]))_0x371d11[_0x17caa6(0x1fc)](stablecoins[_0x17caa6(0x2e7)][_0x17caa6(0x2d0)]);if(!_0x371d11[_0x17caa6(0x1ef)](_0x17caa6(0x2c3)+config['basecoin']))_0x371d11[_0x17caa6(0x1fc)]('BNB/'+config['basecoin']);try{_0x371d11[_0x17caa6(0x2d6)]((_0x241508,_0xc7f387)=>{const _0x526123=_0x17caa6;ws1[_0xc7f387]=wsClient[_0x526123(0x2b5)](noslash(_0x241508),'1m'),ws3[_0xc7f387]=wsClient[_0x526123(0x257)](noslash(_0x241508),_0x526123(0x2a5));}),ws2=wsClient[_0x17caa6(0x280)](),wsClient['on']('formattedMessage',_0xa0c52e=>{const _0x470f35=_0x17caa6;if(isWsFormattedKline(_0xa0c52e)){global['ticker'][_0xa0c52e[_0x470f35(0x29e)][_0x470f35(0x2d0)]]=_0xa0c52e[_0x470f35(0x29e)]['close'];return;}else{if(isWsFormatted24hrTicker(_0xa0c52e)){global[_0x470f35(0x2d9)][_0xa0c52e[_0x470f35(0x2d0)]]=_0xa0c52e[_0x470f35(0x2ac)];return;}else{if(!Array[_0x470f35(0x2a3)](_0xa0c52e)&&_0xa0c52e[_0x470f35(0x254)][_0x470f35(0x1ef)](_0x470f35(0x259))){if(_0xa0c52e['wsMarket'][_0x470f35(0x1ef)](_0x470f35(0x2a5))){updateNumberCoins(_0xa0c52e);return;}}}}}),wsClient['on'](_0x17caa6(0x2ff),async _0x358a4a=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x58e8af){await handleError(_0x58e8af,_0x17caa6(0x23b));}let _0x1c38a4,_0x33ef40=0x0;loading['remainingSymbols']=[];let _0x231ed4=0x0;_0x371d11['forEach'](_0x523a8b=>{const _0x53f65e=_0x17caa6;loading[_0x53f65e(0x2cc)][_0x53f65e(0x1fc)](_0x523a8b);}),loadingCanceled=![];while(_0x1c38a4!=_0x371d11[_0x17caa6(0x2e6)]){_0x1c38a4=0x0,_0x371d11[_0x17caa6(0x2d6)](_0x5b898f=>{const _0x53415e=_0x17caa6;global[_0x53415e(0x202)][noslash(_0x5b898f)]&&(loading['remainingSymbols']=loading[_0x53415e(0x2cc)][_0x53415e(0x212)](_0x4a2611=>_0x4a2611!=_0x5b898f),_0x1c38a4++);}),loading[_0x17caa6(0x291)]=Math[_0x17caa6(0x242)](_0x1c38a4/_0x371d11[_0x17caa6(0x2e6)]*0x64);_0x231ed4>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x17caa6(0x2ae)]=!![],emitLoadingProgress();break;}else _0x1c38a4!=_0x33ef40&&(_0x33ef40=_0x1c38a4,emitLoadingProgress()),_0x231ed4++,await sleep(0xc8);}if(_0x1c38a4==_0x371d11[_0x17caa6(0x2e6)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x5b4275=_0x4b61f0;proxyEmit(_0x5b4275(0x317),loading);}async function getFiat(){const _0x32c212=_0x4b61f0;let _0x1cc8ad=0x0,_0x58ebd4=0x0;try{_0x1cc8ad=global[_0x32c212(0x202)][stablecoins['eur'][_0x32c212(0x311)]],_0x58ebd4=global[_0x32c212(0x202)][stablecoins[_0x32c212(0x2e7)][_0x32c212(0x311)]];}catch(_0x3832f2){await handleError(_0x3832f2,'getFiat()');}return{'eur':Number(_0x1cc8ad),'usd':Number(_0x58ebd4)};}function setStartDatePerformance(){const _0x1fd896=_0x4b61f0;if(config&&config[_0x1fd896(0x28e)][0x0][_0x1fd896(0x210)]['length']!=0x0){const _0x580d65=config['liquidity'][0x0][_0x1fd896(0x210)];dbPerformance[_0x1fd896(0x312)](_0x1fd896(0x1e3))[_0x1fd896(0x2fd)]({'date':config[_0x1fd896(0x300)]})['assign']({'coins':_0x580d65})[_0x1fd896(0x2b6)]();}}async function recreateHistory(_0x915cdc){const _0x27c812=_0x4b61f0;let _0x36cf49,_0x573d5b=[];logHistory(_0x27c812(0x222),_0x27c812(0x2c9)),_0x915cdc['portfolio'][_0x27c812(0x2d6)](_0x4aeabe=>{const _0xd64eff=_0x27c812;if(_0x4aeabe[_0xd64eff(0x311)]!=config['basecoin']&&!_0x4aeabe[_0xd64eff(0x24f)])_0x573d5b['push']({'coin':_0x4aeabe[_0xd64eff(0x311)],'symbol':_0x4aeabe['symbol']});});let _0x51a9d2=[];try{const _0x3c37c1=fns[_0x27c812(0x1ed)](fns[_0x27c812(0x277)](_0x915cdc[_0x27c812(0x300)]['replace'](/\//g,'-')),_0x27c812(0x27c));for(const _0x1e4323 of _0x573d5b){if(_0x1e4323[_0x27c812(0x311)]!=config[_0x27c812(0x2b7)])_0x36cf49=await exchange[_0x27c812(0x252)](_0x1e4323[_0x27c812(0x2d0)],Date[_0x27c812(0x283)](_0x3c37c1));_0x36cf49[_0x27c812(0x2d6)](_0x3c20e6=>{const _0x18f889=_0x27c812,_0x133127=_0x1e4323[_0x18f889(0x2d0)][_0x18f889(0x1ef)](config[_0x18f889(0x2b7)]+'/'),_0x1f69cd=fns[_0x18f889(0x1ed)](fns[_0x18f889(0x277)](_0x3c20e6[_0x18f889(0x310)]),_0x18f889(0x25d)),_0x16196f=fns[_0x18f889(0x1ed)](fns[_0x18f889(0x277)](_0x3c20e6['datetime']),_0x18f889(0x2de));let _0x76bb50;if(_0x3c20e6[_0x18f889(0x23a)]=='buy'&&_0x133127==![])_0x76bb50=_0x3c20e6[_0x18f889(0x2c7)];if(_0x3c20e6[_0x18f889(0x23a)]==_0x18f889(0x246)&&_0x133127==!![])_0x76bb50=-_0x3c20e6[_0x18f889(0x2c7)]*_0x3c20e6['price'];if(_0x3c20e6[_0x18f889(0x23a)]==_0x18f889(0x2a4)&&_0x133127==![])_0x76bb50=-_0x3c20e6[_0x18f889(0x2c7)];if(_0x3c20e6[_0x18f889(0x23a)]==_0x18f889(0x2a4)&&_0x133127==!![])_0x76bb50=_0x3c20e6[_0x18f889(0x2c7)]*_0x3c20e6[_0x18f889(0x2fe)];_0x51a9d2[_0x18f889(0x1fc)]({'timestamp':_0x1f69cd,'date':_0x16196f,'coin':_0x1e4323['coin'],'symbol':_0x1e4323['symbol'],'type':_0x3c20e6[_0x18f889(0x28a)],'side':_0x3c20e6[_0x18f889(0x23a)],'reverse':_0x133127,'amount':formatResult(_0x3c20e6[_0x18f889(0x1e5)],0x8),'filled':formatResult(_0x3c20e6[_0x18f889(0x1e5)],0x8),'coinamount':formatResult(_0x76bb50,0x8),'price':formatResult(_0x3c20e6['price'],0x8)});let _0x572d7;if(_0x3c20e6['side']==_0x18f889(0x246)&&_0x133127==![])_0x572d7=-_0x3c20e6['amount']*_0x3c20e6[_0x18f889(0x2fe)];if(_0x3c20e6[_0x18f889(0x23a)]==_0x18f889(0x246)&&_0x133127==!![])_0x572d7=_0x3c20e6[_0x18f889(0x2c7)];if(_0x3c20e6[_0x18f889(0x23a)]=='sell'&&_0x133127==![])_0x572d7=_0x3c20e6['amount']*_0x3c20e6[_0x18f889(0x2fe)];if(_0x3c20e6[_0x18f889(0x23a)]=='sell'&&_0x133127==!![])_0x572d7=-_0x3c20e6[_0x18f889(0x2c7)];_0x51a9d2[_0x18f889(0x1fc)]({'date':_0x16196f,'coin':config['basecoin'],'coinamount':formatResult(_0x572d7,0x8)});});}_0x51a9d2[_0x27c812(0x2ee)]((_0x5b7fc6,_0x40684)=>_0x5b7fc6[_0x27c812(0x214)]>_0x40684[_0x27c812(0x214)]?0x1:_0x40684[_0x27c812(0x214)]>_0x5b7fc6[_0x27c812(0x214)]?-0x1:0x0),dbLogs[_0x27c812(0x312)]('logs')[_0x27c812(0x200)]()[_0x27c812(0x2b6)](),_0x51a9d2[_0x27c812(0x2d6)](_0x445d43=>{const _0x1018c8=_0x27c812;let _0x2bc09d;_0x445d43[_0x1018c8(0x311)]!=config[_0x1018c8(0x2b7)]&&(_0x2bc09d={'time':_0x445d43[_0x1018c8(0x214)],'type':'order','event':_0x1018c8(0x282)+_0x445d43[_0x1018c8(0x2d0)]+'\x20'+_0x445d43[_0x1018c8(0x23a)]+'\x20#'+_0x445d43[_0x1018c8(0x2c7)]+'\x20@'+_0x445d43[_0x1018c8(0x2fe)]},dbLogs[_0x1018c8(0x312)](_0x1018c8(0x1f7))['push'](_0x2bc09d)['write']());});const _0x32b3eb=fns['eachDayOfInterval']({'start':new Date(_0x915cdc[_0x27c812(0x300)]),'end':new Date()})[_0x27c812(0x22f)](_0x3de039=>fns['format'](_0x3de039,_0x27c812(0x2de)));let _0x55200e=[];_0x915cdc[_0x27c812(0x269)][_0x27c812(0x2d6)](_0x1f7df3=>{const _0x20cc02=_0x27c812;if(!_0x1f7df3[_0x20cc02(0x24f)]){_0x55200e[_0x1f7df3[_0x20cc02(0x311)]]=[];let _0x5c506c=_0x1f7df3[_0x20cc02(0x2be)];_0x32b3eb[_0x20cc02(0x2d6)]((_0x5b01aa,_0x4dcb12)=>{const _0x103f35=_0x20cc02;let _0x23796a=_0x51a9d2[_0x103f35(0x212)](_0x2561bf=>_0x2561bf[_0x103f35(0x311)]==_0x1f7df3[_0x103f35(0x311)]&&_0x2561bf[_0x103f35(0x307)]==_0x5b01aa);if(_0x23796a[_0x103f35(0x2e6)]!=0x0){let _0x2262bc=_0x23796a['reduce']((_0xbff4bb,_0x3b5eba)=>{const _0x5731f4=_0x103f35;return _0xbff4bb+=_0x3b5eba[_0x5731f4(0x241)],_0xbff4bb;},0x0);_0x5c506c+=_0x2262bc;}_0x55200e[_0x1f7df3['coin']][_0x5b01aa]=_0x5c506c;});}});const _0xbd08e=[..._0x573d5b];_0xbd08e[_0x27c812(0x1fc)]({'coin':stablecoins[_0x27c812(0x258)][_0x27c812(0x311)],'symbol':stablecoins[_0x27c812(0x258)][_0x27c812(0x2d0)]}),_0xbd08e[_0x27c812(0x1fc)]({'coin':stablecoins[_0x27c812(0x2e7)]['coin'],'symbol':stablecoins['usd']['symbol']});let _0x2ab0dc=[];for(const _0x327c8f of _0xbd08e){_0x2ab0dc[_0x327c8f[_0x27c812(0x311)]]=await getCloses(_0x327c8f[_0x27c812(0x2d0)],new Date(_0x915cdc[_0x27c812(0x300)]));}dbPerformance['get']('data')['remove']()[_0x27c812(0x2b6)](),_0x32b3eb['forEach']((_0x5381f7,_0x22e19b)=>{const _0x340e8f=_0x27c812;let _0x49bacb,_0x888d82=[];_0x22e19b==0x0?(_0x915cdc[_0x340e8f(0x269)]['forEach'](_0xfc16b8=>{const _0x9bf9e9=_0x340e8f;!_0xfc16b8[_0x9bf9e9(0x24f)]&&_0x888d82[_0x9bf9e9(0x1fc)]({'coin':_0xfc16b8['coin'],'number':_0xfc16b8[_0x9bf9e9(0x2be)],'price':_0xfc16b8['startprice']});}),_0x49bacb={'date':_0x5381f7,'eur':_0x2ab0dc[stablecoins['eur'][_0x340e8f(0x311)]][_0x22e19b],'usd':_0x2ab0dc[stablecoins[_0x340e8f(0x2e7)][_0x340e8f(0x311)]][_0x22e19b],'coins':_0x888d82}):(_0x915cdc[_0x340e8f(0x269)][_0x340e8f(0x2d6)](_0x2b5285=>{const _0x128fac=_0x340e8f;!_0x2b5285[_0x128fac(0x24f)]&&_0x888d82[_0x128fac(0x1fc)]({'coin':_0x2b5285[_0x128fac(0x311)],'number':_0x55200e[_0x2b5285['coin']][_0x5381f7],'price':_0x2b5285['coin']==config[_0x128fac(0x2b7)]?0x1:_0x2ab0dc[_0x2b5285['coin']][_0x22e19b]});}),_0x49bacb={'date':_0x5381f7,'eur':_0x2ab0dc[stablecoins[_0x340e8f(0x258)][_0x340e8f(0x311)]][_0x22e19b],'usd':_0x2ab0dc[stablecoins[_0x340e8f(0x2e7)]['coin']][_0x22e19b],'coins':_0x888d82}),dbPerformance['get']('data')[_0x340e8f(0x1fc)](_0x49bacb)[_0x340e8f(0x2b6)]();}),emitPerformance(getNormalizedPerformance()),await resetCoinResults();for(let _0x463ab3 of _0x51a9d2){_0x463ab3[_0x27c812(0x311)]!=config['basecoin']&&await updateCoinResults(_0x463ab3);}logHistory('success',_0x27c812(0x2af));}catch(_0x2ba25a){await handleError(_0x2ba25a,'recreateHistory()');}}async function validate24hChanges(){const _0x3638d1=_0x4b61f0;let _0x597aed;for(const _0x87b4a3 of currentCoins){if(_0x87b4a3[_0x3638d1(0x311)]!=config['basecoin']){let _0x1cfe5d;_0x87b4a3['reverse']?_0x1cfe5d=formatResult((0x1/(global['change'][noslash(_0x87b4a3['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1cfe5d=global[_0x3638d1(0x2d9)][noslash(_0x87b4a3[_0x3638d1(0x2d0)])],_0x1cfe5d<config[_0x3638d1(0x1de)]&&(logHistory('error',_0x87b4a3[_0x3638d1(0x311)]+_0x3638d1(0x216)+_0x1cfe5d+'%'),logHistory('error',_0x3638d1(0x1ee)),logHistory(_0x3638d1(0x304),'Carefully\x20evaludate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function getCloses(_0x4c1388,_0x4eb3fd,_0x2f05bf=undefined){const _0x88b809=_0x4b61f0,_0x1fc1d1='1d';let _0x507f1b,_0x2312d4;const _0x278f7b=fns['differenceInCalendarDays'](new Date(),_0x4eb3fd)+0x1;try{const _0x3b0f67=exchange[_0x88b809(0x243)]()-_0x278f7b*0x18*0xe10*0x3e8;_0x507f1b=await exchange['fetchOHLCV'](_0x4c1388,_0x1fc1d1,_0x3b0f67,_0x2f05bf),_0x2312d4=await exchange[_0x88b809(0x262)](_0x4c1388);}catch(_0x41c998){await handleError(_0x41c998,_0x88b809(0x1f9));}let _0x3467a0=ohlcvToCloses(_0x507f1b);return _0x3467a0['push'](_0x2312d4[_0x4c1388][_0x88b809(0x1e8)]),_0x3467a0;}function ohlcvToCloses(_0x5119d6){const _0x4dc636=_0x4b61f0;let _0x37d31a=[];return _0x5119d6[_0x4dc636(0x2d6)](function(_0x42d1d4){const _0x54dfc2=_0x4dc636;_0x37d31a[_0x54dfc2(0x1fc)](_0x42d1d4[0x4]);}),_0x37d31a;}function oneTimeMigration(){const _0x13d2ab=_0x4b61f0;let _0x416c03=dbLogs[_0x13d2ab(0x312)](_0x13d2ab(0x289))[_0x13d2ab(0x272)]();if(_0x416c03!=_0x13d2ab(0x1e6)){dbLogs[_0x13d2ab(0x2fb)](_0x13d2ab(0x289),_0x13d2ab(0x1e6))[_0x13d2ab(0x2b6)]();let _0x3b14b6=[];const _0x1474c0=dbLogs[_0x13d2ab(0x312)]('logs')[_0x13d2ab(0x272)]();_0x1474c0['forEach'](_0x23467f=>{const _0x4be24e=_0x13d2ab;_0x3b14b6['push']({'time':_0x23467f[_0x4be24e(0x223)],'type':_0x23467f[_0x4be24e(0x28a)],'event':_0x23467f['event']});}),dbLogs['get']('logs')[_0x13d2ab(0x2e5)](_0x3b14b6)[_0x13d2ab(0x2b6)]();}let _0x4d7467=dbConfig[_0x13d2ab(0x312)](_0x13d2ab(0x289))[_0x13d2ab(0x272)]();if(_0x4d7467!='2.3.5'){dbConfig[_0x13d2ab(0x2fb)](_0x13d2ab(0x289),_0x13d2ab(0x1e6))[_0x13d2ab(0x2b6)]();let _0x4e2548=dbConfig[_0x13d2ab(0x312)]('bot')['find']({'botID':botID})[_0x13d2ab(0x272)]();if(_0x4e2548){let _0x686f63=[];_0x4e2548['portfolio'][_0x13d2ab(0x2d6)](_0x8ddacc=>{const _0x2acfd3=_0x13d2ab;_0x686f63[_0x2acfd3(0x1fc)]({'coin':_0x8ddacc[_0x2acfd3(0x311)],'number':_0x8ddacc[_0x2acfd3(0x2be)],'price':_0x8ddacc['startprice']}),delete _0x8ddacc['startnumber'],delete _0x8ddacc[_0x2acfd3(0x28d)];});if(_0x686f63[_0x13d2ab(0x2e6)]!==0x0)fs[_0x13d2ab(0x275)](configbackuppath+(_0x13d2ab(0x315)+botID+_0x13d2ab(0x316)),JSON[_0x13d2ab(0x205)](_0x686f63,null,0x4),function(_0x265fe1){if(_0x265fe1){}});const _0x3af3e5=(_0x17d09b,_0x383a60)=>{const _0x17b060=_0x13d2ab;let _0x1d2cfe=[];_0x383a60[_0x17b060(0x2d6)](_0x5b259b=>{const _0x1636d8=_0x17b060,_0x382da4=_0x17d09b['find'](_0x1294af=>_0x1294af[_0x1636d8(0x311)]==_0x5b259b[_0x1636d8(0x311)]);if(!_0x382da4)_0x1d2cfe[_0x1636d8(0x1fc)](_0x5b259b);});let _0x24084a=[];return _0x17d09b['forEach'](_0x15b885=>{const _0x190f7d=_0x17b060,_0x2234e1=_0x383a60['find'](_0x19af64=>_0x19af64[_0x190f7d(0x311)]==_0x15b885['coin']);if(!_0x2234e1||_0x2234e1['number']==0x0&&_0x15b885[_0x190f7d(0x20a)]!=0x0)_0x24084a['push'](_0x15b885);}),{'missingDay1':_0x1d2cfe,'notInDay2':_0x24084a};},_0x469cfe=dbPerformance[_0x13d2ab(0x312)]('data')[_0x13d2ab(0x213)]()[_0x13d2ab(0x272)]();if(_0x469cfe[_0x13d2ab(0x2e6)]>0x1){const {missingDay1:_0x1a9454,notInDay2:_0x20fd58}=_0x3af3e5(_0x686f63,_0x469cfe[0x1][_0x13d2ab(0x274)]);_0x686f63=[..._0x686f63,..._0x1a9454],_0x20fd58['forEach'](_0x501cdb=>{const _0x4bd744=_0x13d2ab;let _0x3ee696=_0x686f63[_0x4bd744(0x295)](_0x53ef5f=>_0x53ef5f['coin']==_0x501cdb[_0x4bd744(0x311)]);_0x3ee696!=-0x1&&_0x686f63[_0x4bd744(0x2bd)](_0x3ee696,0x1);});}_0x686f63[_0x13d2ab(0x2ee)]((_0x5beff5,_0x2f2379)=>_0x5beff5['coin']>_0x2f2379[_0x13d2ab(0x311)]?0x1:_0x2f2379[_0x13d2ab(0x311)]>_0x5beff5['coin']?-0x1:0x0);let _0xf1a8ca=[{'date':_0x4e2548['startdate'],'changes':_0x686f63}];_0x469cfe[_0x13d2ab(0x2e6)]>0x2&&_0x469cfe[_0x13d2ab(0x2d6)]((_0xa23a17,_0x58d97c)=>{const _0x10c8f2=_0x13d2ab;if(_0x58d97c>0x0&&_0x58d97c<_0x469cfe[_0x10c8f2(0x2e6)]-0x1){const {missingDay1:_0x54e3f3,notInDay2:_0x4be29c}=_0x3af3e5(_0x469cfe[_0x58d97c][_0x10c8f2(0x274)],_0x469cfe[_0x58d97c+0x1]['coins']);_0x686f63=[],(_0x54e3f3[_0x10c8f2(0x2e6)]!=0x0||_0x4be29c[_0x10c8f2(0x2e6)]!=0x0)&&(_0x54e3f3[_0x10c8f2(0x2e6)]!=0x0&&_0x686f63[_0x10c8f2(0x1fc)](..._0x54e3f3),_0x4be29c[_0x10c8f2(0x2e6)]!=0x0&&(_0x4be29c[_0x10c8f2(0x2d6)](_0x368bc6=>{const _0x3c6b11=_0x10c8f2;_0x368bc6[_0x3c6b11(0x20a)]=-_0x368bc6['number'];}),_0x686f63[_0x10c8f2(0x1fc)](..._0x4be29c)),_0x686f63[_0x10c8f2(0x2ee)]((_0xba3d41,_0x221d44)=>_0xba3d41[_0x10c8f2(0x311)]>_0x221d44['coin']?0x1:_0x221d44[_0x10c8f2(0x311)]>_0xba3d41['coin']?-0x1:0x0),_0xf1a8ca[_0x10c8f2(0x1fc)]({'date':_0x469cfe[_0x58d97c+0x1][_0x10c8f2(0x307)],'changes':_0x686f63}));}}),dbConfig['get']('bot')[_0x13d2ab(0x2fd)]({'botID':botID})[_0x13d2ab(0x2e5)]({..._0x4e2548,'liquidity':_0xf1a8ca})[_0x13d2ab(0x2b6)]();}}config=getConfiguration(botID);let _0x2e3eee=dbPerformance[_0x13d2ab(0x312)](_0x13d2ab(0x289))[_0x13d2ab(0x272)]();_0x2e3eee!=_0x13d2ab(0x1e6)&&(dbPerformance[_0x13d2ab(0x2fb)](_0x13d2ab(0x289),_0x13d2ab(0x1e6))['write'](),setStartDatePerformance());let _0x791675=dbCoinResults[_0x13d2ab(0x312)](_0x13d2ab(0x289))[_0x13d2ab(0x272)]();_0x791675!=_0x13d2ab(0x286)&&(dbCoinResults[_0x13d2ab(0x312)]('coins')[_0x13d2ab(0x200)]()[_0x13d2ab(0x2b6)](),dbCoinResults[_0x13d2ab(0x2fb)](_0x13d2ab(0x289),_0x13d2ab(0x286))[_0x13d2ab(0x2b6)](),dbCoinResults[_0x13d2ab(0x2fb)](_0x13d2ab(0x267),getTimeStamp())[_0x13d2ab(0x2b6)]());}function getConfiguration(_0x41e0f9){const _0x4f84fe=_0x4b61f0;let _0x5e83cb=dbConfig['get'](_0x4f84fe(0x285))[_0x4f84fe(0x2fd)]({'botID':_0x41e0f9})[_0x4f84fe(0x272)]();if(_0x5e83cb){let _0x38b9d9=![];typeof _0x5e83cb[_0x4f84fe(0x24a)]==_0x4f84fe(0x204)&&(_0x5e83cb={..._0x5e83cb,'threshold':Number(_0x5e83cb[_0x4f84fe(0x24a)])},_0x38b9d9=!![]),_0x5e83cb[_0x4f84fe(0x1de)]==null&&(_0x5e83cb={..._0x5e83cb,'change24h':-0x14},_0x38b9d9=!![]),_0x38b9d9&&(_0x5e83cb={'botID':_0x5e83cb['botID'],'exchange':_0x5e83cb[_0x4f84fe(0x263)],'apiKey':_0x5e83cb[_0x4f84fe(0x249)],'apiSecret':_0x5e83cb[_0x4f84fe(0x251)],'basecoin':_0x5e83cb['basecoin'],'botname':_0x5e83cb[_0x4f84fe(0x21a)],'showname':_0x5e83cb[_0x4f84fe(0x208)],'threshold':_0x5e83cb[_0x4f84fe(0x24a)],'ordertype':_0x5e83cb[_0x4f84fe(0x220)],'timeout':_0x5e83cb[_0x4f84fe(0x301)],'startdate':_0x5e83cb[_0x4f84fe(0x300)],'recreate':_0x5e83cb[_0x4f84fe(0x299)],'timeshift':_0x5e83cb[_0x4f84fe(0x2ad)],'headless':_0x5e83cb['headless'],'cooldown':_0x5e83cb[_0x4f84fe(0x25f)],'change24h':_0x5e83cb[_0x4f84fe(0x1de)],'emojibuy':_0x5e83cb[_0x4f84fe(0x2ea)],'emojisell':_0x5e83cb['emojisell'],'portfolio':_0x5e83cb[_0x4f84fe(0x269)],'liquidity':_0x5e83cb['liquidity']},dbConfig[_0x4f84fe(0x312)](_0x4f84fe(0x285))[_0x4f84fe(0x200)]()[_0x4f84fe(0x2b6)](),dbConfig[_0x4f84fe(0x312)](_0x4f84fe(0x285))[_0x4f84fe(0x1fc)](_0x5e83cb)[_0x4f84fe(0x2b6)]());}else _0x5e83cb={'botID':_0x41e0f9,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x41e0f9,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4f84fe(0x2ad)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x5e83cb;}function emittedConfiguration(){const _0x375643=_0x4b61f0;let _0x34638c;return config[_0x375643(0x249)]==''?_0x34638c=config:_0x34638c={...config,'apiKey':'************','apiSecret':'************'},_0x34638c;}function getSettings(){const _0x18515f=_0x4b61f0;return dbSettings['get']('settings')[_0x18515f(0x272)]();}function getSecure(){const _0x534028=_0x4b61f0;return dbSecure[_0x534028(0x312)](_0x534028(0x30d))[_0x534028(0x272)]()||{};}function updateTimeshift(_0x4c0593){const _0x562dc8=_0x4b61f0;let _0x367c44=dbConfig[_0x562dc8(0x312)](_0x562dc8(0x285))[_0x562dc8(0x2fd)]({'botID':botID})[_0x562dc8(0x272)]();_0x367c44&&dbConfig['get']('bot')[_0x562dc8(0x2fd)]({'botID':botID})[_0x562dc8(0x2e5)]({'timeshift':_0x4c0593})['write'](),config[_0x562dc8(0x2ad)]=_0x4c0593,proxyEmit(_0x562dc8(0x2e9),emittedConfiguration());}async function storeConfiguration(_0x4dac45){const _0x31f791=_0x4b61f0;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x274211=dbConfig[_0x31f791(0x312)](_0x31f791(0x285))[_0x31f791(0x2fd)]({'botID':botID})[_0x31f791(0x272)]();_0x4dac45={..._0x4dac45,'apiKey':crypt[_0x31f791(0x298)](secure[_0x31f791(0x20f)],_0x4dac45['apiKey'])[_0x31f791(0x248)],'apiSecret':crypt[_0x31f791(0x298)](secure[_0x31f791(0x20f)],_0x4dac45[_0x31f791(0x251)])[_0x31f791(0x248)]};if(_0x274211){if(_0x4dac45[_0x31f791(0x249)]=='************')_0x4dac45['apiKey']=config[_0x31f791(0x249)];if(_0x4dac45[_0x31f791(0x251)]==_0x31f791(0x2f8))_0x4dac45['apiSecret']=config[_0x31f791(0x251)];dbConfig[_0x31f791(0x312)](_0x31f791(0x285))['find']({'botID':botID})[_0x31f791(0x2e5)](_0x4dac45)['write']();}else dbConfig['get']('bot')['push'](_0x4dac45)['write'](),process[_0x31f791(0x22d)]({'status':_0x31f791(0x27a),'live':_0x31f791(0x229)},_0x3f5f45=>{});config={..._0x4dac45},setStartDatePerformance(),process[_0x31f791(0x22d)]({'botname':_0x4dac45['botname']},_0xbbcef0=>{}),updateBotManager();const _0x5dc8f4=getNormalizedPerformance();getStartingBalances(_0x5dc8f4),emitPerformance(_0x5dc8f4),proxyEmit(_0x31f791(0x2dd)),reset();}async function storeHeadless(_0x23aaaf){const _0x4d6e27=_0x4b61f0,_0x1a08b0={...config,'headless':_0x23aaaf[_0x4d6e27(0x1ea)]};let _0x5055b0=dbConfig[_0x4d6e27(0x312)](_0x4d6e27(0x285))[_0x4d6e27(0x2fd)]({'botID':botID})[_0x4d6e27(0x272)]();_0x5055b0&&dbConfig['get']('bot')[_0x4d6e27(0x2fd)]({'botID':botID})[_0x4d6e27(0x2e5)](_0x1a08b0)[_0x4d6e27(0x2b6)](),config={..._0x1a08b0},updateBotManager(),proxyEmit(_0x4d6e27(0x2e9),emittedConfiguration());}function noslash(_0x502492){const _0x59d885=_0x4b61f0;return _0x502492[_0x59d885(0x2ca)]('/','');}async function updateNumberCoins(_0x367504){const _0x333b37=_0x4b61f0;_0x367504['eventType']&&_0x367504[_0x333b37(0x22b)]==_0x333b37(0x24d)&&(_0x367504[_0x333b37(0x231)]!=lastOutboundEventTime&&(lastOutboundEventTime=_0x367504[_0x333b37(0x231)],currentCoins=await getCoins(),validateOrders()));if(_0x367504[_0x333b37(0x22b)]&&_0x367504[_0x333b37(0x22b)]==_0x333b37(0x2e4)){if(_0x367504['orderStatus']==_0x333b37(0x1f4)){if(lastOrders)lastOrders[_0x333b37(0x2d6)](async _0x45d1f9=>{const _0x329218=_0x333b37;_0x45d1f9[_0x329218(0x30b)]==_0x367504[_0x329218(0x30b)]&&_0x45d1f9['filled']==0x0&&(_0x45d1f9[_0x329218(0x2fe)]=_0x367504[_0x329218(0x2b2)]/_0x367504[_0x329218(0x27e)],_0x45d1f9[_0x329218(0x1e5)]=_0x367504['accumulatedQuantity'],_0x45d1f9[_0x329218(0x2f7)]={'cost':_0x367504['commission'],'currency':_0x367504[_0x329218(0x20c)]},validateOrders(),currentCoins=await getCoins(),await updateCoinResults(_0x45d1f9));});}}}async function getCoins(_0x3256cd=!![],_0x29c375=config[_0x4b61f0(0x2b7)]){const _0xb4d266=_0x4b61f0;let _0x1d212d,_0x2440b5=[],_0x2b396e=[],_0x1123b6=[];try{_0x1d212d=await exchange[_0xb4d266(0x260)](),mybalances=_0x1d212d[_0xb4d266(0x2e1)];if(!_0x3256cd)for(const [_0x111b9e,_0x544c7c]of Object['entries'](mybalances)){_0x1123b6[_0xb4d266(0x1fc)](_0x111b9e);}else config['portfolio'][_0xb4d266(0x2d6)](_0x1e0790=>{const _0x3695ae=_0xb4d266;if(!_0x1e0790[_0x3695ae(0x24f)])_0x1123b6[_0x3695ae(0x1fc)](_0x1e0790[_0x3695ae(0x311)]);});if(_0x29c375=='')for(const [_0x1b1b7b,_0x216a21]of Object['entries'](mybalances)){_0x216a21[_0xb4d266(0x1e2)]()!=0x0&&_0x2b396e[_0xb4d266(0x1fc)]({'coin':_0x1b1b7b});}else{let _0x1d317e=![],_0x296e80;allOpenOrders=[];for(const [_0x4b4382,_0x185e26]of Object[_0xb4d266(0x2eb)](mybalances)){if(_0x1123b6[_0xb4d266(0x1ef)](_0x4b4382)){const _0x3359a4=config[_0xb4d266(0x269)][_0xb4d266(0x2fd)](_0x5d22e7=>_0x5d22e7[_0xb4d266(0x311)]==_0x4b4382),_0x7c4414=_0x4b4382+'/'+_0x29c375,_0x18f96d=_0x29c375+'/'+_0x4b4382;_0x1d317e=![];if((_0x185e26['toString']()!=0x0||_0x3359a4)&&(allSymbols[_0xb4d266(0x1ef)](_0x7c4414)||_0x4b4382==_0x29c375))_0x4b4382!=_0x29c375&&(_0x2440b5[_0xb4d266(0x1fc)](_0x7c4414),_0x296e80=await exchange[_0xb4d266(0x1dc)](_0x7c4414),_0x296e80['length']>0x0&&(_0x1d317e=!![])),_0x2b396e[_0xb4d266(0x1fc)]({'coin':_0x4b4382,'symbol':_0x7c4414,'reverse':![],'number':Math['max'](_0x185e26+(_0x3359a4&&_0x3359a4[_0xb4d266(0x30e)]||0x0),0x0),'order':_0x1d317e});else(_0x185e26[_0xb4d266(0x1e2)]()!=0x0||_0x3359a4)&&allSymbols[_0xb4d266(0x1ef)](_0x18f96d)&&(_0x4b4382!=_0x29c375&&(_0x2440b5['push'](_0x18f96d),_0x296e80=await exchange[_0xb4d266(0x1dc)](_0x18f96d),_0x296e80[_0xb4d266(0x2e6)]>0x0&&(_0x1d317e=!![])),_0x2b396e['push']({'coin':_0x4b4382,'symbol':_0x18f96d,'reverse':!![],'number':Math[_0xb4d266(0x22a)](_0x185e26+(_0x3359a4&&_0x3359a4['offset']||0x0),0x0),'order':_0x1d317e}));}_0x1d317e&&allOpenOrders[_0xb4d266(0x1fc)](_0x296e80[0x0]);}allOpenOrders[_0xb4d266(0x2e6)]==0x0&&(lockOrders&&validateOrders(_0xb4d266(0x217)));}}catch(_0x1e9f94){if(!_0x3256cd){if(_0x1e9f94['toString']()[_0xb4d266(0x1ef)](_0xb4d266(0x2d8)))return logHistory('error',_0xb4d266(0x2b3)),![];else{if(_0x1e9f94['toString']()[_0xb4d266(0x1ef)](_0xb4d266(0x29c)))return logHistory(_0xb4d266(0x304),_0xb4d266(0x26f)),![];else{if(_0x1e9f94[_0xb4d266(0x1e2)]()['includes'](_0xb4d266(0x2f4)))return logHistory('error',_0xb4d266(0x27f)),![];else await handleError(_0x1e9f94,_0xb4d266(0x233));}}}else await handleError(_0x1e9f94,_0xb4d266(0x233));}return _0x2b396e;}async function getPortfolio(_0x4014fd){const _0xc6daa=_0x4b61f0;let _0x3e6629=[],_0x577aed=[],_0x855779,_0x2bc6d7=[],_0x579451,_0x2fc5d7;_0x4014fd[_0xc6daa(0x249)]===_0xc6daa(0x2f8)||_0x4014fd[_0xc6daa(0x251)]===_0xc6daa(0x2f8)?(_0x579451=config[_0xc6daa(0x249)],_0x2fc5d7=config[_0xc6daa(0x251)]):(_0x579451=_0x4014fd[_0xc6daa(0x249)],_0x2fc5d7=_0x4014fd[_0xc6daa(0x251)]);await initExchange(_0x579451,_0x2fc5d7);let _0x2279a1=await loadSymbols();if(_0x2279a1){_0x2bc6d7=await getCoins(![],_0x4014fd[_0xc6daa(0x2b7)]);if(_0x2bc6d7===![])proxyEmit(_0xc6daa(0x269),![]);else{if(_0x4014fd[_0xc6daa(0x2b7)]=='')proxyEmit('portfolio',_0x2bc6d7);else{_0x2bc6d7[_0xc6daa(0x2d6)](_0x5bd51e=>{const _0x187da7=_0xc6daa;if(_0x5bd51e['coin']!=_0x4014fd[_0x187da7(0x2b7)])_0x3e6629[_0x187da7(0x1fc)](_0x5bd51e['symbol']);});try{_0x577aed=await exchange['fetchTickers'](_0x3e6629);}catch(_0xb4885a){await handleError(_0xb4885a,_0xc6daa(0x26b));}_0x2bc6d7[_0xc6daa(0x2d6)](_0x421739=>{const _0x2e1b3b=_0xc6daa;_0x421739[_0x2e1b3b(0x311)]!=_0x4014fd[_0x2e1b3b(0x2b7)]?_0x855779=_0x421739[_0x2e1b3b(0x287)]?0x1/_0x577aed[_0x421739['symbol']]['last']:_0x577aed[_0x421739['symbol']][_0x2e1b3b(0x1e8)]:_0x855779=0x1,_0x421739['price']=formatResult(_0x855779,0x8);}),proxyEmit(_0xc6daa(0x269),_0x2bc6d7);}}}else proxyEmit(_0xc6daa(0x269),![]);}function checkMinimums(_0x4dbda5){const _0x48a999=_0x4b61f0;let _0x4304a3=!![];const _0x3323f7=!_0x4dbda5[_0x48a999(0x287)]?markets[_0x4dbda5['symbol']][_0x48a999(0x21c)]['amount'][_0x48a999(0x293)]:markets[_0x4dbda5['symbol']][_0x48a999(0x21c)][_0x48a999(0x1f5)]['min'],_0x2c4a31=!_0x4dbda5[_0x48a999(0x287)]?markets[_0x4dbda5[_0x48a999(0x2d0)]][_0x48a999(0x21c)][_0x48a999(0x1f5)][_0x48a999(0x293)]:markets[_0x4dbda5[_0x48a999(0x2d0)]]['limits'][_0x48a999(0x2c7)][_0x48a999(0x293)];if(Math[_0x48a999(0x1f6)](_0x4dbda5[_0x48a999(0x266)])<_0x3323f7)_0x4304a3=![];if(Math[_0x48a999(0x1f6)](_0x4dbda5[_0x48a999(0x266)])*_0x4dbda5[_0x48a999(0x1e8)]<_0x2c4a31)_0x4304a3=![];if(_0x4dbda5[_0x48a999(0x23a)]==_0x48a999(0x2a4)){let _0xff7a5d=config[_0x48a999(0x269)]['find'](_0x5d734c=>_0x5d734c[_0x48a999(0x311)]==_0x4dbda5[_0x48a999(0x311)]);if(_0xff7a5d['offset']>0x0){if(Math[_0x48a999(0x1f6)](_0x4dbda5[_0x48a999(0x266)])>_0x4dbda5[_0x48a999(0x20a)]-_0xff7a5d['offset'])_0x4304a3=![];}else{if(Math[_0x48a999(0x1f6)](_0x4dbda5[_0x48a999(0x266)])>_0x4dbda5[_0x48a999(0x20a)])_0x4304a3=![];}}if(_0x4dbda5[_0x48a999(0x23a)]=='buy'){let _0x1d640a=config['portfolio']['find'](_0x56dddd=>_0x56dddd['coin']==config[_0x48a999(0x2b7)]),_0xd48fdd=currentCoins['find'](_0x4cae6c=>_0x4cae6c[_0x48a999(0x311)]==config[_0x48a999(0x2b7)]);if(_0x1d640a[_0x48a999(0x30e)]>0x0){if(Math['abs'](_0x4dbda5['trade'])*_0x4dbda5[_0x48a999(0x1e8)]>_0xd48fdd['number']-_0x1d640a['offset'])_0x4304a3=![];}else{if(Math[_0x48a999(0x1f6)](_0x4dbda5[_0x48a999(0x266)])*_0x4dbda5[_0x48a999(0x1e8)]>_0xd48fdd[_0x48a999(0x20a)])_0x4304a3=![];}}return _0x4304a3;}async function getBalances(){const _0x7fd7f1=_0x4b61f0;let _0xbd9a99=0x0,_0xe594d9;const _0xb3c1f5=config[_0x7fd7f1(0x24a)];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x2d55c5=>{const _0x1fc41e=_0x7fd7f1;if(_0x2d55c5[_0x1fc41e(0x311)]!=config['basecoin']){let _0x129730=global[_0x1fc41e(0x202)][noslash(_0x2d55c5[_0x1fc41e(0x2d0)])];_0xe594d9=_0x2d55c5[_0x1fc41e(0x287)]?0x1/_0x129730:_0x129730;}else _0xe594d9=0x1;let _0x370483=_0x2d55c5['number']*_0xe594d9;_0xbd9a99+=_0x370483,_0x2d55c5[_0x1fc41e(0x1e8)]=formatResult(Number(_0xe594d9),0x8),_0x2d55c5['value']=_0x370483;}),currentCoins[_0x7fd7f1(0x2d6)](_0x5b4be8=>{const _0xe18901=_0x7fd7f1;let _0x19edcf=config[_0xe18901(0x269)][_0xe18901(0x2fd)](_0x3e99a1=>_0x3e99a1[_0xe18901(0x311)]==_0x5b4be8['coin']),_0x3ac62b=Number(_0x19edcf[_0xe18901(0x255)]),_0x1b6072=_0x5b4be8[_0xe18901(0x272)]/_0xbd9a99*0x64,_0x2f1282=_0x3ac62b*_0xbd9a99/0x64/_0x5b4be8[_0xe18901(0x1e8)]-_0x5b4be8[_0xe18901(0x20a)];_0x5b4be8['distribution']=formatResult(_0x1b6072,0x3),_0x5b4be8[_0xe18901(0x1f0)]=formatResult(_0x3ac62b,0x3),_0x5b4be8[_0xe18901(0x266)]=formatResult(_0x2f1282,0x8),_0x5b4be8[_0xe18901(0x23a)]='',_0x5b4be8[_0xe18901(0x1f3)]=![];if(_0x5b4be8['coin']!=config[_0xe18901(0x2b7)]){if(_0x5b4be8[_0xe18901(0x255)]>_0x3ac62b)_0x5b4be8['side']=_0xe18901(0x2a4),_0x5b4be8[_0xe18901(0x1f3)]=checkMinimums(_0x5b4be8);else _0x5b4be8['distribution']<_0x3ac62b&&(_0x5b4be8[_0xe18901(0x23a)]=_0xe18901(0x246),_0x5b4be8['valid']=checkMinimums(_0x5b4be8));}_0x5b4be8[_0xe18901(0x1e0)]=_0x5b4be8[_0xe18901(0x255)]/_0x5b4be8[_0xe18901(0x1f0)]-0x1;}),currentCoins[_0x7fd7f1(0x2ee)]((_0x1d25b1,_0x3e9dc3)=>_0x1d25b1[_0x7fd7f1(0x1e0)]<_0x3e9dc3[_0x7fd7f1(0x1e0)]?0x1:_0x3e9dc3[_0x7fd7f1(0x1e0)]<_0x1d25b1[_0x7fd7f1(0x1e0)]?-0x1:0x0);const _0x339a66=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x339a66[_0x7fd7f1(0x258)],'usd':_0x339a66[_0x7fd7f1(0x2e7)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0xb3c1f5},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x7fd7f1(0x1ea)])headlessMode({'portfolio':currentCoins,'threshold':_0xb3c1f5});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0xb3c1f5});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4c2d53=_0x4b61f0;if(!lastBalances)return;let _0x170f95=[],_0x455b16,_0x1bd97e=JSON['parse'](lastBalances['portfolio']);_0x1bd97e[_0x4c2d53(0x2ee)]((_0x6ccb4b,_0x288a8a)=>_0x6ccb4b[_0x4c2d53(0x311)]>_0x288a8a['coin']?0x1:_0x288a8a['coin']>_0x6ccb4b[_0x4c2d53(0x311)]?-0x1:0x0),_0x1bd97e[_0x4c2d53(0x2d6)](_0x344c9c=>{const _0x229414=_0x4c2d53;let _0x3f7dcc={'coin':_0x344c9c[_0x229414(0x311)],'number':_0x344c9c[_0x229414(0x20a)],'price':_0x344c9c[_0x229414(0x1e8)]};_0x170f95[_0x229414(0x1fc)](_0x3f7dcc);});const _0x354db3=await getFiat();_0x455b16={'date':lastBalances[_0x4c2d53(0x223)][_0x4c2d53(0x1eb)]('\x20')[0x0],'eur':_0x354db3[_0x4c2d53(0x258)],'usd':_0x354db3['usd'],'coins':_0x170f95};let _0x2ed771=dbPerformance[_0x4c2d53(0x312)](_0x4c2d53(0x1e3))[_0x4c2d53(0x2fd)]({'date':_0x455b16[_0x4c2d53(0x307)]})[_0x4c2d53(0x272)]();_0x2ed771?_0x455b16['date']!=config[_0x4c2d53(0x300)]&&dbPerformance[_0x4c2d53(0x312)](_0x4c2d53(0x1e3))[_0x4c2d53(0x2fd)]({'date':_0x455b16[_0x4c2d53(0x307)]})['assign'](_0x455b16)['write']():dbPerformance[_0x4c2d53(0x312)](_0x4c2d53(0x1e3))[_0x4c2d53(0x1fc)](_0x455b16)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x20a5a4=_0x4b61f0;let _0x1b9ec4=[];if(dbPerformance[_0x20a5a4(0x22c)](_0x20a5a4(0x1e3))[_0x20a5a4(0x272)]()){let _0x147ba2=dbPerformance[_0x20a5a4(0x312)](_0x20a5a4(0x1e3))[_0x20a5a4(0x213)]()[_0x20a5a4(0x2b1)]('date')[_0x20a5a4(0x272)](),_0x26fd1d=[...config['liquidity']];_0x26fd1d[_0x20a5a4(0x2ee)]((_0x5ebd9a,_0x400314)=>_0x5ebd9a[_0x20a5a4(0x307)]>_0x400314[_0x20a5a4(0x307)]?-0x1:_0x400314[_0x20a5a4(0x307)]>_0x5ebd9a[_0x20a5a4(0x307)]?0x1:0x0);let _0x2f768d=0x1,_0xbe324f=[],_0xa2a9c3=0x0;_0x147ba2[_0x20a5a4(0x2b8)]()[_0x20a5a4(0x287)]()['forEach']((_0x127b71,_0x35edfa)=>{const _0x1f2cce=_0x20a5a4;if(_0x26fd1d[_0xa2a9c3]){if(_0x147ba2[_0x147ba2['length']-_0x35edfa]&&_0x26fd1d[_0xa2a9c3][_0x1f2cce(0x307)]==_0x147ba2[_0x147ba2[_0x1f2cce(0x2e6)]-_0x35edfa][_0x1f2cce(0x307)]){if(_0x35edfa<_0x147ba2['length']){let _0x803285=0x0,_0x385652=0x0;_0x147ba2[_0x147ba2[_0x1f2cce(0x2e6)]-_0x35edfa][_0x1f2cce(0x274)][_0x1f2cce(0x2d6)](_0x6bf581=>{const _0x4ebb93=_0x1f2cce;_0x385652+=_0x6bf581['number']*_0x6bf581[_0x4ebb93(0x2fe)];}),_0x26fd1d[_0xa2a9c3][_0x1f2cce(0x210)][_0x1f2cce(0x2d6)](_0x23806a=>{const _0x22a50a=_0x1f2cce;_0x803285+=_0x23806a[_0x22a50a(0x20a)]*_0x23806a[_0x22a50a(0x2fe)];}),_0x2f768d*=_0x803285/(_0x385652-_0x803285)+0x1;}_0xa2a9c3++;}}let _0x488b44=0x0;_0x127b71[_0x1f2cce(0x274)][_0x1f2cce(0x2d6)](_0x3618df=>{const _0x5248b0=_0x1f2cce;_0x488b44+=_0x3618df[_0x5248b0(0x20a)]*_0x3618df[_0x5248b0(0x2fe)];}),_0xbe324f[_0x147ba2['length']-_0x35edfa-0x1]=_0x488b44*(_0x2f768d-0x1);});let _0x177388=[];_0x26fd1d=[...config[_0x20a5a4(0x28e)]]||[];let _0x3b0a27=0x0;_0xa2a9c3=0x0,_0x147ba2[_0x20a5a4(0x2d6)]((_0x30c9fa,_0x41134d)=>{const _0x20c00b=_0x20a5a4;if(_0x26fd1d[_0xa2a9c3]){const _0x21f020=fns[_0x20c00b(0x283)](_0x26fd1d[_0xa2a9c3][_0x20c00b(0x307)],_0x20c00b(0x2de),new Date()),_0x261cbb=fns['parse'](_0x30c9fa['date'],'yyyy/MM/dd',new Date());if(fns[_0x20c00b(0x2ce)](_0x21f020,_0x261cbb)){let _0x23940b=0x0;_0x26fd1d[_0xa2a9c3][_0x20c00b(0x210)][_0x20c00b(0x2d6)](_0x1a8c2b=>{const _0x7647ce=_0x20c00b;!_0x177388[_0x1a8c2b[_0x7647ce(0x311)]]?_0x177388[_0x1a8c2b[_0x7647ce(0x311)]]=_0x1a8c2b[_0x7647ce(0x20a)]:(_0x23940b=_0x177388[_0x1a8c2b['coin']],_0x177388[_0x1a8c2b[_0x7647ce(0x311)]]+=_0x1a8c2b['number']);const _0xc86e94=_0x30c9fa[_0x7647ce(0x274)]['find'](_0x60ef23=>_0x60ef23[_0x7647ce(0x311)]==_0x1a8c2b[_0x7647ce(0x311)]);(!_0xc86e94||_0xc86e94[_0x7647ce(0x20a)]==0x0)&&(_0x3b0a27+=(-_0x1a8c2b['number']-_0x23940b)*_0x1a8c2b[_0x7647ce(0x2fe)]);}),_0xa2a9c3++;}}_0x30c9fa[_0x20c00b(0x274)][_0x20c00b(0x2d6)]((_0x556745,_0x474552)=>{const _0x4cb405=_0x20c00b;_0x177388[_0x556745['coin']]&&(_0x556745={..._0x556745,'initial':_0x177388[_0x556745[_0x4cb405(0x311)]]}),_0x30c9fa[_0x4cb405(0x274)][_0x474552]=_0x556745;}),_0x1b9ec4[_0x20c00b(0x1fc)]({'date':_0x30c9fa[_0x20c00b(0x307)],'eur':_0x30c9fa[_0x20c00b(0x258)],'usd':_0x30c9fa[_0x20c00b(0x2e7)],'offset':_0xbe324f[_0x41134d],'netoffset':_0x3b0a27,'coins':_0x30c9fa[_0x20c00b(0x274)]});});}return _0x1b9ec4;}function emitPerformance(_0x57f577){const _0x36940d=_0x4b61f0;_0x57f577[_0x36940d(0x2e6)]!==0x0?(proxyEmit('performance',_0x57f577),lastPerformanceEmitted=getDate()):proxyEmit(_0x36940d(0x230),[]);}function getPerf(_0x494562,_0x2ccc51){const _0x35dd82=_0x4b61f0;let _0x3a6a94=0x0,_0x1a0391=0x0,_0x13e197=0x0;_0x494562[_0x35dd82(0x274)][_0x35dd82(0x2d6)](_0x28450b=>{const _0x5876ab=_0x35dd82;_0x3a6a94+=_0x28450b[_0x5876ab(0x20a)]*_0x28450b[_0x5876ab(0x2fe)];});_0x2ccc51&&(_0x3a6a94+=_0x494562[_0x35dd82(0x30e)]);if(config[_0x35dd82(0x2b7)]===_0x35dd82(0x2fa)||config['basecoin']===_0x35dd82(0x24c))_0x1a0391=_0x3a6a94*_0x494562['eur'],_0x13e197=_0x3a6a94*_0x494562[_0x35dd82(0x2e7)];else{if(config['basecoin']===_0x35dd82(0x2d7)||config[_0x35dd82(0x2b7)]==='USDT'||config[_0x35dd82(0x2b7)]===_0x35dd82(0x314))_0x1a0391=_0x3a6a94*_0x494562['eur']/_0x494562['usd'],_0x13e197=_0x3a6a94;else config[_0x35dd82(0x2b7)]===_0x35dd82(0x2c8)&&(_0x1a0391=_0x3a6a94,_0x13e197=_0x3a6a94*_0x494562[_0x35dd82(0x2e7)]/_0x494562[_0x35dd82(0x258)]);}return[_0x3a6a94,_0x1a0391,_0x13e197];}async function getStartingBalances(_0x1d4506,_0x18dc84=!![]){const _0x48e1f9=_0x4b61f0;if(_0x1d4506['length']!==0x0){const [_0x489b4b,_0x41a4c8,_0x5d76c4]=getPerf(_0x1d4506[0x0],!![]);let _0x3169bc=[];config[_0x48e1f9(0x269)]['forEach'](_0x1ec378=>{const _0x224f34=_0x48e1f9;let _0x9419f4=0x0,_0x5c12b8;config[_0x224f34(0x28e)][_0x224f34(0x2d6)](_0x5d33ab=>{const _0x44b742=_0x224f34;let _0x43a342=_0x5d33ab[_0x44b742(0x210)][_0x44b742(0x2fd)](_0x3af9ef=>_0x3af9ef['coin']==_0x1ec378[_0x44b742(0x311)]);if(_0x43a342){_0x9419f4+=_0x43a342[_0x44b742(0x20a)];if(!_0x5c12b8)_0x5c12b8=_0x43a342['price'];}}),_0x3169bc[_0x224f34(0x1fc)]({'coin':_0x1ec378[_0x224f34(0x311)],'number':_0x9419f4,'initialprice':_0x5c12b8});});const _0x136f78={'basecoin':_0x489b4b,'eur':_0x41a4c8,'usd':_0x5d76c4,'coins':_0x3169bc};if(_0x18dc84)proxyEmit(_0x48e1f9(0x2a8),_0x136f78);return _0x136f78;}}function headlessMode(_0x594b63){const _0x155995=_0x4b61f0;let _0x424324=_0x594b63[_0x155995(0x269)],_0x59784b=_0x594b63[_0x155995(0x24a)],_0x3c535e=[];for(let _0x4b953c of _0x424324){if(_0x4b953c['coin']!=config[_0x155995(0x2b7)]){if(_0x4b953c[_0x155995(0x1e0)]>=_0x59784b/0x64){if(_0x4b953c[_0x155995(0x1f3)])_0x3c535e[_0x155995(0x1fc)](_0x4b953c);}else{if(_0x4b953c[_0x155995(0x1e0)]<=-_0x59784b/0x64){if(_0x4b953c[_0x155995(0x1f3)])_0x3c535e[_0x155995(0x1fc)](_0x4b953c);}}}}_0x3c535e[_0x155995(0x2e6)]>0x0&&placeOrder(_0x3c535e);}function notifyBalance(_0x233e60){const _0x108675=_0x4b61f0;let _0x2489f6=_0x233e60[_0x108675(0x269)],_0x35bc3f=_0x233e60['threshold'],_0x100cfd=[];for(let _0x3ae7d6 of _0x2489f6){if(_0x3ae7d6[_0x108675(0x311)]!=config[_0x108675(0x2b7)]){if(_0x3ae7d6[_0x108675(0x1e0)]>=_0x35bc3f/0x64){if(_0x3ae7d6['valid'])_0x100cfd[_0x108675(0x1fc)](_0x3ae7d6);}else{if(_0x3ae7d6[_0x108675(0x1e0)]<=-_0x35bc3f/0x64){if(_0x3ae7d6[_0x108675(0x1f3)])_0x100cfd[_0x108675(0x1fc)](_0x3ae7d6);}}}}if(_0x100cfd[_0x108675(0x2e6)]>0x0){let _0x15c4bb=_0x100cfd['map'](_0x5de566=>_0x5de566['coin']);_0x15c4bb[_0x108675(0x2ee)]();let _0x13d6e9=_0x15c4bb[_0x108675(0x25c)](',\x20');if(lastCoinsToBalance!==_0x13d6e9)logHistory(_0x108675(0x222),'Manual\x20balancing\x20required:\x20'+_0x13d6e9);lastCoinsToBalance=_0x13d6e9;}}function symbolToCoin(_0x529d62){const _0x529033=_0x4b61f0;let _0x26b540;if(_0x529d62['includes']('/'+config[_0x529033(0x2b7)]))_0x26b540=_0x529d62['replace']('/'+config['basecoin'],'');if(_0x529d62['includes'](config[_0x529033(0x2b7)]+'/'))_0x26b540=_0x529d62['replace'](config[_0x529033(0x2b7)]+'/','');return _0x26b540;}async function validateOrders(_0x5a905c){const _0x1dc95e=_0x4b61f0;if(_0x5a905c)validateOrdersState=_0x5a905c;let _0x1afc7e=[],_0x514dcc=config['ordertype']==_0x1dc95e(0x235)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders['forEach'](_0x59c214=>{const _0x316ee5=_0x1dc95e;let _0x2b0e2b=![];_0x59c214['filled']>0x0&&(_0x2b0e2b=!![]),_0x1afc7e[_0x316ee5(0x1fc)](_0x2b0e2b),_0x2b0e2b&&config[_0x316ee5(0x220)]!=_0x316ee5(0x235)&&logHistory(_0x316ee5(0x228),_0x316ee5(0x2c6)+_0x59c214['symbol']+'\x20'+_0x59c214[_0x316ee5(0x23a)]+'\x20#'+formatResult(_0x59c214[_0x316ee5(0x1e5)],0x8)+'\x20@'+formatResult(_0x59c214[_0x316ee5(0x2fe)],0x8));}),_0x1afc7e['forEach']((_0x2e3e58,_0x208229)=>{const _0x2a1e80=_0x1dc95e;if(_0x2e3e58)lastOrders[_0x2a1e80(0x2bd)](_0x208229,0x1);});const _0x394b0f=coolingDown?_0x1dc95e(0x288):_0x1dc95e(0x2ba);if(validateOrdersState==_0x1dc95e(0x2e2))validateOrdersState=_0x1dc95e(0x225),_0x1afc7e[_0x1dc95e(0x1ef)](![])?config[_0x1dc95e(0x220)]==_0x1dc95e(0x235)?logHistory('error',_0x1dc95e(0x2da)):logHistory('error',_0x1dc95e(0x29a)):lockOrders=![];else{if(validateOrdersState=='ongoing'){if(_0x1afc7e['includes'](![])){}else lockOrders=![],config[_0x1dc95e(0x220)]==_0x1dc95e(0x235)?logHistory(_0x1dc95e(0x222),_0x1dc95e(0x2d5)+_0x394b0f):logHistory('success',_0x1dc95e(0x215)+_0x394b0f);}else{if(validateOrdersState==_0x1dc95e(0x313))lockOrders=![],_0x1afc7e[_0x1dc95e(0x1ef)](![])?config['ordertype']==_0x1dc95e(0x235)?logHistory(_0x1dc95e(0x222),_0x1dc95e(0x237)+Math['round'](_0x514dcc*validateOrderInterval/0xea60)+_0x1dc95e(0x2a6)+_0x394b0f):(await cancelOrders(),logHistory('success',_0x1dc95e(0x25e)+Math[_0x1dc95e(0x242)](_0x514dcc*validateOrderInterval/0xea60)+_0x1dc95e(0x2a6)+_0x394b0f)):logHistory(_0x1dc95e(0x222),_0x1dc95e(0x2b0)+_0x394b0f),currentCoins=await getCoins();else{if(validateOrdersState==_0x1dc95e(0x217)){lockOrders=![];if(config[_0x1dc95e(0x220)]!=_0x1dc95e(0x235))logHistory(_0x1dc95e(0x222),_0x1dc95e(0x2b0)+_0x394b0f);}}}}}async function cancelOrders(){const _0x398d16=_0x4b61f0;lastOrders[_0x398d16(0x2d6)](async _0x5e0967=>{const _0x1a4ff5=_0x398d16;try{const _0x17376d=await exchange[_0x1a4ff5(0x23c)](_0x5e0967[_0x1a4ff5(0x30b)],_0x5e0967[_0x1a4ff5(0x2d0)]);}catch(_0x5f3332){if(_0x5f3332[_0x1a4ff5(0x1e2)]()[_0x1a4ff5(0x1ef)](_0x1a4ff5(0x227))){}else await handleError(_0x5f3332,_0x1a4ff5(0x247));}});}async function resetCoinResults(){const _0x1bf7a9=_0x4b61f0;dbCoinResults[_0x1bf7a9(0x312)]('coins')[_0x1bf7a9(0x200)]()[_0x1bf7a9(0x2b6)]();let _0x4a7a1a=await getStartingBalances(getNormalizedPerformance(),![]);_0x4a7a1a[_0x1bf7a9(0x274)][_0x1bf7a9(0x2d6)](_0x1e9b4a=>{const _0x1e8c85=_0x1bf7a9;if(_0x1e9b4a[_0x1e8c85(0x311)]!=config['basecoin']){let _0x9efca8={'coin':_0x1e9b4a[_0x1e8c85(0x311)],'number':_0x1e9b4a[_0x1e8c85(0x20a)],'breakeven':formatResult(_0x1e9b4a[_0x1e8c85(0x308)],0x8),'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1e8c85(0x312)](_0x1e8c85(0x274))[_0x1e8c85(0x1fc)](_0x9efca8)['write']();}});}async function updateCoinResults(_0xed5d85){const _0xd0cf63=_0x4b61f0;let _0x511b68,_0x3e4064,_0x57408b,_0x36ee22,_0x2badf8,_0x3bcfc1,_0x67d40b=dbCoinResults[_0xd0cf63(0x312)]('coins')[_0xd0cf63(0x2fd)]({'coin':_0xed5d85[_0xd0cf63(0x311)]})[_0xd0cf63(0x272)]();if(!_0x67d40b)return;if(_0xed5d85[_0xd0cf63(0x2f7)]&&_0xed5d85[_0xd0cf63(0x2f7)]['currency']==config['basecoin'])_0x511b68=_0xed5d85['fee'][_0xd0cf63(0x1f5)];else{if(_0xed5d85[_0xd0cf63(0x2f7)]&&_0xed5d85[_0xd0cf63(0x2f7)][_0xd0cf63(0x273)]==_0xd0cf63(0x276))_0x511b68=_0xed5d85[_0xd0cf63(0x2f7)][_0xd0cf63(0x1f5)]*global[_0xd0cf63(0x202)]['BNB'+config[_0xd0cf63(0x2b7)]];else _0x511b68=0.001*_0xed5d85[_0xd0cf63(0x1e5)];}_0xed5d85[_0xd0cf63(0x287)]&&(_0x3bcfc1={'coin':_0xed5d85[_0xd0cf63(0x311)],'symbol':_0xed5d85['symbol'],'filled':_0xed5d85[_0xd0cf63(0x1e5)]*_0xed5d85[_0xd0cf63(0x2fe)],'side':_0xed5d85[_0xd0cf63(0x23a)]=='sell'?_0xd0cf63(0x246):_0xd0cf63(0x2a4),'price':0x1/_0xed5d85['price']},_0xed5d85={..._0x3bcfc1});_0xed5d85[_0xd0cf63(0x23a)]==_0xd0cf63(0x246)?_0x57408b=(_0x67d40b[_0xd0cf63(0x1dd)]*_0x67d40b[_0xd0cf63(0x20a)]+_0xed5d85[_0xd0cf63(0x2fe)]*_0xed5d85[_0xd0cf63(0x1e5)])/(_0x67d40b[_0xd0cf63(0x20a)]+_0xed5d85[_0xd0cf63(0x1e5)]):_0x57408b=(_0x67d40b[_0xd0cf63(0x1dd)]*_0x67d40b[_0xd0cf63(0x20a)]-_0xed5d85[_0xd0cf63(0x2fe)]*_0xed5d85[_0xd0cf63(0x1e5)])/(_0x67d40b[_0xd0cf63(0x20a)]-_0xed5d85[_0xd0cf63(0x1e5)]);_0xed5d85[_0xd0cf63(0x23a)]==_0xd0cf63(0x246)?_0x36ee22=_0x67d40b[_0xd0cf63(0x2a9)]:_0x36ee22=_0x67d40b['realized']+(_0xed5d85[_0xd0cf63(0x2fe)]-_0x67d40b[_0xd0cf63(0x1dd)])*_0xed5d85[_0xd0cf63(0x1e5)];const _0x325262=currentCoins[_0xd0cf63(0x2fd)](_0x49a1ba=>_0x49a1ba[_0xd0cf63(0x311)]==_0xed5d85[_0xd0cf63(0x311)]);_0x3e4064=_0x325262['number'],_0x2badf8=(_0xed5d85[_0xd0cf63(0x2fe)]-_0x57408b)*_0x3e4064;let _0x1bac9d={'coin':_0xed5d85[_0xd0cf63(0x311)],'number':_0x3e4064,'breakeven':formatResult(_0x57408b,0x8),'realized':formatResult(_0x36ee22,0x8),'unrealized':formatResult(_0x2badf8,0x8),'fees':formatResult(_0x67d40b[_0xd0cf63(0x2f5)]+_0x511b68,0x8),'sells':_0xed5d85['side']==_0xd0cf63(0x2a4)?_0x67d40b[_0xd0cf63(0x29d)]+0x1:_0x67d40b[_0xd0cf63(0x29d)],'buys':_0xed5d85[_0xd0cf63(0x23a)]==_0xd0cf63(0x246)?_0x67d40b['buys']+0x1:_0x67d40b[_0xd0cf63(0x1ff)]};dbCoinResults[_0xd0cf63(0x312)](_0xd0cf63(0x274))['find']({'coin':_0xed5d85[_0xd0cf63(0x311)]})[_0xd0cf63(0x2e5)](_0x1bac9d)[_0xd0cf63(0x2b6)]();if(_0xed5d85[_0xd0cf63(0x2f7)]&&_0xed5d85[_0xd0cf63(0x2f7)][_0xd0cf63(0x273)]==_0xd0cf63(0x276)){const _0x412bc0=currentCoins[_0xd0cf63(0x2fd)](_0x4f191c=>_0x4f191c[_0xd0cf63(0x311)]==_0xd0cf63(0x276));_0x3e4064=_0x412bc0[_0xd0cf63(0x20a)];let _0x161038=dbCoinResults[_0xd0cf63(0x312)]('coins')[_0xd0cf63(0x2fd)]({'coin':_0xd0cf63(0x276)})[_0xd0cf63(0x272)]();_0x1bac9d={..._0x161038,'number':_0x3e4064},dbCoinResults[_0xd0cf63(0x312)](_0xd0cf63(0x274))['find']({'coin':_0xd0cf63(0x276)})[_0xd0cf63(0x2e5)](_0x1bac9d)[_0xd0cf63(0x2b6)]();}}async function placeOrder(_0x545ce9){const _0x25d2f0=_0x4b61f0,_0x36c921=config[_0x25d2f0(0x220)]==_0x25d2f0(0x235)?_0x25d2f0(0x235):_0x25d2f0(0x2f6);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x42e515 of _0x545ce9){let _0x3f8d93,_0x3d49c9,_0x37551d,_0x41e6e4,_0x3e39f6,_0x4c7b86=_0x42e515['symbol'];try{const _0xc59f1e=await exchange[_0x25d2f0(0x262)]([_0x4c7b86]),_0x45aabb=_0xc59f1e[_0x4c7b86];_0x3f8d93=_0x42e515[_0x25d2f0(0x287)]?0x1/_0x42e515[_0x25d2f0(0x1e8)]:_0x42e515[_0x25d2f0(0x1e8)],_0x3d49c9=_0x45aabb[_0x25d2f0(0x2a2)],_0x37551d=_0x45aabb[_0x25d2f0(0x1e1)];_0x42e515[_0x25d2f0(0x287)]?(_0x41e6e4=_0x42e515[_0x25d2f0(0x23a)]==_0x25d2f0(0x246)?'sell':_0x25d2f0(0x246),_0x3e39f6=Math['abs'](_0x42e515[_0x25d2f0(0x266)])/_0x3f8d93):(_0x41e6e4=_0x42e515[_0x25d2f0(0x23a)],_0x3e39f6=Math[_0x25d2f0(0x1f6)](_0x42e515[_0x25d2f0(0x266)]));_0x36c921==_0x25d2f0(0x2f6)&&(config[_0x25d2f0(0x220)]==_0x25d2f0(0x2b9)&&(_0x3f8d93=_0x41e6e4==_0x25d2f0(0x246)?_0x3d49c9:_0x37551d),config[_0x25d2f0(0x220)]==_0x25d2f0(0x268)&&(_0x3f8d93=_0x41e6e4==_0x25d2f0(0x246)?_0x37551d:_0x3d49c9));_0x3e39f6=formatResult(_0x3e39f6,0x8),_0x3f8d93=formatResult(_0x3f8d93,0x8);const _0x54c919=await exchange['createOrder'](_0x4c7b86,_0x36c921,_0x41e6e4,_0x3e39f6,_0x3f8d93);lastOrders[_0x25d2f0(0x1fc)]({'orderId':_0x54c919['id'],'symbol':_0x4c7b86,'coin':_0x42e515[_0x25d2f0(0x311)],'side':_0x41e6e4,'reverse':_0x42e515[_0x25d2f0(0x287)],'amount':_0x54c919[_0x25d2f0(0x2c7)],'filled':0x0,'price':_0x54c919[_0x25d2f0(0x2fe)],'fee':_0x54c919[_0x25d2f0(0x2f7)]});const _0x5aa924=_0x41e6e4==_0x25d2f0(0x2a4)?config[_0x25d2f0(0x2aa)]?String[_0x25d2f0(0x2db)]('0x'+config[_0x25d2f0(0x2aa)])+'\x20':'':config[_0x25d2f0(0x2ea)]?String[_0x25d2f0(0x2db)]('0x'+config[_0x25d2f0(0x2ea)])+'\x20':'',_0x54a0a8=_0x36c921=='market'?'Market':config[_0x25d2f0(0x220)]==_0x25d2f0(0x2b9)?_0x25d2f0(0x2df):_0x25d2f0(0x206);if(_0x36c921==_0x25d2f0(0x235))logHistory(_0x25d2f0(0x228),''+_0x5aa924+_0x54a0a8+_0x25d2f0(0x239)+_0x4c7b86+'\x20'+_0x41e6e4+'\x20#'+formatResult(_0x54c919[_0x25d2f0(0x1e5)],0x8)+'\x20@'+formatResult(_0x54c919[_0x25d2f0(0x2fe)],0x8));else logHistory(_0x25d2f0(0x228),''+_0x5aa924+_0x54a0a8+'\x20order:\x20'+_0x4c7b86+'\x20'+_0x41e6e4+'\x20#'+formatResult(_0x54c919[_0x25d2f0(0x2c7)],0x8)+'\x20@'+formatResult(_0x54c919[_0x25d2f0(0x2fe)],0x8));let _0x56f138=currentCoins[_0x25d2f0(0x2fd)](_0x1e6647=>_0x1e6647[_0x25d2f0(0x311)]==_0x42e515[_0x25d2f0(0x311)]);_0x56f138[_0x25d2f0(0x228)]=!![];if(config[_0x25d2f0(0x25f)]!=0x0){let _0x5341ca=null;if(cooldownTracker[_0x25d2f0(0x2e6)]==config[_0x25d2f0(0x25f)]-0x1)_0x5341ca=cooldownTracker[_0x25d2f0(0x30a)]();const _0x566eda=getTimeStamp();cooldownTracker[_0x25d2f0(0x1fc)](_0x566eda);if(_0x5341ca){const _0x3e79e7=fns[_0x25d2f0(0x1e7)](new Date(_0x566eda),new Date(_0x5341ca));if(_0x3e79e7<cooldownInterval){logHistory(_0x25d2f0(0x304),_0x25d2f0(0x1e4)+config[_0x25d2f0(0x25f)]+_0x25d2f0(0x24e)+cooldownInterval/0x3c+_0x25d2f0(0x26d)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x105614){if(_0x105614[_0x25d2f0(0x1e2)]()[_0x25d2f0(0x1ef)](_0x25d2f0(0x28f)))logHistory('error',_0x25d2f0(0x2e3)+_0x4c7b86);else{if(_0x105614['toString']()[_0x25d2f0(0x1ef)](_0x25d2f0(0x236)))logHistory(_0x25d2f0(0x304),_0x25d2f0(0x2bb)+_0x4c7b86);else await handleError(_0x105614,_0x25d2f0(0x2a1),_0x4c7b86);}}}console['log'](_0x25d2f0(0x23d),lastOrders);if(lastOrders[_0x25d2f0(0x2e6)]!=0x0){lockOrders=!![],validateOrdersState=_0x25d2f0(0x2e2);const _0x34d18d=config[_0x25d2f0(0x220)]==_0x25d2f0(0x235)?validateOrderTimeout*0x3c*0x3e8:config[_0x25d2f0(0x301)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x404fcb=_0x25d2f0;validateOrders(_0x404fcb(0x313));},_0x34d18d);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x25d2f0(0x222),_0x25d2f0(0x238)));}else{if(coolingDown)!config[_0x25d2f0(0x1ea)]&&logHistory(_0x25d2f0(0x304),_0x25d2f0(0x2bc));else lockOrders&&(!config[_0x25d2f0(0x1ea)]&&(config[_0x25d2f0(0x220)]==_0x25d2f0(0x235)?logHistory('error',_0x25d2f0(0x1fe)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x2d128e=_0x4b61f0;let _0x2a88a6;lockOrders=!![],validateOrdersState=_0x2d128e(0x225),currentCoins[_0x2d128e(0x2d6)](_0x5f34ab=>{const _0x56d4c0=_0x2d128e,_0x958548=allOpenOrders['find'](_0x9edab9=>_0x9edab9[_0x56d4c0(0x2d0)]==_0x5f34ab['symbol']);_0x958548&&(lastOrders[_0x56d4c0(0x1fc)]({'orderId':_0x958548['id'],'symbol':_0x5f34ab[_0x56d4c0(0x2d0)],'coin':_0x5f34ab['coin'],'side':_0x958548['side'],'reverse':_0x5f34ab['reverse'],'amount':_0x958548[_0x56d4c0(0x2c7)],'filled':0x0,'price':_0x958548['price'],'fee':_0x958548['fee']}),_0x5f34ab[_0x56d4c0(0x228)]=!![],_0x2a88a6=_0x958548[_0x56d4c0(0x214)]);});const _0x2e160e=new Date()[_0x2d128e(0x26c)](),_0x52dd89=config[_0x2d128e(0x220)]==_0x2d128e(0x235)?validateOrderTimeout*0x3c*0x3e8:config[_0x2d128e(0x301)]*0x3c*0x3e8;if(_0x2a88a6+_0x52dd89>_0x2e160e){console[_0x2d128e(0x23f)](_0x2d128e(0x221),_0x2a88a6+_0x52dd89-_0x2e160e);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5a8f24=_0x2d128e;validateOrders(_0x5a8f24(0x313));},_0x2a88a6+_0x52dd89-_0x2e160e);}else console[_0x2d128e(0x23f)](_0x2d128e(0x1ec)),validateOrders(_0x2d128e(0x313));console[_0x2d128e(0x23f)](_0x2d128e(0x309),lastOrders);}function sendPortfolioTelegram(){const _0x5a44bd=_0x4b61f0,_0x399a99=[_0x5a44bd(0x2c8),_0x5a44bd(0x2d7),_0x5a44bd(0x218),_0x5a44bd(0x314)],_0x5d26cd=_0x399a99[_0x5a44bd(0x1ef)](config[_0x5a44bd(0x2b7)])?0x2:0x8;let _0x47851b=_0x5a44bd(0x28c);_0x47851b+='--------------------------------------------------\x0a',currentCoins[_0x5a44bd(0x2d6)](_0xe52783=>{const _0x3e7ea6=_0x5a44bd;_0x47851b+=_0xe52783['coin']+_0x3e7ea6(0x2d1)+formatResultString(_0xe52783['distribution'],0x2)+'\x20|\x20'+formatResultString(_0xe52783[_0x3e7ea6(0x1f0)],0x2)+_0x3e7ea6(0x2d1)+formatResultString(_0xe52783['delta']*0x64,0x2)+'\x0a';}),process[_0x5a44bd(0x22d)]({'telegrammsg':_0x47851b},_0x5f30ef=>{});}function logHistory(_0x270752,_0x1a4d4c,_0x1103f0=''){const _0x15d178=_0x4b61f0;let _0x322736={'time':getTimeStamp(),'type':_0x270752,'event':_0x1a4d4c};dbLogs[_0x15d178(0x312)]('logs')[_0x15d178(0x1fc)](_0x322736)[_0x15d178(0x2b6)]();if(_0x1103f0=='')_0x1103f0=_0x1a4d4c;proxyEmit(_0x15d178(0x29b),{'log':_0x322736,'summary':_0x1103f0}),process[_0x15d178(0x22d)]({'telegram':{..._0x322736,'botname':config['botname'],'showname':config[_0x15d178(0x208)]}},_0x2600cd=>{}),logging(''+_0x322736[_0x15d178(0x29b)]);}function emitHistory(_0x5589c6={}){const _0x19e824=_0x4b61f0;Object[_0x19e824(0x1f8)](_0x5589c6)[_0x19e824(0x2e6)]==0x0&&(_0x5589c6={'type':[_0x19e824(0x228),_0x19e824(0x29b)],'event':'','page':0x1});if(_0x5589c6[_0x19e824(0x28a)]['includes']('event'))_0x5589c6[_0x19e824(0x28a)][_0x19e824(0x2bd)](_0x5589c6[_0x19e824(0x28a)]['indexOf']('event'),0x1,_0x19e824(0x304),_0x19e824(0x222));if(dbLogs[_0x19e824(0x22c)](_0x19e824(0x1f7))[_0x19e824(0x272)]()){let _0x8e3107=dbLogs['get'](_0x19e824(0x1f7))[_0x19e824(0x212)](_0x34267d=>{const _0x19721e=_0x19e824;if(_0x5589c6[_0x19721e(0x28a)][_0x19721e(0x2e6)]==0x0)return![];else return _0x5589c6[_0x19721e(0x28a)]['includes'](_0x34267d[_0x19721e(0x28a)]);})[_0x19e824(0x212)](_0x521dcf=>{const _0x44720b=_0x19e824;if(_0x5589c6['event']=='')return!![];else return _0x521dcf[_0x44720b(0x29b)]['toLowerCase']()[_0x44720b(0x1ef)](_0x5589c6[_0x44720b(0x29b)][_0x44720b(0x1f1)]());})[_0x19e824(0x2b1)]('time'),_0x2424bf=_0x8e3107[_0x19e824(0x272)]()['length'];_0x8e3107=_0x8e3107['reverse']()['slice']((_0x5589c6[_0x19e824(0x2ef)]-0x1)*logPageSize,_0x5589c6[_0x19e824(0x2ef)]*logPageSize-0x1)[_0x19e824(0x287)]()[_0x19e824(0x272)](),proxyEmit(_0x19e824(0x209),{'logs':_0x8e3107,'total':_0x2424bf});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x490e33){const _0x4ee23c=_0x4b61f0;if(dbLogs[_0x4ee23c(0x22c)](_0x4ee23c(0x1f7))[_0x4ee23c(0x272)]()){const _0x32f484=dbLogs[_0x4ee23c(0x312)]('logs')['sortBy']('time')['filter'](_0x23bcef=>{const _0x4acbc3=_0x4ee23c;return _0x23bcef[_0x4acbc3(0x28a)]=='order';})['value']();dbLogs[_0x4ee23c(0x312)](_0x4ee23c(0x1f7))[_0x4ee23c(0x200)]()['write'](),dbLogs[_0x4ee23c(0x312)](_0x4ee23c(0x1f7))[_0x4ee23c(0x2e5)](_0x32f484)[_0x4ee23c(0x2b6)](),emitHistory(_0x490e33);}}async function pauseBot(_0x5c97c8=''){const _0x45e869=_0x4b61f0,_0x5a74db=new Date()[_0x45e869(0x26c)]();if(!lastBotPause)lastBotPause=new Date()[_0x45e869(0x26c)](),consecutivePauses=0x1;else{if(_0x5a74db-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x45e869(0x22d)]({'stop':_0x45e869(0x2fc)},_0x5ad209=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x5c97c8)_0x5c97c8+=_0x45e869(0x2d1);logHistory(_0x45e869(0x304),_0x5c97c8+_0x45e869(0x240)+pauseBotInterval/0xea60+_0x45e869(0x30f)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x212a45=_0x4b61f0;process[_0x212a45(0x22d)]({'stop':_0x212a45(0x2ec)},_0x27f45c=>{}),await sleep(0x7d0);}async function handleError(_0x2ce669,_0x50cee7,_0x4d10d5=''){const _0x19c92b=_0x4b61f0;if(_0x2ce669['toString']()[_0x19c92b(0x1ef)](_0x19c92b(0x20d)))await pauseBot('Binance\x20API\x20blocked');else{if(_0x2ce669[_0x19c92b(0x1e2)]()[_0x19c92b(0x1ef)](_0x19c92b(0x302)))await pauseBot('Binance\x20not\x20available\x20(2)');else{if(_0x2ce669['toString']()[_0x19c92b(0x1ef)](_0x19c92b(0x296)))await pauseBot(_0x19c92b(0x1fb));else{if(_0x2ce669[_0x19c92b(0x1e2)]()[_0x19c92b(0x1ef)](_0x19c92b(0x2d8)))logHistory(_0x19c92b(0x304),_0x50cee7+_0x19c92b(0x1df)),logHistory(_0x19c92b(0x304),_0x19c92b(0x2f9)),await killBot();else{if(_0x2ce669['toString']()[_0x19c92b(0x1ef)](_0x19c92b(0x29c)))logHistory(_0x19c92b(0x304),_0x50cee7+_0x19c92b(0x297)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2ce669[_0x19c92b(0x1e2)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x50cee7+_0x19c92b(0x25a)),logHistory(_0x19c92b(0x304),_0x19c92b(0x2f9)),await killBot();else{if(_0x2ce669['toString']()[_0x19c92b(0x1ef)](_0x19c92b(0x264)))logHistory(_0x19c92b(0x304),_0x50cee7+_0x19c92b(0x203)),logHistory(_0x19c92b(0x304),_0x19c92b(0x2f9)),await killBot();else{if(_0x2ce669[_0x19c92b(0x1e2)]()[_0x19c92b(0x1ef)](_0x19c92b(0x2cb)))await pauseBot(_0x19c92b(0x27d)),process[_0x19c92b(0x22d)]({'stop':_0x19c92b(0x2fc)},_0xe8243d=>{});else _0x2ce669[_0x19c92b(0x1e2)]()[_0x19c92b(0x1ef)](_0x19c92b(0x2a0))?logHistory(_0x19c92b(0x304),_0x50cee7+_0x19c92b(0x25b)+_0x4d10d5):(logging(_0x50cee7+_0x19c92b(0x2d4),_0x2ce669),await pauseBot(_0x19c92b(0x294)));}}}}}}}}function formatResult(_0x2a0252,_0xa14c16){const _0x543af8=_0x4b61f0;return _0x2a0252?parseFloat(_0x2a0252[_0x543af8(0x226)](_0xa14c16)):null;}function formatResultString(_0x331a09,_0x327eab){const _0x894d90=_0x4b61f0;if(!_0x331a09)return null;let _0x3895fc;if(!(''+_0x331a09)[_0x894d90(0x1ef)]('e'))_0x3895fc=+(Math['round'](_0x331a09+'e+'+_0x327eab)+'e-'+_0x327eab);else{let _0x33aa30=(''+_0x331a09)[_0x894d90(0x1eb)]('e'),_0x125316='';+_0x33aa30[0x1]+_0x327eab>0x0&&(_0x125316='+'),_0x3895fc=+(Math[_0x894d90(0x242)](+_0x33aa30[0x0]+'e'+_0x125316+(+_0x33aa30[0x1]+_0x327eab))+'e-'+_0x327eab);}return Number(_0x3895fc)[_0x894d90(0x226)](_0x327eab);}function logging(_0x306702,_0x223137=''){const _0x49aa7=_0x4b61f0;if(config[_0x49aa7(0x208)])console['log'](getTimeStamp()+':\x20'+config[_0x49aa7(0x21a)]+_0x49aa7(0x2f2)+_0x306702,_0x223137);else console[_0x49aa7(0x23f)](getTimeStamp()+_0x49aa7(0x30c)+botID+_0x49aa7(0x2f2)+_0x306702,_0x223137);}function getServerTime(){const _0x249fec=_0x4b61f0,_0x21d1ed=new Date();return _0x21d1ed[_0x249fec(0x29f)]()+'/'+(_0x21d1ed['getMonth']()+0x1)[_0x249fec(0x1e2)]()[_0x249fec(0x2e8)](0x2,'0')+'/'+_0x21d1ed[_0x249fec(0x27b)]()[_0x249fec(0x1e2)]()[_0x249fec(0x2e8)](0x2,'0')+'\x20'+_0x21d1ed['getHours']()['toString']()[_0x249fec(0x2e8)](0x2,'0')+':'+_0x21d1ed[_0x249fec(0x284)]()[_0x249fec(0x1e2)]()[_0x249fec(0x2e8)](0x2,'0')+':'+_0x21d1ed['getSeconds']()['toString']()[_0x249fec(0x2e8)](0x2,'0');}function getTimeStamp(){const _0x18b6f6=_0x4b61f0,_0x35e426=shiftedTime();return _0x35e426['getFullYear']()+'/'+(_0x35e426['getMonth']()+0x1)['toString']()[_0x18b6f6(0x2e8)](0x2,'0')+'/'+_0x35e426['getDate']()[_0x18b6f6(0x1e2)]()[_0x18b6f6(0x2e8)](0x2,'0')+'\x20'+_0x35e426[_0x18b6f6(0x2c5)]()['toString']()['padStart'](0x2,'0')+':'+_0x35e426[_0x18b6f6(0x284)]()[_0x18b6f6(0x1e2)]()[_0x18b6f6(0x2e8)](0x2,'0')+':'+_0x35e426['getSeconds']()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x328d9e=_0x4b61f0,_0x55600c=shiftedTime();return _0x55600c[_0x328d9e(0x29f)]()+'/'+(_0x55600c[_0x328d9e(0x2cf)]()+0x1)['toString']()[_0x328d9e(0x2e8)](0x2,'0')+'/'+_0x55600c[_0x328d9e(0x27b)]()[_0x328d9e(0x1e2)]()[_0x328d9e(0x2e8)](0x2,'0');}function getHour(){const _0x55943f=_0x4b61f0,_0x594d9e=shiftedTime();return _0x594d9e[_0x55943f(0x2c5)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x4509e5){return new Promise(_0x5356ab=>setTimeout(_0x5356ab,_0x4509e5));}function shiftedTime(){const _0x4ac3c1=_0x4b61f0,_0x508a89=new Date();let _0x234036=_0x508a89;if(config&&config[_0x4ac3c1(0x2ad)]!==0x0)_0x234036=fns[_0x4ac3c1(0x2ab)](_0x508a89,{'hours':config[_0x4ac3c1(0x2ad)]});return _0x234036;}