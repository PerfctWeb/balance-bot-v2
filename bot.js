const _0x40a141=_0x55ad;(function(_0x1ae2b6,_0x5eb7a9){const _0x171ac1=_0x55ad,_0x22fbd5=_0x1ae2b6();while(!![]){try{const _0x583986=parseInt(_0x171ac1(0x177))/0x1*(-parseInt(_0x171ac1(0x204))/0x2)+-parseInt(_0x171ac1(0x1be))/0x3+parseInt(_0x171ac1(0x116))/0x4+parseInt(_0x171ac1(0x191))/0x5+parseInt(_0x171ac1(0x1d1))/0x6+parseInt(_0x171ac1(0x1d7))/0x7*(-parseInt(_0x171ac1(0x12f))/0x8)+parseInt(_0x171ac1(0x220))/0x9;if(_0x583986===_0x5eb7a9)break;else _0x22fbd5['push'](_0x22fbd5['shift']());}catch(_0x45e891){_0x22fbd5['push'](_0x22fbd5['shift']());}}}(_0x5bff,0x36e51));const _0x8fa9e6=function(){let _0x5cab98=!![];return function(_0x178792,_0x439731){const _0x372158=_0x5cab98?function(){const _0x4cabb4=_0x55ad;if(_0x439731){const _0x2bc3e0=_0x439731[_0x4cabb4(0x1fd)](_0x178792,arguments);return _0x439731=null,_0x2bc3e0;}}:function(){};return _0x5cab98=![],_0x372158;};}(),_0x18c3f1=_0x8fa9e6(this,function(){const _0x19a47e=_0x55ad;return _0x18c3f1[_0x19a47e(0x17f)]()[_0x19a47e(0x1a2)](_0x19a47e(0x138))[_0x19a47e(0x17f)]()['constructor'](_0x18c3f1)[_0x19a47e(0x1a2)](_0x19a47e(0x138));});_0x18c3f1();'use strict';const ccxt=require(_0x40a141(0x1fb))[_0x40a141(0x222)],low=require(_0x40a141(0x166)),FileSync=require(_0x40a141(0x11a)),fs=require('fs'),fns=require(_0x40a141(0x20a)),Crypt=require(_0x40a141(0x1b9))['Crypt'],util=require(_0x40a141(0x189)),argv=require(_0x40a141(0xf7))(process[_0x40a141(0x152)][_0x40a141(0x1a5)](0x2))[_0x40a141(0x152)],path=require('path');let exchange;global[_0x40a141(0x1a9)]={},global['change']={};const exceptions={'binance':[_0x40a141(0x186),_0x40a141(0x151),_0x40a141(0x1bd),_0x40a141(0x224),_0x40a141(0x19f)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x40a141(0x262)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x40a141(0x1c8)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x40a141(0x231))[_0x40a141(0x1b0)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x40a141(0x1ca)](botID)&&(console[_0x40a141(0x175)](_0x40a141(0x239)+botID+_0x40a141(0x11e)),killBot());const userID=process[_0x40a141(0x152)][0x3]||'',configpath=userID?_0x40a141(0x140)+userID+'/':_0x40a141(0x140),logspath=userID?'./logs/'+userID+'/':_0x40a141(0x1da),loggerfile=fs[_0x40a141(0x1c6)](logspath+_0x40a141(0x216),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x40a141(0x1cc)](configpath);!fs['existsSync'](logspath)&&fs[_0x40a141(0x1cc)](logspath);const configfile=configpath+_0x40a141(0x199)+botID+_0x40a141(0x141),logfile=configpath+_0x40a141(0x199)+botID+_0x40a141(0x1ea),performancefile=configpath+_0x40a141(0x199)+botID+_0x40a141(0x195),coinresultsfile=configpath+'bot-'+botID+_0x40a141(0x13f),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x40a141(0x229),configbackuppath=configpath+_0x40a141(0x13b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x40a141(0x257)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x40a141(0x257)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x40a141(0x257)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3d8b21=>{const _0x1ade00=_0x40a141;console[_0x1ade00(0x175)](_0x3d8b21);},'simple':_0x3462da=>{console['log'](_0x3462da),loggerfile['write'](util['format'](_0x3462da)+'\x0a');},'full':async(_0x1ed6c4,_0x2ca42a='')=>{const _0x16a1fd=_0x40a141;let _0x33012a;if(config['showname'])_0x33012a=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x1ed6c4;else _0x33012a=getTimeStamp()+':\x20Bot\x20'+botID+_0x16a1fd(0x1ec)+_0x1ed6c4;console[_0x16a1fd(0x175)](_0x33012a),loggerfile[_0x16a1fd(0x257)](util[_0x16a1fd(0x267)](_0x33012a)+'\x0a'),_0x2ca42a&&(console[_0x16a1fd(0x175)](_0x2ca42a),loggerfile[_0x16a1fd(0x257)](util[_0x16a1fd(0x267)](_0x2ca42a)+'\x0a'));},'debug':async(_0x774848,_0x11b8b4='')=>{const _0x191924=_0x40a141;let _0x5a1c5d;if(config[_0x191924(0x135)])_0x5a1c5d=getTimeStamp()+':\x20'+config[_0x191924(0x1f9)]+_0x191924(0x1e5)+_0x774848;else _0x5a1c5d=getTimeStamp()+':\x20Bot\x20'+botID+_0x191924(0x1e5)+_0x774848;if(debugging)console[_0x191924(0x175)](_0x5a1c5d);loggerfile[_0x191924(0x257)](util[_0x191924(0x267)](_0x5a1c5d)+'\x0a');if(_0x11b8b4){if(debugging)console['log'](_0x11b8b4);loggerfile['write'](util['format'](_0x11b8b4)+'\x0a');}}};process['on'](_0x40a141(0x126),function(_0x12026f){const _0x21dc8a=_0x40a141;logger[_0x21dc8a(0x25f)](_0x12026f);});settings['timeshift']!=config[_0x40a141(0x15e)]&&updateTimeshift(settings[_0x40a141(0x15e)]);settings[_0x40a141(0x20f)]!=config[_0x40a141(0x20f)]&&updateOnepagemode(settings[_0x40a141(0x20f)]);process['send']({'started':'running'},_0x5ac532=>{}),initializeProcessListeners();function proxyEmit(_0x594f35,_0x2dbe3e=null){process['send']({'function':_0x594f35,'args':_0x2dbe3e},_0x41af02=>{});}function initializeProcessListeners(){const _0x5364bb=_0x40a141;process['on'](_0x5364bb(0x1dc),_0x53bfcd=>{const _0x50f351=_0x5364bb;switch(Object[_0x50f351(0x200)](_0x53bfcd)[0x0]){case _0x50f351(0x15e):_0x53bfcd[_0x50f351(0x15e)]!=undefined&&(settings[_0x50f351(0x15e)]=_0x53bfcd[_0x50f351(0x15e)],updateTimeshift(settings[_0x50f351(0x15e)]));break;case _0x50f351(0x20f):_0x53bfcd[_0x50f351(0x20f)]!=undefined&&(settings[_0x50f351(0x20f)]=_0x53bfcd[_0x50f351(0x20f)],updateOnepagemode(settings[_0x50f351(0x20f)]));break;case'bots':_0x53bfcd[_0x50f351(0x1dd)]!=undefined&&(bots=JSON['parse'](_0x53bfcd[_0x50f351(0x1dd)]),proxyEmit(_0x50f351(0x1dd),bots));break;case _0x50f351(0x209):switch(_0x53bfcd[_0x50f351(0x209)]){case _0x50f351(0x1e7):initclient();break;case _0x50f351(0x192):toggleBotMode();break;case'emitHistory':emitHistory(_0x53bfcd['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x53bfcd[_0x50f351(0x1fc)]);break;case'getPortfolio':getPortfolio(_0x53bfcd[_0x50f351(0x1fc)]);break;case'storeConfiguration':storeConfiguration(_0x53bfcd[_0x50f351(0x1fc)]);break;case _0x50f351(0x1a4):storeHeadless(_0x53bfcd[_0x50f351(0x1fc)]);break;case _0x50f351(0x1b3):storeFiat(_0x53bfcd[_0x50f351(0x1fc)]);break;case _0x50f351(0x10f):resetHistory();break;case _0x50f351(0x1aa):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x53bfcd['args']);break;case _0x50f351(0x1c5):cancelLoading();break;case _0x50f351(0x10a):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x50f351(0x1d3):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x578c53=null,_0x57b7ae=![]){const _0x48e371=_0x40a141;logger[_0x48e371(0x17d)](_0x48e371(0x1c4)+(_0x578c53&&_0x578c53['length']>0x0?_0x48e371(0x238)+_0x578c53[_0x48e371(0xf3)](','):_0x48e371(0x19e))+_0x48e371(0x21a)+(_0x57b7ae?_0x48e371(0x25e):_0x48e371(0x1ab)));if(pidBalances)clearTimeout(pidBalances);if(!_0x57b7ae)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x48e371(0x114)]!=_0x48e371(0x136)){if(_0x57b7ae){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x563bd5){if(_0x563bd5[_0x48e371(0x17f)]()[_0x48e371(0x13c)](_0x48e371(0x19a))){handleErrorNoStop(_0x563bd5,_0x48e371(0x227));return;}else{handleError(_0x563bd5,_0x48e371(0x227));return;}}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x578c53);const _0xc5ce04=await getCoins();[currentCoins,currentCoinsAll]=_0xc5ce04,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders[_0x48e371(0x10c)]==0x0&&allOpenOrders[_0x48e371(0x10c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x47c01f=_0x40a141;exchangeStopped=!![],await exchange[_0x47c01f(0x1d5)]();}async function reloadExchange(){const _0x45e960=_0x40a141;logger[_0x45e960(0x17d)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x45e960(0x1c8)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x45e960(0x1db)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x103967=config[_0x40a141(0x208)],_0x3f0ca0=config[_0x40a141(0x114)],_0x1e1dd3=config[_0x40a141(0x234)]){const _0x5d1014=_0x40a141;exchange&&await stopExchange();!supportedExchanges()[_0x5d1014(0x13c)](_0x103967)&&(logHistory(_0x5d1014(0x22e),_0x5d1014(0x1f4)+_0x103967+_0x5d1014(0x221)),killBot());const _0x1ee787=ccxt[_0x103967[_0x5d1014(0x265)]()];exchange=new _0x1ee787({'apiKey':_0x3f0ca0,'secret':_0x1e1dd3,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x23a7fd=_0x40a141;let _0x44a828=config[_0x23a7fd(0x1f7)]==_0x23a7fd(0xf4)?_0x23a7fd(0xf4):_0x23a7fd(0x13e),_0x1231c6=!allSymbols[_0x23a7fd(0x13c)](_0x44a828+_0x23a7fd(0x130))?_0x23a7fd(0x115):'USD',_0x59d54a=!allSymbols[_0x23a7fd(0x13c)](_0x44a828+_0x23a7fd(0x24b))?_0x1231c6:'EUR';stablecoins={'eur':{'coin':''+_0x44a828+_0x59d54a,'symbol':_0x44a828+'/'+_0x59d54a},'usd':{'coin':''+_0x44a828+_0x1231c6,'symbol':_0x44a828+'/'+_0x1231c6}};}async function initwsCcxt(_0x1970e2){const _0x534f70=_0x40a141;_0x1970e2==null&&(_0x1970e2=[],config[_0x534f70(0x17e)][_0x534f70(0x241)](_0x50d38b=>{const _0x548a39=_0x534f70;if(!_0x50d38b[_0x548a39(0x127)]&&_0x50d38b[_0x548a39(0x165)]!=config[_0x548a39(0x1f7)])_0x1970e2['push'](_0x50d38b[_0x548a39(0x104)]);}));if(!_0x1970e2[_0x534f70(0x13c)](stablecoins[_0x534f70(0x159)][_0x534f70(0x104)]))_0x1970e2['push'](stablecoins[_0x534f70(0x159)][_0x534f70(0x104)]);if(!_0x1970e2[_0x534f70(0x13c)](stablecoins[_0x534f70(0x120)][_0x534f70(0x104)]))_0x1970e2[_0x534f70(0x14e)](stablecoins[_0x534f70(0x120)][_0x534f70(0x104)]);if(!_0x1970e2[_0x534f70(0x13c)](_0x534f70(0x18f)+config[_0x534f70(0x1f7)]))_0x1970e2[_0x534f70(0x14e)](_0x534f70(0x18f)+config[_0x534f70(0x1f7)]);loadCoins(_0x1970e2);const _0x592b0c=async _0x323c3f=>{const _0x5bf39a=_0x534f70,_0x1ba21c=await exchange[_0x5bf39a(0x1c1)](_0x323c3f);global[_0x5bf39a(0x1a9)][noslash(_0x1ba21c[_0x5bf39a(0x104)])]=_0x1ba21c[_0x5bf39a(0x119)];while(!![]){if(!botPaused)try{const _0x5dca51=await exchange['watchTrades'](_0x323c3f);global[_0x5bf39a(0x1a9)][noslash(_0x5dca51[0x0][_0x5bf39a(0x104)])]=_0x5dca51[0x0]['price'],await sleep(0x3e8);}catch(_0x384800){if(!exchangeStopped)await handleError(_0x384800,_0x5bf39a(0x176),_0x323c3f);}else await sleep(0x3e8);}},_0x524b0d=async _0x5d08cf=>{const _0x4d664a=_0x534f70;while(!![]){if(!botPaused)try{const _0x4e5a9b=await exchange[_0x4d664a(0x1c1)](_0x5d08cf);global[_0x4d664a(0x1b4)][_0x4e5a9b[_0x4d664a(0x104)]]=_0x4e5a9b['percentage'],await sleep(0x3c*0x3e8);}catch(_0x2ffa40){if(!exchangeStopped)await handleError(_0x2ffa40,_0x4d664a(0x223),_0x5d08cf);}else await sleep(0x3e8);}},_0x52e13a=async()=>{const _0xcf1d24=_0x534f70;while(!![]){if(!botPaused)try{const _0x58546d=await exchange[_0xcf1d24(0x240)]();_0x58546d['forEach'](_0x1d1e22=>{updateNumberCoinsCcxt(_0x1d1e22);});}catch(_0x1e3b45){if(!exchangeStopped)await handleError(_0x1e3b45,_0xcf1d24(0x240));}else await sleep(0x3e8);}};_0x1970e2[_0x534f70(0x241)](async _0xc07196=>{_0x592b0c(_0xc07196),_0x524b0d(_0xc07196);}),!wsEventsSet&&(wsEventsSet=!![],_0x52e13a(),watchTransactions());}async function watchTransactions(){const _0x55c6e3=_0x40a141;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x350904=await getCoins(),[_0x51d5d5,_0x1fa0f6]=_0x350904;let _0x2d9de7=[];currentCoins[_0x55c6e3(0x241)](_0x5ef191=>{const _0x137608=_0x55c6e3,_0xe885a6=_0x51d5d5[_0x137608(0x20b)](_0xaf8b39=>_0xaf8b39[_0x137608(0x165)]==_0x5ef191['coin']);_0xe885a6&&(_0x5ef191[_0x137608(0x193)]!=_0xe885a6[_0x137608(0x193)]&&_0x2d9de7[_0x137608(0x14e)]({'coin':_0x5ef191[_0x137608(0x165)],'symbol':_0x5ef191[_0x137608(0x104)],'number':Number(formatResult(_0xe885a6['number']-_0x5ef191[_0x137608(0x193)],0x8))}));});if(_0x2d9de7[_0x55c6e3(0x10c)]==0x1&&!blockTransactionDetection){logger[_0x55c6e3(0x17d)](_0x55c6e3(0x171)+lastFees[_0x55c6e3(0x11b)]+_0x55c6e3(0x112)+lastFees[_0x55c6e3(0x1de)]);if(!lastFees[_0x55c6e3(0x11b)]||_0x2d9de7[0x0][_0x55c6e3(0x165)]!=lastFees['currency']||_0x2d9de7[0x0][_0x55c6e3(0x193)]>lastFees[_0x55c6e3(0x1de)]){let _0x3f76fb;if(_0x2d9de7[0x0][_0x55c6e3(0x165)]!=config[_0x55c6e3(0x1f7)]){let _0x350d71=global[_0x55c6e3(0x1a9)][noslash(_0x2d9de7[0x0]['symbol'])];_0x3f76fb=_0x2d9de7[0x0][_0x55c6e3(0x1d9)]?0x1/_0x350d71:_0x350d71;}else _0x3f76fb=0x1;_0x2d9de7[0x0]['price']=_0x3f76fb,delete _0x2d9de7[0x0][_0x55c6e3(0x104)];let _0x2eecc3=[],_0x1d2245=[...config['liquidity']]||[],_0x57ccb7=config[_0x55c6e3(0x19d)];_0x1d2245[_0x55c6e3(0x215)]((_0x59e1d3,_0x142d9e)=>_0x59e1d3[_0x55c6e3(0xf8)]>_0x142d9e['date']?-0x1:_0x142d9e['date']>_0x59e1d3[_0x55c6e3(0xf8)]?0x1:0x0);const _0x20c0b1=getDate();if(_0x1d2245[0x0]){const _0x1d5a74=fns['parse'](_0x1d2245[0x0]['date'],'yyyy/MM/dd',new Date()),_0x48f34a=fns[_0x55c6e3(0x158)](_0x20c0b1,'yyyy/MM/dd',new Date());if(fns[_0x55c6e3(0x1d6)](_0x1d5a74,_0x48f34a)){_0x2eecc3=_0x1d2245[0x0][_0x55c6e3(0x1b5)];const _0x1e6f9=_0x2eecc3[_0x55c6e3(0x20b)](_0x514f97=>_0x514f97[_0x55c6e3(0x165)]==_0x2d9de7[0x0][_0x55c6e3(0x165)]);_0x1e6f9?_0x1e6f9[_0x55c6e3(0x193)]+=_0x2d9de7[0x0][_0x55c6e3(0x193)]:_0x2eecc3[_0x55c6e3(0x14e)](_0x2d9de7[0x0]);const _0x18763a=_0x57ccb7['find'](_0x35077c=>_0x35077c[_0x55c6e3(0xf8)]==_0x20c0b1);_0x18763a[_0x55c6e3(0x1b5)]=_0x2eecc3;}else _0x57ccb7[_0x55c6e3(0x14e)]({'date':_0x20c0b1,'changes':[_0x2d9de7[0x0]]});}const _0x1fdef2=_0x57ccb7[_0x55c6e3(0x20b)](_0x4c162f=>_0x4c162f[_0x55c6e3(0xf8)]==_0x20c0b1);if(_0x1fdef2){let _0x4b1aa5=!![];_0x1fdef2[_0x55c6e3(0x1b5)][_0x55c6e3(0x241)](_0x7e5d84=>{const _0x772b55=_0x55c6e3;if(_0x7e5d84[_0x772b55(0x193)]!=0x0)_0x4b1aa5=![];}),_0x4b1aa5&&(_0x57ccb7=_0x57ccb7[_0x55c6e3(0x124)](_0x3b381a=>{const _0x23b5e7=_0x55c6e3;return _0x3b381a[_0x23b5e7(0xf8)]!=_0x20c0b1;}));}let _0x4dc84c=dbConfig[_0x55c6e3(0x161)](_0x55c6e3(0x256))[_0x55c6e3(0x20b)]({'botID':botID})[_0x55c6e3(0x194)]();_0x4dc84c&&(dbConfig[_0x55c6e3(0x161)]('bot')[_0x55c6e3(0x20b)]({'botID':botID})[_0x55c6e3(0x1d0)]({'liquidity':_0x57ccb7})[_0x55c6e3(0x257)](),config[_0x55c6e3(0x19d)]=_0x57ccb7),logHistory(_0x55c6e3(0x20c),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x2d9de7[0x0][_0x55c6e3(0x193)])+'\x20'+_0x2d9de7[0x0][_0x55c6e3(0x165)]+'\x20'+(_0x2d9de7[0x0][_0x55c6e3(0x193)]>0x0?_0x55c6e3(0x1b1):_0x55c6e3(0x14a))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x55c6e3(0x1ff)](_0x2d9de7[0x0]['number'])+'\x20'+_0x2d9de7[0x0][_0x55c6e3(0x165)]+'\x20'+(_0x2d9de7[0x0]['number']>0x0?_0x55c6e3(0x1b1):_0x55c6e3(0x14a)));transactionDetected=!![],currentCoins=_0x51d5d5,currentCoinsAll=_0x1fa0f6;}await sleep(watchTransactionsInterval);}catch(_0x2b8605){if(!exchangeStopped)await handleError(_0x2b8605,_0x55c6e3(0x153));}else await sleep(0x3e8);}}async function loadSymbols(_0x5fab4=config['exchange'],_0x59f113=![]){const _0x53d807=_0x40a141;if(allSymbols&&!_0x59f113)return;try{markets=await exchange[_0x53d807(0x252)](),allSymbols=exchange[_0x53d807(0x25b)][_0x53d807(0x124)](_0x1a7b03=>{const _0xd541d0=_0x53d807;let _0x4b8f19=![];const _0x987b20=exceptions[_0x5fab4[_0xd541d0(0x265)]()]||[];return _0x987b20['forEach'](_0x2dbba3=>{const _0x358ea8=_0xd541d0;if(_0x1a7b03[_0x358ea8(0x13c)](_0x2dbba3))_0x4b8f19=!![];}),!_0x4b8f19;});}catch(_0x4051ad){throw _0x4051ad;}}async function initclient(){const _0x4c17a3=_0x40a141;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x4c17a3(0x1a6),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4c17a3(0x16b),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x16cdc4=getNormalizedPerformance();emitPerformance(_0x16cdc4),getStartingBalances(_0x16cdc4);}function _0x5bff(){const _0x1bb281=['\x20>\x20[DEBUG]\x20','substring','initclient','Invalid\x20quantity','EUR','-events.json','warning','\x20>\x20','restart','\x20portfolio:</b>\x20\x0a\x0a','Executed\x20','delta','amount','closed','openOrders','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','ordertype','logs','basecoin','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','botname','side','ccxt','args','apply','filled','abs','keys','fiat','min','Order(s)\x20not\x20validated\x20after\x20','318314ogBLMg','add','full','sells','exchange','function','date-fns','find','success','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','padStart','onepagemode','getCoins()','\x20|\x20lock\x20orders:\x20','status','\x20minutes\x20-\x20','sortBy','sort','/output-000.log','send','running','\x20not\x20responding','\x20|\x20','<b>Bot\x20','2.3.5','decrypt','\x20API\x20key\x20is\x20invalid','Unfilled\x20order(s)\x20canceled\x20after\x20','6322581OhgCfx','\x20exchange','pro','fetchTickers','NANO/','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','loadSymbols()','Failed\x20to\x20load\x20coin\x20data\x20for\x20','bb-secure.json','botID','\x20orders\x20in\x20less\x20than\x20','round','secure','error','Transaction\x20detection\x20blocked','getFullYear','./version.json','cancelOrders()','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','apiSecret','netoffset','ongoing','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','additional\x20symbols\x20','Error:\x20Invalid\x20argument\x20','canceled','initial','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','configuration','privateKey','USD','watchOrders','forEach','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','replace','cancelOrder','no\x20open\x20orders','toFixed','Error\x20while\x20deleting\x20files:\x20','orderstatus','-------------------------------\x0a','indexOf','/EUR','fetchBalance','limits','\x20change','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','%\x20(','Pausing\x20for\x20','loadMarkets','string','unlinkSync','time','bot','write','performance','milliseconds','exec','symbols','set','final','exchange\x20reloaded','simple','split','headless','freeze','\x20minutes','event-history','toLowerCase','parseISO','format','entries','join','ETH','Market','\x20:\x20','yargs/yargs','date','timer:','</pre>','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','distribution','enabled','MIN_NOTIONAL','Binance','price','ORDERS.UNLOCKED','cloneDeep','realized','symbol','Manual\x20balancing\x20required','UNLOCKING','recreateCoinResults()','getDate','data','showConfig','event','length','cost','writeFile','resetHistory','BNB','ORDERS.UNLOCKING','\x20|\x20highest:\x20','stringify','apiKey','USDT','696808vETkvj','getMinutes','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','last','lowdb/adapters/FileSync','currency','page','timestamp',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','usd','ExchangeNotAvailable','shift','BUSD','filter','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','uncaughtException','excluded','net-fiat','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','limit','remove','customId','<pre>','map','122520wvQCKF','/USD','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Transaction\x20detection\x20unblocked','\x20value','progress','showname','***','Limit\x20(high-margin)','(((.+)+)+)+$','coin-loading-progress','startdate','/backup/','includes','remainingSymbols','BTC','-results.json','./config/','-config.json','balancing\x20resumed','Net\x20effect','startnumber','getPortfolio(1)','1\x20-\x20Validate\x20orders:\x20','API-key\x20format\x20invalid','Limit\x20(low-margin)','balancing\x20resumes\x20when\x20cooldown\x20ends','removed','\x20-\x20bot\x20not\x20started','max','3\x20-\x20handling\x20FILLED\x20order:\x20','push','timeout','coins','HOT/BTC','argv','watchTransactions','startprice','buys','open','cancel','parse','eur','order','findIndex','\x20not\x20available','yyyy-MM-dd\x27T\x27HH:mm:ss','timeshift','getMonth','************','get','existsSync','recent20','rightTxt','coin','lowdb','\x20API\x20secret\x20is\x20invalid','target','emojibuy','leftTxt','balances','<b>','offset','.json','InsufficientFunds','concat','Fees\x20|\x20currency:\x20','2\x20-\x20Validate\x20orders:\x20','Unknown\x20error\x20occured','OrderNotFound','log','watchTrades','2srwRsB','createOrder','Net\x20','threshold','0\x20-\x20EXECUTION:\x20','RequestTimeout','debug','portfolio','toString','placeOrder()','bid','fromCodePoint','Cooldown\x20ended\x20-\x20balancing\x20resumed','type','has','DAI/','cooldown','orderId','util','Order\x20amount\x20is\x20invalid:\x20','splice','fee','differenceInSeconds','\x20order:\x20','BNB/','Bot\x20','1559070hGWNLQ','toggleBotMode','number','value','-performance.json','getPortfolio(0)','limit-high','valid','bot-','AuthenticationError','\x20|\x20Error\x20details:\x20','starting-balances','liquidity','no\x20additional\x20symbols','YOYOW/','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','market','search','fetchOpenOrders','storeHeadless','slice','exchanges','getHours','net-basecoin','ticker','getStartingBalances','exchange\x20not\x20reloaded','configuration-stored','Invalid\x20API\x20key\x20or\x20secret\x20entered','2.5.0','fees','version','added','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','storeFiat','change','changes','emojisell','InvalidNonce','\x20hour','hybrid-crypto-js','1\x20-\x20Unlock\x20orders','sell','change24h','XEM/BUSD','1306512wCSVjr','breakeven','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','fetchTicker','2\x20-\x20FILLED\x20known\x20order:\x20','LOCKED','Reset\x20|\x20','cancelLoading','createWriteStream','datetime','UNLOCKED','Saving\x20configuration','test','\x20metrics:</b>\x20\x0a\x0a','mkdirSync','clientOrderId','DDoSProtection','ask','assign','1313772mCNssx','total','sendPortfolioTelegram','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','close','isEqual','196BoLlil','Exchange','reverse','./logs/','Executing\x20exchange\x20reload','message','bots','highest','buy','trade','getTime','Resetting\x20bot\x20history','\x20closed\x20the\x20connection','none'];_0x5bff=function(){return _0x1bb281;};return _0x5bff();}async function toggleBotMode(){const _0x3cc19f=_0x40a141;let _0x17f711=dbConfig[_0x3cc19f(0x161)](_0x3cc19f(0x256))[_0x3cc19f(0x20b)]({'botID':botID})[_0x3cc19f(0x194)]();if(_0x17f711){const _0x5b0293=!_0x17f711[_0x3cc19f(0x261)];dbConfig[_0x3cc19f(0x161)](_0x3cc19f(0x256))[_0x3cc19f(0x20b)]({'botID':botID})[_0x3cc19f(0x1d0)]({'headless':_0x5b0293})[_0x3cc19f(0x257)](),config[_0x3cc19f(0x261)]=_0x5b0293,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5f5a80=_0x40a141;process[_0x5f5a80(0x217)]({'updatebotmanager':!![]},_0x7007e5=>{});}async function loadCoins(_0x91fa4d){const _0x26162a=_0x40a141;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x355223,_0x403524=0x0,_0x21a011=0x0;_0x91fa4d[_0x26162a(0x241)](_0x5f5dbf=>{const _0x3a163b=_0x26162a;loading[_0x3a163b(0x13d)][_0x3a163b(0x14e)](_0x5f5dbf);}),loadingCanceled=![];let _0x2bd565=![];while(_0x355223!=_0x91fa4d['length']){_0x355223=0x0,_0x91fa4d[_0x26162a(0x241)](_0x337829=>{const _0x391a09=_0x26162a;if(global[_0x391a09(0x1a9)][noslash(_0x337829)]){loading[_0x391a09(0x13d)]=loading[_0x391a09(0x13d)][_0x391a09(0x124)](_0x264f90=>_0x264f90!=_0x337829);if(!watchedSymbols[_0x391a09(0x13c)](_0x337829))watchedSymbols['push'](_0x337829);_0x355223++;}}),loading[_0x26162a(0x134)]=Math[_0x26162a(0x22c)](_0x355223/_0x91fa4d[_0x26162a(0x10c)]*0x64);loading[_0x26162a(0x134)]!=0x64&&(_0x21a011>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x21a011>0x78*0x5&&!_0x2bd565&&(loading[_0x26162a(0x157)]=!![],emitLoadingProgress(),_0x2bd565=!![],logHistory('error',_0x26162a(0x228)+loading[_0x26162a(0x13d)]['join'](',\x20')+_0x26162a(0x14b)),logHistory(_0x26162a(0x22e),_0x26162a(0x251)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x359800=_0x26162a;process[_0x359800(0x217)]({'stop':_0x359800(0x1ed)},_0x348bc8=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x26162a(0x157)]=!![],emitLoadingProgress();break;}else _0x355223!=_0x403524&&(_0x403524=_0x355223,emitLoadingProgress()),_0x21a011++,await sleep(0xc8);}_0x355223==_0x91fa4d[_0x26162a(0x10c)]&&(coinsLoaded=!![],process[_0x26162a(0x217)]({'status':_0x26162a(0xfd),'live':_0x26162a(0x218)},_0x4f11b5=>{}),_0x2bd565&&logHistory(_0x26162a(0x20c),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x401080=_0x40a141;proxyEmit(_0x401080(0x23d),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1a4801=_0x40a141;proxyEmit(_0x1a4801(0x139),loading);}async function getFiat(){const _0x47c5e0=_0x40a141;let _0x56e7eb=global['ticker'][stablecoins[_0x47c5e0(0x159)][_0x47c5e0(0x165)]],_0x1037c0=global[_0x47c5e0(0x1a9)][stablecoins[_0x47c5e0(0x120)]['coin']];return{'eur':Number(_0x56e7eb),'usd':Number(_0x1037c0)};}function capitalize(_0x1f07f3){const _0x2c3cf8=_0x40a141;return _0x1f07f3[_0x2c3cf8(0x1e6)](0x0,0x1)['toUpperCase']()+_0x1f07f3['substring'](0x1);}function supportedExchanges(){const _0x509b42=_0x40a141,_0x24f5ee=['ws','fetchTickers',_0x509b42(0x1c1),_0x509b42(0x176),_0x509b42(0x240),'cancelOrder','createOrder',_0x509b42(0x1a3),'fetchClosedOrders',_0x509b42(0x24c)];let _0x135fc1=[],_0x2e69bc=[],_0xc484ac=ccxt[_0x509b42(0x1a6)];_0xc484ac[_0x509b42(0x241)](_0x2963c1=>{try{const _0x2dc272=new ccxt[_0x2963c1]();if(_0x2dc272['has']['ws'])_0x2e69bc['push'](_0x2dc272);}catch(_0x48cd10){}}),_0x2e69bc[_0x509b42(0x241)](_0x567a72=>{const _0x592a26=_0x509b42;let _0x2bd71e=0x0;_0x24f5ee[_0x592a26(0x241)](_0x272126=>{const _0x32e050=_0x592a26;_0x272126 in _0x567a72[_0x32e050(0x185)]&&_0x567a72['has'][_0x272126]&&_0x2bd71e++;}),_0x2bd71e==_0x24f5ee[_0x592a26(0x10c)]&&_0x135fc1[_0x592a26(0x14e)](capitalize(_0x567a72['id']));});let _0x4f8906=[];return _0xc484ac[_0x509b42(0x241)](_0x15aa16=>{const _0x37df74=_0x509b42;_0x15aa16=capitalize(_0x15aa16);if(!_0x135fc1[_0x37df74(0x13c)](_0x15aa16))_0x4f8906[_0x37df74(0x14e)](_0x15aa16);}),_0x135fc1;}function setStartDatePerformance(){const _0x2526d7=_0x40a141;if(config&&config[_0x2526d7(0x19d)][0x0][_0x2526d7(0x1b5)]['length']!=0x0){const _0x576df3=config[_0x2526d7(0x19d)][0x0][_0x2526d7(0x1b5)];dbPerformance['get'](_0x2526d7(0x109))[_0x2526d7(0x20b)]({'date':config[_0x2526d7(0x13a)]})[_0x2526d7(0x1d0)]({'coins':_0x576df3})[_0x2526d7(0x257)]();}}async function recreateCoinResults(){const _0x4c7e66=_0x40a141;let _0x398b49,_0x32c552=[];try{const _0x1c502d=fns['format'](fns[_0x4c7e66(0x266)](config['startdate']['replace'](/\//g,'-')),_0x4c7e66(0x15d));for(const _0x10aaad of currentCoins){if(_0x10aaad[_0x4c7e66(0x165)]!=config[_0x4c7e66(0x1f7)]){let _0x38ea5e=0x0,_0x392018,_0x25c42c;_0x398b49=await getAllEventOrders(_0x10aaad[_0x4c7e66(0x104)]);if(_0x398b49[_0x4c7e66(0x10c)]>0x0)_0x398b49['forEach'](_0x11a893=>{const _0x5cd04f=_0x4c7e66,_0x5556b3=_0x10aaad[_0x5cd04f(0x104)][_0x5cd04f(0x13c)](config['basecoin']+'/');_0x32c552['push']({'datetime':_0x11a893[_0x5cd04f(0x1c7)],'coin':_0x10aaad[_0x5cd04f(0x165)],'symbol':_0x10aaad[_0x5cd04f(0x104)],'side':_0x11a893[_0x5cd04f(0x1fa)],'reverse':_0x5556b3,'amount':formatResult(_0x11a893[_0x5cd04f(0x1fe)],0x8),'filled':formatResult(_0x11a893[_0x5cd04f(0x1fe)],0x8),'price':formatResult(_0x11a893['price'],0x8)}),_0x38ea5e=_0x11a893[_0x5cd04f(0x1fa)]==_0x5cd04f(0x1df)?_0x38ea5e+_0x11a893['filled']:_0x38ea5e-_0x11a893[_0x5cd04f(0x1fe)];if(!_0x25c42c)_0x25c42c=_0x11a893[_0x5cd04f(0x100)];});_0x392018=_0x10aaad[_0x4c7e66(0x193)]-_0x38ea5e;let _0x14381d;config[_0x4c7e66(0x19d)]['forEach'](_0x1d228b=>{const _0x599fc1=_0x4c7e66;!_0x14381d&&(_0x14381d=_0x1d228b[_0x599fc1(0x1b5)][_0x599fc1(0x20b)](_0x5578c1=>_0x5578c1['coin']==_0x10aaad[_0x599fc1(0x165)]),_0x14381d&&(_0x392018=_0x14381d['number'],_0x25c42c=_0x14381d[_0x599fc1(0x100)]));});let _0x2233a5=dbCoinResults[_0x4c7e66(0x161)](_0x4c7e66(0x150))[_0x4c7e66(0x20b)]({'coin':_0x10aaad[_0x4c7e66(0x165)]})[_0x4c7e66(0x194)]();_0x2233a5={'coin':_0x10aaad[_0x4c7e66(0x165)],'number':_0x392018,'breakeven':_0x25c42c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x4c7e66(0x150))[_0x4c7e66(0x20b)]({'coin':_0x10aaad[_0x4c7e66(0x165)]})['assign'](_0x2233a5)[_0x4c7e66(0x257)]();}}_0x32c552[_0x4c7e66(0x215)]((_0x34f413,_0x780f53)=>_0x34f413[_0x4c7e66(0x1c7)]>_0x780f53['datetime']?0x1:_0x780f53[_0x4c7e66(0x1c7)]>_0x34f413[_0x4c7e66(0x1c7)]?-0x1:0x0);let _0x2bc8fe=0x0;for(let _0x2a609a of _0x32c552){await updateCoinResults(_0x2a609a,!![]);}}catch(_0x1a8f75){await handleError(_0x1a8f75,_0x4c7e66(0x107));}}async function getAllEventOrders(_0x2142f9){const _0x1a7c8e=_0x40a141;let _0x1b90d3=[],_0x561dfc=dbLogs['get']('logs')[_0x1a7c8e(0x124)](_0x420726=>{const _0x28b8f1=_0x1a7c8e,_0x436fd9=_0x420726[_0x28b8f1(0x10b)][_0x28b8f1(0x265)]();return _0x436fd9[_0x28b8f1(0x13c)](_0x2142f9[_0x28b8f1(0x265)]())&&(_0x436fd9['includes'](_0x28b8f1(0x1a1))&&_0x436fd9[_0x28b8f1(0x13c)](_0x28b8f1(0x15a))||_0x436fd9[_0x28b8f1(0x13c)](_0x28b8f1(0x1fe))&&_0x436fd9[_0x28b8f1(0x13c)]('order'));})[_0x1a7c8e(0x214)](_0x1a7c8e(0x255))['value']();return _0x561dfc['forEach'](_0x1b1e95=>{const _0x5cee67=_0x1a7c8e,_0x4bf8d7=_0x1b1e95[_0x5cee67(0x10b)]['includes'](_0x5cee67(0x1bb))?_0x5cee67(0x1bb):_0x5cee67(0x1df),_0x21080e=/#([0-9]|\.)+\s/i,_0x2facbf=Number(_0x21080e[_0x5cee67(0x25a)](_0x1b1e95['event'])[0x0]['slice'](0x1)),_0x2edae9=/@([0-9]|\.)+$/i,_0x4cfa42=Number(_0x2edae9[_0x5cee67(0x25a)](_0x1b1e95[_0x5cee67(0x10b)])[0x0]['slice'](0x1));_0x1b90d3[_0x5cee67(0x14e)]({'datetime':_0x1b1e95['time'],'coin':symbolToCoin(_0x2142f9),'symbol':_0x2142f9,'side':_0x4bf8d7,'amount':_0x2facbf,'filled':_0x2facbf,'price':_0x4cfa42});}),_0x1b90d3;}async function getAllOrders(_0x6d9e51,_0x2a6a13){const _0x2bef92=_0x40a141;let _0x80562a=[];while(_0x2a6a13<exchange[_0x2bef92(0x259)]()){const _0x3d72fc=0x1f4,_0x375b3b=await exchange['fetchClosedOrders'](_0x6d9e51,_0x2a6a13,_0x3d72fc);if(_0x375b3b[_0x2bef92(0x10c)])_0x2a6a13=_0x375b3b[_0x375b3b[_0x2bef92(0x10c)]-0x1][_0x2bef92(0x11d)]+0x1,_0x80562a=_0x80562a[_0x2bef92(0x170)](_0x375b3b);else break;}return _0x80562a;}async function validate24hChanges(){const _0x2b9dfb=_0x40a141;for(const _0x4f2245 of currentCoins){if(_0x4f2245[_0x2b9dfb(0x165)]!=config[_0x2b9dfb(0x1f7)]){let _0x20aa16;_0x4f2245['reverse']?_0x20aa16=formatResult((0x1/(global['change'][noslash(_0x4f2245[_0x2b9dfb(0x104)])]/0x64+0x1)-0x1)*0x64,0x3):_0x20aa16=global[_0x2b9dfb(0x1b4)][noslash(_0x4f2245['symbol'])],_0x20aa16<config[_0x2b9dfb(0x1bc)]&&(logHistory(_0x2b9dfb(0x22e),_0x4f2245['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x20aa16+'%'),logHistory(_0x2b9dfb(0x22e),_0x2b9dfb(0x225)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3d8b05,_0x12f528){const _0x549319=_0x40a141;if(!_0x3d8b05)return!![];const _0x7974c1=_0x12f528['split']('.'),_0x5d7506=_0x3d8b05[_0x549319(0x260)]('.');for(var _0x551210=0x0;_0x551210<_0x5d7506[_0x549319(0x10c)];_0x551210++){const _0x4573a6=~~_0x5d7506[_0x551210],_0x551c10=~~_0x7974c1[_0x551210];if(_0x4573a6<_0x551c10)return!![];if(_0x4573a6>_0x551c10)return![];}return![];}async function oneTimeMigration(){const _0x2b210d=_0x40a141;let _0x5cc59a=dbLogs[_0x2b210d(0x161)](_0x2b210d(0x1b0))[_0x2b210d(0x194)]();if(isOlderVersion(_0x5cc59a,_0x2b210d(0x21c))){let _0x12e47c=[];const _0x336726=dbLogs[_0x2b210d(0x161)](_0x2b210d(0x1f6))[_0x2b210d(0x194)]();_0x336726['forEach'](_0x2a1468=>{const _0x36b31c=_0x2b210d;_0x12e47c[_0x36b31c(0x14e)]({'time':_0x2a1468[_0x36b31c(0x255)],'type':_0x2a1468[_0x36b31c(0x184)],'event':_0x2a1468['event']});}),dbLogs[_0x2b210d(0x161)](_0x2b210d(0x1f6))['assign'](_0x12e47c)[_0x2b210d(0x257)]();}let _0x4f83b5=dbConfig[_0x2b210d(0x161)](_0x2b210d(0x1b0))[_0x2b210d(0x194)]();if(isOlderVersion(_0x4f83b5,_0x2b210d(0x21c))){let _0x484d8a=dbConfig[_0x2b210d(0x161)](_0x2b210d(0x256))[_0x2b210d(0x20b)]({'botID':botID})[_0x2b210d(0x194)]();if(_0x484d8a){let _0xc6990e=[];_0x484d8a['portfolio'][_0x2b210d(0x241)](_0x5abaef=>{const _0x456bc1=_0x2b210d;_0xc6990e[_0x456bc1(0x14e)]({'coin':_0x5abaef[_0x456bc1(0x165)],'number':_0x5abaef[_0x456bc1(0x144)],'price':_0x5abaef['startprice']}),delete _0x5abaef[_0x456bc1(0x144)],delete _0x5abaef[_0x456bc1(0x154)];});if(_0xc6990e[_0x2b210d(0x10c)]!==0x0)fs[_0x2b210d(0x10e)](configbackuppath+('starting-balance-'+botID+_0x2b210d(0x16e)),JSON['stringify'](_0xc6990e,null,0x4),function(_0x3fe87b){if(_0x3fe87b){}});const _0x5245b2=(_0x5072f1,_0x12b997)=>{const _0x15b22f=_0x2b210d;let _0x22f58b=[];_0x12b997['forEach'](_0x4848a9=>{const _0x39127e=_0x55ad,_0x1f1203=_0x5072f1[_0x39127e(0x20b)](_0x31cfbf=>_0x31cfbf[_0x39127e(0x165)]==_0x4848a9['coin']);if(!_0x1f1203)_0x22f58b[_0x39127e(0x14e)](_0x4848a9);});let _0xc52d8=[];return _0x5072f1[_0x15b22f(0x241)](_0xefd54b=>{const _0x2f91fc=_0x15b22f,_0x213e50=_0x12b997[_0x2f91fc(0x20b)](_0x199b34=>_0x199b34[_0x2f91fc(0x165)]==_0xefd54b[_0x2f91fc(0x165)]);if(!_0x213e50||_0x213e50[_0x2f91fc(0x193)]==0x0&&_0xefd54b['number']!=0x0)_0xc52d8[_0x2f91fc(0x14e)](_0xefd54b);}),{'missingDay1':_0x22f58b,'notInDay2':_0xc52d8};},_0x4a43ce=dbPerformance[_0x2b210d(0x161)]('data')['cloneDeep']()[_0x2b210d(0x194)]();if(_0x4a43ce[_0x2b210d(0x10c)]>0x1){const {missingDay1:_0x181a24,notInDay2:_0xf4561}=_0x5245b2(_0xc6990e,_0x4a43ce[0x1][_0x2b210d(0x150)]);_0xc6990e=[..._0xc6990e,..._0x181a24],_0xf4561[_0x2b210d(0x241)](_0x5430a0=>{const _0x20b76e=_0x2b210d;let _0x1b7719=_0xc6990e[_0x20b76e(0x15b)](_0x127f64=>_0x127f64[_0x20b76e(0x165)]==_0x5430a0[_0x20b76e(0x165)]);_0x1b7719!=-0x1&&_0xc6990e[_0x20b76e(0x18b)](_0x1b7719,0x1);});}_0xc6990e['sort']((_0x4064f2,_0x3af28b)=>_0x4064f2[_0x2b210d(0x165)]>_0x3af28b[_0x2b210d(0x165)]?0x1:_0x3af28b[_0x2b210d(0x165)]>_0x4064f2[_0x2b210d(0x165)]?-0x1:0x0);let _0x2f342f=[{'date':_0x484d8a[_0x2b210d(0x13a)],'changes':_0xc6990e}];_0x4a43ce['length']>0x2&&_0x4a43ce[_0x2b210d(0x241)]((_0x48a538,_0xee20b2)=>{const _0x10dcf6=_0x2b210d;if(_0xee20b2>0x0&&_0xee20b2<_0x4a43ce[_0x10dcf6(0x10c)]-0x1){const {missingDay1:_0x349150,notInDay2:_0x48d58f}=_0x5245b2(_0x4a43ce[_0xee20b2][_0x10dcf6(0x150)],_0x4a43ce[_0xee20b2+0x1][_0x10dcf6(0x150)]);_0xc6990e=[],(_0x349150[_0x10dcf6(0x10c)]!=0x0||_0x48d58f[_0x10dcf6(0x10c)]!=0x0)&&(_0x349150[_0x10dcf6(0x10c)]!=0x0&&_0xc6990e['push'](..._0x349150),_0x48d58f[_0x10dcf6(0x10c)]!=0x0&&(_0x48d58f['forEach'](_0x38d996=>{const _0x5d4fe7=_0x10dcf6;_0x38d996[_0x5d4fe7(0x193)]=-_0x38d996[_0x5d4fe7(0x193)];}),_0xc6990e['push'](..._0x48d58f)),_0xc6990e['sort']((_0x452925,_0x28de6f)=>_0x452925[_0x10dcf6(0x165)]>_0x28de6f['coin']?0x1:_0x28de6f[_0x10dcf6(0x165)]>_0x452925[_0x10dcf6(0x165)]?-0x1:0x0),_0x2f342f[_0x10dcf6(0x14e)]({'date':_0x4a43ce[_0xee20b2+0x1][_0x10dcf6(0xf8)],'changes':_0xc6990e}));}}),dbConfig[_0x2b210d(0x161)](_0x2b210d(0x256))['find']({'botID':botID})[_0x2b210d(0x1d0)]({..._0x484d8a,'liquidity':_0x2f342f})[_0x2b210d(0x257)]();}}if(isOlderVersion(_0x4f83b5,'2.6.0')){let _0x49c3ac=dbConfig[_0x2b210d(0x161)](_0x2b210d(0x256))[_0x2b210d(0x20b)]({'botID':botID})[_0x2b210d(0x194)]();if(_0x49c3ac){const _0xdd3eab=_0x49c3ac[_0x2b210d(0x208)],_0x4579a5=_0xdd3eab?capitalize(_0xdd3eab):_0x2b210d(0xff);dbConfig['get'](_0x2b210d(0x256))[_0x2b210d(0x20b)]({'botID':botID})[_0x2b210d(0x1d0)]({'exchange':_0x4579a5})[_0x2b210d(0x257)]();}}let _0x358cd9=dbPerformance['get'](_0x2b210d(0x1b0))['value']();isOlderVersion(_0x358cd9,_0x2b210d(0x21c))&&setStartDatePerformance();let _0xfea7a7=dbCoinResults[_0x2b210d(0x161)](_0x2b210d(0x1b0))[_0x2b210d(0x194)]();if(isOlderVersion(_0xfea7a7,_0x2b210d(0x1ae))){let _0x570936=dbCoinResults[_0x2b210d(0x161)](_0x2b210d(0x150))['value']();if(_0x570936[_0x2b210d(0x10c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x14740f=_0x40a141;dbConfig[_0x14740f(0x25c)](_0x14740f(0x1b0),serverversion)[_0x14740f(0x257)](),dbPerformance['set'](_0x14740f(0x1b0),serverversion)[_0x14740f(0x257)](),dbLogs[_0x14740f(0x25c)](_0x14740f(0x1b0),serverversion)[_0x14740f(0x257)](),dbCoinResults[_0x14740f(0x25c)]('version',serverversion)[_0x14740f(0x257)]();}function getConfiguration(_0x580344){const _0x452e42=_0x40a141;let _0x1a7709=dbConfig[_0x452e42(0x161)](_0x452e42(0x256))[_0x452e42(0x20b)]({'botID':_0x580344})[_0x452e42(0x194)]();if(_0x1a7709){let _0x2d53dd=![];typeof _0x1a7709[_0x452e42(0x17a)]==_0x452e42(0x253)&&(_0x1a7709={..._0x1a7709,'threshold':Number(_0x1a7709['threshold'])},_0x2d53dd=!![]),_0x1a7709[_0x452e42(0x1bc)]==null&&(_0x1a7709={..._0x1a7709,'change24h':-0x14},_0x2d53dd=!![]),!_0x1a7709[_0x452e42(0x201)]&&(_0x1a7709={..._0x1a7709,'fiat':_0x452e42(0x23f)},_0x2d53dd=!![]),!_0x1a7709[_0x452e42(0x20f)]&&(_0x1a7709={..._0x1a7709,'onepagemode':settings[_0x452e42(0x20f)]},_0x2d53dd=!![]),_0x2d53dd&&(_0x1a7709={'botID':_0x1a7709[_0x452e42(0x22a)],'exchange':_0x1a7709[_0x452e42(0x208)],'apiKey':_0x1a7709[_0x452e42(0x114)],'apiSecret':_0x1a7709[_0x452e42(0x234)],'basecoin':_0x1a7709[_0x452e42(0x1f7)],'botname':_0x1a7709['botname'],'showname':_0x1a7709[_0x452e42(0x135)],'threshold':_0x1a7709[_0x452e42(0x17a)],'ordertype':_0x1a7709[_0x452e42(0x1f5)],'timeout':_0x1a7709[_0x452e42(0x14f)],'fiat':_0x1a7709[_0x452e42(0x201)],'startdate':_0x1a7709['startdate'],'recreate':_0x1a7709['recreate'],'timeshift':_0x1a7709[_0x452e42(0x15e)],'onepagemode':_0x1a7709[_0x452e42(0x20f)],'headless':_0x1a7709[_0x452e42(0x261)],'cooldown':_0x1a7709[_0x452e42(0x187)],'change24h':_0x1a7709[_0x452e42(0x1bc)],'emojibuy':_0x1a7709[_0x452e42(0x169)],'emojisell':_0x1a7709[_0x452e42(0x1b6)],'portfolio':_0x1a7709[_0x452e42(0x17e)],'liquidity':_0x1a7709[_0x452e42(0x19d)],'openOrders':_0x1a7709[_0x452e42(0x1f3)]},dbConfig[_0x452e42(0x161)](_0x452e42(0x256))[_0x452e42(0x12b)]()[_0x452e42(0x257)](),dbConfig['get'](_0x452e42(0x256))[_0x452e42(0x14e)](_0x1a7709)[_0x452e42(0x257)]());}else _0x1a7709={'botID':_0x580344,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x452e42(0x190)+_0x580344,'showname':![],'threshold':0x3,'ordertype':_0x452e42(0x1a1),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x452e42(0x15e)],'onepagemode':settings[_0x452e42(0x20f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1a7709;}function emittedConfiguration(){const _0x93e07d=_0x40a141;let _0x455c20;if(config['apiKey']=='')_0x455c20={...config,'configstate':'initial'};else config[_0x93e07d(0x114)]==_0x93e07d(0x136)?_0x455c20={...config,'configstate':'recovery'}:_0x455c20={...config,'apiKey':_0x93e07d(0x160),'apiSecret':_0x93e07d(0x160)};return _0x455c20;}function getSettings(){const _0x23f923=_0x40a141;return dbSettings[_0x23f923(0x161)]('settings')[_0x23f923(0x194)]();}function getSecure(){const _0x2a57b0=_0x40a141;return dbSecure[_0x2a57b0(0x161)](_0x2a57b0(0x22d))[_0x2a57b0(0x194)]()||{};}function updateTimeshift(_0x3eecf2){const _0x52079d=_0x40a141;let _0x445239=dbConfig[_0x52079d(0x161)](_0x52079d(0x256))[_0x52079d(0x20b)]({'botID':botID})[_0x52079d(0x194)]();_0x445239&&dbConfig[_0x52079d(0x161)](_0x52079d(0x256))[_0x52079d(0x20b)]({'botID':botID})[_0x52079d(0x1d0)]({'timeshift':_0x3eecf2})[_0x52079d(0x257)](),config[_0x52079d(0x15e)]=_0x3eecf2,proxyEmit(_0x52079d(0x23d),emittedConfiguration());}function _0x55ad(_0x47e8cd,_0x14fea2){const _0x3a482c=_0x5bff();return _0x55ad=function(_0x18c3f1,_0x8fa9e6){_0x18c3f1=_0x18c3f1-0xf3;let _0x5bff5b=_0x3a482c[_0x18c3f1];return _0x5bff5b;},_0x55ad(_0x47e8cd,_0x14fea2);}function updateOnepagemode(_0x11fd30){const _0x29e7b3=_0x40a141;let _0x3185ac=dbConfig[_0x29e7b3(0x161)](_0x29e7b3(0x256))[_0x29e7b3(0x20b)]({'botID':botID})[_0x29e7b3(0x194)]();_0x3185ac&&dbConfig[_0x29e7b3(0x161)](_0x29e7b3(0x256))['find']({'botID':botID})[_0x29e7b3(0x1d0)]({'onepagemode':_0x11fd30})[_0x29e7b3(0x257)](),config['onepagemode']=_0x11fd30,proxyEmit(_0x29e7b3(0x23d),emittedConfiguration());}async function storeConfiguration(_0x43d496){const _0x514995=_0x40a141;logger[_0x514995(0x17d)](_0x514995(0x1c9)),blockTransactionDetection=!![],logger[_0x514995(0x17d)](_0x514995(0x22f));let _0x209f33=[],_0x28a97c=![],_0x90a18c=[];_0x43d496[_0x514995(0x17e)][_0x514995(0x241)](_0x19fecf=>{const _0x3ba849=_0x514995;if(!_0x19fecf[_0x3ba849(0x127)]&&_0x19fecf[_0x3ba849(0x165)]!=_0x43d496[_0x3ba849(0x1f7)])_0x90a18c['push'](_0x19fecf[_0x3ba849(0x104)]);}),_0x90a18c[_0x514995(0x241)](_0x5b805b=>{const _0x2c9264=_0x514995,_0x288e8f=watchedSymbols[_0x2c9264(0x13c)](_0x5b805b);!_0x288e8f&&_0x209f33['push'](_0x5b805b);});_0x209f33[_0x514995(0x10c)]>0x0?_0x28a97c=!![]:currentCoins[_0x514995(0x241)](_0x49fdc0=>{const _0x41542f=_0x514995;if(_0x49fdc0[_0x41542f(0x165)]!=config[_0x41542f(0x1f7)]){const _0x1e3ede=_0x90a18c[_0x41542f(0x20b)](_0x3f9a24=>_0x3f9a24==_0x49fdc0[_0x41542f(0x104)]);!_0x1e3ede&&(_0x28a97c=!![]);}});let _0x189670=dbConfig[_0x514995(0x161)]('bot')['find']({'botID':botID})[_0x514995(0x194)]();_0x43d496={..._0x43d496,'apiKey':crypt[_0x514995(0x21d)](secure['privateKey'],_0x43d496[_0x514995(0x114)])[_0x514995(0x1dc)],'apiSecret':crypt[_0x514995(0x21d)](secure[_0x514995(0x23e)],_0x43d496[_0x514995(0x234)])[_0x514995(0x1dc)]};let _0x33b818=![];_0x189670?(_0x43d496[_0x514995(0x114)]==_0x514995(0x160)?_0x43d496[_0x514995(0x114)]=config['apiKey']:_0x33b818=!![],_0x43d496[_0x514995(0x234)]==_0x514995(0x160)?_0x43d496[_0x514995(0x234)]=config[_0x514995(0x234)]:_0x33b818=!![],dbConfig[_0x514995(0x161)](_0x514995(0x256))['find']({'botID':botID})[_0x514995(0x1d0)](_0x43d496)[_0x514995(0x257)]()):(dbConfig[_0x514995(0x161)](_0x514995(0x256))[_0x514995(0x14e)](_0x43d496)[_0x514995(0x257)](),_0x33b818=!![],process[_0x514995(0x217)]({'status':_0x514995(0xfd),'live':'running'},_0xb8a004=>{}));config={..._0x43d496},setStartDatePerformance(),process['send']({'botname':_0x43d496[_0x514995(0x1f9)]},_0x4c96f5=>{}),updateBotManager(),initialPerformanceStored=![],proxyEmit(_0x514995(0x1ac)),await initCoinResults();if(_0x33b818)await reset(_0x209f33,!![]);else{if(_0x28a97c)await reset(_0x209f33,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger['debug'](_0x514995(0x132));}async function storeHeadless(_0x440249){const _0x268478=_0x40a141,_0x168845={...config,'headless':_0x440249[_0x268478(0x261)]};let _0x23b9cc=dbConfig[_0x268478(0x161)]('bot')['find']({'botID':botID})[_0x268478(0x194)]();_0x23b9cc&&dbConfig['get'](_0x268478(0x256))['find']({'botID':botID})[_0x268478(0x1d0)](_0x168845)[_0x268478(0x257)](),config={..._0x168845},updateBotManager(),proxyEmit(_0x268478(0x23d),emittedConfiguration());}async function storeFiat(_0x78a4bd){const _0x10c1c2=_0x40a141,_0x457679={...config,'fiat':_0x78a4bd};let _0x1c5dc8=dbConfig[_0x10c1c2(0x161)](_0x10c1c2(0x256))[_0x10c1c2(0x20b)]({'botID':botID})[_0x10c1c2(0x194)]();_0x1c5dc8&&dbConfig[_0x10c1c2(0x161)](_0x10c1c2(0x256))[_0x10c1c2(0x20b)]({'botID':botID})[_0x10c1c2(0x1d0)](_0x457679)[_0x10c1c2(0x257)](),config={..._0x457679},proxyEmit(_0x10c1c2(0x23d),emittedConfiguration());}function resetHistory(){const _0x28b50c=_0x40a141;logger[_0x28b50c(0x206)](_0x28b50c(0x1e2));try{if(fs[_0x28b50c(0x162)](path['join'](configpath,'bot-'+botID+_0x28b50c(0x1ea))))fs[_0x28b50c(0x254)](path[_0x28b50c(0xf3)](configpath,_0x28b50c(0x199)+botID+'-events.json'));if(fs['existsSync'](path['join'](configpath,_0x28b50c(0x199)+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0x28b50c(0x199)+botID+_0x28b50c(0x195)));if(fs['existsSync'](path['join'](configpath,_0x28b50c(0x199)+botID+_0x28b50c(0x13f))))fs[_0x28b50c(0x254)](path['join'](configpath,_0x28b50c(0x199)+botID+_0x28b50c(0x13f)));}catch(_0x4f95e2){if(_0x4f95e2)logger[_0x28b50c(0x206)](_0x28b50c(0x247),_0x4f95e2);}const _0x9c688f=getDate();let _0x57f553=[];currentCoins[_0x28b50c(0x241)](_0x1716ed=>{const _0x12ec18=_0x28b50c;_0x57f553[_0x12ec18(0x14e)]({'coin':_0x1716ed[_0x12ec18(0x165)],'number':_0x1716ed['number'],'price':_0x1716ed[_0x12ec18(0x119)]});});let _0x449792=dbConfig[_0x28b50c(0x161)]('bot')['find']({'botID':botID})[_0x28b50c(0x194)]();_0x449792&&(dbConfig['get'](_0x28b50c(0x256))[_0x28b50c(0x20b)]({'botID':botID})['assign']({'liquidity':[{'date':_0x9c688f,'changes':_0x57f553}]})['write'](),config[_0x28b50c(0x19d)]=[]),process[_0x28b50c(0x217)]({'stop':_0x28b50c(0x1ed)},_0x4044a6=>{});}function noslash(_0x52ef26){const _0x20a6ca=_0x40a141;return _0x52ef26[_0x20a6ca(0x243)]('/','');}function updateHighestFee(_0x343f9f,_0x34994d){const _0x3b204e=_0x40a141;lastFees[_0x3b204e(0x11b)]=_0x343f9f,lastFees['recent20'][_0x3b204e(0x10c)]===0x14&&lastFees[_0x3b204e(0x163)]['shift'](),lastFees['recent20'][_0x3b204e(0x14e)](_0x34994d),lastFees[_0x3b204e(0x1de)]=Math[_0x3b204e(0x14c)](...lastFees[_0x3b204e(0x163)]);}async function updateNumberCoinsCcxt(_0x2049f1){const _0x84a15e=_0x40a141;logger[_0x84a15e(0x17d)](_0x84a15e(0x17b)+_0x2049f1[_0x84a15e(0x104)]+_0x84a15e(0x21a)+_0x2049f1[_0x84a15e(0x212)]+_0x84a15e(0x21a)+_0x2049f1['id']+'\x20|\x20'+_0x2049f1[_0x84a15e(0x1cd)]);let _0x59a832=_0x2049f1[_0x84a15e(0x212)],_0x212c08=![];currentCoins[_0x84a15e(0x241)](_0x479831=>{const _0x25b97d=_0x84a15e;_0x479831[_0x25b97d(0x104)]==_0x2049f1[_0x25b97d(0x104)]&&(_0x212c08=!![]);});if(!_0x212c08)return;const _0x4d6050=currentCoins[_0x84a15e(0x20b)](_0x296c16=>_0x296c16[_0x84a15e(0x104)]==_0x2049f1[_0x84a15e(0x104)]),_0x53da76=_0x2b0c3e=>{const _0x26c357=_0x84a15e;if(_0x4d6050)_0x4d6050[_0x26c357(0x248)]=_0x2b0c3e;};if(_0x59a832==_0x84a15e(0x156))_0x53da76(_0x84a15e(0x156));else{if(_0x59a832==_0x84a15e(0x23a)){_0x53da76(_0x84a15e(0x23a));const _0x2a5875=await getCoins();[currentCoins,currentCoinsAll]=_0x2a5875,await getOpenOrders(),handleOpenOrders();}else{if(_0x59a832==_0x84a15e(0x1f2)){logger[_0x84a15e(0x17d)]('1\x20-\x20FILLED:\x20'+_0x2049f1[_0x84a15e(0x104)]+'\x20|\x20'+_0x2049f1[_0x84a15e(0x1fe)]+_0x84a15e(0x21a)+_0x2049f1['id']+_0x84a15e(0x21a)+_0x2049f1[_0x84a15e(0x1cd)]);let _0x5a2174=![];if(lastOrders)lastOrders[_0x84a15e(0x241)](async _0x4d9c2c=>{const _0x1be84e=_0x84a15e;if(_0x4d9c2c[_0x1be84e(0x12c)]==_0x2049f1[_0x1be84e(0x1cd)]){logger[_0x1be84e(0x17d)](_0x1be84e(0x1c2)+_0x2049f1['clientOrderId']),_0x5a2174=!![];if(_0x4d9c2c['filled']==0x0){logger[_0x1be84e(0x17d)](_0x1be84e(0x14d)+_0x2049f1[_0x1be84e(0x1cd)]),_0x4d9c2c[_0x1be84e(0x100)]=_0x2049f1['average'],_0x4d9c2c[_0x1be84e(0x1fe)]=_0x2049f1[_0x1be84e(0x1fe)],_0x4d9c2c[_0x1be84e(0x18c)]={'currency':_0x2049f1[_0x1be84e(0x18c)]?_0x2049f1['fee'][_0x1be84e(0x11b)]:null,'cost':_0x2049f1['fee']?_0x2049f1['fee'][_0x1be84e(0x10d)]:0x0},updateHighestFee(_0x4d9c2c['fee'][_0x1be84e(0x11b)],_0x4d9c2c[_0x1be84e(0x18c)][_0x1be84e(0x10d)]),_0x53da76(_0x1be84e(0x1fe)),await validateOrders();if(lockOrders==ORDERS[_0x1be84e(0x1c3)]){const _0x385bac=await getCoins();[currentCoins,currentCoinsAll]=_0x385bac;}await updateCoinResults(_0x4d9c2c);}}});if(!_0x5a2174){logger[_0x84a15e(0x17d)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x2049f1['id']),_0x53da76(_0x84a15e(0x1fe));const _0x28135d=await getCoins();[currentCoins,currentCoinsAll]=_0x28135d,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x2d3169=JSON['parse'](lastBalances[_0x84a15e(0x17e)]);const _0x2169a8=_0x2d3169[_0x84a15e(0x20b)](_0x53f6e3=>_0x53f6e3[_0x84a15e(0x104)]==_0x2049f1['symbol']);if(_0x2169a8){if(_0x59a832==_0x84a15e(0x156))_0x2169a8[_0x84a15e(0x248)]=_0x2169a8[_0x84a15e(0x248)]==_0x84a15e(0x1fe)?_0x84a15e(0x1fe):'open';else{if(_0x59a832==_0x84a15e(0x23a))_0x2169a8[_0x84a15e(0x248)]=_0x2169a8['orderstatus']==_0x84a15e(0x1fe)?_0x84a15e(0x1fe):_0x84a15e(0x23a);else _0x59a832==_0x84a15e(0x1f2)&&(_0x2169a8[_0x84a15e(0x248)]=_0x84a15e(0x1fe));}}lastBalances={...lastBalances,'portfolio':JSON[_0x84a15e(0x113)](_0x2d3169)},proxyEmit(_0x84a15e(0x16b),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x18494e=_0x40a141;await getOpenOrders();let _0x128944=![];currentCoins[_0x18494e(0x241)](_0xa93947=>{const _0x770673=_0x18494e;_0x128944=allOpenOrders['find'](_0x361a08=>_0x361a08[_0x770673(0x104)]==_0xa93947[_0x770673(0x104)]),_0xa93947['orderstatus']=_0x128944?_0x770673(0x156):_0x770673(0x1e4);});}async function getCoins(_0x4b0990=!![],_0x3e1af2=config[_0x40a141(0x1f7)]){const _0x23dccc=_0x40a141;let _0x1940fa,_0x30e4eb=[],_0x28e3bb=[],_0xb7a90c=[],_0x19ea63=[];try{_0x1940fa=await exchange[_0x23dccc(0x24c)](),mybalances=_0x1940fa[_0x23dccc(0x1d2)];for(const [_0x420e80,_0x48ad77]of Object[_0x23dccc(0x268)](mybalances)){_0x19ea63[_0x23dccc(0x14e)](_0x420e80);}if(_0x3e1af2=='')for(const [_0x2dca94,_0x10dab8]of Object['entries'](mybalances)){_0x10dab8['toString']()!=0x0&&_0x28e3bb[_0x23dccc(0x14e)]({'coin':_0x2dca94});}else{let _0x5880a7=![];for(const [_0x18de08,_0x2d8137]of Object[_0x23dccc(0x268)](mybalances)){if(_0x19ea63[_0x23dccc(0x13c)](_0x18de08)){const _0x19d023=config[_0x23dccc(0x17e)][_0x23dccc(0x20b)](_0x57fbed=>_0x57fbed[_0x23dccc(0x165)]==_0x18de08),_0x45b154=_0x18de08+'/'+_0x3e1af2,_0x327853=_0x3e1af2+'/'+_0x18de08,_0x41e655=currentCoins[_0x23dccc(0x20b)](_0x447840=>_0x447840[_0x23dccc(0x165)]==_0x18de08);_0x5880a7=![];if((_0x2d8137[_0x23dccc(0x17f)]()!=0x0||_0x19d023)&&(allSymbols[_0x23dccc(0x13c)](_0x45b154)||_0x18de08==_0x3e1af2))_0x18de08!=_0x3e1af2&&_0x30e4eb[_0x23dccc(0x14e)](_0x45b154),_0x28e3bb[_0x23dccc(0x14e)]({'coin':_0x18de08,'symbol':_0x45b154,'reverse':![],'number':Math['max'](_0x2d8137+(_0x19d023&&_0x19d023[_0x23dccc(0x16d)]||0x0),0x0),'orderstatus':_0x41e655?_0x41e655[_0x23dccc(0x248)]:_0x23dccc(0x1e4)});else(_0x2d8137['toString']()!=0x0||_0x19d023)&&allSymbols[_0x23dccc(0x13c)](_0x327853)&&(_0x18de08!=_0x3e1af2&&_0x30e4eb[_0x23dccc(0x14e)](_0x327853),_0x28e3bb[_0x23dccc(0x14e)]({'coin':_0x18de08,'symbol':_0x327853,'reverse':!![],'number':Math[_0x23dccc(0x14c)](_0x2d8137+(_0x19d023&&_0x19d023[_0x23dccc(0x16d)]||0x0),0x0),'orderstatus':_0x41e655?_0x41e655[_0x23dccc(0x248)]:_0x23dccc(0x1e4)}));}}}}catch(_0x23b773){if(!_0x4b0990)handleErrorNoStop(_0x23b773,_0x23dccc(0x210));else await handleError(_0x23b773,_0x23dccc(0x210));}return _0xb7a90c=cloneDeep(_0x28e3bb),_0x28e3bb=_0x28e3bb[_0x23dccc(0x124)](_0x491e6d=>{const _0x2ad425=_0x23dccc,_0xdb9d78=config['portfolio'][_0x2ad425(0x20b)](_0x49d142=>_0x49d142['coin']==_0x491e6d['coin']);return _0xdb9d78&&!_0xdb9d78['excluded'];}),[_0x28e3bb,_0xb7a90c];}async function getCoinNumber(_0x3a3293){const _0x1d34c5=_0x40a141;let _0x4041f0;try{const _0x301ed6=await exchange[_0x1d34c5(0x24c)]();_0x4041f0=_0x301ed6[_0x1d34c5(0x1d2)][_0x3a3293];}catch(_0x23775c){await handleError(_0x23775c,'getCoinNumber()');}return _0x4041f0;}async function getOpenOrders(){const _0x5576b1=_0x40a141;let _0x1ef5ee;allOpenOrders=[];try{for(const _0x58a4de of config[_0x5576b1(0x17e)]){!_0x58a4de[_0x5576b1(0x127)]&&_0x58a4de[_0x5576b1(0x165)]!=config[_0x5576b1(0x1f7)]&&(_0x1ef5ee=await exchange[_0x5576b1(0x1a3)](_0x58a4de[_0x5576b1(0x104)]),_0x1ef5ee[_0x5576b1(0x10c)]>0x0&&allOpenOrders['push'](_0x1ef5ee[0x0]));}}catch(_0x2c2d99){await handleError(_0x2c2d99,'getOpenOrders()');}}async function handleOpenOrders(_0x7d50e4=0x0){const _0x764da2=_0x40a141;allOpenOrders[_0x764da2(0x10c)]==0x0&&lockOrders==ORDERS[_0x764da2(0x1c3)]&&allOrdersPlaced&&(_0x7d50e4==0x0?(logger[_0x764da2(0x17d)]('1\x20-\x20Handle\x20open\x20orders'),_0x7d50e4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x764da2(0x17d)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x764da2(0x245))));}async function testAPI(_0x4e0eb0){const _0x585daf=_0x40a141,_0x3937ca=ccxt[_0x4e0eb0['exchange'][_0x585daf(0x265)]()],_0x4d6dc6=new _0x3937ca({'apiKey':_0x4e0eb0[_0x585daf(0x114)],'secret':_0x4e0eb0[_0x585daf(0x234)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});try{await _0x4d6dc6[_0x585daf(0x252)]();}catch(_0xeee895){throw _0xeee895;}}function cloneDeep(_0x192247){return JSON['parse'](JSON['stringify'](_0x192247));}async function getPortfolio(_0xa430cb){const _0x18efa3=_0x40a141;let _0x1342d5=[],_0x668a13=[],_0x27fcf7=[],_0x2e07b3;if(_0xa430cb[_0x18efa3(0x114)]!==_0x18efa3(0x160)||_0xa430cb[_0x18efa3(0x234)]!==_0x18efa3(0x160)){if(config['exchange']){if(_0xa430cb['apiKey']==_0x18efa3(0x160))_0xa430cb[_0x18efa3(0x114)]=config[_0x18efa3(0x114)];if(_0xa430cb[_0x18efa3(0x234)]=='************')_0xa430cb[_0x18efa3(0x234)]=config[_0x18efa3(0x234)];try{await testAPI(_0xa430cb);}catch(_0x534186){if(_0x534186[_0x18efa3(0x17f)]()['includes']('AuthenticationError')){logger[_0x18efa3(0x17d)](_0x18efa3(0x1ad)),proxyEmit(_0x18efa3(0x17e),![]);return;}else{handleError(_0x534186,_0x18efa3(0x196));return;}}}await initExchange(_0xa430cb['exchange'],_0xa430cb['apiKey'],_0xa430cb[_0x18efa3(0x234)]);try{await loadSymbols(_0xa430cb[_0x18efa3(0x208)],!![]);}catch(_0x4c6986){if(_0x4c6986[_0x18efa3(0x17f)]()[_0x18efa3(0x13c)](_0x18efa3(0x19a))){proxyEmit('portfolio',![]);return;}else{handleError(_0x4c6986,_0x18efa3(0x145));return;}}const _0x48dbce=await getCoins(![],_0xa430cb[_0x18efa3(0x1f7)]);_0x27fcf7=cloneDeep(_0x48dbce[0x1]);}else _0x27fcf7=cloneDeep(currentCoinsAll);if(_0xa430cb[_0x18efa3(0x1f7)]=='')proxyEmit(_0x18efa3(0x17e),_0x27fcf7);else{_0x27fcf7[_0x18efa3(0x241)](_0xf4348d=>{const _0x1b4110=_0x18efa3;if(_0xf4348d['coin']!=_0xa430cb[_0x1b4110(0x1f7)])_0x1342d5[_0x1b4110(0x14e)](_0xf4348d[_0x1b4110(0x104)]);});try{_0x668a13=await exchange[_0x18efa3(0x223)](_0x1342d5);}catch(_0xef5c88){if(_0xef5c88[_0x18efa3(0x17f)]()['includes'](_0x18efa3(0x19a))){proxyEmit(_0x18efa3(0x17e),![]);return;}else{handleError(_0xef5c88,'getPortfolio(2)');return;}}_0x27fcf7[_0x18efa3(0x241)](_0x1bed7e=>{const _0x2eb6bc=_0x18efa3;_0x1bed7e['coin']!=_0xa430cb[_0x2eb6bc(0x1f7)]?_0x2e07b3=_0x1bed7e[_0x2eb6bc(0x1d9)]?0x1/_0x668a13[_0x1bed7e['symbol']][_0x2eb6bc(0x119)]:_0x668a13[_0x1bed7e[_0x2eb6bc(0x104)]][_0x2eb6bc(0x119)]:_0x2e07b3=0x1,_0x1bed7e[_0x2eb6bc(0x100)]=formatResult(_0x2e07b3,0x8);}),proxyEmit(_0x18efa3(0x17e),_0x27fcf7);}}function checkMinimums(_0x5f0b5d){const _0xdfc847=_0x40a141;let _0x49810d=!![];const _0x413b5d=!_0x5f0b5d[_0xdfc847(0x1d9)]?markets[_0x5f0b5d['symbol']][_0xdfc847(0x24d)][_0xdfc847(0x1f1)]['min']:markets[_0x5f0b5d['symbol']][_0xdfc847(0x24d)][_0xdfc847(0x10d)][_0xdfc847(0x202)],_0x1d309b=!_0x5f0b5d[_0xdfc847(0x1d9)]?markets[_0x5f0b5d[_0xdfc847(0x104)]][_0xdfc847(0x24d)][_0xdfc847(0x10d)]['min']:markets[_0x5f0b5d['symbol']][_0xdfc847(0x24d)]['amount'][_0xdfc847(0x202)],_0x4170f3=markets[_0x5f0b5d['symbol']]['precision'][_0xdfc847(0x1f1)];_0x5f0b5d[_0xdfc847(0x1e0)]=formatResultTruncate(_0x5f0b5d[_0xdfc847(0x1e0)],_0x4170f3);if(Math[_0xdfc847(0x1ff)](_0x5f0b5d[_0xdfc847(0x1e0)])<_0x413b5d)_0x49810d=![];if(Math['abs'](_0x5f0b5d[_0xdfc847(0x1e0)])*_0x5f0b5d[_0xdfc847(0x119)]<_0x1d309b)_0x49810d=![];if(_0x5f0b5d['side']=='sell'){let _0x255ee5=config[_0xdfc847(0x17e)][_0xdfc847(0x20b)](_0x51518e=>_0x51518e[_0xdfc847(0x165)]==_0x5f0b5d[_0xdfc847(0x165)]);if(_0x255ee5[_0xdfc847(0x16d)]>0x0){if(Math[_0xdfc847(0x1ff)](_0x5f0b5d['trade'])>_0x5f0b5d[_0xdfc847(0x193)]-_0x255ee5[_0xdfc847(0x16d)])_0x49810d=![];}else{if(Math[_0xdfc847(0x1ff)](_0x5f0b5d['trade'])>_0x5f0b5d[_0xdfc847(0x193)])_0x49810d=![];}}if(_0x5f0b5d[_0xdfc847(0x1fa)]==_0xdfc847(0x1df)){let _0x406aba=config[_0xdfc847(0x17e)][_0xdfc847(0x20b)](_0x47bbf0=>_0x47bbf0[_0xdfc847(0x165)]==config[_0xdfc847(0x1f7)]),_0x3802c4=currentCoins[_0xdfc847(0x20b)](_0x4ea72e=>_0x4ea72e[_0xdfc847(0x165)]==config[_0xdfc847(0x1f7)]);if(_0x406aba[_0xdfc847(0x16d)]>0x0){if(Math[_0xdfc847(0x1ff)](_0x5f0b5d[_0xdfc847(0x1e0)])*_0x5f0b5d[_0xdfc847(0x119)]>_0x3802c4[_0xdfc847(0x193)]-_0x406aba[_0xdfc847(0x16d)])_0x49810d=![];}else{if(Math[_0xdfc847(0x1ff)](_0x5f0b5d[_0xdfc847(0x1e0)])*_0x5f0b5d[_0xdfc847(0x119)]>_0x3802c4[_0xdfc847(0x193)])_0x49810d=![];}}return _0x49810d;}async function getBalances(){const _0x18b4c6=_0x40a141;let _0x4b07a0=0x0,_0x5b3adf;const _0x5700cf=config[_0x18b4c6(0x17a)];if(config[_0x18b4c6(0x261)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x18b4c6(0x241)](_0x3baf39=>{const _0x1c3824=_0x18b4c6;if(_0x3baf39['coin']!=config[_0x1c3824(0x1f7)]){let _0x3efa27=global[_0x1c3824(0x1a9)][noslash(_0x3baf39[_0x1c3824(0x104)])];_0x5b3adf=_0x3baf39[_0x1c3824(0x1d9)]?0x1/_0x3efa27:_0x3efa27;}else _0x5b3adf=0x1;let _0x1de623=_0x3baf39[_0x1c3824(0x193)]*_0x5b3adf;_0x4b07a0+=_0x1de623,_0x3baf39[_0x1c3824(0x119)]=formatResult(Number(_0x5b3adf),0x8),_0x3baf39['value']=_0x1de623;}),currentCoins['forEach'](_0x314a15=>{const _0x2405d2=_0x18b4c6;let _0x3eb2db=config[_0x2405d2(0x17e)][_0x2405d2(0x20b)](_0x406c7c=>_0x406c7c['coin']==_0x314a15['coin']),_0xfd8ef1=Number(_0x3eb2db['distribution']),_0x2e48e4=_0x314a15[_0x2405d2(0x194)]/_0x4b07a0*0x64,_0x24fb34=_0xfd8ef1*_0x4b07a0/0x64/_0x314a15[_0x2405d2(0x119)]-_0x314a15[_0x2405d2(0x193)];_0x314a15['distribution']=formatResult(_0x2e48e4,0x3),_0x314a15[_0x2405d2(0x168)]=formatResult(_0xfd8ef1,0x3),_0x314a15[_0x2405d2(0x1e0)]=formatResult(_0x24fb34,0x8),_0x314a15['side']='',_0x314a15[_0x2405d2(0x198)]=![];if(_0x314a15[_0x2405d2(0x165)]!=config['basecoin']){if(_0x314a15[_0x2405d2(0xfc)]>_0xfd8ef1)_0x314a15[_0x2405d2(0x1fa)]=_0x2405d2(0x1bb),_0x314a15['valid']=checkMinimums(_0x314a15);else _0x314a15[_0x2405d2(0xfc)]<_0xfd8ef1&&(_0x314a15['side']='buy',_0x314a15[_0x2405d2(0x198)]=checkMinimums(_0x314a15));}_0x314a15['delta']=_0x314a15[_0x2405d2(0xfc)]/_0x314a15[_0x2405d2(0x168)]-0x1;if(_0x314a15[_0x2405d2(0x248)]==_0x2405d2(0x1fe)||_0x314a15['orderstatus']==_0x2405d2(0x23a))_0x314a15[_0x2405d2(0x248)]=_0x2405d2(0x1e4);}),currentCoins['sort']((_0x21caff,_0x18874b)=>_0x21caff[_0x18b4c6(0x1f0)]<_0x18874b[_0x18b4c6(0x1f0)]?0x1:_0x18874b['delta']<_0x21caff['delta']?-0x1:0x0);const _0xc15e8c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xc15e8c[_0x18b4c6(0x159)],'usd':_0xc15e8c[_0x18b4c6(0x120)],'portfolio':JSON[_0x18b4c6(0x113)](currentCoins),'threshold':_0x5700cf},proxyEmit(_0x18b4c6(0x16b),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x18b4c6(0x261)])headlessMode({'portfolio':currentCoins,'threshold':_0x5700cf});else{if(lockOrders==ORDERS[_0x18b4c6(0x1c8)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5700cf});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4e98e8=getNormalizedPerformance();getStartingBalances(_0x4e98e8),emitPerformance(_0x4e98e8);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x6f40f0=getNormalizedPerformance();emitPerformance(_0x6f40f0),getStartingBalances(_0x6f40f0),logger['debug'](_0x18b4c6(0x131));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1e0af0=_0x40a141;if(!lastBalances)return;let _0x210fe2=[],_0x46d0ac,_0x4bed8b=JSON[_0x1e0af0(0x158)](lastBalances[_0x1e0af0(0x17e)]);_0x4bed8b['sort']((_0x525cf6,_0x1a8184)=>_0x525cf6[_0x1e0af0(0x165)]>_0x1a8184[_0x1e0af0(0x165)]?0x1:_0x1a8184[_0x1e0af0(0x165)]>_0x525cf6['coin']?-0x1:0x0),_0x4bed8b[_0x1e0af0(0x241)](_0x2fc616=>{const _0x3588bb=_0x1e0af0;let _0x5da88a={'coin':_0x2fc616['coin'],'number':_0x2fc616['number'],'price':_0x2fc616[_0x3588bb(0x119)]};_0x210fe2['push'](_0x5da88a);});const _0x546d6a=await getFiat();_0x46d0ac={'date':lastBalances[_0x1e0af0(0x255)][_0x1e0af0(0x260)]('\x20')[0x0],'eur':_0x546d6a['eur'],'usd':_0x546d6a[_0x1e0af0(0x120)],'coins':_0x210fe2};let _0x3ab966=dbPerformance[_0x1e0af0(0x161)](_0x1e0af0(0x109))[_0x1e0af0(0x20b)]({'date':_0x46d0ac['date']})[_0x1e0af0(0x194)]();_0x3ab966?_0x46d0ac['date']!=config[_0x1e0af0(0x13a)]&&dbPerformance[_0x1e0af0(0x161)]('data')['find']({'date':_0x46d0ac[_0x1e0af0(0xf8)]})[_0x1e0af0(0x1d0)](_0x46d0ac)[_0x1e0af0(0x257)]():dbPerformance[_0x1e0af0(0x161)](_0x1e0af0(0x109))[_0x1e0af0(0x14e)](_0x46d0ac)[_0x1e0af0(0x257)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x208e3c=_0x40a141;let _0x751ab=[];if(dbPerformance[_0x208e3c(0x185)]('data')[_0x208e3c(0x194)]()){let _0x7a9cc3=dbPerformance[_0x208e3c(0x161)](_0x208e3c(0x109))[_0x208e3c(0x102)]()[_0x208e3c(0x214)](_0x208e3c(0xf8))['value'](),_0x45dd76=[...config[_0x208e3c(0x19d)]];_0x45dd76[_0x208e3c(0x215)]((_0x3b7ef0,_0x1b6b90)=>_0x3b7ef0[_0x208e3c(0xf8)]>_0x1b6b90[_0x208e3c(0xf8)]?-0x1:_0x1b6b90[_0x208e3c(0xf8)]>_0x3b7ef0[_0x208e3c(0xf8)]?0x1:0x0);let _0x3fbe7c=0x1,_0x10dfa5=[],_0x1603da=0x0;_0x7a9cc3[_0x208e3c(0x1a5)]()[_0x208e3c(0x1d9)]()['forEach']((_0x5d0b08,_0x56cbe7)=>{const _0x2a1460=_0x208e3c;if(_0x45dd76[_0x1603da]){if(_0x7a9cc3[_0x7a9cc3['length']-_0x56cbe7]&&_0x45dd76[_0x1603da][_0x2a1460(0xf8)]==_0x7a9cc3[_0x7a9cc3[_0x2a1460(0x10c)]-_0x56cbe7]['date']){if(_0x56cbe7<_0x7a9cc3[_0x2a1460(0x10c)]){let _0x49b21d=0x0,_0x15c2c1=0x0;_0x7a9cc3[_0x7a9cc3[_0x2a1460(0x10c)]-_0x56cbe7][_0x2a1460(0x150)]['forEach'](_0x4c3286=>{const _0x432648=_0x2a1460;_0x15c2c1+=_0x4c3286[_0x432648(0x193)]*_0x4c3286[_0x432648(0x100)];}),_0x45dd76[_0x1603da]['changes'][_0x2a1460(0x241)](_0xd50669=>{const _0x5d75a8=_0x2a1460;_0x49b21d+=_0xd50669[_0x5d75a8(0x193)]*_0xd50669[_0x5d75a8(0x100)];}),_0x3fbe7c*=_0x49b21d/(_0x15c2c1-_0x49b21d)+0x1;}_0x1603da++;}}let _0x4a106c=0x0;_0x5d0b08[_0x2a1460(0x150)][_0x2a1460(0x241)](_0xdf0956=>{_0x4a106c+=_0xdf0956['number']*_0xdf0956['price'];}),_0x10dfa5[_0x7a9cc3[_0x2a1460(0x10c)]-_0x56cbe7-0x1]=_0x4a106c*(_0x3fbe7c-0x1);});let _0x5ddb46=[];_0x45dd76=[...config[_0x208e3c(0x19d)]]||[];let _0x587594=0x0;_0x1603da=0x0,_0x7a9cc3[_0x208e3c(0x241)]((_0xb9f753,_0x36a9ca)=>{const _0x3abcff=_0x208e3c;if(_0x45dd76[_0x1603da]){const _0x24f81d=fns[_0x3abcff(0x158)](_0x45dd76[_0x1603da][_0x3abcff(0xf8)],'yyyy/MM/dd',new Date()),_0x192442=fns[_0x3abcff(0x158)](_0xb9f753[_0x3abcff(0xf8)],'yyyy/MM/dd',new Date());if(fns[_0x3abcff(0x1d6)](_0x24f81d,_0x192442)){let _0x39ef49=0x0;_0x45dd76[_0x1603da][_0x3abcff(0x1b5)]['forEach'](_0x1f2585=>{const _0x30ac3d=_0x3abcff;!_0x5ddb46[_0x1f2585[_0x30ac3d(0x165)]]?_0x5ddb46[_0x1f2585[_0x30ac3d(0x165)]]=_0x1f2585[_0x30ac3d(0x193)]:(_0x39ef49=_0x5ddb46[_0x1f2585[_0x30ac3d(0x165)]],_0x5ddb46[_0x1f2585[_0x30ac3d(0x165)]]+=_0x1f2585[_0x30ac3d(0x193)]);const _0x58111a=_0xb9f753[_0x30ac3d(0x150)][_0x30ac3d(0x20b)](_0xfdd7a2=>_0xfdd7a2[_0x30ac3d(0x165)]==_0x1f2585[_0x30ac3d(0x165)]);(!_0x58111a||_0x58111a[_0x30ac3d(0x193)]==0x0)&&(_0x587594+=(-_0x1f2585['number']-_0x39ef49)*_0x1f2585['price']);}),_0x1603da++;}}_0xb9f753[_0x3abcff(0x150)][_0x3abcff(0x241)]((_0x170eca,_0x103d22)=>{const _0x362eaf=_0x3abcff;_0x5ddb46[_0x170eca[_0x362eaf(0x165)]]&&(_0x170eca[_0x362eaf(0x23b)]=_0x5ddb46[_0x170eca['coin']]);}),_0x751ab[_0x3abcff(0x14e)]({'date':_0xb9f753['date'],'eur':_0xb9f753[_0x3abcff(0x159)],'usd':_0xb9f753['usd'],'offset':_0x10dfa5[_0x36a9ca],'netoffset':_0x587594,'coins':_0xb9f753[_0x3abcff(0x150)]});});}return _0x751ab;}function emitPerformance(_0xecb695){const _0x473e94=_0x40a141;_0xecb695[_0x473e94(0x10c)]!==0x0?(proxyEmit(_0x473e94(0x258),_0xecb695),lastPerformanceEmitted=getDate()):proxyEmit(_0x473e94(0x258),[]);}function getPerf(_0x3dd909,_0x58d751){const _0x5617fa=_0x40a141;let _0x2b8271=0x0,_0x26f181=0x0,_0x595fe9=0x0;_0x3dd909['coins'][_0x5617fa(0x241)](_0x4a7c50=>{const _0x1574a2=_0x5617fa;_0x2b8271+=_0x4a7c50[_0x1574a2(0x193)]*_0x4a7c50[_0x1574a2(0x100)];});_0x58d751&&(_0x2b8271+=_0x3dd909[_0x5617fa(0x16d)]);if(config[_0x5617fa(0x1f7)]===_0x5617fa(0x13e)||config['basecoin']===_0x5617fa(0xf4))_0x26f181=_0x2b8271*_0x3dd909['eur'],_0x595fe9=_0x2b8271*_0x3dd909['usd'];else{if(config[_0x5617fa(0x1f7)]===_0x5617fa(0x123)||config[_0x5617fa(0x1f7)]===_0x5617fa(0x115)||config[_0x5617fa(0x1f7)]===_0x5617fa(0x23f))_0x26f181=_0x2b8271*_0x3dd909[_0x5617fa(0x159)]/_0x3dd909['usd'],_0x595fe9=_0x2b8271;else config[_0x5617fa(0x1f7)]===_0x5617fa(0x1e9)&&(_0x26f181=_0x2b8271,_0x595fe9=_0x2b8271*_0x3dd909[_0x5617fa(0x120)]/_0x3dd909[_0x5617fa(0x159)]);}return[_0x2b8271,_0x26f181,_0x595fe9];}function getKPIs(_0x1e0e33,_0x216c29=_0x40a141(0x1e9)){const _0x3aeff1=_0x40a141,_0x447759=config['basecoin'],_0x5f5001=lastBalances,_0xff789f=currentCoins,_0x196acf=getNormalizedPerformance(),_0x96747d=_0x1e0e33===_0x3aeff1(0x1f7)?_0x447759:_0x1e0e33==='fiat'||_0x1e0e33===_0x3aeff1(0x128)?_0x216c29:_0x3aeff1(0x179)+_0x447759,_0x4f02c0=_0x1e0e33===_0x3aeff1(0x1a8)?_0x3aeff1(0x143):_0x1e0e33===_0x3aeff1(0x128)?_0x3aeff1(0x143):_0x96747d+_0x3aeff1(0x133),_0x758518=_0x1e0e33===_0x3aeff1(0x1a8)||_0x1e0e33===_0x3aeff1(0x128)?_0x3aeff1(0x143):_0x96747d+_0x3aeff1(0x24e);let _0x3d2f69=0x0;_0xff789f[_0x3aeff1(0x241)](_0x11cb55=>{const _0x1cee20=_0x3aeff1;_0x3d2f69+=_0x11cb55[_0x1cee20(0x193)]*_0x11cb55[_0x1cee20(0x119)];});if(_0x1e0e33==='fiat'||_0x1e0e33===_0x3aeff1(0x128)){if(_0x447759===_0x3aeff1(0x13e)||_0x447759===_0x3aeff1(0xf4))_0x3d2f69=_0x3d2f69*(_0x216c29===_0x3aeff1(0x1e9)?_0x5f5001[_0x3aeff1(0x159)]:_0x5f5001[_0x3aeff1(0x120)]);else{if(_0x447759===_0x3aeff1(0x123)||_0x447759===_0x3aeff1(0x115)||_0x447759===_0x3aeff1(0x23f))_0x3d2f69=_0x3d2f69*(_0x216c29===_0x3aeff1(0x1e9)?_0x5f5001['eur']/_0x5f5001[_0x3aeff1(0x120)]:0x1);else _0x447759===_0x3aeff1(0x1e9)&&(_0x3d2f69=_0x3d2f69*(_0x216c29==='EUR'?0x1:_0x5f5001[_0x3aeff1(0x120)]/_0x5f5001[_0x3aeff1(0x159)]));}}let _0x2e4cbd;if(_0x3d2f69!==0x0){if(_0x1e0e33==='basecoin')_0x2e4cbd=(_0x3d2f69/startingBalances[_0x3aeff1(0x1f7)]-0x1)*0x64;else{if(_0x216c29===_0x3aeff1(0x1e9))_0x2e4cbd=(_0x3d2f69/startingBalances[_0x3aeff1(0x159)]-0x1)*0x64;else _0x2e4cbd=(_0x3d2f69/startingBalances[_0x3aeff1(0x120)]-0x1)*0x64;}let _0x2b4257=0x0;if(startingBalances['coins'])_0xff789f[_0x3aeff1(0x241)](_0x18ce02=>{const _0x13a1a1=_0x3aeff1;let _0x522ce8=startingBalances['coins'][_0x13a1a1(0x20b)](_0x4f784e=>_0x4f784e['coin']===_0x18ce02[_0x13a1a1(0x165)]);if(_0x522ce8&&_0x522ce8[_0x13a1a1(0x165)]&&_0x18ce02[_0x13a1a1(0x193)]!==0x0)_0x2b4257+=_0x522ce8[_0x13a1a1(0x193)]*_0x18ce02[_0x13a1a1(0x119)];});let _0x4c5f18=0x0;if(_0x196acf[_0x3aeff1(0x10c)]!==0x0){let _0x33e50a=_0x196acf[_0x196acf[_0x3aeff1(0x10c)]-0x1];_0x4c5f18=_0x33e50a[_0x3aeff1(0x235)];}_0x2b4257-=_0x4c5f18;_0x1e0e33===_0x3aeff1(0x1a8)&&(_0x2e4cbd=(_0x3d2f69-_0x2b4257)/startingBalances['basecoin']*0x64,_0x3d2f69=_0x3d2f69-_0x2b4257);if(_0x1e0e33===_0x3aeff1(0x128)){let _0x2cbe8b=_0x216c29===_0x3aeff1(0x1e9)?startingBalances[_0x3aeff1(0x159)]:startingBalances[_0x3aeff1(0x120)];if(_0x447759===_0x3aeff1(0x13e)||_0x447759===_0x3aeff1(0xf4))_0x2b4257=_0x216c29===_0x3aeff1(0x1e9)?_0x2b4257*_0x5f5001[_0x3aeff1(0x159)]:_0x2b4257*_0x5f5001['usd'];else{if(_0x447759===_0x3aeff1(0x123)||_0x447759==='USDT'||_0x447759===_0x3aeff1(0x23f))_0x2b4257=_0x216c29===_0x3aeff1(0x1e9)?_0x2b4257*_0x5f5001[_0x3aeff1(0x159)]/_0x5f5001[_0x3aeff1(0x120)]:_0x2b4257;else _0x447759===_0x3aeff1(0x1e9)&&(_0x2b4257=_0x216c29===_0x3aeff1(0x1e9)?_0x2b4257:_0x2b4257*_0x5f5001[_0x3aeff1(0x120)]/_0x5f5001[_0x3aeff1(0x159)]);}_0x2e4cbd=(_0x3d2f69-_0x2b4257)/_0x2cbe8b*0x64,_0x3d2f69=_0x3d2f69-_0x2b4257;}if(_0x2e4cbd){if(_0x2e4cbd<0x64)_0x2e4cbd=_0x2e4cbd[_0x3aeff1(0x246)](0x2);else{if(_0x2e4cbd<0x3e8)_0x2e4cbd=_0x2e4cbd[_0x3aeff1(0x246)](0x1);else _0x2e4cbd=_0x2e4cbd[_0x3aeff1(0x246)](0x0);}}else _0x2e4cbd=Number('0')[_0x3aeff1(0x246)](0x2);if(_0x3d2f69){if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0.000001)_0x3d2f69=_0x3d2f69['toFixed'](0x2);else{if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0.1)_0x3d2f69=_0x3d2f69['toFixed'](0x6);else{if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0x1)_0x3d2f69=_0x3d2f69[_0x3aeff1(0x246)](0x5);else{if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0xa)_0x3d2f69=_0x3d2f69[_0x3aeff1(0x246)](0x4);else{if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0x64)_0x3d2f69=_0x3d2f69[_0x3aeff1(0x246)](0x3);else{if(Math[_0x3aeff1(0x1ff)](_0x3d2f69)<0x3e8)_0x3d2f69=_0x3d2f69[_0x3aeff1(0x246)](0x2);else _0x3d2f69=_0x3d2f69[_0x3aeff1(0x246)](0x2);}}}}}}else _0x3d2f69=Number('0')[_0x3aeff1(0x246)](0x2);}else _0x2e4cbd=Number('0')[_0x3aeff1(0x246)](0x2);return{'value':_0x3d2f69,'change':_0x2e4cbd,'leftTxt':_0x4f02c0,'rightTxt':_0x758518};}async function getStartingBalances(_0xd3fad8,_0x57492c=!![]){const _0x547b2f=_0x40a141;if(_0xd3fad8[_0x547b2f(0x10c)]!==0x0){const [_0x1a02f0,_0x17c958,_0x3355a7]=getPerf(_0xd3fad8[0x0],!![]);let _0x17944f=[];config['portfolio']['forEach'](_0x5319b3=>{const _0x4864d6=_0x547b2f;let _0x2473bb=0x0,_0x445ccc;config[_0x4864d6(0x19d)][_0x4864d6(0x241)](_0x4e1806=>{const _0x3468e0=_0x4864d6;let _0x404e86=_0x4e1806[_0x3468e0(0x1b5)][_0x3468e0(0x20b)](_0x3e1296=>_0x3e1296[_0x3468e0(0x165)]==_0x5319b3[_0x3468e0(0x165)]);if(_0x404e86){_0x2473bb+=_0x404e86['number'];if(!_0x445ccc)_0x445ccc=_0x404e86['price'];}}),_0x17944f['push']({'coin':_0x5319b3[_0x4864d6(0x165)],'number':_0x2473bb,'initialprice':_0x445ccc});});const _0x507bfb={'basecoin':_0x1a02f0,'eur':_0x17c958,'usd':_0x3355a7,'coins':_0x17944f};if(_0x57492c)proxyEmit(_0x547b2f(0x19c),_0x507bfb);startingBalances=_0x507bfb;}}function headlessMode(_0x4fd317){const _0x1f1e48=_0x40a141;let _0x1c808e=_0x4fd317[_0x1f1e48(0x17e)],_0x54e8f6=_0x4fd317[_0x1f1e48(0x17a)],_0x3c5fe5=[];for(let _0x3b16c9 of _0x1c808e){if(_0x3b16c9[_0x1f1e48(0x165)]!=config[_0x1f1e48(0x1f7)]){if(_0x3b16c9[_0x1f1e48(0x1f0)]>=_0x54e8f6/0x64){if(_0x3b16c9[_0x1f1e48(0x198)])_0x3c5fe5[_0x1f1e48(0x14e)](_0x3b16c9);}else{if(_0x3b16c9[_0x1f1e48(0x1f0)]<=-_0x54e8f6/0x64){if(_0x3b16c9[_0x1f1e48(0x198)])_0x3c5fe5[_0x1f1e48(0x14e)](_0x3b16c9);}}}}_0x3c5fe5['length']>0x0&&placeOrder(_0x3c5fe5);}function notifyBalance(_0x27ecf2){const _0x4cf318=_0x40a141;let _0x3da0a6=_0x27ecf2[_0x4cf318(0x17e)],_0x22745d=_0x27ecf2[_0x4cf318(0x17a)],_0x51081b=[];for(let _0x4be2bf of _0x3da0a6){if(_0x4be2bf[_0x4cf318(0x165)]!=config[_0x4cf318(0x1f7)]){if(_0x4be2bf[_0x4cf318(0x1f0)]>=_0x22745d/0x64){if(_0x4be2bf['valid'])_0x51081b[_0x4cf318(0x14e)](_0x4be2bf);}else{if(_0x4be2bf[_0x4cf318(0x1f0)]<=-_0x22745d/0x64){if(_0x4be2bf[_0x4cf318(0x198)])_0x51081b[_0x4cf318(0x14e)](_0x4be2bf);}}}}if(_0x51081b[_0x4cf318(0x10c)]>0x0){let _0x2463e6=_0x51081b[_0x4cf318(0x12e)](_0x226691=>_0x226691[_0x4cf318(0x165)]);_0x2463e6[_0x4cf318(0x215)]();let _0x1c2b94=_0x2463e6[_0x4cf318(0xf3)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4cf318(0x1eb),_0x4cf318(0x105));lastCoinsToBalance=_0x1c2b94;}}function symbolToCoin(_0x317757){const _0x2cbfac=_0x40a141;let _0x1edd46;if(_0x317757[_0x2cbfac(0x13c)]('/'+config[_0x2cbfac(0x1f7)]))_0x1edd46=_0x317757['replace']('/'+config['basecoin'],'');if(_0x317757[_0x2cbfac(0x13c)](config[_0x2cbfac(0x1f7)]+'/'))_0x1edd46=_0x317757['replace'](config[_0x2cbfac(0x1f7)]+'/','');return _0x1edd46;}async function unlockOrders(){const _0x16ca8f=_0x40a141;if(allOrdersPlaced&&lockOrders==ORDERS[_0x16ca8f(0x1c3)]){logger[_0x16ca8f(0x17d)](_0x16ca8f(0x1ba)),lockOrders=ORDERS[_0x16ca8f(0x106)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x560108=await getCoins();[currentCoins,currentCoinsAll]=_0x560108,validateOrdersState=_0x16ca8f(0x23b),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x16ca8f(0x17d)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x45fef5){const _0x102894=_0x40a141;if(_0x45fef5)validateOrdersState=_0x45fef5;logger[_0x102894(0x17d)](_0x102894(0x146)+validateOrdersState+_0x102894(0x211)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x102894(0x111):_0x102894(0x101)));let _0x10207b=[],_0x6b06bc=config[_0x102894(0x1f5)]==_0x102894(0x1a1)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x102894(0x172)+validateOrdersState),lastOrders[_0x102894(0x241)](_0x38d3b7=>{const _0x1287b2=_0x102894;let _0x361ca1=![];_0x38d3b7[_0x1287b2(0x1fe)]>0x0&&(_0x361ca1=!![]),_0x10207b[_0x1287b2(0x14e)](_0x361ca1),_0x361ca1&&config[_0x1287b2(0x1f5)]!=_0x1287b2(0x1a1)&&logHistory(_0x1287b2(0x15a),'Order\x20filled:\x20'+_0x38d3b7[_0x1287b2(0x104)]+'\x20'+_0x38d3b7[_0x1287b2(0x1fa)]+'\x20#'+formatResult(_0x38d3b7[_0x1287b2(0x1fe)],0x8)+'\x20@'+formatResult(_0x38d3b7[_0x1287b2(0x100)],0x8));}),_0x10207b[_0x102894(0x241)]((_0x394999,_0x1ae9fd)=>{const _0x2b306d=_0x102894;if(_0x394999)lastOrders[_0x2b306d(0x18b)](_0x1ae9fd,0x1);}),persistOpenOrders(lastOrders);const _0x4bd6fb=coolingDown?_0x102894(0x149):_0x102894(0x142);if(validateOrdersState==_0x102894(0x23b)){validateOrdersState='ongoing';if(_0x10207b['includes'](![])){if(config[_0x102894(0x1f5)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x102894(0x236)){if(_0x10207b[_0x102894(0x13c)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x102894(0x1a1)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x102894(0x25d))_0x10207b[_0x102894(0x13c)](![])&&(config['ordertype']==_0x102894(0x1a1)?logHistory(_0x102894(0x20c),_0x102894(0x203)+Math['round'](_0x6b06bc*validateOrderInterval/0xea60)+_0x102894(0x213)+_0x4bd6fb):(await cancelOrders(),logHistory(_0x102894(0x20c),_0x102894(0x21f)+Math[_0x102894(0x22c)](_0x6b06bc*validateOrderInterval/0xea60)+_0x102894(0x213)+_0x4bd6fb))),await unlockOrders();else{if(validateOrdersState==_0x102894(0x245)){if(config[_0x102894(0x1f5)]!=_0x102894(0x1a1))logHistory(_0x102894(0x20c),'No\x20more\x20open\x20orders\x20-\x20'+_0x4bd6fb);await unlockOrders();}}}}}async function cancelOrders(){const _0x8223e7=_0x40a141;lastOrders[_0x8223e7(0x241)](async _0x49834e=>{const _0x2c5292=_0x8223e7;try{const _0x11f1df=await exchange[_0x2c5292(0x244)](_0x49834e[_0x2c5292(0x188)],_0x49834e[_0x2c5292(0x104)]);}catch(_0x225293){if(_0x225293['toString']()[_0x2c5292(0x13c)](_0x2c5292(0x174))){}else await handleError(_0x225293,_0x2c5292(0x232));}});}async function initCoinResults(){const _0x592788=_0x40a141;let _0x551c53=[];config[_0x592788(0x17e)][_0x592788(0x241)](_0x598c38=>{const _0x2f143b=_0x592788;if(!_0x598c38['excluded']&&_0x598c38[_0x2f143b(0x165)]!=config['basecoin']){let _0x3e550a=dbCoinResults['get'](_0x2f143b(0x150))['find']({'coin':_0x598c38[_0x2f143b(0x165)]})['value']();if(!_0x3e550a){const _0x31c4d4=currentCoins['find'](_0x1fe77f=>_0x1fe77f[_0x2f143b(0x165)]==_0x598c38[_0x2f143b(0x165)]),_0x309d20=global[_0x2f143b(0x1a9)][noslash(_0x598c38[_0x2f143b(0x104)])];let _0x4b74b9=_0x31c4d4?_0x31c4d4[_0x2f143b(0x193)]:null,_0x24f4c3=_0x598c38[_0x2f143b(0x1d9)]?0x1/_0x309d20:_0x309d20,_0x30b4c4;config[_0x2f143b(0x19d)][_0x2f143b(0x241)](_0x52fd8f=>{const _0x103220=_0x2f143b;!_0x30b4c4&&(_0x30b4c4=_0x52fd8f['changes']['find'](_0x119f33=>_0x119f33[_0x103220(0x165)]==_0x598c38[_0x103220(0x165)]),_0x30b4c4&&(_0x4b74b9=_0x30b4c4['number'],_0x24f4c3=_0x30b4c4[_0x103220(0x100)]));}),_0x551c53[_0x2f143b(0x14e)]({'coin':_0x598c38[_0x2f143b(0x165)],'number':_0x4b74b9,'price':_0x24f4c3});}}}),_0x551c53[_0x592788(0x241)](_0x4148a9=>{const _0x16db48=_0x592788,_0x3393ea={'coin':_0x4148a9[_0x16db48(0x165)],'number':_0x4148a9[_0x16db48(0x193)],'breakeven':_0x4148a9[_0x16db48(0x100)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x16db48(0x161)](_0x16db48(0x150))[_0x16db48(0x14e)](_0x3393ea)['write']();});}async function updateCoinResults(_0x1adf1d,_0x104a72=![]){const _0x38f804=_0x40a141;let _0x547e13,_0x58c62d,_0x167a02,_0x1ee265,_0xa8c65b,_0x412773,_0x1718d8=dbCoinResults[_0x38f804(0x161)](_0x38f804(0x150))[_0x38f804(0x20b)]({'coin':_0x1adf1d[_0x38f804(0x165)]})['value']();!_0x1718d8&&await initCoinResults();_0x1adf1d['reverse']&&(_0x412773={'filled':_0x1adf1d[_0x38f804(0x1fe)]*_0x1adf1d[_0x38f804(0x100)],'amount':_0x1adf1d[_0x38f804(0x1fe)]*_0x1adf1d[_0x38f804(0x100)],'side':_0x1adf1d[_0x38f804(0x1fa)]==_0x38f804(0x1bb)?_0x38f804(0x1df):'sell','price':0x1/_0x1adf1d[_0x38f804(0x100)]},_0x1adf1d={..._0x1adf1d,..._0x412773});_0x104a72?_0x58c62d=_0x1adf1d[_0x38f804(0x1fa)]==_0x38f804(0x1df)?_0x1718d8[_0x38f804(0x193)]+_0x1adf1d[_0x38f804(0x1fe)]:_0x1718d8[_0x38f804(0x193)]-_0x1adf1d[_0x38f804(0x1fe)]:_0x58c62d=await getCoinNumber(_0x1adf1d[_0x38f804(0x165)]);if(_0x1adf1d[_0x38f804(0x18c)]&&_0x1adf1d[_0x38f804(0x18c)][_0x38f804(0x11b)]==config['basecoin'])_0x547e13=_0x1adf1d['fee'][_0x38f804(0x10d)];else{if(_0x1adf1d[_0x38f804(0x18c)]&&_0x1adf1d[_0x38f804(0x18c)]['currency']==_0x38f804(0x110)&&!_0x104a72)_0x547e13=_0x1adf1d[_0x38f804(0x18c)][_0x38f804(0x10d)]*global['ticker']['BNB'+config[_0x38f804(0x1f7)]];else _0x547e13=defaultFee*_0x1adf1d[_0x38f804(0x1fe)]*_0x1adf1d[_0x38f804(0x100)];}_0x1adf1d[_0x38f804(0x1fa)]==_0x38f804(0x1df)?(_0x167a02=_0x58c62d!=0x0?(_0x1718d8['breakeven']*_0x1718d8[_0x38f804(0x193)]+_0x1adf1d['price']*(_0x58c62d-_0x1718d8['number'])+_0x547e13)/_0x58c62d:0x0,_0x1ee265=_0x1718d8[_0x38f804(0x103)]):(_0x167a02=_0x58c62d!=0x0?(_0x1718d8[_0x38f804(0x1bf)]*_0x1718d8['number']-_0x1adf1d[_0x38f804(0x100)]*(_0x1718d8['number']-_0x58c62d)+_0x547e13)/_0x58c62d:0x0,_0x1ee265=_0x1718d8[_0x38f804(0x103)]+(_0x1adf1d[_0x38f804(0x100)]-_0x1718d8[_0x38f804(0x1bf)])*_0x1adf1d[_0x38f804(0x1fe)]);_0xa8c65b=(_0x1adf1d[_0x38f804(0x100)]-_0x167a02-_0x547e13/_0x1adf1d[_0x38f804(0x1fe)])*_0x58c62d;let _0x2f5643={'coin':_0x1adf1d[_0x38f804(0x165)],'number':_0x58c62d,'breakeven':formatResult(_0x167a02,0x8),'realized':formatResult(_0x1ee265,0x8),'unrealized':formatResult(_0xa8c65b,0x8),'fees':formatResult(_0x1718d8[_0x38f804(0x1af)]+_0x547e13,0x8),'sells':_0x1adf1d['side']=='sell'?_0x1718d8[_0x38f804(0x207)]+0x1:_0x1718d8['sells'],'buys':_0x1adf1d[_0x38f804(0x1fa)]==_0x38f804(0x1df)?_0x1718d8[_0x38f804(0x155)]+0x1:_0x1718d8['buys']};dbCoinResults[_0x38f804(0x161)]('coins')[_0x38f804(0x20b)]({'coin':_0x1adf1d[_0x38f804(0x165)]})[_0x38f804(0x1d0)](_0x2f5643)[_0x38f804(0x257)]();if(!_0x104a72){if(_0x1adf1d[_0x38f804(0x18c)]&&_0x1adf1d[_0x38f804(0x18c)][_0x38f804(0x11b)]==_0x38f804(0x110)){const _0x23924f=currentCoins[_0x38f804(0x20b)](_0x6eb9a1=>_0x6eb9a1[_0x38f804(0x165)]=='BNB');if(_0x23924f){let _0x4f186c=dbCoinResults['get'](_0x38f804(0x150))['find']({'coin':'BNB'})[_0x38f804(0x194)]();_0x2f5643={..._0x4f186c,'number':_0x23924f[_0x38f804(0x193)]},dbCoinResults[_0x38f804(0x161)](_0x38f804(0x150))['find']({'coin':_0x38f804(0x110)})['assign'](_0x2f5643)[_0x38f804(0x257)]();}}}}async function placeOrder(_0xd8962){const _0x30f9df=_0x40a141,_0x30485f=config[_0x30f9df(0x1f5)]==_0x30f9df(0x1a1)?_0x30f9df(0x1a1):'limit';if(lockOrders==ORDERS[_0x30f9df(0x1c8)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x30f9df(0x1c3)],allOrdersPlaced=![],validateOrdersState=_0x30f9df(0x23b),lastOrders=[];for(const _0x354d4d of _0xd8962){let _0x158c93,_0x1088d5,_0x49bff1,_0x5706a8,_0x5f328e,_0x39c37a=_0x354d4d[_0x30f9df(0x104)];try{const _0x495d11=await exchange[_0x30f9df(0x1c1)](_0x39c37a);_0x158c93=_0x354d4d[_0x30f9df(0x1d9)]?0x1/_0x354d4d[_0x30f9df(0x119)]:_0x354d4d['last'],_0x1088d5=_0x495d11[_0x30f9df(0x181)],_0x49bff1=_0x495d11[_0x30f9df(0x1cf)];_0x354d4d[_0x30f9df(0x1d9)]?(_0x5706a8=_0x354d4d[_0x30f9df(0x1fa)]==_0x30f9df(0x1df)?_0x30f9df(0x1bb):'buy',_0x5f328e=Math['abs'](_0x354d4d[_0x30f9df(0x1e0)])/_0x158c93):(_0x5706a8=_0x354d4d[_0x30f9df(0x1fa)],_0x5f328e=Math[_0x30f9df(0x1ff)](_0x354d4d[_0x30f9df(0x1e0)]));_0x30485f==_0x30f9df(0x12a)&&(config['ordertype']==_0x30f9df(0x197)&&(_0x158c93=_0x5706a8==_0x30f9df(0x1df)?_0x1088d5:_0x49bff1),config[_0x30f9df(0x1f5)]=='limit-low'&&(_0x158c93=_0x5706a8=='buy'?_0x49bff1:_0x1088d5));_0x5f328e=formatResult(_0x5f328e,0x8),_0x158c93=formatResult(_0x158c93,0x8);const _0x54b19c=_0x5706a8==_0x30f9df(0x1bb)?config[_0x30f9df(0x1b6)]?String[_0x30f9df(0x182)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x30f9df(0x169)])+'\x20':'',_0x443710=_0x30485f==_0x30f9df(0x1a1)?_0x30f9df(0xf5):config[_0x30f9df(0x1f5)]==_0x30f9df(0x197)?_0x30f9df(0x137):_0x30f9df(0x148),_0x5bdffe=new Date()[_0x30f9df(0x1e1)]()[_0x30f9df(0x17f)]()['slice'](-0x6)+'-'+Math['random']()[_0x30f9df(0x17f)]()[_0x30f9df(0x1a5)](-0x6);lastOrders[_0x30f9df(0x14e)]({'customId':_0x5bdffe,'symbol':_0x39c37a,'coin':_0x354d4d[_0x30f9df(0x165)],'side':_0x5706a8,'reverse':_0x354d4d[_0x30f9df(0x1d9)],'filled':0x0});if(_0x30485f=='market')logHistory('order',''+_0x54b19c+_0x443710+_0x30f9df(0x18e)+_0x39c37a+'\x20'+_0x5706a8+'\x20#'+formatResult(_0x5f328e,0x8)+'\x20@'+formatResult(_0x158c93,0x8));else logHistory(_0x30f9df(0x15a),''+_0x54b19c+_0x443710+_0x30f9df(0x18e)+_0x39c37a+'\x20'+_0x5706a8+'\x20#'+formatResult(_0x5f328e,0x8)+'\x20@'+formatResult(_0x158c93,0x8));const _0x1beeb4=await exchange[_0x30f9df(0x178)](_0x39c37a,_0x30485f,_0x5706a8,_0x5f328e,_0x158c93,{'clientOrderId':_0x5bdffe}),_0x345d5e=lastOrders[_0x30f9df(0x10c)]-0x1;_0x345d5e>=0x0&&lastOrders[_0x345d5e][_0x30f9df(0x12c)]==_0x5bdffe&&(lastOrders[_0x345d5e]={...lastOrders[_0x345d5e],'orderId':_0x1beeb4['id'],'amount':_0x1beeb4[_0x30f9df(0x1f1)],'price':_0x1beeb4[_0x30f9df(0x100)],'fee':_0x1beeb4[_0x30f9df(0x18c)]});if(config[_0x30f9df(0x187)]!=0x0){let _0x45e995=null;if(cooldownTracker['length']==config[_0x30f9df(0x187)]-0x1)_0x45e995=cooldownTracker[_0x30f9df(0x122)]();const _0x579771=getTimeStamp();cooldownTracker['push'](_0x579771);if(_0x45e995){const _0x3eaf2c=fns[_0x30f9df(0x18d)](new Date(_0x579771),new Date(_0x45e995));if(_0x3eaf2c<cooldownInterval){logHistory(_0x30f9df(0x22e),_0x30f9df(0x1ef)+config[_0x30f9df(0x187)]+_0x30f9df(0x22b)+cooldownInterval/0x3c+_0x30f9df(0x20d)+cooldownPeriod/(0xe10*0x3e8)+_0x30f9df(0x1b8)),coolingDown=!![];break;}}}}catch(_0x5f0a47){if(_0x5f0a47['toString']()[_0x30f9df(0x13c)](_0x30f9df(0xfe)))lastOrders=lastOrders['filter'](_0x43ee73=>_0x43ee73[_0x30f9df(0x104)]!=_0x39c37a),await pauseBot(_0x30f9df(0x24f)+_0x39c37a);else _0x5f0a47[_0x30f9df(0x17f)]()[_0x30f9df(0x13c)](_0x30f9df(0x1e8))?(lastOrders=lastOrders[_0x30f9df(0x124)](_0x1f7e45=>_0x1f7e45[_0x30f9df(0x104)]!=_0x39c37a),await pauseBot(_0x30f9df(0x18a)+_0x39c37a)):(lastOrders=lastOrders[_0x30f9df(0x124)](_0x52b16d=>_0x52b16d[_0x30f9df(0x104)]!=_0x39c37a),await handleError(_0x5f0a47,_0x30f9df(0x180),_0x39c37a));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x30f9df(0x10c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xd89d3c=config[_0x30f9df(0x1f5)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x30f9df(0x14f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x528414=_0x30f9df;validateOrders(_0x528414(0x25d));},_0xd89d3c);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x30f9df(0x20c),_0x30f9df(0x183)));}else{if(coolingDown)!config['headless']&&logHistory(_0x30f9df(0x22e),_0x30f9df(0x1a0));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x30f9df(0x261)]&&(config[_0x30f9df(0x1f5)]==_0x30f9df(0x1a1)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x30f9df(0x22e),_0x30f9df(0x242))));}}function persistOpenOrders(_0x1aafc2){const _0x1e93ce=_0x40a141,_0x2bdb0e={...config,'openOrders':_0x1aafc2};let _0x1fb58d=dbConfig['get'](_0x1e93ce(0x256))[_0x1e93ce(0x20b)]({'botID':botID})[_0x1e93ce(0x194)]();_0x1fb58d&&dbConfig[_0x1e93ce(0x161)](_0x1e93ce(0x256))[_0x1e93ce(0x20b)]({'botID':botID})[_0x1e93ce(0x1d0)](_0x2bdb0e)[_0x1e93ce(0x257)]();}function restoreOrders(){const _0xfdd6f8=_0x40a141;let _0x119f15;config[_0xfdd6f8(0x1f3)]&&allOpenOrders[_0xfdd6f8(0x241)](_0x2d72b3=>{const _0x2854e1=_0xfdd6f8,_0x3c4dae=config[_0x2854e1(0x1f3)][_0x2854e1(0x20b)](_0x5398e7=>_0x5398e7[_0x2854e1(0x188)]==_0x2d72b3['id']);_0x3c4dae&&(lastOrders[_0x2854e1(0x14e)](_0x3c4dae),_0x119f15=_0x2d72b3[_0x2854e1(0x11d)]);});if(lastOrders[_0xfdd6f8(0x10c)]>0x0){lockOrders=ORDERS[_0xfdd6f8(0x1c3)],validateOrdersState=_0xfdd6f8(0x236),allOrdersPlaced=!![];const _0x552443=new Date()[_0xfdd6f8(0x1e1)](),_0x17ceaa=config['ordertype']==_0xfdd6f8(0x1a1)?validateOrderTimeout*0x3c*0x3e8:config[_0xfdd6f8(0x14f)]*0x3c*0x3e8;if(_0x119f15+_0x17ceaa>_0x552443){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2f5698=_0xfdd6f8;validateOrders(_0x2f5698(0x25d));},_0x119f15+_0x17ceaa-_0x552443);}else validateOrders(_0xfdd6f8(0x25d));}}async function sendMetricsTelegram(){const _0x17a34b=_0x40a141;if(!coinsLoaded){process[_0x17a34b(0x217)]({'telegrammsg':_0x17a34b(0x23c)},_0x2fd641=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x509f7a='';if(config['showname'])_0x509f7a=_0x17a34b(0x16c)+config[_0x17a34b(0x1f9)]+_0x17a34b(0x1cb);else _0x509f7a=_0x17a34b(0x21b)+botID+_0x17a34b(0x1cb);const _0x22e8c1=getKPIs('basecoin'),_0x30d0b9=getKPIs(_0x17a34b(0x201),config[_0x17a34b(0x201)]),_0x31acd4=getKPIs('net-basecoin'),_0x45c7e9=getKPIs(_0x17a34b(0x128),config[_0x17a34b(0x201)]);_0x509f7a+=_0x17a34b(0x12d),_0x509f7a+=_0x22e8c1[_0x17a34b(0x16a)]+_0x17a34b(0xf6)+_0x22e8c1[_0x17a34b(0x194)]+'\x0a',_0x509f7a+=_0x22e8c1[_0x17a34b(0x164)]+':\x20'+_0x22e8c1[_0x17a34b(0x1b4)]+'%\x0a',_0x509f7a+=_0x30d0b9[_0x17a34b(0x16a)]+'\x20:\x20'+_0x30d0b9[_0x17a34b(0x194)]+'\x0a',_0x509f7a+=_0x30d0b9[_0x17a34b(0x164)]+':\x20'+_0x30d0b9['change']+'%\x0a',_0x509f7a+=_0x31acd4[_0x17a34b(0x16a)]+':\x20'+_0x31acd4[_0x17a34b(0x194)]+'\x20('+config[_0x17a34b(0x1f7)]+')\x0a',_0x509f7a+=_0x31acd4[_0x17a34b(0x164)]+':\x20'+_0x31acd4['change']+_0x17a34b(0x250)+config[_0x17a34b(0x1f7)]+')\x0a',_0x509f7a+=_0x45c7e9['leftTxt']+':\x20'+_0x45c7e9[_0x17a34b(0x194)]+'\x20('+config[_0x17a34b(0x201)]+')\x0a',_0x509f7a+=_0x45c7e9[_0x17a34b(0x164)]+':\x20'+_0x45c7e9['change']+'%\x20('+config[_0x17a34b(0x201)]+')\x0a',_0x509f7a+=_0x17a34b(0xfa),process['send']({'telegrammsg':_0x509f7a},_0x5cc0b5=>{});}async function sendPortfolioTelegram(){const _0x14b703=_0x40a141;if(!coinsLoaded){process[_0x14b703(0x217)]({'telegrammsg':_0x14b703(0x23c)},_0x10e5f0=>{});return;}let _0x1403b9='';if(config[_0x14b703(0x135)])_0x1403b9='<b>'+config['botname']+_0x14b703(0x1ee);else _0x1403b9=_0x14b703(0x21b)+botID+_0x14b703(0x1ee);_0x1403b9+=_0x14b703(0x12d),_0x1403b9+=_0x14b703(0x249),_0x1403b9+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1403b9+='-------------------------------\x0a',currentCoins[_0x14b703(0x241)](_0x2964f9=>{const _0x638867=_0x14b703;_0x1403b9+=_0x2964f9[_0x638867(0x165)]['padEnd'](0x7)+'|\x20'+formatPad(_0x2964f9['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2964f9[_0x638867(0x168)],0x2,0x6)+'|\x20'+formatPad(_0x2964f9[_0x638867(0x1f0)]*0x64,0x2,0x6)+'\x0a';}),_0x1403b9+=_0x14b703(0xfa),process['send']({'telegrammsg':_0x1403b9},_0x3ba247=>{});}function formatPad(_0x4a2acc,_0x4d106e,_0x231833){const _0x1f335c=_0x40a141,_0x4484f7=formatResultString(_0x4a2acc,_0x4d106e);return _0x4484f7?_0x4484f7[_0x1f335c(0x20e)](_0x231833):''['padStart'](_0x231833);}function logHistory(_0x20e9c8,_0x29dc51,_0x47f643=''){const _0x42b526=_0x40a141;let _0xa23d8c={'time':getTimeStamp(),'type':_0x20e9c8,'event':_0x29dc51};dbLogs[_0x42b526(0x161)](_0x42b526(0x1f6))[_0x42b526(0x14e)](_0xa23d8c)[_0x42b526(0x257)]();if(_0x47f643=='')_0x47f643=_0x29dc51;proxyEmit(_0x42b526(0x10b),{'log':_0xa23d8c,'summary':_0x47f643}),process[_0x42b526(0x217)]({'telegram':{..._0xa23d8c,'botname':config[_0x42b526(0x1f9)],'showname':config[_0x42b526(0x135)]}},_0x30ebd1=>{}),logger[_0x42b526(0x206)](''+_0xa23d8c[_0x42b526(0x10b)]);}function emitHistory(_0x1787db={}){const _0x1edc9b=_0x40a141;Object[_0x1edc9b(0x200)](_0x1787db)[_0x1edc9b(0x10c)]==0x0&&(_0x1787db={'type':['order',_0x1edc9b(0x10b)],'event':'','page':0x1});if(_0x1787db[_0x1edc9b(0x184)]['includes'](_0x1edc9b(0x10b)))_0x1787db[_0x1edc9b(0x184)][_0x1edc9b(0x18b)](_0x1787db[_0x1edc9b(0x184)][_0x1edc9b(0x24a)](_0x1edc9b(0x10b)),0x1,_0x1edc9b(0x22e),_0x1edc9b(0x1eb),_0x1edc9b(0x20c));if(dbLogs[_0x1edc9b(0x185)](_0x1edc9b(0x1f6))[_0x1edc9b(0x194)]()){let _0x218ef1=dbLogs[_0x1edc9b(0x161)](_0x1edc9b(0x1f6))['filter'](_0x503d26=>{const _0x205460=_0x1edc9b;if(_0x1787db['type'][_0x205460(0x10c)]==0x0)return![];else return _0x1787db[_0x205460(0x184)][_0x205460(0x13c)](_0x503d26['type']);})[_0x1edc9b(0x124)](_0x1c7d95=>{const _0x2fa5d4=_0x1edc9b;if(_0x1787db[_0x2fa5d4(0x10b)]=='')return!![];else return _0x1c7d95['event'][_0x2fa5d4(0x265)]()['includes'](_0x1787db['event'][_0x2fa5d4(0x265)]());})[_0x1edc9b(0x214)](_0x1edc9b(0x255)),_0x618f9e=_0x218ef1[_0x1edc9b(0x194)]()[_0x1edc9b(0x10c)];_0x218ef1=_0x218ef1['reverse']()['slice']((_0x1787db[_0x1edc9b(0x11c)]-0x1)*logPageSize,_0x1787db[_0x1edc9b(0x11c)]*logPageSize-0x1)[_0x1edc9b(0x1d9)]()[_0x1edc9b(0x194)](),proxyEmit(_0x1edc9b(0x264),{'logs':_0x218ef1,'total':_0x618f9e});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x367d94){const _0x38ead4=_0x40a141;if(dbLogs['has'](_0x38ead4(0x1f6))[_0x38ead4(0x194)]()){const _0x4c5b74=dbLogs[_0x38ead4(0x161)](_0x38ead4(0x1f6))['sortBy'](_0x38ead4(0x255))[_0x38ead4(0x124)](_0x20b7dc=>{const _0x841b34=_0x38ead4;return _0x20b7dc[_0x841b34(0x184)]==_0x841b34(0x15a);})[_0x38ead4(0x194)]();dbLogs['get'](_0x38ead4(0x1f6))[_0x38ead4(0x12b)]()[_0x38ead4(0x257)](),dbLogs[_0x38ead4(0x161)](_0x38ead4(0x1f6))[_0x38ead4(0x1d0)](_0x4c5b74)[_0x38ead4(0x257)](),emitHistory(_0x367d94);}}async function pauseBot(_0xc6dab0=''){const _0x7a349f=_0x40a141,_0x4ca18f=new Date()[_0x7a349f(0x1e1)]();if(!lastErrorShown||_0x4ca18f-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4ca18f;!lastBotPause?(lastBotPause=_0x4ca18f,consecutivePauses=0x1):(_0x4ca18f-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x7a349f(0x217)]({'stop':'restart'},_0x15b090=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x7a349f(0x1e1)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xc6dab0)_0xc6dab0+=_0x7a349f(0x21a);logHistory('error',_0xc6dab0+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x7a349f(0x263)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x1807b3=_0x40a141;process[_0x1807b3(0x217)]({'stop':'kill'},_0xb73315=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x32d22e,_0x5a97ed){const _0x4e9f9c=_0x40a141;if(_0x32d22e['toString']()['includes']('API-key\x20format\x20invalid'))return logHistory('error',config[_0x4e9f9c(0x208)]+_0x4e9f9c(0x1f8)),![];else{if(_0x32d22e[_0x4e9f9c(0x17f)]()[_0x4e9f9c(0x13c)](_0x4e9f9c(0x118)))return logHistory(_0x4e9f9c(0x22e),config['exchange']+_0x4e9f9c(0x233)),![];else{if(_0x32d22e['toString']()['includes']('AuthenticationError'))return logHistory(_0x4e9f9c(0x22e),config['exchange']+_0x4e9f9c(0x237)),logHistory(_0x4e9f9c(0x22e),_0x4e9f9c(0xfb)),![];else await handleError(_0x32d22e,_0x5a97ed);}}}async function handleError(_0x5b14c7,_0x492982,_0x108b09=''){const _0xb5d237=_0x40a141,_0x1a5719=config['exchange']||_0xb5d237(0x1d8);if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x1ce)))await pauseBot(config[_0xb5d237(0x208)]+_0xb5d237(0x1c0));else{if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x121)))await pauseBot(config[_0xb5d237(0x208)]+_0xb5d237(0x15c));else{if(_0x5b14c7['toString']()[_0xb5d237(0x13c)](_0xb5d237(0x17c)))await pauseBot(config[_0xb5d237(0x208)]+_0xb5d237(0x219));else{if(_0x5b14c7[_0xb5d237(0x17f)]()['includes'](_0xb5d237(0x125)))await pauseBot(config[_0xb5d237(0x208)]+_0xb5d237(0x1e3));else{if(_0x5b14c7[_0xb5d237(0x17f)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x492982+_0xb5d237(0x11f)),logHistory('error',_0xb5d237(0x129)),await killBot();else{if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x1b7)))logHistory(_0xb5d237(0x22e),_0x492982+_0xb5d237(0x1b2)),logHistory(_0xb5d237(0x22e),_0xb5d237(0x129)),await killBot();else{if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x147)))logHistory('error',_0x492982+_0xb5d237(0x21a)+config['exchange']+_0xb5d237(0x21e)),logHistory(_0xb5d237(0x22e),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x118)))logHistory('error',_0x492982+'\x20|\x20'+config['exchange']+_0xb5d237(0x167)),logHistory(_0xb5d237(0x22e),_0xb5d237(0x129)),await killBot();else{if(_0x5b14c7[_0xb5d237(0x17f)]()[_0xb5d237(0x13c)](_0xb5d237(0x19a)))logHistory(_0xb5d237(0x22e),_0x492982+_0xb5d237(0x21a)+config[_0xb5d237(0x208)]+_0xb5d237(0x226)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x5b14c7['toString']()[_0xb5d237(0x13c)](_0xb5d237(0x16f))?logHistory(_0xb5d237(0x22e),_0x492982+_0xb5d237(0x1d4)+_0x108b09):(logger[_0xb5d237(0x206)](_0x492982+_0xb5d237(0x19b),_0x5b14c7),await pauseBot(_0xb5d237(0x173)));}}}}}}}}}function formatResult(_0x2b008d,_0x9c4267){const _0x2e7afb=_0x40a141;return parseFloat(_0x2b008d[_0x2e7afb(0x246)](_0x9c4267));}function formatResultTruncate(_0x46bd82,_0x464c65){const _0xaa4c8d=_0x40a141;let _0x51377f=formatResultString(_0x46bd82,0xa),_0x244346=_0x51377f[_0xaa4c8d(0x24a)]('.');return _0x244346!=-0x1&&(_0x51377f=_0x51377f[_0xaa4c8d(0x1a5)](0x0,_0x244346+_0x464c65+0x1)),Number(_0x51377f);}function formatResultString(_0x2d39c2,_0x4e5c0a){const _0x57f535=_0x40a141;let _0x3114da;if(!(''+_0x2d39c2)[_0x57f535(0x13c)]('e'))_0x3114da=+(Math[_0x57f535(0x22c)](_0x2d39c2+'e+'+_0x4e5c0a)+'e-'+_0x4e5c0a);else{let _0x4cd798=(''+_0x2d39c2)[_0x57f535(0x260)]('e'),_0x4c8e9f='';+_0x4cd798[0x1]+_0x4e5c0a>0x0&&(_0x4c8e9f='+'),_0x3114da=+(Math[_0x57f535(0x22c)](+_0x4cd798[0x0]+'e'+_0x4c8e9f+(+_0x4cd798[0x1]+_0x4e5c0a))+'e-'+_0x4e5c0a);}return Number(_0x3114da)['toFixed'](_0x4e5c0a);}function getServerTime(){const _0x3e903a=_0x40a141,_0x19b265=new Date();return _0x19b265['getFullYear']()+'/'+(_0x19b265[_0x3e903a(0x15f)]()+0x1)[_0x3e903a(0x17f)]()['padStart'](0x2,'0')+'/'+_0x19b265[_0x3e903a(0x108)]()[_0x3e903a(0x17f)]()[_0x3e903a(0x20e)](0x2,'0')+'\x20'+_0x19b265[_0x3e903a(0x1a7)]()[_0x3e903a(0x17f)]()[_0x3e903a(0x20e)](0x2,'0')+':'+_0x19b265[_0x3e903a(0x117)]()[_0x3e903a(0x17f)]()['padStart'](0x2,'0')+':'+_0x19b265['getSeconds']()[_0x3e903a(0x17f)]()[_0x3e903a(0x20e)](0x2,'0');}function getTimeStamp(){const _0x319563=_0x40a141,_0x264a0b=shiftedTime();return _0x264a0b[_0x319563(0x230)]()+'/'+(_0x264a0b['getMonth']()+0x1)[_0x319563(0x17f)]()[_0x319563(0x20e)](0x2,'0')+'/'+_0x264a0b[_0x319563(0x108)]()[_0x319563(0x17f)]()[_0x319563(0x20e)](0x2,'0')+'\x20'+_0x264a0b[_0x319563(0x1a7)]()[_0x319563(0x17f)]()[_0x319563(0x20e)](0x2,'0')+':'+_0x264a0b[_0x319563(0x117)]()[_0x319563(0x17f)]()[_0x319563(0x20e)](0x2,'0')+':'+_0x264a0b['getSeconds']()['toString']()[_0x319563(0x20e)](0x2,'0');}function getDate(){const _0x4e4934=_0x40a141,_0x8b8b61=shiftedTime();return _0x8b8b61['getFullYear']()+'/'+(_0x8b8b61[_0x4e4934(0x15f)]()+0x1)[_0x4e4934(0x17f)]()[_0x4e4934(0x20e)](0x2,'0')+'/'+_0x8b8b61[_0x4e4934(0x108)]()[_0x4e4934(0x17f)]()['padStart'](0x2,'0');}function getHour(){const _0xe518c1=_0x40a141,_0x523e1e=shiftedTime();return _0x523e1e[_0xe518c1(0x1a7)]()[_0xe518c1(0x17f)]()[_0xe518c1(0x20e)](0x2,'0');}function sleep(_0x3e4206){return new Promise(_0x4dcd8c=>setTimeout(_0x4dcd8c,_0x3e4206));}function shiftedTime(){const _0x1d76a0=_0x40a141,_0x4a2c79=new Date();let _0x1126a2=_0x4a2c79;if(config&&config[_0x1d76a0(0x15e)]!==0x0)_0x1126a2=fns[_0x1d76a0(0x205)](_0x4a2c79,{'hours':config[_0x1d76a0(0x15e)]});return _0x1126a2;}function timer(_0x2ded25){const _0x5ee1e6=_0x40a141,_0x69e4da=new Date();!lasttime?console[_0x5ee1e6(0x175)]('timer:',_0x2ded25,_0x69e4da):console[_0x5ee1e6(0x175)](_0x5ee1e6(0xf9),_0x2ded25,(_0x69e4da-lasttime)/0x3e8),lasttime=_0x69e4da;}