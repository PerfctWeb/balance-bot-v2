const _0x2aac65=_0x3fe5;(function(_0x454d66,_0x18b2a5){const _0x10c51d=_0x3fe5,_0x55ea87=_0x454d66();while(!![]){try{const _0x14b9f1=-parseInt(_0x10c51d(0x158))/0x1+-parseInt(_0x10c51d(0x112))/0x2*(-parseInt(_0x10c51d(0x208))/0x3)+-parseInt(_0x10c51d(0x179))/0x4*(-parseInt(_0x10c51d(0x152))/0x5)+-parseInt(_0x10c51d(0x27c))/0x6*(-parseInt(_0x10c51d(0x1e5))/0x7)+parseInt(_0x10c51d(0x13a))/0x8+-parseInt(_0x10c51d(0x125))/0x9+-parseInt(_0x10c51d(0x19b))/0xa;if(_0x14b9f1===_0x18b2a5)break;else _0x55ea87['push'](_0x55ea87['shift']());}catch(_0x4ad72b){_0x55ea87['push'](_0x55ea87['shift']());}}}(_0x1840,0xddb99));const _0x1da261=function(){let _0x549459=!![];return function(_0x1bdd93,_0x5c9aaf){const _0x1baa9c=_0x549459?function(){const _0x43c73a=_0x3fe5;if(_0x5c9aaf){const _0x59f283=_0x5c9aaf[_0x43c73a(0x25f)](_0x1bdd93,arguments);return _0x5c9aaf=null,_0x59f283;}}:function(){};return _0x549459=![],_0x1baa9c;};}(),_0x4c10c7=_0x1da261(this,function(){const _0x5dcb3a=_0x3fe5;return _0x4c10c7[_0x5dcb3a(0x16e)]()['search'](_0x5dcb3a(0x146))[_0x5dcb3a(0x16e)]()[_0x5dcb3a(0x144)](_0x4c10c7)[_0x5dcb3a(0x1e3)]('(((.+)+)+)+$');});_0x4c10c7();'use strict';const ccxt=require('ccxt'),low=require(_0x2aac65(0x118)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x2aac65(0x128)),Crypt=require(_0x2aac65(0x15b))[_0x2aac65(0x131)],util=require(_0x2aac65(0x1de)),argv=require('yargs/yargs')(process[_0x2aac65(0x1be)][_0x2aac65(0x117)](0x2))['argv'],path=require(_0x2aac65(0x25a));let exchange;global[_0x2aac65(0x1ac)]={},global[_0x2aac65(0x1cd)]={};const usdBasecoins=[_0x2aac65(0x24c),'BUSD',_0x2aac65(0x194),_0x2aac65(0x1bd),'USDC',_0x2aac65(0x20a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2aac65(0x165)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2aac65(0xf9))[_0x2aac65(0x14a)],botID=process[_0x2aac65(0x1be)][0x2]||_0x2aac65(0x228),pattern=/^[0-9]{3}$/;!pattern[_0x2aac65(0x1b7)](botID)&&(console[_0x2aac65(0x1c3)](_0x2aac65(0x12e)+botID+_0x2aac65(0xfb)),killBot());const userID=process[_0x2aac65(0x1be)][0x3]||'',configpath=userID?_0x2aac65(0x1a5)+userID+'/':_0x2aac65(0x1a5),logspath=userID?_0x2aac65(0x15e)+userID+'/':'./logs/',loggerfile=fs[_0x2aac65(0x255)](logspath+_0x2aac65(0x180),{'flags':'a'});!fs[_0x2aac65(0x150)](configpath)&&fs[_0x2aac65(0x1a8)](configpath);!fs[_0x2aac65(0x150)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x2aac65(0x154)+botID+'-config.json',logfile=configpath+_0x2aac65(0x154)+botID+'-events.json',performancefile=configpath+_0x2aac65(0x154)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x2aac65(0x24b),settingsfile=configpath+_0x2aac65(0x201),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2aac65(0x1f4),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2aac65(0x138)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2aac65(0x138)]({'data':[],'version':serverversion})[_0x2aac65(0x1e9)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2aac65(0x138)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2aac65(0x138)]({'coins':[],'version':serverversion})[_0x2aac65(0x1e9)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x2aac65(0x1e7)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x505355=>{const _0x4f9373=_0x2aac65;console[_0x4f9373(0x1c3)](_0x505355);},'simple':_0x89b1d2=>{const _0x44fa47=_0x2aac65;console[_0x44fa47(0x1c3)](_0x89b1d2),loggerfile[_0x44fa47(0x1e9)](util['format'](_0x89b1d2)+'\x0a');},'full':async(_0x4ff562,_0x15fcbe='')=>{const _0x45e1cb=_0x2aac65;let _0x27376f;if(config[_0x45e1cb(0x19d)])_0x27376f=getTimeStamp()+':\x20'+config[_0x45e1cb(0x202)]+_0x45e1cb(0x260)+_0x4ff562;else _0x27376f=getTimeStamp()+_0x45e1cb(0x164)+botID+'\x20>\x20'+_0x4ff562;console[_0x45e1cb(0x1c3)](_0x27376f),loggerfile['write'](util[_0x45e1cb(0x200)](_0x27376f)+'\x0a'),_0x15fcbe&&(console[_0x45e1cb(0x1c3)](_0x15fcbe),loggerfile[_0x45e1cb(0x1e9)](util[_0x45e1cb(0x200)](_0x15fcbe)+'\x0a'));},'debug':async(_0x27f9f0,_0x1d5052='')=>{const _0xfb9617=_0x2aac65;let _0x4d9581;if(config['showname'])_0x4d9581=getTimeStamp()+':\x20'+config[_0xfb9617(0x202)]+_0xfb9617(0x280)+_0x27f9f0;else _0x4d9581=getTimeStamp()+':\x20Bot\x20'+botID+_0xfb9617(0x280)+_0x27f9f0;if(debugging)console['log'](_0x4d9581);loggerfile[_0xfb9617(0x1e9)](util[_0xfb9617(0x200)](_0x4d9581)+'\x0a');if(_0x1d5052){if(debugging)console[_0xfb9617(0x1c3)](_0x1d5052);loggerfile[_0xfb9617(0x1e9)](util[_0xfb9617(0x200)](_0x1d5052)+'\x0a');}}};process['on']('uncaughtException',function(_0x46ca48){const _0x3b8b3f=_0x2aac65;logHistory(_0x3b8b3f(0x1fc),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger['debug'](_0x3b8b3f(0x106),_0x46ca48);});settings[_0x2aac65(0x21d)]!=config['timeshift']&&updateTimeshift(settings[_0x2aac65(0x21d)]);settings[_0x2aac65(0x177)]!=config['onepagemode']&&updateOnepagemode(settings[_0x2aac65(0x177)]);process[_0x2aac65(0x275)]({'started':_0x2aac65(0x145)},_0x4feccf=>{}),initializeProcessListeners();function proxyEmit(_0x1b540d,_0x1aaa66=null){const _0x421ae2=_0x2aac65;process[_0x421ae2(0x275)]({'function':_0x1b540d,'args':_0x1aaa66},_0x3bb145=>{});}function initializeProcessListeners(){process['on']('message',_0x1ba95e=>{const _0x461c37=_0x3fe5;switch(Object[_0x461c37(0x21a)](_0x1ba95e)[0x0]){case'timeshift':_0x1ba95e[_0x461c37(0x21d)]!=undefined&&(settings[_0x461c37(0x21d)]=_0x1ba95e[_0x461c37(0x21d)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x1ba95e['onepagemode']!=undefined&&(settings[_0x461c37(0x177)]=_0x1ba95e[_0x461c37(0x177)],updateOnepagemode(settings[_0x461c37(0x177)]));break;case _0x461c37(0x124):_0x1ba95e[_0x461c37(0x124)]!=undefined&&(bots=JSON[_0x461c37(0x20d)](_0x1ba95e[_0x461c37(0x124)]),proxyEmit('bots',bots));break;case _0x461c37(0x116):switch(_0x1ba95e[_0x461c37(0x116)]){case _0x461c37(0xff):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x1ba95e[_0x461c37(0x14d)]);break;case _0x461c37(0x231):deleteHistoryAlerts(_0x1ba95e[_0x461c37(0x14d)]);break;case'getPortfolio':getPortfolio(_0x1ba95e[_0x461c37(0x14d)]);break;case _0x461c37(0x1ff):storeConfiguration(_0x1ba95e[_0x461c37(0x14d)]);break;case _0x461c37(0x1b3):storeHeadless(_0x1ba95e['args']);break;case'storeFiat':storeFiat(_0x1ba95e['args']);break;case _0x461c37(0x211):resetHistory();break;case _0x461c37(0x1c4):getStartingBalances(getNormalizedPerformance());break;case _0x461c37(0x104):placeOrder(_0x1ba95e['args']);break;case _0x461c37(0x256):cancelLoading();break;case _0x461c37(0x14e):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x461c37(0x215):sendPortfolioTelegram();break;}}});}function _0x3fe5(_0x35b720,_0x464106){const _0x47059f=_0x1840();return _0x3fe5=function(_0x4c10c7,_0x1da261){_0x4c10c7=_0x4c10c7-0xf8;let _0x1840f8=_0x47059f[_0x4c10c7];return _0x1840f8;},_0x3fe5(_0x35b720,_0x464106);}reset(null,!![]);async function reset(_0x205808=null,_0x42195e=![]){const _0x554838=_0x2aac65;logger['debug']('Reset\x20|\x20'+(_0x205808&&_0x205808[_0x554838(0x281)]>0x0?_0x554838(0x1c9)+_0x205808[_0x554838(0x20f)](','):_0x554838(0x220))+_0x554838(0x24a)+(_0x42195e?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x554838(0x1d1)+config[_0x554838(0x176)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x42195e)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!='***'){if(_0x42195e){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1205b4){handleErrorNoStop(_0x1205b4,_0x554838(0x22e));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x205808);const _0x2f8166=await getCoins();[currentCoins,currentCoinsAll]=_0x2f8166,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x554838(0x281)]==0x0&&allOpenOrders[_0x554838(0x281)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x419575=_0x2aac65;exchangeStopped=!![],await exchange[_0x419575(0x1d5)]();}async function reloadExchange(){const _0x360813=_0x2aac65;logger['debug']('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x360813(0x22f)](_0x360813(0x239)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x36b17b=config['exchange'],_0x4b2284=config['apiKey'],_0x1f81f3=config['apiSecret'],_0x216b2c=config[_0x2aac65(0x114)]){const _0x29c39f=_0x2aac65;exchange&&await stopExchange();!supportedExchanges()[_0x29c39f(0x135)](_0x36b17b)&&(logHistory(_0x29c39f(0x1fc),_0x29c39f(0x12f)+_0x36b17b+_0x29c39f(0x22d)),killBot());const _0x17bc0f=ccxt[_0x29c39f(0xfe)][_0x36b17b[_0x29c39f(0x1c8)]()];exchange=new _0x17bc0f({'apiKey':_0x4b2284,'secret':_0x1f81f3,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x216b2c)exchange[_0x29c39f(0x213)]=_0x216b2c;}function setStableCoins(){const _0x3614c0=_0x2aac65;let _0x5d9245=config['basecoin']==_0x3614c0(0x1b2)?_0x3614c0(0x1b2):'BTC',_0xc0af19=!allSymbols[_0x3614c0(0x135)](_0x5d9245+'/USD')?_0x3614c0(0x1bd):_0x3614c0(0x24c),_0x4da40c=!allSymbols[_0x3614c0(0x135)](_0x5d9245+_0x3614c0(0x224))?_0xc0af19:'EUR';stablecoins={'eur':{'coin':''+_0x5d9245+_0x4da40c,'symbol':_0x5d9245+'/'+_0x4da40c},'usd':{'coin':''+_0x5d9245+_0xc0af19,'symbol':_0x5d9245+'/'+_0xc0af19}};}async function initwsCcxt(_0x32acc9){const _0x30a2ed=_0x2aac65;_0x32acc9==null&&(_0x32acc9=[],config[_0x30a2ed(0x19a)][_0x30a2ed(0x252)](_0x484a73=>{const _0x561581=_0x30a2ed;if(!_0x484a73[_0x561581(0x156)]&&_0x484a73[_0x561581(0x1cf)]!=config[_0x561581(0x1d2)])_0x32acc9['push'](_0x484a73[_0x561581(0x1ec)]);}));if(!_0x32acc9[_0x30a2ed(0x135)](stablecoins[_0x30a2ed(0x1a4)][_0x30a2ed(0x1ec)]))_0x32acc9[_0x30a2ed(0x100)](stablecoins[_0x30a2ed(0x1a4)][_0x30a2ed(0x1ec)]);if(!_0x32acc9['includes'](stablecoins[_0x30a2ed(0x191)][_0x30a2ed(0x1ec)]))_0x32acc9[_0x30a2ed(0x100)](stablecoins[_0x30a2ed(0x191)]['symbol']);if(config[_0x30a2ed(0x176)][_0x30a2ed(0x279)]('Binance')){if(!_0x32acc9['includes'](_0x30a2ed(0x207)+config[_0x30a2ed(0x1d2)]))_0x32acc9[_0x30a2ed(0x100)](_0x30a2ed(0x207)+config['basecoin']);}loadCoins(_0x32acc9);const _0x1bde52=async _0x2251a1=>{const _0x276986=_0x30a2ed,_0xf12b6d=await exchange[_0x276986(0x157)](_0x2251a1);global[_0x276986(0x1ac)][noslash(_0xf12b6d[_0x276986(0x1ec)])]=_0xf12b6d[_0x276986(0x107)];while(!![]){if(!botPaused)try{const _0x105c17=await exchange[_0x276986(0x21b)](_0x2251a1);global[_0x276986(0x1ac)][noslash(_0x105c17[0x0]['symbol'])]=_0x105c17[0x0]['price'],await sleep(0x3e8);}catch(_0x2c6e89){if(!exchangeStopped)await handleError(_0x2c6e89,_0x276986(0x21b),_0x2251a1);}else await sleep(0x64);}},_0x3ee6c0=async _0x2c2109=>{const _0x3075a5=_0x30a2ed;while(!![]){if(!botPaused)try{const _0x3f0d1d=await exchange['fetchTicker'](_0x2c2109);global[_0x3075a5(0x1cd)][_0x3f0d1d['symbol']]=_0x3f0d1d[_0x3075a5(0x269)],await sleep(0x3c*0x3e8);}catch(_0x59e985){if(!exchangeStopped)await handleError(_0x59e985,'fetchTickers',_0x2c2109);}else await sleep(0x64);}},_0x535551=async()=>{const _0x47a8a8=_0x30a2ed;while(!![]){if(!botPaused)try{const _0x4506fd=await exchange[_0x47a8a8(0x26c)]();_0x4506fd['forEach'](_0x1370ec=>{updateNumberCoinsCcxt(_0x1370ec);});}catch(_0x5ec45c){if(!exchangeStopped)await handleError(_0x5ec45c,_0x47a8a8(0x26c));}else await sleep(0x64);}};_0x32acc9[_0x30a2ed(0x252)](_0x31289e=>{_0x1bde52(_0x31289e),_0x3ee6c0(_0x31289e);}),!wsEventsSet&&(wsEventsSet=!![],_0x535551(),watchTransactions());}async function watchTransactions(){const _0x241c2f=_0x2aac65;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5432d0=await getCoins(),[_0x58b803,_0x7b89a]=_0x5432d0;let _0x41f2bf=[];currentCoins[_0x241c2f(0x252)](_0x1353c7=>{const _0x438072=_0x241c2f,_0x3e8913=_0x58b803[_0x438072(0x25b)](_0x514a41=>_0x514a41[_0x438072(0x1cf)]==_0x1353c7['coin']);if(_0x3e8913){if(_0x1353c7['number']!=_0x3e8913[_0x438072(0x273)]){let _0x2ecf83;if(_0x1353c7['coin']!=config[_0x438072(0x1d2)]){const _0x2d4637=global[_0x438072(0x1ac)][noslash(_0x1353c7[_0x438072(0x1ec)])];_0x2ecf83=_0x1353c7[_0x438072(0x248)]?0x1/_0x2d4637:_0x2d4637;}else _0x2ecf83=0x1;_0x41f2bf['push']({'coin':_0x1353c7[_0x438072(0x1cf)],'symbol':_0x1353c7['symbol'],'price':_0x2ecf83,'number':Number(formatResult(_0x3e8913[_0x438072(0x273)]-_0x1353c7[_0x438072(0x273)],0x8)),'basecoinvalue':_0x2ecf83*(_0x3e8913[_0x438072(0x273)]-_0x1353c7['number'])});}}});if(_0x41f2bf[_0x241c2f(0x281)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x241c2f(0x22f)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x41f2bf[0x0][_0x241c2f(0x109)]+_0x241c2f(0x234)+lastFees[_0x241c2f(0x133)]);if(lastFees[_0x241c2f(0x133)]==0x0||Math[_0x241c2f(0x233)](_0x41f2bf[0x0]['basecoinvalue'])>lastFees[_0x241c2f(0x133)]){delete _0x41f2bf[0x0][_0x241c2f(0x1ec)],delete _0x41f2bf[0x0][_0x241c2f(0x109)];let _0x505b24=[],_0x1201b8=[...config['liquidity']]||[],_0x5aaa87=config['liquidity'];_0x1201b8[_0x241c2f(0x13d)]((_0x451e6c,_0x1ab4ca)=>_0x451e6c[_0x241c2f(0x258)]>_0x1ab4ca[_0x241c2f(0x258)]?-0x1:_0x1ab4ca[_0x241c2f(0x258)]>_0x451e6c['date']?0x1:0x0);const _0x441055=getDate();if(_0x1201b8[0x0]){const _0x1f47b8=fns['parse'](_0x1201b8[0x0]['date'],_0x241c2f(0x210),new Date()),_0x122e3f=fns[_0x241c2f(0x20d)](_0x441055,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x1f47b8,_0x122e3f)){_0x505b24=_0x1201b8[0x0][_0x241c2f(0x134)];const _0x3ec604=_0x505b24[_0x241c2f(0x25b)](_0x304dc2=>_0x304dc2['coin']==_0x41f2bf[0x0]['coin']);_0x3ec604?(_0x3ec604[_0x241c2f(0x273)]+=_0x41f2bf[0x0][_0x241c2f(0x273)],_0x3ec604['number']==0x0&&(_0x505b24=_0x505b24[_0x241c2f(0x20c)](_0x287542=>{const _0x3d1b0b=_0x241c2f;return _0x287542[_0x3d1b0b(0x1cf)]!=_0x41f2bf[0x0][_0x3d1b0b(0x1cf)];}))):_0x505b24[_0x241c2f(0x100)](_0x41f2bf[0x0]);const _0x8dfe65=_0x5aaa87[_0x241c2f(0x25b)](_0x2d8857=>_0x2d8857['date']==_0x441055);_0x8dfe65[_0x241c2f(0x134)]=_0x505b24;}else _0x5aaa87[_0x241c2f(0x100)]({'date':_0x441055,'changes':[_0x41f2bf[0x0]]});}const _0x4be874=_0x5aaa87[_0x241c2f(0x25b)](_0x4c90ff=>_0x4c90ff[_0x241c2f(0x258)]==_0x441055);if(_0x4be874){let _0x59f147=!![];_0x4be874[_0x241c2f(0x134)][_0x241c2f(0x252)](_0x53acd4=>{const _0x229857=_0x241c2f;if(_0x53acd4[_0x229857(0x273)]!=0x0)_0x59f147=![];}),_0x59f147&&(_0x5aaa87=_0x5aaa87[_0x241c2f(0x20c)](_0x39b0d2=>{return _0x39b0d2['date']!=_0x441055;}));}let _0x379499=dbConfig['get'](_0x241c2f(0x22b))[_0x241c2f(0x25b)]({'botID':botID})['value']();_0x379499&&(dbConfig[_0x241c2f(0x20b)]('bot')[_0x241c2f(0x25b)]({'botID':botID})['assign']({'liquidity':_0x5aaa87})['write'](),config[_0x241c2f(0x10d)]=_0x5aaa87),logHistory('success',_0x241c2f(0x190)+Math[_0x241c2f(0x233)](_0x41f2bf[0x0][_0x241c2f(0x273)])+'\x20'+_0x41f2bf[0x0][_0x241c2f(0x1cf)]+'\x20'+(_0x41f2bf[0x0][_0x241c2f(0x273)]>0x0?_0x241c2f(0x1cc):'removed')+_0x241c2f(0x265)),proxyEmit(_0x241c2f(0x25d),emittedConfiguration());}else logger[_0x241c2f(0x22f)](_0x241c2f(0x247)+Math[_0x241c2f(0x233)](_0x41f2bf[0x0][_0x241c2f(0x273)])+'\x20'+_0x41f2bf[0x0][_0x241c2f(0x1cf)]+'\x20'+(_0x41f2bf[0x0][_0x241c2f(0x273)]>0x0?'added':_0x241c2f(0x242)));transactionDetected=!![],currentCoins=_0x58b803,currentCoinsAll=_0x7b89a;}else logger[_0x241c2f(0x22f)]('Portfolio\x20change\x20detected:\x20'+Math[_0x241c2f(0x233)](_0x41f2bf[0x0][_0x241c2f(0x273)])+'\x20'+_0x41f2bf[0x0][_0x241c2f(0x1cf)]+'\x20'+(_0x41f2bf[0x0][_0x241c2f(0x273)]>0x0?_0x241c2f(0x1cc):_0x241c2f(0x242))+_0x241c2f(0x243)),currentCoins=_0x58b803,currentCoinsAll=_0x7b89a;}await sleep(watchTransactionsInterval);}catch(_0x32f84e){if(!exchangeStopped)await handleError(_0x32f84e,_0x241c2f(0x16b));}else await sleep(0x64);}}async function loadSymbols(_0x565fb0=config[_0x2aac65(0x176)],_0xb6f0d2=![]){const _0x31a42b=_0x2aac65;if(allSymbols&&!_0xb6f0d2)return;try{markets=await exchange[_0x31a42b(0x1e8)](),allSymbols=[],Object[_0x31a42b(0x173)](markets)[_0x31a42b(0x252)](_0x23eec0=>{const _0x2d7808=_0x31a42b;_0x23eec0[0x1]['active']&&_0x23eec0[0x1][_0x2d7808(0x222)]&&allSymbols[_0x2d7808(0x100)](_0x23eec0[0x0]);});}catch(_0x278bec){throw _0x278bec;}}async function initclient(){const _0x1387c4=_0x2aac65;emitLoadingProgress(),proxyEmit(_0x1387c4(0x25d),emittedConfiguration()),proxyEmit(_0x1387c4(0x1dc),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1387c4(0x1fa),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3eb2c9=getNormalizedPerformance();emitPerformance(_0x3eb2c9),getStartingBalances(_0x3eb2c9);}async function toggleBotMode(){const _0x23a20e=_0x2aac65;let _0x4e6ff9=dbConfig['get'](_0x23a20e(0x22b))[_0x23a20e(0x25b)]({'botID':botID})[_0x23a20e(0x22a)]();if(_0x4e6ff9){const _0x248d17=!_0x4e6ff9[_0x23a20e(0x23a)];dbConfig['get'](_0x23a20e(0x22b))[_0x23a20e(0x25b)]({'botID':botID})['assign']({'headless':_0x248d17})[_0x23a20e(0x1e9)](),config['headless']=_0x248d17,proxyEmit(_0x23a20e(0x25d),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x7d6d81=_0x2aac65;process[_0x7d6d81(0x275)]({'updatebotmanager':!![]},_0x4d0f39=>{});}async function loadCoins(_0x528de1){const _0x4f77b6=_0x2aac65;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3e5db5,_0x265357=0x0,_0x57c712=0x0;_0x528de1['forEach'](_0x45f113=>{loading['remainingSymbols']['push'](_0x45f113);}),loadingCanceled=![];let _0x1ee7f2=![];while(_0x3e5db5!=_0x528de1['length']){_0x3e5db5=0x0,_0x528de1[_0x4f77b6(0x252)](_0xa0cbc7=>{const _0x359cc2=_0x4f77b6;if(global[_0x359cc2(0x1ac)][noslash(_0xa0cbc7)]){loading['remainingSymbols']=loading[_0x359cc2(0x1c7)][_0x359cc2(0x20c)](_0x20d02c=>_0x20d02c!=_0xa0cbc7);if(!watchedSymbols['includes'](_0xa0cbc7))watchedSymbols[_0x359cc2(0x100)](_0xa0cbc7);_0x3e5db5++;}}),loading[_0x4f77b6(0x103)]=Math[_0x4f77b6(0x123)](_0x3e5db5/_0x528de1[_0x4f77b6(0x281)]*0x64);loading['progress']!=0x64&&(_0x57c712>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x57c712>0x78*0x5&&!_0x1ee7f2&&(loading[_0x4f77b6(0x26d)]=!![],emitLoadingProgress(),_0x1ee7f2=!![],logHistory(_0x4f77b6(0x1fc),_0x4f77b6(0x1e6)+loading[_0x4f77b6(0x1c7)][_0x4f77b6(0x20f)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x4f77b6(0x216)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x1fd3c6=_0x4f77b6;process[_0x1fd3c6(0x275)]({'stop':_0x1fd3c6(0x23f)},_0x3730d4=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4f77b6(0x26d)]=!![],emitLoadingProgress();break;}else _0x3e5db5!=_0x265357&&(_0x265357=_0x3e5db5,emitLoadingProgress()),_0x57c712++,await sleep(0xc8);}_0x3e5db5==_0x528de1[_0x4f77b6(0x281)]&&(coinsLoaded=!![],process['send']({'status':_0x4f77b6(0x1a2),'live':_0x4f77b6(0x145)},_0x61c400=>{}),_0x1ee7f2&&logHistory(_0x4f77b6(0x221),_0x4f77b6(0x1e0)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xa3cfef=_0x2aac65;proxyEmit(_0xa3cfef(0x25d),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x504e2a=_0x2aac65;let _0x379600=global[_0x504e2a(0x1ac)][stablecoins[_0x504e2a(0x1a4)][_0x504e2a(0x1cf)]],_0x80ac52=global[_0x504e2a(0x1ac)][stablecoins[_0x504e2a(0x191)][_0x504e2a(0x1cf)]];return{'eur':Number(_0x379600),'usd':Number(_0x80ac52)};}function capitalize(_0x55ed4c){const _0x55ffc1=_0x2aac65;return _0x55ed4c[_0x55ffc1(0x160)](0x0,0x1)['toUpperCase']()+_0x55ed4c[_0x55ffc1(0x160)](0x1);}function supportedExchanges(){const _0x2b7f66=_0x2aac65,_0x2d689c=['ws',_0x2b7f66(0x1f5),_0x2b7f66(0x157),_0x2b7f66(0x21b),_0x2b7f66(0x26c),_0x2b7f66(0x227),_0x2b7f66(0x126),_0x2b7f66(0x1f1),'fetchClosedOrders',_0x2b7f66(0x113)];let _0x5bfa45=[],_0x2f6abc=[],_0x5c5c5c=ccxt[_0x2b7f66(0xfe)][_0x2b7f66(0x1dc)];_0x5c5c5c[_0x2b7f66(0x252)](_0xd48667=>{const _0x3aca76=_0x2b7f66;try{const _0x563a56=new ccxt[(_0x3aca76(0xfe))][_0xd48667]();_0x2f6abc['push'](_0x563a56);}catch(_0x5449db){}}),_0x2f6abc[_0x2b7f66(0x252)](_0x507b93=>{const _0x21ced4=_0x2b7f66;let _0x1df1b1=0x0;_0x2d689c[_0x21ced4(0x252)](_0x27f6f0=>{const _0x26a714=_0x21ced4;_0x27f6f0 in _0x507b93['has']&&_0x507b93[_0x26a714(0x159)][_0x27f6f0]&&_0x1df1b1++;}),_0x1df1b1==_0x2d689c['length']&&_0x5bfa45[_0x21ced4(0x100)](capitalize(_0x507b93['id']));});let _0x197dd3=[];return _0x5c5c5c[_0x2b7f66(0x252)](_0x1d7453=>{const _0x270867=_0x2b7f66;_0x1d7453=capitalize(_0x1d7453);if(!_0x5bfa45[_0x270867(0x135)](_0x1d7453))_0x197dd3[_0x270867(0x100)](_0x1d7453);}),_0x5bfa45;}function setStartDatePerformance(){const _0x141d6e=_0x2aac65;if(config&&config[_0x141d6e(0x10d)][0x0][_0x141d6e(0x134)][_0x141d6e(0x281)]!=0x0){const _0xf0538b=config[_0x141d6e(0x10d)][0x0][_0x141d6e(0x134)];dbPerformance['get'](_0x141d6e(0x1ef))[_0x141d6e(0x25b)]({'date':config[_0x141d6e(0x14f)]})[_0x141d6e(0x1f6)]({'coins':_0xf0538b})[_0x141d6e(0x1e9)]();}}async function recreateCoinResults(){const _0x4cc5ca=_0x2aac65;let _0xba13a4,_0xd06464=[];try{const _0x29b3aa=fns[_0x4cc5ca(0x200)](fns[_0x4cc5ca(0x1f7)](config['startdate'][_0x4cc5ca(0x127)](/\//g,'-')),_0x4cc5ca(0x18a));for(const _0x43e562 of currentCoins){if(_0x43e562[_0x4cc5ca(0x1cf)]!=config[_0x4cc5ca(0x1d2)]){let _0x932b9b=0x0,_0x56326e,_0x3f8030;_0xba13a4=await getAllEventOrders(_0x43e562[_0x4cc5ca(0x1ec)]);if(_0xba13a4['length']>0x0)_0xba13a4[_0x4cc5ca(0x252)](_0x5bda82=>{const _0xb402b3=_0x4cc5ca,_0x490142=_0x43e562['symbol'][_0xb402b3(0x135)](config['basecoin']+'/');_0xd06464[_0xb402b3(0x100)]({'datetime':_0x5bda82[_0xb402b3(0x27b)],'coin':_0x43e562[_0xb402b3(0x1cf)],'symbol':_0x43e562[_0xb402b3(0x1ec)],'side':_0x5bda82[_0xb402b3(0x136)],'reverse':_0x490142,'amount':formatResult(_0x5bda82[_0xb402b3(0xfa)],0x8),'filled':formatResult(_0x5bda82[_0xb402b3(0xfa)],0x8),'price':formatResult(_0x5bda82['price'],0x8)}),_0x932b9b=_0x5bda82[_0xb402b3(0x136)]==_0xb402b3(0x1da)?_0x932b9b+_0x5bda82[_0xb402b3(0xfa)]:_0x932b9b-_0x5bda82['filled'];if(!_0x3f8030)_0x3f8030=_0x5bda82['price'];});_0x56326e=_0x43e562['number']-_0x932b9b;let _0x33c398;config[_0x4cc5ca(0x10d)]['forEach'](_0x8eb05b=>{const _0x1fc7b5=_0x4cc5ca;!_0x33c398&&(_0x33c398=_0x8eb05b['changes'][_0x1fc7b5(0x25b)](_0x3cb904=>_0x3cb904[_0x1fc7b5(0x1cf)]==_0x43e562['coin']),_0x33c398&&(_0x56326e=_0x33c398[_0x1fc7b5(0x273)],_0x3f8030=_0x33c398['price']));});let _0x3e33e1=dbCoinResults[_0x4cc5ca(0x20b)](_0x4cc5ca(0xfd))['find']({'coin':_0x43e562[_0x4cc5ca(0x1cf)]})['value']();_0x3e33e1={'coin':_0x43e562['coin'],'number':_0x56326e,'breakeven':_0x3f8030,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x4cc5ca(0xfd))['find']({'coin':_0x43e562['coin']})[_0x4cc5ca(0x1f6)](_0x3e33e1)[_0x4cc5ca(0x1e9)]();}}_0xd06464['sort']((_0x3e9c10,_0x51d089)=>_0x3e9c10['datetime']>_0x51d089[_0x4cc5ca(0x27b)]?0x1:_0x51d089['datetime']>_0x3e9c10[_0x4cc5ca(0x27b)]?-0x1:0x0);let _0x3b2fd6=0x0;for(let _0x3c3995 of _0xd06464){await updateCoinResults(_0x3c3995,!![]);}}catch(_0x2b4072){await handleError(_0x2b4072,_0x4cc5ca(0x178));}}async function getAllEventOrders(_0x3bd0e0){const _0x39f98b=_0x2aac65;let _0x4af9eb=[],_0x4dbd29=dbLogs[_0x39f98b(0x20b)](_0x39f98b(0x1a0))[_0x39f98b(0x20c)](_0x1f4bb4=>{const _0x43ea96=_0x39f98b,_0xd6c6f2=_0x1f4bb4[_0x43ea96(0x1a7)][_0x43ea96(0x1c8)]();return _0xd6c6f2['includes'](_0x3bd0e0[_0x43ea96(0x1c8)]())&&(_0xd6c6f2[_0x43ea96(0x135)](_0x43ea96(0x1bc))&&_0xd6c6f2['includes'](_0x43ea96(0x16a))||_0xd6c6f2[_0x43ea96(0x135)](_0x43ea96(0xfa))&&_0xd6c6f2[_0x43ea96(0x135)](_0x43ea96(0x16a)));})[_0x39f98b(0x26a)](_0x39f98b(0x187))[_0x39f98b(0x22a)]();return _0x4dbd29[_0x39f98b(0x252)](_0xcbcb4d=>{const _0x27da2a=_0x39f98b,_0x38859d=_0xcbcb4d[_0x27da2a(0x1a7)]['includes'](_0x27da2a(0x225))?_0x27da2a(0x225):'buy',_0x4030c9=/#([0-9]|\.)+\s/i,_0x396ffd=Number(_0x4030c9['exec'](_0xcbcb4d[_0x27da2a(0x1a7)])[0x0][_0x27da2a(0x117)](0x1)),_0x1477be=/@([0-9]|\.)+$/i,_0x46877c=Number(_0x1477be[_0x27da2a(0x27e)](_0xcbcb4d['event'])[0x0]['slice'](0x1));_0x4af9eb[_0x27da2a(0x100)]({'datetime':_0xcbcb4d[_0x27da2a(0x187)],'coin':symbolToCoin(_0x3bd0e0),'symbol':_0x3bd0e0,'side':_0x38859d,'amount':_0x396ffd,'filled':_0x396ffd,'price':_0x46877c});}),_0x4af9eb;}async function getAllOrders(_0x197c88,_0x1530b6){const _0xc937c2=_0x2aac65;let _0xef3fb5=[];while(_0x1530b6<exchange['milliseconds']()){const _0x10b61a=0x1f4,_0x740f17=await exchange[_0xc937c2(0x11d)](_0x197c88,_0x1530b6,_0x10b61a);if(_0x740f17[_0xc937c2(0x281)])_0x1530b6=_0x740f17[_0x740f17['length']-0x1][_0xc937c2(0x1b5)]+0x1,_0xef3fb5=_0xef3fb5['concat'](_0x740f17);else break;}return _0xef3fb5;}async function validate24hChanges(){const _0x56f2ca=_0x2aac65;for(const _0x16d479 of currentCoins){if(_0x16d479[_0x56f2ca(0x1cf)]!=config[_0x56f2ca(0x1d2)]){let _0x20de2b;_0x16d479[_0x56f2ca(0x248)]?_0x20de2b=formatResult((0x1/(global[_0x56f2ca(0x1cd)][noslash(_0x16d479[_0x56f2ca(0x1ec)])]/0x64+0x1)-0x1)*0x64,0x3):_0x20de2b=global[_0x56f2ca(0x1cd)][noslash(_0x16d479[_0x56f2ca(0x1ec)])],_0x20de2b<config['change24h']&&(logHistory(_0x56f2ca(0x1fc),_0x16d479[_0x56f2ca(0x1cf)]+_0x56f2ca(0x1c1)+_0x20de2b+'%'),logHistory(_0x56f2ca(0x1fc),_0x56f2ca(0x1e1)),logHistory(_0x56f2ca(0x1fc),_0x56f2ca(0x1ab)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x592423,_0x193d53){const _0x172cc2=_0x2aac65;if(!_0x592423)return!![];const _0x1e8d32=_0x193d53['split']('.'),_0x860094=_0x592423[_0x172cc2(0x143)]('.');for(var _0x1f2498=0x0;_0x1f2498<_0x860094[_0x172cc2(0x281)];_0x1f2498++){const _0x6e6071=~~_0x860094[_0x1f2498],_0x6a54d2=~~_0x1e8d32[_0x1f2498];if(_0x6e6071<_0x6a54d2)return!![];if(_0x6e6071>_0x6a54d2)return![];}return![];}async function oneTimeMigration(){const _0x31cfd9=_0x2aac65;let _0x9aed11=dbLogs[_0x31cfd9(0x20b)](_0x31cfd9(0x14a))[_0x31cfd9(0x22a)]();if(isOlderVersion(_0x9aed11,'2.3.5')){let _0x6d1116=[];const _0x2840cd=dbLogs[_0x31cfd9(0x20b)](_0x31cfd9(0x1a0))['value']();_0x2840cd['forEach'](_0x68058b=>{const _0x589017=_0x31cfd9;_0x6d1116['push']({'time':_0x68058b[_0x589017(0x187)],'type':_0x68058b[_0x589017(0x199)],'event':_0x68058b[_0x589017(0x1a7)]});}),dbLogs['get']('logs')['assign'](_0x6d1116)['write']();}let _0xe9dbdb=dbConfig[_0x31cfd9(0x20b)](_0x31cfd9(0x14a))['value']();if(isOlderVersion(_0xe9dbdb,'2.3.5')){let _0x39234d=dbConfig[_0x31cfd9(0x20b)]('bot')[_0x31cfd9(0x25b)]({'botID':botID})[_0x31cfd9(0x22a)]();if(_0x39234d){let _0x248db0=[];_0x39234d[_0x31cfd9(0x19a)][_0x31cfd9(0x252)](_0x12108a=>{const _0x1bdf6e=_0x31cfd9;_0x248db0[_0x1bdf6e(0x100)]({'coin':_0x12108a[_0x1bdf6e(0x1cf)],'number':_0x12108a[_0x1bdf6e(0x108)],'price':_0x12108a[_0x1bdf6e(0x121)]}),delete _0x12108a[_0x1bdf6e(0x108)],delete _0x12108a[_0x1bdf6e(0x121)];});if(_0x248db0['length']!==0x0)fs[_0x31cfd9(0x148)](configbackuppath+(_0x31cfd9(0x1ba)+botID+_0x31cfd9(0x1b9)),JSON[_0x31cfd9(0x26e)](_0x248db0,null,0x4),function(_0x138ecb){if(_0x138ecb){}});const _0x294825=(_0x256720,_0x395b61)=>{const _0x6af6ae=_0x31cfd9;let _0x2b52c2=[];_0x395b61[_0x6af6ae(0x252)](_0x5f1938=>{const _0x21ba4c=_0x6af6ae,_0x116b5c=_0x256720['find'](_0x538dc2=>_0x538dc2[_0x21ba4c(0x1cf)]==_0x5f1938[_0x21ba4c(0x1cf)]);if(!_0x116b5c)_0x2b52c2[_0x21ba4c(0x100)](_0x5f1938);});let _0x34689a=[];return _0x256720[_0x6af6ae(0x252)](_0x7404b7=>{const _0x56e76a=_0x6af6ae,_0x3790d3=_0x395b61['find'](_0x5375d2=>_0x5375d2[_0x56e76a(0x1cf)]==_0x7404b7[_0x56e76a(0x1cf)]);if(!_0x3790d3||_0x3790d3[_0x56e76a(0x273)]==0x0&&_0x7404b7[_0x56e76a(0x273)]!=0x0)_0x34689a[_0x56e76a(0x100)](_0x7404b7);}),{'missingDay1':_0x2b52c2,'notInDay2':_0x34689a};},_0xde6682=dbPerformance[_0x31cfd9(0x20b)](_0x31cfd9(0x1ef))[_0x31cfd9(0x196)]()[_0x31cfd9(0x22a)]();if(_0xde6682[_0x31cfd9(0x281)]>0x1){const {missingDay1:_0x5de93d,notInDay2:_0x5941d5}=_0x294825(_0x248db0,_0xde6682[0x1][_0x31cfd9(0xfd)]);_0x248db0=[..._0x248db0,..._0x5de93d],_0x5941d5['forEach'](_0x278307=>{const _0x1b4bea=_0x31cfd9;let _0x23acf3=_0x248db0[_0x1b4bea(0x1e2)](_0x185a4e=>_0x185a4e[_0x1b4bea(0x1cf)]==_0x278307['coin']);_0x23acf3!=-0x1&&_0x248db0[_0x1b4bea(0x18b)](_0x23acf3,0x1);});}_0x248db0['sort']((_0x44cb1d,_0x177644)=>_0x44cb1d[_0x31cfd9(0x1cf)]>_0x177644[_0x31cfd9(0x1cf)]?0x1:_0x177644[_0x31cfd9(0x1cf)]>_0x44cb1d[_0x31cfd9(0x1cf)]?-0x1:0x0);let _0xa3e1c4=[{'date':_0x39234d[_0x31cfd9(0x14f)],'changes':_0x248db0}];_0xde6682['length']>0x2&&_0xde6682[_0x31cfd9(0x252)]((_0x5f388c,_0x857454)=>{const _0x38d4c3=_0x31cfd9;if(_0x857454>0x0&&_0x857454<_0xde6682[_0x38d4c3(0x281)]-0x1){const {missingDay1:_0x14099a,notInDay2:_0x285b18}=_0x294825(_0xde6682[_0x857454][_0x38d4c3(0xfd)],_0xde6682[_0x857454+0x1][_0x38d4c3(0xfd)]);_0x248db0=[],(_0x14099a[_0x38d4c3(0x281)]!=0x0||_0x285b18['length']!=0x0)&&(_0x14099a[_0x38d4c3(0x281)]!=0x0&&_0x248db0[_0x38d4c3(0x100)](..._0x14099a),_0x285b18[_0x38d4c3(0x281)]!=0x0&&(_0x285b18['forEach'](_0x597825=>{const _0x5a0f4a=_0x38d4c3;_0x597825['number']=-_0x597825[_0x5a0f4a(0x273)];}),_0x248db0['push'](..._0x285b18)),_0x248db0[_0x38d4c3(0x13d)]((_0x38a1d6,_0x53156a)=>_0x38a1d6[_0x38d4c3(0x1cf)]>_0x53156a['coin']?0x1:_0x53156a['coin']>_0x38a1d6[_0x38d4c3(0x1cf)]?-0x1:0x0),_0xa3e1c4[_0x38d4c3(0x100)]({'date':_0xde6682[_0x857454+0x1][_0x38d4c3(0x258)],'changes':_0x248db0}));}}),dbConfig[_0x31cfd9(0x20b)]('bot')[_0x31cfd9(0x25b)]({'botID':botID})[_0x31cfd9(0x1f6)]({..._0x39234d,'liquidity':_0xa3e1c4})['write']();}}if(isOlderVersion(_0xe9dbdb,'2.6.0')){let _0x5f1e91=dbConfig[_0x31cfd9(0x20b)]('bot')[_0x31cfd9(0x25b)]({'botID':botID})[_0x31cfd9(0x22a)]();if(_0x5f1e91){const _0x36816c=_0x5f1e91['exchange'],_0x47cede=_0x36816c?capitalize(_0x36816c):_0x31cfd9(0x166);dbConfig[_0x31cfd9(0x20b)](_0x31cfd9(0x22b))['find']({'botID':botID})['assign']({'exchange':_0x47cede})[_0x31cfd9(0x1e9)]();}}let _0x4f0222=dbPerformance[_0x31cfd9(0x20b)](_0x31cfd9(0x14a))['value']();isOlderVersion(_0x4f0222,_0x31cfd9(0x1d6))&&setStartDatePerformance();let _0x51263b=dbCoinResults[_0x31cfd9(0x20b)](_0x31cfd9(0x14a))['value']();if(isOlderVersion(_0x51263b,_0x31cfd9(0x174))){let _0x1ff69a=dbCoinResults[_0x31cfd9(0x20b)](_0x31cfd9(0xfd))[_0x31cfd9(0x22a)]();if(_0x1ff69a[_0x31cfd9(0x281)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x47a3ae=_0x2aac65;dbConfig[_0x47a3ae(0x232)](_0x47a3ae(0x14a),serverversion)[_0x47a3ae(0x1e9)](),dbPerformance[_0x47a3ae(0x232)]('version',serverversion)[_0x47a3ae(0x1e9)](),dbLogs[_0x47a3ae(0x232)](_0x47a3ae(0x14a),serverversion)[_0x47a3ae(0x1e9)](),dbCoinResults[_0x47a3ae(0x232)](_0x47a3ae(0x14a),serverversion)['write']();}function getConfiguration(_0x57d702){const _0x529d08=_0x2aac65;let _0x2bd83a=dbConfig[_0x529d08(0x20b)](_0x529d08(0x22b))[_0x529d08(0x25b)]({'botID':_0x57d702})['value']();if(_0x2bd83a){let _0x42de8d=![];typeof _0x2bd83a[_0x529d08(0x1ee)]==_0x529d08(0x261)&&(_0x2bd83a={..._0x2bd83a,'threshold':Number(_0x2bd83a['threshold'])},_0x42de8d=!![]),_0x2bd83a[_0x529d08(0x235)]==null&&(_0x2bd83a={..._0x2bd83a,'change24h':-0x14},_0x42de8d=!![]),!_0x2bd83a[_0x529d08(0x110)]&&(_0x2bd83a={..._0x2bd83a,'fiat':'USD'},_0x42de8d=!![]),!_0x2bd83a[_0x529d08(0x177)]&&(_0x2bd83a={..._0x2bd83a,'onepagemode':settings[_0x529d08(0x177)]},_0x42de8d=!![]),!_0x2bd83a[_0x529d08(0x1bb)]&&(_0x2bd83a={..._0x2bd83a,'colorscheme':_0x529d08(0x181)},_0x42de8d=!![]),!_0x2bd83a[_0x529d08(0x120)]&&(_0x2bd83a={..._0x2bd83a,'autoliquidity':!![]},_0x42de8d=!![]),_0x42de8d&&(_0x2bd83a={'botID':_0x2bd83a[_0x529d08(0x163)],'exchange':_0x2bd83a[_0x529d08(0x176)],'apiKey':_0x2bd83a[_0x529d08(0x272)],'apiSecret':_0x2bd83a[_0x529d08(0x21c)],'apiPassword':_0x2bd83a[_0x529d08(0x114)],'basecoin':_0x2bd83a[_0x529d08(0x1d2)],'botname':_0x2bd83a[_0x529d08(0x202)],'showname':_0x2bd83a[_0x529d08(0x19d)],'threshold':_0x2bd83a[_0x529d08(0x1ee)],'ordertype':_0x2bd83a['ordertype'],'timeout':_0x2bd83a['timeout'],'fiat':_0x2bd83a[_0x529d08(0x110)],'startdate':_0x2bd83a[_0x529d08(0x14f)],'recreate':_0x2bd83a[_0x529d08(0x105)],'timeshift':_0x2bd83a['timeshift'],'onepagemode':_0x2bd83a[_0x529d08(0x177)],'headless':_0x2bd83a[_0x529d08(0x23a)],'cooldown':_0x2bd83a['cooldown'],'change24h':_0x2bd83a[_0x529d08(0x235)],'emojibuy':_0x2bd83a['emojibuy'],'emojisell':_0x2bd83a[_0x529d08(0x262)],'colorscheme':_0x2bd83a[_0x529d08(0x1bb)],'portfolio':_0x2bd83a[_0x529d08(0x19a)],'autoliquidity':_0x2bd83a[_0x529d08(0x120)],'liquidity':_0x2bd83a['liquidity'],'openOrders':_0x2bd83a[_0x529d08(0x132)]},dbConfig[_0x529d08(0x20b)]('bot')['remove']()[_0x529d08(0x1e9)](),dbConfig[_0x529d08(0x20b)](_0x529d08(0x22b))[_0x529d08(0x100)](_0x2bd83a)[_0x529d08(0x1e9)]());}else _0x2bd83a={'botID':_0x57d702,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x57d702,'showname':![],'threshold':0x3,'ordertype':_0x529d08(0x1bc),'timeout':0x14,'fiat':_0x529d08(0x24c),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x529d08(0x21d)],'onepagemode':settings[_0x529d08(0x177)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x529d08(0x181),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2bd83a;}function emittedConfiguration(){const _0x331f50=_0x2aac65;let _0x2bde03;if(config[_0x331f50(0x272)]=='')_0x2bde03={...config,'configstate':_0x331f50(0x151)};else config[_0x331f50(0x272)]==_0x331f50(0x276)?_0x2bde03={...config,'configstate':'recovery'}:(_0x2bde03={...config,'apiKey':_0x331f50(0x12b),'apiSecret':'************'},config[_0x331f50(0x114)]&&(_0x2bde03[_0x331f50(0x114)]=_0x331f50(0x12b)));return _0x2bde03;}function getSettings(){const _0x53758c=_0x2aac65;return dbSettings[_0x53758c(0x20b)]('settings')[_0x53758c(0x22a)]();}function getSecure(){const _0x2a0e64=_0x2aac65;return dbSecure['get'](_0x2a0e64(0x141))[_0x2a0e64(0x22a)]()||{};}function updateTimeshift(_0x46b4db){const _0x13ba88=_0x2aac65;let _0x9476aa=dbConfig[_0x13ba88(0x20b)](_0x13ba88(0x22b))['find']({'botID':botID})[_0x13ba88(0x22a)]();_0x9476aa&&dbConfig['get']('bot')[_0x13ba88(0x25b)]({'botID':botID})[_0x13ba88(0x1f6)]({'timeshift':_0x46b4db})[_0x13ba88(0x1e9)](),config[_0x13ba88(0x21d)]=_0x46b4db,proxyEmit(_0x13ba88(0x25d),emittedConfiguration());}function updateOnepagemode(_0x13fd31){const _0x319f38=_0x2aac65;let _0x2d898c=dbConfig[_0x319f38(0x20b)]('bot')[_0x319f38(0x25b)]({'botID':botID})[_0x319f38(0x22a)]();_0x2d898c&&dbConfig[_0x319f38(0x20b)](_0x319f38(0x22b))[_0x319f38(0x25b)]({'botID':botID})['assign']({'onepagemode':_0x13fd31})['write'](),config[_0x319f38(0x177)]=_0x13fd31,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1ec481){const _0x16db54=_0x2aac65;logger[_0x16db54(0x22f)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x16db54(0x22f)](_0x16db54(0x12a));let _0x142526=[],_0x50b3c2=![],_0xf9662f=![],_0x752fde=[];_0x1ec481[_0x16db54(0x19a)][_0x16db54(0x252)](_0x39bd83=>{const _0x1a71dc=_0x16db54;if(!_0x39bd83[_0x1a71dc(0x156)]&&_0x39bd83[_0x1a71dc(0x1cf)]!=_0x1ec481[_0x1a71dc(0x1d2)])_0x752fde[_0x1a71dc(0x100)](_0x39bd83[_0x1a71dc(0x1ec)]);}),_0x752fde[_0x16db54(0x252)](_0x146e09=>{const _0x15ba5d=_0x16db54,_0x2d227b=watchedSymbols[_0x15ba5d(0x135)](_0x146e09);!_0x2d227b&&_0x142526[_0x15ba5d(0x100)](_0x146e09);}),_0x752fde[_0x16db54(0x252)](_0x8143c5=>{const _0x49e908=_0x16db54,_0x2b7559=currentCoins[_0x49e908(0x25b)](_0x4ff4e0=>_0x4ff4e0[_0x49e908(0x1ec)]==_0x8143c5);!_0x2b7559&&(_0x50b3c2=!![]);}),currentCoins[_0x16db54(0x252)](_0x1252bc=>{const _0x336e28=_0x16db54;if(_0x1252bc[_0x336e28(0x1cf)]!=config[_0x336e28(0x1d2)]){const _0x5f01ac=_0x752fde[_0x336e28(0x25b)](_0x7e0838=>_0x7e0838==_0x1252bc[_0x336e28(0x1ec)]);!_0x5f01ac&&(_0x50b3c2=!![]);}}),_0x1ec481[_0x16db54(0x19a)]['forEach'](_0x675fa=>{const _0x257f49=_0x16db54,_0xf010c2=config['portfolio'][_0x257f49(0x25b)](_0x58e4e4=>_0x58e4e4[_0x257f49(0x1cf)]==_0x675fa[_0x257f49(0x1cf)]);if(_0xf010c2&&_0x675fa[_0x257f49(0x1ae)]!=_0xf010c2[_0x257f49(0x1ae)])_0xf9662f=!![];});let _0x36bc45=dbConfig[_0x16db54(0x20b)](_0x16db54(0x22b))[_0x16db54(0x25b)]({'botID':botID})['value']();_0x1ec481={..._0x1ec481,'apiKey':crypt['decrypt'](secure['privateKey'],_0x1ec481['apiKey'])[_0x16db54(0x1b8)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x1ec481[_0x16db54(0x21c)])['message']};_0x1ec481['apiPassword']&&(_0x1ec481[_0x16db54(0x114)]=crypt[_0x16db54(0x139)](secure[_0x16db54(0x15f)],_0x1ec481[_0x16db54(0x114)])[_0x16db54(0x1b8)]);let _0x3167b6=![];if(_0x36bc45){_0x1ec481[_0x16db54(0x272)]==_0x16db54(0x12b)?_0x1ec481[_0x16db54(0x272)]=config['apiKey']:_0x3167b6=!![];_0x1ec481[_0x16db54(0x21c)]=='************'?_0x1ec481[_0x16db54(0x21c)]=config[_0x16db54(0x21c)]:_0x3167b6=!![];if(_0x1ec481['apiPassword']==_0x16db54(0x12b))_0x1ec481[_0x16db54(0x114)]=config['apiPassword'];else{if(_0x1ec481[_0x16db54(0x114)])_0x3167b6=!![];}dbConfig[_0x16db54(0x20b)](_0x16db54(0x22b))[_0x16db54(0x25b)]({'botID':botID})[_0x16db54(0x1f6)](_0x1ec481)[_0x16db54(0x1e9)]();}else dbConfig['get'](_0x16db54(0x22b))[_0x16db54(0x100)](_0x1ec481)[_0x16db54(0x1e9)](),_0x3167b6=!![],process['send']({'status':_0x16db54(0x1a2),'live':_0x16db54(0x145)},_0xea964c=>{});process[_0x16db54(0x275)]({'botname':_0x1ec481[_0x16db54(0x202)]},_0x5263e4=>{}),updateBotManager(),config={..._0x1ec481},proxyEmit(_0x16db54(0x197)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3167b6)await reset(_0x142526,!![]);else _0x50b3c2||_0xf9662f?await reset(_0x142526,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x16db54(0x212));}async function storeHeadless(_0xf67ce3){const _0x55f2a0=_0x2aac65,_0x58e3fc={...config,'headless':_0xf67ce3[_0x55f2a0(0x23a)]};let _0x4ca441=dbConfig[_0x55f2a0(0x20b)](_0x55f2a0(0x22b))[_0x55f2a0(0x25b)]({'botID':botID})[_0x55f2a0(0x22a)]();_0x4ca441&&dbConfig[_0x55f2a0(0x20b)](_0x55f2a0(0x22b))[_0x55f2a0(0x25b)]({'botID':botID})['assign'](_0x58e3fc)[_0x55f2a0(0x1e9)](),config={..._0x58e3fc},updateBotManager(),proxyEmit(_0x55f2a0(0x25d),emittedConfiguration());}async function storeFiat(_0x3d5631){const _0x49f7e7=_0x2aac65,_0x5eaad2={...config,'fiat':_0x3d5631};let _0x3cbc60=dbConfig[_0x49f7e7(0x20b)](_0x49f7e7(0x22b))[_0x49f7e7(0x25b)]({'botID':botID})['value']();_0x3cbc60&&dbConfig[_0x49f7e7(0x20b)](_0x49f7e7(0x22b))[_0x49f7e7(0x25b)]({'botID':botID})['assign'](_0x5eaad2)[_0x49f7e7(0x1e9)](),config={..._0x5eaad2},proxyEmit(_0x49f7e7(0x25d),emittedConfiguration());}function resetHistory(){const _0x19af7e=_0x2aac65;logger[_0x19af7e(0x11c)](_0x19af7e(0x153));try{if(fs[_0x19af7e(0x150)](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+_0x19af7e(0x13f))))fs[_0x19af7e(0x111)](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+_0x19af7e(0x13f)));if(fs[_0x19af7e(0x150)](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+'-performance.json')))fs['unlinkSync'](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+_0x19af7e(0x238)));if(fs[_0x19af7e(0x150)](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+_0x19af7e(0x24b))))fs[_0x19af7e(0x111)](path[_0x19af7e(0x20f)](configpath,_0x19af7e(0x154)+botID+'-results.json'));}catch(_0x1ace3e){if(_0x1ace3e)logger[_0x19af7e(0x11c)](_0x19af7e(0xfc),_0x1ace3e);}const _0x14657a=getDate();let _0x5e8e23=[];currentCoins[_0x19af7e(0x252)](_0x2a3390=>{const _0xc72dc9=_0x19af7e;_0x5e8e23[_0xc72dc9(0x100)]({'coin':_0x2a3390[_0xc72dc9(0x1cf)],'number':_0x2a3390[_0xc72dc9(0x273)],'price':_0x2a3390['last']});});let _0x357b02=dbConfig[_0x19af7e(0x20b)](_0x19af7e(0x22b))[_0x19af7e(0x25b)]({'botID':botID})[_0x19af7e(0x22a)]();_0x357b02&&(dbConfig[_0x19af7e(0x20b)](_0x19af7e(0x22b))[_0x19af7e(0x25b)]({'botID':botID})[_0x19af7e(0x1f6)]({'liquidity':[{'date':_0x14657a,'changes':_0x5e8e23}]})[_0x19af7e(0x1e9)](),config[_0x19af7e(0x10d)]=[]),process[_0x19af7e(0x275)]({'stop':_0x19af7e(0x23f)},_0x2d2145=>{});}function noslash(_0x5c2b8e){const _0x4ee1d5=_0x2aac65;return _0x5c2b8e[_0x4ee1d5(0x127)]('/','');}function updateHighestFee(_0x11b3f2){const _0x20d02a=_0x2aac65;if(_0x11b3f2[_0x20d02a(0x248)]){let _0x4eb5c6={'filled':_0x11b3f2[_0x20d02a(0xfa)]*_0x11b3f2[_0x20d02a(0x185)],'amount':_0x11b3f2['filled']*_0x11b3f2[_0x20d02a(0x185)],'side':_0x11b3f2[_0x20d02a(0x136)]==_0x20d02a(0x225)?_0x20d02a(0x1da):_0x20d02a(0x225),'price':0x1/_0x11b3f2[_0x20d02a(0x185)]};_0x11b3f2={..._0x11b3f2,..._0x4eb5c6};}const _0x35f8f1=defaultFee*_0x11b3f2[_0x20d02a(0xfa)]*_0x11b3f2[_0x20d02a(0x185)];lastFees[_0x20d02a(0x23d)][_0x20d02a(0x281)]===0x14&&lastFees[_0x20d02a(0x23d)][_0x20d02a(0x142)](),lastFees[_0x20d02a(0x23d)][_0x20d02a(0x100)](_0x35f8f1),lastFees[_0x20d02a(0x133)]=Math[_0x20d02a(0x264)](...lastFees[_0x20d02a(0x23d)]);}async function updateNumberCoinsCcxt(_0x5f36e2){const _0x6f800e=_0x2aac65;logger[_0x6f800e(0x22f)]('0\x20-\x20EXECUTION:\x20'+_0x5f36e2['symbol']+_0x6f800e(0x24a)+_0x5f36e2[_0x6f800e(0x268)]+_0x6f800e(0x24a)+_0x5f36e2['id']);let _0x54b8ef=_0x5f36e2[_0x6f800e(0x268)],_0x2e5e45=![];currentCoins[_0x6f800e(0x252)](_0xfd4280=>{const _0x105c9d=_0x6f800e;_0xfd4280[_0x105c9d(0x1ec)]==_0x5f36e2[_0x105c9d(0x1ec)]&&(_0x2e5e45=!![]);});if(!_0x2e5e45)return;const _0xf419fb=currentCoins[_0x6f800e(0x25b)](_0x121dc=>_0x121dc['symbol']==_0x5f36e2[_0x6f800e(0x1ec)]),_0x425cfb=_0x580684=>{const _0x1da2e2=_0x6f800e;if(_0xf419fb)_0xf419fb[_0x1da2e2(0x10f)]=_0x580684;};if(_0x54b8ef==_0x6f800e(0x1a3))_0x425cfb('open');else{if(_0x54b8ef==_0x6f800e(0x16f)){_0x425cfb(_0x6f800e(0x16f));const _0x147b5f=await getCoins();[currentCoins,currentCoinsAll]=_0x147b5f,await getOpenOrders(),handleOpenOrders();}else{if(_0x54b8ef=='closed'){logger[_0x6f800e(0x22f)](_0x6f800e(0x13c)+_0x5f36e2['symbol']+_0x6f800e(0x24a)+_0x5f36e2['filled']+_0x6f800e(0x24a)+_0x5f36e2['id']);let _0x504587=![];if(lastOrders)for(const _0x8ef10e of lastOrders){const _0x407b73=0xc8,_0x32348c=0x1388;let _0x4f75fd=0x0;while(!_0x8ef10e['orderId']&&_0x4f75fd*_0x407b73<_0x32348c){_0x4f75fd++,await sleep(_0x407b73);}if(_0x4f75fd>0x0)logger[_0x6f800e(0x22f)](_0x6f800e(0x266)+_0x4f75fd*_0x407b73/0x3e8+_0x6f800e(0x11b));if(_0x8ef10e['orderId']==_0x5f36e2['id']){logger['debug'](_0x6f800e(0x1d4)+_0x5f36e2['id']),_0x504587=!![];if(_0x8ef10e[_0x6f800e(0xfa)]==0x0){logger[_0x6f800e(0x22f)](_0x6f800e(0x1b0)+_0x5f36e2['id']);if(_0x5f36e2[_0x6f800e(0x18d)])_0x8ef10e[_0x6f800e(0x185)]=_0x5f36e2[_0x6f800e(0x18d)];else{if(_0x5f36e2[_0x6f800e(0x185)])_0x8ef10e[_0x6f800e(0x185)]=_0x5f36e2[_0x6f800e(0x185)];else{}}_0x8ef10e[_0x6f800e(0xfa)]=_0x5f36e2[_0x6f800e(0xfa)],updateHighestFee(_0x8ef10e),_0x425cfb('filled'),await validateOrders();if(lockOrders==ORDERS[_0x6f800e(0x1f9)]){const _0x35f6e2=await getCoins();[currentCoins,currentCoinsAll]=_0x35f6e2;}_0x8ef10e[_0x6f800e(0x218)]={'currency':_0x5f36e2[_0x6f800e(0x218)]?_0x5f36e2[_0x6f800e(0x218)][_0x6f800e(0x17a)]:null,'cost':_0x5f36e2[_0x6f800e(0x218)]?_0x5f36e2[_0x6f800e(0x218)][_0x6f800e(0x1f2)]:0x0},await updateCoinResults(_0x8ef10e);}}}if(!_0x504587){logger['debug'](_0x6f800e(0x1a9)+_0x5f36e2['id']),_0x425cfb(_0x6f800e(0xfa));const _0x1bc73b=await getCoins();[currentCoins,currentCoinsAll]=_0x1bc73b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3d6014=JSON[_0x6f800e(0x20d)](lastBalances[_0x6f800e(0x19a)]);const _0x785788=_0x3d6014[_0x6f800e(0x25b)](_0x50e7c1=>_0x50e7c1[_0x6f800e(0x1ec)]==_0x5f36e2[_0x6f800e(0x1ec)]);if(_0x785788){if(_0x54b8ef==_0x6f800e(0x1a3))_0x785788[_0x6f800e(0x10f)]=_0x785788['orderstatus']==_0x6f800e(0xfa)?_0x6f800e(0xfa):'open';else{if(_0x54b8ef==_0x6f800e(0x16f))_0x785788['orderstatus']=_0x785788[_0x6f800e(0x10f)]==_0x6f800e(0xfa)?_0x6f800e(0xfa):_0x6f800e(0x16f);else _0x54b8ef==_0x6f800e(0x183)&&(_0x785788[_0x6f800e(0x10f)]=_0x6f800e(0xfa));}}lastBalances={...lastBalances,'portfolio':JSON[_0x6f800e(0x26e)](_0x3d6014)},proxyEmit(_0x6f800e(0x1fa),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1d37cf=_0x2aac65;await getOpenOrders();let _0x3339a6=![];currentCoins[_0x1d37cf(0x252)](_0x3f6bd2=>{const _0x54e664=_0x1d37cf;_0x3339a6=allOpenOrders['find'](_0x25ae52=>_0x25ae52[_0x54e664(0x1ec)]==_0x3f6bd2[_0x54e664(0x1ec)]),_0x3f6bd2[_0x54e664(0x10f)]=_0x3339a6?'open':_0x54e664(0x226);});}async function getCoins(_0x311e96=!![],_0x2591d3=config[_0x2aac65(0x1d2)]){const _0x2e553a=_0x2aac65;let _0x177f5a,_0x37ab40=[],_0xe1278e=[],_0x334ad3=[],_0x17cf32=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x177f5a=await exchange['fetchBalance'](),mybalances=_0x177f5a[_0x2e553a(0x189)];for(const [_0x3dbbfc,_0x545127]of Object[_0x2e553a(0x173)](mybalances)){_0x17cf32[_0x2e553a(0x100)](_0x3dbbfc);}if(_0x2591d3=='')for(const [_0x5e0d3b,_0x308ad5]of Object[_0x2e553a(0x173)](mybalances)){_0x308ad5!=0x0&&_0xe1278e[_0x2e553a(0x100)]({'coin':_0x5e0d3b});}else{let _0x178343=![];for(const [_0x57236a,_0x13f63f]of Object[_0x2e553a(0x173)](mybalances)){if(_0x17cf32['includes'](_0x57236a)){const _0x2afe82=config[_0x2e553a(0x19a)][_0x2e553a(0x25b)](_0x238810=>_0x238810[_0x2e553a(0x1cf)]==_0x57236a),_0x1250dc=_0x57236a+'/'+_0x2591d3,_0x40c2a1=_0x2591d3+'/'+_0x57236a,_0x2b0575=currentCoins[_0x2e553a(0x25b)](_0xe15f3a=>_0xe15f3a[_0x2e553a(0x1cf)]==_0x57236a);_0x178343=![];if((_0x13f63f!=0x0||_0x2afe82)&&(allSymbols['includes'](_0x1250dc)||_0x57236a==_0x2591d3))_0x57236a!=_0x2591d3&&_0x37ab40['push'](_0x1250dc),_0xe1278e['push']({'coin':_0x57236a,'symbol':_0x1250dc,'reverse':![],'number':Math[_0x2e553a(0x264)](_0x13f63f+(_0x2afe82&&_0x2afe82['offset']||0x0),0x0),'orderstatus':_0x2b0575?_0x2b0575[_0x2e553a(0x10f)]:_0x2e553a(0x226)});else(_0x13f63f!=0x0||_0x2afe82)&&allSymbols['includes'](_0x40c2a1)&&(_0x57236a!=_0x2591d3&&_0x37ab40[_0x2e553a(0x100)](_0x40c2a1),_0xe1278e[_0x2e553a(0x100)]({'coin':_0x57236a,'symbol':_0x40c2a1,'reverse':!![],'number':Math[_0x2e553a(0x264)](_0x13f63f+(_0x2afe82&&_0x2afe82[_0x2e553a(0x1ae)]||0x0),0x0),'orderstatus':_0x2b0575?_0x2b0575[_0x2e553a(0x10f)]:_0x2e553a(0x226)}));}}}}catch(_0x2ff26e){if(!_0x311e96)handleErrorNoStop(_0x2ff26e,_0x2e553a(0x1e4));else await handleError(_0x2ff26e,_0x2e553a(0x1e4));}return _0x334ad3=cloneDeep(_0xe1278e),_0xe1278e=_0xe1278e[_0x2e553a(0x20c)](_0x453912=>{const _0x21c465=_0x2e553a,_0x41ebef=config[_0x21c465(0x19a)][_0x21c465(0x25b)](_0x3cc864=>_0x3cc864[_0x21c465(0x1cf)]==_0x453912[_0x21c465(0x1cf)]);return _0x41ebef&&!_0x41ebef[_0x21c465(0x156)];}),[_0xe1278e,_0x334ad3];}async function getCoinNumber(_0x2f21ff){const _0x5c8976=_0x2aac65;let _0x2a2ed9;try{const _0x246bbb=await exchange['fetchBalance']();_0x2a2ed9=_0x246bbb[_0x5c8976(0x189)][_0x2f21ff];}catch(_0x5654a2){await handleError(_0x5654a2,_0x5c8976(0x244));}return _0x2a2ed9;}async function getOpenOrders(){const _0x5af8c9=_0x2aac65;let _0xbacfde;allOpenOrders=[];try{for(const _0x29bfd3 of config[_0x5af8c9(0x19a)]){!_0x29bfd3[_0x5af8c9(0x156)]&&_0x29bfd3[_0x5af8c9(0x1cf)]!=config[_0x5af8c9(0x1d2)]&&(_0xbacfde=await exchange[_0x5af8c9(0x1f1)](_0x29bfd3['symbol']),_0xbacfde['length']>0x0&&allOpenOrders['push'](_0xbacfde[0x0]));}}catch(_0x48a8d1){await handleError(_0x48a8d1,_0x5af8c9(0x11a));}}async function handleOpenOrders(_0x35a943=0x0){const _0xf3b7=_0x2aac65;allOpenOrders[_0xf3b7(0x281)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x35a943==0x0?(logger[_0xf3b7(0x22f)](_0xf3b7(0x20e)),_0x35a943++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xf3b7(0x22f)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0xf3b7(0x14b))));}async function testAPI(_0x577a2a){const _0x1b94cb=_0x2aac65,_0x7801bc=ccxt[_0x1b94cb(0xfe)][_0x577a2a[_0x1b94cb(0x176)]['toLowerCase']()],_0x30b5a5=new _0x7801bc({'apiKey':_0x577a2a['apiKey'],'secret':_0x577a2a['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x577a2a['apiPassword'])_0x30b5a5[_0x1b94cb(0x213)]=_0x577a2a['apiPassword'];try{await _0x30b5a5[_0x1b94cb(0x1e8)]();}catch(_0x2d5193){throw _0x2d5193;}}function cloneDeep(_0x5be5bc){const _0x5c3455=_0x2aac65;return JSON[_0x5c3455(0x20d)](JSON[_0x5c3455(0x26e)](_0x5be5bc));}async function getPortfolio(_0x2df1d0){const _0x49aeba=_0x2aac65;let _0x4c9261=[],_0x122cf5=[],_0x5df3b2=[],_0x3682fd;if(_0x2df1d0[_0x49aeba(0x272)]!==_0x49aeba(0x12b)||_0x2df1d0[_0x49aeba(0x21c)]!==_0x49aeba(0x12b)||_0x2df1d0[_0x49aeba(0x114)]&&_0x2df1d0[_0x49aeba(0x114)]!==_0x49aeba(0x12b)){if(config['exchange']){if(_0x2df1d0[_0x49aeba(0x272)]==_0x49aeba(0x12b))_0x2df1d0['apiKey']=config[_0x49aeba(0x272)];if(_0x2df1d0[_0x49aeba(0x21c)]==_0x49aeba(0x12b))_0x2df1d0[_0x49aeba(0x21c)]=config[_0x49aeba(0x21c)];if(_0x2df1d0[_0x49aeba(0x114)]==_0x49aeba(0x12b))_0x2df1d0[_0x49aeba(0x114)]=config[_0x49aeba(0x114)];try{await testAPI(_0x2df1d0);}catch(_0x33d1ee){if(_0x33d1ee[_0x49aeba(0x16e)]()[_0x49aeba(0x135)](_0x49aeba(0x229))){logger[_0x49aeba(0x22f)](_0x49aeba(0x101)),proxyEmit('portfolio',![]);return;}else{handleError(_0x33d1ee,_0x49aeba(0x246));return;}}}await initExchange(_0x2df1d0['exchange'],_0x2df1d0[_0x49aeba(0x272)],_0x2df1d0[_0x49aeba(0x21c)],_0x2df1d0[_0x49aeba(0x114)]);try{await loadSymbols(_0x2df1d0['exchange'],!![]);}catch(_0x588fd0){if(_0x588fd0[_0x49aeba(0x16e)]()['includes'](_0x49aeba(0x229))){proxyEmit(_0x49aeba(0x19a),![]);return;}else{handleError(_0x588fd0,_0x49aeba(0x205));return;}}const _0xbfa791=await getCoins(![],_0x2df1d0['basecoin']);_0x5df3b2=cloneDeep(_0xbfa791[0x1]);}else _0x5df3b2=cloneDeep(currentCoinsAll);if(_0x2df1d0[_0x49aeba(0x1d2)]=='')proxyEmit(_0x49aeba(0x19a),_0x5df3b2);else{_0x5df3b2[_0x49aeba(0x252)](_0x229f84=>{const _0xac72bc=_0x49aeba;if(_0x229f84[_0xac72bc(0x1cf)]!=_0x2df1d0[_0xac72bc(0x1d2)])_0x4c9261['push'](_0x229f84[_0xac72bc(0x1ec)]);});try{_0x122cf5=await exchange[_0x49aeba(0x1f5)](_0x4c9261);}catch(_0x224b45){if(_0x224b45['toString']()['includes'](_0x49aeba(0x229))){proxyEmit(_0x49aeba(0x19a),![]);return;}else{handleError(_0x224b45,'getPortfolio(2)');return;}}_0x5df3b2['forEach'](_0x44dbe3=>{const _0x35d593=_0x49aeba;_0x44dbe3[_0x35d593(0x1cf)]!=_0x2df1d0[_0x35d593(0x1d2)]?_0x3682fd=_0x44dbe3['reverse']?0x1/_0x122cf5[_0x44dbe3[_0x35d593(0x1ec)]][_0x35d593(0x107)]:_0x122cf5[_0x44dbe3[_0x35d593(0x1ec)]][_0x35d593(0x107)]:_0x3682fd=0x1,_0x44dbe3['price']=formatResult(_0x3682fd,0x8);}),proxyEmit('portfolio',_0x5df3b2);}}function truncateTradeAmount(_0x4f41c5,_0xbbabf2){const _0x1ffa82=_0x2aac65;let _0x3d72a2=0x0;try{_0x3d72a2=exchange[_0x1ffa82(0x15c)](_0x4f41c5,_0xbbabf2);}catch(_0x21d1b6){}return _0x3d72a2;}function _0x1840(){const _0x5b37a8=['filled',',\x20must\x20be\x20a\x203\x20digit\x20number','Error\x20while\x20deleting\x20files:\x20','coins','pro','initclient','push','Invalid\x20API\x20key\x20or\x20secret\x20entered','limit','progress','placeOrder','recreate','Uncaught\x20Exception:','last','startnumber','basecoinvalue','orderId','-------------------------------\x0a','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','liquidity','\x20orders\x20in\x20less\x20than\x20','orderstatus','fiat','unlinkSync','4PZZwIz','fetchBalance','apiPassword','trade','function','slice','lowdb','realized','getOpenOrders()','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','full','fetchClosedOrders','No\x20more\x20open\x20orders\x20-\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','autoliquidity','startprice','cooldown','round','bots','2287566wvRgzW','createOrder','replace','date-fns','starting-balances','Transaction\x20detection\x20blocked','************','padStart','Manual\x20balancing\x20required','Error:\x20Invalid\x20argument\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','indexOf','Crypt','openOrders','highest','changes','includes','side','random','defaults','decrypt','12754896yRDDqm','rightTxt','1\x20-\x20FILLED:\x20','sort','fees','-events.json','getHours','secure','shift','split','constructor','running','(((.+)+)+)+$','limit-low','writeFile','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','version','no\x20open\x20orders','placeOrder()','args','showConfig','startdate','existsSync','initial','5TelOvj','Resetting\x20bot\x20history','bot-','ask','excluded','fetchTicker','443939ahanrS','has','Executed\x20','hybrid-crypto-js','amountToPrecision','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','./logs/','privateKey','substring','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','botID',':\x20Bot\x20','freeze','Binance','final','Avoiding\x20continuous\x20order\x20attempts','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','order','watchTransactions','%\x20(','DDoSProtection','toString','canceled','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','add','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','entries','2.5.0','getSeconds','exchange','onepagemode','recreateCoinResults()','2517388yhUVcp','currency','Uncaught\x20NetworkError:','performance','Net\x20effect','API-key\x20format\x20invalid','\x20order:\x20','/output-000.log','red_yellow_blue','\x20:\x20','closed','leftTxt','price','ongoing','time','isEqual','total','yyyy-MM-dd\x27T\x27HH:mm:ss','splice','\x20|\x20Error\x20details:\x20','average','cancelOrders()','Order\x20amount\x20is\x20invalid:\x20','Portfolio\x20change\x20detected:\x20','usd','emojibuy','Limit\x20(high-margin)','TUSD','UNLOCKED','cloneDeep','configuration-stored','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','type','portfolio','10534890YlYtZo','Invalid\x20quantity','showname','MIN_NOTIONAL','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','logs','fromCodePoint','enabled','open','eur','./config/','InvalidNonce','event','mkdirSync','2\x20-\x20FILLED\x20unknown\x20order:\x20','getMinutes','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ticker','Order\x20filled:\x20','offset','Initializing\x20coin\x20results','3\x20-\x20handling\x20FILLED\x20order:\x20','Unknown\x20error\x20occured','ETH','storeHeadless','RequestTimeout','timestamp','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','test','message','.json','starting-balance-','colorscheme','market','USDT','argv','customId','balancing\x20resumed','\x20has\x20a\x2024h\x20drop\x20of\x20','limits','log','getStartingBalances','\x20API\x20secret\x20is\x20invalid','<pre>','remainingSymbols','toLowerCase','additional\x20symbols\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','delta','added','change','1\x20-\x20Unlock\x20orders','coin','Resetting\x20coin\x20results:\x20','\x20|\x20exchange:\x20','basecoin','\x20minutes\x20-\x20','2\x20-\x20FILLED\x20known\x20order:\x20','close','2.3.5','getTime','UNLOCKING','\x20metrics:</b>\x20\x0a\x0a','buy','</pre>','exchanges','ExchangeNotAvailable','util','sells','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','findIndex','search','getCoins()','196QjKANq','Failed\x20to\x20load\x20coin\x20data\x20for\x20','RSA-OAEP','loadMarkets','write',':\x20timer\x20>','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','symbol','target','threshold','data','limit-high','fetchOpenOrders','cost','Net\x20','/backup/','fetchTickers','assign','parseISO','\x20portfolio:</b>\x20\x0a\x0a','LOCKED','balances','valid','error','ordertype','breakeven','storeConfiguration','format','bb-settings.json','botname','\x20not\x20available','\x20minutes','getPortfolio(1)','\x20API\x20key\x20is\x20invalid','BNB/','249657QXXvxV','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','USDP','get','filter','parse','1\x20-\x20Handle\x20open\x20orders','join','yyyy/MM/dd','resetHistory','Transaction\x20detection\x20unblocked','password','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','sendPortfolioTelegram','Pausing\x20for\x20','\x20network\x20error','fee','page','keys','watchTrades','apiSecret','timeshift','BNB','getDate','no\x20additional\x20symbols','success','spot','2\x20-\x20Orders\x20unlocked','/EUR','sell','none','cancelOrder','001','AuthenticationError','value','bot','EUR','\x20exchange','loadSymbols()','debug','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','deleteHistoryAlerts','set','abs','\x20|\x20highest\x20fee:\x20','change24h','buys','event-history','-performance.json','Executing\x20exchange\x20reload','headless','netoffset','padEnd','recent20','balancing\x20resumes\x20when\x20cooldown\x20ends','restart','warning','<b>','removed','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getCoinNumber()','floor','getPortfolio(0)','Fee\x20discount\x20refund\x20detected:\x20','reverse','\x20|\x20Custom\x20ID:\x20','\x20|\x20','-results.json','USD','Cooldown\x20ended\x20-\x20balancing\x20resumed','toFixed','distribution','getMonth','\x20closed\x20the\x20connection','forEach','Uncaught\x20ExchangeError:','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','createWriteStream','cancelLoading','<b>Bot\x20','date','net-fiat','path','find','ExchangeError','configuration','getFullYear','apply','\x20>\x20','string','emojisell','Unfilled\x20order(s)\x20canceled\x20after\x20','max','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Waited\x20','ID:\x20','status','percentage','sortBy','timeout','watchOrders','cancel','stringify','net-basecoin','amount','\x20|\x20lock\x20orders:\x20','apiKey','number','InvalidOrder','send','***','RateLimitExceeded','Order(s)\x20not\x20validated\x20after\x20','startsWith','min','datetime','57780mWjsft','ORDERS.UNLOCKED','exec','NetworkError','\x20>\x20[DEBUG]\x20','length','map','./version.json'];_0x1840=function(){return _0x5b37a8;};return _0x1840();}function checkMinimums(_0x19126c){const _0x456e15=_0x2aac65;let _0x3d1961=!![];const _0x34e2d6=!_0x19126c[_0x456e15(0x248)]?markets[_0x19126c[_0x456e15(0x1ec)]]['limits']['amount']['min']:markets[_0x19126c[_0x456e15(0x1ec)]][_0x456e15(0x1c2)][_0x456e15(0x1f2)][_0x456e15(0x27a)],_0x2a6b4b=!_0x19126c[_0x456e15(0x248)]?markets[_0x19126c[_0x456e15(0x1ec)]][_0x456e15(0x1c2)][_0x456e15(0x1f2)][_0x456e15(0x27a)]:markets[_0x19126c[_0x456e15(0x1ec)]][_0x456e15(0x1c2)][_0x456e15(0x270)][_0x456e15(0x27a)],_0x523caf=truncateTradeAmount(_0x19126c['symbol'],_0x19126c[_0x456e15(0x115)]);_0x19126c[_0x456e15(0x115)]=_0x523caf;if(Math[_0x456e15(0x233)](_0x523caf)<_0x34e2d6)_0x3d1961=![];if(Math[_0x456e15(0x233)](_0x523caf)*_0x19126c['last']<_0x2a6b4b)_0x3d1961=![];if(_0x19126c[_0x456e15(0x136)]==_0x456e15(0x225)){let _0x1d55e3=config[_0x456e15(0x19a)][_0x456e15(0x25b)](_0xe6123c=>_0xe6123c[_0x456e15(0x1cf)]==_0x19126c[_0x456e15(0x1cf)]);if(_0x1d55e3[_0x456e15(0x1ae)]>0x0){if(Math[_0x456e15(0x233)](_0x523caf)>_0x19126c[_0x456e15(0x273)]-_0x1d55e3[_0x456e15(0x1ae)])_0x3d1961=![];}else{if(Math[_0x456e15(0x233)](_0x523caf)>_0x19126c[_0x456e15(0x273)])_0x3d1961=![];}}if(_0x19126c['side']==_0x456e15(0x1da)){let _0x44725e=config['portfolio']['find'](_0x24065c=>_0x24065c[_0x456e15(0x1cf)]==config[_0x456e15(0x1d2)]),_0x1b968f=currentCoins[_0x456e15(0x25b)](_0x576974=>_0x576974['coin']==config[_0x456e15(0x1d2)]);if(_0x44725e[_0x456e15(0x1ae)]>0x0){if(Math[_0x456e15(0x233)](_0x523caf)*_0x19126c[_0x456e15(0x107)]>_0x1b968f[_0x456e15(0x273)]-_0x44725e[_0x456e15(0x1ae)])_0x3d1961=![];}else{if(Math[_0x456e15(0x233)](_0x523caf)*_0x19126c['last']>_0x1b968f[_0x456e15(0x273)])_0x3d1961=![];}}return _0x3d1961;}async function getBalances(_0x6b176d=!![]){const _0x5a4978=_0x2aac65;let _0x19b0b9=0x0,_0x15d6c6;const _0x24f944=config['threshold'];if(config[_0x5a4978(0x23a)]&&config[_0x5a4978(0x235)]<0x0)await validate24hChanges();currentCoins[_0x5a4978(0x252)](_0x51d168=>{const _0x4c3395=_0x5a4978;if(_0x51d168[_0x4c3395(0x1cf)]!=config[_0x4c3395(0x1d2)]){let _0x192c7d=global[_0x4c3395(0x1ac)][noslash(_0x51d168['symbol'])];_0x15d6c6=_0x51d168['reverse']?0x1/_0x192c7d:_0x192c7d;}else _0x15d6c6=0x1;let _0x334300=_0x51d168[_0x4c3395(0x273)]*_0x15d6c6;_0x19b0b9+=_0x334300,_0x51d168['last']=formatResult(Number(_0x15d6c6),0x8),_0x51d168[_0x4c3395(0x22a)]=_0x334300;}),currentCoins[_0x5a4978(0x252)](_0x2d256d=>{const _0x23d057=_0x5a4978;let _0x988b81=config[_0x23d057(0x19a)][_0x23d057(0x25b)](_0x3b39a2=>_0x3b39a2[_0x23d057(0x1cf)]==_0x2d256d[_0x23d057(0x1cf)]),_0x202e75=Number(_0x988b81[_0x23d057(0x24f)]),_0x4fba5a=_0x2d256d['value']/_0x19b0b9*0x64,_0x46ae23=_0x202e75*_0x19b0b9/0x64/_0x2d256d[_0x23d057(0x107)]-_0x2d256d[_0x23d057(0x273)];_0x2d256d[_0x23d057(0x24f)]=formatResult(_0x4fba5a,0x3),_0x2d256d['target']=formatResult(_0x202e75,0x3),_0x2d256d[_0x23d057(0x115)]=formatResult(_0x46ae23,0x8),_0x2d256d[_0x23d057(0x136)]='',_0x2d256d[_0x23d057(0x1fb)]=![];if(_0x2d256d[_0x23d057(0x1cf)]!=config[_0x23d057(0x1d2)]){if(_0x2d256d['distribution']>_0x202e75)_0x2d256d[_0x23d057(0x136)]=_0x23d057(0x225),_0x2d256d['valid']=checkMinimums(_0x2d256d);else _0x2d256d[_0x23d057(0x24f)]<_0x202e75&&(_0x2d256d[_0x23d057(0x136)]='buy',_0x2d256d[_0x23d057(0x1fb)]=checkMinimums(_0x2d256d));}_0x2d256d[_0x23d057(0x1cb)]=_0x2d256d[_0x23d057(0x24f)]/_0x2d256d[_0x23d057(0x1ed)]-0x1;if(_0x2d256d[_0x23d057(0x10f)]==_0x23d057(0xfa)||_0x2d256d[_0x23d057(0x10f)]==_0x23d057(0x16f))_0x2d256d[_0x23d057(0x10f)]=_0x23d057(0x226);}),currentCoins[_0x5a4978(0x13d)]((_0x2137c6,_0x50814f)=>_0x2137c6[_0x5a4978(0x1cb)]<_0x50814f['delta']?0x1:_0x50814f[_0x5a4978(0x1cb)]<_0x2137c6[_0x5a4978(0x1cb)]?-0x1:0x0);const _0x757007=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x757007[_0x5a4978(0x1a4)],'usd':_0x757007[_0x5a4978(0x191)],'portfolio':JSON[_0x5a4978(0x26e)](currentCoins),'threshold':_0x24f944},proxyEmit(_0x5a4978(0x1fa),{'serverversion':serverversion,'balances':lastBalances});if(_0x6b176d){if(config[_0x5a4978(0x23a)])headlessMode({'portfolio':currentCoins,'threshold':_0x24f944});else{if(lockOrders==ORDERS[_0x5a4978(0x195)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x24f944});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x170e65=getNormalizedPerformance();getStartingBalances(_0x170e65),emitPerformance(_0x170e65);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2d428a=getNormalizedPerformance();emitPerformance(_0x2d428a),getStartingBalances(_0x2d428a),logger[_0x5a4978(0x22f)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xfcc841=_0x2aac65;if(!lastBalances)return;let _0x54af2f=[],_0x2760a8,_0x86d076=JSON[_0xfcc841(0x20d)](lastBalances[_0xfcc841(0x19a)]);_0x86d076[_0xfcc841(0x13d)]((_0x598542,_0x1b2b9b)=>_0x598542[_0xfcc841(0x1cf)]>_0x1b2b9b[_0xfcc841(0x1cf)]?0x1:_0x1b2b9b[_0xfcc841(0x1cf)]>_0x598542[_0xfcc841(0x1cf)]?-0x1:0x0),_0x86d076[_0xfcc841(0x252)](_0x1aeb01=>{const _0x6d1a8f=_0xfcc841;let _0x446791={'coin':_0x1aeb01[_0x6d1a8f(0x1cf)],'number':_0x1aeb01[_0x6d1a8f(0x273)],'price':_0x1aeb01[_0x6d1a8f(0x107)]};_0x54af2f[_0x6d1a8f(0x100)](_0x446791);});const _0x1ecffc=await getFiat();_0x2760a8={'date':lastBalances[_0xfcc841(0x187)][_0xfcc841(0x143)]('\x20')[0x0],'eur':_0x1ecffc['eur'],'usd':_0x1ecffc[_0xfcc841(0x191)],'coins':_0x54af2f};let _0x378756=dbPerformance[_0xfcc841(0x20b)](_0xfcc841(0x1ef))[_0xfcc841(0x25b)]({'date':_0x2760a8[_0xfcc841(0x258)]})[_0xfcc841(0x22a)]();_0x378756?_0x2760a8['date']!=config[_0xfcc841(0x14f)]&&dbPerformance['get'](_0xfcc841(0x1ef))['find']({'date':_0x2760a8['date']})['assign'](_0x2760a8)[_0xfcc841(0x1e9)]():dbPerformance[_0xfcc841(0x20b)](_0xfcc841(0x1ef))[_0xfcc841(0x100)](_0x2760a8)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x49b4b6=_0x2aac65;let _0x2e87d7=[];if(dbPerformance[_0x49b4b6(0x159)](_0x49b4b6(0x1ef))[_0x49b4b6(0x22a)]()){let _0x460af6=dbPerformance['get'](_0x49b4b6(0x1ef))[_0x49b4b6(0x196)]()[_0x49b4b6(0x20c)](_0x4c6c48=>{if(_0x4c6c48['coins']['length']==0x0)return![];else return!![];})[_0x49b4b6(0x26a)](_0x49b4b6(0x258))['value'](),_0x361a92=[...config[_0x49b4b6(0x10d)]];_0x361a92[_0x49b4b6(0x13d)]((_0x331fa3,_0x2e840f)=>_0x331fa3[_0x49b4b6(0x258)]>_0x2e840f[_0x49b4b6(0x258)]?-0x1:_0x2e840f[_0x49b4b6(0x258)]>_0x331fa3['date']?0x1:0x0);let _0x1952c5=0x1,_0x40c6e0=[],_0x53330f=0x0;_0x460af6['slice']()[_0x49b4b6(0x248)]()[_0x49b4b6(0x252)]((_0x54222c,_0x3e5eaf)=>{const _0x4d6637=_0x49b4b6;if(_0x361a92[_0x53330f]){if(_0x460af6[_0x460af6['length']-_0x3e5eaf]&&_0x361a92[_0x53330f][_0x4d6637(0x258)]==_0x460af6[_0x460af6[_0x4d6637(0x281)]-_0x3e5eaf][_0x4d6637(0x258)]){if(_0x3e5eaf<_0x460af6[_0x4d6637(0x281)]){let _0x47c0f5=0x0,_0x47d6b6=0x0;_0x460af6[_0x460af6[_0x4d6637(0x281)]-_0x3e5eaf]['coins'][_0x4d6637(0x252)](_0x565826=>{const _0x24d5c5=_0x4d6637;_0x47d6b6+=_0x565826[_0x24d5c5(0x273)]*_0x565826[_0x24d5c5(0x185)];}),_0x361a92[_0x53330f][_0x4d6637(0x134)]['forEach'](_0x221d46=>{const _0xc36c54=_0x4d6637;_0x47c0f5+=_0x221d46[_0xc36c54(0x273)]*_0x221d46[_0xc36c54(0x185)];}),_0x1952c5*=_0x47c0f5/(_0x47d6b6-_0x47c0f5)+0x1;}_0x53330f++;}}let _0x4fc5c5=0x0;_0x54222c[_0x4d6637(0xfd)][_0x4d6637(0x252)](_0x355e4d=>{_0x4fc5c5+=_0x355e4d['number']*_0x355e4d['price'];}),_0x40c6e0[_0x460af6[_0x4d6637(0x281)]-_0x3e5eaf-0x1]=_0x4fc5c5*(_0x1952c5-0x1);});let _0x1463e8=[];_0x361a92=[...config[_0x49b4b6(0x10d)]]||[];let _0x586d2e=0x0;_0x53330f=0x0,_0x460af6[_0x49b4b6(0x252)]((_0x2c0159,_0x1ab0fe)=>{const _0x420bef=_0x49b4b6;if(_0x361a92[_0x53330f]){const _0x53f582=fns[_0x420bef(0x20d)](_0x361a92[_0x53330f][_0x420bef(0x258)],_0x420bef(0x210),new Date()),_0x254831=fns['parse'](_0x2c0159[_0x420bef(0x258)],_0x420bef(0x210),new Date());if(fns[_0x420bef(0x188)](_0x53f582,_0x254831)){let _0x2d37d2=0x0;_0x361a92[_0x53330f][_0x420bef(0x134)]['forEach'](_0x288863=>{const _0x26193e=_0x420bef;!_0x1463e8[_0x288863['coin']]?_0x1463e8[_0x288863['coin']]=_0x288863[_0x26193e(0x273)]:(_0x2d37d2=_0x1463e8[_0x288863[_0x26193e(0x1cf)]],_0x1463e8[_0x288863['coin']]+=_0x288863['number']);const _0x399c10=_0x2c0159['coins'][_0x26193e(0x25b)](_0x210196=>_0x210196[_0x26193e(0x1cf)]==_0x288863[_0x26193e(0x1cf)]);(!_0x399c10||_0x399c10['number']==0x0)&&(_0x586d2e+=(-_0x288863['number']-_0x2d37d2)*_0x288863['price']);}),_0x53330f++;}}_0x2c0159[_0x420bef(0xfd)][_0x420bef(0x252)]((_0x2a193c,_0x38ca78)=>{const _0x5ebac9=_0x420bef;_0x1463e8[_0x2a193c[_0x5ebac9(0x1cf)]]&&(_0x2a193c['initial']=_0x1463e8[_0x2a193c[_0x5ebac9(0x1cf)]]);}),_0x2e87d7['push']({'date':_0x2c0159[_0x420bef(0x258)],'eur':_0x2c0159[_0x420bef(0x1a4)],'usd':_0x2c0159['usd'],'offset':_0x40c6e0[_0x1ab0fe],'netoffset':_0x586d2e,'coins':_0x2c0159['coins']});});}return _0x2e87d7;}function emitPerformance(_0xf4b3d8){const _0x354625=_0x2aac65;_0xf4b3d8[_0x354625(0x281)]!==0x0?(proxyEmit(_0x354625(0x17c),_0xf4b3d8),lastPerformanceEmitted=getDate()):proxyEmit(_0x354625(0x17c),[]);}function getPerf(_0x302f3f,_0x5e21c0){const _0x16f38e=_0x2aac65;let _0x3a2af0=0x0,_0x5643c5=0x0,_0x184d56=0x0;_0x302f3f[_0x16f38e(0xfd)][_0x16f38e(0x252)](_0xdc7ffd=>{const _0x10c9d7=_0x16f38e;_0x3a2af0+=_0xdc7ffd[_0x10c9d7(0x273)]*_0xdc7ffd[_0x10c9d7(0x185)];});_0x5e21c0&&(_0x3a2af0+=_0x302f3f['offset']);if(config[_0x16f38e(0x1d2)]==='BTC'||config[_0x16f38e(0x1d2)]==='ETH')_0x5643c5=_0x3a2af0*_0x302f3f['eur'],_0x184d56=_0x3a2af0*_0x302f3f[_0x16f38e(0x191)];else{if(usdBasecoins[_0x16f38e(0x135)](config[_0x16f38e(0x1d2)]))_0x5643c5=_0x3a2af0*_0x302f3f[_0x16f38e(0x1a4)]/_0x302f3f[_0x16f38e(0x191)],_0x184d56=_0x3a2af0;else config[_0x16f38e(0x1d2)]===_0x16f38e(0x22c)&&(_0x5643c5=_0x3a2af0,_0x184d56=_0x3a2af0*_0x302f3f[_0x16f38e(0x191)]/_0x302f3f[_0x16f38e(0x1a4)]);}return[_0x3a2af0,_0x5643c5,_0x184d56];}function getKPIs(_0x1337b4,_0x39e8e0='EUR'){const _0x4dd4ab=_0x2aac65,_0x1ae481=config['basecoin'],_0x3aafa0=lastBalances,_0x4d190c=currentCoins,_0x29f136=getNormalizedPerformance(),_0x4099f7=_0x1337b4==='basecoin'?_0x1ae481:_0x1337b4===_0x4dd4ab(0x110)||_0x1337b4==='net-fiat'?_0x39e8e0:_0x4dd4ab(0x1f3)+_0x1ae481,_0x65e067=_0x1337b4===_0x4dd4ab(0x26f)?'Net\x20effect':_0x1337b4===_0x4dd4ab(0x259)?'Net\x20effect':_0x4099f7+'\x20value',_0x514124=_0x1337b4===_0x4dd4ab(0x26f)||_0x1337b4==='net-fiat'?_0x4dd4ab(0x17d):_0x4099f7+'\x20change';let _0xe805c0=0x0;_0x4d190c[_0x4dd4ab(0x252)](_0x15c9de=>{const _0x18ae8f=_0x4dd4ab;_0xe805c0+=_0x15c9de[_0x18ae8f(0x273)]*_0x15c9de[_0x18ae8f(0x107)];});if(_0x1337b4==='fiat'||_0x1337b4===_0x4dd4ab(0x259)){if(_0x1ae481==='BTC'||_0x1ae481===_0x4dd4ab(0x1b2))_0xe805c0=_0xe805c0*(_0x39e8e0==='EUR'?_0x3aafa0[_0x4dd4ab(0x1a4)]:_0x3aafa0[_0x4dd4ab(0x191)]);else{if(usdBasecoins['includes'](_0x1ae481))_0xe805c0=_0xe805c0*(_0x39e8e0===_0x4dd4ab(0x22c)?_0x3aafa0[_0x4dd4ab(0x1a4)]/_0x3aafa0['usd']:0x1);else _0x1ae481===_0x4dd4ab(0x22c)&&(_0xe805c0=_0xe805c0*(_0x39e8e0===_0x4dd4ab(0x22c)?0x1:_0x3aafa0[_0x4dd4ab(0x191)]/_0x3aafa0[_0x4dd4ab(0x1a4)]));}}let _0xfff545;if(_0xe805c0!==0x0){if(_0x1337b4===_0x4dd4ab(0x1d2))_0xfff545=(_0xe805c0/startingBalances[_0x4dd4ab(0x1d2)]-0x1)*0x64;else{if(_0x39e8e0===_0x4dd4ab(0x22c))_0xfff545=(_0xe805c0/startingBalances['eur']-0x1)*0x64;else _0xfff545=(_0xe805c0/startingBalances[_0x4dd4ab(0x191)]-0x1)*0x64;}let _0x16f315=0x0;if(startingBalances[_0x4dd4ab(0xfd)])_0x4d190c[_0x4dd4ab(0x252)](_0x5295bb=>{const _0x4c3d95=_0x4dd4ab;let _0x17ba84=startingBalances[_0x4c3d95(0xfd)]['find'](_0x37b75d=>_0x37b75d['coin']===_0x5295bb[_0x4c3d95(0x1cf)]);if(_0x17ba84&&_0x17ba84['coin']&&_0x5295bb[_0x4c3d95(0x273)]!==0x0)_0x16f315+=_0x17ba84['number']*_0x5295bb[_0x4c3d95(0x107)];});let _0x1b91ff=0x0;if(_0x29f136[_0x4dd4ab(0x281)]!==0x0){let _0x5184ff=_0x29f136[_0x29f136[_0x4dd4ab(0x281)]-0x1];_0x1b91ff=_0x5184ff[_0x4dd4ab(0x23b)];}_0x16f315-=_0x1b91ff;_0x1337b4===_0x4dd4ab(0x26f)&&(_0xfff545=(_0xe805c0-_0x16f315)/startingBalances[_0x4dd4ab(0x1d2)]*0x64,_0xe805c0=_0xe805c0-_0x16f315);if(_0x1337b4===_0x4dd4ab(0x259)){let _0x5f4cd0=_0x39e8e0==='EUR'?startingBalances[_0x4dd4ab(0x1a4)]:startingBalances['usd'];if(_0x1ae481==='BTC'||_0x1ae481==='ETH')_0x16f315=_0x39e8e0==='EUR'?_0x16f315*_0x3aafa0[_0x4dd4ab(0x1a4)]:_0x16f315*_0x3aafa0[_0x4dd4ab(0x191)];else{if(usdBasecoins['includes'](_0x1ae481))_0x16f315=_0x39e8e0===_0x4dd4ab(0x22c)?_0x16f315*_0x3aafa0[_0x4dd4ab(0x1a4)]/_0x3aafa0[_0x4dd4ab(0x191)]:_0x16f315;else _0x1ae481===_0x4dd4ab(0x22c)&&(_0x16f315=_0x39e8e0===_0x4dd4ab(0x22c)?_0x16f315:_0x16f315*_0x3aafa0[_0x4dd4ab(0x191)]/_0x3aafa0[_0x4dd4ab(0x1a4)]);}_0xfff545=(_0xe805c0-_0x16f315)/_0x5f4cd0*0x64,_0xe805c0=_0xe805c0-_0x16f315;}if(_0xfff545){if(_0xfff545<0x64)_0xfff545=_0xfff545['toFixed'](0x2);else{if(_0xfff545<0x3e8)_0xfff545=_0xfff545[_0x4dd4ab(0x24e)](0x1);else _0xfff545=_0xfff545[_0x4dd4ab(0x24e)](0x0);}}else _0xfff545=Number('0')[_0x4dd4ab(0x24e)](0x2);if(_0xe805c0){if(Math[_0x4dd4ab(0x233)](_0xe805c0)<0.000001)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x2);else{if(Math['abs'](_0xe805c0)<0.1)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x6);else{if(Math[_0x4dd4ab(0x233)](_0xe805c0)<0x1)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x5);else{if(Math[_0x4dd4ab(0x233)](_0xe805c0)<0xa)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x4);else{if(Math['abs'](_0xe805c0)<0x64)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x3);else{if(Math[_0x4dd4ab(0x233)](_0xe805c0)<0x3e8)_0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x2);else _0xe805c0=_0xe805c0[_0x4dd4ab(0x24e)](0x2);}}}}}}else _0xe805c0=Number('0')[_0x4dd4ab(0x24e)](0x2);}else _0xfff545=Number('0')['toFixed'](0x2);return{'value':_0xe805c0,'change':_0xfff545,'leftTxt':_0x65e067,'rightTxt':_0x514124};}async function getStartingBalances(_0x59d91c,_0x22e3ee=!![]){const _0x5a227d=_0x2aac65;if(_0x59d91c[_0x5a227d(0x281)]!==0x0){const [_0x5c5279,_0x2b5e50,_0x4a7b3b]=getPerf(_0x59d91c[0x0],!![]);let _0x5d393f=[];config[_0x5a227d(0x19a)][_0x5a227d(0x252)](_0x811be8=>{const _0x40bf65=_0x5a227d;let _0x119a25=0x0,_0x311013;config[_0x40bf65(0x10d)]['forEach'](_0x12f2ed=>{const _0x1a6a0e=_0x40bf65;let _0x2104ae=_0x12f2ed[_0x1a6a0e(0x134)][_0x1a6a0e(0x25b)](_0x15f91f=>_0x15f91f['coin']==_0x811be8[_0x1a6a0e(0x1cf)]);if(_0x2104ae){_0x119a25+=_0x2104ae[_0x1a6a0e(0x273)];if(!_0x311013)_0x311013=_0x2104ae[_0x1a6a0e(0x185)];}}),_0x5d393f[_0x40bf65(0x100)]({'coin':_0x811be8[_0x40bf65(0x1cf)],'number':_0x119a25,'initialprice':_0x311013});});const _0x48b5a9={'basecoin':_0x5c5279,'eur':_0x2b5e50,'usd':_0x4a7b3b,'coins':_0x5d393f};if(_0x22e3ee)proxyEmit(_0x5a227d(0x129),_0x48b5a9);startingBalances=_0x48b5a9;}}function headlessMode(_0x339097){const _0xee8f7=_0x2aac65;let _0x4a0044=_0x339097[_0xee8f7(0x19a)],_0x2556d2=_0x339097[_0xee8f7(0x1ee)],_0x29f9c2=[];for(let _0xb6c2ac of _0x4a0044){if(_0xb6c2ac[_0xee8f7(0x1cf)]!=config[_0xee8f7(0x1d2)]){if(_0xb6c2ac[_0xee8f7(0x1cb)]>=_0x2556d2/0x64){if(_0xb6c2ac['valid'])_0x29f9c2[_0xee8f7(0x100)](_0xb6c2ac);}else{if(_0xb6c2ac['delta']<=-_0x2556d2/0x64){if(_0xb6c2ac[_0xee8f7(0x1fb)])_0x29f9c2[_0xee8f7(0x100)](_0xb6c2ac);}}}}_0x29f9c2[_0xee8f7(0x281)]>0x0&&placeOrder(_0x29f9c2);}function notifyBalance(_0x802381){const _0x2b134a=_0x2aac65;let _0x4c20f7=_0x802381[_0x2b134a(0x19a)],_0x3b5b79=_0x802381['threshold'],_0x2458c0=[];for(let _0x1198c6 of _0x4c20f7){if(_0x1198c6[_0x2b134a(0x1cf)]!=config[_0x2b134a(0x1d2)]){if(_0x1198c6[_0x2b134a(0x1cb)]>=_0x3b5b79/0x64){if(_0x1198c6[_0x2b134a(0x1fb)])_0x2458c0[_0x2b134a(0x100)](_0x1198c6);}else{if(_0x1198c6[_0x2b134a(0x1cb)]<=-_0x3b5b79/0x64){if(_0x1198c6[_0x2b134a(0x1fb)])_0x2458c0[_0x2b134a(0x100)](_0x1198c6);}}}}if(_0x2458c0['length']>0x0){let _0x20bf11=_0x2458c0[_0x2b134a(0xf8)](_0x4026ce=>_0x4026ce[_0x2b134a(0x1cf)]);_0x20bf11['sort']();let _0x2c9a1c=_0x20bf11[_0x2b134a(0x20f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2b134a(0x240),_0x2b134a(0x12d));lastCoinsToBalance=_0x2c9a1c;}}function symbolToCoin(_0x4d14d5){const _0x3771e4=_0x2aac65;let _0x54b74b;if(_0x4d14d5[_0x3771e4(0x135)]('/'+config['basecoin']))_0x54b74b=_0x4d14d5[_0x3771e4(0x127)]('/'+config['basecoin'],'');if(_0x4d14d5['includes'](config[_0x3771e4(0x1d2)]+'/'))_0x54b74b=_0x4d14d5['replace'](config[_0x3771e4(0x1d2)]+'/','');return _0x54b74b;}async function unlockOrders(){const _0x58a739=_0x2aac65;if(allOrdersPlaced&&lockOrders==ORDERS[_0x58a739(0x1f9)]){logger[_0x58a739(0x22f)](_0x58a739(0x1ce)),lockOrders=ORDERS[_0x58a739(0x1d8)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2f3d8a=await getCoins();[currentCoins,currentCoinsAll]=_0x2f3d8a,validateOrdersState=_0x58a739(0x151),persistOpenOrders([]),lockOrders=ORDERS[_0x58a739(0x195)],logger[_0x58a739(0x22f)](_0x58a739(0x223));}}async function validateOrders(_0x3317fb){const _0x30c1ab=_0x2aac65;if(_0x3317fb)validateOrdersState=_0x3317fb;logger[_0x30c1ab(0x22f)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x30c1ab(0x271)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x30c1ab(0x27d)));let _0x5f2f42=[],_0x581cb6=config['ordertype']==_0x30c1ab(0x1bc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x30c1ab(0x26b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x30c1ab(0x1f9)])return;logger[_0x30c1ab(0x22f)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x30c1ab(0x252)](_0x197cf8=>{const _0x5a438e=_0x30c1ab;let _0x50f55e=![];_0x197cf8[_0x5a438e(0xfa)]>0x0&&(_0x50f55e=!![]),_0x5f2f42[_0x5a438e(0x100)](_0x50f55e),_0x50f55e&&config[_0x5a438e(0x1fd)]!='market'&&logHistory(_0x5a438e(0x16a),_0x5a438e(0x1ad)+_0x197cf8[_0x5a438e(0x1ec)]+'\x20'+_0x197cf8[_0x5a438e(0x136)]+'\x20#'+formatResult(_0x197cf8['filled'],0x8)+'\x20@'+formatResult(_0x197cf8['price'],0x8));}),_0x5f2f42['forEach']((_0x144a1f,_0x177fb3)=>{const _0x9b9050=_0x30c1ab;if(_0x144a1f)lastOrders[_0x9b9050(0x18b)](_0x177fb3,0x1);}),persistOpenOrders(lastOrders);const _0x36d513=coolingDown?_0x30c1ab(0x23e):_0x30c1ab(0x1c0);if(validateOrdersState=='initial'){validateOrdersState=_0x30c1ab(0x186);if(_0x5f2f42['includes'](![])){if(config[_0x30c1ab(0x1fd)]==_0x30c1ab(0x1bc)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5f2f42['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x30c1ab(0x1fd)]==_0x30c1ab(0x1bc)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x30c1ab(0x167))_0x5f2f42[_0x30c1ab(0x135)](![])&&(config[_0x30c1ab(0x1fd)]=='market'?logHistory(_0x30c1ab(0x221),_0x30c1ab(0x278)+Math[_0x30c1ab(0x123)](_0x581cb6*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x36d513):(await cancelOrders(),logHistory(_0x30c1ab(0x221),_0x30c1ab(0x263)+Math['round'](_0x581cb6*validateOrderInterval/0xea60)+_0x30c1ab(0x1d3)+_0x36d513))),await unlockOrders();else{if(validateOrdersState==_0x30c1ab(0x14b)){if(config[_0x30c1ab(0x1fd)]!=_0x30c1ab(0x1bc))logHistory(_0x30c1ab(0x221),_0x30c1ab(0x11e)+_0x36d513);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x8cb54c=>{const _0x2c85a7=_0x3fe5;try{const _0x59bbfb=await exchange[_0x2c85a7(0x227)](_0x8cb54c[_0x2c85a7(0x10a)],_0x8cb54c[_0x2c85a7(0x1ec)]);}catch(_0x3069c9){if(_0x3069c9[_0x2c85a7(0x16e)]()[_0x2c85a7(0x135)]('OrderNotFound')){}else await handleError(_0x3069c9,_0x2c85a7(0x18e));}});}async function initCoinResults(_0x789ceb){const _0x2f9797=_0x2aac65;_0x789ceb?logger[_0x2f9797(0x22f)](_0x2f9797(0x1d0)+_0x789ceb):logger[_0x2f9797(0x22f)](_0x2f9797(0x1af)),config[_0x2f9797(0x19a)]['forEach'](_0x1185f0=>{const _0x3ab4a9=_0x2f9797;if(!_0x1185f0[_0x3ab4a9(0x156)]&&_0x1185f0[_0x3ab4a9(0x1cf)]!=config[_0x3ab4a9(0x1d2)]){const _0xc9c133=currentCoins[_0x3ab4a9(0x25b)](_0x4c8501=>_0x4c8501[_0x3ab4a9(0x1cf)]==_0x1185f0[_0x3ab4a9(0x1cf)]),_0x2c9762=global['ticker'][noslash(_0x1185f0[_0x3ab4a9(0x1ec)])];let _0x539c12=_0xc9c133?_0xc9c133[_0x3ab4a9(0x273)]:null,_0x18426c=_0x1185f0[_0x3ab4a9(0x248)]?0x1/_0x2c9762:_0x2c9762,_0x4ad5c1;config['liquidity'][_0x3ab4a9(0x252)](_0x23a93d=>{const _0x4e1f9d=_0x3ab4a9;!_0x4ad5c1&&(_0x4ad5c1=_0x23a93d[_0x4e1f9d(0x134)][_0x4e1f9d(0x25b)](_0x18a5da=>_0x18a5da['coin']==_0x1185f0[_0x4e1f9d(0x1cf)]),_0x4ad5c1&&(_0x539c12=_0x4ad5c1[_0x4e1f9d(0x273)],_0x18426c=_0x4ad5c1['price']));});let _0x517652=dbCoinResults[_0x3ab4a9(0x20b)]('coins')['find']({'coin':_0x1185f0[_0x3ab4a9(0x1cf)]})[_0x3ab4a9(0x22a)]();if(!_0x517652){const _0x23bf8={'coin':_0x1185f0[_0x3ab4a9(0x1cf)],'number':_0x539c12,'breakeven':_0x18426c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3ab4a9(0x20b)](_0x3ab4a9(0xfd))[_0x3ab4a9(0x100)](_0x23bf8)[_0x3ab4a9(0x1e9)]();}else{if(_0x789ceb&&_0x1185f0['coin']==_0x789ceb){const _0x4d90e5={'coin':_0x1185f0[_0x3ab4a9(0x1cf)],'number':_0x539c12,'breakeven':_0x18426c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3ab4a9(0xfd))[_0x3ab4a9(0x25b)]({'coin':_0x1185f0['coin']})['assign'](_0x4d90e5)['write']();}}}});}async function updateCoinResults(_0x5c130c,_0xce8572=![]){const _0x426431=_0x2aac65;let _0x16b82f,_0x28ca66,_0xfe36aa,_0x25d03d,_0x4de770,_0x146d12,_0x149f9c=dbCoinResults[_0x426431(0x20b)](_0x426431(0xfd))[_0x426431(0x25b)]({'coin':_0x5c130c[_0x426431(0x1cf)]})[_0x426431(0x22a)](),_0x38969d=![];_0x149f9c&&Object[_0x426431(0x173)](_0x149f9c)[_0x426431(0x252)](([_0x10c69b,_0x3ee2b4])=>{if(_0x3ee2b4==null)_0x38969d=!![];});(!_0x149f9c||_0x38969d)&&(await initCoinResults(_0x5c130c[_0x426431(0x1cf)]),_0x149f9c=dbCoinResults[_0x426431(0x20b)](_0x426431(0xfd))[_0x426431(0x25b)]({'coin':_0x5c130c[_0x426431(0x1cf)]})[_0x426431(0x22a)]());_0x5c130c[_0x426431(0x248)]&&(_0x146d12={'filled':_0x5c130c[_0x426431(0xfa)]*_0x5c130c[_0x426431(0x185)],'amount':_0x5c130c[_0x426431(0xfa)]*_0x5c130c[_0x426431(0x185)],'side':_0x5c130c[_0x426431(0x136)]==_0x426431(0x225)?_0x426431(0x1da):_0x426431(0x225),'price':0x1/_0x5c130c[_0x426431(0x185)]},_0x5c130c={..._0x5c130c,..._0x146d12});_0xce8572?_0x28ca66=_0x5c130c[_0x426431(0x136)]==_0x426431(0x1da)?_0x149f9c[_0x426431(0x273)]+_0x5c130c['filled']:_0x149f9c[_0x426431(0x273)]-_0x5c130c[_0x426431(0xfa)]:_0x28ca66=await getCoinNumber(_0x5c130c[_0x426431(0x1cf)]);if(_0x5c130c[_0x426431(0x218)]&&_0x5c130c[_0x426431(0x218)][_0x426431(0x17a)]==config[_0x426431(0x1d2)])_0x16b82f=_0x5c130c['fee'][_0x426431(0x1f2)];else{if(_0x5c130c[_0x426431(0x218)]&&_0x5c130c['fee'][_0x426431(0x17a)]==_0x426431(0x21e)&&!_0xce8572)_0x16b82f=_0x5c130c['fee']['cost']*global['ticker'][_0x426431(0x21e)+config[_0x426431(0x1d2)]];else _0x16b82f=defaultFee*_0x5c130c['filled']*_0x5c130c[_0x426431(0x185)];}_0x5c130c[_0x426431(0x136)]==_0x426431(0x1da)?(_0xfe36aa=_0x28ca66!=0x0?(_0x149f9c[_0x426431(0x1fe)]*_0x149f9c[_0x426431(0x273)]+_0x5c130c[_0x426431(0x185)]*(_0x28ca66-_0x149f9c[_0x426431(0x273)])+_0x16b82f)/_0x28ca66:0x0,_0x25d03d=_0x149f9c['realized']):(_0xfe36aa=_0x28ca66!=0x0?(_0x149f9c[_0x426431(0x1fe)]*_0x149f9c[_0x426431(0x273)]-_0x5c130c['price']*(_0x149f9c[_0x426431(0x273)]-_0x28ca66)+_0x16b82f)/_0x28ca66:0x0,_0x25d03d=_0x149f9c[_0x426431(0x119)]+(_0x5c130c[_0x426431(0x185)]-_0x149f9c['breakeven'])*_0x5c130c['filled']);_0x4de770=(_0x5c130c[_0x426431(0x185)]-_0xfe36aa-_0x16b82f/_0x5c130c['filled'])*_0x28ca66;let _0x241c85={'coin':_0x5c130c[_0x426431(0x1cf)],'number':_0x28ca66,'breakeven':formatResult(_0xfe36aa,0x8),'realized':formatResult(_0x25d03d,0x8),'unrealized':formatResult(_0x4de770,0x8),'fees':formatResult(_0x149f9c[_0x426431(0x13e)]+_0x16b82f,0x8),'sells':_0x5c130c[_0x426431(0x136)]==_0x426431(0x225)?_0x149f9c['sells']+0x1:_0x149f9c[_0x426431(0x1df)],'buys':_0x5c130c[_0x426431(0x136)]==_0x426431(0x1da)?_0x149f9c[_0x426431(0x236)]+0x1:_0x149f9c['buys']};dbCoinResults[_0x426431(0x20b)](_0x426431(0xfd))[_0x426431(0x25b)]({'coin':_0x5c130c['coin']})['assign'](_0x241c85)[_0x426431(0x1e9)]();if(!_0xce8572){if(_0x5c130c[_0x426431(0x218)]&&_0x5c130c[_0x426431(0x218)]['currency']==_0x426431(0x21e)){const _0x39c65a=currentCoins[_0x426431(0x25b)](_0x49cb52=>_0x49cb52[_0x426431(0x1cf)]==_0x426431(0x21e));if(_0x39c65a){let _0x28b640=dbCoinResults[_0x426431(0x20b)](_0x426431(0xfd))[_0x426431(0x25b)]({'coin':'BNB'})[_0x426431(0x22a)]();_0x241c85={..._0x28b640,'number':_0x39c65a[_0x426431(0x273)]},dbCoinResults[_0x426431(0x20b)]('coins')[_0x426431(0x25b)]({'coin':_0x426431(0x21e)})[_0x426431(0x1f6)](_0x241c85)['write']();}}}}async function placeOrder(_0x1dd4f1){const _0x32e15f=_0x2aac65,_0xf615fa=config[_0x32e15f(0x1fd)]==_0x32e15f(0x1bc)?_0x32e15f(0x1bc):_0x32e15f(0x102);if(lockOrders==ORDERS[_0x32e15f(0x195)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x32e15f(0x151);let _0x5b2017=![];lastOrders=[];for(const _0x2d159a of _0x1dd4f1){let _0x17b73c,_0x3d59a4,_0x43b52a,_0x308c32,_0x4b7255,_0x43161e=_0x2d159a[_0x32e15f(0x1ec)];try{const _0x555fa9=await exchange['fetchTicker'](_0x43161e);_0x17b73c=_0x2d159a[_0x32e15f(0x248)]?0x1/_0x2d159a[_0x32e15f(0x107)]:_0x2d159a[_0x32e15f(0x107)],_0x3d59a4=_0x555fa9['bid'],_0x43b52a=_0x555fa9[_0x32e15f(0x155)];_0x2d159a[_0x32e15f(0x248)]?(_0x308c32=_0x2d159a[_0x32e15f(0x136)]==_0x32e15f(0x1da)?_0x32e15f(0x225):_0x32e15f(0x1da),_0x4b7255=Math[_0x32e15f(0x233)](_0x2d159a['trade'])/_0x17b73c):(_0x308c32=_0x2d159a[_0x32e15f(0x136)],_0x4b7255=Math['abs'](_0x2d159a['trade']));_0xf615fa==_0x32e15f(0x102)&&(config[_0x32e15f(0x1fd)]==_0x32e15f(0x1f0)&&(_0x17b73c=_0x308c32=='buy'?_0x3d59a4:_0x43b52a),config[_0x32e15f(0x1fd)]==_0x32e15f(0x147)&&(_0x17b73c=_0x308c32==_0x32e15f(0x1da)?_0x43b52a:_0x3d59a4));_0x4b7255=formatResult(_0x4b7255,0x8),_0x17b73c=formatResult(_0x17b73c,0x8);const _0x9bfc98=_0x308c32==_0x32e15f(0x225)?config['emojisell']?String[_0x32e15f(0x1a1)]('0x'+config[_0x32e15f(0x262)])+'\x20':'':config[_0x32e15f(0x192)]?String[_0x32e15f(0x1a1)]('0x'+config['emojibuy'])+'\x20':'',_0x51ea15=_0xf615fa=='market'?'Market':config[_0x32e15f(0x1fd)]==_0x32e15f(0x1f0)?_0x32e15f(0x193):'Limit\x20(low-margin)',_0xf791d9=(Math[_0x32e15f(0x245)](Math[_0x32e15f(0x137)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x32e15f(0x100)]({'customId':_0xf791d9,'symbol':_0x43161e,'coin':_0x2d159a[_0x32e15f(0x1cf)],'amount':_0x4b7255,'price':_0x17b73c,'side':_0x308c32,'reverse':_0x2d159a[_0x32e15f(0x248)],'filled':0x0});if(_0xf615fa=='market')logHistory(_0x32e15f(0x16a),''+_0x9bfc98+_0x51ea15+_0x32e15f(0x17f)+_0x43161e+'\x20'+_0x308c32+'\x20#'+formatResult(_0x4b7255,0x8)+'\x20@'+formatResult(_0x17b73c,0x8));else logHistory(_0x32e15f(0x16a),''+_0x9bfc98+_0x51ea15+_0x32e15f(0x17f)+_0x43161e+'\x20'+_0x308c32+'\x20#'+formatResult(_0x4b7255,0x8)+'\x20@'+formatResult(_0x17b73c,0x8));const _0x21b814=await exchange[_0x32e15f(0x126)](_0x43161e,_0xf615fa,_0x308c32,_0x4b7255,_0x17b73c);logger[_0x32e15f(0x22f)](_0x32e15f(0x267)+_0x21b814['id']+_0x32e15f(0x249)+_0xf791d9);const _0x5e3891=lastOrders[_0x32e15f(0x281)]-0x1;if(_0x5e3891>=0x0&&lastOrders[_0x5e3891][_0x32e15f(0x1bf)]==_0xf791d9){lastOrders[_0x5e3891][_0x32e15f(0x10a)]=_0x21b814['id'];if(_0x21b814[_0x32e15f(0x270)])lastOrders[_0x5e3891]['amount']=_0x21b814[_0x32e15f(0x270)];if(_0x21b814[_0x32e15f(0x185)])lastOrders[_0x5e3891]['price']=_0x21b814['price'];lastOrders[_0x5e3891][_0x32e15f(0x218)]=_0x21b814[_0x32e15f(0x218)];}if(config[_0x32e15f(0x122)]!=0x0){let _0x25f975=null;if(cooldownTracker[_0x32e15f(0x281)]==config['cooldown']-0x1)_0x25f975=cooldownTracker['shift']();const _0x581093=getTimeStamp();cooldownTracker[_0x32e15f(0x100)](_0x581093);if(_0x25f975){const _0x28ddea=fns['differenceInSeconds'](new Date(_0x581093),new Date(_0x25f975));if(_0x28ddea<cooldownInterval){logHistory(_0x32e15f(0x1fc),_0x32e15f(0x15a)+config['cooldown']+_0x32e15f(0x10e)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x341a5d){if(_0x341a5d[_0x32e15f(0x16e)]()[_0x32e15f(0x135)](_0x32e15f(0x19e)))lastOrders=lastOrders[_0x32e15f(0x20c)](_0x4af1c7=>_0x4af1c7['symbol']!=_0x43161e),logHistory(_0x32e15f(0x1fc),_0x32e15f(0x230)+_0x43161e),_0x5b2017=!![];else{if(_0x341a5d['toString']()[_0x32e15f(0x135)](_0x32e15f(0x19c)))lastOrders=lastOrders[_0x32e15f(0x20c)](_0x3bd5c1=>_0x3bd5c1['symbol']!=_0x43161e),logHistory('error',_0x32e15f(0x18f)+_0x43161e),_0x5b2017=!![];else{if(_0x341a5d[_0x32e15f(0x16e)]()[_0x32e15f(0x135)](_0x32e15f(0x274)))lastOrders=lastOrders['filter'](_0x570b51=>_0x570b51[_0x32e15f(0x1ec)]!=_0x43161e),logHistory(_0x32e15f(0x1fc),'Order\x20is\x20invalid:\x20'+_0x43161e),_0x5b2017=!![];else _0x341a5d['toString']()[_0x32e15f(0x135)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x32e15f(0x20c)](_0x2a68b9=>_0x2a68b9[_0x32e15f(0x1ec)]!=_0x43161e),logHistory(_0x32e15f(0x1fc),_0x32e15f(0x230)+_0x43161e),_0x5b2017=!![]):(lastOrders=lastOrders[_0x32e15f(0x20c)](_0x3042a5=>_0x3042a5[_0x32e15f(0x1ec)]!=_0x43161e),await handleError(_0x341a5d,_0x32e15f(0x14c),_0x43161e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1b4ac9=config['ordertype']==_0x32e15f(0x1bc)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1322b2=_0x32e15f;validateOrders(_0x1322b2(0x167));},_0x1b4ac9);}else unlockOrders();_0x5b2017&&config[_0x32e15f(0x23a)]&&await pauseBot(_0x32e15f(0x168)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x32e15f(0x221),_0x32e15f(0x24d)));}else{if(coolingDown)!config[_0x32e15f(0x23a)]&&logHistory(_0x32e15f(0x1fc),_0x32e15f(0x1ca));else lockOrders!=ORDERS[_0x32e15f(0x195)]&&(!config['headless']&&(config['ordertype']==_0x32e15f(0x1bc)?logHistory(_0x32e15f(0x1fc),_0x32e15f(0x169)):logHistory(_0x32e15f(0x1fc),_0x32e15f(0x149))));}}function persistOpenOrders(_0x18fa74){const _0x2f1044=_0x2aac65,_0x36cf90={...config,'openOrders':_0x18fa74};let _0x32c817=dbConfig[_0x2f1044(0x20b)](_0x2f1044(0x22b))[_0x2f1044(0x25b)]({'botID':botID})['value']();_0x32c817&&dbConfig[_0x2f1044(0x20b)](_0x2f1044(0x22b))[_0x2f1044(0x25b)]({'botID':botID})[_0x2f1044(0x1f6)](_0x36cf90)[_0x2f1044(0x1e9)]();}function restoreOrders(){const _0x4b7a13=_0x2aac65;let _0x150d7c;config[_0x4b7a13(0x132)]&&allOpenOrders[_0x4b7a13(0x252)](_0x46945d=>{const _0x1f1b60=_0x4b7a13,_0x51027b=config[_0x1f1b60(0x132)][_0x1f1b60(0x25b)](_0x433d7e=>_0x433d7e[_0x1f1b60(0x10a)]==_0x46945d['id']);_0x51027b&&(lastOrders['push'](_0x51027b),_0x150d7c=_0x46945d[_0x1f1b60(0x1b5)]);});if(lastOrders[_0x4b7a13(0x281)]>0x0){lockOrders=ORDERS[_0x4b7a13(0x1f9)],validateOrdersState=_0x4b7a13(0x186),allOrdersPlaced=!![];const _0x1aeb73=new Date()['getTime'](),_0xbf545b=config[_0x4b7a13(0x1fd)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4b7a13(0x26b)]*0x3c*0x3e8;if(_0x150d7c+_0xbf545b>_0x1aeb73){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x462a50=_0x4b7a13;validateOrders(_0x462a50(0x167));},_0x150d7c+_0xbf545b-_0x1aeb73);}else validateOrders(_0x4b7a13(0x167));}}async function sendMetricsTelegram(){const _0x52dc69=_0x2aac65;if(!coinsLoaded){process[_0x52dc69(0x275)]({'telegrammsg':_0x52dc69(0x162)},_0xa862a9=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4da870='';if(config[_0x52dc69(0x19d)])_0x4da870=_0x52dc69(0x241)+config['botname']+_0x52dc69(0x1d9);else _0x4da870=_0x52dc69(0x257)+botID+_0x52dc69(0x1d9);const _0x244638=getKPIs(_0x52dc69(0x1d2)),_0x2cca24=getKPIs('fiat',config[_0x52dc69(0x110)]),_0x59b454=getKPIs(_0x52dc69(0x26f)),_0x47ed01=getKPIs(_0x52dc69(0x259),config[_0x52dc69(0x110)]);_0x4da870+=_0x52dc69(0x1c6),_0x4da870+=_0x244638['leftTxt']+_0x52dc69(0x182)+_0x244638[_0x52dc69(0x22a)]+'\x0a',_0x4da870+=_0x244638[_0x52dc69(0x13b)]+':\x20'+_0x244638['change']+'%\x0a',_0x4da870+=_0x2cca24[_0x52dc69(0x184)]+_0x52dc69(0x182)+_0x2cca24[_0x52dc69(0x22a)]+'\x0a',_0x4da870+=_0x2cca24[_0x52dc69(0x13b)]+':\x20'+_0x2cca24[_0x52dc69(0x1cd)]+'%\x0a',_0x4da870+=_0x59b454[_0x52dc69(0x184)]+':\x20'+_0x59b454[_0x52dc69(0x22a)]+'\x20('+config[_0x52dc69(0x1d2)]+')\x0a',_0x4da870+=_0x59b454[_0x52dc69(0x13b)]+':\x20'+_0x59b454[_0x52dc69(0x1cd)]+_0x52dc69(0x16c)+config[_0x52dc69(0x1d2)]+')\x0a',_0x4da870+=_0x47ed01[_0x52dc69(0x184)]+':\x20'+_0x47ed01['value']+'\x20('+config[_0x52dc69(0x110)]+')\x0a',_0x4da870+=_0x47ed01[_0x52dc69(0x13b)]+':\x20'+_0x47ed01[_0x52dc69(0x1cd)]+_0x52dc69(0x16c)+config['fiat']+')\x0a',_0x4da870+=_0x52dc69(0x1db),process[_0x52dc69(0x275)]({'telegrammsg':_0x4da870},_0x12df01=>{});}async function sendPortfolioTelegram(){const _0x469346=_0x2aac65;if(!coinsLoaded){process[_0x469346(0x275)]({'telegrammsg':_0x469346(0x162)},_0x545c23=>{});return;}let _0x16fc70='';if(config[_0x469346(0x19d)])_0x16fc70='<b>'+config[_0x469346(0x202)]+_0x469346(0x1f8);else _0x16fc70=_0x469346(0x257)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x16fc70+=_0x469346(0x1c6),_0x16fc70+=_0x469346(0x10b),_0x16fc70+=_0x469346(0x214),_0x16fc70+=_0x469346(0x10b),currentCoins[_0x469346(0x252)](_0xa85223=>{const _0x5bcf31=_0x469346;_0x16fc70+=_0xa85223[_0x5bcf31(0x1cf)][_0x5bcf31(0x23c)](0x7)+'|\x20'+formatPad(_0xa85223[_0x5bcf31(0x24f)],0x2,0x6)+'|\x20'+formatPad(_0xa85223['target'],0x2,0x6)+'|\x20'+formatPad(_0xa85223[_0x5bcf31(0x1cb)]*0x64,0x2,0x6)+'\x0a';}),_0x16fc70+=_0x469346(0x1db),process[_0x469346(0x275)]({'telegrammsg':_0x16fc70},_0x496b02=>{});}function formatPad(_0x404ccf,_0x5cfd68,_0x2f891f){const _0x35e96c=_0x2aac65,_0x41e6a4=formatResultString(_0x404ccf,_0x5cfd68);return _0x41e6a4?_0x41e6a4[_0x35e96c(0x12c)](_0x2f891f):''[_0x35e96c(0x12c)](_0x2f891f);}function logHistory(_0x16c09e,_0x20158d,_0x5bb21c=''){const _0x34addd=_0x2aac65;let _0x4b794e={'time':getTimeStamp(),'type':_0x16c09e,'event':_0x20158d};dbLogs[_0x34addd(0x20b)](_0x34addd(0x1a0))['push'](_0x4b794e)['write']();if(_0x5bb21c=='')_0x5bb21c=_0x20158d;proxyEmit('event',{'log':_0x4b794e,'summary':_0x5bb21c}),process[_0x34addd(0x275)]({'telegram':{..._0x4b794e,'botname':config[_0x34addd(0x202)],'showname':config[_0x34addd(0x19d)]}},_0x1dd2d8=>{}),logger[_0x34addd(0x11c)](''+_0x4b794e[_0x34addd(0x1a7)]);}function emitHistory(_0x275d0b={}){const _0x39ad5e=_0x2aac65;Object[_0x39ad5e(0x21a)](_0x275d0b)[_0x39ad5e(0x281)]==0x0&&(_0x275d0b={'type':[_0x39ad5e(0x16a),_0x39ad5e(0x1a7)],'event':'','page':0x1});if(_0x275d0b[_0x39ad5e(0x199)][_0x39ad5e(0x135)](_0x39ad5e(0x1a7)))_0x275d0b[_0x39ad5e(0x199)][_0x39ad5e(0x18b)](_0x275d0b[_0x39ad5e(0x199)][_0x39ad5e(0x130)](_0x39ad5e(0x1a7)),0x1,_0x39ad5e(0x1fc),_0x39ad5e(0x240),_0x39ad5e(0x221));if(dbLogs[_0x39ad5e(0x159)](_0x39ad5e(0x1a0))[_0x39ad5e(0x22a)]()){let _0x231adf=dbLogs[_0x39ad5e(0x20b)](_0x39ad5e(0x1a0))[_0x39ad5e(0x20c)](_0x3e88ba=>{const _0x29dafc=_0x39ad5e;if(_0x275d0b[_0x29dafc(0x199)]['length']==0x0)return![];else return _0x275d0b[_0x29dafc(0x199)][_0x29dafc(0x135)](_0x3e88ba[_0x29dafc(0x199)]);})[_0x39ad5e(0x20c)](_0xd5c375=>{const _0x28ca3a=_0x39ad5e;if(_0x275d0b[_0x28ca3a(0x1a7)]=='')return!![];else return _0xd5c375[_0x28ca3a(0x1a7)]['toLowerCase']()['includes'](_0x275d0b[_0x28ca3a(0x1a7)][_0x28ca3a(0x1c8)]());})['sortBy'](_0x39ad5e(0x187)),_0x46708e=_0x231adf[_0x39ad5e(0x22a)]()['length'];_0x231adf=_0x231adf[_0x39ad5e(0x248)]()[_0x39ad5e(0x117)]((_0x275d0b[_0x39ad5e(0x219)]-0x1)*logPageSize,_0x275d0b[_0x39ad5e(0x219)]*logPageSize-0x1)['reverse']()[_0x39ad5e(0x22a)](),proxyEmit(_0x39ad5e(0x237),{'logs':_0x231adf,'total':_0x46708e});}else proxyEmit(_0x39ad5e(0x237),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x44d91b){const _0xc88eee=_0x2aac65;if(dbLogs[_0xc88eee(0x159)](_0xc88eee(0x1a0))[_0xc88eee(0x22a)]()){const _0x4a4c01=dbLogs[_0xc88eee(0x20b)](_0xc88eee(0x1a0))[_0xc88eee(0x26a)](_0xc88eee(0x187))[_0xc88eee(0x20c)](_0x43d67c=>{return _0x43d67c['type']=='order';})['value']();dbLogs['get'](_0xc88eee(0x1a0))['remove']()['write'](),dbLogs[_0xc88eee(0x20b)](_0xc88eee(0x1a0))[_0xc88eee(0x1f6)](_0x4a4c01)[_0xc88eee(0x1e9)](),emitHistory(_0x44d91b);}}async function pauseBot(_0x49c502=''){const _0x4f9c9d=_0x2aac65,_0x1790e0=new Date()[_0x4f9c9d(0x1d7)]();if(!lastErrorShown||_0x1790e0-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1790e0;!lastBotPause?(lastBotPause=_0x1790e0,consecutivePauses=0x1):(_0x1790e0-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x4f9c9d(0x275)]({'stop':'restart'},_0x2be84e=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x49c502)_0x49c502+='\x20|\x20';logHistory('error',_0x49c502+_0x4f9c9d(0x216)+pauseBotInterval/0xea60+_0x4f9c9d(0x204)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){process['send']({'stop':'kill'},_0x5c7fee=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x6f210f,_0x3f572d){const _0x46a7d0=_0x2aac65;if(_0x6f210f[_0x46a7d0(0x16e)]()[_0x46a7d0(0x135)](_0x46a7d0(0x17e)))return logHistory(_0x46a7d0(0x1fc),config[_0x46a7d0(0x176)]+_0x46a7d0(0x15d)),![];else{if(_0x6f210f['toString']()[_0x46a7d0(0x135)](_0x46a7d0(0x11f)))return logHistory(_0x46a7d0(0x1fc),config[_0x46a7d0(0x176)]+_0x46a7d0(0x19f)),![];else{if(_0x6f210f[_0x46a7d0(0x16e)]()[_0x46a7d0(0x135)]('AuthenticationError'))return logHistory(_0x46a7d0(0x1fc),config[_0x46a7d0(0x176)]+_0x46a7d0(0x1b6)),logHistory(_0x46a7d0(0x1fc),_0x46a7d0(0x198)),![];else await handleError(_0x6f210f,_0x3f572d);}}}async function handleError(_0x253ee8,_0x54f38e,_0x33f809=''){const _0x2ac5ee=_0x2aac65,_0x48348c=config['exchange']||'Exchange';if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x16d))||_0x253ee8[_0x2ac5ee(0x16e)]()['includes'](_0x2ac5ee(0x277)))await pauseBot(config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x170));else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x1dd))||_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)]('OnMaintenance'))await pauseBot(config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x203));else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x1b4)))await pauseBot(config[_0x2ac5ee(0x176)]+'\x20not\x20responding');else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x209)))await pauseBot(config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x251));else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x54f38e+_0x2ac5ee(0x161)),logHistory(_0x2ac5ee(0x1fc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x1a6)))logHistory(_0x2ac5ee(0x1fc),_0x54f38e+_0x2ac5ee(0x1eb)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x253ee8 instanceof ccxt[_0x2ac5ee(0x27f)])logger[_0x2ac5ee(0x22f)](_0x2ac5ee(0x17b),_0x253ee8),await pauseBot(config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x217));else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x17e)))logHistory(_0x2ac5ee(0x1fc),_0x54f38e+_0x2ac5ee(0x24a)+config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x206)),logHistory(_0x2ac5ee(0x1fc),_0x2ac5ee(0x10c)),await killBot();else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)](_0x2ac5ee(0x11f)))logHistory(_0x2ac5ee(0x1fc),_0x54f38e+_0x2ac5ee(0x24a)+config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x1c5)),logHistory(_0x2ac5ee(0x1fc),_0x2ac5ee(0x10c)),await killBot();else{if(_0x253ee8['toString']()[_0x2ac5ee(0x135)]('AuthenticationError'))logHistory(_0x2ac5ee(0x1fc),_0x54f38e+'\x20|\x20'+config[_0x2ac5ee(0x176)]+_0x2ac5ee(0x172)),logHistory('error',_0x2ac5ee(0x10c)),await killBot();else{if(_0x253ee8[_0x2ac5ee(0x16e)]()[_0x2ac5ee(0x135)]('InsufficientFunds'))logHistory(_0x2ac5ee(0x1fc),_0x54f38e+_0x2ac5ee(0x254)+_0x33f809);else _0x253ee8 instanceof ccxt[_0x2ac5ee(0x25c)]?(logger[_0x2ac5ee(0x22f)](_0x2ac5ee(0x253),_0x253ee8),logHistory('error',_0x54f38e+_0x2ac5ee(0x24a)+config[_0x2ac5ee(0x176)]+'\x20exchange\x20error')):(logger[_0x2ac5ee(0x11c)](_0x54f38e+_0x2ac5ee(0x18c),_0x253ee8),await pauseBot(_0x2ac5ee(0x1b1)));}}}}}}}}}}}function formatResult(_0xc5ed28,_0x306119){const _0x275c27=_0x2aac65;return parseFloat(_0xc5ed28[_0x275c27(0x24e)](_0x306119));}function formatResultTruncate(_0x3fd87a,_0x413012){const _0x4b1a85=_0x2aac65;let _0x4b3cf1=formatResultString(_0x3fd87a,0xa),_0x5ab6cf=_0x4b3cf1[_0x4b1a85(0x130)]('.');return _0x5ab6cf!=-0x1&&(_0x4b3cf1=_0x4b3cf1['slice'](0x0,_0x5ab6cf+_0x413012+0x1)),Number(_0x4b3cf1);}function formatResultString(_0x2c0bfe,_0x4df895){const _0x27d7c4=_0x2aac65;let _0x17f2cd;if(!(''+_0x2c0bfe)[_0x27d7c4(0x135)]('e'))_0x17f2cd=+(Math['round'](_0x2c0bfe+'e+'+_0x4df895)+'e-'+_0x4df895);else{let _0x17af8b=(''+_0x2c0bfe)[_0x27d7c4(0x143)]('e'),_0x33763d='';+_0x17af8b[0x1]+_0x4df895>0x0&&(_0x33763d='+'),_0x17f2cd=+(Math[_0x27d7c4(0x123)](+_0x17af8b[0x0]+'e'+_0x33763d+(+_0x17af8b[0x1]+_0x4df895))+'e-'+_0x4df895);}return Number(_0x17f2cd)[_0x27d7c4(0x24e)](_0x4df895);}function getServerTime(){const _0x46c753=_0x2aac65,_0x5355ad=new Date();return _0x5355ad[_0x46c753(0x25e)]()+'/'+(_0x5355ad['getMonth']()+0x1)['toString']()[_0x46c753(0x12c)](0x2,'0')+'/'+_0x5355ad[_0x46c753(0x21f)]()[_0x46c753(0x16e)]()[_0x46c753(0x12c)](0x2,'0')+'\x20'+_0x5355ad[_0x46c753(0x140)]()[_0x46c753(0x16e)]()['padStart'](0x2,'0')+':'+_0x5355ad['getMinutes']()[_0x46c753(0x16e)]()[_0x46c753(0x12c)](0x2,'0')+':'+_0x5355ad['getSeconds']()[_0x46c753(0x16e)]()[_0x46c753(0x12c)](0x2,'0');}function getTimeStamp(){const _0x55e3ab=_0x2aac65,_0x4bac2b=shiftedTime();return _0x4bac2b['getFullYear']()+'/'+(_0x4bac2b[_0x55e3ab(0x250)]()+0x1)[_0x55e3ab(0x16e)]()[_0x55e3ab(0x12c)](0x2,'0')+'/'+_0x4bac2b[_0x55e3ab(0x21f)]()[_0x55e3ab(0x16e)]()[_0x55e3ab(0x12c)](0x2,'0')+'\x20'+_0x4bac2b['getHours']()[_0x55e3ab(0x16e)]()[_0x55e3ab(0x12c)](0x2,'0')+':'+_0x4bac2b[_0x55e3ab(0x1aa)]()[_0x55e3ab(0x16e)]()[_0x55e3ab(0x12c)](0x2,'0')+':'+_0x4bac2b[_0x55e3ab(0x175)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x2bee70=_0x2aac65,_0x4a8f56=shiftedTime();return _0x4a8f56[_0x2bee70(0x25e)]()+'/'+(_0x4a8f56[_0x2bee70(0x250)]()+0x1)[_0x2bee70(0x16e)]()['padStart'](0x2,'0')+'/'+_0x4a8f56[_0x2bee70(0x21f)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x3004bd=_0x2aac65,_0x31d6ff=shiftedTime();return _0x31d6ff[_0x3004bd(0x140)]()[_0x3004bd(0x16e)]()[_0x3004bd(0x12c)](0x2,'0');}function sleep(_0x5d31ca){return new Promise(_0x14e4e3=>setTimeout(_0x14e4e3,_0x5d31ca));}function shiftedTime(){const _0x5aa816=_0x2aac65,_0x5b16cc=new Date();let _0x219213=_0x5b16cc;if(config&&config[_0x5aa816(0x21d)]!==0x0)_0x219213=fns[_0x5aa816(0x171)](_0x5b16cc,{'hours':config[_0x5aa816(0x21d)]});return _0x219213;}function timer(_0x19b66e){const _0x2314ac=_0x2aac65,_0x589421=new Date();!lasttime?console[_0x2314ac(0x1c3)](getTimeStamp()+_0x2314ac(0x1ea),_0x19b66e,_0x589421):console['log'](getTimeStamp()+_0x2314ac(0x1ea),_0x19b66e,(_0x589421-lasttime)/0x3e8),lasttime=_0x589421;}