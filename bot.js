const _0x2500ad=_0x22fe;(function(_0x505240,_0x188e38){const _0x4e9a3c=_0x22fe,_0xaf5645=_0x505240();while(!![]){try{const _0x5a0f5a=parseInt(_0x4e9a3c(0x27b))/0x1*(parseInt(_0x4e9a3c(0x2bb))/0x2)+parseInt(_0x4e9a3c(0x258))/0x3*(-parseInt(_0x4e9a3c(0x2b1))/0x4)+parseInt(_0x4e9a3c(0x17a))/0x5*(-parseInt(_0x4e9a3c(0x1c4))/0x6)+-parseInt(_0x4e9a3c(0x207))/0x7+parseInt(_0x4e9a3c(0x268))/0x8+-parseInt(_0x4e9a3c(0x2b3))/0x9+parseInt(_0x4e9a3c(0x2f5))/0xa;if(_0x5a0f5a===_0x188e38)break;else _0xaf5645['push'](_0xaf5645['shift']());}catch(_0x418f62){_0xaf5645['push'](_0xaf5645['shift']());}}}(_0x4910,0x9e145));const _0x3e8a27=function(){let _0x2a179a=!![];return function(_0x3b7fb1,_0x58f80e){const _0x4eee23=_0x2a179a?function(){const _0x3f55af=_0x22fe;if(_0x58f80e){const _0x4f27d6=_0x58f80e[_0x3f55af(0x199)](_0x3b7fb1,arguments);return _0x58f80e=null,_0x4f27d6;}}:function(){};return _0x2a179a=![],_0x4eee23;};}(),_0x2d2dc2=_0x3e8a27(this,function(){const _0x4df83d=_0x22fe;return _0x2d2dc2[_0x4df83d(0x2a2)]()[_0x4df83d(0x2cc)]('(((.+)+)+)+$')['toString']()[_0x4df83d(0x2f4)](_0x2d2dc2)[_0x4df83d(0x2cc)]('(((.+)+)+)+$');});_0x2d2dc2();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x2500ad(0x1c2)),fs=require('fs'),fns=require(_0x2500ad(0x17c)),forge=require('node-forge'),util=require(_0x2500ad(0x170)),argv=require(_0x2500ad(0x1de))(process[_0x2500ad(0x2de)][_0x2500ad(0x2a4)](0x2))[_0x2500ad(0x2de)],path=require(_0x2500ad(0x210)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x2500ad(0x1d0),_0x2500ad(0x2cf),_0x2500ad(0x23a),_0x2500ad(0x171),_0x2500ad(0x2d1),_0x2500ad(0x25a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2500ad(0x2c6)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x2500ad(0x2a7)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x2500ad(0x2e8))[_0x2500ad(0x14a)],environment=require(_0x2500ad(0x2e8))['environment']||_0x2500ad(0x2ec),botID=process[_0x2500ad(0x2de)][0x2]||_0x2500ad(0x221),pattern=/^[0-9]{3}$/;!pattern[_0x2500ad(0x16a)](botID)&&(console[_0x2500ad(0x244)](_0x2500ad(0x16e)+botID+_0x2500ad(0x2e1)),killBot());const userID=process[_0x2500ad(0x2de)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x2500ad(0x2c8),logspath=userID?_0x2500ad(0x252)+userID+'/':_0x2500ad(0x252),loggerfile=fs[_0x2500ad(0x2ed)](logspath+_0x2500ad(0x20c),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x2500ad(0x173)](configpath);!fs['existsSync'](logspath)&&fs[_0x2500ad(0x173)](logspath);const configfile=configpath+_0x2500ad(0x1a0)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x2500ad(0x2d9),performancefile=configpath+_0x2500ad(0x1a0)+botID+_0x2500ad(0x18e),coinresultsfile=configpath+_0x2500ad(0x1a0)+botID+'-results.json',settingsfile=configpath+_0x2500ad(0x15a),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2500ad(0x2ba),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2500ad(0x1f1)]({'logs':[],'version':serverversion})['write']();function _0x22fe(_0x227fb3,_0x15bffa){const _0x10d440=_0x4910();return _0x22fe=function(_0x2d2dc2,_0x3e8a27){_0x2d2dc2=_0x2d2dc2-0x13e;let _0x491064=_0x10d440[_0x2d2dc2];return _0x491064;},_0x22fe(_0x227fb3,_0x15bffa);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2500ad(0x1f1)]({'bot':[],'version':serverversion})[_0x2500ad(0x2d4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2500ad(0x1f1)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5a276c=>{const _0x399193=_0x2500ad;console[_0x399193(0x244)](_0x5a276c);},'simple':_0x382a91=>{const _0x264911=_0x2500ad;console[_0x264911(0x244)](_0x382a91),loggerfile[_0x264911(0x2d4)](util[_0x264911(0x29a)](_0x382a91)+'\x0a');},'full':async(_0xe9a171,_0x5d17d1='')=>{const _0x3da3ec=_0x2500ad;let _0x163206;if(config['showname'])_0x163206=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0xe9a171;else _0x163206=getTimeStamp()+_0x3da3ec(0x2df)+botID+'\x20>\x20'+_0xe9a171;console[_0x3da3ec(0x244)](_0x163206),loggerfile[_0x3da3ec(0x2d4)](util['format'](_0x163206)+'\x0a'),_0x5d17d1&&(console['log'](_0x5d17d1),loggerfile[_0x3da3ec(0x2d4)](util['format'](_0x5d17d1)+'\x0a'));},'debug':async(_0x1f46ad,_0x2e2e76='')=>{const _0x34820d=_0x2500ad;let _0x1a05b4;if(config[_0x34820d(0x1a5)])_0x1a05b4=getTimeStamp()+':\x20'+config[_0x34820d(0x2db)]+_0x34820d(0x1ce)+_0x1f46ad;else _0x1a05b4=getTimeStamp()+_0x34820d(0x2df)+botID+_0x34820d(0x1ce)+_0x1f46ad;if(debugging)console['log'](_0x1a05b4);loggerfile['write'](util[_0x34820d(0x29a)](_0x1a05b4)+'\x0a');if(_0x2e2e76){if(debugging)console['log'](_0x2e2e76);loggerfile[_0x34820d(0x2d4)](util[_0x34820d(0x29a)](_0x2e2e76)+'\x0a');}}};process['on']('uncaughtException',function(_0x2aae6e){const _0x27ba5f=_0x2500ad;handleError(_0x2aae6e,_0x27ba5f(0x227));});settings[_0x2500ad(0x1dc)]!=config[_0x2500ad(0x1dc)]&&updateTimeshift(settings[_0x2500ad(0x1dc)]);settings['onepagemode']!=config[_0x2500ad(0x182)]&&updateOnepagemode(settings[_0x2500ad(0x182)]);(settings['marketcapApi']&&!config[_0x2500ad(0x145)]||!settings[_0x2500ad(0x145)]&&config[_0x2500ad(0x145)])&&updateMarketcapApi(settings['marketcapApi']);process['send']({'started':_0x2500ad(0x2cb)},_0x320b7a=>{}),initializeProcessListeners();function proxyEmit(_0x2116c5,_0xef17a0=null){const _0x392319=_0x2500ad;process[_0x392319(0x212)]({'function':_0x2116c5,'args':_0xef17a0},_0x1d38b4=>{});}function initializeProcessListeners(){const _0x2b4c40=_0x2500ad;process['on'](_0x2b4c40(0x17d),_0x2f43f6=>{const _0x58cdf7=_0x2b4c40;switch(Object[_0x58cdf7(0x1f9)](_0x2f43f6)[0x0]){case _0x58cdf7(0x1dc):_0x2f43f6[_0x58cdf7(0x1dc)]!=undefined&&(settings[_0x58cdf7(0x1dc)]=_0x2f43f6['timeshift'],updateTimeshift(settings[_0x58cdf7(0x1dc)]));break;case _0x58cdf7(0x182):_0x2f43f6[_0x58cdf7(0x182)]!=undefined&&(settings['onepagemode']=_0x2f43f6[_0x58cdf7(0x182)],updateOnepagemode(settings[_0x58cdf7(0x182)]));break;case _0x58cdf7(0x145):_0x2f43f6[_0x58cdf7(0x145)]!=undefined&&(settings[_0x58cdf7(0x145)]=_0x2f43f6[_0x58cdf7(0x145)],updateMarketcapApi(settings['marketcapApi']));break;case _0x58cdf7(0x2ef):_0x2f43f6['bots']!=undefined&&(bots=JSON[_0x58cdf7(0x2c0)](_0x2f43f6[_0x58cdf7(0x2ef)]),proxyEmit(_0x58cdf7(0x2ef),bots));break;case _0x58cdf7(0x275):switch(_0x2f43f6[_0x58cdf7(0x275)]){case _0x58cdf7(0x20d):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x58cdf7(0x26c):emitHistory(_0x2f43f6[_0x58cdf7(0x18b)]);break;case _0x58cdf7(0x1e6):deleteHistoryAlerts(_0x2f43f6[_0x58cdf7(0x18b)]);break;case _0x58cdf7(0x290):getPortfolio(_0x2f43f6[_0x58cdf7(0x18b)]);break;case'storeConfiguration':storeConfiguration(_0x2f43f6[_0x58cdf7(0x18b)]);break;case _0x58cdf7(0x1e3):storeHeadless(_0x2f43f6['args']);break;case _0x58cdf7(0x223):storeFiat(_0x2f43f6[_0x58cdf7(0x18b)]);break;case _0x58cdf7(0x2e2):resetHistory();break;case _0x58cdf7(0x230):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x2f43f6['args']);break;case _0x58cdf7(0x1c0):cancelLoading();break;case _0x58cdf7(0x270):showConfig();break;case _0x58cdf7(0x29e):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x186e35=![]){const _0x3ab7fa=_0x2500ad;logger[_0x3ab7fa(0x1e5)](_0x3ab7fa(0x188)+(_0x186e35?_0x3ab7fa(0x26f):_0x3ab7fa(0x2a3))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x186e35)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x3ab7fa(0x2da)]!=_0x3ab7fa(0x26e)){loadingProgress=0x0;_0x186e35&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x3ab7fa(0x236),emittedConfiguration()),initialPerformanceStored=![]);const _0x5a9077=await getCoins();[currentCoins,currentCoinsAll]=_0x5a9077,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3ab7fa(0x1e5)](_0x3ab7fa(0x19b)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x3ab7fa(0x1cd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x4f6b50=![]){const _0x217796=_0x2500ad;logger[_0x217796(0x1e5)](_0x217796(0x155)+(_0x4f6b50?_0x217796(0x1fb):_0x217796(0x22e))+_0x217796(0x154)+config[_0x217796(0x174)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4f6b50){getBalances();return;}coinsLoaded=![];if(config[_0x217796(0x2da)]!=''&&config[_0x217796(0x2da)]!=_0x217796(0x26e)){loadingProgress=0x1;const _0x61e89c=await getCoins();[currentCoins,currentCoinsAll]=_0x61e89c,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x217796(0x1e5)](_0x217796(0x19b)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x217796(0x1cd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2e9849){const _0x6e9611=_0x2500ad;let _0x196a6a=![];if(_0x2e9849)_0x196a6a=!![];let _0x4f3934;_0x196a6a?_0x4f3934=_0x2e9849[_0x6e9611(0x229)](_0x2c3c46=>_0x2c3c46[_0x6e9611(0x2ff)]):_0x4f3934=currentCoinsAll[_0x6e9611(0x229)](_0x176e52=>_0x176e52[_0x6e9611(0x2ff)]);if(!config['marketcapApi']||!_0x196a6a&&!config[_0x6e9611(0x2ac)]||_0x4f3934[_0x6e9611(0x1cd)]==0x0)return;let _0x149f52=null;try{_0x149f52=await axios[_0x6e9611(0x2c5)](_0x6e9611(0x217),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x6e9611(0x145)]},'params':{'symbol':_0x4f3934[_0x6e9611(0x2a2)]()}});}catch(_0x4efd45){_0x149f52=null,_0x4efd45[_0x6e9611(0x2a2)]()['includes'](_0x6e9611(0x1db))?(config[_0x6e9611(0x145)]=![],updateConfig(),proxyEmit(_0x6e9611(0x236),emittedConfiguration()),logHistory(_0x6e9611(0x1a4),_0x6e9611(0x29f))):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x6e9611(0x2b7)),logger[_0x6e9611(0x1e5)](_0x6e9611(0x20f),_0x4efd45[_0x6e9611(0x2a2)]()+_0x6e9611(0x1ac)+_0x4efd45[_0x6e9611(0x1f3)]));}if(_0x149f52){let _0x2feea2=0x0;const _0x58b8d5=_0x149f52[_0x6e9611(0x15e)];_0x4f3934[_0x6e9611(0x1eb)](_0x13ded9=>{const _0x13eba5=_0x6e9611;if(_0x58b8d5[_0x13eba5(0x15e)][_0x13ded9][0x0])_0x2feea2+=_0x58b8d5[_0x13eba5(0x15e)][_0x13ded9][0x0][_0x13eba5(0x2a6)][_0x13eba5(0x1d0)][_0x13eba5(0x13f)];}),_0x4f3934[_0x6e9611(0x1eb)](_0x272a59=>{const _0x2e566a=_0x6e9611,_0x3fcf37=_0x58b8d5[_0x2e566a(0x15e)][_0x272a59][0x0]?_0x58b8d5['data'][_0x272a59][0x0][_0x2e566a(0x2a6)][_0x2e566a(0x1d0)][_0x2e566a(0x13f)]:0x0;if(_0x196a6a){const _0x522169=_0x2e9849['find'](_0x5e229c=>_0x5e229c[_0x2e566a(0x2ff)]==_0x272a59);_0x522169&&(_0x522169[_0x2e566a(0x24e)]=_0x3fcf37);}else{const _0x476e4e=currentCoins[_0x2e566a(0x23b)](_0x476779=>_0x476779[_0x2e566a(0x2ff)]==_0x272a59);_0x476e4e&&(_0x476e4e[_0x2e566a(0x24e)]=_0x3fcf37);const _0x319085=currentCoinsAll[_0x2e566a(0x23b)](_0x21d2bd=>_0x21d2bd[_0x2e566a(0x2ff)]==_0x272a59);_0x319085&&(_0x319085['marketcap']=_0x3fcf37);}}),!_0x196a6a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0xa04bc9=_0x2500ad,_0x3de138=0x2;let _0x208bdf=0x0,_0x2dbdce=0x0,_0x314f56=0x0,_0x3bc3b4=0x0,_0x79ae22=0x0;config['portfolio'][_0xa04bc9(0x1eb)](_0x4976ce=>{const _0x9ba4f8=_0xa04bc9;if(!_0x4976ce[_0x9ba4f8(0x22c)]){_0x314f56++,_0x208bdf+=_0x4976ce[_0x9ba4f8(0x21d)];if(_0x4976ce['slider']===-0x1){_0x208bdf++;const _0x394d65=currentCoinsAll[_0x9ba4f8(0x23b)](_0x4d4823=>_0x4d4823[_0x9ba4f8(0x2ff)]==_0x4976ce[_0x9ba4f8(0x2ff)]);_0x394d65&&(_0x3bc3b4+=_0x394d65[_0x9ba4f8(0x24e)],_0x79ae22+=Math[_0x9ba4f8(0x1ef)](_0x394d65[_0x9ba4f8(0x24e)]));}if(_0x4976ce['slider']!==-0x1)_0x2dbdce++;}});let _0xa91b45;const _0x5cfc68=0x64-_0x208bdf,_0x4fcfcb=_0x314f56-_0x2dbdce;_0xa91b45=_0x4fcfcb===0x0?_0x208bdf:Math[_0xa04bc9(0x28f)](0x64,_0x208bdf),config[_0xa04bc9(0x17b)][_0xa04bc9(0x1eb)](_0xd8a52=>{const _0x900414=_0xa04bc9,_0x2f5ea3=currentCoinsAll[_0x900414(0x23b)](_0x48f2a4=>_0x48f2a4[_0x900414(0x2ff)]==_0xd8a52[_0x900414(0x2ff)]);_0x2f5ea3&&(_0xd8a52['marketcap']=_0x2f5ea3[_0x900414(0x24e)]);if(!_0xd8a52['excluded']){if(_0xa91b45<=0x64){if(_0xd8a52[_0x900414(0x21d)]===-0x1){if(_0x3bc3b4!==0x0&&config[_0x900414(0x2ac)]){if(_0x2f5ea3){if(config[_0x900414(0x2ac)]==_0x900414(0x24e))_0xd8a52[_0x900414(0x24a)]=(_0x5cfc68/(_0x3bc3b4/_0x2f5ea3[_0x900414(0x24e)]))['toFixed'](_0x3de138);else config[_0x900414(0x2ac)]==_0x900414(0x1b4)&&(_0xd8a52[_0x900414(0x24a)]=(_0x5cfc68/(_0x79ae22/Math[_0x900414(0x1ef)](_0x2f5ea3['marketcap'])))['toFixed'](_0x3de138));}}}}}}),updateConfig();}function updateConfig(){const _0x49c69f=_0x2500ad;let _0xeb6770=dbConfig[_0x49c69f(0x2c5)](_0x49c69f(0x1b6))['find']({'botID':botID})[_0x49c69f(0x257)]();_0xeb6770&&dbConfig['get'](_0x49c69f(0x1b6))[_0x49c69f(0x23b)]({'botID':botID})[_0x49c69f(0x1c5)](config)[_0x49c69f(0x2d4)]();}function logMemory(){const _0x54736c=_0x2500ad;if(environment!=_0x54736c(0x2c4))return;const _0x4e202f=process[_0x54736c(0x2fa)]()[_0x54736c(0x255)]/0x400/0x400;logger['debug'](_0x54736c(0x216)+process['pid']+'\x20uses\x20'+formatResult(_0x4e202f,0x1)+_0x54736c(0x1ec));}async function startScheduler(){const _0x52fd4a=_0x2500ad,_0x217d7a=shiftedTime()[_0x52fd4a(0x1d6)]();getMarketCap(),loadSymbols(),_0x217d7a==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x44591e=![]){const _0x1d5777=_0x2500ad;logger[_0x1d5777(0x1e5)](_0x1d5777(0x281));if(!_0x44591e)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':'restart'},_0x2d246b=>{});}async function initExchange(_0x32708e=config[_0x2500ad(0x174)],_0x2ebcf4=config[_0x2500ad(0x2da)],_0x53b8f2=config['apiSecret'],_0x187e39=config[_0x2500ad(0x2fc)]){const _0x3998bb=_0x2500ad;if(exchange){logger[_0x3998bb(0x1e5)](_0x3998bb(0x273));return;}logger[_0x3998bb(0x1e5)]('Initializing\x20exchange');!supportedExchanges()[_0x3998bb(0x150)](_0x32708e)&&(logHistory(_0x3998bb(0x1a4),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x32708e+_0x3998bb(0x1df)),killBot());const _0x4780ef=ccxt['pro'][_0x32708e[_0x3998bb(0x21f)]()];exchange=new _0x4780ef({'apiKey':_0x2ebcf4,'secret':_0x53b8f2,'options':{'defaultType':'spot'}});if(_0x187e39)exchange[_0x3998bb(0x23e)]=_0x187e39;}function updateExchange(_0x1737b6,_0x57e5e9,_0x338105=null){const _0x413f3d=_0x2500ad;exchange['apiKey']=_0x1737b6,exchange[_0x413f3d(0x156)]=_0x57e5e9,exchange[_0x413f3d(0x2fc)]=_0x338105,logger['debug'](_0x413f3d(0x1b9));}function setStableCoins(){const _0x53d519=_0x2500ad;let _0x41a3d7=config[_0x53d519(0x29d)]==_0x53d519(0x2c2)?'ETH':config['basecoin']=='PAXG'?_0x53d519(0x259):'BTC',_0x53a3cd=allSymbols[_0x53d519(0x150)](_0x41a3d7+'/USD')?'USD':allSymbols[_0x53d519(0x150)](_0x41a3d7+_0x53d519(0x1d5))?_0x53d519(0x171):_0x53d519(0x180),_0x1a1a5d=allSymbols[_0x53d519(0x150)](_0x41a3d7+_0x53d519(0x295))?'EUR':_0x53a3cd;enableFiatToggle=!![],_0x53a3cd==_0x53d519(0x180)&&(enableFiatToggle=![],storeFiat('EUR')),_0x1a1a5d!=_0x53d519(0x180)&&(enableFiatToggle=![],storeFiat(_0x53d519(0x1d0))),stablecoins={'eur':{'coin':''+_0x41a3d7+_0x1a1a5d,'symbol':_0x41a3d7+'/'+_0x1a1a5d},'usd':{'coin':''+_0x41a3d7+_0x53a3cd,'symbol':_0x41a3d7+'/'+_0x53a3cd}};}async function initwsCcxt(){const _0x182094=_0x2500ad;initCycle++;const _0x22c0cd=initCycle;let _0x254e6a=[];config['portfolio'][_0x182094(0x1eb)](_0x38f495=>{const _0x3a3da1=_0x182094;if(!_0x38f495[_0x3a3da1(0x22c)]&&_0x38f495[_0x3a3da1(0x2ff)]!=config[_0x3a3da1(0x29d)])_0x254e6a[_0x3a3da1(0x18d)](_0x38f495[_0x3a3da1(0x167)]);});if(!_0x254e6a[_0x182094(0x150)](stablecoins[_0x182094(0x200)][_0x182094(0x167)]))_0x254e6a['push'](stablecoins[_0x182094(0x200)]['symbol']);if(!_0x254e6a['includes'](stablecoins['usd'][_0x182094(0x167)]))_0x254e6a['push'](stablecoins['usd'][_0x182094(0x167)]);if(config['exchange'][_0x182094(0x277)](_0x182094(0x228))&&config[_0x182094(0x29d)]!=_0x182094(0x259)){if(!_0x254e6a[_0x182094(0x150)](_0x182094(0x2f7)+config['basecoin']))_0x254e6a[_0x182094(0x18d)](_0x182094(0x2f7)+config[_0x182094(0x29d)]);}loadCoins(_0x254e6a),_0x254e6a=validateSymbols(_0x254e6a);const _0x9356f8=async _0x5de623=>{const _0x37e253=_0x182094;let _0x4eb9e3;try{const _0x43c923=await getTickers(_0x5de623);Object[_0x37e253(0x197)](_0x43c923)[_0x37e253(0x1eb)](_0x1a85b9=>{const _0x392914=_0x37e253;_0x4eb9e3=_0x1a85b9[0x1][_0x392914(0x167)],gTicker[noslash(_0x4eb9e3)]=_0x1a85b9[0x1][_0x392914(0x184)],gChange[_0x4eb9e3]=_0x1a85b9[0x1]['percentage'];});}catch(_0x556a73){await handleError(_0x556a73,'initTickers()',_0x4eb9e3);}},_0x50ce8f=async _0x5a64da=>{const _0x5934c4=_0x182094;while(initCycle==_0x22c0cd){if(!botPaused)try{const _0x23f9a8=await exchange[_0x5934c4(0x262)](_0x5a64da);gTicker[noslash(_0x23f9a8[0x0]['symbol'])]=_0x23f9a8[0x0]['price'];}catch(_0xc3b01){if(!exchangeStopped)await handleError(_0xc3b01,_0x5934c4(0x2fe),_0x5a64da);}else await sleep(0x64);}},_0xa03ce7=async _0x41b7cb=>{const _0x3de0f1=_0x182094;while(initCycle==_0x22c0cd){if(!botPaused)try{const _0x1a231e=await exchange['watchTradesForSymbols'](_0x41b7cb),_0x1655ae=_0x1a231e[_0x3de0f1(0x187)]();gTicker[noslash(_0x1655ae[_0x3de0f1(0x167)])]=_0x1655ae[_0x3de0f1(0x267)];}catch(_0x236eb5){if(!exchangeStopped)await handleError(_0x236eb5,_0x3de0f1(0x20b),_0x41b7cb[_0x3de0f1(0x2a2)]());}else await sleep(0x64);}},_0x69c41b=async _0x58c316=>{const _0x410cf0=_0x182094;while(initCycle==_0x22c0cd){if(!botPaused){let _0x4e27de;try{await sleep(0x3c*0x3e8);const _0x1fa18c=await getTickers(_0x58c316);Object[_0x410cf0(0x197)](_0x1fa18c)[_0x410cf0(0x1eb)](_0x507405=>{const _0x11cac5=_0x410cf0;_0x4e27de=_0x507405[0x1]['symbol'],gChange[_0x4e27de]=_0x507405[0x1][_0x11cac5(0x234)];});}catch(_0x4940cc){if(!exchangeStopped)await handleError(_0x4940cc,'fetchTickers()',_0x4e27de);}}else await sleep(0x64);}},_0x2aad39=async _0x3d9caf=>{const _0x2f08dd=_0x182094;while(initCycle==_0x22c0cd){if(!botPaused)try{const _0x5a6b61=await exchange['watchOrders'](_0x3d9caf);initCycle==_0x22c0cd&&_0x5a6b61['forEach'](_0x221293=>{updateNumberCoinsCcxt(_0x221293);});}catch(_0x14b7fa){if(!exchangeStopped)await handleError(_0x14b7fa,_0x2f08dd(0x204));}else await sleep(0x64);}};_0x9356f8(_0x254e6a),_0x69c41b(_0x254e6a),exchange['has'][_0x182094(0x2be)]&&!(config[_0x182094(0x174)]==_0x182094(0x22a)&&_0x254e6a[_0x182094(0x1cd)]>0xa)?_0xa03ce7(_0x254e6a):_0x254e6a['forEach'](_0x2815d8=>{_0x50ce8f(_0x2815d8);}),_0x254e6a['forEach'](_0x369b36=>{_0x2aad39(_0x369b36);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5b3098){const _0x182142=_0x2500ad;let _0x1af43e={};try{if(config['exchange']!='Cryptocom')_0x1af43e=await exchange[_0x182142(0x146)](_0x5b3098);else for(const _0x5e105a of _0x5b3098){const _0x57afb4=await exchange[_0x182142(0x1e4)](_0x5e105a);_0x1af43e[_0x5e105a]=_0x57afb4;}return _0x1af43e;}catch(_0x17450a){throw _0x17450a;}}function setBlockTransactionDetection(_0x1fc3f1){const _0x4875e6=_0x2500ad;blockTransactionDetection=_0x1fc3f1,logger[_0x4875e6(0x1e5)](_0x4875e6(0x1c3)+blockTransactionDetection);}async function detectLiquidityChange(_0xd84749=0x0){const _0x56e5d7=_0x2500ad;transactionDetectionOngoing=!![];try{const _0x18710b=await getCoins(_0xd84749),[_0x1a2bae,_0x578be8]=_0x18710b;let _0x1e8041=[];currentCoins[_0x56e5d7(0x1eb)](_0x23266d=>{const _0xbc5caf=_0x56e5d7,_0x1ca7ed=_0x1a2bae['find'](_0x1a90db=>_0x1a90db[_0xbc5caf(0x2ff)]==_0x23266d[_0xbc5caf(0x2ff)]);if(_0x1ca7ed){if(_0x23266d[_0xbc5caf(0x2dc)]!=_0x1ca7ed['number']){let _0x3c415f;if(_0x23266d[_0xbc5caf(0x2ff)]!=config[_0xbc5caf(0x29d)]){const _0x42c433=gTicker[noslash(_0x23266d[_0xbc5caf(0x167)])];_0x3c415f=_0x23266d['reverse']?0x1/_0x42c433:_0x42c433;}else _0x3c415f=0x1;_0x1e8041['push']({'coin':_0x23266d[_0xbc5caf(0x2ff)],'symbol':_0x23266d[_0xbc5caf(0x167)],'price':_0x3c415f,'number':Number(formatResult(_0x1ca7ed[_0xbc5caf(0x2dc)]-_0x23266d[_0xbc5caf(0x2dc)],0x8)),'basecoinvalue':_0x3c415f*(_0x1ca7ed['number']-_0x23266d['number'])});}}});if(_0x1e8041[_0x56e5d7(0x1cd)]>0x0&&!blockTransactionDetection){for(const _0x554a23 of _0x1e8041){if(config[_0x56e5d7(0x249)]){logger[_0x56e5d7(0x1e5)](_0x56e5d7(0x1ba)+_0x554a23[_0x56e5d7(0x191)]+_0x56e5d7(0x2bd)+lastFees[_0x56e5d7(0x2e5)]);if(lastFees[_0x56e5d7(0x2e5)]==0x0||Math[_0x56e5d7(0x1b3)](_0x554a23['basecoinvalue'])>lastFees['highest']*0x3){if(config[_0x56e5d7(0x249)]==_0x56e5d7(0x142)){delete _0x554a23['symbol'],delete _0x554a23[_0x56e5d7(0x191)];let _0x4343bb=[],_0x30d51c=[...config[_0x56e5d7(0x235)]]||[],_0x310793=config[_0x56e5d7(0x235)];_0x30d51c[_0x56e5d7(0x1d7)]((_0x18a0ef,_0x357f66)=>_0x18a0ef[_0x56e5d7(0x2f8)]>_0x357f66[_0x56e5d7(0x2f8)]?-0x1:_0x357f66[_0x56e5d7(0x2f8)]>_0x18a0ef[_0x56e5d7(0x2f8)]?0x1:0x0);const _0x52c07e=getDate();if(_0x30d51c[0x0]){const _0x5d35e7=fns[_0x56e5d7(0x2c0)](_0x30d51c[0x0][_0x56e5d7(0x2f8)],_0x56e5d7(0x19e),new Date()),_0x4e460f=fns[_0x56e5d7(0x2c0)](_0x52c07e,'yyyy/MM/dd',new Date());if(fns[_0x56e5d7(0x209)](_0x5d35e7,_0x4e460f)){_0x4343bb=_0x30d51c[0x0][_0x56e5d7(0x287)];const _0x54c56e=_0x4343bb[_0x56e5d7(0x23b)](_0x375498=>_0x375498[_0x56e5d7(0x2ff)]==_0x554a23[_0x56e5d7(0x2ff)]);_0x54c56e?(_0x54c56e[_0x56e5d7(0x2dc)]+=_0x554a23['number'],_0x54c56e[_0x56e5d7(0x2dc)]==0x0&&(_0x4343bb=_0x4343bb['filter'](_0x1ec2fa=>{const _0x14f9c1=_0x56e5d7;return _0x1ec2fa[_0x14f9c1(0x2ff)]!=_0x554a23[_0x14f9c1(0x2ff)];}))):_0x4343bb[_0x56e5d7(0x18d)](_0x554a23);const _0x40ca01=_0x310793[_0x56e5d7(0x23b)](_0x384288=>_0x384288[_0x56e5d7(0x2f8)]==_0x52c07e);_0x40ca01[_0x56e5d7(0x287)]=_0x4343bb;}else _0x310793['push']({'date':_0x52c07e,'changes':[_0x554a23]});}const _0x16253b=_0x310793[_0x56e5d7(0x23b)](_0x3b6f52=>_0x3b6f52[_0x56e5d7(0x2f8)]==_0x52c07e);if(_0x16253b){let _0x2b8135=!![];_0x16253b[_0x56e5d7(0x287)][_0x56e5d7(0x1eb)](_0x4d830f=>{const _0x27f6fd=_0x56e5d7;if(_0x4d830f[_0x27f6fd(0x2dc)]!=0x0)_0x2b8135=![];}),_0x2b8135&&(_0x310793=_0x310793[_0x56e5d7(0x2ee)](_0x340621=>{return _0x340621['date']!=_0x52c07e;}));}let _0x4401b5=dbConfig['get']('bot')[_0x56e5d7(0x23b)]({'botID':botID})['value']();_0x4401b5&&(dbConfig['get']('bot')[_0x56e5d7(0x23b)]({'botID':botID})[_0x56e5d7(0x1c5)]({'liquidity':_0x310793})[_0x56e5d7(0x2d4)](),config[_0x56e5d7(0x235)]=_0x310793);logHistory(_0x56e5d7(0x29c),_0x56e5d7(0x27d)+Math[_0x56e5d7(0x1b3)](_0x554a23[_0x56e5d7(0x2dc)])+'\x20'+_0x554a23[_0x56e5d7(0x2ff)]+'\x20'+(_0x554a23['number']>0x0?_0x56e5d7(0x25f):'removed')+_0x56e5d7(0x219)),proxyEmit(_0x56e5d7(0x236),emittedConfiguration());const _0xf68ae4=getNormalizedPerformance();emitPerformance(_0xf68ae4),getStartingBalances(_0xf68ae4),logger[_0x56e5d7(0x1e5)](_0x56e5d7(0x214));}else config[_0x56e5d7(0x249)]==_0x56e5d7(0x24d)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x56e5d7(0x29c),'Portfolio\x20change\x20detected:\x20'+Math[_0x56e5d7(0x1b3)](_0x554a23[_0x56e5d7(0x2dc)])+'\x20'+_0x554a23[_0x56e5d7(0x2ff)]+'\x20'+(_0x554a23[_0x56e5d7(0x2dc)]>0x0?'added':_0x56e5d7(0x293))+_0x56e5d7(0x27c))):logger[_0x56e5d7(0x1e5)](_0x56e5d7(0x27d)+Math[_0x56e5d7(0x1b3)](_0x554a23[_0x56e5d7(0x2dc)])+'\x20'+_0x554a23['coin']+'\x20'+(_0x554a23[_0x56e5d7(0x2dc)]>0x0?'added':_0x56e5d7(0x293))+_0x56e5d7(0x1b7)));}else logger[_0x56e5d7(0x1e5)](_0x56e5d7(0x265)+Math[_0x56e5d7(0x1b3)](_0x554a23[_0x56e5d7(0x2dc)])+'\x20'+_0x554a23[_0x56e5d7(0x2ff)]+'\x20'+(_0x554a23['number']>0x0?_0x56e5d7(0x25f):_0x56e5d7(0x293)));}else logger[_0x56e5d7(0x1e5)](_0x56e5d7(0x27d)+Math['abs'](_0x554a23[_0x56e5d7(0x2dc)])+'\x20'+_0x554a23[_0x56e5d7(0x2ff)]+'\x20'+(_0x554a23[_0x56e5d7(0x2dc)]>0x0?_0x56e5d7(0x25f):'removed')+_0x56e5d7(0x280));}currentCoins=_0x1a2bae,currentCoinsAll=_0x578be8;}}catch(_0x3db963){if(!exchangeStopped)await handleError(_0x3db963,_0x56e5d7(0x1cf));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x45e56f=_0x2500ad;try{markets=await exchange[_0x45e56f(0x1af)](!![]),allSymbols=[],Object['entries'](markets)[_0x45e56f(0x1eb)](_0x5220cb=>{const _0x19f290=_0x45e56f;_0x5220cb[0x1][_0x19f290(0x294)]&&_0x5220cb[0x1][_0x19f290(0x1e9)]&&allSymbols[_0x19f290(0x18d)](_0x5220cb[0x0]);});}catch(_0x5d1a52){markets?logger[_0x45e56f(0x1e5)]('Error\x20in\x20loadSymbols():\x20'+_0x5d1a52[_0x45e56f(0x2a2)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x5d1a52[_0x45e56f(0x2a2)]()[_0x45e56f(0x21f)]()[_0x45e56f(0x150)](_0x45e56f(0x2b6))||_0x5d1a52[_0x45e56f(0x2a2)]()['toLowerCase']()[_0x45e56f(0x150)](_0x45e56f(0x23d))?logHistory(_0x45e56f(0x1a4),_0x45e56f(0x22d)):handleErrorNoStop(_0x5d1a52,'loadSymbols()'),logHistory(_0x45e56f(0x1a4),_0x45e56f(0x2b8)),logHistory(_0x45e56f(0x1a4),_0x45e56f(0x175)+loadCoinsRetryInterval/0xea60+_0x45e56f(0x1f8)),logger[_0x45e56f(0x1e5)](_0x45e56f(0x20f),_0x5d1a52),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x42c3db){const _0xaf7f45=_0x2500ad;let _0x1f988d=[];return _0x42c3db[_0xaf7f45(0x1eb)](_0x5644a8=>{const _0xb563a0=_0xaf7f45;!allSymbols[_0xb563a0(0x150)](_0x5644a8)?logHistory('error',_0xb563a0(0x1bc)+_0x5644a8+_0xb563a0(0x2e9)):_0x1f988d[_0xb563a0(0x18d)](_0x5644a8);}),_0x1f988d;}async function initclient(){const _0x522e64=_0x2500ad;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x522e64(0x1a9),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x522e64(0x205),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5bc966=getNormalizedPerformance();emitPerformance(_0x5bc966),getStartingBalances(_0x5bc966);}async function toggleBotMode(){const _0x232572=_0x2500ad;let _0x156bf9=dbConfig[_0x232572(0x2c5)](_0x232572(0x1b6))['find']({'botID':botID})[_0x232572(0x257)]();if(_0x156bf9){const _0x274289=!_0x156bf9[_0x232572(0x1ad)];dbConfig['get'](_0x232572(0x1b6))[_0x232572(0x23b)]({'botID':botID})['assign']({'headless':_0x274289})[_0x232572(0x2d4)](),config[_0x232572(0x1ad)]=_0x274289,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x14a865=_0x2500ad;process[_0x14a865(0x212)]({'updatebotmanager':!![]},_0xcd19a8=>{}),logger[_0x14a865(0x1e5)](_0x14a865(0x2c9)+config[_0x14a865(0x1ad)]);}async function loadCoins(_0x2f32cf){const _0x523852=_0x2500ad;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x596893,_0x15b473=0x0,_0x1effe3=0x0;_0x2f32cf['forEach'](_0x45a724=>{const _0x10bdb7=_0x22fe;loading['remainingSymbols'][_0x10bdb7(0x18d)](_0x45a724);}),loadingCanceled=![];let _0x5bf6e7=![];while(_0x596893!=_0x2f32cf[_0x523852(0x1cd)]+maxLoadingProgress){_0x596893=loadingProgress,_0x2f32cf[_0x523852(0x1eb)](_0x16fa54=>{const _0x97b982=_0x523852;if(gTicker[noslash(_0x16fa54)]){loading[_0x97b982(0x27e)]=loading[_0x97b982(0x27e)]['filter'](_0x24ea84=>_0x24ea84!=_0x16fa54);if(!watchedSymbols[_0x97b982(0x150)](_0x16fa54))watchedSymbols['push'](_0x16fa54);_0x596893++;}}),loading[_0x523852(0x189)]=Math['round'](_0x596893/(_0x2f32cf['length']+maxLoadingProgress)*0x64);loading[_0x523852(0x189)]!=0x64&&(_0x1effe3>0x1e*0x5&&(loading[_0x523852(0x21b)]=!![],emitLoadingProgress()),_0x1effe3>0x78*0x5&&!_0x5bf6e7&&(_0x5bf6e7=!![],logHistory(_0x523852(0x1a4),_0x523852(0x159)+loading[_0x523852(0x27e)][_0x523852(0x2ce)](',\x20')+_0x523852(0x2bf)),logHistory('error',_0x523852(0x175)+loadCoinsRetryInterval/0xea60+_0x523852(0x1f8)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x523852(0x194)]=!![],emitLoadingProgress();break;}else _0x15b473!=loading[_0x523852(0x189)]&&(_0x15b473=loading[_0x523852(0x189)],emitLoadingProgress()),_0x1effe3++,await sleep(0xc8);}_0x596893==_0x2f32cf[_0x523852(0x1cd)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x523852(0x212)]({'status':'enabled','live':_0x523852(0x2cb)},_0x24793b=>{}),_0x5bf6e7&&logHistory(_0x523852(0x29c),_0x523852(0x28d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x319735=_0x2500ad;proxyEmit(_0x319735(0x236),{...emittedConfiguration(),'configstate':_0x319735(0x169)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x23e5e9=_0x2500ad;let _0x4dfdfe=gTicker[stablecoins[_0x23e5e9(0x200)][_0x23e5e9(0x2ff)]],_0x4f7c02=gTicker[stablecoins[_0x23e5e9(0x1a8)][_0x23e5e9(0x2ff)]];return{'eur':Number(_0x4dfdfe),'usd':Number(_0x4f7c02)};}function capitalize(_0x58a0c4){const _0x471c16=_0x2500ad;return _0x58a0c4[_0x471c16(0x2d3)](0x0,0x1)['toUpperCase']()+_0x58a0c4[_0x471c16(0x2d3)](0x1);}function supportedExchanges(){const _0x216465=_0x2500ad,_0x3bd859=['ws',_0x216465(0x146),_0x216465(0x1e4),_0x216465(0x262),_0x216465(0x254),_0x216465(0x1bf),'createOrder',_0x216465(0x2b2),_0x216465(0x2e3)];let _0x471760=[],_0x1cc69c=[],_0x213c69=ccxt[_0x216465(0x28b)][_0x216465(0x1a9)];_0x213c69[_0x216465(0x1eb)](_0x238c4e=>{const _0x1ce1d2=_0x216465;try{const _0x5ebb60=new ccxt[(_0x1ce1d2(0x28b))][_0x238c4e]();_0x1cc69c[_0x1ce1d2(0x18d)](_0x5ebb60);}catch(_0x106f60){}}),_0x1cc69c[_0x216465(0x1eb)](_0x320ff7=>{const _0x4024e0=_0x216465;let _0x6a8dd3=0x0;_0x3bd859[_0x4024e0(0x1eb)](_0x17c786=>{const _0x43d0d3=_0x4024e0;_0x17c786 in _0x320ff7[_0x43d0d3(0x25c)]&&_0x320ff7['has'][_0x17c786]&&_0x6a8dd3++;}),_0x6a8dd3==_0x3bd859[_0x4024e0(0x1cd)]&&_0x471760[_0x4024e0(0x18d)](capitalize(_0x320ff7['id']));});let _0x228e31=[];return _0x213c69['forEach'](_0x553e4c=>{const _0x29dd57=_0x216465;_0x553e4c=capitalize(_0x553e4c);if(!_0x471760[_0x29dd57(0x150)](_0x553e4c))_0x228e31[_0x29dd57(0x18d)](_0x553e4c);}),_0x471760;}function setStartDatePerformance(){const _0x309708=_0x2500ad;if(config&&config['liquidity'][0x0][_0x309708(0x287)][_0x309708(0x1cd)]!=0x0){const _0x2d4b87=config[_0x309708(0x235)][0x0]['changes'];dbPerformance['get'](_0x309708(0x15e))['find']({'date':config['startdate']})['assign']({'coins':_0x2d4b87})[_0x309708(0x2d4)]();}}async function recreateCoinResults(){const _0x1e56b3=_0x2500ad;recreationNeeded=![];let _0x3f346e,_0x31a6a4=[];try{for(const _0x551e88 of currentCoins){if(_0x551e88[_0x1e56b3(0x2ff)]!=config[_0x1e56b3(0x29d)]){let _0x3ef9cb=0x0,_0x59fe8d,_0xf3c731;_0x3f346e=await getAllEventOrders(_0x551e88['symbol']);if(_0x3f346e['length']>0x0)_0x3f346e['forEach'](_0x39f668=>{const _0x1156ac=_0x1e56b3,_0x1d30ce=_0x551e88[_0x1156ac(0x167)]['includes'](config[_0x1156ac(0x29d)]+'/');_0x31a6a4[_0x1156ac(0x18d)]({'datetime':_0x39f668[_0x1156ac(0x158)],'coin':_0x551e88['coin'],'symbol':_0x551e88[_0x1156ac(0x167)],'side':_0x39f668[_0x1156ac(0x269)],'reverse':_0x1d30ce,'amount':formatResult(_0x39f668[_0x1156ac(0x1be)],0x8),'filled':formatResult(_0x39f668['filled'],0x8),'price':formatResult(_0x39f668['price'],0x8)}),_0x3ef9cb=_0x39f668[_0x1156ac(0x269)]==_0x1156ac(0x2c7)?_0x3ef9cb+_0x39f668['filled']:_0x3ef9cb-_0x39f668[_0x1156ac(0x1be)];if(!_0xf3c731)_0xf3c731=_0x39f668[_0x1156ac(0x267)];});_0x59fe8d=_0x551e88[_0x1e56b3(0x2dc)]-_0x3ef9cb;let _0x27d39c;config[_0x1e56b3(0x235)]['forEach'](_0x5ba7e9=>{const _0x2daa6a=_0x1e56b3;!_0x27d39c&&(_0x27d39c=_0x5ba7e9[_0x2daa6a(0x287)][_0x2daa6a(0x23b)](_0x54c03f=>_0x54c03f['coin']==_0x551e88[_0x2daa6a(0x2ff)]),_0x27d39c&&(_0x59fe8d=_0x27d39c[_0x2daa6a(0x2dc)],_0xf3c731=_0x27d39c[_0x2daa6a(0x267)]));});let _0x1fb159=dbCoinResults[_0x1e56b3(0x2c5)](_0x1e56b3(0x1a1))[_0x1e56b3(0x23b)]({'coin':_0x551e88[_0x1e56b3(0x2ff)]})['value']();_0x1fb159={'coin':_0x551e88[_0x1e56b3(0x2ff)],'number':_0x59fe8d,'breakeven':_0xf3c731,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1e56b3(0x2c5)](_0x1e56b3(0x1a1))[_0x1e56b3(0x23b)]({'coin':_0x551e88[_0x1e56b3(0x2ff)]})[_0x1e56b3(0x1c5)](_0x1fb159)['write']();}}_0x31a6a4['sort']((_0x3edf78,_0x562cb3)=>_0x3edf78[_0x1e56b3(0x158)]>_0x562cb3[_0x1e56b3(0x158)]?0x1:_0x562cb3['datetime']>_0x3edf78[_0x1e56b3(0x158)]?-0x1:0x0);let _0x1569eb=0x0;for(let _0x5d488c of _0x31a6a4){await updateCoinResults(_0x5d488c,!![]);}}catch(_0x2a6001){await handleError(_0x2a6001,_0x1e56b3(0x239));}}async function getAllEventOrders(_0x4ed718){const _0x5bfc05=_0x2500ad;let _0x517d5d=[],_0x1654b7=dbLogs[_0x5bfc05(0x2c5)](_0x5bfc05(0x2af))[_0x5bfc05(0x2ee)](_0x1a99a7=>{const _0x17292c=_0x5bfc05,_0x4de512=_0x1a99a7[_0x17292c(0x143)][_0x17292c(0x21f)]();return _0x4de512[_0x17292c(0x150)](_0x4ed718[_0x17292c(0x21f)]())&&(_0x4de512[_0x17292c(0x150)]('market')&&_0x4de512[_0x17292c(0x150)]('order')||_0x4de512['includes'](_0x17292c(0x1be))&&_0x4de512[_0x17292c(0x150)]('order'));})[_0x5bfc05(0x299)](_0x5bfc05(0x1f2))[_0x5bfc05(0x257)]();return _0x1654b7[_0x5bfc05(0x1eb)](_0x39cbef=>{const _0x589d58=_0x5bfc05,_0x2f677b=_0x39cbef[_0x589d58(0x143)][_0x589d58(0x150)](_0x589d58(0x22b))?_0x589d58(0x22b):_0x589d58(0x2c7),_0x46ecc5=/#([0-9]|\.)+\s/i,_0x118853=Number(_0x46ecc5['exec'](_0x39cbef[_0x589d58(0x143)])[0x0][_0x589d58(0x2a4)](0x1)),_0x25c356=/@([0-9]|\.)+$/i,_0x50dc8c=Number(_0x25c356[_0x589d58(0x144)](_0x39cbef[_0x589d58(0x143)])[0x0][_0x589d58(0x2a4)](0x1));_0x517d5d[_0x589d58(0x18d)]({'datetime':_0x39cbef['time'],'coin':symbolToCoin(_0x4ed718),'symbol':_0x4ed718,'side':_0x2f677b,'amount':_0x118853,'filled':_0x118853,'price':_0x50dc8c});}),_0x517d5d;}async function validate24hChanges(){const _0x5bd6fe=_0x2500ad;for(const _0xb3bf46 of currentCoins){if(_0xb3bf46[_0x5bd6fe(0x2ff)]!=config[_0x5bd6fe(0x29d)]){let _0x4ee909;_0xb3bf46[_0x5bd6fe(0x23c)]?_0x4ee909=formatResult((0x1/(gChange[_0xb3bf46[_0x5bd6fe(0x167)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4ee909=gChange[_0xb3bf46['symbol']],_0x4ee909<config[_0x5bd6fe(0x278)]&&(logHistory(_0x5bd6fe(0x1a4),_0xb3bf46[_0x5bd6fe(0x2ff)]+_0x5bd6fe(0x14b)+_0x4ee909+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x5bd6fe(0x1a4),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x41502e,_0x138cdb){const _0xdc3164=_0x2500ad;if(!_0x41502e)return!![];const _0x3ae4d1=_0x138cdb['split']('.'),_0x1f7689=_0x41502e[_0xdc3164(0x162)]('.');for(var _0x503777=0x0;_0x503777<_0x1f7689[_0xdc3164(0x1cd)];_0x503777++){const _0x104f7e=~~_0x1f7689[_0x503777],_0x2b5f2c=~~_0x3ae4d1[_0x503777];if(_0x104f7e<_0x2b5f2c)return!![];if(_0x104f7e>_0x2b5f2c)return![];}return![];}async function oneTimeMigration(){const _0x471f38=_0x2500ad;let _0x18f701=dbLogs[_0x471f38(0x2c5)](_0x471f38(0x14a))[_0x471f38(0x257)]();if(isOlderVersion(_0x18f701,_0x471f38(0x215))){let _0xa0b6a=[];const _0x31aa34=dbLogs[_0x471f38(0x2c5)]('logs')[_0x471f38(0x257)]();_0x31aa34[_0x471f38(0x1eb)](_0x450667=>{const _0x373b64=_0x471f38;_0xa0b6a[_0x373b64(0x18d)]({'time':_0x450667[_0x373b64(0x1f2)],'type':_0x450667['type'],'event':_0x450667[_0x373b64(0x143)]});}),dbLogs[_0x471f38(0x2c5)](_0x471f38(0x2af))[_0x471f38(0x1c5)](_0xa0b6a)[_0x471f38(0x2d4)]();}let _0x58f590=dbConfig[_0x471f38(0x2c5)]('version')[_0x471f38(0x257)]();if(isOlderVersion(_0x58f590,_0x471f38(0x215))){let _0x90285a=dbConfig[_0x471f38(0x2c5)]('bot')[_0x471f38(0x23b)]({'botID':botID})[_0x471f38(0x257)]();if(_0x90285a){let _0x522de5=[];_0x90285a[_0x471f38(0x17b)][_0x471f38(0x1eb)](_0x167ca3=>{const _0x3104aa=_0x471f38;_0x522de5[_0x3104aa(0x18d)]({'coin':_0x167ca3['coin'],'number':_0x167ca3[_0x3104aa(0x2a5)],'price':_0x167ca3['startprice']}),delete _0x167ca3[_0x3104aa(0x2a5)],delete _0x167ca3[_0x3104aa(0x222)];});if(_0x522de5[_0x471f38(0x1cd)]!==0x0)fs[_0x471f38(0x2c3)](configbackuppath+(_0x471f38(0x19c)+botID+'.json'),JSON[_0x471f38(0x1ae)](_0x522de5,null,0x4),function(_0x78b872){if(_0x78b872){}});const _0x4d6425=(_0xbbd31a,_0x22dd1f)=>{const _0x17e76e=_0x471f38;let _0x385d7f=[];_0x22dd1f[_0x17e76e(0x1eb)](_0x1a75a7=>{const _0x1c5aa0=_0x17e76e,_0x2b4581=_0xbbd31a['find'](_0x41bb5d=>_0x41bb5d[_0x1c5aa0(0x2ff)]==_0x1a75a7[_0x1c5aa0(0x2ff)]);if(!_0x2b4581)_0x385d7f[_0x1c5aa0(0x18d)](_0x1a75a7);});let _0x45ba16=[];return _0xbbd31a[_0x17e76e(0x1eb)](_0x33dc16=>{const _0x2885fd=_0x17e76e,_0x1254fc=_0x22dd1f[_0x2885fd(0x23b)](_0x41a392=>_0x41a392[_0x2885fd(0x2ff)]==_0x33dc16[_0x2885fd(0x2ff)]);if(!_0x1254fc||_0x1254fc[_0x2885fd(0x2dc)]==0x0&&_0x33dc16[_0x2885fd(0x2dc)]!=0x0)_0x45ba16[_0x2885fd(0x18d)](_0x33dc16);}),{'missingDay1':_0x385d7f,'notInDay2':_0x45ba16};},_0x578b6d=dbPerformance[_0x471f38(0x2c5)](_0x471f38(0x15e))[_0x471f38(0x242)]()[_0x471f38(0x257)]();if(_0x578b6d[_0x471f38(0x1cd)]>0x1){const {missingDay1:_0xcde3ed,notInDay2:_0x2a8793}=_0x4d6425(_0x522de5,_0x578b6d[0x1][_0x471f38(0x1a1)]);_0x522de5=[..._0x522de5,..._0xcde3ed],_0x2a8793[_0x471f38(0x1eb)](_0x128fa9=>{const _0x4bae7a=_0x471f38;let _0x472e37=_0x522de5[_0x4bae7a(0x1c9)](_0x1c00d3=>_0x1c00d3[_0x4bae7a(0x2ff)]==_0x128fa9[_0x4bae7a(0x2ff)]);_0x472e37!=-0x1&&_0x522de5[_0x4bae7a(0x24c)](_0x472e37,0x1);});}_0x522de5[_0x471f38(0x1d7)]((_0x241843,_0x23d9df)=>_0x241843[_0x471f38(0x2ff)]>_0x23d9df[_0x471f38(0x2ff)]?0x1:_0x23d9df['coin']>_0x241843[_0x471f38(0x2ff)]?-0x1:0x0);let _0x15cab2=[{'date':_0x90285a[_0x471f38(0x1e1)],'changes':_0x522de5}];_0x578b6d[_0x471f38(0x1cd)]>0x2&&_0x578b6d[_0x471f38(0x1eb)]((_0x502d45,_0x391027)=>{const _0x2914cb=_0x471f38;if(_0x391027>0x0&&_0x391027<_0x578b6d[_0x2914cb(0x1cd)]-0x1){const {missingDay1:_0x562f2e,notInDay2:_0x3be351}=_0x4d6425(_0x578b6d[_0x391027][_0x2914cb(0x1a1)],_0x578b6d[_0x391027+0x1][_0x2914cb(0x1a1)]);_0x522de5=[],(_0x562f2e[_0x2914cb(0x1cd)]!=0x0||_0x3be351[_0x2914cb(0x1cd)]!=0x0)&&(_0x562f2e[_0x2914cb(0x1cd)]!=0x0&&_0x522de5[_0x2914cb(0x18d)](..._0x562f2e),_0x3be351[_0x2914cb(0x1cd)]!=0x0&&(_0x3be351[_0x2914cb(0x1eb)](_0x24ad5d=>{const _0x2a4141=_0x2914cb;_0x24ad5d[_0x2a4141(0x2dc)]=-_0x24ad5d[_0x2a4141(0x2dc)];}),_0x522de5[_0x2914cb(0x18d)](..._0x3be351)),_0x522de5[_0x2914cb(0x1d7)]((_0x2ffe46,_0x5785bd)=>_0x2ffe46['coin']>_0x5785bd[_0x2914cb(0x2ff)]?0x1:_0x5785bd[_0x2914cb(0x2ff)]>_0x2ffe46['coin']?-0x1:0x0),_0x15cab2[_0x2914cb(0x18d)]({'date':_0x578b6d[_0x391027+0x1][_0x2914cb(0x2f8)],'changes':_0x522de5}));}}),dbConfig[_0x471f38(0x2c5)](_0x471f38(0x1b6))[_0x471f38(0x23b)]({'botID':botID})[_0x471f38(0x1c5)]({..._0x90285a,'liquidity':_0x15cab2})[_0x471f38(0x2d4)]();}}if(isOlderVersion(_0x58f590,_0x471f38(0x16d))){let _0x3113fb=dbConfig[_0x471f38(0x2c5)]('bot')[_0x471f38(0x23b)]({'botID':botID})['value']();if(_0x3113fb){const _0x22b2f0=_0x3113fb[_0x471f38(0x174)],_0x507b47=_0x22b2f0?capitalize(_0x22b2f0):_0x471f38(0x228);dbConfig['get'](_0x471f38(0x1b6))['find']({'botID':botID})[_0x471f38(0x1c5)]({'exchange':_0x507b47})[_0x471f38(0x2d4)]();}}if(isOlderVersion(_0x58f590,'2.6.22')){let _0x14b351=dbConfig['get']('bot')['find']({'botID':botID})[_0x471f38(0x257)]();if(_0x14b351){const _0x156d8f=_0x14b351[_0x471f38(0x2ac)],_0x26fe0b=_0x156d8f?_0x471f38(0x24e):![];dbConfig[_0x471f38(0x2c5)]('bot')['find']({'botID':botID})[_0x471f38(0x1c5)]({'marketcapEnabled':_0x26fe0b})[_0x471f38(0x2d4)]();}}if(isOlderVersion(_0x58f590,_0x471f38(0x179))){let _0x2ca30b=dbConfig['get'](_0x471f38(0x1b6))['find']({'botID':botID})[_0x471f38(0x257)]();if(_0x2ca30b){const _0x9748ad=_0x2ca30b[_0x471f38(0x249)],_0x127b34=_0x9748ad?_0x471f38(0x142):![];dbConfig[_0x471f38(0x2c5)](_0x471f38(0x1b6))[_0x471f38(0x23b)]({'botID':botID})[_0x471f38(0x1c5)]({'autoliquidity':_0x127b34})['write']();}}let _0x39cdb3=dbPerformance['get'](_0x471f38(0x14a))[_0x471f38(0x257)]();isOlderVersion(_0x39cdb3,'2.3.5')&&setStartDatePerformance();let _0x457aea=dbCoinResults[_0x471f38(0x2c5)](_0x471f38(0x14a))['value']();if(isOlderVersion(_0x457aea,_0x471f38(0x181))){let _0x68718b=dbCoinResults[_0x471f38(0x2c5)]('coins')[_0x471f38(0x257)]();if(_0x68718b[_0x471f38(0x1cd)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1881c3=_0x2500ad;dbConfig[_0x1881c3(0x26a)](_0x1881c3(0x14a),serverversion)[_0x1881c3(0x2d4)](),dbPerformance[_0x1881c3(0x26a)](_0x1881c3(0x14a),serverversion)[_0x1881c3(0x2d4)](),dbLogs[_0x1881c3(0x26a)](_0x1881c3(0x14a),serverversion)[_0x1881c3(0x2d4)](),dbCoinResults[_0x1881c3(0x26a)](_0x1881c3(0x14a),serverversion)['write']();}function getConfiguration(_0x3793ae){const _0x20f57b=_0x2500ad;let _0x34c102=dbConfig['get'](_0x20f57b(0x1b6))[_0x20f57b(0x23b)]({'botID':_0x3793ae})[_0x20f57b(0x257)]();if(_0x34c102){let _0x1a6df5=![];typeof _0x34c102[_0x20f57b(0x2cd)]==_0x20f57b(0x183)&&(_0x34c102={..._0x34c102,'threshold':Number(_0x34c102[_0x20f57b(0x2cd)])},_0x1a6df5=!![]),_0x34c102['change24h']==undefined&&(_0x34c102={..._0x34c102,'change24h':-0x14},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x1ff)]==undefined&&(_0x34c102={..._0x34c102,'fiat':_0x20f57b(0x1d0)},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x182)]==undefined&&(_0x34c102={..._0x34c102,'onepagemode':settings[_0x20f57b(0x182)]},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x226)]==undefined&&(_0x34c102={..._0x34c102,'colorscheme':_0x20f57b(0x1f4)},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x249)]==undefined&&(_0x34c102={..._0x34c102,'autoliquidity':'update-liquidity'},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x145)]==undefined&&(_0x34c102={..._0x34c102,'marketcapApi':settings[_0x20f57b(0x145)]?!![]:![]},_0x1a6df5=!![]),_0x34c102[_0x20f57b(0x2ac)]==undefined&&(_0x34c102={..._0x34c102,'marketcapEnabled':![]},_0x1a6df5=!![]),_0x1a6df5&&(_0x34c102={'botID':_0x34c102['botID'],'exchange':_0x34c102[_0x20f57b(0x174)],'apiKey':_0x34c102[_0x20f57b(0x2da)],'apiSecret':_0x34c102[_0x20f57b(0x156)],'apiPassword':_0x34c102[_0x20f57b(0x2fc)],'basecoin':_0x34c102[_0x20f57b(0x29d)],'botname':_0x34c102[_0x20f57b(0x2db)],'showname':_0x34c102[_0x20f57b(0x1a5)],'threshold':_0x34c102[_0x20f57b(0x2cd)],'ordertype':_0x34c102['ordertype'],'timeout':_0x34c102[_0x20f57b(0x21b)],'fiat':_0x34c102['fiat'],'startdate':_0x34c102[_0x20f57b(0x1e1)],'recreate':_0x34c102[_0x20f57b(0x264)],'timeshift':_0x34c102[_0x20f57b(0x1dc)],'onepagemode':_0x34c102[_0x20f57b(0x182)],'headless':_0x34c102[_0x20f57b(0x1ad)],'cooldown':_0x34c102['cooldown'],'change24h':_0x34c102[_0x20f57b(0x278)],'emojibuy':_0x34c102['emojibuy'],'emojisell':_0x34c102['emojisell'],'colorscheme':_0x34c102[_0x20f57b(0x226)],'marketcapApi':_0x34c102[_0x20f57b(0x145)],'marketcapEnabled':_0x34c102[_0x20f57b(0x2ac)],'portfolio':_0x34c102[_0x20f57b(0x17b)],'autoliquidity':_0x34c102[_0x20f57b(0x249)],'liquidity':_0x34c102[_0x20f57b(0x235)],'openOrders':_0x34c102['openOrders']},dbConfig[_0x20f57b(0x2c5)](_0x20f57b(0x1b6))['remove']()['write'](),dbConfig['get'](_0x20f57b(0x1b6))['push'](_0x34c102)[_0x20f57b(0x2d4)]());}else _0x34c102={'botID':_0x3793ae,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3793ae,'showname':![],'threshold':0x3,'ordertype':_0x20f57b(0x272),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x20f57b(0x1dc)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x20f57b(0x1f4),'marketcapApi':settings[_0x20f57b(0x145)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x20f57b(0x142),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x34c102;}function emittedConfiguration(){const _0x448a98=_0x2500ad;let _0x36f395;if(config[_0x448a98(0x2da)]=='')_0x36f395={...config,'configstate':'initial'};else config[_0x448a98(0x2da)]==_0x448a98(0x26e)?_0x36f395={...config,'configstate':_0x448a98(0x286)}:(_0x36f395={...config,'apiKey':_0x448a98(0x2f9),'apiSecret':_0x448a98(0x2f9)},config[_0x448a98(0x2fc)]&&(_0x36f395[_0x448a98(0x2fc)]=_0x448a98(0x2f9)));return _0x36f395['enableFiatToggle']=enableFiatToggle,_0x36f395;}function getSettings(){const _0x465c15=_0x2500ad;return dbSettings[_0x465c15(0x2c5)]('settings')[_0x465c15(0x257)]();}function getSecure(){const _0x3e3cc6=_0x2500ad;return dbSecure[_0x3e3cc6(0x2c5)](_0x3e3cc6(0x1b2))[_0x3e3cc6(0x257)]()||{};}function updateTimeshift(_0x194af4){const _0x353148=_0x2500ad;let _0x1f1e6b=dbConfig['get'](_0x353148(0x1b6))[_0x353148(0x23b)]({'botID':botID})[_0x353148(0x257)]();_0x1f1e6b&&dbConfig[_0x353148(0x2c5)]('bot')[_0x353148(0x23b)]({'botID':botID})['assign']({'timeshift':_0x194af4})[_0x353148(0x2d4)](),config[_0x353148(0x1dc)]=_0x194af4,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x4cc0c1){const _0x1b9549=_0x2500ad;let _0x54c429=dbConfig[_0x1b9549(0x2c5)](_0x1b9549(0x1b6))[_0x1b9549(0x23b)]({'botID':botID})['value']();_0x54c429&&dbConfig[_0x1b9549(0x2c5)]('bot')[_0x1b9549(0x23b)]({'botID':botID})['assign']({'onepagemode':_0x4cc0c1})[_0x1b9549(0x2d4)](),config[_0x1b9549(0x182)]=_0x4cc0c1,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x80761d){const _0x219bac=_0x2500ad,_0x1bf858=_0x80761d?!![]:![];let _0x16b96a=dbConfig[_0x219bac(0x2c5)](_0x219bac(0x1b6))[_0x219bac(0x23b)]({'botID':botID})['value']();_0x16b96a&&dbConfig[_0x219bac(0x2c5)](_0x219bac(0x1b6))[_0x219bac(0x23b)]({'botID':botID})['assign']({'marketcapApi':_0x1bf858})['write'](),config[_0x219bac(0x145)]=_0x1bf858,getMarketCap(),proxyEmit(_0x219bac(0x236),emittedConfiguration());}async function storeConfiguration(_0x145386){const _0x186159=_0x2500ad;logger['debug'](_0x186159(0x283));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5c102f=![],_0x452945=![],_0x97b792=[];_0x145386[_0x186159(0x17b)][_0x186159(0x1eb)](_0x3373b7=>{const _0x347807=_0x186159;if(!_0x3373b7[_0x347807(0x22c)]&&_0x3373b7[_0x347807(0x2ff)]!=_0x145386[_0x347807(0x29d)])_0x97b792['push'](_0x3373b7['symbol']);}),_0x97b792[_0x186159(0x1eb)](_0x1038f7=>{const _0x26e329=_0x186159,_0x26fb17=currentCoins[_0x26e329(0x23b)](_0x1d67d8=>_0x1d67d8[_0x26e329(0x167)]==_0x1038f7);!_0x26fb17&&(_0x5c102f=!![]);}),currentCoins[_0x186159(0x1eb)](_0x2a40a7=>{const _0x246cb2=_0x186159;if(_0x2a40a7['coin']!=config[_0x246cb2(0x29d)]){const _0x2669c3=_0x97b792[_0x246cb2(0x23b)](_0x5d6bd5=>_0x5d6bd5==_0x2a40a7[_0x246cb2(0x167)]);!_0x2669c3&&(_0x5c102f=!![]);}}),_0x145386[_0x186159(0x17b)][_0x186159(0x1eb)](_0x1c2fc7=>{const _0x2c077d=_0x186159,_0xc5ee93=config[_0x2c077d(0x17b)]['find'](_0x45b210=>_0x45b210['coin']==_0x1c2fc7[_0x2c077d(0x2ff)]);if(_0xc5ee93&&_0x1c2fc7[_0x2c077d(0x233)]!=_0xc5ee93['offset'])_0x452945=!![];});let _0x1904f0=dbConfig[_0x186159(0x2c5)](_0x186159(0x1b6))[_0x186159(0x23b)]({'botID':botID})['value']();_0x145386={..._0x145386,'apiKey':decryptRSA(secure[_0x186159(0x190)],_0x145386['apiKey']),'apiSecret':decryptRSA(secure[_0x186159(0x190)],_0x145386[_0x186159(0x156)])};_0x145386['apiPassword']&&(_0x145386[_0x186159(0x2fc)]=decryptRSA(secure[_0x186159(0x190)],_0x145386['apiPassword']));let _0x1b510c=![];if(_0x1904f0){_0x145386[_0x186159(0x2da)]==_0x186159(0x2f9)?_0x145386[_0x186159(0x2da)]=config[_0x186159(0x2da)]:_0x1b510c=!![];_0x145386[_0x186159(0x156)]==_0x186159(0x2f9)?_0x145386[_0x186159(0x156)]=config['apiSecret']:_0x1b510c=!![];if(_0x145386[_0x186159(0x2fc)]==_0x186159(0x2f9))_0x145386[_0x186159(0x2fc)]=config[_0x186159(0x2fc)];else{if(_0x145386[_0x186159(0x2fc)])_0x1b510c=!![];}dbConfig['get'](_0x186159(0x1b6))[_0x186159(0x23b)]({'botID':botID})[_0x186159(0x1c5)](_0x145386)[_0x186159(0x2d4)]();}else dbConfig[_0x186159(0x2c5)](_0x186159(0x1b6))[_0x186159(0x18d)](_0x145386)[_0x186159(0x2d4)](),_0x1b510c=!![],process[_0x186159(0x212)]({'status':_0x186159(0x232),'live':'running'},_0x259a0a=>{});process['send']({'botname':_0x145386[_0x186159(0x2db)]},_0xe9a90d=>{}),config={..._0x145386},updateBotManager(),proxyEmit(_0x186159(0x166)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1b510c)!_0x1904f0?await reset(!![]):getBalances();else _0x5c102f||_0x452945?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x392763){const _0x3248ab=_0x2500ad,_0x144793={...config,'headless':_0x392763['headless']};let _0x58b57e=dbConfig[_0x3248ab(0x2c5)](_0x3248ab(0x1b6))[_0x3248ab(0x23b)]({'botID':botID})[_0x3248ab(0x257)]();_0x58b57e&&dbConfig[_0x3248ab(0x2c5)](_0x3248ab(0x1b6))[_0x3248ab(0x23b)]({'botID':botID})['assign'](_0x144793)['write'](),config={..._0x144793},updateBotManager(),proxyEmit(_0x3248ab(0x236),emittedConfiguration());}async function storeFiat(_0x5b628e){const _0x6221ab=_0x2500ad,_0x31eae9={...config,'fiat':_0x5b628e};let _0x50bad1=dbConfig[_0x6221ab(0x2c5)](_0x6221ab(0x1b6))[_0x6221ab(0x23b)]({'botID':botID})[_0x6221ab(0x257)]();_0x50bad1&&dbConfig[_0x6221ab(0x2c5)](_0x6221ab(0x1b6))['find']({'botID':botID})[_0x6221ab(0x1c5)](_0x31eae9)[_0x6221ab(0x2d4)](),config={..._0x31eae9},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x178cef=_0x2500ad;logger[_0x178cef(0x289)](_0x178cef(0x1c7));try{if(fs[_0x178cef(0x1dd)](path[_0x178cef(0x2ce)](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x2d9))))fs[_0x178cef(0x2ab)](path[_0x178cef(0x2ce)](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x2d9)));if(fs['existsSync'](path[_0x178cef(0x2ce)](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x18e))))fs[_0x178cef(0x2ab)](path['join'](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x18e)));if(fs[_0x178cef(0x1dd)](path[_0x178cef(0x2ce)](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x22f))))fs[_0x178cef(0x2ab)](path['join'](configpath,_0x178cef(0x1a0)+botID+_0x178cef(0x22f)));}catch(_0x4233ae){if(_0x4233ae)logger[_0x178cef(0x289)](_0x178cef(0x1ea),_0x4233ae);}const _0x990724=getDate();let _0x11c272=[];currentCoins[_0x178cef(0x1eb)](_0x27e6df=>{const _0x20719c=_0x178cef;_0x11c272[_0x20719c(0x18d)]({'coin':_0x27e6df[_0x20719c(0x2ff)],'number':_0x27e6df['number'],'price':_0x27e6df[_0x20719c(0x184)]});});let _0x594b2c=dbConfig['get']('bot')[_0x178cef(0x23b)]({'botID':botID})[_0x178cef(0x257)]();_0x594b2c&&(dbConfig[_0x178cef(0x2c5)](_0x178cef(0x1b6))['find']({'botID':botID})[_0x178cef(0x1c5)]({'liquidity':[{'date':_0x990724,'changes':_0x11c272}]})[_0x178cef(0x2d4)](),config[_0x178cef(0x235)]=[]),restartBot(!![]);}function noslash(_0x21a447){const _0x3c6567=_0x2500ad;return _0x21a447[_0x3c6567(0x300)]('/','');}function _0x4910(){const _0x139f06=['function','emojibuy','startsWith','change24h','Order(s)\x20not\x20validated\x20after\x20','currency','51079hUaAiR','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Portfolio\x20change\x20detected:\x20','remainingSymbols','open','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Initiating\x20bot\x20restart','portfolio1','Saving\x20configuration','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getSeconds','recovery','changes','Initializing\x20coin\x20results','full','Huobipro','pro','ExchangeNotAvailable','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started',')\x20known\x20order:\x20','max','getPortfolio','Error\x20details:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','removed','active','/EUR','Order\x20amount\x20is\x20invalid:\x20','NetworkError','\x20attempts','sortBy','format','\x20|\x20','success','basecoin','sendMetricsTelegram','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','UNLOCKING','Limit\x20(high-margin)','toString','no\x20exchange\x20reloaded','slice','startnumber','quote','UNLOCKED','Limit\x20(low-margin)','padEnd','recent20','unlinkSync','marketcapEnabled','\x20exchange\x20error:\x20','2\x20-\x20Validate\x20orders:\x20','logs','add','620hnQlkk','fetchOpenOrders','3645063ybUIlI','Valid\x20balance\x20for\x20','Symbol(s):\x20','timestamp','\x20minutes','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Invalid\x20quantity','/backup/','32qhmVyI','sha256','\x20|\x20highest\x20fee:\x20','watchTradesForSymbols','\x20-\x20bot\x20not\x20started','parse','initial','ETH','writeFile','staging','get','freeze','buy','./config/','Headless:\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','running','search','threshold','join','BUSD','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','USDC','Bitget','substring','write','1\x20-\x20Validate\x20orders:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','Cex','create','-events.json','apiKey','botname','number','Resetting\x20coin\x20results:\x20','argv',':\x20Bot\x20','<pre>',',\x20must\x20be\x20a\x203\x20digit\x20number','resetHistory','fetchBalance','Unfilled\x20order(s)\x20canceled\x20after\x20','highest','Unknown\x20error:\x20','decode64','./version.json','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','sells','delta','production','createWriteStream','filter','bots','total','no\x20open\x20orders','\x20orders\x20in\x20less\x20than\x20','\x20>\x20details:','constructor','4304150Xuzgcl','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','BNB/','date','************','memoryUsage','bid','apiPassword','getMonth','watchTrades()','coin','replace','Net\x20effect','market_cap','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','emojisell','update-liquidity','event','exec','marketcapApi','fetchTickers','amount','<b>','\x20|\x20Custom\x20ID:\x20','version','\x20has\x20a\x2024h\x20drop\x20of\x20','valid','getOpenOrders()','</pre>','\x20API\x20secret\x20is\x20invalid','includes','target','\x20hour','getMinutes',')\x20|\x20exchange:\x20','Resuming\x20(','apiSecret','Exchange\x20error\x20details:','datetime','Failed\x20to\x20load\x20coin\x20data\x20for\x20','bb-settings.json','fee','Network\x20error\x20details:','leftTxt','data','openOrders','RETRY\x20-\x20Error\x20in\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','split','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','PermissionDenied','BNB','configuration-stored','symbol','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','loading-canceled','test','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','-------------------------------\x0a','2.6.0','Error:\x20Invalid\x20argument\x20','customId','util','USDT','limits','mkdirSync','exchange','Pausing\x20for\x20','buys','cooldown','status','2.6.23','145aTxktI','portfolio','date-fns','message','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','order','EUR','2.5.0','onepagemode','string','last','No\x20more\x20open\x20orders\x20-\x20','RSA-OAEP','pop','Reset\x20|\x20','progress','limit','args','average','push','-performance.json','Exception\x20thrown\x20in\x20','privateKey','basecoinvalue','performance','padStart','cancel','type','\x20metrics:</b>\x20\x0a\x0a','entries','AuthenticationError','apply','\x20/\x20','Loading\x20completed','starting-balance-','fetchBalance()','yyyy/MM/dd','Order\x20filled:\x20','bot-','coins','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1\x20-\x20partially\x20FILLED\x20(','error','showname','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','differenceInSeconds','usd','exchanges','OnMaintenance','Exchange','\x20-\x20','headless','stringify','loadMarkets','canceled','Net\x20','secure','abs','marketcapsqrt','breakeven','bot','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20:\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','trade','Invalid\x20symbol:\x20','amountToPrecision','filled','cancelOrder','cancelLoading','\x20network\x20error:\x20','lowdb/adapters/FileSync','Block\x20transaction\x20detection:\x20','166008TMqzgQ','assign','orderstatus','Resetting\x20bot\x20history','warning','findIndex','change','round','fromCodePoint','length','\x20>\x20[DEBUG]\x20','detectLiquidityChange()','USD','final','decrypt','\x20portfolio:</b>\x20\x0a\x0a','ordertype','/USDT','getHours','sort','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','pki','orderId','status\x20code\x20401','timeshift','existsSync','yargs/yargs','\x20exchange','getDate','startdate','\x20order:\x20','storeHeadless','fetchTicker','debug','deleteHistoryAlerts','getCoinNumber()','<b>Bot\x20','spot','Error\x20while\x20deleting\x20files:\x20','forEach','\x20MB','toFixed','page','sqrt','privateKeyFromPem','defaults','time','code','red_yellow_blue','limit-high','placeOrder()','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','keys','balancing\x20resumes\x20when\x20cooldown\x20ends','quick','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','indexOf','fiat','eur','remove','ExchangeError','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','watchOrders()','balances','getTime','2209515DBTOpW','fees','isEqual','createOrder','watchTradesForSymbols()','/output-000.log','initclient','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Error\x20details:','path','min','send','\x20|\x20lock\x20orders:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','2.3.5','process\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Trigger:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20minutes\x20-\x20','timeout','Waited\x20','slider','Unknown\x20error\x20-\x20check\x20logs','toLowerCase','cost','001','startprice','storeFiat','rightTxt','Executed\x20','colorscheme','uncaughtException','Binance','map','Bybit','sell','excluded','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','complete','-results.json','getStartingBalances','none','enabled','offset','percentage','liquidity','configuration','ongoing','prevnumber','recreateCoinResults()','TUSD','find','reverse','request-time','password','cancelOrders()','token\x20is\x20expired','Avoiding\x20continuous\x20order\x20attempts','cloneDeep','InvalidNonce','log','Insufficient\x20funds\x20to\x20execute\x20order:\x20','(see:\x20hodlerhacks.com/fix/1)','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','autoliquidity','distribution','\x20API\x20key\x20is\x20invalid','splice','switch-manual','marketcap','shift','LOCKED','Market','./logs/','BTC','watchOrders','heapUsed','API-key\x20format\x20invalid','value','7143cMZCeh','PAXG','USDP','floor','has','portfolio2','event-history','added','%\x20(','getFullYear','watchTrades','\x20change','recreate','Fee\x20discount\x20refund\x20detected:\x20','net-basecoin','price','10335144qtRnRx','side','set','net-fiat','emitHistory','RequestTimeout','***','exchange\x20reload','showConfig','Cooldown\x20ended\x20-\x20balancing\x20resumed','market','Initializing\x20exchange:\x20already\x20done','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)'];_0x4910=function(){return _0x139f06;};return _0x4910();}function updateHighestFee(_0x489206){const _0x32a819=_0x2500ad;if(_0x489206['reverse']){let _0x5483a9={'filled':_0x489206[_0x32a819(0x1be)]*_0x489206['price'],'amount':_0x489206[_0x32a819(0x1be)]*_0x489206[_0x32a819(0x267)],'side':_0x489206[_0x32a819(0x269)]=='sell'?_0x32a819(0x2c7):_0x32a819(0x22b),'price':0x1/_0x489206[_0x32a819(0x267)]};_0x489206={..._0x489206,..._0x5483a9};}const _0x1ba1cf=defaultFee*_0x489206[_0x32a819(0x1be)]*_0x489206['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x32a819(0x2aa)][_0x32a819(0x24f)](),lastFees[_0x32a819(0x2aa)][_0x32a819(0x18d)](_0x1ba1cf),lastFees[_0x32a819(0x2e5)]=Math[_0x32a819(0x28f)](...lastFees[_0x32a819(0x2aa)]);}async function updateNumberCoinsCcxt(_0x3b814c){const _0x331ebe=_0x2500ad;logger[_0x331ebe(0x1e5)]('0\x20-\x20EXECUTION:\x20'+_0x3b814c['symbol']+_0x331ebe(0x29b)+_0x3b814c[_0x331ebe(0x178)]+'\x20|\x20'+_0x3b814c['filled']+_0x331ebe(0x19a)+_0x3b814c[_0x331ebe(0x147)]+_0x331ebe(0x29b)+_0x3b814c['id']);let _0x1284f1=_0x3b814c[_0x331ebe(0x178)],_0x97aa07=![];currentCoins[_0x331ebe(0x1eb)](_0x46fc92=>{const _0x326c5b=_0x331ebe;_0x46fc92[_0x326c5b(0x167)]==_0x3b814c['symbol']&&(_0x97aa07=!![]);});if(!_0x97aa07)return;const _0x47b681=currentCoins[_0x331ebe(0x23b)](_0x32b704=>_0x32b704[_0x331ebe(0x167)]==_0x3b814c[_0x331ebe(0x167)]),_0x39a96e=_0x47b681['coin'],_0x5c7b74=_0x2465b9=>{const _0x5dcd7d=_0x331ebe,_0x37390d=currentCoins[_0x5dcd7d(0x23b)](_0x218607=>_0x218607['symbol']==_0x3b814c[_0x5dcd7d(0x167)]);if(_0x37390d)_0x37390d[_0x5dcd7d(0x1c6)]=_0x2465b9;};let _0x31ade4=![];for(const _0x146dbc of lastOrders){const _0x1b2c8d=0x64,_0x3a2cb0=0x1388;let _0x271ef9=0x0;while(!_0x146dbc[_0x331ebe(0x1da)]&&_0x271ef9*_0x1b2c8d<_0x3a2cb0){_0x271ef9++,await sleep(_0x1b2c8d);}if(_0x271ef9>0x0)logger[_0x331ebe(0x1e5)](_0x331ebe(0x21c)+_0x271ef9*_0x1b2c8d/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x146dbc['orderId']==_0x3b814c['id']&&(_0x31ade4=!![]);}if(_0x1284f1==_0x331ebe(0x27f)){_0x5c7b74(_0x331ebe(0x27f));if(_0x3b814c[_0x331ebe(0x1be)]>0x0&&_0x3b814c['filled']<_0x3b814c[_0x331ebe(0x147)]){if(_0x31ade4){setBlockTransactionDetection(!![]),logger[_0x331ebe(0x1e5)]('1\x20-\x20partially\x20FILLED\x20('+_0x3b814c['filled']+_0x331ebe(0x28e)+_0x3b814c['id']);const _0x2a1ef9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39a96e);[currentCoins,currentCoinsAll]=_0x2a1ef9,setBlockTransactionDetection(![]);}else logger['debug'](_0x331ebe(0x1a3)+_0x3b814c[_0x331ebe(0x1be)]+')\x20unknown\x20order:\x20'+_0x3b814c['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1284f1==_0x331ebe(0x1b0)){_0x5c7b74('canceled'),lastOrders=lastOrders[_0x331ebe(0x2ee)](_0x4a5ef9=>_0x4a5ef9[_0x331ebe(0x167)]!=_0x3b814c[_0x331ebe(0x167)]);const _0x2efea4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2efea4,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1284f1=='closed'){if(lastOrders)for(const _0x1c6097 of lastOrders){if(_0x1c6097[_0x331ebe(0x1da)]==_0x3b814c['id']){logger['debug']('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x3b814c['id']),_0x31ade4=!![];if(_0x1c6097['filled']==0x0){setBlockTransactionDetection(!![]),logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3b814c['id']);if(_0x3b814c['average'])_0x1c6097[_0x331ebe(0x267)]=_0x3b814c[_0x331ebe(0x18c)];else{if(_0x3b814c[_0x331ebe(0x267)])_0x1c6097[_0x331ebe(0x267)]=_0x3b814c[_0x331ebe(0x267)];else{}}_0x1c6097[_0x331ebe(0x1be)]=_0x3b814c[_0x331ebe(0x1be)],updateHighestFee(_0x1c6097);const _0x42e9c2=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39a96e);[currentCoins,currentCoinsAll]=_0x42e9c2,setBlockTransactionDetection(![]),await validateOrders(),_0x5c7b74(_0x331ebe(0x1be)),_0x1c6097[_0x331ebe(0x15b)]={'currency':_0x3b814c['fee']?_0x3b814c['fee'][_0x331ebe(0x27a)]:null,'cost':_0x3b814c[_0x331ebe(0x15b)]?_0x3b814c['fee'][_0x331ebe(0x220)]:0x0},await updateCoinResults(_0x1c6097);}}}!_0x31ade4&&(logger[_0x331ebe(0x1e5)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x3b814c['id']),_0x5c7b74('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xa36c76=JSON[_0x331ebe(0x2c0)](lastBalances['portfolio']);const _0x4a1a78=_0xa36c76[_0x331ebe(0x23b)](_0x15219c=>_0x15219c[_0x331ebe(0x167)]==_0x3b814c[_0x331ebe(0x167)]);if(_0x4a1a78){if(_0x1284f1==_0x331ebe(0x27f))_0x4a1a78[_0x331ebe(0x1c6)]=_0x4a1a78['orderstatus']=='filled'?_0x331ebe(0x1be):'open';else{if(_0x1284f1==_0x331ebe(0x1b0))_0x4a1a78['orderstatus']=_0x4a1a78[_0x331ebe(0x1c6)]==_0x331ebe(0x1be)?'filled':_0x331ebe(0x1b0);else _0x1284f1=='closed'&&(_0x4a1a78[_0x331ebe(0x1c6)]=_0x331ebe(0x1be));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xa36c76)},proxyEmit(_0x331ebe(0x205),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2bf9d9=_0x2500ad;await getOpenOrders();let _0x5664f6=![];currentCoins[_0x2bf9d9(0x1eb)](_0x40a767=>{const _0x38e199=_0x2bf9d9;_0x5664f6=allOpenOrders['find'](_0x557331=>_0x557331['symbol']==_0x40a767['symbol']),_0x40a767[_0x38e199(0x1c6)]=_0x5664f6?'open':'none';});}async function fetchBalance(_0x4e9c4d=!![]){const _0x558535=_0x2500ad;let _0x10aebf,_0x5a6190;try{return _0x10aebf=await exchange[_0x558535(0x2e3)](),_0x5a6190=_0x10aebf[_0x558535(0x2f0)],_0x5a6190;}catch(_0x4fb2dd){return!_0x4e9c4d?handleErrorNoStop(_0x4fb2dd,'fetchBalance()'):await handleError(_0x4fb2dd,_0x558535(0x19d)),![];}}async function getCoins(_0x11af7c=0x0,_0x38775f=!![],_0x39c05a=config['basecoin'],_0x18d9bf){const _0x1397a9=_0x2500ad;let _0x205588=[],_0x592ca2=[],_0x239795=[],_0x11a8c8;if(_0x11af7c)await sleep(_0x11af7c);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4c73da=![],_0x3ec43b=0x0,_0x21b50c,_0x2107fd;_0x18d9bf&&(_0x21b50c=currentCoins[_0x1397a9(0x23b)](_0x149882=>_0x149882[_0x1397a9(0x2ff)]==_0x18d9bf),_0x21b50c&&(_0x2107fd=_0x21b50c[_0x1397a9(0x238)],delete _0x21b50c[_0x1397a9(0x238)]));while(!_0x4c73da){_0x11a8c8=await fetchBalance(_0x38775f);if(_0x11a8c8){if(_0x18d9bf){if(_0x11a8c8[_0x18d9bf]!=_0x2107fd)logger[_0x1397a9(0x1e5)](_0x1397a9(0x2b4)+_0x18d9bf+':\x20'+_0x11a8c8[_0x18d9bf]+'\x20('+_0x2107fd+')'),_0x4c73da=!![];else{logger[_0x1397a9(0x1e5)]('Invalid\x20balance\x20for\x20'+_0x18d9bf+':\x20'+_0x11a8c8[_0x18d9bf]+'\x20('+_0x2107fd+')'),_0x3ec43b++;if(_0x3ec43b<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1397a9(0x1e5)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x3ec43b+_0x1397a9(0x298));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x3e6590,_0xed26d0]of Object[_0x1397a9(0x197)](_0x11a8c8)){_0x239795[_0x1397a9(0x18d)](_0x3e6590);}config[_0x1397a9(0x17b)]['forEach'](_0x3642d1=>{const _0x41f518=_0x1397a9;!_0x239795['includes'](_0x3642d1[_0x41f518(0x2ff)])&&(_0x11a8c8[_0x3642d1[_0x41f518(0x2ff)]]=0x0);});if(_0x39c05a=='')for(const [_0x459788,_0x110734]of Object['entries'](_0x11a8c8)){_0x110734!=0x0&&_0x205588['push']({'coin':_0x459788});}else for(const [_0x1b7aae,_0x4da46e]of Object[_0x1397a9(0x197)](_0x11a8c8)){const _0x58aa46=config['portfolio'][_0x1397a9(0x23b)](_0x4da24e=>_0x4da24e[_0x1397a9(0x2ff)]==_0x1b7aae),_0xda7024=_0x1b7aae+'/'+_0x39c05a,_0xc513fb=_0x39c05a+'/'+_0x1b7aae,_0x2ec328=currentCoins[_0x1397a9(0x23b)](_0x1c769a=>_0x1c769a[_0x1397a9(0x2ff)]==_0x1b7aae);if((_0x4da46e!=0x0||_0x58aa46)&&(allSymbols[_0x1397a9(0x150)](_0xda7024)||_0x1b7aae==_0x39c05a))_0x2ec328?_0x205588[_0x1397a9(0x18d)]({..._0x2ec328,'number':Math[_0x1397a9(0x28f)](_0x4da46e+(_0x58aa46&&_0x58aa46[_0x1397a9(0x233)]||0x0),0x0)}):_0x205588[_0x1397a9(0x18d)]({'coin':_0x1b7aae,'symbol':_0xda7024,'reverse':![],'number':Math[_0x1397a9(0x28f)](_0x4da46e+(_0x58aa46&&_0x58aa46['offset']||0x0),0x0),'orderstatus':_0x1397a9(0x231)});else{if((_0x4da46e!=0x0||_0x58aa46)&&allSymbols['includes'](_0xc513fb))_0x2ec328?_0x205588[_0x1397a9(0x18d)]({..._0x2ec328,'number':Math[_0x1397a9(0x28f)](_0x4da46e+(_0x58aa46&&_0x58aa46['offset']||0x0),0x0)}):_0x205588['push']({'coin':_0x1b7aae,'symbol':_0xc513fb,'reverse':!![],'number':Math[_0x1397a9(0x28f)](_0x4da46e+(_0x58aa46&&_0x58aa46[_0x1397a9(0x233)]||0x0),0x0),'orderstatus':'none'});else _0x58aa46&&_0x205588[_0x1397a9(0x18d)]({'coin':_0x58aa46[_0x1397a9(0x2ff)],'symbol':_0x58aa46['symbol'],'reverse':_0x58aa46[_0x1397a9(0x23c)],'number':0x0,'orderstatus':_0x1397a9(0x231)});}}return _0x205588[_0x1397a9(0x1d7)]((_0x370a26,_0x1b108f)=>_0x370a26[_0x1397a9(0x2eb)]<_0x1b108f[_0x1397a9(0x2eb)]?0x1:_0x1b108f['delta']<_0x370a26['delta']?-0x1:0x0),_0x592ca2=cloneDeep(_0x205588),_0x205588=_0x205588[_0x1397a9(0x2ee)](_0x3a41ad=>{const _0x4b1824=_0x1397a9,_0x5ce3c4=config[_0x4b1824(0x17b)]['find'](_0xfa7f9b=>_0xfa7f9b['coin']==_0x3a41ad[_0x4b1824(0x2ff)]);return _0x5ce3c4&&!_0x5ce3c4[_0x4b1824(0x22c)];}),[_0x205588,_0x592ca2];}async function getCoinNumber(_0x462e76){const _0xfd9e9a=_0x2500ad;let _0x3ae53b;try{const _0x447101=await exchange[_0xfd9e9a(0x2e3)]();_0x3ae53b=_0x447101[_0xfd9e9a(0x2f0)][_0x462e76];}catch(_0x21c229){await handleError(_0x21c229,_0xfd9e9a(0x1e7));}return _0x3ae53b;}async function getOpenOrders(){const _0x4bfa75=_0x2500ad;let _0x23fd3a;allOpenOrders=[];try{for(const _0x218edd of config['portfolio']){!_0x218edd[_0x4bfa75(0x22c)]&&_0x218edd['coin']!=config[_0x4bfa75(0x29d)]&&(_0x23fd3a=await exchange[_0x4bfa75(0x2b2)](_0x218edd[_0x4bfa75(0x167)]),_0x23fd3a[_0x4bfa75(0x1cd)]>0x0&&allOpenOrders['push'](_0x23fd3a[0x0]));}}catch(_0x48ef99){await handleError(_0x48ef99,_0x4bfa75(0x14d));}}async function handleOpenOrders(_0x45c3fa=0x0){const _0x1af41f=_0x2500ad;allOpenOrders[_0x1af41f(0x1cd)]==0x0&&lockOrders==ORDERS[_0x1af41f(0x250)]&&allOrdersPlaced&&(_0x45c3fa==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x45c3fa++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2d3690){const _0x1d53ee=_0x2500ad,_0x33804d=ccxt[_0x1d53ee(0x28b)][_0x2d3690[_0x1d53ee(0x174)][_0x1d53ee(0x21f)]()],_0xed7e62=new _0x33804d({'apiKey':_0x2d3690[_0x1d53ee(0x2da)],'secret':_0x2d3690[_0x1d53ee(0x156)],'options':{'defaultType':_0x1d53ee(0x1e9)}});if(_0x2d3690[_0x1d53ee(0x2fc)])_0xed7e62[_0x1d53ee(0x23e)]=_0x2d3690[_0x1d53ee(0x2fc)];try{await _0xed7e62[_0x1d53ee(0x2e3)]();}catch(_0x39efa8){logger[_0x1d53ee(0x1e5)]('Error\x20in\x20testAPI():\x20'+_0x39efa8[_0x1d53ee(0x2a2)]());throw _0x39efa8;}}function cloneDeep(_0x41a837){const _0x2b8bc7=_0x2500ad;return JSON[_0x2b8bc7(0x2c0)](JSON[_0x2b8bc7(0x1ae)](_0x41a837));}async function getPortfolio(_0x3a09ef){const _0x5c8db7=_0x2500ad;let _0x37bc32=[],_0x20bcae=[],_0x31ae57=[],_0x553754;_0x3a09ef[_0x5c8db7(0x2da)]=decryptRSA(secure[_0x5c8db7(0x190)],_0x3a09ef[_0x5c8db7(0x2da)]),_0x3a09ef[_0x5c8db7(0x156)]=decryptRSA(secure['privateKey'],_0x3a09ef[_0x5c8db7(0x156)]);if(_0x3a09ef['apiPassword'])_0x3a09ef[_0x5c8db7(0x2fc)]=decryptRSA(secure[_0x5c8db7(0x190)],_0x3a09ef[_0x5c8db7(0x2fc)]);if(_0x3a09ef[_0x5c8db7(0x2da)]!==_0x5c8db7(0x2f9)||_0x3a09ef['apiSecret']!==_0x5c8db7(0x2f9)||_0x3a09ef['apiPassword']&&_0x3a09ef[_0x5c8db7(0x2fc)]!==_0x5c8db7(0x2f9)){if(config[_0x5c8db7(0x174)]){if(_0x3a09ef[_0x5c8db7(0x2da)]=='************')_0x3a09ef['apiKey']=config['apiKey'];if(_0x3a09ef['apiSecret']=='************')_0x3a09ef[_0x5c8db7(0x156)]=config['apiSecret'];if(_0x3a09ef[_0x5c8db7(0x2fc)]==_0x5c8db7(0x2f9))_0x3a09ef[_0x5c8db7(0x2fc)]=config[_0x5c8db7(0x2fc)];}try{await testAPI(_0x3a09ef);}catch(_0x4710bc){if(_0x4710bc[_0x5c8db7(0x2a2)]()[_0x5c8db7(0x150)](_0x5c8db7(0x198))){logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x1a6)),logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x291)+_0x4710bc[_0x5c8db7(0x2a2)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x4710bc[_0x5c8db7(0x2a2)]()[_0x5c8db7(0x150)](_0x5c8db7(0x164))){logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x284)),logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x291)+_0x4710bc[_0x5c8db7(0x2a2)]()),proxyEmit(_0x5c8db7(0x282),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x4710bc[_0x5c8db7(0x2a2)]()),logger[_0x5c8db7(0x1e5)](_0x5c8db7(0x20f),_0x4710bc),proxyEmit(_0x5c8db7(0x282),![]);return;}}}exchange?updateExchange(_0x3a09ef[_0x5c8db7(0x2da)],_0x3a09ef[_0x5c8db7(0x156)],_0x3a09ef[_0x5c8db7(0x2fc)]):await initExchange(_0x3a09ef[_0x5c8db7(0x174)],_0x3a09ef['apiKey'],_0x3a09ef['apiSecret'],_0x3a09ef['apiPassword']);await loadSymbols();const _0xf92ae1=await getCoins(0x0,![],_0x3a09ef[_0x5c8db7(0x29d)]);_0x31ae57=cloneDeep(_0xf92ae1[0x1]);}else{const _0x1a7e06=await getCoins();_0x31ae57=cloneDeep(_0x1a7e06[0x1]);}if(_0x3a09ef[_0x5c8db7(0x29d)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x5c8db7(0x25d),_0x31ae57);else{_0x31ae57[_0x5c8db7(0x1eb)](_0xf29bcf=>{const _0xb7ac0d=_0x5c8db7;if(_0xf29bcf[_0xb7ac0d(0x2ff)]!=_0x3a09ef[_0xb7ac0d(0x29d)]&&allSymbols[_0xb7ac0d(0x150)](_0xf29bcf[_0xb7ac0d(0x167)]))_0x37bc32['push'](_0xf29bcf[_0xb7ac0d(0x167)]);});if(_0x37bc32[_0x5c8db7(0x1cd)]==0x0)logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x203));else{try{_0x20bcae=await getTickers(_0x37bc32);}catch(_0x48d6de){logHistory(_0x5c8db7(0x1a4),_0x5c8db7(0x21e)),logger[_0x5c8db7(0x1e5)](_0x5c8db7(0x20f),_0x48d6de),proxyEmit('portfolio1',![]);return;}_0x31ae57[_0x5c8db7(0x1eb)](_0x5c9fc9=>{const _0xa072b9=_0x5c8db7;_0x5c9fc9['coin']!=_0x3a09ef[_0xa072b9(0x29d)]?_0x20bcae[_0x5c9fc9[_0xa072b9(0x167)]]?_0x553754=_0x5c9fc9[_0xa072b9(0x23c)]?0x1/_0x20bcae[_0x5c9fc9[_0xa072b9(0x167)]][_0xa072b9(0x184)]:_0x20bcae[_0x5c9fc9[_0xa072b9(0x167)]][_0xa072b9(0x184)]:_0x553754=0x0:_0x553754=0x1,_0x5c9fc9['price']=formatResult(_0x553754,0x8);}),await getMarketCap(_0x31ae57),proxyEmit(_0x5c8db7(0x282),!![]),proxyEmit(_0x5c8db7(0x25d),_0x31ae57);}}}function truncateTradeAmount(_0x1a4f90,_0x24e202){const _0x47e8d7=_0x2500ad;let _0x570807=0x0;try{_0x570807=exchange[_0x47e8d7(0x1bd)](_0x1a4f90,_0x24e202);}catch(_0x4941c5){}return _0x570807;}function checkMinimums(_0x33e685){const _0x271aae=_0x2500ad;let _0x52a751=!![];const _0x3cb7e2=!_0x33e685[_0x271aae(0x23c)]?markets[_0x33e685[_0x271aae(0x167)]][_0x271aae(0x172)][_0x271aae(0x147)]['min']:markets[_0x33e685[_0x271aae(0x167)]][_0x271aae(0x172)][_0x271aae(0x220)]['min'],_0x3f40e2=!_0x33e685[_0x271aae(0x23c)]?markets[_0x33e685['symbol']][_0x271aae(0x172)][_0x271aae(0x220)]['min']:markets[_0x33e685[_0x271aae(0x167)]][_0x271aae(0x172)][_0x271aae(0x147)][_0x271aae(0x211)],_0x39b384=truncateTradeAmount(_0x33e685[_0x271aae(0x167)],_0x33e685[_0x271aae(0x1bb)]);_0x33e685[_0x271aae(0x1bb)]=_0x39b384;if(Math[_0x271aae(0x1b3)](_0x39b384)<_0x3cb7e2)_0x52a751=![];if(Math[_0x271aae(0x1b3)](_0x39b384)*_0x33e685['last']<_0x3f40e2)_0x52a751=![];if(_0x33e685[_0x271aae(0x269)]==_0x271aae(0x22b)){let _0x5904bd=config[_0x271aae(0x17b)]['find'](_0x281c1e=>_0x281c1e[_0x271aae(0x2ff)]==_0x33e685[_0x271aae(0x2ff)]);if(_0x5904bd['offset']>0x0){if(Math[_0x271aae(0x1b3)](_0x39b384)>_0x33e685[_0x271aae(0x2dc)]-_0x5904bd['offset'])_0x52a751=![];}else{if(Math[_0x271aae(0x1b3)](_0x39b384)>_0x33e685['number'])_0x52a751=![];}}if(_0x33e685[_0x271aae(0x269)]=='buy'){let _0x554162=config[_0x271aae(0x17b)][_0x271aae(0x23b)](_0x545710=>_0x545710['coin']==config[_0x271aae(0x29d)]),_0x3a9ee9=currentCoins['find'](_0x57d9da=>_0x57d9da[_0x271aae(0x2ff)]==config[_0x271aae(0x29d)]);if(_0x554162[_0x271aae(0x233)]>0x0){if(Math['abs'](_0x39b384)*_0x33e685[_0x271aae(0x184)]>_0x3a9ee9['number']-_0x554162['offset'])_0x52a751=![];}else{if(Math[_0x271aae(0x1b3)](_0x39b384)*_0x33e685[_0x271aae(0x184)]>_0x3a9ee9[_0x271aae(0x2dc)])_0x52a751=![];}}return _0x52a751;}async function getBalances(_0x46df5a=!![]){const _0x371163=_0x2500ad;if(botPaused)return;let _0x201eca=0x0,_0x4211eb;const _0x4064bf=config['threshold'];if(config[_0x371163(0x1ad)]&&config[_0x371163(0x278)]<0x0)await validate24hChanges();currentCoins[_0x371163(0x1eb)](_0x2fd62c=>{const _0x4100cb=_0x371163;if(_0x2fd62c[_0x4100cb(0x2ff)]!=config[_0x4100cb(0x29d)]){let _0x2c4494=gTicker[noslash(_0x2fd62c[_0x4100cb(0x167)])];_0x4211eb=_0x2fd62c[_0x4100cb(0x23c)]?0x1/_0x2c4494:_0x2c4494;}else _0x4211eb=0x1;let _0x481d1e=_0x2fd62c[_0x4100cb(0x2dc)]*_0x4211eb;_0x201eca+=_0x481d1e,_0x2fd62c[_0x4100cb(0x184)]=formatResult(Number(_0x4211eb),0x8),_0x2fd62c[_0x4100cb(0x257)]=_0x481d1e;}),currentCoins[_0x371163(0x1eb)](_0x1ace81=>{const _0x34ceed=_0x371163;let _0x56f633=config[_0x34ceed(0x17b)][_0x34ceed(0x23b)](_0x22a696=>_0x22a696['coin']==_0x1ace81['coin']),_0x1299d5=Number(_0x56f633[_0x34ceed(0x24a)]),_0xc702aa=_0x1ace81[_0x34ceed(0x257)]/_0x201eca*0x64,_0x2785cc=_0x1299d5*_0x201eca/0x64/_0x1ace81['last']-_0x1ace81[_0x34ceed(0x2dc)];_0x1ace81[_0x34ceed(0x24a)]=formatResult(_0xc702aa,0x3),_0x1ace81[_0x34ceed(0x151)]=formatResult(_0x1299d5,0x3),_0x1ace81['trade']=formatResult(_0x2785cc,0x8),_0x1ace81[_0x34ceed(0x269)]='',_0x1ace81['valid']=![];if(_0x1ace81[_0x34ceed(0x2ff)]!=config['basecoin']){if(_0x1ace81[_0x34ceed(0x24a)]>_0x1299d5)_0x1ace81['side']=_0x34ceed(0x22b),_0x1ace81['valid']=checkMinimums(_0x1ace81);else _0x1ace81[_0x34ceed(0x24a)]<_0x1299d5&&(_0x1ace81[_0x34ceed(0x269)]=_0x34ceed(0x2c7),_0x1ace81[_0x34ceed(0x14c)]=checkMinimums(_0x1ace81));}_0x1ace81[_0x34ceed(0x2eb)]=_0x1ace81[_0x34ceed(0x24a)]/_0x1ace81[_0x34ceed(0x151)]-0x1;if(_0x1ace81[_0x34ceed(0x1c6)]==_0x34ceed(0x1be)||_0x1ace81[_0x34ceed(0x1c6)]==_0x34ceed(0x1b0))_0x1ace81[_0x34ceed(0x1c6)]='none';}),currentCoins[_0x371163(0x1d7)]((_0x1f7cb8,_0x557cd5)=>_0x1f7cb8[_0x371163(0x2eb)]<_0x557cd5['delta']?0x1:_0x557cd5[_0x371163(0x2eb)]<_0x1f7cb8['delta']?-0x1:0x0);const _0x1d33a2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1d33a2['eur'],'usd':_0x1d33a2['usd'],'portfolio':JSON[_0x371163(0x1ae)](currentCoins),'threshold':_0x4064bf},proxyEmit(_0x371163(0x205),{'serverversion':serverversion,'balances':lastBalances});if(_0x46df5a){if(config[_0x371163(0x1ad)])headlessMode({'portfolio':currentCoins,'threshold':_0x4064bf});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4064bf});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4ad786=getNormalizedPerformance();getStartingBalances(_0x4ad786),emitPerformance(_0x4ad786);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x406310=_0x2500ad;if(!lastBalances)return;let _0x5ac1b5=[],_0x3a263f,_0x5b6668=JSON[_0x406310(0x2c0)](lastBalances['portfolio']);_0x5b6668[_0x406310(0x1d7)]((_0x147a00,_0x92bde4)=>_0x147a00[_0x406310(0x2ff)]>_0x92bde4['coin']?0x1:_0x92bde4[_0x406310(0x2ff)]>_0x147a00[_0x406310(0x2ff)]?-0x1:0x0),_0x5b6668[_0x406310(0x1eb)](_0x1b7e0b=>{const _0x49a8c6=_0x406310;let _0x1ddc76={'coin':_0x1b7e0b[_0x49a8c6(0x2ff)],'number':_0x1b7e0b[_0x49a8c6(0x2dc)],'price':_0x1b7e0b[_0x49a8c6(0x184)]};_0x5ac1b5['push'](_0x1ddc76);});const _0x485ee5=await getFiat();_0x3a263f={'date':lastBalances[_0x406310(0x1f2)][_0x406310(0x162)]('\x20')[0x0],'eur':_0x485ee5[_0x406310(0x200)],'usd':_0x485ee5['usd'],'coins':_0x5ac1b5};let _0x34edc1=dbPerformance[_0x406310(0x2c5)](_0x406310(0x15e))[_0x406310(0x23b)]({'date':_0x3a263f[_0x406310(0x2f8)]})[_0x406310(0x257)]();_0x34edc1?_0x3a263f[_0x406310(0x2f8)]!=config['startdate']&&dbPerformance[_0x406310(0x2c5)](_0x406310(0x15e))['find']({'date':_0x3a263f[_0x406310(0x2f8)]})[_0x406310(0x1c5)](_0x3a263f)[_0x406310(0x2d4)]():dbPerformance['get']('data')['push'](_0x3a263f)[_0x406310(0x2d4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x18b6f4=_0x2500ad;let _0x30b903=[];if(dbPerformance[_0x18b6f4(0x25c)]('data')['value']()){let _0x579039=dbPerformance[_0x18b6f4(0x2c5)](_0x18b6f4(0x15e))['cloneDeep']()[_0x18b6f4(0x2ee)](_0x889398=>{const _0x4988b1=_0x18b6f4;if(_0x889398[_0x4988b1(0x1a1)][_0x4988b1(0x1cd)]==0x0)return![];else return!![];})[_0x18b6f4(0x299)](_0x18b6f4(0x2f8))[_0x18b6f4(0x257)](),_0x460576=[...config['liquidity']];_0x460576[_0x18b6f4(0x1d7)]((_0x225183,_0x32d96c)=>_0x225183[_0x18b6f4(0x2f8)]>_0x32d96c[_0x18b6f4(0x2f8)]?-0x1:_0x32d96c[_0x18b6f4(0x2f8)]>_0x225183[_0x18b6f4(0x2f8)]?0x1:0x0);let _0x2938c7=0x1,_0x43a9e7=[],_0x1aed49=0x0;_0x579039[_0x18b6f4(0x2a4)]()[_0x18b6f4(0x23c)]()['forEach']((_0x48b58e,_0x288f5b)=>{const _0x1eb9c3=_0x18b6f4;if(_0x460576[_0x1aed49]){if(_0x579039[_0x579039['length']-_0x288f5b]&&_0x460576[_0x1aed49][_0x1eb9c3(0x2f8)]==_0x579039[_0x579039[_0x1eb9c3(0x1cd)]-_0x288f5b][_0x1eb9c3(0x2f8)]){if(_0x288f5b<_0x579039['length']){let _0x1a8db9=0x0,_0x3c5228=0x0;_0x579039[_0x579039['length']-_0x288f5b][_0x1eb9c3(0x1a1)][_0x1eb9c3(0x1eb)](_0x46bff9=>{const _0x319a0d=_0x1eb9c3;_0x3c5228+=_0x46bff9['number']*_0x46bff9[_0x319a0d(0x267)];}),_0x460576[_0x1aed49][_0x1eb9c3(0x287)][_0x1eb9c3(0x1eb)](_0x2aaab6=>{const _0x4383ca=_0x1eb9c3;_0x1a8db9+=_0x2aaab6[_0x4383ca(0x2dc)]*_0x2aaab6['price'];}),_0x2938c7*=_0x1a8db9/(_0x3c5228-_0x1a8db9)+0x1;}_0x1aed49++;}}let _0x1292d1=0x0;_0x48b58e[_0x1eb9c3(0x1a1)][_0x1eb9c3(0x1eb)](_0x13fb1e=>{const _0xbb30ff=_0x1eb9c3;_0x1292d1+=_0x13fb1e[_0xbb30ff(0x2dc)]*_0x13fb1e[_0xbb30ff(0x267)];}),_0x43a9e7[_0x579039[_0x1eb9c3(0x1cd)]-_0x288f5b-0x1]=_0x1292d1*(_0x2938c7-0x1);});let _0x355e69=[];_0x460576=[...config['liquidity']]||[];let _0xdb8314=0x0;_0x1aed49=0x0,_0x579039['forEach']((_0x18eb63,_0x2faf38)=>{const _0x38a321=_0x18b6f4;if(_0x460576[_0x1aed49]){const _0x4ce6f3=fns['parse'](_0x460576[_0x1aed49][_0x38a321(0x2f8)],_0x38a321(0x19e),new Date()),_0xaa9e33=fns['parse'](_0x18eb63[_0x38a321(0x2f8)],_0x38a321(0x19e),new Date());if(fns[_0x38a321(0x209)](_0x4ce6f3,_0xaa9e33)){let _0x380966=0x0;_0x460576[_0x1aed49][_0x38a321(0x287)]['forEach'](_0x11c49f=>{const _0x3760cb=_0x38a321;!_0x355e69[_0x11c49f[_0x3760cb(0x2ff)]]?_0x355e69[_0x11c49f[_0x3760cb(0x2ff)]]=_0x11c49f[_0x3760cb(0x2dc)]:(_0x380966=_0x355e69[_0x11c49f[_0x3760cb(0x2ff)]],_0x355e69[_0x11c49f[_0x3760cb(0x2ff)]]+=_0x11c49f[_0x3760cb(0x2dc)]);const _0x3e8953=_0x18eb63['coins'][_0x3760cb(0x23b)](_0x441c5a=>_0x441c5a[_0x3760cb(0x2ff)]==_0x11c49f[_0x3760cb(0x2ff)]);(!_0x3e8953||_0x3e8953[_0x3760cb(0x2dc)]==0x0)&&(_0xdb8314+=(-_0x11c49f[_0x3760cb(0x2dc)]-_0x380966)*_0x11c49f[_0x3760cb(0x267)]);}),_0x1aed49++;}}_0x18eb63[_0x38a321(0x1a1)][_0x38a321(0x1eb)]((_0x34408c,_0x493f98)=>{const _0x5a1176=_0x38a321;_0x355e69[_0x34408c[_0x5a1176(0x2ff)]]&&(_0x34408c[_0x5a1176(0x2c1)]=_0x355e69[_0x34408c['coin']]);}),_0x30b903[_0x38a321(0x18d)]({'date':_0x18eb63[_0x38a321(0x2f8)],'eur':_0x18eb63[_0x38a321(0x200)],'usd':_0x18eb63[_0x38a321(0x1a8)],'offset':_0x43a9e7[_0x2faf38],'netoffset':_0xdb8314,'coins':_0x18eb63[_0x38a321(0x1a1)]});});}return _0x30b903;}function emitPerformance(_0x37b9a4){const _0x5d8da0=_0x2500ad;_0x37b9a4[_0x5d8da0(0x1cd)]!==0x0?(proxyEmit(_0x5d8da0(0x192),_0x37b9a4),lastPerformanceEmitted=getDate()):proxyEmit(_0x5d8da0(0x192),[]);}function getPerf(_0x358003,_0x215fb0){const _0x26a484=_0x2500ad;let _0x386469=0x0,_0x498e3c=0x0,_0x1516b7=0x0;_0x358003['coins'][_0x26a484(0x1eb)](_0x3dadb5=>{const _0x59727b=_0x26a484;_0x386469+=_0x3dadb5[_0x59727b(0x2dc)]*_0x3dadb5[_0x59727b(0x267)];});_0x215fb0&&(_0x386469+=_0x358003[_0x26a484(0x233)]);if(config[_0x26a484(0x29d)]===_0x26a484(0x253)||config['basecoin']===_0x26a484(0x2c2)||config[_0x26a484(0x29d)]===_0x26a484(0x259))_0x498e3c=_0x386469*_0x358003[_0x26a484(0x200)],_0x1516b7=_0x386469*_0x358003[_0x26a484(0x1a8)];else{if(usdBasecoins[_0x26a484(0x150)](config[_0x26a484(0x29d)]))_0x498e3c=_0x386469*_0x358003[_0x26a484(0x200)]/_0x358003[_0x26a484(0x1a8)],_0x1516b7=_0x386469;else config[_0x26a484(0x29d)]===_0x26a484(0x180)&&(_0x498e3c=_0x386469,_0x1516b7=_0x386469*_0x358003[_0x26a484(0x1a8)]/_0x358003[_0x26a484(0x200)]);}return[_0x386469,_0x498e3c,_0x1516b7];}function getKPIs(_0x7cd874,_0x5b6fa2='EUR'){const _0x30cd0c=_0x2500ad,_0xf553ab=config[_0x30cd0c(0x29d)],_0x3c04f9=lastBalances,_0x5a247c=currentCoins,_0x47bd41=getNormalizedPerformance(),_0x32d12a=_0x7cd874===_0x30cd0c(0x29d)?_0xf553ab:_0x7cd874===_0x30cd0c(0x1ff)||_0x7cd874===_0x30cd0c(0x26b)?_0x5b6fa2:_0x30cd0c(0x1b1)+_0xf553ab,_0x49395f=_0x7cd874===_0x30cd0c(0x266)?_0x30cd0c(0x13e):_0x7cd874===_0x30cd0c(0x26b)?_0x30cd0c(0x13e):_0x32d12a+'\x20value',_0x3dcefb=_0x7cd874===_0x30cd0c(0x266)||_0x7cd874==='net-fiat'?'Net\x20effect':_0x32d12a+_0x30cd0c(0x263);let _0x5f1b44=0x0;_0x5a247c[_0x30cd0c(0x1eb)](_0x185289=>{const _0x5be032=_0x30cd0c;_0x5f1b44+=_0x185289[_0x5be032(0x2dc)]*_0x185289['last'];});if(_0x7cd874===_0x30cd0c(0x1ff)||_0x7cd874===_0x30cd0c(0x26b)){if(_0xf553ab===_0x30cd0c(0x253)||_0xf553ab===_0x30cd0c(0x2c2)||_0xf553ab==='PAXG')_0x5f1b44=_0x5f1b44*(_0x5b6fa2===_0x30cd0c(0x180)?_0x3c04f9[_0x30cd0c(0x200)]:_0x3c04f9[_0x30cd0c(0x1a8)]);else{if(usdBasecoins[_0x30cd0c(0x150)](_0xf553ab))_0x5f1b44=_0x5f1b44*(_0x5b6fa2==='EUR'?_0x3c04f9[_0x30cd0c(0x200)]/_0x3c04f9[_0x30cd0c(0x1a8)]:0x1);else _0xf553ab===_0x30cd0c(0x180)&&(_0x5f1b44=_0x5f1b44*(_0x5b6fa2===_0x30cd0c(0x180)?0x1:_0x3c04f9['usd']/_0x3c04f9['eur']));}}let _0x16d508;if(_0x5f1b44!==0x0){if(_0x7cd874===_0x30cd0c(0x29d))_0x16d508=(_0x5f1b44/startingBalances[_0x30cd0c(0x29d)]-0x1)*0x64;else{if(_0x5b6fa2===_0x30cd0c(0x180))_0x16d508=(_0x5f1b44/startingBalances[_0x30cd0c(0x200)]-0x1)*0x64;else _0x16d508=(_0x5f1b44/startingBalances[_0x30cd0c(0x1a8)]-0x1)*0x64;}let _0x27f7a2=0x0;if(startingBalances[_0x30cd0c(0x1a1)])_0x5a247c[_0x30cd0c(0x1eb)](_0x287d81=>{const _0x5851a0=_0x30cd0c;let _0x2dba70=startingBalances['coins'][_0x5851a0(0x23b)](_0x3c4e28=>_0x3c4e28['coin']===_0x287d81['coin']);if(_0x2dba70&&_0x2dba70['coin']&&_0x287d81[_0x5851a0(0x2dc)]!==0x0)_0x27f7a2+=_0x2dba70[_0x5851a0(0x2dc)]*_0x287d81[_0x5851a0(0x184)];});let _0x361017=0x0;if(_0x47bd41[_0x30cd0c(0x1cd)]!==0x0){let _0x17fbaf=_0x47bd41[_0x47bd41[_0x30cd0c(0x1cd)]-0x1];_0x361017=_0x17fbaf['netoffset'];}_0x27f7a2-=_0x361017;_0x7cd874===_0x30cd0c(0x266)&&(_0x16d508=(_0x5f1b44-_0x27f7a2)/startingBalances[_0x30cd0c(0x29d)]*0x64,_0x5f1b44=_0x5f1b44-_0x27f7a2);if(_0x7cd874===_0x30cd0c(0x26b)){let _0x119e82=_0x5b6fa2===_0x30cd0c(0x180)?startingBalances[_0x30cd0c(0x200)]:startingBalances[_0x30cd0c(0x1a8)];if(_0xf553ab===_0x30cd0c(0x253)||_0xf553ab==='ETH'||_0xf553ab===_0x30cd0c(0x259))_0x27f7a2=_0x5b6fa2===_0x30cd0c(0x180)?_0x27f7a2*_0x3c04f9[_0x30cd0c(0x200)]:_0x27f7a2*_0x3c04f9[_0x30cd0c(0x1a8)];else{if(usdBasecoins[_0x30cd0c(0x150)](_0xf553ab))_0x27f7a2=_0x5b6fa2===_0x30cd0c(0x180)?_0x27f7a2*_0x3c04f9['eur']/_0x3c04f9[_0x30cd0c(0x1a8)]:_0x27f7a2;else _0xf553ab===_0x30cd0c(0x180)&&(_0x27f7a2=_0x5b6fa2==='EUR'?_0x27f7a2:_0x27f7a2*_0x3c04f9[_0x30cd0c(0x1a8)]/_0x3c04f9[_0x30cd0c(0x200)]);}_0x16d508=(_0x5f1b44-_0x27f7a2)/_0x119e82*0x64,_0x5f1b44=_0x5f1b44-_0x27f7a2;}if(_0x16d508){if(_0x16d508<0x64)_0x16d508=_0x16d508['toFixed'](0x2);else{if(_0x16d508<0x3e8)_0x16d508=_0x16d508[_0x30cd0c(0x1ed)](0x1);else _0x16d508=_0x16d508['toFixed'](0x0);}}else _0x16d508=Number('0')[_0x30cd0c(0x1ed)](0x2);if(_0x5f1b44){if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0.000001)_0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x2);else{if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0.1)_0x5f1b44=_0x5f1b44['toFixed'](0x6);else{if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0x1)_0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x5);else{if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0xa)_0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x4);else{if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0x64)_0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x3);else{if(Math[_0x30cd0c(0x1b3)](_0x5f1b44)<0x3e8)_0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x2);else _0x5f1b44=_0x5f1b44[_0x30cd0c(0x1ed)](0x2);}}}}}}else _0x5f1b44=Number('0')[_0x30cd0c(0x1ed)](0x2);}else _0x16d508=Number('0')[_0x30cd0c(0x1ed)](0x2);return{'value':_0x5f1b44,'change':_0x16d508,'leftTxt':_0x49395f,'rightTxt':_0x3dcefb};}async function getStartingBalances(_0x278a73,_0x31bbb5=!![]){const _0x2186b6=_0x2500ad;if(_0x278a73[_0x2186b6(0x1cd)]!==0x0){const [_0x95b9d8,_0x4d9a26,_0x2e9706]=getPerf(_0x278a73[0x0],!![]);let _0x25aa6b=[];config['portfolio'][_0x2186b6(0x1eb)](_0x47143d=>{const _0x1ef875=_0x2186b6;let _0x43ca38=0x0,_0x49af7e;config['liquidity']['forEach'](_0x2112c1=>{const _0x374334=_0x22fe;let _0x1c2618=_0x2112c1['changes'][_0x374334(0x23b)](_0x35df69=>_0x35df69['coin']==_0x47143d[_0x374334(0x2ff)]);if(_0x1c2618){_0x43ca38+=_0x1c2618[_0x374334(0x2dc)];if(!_0x49af7e)_0x49af7e=_0x1c2618[_0x374334(0x267)];}}),_0x25aa6b[_0x1ef875(0x18d)]({'coin':_0x47143d['coin'],'number':_0x43ca38,'initialprice':_0x49af7e});});const _0x2887aa={'basecoin':_0x95b9d8,'eur':_0x4d9a26,'usd':_0x2e9706,'coins':_0x25aa6b};if(_0x31bbb5)proxyEmit('starting-balances',_0x2887aa);startingBalances=_0x2887aa;}}function headlessMode(_0x2752c6){const _0x37889a=_0x2500ad;let _0x433e0f=_0x2752c6[_0x37889a(0x17b)],_0x32aeca=_0x2752c6[_0x37889a(0x2cd)],_0xb5a4f4=[];for(let _0x34471d of _0x433e0f){if(_0x34471d[_0x37889a(0x2ff)]!=config['basecoin']){if(_0x34471d['delta']>=_0x32aeca/0x64){if(_0x34471d[_0x37889a(0x14c)])_0xb5a4f4[_0x37889a(0x18d)](_0x34471d);}else{if(_0x34471d[_0x37889a(0x2eb)]<=-_0x32aeca/0x64){if(_0x34471d[_0x37889a(0x14c)])_0xb5a4f4[_0x37889a(0x18d)](_0x34471d);}}}}_0xb5a4f4[_0x37889a(0x1cd)]>0x0&&placeOrder(_0xb5a4f4);}function notifyBalance(_0x24300e){const _0xc1f8f4=_0x2500ad;let _0x3cba07=_0x24300e[_0xc1f8f4(0x17b)],_0x10b254=_0x24300e['threshold'],_0x4aa97b=[];for(let _0x2d45d2 of _0x3cba07){if(_0x2d45d2[_0xc1f8f4(0x2ff)]!=config[_0xc1f8f4(0x29d)]){if(_0x2d45d2[_0xc1f8f4(0x2eb)]>=_0x10b254/0x64){if(_0x2d45d2[_0xc1f8f4(0x14c)])_0x4aa97b[_0xc1f8f4(0x18d)](_0x2d45d2);}else{if(_0x2d45d2[_0xc1f8f4(0x2eb)]<=-_0x10b254/0x64){if(_0x2d45d2['valid'])_0x4aa97b['push'](_0x2d45d2);}}}}if(_0x4aa97b[_0xc1f8f4(0x1cd)]>0x0){let _0x416a31=_0x4aa97b[_0xc1f8f4(0x229)](_0x5ad540=>_0x5ad540['coin']);_0x416a31['sort']();let _0x2d2937=_0x416a31[_0xc1f8f4(0x2ce)](',\x20');if(!lastCoinsToBalance)logHistory(_0xc1f8f4(0x1c8),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x2d2937;}}function symbolToCoin(_0x1aee9e){const _0x24e2b8=_0x2500ad;let _0x272f8b;if(_0x1aee9e[_0x24e2b8(0x150)]('/'+config[_0x24e2b8(0x29d)]))_0x272f8b=_0x1aee9e[_0x24e2b8(0x300)]('/'+config['basecoin'],'');if(_0x1aee9e[_0x24e2b8(0x150)](config[_0x24e2b8(0x29d)]+'/'))_0x272f8b=_0x1aee9e[_0x24e2b8(0x300)](config[_0x24e2b8(0x29d)]+'/','');return _0x272f8b;}function setLockOrders(_0x26299d){const _0x23f414=_0x2500ad;lockOrders=_0x26299d,logger[_0x23f414(0x1e5)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x23f414(0x1f9)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3c38d4=![]){const _0x2990a7=_0x2500ad;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2990a7(0x250)]){setLockOrders(ORDERS[_0x2990a7(0x2a0)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3c38d4){const _0x2ddc99=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2ddc99,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x1da1bd){const _0x1039ad=_0x2500ad;if(_0x1da1bd)validateOrdersState=_0x1da1bd;logger[_0x1039ad(0x1e5)](_0x1039ad(0x2d5)+validateOrdersState+_0x1039ad(0x213)+Object['keys'](ORDERS)[lockOrders]);let _0x4d3dbf=[],_0x295525=config['ordertype']==_0x1039ad(0x272)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1039ad(0x21b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1039ad(0x250)])return;logger[_0x1039ad(0x1e5)](_0x1039ad(0x2ae)+validateOrdersState);for(let _0x3b4eae=lastOrders[_0x1039ad(0x1cd)]-0x1;_0x3b4eae>=0x0;_0x3b4eae--){let _0x567144=lastOrders[_0x3b4eae],_0x399f68=![];_0x567144[_0x1039ad(0x1be)]>0x0&&(_0x399f68=!![]),_0x4d3dbf[_0x1039ad(0x18d)](_0x399f68),_0x399f68&&config['ordertype']!=_0x1039ad(0x272)&&logHistory(_0x1039ad(0x17f),_0x1039ad(0x19f)+_0x567144[_0x1039ad(0x167)]+'\x20'+_0x567144['side']+'\x20#'+formatResult(_0x567144[_0x1039ad(0x1be)],0x8)+'\x20@'+formatResult(_0x567144[_0x1039ad(0x267)],0x8)),_0x399f68&&lastOrders[_0x1039ad(0x24c)](_0x3b4eae,0x1);}persistOpenOrders(lastOrders);const _0x5c4ec7=coolingDown?_0x1039ad(0x1fa):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x4d3dbf['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1039ad(0x237)){if(_0x4d3dbf[_0x1039ad(0x150)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1039ad(0x1d1))_0x4d3dbf[_0x1039ad(0x150)](![])&&(config['ordertype']==_0x1039ad(0x272)?logHistory(_0x1039ad(0x29c),_0x1039ad(0x279)+Math['round'](_0x295525*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5c4ec7):(await cancelOrders(),logHistory(_0x1039ad(0x29c),_0x1039ad(0x2e4)+Math['round'](_0x295525*validateOrderInterval/0xea60)+_0x1039ad(0x21a)+_0x5c4ec7))),await unlockOrders(!![]);else{if(validateOrdersState==_0x1039ad(0x2f1)){if(config['ordertype']!='market')logHistory(_0x1039ad(0x29c),_0x1039ad(0x185)+_0x5c4ec7);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x1648dc=_0x2500ad;lastOrders[_0x1648dc(0x1eb)](async _0x5f28a7=>{const _0x559602=_0x1648dc;try{const _0x5b0622=await exchange['cancelOrder'](_0x5f28a7['orderId'],_0x5f28a7[_0x559602(0x167)]);}catch(_0x59f129){if(_0x59f129[_0x559602(0x2a2)]()[_0x559602(0x150)]('OrderNotFound')){}else await handleError(_0x59f129,_0x559602(0x23f));}});}async function initCoinResults(_0x3ef266){const _0x9272e5=_0x2500ad;_0x3ef266?logger['debug'](_0x9272e5(0x2dd)+_0x3ef266):logger['debug'](_0x9272e5(0x288)),config[_0x9272e5(0x17b)][_0x9272e5(0x1eb)](_0x34d3d8=>{const _0x19ebf0=_0x9272e5;if(!_0x34d3d8[_0x19ebf0(0x22c)]&&_0x34d3d8[_0x19ebf0(0x2ff)]!=config['basecoin']){const _0x4f73a0=currentCoins[_0x19ebf0(0x23b)](_0x1c41ee=>_0x1c41ee['coin']==_0x34d3d8[_0x19ebf0(0x2ff)]),_0x2851d9=gTicker[noslash(_0x34d3d8[_0x19ebf0(0x167)])];let _0x27e802=_0x4f73a0?_0x4f73a0[_0x19ebf0(0x2dc)]:null,_0x533c39=_0x34d3d8[_0x19ebf0(0x23c)]?0x1/_0x2851d9:_0x2851d9,_0x2037d5;config[_0x19ebf0(0x235)][_0x19ebf0(0x1eb)](_0x15be58=>{const _0x21417d=_0x19ebf0;!_0x2037d5&&(_0x2037d5=_0x15be58[_0x21417d(0x287)][_0x21417d(0x23b)](_0x427914=>_0x427914[_0x21417d(0x2ff)]==_0x34d3d8[_0x21417d(0x2ff)]),_0x2037d5&&(_0x27e802=_0x2037d5[_0x21417d(0x2dc)],_0x533c39=_0x2037d5[_0x21417d(0x267)]));});let _0x29c59b=dbCoinResults[_0x19ebf0(0x2c5)](_0x19ebf0(0x1a1))[_0x19ebf0(0x23b)]({'coin':_0x34d3d8[_0x19ebf0(0x2ff)]})['value']();if(!_0x29c59b){const _0x45551e={'coin':_0x34d3d8[_0x19ebf0(0x2ff)],'number':_0x27e802,'breakeven':_0x533c39,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x19ebf0(0x2c5)](_0x19ebf0(0x1a1))[_0x19ebf0(0x18d)](_0x45551e)[_0x19ebf0(0x2d4)]();}else{if(_0x3ef266&&_0x34d3d8[_0x19ebf0(0x2ff)]==_0x3ef266){const _0x28c061={'coin':_0x34d3d8['coin'],'number':_0x27e802,'breakeven':_0x533c39,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x19ebf0(0x2c5)](_0x19ebf0(0x1a1))[_0x19ebf0(0x23b)]({'coin':_0x34d3d8[_0x19ebf0(0x2ff)]})[_0x19ebf0(0x1c5)](_0x28c061)['write']();}}}});}async function updateCoinResults(_0xbe7e24,_0x26bdaf=![]){const _0x24516c=_0x2500ad;let _0x3b3e9a,_0x1c7578,_0x121c13,_0x99dc89,_0x5d4378,_0x3800d6,_0x3a2f34=dbCoinResults['get']('coins')[_0x24516c(0x23b)]({'coin':_0xbe7e24['coin']})[_0x24516c(0x257)](),_0x54404a=![];_0x3a2f34&&Object['entries'](_0x3a2f34)[_0x24516c(0x1eb)](([_0xfd5ccb,_0x5d68e0])=>{if(_0x5d68e0==null)_0x54404a=!![];});(!_0x3a2f34||_0x54404a)&&(await initCoinResults(_0xbe7e24[_0x24516c(0x2ff)]),_0x3a2f34=dbCoinResults[_0x24516c(0x2c5)](_0x24516c(0x1a1))[_0x24516c(0x23b)]({'coin':_0xbe7e24[_0x24516c(0x2ff)]})[_0x24516c(0x257)]());_0xbe7e24['reverse']&&(_0x3800d6={'filled':_0xbe7e24['filled']*_0xbe7e24[_0x24516c(0x267)],'amount':_0xbe7e24['filled']*_0xbe7e24[_0x24516c(0x267)],'side':_0xbe7e24[_0x24516c(0x269)]==_0x24516c(0x22b)?_0x24516c(0x2c7):_0x24516c(0x22b),'price':0x1/_0xbe7e24[_0x24516c(0x267)]},_0xbe7e24={..._0xbe7e24,..._0x3800d6});_0x26bdaf?_0x1c7578=_0xbe7e24[_0x24516c(0x269)]==_0x24516c(0x2c7)?_0x3a2f34[_0x24516c(0x2dc)]+_0xbe7e24[_0x24516c(0x1be)]:_0x3a2f34[_0x24516c(0x2dc)]-_0xbe7e24[_0x24516c(0x1be)]:_0x1c7578=await getCoinNumber(_0xbe7e24[_0x24516c(0x2ff)]);if(_0xbe7e24[_0x24516c(0x15b)]&&_0xbe7e24[_0x24516c(0x15b)]['currency']==config[_0x24516c(0x29d)])_0x3b3e9a=Number(_0xbe7e24['fee'][_0x24516c(0x220)]);else{if(_0xbe7e24[_0x24516c(0x15b)]&&_0xbe7e24[_0x24516c(0x15b)][_0x24516c(0x27a)]==_0x24516c(0x165)&&!_0x26bdaf&&config['basecoin']!=_0x24516c(0x259))_0x3b3e9a=Number(_0xbe7e24[_0x24516c(0x15b)][_0x24516c(0x220)])*gTicker['BNB'+config['basecoin']];else _0x3b3e9a=defaultFee*_0xbe7e24['filled']*_0xbe7e24[_0x24516c(0x267)];}_0xbe7e24[_0x24516c(0x269)]==_0x24516c(0x2c7)?(_0x121c13=_0x1c7578!=0x0?(_0x3a2f34[_0x24516c(0x1b5)]*_0x3a2f34['number']+_0xbe7e24[_0x24516c(0x267)]*(_0x1c7578-_0x3a2f34[_0x24516c(0x2dc)])+_0x3b3e9a)/_0x1c7578:0x0,_0x99dc89=_0x3a2f34['realized']):(_0x121c13=_0x1c7578!=0x0?(_0x3a2f34[_0x24516c(0x1b5)]*_0x3a2f34[_0x24516c(0x2dc)]-_0xbe7e24[_0x24516c(0x267)]*(_0x3a2f34[_0x24516c(0x2dc)]-_0x1c7578)+_0x3b3e9a)/_0x1c7578:0x0,_0x99dc89=_0x3a2f34['realized']+(_0xbe7e24[_0x24516c(0x267)]-_0x3a2f34[_0x24516c(0x1b5)])*_0xbe7e24[_0x24516c(0x1be)]);_0x5d4378=(_0xbe7e24[_0x24516c(0x267)]-_0x121c13-_0x3b3e9a/_0xbe7e24[_0x24516c(0x1be)])*_0x1c7578;let _0x382bfc={'coin':_0xbe7e24[_0x24516c(0x2ff)],'number':_0x1c7578,'breakeven':formatResult(_0x121c13,0x8),'realized':formatResult(_0x99dc89,0x8),'unrealized':formatResult(_0x5d4378,0x8),'fees':formatResult(_0x3a2f34[_0x24516c(0x208)]+_0x3b3e9a,0x8),'sells':_0xbe7e24[_0x24516c(0x269)]==_0x24516c(0x22b)?_0x3a2f34[_0x24516c(0x2ea)]+0x1:_0x3a2f34[_0x24516c(0x2ea)],'buys':_0xbe7e24[_0x24516c(0x269)]==_0x24516c(0x2c7)?_0x3a2f34[_0x24516c(0x176)]+0x1:_0x3a2f34[_0x24516c(0x176)]};dbCoinResults[_0x24516c(0x2c5)](_0x24516c(0x1a1))[_0x24516c(0x23b)]({'coin':_0xbe7e24[_0x24516c(0x2ff)]})[_0x24516c(0x1c5)](_0x382bfc)[_0x24516c(0x2d4)]();if(!_0x26bdaf){if(_0xbe7e24[_0x24516c(0x15b)]&&_0xbe7e24[_0x24516c(0x15b)][_0x24516c(0x27a)]=='BNB'){const _0x4adc02=currentCoins['find'](_0xfa8f89=>_0xfa8f89['coin']=='BNB');if(_0x4adc02){let _0x2fb5fe=dbCoinResults[_0x24516c(0x2c5)](_0x24516c(0x1a1))[_0x24516c(0x23b)]({'coin':_0x24516c(0x165)})[_0x24516c(0x257)]();_0x382bfc={..._0x2fb5fe,'number':_0x4adc02['number']},dbCoinResults[_0x24516c(0x2c5)](_0x24516c(0x1a1))[_0x24516c(0x23b)]({'coin':_0x24516c(0x165)})[_0x24516c(0x1c5)](_0x382bfc)['write']();}}}}async function placeOrder(_0x1893d0){const _0x5038f4=_0x2500ad,_0x27d9d9=config['ordertype']==_0x5038f4(0x272)?_0x5038f4(0x272):_0x5038f4(0x18a);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x5038f4(0x250)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x5038f4(0x1e5)]('Placing\x20order\x20for:\x20'+_0x1893d0['map'](_0x391dfb=>_0x391dfb[_0x5038f4(0x2ff)])[_0x5038f4(0x2ce)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x171842=![];lastOrders=[];const _0x1784b8=config[_0x5038f4(0x2cd)];for(const _0x176260 of _0x1893d0){let _0x29b047,_0x4fafa2,_0x28e523,_0x14b9c2,_0x2317f5,_0x495554=_0x176260[_0x5038f4(0x167)];logger['debug'](_0x5038f4(0x218)+_0x176260['coin']+'\x20'+_0x176260[_0x5038f4(0x2dc)]+'\x20'+_0x176260[_0x5038f4(0x184)]+'\x20'+_0x176260[_0x5038f4(0x24a)]+'%\x20'+_0x176260['target']+'%\x20'+(0x64*_0x176260[_0x5038f4(0x2eb)])['toFixed'](0x2)+_0x5038f4(0x260)+_0x1784b8['toFixed'](0x2)+'%)');const _0x2f3123=currentCoins[_0x5038f4(0x23b)](_0xe73521=>_0xe73521[_0x5038f4(0x2ff)]==_0x176260[_0x5038f4(0x2ff)]);_0x2f3123&&(_0x2f3123[_0x5038f4(0x238)]=_0x176260[_0x5038f4(0x2dc)]);try{const _0x2d1725=await exchange[_0x5038f4(0x1e4)](_0x495554);_0x29b047=_0x176260[_0x5038f4(0x23c)]?0x1/_0x176260['last']:_0x176260['last'],_0x4fafa2=_0x2d1725[_0x5038f4(0x2fb)],_0x28e523=_0x2d1725['ask'];_0x176260[_0x5038f4(0x23c)]?(_0x14b9c2=_0x176260[_0x5038f4(0x269)]=='buy'?_0x5038f4(0x22b):_0x5038f4(0x2c7),_0x2317f5=Math[_0x5038f4(0x1b3)](_0x176260[_0x5038f4(0x1bb)])/_0x29b047):(_0x14b9c2=_0x176260[_0x5038f4(0x269)],_0x2317f5=Math[_0x5038f4(0x1b3)](_0x176260[_0x5038f4(0x1bb)]));_0x27d9d9==_0x5038f4(0x18a)&&(config[_0x5038f4(0x1d4)]==_0x5038f4(0x1f5)&&(_0x29b047=_0x14b9c2==_0x5038f4(0x2c7)?_0x4fafa2:_0x28e523),config[_0x5038f4(0x1d4)]=='limit-low'&&(_0x29b047=_0x14b9c2==_0x5038f4(0x2c7)?_0x28e523:_0x4fafa2));_0x2317f5=formatResult(_0x2317f5,0x8),_0x29b047=formatResult(_0x29b047,0x8);const _0x4cdddb=_0x14b9c2==_0x5038f4(0x22b)?config[_0x5038f4(0x141)]?String[_0x5038f4(0x1cc)]('0x'+config[_0x5038f4(0x141)])+'\x20':'':config[_0x5038f4(0x276)]?String[_0x5038f4(0x1cc)]('0x'+config[_0x5038f4(0x276)])+'\x20':'',_0xc611b5=_0x27d9d9==_0x5038f4(0x272)?_0x5038f4(0x251):config['ordertype']=='limit-high'?_0x5038f4(0x2a1):_0x5038f4(0x2a8),_0x14ff35=(Math[_0x5038f4(0x25b)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x5038f4(0x2a2)]();lastOrders['push']({'customId':_0x14ff35,'symbol':_0x495554,'coin':_0x176260['coin'],'amount':_0x2317f5,'price':_0x29b047,'side':_0x14b9c2,'reverse':_0x176260[_0x5038f4(0x23c)],'filled':0x0});if(_0x27d9d9==_0x5038f4(0x272))logHistory('order',''+_0x4cdddb+_0xc611b5+_0x5038f4(0x1e2)+_0x495554+'\x20'+_0x14b9c2+'\x20#'+formatResult(_0x2317f5,0x8)+'\x20@'+formatResult(_0x29b047,0x8));else logHistory(_0x5038f4(0x17f),''+_0x4cdddb+_0xc611b5+_0x5038f4(0x1e2)+_0x495554+'\x20'+_0x14b9c2+'\x20#'+formatResult(_0x2317f5,0x8)+'\x20@'+formatResult(_0x29b047,0x8));let _0x3bfbd1;_0x27d9d9==_0x5038f4(0x272)?_0x14b9c2==_0x5038f4(0x2c7)&&['Bybit',_0x5038f4(0x2d2),_0x5038f4(0x2d7),'Huobi',_0x5038f4(0x28a)][_0x5038f4(0x150)](config[_0x5038f4(0x174)])?_0x3bfbd1=await exchange[_0x5038f4(0x20a)](_0x495554,_0x27d9d9,_0x14b9c2,_0x2317f5,_0x29b047):_0x3bfbd1=await exchange['createOrder'](_0x495554,_0x27d9d9,_0x14b9c2,_0x2317f5,undefined):_0x3bfbd1=await exchange[_0x5038f4(0x20a)](_0x495554,_0x27d9d9,_0x14b9c2,_0x2317f5,_0x29b047);logger['debug']('ID:\x20'+_0x3bfbd1['id']+_0x5038f4(0x149)+_0x14ff35);const _0x12a223=lastOrders['length']-0x1;if(_0x12a223>=0x0&&lastOrders[_0x12a223][_0x5038f4(0x16f)]==_0x14ff35){lastOrders[_0x12a223][_0x5038f4(0x1da)]=_0x3bfbd1['id'];if(_0x3bfbd1[_0x5038f4(0x147)])lastOrders[_0x12a223]['amount']=_0x3bfbd1[_0x5038f4(0x147)];if(_0x3bfbd1[_0x5038f4(0x267)])lastOrders[_0x12a223][_0x5038f4(0x267)]=_0x3bfbd1[_0x5038f4(0x267)];lastOrders[_0x12a223][_0x5038f4(0x15b)]=_0x3bfbd1[_0x5038f4(0x15b)];}if(config[_0x5038f4(0x177)]!=0x0){let _0x3fa255=null;if(cooldownTracker[_0x5038f4(0x1cd)]==config[_0x5038f4(0x177)]-0x1)_0x3fa255=cooldownTracker[_0x5038f4(0x24f)]();const _0x353b8f=getTimeStamp();cooldownTracker[_0x5038f4(0x18d)](_0x353b8f);if(_0x3fa255){const _0x16d376=fns[_0x5038f4(0x1a7)](new Date(_0x353b8f),new Date(_0x3fa255));if(_0x16d376<cooldownInterval){logHistory(_0x5038f4(0x1a4),_0x5038f4(0x225)+config[_0x5038f4(0x177)]+_0x5038f4(0x2f2)+cooldownInterval/0x3c+_0x5038f4(0x2d0)+cooldownPeriod/(0xe10*0x3e8)+_0x5038f4(0x152)),coolingDown=!![];break;}}}}catch(_0x3337de){if(_0x3337de['toString']()[_0x5038f4(0x150)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x5038f4(0x2ee)](_0x3ee094=>_0x3ee094['symbol']!=_0x495554),logHistory(_0x5038f4(0x1a4),_0x5038f4(0x163)+_0x495554),_0x171842=!![];else{if(_0x3337de[_0x5038f4(0x2a2)]()[_0x5038f4(0x150)](_0x5038f4(0x2b9)))lastOrders=lastOrders[_0x5038f4(0x2ee)](_0x5ec372=>_0x5ec372['symbol']!=_0x495554),logHistory(_0x5038f4(0x1a4),_0x5038f4(0x296)+_0x495554),_0x171842=!![];else{if(_0x3337de[_0x5038f4(0x2a2)]()[_0x5038f4(0x150)]('InvalidOrder'))lastOrders=lastOrders[_0x5038f4(0x2ee)](_0x4bb412=>_0x4bb412[_0x5038f4(0x167)]!=_0x495554),logHistory(_0x5038f4(0x1a4),'Order\x20is\x20invalid:\x20'+_0x495554),logger[_0x5038f4(0x1e5)](_0x3337de),_0x171842=!![];else _0x3337de['toString']()[_0x5038f4(0x150)](_0x5038f4(0x2d6))?(lastOrders=lastOrders[_0x5038f4(0x2ee)](_0x14a2b4=>_0x14a2b4[_0x5038f4(0x167)]!=_0x495554),logHistory(_0x5038f4(0x1a4),_0x5038f4(0x163)+_0x495554),_0x171842=!![]):(lastOrders=lastOrders[_0x5038f4(0x2ee)](_0x4b8a68=>_0x4b8a68['symbol']!=_0x495554),await handleError(_0x3337de,_0x5038f4(0x1f6),_0x495554));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x40a812=config[_0x5038f4(0x1d4)]==_0x5038f4(0x272)?validateOrderTimeout*0x3c*0x3e8:config[_0x5038f4(0x21b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x378ed8=_0x5038f4;validateOrders(_0x378ed8(0x1d1));},_0x40a812);}else unlockOrders();_0x171842&&config[_0x5038f4(0x1ad)]&&(logHistory(_0x5038f4(0x1a4),_0x5038f4(0x241)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5038f4(0x29c),_0x5038f4(0x271)));}else{if(coolingDown)!config[_0x5038f4(0x1ad)]&&logHistory(_0x5038f4(0x1a4),_0x5038f4(0x16b));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0x5038f4(0x1d4)]=='market'?logHistory(_0x5038f4(0x1a4),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5038f4(0x1a4),_0x5038f4(0x1fc))));}}function persistOpenOrders(_0x447cfc){const _0x5add8c=_0x2500ad,_0x341cd1={...config,'openOrders':_0x447cfc};let _0x293aef=dbConfig[_0x5add8c(0x2c5)]('bot')[_0x5add8c(0x23b)]({'botID':botID})['value']();_0x293aef&&dbConfig['get'](_0x5add8c(0x1b6))[_0x5add8c(0x23b)]({'botID':botID})[_0x5add8c(0x1c5)](_0x341cd1)[_0x5add8c(0x2d4)]();}function restoreOrders(){const _0x1d743c=_0x2500ad;let _0x1ed338;config[_0x1d743c(0x15f)]&&allOpenOrders['forEach'](_0x24fff9=>{const _0x4cbc15=_0x1d743c,_0x13d98d=config[_0x4cbc15(0x15f)][_0x4cbc15(0x23b)](_0x5bdf63=>_0x5bdf63[_0x4cbc15(0x1da)]==_0x24fff9['id']);_0x13d98d&&(lastOrders[_0x4cbc15(0x18d)](_0x13d98d),_0x1ed338=_0x24fff9[_0x4cbc15(0x2b6)]);});if(lastOrders[_0x1d743c(0x1cd)]>0x0){setLockOrders(ORDERS[_0x1d743c(0x250)]),validateOrdersState=_0x1d743c(0x237),allOrdersPlaced=!![];const _0x35f054=new Date()[_0x1d743c(0x206)](),_0x4440ab=config[_0x1d743c(0x1d4)]==_0x1d743c(0x272)?validateOrderTimeout*0x3c*0x3e8:config[_0x1d743c(0x21b)]*0x3c*0x3e8;if(_0x1ed338+_0x4440ab>_0x35f054){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x537c08=_0x1d743c;validateOrders(_0x537c08(0x1d1));},_0x1ed338+_0x4440ab-_0x35f054);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x57fa45=_0x2500ad;if(!coinsLoaded){process[_0x57fa45(0x212)]({'telegrammsg':_0x57fa45(0x168)},_0x2ba87d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4faec4='';if(config['showname'])_0x4faec4=_0x57fa45(0x148)+config[_0x57fa45(0x2db)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x4faec4=_0x57fa45(0x1e8)+botID+_0x57fa45(0x196);const _0x470e62=getKPIs(_0x57fa45(0x29d)),_0x2e4d08=getKPIs(_0x57fa45(0x1ff),config['fiat']),_0x9525f2=getKPIs('net-basecoin'),_0x27862b=getKPIs(_0x57fa45(0x26b),config[_0x57fa45(0x1ff)]);_0x4faec4+=_0x57fa45(0x2e0),_0x4faec4+=_0x470e62[_0x57fa45(0x15d)]+_0x57fa45(0x1b8)+_0x470e62[_0x57fa45(0x257)]+'\x0a',_0x4faec4+=_0x470e62[_0x57fa45(0x224)]+':\x20'+_0x470e62[_0x57fa45(0x1ca)]+'%\x0a',_0x4faec4+=_0x2e4d08[_0x57fa45(0x15d)]+_0x57fa45(0x1b8)+_0x2e4d08['value']+'\x0a',_0x4faec4+=_0x2e4d08[_0x57fa45(0x224)]+':\x20'+_0x2e4d08['change']+'%\x0a',_0x4faec4+=_0x9525f2[_0x57fa45(0x15d)]+':\x20'+_0x9525f2[_0x57fa45(0x257)]+'\x20('+config['basecoin']+')\x0a',_0x4faec4+=_0x9525f2[_0x57fa45(0x224)]+':\x20'+_0x9525f2[_0x57fa45(0x1ca)]+_0x57fa45(0x260)+config[_0x57fa45(0x29d)]+')\x0a',_0x4faec4+=_0x27862b[_0x57fa45(0x15d)]+':\x20'+_0x27862b[_0x57fa45(0x257)]+'\x20('+config[_0x57fa45(0x1ff)]+')\x0a',_0x4faec4+=_0x27862b['rightTxt']+':\x20'+_0x27862b[_0x57fa45(0x1ca)]+'%\x20('+config['fiat']+')\x0a',_0x4faec4+='</pre>',process['send']({'telegrammsg':_0x4faec4},_0x5e7f02=>{});}async function sendPortfolioTelegram(){const _0x230d99=_0x2500ad;if(!coinsLoaded||!currentCoins[0x0][_0x230d99(0x24a)]){process[_0x230d99(0x212)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3800c7=>{});return;}let _0x59ae52='';if(config['showname'])_0x59ae52='<b>'+config['botname']+_0x230d99(0x1d3);else _0x59ae52=_0x230d99(0x1e8)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x59ae52+=_0x230d99(0x2e0),_0x59ae52+=_0x230d99(0x16c),_0x59ae52+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x59ae52+='-------------------------------\x0a',currentCoins[_0x230d99(0x1eb)](_0x132ffa=>{const _0x5d7088=_0x230d99;_0x59ae52+=_0x132ffa[_0x5d7088(0x2ff)][_0x5d7088(0x2a9)](0x7)+'|\x20'+formatPad(_0x132ffa['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x132ffa[_0x5d7088(0x151)],0x2,0x6)+'|\x20'+formatPad(_0x132ffa['delta']*0x64,0x2,0x6)+'\x0a';}),_0x59ae52+=_0x230d99(0x14e),process[_0x230d99(0x212)]({'telegrammsg':_0x59ae52},_0x6cc284=>{});}function formatPad(_0x996818,_0x364d61,_0x4a933d){const _0x3fa85f=_0x2500ad,_0x4328db=formatResultString(_0x996818,_0x364d61);return _0x4328db?_0x4328db[_0x3fa85f(0x193)](_0x4a933d):''['padStart'](_0x4a933d);}function logHistory(_0x165cec,_0x37c261,_0x58e576=''){const _0x1b010a=_0x2500ad;logger[_0x1b010a(0x289)](''+_0x37c261);let _0x65357d={'time':getTimeStamp(),'type':_0x165cec,'event':_0x37c261};dbLogs[_0x1b010a(0x2c5)](_0x1b010a(0x2af))[_0x1b010a(0x18d)](_0x65357d)[_0x1b010a(0x2d4)]();if(_0x58e576=='')_0x58e576=_0x37c261;proxyEmit(_0x1b010a(0x143),{'log':_0x65357d,'summary':_0x58e576}),process['send']({'telegram':{..._0x65357d,'botname':config[_0x1b010a(0x2db)],'showname':config[_0x1b010a(0x1a5)]}},_0x541399=>{});}function emitHistory(_0x4c0e4a={}){const _0x4889d2=_0x2500ad;Object['keys'](_0x4c0e4a)[_0x4889d2(0x1cd)]==0x0&&(_0x4c0e4a={'type':['order','event'],'event':'','page':0x1});if(_0x4c0e4a['type'][_0x4889d2(0x150)](_0x4889d2(0x143)))_0x4c0e4a[_0x4889d2(0x195)][_0x4889d2(0x24c)](_0x4c0e4a['type']['indexOf']('event'),0x1,'error',_0x4889d2(0x1c8),_0x4889d2(0x29c));if(dbLogs['has'](_0x4889d2(0x2af))[_0x4889d2(0x257)]()){let _0x4cb922=dbLogs['get'](_0x4889d2(0x2af))['filter'](_0x3ced1e=>{const _0x4e0697=_0x4889d2;if(_0x4c0e4a[_0x4e0697(0x195)]['length']==0x0)return![];else return _0x4c0e4a[_0x4e0697(0x195)][_0x4e0697(0x150)](_0x3ced1e[_0x4e0697(0x195)]);})[_0x4889d2(0x2ee)](_0x5889d7=>{const _0x36d316=_0x4889d2;if(_0x4c0e4a[_0x36d316(0x143)]=='')return!![];else return _0x5889d7[_0x36d316(0x143)]['toLowerCase']()['includes'](_0x4c0e4a['event'][_0x36d316(0x21f)]());})[_0x4889d2(0x299)](_0x4889d2(0x1f2)),_0x1b5b22=_0x4cb922[_0x4889d2(0x257)]()[_0x4889d2(0x1cd)];_0x4cb922=_0x4cb922['reverse']()['slice']((_0x4c0e4a[_0x4889d2(0x1ee)]-0x1)*logPageSize,_0x4c0e4a[_0x4889d2(0x1ee)]*logPageSize-0x1)[_0x4889d2(0x23c)]()[_0x4889d2(0x257)](),proxyEmit(_0x4889d2(0x25e),{'logs':_0x4cb922,'total':_0x1b5b22});}else proxyEmit(_0x4889d2(0x25e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x513ade){const _0x393bff=_0x2500ad;if(dbLogs['has'](_0x393bff(0x2af))[_0x393bff(0x257)]()){const _0x5a228c=dbLogs[_0x393bff(0x2c5)]('logs')[_0x393bff(0x299)](_0x393bff(0x1f2))[_0x393bff(0x2ee)](_0x2251d3=>{const _0x478ba8=_0x393bff;return _0x2251d3[_0x478ba8(0x195)]==_0x478ba8(0x17f);})['value']();dbLogs['get'](_0x393bff(0x2af))[_0x393bff(0x201)]()['write'](),dbLogs[_0x393bff(0x2c5)]('logs')[_0x393bff(0x1c5)](_0x5a228c)[_0x393bff(0x2d4)](),emitHistory(_0x513ade);}}async function pauseBot(_0x32be5c=pauseBotIntervalShort,_0x2bae25,_0x42ef41,_0x36a3b5=![]){const _0x488eda=_0x2500ad,_0x30eef2=new Date()[_0x488eda(0x206)]();if(!lastErrorShown||_0x30eef2-lastErrorShown>=_0x32be5c){lastErrorShown=_0x30eef2;if(!lastBotPause)lastBotPause=_0x30eef2,consecutivePauses=0x1;else{if(_0x30eef2-lastBotPause-_0x32be5c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x36a3b5){logHistory(_0x488eda(0x1a4),_0x2bae25+_0x488eda(0x247)),await killBot();return;}else logHistory(_0x488eda(0x1a4),_0x2bae25+pauseBotMsg),_0x32be5c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x30eef2;}_0x42ef41?logger[_0x488eda(0x1e5)]('('+consecutivePauses+')\x20'+_0x2bae25+'\x20>\x20details:',_0x42ef41):logger[_0x488eda(0x1e5)]('('+consecutivePauses+')\x20'+_0x2bae25);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x32be5c),botPaused=![],_0x32be5c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5b0e7e=_0x2500ad;botPaused=!![],await sleep(0x3e8),process[_0x5b0e7e(0x212)]({'stop':'kill'},_0x354056=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x456907,_0x4912a7){const _0xf9c44=_0x2500ad;if(botPaused)return;const _0x5e3d3e=config[_0xf9c44(0x174)]||_0xf9c44(0x1ab);if(_0x4912a7)logger[_0xf9c44(0x1e5)]('Exception\x20thrown\x20in\x20'+_0x4912a7);const _0x55138f=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x456907[_0xf9c44(0x2a2)]()[_0xf9c44(0x150)](_0xf9c44(0x256)))logHistory(_0xf9c44(0x1a4),_0x5e3d3e+_0xf9c44(0x292)),_0x55138f();else{if(_0x456907[_0xf9c44(0x2a2)]()[_0xf9c44(0x150)](_0xf9c44(0x1fd)))logHistory(_0xf9c44(0x1a4),_0x5e3d3e+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x55138f();else{if(_0x456907[_0xf9c44(0x2a2)]()[_0xf9c44(0x150)](_0xf9c44(0x198)))config[_0xf9c44(0x2fc)]?errormsg=_0x5e3d3e+_0xf9c44(0x2f6):errormsg=_0x5e3d3e+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0xf9c44(0x1a4),errormsg+_0xf9c44(0x246)),_0x55138f();else _0x456907[_0xf9c44(0x2a2)]()[_0xf9c44(0x150)](_0xf9c44(0x164))?(logHistory(_0xf9c44(0x1a4),_0x5e3d3e+_0xf9c44(0x17e)),_0x55138f()):await handleError(_0x456907,null);}}}async function handleError(_0x2647fa,_0x242736,_0xeb7c60=''){const _0x15175c=_0x2500ad;if(botPaused)return;let _0x599b5c;const _0x56a5c8=config[_0x15175c(0x174)]||_0x15175c(0x1ab);if(_0x242736)logger[_0x15175c(0x1e5)](_0x15175c(0x18f)+_0x242736);if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)]('DDoSProtection'))_0x599b5c=_0x56a5c8+_0x15175c(0x140),await pauseBot(undefined,_0x599b5c,_0x2647fa);else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)]('RateLimitExceeded'))_0x599b5c=_0x56a5c8+_0x15175c(0x248),await pauseBot(undefined,_0x599b5c,_0x2647fa);else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)](_0x15175c(0x28c))||_0x2647fa[_0x15175c(0x2a2)]()['includes'](_0x15175c(0x1aa)))_0x599b5c=_0x56a5c8+_0x15175c(0x2ca),await pauseBot(undefined,_0x599b5c,_0x2647fa[_0x15175c(0x2a2)]());else{if(_0x2647fa['toString']()['includes'](_0x15175c(0x26d)))_0x599b5c=_0x56a5c8+_0x15175c(0x1f7),await pauseBot(undefined,_0x599b5c,_0x2647fa[_0x15175c(0x2a2)]());else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x599b5c=_0x56a5c8+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x599b5c,_0x2647fa[_0x15175c(0x2a2)]());else{if(_0x2647fa['toString']()[_0x15175c(0x21f)]()[_0x15175c(0x150)](_0x15175c(0x2b6))||_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x21f)]()[_0x15175c(0x150)](_0x15175c(0x23d)))_0x599b5c=_0x15175c(0x22d),await pauseBot(undefined,_0x599b5c,_0x2647fa[_0x15175c(0x2a2)]());else{if(_0x2647fa['toString']()['includes'](_0x15175c(0x243)))_0x599b5c=_0x56a5c8+_0x15175c(0x274),await pauseBot(undefined,_0x599b5c,_0x2647fa[_0x15175c(0x2a2)]());else{if(_0x2647fa instanceof ccxt[_0x15175c(0x297)])_0x599b5c=_0x56a5c8+_0x15175c(0x1c1)+_0x2647fa[_0x15175c(0x2a2)](),logger[_0x15175c(0x1e5)](_0x15175c(0x15c),_0x2647fa),await pauseBot(undefined,_0x599b5c,_0x2647fa);else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)](_0x15175c(0x256)))logHistory('error',_0x56a5c8+_0x15175c(0x24b)),logHistory('error',_0x15175c(0x1d8)),await killBot();else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)](_0x15175c(0x1fd)))logHistory('error',_0x56a5c8+_0x15175c(0x14f)),logHistory('error',_0x15175c(0x1d8)),await killBot();else{if(_0x2647fa[_0x15175c(0x2a2)]()['includes'](_0x15175c(0x198))&&_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)](_0x15175c(0x240)))_0x599b5c=_0x56a5c8+_0x15175c(0x20e),await pauseBot(undefined,_0x599b5c,_0x2647fa,!![]);else{if(_0x2647fa['toString']()[_0x15175c(0x150)](_0x15175c(0x198)))config[_0x15175c(0x2fc)]?_0x599b5c=_0x56a5c8+_0x15175c(0x2f6):_0x599b5c=_0x56a5c8+_0x15175c(0x1a2),logHistory('error',_0x599b5c),logHistory(_0x15175c(0x1a4),_0x15175c(0x1d8)),await killBot();else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)](_0x15175c(0x164)))logHistory(_0x15175c(0x1a4),_0x56a5c8+_0x15175c(0x161)),logHistory(_0x15175c(0x1a4),_0x15175c(0x1d8)),await killBot();else{if(_0x2647fa[_0x15175c(0x2a2)]()[_0x15175c(0x150)]('InsufficientFunds'))logHistory(_0x15175c(0x1a4),_0x15175c(0x245)+_0xeb7c60),logger[_0x15175c(0x1e5)](_0x15175c(0x20f),_0x2647fa);else{if(_0x2647fa instanceof ccxt[_0x15175c(0x202)]){_0x599b5c=_0x56a5c8+_0x15175c(0x2ad)+_0x2647fa['toString'](),logHistory('error',_0x599b5c),logger['debug'](_0x15175c(0x157),_0x2647fa);if(_0xeb7c60)logger[_0x15175c(0x1e5)]('Symbol(s):\x20'+_0xeb7c60);await pauseBot(undefined,_0x599b5c,_0x2647fa);}else{_0x599b5c=_0x15175c(0x2e6)+_0x2647fa[_0x15175c(0x2a2)](),logHistory(_0x15175c(0x1a4),_0x599b5c),logger['debug'](_0x599b5c+_0x15175c(0x2f3),_0x2647fa);if(_0xeb7c60)logger[_0x15175c(0x1e5)](_0x15175c(0x2b5)+_0xeb7c60);await pauseBot(undefined,_0x599b5c);}}}}}}}}}}}}}}}}function decryptRSA(_0x351145,_0x8cfd45){const _0x506483=_0x2500ad,_0x2f6a9e=forge[_0x506483(0x1d9)][_0x506483(0x1f0)](_0x351145),_0x25c8ad=_0x2f6a9e[_0x506483(0x1d2)](forge[_0x506483(0x170)][_0x506483(0x2e7)](_0x8cfd45),_0x506483(0x186),{'md':forge['md'][_0x506483(0x2bc)]['create'](),'mgf1':{'md':forge['md']['sha256'][_0x506483(0x2d8)]()}});return _0x25c8ad;}async function withRetry(_0x2b6d7c,_0x1a938c){const _0x439971=_0x2500ad;let _0x56937d=![],_0x4cdbb0=0x0,_0x2bb1ea,_0x53db97;while(_0x4cdbb0<maxRetries){try{_0x2bb1ea=await _0x1a938c();break;}catch(_0x2835f4){_0x53db97=_0x2835f4,!_0x56937d?(_0x56937d=!![],logger[_0x439971(0x1e5)](_0x439971(0x160)+_0x2b6d7c+':',_0x2835f4[_0x439971(0x2a2)]())):await sleep(retryInterval);}_0x4cdbb0++;}if(_0x4cdbb0==0x0)return _0x2bb1ea;if(_0x4cdbb0>=maxRetries)throw _0x53db97;else return logger[_0x439971(0x1e5)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x4cdbb0+_0x439971(0x298)),_0x2bb1ea;}function formatResult(_0x4a5e04,_0x4b1bf8){const _0x12b915=_0x2500ad;return parseFloat(_0x4a5e04[_0x12b915(0x1ed)](_0x4b1bf8));}function formatResultTruncate(_0x124ad8,_0x349736){const _0x3b8e63=_0x2500ad;let _0x26fe77=formatResultString(_0x124ad8,0xa),_0x39120c=_0x26fe77[_0x3b8e63(0x1fe)]('.');return _0x39120c!=-0x1&&(_0x26fe77=_0x26fe77[_0x3b8e63(0x2a4)](0x0,_0x39120c+_0x349736+0x1)),Number(_0x26fe77);}function formatResultString(_0x18caa6,_0xa7913f){const _0x22f3c0=_0x2500ad;let _0x324f38;if(!(''+_0x18caa6)[_0x22f3c0(0x150)]('e'))_0x324f38=+(Math['round'](_0x18caa6+'e+'+_0xa7913f)+'e-'+_0xa7913f);else{let _0x3915b7=(''+_0x18caa6)[_0x22f3c0(0x162)]('e'),_0x11b448='';+_0x3915b7[0x1]+_0xa7913f>0x0&&(_0x11b448='+'),_0x324f38=+(Math[_0x22f3c0(0x1cb)](+_0x3915b7[0x0]+'e'+_0x11b448+(+_0x3915b7[0x1]+_0xa7913f))+'e-'+_0xa7913f);}return Number(_0x324f38)[_0x22f3c0(0x1ed)](_0xa7913f);}function getServerTime(){const _0x5cd555=_0x2500ad,_0x3090a3=new Date();return _0x3090a3[_0x5cd555(0x261)]()+'/'+(_0x3090a3[_0x5cd555(0x2fd)]()+0x1)[_0x5cd555(0x2a2)]()[_0x5cd555(0x193)](0x2,'0')+'/'+_0x3090a3[_0x5cd555(0x1e0)]()[_0x5cd555(0x2a2)]()[_0x5cd555(0x193)](0x2,'0')+'\x20'+_0x3090a3[_0x5cd555(0x1d6)]()['toString']()[_0x5cd555(0x193)](0x2,'0')+':'+_0x3090a3[_0x5cd555(0x153)]()[_0x5cd555(0x2a2)]()[_0x5cd555(0x193)](0x2,'0')+':'+_0x3090a3[_0x5cd555(0x285)]()[_0x5cd555(0x2a2)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3785dd=_0x2500ad,_0x187f1a=shiftedTime();return _0x187f1a['getFullYear']()+'/'+(_0x187f1a[_0x3785dd(0x2fd)]()+0x1)[_0x3785dd(0x2a2)]()[_0x3785dd(0x193)](0x2,'0')+'/'+_0x187f1a[_0x3785dd(0x1e0)]()[_0x3785dd(0x2a2)]()[_0x3785dd(0x193)](0x2,'0')+'\x20'+_0x187f1a[_0x3785dd(0x1d6)]()[_0x3785dd(0x2a2)]()[_0x3785dd(0x193)](0x2,'0')+':'+_0x187f1a[_0x3785dd(0x153)]()['toString']()[_0x3785dd(0x193)](0x2,'0')+':'+_0x187f1a[_0x3785dd(0x285)]()[_0x3785dd(0x2a2)]()[_0x3785dd(0x193)](0x2,'0');}function getDate(){const _0xbf7053=_0x2500ad,_0x7c7306=shiftedTime();return _0x7c7306['getFullYear']()+'/'+(_0x7c7306[_0xbf7053(0x2fd)]()+0x1)[_0xbf7053(0x2a2)]()[_0xbf7053(0x193)](0x2,'0')+'/'+_0x7c7306[_0xbf7053(0x1e0)]()[_0xbf7053(0x2a2)]()[_0xbf7053(0x193)](0x2,'0');}function getHour(){const _0x192713=_0x2500ad,_0x172f7a=shiftedTime();return _0x172f7a['getHours']()[_0x192713(0x2a2)]()[_0x192713(0x193)](0x2,'0');}function sleep(_0x73b96e){return new Promise(_0x33ee6d=>setTimeout(_0x33ee6d,_0x73b96e));}function shiftedTime(){const _0x49d170=_0x2500ad,_0x724b24=new Date();let _0x409827=_0x724b24;if(config&&config[_0x49d170(0x1dc)]!==0x0)_0x409827=fns[_0x49d170(0x2b0)](_0x724b24,{'hours':config['timeshift']});return _0x409827;}function timer(_0x21b2e2){const _0x33d835=_0x2500ad,_0x197dcd=new Date();!lasttime?console[_0x33d835(0x244)](getTimeStamp()+':\x20timer\x20>',_0x21b2e2,_0x197dcd):console[_0x33d835(0x244)](getTimeStamp()+':\x20timer\x20>',_0x21b2e2,(_0x197dcd-lasttime)/0x3e8),lasttime=_0x197dcd;}