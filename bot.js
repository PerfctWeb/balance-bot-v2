const _0x1cff31=_0x3623;(function(_0x46469f,_0x3a5c62){const _0x5962c5=_0x3623,_0x14ce85=_0x46469f();while(!![]){try{const _0x1f991d=parseInt(_0x5962c5(0x20f))/0x1*(parseInt(_0x5962c5(0x265))/0x2)+-parseInt(_0x5962c5(0x268))/0x3*(parseInt(_0x5962c5(0x250))/0x4)+parseInt(_0x5962c5(0x258))/0x5+-parseInt(_0x5962c5(0x213))/0x6+-parseInt(_0x5962c5(0x243))/0x7+-parseInt(_0x5962c5(0x261))/0x8+parseInt(_0x5962c5(0x223))/0x9;if(_0x1f991d===_0x3a5c62)break;else _0x14ce85['push'](_0x14ce85['shift']());}catch(_0x527daa){_0x14ce85['push'](_0x14ce85['shift']());}}}(_0x46e0,0xae7f2));const _0x557b44=function(){let _0x2555c5=!![];return function(_0x689a6c,_0x2f9749){const _0x3c7e41=_0x2555c5?function(){const _0x1152ce=_0x3623;if(_0x2f9749){const _0xc7cf59=_0x2f9749[_0x1152ce(0x20e)](_0x689a6c,arguments);return _0x2f9749=null,_0xc7cf59;}}:function(){};return _0x2555c5=![],_0x3c7e41;};}(),_0x35cc0f=_0x557b44(this,function(){const _0x8cf5df=_0x3623;return _0x35cc0f[_0x8cf5df(0x1d5)]()[_0x8cf5df(0x257)](_0x8cf5df(0x1fa))[_0x8cf5df(0x1d5)]()[_0x8cf5df(0x2a3)](_0x35cc0f)[_0x8cf5df(0x257)](_0x8cf5df(0x1fa));});_0x35cc0f();'use strict';const ccxt=require(_0x1cff31(0x1b4)),low=require('lowdb'),FileSync=require(_0x1cff31(0x1bf)),fs=require('fs'),fns=require(_0x1cff31(0x23c)),{WebsocketClient,DefaultLogger}=require(_0x1cff31(0x299)),Crypt=require('hybrid-crypto-js')[_0x1cff31(0x1ff)];let exchange,wsClient;global[_0x1cff31(0x271)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x1cff31(0x2a1)],botID=process[_0x1cff31(0x292)][0x2]||_0x1cff31(0x221),pattern=/^[0-9]{3}$/;if(!pattern[_0x1cff31(0x25d)](botID))return console[_0x1cff31(0x1cd)](_0x1cff31(0x1c2)+botID+_0x1cff31(0x2a6)),process[_0x1cff31(0x224)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x1cff31(0x1fb)+userID+'/':'./config/';!fs[_0x1cff31(0x282)](configpath)&&fs[_0x1cff31(0x267)](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x1cff31(0x25a)+botID+_0x1cff31(0x1ec),performancefile=configpath+_0x1cff31(0x25a)+botID+_0x1cff31(0x1f8),coinresultsfile=configpath+'bot-'+botID+_0x1cff31(0x233),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x1cff31(0x269),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1cff31(0x218)]({'logs':[]})[_0x1cff31(0x2b7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1cff31(0x218)]({'data':[]})[_0x1cff31(0x2b7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1cff31(0x218)]({'bot':[]})[_0x1cff31(0x2b7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1cff31(0x218)]({'coins':[]})[_0x1cff31(0x2b7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x1cff31(0x210)},'usd':{'coin':_0x1cff31(0x293),'symbol':_0x1cff31(0x289)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3d3a4e)=>{},'debug':(..._0x4988bc)=>{},'notice':(..._0x40ced8)=>{},'info':(..._0x53ed7d)=>{},'warning':(..._0x29e462)=>{},'error':async function(..._0xbe1738){const _0x4fdcc2=_0x1cff31,_0x28b820=new Date()['getTime']();if(!lastErrorShown||_0x28b820-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x4fdcc2(0x28d)](),logHistory('error','WebSockets('+consecutivePauses+_0x4fdcc2(0x1fe));let _0x265c90='';if(_0xbe1738[0x0])_0x265c90+=_0xbe1738[0x0];if(_0xbe1738[0x1]&&_0xbe1738[0x1][_0x4fdcc2(0x29f)]&&_0xbe1738[0x1][_0x4fdcc2(0x29f)]['message'])_0x265c90+=_0x4fdcc2(0x207)+_0xbe1738[0x1][_0x4fdcc2(0x29f)][_0x4fdcc2(0x2b1)];logging('WebSockets('+consecutivePauses+_0x4fdcc2(0x234),''+_0x265c90),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1cff31(0x1f6),'rsaStandard':_0x1cff31(0x26d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1cff31(0x2a9)]!=config[_0x1cff31(0x2a9)]&&updateTimeshift(settings[_0x1cff31(0x2a9)]);process[_0x1cff31(0x28c)]({'started':_0x1cff31(0x27f)},_0xe9c607=>{}),initializeProcessListeners();function proxyEmit(_0x1891d8,_0x15c213=null){const _0x1e89dd=_0x1cff31;process[_0x1e89dd(0x28c)]({'function':_0x1891d8,'args':_0x15c213},_0xabc6f4=>{});}function initializeProcessListeners(){const _0x369363=_0x1cff31;process['on'](_0x369363(0x2b1),_0x4e5b6a=>{const _0x2b7d29=_0x369363;switch(Object['keys'](_0x4e5b6a)[0x0]){case _0x2b7d29(0x2a9):_0x4e5b6a['timeshift']!=undefined&&(settings[_0x2b7d29(0x2a9)]=_0x4e5b6a[_0x2b7d29(0x2a9)],updateTimeshift(settings[_0x2b7d29(0x2a9)]));break;case _0x2b7d29(0x1e5):switch(_0x4e5b6a[_0x2b7d29(0x1e5)]){case _0x2b7d29(0x272):initclient();break;case _0x2b7d29(0x1d8):emitHistory(_0x4e5b6a[_0x2b7d29(0x28b)]);break;case'getPortfolio':getPortfolio(_0x4e5b6a[_0x2b7d29(0x28b)]);break;case _0x2b7d29(0x252):storeConfiguration(_0x4e5b6a[_0x2b7d29(0x28b)]);break;case _0x2b7d29(0x280):storeHeadless(_0x4e5b6a[_0x2b7d29(0x28b)]);break;case _0x2b7d29(0x22f):getStartingBalances();break;case _0x2b7d29(0x1e0):placeOrder(_0x4e5b6a[_0x2b7d29(0x28b)]);break;case _0x2b7d29(0x1b6):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x4e3ddd=_0x1cff31;if(pidBalances)clearTimeout(pidBalances);if(config[_0x4e3ddd(0x276)]!=''){await initExchange(config[_0x4e3ddd(0x276)],config[_0x4e3ddd(0x245)]);let _0x13f5a4=await loadSymbols();_0x13f5a4&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1ccf2c,_0x11ada3){const _0x296dd4=_0x1cff31,_0x23222c=ccxt[config['exchange']];let _0x380214;switch(config['exchange']){case _0x296dd4(0x299):_0x380214='wss://stream.binance.com:9443';break;case _0x296dd4(0x296):_0x380214='wss://stream.binance.us:9443';break;default:_0x380214=_0x296dd4(0x208);}exchange=new _0x23222c({'apiKey':_0x1ccf2c,'secret':_0x11ada3,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1ccf2c,'api_secret':_0x11ada3,'beautify':!![],'wsUrl':_0x380214},logger),config[_0x296dd4(0x24e)]==_0x296dd4(0x296)&&(stablecoins={'eur':{'coin':_0x296dd4(0x244),'symbol':_0x296dd4(0x1d4)},'usd':{'coin':_0x296dd4(0x293),'symbol':_0x296dd4(0x289)}});}async function loadSymbols(){const _0x544c45=_0x1cff31;let _0x3bc797;try{markets=await exchange[_0x544c45(0x253)]();const _0x298d52=['DAI/',_0x544c45(0x26b),_0x544c45(0x1ad)];allSymbols=exchange[_0x544c45(0x1ee)][_0x544c45(0x20a)](_0x7c0b73=>{const _0x5a7bf7=_0x544c45;let _0x26dd76=![];return _0x298d52[_0x5a7bf7(0x1cb)](_0x240d10=>{const _0x43199e=_0x5a7bf7;if(_0x7c0b73[_0x43199e(0x214)](_0x240d10))_0x26dd76=!![];}),!_0x26dd76;}),_0x3bc797=!![];}catch(_0x3e492e){await handleError(_0x3e492e,_0x544c45(0x1b7)),_0x3bc797=![];}return _0x3bc797;}async function initbot(){const _0x155fee=_0x1cff31;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x376448=dbCoinResults[_0x155fee(0x297)](_0x155fee(0x281))['value']();if(_0x376448[_0x155fee(0x286)]==0x0)await resetCoinResults();}function _0x3623(_0x4830d0,_0x4c07f6){const _0x7b959d=_0x46e0();return _0x3623=function(_0x35cc0f,_0x557b44){_0x35cc0f=_0x35cc0f-0x1ac;let _0x46e036=_0x7b959d[_0x35cc0f];return _0x46e036;},_0x3623(_0x4830d0,_0x4c07f6);}async function initclient(){const _0x5e4ac9=_0x1cff31;proxyEmit(_0x5e4ac9(0x24b),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5c71a2=_0x1cff31;wsinitialized=![];ws1&&(ws1[_0x5c71a2(0x1cb)](_0x3f180c=>{try{wsClient['closeWs'](_0x3f180c);}catch(_0x3f4236){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x8ea020){}ws2=null;}}async function initws(){const _0x27b539=_0x1cff31;cleanws();let _0x4c74a6=[];currentCoins[_0x27b539(0x1cb)](_0x443bde=>{const _0x4089e2=_0x27b539;if(_0x443bde[_0x4089e2(0x1f4)]!=config[_0x4089e2(0x279)])_0x4c74a6[_0x4089e2(0x1af)](noslash(_0x443bde[_0x4089e2(0x1e9)]));});if(!_0x4c74a6[_0x27b539(0x214)](stablecoins[_0x27b539(0x1dc)]['coin']))_0x4c74a6['push'](stablecoins[_0x27b539(0x1dc)][_0x27b539(0x1f4)]);if(!_0x4c74a6['includes'](stablecoins[_0x27b539(0x21f)][_0x27b539(0x1f4)]))_0x4c74a6[_0x27b539(0x1af)](stablecoins[_0x27b539(0x21f)][_0x27b539(0x1f4)]);if(!_0x4c74a6[_0x27b539(0x214)](_0x27b539(0x259)+config[_0x27b539(0x279)]))_0x4c74a6[_0x27b539(0x1af)](_0x27b539(0x259)+config[_0x27b539(0x279)]);try{_0x4c74a6[_0x27b539(0x1cb)]((_0xd6a650,_0x2abe92)=>{const _0x3e3d7a=_0x27b539;ws1[_0x2abe92]=wsClient[_0x3e3d7a(0x29a)](_0xd6a650,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x27b539(0x24a),_0x30b127=>{const _0x1cac41=_0x27b539;if(!Array[_0x1cac41(0x1ca)](_0x30b127)&&!_0x30b127[_0x1cac41(0x1d0)][_0x1cac41(0x214)](_0x1cac41(0x246))){if(_0x30b127['eventType']===_0x1cac41(0x1ba)){global['ticker'][_0x30b127['kline'][_0x1cac41(0x1e9)]]=_0x30b127[_0x1cac41(0x1ba)][_0x1cac41(0x217)];return;}}else{if(!Array[_0x1cac41(0x1ca)](_0x30b127)&&_0x30b127['wsKey']['includes']('userData')){if(_0x30b127[_0x1cac41(0x23f)][_0x1cac41(0x214)]('spot')){updateNumberCoins(_0x30b127);return;}}}}),wsClient['on'](_0x27b539(0x21e),async _0x52fc73=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x604599){await handleError(_0x604599,'initws()');}let _0x45c2f8,_0x1ff0b0=0x0;loading[_0x27b539(0x204)]=[];let _0x268c6e=0x0;currentCoins['forEach'](_0x2f1326=>{const _0x4a8e2e=_0x27b539;if(_0x2f1326[_0x4a8e2e(0x1f4)]!=config['basecoin'])loading[_0x4a8e2e(0x204)][_0x4a8e2e(0x1af)](_0x2f1326[_0x4a8e2e(0x1e9)]);}),loadingCanceled=![];while(_0x45c2f8!=currentCoins[_0x27b539(0x286)]-0x1){_0x45c2f8=0x0,currentCoins[_0x27b539(0x1cb)](_0x44ee1d=>{const _0x4ba2f1=_0x27b539;_0x44ee1d[_0x4ba2f1(0x1f4)]!=config[_0x4ba2f1(0x279)]&&global['ticker'][noslash(_0x44ee1d['symbol'])]&&(loading[_0x4ba2f1(0x204)]=loading['remainingSymbols']['filter'](_0x442711=>_0x442711!=_0x44ee1d[_0x4ba2f1(0x1e9)]),_0x45c2f8++);}),loading[_0x27b539(0x295)]=Math[_0x27b539(0x1b2)](_0x45c2f8/(currentCoins['length']-0x1)*0x64);_0x268c6e>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x27b539(0x1c5)]=!![],emitLoadingProgress();break;}else _0x45c2f8!=_0x1ff0b0&&(_0x1ff0b0=_0x45c2f8,emitLoadingProgress()),_0x268c6e++,await sleep(0xc8);}if(_0x45c2f8==currentCoins[_0x27b539(0x286)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x568b1b=_0x1cff31;let _0xfec164=0x0,_0x20e01b=0x0;try{_0xfec164=global[_0x568b1b(0x271)][stablecoins[_0x568b1b(0x1dc)][_0x568b1b(0x1f4)]],_0x20e01b=global['ticker'][stablecoins[_0x568b1b(0x21f)][_0x568b1b(0x1f4)]];}catch(_0x181616){await handleError(_0x181616,_0x568b1b(0x24d));}return{'eur':Number(_0xfec164),'usd':Number(_0x20e01b)};}async function setStartDatePerformance(_0x14c508){const _0x14ed50=_0x1cff31,_0x4393fb=fns[_0x14ed50(0x260)](new Date(_0x14c508[_0x14ed50(0x263)]),_0x14ed50(0x1e7));let _0x2099fc=[];_0x2099fc[stablecoins[_0x14ed50(0x1dc)][_0x14ed50(0x1f4)]]=await getCloses(stablecoins[_0x14ed50(0x1dc)]['symbol'],new Date(_0x14c508[_0x14ed50(0x263)]),0x1),_0x2099fc[stablecoins[_0x14ed50(0x21f)][_0x14ed50(0x1f4)]]=await getCloses(stablecoins['usd']['symbol'],new Date(_0x14c508[_0x14ed50(0x263)]),0x1);let _0x324de3,_0x21b6fd=[];_0x14c508[_0x14ed50(0x1c0)][_0x14ed50(0x1cb)](_0x468085=>{const _0x547ec6=_0x14ed50;!_0x468085['excluded']&&_0x21b6fd[_0x547ec6(0x1af)]({'coin':_0x468085[_0x547ec6(0x1f4)],'number':_0x468085[_0x547ec6(0x298)],'price':_0x468085['startprice']});}),_0x324de3={'date':_0x4393fb,'eur':_0x2099fc[stablecoins['eur'][_0x14ed50(0x1f4)]][0x0],'usd':_0x2099fc[stablecoins['usd'][_0x14ed50(0x1f4)]][0x0],'coins':_0x21b6fd};let _0x1309e4=dbPerformance[_0x14ed50(0x297)](_0x14ed50(0x1e4))['find']({'date':_0x4393fb})['value']();_0x1309e4?dbPerformance[_0x14ed50(0x297)](_0x14ed50(0x1e4))['find']({'date':_0x4393fb})[_0x14ed50(0x236)](_0x324de3)['write']():dbPerformance[_0x14ed50(0x297)](_0x14ed50(0x1e4))[_0x14ed50(0x1af)](_0x324de3)[_0x14ed50(0x2b7)](),_0x1309e4=dbPerformance[_0x14ed50(0x297)]('data')[_0x14ed50(0x229)](_0x14ed50(0x1dd))[_0x14ed50(0x235)](),_0x1309e4[_0x14ed50(0x1cb)](_0x14e824=>{const _0x30c9df=_0x14ed50;_0x14e824[_0x30c9df(0x1dd)]<_0x4393fb&&dbPerformance[_0x30c9df(0x297)](_0x30c9df(0x1e4))[_0x30c9df(0x1fd)]({'date':_0x14e824[_0x30c9df(0x1dd)]})[_0x30c9df(0x2b7)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x69472d){const _0x293a8c=_0x1cff31;let _0x10fba0,_0x21d78a=[];logHistory(_0x293a8c(0x1c7),_0x293a8c(0x249)),_0x69472d[_0x293a8c(0x1c0)][_0x293a8c(0x1cb)](_0x490289=>{const _0x26a873=_0x293a8c;if(_0x490289[_0x26a873(0x1f4)]!=config[_0x26a873(0x279)]&&!_0x490289['excluded'])_0x21d78a['push']({'coin':_0x490289[_0x26a873(0x1f4)],'symbol':_0x490289[_0x26a873(0x1e9)]});});let _0x6b709a=[];try{const _0x5cc7f1=fns[_0x293a8c(0x260)](fns[_0x293a8c(0x1ce)](_0x69472d[_0x293a8c(0x263)]['replace'](/\//g,'-')),_0x293a8c(0x1f0));for(const _0x26a728 of _0x21d78a){if(_0x26a728[_0x293a8c(0x1f4)]!=config[_0x293a8c(0x279)])_0x10fba0=await exchange['fetchOrders'](_0x26a728[_0x293a8c(0x1e9)],Date['parse'](_0x5cc7f1));_0x10fba0[_0x293a8c(0x1cb)](_0x4b0798=>{const _0x47c85c=_0x293a8c,_0x36b428=_0x26a728['symbol'][_0x47c85c(0x214)](config[_0x47c85c(0x279)]+'/'),_0x4f7a7c=fns[_0x47c85c(0x260)](fns[_0x47c85c(0x1ce)](_0x4b0798['datetime']),_0x47c85c(0x20b)),_0xb6ce43=fns[_0x47c85c(0x260)](fns[_0x47c85c(0x1ce)](_0x4b0798[_0x47c85c(0x22b)]),'yyyy/MM/dd');let _0x3e714b;if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x2ac)&&_0x36b428==![])_0x3e714b=_0x4b0798[_0x47c85c(0x255)];if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x2ac)&&_0x36b428==!![])_0x3e714b=-_0x4b0798['amount']*_0x4b0798[_0x47c85c(0x21c)];if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x1bb)&&_0x36b428==![])_0x3e714b=-_0x4b0798['amount'];if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x1bb)&&_0x36b428==!![])_0x3e714b=_0x4b0798[_0x47c85c(0x255)]*_0x4b0798[_0x47c85c(0x21c)];_0x6b709a['push']({'timestamp':_0x4f7a7c,'date':_0xb6ce43,'coin':_0x26a728[_0x47c85c(0x1f4)],'symbol':_0x26a728[_0x47c85c(0x1e9)],'type':_0x4b0798[_0x47c85c(0x288)],'side':_0x4b0798['side'],'reverse':_0x36b428,'amount':formatResult(_0x4b0798[_0x47c85c(0x27a)],0x8),'filled':formatResult(_0x4b0798[_0x47c85c(0x27a)],0x8),'coinamount':formatResult(_0x3e714b,0x8),'price':formatResult(_0x4b0798[_0x47c85c(0x21c)],0x8)});let _0x366dab;if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x2ac)&&_0x36b428==![])_0x366dab=-_0x4b0798[_0x47c85c(0x255)]*_0x4b0798[_0x47c85c(0x21c)];if(_0x4b0798[_0x47c85c(0x2b2)]==_0x47c85c(0x2ac)&&_0x36b428==!![])_0x366dab=_0x4b0798[_0x47c85c(0x255)];if(_0x4b0798[_0x47c85c(0x2b2)]=='sell'&&_0x36b428==![])_0x366dab=_0x4b0798[_0x47c85c(0x255)]*_0x4b0798[_0x47c85c(0x21c)];if(_0x4b0798[_0x47c85c(0x2b2)]=='sell'&&_0x36b428==!![])_0x366dab=-_0x4b0798[_0x47c85c(0x255)];_0x6b709a['push']({'date':_0xb6ce43,'coin':config[_0x47c85c(0x279)],'coinamount':formatResult(_0x366dab,0x8)});});}_0x6b709a[_0x293a8c(0x1be)]((_0x5e2215,_0x1ffa55)=>_0x5e2215['timestamp']>_0x1ffa55[_0x293a8c(0x270)]?0x1:_0x1ffa55['timestamp']>_0x5e2215[_0x293a8c(0x270)]?-0x1:0x0),dbLogs[_0x293a8c(0x297)](_0x293a8c(0x23e))[_0x293a8c(0x1fd)]()['write'](),_0x6b709a['forEach'](_0x271653=>{const _0x2d8cc8=_0x293a8c;let _0x111072;_0x271653['coin']!=config[_0x2d8cc8(0x279)]&&(_0x111072={'time':_0x271653[_0x2d8cc8(0x270)],'type':_0x2d8cc8(0x241),'event':_0x2d8cc8(0x23d)+_0x271653[_0x2d8cc8(0x1e9)]+'\x20'+_0x271653[_0x2d8cc8(0x2b2)]+'\x20#'+_0x271653[_0x2d8cc8(0x255)]+'\x20@'+_0x271653['price']},dbLogs['get']('logs')[_0x2d8cc8(0x1af)](_0x111072)[_0x2d8cc8(0x2b7)]());});const _0x27a7d1=fns['eachDayOfInterval']({'start':new Date(_0x69472d[_0x293a8c(0x263)]),'end':new Date()})['map'](_0x5cb78e=>fns[_0x293a8c(0x260)](_0x5cb78e,_0x293a8c(0x1e7)));let _0x49ecf5=[];_0x69472d[_0x293a8c(0x1c0)][_0x293a8c(0x1cb)](_0x505d56=>{const _0x27afa2=_0x293a8c;if(!_0x505d56[_0x27afa2(0x220)]){_0x49ecf5[_0x505d56['coin']]=[];let _0x4ba9fe=_0x505d56[_0x27afa2(0x298)];_0x27a7d1['forEach']((_0x3f0cbc,_0x4a28ad)=>{const _0x208cb5=_0x27afa2;let _0x10357e=_0x6b709a[_0x208cb5(0x20a)](_0x52f336=>_0x52f336[_0x208cb5(0x1f4)]==_0x505d56[_0x208cb5(0x1f4)]&&_0x52f336['date']==_0x3f0cbc);if(_0x10357e[_0x208cb5(0x286)]!=0x0){let _0x3ab662=_0x10357e[_0x208cb5(0x2ad)]((_0x2e1c1a,_0x1f2a15)=>{const _0x35a3d3=_0x208cb5;return _0x2e1c1a+=_0x1f2a15[_0x35a3d3(0x294)],_0x2e1c1a;},0x0);_0x4ba9fe+=_0x3ab662;}_0x49ecf5[_0x505d56[_0x208cb5(0x1f4)]][_0x3f0cbc]=_0x4ba9fe;});}});const _0x337e34=[..._0x21d78a];_0x337e34[_0x293a8c(0x1af)]({'coin':stablecoins[_0x293a8c(0x1dc)][_0x293a8c(0x1f4)],'symbol':stablecoins[_0x293a8c(0x1dc)][_0x293a8c(0x1e9)]}),_0x337e34[_0x293a8c(0x1af)]({'coin':stablecoins['usd']['coin'],'symbol':stablecoins['usd']['symbol']});let _0x47774b=[];for(const _0x5d6041 of _0x337e34){_0x47774b[_0x5d6041['coin']]=await getCloses(_0x5d6041[_0x293a8c(0x1e9)],new Date(_0x69472d[_0x293a8c(0x263)]));}dbPerformance['get'](_0x293a8c(0x1e4))[_0x293a8c(0x1fd)]()[_0x293a8c(0x2b7)](),_0x27a7d1['forEach']((_0x8d155f,_0x5d0026)=>{const _0x37b527=_0x293a8c;let _0x22c834,_0x3c6b84=[];_0x5d0026==0x0?(_0x69472d['portfolio'][_0x37b527(0x1cb)](_0xc0cb17=>{const _0x4f0d17=_0x37b527;!_0xc0cb17[_0x4f0d17(0x220)]&&_0x3c6b84['push']({'coin':_0xc0cb17[_0x4f0d17(0x1f4)],'number':_0xc0cb17[_0x4f0d17(0x298)],'price':_0xc0cb17[_0x4f0d17(0x226)]});}),_0x22c834={'date':_0x8d155f,'eur':_0x47774b[stablecoins[_0x37b527(0x1dc)][_0x37b527(0x1f4)]][_0x5d0026],'usd':_0x47774b[stablecoins[_0x37b527(0x21f)]['coin']][_0x5d0026],'coins':_0x3c6b84}):(_0x69472d['portfolio'][_0x37b527(0x1cb)](_0x50232d=>{const _0x65d1ab=_0x37b527;!_0x50232d[_0x65d1ab(0x220)]&&_0x3c6b84['push']({'coin':_0x50232d[_0x65d1ab(0x1f4)],'number':_0x49ecf5[_0x50232d['coin']][_0x8d155f],'price':_0x50232d[_0x65d1ab(0x1f4)]==config[_0x65d1ab(0x279)]?0x1:_0x47774b[_0x50232d['coin']][_0x5d0026]});}),_0x22c834={'date':_0x8d155f,'eur':_0x47774b[stablecoins['eur'][_0x37b527(0x1f4)]][_0x5d0026],'usd':_0x47774b[stablecoins[_0x37b527(0x21f)]['coin']][_0x5d0026],'coins':_0x3c6b84}),dbPerformance['get'](_0x37b527(0x1e4))[_0x37b527(0x1af)](_0x22c834)[_0x37b527(0x2b7)]();}),emitPerformance(),await resetCoinResults();for(let _0x5c09c5 of _0x6b709a){_0x5c09c5[_0x293a8c(0x1f4)]!=config['basecoin']&&await updateCoinResults(_0x5c09c5);}logHistory('success',_0x293a8c(0x232));}catch(_0x56e9a4){await handleError(_0x56e9a4,_0x293a8c(0x248));}}async function getCloses(_0x21acad,_0x2461e2,_0x241fd5=undefined){const _0x3cac89=_0x1cff31,_0x3e7c04='1d';let _0x3db551,_0x336a2c;const _0x368639=fns[_0x3cac89(0x230)](new Date(),_0x2461e2)+0x1;try{const _0x92448a=exchange[_0x3cac89(0x264)]()-_0x368639*0x18*0xe10*0x3e8;_0x3db551=await exchange[_0x3cac89(0x211)](_0x21acad,_0x3e7c04,_0x92448a,_0x241fd5),_0x336a2c=await exchange[_0x3cac89(0x1b9)](_0x21acad);}catch(_0x48ad08){await handleError(_0x48ad08,'getCloses()');}let _0x15c4d7=ohlcvToCloses(_0x3db551);return _0x15c4d7['push'](_0x336a2c[_0x21acad]['last']),_0x15c4d7;}function ohlcvToCloses(_0x26d4a6){let _0xf49e88=[];return _0x26d4a6['forEach'](function(_0xd066ab){const _0x4c93b9=_0x3623;_0xf49e88[_0x4c93b9(0x1af)](_0xd066ab[0x4]);}),_0xf49e88;}function getConfiguration(_0x5e3252){const _0xf65a31=_0x1cff31;let _0x444245=dbConfig['get']('bot')[_0xf65a31(0x242)]({'botID':_0x5e3252})[_0xf65a31(0x235)]();if(_0x444245){let _0x6f51ef=![];!_0x444245[_0xf65a31(0x24e)]&&(_0x444245={..._0x444245,'exchange':_0xf65a31(0x299)},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x279)]&&(_0x444245={..._0x444245,'basecoin':_0xf65a31(0x1d7)},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x2b6)]&&(_0x444245={..._0x444245,'ordertype':'market'},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x205)]&&(_0x444245={..._0x444245,'timeout':0x14},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x1eb)]&&(_0x444245={..._0x444245,'emojibuy':''},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x284)]&&(_0x444245={..._0x444245,'emojisell':''},_0x6f51ef=!![]),!_0x444245[_0xf65a31(0x26a)]&&(_0x444245={..._0x444245,'showname':![]},_0x6f51ef=!![]),_0x6f51ef&&(_0x444245={'botID':_0x444245[_0xf65a31(0x1d3)],'exchange':_0x444245[_0xf65a31(0x24e)],'apiKey':_0x444245['apiKey'],'apiSecret':_0x444245[_0xf65a31(0x245)],'basecoin':_0x444245['basecoin'],'botname':_0x444245[_0xf65a31(0x2a5)],'showname':_0x444245[_0xf65a31(0x26a)],'threshold':_0x444245[_0xf65a31(0x240)],'ordertype':_0x444245[_0xf65a31(0x2b6)],'timeout':_0x444245[_0xf65a31(0x205)],'startdate':_0x444245[_0xf65a31(0x263)],'recreate':_0x444245['recreate'],'timeshift':_0x444245['timeshift'],'headless':_0x444245[_0xf65a31(0x227)],'cooldown':_0x444245[_0xf65a31(0x222)],'emojibuy':_0x444245[_0xf65a31(0x1eb)],'emojisell':_0x444245['emojisell'],'portfolio':_0x444245[_0xf65a31(0x1c0)]},dbConfig['get']('bot')[_0xf65a31(0x1fd)]()[_0xf65a31(0x2b7)](),dbConfig['get']('bot')['push'](_0x444245)['write']());}else _0x444245={'botID':_0x5e3252,'exchange':_0xf65a31(0x299),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xf65a31(0x1da)+_0x5e3252,'showname':![],'threshold':'3','ordertype':_0xf65a31(0x24f),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xf65a31(0x2a9)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x444245;}function emittedConfiguration(){const _0x2d4379=_0x1cff31;let _0x472691;return config[_0x2d4379(0x276)]==''?_0x472691=config:_0x472691={...config,'apiKey':'************','apiSecret':_0x2d4379(0x277)},_0x472691;}function getSettings(){const _0x210b04=_0x1cff31;return dbSettings[_0x210b04(0x297)](_0x210b04(0x275))[_0x210b04(0x235)]();}function getSecure(){const _0x40c774=_0x1cff31;return dbSecure[_0x40c774(0x297)](_0x40c774(0x1c4))[_0x40c774(0x235)]()||{};}function updateTimeshift(_0x161dd9){const _0x92d5a7=_0x1cff31;let _0x24a06a=dbConfig['get'](_0x92d5a7(0x22a))['find']({'botID':botID})[_0x92d5a7(0x235)]();_0x24a06a&&dbConfig[_0x92d5a7(0x297)](_0x92d5a7(0x22a))[_0x92d5a7(0x242)]({'botID':botID})['assign']({'timeshift':_0x161dd9})[_0x92d5a7(0x2b7)](),config[_0x92d5a7(0x2a9)]=_0x161dd9,proxyEmit(_0x92d5a7(0x24b),emittedConfiguration());}async function storeConfiguration(_0x3e0f75){const _0x456a9e=_0x1cff31;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x175ffe=dbConfig[_0x456a9e(0x297)](_0x456a9e(0x22a))['find']({'botID':botID})['value']();_0x3e0f75={..._0x3e0f75,'apiKey':crypt[_0x456a9e(0x23b)](secure[_0x456a9e(0x1f9)],_0x3e0f75[_0x456a9e(0x276)])['message'],'apiSecret':crypt[_0x456a9e(0x23b)](secure[_0x456a9e(0x1f9)],_0x3e0f75[_0x456a9e(0x245)])[_0x456a9e(0x2b1)]};if(_0x175ffe){if(_0x3e0f75['apiKey']==_0x456a9e(0x277))_0x3e0f75['apiKey']=config[_0x456a9e(0x276)];if(_0x3e0f75['apiSecret']==_0x456a9e(0x277))_0x3e0f75['apiSecret']=config['apiSecret'];dbConfig['get']('bot')[_0x456a9e(0x242)]({'botID':botID})[_0x456a9e(0x236)](_0x3e0f75)[_0x456a9e(0x2b7)]();}else dbConfig['get'](_0x456a9e(0x22a))['push'](_0x3e0f75)[_0x456a9e(0x2b7)](),process[_0x456a9e(0x28c)]({'status':'enabled','live':_0x456a9e(0x27f)},_0x4ce03d=>{});config={..._0x3e0f75};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x3e0f75[_0x456a9e(0x2a5)]},_0x344502=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x427691){const _0x3f84b8=_0x1cff31,_0xcb26c2={...config,'headless':_0x427691[_0x3f84b8(0x227)]};let _0x21188b=dbConfig['get'](_0x3f84b8(0x22a))[_0x3f84b8(0x242)]({'botID':botID})[_0x3f84b8(0x235)]();_0x21188b&&dbConfig[_0x3f84b8(0x297)](_0x3f84b8(0x22a))[_0x3f84b8(0x242)]({'botID':botID})[_0x3f84b8(0x236)](_0xcb26c2)[_0x3f84b8(0x2b7)](),config={..._0xcb26c2},proxyEmit(_0x3f84b8(0x24b),emittedConfiguration());}function noslash(_0x1908c3){const _0xdaaa82=_0x1cff31;return _0x1908c3[_0xdaaa82(0x25c)]('/','');}function updateNumberCoins(_0x5ae2fb){const _0x370b21=_0x1cff31;_0x5ae2fb[_0x370b21(0x1c9)]&&_0x5ae2fb['eventType']==_0x370b21(0x1e1)&&_0x5ae2fb[_0x370b21(0x225)][_0x370b21(0x1cb)](_0x168eec=>{const _0x3be403=_0x370b21;let _0x49253a=currentCoins[_0x3be403(0x242)](_0x50dc61=>_0x50dc61[_0x3be403(0x1f4)]==_0x168eec[_0x3be403(0x20d)]),_0x556df6=config[_0x3be403(0x1c0)][_0x3be403(0x242)](_0x13424a=>_0x13424a[_0x3be403(0x1f4)]==_0x168eec[_0x3be403(0x20d)]);if(_0x49253a&&_0x556df6)_0x49253a[_0x3be403(0x1b5)]=Math['max'](Number(_0x168eec['availableBalance'])+(_0x556df6['offset']||0x0),0x0);});if(_0x5ae2fb[_0x370b21(0x1c9)]&&_0x5ae2fb[_0x370b21(0x1c9)]==_0x370b21(0x1f3)){if(_0x5ae2fb[_0x370b21(0x273)]==_0x370b21(0x21a)&&_0x5ae2fb[_0x370b21(0x1f2)]==_0x370b21(0x254)){if(lastOrders)lastOrders[_0x370b21(0x1cb)](_0x25972c=>{const _0x514d17=_0x370b21;if(_0x25972c[_0x514d17(0x1d6)]==_0x5ae2fb['orderId']){if(_0x25972c[_0x514d17(0x1f7)])_0x25972c['filled']=_0x5ae2fb[_0x514d17(0x216)]*_0x25972c[_0x514d17(0x21c)];else _0x25972c[_0x514d17(0x27a)]=_0x5ae2fb['accumulatedQuantity'];}});}}}async function getCoins(_0x3d9015=!![],_0x56bb5b=config[_0x1cff31(0x279)]){const _0x1c8144=_0x1cff31;let _0x24065b,_0x31d54f=[],_0x463ea5=[],_0x104203=[];try{_0x24065b=await exchange[_0x1c8144(0x28a)](),mybalances=_0x24065b[_0x1c8144(0x1b0)];if(!_0x3d9015)for(const [_0x11bd9a,_0x2549d1]of Object[_0x1c8144(0x209)](mybalances)){_0x104203[_0x1c8144(0x1af)](_0x11bd9a);}else config['portfolio']['forEach'](_0x418f59=>{const _0x264493=_0x1c8144;if(!_0x418f59[_0x264493(0x220)])_0x104203[_0x264493(0x1af)](_0x418f59[_0x264493(0x1f4)]);});if(_0x56bb5b=='')for(const [_0x1c564c,_0x13eece]of Object[_0x1c8144(0x209)](mybalances)){_0x13eece['toString']()!=0x0&&_0x463ea5[_0x1c8144(0x1af)]({'coin':_0x1c564c});}else for(const [_0x5b7f7f,_0x1b7e52]of Object[_0x1c8144(0x209)](mybalances)){if(_0x104203[_0x1c8144(0x214)](_0x5b7f7f)){const _0x2159ba=config[_0x1c8144(0x1c0)][_0x1c8144(0x242)](_0x4ac5f0=>_0x4ac5f0[_0x1c8144(0x1f4)]==_0x5b7f7f);if((_0x1b7e52[_0x1c8144(0x1d5)]()!=0x0||_0x2159ba)&&(allSymbols[_0x1c8144(0x214)](_0x5b7f7f+'/'+_0x56bb5b)||_0x5b7f7f==_0x56bb5b))_0x463ea5['push']({'coin':_0x5b7f7f,'symbol':_0x5b7f7f+'/'+_0x56bb5b,'reverse':![],'number':Math[_0x1c8144(0x238)](_0x1b7e52+(_0x2159ba&&_0x2159ba[_0x1c8144(0x1bc)]||0x0),0x0)}),_0x5b7f7f!=_0x56bb5b&&_0x31d54f['push'](_0x5b7f7f+'/'+_0x56bb5b);else(_0x1b7e52[_0x1c8144(0x1d5)]()!=0x0||_0x2159ba)&&allSymbols[_0x1c8144(0x214)](_0x56bb5b+'/'+_0x5b7f7f)&&(_0x463ea5[_0x1c8144(0x1af)]({'coin':_0x5b7f7f,'symbol':_0x56bb5b+'/'+_0x5b7f7f,'reverse':!![],'number':Math[_0x1c8144(0x238)](_0x1b7e52+(_0x2159ba&&_0x2159ba['offset']||0x0),0x0)}),_0x5b7f7f!=_0x56bb5b&&_0x31d54f[_0x1c8144(0x1af)](_0x56bb5b+'/'+_0x5b7f7f));}}}catch(_0x4b1501){if(!_0x3d9015){if(_0x4b1501[_0x1c8144(0x1d5)]()[_0x1c8144(0x214)](_0x1c8144(0x266)))return logHistory(_0x1c8144(0x29f),_0x1c8144(0x27c)),![];else{if(_0x4b1501['toString']()[_0x1c8144(0x214)]('AuthenticationError'))return logHistory(_0x1c8144(0x29f),_0x1c8144(0x2b0)),![];else{if(_0x4b1501[_0x1c8144(0x1d5)]()[_0x1c8144(0x214)](_0x1c8144(0x25b)))return logHistory(_0x1c8144(0x29f),_0x1c8144(0x1e8)),![];else await handleError(_0x4b1501,_0x1c8144(0x1ea));}}}else await handleError(_0x4b1501,_0x1c8144(0x1ea));}return _0x463ea5;}async function getPortfolio(_0x35a5e9){const _0x4b6ce9=_0x1cff31;let _0x173f4e=[],_0x19bb42=[],_0xcf4669,_0x31e0fd=[],_0x19fb89,_0xdabb4f;_0x35a5e9[_0x4b6ce9(0x276)]===_0x4b6ce9(0x277)||_0x35a5e9[_0x4b6ce9(0x245)]===_0x4b6ce9(0x277)?(_0x19fb89=config[_0x4b6ce9(0x276)],_0xdabb4f=config[_0x4b6ce9(0x245)]):(_0x19fb89=_0x35a5e9[_0x4b6ce9(0x276)],_0xdabb4f=_0x35a5e9[_0x4b6ce9(0x245)]);await initExchange(_0x19fb89,_0xdabb4f);let _0x443281=await loadSymbols();if(_0x443281){_0x31e0fd=await getCoins(![],_0x35a5e9[_0x4b6ce9(0x279)]);if(_0x31e0fd===![])proxyEmit(_0x4b6ce9(0x1c0),![]);else{if(_0x35a5e9[_0x4b6ce9(0x279)]=='')proxyEmit(_0x4b6ce9(0x1c0),_0x31e0fd);else{_0x31e0fd[_0x4b6ce9(0x1cb)](_0x553b7c=>{const _0x58697d=_0x4b6ce9;_0x173f4e[_0x58697d(0x1af)](_0x553b7c[_0x58697d(0x1e9)]);});try{_0x19bb42=await exchange[_0x4b6ce9(0x1b9)](_0x173f4e);}catch(_0x475e57){await handleError(_0x475e57,_0x4b6ce9(0x1b3));}_0x31e0fd[_0x4b6ce9(0x1cb)](_0x39bfb3=>{const _0x256b36=_0x4b6ce9;_0x39bfb3[_0x256b36(0x1f4)]!=_0x35a5e9[_0x256b36(0x279)]?_0xcf4669=_0x39bfb3['reverse']?0x1/_0x19bb42[_0x39bfb3[_0x256b36(0x1e9)]]['last']:_0x19bb42[_0x39bfb3[_0x256b36(0x1e9)]]['last']:_0xcf4669=0x1,_0x39bfb3['price']=formatResult(_0xcf4669,0x8);}),proxyEmit(_0x4b6ce9(0x1c0),_0x31e0fd);}}}else proxyEmit(_0x4b6ce9(0x1c0),![]);}function checkMinimums(_0x1ef718){const _0x169813=_0x1cff31;let _0xb1e013=!![];const _0x3aa20a=!_0x1ef718[_0x169813(0x1f7)]?markets[_0x1ef718['symbol']][_0x169813(0x283)][_0x169813(0x255)][_0x169813(0x1d2)]:markets[_0x1ef718[_0x169813(0x1e9)]][_0x169813(0x283)][_0x169813(0x29d)][_0x169813(0x1d2)],_0x47eafb=!_0x1ef718['reverse']?markets[_0x1ef718[_0x169813(0x1e9)]][_0x169813(0x283)][_0x169813(0x29d)][_0x169813(0x1d2)]:markets[_0x1ef718[_0x169813(0x1e9)]][_0x169813(0x283)]['amount']['min'];if(Math[_0x169813(0x1db)](_0x1ef718[_0x169813(0x1ef)])<_0x3aa20a)_0xb1e013=![];if(Math[_0x169813(0x1db)](_0x1ef718['trade'])*_0x1ef718[_0x169813(0x2ae)]<_0x47eafb)_0xb1e013=![];return _0xb1e013;}async function getBalances(){const _0x23782d=_0x1cff31;let _0x173d10=0x0,_0x5a9e19;const _0x25c5f3=config['threshold'];currentCoins[_0x23782d(0x1cb)](_0x13a119=>{const _0x27c0db=_0x23782d;if(_0x13a119[_0x27c0db(0x1f4)]!=config['basecoin']){let _0xb54ef3=global[_0x27c0db(0x271)][noslash(_0x13a119[_0x27c0db(0x1e9)])];_0x5a9e19=_0x13a119[_0x27c0db(0x1f7)]?0x1/_0xb54ef3:_0xb54ef3;}else _0x5a9e19=0x1;let _0x39fe5e=_0x13a119[_0x27c0db(0x1b5)]*_0x5a9e19;_0x173d10+=_0x39fe5e,_0x13a119[_0x27c0db(0x2ae)]=formatResult(Number(_0x5a9e19),0x8),_0x13a119[_0x27c0db(0x235)]=_0x39fe5e;}),currentCoins['forEach'](_0x3b5e6e=>{const _0xcd8b50=_0x23782d;let _0x16c8de=config[_0xcd8b50(0x1c0)][_0xcd8b50(0x242)](_0x2601f4=>_0x2601f4[_0xcd8b50(0x1f4)]==_0x3b5e6e[_0xcd8b50(0x1f4)]),_0x4a34bf=Number(_0x16c8de[_0xcd8b50(0x247)]),_0x5024be=_0x3b5e6e['value']/_0x173d10*0x64,_0x2ba6cf=_0x4a34bf*_0x173d10/0x64/_0x3b5e6e[_0xcd8b50(0x2ae)]-_0x3b5e6e[_0xcd8b50(0x1b5)];_0x3b5e6e['distribution']=formatResult(_0x5024be,0x3),_0x3b5e6e[_0xcd8b50(0x26f)]=formatResult(_0x4a34bf,0x3),_0x3b5e6e[_0xcd8b50(0x1ef)]=formatResult(_0x2ba6cf,0x8),_0x3b5e6e[_0xcd8b50(0x2b2)]='',_0x3b5e6e['valid']='';if(_0x3b5e6e[_0xcd8b50(0x1f4)]!=config[_0xcd8b50(0x279)]){if(_0x3b5e6e[_0xcd8b50(0x247)]>_0x4a34bf)_0x3b5e6e[_0xcd8b50(0x2b2)]=_0xcd8b50(0x1bb),_0x3b5e6e[_0xcd8b50(0x1e3)]=checkMinimums(_0x3b5e6e);else _0x3b5e6e[_0xcd8b50(0x247)]<_0x4a34bf&&(_0x3b5e6e[_0xcd8b50(0x2b2)]=_0xcd8b50(0x2ac),_0x3b5e6e[_0xcd8b50(0x1e3)]=checkMinimums(_0x3b5e6e));}_0x3b5e6e[_0xcd8b50(0x2b8)]=_0x3b5e6e[_0xcd8b50(0x247)]/_0x3b5e6e[_0xcd8b50(0x26f)]-0x1;}),currentCoins[_0x23782d(0x1be)]((_0x2abde9,_0x273705)=>_0x2abde9[_0x23782d(0x2b8)]<_0x273705[_0x23782d(0x2b8)]?0x1:_0x273705[_0x23782d(0x2b8)]<_0x2abde9['delta']?-0x1:0x0);const _0x5dd111=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5dd111['eur'],'usd':_0x5dd111['usd'],'portfolio':JSON[_0x23782d(0x23a)](currentCoins),'threshold':_0x25c5f3},proxyEmit(_0x23782d(0x225),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x25c5f3});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5c0918=_0x1cff31;if(!lastBalances)return;let _0x252922=await getStartingBalances(![]),_0x330bd9=[],_0x3e80f2;JSON[_0x5c0918(0x27b)](lastBalances['portfolio'])[_0x5c0918(0x1cb)](_0x12f0ce=>{const _0x3b07db=_0x5c0918;let _0x2369b7={'coin':_0x12f0ce[_0x3b07db(0x1f4)],'number':_0x12f0ce[_0x3b07db(0x1b5)],'price':_0x12f0ce[_0x3b07db(0x2ae)]};_0x330bd9[_0x3b07db(0x1af)](_0x2369b7);});const _0x19878f=await getFiat();_0x3e80f2={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x19878f[_0x5c0918(0x1dc)],'usd':_0x19878f[_0x5c0918(0x21f)],'coins':_0x330bd9};let _0x3df425=dbPerformance[_0x5c0918(0x297)](_0x5c0918(0x1e4))['find']({'date':_0x3e80f2['date']})['value']();_0x3df425?dbPerformance[_0x5c0918(0x297)](_0x5c0918(0x1e4))['find']({'date':_0x3e80f2[_0x5c0918(0x1dd)]})[_0x5c0918(0x236)](_0x3e80f2)[_0x5c0918(0x2b7)]():dbPerformance['get'](_0x5c0918(0x1e4))['push'](_0x3e80f2)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3901e6=_0x1cff31;if(dbPerformance[_0x3901e6(0x27e)](_0x3901e6(0x1e4))[_0x3901e6(0x235)]()){let _0x14b623=dbPerformance[_0x3901e6(0x297)](_0x3901e6(0x1e4))['sortBy'](_0x3901e6(0x1dd))['value']();proxyEmit(_0x3901e6(0x26c),_0x14b623),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x14efe3=!![]){const _0x229c2e=_0x1cff31;let _0x261259=dbPerformance[_0x229c2e(0x297)]('data')[_0x229c2e(0x242)]({'date':config[_0x229c2e(0x263)]})['value']();config[_0x229c2e(0x276)]!=''&&!_0x261259&&(await setStartDatePerformance(config),_0x261259=dbPerformance[_0x229c2e(0x297)](_0x229c2e(0x1e4))[_0x229c2e(0x242)]({'date':config[_0x229c2e(0x263)]})[_0x229c2e(0x235)]());if(config[_0x229c2e(0x276)]==''||!_0x261259)return{};let _0x227d65=0x0,_0x262e0e=0x0,_0x5093d6=0x0,_0x2adc8d=[],_0x3e5562=0x0;config['portfolio']['forEach'](_0x5c545e=>{const _0x4c022=_0x229c2e;if(!_0x5c545e[_0x4c022(0x220)]){_0x2adc8d[_0x3e5562]={'coin':_0x5c545e[_0x4c022(0x1f4)],'symbol':_0x5c545e[_0x4c022(0x1e9)],'number':_0x5c545e[_0x4c022(0x298)],'price':_0x5c545e['startprice']},_0x227d65+=_0x5c545e['startprice']*_0x5c545e['startnumber'];if(config[_0x4c022(0x279)]=='BTC')_0x262e0e+=_0x5c545e[_0x4c022(0x226)]*_0x5c545e[_0x4c022(0x298)]*_0x261259[_0x4c022(0x1dc)],_0x5093d6+=_0x5c545e[_0x4c022(0x226)]*_0x5c545e[_0x4c022(0x298)]*_0x261259[_0x4c022(0x21f)];else{if(config[_0x4c022(0x279)]==_0x4c022(0x1ac)||config[_0x4c022(0x279)]==_0x4c022(0x1df)||config[_0x4c022(0x279)]==_0x4c022(0x1cc))_0x262e0e+=_0x5c545e['startprice']*_0x5c545e[_0x4c022(0x298)]*_0x261259[_0x4c022(0x1dc)]/_0x261259['usd'],_0x5093d6+=_0x5c545e['startprice']*_0x5c545e[_0x4c022(0x298)];else config['basecoin']=='EUR'&&(_0x262e0e+=_0x5c545e[_0x4c022(0x226)]*_0x5c545e[_0x4c022(0x298)],_0x5093d6+=_0x5c545e[_0x4c022(0x226)]*_0x5c545e[_0x4c022(0x298)]*_0x261259[_0x4c022(0x21f)]/_0x261259[_0x4c022(0x1dc)]);}_0x3e5562++;}});let _0x3f01e6={'basecoin':_0x227d65,'eur':_0x262e0e,'usd':_0x5093d6,'coins':_0x2adc8d};if(_0x14efe3)proxyEmit(_0x229c2e(0x2af),_0x3f01e6);return _0x3f01e6;}function _0x46e0(){const _0x3027c8=['usd','excluded','001','cooldown','22778559EsUNza','exit','balances','startprice','headless','getSeconds','sortBy','bot','datetime','limit-high','\x20minutes\x20-\x20balancing\x20resumed','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getStartingBalances','differenceInCalendarDays','limit','Performance\x20recreation\x20completed\x20successfully','-results.json',')\x20|\x20Error\x20details:\x20','value','assign','Limit\x20(high-margin)','max','breakeven','stringify','decrypt','date-fns','Order:\x20','logs','wsMarket','threshold','order','find','2649521zSRqAM','BTCBUSD','apiSecret','userData','distribution','recreateHistory()','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','formattedMessage','configuration','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getFiat()','exchange','market','404WbDPsC','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','storeConfiguration','loadMarkets','FILLED','amount','fromCodePoint','search','2013450oQwyLm','BNB','bot-','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','replace','test','kill','time','format','455640eKtPxB','MIN_NOTIONAL','startdate','milliseconds','424oPkLdG','API-key\x20format\x20invalid','mkdirSync','38427wxxpDV','bb-secure.json','showname','HOT/BTC','performance','RSA-OAEP','buys','target','timestamp','ticker','initclient','orderType','padStart','settings','apiKey','************','currency','basecoin','filled','parse','Binance\x20API\x20key\x20is\x20invalid','ExchangeNotAvailable','has','running','storeHeadless','coins','existsSync','limits','emojisell','cancelOrder','length','getHours','type','BTC/USDT','fetchBalance','args','send','getTime','shift','restart','getDate','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','argv','BTCUSDT','coinamount','progress','binanceus','get','startnumber','binance','subscribeSpotKline','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Order(s)\x20not\x20validated\x20after\x20','cost','\x20>\x20','error','toLowerCase','version','\x20orders\x20in\x20less\x20than\x20','constructor','getFullYear','botname',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20Error\x20details:\x20','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','timeshift','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','getMinutes','buy','reduce','last','starting-balances','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','message','side','fee','bid','OrderNotFound','ordertype','write','delta','BUSD','HOT/EUR','placeOrder()','push','total','Order(s)\x20filled\x20-\x20balancing\x20resumed','round','getPortfolio()','ccxt','number','cancelLoading','loadSymbols()','RequestTimeout','fetchTickers','kline','sell','offset','toFixed','sort','lowdb/adapters/FileSync','portfolio','\x20|\x20Unknown\x20error\x20occured','Error:\x20Invalid\x20argument\x20','Executed\x20','secure','cancel','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','success','createOrder','eventType','isArray','forEach','USDC','log','parseISO','keys','wsKey','event','min','botID','BTC/BUSD','toString','orderId','BTC','emitHistory','\x20order:\x20','Bot\x20','abs','eur','date','add','USDT','placeOrder','outboundAccountPosition','Order\x20amount\x20is\x20invalid:\x20','valid','data','function','splice','yyyy/MM/dd','Binance\x20API\x20secret\x20is\x20invalid','symbol','getCoins()','emojibuy','-events.json','cancelOrder()','symbols','trade','yyyy-MM-dd\x27T\x27HH:mm:ss','realized','orderStatus','executionReport','coin','Pausing\x20bot\x20for\x205\x20minutes\x20(','sha256','reverse','-performance.json','privateKey','(((.+)+)+)+$','./config/','Order\x20filled:\x20','remove',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Crypt','sells','limit-low',':\x20Bot\x20','getMonth','remainingSymbols','timeout','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','\x20-\x20','wss://stream.binance.com:9443','entries','filter','yyyy/MM/dd\x20HH:mm:ss','event-history','asset','apply','2866XmNUpZ','BTC/EUR','fetchOHLCV','DDoSProtection','6583968BfKSaw','includes','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','accumulatedQuantity','close','defaults','page','LIMIT','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','reconnected'];_0x46e0=function(){return _0x3027c8;};return _0x46e0();}function headlessMode(_0x3af4f5){const _0x4c2762=_0x1cff31;let _0x52bec8=_0x3af4f5[_0x4c2762(0x1c0)],_0x47ad27=_0x3af4f5['threshold'],_0x275088=[];for(let _0x5a68c7 of _0x52bec8){if(_0x5a68c7[_0x4c2762(0x1f4)]!=config[_0x4c2762(0x279)]){if(_0x5a68c7[_0x4c2762(0x247)]/_0x5a68c7[_0x4c2762(0x26f)]-0x1>=_0x47ad27/0x64){if(_0x5a68c7[_0x4c2762(0x1e3)])_0x275088['push'](_0x5a68c7);}else{if(_0x5a68c7[_0x4c2762(0x247)]/_0x5a68c7[_0x4c2762(0x26f)]-0x1<=-_0x47ad27/0x64){if(_0x5a68c7[_0x4c2762(0x1e3)])_0x275088[_0x4c2762(0x1af)](_0x5a68c7);}}}}_0x275088[_0x4c2762(0x286)]>0x0&&placeOrder(_0x275088);}function symbolToCoin(_0x7ee222){const _0x275cd1=_0x1cff31;let _0x4e2faa;if(_0x7ee222[_0x275cd1(0x214)]('/'+config[_0x275cd1(0x279)]))_0x4e2faa=_0x7ee222['replace']('/'+config[_0x275cd1(0x279)],'');if(_0x7ee222[_0x275cd1(0x214)](config['basecoin']+'/'))_0x4e2faa=_0x7ee222[_0x275cd1(0x25c)](config['basecoin']+'/','');return _0x4e2faa;}async function validateOrders(_0x3da341=0x0){const _0x15ca7c=_0x1cff31;let _0x10dcdf=[],_0x46d531=config[_0x15ca7c(0x2b6)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x519de6=>{const _0x4b1c8b=_0x15ca7c;let _0x37dcf3=previousCoins['find'](_0x3fdddc=>_0x3fdddc['coin']==symbolToCoin(_0x519de6[_0x4b1c8b(0x1e9)])),_0x21fbb4=currentCoins[_0x4b1c8b(0x242)](_0x539a62=>_0x539a62[_0x4b1c8b(0x1f4)]==symbolToCoin(_0x519de6[_0x4b1c8b(0x1e9)])),_0x51ee42,_0x15e598;_0x519de6[_0x4b1c8b(0x2b2)]==_0x4b1c8b(0x2ac)&&!_0x519de6[_0x4b1c8b(0x1f7)]||_0x519de6[_0x4b1c8b(0x2b2)]==_0x4b1c8b(0x1bb)&&_0x519de6[_0x4b1c8b(0x1f7)]?(_0x51ee42=_0x37dcf3[_0x4b1c8b(0x1b5)]+0.9*_0x519de6[_0x4b1c8b(0x27a)],_0x15e598=_0x37dcf3['number']+1.1*_0x519de6[_0x4b1c8b(0x27a)]):(_0x51ee42=_0x37dcf3[_0x4b1c8b(0x1b5)]-1.1*_0x519de6[_0x4b1c8b(0x27a)],_0x15e598=_0x37dcf3[_0x4b1c8b(0x1b5)]-0.9*_0x519de6[_0x4b1c8b(0x27a)]);const _0x59ae6a=_0x519de6[_0x4b1c8b(0x27a)]!=0x0&&_0x21fbb4['number']>=_0x51ee42&&_0x21fbb4['number']<=_0x15e598;_0x10dcdf[_0x4b1c8b(0x1af)](_0x59ae6a);if(_0x59ae6a&&config[_0x4b1c8b(0x2b6)]!=_0x4b1c8b(0x24f)){if(_0x519de6['reverse'])logHistory(_0x4b1c8b(0x241),_0x4b1c8b(0x1fc)+_0x519de6[_0x4b1c8b(0x1e9)]+'\x20'+_0x519de6[_0x4b1c8b(0x2b2)]+'\x20#'+formatResult(_0x519de6['filled']/_0x519de6[_0x4b1c8b(0x21c)],0x8)+'\x20@'+formatResult(_0x519de6[_0x4b1c8b(0x21c)],0x8));else logHistory(_0x4b1c8b(0x241),_0x4b1c8b(0x1fc)+_0x519de6[_0x4b1c8b(0x1e9)]+'\x20'+_0x519de6[_0x4b1c8b(0x2b2)]+'\x20#'+formatResult(_0x519de6[_0x4b1c8b(0x27a)],0x8)+'\x20@'+formatResult(_0x519de6[_0x4b1c8b(0x21c)],0x8));}}),_0x10dcdf[_0x15ca7c(0x1cb)]((_0x1e17cd,_0x1eb142)=>{const _0x237516=_0x15ca7c;if(_0x1e17cd)lastOrders[_0x237516(0x1e6)](_0x1eb142,0x1);});if(_0x3da341<_0x46d531&&_0x10dcdf['includes'](![])){if(_0x3da341==0x0){config[_0x15ca7c(0x2b6)]==_0x15ca7c(0x24f)?logHistory('error',_0x15ca7c(0x29b)):logHistory(_0x15ca7c(0x29f),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3da341);},0xa*0x3e8);}else{(_0x3da341==0x1||_0x3da341==Math['round'](_0x46d531/0x2)||_0x3da341==_0x46d531-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3da341);},validateOrderInterval);}}else{lockOrders=![];if(_0x3da341>0x0&&!_0x10dcdf[_0x15ca7c(0x214)](![]))config[_0x15ca7c(0x2b6)]==_0x15ca7c(0x24f)?logHistory(_0x15ca7c(0x1c7),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory('success',_0x15ca7c(0x1b1));else _0x3da341>0x0&&_0x10dcdf['includes'](![])&&(config['ordertype']=='market'?logHistory(_0x15ca7c(0x1c7),_0x15ca7c(0x29c)+Math[_0x15ca7c(0x1b2)](_0x46d531*validateOrderInterval/0xea60)+_0x15ca7c(0x22d)):(lastOrders[_0x15ca7c(0x1cb)](async _0x12ff96=>{const _0x26e504=_0x15ca7c;try{const _0xf3f5db=await exchange[_0x26e504(0x285)](_0x12ff96[_0x26e504(0x1d6)],_0x12ff96[_0x26e504(0x1e9)]);}catch(_0x43e72f){if(_0x43e72f['toString']()[_0x26e504(0x214)](_0x26e504(0x2b5))){}else await handleError(_0x43e72f,_0x26e504(0x1ed));}}),logHistory(_0x15ca7c(0x1c7),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x46d531*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x2e437a=_0x1cff31;dbCoinResults['get'](_0x2e437a(0x281))['remove']()['write']();let _0x1592e2=await getStartingBalances(![]);_0x1592e2[_0x2e437a(0x281)]['forEach'](_0x4bd4e7=>{const _0x31609e=_0x2e437a,_0x22b39b=_0x4bd4e7[_0x31609e(0x1e9)][_0x31609e(0x214)](config[_0x31609e(0x279)]+'/');if(_0x4bd4e7['coin']!=config[_0x31609e(0x279)]){let _0x11eda7={'coin':_0x4bd4e7[_0x31609e(0x1f4)],'number':_0x4bd4e7[_0x31609e(0x1b5)],'breakeven':_0x4bd4e7[_0x31609e(0x21c)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x31609e(0x297)](_0x31609e(0x281))[_0x31609e(0x1af)](_0x11eda7)[_0x31609e(0x2b7)]();}});}async function updateCoinResults(_0x2cda75){const _0x2558b1=_0x1cff31;let _0x4fedda,_0x24de14,_0x2af73c,_0x428d9b,_0x553c79,_0x468129,_0x2f2c71=dbCoinResults[_0x2558b1(0x297)](_0x2558b1(0x281))[_0x2558b1(0x242)]({'coin':_0x2cda75['coin']})[_0x2558b1(0x235)]();if(!_0x2f2c71)return;if(_0x2cda75[_0x2558b1(0x2b3)]&&_0x2cda75[_0x2558b1(0x2b3)]['currency']==config[_0x2558b1(0x279)])_0x4fedda=_0x2cda75[_0x2558b1(0x2b3)]['cost'];else{if(_0x2cda75[_0x2558b1(0x2b3)]&&_0x2cda75[_0x2558b1(0x2b3)][_0x2558b1(0x278)]==_0x2558b1(0x259))_0x4fedda=_0x2cda75[_0x2558b1(0x2b3)]['cost']*global[_0x2558b1(0x271)]['BNB'+config[_0x2558b1(0x279)]];else _0x4fedda=0.001*_0x2cda75[_0x2558b1(0x27a)];}const _0x2b3013=_0x2cda75[_0x2558b1(0x1e9)]['includes'](config[_0x2558b1(0x279)]+'/');_0x2b3013&&(_0x468129={'coin':_0x2cda75[_0x2558b1(0x1f4)],'symbol':_0x2cda75['symbol'],'filled':_0x2cda75[_0x2558b1(0x27a)]*_0x2cda75[_0x2558b1(0x21c)],'side':_0x2cda75[_0x2558b1(0x2b2)]==_0x2558b1(0x1bb)?_0x2558b1(0x2ac):_0x2558b1(0x1bb),'price':0x1/_0x2cda75[_0x2558b1(0x21c)]},_0x2cda75={..._0x468129});_0x2cda75[_0x2558b1(0x2b2)]==_0x2558b1(0x2ac)?_0x2af73c=(_0x2f2c71['breakeven']*_0x2f2c71['number']+_0x2cda75['price']*_0x2cda75[_0x2558b1(0x27a)])/(_0x2f2c71[_0x2558b1(0x1b5)]+_0x2cda75[_0x2558b1(0x27a)]):_0x2af73c=(_0x2f2c71[_0x2558b1(0x239)]*_0x2f2c71[_0x2558b1(0x1b5)]-_0x2cda75[_0x2558b1(0x21c)]*_0x2cda75['filled'])/(_0x2f2c71[_0x2558b1(0x1b5)]-_0x2cda75[_0x2558b1(0x27a)]);_0x2cda75['side']=='buy'?_0x428d9b=_0x2f2c71['realized']:_0x428d9b=_0x2f2c71[_0x2558b1(0x1f1)]+(_0x2cda75[_0x2558b1(0x21c)]-_0x2f2c71['breakeven'])*_0x2cda75[_0x2558b1(0x27a)];_0x24de14=_0x2cda75[_0x2558b1(0x2b2)]=='sell'?_0x2f2c71[_0x2558b1(0x1b5)]-_0x2cda75['filled']:_0x2f2c71[_0x2558b1(0x1b5)]+_0x2cda75['filled'],_0x553c79=(_0x2cda75['price']-_0x2af73c)*_0x24de14;let _0x223c89={'coin':_0x2cda75[_0x2558b1(0x1f4)],'number':_0x24de14,'breakeven':formatResult(_0x2af73c,0x8),'realized':formatResult(_0x428d9b,0x8),'unrealized':formatResult(_0x553c79,0x8),'fees':formatResult(_0x2f2c71['fees']+_0x4fedda,0x8),'sells':_0x2cda75[_0x2558b1(0x2b2)]=='sell'?_0x2f2c71[_0x2558b1(0x200)]+0x1:_0x2f2c71[_0x2558b1(0x200)],'buys':_0x2cda75[_0x2558b1(0x2b2)]=='buy'?_0x2f2c71[_0x2558b1(0x26e)]+0x1:_0x2f2c71[_0x2558b1(0x26e)]};dbCoinResults[_0x2558b1(0x297)]('coins')[_0x2558b1(0x242)]({'coin':_0x2cda75['coin']})[_0x2558b1(0x236)](_0x223c89)[_0x2558b1(0x2b7)]();}async function placeOrder(_0x43f8e9){const _0x23af2c=_0x1cff31,_0xae2469=config['ordertype']==_0x23af2c(0x24f)?_0x23af2c(0x24f):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x23af2c(0x27b)](JSON[_0x23af2c(0x23a)](currentCoins));for(const _0x11b445 of _0x43f8e9){let _0x5d7f56,_0x4459ee,_0x14fdf8,_0x523840,_0x1408bb,_0x286f5b=_0x11b445[_0x23af2c(0x1e9)];try{const _0x4ad4fa=await exchange[_0x23af2c(0x1b9)](_0x286f5b),_0x5ba1eb=_0x4ad4fa[_0x286f5b];_0x5d7f56=_0x5ba1eb[_0x23af2c(0x2ae)],_0x4459ee=_0x5ba1eb[_0x23af2c(0x2b4)],_0x14fdf8=_0x5ba1eb['ask'];_0x11b445['reverse']?(_0x523840=_0x11b445[_0x23af2c(0x2b2)]=='buy'?_0x23af2c(0x1bb):_0x23af2c(0x2ac),_0x1408bb=Math[_0x23af2c(0x1db)](_0x11b445['trade'])/_0x5d7f56):(_0x523840=_0x11b445['side'],_0x1408bb=Math[_0x23af2c(0x1db)](_0x11b445['trade']));_0xae2469==_0x23af2c(0x231)&&(config[_0x23af2c(0x2b6)]==_0x23af2c(0x22c)&&(_0x5d7f56=_0x523840=='buy'?_0x4459ee:_0x14fdf8),config['ordertype']==_0x23af2c(0x201)&&(_0x5d7f56=_0x523840==_0x23af2c(0x2ac)?_0x14fdf8:_0x4459ee));_0x1408bb=formatResult(_0x1408bb,0x8),_0x5d7f56=formatResult(_0x5d7f56,0x8);const _0x83b9=await exchange[_0x23af2c(0x1c8)](_0x286f5b,_0xae2469,_0x523840,_0x1408bb,_0x5d7f56);lastOrders[_0x23af2c(0x1af)]({'orderId':_0x83b9['id'],'symbol':_0x286f5b,'side':_0x523840,'reverse':_0x11b445[_0x23af2c(0x1f7)],'amount':_0x11b445['reverse']?_0x83b9[_0x23af2c(0x255)]*_0x83b9[_0x23af2c(0x21c)]:_0x83b9['amount'],'filled':_0x11b445[_0x23af2c(0x1f7)]?_0x83b9[_0x23af2c(0x27a)]*_0x83b9[_0x23af2c(0x21c)]:_0x83b9[_0x23af2c(0x27a)],'price':_0x83b9[_0x23af2c(0x21c)]});const _0x328cda=_0x523840=='sell'?config['emojisell']?String[_0x23af2c(0x256)]('0x'+config['emojisell'])+'\x20':'':config[_0x23af2c(0x1eb)]?String[_0x23af2c(0x256)]('0x'+config[_0x23af2c(0x1eb)])+'\x20':'',_0x59ff1a=_0xae2469==_0x23af2c(0x24f)?'Market':config[_0x23af2c(0x2b6)]==_0x23af2c(0x22c)?_0x23af2c(0x237):'Limit\x20(low-margin)';if(_0xae2469==_0x23af2c(0x24f))logHistory('order',''+_0x328cda+_0x59ff1a+_0x23af2c(0x1d9)+_0x286f5b+'\x20'+_0x523840+'\x20#'+formatResult(_0x83b9[_0x23af2c(0x27a)],0x8)+'\x20@'+formatResult(_0x83b9[_0x23af2c(0x21c)],0x8));else logHistory(_0x23af2c(0x241),''+_0x328cda+_0x59ff1a+_0x23af2c(0x1d9)+_0x286f5b+'\x20'+_0x523840+'\x20#'+formatResult(_0x83b9['amount'],0x8)+'\x20@'+formatResult(_0x83b9['price'],0x8));_0x83b9['coin']=_0x11b445[_0x23af2c(0x1f4)],await updateCoinResults(_0x83b9);if(config['cooldown']!=0x0){let _0x5109e7=null;if(cooldownTracker[_0x23af2c(0x286)]==config[_0x23af2c(0x222)]-0x1)_0x5109e7=cooldownTracker[_0x23af2c(0x28e)]();const _0x16b799=getTimeStamp();cooldownTracker[_0x23af2c(0x1af)](_0x16b799);if(_0x5109e7){const _0x546312=fns['differenceInSeconds'](new Date(_0x16b799),new Date(_0x5109e7));_0x546312<cooldownInterval&&(logHistory(_0x23af2c(0x29f),_0x23af2c(0x1c3)+config[_0x23af2c(0x222)]+_0x23af2c(0x2a2)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x366a99){if(_0x366a99[_0x23af2c(0x1d5)]()[_0x23af2c(0x214)](_0x23af2c(0x262)))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x286f5b);else{if(_0x366a99[_0x23af2c(0x1d5)]()[_0x23af2c(0x214)]('Invalid\x20quantity'))logHistory(_0x23af2c(0x29f),_0x23af2c(0x1e2)+_0x286f5b);else await handleError(_0x366a99,_0x23af2c(0x1ae));}}}if(lastOrders[_0x23af2c(0x286)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x23af2c(0x227)]&&(config[_0x23af2c(0x2b6)]==_0x23af2c(0x24f)?logHistory(_0x23af2c(0x29f),_0x23af2c(0x21d)):logHistory(_0x23af2c(0x29f),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x23af2c(0x227)]&&logHistory(_0x23af2c(0x29f),_0x23af2c(0x215)));}}function logHistory(_0x40c5b9,_0x54aa09,_0x5a53fc=''){const _0x3a3168=_0x1cff31;let _0x494503={'time':getTimeStamp(),'type':_0x40c5b9,'event':_0x54aa09,'botname':config['botname'],'showname':config[_0x3a3168(0x26a)]};dbLogs[_0x3a3168(0x297)](_0x3a3168(0x23e))[_0x3a3168(0x1af)](_0x494503)[_0x3a3168(0x2b7)]();if(_0x5a53fc=='')_0x5a53fc=_0x54aa09;proxyEmit(_0x3a3168(0x1d1),{'log':_0x494503,'summary':_0x5a53fc}),process['send']({'telegram':_0x494503},_0x1fcf6c=>{}),logging(''+_0x494503['event']);}function emitHistory(_0x1fc14d={}){const _0x449e4c=_0x1cff31;Object[_0x449e4c(0x1cf)](_0x1fc14d)['length']==0x0&&(_0x1fc14d={'type':[_0x449e4c(0x241),_0x449e4c(0x1d1)],'event':'','page':0x1});if(_0x1fc14d['type'][_0x449e4c(0x214)]('event'))_0x1fc14d[_0x449e4c(0x288)][_0x449e4c(0x1e6)](_0x1fc14d[_0x449e4c(0x288)]['indexOf']('event'),0x1,_0x449e4c(0x29f),'success');if(dbLogs[_0x449e4c(0x27e)](_0x449e4c(0x23e))[_0x449e4c(0x235)]()){let _0x44d085=dbLogs[_0x449e4c(0x297)](_0x449e4c(0x23e))[_0x449e4c(0x20a)](_0x356f4f=>{const _0x429e71=_0x449e4c;if(_0x1fc14d[_0x429e71(0x288)][_0x429e71(0x286)]==0x0)return![];else return _0x1fc14d[_0x429e71(0x288)]['includes'](_0x356f4f[_0x429e71(0x288)]);})[_0x449e4c(0x20a)](_0x5dfb55=>{const _0x28c8de=_0x449e4c;if(_0x1fc14d[_0x28c8de(0x1d1)]=='')return!![];else return _0x5dfb55['event'][_0x28c8de(0x2a0)]()['includes'](_0x1fc14d[_0x28c8de(0x1d1)]['toLowerCase']());})[_0x449e4c(0x229)](_0x449e4c(0x25f)),_0x27b88c=_0x44d085['value']()['length'];_0x44d085=_0x44d085[_0x449e4c(0x1f7)]()['slice']((_0x1fc14d[_0x449e4c(0x219)]-0x1)*logPageSize,_0x1fc14d[_0x449e4c(0x219)]*logPageSize-0x1)['reverse']()[_0x449e4c(0x235)](),proxyEmit(_0x449e4c(0x20c),{'logs':_0x44d085,'total':_0x27b88c});}else proxyEmit(_0x449e4c(0x20c),{'logs':[],'total':0x0});}async function pauseBot(_0x183437){const _0x445474=_0x1cff31,_0x4e66b7=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x445474(0x28d)](),consecutivePauses=0x1;else{if(_0x4e66b7-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x445474(0x28c)]({'stop':_0x445474(0x28f)},_0x4f37e6=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x445474(0x29f),_0x445474(0x1f5)+consecutivePauses+')'),await sleep(_0x183437),botPaused=![],reset();}}async function handleError(_0x573234,_0x313b38,_0x34a848=''){const _0x579981=_0x1cff31;if(_0x573234[_0x579981(0x1d5)]()[_0x579981(0x214)](_0x579981(0x212)))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x1c6)),await pauseBot(pauseBotInterval);else{if(_0x573234[_0x579981(0x1d5)]()['includes'](_0x579981(0x27d)))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x206)),await pauseBot(pauseBotInterval);else{if(_0x573234[_0x579981(0x1d5)]()[_0x579981(0x214)](_0x579981(0x1b8)))logHistory(_0x579981(0x29f),_0x313b38+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x573234[_0x579981(0x1d5)]()['includes'](_0x579981(0x266)))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x2a8)),logHistory(_0x579981(0x29f),_0x579981(0x24c)),process[_0x579981(0x28c)]({'stop':_0x579981(0x25e)},_0xa4f9e6=>{});else{if(_0x573234[_0x579981(0x1d5)]()[_0x579981(0x214)]('AuthenticationError'))logHistory(_0x579981(0x29f),_0x313b38+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory('error',_0x579981(0x24c)),process[_0x579981(0x28c)]({'stop':'kill'},_0x4195b2=>{});else{if(_0x573234[_0x579981(0x1d5)]()['includes'](_0x579981(0x25b)))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x21b)),logHistory(_0x579981(0x29f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x579981(0x28c)]({'stop':_0x579981(0x25e)},_0x3492e0=>{});else{if(_0x573234[_0x579981(0x1d5)]()[_0x579981(0x214)](_0x579981(0x2aa)))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x22e)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x579981(0x28c)]({'stop':_0x579981(0x25e)},_0x190acc=>{});else{if(_0x573234[_0x579981(0x1d5)]()['includes']('InvalidNonce'))logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x291)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x579981(0x28f)},_0x1bd0aa=>{});else _0x573234[_0x579981(0x1d5)]()[_0x579981(0x214)]('InsufficientFunds')?logHistory('error',_0x313b38+_0x579981(0x251)):(logHistory(_0x579981(0x29f),_0x313b38+_0x579981(0x1c1)),logging(_0x313b38+_0x579981(0x2a7),_0x573234),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x26c75e,_0x1f8536){const _0x2a9830=_0x1cff31;return parseFloat(_0x26c75e[_0x2a9830(0x1bd)](_0x1f8536));}function logging(_0x5577df,_0x5ed3ea=''){const _0x30831f=_0x1cff31;if(config['showname'])console['log'](getTimeStamp()+':\x20'+config[_0x30831f(0x2a5)]+'\x20>\x20'+_0x5577df,_0x5ed3ea);else console['log'](getTimeStamp()+_0x30831f(0x202)+botID+_0x30831f(0x29e)+_0x5577df,_0x5ed3ea);}function getServerTime(){const _0x30f712=_0x1cff31,_0x44f3ef=new Date();return _0x44f3ef[_0x30f712(0x2a4)]()+'/'+(_0x44f3ef[_0x30f712(0x203)]()+0x1)[_0x30f712(0x1d5)]()[_0x30f712(0x274)](0x2,'0')+'/'+_0x44f3ef['getDate']()['toString']()[_0x30f712(0x274)](0x2,'0')+'\x20'+_0x44f3ef['getHours']()[_0x30f712(0x1d5)]()[_0x30f712(0x274)](0x2,'0')+':'+_0x44f3ef[_0x30f712(0x2ab)]()[_0x30f712(0x1d5)]()[_0x30f712(0x274)](0x2,'0')+':'+_0x44f3ef['getSeconds']()[_0x30f712(0x1d5)]()[_0x30f712(0x274)](0x2,'0');}function getTimeStamp(){const _0x1d30e5=_0x1cff31,_0x4682f7=shiftedTime();return _0x4682f7[_0x1d30e5(0x2a4)]()+'/'+(_0x4682f7[_0x1d30e5(0x203)]()+0x1)[_0x1d30e5(0x1d5)]()[_0x1d30e5(0x274)](0x2,'0')+'/'+_0x4682f7[_0x1d30e5(0x290)]()[_0x1d30e5(0x1d5)]()[_0x1d30e5(0x274)](0x2,'0')+'\x20'+_0x4682f7['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x4682f7[_0x1d30e5(0x2ab)]()[_0x1d30e5(0x1d5)]()['padStart'](0x2,'0')+':'+_0x4682f7[_0x1d30e5(0x228)]()[_0x1d30e5(0x1d5)]()[_0x1d30e5(0x274)](0x2,'0');}function getDate(){const _0x1c754=_0x1cff31,_0x2571e1=shiftedTime();return _0x2571e1[_0x1c754(0x2a4)]()+'/'+(_0x2571e1[_0x1c754(0x203)]()+0x1)[_0x1c754(0x1d5)]()[_0x1c754(0x274)](0x2,'0')+'/'+_0x2571e1[_0x1c754(0x290)]()['toString']()[_0x1c754(0x274)](0x2,'0');}function getHour(){const _0x56ec1f=_0x1cff31,_0x5b3fdf=shiftedTime();return _0x5b3fdf[_0x56ec1f(0x287)]()[_0x56ec1f(0x1d5)]()[_0x56ec1f(0x274)](0x2,'0');}function sleep(_0x278c6e){return new Promise(_0x54d30e=>setTimeout(_0x54d30e,_0x278c6e));}function shiftedTime(){const _0x26852c=_0x1cff31,_0x4ce322=new Date();let _0x3ba2ce=_0x4ce322;if(config&&config[_0x26852c(0x2a9)]!==0x0)_0x3ba2ce=fns[_0x26852c(0x1de)](_0x4ce322,{'hours':config[_0x26852c(0x2a9)]});return _0x3ba2ce;}