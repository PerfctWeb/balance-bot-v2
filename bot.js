const _0x38a699=_0xe995;(function(_0x495cc9,_0x25f7a7){const _0x2975e0=_0xe995,_0x1c7f8e=_0x495cc9();while(!![]){try{const _0x433424=-parseInt(_0x2975e0(0x18d))/0x1*(parseInt(_0x2975e0(0x1c4))/0x2)+-parseInt(_0x2975e0(0x1b7))/0x3*(-parseInt(_0x2975e0(0x219))/0x4)+parseInt(_0x2975e0(0x2e1))/0x5+parseInt(_0x2975e0(0x251))/0x6+-parseInt(_0x2975e0(0x2c9))/0x7+-parseInt(_0x2975e0(0x2f8))/0x8+parseInt(_0x2975e0(0x1aa))/0x9;if(_0x433424===_0x25f7a7)break;else _0x1c7f8e['push'](_0x1c7f8e['shift']());}catch(_0x3562ed){_0x1c7f8e['push'](_0x1c7f8e['shift']());}}}(_0x5f27,0xeb58e));const _0x44c152=function(){let _0x10d24b=!![];return function(_0xc4737,_0x1e6343){const _0x440bd7=_0x10d24b?function(){const _0x9ebf56=_0xe995;if(_0x1e6343){const _0x59e009=_0x1e6343[_0x9ebf56(0x1a0)](_0xc4737,arguments);return _0x1e6343=null,_0x59e009;}}:function(){};return _0x10d24b=![],_0x440bd7;};}(),_0x2ff698=_0x44c152(this,function(){const _0x3e0600=_0xe995;return _0x2ff698[_0x3e0600(0x1a6)]()['search']('(((.+)+)+)+$')[_0x3e0600(0x1a6)]()[_0x3e0600(0x225)](_0x2ff698)['search']('(((.+)+)+)+$');});_0x2ff698();'use strict';const ccxt=require(_0x38a699(0x197))['pro'],low=require(_0x38a699(0x242)),FileSync=require(_0x38a699(0x22f)),fs=require('fs'),fns=require(_0x38a699(0x294)),Crypt=require(_0x38a699(0x1bb))['Crypt'],util=require(_0x38a699(0x27f)),argv=require(_0x38a699(0x2f6))(process[_0x38a699(0x2f7)][_0x38a699(0x1ca)](0x2))[_0x38a699(0x2f7)],path=require(_0x38a699(0x1e7));let exchange;global[_0x38a699(0x22a)]={},global[_0x38a699(0x1b2)]={};const exceptions={'binance':['DAI/',_0x38a699(0x212),_0x38a699(0x1cd),_0x38a699(0x273),_0x38a699(0x1a9)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x38a699(0x265)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x38a699(0x185)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x38a699(0x292))[_0x38a699(0x2db)],botID=process[_0x38a699(0x2f7)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x38a699(0x2a7)](botID)&&(console[_0x38a699(0x281)](_0x38a699(0x20c)+botID+_0x38a699(0x1e5)),killBot());const userID=process[_0x38a699(0x2f7)][0x3]||'',configpath=userID?_0x38a699(0x196)+userID+'/':_0x38a699(0x196),logspath=userID?_0x38a699(0x284)+userID+'/':_0x38a699(0x284),loggerfile=fs['createWriteStream'](logspath+_0x38a699(0x2c8),{'flags':'a'});!fs[_0x38a699(0x18f)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x38a699(0x260)](logspath);const configfile=configpath+_0x38a699(0x2d7)+botID+_0x38a699(0x180),logfile=configpath+_0x38a699(0x2d7)+botID+_0x38a699(0x24e),performancefile=configpath+_0x38a699(0x2d7)+botID+_0x38a699(0x21d),coinresultsfile=configpath+_0x38a699(0x2d7)+botID+'-results.json',settingsfile=configpath+_0x38a699(0x2a2),securefile=configpath+_0x38a699(0x18c),configbackuppath=configpath+_0x38a699(0x17e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x38a699(0x1d6)]({'logs':[],'version':serverversion})[_0x38a699(0x1e9)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x38a699(0x1d6)]({'data':[],'version':serverversion})[_0x38a699(0x1e9)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x38a699(0x1e9)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x38a699(0x1d6)]({'coins':[],'version':serverversion})[_0x38a699(0x1e9)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x38a699(0x249),'rsaStandard':_0x38a699(0x20a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xdccc40=>{console['log'](_0xdccc40);},'simple':_0x9f16ec=>{const _0x3ad427=_0x38a699;console[_0x3ad427(0x281)](_0x9f16ec),loggerfile['write'](util['format'](_0x9f16ec)+'\x0a');},'full':async(_0x5ad822,_0x3c7245='')=>{const _0x5a7399=_0x38a699;let _0x290957;if(config[_0x5a7399(0x1dc)])_0x290957=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x5ad822;else _0x290957=getTimeStamp()+_0x5a7399(0x1db)+botID+_0x5a7399(0x2d5)+_0x5ad822;console[_0x5a7399(0x281)](_0x290957),loggerfile['write'](util['format'](_0x290957)+'\x0a'),_0x3c7245&&(console[_0x5a7399(0x281)](_0x3c7245),loggerfile[_0x5a7399(0x1e9)](util[_0x5a7399(0x272)](_0x3c7245)+'\x0a'));},'debug':async(_0x40293f,_0x477ee8='')=>{const _0x35bef5=_0x38a699;let _0x498671;if(config[_0x35bef5(0x1dc)])_0x498671=getTimeStamp()+':\x20'+config[_0x35bef5(0x211)]+_0x35bef5(0x1f9)+_0x40293f;else _0x498671=getTimeStamp()+_0x35bef5(0x1db)+botID+_0x35bef5(0x1f9)+_0x40293f;if(debugging)console['log'](_0x498671);loggerfile[_0x35bef5(0x1e9)](util[_0x35bef5(0x272)](_0x498671)+'\x0a');if(_0x477ee8){if(debugging)console[_0x35bef5(0x281)](_0x477ee8);loggerfile[_0x35bef5(0x1e9)](util[_0x35bef5(0x272)](_0x477ee8)+'\x0a');}}};process['on'](_0x38a699(0x28b),function(_0x3d7921){const _0x5a533c=_0x38a699;logger[_0x5a533c(0x25b)](_0x3d7921);});settings[_0x38a699(0x203)]!=config[_0x38a699(0x203)]&&updateTimeshift(settings[_0x38a699(0x203)]);settings[_0x38a699(0x19b)]!=config[_0x38a699(0x19b)]&&updateOnepagemode(settings[_0x38a699(0x19b)]);process['send']({'started':_0x38a699(0x26f)},_0x152587=>{}),initializeProcessListeners();function proxyEmit(_0x3c3082,_0x2e2fff=null){const _0xc08b6f=_0x38a699;process[_0xc08b6f(0x2f5)]({'function':_0x3c3082,'args':_0x2e2fff},_0xc8d722=>{});}function initializeProcessListeners(){const _0x4e31f4=_0x38a699;process['on'](_0x4e31f4(0x23f),_0x436a11=>{const _0x31051a=_0x4e31f4;switch(Object[_0x31051a(0x2d3)](_0x436a11)[0x0]){case _0x31051a(0x203):_0x436a11[_0x31051a(0x203)]!=undefined&&(settings[_0x31051a(0x203)]=_0x436a11['timeshift'],updateTimeshift(settings[_0x31051a(0x203)]));break;case _0x31051a(0x19b):_0x436a11['onepagemode']!=undefined&&(settings[_0x31051a(0x19b)]=_0x436a11[_0x31051a(0x19b)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x436a11[_0x31051a(0x1da)]!=undefined&&(bots=JSON[_0x31051a(0x262)](_0x436a11[_0x31051a(0x1da)]),proxyEmit(_0x31051a(0x1da),bots));break;case _0x31051a(0x21b):switch(_0x436a11[_0x31051a(0x21b)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x436a11[_0x31051a(0x293)]);break;case _0x31051a(0x187):deleteHistoryAlerts(_0x436a11[_0x31051a(0x293)]);break;case _0x31051a(0x2d9):getPortfolio(_0x436a11[_0x31051a(0x293)]);break;case'storeConfiguration':storeConfiguration(_0x436a11[_0x31051a(0x293)]);break;case'storeHeadless':storeHeadless(_0x436a11['args']);break;case _0x31051a(0x231):storeFiat(_0x436a11[_0x31051a(0x293)]);break;case _0x31051a(0x23a):resetHistory();break;case _0x31051a(0x1c7):getStartingBalances(getNormalizedPerformance());break;case _0x31051a(0x1c3):placeOrder(_0x436a11[_0x31051a(0x293)]);break;case _0x31051a(0x210):cancelLoading();break;case _0x31051a(0x227):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x31051a(0x1eb):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3cbda1=null,_0x36e942=![]){const _0x3f3541=_0x38a699;logger[_0x3f3541(0x2d4)]('Reset\x20|\x20'+(_0x3cbda1&&_0x3cbda1[_0x3f3541(0x2b9)]>0x0?_0x3f3541(0x1e2)+_0x3cbda1['join'](','):_0x3f3541(0x21c))+_0x3f3541(0x220)+(_0x36e942?_0x3f3541(0x2c3):_0x3f3541(0x18b)));if(pidBalances)clearTimeout(pidBalances);if(!_0x36e942)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x3f3541(0x2de)]!=_0x3f3541(0x2a0)){if(_0x36e942){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x540fb2){handleErrorNoStop(_0x540fb2,_0x3f3541(0x224));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3cbda1);const _0x4b7f18=await getCoins();[currentCoins,currentCoinsAll]=_0x4b7f18,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders[_0x3f3541(0x2b9)]==0x0&&allOpenOrders[_0x3f3541(0x2b9)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4d215f=_0x38a699;exchangeStopped=!![],await exchange[_0x4d215f(0x1b3)]();}async function reloadExchange(){const _0x132738=_0x38a699;logger[_0x132738(0x2d4)](_0x132738(0x2ed));while(lockOrders!=ORDERS[_0x132738(0x185)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x132738(0x1d5)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x2b6a27=config[_0x38a699(0x298)],_0x1e21f8=config[_0x38a699(0x2de)],_0xeb3ad0=config[_0x38a699(0x27b)],_0x2b2fb0=config[_0x38a699(0x230)]){const _0x493f18=_0x38a699;exchange&&await stopExchange();!supportedExchanges()[_0x493f18(0x276)](_0x2b6a27)&&(logHistory(_0x493f18(0x248),_0x493f18(0x198)+_0x2b6a27+_0x493f18(0x22b)),killBot());const _0x23a29a=ccxt[_0x2b6a27[_0x493f18(0x1ba)]()];exchange=new _0x23a29a({'apiKey':_0x1e21f8,'secret':_0xeb3ad0,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x2b2fb0)exchange[_0x493f18(0x275)]=_0x2b2fb0;}function setStableCoins(){const _0x50d240=_0x38a699;let _0x2b35fe=config[_0x50d240(0x2b7)]==_0x50d240(0x17c)?'ETH':_0x50d240(0x1e1),_0x5c32b2=!allSymbols[_0x50d240(0x276)](_0x2b35fe+_0x50d240(0x1ed))?_0x50d240(0x2e3):_0x50d240(0x25e),_0x540148=!allSymbols[_0x50d240(0x276)](_0x2b35fe+_0x50d240(0x1de))?_0x5c32b2:_0x50d240(0x289);stablecoins={'eur':{'coin':''+_0x2b35fe+_0x540148,'symbol':_0x2b35fe+'/'+_0x540148},'usd':{'coin':''+_0x2b35fe+_0x5c32b2,'symbol':_0x2b35fe+'/'+_0x5c32b2}};}async function initwsCcxt(_0x5d411b){const _0x53c2b0=_0x38a699;_0x5d411b==null&&(_0x5d411b=[],config[_0x53c2b0(0x1e0)][_0x53c2b0(0x19a)](_0x1f88b5=>{const _0x49e329=_0x53c2b0;if(!_0x1f88b5[_0x49e329(0x1fc)]&&_0x1f88b5['coin']!=config[_0x49e329(0x2b7)])_0x5d411b[_0x49e329(0x182)](_0x1f88b5['symbol']);}));if(!_0x5d411b[_0x53c2b0(0x276)](stablecoins[_0x53c2b0(0x216)]['symbol']))_0x5d411b['push'](stablecoins['eur']['symbol']);if(!_0x5d411b[_0x53c2b0(0x276)](stablecoins[_0x53c2b0(0x195)][_0x53c2b0(0x1a1)]))_0x5d411b['push'](stablecoins[_0x53c2b0(0x195)]['symbol']);if(config[_0x53c2b0(0x298)][_0x53c2b0(0x258)](_0x53c2b0(0x24b))){if(!_0x5d411b['includes']('BNB/'+config[_0x53c2b0(0x2b7)]))_0x5d411b[_0x53c2b0(0x182)](_0x53c2b0(0x2c6)+config[_0x53c2b0(0x2b7)]);}loadCoins(_0x5d411b);const _0x5e44c3=async _0x167273=>{const _0x85e69e=_0x53c2b0,_0x2b2ebc=await exchange['fetchTicker'](_0x167273);global[_0x85e69e(0x22a)][noslash(_0x2b2ebc[_0x85e69e(0x1a1)])]=_0x2b2ebc[_0x85e69e(0x2bb)];while(!![]){if(!botPaused)try{const _0x5599c4=await exchange[_0x85e69e(0x23e)](_0x167273);global[_0x85e69e(0x22a)][noslash(_0x5599c4[0x0][_0x85e69e(0x1a1)])]=_0x5599c4[0x0]['price'],await sleep(0x3e8);}catch(_0x5c6aaa){if(!exchangeStopped)await handleError(_0x5c6aaa,'watchTrades',_0x167273);}else await sleep(0x3e8);}},_0x42dae5=async _0x3e5fc9=>{const _0x5b03c3=_0x53c2b0;while(!![]){if(!botPaused)try{const _0x11bb03=await exchange['fetchTicker'](_0x3e5fc9);global['change'][_0x11bb03[_0x5b03c3(0x1a1)]]=_0x11bb03[_0x5b03c3(0x264)],await sleep(0x3c*0x3e8);}catch(_0x4d4b4){if(!exchangeStopped)await handleError(_0x4d4b4,_0x5b03c3(0x193),_0x3e5fc9);}else await sleep(0x3e8);}},_0x34c73d=async()=>{const _0x971c9c=_0x53c2b0;while(!![]){if(!botPaused)try{const _0x2f0f31=await exchange[_0x971c9c(0x1d0)]();_0x2f0f31[_0x971c9c(0x19a)](_0x50c57e=>{updateNumberCoinsCcxt(_0x50c57e);});}catch(_0x259190){if(!exchangeStopped)await handleError(_0x259190,'watchOrders');}else await sleep(0x3e8);}};_0x5d411b[_0x53c2b0(0x19a)](async _0x36ba56=>{_0x5e44c3(_0x36ba56),_0x42dae5(_0x36ba56);}),!wsEventsSet&&(wsEventsSet=!![],_0x34c73d(),watchTransactions());}async function watchTransactions(){const _0x273e83=_0x38a699;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x362fbf=await getCoins(),[_0x4dfda6,_0x3ab5f5]=_0x362fbf;let _0x231ed5=[];currentCoins[_0x273e83(0x19a)](_0x21ebd1=>{const _0x16b648=_0x273e83,_0xcf4f17=_0x4dfda6[_0x16b648(0x233)](_0x4b991b=>_0x4b991b[_0x16b648(0x1ae)]==_0x21ebd1[_0x16b648(0x1ae)]);_0xcf4f17&&(_0x21ebd1[_0x16b648(0x232)]!=_0xcf4f17[_0x16b648(0x232)]&&_0x231ed5['push']({'coin':_0x21ebd1[_0x16b648(0x1ae)],'symbol':_0x21ebd1[_0x16b648(0x1a1)],'number':Number(formatResult(_0xcf4f17[_0x16b648(0x232)]-_0x21ebd1['number'],0x8))}));});if(_0x231ed5[_0x273e83(0x2b9)]==0x1&&!blockTransactionDetection){logger[_0x273e83(0x2d4)](_0x273e83(0x263)+lastFees[_0x273e83(0x255)]+'\x20|\x20highest:\x20'+lastFees[_0x273e83(0x1ab)]);if(!lastFees[_0x273e83(0x255)]||_0x231ed5[0x0]['coin']!=lastFees[_0x273e83(0x255)]||_0x231ed5[0x0][_0x273e83(0x232)]>lastFees[_0x273e83(0x1ab)]){let _0x1a5ccb;if(_0x231ed5[0x0][_0x273e83(0x1ae)]!=config[_0x273e83(0x2b7)]){let _0x3b41b0=global[_0x273e83(0x22a)][noslash(_0x231ed5[0x0][_0x273e83(0x1a1)])];_0x1a5ccb=_0x231ed5[0x0][_0x273e83(0x1bf)]?0x1/_0x3b41b0:_0x3b41b0;}else _0x1a5ccb=0x1;_0x231ed5[0x0][_0x273e83(0x217)]=_0x1a5ccb,delete _0x231ed5[0x0]['symbol'];let _0xa95cdc=[],_0xed4c15=[...config[_0x273e83(0x25c)]]||[],_0x5d685e=config[_0x273e83(0x25c)];_0xed4c15[_0x273e83(0x25a)]((_0x220df8,_0x344a1f)=>_0x220df8[_0x273e83(0x1f7)]>_0x344a1f[_0x273e83(0x1f7)]?-0x1:_0x344a1f['date']>_0x220df8[_0x273e83(0x1f7)]?0x1:0x0);const _0x544ce4=getDate();if(_0xed4c15[0x0]){const _0x57df96=fns['parse'](_0xed4c15[0x0][_0x273e83(0x1f7)],'yyyy/MM/dd',new Date()),_0x410ec4=fns[_0x273e83(0x262)](_0x544ce4,_0x273e83(0x1ce),new Date());if(fns['isEqual'](_0x57df96,_0x410ec4)){_0xa95cdc=_0xed4c15[0x0][_0x273e83(0x2e2)];const _0x12dd01=_0xa95cdc[_0x273e83(0x233)](_0x2e8a4f=>_0x2e8a4f[_0x273e83(0x1ae)]==_0x231ed5[0x0]['coin']);_0x12dd01?(_0x12dd01[_0x273e83(0x232)]+=_0x231ed5[0x0]['number'],_0x12dd01[_0x273e83(0x232)]==0x0&&(_0xa95cdc=_0xa95cdc[_0x273e83(0x266)](_0x338ce7=>{const _0xdff067=_0x273e83;return _0x338ce7[_0xdff067(0x1ae)]!=_0x231ed5[0x0][_0xdff067(0x1ae)];}))):_0xa95cdc[_0x273e83(0x182)](_0x231ed5[0x0]);const _0x25809e=_0x5d685e[_0x273e83(0x233)](_0x3f68d3=>_0x3f68d3[_0x273e83(0x1f7)]==_0x544ce4);_0x25809e[_0x273e83(0x2e2)]=_0xa95cdc;}else _0x5d685e[_0x273e83(0x182)]({'date':_0x544ce4,'changes':[_0x231ed5[0x0]]});}const _0x4b2ff7=_0x5d685e['find'](_0x18b2f1=>_0x18b2f1[_0x273e83(0x1f7)]==_0x544ce4);if(_0x4b2ff7){let _0x500df4=!![];_0x4b2ff7[_0x273e83(0x2e2)][_0x273e83(0x19a)](_0x173cb9=>{const _0x39e21f=_0x273e83;if(_0x173cb9[_0x39e21f(0x232)]!=0x0)_0x500df4=![];}),_0x500df4&&(_0x5d685e=_0x5d685e[_0x273e83(0x266)](_0x4d1f4a=>{const _0x45428b=_0x273e83;return _0x4d1f4a[_0x45428b(0x1f7)]!=_0x544ce4;}));}let _0x356026=dbConfig[_0x273e83(0x2b0)](_0x273e83(0x201))[_0x273e83(0x233)]({'botID':botID})['value']();_0x356026&&(dbConfig['get']('bot')[_0x273e83(0x233)]({'botID':botID})[_0x273e83(0x2f1)]({'liquidity':_0x5d685e})[_0x273e83(0x1e9)](),config[_0x273e83(0x25c)]=_0x5d685e),logHistory(_0x273e83(0x25f),_0x273e83(0x17f)+Math[_0x273e83(0x234)](_0x231ed5[0x0][_0x273e83(0x232)])+'\x20'+_0x231ed5[0x0][_0x273e83(0x1ae)]+'\x20'+(_0x231ed5[0x0][_0x273e83(0x232)]>0x0?_0x273e83(0x1df):_0x273e83(0x1ee))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x273e83(0x229),emittedConfiguration());}else logger[_0x273e83(0x2d4)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x273e83(0x234)](_0x231ed5[0x0][_0x273e83(0x232)])+'\x20'+_0x231ed5[0x0][_0x273e83(0x1ae)]+'\x20'+(_0x231ed5[0x0]['number']>0x0?_0x273e83(0x1df):_0x273e83(0x1ee)));transactionDetected=!![],currentCoins=_0x4dfda6,currentCoinsAll=_0x3ab5f5;}await sleep(watchTransactionsInterval);}catch(_0x49dde7){if(!exchangeStopped)await handleError(_0x49dde7,_0x273e83(0x287));}else await sleep(0x3e8);}}async function loadSymbols(_0x1f0556=config[_0x38a699(0x298)],_0x49757e=![]){const _0x2bfbe0=_0x38a699;if(allSymbols&&!_0x49757e)return;try{markets=await exchange[_0x2bfbe0(0x237)](),allSymbols=exchange[_0x2bfbe0(0x26d)]['filter'](_0x44e482=>{const _0x342009=_0x2bfbe0;let _0x19ee38=![];const _0x51e1cd=exceptions[_0x1f0556[_0x342009(0x1ba)]()]||[];return _0x51e1cd[_0x342009(0x19a)](_0x133987=>{const _0x57ab91=_0x342009;if(_0x44e482[_0x57ab91(0x276)](_0x133987))_0x19ee38=!![];}),!_0x19ee38;});}catch(_0x4ac2a5){throw _0x4ac2a5;}}async function initclient(){const _0x5ef1ec=_0x38a699;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5ef1ec(0x24f),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5ef1ec(0x2a8),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x8b8718=getNormalizedPerformance();emitPerformance(_0x8b8718),getStartingBalances(_0x8b8718);}async function toggleBotMode(){const _0x2f44b3=_0x38a699;let _0x3996c9=dbConfig['get'](_0x2f44b3(0x201))[_0x2f44b3(0x233)]({'botID':botID})[_0x2f44b3(0x226)]();if(_0x3996c9){const _0x25515b=!_0x3996c9[_0x2f44b3(0x20e)];dbConfig[_0x2f44b3(0x2b0)]('bot')[_0x2f44b3(0x233)]({'botID':botID})[_0x2f44b3(0x2f1)]({'headless':_0x25515b})['write'](),config[_0x2f44b3(0x20e)]=_0x25515b,proxyEmit(_0x2f44b3(0x229),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x3b69a7=>{});}async function loadCoins(_0x3a8852){const _0x19b4b2=_0x38a699;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1b0347,_0x906a1b=0x0,_0x1a304b=0x0;_0x3a8852[_0x19b4b2(0x19a)](_0x2e641e=>{const _0x1722cd=_0x19b4b2;loading[_0x1722cd(0x1af)][_0x1722cd(0x182)](_0x2e641e);}),loadingCanceled=![];let _0x259f6f=![];while(_0x1b0347!=_0x3a8852[_0x19b4b2(0x2b9)]){_0x1b0347=0x0,_0x3a8852[_0x19b4b2(0x19a)](_0x29b117=>{const _0x180a4c=_0x19b4b2;if(global['ticker'][noslash(_0x29b117)]){loading['remainingSymbols']=loading[_0x180a4c(0x1af)][_0x180a4c(0x266)](_0x2b2634=>_0x2b2634!=_0x29b117);if(!watchedSymbols[_0x180a4c(0x276)](_0x29b117))watchedSymbols[_0x180a4c(0x182)](_0x29b117);_0x1b0347++;}}),loading[_0x19b4b2(0x1fd)]=Math[_0x19b4b2(0x268)](_0x1b0347/_0x3a8852[_0x19b4b2(0x2b9)]*0x64);loading[_0x19b4b2(0x1fd)]!=0x64&&(_0x1a304b>0x1e*0x5&&(loading[_0x19b4b2(0x2ee)]=!![],emitLoadingProgress()),_0x1a304b>0x78*0x5&&!_0x259f6f&&(loading[_0x19b4b2(0x1d2)]=!![],emitLoadingProgress(),_0x259f6f=!![],logHistory(_0x19b4b2(0x248),_0x19b4b2(0x246)+loading[_0x19b4b2(0x1af)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x19b4b2(0x248),_0x19b4b2(0x20f)+loadCoinsRetryInterval/0xea60+_0x19b4b2(0x253)),pidCoinReloading=setTimeout(()=>{const _0x2d9874=_0x19b4b2;process[_0x2d9874(0x2f5)]({'stop':_0x2d9874(0x222)},_0x167c4d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x19b4b2(0x1d2)]=!![],emitLoadingProgress();break;}else _0x1b0347!=_0x906a1b&&(_0x906a1b=_0x1b0347,emitLoadingProgress()),_0x1a304b++,await sleep(0xc8);}_0x1b0347==_0x3a8852[_0x19b4b2(0x2b9)]&&(coinsLoaded=!![],process[_0x19b4b2(0x2f5)]({'status':_0x19b4b2(0x2d6),'live':_0x19b4b2(0x26f)},_0x3f48a1=>{}),_0x259f6f&&logHistory(_0x19b4b2(0x25f),_0x19b4b2(0x295)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x12da52=_0x38a699;proxyEmit(_0x12da52(0x2d2),loading);}async function getFiat(){const _0x5b1393=_0x38a699;let _0x14d389=global[_0x5b1393(0x22a)][stablecoins[_0x5b1393(0x216)][_0x5b1393(0x1ae)]],_0x578cf7=global[_0x5b1393(0x22a)][stablecoins[_0x5b1393(0x195)]['coin']];return{'eur':Number(_0x14d389),'usd':Number(_0x578cf7)};}function capitalize(_0x3c5a25){const _0x2a16e3=_0x38a699;return _0x3c5a25[_0x2a16e3(0x2ba)](0x0,0x1)[_0x2a16e3(0x1ff)]()+_0x3c5a25['substring'](0x1);}function supportedExchanges(){const _0x5631b9=_0x38a699,_0x22aaee=['ws',_0x5631b9(0x193),'fetchTicker','watchTrades',_0x5631b9(0x1d0),'cancelOrder','createOrder',_0x5631b9(0x235),'fetchClosedOrders',_0x5631b9(0x1f6)];let _0x4ac076=[],_0x201f2b=[],_0x388034=ccxt[_0x5631b9(0x24f)];_0x388034[_0x5631b9(0x19a)](_0x329967=>{const _0x1efc30=_0x5631b9;try{const _0x31b025=new ccxt[_0x329967]();if(_0x31b025[_0x1efc30(0x1d7)]['ws'])_0x201f2b[_0x1efc30(0x182)](_0x31b025);}catch(_0xc80c1e){}}),_0x201f2b[_0x5631b9(0x19a)](_0x6bfc0f=>{const _0x38cbc4=_0x5631b9;let _0x3dcf7c=0x0;_0x22aaee[_0x38cbc4(0x19a)](_0x336bd0=>{const _0x167a78=_0x38cbc4;_0x336bd0 in _0x6bfc0f[_0x167a78(0x1d7)]&&_0x6bfc0f[_0x167a78(0x1d7)][_0x336bd0]&&_0x3dcf7c++;}),_0x3dcf7c==_0x22aaee[_0x38cbc4(0x2b9)]&&_0x4ac076[_0x38cbc4(0x182)](capitalize(_0x6bfc0f['id']));});let _0x1f8801=[];return _0x388034[_0x5631b9(0x19a)](_0x5f1931=>{const _0x26d0da=_0x5631b9;_0x5f1931=capitalize(_0x5f1931);if(!_0x4ac076[_0x26d0da(0x276)](_0x5f1931))_0x1f8801[_0x26d0da(0x182)](_0x5f1931);}),_0x4ac076;}function setStartDatePerformance(){const _0xe29907=_0x38a699;if(config&&config[_0xe29907(0x25c)][0x0][_0xe29907(0x2e2)]['length']!=0x0){const _0x46fe30=config[_0xe29907(0x25c)][0x0][_0xe29907(0x2e2)];dbPerformance[_0xe29907(0x2b0)](_0xe29907(0x2d1))[_0xe29907(0x233)]({'date':config['startdate']})['assign']({'coins':_0x46fe30})[_0xe29907(0x1e9)]();}}async function recreateCoinResults(){const _0x5c1050=_0x38a699;let _0x2e01de,_0x2f5f98=[];try{const _0x556771=fns[_0x5c1050(0x272)](fns['parseISO'](config[_0x5c1050(0x2ce)][_0x5c1050(0x1d1)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x3a0b67 of currentCoins){if(_0x3a0b67[_0x5c1050(0x1ae)]!=config[_0x5c1050(0x2b7)]){let _0x39d72d=0x0,_0x2f3316,_0x378fee;_0x2e01de=await getAllEventOrders(_0x3a0b67[_0x5c1050(0x1a1)]);if(_0x2e01de[_0x5c1050(0x2b9)]>0x0)_0x2e01de[_0x5c1050(0x19a)](_0xf71a0a=>{const _0x1968bb=_0x5c1050,_0x30d541=_0x3a0b67[_0x1968bb(0x1a1)][_0x1968bb(0x276)](config['basecoin']+'/');_0x2f5f98[_0x1968bb(0x182)]({'datetime':_0xf71a0a[_0x1968bb(0x27e)],'coin':_0x3a0b67[_0x1968bb(0x1ae)],'symbol':_0x3a0b67['symbol'],'side':_0xf71a0a[_0x1968bb(0x1cf)],'reverse':_0x30d541,'amount':formatResult(_0xf71a0a['filled'],0x8),'filled':formatResult(_0xf71a0a[_0x1968bb(0x1fa)],0x8),'price':formatResult(_0xf71a0a[_0x1968bb(0x217)],0x8)}),_0x39d72d=_0xf71a0a[_0x1968bb(0x1cf)]==_0x1968bb(0x291)?_0x39d72d+_0xf71a0a[_0x1968bb(0x1fa)]:_0x39d72d-_0xf71a0a[_0x1968bb(0x1fa)];if(!_0x378fee)_0x378fee=_0xf71a0a[_0x1968bb(0x217)];});_0x2f3316=_0x3a0b67[_0x5c1050(0x232)]-_0x39d72d;let _0x10d0b3;config[_0x5c1050(0x25c)][_0x5c1050(0x19a)](_0x28679d=>{const _0x29f7a4=_0x5c1050;!_0x10d0b3&&(_0x10d0b3=_0x28679d[_0x29f7a4(0x2e2)][_0x29f7a4(0x233)](_0x8cda4=>_0x8cda4[_0x29f7a4(0x1ae)]==_0x3a0b67['coin']),_0x10d0b3&&(_0x2f3316=_0x10d0b3[_0x29f7a4(0x232)],_0x378fee=_0x10d0b3['price']));});let _0x5cdc77=dbCoinResults[_0x5c1050(0x2b0)]('coins')[_0x5c1050(0x233)]({'coin':_0x3a0b67[_0x5c1050(0x1ae)]})['value']();_0x5cdc77={'coin':_0x3a0b67[_0x5c1050(0x1ae)],'number':_0x2f3316,'breakeven':_0x378fee,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5c1050(0x2b0)](_0x5c1050(0x27a))['find']({'coin':_0x3a0b67[_0x5c1050(0x1ae)]})[_0x5c1050(0x2f1)](_0x5cdc77)[_0x5c1050(0x1e9)]();}}_0x2f5f98[_0x5c1050(0x25a)]((_0x53cfee,_0x32e195)=>_0x53cfee[_0x5c1050(0x27e)]>_0x32e195[_0x5c1050(0x27e)]?0x1:_0x32e195[_0x5c1050(0x27e)]>_0x53cfee[_0x5c1050(0x27e)]?-0x1:0x0);let _0x249883=0x0;for(let _0x579dd9 of _0x2f5f98){await updateCoinResults(_0x579dd9,!![]);}}catch(_0x1a7773){await handleError(_0x1a7773,_0x5c1050(0x1c8));}}async function getAllEventOrders(_0x399ebf){const _0x4ab696=_0x38a699;let _0x1ba7b2=[],_0x3e1019=dbLogs[_0x4ab696(0x2b0)](_0x4ab696(0x240))[_0x4ab696(0x266)](_0x25da5f=>{const _0x946ce=_0x4ab696,_0x1fbef9=_0x25da5f[_0x946ce(0x29e)][_0x946ce(0x1ba)]();return _0x1fbef9[_0x946ce(0x276)](_0x399ebf[_0x946ce(0x1ba)]())&&(_0x1fbef9[_0x946ce(0x276)](_0x946ce(0x1c6))&&_0x1fbef9['includes']('order')||_0x1fbef9[_0x946ce(0x276)](_0x946ce(0x1fa))&&_0x1fbef9[_0x946ce(0x276)](_0x946ce(0x2e5)));})['sortBy'](_0x4ab696(0x2e6))['value']();return _0x3e1019[_0x4ab696(0x19a)](_0x48c1c5=>{const _0x3dc653=_0x4ab696,_0x5cb30d=_0x48c1c5[_0x3dc653(0x29e)]['includes'](_0x3dc653(0x2b6))?_0x3dc653(0x2b6):_0x3dc653(0x291),_0xb7be10=/#([0-9]|\.)+\s/i,_0x14e28f=Number(_0xb7be10[_0x3dc653(0x283)](_0x48c1c5[_0x3dc653(0x29e)])[0x0][_0x3dc653(0x1ca)](0x1)),_0x9e2000=/@([0-9]|\.)+$/i,_0x438cd8=Number(_0x9e2000[_0x3dc653(0x283)](_0x48c1c5[_0x3dc653(0x29e)])[0x0][_0x3dc653(0x1ca)](0x1));_0x1ba7b2[_0x3dc653(0x182)]({'datetime':_0x48c1c5[_0x3dc653(0x2e6)],'coin':symbolToCoin(_0x399ebf),'symbol':_0x399ebf,'side':_0x5cb30d,'amount':_0x14e28f,'filled':_0x14e28f,'price':_0x438cd8});}),_0x1ba7b2;}async function getAllOrders(_0x1d1a3a,_0x1ec0ef){const _0x3bd3b1=_0x38a699;let _0x5022df=[];while(_0x1ec0ef<exchange[_0x3bd3b1(0x1f3)]()){const _0x155e4f=0x1f4,_0x2426a8=await exchange[_0x3bd3b1(0x1dd)](_0x1d1a3a,_0x1ec0ef,_0x155e4f);if(_0x2426a8[_0x3bd3b1(0x2b9)])_0x1ec0ef=_0x2426a8[_0x2426a8[_0x3bd3b1(0x2b9)]-0x1][_0x3bd3b1(0x26b)]+0x1,_0x5022df=_0x5022df[_0x3bd3b1(0x1e8)](_0x2426a8);else break;}return _0x5022df;}async function validate24hChanges(){const _0x541dbc=_0x38a699;for(const _0x565a3c of currentCoins){if(_0x565a3c[_0x541dbc(0x1ae)]!=config[_0x541dbc(0x2b7)]){let _0x5a23b0;_0x565a3c[_0x541dbc(0x1bf)]?_0x5a23b0=formatResult((0x1/(global[_0x541dbc(0x1b2)][noslash(_0x565a3c['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x5a23b0=global[_0x541dbc(0x1b2)][noslash(_0x565a3c['symbol'])],_0x5a23b0<config[_0x541dbc(0x184)]&&(logHistory(_0x541dbc(0x248),_0x565a3c[_0x541dbc(0x1ae)]+_0x541dbc(0x26c)+_0x5a23b0+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x541dbc(0x248),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x319cde,_0x25c3ac){const _0x334392=_0x38a699;if(!_0x319cde)return!![];const _0x3ae31f=_0x25c3ac[_0x334392(0x1a3)]('.'),_0x219f82=_0x319cde['split']('.');for(var _0x576da0=0x0;_0x576da0<_0x219f82[_0x334392(0x2b9)];_0x576da0++){const _0x139089=~~_0x219f82[_0x576da0],_0x36796a=~~_0x3ae31f[_0x576da0];if(_0x139089<_0x36796a)return!![];if(_0x139089>_0x36796a)return![];}return![];}async function oneTimeMigration(){const _0xe5d07=_0x38a699;let _0x4ef604=dbLogs[_0xe5d07(0x2b0)]('version')['value']();if(isOlderVersion(_0x4ef604,_0xe5d07(0x2c0))){let _0x2d9e54=[];const _0x24594e=dbLogs[_0xe5d07(0x2b0)](_0xe5d07(0x240))[_0xe5d07(0x226)]();_0x24594e[_0xe5d07(0x19a)](_0x13aaeb=>{const _0x31165f=_0xe5d07;_0x2d9e54[_0x31165f(0x182)]({'time':_0x13aaeb[_0x31165f(0x2e6)],'type':_0x13aaeb['type'],'event':_0x13aaeb[_0x31165f(0x29e)]});}),dbLogs[_0xe5d07(0x2b0)]('logs')[_0xe5d07(0x2f1)](_0x2d9e54)[_0xe5d07(0x1e9)]();}let _0x55b4b3=dbConfig[_0xe5d07(0x2b0)](_0xe5d07(0x2db))['value']();if(isOlderVersion(_0x55b4b3,_0xe5d07(0x2c0))){let _0x20c11e=dbConfig[_0xe5d07(0x2b0)]('bot')['find']({'botID':botID})[_0xe5d07(0x226)]();if(_0x20c11e){let _0x5620e0=[];_0x20c11e['portfolio']['forEach'](_0x289040=>{const _0x37b034=_0xe5d07;_0x5620e0[_0x37b034(0x182)]({'coin':_0x289040[_0x37b034(0x1ae)],'number':_0x289040[_0x37b034(0x23b)],'price':_0x289040[_0x37b034(0x2c5)]}),delete _0x289040[_0x37b034(0x23b)],delete _0x289040[_0x37b034(0x2c5)];});if(_0x5620e0[_0xe5d07(0x2b9)]!==0x0)fs[_0xe5d07(0x2df)](configbackuppath+(_0xe5d07(0x19e)+botID+_0xe5d07(0x1d3)),JSON['stringify'](_0x5620e0,null,0x4),function(_0x25d029){if(_0x25d029){}});const _0x372d37=(_0x2fdf8d,_0x2a6c24)=>{const _0x2821ec=_0xe5d07;let _0x10ad82=[];_0x2a6c24[_0x2821ec(0x19a)](_0x3e1829=>{const _0x421e79=_0x2821ec,_0x2f9d51=_0x2fdf8d['find'](_0x45f9c0=>_0x45f9c0['coin']==_0x3e1829[_0x421e79(0x1ae)]);if(!_0x2f9d51)_0x10ad82[_0x421e79(0x182)](_0x3e1829);});let _0x3727d8=[];return _0x2fdf8d[_0x2821ec(0x19a)](_0x1e0c1f=>{const _0x562794=_0x2821ec,_0x45ee6f=_0x2a6c24['find'](_0x5d439d=>_0x5d439d[_0x562794(0x1ae)]==_0x1e0c1f[_0x562794(0x1ae)]);if(!_0x45ee6f||_0x45ee6f['number']==0x0&&_0x1e0c1f[_0x562794(0x232)]!=0x0)_0x3727d8[_0x562794(0x182)](_0x1e0c1f);}),{'missingDay1':_0x10ad82,'notInDay2':_0x3727d8};},_0x236f4d=dbPerformance[_0xe5d07(0x2b0)](_0xe5d07(0x2d1))[_0xe5d07(0x2f2)]()[_0xe5d07(0x226)]();if(_0x236f4d[_0xe5d07(0x2b9)]>0x1){const {missingDay1:_0x3b187c,notInDay2:_0x197763}=_0x372d37(_0x5620e0,_0x236f4d[0x1][_0xe5d07(0x27a)]);_0x5620e0=[..._0x5620e0,..._0x3b187c],_0x197763['forEach'](_0x53258a=>{const _0x2518cc=_0xe5d07;let _0xda1168=_0x5620e0[_0x2518cc(0x194)](_0x41abed=>_0x41abed[_0x2518cc(0x1ae)]==_0x53258a['coin']);_0xda1168!=-0x1&&_0x5620e0[_0x2518cc(0x29d)](_0xda1168,0x1);});}_0x5620e0[_0xe5d07(0x25a)]((_0x349240,_0x11f09f)=>_0x349240[_0xe5d07(0x1ae)]>_0x11f09f['coin']?0x1:_0x11f09f[_0xe5d07(0x1ae)]>_0x349240['coin']?-0x1:0x0);let _0x24cd6a=[{'date':_0x20c11e['startdate'],'changes':_0x5620e0}];_0x236f4d[_0xe5d07(0x2b9)]>0x2&&_0x236f4d[_0xe5d07(0x19a)]((_0x5a0015,_0x4ff97f)=>{const _0x5eb3ff=_0xe5d07;if(_0x4ff97f>0x0&&_0x4ff97f<_0x236f4d[_0x5eb3ff(0x2b9)]-0x1){const {missingDay1:_0x207364,notInDay2:_0x4c7731}=_0x372d37(_0x236f4d[_0x4ff97f][_0x5eb3ff(0x27a)],_0x236f4d[_0x4ff97f+0x1]['coins']);_0x5620e0=[],(_0x207364['length']!=0x0||_0x4c7731['length']!=0x0)&&(_0x207364[_0x5eb3ff(0x2b9)]!=0x0&&_0x5620e0[_0x5eb3ff(0x182)](..._0x207364),_0x4c7731[_0x5eb3ff(0x2b9)]!=0x0&&(_0x4c7731[_0x5eb3ff(0x19a)](_0x6e92df=>{const _0x223a0b=_0x5eb3ff;_0x6e92df[_0x223a0b(0x232)]=-_0x6e92df[_0x223a0b(0x232)];}),_0x5620e0[_0x5eb3ff(0x182)](..._0x4c7731)),_0x5620e0[_0x5eb3ff(0x25a)]((_0x52b77e,_0x1b7711)=>_0x52b77e[_0x5eb3ff(0x1ae)]>_0x1b7711[_0x5eb3ff(0x1ae)]?0x1:_0x1b7711[_0x5eb3ff(0x1ae)]>_0x52b77e[_0x5eb3ff(0x1ae)]?-0x1:0x0),_0x24cd6a[_0x5eb3ff(0x182)]({'date':_0x236f4d[_0x4ff97f+0x1][_0x5eb3ff(0x1f7)],'changes':_0x5620e0}));}}),dbConfig[_0xe5d07(0x2b0)](_0xe5d07(0x201))[_0xe5d07(0x233)]({'botID':botID})['assign']({..._0x20c11e,'liquidity':_0x24cd6a})['write']();}}if(isOlderVersion(_0x55b4b3,_0xe5d07(0x29a))){let _0x24f81d=dbConfig[_0xe5d07(0x2b0)](_0xe5d07(0x201))['find']({'botID':botID})['value']();if(_0x24f81d){const _0x1d5756=_0x24f81d[_0xe5d07(0x298)],_0x1162d9=_0x1d5756?capitalize(_0x1d5756):_0xe5d07(0x24b);dbConfig[_0xe5d07(0x2b0)](_0xe5d07(0x201))[_0xe5d07(0x233)]({'botID':botID})[_0xe5d07(0x2f1)]({'exchange':_0x1162d9})[_0xe5d07(0x1e9)]();}}let _0x3356a0=dbPerformance[_0xe5d07(0x2b0)](_0xe5d07(0x2db))['value']();isOlderVersion(_0x3356a0,_0xe5d07(0x2c0))&&setStartDatePerformance();let _0x34c709=dbCoinResults[_0xe5d07(0x2b0)](_0xe5d07(0x2db))['value']();if(isOlderVersion(_0x34c709,_0xe5d07(0x24c))){let _0x141988=dbCoinResults[_0xe5d07(0x2b0)]('coins')['value']();if(_0x141988['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5526b5=_0x38a699;dbConfig['set'](_0x5526b5(0x2db),serverversion)[_0x5526b5(0x1e9)](),dbPerformance[_0x5526b5(0x1e4)](_0x5526b5(0x2db),serverversion)[_0x5526b5(0x1e9)](),dbLogs[_0x5526b5(0x1e4)](_0x5526b5(0x2db),serverversion)[_0x5526b5(0x1e9)](),dbCoinResults[_0x5526b5(0x1e4)](_0x5526b5(0x2db),serverversion)['write']();}function getConfiguration(_0x225bd2){const _0xc35e2c=_0x38a699;let _0x42b501=dbConfig[_0xc35e2c(0x2b0)]('bot')[_0xc35e2c(0x233)]({'botID':_0x225bd2})['value']();if(_0x42b501){let _0x348173=![];typeof _0x42b501['threshold']==_0xc35e2c(0x1d9)&&(_0x42b501={..._0x42b501,'threshold':Number(_0x42b501[_0xc35e2c(0x21a)])},_0x348173=!![]),_0x42b501['change24h']==null&&(_0x42b501={..._0x42b501,'change24h':-0x14},_0x348173=!![]),!_0x42b501[_0xc35e2c(0x190)]&&(_0x42b501={..._0x42b501,'fiat':_0xc35e2c(0x25e)},_0x348173=!![]),!_0x42b501[_0xc35e2c(0x19b)]&&(_0x42b501={..._0x42b501,'onepagemode':settings[_0xc35e2c(0x19b)]},_0x348173=!![]),_0x348173&&(_0x42b501={'botID':_0x42b501[_0xc35e2c(0x186)],'exchange':_0x42b501[_0xc35e2c(0x298)],'apiKey':_0x42b501[_0xc35e2c(0x2de)],'apiSecret':_0x42b501['apiSecret'],'apiPassword':_0x42b501[_0xc35e2c(0x230)],'basecoin':_0x42b501[_0xc35e2c(0x2b7)],'botname':_0x42b501[_0xc35e2c(0x211)],'showname':_0x42b501[_0xc35e2c(0x1dc)],'threshold':_0x42b501[_0xc35e2c(0x21a)],'ordertype':_0x42b501['ordertype'],'timeout':_0x42b501[_0xc35e2c(0x2ee)],'fiat':_0x42b501[_0xc35e2c(0x190)],'startdate':_0x42b501[_0xc35e2c(0x2ce)],'recreate':_0x42b501[_0xc35e2c(0x2c2)],'timeshift':_0x42b501['timeshift'],'onepagemode':_0x42b501[_0xc35e2c(0x19b)],'headless':_0x42b501[_0xc35e2c(0x20e)],'cooldown':_0x42b501[_0xc35e2c(0x254)],'change24h':_0x42b501[_0xc35e2c(0x184)],'emojibuy':_0x42b501[_0xc35e2c(0x290)],'emojisell':_0x42b501[_0xc35e2c(0x26a)],'portfolio':_0x42b501[_0xc35e2c(0x1e0)],'liquidity':_0x42b501[_0xc35e2c(0x25c)],'openOrders':_0x42b501[_0xc35e2c(0x17d)]},dbConfig['get'](_0xc35e2c(0x201))[_0xc35e2c(0x2b8)]()[_0xc35e2c(0x1e9)](),dbConfig[_0xc35e2c(0x2b0)]('bot')[_0xc35e2c(0x182)](_0x42b501)[_0xc35e2c(0x1e9)]());}else _0x42b501={'botID':_0x225bd2,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xc35e2c(0x247)+_0x225bd2,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0xc35e2c(0x25e),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xc35e2c(0x203)],'onepagemode':settings[_0xc35e2c(0x19b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x42b501;}function emittedConfiguration(){const _0x1d0ba8=_0x38a699;let _0x297921;if(config[_0x1d0ba8(0x2de)]=='')_0x297921={...config,'configstate':'initial'};else config['apiKey']=='***'?_0x297921={...config,'configstate':_0x1d0ba8(0x1c5)}:(_0x297921={...config,'apiKey':'************','apiSecret':_0x1d0ba8(0x2a3)},config[_0x1d0ba8(0x230)]&&(_0x297921[_0x1d0ba8(0x230)]=_0x1d0ba8(0x2a3)));return _0x297921;}function getSettings(){const _0x3101cc=_0x38a699;return dbSettings[_0x3101cc(0x2b0)](_0x3101cc(0x2eb))[_0x3101cc(0x226)]();}function getSecure(){const _0xa0f767=_0x38a699;return dbSecure[_0xa0f767(0x2b0)](_0xa0f767(0x2ab))[_0xa0f767(0x226)]()||{};}function updateTimeshift(_0x66fe86){const _0x414623=_0x38a699;let _0x5bf37e=dbConfig[_0x414623(0x2b0)](_0x414623(0x201))[_0x414623(0x233)]({'botID':botID})[_0x414623(0x226)]();_0x5bf37e&&dbConfig[_0x414623(0x2b0)](_0x414623(0x201))[_0x414623(0x233)]({'botID':botID})[_0x414623(0x2f1)]({'timeshift':_0x66fe86})[_0x414623(0x1e9)](),config['timeshift']=_0x66fe86,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x52a45a){const _0x60cca5=_0x38a699;let _0x4689e7=dbConfig['get'](_0x60cca5(0x201))[_0x60cca5(0x233)]({'botID':botID})[_0x60cca5(0x226)]();_0x4689e7&&dbConfig[_0x60cca5(0x2b0)](_0x60cca5(0x201))[_0x60cca5(0x233)]({'botID':botID})['assign']({'onepagemode':_0x52a45a})[_0x60cca5(0x1e9)](),config[_0x60cca5(0x19b)]=_0x52a45a,proxyEmit(_0x60cca5(0x229),emittedConfiguration());}async function storeConfiguration(_0x320852){const _0x117924=_0x38a699;logger[_0x117924(0x2d4)](_0x117924(0x2ac)),blockTransactionDetection=!![],logger[_0x117924(0x2d4)]('Transaction\x20detection\x20blocked');let _0x48318f=[],_0xf65bff=![],_0x329959=[];_0x320852[_0x117924(0x1e0)][_0x117924(0x19a)](_0x233a56=>{const _0x336a21=_0x117924;if(!_0x233a56[_0x336a21(0x1fc)]&&_0x233a56[_0x336a21(0x1ae)]!=_0x320852[_0x336a21(0x2b7)])_0x329959[_0x336a21(0x182)](_0x233a56['symbol']);}),_0x329959[_0x117924(0x19a)](_0x471524=>{const _0x22c1ee=_0x117924,_0xb634d3=watchedSymbols[_0x22c1ee(0x276)](_0x471524);!_0xb634d3&&_0x48318f[_0x22c1ee(0x182)](_0x471524);});_0x48318f[_0x117924(0x2b9)]>0x0?_0xf65bff=!![]:currentCoins[_0x117924(0x19a)](_0x3c0960=>{const _0x9bc857=_0x117924;if(_0x3c0960[_0x9bc857(0x1ae)]!=config[_0x9bc857(0x2b7)]){const _0x5d492c=_0x329959[_0x9bc857(0x233)](_0x6037d1=>_0x6037d1==_0x3c0960[_0x9bc857(0x1a1)]);!_0x5d492c&&(_0xf65bff=!![]);}});let _0x3bb33f=dbConfig[_0x117924(0x2b0)]('bot')['find']({'botID':botID})[_0x117924(0x226)]();_0x320852={..._0x320852,'apiKey':crypt[_0x117924(0x2d8)](secure[_0x117924(0x1ea)],_0x320852[_0x117924(0x2de)])[_0x117924(0x23f)],'apiSecret':crypt[_0x117924(0x2d8)](secure[_0x117924(0x1ea)],_0x320852[_0x117924(0x27b)])['message']};_0x320852['apiPassword']&&(_0x320852[_0x117924(0x230)]=crypt['decrypt'](secure[_0x117924(0x1ea)],_0x320852[_0x117924(0x230)])[_0x117924(0x23f)]);let _0xf8d16e=![];_0x3bb33f?(_0x320852[_0x117924(0x2de)]==_0x117924(0x2a3)?_0x320852[_0x117924(0x2de)]=config[_0x117924(0x2de)]:_0xf8d16e=!![],_0x320852['apiSecret']=='************'?_0x320852[_0x117924(0x27b)]=config[_0x117924(0x27b)]:_0xf8d16e=!![],_0x320852['apiPassword']=='************'?_0x320852[_0x117924(0x230)]=config[_0x117924(0x230)]:_0xf8d16e=!![],dbConfig['get'](_0x117924(0x201))[_0x117924(0x233)]({'botID':botID})[_0x117924(0x2f1)](_0x320852)['write']()):(dbConfig[_0x117924(0x2b0)](_0x117924(0x201))['push'](_0x320852)['write'](),_0xf8d16e=!![],process['send']({'status':_0x117924(0x2d6),'live':_0x117924(0x26f)},_0x20607f=>{}));config={..._0x320852},setStartDatePerformance(),process['send']({'botname':_0x320852['botname']},_0xa3e430=>{}),updateBotManager(),initialPerformanceStored=![],proxyEmit('configuration-stored'),await initCoinResults();if(_0xf8d16e)await reset(_0x48318f,!![]);else{if(_0xf65bff)await reset(_0x48318f,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger['debug'](_0x117924(0x19c));}async function storeHeadless(_0x51586f){const _0x5c694b=_0x38a699,_0x320c52={...config,'headless':_0x51586f[_0x5c694b(0x20e)]};let _0x555357=dbConfig['get'](_0x5c694b(0x201))[_0x5c694b(0x233)]({'botID':botID})['value']();_0x555357&&dbConfig[_0x5c694b(0x2b0)](_0x5c694b(0x201))['find']({'botID':botID})[_0x5c694b(0x2f1)](_0x320c52)['write'](),config={..._0x320c52},updateBotManager(),proxyEmit(_0x5c694b(0x229),emittedConfiguration());}async function storeFiat(_0x590a3f){const _0x551af0=_0x38a699,_0x2e57aa={...config,'fiat':_0x590a3f};let _0x2af37b=dbConfig[_0x551af0(0x2b0)](_0x551af0(0x201))[_0x551af0(0x233)]({'botID':botID})[_0x551af0(0x226)]();_0x2af37b&&dbConfig[_0x551af0(0x2b0)]('bot')[_0x551af0(0x233)]({'botID':botID})['assign'](_0x2e57aa)[_0x551af0(0x1e9)](),config={..._0x2e57aa},proxyEmit(_0x551af0(0x229),emittedConfiguration());}function resetHistory(){const _0x1cabda=_0x38a699;logger[_0x1cabda(0x22e)](_0x1cabda(0x2cb));try{if(fs[_0x1cabda(0x18f)](path[_0x1cabda(0x2dc)](configpath,_0x1cabda(0x2d7)+botID+'-events.json')))fs[_0x1cabda(0x188)](path['join'](configpath,'bot-'+botID+_0x1cabda(0x24e)));if(fs[_0x1cabda(0x18f)](path[_0x1cabda(0x2dc)](configpath,_0x1cabda(0x2d7)+botID+_0x1cabda(0x21d))))fs[_0x1cabda(0x188)](path[_0x1cabda(0x2dc)](configpath,_0x1cabda(0x2d7)+botID+_0x1cabda(0x21d)));if(fs[_0x1cabda(0x18f)](path[_0x1cabda(0x2dc)](configpath,'bot-'+botID+'-results.json')))fs['unlinkSync'](path[_0x1cabda(0x2dc)](configpath,'bot-'+botID+_0x1cabda(0x2d0)));}catch(_0x29425e){if(_0x29425e)logger[_0x1cabda(0x22e)](_0x1cabda(0x2c4),_0x29425e);}const _0x1a2bf4=getDate();let _0x5e0656=[];currentCoins[_0x1cabda(0x19a)](_0xcb3a58=>{const _0xfc662e=_0x1cabda;_0x5e0656[_0xfc662e(0x182)]({'coin':_0xcb3a58[_0xfc662e(0x1ae)],'number':_0xcb3a58[_0xfc662e(0x232)],'price':_0xcb3a58[_0xfc662e(0x2bb)]});});let _0x3093d0=dbConfig[_0x1cabda(0x2b0)](_0x1cabda(0x201))[_0x1cabda(0x233)]({'botID':botID})[_0x1cabda(0x226)]();_0x3093d0&&(dbConfig[_0x1cabda(0x2b0)](_0x1cabda(0x201))[_0x1cabda(0x233)]({'botID':botID})[_0x1cabda(0x2f1)]({'liquidity':[{'date':_0x1a2bf4,'changes':_0x5e0656}]})[_0x1cabda(0x1e9)](),config[_0x1cabda(0x25c)]=[]),process['send']({'stop':'restart'},_0x54d346=>{});}function noslash(_0x3813ea){const _0x119ac2=_0x38a699;return _0x3813ea[_0x119ac2(0x1d1)]('/','');}function updateHighestFee(_0x3209b7,_0x37a21e){const _0x4e123e=_0x38a699;lastFees[_0x4e123e(0x255)]=_0x3209b7,lastFees[_0x4e123e(0x256)][_0x4e123e(0x2b9)]===0x14&&lastFees[_0x4e123e(0x256)][_0x4e123e(0x2ef)](),lastFees[_0x4e123e(0x256)][_0x4e123e(0x182)](_0x37a21e),lastFees[_0x4e123e(0x1ab)]=Math[_0x4e123e(0x2f0)](...lastFees[_0x4e123e(0x256)]);}async function updateNumberCoinsCcxt(_0x20b03a){const _0x2ac8bd=_0x38a699;logger[_0x2ac8bd(0x2d4)]('0\x20-\x20EXECUTION:\x20'+_0x20b03a[_0x2ac8bd(0x1a1)]+_0x2ac8bd(0x220)+_0x20b03a['status']+_0x2ac8bd(0x220)+_0x20b03a['id']+_0x2ac8bd(0x220)+_0x20b03a['clientOrderId']);let _0x4b0e7e=_0x20b03a[_0x2ac8bd(0x19d)],_0x1a2dd1=![];currentCoins[_0x2ac8bd(0x19a)](_0x566a62=>{const _0x49d791=_0x2ac8bd;_0x566a62[_0x49d791(0x1a1)]==_0x20b03a[_0x49d791(0x1a1)]&&(_0x1a2dd1=!![]);});if(!_0x1a2dd1)return;const _0x23b619=currentCoins[_0x2ac8bd(0x233)](_0x4451dc=>_0x4451dc[_0x2ac8bd(0x1a1)]==_0x20b03a[_0x2ac8bd(0x1a1)]),_0x5172d4=_0x2138ff=>{const _0x206464=_0x2ac8bd;if(_0x23b619)_0x23b619[_0x206464(0x24a)]=_0x2138ff;};if(_0x4b0e7e=='open')_0x5172d4(_0x2ac8bd(0x1fb));else{if(_0x4b0e7e=='canceled'){_0x5172d4(_0x2ac8bd(0x18e));const _0x327dfd=await getCoins();[currentCoins,currentCoinsAll]=_0x327dfd,await getOpenOrders(),handleOpenOrders();}else{if(_0x4b0e7e=='closed'){logger[_0x2ac8bd(0x2d4)]('1\x20-\x20FILLED:\x20'+_0x20b03a[_0x2ac8bd(0x1a1)]+_0x2ac8bd(0x220)+_0x20b03a[_0x2ac8bd(0x1fa)]+_0x2ac8bd(0x220)+_0x20b03a['id']+_0x2ac8bd(0x220)+_0x20b03a[_0x2ac8bd(0x241)]);let _0x32ce77=![];if(lastOrders)lastOrders[_0x2ac8bd(0x19a)](async _0xa7d4b7=>{const _0x842dff=_0x2ac8bd;if(_0xa7d4b7['customId']==_0x20b03a[_0x842dff(0x241)]){logger[_0x842dff(0x2d4)](_0x842dff(0x2f4)+_0x20b03a['clientOrderId']),_0x32ce77=!![];if(_0xa7d4b7[_0x842dff(0x1fa)]==0x0){logger[_0x842dff(0x2d4)](_0x842dff(0x278)+_0x20b03a[_0x842dff(0x241)]);_0x20b03a[_0x842dff(0x2dd)]?_0xa7d4b7[_0x842dff(0x217)]=_0x20b03a['average']:_0xa7d4b7[_0x842dff(0x217)]=_0x20b03a['price'];_0xa7d4b7['filled']=_0x20b03a[_0x842dff(0x1fa)],_0xa7d4b7[_0x842dff(0x1c9)]={'currency':_0x20b03a['fee']?_0x20b03a[_0x842dff(0x1c9)][_0x842dff(0x255)]:null,'cost':_0x20b03a['fee']?_0x20b03a['fee']['cost']:0x0},updateHighestFee(_0xa7d4b7['fee'][_0x842dff(0x255)],_0xa7d4b7[_0x842dff(0x1c9)][_0x842dff(0x2a5)]),_0x5172d4(_0x842dff(0x1fa)),await validateOrders();if(lockOrders==ORDERS[_0x842dff(0x183)]){const _0x6a9456=await getCoins();[currentCoins,currentCoinsAll]=_0x6a9456;}await updateCoinResults(_0xa7d4b7);}}});if(!_0x32ce77){logger[_0x2ac8bd(0x2d4)](_0x2ac8bd(0x288)+_0x20b03a['id']),_0x5172d4(_0x2ac8bd(0x1fa));const _0x2e4dc9=await getCoins();[currentCoins,currentCoinsAll]=_0x2e4dc9,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1d27e6=JSON[_0x2ac8bd(0x262)](lastBalances[_0x2ac8bd(0x1e0)]);const _0x30c95e=_0x1d27e6[_0x2ac8bd(0x233)](_0x1d0a83=>_0x1d0a83[_0x2ac8bd(0x1a1)]==_0x20b03a[_0x2ac8bd(0x1a1)]);if(_0x30c95e){if(_0x4b0e7e=='open')_0x30c95e[_0x2ac8bd(0x24a)]=_0x30c95e['orderstatus']=='filled'?'filled':_0x2ac8bd(0x1fb);else{if(_0x4b0e7e==_0x2ac8bd(0x18e))_0x30c95e['orderstatus']=_0x30c95e[_0x2ac8bd(0x24a)]==_0x2ac8bd(0x1fa)?_0x2ac8bd(0x1fa):_0x2ac8bd(0x18e);else _0x4b0e7e==_0x2ac8bd(0x1f1)&&(_0x30c95e[_0x2ac8bd(0x24a)]=_0x2ac8bd(0x1fa));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2ac8bd(0x2c1)](_0x1d27e6)},proxyEmit(_0x2ac8bd(0x2a8),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x34799d=_0x38a699;await getOpenOrders();let _0x2d9808=![];currentCoins[_0x34799d(0x19a)](_0x143733=>{const _0x3c6afc=_0x34799d;_0x2d9808=allOpenOrders[_0x3c6afc(0x233)](_0x20913a=>_0x20913a[_0x3c6afc(0x1a1)]==_0x143733[_0x3c6afc(0x1a1)]),_0x143733[_0x3c6afc(0x24a)]=_0x2d9808?_0x3c6afc(0x1fb):_0x3c6afc(0x1ec);});}async function getCoins(_0x438e31=!![],_0x37373b=config['basecoin']){const _0x25b81f=_0x38a699;let _0x63f15b,_0x3bc17b=[],_0x153d70=[],_0x413de9=[],_0x4b2d9c=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x63f15b=await exchange[_0x25b81f(0x1f6)](),mybalances=_0x63f15b[_0x25b81f(0x274)];for(const [_0xcd5421,_0x408ba8]of Object[_0x25b81f(0x297)](mybalances)){_0x4b2d9c['push'](_0xcd5421);}if(_0x37373b=='')for(const [_0x596fc0,_0x5b27c5]of Object[_0x25b81f(0x297)](mybalances)){_0x5b27c5[_0x25b81f(0x1a6)]()!=0x0&&_0x153d70[_0x25b81f(0x182)]({'coin':_0x596fc0});}else{let _0x3eb547=![];for(const [_0x553444,_0x54e451]of Object['entries'](mybalances)){if(_0x4b2d9c[_0x25b81f(0x276)](_0x553444)){const _0x28c42c=config['portfolio'][_0x25b81f(0x233)](_0x5a74d7=>_0x5a74d7[_0x25b81f(0x1ae)]==_0x553444),_0x90f946=_0x553444+'/'+_0x37373b,_0x4b9d40=_0x37373b+'/'+_0x553444,_0x43b650=currentCoins[_0x25b81f(0x233)](_0x268070=>_0x268070['coin']==_0x553444);_0x3eb547=![];if((_0x54e451[_0x25b81f(0x1a6)]()!=0x0||_0x28c42c)&&(allSymbols[_0x25b81f(0x276)](_0x90f946)||_0x553444==_0x37373b))_0x553444!=_0x37373b&&_0x3bc17b[_0x25b81f(0x182)](_0x90f946),_0x153d70[_0x25b81f(0x182)]({'coin':_0x553444,'symbol':_0x90f946,'reverse':![],'number':Math['max'](_0x54e451+(_0x28c42c&&_0x28c42c[_0x25b81f(0x23c)]||0x0),0x0),'orderstatus':_0x43b650?_0x43b650[_0x25b81f(0x24a)]:_0x25b81f(0x1ec)});else(_0x54e451[_0x25b81f(0x1a6)]()!=0x0||_0x28c42c)&&allSymbols['includes'](_0x4b9d40)&&(_0x553444!=_0x37373b&&_0x3bc17b['push'](_0x4b9d40),_0x153d70[_0x25b81f(0x182)]({'coin':_0x553444,'symbol':_0x4b9d40,'reverse':!![],'number':Math['max'](_0x54e451+(_0x28c42c&&_0x28c42c[_0x25b81f(0x23c)]||0x0),0x0),'orderstatus':_0x43b650?_0x43b650[_0x25b81f(0x24a)]:_0x25b81f(0x1ec)}));}}}}catch(_0x59a3e6){if(!_0x438e31)handleErrorNoStop(_0x59a3e6,_0x25b81f(0x1f4));else await handleError(_0x59a3e6,_0x25b81f(0x1f4));}return _0x413de9=cloneDeep(_0x153d70),_0x153d70=_0x153d70[_0x25b81f(0x266)](_0x319f1f=>{const _0x5483c8=_0x25b81f,_0x318cfb=config['portfolio'][_0x5483c8(0x233)](_0x4a8da2=>_0x4a8da2[_0x5483c8(0x1ae)]==_0x319f1f[_0x5483c8(0x1ae)]);return _0x318cfb&&!_0x318cfb[_0x5483c8(0x1fc)];}),[_0x153d70,_0x413de9];}async function getCoinNumber(_0x1a391f){const _0x2be858=_0x38a699;let _0x4c54fd;try{const _0x11cc89=await exchange[_0x2be858(0x1f6)]();_0x4c54fd=_0x11cc89[_0x2be858(0x274)][_0x1a391f];}catch(_0x26f2aa){await handleError(_0x26f2aa,_0x2be858(0x2af));}return _0x4c54fd;}async function getOpenOrders(){const _0x411f9b=_0x38a699;let _0x55f9fc;allOpenOrders=[];try{for(const _0x37faae of config[_0x411f9b(0x1e0)]){!_0x37faae[_0x411f9b(0x1fc)]&&_0x37faae[_0x411f9b(0x1ae)]!=config['basecoin']&&(_0x55f9fc=await exchange[_0x411f9b(0x235)](_0x37faae['symbol']),_0x55f9fc['length']>0x0&&allOpenOrders[_0x411f9b(0x182)](_0x55f9fc[0x0]));}}catch(_0x5b4b01){await handleError(_0x5b4b01,_0x411f9b(0x2c7));}}async function handleOpenOrders(_0x378939=0x0){const _0x257cfb=_0x38a699;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x257cfb(0x183)]&&allOrdersPlaced&&(_0x378939==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x378939++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x257cfb(0x2d4)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x257cfb(0x1b6))));}async function testAPI(_0x1263a6){const _0x5790e1=_0x38a699,_0x44ec5a=ccxt[_0x1263a6['exchange'][_0x5790e1(0x1ba)]()],_0x4fe347=new _0x44ec5a({'apiKey':_0x1263a6['apiKey'],'secret':_0x1263a6[_0x5790e1(0x27b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x1263a6[_0x5790e1(0x230)])_0x4fe347[_0x5790e1(0x275)]=_0x1263a6[_0x5790e1(0x230)];try{await _0x4fe347[_0x5790e1(0x237)]();}catch(_0x33282c){throw _0x33282c;}}function cloneDeep(_0x484195){const _0x2b6c0f=_0x38a699;return JSON[_0x2b6c0f(0x262)](JSON[_0x2b6c0f(0x2c1)](_0x484195));}async function getPortfolio(_0xcd3e2c){const _0x597454=_0x38a699;let _0x29c86c=[],_0x134339=[],_0x617f3e=[],_0x43f6d9;if(_0xcd3e2c[_0x597454(0x2de)]!=='************'||_0xcd3e2c[_0x597454(0x27b)]!=='************'||_0xcd3e2c[_0x597454(0x230)]&&_0xcd3e2c['apiPassword']!==_0x597454(0x2a3)){if(config['exchange']){if(_0xcd3e2c[_0x597454(0x2de)]=='************')_0xcd3e2c[_0x597454(0x2de)]=config['apiKey'];if(_0xcd3e2c[_0x597454(0x27b)]==_0x597454(0x2a3))_0xcd3e2c[_0x597454(0x27b)]=config['apiSecret'];if(_0xcd3e2c[_0x597454(0x230)]==_0x597454(0x2a3))_0xcd3e2c[_0x597454(0x230)]=config['apiPassword'];try{await testAPI(_0xcd3e2c);}catch(_0x95749b){if(_0x95749b['toString']()[_0x597454(0x276)](_0x597454(0x243))){logger[_0x597454(0x2d4)](_0x597454(0x277)),proxyEmit('portfolio',![]);return;}else{handleError(_0x95749b,_0x597454(0x2e4));return;}}}await initExchange(_0xcd3e2c[_0x597454(0x298)],_0xcd3e2c[_0x597454(0x2de)],_0xcd3e2c[_0x597454(0x27b)],_0xcd3e2c[_0x597454(0x230)]);try{await loadSymbols(_0xcd3e2c['exchange'],!![]);}catch(_0x111bfd){if(_0x111bfd[_0x597454(0x1a6)]()[_0x597454(0x276)](_0x597454(0x243))){proxyEmit('portfolio',![]);return;}else{handleError(_0x111bfd,_0x597454(0x2ad));return;}}const _0x57d057=await getCoins(![],_0xcd3e2c[_0x597454(0x2b7)]);_0x617f3e=cloneDeep(_0x57d057[0x1]);}else _0x617f3e=cloneDeep(currentCoinsAll);if(_0xcd3e2c[_0x597454(0x2b7)]=='')proxyEmit(_0x597454(0x1e0),_0x617f3e);else{_0x617f3e[_0x597454(0x19a)](_0x236cc1=>{const _0x4ecd11=_0x597454;if(_0x236cc1[_0x4ecd11(0x1ae)]!=_0xcd3e2c[_0x4ecd11(0x2b7)])_0x29c86c[_0x4ecd11(0x182)](_0x236cc1[_0x4ecd11(0x1a1)]);});try{_0x134339=await exchange[_0x597454(0x193)](_0x29c86c);}catch(_0x26357c){if(_0x26357c['toString']()[_0x597454(0x276)](_0x597454(0x243))){proxyEmit(_0x597454(0x1e0),![]);return;}else{handleError(_0x26357c,_0x597454(0x1ef));return;}}_0x617f3e[_0x597454(0x19a)](_0x289776=>{const _0x5276fc=_0x597454;_0x289776['coin']!=_0xcd3e2c[_0x5276fc(0x2b7)]?_0x43f6d9=_0x289776[_0x5276fc(0x1bf)]?0x1/_0x134339[_0x289776[_0x5276fc(0x1a1)]][_0x5276fc(0x2bb)]:_0x134339[_0x289776[_0x5276fc(0x1a1)]][_0x5276fc(0x2bb)]:_0x43f6d9=0x1,_0x289776[_0x5276fc(0x217)]=formatResult(_0x43f6d9,0x8);}),proxyEmit('portfolio',_0x617f3e);}}function truncateTradeAmount(_0x128b5c,_0x32eb43){const _0x11d598=_0x38a699;let _0x10c1e2=0x0;try{_0x10c1e2=exchange[_0x11d598(0x1f5)](_0x128b5c,_0x32eb43);}catch(_0x3478ae){}return _0x10c1e2;}function checkMinimums(_0x4de523){const _0x5a14e1=_0x38a699;let _0x24b28f=!![];const _0x4ee33a=!_0x4de523['reverse']?markets[_0x4de523['symbol']]['limits'][_0x5a14e1(0x2ec)][_0x5a14e1(0x20d)]:markets[_0x4de523[_0x5a14e1(0x1a1)]][_0x5a14e1(0x2cd)][_0x5a14e1(0x2a5)][_0x5a14e1(0x20d)],_0x5f487a=!_0x4de523[_0x5a14e1(0x1bf)]?markets[_0x4de523[_0x5a14e1(0x1a1)]][_0x5a14e1(0x2cd)][_0x5a14e1(0x2a5)][_0x5a14e1(0x20d)]:markets[_0x4de523[_0x5a14e1(0x1a1)]][_0x5a14e1(0x2cd)][_0x5a14e1(0x2ec)][_0x5a14e1(0x20d)],_0x4f0fc2=truncateTradeAmount(_0x4de523[_0x5a14e1(0x1a1)],_0x4de523['trade']);_0x4de523[_0x5a14e1(0x285)]=_0x4f0fc2;if(Math[_0x5a14e1(0x234)](_0x4f0fc2)<_0x4ee33a)_0x24b28f=![];if(Math['abs'](_0x4f0fc2)*_0x4de523[_0x5a14e1(0x2bb)]<_0x5f487a)_0x24b28f=![];if(_0x4de523[_0x5a14e1(0x1cf)]==_0x5a14e1(0x2b6)){let _0x1ca413=config['portfolio'][_0x5a14e1(0x233)](_0x2d5204=>_0x2d5204[_0x5a14e1(0x1ae)]==_0x4de523[_0x5a14e1(0x1ae)]);if(_0x1ca413[_0x5a14e1(0x23c)]>0x0){if(Math[_0x5a14e1(0x234)](_0x4f0fc2)>_0x4de523['number']-_0x1ca413[_0x5a14e1(0x23c)])_0x24b28f=![];}else{if(Math[_0x5a14e1(0x234)](_0x4f0fc2)>_0x4de523[_0x5a14e1(0x232)])_0x24b28f=![];}}if(_0x4de523[_0x5a14e1(0x1cf)]==_0x5a14e1(0x291)){let _0x4386e7=config['portfolio'][_0x5a14e1(0x233)](_0x4187fe=>_0x4187fe[_0x5a14e1(0x1ae)]==config[_0x5a14e1(0x2b7)]),_0xef995f=currentCoins[_0x5a14e1(0x233)](_0x3f65f6=>_0x3f65f6[_0x5a14e1(0x1ae)]==config['basecoin']);if(_0x4386e7[_0x5a14e1(0x23c)]>0x0){if(Math['abs'](_0x4f0fc2)*_0x4de523[_0x5a14e1(0x2bb)]>_0xef995f['number']-_0x4386e7[_0x5a14e1(0x23c)])_0x24b28f=![];}else{if(Math[_0x5a14e1(0x234)](_0x4f0fc2)*_0x4de523[_0x5a14e1(0x2bb)]>_0xef995f[_0x5a14e1(0x232)])_0x24b28f=![];}}return _0x24b28f;}async function getBalances(){const _0x58dda0=_0x38a699;let _0x3c6257=0x0,_0x36cae8;const _0x3b23fe=config[_0x58dda0(0x21a)];if(config[_0x58dda0(0x20e)]&&config[_0x58dda0(0x184)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1af627=>{const _0x46d0b9=_0x58dda0;if(_0x1af627[_0x46d0b9(0x1ae)]!=config['basecoin']){let _0x5ee40=global[_0x46d0b9(0x22a)][noslash(_0x1af627['symbol'])];_0x36cae8=_0x1af627[_0x46d0b9(0x1bf)]?0x1/_0x5ee40:_0x5ee40;}else _0x36cae8=0x1;let _0x53e3b6=_0x1af627['number']*_0x36cae8;_0x3c6257+=_0x53e3b6,_0x1af627['last']=formatResult(Number(_0x36cae8),0x8),_0x1af627[_0x46d0b9(0x226)]=_0x53e3b6;}),currentCoins[_0x58dda0(0x19a)](_0x27a6ee=>{const _0x35649b=_0x58dda0;let _0x7af7be=config[_0x35649b(0x1e0)][_0x35649b(0x233)](_0x2f08ed=>_0x2f08ed[_0x35649b(0x1ae)]==_0x27a6ee[_0x35649b(0x1ae)]),_0xd74837=Number(_0x7af7be['distribution']),_0x3590d9=_0x27a6ee[_0x35649b(0x226)]/_0x3c6257*0x64,_0x5ba6b3=_0xd74837*_0x3c6257/0x64/_0x27a6ee[_0x35649b(0x2bb)]-_0x27a6ee[_0x35649b(0x232)];_0x27a6ee[_0x35649b(0x2b4)]=formatResult(_0x3590d9,0x3),_0x27a6ee['target']=formatResult(_0xd74837,0x3),_0x27a6ee['trade']=formatResult(_0x5ba6b3,0x8),_0x27a6ee[_0x35649b(0x1cf)]='',_0x27a6ee[_0x35649b(0x28f)]=![];if(_0x27a6ee[_0x35649b(0x1ae)]!=config['basecoin']){if(_0x27a6ee[_0x35649b(0x2b4)]>_0xd74837)_0x27a6ee[_0x35649b(0x1cf)]=_0x35649b(0x2b6),_0x27a6ee[_0x35649b(0x28f)]=checkMinimums(_0x27a6ee);else _0x27a6ee['distribution']<_0xd74837&&(_0x27a6ee[_0x35649b(0x1cf)]=_0x35649b(0x291),_0x27a6ee['valid']=checkMinimums(_0x27a6ee));}_0x27a6ee['delta']=_0x27a6ee[_0x35649b(0x2b4)]/_0x27a6ee[_0x35649b(0x1c2)]-0x1;if(_0x27a6ee[_0x35649b(0x24a)]=='filled'||_0x27a6ee['orderstatus']==_0x35649b(0x18e))_0x27a6ee['orderstatus']='none';}),currentCoins[_0x58dda0(0x25a)]((_0xb065c9,_0x2d97b9)=>_0xb065c9[_0x58dda0(0x1a5)]<_0x2d97b9[_0x58dda0(0x1a5)]?0x1:_0x2d97b9['delta']<_0xb065c9[_0x58dda0(0x1a5)]?-0x1:0x0);const _0x2ab41f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2ab41f[_0x58dda0(0x216)],'usd':_0x2ab41f[_0x58dda0(0x195)],'portfolio':JSON[_0x58dda0(0x2c1)](currentCoins),'threshold':_0x3b23fe},proxyEmit(_0x58dda0(0x2a8),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x58dda0(0x20e)])headlessMode({'portfolio':currentCoins,'threshold':_0x3b23fe});else{if(lockOrders==ORDERS[_0x58dda0(0x185)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3b23fe});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x203c0e=getNormalizedPerformance();getStartingBalances(_0x203c0e),emitPerformance(_0x203c0e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1bd891=getNormalizedPerformance();emitPerformance(_0x1bd891),getStartingBalances(_0x1bd891),logger[_0x58dda0(0x2d4)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xb28034=_0x38a699;if(!lastBalances)return;let _0x424feb=[],_0x593fc2,_0x54d04a=JSON[_0xb28034(0x262)](lastBalances[_0xb28034(0x1e0)]);_0x54d04a[_0xb28034(0x25a)]((_0x126665,_0xf7552)=>_0x126665[_0xb28034(0x1ae)]>_0xf7552['coin']?0x1:_0xf7552['coin']>_0x126665[_0xb28034(0x1ae)]?-0x1:0x0),_0x54d04a[_0xb28034(0x19a)](_0x467df9=>{const _0x437c32=_0xb28034;let _0x24deea={'coin':_0x467df9[_0x437c32(0x1ae)],'number':_0x467df9[_0x437c32(0x232)],'price':_0x467df9[_0x437c32(0x2bb)]};_0x424feb[_0x437c32(0x182)](_0x24deea);});const _0xbca7c8=await getFiat();_0x593fc2={'date':lastBalances[_0xb28034(0x2e6)][_0xb28034(0x1a3)]('\x20')[0x0],'eur':_0xbca7c8[_0xb28034(0x216)],'usd':_0xbca7c8[_0xb28034(0x195)],'coins':_0x424feb};let _0x14e3bd=dbPerformance['get'](_0xb28034(0x2d1))[_0xb28034(0x233)]({'date':_0x593fc2['date']})[_0xb28034(0x226)]();_0x14e3bd?_0x593fc2[_0xb28034(0x1f7)]!=config[_0xb28034(0x2ce)]&&dbPerformance['get']('data')['find']({'date':_0x593fc2[_0xb28034(0x1f7)]})[_0xb28034(0x2f1)](_0x593fc2)[_0xb28034(0x1e9)]():dbPerformance['get'](_0xb28034(0x2d1))[_0xb28034(0x182)](_0x593fc2)[_0xb28034(0x1e9)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x45e23e=_0x38a699;let _0x5ab18d=[];if(dbPerformance['has'](_0x45e23e(0x2d1))[_0x45e23e(0x226)]()){let _0x5aaadb=dbPerformance[_0x45e23e(0x2b0)](_0x45e23e(0x2d1))['cloneDeep']()[_0x45e23e(0x259)](_0x45e23e(0x1f7))[_0x45e23e(0x226)](),_0x31d6cb=[...config[_0x45e23e(0x25c)]];_0x31d6cb['sort']((_0x4760be,_0x1c8ce9)=>_0x4760be[_0x45e23e(0x1f7)]>_0x1c8ce9[_0x45e23e(0x1f7)]?-0x1:_0x1c8ce9['date']>_0x4760be['date']?0x1:0x0);let _0x5001c2=0x1,_0x9b6571=[],_0x21fda2=0x0;_0x5aaadb['slice']()[_0x45e23e(0x1bf)]()[_0x45e23e(0x19a)]((_0x1ce863,_0x1add4e)=>{const _0x3ed756=_0x45e23e;if(_0x31d6cb[_0x21fda2]){if(_0x5aaadb[_0x5aaadb[_0x3ed756(0x2b9)]-_0x1add4e]&&_0x31d6cb[_0x21fda2][_0x3ed756(0x1f7)]==_0x5aaadb[_0x5aaadb['length']-_0x1add4e]['date']){if(_0x1add4e<_0x5aaadb['length']){let _0x58f2d6=0x0,_0x26b187=0x0;_0x5aaadb[_0x5aaadb[_0x3ed756(0x2b9)]-_0x1add4e]['coins'][_0x3ed756(0x19a)](_0x5c1136=>{const _0xb0489f=_0x3ed756;_0x26b187+=_0x5c1136['number']*_0x5c1136[_0xb0489f(0x217)];}),_0x31d6cb[_0x21fda2][_0x3ed756(0x2e2)][_0x3ed756(0x19a)](_0x3604b8=>{const _0x2d1a28=_0x3ed756;_0x58f2d6+=_0x3604b8[_0x2d1a28(0x232)]*_0x3604b8[_0x2d1a28(0x217)];}),_0x5001c2*=_0x58f2d6/(_0x26b187-_0x58f2d6)+0x1;}_0x21fda2++;}}let _0x10058b=0x0;_0x1ce863[_0x3ed756(0x27a)][_0x3ed756(0x19a)](_0x696751=>{const _0x539679=_0x3ed756;_0x10058b+=_0x696751['number']*_0x696751[_0x539679(0x217)];}),_0x9b6571[_0x5aaadb[_0x3ed756(0x2b9)]-_0x1add4e-0x1]=_0x10058b*(_0x5001c2-0x1);});let _0x224a68=[];_0x31d6cb=[...config[_0x45e23e(0x25c)]]||[];let _0x43a6f2=0x0;_0x21fda2=0x0,_0x5aaadb[_0x45e23e(0x19a)]((_0x5770f9,_0x4d2ba0)=>{const _0x2c7711=_0x45e23e;if(_0x31d6cb[_0x21fda2]){const _0x568bbf=fns[_0x2c7711(0x262)](_0x31d6cb[_0x21fda2]['date'],_0x2c7711(0x1ce),new Date()),_0x35aafc=fns[_0x2c7711(0x262)](_0x5770f9['date'],_0x2c7711(0x1ce),new Date());if(fns[_0x2c7711(0x1d4)](_0x568bbf,_0x35aafc)){let _0x540880=0x0;_0x31d6cb[_0x21fda2]['changes'][_0x2c7711(0x19a)](_0x3b1de6=>{const _0xb4ed7c=_0x2c7711;!_0x224a68[_0x3b1de6[_0xb4ed7c(0x1ae)]]?_0x224a68[_0x3b1de6[_0xb4ed7c(0x1ae)]]=_0x3b1de6[_0xb4ed7c(0x232)]:(_0x540880=_0x224a68[_0x3b1de6[_0xb4ed7c(0x1ae)]],_0x224a68[_0x3b1de6[_0xb4ed7c(0x1ae)]]+=_0x3b1de6[_0xb4ed7c(0x232)]);const _0x4748c9=_0x5770f9[_0xb4ed7c(0x27a)][_0xb4ed7c(0x233)](_0x3eb1e0=>_0x3eb1e0[_0xb4ed7c(0x1ae)]==_0x3b1de6[_0xb4ed7c(0x1ae)]);(!_0x4748c9||_0x4748c9[_0xb4ed7c(0x232)]==0x0)&&(_0x43a6f2+=(-_0x3b1de6[_0xb4ed7c(0x232)]-_0x540880)*_0x3b1de6[_0xb4ed7c(0x217)]);}),_0x21fda2++;}}_0x5770f9[_0x2c7711(0x27a)][_0x2c7711(0x19a)]((_0x20189b,_0x596045)=>{const _0x598bde=_0x2c7711;_0x224a68[_0x20189b[_0x598bde(0x1ae)]]&&(_0x20189b[_0x598bde(0x2b5)]=_0x224a68[_0x20189b['coin']]);}),_0x5ab18d[_0x2c7711(0x182)]({'date':_0x5770f9[_0x2c7711(0x1f7)],'eur':_0x5770f9['eur'],'usd':_0x5770f9[_0x2c7711(0x195)],'offset':_0x9b6571[_0x4d2ba0],'netoffset':_0x43a6f2,'coins':_0x5770f9[_0x2c7711(0x27a)]});});}return _0x5ab18d;}function emitPerformance(_0x468783){const _0x11dd03=_0x38a699;_0x468783[_0x11dd03(0x2b9)]!==0x0?(proxyEmit(_0x11dd03(0x1c0),_0x468783),lastPerformanceEmitted=getDate()):proxyEmit(_0x11dd03(0x1c0),[]);}function getPerf(_0x114c9f,_0xe01f78){const _0x1821ae=_0x38a699;let _0x22db09=0x0,_0x2c7e49=0x0,_0x5cfe14=0x0;_0x114c9f[_0x1821ae(0x27a)]['forEach'](_0x1cc597=>{const _0x549656=_0x1821ae;_0x22db09+=_0x1cc597['number']*_0x1cc597[_0x549656(0x217)];});_0xe01f78&&(_0x22db09+=_0x114c9f['offset']);if(config['basecoin']==='BTC'||config[_0x1821ae(0x2b7)]===_0x1821ae(0x17c))_0x2c7e49=_0x22db09*_0x114c9f[_0x1821ae(0x216)],_0x5cfe14=_0x22db09*_0x114c9f[_0x1821ae(0x195)];else{if(config[_0x1821ae(0x2b7)]===_0x1821ae(0x2a1)||config[_0x1821ae(0x2b7)]===_0x1821ae(0x2e3)||config['basecoin']==='USD')_0x2c7e49=_0x22db09*_0x114c9f[_0x1821ae(0x216)]/_0x114c9f['usd'],_0x5cfe14=_0x22db09;else config[_0x1821ae(0x2b7)]===_0x1821ae(0x289)&&(_0x2c7e49=_0x22db09,_0x5cfe14=_0x22db09*_0x114c9f[_0x1821ae(0x195)]/_0x114c9f[_0x1821ae(0x216)]);}return[_0x22db09,_0x2c7e49,_0x5cfe14];}function getKPIs(_0x5b7841,_0xf40d23=_0x38a699(0x289)){const _0x4ec575=_0x38a699,_0x294169=config[_0x4ec575(0x2b7)],_0x406d06=lastBalances,_0x5483c7=currentCoins,_0x4076ff=getNormalizedPerformance(),_0x7d6526=_0x5b7841===_0x4ec575(0x2b7)?_0x294169:_0x5b7841===_0x4ec575(0x190)||_0x5b7841===_0x4ec575(0x270)?_0xf40d23:'Net\x20'+_0x294169,_0x5778db=_0x5b7841===_0x4ec575(0x296)?_0x4ec575(0x1b1):_0x5b7841===_0x4ec575(0x270)?_0x4ec575(0x1b1):_0x7d6526+_0x4ec575(0x2b2),_0xfa8d10=_0x5b7841===_0x4ec575(0x296)||_0x5b7841===_0x4ec575(0x270)?_0x4ec575(0x1b1):_0x7d6526+_0x4ec575(0x205);let _0x14d407=0x0;_0x5483c7['forEach'](_0x30a0ca=>{const _0xab47b0=_0x4ec575;_0x14d407+=_0x30a0ca[_0xab47b0(0x232)]*_0x30a0ca['last'];});if(_0x5b7841===_0x4ec575(0x190)||_0x5b7841===_0x4ec575(0x270)){if(_0x294169===_0x4ec575(0x1e1)||_0x294169===_0x4ec575(0x17c))_0x14d407=_0x14d407*(_0xf40d23===_0x4ec575(0x289)?_0x406d06[_0x4ec575(0x216)]:_0x406d06[_0x4ec575(0x195)]);else{if(_0x294169==='BUSD'||_0x294169===_0x4ec575(0x2e3)||_0x294169===_0x4ec575(0x25e))_0x14d407=_0x14d407*(_0xf40d23===_0x4ec575(0x289)?_0x406d06[_0x4ec575(0x216)]/_0x406d06[_0x4ec575(0x195)]:0x1);else _0x294169==='EUR'&&(_0x14d407=_0x14d407*(_0xf40d23===_0x4ec575(0x289)?0x1:_0x406d06[_0x4ec575(0x195)]/_0x406d06[_0x4ec575(0x216)]));}}let _0x341319;if(_0x14d407!==0x0){if(_0x5b7841===_0x4ec575(0x2b7))_0x341319=(_0x14d407/startingBalances[_0x4ec575(0x2b7)]-0x1)*0x64;else{if(_0xf40d23===_0x4ec575(0x289))_0x341319=(_0x14d407/startingBalances[_0x4ec575(0x216)]-0x1)*0x64;else _0x341319=(_0x14d407/startingBalances[_0x4ec575(0x195)]-0x1)*0x64;}let _0x2be623=0x0;if(startingBalances[_0x4ec575(0x27a)])_0x5483c7[_0x4ec575(0x19a)](_0x59a9d6=>{const _0x144181=_0x4ec575;let _0x2f9ebc=startingBalances[_0x144181(0x27a)][_0x144181(0x233)](_0x1c2667=>_0x1c2667['coin']===_0x59a9d6[_0x144181(0x1ae)]);if(_0x2f9ebc&&_0x2f9ebc[_0x144181(0x1ae)]&&_0x59a9d6[_0x144181(0x232)]!==0x0)_0x2be623+=_0x2f9ebc[_0x144181(0x232)]*_0x59a9d6[_0x144181(0x2bb)];});let _0xabd814=0x0;if(_0x4076ff[_0x4ec575(0x2b9)]!==0x0){let _0x1dd4bb=_0x4076ff[_0x4076ff[_0x4ec575(0x2b9)]-0x1];_0xabd814=_0x1dd4bb[_0x4ec575(0x23d)];}_0x2be623-=_0xabd814;_0x5b7841===_0x4ec575(0x296)&&(_0x341319=(_0x14d407-_0x2be623)/startingBalances[_0x4ec575(0x2b7)]*0x64,_0x14d407=_0x14d407-_0x2be623);if(_0x5b7841===_0x4ec575(0x270)){let _0x1aa159=_0xf40d23===_0x4ec575(0x289)?startingBalances[_0x4ec575(0x216)]:startingBalances[_0x4ec575(0x195)];if(_0x294169==='BTC'||_0x294169===_0x4ec575(0x17c))_0x2be623=_0xf40d23===_0x4ec575(0x289)?_0x2be623*_0x406d06['eur']:_0x2be623*_0x406d06[_0x4ec575(0x195)];else{if(_0x294169===_0x4ec575(0x2a1)||_0x294169===_0x4ec575(0x2e3)||_0x294169==='USD')_0x2be623=_0xf40d23==='EUR'?_0x2be623*_0x406d06[_0x4ec575(0x216)]/_0x406d06[_0x4ec575(0x195)]:_0x2be623;else _0x294169===_0x4ec575(0x289)&&(_0x2be623=_0xf40d23===_0x4ec575(0x289)?_0x2be623:_0x2be623*_0x406d06[_0x4ec575(0x195)]/_0x406d06['eur']);}_0x341319=(_0x14d407-_0x2be623)/_0x1aa159*0x64,_0x14d407=_0x14d407-_0x2be623;}if(_0x341319){if(_0x341319<0x64)_0x341319=_0x341319[_0x4ec575(0x223)](0x2);else{if(_0x341319<0x3e8)_0x341319=_0x341319['toFixed'](0x1);else _0x341319=_0x341319['toFixed'](0x0);}}else _0x341319=Number('0')[_0x4ec575(0x223)](0x2);if(_0x14d407){if(Math[_0x4ec575(0x234)](_0x14d407)<0.000001)_0x14d407=_0x14d407[_0x4ec575(0x223)](0x2);else{if(Math[_0x4ec575(0x234)](_0x14d407)<0.1)_0x14d407=_0x14d407[_0x4ec575(0x223)](0x6);else{if(Math[_0x4ec575(0x234)](_0x14d407)<0x1)_0x14d407=_0x14d407['toFixed'](0x5);else{if(Math[_0x4ec575(0x234)](_0x14d407)<0xa)_0x14d407=_0x14d407['toFixed'](0x4);else{if(Math[_0x4ec575(0x234)](_0x14d407)<0x64)_0x14d407=_0x14d407['toFixed'](0x3);else{if(Math[_0x4ec575(0x234)](_0x14d407)<0x3e8)_0x14d407=_0x14d407[_0x4ec575(0x223)](0x2);else _0x14d407=_0x14d407[_0x4ec575(0x223)](0x2);}}}}}}else _0x14d407=Number('0')['toFixed'](0x2);}else _0x341319=Number('0')['toFixed'](0x2);return{'value':_0x14d407,'change':_0x341319,'leftTxt':_0x5778db,'rightTxt':_0xfa8d10};}function _0x5f27(){const _0x4f68c3=['milliseconds','getCoins()','amountToPrecision','fetchBalance','date','getTime','\x20>\x20[DEBUG]\x20','filled','open','excluded','progress','-------------------------------\x0a','toUpperCase','Order\x20filled:\x20','bot','1\x20-\x20Unlock\x20orders','timeshift','\x20|\x20lock\x20orders:\x20','\x20change','buys','\x20metrics:</b>\x20\x0a\x0a','customId','fetchTicker','RSA-OAEP','map','Error:\x20Invalid\x20argument\x20','min','headless','Pausing\x20for\x20','cancelLoading','botname','HOT/BTC','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20minutes\x20-\x20','realized','eur','price','bid','8VEKUEE','threshold','function','no\x20additional\x20symbols','-performance.json','getHours','padStart','\x20|\x20','type','restart','toFixed','loadSymbols()','constructor','value','showConfig','limit-high','configuration','ticker','\x20exchange','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','fromCodePoint','full','lowdb/adapters/FileSync','apiPassword','storeFiat','number','find','abs','fetchOpenOrders','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','loadMarkets','<b>','starting-balances','resetHistory','startnumber','offset','netoffset','watchTrades','message','logs','clientOrderId','lowdb','AuthenticationError','warning','</pre>','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Bot\x20','error','sha256','orderstatus','Binance','2.5.0','Order\x20amount\x20is\x20invalid:\x20','-events.json','exchanges','Unknown\x20error\x20occured','1382946XJbOwd','limit-low','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','cooldown','currency','recent20','random','startsWith','sortBy','sort','simple','liquidity','ORDERS.LOCKED','USD','success','mkdirSync','2\x20-\x20Orders\x20unlocked','parse','Fees\x20|\x20currency:\x20','percentage','freeze','filter','Invalid\x20quantity','round','MIN_NOTIONAL','emojisell','timestamp','\x20has\x20a\x2024h\x20drop\x20of\x20','symbols','ordertype','running','net-fiat','\x20closed\x20the\x20connection','format','NANO/','total','password','includes','Invalid\x20API\x20key\x20or\x20secret\x20entered','3\x20-\x20handling\x20FILLED\x20order:\x20','2\x20-\x20Validate\x20orders:\x20','coins','apiSecret','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Cooldown\x20ended\x20-\x20balancing\x20resumed','datetime','util','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','log','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','exec','./logs/','trade','placeOrder()','watchTransactions','2\x20-\x20FILLED\x20unknown\x20order:\x20','EUR','cancelOrder','uncaughtException','\x20minutes','getSeconds','Exchange','valid','emojibuy','buy','./version.json','args','date-fns','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','net-basecoin','entries','exchange','indexOf','2.6.0','orderId','1\x20-\x20Validate\x20orders:\x20','splice','event','OrderNotFound','***','BUSD','bb-settings.json','************','createOrder','cost','Executed\x20','test','balances','getMinutes','<pre>','secure','Saving\x20configuration','getPortfolio(1)','RequestTimeout','getCoinNumber()','get','final','\x20value','event-history','distribution','initial','sell','basecoin','remove','length','substring','last','kill','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20API\x20key\x20is\x20invalid','breakeven','2.3.5','stringify','recreate','exchange\x20reloaded','Error\x20while\x20deleting\x20files:\x20','startprice','BNB/','getOpenOrders()','/output-000.log','3876236ncviIm','getMonth','Resetting\x20bot\x20history','leftTxt','limits','startdate','getDate','-results.json','data','coin-loading-progress','keys','debug','\x20>\x20','enabled','bot-','decrypt','getPortfolio','\x20portfolio:</b>\x20\x0a\x0a','version','join','average','apiKey','writeFile','No\x20more\x20open\x20orders\x20-\x20','2871190nqeFvR','changes','USDT','getPortfolio(0)','order','time','\x20order:\x20','limit','differenceInSeconds','page','settings','amount','Initiating\x20exchange\x20reload','timeout','shift','max','assign','cloneDeep','Limit\x20(high-margin)','2\x20-\x20FILLED\x20known\x20order:\x20','send','yargs/yargs','argv','13535032HUoMhU','Manual\x20balancing\x20required','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','ETH','openOrders','/backup/','Portfolio\x20change\x20detected:\x20','-config.json','\x20not\x20responding','push','LOCKED','change24h','UNLOCKED','botID','deleteHistoryAlerts','unlinkSync','\x20:\x20','ORDERS.UNLOCKED','exchange\x20not\x20reloaded','bb-secure.json','15yHOziq','canceled','existsSync','fiat','BNB','balancing\x20resumed','fetchTickers','findIndex','usd','./config/','ccxt','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20orders\x20in\x20less\x20than\x20','forEach','onepagemode','Transaction\x20detection\x20unblocked','status','starting-balance-','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','apply','symbol','ongoing','split','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','delta','toString','sells','getFullYear','YOYOW/','21816207kohKRM','highest','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','timer:','coin','remainingSymbols','rightTxt','Net\x20effect','change','close','add','cancelOrders()','no\x20open\x20orders','2244393LtxtCS','Unfilled\x20order(s)\x20canceled\x20after\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','toLowerCase','hybrid-crypto-js','UNLOCKING','API-key\x20format\x20invalid','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','reverse','performance','balancing\x20resumes\x20when\x20cooldown\x20ends','target','placeOrder','202054cFJkMf','recovery','market','getStartingBalances','recreateCoinResults()','fee','slice','<b>Bot\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','XEM/BUSD','yyyy/MM/dd','side','watchOrders','replace','cancel','.json','isEqual','Executing\x20exchange\x20reload','defaults','has','%\x20(','string','bots',':\x20Bot\x20','showname','fetchClosedOrders','/EUR','added','portfolio','BTC','additional\x20symbols\x20','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','set',',\x20must\x20be\x20a\x203\x20digit\x20number','ask','path','concat','write','privateKey','sendPortfolioTelegram','none','/USD','removed','getPortfolio(2)','Order(s)\x20not\x20validated\x20after\x20','closed','padEnd'];_0x5f27=function(){return _0x4f68c3;};return _0x5f27();}async function getStartingBalances(_0x841ba0,_0x2a3582=!![]){const _0x39da9b=_0x38a699;if(_0x841ba0[_0x39da9b(0x2b9)]!==0x0){const [_0x4fdd57,_0x1fe905,_0x8a2943]=getPerf(_0x841ba0[0x0],!![]);let _0x1e8a87=[];config[_0x39da9b(0x1e0)][_0x39da9b(0x19a)](_0x19c842=>{const _0x1641d7=_0x39da9b;let _0x58e621=0x0,_0x1f7fc4;config[_0x1641d7(0x25c)][_0x1641d7(0x19a)](_0x29cb19=>{const _0x142d5f=_0x1641d7;let _0x15be57=_0x29cb19[_0x142d5f(0x2e2)][_0x142d5f(0x233)](_0x3e975a=>_0x3e975a['coin']==_0x19c842[_0x142d5f(0x1ae)]);if(_0x15be57){_0x58e621+=_0x15be57['number'];if(!_0x1f7fc4)_0x1f7fc4=_0x15be57[_0x142d5f(0x217)];}}),_0x1e8a87['push']({'coin':_0x19c842['coin'],'number':_0x58e621,'initialprice':_0x1f7fc4});});const _0x434896={'basecoin':_0x4fdd57,'eur':_0x1fe905,'usd':_0x8a2943,'coins':_0x1e8a87};if(_0x2a3582)proxyEmit(_0x39da9b(0x239),_0x434896);startingBalances=_0x434896;}}function headlessMode(_0x5a4c19){const _0x42ed51=_0x38a699;let _0x1a7f82=_0x5a4c19['portfolio'],_0x1730ae=_0x5a4c19[_0x42ed51(0x21a)],_0x2d83f1=[];for(let _0xcef1a8 of _0x1a7f82){if(_0xcef1a8['coin']!=config[_0x42ed51(0x2b7)]){if(_0xcef1a8[_0x42ed51(0x1a5)]>=_0x1730ae/0x64){if(_0xcef1a8[_0x42ed51(0x28f)])_0x2d83f1['push'](_0xcef1a8);}else{if(_0xcef1a8[_0x42ed51(0x1a5)]<=-_0x1730ae/0x64){if(_0xcef1a8[_0x42ed51(0x28f)])_0x2d83f1['push'](_0xcef1a8);}}}}_0x2d83f1['length']>0x0&&placeOrder(_0x2d83f1);}function notifyBalance(_0x2e68d1){const _0x15095e=_0x38a699;let _0xd97c7=_0x2e68d1[_0x15095e(0x1e0)],_0x15bc1b=_0x2e68d1['threshold'],_0x3cda48=[];for(let _0x3f6d79 of _0xd97c7){if(_0x3f6d79[_0x15095e(0x1ae)]!=config[_0x15095e(0x2b7)]){if(_0x3f6d79[_0x15095e(0x1a5)]>=_0x15bc1b/0x64){if(_0x3f6d79[_0x15095e(0x28f)])_0x3cda48[_0x15095e(0x182)](_0x3f6d79);}else{if(_0x3f6d79[_0x15095e(0x1a5)]<=-_0x15bc1b/0x64){if(_0x3f6d79[_0x15095e(0x28f)])_0x3cda48[_0x15095e(0x182)](_0x3f6d79);}}}}if(_0x3cda48[_0x15095e(0x2b9)]>0x0){let _0x23db12=_0x3cda48[_0x15095e(0x20b)](_0x551f18=>_0x551f18[_0x15095e(0x1ae)]);_0x23db12[_0x15095e(0x25a)]();let _0x1f58bf=_0x23db12[_0x15095e(0x2dc)](',\x20');if(!lastCoinsToBalance)logHistory(_0x15095e(0x244),_0x15095e(0x2f9));lastCoinsToBalance=_0x1f58bf;}}function symbolToCoin(_0x1d71be){const _0x378805=_0x38a699;let _0x45785a;if(_0x1d71be['includes']('/'+config['basecoin']))_0x45785a=_0x1d71be['replace']('/'+config['basecoin'],'');if(_0x1d71be[_0x378805(0x276)](config[_0x378805(0x2b7)]+'/'))_0x45785a=_0x1d71be[_0x378805(0x1d1)](config[_0x378805(0x2b7)]+'/','');return _0x45785a;}async function unlockOrders(){const _0x53d92b=_0x38a699;if(allOrdersPlaced&&lockOrders==ORDERS[_0x53d92b(0x183)]){logger[_0x53d92b(0x2d4)](_0x53d92b(0x202)),lockOrders=ORDERS[_0x53d92b(0x1bc)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4e4e62=await getCoins();[currentCoins,currentCoinsAll]=_0x4e4e62,validateOrdersState=_0x53d92b(0x2b5),persistOpenOrders([]),lockOrders=ORDERS[_0x53d92b(0x185)],logger[_0x53d92b(0x2d4)](_0x53d92b(0x261));}}async function validateOrders(_0x32fd9f){const _0x4902f7=_0x38a699;if(_0x32fd9f)validateOrdersState=_0x32fd9f;logger['debug'](_0x4902f7(0x29c)+validateOrdersState+_0x4902f7(0x204)+(lockOrders==0x1?_0x4902f7(0x25d):lockOrders==0x2?'ORDERS.UNLOCKING':_0x4902f7(0x18a)));let _0x548de3=[],_0x39ca89=config[_0x4902f7(0x26e)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4902f7(0x2ee)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x4902f7(0x279)+validateOrdersState),lastOrders['forEach'](_0x2c3c76=>{const _0x2e0633=_0x4902f7;let _0x1cefda=![];_0x2c3c76[_0x2e0633(0x1fa)]>0x0&&(_0x1cefda=!![]),_0x548de3[_0x2e0633(0x182)](_0x1cefda),_0x1cefda&&config[_0x2e0633(0x26e)]!=_0x2e0633(0x1c6)&&logHistory(_0x2e0633(0x2e5),_0x2e0633(0x200)+_0x2c3c76[_0x2e0633(0x1a1)]+'\x20'+_0x2c3c76[_0x2e0633(0x1cf)]+'\x20#'+formatResult(_0x2c3c76[_0x2e0633(0x1fa)],0x8)+'\x20@'+formatResult(_0x2c3c76[_0x2e0633(0x217)],0x8));}),_0x548de3[_0x4902f7(0x19a)]((_0x32f233,_0x2ec48c)=>{const _0x4218b0=_0x4902f7;if(_0x32f233)lastOrders[_0x4218b0(0x29d)](_0x2ec48c,0x1);}),persistOpenOrders(lastOrders);const _0x39f9cf=coolingDown?_0x4902f7(0x1c1):_0x4902f7(0x192);if(validateOrdersState==_0x4902f7(0x2b5)){validateOrdersState='ongoing';if(_0x548de3[_0x4902f7(0x276)](![])){if(config[_0x4902f7(0x26e)]==_0x4902f7(0x1c6)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x548de3[_0x4902f7(0x276)](![])){}else{if(allOrdersPlaced){if(config[_0x4902f7(0x26e)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4902f7(0x2b1))_0x548de3['includes'](![])&&(config['ordertype']==_0x4902f7(0x1c6)?logHistory(_0x4902f7(0x25f),_0x4902f7(0x1f0)+Math['round'](_0x39ca89*validateOrderInterval/0xea60)+_0x4902f7(0x214)+_0x39f9cf):(await cancelOrders(),logHistory(_0x4902f7(0x25f),_0x4902f7(0x1b8)+Math[_0x4902f7(0x268)](_0x39ca89*validateOrderInterval/0xea60)+_0x4902f7(0x214)+_0x39f9cf))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!='market')logHistory(_0x4902f7(0x25f),_0x4902f7(0x2e0)+_0x39f9cf);await unlockOrders();}}}}}async function cancelOrders(){const _0x160331=_0x38a699;lastOrders[_0x160331(0x19a)](async _0x54a128=>{const _0x194268=_0x160331;try{const _0x46bcdd=await exchange[_0x194268(0x28a)](_0x54a128[_0x194268(0x29b)],_0x54a128['symbol']);}catch(_0x2c19fe){if(_0x2c19fe['toString']()['includes'](_0x194268(0x29f))){}else await handleError(_0x2c19fe,_0x194268(0x1b5));}});}async function initCoinResults(){const _0x35b8a0=_0x38a699;let _0x2b9c7e=[];config[_0x35b8a0(0x1e0)][_0x35b8a0(0x19a)](_0x18864b=>{const _0x2dbcdc=_0x35b8a0;if(!_0x18864b[_0x2dbcdc(0x1fc)]&&_0x18864b[_0x2dbcdc(0x1ae)]!=config[_0x2dbcdc(0x2b7)]){let _0x1035cf=dbCoinResults[_0x2dbcdc(0x2b0)](_0x2dbcdc(0x27a))[_0x2dbcdc(0x233)]({'coin':_0x18864b[_0x2dbcdc(0x1ae)]})[_0x2dbcdc(0x226)]();if(!_0x1035cf){const _0x5795e8=currentCoins[_0x2dbcdc(0x233)](_0x3588eb=>_0x3588eb[_0x2dbcdc(0x1ae)]==_0x18864b[_0x2dbcdc(0x1ae)]),_0x8e5769=global['ticker'][noslash(_0x18864b[_0x2dbcdc(0x1a1)])];let _0x56132a=_0x5795e8?_0x5795e8['number']:null,_0x22d367=_0x18864b['reverse']?0x1/_0x8e5769:_0x8e5769,_0x2feca8;config['liquidity'][_0x2dbcdc(0x19a)](_0x320cbc=>{const _0x42d9c9=_0x2dbcdc;!_0x2feca8&&(_0x2feca8=_0x320cbc[_0x42d9c9(0x2e2)][_0x42d9c9(0x233)](_0x1a2584=>_0x1a2584[_0x42d9c9(0x1ae)]==_0x18864b[_0x42d9c9(0x1ae)]),_0x2feca8&&(_0x56132a=_0x2feca8[_0x42d9c9(0x232)],_0x22d367=_0x2feca8['price']));}),_0x2b9c7e[_0x2dbcdc(0x182)]({'coin':_0x18864b['coin'],'number':_0x56132a,'price':_0x22d367});}}}),_0x2b9c7e['forEach'](_0x452d6c=>{const _0x35ac38=_0x35b8a0,_0x52cc92={'coin':_0x452d6c[_0x35ac38(0x1ae)],'number':_0x452d6c[_0x35ac38(0x232)],'breakeven':_0x452d6c['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x35ac38(0x2b0)](_0x35ac38(0x27a))['push'](_0x52cc92)[_0x35ac38(0x1e9)]();});}async function updateCoinResults(_0x44db7f,_0x2401d7=![]){const _0x4f6e47=_0x38a699;let _0x2b93fd,_0x172928,_0x8fcbdc,_0x2b0121,_0x47bc75,_0x435859,_0xa9face=dbCoinResults[_0x4f6e47(0x2b0)](_0x4f6e47(0x27a))[_0x4f6e47(0x233)]({'coin':_0x44db7f[_0x4f6e47(0x1ae)]})[_0x4f6e47(0x226)]();!_0xa9face&&await initCoinResults();_0x44db7f[_0x4f6e47(0x1bf)]&&(_0x435859={'filled':_0x44db7f[_0x4f6e47(0x1fa)]*_0x44db7f[_0x4f6e47(0x217)],'amount':_0x44db7f[_0x4f6e47(0x1fa)]*_0x44db7f['price'],'side':_0x44db7f[_0x4f6e47(0x1cf)]==_0x4f6e47(0x2b6)?_0x4f6e47(0x291):_0x4f6e47(0x2b6),'price':0x1/_0x44db7f['price']},_0x44db7f={..._0x44db7f,..._0x435859});_0x2401d7?_0x172928=_0x44db7f[_0x4f6e47(0x1cf)]==_0x4f6e47(0x291)?_0xa9face['number']+_0x44db7f['filled']:_0xa9face[_0x4f6e47(0x232)]-_0x44db7f[_0x4f6e47(0x1fa)]:_0x172928=await getCoinNumber(_0x44db7f[_0x4f6e47(0x1ae)]);if(_0x44db7f[_0x4f6e47(0x1c9)]&&_0x44db7f['fee'][_0x4f6e47(0x255)]==config['basecoin'])_0x2b93fd=_0x44db7f[_0x4f6e47(0x1c9)][_0x4f6e47(0x2a5)];else{if(_0x44db7f['fee']&&_0x44db7f[_0x4f6e47(0x1c9)][_0x4f6e47(0x255)]==_0x4f6e47(0x191)&&!_0x2401d7)_0x2b93fd=_0x44db7f[_0x4f6e47(0x1c9)][_0x4f6e47(0x2a5)]*global[_0x4f6e47(0x22a)][_0x4f6e47(0x191)+config[_0x4f6e47(0x2b7)]];else _0x2b93fd=defaultFee*_0x44db7f[_0x4f6e47(0x1fa)]*_0x44db7f[_0x4f6e47(0x217)];}_0x44db7f[_0x4f6e47(0x1cf)]=='buy'?(_0x8fcbdc=_0x172928!=0x0?(_0xa9face['breakeven']*_0xa9face[_0x4f6e47(0x232)]+_0x44db7f[_0x4f6e47(0x217)]*(_0x172928-_0xa9face['number'])+_0x2b93fd)/_0x172928:0x0,_0x2b0121=_0xa9face[_0x4f6e47(0x215)]):(_0x8fcbdc=_0x172928!=0x0?(_0xa9face[_0x4f6e47(0x2bf)]*_0xa9face[_0x4f6e47(0x232)]-_0x44db7f[_0x4f6e47(0x217)]*(_0xa9face[_0x4f6e47(0x232)]-_0x172928)+_0x2b93fd)/_0x172928:0x0,_0x2b0121=_0xa9face[_0x4f6e47(0x215)]+(_0x44db7f['price']-_0xa9face['breakeven'])*_0x44db7f[_0x4f6e47(0x1fa)]);_0x47bc75=(_0x44db7f[_0x4f6e47(0x217)]-_0x8fcbdc-_0x2b93fd/_0x44db7f[_0x4f6e47(0x1fa)])*_0x172928;let _0x5408dc={'coin':_0x44db7f[_0x4f6e47(0x1ae)],'number':_0x172928,'breakeven':formatResult(_0x8fcbdc,0x8),'realized':formatResult(_0x2b0121,0x8),'unrealized':formatResult(_0x47bc75,0x8),'fees':formatResult(_0xa9face['fees']+_0x2b93fd,0x8),'sells':_0x44db7f['side']=='sell'?_0xa9face['sells']+0x1:_0xa9face[_0x4f6e47(0x1a7)],'buys':_0x44db7f['side']==_0x4f6e47(0x291)?_0xa9face[_0x4f6e47(0x206)]+0x1:_0xa9face['buys']};dbCoinResults[_0x4f6e47(0x2b0)]('coins')[_0x4f6e47(0x233)]({'coin':_0x44db7f[_0x4f6e47(0x1ae)]})['assign'](_0x5408dc)[_0x4f6e47(0x1e9)]();if(!_0x2401d7){if(_0x44db7f[_0x4f6e47(0x1c9)]&&_0x44db7f['fee'][_0x4f6e47(0x255)]==_0x4f6e47(0x191)){const _0x1e12f8=currentCoins[_0x4f6e47(0x233)](_0x1d8efa=>_0x1d8efa[_0x4f6e47(0x1ae)]=='BNB');if(_0x1e12f8){let _0x54451d=dbCoinResults[_0x4f6e47(0x2b0)]('coins')['find']({'coin':_0x4f6e47(0x191)})[_0x4f6e47(0x226)]();_0x5408dc={..._0x54451d,'number':_0x1e12f8[_0x4f6e47(0x232)]},dbCoinResults[_0x4f6e47(0x2b0)](_0x4f6e47(0x27a))[_0x4f6e47(0x233)]({'coin':'BNB'})[_0x4f6e47(0x2f1)](_0x5408dc)[_0x4f6e47(0x1e9)]();}}}}async function placeOrder(_0x1fb232){const _0x31fa40=_0x38a699,_0x1fbd0b=config[_0x31fa40(0x26e)]==_0x31fa40(0x1c6)?_0x31fa40(0x1c6):_0x31fa40(0x2e8);if(lockOrders==ORDERS[_0x31fa40(0x185)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x31fa40(0x183)],allOrdersPlaced=![],validateOrdersState=_0x31fa40(0x2b5);let _0xea4411=![];lastOrders=[];for(const _0xe71e78 of _0x1fb232){let _0x119f29,_0x1dfb35,_0x2d1776,_0x38b698,_0x409a7e,_0x33b7c4=_0xe71e78['symbol'];try{const _0x168e42=await exchange[_0x31fa40(0x209)](_0x33b7c4);_0x119f29=_0xe71e78[_0x31fa40(0x1bf)]?0x1/_0xe71e78[_0x31fa40(0x2bb)]:_0xe71e78[_0x31fa40(0x2bb)],_0x1dfb35=_0x168e42[_0x31fa40(0x218)],_0x2d1776=_0x168e42[_0x31fa40(0x1e6)];_0xe71e78['reverse']?(_0x38b698=_0xe71e78['side']=='buy'?_0x31fa40(0x2b6):'buy',_0x409a7e=Math[_0x31fa40(0x234)](_0xe71e78[_0x31fa40(0x285)])/_0x119f29):(_0x38b698=_0xe71e78[_0x31fa40(0x1cf)],_0x409a7e=Math[_0x31fa40(0x234)](_0xe71e78[_0x31fa40(0x285)]));_0x1fbd0b==_0x31fa40(0x2e8)&&(config[_0x31fa40(0x26e)]==_0x31fa40(0x228)&&(_0x119f29=_0x38b698=='buy'?_0x1dfb35:_0x2d1776),config[_0x31fa40(0x26e)]==_0x31fa40(0x252)&&(_0x119f29=_0x38b698==_0x31fa40(0x291)?_0x2d1776:_0x1dfb35));_0x409a7e=formatResult(_0x409a7e,0x8),_0x119f29=formatResult(_0x119f29,0x8);const _0x389808=_0x38b698=='sell'?config[_0x31fa40(0x26a)]?String[_0x31fa40(0x22d)]('0x'+config[_0x31fa40(0x26a)])+'\x20':'':config[_0x31fa40(0x290)]?String[_0x31fa40(0x22d)]('0x'+config[_0x31fa40(0x290)])+'\x20':'',_0x1675cf=_0x1fbd0b==_0x31fa40(0x1c6)?'Market':config[_0x31fa40(0x26e)]=='limit-high'?_0x31fa40(0x2f3):'Limit\x20(low-margin)',_0x1fcf20=new Date()[_0x31fa40(0x1f8)]()[_0x31fa40(0x1a6)]()[_0x31fa40(0x1ca)](-0x6)+'-'+Math[_0x31fa40(0x257)]()['toString']()[_0x31fa40(0x1ca)](-0x6);lastOrders['push']({'customId':_0x1fcf20,'symbol':_0x33b7c4,'coin':_0xe71e78[_0x31fa40(0x1ae)],'side':_0x38b698,'reverse':_0xe71e78['reverse'],'filled':0x0});if(_0x1fbd0b==_0x31fa40(0x1c6))logHistory(_0x31fa40(0x2e5),''+_0x389808+_0x1675cf+_0x31fa40(0x2e7)+_0x33b7c4+'\x20'+_0x38b698+'\x20#'+formatResult(_0x409a7e,0x8)+'\x20@'+formatResult(_0x119f29,0x8));else logHistory(_0x31fa40(0x2e5),''+_0x389808+_0x1675cf+'\x20order:\x20'+_0x33b7c4+'\x20'+_0x38b698+'\x20#'+formatResult(_0x409a7e,0x8)+'\x20@'+formatResult(_0x119f29,0x8));const _0x52c94e=await exchange[_0x31fa40(0x2a4)](_0x33b7c4,_0x1fbd0b,_0x38b698,_0x409a7e,_0x119f29,{'clientOrderId':_0x1fcf20}),_0x269896=lastOrders[_0x31fa40(0x2b9)]-0x1;_0x269896>=0x0&&lastOrders[_0x269896][_0x31fa40(0x208)]==_0x1fcf20&&(lastOrders[_0x269896]={...lastOrders[_0x269896],'orderId':_0x52c94e['id'],'amount':_0x52c94e[_0x31fa40(0x2ec)],'price':_0x52c94e[_0x31fa40(0x217)],'fee':_0x52c94e[_0x31fa40(0x1c9)]});if(config[_0x31fa40(0x254)]!=0x0){let _0x33121a=null;if(cooldownTracker[_0x31fa40(0x2b9)]==config[_0x31fa40(0x254)]-0x1)_0x33121a=cooldownTracker[_0x31fa40(0x2ef)]();const _0x57ac9f=getTimeStamp();cooldownTracker['push'](_0x57ac9f);if(_0x33121a){const _0x43ff9d=fns[_0x31fa40(0x2e9)](new Date(_0x57ac9f),new Date(_0x33121a));if(_0x43ff9d<cooldownInterval){logHistory(_0x31fa40(0x248),_0x31fa40(0x2a6)+config[_0x31fa40(0x254)]+_0x31fa40(0x199)+cooldownInterval/0x3c+_0x31fa40(0x280)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x54d1ea){if(_0x54d1ea['toString']()['includes'](_0x31fa40(0x269)))lastOrders=lastOrders['filter'](_0x141a9c=>_0x141a9c[_0x31fa40(0x1a1)]!=_0x33b7c4),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x33b7c4),_0xea4411=!![];else{if(_0x54d1ea[_0x31fa40(0x1a6)]()[_0x31fa40(0x276)](_0x31fa40(0x267)))lastOrders=lastOrders[_0x31fa40(0x266)](_0x478cc8=>_0x478cc8[_0x31fa40(0x1a1)]!=_0x33b7c4),logHistory(_0x31fa40(0x248),_0x31fa40(0x24d)+_0x33b7c4),_0xea4411=!![];else _0x54d1ea[_0x31fa40(0x1a6)]()['includes'](_0x31fa40(0x1cc))?(lastOrders=lastOrders[_0x31fa40(0x266)](_0x57806f=>_0x57806f['symbol']!=_0x33b7c4),logHistory('error',_0x31fa40(0x1ac)+_0x33b7c4),_0xea4411=!![]):(lastOrders=lastOrders[_0x31fa40(0x266)](_0x5e8e87=>_0x5e8e87[_0x31fa40(0x1a1)]!=_0x33b7c4),await handleError(_0x54d1ea,_0x31fa40(0x286),_0x33b7c4));}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x31fa40(0x2b9)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x38b84c=config[_0x31fa40(0x26e)]==_0x31fa40(0x1c6)?validateOrderTimeout*0x3c*0x3e8:config[_0x31fa40(0x2ee)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x38b84c);}else unlockOrders();_0xea4411&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x31fa40(0x25f),_0x31fa40(0x27d)));}else{if(coolingDown)!config[_0x31fa40(0x20e)]&&logHistory(_0x31fa40(0x248),_0x31fa40(0x236));else lockOrders!=ORDERS[_0x31fa40(0x185)]&&(!config[_0x31fa40(0x20e)]&&(config['ordertype']==_0x31fa40(0x1c6)?logHistory(_0x31fa40(0x248),_0x31fa40(0x19f)):logHistory(_0x31fa40(0x248),_0x31fa40(0x2bd))));}}function persistOpenOrders(_0x20357f){const _0x463c8a=_0x38a699,_0x5cb5ba={...config,'openOrders':_0x20357f};let _0x721fd3=dbConfig[_0x463c8a(0x2b0)]('bot')[_0x463c8a(0x233)]({'botID':botID})[_0x463c8a(0x226)]();_0x721fd3&&dbConfig[_0x463c8a(0x2b0)](_0x463c8a(0x201))['find']({'botID':botID})[_0x463c8a(0x2f1)](_0x5cb5ba)['write']();}function restoreOrders(){const _0x4f65f8=_0x38a699;let _0x213435;config[_0x4f65f8(0x17d)]&&allOpenOrders['forEach'](_0x6a5a92=>{const _0x29dd3a=_0x4f65f8,_0x4105e2=config[_0x29dd3a(0x17d)][_0x29dd3a(0x233)](_0xae8bbf=>_0xae8bbf[_0x29dd3a(0x29b)]==_0x6a5a92['id']);_0x4105e2&&(lastOrders['push'](_0x4105e2),_0x213435=_0x6a5a92[_0x29dd3a(0x26b)]);});if(lastOrders[_0x4f65f8(0x2b9)]>0x0){lockOrders=ORDERS[_0x4f65f8(0x183)],validateOrdersState=_0x4f65f8(0x1a2),allOrdersPlaced=!![];const _0x362161=new Date()[_0x4f65f8(0x1f8)](),_0x2e5821=config[_0x4f65f8(0x26e)]==_0x4f65f8(0x1c6)?validateOrderTimeout*0x3c*0x3e8:config[_0x4f65f8(0x2ee)]*0x3c*0x3e8;if(_0x213435+_0x2e5821>_0x362161){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4ec421=_0x4f65f8;validateOrders(_0x4ec421(0x2b1));},_0x213435+_0x2e5821-_0x362161);}else validateOrders(_0x4f65f8(0x2b1));}}async function sendMetricsTelegram(){const _0x846bc=_0x38a699;if(!coinsLoaded){process[_0x846bc(0x2f5)]({'telegrammsg':_0x846bc(0x282)},_0x5a2829=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x134c05='';if(config['showname'])_0x134c05='<b>'+config[_0x846bc(0x211)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x134c05='<b>Bot\x20'+botID+_0x846bc(0x207);const _0x2b5751=getKPIs(_0x846bc(0x2b7)),_0x2b3576=getKPIs(_0x846bc(0x190),config[_0x846bc(0x190)]),_0x1d261b=getKPIs(_0x846bc(0x296)),_0x586ec2=getKPIs('net-fiat',config['fiat']);_0x134c05+=_0x846bc(0x2aa),_0x134c05+=_0x2b5751[_0x846bc(0x2cc)]+'\x20:\x20'+_0x2b5751[_0x846bc(0x226)]+'\x0a',_0x134c05+=_0x2b5751['rightTxt']+':\x20'+_0x2b5751[_0x846bc(0x1b2)]+'%\x0a',_0x134c05+=_0x2b3576[_0x846bc(0x2cc)]+_0x846bc(0x189)+_0x2b3576['value']+'\x0a',_0x134c05+=_0x2b3576[_0x846bc(0x1b0)]+':\x20'+_0x2b3576['change']+'%\x0a',_0x134c05+=_0x1d261b['leftTxt']+':\x20'+_0x1d261b[_0x846bc(0x226)]+'\x20('+config[_0x846bc(0x2b7)]+')\x0a',_0x134c05+=_0x1d261b['rightTxt']+':\x20'+_0x1d261b[_0x846bc(0x1b2)]+_0x846bc(0x1d8)+config[_0x846bc(0x2b7)]+')\x0a',_0x134c05+=_0x586ec2[_0x846bc(0x2cc)]+':\x20'+_0x586ec2['value']+'\x20('+config[_0x846bc(0x190)]+')\x0a',_0x134c05+=_0x586ec2[_0x846bc(0x1b0)]+':\x20'+_0x586ec2[_0x846bc(0x1b2)]+'%\x20('+config[_0x846bc(0x190)]+')\x0a',_0x134c05+='</pre>',process[_0x846bc(0x2f5)]({'telegrammsg':_0x134c05},_0x691555=>{});}function _0xe995(_0x6ecc03,_0x314d41){const _0x2c796d=_0x5f27();return _0xe995=function(_0x2ff698,_0x44c152){_0x2ff698=_0x2ff698-0x17c;let _0x5f27e9=_0x2c796d[_0x2ff698];return _0x5f27e9;},_0xe995(_0x6ecc03,_0x314d41);}async function sendPortfolioTelegram(){const _0x3f3ffa=_0x38a699;if(!coinsLoaded){process[_0x3f3ffa(0x2f5)]({'telegrammsg':_0x3f3ffa(0x282)},_0x3ae242=>{});return;}let _0x8a4a73='';if(config[_0x3f3ffa(0x1dc)])_0x8a4a73=_0x3f3ffa(0x238)+config[_0x3f3ffa(0x211)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x8a4a73=_0x3f3ffa(0x1cb)+botID+_0x3f3ffa(0x2da);_0x8a4a73+=_0x3f3ffa(0x2aa),_0x8a4a73+=_0x3f3ffa(0x1fe),_0x8a4a73+=_0x3f3ffa(0x1b9),_0x8a4a73+=_0x3f3ffa(0x1fe),currentCoins[_0x3f3ffa(0x19a)](_0x526592=>{const _0x1fadb2=_0x3f3ffa;_0x8a4a73+=_0x526592[_0x1fadb2(0x1ae)][_0x1fadb2(0x1f2)](0x7)+'|\x20'+formatPad(_0x526592[_0x1fadb2(0x2b4)],0x2,0x6)+'|\x20'+formatPad(_0x526592['target'],0x2,0x6)+'|\x20'+formatPad(_0x526592[_0x1fadb2(0x1a5)]*0x64,0x2,0x6)+'\x0a';}),_0x8a4a73+=_0x3f3ffa(0x245),process[_0x3f3ffa(0x2f5)]({'telegrammsg':_0x8a4a73},_0x5eae4a=>{});}function formatPad(_0x169012,_0x4170c2,_0x28a69e){const _0x1af13f=_0x38a699,_0x1d6d1c=formatResultString(_0x169012,_0x4170c2);return _0x1d6d1c?_0x1d6d1c['padStart'](_0x28a69e):''[_0x1af13f(0x21f)](_0x28a69e);}function logHistory(_0x2b9afa,_0x15fc83,_0x143294=''){const _0x3eeac7=_0x38a699;let _0x2cb2f1={'time':getTimeStamp(),'type':_0x2b9afa,'event':_0x15fc83};dbLogs[_0x3eeac7(0x2b0)](_0x3eeac7(0x240))[_0x3eeac7(0x182)](_0x2cb2f1)[_0x3eeac7(0x1e9)]();if(_0x143294=='')_0x143294=_0x15fc83;proxyEmit(_0x3eeac7(0x29e),{'log':_0x2cb2f1,'summary':_0x143294}),process[_0x3eeac7(0x2f5)]({'telegram':{..._0x2cb2f1,'botname':config['botname'],'showname':config[_0x3eeac7(0x1dc)]}},_0x4cbce3=>{}),logger[_0x3eeac7(0x22e)](''+_0x2cb2f1[_0x3eeac7(0x29e)]);}function emitHistory(_0x51dbb3={}){const _0x3fcdd8=_0x38a699;Object[_0x3fcdd8(0x2d3)](_0x51dbb3)['length']==0x0&&(_0x51dbb3={'type':[_0x3fcdd8(0x2e5),_0x3fcdd8(0x29e)],'event':'','page':0x1});if(_0x51dbb3[_0x3fcdd8(0x221)][_0x3fcdd8(0x276)](_0x3fcdd8(0x29e)))_0x51dbb3[_0x3fcdd8(0x221)]['splice'](_0x51dbb3[_0x3fcdd8(0x221)][_0x3fcdd8(0x299)](_0x3fcdd8(0x29e)),0x1,_0x3fcdd8(0x248),'warning',_0x3fcdd8(0x25f));if(dbLogs['has'](_0x3fcdd8(0x240))[_0x3fcdd8(0x226)]()){let _0x73f142=dbLogs['get'](_0x3fcdd8(0x240))[_0x3fcdd8(0x266)](_0x1cad9d=>{const _0x548ce5=_0x3fcdd8;if(_0x51dbb3[_0x548ce5(0x221)][_0x548ce5(0x2b9)]==0x0)return![];else return _0x51dbb3[_0x548ce5(0x221)][_0x548ce5(0x276)](_0x1cad9d[_0x548ce5(0x221)]);})['filter'](_0x468812=>{const _0x3aad9b=_0x3fcdd8;if(_0x51dbb3[_0x3aad9b(0x29e)]=='')return!![];else return _0x468812[_0x3aad9b(0x29e)][_0x3aad9b(0x1ba)]()[_0x3aad9b(0x276)](_0x51dbb3[_0x3aad9b(0x29e)][_0x3aad9b(0x1ba)]());})[_0x3fcdd8(0x259)](_0x3fcdd8(0x2e6)),_0x59d4a2=_0x73f142[_0x3fcdd8(0x226)]()[_0x3fcdd8(0x2b9)];_0x73f142=_0x73f142['reverse']()[_0x3fcdd8(0x1ca)]((_0x51dbb3['page']-0x1)*logPageSize,_0x51dbb3[_0x3fcdd8(0x2ea)]*logPageSize-0x1)[_0x3fcdd8(0x1bf)]()[_0x3fcdd8(0x226)](),proxyEmit(_0x3fcdd8(0x2b3),{'logs':_0x73f142,'total':_0x59d4a2});}else proxyEmit(_0x3fcdd8(0x2b3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5661ad){const _0x5f114a=_0x38a699;if(dbLogs[_0x5f114a(0x1d7)](_0x5f114a(0x240))['value']()){const _0x1b8cc9=dbLogs[_0x5f114a(0x2b0)](_0x5f114a(0x240))[_0x5f114a(0x259)](_0x5f114a(0x2e6))[_0x5f114a(0x266)](_0x9578f4=>{const _0x296c97=_0x5f114a;return _0x9578f4[_0x296c97(0x221)]=='order';})[_0x5f114a(0x226)]();dbLogs['get'](_0x5f114a(0x240))[_0x5f114a(0x2b8)]()[_0x5f114a(0x1e9)](),dbLogs['get'](_0x5f114a(0x240))[_0x5f114a(0x2f1)](_0x1b8cc9)[_0x5f114a(0x1e9)](),emitHistory(_0x5661ad);}}async function pauseBot(_0x1d685a=''){const _0x58b08d=_0x38a699,_0x2e0dae=new Date()[_0x58b08d(0x1f8)]();if(!lastErrorShown||_0x2e0dae-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2e0dae;!lastBotPause?(lastBotPause=_0x2e0dae,consecutivePauses=0x1):(_0x2e0dae-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x58b08d(0x2f5)]({'stop':_0x58b08d(0x222)},_0x18c630=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x1d685a)_0x1d685a+=_0x58b08d(0x220);logHistory('error',_0x1d685a+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x58b08d(0x28c)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x162751=_0x38a699;process[_0x162751(0x2f5)]({'stop':_0x162751(0x2bc)},_0x43ea6f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x563bc9,_0x331440){const _0x351791=_0x38a699;if(_0x563bc9['toString']()[_0x351791(0x276)](_0x351791(0x1bd)))return logHistory(_0x351791(0x248),config['exchange']+_0x351791(0x27c)),![];else{if(_0x563bc9[_0x351791(0x1a6)]()[_0x351791(0x276)](_0x351791(0x1a4)))return logHistory(_0x351791(0x248),config['exchange']+_0x351791(0x1be)),![];else{if(_0x563bc9[_0x351791(0x1a6)]()[_0x351791(0x276)]('AuthenticationError'))return logHistory(_0x351791(0x248),config[_0x351791(0x298)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x351791(0x248),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x563bc9,_0x331440);}}}async function handleError(_0x1f6871,_0x4cdcd4,_0x136543=''){const _0x5c9d9c=_0x38a699,_0x11a8dd=config[_0x5c9d9c(0x298)]||_0x5c9d9c(0x28e);if(_0x1f6871[_0x5c9d9c(0x1a6)]()['includes']('DDoSProtection'))await pauseBot(config[_0x5c9d9c(0x298)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x1f6871['toString']()[_0x5c9d9c(0x276)]('ExchangeNotAvailable'))await pauseBot(config[_0x5c9d9c(0x298)]+'\x20not\x20available');else{if(_0x1f6871['toString']()[_0x5c9d9c(0x276)](_0x5c9d9c(0x2ae)))await pauseBot(config[_0x5c9d9c(0x298)]+_0x5c9d9c(0x181));else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006'))await pauseBot(config['exchange']+_0x5c9d9c(0x271));else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()['includes'](_0x5c9d9c(0x22c)))logHistory(_0x5c9d9c(0x248),_0x4cdcd4+_0x5c9d9c(0x1e3)),logHistory(_0x5c9d9c(0x248),_0x5c9d9c(0x2fa)),await killBot();else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()['includes']('InvalidNonce'))logHistory(_0x5c9d9c(0x248),_0x4cdcd4+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x5c9d9c(0x248),_0x5c9d9c(0x2fa)),await killBot();else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()[_0x5c9d9c(0x276)](_0x5c9d9c(0x1bd)))logHistory('error',_0x4cdcd4+_0x5c9d9c(0x220)+config['exchange']+_0x5c9d9c(0x2be)),logHistory(_0x5c9d9c(0x248),_0x5c9d9c(0x2fa)),await killBot();else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()[_0x5c9d9c(0x276)](_0x5c9d9c(0x1a4)))logHistory(_0x5c9d9c(0x248),_0x4cdcd4+_0x5c9d9c(0x220)+config['exchange']+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x5c9d9c(0x2fa)),await killBot();else{if(_0x1f6871[_0x5c9d9c(0x1a6)]()[_0x5c9d9c(0x276)](_0x5c9d9c(0x243)))logHistory(_0x5c9d9c(0x248),_0x4cdcd4+_0x5c9d9c(0x220)+config[_0x5c9d9c(0x298)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x5c9d9c(0x248),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x1f6871[_0x5c9d9c(0x1a6)]()[_0x5c9d9c(0x276)]('InsufficientFunds')?logHistory(_0x5c9d9c(0x248),_0x4cdcd4+_0x5c9d9c(0x213)+_0x136543):(logger[_0x5c9d9c(0x22e)](_0x4cdcd4+'\x20|\x20Error\x20details:\x20',_0x1f6871),await pauseBot(_0x5c9d9c(0x250)));}}}}}}}}}function formatResult(_0x5330bd,_0x25f7bc){return parseFloat(_0x5330bd['toFixed'](_0x25f7bc));}function formatResultTruncate(_0x22cf78,_0x12e0fc){const _0x569f80=_0x38a699;let _0x53f3f5=formatResultString(_0x22cf78,0xa),_0xcb4175=_0x53f3f5[_0x569f80(0x299)]('.');return _0xcb4175!=-0x1&&(_0x53f3f5=_0x53f3f5[_0x569f80(0x1ca)](0x0,_0xcb4175+_0x12e0fc+0x1)),Number(_0x53f3f5);}function formatResultString(_0x5d4768,_0x11eef4){const _0x44f3eb=_0x38a699;let _0x4eeedd;if(!(''+_0x5d4768)[_0x44f3eb(0x276)]('e'))_0x4eeedd=+(Math[_0x44f3eb(0x268)](_0x5d4768+'e+'+_0x11eef4)+'e-'+_0x11eef4);else{let _0x14a8e4=(''+_0x5d4768)[_0x44f3eb(0x1a3)]('e'),_0x1b1311='';+_0x14a8e4[0x1]+_0x11eef4>0x0&&(_0x1b1311='+'),_0x4eeedd=+(Math[_0x44f3eb(0x268)](+_0x14a8e4[0x0]+'e'+_0x1b1311+(+_0x14a8e4[0x1]+_0x11eef4))+'e-'+_0x11eef4);}return Number(_0x4eeedd)[_0x44f3eb(0x223)](_0x11eef4);}function getServerTime(){const _0x4cbd2c=_0x38a699,_0x5edef3=new Date();return _0x5edef3[_0x4cbd2c(0x1a8)]()+'/'+(_0x5edef3[_0x4cbd2c(0x2ca)]()+0x1)['toString']()[_0x4cbd2c(0x21f)](0x2,'0')+'/'+_0x5edef3[_0x4cbd2c(0x2cf)]()[_0x4cbd2c(0x1a6)]()['padStart'](0x2,'0')+'\x20'+_0x5edef3[_0x4cbd2c(0x21e)]()[_0x4cbd2c(0x1a6)]()[_0x4cbd2c(0x21f)](0x2,'0')+':'+_0x5edef3[_0x4cbd2c(0x2a9)]()[_0x4cbd2c(0x1a6)]()[_0x4cbd2c(0x21f)](0x2,'0')+':'+_0x5edef3[_0x4cbd2c(0x28d)]()[_0x4cbd2c(0x1a6)]()[_0x4cbd2c(0x21f)](0x2,'0');}function getTimeStamp(){const _0xadd465=_0x38a699,_0x398edc=shiftedTime();return _0x398edc[_0xadd465(0x1a8)]()+'/'+(_0x398edc[_0xadd465(0x2ca)]()+0x1)[_0xadd465(0x1a6)]()[_0xadd465(0x21f)](0x2,'0')+'/'+_0x398edc['getDate']()['toString']()[_0xadd465(0x21f)](0x2,'0')+'\x20'+_0x398edc[_0xadd465(0x21e)]()[_0xadd465(0x1a6)]()[_0xadd465(0x21f)](0x2,'0')+':'+_0x398edc[_0xadd465(0x2a9)]()[_0xadd465(0x1a6)]()['padStart'](0x2,'0')+':'+_0x398edc[_0xadd465(0x28d)]()[_0xadd465(0x1a6)]()[_0xadd465(0x21f)](0x2,'0');}function getDate(){const _0x7ffd4f=_0x38a699,_0x5c95b8=shiftedTime();return _0x5c95b8[_0x7ffd4f(0x1a8)]()+'/'+(_0x5c95b8['getMonth']()+0x1)[_0x7ffd4f(0x1a6)]()['padStart'](0x2,'0')+'/'+_0x5c95b8[_0x7ffd4f(0x2cf)]()[_0x7ffd4f(0x1a6)]()['padStart'](0x2,'0');}function getHour(){const _0x3f2ee7=_0x38a699,_0x31c6ed=shiftedTime();return _0x31c6ed[_0x3f2ee7(0x21e)]()[_0x3f2ee7(0x1a6)]()[_0x3f2ee7(0x21f)](0x2,'0');}function sleep(_0x38b149){return new Promise(_0x140214=>setTimeout(_0x140214,_0x38b149));}function shiftedTime(){const _0x3196fd=_0x38a699,_0x3d0fd7=new Date();let _0x5ca313=_0x3d0fd7;if(config&&config[_0x3196fd(0x203)]!==0x0)_0x5ca313=fns[_0x3196fd(0x1b4)](_0x3d0fd7,{'hours':config[_0x3196fd(0x203)]});return _0x5ca313;}function timer(_0x541dd3){const _0x525369=_0x38a699,_0x248722=new Date();!lasttime?console[_0x525369(0x281)](_0x525369(0x1ad),_0x541dd3,_0x248722):console[_0x525369(0x281)]('timer:',_0x541dd3,(_0x248722-lasttime)/0x3e8),lasttime=_0x248722;}