const _0x3239f5=_0x4b44;(function(_0x223516,_0x16a5ce){const _0x5dba7a=_0x4b44,_0xaa351d=_0x223516();while(!![]){try{const _0x22344d=-parseInt(_0x5dba7a(0x196))/0x1*(-parseInt(_0x5dba7a(0x12a))/0x2)+-parseInt(_0x5dba7a(0x166))/0x3*(parseInt(_0x5dba7a(0x13c))/0x4)+parseInt(_0x5dba7a(0x209))/0x5+-parseInt(_0x5dba7a(0x129))/0x6+-parseInt(_0x5dba7a(0x172))/0x7*(parseInt(_0x5dba7a(0x1fb))/0x8)+-parseInt(_0x5dba7a(0x192))/0x9*(parseInt(_0x5dba7a(0x183))/0xa)+-parseInt(_0x5dba7a(0x1d7))/0xb*(-parseInt(_0x5dba7a(0x13d))/0xc);if(_0x22344d===_0x16a5ce)break;else _0xaa351d['push'](_0xaa351d['shift']());}catch(_0x57157d){_0xaa351d['push'](_0xaa351d['shift']());}}}(_0xec32,0xad503));const _0x51c30a=function(){let _0xd28093=!![];return function(_0x2cdb1d,_0x1b5f3a){const _0x17f674=_0xd28093?function(){if(_0x1b5f3a){const _0x44539d=_0x1b5f3a['apply'](_0x2cdb1d,arguments);return _0x1b5f3a=null,_0x44539d;}}:function(){};return _0xd28093=![],_0x17f674;};}(),_0x53f22a=_0x51c30a(this,function(){const _0x1da71d=_0x4b44;return _0x53f22a[_0x1da71d(0x162)]()[_0x1da71d(0x165)](_0x1da71d(0x16a))['toString']()['constructor'](_0x53f22a)['search'](_0x1da71d(0x16a));});_0x53f22a();'use strict';const ccxt=require(_0x3239f5(0x1e1)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3239f5(0x277)),Crypt=require('hybrid-crypto-js')[_0x3239f5(0x1cb)],util=require(_0x3239f5(0x28c)),argv=require('yargs/yargs')(process[_0x3239f5(0x144)][_0x3239f5(0x295)](0x2))[_0x3239f5(0x144)],path=require('path');let exchange;global[_0x3239f5(0x25d)]={},global['change']={};const usdBasecoins=['USD',_0x3239f5(0x29b),_0x3239f5(0x263),_0x3239f5(0x1b4),_0x3239f5(0x251),_0x3239f5(0x287)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3239f5(0x1cc)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3239f5(0x1a4)+pauseBotInterval/0xea60+_0x3239f5(0x27d),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x3239f5(0x19f))['version'],botID=process['argv'][0x2]||_0x3239f5(0x26d),pattern=/^[0-9]{3}$/;!pattern[_0x3239f5(0x135)](botID)&&(console[_0x3239f5(0x197)](_0x3239f5(0x216)+botID+_0x3239f5(0x17a)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x3239f5(0x219)+userID+'/':_0x3239f5(0x219),logspath=userID?_0x3239f5(0x131)+userID+'/':'./logs/',loggerfile=fs[_0x3239f5(0x258)](logspath+_0x3239f5(0x126),{'flags':'a'});!fs[_0x3239f5(0x227)](configpath)&&fs[_0x3239f5(0x1e5)](configpath);!fs[_0x3239f5(0x227)](logspath)&&fs[_0x3239f5(0x1e5)](logspath);const configfile=configpath+_0x3239f5(0x191)+botID+'-config.json',logfile=configpath+_0x3239f5(0x191)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x3239f5(0x240),coinresultsfile=configpath+'bot-'+botID+_0x3239f5(0x1df),settingsfile=configpath+_0x3239f5(0x235),securefile=configpath+_0x3239f5(0x17c),configbackuppath=configpath+_0x3239f5(0x26b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3239f5(0x1a1)]({'logs':[],'version':serverversion})[_0x3239f5(0x14c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3239f5(0x1a1)]({'bot':[],'version':serverversion})[_0x3239f5(0x14c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x3239f5(0x14c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3239f5(0x147),'rsaStandard':_0x3239f5(0x1f7)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4d783e=>{console['log'](_0x4d783e);},'simple':_0x49383f=>{const _0x43d0a6=_0x3239f5;console[_0x43d0a6(0x197)](_0x49383f),loggerfile[_0x43d0a6(0x14c)](util[_0x43d0a6(0x16c)](_0x49383f)+'\x0a');},'full':async(_0x281c47,_0x399607='')=>{const _0x4baffc=_0x3239f5;let _0x584891;if(config[_0x4baffc(0x2a3)])_0x584891=getTimeStamp()+':\x20'+config[_0x4baffc(0x2ab)]+_0x4baffc(0x25c)+_0x281c47;else _0x584891=getTimeStamp()+_0x4baffc(0x154)+botID+_0x4baffc(0x25c)+_0x281c47;console[_0x4baffc(0x197)](_0x584891),loggerfile[_0x4baffc(0x14c)](util[_0x4baffc(0x16c)](_0x584891)+'\x0a'),_0x399607&&(console[_0x4baffc(0x197)](_0x399607),loggerfile[_0x4baffc(0x14c)](util[_0x4baffc(0x16c)](_0x399607)+'\x0a'));},'debug':async(_0x1b56f8,_0x2ef27f='')=>{const _0x216570=_0x3239f5;let _0x3ef7cf;if(config[_0x216570(0x2a3)])_0x3ef7cf=getTimeStamp()+':\x20'+config[_0x216570(0x2ab)]+_0x216570(0x275)+_0x1b56f8;else _0x3ef7cf=getTimeStamp()+_0x216570(0x154)+botID+_0x216570(0x275)+_0x1b56f8;if(debugging)console['log'](_0x3ef7cf);loggerfile['write'](util['format'](_0x3ef7cf)+'\x0a');if(_0x2ef27f){if(debugging)console[_0x216570(0x197)](_0x2ef27f);loggerfile[_0x216570(0x14c)](util[_0x216570(0x16c)](_0x2ef27f)+'\x0a');}}};process['on'](_0x3239f5(0x134),function(_0x1010f5){const _0x113306=_0x3239f5;logHistory(_0x113306(0x122),_0x113306(0x250)),logger[_0x113306(0x2b3)](_0x113306(0x15b),_0x1010f5);});settings[_0x3239f5(0x1ba)]!=config[_0x3239f5(0x1ba)]&&updateTimeshift(settings[_0x3239f5(0x1ba)]);settings[_0x3239f5(0x206)]!=config[_0x3239f5(0x206)]&&updateOnepagemode(settings[_0x3239f5(0x206)]);process[_0x3239f5(0x1e6)]({'started':_0x3239f5(0x149)},_0x3371bf=>{}),initializeProcessListeners();function proxyEmit(_0x321deb,_0x574803=null){const _0x4fe922=_0x3239f5;process[_0x4fe922(0x1e6)]({'function':_0x321deb,'args':_0x574803},_0x4ef7e7=>{});}function initializeProcessListeners(){const _0x511f8e=_0x3239f5;process['on'](_0x511f8e(0x265),_0x4a7f2a=>{const _0x20f4e0=_0x511f8e;switch(Object[_0x20f4e0(0x1c4)](_0x4a7f2a)[0x0]){case'timeshift':_0x4a7f2a['timeshift']!=undefined&&(settings['timeshift']=_0x4a7f2a[_0x20f4e0(0x1ba)],updateTimeshift(settings[_0x20f4e0(0x1ba)]));break;case _0x20f4e0(0x206):_0x4a7f2a['onepagemode']!=undefined&&(settings[_0x20f4e0(0x206)]=_0x4a7f2a['onepagemode'],updateOnepagemode(settings[_0x20f4e0(0x206)]));break;case'bots':_0x4a7f2a['bots']!=undefined&&(bots=JSON[_0x20f4e0(0x261)](_0x4a7f2a['bots']),proxyEmit('bots',bots));break;case _0x20f4e0(0x21f):switch(_0x4a7f2a[_0x20f4e0(0x21f)]){case _0x20f4e0(0x132):initclient();break;case _0x20f4e0(0x19e):toggleBotMode();break;case'emitHistory':emitHistory(_0x4a7f2a[_0x20f4e0(0x223)]);break;case _0x20f4e0(0x29a):deleteHistoryAlerts(_0x4a7f2a['args']);break;case _0x20f4e0(0x290):getPortfolio(_0x4a7f2a[_0x20f4e0(0x223)]);break;case _0x20f4e0(0x1c7):storeConfiguration(_0x4a7f2a[_0x20f4e0(0x223)]);break;case _0x20f4e0(0x254):storeHeadless(_0x4a7f2a[_0x20f4e0(0x223)]);break;case _0x20f4e0(0x1b1):storeFiat(_0x4a7f2a[_0x20f4e0(0x223)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4a7f2a['args']);break;case _0x20f4e0(0x19c):cancelLoading();break;case'showConfig':showConfig();break;case _0x20f4e0(0x1f8):sendMetricsTelegram();break;case _0x20f4e0(0x15a):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5a8e2e=![]){const _0x3fa1bb=_0x3239f5;logger[_0x3fa1bb(0x2b3)](_0x3fa1bb(0x1dd)+(_0x5a8e2e?_0x3fa1bb(0x174):'exchange\x20not\x20reloaded')+_0x3fa1bb(0x22a)+config[_0x3fa1bb(0x243)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5a8e2e)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3fa1bb(0x1ae)]!=''&&config[_0x3fa1bb(0x1ae)]!=_0x3fa1bb(0x289)){loadingProgress=0x0;if(_0x5a8e2e){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2f174c){handleErrorNoStop(_0x2f174c,_0x3fa1bb(0x274));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xafcd58=await getCoins();[currentCoins,currentCoinsAll]=_0xafcd58,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x3fa1bb(0x2b3)](_0x3fa1bb(0x28b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3fa1bb(0x2a2)]==0x0&&allOpenOrders[_0x3fa1bb(0x2a2)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4011b6=_0x3239f5;exchangeStopped=!![];try{await exchange[_0x4011b6(0x279)]();}catch(_0x41766e){await handleError(_0x41766e,_0x4011b6(0x1af));}}async function reloadExchange(){const _0x451577=_0x3239f5;while(lockOrders!=ORDERS[_0x451577(0x1cc)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x451577(0x2b3)](_0x451577(0x284)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x38a35e=config['exchange'],_0x188a50=config['apiKey'],_0x29e451=config[_0x3239f5(0x26f)],_0x1c0dfb=config[_0x3239f5(0x1bb)]){const _0xef1479=_0x3239f5;exchange&&await stopExchange();!supportedExchanges()[_0xef1479(0x1f6)](_0x38a35e)&&(logHistory(_0xef1479(0x122),_0xef1479(0x214)+_0x38a35e+'\x20exchange'),killBot());const _0x383998=ccxt['pro'][_0x38a35e['toLowerCase']()];exchange=new _0x383998({'apiKey':_0x188a50,'secret':_0x29e451,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xef1479(0x25f)}});if(_0x1c0dfb)exchange[_0xef1479(0x231)]=_0x1c0dfb;}function setStableCoins(){const _0x4fbfcb=_0x3239f5;let _0x300b42=config[_0x4fbfcb(0x11f)]=='ETH'?'ETH':_0x4fbfcb(0x1fe),_0x291547=!allSymbols['includes'](_0x300b42+_0x4fbfcb(0x22b))?_0x4fbfcb(0x1b4):_0x4fbfcb(0x252),_0x525b09=!allSymbols[_0x4fbfcb(0x1f6)](_0x300b42+'/EUR')?_0x291547:_0x4fbfcb(0x27b);stablecoins={'eur':{'coin':''+_0x300b42+_0x525b09,'symbol':_0x300b42+'/'+_0x525b09},'usd':{'coin':''+_0x300b42+_0x291547,'symbol':_0x300b42+'/'+_0x291547}};}async function initwsCcxt(){const _0x399547=_0x3239f5;initCycle++;const _0x537f4c=initCycle;let _0x104753=[];config[_0x399547(0x153)][_0x399547(0x1ed)](_0x399eca=>{const _0x1e87fb=_0x399547;if(!_0x399eca[_0x1e87fb(0x23f)]&&_0x399eca['coin']!=config[_0x1e87fb(0x11f)])_0x104753[_0x1e87fb(0x18c)](_0x399eca[_0x1e87fb(0x1a7)]);});if(!_0x104753[_0x399547(0x1f6)](stablecoins[_0x399547(0x16e)]['symbol']))_0x104753['push'](stablecoins[_0x399547(0x16e)]['symbol']);if(!_0x104753[_0x399547(0x1f6)](stablecoins[_0x399547(0x12e)][_0x399547(0x1a7)]))_0x104753[_0x399547(0x18c)](stablecoins[_0x399547(0x12e)][_0x399547(0x1a7)]);if(config[_0x399547(0x243)][_0x399547(0x2ad)](_0x399547(0x253))){if(!_0x104753[_0x399547(0x1f6)](_0x399547(0x1eb)+config[_0x399547(0x11f)]))_0x104753['push']('BNB/'+config[_0x399547(0x11f)]);}loadCoins(_0x104753),_0x104753=validateSymbols(_0x104753);const _0x3d337f=async _0x1c9e1f=>{const _0xa450b9=_0x399547;let _0x3f7579;try{const _0x184066=await getTickers(_0x1c9e1f);Object[_0xa450b9(0x22c)](_0x184066)[_0xa450b9(0x1ed)](_0x4a532c=>{const _0x50fc0a=_0xa450b9;_0x3f7579=_0x4a532c[0x1][_0x50fc0a(0x1a7)],global['ticker'][noslash(_0x3f7579)]=_0x4a532c[0x1][_0x50fc0a(0x1c6)],global[_0x50fc0a(0x22f)][_0x3f7579]=_0x4a532c[0x1]['percentage'];});}catch(_0x197433){await handleError(_0x197433,_0xa450b9(0x226),_0x3f7579);}},_0x134c98=async _0x2ca316=>{const _0x4cb60a=_0x399547;while(initCycle==_0x537f4c){if(!botPaused)try{const _0x159595=await exchange[_0x4cb60a(0x11a)](_0x2ca316);global['ticker'][noslash(_0x159595[0x0][_0x4cb60a(0x1a7)])]=_0x159595[0x0][_0x4cb60a(0x16f)],await sleep(0x3e8);}catch(_0x3109db){if(!exchangeStopped)await handleError(_0x3109db,'watchTrades()',_0x2ca316);}else await sleep(0x64);}},_0x130f0d=async _0xc3604a=>{const _0xc7b2b2=_0x399547;while(initCycle==_0x537f4c){if(!botPaused){let _0x15132e;try{await sleep(0x3c*0x3e8);const _0x51ba24=await getTickers(_0xc3604a);Object[_0xc7b2b2(0x22c)](_0x51ba24)[_0xc7b2b2(0x1ed)](_0x49405c=>{const _0x1cb5fb=_0xc7b2b2;_0x15132e=_0x49405c[0x1][_0x1cb5fb(0x1a7)],global[_0x1cb5fb(0x22f)][_0x15132e]=_0x49405c[0x1][_0x1cb5fb(0x1e2)];});}catch(_0x53a5ea){if(!exchangeStopped)await handleError(_0x53a5ea,'fetchTickers()',_0x15132e);}}else await sleep(0x64);}},_0x3c4947=async _0x558e98=>{const _0x5f3a76=_0x399547;while(initCycle==_0x537f4c){if(!botPaused)try{const _0x33f188=await exchange[_0x5f3a76(0x241)](_0x558e98);initCycle==_0x537f4c&&_0x33f188[_0x5f3a76(0x1ed)](_0x2880f6=>{updateNumberCoinsCcxt(_0x2880f6);});}catch(_0x1a035e){if(!exchangeStopped)await handleError(_0x1a035e,_0x5f3a76(0x2a8));}else await sleep(0x64);}};_0x3d337f(_0x104753),_0x130f0d(_0x104753),_0x104753[_0x399547(0x1ed)](_0x1b25ad=>{_0x134c98(_0x1b25ad),_0x3c4947(_0x1b25ad);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x20d5e4){const _0x581cfb=_0x3239f5;let _0x57d8da={};try{if(config[_0x581cfb(0x243)]!=_0x581cfb(0x229))_0x57d8da=await exchange['fetchTickers'](_0x20d5e4);else for(const _0x9c939b of _0x20d5e4){const _0x26b047=await exchange[_0x581cfb(0x1a5)](_0x9c939b);_0x57d8da[_0x9c939b]=_0x26b047;}return _0x57d8da;}catch(_0x232385){throw _0x232385;}}async function watchTransactions(){const _0x15c008=_0x3239f5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x50d5b4=await getCoins(),[_0x4b25d5,_0xd848b1]=_0x50d5b4;let _0x544a1f=[];currentCoins[_0x15c008(0x1ed)](_0x3fc204=>{const _0x37b092=_0x15c008,_0x2f15a9=_0x4b25d5[_0x37b092(0x1b0)](_0x9da02d=>_0x9da02d['coin']==_0x3fc204[_0x37b092(0x2ac)]);if(_0x2f15a9){if(_0x3fc204[_0x37b092(0x18d)]!=_0x2f15a9[_0x37b092(0x18d)]){let _0x4a7460;if(_0x3fc204[_0x37b092(0x2ac)]!=config[_0x37b092(0x11f)]){const _0x58f5bb=global[_0x37b092(0x25d)][noslash(_0x3fc204[_0x37b092(0x1a7)])];_0x4a7460=_0x3fc204[_0x37b092(0x205)]?0x1/_0x58f5bb:_0x58f5bb;}else _0x4a7460=0x1;_0x544a1f[_0x37b092(0x18c)]({'coin':_0x3fc204['coin'],'symbol':_0x3fc204[_0x37b092(0x1a7)],'price':_0x4a7460,'number':Number(formatResult(_0x2f15a9[_0x37b092(0x18d)]-_0x3fc204['number'],0x8)),'basecoinvalue':_0x4a7460*(_0x2f15a9[_0x37b092(0x18d)]-_0x3fc204[_0x37b092(0x18d)])});}}});if(_0x544a1f[_0x15c008(0x2a2)]==0x1&&!blockTransactionDetection){if(config[_0x15c008(0x256)]){logger['debug'](_0x15c008(0x1d5)+_0x544a1f[0x0][_0x15c008(0x139)]+_0x15c008(0x13f)+lastFees['highest']);if(lastFees[_0x15c008(0x1bf)]==0x0||Math[_0x15c008(0x204)](_0x544a1f[0x0][_0x15c008(0x139)])>lastFees['highest']){delete _0x544a1f[0x0][_0x15c008(0x1a7)],delete _0x544a1f[0x0][_0x15c008(0x139)];let _0xe3ad89=[],_0x4951fe=[...config[_0x15c008(0x269)]]||[],_0x37b7dc=config[_0x15c008(0x269)];_0x4951fe[_0x15c008(0x1a9)]((_0x4ea753,_0x550fad)=>_0x4ea753[_0x15c008(0x1e8)]>_0x550fad[_0x15c008(0x1e8)]?-0x1:_0x550fad['date']>_0x4ea753['date']?0x1:0x0);const _0x99164c=getDate();if(_0x4951fe[0x0]){const _0x54cb3a=fns[_0x15c008(0x261)](_0x4951fe[0x0][_0x15c008(0x1e8)],_0x15c008(0x2b2),new Date()),_0x435fd4=fns[_0x15c008(0x261)](_0x99164c,_0x15c008(0x2b2),new Date());if(fns[_0x15c008(0x20c)](_0x54cb3a,_0x435fd4)){_0xe3ad89=_0x4951fe[0x0]['changes'];const _0x515c68=_0xe3ad89[_0x15c008(0x1b0)](_0xf1a37=>_0xf1a37['coin']==_0x544a1f[0x0][_0x15c008(0x2ac)]);_0x515c68?(_0x515c68['number']+=_0x544a1f[0x0]['number'],_0x515c68[_0x15c008(0x18d)]==0x0&&(_0xe3ad89=_0xe3ad89[_0x15c008(0x26c)](_0x44cc9f=>{const _0x43e167=_0x15c008;return _0x44cc9f[_0x43e167(0x2ac)]!=_0x544a1f[0x0][_0x43e167(0x2ac)];}))):_0xe3ad89[_0x15c008(0x18c)](_0x544a1f[0x0]);const _0x41d6d6=_0x37b7dc[_0x15c008(0x1b0)](_0xa6d850=>_0xa6d850[_0x15c008(0x1e8)]==_0x99164c);_0x41d6d6['changes']=_0xe3ad89;}else _0x37b7dc['push']({'date':_0x99164c,'changes':[_0x544a1f[0x0]]});}const _0x46261e=_0x37b7dc[_0x15c008(0x1b0)](_0x131c6f=>_0x131c6f['date']==_0x99164c);if(_0x46261e){let _0x3cea45=!![];_0x46261e[_0x15c008(0x22d)]['forEach'](_0x9f9820=>{const _0x519f7e=_0x15c008;if(_0x9f9820[_0x519f7e(0x18d)]!=0x0)_0x3cea45=![];}),_0x3cea45&&(_0x37b7dc=_0x37b7dc['filter'](_0x22b955=>{const _0x3a7f5a=_0x15c008;return _0x22b955[_0x3a7f5a(0x1e8)]!=_0x99164c;}));}let _0x40f3a5=dbConfig[_0x15c008(0x246)](_0x15c008(0x249))[_0x15c008(0x1b0)]({'botID':botID})[_0x15c008(0x1c9)]();_0x40f3a5&&(dbConfig[_0x15c008(0x246)](_0x15c008(0x249))[_0x15c008(0x1b0)]({'botID':botID})[_0x15c008(0x218)]({'liquidity':_0x37b7dc})[_0x15c008(0x14c)](),config[_0x15c008(0x269)]=_0x37b7dc),logHistory('success',_0x15c008(0x171)+Math[_0x15c008(0x204)](_0x544a1f[0x0][_0x15c008(0x18d)])+'\x20'+_0x544a1f[0x0][_0x15c008(0x2ac)]+'\x20'+(_0x544a1f[0x0][_0x15c008(0x18d)]>0x0?_0x15c008(0x29d):_0x15c008(0x1b2))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x15c008(0x1c2),emittedConfiguration());}else logger[_0x15c008(0x2b3)](_0x15c008(0x239)+Math['abs'](_0x544a1f[0x0][_0x15c008(0x18d)])+'\x20'+_0x544a1f[0x0][_0x15c008(0x2ac)]+'\x20'+(_0x544a1f[0x0][_0x15c008(0x18d)]>0x0?_0x15c008(0x29d):'removed'));transactionDetected=!![];}else logger[_0x15c008(0x2b3)](_0x15c008(0x171)+Math['abs'](_0x544a1f[0x0]['number'])+'\x20'+_0x544a1f[0x0][_0x15c008(0x2ac)]+'\x20'+(_0x544a1f[0x0][_0x15c008(0x18d)]>0x0?_0x15c008(0x29d):_0x15c008(0x1b2))+_0x15c008(0x140));}currentCoins=_0x4b25d5,currentCoinsAll=_0xd848b1,await sleep(watchTransactionsInterval);}catch(_0xd4c03a){if(!exchangeStopped)await handleError(_0xd4c03a,_0x15c008(0x2a0));}else await sleep(0x64);}}async function loadSymbols(){const _0x377b1d=_0x3239f5;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x377b1d(0x22c)](markets)[_0x377b1d(0x1ed)](_0x3aaec8=>{const _0xe8586e=_0x377b1d;_0x3aaec8[0x1][_0xe8586e(0x2b6)]&&_0x3aaec8[0x1]['spot']&&allSymbols[_0xe8586e(0x18c)](_0x3aaec8[0x0]);});}catch(_0x165f4e){throw _0x165f4e;}}function validateSymbols(_0x238ef3){const _0x42c05e=_0x3239f5;let _0x452db1=[];return _0x238ef3[_0x42c05e(0x1ed)](_0x3a4780=>{const _0x1a6fdf=_0x42c05e;!allSymbols[_0x1a6fdf(0x1f6)](_0x3a4780)?logHistory(_0x1a6fdf(0x122),_0x1a6fdf(0x282)+_0x3a4780+_0x1a6fdf(0x170)):_0x452db1['push'](_0x3a4780);}),_0x452db1;}async function initclient(){const _0x5ae6f2=_0x3239f5;proxyEmit(_0x5ae6f2(0x1c2),emittedConfiguration()),proxyEmit(_0x5ae6f2(0x160),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5ae6f2(0x1f5),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x19260d=getNormalizedPerformance();emitPerformance(_0x19260d),getStartingBalances(_0x19260d);}async function toggleBotMode(){const _0x3e9a2e=_0x3239f5;let _0x4b45f2=dbConfig[_0x3e9a2e(0x246)](_0x3e9a2e(0x249))[_0x3e9a2e(0x1b0)]({'botID':botID})[_0x3e9a2e(0x1c9)]();if(_0x4b45f2){const _0x1e69a4=!_0x4b45f2['headless'];dbConfig[_0x3e9a2e(0x246)](_0x3e9a2e(0x249))[_0x3e9a2e(0x1b0)]({'botID':botID})[_0x3e9a2e(0x218)]({'headless':_0x1e69a4})[_0x3e9a2e(0x14c)](),config[_0x3e9a2e(0x2ae)]=_0x1e69a4,proxyEmit(_0x3e9a2e(0x1c2),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1401a7=_0x3239f5;process[_0x1401a7(0x1e6)]({'updatebotmanager':!![]},_0x3db6db=>{}),logger[_0x1401a7(0x2b3)](_0x1401a7(0x2af)+config[_0x1401a7(0x2ae)]);}async function loadCoins(_0x56a844){const _0xb67e8e=_0x3239f5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x41135e,_0x9933b5=0x0,_0x5c9609=0x0;_0x56a844[_0xb67e8e(0x1ed)](_0x506dc8=>{const _0x16b1c5=_0xb67e8e;loading['remainingSymbols'][_0x16b1c5(0x18c)](_0x506dc8);}),loadingCanceled=![];let _0x353f0d=![];while(_0x41135e!=_0x56a844[_0xb67e8e(0x2a2)]+maxLoadingProgress){_0x41135e=loadingProgress,_0x56a844[_0xb67e8e(0x1ed)](_0x354356=>{const _0x3604dc=_0xb67e8e;if(global['ticker'][noslash(_0x354356)]){loading[_0x3604dc(0x24c)]=loading['remainingSymbols'][_0x3604dc(0x26c)](_0x13ab70=>_0x13ab70!=_0x354356);if(!watchedSymbols[_0x3604dc(0x1f6)](_0x354356))watchedSymbols['push'](_0x354356);_0x41135e++;}}),loading[_0xb67e8e(0x1f2)]=Math[_0xb67e8e(0x2b7)](_0x41135e/(_0x56a844['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x5c9609>0x1e*0x5&&(loading[_0xb67e8e(0x271)]=!![],emitLoadingProgress()),_0x5c9609>0x78*0x5&&!_0x353f0d&&(_0x353f0d=!![],logHistory(_0xb67e8e(0x122),_0xb67e8e(0x2b5)+loading[_0xb67e8e(0x24c)][_0xb67e8e(0x189)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0xb67e8e(0x122),_0xb67e8e(0x236)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x503d75=_0xb67e8e;process[_0x503d75(0x1e6)]({'stop':_0x503d75(0x21b)},_0x4fbf61=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0xb67e8e(0x23b)]=!![],emitLoadingProgress();break;}else _0x9933b5!=loading[_0xb67e8e(0x1f2)]&&(_0x9933b5=loading[_0xb67e8e(0x1f2)],emitLoadingProgress()),_0x5c9609++,await sleep(0xc8);}_0x41135e==_0x56a844[_0xb67e8e(0x2a2)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xb67e8e(0x1e6)]({'status':_0xb67e8e(0x138),'live':_0xb67e8e(0x149)},_0x122cd0=>{}),_0x353f0d&&logHistory(_0xb67e8e(0x24b),_0xb67e8e(0x225)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x18371c=_0x3239f5;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x18371c(0x161)});}function emitLoadingProgress(){const _0x289ca=_0x3239f5;proxyEmit(_0x289ca(0x297),loading);}async function getFiat(){const _0x4859d4=_0x3239f5;let _0x37e914=global[_0x4859d4(0x25d)][stablecoins[_0x4859d4(0x16e)][_0x4859d4(0x2ac)]],_0x372d18=global['ticker'][stablecoins['usd']['coin']];return{'eur':Number(_0x37e914),'usd':Number(_0x372d18)};}function capitalize(_0xb8eeee){const _0x2bd429=_0x3239f5;return _0xb8eeee[_0x2bd429(0x1ad)](0x0,0x1)[_0x2bd429(0x118)]()+_0xb8eeee['substring'](0x1);}function supportedExchanges(){const _0x51ed10=_0x3239f5,_0x592437=['ws',_0x51ed10(0x1b8),_0x51ed10(0x1a5),_0x51ed10(0x11a),'watchOrders',_0x51ed10(0x1de),_0x51ed10(0x1fc),'fetchOpenOrders',_0x51ed10(0x124),_0x51ed10(0x11d)];let _0xb74a3a=[],_0x2b4d28=[],_0x5bcf7d=ccxt[_0x51ed10(0x1c1)][_0x51ed10(0x160)];_0x5bcf7d[_0x51ed10(0x1ed)](_0xe42e46=>{const _0x2bc788=_0x51ed10;try{const _0x157505=new ccxt[(_0x2bc788(0x1c1))][_0xe42e46]();_0x2b4d28[_0x2bc788(0x18c)](_0x157505);}catch(_0x48a8e0){}}),_0x2b4d28[_0x51ed10(0x1ed)](_0x54ba48=>{const _0xef088d=_0x51ed10;let _0x38e7fc=0x0;_0x592437[_0xef088d(0x1ed)](_0x53f4b1=>{const _0x42980f=_0xef088d;_0x53f4b1 in _0x54ba48['has']&&_0x54ba48[_0x42980f(0x1ca)][_0x53f4b1]&&_0x38e7fc++;}),_0x38e7fc==_0x592437[_0xef088d(0x2a2)]&&_0xb74a3a[_0xef088d(0x18c)](capitalize(_0x54ba48['id']));});let _0x2b13fe=[];return _0x5bcf7d[_0x51ed10(0x1ed)](_0x220348=>{const _0x5ba980=_0x51ed10;_0x220348=capitalize(_0x220348);if(!_0xb74a3a[_0x5ba980(0x1f6)](_0x220348))_0x2b13fe[_0x5ba980(0x18c)](_0x220348);}),_0xb74a3a;}function setStartDatePerformance(){const _0x26ca5b=_0x3239f5;if(config&&config[_0x26ca5b(0x269)][0x0]['changes'][_0x26ca5b(0x2a2)]!=0x0){const _0x3d12a7=config['liquidity'][0x0][_0x26ca5b(0x22d)];dbPerformance[_0x26ca5b(0x246)](_0x26ca5b(0x1cd))['find']({'date':config['startdate']})[_0x26ca5b(0x218)]({'coins':_0x3d12a7})[_0x26ca5b(0x14c)]();}}async function recreateCoinResults(){const _0x57b753=_0x3239f5;let _0x5364d5,_0x509204=[];try{const _0x11a56d=fns[_0x57b753(0x16c)](fns[_0x57b753(0x157)](config['startdate'][_0x57b753(0x22e)](/\//g,'-')),_0x57b753(0x1a8));for(const _0x2cea5a of currentCoins){if(_0x2cea5a[_0x57b753(0x2ac)]!=config[_0x57b753(0x11f)]){let _0x4f350c=0x0,_0x2f3786,_0x5d2e10;_0x5364d5=await getAllEventOrders(_0x2cea5a[_0x57b753(0x1a7)]);if(_0x5364d5['length']>0x0)_0x5364d5['forEach'](_0x43d7a6=>{const _0x4e92c5=_0x57b753,_0x40587e=_0x2cea5a[_0x4e92c5(0x1a7)]['includes'](config[_0x4e92c5(0x11f)]+'/');_0x509204[_0x4e92c5(0x18c)]({'datetime':_0x43d7a6[_0x4e92c5(0x230)],'coin':_0x2cea5a[_0x4e92c5(0x2ac)],'symbol':_0x2cea5a[_0x4e92c5(0x1a7)],'side':_0x43d7a6[_0x4e92c5(0x178)],'reverse':_0x40587e,'amount':formatResult(_0x43d7a6[_0x4e92c5(0x1bd)],0x8),'filled':formatResult(_0x43d7a6[_0x4e92c5(0x1bd)],0x8),'price':formatResult(_0x43d7a6['price'],0x8)}),_0x4f350c=_0x43d7a6['side']=='buy'?_0x4f350c+_0x43d7a6[_0x4e92c5(0x1bd)]:_0x4f350c-_0x43d7a6[_0x4e92c5(0x1bd)];if(!_0x5d2e10)_0x5d2e10=_0x43d7a6[_0x4e92c5(0x16f)];});_0x2f3786=_0x2cea5a[_0x57b753(0x18d)]-_0x4f350c;let _0x4d8210;config['liquidity'][_0x57b753(0x1ed)](_0x33e253=>{const _0x4a5394=_0x57b753;!_0x4d8210&&(_0x4d8210=_0x33e253['changes'][_0x4a5394(0x1b0)](_0xb0f6d5=>_0xb0f6d5[_0x4a5394(0x2ac)]==_0x2cea5a[_0x4a5394(0x2ac)]),_0x4d8210&&(_0x2f3786=_0x4d8210[_0x4a5394(0x18d)],_0x5d2e10=_0x4d8210[_0x4a5394(0x16f)]));});let _0x503551=dbCoinResults[_0x57b753(0x246)](_0x57b753(0x1ce))[_0x57b753(0x1b0)]({'coin':_0x2cea5a['coin']})[_0x57b753(0x1c9)]();_0x503551={'coin':_0x2cea5a[_0x57b753(0x2ac)],'number':_0x2f3786,'breakeven':_0x5d2e10,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x57b753(0x246)](_0x57b753(0x1ce))[_0x57b753(0x1b0)]({'coin':_0x2cea5a[_0x57b753(0x2ac)]})[_0x57b753(0x218)](_0x503551)['write']();}}_0x509204[_0x57b753(0x1a9)]((_0x358584,_0x3c0707)=>_0x358584[_0x57b753(0x230)]>_0x3c0707['datetime']?0x1:_0x3c0707[_0x57b753(0x230)]>_0x358584[_0x57b753(0x230)]?-0x1:0x0);let _0x26bd2a=0x0;for(let _0x11528e of _0x509204){await updateCoinResults(_0x11528e,!![]);}}catch(_0x440f9a){await handleError(_0x440f9a,_0x57b753(0x215));}}async function getAllEventOrders(_0x5d3140){const _0x1fe2f9=_0x3239f5;let _0x507e8e=[],_0x5bede0=dbLogs[_0x1fe2f9(0x246)](_0x1fe2f9(0x25a))[_0x1fe2f9(0x26c)](_0x104522=>{const _0x56f7e6=_0x1fe2f9,_0x197997=_0x104522[_0x56f7e6(0x213)][_0x56f7e6(0x23a)]();return _0x197997[_0x56f7e6(0x1f6)](_0x5d3140[_0x56f7e6(0x23a)]())&&(_0x197997[_0x56f7e6(0x1f6)]('market')&&_0x197997[_0x56f7e6(0x1f6)](_0x56f7e6(0x2b1))||_0x197997[_0x56f7e6(0x1f6)](_0x56f7e6(0x1bd))&&_0x197997[_0x56f7e6(0x1f6)](_0x56f7e6(0x2b1)));})[_0x1fe2f9(0x23e)](_0x1fe2f9(0x234))[_0x1fe2f9(0x1c9)]();return _0x5bede0[_0x1fe2f9(0x1ed)](_0x5761b5=>{const _0x12c21f=_0x1fe2f9,_0x53c3b8=_0x5761b5['event'][_0x12c21f(0x1f6)](_0x12c21f(0x23d))?_0x12c21f(0x23d):_0x12c21f(0x1d4),_0x26f92c=/#([0-9]|\.)+\s/i,_0x5a18b5=Number(_0x26f92c[_0x12c21f(0x24f)](_0x5761b5[_0x12c21f(0x213)])[0x0][_0x12c21f(0x295)](0x1)),_0x1395ab=/@([0-9]|\.)+$/i,_0x13e35d=Number(_0x1395ab[_0x12c21f(0x24f)](_0x5761b5[_0x12c21f(0x213)])[0x0][_0x12c21f(0x295)](0x1));_0x507e8e[_0x12c21f(0x18c)]({'datetime':_0x5761b5['time'],'coin':symbolToCoin(_0x5d3140),'symbol':_0x5d3140,'side':_0x53c3b8,'amount':_0x5a18b5,'filled':_0x5a18b5,'price':_0x13e35d});}),_0x507e8e;}async function getAllOrders(_0x41798f,_0x1cc7c6){const _0x43c2fa=_0x3239f5;let _0x2772c4=[];while(_0x1cc7c6<exchange[_0x43c2fa(0x217)]()){const _0x1d0903=0x1f4;try{const _0x434fb7=await exchange[_0x43c2fa(0x124)](_0x41798f,_0x1cc7c6,_0x1d0903);if(_0x434fb7['length'])_0x1cc7c6=_0x434fb7[_0x434fb7[_0x43c2fa(0x2a2)]-0x1]['timestamp']+0x1,_0x2772c4=_0x2772c4['concat'](_0x434fb7);else break;}catch(_0x14a1eb){await handleError(_0x14a1eb,'getAllOrders()',_0x41798f);}}return _0x2772c4;}async function validate24hChanges(){const _0x5f34f7=_0x3239f5;for(const _0x5acddd of currentCoins){if(_0x5acddd['coin']!=config[_0x5f34f7(0x11f)]){let _0x889af9;_0x5acddd[_0x5f34f7(0x205)]?_0x889af9=formatResult((0x1/(global[_0x5f34f7(0x22f)][noslash(_0x5acddd['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x889af9=global['change'][noslash(_0x5acddd[_0x5f34f7(0x1a7)])],_0x889af9<config['change24h']&&(logHistory(_0x5f34f7(0x122),_0x5acddd[_0x5f34f7(0x2ac)]+_0x5f34f7(0x15f)+_0x889af9+'%'),logHistory('error',_0x5f34f7(0x264)),logHistory(_0x5f34f7(0x122),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4001ee,_0x348d3a){const _0x4071b1=_0x3239f5;if(!_0x4001ee)return!![];const _0x836433=_0x348d3a[_0x4071b1(0x195)]('.'),_0x341bf6=_0x4001ee['split']('.');for(var _0x2fd3b4=0x0;_0x2fd3b4<_0x341bf6[_0x4071b1(0x2a2)];_0x2fd3b4++){const _0xf77f43=~~_0x341bf6[_0x2fd3b4],_0x30d25a=~~_0x836433[_0x2fd3b4];if(_0xf77f43<_0x30d25a)return!![];if(_0xf77f43>_0x30d25a)return![];}return![];}async function oneTimeMigration(){const _0x33dc90=_0x3239f5;let _0x463d2b=dbLogs[_0x33dc90(0x246)](_0x33dc90(0x185))[_0x33dc90(0x1c9)]();if(isOlderVersion(_0x463d2b,_0x33dc90(0x267))){let _0x54d98a=[];const _0x418867=dbLogs[_0x33dc90(0x246)](_0x33dc90(0x25a))[_0x33dc90(0x1c9)]();_0x418867['forEach'](_0x3f718a=>{const _0x2bcdab=_0x33dc90;_0x54d98a[_0x2bcdab(0x18c)]({'time':_0x3f718a['time'],'type':_0x3f718a[_0x2bcdab(0x1c8)],'event':_0x3f718a[_0x2bcdab(0x213)]});}),dbLogs['get']('logs')[_0x33dc90(0x218)](_0x54d98a)['write']();}let _0x4e8b0f=dbConfig['get'](_0x33dc90(0x185))[_0x33dc90(0x1c9)]();if(isOlderVersion(_0x4e8b0f,_0x33dc90(0x267))){let _0x37d8bd=dbConfig[_0x33dc90(0x246)](_0x33dc90(0x249))['find']({'botID':botID})[_0x33dc90(0x1c9)]();if(_0x37d8bd){let _0x1c80a3=[];_0x37d8bd[_0x33dc90(0x153)][_0x33dc90(0x1ed)](_0x1dd06b=>{const _0x45b384=_0x33dc90;_0x1c80a3[_0x45b384(0x18c)]({'coin':_0x1dd06b[_0x45b384(0x2ac)],'number':_0x1dd06b['startnumber'],'price':_0x1dd06b['startprice']}),delete _0x1dd06b[_0x45b384(0x237)],delete _0x1dd06b['startprice'];});if(_0x1c80a3['length']!==0x0)fs[_0x33dc90(0x11e)](configbackuppath+(_0x33dc90(0x11b)+botID+'.json'),JSON[_0x33dc90(0x123)](_0x1c80a3,null,0x4),function(_0x554445){if(_0x554445){}});const _0x342581=(_0x223a90,_0x2dfbbb)=>{const _0x159354=_0x33dc90;let _0x9e36a0=[];_0x2dfbbb[_0x159354(0x1ed)](_0x42a233=>{const _0x2a5d0b=_0x159354,_0x3778f8=_0x223a90['find'](_0x3f00b6=>_0x3f00b6['coin']==_0x42a233[_0x2a5d0b(0x2ac)]);if(!_0x3778f8)_0x9e36a0[_0x2a5d0b(0x18c)](_0x42a233);});let _0x4ac7b3=[];return _0x223a90[_0x159354(0x1ed)](_0x482e25=>{const _0x810faa=_0x159354,_0x273091=_0x2dfbbb['find'](_0x25e7b3=>_0x25e7b3[_0x810faa(0x2ac)]==_0x482e25[_0x810faa(0x2ac)]);if(!_0x273091||_0x273091[_0x810faa(0x18d)]==0x0&&_0x482e25[_0x810faa(0x18d)]!=0x0)_0x4ac7b3[_0x810faa(0x18c)](_0x482e25);}),{'missingDay1':_0x9e36a0,'notInDay2':_0x4ac7b3};},_0x34177c=dbPerformance[_0x33dc90(0x246)](_0x33dc90(0x1cd))[_0x33dc90(0x199)]()['value']();if(_0x34177c[_0x33dc90(0x2a2)]>0x1){const {missingDay1:_0xa797f,notInDay2:_0x8506d9}=_0x342581(_0x1c80a3,_0x34177c[0x1]['coins']);_0x1c80a3=[..._0x1c80a3,..._0xa797f],_0x8506d9[_0x33dc90(0x1ed)](_0x2c3416=>{const _0x30d608=_0x33dc90;let _0x1dd7d5=_0x1c80a3['findIndex'](_0x368e3e=>_0x368e3e[_0x30d608(0x2ac)]==_0x2c3416[_0x30d608(0x2ac)]);_0x1dd7d5!=-0x1&&_0x1c80a3['splice'](_0x1dd7d5,0x1);});}_0x1c80a3[_0x33dc90(0x1a9)]((_0x5b714c,_0x43b36d)=>_0x5b714c[_0x33dc90(0x2ac)]>_0x43b36d[_0x33dc90(0x2ac)]?0x1:_0x43b36d[_0x33dc90(0x2ac)]>_0x5b714c[_0x33dc90(0x2ac)]?-0x1:0x0);let _0x2cb016=[{'date':_0x37d8bd[_0x33dc90(0x1f0)],'changes':_0x1c80a3}];_0x34177c[_0x33dc90(0x2a2)]>0x2&&_0x34177c[_0x33dc90(0x1ed)]((_0x463a82,_0xd053d6)=>{const _0x98802b=_0x33dc90;if(_0xd053d6>0x0&&_0xd053d6<_0x34177c[_0x98802b(0x2a2)]-0x1){const {missingDay1:_0x205f53,notInDay2:_0x4e5cd9}=_0x342581(_0x34177c[_0xd053d6][_0x98802b(0x1ce)],_0x34177c[_0xd053d6+0x1][_0x98802b(0x1ce)]);_0x1c80a3=[],(_0x205f53[_0x98802b(0x2a2)]!=0x0||_0x4e5cd9[_0x98802b(0x2a2)]!=0x0)&&(_0x205f53[_0x98802b(0x2a2)]!=0x0&&_0x1c80a3[_0x98802b(0x18c)](..._0x205f53),_0x4e5cd9[_0x98802b(0x2a2)]!=0x0&&(_0x4e5cd9['forEach'](_0xe08bee=>{const _0x4e7997=_0x98802b;_0xe08bee[_0x4e7997(0x18d)]=-_0xe08bee[_0x4e7997(0x18d)];}),_0x1c80a3[_0x98802b(0x18c)](..._0x4e5cd9)),_0x1c80a3[_0x98802b(0x1a9)]((_0x159320,_0x3be6a1)=>_0x159320[_0x98802b(0x2ac)]>_0x3be6a1['coin']?0x1:_0x3be6a1[_0x98802b(0x2ac)]>_0x159320[_0x98802b(0x2ac)]?-0x1:0x0),_0x2cb016['push']({'date':_0x34177c[_0xd053d6+0x1][_0x98802b(0x1e8)],'changes':_0x1c80a3}));}}),dbConfig[_0x33dc90(0x246)]('bot')[_0x33dc90(0x1b0)]({'botID':botID})[_0x33dc90(0x218)]({..._0x37d8bd,'liquidity':_0x2cb016})[_0x33dc90(0x14c)]();}}if(isOlderVersion(_0x4e8b0f,_0x33dc90(0x12c))){let _0x2a8c92=dbConfig[_0x33dc90(0x246)](_0x33dc90(0x249))['find']({'botID':botID})[_0x33dc90(0x1c9)]();if(_0x2a8c92){const _0x1d6565=_0x2a8c92[_0x33dc90(0x243)],_0x5c94b5=_0x1d6565?capitalize(_0x1d6565):_0x33dc90(0x253);dbConfig[_0x33dc90(0x246)]('bot')[_0x33dc90(0x1b0)]({'botID':botID})[_0x33dc90(0x218)]({'exchange':_0x5c94b5})[_0x33dc90(0x14c)]();}}let _0x5c68cf=dbPerformance['get']('version')[_0x33dc90(0x1c9)]();isOlderVersion(_0x5c68cf,_0x33dc90(0x267))&&setStartDatePerformance();let _0x1d38f5=dbCoinResults['get'](_0x33dc90(0x185))[_0x33dc90(0x1c9)]();if(isOlderVersion(_0x1d38f5,_0x33dc90(0x1b7))){let _0x257e78=dbCoinResults[_0x33dc90(0x246)](_0x33dc90(0x1ce))[_0x33dc90(0x1c9)]();if(_0x257e78[_0x33dc90(0x2a2)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x8f71aa=_0x3239f5;dbConfig[_0x8f71aa(0x1c3)]('version',serverversion)[_0x8f71aa(0x14c)](),dbPerformance['set'](_0x8f71aa(0x185),serverversion)[_0x8f71aa(0x14c)](),dbLogs[_0x8f71aa(0x1c3)]('version',serverversion)[_0x8f71aa(0x14c)](),dbCoinResults[_0x8f71aa(0x1c3)](_0x8f71aa(0x185),serverversion)[_0x8f71aa(0x14c)]();}function getConfiguration(_0x3ba41d){const _0xbdd07e=_0x3239f5;let _0xf0576e=dbConfig[_0xbdd07e(0x246)]('bot')[_0xbdd07e(0x1b0)]({'botID':_0x3ba41d})[_0xbdd07e(0x1c9)]();if(_0xf0576e){let _0x592531=![];typeof _0xf0576e['threshold']==_0xbdd07e(0x203)&&(_0xf0576e={..._0xf0576e,'threshold':Number(_0xf0576e[_0xbdd07e(0x14f)])},_0x592531=!![]),_0xf0576e[_0xbdd07e(0x150)]==undefined&&(_0xf0576e={..._0xf0576e,'change24h':-0x14},_0x592531=!![]),_0xf0576e[_0xbdd07e(0x18f)]==undefined&&(_0xf0576e={..._0xf0576e,'fiat':_0xbdd07e(0x252)},_0x592531=!![]),_0xf0576e[_0xbdd07e(0x206)]==undefined&&(_0xf0576e={..._0xf0576e,'onepagemode':settings[_0xbdd07e(0x206)]},_0x592531=!![]),_0xf0576e['colorscheme']==undefined&&(_0xf0576e={..._0xf0576e,'colorscheme':_0xbdd07e(0x2b0)},_0x592531=!![]),_0xf0576e[_0xbdd07e(0x256)]==undefined&&(_0xf0576e={..._0xf0576e,'autoliquidity':!![]},_0x592531=!![]),_0x592531&&(_0xf0576e={'botID':_0xf0576e['botID'],'exchange':_0xf0576e[_0xbdd07e(0x243)],'apiKey':_0xf0576e[_0xbdd07e(0x1ae)],'apiSecret':_0xf0576e[_0xbdd07e(0x26f)],'apiPassword':_0xf0576e[_0xbdd07e(0x1bb)],'basecoin':_0xf0576e[_0xbdd07e(0x11f)],'botname':_0xf0576e['botname'],'showname':_0xf0576e[_0xbdd07e(0x2a3)],'threshold':_0xf0576e[_0xbdd07e(0x14f)],'ordertype':_0xf0576e['ordertype'],'timeout':_0xf0576e[_0xbdd07e(0x271)],'fiat':_0xf0576e[_0xbdd07e(0x18f)],'startdate':_0xf0576e[_0xbdd07e(0x1f0)],'recreate':_0xf0576e[_0xbdd07e(0x173)],'timeshift':_0xf0576e[_0xbdd07e(0x1ba)],'onepagemode':_0xf0576e[_0xbdd07e(0x206)],'headless':_0xf0576e['headless'],'cooldown':_0xf0576e[_0xbdd07e(0x220)],'change24h':_0xf0576e[_0xbdd07e(0x150)],'emojibuy':_0xf0576e[_0xbdd07e(0x26a)],'emojisell':_0xf0576e['emojisell'],'colorscheme':_0xf0576e[_0xbdd07e(0x17b)],'portfolio':_0xf0576e[_0xbdd07e(0x153)],'autoliquidity':_0xf0576e[_0xbdd07e(0x256)],'liquidity':_0xf0576e['liquidity'],'openOrders':_0xf0576e['openOrders']},dbConfig['get']('bot')[_0xbdd07e(0x23c)]()[_0xbdd07e(0x14c)](),dbConfig[_0xbdd07e(0x246)](_0xbdd07e(0x249))['push'](_0xf0576e)[_0xbdd07e(0x14c)]());}else _0xf0576e={'botID':_0x3ba41d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3ba41d,'showname':![],'threshold':0x3,'ordertype':_0xbdd07e(0x158),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0xbdd07e(0x1ba)],'onepagemode':settings[_0xbdd07e(0x206)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xbdd07e(0x2b0),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xf0576e;}function emittedConfiguration(){const _0x16fee8=_0x3239f5;let _0x2e6ae4;if(config[_0x16fee8(0x1ae)]=='')_0x2e6ae4={...config,'configstate':_0x16fee8(0x280)};else config['apiKey']==_0x16fee8(0x289)?_0x2e6ae4={...config,'configstate':_0x16fee8(0x1d8)}:(_0x2e6ae4={...config,'apiKey':_0x16fee8(0x12d),'apiSecret':_0x16fee8(0x12d)},config['apiPassword']&&(_0x2e6ae4[_0x16fee8(0x1bb)]=_0x16fee8(0x12d)));return _0x2e6ae4;}function getSettings(){const _0x53675d=_0x3239f5;return dbSettings[_0x53675d(0x246)](_0x53675d(0x2a5))['value']();}function getSecure(){const _0x27961f=_0x3239f5;return dbSecure[_0x27961f(0x246)](_0x27961f(0x1b9))[_0x27961f(0x1c9)]()||{};}function updateTimeshift(_0x5845cd){const _0x3888cb=_0x3239f5;let _0x643f46=dbConfig['get'](_0x3888cb(0x249))[_0x3888cb(0x1b0)]({'botID':botID})['value']();_0x643f46&&dbConfig[_0x3888cb(0x246)](_0x3888cb(0x249))['find']({'botID':botID})[_0x3888cb(0x218)]({'timeshift':_0x5845cd})['write'](),config[_0x3888cb(0x1ba)]=_0x5845cd,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x3cef50){const _0x2628ef=_0x3239f5;let _0x212104=dbConfig[_0x2628ef(0x246)]('bot')[_0x2628ef(0x1b0)]({'botID':botID})['value']();_0x212104&&dbConfig[_0x2628ef(0x246)](_0x2628ef(0x249))[_0x2628ef(0x1b0)]({'botID':botID})[_0x2628ef(0x218)]({'onepagemode':_0x3cef50})[_0x2628ef(0x14c)](),config[_0x2628ef(0x206)]=_0x3cef50,proxyEmit(_0x2628ef(0x1c2),emittedConfiguration());}async function storeConfiguration(_0x569318){const _0x128132=_0x3239f5;logger['debug'](_0x128132(0x28d));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x128132(0x2b3)](_0x128132(0x1ff));let _0x3cc054=![],_0x1f7a69=![],_0x37dc62=[];_0x569318[_0x128132(0x153)][_0x128132(0x1ed)](_0x4f5fa8=>{const _0x42cc86=_0x128132;if(!_0x4f5fa8[_0x42cc86(0x23f)]&&_0x4f5fa8[_0x42cc86(0x2ac)]!=_0x569318[_0x42cc86(0x11f)])_0x37dc62['push'](_0x4f5fa8[_0x42cc86(0x1a7)]);}),_0x37dc62[_0x128132(0x1ed)](_0xd24519=>{const _0x1f52fd=_0x128132,_0x4f0348=currentCoins[_0x1f52fd(0x1b0)](_0x2259f8=>_0x2259f8['symbol']==_0xd24519);!_0x4f0348&&(_0x3cc054=!![]);}),currentCoins[_0x128132(0x1ed)](_0x49df60=>{const _0x14689b=_0x128132;if(_0x49df60[_0x14689b(0x2ac)]!=config[_0x14689b(0x11f)]){const _0x92d5ee=_0x37dc62[_0x14689b(0x1b0)](_0x48ae7e=>_0x48ae7e==_0x49df60[_0x14689b(0x1a7)]);!_0x92d5ee&&(_0x3cc054=!![]);}}),_0x569318[_0x128132(0x153)][_0x128132(0x1ed)](_0x2faed5=>{const _0x3d0cc3=_0x128132,_0x5a5aa8=config[_0x3d0cc3(0x153)]['find'](_0xe12517=>_0xe12517[_0x3d0cc3(0x2ac)]==_0x2faed5[_0x3d0cc3(0x2ac)]);if(_0x5a5aa8&&_0x2faed5[_0x3d0cc3(0x1ab)]!=_0x5a5aa8[_0x3d0cc3(0x1ab)])_0x1f7a69=!![];});let _0x10c94f=dbConfig[_0x128132(0x246)]('bot')[_0x128132(0x1b0)]({'botID':botID})[_0x128132(0x1c9)]();_0x569318={..._0x569318,'apiKey':crypt[_0x128132(0x221)](secure[_0x128132(0x268)],_0x569318[_0x128132(0x1ae)])[_0x128132(0x265)],'apiSecret':crypt[_0x128132(0x221)](secure[_0x128132(0x268)],_0x569318[_0x128132(0x26f)])[_0x128132(0x265)]};_0x569318[_0x128132(0x1bb)]&&(_0x569318[_0x128132(0x1bb)]=crypt[_0x128132(0x221)](secure[_0x128132(0x268)],_0x569318[_0x128132(0x1bb)])['message']);let _0x339ef6=![];if(_0x10c94f){_0x569318[_0x128132(0x1ae)]=='************'?_0x569318['apiKey']=config[_0x128132(0x1ae)]:_0x339ef6=!![];_0x569318[_0x128132(0x26f)]==_0x128132(0x12d)?_0x569318[_0x128132(0x26f)]=config['apiSecret']:_0x339ef6=!![];if(_0x569318['apiPassword']==_0x128132(0x12d))_0x569318[_0x128132(0x1bb)]=config[_0x128132(0x1bb)];else{if(_0x569318[_0x128132(0x1bb)])_0x339ef6=!![];}dbConfig[_0x128132(0x246)](_0x128132(0x249))[_0x128132(0x1b0)]({'botID':botID})[_0x128132(0x218)](_0x569318)[_0x128132(0x14c)]();}else dbConfig[_0x128132(0x246)]('bot')[_0x128132(0x18c)](_0x569318)[_0x128132(0x14c)](),_0x339ef6=!![],process[_0x128132(0x1e6)]({'status':'enabled','live':_0x128132(0x149)},_0x540e84=>{});process[_0x128132(0x1e6)]({'botname':_0x569318['botname']},_0x6c970c=>{}),config={..._0x569318},updateBotManager(),proxyEmit(_0x128132(0x16d)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x339ef6)await reset(!![]);else _0x3cc054||_0x1f7a69?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x128132(0x2b3)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x3bcb2c){const _0x38c9f3=_0x3239f5,_0x3e4ec1={...config,'headless':_0x3bcb2c[_0x38c9f3(0x2ae)]};let _0x2dccb7=dbConfig['get']('bot')[_0x38c9f3(0x1b0)]({'botID':botID})[_0x38c9f3(0x1c9)]();_0x2dccb7&&dbConfig[_0x38c9f3(0x246)](_0x38c9f3(0x249))[_0x38c9f3(0x1b0)]({'botID':botID})[_0x38c9f3(0x218)](_0x3e4ec1)[_0x38c9f3(0x14c)](),config={..._0x3e4ec1},updateBotManager(),proxyEmit(_0x38c9f3(0x1c2),emittedConfiguration());}async function storeFiat(_0x13f23a){const _0x107083=_0x3239f5,_0x216a19={...config,'fiat':_0x13f23a};let _0x193e14=dbConfig['get'](_0x107083(0x249))[_0x107083(0x1b0)]({'botID':botID})[_0x107083(0x1c9)]();_0x193e14&&dbConfig[_0x107083(0x246)](_0x107083(0x249))[_0x107083(0x1b0)]({'botID':botID})[_0x107083(0x218)](_0x216a19)['write'](),config={..._0x216a19},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1d2b8c=_0x3239f5;logger[_0x1d2b8c(0x133)](_0x1d2b8c(0x198));try{if(fs[_0x1d2b8c(0x227)](path['join'](configpath,_0x1d2b8c(0x191)+botID+_0x1d2b8c(0x120))))fs[_0x1d2b8c(0x245)](path[_0x1d2b8c(0x189)](configpath,'bot-'+botID+_0x1d2b8c(0x120)));if(fs[_0x1d2b8c(0x227)](path['join'](configpath,_0x1d2b8c(0x191)+botID+_0x1d2b8c(0x240))))fs[_0x1d2b8c(0x245)](path[_0x1d2b8c(0x189)](configpath,_0x1d2b8c(0x191)+botID+_0x1d2b8c(0x240)));if(fs['existsSync'](path[_0x1d2b8c(0x189)](configpath,'bot-'+botID+_0x1d2b8c(0x1df))))fs[_0x1d2b8c(0x245)](path[_0x1d2b8c(0x189)](configpath,'bot-'+botID+_0x1d2b8c(0x1df)));}catch(_0x3e788b){if(_0x3e788b)logger[_0x1d2b8c(0x133)](_0x1d2b8c(0x27e),_0x3e788b);}const _0x52feaa=getDate();let _0x519834=[];currentCoins[_0x1d2b8c(0x1ed)](_0x423aa2=>{const _0x380cd2=_0x1d2b8c;_0x519834[_0x380cd2(0x18c)]({'coin':_0x423aa2[_0x380cd2(0x2ac)],'number':_0x423aa2[_0x380cd2(0x18d)],'price':_0x423aa2[_0x380cd2(0x1c6)]});});let _0xbe94b9=dbConfig[_0x1d2b8c(0x246)]('bot')[_0x1d2b8c(0x1b0)]({'botID':botID})[_0x1d2b8c(0x1c9)]();_0xbe94b9&&(dbConfig[_0x1d2b8c(0x246)](_0x1d2b8c(0x249))[_0x1d2b8c(0x1b0)]({'botID':botID})[_0x1d2b8c(0x218)]({'liquidity':[{'date':_0x52feaa,'changes':_0x519834}]})[_0x1d2b8c(0x14c)](),config[_0x1d2b8c(0x269)]=[]),process[_0x1d2b8c(0x1e6)]({'stop':_0x1d2b8c(0x21b)},_0x3a8923=>{});}function noslash(_0x501fd1){const _0x54b8f6=_0x3239f5;return _0x501fd1[_0x54b8f6(0x22e)]('/','');}function updateHighestFee(_0x55ddf9){const _0x173b3b=_0x3239f5;if(_0x55ddf9[_0x173b3b(0x205)]){let _0x526c61={'filled':_0x55ddf9[_0x173b3b(0x1bd)]*_0x55ddf9[_0x173b3b(0x16f)],'amount':_0x55ddf9['filled']*_0x55ddf9[_0x173b3b(0x16f)],'side':_0x55ddf9['side']==_0x173b3b(0x23d)?'buy':_0x173b3b(0x23d),'price':0x1/_0x55ddf9[_0x173b3b(0x16f)]};_0x55ddf9={..._0x55ddf9,..._0x526c61};}const _0x2c26fd=defaultFee*_0x55ddf9[_0x173b3b(0x1bd)]*_0x55ddf9[_0x173b3b(0x16f)];lastFees[_0x173b3b(0x238)][_0x173b3b(0x2a2)]===0x14&&lastFees[_0x173b3b(0x238)][_0x173b3b(0x1d3)](),lastFees[_0x173b3b(0x238)][_0x173b3b(0x18c)](_0x2c26fd),lastFees[_0x173b3b(0x1bf)]=Math[_0x173b3b(0x270)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4213b3){const _0x5ef210=_0x3239f5;logger[_0x5ef210(0x2b3)]('0\x20-\x20EXECUTION:\x20'+_0x4213b3[_0x5ef210(0x1a7)]+_0x5ef210(0x1ee)+_0x4213b3[_0x5ef210(0x13e)]+_0x5ef210(0x1ee)+_0x4213b3[_0x5ef210(0x1bd)]+_0x5ef210(0x21e)+_0x4213b3['amount']+_0x5ef210(0x1ee)+_0x4213b3['id']);let _0x284a39=_0x4213b3[_0x5ef210(0x13e)],_0x16f89b=![];currentCoins['forEach'](_0x86c83b=>{const _0x1bc5e2=_0x5ef210;_0x86c83b[_0x1bc5e2(0x1a7)]==_0x4213b3['symbol']&&(_0x16f89b=!![]);});if(!_0x16f89b)return;const _0x3a6d4f=currentCoins[_0x5ef210(0x1b0)](_0x35dec4=>_0x35dec4[_0x5ef210(0x1a7)]==_0x4213b3[_0x5ef210(0x1a7)]),_0x16e05c=_0x52e1c6=>{if(_0x3a6d4f)_0x3a6d4f['orderstatus']=_0x52e1c6;};if(_0x284a39=='open')_0x16e05c('open');else{if(_0x284a39=='canceled'){_0x16e05c('canceled');const _0x49bd44=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x49bd44,await getOpenOrders(),handleOpenOrders();}else{if(_0x284a39==_0x5ef210(0x1b6)){let _0x555f5b=![];if(lastOrders)for(const _0x410972 of lastOrders){const _0x5b85ca=0xc8,_0x435c7a=0x1388;let _0x9c7dd9=0x0;while(!_0x410972[_0x5ef210(0x194)]&&_0x9c7dd9*_0x5b85ca<_0x435c7a){_0x9c7dd9++,await sleep(_0x5b85ca);}if(_0x9c7dd9>0x0)logger['debug'](_0x5ef210(0x21c)+_0x9c7dd9*_0x5b85ca/0x3e8+_0x5ef210(0x283));if(_0x410972['orderId']==_0x4213b3['id']){logger[_0x5ef210(0x2b3)](_0x5ef210(0x200)+_0x4213b3['id']),_0x555f5b=!![];if(_0x410972['filled']==0x0){logger[_0x5ef210(0x2b3)](_0x5ef210(0x210)+_0x4213b3['id']);if(_0x4213b3['average'])_0x410972[_0x5ef210(0x16f)]=_0x4213b3[_0x5ef210(0x1a3)];else{if(_0x4213b3['price'])_0x410972['price']=_0x4213b3[_0x5ef210(0x16f)];else{}}_0x410972[_0x5ef210(0x1bd)]=_0x4213b3['filled'],updateHighestFee(_0x410972),_0x16e05c(_0x5ef210(0x1bd)),await validateOrders();if(lockOrders==ORDERS[_0x5ef210(0x29e)]){const _0x41781e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x41781e;}_0x410972[_0x5ef210(0x1e7)]={'currency':_0x4213b3[_0x5ef210(0x1e7)]?_0x4213b3[_0x5ef210(0x1e7)][_0x5ef210(0x1d0)]:null,'cost':_0x4213b3['fee']?_0x4213b3['fee']['cost']:0x0},await updateCoinResults(_0x410972);}}}if(!_0x555f5b){logger[_0x5ef210(0x2b3)](_0x5ef210(0x29c)+_0x4213b3['id']),_0x16e05c(_0x5ef210(0x1bd));const _0x3c5bff=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3c5bff,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x448c55=JSON[_0x5ef210(0x261)](lastBalances[_0x5ef210(0x153)]);const _0x9d0fbd=_0x448c55[_0x5ef210(0x1b0)](_0x410b96=>_0x410b96[_0x5ef210(0x1a7)]==_0x4213b3[_0x5ef210(0x1a7)]);if(_0x9d0fbd){if(_0x284a39==_0x5ef210(0x278))_0x9d0fbd[_0x5ef210(0x27a)]=_0x9d0fbd['orderstatus']==_0x5ef210(0x1bd)?_0x5ef210(0x1bd):_0x5ef210(0x278);else{if(_0x284a39==_0x5ef210(0x1d6))_0x9d0fbd['orderstatus']=_0x9d0fbd[_0x5ef210(0x27a)]==_0x5ef210(0x1bd)?'filled':'canceled';else _0x284a39==_0x5ef210(0x1b6)&&(_0x9d0fbd['orderstatus']=_0x5ef210(0x1bd));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5ef210(0x123)](_0x448c55)},proxyEmit(_0x5ef210(0x1f5),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x34aa66=_0x3239f5;await getOpenOrders();let _0x4a31c=![];currentCoins[_0x34aa66(0x1ed)](_0x5434fd=>{const _0x373eca=_0x34aa66;_0x4a31c=allOpenOrders[_0x373eca(0x1b0)](_0x246624=>_0x246624[_0x373eca(0x1a7)]==_0x5434fd[_0x373eca(0x1a7)]),_0x5434fd[_0x373eca(0x27a)]=_0x4a31c?_0x373eca(0x278):'none';});}async function getCoins(_0x5b894=0x0,_0x340487=!![],_0x421c9e=config[_0x3239f5(0x11f)]){const _0x32266c=_0x3239f5;let _0x4a391c,_0xa60571=[],_0x3526e6=[],_0x51531a=[];if(_0x5b894)await sleep(_0x5b894);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4a391c=await exchange['fetchBalance'](),mybalances=_0x4a391c[_0x32266c(0x155)];for(const [_0x3fc5c0,_0x242c5c]of Object[_0x32266c(0x22c)](mybalances)){_0x51531a[_0x32266c(0x18c)](_0x3fc5c0);}config[_0x32266c(0x153)][_0x32266c(0x1ed)](_0x1fab3b=>{const _0x5eb4c7=_0x32266c;!_0x51531a[_0x5eb4c7(0x1f6)](_0x1fab3b[_0x5eb4c7(0x2ac)])&&(mybalances[_0x1fab3b[_0x5eb4c7(0x2ac)]]=0x0);});if(_0x421c9e=='')for(const [_0x5a1c68,_0x372531]of Object[_0x32266c(0x22c)](mybalances)){_0x372531!=0x0&&_0xa60571[_0x32266c(0x18c)]({'coin':_0x5a1c68});}else{let _0xe3e105=![];for(const [_0x37e82d,_0x5dca68]of Object['entries'](mybalances)){const _0x13e5fd=config['portfolio']['find'](_0x3ed90a=>_0x3ed90a[_0x32266c(0x2ac)]==_0x37e82d),_0x2c407c=_0x37e82d+'/'+_0x421c9e,_0x10369f=_0x421c9e+'/'+_0x37e82d,_0x2972c4=currentCoins['find'](_0x15c2b1=>_0x15c2b1[_0x32266c(0x2ac)]==_0x37e82d);_0xe3e105=![];if((_0x5dca68!=0x0||_0x13e5fd)&&(allSymbols[_0x32266c(0x1f6)](_0x2c407c)||_0x37e82d==_0x421c9e))_0xa60571[_0x32266c(0x18c)]({'coin':_0x37e82d,'symbol':_0x2c407c,'reverse':![],'number':Math[_0x32266c(0x270)](_0x5dca68+(_0x13e5fd&&_0x13e5fd['offset']||0x0),0x0),'orderstatus':_0x2972c4?_0x2972c4[_0x32266c(0x27a)]:_0x32266c(0x1fd)});else{if((_0x5dca68!=0x0||_0x13e5fd)&&allSymbols[_0x32266c(0x1f6)](_0x10369f))_0xa60571['push']({'coin':_0x37e82d,'symbol':_0x10369f,'reverse':!![],'number':Math[_0x32266c(0x270)](_0x5dca68+(_0x13e5fd&&_0x13e5fd['offset']||0x0),0x0),'orderstatus':_0x2972c4?_0x2972c4[_0x32266c(0x27a)]:_0x32266c(0x1fd)});else _0x13e5fd&&_0xa60571[_0x32266c(0x18c)]({'coin':_0x13e5fd['coin'],'symbol':_0x13e5fd['symbol'],'reverse':_0x13e5fd['reverse'],'number':0x0,'orderstatus':_0x32266c(0x1fd)});}}}}catch(_0x184a34){if(!_0x340487)handleErrorNoStop(_0x184a34,_0x32266c(0x208));else await handleError(_0x184a34,_0x32266c(0x208));}return _0x3526e6=cloneDeep(_0xa60571),_0xa60571=_0xa60571[_0x32266c(0x26c)](_0x2ea0f2=>{const _0x4e2709=_0x32266c,_0x486dec=config['portfolio']['find'](_0x357fbc=>_0x357fbc[_0x4e2709(0x2ac)]==_0x2ea0f2[_0x4e2709(0x2ac)]);return _0x486dec&&!_0x486dec[_0x4e2709(0x23f)];}),[_0xa60571,_0x3526e6];}async function getCoinNumber(_0x25327b){const _0x2b81a1=_0x3239f5;let _0x3700a4;try{const _0x1c675f=await exchange[_0x2b81a1(0x11d)]();_0x3700a4=_0x1c675f[_0x2b81a1(0x155)][_0x25327b];}catch(_0x225b53){await handleError(_0x225b53,_0x2b81a1(0x1aa));}return _0x3700a4;}async function getOpenOrders(){const _0x3eca9e=_0x3239f5;let _0x1f9f4b;allOpenOrders=[];try{for(const _0x21b636 of config[_0x3eca9e(0x153)]){!_0x21b636[_0x3eca9e(0x23f)]&&_0x21b636['coin']!=config[_0x3eca9e(0x11f)]&&(_0x1f9f4b=await exchange[_0x3eca9e(0x28e)](_0x21b636[_0x3eca9e(0x1a7)]),_0x1f9f4b['length']>0x0&&allOpenOrders[_0x3eca9e(0x18c)](_0x1f9f4b[0x0]));}}catch(_0x4f69dd){await handleError(_0x4f69dd,_0x3eca9e(0x20b));}}async function handleOpenOrders(_0x12c97f=0x0){const _0x66164a=_0x3239f5;allOpenOrders[_0x66164a(0x2a2)]==0x0&&lockOrders==ORDERS[_0x66164a(0x29e)]&&allOrdersPlaced&&(_0x12c97f==0x0?(logger['debug'](_0x66164a(0x177)),_0x12c97f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x66164a(0x2b3)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x66164a(0x1e3))));}async function testAPI(_0x2bae29){const _0x44b470=_0x3239f5,_0x2eecdc=ccxt[_0x44b470(0x1c1)][_0x2bae29[_0x44b470(0x243)]['toLowerCase']()],_0x59ee52=new _0x2eecdc({'apiKey':_0x2bae29['apiKey'],'secret':_0x2bae29['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x44b470(0x25f)}});if(_0x2bae29['apiPassword'])_0x59ee52[_0x44b470(0x231)]=_0x2bae29['apiPassword'];try{await _0x59ee52[_0x44b470(0x296)]();}catch(_0x1002ca){throw _0x1002ca;}}function cloneDeep(_0x48e770){const _0x488e67=_0x3239f5;return JSON[_0x488e67(0x261)](JSON[_0x488e67(0x123)](_0x48e770));}async function getPortfolio(_0x1f2071){const _0x5e5a36=_0x3239f5;let _0x316b7e=[],_0x53b8cd=[],_0x5e0c73=[],_0x52a486;if(_0x1f2071[_0x5e5a36(0x1ae)]!=='************'||_0x1f2071['apiSecret']!==_0x5e5a36(0x12d)||_0x1f2071[_0x5e5a36(0x1bb)]&&_0x1f2071[_0x5e5a36(0x1bb)]!=='************'){if(config[_0x5e5a36(0x243)]){if(_0x1f2071[_0x5e5a36(0x1ae)]==_0x5e5a36(0x12d))_0x1f2071[_0x5e5a36(0x1ae)]=config['apiKey'];if(_0x1f2071[_0x5e5a36(0x26f)]==_0x5e5a36(0x12d))_0x1f2071[_0x5e5a36(0x26f)]=config[_0x5e5a36(0x26f)];if(_0x1f2071['apiPassword']=='************')_0x1f2071[_0x5e5a36(0x1bb)]=config[_0x5e5a36(0x1bb)];try{await testAPI(_0x1f2071);}catch(_0x136f9e){if(_0x136f9e['toString']()[_0x5e5a36(0x1f6)](_0x5e5a36(0x1e4))){logger[_0x5e5a36(0x2b3)](_0x5e5a36(0x20a)),proxyEmit(_0x5e5a36(0x153),![]);return;}else{handleError(_0x136f9e,_0x5e5a36(0x12f));return;}}}await initExchange(_0x1f2071[_0x5e5a36(0x243)],_0x1f2071[_0x5e5a36(0x1ae)],_0x1f2071[_0x5e5a36(0x26f)],_0x1f2071[_0x5e5a36(0x1bb)]);try{await loadSymbols();}catch(_0x2016af){if(_0x2016af[_0x5e5a36(0x162)]()[_0x5e5a36(0x1f6)]('AuthenticationError')){proxyEmit(_0x5e5a36(0x153),![]);return;}else{handleError(_0x2016af,_0x5e5a36(0x1f1));return;}}const _0x3854eb=await getCoins(0x0,![],_0x1f2071[_0x5e5a36(0x11f)]);_0x5e0c73=cloneDeep(_0x3854eb[0x1]);}else _0x5e0c73=cloneDeep(currentCoinsAll);if(_0x1f2071[_0x5e5a36(0x11f)]=='')proxyEmit(_0x5e5a36(0x153),_0x5e0c73);else{_0x5e0c73[_0x5e5a36(0x1ed)](_0x3e42f6=>{const _0x1b7bcf=_0x5e5a36;if(_0x3e42f6[_0x1b7bcf(0x2ac)]!=_0x1f2071[_0x1b7bcf(0x11f)]&&allSymbols[_0x1b7bcf(0x1f6)](_0x3e42f6[_0x1b7bcf(0x1a7)]))_0x316b7e[_0x1b7bcf(0x18c)](_0x3e42f6['symbol']);});if(_0x316b7e[_0x5e5a36(0x2a2)]==0x0)logHistory('error',_0x5e5a36(0x130));else{try{_0x53b8cd=await getTickers(_0x316b7e);}catch(_0x31a270){if(_0x31a270[_0x5e5a36(0x162)]()[_0x5e5a36(0x1f6)](_0x5e5a36(0x1e4))){proxyEmit(_0x5e5a36(0x153),![]);return;}else handleError(_0x31a270,_0x5e5a36(0x1ea));}_0x5e0c73[_0x5e5a36(0x1ed)](_0x5e0d2=>{const _0xd10a45=_0x5e5a36;_0x5e0d2[_0xd10a45(0x2ac)]!=_0x1f2071[_0xd10a45(0x11f)]?_0x53b8cd[_0x5e0d2[_0xd10a45(0x1a7)]]?_0x52a486=_0x5e0d2[_0xd10a45(0x205)]?0x1/_0x53b8cd[_0x5e0d2[_0xd10a45(0x1a7)]]['last']:_0x53b8cd[_0x5e0d2['symbol']][_0xd10a45(0x1c6)]:_0x52a486=0x0:_0x52a486=0x1,_0x5e0d2[_0xd10a45(0x16f)]=formatResult(_0x52a486,0x8);}),proxyEmit(_0x5e5a36(0x153),_0x5e0c73);}}}function truncateTradeAmount(_0x458f5c,_0x4d5f9f){const _0x17bb57=_0x3239f5;let _0x163d21=0x0;try{_0x163d21=exchange[_0x17bb57(0x299)](_0x458f5c,_0x4d5f9f);}catch(_0xd66aed){}return _0x163d21;}function checkMinimums(_0xa1b6f1){const _0x134a95=_0x3239f5;let _0x3fa99=!![];const _0x44c294=!_0xa1b6f1[_0x134a95(0x205)]?markets[_0xa1b6f1[_0x134a95(0x1a7)]]['limits'][_0x134a95(0x167)][_0x134a95(0x2a1)]:markets[_0xa1b6f1[_0x134a95(0x1a7)]][_0x134a95(0x272)][_0x134a95(0x14d)]['min'],_0x31d4c9=!_0xa1b6f1[_0x134a95(0x205)]?markets[_0xa1b6f1['symbol']][_0x134a95(0x272)][_0x134a95(0x14d)][_0x134a95(0x2a1)]:markets[_0xa1b6f1[_0x134a95(0x1a7)]][_0x134a95(0x272)]['amount'][_0x134a95(0x2a1)],_0x46ab10=truncateTradeAmount(_0xa1b6f1[_0x134a95(0x1a7)],_0xa1b6f1[_0x134a95(0x141)]);_0xa1b6f1[_0x134a95(0x141)]=_0x46ab10;if(Math['abs'](_0x46ab10)<_0x44c294)_0x3fa99=![];if(Math['abs'](_0x46ab10)*_0xa1b6f1[_0x134a95(0x1c6)]<_0x31d4c9)_0x3fa99=![];if(_0xa1b6f1['side']==_0x134a95(0x23d)){let _0x16b382=config[_0x134a95(0x153)]['find'](_0x33dd81=>_0x33dd81[_0x134a95(0x2ac)]==_0xa1b6f1[_0x134a95(0x2ac)]);if(_0x16b382[_0x134a95(0x1ab)]>0x0){if(Math[_0x134a95(0x204)](_0x46ab10)>_0xa1b6f1[_0x134a95(0x18d)]-_0x16b382[_0x134a95(0x1ab)])_0x3fa99=![];}else{if(Math[_0x134a95(0x204)](_0x46ab10)>_0xa1b6f1[_0x134a95(0x18d)])_0x3fa99=![];}}if(_0xa1b6f1['side']==_0x134a95(0x1d4)){let _0x3bcc44=config['portfolio']['find'](_0x5dcbe7=>_0x5dcbe7[_0x134a95(0x2ac)]==config[_0x134a95(0x11f)]),_0x2b2302=currentCoins[_0x134a95(0x1b0)](_0x35a882=>_0x35a882[_0x134a95(0x2ac)]==config[_0x134a95(0x11f)]);if(_0x3bcc44['offset']>0x0){if(Math[_0x134a95(0x204)](_0x46ab10)*_0xa1b6f1[_0x134a95(0x1c6)]>_0x2b2302[_0x134a95(0x18d)]-_0x3bcc44['offset'])_0x3fa99=![];}else{if(Math['abs'](_0x46ab10)*_0xa1b6f1['last']>_0x2b2302['number'])_0x3fa99=![];}}return _0x3fa99;}async function getBalances(_0x4bf2e6=!![]){const _0x3d655f=_0x3239f5;let _0x530b80=0x0,_0x5e7b1f;const _0x16f3f3=config['threshold'];if(config['headless']&&config[_0x3d655f(0x150)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x437a3b=>{const _0x54554d=_0x3d655f;if(_0x437a3b['coin']!=config[_0x54554d(0x11f)]){let _0x5054d2=global['ticker'][noslash(_0x437a3b['symbol'])];_0x5e7b1f=_0x437a3b[_0x54554d(0x205)]?0x1/_0x5054d2:_0x5054d2;}else _0x5e7b1f=0x1;let _0x33dc15=_0x437a3b[_0x54554d(0x18d)]*_0x5e7b1f;_0x530b80+=_0x33dc15,_0x437a3b[_0x54554d(0x1c6)]=formatResult(Number(_0x5e7b1f),0x8),_0x437a3b['value']=_0x33dc15;}),currentCoins['forEach'](_0x22d8ce=>{const _0x54b066=_0x3d655f;let _0x13ec9f=config[_0x54b066(0x153)]['find'](_0x242825=>_0x242825[_0x54b066(0x2ac)]==_0x22d8ce[_0x54b066(0x2ac)]),_0xd5094b=Number(_0x13ec9f[_0x54b066(0x188)]),_0x9885a8=_0x22d8ce[_0x54b066(0x1c9)]/_0x530b80*0x64,_0x461f25=_0xd5094b*_0x530b80/0x64/_0x22d8ce[_0x54b066(0x1c6)]-_0x22d8ce[_0x54b066(0x18d)];_0x22d8ce['distribution']=formatResult(_0x9885a8,0x3),_0x22d8ce[_0x54b066(0x137)]=formatResult(_0xd5094b,0x3),_0x22d8ce[_0x54b066(0x141)]=formatResult(_0x461f25,0x8),_0x22d8ce[_0x54b066(0x178)]='',_0x22d8ce[_0x54b066(0x125)]=![];if(_0x22d8ce[_0x54b066(0x2ac)]!=config['basecoin']){if(_0x22d8ce[_0x54b066(0x188)]>_0xd5094b)_0x22d8ce['side']=_0x54b066(0x23d),_0x22d8ce['valid']=checkMinimums(_0x22d8ce);else _0x22d8ce[_0x54b066(0x188)]<_0xd5094b&&(_0x22d8ce[_0x54b066(0x178)]=_0x54b066(0x1d4),_0x22d8ce[_0x54b066(0x125)]=checkMinimums(_0x22d8ce));}_0x22d8ce['delta']=_0x22d8ce[_0x54b066(0x188)]/_0x22d8ce[_0x54b066(0x137)]-0x1;if(_0x22d8ce[_0x54b066(0x27a)]=='filled'||_0x22d8ce['orderstatus']==_0x54b066(0x1d6))_0x22d8ce[_0x54b066(0x27a)]=_0x54b066(0x1fd);}),currentCoins[_0x3d655f(0x1a9)]((_0x1f847f,_0x54bf25)=>_0x1f847f['delta']<_0x54bf25[_0x3d655f(0x25b)]?0x1:_0x54bf25[_0x3d655f(0x25b)]<_0x1f847f['delta']?-0x1:0x0);const _0x231e97=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x231e97[_0x3d655f(0x16e)],'usd':_0x231e97['usd'],'portfolio':JSON[_0x3d655f(0x123)](currentCoins),'threshold':_0x16f3f3},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x4bf2e6){if(config[_0x3d655f(0x2ae)])headlessMode({'portfolio':currentCoins,'threshold':_0x16f3f3});else{if(lockOrders==ORDERS[_0x3d655f(0x1cc)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x16f3f3});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5f0a0e=getNormalizedPerformance();getStartingBalances(_0x5f0a0e),emitPerformance(_0x5f0a0e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2285c1=getNormalizedPerformance();emitPerformance(_0x2285c1),getStartingBalances(_0x2285c1),logger[_0x3d655f(0x2b3)](_0x3d655f(0x248));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3ff946=_0x3239f5;if(!lastBalances)return;let _0x25b84a=[],_0x1be646,_0x2b58fb=JSON[_0x3ff946(0x261)](lastBalances[_0x3ff946(0x153)]);_0x2b58fb[_0x3ff946(0x1a9)]((_0x39a3ff,_0x960be9)=>_0x39a3ff[_0x3ff946(0x2ac)]>_0x960be9['coin']?0x1:_0x960be9[_0x3ff946(0x2ac)]>_0x39a3ff[_0x3ff946(0x2ac)]?-0x1:0x0),_0x2b58fb[_0x3ff946(0x1ed)](_0x472ad0=>{const _0x51a40f=_0x3ff946;let _0x5bd382={'coin':_0x472ad0[_0x51a40f(0x2ac)],'number':_0x472ad0[_0x51a40f(0x18d)],'price':_0x472ad0[_0x51a40f(0x1c6)]};_0x25b84a[_0x51a40f(0x18c)](_0x5bd382);});const _0x215471=await getFiat();_0x1be646={'date':lastBalances[_0x3ff946(0x234)]['split']('\x20')[0x0],'eur':_0x215471[_0x3ff946(0x16e)],'usd':_0x215471[_0x3ff946(0x12e)],'coins':_0x25b84a};let _0x1ad10f=dbPerformance[_0x3ff946(0x246)](_0x3ff946(0x1cd))['find']({'date':_0x1be646[_0x3ff946(0x1e8)]})['value']();_0x1ad10f?_0x1be646[_0x3ff946(0x1e8)]!=config['startdate']&&dbPerformance[_0x3ff946(0x246)](_0x3ff946(0x1cd))[_0x3ff946(0x1b0)]({'date':_0x1be646[_0x3ff946(0x1e8)]})[_0x3ff946(0x218)](_0x1be646)['write']():dbPerformance[_0x3ff946(0x246)]('data')[_0x3ff946(0x18c)](_0x1be646)[_0x3ff946(0x14c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x79a1ad=_0x3239f5;let _0x184366=[];if(dbPerformance[_0x79a1ad(0x1ca)](_0x79a1ad(0x1cd))['value']()){let _0x503f21=dbPerformance[_0x79a1ad(0x246)](_0x79a1ad(0x1cd))[_0x79a1ad(0x199)]()['filter'](_0x4fb786=>{const _0x3d571e=_0x79a1ad;if(_0x4fb786[_0x3d571e(0x1ce)][_0x3d571e(0x2a2)]==0x0)return![];else return!![];})[_0x79a1ad(0x23e)]('date')[_0x79a1ad(0x1c9)](),_0x12d37b=[...config[_0x79a1ad(0x269)]];_0x12d37b[_0x79a1ad(0x1a9)]((_0x2045fc,_0x17840d)=>_0x2045fc[_0x79a1ad(0x1e8)]>_0x17840d[_0x79a1ad(0x1e8)]?-0x1:_0x17840d['date']>_0x2045fc[_0x79a1ad(0x1e8)]?0x1:0x0);let _0x21b9af=0x1,_0x8a8421=[],_0x10ab07=0x0;_0x503f21[_0x79a1ad(0x295)]()[_0x79a1ad(0x205)]()['forEach']((_0x56941f,_0x278786)=>{const _0x2104b2=_0x79a1ad;if(_0x12d37b[_0x10ab07]){if(_0x503f21[_0x503f21[_0x2104b2(0x2a2)]-_0x278786]&&_0x12d37b[_0x10ab07][_0x2104b2(0x1e8)]==_0x503f21[_0x503f21[_0x2104b2(0x2a2)]-_0x278786][_0x2104b2(0x1e8)]){if(_0x278786<_0x503f21['length']){let _0x266442=0x0,_0x599e96=0x0;_0x503f21[_0x503f21[_0x2104b2(0x2a2)]-_0x278786][_0x2104b2(0x1ce)][_0x2104b2(0x1ed)](_0x515cd4=>{const _0x18a23b=_0x2104b2;_0x599e96+=_0x515cd4['number']*_0x515cd4[_0x18a23b(0x16f)];}),_0x12d37b[_0x10ab07][_0x2104b2(0x22d)][_0x2104b2(0x1ed)](_0x52357e=>{const _0x4c5aa2=_0x2104b2;_0x266442+=_0x52357e[_0x4c5aa2(0x18d)]*_0x52357e[_0x4c5aa2(0x16f)];}),_0x21b9af*=_0x266442/(_0x599e96-_0x266442)+0x1;}_0x10ab07++;}}let _0x552caf=0x0;_0x56941f['coins']['forEach'](_0x41f81f=>{const _0x41f000=_0x2104b2;_0x552caf+=_0x41f81f[_0x41f000(0x18d)]*_0x41f81f[_0x41f000(0x16f)];}),_0x8a8421[_0x503f21[_0x2104b2(0x2a2)]-_0x278786-0x1]=_0x552caf*(_0x21b9af-0x1);});let _0x5244f0=[];_0x12d37b=[...config['liquidity']]||[];let _0x58cb0e=0x0;_0x10ab07=0x0,_0x503f21[_0x79a1ad(0x1ed)]((_0x26411b,_0x2be8d6)=>{const _0x499721=_0x79a1ad;if(_0x12d37b[_0x10ab07]){const _0x253981=fns[_0x499721(0x261)](_0x12d37b[_0x10ab07][_0x499721(0x1e8)],_0x499721(0x2b2),new Date()),_0x57bc20=fns[_0x499721(0x261)](_0x26411b[_0x499721(0x1e8)],_0x499721(0x2b2),new Date());if(fns[_0x499721(0x20c)](_0x253981,_0x57bc20)){let _0x4dcf8d=0x0;_0x12d37b[_0x10ab07][_0x499721(0x22d)]['forEach'](_0x2d1a3f=>{const _0x4327e2=_0x499721;!_0x5244f0[_0x2d1a3f[_0x4327e2(0x2ac)]]?_0x5244f0[_0x2d1a3f['coin']]=_0x2d1a3f[_0x4327e2(0x18d)]:(_0x4dcf8d=_0x5244f0[_0x2d1a3f[_0x4327e2(0x2ac)]],_0x5244f0[_0x2d1a3f['coin']]+=_0x2d1a3f[_0x4327e2(0x18d)]);const _0x37d2c5=_0x26411b[_0x4327e2(0x1ce)][_0x4327e2(0x1b0)](_0x46e33a=>_0x46e33a[_0x4327e2(0x2ac)]==_0x2d1a3f['coin']);(!_0x37d2c5||_0x37d2c5['number']==0x0)&&(_0x58cb0e+=(-_0x2d1a3f[_0x4327e2(0x18d)]-_0x4dcf8d)*_0x2d1a3f[_0x4327e2(0x16f)]);}),_0x10ab07++;}}_0x26411b[_0x499721(0x1ce)]['forEach']((_0x167f02,_0x1b9d2c)=>{const _0x20de08=_0x499721;_0x5244f0[_0x167f02[_0x20de08(0x2ac)]]&&(_0x167f02[_0x20de08(0x280)]=_0x5244f0[_0x167f02['coin']]);}),_0x184366[_0x499721(0x18c)]({'date':_0x26411b[_0x499721(0x1e8)],'eur':_0x26411b[_0x499721(0x16e)],'usd':_0x26411b[_0x499721(0x12e)],'offset':_0x8a8421[_0x2be8d6],'netoffset':_0x58cb0e,'coins':_0x26411b['coins']});});}return _0x184366;}function emitPerformance(_0x277da8){const _0x2ad4c4=_0x3239f5;_0x277da8[_0x2ad4c4(0x2a2)]!==0x0?(proxyEmit(_0x2ad4c4(0x18a),_0x277da8),lastPerformanceEmitted=getDate()):proxyEmit(_0x2ad4c4(0x18a),[]);}function getPerf(_0x389928,_0x4f88cf){const _0x124a4a=_0x3239f5;let _0x27a53e=0x0,_0x5a02c9=0x0,_0x4fe371=0x0;_0x389928['coins'][_0x124a4a(0x1ed)](_0x43fc9b=>{const _0x49dd03=_0x124a4a;_0x27a53e+=_0x43fc9b['number']*_0x43fc9b[_0x49dd03(0x16f)];});_0x4f88cf&&(_0x27a53e+=_0x389928[_0x124a4a(0x1ab)]);if(config[_0x124a4a(0x11f)]==='BTC'||config['basecoin']===_0x124a4a(0x146))_0x5a02c9=_0x27a53e*_0x389928[_0x124a4a(0x16e)],_0x4fe371=_0x27a53e*_0x389928[_0x124a4a(0x12e)];else{if(usdBasecoins[_0x124a4a(0x1f6)](config['basecoin']))_0x5a02c9=_0x27a53e*_0x389928[_0x124a4a(0x16e)]/_0x389928[_0x124a4a(0x12e)],_0x4fe371=_0x27a53e;else config[_0x124a4a(0x11f)]===_0x124a4a(0x27b)&&(_0x5a02c9=_0x27a53e,_0x4fe371=_0x27a53e*_0x389928[_0x124a4a(0x12e)]/_0x389928[_0x124a4a(0x16e)]);}return[_0x27a53e,_0x5a02c9,_0x4fe371];}function _0x4b44(_0x539a88,_0x58f2fe){const _0x2a82f1=_0xec32();return _0x4b44=function(_0x53f22a,_0x51c30a){_0x53f22a=_0x53f22a-0x117;let _0xec328b=_0x2a82f1[_0x53f22a];return _0xec328b;},_0x4b44(_0x539a88,_0x58f2fe);}function getKPIs(_0x58caa1,_0x101c46=_0x3239f5(0x27b)){const _0x299ecc=_0x3239f5,_0x417984=config[_0x299ecc(0x11f)],_0x31b594=lastBalances,_0x59b364=currentCoins,_0x5017a2=getNormalizedPerformance(),_0x3bfd47=_0x58caa1===_0x299ecc(0x11f)?_0x417984:_0x58caa1===_0x299ecc(0x18f)||_0x58caa1===_0x299ecc(0x1cf)?_0x101c46:_0x299ecc(0x1e9)+_0x417984,_0x7dd5a8=_0x58caa1===_0x299ecc(0x1d1)?_0x299ecc(0x13b):_0x58caa1==='net-fiat'?'Net\x20effect':_0x3bfd47+'\x20value',_0xb36f01=_0x58caa1===_0x299ecc(0x1d1)||_0x58caa1===_0x299ecc(0x1cf)?_0x299ecc(0x13b):_0x3bfd47+_0x299ecc(0x117);let _0x18c26a=0x0;_0x59b364[_0x299ecc(0x1ed)](_0x449534=>{const _0x21a8db=_0x299ecc;_0x18c26a+=_0x449534[_0x21a8db(0x18d)]*_0x449534[_0x21a8db(0x1c6)];});if(_0x58caa1===_0x299ecc(0x18f)||_0x58caa1===_0x299ecc(0x1cf)){if(_0x417984===_0x299ecc(0x1fe)||_0x417984===_0x299ecc(0x146))_0x18c26a=_0x18c26a*(_0x101c46===_0x299ecc(0x27b)?_0x31b594[_0x299ecc(0x16e)]:_0x31b594[_0x299ecc(0x12e)]);else{if(usdBasecoins['includes'](_0x417984))_0x18c26a=_0x18c26a*(_0x101c46===_0x299ecc(0x27b)?_0x31b594[_0x299ecc(0x16e)]/_0x31b594['usd']:0x1);else _0x417984===_0x299ecc(0x27b)&&(_0x18c26a=_0x18c26a*(_0x101c46===_0x299ecc(0x27b)?0x1:_0x31b594['usd']/_0x31b594[_0x299ecc(0x16e)]));}}let _0x27768b;if(_0x18c26a!==0x0){if(_0x58caa1==='basecoin')_0x27768b=(_0x18c26a/startingBalances[_0x299ecc(0x11f)]-0x1)*0x64;else{if(_0x101c46===_0x299ecc(0x27b))_0x27768b=(_0x18c26a/startingBalances[_0x299ecc(0x16e)]-0x1)*0x64;else _0x27768b=(_0x18c26a/startingBalances[_0x299ecc(0x12e)]-0x1)*0x64;}let _0x376d3f=0x0;if(startingBalances[_0x299ecc(0x1ce)])_0x59b364[_0x299ecc(0x1ed)](_0x393dde=>{const _0x4b6db6=_0x299ecc;let _0x52f21e=startingBalances[_0x4b6db6(0x1ce)]['find'](_0x1094a1=>_0x1094a1[_0x4b6db6(0x2ac)]===_0x393dde[_0x4b6db6(0x2ac)]);if(_0x52f21e&&_0x52f21e[_0x4b6db6(0x2ac)]&&_0x393dde[_0x4b6db6(0x18d)]!==0x0)_0x376d3f+=_0x52f21e[_0x4b6db6(0x18d)]*_0x393dde['last'];});let _0x2fad5a=0x0;if(_0x5017a2[_0x299ecc(0x2a2)]!==0x0){let _0x5816c5=_0x5017a2[_0x5017a2[_0x299ecc(0x2a2)]-0x1];_0x2fad5a=_0x5816c5[_0x299ecc(0x242)];}_0x376d3f-=_0x2fad5a;_0x58caa1===_0x299ecc(0x1d1)&&(_0x27768b=(_0x18c26a-_0x376d3f)/startingBalances[_0x299ecc(0x11f)]*0x64,_0x18c26a=_0x18c26a-_0x376d3f);if(_0x58caa1===_0x299ecc(0x1cf)){let _0x426e7c=_0x101c46===_0x299ecc(0x27b)?startingBalances['eur']:startingBalances[_0x299ecc(0x12e)];if(_0x417984===_0x299ecc(0x1fe)||_0x417984==='ETH')_0x376d3f=_0x101c46===_0x299ecc(0x27b)?_0x376d3f*_0x31b594[_0x299ecc(0x16e)]:_0x376d3f*_0x31b594[_0x299ecc(0x12e)];else{if(usdBasecoins['includes'](_0x417984))_0x376d3f=_0x101c46===_0x299ecc(0x27b)?_0x376d3f*_0x31b594[_0x299ecc(0x16e)]/_0x31b594[_0x299ecc(0x12e)]:_0x376d3f;else _0x417984===_0x299ecc(0x27b)&&(_0x376d3f=_0x101c46==='EUR'?_0x376d3f:_0x376d3f*_0x31b594[_0x299ecc(0x12e)]/_0x31b594[_0x299ecc(0x16e)]);}_0x27768b=(_0x18c26a-_0x376d3f)/_0x426e7c*0x64,_0x18c26a=_0x18c26a-_0x376d3f;}if(_0x27768b){if(_0x27768b<0x64)_0x27768b=_0x27768b[_0x299ecc(0x285)](0x2);else{if(_0x27768b<0x3e8)_0x27768b=_0x27768b[_0x299ecc(0x285)](0x1);else _0x27768b=_0x27768b['toFixed'](0x0);}}else _0x27768b=Number('0')[_0x299ecc(0x285)](0x2);if(_0x18c26a){if(Math[_0x299ecc(0x204)](_0x18c26a)<0.000001)_0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x2);else{if(Math[_0x299ecc(0x204)](_0x18c26a)<0.1)_0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x6);else{if(Math['abs'](_0x18c26a)<0x1)_0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x5);else{if(Math[_0x299ecc(0x204)](_0x18c26a)<0xa)_0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x4);else{if(Math[_0x299ecc(0x204)](_0x18c26a)<0x64)_0x18c26a=_0x18c26a['toFixed'](0x3);else{if(Math[_0x299ecc(0x204)](_0x18c26a)<0x3e8)_0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x2);else _0x18c26a=_0x18c26a[_0x299ecc(0x285)](0x2);}}}}}}else _0x18c26a=Number('0')[_0x299ecc(0x285)](0x2);}else _0x27768b=Number('0')[_0x299ecc(0x285)](0x2);return{'value':_0x18c26a,'change':_0x27768b,'leftTxt':_0x7dd5a8,'rightTxt':_0xb36f01};}async function getStartingBalances(_0x4a85ee,_0x44c003=!![]){const _0xb68dd9=_0x3239f5;if(_0x4a85ee['length']!==0x0){const [_0x2ffc3e,_0x7f9aa9,_0x5ff1fd]=getPerf(_0x4a85ee[0x0],!![]);let _0x33bcb8=[];config['portfolio'][_0xb68dd9(0x1ed)](_0x3893df=>{const _0x333a35=_0xb68dd9;let _0x16cf2f=0x0,_0x379bf0;config[_0x333a35(0x269)][_0x333a35(0x1ed)](_0x4e955f=>{const _0x3454d1=_0x333a35;let _0xc44fd9=_0x4e955f[_0x3454d1(0x22d)][_0x3454d1(0x1b0)](_0x19dac8=>_0x19dac8[_0x3454d1(0x2ac)]==_0x3893df['coin']);if(_0xc44fd9){_0x16cf2f+=_0xc44fd9[_0x3454d1(0x18d)];if(!_0x379bf0)_0x379bf0=_0xc44fd9[_0x3454d1(0x16f)];}}),_0x33bcb8[_0x333a35(0x18c)]({'coin':_0x3893df[_0x333a35(0x2ac)],'number':_0x16cf2f,'initialprice':_0x379bf0});});const _0x2b7c0f={'basecoin':_0x2ffc3e,'eur':_0x7f9aa9,'usd':_0x5ff1fd,'coins':_0x33bcb8};if(_0x44c003)proxyEmit(_0xb68dd9(0x1e0),_0x2b7c0f);startingBalances=_0x2b7c0f;}}function headlessMode(_0x348290){const _0x24e03f=_0x3239f5;let _0x24f706=_0x348290[_0x24e03f(0x153)],_0x39b61e=_0x348290[_0x24e03f(0x14f)],_0x48d08d=[];for(let _0x3a25d1 of _0x24f706){if(_0x3a25d1[_0x24e03f(0x2ac)]!=config[_0x24e03f(0x11f)]){if(_0x3a25d1[_0x24e03f(0x25b)]>=_0x39b61e/0x64){if(_0x3a25d1[_0x24e03f(0x125)])_0x48d08d['push'](_0x3a25d1);}else{if(_0x3a25d1['delta']<=-_0x39b61e/0x64){if(_0x3a25d1[_0x24e03f(0x125)])_0x48d08d[_0x24e03f(0x18c)](_0x3a25d1);}}}}_0x48d08d[_0x24e03f(0x2a2)]>0x0&&(lockOrders==ORDERS[_0x24e03f(0x1cc)]&&!coolingDown&&_0x48d08d['forEach'](_0x1e419f=>{const _0x473811=_0x24e03f;logger[_0x473811(0x2b3)](_0x473811(0x14a)+_0x1e419f[_0x473811(0x2ac)]+'\x20'+_0x1e419f[_0x473811(0x18d)]+'\x20'+_0x1e419f[_0x473811(0x1c6)]+'\x20'+_0x1e419f[_0x473811(0x188)]+'%\x20'+_0x1e419f['target']+'%\x20'+(0x64*_0x1e419f[_0x473811(0x25b)])[_0x473811(0x285)](0x2)+'%\x20('+_0x39b61e[_0x473811(0x285)](0x2)+'%)');}),placeOrder(_0x48d08d));}function notifyBalance(_0x28d43c){const _0x51502c=_0x3239f5;let _0x24c48e=_0x28d43c['portfolio'],_0xe0554b=_0x28d43c[_0x51502c(0x14f)],_0x32c830=[];for(let _0x1eb419 of _0x24c48e){if(_0x1eb419['coin']!=config['basecoin']){if(_0x1eb419[_0x51502c(0x25b)]>=_0xe0554b/0x64){if(_0x1eb419[_0x51502c(0x125)])_0x32c830[_0x51502c(0x18c)](_0x1eb419);}else{if(_0x1eb419[_0x51502c(0x25b)]<=-_0xe0554b/0x64){if(_0x1eb419[_0x51502c(0x125)])_0x32c830['push'](_0x1eb419);}}}}if(_0x32c830[_0x51502c(0x2a2)]>0x0){let _0x3646aa=_0x32c830[_0x51502c(0x159)](_0x53b43e=>_0x53b43e[_0x51502c(0x2ac)]);_0x3646aa[_0x51502c(0x1a9)]();let _0x4502eb=_0x3646aa[_0x51502c(0x189)](',\x20');if(!lastCoinsToBalance)logHistory(_0x51502c(0x1ac),_0x51502c(0x190));lastCoinsToBalance=_0x4502eb;}}function symbolToCoin(_0xb27019){const _0x27dec5=_0x3239f5;let _0x1422a9;if(_0xb27019[_0x27dec5(0x1f6)]('/'+config[_0x27dec5(0x11f)]))_0x1422a9=_0xb27019['replace']('/'+config['basecoin'],'');if(_0xb27019[_0x27dec5(0x1f6)](config[_0x27dec5(0x11f)]+'/'))_0x1422a9=_0xb27019[_0x27dec5(0x22e)](config[_0x27dec5(0x11f)]+'/','');return _0x1422a9;}async function unlockOrders(){const _0x25c6b0=_0x3239f5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x25c6b0(0x29e)]){logger[_0x25c6b0(0x2b3)](_0x25c6b0(0x291)),lockOrders=ORDERS[_0x25c6b0(0x18e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x20a6a3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x20a6a3,validateOrdersState=_0x25c6b0(0x280),persistOpenOrders([]),lockOrders=ORDERS[_0x25c6b0(0x1cc)],logger[_0x25c6b0(0x2b3)](_0x25c6b0(0x1bc));}}async function validateOrders(_0x909034){const _0x259783=_0x3239f5;if(_0x909034)validateOrdersState=_0x909034;logger[_0x259783(0x2b3)](_0x259783(0x288)+validateOrdersState+_0x259783(0x1db)+(lockOrders==0x1?_0x259783(0x14e):lockOrders==0x2?_0x259783(0x163):_0x259783(0x24d)));let _0x34ebea=[],_0x3492ac=config[_0x259783(0x20d)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x259783(0x29e)])return;logger[_0x259783(0x2b3)](_0x259783(0x224)+validateOrdersState),lastOrders[_0x259783(0x1ed)](_0x1672c9=>{const _0x5deeae=_0x259783;let _0x5e2316=![];_0x1672c9[_0x5deeae(0x1bd)]>0x0&&(_0x5e2316=!![]),_0x34ebea['push'](_0x5e2316),_0x5e2316&&config[_0x5deeae(0x20d)]!=_0x5deeae(0x158)&&logHistory(_0x5deeae(0x2b1),_0x5deeae(0x127)+_0x1672c9[_0x5deeae(0x1a7)]+'\x20'+_0x1672c9[_0x5deeae(0x178)]+'\x20#'+formatResult(_0x1672c9[_0x5deeae(0x1bd)],0x8)+'\x20@'+formatResult(_0x1672c9[_0x5deeae(0x16f)],0x8));}),_0x34ebea['forEach']((_0x306368,_0x109e2e)=>{const _0x39d898=_0x259783;if(_0x306368)lastOrders[_0x39d898(0x222)](_0x109e2e,0x1);}),persistOpenOrders(lastOrders);const _0x4d5b19=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x259783(0x18b);if(validateOrdersState==_0x259783(0x280)){validateOrdersState=_0x259783(0x17d);if(_0x34ebea[_0x259783(0x1f6)](![])){if(config['ordertype']==_0x259783(0x158)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x259783(0x17d)){if(_0x34ebea[_0x259783(0x1f6)](![])){}else{if(allOrdersPlaced){if(config['ordertype']=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x34ebea[_0x259783(0x1f6)](![])&&(config[_0x259783(0x20d)]==_0x259783(0x158)?logHistory(_0x259783(0x24b),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x259783(0x2b7)](_0x3492ac*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4d5b19):(await cancelOrders(),logHistory(_0x259783(0x24b),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x259783(0x2b7)](_0x3492ac*validateOrderInterval/0xea60)+_0x259783(0x211)+_0x4d5b19))),await unlockOrders();else{if(validateOrdersState==_0x259783(0x1e3)){if(config[_0x259783(0x20d)]!='market')logHistory(_0x259783(0x24b),_0x259783(0x2a7)+_0x4d5b19);await unlockOrders();}}}}}async function cancelOrders(){const _0x2d7b0d=_0x3239f5;lastOrders[_0x2d7b0d(0x1ed)](async _0x202f4e=>{const _0x2f5a9c=_0x2d7b0d;try{const _0x3ca42b=await exchange[_0x2f5a9c(0x1de)](_0x202f4e[_0x2f5a9c(0x194)],_0x202f4e['symbol']);}catch(_0x572602){if(_0x572602[_0x2f5a9c(0x162)]()[_0x2f5a9c(0x1f6)](_0x2f5a9c(0x281))){}else await handleError(_0x572602,_0x2f5a9c(0x176));}});}async function initCoinResults(_0x3928d8){const _0x50296a=_0x3239f5;_0x3928d8?logger[_0x50296a(0x2b3)](_0x50296a(0x202)+_0x3928d8):logger['debug']('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0x23ce98=>{const _0x2f637d=_0x50296a;if(!_0x23ce98[_0x2f637d(0x23f)]&&_0x23ce98[_0x2f637d(0x2ac)]!=config[_0x2f637d(0x11f)]){const _0x5d2dfc=currentCoins['find'](_0x276e01=>_0x276e01[_0x2f637d(0x2ac)]==_0x23ce98[_0x2f637d(0x2ac)]),_0x1a0020=global[_0x2f637d(0x25d)][noslash(_0x23ce98[_0x2f637d(0x1a7)])];let _0x51868b=_0x5d2dfc?_0x5d2dfc[_0x2f637d(0x18d)]:null,_0x92f69=_0x23ce98[_0x2f637d(0x205)]?0x1/_0x1a0020:_0x1a0020,_0x299a7d;config['liquidity'][_0x2f637d(0x1ed)](_0x2ed2e1=>{const _0x48ec99=_0x2f637d;!_0x299a7d&&(_0x299a7d=_0x2ed2e1[_0x48ec99(0x22d)]['find'](_0x2256ae=>_0x2256ae[_0x48ec99(0x2ac)]==_0x23ce98[_0x48ec99(0x2ac)]),_0x299a7d&&(_0x51868b=_0x299a7d[_0x48ec99(0x18d)],_0x92f69=_0x299a7d['price']));});let _0x320d58=dbCoinResults[_0x2f637d(0x246)](_0x2f637d(0x1ce))['find']({'coin':_0x23ce98[_0x2f637d(0x2ac)]})[_0x2f637d(0x1c9)]();if(!_0x320d58){const _0x3937d1={'coin':_0x23ce98['coin'],'number':_0x51868b,'breakeven':_0x92f69,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f637d(0x246)]('coins')['push'](_0x3937d1)[_0x2f637d(0x14c)]();}else{if(_0x3928d8&&_0x23ce98[_0x2f637d(0x2ac)]==_0x3928d8){const _0x2ae4c8={'coin':_0x23ce98['coin'],'number':_0x51868b,'breakeven':_0x92f69,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x2f637d(0x1ce))[_0x2f637d(0x1b0)]({'coin':_0x23ce98['coin']})[_0x2f637d(0x218)](_0x2ae4c8)[_0x2f637d(0x14c)]();}}}});}async function updateCoinResults(_0x492710,_0x1eac2e=![]){const _0x43cf6e=_0x3239f5;let _0x4526ef,_0x16ea93,_0x153747,_0x2cd347,_0xb19bff,_0x2251a7,_0x475ce7=dbCoinResults[_0x43cf6e(0x246)]('coins')[_0x43cf6e(0x1b0)]({'coin':_0x492710[_0x43cf6e(0x2ac)]})['value'](),_0x1e5c46=![];_0x475ce7&&Object[_0x43cf6e(0x22c)](_0x475ce7)[_0x43cf6e(0x1ed)](([_0x71e8,_0x392dc3])=>{if(_0x392dc3==null)_0x1e5c46=!![];});(!_0x475ce7||_0x1e5c46)&&(await initCoinResults(_0x492710['coin']),_0x475ce7=dbCoinResults['get'](_0x43cf6e(0x1ce))[_0x43cf6e(0x1b0)]({'coin':_0x492710[_0x43cf6e(0x2ac)]})[_0x43cf6e(0x1c9)]());_0x492710[_0x43cf6e(0x205)]&&(_0x2251a7={'filled':_0x492710[_0x43cf6e(0x1bd)]*_0x492710['price'],'amount':_0x492710[_0x43cf6e(0x1bd)]*_0x492710[_0x43cf6e(0x16f)],'side':_0x492710['side']==_0x43cf6e(0x23d)?_0x43cf6e(0x1d4):_0x43cf6e(0x23d),'price':0x1/_0x492710[_0x43cf6e(0x16f)]},_0x492710={..._0x492710,..._0x2251a7});_0x1eac2e?_0x16ea93=_0x492710['side']==_0x43cf6e(0x1d4)?_0x475ce7[_0x43cf6e(0x18d)]+_0x492710[_0x43cf6e(0x1bd)]:_0x475ce7[_0x43cf6e(0x18d)]-_0x492710['filled']:_0x16ea93=await getCoinNumber(_0x492710[_0x43cf6e(0x2ac)]);if(_0x492710[_0x43cf6e(0x1e7)]&&_0x492710[_0x43cf6e(0x1e7)][_0x43cf6e(0x1d0)]==config[_0x43cf6e(0x11f)])_0x4526ef=_0x492710[_0x43cf6e(0x1e7)][_0x43cf6e(0x14d)];else{if(_0x492710[_0x43cf6e(0x1e7)]&&_0x492710[_0x43cf6e(0x1e7)][_0x43cf6e(0x1d0)]==_0x43cf6e(0x298)&&!_0x1eac2e)_0x4526ef=_0x492710['fee']['cost']*global[_0x43cf6e(0x25d)][_0x43cf6e(0x298)+config['basecoin']];else _0x4526ef=defaultFee*_0x492710[_0x43cf6e(0x1bd)]*_0x492710[_0x43cf6e(0x16f)];}_0x492710[_0x43cf6e(0x178)]==_0x43cf6e(0x1d4)?(_0x153747=_0x16ea93!=0x0?(_0x475ce7[_0x43cf6e(0x1f3)]*_0x475ce7[_0x43cf6e(0x18d)]+_0x492710['price']*(_0x16ea93-_0x475ce7[_0x43cf6e(0x18d)])+_0x4526ef)/_0x16ea93:0x0,_0x2cd347=_0x475ce7['realized']):(_0x153747=_0x16ea93!=0x0?(_0x475ce7[_0x43cf6e(0x1f3)]*_0x475ce7[_0x43cf6e(0x18d)]-_0x492710['price']*(_0x475ce7[_0x43cf6e(0x18d)]-_0x16ea93)+_0x4526ef)/_0x16ea93:0x0,_0x2cd347=_0x475ce7['realized']+(_0x492710['price']-_0x475ce7[_0x43cf6e(0x1f3)])*_0x492710['filled']);_0xb19bff=(_0x492710['price']-_0x153747-_0x4526ef/_0x492710['filled'])*_0x16ea93;let _0x5a51ff={'coin':_0x492710[_0x43cf6e(0x2ac)],'number':_0x16ea93,'breakeven':formatResult(_0x153747,0x8),'realized':formatResult(_0x2cd347,0x8),'unrealized':formatResult(_0xb19bff,0x8),'fees':formatResult(_0x475ce7['fees']+_0x4526ef,0x8),'sells':_0x492710['side']==_0x43cf6e(0x23d)?_0x475ce7['sells']+0x1:_0x475ce7['sells'],'buys':_0x492710[_0x43cf6e(0x178)]==_0x43cf6e(0x1d4)?_0x475ce7[_0x43cf6e(0x257)]+0x1:_0x475ce7['buys']};dbCoinResults[_0x43cf6e(0x246)](_0x43cf6e(0x1ce))[_0x43cf6e(0x1b0)]({'coin':_0x492710[_0x43cf6e(0x2ac)]})[_0x43cf6e(0x218)](_0x5a51ff)['write']();if(!_0x1eac2e){if(_0x492710[_0x43cf6e(0x1e7)]&&_0x492710['fee']['currency']==_0x43cf6e(0x298)){const _0x462f7d=currentCoins[_0x43cf6e(0x1b0)](_0x3f2246=>_0x3f2246[_0x43cf6e(0x2ac)]=='BNB');if(_0x462f7d){let _0x50a334=dbCoinResults[_0x43cf6e(0x246)](_0x43cf6e(0x1ce))[_0x43cf6e(0x1b0)]({'coin':_0x43cf6e(0x298)})[_0x43cf6e(0x1c9)]();_0x5a51ff={..._0x50a334,'number':_0x462f7d[_0x43cf6e(0x18d)]},dbCoinResults[_0x43cf6e(0x246)]('coins')[_0x43cf6e(0x1b0)]({'coin':_0x43cf6e(0x298)})[_0x43cf6e(0x218)](_0x5a51ff)[_0x43cf6e(0x14c)]();}}}}async function placeOrder(_0x13fb73){const _0xc974fb=_0x3239f5,_0x77f3b8=config['ordertype']==_0xc974fb(0x158)?'market':_0xc974fb(0x168);if(lockOrders==ORDERS[_0xc974fb(0x1cc)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xc974fb(0x29e)],allOrdersPlaced=![],validateOrdersState=_0xc974fb(0x280);let _0x13d116=![];lastOrders=[];for(const _0x54ed3c of _0x13fb73){let _0x3c0b2d,_0x44dd2b,_0x39a177,_0x59ed8f,_0x2e83a2,_0x5d0845=_0x54ed3c[_0xc974fb(0x1a7)];try{const _0x4d544f=await exchange[_0xc974fb(0x1a5)](_0x5d0845);_0x3c0b2d=_0x54ed3c[_0xc974fb(0x205)]?0x1/_0x54ed3c[_0xc974fb(0x1c6)]:_0x54ed3c[_0xc974fb(0x1c6)],_0x44dd2b=_0x4d544f[_0xc974fb(0x16b)],_0x39a177=_0x4d544f[_0xc974fb(0x286)];_0x54ed3c['reverse']?(_0x59ed8f=_0x54ed3c[_0xc974fb(0x178)]=='buy'?_0xc974fb(0x23d):_0xc974fb(0x1d4),_0x2e83a2=Math[_0xc974fb(0x204)](_0x54ed3c[_0xc974fb(0x141)])/_0x3c0b2d):(_0x59ed8f=_0x54ed3c[_0xc974fb(0x178)],_0x2e83a2=Math[_0xc974fb(0x204)](_0x54ed3c[_0xc974fb(0x141)]));_0x77f3b8==_0xc974fb(0x168)&&(config['ordertype']=='limit-high'&&(_0x3c0b2d=_0x59ed8f==_0xc974fb(0x1d4)?_0x44dd2b:_0x39a177),config[_0xc974fb(0x20d)]==_0xc974fb(0x181)&&(_0x3c0b2d=_0x59ed8f==_0xc974fb(0x1d4)?_0x39a177:_0x44dd2b));_0x2e83a2=formatResult(_0x2e83a2,0x8),_0x3c0b2d=formatResult(_0x3c0b2d,0x8);const _0x1f11b4=_0x59ed8f==_0xc974fb(0x23d)?config[_0xc974fb(0x201)]?String[_0xc974fb(0x1be)]('0x'+config[_0xc974fb(0x201)])+'\x20':'':config['emojibuy']?String[_0xc974fb(0x1be)]('0x'+config[_0xc974fb(0x26a)])+'\x20':'',_0x40ecd7=_0x77f3b8==_0xc974fb(0x158)?_0xc974fb(0x21a):config[_0xc974fb(0x20d)]==_0xc974fb(0x143)?_0xc974fb(0x1fa):_0xc974fb(0x193),_0x5d955d=(Math['floor'](Math[_0xc974fb(0x15c)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x5d955d,'symbol':_0x5d0845,'coin':_0x54ed3c[_0xc974fb(0x2ac)],'amount':_0x2e83a2,'price':_0x3c0b2d,'side':_0x59ed8f,'reverse':_0x54ed3c[_0xc974fb(0x205)],'filled':0x0});if(_0x77f3b8==_0xc974fb(0x158))logHistory(_0xc974fb(0x2b1),''+_0x1f11b4+_0x40ecd7+_0xc974fb(0x15e)+_0x5d0845+'\x20'+_0x59ed8f+'\x20#'+formatResult(_0x2e83a2,0x8)+'\x20@'+formatResult(_0x3c0b2d,0x8));else logHistory('order',''+_0x1f11b4+_0x40ecd7+'\x20order:\x20'+_0x5d0845+'\x20'+_0x59ed8f+'\x20#'+formatResult(_0x2e83a2,0x8)+'\x20@'+formatResult(_0x3c0b2d,0x8));let _0x4784fb;_0x77f3b8==_0xc974fb(0x158)?_0x59ed8f==_0xc974fb(0x1d4)&&['Bybit',_0xc974fb(0x128),_0xc974fb(0x1da),_0xc974fb(0x121),_0xc974fb(0x1a0)][_0xc974fb(0x1f6)](config[_0xc974fb(0x243)])?_0x4784fb=await exchange[_0xc974fb(0x1fc)](_0x5d0845,_0x77f3b8,_0x59ed8f,_0x2e83a2,_0x3c0b2d):_0x4784fb=await exchange[_0xc974fb(0x1fc)](_0x5d0845,_0x77f3b8,_0x59ed8f,_0x2e83a2,undefined):_0x4784fb=await exchange['createOrder'](_0x5d0845,_0x77f3b8,_0x59ed8f,_0x2e83a2,_0x3c0b2d);logger['debug'](_0xc974fb(0x186)+_0x4784fb['id']+_0xc974fb(0x233)+_0x5d955d);const _0x85d17=lastOrders[_0xc974fb(0x2a2)]-0x1;if(_0x85d17>=0x0&&lastOrders[_0x85d17][_0xc974fb(0x1d2)]==_0x5d955d){lastOrders[_0x85d17][_0xc974fb(0x194)]=_0x4784fb['id'];if(_0x4784fb[_0xc974fb(0x167)])lastOrders[_0x85d17][_0xc974fb(0x167)]=_0x4784fb[_0xc974fb(0x167)];if(_0x4784fb[_0xc974fb(0x16f)])lastOrders[_0x85d17]['price']=_0x4784fb[_0xc974fb(0x16f)];lastOrders[_0x85d17][_0xc974fb(0x1e7)]=_0x4784fb[_0xc974fb(0x1e7)];}if(config['cooldown']!=0x0){let _0x356e5a=null;if(cooldownTracker[_0xc974fb(0x2a2)]==config[_0xc974fb(0x220)]-0x1)_0x356e5a=cooldownTracker[_0xc974fb(0x1d3)]();const _0x4b4d3b=getTimeStamp();cooldownTracker['push'](_0x4b4d3b);if(_0x356e5a){const _0x5c6703=fns[_0xc974fb(0x164)](new Date(_0x4b4d3b),new Date(_0x356e5a));if(_0x5c6703<cooldownInterval){logHistory('error',_0xc974fb(0x232)+config[_0xc974fb(0x220)]+_0xc974fb(0x292)+cooldownInterval/0x3c+_0xc974fb(0x180)+cooldownPeriod/(0xe10*0x3e8)+_0xc974fb(0x1c5)),coolingDown=!![];break;}}}}catch(_0x644086){if(_0x644086[_0xc974fb(0x162)]()[_0xc974fb(0x1f6)](_0xc974fb(0x179)))lastOrders=lastOrders[_0xc974fb(0x26c)](_0x5ac338=>_0x5ac338[_0xc974fb(0x1a7)]!=_0x5d0845),logHistory(_0xc974fb(0x122),_0xc974fb(0x156)+_0x5d0845),_0x13d116=!![];else{if(_0x644086[_0xc974fb(0x162)]()[_0xc974fb(0x1f6)]('Invalid\x20quantity'))lastOrders=lastOrders[_0xc974fb(0x26c)](_0x4cf370=>_0x4cf370[_0xc974fb(0x1a7)]!=_0x5d0845),logHistory(_0xc974fb(0x122),_0xc974fb(0x21d)+_0x5d0845),_0x13d116=!![];else{if(_0x644086[_0xc974fb(0x162)]()[_0xc974fb(0x1f6)]('InvalidOrder'))lastOrders=lastOrders[_0xc974fb(0x26c)](_0x1ea646=>_0x1ea646[_0xc974fb(0x1a7)]!=_0x5d0845),logHistory(_0xc974fb(0x122),_0xc974fb(0x1ec)+_0x5d0845),logger[_0xc974fb(0x2b3)](_0x644086),_0x13d116=!![];else _0x644086[_0xc974fb(0x162)]()['includes'](_0xc974fb(0x20f))?(lastOrders=lastOrders['filter'](_0x3179bd=>_0x3179bd[_0xc974fb(0x1a7)]!=_0x5d0845),logHistory(_0xc974fb(0x122),_0xc974fb(0x156)+_0x5d0845),_0x13d116=!![]):(lastOrders=lastOrders[_0xc974fb(0x26c)](_0x2742ed=>_0x2742ed[_0xc974fb(0x1a7)]!=_0x5d0845),await handleError(_0x644086,_0xc974fb(0x145),_0x5d0845));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xc974fb(0x2a2)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5a203d=config['ordertype']==_0xc974fb(0x158)?validateOrderTimeout*0x3c*0x3e8:config[_0xc974fb(0x271)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b526b=_0xc974fb;validateOrders(_0x1b526b(0x1f4));},_0x5a203d);}else unlockOrders();_0x13d116&&config[_0xc974fb(0x2ae)]&&(logHistory(_0xc974fb(0x122),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0xc974fb(0x122),_0xc974fb(0x27c));else lockOrders!=ORDERS[_0xc974fb(0x1cc)]&&(!config[_0xc974fb(0x2ae)]&&(config[_0xc974fb(0x20d)]=='market'?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xc974fb(0x122),_0xc974fb(0x228))));}}function persistOpenOrders(_0x30446e){const _0x3176b0=_0x3239f5,_0x15fab9={...config,'openOrders':_0x30446e};let _0x32fc66=dbConfig[_0x3176b0(0x246)](_0x3176b0(0x249))[_0x3176b0(0x1b0)]({'botID':botID})[_0x3176b0(0x1c9)]();_0x32fc66&&dbConfig[_0x3176b0(0x246)]('bot')[_0x3176b0(0x1b0)]({'botID':botID})[_0x3176b0(0x218)](_0x15fab9)[_0x3176b0(0x14c)]();}function restoreOrders(){const _0x36deb0=_0x3239f5;let _0x1105dc;config[_0x36deb0(0x13a)]&&allOpenOrders[_0x36deb0(0x1ed)](_0x47b160=>{const _0x2bc839=_0x36deb0,_0x39f3f8=config[_0x2bc839(0x13a)][_0x2bc839(0x1b0)](_0x20e9e1=>_0x20e9e1['orderId']==_0x47b160['id']);_0x39f3f8&&(lastOrders[_0x2bc839(0x18c)](_0x39f3f8),_0x1105dc=_0x47b160['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x36deb0(0x17d),allOrdersPlaced=!![];const _0x4ecf6d=new Date()[_0x36deb0(0x148)](),_0x357ff6=config[_0x36deb0(0x20d)]==_0x36deb0(0x158)?validateOrderTimeout*0x3c*0x3e8:config[_0x36deb0(0x271)]*0x3c*0x3e8;if(_0x1105dc+_0x357ff6>_0x4ecf6d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3ed533=_0x36deb0;validateOrders(_0x3ed533(0x1f4));},_0x1105dc+_0x357ff6-_0x4ecf6d);}else validateOrders(_0x36deb0(0x1f4));}}async function sendMetricsTelegram(){const _0x4f174a=_0x3239f5;if(!coinsLoaded){process[_0x4f174a(0x1e6)]({'telegrammsg':_0x4f174a(0x12b)},_0x43500=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5f0a3b='';if(config[_0x4f174a(0x2a3)])_0x5f0a3b=_0x4f174a(0x27f)+config[_0x4f174a(0x2ab)]+_0x4f174a(0x17f);else _0x5f0a3b=_0x4f174a(0x19b)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1e8f8a=getKPIs(_0x4f174a(0x11f)),_0x552bf1=getKPIs('fiat',config[_0x4f174a(0x18f)]),_0x112e1d=getKPIs(_0x4f174a(0x1d1)),_0x238f9d=getKPIs('net-fiat',config[_0x4f174a(0x18f)]);_0x5f0a3b+='<pre>',_0x5f0a3b+=_0x1e8f8a[_0x4f174a(0x247)]+'\x20:\x20'+_0x1e8f8a[_0x4f174a(0x1c9)]+'\x0a',_0x5f0a3b+=_0x1e8f8a[_0x4f174a(0x28a)]+':\x20'+_0x1e8f8a[_0x4f174a(0x22f)]+'%\x0a',_0x5f0a3b+=_0x552bf1[_0x4f174a(0x247)]+_0x4f174a(0x2a9)+_0x552bf1[_0x4f174a(0x1c9)]+'\x0a',_0x5f0a3b+=_0x552bf1[_0x4f174a(0x28a)]+':\x20'+_0x552bf1[_0x4f174a(0x22f)]+'%\x0a',_0x5f0a3b+=_0x112e1d[_0x4f174a(0x247)]+':\x20'+_0x112e1d[_0x4f174a(0x1c9)]+'\x20('+config[_0x4f174a(0x11f)]+')\x0a',_0x5f0a3b+=_0x112e1d[_0x4f174a(0x28a)]+':\x20'+_0x112e1d[_0x4f174a(0x22f)]+_0x4f174a(0x2aa)+config[_0x4f174a(0x11f)]+')\x0a',_0x5f0a3b+=_0x238f9d[_0x4f174a(0x247)]+':\x20'+_0x238f9d[_0x4f174a(0x1c9)]+'\x20('+config[_0x4f174a(0x18f)]+')\x0a',_0x5f0a3b+=_0x238f9d[_0x4f174a(0x28a)]+':\x20'+_0x238f9d[_0x4f174a(0x22f)]+_0x4f174a(0x2aa)+config[_0x4f174a(0x18f)]+')\x0a',_0x5f0a3b+=_0x4f174a(0x136),process[_0x4f174a(0x1e6)]({'telegrammsg':_0x5f0a3b},_0x52fd4f=>{});}async function sendPortfolioTelegram(){const _0x36f573=_0x3239f5;if(!coinsLoaded){process[_0x36f573(0x1e6)]({'telegrammsg':_0x36f573(0x12b)},_0x5e1c89=>{});return;}let _0x4e383a='';if(config[_0x36f573(0x2a3)])_0x4e383a=_0x36f573(0x27f)+config[_0x36f573(0x2ab)]+_0x36f573(0x29f);else _0x4e383a='<b>Bot\x20'+botID+_0x36f573(0x29f);_0x4e383a+='<pre>',_0x4e383a+=_0x36f573(0x151),_0x4e383a+=_0x36f573(0x24a),_0x4e383a+=_0x36f573(0x151),currentCoins[_0x36f573(0x1ed)](_0x550e97=>{const _0x3d805f=_0x36f573;_0x4e383a+=_0x550e97[_0x3d805f(0x2ac)][_0x3d805f(0x259)](0x7)+'|\x20'+formatPad(_0x550e97['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x550e97[_0x3d805f(0x137)],0x2,0x6)+'|\x20'+formatPad(_0x550e97[_0x3d805f(0x25b)]*0x64,0x2,0x6)+'\x0a';}),_0x4e383a+=_0x36f573(0x136),process[_0x36f573(0x1e6)]({'telegrammsg':_0x4e383a},_0x5cdde0=>{});}function formatPad(_0x4f7ba2,_0x43c87b,_0x288115){const _0x32eb9e=_0x3239f5,_0x5bc3da=formatResultString(_0x4f7ba2,_0x43c87b);return _0x5bc3da?_0x5bc3da[_0x32eb9e(0x273)](_0x288115):''[_0x32eb9e(0x273)](_0x288115);}function logHistory(_0x1faf64,_0x274b7f,_0x3edfce=''){const _0x41ce38=_0x3239f5;logger['full'](''+_0x274b7f);let _0x2c1d9b={'time':getTimeStamp(),'type':_0x1faf64,'event':_0x274b7f};dbLogs[_0x41ce38(0x246)](_0x41ce38(0x25a))[_0x41ce38(0x18c)](_0x2c1d9b)[_0x41ce38(0x14c)]();if(_0x3edfce=='')_0x3edfce=_0x274b7f;proxyEmit('event',{'log':_0x2c1d9b,'summary':_0x3edfce}),process['send']({'telegram':{..._0x2c1d9b,'botname':config[_0x41ce38(0x2ab)],'showname':config[_0x41ce38(0x2a3)]}},_0x4c3223=>{});}function emitHistory(_0x1d7206={}){const _0x37222b=_0x3239f5;Object[_0x37222b(0x1c4)](_0x1d7206)['length']==0x0&&(_0x1d7206={'type':[_0x37222b(0x2b1),_0x37222b(0x213)],'event':'','page':0x1});if(_0x1d7206['type'][_0x37222b(0x1f6)]('event'))_0x1d7206[_0x37222b(0x1c8)]['splice'](_0x1d7206[_0x37222b(0x1c8)]['indexOf']('event'),0x1,_0x37222b(0x122),'warning',_0x37222b(0x24b));if(dbLogs[_0x37222b(0x1ca)](_0x37222b(0x25a))[_0x37222b(0x1c9)]()){let _0x55539b=dbLogs[_0x37222b(0x246)](_0x37222b(0x25a))[_0x37222b(0x26c)](_0xffcc43=>{const _0x2993c2=_0x37222b;if(_0x1d7206['type']['length']==0x0)return![];else return _0x1d7206[_0x2993c2(0x1c8)]['includes'](_0xffcc43[_0x2993c2(0x1c8)]);})[_0x37222b(0x26c)](_0x1512e0=>{const _0xf98a06=_0x37222b;if(_0x1d7206['event']=='')return!![];else return _0x1512e0[_0xf98a06(0x213)][_0xf98a06(0x23a)]()[_0xf98a06(0x1f6)](_0x1d7206['event'][_0xf98a06(0x23a)]());})['sortBy']('time'),_0x596d47=_0x55539b[_0x37222b(0x1c9)]()['length'];_0x55539b=_0x55539b['reverse']()[_0x37222b(0x295)]((_0x1d7206[_0x37222b(0x20e)]-0x1)*logPageSize,_0x1d7206[_0x37222b(0x20e)]*logPageSize-0x1)['reverse']()[_0x37222b(0x1c9)](),proxyEmit(_0x37222b(0x152),{'logs':_0x55539b,'total':_0x596d47});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x44d4a1){const _0x3140b6=_0x3239f5;if(dbLogs[_0x3140b6(0x1ca)](_0x3140b6(0x25a))['value']()){const _0x21bea9=dbLogs['get'](_0x3140b6(0x25a))[_0x3140b6(0x23e)](_0x3140b6(0x234))[_0x3140b6(0x26c)](_0x4b0dcf=>{const _0x5cd9a6=_0x3140b6;return _0x4b0dcf[_0x5cd9a6(0x1c8)]==_0x5cd9a6(0x2b1);})[_0x3140b6(0x1c9)]();dbLogs[_0x3140b6(0x246)](_0x3140b6(0x25a))[_0x3140b6(0x23c)]()[_0x3140b6(0x14c)](),dbLogs[_0x3140b6(0x246)](_0x3140b6(0x25a))['assign'](_0x21bea9)[_0x3140b6(0x14c)](),emitHistory(_0x44d4a1);}}async function pauseBot(){const _0x3a4be4=_0x3239f5,_0x3666e7=new Date()[_0x3a4be4(0x148)]();if(!lastErrorShown||_0x3666e7-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3666e7;!lastBotPause?(lastBotPause=_0x3666e7,consecutivePauses=0x1):(_0x3666e7-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3a4be4(0x1e6)]({'stop':_0x3a4be4(0x21b)},_0x1d65bb=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3a4be4(0x148)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1cee63=_0x3239f5;botPaused=!![],await sleep(0x3e8),process[_0x1cee63(0x1e6)]({'stop':_0x1cee63(0x293)},_0x54243e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3151ff,_0x4c1cfa){const _0x1c678f=_0x3239f5;if(botPaused)return;const _0x1c6207=config[_0x1c678f(0x243)]||_0x1c678f(0x184);if(_0x4c1cfa)logger[_0x1c678f(0x2b3)](_0x1c678f(0x1b5)+_0x4c1cfa);const _0x2af82b=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x3151ff[_0x1c678f(0x162)]()[_0x1c678f(0x1f6)]('API-key\x20format\x20invalid'))logHistory(_0x1c678f(0x122),_0x1c6207+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x2af82b();else{if(_0x3151ff[_0x1c678f(0x162)]()[_0x1c678f(0x1f6)](_0x1c678f(0x1d9)))logHistory(_0x1c678f(0x122),_0x1c6207+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x2af82b();else _0x3151ff[_0x1c678f(0x162)]()['includes'](_0x1c678f(0x1e4))?(logHistory(_0x1c678f(0x122),_0x1c6207+_0x1c678f(0x15d)),logHistory(_0x1c678f(0x122),_0x1c678f(0x2b4)),_0x2af82b()):await handleError(_0x3151ff,null);}}async function handleError(_0x3a56e3,_0x4936a8,_0x3e50d4=''){const _0x256911=_0x3239f5;if(botPaused)return;const _0x2f15f1=config[_0x256911(0x243)]||_0x256911(0x184);if(_0x4936a8)logger[_0x256911(0x2b3)](_0x256911(0x1b5)+_0x4936a8);if(_0x3a56e3[_0x256911(0x162)]()['includes'](_0x256911(0x1ef))||_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x25e)))logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x1f9)+pauseBotMsg),await pauseBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x1dc))||_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x255)))logHistory('error',_0x2f15f1+_0x256911(0x2a4)+pauseBotMsg),await pauseBot();else{if(_0x3a56e3[_0x256911(0x162)]()['includes'](_0x256911(0x260)))logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x19d)+pauseBotMsg),await pauseBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x1c0)))logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x14b)+pauseBotMsg),await pauseBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x294)))logHistory(_0x256911(0x122),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x256911(0x122),_0x256911(0x2a6)),await killBot();else{if(_0x3a56e3['toString']()[_0x256911(0x1f6)]('InvalidNonce'))logHistory(_0x256911(0x122),_0x256911(0x182)),logHistory(_0x256911(0x122),_0x256911(0x2a6)),await killBot();else{if(_0x3a56e3 instanceof ccxt['NetworkError'])logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x244)+pauseBotMsg),logger[_0x256911(0x2b3)](_0x256911(0x266),_0x3a56e3),await pauseBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x187)))logHistory(_0x256911(0x122),_0x2f15f1+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x256911(0x122),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x1d9)))logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x1a2)),logHistory(_0x256911(0x122),_0x256911(0x2a6)),await killBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x1e4)))logHistory('error',_0x2f15f1+_0x256911(0x262)),logHistory(_0x256911(0x122),_0x256911(0x2a6)),await killBot();else{if(_0x3a56e3[_0x256911(0x162)]()[_0x256911(0x1f6)](_0x256911(0x1a6)))logHistory('error',_0x2f15f1+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x256911(0x122),_0x256911(0x2a6)),await killBot();else{if(_0x3a56e3['toString']()[_0x256911(0x1f6)](_0x256911(0x17e)))logHistory('error',_0x256911(0x276)+_0x3e50d4);else _0x3a56e3 instanceof ccxt[_0x256911(0x142)]?(logHistory(_0x256911(0x122),_0x2f15f1+_0x256911(0x169)),logger[_0x256911(0x2b3)]('Error\x20details:',_0x3a56e3)):(logHistory(_0x256911(0x122),_0x256911(0x26e)+pauseBotMsg),logger['debug'](_0x256911(0x266),_0x3a56e3),await pauseBot());}}}}}}}}}}}}function formatResult(_0x38aba7,_0x14bdbe){const _0x1a33ea=_0x3239f5;return parseFloat(_0x38aba7[_0x1a33ea(0x285)](_0x14bdbe));}function formatResultTruncate(_0x63202c,_0xf4ab52){const _0x300204=_0x3239f5;let _0xbf6512=formatResultString(_0x63202c,0xa),_0x17389e=_0xbf6512[_0x300204(0x24e)]('.');return _0x17389e!=-0x1&&(_0xbf6512=_0xbf6512[_0x300204(0x295)](0x0,_0x17389e+_0xf4ab52+0x1)),Number(_0xbf6512);}function formatResultString(_0x4a313e,_0x50ee98){const _0x2cc9e5=_0x3239f5;let _0x288527;if(!(''+_0x4a313e)[_0x2cc9e5(0x1f6)]('e'))_0x288527=+(Math[_0x2cc9e5(0x2b7)](_0x4a313e+'e+'+_0x50ee98)+'e-'+_0x50ee98);else{let _0x2596f9=(''+_0x4a313e)[_0x2cc9e5(0x195)]('e'),_0x5d79ba='';+_0x2596f9[0x1]+_0x50ee98>0x0&&(_0x5d79ba='+'),_0x288527=+(Math[_0x2cc9e5(0x2b7)](+_0x2596f9[0x0]+'e'+_0x5d79ba+(+_0x2596f9[0x1]+_0x50ee98))+'e-'+_0x50ee98);}return Number(_0x288527)[_0x2cc9e5(0x285)](_0x50ee98);}function getServerTime(){const _0xf482a2=_0x3239f5,_0xbfb96b=new Date();return _0xbfb96b[_0xf482a2(0x19a)]()+'/'+(_0xbfb96b[_0xf482a2(0x11c)]()+0x1)['toString']()[_0xf482a2(0x273)](0x2,'0')+'/'+_0xbfb96b[_0xf482a2(0x175)]()[_0xf482a2(0x162)]()[_0xf482a2(0x273)](0x2,'0')+'\x20'+_0xbfb96b[_0xf482a2(0x212)]()['toString']()[_0xf482a2(0x273)](0x2,'0')+':'+_0xbfb96b['getMinutes']()[_0xf482a2(0x162)]()[_0xf482a2(0x273)](0x2,'0')+':'+_0xbfb96b[_0xf482a2(0x1b3)]()[_0xf482a2(0x162)]()[_0xf482a2(0x273)](0x2,'0');}function _0xec32(){const _0x34d1be=['forEach','\x20|\x20','DDoSProtection','startdate','getPortfolio(1)','progress','breakeven','final','balances','includes','RSA-OAEP','sendMetricsTelegram','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Limit\x20(high-margin)','8zZiDPh','createOrder','none','BTC','Transaction\x20detection\x20blocked','1\x20-\x20FILLED\x20known\x20order:\x20','emojisell','Resetting\x20coin\x20results:\x20','string','abs','reverse','onepagemode','add','getCoins()','6950580hXclKx','Invalid\x20API\x20key\x20or\x20secret\x20entered','getOpenOrders()','isEqual','ordertype','page','must\x20be\x20greater\x20than\x20minimum\x20amount','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20minutes\x20-\x20','getHours','event','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','recreateCoinResults()','Error:\x20Invalid\x20argument\x20','milliseconds','assign','./config/','Market','restart','Waited\x20','Order\x20amount\x20is\x20invalid:\x20','\x20/\x20','function','cooldown','decrypt','splice','args','2\x20-\x20Validate\x20orders:\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','initTickers()','existsSync','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Cryptocom','\x20|\x20exchange:\x20','/USD','entries','changes','replace','change','datetime','password','Executed\x20','\x20|\x20Custom\x20ID:\x20','time','bb-settings.json','Pausing\x20for\x20','startnumber','recent20','Fee\x20discount\x20refund\x20detected:\x20','toLowerCase','cancel','remove','sell','sortBy','excluded','-performance.json','watchOrders','netoffset','exchange','\x20network\x20error','unlinkSync','get','leftTxt','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bot','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','success','remainingSymbols','ORDERS.UNLOCKED','indexOf','exec','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','USDC','USD','Binance','storeHeadless','OnMaintenance','autoliquidity','buys','createWriteStream','padEnd','logs','delta','\x20>\x20','ticker','RateLimitExceeded','spot','RequestTimeout','parse','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','TUSD','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','message','Error\x20details:','2.3.5','privateKey','liquidity','emojibuy','/backup/','filter','001','Unknown\x20error\x20occured','apiSecret','max','timeout','limits','padStart','loadSymbols()','\x20>\x20[DEBUG]\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','date-fns','open','close','orderstatus','EUR','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20minutes','Error\x20while\x20deleting\x20files:\x20','<b>','initial','OrderNotFound','Invalid\x20symbol:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Executing\x20exchange\x20reload','toFixed','ask','USDP','1\x20-\x20Validate\x20orders:\x20','***','rightTxt','Loading\x20completed','util','Saving\x20configuration','fetchOpenOrders',':\x20timer\x20>','getPortfolio','1\x20-\x20Unlock\x20orders','\x20orders\x20in\x20less\x20than\x20','kill','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','slice','loadMarkets','coin-loading-progress','BNB','amountToPrecision','deleteHistoryAlerts','BUSD','1\x20-\x20FILLED\x20unknown\x20order:\x20','added','LOCKED','\x20portfolio:</b>\x20\x0a\x0a','watchTransactions()','min','length','showname','\x20not\x20available','settings','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','No\x20more\x20open\x20orders\x20-\x20','watchOrders()','\x20:\x20','%\x20(','botname','coin','startsWith','headless','Headless:\x20','red_yellow_blue','order','yyyy/MM/dd','debug','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Failed\x20to\x20load\x20coin\x20data\x20for\x20','active','round','\x20change','toUpperCase','getMinutes','watchTrades','starting-balance-','getMonth','fetchBalance','writeFile','basecoin','-events.json','Huobi','error','stringify','fetchClosedOrders','valid','/output-000.log','Order\x20filled:\x20','Bitget','4847712KXcCgv','1255978MnNJMZ','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','2.6.0','************','usd','getPortfolio(0)','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','./logs/','initclient','full','uncaughtException','test','</pre>','target','enabled','basecoinvalue','openOrders','Net\x20effect','16Vfzyut','294396xvejNQ','status','\x20|\x20highest\x20fee:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','trade','ExchangeError','limit-high','argv','placeOrder()','ETH','sha256','getTime','running','Trigger:\x20','\x20closed\x20the\x20connection','write','cost','ORDERS.LOCKED','threshold','change24h','-------------------------------\x0a','event-history','portfolio',':\x20Bot\x20','total','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','parseISO','market','map','sendPortfolioTelegram','Uncaught\x20Exception:','random','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20order:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','exchanges','loading-canceled','toString','ORDERS.UNLOCKING','differenceInSeconds','search','11532OExoQV','amount','limit','\x20exchange\x20error','(((.+)+)+)+$','bid','format','configuration-stored','eur','price','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Portfolio\x20change\x20detected:\x20','5467567hXxuuQ','recreate','exchange\x20reloaded','getDate','cancelOrders()','1\x20-\x20Handle\x20open\x20orders','side','MIN_NOTIONAL',',\x20must\x20be\x20a\x203\x20digit\x20number','colorscheme','bb-secure.json','ongoing','InsufficientFunds','\x20metrics:</b>\x20\x0a\x0a','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','limit-low','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','270BQqCcD','Exchange','version','ID:\x20','API-key\x20format\x20invalid','distribution','join','performance','balancing\x20resumed','push','number','UNLOCKING','fiat','Manual\x20balancing\x20required','bot-','7578rMSdZm','Limit\x20(low-margin)','orderId','split','1HXhRTc','log','Resetting\x20bot\x20history','cloneDeep','getFullYear','<b>Bot\x20','cancelLoading','\x20not\x20responding','toggleBotMode','./version.json','Huobipro','defaults','\x20API\x20secret\x20is\x20invalid','average','\x20-\x20pausing\x20bot\x20for\x20','fetchTicker','PermissionDenied','symbol','yyyy-MM-dd\x27T\x27HH:mm:ss','sort','getCoinNumber()','offset','warning','substring','apiKey','stopExchange()','find','storeFiat','removed','getSeconds','USDT','Exception\x20thrown\x20in\x20','closed','2.5.0','fetchTickers','secure','timeshift','apiPassword','2\x20-\x20Orders\x20unlocked','filled','fromCodePoint','highest','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','pro','configuration','set','keys','\x20hour','last','storeConfiguration','type','value','has','Crypt','UNLOCKED','data','coins','net-fiat','currency','net-basecoin','customId','shift','buy','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','canceled','143wszUUx','recovery','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Cex','\x20|\x20lock\x20orders:\x20','ExchangeNotAvailable','Reset\x20|\x20','cancelOrder','-results.json','starting-balances','ccxt','percentage','no\x20open\x20orders','AuthenticationError','mkdirSync','send','fee','date','Net\x20','getPortfolio(2)','BNB/','Order\x20is\x20invalid:\x20'];_0xec32=function(){return _0x34d1be;};return _0xec32();}function getTimeStamp(){const _0x2a9812=_0x3239f5,_0x1d7015=shiftedTime();return _0x1d7015[_0x2a9812(0x19a)]()+'/'+(_0x1d7015[_0x2a9812(0x11c)]()+0x1)['toString']()[_0x2a9812(0x273)](0x2,'0')+'/'+_0x1d7015[_0x2a9812(0x175)]()[_0x2a9812(0x162)]()[_0x2a9812(0x273)](0x2,'0')+'\x20'+_0x1d7015[_0x2a9812(0x212)]()[_0x2a9812(0x162)]()['padStart'](0x2,'0')+':'+_0x1d7015[_0x2a9812(0x119)]()[_0x2a9812(0x162)]()[_0x2a9812(0x273)](0x2,'0')+':'+_0x1d7015['getSeconds']()[_0x2a9812(0x162)]()[_0x2a9812(0x273)](0x2,'0');}function getDate(){const _0x142e00=_0x3239f5,_0x70f4a2=shiftedTime();return _0x70f4a2['getFullYear']()+'/'+(_0x70f4a2[_0x142e00(0x11c)]()+0x1)[_0x142e00(0x162)]()['padStart'](0x2,'0')+'/'+_0x70f4a2[_0x142e00(0x175)]()[_0x142e00(0x162)]()[_0x142e00(0x273)](0x2,'0');}function getHour(){const _0x2e769a=_0x3239f5,_0xb2d8b0=shiftedTime();return _0xb2d8b0[_0x2e769a(0x212)]()['toString']()[_0x2e769a(0x273)](0x2,'0');}function sleep(_0x387607){return new Promise(_0x43e932=>setTimeout(_0x43e932,_0x387607));}function shiftedTime(){const _0x22ca96=_0x3239f5,_0x570ef1=new Date();let _0x2dcbd1=_0x570ef1;if(config&&config[_0x22ca96(0x1ba)]!==0x0)_0x2dcbd1=fns[_0x22ca96(0x207)](_0x570ef1,{'hours':config[_0x22ca96(0x1ba)]});return _0x2dcbd1;}function timer(_0xb8cf77){const _0xc6ab27=_0x3239f5,_0x19be89=new Date();!lasttime?console[_0xc6ab27(0x197)](getTimeStamp()+_0xc6ab27(0x28f),_0xb8cf77,_0x19be89):console[_0xc6ab27(0x197)](getTimeStamp()+_0xc6ab27(0x28f),_0xb8cf77,(_0x19be89-lasttime)/0x3e8),lasttime=_0x19be89;}