const _0x23b51d=_0x2ef6;(function(_0x78d1ae,_0x261380){const _0x42c53e=_0x2ef6,_0x46f103=_0x78d1ae();while(!![]){try{const _0x1524d7=-parseInt(_0x42c53e(0x257))/0x1+parseInt(_0x42c53e(0x223))/0x2*(parseInt(_0x42c53e(0x224))/0x3)+-parseInt(_0x42c53e(0x24c))/0x4*(-parseInt(_0x42c53e(0x1e7))/0x5)+-parseInt(_0x42c53e(0x1db))/0x6*(-parseInt(_0x42c53e(0x1c9))/0x7)+parseInt(_0x42c53e(0x27e))/0x8*(parseInt(_0x42c53e(0x1a5))/0x9)+parseInt(_0x42c53e(0x1d5))/0xa*(-parseInt(_0x42c53e(0x282))/0xb)+parseInt(_0x42c53e(0x181))/0xc*(-parseInt(_0x42c53e(0x1c3))/0xd);if(_0x1524d7===_0x261380)break;else _0x46f103['push'](_0x46f103['shift']());}catch(_0x13952c){_0x46f103['push'](_0x46f103['shift']());}}}(_0x48c3,0x48cbe));const _0x219387=function(){let _0x5918b1=!![];return function(_0x33cec8,_0xd40790){const _0x520d6b=_0x5918b1?function(){if(_0xd40790){const _0x44c8e5=_0xd40790['apply'](_0x33cec8,arguments);return _0xd40790=null,_0x44c8e5;}}:function(){};return _0x5918b1=![],_0x520d6b;};}(),_0x5a9e1c=_0x219387(this,function(){const _0x230247=_0x2ef6;return _0x5a9e1c[_0x230247(0x189)]()['search'](_0x230247(0x1d9))[_0x230247(0x189)]()[_0x230247(0x194)](_0x5a9e1c)[_0x230247(0x24d)](_0x230247(0x1d9));});_0x5a9e1c();'use strict';const ccxt=require(_0x23b51d(0x249)),low=require(_0x23b51d(0x164)),FileSync=require(_0x23b51d(0x242)),fs=require('fs'),fns=require(_0x23b51d(0x267)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x23b51d(0x243)),Crypt=require(_0x23b51d(0x1fd))[_0x23b51d(0x16d)];let exchange,wsClient;global[_0x23b51d(0x17e)]={},global[_0x23b51d(0x253)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x23b51d(0x19a),_0x23b51d(0x20d),_0x23b51d(0x177),_0x23b51d(0x238),_0x23b51d(0x1a2),'YOYOW/'];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x23b51d(0x182)],botID=process[_0x23b51d(0x240)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x23b51d(0x202)](botID)&&(console[_0x23b51d(0x195)](_0x23b51d(0x1b8)+botID+_0x23b51d(0x26c)),process['exit'](0x1));const userID=process['argv'][0x3]||'',configpath=userID?_0x23b51d(0x1a9)+userID+'/':_0x23b51d(0x1a9);!fs[_0x23b51d(0x190)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x23b51d(0x272)+botID+_0x23b51d(0x21b),performancefile=configpath+_0x23b51d(0x272)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x23b51d(0x187),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x23b51d(0x18f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x23b51d(0x221)]({'logs':[]})[_0x23b51d(0x279)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x23b51d(0x221)]({'data':[]})[_0x23b51d(0x279)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x23b51d(0x279)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x23b51d(0x221)]({'coins':[]})[_0x23b51d(0x279)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x578d8f)=>{},'debug':(..._0x521736)=>{},'notice':(..._0x22e9af)=>{},'info':(..._0x1cac5f)=>{},'warning':(..._0x29f6cf)=>{},'error':async function(..._0x1c6470){const _0xac3408=_0x23b51d,_0x125f47=new Date()[_0xac3408(0x1f5)]();if(!lastErrorShown||_0x125f47-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0xac3408(0x1f5)]();let _0xcb7087='';if(_0x1c6470[0x0])_0xcb7087+=_0x1c6470[0x0];if(_0x1c6470[0x1]&&_0x1c6470[0x1][_0xac3408(0x1ce)]&&_0x1c6470[0x1][_0xac3408(0x1ce)][_0xac3408(0x268)])_0xcb7087+=_0xac3408(0x20f)+_0x1c6470[0x1]['error']['message'];logging('WebSockets('+consecutivePauses+_0xac3408(0x1f7),''+_0xcb7087),await pauseBot(_0xac3408(0x1a6));}}},crypt=new Crypt({'md':_0x23b51d(0x1f9),'rsaStandard':_0x23b51d(0x1b2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x23b51d(0x1be)]!=config['timeshift']&&updateTimeshift(settings[_0x23b51d(0x1be)]);process[_0x23b51d(0x1f3)]({'started':_0x23b51d(0x167)},_0x1206aa=>{}),initializeProcessListeners();function proxyEmit(_0x5a2a6c,_0x18b3e9=null){process['send']({'function':_0x5a2a6c,'args':_0x18b3e9},_0x2041ed=>{});}function initializeProcessListeners(){const _0x2bf460=_0x23b51d;process['on'](_0x2bf460(0x268),_0x2b3677=>{const _0x1b9bd8=_0x2bf460;switch(Object[_0x1b9bd8(0x22c)](_0x2b3677)[0x0]){case _0x1b9bd8(0x1be):_0x2b3677['timeshift']!=undefined&&(settings[_0x1b9bd8(0x1be)]=_0x2b3677[_0x1b9bd8(0x1be)],updateTimeshift(settings[_0x1b9bd8(0x1be)]));break;case _0x1b9bd8(0x1a1):switch(_0x2b3677['function']){case _0x1b9bd8(0x1aa):initclient();break;case _0x1b9bd8(0x1d1):toggleBotMode();break;case _0x1b9bd8(0x170):emitHistory(_0x2b3677[_0x1b9bd8(0x21e)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x2b3677['args']);break;case _0x1b9bd8(0x1e8):getPortfolio(_0x2b3677['args']);break;case _0x1b9bd8(0x15f):storeConfiguration(_0x2b3677[_0x1b9bd8(0x21e)]);break;case _0x1b9bd8(0x1a0):storeHeadless(_0x2b3677[_0x1b9bd8(0x21e)]);break;case _0x1b9bd8(0x25f):getStartingBalances(getNormalizedPerformance());break;case _0x1b9bd8(0x157):placeOrder(_0x2b3677[_0x1b9bd8(0x21e)]);break;case _0x1b9bd8(0x1ff):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xa30b5c=_0x23b51d;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0xa30b5c(0x17b)],config[_0xa30b5c(0x19f)]),await initWsEvents();let _0x476ba8=await loadSymbols();if(_0x476ba8){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0xa30b5c(0x1e2)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x5b7c32,_0x185663){const _0x3df562=_0x23b51d,_0x2cbf02=ccxt[config['exchange']];let _0x2625cb;switch(config['exchange']){case _0x3df562(0x243):_0x2625cb=_0x3df562(0x214);break;case _0x3df562(0x266):_0x2625cb=_0x3df562(0x276);break;default:_0x2625cb=_0x3df562(0x214);}exchange=new _0x2cbf02({'apiKey':_0x5b7c32,'secret':_0x185663,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5b7c32,'api_secret':_0x185663,'beautify':!![],'wsUrl':_0x2625cb},logger);let _0x2d19a9=config[_0x3df562(0x232)]==_0x3df562(0x266)?_0x3df562(0x261):'EUR',_0x1baae6=config[_0x3df562(0x27d)]==_0x3df562(0x204)?_0x3df562(0x204):_0x3df562(0x283);stablecoins={'eur':{'coin':''+_0x1baae6+_0x2d19a9,'symbol':_0x1baae6+'/'+_0x2d19a9},'usd':{'coin':_0x1baae6+_0x3df562(0x261),'symbol':_0x1baae6+'/USDT'}};}async function initWsEvents(){const _0x7ccbea=_0x23b51d;!wstriggersset&&(wstriggersset=!![],wsClient['on']('formattedMessage',_0x543291=>{const _0x2b752c=_0x2ef6;if(isWsFormattedKline(_0x543291)){global[_0x2b752c(0x17e)][_0x543291['kline'][_0x2b752c(0x248)]]=_0x543291[_0x2b752c(0x22d)]['close'];return;}else{if(isWsFormatted24hrTicker(_0x543291)){global[_0x2b752c(0x253)][_0x543291[_0x2b752c(0x248)]]=_0x543291[_0x2b752c(0x1d4)];return;}else{if(!Array[_0x2b752c(0x26e)](_0x543291)&&_0x543291[_0x2b752c(0x1c8)]['includes'](_0x2b752c(0x262))){if(_0x543291[_0x2b752c(0x206)][_0x2b752c(0x284)]('spot')){updateNumberCoins(_0x543291);return;}}}}}),wsClient['on'](_0x7ccbea(0x1fb),async _0x38819d=>{if(!botPaused)currentCoins=await getCoins(!![]);}));}async function loadSymbols(){const _0x5d02de=_0x23b51d;let _0x47b8e4;try{markets=await exchange[_0x5d02de(0x228)](),allSymbols=exchange[_0x5d02de(0x1b1)][_0x5d02de(0x192)](_0x582661=>{const _0x42e270=_0x5d02de;let _0x11f1e6=![];return exceptions[_0x42e270(0x23b)](_0x1a0009=>{const _0x4c98b9=_0x42e270;if(_0x582661[_0x4c98b9(0x284)](_0x1a0009))_0x11f1e6=!![];}),!_0x11f1e6;}),_0x47b8e4=!![];}catch(_0x3e98c6){await handleError(_0x3e98c6,'loadSymbols()'),_0x47b8e4=![];}return _0x47b8e4;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x130874=_0x23b51d;proxyEmit(_0x130874(0x1d6),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x130874(0x1c5),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x25dca5=getNormalizedPerformance();emitPerformance(_0x25dca5),await getStartingBalances(_0x25dca5);}async function toggleBotMode(){const _0x3fd270=_0x23b51d;let _0x555942=dbConfig['get'](_0x3fd270(0x1dd))['find']({'botID':botID})[_0x3fd270(0x269)]();if(_0x555942){const _0x37b586=!_0x555942[_0x3fd270(0x193)];dbConfig[_0x3fd270(0x278)]('bot')[_0x3fd270(0x1ac)]({'botID':botID})['assign']({'headless':_0x37b586})[_0x3fd270(0x279)](),config[_0x3fd270(0x193)]=_0x37b586,proxyEmit(_0x3fd270(0x1d6),emittedConfiguration()),updateBotManager();}}function _0x2ef6(_0x5c9582,_0x36ad34){const _0x4257d5=_0x48c3();return _0x2ef6=function(_0x5a9e1c,_0x219387){_0x5a9e1c=_0x5a9e1c-0x154;let _0x48c346=_0x4257d5[_0x5a9e1c];return _0x48c346;},_0x2ef6(_0x5c9582,_0x36ad34);}function updateBotManager(){const _0x342ba5=_0x23b51d;process[_0x342ba5(0x1f3)]({'updatebotmanager':!![]},_0x5e4069=>{});}function cleanws(){const _0x411b31=_0x23b51d;wsinitialized=![];ws1&&(ws1[_0x411b31(0x23b)](_0x8a9824=>{const _0xb1d5f7=_0x411b31;try{wsClient[_0xb1d5f7(0x156)](_0x8a9824);}catch(_0x4c6be7){}}),ws1=[]);if(ws2){try{wsClient['close'](ws2);}catch(_0x3a4048){}ws2=null;}ws3&&(ws3['forEach'](_0x579441=>{const _0x2fa05c=_0x411b31;try{wsClient[_0x2fa05c(0x156)](_0x579441);}catch(_0x5baf8d){}}),ws3=[]);}async function initws(){const _0x242588=_0x23b51d;cleanws();let _0x5a2ed8=[];currentCoins[_0x242588(0x23b)](_0x31fd96=>{const _0x55c12a=_0x242588;if(_0x31fd96[_0x55c12a(0x233)]!=config[_0x55c12a(0x27d)])_0x5a2ed8['push'](_0x31fd96['symbol']);});if(!_0x5a2ed8[_0x242588(0x284)](stablecoins[_0x242588(0x1fc)][_0x242588(0x248)]))_0x5a2ed8[_0x242588(0x16c)](stablecoins[_0x242588(0x1fc)][_0x242588(0x248)]);if(!_0x5a2ed8[_0x242588(0x284)](stablecoins[_0x242588(0x23f)][_0x242588(0x248)]))_0x5a2ed8[_0x242588(0x16c)](stablecoins[_0x242588(0x23f)][_0x242588(0x248)]);if(!_0x5a2ed8[_0x242588(0x284)](_0x242588(0x256)+config[_0x242588(0x27d)]))_0x5a2ed8[_0x242588(0x16c)](_0x242588(0x256)+config['basecoin']);try{_0x5a2ed8['forEach']((_0x3a5964,_0x2cbeee)=>{const _0x3da2c1=_0x242588;ws1[_0x2cbeee]=wsClient[_0x3da2c1(0x160)](noslash(_0x3a5964),'1m'),ws3[_0x2cbeee]=wsClient[_0x3da2c1(0x175)](noslash(_0x3a5964),_0x3da2c1(0x1f2));}),ws2=wsClient[_0x242588(0x22b)]();}catch(_0xc3a970){await handleError(_0xc3a970,_0x242588(0x163));}let _0x13c918,_0xd0b33d=0x0;loading[_0x242588(0x1bf)]=[];let _0xc224f=0x0;_0x5a2ed8[_0x242588(0x23b)](_0x11c27c=>{const _0x35e305=_0x242588;loading['remainingSymbols'][_0x35e305(0x16c)](_0x11c27c);}),loadingCanceled=![];let _0x3df6bf=![];while(_0x13c918!=_0x5a2ed8[_0x242588(0x1e2)]){_0x13c918=0x0,_0x5a2ed8['forEach'](_0x4f246d=>{const _0x335c03=_0x242588;global[_0x335c03(0x17e)][noslash(_0x4f246d)]&&(loading['remainingSymbols']=loading[_0x335c03(0x1bf)][_0x335c03(0x192)](_0x18be3f=>_0x18be3f!=_0x4f246d),_0x13c918++);}),loading[_0x242588(0x1d8)]=Math[_0x242588(0x230)](_0x13c918/_0x5a2ed8[_0x242588(0x1e2)]*0x64);loading['progress']!=0x64&&(_0xc224f>0x1e*0x5&&(loading[_0x242588(0x255)]=!![],emitLoadingProgress()),_0xc224f>0x3c*0x5&&!_0x3df6bf&&(_0x3df6bf=!![],logHistory(_0x242588(0x1ce),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x242588(0x1bf)]['join'](',\x20')+_0x242588(0x1df))));if(loadingCanceled){loading[_0x242588(0x1e0)]=!![],emitLoadingProgress();break;}else _0x13c918!=_0xd0b33d&&(_0xd0b33d=_0x13c918,emitLoadingProgress()),_0xc224f++,await sleep(0xc8);}_0x3df6bf&&logHistory(_0x242588(0x15d),_0x242588(0x1d3));if(_0x13c918==_0x5a2ed8[_0x242588(0x1e2)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x10c579=_0x23b51d;proxyEmit(_0x10c579(0x225),loading);}function _0x48c3(){const _0x161fbd=['split','fetchTickers','basecoin','8872teTZYq','starting-balance-','starting-balances','getDate','19547LWLBnv','BTC','includes','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','API-key\x20format\x20invalid','precision','.json','format','close','placeOrder','getMonth','\x20minutes','\x20>\x20','padEnd','kill','success','privateKey','storeConfiguration','subscribeSpotKline','event-history','no\x20open\x20orders','initws()','lowdb','cooldown','Binance\x20not\x20available\x20(2)','running','event','replace','market','fees','push','Crypt','Order\x20filled:\x20','map','emitHistory','commissionAsset','liquidity','isEqual','coins','subscribeSymbol24hrTicker','botname','HOT/EUR','distribution','threshold','min','apiKey','fee','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ticker','Order(s)\x20not\x20validated\x20after\x20','number','4728pHLkcX','version','ask','realized','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','changes','-results.json','data','toString','fetchBalance','OrderNotFound','side','excluded','buy','/backup/','existsSync','startprice','filter','headless','constructor','log','change24h','emojibuy','2.3.5','placeOrder()','DAI/','delta','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','type','sells','apiSecret','storeHeadless','function','NANO/','Manual\x20balancing\x20required:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','4518HqxBtx','Binance\x20not\x20available\x20(1)','-------------------------------\x0a','startnumber','./config/','initclient','logs','find','Limit\x20(low-margin)','abs','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','order','symbols','RSA-OAEP','InvalidNonce','Market','Limit\x20(high-margin)','padStart','Invalid\x20quantity','Error:\x20Invalid\x20argument\x20','configuration-stored','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','secure','sort','No\x20more\x20open\x20orders\x20-\x20','timeshift','remainingSymbols','date','reverse','string','10543Krzsmf','initial','balances','getFullYear','ExchangeNotAvailable','wsKey','23835yykatk','fetchOpenOrders','target','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','AuthenticationError','error','ongoing','fetchClosedOrders','toggleBotMode','recreateCoinResults()','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','priceChangePercent','2490KBhyiX','configuration','toLowerCase','progress','(((.+)+)+)+$','getPortfolio()','162bSpmDk','sell','bot','currency','\x20-\x20bot\x20not\x20started','cancel','enabled','length','filled','restart','\x20|\x20Binance\x20API\x20secret\x20invalid','breakeven','223110yANDfV','getPortfolio','time','yyyy/MM/dd','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','price','splice','Pausing\x20for\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','cost','indexOf','spot','send','Bot\x20','getTime','botID',')\x20|\x20Error\x20details:\x20','stringify','sha256','Binance\x20API\x20secret\x20is\x20invalid','reconnected','eur','hybrid-crypto-js','orderStatus','cancelLoading','add','balancing\x20resumes\x20when\x20cooldown\x20ends','test','createOrder','ETH','getMinutes','wsMarket','entries','buys','limit','max','startdate','has','HOT/BTC','limit-high','\x20-\x20','\x20|\x20Binance\x20API\x20key\x20invalid','limits','parse','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','wss://stream.binance.com:9443','eventTime','executionReport','last','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','toFixed','-events.json','final','commission','args','************','orderId','defaults','EUR','884714WDjwle','3eUjugq','coin-loading-progress','cancelOrder','outboundAccountPosition','loadMarkets','\x20orders\x20in\x20less\x20than\x20','showname','subscribeSpotUserDataStream','keys','kline','settings','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','round','emojisell','exchange','coin','performance','assign','recreate','valid','XEM/BUSD','\x20|\x20','Binance\x20API\x20blocked','forEach','timestamp',':\x20Bot\x20','FILLED','usd','argv','slice','lowdb/adapters/FileSync','binance','\x20order:\x20','accumulatedQuantity','decrypt','ordertype','symbol','ccxt','cumulativeQuoteAssetTransactedQty','getHours','4EmeBUl','search','join','2.5.0','offset','\x20portfolio:\x20\x0a\x0a','trade','change','total','timeout','BNB/','75451xyxnVV','exec','BNB','sortBy','set','InsufficientFunds','BUSD','Binance\x20API\x20key\x20is\x20invalid','getStartingBalances','remove','USDT','userData','datetime','portfolio','cloneDeep','binanceus','date-fns','message','value','getCoins()','Order\x20amount\x20is\x20invalid:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','isArray','</pre>','fromCodePoint','page','bot-','amount','writeFile','Unknown\x20error\x20occured','wss://stream.binance.us:9443','eventType','get','write','concat'];_0x48c3=function(){return _0x161fbd;};return _0x48c3();}async function getFiat(){const _0x12ed62=_0x23b51d;let _0x6576e3=0x0,_0x23cf83=0x0;try{_0x6576e3=global['ticker'][stablecoins[_0x12ed62(0x1fc)]['coin']],_0x23cf83=global['ticker'][stablecoins[_0x12ed62(0x23f)][_0x12ed62(0x233)]];}catch(_0x1f4cd5){await handleError(_0x1f4cd5,'getFiat()');}return{'eur':Number(_0x6576e3),'usd':Number(_0x23cf83)};}function setStartDatePerformance(){const _0x4e1725=_0x23b51d;if(config&&config[_0x4e1725(0x172)][0x0][_0x4e1725(0x186)][_0x4e1725(0x1e2)]!=0x0){const _0x4c902d=config['liquidity'][0x0][_0x4e1725(0x186)];dbPerformance[_0x4e1725(0x278)]('data')[_0x4e1725(0x1ac)]({'date':config[_0x4e1725(0x20b)]})[_0x4e1725(0x235)]({'coins':_0x4c902d})[_0x4e1725(0x279)]();}}async function recreateCoinResults(){const _0x3fd475=_0x23b51d;let _0x19b167,_0x565711=[];try{const _0x3e3cfb=fns[_0x3fd475(0x155)](fns['parseISO'](config['startdate'][_0x3fd475(0x169)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x35bb2e of currentCoins){if(_0x35bb2e[_0x3fd475(0x233)]!=config[_0x3fd475(0x27d)]){let _0x14e498=0x0,_0x6846be,_0x175f1f;_0x19b167=await getAllEventOrders(_0x35bb2e[_0x3fd475(0x248)]);if(_0x19b167[_0x3fd475(0x1e2)]>0x0)_0x19b167['forEach'](_0x5b19be=>{const _0x442bb0=_0x3fd475,_0x4a1937=_0x35bb2e[_0x442bb0(0x248)][_0x442bb0(0x284)](config['basecoin']+'/');_0x565711[_0x442bb0(0x16c)]({'datetime':_0x5b19be[_0x442bb0(0x263)],'coin':_0x35bb2e[_0x442bb0(0x233)],'symbol':_0x35bb2e[_0x442bb0(0x248)],'side':_0x5b19be[_0x442bb0(0x18c)],'reverse':_0x4a1937,'amount':formatResult(_0x5b19be[_0x442bb0(0x1e3)],0x8),'filled':formatResult(_0x5b19be[_0x442bb0(0x1e3)],0x8),'price':formatResult(_0x5b19be[_0x442bb0(0x1ec)],0x8)}),_0x14e498=_0x5b19be[_0x442bb0(0x18c)]==_0x442bb0(0x18e)?_0x14e498+_0x5b19be[_0x442bb0(0x1e3)]:_0x14e498-_0x5b19be[_0x442bb0(0x1e3)];if(!_0x175f1f)_0x175f1f=_0x5b19be['price'];});_0x6846be=_0x35bb2e[_0x3fd475(0x180)]-_0x14e498;let _0x2db3bd;config[_0x3fd475(0x172)]['forEach'](_0x228391=>{const _0x409195=_0x3fd475;!_0x2db3bd&&(_0x2db3bd=_0x228391['changes'][_0x409195(0x1ac)](_0x1cb1f7=>_0x1cb1f7['coin']==_0x35bb2e[_0x409195(0x233)]),_0x2db3bd&&(_0x6846be=_0x2db3bd[_0x409195(0x180)],_0x175f1f=_0x2db3bd[_0x409195(0x1ec)]));});let _0x1294ae=dbCoinResults[_0x3fd475(0x278)](_0x3fd475(0x174))[_0x3fd475(0x1ac)]({'coin':_0x35bb2e[_0x3fd475(0x233)]})[_0x3fd475(0x269)]();_0x1294ae={'coin':_0x35bb2e[_0x3fd475(0x233)],'number':_0x6846be,'breakeven':_0x175f1f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3fd475(0x278)](_0x3fd475(0x174))[_0x3fd475(0x1ac)]({'coin':_0x35bb2e[_0x3fd475(0x233)]})[_0x3fd475(0x235)](_0x1294ae)[_0x3fd475(0x279)]();}}_0x565711['sort']((_0x5d06d4,_0x4de27e)=>_0x5d06d4[_0x3fd475(0x263)]>_0x4de27e[_0x3fd475(0x263)]?0x1:_0x4de27e[_0x3fd475(0x263)]>_0x5d06d4['datetime']?-0x1:0x0);let _0x26cc16=0x0;for(let _0x4ef123 of _0x565711){await updateCoinResults(_0x4ef123,!![]);}}catch(_0xe13cfa){await handleError(_0xe13cfa,_0x3fd475(0x1d2));}}async function getAllEventOrders(_0x14e80d){const _0x2017d3=_0x23b51d;let _0x743055=[],_0x27d164=dbLogs[_0x2017d3(0x278)](_0x2017d3(0x1ab))[_0x2017d3(0x192)](_0x4294e7=>{const _0x566f53=_0x2017d3,_0x5cabae=_0x4294e7[_0x566f53(0x168)]['toLowerCase']();return _0x5cabae['includes'](_0x14e80d[_0x566f53(0x1d7)]())&&(_0x5cabae['includes']('market')&&_0x5cabae[_0x566f53(0x284)](_0x566f53(0x1b0))||_0x5cabae[_0x566f53(0x284)](_0x566f53(0x1e3))&&_0x5cabae[_0x566f53(0x284)]('order'));})[_0x2017d3(0x25a)](_0x2017d3(0x1e9))[_0x2017d3(0x269)]();return _0x27d164[_0x2017d3(0x23b)](_0x38047b=>{const _0x4041bb=_0x2017d3,_0x46637e=_0x38047b[_0x4041bb(0x168)][_0x4041bb(0x284)]('sell')?_0x4041bb(0x1dc):_0x4041bb(0x18e),_0x2239d7=/#([0-9]|\.)+\s/i,_0x2934e0=Number(_0x2239d7['exec'](_0x38047b[_0x4041bb(0x168)])[0x0][_0x4041bb(0x241)](0x1)),_0x22bcba=/@([0-9]|\.)+$/i,_0x1eb389=Number(_0x22bcba[_0x4041bb(0x258)](_0x38047b['event'])[0x0][_0x4041bb(0x241)](0x1));_0x743055['push']({'datetime':_0x38047b[_0x4041bb(0x1e9)],'coin':symbolToCoin(_0x14e80d),'symbol':_0x14e80d,'side':_0x46637e,'amount':_0x2934e0,'filled':_0x2934e0,'price':_0x1eb389});}),_0x743055;}async function getAllOrders(_0x2fdf07,_0x3b0ad0){const _0x7ae1dc=_0x23b51d;let _0x20ec00=[];while(_0x3b0ad0<exchange['milliseconds']()){const _0x378cfb=0x1f4,_0xe92701=await exchange[_0x7ae1dc(0x1d0)](_0x2fdf07,_0x3b0ad0,_0x378cfb);if(_0xe92701[_0x7ae1dc(0x1e2)])_0x3b0ad0=_0xe92701[_0xe92701['length']-0x1][_0x7ae1dc(0x23c)]+0x1,_0x20ec00=_0x20ec00[_0x7ae1dc(0x27a)](_0xe92701);else break;}return _0x20ec00;}async function validate24hChanges(){const _0x2cc498=_0x23b51d;let _0x442b00;for(const _0x4a7c05 of currentCoins){if(_0x4a7c05[_0x2cc498(0x233)]!=config[_0x2cc498(0x27d)]){let _0x4c94ce;_0x4a7c05[_0x2cc498(0x1c1)]?_0x4c94ce=formatResult((0x1/(global[_0x2cc498(0x253)][noslash(_0x4a7c05['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x4c94ce=global[_0x2cc498(0x253)][noslash(_0x4a7c05[_0x2cc498(0x248)])],_0x4c94ce<config[_0x2cc498(0x196)]&&(logHistory(_0x2cc498(0x1ce),_0x4a7c05[_0x2cc498(0x233)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x4c94ce+'%'),logHistory(_0x2cc498(0x1ce),_0x2cc498(0x213)),logHistory(_0x2cc498(0x1ce),_0x2cc498(0x219)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x1df36f=_0x23b51d;let _0x234857=dbLogs['get'](_0x1df36f(0x182))[_0x1df36f(0x269)]();if(_0x234857!=_0x1df36f(0x198)){dbLogs['set'](_0x1df36f(0x182),_0x1df36f(0x198))[_0x1df36f(0x279)]();let _0x43a39a=[];const _0x442038=dbLogs[_0x1df36f(0x278)](_0x1df36f(0x1ab))[_0x1df36f(0x269)]();_0x442038[_0x1df36f(0x23b)](_0x1cc078=>{const _0x3cf4b0=_0x1df36f;_0x43a39a[_0x3cf4b0(0x16c)]({'time':_0x1cc078[_0x3cf4b0(0x1e9)],'type':_0x1cc078[_0x3cf4b0(0x19d)],'event':_0x1cc078['event']});}),dbLogs[_0x1df36f(0x278)](_0x1df36f(0x1ab))[_0x1df36f(0x235)](_0x43a39a)[_0x1df36f(0x279)]();}let _0x1aa7f7=dbConfig[_0x1df36f(0x278)]('version')[_0x1df36f(0x269)]();if(_0x1aa7f7!='2.3.5'){dbConfig[_0x1df36f(0x25b)](_0x1df36f(0x182),_0x1df36f(0x198))[_0x1df36f(0x279)]();let _0x382fc4=dbConfig[_0x1df36f(0x278)](_0x1df36f(0x1dd))[_0x1df36f(0x1ac)]({'botID':botID})['value']();if(_0x382fc4){let _0x51c898=[];_0x382fc4[_0x1df36f(0x264)][_0x1df36f(0x23b)](_0x4928ea=>{const _0x486ec7=_0x1df36f;_0x51c898[_0x486ec7(0x16c)]({'coin':_0x4928ea[_0x486ec7(0x233)],'number':_0x4928ea[_0x486ec7(0x1a8)],'price':_0x4928ea[_0x486ec7(0x191)]}),delete _0x4928ea[_0x486ec7(0x1a8)],delete _0x4928ea[_0x486ec7(0x191)];});if(_0x51c898['length']!==0x0)fs[_0x1df36f(0x274)](configbackuppath+(_0x1df36f(0x27f)+botID+_0x1df36f(0x154)),JSON[_0x1df36f(0x1f8)](_0x51c898,null,0x4),function(_0x10d499){if(_0x10d499){}});const _0x18ca46=(_0x3dd76b,_0x248f4e)=>{const _0x1536cd=_0x1df36f;let _0x109669=[];_0x248f4e['forEach'](_0x4759e1=>{const _0x5d3334=_0x2ef6,_0x48bacc=_0x3dd76b[_0x5d3334(0x1ac)](_0x2c7805=>_0x2c7805[_0x5d3334(0x233)]==_0x4759e1[_0x5d3334(0x233)]);if(!_0x48bacc)_0x109669[_0x5d3334(0x16c)](_0x4759e1);});let _0x2e6644=[];return _0x3dd76b[_0x1536cd(0x23b)](_0x3afbf4=>{const _0x33b8dc=_0x1536cd,_0x296520=_0x248f4e[_0x33b8dc(0x1ac)](_0x60b2cf=>_0x60b2cf[_0x33b8dc(0x233)]==_0x3afbf4[_0x33b8dc(0x233)]);if(!_0x296520||_0x296520[_0x33b8dc(0x180)]==0x0&&_0x3afbf4['number']!=0x0)_0x2e6644[_0x33b8dc(0x16c)](_0x3afbf4);}),{'missingDay1':_0x109669,'notInDay2':_0x2e6644};},_0x23a9c2=dbPerformance[_0x1df36f(0x278)](_0x1df36f(0x188))[_0x1df36f(0x265)]()[_0x1df36f(0x269)]();if(_0x23a9c2['length']>0x1){const {missingDay1:_0x296648,notInDay2:_0x3ef0ae}=_0x18ca46(_0x51c898,_0x23a9c2[0x1]['coins']);_0x51c898=[..._0x51c898,..._0x296648],_0x3ef0ae[_0x1df36f(0x23b)](_0x43f22c=>{const _0x225761=_0x1df36f;let _0x358461=_0x51c898['findIndex'](_0x5252fc=>_0x5252fc[_0x225761(0x233)]==_0x43f22c[_0x225761(0x233)]);_0x358461!=-0x1&&_0x51c898['splice'](_0x358461,0x1);});}_0x51c898['sort']((_0x28bc5c,_0x3f5266)=>_0x28bc5c[_0x1df36f(0x233)]>_0x3f5266[_0x1df36f(0x233)]?0x1:_0x3f5266[_0x1df36f(0x233)]>_0x28bc5c[_0x1df36f(0x233)]?-0x1:0x0);let _0x49ed6c=[{'date':_0x382fc4['startdate'],'changes':_0x51c898}];_0x23a9c2[_0x1df36f(0x1e2)]>0x2&&_0x23a9c2[_0x1df36f(0x23b)]((_0x6623ec,_0xd80b64)=>{const _0x59b648=_0x1df36f;if(_0xd80b64>0x0&&_0xd80b64<_0x23a9c2['length']-0x1){const {missingDay1:_0x2d5b06,notInDay2:_0x2e706d}=_0x18ca46(_0x23a9c2[_0xd80b64][_0x59b648(0x174)],_0x23a9c2[_0xd80b64+0x1][_0x59b648(0x174)]);_0x51c898=[],(_0x2d5b06[_0x59b648(0x1e2)]!=0x0||_0x2e706d[_0x59b648(0x1e2)]!=0x0)&&(_0x2d5b06[_0x59b648(0x1e2)]!=0x0&&_0x51c898[_0x59b648(0x16c)](..._0x2d5b06),_0x2e706d[_0x59b648(0x1e2)]!=0x0&&(_0x2e706d[_0x59b648(0x23b)](_0x5a5799=>{const _0x2c4d61=_0x59b648;_0x5a5799[_0x2c4d61(0x180)]=-_0x5a5799[_0x2c4d61(0x180)];}),_0x51c898['push'](..._0x2e706d)),_0x51c898[_0x59b648(0x1bc)]((_0x4cd2da,_0x4220f2)=>_0x4cd2da[_0x59b648(0x233)]>_0x4220f2[_0x59b648(0x233)]?0x1:_0x4220f2[_0x59b648(0x233)]>_0x4cd2da['coin']?-0x1:0x0),_0x49ed6c[_0x59b648(0x16c)]({'date':_0x23a9c2[_0xd80b64+0x1]['date'],'changes':_0x51c898}));}}),dbConfig[_0x1df36f(0x278)](_0x1df36f(0x1dd))['find']({'botID':botID})[_0x1df36f(0x235)]({..._0x382fc4,'liquidity':_0x49ed6c})[_0x1df36f(0x279)]();}}config=getConfiguration(botID);let _0x369a7a=dbPerformance[_0x1df36f(0x278)](_0x1df36f(0x182))['value']();_0x369a7a!='2.3.5'&&(dbPerformance[_0x1df36f(0x25b)](_0x1df36f(0x182),_0x1df36f(0x198))['write'](),setStartDatePerformance());let _0x12c4b0=dbCoinResults['get']('version')[_0x1df36f(0x269)]();if(_0x12c4b0!=_0x1df36f(0x24f)){dbCoinResults[_0x1df36f(0x25b)]('version',_0x1df36f(0x24f))[_0x1df36f(0x279)]();let _0x3858e7=dbCoinResults[_0x1df36f(0x278)](_0x1df36f(0x174))[_0x1df36f(0x269)]();if(_0x3858e7[_0x1df36f(0x1e2)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x3577ae){const _0x240ecb=_0x23b51d;let _0x1615ea=dbConfig[_0x240ecb(0x278)](_0x240ecb(0x1dd))[_0x240ecb(0x1ac)]({'botID':_0x3577ae})[_0x240ecb(0x269)]();if(_0x1615ea){let _0x1a1446=![];typeof _0x1615ea[_0x240ecb(0x179)]==_0x240ecb(0x1c2)&&(_0x1615ea={..._0x1615ea,'threshold':Number(_0x1615ea[_0x240ecb(0x179)])},_0x1a1446=!![]),_0x1615ea[_0x240ecb(0x196)]==null&&(_0x1615ea={..._0x1615ea,'change24h':-0x14},_0x1a1446=!![]),_0x1a1446&&(_0x1615ea={'botID':_0x1615ea[_0x240ecb(0x1f6)],'exchange':_0x1615ea[_0x240ecb(0x232)],'apiKey':_0x1615ea[_0x240ecb(0x17b)],'apiSecret':_0x1615ea['apiSecret'],'basecoin':_0x1615ea['basecoin'],'botname':_0x1615ea[_0x240ecb(0x176)],'showname':_0x1615ea[_0x240ecb(0x22a)],'threshold':_0x1615ea[_0x240ecb(0x179)],'ordertype':_0x1615ea[_0x240ecb(0x247)],'timeout':_0x1615ea['timeout'],'startdate':_0x1615ea[_0x240ecb(0x20b)],'recreate':_0x1615ea[_0x240ecb(0x236)],'timeshift':_0x1615ea[_0x240ecb(0x1be)],'headless':_0x1615ea[_0x240ecb(0x193)],'cooldown':_0x1615ea['cooldown'],'change24h':_0x1615ea[_0x240ecb(0x196)],'emojibuy':_0x1615ea[_0x240ecb(0x197)],'emojisell':_0x1615ea[_0x240ecb(0x231)],'portfolio':_0x1615ea[_0x240ecb(0x264)],'liquidity':_0x1615ea[_0x240ecb(0x172)]},dbConfig[_0x240ecb(0x278)](_0x240ecb(0x1dd))[_0x240ecb(0x260)]()[_0x240ecb(0x279)](),dbConfig['get']('bot')[_0x240ecb(0x16c)](_0x1615ea)[_0x240ecb(0x279)]());}else _0x1615ea={'botID':_0x3577ae,'exchange':_0x240ecb(0x243),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x240ecb(0x1f4)+_0x3577ae,'showname':![],'threshold':0x3,'ordertype':_0x240ecb(0x16a),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x240ecb(0x1be)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x1615ea;}function emittedConfiguration(){const _0x10b7d7=_0x23b51d;let _0x2232e7;return config[_0x10b7d7(0x17b)]==''?_0x2232e7=config:_0x2232e7={...config,'apiKey':_0x10b7d7(0x21f),'apiSecret':'************'},_0x2232e7;}function getSettings(){const _0x479dfd=_0x23b51d;return dbSettings[_0x479dfd(0x278)](_0x479dfd(0x22e))[_0x479dfd(0x269)]();}function getSecure(){const _0x3f7d91=_0x23b51d;return dbSecure[_0x3f7d91(0x278)](_0x3f7d91(0x1bb))[_0x3f7d91(0x269)]()||{};}function updateTimeshift(_0xc7e3d){const _0x2b7cc4=_0x23b51d;let _0x6cf4b4=dbConfig[_0x2b7cc4(0x278)](_0x2b7cc4(0x1dd))[_0x2b7cc4(0x1ac)]({'botID':botID})[_0x2b7cc4(0x269)]();_0x6cf4b4&&dbConfig[_0x2b7cc4(0x278)]('bot')[_0x2b7cc4(0x1ac)]({'botID':botID})['assign']({'timeshift':_0xc7e3d})[_0x2b7cc4(0x279)](),config[_0x2b7cc4(0x1be)]=_0xc7e3d,proxyEmit(_0x2b7cc4(0x1d6),emittedConfiguration());}async function storeConfiguration(_0x1ef9e6){const _0x3ef36a=_0x23b51d;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x4970ba=dbConfig[_0x3ef36a(0x278)](_0x3ef36a(0x1dd))[_0x3ef36a(0x1ac)]({'botID':botID})['value']();_0x1ef9e6={..._0x1ef9e6,'apiKey':crypt[_0x3ef36a(0x246)](secure[_0x3ef36a(0x15e)],_0x1ef9e6[_0x3ef36a(0x17b)])['message'],'apiSecret':crypt[_0x3ef36a(0x246)](secure[_0x3ef36a(0x15e)],_0x1ef9e6[_0x3ef36a(0x19f)])['message']};if(_0x4970ba){if(_0x1ef9e6[_0x3ef36a(0x17b)]==_0x3ef36a(0x21f))_0x1ef9e6[_0x3ef36a(0x17b)]=config[_0x3ef36a(0x17b)];if(_0x1ef9e6[_0x3ef36a(0x19f)]==_0x3ef36a(0x21f))_0x1ef9e6[_0x3ef36a(0x19f)]=config[_0x3ef36a(0x19f)];dbConfig['get'](_0x3ef36a(0x1dd))[_0x3ef36a(0x1ac)]({'botID':botID})[_0x3ef36a(0x235)](_0x1ef9e6)[_0x3ef36a(0x279)]();}else dbConfig[_0x3ef36a(0x278)](_0x3ef36a(0x1dd))[_0x3ef36a(0x16c)](_0x1ef9e6)[_0x3ef36a(0x279)](),process[_0x3ef36a(0x1f3)]({'status':_0x3ef36a(0x1e1),'live':_0x3ef36a(0x167)},_0x25a2ff=>{});config={..._0x1ef9e6},setStartDatePerformance(),process[_0x3ef36a(0x1f3)]({'botname':_0x1ef9e6[_0x3ef36a(0x176)]},_0x527869=>{}),updateBotManager();const _0x2b7c54=getNormalizedPerformance();getStartingBalances(_0x2b7c54),emitPerformance(_0x2b7c54),proxyEmit(_0x3ef36a(0x1b9)),await initCoinResults(),reset();}async function storeHeadless(_0x10e0f8){const _0x159584=_0x23b51d,_0xc396ed={...config,'headless':_0x10e0f8[_0x159584(0x193)]};let _0x485187=dbConfig[_0x159584(0x278)](_0x159584(0x1dd))[_0x159584(0x1ac)]({'botID':botID})[_0x159584(0x269)]();_0x485187&&dbConfig[_0x159584(0x278)](_0x159584(0x1dd))[_0x159584(0x1ac)]({'botID':botID})['assign'](_0xc396ed)['write'](),config={..._0xc396ed},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x595332){const _0x297538=_0x23b51d;return _0x595332[_0x297538(0x169)]('/','');}async function updateNumberCoins(_0x503425){const _0x31fd38=_0x23b51d;if(_0x503425[_0x31fd38(0x277)]&&_0x503425['eventType']==_0x31fd38(0x227)){if(_0x503425['eventTime']!=lastOutboundEventTime){lastOutboundEventTime=_0x503425[_0x31fd38(0x215)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x1d4952=JSON[_0x31fd38(0x212)](lastBalances[_0x31fd38(0x264)]);_0x1d4952['forEach'](_0x2c6435=>{const _0x5a19a3=_0x31fd38,_0x4be67a=currentCoins[_0x5a19a3(0x1ac)](_0x1d623f=>_0x1d623f['coin']==_0x2c6435['coin']);if(_0x4be67a[_0x5a19a3(0x1b0)])_0x2c6435[_0x5a19a3(0x1b0)]=_0x4be67a['order'];}),lastBalances={...lastBalances,'portfolio':JSON[_0x31fd38(0x1f8)](_0x1d4952)},proxyEmit(_0x31fd38(0x1c5),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x503425[_0x31fd38(0x277)]&&_0x503425[_0x31fd38(0x277)]==_0x31fd38(0x216)){if(_0x503425[_0x31fd38(0x1fe)]==_0x31fd38(0x23e)){if(lastOrders)lastOrders[_0x31fd38(0x23b)](async _0x3daecd=>{const _0x3e3456=_0x31fd38;_0x3daecd[_0x3e3456(0x220)]==_0x503425[_0x3e3456(0x220)]&&_0x3daecd[_0x3e3456(0x1e3)]==0x0&&(_0x3daecd['price']=_0x503425[_0x3e3456(0x24a)]/_0x503425[_0x3e3456(0x245)],_0x3daecd[_0x3e3456(0x1e3)]=_0x503425['accumulatedQuantity'],_0x3daecd['fee']={'cost':_0x503425[_0x3e3456(0x21d)],'currency':_0x503425[_0x3e3456(0x171)]},await validateOrders(),await updateCoinResults(_0x3daecd));});}}}async function getCoins(_0x353cf7=![],_0x97428e=!![],_0x1d1c87=config['basecoin']){const _0x132dbe=_0x23b51d;let _0x31a039,_0x179c12=[],_0x37b0c3=[],_0x500b1f=[];try{_0x31a039=await exchange[_0x132dbe(0x18a)](),mybalances=_0x31a039[_0x132dbe(0x254)];if(!_0x97428e)for(const [_0x129f12,_0x155367]of Object[_0x132dbe(0x207)](mybalances)){_0x500b1f['push'](_0x129f12);}else config['portfolio'][_0x132dbe(0x23b)](_0x310436=>{if(!_0x310436['excluded'])_0x500b1f['push'](_0x310436['coin']);});if(_0x1d1c87=='')for(const [_0x10a9da,_0x90eadd]of Object[_0x132dbe(0x207)](mybalances)){_0x90eadd[_0x132dbe(0x189)]()!=0x0&&_0x37b0c3[_0x132dbe(0x16c)]({'coin':_0x10a9da});}else{let _0x32cc1f=![],_0x1e90fa;allOpenOrders=[];for(const [_0x45f6e5,_0x695112]of Object['entries'](mybalances)){if(_0x500b1f[_0x132dbe(0x284)](_0x45f6e5)){const _0x53a555=config[_0x132dbe(0x264)][_0x132dbe(0x1ac)](_0x2d1b5e=>_0x2d1b5e[_0x132dbe(0x233)]==_0x45f6e5),_0x32cede=_0x45f6e5+'/'+_0x1d1c87,_0x400ef7=_0x1d1c87+'/'+_0x45f6e5;_0x32cc1f=![];if((_0x695112[_0x132dbe(0x189)]()!=0x0||_0x53a555)&&(allSymbols[_0x132dbe(0x284)](_0x32cede)||_0x45f6e5==_0x1d1c87))_0x45f6e5!=_0x1d1c87&&(_0x179c12[_0x132dbe(0x16c)](_0x32cede),_0x353cf7&&(_0x1e90fa=await exchange[_0x132dbe(0x1ca)](_0x32cede),_0x1e90fa[_0x132dbe(0x1e2)]>0x0&&(_0x32cc1f=!![]))),_0x37b0c3[_0x132dbe(0x16c)]({'coin':_0x45f6e5,'symbol':_0x32cede,'reverse':![],'number':Math[_0x132dbe(0x20a)](_0x695112+(_0x53a555&&_0x53a555[_0x132dbe(0x250)]||0x0),0x0),'order':_0x32cc1f});else(_0x695112['toString']()!=0x0||_0x53a555)&&allSymbols[_0x132dbe(0x284)](_0x400ef7)&&(_0x45f6e5!=_0x1d1c87&&(_0x179c12[_0x132dbe(0x16c)](_0x400ef7),_0x353cf7&&(_0x1e90fa=await exchange[_0x132dbe(0x1ca)](_0x400ef7),_0x1e90fa[_0x132dbe(0x1e2)]>0x0&&(_0x32cc1f=!![]))),_0x37b0c3[_0x132dbe(0x16c)]({'coin':_0x45f6e5,'symbol':_0x400ef7,'reverse':!![],'number':Math[_0x132dbe(0x20a)](_0x695112+(_0x53a555&&_0x53a555[_0x132dbe(0x250)]||0x0),0x0),'order':_0x32cc1f}));}_0x32cc1f&&allOpenOrders[_0x132dbe(0x16c)](_0x1e90fa[0x0]);}_0x353cf7&&allOpenOrders[_0x132dbe(0x1e2)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x132dbe(0x162))));}}catch(_0x4fd201){if(!_0x97428e){if(_0x4fd201[_0x132dbe(0x189)]()[_0x132dbe(0x284)](_0x132dbe(0x286)))return logHistory(_0x132dbe(0x1ce),_0x132dbe(0x25e)),![];else{if(_0x4fd201[_0x132dbe(0x189)]()[_0x132dbe(0x284)](_0x132dbe(0x1cd)))return logHistory(_0x132dbe(0x1ce),_0x132dbe(0x19c)),![];else{if(_0x4fd201['toString']()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x132dbe(0x1ce),_0x132dbe(0x1fa)),![];else await handleError(_0x4fd201,_0x132dbe(0x26a));}}}else await handleError(_0x4fd201,_0x132dbe(0x26a));}return _0x37b0c3;}async function getPortfolio(_0x299a2a){const _0x5d2433=_0x23b51d;let _0x481bdb=[],_0x355b25=[],_0x57bd72,_0x29fb2a=[],_0x7e16e3,_0x634b8c;_0x299a2a[_0x5d2433(0x17b)]===_0x5d2433(0x21f)||_0x299a2a[_0x5d2433(0x19f)]===_0x5d2433(0x21f)?(_0x7e16e3=config[_0x5d2433(0x17b)],_0x634b8c=config[_0x5d2433(0x19f)]):(_0x7e16e3=_0x299a2a[_0x5d2433(0x17b)],_0x634b8c=_0x299a2a['apiSecret']);await initExchange(_0x7e16e3,_0x634b8c);let _0x5bc677=await loadSymbols();if(_0x5bc677){_0x29fb2a=await getCoins(![],![],_0x299a2a['basecoin']);if(_0x29fb2a===![])proxyEmit(_0x5d2433(0x264),![]);else{if(_0x299a2a['basecoin']=='')proxyEmit(_0x5d2433(0x264),_0x29fb2a);else{_0x29fb2a['forEach'](_0x35bb31=>{const _0x295cd8=_0x5d2433;if(_0x35bb31[_0x295cd8(0x233)]!=_0x299a2a[_0x295cd8(0x27d)])_0x481bdb[_0x295cd8(0x16c)](_0x35bb31[_0x295cd8(0x248)]);});try{_0x355b25=await exchange['fetchTickers'](_0x481bdb);}catch(_0x465f08){await handleError(_0x465f08,_0x5d2433(0x1da));}_0x29fb2a['forEach'](_0x26119e=>{const _0x5883ec=_0x5d2433;_0x26119e['coin']!=_0x299a2a[_0x5883ec(0x27d)]?_0x57bd72=_0x26119e[_0x5883ec(0x1c1)]?0x1/_0x355b25[_0x26119e[_0x5883ec(0x248)]][_0x5883ec(0x217)]:_0x355b25[_0x26119e['symbol']][_0x5883ec(0x217)]:_0x57bd72=0x1,_0x26119e[_0x5883ec(0x1ec)]=formatResult(_0x57bd72,0x8);}),proxyEmit(_0x5d2433(0x264),_0x29fb2a);}}}else proxyEmit(_0x5d2433(0x264),![]);}function checkMinimums(_0x37b5a5){const _0x185c59=_0x23b51d;let _0x4dc3bb=!![];const _0x55367f=!_0x37b5a5['reverse']?markets[_0x37b5a5['symbol']][_0x185c59(0x211)][_0x185c59(0x273)]['min']:markets[_0x37b5a5[_0x185c59(0x248)]][_0x185c59(0x211)]['cost'][_0x185c59(0x17a)],_0x48dbe1=!_0x37b5a5['reverse']?markets[_0x37b5a5[_0x185c59(0x248)]][_0x185c59(0x211)]['cost'][_0x185c59(0x17a)]:markets[_0x37b5a5[_0x185c59(0x248)]][_0x185c59(0x211)][_0x185c59(0x273)]['min'],_0x1641fa=markets[_0x37b5a5[_0x185c59(0x248)]][_0x185c59(0x287)][_0x185c59(0x273)];_0x37b5a5[_0x185c59(0x252)]=formatResultTruncate(_0x37b5a5['trade'],_0x1641fa);if(Math['abs'](_0x37b5a5[_0x185c59(0x252)])<_0x55367f)_0x4dc3bb=![];if(Math[_0x185c59(0x1ae)](_0x37b5a5[_0x185c59(0x252)])*_0x37b5a5['last']<_0x48dbe1)_0x4dc3bb=![];if(_0x37b5a5['side']=='sell'){let _0x550345=config['portfolio']['find'](_0x53c5a8=>_0x53c5a8[_0x185c59(0x233)]==_0x37b5a5[_0x185c59(0x233)]);if(_0x550345[_0x185c59(0x250)]>0x0){if(Math[_0x185c59(0x1ae)](_0x37b5a5[_0x185c59(0x252)])>_0x37b5a5['number']-_0x550345[_0x185c59(0x250)])_0x4dc3bb=![];}else{if(Math[_0x185c59(0x1ae)](_0x37b5a5['trade'])>_0x37b5a5[_0x185c59(0x180)])_0x4dc3bb=![];}}if(_0x37b5a5[_0x185c59(0x18c)]=='buy'){let _0x75f087=config[_0x185c59(0x264)][_0x185c59(0x1ac)](_0x3a401f=>_0x3a401f[_0x185c59(0x233)]==config[_0x185c59(0x27d)]),_0x347479=currentCoins['find'](_0x321528=>_0x321528[_0x185c59(0x233)]==config[_0x185c59(0x27d)]);if(_0x75f087[_0x185c59(0x250)]>0x0){if(Math[_0x185c59(0x1ae)](_0x37b5a5[_0x185c59(0x252)])*_0x37b5a5[_0x185c59(0x217)]>_0x347479[_0x185c59(0x180)]-_0x75f087[_0x185c59(0x250)])_0x4dc3bb=![];}else{if(Math[_0x185c59(0x1ae)](_0x37b5a5[_0x185c59(0x252)])*_0x37b5a5[_0x185c59(0x217)]>_0x347479[_0x185c59(0x180)])_0x4dc3bb=![];}}return _0x4dc3bb;}async function getBalances(){const _0x33d2c8=_0x23b51d;let _0x1b3a92=0x0,_0x3c8598;const _0xcb04c5=config[_0x33d2c8(0x179)];if(config[_0x33d2c8(0x193)]&&config[_0x33d2c8(0x196)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x5f2274=>{const _0x22e0f8=_0x33d2c8;if(_0x5f2274[_0x22e0f8(0x233)]!=config[_0x22e0f8(0x27d)]){let _0x5c7be0=global[_0x22e0f8(0x17e)][noslash(_0x5f2274[_0x22e0f8(0x248)])];_0x3c8598=_0x5f2274[_0x22e0f8(0x1c1)]?0x1/_0x5c7be0:_0x5c7be0;}else _0x3c8598=0x1;let _0x35d773=_0x5f2274['number']*_0x3c8598;_0x1b3a92+=_0x35d773,_0x5f2274[_0x22e0f8(0x217)]=formatResult(Number(_0x3c8598),0x8),_0x5f2274['value']=_0x35d773;}),currentCoins[_0x33d2c8(0x23b)](_0x525a1e=>{const _0x1c2502=_0x33d2c8;let _0x35111e=config['portfolio'][_0x1c2502(0x1ac)](_0x580e26=>_0x580e26[_0x1c2502(0x233)]==_0x525a1e[_0x1c2502(0x233)]),_0x486a21=Number(_0x35111e[_0x1c2502(0x178)]),_0x5b13b2=_0x525a1e[_0x1c2502(0x269)]/_0x1b3a92*0x64,_0x136924=_0x486a21*_0x1b3a92/0x64/_0x525a1e[_0x1c2502(0x217)]-_0x525a1e[_0x1c2502(0x180)];_0x525a1e[_0x1c2502(0x178)]=formatResult(_0x5b13b2,0x3),_0x525a1e[_0x1c2502(0x1cb)]=formatResult(_0x486a21,0x3),_0x525a1e[_0x1c2502(0x252)]=formatResult(_0x136924,0x8),_0x525a1e[_0x1c2502(0x18c)]='',_0x525a1e[_0x1c2502(0x237)]=![];if(_0x525a1e['coin']!=config[_0x1c2502(0x27d)]){if(_0x525a1e[_0x1c2502(0x178)]>_0x486a21)_0x525a1e[_0x1c2502(0x18c)]=_0x1c2502(0x1dc),_0x525a1e[_0x1c2502(0x237)]=checkMinimums(_0x525a1e);else _0x525a1e[_0x1c2502(0x178)]<_0x486a21&&(_0x525a1e[_0x1c2502(0x18c)]=_0x1c2502(0x18e),_0x525a1e[_0x1c2502(0x237)]=checkMinimums(_0x525a1e));}_0x525a1e[_0x1c2502(0x19b)]=_0x525a1e['distribution']/_0x525a1e[_0x1c2502(0x1cb)]-0x1;}),currentCoins[_0x33d2c8(0x1bc)]((_0x35b9de,_0x27f346)=>_0x35b9de[_0x33d2c8(0x19b)]<_0x27f346[_0x33d2c8(0x19b)]?0x1:_0x27f346[_0x33d2c8(0x19b)]<_0x35b9de['delta']?-0x1:0x0);const _0x1acc14=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1acc14[_0x33d2c8(0x1fc)],'usd':_0x1acc14[_0x33d2c8(0x23f)],'portfolio':JSON[_0x33d2c8(0x1f8)](currentCoins),'threshold':_0xcb04c5},proxyEmit(_0x33d2c8(0x1c5),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x33d2c8(0x193)])headlessMode({'portfolio':currentCoins,'threshold':_0xcb04c5});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0xcb04c5});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5a3f63=_0x23b51d;if(!lastBalances)return;let _0x32f1b9=[],_0x354ed4,_0x4eac7d=JSON['parse'](lastBalances[_0x5a3f63(0x264)]);_0x4eac7d[_0x5a3f63(0x1bc)]((_0x4f899e,_0x58d393)=>_0x4f899e[_0x5a3f63(0x233)]>_0x58d393[_0x5a3f63(0x233)]?0x1:_0x58d393[_0x5a3f63(0x233)]>_0x4f899e[_0x5a3f63(0x233)]?-0x1:0x0),_0x4eac7d[_0x5a3f63(0x23b)](_0x1b1248=>{const _0x293abe=_0x5a3f63;let _0x3a1ece={'coin':_0x1b1248[_0x293abe(0x233)],'number':_0x1b1248[_0x293abe(0x180)],'price':_0x1b1248[_0x293abe(0x217)]};_0x32f1b9[_0x293abe(0x16c)](_0x3a1ece);});const _0x5ca3ab=await getFiat();_0x354ed4={'date':lastBalances[_0x5a3f63(0x1e9)][_0x5a3f63(0x27b)]('\x20')[0x0],'eur':_0x5ca3ab[_0x5a3f63(0x1fc)],'usd':_0x5ca3ab[_0x5a3f63(0x23f)],'coins':_0x32f1b9};let _0x221e2d=dbPerformance[_0x5a3f63(0x278)](_0x5a3f63(0x188))[_0x5a3f63(0x1ac)]({'date':_0x354ed4[_0x5a3f63(0x1c0)]})[_0x5a3f63(0x269)]();_0x221e2d?_0x354ed4['date']!=config[_0x5a3f63(0x20b)]&&dbPerformance[_0x5a3f63(0x278)](_0x5a3f63(0x188))[_0x5a3f63(0x1ac)]({'date':_0x354ed4[_0x5a3f63(0x1c0)]})[_0x5a3f63(0x235)](_0x354ed4)[_0x5a3f63(0x279)]():dbPerformance[_0x5a3f63(0x278)](_0x5a3f63(0x188))[_0x5a3f63(0x16c)](_0x354ed4)[_0x5a3f63(0x279)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x26a862=_0x23b51d;let _0xa6db0c=[];if(dbPerformance['has'](_0x26a862(0x188))[_0x26a862(0x269)]()){let _0x3bf592=dbPerformance[_0x26a862(0x278)](_0x26a862(0x188))['cloneDeep']()[_0x26a862(0x25a)](_0x26a862(0x1c0))['value'](),_0x1d3cc7=[...config[_0x26a862(0x172)]];_0x1d3cc7[_0x26a862(0x1bc)]((_0x3d9d1b,_0xdbfe0c)=>_0x3d9d1b[_0x26a862(0x1c0)]>_0xdbfe0c['date']?-0x1:_0xdbfe0c[_0x26a862(0x1c0)]>_0x3d9d1b[_0x26a862(0x1c0)]?0x1:0x0);let _0x730967=0x1,_0x3a5420=[],_0x193404=0x0;_0x3bf592[_0x26a862(0x241)]()[_0x26a862(0x1c1)]()[_0x26a862(0x23b)]((_0x1861d5,_0x28e6b7)=>{const _0x190361=_0x26a862;if(_0x1d3cc7[_0x193404]){if(_0x3bf592[_0x3bf592[_0x190361(0x1e2)]-_0x28e6b7]&&_0x1d3cc7[_0x193404][_0x190361(0x1c0)]==_0x3bf592[_0x3bf592['length']-_0x28e6b7]['date']){if(_0x28e6b7<_0x3bf592[_0x190361(0x1e2)]){let _0xc6f06c=0x0,_0x531852=0x0;_0x3bf592[_0x3bf592[_0x190361(0x1e2)]-_0x28e6b7][_0x190361(0x174)]['forEach'](_0x23e235=>{const _0x2ff951=_0x190361;_0x531852+=_0x23e235[_0x2ff951(0x180)]*_0x23e235[_0x2ff951(0x1ec)];}),_0x1d3cc7[_0x193404]['changes']['forEach'](_0x494aa2=>{const _0xa85328=_0x190361;_0xc6f06c+=_0x494aa2[_0xa85328(0x180)]*_0x494aa2[_0xa85328(0x1ec)];}),_0x730967*=_0xc6f06c/(_0x531852-_0xc6f06c)+0x1;}_0x193404++;}}let _0x3ccca1=0x0;_0x1861d5[_0x190361(0x174)]['forEach'](_0x4acb3d=>{const _0x2879a4=_0x190361;_0x3ccca1+=_0x4acb3d[_0x2879a4(0x180)]*_0x4acb3d[_0x2879a4(0x1ec)];}),_0x3a5420[_0x3bf592[_0x190361(0x1e2)]-_0x28e6b7-0x1]=_0x3ccca1*(_0x730967-0x1);});let _0x172bb8=[];_0x1d3cc7=[...config[_0x26a862(0x172)]]||[];let _0x42474c=0x0;_0x193404=0x0,_0x3bf592[_0x26a862(0x23b)]((_0x58616f,_0x561a9d)=>{const _0x1031bc=_0x26a862;if(_0x1d3cc7[_0x193404]){const _0x2de1d7=fns[_0x1031bc(0x212)](_0x1d3cc7[_0x193404][_0x1031bc(0x1c0)],_0x1031bc(0x1ea),new Date()),_0x369a81=fns[_0x1031bc(0x212)](_0x58616f[_0x1031bc(0x1c0)],_0x1031bc(0x1ea),new Date());if(fns[_0x1031bc(0x173)](_0x2de1d7,_0x369a81)){let _0x3b2850=0x0;_0x1d3cc7[_0x193404][_0x1031bc(0x186)][_0x1031bc(0x23b)](_0x197af4=>{const _0x4cbe96=_0x1031bc;!_0x172bb8[_0x197af4['coin']]?_0x172bb8[_0x197af4[_0x4cbe96(0x233)]]=_0x197af4[_0x4cbe96(0x180)]:(_0x3b2850=_0x172bb8[_0x197af4[_0x4cbe96(0x233)]],_0x172bb8[_0x197af4[_0x4cbe96(0x233)]]+=_0x197af4[_0x4cbe96(0x180)]);const _0x10e672=_0x58616f[_0x4cbe96(0x174)][_0x4cbe96(0x1ac)](_0x2f5094=>_0x2f5094[_0x4cbe96(0x233)]==_0x197af4['coin']);(!_0x10e672||_0x10e672[_0x4cbe96(0x180)]==0x0)&&(_0x42474c+=(-_0x197af4['number']-_0x3b2850)*_0x197af4['price']);}),_0x193404++;}}_0x58616f[_0x1031bc(0x174)][_0x1031bc(0x23b)]((_0x3f8adf,_0x244aa7)=>{const _0x32ab51=_0x1031bc;_0x172bb8[_0x3f8adf['coin']]&&(_0x3f8adf={..._0x3f8adf,'initial':_0x172bb8[_0x3f8adf[_0x32ab51(0x233)]]}),_0x58616f[_0x32ab51(0x174)][_0x244aa7]=_0x3f8adf;}),_0xa6db0c[_0x1031bc(0x16c)]({'date':_0x58616f[_0x1031bc(0x1c0)],'eur':_0x58616f['eur'],'usd':_0x58616f[_0x1031bc(0x23f)],'offset':_0x3a5420[_0x561a9d],'netoffset':_0x42474c,'coins':_0x58616f['coins']});});}return _0xa6db0c;}function emitPerformance(_0x2a24f2){const _0x16278c=_0x23b51d;_0x2a24f2[_0x16278c(0x1e2)]!==0x0?(proxyEmit(_0x16278c(0x234),_0x2a24f2),lastPerformanceEmitted=getDate()):proxyEmit(_0x16278c(0x234),[]);}function getPerf(_0x30d769,_0x15e8c7){const _0x5cf165=_0x23b51d;let _0x4a8286=0x0,_0x14c1d9=0x0,_0x1f7bc2=0x0;_0x30d769[_0x5cf165(0x174)][_0x5cf165(0x23b)](_0x11d35f=>{const _0x2c1b6c=_0x5cf165;_0x4a8286+=_0x11d35f['number']*_0x11d35f[_0x2c1b6c(0x1ec)];});_0x15e8c7&&(_0x4a8286+=_0x30d769['offset']);if(config[_0x5cf165(0x27d)]==='BTC'||config[_0x5cf165(0x27d)]==='ETH')_0x14c1d9=_0x4a8286*_0x30d769['eur'],_0x1f7bc2=_0x4a8286*_0x30d769[_0x5cf165(0x23f)];else{if(config['basecoin']===_0x5cf165(0x25d)||config[_0x5cf165(0x27d)]===_0x5cf165(0x261))_0x14c1d9=_0x4a8286*_0x30d769['eur']/_0x30d769[_0x5cf165(0x23f)],_0x1f7bc2=_0x4a8286;else config[_0x5cf165(0x27d)]===_0x5cf165(0x222)&&(_0x14c1d9=_0x4a8286,_0x1f7bc2=_0x4a8286*_0x30d769[_0x5cf165(0x23f)]/_0x30d769[_0x5cf165(0x1fc)]);}return[_0x4a8286,_0x14c1d9,_0x1f7bc2];}async function getStartingBalances(_0x346c5e,_0x303879=!![]){const _0x267a8a=_0x23b51d;if(_0x346c5e[_0x267a8a(0x1e2)]!==0x0){const [_0x5aeea7,_0x47958a,_0x5ba7af]=getPerf(_0x346c5e[0x0],!![]);let _0x54e424=[];config[_0x267a8a(0x264)]['forEach'](_0x810f79=>{const _0x4ec8c6=_0x267a8a;let _0x3ff727=0x0,_0x21973b;config[_0x4ec8c6(0x172)][_0x4ec8c6(0x23b)](_0x203686=>{const _0x440bb0=_0x4ec8c6;let _0xe60382=_0x203686[_0x440bb0(0x186)][_0x440bb0(0x1ac)](_0x14de36=>_0x14de36['coin']==_0x810f79[_0x440bb0(0x233)]);if(_0xe60382){_0x3ff727+=_0xe60382[_0x440bb0(0x180)];if(!_0x21973b)_0x21973b=_0xe60382[_0x440bb0(0x1ec)];}}),_0x54e424[_0x4ec8c6(0x16c)]({'coin':_0x810f79[_0x4ec8c6(0x233)],'number':_0x3ff727,'initialprice':_0x21973b});});const _0x56ab59={'basecoin':_0x5aeea7,'eur':_0x47958a,'usd':_0x5ba7af,'coins':_0x54e424};if(_0x303879)proxyEmit(_0x267a8a(0x280),_0x56ab59);return _0x56ab59;}}function headlessMode(_0x3def38){const _0x3c82c4=_0x23b51d;let _0x139e3e=_0x3def38[_0x3c82c4(0x264)],_0x554428=_0x3def38[_0x3c82c4(0x179)],_0x5434a8=[];for(let _0x4a66d9 of _0x139e3e){if(_0x4a66d9[_0x3c82c4(0x233)]!=config[_0x3c82c4(0x27d)]){if(_0x4a66d9['delta']>=_0x554428/0x64){if(_0x4a66d9[_0x3c82c4(0x237)])_0x5434a8['push'](_0x4a66d9);}else{if(_0x4a66d9[_0x3c82c4(0x19b)]<=-_0x554428/0x64){if(_0x4a66d9[_0x3c82c4(0x237)])_0x5434a8[_0x3c82c4(0x16c)](_0x4a66d9);}}}}_0x5434a8[_0x3c82c4(0x1e2)]>0x0&&(allOrdersPlaced=![],placeOrder(_0x5434a8));}function notifyBalance(_0x381361){const _0x1fc081=_0x23b51d;let _0x5cac04=_0x381361[_0x1fc081(0x264)],_0x1cea49=_0x381361[_0x1fc081(0x179)],_0x263d13=[];for(let _0x1867b1 of _0x5cac04){if(_0x1867b1[_0x1fc081(0x233)]!=config[_0x1fc081(0x27d)]){if(_0x1867b1[_0x1fc081(0x19b)]>=_0x1cea49/0x64){if(_0x1867b1['valid'])_0x263d13[_0x1fc081(0x16c)](_0x1867b1);}else{if(_0x1867b1[_0x1fc081(0x19b)]<=-_0x1cea49/0x64){if(_0x1867b1[_0x1fc081(0x237)])_0x263d13[_0x1fc081(0x16c)](_0x1867b1);}}}}if(_0x263d13['length']>0x0){let _0x35da20=_0x263d13[_0x1fc081(0x16f)](_0x274dea=>_0x274dea[_0x1fc081(0x233)]);_0x35da20[_0x1fc081(0x1bc)]();let _0x37579a=_0x35da20[_0x1fc081(0x24e)](',\x20');if(lastCoinsToBalance!==_0x37579a)logHistory(_0x1fc081(0x15d),_0x1fc081(0x1a3)+_0x37579a);lastCoinsToBalance=_0x37579a;}}function symbolToCoin(_0x2509db){const _0x129fe4=_0x23b51d;let _0x5bdee2;if(_0x2509db['includes']('/'+config[_0x129fe4(0x27d)]))_0x5bdee2=_0x2509db[_0x129fe4(0x169)]('/'+config[_0x129fe4(0x27d)],'');if(_0x2509db[_0x129fe4(0x284)](config[_0x129fe4(0x27d)]+'/'))_0x5bdee2=_0x2509db[_0x129fe4(0x169)](config[_0x129fe4(0x27d)]+'/','');return _0x5bdee2;}async function unlockOrders(){currentCoins=await getCoins(),validateOrdersState='initial';if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x4ccd68){const _0x2c0b3f=_0x23b51d;if(_0x4ccd68)validateOrdersState=_0x4ccd68;let _0x2a0fae=[],_0x2ba3fd=config[_0x2c0b3f(0x247)]==_0x2c0b3f(0x16a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x2c0b3f(0x23b)](_0x2d96ac=>{const _0x102a0f=_0x2c0b3f;let _0xd0a40f=![];_0x2d96ac[_0x102a0f(0x1e3)]>0x0&&(_0xd0a40f=!![]),_0x2a0fae[_0x102a0f(0x16c)](_0xd0a40f),_0xd0a40f&&config[_0x102a0f(0x247)]!=_0x102a0f(0x16a)&&logHistory(_0x102a0f(0x1b0),_0x102a0f(0x16e)+_0x2d96ac[_0x102a0f(0x248)]+'\x20'+_0x2d96ac[_0x102a0f(0x18c)]+'\x20#'+formatResult(_0x2d96ac[_0x102a0f(0x1e3)],0x8)+'\x20@'+formatResult(_0x2d96ac[_0x102a0f(0x1ec)],0x8));}),_0x2a0fae[_0x2c0b3f(0x23b)]((_0x196cd1,_0x3aa342)=>{const _0x53041c=_0x2c0b3f;if(_0x196cd1)lastOrders[_0x53041c(0x1ed)](_0x3aa342,0x1);});const _0x172899=coolingDown?_0x2c0b3f(0x201):'balancing\x20resumed';if(validateOrdersState==_0x2c0b3f(0x1c4))validateOrdersState='ongoing',_0x2a0fae[_0x2c0b3f(0x284)](![])?config[_0x2c0b3f(0x247)]=='market'?logHistory(_0x2c0b3f(0x1ce),_0x2c0b3f(0x1ef)):logHistory(_0x2c0b3f(0x1ce),_0x2c0b3f(0x1cc)):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x2a0fae[_0x2c0b3f(0x284)](![])){}else config[_0x2c0b3f(0x247)]==_0x2c0b3f(0x16a)?logHistory(_0x2c0b3f(0x15d),'Order(s)\x20validated\x20-\x20'+_0x172899):logHistory(_0x2c0b3f(0x15d),'Order(s)\x20filled\x20-\x20'+_0x172899),await unlockOrders();}else{if(validateOrdersState==_0x2c0b3f(0x21c))_0x2a0fae[_0x2c0b3f(0x284)](![])?config[_0x2c0b3f(0x247)]=='market'?logHistory(_0x2c0b3f(0x15d),_0x2c0b3f(0x17f)+Math[_0x2c0b3f(0x230)](_0x2ba3fd*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x172899):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x2c0b3f(0x230)](_0x2ba3fd*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x172899)):logHistory(_0x2c0b3f(0x15d),_0x2c0b3f(0x1bd)+_0x172899),await unlockOrders();else{if(validateOrdersState==_0x2c0b3f(0x162)){if(config[_0x2c0b3f(0x247)]!=_0x2c0b3f(0x16a))logHistory(_0x2c0b3f(0x15d),_0x2c0b3f(0x1bd)+_0x172899);await unlockOrders();}}}}}async function cancelOrders(){const _0x5633e1=_0x23b51d;lastOrders[_0x5633e1(0x23b)](async _0x4f959b=>{const _0x36fe98=_0x5633e1;try{const _0x1a4411=await exchange[_0x36fe98(0x226)](_0x4f959b[_0x36fe98(0x220)],_0x4f959b[_0x36fe98(0x248)]);}catch(_0x215d38){if(_0x215d38[_0x36fe98(0x189)]()['includes'](_0x36fe98(0x18b))){}else await handleError(_0x215d38,'cancelOrders()');}});}async function initCoinResults(){const _0xea90c=_0x23b51d;let _0x8bab59=[];config[_0xea90c(0x264)][_0xea90c(0x23b)](_0x5cf8d7=>{const _0xa76ac8=_0xea90c;if(!_0x5cf8d7[_0xa76ac8(0x18d)]&&_0x5cf8d7['coin']!=config[_0xa76ac8(0x27d)]){let _0x5c9a6b=dbCoinResults[_0xa76ac8(0x278)](_0xa76ac8(0x174))[_0xa76ac8(0x1ac)]({'coin':_0x5cf8d7[_0xa76ac8(0x233)]})[_0xa76ac8(0x269)]();if(!_0x5c9a6b){const _0x4c7800=currentCoins[_0xa76ac8(0x1ac)](_0x561aa2=>_0x561aa2['coin']==_0x5cf8d7[_0xa76ac8(0x233)]),_0x4cf27f=global['ticker'][noslash(_0x5cf8d7['symbol'])];let _0x3798f3=_0x4c7800?_0x4c7800[_0xa76ac8(0x180)]:null,_0x200044=_0x5cf8d7[_0xa76ac8(0x1c1)]?0x1/_0x4cf27f:_0x4cf27f,_0x4bb583;config['liquidity'][_0xa76ac8(0x23b)](_0x2917f9=>{const _0x179b62=_0xa76ac8;!_0x4bb583&&(_0x4bb583=_0x2917f9['changes'][_0x179b62(0x1ac)](_0x215ef8=>_0x215ef8[_0x179b62(0x233)]==_0x5cf8d7[_0x179b62(0x233)]),_0x4bb583&&(_0x3798f3=_0x4bb583[_0x179b62(0x180)],_0x200044=_0x4bb583[_0x179b62(0x1ec)]));}),_0x8bab59[_0xa76ac8(0x16c)]({'coin':_0x5cf8d7[_0xa76ac8(0x233)],'number':_0x3798f3,'price':_0x200044});}}}),_0x8bab59[_0xea90c(0x23b)](_0x4d585e=>{const _0x57ab81=_0xea90c,_0x240aaa={'coin':_0x4d585e[_0x57ab81(0x233)],'number':_0x4d585e[_0x57ab81(0x180)],'breakeven':_0x4d585e['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x57ab81(0x278)](_0x57ab81(0x174))[_0x57ab81(0x16c)](_0x240aaa)[_0x57ab81(0x279)]();});}async function updateCoinResults(_0x5b3c25,_0x95f9df=![]){const _0x188d48=_0x23b51d;let _0x434026,_0x43ff35,_0x31d768,_0x4a2921,_0x1dc807,_0x509b62,_0x37fac1=dbCoinResults[_0x188d48(0x278)]('coins')[_0x188d48(0x1ac)]({'coin':_0x5b3c25[_0x188d48(0x233)]})['value']();!_0x37fac1&&await initCoinResults();_0x5b3c25[_0x188d48(0x1c1)]&&(_0x509b62={'filled':_0x5b3c25['filled']*_0x5b3c25[_0x188d48(0x1ec)],'amount':_0x5b3c25[_0x188d48(0x1e3)]*_0x5b3c25[_0x188d48(0x1ec)],'side':_0x5b3c25[_0x188d48(0x18c)]=='sell'?_0x188d48(0x18e):'sell','price':0x1/_0x5b3c25[_0x188d48(0x1ec)]},_0x5b3c25={..._0x5b3c25,..._0x509b62});if(_0x95f9df)_0x43ff35=_0x5b3c25[_0x188d48(0x18c)]=='buy'?_0x37fac1['number']+_0x5b3c25[_0x188d48(0x1e3)]:_0x37fac1[_0x188d48(0x180)]-_0x5b3c25[_0x188d48(0x1e3)];else{const _0x267489=currentCoins[_0x188d48(0x1ac)](_0x48f6fc=>_0x48f6fc[_0x188d48(0x233)]==_0x5b3c25['coin']);_0x43ff35=_0x267489['number'];}if(_0x5b3c25[_0x188d48(0x17c)]&&_0x5b3c25[_0x188d48(0x17c)]['currency']==config[_0x188d48(0x27d)])_0x434026=_0x5b3c25['fee'][_0x188d48(0x1f0)];else{if(_0x5b3c25[_0x188d48(0x17c)]&&_0x5b3c25[_0x188d48(0x17c)][_0x188d48(0x1de)]==_0x188d48(0x259)&&!_0x95f9df)_0x434026=_0x5b3c25[_0x188d48(0x17c)]['cost']*global[_0x188d48(0x17e)][_0x188d48(0x259)+config[_0x188d48(0x27d)]];else _0x434026=defaultFee*_0x5b3c25['filled']*_0x5b3c25[_0x188d48(0x1ec)];}_0x5b3c25[_0x188d48(0x18c)]==_0x188d48(0x18e)?(_0x31d768=_0x43ff35!=0x0?(_0x37fac1[_0x188d48(0x1e6)]*_0x37fac1[_0x188d48(0x180)]+_0x5b3c25[_0x188d48(0x1ec)]*(_0x43ff35-_0x37fac1[_0x188d48(0x180)])+_0x434026)/_0x43ff35:0x0,_0x4a2921=_0x37fac1['realized']):(_0x31d768=_0x43ff35!=0x0?(_0x37fac1[_0x188d48(0x1e6)]*_0x37fac1[_0x188d48(0x180)]-_0x5b3c25['price']*(_0x37fac1[_0x188d48(0x180)]-_0x43ff35)+_0x434026)/_0x43ff35:0x0,_0x4a2921=_0x37fac1[_0x188d48(0x184)]+(_0x5b3c25[_0x188d48(0x1ec)]-_0x37fac1[_0x188d48(0x1e6)])*_0x5b3c25[_0x188d48(0x1e3)]);_0x1dc807=(_0x5b3c25['price']-_0x31d768-_0x434026/_0x5b3c25['filled'])*_0x43ff35;let _0x3db0ef={'coin':_0x5b3c25['coin'],'number':_0x43ff35,'breakeven':formatResult(_0x31d768,0x8),'realized':formatResult(_0x4a2921,0x8),'unrealized':formatResult(_0x1dc807,0x8),'fees':formatResult(_0x37fac1[_0x188d48(0x16b)]+_0x434026,0x8),'sells':_0x5b3c25[_0x188d48(0x18c)]==_0x188d48(0x1dc)?_0x37fac1[_0x188d48(0x19e)]+0x1:_0x37fac1[_0x188d48(0x19e)],'buys':_0x5b3c25[_0x188d48(0x18c)]=='buy'?_0x37fac1[_0x188d48(0x208)]+0x1:_0x37fac1[_0x188d48(0x208)]};dbCoinResults[_0x188d48(0x278)](_0x188d48(0x174))[_0x188d48(0x1ac)]({'coin':_0x5b3c25['coin']})[_0x188d48(0x235)](_0x3db0ef)[_0x188d48(0x279)]();if(!_0x95f9df){if(_0x5b3c25[_0x188d48(0x17c)]&&_0x5b3c25[_0x188d48(0x17c)][_0x188d48(0x1de)]=='BNB'){const _0x5bbbeb=currentCoins[_0x188d48(0x1ac)](_0x2a05d1=>_0x2a05d1[_0x188d48(0x233)]==_0x188d48(0x259));if(_0x5bbbeb){let _0x3da47b=dbCoinResults[_0x188d48(0x278)]('coins')[_0x188d48(0x1ac)]({'coin':_0x188d48(0x259)})[_0x188d48(0x269)]();_0x3db0ef={..._0x3da47b,'number':_0x5bbbeb[_0x188d48(0x180)]},dbCoinResults[_0x188d48(0x278)](_0x188d48(0x174))['find']({'coin':_0x188d48(0x259)})[_0x188d48(0x235)](_0x3db0ef)['write']();}}}}async function placeOrder(_0x363b3b){const _0x478258=_0x23b51d,_0x36727c=config[_0x478258(0x247)]=='market'?_0x478258(0x16a):'limit';if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x374a6c of _0x363b3b){let _0x2ae15f,_0x4c6ac5,_0x5af727,_0x4d8c81,_0x4caf5b,_0x408fc3=_0x374a6c[_0x478258(0x248)];try{const _0x5cc9b0=await exchange[_0x478258(0x27c)]([_0x408fc3]),_0x263f71=_0x5cc9b0[_0x408fc3];_0x2ae15f=_0x374a6c['reverse']?0x1/_0x374a6c[_0x478258(0x217)]:_0x374a6c[_0x478258(0x217)],_0x4c6ac5=_0x263f71['bid'],_0x5af727=_0x263f71[_0x478258(0x183)];_0x374a6c[_0x478258(0x1c1)]?(_0x4d8c81=_0x374a6c[_0x478258(0x18c)]==_0x478258(0x18e)?'sell':_0x478258(0x18e),_0x4caf5b=Math[_0x478258(0x1ae)](_0x374a6c[_0x478258(0x252)])/_0x2ae15f):(_0x4d8c81=_0x374a6c['side'],_0x4caf5b=Math[_0x478258(0x1ae)](_0x374a6c[_0x478258(0x252)]));_0x36727c==_0x478258(0x209)&&(config[_0x478258(0x247)]==_0x478258(0x20e)&&(_0x2ae15f=_0x4d8c81==_0x478258(0x18e)?_0x4c6ac5:_0x5af727),config[_0x478258(0x247)]=='limit-low'&&(_0x2ae15f=_0x4d8c81=='buy'?_0x5af727:_0x4c6ac5));_0x4caf5b=formatResult(_0x4caf5b,0x8),_0x2ae15f=formatResult(_0x2ae15f,0x8);const _0xc456e3=await exchange[_0x478258(0x203)](_0x408fc3,_0x36727c,_0x4d8c81,_0x4caf5b,_0x2ae15f);lastOrders[_0x478258(0x16c)]({'orderId':_0xc456e3['id'],'symbol':_0x408fc3,'coin':_0x374a6c['coin'],'side':_0x4d8c81,'reverse':_0x374a6c[_0x478258(0x1c1)],'amount':_0xc456e3[_0x478258(0x273)],'filled':0x0,'price':_0xc456e3[_0x478258(0x1ec)],'fee':_0xc456e3['fee']});const _0x1aacee=_0x4d8c81=='sell'?config[_0x478258(0x231)]?String[_0x478258(0x270)]('0x'+config[_0x478258(0x231)])+'\x20':'':config[_0x478258(0x197)]?String[_0x478258(0x270)]('0x'+config[_0x478258(0x197)])+'\x20':'',_0x268f5c=_0x36727c==_0x478258(0x16a)?_0x478258(0x1b4):config[_0x478258(0x247)]=='limit-high'?_0x478258(0x1b5):_0x478258(0x1ad);if(_0x36727c==_0x478258(0x16a))logHistory('order',''+_0x1aacee+_0x268f5c+_0x478258(0x244)+_0x408fc3+'\x20'+_0x4d8c81+'\x20#'+formatResult(_0xc456e3[_0x478258(0x1e3)],0x8)+'\x20@'+formatResult(_0xc456e3[_0x478258(0x1ec)],0x8));else logHistory('order',''+_0x1aacee+_0x268f5c+'\x20order:\x20'+_0x408fc3+'\x20'+_0x4d8c81+'\x20#'+formatResult(_0xc456e3[_0x478258(0x273)],0x8)+'\x20@'+formatResult(_0xc456e3[_0x478258(0x1ec)],0x8));let _0x2721c8=currentCoins['find'](_0x24bed5=>_0x24bed5[_0x478258(0x233)]==_0x374a6c[_0x478258(0x233)]);_0x2721c8[_0x478258(0x1b0)]=!![];if(config['cooldown']!=0x0){let _0x3e8a10=null;if(cooldownTracker['length']==config[_0x478258(0x165)]-0x1)_0x3e8a10=cooldownTracker['shift']();const _0x5c7dd5=getTimeStamp();cooldownTracker[_0x478258(0x16c)](_0x5c7dd5);if(_0x3e8a10){const _0x2975ef=fns['differenceInSeconds'](new Date(_0x5c7dd5),new Date(_0x3e8a10));if(_0x2975ef<cooldownInterval){logHistory(_0x478258(0x1ce),'Executed\x20'+config[_0x478258(0x165)]+_0x478258(0x229)+cooldownInterval/0x3c+_0x478258(0x17d)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x48c5b9){if(_0x48c5b9[_0x478258(0x189)]()[_0x478258(0x284)]('MIN_NOTIONAL'))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x408fc3);else{if(_0x48c5b9[_0x478258(0x189)]()[_0x478258(0x284)](_0x478258(0x1b7)))logHistory(_0x478258(0x1ce),_0x478258(0x26b)+_0x408fc3);else await handleError(_0x48c5b9,_0x478258(0x199),_0x408fc3);}}}allOrdersPlaced=!![];if(lastOrders['length']!=0x0){lockOrders=!![],validateOrdersState=_0x478258(0x1c4),setTimeout(function(){validateOrders();},0x1388);const _0x35125f=config[_0x478258(0x247)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x478258(0x255)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5c302a=_0x478258;validateOrders(_0x5c302a(0x21c));},_0x35125f);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x478258(0x15d),_0x478258(0x1a4)));}else{if(coolingDown)!config[_0x478258(0x193)]&&logHistory('error',_0x478258(0x285));else lockOrders&&(!config[_0x478258(0x193)]&&(config['ordertype']==_0x478258(0x16a)?logHistory(_0x478258(0x1ce),_0x478258(0x218)):logHistory(_0x478258(0x1ce),_0x478258(0x22f))));}}function restoreOrders(){const _0x531433=_0x23b51d;let _0x1c09e9;lockOrders=!![],validateOrdersState=_0x531433(0x1cf),currentCoins[_0x531433(0x23b)](_0x3bce8c=>{const _0x4e9dcc=_0x531433,_0x1d5453=allOpenOrders[_0x4e9dcc(0x1ac)](_0xbfb2dd=>_0xbfb2dd[_0x4e9dcc(0x248)]==_0x3bce8c[_0x4e9dcc(0x248)]);_0x1d5453&&(lastOrders['push']({'orderId':_0x1d5453['id'],'symbol':_0x3bce8c['symbol'],'coin':_0x3bce8c[_0x4e9dcc(0x233)],'side':_0x1d5453[_0x4e9dcc(0x18c)],'reverse':_0x3bce8c['reverse'],'amount':_0x1d5453[_0x4e9dcc(0x273)],'filled':0x0,'price':_0x1d5453[_0x4e9dcc(0x1ec)],'fee':_0x1d5453[_0x4e9dcc(0x17c)]}),_0x3bce8c[_0x4e9dcc(0x1b0)]=!![],_0x1c09e9=_0x1d5453['timestamp']);});const _0x24993d=new Date()['getTime'](),_0x3b980d=config[_0x531433(0x247)]==_0x531433(0x16a)?validateOrderTimeout*0x3c*0x3e8:config[_0x531433(0x255)]*0x3c*0x3e8;if(_0x1c09e9+_0x3b980d>_0x24993d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xd422de=_0x531433;validateOrders(_0xd422de(0x21c));},_0x1c09e9+_0x3b980d-_0x24993d);}else validateOrders(_0x531433(0x21c));}function sendPortfolioTelegram(){const _0x5e5015=_0x23b51d,_0x5afa5e=[_0x5e5015(0x222),_0x5e5015(0x25d),_0x5e5015(0x261)],_0x5a91c6=_0x5afa5e[_0x5e5015(0x284)](config[_0x5e5015(0x27d)])?0x2:0x8;let _0xed68e0='';if(config[_0x5e5015(0x22a)])_0xed68e0=config['botname']+_0x5e5015(0x251);else _0xed68e0=_0x5e5015(0x1f4)+botID+_0x5e5015(0x251);_0xed68e0+='<pre>',_0xed68e0+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xed68e0+=_0x5e5015(0x1a7),currentCoins[_0x5e5015(0x23b)](_0x4b8af2=>{const _0x54fb40=_0x5e5015;_0xed68e0+=_0x4b8af2[_0x54fb40(0x233)][_0x54fb40(0x15b)](0x7)+'|\x20'+formatPad(_0x4b8af2[_0x54fb40(0x178)],0x2,0x6)+'|\x20'+formatPad(_0x4b8af2['target'],0x2,0x6)+'|\x20'+formatPad(_0x4b8af2['delta']*0x64,0x2,0x6)+'\x0a';}),_0xed68e0+=_0x5e5015(0x26f),process[_0x5e5015(0x1f3)]({'telegrammsg':_0xed68e0},_0x5f4bfb=>{});}function formatPad(_0x277372,_0x44b9be,_0x34e642){const _0x309bf5=_0x23b51d,_0x1a8ee0=formatResultString(_0x277372,_0x44b9be);return _0x1a8ee0?_0x1a8ee0[_0x309bf5(0x1b6)](_0x34e642):''[_0x309bf5(0x1b6)](_0x34e642);}function logHistory(_0x54e2d4,_0x5360c1,_0x42e95f=''){const _0x3b527e=_0x23b51d;let _0x261159={'time':getTimeStamp(),'type':_0x54e2d4,'event':_0x5360c1};dbLogs[_0x3b527e(0x278)](_0x3b527e(0x1ab))[_0x3b527e(0x16c)](_0x261159)[_0x3b527e(0x279)]();if(_0x42e95f=='')_0x42e95f=_0x5360c1;proxyEmit(_0x3b527e(0x168),{'log':_0x261159,'summary':_0x42e95f}),process[_0x3b527e(0x1f3)]({'telegram':{..._0x261159,'botname':config[_0x3b527e(0x176)],'showname':config[_0x3b527e(0x22a)]}},_0x3fbbd4=>{}),logging(''+_0x261159[_0x3b527e(0x168)]);}function emitHistory(_0xf7fde9={}){const _0xb1ecf5=_0x23b51d;Object['keys'](_0xf7fde9)[_0xb1ecf5(0x1e2)]==0x0&&(_0xf7fde9={'type':['order',_0xb1ecf5(0x168)],'event':'','page':0x1});if(_0xf7fde9['type'][_0xb1ecf5(0x284)](_0xb1ecf5(0x168)))_0xf7fde9[_0xb1ecf5(0x19d)]['splice'](_0xf7fde9[_0xb1ecf5(0x19d)][_0xb1ecf5(0x1f1)](_0xb1ecf5(0x168)),0x1,'error',_0xb1ecf5(0x15d));if(dbLogs['has'](_0xb1ecf5(0x1ab))[_0xb1ecf5(0x269)]()){let _0x153cd6=dbLogs[_0xb1ecf5(0x278)](_0xb1ecf5(0x1ab))[_0xb1ecf5(0x192)](_0x4a52a4=>{const _0x2d2d81=_0xb1ecf5;if(_0xf7fde9[_0x2d2d81(0x19d)][_0x2d2d81(0x1e2)]==0x0)return![];else return _0xf7fde9[_0x2d2d81(0x19d)][_0x2d2d81(0x284)](_0x4a52a4[_0x2d2d81(0x19d)]);})[_0xb1ecf5(0x192)](_0x410fec=>{const _0x1247d8=_0xb1ecf5;if(_0xf7fde9[_0x1247d8(0x168)]=='')return!![];else return _0x410fec[_0x1247d8(0x168)][_0x1247d8(0x1d7)]()[_0x1247d8(0x284)](_0xf7fde9[_0x1247d8(0x168)][_0x1247d8(0x1d7)]());})['sortBy'](_0xb1ecf5(0x1e9)),_0x4c1b81=_0x153cd6[_0xb1ecf5(0x269)]()[_0xb1ecf5(0x1e2)];_0x153cd6=_0x153cd6[_0xb1ecf5(0x1c1)]()['slice']((_0xf7fde9[_0xb1ecf5(0x271)]-0x1)*logPageSize,_0xf7fde9['page']*logPageSize-0x1)[_0xb1ecf5(0x1c1)]()[_0xb1ecf5(0x269)](),proxyEmit(_0xb1ecf5(0x161),{'logs':_0x153cd6,'total':_0x4c1b81});}else proxyEmit(_0xb1ecf5(0x161),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3c9216){const _0x203bca=_0x23b51d;if(dbLogs[_0x203bca(0x20c)]('logs')[_0x203bca(0x269)]()){const _0x310867=dbLogs[_0x203bca(0x278)](_0x203bca(0x1ab))[_0x203bca(0x25a)](_0x203bca(0x1e9))[_0x203bca(0x192)](_0x25d83c=>{const _0x13e816=_0x203bca;return _0x25d83c[_0x13e816(0x19d)]==_0x13e816(0x1b0);})[_0x203bca(0x269)]();dbLogs['get'](_0x203bca(0x1ab))[_0x203bca(0x260)]()[_0x203bca(0x279)](),dbLogs[_0x203bca(0x278)]('logs')[_0x203bca(0x235)](_0x310867)[_0x203bca(0x279)](),emitHistory(_0x3c9216);}}async function pauseBot(_0x2aac82=''){const _0x3efded=_0x23b51d,_0x958aa4=new Date()[_0x3efded(0x1f5)]();if(!lastBotPause)lastBotPause=new Date()[_0x3efded(0x1f5)](),consecutivePauses=0x1;else{if(_0x958aa4-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process['send']({'stop':_0x3efded(0x1e4)},_0x87f004=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x2aac82)_0x2aac82+=_0x3efded(0x239);logHistory(_0x3efded(0x1ce),_0x2aac82+_0x3efded(0x1ee)+pauseBotInterval/0xea60+_0x3efded(0x159)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x31036f=_0x23b51d;process[_0x31036f(0x1f3)]({'stop':_0x31036f(0x15c)},_0x238974=>{}),await sleep(0x7d0);}async function handleError(_0x440e1c,_0x6e0f20,_0x16ac4b=''){const _0x51f241=_0x23b51d;if(_0x440e1c['toString']()[_0x51f241(0x284)]('DDoSProtection'))await pauseBot(_0x51f241(0x23a));else{if(_0x440e1c['toString']()['includes'](_0x51f241(0x1c7)))await pauseBot(_0x51f241(0x166));else{if(_0x440e1c[_0x51f241(0x189)]()[_0x51f241(0x284)]('RequestTimeout'))await pauseBot('Binance\x20not\x20responding');else{if(_0x440e1c[_0x51f241(0x189)]()[_0x51f241(0x284)]('API-key\x20format\x20invalid'))logHistory(_0x51f241(0x1ce),_0x6e0f20+_0x51f241(0x210)),logHistory('error',_0x51f241(0x1af)),await killBot();else{if(_0x440e1c[_0x51f241(0x189)]()['includes']('AuthenticationError'))logHistory(_0x51f241(0x1ce),_0x6e0f20+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x51f241(0x1ce),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x440e1c['toString']()[_0x51f241(0x284)](_0x51f241(0x185)))logHistory(_0x51f241(0x1ce),_0x6e0f20+_0x51f241(0x1e5)),logHistory(_0x51f241(0x1ce),_0x51f241(0x1af)),await killBot();else{if(_0x440e1c[_0x51f241(0x189)]()[_0x51f241(0x284)](_0x51f241(0x26d)))logHistory(_0x51f241(0x1ce),_0x6e0f20+_0x51f241(0x1eb)),logHistory('error',_0x51f241(0x1af)),await killBot();else{if(_0x440e1c[_0x51f241(0x189)]()[_0x51f241(0x284)](_0x51f241(0x1b3)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process['send']({'stop':_0x51f241(0x1e4)},_0x51be4b=>{});else _0x440e1c[_0x51f241(0x189)]()[_0x51f241(0x284)](_0x51f241(0x25c))?logHistory(_0x51f241(0x1ce),_0x6e0f20+_0x51f241(0x1ba)+_0x16ac4b):(logging(_0x6e0f20+'\x20|\x20Error\x20details:\x20',_0x440e1c),await pauseBot(_0x51f241(0x275)));}}}}}}}}function formatResult(_0x5be556,_0x196f10){const _0x488939=_0x23b51d;return parseFloat(_0x5be556[_0x488939(0x21a)](_0x196f10));}function formatResultTruncate(_0x1e0d13,_0x22806d){const _0x585585=_0x23b51d;let _0x3057a3=formatResultString(_0x1e0d13,0xa),_0x3baf3a=_0x3057a3[_0x585585(0x1f1)]('.');return _0x3baf3a!=-0x1&&(_0x3057a3=_0x3057a3[_0x585585(0x241)](0x0,_0x3baf3a+_0x22806d+0x1)),Number(_0x3057a3);}function formatResultString(_0x56d6ea,_0x189283){const _0x5f2dde=_0x23b51d;let _0x53674;if(!(''+_0x56d6ea)[_0x5f2dde(0x284)]('e'))_0x53674=+(Math['round'](_0x56d6ea+'e+'+_0x189283)+'e-'+_0x189283);else{let _0x53122c=(''+_0x56d6ea)['split']('e'),_0x4aa731='';+_0x53122c[0x1]+_0x189283>0x0&&(_0x4aa731='+'),_0x53674=+(Math['round'](+_0x53122c[0x0]+'e'+_0x4aa731+(+_0x53122c[0x1]+_0x189283))+'e-'+_0x189283);}return Number(_0x53674)[_0x5f2dde(0x21a)](_0x189283);}function logging(_0x599e18,_0x8bf1c=''){const _0x2d2c54=_0x23b51d;if(config[_0x2d2c54(0x22a)])console[_0x2d2c54(0x195)](getTimeStamp()+':\x20'+config['botname']+_0x2d2c54(0x15a)+_0x599e18,_0x8bf1c);else console[_0x2d2c54(0x195)](getTimeStamp()+_0x2d2c54(0x23d)+botID+_0x2d2c54(0x15a)+_0x599e18,_0x8bf1c);}function getServerTime(){const _0x5b7e29=_0x23b51d,_0x319780=new Date();return _0x319780[_0x5b7e29(0x1c6)]()+'/'+(_0x319780[_0x5b7e29(0x158)]()+0x1)[_0x5b7e29(0x189)]()[_0x5b7e29(0x1b6)](0x2,'0')+'/'+_0x319780[_0x5b7e29(0x281)]()['toString']()[_0x5b7e29(0x1b6)](0x2,'0')+'\x20'+_0x319780[_0x5b7e29(0x24b)]()[_0x5b7e29(0x189)]()[_0x5b7e29(0x1b6)](0x2,'0')+':'+_0x319780[_0x5b7e29(0x205)]()[_0x5b7e29(0x189)]()[_0x5b7e29(0x1b6)](0x2,'0')+':'+_0x319780['getSeconds']()[_0x5b7e29(0x189)]()[_0x5b7e29(0x1b6)](0x2,'0');}function getTimeStamp(){const _0x3d8e29=_0x23b51d,_0x36f1e5=shiftedTime();return _0x36f1e5['getFullYear']()+'/'+(_0x36f1e5[_0x3d8e29(0x158)]()+0x1)[_0x3d8e29(0x189)]()['padStart'](0x2,'0')+'/'+_0x36f1e5[_0x3d8e29(0x281)]()[_0x3d8e29(0x189)]()[_0x3d8e29(0x1b6)](0x2,'0')+'\x20'+_0x36f1e5[_0x3d8e29(0x24b)]()['toString']()[_0x3d8e29(0x1b6)](0x2,'0')+':'+_0x36f1e5[_0x3d8e29(0x205)]()[_0x3d8e29(0x189)]()[_0x3d8e29(0x1b6)](0x2,'0')+':'+_0x36f1e5['getSeconds']()['toString']()[_0x3d8e29(0x1b6)](0x2,'0');}function getDate(){const _0x5922a3=_0x23b51d,_0x43885a=shiftedTime();return _0x43885a[_0x5922a3(0x1c6)]()+'/'+(_0x43885a[_0x5922a3(0x158)]()+0x1)[_0x5922a3(0x189)]()[_0x5922a3(0x1b6)](0x2,'0')+'/'+_0x43885a['getDate']()[_0x5922a3(0x189)]()[_0x5922a3(0x1b6)](0x2,'0');}function getHour(){const _0x502878=_0x23b51d,_0x255cc5=shiftedTime();return _0x255cc5['getHours']()[_0x502878(0x189)]()[_0x502878(0x1b6)](0x2,'0');}function sleep(_0x145bb7){return new Promise(_0x45db21=>setTimeout(_0x45db21,_0x145bb7));}function shiftedTime(){const _0xc8a30a=_0x23b51d,_0xd59008=new Date();let _0x37f046=_0xd59008;if(config&&config[_0xc8a30a(0x1be)]!==0x0)_0x37f046=fns[_0xc8a30a(0x200)](_0xd59008,{'hours':config['timeshift']});return _0x37f046;}