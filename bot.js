const _0x278c3b=_0x5788;(function(_0x4fe237,_0x329e5b){const _0x539555=_0x5788,_0x18cbb0=_0x4fe237();while(!![]){try{const _0x44bed9=-parseInt(_0x539555(0x238))/0x1+-parseInt(_0x539555(0x1cb))/0x2*(parseInt(_0x539555(0x15b))/0x3)+parseInt(_0x539555(0x1a5))/0x4*(-parseInt(_0x539555(0x1e1))/0x5)+-parseInt(_0x539555(0x1b1))/0x6*(-parseInt(_0x539555(0x286))/0x7)+-parseInt(_0x539555(0x2ac))/0x8*(-parseInt(_0x539555(0x2a1))/0x9)+-parseInt(_0x539555(0x1f0))/0xa+-parseInt(_0x539555(0x195))/0xb*(-parseInt(_0x539555(0x1f4))/0xc);if(_0x44bed9===_0x329e5b)break;else _0x18cbb0['push'](_0x18cbb0['shift']());}catch(_0x547611){_0x18cbb0['push'](_0x18cbb0['shift']());}}}(_0x259d,0x82e32));const _0x174c73=function(){let _0x22ce58=!![];return function(_0x394d21,_0x1345c5){const _0x46c8c2=_0x22ce58?function(){const _0x565349=_0x5788;if(_0x1345c5){const _0x47dc16=_0x1345c5[_0x565349(0x281)](_0x394d21,arguments);return _0x1345c5=null,_0x47dc16;}}:function(){};return _0x22ce58=![],_0x46c8c2;};}(),_0x4f0d68=_0x174c73(this,function(){const _0x43fccf=_0x5788;return _0x4f0d68[_0x43fccf(0x1fe)]()[_0x43fccf(0x29e)]('(((.+)+)+)+$')['toString']()[_0x43fccf(0x1c3)](_0x4f0d68)[_0x43fccf(0x29e)](_0x43fccf(0x299));});_0x4f0d68();'use strict';const ccxt=require(_0x278c3b(0x183))[_0x278c3b(0x1aa)],low=require(_0x278c3b(0x27e)),FileSync=require(_0x278c3b(0x28b)),fs=require('fs'),fns=require(_0x278c3b(0x186)),Crypt=require(_0x278c3b(0x2bc))[_0x278c3b(0x170)],util=require(_0x278c3b(0x229));let exchange;global['ticker']={},global[_0x278c3b(0x22c)]={};function _0x259d(){const _0x532e8d=['threshold','2.5.0','InsufficientFunds','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Unknown\x20error\x20occured','liquidity','openOrders','initial','limits','1\x20-\x20Validate\x20orders:\x20','cancelLoading','side','toLowerCase','find','watchOrders','/EUR','split','remove','no\x20open\x20orders','BNB/','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','botname','Order\x20amount\x20is\x20invalid:\x20','datetime','3\x20-\x20handling\x20FILLED\x20order:\x20','YOYOW/','%\x20\x0a','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fiat','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order\x20filled:\x20','portfolio','sell','UNLOCKING','Net\x20effect','event','/backup/','balances','RSA-OAEP','Pausing\x20for\x20','restart','toUpperCase','freeze','limit','\x20|\x20lock\x20orders:\x20','No\x20more\x20open\x20orders\x20-\x20','cancel','InvalidNonce','\x20|\x20','price','-config.json','shift','sells',':\x20Bot\x20','time','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','<b>Bot\x20','loading-canceled','getCoins()','fetchTicker','Binance','loadSymbols()','0\x20-\x20EXECUTION:\x20','amount','XEM/BUSD','decrypt','stringify','lowdb','Bot\x20','DAI/','apply','getMonth','none','1\x20-\x20Unlock\x20orders','getHours','21YBhbkN','buys','exchanges','\x20minutes','excluded','lowdb/adapters/FileSync','OrderNotFound','sortBy','balancing\x20resumed','remainingSymbols','\x20change','slice','fee','full','storeConfiguration','argv','\x20>\x20[DEBUG]\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','/output-000.log','(((.+)+)+)+$','2\x20-\x20Orders\x20unlocked','/USD','filled','indexOf','search','./logs/','splice','921663KfVPKB','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Order(s)\x20filled\x20-\x20','leftTxt','Unfilled\x20order(s)\x20canceled\x20after\x20','changes','configuration','001','isEqual','2\x20-\x20FILLED\x20unknown\x20order:\x20','starting-balance-','24crASxv','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','cancelOrder','format','breakeven','getSeconds','write','add','privateKey','getFiat()','coin-loading-progress','date','apiSecret','exec','customId','\x20not\x20responding','hybrid-crypto-js','startnumber','fetchClosedOrders','timer:','ORDERS.UNLOCKED','args','balancing\x20resumes\x20when\x20cooldown\x20ends','123AztfHz','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','2\x20-\x20Handled\x20open\x20orders','number','sha256','cloneDeep','ticker','concat','2\x20-\x20FILLED\x20known\x20order:\x20','mkdirSync','toFixed','differenceInSeconds','Limit\x20(low-margin)','currency','coins','basecoin','push','fees','2.6.0','close','getPortfolio','Crypt','coin','limit-low','offset','net-basecoin','function','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','createWriteStream','entries','botID','recovery','deleteHistoryAlerts','cost','min','filter','<b>','BTC','defaults','canceled','ccxt','emojibuy','getCoinNumber()','date-fns','join','***','placeOrder()','replace','./config/','yyyy-MM-dd\x27T\x27HH:mm:ss','getFullYear','symbol','sendPortfolioTelegram','realized','error','\x20:\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20API\x20key\x20is\x20invalid','55otGOGl','Manual\x20balancing\x20required','log','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','netoffset','startdate','\x20portfolio:</b>\x20\x0a\x0a','usd','Executing\x20exchange\x20reload','RequestTimeout','reverse','getTime','includes','ORDERS.LOCKED','version','timeout','48jdzrEQ','getMinutes','type','success','final','pro','bb-settings.json','LOCKED','loadMarkets','./version.json','debug','running','1957962AzCSAv','milliseconds','abs','ordertype','cooldown','showname','data','ExchangeNotAvailable','substring','message','ongoing','random','eur','getDate','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','string','performance','AuthenticationError','constructor','\x20-\x20bot\x20not\x20started','Failed\x20to\x20load\x20coin\x20data\x20for\x20','bid',',\x20must\x20be\x20a\x203\x20digit\x20number','-------------------------------\x0a','clientOrderId','keys','20146usIHZy','</pre>','forEach','enabled','startprice','valid','\x20>\x20','-results.json','padStart','cancelOrders()','parseISO','map','\x20not\x20available','emojisell','BUSD','\x20API\x20secret\x20is\x20invalid','orderstatus','closed','order','\x20hour','warning','USDT','90885ykskma','initclient','DDoSProtection','existsSync','settings','USD','createOrder','recreateCoinResults()','Error:\x20Invalid\x20argument\x20','fetchTickers','storeHeadless','send','\x20order:\x20','length','total','8487520JiZpJW','parse','round','timeshift','3924132gajnFB','average','limit-high','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','BNB','rightTxt','delta','ask','watchTrades','toString','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','get','\x20minutes\x20-\x20','last','bot','exchange','timestamp','UNLOCKED','assign','sort','value','2\x20-\x20Validate\x20orders:\x20','Limit\x20(high-margin)','showConfig','net-fiat','Market','buy','writeFile','set','getStartingBalances','ETH','findIndex','progress','uncaughtException','fromCodePoint','has','bot-','logs','symbols','API-key\x20format\x20invalid','precision','HOT/BTC','fetchBalance','trade','\x20API\x20blocked\x20(DDoS\x20protection)','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','Order(s)\x20not\x20validated\x20after\x20','2.3.5','************','change24h','status','target','util','\x20exchange','MIN_NOTIONAL','change','headless','yyyy/MM/dd','test','1\x20-\x20Handle\x20open\x20orders','apiKey','1\x20-\x20FILLED:\x20','.json','distribution','configuration-stored','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','market','905274wgyKFh','EUR','open'];_0x259d=function(){return _0x532e8d;};return _0x259d();}const exceptions=[_0x278c3b(0x280),_0x278c3b(0x21e),'HOT/EUR',_0x278c3b(0x27b),'NANO/',_0x278c3b(0x254)];let debugLoggingScreen=![],config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x278c3b(0x265)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x278c3b(0x206)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x278c3b(0x1ae))[_0x278c3b(0x1a3)],botID=process[_0x278c3b(0x295)][0x2]||_0x278c3b(0x2a8),pattern=/^[0-9]{3}$/;!pattern[_0x278c3b(0x22f)](botID)&&(console['log'](_0x278c3b(0x1e9)+botID+_0x278c3b(0x1c7)),killBot());const userID=process[_0x278c3b(0x295)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x278c3b(0x18b),logspath=userID?_0x278c3b(0x29f)+userID+'/':_0x278c3b(0x29f),loggerfile=fs[_0x278c3b(0x177)](logspath+_0x278c3b(0x298),{'flags':'a'});!fs[_0x278c3b(0x1e4)](configpath)&&fs[_0x278c3b(0x164)](configpath);!fs[_0x278c3b(0x1e4)](logspath)&&fs[_0x278c3b(0x164)](logspath);const configfile=configpath+_0x278c3b(0x219)+botID+_0x278c3b(0x26d),logfile=configpath+_0x278c3b(0x219)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x278c3b(0x219)+botID+_0x278c3b(0x1d2),settingsfile=configpath+_0x278c3b(0x1ab),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x278c3b(0x25f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x278c3b(0x2b2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x278c3b(0x2b2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x278c3b(0x181)]({'bot':[],'version':serverversion})[_0x278c3b(0x2b2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x278c3b(0x2b2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x278c3b(0x15f),'rsaStandard':_0x278c3b(0x261)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x278c6f=>{const _0x30eab8=_0x278c3b;console[_0x30eab8(0x197)](_0x278c6f);},'simple':_0x369b10=>{const _0x4fc906=_0x278c3b;console[_0x4fc906(0x197)](_0x369b10),loggerfile['write'](util[_0x4fc906(0x2af)](_0x369b10)+'\x0a');},'full':async(_0x1ec6fd,_0x6184bd='')=>{const _0x444e62=_0x278c3b;let _0x354885;if(config[_0x444e62(0x1b6)])_0x354885=getTimeStamp()+':\x20'+config['botname']+_0x444e62(0x1d1)+_0x1ec6fd;else _0x354885=getTimeStamp()+_0x444e62(0x270)+botID+_0x444e62(0x1d1)+_0x1ec6fd;console[_0x444e62(0x197)](_0x354885),loggerfile[_0x444e62(0x2b2)](util[_0x444e62(0x2af)](_0x354885)+'\x0a'),_0x6184bd&&(console[_0x444e62(0x197)](_0x6184bd),loggerfile[_0x444e62(0x2b2)](util[_0x444e62(0x2af)](_0x6184bd)+'\x0a'));},'debug':async(_0x5bc764,_0x25e185='')=>{const _0x5c63f8=_0x278c3b;let _0x378aad;if(config[_0x5c63f8(0x1b6)])_0x378aad=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x5bc764;else _0x378aad=getTimeStamp()+_0x5c63f8(0x270)+botID+_0x5c63f8(0x296)+_0x5bc764;if(debugLoggingScreen)console[_0x5c63f8(0x197)](_0x378aad);loggerfile['write'](util[_0x5c63f8(0x2af)](_0x378aad)+'\x0a');if(_0x25e185){if(debugLoggingScreen)console[_0x5c63f8(0x197)](_0x25e185);loggerfile[_0x5c63f8(0x2b2)](util[_0x5c63f8(0x2af)](_0x25e185)+'\x0a');}}};function _0x5788(_0x457c38,_0x38b9c1){const _0x351a57=_0x259d();return _0x5788=function(_0x4f0d68,_0x174c73){_0x4f0d68=_0x4f0d68-0x155;let _0x259da7=_0x351a57[_0x4f0d68];return _0x259da7;},_0x5788(_0x457c38,_0x38b9c1);}process['on'](_0x278c3b(0x216),function(_0x5b46d3){logger['simple'](_0x5b46d3);});settings[_0x278c3b(0x1f3)]!=config[_0x278c3b(0x1f3)]&&updateTimeshift(settings[_0x278c3b(0x1f3)]);process['send']({'started':_0x278c3b(0x1b0)},_0x2af924=>{}),initializeProcessListeners();function proxyEmit(_0x25b4c8,_0x304874=null){const _0x13a4bd=_0x278c3b;process[_0x13a4bd(0x1ec)]({'function':_0x25b4c8,'args':_0x304874},_0x334ced=>{});}function initializeProcessListeners(){process['on']('message',_0x73c35d=>{const _0x2df7ba=_0x5788;switch(Object[_0x2df7ba(0x1ca)](_0x73c35d)[0x0]){case'timeshift':_0x73c35d[_0x2df7ba(0x1f3)]!=undefined&&(settings[_0x2df7ba(0x1f3)]=_0x73c35d[_0x2df7ba(0x1f3)],updateTimeshift(settings[_0x2df7ba(0x1f3)]));break;case _0x2df7ba(0x175):switch(_0x73c35d[_0x2df7ba(0x175)]){case _0x2df7ba(0x1e2):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x73c35d[_0x2df7ba(0x159)]);break;case _0x2df7ba(0x17b):deleteHistoryAlerts(_0x73c35d['args']);break;case _0x2df7ba(0x16f):getPortfolio(_0x73c35d[_0x2df7ba(0x159)]);break;case _0x2df7ba(0x294):storeConfiguration(_0x73c35d['args']);break;case _0x2df7ba(0x1eb):storeHeadless(_0x73c35d[_0x2df7ba(0x159)]);break;case _0x2df7ba(0x212):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x73c35d[_0x2df7ba(0x159)]);break;case _0x2df7ba(0x245):cancelLoading();break;case _0x2df7ba(0x20c):showConfig();break;case _0x2df7ba(0x18f):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x21c14a=null,_0x4c8468=![]){const _0x4cfce4=_0x278c3b;if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x4c8468)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0x4cfce4(0x231)]!=''&&config['apiKey']!=_0x4cfce4(0x188)){await initExchange();let _0x10fdff=![];_0x10fdff=await loadSymbols();if(_0x10fdff){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x21c14a),exchangeStopped=![];if(lastOrders['length']==0x0&&allOpenOrders[_0x4cfce4(0x1ee)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x509309=_0x278c3b;exchangeStopped=!![],await exchange[_0x509309(0x16e)]();}async function reloadExchange(){const _0x11519a=_0x278c3b;logger[_0x11519a(0x1af)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x11519a(0x206)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x11519a(0x1af)](_0x11519a(0x19d)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x773506=config[_0x278c3b(0x204)],_0x57d901=config[_0x278c3b(0x231)],_0x3bb9fe=config[_0x278c3b(0x2b8)]){const _0x257cce=_0x278c3b;exchange&&await stopExchange();!supportedExchanges()[_0x257cce(0x1a1)](_0x773506)&&(logger[_0x257cce(0x293)](_0x257cce(0x176)+_0x773506+_0x257cce(0x22a)),killBot());const _0xa4bb12=ccxt[_0x773506[_0x257cce(0x247)]()];exchange=new _0xa4bb12({'apiKey':_0x57d901,'secret':_0x3bb9fe,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'adjustForTimeDifference':!![]}});}function setStableCoins(){const _0x4ed0c5=_0x278c3b;let _0x3bd85c=config[_0x4ed0c5(0x16a)]==_0x4ed0c5(0x213)?_0x4ed0c5(0x213):_0x4ed0c5(0x180),_0x2e5c63=!allSymbols[_0x4ed0c5(0x1a1)](_0x3bd85c+_0x4ed0c5(0x24a))?'USDT':_0x4ed0c5(0x239),_0x1b749b=!allSymbols[_0x4ed0c5(0x1a1)](_0x3bd85c+_0x4ed0c5(0x29b))?_0x4ed0c5(0x1e0):_0x4ed0c5(0x1e6);stablecoins={'eur':{'coin':''+_0x3bd85c+_0x2e5c63,'symbol':_0x3bd85c+'/'+_0x2e5c63},'usd':{'coin':''+_0x3bd85c+_0x1b749b,'symbol':_0x3bd85c+'/'+_0x1b749b}};}async function initwsCcxt(_0x289543){const _0x22d88f=_0x278c3b;_0x289543==null&&(_0x289543=[],currentCoins[_0x22d88f(0x1cd)](_0x33844a=>{const _0x51977e=_0x22d88f;if(_0x33844a[_0x51977e(0x171)]!=config[_0x51977e(0x16a)])_0x289543[_0x51977e(0x16b)](_0x33844a[_0x51977e(0x18e)]);}));if(!_0x289543[_0x22d88f(0x1a1)](stablecoins[_0x22d88f(0x1bd)][_0x22d88f(0x18e)]))_0x289543['push'](stablecoins[_0x22d88f(0x1bd)][_0x22d88f(0x18e)]);if(!_0x289543[_0x22d88f(0x1a1)](stablecoins['usd'][_0x22d88f(0x18e)]))_0x289543[_0x22d88f(0x16b)](stablecoins['usd'][_0x22d88f(0x18e)]);if(!_0x289543[_0x22d88f(0x1a1)](_0x22d88f(0x24e)+config[_0x22d88f(0x16a)]))_0x289543['push'](_0x22d88f(0x24e)+config['basecoin']);loadCoins(_0x289543);const _0xd2bb97=async _0x257a8e=>{const _0x528903=_0x22d88f,_0x16399c=await exchange[_0x528903(0x276)](_0x257a8e);global[_0x528903(0x161)][noslash(_0x16399c[_0x528903(0x18e)])]=_0x16399c[_0x528903(0x202)];while(!![]){if(!botPaused)try{const _0x4a5c95=await exchange['watchTrades'](_0x257a8e);global[_0x528903(0x161)][noslash(_0x4a5c95[0x0][_0x528903(0x18e)])]=_0x4a5c95[0x0]['price'],await sleep(0x3e8);}catch(_0x383a48){if(!exchangeStopped)await handleError(_0x383a48,_0x528903(0x1fd),_0x257a8e);}else await sleep(0x3e8);}},_0x34a6a5=async _0x25fb1b=>{const _0x498331=_0x22d88f;while(!![]){if(!botPaused)try{const _0x4e2213=await exchange[_0x498331(0x276)](_0x25fb1b);global[_0x498331(0x22c)][_0x4e2213['symbol']]=_0x4e2213['percentage'],await sleep(0x2710);}catch(_0x2effa9){if(!exchangeStopped)await handleError(_0x2effa9,_0x498331(0x1ea),_0x25fb1b);}else await sleep(0x3e8);}},_0x10e359=async()=>{const _0x5b6ed2=_0x22d88f;while(!![]){if(!botPaused)try{const _0x5ead0d=await exchange[_0x5b6ed2(0x249)]();_0x5ead0d[_0x5b6ed2(0x1cd)](_0x3274d4=>{updateNumberCoinsCcxt(_0x3274d4);});}catch(_0x4ed4f1){if(!exchangeStopped)await handleError(_0x4ed4f1,'watchOrders');}else await sleep(0x3e8);}};_0x289543['forEach'](async _0x3a4061=>{_0xd2bb97(_0x3a4061),_0x34a6a5(_0x3a4061);}),!wsEventsSet&&(wsEventsSet=!![],_0x10e359());}async function loadSymbols(){const _0x3bc621=_0x278c3b;if(allSymbols)return!![];let _0x511463=![];try{markets=await exchange[_0x3bc621(0x1ad)](),allSymbols=exchange[_0x3bc621(0x21b)][_0x3bc621(0x17e)](_0x195e08=>{const _0x1fb943=_0x3bc621;let _0x17e90b=![];return exceptions[_0x1fb943(0x1cd)](_0x3671a6=>{const _0x267e88=_0x1fb943;if(_0x195e08[_0x267e88(0x1a1)](_0x3671a6))_0x17e90b=!![];}),!_0x17e90b;}),_0x511463=!![];}catch(_0x479f34){_0x511463=![],handleError(_0x479f34,_0x3bc621(0x278));}return _0x511463;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x5640aa=_0x278c3b;proxyEmit(_0x5640aa(0x2a7),emittedConfiguration()),proxyEmit(_0x5640aa(0x288),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1f384c=getNormalizedPerformance();emitPerformance(_0x1f384c),await getStartingBalances(_0x1f384c);}async function toggleBotMode(){const _0x169996=_0x278c3b;let _0x261020=dbConfig['get'](_0x169996(0x203))[_0x169996(0x248)]({'botID':botID})['value']();if(_0x261020){const _0x5bf1eb=!_0x261020[_0x169996(0x22d)];dbConfig['get']('bot')[_0x169996(0x248)]({'botID':botID})['assign']({'headless':_0x5bf1eb})[_0x169996(0x2b2)](),config[_0x169996(0x22d)]=_0x5bf1eb,proxyEmit(_0x169996(0x2a7),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5e2d28=_0x278c3b;process[_0x5e2d28(0x1ec)]({'updatebotmanager':!![]},_0x2c9555=>{});}async function loadCoins(_0x468428){const _0x2ad029=_0x278c3b;let _0x308209,_0xeb0db2=0x0;loading[_0x2ad029(0x28f)]=[];let _0x1864fc=0x0;_0x468428[_0x2ad029(0x1cd)](_0x53ec2b=>{const _0x40137b=_0x2ad029;loading[_0x40137b(0x28f)][_0x40137b(0x16b)](_0x53ec2b);}),loadingCanceled=![];let _0x527eb9=![];while(_0x308209!=_0x468428['length']){_0x308209=0x0,_0x468428[_0x2ad029(0x1cd)](_0x17e52e=>{global['ticker'][noslash(_0x17e52e)]&&(loading['remainingSymbols']=loading['remainingSymbols']['filter'](_0x482ba6=>_0x482ba6!=_0x17e52e),_0x308209++);}),loading[_0x2ad029(0x215)]=Math[_0x2ad029(0x1f2)](_0x308209/_0x468428[_0x2ad029(0x1ee)]*0x64);loading[_0x2ad029(0x215)]!=0x64&&(_0x1864fc>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1864fc>0x78*0x5&&!_0x527eb9&&(loading[_0x2ad029(0x269)]=!![],emitLoadingProgress(),_0x527eb9=!![],logHistory(_0x2ad029(0x191),_0x2ad029(0x1c5)+loading[_0x2ad029(0x28f)][_0x2ad029(0x187)](',\x20')+_0x2ad029(0x1c4)),logHistory(_0x2ad029(0x191),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x2ad029(0x15c)),pidCoinReloading=setTimeout(()=>{const _0x3c5e3d=_0x2ad029;process['send']({'stop':_0x3c5e3d(0x263)},_0x3435ed=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x308209!=_0xeb0db2&&(_0xeb0db2=_0x308209,emitLoadingProgress()),_0x1864fc++,await sleep(0xc8);}_0x308209==_0x468428[_0x2ad029(0x1ee)]&&(coinsLoaded=!![],_0x527eb9&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x31bb72=_0x278c3b;proxyEmit(_0x31bb72(0x2a7),{...emittedConfiguration(),'configstate':_0x31bb72(0x274)});}function emitLoadingProgress(){const _0x357022=_0x278c3b;proxyEmit(_0x357022(0x2b6),loading);}async function getFiat(){const _0x54c2f1=_0x278c3b;let _0x19658f=0x0,_0x417a67=0x0;try{_0x19658f=global[_0x54c2f1(0x161)][stablecoins[_0x54c2f1(0x1bd)][_0x54c2f1(0x171)]],_0x417a67=global['ticker'][stablecoins['usd'][_0x54c2f1(0x171)]];}catch(_0x4c82c4){await handleError(_0x4c82c4,_0x54c2f1(0x2b5));}return{'eur':Number(_0x19658f),'usd':Number(_0x417a67)};}function capitalize(_0x3c21ed){const _0xa46469=_0x278c3b;return _0x3c21ed['substring'](0x0,0x1)[_0xa46469(0x264)]()+_0x3c21ed[_0xa46469(0x1b9)](0x1);}function supportedExchanges(){const _0x3a7357=_0x278c3b,_0x477c35=['ws','fetchTickers',_0x3a7357(0x276),'watchTrades','watchOrders','cancelOrder',_0x3a7357(0x1e7),'fetchOpenOrders',_0x3a7357(0x156),_0x3a7357(0x21f)];let _0x168acb=[];const _0x45a182=ccxt[_0x3a7357(0x288)][_0x3a7357(0x1d6)](_0x3df463=>new ccxt[_0x3df463]())['filter'](_0x5c6acb=>_0x5c6acb[_0x3a7357(0x218)]['ws']);return _0x45a182[_0x3a7357(0x1cd)](_0x1f369f=>{const _0xcf4835=_0x3a7357;let _0x18e88c=0x0;_0x477c35[_0xcf4835(0x1cd)](_0x9f869c=>{const _0x2df4cf=_0xcf4835;_0x9f869c in _0x1f369f[_0x2df4cf(0x218)]&&_0x1f369f[_0x2df4cf(0x218)][_0x9f869c]&&_0x18e88c++;}),_0x18e88c==_0x477c35['length']&&_0x168acb[_0xcf4835(0x16b)](capitalize(_0x1f369f['id']));}),_0x168acb;}function setStartDatePerformance(){const _0x36a9d4=_0x278c3b;if(config&&config['liquidity'][0x0]['changes'][_0x36a9d4(0x1ee)]!=0x0){const _0x47527c=config[_0x36a9d4(0x240)][0x0][_0x36a9d4(0x2a6)];dbPerformance[_0x36a9d4(0x200)](_0x36a9d4(0x1b7))['find']({'date':config[_0x36a9d4(0x19a)]})[_0x36a9d4(0x207)]({'coins':_0x47527c})[_0x36a9d4(0x2b2)]();}}async function recreateCoinResults(){const _0x27937e=_0x278c3b;let _0x40e7e5,_0x1314a9=[];try{const _0x2c1e5f=fns[_0x27937e(0x2af)](fns[_0x27937e(0x1d5)](config[_0x27937e(0x19a)][_0x27937e(0x18a)](/\//g,'-')),_0x27937e(0x18c));for(const _0x32ab16 of currentCoins){if(_0x32ab16[_0x27937e(0x171)]!=config['basecoin']){let _0x58bd3a=0x0,_0x1b82c7,_0x303d26;_0x40e7e5=await getAllEventOrders(_0x32ab16[_0x27937e(0x18e)]);if(_0x40e7e5[_0x27937e(0x1ee)]>0x0)_0x40e7e5[_0x27937e(0x1cd)](_0x1c3285=>{const _0x339b6d=_0x27937e,_0x277125=_0x32ab16[_0x339b6d(0x18e)][_0x339b6d(0x1a1)](config['basecoin']+'/');_0x1314a9[_0x339b6d(0x16b)]({'datetime':_0x1c3285[_0x339b6d(0x252)],'coin':_0x32ab16[_0x339b6d(0x171)],'symbol':_0x32ab16[_0x339b6d(0x18e)],'side':_0x1c3285[_0x339b6d(0x246)],'reverse':_0x277125,'amount':formatResult(_0x1c3285[_0x339b6d(0x29c)],0x8),'filled':formatResult(_0x1c3285['filled'],0x8),'price':formatResult(_0x1c3285[_0x339b6d(0x26c)],0x8)}),_0x58bd3a=_0x1c3285[_0x339b6d(0x246)]==_0x339b6d(0x20f)?_0x58bd3a+_0x1c3285[_0x339b6d(0x29c)]:_0x58bd3a-_0x1c3285[_0x339b6d(0x29c)];if(!_0x303d26)_0x303d26=_0x1c3285[_0x339b6d(0x26c)];});_0x1b82c7=_0x32ab16[_0x27937e(0x15e)]-_0x58bd3a;let _0x448e26;config[_0x27937e(0x240)][_0x27937e(0x1cd)](_0x3a14d5=>{const _0x214d73=_0x27937e;!_0x448e26&&(_0x448e26=_0x3a14d5[_0x214d73(0x2a6)][_0x214d73(0x248)](_0x5ee548=>_0x5ee548[_0x214d73(0x171)]==_0x32ab16[_0x214d73(0x171)]),_0x448e26&&(_0x1b82c7=_0x448e26[_0x214d73(0x15e)],_0x303d26=_0x448e26[_0x214d73(0x26c)]));});let _0x475a71=dbCoinResults[_0x27937e(0x200)]('coins')['find']({'coin':_0x32ab16[_0x27937e(0x171)]})[_0x27937e(0x209)]();_0x475a71={'coin':_0x32ab16[_0x27937e(0x171)],'number':_0x1b82c7,'breakeven':_0x303d26,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x27937e(0x200)]('coins')[_0x27937e(0x248)]({'coin':_0x32ab16['coin']})[_0x27937e(0x207)](_0x475a71)[_0x27937e(0x2b2)]();}}_0x1314a9[_0x27937e(0x208)]((_0x3698f1,_0x5d8332)=>_0x3698f1[_0x27937e(0x252)]>_0x5d8332['datetime']?0x1:_0x5d8332['datetime']>_0x3698f1[_0x27937e(0x252)]?-0x1:0x0);let _0x407758=0x0;for(let _0x319b84 of _0x1314a9){await updateCoinResults(_0x319b84,!![]);}}catch(_0x5edc37){await handleError(_0x5edc37,_0x27937e(0x1e8));}}async function getAllEventOrders(_0x4b5613){const _0x3f5b12=_0x278c3b;let _0x27501a=[],_0x4b1f8d=dbLogs[_0x3f5b12(0x200)](_0x3f5b12(0x21a))[_0x3f5b12(0x17e)](_0x58723b=>{const _0x34e27f=_0x3f5b12,_0x29c9d6=_0x58723b['event'][_0x34e27f(0x247)]();return _0x29c9d6[_0x34e27f(0x1a1)](_0x4b5613['toLowerCase']())&&(_0x29c9d6['includes'](_0x34e27f(0x237))&&_0x29c9d6[_0x34e27f(0x1a1)](_0x34e27f(0x1dd))||_0x29c9d6['includes']('filled')&&_0x29c9d6[_0x34e27f(0x1a1)](_0x34e27f(0x1dd)));})[_0x3f5b12(0x28d)](_0x3f5b12(0x271))[_0x3f5b12(0x209)]();return _0x4b1f8d[_0x3f5b12(0x1cd)](_0x44aff2=>{const _0x110804=_0x3f5b12,_0x35e5da=_0x44aff2[_0x110804(0x25e)][_0x110804(0x1a1)](_0x110804(0x25b))?_0x110804(0x25b):_0x110804(0x20f),_0x160252=/#([0-9]|\.)+\s/i,_0xa73fda=Number(_0x160252[_0x110804(0x2b9)](_0x44aff2[_0x110804(0x25e)])[0x0]['slice'](0x1)),_0x270cc4=/@([0-9]|\.)+$/i,_0xd5c6f0=Number(_0x270cc4[_0x110804(0x2b9)](_0x44aff2[_0x110804(0x25e)])[0x0][_0x110804(0x291)](0x1));_0x27501a[_0x110804(0x16b)]({'datetime':_0x44aff2['time'],'coin':symbolToCoin(_0x4b5613),'symbol':_0x4b5613,'side':_0x35e5da,'amount':_0xa73fda,'filled':_0xa73fda,'price':_0xd5c6f0});}),_0x27501a;}async function getAllOrders(_0x384af8,_0x3a46fe){const _0x38ac23=_0x278c3b;let _0xc897c4=[];while(_0x3a46fe<exchange[_0x38ac23(0x1b2)]()){const _0x4289f9=0x1f4,_0x41390a=await exchange[_0x38ac23(0x156)](_0x384af8,_0x3a46fe,_0x4289f9);if(_0x41390a[_0x38ac23(0x1ee)])_0x3a46fe=_0x41390a[_0x41390a['length']-0x1]['timestamp']+0x1,_0xc897c4=_0xc897c4[_0x38ac23(0x162)](_0x41390a);else break;}return _0xc897c4;}async function validate24hChanges(){const _0x2beaa1=_0x278c3b;for(const _0x52ed94 of currentCoins){if(_0x52ed94[_0x2beaa1(0x171)]!=config['basecoin']){let _0x4f5162;_0x52ed94[_0x2beaa1(0x19f)]?_0x4f5162=formatResult((0x1/(global[_0x2beaa1(0x22c)][noslash(_0x52ed94[_0x2beaa1(0x18e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x4f5162=global[_0x2beaa1(0x22c)][noslash(_0x52ed94[_0x2beaa1(0x18e)])],_0x4f5162<config['change24h']&&(logHistory(_0x2beaa1(0x191),_0x52ed94[_0x2beaa1(0x171)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x4f5162+'%'),logHistory(_0x2beaa1(0x191),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x2beaa1(0x1bf)),await storeHeadless({'headless':![]}));}}}function isNewerVersion(_0x5328f7,_0x162ee9){const _0x10f8c4=_0x278c3b,_0x384e96=_0x162ee9[_0x10f8c4(0x24b)]('.'),_0x30491e=_0x5328f7[_0x10f8c4(0x24b)]('.');for(var _0x2d5621=0x0;_0x2d5621<_0x30491e[_0x10f8c4(0x1ee)];_0x2d5621++){const _0x4c37ab=~~_0x30491e[_0x2d5621],_0x6f726c=~~_0x384e96[_0x2d5621];if(_0x4c37ab>_0x6f726c)return!![];if(_0x4c37ab<_0x6f726c)return![];}return![];}async function oneTimeMigration(){const _0x56bbf9=_0x278c3b;let _0x1efffe=dbLogs[_0x56bbf9(0x200)]('version')[_0x56bbf9(0x209)]();if(!isNewerVersion(_0x1efffe,'2.3.5')){dbLogs[_0x56bbf9(0x211)](_0x56bbf9(0x1a3),'2.3.5')[_0x56bbf9(0x2b2)]();let _0x5735d3=[];const _0x4c06d3=dbLogs['get'](_0x56bbf9(0x21a))[_0x56bbf9(0x209)]();_0x4c06d3[_0x56bbf9(0x1cd)](_0x12f48c=>{const _0x4ca7fd=_0x56bbf9;_0x5735d3['push']({'time':_0x12f48c['time'],'type':_0x12f48c['type'],'event':_0x12f48c[_0x4ca7fd(0x25e)]});}),dbLogs[_0x56bbf9(0x200)](_0x56bbf9(0x21a))[_0x56bbf9(0x207)](_0x5735d3)[_0x56bbf9(0x2b2)]();}let _0x8948e7=dbConfig[_0x56bbf9(0x200)](_0x56bbf9(0x1a3))[_0x56bbf9(0x209)]();if(!isNewerVersion(_0x8948e7,'2.3.5')){dbConfig[_0x56bbf9(0x211)](_0x56bbf9(0x1a3),_0x56bbf9(0x224))['write']();let _0xcea84e=dbConfig['get'](_0x56bbf9(0x203))[_0x56bbf9(0x248)]({'botID':botID})['value']();if(_0xcea84e){let _0x264e24=[];_0xcea84e['portfolio'][_0x56bbf9(0x1cd)](_0x51d061=>{const _0x51754c=_0x56bbf9;_0x264e24[_0x51754c(0x16b)]({'coin':_0x51d061[_0x51754c(0x171)],'number':_0x51d061['startnumber'],'price':_0x51d061[_0x51754c(0x1cf)]}),delete _0x51d061[_0x51754c(0x155)],delete _0x51d061['startprice'];});if(_0x264e24[_0x56bbf9(0x1ee)]!==0x0)fs[_0x56bbf9(0x210)](configbackuppath+(_0x56bbf9(0x2ab)+botID+_0x56bbf9(0x233)),JSON['stringify'](_0x264e24,null,0x4),function(_0x230e2d){if(_0x230e2d){}});const _0x566d14=(_0x41b7af,_0x344bfd)=>{const _0x3fca56=_0x56bbf9;let _0x2e243a=[];_0x344bfd[_0x3fca56(0x1cd)](_0x1064ae=>{const _0x455dc9=_0x3fca56,_0x12c132=_0x41b7af[_0x455dc9(0x248)](_0x13d38e=>_0x13d38e[_0x455dc9(0x171)]==_0x1064ae['coin']);if(!_0x12c132)_0x2e243a[_0x455dc9(0x16b)](_0x1064ae);});let _0x60978a=[];return _0x41b7af[_0x3fca56(0x1cd)](_0x2811ef=>{const _0x153e19=_0x3fca56,_0x1db9ad=_0x344bfd[_0x153e19(0x248)](_0x5c5f7a=>_0x5c5f7a[_0x153e19(0x171)]==_0x2811ef[_0x153e19(0x171)]);if(!_0x1db9ad||_0x1db9ad[_0x153e19(0x15e)]==0x0&&_0x2811ef['number']!=0x0)_0x60978a[_0x153e19(0x16b)](_0x2811ef);}),{'missingDay1':_0x2e243a,'notInDay2':_0x60978a};},_0x299260=dbPerformance[_0x56bbf9(0x200)]('data')[_0x56bbf9(0x160)]()[_0x56bbf9(0x209)]();if(_0x299260[_0x56bbf9(0x1ee)]>0x1){const {missingDay1:_0x38e0f6,notInDay2:_0x2fadc9}=_0x566d14(_0x264e24,_0x299260[0x1][_0x56bbf9(0x169)]);_0x264e24=[..._0x264e24,..._0x38e0f6],_0x2fadc9[_0x56bbf9(0x1cd)](_0xa90bcd=>{const _0x5d1638=_0x56bbf9;let _0x508e26=_0x264e24[_0x5d1638(0x214)](_0x4a6fe3=>_0x4a6fe3['coin']==_0xa90bcd[_0x5d1638(0x171)]);_0x508e26!=-0x1&&_0x264e24['splice'](_0x508e26,0x1);});}_0x264e24[_0x56bbf9(0x208)]((_0x3215d0,_0xf84a4)=>_0x3215d0[_0x56bbf9(0x171)]>_0xf84a4['coin']?0x1:_0xf84a4[_0x56bbf9(0x171)]>_0x3215d0[_0x56bbf9(0x171)]?-0x1:0x0);let _0x254b50=[{'date':_0xcea84e[_0x56bbf9(0x19a)],'changes':_0x264e24}];_0x299260['length']>0x2&&_0x299260[_0x56bbf9(0x1cd)]((_0x5e64d3,_0x3becb0)=>{const _0x14d950=_0x56bbf9;if(_0x3becb0>0x0&&_0x3becb0<_0x299260[_0x14d950(0x1ee)]-0x1){const {missingDay1:_0x180c33,notInDay2:_0x3b90a9}=_0x566d14(_0x299260[_0x3becb0][_0x14d950(0x169)],_0x299260[_0x3becb0+0x1][_0x14d950(0x169)]);_0x264e24=[],(_0x180c33['length']!=0x0||_0x3b90a9['length']!=0x0)&&(_0x180c33[_0x14d950(0x1ee)]!=0x0&&_0x264e24[_0x14d950(0x16b)](..._0x180c33),_0x3b90a9[_0x14d950(0x1ee)]!=0x0&&(_0x3b90a9[_0x14d950(0x1cd)](_0x1e3a47=>{const _0x4ec417=_0x14d950;_0x1e3a47[_0x4ec417(0x15e)]=-_0x1e3a47[_0x4ec417(0x15e)];}),_0x264e24[_0x14d950(0x16b)](..._0x3b90a9)),_0x264e24[_0x14d950(0x208)]((_0x5e3528,_0x399b52)=>_0x5e3528[_0x14d950(0x171)]>_0x399b52['coin']?0x1:_0x399b52[_0x14d950(0x171)]>_0x5e3528[_0x14d950(0x171)]?-0x1:0x0),_0x254b50[_0x14d950(0x16b)]({'date':_0x299260[_0x3becb0+0x1]['date'],'changes':_0x264e24}));}}),dbConfig[_0x56bbf9(0x200)](_0x56bbf9(0x203))[_0x56bbf9(0x248)]({'botID':botID})[_0x56bbf9(0x207)]({..._0xcea84e,'liquidity':_0x254b50})[_0x56bbf9(0x2b2)]();}}_0x8948e7=dbConfig[_0x56bbf9(0x200)](_0x56bbf9(0x1a3))[_0x56bbf9(0x209)]();if(!isNewerVersion(_0x8948e7,'2.6.0')){dbConfig[_0x56bbf9(0x211)](_0x56bbf9(0x1a3),_0x56bbf9(0x16d))[_0x56bbf9(0x2b2)]();let _0x43da60=dbConfig[_0x56bbf9(0x200)](_0x56bbf9(0x203))[_0x56bbf9(0x248)]({'botID':botID})[_0x56bbf9(0x209)]();if(_0x43da60){const _0xb5dbf3=_0x43da60[_0x56bbf9(0x204)],_0x138dc2=_0xb5dbf3?capitalize(_0xb5dbf3):_0x56bbf9(0x277);dbConfig['get']('bot')[_0x56bbf9(0x248)]({'botID':botID})[_0x56bbf9(0x207)]({'exchange':_0x138dc2})[_0x56bbf9(0x2b2)]();}}config=getConfiguration(botID);let _0x934270=dbPerformance[_0x56bbf9(0x200)](_0x56bbf9(0x1a3))['value']();!isNewerVersion(_0x934270,_0x56bbf9(0x224))&&(dbPerformance[_0x56bbf9(0x211)](_0x56bbf9(0x1a3),'2.3.5')[_0x56bbf9(0x2b2)](),setStartDatePerformance());let _0x1b2c2e=dbCoinResults[_0x56bbf9(0x200)](_0x56bbf9(0x1a3))[_0x56bbf9(0x209)]();if(!isNewerVersion(_0x1b2c2e,_0x56bbf9(0x23c))){dbCoinResults[_0x56bbf9(0x211)](_0x56bbf9(0x1a3),'2.5.0')[_0x56bbf9(0x2b2)]();let _0x3c4f8e=dbCoinResults[_0x56bbf9(0x200)](_0x56bbf9(0x169))[_0x56bbf9(0x209)]();if(_0x3c4f8e[_0x56bbf9(0x1ee)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x3149a9){const _0x274c4d=_0x278c3b;let _0x540455=dbConfig[_0x274c4d(0x200)]('bot')[_0x274c4d(0x248)]({'botID':_0x3149a9})['value']();if(_0x540455){let _0x569879=![];typeof _0x540455[_0x274c4d(0x23b)]==_0x274c4d(0x1c0)&&(_0x540455={..._0x540455,'threshold':Number(_0x540455[_0x274c4d(0x23b)])},_0x569879=!![]),_0x540455[_0x274c4d(0x226)]==null&&(_0x540455={..._0x540455,'change24h':-0x14},_0x569879=!![]),_0x569879&&(_0x540455={'botID':_0x540455[_0x274c4d(0x179)],'exchange':_0x540455[_0x274c4d(0x204)],'apiKey':_0x540455[_0x274c4d(0x231)],'apiSecret':_0x540455[_0x274c4d(0x2b8)],'basecoin':_0x540455[_0x274c4d(0x16a)],'botname':_0x540455['botname'],'showname':_0x540455[_0x274c4d(0x1b6)],'threshold':_0x540455[_0x274c4d(0x23b)],'ordertype':_0x540455[_0x274c4d(0x1b4)],'timeout':_0x540455[_0x274c4d(0x1a4)],'startdate':_0x540455[_0x274c4d(0x19a)],'recreate':_0x540455['recreate'],'timeshift':_0x540455[_0x274c4d(0x1f3)],'headless':_0x540455[_0x274c4d(0x22d)],'cooldown':_0x540455[_0x274c4d(0x1b5)],'change24h':_0x540455[_0x274c4d(0x226)],'emojibuy':_0x540455[_0x274c4d(0x184)],'emojisell':_0x540455[_0x274c4d(0x1d8)],'portfolio':_0x540455[_0x274c4d(0x25a)],'liquidity':_0x540455[_0x274c4d(0x240)]},dbConfig[_0x274c4d(0x200)](_0x274c4d(0x203))[_0x274c4d(0x24c)]()[_0x274c4d(0x2b2)](),dbConfig[_0x274c4d(0x200)](_0x274c4d(0x203))['push'](_0x540455)[_0x274c4d(0x2b2)]());}else _0x540455={'botID':_0x3149a9,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x274c4d(0x27f)+_0x3149a9,'showname':![],'threshold':0x3,'ordertype':_0x274c4d(0x237),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x274c4d(0x1f3)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x540455;}function emittedConfiguration(){const _0x192f80=_0x278c3b;let _0x4d60f0;if(config['apiKey']=='')_0x4d60f0={...config,'configstate':_0x192f80(0x242)};else config[_0x192f80(0x231)]==_0x192f80(0x188)?_0x4d60f0={...config,'configstate':_0x192f80(0x17a)}:_0x4d60f0={...config,'apiKey':_0x192f80(0x225),'apiSecret':_0x192f80(0x225)};return _0x4d60f0;}function getSettings(){const _0x17af47=_0x278c3b;return dbSettings[_0x17af47(0x200)](_0x17af47(0x1e5))[_0x17af47(0x209)]();}function getSecure(){const _0x35a276=_0x278c3b;return dbSecure[_0x35a276(0x200)]('secure')[_0x35a276(0x209)]()||{};}function updateTimeshift(_0x334967){const _0x3066e1=_0x278c3b;let _0x29c33d=dbConfig[_0x3066e1(0x200)](_0x3066e1(0x203))[_0x3066e1(0x248)]({'botID':botID})[_0x3066e1(0x209)]();_0x29c33d&&dbConfig[_0x3066e1(0x200)](_0x3066e1(0x203))[_0x3066e1(0x248)]({'botID':botID})[_0x3066e1(0x207)]({'timeshift':_0x334967})['write'](),config[_0x3066e1(0x1f3)]=_0x334967,proxyEmit(_0x3066e1(0x2a7),emittedConfiguration());}async function storeConfiguration(_0x3bc355){const _0x1fa0a7=_0x278c3b;let _0x2f85e7=[],_0x44baad=[];_0x3bc355[_0x1fa0a7(0x25a)][_0x1fa0a7(0x1cd)](_0x2e6879=>{const _0x449ecc=_0x1fa0a7;if(!_0x2e6879[_0x449ecc(0x28a)]&&_0x2e6879[_0x449ecc(0x171)]!=_0x3bc355[_0x449ecc(0x16a)])_0x44baad[_0x449ecc(0x16b)](_0x2e6879[_0x449ecc(0x18e)]);});currentCoins['length']==0x0?_0x2f85e7=_0x44baad:_0x44baad['forEach'](_0x311a88=>{const _0x3341e0=_0x1fa0a7,_0x560d93=currentCoins[_0x3341e0(0x248)](_0x1660bc=>_0x1660bc['symbol']==_0x311a88);!_0x560d93&&_0x2f85e7[_0x3341e0(0x16b)](_0x311a88);});let _0x2dca4d=dbConfig['get'](_0x1fa0a7(0x203))[_0x1fa0a7(0x248)]({'botID':botID})[_0x1fa0a7(0x209)]();_0x3bc355={..._0x3bc355,'apiKey':crypt[_0x1fa0a7(0x27c)](secure[_0x1fa0a7(0x2b4)],_0x3bc355['apiKey'])[_0x1fa0a7(0x1ba)],'apiSecret':crypt['decrypt'](secure[_0x1fa0a7(0x2b4)],_0x3bc355[_0x1fa0a7(0x2b8)])['message']};if(_0x2dca4d){if(_0x3bc355[_0x1fa0a7(0x231)]==_0x1fa0a7(0x225))_0x3bc355[_0x1fa0a7(0x231)]=config['apiKey'];if(_0x3bc355[_0x1fa0a7(0x2b8)]==_0x1fa0a7(0x225))_0x3bc355[_0x1fa0a7(0x2b8)]=config[_0x1fa0a7(0x2b8)];dbConfig[_0x1fa0a7(0x200)](_0x1fa0a7(0x203))['find']({'botID':botID})[_0x1fa0a7(0x207)](_0x3bc355)[_0x1fa0a7(0x2b2)]();}else dbConfig['get'](_0x1fa0a7(0x203))[_0x1fa0a7(0x16b)](_0x3bc355)[_0x1fa0a7(0x2b2)](),process[_0x1fa0a7(0x1ec)]({'status':_0x1fa0a7(0x1ce),'live':_0x1fa0a7(0x1b0)},_0x3aacc5=>{});config={..._0x3bc355},setStartDatePerformance(),process['send']({'botname':_0x3bc355[_0x1fa0a7(0x250)]},_0x4a9b28=>{}),updateBotManager();const _0x370eaa=getNormalizedPerformance();getStartingBalances(_0x370eaa),emitPerformance(_0x370eaa),proxyEmit(_0x1fa0a7(0x235)),await initCoinResults(),reset(_0x2f85e7);}async function storeHeadless(_0x8933fc){const _0x84fbd1=_0x278c3b,_0x5a7117={...config,'headless':_0x8933fc[_0x84fbd1(0x22d)]};let _0x27ab09=dbConfig['get'](_0x84fbd1(0x203))['find']({'botID':botID})[_0x84fbd1(0x209)]();_0x27ab09&&dbConfig[_0x84fbd1(0x200)](_0x84fbd1(0x203))[_0x84fbd1(0x248)]({'botID':botID})['assign'](_0x5a7117)['write'](),config={..._0x5a7117},updateBotManager(),proxyEmit(_0x84fbd1(0x2a7),emittedConfiguration());}function noslash(_0x1135f4){const _0x5e82fc=_0x278c3b;return _0x1135f4[_0x5e82fc(0x18a)]('/','');}async function updateNumberCoinsCcxt(_0x40b0cc){const _0x20906c=_0x278c3b;logger[_0x20906c(0x1af)](_0x20906c(0x279)+_0x40b0cc['symbol']+_0x20906c(0x26b)+_0x40b0cc[_0x20906c(0x227)]+'\x20|\x20'+_0x40b0cc['id']+_0x20906c(0x26b)+_0x40b0cc[_0x20906c(0x1c9)]);let _0x3c4173=_0x40b0cc[_0x20906c(0x227)],_0x2b3452=![];currentCoins['forEach'](_0x48ea3f=>{const _0x176c6a=_0x20906c;_0x48ea3f[_0x176c6a(0x18e)]==_0x40b0cc[_0x176c6a(0x18e)]&&(_0x2b3452=!![]);});if(!_0x2b3452)return;const _0x19c317=currentCoins['find'](_0x394319=>_0x394319[_0x20906c(0x18e)]==_0x40b0cc[_0x20906c(0x18e)]),_0x201f5e=_0x3a4e4d=>{const _0x20273e=_0x20906c;if(_0x19c317)_0x19c317[_0x20273e(0x1db)]=_0x3a4e4d;};if(_0x3c4173==_0x20906c(0x23a))_0x201f5e(_0x20906c(0x23a));else{if(_0x3c4173==_0x20906c(0x182))_0x201f5e(_0x20906c(0x182)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x3c4173==_0x20906c(0x1dc)){logger['debug'](_0x20906c(0x232)+_0x40b0cc[_0x20906c(0x18e)]+_0x20906c(0x26b)+_0x40b0cc[_0x20906c(0x29c)]+_0x20906c(0x26b)+_0x40b0cc['id']+_0x20906c(0x26b)+_0x40b0cc[_0x20906c(0x1c9)]);let _0x226e6b=![];if(lastOrders)lastOrders['forEach'](async _0x5672ae=>{const _0x5ad9be=_0x20906c;if(_0x5672ae[_0x5ad9be(0x2ba)]==_0x40b0cc[_0x5ad9be(0x1c9)]){logger[_0x5ad9be(0x1af)](_0x5ad9be(0x163)+_0x40b0cc[_0x5ad9be(0x1c9)]),_0x226e6b=!![];if(_0x5672ae[_0x5ad9be(0x29c)]==0x0){logger[_0x5ad9be(0x1af)](_0x5ad9be(0x253)+_0x40b0cc[_0x5ad9be(0x1c9)]),_0x5672ae[_0x5ad9be(0x26c)]=_0x40b0cc[_0x5ad9be(0x1f5)],_0x5672ae['filled']=_0x40b0cc[_0x5ad9be(0x29c)],_0x5672ae['fee']={'cost':_0x40b0cc[_0x5ad9be(0x292)][_0x5ad9be(0x17c)],'currency':_0x40b0cc['fee']['currency']},_0x201f5e(_0x5ad9be(0x29c)),await validateOrders();if(lockOrders==ORDERS[_0x5ad9be(0x1ac)])currentCoins=await getCoins();await updateCoinResults(_0x5672ae);}}});!_0x226e6b&&(logger['debug'](_0x20906c(0x2aa)+_0x40b0cc['id']),_0x201f5e(_0x20906c(0x29c)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x35c1d9=JSON[_0x20906c(0x1f1)](lastBalances[_0x20906c(0x25a)]);const _0x127f15=_0x35c1d9[_0x20906c(0x248)](_0x1afdf3=>_0x1afdf3[_0x20906c(0x18e)]==_0x40b0cc[_0x20906c(0x18e)]);if(_0x127f15){if(_0x3c4173==_0x20906c(0x23a))_0x127f15[_0x20906c(0x1db)]=_0x127f15[_0x20906c(0x1db)]=='filled'?_0x20906c(0x29c):_0x20906c(0x23a);else{if(_0x3c4173=='canceled')_0x127f15[_0x20906c(0x1db)]=_0x127f15['orderstatus']==_0x20906c(0x29c)?_0x20906c(0x29c):'canceled';else _0x3c4173=='closed'&&(_0x127f15[_0x20906c(0x1db)]=_0x20906c(0x29c));}}lastBalances={...lastBalances,'portfolio':JSON[_0x20906c(0x27d)](_0x35c1d9)},proxyEmit(_0x20906c(0x260),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x19aa9e=![],_0x158255=!![],_0x11f647=config[_0x278c3b(0x16a)]){const _0x50151b=_0x278c3b;let _0x236f57,_0x5252c9=[],_0x21d4e8=[],_0x1b91a2=[];try{_0x236f57=await exchange['fetchBalance'](),mybalances=_0x236f57[_0x50151b(0x1ef)];if(!_0x158255)for(const [_0x25eaf7,_0x3a0685]of Object[_0x50151b(0x178)](mybalances)){_0x1b91a2[_0x50151b(0x16b)](_0x25eaf7);}else config[_0x50151b(0x25a)][_0x50151b(0x1cd)](_0x41131b=>{const _0x4071b7=_0x50151b;if(!_0x41131b[_0x4071b7(0x28a)])_0x1b91a2[_0x4071b7(0x16b)](_0x41131b[_0x4071b7(0x171)]);});if(_0x11f647=='')for(const [_0x2c4d7b,_0x563bb1]of Object[_0x50151b(0x178)](mybalances)){_0x563bb1[_0x50151b(0x1fe)]()!=0x0&&_0x21d4e8[_0x50151b(0x16b)]({'coin':_0x2c4d7b});}else{if(_0x19aa9e)await getOpenOrders();let _0x496943=![];for(const [_0x153f2d,_0x5087fe]of Object[_0x50151b(0x178)](mybalances)){if(_0x1b91a2[_0x50151b(0x1a1)](_0x153f2d)){const _0x9b1db0=config[_0x50151b(0x25a)][_0x50151b(0x248)](_0x54905e=>_0x54905e[_0x50151b(0x171)]==_0x153f2d),_0x2ab51=_0x153f2d+'/'+_0x11f647,_0x2810ca=_0x11f647+'/'+_0x153f2d,_0x3df434=currentCoins[_0x50151b(0x248)](_0x8e51f8=>_0x8e51f8[_0x50151b(0x171)]==_0x153f2d);_0x496943=![];_0x19aa9e&&(_0x496943=allOpenOrders['find'](_0x1d02af=>_0x1d02af[_0x50151b(0x18e)]==_0x9b1db0[_0x50151b(0x18e)]));if((_0x5087fe[_0x50151b(0x1fe)]()!=0x0||_0x9b1db0)&&(allSymbols['includes'](_0x2ab51)||_0x153f2d==_0x11f647))_0x153f2d!=_0x11f647&&_0x5252c9[_0x50151b(0x16b)](_0x2ab51),_0x21d4e8[_0x50151b(0x16b)]({'coin':_0x153f2d,'symbol':_0x2ab51,'reverse':![],'number':Math['max'](_0x5087fe+(_0x9b1db0&&_0x9b1db0[_0x50151b(0x173)]||0x0),0x0),'orderstatus':_0x19aa9e?_0x496943?_0x50151b(0x23a):'none':_0x3df434?_0x3df434['orderstatus']:_0x50151b(0x283)});else(_0x5087fe['toString']()!=0x0||_0x9b1db0)&&allSymbols['includes'](_0x2810ca)&&(_0x153f2d!=_0x11f647&&_0x5252c9[_0x50151b(0x16b)](_0x2810ca),_0x21d4e8[_0x50151b(0x16b)]({'coin':_0x153f2d,'symbol':_0x2810ca,'reverse':!![],'number':Math['max'](_0x5087fe+(_0x9b1db0&&_0x9b1db0[_0x50151b(0x173)]||0x0),0x0),'orderstatus':_0x19aa9e?_0x496943?_0x50151b(0x23a):'none':_0x3df434?_0x3df434[_0x50151b(0x1db)]:'none'}));}}}}catch(_0x562b2d){if(!_0x158255)handleErrorNoStop(_0x562b2d,_0x50151b(0x275));else await handleError(_0x562b2d,_0x50151b(0x275));}return _0x21d4e8;}async function getCoinNumber(_0x168e1f){const _0x3e275a=_0x278c3b;let _0x5446f4;try{const _0x103664=await exchange[_0x3e275a(0x21f)]();_0x5446f4=_0x103664[_0x3e275a(0x1ef)][_0x168e1f];}catch(_0x5515c2){await handleError(_0x5515c2,_0x3e275a(0x185));}return _0x5446f4;}async function getOpenOrders(){const _0x72d8cc=_0x278c3b;let _0x4c5363;allOpenOrders=[];try{for(const _0xc4b422 of config['portfolio']){!_0xc4b422[_0x72d8cc(0x28a)]&&_0xc4b422[_0x72d8cc(0x171)]!=config[_0x72d8cc(0x16a)]&&(_0x4c5363=await exchange['fetchOpenOrders'](_0xc4b422[_0x72d8cc(0x18e)]),_0x4c5363[_0x72d8cc(0x1ee)]>0x0&&allOpenOrders['push'](_0x4c5363[0x0]));}}catch(_0x2281f5){await handleError(_0x2281f5,'getOpenOrders()');}}async function handleOpenOrders(_0x884edf=0x0){const _0x5640ac=_0x278c3b;allOpenOrders[_0x5640ac(0x1ee)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x884edf==0x0?(logger[_0x5640ac(0x1af)](_0x5640ac(0x230)),_0x884edf++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5640ac(0x1af)](_0x5640ac(0x15d)),validateOrders('no\x20open\x20orders')));}async function getPortfolio(_0x473fed){const _0x2f04e4=_0x278c3b;let _0x345c06=[],_0x4092d3=[],_0x37b8c1,_0x1fae42=[],_0x1049c3=![];if(_0x473fed['apiKey']===_0x2f04e4(0x225)||_0x473fed[_0x2f04e4(0x2b8)]==='************')_0x1049c3=!![];else{await initExchange(_0x473fed[_0x2f04e4(0x204)],_0x473fed[_0x2f04e4(0x231)],_0x473fed[_0x2f04e4(0x2b8)]);try{_0x1049c3=await loadSymbols();}catch(_0x334cd0){_0x1049c3=![],handleErrorNoStop(_0x334cd0,'loadSymbols()');}}if(_0x1049c3){_0x1fae42=await getCoins(![],![],_0x473fed['basecoin']);if(_0x1fae42===![])proxyEmit(_0x2f04e4(0x25a),![]);else{if(_0x473fed[_0x2f04e4(0x16a)]=='')proxyEmit(_0x2f04e4(0x25a),_0x1fae42);else{_0x1fae42[_0x2f04e4(0x1cd)](_0x5b2eef=>{const _0x2bbda9=_0x2f04e4;if(_0x5b2eef[_0x2bbda9(0x171)]!=_0x473fed[_0x2bbda9(0x16a)])_0x345c06['push'](_0x5b2eef['symbol']);});try{_0x4092d3=await exchange['fetchTickers'](_0x345c06);}catch(_0x1bef8f){await handleError(_0x1bef8f,'getPortfolio()');}_0x1fae42['forEach'](_0x13ec8b=>{const _0x516c4=_0x2f04e4;_0x13ec8b[_0x516c4(0x171)]!=_0x473fed[_0x516c4(0x16a)]?_0x37b8c1=_0x13ec8b[_0x516c4(0x19f)]?0x1/_0x4092d3[_0x13ec8b[_0x516c4(0x18e)]][_0x516c4(0x202)]:_0x4092d3[_0x13ec8b['symbol']][_0x516c4(0x202)]:_0x37b8c1=0x1,_0x13ec8b['price']=formatResult(_0x37b8c1,0x8);}),proxyEmit(_0x2f04e4(0x25a),_0x1fae42);}}}else proxyEmit(_0x2f04e4(0x25a),![]);}function checkMinimums(_0x894dc6){const _0x108e0e=_0x278c3b;let _0x21675b=!![];const _0x2769b7=!_0x894dc6['reverse']?markets[_0x894dc6[_0x108e0e(0x18e)]]['limits']['amount'][_0x108e0e(0x17d)]:markets[_0x894dc6[_0x108e0e(0x18e)]]['limits'][_0x108e0e(0x17c)]['min'],_0x217096=!_0x894dc6[_0x108e0e(0x19f)]?markets[_0x894dc6[_0x108e0e(0x18e)]][_0x108e0e(0x243)][_0x108e0e(0x17c)]['min']:markets[_0x894dc6[_0x108e0e(0x18e)]][_0x108e0e(0x243)]['amount'][_0x108e0e(0x17d)],_0x38ec3d=markets[_0x894dc6[_0x108e0e(0x18e)]][_0x108e0e(0x21d)]['amount'];_0x894dc6['trade']=formatResultTruncate(_0x894dc6[_0x108e0e(0x220)],_0x38ec3d);if(Math[_0x108e0e(0x1b3)](_0x894dc6['trade'])<_0x2769b7)_0x21675b=![];if(Math[_0x108e0e(0x1b3)](_0x894dc6['trade'])*_0x894dc6['last']<_0x217096)_0x21675b=![];if(_0x894dc6[_0x108e0e(0x246)]=='sell'){let _0x2a0397=config[_0x108e0e(0x25a)][_0x108e0e(0x248)](_0x132e24=>_0x132e24[_0x108e0e(0x171)]==_0x894dc6[_0x108e0e(0x171)]);if(_0x2a0397[_0x108e0e(0x173)]>0x0){if(Math[_0x108e0e(0x1b3)](_0x894dc6[_0x108e0e(0x220)])>_0x894dc6[_0x108e0e(0x15e)]-_0x2a0397[_0x108e0e(0x173)])_0x21675b=![];}else{if(Math['abs'](_0x894dc6['trade'])>_0x894dc6['number'])_0x21675b=![];}}if(_0x894dc6['side']==_0x108e0e(0x20f)){let _0x5ee4da=config[_0x108e0e(0x25a)][_0x108e0e(0x248)](_0x451f4e=>_0x451f4e[_0x108e0e(0x171)]==config[_0x108e0e(0x16a)]),_0x252553=currentCoins['find'](_0x1dfef1=>_0x1dfef1[_0x108e0e(0x171)]==config[_0x108e0e(0x16a)]);if(_0x5ee4da[_0x108e0e(0x173)]>0x0){if(Math['abs'](_0x894dc6[_0x108e0e(0x220)])*_0x894dc6['last']>_0x252553[_0x108e0e(0x15e)]-_0x5ee4da[_0x108e0e(0x173)])_0x21675b=![];}else{if(Math[_0x108e0e(0x1b3)](_0x894dc6[_0x108e0e(0x220)])*_0x894dc6[_0x108e0e(0x202)]>_0x252553[_0x108e0e(0x15e)])_0x21675b=![];}}return _0x21675b;}async function getBalances(){const _0x1d794e=_0x278c3b;let _0x520e75=0x0,_0x3b7ab2;const _0x5b7f4b=config[_0x1d794e(0x23b)];if(config[_0x1d794e(0x22d)]&&config[_0x1d794e(0x226)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2e8592=>{const _0x1ad8a1=_0x1d794e;if(_0x2e8592[_0x1ad8a1(0x171)]!=config[_0x1ad8a1(0x16a)]){let _0x52b4b9=global[_0x1ad8a1(0x161)][noslash(_0x2e8592[_0x1ad8a1(0x18e)])];_0x3b7ab2=_0x2e8592[_0x1ad8a1(0x19f)]?0x1/_0x52b4b9:_0x52b4b9;}else _0x3b7ab2=0x1;let _0x3ae62a=_0x2e8592['number']*_0x3b7ab2;_0x520e75+=_0x3ae62a,_0x2e8592[_0x1ad8a1(0x202)]=formatResult(Number(_0x3b7ab2),0x8),_0x2e8592[_0x1ad8a1(0x209)]=_0x3ae62a;}),currentCoins[_0x1d794e(0x1cd)](_0x39a1f5=>{const _0xd631cf=_0x1d794e;let _0x129aaf=config['portfolio'][_0xd631cf(0x248)](_0xc6d476=>_0xc6d476['coin']==_0x39a1f5[_0xd631cf(0x171)]),_0x4de3cd=Number(_0x129aaf[_0xd631cf(0x234)]),_0x46e4b6=_0x39a1f5[_0xd631cf(0x209)]/_0x520e75*0x64,_0x37fda1=_0x4de3cd*_0x520e75/0x64/_0x39a1f5[_0xd631cf(0x202)]-_0x39a1f5[_0xd631cf(0x15e)];_0x39a1f5[_0xd631cf(0x234)]=formatResult(_0x46e4b6,0x3),_0x39a1f5[_0xd631cf(0x228)]=formatResult(_0x4de3cd,0x3),_0x39a1f5['trade']=formatResult(_0x37fda1,0x8),_0x39a1f5[_0xd631cf(0x246)]='',_0x39a1f5[_0xd631cf(0x1d0)]=![];if(_0x39a1f5[_0xd631cf(0x171)]!=config[_0xd631cf(0x16a)]){if(_0x39a1f5['distribution']>_0x4de3cd)_0x39a1f5['side']='sell',_0x39a1f5[_0xd631cf(0x1d0)]=checkMinimums(_0x39a1f5);else _0x39a1f5[_0xd631cf(0x234)]<_0x4de3cd&&(_0x39a1f5[_0xd631cf(0x246)]='buy',_0x39a1f5[_0xd631cf(0x1d0)]=checkMinimums(_0x39a1f5));}_0x39a1f5[_0xd631cf(0x1fb)]=_0x39a1f5[_0xd631cf(0x234)]/_0x39a1f5[_0xd631cf(0x228)]-0x1;if(_0x39a1f5[_0xd631cf(0x1db)]==_0xd631cf(0x29c)||_0x39a1f5[_0xd631cf(0x1db)]=='canceled')_0x39a1f5[_0xd631cf(0x1db)]=_0xd631cf(0x283);}),currentCoins[_0x1d794e(0x208)]((_0x4fe936,_0x203fda)=>_0x4fe936[_0x1d794e(0x1fb)]<_0x203fda[_0x1d794e(0x1fb)]?0x1:_0x203fda[_0x1d794e(0x1fb)]<_0x4fe936[_0x1d794e(0x1fb)]?-0x1:0x0);const _0x3b6c1c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3b6c1c[_0x1d794e(0x1bd)],'usd':_0x3b6c1c['usd'],'portfolio':JSON[_0x1d794e(0x27d)](currentCoins),'threshold':_0x5b7f4b},proxyEmit(_0x1d794e(0x260),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5b7f4b});else{if(lockOrders==ORDERS[_0x1d794e(0x206)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5b7f4b});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x27d265=_0x278c3b;if(!lastBalances)return;let _0x2c9123=[],_0x15badd,_0x423621=JSON[_0x27d265(0x1f1)](lastBalances[_0x27d265(0x25a)]);_0x423621[_0x27d265(0x208)]((_0x372858,_0x12be0e)=>_0x372858[_0x27d265(0x171)]>_0x12be0e[_0x27d265(0x171)]?0x1:_0x12be0e['coin']>_0x372858[_0x27d265(0x171)]?-0x1:0x0),_0x423621[_0x27d265(0x1cd)](_0x1c3ee7=>{const _0x302fb5=_0x27d265;let _0x1d807d={'coin':_0x1c3ee7['coin'],'number':_0x1c3ee7[_0x302fb5(0x15e)],'price':_0x1c3ee7[_0x302fb5(0x202)]};_0x2c9123[_0x302fb5(0x16b)](_0x1d807d);});const _0x5b37d8=await getFiat();_0x15badd={'date':lastBalances[_0x27d265(0x271)][_0x27d265(0x24b)]('\x20')[0x0],'eur':_0x5b37d8['eur'],'usd':_0x5b37d8[_0x27d265(0x19c)],'coins':_0x2c9123};let _0x55237f=dbPerformance[_0x27d265(0x200)](_0x27d265(0x1b7))['find']({'date':_0x15badd[_0x27d265(0x2b7)]})[_0x27d265(0x209)]();_0x55237f?_0x15badd['date']!=config[_0x27d265(0x19a)]&&dbPerformance['get']('data')[_0x27d265(0x248)]({'date':_0x15badd[_0x27d265(0x2b7)]})['assign'](_0x15badd)['write']():dbPerformance[_0x27d265(0x200)](_0x27d265(0x1b7))[_0x27d265(0x16b)](_0x15badd)[_0x27d265(0x2b2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1c591d=_0x278c3b;let _0x34a1ed=[];if(dbPerformance['has'](_0x1c591d(0x1b7))[_0x1c591d(0x209)]()){let _0x186e7c=dbPerformance[_0x1c591d(0x200)](_0x1c591d(0x1b7))[_0x1c591d(0x160)]()[_0x1c591d(0x28d)]('date')[_0x1c591d(0x209)](),_0x162df4=[...config[_0x1c591d(0x240)]];_0x162df4['sort']((_0x5076cf,_0x4f5f88)=>_0x5076cf[_0x1c591d(0x2b7)]>_0x4f5f88[_0x1c591d(0x2b7)]?-0x1:_0x4f5f88[_0x1c591d(0x2b7)]>_0x5076cf['date']?0x1:0x0);let _0x103ff0=0x1,_0x350a81=[],_0x498f95=0x0;_0x186e7c[_0x1c591d(0x291)]()[_0x1c591d(0x19f)]()['forEach']((_0x288d79,_0x997865)=>{const _0x21a191=_0x1c591d;if(_0x162df4[_0x498f95]){if(_0x186e7c[_0x186e7c[_0x21a191(0x1ee)]-_0x997865]&&_0x162df4[_0x498f95][_0x21a191(0x2b7)]==_0x186e7c[_0x186e7c[_0x21a191(0x1ee)]-_0x997865][_0x21a191(0x2b7)]){if(_0x997865<_0x186e7c[_0x21a191(0x1ee)]){let _0x19e4f8=0x0,_0x4ceaca=0x0;_0x186e7c[_0x186e7c[_0x21a191(0x1ee)]-_0x997865][_0x21a191(0x169)][_0x21a191(0x1cd)](_0x47b8e0=>{const _0x5c804e=_0x21a191;_0x4ceaca+=_0x47b8e0[_0x5c804e(0x15e)]*_0x47b8e0[_0x5c804e(0x26c)];}),_0x162df4[_0x498f95][_0x21a191(0x2a6)][_0x21a191(0x1cd)](_0x3b60ad=>{const _0x53031a=_0x21a191;_0x19e4f8+=_0x3b60ad['number']*_0x3b60ad[_0x53031a(0x26c)];}),_0x103ff0*=_0x19e4f8/(_0x4ceaca-_0x19e4f8)+0x1;}_0x498f95++;}}let _0x206f83=0x0;_0x288d79['coins'][_0x21a191(0x1cd)](_0x10a7ba=>{const _0x64563=_0x21a191;_0x206f83+=_0x10a7ba[_0x64563(0x15e)]*_0x10a7ba[_0x64563(0x26c)];}),_0x350a81[_0x186e7c[_0x21a191(0x1ee)]-_0x997865-0x1]=_0x206f83*(_0x103ff0-0x1);});let _0x59819f=[];_0x162df4=[...config[_0x1c591d(0x240)]]||[];let _0x504d1f=0x0;_0x498f95=0x0,_0x186e7c[_0x1c591d(0x1cd)]((_0x392b36,_0x401d7d)=>{const _0x183355=_0x1c591d;if(_0x162df4[_0x498f95]){const _0x2aa6fe=fns[_0x183355(0x1f1)](_0x162df4[_0x498f95]['date'],_0x183355(0x22e),new Date()),_0x291864=fns[_0x183355(0x1f1)](_0x392b36['date'],_0x183355(0x22e),new Date());if(fns[_0x183355(0x2a9)](_0x2aa6fe,_0x291864)){let _0x292fab=0x0;_0x162df4[_0x498f95][_0x183355(0x2a6)][_0x183355(0x1cd)](_0x3da92d=>{const _0x45369d=_0x183355;!_0x59819f[_0x3da92d[_0x45369d(0x171)]]?_0x59819f[_0x3da92d[_0x45369d(0x171)]]=_0x3da92d[_0x45369d(0x15e)]:(_0x292fab=_0x59819f[_0x3da92d[_0x45369d(0x171)]],_0x59819f[_0x3da92d[_0x45369d(0x171)]]+=_0x3da92d['number']);const _0x320c6e=_0x392b36[_0x45369d(0x169)][_0x45369d(0x248)](_0x140f6b=>_0x140f6b['coin']==_0x3da92d['coin']);(!_0x320c6e||_0x320c6e[_0x45369d(0x15e)]==0x0)&&(_0x504d1f+=(-_0x3da92d['number']-_0x292fab)*_0x3da92d[_0x45369d(0x26c)]);}),_0x498f95++;}}_0x392b36['coins'][_0x183355(0x1cd)]((_0x5b43cd,_0x36a371)=>{const _0x2b0e75=_0x183355;_0x59819f[_0x5b43cd[_0x2b0e75(0x171)]]&&(_0x5b43cd={..._0x5b43cd,'initial':_0x59819f[_0x5b43cd[_0x2b0e75(0x171)]]}),_0x392b36['coins'][_0x36a371]=_0x5b43cd;}),_0x34a1ed[_0x183355(0x16b)]({'date':_0x392b36[_0x183355(0x2b7)],'eur':_0x392b36[_0x183355(0x1bd)],'usd':_0x392b36[_0x183355(0x19c)],'offset':_0x350a81[_0x401d7d],'netoffset':_0x504d1f,'coins':_0x392b36[_0x183355(0x169)]});});}return _0x34a1ed;}function emitPerformance(_0x7401a1){const _0x398f32=_0x278c3b;_0x7401a1[_0x398f32(0x1ee)]!==0x0?(proxyEmit(_0x398f32(0x1c1),_0x7401a1),lastPerformanceEmitted=getDate()):proxyEmit(_0x398f32(0x1c1),[]);}function getPerf(_0x447b66,_0x58428e){const _0x42be20=_0x278c3b;let _0x301d34=0x0,_0x396797=0x0,_0x2bcf35=0x0;_0x447b66[_0x42be20(0x169)]['forEach'](_0x5ef0a0=>{const _0x45a894=_0x42be20;_0x301d34+=_0x5ef0a0[_0x45a894(0x15e)]*_0x5ef0a0[_0x45a894(0x26c)];});_0x58428e&&(_0x301d34+=_0x447b66[_0x42be20(0x173)]);if(config[_0x42be20(0x16a)]===_0x42be20(0x180)||config[_0x42be20(0x16a)]===_0x42be20(0x213))_0x396797=_0x301d34*_0x447b66[_0x42be20(0x1bd)],_0x2bcf35=_0x301d34*_0x447b66[_0x42be20(0x19c)];else{if(config[_0x42be20(0x16a)]===_0x42be20(0x1d9)||config[_0x42be20(0x16a)]===_0x42be20(0x1e0)||config[_0x42be20(0x16a)]===_0x42be20(0x1e6))_0x396797=_0x301d34*_0x447b66[_0x42be20(0x1bd)]/_0x447b66['usd'],_0x2bcf35=_0x301d34;else config[_0x42be20(0x16a)]===_0x42be20(0x239)&&(_0x396797=_0x301d34,_0x2bcf35=_0x301d34*_0x447b66[_0x42be20(0x19c)]/_0x447b66[_0x42be20(0x1bd)]);}return[_0x301d34,_0x396797,_0x2bcf35];}function getKPIs(_0x1a7e64,_0x151e0d=_0x278c3b(0x239)){const _0x5a95af=_0x278c3b,_0x49604f=config[_0x5a95af(0x16a)],_0x32bdbd=config['balances'],_0x171a3a=currentCoins,_0x418ff5=getNormalizedPerformance(),_0x8d7e75=_0x1a7e64===_0x5a95af(0x16a)?_0x49604f:_0x1a7e64==='fiat'||_0x1a7e64===_0x5a95af(0x20d)?_0x151e0d:'Net\x20'+_0x49604f,_0x2b8eab=_0x1a7e64===_0x5a95af(0x174)?_0x5a95af(0x25d):_0x1a7e64===_0x5a95af(0x20d)?'Net\x20effect\x20('+_0x8d7e75+')':_0x8d7e75+'\x20value',_0x3600ab=_0x1a7e64==='net-basecoin'||_0x1a7e64==='net-fiat'?_0x5a95af(0x25d):_0x8d7e75+_0x5a95af(0x290);let _0x2b178d=0x0;_0x171a3a[_0x5a95af(0x1cd)](_0x7f08a0=>{const _0x2e597f=_0x5a95af;_0x2b178d+=_0x7f08a0[_0x2e597f(0x15e)]*_0x7f08a0['last'];});if(_0x1a7e64===_0x5a95af(0x257)||_0x1a7e64===_0x5a95af(0x20d)){if(_0x49604f===_0x5a95af(0x180)||_0x49604f===_0x5a95af(0x213))_0x2b178d=_0x2b178d*(_0x151e0d===_0x5a95af(0x239)?_0x32bdbd[_0x5a95af(0x1bd)]:_0x32bdbd[_0x5a95af(0x19c)]);else{if(_0x49604f===_0x5a95af(0x1d9)||_0x49604f===_0x5a95af(0x1e0)||_0x49604f==='USD')_0x2b178d=_0x2b178d*(_0x151e0d===_0x5a95af(0x239)?_0x32bdbd[_0x5a95af(0x1bd)]/_0x32bdbd['usd']:0x1);else _0x49604f===_0x5a95af(0x239)&&(_0x2b178d=_0x2b178d*(_0x151e0d===_0x5a95af(0x239)?0x1:_0x32bdbd[_0x5a95af(0x19c)]/_0x32bdbd['eur']));}}let _0x4f6cef;if(_0x2b178d!==0x0){if(_0x1a7e64==='basecoin')_0x4f6cef=(_0x2b178d/startingBalances[_0x5a95af(0x16a)]-0x1)*0x64;else{if(_0x151e0d===_0x5a95af(0x239))_0x4f6cef=(_0x2b178d/startingBalances[_0x5a95af(0x1bd)]-0x1)*0x64;else _0x4f6cef=(_0x2b178d/startingBalances['usd']-0x1)*0x64;}let _0x2c35b2=0x0;if(startingBalances[_0x5a95af(0x169)])_0x171a3a[_0x5a95af(0x1cd)](_0x5c8dd8=>{const _0x19916f=_0x5a95af;let _0x1d714e=startingBalances[_0x19916f(0x169)][_0x19916f(0x248)](_0x20a3d8=>_0x20a3d8[_0x19916f(0x171)]===_0x5c8dd8['coin']);if(_0x1d714e&&_0x1d714e[_0x19916f(0x171)]&&_0x5c8dd8[_0x19916f(0x15e)]!==0x0)_0x2c35b2+=_0x1d714e[_0x19916f(0x15e)]*_0x5c8dd8[_0x19916f(0x202)];});let _0x28c9c0=0x0;if(_0x418ff5[_0x5a95af(0x1ee)]!==0x0){let _0x22a244=_0x418ff5[_0x418ff5[_0x5a95af(0x1ee)]-0x1];_0x28c9c0=_0x22a244[_0x5a95af(0x199)];}_0x2c35b2-=_0x28c9c0;_0x1a7e64===_0x5a95af(0x174)&&(_0x4f6cef=(_0x2b178d-_0x2c35b2)/startingBalances[_0x5a95af(0x16a)]*0x64,_0x2b178d=_0x2b178d-_0x2c35b2);if(_0x1a7e64===_0x5a95af(0x20d)){let _0x557787=_0x151e0d===_0x5a95af(0x239)?startingBalances['eur']:startingBalances['usd'];if(_0x49604f===_0x5a95af(0x180)||_0x49604f===_0x5a95af(0x213))_0x2c35b2=_0x151e0d===_0x5a95af(0x239)?_0x2c35b2*_0x32bdbd[_0x5a95af(0x1bd)]:_0x2c35b2*_0x32bdbd[_0x5a95af(0x19c)];else{if(_0x49604f==='BUSD'||_0x49604f===_0x5a95af(0x1e0)||_0x49604f==='USD')_0x2c35b2=_0x151e0d==='EUR'?_0x2c35b2*_0x32bdbd[_0x5a95af(0x1bd)]/_0x32bdbd[_0x5a95af(0x19c)]:_0x2c35b2;else _0x49604f===_0x5a95af(0x239)&&(_0x2c35b2=_0x151e0d===_0x5a95af(0x239)?_0x2c35b2:_0x2c35b2*_0x32bdbd['usd']/_0x32bdbd[_0x5a95af(0x1bd)]);}_0x4f6cef=(_0x2b178d-_0x2c35b2)/_0x557787*0x64,_0x2b178d=_0x2b178d-_0x2c35b2;}if(_0x4f6cef){if(_0x4f6cef<0x64)_0x4f6cef=_0x4f6cef['toFixed'](0x2);else{if(_0x4f6cef<0x3e8)_0x4f6cef=_0x4f6cef[_0x5a95af(0x165)](0x1);else _0x4f6cef=_0x4f6cef['toFixed'](0x0);}}else _0x4f6cef=Number('0')['toFixed'](0x2);if(_0x2b178d){if(Math['abs'](_0x2b178d)<0.000001)_0x2b178d=_0x2b178d['toFixed'](0x2);else{if(Math['abs'](_0x2b178d)<0.1)_0x2b178d=_0x2b178d[_0x5a95af(0x165)](0x6);else{if(Math[_0x5a95af(0x1b3)](_0x2b178d)<0x1)_0x2b178d=_0x2b178d[_0x5a95af(0x165)](0x5);else{if(Math[_0x5a95af(0x1b3)](_0x2b178d)<0xa)_0x2b178d=_0x2b178d[_0x5a95af(0x165)](0x4);else{if(Math['abs'](_0x2b178d)<0x64)_0x2b178d=_0x2b178d[_0x5a95af(0x165)](0x3);else{if(Math[_0x5a95af(0x1b3)](_0x2b178d)<0x3e8)_0x2b178d=_0x2b178d['toFixed'](0x2);else _0x2b178d=_0x2b178d[_0x5a95af(0x165)](0x2);}}}}}}else _0x2b178d=Number('0')[_0x5a95af(0x165)](0x2);}else _0x4f6cef=Number('0')[_0x5a95af(0x165)](0x2);return{'value':_0x2b178d,'change':_0x4f6cef,'leftTxt':_0x2b8eab,'rightTxt':_0x3600ab};}async function getStartingBalances(_0x186076,_0x47bed8=!![]){const _0x48b85c=_0x278c3b;if(_0x186076[_0x48b85c(0x1ee)]!==0x0){const [_0x50083e,_0x563126,_0xc16f2a]=getPerf(_0x186076[0x0],!![]);let _0x3d4e73=[];config[_0x48b85c(0x25a)][_0x48b85c(0x1cd)](_0x566c5a=>{const _0x294c15=_0x48b85c;let _0x4fd2c5=0x0,_0x37886f;config['liquidity'][_0x294c15(0x1cd)](_0x244b99=>{const _0x218177=_0x294c15;let _0x149dcd=_0x244b99['changes'][_0x218177(0x248)](_0x1fcb8b=>_0x1fcb8b[_0x218177(0x171)]==_0x566c5a[_0x218177(0x171)]);if(_0x149dcd){_0x4fd2c5+=_0x149dcd[_0x218177(0x15e)];if(!_0x37886f)_0x37886f=_0x149dcd[_0x218177(0x26c)];}}),_0x3d4e73[_0x294c15(0x16b)]({'coin':_0x566c5a[_0x294c15(0x171)],'number':_0x4fd2c5,'initialprice':_0x37886f});});const _0x1ba1c1={'basecoin':_0x50083e,'eur':_0x563126,'usd':_0xc16f2a,'coins':_0x3d4e73};if(_0x47bed8)proxyEmit('starting-balances',_0x1ba1c1);startingBalances=_0x1ba1c1;}}function headlessMode(_0x2690b9){const _0x350203=_0x278c3b;let _0x30d727=_0x2690b9[_0x350203(0x25a)],_0x100632=_0x2690b9[_0x350203(0x23b)],_0x1fb82c=[];for(let _0x173cc9 of _0x30d727){if(_0x173cc9[_0x350203(0x171)]!=config[_0x350203(0x16a)]){if(_0x173cc9[_0x350203(0x1fb)]>=_0x100632/0x64){if(_0x173cc9['valid'])_0x1fb82c[_0x350203(0x16b)](_0x173cc9);}else{if(_0x173cc9[_0x350203(0x1fb)]<=-_0x100632/0x64){if(_0x173cc9['valid'])_0x1fb82c[_0x350203(0x16b)](_0x173cc9);}}}}_0x1fb82c[_0x350203(0x1ee)]>0x0&&placeOrder(_0x1fb82c);}function notifyBalance(_0x3523b9){const _0x4499ca=_0x278c3b;let _0x14bc10=_0x3523b9['portfolio'],_0x560c28=_0x3523b9[_0x4499ca(0x23b)],_0x23dcd6=[];for(let _0x16aa50 of _0x14bc10){if(_0x16aa50['coin']!=config['basecoin']){if(_0x16aa50[_0x4499ca(0x1fb)]>=_0x560c28/0x64){if(_0x16aa50[_0x4499ca(0x1d0)])_0x23dcd6[_0x4499ca(0x16b)](_0x16aa50);}else{if(_0x16aa50[_0x4499ca(0x1fb)]<=-_0x560c28/0x64){if(_0x16aa50[_0x4499ca(0x1d0)])_0x23dcd6[_0x4499ca(0x16b)](_0x16aa50);}}}}if(_0x23dcd6[_0x4499ca(0x1ee)]>0x0){let _0x1941cd=_0x23dcd6[_0x4499ca(0x1d6)](_0x59f5cb=>_0x59f5cb[_0x4499ca(0x171)]);_0x1941cd[_0x4499ca(0x208)]();let _0x1f4cfd=_0x1941cd['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x4499ca(0x1df),_0x4499ca(0x196));lastCoinsToBalance=_0x1f4cfd;}}function symbolToCoin(_0x592814){const _0x38c189=_0x278c3b;let _0x1cad42;if(_0x592814[_0x38c189(0x1a1)]('/'+config['basecoin']))_0x1cad42=_0x592814['replace']('/'+config[_0x38c189(0x16a)],'');if(_0x592814[_0x38c189(0x1a1)](config[_0x38c189(0x16a)]+'/'))_0x1cad42=_0x592814[_0x38c189(0x18a)](config['basecoin']+'/','');return _0x1cad42;}async function unlockOrders(){const _0x4e428f=_0x278c3b;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4e428f(0x1ac)]){logger[_0x4e428f(0x1af)](_0x4e428f(0x284)),lockOrders=ORDERS[_0x4e428f(0x25c)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x4e428f(0x206)],logger[_0x4e428f(0x1af)](_0x4e428f(0x29a));}}async function validateOrders(_0xb606fd){const _0x5e39b3=_0x278c3b;if(_0xb606fd)validateOrdersState=_0xb606fd;logger[_0x5e39b3(0x1af)](_0x5e39b3(0x244)+validateOrdersState+_0x5e39b3(0x267)+(lockOrders==0x1?_0x5e39b3(0x1a2):lockOrders==0x2?'ORDERS.UNLOCKING':_0x5e39b3(0x158)));let _0x19f2e4=[],_0x48f4f3=config['ordertype']==_0x5e39b3(0x237)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5e39b3(0x1a4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5e39b3(0x1ac)])return;logger[_0x5e39b3(0x1af)](_0x5e39b3(0x20a)+validateOrdersState),lastOrders['forEach'](_0x340a64=>{const _0x36c0a2=_0x5e39b3;let _0x2a5d23=![];_0x340a64[_0x36c0a2(0x29c)]>0x0&&(_0x2a5d23=!![]),_0x19f2e4[_0x36c0a2(0x16b)](_0x2a5d23),_0x2a5d23&&config[_0x36c0a2(0x1b4)]!=_0x36c0a2(0x237)&&logHistory(_0x36c0a2(0x1dd),_0x36c0a2(0x259)+_0x340a64['symbol']+'\x20'+_0x340a64[_0x36c0a2(0x246)]+'\x20#'+formatResult(_0x340a64[_0x36c0a2(0x29c)],0x8)+'\x20@'+formatResult(_0x340a64['price'],0x8));}),_0x19f2e4['forEach']((_0x3649e8,_0x2b65c7)=>{if(_0x3649e8)lastOrders['splice'](_0x2b65c7,0x1);}),persistOpenOrders(lastOrders);const _0x31f66a=coolingDown?_0x5e39b3(0x15a):_0x5e39b3(0x28e);if(validateOrdersState=='initial')validateOrdersState=_0x5e39b3(0x1bb),_0x19f2e4[_0x5e39b3(0x1a1)](![])?config[_0x5e39b3(0x1b4)]=='market'?logHistory(_0x5e39b3(0x1df),_0x5e39b3(0x198)):logHistory(_0x5e39b3(0x1df),_0x5e39b3(0x193)):await unlockOrders();else{if(validateOrdersState==_0x5e39b3(0x1bb)){if(_0x19f2e4[_0x5e39b3(0x1a1)](![])){}else allOrdersPlaced&&(config[_0x5e39b3(0x1b4)]==_0x5e39b3(0x237)?logHistory(_0x5e39b3(0x1a8),'Order(s)\x20validated\x20-\x20'+_0x31f66a):logHistory('success',_0x5e39b3(0x2a3)+_0x31f66a),await unlockOrders());}else{if(validateOrdersState=='final')_0x19f2e4[_0x5e39b3(0x1a1)](![])&&(config[_0x5e39b3(0x1b4)]==_0x5e39b3(0x237)?logHistory(_0x5e39b3(0x1a8),_0x5e39b3(0x223)+Math[_0x5e39b3(0x1f2)](_0x48f4f3*validateOrderInterval/0xea60)+_0x5e39b3(0x201)+_0x31f66a):(await cancelOrders(),logHistory(_0x5e39b3(0x1a8),_0x5e39b3(0x2a5)+Math[_0x5e39b3(0x1f2)](_0x48f4f3*validateOrderInterval/0xea60)+_0x5e39b3(0x201)+_0x31f66a))),await unlockOrders();else{if(validateOrdersState==_0x5e39b3(0x24d)){if(config[_0x5e39b3(0x1b4)]!=_0x5e39b3(0x237))logHistory(_0x5e39b3(0x1a8),_0x5e39b3(0x268)+_0x31f66a);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x42e49d=>{const _0x5dca51=_0x5788;try{const _0x45fc79=await exchange[_0x5dca51(0x2ae)](_0x42e49d['orderId'],_0x42e49d['symbol']);}catch(_0x37412b){if(_0x37412b[_0x5dca51(0x1fe)]()[_0x5dca51(0x1a1)](_0x5dca51(0x28c))){}else await handleError(_0x37412b,_0x5dca51(0x1d4));}});}async function initCoinResults(){const _0x5676eb=_0x278c3b;let _0x29a24f=[];config[_0x5676eb(0x25a)]['forEach'](_0xe32446=>{const _0x4c559f=_0x5676eb;if(!_0xe32446[_0x4c559f(0x28a)]&&_0xe32446[_0x4c559f(0x171)]!=config[_0x4c559f(0x16a)]){let _0x419793=dbCoinResults[_0x4c559f(0x200)](_0x4c559f(0x169))[_0x4c559f(0x248)]({'coin':_0xe32446[_0x4c559f(0x171)]})[_0x4c559f(0x209)]();if(!_0x419793){const _0x5bbe31=currentCoins[_0x4c559f(0x248)](_0x549a61=>_0x549a61[_0x4c559f(0x171)]==_0xe32446['coin']),_0x595bde=global['ticker'][noslash(_0xe32446[_0x4c559f(0x18e)])];let _0xc78711=_0x5bbe31?_0x5bbe31[_0x4c559f(0x15e)]:null,_0xbbf6ac=_0xe32446['reverse']?0x1/_0x595bde:_0x595bde,_0x59f469;config[_0x4c559f(0x240)][_0x4c559f(0x1cd)](_0x79f19a=>{const _0xba497=_0x4c559f;!_0x59f469&&(_0x59f469=_0x79f19a[_0xba497(0x2a6)][_0xba497(0x248)](_0x1c8131=>_0x1c8131['coin']==_0xe32446[_0xba497(0x171)]),_0x59f469&&(_0xc78711=_0x59f469[_0xba497(0x15e)],_0xbbf6ac=_0x59f469['price']));}),_0x29a24f[_0x4c559f(0x16b)]({'coin':_0xe32446['coin'],'number':_0xc78711,'price':_0xbbf6ac});}}}),_0x29a24f[_0x5676eb(0x1cd)](_0x47960f=>{const _0x176739=_0x5676eb,_0x50f40b={'coin':_0x47960f['coin'],'number':_0x47960f[_0x176739(0x15e)],'breakeven':_0x47960f[_0x176739(0x26c)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x176739(0x200)](_0x176739(0x169))['push'](_0x50f40b)[_0x176739(0x2b2)]();});}async function updateCoinResults(_0x3f0e71,_0x408d5a=![]){const _0x47ec6d=_0x278c3b;let _0xb02fd4,_0x32aef0,_0x5072a2,_0x4e67a2,_0x140cfe,_0x277805,_0xf692c5=dbCoinResults[_0x47ec6d(0x200)](_0x47ec6d(0x169))[_0x47ec6d(0x248)]({'coin':_0x3f0e71[_0x47ec6d(0x171)]})[_0x47ec6d(0x209)]();!_0xf692c5&&await initCoinResults();_0x3f0e71['reverse']&&(_0x277805={'filled':_0x3f0e71['filled']*_0x3f0e71[_0x47ec6d(0x26c)],'amount':_0x3f0e71[_0x47ec6d(0x29c)]*_0x3f0e71[_0x47ec6d(0x26c)],'side':_0x3f0e71[_0x47ec6d(0x246)]==_0x47ec6d(0x25b)?_0x47ec6d(0x20f):_0x47ec6d(0x25b),'price':0x1/_0x3f0e71['price']},_0x3f0e71={..._0x3f0e71,..._0x277805});_0x408d5a?_0x32aef0=_0x3f0e71['side']==_0x47ec6d(0x20f)?_0xf692c5[_0x47ec6d(0x15e)]+_0x3f0e71[_0x47ec6d(0x29c)]:_0xf692c5[_0x47ec6d(0x15e)]-_0x3f0e71[_0x47ec6d(0x29c)]:_0x32aef0=await getCoinNumber(_0x3f0e71[_0x47ec6d(0x171)]);if(_0x3f0e71[_0x47ec6d(0x292)]&&_0x3f0e71[_0x47ec6d(0x292)]['currency']==config[_0x47ec6d(0x16a)])_0xb02fd4=_0x3f0e71['fee'][_0x47ec6d(0x17c)];else{if(_0x3f0e71[_0x47ec6d(0x292)]&&_0x3f0e71[_0x47ec6d(0x292)]['currency']=='BNB'&&!_0x408d5a)_0xb02fd4=_0x3f0e71[_0x47ec6d(0x292)][_0x47ec6d(0x17c)]*global['ticker']['BNB'+config[_0x47ec6d(0x16a)]];else _0xb02fd4=defaultFee*_0x3f0e71[_0x47ec6d(0x29c)]*_0x3f0e71[_0x47ec6d(0x26c)];}_0x3f0e71[_0x47ec6d(0x246)]=='buy'?(_0x5072a2=_0x32aef0!=0x0?(_0xf692c5[_0x47ec6d(0x2b0)]*_0xf692c5[_0x47ec6d(0x15e)]+_0x3f0e71[_0x47ec6d(0x26c)]*(_0x32aef0-_0xf692c5[_0x47ec6d(0x15e)])+_0xb02fd4)/_0x32aef0:0x0,_0x4e67a2=_0xf692c5['realized']):(_0x5072a2=_0x32aef0!=0x0?(_0xf692c5[_0x47ec6d(0x2b0)]*_0xf692c5[_0x47ec6d(0x15e)]-_0x3f0e71[_0x47ec6d(0x26c)]*(_0xf692c5[_0x47ec6d(0x15e)]-_0x32aef0)+_0xb02fd4)/_0x32aef0:0x0,_0x4e67a2=_0xf692c5[_0x47ec6d(0x190)]+(_0x3f0e71['price']-_0xf692c5[_0x47ec6d(0x2b0)])*_0x3f0e71['filled']);_0x140cfe=(_0x3f0e71[_0x47ec6d(0x26c)]-_0x5072a2-_0xb02fd4/_0x3f0e71[_0x47ec6d(0x29c)])*_0x32aef0;let _0x36e0d4={'coin':_0x3f0e71[_0x47ec6d(0x171)],'number':_0x32aef0,'breakeven':formatResult(_0x5072a2,0x8),'realized':formatResult(_0x4e67a2,0x8),'unrealized':formatResult(_0x140cfe,0x8),'fees':formatResult(_0xf692c5[_0x47ec6d(0x16c)]+_0xb02fd4,0x8),'sells':_0x3f0e71[_0x47ec6d(0x246)]==_0x47ec6d(0x25b)?_0xf692c5[_0x47ec6d(0x26f)]+0x1:_0xf692c5['sells'],'buys':_0x3f0e71[_0x47ec6d(0x246)]==_0x47ec6d(0x20f)?_0xf692c5[_0x47ec6d(0x287)]+0x1:_0xf692c5[_0x47ec6d(0x287)]};dbCoinResults[_0x47ec6d(0x200)](_0x47ec6d(0x169))['find']({'coin':_0x3f0e71[_0x47ec6d(0x171)]})[_0x47ec6d(0x207)](_0x36e0d4)['write']();if(!_0x408d5a){if(_0x3f0e71[_0x47ec6d(0x292)]&&_0x3f0e71['fee'][_0x47ec6d(0x168)]==_0x47ec6d(0x1f9)){const _0x5075e5=currentCoins[_0x47ec6d(0x248)](_0x3495f7=>_0x3495f7[_0x47ec6d(0x171)]==_0x47ec6d(0x1f9));if(_0x5075e5){let _0x1ab1a7=dbCoinResults[_0x47ec6d(0x200)](_0x47ec6d(0x169))[_0x47ec6d(0x248)]({'coin':'BNB'})['value']();_0x36e0d4={..._0x1ab1a7,'number':_0x5075e5['number']},dbCoinResults['get']('coins')[_0x47ec6d(0x248)]({'coin':'BNB'})[_0x47ec6d(0x207)](_0x36e0d4)[_0x47ec6d(0x2b2)]();}}}}async function placeOrder(_0x3632b9){const _0x147054=_0x278c3b,_0x22f67c=config[_0x147054(0x1b4)]==_0x147054(0x237)?'market':_0x147054(0x266);if(lockOrders==ORDERS[_0x147054(0x206)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x147054(0x1ac)],allOrdersPlaced=![],validateOrdersState=_0x147054(0x242),lastOrders=[];for(const _0x1cb6a4 of _0x3632b9){let _0x2a41ea,_0x4648df,_0x3f3a4a,_0x2a8dfa,_0x2eca68,_0x29d9b8=_0x1cb6a4['symbol'];try{const _0x27bf92=await exchange[_0x147054(0x276)](_0x29d9b8);_0x2a41ea=_0x1cb6a4['reverse']?0x1/_0x1cb6a4[_0x147054(0x202)]:_0x1cb6a4['last'],_0x4648df=_0x27bf92[_0x147054(0x1c6)],_0x3f3a4a=_0x27bf92[_0x147054(0x1fc)];_0x1cb6a4[_0x147054(0x19f)]?(_0x2a8dfa=_0x1cb6a4['side']==_0x147054(0x20f)?_0x147054(0x25b):'buy',_0x2eca68=Math[_0x147054(0x1b3)](_0x1cb6a4['trade'])/_0x2a41ea):(_0x2a8dfa=_0x1cb6a4[_0x147054(0x246)],_0x2eca68=Math['abs'](_0x1cb6a4[_0x147054(0x220)]));_0x22f67c==_0x147054(0x266)&&(config[_0x147054(0x1b4)]==_0x147054(0x1f6)&&(_0x2a41ea=_0x2a8dfa==_0x147054(0x20f)?_0x4648df:_0x3f3a4a),config[_0x147054(0x1b4)]==_0x147054(0x172)&&(_0x2a41ea=_0x2a8dfa==_0x147054(0x20f)?_0x3f3a4a:_0x4648df));_0x2eca68=formatResult(_0x2eca68,0x8),_0x2a41ea=formatResult(_0x2a41ea,0x8);const _0x515e3a=_0x2a8dfa==_0x147054(0x25b)?config[_0x147054(0x1d8)]?String[_0x147054(0x217)]('0x'+config[_0x147054(0x1d8)])+'\x20':'':config[_0x147054(0x184)]?String[_0x147054(0x217)]('0x'+config['emojibuy'])+'\x20':'',_0x37b017=_0x22f67c=='market'?_0x147054(0x20e):config[_0x147054(0x1b4)]==_0x147054(0x1f6)?_0x147054(0x20b):_0x147054(0x167),_0x5071b7=new Date()[_0x147054(0x1a0)]()[_0x147054(0x1fe)]()[_0x147054(0x291)](-0x6)+'-'+Math[_0x147054(0x1bc)]()[_0x147054(0x1fe)]()[_0x147054(0x291)](-0x6);lastOrders[_0x147054(0x16b)]({'customId':_0x5071b7,'symbol':_0x29d9b8,'coin':_0x1cb6a4[_0x147054(0x171)],'side':_0x2a8dfa,'reverse':_0x1cb6a4['reverse'],'filled':0x0});if(_0x22f67c==_0x147054(0x237))logHistory('order',''+_0x515e3a+_0x37b017+_0x147054(0x1ed)+_0x29d9b8+'\x20'+_0x2a8dfa+'\x20#'+formatResult(_0x2eca68,0x8)+'\x20@'+formatResult(_0x2a41ea,0x8));else logHistory(_0x147054(0x1dd),''+_0x515e3a+_0x37b017+'\x20order:\x20'+_0x29d9b8+'\x20'+_0x2a8dfa+'\x20#'+formatResult(_0x2eca68,0x8)+'\x20@'+formatResult(_0x2a41ea,0x8));const _0x2ff6fb=await exchange['createOrder'](_0x29d9b8,_0x22f67c,_0x2a8dfa,_0x2eca68,_0x2a41ea,{'clientOrderId':_0x5071b7}),_0x2c7f03=lastOrders[_0x147054(0x1ee)]-0x1;_0x2c7f03>=0x0&&lastOrders[_0x2c7f03]['customId']==_0x5071b7&&(lastOrders[_0x2c7f03]={...lastOrders[_0x2c7f03],'orderId':_0x2ff6fb['id'],'amount':_0x2ff6fb[_0x147054(0x27a)],'price':_0x2ff6fb[_0x147054(0x26c)],'fee':_0x2ff6fb['fee']});if(config[_0x147054(0x1b5)]!=0x0){let _0x3bce3f=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x3bce3f=cooldownTracker[_0x147054(0x26e)]();const _0x50c10d=getTimeStamp();cooldownTracker[_0x147054(0x16b)](_0x50c10d);if(_0x3bce3f){const _0x208c89=fns[_0x147054(0x166)](new Date(_0x50c10d),new Date(_0x3bce3f));if(_0x208c89<cooldownInterval){logHistory(_0x147054(0x191),'Executed\x20'+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x147054(0x1f8)+cooldownPeriod/(0xe10*0x3e8)+_0x147054(0x1de)),coolingDown=!![];break;}}}}catch(_0x4547ea){if(_0x4547ea[_0x147054(0x1fe)]()['includes'](_0x147054(0x22b)))lastOrders=lastOrders[_0x147054(0x17e)](_0x124702=>_0x124702[_0x147054(0x18e)]!=_0x29d9b8),logHistory(_0x147054(0x191),_0x147054(0x256)+_0x29d9b8);else _0x4547ea[_0x147054(0x1fe)]()['includes']('Invalid\x20quantity')?(lastOrders=lastOrders[_0x147054(0x17e)](_0x2c6dcd=>_0x2c6dcd[_0x147054(0x18e)]!=_0x29d9b8),logHistory(_0x147054(0x191),_0x147054(0x251)+_0x29d9b8)):(lastOrders=lastOrders[_0x147054(0x17e)](_0x4bdfe9=>_0x4bdfe9['symbol']!=_0x29d9b8),await handleError(_0x4547ea,_0x147054(0x189),_0x29d9b8));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4ee27c=config[_0x147054(0x1b4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x147054(0x1a4)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4ee27c);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x147054(0x258)));}else{if(coolingDown)!config[_0x147054(0x22d)]&&logHistory('error',_0x147054(0x1ff));else lockOrders!=ORDERS[_0x147054(0x206)]&&(!config[_0x147054(0x22d)]&&(config[_0x147054(0x1b4)]==_0x147054(0x237)?logHistory(_0x147054(0x191),_0x147054(0x236)):logHistory(_0x147054(0x191),_0x147054(0x1f7))));}}function persistOpenOrders(_0x10e627){const _0x39f3dc=_0x278c3b,_0x2c476b={...config,'openOrders':_0x10e627};let _0x4ef2e3=dbConfig[_0x39f3dc(0x200)]('bot')[_0x39f3dc(0x248)]({'botID':botID})[_0x39f3dc(0x209)]();_0x4ef2e3&&dbConfig[_0x39f3dc(0x200)]('bot')[_0x39f3dc(0x248)]({'botID':botID})['assign'](_0x2c476b)[_0x39f3dc(0x2b2)]();}function restoreOrders(){const _0x4148ce=_0x278c3b;let _0x13a2a0;config[_0x4148ce(0x241)]&&allOpenOrders['forEach'](_0x49e97a=>{const _0x2c9a53=_0x4148ce,_0x4020ed=config[_0x2c9a53(0x241)][_0x2c9a53(0x248)](_0x5aefb3=>_0x5aefb3['orderId']==_0x49e97a['id']);_0x4020ed&&(lastOrders[_0x2c9a53(0x16b)](_0x4020ed),_0x13a2a0=_0x49e97a[_0x2c9a53(0x205)]);});if(lastOrders[_0x4148ce(0x1ee)]>0x0){lockOrders=ORDERS[_0x4148ce(0x1ac)],validateOrdersState=_0x4148ce(0x1bb),allOrdersPlaced=!![];const _0x10a6c7=new Date()[_0x4148ce(0x1a0)](),_0x3b9f7b=config[_0x4148ce(0x1b4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4148ce(0x1a4)]*0x3c*0x3e8;if(_0x13a2a0+_0x3b9f7b>_0x10a6c7){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x389f9e=_0x4148ce;validateOrders(_0x389f9e(0x1a9));},_0x13a2a0+_0x3b9f7b-_0x10a6c7);}else validateOrders(_0x4148ce(0x1a9));}}async function sendPortfolioTelegram(){const _0x583f47=_0x278c3b;if(!coinsLoaded){process[_0x583f47(0x1ec)]({'telegrammsg':_0x583f47(0x272)},_0x1f80d6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x3435d7=['EUR','USD',_0x583f47(0x1d9),_0x583f47(0x1e0)],_0x4e4086=_0x3435d7[_0x583f47(0x1a1)](config[_0x583f47(0x16a)])?0x2:0x8;let _0x354bfb='';if(config['showname'])_0x354bfb=_0x583f47(0x17f)+config[_0x583f47(0x250)]+_0x583f47(0x19b);else _0x354bfb=_0x583f47(0x273)+botID+_0x583f47(0x19b);const _0x104eee=getKPIs(_0x583f47(0x16a)),_0x3ac5f8=getKPIs(_0x583f47(0x174));_0x354bfb+='<pre>',_0x354bfb+=_0x104eee['leftTxt']+_0x583f47(0x192)+_0x104eee[_0x583f47(0x209)]+'\x20\x0a',_0x354bfb+=_0x104eee[_0x583f47(0x1fa)]+':\x20'+_0x104eee[_0x583f47(0x22c)]+_0x583f47(0x255),_0x354bfb+=_0x3ac5f8[_0x583f47(0x2a4)]+':\x20'+_0x3ac5f8[_0x583f47(0x209)]+'\x20'+config[_0x583f47(0x16a)]+'\x0a',_0x354bfb+=_0x3ac5f8[_0x583f47(0x1fa)]+':\x20'+_0x3ac5f8[_0x583f47(0x22c)]+_0x583f47(0x255),_0x354bfb+='\x0a',_0x354bfb+='-------------------------------\x0a',_0x354bfb+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x354bfb+=_0x583f47(0x1c8),currentCoins[_0x583f47(0x1cd)](_0x5663a4=>{const _0x5d803c=_0x583f47;_0x354bfb+=_0x5663a4[_0x5d803c(0x171)]['padEnd'](0x7)+'|\x20'+formatPad(_0x5663a4[_0x5d803c(0x234)],0x2,0x6)+'|\x20'+formatPad(_0x5663a4[_0x5d803c(0x228)],0x2,0x6)+'|\x20'+formatPad(_0x5663a4[_0x5d803c(0x1fb)]*0x64,0x2,0x6)+'\x0a';}),_0x354bfb+=_0x583f47(0x1cc),process['send']({'telegrammsg':_0x354bfb},_0x2c13b6=>{});}function formatPad(_0x36144c,_0x5bdad2,_0x24647f){const _0x14f554=_0x278c3b,_0x1dffa6=formatResultString(_0x36144c,_0x5bdad2);return _0x1dffa6?_0x1dffa6[_0x14f554(0x1d3)](_0x24647f):''[_0x14f554(0x1d3)](_0x24647f);}function logHistory(_0x4b682f,_0x21317b,_0x4df6e7=''){const _0xd69e19=_0x278c3b;let _0x3c6ea0={'time':getTimeStamp(),'type':_0x4b682f,'event':_0x21317b};dbLogs[_0xd69e19(0x200)](_0xd69e19(0x21a))['push'](_0x3c6ea0)[_0xd69e19(0x2b2)]();if(_0x4df6e7=='')_0x4df6e7=_0x21317b;proxyEmit('event',{'log':_0x3c6ea0,'summary':_0x4df6e7}),process[_0xd69e19(0x1ec)]({'telegram':{..._0x3c6ea0,'botname':config[_0xd69e19(0x250)],'showname':config[_0xd69e19(0x1b6)]}},_0x5487bd=>{}),logger['full'](''+_0x3c6ea0['event']);}function emitHistory(_0x6139f4={}){const _0x498772=_0x278c3b;Object[_0x498772(0x1ca)](_0x6139f4)[_0x498772(0x1ee)]==0x0&&(_0x6139f4={'type':[_0x498772(0x1dd),'event'],'event':'','page':0x1});if(_0x6139f4[_0x498772(0x1a7)][_0x498772(0x1a1)](_0x498772(0x25e)))_0x6139f4['type'][_0x498772(0x2a0)](_0x6139f4['type']['indexOf'](_0x498772(0x25e)),0x1,'error',_0x498772(0x1a8));if(dbLogs[_0x498772(0x218)]('logs')[_0x498772(0x209)]()){let _0x4afc82=dbLogs['get'](_0x498772(0x21a))[_0x498772(0x17e)](_0x9e284=>{const _0x34b1d0=_0x498772;if(_0x6139f4[_0x34b1d0(0x1a7)][_0x34b1d0(0x1ee)]==0x0)return![];else return _0x6139f4['type'][_0x34b1d0(0x1a1)](_0x9e284[_0x34b1d0(0x1a7)]);})['filter'](_0x20e402=>{const _0x789c79=_0x498772;if(_0x6139f4[_0x789c79(0x25e)]=='')return!![];else return _0x20e402[_0x789c79(0x25e)]['toLowerCase']()[_0x789c79(0x1a1)](_0x6139f4[_0x789c79(0x25e)][_0x789c79(0x247)]());})[_0x498772(0x28d)](_0x498772(0x271)),_0x113665=_0x4afc82[_0x498772(0x209)]()[_0x498772(0x1ee)];_0x4afc82=_0x4afc82[_0x498772(0x19f)]()[_0x498772(0x291)]((_0x6139f4['page']-0x1)*logPageSize,_0x6139f4['page']*logPageSize-0x1)[_0x498772(0x19f)]()[_0x498772(0x209)](),proxyEmit('event-history',{'logs':_0x4afc82,'total':_0x113665});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5e66d9){const _0x49cb26=_0x278c3b;if(dbLogs['has']('logs')[_0x49cb26(0x209)]()){const _0x4e8d35=dbLogs['get'](_0x49cb26(0x21a))['sortBy']('time')[_0x49cb26(0x17e)](_0x38a4a2=>{const _0x65d1b3=_0x49cb26;return _0x38a4a2['type']==_0x65d1b3(0x1dd);})['value']();dbLogs[_0x49cb26(0x200)](_0x49cb26(0x21a))[_0x49cb26(0x24c)]()[_0x49cb26(0x2b2)](),dbLogs[_0x49cb26(0x200)](_0x49cb26(0x21a))['assign'](_0x4e8d35)[_0x49cb26(0x2b2)](),emitHistory(_0x5e66d9);}}async function pauseBot(_0x3c1369=''){const _0x39b864=_0x278c3b,_0x1f926c=new Date()['getTime']();if(!lastErrorShown||_0x1f926c-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1f926c;!lastBotPause?(lastBotPause=_0x1f926c,consecutivePauses=0x1):(_0x1f926c-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x39b864(0x1ec)]({'stop':'restart'},_0x367e19=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x39b864(0x1a0)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3c1369)_0x3c1369+=_0x39b864(0x26b);logHistory(_0x39b864(0x191),_0x3c1369+_0x39b864(0x262)+pauseBotInterval/0xea60+_0x39b864(0x289)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x4d5f74=_0x278c3b;process[_0x4d5f74(0x1ec)]({'stop':'kill'},_0x4a3155=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4857f9,_0x7894cf){const _0x2af9d7=_0x278c3b;if(_0x4857f9[_0x2af9d7(0x1fe)]()['includes'](_0x2af9d7(0x21c)))return logHistory('error',config[_0x2af9d7(0x204)]+'\x20API\x20key\x20is\x20invalid'),![];else{if(_0x4857f9[_0x2af9d7(0x1fe)]()[_0x2af9d7(0x1a1)](_0x2af9d7(0x2a2)))return logHistory('error',config['exchange']+_0x2af9d7(0x1da)),![];else{if(_0x4857f9['toString']()[_0x2af9d7(0x1a1)](_0x2af9d7(0x1c2)))return logHistory(_0x2af9d7(0x191),config[_0x2af9d7(0x204)]+_0x2af9d7(0x2ad)+config[_0x2af9d7(0x204)]),![];else await handleError(_0x4857f9,_0x7894cf);}}}async function handleError(_0x2cb585,_0x23dfe4,_0x11b709=''){const _0x192ce3=_0x278c3b;if(_0x2cb585['toString']()[_0x192ce3(0x1a1)](_0x192ce3(0x1e3)))await pauseBot(config['exchange']+_0x192ce3(0x221));else{if(_0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x1b8)))await pauseBot(config['exchange']+_0x192ce3(0x1d7));else{if(_0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x19e)))await pauseBot(config[_0x192ce3(0x204)]+_0x192ce3(0x2bb));else{if(_0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x23e)))logHistory(_0x192ce3(0x191),_0x23dfe4+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x192ce3(0x24f)),await killBot();else{if(_0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x26a)))logHistory(_0x192ce3(0x191),_0x23dfe4+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x192ce3(0x191),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2cb585['toString']()[_0x192ce3(0x1a1)](_0x192ce3(0x21c)))logHistory(_0x192ce3(0x191),_0x23dfe4+_0x192ce3(0x26b)+config[_0x192ce3(0x204)]+_0x192ce3(0x194)),logHistory('error',_0x192ce3(0x24f)),await killBot();else{if(_0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x2a2)))logHistory('error',_0x23dfe4+_0x192ce3(0x26b)+config[_0x192ce3(0x204)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x192ce3(0x191),_0x192ce3(0x24f)),await killBot();else{if(_0x2cb585[_0x192ce3(0x1fe)]()['includes'](_0x192ce3(0x1c2)))logHistory(_0x192ce3(0x191),_0x23dfe4+_0x192ce3(0x26b)+config[_0x192ce3(0x204)]+_0x192ce3(0x222)+config[_0x192ce3(0x204)]),logHistory('error',_0x192ce3(0x24f)),await killBot();else _0x2cb585[_0x192ce3(0x1fe)]()[_0x192ce3(0x1a1)](_0x192ce3(0x23d))?logHistory(_0x192ce3(0x191),_0x23dfe4+_0x192ce3(0x297)+_0x11b709):(logger['full'](_0x23dfe4+'\x20|\x20Error\x20details:\x20',_0x2cb585),await pauseBot(_0x192ce3(0x23f)));}}}}}}}}function formatResult(_0x1c8f79,_0x13823f){const _0x7acffa=_0x278c3b;return parseFloat(_0x1c8f79[_0x7acffa(0x165)](_0x13823f));}function formatResultTruncate(_0x40381a,_0x38dc65){const _0x1075b2=_0x278c3b;let _0x1c5867=formatResultString(_0x40381a,0xa),_0x432cb9=_0x1c5867[_0x1075b2(0x29d)]('.');return _0x432cb9!=-0x1&&(_0x1c5867=_0x1c5867[_0x1075b2(0x291)](0x0,_0x432cb9+_0x38dc65+0x1)),Number(_0x1c5867);}function formatResultString(_0x17df1f,_0x2ef788){const _0x4f45ed=_0x278c3b;let _0x250f38;if(!(''+_0x17df1f)[_0x4f45ed(0x1a1)]('e'))_0x250f38=+(Math[_0x4f45ed(0x1f2)](_0x17df1f+'e+'+_0x2ef788)+'e-'+_0x2ef788);else{let _0x5c538d=(''+_0x17df1f)[_0x4f45ed(0x24b)]('e'),_0x482b26='';+_0x5c538d[0x1]+_0x2ef788>0x0&&(_0x482b26='+'),_0x250f38=+(Math[_0x4f45ed(0x1f2)](+_0x5c538d[0x0]+'e'+_0x482b26+(+_0x5c538d[0x1]+_0x2ef788))+'e-'+_0x2ef788);}return Number(_0x250f38)[_0x4f45ed(0x165)](_0x2ef788);}function getServerTime(){const _0x238afd=_0x278c3b,_0x1ec151=new Date();return _0x1ec151[_0x238afd(0x18d)]()+'/'+(_0x1ec151[_0x238afd(0x282)]()+0x1)[_0x238afd(0x1fe)]()[_0x238afd(0x1d3)](0x2,'0')+'/'+_0x1ec151[_0x238afd(0x1be)]()[_0x238afd(0x1fe)]()[_0x238afd(0x1d3)](0x2,'0')+'\x20'+_0x1ec151[_0x238afd(0x285)]()['toString']()[_0x238afd(0x1d3)](0x2,'0')+':'+_0x1ec151[_0x238afd(0x1a6)]()['toString']()[_0x238afd(0x1d3)](0x2,'0')+':'+_0x1ec151[_0x238afd(0x2b1)]()[_0x238afd(0x1fe)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1e9a50=_0x278c3b,_0x1af29c=shiftedTime();return _0x1af29c['getFullYear']()+'/'+(_0x1af29c[_0x1e9a50(0x282)]()+0x1)['toString']()[_0x1e9a50(0x1d3)](0x2,'0')+'/'+_0x1af29c[_0x1e9a50(0x1be)]()[_0x1e9a50(0x1fe)]()[_0x1e9a50(0x1d3)](0x2,'0')+'\x20'+_0x1af29c[_0x1e9a50(0x285)]()[_0x1e9a50(0x1fe)]()['padStart'](0x2,'0')+':'+_0x1af29c['getMinutes']()[_0x1e9a50(0x1fe)]()['padStart'](0x2,'0')+':'+_0x1af29c[_0x1e9a50(0x2b1)]()[_0x1e9a50(0x1fe)]()['padStart'](0x2,'0');}function getDate(){const _0x3d0b5d=_0x278c3b,_0x407d8c=shiftedTime();return _0x407d8c[_0x3d0b5d(0x18d)]()+'/'+(_0x407d8c[_0x3d0b5d(0x282)]()+0x1)[_0x3d0b5d(0x1fe)]()[_0x3d0b5d(0x1d3)](0x2,'0')+'/'+_0x407d8c[_0x3d0b5d(0x1be)]()[_0x3d0b5d(0x1fe)]()[_0x3d0b5d(0x1d3)](0x2,'0');}function getHour(){const _0x4aa165=_0x278c3b,_0x3dc661=shiftedTime();return _0x3dc661[_0x4aa165(0x285)]()[_0x4aa165(0x1fe)]()['padStart'](0x2,'0');}function sleep(_0x1ecd8a){return new Promise(_0x4b12c7=>setTimeout(_0x4b12c7,_0x1ecd8a));}function shiftedTime(){const _0x38d281=_0x278c3b,_0xc567be=new Date();let _0x39577f=_0xc567be;if(config&&config[_0x38d281(0x1f3)]!==0x0)_0x39577f=fns[_0x38d281(0x2b3)](_0xc567be,{'hours':config[_0x38d281(0x1f3)]});return _0x39577f;}function timer(_0x43bf80){const _0x153af7=_0x278c3b,_0x7f73be=new Date();!lasttime?console[_0x153af7(0x197)](_0x153af7(0x157),_0x43bf80,_0x7f73be):console[_0x153af7(0x197)](_0x153af7(0x157),_0x43bf80,(_0x7f73be-lasttime)/0x3e8),lasttime=_0x7f73be;}