const _0x2734d1=_0x3f20;(function(_0x164622,_0x14ad73){const _0x34d3ca=_0x3f20,_0x9811dd=_0x164622();while(!![]){try{const _0xbc8d50=-parseInt(_0x34d3ca(0x136))/0x1*(parseInt(_0x34d3ca(0x11b))/0x2)+-parseInt(_0x34d3ca(0x22d))/0x3+-parseInt(_0x34d3ca(0xb1))/0x4+-parseInt(_0x34d3ca(0x246))/0x5*(-parseInt(_0x34d3ca(0xf9))/0x6)+-parseInt(_0x34d3ca(0x183))/0x7+parseInt(_0x34d3ca(0x222))/0x8*(parseInt(_0x34d3ca(0x116))/0x9)+parseInt(_0x34d3ca(0x19f))/0xa;if(_0xbc8d50===_0x14ad73)break;else _0x9811dd['push'](_0x9811dd['shift']());}catch(_0x3b6f33){_0x9811dd['push'](_0x9811dd['shift']());}}}(_0x1f5f,0x48f13));const _0x3f4648=function(){let _0x3253d0=!![];return function(_0x2d7f0c,_0x43845e){const _0x489cbb=_0x3253d0?function(){const _0x3743d6=_0x3f20;if(_0x43845e){const _0x137295=_0x43845e[_0x3743d6(0x18c)](_0x2d7f0c,arguments);return _0x43845e=null,_0x137295;}}:function(){};return _0x3253d0=![],_0x489cbb;};}(),_0x3f9440=_0x3f4648(this,function(){const _0x327a70=_0x3f20;return _0x3f9440[_0x327a70(0x10f)]()[_0x327a70(0x20a)]('(((.+)+)+)+$')['toString']()[_0x327a70(0x1b8)](_0x3f9440)['search'](_0x327a70(0x122));});_0x3f9440();'use strict';const ccxt=require(_0x2734d1(0x1a5)),low=require(_0x2734d1(0x153)),FileSync=require(_0x2734d1(0xdb)),fs=require('fs'),fns=require(_0x2734d1(0x156)),forge=require(_0x2734d1(0x1c1)),util=require('util'),argv=require(_0x2734d1(0xd2))(process[_0x2734d1(0x245)][_0x2734d1(0x131)](0x2))[_0x2734d1(0x245)],path=require(_0x2734d1(0x1db)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x2734d1(0xe1),_0x2734d1(0x1da),_0x2734d1(0x17e),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2734d1(0x225)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2734d1(0x13b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2734d1(0x216)+pauseBotInterval/0xea60+_0x2734d1(0x1f8),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x2734d1(0x12f)],environment=require(_0x2734d1(0x235))['environment']||'production',botID=process['argv'][0x2]||_0x2734d1(0x1c9),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x2734d1(0xa1)](_0x2734d1(0xc1)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x2734d1(0x16c)+userID+'/':_0x2734d1(0x16c),logspath=userID?_0x2734d1(0x9a)+userID+'/':'./logs/',loggerfile=fs[_0x2734d1(0xc9)](logspath+_0x2734d1(0x154),{'flags':'a'});function _0x3f20(_0x235541,_0x5ecf20){const _0x5497fe=_0x1f5f();return _0x3f20=function(_0x3f9440,_0x3f4648){_0x3f9440=_0x3f9440-0x90;let _0x1f5f50=_0x5497fe[_0x3f9440];return _0x1f5f50;},_0x3f20(_0x235541,_0x5ecf20);}!fs[_0x2734d1(0x1f5)](configpath)&&fs[_0x2734d1(0x1ee)](configpath);!fs[_0x2734d1(0x1f5)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x2734d1(0x15e),logfile=configpath+_0x2734d1(0xfb)+botID+_0x2734d1(0x9b),performancefile=configpath+'bot-'+botID+_0x2734d1(0xb4),coinresultsfile=configpath+_0x2734d1(0xfb)+botID+_0x2734d1(0xbd),settingsfile=configpath+_0x2734d1(0x16e),securefile=configpath+_0x2734d1(0x14a),configbackuppath=configpath+_0x2734d1(0x250),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2734d1(0x22a)]({'logs':[],'version':serverversion})[_0x2734d1(0x22b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2734d1(0x22a)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2734d1(0x22a)]({'bot':[],'version':serverversion})[_0x2734d1(0x22b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2734d1(0x22a)]({'coins':[],'version':serverversion})[_0x2734d1(0x22b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x52cf8c=>{const _0x2e85de=_0x2734d1;console[_0x2e85de(0xa1)](_0x52cf8c);},'simple':_0x4160fd=>{const _0xff9fd7=_0x2734d1;console['log'](_0x4160fd),loggerfile[_0xff9fd7(0x22b)](util[_0xff9fd7(0x21f)](_0x4160fd)+'\x0a');},'full':async(_0x5035b6,_0xc10a8a='')=>{const _0xcb0f91=_0x2734d1;let _0x146edc;if(config[_0xcb0f91(0x1cb)])_0x146edc=getTimeStamp()+':\x20'+config[_0xcb0f91(0x107)]+'\x20>\x20'+_0x5035b6;else _0x146edc=getTimeStamp()+':\x20Bot\x20'+botID+_0xcb0f91(0x167)+_0x5035b6;console[_0xcb0f91(0xa1)](_0x146edc),loggerfile[_0xcb0f91(0x22b)](util['format'](_0x146edc)+'\x0a'),_0xc10a8a&&(console['log'](_0xc10a8a),loggerfile['write'](util[_0xcb0f91(0x21f)](_0xc10a8a)+'\x0a'));},'debug':async(_0x6f934d,_0x58521a='')=>{const _0x58398b=_0x2734d1;let _0x8708c;if(config[_0x58398b(0x1cb)])_0x8708c=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x6f934d;else _0x8708c=getTimeStamp()+':\x20Bot\x20'+botID+_0x58398b(0x123)+_0x6f934d;if(debugging)console['log'](_0x8708c);loggerfile[_0x58398b(0x22b)](util[_0x58398b(0x21f)](_0x8708c)+'\x0a');if(_0x58521a){if(debugging)console[_0x58398b(0xa1)](_0x58521a);loggerfile['write'](util[_0x58398b(0x21f)](_0x58521a)+'\x0a');}}};process['on'](_0x2734d1(0xf8),function(_0xb29235){const _0x4d0279=_0x2734d1;handleError(_0xb29235,_0x4d0279(0xf8));});settings[_0x2734d1(0x14e)]!=config[_0x2734d1(0x14e)]&&updateTimeshift(settings[_0x2734d1(0x14e)]);settings['onepagemode']!=config[_0x2734d1(0x17a)]&&updateOnepagemode(settings[_0x2734d1(0x17a)]);(settings[_0x2734d1(0x110)]&&!config[_0x2734d1(0x110)]||!settings[_0x2734d1(0x110)]&&config[_0x2734d1(0x110)])&&updateMarketcapApi(settings[_0x2734d1(0x110)]);process[_0x2734d1(0x226)]({'started':'running'},_0x4db6fc=>{}),initializeProcessListeners();function proxyEmit(_0x4ba5dc,_0x30d7ed=null){const _0x1e00a7=_0x2734d1;process[_0x1e00a7(0x226)]({'function':_0x4ba5dc,'args':_0x30d7ed},_0x2476ad=>{});}function initializeProcessListeners(){const _0xe6365=_0x2734d1;process['on'](_0xe6365(0x159),_0x46ed86=>{const _0x55989c=_0xe6365;switch(Object[_0x55989c(0x10d)](_0x46ed86)[0x0]){case'timeshift':_0x46ed86[_0x55989c(0x14e)]!=undefined&&(settings[_0x55989c(0x14e)]=_0x46ed86[_0x55989c(0x14e)],updateTimeshift(settings['timeshift']));break;case _0x55989c(0x17a):_0x46ed86[_0x55989c(0x17a)]!=undefined&&(settings[_0x55989c(0x17a)]=_0x46ed86[_0x55989c(0x17a)],updateOnepagemode(settings['onepagemode']));break;case'marketcapApi':_0x46ed86[_0x55989c(0x110)]!=undefined&&(settings[_0x55989c(0x110)]=_0x46ed86['marketcapApi'],updateMarketcapApi(settings['marketcapApi']));break;case _0x55989c(0x95):_0x46ed86[_0x55989c(0x95)]!=undefined&&(bots=JSON[_0x55989c(0x137)](_0x46ed86[_0x55989c(0x95)]),proxyEmit('bots',bots));break;case _0x55989c(0x247):switch(_0x46ed86[_0x55989c(0x247)]){case _0x55989c(0xac):initclient();break;case _0x55989c(0x1fe):toggleBotMode();break;case _0x55989c(0xd1):emitHistory(_0x46ed86[_0x55989c(0x1e3)]);break;case _0x55989c(0x206):deleteHistoryAlerts(_0x46ed86[_0x55989c(0x1e3)]);break;case _0x55989c(0x10a):getPortfolio(_0x46ed86[_0x55989c(0x1e3)]);break;case'storeConfiguration':storeConfiguration(_0x46ed86[_0x55989c(0x1e3)]);break;case _0x55989c(0x25b):storeHeadless(_0x46ed86[_0x55989c(0x1e3)]);break;case _0x55989c(0x139):storeFiat(_0x46ed86[_0x55989c(0x1e3)]);break;case _0x55989c(0x1cd):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x55989c(0x1b2):placeOrder(_0x46ed86['args']);break;case _0x55989c(0x240):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x55989c(0x21a):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x265b10=![]){const _0x3d04d6=_0x2734d1;logger[_0x3d04d6(0x138)](_0x3d04d6(0xbc)+(_0x265b10?'exchange\x20reload':_0x3d04d6(0x143))+_0x3d04d6(0xc6)+config[_0x3d04d6(0x111)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x265b10)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3d04d6(0x112)]!=''&&config['apiKey']!='***'){loadingProgress=0x0;_0x265b10&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x56a905=await getCoins();[currentCoins,currentCoinsAll]=_0x56a905,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3d04d6(0x138)](_0x3d04d6(0x1df)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3d04d6(0x181)]==0x0&&allOpenOrders[_0x3d04d6(0x181)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3e27f4=![]){const _0x1ff885=_0x2734d1;logger[_0x1ff885(0x138)](_0x1ff885(0x174)+(_0x3e27f4?'quick':_0x1ff885(0x223))+')\x20|\x20exchange:\x20'+config[_0x1ff885(0x111)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3e27f4){getBalances();return;}coinsLoaded=![];if(config[_0x1ff885(0x112)]!=''&&config[_0x1ff885(0x112)]!=_0x1ff885(0x1a6)){loadingProgress=0x1;const _0x45925a=await getCoins();[currentCoins,currentCoinsAll]=_0x45925a,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x32b403){const _0x5c5d9a=_0x2734d1;let _0x5150ef=![];if(_0x32b403)_0x5150ef=!![];let _0x301896;_0x5150ef?_0x301896=_0x32b403['map'](_0x312d14=>_0x312d14[_0x5c5d9a(0xb3)]):_0x301896=currentCoinsAll[_0x5c5d9a(0x186)](_0xb9454a=>_0xb9454a['coin']);if(!config[_0x5c5d9a(0x110)]||!_0x5150ef&&!config[_0x5c5d9a(0x141)]||_0x301896[_0x5c5d9a(0x181)]==0x0)return;let _0x303c27=null;try{_0x303c27=await axios[_0x5c5d9a(0x16b)](_0x5c5d9a(0x98),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5c5d9a(0x110)]},'params':{'symbol':_0x301896[_0x5c5d9a(0x10f)]()}});}catch(_0x5514ad){_0x303c27=null,_0x5514ad[_0x5c5d9a(0x10f)]()[_0x5c5d9a(0x104)](_0x5c5d9a(0x236))?(config[_0x5c5d9a(0x110)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x5c5d9a(0x214),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory('error',_0x5c5d9a(0x1f0)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger['debug'](_0x5c5d9a(0x208),_0x5514ad[_0x5c5d9a(0x10f)]()+'\x20-\x20'+_0x5514ad[_0x5c5d9a(0xe6)]));}if(_0x303c27){let _0x582553=0x0;const _0x556bd9=_0x303c27['data'];_0x301896[_0x5c5d9a(0x1b0)](_0x480b41=>{const _0xe782de=_0x5c5d9a;if(_0x556bd9[_0xe782de(0x1e6)][_0x480b41][0x0])_0x582553+=_0x556bd9['data'][_0x480b41][0x0]['quote'][_0xe782de(0x212)][_0xe782de(0x1c4)];}),_0x301896[_0x5c5d9a(0x1b0)](_0x31f08a=>{const _0x8e48=_0x5c5d9a,_0x2fa0da=_0x556bd9[_0x8e48(0x1e6)][_0x31f08a][0x0]?_0x556bd9[_0x8e48(0x1e6)][_0x31f08a][0x0][_0x8e48(0x1f6)][_0x8e48(0x212)][_0x8e48(0x1c4)]:0x0;if(_0x5150ef){const _0xb489be=_0x32b403['find'](_0x259b3b=>_0x259b3b[_0x8e48(0xb3)]==_0x31f08a);_0xb489be&&(_0xb489be[_0x8e48(0x17b)]=_0x2fa0da);}else{const _0xc74868=currentCoins[_0x8e48(0x23d)](_0x3c5b66=>_0x3c5b66[_0x8e48(0xb3)]==_0x31f08a);_0xc74868&&(_0xc74868[_0x8e48(0x17b)]=_0x2fa0da);const _0x4092e8=currentCoinsAll[_0x8e48(0x23d)](_0x2ffbf5=>_0x2ffbf5[_0x8e48(0xb3)]==_0x31f08a);_0x4092e8&&(_0x4092e8[_0x8e48(0x17b)]=_0x2fa0da);}}),!_0x5150ef&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x42fd19=_0x2734d1,_0x1b4892=0x2;let _0x3915b8=0x0,_0x482030=0x0,_0x2d5719=0x0,_0x5decaf=0x0,_0x4fb614=0x0;config['portfolio'][_0x42fd19(0x1b0)](_0x3346a4=>{const _0x32a990=_0x42fd19;if(!_0x3346a4[_0x32a990(0x1ba)]){_0x2d5719++,_0x3915b8+=_0x3346a4['slider'];if(_0x3346a4[_0x32a990(0x10e)]===-0x1){_0x3915b8++;const _0x35a4fc=currentCoinsAll['find'](_0x25763c=>_0x25763c[_0x32a990(0xb3)]==_0x3346a4['coin']);_0x35a4fc&&(_0x5decaf+=_0x35a4fc[_0x32a990(0x17b)],_0x4fb614+=Math['sqrt'](_0x35a4fc[_0x32a990(0x17b)]));}if(_0x3346a4['slider']!==-0x1)_0x482030++;}});let _0x32484d;const _0x306298=0x64-_0x3915b8,_0xed6f5d=_0x2d5719-_0x482030;_0x32484d=_0xed6f5d===0x0?_0x3915b8:Math[_0x42fd19(0x152)](0x64,_0x3915b8),config['portfolio']['forEach'](_0x17f889=>{const _0x4519ac=_0x42fd19,_0xf0a64d=currentCoinsAll[_0x4519ac(0x23d)](_0x359515=>_0x359515[_0x4519ac(0xb3)]==_0x17f889[_0x4519ac(0xb3)]);_0xf0a64d&&(_0x17f889['marketcap']=_0xf0a64d[_0x4519ac(0x17b)]);if(!_0x17f889[_0x4519ac(0x1ba)]){if(_0x32484d<=0x64){if(_0x17f889[_0x4519ac(0x10e)]===-0x1){if(_0x5decaf!==0x0&&config[_0x4519ac(0x141)]){if(_0xf0a64d){if(config[_0x4519ac(0x141)]=='marketcap')_0x17f889['distribution']=(_0x306298/(_0x5decaf/_0xf0a64d[_0x4519ac(0x17b)]))[_0x4519ac(0x198)](_0x1b4892);else config[_0x4519ac(0x141)]=='marketcapsqrt'&&(_0x17f889['distribution']=(_0x306298/(_0x4fb614/Math[_0x4519ac(0x1d3)](_0xf0a64d[_0x4519ac(0x17b)])))[_0x4519ac(0x198)](_0x1b4892));}}}}}}),updateConfig();}function updateConfig(){const _0x39d363=_0x2734d1;let _0x2b4cc1=dbConfig[_0x39d363(0x16b)](_0x39d363(0x23b))['find']({'botID':botID})['value']();_0x2b4cc1&&dbConfig[_0x39d363(0x16b)](_0x39d363(0x23b))[_0x39d363(0x23d)]({'botID':botID})['assign'](config)[_0x39d363(0x22b)]();}function logMemory(){const _0x4107b6=_0x2734d1;if(environment!=_0x4107b6(0x18b))return;const _0x48c111=process[_0x4107b6(0x257)]()[_0x4107b6(0x1ef)]/0x400/0x400;logger[_0x4107b6(0x138)]('process\x20'+process['pid']+_0x4107b6(0x179)+formatResult(_0x48c111,0x1)+'\x20MB');}async function startScheduler(){const _0x5c88bc=_0x2734d1,_0xf8f93e=shiftedTime()[_0x5c88bc(0x243)]();getMarketCap(),_0xf8f93e==0x1&&logMemory(),(_0xf8f93e==0x2||_0xf8f93e==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xf0b6ac=![]){const _0x51b1c6=_0x2734d1;logger[_0x51b1c6(0x138)](_0x51b1c6(0x256));if(!_0xf0b6ac)while(lockOrders!=ORDERS[_0x51b1c6(0x13b)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x51b1c6(0x12e)},_0x4191be=>{});}async function initExchange(_0x4105e6=config['exchange'],_0x3194b0=config[_0x2734d1(0x112)],_0x450e18=config['apiSecret'],_0x29cd46=config[_0x2734d1(0xc7)]){const _0x436a6d=_0x2734d1;if(exchange){logger[_0x436a6d(0x138)](_0x436a6d(0x24f));return;}logger[_0x436a6d(0x138)](_0x436a6d(0x187));!supportedExchanges()[_0x436a6d(0x104)](_0x4105e6)&&(logHistory(_0x436a6d(0x214),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x4105e6+'\x20exchange'),killBot());const _0x2c8b24=ccxt[_0x436a6d(0x185)][_0x4105e6[_0x436a6d(0x1fc)]()];exchange=new _0x2c8b24({'apiKey':_0x3194b0,'secret':_0x450e18,'options':{'defaultType':_0x436a6d(0xf7)}});if(_0x29cd46)exchange[_0x436a6d(0x1f7)]=_0x29cd46;}function updateExchange(_0x195824,_0x326b83,_0x353315=null){const _0x3a4f8a=_0x2734d1;exchange['apiKey']=_0x195824,exchange[_0x3a4f8a(0x1ac)]=_0x326b83,exchange[_0x3a4f8a(0xc7)]=_0x353315,logger[_0x3a4f8a(0x138)](_0x3a4f8a(0x23a));}function setStableCoins(){const _0x2616a2=_0x2734d1;let _0x49a3c7=config[_0x2616a2(0x12a)]==_0x2616a2(0xff)?'ETH':config['basecoin']=='PAXG'?_0x2616a2(0xcd):'BTC',_0xeb4058=allSymbols['includes'](_0x49a3c7+_0x2616a2(0x108))?_0x2616a2(0x212):allSymbols['includes'](_0x49a3c7+'/USDT')?_0x2616a2(0x1da):_0x2616a2(0x94),_0x512495=allSymbols[_0x2616a2(0x104)](_0x49a3c7+_0x2616a2(0xdd))?_0x2616a2(0x94):_0xeb4058;enableFiatToggle=!![],_0xeb4058=='EUR'&&(enableFiatToggle=![],storeFiat('EUR')),_0x512495!=_0x2616a2(0x94)&&(enableFiatToggle=![],storeFiat(_0x2616a2(0x212))),stablecoins={'eur':{'coin':''+_0x49a3c7+_0x512495,'symbol':_0x49a3c7+'/'+_0x512495},'usd':{'coin':''+_0x49a3c7+_0xeb4058,'symbol':_0x49a3c7+'/'+_0xeb4058}};}async function initwsCcxt(){const _0x2904ce=_0x2734d1;initCycle++;const _0x5ec41e=initCycle;let _0x6bf94b=[];config[_0x2904ce(0xae)]['forEach'](_0xb5a79f=>{const _0x1c841a=_0x2904ce;if(!_0xb5a79f[_0x1c841a(0x1ba)]&&_0xb5a79f[_0x1c841a(0xb3)]!=config['basecoin'])_0x6bf94b[_0x1c841a(0x1be)](_0xb5a79f[_0x1c841a(0xd6)]);});if(!_0x6bf94b[_0x2904ce(0x104)](stablecoins[_0x2904ce(0x148)]['symbol']))_0x6bf94b['push'](stablecoins[_0x2904ce(0x148)][_0x2904ce(0xd6)]);if(!_0x6bf94b['includes'](stablecoins['usd'][_0x2904ce(0xd6)]))_0x6bf94b[_0x2904ce(0x1be)](stablecoins[_0x2904ce(0x213)][_0x2904ce(0xd6)]);if(config['exchange'][_0x2904ce(0x1e1)](_0x2904ce(0x1e5))&&config['basecoin']!=_0x2904ce(0xcd)){if(!_0x6bf94b[_0x2904ce(0x104)](_0x2904ce(0xc4)+config['basecoin']))_0x6bf94b[_0x2904ce(0x1be)](_0x2904ce(0xc4)+config[_0x2904ce(0x12a)]);}loadCoins(_0x6bf94b),_0x6bf94b=validateSymbols(_0x6bf94b);const _0x40077d=async _0x4ce12a=>{const _0x242a29=_0x2904ce;let _0x39b6e3;try{const _0x2286b3=await getTickers(_0x4ce12a);Object[_0x242a29(0x1c5)](_0x2286b3)['forEach'](_0x19f421=>{const _0x227467=_0x242a29;_0x39b6e3=_0x19f421[0x1][_0x227467(0xd6)],gTicker[noslash(_0x39b6e3)]=_0x19f421[0x1][_0x227467(0x14f)],gChange[_0x39b6e3]=_0x19f421[0x1][_0x227467(0x17d)];});}catch(_0x68c59b){await handleError(_0x68c59b,_0x242a29(0x1f3),_0x39b6e3);}},_0x1beaf2=async _0x16ab85=>{const _0x491955=_0x2904ce;while(initCycle==_0x5ec41e){if(!botPaused)try{const _0x262ad5=await exchange[_0x491955(0x1f2)](_0x16ab85);gTicker[noslash(_0x262ad5[0x0][_0x491955(0xd6)])]=_0x262ad5[0x0][_0x491955(0x24d)];}catch(_0x18751b){if(!exchangeStopped)await handleError(_0x18751b,_0x491955(0x11a),_0x16ab85);}else await sleep(0x64);}},_0x3229a9=async _0x760f9e=>{const _0x50ee61=_0x2904ce;while(initCycle==_0x5ec41e){if(!botPaused)try{const _0x44c51c=await exchange['watchTradesForSymbols'](_0x760f9e),_0x20eff1=_0x44c51c[_0x50ee61(0x149)]();gTicker[noslash(_0x20eff1['symbol'])]=_0x20eff1[_0x50ee61(0x24d)];}catch(_0x2fbb4e){if(!exchangeStopped)await handleError(_0x2fbb4e,'watchTradesForSymbols()',_0x760f9e[_0x50ee61(0x10f)]());}else await sleep(0x64);}},_0x3e9769=async _0x5b3388=>{const _0x2634bf=_0x2904ce;while(initCycle==_0x5ec41e){if(!botPaused){let _0x41d206;try{await sleep(0x3c*0x3e8);const _0x11362b=await getTickers(_0x5b3388);Object[_0x2634bf(0x1c5)](_0x11362b)[_0x2634bf(0x1b0)](_0x53b233=>{const _0x47b5ee=_0x2634bf;_0x41d206=_0x53b233[0x1][_0x47b5ee(0xd6)],gChange[_0x41d206]=_0x53b233[0x1][_0x47b5ee(0x17d)];});}catch(_0x26fc92){if(!exchangeStopped)await handleError(_0x26fc92,'fetchTickers()',_0x41d206);}}else await sleep(0x64);}},_0x2f9d5f=async _0x1080c4=>{const _0xe9c124=_0x2904ce;while(initCycle==_0x5ec41e){if(!botPaused)try{const _0x2d9baa=await exchange[_0xe9c124(0x207)](_0x1080c4);initCycle==_0x5ec41e&&_0x2d9baa[_0xe9c124(0x1b0)](_0x210035=>{updateNumberCoinsCcxt(_0x210035);});}catch(_0xbf9f35){if(!exchangeStopped)await handleError(_0xbf9f35,_0xe9c124(0x100));}else await sleep(0x64);}};_0x40077d(_0x6bf94b),_0x3e9769(_0x6bf94b),exchange['has'][_0x2904ce(0x128)]&&!(config['exchange']==_0x2904ce(0x101)&&_0x6bf94b[_0x2904ce(0x181)]>0xa)?_0x3229a9(_0x6bf94b):_0x6bf94b[_0x2904ce(0x1b0)](_0x32802b=>{_0x1beaf2(_0x32802b);}),_0x6bf94b[_0x2904ce(0x1b0)](_0x2136a8=>{_0x2f9d5f(_0x2136a8);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x416364){const _0x46fe8a=_0x2734d1;let _0x31ccd3={};try{if(config['exchange']!='Cryptocom')_0x31ccd3=await exchange[_0x46fe8a(0xd5)](_0x416364);else for(const _0x9b299b of _0x416364){const _0x28c6d8=await exchange[_0x46fe8a(0xed)](_0x9b299b);_0x31ccd3[_0x9b299b]=_0x28c6d8;}return _0x31ccd3;}catch(_0x3b9f5c){throw _0x3b9f5c;}}function setBlockTransactionDetection(_0x566b31){const _0x18fe2a=_0x2734d1;blockTransactionDetection=_0x566b31,logger[_0x18fe2a(0x138)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x378b70=0x0){const _0x353ac9=_0x2734d1;transactionDetectionOngoing=!![];try{const _0x1bfd91=await getCoins(_0x378b70),[_0x519414,_0x5ae63d]=_0x1bfd91;let _0xbf6655=[];currentCoins[_0x353ac9(0x1b0)](_0x1b8255=>{const _0x142b84=_0x353ac9,_0x521e44=_0x519414['find'](_0x4eab8e=>_0x4eab8e[_0x142b84(0xb3)]==_0x1b8255['coin']);if(_0x521e44){if(_0x1b8255[_0x142b84(0x23c)]!=_0x521e44[_0x142b84(0x23c)]){let _0x5c19db;if(_0x1b8255[_0x142b84(0xb3)]!=config[_0x142b84(0x12a)]){const _0x2c1278=gTicker[noslash(_0x1b8255[_0x142b84(0xd6)])];_0x5c19db=_0x1b8255['reverse']?0x1/_0x2c1278:_0x2c1278;}else _0x5c19db=0x1;_0xbf6655[_0x142b84(0x1be)]({'coin':_0x1b8255[_0x142b84(0xb3)],'symbol':_0x1b8255[_0x142b84(0xd6)],'price':_0x5c19db,'number':Number(formatResult(_0x521e44[_0x142b84(0x23c)]-_0x1b8255[_0x142b84(0x23c)],0x8)),'basecoinvalue':_0x5c19db*(_0x521e44[_0x142b84(0x23c)]-_0x1b8255[_0x142b84(0x23c)])});}}});if(_0xbf6655[_0x353ac9(0x181)]>0x0&&!blockTransactionDetection){for(const _0x345082 of _0xbf6655){if(config[_0x353ac9(0x1c6)]){logger[_0x353ac9(0x138)](_0x353ac9(0x193)+_0x345082[_0x353ac9(0x1af)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x353ac9(0x1ad)]);if(lastFees[_0x353ac9(0x1ad)]==0x0||Math[_0x353ac9(0xce)](_0x345082[_0x353ac9(0x1af)])>lastFees[_0x353ac9(0x1ad)]*0x3){if(config[_0x353ac9(0x1c6)]=='update-liquidity'){delete _0x345082[_0x353ac9(0xd6)],delete _0x345082[_0x353ac9(0x1af)];let _0x166c67=[],_0xb826a6=[...config[_0x353ac9(0xb8)]]||[],_0x4f8d9d=config[_0x353ac9(0xb8)];_0xb826a6[_0x353ac9(0x92)]((_0x4d3af7,_0x196127)=>_0x4d3af7[_0x353ac9(0xa4)]>_0x196127[_0x353ac9(0xa4)]?-0x1:_0x196127['date']>_0x4d3af7['date']?0x1:0x0);const _0x26b02e=getDate();if(_0xb826a6[0x0]){const _0x293edd=fns['parse'](_0xb826a6[0x0][_0x353ac9(0xa4)],_0x353ac9(0xd0),new Date()),_0x540521=fns[_0x353ac9(0x137)](_0x26b02e,_0x353ac9(0xd0),new Date());if(fns[_0x353ac9(0x17c)](_0x293edd,_0x540521)){_0x166c67=_0xb826a6[0x0][_0x353ac9(0x190)];const _0x5845c4=_0x166c67[_0x353ac9(0x23d)](_0x1d146a=>_0x1d146a[_0x353ac9(0xb3)]==_0x345082[_0x353ac9(0xb3)]);_0x5845c4?(_0x5845c4[_0x353ac9(0x23c)]+=_0x345082[_0x353ac9(0x23c)],_0x5845c4[_0x353ac9(0x23c)]==0x0&&(_0x166c67=_0x166c67['filter'](_0x143d7c=>{const _0x5ac3c7=_0x353ac9;return _0x143d7c[_0x5ac3c7(0xb3)]!=_0x345082['coin'];}))):_0x166c67[_0x353ac9(0x1be)](_0x345082);const _0x83bce6=_0x4f8d9d[_0x353ac9(0x23d)](_0x5af09f=>_0x5af09f[_0x353ac9(0xa4)]==_0x26b02e);_0x83bce6['changes']=_0x166c67;}else _0x4f8d9d[_0x353ac9(0x1be)]({'date':_0x26b02e,'changes':[_0x345082]});}const _0x20825f=_0x4f8d9d[_0x353ac9(0x23d)](_0x265952=>_0x265952[_0x353ac9(0xa4)]==_0x26b02e);if(_0x20825f){let _0x273719=!![];_0x20825f[_0x353ac9(0x190)][_0x353ac9(0x1b0)](_0x2a15b1=>{const _0x1cf9a5=_0x353ac9;if(_0x2a15b1[_0x1cf9a5(0x23c)]!=0x0)_0x273719=![];}),_0x273719&&(_0x4f8d9d=_0x4f8d9d['filter'](_0x142b0d=>{const _0x35b19a=_0x353ac9;return _0x142b0d[_0x35b19a(0xa4)]!=_0x26b02e;}));}let _0x513093=dbConfig['get']('bot')[_0x353ac9(0x23d)]({'botID':botID})['value']();_0x513093&&(dbConfig[_0x353ac9(0x16b)]('bot')[_0x353ac9(0x23d)]({'botID':botID})['assign']({'liquidity':_0x4f8d9d})[_0x353ac9(0x22b)](),config[_0x353ac9(0xb8)]=_0x4f8d9d);logHistory(_0x353ac9(0xf6),_0x353ac9(0x1f1)+Math[_0x353ac9(0xce)](_0x345082[_0x353ac9(0x23c)])+'\x20'+_0x345082[_0x353ac9(0xb3)]+'\x20'+(_0x345082[_0x353ac9(0x23c)]>0x0?'added':_0x353ac9(0x24b))+_0x353ac9(0xf3)),proxyEmit(_0x353ac9(0x1b3),emittedConfiguration());const _0x15ad0e=getNormalizedPerformance();emitPerformance(_0x15ad0e),getStartingBalances(_0x15ad0e),logger['debug']('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x353ac9(0x1c6)]==_0x353ac9(0xfc)&&(config[_0x353ac9(0x130)]?(await storeHeadless({'headless':![]}),logHistory(_0x353ac9(0xf6),_0x353ac9(0x1f1)+Math['abs'](_0x345082[_0x353ac9(0x23c)])+'\x20'+_0x345082[_0x353ac9(0xb3)]+'\x20'+(_0x345082[_0x353ac9(0x23c)]>0x0?_0x353ac9(0xd8):_0x353ac9(0x24b))+_0x353ac9(0x237))):logger['debug'](_0x353ac9(0x1f1)+Math['abs'](_0x345082[_0x353ac9(0x23c)])+'\x20'+_0x345082[_0x353ac9(0xb3)]+'\x20'+(_0x345082[_0x353ac9(0x23c)]>0x0?_0x353ac9(0xd8):_0x353ac9(0x24b))+_0x353ac9(0xcb)));}else logger['debug'](_0x353ac9(0x11e)+Math[_0x353ac9(0xce)](_0x345082[_0x353ac9(0x23c)])+'\x20'+_0x345082['coin']+'\x20'+(_0x345082['number']>0x0?_0x353ac9(0xd8):_0x353ac9(0x24b)));}else logger[_0x353ac9(0x138)](_0x353ac9(0x1f1)+Math[_0x353ac9(0xce)](_0x345082[_0x353ac9(0x23c)])+'\x20'+_0x345082[_0x353ac9(0xb3)]+'\x20'+(_0x345082[_0x353ac9(0x23c)]>0x0?_0x353ac9(0xd8):_0x353ac9(0x24b))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x519414,currentCoinsAll=_0x5ae63d;}}catch(_0x3c6507){if(!exchangeStopped)await handleError(_0x3c6507,_0x353ac9(0x145));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x49b8a0=_0x2734d1;logger[_0x49b8a0(0x138)](_0x49b8a0(0x220));try{markets=await exchange[_0x49b8a0(0x13c)]();}catch(_0x21be89){markets?logger[_0x49b8a0(0x138)]('Error\x20in\x20loadSymbols():\x20'+_0x21be89[_0x49b8a0(0x10f)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x21be89['toString']()[_0x49b8a0(0x1fc)]()[_0x49b8a0(0x104)]('timestamp')||_0x21be89['toString']()[_0x49b8a0(0x1fc)]()[_0x49b8a0(0x104)](_0x49b8a0(0x17f))?logHistory(_0x49b8a0(0x214),_0x49b8a0(0x20e)):handleErrorNoStop(_0x21be89,'loadSymbols()'),logHistory(_0x49b8a0(0x214),_0x49b8a0(0x93)),logHistory(_0x49b8a0(0x214),_0x49b8a0(0xd9)+loadCoinsRetryInterval/0xea60+_0x49b8a0(0xee)),logger[_0x49b8a0(0x138)](_0x49b8a0(0x208),_0x21be89),await sleep(loadCoinsRetryInterval),restartBot());}allSymbols=[],Object['entries'](markets)[_0x49b8a0(0x1b0)](_0x38c9f2=>{const _0x3082c2=_0x49b8a0;_0x38c9f2[0x1][_0x3082c2(0x1d7)]&&_0x38c9f2[0x1]['spot']&&allSymbols[_0x3082c2(0x1be)](_0x38c9f2[0x0]);});}function validateSymbols(_0x2d02bc){let _0x185993=[];return _0x2d02bc['forEach'](_0x14d592=>{const _0x34529b=_0x3f20;!allSymbols[_0x34529b(0x104)](_0x14d592)?logHistory(_0x34529b(0x214),_0x34529b(0x1a1)+_0x14d592+_0x34529b(0xad)):_0x185993[_0x34529b(0x1be)](_0x14d592);}),_0x185993;}async function initclient(){const _0x35a118=_0x2734d1;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x35a118(0x1c0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x36ba4a=getNormalizedPerformance();emitPerformance(_0x36ba4a),getStartingBalances(_0x36ba4a);}async function toggleBotMode(){const _0x53f126=_0x2734d1;let _0x53cac7=dbConfig['get'](_0x53f126(0x23b))[_0x53f126(0x23d)]({'botID':botID})[_0x53f126(0x151)]();if(_0x53cac7){const _0x1a5d6b=!_0x53cac7[_0x53f126(0x130)];dbConfig[_0x53f126(0x16b)](_0x53f126(0x23b))['find']({'botID':botID})[_0x53f126(0x115)]({'headless':_0x1a5d6b})[_0x53f126(0x22b)](),config[_0x53f126(0x130)]=_0x1a5d6b,proxyEmit(_0x53f126(0x1b3),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x534c62=_0x2734d1;process[_0x534c62(0x226)]({'updatebotmanager':!![]},_0x4113f1=>{}),logger[_0x534c62(0x138)]('Headless:\x20'+config[_0x534c62(0x130)]);}async function loadCoins(_0x17e002){const _0x112ff1=_0x2734d1;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x21ad09,_0x3ae041=0x0,_0x44996c=0x0;_0x17e002[_0x112ff1(0x1b0)](_0x2e29f1=>{const _0x4a79a7=_0x112ff1;loading['remainingSymbols'][_0x4a79a7(0x1be)](_0x2e29f1);}),loadingCanceled=![];let _0xe9c33e=![];while(_0x21ad09!=_0x17e002[_0x112ff1(0x181)]+maxLoadingProgress){_0x21ad09=loadingProgress,_0x17e002[_0x112ff1(0x1b0)](_0x300de7=>{const _0x34edfc=_0x112ff1;if(gTicker[noslash(_0x300de7)]){loading[_0x34edfc(0x1f9)]=loading[_0x34edfc(0x1f9)][_0x34edfc(0x9f)](_0x227cf2=>_0x227cf2!=_0x300de7);if(!watchedSymbols['includes'](_0x300de7))watchedSymbols[_0x34edfc(0x1be)](_0x300de7);_0x21ad09++;}}),loading[_0x112ff1(0x1b6)]=Math[_0x112ff1(0x175)](_0x21ad09/(_0x17e002['length']+maxLoadingProgress)*0x64);loading[_0x112ff1(0x1b6)]!=0x64&&(_0x44996c>0x1e*0x5&&(loading[_0x112ff1(0x9d)]=!![],emitLoadingProgress()),_0x44996c>0x78*0x5&&!_0xe9c33e&&(_0xe9c33e=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x112ff1(0x242)](',\x20')+_0x112ff1(0x22c)),logHistory(_0x112ff1(0x214),_0x112ff1(0xd9)+loadCoinsRetryInterval/0xea60+_0x112ff1(0xee)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x112ff1(0x166)]=!![],emitLoadingProgress();break;}else _0x3ae041!=loading[_0x112ff1(0x1b6)]&&(_0x3ae041=loading[_0x112ff1(0x1b6)],emitLoadingProgress()),_0x44996c++,await sleep(0xc8);}_0x21ad09==_0x17e002[_0x112ff1(0x181)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x112ff1(0x238)},_0x38f4f2=>{}),_0xe9c33e&&logHistory(_0x112ff1(0xf6),_0x112ff1(0x155)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2f0b7b=_0x2734d1;proxyEmit(_0x2f0b7b(0x1b3),{...emittedConfiguration(),'configstate':_0x2f0b7b(0x96)});}function emitLoadingProgress(){const _0x18c9ad=_0x2734d1;proxyEmit(_0x18c9ad(0x1c7),loading);}async function getFiat(){const _0x741b27=_0x2734d1;let _0x41a7d7=gTicker[stablecoins[_0x741b27(0x148)]['coin']],_0x4de767=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x41a7d7),'usd':Number(_0x4de767)};}function capitalize(_0x2cb6d6){const _0x5df2ab=_0x2734d1;return _0x2cb6d6[_0x5df2ab(0x1d9)](0x0,0x1)[_0x5df2ab(0x12b)]()+_0x2cb6d6[_0x5df2ab(0x1d9)](0x1);}function supportedExchanges(){const _0x3878f0=_0x2734d1,_0xb232b0=['ws','fetchTickers',_0x3878f0(0xed),'watchTrades',_0x3878f0(0x207),'cancelOrder',_0x3878f0(0x171),_0x3878f0(0xda),'fetchBalance'];let _0x4f2786=[],_0xd94773=[],_0x298b9a=ccxt['pro'][_0x3878f0(0xea)];_0x298b9a[_0x3878f0(0x1b0)](_0x5a8c94=>{const _0x54dab6=_0x3878f0;try{const _0x3e97d4=new ccxt[(_0x54dab6(0x185))][_0x5a8c94]();_0xd94773[_0x54dab6(0x1be)](_0x3e97d4);}catch(_0x2d0709){}}),_0xd94773['forEach'](_0x21f72e=>{const _0x3fe43b=_0x3878f0;let _0x4f8711=0x0;_0xb232b0[_0x3fe43b(0x1b0)](_0x354b24=>{const _0xe924f8=_0x3fe43b;_0x354b24 in _0x21f72e[_0xe924f8(0x12d)]&&_0x21f72e[_0xe924f8(0x12d)][_0x354b24]&&_0x4f8711++;}),_0x4f8711==_0xb232b0[_0x3fe43b(0x181)]&&_0x4f2786['push'](capitalize(_0x21f72e['id']));});let _0x6d4a2=[];return _0x298b9a[_0x3878f0(0x1b0)](_0x1d1edf=>{const _0x277dd1=_0x3878f0;_0x1d1edf=capitalize(_0x1d1edf);if(!_0x4f2786[_0x277dd1(0x104)](_0x1d1edf))_0x6d4a2['push'](_0x1d1edf);}),_0x4f2786;}function setStartDatePerformance(){const _0x43b7c4=_0x2734d1;if(config&&config[_0x43b7c4(0xb8)][0x0][_0x43b7c4(0x190)]['length']!=0x0){const _0x5c87c1=config[_0x43b7c4(0xb8)][0x0][_0x43b7c4(0x190)];dbPerformance[_0x43b7c4(0x16b)]('data')['find']({'date':config[_0x43b7c4(0x157)]})['assign']({'coins':_0x5c87c1})['write']();}}async function recreateCoinResults(){const _0x2e2965=_0x2734d1;recreationNeeded=![];let _0x2ed4f8,_0x4d0520=[];try{for(const _0x44c06b of currentCoins){if(_0x44c06b[_0x2e2965(0xb3)]!=config['basecoin']){let _0xa936b4=0x0,_0x5e8e21,_0x236e5f;_0x2ed4f8=await getAllEventOrders(_0x44c06b[_0x2e2965(0xd6)]);if(_0x2ed4f8[_0x2e2965(0x181)]>0x0)_0x2ed4f8[_0x2e2965(0x1b0)](_0x4b5008=>{const _0x4e542a=_0x2e2965,_0x2e64ae=_0x44c06b[_0x4e542a(0xd6)]['includes'](config[_0x4e542a(0x12a)]+'/');_0x4d0520[_0x4e542a(0x1be)]({'datetime':_0x4b5008[_0x4e542a(0x1dd)],'coin':_0x44c06b[_0x4e542a(0xb3)],'symbol':_0x44c06b[_0x4e542a(0xd6)],'side':_0x4b5008[_0x4e542a(0x1b1)],'reverse':_0x2e64ae,'amount':formatResult(_0x4b5008[_0x4e542a(0x20d)],0x8),'filled':formatResult(_0x4b5008[_0x4e542a(0x20d)],0x8),'price':formatResult(_0x4b5008[_0x4e542a(0x24d)],0x8)}),_0xa936b4=_0x4b5008[_0x4e542a(0x1b1)]==_0x4e542a(0x1cc)?_0xa936b4+_0x4b5008[_0x4e542a(0x20d)]:_0xa936b4-_0x4b5008[_0x4e542a(0x20d)];if(!_0x236e5f)_0x236e5f=_0x4b5008[_0x4e542a(0x24d)];});_0x5e8e21=_0x44c06b[_0x2e2965(0x23c)]-_0xa936b4;let _0x3990fd;config[_0x2e2965(0xb8)][_0x2e2965(0x1b0)](_0x4f78cf=>{const _0x11e9cb=_0x2e2965;!_0x3990fd&&(_0x3990fd=_0x4f78cf[_0x11e9cb(0x190)][_0x11e9cb(0x23d)](_0x548745=>_0x548745[_0x11e9cb(0xb3)]==_0x44c06b['coin']),_0x3990fd&&(_0x5e8e21=_0x3990fd[_0x11e9cb(0x23c)],_0x236e5f=_0x3990fd[_0x11e9cb(0x24d)]));});let _0x186bf6=dbCoinResults[_0x2e2965(0x16b)]('coins')[_0x2e2965(0x23d)]({'coin':_0x44c06b['coin']})[_0x2e2965(0x151)]();_0x186bf6={'coin':_0x44c06b[_0x2e2965(0xb3)],'number':_0x5e8e21,'breakeven':_0x236e5f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2e2965(0x16b)](_0x2e2965(0xe5))[_0x2e2965(0x23d)]({'coin':_0x44c06b['coin']})[_0x2e2965(0x115)](_0x186bf6)[_0x2e2965(0x22b)]();}}_0x4d0520[_0x2e2965(0x92)]((_0x580a0a,_0x17aee7)=>_0x580a0a[_0x2e2965(0x1dd)]>_0x17aee7[_0x2e2965(0x1dd)]?0x1:_0x17aee7[_0x2e2965(0x1dd)]>_0x580a0a['datetime']?-0x1:0x0);let _0x56d9d5=0x0;for(let _0xce1e15 of _0x4d0520){await updateCoinResults(_0xce1e15,!![]);}}catch(_0x2385f4){await handleError(_0x2385f4,_0x2e2965(0xfe));}}async function getAllEventOrders(_0x1759e6){const _0x2feadd=_0x2734d1;let _0x2596ed=[],_0x12aa98=dbLogs[_0x2feadd(0x16b)]('logs')[_0x2feadd(0x9f)](_0xbbdb77=>{const _0x2336f0=_0x2feadd,_0x3a7a82=_0xbbdb77[_0x2336f0(0xf1)][_0x2336f0(0x1fc)]();return _0x3a7a82[_0x2336f0(0x104)](_0x1759e6[_0x2336f0(0x1fc)]())&&(_0x3a7a82[_0x2336f0(0x104)](_0x2336f0(0x20f))&&_0x3a7a82[_0x2336f0(0x104)](_0x2336f0(0x1b9))||_0x3a7a82['includes'](_0x2336f0(0x20d))&&_0x3a7a82[_0x2336f0(0x104)](_0x2336f0(0x1b9)));})[_0x2feadd(0x188)]('time')[_0x2feadd(0x151)]();return _0x12aa98['forEach'](_0x4622cb=>{const _0x273dd2=_0x2feadd,_0x130301=_0x4622cb[_0x273dd2(0xf1)]['includes'](_0x273dd2(0x164))?'sell':_0x273dd2(0x1cc),_0x816674=/#([0-9]|\.)+\s/i,_0x462a7a=Number(_0x816674[_0x273dd2(0x21d)](_0x4622cb['event'])[0x0][_0x273dd2(0x131)](0x1)),_0x678f27=/@([0-9]|\.)+$/i,_0x6af5fd=Number(_0x678f27[_0x273dd2(0x21d)](_0x4622cb['event'])[0x0][_0x273dd2(0x131)](0x1));_0x2596ed['push']({'datetime':_0x4622cb[_0x273dd2(0xb5)],'coin':symbolToCoin(_0x1759e6),'symbol':_0x1759e6,'side':_0x130301,'amount':_0x462a7a,'filled':_0x462a7a,'price':_0x6af5fd});}),_0x2596ed;}async function validate24hChanges(){const _0x92f8df=_0x2734d1;for(const _0x4c7714 of currentCoins){if(_0x4c7714[_0x92f8df(0xb3)]!=config[_0x92f8df(0x12a)]){let _0x498351;_0x4c7714[_0x92f8df(0x10b)]?_0x498351=formatResult((0x1/(gChange[_0x4c7714[_0x92f8df(0xd6)]]/0x64+0x1)-0x1)*0x64,0x3):_0x498351=gChange[_0x4c7714[_0x92f8df(0xd6)]],_0x498351<config[_0x92f8df(0x16a)]&&(logHistory(_0x92f8df(0x214),_0x4c7714[_0x92f8df(0xb3)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x498351+'%'),logHistory('error',_0x92f8df(0x195)),logHistory(_0x92f8df(0x214),_0x92f8df(0x1c2)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x112744,_0x413e75){const _0x4d91fc=_0x2734d1;if(!_0x112744)return!![];const _0x5e17fe=_0x413e75[_0x4d91fc(0xdf)]('.'),_0x42be06=_0x112744[_0x4d91fc(0xdf)]('.');for(var _0x3dcc89=0x0;_0x3dcc89<_0x42be06[_0x4d91fc(0x181)];_0x3dcc89++){const _0x2c2326=~~_0x42be06[_0x3dcc89],_0x138669=~~_0x5e17fe[_0x3dcc89];if(_0x2c2326<_0x138669)return!![];if(_0x2c2326>_0x138669)return![];}return![];}async function oneTimeMigration(){const _0x4d1d25=_0x2734d1;let _0x3e0915=dbLogs['get'](_0x4d1d25(0x12f))[_0x4d1d25(0x151)]();if(isOlderVersion(_0x3e0915,_0x4d1d25(0x158))){let _0x9dc8fd=[];const _0x14647b=dbLogs['get'](_0x4d1d25(0x144))['value']();_0x14647b['forEach'](_0x2b6dd7=>{const _0xb31a66=_0x4d1d25;_0x9dc8fd['push']({'time':_0x2b6dd7[_0xb31a66(0xb5)],'type':_0x2b6dd7['type'],'event':_0x2b6dd7[_0xb31a66(0xf1)]});}),dbLogs[_0x4d1d25(0x16b)](_0x4d1d25(0x144))[_0x4d1d25(0x115)](_0x9dc8fd)[_0x4d1d25(0x22b)]();}let _0x5d722c=dbConfig[_0x4d1d25(0x16b)](_0x4d1d25(0x12f))[_0x4d1d25(0x151)]();if(isOlderVersion(_0x5d722c,_0x4d1d25(0x158))){let _0x212292=dbConfig['get'](_0x4d1d25(0x23b))[_0x4d1d25(0x23d)]({'botID':botID})['value']();if(_0x212292){let _0x4e87f2=[];_0x212292['portfolio'][_0x4d1d25(0x1b0)](_0x457408=>{const _0x5f18ca=_0x4d1d25;_0x4e87f2[_0x5f18ca(0x1be)]({'coin':_0x457408[_0x5f18ca(0xb3)],'number':_0x457408[_0x5f18ca(0x1fd)],'price':_0x457408['startprice']}),delete _0x457408[_0x5f18ca(0x1fd)],delete _0x457408[_0x5f18ca(0x99)];});if(_0x4e87f2[_0x4d1d25(0x181)]!==0x0)fs[_0x4d1d25(0x241)](configbackuppath+('starting-balance-'+botID+_0x4d1d25(0x201)),JSON[_0x4d1d25(0x125)](_0x4e87f2,null,0x4),function(_0x35891b){if(_0x35891b){}});const _0x15e3da=(_0x8026d2,_0x2bda52)=>{const _0x31c70b=_0x4d1d25;let _0x384e0e=[];_0x2bda52[_0x31c70b(0x1b0)](_0x1aa7ab=>{const _0x15244c=_0x31c70b,_0x2c793b=_0x8026d2['find'](_0x406994=>_0x406994[_0x15244c(0xb3)]==_0x1aa7ab['coin']);if(!_0x2c793b)_0x384e0e[_0x15244c(0x1be)](_0x1aa7ab);});let _0x18e5ff=[];return _0x8026d2[_0x31c70b(0x1b0)](_0xa5734a=>{const _0x62ce43=_0x31c70b,_0x190c80=_0x2bda52[_0x62ce43(0x23d)](_0x599b7a=>_0x599b7a['coin']==_0xa5734a[_0x62ce43(0xb3)]);if(!_0x190c80||_0x190c80[_0x62ce43(0x23c)]==0x0&&_0xa5734a[_0x62ce43(0x23c)]!=0x0)_0x18e5ff['push'](_0xa5734a);}),{'missingDay1':_0x384e0e,'notInDay2':_0x18e5ff};},_0x2212e4=dbPerformance['get'](_0x4d1d25(0x1e6))[_0x4d1d25(0xfd)]()[_0x4d1d25(0x151)]();if(_0x2212e4[_0x4d1d25(0x181)]>0x1){const {missingDay1:_0x253d1e,notInDay2:_0x37976b}=_0x15e3da(_0x4e87f2,_0x2212e4[0x1][_0x4d1d25(0xe5)]);_0x4e87f2=[..._0x4e87f2,..._0x253d1e],_0x37976b[_0x4d1d25(0x1b0)](_0x45c6b8=>{const _0x3a223d=_0x4d1d25;let _0x313eb8=_0x4e87f2['findIndex'](_0x4a8fc5=>_0x4a8fc5['coin']==_0x45c6b8[_0x3a223d(0xb3)]);_0x313eb8!=-0x1&&_0x4e87f2[_0x3a223d(0x230)](_0x313eb8,0x1);});}_0x4e87f2['sort']((_0x2c0142,_0x2f7ea9)=>_0x2c0142[_0x4d1d25(0xb3)]>_0x2f7ea9['coin']?0x1:_0x2f7ea9[_0x4d1d25(0xb3)]>_0x2c0142[_0x4d1d25(0xb3)]?-0x1:0x0);let _0x5549a0=[{'date':_0x212292[_0x4d1d25(0x157)],'changes':_0x4e87f2}];_0x2212e4['length']>0x2&&_0x2212e4[_0x4d1d25(0x1b0)]((_0x3cb19c,_0x2edfd7)=>{const _0x4d4856=_0x4d1d25;if(_0x2edfd7>0x0&&_0x2edfd7<_0x2212e4['length']-0x1){const {missingDay1:_0x42eea7,notInDay2:_0x3c95ad}=_0x15e3da(_0x2212e4[_0x2edfd7][_0x4d4856(0xe5)],_0x2212e4[_0x2edfd7+0x1][_0x4d4856(0xe5)]);_0x4e87f2=[],(_0x42eea7['length']!=0x0||_0x3c95ad[_0x4d4856(0x181)]!=0x0)&&(_0x42eea7[_0x4d4856(0x181)]!=0x0&&_0x4e87f2['push'](..._0x42eea7),_0x3c95ad[_0x4d4856(0x181)]!=0x0&&(_0x3c95ad[_0x4d4856(0x1b0)](_0x18f9eb=>{_0x18f9eb['number']=-_0x18f9eb['number'];}),_0x4e87f2['push'](..._0x3c95ad)),_0x4e87f2['sort']((_0x1cad80,_0x4823dc)=>_0x1cad80[_0x4d4856(0xb3)]>_0x4823dc[_0x4d4856(0xb3)]?0x1:_0x4823dc[_0x4d4856(0xb3)]>_0x1cad80['coin']?-0x1:0x0),_0x5549a0['push']({'date':_0x2212e4[_0x2edfd7+0x1][_0x4d4856(0xa4)],'changes':_0x4e87f2}));}}),dbConfig[_0x4d1d25(0x16b)](_0x4d1d25(0x23b))[_0x4d1d25(0x23d)]({'botID':botID})['assign']({..._0x212292,'liquidity':_0x5549a0})[_0x4d1d25(0x22b)]();}}if(isOlderVersion(_0x5d722c,_0x4d1d25(0xd4))){let _0x4730d0=dbConfig['get']('bot')[_0x4d1d25(0x23d)]({'botID':botID})[_0x4d1d25(0x151)]();if(_0x4730d0){const _0xe4beea=_0x4730d0['exchange'],_0x45cfa1=_0xe4beea?capitalize(_0xe4beea):_0x4d1d25(0x1e5);dbConfig['get'](_0x4d1d25(0x23b))['find']({'botID':botID})[_0x4d1d25(0x115)]({'exchange':_0x45cfa1})[_0x4d1d25(0x22b)]();}}if(isOlderVersion(_0x5d722c,'2.6.22')){let _0x1a4833=dbConfig['get'](_0x4d1d25(0x23b))['find']({'botID':botID})[_0x4d1d25(0x151)]();if(_0x1a4833){const _0x3f09b9=_0x1a4833[_0x4d1d25(0x141)],_0x22e7f0=_0x3f09b9?_0x4d1d25(0x17b):![];dbConfig['get'](_0x4d1d25(0x23b))[_0x4d1d25(0x23d)]({'botID':botID})[_0x4d1d25(0x115)]({'marketcapEnabled':_0x22e7f0})[_0x4d1d25(0x22b)]();}}if(isOlderVersion(_0x5d722c,_0x4d1d25(0x121))){let _0x381cf9=dbConfig[_0x4d1d25(0x16b)](_0x4d1d25(0x23b))[_0x4d1d25(0x23d)]({'botID':botID})[_0x4d1d25(0x151)]();if(_0x381cf9){const _0x5bed77=_0x381cf9[_0x4d1d25(0x1c6)],_0x2efdb9=_0x5bed77?_0x4d1d25(0x217):![];dbConfig[_0x4d1d25(0x16b)](_0x4d1d25(0x23b))[_0x4d1d25(0x23d)]({'botID':botID})[_0x4d1d25(0x115)]({'autoliquidity':_0x2efdb9})[_0x4d1d25(0x22b)]();}}let _0x510b97=dbPerformance['get'](_0x4d1d25(0x12f))[_0x4d1d25(0x151)]();isOlderVersion(_0x510b97,_0x4d1d25(0x158))&&setStartDatePerformance();let _0x1228d8=dbCoinResults['get'](_0x4d1d25(0x12f))[_0x4d1d25(0x151)]();if(isOlderVersion(_0x1228d8,'2.5.0')){let _0xccce15=dbCoinResults[_0x4d1d25(0x16b)]('coins')[_0x4d1d25(0x151)]();if(_0xccce15[_0x4d1d25(0x181)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1a0819=_0x2734d1;dbConfig[_0x1a0819(0x172)](_0x1a0819(0x12f),serverversion)[_0x1a0819(0x22b)](),dbPerformance[_0x1a0819(0x172)](_0x1a0819(0x12f),serverversion)[_0x1a0819(0x22b)](),dbLogs[_0x1a0819(0x172)]('version',serverversion)[_0x1a0819(0x22b)](),dbCoinResults[_0x1a0819(0x172)](_0x1a0819(0x12f),serverversion)[_0x1a0819(0x22b)]();}function getConfiguration(_0x491194){const _0x4e860a=_0x2734d1;let _0x45cbbe=dbConfig[_0x4e860a(0x16b)](_0x4e860a(0x23b))[_0x4e860a(0x23d)]({'botID':_0x491194})['value']();if(_0x45cbbe){let _0x1c9719=![];typeof _0x45cbbe['threshold']=='string'&&(_0x45cbbe={..._0x45cbbe,'threshold':Number(_0x45cbbe[_0x4e860a(0xb0)])},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x16a)]==undefined&&(_0x45cbbe={..._0x45cbbe,'change24h':-0x14},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x19a)]==undefined&&(_0x45cbbe={..._0x45cbbe,'fiat':_0x4e860a(0x212)},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x17a)]==undefined&&(_0x45cbbe={..._0x45cbbe,'onepagemode':settings[_0x4e860a(0x17a)]},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x200)]==undefined&&(_0x45cbbe={..._0x45cbbe,'colorscheme':_0x4e860a(0x16d)},_0x1c9719=!![]),_0x45cbbe['autoliquidity']==undefined&&(_0x45cbbe={..._0x45cbbe,'autoliquidity':_0x4e860a(0x217)},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x110)]==undefined&&(_0x45cbbe={..._0x45cbbe,'marketcapApi':settings[_0x4e860a(0x110)]?!![]:![]},_0x1c9719=!![]),_0x45cbbe[_0x4e860a(0x141)]==undefined&&(_0x45cbbe={..._0x45cbbe,'marketcapEnabled':![]},_0x1c9719=!![]),_0x1c9719&&(_0x45cbbe={'botID':_0x45cbbe[_0x4e860a(0xdc)],'exchange':_0x45cbbe['exchange'],'apiKey':_0x45cbbe[_0x4e860a(0x112)],'apiSecret':_0x45cbbe[_0x4e860a(0x1ac)],'apiPassword':_0x45cbbe['apiPassword'],'basecoin':_0x45cbbe[_0x4e860a(0x12a)],'botname':_0x45cbbe['botname'],'showname':_0x45cbbe['showname'],'threshold':_0x45cbbe[_0x4e860a(0xb0)],'ordertype':_0x45cbbe[_0x4e860a(0xfa)],'timeout':_0x45cbbe['timeout'],'fiat':_0x45cbbe['fiat'],'startdate':_0x45cbbe[_0x4e860a(0x157)],'recreate':_0x45cbbe[_0x4e860a(0x109)],'timeshift':_0x45cbbe[_0x4e860a(0x14e)],'onepagemode':_0x45cbbe[_0x4e860a(0x17a)],'headless':_0x45cbbe[_0x4e860a(0x130)],'cooldown':_0x45cbbe['cooldown'],'change24h':_0x45cbbe['change24h'],'emojibuy':_0x45cbbe[_0x4e860a(0x199)],'emojisell':_0x45cbbe[_0x4e860a(0x219)],'colorscheme':_0x45cbbe[_0x4e860a(0x200)],'marketcapApi':_0x45cbbe[_0x4e860a(0x110)],'marketcapEnabled':_0x45cbbe[_0x4e860a(0x141)],'portfolio':_0x45cbbe['portfolio'],'autoliquidity':_0x45cbbe[_0x4e860a(0x1c6)],'liquidity':_0x45cbbe[_0x4e860a(0xb8)],'openOrders':_0x45cbbe[_0x4e860a(0x1bb)]},dbConfig['get'](_0x4e860a(0x23b))[_0x4e860a(0x19e)]()[_0x4e860a(0x22b)](),dbConfig[_0x4e860a(0x16b)](_0x4e860a(0x23b))[_0x4e860a(0x1be)](_0x45cbbe)[_0x4e860a(0x22b)]());}else _0x45cbbe={'botID':_0x491194,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x491194,'showname':![],'threshold':0x3,'ordertype':_0x4e860a(0x20f),'timeout':0x14,'fiat':_0x4e860a(0x212),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4e860a(0x14e)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4e860a(0x16d),'marketcapApi':settings[_0x4e860a(0x110)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x4e860a(0x217),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x45cbbe;}function emittedConfiguration(){const _0x4f2619=_0x2734d1;let _0x4aa7c9;if(config[_0x4f2619(0x112)]=='')_0x4aa7c9={...config,'configstate':_0x4f2619(0xde)};else config['apiKey']==_0x4f2619(0x1a6)?_0x4aa7c9={...config,'configstate':_0x4f2619(0xb2)}:(_0x4aa7c9={...config,'apiKey':_0x4f2619(0xaa),'apiSecret':_0x4f2619(0xaa)},config[_0x4f2619(0xc7)]&&(_0x4aa7c9[_0x4f2619(0xc7)]=_0x4f2619(0xaa)));return _0x4aa7c9['enableFiatToggle']=enableFiatToggle,_0x4aa7c9;}function getSettings(){const _0x1d2116=_0x2734d1;return dbSettings['get'](_0x1d2116(0x1ce))['value']();}function getSecure(){const _0x4bb08b=_0x2734d1;return dbSecure[_0x4bb08b(0x16b)](_0x4bb08b(0x91))[_0x4bb08b(0x151)]()||{};}function updateTimeshift(_0xa26c28){const _0x3e7b2d=_0x2734d1;let _0xdd8c84=dbConfig[_0x3e7b2d(0x16b)]('bot')[_0x3e7b2d(0x23d)]({'botID':botID})[_0x3e7b2d(0x151)]();_0xdd8c84&&dbConfig[_0x3e7b2d(0x16b)](_0x3e7b2d(0x23b))['find']({'botID':botID})[_0x3e7b2d(0x115)]({'timeshift':_0xa26c28})[_0x3e7b2d(0x22b)](),config['timeshift']=_0xa26c28,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x3fa4c0){const _0x244f9c=_0x2734d1;let _0x59d000=dbConfig[_0x244f9c(0x16b)](_0x244f9c(0x23b))[_0x244f9c(0x23d)]({'botID':botID})[_0x244f9c(0x151)]();_0x59d000&&dbConfig[_0x244f9c(0x16b)](_0x244f9c(0x23b))[_0x244f9c(0x23d)]({'botID':botID})[_0x244f9c(0x115)]({'onepagemode':_0x3fa4c0})[_0x244f9c(0x22b)](),config[_0x244f9c(0x17a)]=_0x3fa4c0,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x5095ce){const _0x384d99=_0x2734d1,_0x15235b=_0x5095ce?!![]:![];let _0x2ee483=dbConfig[_0x384d99(0x16b)](_0x384d99(0x23b))[_0x384d99(0x23d)]({'botID':botID})['value']();_0x2ee483&&dbConfig[_0x384d99(0x16b)]('bot')[_0x384d99(0x23d)]({'botID':botID})['assign']({'marketcapApi':_0x15235b})['write'](),config[_0x384d99(0x110)]=_0x15235b,getMarketCap(),proxyEmit(_0x384d99(0x1b3),emittedConfiguration());}async function storeConfiguration(_0x2eec0c){const _0x40940b=_0x2734d1;logger[_0x40940b(0x138)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x515a22=![],_0x58f80d=![],_0x3643a4=[];_0x2eec0c[_0x40940b(0xae)][_0x40940b(0x1b0)](_0x31c309=>{const _0x406bad=_0x40940b;if(!_0x31c309[_0x406bad(0x1ba)]&&_0x31c309[_0x406bad(0xb3)]!=_0x2eec0c[_0x406bad(0x12a)])_0x3643a4['push'](_0x31c309[_0x406bad(0xd6)]);}),_0x3643a4[_0x40940b(0x1b0)](_0x54dc5e=>{const _0x4850cb=_0x40940b,_0x5a63bf=currentCoins[_0x4850cb(0x23d)](_0x275227=>_0x275227[_0x4850cb(0xd6)]==_0x54dc5e);!_0x5a63bf&&(_0x515a22=!![]);}),currentCoins[_0x40940b(0x1b0)](_0x232a7d=>{const _0x391284=_0x40940b;if(_0x232a7d[_0x391284(0xb3)]!=config[_0x391284(0x12a)]){const _0xed8c54=_0x3643a4[_0x391284(0x23d)](_0x21f635=>_0x21f635==_0x232a7d[_0x391284(0xd6)]);!_0xed8c54&&(_0x515a22=!![]);}}),_0x2eec0c[_0x40940b(0xae)][_0x40940b(0x1b0)](_0x25dae1=>{const _0x33a8c6=_0x40940b,_0x1f3f3f=config[_0x33a8c6(0xae)][_0x33a8c6(0x23d)](_0x5c1f2e=>_0x5c1f2e['coin']==_0x25dae1[_0x33a8c6(0xb3)]);if(_0x1f3f3f&&_0x25dae1['offset']!=_0x1f3f3f[_0x33a8c6(0x1e2)])_0x58f80d=!![];});let _0x410bee=dbConfig[_0x40940b(0x16b)](_0x40940b(0x23b))[_0x40940b(0x23d)]({'botID':botID})['value']();_0x2eec0c={..._0x2eec0c,'apiKey':decryptRSA(secure[_0x40940b(0x13d)],_0x2eec0c['apiKey']),'apiSecret':decryptRSA(secure[_0x40940b(0x13d)],_0x2eec0c[_0x40940b(0x1ac)])};_0x2eec0c[_0x40940b(0xc7)]&&(_0x2eec0c['apiPassword']=decryptRSA(secure[_0x40940b(0x13d)],_0x2eec0c['apiPassword']));let _0x3730f7=![];if(_0x410bee){_0x2eec0c[_0x40940b(0x112)]==_0x40940b(0xaa)?_0x2eec0c[_0x40940b(0x112)]=config[_0x40940b(0x112)]:_0x3730f7=!![];_0x2eec0c[_0x40940b(0x1ac)]=='************'?_0x2eec0c[_0x40940b(0x1ac)]=config[_0x40940b(0x1ac)]:_0x3730f7=!![];if(_0x2eec0c['apiPassword']=='************')_0x2eec0c[_0x40940b(0xc7)]=config[_0x40940b(0xc7)];else{if(_0x2eec0c[_0x40940b(0xc7)])_0x3730f7=!![];}dbConfig[_0x40940b(0x16b)]('bot')[_0x40940b(0x23d)]({'botID':botID})[_0x40940b(0x115)](_0x2eec0c)[_0x40940b(0x22b)]();}else dbConfig['get'](_0x40940b(0x23b))[_0x40940b(0x1be)](_0x2eec0c)[_0x40940b(0x22b)](),_0x3730f7=!![],process[_0x40940b(0x226)]({'status':_0x40940b(0x1aa),'live':_0x40940b(0x238)},_0x152dcc=>{});process[_0x40940b(0x226)]({'botname':_0x2eec0c[_0x40940b(0x107)]},_0x2799ce=>{}),config={..._0x2eec0c},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3730f7)!_0x410bee?await reset(!![]):getBalances();else _0x515a22||_0x58f80d?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0xb3be92){const _0x47e241=_0x2734d1,_0x348dfd={...config,'headless':_0xb3be92['headless']};let _0x4fd4e7=dbConfig[_0x47e241(0x16b)](_0x47e241(0x23b))[_0x47e241(0x23d)]({'botID':botID})[_0x47e241(0x151)]();_0x4fd4e7&&dbConfig[_0x47e241(0x16b)](_0x47e241(0x23b))['find']({'botID':botID})['assign'](_0x348dfd)[_0x47e241(0x22b)](),config={..._0x348dfd},updateBotManager(),proxyEmit(_0x47e241(0x1b3),emittedConfiguration());}async function storeFiat(_0x4fe21f){const _0xae760c=_0x2734d1,_0x5bcfd8={...config,'fiat':_0x4fe21f};let _0x208c20=dbConfig[_0xae760c(0x16b)](_0xae760c(0x23b))[_0xae760c(0x23d)]({'botID':botID})[_0xae760c(0x151)]();_0x208c20&&dbConfig[_0xae760c(0x16b)](_0xae760c(0x23b))[_0xae760c(0x23d)]({'botID':botID})[_0xae760c(0x115)](_0x5bcfd8)[_0xae760c(0x22b)](),config={..._0x5bcfd8},proxyEmit(_0xae760c(0x1b3),emittedConfiguration());}function resetHistory(){const _0x9389d0=_0x2734d1;logger[_0x9389d0(0x178)](_0x9389d0(0x24e));try{if(fs[_0x9389d0(0x1f5)](path[_0x9389d0(0x242)](configpath,_0x9389d0(0xfb)+botID+_0x9389d0(0x9b))))fs[_0x9389d0(0xe2)](path[_0x9389d0(0x242)](configpath,_0x9389d0(0xfb)+botID+_0x9389d0(0x9b)));if(fs[_0x9389d0(0x1f5)](path[_0x9389d0(0x242)](configpath,_0x9389d0(0xfb)+botID+_0x9389d0(0xb4))))fs[_0x9389d0(0xe2)](path[_0x9389d0(0x242)](configpath,'bot-'+botID+_0x9389d0(0xb4)));if(fs['existsSync'](path[_0x9389d0(0x242)](configpath,'bot-'+botID+_0x9389d0(0xbd))))fs[_0x9389d0(0xe2)](path[_0x9389d0(0x242)](configpath,_0x9389d0(0xfb)+botID+_0x9389d0(0xbd)));}catch(_0x5a0ca1){if(_0x5a0ca1)logger[_0x9389d0(0x178)](_0x9389d0(0x210),_0x5a0ca1);}const _0xe2b877=getDate();let _0x14ecc9=[];currentCoins[_0x9389d0(0x1b0)](_0x242917=>{const _0x280e29=_0x9389d0;_0x14ecc9[_0x280e29(0x1be)]({'coin':_0x242917[_0x280e29(0xb3)],'number':_0x242917['number'],'price':_0x242917[_0x280e29(0x14f)]});});let _0x50b8dd=dbConfig[_0x9389d0(0x16b)](_0x9389d0(0x23b))[_0x9389d0(0x23d)]({'botID':botID})[_0x9389d0(0x151)]();_0x50b8dd&&(dbConfig[_0x9389d0(0x16b)]('bot')[_0x9389d0(0x23d)]({'botID':botID})['assign']({'liquidity':[{'date':_0xe2b877,'changes':_0x14ecc9}]})[_0x9389d0(0x22b)](),config[_0x9389d0(0xb8)]=[]),restartBot(!![]);}function noslash(_0x102f7d){const _0x3a40b5=_0x2734d1;return _0x102f7d[_0x3a40b5(0x1c8)]('/','');}function updateHighestFee(_0x4d4169){const _0x3ec69b=_0x2734d1;if(_0x4d4169['reverse']){let _0x56784b={'filled':_0x4d4169[_0x3ec69b(0x20d)]*_0x4d4169[_0x3ec69b(0x24d)],'amount':_0x4d4169[_0x3ec69b(0x20d)]*_0x4d4169[_0x3ec69b(0x24d)],'side':_0x4d4169[_0x3ec69b(0x1b1)]==_0x3ec69b(0x164)?_0x3ec69b(0x1cc):_0x3ec69b(0x164),'price':0x1/_0x4d4169[_0x3ec69b(0x24d)]};_0x4d4169={..._0x4d4169,..._0x56784b};}const _0x1b0b4c=defaultFee*_0x4d4169[_0x3ec69b(0x20d)]*_0x4d4169[_0x3ec69b(0x24d)];lastFees[_0x3ec69b(0x134)][_0x3ec69b(0x181)]===0x14&&lastFees[_0x3ec69b(0x134)][_0x3ec69b(0xaf)](),lastFees[_0x3ec69b(0x134)][_0x3ec69b(0x1be)](_0x1b0b4c),lastFees[_0x3ec69b(0x1ad)]=Math[_0x3ec69b(0x152)](...lastFees[_0x3ec69b(0x134)]);}async function updateNumberCoinsCcxt(_0x5abee4){const _0xbeb90e=_0x2734d1;logger['debug'](_0xbeb90e(0xbe)+_0x5abee4[_0xbeb90e(0xd6)]+_0xbeb90e(0x19d)+_0x5abee4[_0xbeb90e(0x177)]+_0xbeb90e(0x19d)+_0x5abee4[_0xbeb90e(0x20d)]+_0xbeb90e(0x106)+_0x5abee4['amount']+'\x20|\x20'+_0x5abee4['id']);let _0x4189d7=_0x5abee4[_0xbeb90e(0x177)],_0x2a2128=![];currentCoins[_0xbeb90e(0x1b0)](_0x3d9b1c=>{const _0x5a9910=_0xbeb90e;_0x3d9b1c[_0x5a9910(0xd6)]==_0x5abee4[_0x5a9910(0xd6)]&&(_0x2a2128=!![]);});if(!_0x2a2128)return;const _0x11fc37=currentCoins['find'](_0x2783ec=>_0x2783ec['symbol']==_0x5abee4[_0xbeb90e(0xd6)]),_0x1a5441=_0x11fc37[_0xbeb90e(0xb3)],_0x2308b0=_0x5c1fcf=>{const _0x31d63c=_0xbeb90e,_0x173894=currentCoins[_0x31d63c(0x23d)](_0x51135b=>_0x51135b['symbol']==_0x5abee4[_0x31d63c(0xd6)]);if(_0x173894)_0x173894[_0x31d63c(0x15f)]=_0x5c1fcf;};let _0x8c7d12=![];for(const _0x47f1a8 of lastOrders){const _0x37d8b4=0x64,_0x179eed=0x1388;let _0x4f0f56=0x0;while(!_0x47f1a8[_0xbeb90e(0xc8)]&&_0x4f0f56*_0x37d8b4<_0x179eed){_0x4f0f56++,await sleep(_0x37d8b4);}if(_0x4f0f56>0x0)logger[_0xbeb90e(0x138)](_0xbeb90e(0x252)+_0x4f0f56*_0x37d8b4/0x3e8+_0xbeb90e(0xe4));_0x47f1a8[_0xbeb90e(0xc8)]==_0x5abee4['id']&&(_0x8c7d12=!![]);}if(_0x4189d7==_0xbeb90e(0x233)){_0x2308b0(_0xbeb90e(0x233));if(_0x5abee4[_0xbeb90e(0x20d)]>0x0&&_0x5abee4[_0xbeb90e(0x20d)]<_0x5abee4[_0xbeb90e(0x218)]){if(_0x8c7d12){setBlockTransactionDetection(!![]),logger[_0xbeb90e(0x138)](_0xbeb90e(0x194)+_0x5abee4[_0xbeb90e(0x20d)]+_0xbeb90e(0x15c)+_0x5abee4['id']);const _0x5fe1ec=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1a5441);[currentCoins,currentCoinsAll]=_0x5fe1ec,setBlockTransactionDetection(![]);}else logger[_0xbeb90e(0x138)](_0xbeb90e(0x194)+_0x5abee4[_0xbeb90e(0x20d)]+_0xbeb90e(0x1a4)+_0x5abee4['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x4189d7==_0xbeb90e(0x150)){_0x2308b0(_0xbeb90e(0x150));const _0x1e8247=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1e8247,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x4189d7==_0xbeb90e(0x15a)){if(lastOrders)for(const _0x4338e3 of lastOrders){if(_0x4338e3['orderId']==_0x5abee4['id']){logger[_0xbeb90e(0x138)](_0xbeb90e(0xba)+_0x5abee4['id']),_0x8c7d12=!![];if(_0x4338e3[_0xbeb90e(0x20d)]==0x0){setBlockTransactionDetection(!![]),logger[_0xbeb90e(0x138)](_0xbeb90e(0x1ec)+_0x5abee4['id']);if(_0x5abee4[_0xbeb90e(0x1a8)])_0x4338e3[_0xbeb90e(0x24d)]=_0x5abee4[_0xbeb90e(0x1a8)];else{if(_0x5abee4[_0xbeb90e(0x24d)])_0x4338e3[_0xbeb90e(0x24d)]=_0x5abee4['price'];else{}}_0x4338e3[_0xbeb90e(0x20d)]=_0x5abee4[_0xbeb90e(0x20d)],updateHighestFee(_0x4338e3);const _0x51699e=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1a5441);[currentCoins,currentCoinsAll]=_0x51699e,setBlockTransactionDetection(![]),await validateOrders(),_0x2308b0(_0xbeb90e(0x20d)),_0x4338e3[_0xbeb90e(0xf0)]={'currency':_0x5abee4[_0xbeb90e(0xf0)]?_0x5abee4['fee'][_0xbeb90e(0x1bd)]:null,'cost':_0x5abee4[_0xbeb90e(0xf0)]?_0x5abee4[_0xbeb90e(0xf0)][_0xbeb90e(0x9e)]:0x0},await updateCoinResults(_0x4338e3);}}}!_0x8c7d12&&(logger[_0xbeb90e(0x138)](_0xbeb90e(0x1ed)+_0x5abee4['id']),_0x2308b0(_0xbeb90e(0x20d)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x58ae63=JSON['parse'](lastBalances['portfolio']);const _0x58dc7a=_0x58ae63[_0xbeb90e(0x23d)](_0x43c982=>_0x43c982[_0xbeb90e(0xd6)]==_0x5abee4[_0xbeb90e(0xd6)]);if(_0x58dc7a){if(_0x4189d7==_0xbeb90e(0x233))_0x58dc7a['orderstatus']=_0x58dc7a[_0xbeb90e(0x15f)]=='filled'?_0xbeb90e(0x20d):_0xbeb90e(0x233);else{if(_0x4189d7==_0xbeb90e(0x150))_0x58dc7a[_0xbeb90e(0x15f)]=_0x58dc7a[_0xbeb90e(0x15f)]==_0xbeb90e(0x20d)?'filled':'canceled';else _0x4189d7==_0xbeb90e(0x15a)&&(_0x58dc7a[_0xbeb90e(0x15f)]=_0xbeb90e(0x20d));}}lastBalances={...lastBalances,'portfolio':JSON[_0xbeb90e(0x125)](_0x58ae63)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2267cc=_0x2734d1;await getOpenOrders();let _0x4ba90d=![];currentCoins[_0x2267cc(0x1b0)](_0x109cb2=>{const _0x39082f=_0x2267cc;_0x4ba90d=allOpenOrders[_0x39082f(0x23d)](_0x222fdc=>_0x222fdc[_0x39082f(0xd6)]==_0x109cb2[_0x39082f(0xd6)]),_0x109cb2[_0x39082f(0x15f)]=_0x4ba90d?_0x39082f(0x233):'none';});}async function fetchBalance(_0x17541e=!![]){const _0x5d323b=_0x2734d1;let _0x2476e0,_0x338067;try{return _0x2476e0=await exchange[_0x5d323b(0x209)](),_0x338067=_0x2476e0[_0x5d323b(0x221)],_0x338067;}catch(_0x599f57){return!_0x17541e?handleErrorNoStop(_0x599f57,_0x5d323b(0xb7)):await handleError(_0x599f57,'fetchBalance()'),![];}}async function getCoins(_0x43b719=0x0,_0x4b56fa=!![],_0xdae85c=config[_0x2734d1(0x12a)],_0x16f77e){const _0x56d1e5=_0x2734d1;let _0x7886ca=[],_0x22e96f=[],_0x158f30=[],_0x5aee6a;if(_0x43b719)await sleep(_0x43b719);if(botPaused)return[currentCoins,currentCoinsAll];let _0x205a72=![],_0x187805=0x0,_0x408cb2,_0x3b1f05;_0x16f77e&&(_0x408cb2=currentCoins['find'](_0x4ce43a=>_0x4ce43a[_0x56d1e5(0xb3)]==_0x16f77e),_0x3b1f05=_0x408cb2[_0x56d1e5(0x23c)]);while(!_0x205a72){_0x5aee6a=await fetchBalance(_0x4b56fa);if(_0x5aee6a){if(_0x16f77e){if(_0x5aee6a[_0x16f77e]!=_0x3b1f05)logger[_0x56d1e5(0x138)](_0x56d1e5(0x176)+_0x16f77e+':\x20'+_0x5aee6a[_0x16f77e]+'\x20('+_0x3b1f05+')'),_0x205a72=!![];else{logger[_0x56d1e5(0x138)](_0x56d1e5(0x1d5)+_0x16f77e+':\x20'+_0x5aee6a[_0x16f77e]+'\x20('+_0x3b1f05+')'),_0x187805++;if(_0x187805<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x56d1e5(0x138)](_0x56d1e5(0x227)+_0x187805+_0x56d1e5(0x19b));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x118d94,_0x4d0972]of Object[_0x56d1e5(0x1c5)](_0x5aee6a)){_0x158f30[_0x56d1e5(0x1be)](_0x118d94);}config['portfolio'][_0x56d1e5(0x1b0)](_0x295d0a=>{const _0x38a033=_0x56d1e5;!_0x158f30['includes'](_0x295d0a[_0x38a033(0xb3)])&&(_0x5aee6a[_0x295d0a[_0x38a033(0xb3)]]=0x0);});if(_0xdae85c=='')for(const [_0x296ef2,_0x4d5648]of Object['entries'](_0x5aee6a)){_0x4d5648!=0x0&&_0x7886ca[_0x56d1e5(0x1be)]({'coin':_0x296ef2});}else for(const [_0x9733bf,_0x523272]of Object[_0x56d1e5(0x1c5)](_0x5aee6a)){const _0x315925=config[_0x56d1e5(0xae)]['find'](_0x54f982=>_0x54f982[_0x56d1e5(0xb3)]==_0x9733bf),_0x401662=_0x9733bf+'/'+_0xdae85c,_0x4d6181=_0xdae85c+'/'+_0x9733bf,_0x59303b=currentCoins[_0x56d1e5(0x23d)](_0x3203cf=>_0x3203cf[_0x56d1e5(0xb3)]==_0x9733bf);if((_0x523272!=0x0||_0x315925)&&(allSymbols[_0x56d1e5(0x104)](_0x401662)||_0x9733bf==_0xdae85c))_0x59303b?_0x7886ca[_0x56d1e5(0x1be)]({..._0x59303b,'number':Math[_0x56d1e5(0x152)](_0x523272+(_0x315925&&_0x315925['offset']||0x0),0x0)}):_0x7886ca[_0x56d1e5(0x1be)]({'coin':_0x9733bf,'symbol':_0x401662,'reverse':![],'number':Math['max'](_0x523272+(_0x315925&&_0x315925[_0x56d1e5(0x1e2)]||0x0),0x0),'orderstatus':'none'});else{if((_0x523272!=0x0||_0x315925)&&allSymbols[_0x56d1e5(0x104)](_0x4d6181))_0x59303b?_0x7886ca['push']({..._0x59303b,'number':Math[_0x56d1e5(0x152)](_0x523272+(_0x315925&&_0x315925[_0x56d1e5(0x1e2)]||0x0),0x0)}):_0x7886ca[_0x56d1e5(0x1be)]({'coin':_0x9733bf,'symbol':_0x4d6181,'reverse':!![],'number':Math[_0x56d1e5(0x152)](_0x523272+(_0x315925&&_0x315925[_0x56d1e5(0x1e2)]||0x0),0x0),'orderstatus':_0x56d1e5(0x248)});else _0x315925&&_0x7886ca[_0x56d1e5(0x1be)]({'coin':_0x315925[_0x56d1e5(0xb3)],'symbol':_0x315925['symbol'],'reverse':_0x315925[_0x56d1e5(0x10b)],'number':0x0,'orderstatus':_0x56d1e5(0x248)});}}return _0x7886ca['sort']((_0x58ef89,_0x163389)=>_0x58ef89[_0x56d1e5(0x1ab)]<_0x163389['delta']?0x1:_0x163389[_0x56d1e5(0x1ab)]<_0x58ef89['delta']?-0x1:0x0),_0x22e96f=cloneDeep(_0x7886ca),_0x7886ca=_0x7886ca[_0x56d1e5(0x9f)](_0x1c3d9a=>{const _0x6f9f6f=_0x56d1e5,_0x21cecf=config[_0x6f9f6f(0xae)][_0x6f9f6f(0x23d)](_0x1cca9c=>_0x1cca9c[_0x6f9f6f(0xb3)]==_0x1c3d9a['coin']);return _0x21cecf&&!_0x21cecf[_0x6f9f6f(0x1ba)];}),[_0x7886ca,_0x22e96f];}async function getCoinNumber(_0x17c792){const _0x5b7834=_0x2734d1;let _0x1dd98e;try{const _0x109c30=await exchange['fetchBalance']();_0x1dd98e=_0x109c30[_0x5b7834(0x221)][_0x17c792];}catch(_0x5dd893){await handleError(_0x5dd893,'getCoinNumber()');}return _0x1dd98e;}async function getOpenOrders(){const _0x2168d6=_0x2734d1;let _0x463352;allOpenOrders=[];try{for(const _0x46bf69 of config[_0x2168d6(0xae)]){!_0x46bf69['excluded']&&_0x46bf69[_0x2168d6(0xb3)]!=config['basecoin']&&(_0x463352=await exchange[_0x2168d6(0xda)](_0x46bf69[_0x2168d6(0xd6)]),_0x463352['length']>0x0&&allOpenOrders[_0x2168d6(0x1be)](_0x463352[0x0]));}}catch(_0x48985c){await handleError(_0x48985c,_0x2168d6(0xe0));}}async function handleOpenOrders(_0x3dd0aa=0x0){const _0x25df82=_0x2734d1;allOpenOrders[_0x25df82(0x181)]==0x0&&lockOrders==ORDERS[_0x25df82(0x165)]&&allOrdersPlaced&&(_0x3dd0aa==0x0?(logger[_0x25df82(0x138)]('1\x20-\x20Handle\x20open\x20orders'),_0x3dd0aa++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x25df82(0x138)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x32bd7c){const _0x4843a8=_0x2734d1,_0x55d530=ccxt[_0x4843a8(0x185)][_0x32bd7c[_0x4843a8(0x111)][_0x4843a8(0x1fc)]()],_0x4b2adb=new _0x55d530({'apiKey':_0x32bd7c[_0x4843a8(0x112)],'secret':_0x32bd7c[_0x4843a8(0x1ac)],'options':{'defaultType':_0x4843a8(0xf7)}});if(_0x32bd7c[_0x4843a8(0xc7)])_0x4b2adb[_0x4843a8(0x1f7)]=_0x32bd7c[_0x4843a8(0xc7)];try{await _0x4b2adb[_0x4843a8(0x209)]();}catch(_0x42c2cd){logger['debug'](_0x4843a8(0xa7)+_0x42c2cd[_0x4843a8(0x10f)]());throw _0x42c2cd;}}function cloneDeep(_0x55b52b){const _0x247dc4=_0x2734d1;return JSON['parse'](JSON[_0x247dc4(0x125)](_0x55b52b));}async function getPortfolio(_0x14c133){const _0x26d10e=_0x2734d1;let _0x30539d=[],_0x17df98=[],_0x2c96d5=[],_0x367e5e;_0x14c133[_0x26d10e(0x112)]=decryptRSA(secure[_0x26d10e(0x13d)],_0x14c133[_0x26d10e(0x112)]),_0x14c133[_0x26d10e(0x1ac)]=decryptRSA(secure[_0x26d10e(0x13d)],_0x14c133[_0x26d10e(0x1ac)]);if(_0x14c133[_0x26d10e(0xc7)])_0x14c133[_0x26d10e(0xc7)]=decryptRSA(secure['privateKey'],_0x14c133['apiPassword']);if(_0x14c133['apiKey']!==_0x26d10e(0xaa)||_0x14c133[_0x26d10e(0x1ac)]!==_0x26d10e(0xaa)||_0x14c133[_0x26d10e(0xc7)]&&_0x14c133[_0x26d10e(0xc7)]!==_0x26d10e(0xaa)){if(config[_0x26d10e(0x111)]){if(_0x14c133['apiKey']==_0x26d10e(0xaa))_0x14c133[_0x26d10e(0x112)]=config[_0x26d10e(0x112)];if(_0x14c133['apiSecret']==_0x26d10e(0xaa))_0x14c133[_0x26d10e(0x1ac)]=config['apiSecret'];if(_0x14c133[_0x26d10e(0xc7)]==_0x26d10e(0xaa))_0x14c133[_0x26d10e(0xc7)]=config['apiPassword'];}try{await testAPI(_0x14c133);}catch(_0x4190f7){if(_0x4190f7[_0x26d10e(0x10f)]()['includes']('AuthenticationError')){logHistory(_0x26d10e(0x214),_0x26d10e(0x1d6)),proxyEmit(_0x26d10e(0xec),![]);return;}else{logHistory(_0x26d10e(0x214),_0x26d10e(0x1bf)),logger['debug'](_0x26d10e(0x1f4),_0x4190f7),proxyEmit(_0x26d10e(0xec),![]);return;}}exchange?updateExchange(_0x14c133['apiKey'],_0x14c133[_0x26d10e(0x1ac)],_0x14c133['apiPassword']):await initExchange(_0x14c133[_0x26d10e(0x111)],_0x14c133[_0x26d10e(0x112)],_0x14c133[_0x26d10e(0x1ac)],_0x14c133[_0x26d10e(0xc7)]);await loadSymbols();const _0x5995fc=await getCoins(0x0,![],_0x14c133[_0x26d10e(0x12a)]);_0x2c96d5=cloneDeep(_0x5995fc[0x1]);}else{const _0x32695f=await getCoins();_0x2c96d5=cloneDeep(_0x32695f[0x1]);}if(_0x14c133[_0x26d10e(0x12a)]=='')proxyEmit(_0x26d10e(0xec),!![]),proxyEmit(_0x26d10e(0xca),_0x2c96d5);else{_0x2c96d5[_0x26d10e(0x1b0)](_0x66f6a6=>{const _0x3cd406=_0x26d10e;if(_0x66f6a6[_0x3cd406(0xb3)]!=_0x14c133[_0x3cd406(0x12a)]&&allSymbols[_0x3cd406(0x104)](_0x66f6a6[_0x3cd406(0xd6)]))_0x30539d[_0x3cd406(0x1be)](_0x66f6a6['symbol']);});if(_0x30539d[_0x26d10e(0x181)]==0x0)logHistory(_0x26d10e(0x214),_0x26d10e(0x18e));else{try{_0x17df98=await getTickers(_0x30539d);}catch(_0x1b2d88){logHistory(_0x26d10e(0x214),_0x26d10e(0x1bf)),logger[_0x26d10e(0x138)]('Error\x20details\x20(1):',_0x1b2d88),proxyEmit('portfolio1',![]);return;}_0x2c96d5[_0x26d10e(0x1b0)](_0x54295c=>{const _0x2dcaef=_0x26d10e;_0x54295c[_0x2dcaef(0xb3)]!=_0x14c133[_0x2dcaef(0x12a)]?_0x17df98[_0x54295c[_0x2dcaef(0xd6)]]?_0x367e5e=_0x54295c[_0x2dcaef(0x10b)]?0x1/_0x17df98[_0x54295c[_0x2dcaef(0xd6)]][_0x2dcaef(0x14f)]:_0x17df98[_0x54295c[_0x2dcaef(0xd6)]][_0x2dcaef(0x14f)]:_0x367e5e=0x0:_0x367e5e=0x1,_0x54295c[_0x2dcaef(0x24d)]=formatResult(_0x367e5e,0x8);}),await getMarketCap(_0x2c96d5),proxyEmit(_0x26d10e(0xec),!![]),proxyEmit(_0x26d10e(0xca),_0x2c96d5);}}}function truncateTradeAmount(_0x3b0f23,_0x53a887){const _0x5e5ebd=_0x2734d1;let _0x3a8102=0x0;try{_0x3a8102=exchange[_0x5e5ebd(0x1ae)](_0x3b0f23,_0x53a887);}catch(_0x25a2d2){}return _0x3a8102;}function checkMinimums(_0x4228a9){const _0x266c94=_0x2734d1;let _0x4be761=!![];const _0xe9a0d1=!_0x4228a9[_0x266c94(0x10b)]?markets[_0x4228a9[_0x266c94(0xd6)]][_0x266c94(0x196)][_0x266c94(0x218)][_0x266c94(0x135)]:markets[_0x4228a9['symbol']]['limits'][_0x266c94(0x9e)][_0x266c94(0x135)],_0x216a88=!_0x4228a9[_0x266c94(0x10b)]?markets[_0x4228a9['symbol']][_0x266c94(0x196)][_0x266c94(0x9e)][_0x266c94(0x135)]:markets[_0x4228a9['symbol']][_0x266c94(0x196)]['amount'][_0x266c94(0x135)],_0x4aade1=truncateTradeAmount(_0x4228a9[_0x266c94(0xd6)],_0x4228a9['trade']);_0x4228a9[_0x266c94(0x239)]=_0x4aade1;if(Math[_0x266c94(0xce)](_0x4aade1)<_0xe9a0d1)_0x4be761=![];if(Math[_0x266c94(0xce)](_0x4aade1)*_0x4228a9[_0x266c94(0x14f)]<_0x216a88)_0x4be761=![];if(_0x4228a9[_0x266c94(0x1b1)]==_0x266c94(0x164)){let _0x4f886b=config[_0x266c94(0xae)]['find'](_0x41efdd=>_0x41efdd['coin']==_0x4228a9[_0x266c94(0xb3)]);if(_0x4f886b[_0x266c94(0x1e2)]>0x0){if(Math[_0x266c94(0xce)](_0x4aade1)>_0x4228a9[_0x266c94(0x23c)]-_0x4f886b[_0x266c94(0x1e2)])_0x4be761=![];}else{if(Math['abs'](_0x4aade1)>_0x4228a9[_0x266c94(0x23c)])_0x4be761=![];}}if(_0x4228a9[_0x266c94(0x1b1)]=='buy'){let _0x270146=config['portfolio'][_0x266c94(0x23d)](_0x12203c=>_0x12203c[_0x266c94(0xb3)]==config[_0x266c94(0x12a)]),_0xc451a6=currentCoins[_0x266c94(0x23d)](_0x18127f=>_0x18127f[_0x266c94(0xb3)]==config[_0x266c94(0x12a)]);if(_0x270146[_0x266c94(0x1e2)]>0x0){if(Math[_0x266c94(0xce)](_0x4aade1)*_0x4228a9[_0x266c94(0x14f)]>_0xc451a6['number']-_0x270146['offset'])_0x4be761=![];}else{if(Math[_0x266c94(0xce)](_0x4aade1)*_0x4228a9[_0x266c94(0x14f)]>_0xc451a6[_0x266c94(0x23c)])_0x4be761=![];}}return _0x4be761;}async function getBalances(_0x56e84c=!![]){const _0x5e220a=_0x2734d1;let _0x292de1=0x0,_0x54df55;const _0x4b1bc9=config[_0x5e220a(0xb0)];if(config[_0x5e220a(0x130)]&&config[_0x5e220a(0x16a)]<0x0)await validate24hChanges();currentCoins[_0x5e220a(0x1b0)](_0x13f450=>{const _0x27af75=_0x5e220a;if(_0x13f450['coin']!=config[_0x27af75(0x12a)]){let _0x4a8ab2=gTicker[noslash(_0x13f450[_0x27af75(0xd6)])];_0x54df55=_0x13f450[_0x27af75(0x10b)]?0x1/_0x4a8ab2:_0x4a8ab2;}else _0x54df55=0x1;let _0x5b3dac=_0x13f450[_0x27af75(0x23c)]*_0x54df55;_0x292de1+=_0x5b3dac,_0x13f450[_0x27af75(0x14f)]=formatResult(Number(_0x54df55),0x8),_0x13f450['value']=_0x5b3dac;}),currentCoins['forEach'](_0x400b21=>{const _0xd36393=_0x5e220a;let _0x23f143=config[_0xd36393(0xae)][_0xd36393(0x23d)](_0x4a97c2=>_0x4a97c2[_0xd36393(0xb3)]==_0x400b21[_0xd36393(0xb3)]),_0x508abd=Number(_0x23f143['distribution']),_0x114de3=_0x400b21['value']/_0x292de1*0x64,_0x21dfc2=_0x508abd*_0x292de1/0x64/_0x400b21[_0xd36393(0x14f)]-_0x400b21['number'];_0x400b21[_0xd36393(0x1c3)]=formatResult(_0x114de3,0x3),_0x400b21['target']=formatResult(_0x508abd,0x3),_0x400b21[_0xd36393(0x239)]=formatResult(_0x21dfc2,0x8),_0x400b21[_0xd36393(0x1b1)]='',_0x400b21[_0xd36393(0x16f)]=![];if(_0x400b21[_0xd36393(0xb3)]!=config['basecoin']){if(_0x400b21[_0xd36393(0x1c3)]>_0x508abd)_0x400b21['side']=_0xd36393(0x164),_0x400b21[_0xd36393(0x16f)]=checkMinimums(_0x400b21);else _0x400b21[_0xd36393(0x1c3)]<_0x508abd&&(_0x400b21['side']=_0xd36393(0x1cc),_0x400b21[_0xd36393(0x16f)]=checkMinimums(_0x400b21));}_0x400b21[_0xd36393(0x1ab)]=_0x400b21[_0xd36393(0x1c3)]/_0x400b21[_0xd36393(0x113)]-0x1;if(_0x400b21[_0xd36393(0x15f)]==_0xd36393(0x20d)||_0x400b21['orderstatus']==_0xd36393(0x150))_0x400b21['orderstatus']='none';}),currentCoins[_0x5e220a(0x92)]((_0x5d9cda,_0x143f1f)=>_0x5d9cda[_0x5e220a(0x1ab)]<_0x143f1f[_0x5e220a(0x1ab)]?0x1:_0x143f1f['delta']<_0x5d9cda['delta']?-0x1:0x0);const _0x5c8103=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5c8103[_0x5e220a(0x148)],'usd':_0x5c8103[_0x5e220a(0x213)],'portfolio':JSON[_0x5e220a(0x125)](currentCoins),'threshold':_0x4b1bc9},proxyEmit(_0x5e220a(0x1c0),{'serverversion':serverversion,'balances':lastBalances});if(_0x56e84c){if(config[_0x5e220a(0x130)])headlessMode({'portfolio':currentCoins,'threshold':_0x4b1bc9});else{if(lockOrders==ORDERS[_0x5e220a(0x13b)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4b1bc9});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3f7562=getNormalizedPerformance();getStartingBalances(_0x3f7562),emitPerformance(_0x3f7562);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x53207f=_0x2734d1;if(!lastBalances)return;let _0x214ecb=[],_0x550b1f,_0x19c3ec=JSON[_0x53207f(0x137)](lastBalances[_0x53207f(0xae)]);_0x19c3ec['sort']((_0x3bd1e9,_0xba95b0)=>_0x3bd1e9['coin']>_0xba95b0['coin']?0x1:_0xba95b0[_0x53207f(0xb3)]>_0x3bd1e9['coin']?-0x1:0x0),_0x19c3ec['forEach'](_0x35c478=>{const _0x442299=_0x53207f;let _0x99c74d={'coin':_0x35c478['coin'],'number':_0x35c478[_0x442299(0x23c)],'price':_0x35c478[_0x442299(0x14f)]};_0x214ecb[_0x442299(0x1be)](_0x99c74d);});const _0x12efca=await getFiat();_0x550b1f={'date':lastBalances[_0x53207f(0xb5)][_0x53207f(0xdf)]('\x20')[0x0],'eur':_0x12efca[_0x53207f(0x148)],'usd':_0x12efca[_0x53207f(0x213)],'coins':_0x214ecb};let _0x1da0d8=dbPerformance[_0x53207f(0x16b)](_0x53207f(0x1e6))[_0x53207f(0x23d)]({'date':_0x550b1f['date']})['value']();_0x1da0d8?_0x550b1f[_0x53207f(0xa4)]!=config[_0x53207f(0x157)]&&dbPerformance[_0x53207f(0x16b)](_0x53207f(0x1e6))[_0x53207f(0x23d)]({'date':_0x550b1f[_0x53207f(0xa4)]})[_0x53207f(0x115)](_0x550b1f)['write']():dbPerformance['get'](_0x53207f(0x1e6))[_0x53207f(0x1be)](_0x550b1f)[_0x53207f(0x22b)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x51b2a4=_0x2734d1;let _0x4a55d4=[];if(dbPerformance[_0x51b2a4(0x12d)](_0x51b2a4(0x1e6))[_0x51b2a4(0x151)]()){let _0x30959d=dbPerformance['get']('data')[_0x51b2a4(0xfd)]()[_0x51b2a4(0x9f)](_0x1f8c09=>{const _0x6a587=_0x51b2a4;if(_0x1f8c09[_0x6a587(0xe5)]['length']==0x0)return![];else return!![];})[_0x51b2a4(0x188)](_0x51b2a4(0xa4))['value'](),_0x5998a6=[...config['liquidity']];_0x5998a6[_0x51b2a4(0x92)]((_0x7421a3,_0x58a68a)=>_0x7421a3[_0x51b2a4(0xa4)]>_0x58a68a[_0x51b2a4(0xa4)]?-0x1:_0x58a68a[_0x51b2a4(0xa4)]>_0x7421a3[_0x51b2a4(0xa4)]?0x1:0x0);let _0x13a96d=0x1,_0x462dd0=[],_0x86b7f8=0x0;_0x30959d[_0x51b2a4(0x131)]()[_0x51b2a4(0x10b)]()[_0x51b2a4(0x1b0)]((_0xc2fedf,_0x2a1d8d)=>{const _0x8063a2=_0x51b2a4;if(_0x5998a6[_0x86b7f8]){if(_0x30959d[_0x30959d[_0x8063a2(0x181)]-_0x2a1d8d]&&_0x5998a6[_0x86b7f8]['date']==_0x30959d[_0x30959d['length']-_0x2a1d8d]['date']){if(_0x2a1d8d<_0x30959d[_0x8063a2(0x181)]){let _0x3279db=0x0,_0x2e01d5=0x0;_0x30959d[_0x30959d[_0x8063a2(0x181)]-_0x2a1d8d][_0x8063a2(0xe5)][_0x8063a2(0x1b0)](_0x3af547=>{const _0x1f864c=_0x8063a2;_0x2e01d5+=_0x3af547[_0x1f864c(0x23c)]*_0x3af547[_0x1f864c(0x24d)];}),_0x5998a6[_0x86b7f8]['changes'][_0x8063a2(0x1b0)](_0x25d345=>{const _0x3836ce=_0x8063a2;_0x3279db+=_0x25d345['number']*_0x25d345[_0x3836ce(0x24d)];}),_0x13a96d*=_0x3279db/(_0x2e01d5-_0x3279db)+0x1;}_0x86b7f8++;}}let _0x43a006=0x0;_0xc2fedf[_0x8063a2(0xe5)]['forEach'](_0x23d8aa=>{const _0xaec9dd=_0x8063a2;_0x43a006+=_0x23d8aa[_0xaec9dd(0x23c)]*_0x23d8aa['price'];}),_0x462dd0[_0x30959d[_0x8063a2(0x181)]-_0x2a1d8d-0x1]=_0x43a006*(_0x13a96d-0x1);});let _0x1487c1=[];_0x5998a6=[...config['liquidity']]||[];let _0x377e94=0x0;_0x86b7f8=0x0,_0x30959d[_0x51b2a4(0x1b0)]((_0x264a61,_0x2850f4)=>{const _0x466b82=_0x51b2a4;if(_0x5998a6[_0x86b7f8]){const _0x1853dd=fns['parse'](_0x5998a6[_0x86b7f8][_0x466b82(0xa4)],_0x466b82(0xd0),new Date()),_0x3e8a6b=fns[_0x466b82(0x137)](_0x264a61[_0x466b82(0xa4)],'yyyy/MM/dd',new Date());if(fns[_0x466b82(0x17c)](_0x1853dd,_0x3e8a6b)){let _0xaaa295=0x0;_0x5998a6[_0x86b7f8][_0x466b82(0x190)][_0x466b82(0x1b0)](_0x440052=>{const _0x40d04c=_0x466b82;!_0x1487c1[_0x440052[_0x40d04c(0xb3)]]?_0x1487c1[_0x440052[_0x40d04c(0xb3)]]=_0x440052['number']:(_0xaaa295=_0x1487c1[_0x440052[_0x40d04c(0xb3)]],_0x1487c1[_0x440052[_0x40d04c(0xb3)]]+=_0x440052[_0x40d04c(0x23c)]);const _0x493064=_0x264a61['coins'][_0x40d04c(0x23d)](_0x11aad0=>_0x11aad0[_0x40d04c(0xb3)]==_0x440052[_0x40d04c(0xb3)]);(!_0x493064||_0x493064['number']==0x0)&&(_0x377e94+=(-_0x440052['number']-_0xaaa295)*_0x440052['price']);}),_0x86b7f8++;}}_0x264a61[_0x466b82(0xe5)][_0x466b82(0x1b0)]((_0x4fb026,_0x33cb45)=>{const _0x6fbb0d=_0x466b82;_0x1487c1[_0x4fb026[_0x6fbb0d(0xb3)]]&&(_0x4fb026[_0x6fbb0d(0xde)]=_0x1487c1[_0x4fb026['coin']]);}),_0x4a55d4['push']({'date':_0x264a61[_0x466b82(0xa4)],'eur':_0x264a61[_0x466b82(0x148)],'usd':_0x264a61[_0x466b82(0x213)],'offset':_0x462dd0[_0x2850f4],'netoffset':_0x377e94,'coins':_0x264a61['coins']});});}return _0x4a55d4;}function emitPerformance(_0x5301f){const _0x53517b=_0x2734d1;_0x5301f['length']!==0x0?(proxyEmit(_0x53517b(0x1d2),_0x5301f),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x2d9667,_0x2096ac){const _0x447f97=_0x2734d1;let _0xa851c4=0x0,_0x7648b9=0x0,_0x5322db=0x0;_0x2d9667[_0x447f97(0xe5)][_0x447f97(0x1b0)](_0x1a2608=>{const _0x5e5941=_0x447f97;_0xa851c4+=_0x1a2608[_0x5e5941(0x23c)]*_0x1a2608[_0x5e5941(0x24d)];});_0x2096ac&&(_0xa851c4+=_0x2d9667[_0x447f97(0x1e2)]);if(config[_0x447f97(0x12a)]===_0x447f97(0xbf)||config[_0x447f97(0x12a)]==='ETH'||config['basecoin']===_0x447f97(0xcd))_0x7648b9=_0xa851c4*_0x2d9667[_0x447f97(0x148)],_0x5322db=_0xa851c4*_0x2d9667[_0x447f97(0x213)];else{if(usdBasecoins['includes'](config['basecoin']))_0x7648b9=_0xa851c4*_0x2d9667[_0x447f97(0x148)]/_0x2d9667[_0x447f97(0x213)],_0x5322db=_0xa851c4;else config[_0x447f97(0x12a)]===_0x447f97(0x94)&&(_0x7648b9=_0xa851c4,_0x5322db=_0xa851c4*_0x2d9667[_0x447f97(0x213)]/_0x2d9667[_0x447f97(0x148)]);}return[_0xa851c4,_0x7648b9,_0x5322db];}function getKPIs(_0x19bcb2,_0x5b3ac9=_0x2734d1(0x94)){const _0x4bf3c0=_0x2734d1,_0x42e704=config[_0x4bf3c0(0x12a)],_0x5df7a7=lastBalances,_0x2df039=currentCoins,_0x59720a=getNormalizedPerformance(),_0xf9920b=_0x19bcb2==='basecoin'?_0x42e704:_0x19bcb2===_0x4bf3c0(0x19a)||_0x19bcb2==='net-fiat'?_0x5b3ac9:_0x4bf3c0(0x258)+_0x42e704,_0x2654f1=_0x19bcb2===_0x4bf3c0(0x20b)?_0x4bf3c0(0x1a9):_0x19bcb2===_0x4bf3c0(0xa9)?_0x4bf3c0(0x1a9):_0xf9920b+'\x20value',_0x2fff6e=_0x19bcb2===_0x4bf3c0(0x20b)||_0x19bcb2===_0x4bf3c0(0xa9)?_0x4bf3c0(0x1a9):_0xf9920b+_0x4bf3c0(0xc2);let _0x35d2f0=0x0;_0x2df039[_0x4bf3c0(0x1b0)](_0xdf9389=>{const _0x3183d3=_0x4bf3c0;_0x35d2f0+=_0xdf9389[_0x3183d3(0x23c)]*_0xdf9389['last'];});if(_0x19bcb2===_0x4bf3c0(0x19a)||_0x19bcb2===_0x4bf3c0(0xa9)){if(_0x42e704===_0x4bf3c0(0xbf)||_0x42e704===_0x4bf3c0(0xff)||_0x42e704===_0x4bf3c0(0xcd))_0x35d2f0=_0x35d2f0*(_0x5b3ac9==='EUR'?_0x5df7a7[_0x4bf3c0(0x148)]:_0x5df7a7['usd']);else{if(usdBasecoins[_0x4bf3c0(0x104)](_0x42e704))_0x35d2f0=_0x35d2f0*(_0x5b3ac9==='EUR'?_0x5df7a7[_0x4bf3c0(0x148)]/_0x5df7a7[_0x4bf3c0(0x213)]:0x1);else _0x42e704===_0x4bf3c0(0x94)&&(_0x35d2f0=_0x35d2f0*(_0x5b3ac9===_0x4bf3c0(0x94)?0x1:_0x5df7a7[_0x4bf3c0(0x213)]/_0x5df7a7[_0x4bf3c0(0x148)]));}}let _0x3ad1aa;if(_0x35d2f0!==0x0){if(_0x19bcb2==='basecoin')_0x3ad1aa=(_0x35d2f0/startingBalances[_0x4bf3c0(0x12a)]-0x1)*0x64;else{if(_0x5b3ac9===_0x4bf3c0(0x94))_0x3ad1aa=(_0x35d2f0/startingBalances[_0x4bf3c0(0x148)]-0x1)*0x64;else _0x3ad1aa=(_0x35d2f0/startingBalances[_0x4bf3c0(0x213)]-0x1)*0x64;}let _0x34f1c5=0x0;if(startingBalances[_0x4bf3c0(0xe5)])_0x2df039[_0x4bf3c0(0x1b0)](_0x5d9e5c=>{const _0x460a3c=_0x4bf3c0;let _0xb61f6=startingBalances['coins'][_0x460a3c(0x23d)](_0x2a4f12=>_0x2a4f12[_0x460a3c(0xb3)]===_0x5d9e5c[_0x460a3c(0xb3)]);if(_0xb61f6&&_0xb61f6[_0x460a3c(0xb3)]&&_0x5d9e5c[_0x460a3c(0x23c)]!==0x0)_0x34f1c5+=_0xb61f6['number']*_0x5d9e5c[_0x460a3c(0x14f)];});let _0x33a86b=0x0;if(_0x59720a['length']!==0x0){let _0x5042a6=_0x59720a[_0x59720a['length']-0x1];_0x33a86b=_0x5042a6[_0x4bf3c0(0x14c)];}_0x34f1c5-=_0x33a86b;_0x19bcb2===_0x4bf3c0(0x20b)&&(_0x3ad1aa=(_0x35d2f0-_0x34f1c5)/startingBalances[_0x4bf3c0(0x12a)]*0x64,_0x35d2f0=_0x35d2f0-_0x34f1c5);if(_0x19bcb2===_0x4bf3c0(0xa9)){let _0x225f3b=_0x5b3ac9===_0x4bf3c0(0x94)?startingBalances[_0x4bf3c0(0x148)]:startingBalances['usd'];if(_0x42e704===_0x4bf3c0(0xbf)||_0x42e704==='ETH'||_0x42e704===_0x4bf3c0(0xcd))_0x34f1c5=_0x5b3ac9===_0x4bf3c0(0x94)?_0x34f1c5*_0x5df7a7[_0x4bf3c0(0x148)]:_0x34f1c5*_0x5df7a7[_0x4bf3c0(0x213)];else{if(usdBasecoins['includes'](_0x42e704))_0x34f1c5=_0x5b3ac9===_0x4bf3c0(0x94)?_0x34f1c5*_0x5df7a7[_0x4bf3c0(0x148)]/_0x5df7a7['usd']:_0x34f1c5;else _0x42e704==='EUR'&&(_0x34f1c5=_0x5b3ac9===_0x4bf3c0(0x94)?_0x34f1c5:_0x34f1c5*_0x5df7a7[_0x4bf3c0(0x213)]/_0x5df7a7[_0x4bf3c0(0x148)]);}_0x3ad1aa=(_0x35d2f0-_0x34f1c5)/_0x225f3b*0x64,_0x35d2f0=_0x35d2f0-_0x34f1c5;}if(_0x3ad1aa){if(_0x3ad1aa<0x64)_0x3ad1aa=_0x3ad1aa[_0x4bf3c0(0x198)](0x2);else{if(_0x3ad1aa<0x3e8)_0x3ad1aa=_0x3ad1aa['toFixed'](0x1);else _0x3ad1aa=_0x3ad1aa[_0x4bf3c0(0x198)](0x0);}}else _0x3ad1aa=Number('0')[_0x4bf3c0(0x198)](0x2);if(_0x35d2f0){if(Math[_0x4bf3c0(0xce)](_0x35d2f0)<0.000001)_0x35d2f0=_0x35d2f0[_0x4bf3c0(0x198)](0x2);else{if(Math['abs'](_0x35d2f0)<0.1)_0x35d2f0=_0x35d2f0[_0x4bf3c0(0x198)](0x6);else{if(Math['abs'](_0x35d2f0)<0x1)_0x35d2f0=_0x35d2f0[_0x4bf3c0(0x198)](0x5);else{if(Math[_0x4bf3c0(0xce)](_0x35d2f0)<0xa)_0x35d2f0=_0x35d2f0['toFixed'](0x4);else{if(Math[_0x4bf3c0(0xce)](_0x35d2f0)<0x64)_0x35d2f0=_0x35d2f0[_0x4bf3c0(0x198)](0x3);else{if(Math[_0x4bf3c0(0xce)](_0x35d2f0)<0x3e8)_0x35d2f0=_0x35d2f0['toFixed'](0x2);else _0x35d2f0=_0x35d2f0[_0x4bf3c0(0x198)](0x2);}}}}}}else _0x35d2f0=Number('0')[_0x4bf3c0(0x198)](0x2);}else _0x3ad1aa=Number('0')[_0x4bf3c0(0x198)](0x2);return{'value':_0x35d2f0,'change':_0x3ad1aa,'leftTxt':_0x2654f1,'rightTxt':_0x2fff6e};}async function getStartingBalances(_0x3db49b,_0x434e58=!![]){const _0x231e1c=_0x2734d1;if(_0x3db49b[_0x231e1c(0x181)]!==0x0){const [_0x3204bd,_0x10d410,_0x3c3a75]=getPerf(_0x3db49b[0x0],!![]);let _0x4e6e69=[];config[_0x231e1c(0xae)][_0x231e1c(0x1b0)](_0x591cc7=>{const _0x23dcb8=_0x231e1c;let _0x17177e=0x0,_0x33c1ab;config['liquidity'][_0x23dcb8(0x1b0)](_0x1fe10d=>{const _0x21da87=_0x23dcb8;let _0x4c4d63=_0x1fe10d[_0x21da87(0x190)][_0x21da87(0x23d)](_0x3af855=>_0x3af855[_0x21da87(0xb3)]==_0x591cc7[_0x21da87(0xb3)]);if(_0x4c4d63){_0x17177e+=_0x4c4d63[_0x21da87(0x23c)];if(!_0x33c1ab)_0x33c1ab=_0x4c4d63[_0x21da87(0x24d)];}}),_0x4e6e69[_0x23dcb8(0x1be)]({'coin':_0x591cc7['coin'],'number':_0x17177e,'initialprice':_0x33c1ab});});const _0x5ace30={'basecoin':_0x3204bd,'eur':_0x10d410,'usd':_0x3c3a75,'coins':_0x4e6e69};if(_0x434e58)proxyEmit(_0x231e1c(0x147),_0x5ace30);startingBalances=_0x5ace30;}}function headlessMode(_0x5ca4ef){const _0x47d075=_0x2734d1;let _0x1332d0=_0x5ca4ef[_0x47d075(0xae)],_0x1a4d1c=_0x5ca4ef[_0x47d075(0xb0)],_0x2db999=[];for(let _0x73ec2b of _0x1332d0){if(_0x73ec2b[_0x47d075(0xb3)]!=config[_0x47d075(0x12a)]){if(_0x73ec2b[_0x47d075(0x1ab)]>=_0x1a4d1c/0x64){if(_0x73ec2b['valid'])_0x2db999[_0x47d075(0x1be)](_0x73ec2b);}else{if(_0x73ec2b[_0x47d075(0x1ab)]<=-_0x1a4d1c/0x64){if(_0x73ec2b[_0x47d075(0x16f)])_0x2db999[_0x47d075(0x1be)](_0x73ec2b);}}}}_0x2db999[_0x47d075(0x181)]>0x0&&(lockOrders==ORDERS[_0x47d075(0x13b)]&&!coolingDown&&_0x2db999[_0x47d075(0x1b0)](_0x3ee5df=>{const _0x240fa9=_0x47d075;logger[_0x240fa9(0x138)](_0x240fa9(0xe3)+_0x3ee5df[_0x240fa9(0xb3)]+'\x20'+_0x3ee5df[_0x240fa9(0x23c)]+'\x20'+_0x3ee5df[_0x240fa9(0x14f)]+'\x20'+_0x3ee5df['distribution']+'%\x20'+_0x3ee5df[_0x240fa9(0x113)]+'%\x20'+(0x64*_0x3ee5df['delta'])[_0x240fa9(0x198)](0x2)+_0x240fa9(0x103)+_0x1a4d1c[_0x240fa9(0x198)](0x2)+'%)');}),placeOrder(_0x2db999));}function notifyBalance(_0x2367c0){const _0x16b2f6=_0x2734d1;let _0x384329=_0x2367c0['portfolio'],_0x945c9c=_0x2367c0['threshold'],_0x384e22=[];for(let _0x2f43bb of _0x384329){if(_0x2f43bb[_0x16b2f6(0xb3)]!=config['basecoin']){if(_0x2f43bb[_0x16b2f6(0x1ab)]>=_0x945c9c/0x64){if(_0x2f43bb['valid'])_0x384e22[_0x16b2f6(0x1be)](_0x2f43bb);}else{if(_0x2f43bb[_0x16b2f6(0x1ab)]<=-_0x945c9c/0x64){if(_0x2f43bb['valid'])_0x384e22['push'](_0x2f43bb);}}}}if(_0x384e22['length']>0x0){let _0xedb297=_0x384e22[_0x16b2f6(0x186)](_0x440aa1=>_0x440aa1[_0x16b2f6(0xb3)]);_0xedb297['sort']();let _0x80c309=_0xedb297[_0x16b2f6(0x242)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x16b2f6(0x228));lastCoinsToBalance=_0x80c309;}}function symbolToCoin(_0x165bc9){const _0x5928fb=_0x2734d1;let _0x427af1;if(_0x165bc9['includes']('/'+config['basecoin']))_0x427af1=_0x165bc9['replace']('/'+config[_0x5928fb(0x12a)],'');if(_0x165bc9[_0x5928fb(0x104)](config['basecoin']+'/'))_0x427af1=_0x165bc9[_0x5928fb(0x1c8)](config['basecoin']+'/','');return _0x427af1;}async function unlockOrders(_0x2f0284=![]){const _0x155725=_0x2734d1;if(allOrdersPlaced&&lockOrders==ORDERS[_0x155725(0x165)]){logger['debug'](_0x155725(0x90)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x2f0284){const _0xf9bbd=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xf9bbd,setBlockTransactionDetection(![]);}validateOrdersState=_0x155725(0xde),persistOpenOrders([]),lockOrders=ORDERS[_0x155725(0x13b)],logger[_0x155725(0x138)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x48ea1f){const _0x58b7a9=_0x2734d1;if(_0x48ea1f)validateOrdersState=_0x48ea1f;logger[_0x58b7a9(0x138)](_0x58b7a9(0x160)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x58b7a9(0x1b7):lockOrders==0x2?'ORDERS.UNLOCKING':_0x58b7a9(0xc5)));let _0x5cfc41=[],_0x596a88=config['ordertype']==_0x58b7a9(0x20f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x58b7a9(0x9d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x58b7a9(0x138)](_0x58b7a9(0x19c)+validateOrdersState),lastOrders[_0x58b7a9(0x1b0)](_0x2a268a=>{const _0x1d2807=_0x58b7a9;let _0x267442=![];_0x2a268a['filled']>0x0&&(_0x267442=!![]),_0x5cfc41[_0x1d2807(0x1be)](_0x267442),_0x267442&&config[_0x1d2807(0xfa)]!=_0x1d2807(0x20f)&&logHistory('order',_0x1d2807(0x168)+_0x2a268a[_0x1d2807(0xd6)]+'\x20'+_0x2a268a[_0x1d2807(0x1b1)]+'\x20#'+formatResult(_0x2a268a[_0x1d2807(0x20d)],0x8)+'\x20@'+formatResult(_0x2a268a['price'],0x8));}),_0x5cfc41[_0x58b7a9(0x1b0)]((_0x4b8651,_0x2619d2)=>{if(_0x4b8651)lastOrders['splice'](_0x2619d2,0x1);}),persistOpenOrders(lastOrders);const _0x5edad5=coolingDown?_0x58b7a9(0x120):'balancing\x20resumed';if(validateOrdersState==_0x58b7a9(0xde)){validateOrdersState=_0x58b7a9(0x127);if(_0x5cfc41[_0x58b7a9(0x104)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5cfc41['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x58b7a9(0x231))_0x5cfc41[_0x58b7a9(0x104)](![])&&(config[_0x58b7a9(0xfa)]==_0x58b7a9(0x20f)?logHistory(_0x58b7a9(0xf6),_0x58b7a9(0x13f)+Math[_0x58b7a9(0x175)](_0x596a88*validateOrderInterval/0xea60)+_0x58b7a9(0x1a7)+_0x5edad5):(await cancelOrders(),logHistory(_0x58b7a9(0xf6),_0x58b7a9(0x12c)+Math['round'](_0x596a88*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5edad5))),await unlockOrders(!![]);else{if(validateOrdersState==_0x58b7a9(0x1ff)){if(config[_0x58b7a9(0xfa)]!='market')logHistory(_0x58b7a9(0xf6),'No\x20more\x20open\x20orders\x20-\x20'+_0x5edad5);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xb33219=_0x2734d1;lastOrders[_0xb33219(0x1b0)](async _0xac69f2=>{const _0x17a9fe=_0xb33219;try{const _0x398984=await exchange[_0x17a9fe(0x21b)](_0xac69f2['orderId'],_0xac69f2['symbol']);}catch(_0x35abae){if(_0x35abae[_0x17a9fe(0x10f)]()[_0x17a9fe(0x104)](_0x17a9fe(0xbb))){}else await handleError(_0x35abae,_0x17a9fe(0x1dc));}});}async function initCoinResults(_0x35f25e){const _0x249f52=_0x2734d1;_0x35f25e?logger[_0x249f52(0x138)](_0x249f52(0x126)+_0x35f25e):logger[_0x249f52(0x138)](_0x249f52(0x14d)),config['portfolio'][_0x249f52(0x1b0)](_0x36cbc=>{const _0x248445=_0x249f52;if(!_0x36cbc[_0x248445(0x1ba)]&&_0x36cbc['coin']!=config[_0x248445(0x12a)]){const _0x53074d=currentCoins[_0x248445(0x23d)](_0x1eee9b=>_0x1eee9b[_0x248445(0xb3)]==_0x36cbc[_0x248445(0xb3)]),_0x58437d=gTicker[noslash(_0x36cbc[_0x248445(0xd6)])];let _0x1dbf1a=_0x53074d?_0x53074d[_0x248445(0x23c)]:null,_0x21de2b=_0x36cbc[_0x248445(0x10b)]?0x1/_0x58437d:_0x58437d,_0x1d1faf;config['liquidity'][_0x248445(0x1b0)](_0x33a8f0=>{const _0x35d66c=_0x248445;!_0x1d1faf&&(_0x1d1faf=_0x33a8f0[_0x35d66c(0x190)]['find'](_0x410253=>_0x410253['coin']==_0x36cbc['coin']),_0x1d1faf&&(_0x1dbf1a=_0x1d1faf[_0x35d66c(0x23c)],_0x21de2b=_0x1d1faf[_0x35d66c(0x24d)]));});let _0x53b2bc=dbCoinResults[_0x248445(0x16b)](_0x248445(0xe5))['find']({'coin':_0x36cbc[_0x248445(0xb3)]})[_0x248445(0x151)]();if(!_0x53b2bc){const _0x53afd2={'coin':_0x36cbc[_0x248445(0xb3)],'number':_0x1dbf1a,'breakeven':_0x21de2b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x248445(0x16b)](_0x248445(0xe5))[_0x248445(0x1be)](_0x53afd2)[_0x248445(0x22b)]();}else{if(_0x35f25e&&_0x36cbc[_0x248445(0xb3)]==_0x35f25e){const _0x279cd6={'coin':_0x36cbc[_0x248445(0xb3)],'number':_0x1dbf1a,'breakeven':_0x21de2b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x248445(0x16b)](_0x248445(0xe5))['find']({'coin':_0x36cbc[_0x248445(0xb3)]})[_0x248445(0x115)](_0x279cd6)['write']();}}}});}async function updateCoinResults(_0x432de,_0x22bad6=![]){const _0x705476=_0x2734d1;let _0x5803ee,_0x572946,_0x2e9b0f,_0x53e8ff,_0x465020,_0x3f3372,_0x18d253=dbCoinResults[_0x705476(0x16b)]('coins')['find']({'coin':_0x432de[_0x705476(0xb3)]})[_0x705476(0x151)](),_0x123de8=![];_0x18d253&&Object['entries'](_0x18d253)['forEach'](([_0x2dc04c,_0x50650c])=>{if(_0x50650c==null)_0x123de8=!![];});(!_0x18d253||_0x123de8)&&(await initCoinResults(_0x432de[_0x705476(0xb3)]),_0x18d253=dbCoinResults['get'](_0x705476(0xe5))[_0x705476(0x23d)]({'coin':_0x432de['coin']})[_0x705476(0x151)]());_0x432de[_0x705476(0x10b)]&&(_0x3f3372={'filled':_0x432de[_0x705476(0x20d)]*_0x432de[_0x705476(0x24d)],'amount':_0x432de['filled']*_0x432de[_0x705476(0x24d)],'side':_0x432de[_0x705476(0x1b1)]=='sell'?_0x705476(0x1cc):'sell','price':0x1/_0x432de[_0x705476(0x24d)]},_0x432de={..._0x432de,..._0x3f3372});_0x22bad6?_0x572946=_0x432de[_0x705476(0x1b1)]=='buy'?_0x18d253[_0x705476(0x23c)]+_0x432de[_0x705476(0x20d)]:_0x18d253['number']-_0x432de['filled']:_0x572946=await getCoinNumber(_0x432de[_0x705476(0xb3)]);if(_0x432de[_0x705476(0xf0)]&&_0x432de[_0x705476(0xf0)][_0x705476(0x1bd)]==config['basecoin'])_0x5803ee=Number(_0x432de[_0x705476(0xf0)][_0x705476(0x9e)]);else{if(_0x432de['fee']&&_0x432de['fee'][_0x705476(0x1bd)]==_0x705476(0x184)&&!_0x22bad6&&config['basecoin']!=_0x705476(0xcd))_0x5803ee=Number(_0x432de[_0x705476(0xf0)][_0x705476(0x9e)])*gTicker['BNB'+config[_0x705476(0x12a)]];else _0x5803ee=defaultFee*_0x432de[_0x705476(0x20d)]*_0x432de['price'];}_0x432de[_0x705476(0x1b1)]==_0x705476(0x1cc)?(_0x2e9b0f=_0x572946!=0x0?(_0x18d253[_0x705476(0x1ea)]*_0x18d253[_0x705476(0x23c)]+_0x432de[_0x705476(0x24d)]*(_0x572946-_0x18d253[_0x705476(0x23c)])+_0x5803ee)/_0x572946:0x0,_0x53e8ff=_0x18d253[_0x705476(0x1a0)]):(_0x2e9b0f=_0x572946!=0x0?(_0x18d253['breakeven']*_0x18d253[_0x705476(0x23c)]-_0x432de[_0x705476(0x24d)]*(_0x18d253[_0x705476(0x23c)]-_0x572946)+_0x5803ee)/_0x572946:0x0,_0x53e8ff=_0x18d253[_0x705476(0x1a0)]+(_0x432de[_0x705476(0x24d)]-_0x18d253[_0x705476(0x1ea)])*_0x432de['filled']);_0x465020=(_0x432de[_0x705476(0x24d)]-_0x2e9b0f-_0x5803ee/_0x432de[_0x705476(0x20d)])*_0x572946;let _0x1de353={'coin':_0x432de[_0x705476(0xb3)],'number':_0x572946,'breakeven':formatResult(_0x2e9b0f,0x8),'realized':formatResult(_0x53e8ff,0x8),'unrealized':formatResult(_0x465020,0x8),'fees':formatResult(_0x18d253[_0x705476(0x1e4)]+_0x5803ee,0x8),'sells':_0x432de[_0x705476(0x1b1)]==_0x705476(0x164)?_0x18d253[_0x705476(0x1e9)]+0x1:_0x18d253[_0x705476(0x1e9)],'buys':_0x432de[_0x705476(0x1b1)]==_0x705476(0x1cc)?_0x18d253[_0x705476(0xa6)]+0x1:_0x18d253[_0x705476(0xa6)]};dbCoinResults[_0x705476(0x16b)]('coins')[_0x705476(0x23d)]({'coin':_0x432de[_0x705476(0xb3)]})[_0x705476(0x115)](_0x1de353)[_0x705476(0x22b)]();if(!_0x22bad6){if(_0x432de[_0x705476(0xf0)]&&_0x432de[_0x705476(0xf0)][_0x705476(0x1bd)]=='BNB'){const _0x442a06=currentCoins[_0x705476(0x23d)](_0x224f23=>_0x224f23['coin']==_0x705476(0x184));if(_0x442a06){let _0x3af7c5=dbCoinResults[_0x705476(0x16b)](_0x705476(0xe5))[_0x705476(0x23d)]({'coin':_0x705476(0x184)})[_0x705476(0x151)]();_0x1de353={..._0x3af7c5,'number':_0x442a06[_0x705476(0x23c)]},dbCoinResults[_0x705476(0x16b)]('coins')[_0x705476(0x23d)]({'coin':_0x705476(0x184)})[_0x705476(0x115)](_0x1de353)['write']();}}}}async function placeOrder(_0x4367db){const _0x19a48a=_0x2734d1,_0xa16001=config[_0x19a48a(0xfa)]==_0x19a48a(0x20f)?_0x19a48a(0x20f):_0x19a48a(0xa0);if(lockOrders==ORDERS[_0x19a48a(0x13b)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x19a48a(0x165)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x19a48a(0xde);let _0x27e2bd=![];lastOrders=[];for(const _0x286e63 of _0x4367db){let _0x502951,_0x42c7d7,_0x39a298,_0x1958e7,_0x1b47d7,_0x226d27=_0x286e63[_0x19a48a(0xd6)];try{const _0x4a1b9b=await exchange['fetchTicker'](_0x226d27);_0x502951=_0x286e63[_0x19a48a(0x10b)]?0x1/_0x286e63[_0x19a48a(0x14f)]:_0x286e63[_0x19a48a(0x14f)],_0x42c7d7=_0x4a1b9b[_0x19a48a(0xeb)],_0x39a298=_0x4a1b9b[_0x19a48a(0x1bc)];_0x286e63[_0x19a48a(0x10b)]?(_0x1958e7=_0x286e63[_0x19a48a(0x1b1)]=='buy'?_0x19a48a(0x164):_0x19a48a(0x1cc),_0x1b47d7=Math[_0x19a48a(0xce)](_0x286e63[_0x19a48a(0x239)])/_0x502951):(_0x1958e7=_0x286e63['side'],_0x1b47d7=Math[_0x19a48a(0xce)](_0x286e63[_0x19a48a(0x239)]));_0xa16001==_0x19a48a(0xa0)&&(config[_0x19a48a(0xfa)]==_0x19a48a(0x23f)&&(_0x502951=_0x1958e7=='buy'?_0x42c7d7:_0x39a298),config[_0x19a48a(0xfa)]==_0x19a48a(0xb9)&&(_0x502951=_0x1958e7==_0x19a48a(0x1cc)?_0x39a298:_0x42c7d7));_0x1b47d7=formatResult(_0x1b47d7,0x8),_0x502951=formatResult(_0x502951,0x8);const _0x35326a=_0x1958e7==_0x19a48a(0x164)?config[_0x19a48a(0x219)]?String['fromCodePoint']('0x'+config[_0x19a48a(0x219)])+'\x20':'':config[_0x19a48a(0x199)]?String[_0x19a48a(0x1e8)]('0x'+config[_0x19a48a(0x199)])+'\x20':'',_0x34dba3=_0xa16001==_0x19a48a(0x20f)?_0x19a48a(0x1de):config[_0x19a48a(0xfa)]==_0x19a48a(0x23f)?_0x19a48a(0x25a):_0x19a48a(0x180),_0x1c3a76=(Math[_0x19a48a(0x132)](Math[_0x19a48a(0x254)]()*0x35a4e900)+0x5f5e100)[_0x19a48a(0x10f)]();lastOrders[_0x19a48a(0x1be)]({'customId':_0x1c3a76,'symbol':_0x226d27,'coin':_0x286e63[_0x19a48a(0xb3)],'amount':_0x1b47d7,'price':_0x502951,'side':_0x1958e7,'reverse':_0x286e63[_0x19a48a(0x10b)],'filled':0x0});if(_0xa16001==_0x19a48a(0x20f))logHistory('order',''+_0x35326a+_0x34dba3+_0x19a48a(0xa3)+_0x226d27+'\x20'+_0x1958e7+'\x20#'+formatResult(_0x1b47d7,0x8)+'\x20@'+formatResult(_0x502951,0x8));else logHistory(_0x19a48a(0x1b9),''+_0x35326a+_0x34dba3+_0x19a48a(0xa3)+_0x226d27+'\x20'+_0x1958e7+'\x20#'+formatResult(_0x1b47d7,0x8)+'\x20@'+formatResult(_0x502951,0x8));let _0x54aab0;_0xa16001==_0x19a48a(0x20f)?_0x1958e7==_0x19a48a(0x1cc)&&['Bybit',_0x19a48a(0x189),_0x19a48a(0x129),_0x19a48a(0x205),_0x19a48a(0x173)][_0x19a48a(0x104)](config[_0x19a48a(0x111)])?_0x54aab0=await exchange[_0x19a48a(0x171)](_0x226d27,_0xa16001,_0x1958e7,_0x1b47d7,_0x502951):_0x54aab0=await exchange[_0x19a48a(0x171)](_0x226d27,_0xa16001,_0x1958e7,_0x1b47d7,undefined):_0x54aab0=await exchange[_0x19a48a(0x171)](_0x226d27,_0xa16001,_0x1958e7,_0x1b47d7,_0x502951);logger[_0x19a48a(0x138)](_0x19a48a(0x253)+_0x54aab0['id']+_0x19a48a(0xa2)+_0x1c3a76);const _0x487d21=lastOrders[_0x19a48a(0x181)]-0x1;if(_0x487d21>=0x0&&lastOrders[_0x487d21][_0x19a48a(0x22f)]==_0x1c3a76){lastOrders[_0x487d21][_0x19a48a(0xc8)]=_0x54aab0['id'];if(_0x54aab0[_0x19a48a(0x218)])lastOrders[_0x487d21][_0x19a48a(0x218)]=_0x54aab0[_0x19a48a(0x218)];if(_0x54aab0[_0x19a48a(0x24d)])lastOrders[_0x487d21]['price']=_0x54aab0['price'];lastOrders[_0x487d21][_0x19a48a(0xf0)]=_0x54aab0['fee'];}if(config['cooldown']!=0x0){let _0x4f81bd=null;if(cooldownTracker[_0x19a48a(0x181)]==config['cooldown']-0x1)_0x4f81bd=cooldownTracker[_0x19a48a(0xaf)]();const _0x48111b=getTimeStamp();cooldownTracker['push'](_0x48111b);if(_0x4f81bd){const _0x523a63=fns['differenceInSeconds'](new Date(_0x48111b),new Date(_0x4f81bd));if(_0x523a63<cooldownInterval){logHistory(_0x19a48a(0x214),'Executed\x20'+config[_0x19a48a(0x1eb)]+_0x19a48a(0xf2)+cooldownInterval/0x3c+_0x19a48a(0x1a2)+cooldownPeriod/(0xe10*0x3e8)+_0x19a48a(0xef)),coolingDown=!![];break;}}}}catch(_0x546918){if(_0x546918['toString']()[_0x19a48a(0x104)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x19a48a(0x9f)](_0xa5a612=>_0xa5a612[_0x19a48a(0xd6)]!=_0x226d27),logHistory(_0x19a48a(0x214),_0x19a48a(0xe7)+_0x226d27),_0x27e2bd=!![];else{if(_0x546918['toString']()[_0x19a48a(0x104)](_0x19a48a(0x1e7)))lastOrders=lastOrders['filter'](_0xa64e30=>_0xa64e30[_0x19a48a(0xd6)]!=_0x226d27),logHistory(_0x19a48a(0x214),_0x19a48a(0xd7)+_0x226d27),_0x27e2bd=!![];else{if(_0x546918['toString']()[_0x19a48a(0x104)](_0x19a48a(0xa5)))lastOrders=lastOrders[_0x19a48a(0x9f)](_0x39579c=>_0x39579c[_0x19a48a(0xd6)]!=_0x226d27),logHistory(_0x19a48a(0x214),'Order\x20is\x20invalid:\x20'+_0x226d27),logger[_0x19a48a(0x138)](_0x546918),_0x27e2bd=!![];else _0x546918['toString']()[_0x19a48a(0x104)](_0x19a48a(0x204))?(lastOrders=lastOrders[_0x19a48a(0x9f)](_0x4f08a3=>_0x4f08a3[_0x19a48a(0xd6)]!=_0x226d27),logHistory(_0x19a48a(0x214),_0x19a48a(0xe7)+_0x226d27),_0x27e2bd=!![]):(lastOrders=lastOrders[_0x19a48a(0x9f)](_0xd462df=>_0xd462df[_0x19a48a(0xd6)]!=_0x226d27),await handleError(_0x546918,_0x19a48a(0x140),_0x226d27));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x19a48a(0x181)]>0x0){const _0x54f47e=config[_0x19a48a(0xfa)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x302e5e=_0x19a48a;validateOrders(_0x302e5e(0x231));},_0x54f47e);}else unlockOrders();_0x27e2bd&&config[_0x19a48a(0x130)]&&(logHistory('error',_0x19a48a(0xab)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x19a48a(0xf6),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x19a48a(0x130)]&&logHistory(_0x19a48a(0x214),_0x19a48a(0x133));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x19a48a(0x130)]&&(config[_0x19a48a(0xfa)]==_0x19a48a(0x20f)?logHistory(_0x19a48a(0x214),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x19a48a(0x214),_0x19a48a(0x202))));}}function persistOpenOrders(_0x4456c3){const _0x2ff680=_0x2734d1,_0x561222={...config,'openOrders':_0x4456c3};let _0x271575=dbConfig['get'](_0x2ff680(0x23b))[_0x2ff680(0x23d)]({'botID':botID})[_0x2ff680(0x151)]();_0x271575&&dbConfig[_0x2ff680(0x16b)](_0x2ff680(0x23b))[_0x2ff680(0x23d)]({'botID':botID})[_0x2ff680(0x115)](_0x561222)[_0x2ff680(0x22b)]();}function restoreOrders(){const _0x191e8d=_0x2734d1;let _0x43fcfe;config[_0x191e8d(0x1bb)]&&allOpenOrders[_0x191e8d(0x1b0)](_0x459a20=>{const _0x1d46a1=_0x191e8d,_0x965237=config[_0x1d46a1(0x1bb)]['find'](_0x44d5e6=>_0x44d5e6[_0x1d46a1(0xc8)]==_0x459a20['id']);_0x965237&&(lastOrders[_0x1d46a1(0x1be)](_0x965237),_0x43fcfe=_0x459a20[_0x1d46a1(0x11c)]);});if(lastOrders[_0x191e8d(0x181)]>0x0){lockOrders=ORDERS[_0x191e8d(0x165)],validateOrdersState=_0x191e8d(0x127),allOrdersPlaced=!![];const _0x3c8b79=new Date()['getTime'](),_0x5af68b=config[_0x191e8d(0xfa)]==_0x191e8d(0x20f)?validateOrderTimeout*0x3c*0x3e8:config[_0x191e8d(0x9d)]*0x3c*0x3e8;if(_0x43fcfe+_0x5af68b>_0x3c8b79){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1d440d=_0x191e8d;validateOrders(_0x1d440d(0x231));},_0x43fcfe+_0x5af68b-_0x3c8b79);}else validateOrders(_0x191e8d(0x231));}}async function sendMetricsTelegram(){const _0x388354=_0x2734d1;if(!coinsLoaded){process[_0x388354(0x226)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4f1447=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x10bb96='';if(config[_0x388354(0x1cb)])_0x10bb96='<b>'+config[_0x388354(0x107)]+_0x388354(0x18d);else _0x10bb96=_0x388354(0x97)+botID+_0x388354(0x18d);const _0x453d58=getKPIs('basecoin'),_0xa1572d=getKPIs(_0x388354(0x19a),config[_0x388354(0x19a)]),_0x1c529f=getKPIs(_0x388354(0x20b)),_0x421a98=getKPIs(_0x388354(0xa9),config['fiat']);_0x10bb96+=_0x388354(0x259),_0x10bb96+=_0x453d58[_0x388354(0x161)]+_0x388354(0x24a)+_0x453d58[_0x388354(0x151)]+'\x0a',_0x10bb96+=_0x453d58[_0x388354(0x1a3)]+':\x20'+_0x453d58['change']+'%\x0a',_0x10bb96+=_0xa1572d['leftTxt']+_0x388354(0x24a)+_0xa1572d[_0x388354(0x151)]+'\x0a',_0x10bb96+=_0xa1572d[_0x388354(0x1a3)]+':\x20'+_0xa1572d[_0x388354(0xc3)]+'%\x0a',_0x10bb96+=_0x1c529f[_0x388354(0x161)]+':\x20'+_0x1c529f['value']+'\x20('+config[_0x388354(0x12a)]+')\x0a',_0x10bb96+=_0x1c529f[_0x388354(0x1a3)]+':\x20'+_0x1c529f[_0x388354(0xc3)]+_0x388354(0x103)+config[_0x388354(0x12a)]+')\x0a',_0x10bb96+=_0x421a98[_0x388354(0x161)]+':\x20'+_0x421a98['value']+'\x20('+config['fiat']+')\x0a',_0x10bb96+=_0x421a98[_0x388354(0x1a3)]+':\x20'+_0x421a98[_0x388354(0xc3)]+'%\x20('+config[_0x388354(0x19a)]+')\x0a',_0x10bb96+='</pre>',process['send']({'telegrammsg':_0x10bb96},_0x3744ba=>{});}async function sendPortfolioTelegram(){const _0xc9de30=_0x2734d1;if(!coinsLoaded||!currentCoins[0x0][_0xc9de30(0x1c3)]){process[_0xc9de30(0x226)]({'telegrammsg':_0xc9de30(0x232)},_0x31fbf3=>{});return;}let _0x5eaa0f='';if(config[_0xc9de30(0x1cb)])_0x5eaa0f=_0xc9de30(0x18f)+config[_0xc9de30(0x107)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x5eaa0f=_0xc9de30(0x97)+botID+_0xc9de30(0x1b5);_0x5eaa0f+=_0xc9de30(0x259),_0x5eaa0f+=_0xc9de30(0x1ca),_0x5eaa0f+=_0xc9de30(0x162),_0x5eaa0f+=_0xc9de30(0x1ca),currentCoins[_0xc9de30(0x1b0)](_0x54ae75=>{const _0x111ccd=_0xc9de30;_0x5eaa0f+=_0x54ae75[_0x111ccd(0xb3)][_0x111ccd(0x9c)](0x7)+'|\x20'+formatPad(_0x54ae75[_0x111ccd(0x1c3)],0x2,0x6)+'|\x20'+formatPad(_0x54ae75[_0x111ccd(0x113)],0x2,0x6)+'|\x20'+formatPad(_0x54ae75['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5eaa0f+=_0xc9de30(0x23e),process[_0xc9de30(0x226)]({'telegrammsg':_0x5eaa0f},_0x123abf=>{});}function formatPad(_0xdeb607,_0x250018,_0x51dc5a){const _0x1e63c7=_0x2734d1,_0x2af198=formatResultString(_0xdeb607,_0x250018);return _0x2af198?_0x2af198[_0x1e63c7(0x234)](_0x51dc5a):''[_0x1e63c7(0x234)](_0x51dc5a);}function logHistory(_0x4998a3,_0x531a21,_0x32407e=''){const _0x33d7eb=_0x2734d1;logger[_0x33d7eb(0x178)](''+_0x531a21);let _0x4f2882={'time':getTimeStamp(),'type':_0x4998a3,'event':_0x531a21};dbLogs[_0x33d7eb(0x16b)](_0x33d7eb(0x144))['push'](_0x4f2882)[_0x33d7eb(0x22b)]();if(_0x32407e=='')_0x32407e=_0x531a21;proxyEmit('event',{'log':_0x4f2882,'summary':_0x32407e}),process[_0x33d7eb(0x226)]({'telegram':{..._0x4f2882,'botname':config['botname'],'showname':config[_0x33d7eb(0x1cb)]}},_0x26534b=>{});}function emitHistory(_0x106378={}){const _0x21db86=_0x2734d1;Object['keys'](_0x106378)[_0x21db86(0x181)]==0x0&&(_0x106378={'type':[_0x21db86(0x1b9),_0x21db86(0xf1)],'event':'','page':0x1});if(_0x106378[_0x21db86(0xcc)][_0x21db86(0x104)](_0x21db86(0xf1)))_0x106378[_0x21db86(0xcc)][_0x21db86(0x230)](_0x106378['type'][_0x21db86(0x18a)]('event'),0x1,'error',_0x21db86(0xe8),'success');if(dbLogs['has'](_0x21db86(0x144))['value']()){let _0x205d12=dbLogs[_0x21db86(0x16b)](_0x21db86(0x144))[_0x21db86(0x9f)](_0x332946=>{const _0x4639e3=_0x21db86;if(_0x106378[_0x4639e3(0xcc)][_0x4639e3(0x181)]==0x0)return![];else return _0x106378['type'][_0x4639e3(0x104)](_0x332946[_0x4639e3(0xcc)]);})['filter'](_0x38b03c=>{const _0x2e9392=_0x21db86;if(_0x106378['event']=='')return!![];else return _0x38b03c[_0x2e9392(0xf1)][_0x2e9392(0x1fc)]()['includes'](_0x106378['event'][_0x2e9392(0x1fc)]());})[_0x21db86(0x188)](_0x21db86(0xb5)),_0x20dc0f=_0x205d12[_0x21db86(0x151)]()['length'];_0x205d12=_0x205d12[_0x21db86(0x10b)]()['slice']((_0x106378[_0x21db86(0x169)]-0x1)*logPageSize,_0x106378['page']*logPageSize-0x1)[_0x21db86(0x10b)]()[_0x21db86(0x151)](),proxyEmit(_0x21db86(0x117),{'logs':_0x205d12,'total':_0x20dc0f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x576c26){const _0x2ae933=_0x2734d1;if(dbLogs['has'](_0x2ae933(0x144))['value']()){const _0x56a4d3=dbLogs[_0x2ae933(0x16b)](_0x2ae933(0x144))[_0x2ae933(0x188)]('time')[_0x2ae933(0x9f)](_0x35e494=>{const _0xc95acb=_0x2ae933;return _0x35e494[_0xc95acb(0xcc)]==_0xc95acb(0x1b9);})['value']();dbLogs[_0x2ae933(0x16b)](_0x2ae933(0x144))[_0x2ae933(0x19e)]()[_0x2ae933(0x22b)](),dbLogs[_0x2ae933(0x16b)]('logs')[_0x2ae933(0x115)](_0x56a4d3)[_0x2ae933(0x22b)](),emitHistory(_0x576c26);}}async function pauseBot(_0x371ac0=pauseBotIntervalShort,_0x23edb8,_0x48f794,_0x5184a1=![]){const _0x48596d=_0x2734d1,_0x33fa2b=new Date()[_0x48596d(0x14b)]();if(!lastErrorShown||_0x33fa2b-lastErrorShown>=_0x371ac0){lastErrorShown=_0x33fa2b;if(!lastBotPause)lastBotPause=_0x33fa2b,consecutivePauses=0x1;else{if(_0x33fa2b-lastBotPause-_0x371ac0<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5184a1){logHistory(_0x48596d(0x214),_0x23edb8+_0x48596d(0x251)),await killBot();return;}else logHistory(_0x48596d(0x214),_0x23edb8+pauseBotMsg),_0x371ac0=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x33fa2b;}_0x48f794?logger['debug']('('+consecutivePauses+')\x20'+_0x23edb8+_0x48596d(0xf4),_0x48f794):logger['debug']('('+consecutivePauses+')\x20'+_0x23edb8);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x371ac0),botPaused=![],_0x371ac0==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2d3043=_0x2734d1;botPaused=!![],await sleep(0x3e8),process[_0x2d3043(0x226)]({'stop':_0x2d3043(0x146)},_0x29c382=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x12b220,_0x53f678){const _0x1b8694=_0x2734d1;if(botPaused)return;const _0x3f186e=config[_0x1b8694(0x111)]||_0x1b8694(0x10c);if(_0x53f678)logger[_0x1b8694(0x138)]('Exception\x20thrown\x20in\x20'+_0x53f678);const _0x476475=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x12b220[_0x1b8694(0x10f)]()[_0x1b8694(0x104)]('API-key\x20format\x20invalid'))logHistory('error',_0x3f186e+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x476475();else{if(_0x12b220[_0x1b8694(0x10f)]()[_0x1b8694(0x104)](_0x1b8694(0x1cf)))logHistory(_0x1b8694(0x214),_0x3f186e+_0x1b8694(0x191)),_0x476475();else{if(_0x12b220[_0x1b8694(0x10f)]()[_0x1b8694(0x104)](_0x1b8694(0xa8)))config[_0x1b8694(0xc7)]?errormsg=_0x3f186e+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':errormsg=_0x3f186e+_0x1b8694(0xf5),logHistory(_0x1b8694(0x214),errormsg+_0x1b8694(0x119)),_0x476475();else _0x12b220[_0x1b8694(0x10f)]()[_0x1b8694(0x104)]('PermissionDenied')?(logHistory(_0x1b8694(0x214),_0x3f186e+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x476475()):await handleError(_0x12b220,null);}}}async function handleError(_0x5150ff,_0x92935d,_0x10710a=''){const _0x193e98=_0x2734d1;if(botPaused)return;let _0x30a867;const _0x26be03=config[_0x193e98(0x111)]||_0x193e98(0x10c);if(_0x92935d)logger['debug']('Exception\x20thrown\x20in\x20'+_0x92935d);if(_0x5150ff[_0x193e98(0x10f)]()['includes'](_0x193e98(0x24c)))_0x30a867=_0x26be03+_0x193e98(0x22e),await pauseBot(undefined,_0x30a867,_0x5150ff);else{if(_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)](_0x193e98(0x1d4)))_0x30a867=_0x26be03+_0x193e98(0x170),await pauseBot(undefined,_0x30a867,_0x5150ff);else{if(_0x5150ff[_0x193e98(0x10f)]()['includes'](_0x193e98(0x1d8))||_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)](_0x193e98(0x142)))_0x30a867=_0x26be03+_0x193e98(0x244),await pauseBot(undefined,_0x30a867,_0x5150ff[_0x193e98(0x10f)]());else{if(_0x5150ff['toString']()[_0x193e98(0x104)](_0x193e98(0xb6)))_0x30a867=_0x26be03+_0x193e98(0x11d),await pauseBot(undefined,_0x30a867,_0x5150ff[_0x193e98(0x10f)]());else{if(_0x5150ff['toString']()[_0x193e98(0x104)](_0x193e98(0x11f)))_0x30a867=_0x26be03+_0x193e98(0x102),await pauseBot(undefined,_0x30a867,_0x5150ff[_0x193e98(0x10f)]());else{if(_0x5150ff['toString']()[_0x193e98(0x1fc)]()[_0x193e98(0x104)](_0x193e98(0x11c))||_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x1fc)]()['includes'](_0x193e98(0x17f)))_0x30a867='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x30a867,_0x5150ff[_0x193e98(0x10f)]());else{if(_0x5150ff[_0x193e98(0x10f)]()['includes'](_0x193e98(0x1d0)))_0x30a867=_0x26be03+_0x193e98(0x249),await pauseBot(undefined,_0x30a867,_0x5150ff[_0x193e98(0x10f)]());else{if(_0x5150ff instanceof ccxt[_0x193e98(0x255)])_0x30a867=_0x26be03+'\x20network\x20error:\x20'+_0x5150ff[_0x193e98(0x10f)](),logger[_0x193e98(0x138)](_0x193e98(0x105),_0x5150ff),await pauseBot(undefined,_0x30a867,_0x5150ff);else{if(_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)]('API-key\x20format\x20invalid'))logHistory(_0x193e98(0x214),_0x26be03+_0x193e98(0x13e)),logHistory('error',_0x193e98(0x197)),await killBot();else{if(_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)](_0x193e98(0x1cf)))logHistory(_0x193e98(0x214),_0x26be03+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x193e98(0x197)),await killBot();else{if(_0x5150ff['toString']()[_0x193e98(0x104)](_0x193e98(0xa8))&&_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)]('token\x20is\x20expired'))_0x30a867=_0x26be03+_0x193e98(0xcf),await pauseBot(undefined,_0x30a867,_0x5150ff,!![]);else{if(_0x5150ff[_0x193e98(0x10f)]()[_0x193e98(0x104)]('AuthenticationError'))config[_0x193e98(0xc7)]?_0x30a867=_0x26be03+_0x193e98(0x1e0):_0x30a867=_0x26be03+_0x193e98(0xf5),logHistory('error',_0x30a867),logHistory('error',_0x193e98(0x197)),await killBot();else{if(_0x5150ff['toString']()[_0x193e98(0x104)](_0x193e98(0x1b4)))logHistory(_0x193e98(0x214),_0x26be03+_0x193e98(0xe9)),logHistory(_0x193e98(0x214),_0x193e98(0x197)),await killBot();else{if(_0x5150ff['toString']()[_0x193e98(0x104)](_0x193e98(0x211)))logHistory(_0x193e98(0x214),_0x193e98(0x21c)+_0x10710a);else{if(_0x5150ff instanceof ccxt[_0x193e98(0x1fa)]){_0x30a867=_0x26be03+_0x193e98(0x1d1)+_0x5150ff['toString'](),logHistory(_0x193e98(0x214),_0x30a867),logger[_0x193e98(0x138)](_0x193e98(0x215),_0x5150ff);if(_0x10710a)logger[_0x193e98(0x138)](_0x193e98(0x192)+_0x10710a);await pauseBot(undefined,_0x30a867,_0x5150ff);}else{_0x30a867=_0x193e98(0x20c)+_0x5150ff[_0x193e98(0x10f)](),logHistory(_0x193e98(0x214),_0x30a867),logger[_0x193e98(0x138)](_0x30a867+'\x20>\x20details:',_0x5150ff);if(_0x10710a)logger[_0x193e98(0x138)](_0x193e98(0x192)+_0x10710a);await pauseBot(undefined,_0x30a867);}}}}}}}}}}}}}}}}function _0x1f5f(){const _0x2fb49f=['ongoing','watchTradesForSymbols','Cex','basecoin','toUpperCase','Unfilled\x20order(s)\x20canceled\x20after\x20','has','restart','version','headless','slice','floor','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','recent20','min','37384zlQMCC','parse','debug','storeFiat','getSeconds','UNLOCKED','loadMarkets','privateKey','\x20API\x20key\x20is\x20invalid','Order(s)\x20not\x20validated\x20after\x20','placeOrder()','marketcapEnabled','OnMaintenance','no\x20exchange\x20reloaded','logs','detectLiquidityChange()','kill','starting-balances','eur','pop','bb-secure.json','getTime','netoffset','Initializing\x20coin\x20results','timeshift','last','canceled','value','max','lowdb','/output-000.log','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','date-fns','startdate','2.3.5','message','closed','privateKeyFromPem',')\x20known\x20order:\x20','decode64','-config.json','orderstatus','1\x20-\x20Validate\x20orders:\x20','leftTxt','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getDate','sell','LOCKED','cancel','\x20>\x20','Order\x20filled:\x20','page','change24h','get','./config/','red_yellow_blue','bb-settings.json','valid','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','createOrder','set','Huobipro','Resuming\x20(','round','Valid\x20balance\x20for\x20','status','full','\x20uses\x20','onepagemode','marketcap','isEqual','percentage','USDC','request-time','Limit\x20(low-margin)','length','RETRY\x20-\x20Error\x20in\x20','1791867dhqDxt','BNB','pro','map','Initializing\x20exchange','sortBy','Bitget','indexOf','staging','apply','\x20metrics:</b>\x20\x0a\x0a','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','<b>','changes','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Symbol(s):\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','1\x20-\x20partially\x20FILLED\x20(','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','limits','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','toFixed','emojibuy','fiat','\x20attempts','2\x20-\x20Validate\x20orders:\x20','\x20|\x20','remove','9977470goHNMU','realized','Invalid\x20symbol:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','rightTxt',')\x20unknown\x20order:\x20','ccxt','***','\x20minutes\x20-\x20','average','Net\x20effect','enabled','delta','apiSecret','highest','amountToPrecision','basecoinvalue','forEach','side','placeOrder','configuration','PermissionDenied','\x20portfolio:</b>\x20\x0a\x0a','progress','ORDERS.LOCKED','constructor','order','excluded','openOrders','ask','currency','push','Unknown\x20error\x20-\x20check\x20logs','balances','node-forge','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','distribution','market_cap','entries','autoliquidity','coin-loading-progress','replace','001','-------------------------------\x0a','showname','buy','resetHistory','settings','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','InvalidNonce','\x20exchange\x20error:\x20','performance','sqrt','RateLimitExceeded','Invalid\x20balance\x20for\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','active','ExchangeNotAvailable','substring','USDT','path','cancelOrders()','datetime','Market','Loading\x20completed','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startsWith','offset','args','fees','Binance','data','Invalid\x20quantity','fromCodePoint','sells','breakeven','cooldown','2\x20-\x20handling\x20FILLED\x20order:\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','mkdirSync','heapUsed','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Portfolio\x20change\x20detected:\x20','watchTrades','initTickers()','Error\x20details\x20(0):','existsSync','quote','password','\x20minutes','remainingSymbols','ExchangeError','RETRY\x20-\x20Problem\x20resolved\x20after\x20','toLowerCase','startnumber','toggleBotMode','no\x20open\x20orders','colorscheme','.json','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','sha256','must\x20be\x20greater\x20than\x20minimum\x20amount','Huobi','deleteHistoryAlerts','watchOrders','Error\x20details:','fetchBalance','search','net-basecoin','Unknown\x20error:\x20','filled','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','market','Error\x20while\x20deleting\x20files:\x20','InsufficientFunds','USD','usd','error','Exchange\x20error\x20details:','\x20>\x20pausing\x20bot\x20for\x20','update-liquidity','amount','emojisell','sendPortfolioTelegram','cancelOrder','Insufficient\x20funds\x20to\x20execute\x20order:\x20','exec','RSA-OAEP','format','Loading\x20symbols','total','8tJyfKB','complete','getMonth','freeze','send','Stopped\x20fetching\x20balance\x20after\x20','Manual\x20balancing\x20required','getMinutes','defaults','write','\x20-\x20bot\x20not\x20started','1717578zGQENN','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','customId','splice','final','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','open','padStart','./version.json','status\x20code\x20401','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','running','trade','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','bot','number','find','</pre>','limit-high','cancelLoading','writeFile','join','getHours','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','argv','557825AgVOGo','function','none','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20:\x20','removed','DDoSProtection','price','Resetting\x20bot\x20history','Initializing\x20exchange:\x20already\x20done','/backup/','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Waited\x20','ID:\x20','random','NetworkError','Initiating\x20bot\x20restart','memoryUsage','Net\x20','<pre>','Limit\x20(high-margin)','storeHeadless','1\x20-\x20Unlocking\x20orders','secure','sort','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','EUR','bots','loading-canceled','<b>Bot\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','startprice','./logs/','-events.json','padEnd','timeout','cost','filter','limit','log','\x20|\x20Custom\x20ID:\x20','\x20order:\x20','date','InvalidOrder','buys','Error\x20in\x20testAPI():\x20','AuthenticationError','net-fiat','************','Avoiding\x20continuous\x20order\x20attempts','initclient','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','portfolio','shift','threshold','979828TGutNu','recovery','coin','-performance.json','time','RequestTimeout','fetchBalance()','liquidity','limit-low','1\x20-\x20FILLED\x20known\x20order:\x20','OrderNotFound','Reset\x20|\x20','-results.json','0\x20-\x20EXECUTION:\x20','BTC','create','Error:\x20Invalid\x20argument\x20','\x20change','change','BNB/','ORDERS.UNLOCKED','\x20|\x20exchange:\x20','apiPassword','orderId','createWriteStream','portfolio2','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','type','PAXG','abs','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','yyyy/MM/dd','emitHistory','yargs/yargs',':\x20timer\x20>','2.6.0','fetchTickers','symbol','Order\x20amount\x20is\x20invalid:\x20','added','Pausing\x20for\x20','fetchOpenOrders','lowdb/adapters/FileSync','botID','/EUR','initial','split','getOpenOrders()','TUSD','unlinkSync','Trigger:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','coins','code','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','warning','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','exchanges','bid','portfolio1','fetchTicker','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20hour','fee','event','\x20orders\x20in\x20less\x20than\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20>\x20details:','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','success','spot','uncaughtException','18PKaOEC','ordertype','bot-','switch-manual','cloneDeep','recreateCoinResults()','ETH','watchOrders()','Bybit','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','%\x20(','includes','Network\x20error\x20details:','\x20/\x20','botname','/USD','recreate','getPortfolio','reverse','Exchange','keys','slider','toString','marketcapApi','exchange','apiKey','target','getFullYear','assign','694593ESFiJa','event-history','pki','(see:\x20hodlerhacks.com/fix/1)','watchTrades()','2metOZZ','timestamp','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Fee\x20discount\x20refund\x20detected:\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','balancing\x20resumes\x20when\x20cooldown\x20ends','2.6.23','(((.+)+)+)+$','\x20>\x20[DEBUG]\x20','add','stringify','Resetting\x20coin\x20results:\x20'];_0x1f5f=function(){return _0x2fb49f;};return _0x1f5f();}function decryptRSA(_0x360000,_0x1a3a67){const _0x37d35d=_0x2734d1,_0x13e42c=forge[_0x37d35d(0x118)][_0x37d35d(0x15b)](_0x360000),_0x25b9e8=_0x13e42c['decrypt'](forge['util'][_0x37d35d(0x15d)](_0x1a3a67),_0x37d35d(0x21e),{'md':forge['md'][_0x37d35d(0x203)][_0x37d35d(0xc0)](),'mgf1':{'md':forge['md'][_0x37d35d(0x203)][_0x37d35d(0xc0)]()}});return _0x25b9e8;}async function withRetry(_0x3e26f8,_0x4257e6){const _0x54b030=_0x2734d1;let _0x5f27d3=![],_0x2959ea=0x0,_0x112bcc,_0x415e6b;while(_0x2959ea<maxRetries){try{_0x112bcc=await _0x4257e6();break;}catch(_0x1e86a3){_0x415e6b=_0x1e86a3,!_0x5f27d3?(_0x5f27d3=!![],logger[_0x54b030(0x138)](_0x54b030(0x182)+_0x3e26f8+':',_0x1e86a3[_0x54b030(0x10f)]())):await sleep(retryInterval);}_0x2959ea++;}if(_0x2959ea==0x0)return _0x112bcc;if(_0x2959ea>=maxRetries)throw _0x415e6b;else return logger[_0x54b030(0x138)](_0x54b030(0x1fb)+_0x2959ea+_0x54b030(0x19b)),_0x112bcc;}function formatResult(_0x56c55d,_0x310fbf){const _0x317cd4=_0x2734d1;return parseFloat(_0x56c55d[_0x317cd4(0x198)](_0x310fbf));}function formatResultTruncate(_0x2522a1,_0x2bf4c1){const _0x5f16cc=_0x2734d1;let _0x5ebb65=formatResultString(_0x2522a1,0xa),_0x2642d8=_0x5ebb65['indexOf']('.');return _0x2642d8!=-0x1&&(_0x5ebb65=_0x5ebb65[_0x5f16cc(0x131)](0x0,_0x2642d8+_0x2bf4c1+0x1)),Number(_0x5ebb65);}function formatResultString(_0x1da7b1,_0x49bd6c){const _0x470a23=_0x2734d1;let _0x23c511;if(!(''+_0x1da7b1)['includes']('e'))_0x23c511=+(Math['round'](_0x1da7b1+'e+'+_0x49bd6c)+'e-'+_0x49bd6c);else{let _0x4bfa7d=(''+_0x1da7b1)['split']('e'),_0x5a398d='';+_0x4bfa7d[0x1]+_0x49bd6c>0x0&&(_0x5a398d='+'),_0x23c511=+(Math[_0x470a23(0x175)](+_0x4bfa7d[0x0]+'e'+_0x5a398d+(+_0x4bfa7d[0x1]+_0x49bd6c))+'e-'+_0x49bd6c);}return Number(_0x23c511)[_0x470a23(0x198)](_0x49bd6c);}function getServerTime(){const _0xcad1=_0x2734d1,_0x1a6583=new Date();return _0x1a6583[_0xcad1(0x114)]()+'/'+(_0x1a6583[_0xcad1(0x224)]()+0x1)[_0xcad1(0x10f)]()['padStart'](0x2,'0')+'/'+_0x1a6583['getDate']()[_0xcad1(0x10f)]()['padStart'](0x2,'0')+'\x20'+_0x1a6583[_0xcad1(0x243)]()[_0xcad1(0x10f)]()[_0xcad1(0x234)](0x2,'0')+':'+_0x1a6583[_0xcad1(0x229)]()[_0xcad1(0x10f)]()['padStart'](0x2,'0')+':'+_0x1a6583[_0xcad1(0x13a)]()[_0xcad1(0x10f)]()[_0xcad1(0x234)](0x2,'0');}function getTimeStamp(){const _0xd879ef=_0x2734d1,_0x7983a2=shiftedTime();return _0x7983a2['getFullYear']()+'/'+(_0x7983a2['getMonth']()+0x1)[_0xd879ef(0x10f)]()['padStart'](0x2,'0')+'/'+_0x7983a2[_0xd879ef(0x163)]()[_0xd879ef(0x10f)]()[_0xd879ef(0x234)](0x2,'0')+'\x20'+_0x7983a2['getHours']()[_0xd879ef(0x10f)]()['padStart'](0x2,'0')+':'+_0x7983a2['getMinutes']()[_0xd879ef(0x10f)]()[_0xd879ef(0x234)](0x2,'0')+':'+_0x7983a2[_0xd879ef(0x13a)]()[_0xd879ef(0x10f)]()['padStart'](0x2,'0');}function getDate(){const _0x5a2960=_0x2734d1,_0x2a6407=shiftedTime();return _0x2a6407[_0x5a2960(0x114)]()+'/'+(_0x2a6407['getMonth']()+0x1)[_0x5a2960(0x10f)]()[_0x5a2960(0x234)](0x2,'0')+'/'+_0x2a6407[_0x5a2960(0x163)]()[_0x5a2960(0x10f)]()[_0x5a2960(0x234)](0x2,'0');}function getHour(){const _0x3e018f=_0x2734d1,_0x139a1b=shiftedTime();return _0x139a1b['getHours']()['toString']()[_0x3e018f(0x234)](0x2,'0');}function sleep(_0x1d3fda){return new Promise(_0x5b47bc=>setTimeout(_0x5b47bc,_0x1d3fda));}function shiftedTime(){const _0x141af3=_0x2734d1,_0x3238ac=new Date();let _0x3ec78c=_0x3238ac;if(config&&config[_0x141af3(0x14e)]!==0x0)_0x3ec78c=fns[_0x141af3(0x124)](_0x3238ac,{'hours':config[_0x141af3(0x14e)]});return _0x3ec78c;}function timer(_0x530feb){const _0x1da906=_0x2734d1,_0x192bb8=new Date();!lasttime?console[_0x1da906(0xa1)](getTimeStamp()+_0x1da906(0xd3),_0x530feb,_0x192bb8):console['log'](getTimeStamp()+_0x1da906(0xd3),_0x530feb,(_0x192bb8-lasttime)/0x3e8),lasttime=_0x192bb8;}