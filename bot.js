const _0x4cf01b=_0x5c0b;(function(_0x3363c9,_0x1f7527){const _0x1fcea0=_0x5c0b,_0x322082=_0x3363c9();while(!![]){try{const _0xcacda2=-parseInt(_0x1fcea0(0x238))/0x1*(parseInt(_0x1fcea0(0x138))/0x2)+parseInt(_0x1fcea0(0x250))/0x3+-parseInt(_0x1fcea0(0x1f8))/0x4*(-parseInt(_0x1fcea0(0x1fe))/0x5)+-parseInt(_0x1fcea0(0x188))/0x6+-parseInt(_0x1fcea0(0x228))/0x7+-parseInt(_0x1fcea0(0x168))/0x8*(-parseInt(_0x1fcea0(0x1ad))/0x9)+-parseInt(_0x1fcea0(0x1b3))/0xa*(-parseInt(_0x1fcea0(0x1f3))/0xb);if(_0xcacda2===_0x1f7527)break;else _0x322082['push'](_0x322082['shift']());}catch(_0x1dd9ba){_0x322082['push'](_0x322082['shift']());}}}(_0x3871,0xb359e));const _0x2befbe=function(){let _0x3cadd5=!![];return function(_0x2f8746,_0x39fb46){const _0x57bd17=_0x3cadd5?function(){const _0x1d67a2=_0x5c0b;if(_0x39fb46){const _0x218b21=_0x39fb46[_0x1d67a2(0xe2)](_0x2f8746,arguments);return _0x39fb46=null,_0x218b21;}}:function(){};return _0x3cadd5=![],_0x57bd17;};}(),_0x48612a=_0x2befbe(this,function(){const _0x2f5297=_0x5c0b;return _0x48612a[_0x2f5297(0x136)]()[_0x2f5297(0x21f)](_0x2f5297(0x1b0))[_0x2f5297(0x136)]()['constructor'](_0x48612a)[_0x2f5297(0x21f)]('(((.+)+)+)+$');});_0x48612a();'use strict';const ccxt=require(_0x4cf01b(0x135))[_0x4cf01b(0x1ab)],low=require(_0x4cf01b(0x1f4)),FileSync=require(_0x4cf01b(0xfd)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x4cf01b(0x11e))['Crypt'],util=require('util'),argv=require('yargs/yargs')(process['argv'][_0x4cf01b(0x17a)](0x2))['argv'],path=require(_0x4cf01b(0x151));let exchange;global[_0x4cf01b(0xf5)]={},global[_0x4cf01b(0x1e1)]={};const exceptions={'binance':[_0x4cf01b(0x1d0),_0x4cf01b(0x255),_0x4cf01b(0x19f),_0x4cf01b(0x159),'YOYOW/']},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x4cf01b(0xef))['version'],botID=process[_0x4cf01b(0x1bd)][0x2]||_0x4cf01b(0x1c5),pattern=/^[0-9]{3}$/;!pattern[_0x4cf01b(0x1f5)](botID)&&(console[_0x4cf01b(0x1aa)](_0x4cf01b(0x144)+botID+_0x4cf01b(0x1d9)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x4cf01b(0x1c1)+userID+'/':_0x4cf01b(0x1c1),logspath=userID?_0x4cf01b(0x1de)+userID+'/':_0x4cf01b(0x1de),loggerfile=fs[_0x4cf01b(0x114)](logspath+_0x4cf01b(0x1a5),{'flags':'a'});!fs[_0x4cf01b(0x18f)](configpath)&&fs[_0x4cf01b(0x152)](configpath);!fs[_0x4cf01b(0x18f)](logspath)&&fs[_0x4cf01b(0x152)](logspath);const configfile=configpath+_0x4cf01b(0x13a)+botID+_0x4cf01b(0x202),logfile=configpath+_0x4cf01b(0x13a)+botID+_0x4cf01b(0x11a),performancefile=configpath+'bot-'+botID+_0x4cf01b(0xe0),coinresultsfile=configpath+_0x4cf01b(0x13a)+botID+_0x4cf01b(0x13f),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4cf01b(0x166),configbackuppath=configpath+_0x4cf01b(0x231),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4cf01b(0x10a)]({'logs':[],'version':serverversion})[_0x4cf01b(0x129)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x4cf01b(0x129)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x3871(){const _0x2ca8ea=['ETH','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','open','add','remove','startdate','lowdb/adapters/FileSync','InvalidNonce','getOpenOrders()','\x20portfolio:</b>\x20\x0a\x0a','Initiating\x20exchange\x20reload','getDate','full','substring','botname','ORDERS.UNLOCKING','Unknown\x20error\x20occured','Resetting\x20bot\x20history','Bot\x20','defaults','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','%\x20(','startnumber','Executing\x20exchange\x20reload','customId','balances','portfolio','2\x20-\x20Orders\x20unlocked','createWriteStream','balancing\x20resumed','DDoSProtection','yyyy-MM-dd\x27T\x27HH:mm:ss','value','Binance','-events.json','error','Reset\x20|\x20','AuthenticationError','hybrid-crypto-js','basecoin','side','distribution','\x20exchange','event','No\x20more\x20open\x20orders\x20-\x20','find','USD','has','entries','write','Fee\x20discount\x20refund\x20detected:\x20','decrypt','password','coins','sortBy','logs','ORDERS.UNLOCKED','simple','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','max','\x20not\x20responding','ccxt','toString','\x20hour','20442zkborI','closed','bot-','openOrders','storeFiat','get','split','-results.json','</pre>','milliseconds','threshold','amountToPrecision','Error:\x20Invalid\x20argument\x20','additional\x20symbols\x20','round','\x20|\x20lock\x20orders:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','reverse','event-history','coin','offset','args','limits','Transaction\x20detection\x20blocked','change24h','path','mkdirSync','BNB/','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getPortfolio(0)','cancelOrder','removed','function','NANO/','cancelLoading','writeFile','timestamp','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','headless','sha256','onepagemode','3\x20-\x20handling\x20FILLED\x20order:\x20','filled','progress','\x20not\x20available','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','bb-secure.json','eur','24NMVPgg','cloneDeep','limit-low','valid','EUR','Order\x20filled:\x20','breakeven','send','configuration','enabled','splice','getMinutes','<b>','join','USDT',':\x20Bot\x20','length','set','slice','2.6.0','highest','\x20has\x20a\x2024h\x20drop\x20of\x20','BTC','clientOrderId','parseISO','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','no\x20additional\x20symbols','<pre>','MIN_NOTIONAL','\x20order:\x20','-------------------------------\x0a','orderstatus','6707682VXgdTA','toFixed','placeOrder','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','BUSD','sort','getSeconds','existsSync','bots','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','resetHistory','limit-high','status','coin-loading-progress','cooldown','concat','close','target','includes','floor','number','cost','order','XEM/BUSD','price','padStart','format','limit','fiat','/output-000.log','\x20orders\x20in\x20less\x20than\x20','data','net-basecoin','min','log','pro','final','1985895YVNZfI','net-fiat','starting-balances','(((.+)+)+)+$','indexOf','getFullYear','26921680SLKWwY','date','datetime','push','market','\x20|\x20','none','\x20API\x20secret\x20is\x20invalid','realized','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','argv','toLowerCase','sendPortfolioTelegram','forEach','./config/','trade','showname','Order\x20is\x20invalid:\x20','001','toUpperCase','Order\x20amount\x20is\x20invalid:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','Initializing\x20coin\x20results','ask','recovery','deleteHistoryAlerts','fetchBalance','excluded','must\x20be\x20greater\x20than\x20minimum\x20amount','DAI/','isEqual','***','fetchTickers','parse','OrderNotFound','settings','apiKey','filter',',\x20must\x20be\x20a\x203\x20digit\x20number','UNLOCKED','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','page','\x20-\x20bot\x20not\x20started','./logs/','ordertype','warning','change','added','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','2\x20-\x20Validate\x20orders:\x20','emojisell','fees','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','findIndex','time','getTime','starting-balance-','recent20','************','Market','\x20:\x20','1\x20-\x20Validate\x20orders:\x20','no\x20open\x20orders','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','11fokbVC','lowdb','test','Invalid\x20quantity','fee','12pQzypz','uncaughtException','/EUR','getPortfolio(2)','Exchange','average','177895jxJUiN','orderId','getHours','total','-config.json','initclient','debug','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','running','exchange\x20not\x20reloaded','ongoing','padEnd','bot','exchange\x20reloaded','buy','random','buys','startprice','InvalidOrder','createOrder','Cooldown\x20ended\x20-\x20balancing\x20resumed','getCoinNumber()','message','toggleBotMode','storeHeadless','exec','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','configuration-stored','apiSecret','1\x20-\x20Unlock\x20orders','Avoiding\x20continuous\x20order\x20attempts','loading-canceled','changes','search','sells','privateKey','storeConfiguration','map','getCoins()','sell','percentage','fetchClosedOrders','6387325UoEeWU','netoffset','currency','leftTxt','initial','last','remainingSymbols','Order(s)\x20not\x20validated\x20after\x20','watchOrders','/backup/','LOCKED','exchanges','amount','emojibuy','\x20minutes','stringify','139gpxRtJ','watchTrades','success','canceled','\x20minutes\x20-\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20closed\x20the\x20connection','BNB','recreateCoinResults()','cancel','fetchOpenOrders','Net\x20','ORDERS.LOCKED','Manual\x20balancing\x20required','performance','delta','getMonth','version','\x20metrics:</b>\x20\x0a\x0a','Net\x20effect','Pausing\x20for\x20','string','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','2\x20-\x20FILLED\x20unknown\x20order:\x20','2174679gigOYa','fetchTicker','ExchangeNotAvailable','getPortfolio(1)','apiPassword','HOT/BTC','\x20>\x20','2\x20-\x20FILLED\x20known\x20order:\x20','getStartingBalances','assign','2.5.0','rightTxt','loadSymbols()','fromCodePoint','<b>Bot\x20','symbol','Limit\x20(high-margin)','keys','1\x20-\x20Handle\x20open\x20orders','-performance.json','abs','apply','liquidity','restart','emitHistory','shift','API-key\x20format\x20invalid','timeshift','sendMetricsTelegram','\x20>\x20[DEBUG]\x20','usd','2.3.5','replace','yyyy/MM/dd','./version.json','exchange','timeout','unlinkSync','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Limit\x20(low-margin)','ticker','type'];_0x3871=function(){return _0x2ca8ea;};return _0x3871();}dbConfig[_0x4cf01b(0x10a)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4cf01b(0x10a)]({'coins':[],'version':serverversion})[_0x4cf01b(0x129)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4cf01b(0x15f),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xeba36f=>{console['log'](_0xeba36f);},'simple':_0x376339=>{const _0x20c19c=_0x4cf01b;console[_0x20c19c(0x1aa)](_0x376339),loggerfile[_0x20c19c(0x129)](util[_0x20c19c(0x1a2)](_0x376339)+'\x0a');},'full':async(_0x2b54d3,_0x3a4089='')=>{const _0x24e724=_0x4cf01b;let _0x1dd68c;if(config[_0x24e724(0x1c3)])_0x1dd68c=getTimeStamp()+':\x20'+config[_0x24e724(0x105)]+_0x24e724(0x256)+_0x2b54d3;else _0x1dd68c=getTimeStamp()+_0x24e724(0x177)+botID+_0x24e724(0x256)+_0x2b54d3;console[_0x24e724(0x1aa)](_0x1dd68c),loggerfile[_0x24e724(0x129)](util[_0x24e724(0x1a2)](_0x1dd68c)+'\x0a'),_0x3a4089&&(console['log'](_0x3a4089),loggerfile[_0x24e724(0x129)](util['format'](_0x3a4089)+'\x0a'));},'debug':async(_0x1480f6,_0x53efb8='')=>{const _0x12c5d4=_0x4cf01b;let _0x374a42;if(config[_0x12c5d4(0x1c3)])_0x374a42=getTimeStamp()+':\x20'+config[_0x12c5d4(0x105)]+'\x20>\x20[DEBUG]\x20'+_0x1480f6;else _0x374a42=getTimeStamp()+_0x12c5d4(0x177)+botID+_0x12c5d4(0xea)+_0x1480f6;if(debugging)console['log'](_0x374a42);loggerfile['write'](util[_0x12c5d4(0x1a2)](_0x374a42)+'\x0a');if(_0x53efb8){if(debugging)console[_0x12c5d4(0x1aa)](_0x53efb8);loggerfile[_0x12c5d4(0x129)](util[_0x12c5d4(0x1a2)](_0x53efb8)+'\x0a');}}};process['on'](_0x4cf01b(0x1f9),function(_0x3bebac){const _0x38360c=_0x4cf01b;logger[_0x38360c(0x131)](_0x3bebac);});settings['timeshift']!=config[_0x4cf01b(0xe8)]&&updateTimeshift(settings[_0x4cf01b(0xe8)]);settings[_0x4cf01b(0x160)]!=config[_0x4cf01b(0x160)]&&updateOnepagemode(settings[_0x4cf01b(0x160)]);process['send']({'started':_0x4cf01b(0x206)},_0x1e2a62=>{}),initializeProcessListeners();function proxyEmit(_0x34a8c3,_0x15df87=null){process['send']({'function':_0x34a8c3,'args':_0x15df87},_0x138cbc=>{});}function initializeProcessListeners(){process['on']('message',_0x421a96=>{const _0x398d83=_0x5c0b;switch(Object['keys'](_0x421a96)[0x0]){case'timeshift':_0x421a96[_0x398d83(0xe8)]!=undefined&&(settings[_0x398d83(0xe8)]=_0x421a96[_0x398d83(0xe8)],updateTimeshift(settings[_0x398d83(0xe8)]));break;case _0x398d83(0x160):_0x421a96[_0x398d83(0x160)]!=undefined&&(settings[_0x398d83(0x160)]=_0x421a96[_0x398d83(0x160)],updateOnepagemode(settings[_0x398d83(0x160)]));break;case'bots':_0x421a96[_0x398d83(0x190)]!=undefined&&(bots=JSON[_0x398d83(0x1d4)](_0x421a96[_0x398d83(0x190)]),proxyEmit(_0x398d83(0x190),bots));break;case _0x398d83(0x158):switch(_0x421a96[_0x398d83(0x158)]){case _0x398d83(0x203):initclient();break;case _0x398d83(0x215):toggleBotMode();break;case _0x398d83(0xe5):emitHistory(_0x421a96[_0x398d83(0x14d)]);break;case _0x398d83(0x1cc):deleteHistoryAlerts(_0x421a96[_0x398d83(0x14d)]);break;case'getPortfolio':getPortfolio(_0x421a96[_0x398d83(0x14d)]);break;case _0x398d83(0x222):storeConfiguration(_0x421a96['args']);break;case _0x398d83(0x216):storeHeadless(_0x421a96[_0x398d83(0x14d)]);break;case _0x398d83(0x13c):storeFiat(_0x421a96['args']);break;case _0x398d83(0x192):resetHistory();break;case _0x398d83(0x258):getStartingBalances(getNormalizedPerformance());break;case _0x398d83(0x18a):placeOrder(_0x421a96[_0x398d83(0x14d)]);break;case _0x398d83(0x15a):cancelLoading();break;case'showConfig':showConfig();break;case _0x398d83(0xe9):sendMetricsTelegram();break;case _0x398d83(0x1bf):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x51cefb=null,_0x3e0efd=![]){const _0x9f12c8=_0x4cf01b;logger[_0x9f12c8(0x204)](_0x9f12c8(0x11c)+(_0x51cefb&&_0x51cefb[_0x9f12c8(0x178)]>0x0?_0x9f12c8(0x145)+_0x51cefb[_0x9f12c8(0x175)](','):_0x9f12c8(0x182))+_0x9f12c8(0x1b8)+(_0x3e0efd?_0x9f12c8(0x20b):_0x9f12c8(0x207)));if(pidBalances)clearTimeout(pidBalances);if(!_0x3e0efd)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x9f12c8(0x1d7)]!=''&&config[_0x9f12c8(0x1d7)]!=_0x9f12c8(0x1d2)){if(_0x3e0efd){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xcf4b0e){handleErrorNoStop(_0xcf4b0e,_0x9f12c8(0xd9));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x51cefb);const _0x334998=await getCoins();[currentCoins,currentCoinsAll]=_0x334998,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x9f12c8(0x178)]==0x0&&allOpenOrders[_0x9f12c8(0x178)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3b3e84=_0x4cf01b;exchangeStopped=!![],await exchange[_0x3b3e84(0x198)]();}async function reloadExchange(){const _0x12827f=_0x4cf01b;logger[_0x12827f(0x204)](_0x12827f(0x101));while(lockOrders!=ORDERS[_0x12827f(0x1da)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x12827f(0x10f)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5d3705=config['exchange'],_0x3853e9=config[_0x4cf01b(0x1d7)],_0x53ef97=config[_0x4cf01b(0x21a)],_0x5cb3e5=config['apiPassword']){const _0x454445=_0x4cf01b;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x5d3705)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x5d3705+_0x454445(0x122)),killBot());const _0x5dbb0a=ccxt[_0x5d3705[_0x454445(0x1be)]()];exchange=new _0x5dbb0a({'apiKey':_0x3853e9,'secret':_0x53ef97,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x5cb3e5)exchange[_0x454445(0x12c)]=_0x5cb3e5;}function setStableCoins(){const _0x2fe4b1=_0x4cf01b;let _0x1df6d9=config['basecoin']==_0x2fe4b1(0xf7)?_0x2fe4b1(0xf7):_0x2fe4b1(0x17e),_0x150cb2=!allSymbols[_0x2fe4b1(0x19a)](_0x1df6d9+'/USD')?_0x2fe4b1(0x176):'USD',_0x3b0efb=!allSymbols[_0x2fe4b1(0x19a)](_0x1df6d9+_0x2fe4b1(0x1fa))?_0x150cb2:_0x2fe4b1(0x16c);stablecoins={'eur':{'coin':''+_0x1df6d9+_0x3b0efb,'symbol':_0x1df6d9+'/'+_0x3b0efb},'usd':{'coin':''+_0x1df6d9+_0x150cb2,'symbol':_0x1df6d9+'/'+_0x150cb2}};}async function initwsCcxt(_0x3578a9){const _0x4bf809=_0x4cf01b;_0x3578a9==null&&(_0x3578a9=[],config[_0x4bf809(0x112)][_0x4bf809(0x1c0)](_0x2a0452=>{const _0x3f9191=_0x4bf809;if(!_0x2a0452[_0x3f9191(0x1ce)]&&_0x2a0452[_0x3f9191(0x14b)]!=config['basecoin'])_0x3578a9[_0x3f9191(0x1b6)](_0x2a0452[_0x3f9191(0xdc)]);}));if(!_0x3578a9[_0x4bf809(0x19a)](stablecoins[_0x4bf809(0x167)][_0x4bf809(0xdc)]))_0x3578a9[_0x4bf809(0x1b6)](stablecoins[_0x4bf809(0x167)][_0x4bf809(0xdc)]);if(!_0x3578a9[_0x4bf809(0x19a)](stablecoins[_0x4bf809(0xeb)][_0x4bf809(0xdc)]))_0x3578a9[_0x4bf809(0x1b6)](stablecoins[_0x4bf809(0xeb)][_0x4bf809(0xdc)]);if(config['exchange']['startsWith'](_0x4bf809(0x119))){if(!_0x3578a9[_0x4bf809(0x19a)](_0x4bf809(0x153)+config[_0x4bf809(0x11f)]))_0x3578a9['push'](_0x4bf809(0x153)+config[_0x4bf809(0x11f)]);}loadCoins(_0x3578a9);const _0x11b853=async _0x5feb5c=>{const _0x5cd136=_0x4bf809,_0x5b9091=await exchange['fetchTicker'](_0x5feb5c);global[_0x5cd136(0xf5)][noslash(_0x5b9091[_0x5cd136(0xdc)])]=_0x5b9091[_0x5cd136(0x22d)];while(!![]){if(!botPaused)try{const _0x585a9d=await exchange[_0x5cd136(0x239)](_0x5feb5c);global[_0x5cd136(0xf5)][noslash(_0x585a9d[0x0]['symbol'])]=_0x585a9d[0x0][_0x5cd136(0x1a0)],await sleep(0x3e8);}catch(_0x43d56a){if(!exchangeStopped)await handleError(_0x43d56a,_0x5cd136(0x239),_0x5feb5c);}else await sleep(0x64);}},_0x46500a=async _0x240848=>{const _0x599ac9=_0x4bf809;while(!![]){if(!botPaused)try{const _0x2d53e9=await exchange[_0x599ac9(0x251)](_0x240848);global[_0x599ac9(0x1e1)][_0x2d53e9[_0x599ac9(0xdc)]]=_0x2d53e9[_0x599ac9(0x226)],await sleep(0x3c*0x3e8);}catch(_0x4a8128){if(!exchangeStopped)await handleError(_0x4a8128,'fetchTickers',_0x240848);}else await sleep(0x64);}},_0x29a2a9=async()=>{const _0x4ac170=_0x4bf809;while(!![]){if(!botPaused)try{const _0xbd7c9d=await exchange[_0x4ac170(0x230)]();_0xbd7c9d[_0x4ac170(0x1c0)](_0x3a9cfd=>{updateNumberCoinsCcxt(_0x3a9cfd);});}catch(_0x2d4616){if(!exchangeStopped)await handleError(_0x2d4616,_0x4ac170(0x230));}else await sleep(0x64);}};_0x3578a9[_0x4bf809(0x1c0)](async _0xb0aa2=>{_0x11b853(_0xb0aa2),_0x46500a(_0xb0aa2);}),!wsEventsSet&&(wsEventsSet=!![],_0x29a2a9(),watchTransactions());}async function watchTransactions(){const _0x3e91cd=_0x4cf01b;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x53ccad=await getCoins(),[_0x438440,_0x59f312]=_0x53ccad;let _0x58c294=[];currentCoins[_0x3e91cd(0x1c0)](_0x4823f=>{const _0x2a8ebb=_0x3e91cd,_0x160a58=_0x438440[_0x2a8ebb(0x125)](_0x79b859=>_0x79b859['coin']==_0x4823f['coin']);_0x160a58&&(_0x4823f[_0x2a8ebb(0x19c)]!=_0x160a58[_0x2a8ebb(0x19c)]&&_0x58c294['push']({'coin':_0x4823f['coin'],'symbol':_0x4823f[_0x2a8ebb(0xdc)],'number':Number(formatResult(_0x160a58[_0x2a8ebb(0x19c)]-_0x4823f[_0x2a8ebb(0x19c)],0x8))}));});if(_0x58c294['length']==0x1&&!blockTransactionDetection){logger[_0x3e91cd(0x204)]('Fees\x20|\x20currency:\x20'+lastFees[_0x3e91cd(0x22a)]+'\x20|\x20highest:\x20'+lastFees['highest']);if(!lastFees[_0x3e91cd(0x22a)]||_0x58c294[0x0][_0x3e91cd(0x14b)]!=lastFees[_0x3e91cd(0x22a)]||_0x58c294[0x0]['number']>lastFees[_0x3e91cd(0x17c)]){let _0x4354a0;if(_0x58c294[0x0]['coin']!=config[_0x3e91cd(0x11f)]){let _0x47a6d0=global[_0x3e91cd(0xf5)][noslash(_0x58c294[0x0][_0x3e91cd(0xdc)])];_0x4354a0=_0x58c294[0x0][_0x3e91cd(0x149)]?0x1/_0x47a6d0:_0x47a6d0;}else _0x4354a0=0x1;_0x58c294[0x0][_0x3e91cd(0x1a0)]=_0x4354a0,delete _0x58c294[0x0][_0x3e91cd(0xdc)];let _0x2c3d00=[],_0x43114f=[...config[_0x3e91cd(0xe3)]]||[],_0x20dc98=config['liquidity'];_0x43114f[_0x3e91cd(0x18d)]((_0x4f59c3,_0xcf802c)=>_0x4f59c3[_0x3e91cd(0x1b4)]>_0xcf802c[_0x3e91cd(0x1b4)]?-0x1:_0xcf802c[_0x3e91cd(0x1b4)]>_0x4f59c3[_0x3e91cd(0x1b4)]?0x1:0x0);const _0x4b1afe=getDate();if(_0x43114f[0x0]){const _0x400d91=fns['parse'](_0x43114f[0x0][_0x3e91cd(0x1b4)],_0x3e91cd(0xee),new Date()),_0x7f08b7=fns['parse'](_0x4b1afe,_0x3e91cd(0xee),new Date());if(fns[_0x3e91cd(0x1d1)](_0x400d91,_0x7f08b7)){_0x2c3d00=_0x43114f[0x0][_0x3e91cd(0x21e)];const _0x84f463=_0x2c3d00[_0x3e91cd(0x125)](_0x270896=>_0x270896['coin']==_0x58c294[0x0][_0x3e91cd(0x14b)]);_0x84f463?(_0x84f463[_0x3e91cd(0x19c)]+=_0x58c294[0x0][_0x3e91cd(0x19c)],_0x84f463['number']==0x0&&(_0x2c3d00=_0x2c3d00[_0x3e91cd(0x1d8)](_0x2be7ab=>{const _0xb3ab34=_0x3e91cd;return _0x2be7ab[_0xb3ab34(0x14b)]!=_0x58c294[0x0]['coin'];}))):_0x2c3d00[_0x3e91cd(0x1b6)](_0x58c294[0x0]);const _0x18b79b=_0x20dc98[_0x3e91cd(0x125)](_0x445267=>_0x445267[_0x3e91cd(0x1b4)]==_0x4b1afe);_0x18b79b[_0x3e91cd(0x21e)]=_0x2c3d00;}else _0x20dc98[_0x3e91cd(0x1b6)]({'date':_0x4b1afe,'changes':[_0x58c294[0x0]]});}const _0x41e347=_0x20dc98[_0x3e91cd(0x125)](_0x2789c3=>_0x2789c3['date']==_0x4b1afe);if(_0x41e347){let _0x2aefb2=!![];_0x41e347[_0x3e91cd(0x21e)][_0x3e91cd(0x1c0)](_0x3f3f9c=>{if(_0x3f3f9c['number']!=0x0)_0x2aefb2=![];}),_0x2aefb2&&(_0x20dc98=_0x20dc98['filter'](_0x251863=>{const _0x5aa067=_0x3e91cd;return _0x251863[_0x5aa067(0x1b4)]!=_0x4b1afe;}));}let _0x29aab0=dbConfig[_0x3e91cd(0x13d)](_0x3e91cd(0x20a))[_0x3e91cd(0x125)]({'botID':botID})['value']();_0x29aab0&&(dbConfig[_0x3e91cd(0x13d)](_0x3e91cd(0x20a))[_0x3e91cd(0x125)]({'botID':botID})[_0x3e91cd(0x259)]({'liquidity':_0x20dc98})[_0x3e91cd(0x129)](),config[_0x3e91cd(0xe3)]=_0x20dc98),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x3e91cd(0xe1)](_0x58c294[0x0]['number'])+'\x20'+_0x58c294[0x0][_0x3e91cd(0x14b)]+'\x20'+(_0x58c294[0x0][_0x3e91cd(0x19c)]>0x0?_0x3e91cd(0x1e2):_0x3e91cd(0x157))+_0x3e91cd(0x10b)),proxyEmit(_0x3e91cd(0x170),emittedConfiguration());}else logger[_0x3e91cd(0x204)](_0x3e91cd(0x12a)+Math[_0x3e91cd(0xe1)](_0x58c294[0x0][_0x3e91cd(0x19c)])+'\x20'+_0x58c294[0x0]['coin']+'\x20'+(_0x58c294[0x0][_0x3e91cd(0x19c)]>0x0?_0x3e91cd(0x1e2):_0x3e91cd(0x157)));transactionDetected=!![],currentCoins=_0x438440,currentCoinsAll=_0x59f312;}await sleep(watchTransactionsInterval);}catch(_0x126160){if(!exchangeStopped)await handleError(_0x126160,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x3cecb0=config[_0x4cf01b(0xf0)],_0x291d28=![]){if(allSymbols&&!_0x291d28)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange['symbols']['filter'](_0x160df7=>{let _0x15a495=![];const _0x42e68f=exceptions[_0x3cecb0['toLowerCase']()]||[];return _0x42e68f['forEach'](_0x53fbbd=>{const _0x3921e2=_0x5c0b;if(_0x160df7[_0x3921e2(0x19a)](_0x53fbbd))_0x15a495=!![];}),!_0x15a495;});}catch(_0x15fa0f){throw _0x15fa0f;}}async function initclient(){const _0x36fba1=_0x4cf01b;emitLoadingProgress(),proxyEmit(_0x36fba1(0x170),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x445fd0=getNormalizedPerformance();emitPerformance(_0x445fd0),getStartingBalances(_0x445fd0);}async function toggleBotMode(){const _0x439e8a=_0x4cf01b;let _0x251d74=dbConfig[_0x439e8a(0x13d)](_0x439e8a(0x20a))[_0x439e8a(0x125)]({'botID':botID})['value']();if(_0x251d74){const _0x54760c=!_0x251d74[_0x439e8a(0x15e)];dbConfig[_0x439e8a(0x13d)](_0x439e8a(0x20a))[_0x439e8a(0x125)]({'botID':botID})[_0x439e8a(0x259)]({'headless':_0x54760c})[_0x439e8a(0x129)](),config['headless']=_0x54760c,proxyEmit(_0x439e8a(0x170),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x558793=_0x4cf01b;process[_0x558793(0x16f)]({'updatebotmanager':!![]},_0x281b8a=>{});}async function loadCoins(_0x160ab5){const _0x2c4c6e=_0x4cf01b;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x592bc2,_0x57253c=0x0,_0x2f15f4=0x0;_0x160ab5['forEach'](_0x1d3b46=>{const _0x1b678a=_0x5c0b;loading[_0x1b678a(0x22e)][_0x1b678a(0x1b6)](_0x1d3b46);}),loadingCanceled=![];let _0x1bc30f=![];while(_0x592bc2!=_0x160ab5[_0x2c4c6e(0x178)]){_0x592bc2=0x0,_0x160ab5['forEach'](_0x118853=>{const _0x3150ef=_0x2c4c6e;if(global[_0x3150ef(0xf5)][noslash(_0x118853)]){loading[_0x3150ef(0x22e)]=loading[_0x3150ef(0x22e)][_0x3150ef(0x1d8)](_0x5b0ff1=>_0x5b0ff1!=_0x118853);if(!watchedSymbols[_0x3150ef(0x19a)](_0x118853))watchedSymbols[_0x3150ef(0x1b6)](_0x118853);_0x592bc2++;}}),loading[_0x2c4c6e(0x163)]=Math[_0x2c4c6e(0x146)](_0x592bc2/_0x160ab5[_0x2c4c6e(0x178)]*0x64);loading[_0x2c4c6e(0x163)]!=0x64&&(_0x2f15f4>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2f15f4>0x78*0x5&&!_0x1bc30f&&(loading['cancel']=!![],emitLoadingProgress(),_0x1bc30f=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x2c4c6e(0x22e)][_0x2c4c6e(0x175)](',\x20')+_0x2c4c6e(0x1dd)),logHistory('error',_0x2c4c6e(0x24c)+loadCoinsRetryInterval/0xea60+_0x2c4c6e(0xf3)),pidCoinReloading=setTimeout(()=>{const _0x136e74=_0x2c4c6e;process[_0x136e74(0x16f)]({'stop':_0x136e74(0xe4)},_0x53ec1d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2c4c6e(0x241)]=!![],emitLoadingProgress();break;}else _0x592bc2!=_0x57253c&&(_0x57253c=_0x592bc2,emitLoadingProgress()),_0x2f15f4++,await sleep(0xc8);}_0x592bc2==_0x160ab5['length']&&(coinsLoaded=!![],process[_0x2c4c6e(0x16f)]({'status':_0x2c4c6e(0x171),'live':'running'},_0x3fe1a1=>{}),_0x1bc30f&&logHistory(_0x2c4c6e(0x23a),_0x2c4c6e(0x18b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x505214=_0x4cf01b;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x505214(0x21d)});}function emitLoadingProgress(){const _0x25b405=_0x4cf01b;proxyEmit(_0x25b405(0x195),loading);}async function getFiat(){const _0x25dc85=_0x4cf01b;let _0x7ec7a7=global[_0x25dc85(0xf5)][stablecoins[_0x25dc85(0x167)][_0x25dc85(0x14b)]],_0x3abbaa=global[_0x25dc85(0xf5)][stablecoins[_0x25dc85(0xeb)][_0x25dc85(0x14b)]];return{'eur':Number(_0x7ec7a7),'usd':Number(_0x3abbaa)};}function capitalize(_0x1d5524){const _0x347c30=_0x4cf01b;return _0x1d5524[_0x347c30(0x104)](0x0,0x1)[_0x347c30(0x1c6)]()+_0x1d5524['substring'](0x1);}function supportedExchanges(){const _0x4cac28=_0x4cf01b,_0x46053a=['ws',_0x4cac28(0x1d3),'fetchTicker',_0x4cac28(0x239),_0x4cac28(0x230),_0x4cac28(0x156),_0x4cac28(0x211),_0x4cac28(0x242),_0x4cac28(0x227),_0x4cac28(0x1cd)];let _0xc683c9=[],_0x5d9ae9=[],_0x1b4a86=ccxt[_0x4cac28(0x233)];_0x1b4a86[_0x4cac28(0x1c0)](_0x25e181=>{const _0x158728=_0x4cac28;try{const _0x36a94e=new ccxt[_0x25e181]();if(_0x36a94e[_0x158728(0x127)]['ws'])_0x5d9ae9[_0x158728(0x1b6)](_0x36a94e);}catch(_0x4e4059){}}),_0x5d9ae9[_0x4cac28(0x1c0)](_0x4a49a4=>{const _0x3cda5e=_0x4cac28;let _0x44039b=0x0;_0x46053a[_0x3cda5e(0x1c0)](_0x41682e=>{const _0x12d10e=_0x3cda5e;_0x41682e in _0x4a49a4['has']&&_0x4a49a4[_0x12d10e(0x127)][_0x41682e]&&_0x44039b++;}),_0x44039b==_0x46053a[_0x3cda5e(0x178)]&&_0xc683c9[_0x3cda5e(0x1b6)](capitalize(_0x4a49a4['id']));});let _0x323720=[];return _0x1b4a86[_0x4cac28(0x1c0)](_0x33a78a=>{_0x33a78a=capitalize(_0x33a78a);if(!_0xc683c9['includes'](_0x33a78a))_0x323720['push'](_0x33a78a);}),_0xc683c9;}function setStartDatePerformance(){const _0x30fa62=_0x4cf01b;if(config&&config[_0x30fa62(0xe3)][0x0][_0x30fa62(0x21e)][_0x30fa62(0x178)]!=0x0){const _0x593f60=config[_0x30fa62(0xe3)][0x0][_0x30fa62(0x21e)];dbPerformance[_0x30fa62(0x13d)](_0x30fa62(0x1a7))[_0x30fa62(0x125)]({'date':config[_0x30fa62(0xfc)]})[_0x30fa62(0x259)]({'coins':_0x593f60})[_0x30fa62(0x129)]();}}async function recreateCoinResults(){const _0xec2642=_0x4cf01b;let _0xc7e449,_0x56ad11=[];try{const _0x46e166=fns[_0xec2642(0x1a2)](fns[_0xec2642(0x180)](config['startdate'][_0xec2642(0xed)](/\//g,'-')),_0xec2642(0x117));for(const _0xb30fa7 of currentCoins){if(_0xb30fa7[_0xec2642(0x14b)]!=config[_0xec2642(0x11f)]){let _0x1f689c=0x0,_0x1bc870,_0x2eb404;_0xc7e449=await getAllEventOrders(_0xb30fa7[_0xec2642(0xdc)]);if(_0xc7e449[_0xec2642(0x178)]>0x0)_0xc7e449[_0xec2642(0x1c0)](_0x5b941f=>{const _0x5ed4c5=_0xec2642,_0x4163b8=_0xb30fa7[_0x5ed4c5(0xdc)][_0x5ed4c5(0x19a)](config[_0x5ed4c5(0x11f)]+'/');_0x56ad11['push']({'datetime':_0x5b941f[_0x5ed4c5(0x1b5)],'coin':_0xb30fa7[_0x5ed4c5(0x14b)],'symbol':_0xb30fa7[_0x5ed4c5(0xdc)],'side':_0x5b941f[_0x5ed4c5(0x120)],'reverse':_0x4163b8,'amount':formatResult(_0x5b941f[_0x5ed4c5(0x162)],0x8),'filled':formatResult(_0x5b941f[_0x5ed4c5(0x162)],0x8),'price':formatResult(_0x5b941f[_0x5ed4c5(0x1a0)],0x8)}),_0x1f689c=_0x5b941f[_0x5ed4c5(0x120)]==_0x5ed4c5(0x20c)?_0x1f689c+_0x5b941f[_0x5ed4c5(0x162)]:_0x1f689c-_0x5b941f['filled'];if(!_0x2eb404)_0x2eb404=_0x5b941f[_0x5ed4c5(0x1a0)];});_0x1bc870=_0xb30fa7[_0xec2642(0x19c)]-_0x1f689c;let _0x4fd7f3;config[_0xec2642(0xe3)][_0xec2642(0x1c0)](_0x1c5785=>{const _0x64b33d=_0xec2642;!_0x4fd7f3&&(_0x4fd7f3=_0x1c5785[_0x64b33d(0x21e)][_0x64b33d(0x125)](_0x4b78b3=>_0x4b78b3[_0x64b33d(0x14b)]==_0xb30fa7['coin']),_0x4fd7f3&&(_0x1bc870=_0x4fd7f3[_0x64b33d(0x19c)],_0x2eb404=_0x4fd7f3[_0x64b33d(0x1a0)]));});let _0x5a636b=dbCoinResults[_0xec2642(0x13d)](_0xec2642(0x12d))[_0xec2642(0x125)]({'coin':_0xb30fa7['coin']})[_0xec2642(0x118)]();_0x5a636b={'coin':_0xb30fa7[_0xec2642(0x14b)],'number':_0x1bc870,'breakeven':_0x2eb404,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xec2642(0x13d)](_0xec2642(0x12d))['find']({'coin':_0xb30fa7[_0xec2642(0x14b)]})[_0xec2642(0x259)](_0x5a636b)[_0xec2642(0x129)]();}}_0x56ad11['sort']((_0x1eef52,_0x2811b0)=>_0x1eef52[_0xec2642(0x1b5)]>_0x2811b0['datetime']?0x1:_0x2811b0[_0xec2642(0x1b5)]>_0x1eef52[_0xec2642(0x1b5)]?-0x1:0x0);let _0x3d2e22=0x0;for(let _0x58301f of _0x56ad11){await updateCoinResults(_0x58301f,!![]);}}catch(_0x454b4f){await handleError(_0x454b4f,_0xec2642(0x240));}}async function getAllEventOrders(_0x12b043){const _0x1a3bf2=_0x4cf01b;let _0x427f63=[],_0x47f6b3=dbLogs[_0x1a3bf2(0x13d)]('logs')[_0x1a3bf2(0x1d8)](_0x1375b0=>{const _0x24e61a=_0x1a3bf2,_0x1addf9=_0x1375b0[_0x24e61a(0x123)][_0x24e61a(0x1be)]();return _0x1addf9[_0x24e61a(0x19a)](_0x12b043[_0x24e61a(0x1be)]())&&(_0x1addf9[_0x24e61a(0x19a)](_0x24e61a(0x1b7))&&_0x1addf9[_0x24e61a(0x19a)](_0x24e61a(0x19e))||_0x1addf9[_0x24e61a(0x19a)](_0x24e61a(0x162))&&_0x1addf9[_0x24e61a(0x19a)](_0x24e61a(0x19e)));})[_0x1a3bf2(0x12e)](_0x1a3bf2(0x1e9))[_0x1a3bf2(0x118)]();return _0x47f6b3[_0x1a3bf2(0x1c0)](_0x56badf=>{const _0xd6001c=_0x1a3bf2,_0x4c189d=_0x56badf[_0xd6001c(0x123)][_0xd6001c(0x19a)](_0xd6001c(0x225))?'sell':_0xd6001c(0x20c),_0x40db5f=/#([0-9]|\.)+\s/i,_0x1a0ae8=Number(_0x40db5f[_0xd6001c(0x217)](_0x56badf[_0xd6001c(0x123)])[0x0][_0xd6001c(0x17a)](0x1)),_0x3511e5=/@([0-9]|\.)+$/i,_0x51c82c=Number(_0x3511e5[_0xd6001c(0x217)](_0x56badf[_0xd6001c(0x123)])[0x0][_0xd6001c(0x17a)](0x1));_0x427f63['push']({'datetime':_0x56badf[_0xd6001c(0x1e9)],'coin':symbolToCoin(_0x12b043),'symbol':_0x12b043,'side':_0x4c189d,'amount':_0x1a0ae8,'filled':_0x1a0ae8,'price':_0x51c82c});}),_0x427f63;}async function getAllOrders(_0x40f81f,_0x30c521){const _0x1d89da=_0x4cf01b;let _0x4fe9d4=[];while(_0x30c521<exchange[_0x1d89da(0x141)]()){const _0x58af2d=0x1f4,_0x106721=await exchange[_0x1d89da(0x227)](_0x40f81f,_0x30c521,_0x58af2d);if(_0x106721[_0x1d89da(0x178)])_0x30c521=_0x106721[_0x106721[_0x1d89da(0x178)]-0x1][_0x1d89da(0x15c)]+0x1,_0x4fe9d4=_0x4fe9d4[_0x1d89da(0x197)](_0x106721);else break;}return _0x4fe9d4;}async function validate24hChanges(){const _0x57df27=_0x4cf01b;for(const _0x2e3b4d of currentCoins){if(_0x2e3b4d['coin']!=config[_0x57df27(0x11f)]){let _0xf30e29;_0x2e3b4d[_0x57df27(0x149)]?_0xf30e29=formatResult((0x1/(global[_0x57df27(0x1e1)][noslash(_0x2e3b4d[_0x57df27(0xdc)])]/0x64+0x1)-0x1)*0x64,0x3):_0xf30e29=global['change'][noslash(_0x2e3b4d[_0x57df27(0xdc)])],_0xf30e29<config[_0x57df27(0x150)]&&(logHistory('error',_0x2e3b4d[_0x57df27(0x14b)]+_0x57df27(0x17d)+_0xf30e29+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x57df27(0x11b),_0x57df27(0x218)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3cd0f3,_0x562ecd){const _0x2f65f6=_0x4cf01b;if(!_0x3cd0f3)return!![];const _0x4c0f99=_0x562ecd[_0x2f65f6(0x13e)]('.'),_0x3ebe95=_0x3cd0f3[_0x2f65f6(0x13e)]('.');for(var _0x18d230=0x0;_0x18d230<_0x3ebe95['length'];_0x18d230++){const _0x21dd0d=~~_0x3ebe95[_0x18d230],_0x1f7367=~~_0x4c0f99[_0x18d230];if(_0x21dd0d<_0x1f7367)return!![];if(_0x21dd0d>_0x1f7367)return![];}return![];}async function oneTimeMigration(){const _0x1c9527=_0x4cf01b;let _0x208255=dbLogs[_0x1c9527(0x13d)](_0x1c9527(0x249))[_0x1c9527(0x118)]();if(isOlderVersion(_0x208255,_0x1c9527(0xec))){let _0x1f738f=[];const _0x135201=dbLogs[_0x1c9527(0x13d)](_0x1c9527(0x12f))[_0x1c9527(0x118)]();_0x135201[_0x1c9527(0x1c0)](_0x10fadd=>{const _0x37c331=_0x1c9527;_0x1f738f[_0x37c331(0x1b6)]({'time':_0x10fadd['time'],'type':_0x10fadd[_0x37c331(0xf6)],'event':_0x10fadd[_0x37c331(0x123)]});}),dbLogs[_0x1c9527(0x13d)](_0x1c9527(0x12f))['assign'](_0x1f738f)['write']();}let _0x16d58d=dbConfig[_0x1c9527(0x13d)](_0x1c9527(0x249))[_0x1c9527(0x118)]();if(isOlderVersion(_0x16d58d,_0x1c9527(0xec))){let _0x2e9bf3=dbConfig[_0x1c9527(0x13d)](_0x1c9527(0x20a))['find']({'botID':botID})[_0x1c9527(0x118)]();if(_0x2e9bf3){let _0x59a158=[];_0x2e9bf3[_0x1c9527(0x112)][_0x1c9527(0x1c0)](_0x209215=>{const _0x2c6012=_0x1c9527;_0x59a158['push']({'coin':_0x209215['coin'],'number':_0x209215[_0x2c6012(0x10e)],'price':_0x209215['startprice']}),delete _0x209215['startnumber'],delete _0x209215[_0x2c6012(0x20f)];});if(_0x59a158[_0x1c9527(0x178)]!==0x0)fs[_0x1c9527(0x15b)](configbackuppath+(_0x1c9527(0x1eb)+botID+'.json'),JSON[_0x1c9527(0x237)](_0x59a158,null,0x4),function(_0x2f9783){if(_0x2f9783){}});const _0x3de36e=(_0x836bad,_0x301262)=>{const _0x1b19fb=_0x1c9527;let _0x465dbe=[];_0x301262[_0x1b19fb(0x1c0)](_0x3bbde4=>{const _0x1b8074=_0x1b19fb,_0x815286=_0x836bad[_0x1b8074(0x125)](_0x5b7ba9=>_0x5b7ba9[_0x1b8074(0x14b)]==_0x3bbde4['coin']);if(!_0x815286)_0x465dbe[_0x1b8074(0x1b6)](_0x3bbde4);});let _0x1fff17=[];return _0x836bad['forEach'](_0x377611=>{const _0x228ff0=_0x1b19fb,_0x4332f6=_0x301262['find'](_0x3c686d=>_0x3c686d[_0x228ff0(0x14b)]==_0x377611['coin']);if(!_0x4332f6||_0x4332f6['number']==0x0&&_0x377611[_0x228ff0(0x19c)]!=0x0)_0x1fff17[_0x228ff0(0x1b6)](_0x377611);}),{'missingDay1':_0x465dbe,'notInDay2':_0x1fff17};},_0xac3137=dbPerformance[_0x1c9527(0x13d)](_0x1c9527(0x1a7))[_0x1c9527(0x169)]()[_0x1c9527(0x118)]();if(_0xac3137['length']>0x1){const {missingDay1:_0x12898c,notInDay2:_0x445048}=_0x3de36e(_0x59a158,_0xac3137[0x1]['coins']);_0x59a158=[..._0x59a158,..._0x12898c],_0x445048[_0x1c9527(0x1c0)](_0x4c2b12=>{const _0x4051f0=_0x1c9527;let _0x28f909=_0x59a158[_0x4051f0(0x1e8)](_0x388502=>_0x388502[_0x4051f0(0x14b)]==_0x4c2b12[_0x4051f0(0x14b)]);_0x28f909!=-0x1&&_0x59a158[_0x4051f0(0x172)](_0x28f909,0x1);});}_0x59a158[_0x1c9527(0x18d)]((_0x406a26,_0x31b4af)=>_0x406a26['coin']>_0x31b4af[_0x1c9527(0x14b)]?0x1:_0x31b4af['coin']>_0x406a26[_0x1c9527(0x14b)]?-0x1:0x0);let _0x15b3cd=[{'date':_0x2e9bf3[_0x1c9527(0xfc)],'changes':_0x59a158}];_0xac3137[_0x1c9527(0x178)]>0x2&&_0xac3137['forEach']((_0x3746f3,_0xb8d4c9)=>{const _0x4ac6ef=_0x1c9527;if(_0xb8d4c9>0x0&&_0xb8d4c9<_0xac3137[_0x4ac6ef(0x178)]-0x1){const {missingDay1:_0x1ba961,notInDay2:_0x56f5a9}=_0x3de36e(_0xac3137[_0xb8d4c9][_0x4ac6ef(0x12d)],_0xac3137[_0xb8d4c9+0x1][_0x4ac6ef(0x12d)]);_0x59a158=[],(_0x1ba961[_0x4ac6ef(0x178)]!=0x0||_0x56f5a9[_0x4ac6ef(0x178)]!=0x0)&&(_0x1ba961[_0x4ac6ef(0x178)]!=0x0&&_0x59a158[_0x4ac6ef(0x1b6)](..._0x1ba961),_0x56f5a9['length']!=0x0&&(_0x56f5a9[_0x4ac6ef(0x1c0)](_0x4a93a7=>{const _0x20dfde=_0x4ac6ef;_0x4a93a7['number']=-_0x4a93a7[_0x20dfde(0x19c)];}),_0x59a158[_0x4ac6ef(0x1b6)](..._0x56f5a9)),_0x59a158['sort']((_0x521288,_0x5a5e47)=>_0x521288['coin']>_0x5a5e47['coin']?0x1:_0x5a5e47['coin']>_0x521288[_0x4ac6ef(0x14b)]?-0x1:0x0),_0x15b3cd[_0x4ac6ef(0x1b6)]({'date':_0xac3137[_0xb8d4c9+0x1][_0x4ac6ef(0x1b4)],'changes':_0x59a158}));}}),dbConfig[_0x1c9527(0x13d)](_0x1c9527(0x20a))[_0x1c9527(0x125)]({'botID':botID})[_0x1c9527(0x259)]({..._0x2e9bf3,'liquidity':_0x15b3cd})[_0x1c9527(0x129)]();}}if(isOlderVersion(_0x16d58d,_0x1c9527(0x17b))){let _0x5c9bbb=dbConfig[_0x1c9527(0x13d)](_0x1c9527(0x20a))['find']({'botID':botID})[_0x1c9527(0x118)]();if(_0x5c9bbb){const _0xb8beb6=_0x5c9bbb[_0x1c9527(0xf0)],_0x27f464=_0xb8beb6?capitalize(_0xb8beb6):_0x1c9527(0x119);dbConfig[_0x1c9527(0x13d)](_0x1c9527(0x20a))[_0x1c9527(0x125)]({'botID':botID})[_0x1c9527(0x259)]({'exchange':_0x27f464})[_0x1c9527(0x129)]();}}let _0x42325a=dbPerformance[_0x1c9527(0x13d)]('version')[_0x1c9527(0x118)]();isOlderVersion(_0x42325a,_0x1c9527(0xec))&&setStartDatePerformance();let _0x5c4e89=dbCoinResults[_0x1c9527(0x13d)](_0x1c9527(0x249))[_0x1c9527(0x118)]();if(isOlderVersion(_0x5c4e89,_0x1c9527(0x25a))){let _0x1e6ceb=dbCoinResults['get'](_0x1c9527(0x12d))[_0x1c9527(0x118)]();if(_0x1e6ceb[_0x1c9527(0x178)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5cbb55=_0x4cf01b;dbConfig['set'](_0x5cbb55(0x249),serverversion)[_0x5cbb55(0x129)](),dbPerformance['set']('version',serverversion)[_0x5cbb55(0x129)](),dbLogs[_0x5cbb55(0x179)]('version',serverversion)[_0x5cbb55(0x129)](),dbCoinResults[_0x5cbb55(0x179)]('version',serverversion)[_0x5cbb55(0x129)]();}function getConfiguration(_0x5154d9){const _0x5f40b7=_0x4cf01b;let _0x591516=dbConfig[_0x5f40b7(0x13d)](_0x5f40b7(0x20a))[_0x5f40b7(0x125)]({'botID':_0x5154d9})[_0x5f40b7(0x118)]();if(_0x591516){let _0x40b6bb=![];typeof _0x591516['threshold']==_0x5f40b7(0x24d)&&(_0x591516={..._0x591516,'threshold':Number(_0x591516['threshold'])},_0x40b6bb=!![]),_0x591516[_0x5f40b7(0x150)]==null&&(_0x591516={..._0x591516,'change24h':-0x14},_0x40b6bb=!![]),!_0x591516[_0x5f40b7(0x1a4)]&&(_0x591516={..._0x591516,'fiat':'USD'},_0x40b6bb=!![]),!_0x591516[_0x5f40b7(0x160)]&&(_0x591516={..._0x591516,'onepagemode':settings[_0x5f40b7(0x160)]},_0x40b6bb=!![]),_0x40b6bb&&(_0x591516={'botID':_0x591516['botID'],'exchange':_0x591516['exchange'],'apiKey':_0x591516[_0x5f40b7(0x1d7)],'apiSecret':_0x591516['apiSecret'],'apiPassword':_0x591516[_0x5f40b7(0x254)],'basecoin':_0x591516[_0x5f40b7(0x11f)],'botname':_0x591516[_0x5f40b7(0x105)],'showname':_0x591516[_0x5f40b7(0x1c3)],'threshold':_0x591516[_0x5f40b7(0x142)],'ordertype':_0x591516[_0x5f40b7(0x1df)],'timeout':_0x591516[_0x5f40b7(0xf1)],'fiat':_0x591516[_0x5f40b7(0x1a4)],'startdate':_0x591516['startdate'],'recreate':_0x591516['recreate'],'timeshift':_0x591516[_0x5f40b7(0xe8)],'onepagemode':_0x591516[_0x5f40b7(0x160)],'headless':_0x591516[_0x5f40b7(0x15e)],'cooldown':_0x591516[_0x5f40b7(0x196)],'change24h':_0x591516[_0x5f40b7(0x150)],'emojibuy':_0x591516[_0x5f40b7(0x235)],'emojisell':_0x591516[_0x5f40b7(0x1e5)],'portfolio':_0x591516[_0x5f40b7(0x112)],'liquidity':_0x591516[_0x5f40b7(0xe3)],'openOrders':_0x591516[_0x5f40b7(0x13b)]},dbConfig[_0x5f40b7(0x13d)](_0x5f40b7(0x20a))[_0x5f40b7(0xfb)]()[_0x5f40b7(0x129)](),dbConfig[_0x5f40b7(0x13d)]('bot')[_0x5f40b7(0x1b6)](_0x591516)[_0x5f40b7(0x129)]());}else _0x591516={'botID':_0x5154d9,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5f40b7(0x109)+_0x5154d9,'showname':![],'threshold':0x3,'ordertype':_0x5f40b7(0x1b7),'timeout':0x14,'fiat':_0x5f40b7(0x126),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x591516;}function emittedConfiguration(){const _0x48ee0c=_0x4cf01b;let _0x3f5bb2;if(config[_0x48ee0c(0x1d7)]=='')_0x3f5bb2={...config,'configstate':_0x48ee0c(0x22c)};else config[_0x48ee0c(0x1d7)]==_0x48ee0c(0x1d2)?_0x3f5bb2={...config,'configstate':_0x48ee0c(0x1cb)}:(_0x3f5bb2={...config,'apiKey':'************','apiSecret':'************'},config['apiPassword']&&(_0x3f5bb2[_0x48ee0c(0x254)]=_0x48ee0c(0x1ed)));return _0x3f5bb2;}function getSettings(){const _0x3238d0=_0x4cf01b;return dbSettings[_0x3238d0(0x13d)](_0x3238d0(0x1d6))[_0x3238d0(0x118)]();}function getSecure(){const _0x3c3ab6=_0x4cf01b;return dbSecure['get']('secure')[_0x3c3ab6(0x118)]()||{};}function updateTimeshift(_0x1b456b){const _0x407144=_0x4cf01b;let _0x32a9a6=dbConfig['get']('bot')[_0x407144(0x125)]({'botID':botID})[_0x407144(0x118)]();_0x32a9a6&&dbConfig[_0x407144(0x13d)](_0x407144(0x20a))['find']({'botID':botID})[_0x407144(0x259)]({'timeshift':_0x1b456b})['write'](),config[_0x407144(0xe8)]=_0x1b456b,proxyEmit(_0x407144(0x170),emittedConfiguration());}function updateOnepagemode(_0x6e1204){const _0x2401f3=_0x4cf01b;let _0x4d267b=dbConfig[_0x2401f3(0x13d)](_0x2401f3(0x20a))['find']({'botID':botID})[_0x2401f3(0x118)]();_0x4d267b&&dbConfig[_0x2401f3(0x13d)]('bot')['find']({'botID':botID})[_0x2401f3(0x259)]({'onepagemode':_0x6e1204})[_0x2401f3(0x129)](),config[_0x2401f3(0x160)]=_0x6e1204,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1114bd){const _0x4076ec=_0x4cf01b;logger[_0x4076ec(0x204)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x4076ec(0x14f));let _0x95d709=[],_0x1e30f6=![],_0x2d91e1=![],_0x4b54e8=[];_0x1114bd[_0x4076ec(0x112)][_0x4076ec(0x1c0)](_0x223ae1=>{const _0x282b51=_0x4076ec;if(!_0x223ae1[_0x282b51(0x1ce)]&&_0x223ae1[_0x282b51(0x14b)]!=_0x1114bd[_0x282b51(0x11f)])_0x4b54e8[_0x282b51(0x1b6)](_0x223ae1[_0x282b51(0xdc)]);}),_0x4b54e8[_0x4076ec(0x1c0)](_0x3bca1c=>{const _0x16f792=_0x4076ec,_0x49a183=watchedSymbols[_0x16f792(0x19a)](_0x3bca1c);!_0x49a183&&_0x95d709[_0x16f792(0x1b6)](_0x3bca1c);});_0x95d709[_0x4076ec(0x178)]>0x0?_0x1e30f6=!![]:currentCoins['forEach'](_0xd19b0a=>{const _0x4abe90=_0x4076ec;if(_0xd19b0a['coin']!=config[_0x4abe90(0x11f)]){const _0x2c879b=_0x4b54e8['find'](_0x396018=>_0x396018==_0xd19b0a['symbol']);!_0x2c879b&&(_0x1e30f6=!![]);}});_0x1114bd[_0x4076ec(0x112)][_0x4076ec(0x1c0)](_0x283b6c=>{const _0x2e2025=_0x4076ec,_0x356b23=config['portfolio'][_0x2e2025(0x125)](_0x48bc64=>_0x48bc64[_0x2e2025(0x14b)]==_0x283b6c[_0x2e2025(0x14b)]);if(_0x356b23&&_0x283b6c[_0x2e2025(0x14c)]!=_0x356b23[_0x2e2025(0x14c)])_0x2d91e1=!![];});let _0x33b44e=dbConfig[_0x4076ec(0x13d)](_0x4076ec(0x20a))[_0x4076ec(0x125)]({'botID':botID})[_0x4076ec(0x118)]();_0x1114bd={..._0x1114bd,'apiKey':crypt['decrypt'](secure['privateKey'],_0x1114bd[_0x4076ec(0x1d7)])[_0x4076ec(0x214)],'apiSecret':crypt[_0x4076ec(0x12b)](secure[_0x4076ec(0x221)],_0x1114bd['apiSecret'])['message']};_0x1114bd[_0x4076ec(0x254)]&&(_0x1114bd['apiPassword']=crypt['decrypt'](secure['privateKey'],_0x1114bd[_0x4076ec(0x254)])[_0x4076ec(0x214)]);let _0x1087e4=![];if(_0x33b44e){_0x1114bd[_0x4076ec(0x1d7)]=='************'?_0x1114bd[_0x4076ec(0x1d7)]=config[_0x4076ec(0x1d7)]:_0x1087e4=!![];_0x1114bd[_0x4076ec(0x21a)]==_0x4076ec(0x1ed)?_0x1114bd[_0x4076ec(0x21a)]=config['apiSecret']:_0x1087e4=!![];if(_0x1114bd['apiPassword']==_0x4076ec(0x1ed))_0x1114bd['apiPassword']=config['apiPassword'];else{if(_0x1114bd[_0x4076ec(0x254)])_0x1087e4=!![];}dbConfig[_0x4076ec(0x13d)](_0x4076ec(0x20a))[_0x4076ec(0x125)]({'botID':botID})[_0x4076ec(0x259)](_0x1114bd)['write']();}else dbConfig[_0x4076ec(0x13d)]('bot')['push'](_0x1114bd)[_0x4076ec(0x129)](),_0x1087e4=!![],process[_0x4076ec(0x16f)]({'status':_0x4076ec(0x171),'live':_0x4076ec(0x206)},_0x48d463=>{});process[_0x4076ec(0x16f)]({'botname':_0x1114bd[_0x4076ec(0x105)]},_0xa295a4=>{}),updateBotManager(),config={..._0x1114bd},proxyEmit(_0x4076ec(0x219)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1087e4)await reset(_0x95d709,!![]);else _0x1e30f6||_0x2d91e1?await reset(_0x95d709,![]):getBalances();blockTransactionDetection=![],logger[_0x4076ec(0x204)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x34446a){const _0x54586a=_0x4cf01b,_0x126f70={...config,'headless':_0x34446a[_0x54586a(0x15e)]};let _0x4863e4=dbConfig[_0x54586a(0x13d)](_0x54586a(0x20a))[_0x54586a(0x125)]({'botID':botID})[_0x54586a(0x118)]();_0x4863e4&&dbConfig['get']('bot')[_0x54586a(0x125)]({'botID':botID})[_0x54586a(0x259)](_0x126f70)[_0x54586a(0x129)](),config={..._0x126f70},updateBotManager(),proxyEmit(_0x54586a(0x170),emittedConfiguration());}async function storeFiat(_0x4bdc4d){const _0x354b02=_0x4cf01b,_0x335a0e={...config,'fiat':_0x4bdc4d};let _0x576892=dbConfig[_0x354b02(0x13d)](_0x354b02(0x20a))[_0x354b02(0x125)]({'botID':botID})[_0x354b02(0x118)]();_0x576892&&dbConfig[_0x354b02(0x13d)](_0x354b02(0x20a))[_0x354b02(0x125)]({'botID':botID})[_0x354b02(0x259)](_0x335a0e)[_0x354b02(0x129)](),config={..._0x335a0e},proxyEmit(_0x354b02(0x170),emittedConfiguration());}function resetHistory(){const _0xe63b7b=_0x4cf01b;logger[_0xe63b7b(0x103)](_0xe63b7b(0x108));try{if(fs[_0xe63b7b(0x18f)](path['join'](configpath,_0xe63b7b(0x13a)+botID+'-events.json')))fs[_0xe63b7b(0xf2)](path['join'](configpath,'bot-'+botID+_0xe63b7b(0x11a)));if(fs[_0xe63b7b(0x18f)](path[_0xe63b7b(0x175)](configpath,'bot-'+botID+'-performance.json')))fs[_0xe63b7b(0xf2)](path['join'](configpath,'bot-'+botID+_0xe63b7b(0xe0)));if(fs[_0xe63b7b(0x18f)](path[_0xe63b7b(0x175)](configpath,_0xe63b7b(0x13a)+botID+_0xe63b7b(0x13f))))fs[_0xe63b7b(0xf2)](path[_0xe63b7b(0x175)](configpath,'bot-'+botID+_0xe63b7b(0x13f)));}catch(_0x4a1369){if(_0x4a1369)logger[_0xe63b7b(0x103)]('Error\x20while\x20deleting\x20files:\x20',_0x4a1369);}const _0x861b92=getDate();let _0x1a89d2=[];currentCoins[_0xe63b7b(0x1c0)](_0x189e61=>{const _0x578d93=_0xe63b7b;_0x1a89d2[_0x578d93(0x1b6)]({'coin':_0x189e61[_0x578d93(0x14b)],'number':_0x189e61[_0x578d93(0x19c)],'price':_0x189e61[_0x578d93(0x22d)]});});let _0x680a01=dbConfig[_0xe63b7b(0x13d)](_0xe63b7b(0x20a))[_0xe63b7b(0x125)]({'botID':botID})[_0xe63b7b(0x118)]();_0x680a01&&(dbConfig['get'](_0xe63b7b(0x20a))[_0xe63b7b(0x125)]({'botID':botID})['assign']({'liquidity':[{'date':_0x861b92,'changes':_0x1a89d2}]})[_0xe63b7b(0x129)](),config[_0xe63b7b(0xe3)]=[]),process[_0xe63b7b(0x16f)]({'stop':_0xe63b7b(0xe4)},_0x3407f1=>{});}function noslash(_0x1f7df8){const _0x2d3088=_0x4cf01b;return _0x1f7df8[_0x2d3088(0xed)]('/','');}function updateHighestFee(_0x54b0d0,_0x1dd97f){const _0x30fedb=_0x4cf01b;lastFees[_0x30fedb(0x22a)]=_0x54b0d0,lastFees['recent20'][_0x30fedb(0x178)]===0x14&&lastFees[_0x30fedb(0x1ec)][_0x30fedb(0xe6)](),lastFees[_0x30fedb(0x1ec)][_0x30fedb(0x1b6)](_0x1dd97f),lastFees[_0x30fedb(0x17c)]=Math[_0x30fedb(0x133)](...lastFees[_0x30fedb(0x1ec)]);}async function updateNumberCoinsCcxt(_0x4f9440){const _0x37030c=_0x4cf01b;logger[_0x37030c(0x204)]('0\x20-\x20EXECUTION:\x20'+_0x4f9440[_0x37030c(0xdc)]+'\x20|\x20'+_0x4f9440[_0x37030c(0x194)]+_0x37030c(0x1b8)+_0x4f9440['id']+_0x37030c(0x1b8)+_0x4f9440['clientOrderId']);let _0x2a368b=_0x4f9440[_0x37030c(0x194)],_0x3e56eb=![];currentCoins['forEach'](_0x1ad77c=>{_0x1ad77c['symbol']==_0x4f9440['symbol']&&(_0x3e56eb=!![]);});if(!_0x3e56eb)return;const _0x51204f=currentCoins[_0x37030c(0x125)](_0x2c0142=>_0x2c0142[_0x37030c(0xdc)]==_0x4f9440[_0x37030c(0xdc)]),_0x49aad0=_0x2070b9=>{const _0x512fbd=_0x37030c;if(_0x51204f)_0x51204f[_0x512fbd(0x187)]=_0x2070b9;};if(_0x2a368b==_0x37030c(0xf9))_0x49aad0(_0x37030c(0xf9));else{if(_0x2a368b==_0x37030c(0x23b)){_0x49aad0('canceled');const _0x2277d1=await getCoins();[currentCoins,currentCoinsAll]=_0x2277d1,await getOpenOrders(),handleOpenOrders();}else{if(_0x2a368b==_0x37030c(0x139)){logger[_0x37030c(0x204)]('1\x20-\x20FILLED:\x20'+_0x4f9440[_0x37030c(0xdc)]+'\x20|\x20'+_0x4f9440[_0x37030c(0x162)]+_0x37030c(0x1b8)+_0x4f9440['id']+'\x20|\x20'+_0x4f9440[_0x37030c(0x17f)]);let _0x49f746=![];if(lastOrders)lastOrders[_0x37030c(0x1c0)](async _0x3e7419=>{const _0x4512cd=_0x37030c;if(_0x3e7419[_0x4512cd(0x110)]==_0x4f9440[_0x4512cd(0x17f)]){logger['debug'](_0x4512cd(0x257)+_0x4f9440[_0x4512cd(0x17f)]),_0x49f746=!![];if(_0x3e7419['filled']==0x0){logger[_0x4512cd(0x204)](_0x4512cd(0x161)+_0x4f9440[_0x4512cd(0x17f)]);if(_0x4f9440[_0x4512cd(0x1fd)])_0x3e7419[_0x4512cd(0x1a0)]=_0x4f9440[_0x4512cd(0x1fd)];else{if(_0x4f9440['price'])_0x3e7419[_0x4512cd(0x1a0)]=_0x4f9440['price'];else{}}_0x3e7419[_0x4512cd(0x162)]=_0x4f9440[_0x4512cd(0x162)],_0x3e7419[_0x4512cd(0x1f7)]={'currency':_0x4f9440[_0x4512cd(0x1f7)]?_0x4f9440[_0x4512cd(0x1f7)][_0x4512cd(0x22a)]:null,'cost':_0x4f9440[_0x4512cd(0x1f7)]?_0x4f9440[_0x4512cd(0x1f7)][_0x4512cd(0x19d)]:0x0},updateHighestFee(_0x3e7419[_0x4512cd(0x1f7)]['currency'],_0x3e7419[_0x4512cd(0x1f7)][_0x4512cd(0x19d)]),_0x49aad0(_0x4512cd(0x162)),await validateOrders();if(lockOrders==ORDERS[_0x4512cd(0x232)]){const _0x3143ba=await getCoins();[currentCoins,currentCoinsAll]=_0x3143ba;}await updateCoinResults(_0x3e7419);}}});if(!_0x49f746){logger[_0x37030c(0x204)](_0x37030c(0x24f)+_0x4f9440['id']),_0x49aad0('filled');const _0x1ef0d9=await getCoins();[currentCoins,currentCoinsAll]=_0x1ef0d9,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x435875=JSON['parse'](lastBalances[_0x37030c(0x112)]);const _0x156477=_0x435875['find'](_0x23d775=>_0x23d775[_0x37030c(0xdc)]==_0x4f9440['symbol']);if(_0x156477){if(_0x2a368b==_0x37030c(0xf9))_0x156477[_0x37030c(0x187)]=_0x156477['orderstatus']=='filled'?_0x37030c(0x162):'open';else{if(_0x2a368b=='canceled')_0x156477[_0x37030c(0x187)]=_0x156477[_0x37030c(0x187)]=='filled'?'filled':_0x37030c(0x23b);else _0x2a368b==_0x37030c(0x139)&&(_0x156477['orderstatus']=_0x37030c(0x162));}}lastBalances={...lastBalances,'portfolio':JSON[_0x37030c(0x237)](_0x435875)},proxyEmit(_0x37030c(0x111),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x36f505=_0x4cf01b;await getOpenOrders();let _0x5805d3=![];currentCoins[_0x36f505(0x1c0)](_0x10f1c7=>{const _0x3d33fd=_0x36f505;_0x5805d3=allOpenOrders[_0x3d33fd(0x125)](_0x303d4c=>_0x303d4c[_0x3d33fd(0xdc)]==_0x10f1c7[_0x3d33fd(0xdc)]),_0x10f1c7[_0x3d33fd(0x187)]=_0x5805d3?_0x3d33fd(0xf9):'none';});}async function getCoins(_0x22ea56=!![],_0xfd7313=config[_0x4cf01b(0x11f)]){const _0x38ae1c=_0x4cf01b;let _0x323c12,_0x38520f=[],_0x1fda36=[],_0x43c2ca=[],_0x472592=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x323c12=await exchange['fetchBalance'](),mybalances=_0x323c12[_0x38ae1c(0x201)];for(const [_0xde94ae,_0x2d7fc0]of Object['entries'](mybalances)){_0x472592['push'](_0xde94ae);}if(_0xfd7313=='')for(const [_0x11f902,_0x3e5975]of Object[_0x38ae1c(0x128)](mybalances)){_0x3e5975[_0x38ae1c(0x136)]()!=0x0&&_0x1fda36['push']({'coin':_0x11f902});}else{let _0x39d75d=![];for(const [_0x2186f4,_0x598a91]of Object['entries'](mybalances)){if(_0x472592[_0x38ae1c(0x19a)](_0x2186f4)){const _0xa91fda=config['portfolio']['find'](_0x28f949=>_0x28f949['coin']==_0x2186f4),_0x36c18c=_0x2186f4+'/'+_0xfd7313,_0x34bc74=_0xfd7313+'/'+_0x2186f4,_0x1631d3=currentCoins[_0x38ae1c(0x125)](_0x4956fc=>_0x4956fc[_0x38ae1c(0x14b)]==_0x2186f4);_0x39d75d=![];if((_0x598a91[_0x38ae1c(0x136)]()!=0x0||_0xa91fda)&&(allSymbols[_0x38ae1c(0x19a)](_0x36c18c)||_0x2186f4==_0xfd7313))_0x2186f4!=_0xfd7313&&_0x38520f[_0x38ae1c(0x1b6)](_0x36c18c),_0x1fda36[_0x38ae1c(0x1b6)]({'coin':_0x2186f4,'symbol':_0x36c18c,'reverse':![],'number':Math['max'](_0x598a91+(_0xa91fda&&_0xa91fda['offset']||0x0),0x0),'orderstatus':_0x1631d3?_0x1631d3[_0x38ae1c(0x187)]:'none'});else(_0x598a91['toString']()!=0x0||_0xa91fda)&&allSymbols[_0x38ae1c(0x19a)](_0x34bc74)&&(_0x2186f4!=_0xfd7313&&_0x38520f[_0x38ae1c(0x1b6)](_0x34bc74),_0x1fda36[_0x38ae1c(0x1b6)]({'coin':_0x2186f4,'symbol':_0x34bc74,'reverse':!![],'number':Math[_0x38ae1c(0x133)](_0x598a91+(_0xa91fda&&_0xa91fda[_0x38ae1c(0x14c)]||0x0),0x0),'orderstatus':_0x1631d3?_0x1631d3[_0x38ae1c(0x187)]:_0x38ae1c(0x1b9)}));}}}}catch(_0x492147){if(!_0x22ea56)handleErrorNoStop(_0x492147,_0x38ae1c(0x224));else await handleError(_0x492147,'getCoins()');}return _0x43c2ca=cloneDeep(_0x1fda36),_0x1fda36=_0x1fda36[_0x38ae1c(0x1d8)](_0x8d60e3=>{const _0x5a3711=_0x38ae1c,_0x3c9e14=config[_0x5a3711(0x112)][_0x5a3711(0x125)](_0x5670a7=>_0x5670a7[_0x5a3711(0x14b)]==_0x8d60e3[_0x5a3711(0x14b)]);return _0x3c9e14&&!_0x3c9e14[_0x5a3711(0x1ce)];}),[_0x1fda36,_0x43c2ca];}async function getCoinNumber(_0x183948){const _0x44b864=_0x4cf01b;let _0x347964;try{const _0xd9d366=await exchange[_0x44b864(0x1cd)]();_0x347964=_0xd9d366[_0x44b864(0x201)][_0x183948];}catch(_0x5ab2a0){await handleError(_0x5ab2a0,_0x44b864(0x213));}return _0x347964;}async function getOpenOrders(){const _0x5f2d62=_0x4cf01b;let _0x18ed30;allOpenOrders=[];try{for(const _0x2019c6 of config[_0x5f2d62(0x112)]){!_0x2019c6[_0x5f2d62(0x1ce)]&&_0x2019c6[_0x5f2d62(0x14b)]!=config['basecoin']&&(_0x18ed30=await exchange['fetchOpenOrders'](_0x2019c6[_0x5f2d62(0xdc)]),_0x18ed30[_0x5f2d62(0x178)]>0x0&&allOpenOrders[_0x5f2d62(0x1b6)](_0x18ed30[0x0]));}}catch(_0x526dbd){await handleError(_0x526dbd,_0x5f2d62(0xff));}}async function handleOpenOrders(_0x56f8ef=0x0){const _0x42abdd=_0x4cf01b;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x42abdd(0x232)]&&allOrdersPlaced&&(_0x56f8ef==0x0?(logger[_0x42abdd(0x204)](_0x42abdd(0xdf)),_0x56f8ef++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x42abdd(0x204)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x11bfd0){const _0x14cbad=_0x4cf01b,_0x236c00=ccxt[_0x11bfd0[_0x14cbad(0xf0)][_0x14cbad(0x1be)]()],_0x39b074=new _0x236c00({'apiKey':_0x11bfd0[_0x14cbad(0x1d7)],'secret':_0x11bfd0['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x11bfd0[_0x14cbad(0x254)])_0x39b074[_0x14cbad(0x12c)]=_0x11bfd0[_0x14cbad(0x254)];try{await _0x39b074['loadMarkets']();}catch(_0xacd3ba){throw _0xacd3ba;}}function cloneDeep(_0x1dcf78){const _0x3fc81a=_0x4cf01b;return JSON[_0x3fc81a(0x1d4)](JSON[_0x3fc81a(0x237)](_0x1dcf78));}async function getPortfolio(_0x5940df){const _0x4a6ba5=_0x4cf01b;let _0x5b7ef3=[],_0x3096df=[],_0x2f1d95=[],_0x3d81b7;if(_0x5940df[_0x4a6ba5(0x1d7)]!=='************'||_0x5940df[_0x4a6ba5(0x21a)]!=='************'||_0x5940df[_0x4a6ba5(0x254)]&&_0x5940df['apiPassword']!==_0x4a6ba5(0x1ed)){if(config[_0x4a6ba5(0xf0)]){if(_0x5940df[_0x4a6ba5(0x1d7)]==_0x4a6ba5(0x1ed))_0x5940df['apiKey']=config[_0x4a6ba5(0x1d7)];if(_0x5940df[_0x4a6ba5(0x21a)]==_0x4a6ba5(0x1ed))_0x5940df['apiSecret']=config[_0x4a6ba5(0x21a)];if(_0x5940df[_0x4a6ba5(0x254)]==_0x4a6ba5(0x1ed))_0x5940df[_0x4a6ba5(0x254)]=config[_0x4a6ba5(0x254)];try{await testAPI(_0x5940df);}catch(_0x17e0f4){if(_0x17e0f4['toString']()[_0x4a6ba5(0x19a)]('AuthenticationError')){logger[_0x4a6ba5(0x204)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x4a6ba5(0x112),![]);return;}else{handleError(_0x17e0f4,_0x4a6ba5(0x155));return;}}}await initExchange(_0x5940df[_0x4a6ba5(0xf0)],_0x5940df[_0x4a6ba5(0x1d7)],_0x5940df['apiSecret'],_0x5940df[_0x4a6ba5(0x254)]);try{await loadSymbols(_0x5940df[_0x4a6ba5(0xf0)],!![]);}catch(_0x349f13){if(_0x349f13[_0x4a6ba5(0x136)]()[_0x4a6ba5(0x19a)](_0x4a6ba5(0x11d))){proxyEmit(_0x4a6ba5(0x112),![]);return;}else{handleError(_0x349f13,_0x4a6ba5(0x253));return;}}const _0x2fe50b=await getCoins(![],_0x5940df[_0x4a6ba5(0x11f)]);_0x2f1d95=cloneDeep(_0x2fe50b[0x1]);}else _0x2f1d95=cloneDeep(currentCoinsAll);if(_0x5940df[_0x4a6ba5(0x11f)]=='')proxyEmit(_0x4a6ba5(0x112),_0x2f1d95);else{_0x2f1d95[_0x4a6ba5(0x1c0)](_0x3ea63c=>{const _0x57569d=_0x4a6ba5;if(_0x3ea63c[_0x57569d(0x14b)]!=_0x5940df[_0x57569d(0x11f)])_0x5b7ef3[_0x57569d(0x1b6)](_0x3ea63c[_0x57569d(0xdc)]);});try{_0x3096df=await exchange[_0x4a6ba5(0x1d3)](_0x5b7ef3);}catch(_0x56b633){if(_0x56b633[_0x4a6ba5(0x136)]()[_0x4a6ba5(0x19a)]('AuthenticationError')){proxyEmit(_0x4a6ba5(0x112),![]);return;}else{handleError(_0x56b633,_0x4a6ba5(0x1fb));return;}}_0x2f1d95[_0x4a6ba5(0x1c0)](_0x155ba5=>{const _0x4146a0=_0x4a6ba5;_0x155ba5[_0x4146a0(0x14b)]!=_0x5940df[_0x4146a0(0x11f)]?_0x3d81b7=_0x155ba5[_0x4146a0(0x149)]?0x1/_0x3096df[_0x155ba5[_0x4146a0(0xdc)]]['last']:_0x3096df[_0x155ba5[_0x4146a0(0xdc)]][_0x4146a0(0x22d)]:_0x3d81b7=0x1,_0x155ba5[_0x4146a0(0x1a0)]=formatResult(_0x3d81b7,0x8);}),proxyEmit(_0x4a6ba5(0x112),_0x2f1d95);}}function truncateTradeAmount(_0x37d7d6,_0x4457cf){const _0x2e560f=_0x4cf01b;let _0xe6785d=0x0;try{_0xe6785d=exchange[_0x2e560f(0x143)](_0x37d7d6,_0x4457cf);}catch(_0x2260c4){}return _0xe6785d;}function checkMinimums(_0x495c55){const _0x1275c7=_0x4cf01b;let _0x453c9d=!![];const _0x328eed=!_0x495c55[_0x1275c7(0x149)]?markets[_0x495c55[_0x1275c7(0xdc)]]['limits'][_0x1275c7(0x234)][_0x1275c7(0x1a9)]:markets[_0x495c55[_0x1275c7(0xdc)]]['limits'][_0x1275c7(0x19d)][_0x1275c7(0x1a9)],_0x2ebcb2=!_0x495c55[_0x1275c7(0x149)]?markets[_0x495c55[_0x1275c7(0xdc)]]['limits'][_0x1275c7(0x19d)][_0x1275c7(0x1a9)]:markets[_0x495c55[_0x1275c7(0xdc)]][_0x1275c7(0x14e)]['amount']['min'],_0x27640e=truncateTradeAmount(_0x495c55[_0x1275c7(0xdc)],_0x495c55[_0x1275c7(0x1c2)]);_0x495c55['trade']=_0x27640e;if(Math['abs'](_0x27640e)<_0x328eed)_0x453c9d=![];if(Math[_0x1275c7(0xe1)](_0x27640e)*_0x495c55[_0x1275c7(0x22d)]<_0x2ebcb2)_0x453c9d=![];if(_0x495c55['side']==_0x1275c7(0x225)){let _0x76dbab=config[_0x1275c7(0x112)][_0x1275c7(0x125)](_0x48c935=>_0x48c935[_0x1275c7(0x14b)]==_0x495c55[_0x1275c7(0x14b)]);if(_0x76dbab[_0x1275c7(0x14c)]>0x0){if(Math[_0x1275c7(0xe1)](_0x27640e)>_0x495c55['number']-_0x76dbab[_0x1275c7(0x14c)])_0x453c9d=![];}else{if(Math['abs'](_0x27640e)>_0x495c55[_0x1275c7(0x19c)])_0x453c9d=![];}}if(_0x495c55[_0x1275c7(0x120)]==_0x1275c7(0x20c)){let _0x8618e1=config[_0x1275c7(0x112)][_0x1275c7(0x125)](_0xab225e=>_0xab225e[_0x1275c7(0x14b)]==config['basecoin']),_0x32a18f=currentCoins['find'](_0x43f6d9=>_0x43f6d9[_0x1275c7(0x14b)]==config[_0x1275c7(0x11f)]);if(_0x8618e1[_0x1275c7(0x14c)]>0x0){if(Math[_0x1275c7(0xe1)](_0x27640e)*_0x495c55[_0x1275c7(0x22d)]>_0x32a18f[_0x1275c7(0x19c)]-_0x8618e1[_0x1275c7(0x14c)])_0x453c9d=![];}else{if(Math[_0x1275c7(0xe1)](_0x27640e)*_0x495c55[_0x1275c7(0x22d)]>_0x32a18f[_0x1275c7(0x19c)])_0x453c9d=![];}}return _0x453c9d;}async function getBalances(_0x4491b8=!![]){const _0x173bf8=_0x4cf01b;let _0xc04510=0x0,_0x4680b4;const _0x119ed0=config[_0x173bf8(0x142)];if(config[_0x173bf8(0x15e)]&&config[_0x173bf8(0x150)]<0x0)await validate24hChanges();currentCoins[_0x173bf8(0x1c0)](_0x596430=>{const _0x1d7706=_0x173bf8;if(_0x596430['coin']!=config[_0x1d7706(0x11f)]){let _0x47afaf=global[_0x1d7706(0xf5)][noslash(_0x596430[_0x1d7706(0xdc)])];_0x4680b4=_0x596430['reverse']?0x1/_0x47afaf:_0x47afaf;}else _0x4680b4=0x1;let _0x4ab31e=_0x596430[_0x1d7706(0x19c)]*_0x4680b4;_0xc04510+=_0x4ab31e,_0x596430[_0x1d7706(0x22d)]=formatResult(Number(_0x4680b4),0x8),_0x596430['value']=_0x4ab31e;}),currentCoins[_0x173bf8(0x1c0)](_0x444861=>{const _0x54028f=_0x173bf8;let _0xc8a9dd=config[_0x54028f(0x112)][_0x54028f(0x125)](_0x619688=>_0x619688[_0x54028f(0x14b)]==_0x444861[_0x54028f(0x14b)]),_0x5f19c2=Number(_0xc8a9dd[_0x54028f(0x121)]),_0x58e32c=_0x444861[_0x54028f(0x118)]/_0xc04510*0x64,_0x46a4f1=_0x5f19c2*_0xc04510/0x64/_0x444861[_0x54028f(0x22d)]-_0x444861['number'];_0x444861[_0x54028f(0x121)]=formatResult(_0x58e32c,0x3),_0x444861[_0x54028f(0x199)]=formatResult(_0x5f19c2,0x3),_0x444861[_0x54028f(0x1c2)]=formatResult(_0x46a4f1,0x8),_0x444861[_0x54028f(0x120)]='',_0x444861[_0x54028f(0x16b)]=![];if(_0x444861[_0x54028f(0x14b)]!=config[_0x54028f(0x11f)]){if(_0x444861[_0x54028f(0x121)]>_0x5f19c2)_0x444861[_0x54028f(0x120)]='sell',_0x444861['valid']=checkMinimums(_0x444861);else _0x444861['distribution']<_0x5f19c2&&(_0x444861[_0x54028f(0x120)]=_0x54028f(0x20c),_0x444861[_0x54028f(0x16b)]=checkMinimums(_0x444861));}_0x444861[_0x54028f(0x247)]=_0x444861['distribution']/_0x444861[_0x54028f(0x199)]-0x1;if(_0x444861[_0x54028f(0x187)]==_0x54028f(0x162)||_0x444861['orderstatus']==_0x54028f(0x23b))_0x444861[_0x54028f(0x187)]='none';}),currentCoins['sort']((_0x1fad20,_0x32acdd)=>_0x1fad20[_0x173bf8(0x247)]<_0x32acdd['delta']?0x1:_0x32acdd[_0x173bf8(0x247)]<_0x1fad20[_0x173bf8(0x247)]?-0x1:0x0);const _0x243a4d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x243a4d[_0x173bf8(0x167)],'usd':_0x243a4d[_0x173bf8(0xeb)],'portfolio':JSON[_0x173bf8(0x237)](currentCoins),'threshold':_0x119ed0},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x4491b8){if(config[_0x173bf8(0x15e)])headlessMode({'portfolio':currentCoins,'threshold':_0x119ed0});else{if(lockOrders==ORDERS[_0x173bf8(0x1da)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x119ed0});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4365b2=getNormalizedPerformance();getStartingBalances(_0x4365b2),emitPerformance(_0x4365b2);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x37e366=getNormalizedPerformance();emitPerformance(_0x37e366),getStartingBalances(_0x37e366),logger[_0x173bf8(0x204)](_0x173bf8(0x148));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x33a6b8=_0x4cf01b;if(!lastBalances)return;let _0x50c4f1=[],_0x4558bc,_0x3ef5ff=JSON[_0x33a6b8(0x1d4)](lastBalances[_0x33a6b8(0x112)]);_0x3ef5ff['sort']((_0x47233e,_0x26e680)=>_0x47233e[_0x33a6b8(0x14b)]>_0x26e680['coin']?0x1:_0x26e680[_0x33a6b8(0x14b)]>_0x47233e[_0x33a6b8(0x14b)]?-0x1:0x0),_0x3ef5ff['forEach'](_0x717a36=>{const _0x159f16=_0x33a6b8;let _0x3c50f0={'coin':_0x717a36['coin'],'number':_0x717a36[_0x159f16(0x19c)],'price':_0x717a36[_0x159f16(0x22d)]};_0x50c4f1['push'](_0x3c50f0);});const _0x11e411=await getFiat();_0x4558bc={'date':lastBalances[_0x33a6b8(0x1e9)][_0x33a6b8(0x13e)]('\x20')[0x0],'eur':_0x11e411[_0x33a6b8(0x167)],'usd':_0x11e411['usd'],'coins':_0x50c4f1};let _0x3fcb8a=dbPerformance[_0x33a6b8(0x13d)]('data')[_0x33a6b8(0x125)]({'date':_0x4558bc['date']})['value']();_0x3fcb8a?_0x4558bc[_0x33a6b8(0x1b4)]!=config[_0x33a6b8(0xfc)]&&dbPerformance[_0x33a6b8(0x13d)](_0x33a6b8(0x1a7))[_0x33a6b8(0x125)]({'date':_0x4558bc[_0x33a6b8(0x1b4)]})[_0x33a6b8(0x259)](_0x4558bc)[_0x33a6b8(0x129)]():dbPerformance[_0x33a6b8(0x13d)](_0x33a6b8(0x1a7))[_0x33a6b8(0x1b6)](_0x4558bc)[_0x33a6b8(0x129)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2aa404=_0x4cf01b;let _0x117a7e=[];if(dbPerformance[_0x2aa404(0x127)]('data')[_0x2aa404(0x118)]()){let _0x5e7a80=dbPerformance[_0x2aa404(0x13d)](_0x2aa404(0x1a7))[_0x2aa404(0x169)]()[_0x2aa404(0x12e)](_0x2aa404(0x1b4))[_0x2aa404(0x118)](),_0xbce2aa=[...config[_0x2aa404(0xe3)]];_0xbce2aa[_0x2aa404(0x18d)]((_0x1b005b,_0xb3dce1)=>_0x1b005b[_0x2aa404(0x1b4)]>_0xb3dce1['date']?-0x1:_0xb3dce1[_0x2aa404(0x1b4)]>_0x1b005b['date']?0x1:0x0);let _0x361368=0x1,_0x162383=[],_0x15ad96=0x0;_0x5e7a80['slice']()['reverse']()[_0x2aa404(0x1c0)]((_0x24d613,_0xb46c4d)=>{const _0x2641eb=_0x2aa404;if(_0xbce2aa[_0x15ad96]){if(_0x5e7a80[_0x5e7a80[_0x2641eb(0x178)]-_0xb46c4d]&&_0xbce2aa[_0x15ad96][_0x2641eb(0x1b4)]==_0x5e7a80[_0x5e7a80['length']-_0xb46c4d][_0x2641eb(0x1b4)]){if(_0xb46c4d<_0x5e7a80[_0x2641eb(0x178)]){let _0x3f4637=0x0,_0x325569=0x0;_0x5e7a80[_0x5e7a80[_0x2641eb(0x178)]-_0xb46c4d][_0x2641eb(0x12d)][_0x2641eb(0x1c0)](_0xa3bb03=>{const _0x299a52=_0x2641eb;_0x325569+=_0xa3bb03[_0x299a52(0x19c)]*_0xa3bb03[_0x299a52(0x1a0)];}),_0xbce2aa[_0x15ad96][_0x2641eb(0x21e)][_0x2641eb(0x1c0)](_0x4b1b43=>{_0x3f4637+=_0x4b1b43['number']*_0x4b1b43['price'];}),_0x361368*=_0x3f4637/(_0x325569-_0x3f4637)+0x1;}_0x15ad96++;}}let _0x150e80=0x0;_0x24d613[_0x2641eb(0x12d)][_0x2641eb(0x1c0)](_0x36f4dd=>{const _0x20bfb3=_0x2641eb;_0x150e80+=_0x36f4dd[_0x20bfb3(0x19c)]*_0x36f4dd[_0x20bfb3(0x1a0)];}),_0x162383[_0x5e7a80[_0x2641eb(0x178)]-_0xb46c4d-0x1]=_0x150e80*(_0x361368-0x1);});let _0x40f5cc=[];_0xbce2aa=[...config[_0x2aa404(0xe3)]]||[];let _0x20ff57=0x0;_0x15ad96=0x0,_0x5e7a80[_0x2aa404(0x1c0)]((_0x1cae38,_0x445966)=>{const _0x4f0750=_0x2aa404;if(_0xbce2aa[_0x15ad96]){const _0x288699=fns[_0x4f0750(0x1d4)](_0xbce2aa[_0x15ad96]['date'],_0x4f0750(0xee),new Date()),_0x34d235=fns[_0x4f0750(0x1d4)](_0x1cae38['date'],_0x4f0750(0xee),new Date());if(fns[_0x4f0750(0x1d1)](_0x288699,_0x34d235)){let _0x2251b5=0x0;_0xbce2aa[_0x15ad96]['changes']['forEach'](_0x18d77a=>{const _0x243c0a=_0x4f0750;!_0x40f5cc[_0x18d77a[_0x243c0a(0x14b)]]?_0x40f5cc[_0x18d77a[_0x243c0a(0x14b)]]=_0x18d77a[_0x243c0a(0x19c)]:(_0x2251b5=_0x40f5cc[_0x18d77a['coin']],_0x40f5cc[_0x18d77a[_0x243c0a(0x14b)]]+=_0x18d77a[_0x243c0a(0x19c)]);const _0x38adf8=_0x1cae38['coins']['find'](_0x319dd7=>_0x319dd7[_0x243c0a(0x14b)]==_0x18d77a['coin']);(!_0x38adf8||_0x38adf8['number']==0x0)&&(_0x20ff57+=(-_0x18d77a[_0x243c0a(0x19c)]-_0x2251b5)*_0x18d77a['price']);}),_0x15ad96++;}}_0x1cae38[_0x4f0750(0x12d)][_0x4f0750(0x1c0)]((_0x1154bb,_0x5318c0)=>{const _0x28aa4e=_0x4f0750;_0x40f5cc[_0x1154bb[_0x28aa4e(0x14b)]]&&(_0x1154bb['initial']=_0x40f5cc[_0x1154bb['coin']]);}),_0x117a7e[_0x4f0750(0x1b6)]({'date':_0x1cae38[_0x4f0750(0x1b4)],'eur':_0x1cae38[_0x4f0750(0x167)],'usd':_0x1cae38['usd'],'offset':_0x162383[_0x445966],'netoffset':_0x20ff57,'coins':_0x1cae38['coins']});});}return _0x117a7e;}function emitPerformance(_0x1bd16f){const _0x3a3057=_0x4cf01b;_0x1bd16f[_0x3a3057(0x178)]!==0x0?(proxyEmit(_0x3a3057(0x246),_0x1bd16f),lastPerformanceEmitted=getDate()):proxyEmit(_0x3a3057(0x246),[]);}function getPerf(_0x4894c5,_0x6e6b14){const _0x29124c=_0x4cf01b;let _0x2f9f6b=0x0,_0x4a09ea=0x0,_0x1db9cd=0x0;_0x4894c5[_0x29124c(0x12d)][_0x29124c(0x1c0)](_0x579036=>{const _0x42aa16=_0x29124c;_0x2f9f6b+=_0x579036[_0x42aa16(0x19c)]*_0x579036['price'];});_0x6e6b14&&(_0x2f9f6b+=_0x4894c5['offset']);if(config[_0x29124c(0x11f)]==='BTC'||config['basecoin']===_0x29124c(0xf7))_0x4a09ea=_0x2f9f6b*_0x4894c5[_0x29124c(0x167)],_0x1db9cd=_0x2f9f6b*_0x4894c5[_0x29124c(0xeb)];else{if(config[_0x29124c(0x11f)]===_0x29124c(0x18c)||config[_0x29124c(0x11f)]===_0x29124c(0x176)||config[_0x29124c(0x11f)]===_0x29124c(0x126))_0x4a09ea=_0x2f9f6b*_0x4894c5[_0x29124c(0x167)]/_0x4894c5[_0x29124c(0xeb)],_0x1db9cd=_0x2f9f6b;else config['basecoin']===_0x29124c(0x16c)&&(_0x4a09ea=_0x2f9f6b,_0x1db9cd=_0x2f9f6b*_0x4894c5[_0x29124c(0xeb)]/_0x4894c5[_0x29124c(0x167)]);}return[_0x2f9f6b,_0x4a09ea,_0x1db9cd];}function getKPIs(_0x3226a7,_0x45c155='EUR'){const _0x2cde62=_0x4cf01b,_0xb3eaee=config[_0x2cde62(0x11f)],_0xc3f2aa=lastBalances,_0x380ee5=currentCoins,_0x44f686=getNormalizedPerformance(),_0x4d43bf=_0x3226a7===_0x2cde62(0x11f)?_0xb3eaee:_0x3226a7===_0x2cde62(0x1a4)||_0x3226a7==='net-fiat'?_0x45c155:_0x2cde62(0x243)+_0xb3eaee,_0x3fbaca=_0x3226a7===_0x2cde62(0x1a8)?_0x2cde62(0x24b):_0x3226a7===_0x2cde62(0x1ae)?_0x2cde62(0x24b):_0x4d43bf+'\x20value',_0x473c2d=_0x3226a7===_0x2cde62(0x1a8)||_0x3226a7==='net-fiat'?'Net\x20effect':_0x4d43bf+'\x20change';let _0x53b65b=0x0;_0x380ee5['forEach'](_0x4c7568=>{const _0x518ae3=_0x2cde62;_0x53b65b+=_0x4c7568[_0x518ae3(0x19c)]*_0x4c7568[_0x518ae3(0x22d)];});if(_0x3226a7===_0x2cde62(0x1a4)||_0x3226a7===_0x2cde62(0x1ae)){if(_0xb3eaee===_0x2cde62(0x17e)||_0xb3eaee===_0x2cde62(0xf7))_0x53b65b=_0x53b65b*(_0x45c155===_0x2cde62(0x16c)?_0xc3f2aa[_0x2cde62(0x167)]:_0xc3f2aa['usd']);else{if(_0xb3eaee===_0x2cde62(0x18c)||_0xb3eaee===_0x2cde62(0x176)||_0xb3eaee===_0x2cde62(0x126))_0x53b65b=_0x53b65b*(_0x45c155===_0x2cde62(0x16c)?_0xc3f2aa[_0x2cde62(0x167)]/_0xc3f2aa[_0x2cde62(0xeb)]:0x1);else _0xb3eaee===_0x2cde62(0x16c)&&(_0x53b65b=_0x53b65b*(_0x45c155===_0x2cde62(0x16c)?0x1:_0xc3f2aa[_0x2cde62(0xeb)]/_0xc3f2aa[_0x2cde62(0x167)]));}}let _0x476205;if(_0x53b65b!==0x0){if(_0x3226a7===_0x2cde62(0x11f))_0x476205=(_0x53b65b/startingBalances['basecoin']-0x1)*0x64;else{if(_0x45c155===_0x2cde62(0x16c))_0x476205=(_0x53b65b/startingBalances[_0x2cde62(0x167)]-0x1)*0x64;else _0x476205=(_0x53b65b/startingBalances[_0x2cde62(0xeb)]-0x1)*0x64;}let _0x4a6362=0x0;if(startingBalances[_0x2cde62(0x12d)])_0x380ee5[_0x2cde62(0x1c0)](_0x33a95f=>{const _0x2881b2=_0x2cde62;let _0xd9a2a9=startingBalances[_0x2881b2(0x12d)][_0x2881b2(0x125)](_0x41058b=>_0x41058b['coin']===_0x33a95f[_0x2881b2(0x14b)]);if(_0xd9a2a9&&_0xd9a2a9[_0x2881b2(0x14b)]&&_0x33a95f[_0x2881b2(0x19c)]!==0x0)_0x4a6362+=_0xd9a2a9[_0x2881b2(0x19c)]*_0x33a95f[_0x2881b2(0x22d)];});let _0x21164e=0x0;if(_0x44f686[_0x2cde62(0x178)]!==0x0){let _0x4c3224=_0x44f686[_0x44f686['length']-0x1];_0x21164e=_0x4c3224[_0x2cde62(0x229)];}_0x4a6362-=_0x21164e;_0x3226a7==='net-basecoin'&&(_0x476205=(_0x53b65b-_0x4a6362)/startingBalances[_0x2cde62(0x11f)]*0x64,_0x53b65b=_0x53b65b-_0x4a6362);if(_0x3226a7==='net-fiat'){let _0x49e41a=_0x45c155==='EUR'?startingBalances['eur']:startingBalances[_0x2cde62(0xeb)];if(_0xb3eaee===_0x2cde62(0x17e)||_0xb3eaee===_0x2cde62(0xf7))_0x4a6362=_0x45c155===_0x2cde62(0x16c)?_0x4a6362*_0xc3f2aa[_0x2cde62(0x167)]:_0x4a6362*_0xc3f2aa[_0x2cde62(0xeb)];else{if(_0xb3eaee===_0x2cde62(0x18c)||_0xb3eaee===_0x2cde62(0x176)||_0xb3eaee===_0x2cde62(0x126))_0x4a6362=_0x45c155===_0x2cde62(0x16c)?_0x4a6362*_0xc3f2aa[_0x2cde62(0x167)]/_0xc3f2aa[_0x2cde62(0xeb)]:_0x4a6362;else _0xb3eaee===_0x2cde62(0x16c)&&(_0x4a6362=_0x45c155===_0x2cde62(0x16c)?_0x4a6362:_0x4a6362*_0xc3f2aa[_0x2cde62(0xeb)]/_0xc3f2aa[_0x2cde62(0x167)]);}_0x476205=(_0x53b65b-_0x4a6362)/_0x49e41a*0x64,_0x53b65b=_0x53b65b-_0x4a6362;}if(_0x476205){if(_0x476205<0x64)_0x476205=_0x476205[_0x2cde62(0x189)](0x2);else{if(_0x476205<0x3e8)_0x476205=_0x476205[_0x2cde62(0x189)](0x1);else _0x476205=_0x476205['toFixed'](0x0);}}else _0x476205=Number('0')[_0x2cde62(0x189)](0x2);if(_0x53b65b){if(Math[_0x2cde62(0xe1)](_0x53b65b)<0.000001)_0x53b65b=_0x53b65b['toFixed'](0x2);else{if(Math[_0x2cde62(0xe1)](_0x53b65b)<0.1)_0x53b65b=_0x53b65b['toFixed'](0x6);else{if(Math[_0x2cde62(0xe1)](_0x53b65b)<0x1)_0x53b65b=_0x53b65b[_0x2cde62(0x189)](0x5);else{if(Math[_0x2cde62(0xe1)](_0x53b65b)<0xa)_0x53b65b=_0x53b65b[_0x2cde62(0x189)](0x4);else{if(Math[_0x2cde62(0xe1)](_0x53b65b)<0x64)_0x53b65b=_0x53b65b[_0x2cde62(0x189)](0x3);else{if(Math[_0x2cde62(0xe1)](_0x53b65b)<0x3e8)_0x53b65b=_0x53b65b[_0x2cde62(0x189)](0x2);else _0x53b65b=_0x53b65b[_0x2cde62(0x189)](0x2);}}}}}}else _0x53b65b=Number('0')[_0x2cde62(0x189)](0x2);}else _0x476205=Number('0')[_0x2cde62(0x189)](0x2);return{'value':_0x53b65b,'change':_0x476205,'leftTxt':_0x3fbaca,'rightTxt':_0x473c2d};}async function getStartingBalances(_0x4769da,_0x5dd7c1=!![]){const _0x29283e=_0x4cf01b;if(_0x4769da[_0x29283e(0x178)]!==0x0){const [_0x1423c0,_0x558594,_0x459895]=getPerf(_0x4769da[0x0],!![]);let _0x1f96c6=[];config['portfolio'][_0x29283e(0x1c0)](_0x43112a=>{const _0x286d27=_0x29283e;let _0x570042=0x0,_0x55b800;config[_0x286d27(0xe3)][_0x286d27(0x1c0)](_0xb1884e=>{const _0x536285=_0x286d27;let _0x286e87=_0xb1884e[_0x536285(0x21e)][_0x536285(0x125)](_0x1b6255=>_0x1b6255[_0x536285(0x14b)]==_0x43112a['coin']);if(_0x286e87){_0x570042+=_0x286e87[_0x536285(0x19c)];if(!_0x55b800)_0x55b800=_0x286e87[_0x536285(0x1a0)];}}),_0x1f96c6[_0x286d27(0x1b6)]({'coin':_0x43112a[_0x286d27(0x14b)],'number':_0x570042,'initialprice':_0x55b800});});const _0x52b30b={'basecoin':_0x1423c0,'eur':_0x558594,'usd':_0x459895,'coins':_0x1f96c6};if(_0x5dd7c1)proxyEmit(_0x29283e(0x1af),_0x52b30b);startingBalances=_0x52b30b;}}function headlessMode(_0x2624e0){const _0x468b44=_0x4cf01b;let _0x5b35ba=_0x2624e0['portfolio'],_0x510e69=_0x2624e0[_0x468b44(0x142)],_0x455e23=[];for(let _0x5f23ac of _0x5b35ba){if(_0x5f23ac[_0x468b44(0x14b)]!=config[_0x468b44(0x11f)]){if(_0x5f23ac[_0x468b44(0x247)]>=_0x510e69/0x64){if(_0x5f23ac['valid'])_0x455e23['push'](_0x5f23ac);}else{if(_0x5f23ac[_0x468b44(0x247)]<=-_0x510e69/0x64){if(_0x5f23ac[_0x468b44(0x16b)])_0x455e23['push'](_0x5f23ac);}}}}_0x455e23['length']>0x0&&placeOrder(_0x455e23);}function notifyBalance(_0x686f7f){const _0x226343=_0x4cf01b;let _0x1eee42=_0x686f7f['portfolio'],_0x272024=_0x686f7f[_0x226343(0x142)],_0x571c31=[];for(let _0x445eed of _0x1eee42){if(_0x445eed[_0x226343(0x14b)]!=config[_0x226343(0x11f)]){if(_0x445eed[_0x226343(0x247)]>=_0x272024/0x64){if(_0x445eed[_0x226343(0x16b)])_0x571c31[_0x226343(0x1b6)](_0x445eed);}else{if(_0x445eed[_0x226343(0x247)]<=-_0x272024/0x64){if(_0x445eed[_0x226343(0x16b)])_0x571c31[_0x226343(0x1b6)](_0x445eed);}}}}if(_0x571c31['length']>0x0){let _0x1b83c9=_0x571c31[_0x226343(0x223)](_0x12c39e=>_0x12c39e[_0x226343(0x14b)]);_0x1b83c9[_0x226343(0x18d)]();let _0x23e31e=_0x1b83c9[_0x226343(0x175)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x226343(0x245));lastCoinsToBalance=_0x23e31e;}}function symbolToCoin(_0x5b9c4c){const _0x23ff4b=_0x4cf01b;let _0x4ef72d;if(_0x5b9c4c[_0x23ff4b(0x19a)]('/'+config[_0x23ff4b(0x11f)]))_0x4ef72d=_0x5b9c4c[_0x23ff4b(0xed)]('/'+config['basecoin'],'');if(_0x5b9c4c[_0x23ff4b(0x19a)](config[_0x23ff4b(0x11f)]+'/'))_0x4ef72d=_0x5b9c4c[_0x23ff4b(0xed)](config['basecoin']+'/','');return _0x4ef72d;}async function unlockOrders(){const _0x12a6a2=_0x4cf01b;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x12a6a2(0x204)](_0x12a6a2(0x21b)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x39c7ce=await getCoins();[currentCoins,currentCoinsAll]=_0x39c7ce,validateOrdersState=_0x12a6a2(0x22c),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x12a6a2(0x204)](_0x12a6a2(0x113));}}async function validateOrders(_0x2c8c9b){const _0x14d67a=_0x4cf01b;if(_0x2c8c9b)validateOrdersState=_0x2c8c9b;logger[_0x14d67a(0x204)](_0x14d67a(0x1f0)+validateOrdersState+_0x14d67a(0x147)+(lockOrders==0x1?_0x14d67a(0x244):lockOrders==0x2?_0x14d67a(0x106):_0x14d67a(0x130)));let _0x45b618=[],_0x8ea2fc=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x14d67a(0xf1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x14d67a(0x232)])return;logger[_0x14d67a(0x204)](_0x14d67a(0x1e4)+validateOrdersState),lastOrders[_0x14d67a(0x1c0)](_0x56d106=>{const _0x5a1538=_0x14d67a;let _0x3acd78=![];_0x56d106[_0x5a1538(0x162)]>0x0&&(_0x3acd78=!![]),_0x45b618[_0x5a1538(0x1b6)](_0x3acd78),_0x3acd78&&config['ordertype']!=_0x5a1538(0x1b7)&&logHistory('order',_0x5a1538(0x16d)+_0x56d106['symbol']+'\x20'+_0x56d106[_0x5a1538(0x120)]+'\x20#'+formatResult(_0x56d106[_0x5a1538(0x162)],0x8)+'\x20@'+formatResult(_0x56d106[_0x5a1538(0x1a0)],0x8));}),_0x45b618['forEach']((_0x24b0f4,_0x37d377)=>{const _0x245a43=_0x14d67a;if(_0x24b0f4)lastOrders[_0x245a43(0x172)](_0x37d377,0x1);}),persistOpenOrders(lastOrders);const _0x4bffad=coolingDown?_0x14d67a(0x23d):_0x14d67a(0x115);if(validateOrdersState==_0x14d67a(0x22c)){validateOrdersState=_0x14d67a(0x208);if(_0x45b618[_0x14d67a(0x19a)](![])){if(config[_0x14d67a(0x1df)]==_0x14d67a(0x1b7)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x45b618[_0x14d67a(0x19a)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x14d67a(0x1b7)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x14d67a(0x1ac))_0x45b618[_0x14d67a(0x19a)](![])&&(config[_0x14d67a(0x1df)]==_0x14d67a(0x1b7)?logHistory('success',_0x14d67a(0x22f)+Math[_0x14d67a(0x146)](_0x8ea2fc*validateOrderInterval/0xea60)+_0x14d67a(0x23c)+_0x4bffad):(await cancelOrders(),logHistory('success',_0x14d67a(0x1c8)+Math[_0x14d67a(0x146)](_0x8ea2fc*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4bffad))),await unlockOrders();else{if(validateOrdersState==_0x14d67a(0x1f1)){if(config[_0x14d67a(0x1df)]!=_0x14d67a(0x1b7))logHistory(_0x14d67a(0x23a),_0x14d67a(0x124)+_0x4bffad);await unlockOrders();}}}}}async function cancelOrders(){const _0x17c25f=_0x4cf01b;lastOrders[_0x17c25f(0x1c0)](async _0x28e3a4=>{const _0x29fd35=_0x17c25f;try{const _0x3b75df=await exchange[_0x29fd35(0x156)](_0x28e3a4[_0x29fd35(0x1ff)],_0x28e3a4[_0x29fd35(0xdc)]);}catch(_0x2a24de){if(_0x2a24de[_0x29fd35(0x136)]()['includes'](_0x29fd35(0x1d5))){}else await handleError(_0x2a24de,'cancelOrders()');}});}async function initCoinResults(_0x7b3641){const _0x54d1d6=_0x4cf01b;_0x7b3641?logger[_0x54d1d6(0x204)]('Resetting\x20coin\x20results:\x20'+_0x7b3641):logger[_0x54d1d6(0x204)](_0x54d1d6(0x1c9)),config['portfolio'][_0x54d1d6(0x1c0)](_0x3949f7=>{const _0x11e43b=_0x54d1d6;if(!_0x3949f7[_0x11e43b(0x1ce)]&&_0x3949f7[_0x11e43b(0x14b)]!=config[_0x11e43b(0x11f)]){const _0x297fe0=currentCoins['find'](_0x35a440=>_0x35a440['coin']==_0x3949f7[_0x11e43b(0x14b)]),_0x5bc261=global[_0x11e43b(0xf5)][noslash(_0x3949f7['symbol'])];let _0x2ddd06=_0x297fe0?_0x297fe0[_0x11e43b(0x19c)]:null,_0x3da08a=_0x3949f7[_0x11e43b(0x149)]?0x1/_0x5bc261:_0x5bc261,_0x443168;config[_0x11e43b(0xe3)]['forEach'](_0x2f252d=>{const _0x1d8844=_0x11e43b;!_0x443168&&(_0x443168=_0x2f252d[_0x1d8844(0x21e)][_0x1d8844(0x125)](_0x24844c=>_0x24844c[_0x1d8844(0x14b)]==_0x3949f7[_0x1d8844(0x14b)]),_0x443168&&(_0x2ddd06=_0x443168[_0x1d8844(0x19c)],_0x3da08a=_0x443168[_0x1d8844(0x1a0)]));});let _0x9dd722=dbCoinResults[_0x11e43b(0x13d)](_0x11e43b(0x12d))[_0x11e43b(0x125)]({'coin':_0x3949f7[_0x11e43b(0x14b)]})['value']();if(!_0x9dd722){const _0x5a0691={'coin':_0x3949f7[_0x11e43b(0x14b)],'number':_0x2ddd06,'breakeven':_0x3da08a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x11e43b(0x13d)](_0x11e43b(0x12d))[_0x11e43b(0x1b6)](_0x5a0691)['write']();}else{if(_0x7b3641&&_0x3949f7[_0x11e43b(0x14b)]==_0x7b3641){const _0x463927={'coin':_0x3949f7[_0x11e43b(0x14b)],'number':_0x2ddd06,'breakeven':_0x3da08a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x11e43b(0x125)]({'coin':_0x3949f7['coin']})[_0x11e43b(0x259)](_0x463927)['write']();}}}});}async function updateCoinResults(_0x4b650a,_0x6ab8b=![]){const _0xf9a5a4=_0x4cf01b;let _0x2aa426,_0x35fb81,_0x3d4f71,_0x139b58,_0x58fdcc,_0xdea9ae,_0x1103a8=dbCoinResults[_0xf9a5a4(0x13d)](_0xf9a5a4(0x12d))[_0xf9a5a4(0x125)]({'coin':_0x4b650a[_0xf9a5a4(0x14b)]})['value'](),_0x30d970=![];Object[_0xf9a5a4(0x128)](_0x1103a8)[_0xf9a5a4(0x1c0)](([_0x231261,_0x1954a1])=>{if(_0x1954a1==null)_0x30d970=!![];});(!_0x1103a8||_0x30d970)&&(await initCoinResults(_0x4b650a['coin']),_0x1103a8=dbCoinResults[_0xf9a5a4(0x13d)](_0xf9a5a4(0x12d))[_0xf9a5a4(0x125)]({'coin':_0x4b650a['coin']})[_0xf9a5a4(0x118)]());_0x4b650a[_0xf9a5a4(0x149)]&&(_0xdea9ae={'filled':_0x4b650a[_0xf9a5a4(0x162)]*_0x4b650a[_0xf9a5a4(0x1a0)],'amount':_0x4b650a[_0xf9a5a4(0x162)]*_0x4b650a['price'],'side':_0x4b650a[_0xf9a5a4(0x120)]==_0xf9a5a4(0x225)?_0xf9a5a4(0x20c):'sell','price':0x1/_0x4b650a[_0xf9a5a4(0x1a0)]},_0x4b650a={..._0x4b650a,..._0xdea9ae});_0x6ab8b?_0x35fb81=_0x4b650a[_0xf9a5a4(0x120)]=='buy'?_0x1103a8[_0xf9a5a4(0x19c)]+_0x4b650a[_0xf9a5a4(0x162)]:_0x1103a8[_0xf9a5a4(0x19c)]-_0x4b650a['filled']:_0x35fb81=await getCoinNumber(_0x4b650a[_0xf9a5a4(0x14b)]);if(_0x4b650a[_0xf9a5a4(0x1f7)]&&_0x4b650a['fee'][_0xf9a5a4(0x22a)]==config[_0xf9a5a4(0x11f)])_0x2aa426=_0x4b650a[_0xf9a5a4(0x1f7)][_0xf9a5a4(0x19d)];else{if(_0x4b650a[_0xf9a5a4(0x1f7)]&&_0x4b650a[_0xf9a5a4(0x1f7)][_0xf9a5a4(0x22a)]==_0xf9a5a4(0x23f)&&!_0x6ab8b)_0x2aa426=_0x4b650a[_0xf9a5a4(0x1f7)][_0xf9a5a4(0x19d)]*global[_0xf9a5a4(0xf5)]['BNB'+config['basecoin']];else _0x2aa426=defaultFee*_0x4b650a[_0xf9a5a4(0x162)]*_0x4b650a[_0xf9a5a4(0x1a0)];}_0x4b650a[_0xf9a5a4(0x120)]==_0xf9a5a4(0x20c)?(_0x3d4f71=_0x35fb81!=0x0?(_0x1103a8[_0xf9a5a4(0x16e)]*_0x1103a8['number']+_0x4b650a['price']*(_0x35fb81-_0x1103a8[_0xf9a5a4(0x19c)])+_0x2aa426)/_0x35fb81:0x0,_0x139b58=_0x1103a8[_0xf9a5a4(0x1bb)]):(_0x3d4f71=_0x35fb81!=0x0?(_0x1103a8[_0xf9a5a4(0x16e)]*_0x1103a8[_0xf9a5a4(0x19c)]-_0x4b650a['price']*(_0x1103a8['number']-_0x35fb81)+_0x2aa426)/_0x35fb81:0x0,_0x139b58=_0x1103a8[_0xf9a5a4(0x1bb)]+(_0x4b650a[_0xf9a5a4(0x1a0)]-_0x1103a8[_0xf9a5a4(0x16e)])*_0x4b650a[_0xf9a5a4(0x162)]);_0x58fdcc=(_0x4b650a[_0xf9a5a4(0x1a0)]-_0x3d4f71-_0x2aa426/_0x4b650a['filled'])*_0x35fb81;let _0x1b4545={'coin':_0x4b650a['coin'],'number':_0x35fb81,'breakeven':formatResult(_0x3d4f71,0x8),'realized':formatResult(_0x139b58,0x8),'unrealized':formatResult(_0x58fdcc,0x8),'fees':formatResult(_0x1103a8[_0xf9a5a4(0x1e6)]+_0x2aa426,0x8),'sells':_0x4b650a[_0xf9a5a4(0x120)]==_0xf9a5a4(0x225)?_0x1103a8[_0xf9a5a4(0x220)]+0x1:_0x1103a8[_0xf9a5a4(0x220)],'buys':_0x4b650a[_0xf9a5a4(0x120)]==_0xf9a5a4(0x20c)?_0x1103a8[_0xf9a5a4(0x20e)]+0x1:_0x1103a8[_0xf9a5a4(0x20e)]};dbCoinResults['get']('coins')[_0xf9a5a4(0x125)]({'coin':_0x4b650a[_0xf9a5a4(0x14b)]})[_0xf9a5a4(0x259)](_0x1b4545)[_0xf9a5a4(0x129)]();if(!_0x6ab8b){if(_0x4b650a[_0xf9a5a4(0x1f7)]&&_0x4b650a[_0xf9a5a4(0x1f7)][_0xf9a5a4(0x22a)]==_0xf9a5a4(0x23f)){const _0x1d42ea=currentCoins[_0xf9a5a4(0x125)](_0x48369f=>_0x48369f[_0xf9a5a4(0x14b)]==_0xf9a5a4(0x23f));if(_0x1d42ea){let _0x6e5b09=dbCoinResults[_0xf9a5a4(0x13d)](_0xf9a5a4(0x12d))[_0xf9a5a4(0x125)]({'coin':_0xf9a5a4(0x23f)})['value']();_0x1b4545={..._0x6e5b09,'number':_0x1d42ea[_0xf9a5a4(0x19c)]},dbCoinResults[_0xf9a5a4(0x13d)](_0xf9a5a4(0x12d))[_0xf9a5a4(0x125)]({'coin':_0xf9a5a4(0x23f)})[_0xf9a5a4(0x259)](_0x1b4545)[_0xf9a5a4(0x129)]();}}}}async function placeOrder(_0x1f8036){const _0x21026e=_0x4cf01b,_0x1b335f=config[_0x21026e(0x1df)]==_0x21026e(0x1b7)?_0x21026e(0x1b7):_0x21026e(0x1a3);if(lockOrders==ORDERS[_0x21026e(0x1da)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x34de0a=![];lastOrders=[];for(const _0x2b3255 of _0x1f8036){let _0x5d3cde,_0x311b95,_0x2bafa1,_0x5ed3ae,_0x1ab29f,_0x3cf87c=_0x2b3255[_0x21026e(0xdc)];try{const _0x1ae0bd=await exchange[_0x21026e(0x251)](_0x3cf87c);_0x5d3cde=_0x2b3255[_0x21026e(0x149)]?0x1/_0x2b3255['last']:_0x2b3255['last'],_0x311b95=_0x1ae0bd['bid'],_0x2bafa1=_0x1ae0bd[_0x21026e(0x1ca)];_0x2b3255[_0x21026e(0x149)]?(_0x5ed3ae=_0x2b3255[_0x21026e(0x120)]=='buy'?'sell':_0x21026e(0x20c),_0x1ab29f=Math[_0x21026e(0xe1)](_0x2b3255[_0x21026e(0x1c2)])/_0x5d3cde):(_0x5ed3ae=_0x2b3255[_0x21026e(0x120)],_0x1ab29f=Math['abs'](_0x2b3255[_0x21026e(0x1c2)]));_0x1b335f==_0x21026e(0x1a3)&&(config[_0x21026e(0x1df)]==_0x21026e(0x193)&&(_0x5d3cde=_0x5ed3ae==_0x21026e(0x20c)?_0x311b95:_0x2bafa1),config['ordertype']==_0x21026e(0x16a)&&(_0x5d3cde=_0x5ed3ae==_0x21026e(0x20c)?_0x2bafa1:_0x311b95));_0x1ab29f=formatResult(_0x1ab29f,0x8),_0x5d3cde=formatResult(_0x5d3cde,0x8);const _0x261a13=_0x5ed3ae==_0x21026e(0x225)?config[_0x21026e(0x1e5)]?String[_0x21026e(0xda)]('0x'+config[_0x21026e(0x1e5)])+'\x20':'':config[_0x21026e(0x235)]?String[_0x21026e(0xda)]('0x'+config[_0x21026e(0x235)])+'\x20':'',_0x42d57d=_0x1b335f=='market'?_0x21026e(0x1ee):config[_0x21026e(0x1df)]==_0x21026e(0x193)?_0x21026e(0xdd):_0x21026e(0xf4),_0x39675c=(Math[_0x21026e(0x19b)](Math[_0x21026e(0x20d)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x21026e(0x1b6)]({'customId':_0x39675c,'symbol':_0x3cf87c,'coin':_0x2b3255[_0x21026e(0x14b)],'amount':_0x1ab29f,'price':_0x5d3cde,'side':_0x5ed3ae,'reverse':_0x2b3255['reverse'],'filled':0x0});if(_0x1b335f==_0x21026e(0x1b7))logHistory(_0x21026e(0x19e),''+_0x261a13+_0x42d57d+_0x21026e(0x185)+_0x3cf87c+'\x20'+_0x5ed3ae+'\x20#'+formatResult(_0x1ab29f,0x8)+'\x20@'+formatResult(_0x5d3cde,0x8));else logHistory('order',''+_0x261a13+_0x42d57d+_0x21026e(0x185)+_0x3cf87c+'\x20'+_0x5ed3ae+'\x20#'+formatResult(_0x1ab29f,0x8)+'\x20@'+formatResult(_0x5d3cde,0x8));const _0x173fa3=await exchange['createOrder'](_0x3cf87c,_0x1b335f,_0x5ed3ae,_0x1ab29f,_0x5d3cde,{'clientOrderId':_0x39675c}),_0x446b9d=lastOrders[_0x21026e(0x178)]-0x1;if(_0x446b9d>=0x0&&lastOrders[_0x446b9d][_0x21026e(0x110)]==_0x39675c){lastOrders[_0x446b9d][_0x21026e(0x1ff)]=_0x173fa3['id'];if(_0x173fa3[_0x21026e(0x234)])lastOrders[_0x446b9d][_0x21026e(0x234)]=_0x173fa3[_0x21026e(0x234)];if(_0x173fa3[_0x21026e(0x1a0)])lastOrders[_0x446b9d][_0x21026e(0x1a0)]=_0x173fa3[_0x21026e(0x1a0)];lastOrders[_0x446b9d]['fee']=_0x173fa3[_0x21026e(0x1f7)];}if(config['cooldown']!=0x0){let _0x39953f=null;if(cooldownTracker[_0x21026e(0x178)]==config[_0x21026e(0x196)]-0x1)_0x39953f=cooldownTracker[_0x21026e(0xe6)]();const _0x1c09f5=getTimeStamp();cooldownTracker[_0x21026e(0x1b6)](_0x1c09f5);if(_0x39953f){const _0x2f6c31=fns['differenceInSeconds'](new Date(_0x1c09f5),new Date(_0x39953f));if(_0x2f6c31<cooldownInterval){logHistory(_0x21026e(0x11b),'Executed\x20'+config[_0x21026e(0x196)]+_0x21026e(0x1a6)+cooldownInterval/0x3c+_0x21026e(0x1e3)+cooldownPeriod/(0xe10*0x3e8)+_0x21026e(0x137)),coolingDown=!![];break;}}}}catch(_0x58bd0d){if(_0x58bd0d[_0x21026e(0x136)]()['includes'](_0x21026e(0x184)))lastOrders=lastOrders[_0x21026e(0x1d8)](_0x508011=>_0x508011['symbol']!=_0x3cf87c),logHistory(_0x21026e(0x11b),_0x21026e(0x191)+_0x3cf87c),_0x34de0a=!![];else{if(_0x58bd0d['toString']()['includes'](_0x21026e(0x1f6)))lastOrders=lastOrders[_0x21026e(0x1d8)](_0x43ec97=>_0x43ec97[_0x21026e(0xdc)]!=_0x3cf87c),logHistory(_0x21026e(0x11b),_0x21026e(0x1c7)+_0x3cf87c),_0x34de0a=!![];else{if(_0x58bd0d[_0x21026e(0x136)]()[_0x21026e(0x19a)](_0x21026e(0x210)))lastOrders=lastOrders[_0x21026e(0x1d8)](_0x18ccde=>_0x18ccde[_0x21026e(0xdc)]!=_0x3cf87c),logHistory('error',_0x21026e(0x1c4)+_0x3cf87c),_0x34de0a=!![];else _0x58bd0d[_0x21026e(0x136)]()[_0x21026e(0x19a)](_0x21026e(0x1cf))?(lastOrders=lastOrders[_0x21026e(0x1d8)](_0x565f6c=>_0x565f6c[_0x21026e(0xdc)]!=_0x3cf87c),logHistory(_0x21026e(0x11b),_0x21026e(0x191)+_0x3cf87c),_0x34de0a=!![]):(lastOrders=lastOrders[_0x21026e(0x1d8)](_0x2298c7=>_0x2298c7[_0x21026e(0xdc)]!=_0x3cf87c),await handleError(_0x58bd0d,'placeOrder()',_0x3cf87c));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x21026e(0x178)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x53ec82=config[_0x21026e(0x1df)]==_0x21026e(0x1b7)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2614d3=_0x21026e;validateOrders(_0x2614d3(0x1ac));},_0x53ec82);}else unlockOrders();_0x34de0a&&config[_0x21026e(0x15e)]&&await pauseBot(_0x21026e(0x21c)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x21026e(0x23a),_0x21026e(0x212)));}else{if(coolingDown)!config['headless']&&logHistory(_0x21026e(0x11b),_0x21026e(0xf8));else lockOrders!=ORDERS[_0x21026e(0x1da)]&&(!config['headless']&&(config['ordertype']==_0x21026e(0x1b7)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x21026e(0x11b),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x4cba3c){const _0x46646b=_0x4cf01b,_0x3aa702={...config,'openOrders':_0x4cba3c};let _0x1a81f0=dbConfig[_0x46646b(0x13d)](_0x46646b(0x20a))['find']({'botID':botID})[_0x46646b(0x118)]();_0x1a81f0&&dbConfig[_0x46646b(0x13d)](_0x46646b(0x20a))[_0x46646b(0x125)]({'botID':botID})[_0x46646b(0x259)](_0x3aa702)[_0x46646b(0x129)]();}function restoreOrders(){const _0x5262ae=_0x4cf01b;let _0x18d875;config[_0x5262ae(0x13b)]&&allOpenOrders['forEach'](_0x1d6ff1=>{const _0x38db37=_0x5262ae,_0x52ac6f=config[_0x38db37(0x13b)][_0x38db37(0x125)](_0x439ca2=>_0x439ca2['orderId']==_0x1d6ff1['id']);_0x52ac6f&&(lastOrders[_0x38db37(0x1b6)](_0x52ac6f),_0x18d875=_0x1d6ff1[_0x38db37(0x15c)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x169c85=new Date()[_0x5262ae(0x1ea)](),_0x3cecac=config[_0x5262ae(0x1df)]==_0x5262ae(0x1b7)?validateOrderTimeout*0x3c*0x3e8:config[_0x5262ae(0xf1)]*0x3c*0x3e8;if(_0x18d875+_0x3cecac>_0x169c85){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x18d875+_0x3cecac-_0x169c85);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x25eac8=_0x4cf01b;if(!coinsLoaded){process[_0x25eac8(0x16f)]({'telegrammsg':_0x25eac8(0x10c)},_0x198b90=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x25ac3e='';if(config[_0x25eac8(0x1c3)])_0x25ac3e=_0x25eac8(0x174)+config['botname']+_0x25eac8(0x24a);else _0x25ac3e=_0x25eac8(0xdb)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4f0e66=getKPIs(_0x25eac8(0x11f)),_0x3b6a45=getKPIs(_0x25eac8(0x1a4),config[_0x25eac8(0x1a4)]),_0x24bb34=getKPIs(_0x25eac8(0x1a8)),_0x343acf=getKPIs('net-fiat',config['fiat']);_0x25ac3e+=_0x25eac8(0x183),_0x25ac3e+=_0x4f0e66[_0x25eac8(0x22b)]+_0x25eac8(0x1ef)+_0x4f0e66['value']+'\x0a',_0x25ac3e+=_0x4f0e66[_0x25eac8(0xd8)]+':\x20'+_0x4f0e66['change']+'%\x0a',_0x25ac3e+=_0x3b6a45[_0x25eac8(0x22b)]+'\x20:\x20'+_0x3b6a45[_0x25eac8(0x118)]+'\x0a',_0x25ac3e+=_0x3b6a45['rightTxt']+':\x20'+_0x3b6a45[_0x25eac8(0x1e1)]+'%\x0a',_0x25ac3e+=_0x24bb34[_0x25eac8(0x22b)]+':\x20'+_0x24bb34[_0x25eac8(0x118)]+'\x20('+config['basecoin']+')\x0a',_0x25ac3e+=_0x24bb34['rightTxt']+':\x20'+_0x24bb34[_0x25eac8(0x1e1)]+_0x25eac8(0x10d)+config[_0x25eac8(0x11f)]+')\x0a',_0x25ac3e+=_0x343acf[_0x25eac8(0x22b)]+':\x20'+_0x343acf[_0x25eac8(0x118)]+'\x20('+config[_0x25eac8(0x1a4)]+')\x0a',_0x25ac3e+=_0x343acf[_0x25eac8(0xd8)]+':\x20'+_0x343acf[_0x25eac8(0x1e1)]+_0x25eac8(0x10d)+config[_0x25eac8(0x1a4)]+')\x0a',_0x25ac3e+='</pre>',process[_0x25eac8(0x16f)]({'telegrammsg':_0x25ac3e},_0x457468=>{});}async function sendPortfolioTelegram(){const _0x243c2e=_0x4cf01b;if(!coinsLoaded){process[_0x243c2e(0x16f)]({'telegrammsg':_0x243c2e(0x10c)},_0x7e62a4=>{});return;}let _0x5e09ed='';if(config[_0x243c2e(0x1c3)])_0x5e09ed=_0x243c2e(0x174)+config[_0x243c2e(0x105)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x5e09ed='<b>Bot\x20'+botID+_0x243c2e(0x100);_0x5e09ed+=_0x243c2e(0x183),_0x5e09ed+=_0x243c2e(0x186),_0x5e09ed+=_0x243c2e(0x165),_0x5e09ed+='-------------------------------\x0a',currentCoins['forEach'](_0x3e727d=>{const _0x20ab5d=_0x243c2e;_0x5e09ed+=_0x3e727d['coin'][_0x20ab5d(0x209)](0x7)+'|\x20'+formatPad(_0x3e727d[_0x20ab5d(0x121)],0x2,0x6)+'|\x20'+formatPad(_0x3e727d[_0x20ab5d(0x199)],0x2,0x6)+'|\x20'+formatPad(_0x3e727d['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5e09ed+=_0x243c2e(0x140),process[_0x243c2e(0x16f)]({'telegrammsg':_0x5e09ed},_0xaf5ecf=>{});}function formatPad(_0x53b50a,_0x1e48e9,_0x3ff067){const _0x3a9693=_0x4cf01b,_0x46da69=formatResultString(_0x53b50a,_0x1e48e9);return _0x46da69?_0x46da69[_0x3a9693(0x1a1)](_0x3ff067):''[_0x3a9693(0x1a1)](_0x3ff067);}function logHistory(_0x584373,_0x2b8a49,_0x49ffb4=''){const _0xb3578b=_0x4cf01b;let _0x3d3657={'time':getTimeStamp(),'type':_0x584373,'event':_0x2b8a49};dbLogs[_0xb3578b(0x13d)](_0xb3578b(0x12f))[_0xb3578b(0x1b6)](_0x3d3657)[_0xb3578b(0x129)]();if(_0x49ffb4=='')_0x49ffb4=_0x2b8a49;proxyEmit('event',{'log':_0x3d3657,'summary':_0x49ffb4}),process[_0xb3578b(0x16f)]({'telegram':{..._0x3d3657,'botname':config['botname'],'showname':config[_0xb3578b(0x1c3)]}},_0x27bce8=>{}),logger[_0xb3578b(0x103)](''+_0x3d3657['event']);}function emitHistory(_0x57891d={}){const _0x40f000=_0x4cf01b;Object[_0x40f000(0xde)](_0x57891d)[_0x40f000(0x178)]==0x0&&(_0x57891d={'type':['order','event'],'event':'','page':0x1});if(_0x57891d[_0x40f000(0xf6)]['includes'](_0x40f000(0x123)))_0x57891d[_0x40f000(0xf6)][_0x40f000(0x172)](_0x57891d[_0x40f000(0xf6)][_0x40f000(0x1b1)](_0x40f000(0x123)),0x1,'error',_0x40f000(0x1e0),_0x40f000(0x23a));if(dbLogs[_0x40f000(0x127)](_0x40f000(0x12f))[_0x40f000(0x118)]()){let _0x5e92eb=dbLogs[_0x40f000(0x13d)](_0x40f000(0x12f))[_0x40f000(0x1d8)](_0x281874=>{const _0x34ce85=_0x40f000;if(_0x57891d['type'][_0x34ce85(0x178)]==0x0)return![];else return _0x57891d[_0x34ce85(0xf6)][_0x34ce85(0x19a)](_0x281874[_0x34ce85(0xf6)]);})[_0x40f000(0x1d8)](_0x1e8ec3=>{const _0x3effe6=_0x40f000;if(_0x57891d[_0x3effe6(0x123)]=='')return!![];else return _0x1e8ec3[_0x3effe6(0x123)][_0x3effe6(0x1be)]()['includes'](_0x57891d[_0x3effe6(0x123)]['toLowerCase']());})['sortBy'](_0x40f000(0x1e9)),_0x54add6=_0x5e92eb[_0x40f000(0x118)]()[_0x40f000(0x178)];_0x5e92eb=_0x5e92eb[_0x40f000(0x149)]()[_0x40f000(0x17a)]((_0x57891d[_0x40f000(0x1dc)]-0x1)*logPageSize,_0x57891d[_0x40f000(0x1dc)]*logPageSize-0x1)['reverse']()[_0x40f000(0x118)](),proxyEmit(_0x40f000(0x14a),{'logs':_0x5e92eb,'total':_0x54add6});}else proxyEmit(_0x40f000(0x14a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5613ab){const _0x44b7d6=_0x4cf01b;if(dbLogs[_0x44b7d6(0x127)](_0x44b7d6(0x12f))[_0x44b7d6(0x118)]()){const _0x45c6de=dbLogs[_0x44b7d6(0x13d)](_0x44b7d6(0x12f))[_0x44b7d6(0x12e)](_0x44b7d6(0x1e9))[_0x44b7d6(0x1d8)](_0x5963fb=>{const _0x407e3d=_0x44b7d6;return _0x5963fb[_0x407e3d(0xf6)]==_0x407e3d(0x19e);})[_0x44b7d6(0x118)]();dbLogs[_0x44b7d6(0x13d)](_0x44b7d6(0x12f))[_0x44b7d6(0xfb)]()['write'](),dbLogs['get'](_0x44b7d6(0x12f))[_0x44b7d6(0x259)](_0x45c6de)[_0x44b7d6(0x129)](),emitHistory(_0x5613ab);}}async function pauseBot(_0x2f5323=''){const _0x660509=_0x4cf01b,_0xa6c7fb=new Date()[_0x660509(0x1ea)]();if(!lastErrorShown||_0xa6c7fb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xa6c7fb;!lastBotPause?(lastBotPause=_0xa6c7fb,consecutivePauses=0x1):(_0xa6c7fb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x660509(0x16f)]({'stop':'restart'},_0x433a4b=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x2f5323)_0x2f5323+='\x20|\x20';logHistory(_0x660509(0x11b),_0x2f5323+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x660509(0x236)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x23dab5=_0x4cf01b;process[_0x23dab5(0x16f)]({'stop':'kill'},_0x35af61=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x428edf,_0x12fa18){const _0x59b165=_0x4cf01b;if(_0x428edf[_0x59b165(0x136)]()[_0x59b165(0x19a)](_0x59b165(0xe7)))return logHistory(_0x59b165(0x11b),config[_0x59b165(0xf0)]+_0x59b165(0x132)),![];else{if(_0x428edf['toString']()[_0x59b165(0x19a)](_0x59b165(0x1bc)))return logHistory(_0x59b165(0x11b),config[_0x59b165(0xf0)]+_0x59b165(0x1e7)),![];else{if(_0x428edf['toString']()[_0x59b165(0x19a)](_0x59b165(0x11d)))return logHistory(_0x59b165(0x11b),config[_0x59b165(0xf0)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x59b165(0x11b),_0x59b165(0x205)),![];else await handleError(_0x428edf,_0x12fa18);}}}async function handleError(_0x5bb696,_0x51dbae,_0x490b68=''){const _0x4f579a=_0x4cf01b,_0x3a39f0=config[_0x4f579a(0xf0)]||_0x4f579a(0x1fc);if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)](_0x4f579a(0x116)))await pauseBot(config[_0x4f579a(0xf0)]+_0x4f579a(0x24e));else{if(_0x5bb696[_0x4f579a(0x136)]()['includes'](_0x4f579a(0x252)))await pauseBot(config['exchange']+_0x4f579a(0x164));else{if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)]('RequestTimeout'))await pauseBot(config[_0x4f579a(0xf0)]+_0x4f579a(0x134));else{if(_0x5bb696['toString']()[_0x4f579a(0x19a)](_0x4f579a(0x1db)))await pauseBot(config[_0x4f579a(0xf0)]+_0x4f579a(0x23e));else{if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)](_0x4f579a(0x181)))logHistory(_0x4f579a(0x11b),_0x51dbae+_0x4f579a(0x154)),logHistory(_0x4f579a(0x11b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5bb696['toString']()[_0x4f579a(0x19a)](_0x4f579a(0xfe)))logHistory('error',_0x51dbae+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x4f579a(0x15d)),await killBot();else{if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)](_0x4f579a(0xe7)))logHistory('error',_0x51dbae+_0x4f579a(0x1b8)+config['exchange']+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x4f579a(0x11b),_0x4f579a(0x15d)),await killBot();else{if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)](_0x4f579a(0x1bc)))logHistory('error',_0x51dbae+_0x4f579a(0x1b8)+config[_0x4f579a(0xf0)]+_0x4f579a(0x1ba)),logHistory(_0x4f579a(0x11b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5bb696[_0x4f579a(0x136)]()[_0x4f579a(0x19a)](_0x4f579a(0x11d)))logHistory(_0x4f579a(0x11b),_0x51dbae+_0x4f579a(0x1b8)+config[_0x4f579a(0xf0)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x4f579a(0x11b),_0x4f579a(0x15d)),await killBot();else _0x5bb696['toString']()[_0x4f579a(0x19a)]('InsufficientFunds')?logHistory('error',_0x51dbae+_0x4f579a(0x1f2)+_0x490b68):(logger[_0x4f579a(0x103)](_0x51dbae+'\x20|\x20Error\x20details:\x20',_0x5bb696),await pauseBot(_0x4f579a(0x107)));}}}}}}}}}function formatResult(_0x5e81df,_0x18e2d7){const _0x2111b1=_0x4cf01b;return parseFloat(_0x5e81df[_0x2111b1(0x189)](_0x18e2d7));}function formatResultTruncate(_0x211bcf,_0x1e16d5){const _0x2374d9=_0x4cf01b;let _0x39e0de=formatResultString(_0x211bcf,0xa),_0x560eb7=_0x39e0de[_0x2374d9(0x1b1)]('.');return _0x560eb7!=-0x1&&(_0x39e0de=_0x39e0de['slice'](0x0,_0x560eb7+_0x1e16d5+0x1)),Number(_0x39e0de);}function formatResultString(_0x1a1580,_0x4b3443){const _0x3c5ba8=_0x4cf01b;let _0x35be73;if(!(''+_0x1a1580)[_0x3c5ba8(0x19a)]('e'))_0x35be73=+(Math['round'](_0x1a1580+'e+'+_0x4b3443)+'e-'+_0x4b3443);else{let _0x1ba7f0=(''+_0x1a1580)['split']('e'),_0x36a44c='';+_0x1ba7f0[0x1]+_0x4b3443>0x0&&(_0x36a44c='+'),_0x35be73=+(Math[_0x3c5ba8(0x146)](+_0x1ba7f0[0x0]+'e'+_0x36a44c+(+_0x1ba7f0[0x1]+_0x4b3443))+'e-'+_0x4b3443);}return Number(_0x35be73)['toFixed'](_0x4b3443);}function getServerTime(){const _0x4d182d=_0x4cf01b,_0x337b8f=new Date();return _0x337b8f[_0x4d182d(0x1b2)]()+'/'+(_0x337b8f[_0x4d182d(0x248)]()+0x1)[_0x4d182d(0x136)]()['padStart'](0x2,'0')+'/'+_0x337b8f[_0x4d182d(0x102)]()[_0x4d182d(0x136)]()['padStart'](0x2,'0')+'\x20'+_0x337b8f['getHours']()[_0x4d182d(0x136)]()[_0x4d182d(0x1a1)](0x2,'0')+':'+_0x337b8f[_0x4d182d(0x173)]()[_0x4d182d(0x136)]()[_0x4d182d(0x1a1)](0x2,'0')+':'+_0x337b8f[_0x4d182d(0x18e)]()[_0x4d182d(0x136)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x214ae8=_0x4cf01b,_0x253db1=shiftedTime();return _0x253db1[_0x214ae8(0x1b2)]()+'/'+(_0x253db1[_0x214ae8(0x248)]()+0x1)[_0x214ae8(0x136)]()[_0x214ae8(0x1a1)](0x2,'0')+'/'+_0x253db1['getDate']()[_0x214ae8(0x136)]()[_0x214ae8(0x1a1)](0x2,'0')+'\x20'+_0x253db1[_0x214ae8(0x200)]()['toString']()[_0x214ae8(0x1a1)](0x2,'0')+':'+_0x253db1[_0x214ae8(0x173)]()['toString']()['padStart'](0x2,'0')+':'+_0x253db1['getSeconds']()[_0x214ae8(0x136)]()[_0x214ae8(0x1a1)](0x2,'0');}function getDate(){const _0x4de8e9=_0x4cf01b,_0x5178b9=shiftedTime();return _0x5178b9[_0x4de8e9(0x1b2)]()+'/'+(_0x5178b9[_0x4de8e9(0x248)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5178b9[_0x4de8e9(0x102)]()['toString']()[_0x4de8e9(0x1a1)](0x2,'0');}function getHour(){const _0x3052bf=_0x4cf01b,_0x59777c=shiftedTime();return _0x59777c[_0x3052bf(0x200)]()[_0x3052bf(0x136)]()[_0x3052bf(0x1a1)](0x2,'0');}function sleep(_0x2d142a){return new Promise(_0x5b93a8=>setTimeout(_0x5b93a8,_0x2d142a));}function _0x5c0b(_0x48a116,_0x23c117){const _0x34d1ad=_0x3871();return _0x5c0b=function(_0x48612a,_0x2befbe){_0x48612a=_0x48612a-0xd8;let _0x3871a1=_0x34d1ad[_0x48612a];return _0x3871a1;},_0x5c0b(_0x48a116,_0x23c117);}function shiftedTime(){const _0x29d883=_0x4cf01b,_0x3a863d=new Date();let _0x2b82c4=_0x3a863d;if(config&&config['timeshift']!==0x0)_0x2b82c4=fns[_0x29d883(0xfa)](_0x3a863d,{'hours':config[_0x29d883(0xe8)]});return _0x2b82c4;}function timer(_0x30d925){const _0x585bfc=_0x4cf01b,_0x165589=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x30d925,_0x165589):console[_0x585bfc(0x1aa)](getTimeStamp()+':\x20timer\x20>',_0x30d925,(_0x165589-lasttime)/0x3e8),lasttime=_0x165589;}