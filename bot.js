const _0x3b5833=_0xd5ac;(function(_0x30552c,_0x3d7135){const _0x312eb3=_0xd5ac,_0xdcd0cd=_0x30552c();while(!![]){try{const _0x52357e=-parseInt(_0x312eb3(0x245))/0x1+parseInt(_0x312eb3(0x1e9))/0x2*(-parseInt(_0x312eb3(0x271))/0x3)+parseInt(_0x312eb3(0x198))/0x4*(-parseInt(_0x312eb3(0x172))/0x5)+parseInt(_0x312eb3(0x20d))/0x6*(parseInt(_0x312eb3(0x1ba))/0x7)+-parseInt(_0x312eb3(0x162))/0x8+-parseInt(_0x312eb3(0x26e))/0x9*(-parseInt(_0x312eb3(0x1e4))/0xa)+-parseInt(_0x312eb3(0x191))/0xb*(-parseInt(_0x312eb3(0x193))/0xc);if(_0x52357e===_0x3d7135)break;else _0xdcd0cd['push'](_0xdcd0cd['shift']());}catch(_0xb21c6d){_0xdcd0cd['push'](_0xdcd0cd['shift']());}}}(_0x351f,0x6cf5a));const _0x46d001=function(){let _0x387465=!![];return function(_0x414f71,_0x2aeba1){const _0xe93c11=_0x387465?function(){const _0x170776=_0xd5ac;if(_0x2aeba1){const _0x70be5e=_0x2aeba1[_0x170776(0x21a)](_0x414f71,arguments);return _0x2aeba1=null,_0x70be5e;}}:function(){};return _0x387465=![],_0xe93c11;};}(),_0x4a81fd=_0x46d001(this,function(){const _0x2e1e8b=_0xd5ac;return _0x4a81fd['toString']()[_0x2e1e8b(0x1ee)](_0x2e1e8b(0x1d7))[_0x2e1e8b(0x1c4)]()[_0x2e1e8b(0x1c0)](_0x4a81fd)['search']('(((.+)+)+)+$');});_0x4a81fd();'use strict';const ccxt=require(_0x3b5833(0x1cb)),low=require(_0x3b5833(0x1ea)),FileSync=require(_0x3b5833(0x25c)),fs=require('fs'),fns=require(_0x3b5833(0x1f7)),{WebsocketClient,DefaultLogger}=require(_0x3b5833(0x25d)),Crypt=require(_0x3b5833(0x22e))[_0x3b5833(0x1f9)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3b5833(0x1b0))[_0x3b5833(0x17e)],botID=process[_0x3b5833(0x1c1)][0x2]||_0x3b5833(0x1e5),pattern=/^[0-9]{3}$/;if(!pattern[_0x3b5833(0x237)](botID))return console['log'](_0x3b5833(0x21c)+botID+_0x3b5833(0x17c)),process[_0x3b5833(0x19c)](0x1);const userID=process[_0x3b5833(0x1c1)][0x3]||'',configpath=userID?_0x3b5833(0x1e1)+userID+'/':_0x3b5833(0x1e1);!fs[_0x3b5833(0x255)](configpath)&&fs[_0x3b5833(0x1b7)](configpath);const configfile=configpath+_0x3b5833(0x243)+botID+_0x3b5833(0x1be),logfile=configpath+_0x3b5833(0x243)+botID+_0x3b5833(0x183),performancefile=configpath+_0x3b5833(0x243)+botID+'-performance.json',coinresultsfile=configpath+_0x3b5833(0x243)+botID+_0x3b5833(0x1ca),settingsfile=configpath+_0x3b5833(0x276),securefile=configpath+_0x3b5833(0x268),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3b5833(0x256)]({'data':[]})[_0x3b5833(0x210)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3b5833(0x256)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x3b5833(0x253),'symbol':'BTC/EUR'},'usd':{'coin':_0x3b5833(0x23e),'symbol':_0x3b5833(0x173)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5972d9)=>{},'debug':(..._0x484db5)=>{},'notice':(..._0x45d92a)=>{},'info':(..._0x26fbba)=>{},'warning':(..._0x3cb32e)=>{},'error':async function(..._0x16a1e3){const _0x528474=_0x3b5833,_0x137fd5=new Date()['getTime']();if(!lastErrorShown||_0x137fd5-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x528474(0x1a5)](),logHistory(_0x528474(0x1a7),_0x528474(0x23d)+consecutivePauses+_0x528474(0x214));let _0x9141c5='';if(_0x16a1e3[0x0])_0x9141c5+=_0x16a1e3[0x0];if(_0x16a1e3[0x1]&&_0x16a1e3[0x1]['error']&&_0x16a1e3[0x1][_0x528474(0x1a7)]['message'])_0x9141c5+='\x20-\x20'+_0x16a1e3[0x1]['error'][_0x528474(0x239)];logging('WebSockets('+consecutivePauses+_0x528474(0x247),''+_0x9141c5),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x3b5833(0x278),'rsaStandard':_0x3b5833(0x1f3)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x3b5833(0x1ed)]!=config[_0x3b5833(0x1ed)]&&updateTimeshift(settings[_0x3b5833(0x1ed)]);process[_0x3b5833(0x224)]({'started':_0x3b5833(0x21e)},_0xeb9351=>{}),initializeProcessListeners();function proxyEmit(_0x471b4e,_0xd117cb=null){const _0x4fd541=_0x3b5833;process[_0x4fd541(0x224)]({'function':_0x471b4e,'args':_0xd117cb},_0x4229f5=>{});}function initializeProcessListeners(){process['on']('message',_0x1edeea=>{const _0x51169e=_0xd5ac;switch(Object[_0x51169e(0x254)](_0x1edeea)[0x0]){case _0x51169e(0x1ed):_0x1edeea[_0x51169e(0x1ed)]!=undefined&&(settings[_0x51169e(0x1ed)]=_0x1edeea['timeshift'],updateTimeshift(settings[_0x51169e(0x1ed)]));break;case'function':switch(_0x1edeea[_0x51169e(0x212)]){case _0x51169e(0x185):initclient();break;case'emitHistory':emitHistory(_0x1edeea[_0x51169e(0x1c7)]);break;case _0x51169e(0x1d6):getPortfolio(_0x1edeea[_0x51169e(0x1c7)]);break;case'storeConfiguration':storeConfiguration(_0x1edeea[_0x51169e(0x1c7)]);break;case _0x51169e(0x1af):storeHeadless(_0x1edeea['args']);break;case _0x51169e(0x1bc):getStartingBalances();break;case'placeOrder':placeOrder(_0x1edeea[_0x51169e(0x1c7)]);break;case _0x51169e(0x164):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x35768e=_0x3b5833;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x35768e(0x228)],config[_0x35768e(0x1d1)]);let _0x457d16=await loadSymbols();_0x457d16&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3df7c9,_0x2b6274){const _0x10f1d9=_0x3b5833,_0x3c9e68=ccxt[config[_0x10f1d9(0x1e6)]];let _0x3aa05f;switch(config['exchange']){case _0x10f1d9(0x25d):_0x3aa05f='wss://stream.binance.com:9443';break;case _0x10f1d9(0x240):_0x3aa05f=_0x10f1d9(0x17d);break;default:_0x3aa05f=_0x10f1d9(0x1b2);}exchange=new _0x3c9e68({'apiKey':_0x3df7c9,'secret':_0x2b6274,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3df7c9,'api_secret':_0x2b6274,'beautify':!![],'wsUrl':_0x3aa05f},logger),config[_0x10f1d9(0x1e6)]==_0x10f1d9(0x240)&&(stablecoins={'eur':{'coin':_0x10f1d9(0x238),'symbol':'BTC/BUSD'},'usd':{'coin':_0x10f1d9(0x23e),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x438ca2=_0x3b5833;let _0x2699f8;try{markets=await exchange[_0x438ca2(0x169)]();const _0x3e8a8a=[_0x438ca2(0x16e),_0x438ca2(0x187),_0x438ca2(0x1ce)];allSymbols=exchange[_0x438ca2(0x267)][_0x438ca2(0x25f)](_0x3a7c01=>{const _0x30a781=_0x438ca2;let _0x1f4cee=![];return _0x3e8a8a[_0x30a781(0x21b)](_0x269de4=>{const _0x118bd1=_0x30a781;if(_0x3a7c01[_0x118bd1(0x25b)](_0x269de4))_0x1f4cee=!![];}),!_0x1f4cee;}),_0x2699f8=!![];}catch(_0xcfd5){await handleError(_0xcfd5,_0x438ca2(0x19e)),_0x2699f8=![];}return _0x2699f8;}async function initbot(){const _0x325074=_0x3b5833;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4a5a5d=dbCoinResults[_0x325074(0x1b5)](_0x325074(0x1fd))[_0x325074(0x1c6)]();if(_0x4a5a5d[_0x325074(0x26d)]==0x0)await resetCoinResults();}async function initclient(){const _0x3e419f=_0x3b5833;proxyEmit(_0x3e419f(0x27a),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3e419f(0x19b),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x504ca9=_0x3b5833;wsinitialized=![];ws1&&(ws1[_0x504ca9(0x21b)](_0x373f81=>{const _0x5b7773=_0x504ca9;try{wsClient[_0x5b7773(0x1de)](_0x373f81);}catch(_0x20f172){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x353441){}ws2=null;}}async function initws(){const _0xb00d20=_0x3b5833;cleanws();let _0xed6cec=[];currentCoins[_0xb00d20(0x21b)](_0x1749e7=>{const _0x24dab3=_0xb00d20;if(_0x1749e7['coin']!=config['basecoin'])_0xed6cec[_0x24dab3(0x20b)](noslash(_0x1749e7[_0x24dab3(0x1dc)]));});if(!_0xed6cec[_0xb00d20(0x25b)](stablecoins['eur'][_0xb00d20(0x233)]))_0xed6cec[_0xb00d20(0x20b)](stablecoins[_0xb00d20(0x259)][_0xb00d20(0x233)]);if(!_0xed6cec['includes'](stablecoins['usd']['coin']))_0xed6cec[_0xb00d20(0x20b)](stablecoins[_0xb00d20(0x1a4)][_0xb00d20(0x233)]);if(!_0xed6cec['includes'](_0xb00d20(0x26a)+config[_0xb00d20(0x1a3)]))_0xed6cec[_0xb00d20(0x20b)](_0xb00d20(0x26a)+config['basecoin']);try{_0xed6cec[_0xb00d20(0x21b)]((_0x87c7c8,_0x20c4cb)=>{const _0x374168=_0xb00d20;ws1[_0x20c4cb]=wsClient[_0x374168(0x248)](_0x87c7c8,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0xb00d20(0x19d),_0x40d72c=>{const _0x107bda=_0xb00d20;if(!Array[_0x107bda(0x205)](_0x40d72c)&&!_0x40d72c[_0x107bda(0x1e3)][_0x107bda(0x25b)](_0x107bda(0x232))){if(_0x40d72c['eventType']===_0x107bda(0x1d8)){global[_0x107bda(0x1e8)][_0x40d72c[_0x107bda(0x1d8)][_0x107bda(0x1dc)]]=_0x40d72c['kline'][_0x107bda(0x178)];return;}}else{if(!Array[_0x107bda(0x205)](_0x40d72c)&&_0x40d72c[_0x107bda(0x1e3)][_0x107bda(0x25b)](_0x107bda(0x232))){if(_0x40d72c[_0x107bda(0x192)][_0x107bda(0x25b)](_0x107bda(0x15f))){updateNumberCoins(_0x40d72c);return;}}}}),wsClient['on']('reconnected',async _0x455efe=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x15fecf){await handleError(_0x15fecf,'initws()');}let _0x5cca8a,_0x39c519=0x0;loading[_0xb00d20(0x1b4)]=[];let _0x3f4060=0x0;currentCoins['forEach'](_0x142e46=>{const _0x1f564e=_0xb00d20;if(_0x142e46['coin']!=config[_0x1f564e(0x1a3)])loading[_0x1f564e(0x1b4)][_0x1f564e(0x20b)](_0x142e46[_0x1f564e(0x1dc)]);}),loadingCanceled=![];while(_0x5cca8a!=currentCoins[_0xb00d20(0x26d)]-0x1){_0x5cca8a=0x0,currentCoins[_0xb00d20(0x21b)](_0x4e5399=>{const _0xe25e69=_0xb00d20;_0x4e5399[_0xe25e69(0x233)]!=config[_0xe25e69(0x1a3)]&&global[_0xe25e69(0x1e8)][noslash(_0x4e5399['symbol'])]&&(loading[_0xe25e69(0x1b4)]=loading[_0xe25e69(0x1b4)][_0xe25e69(0x25f)](_0x188aff=>_0x188aff!=_0x4e5399['symbol']),_0x5cca8a++);}),loading[_0xb00d20(0x26b)]=Math['round'](_0x5cca8a/(currentCoins[_0xb00d20(0x26d)]-0x1)*0x64);_0x3f4060>0x1e*0x5&&(loading[_0xb00d20(0x1fc)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0xb00d20(0x221)]=!![],emitLoadingProgress();break;}else _0x5cca8a!=_0x39c519&&(_0x39c519=_0x5cca8a,emitLoadingProgress()),_0x3f4060++,await sleep(0xc8);}if(_0x5cca8a==currentCoins[_0xb00d20(0x26d)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x1ee795=_0x3b5833;proxyEmit(_0x1ee795(0x272),loading);}async function getFiat(){const _0x573704=_0x3b5833;let _0x24f294=0x0,_0x15ded3=0x0;try{_0x24f294=global[_0x573704(0x1e8)][stablecoins[_0x573704(0x259)][_0x573704(0x233)]],_0x15ded3=global[_0x573704(0x1e8)][stablecoins['usd'][_0x573704(0x233)]];}catch(_0x5a9186){await handleError(_0x5a9186,'getFiat()');}return{'eur':Number(_0x24f294),'usd':Number(_0x15ded3)};}async function setStartDatePerformance(_0x1590d0){const _0x2e176b=_0x3b5833,_0x14c48c=fns[_0x2e176b(0x242)](new Date(_0x1590d0[_0x2e176b(0x231)]),_0x2e176b(0x168));let _0x35b0dd=[];_0x35b0dd[stablecoins[_0x2e176b(0x259)][_0x2e176b(0x233)]]=await getCloses(stablecoins['eur'][_0x2e176b(0x1dc)],new Date(_0x1590d0[_0x2e176b(0x231)]),0x1),_0x35b0dd[stablecoins[_0x2e176b(0x1a4)][_0x2e176b(0x233)]]=await getCloses(stablecoins[_0x2e176b(0x1a4)][_0x2e176b(0x1dc)],new Date(_0x1590d0[_0x2e176b(0x231)]),0x1);let _0xfbbb15,_0x67ece3=[];_0x1590d0[_0x2e176b(0x1a1)][_0x2e176b(0x21b)](_0x1585c9=>{const _0x57f88e=_0x2e176b;!_0x1585c9[_0x57f88e(0x1f6)]&&_0x67ece3[_0x57f88e(0x20b)]({'coin':_0x1585c9[_0x57f88e(0x233)],'number':_0x1585c9['startnumber'],'price':_0x1585c9[_0x57f88e(0x186)]});}),_0xfbbb15={'date':_0x14c48c,'eur':_0x35b0dd[stablecoins[_0x2e176b(0x259)][_0x2e176b(0x233)]][0x0],'usd':_0x35b0dd[stablecoins[_0x2e176b(0x1a4)]['coin']][0x0],'coins':_0x67ece3};let _0x1a0849=dbPerformance['get']('data')[_0x2e176b(0x199)]({'date':_0x14c48c})[_0x2e176b(0x1c6)]();_0x1a0849?dbPerformance[_0x2e176b(0x1b5)](_0x2e176b(0x1c9))[_0x2e176b(0x199)]({'date':_0x14c48c})[_0x2e176b(0x1ae)](_0xfbbb15)[_0x2e176b(0x210)]():dbPerformance[_0x2e176b(0x1b5)](_0x2e176b(0x1c9))[_0x2e176b(0x20b)](_0xfbbb15)[_0x2e176b(0x210)](),_0x1a0849=dbPerformance[_0x2e176b(0x1b5)](_0x2e176b(0x1c9))[_0x2e176b(0x18d)]('date')['value'](),_0x1a0849[_0x2e176b(0x21b)](_0x107764=>{const _0x3930a6=_0x2e176b;_0x107764[_0x3930a6(0x1a2)]<_0x14c48c&&dbPerformance['get'](_0x3930a6(0x1c9))['remove']({'date':_0x107764[_0x3930a6(0x1a2)]})[_0x3930a6(0x210)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x569e45){const _0x253926=_0x3b5833;let _0x36c2f2,_0x341d69=[];logHistory(_0x253926(0x241),_0x253926(0x1ff)),_0x569e45[_0x253926(0x1a1)][_0x253926(0x21b)](_0x2e7002=>{const _0x418811=_0x253926;if(_0x2e7002[_0x418811(0x233)]!=config[_0x418811(0x1a3)]&&!_0x2e7002['excluded'])_0x341d69['push']({'coin':_0x2e7002[_0x418811(0x233)],'symbol':_0x2e7002[_0x418811(0x1dc)]});});let _0x5dfc8f=[];try{const _0x300190=fns['format'](fns['parseISO'](_0x569e45[_0x253926(0x231)][_0x253926(0x1b9)](/\//g,'-')),_0x253926(0x274));for(const _0x55b6ee of _0x341d69){if(_0x55b6ee[_0x253926(0x233)]!=config[_0x253926(0x1a3)])_0x36c2f2=await exchange['fetchOrders'](_0x55b6ee[_0x253926(0x1dc)],Date[_0x253926(0x235)](_0x300190));_0x36c2f2['forEach'](_0x20f16d=>{const _0x5cc55b=_0x253926,_0x3a98e6=_0x55b6ee[_0x5cc55b(0x1dc)]['includes'](config[_0x5cc55b(0x1a3)]+'/'),_0x5d78de=fns[_0x5cc55b(0x242)](fns['parseISO'](_0x20f16d[_0x5cc55b(0x1f0)]),_0x5cc55b(0x19f)),_0x12739b=fns[_0x5cc55b(0x242)](fns[_0x5cc55b(0x1bf)](_0x20f16d[_0x5cc55b(0x1f0)]),'yyyy/MM/dd');let _0x96a765;if(_0x20f16d[_0x5cc55b(0x196)]==_0x5cc55b(0x1a0)&&_0x3a98e6==![])_0x96a765=_0x20f16d[_0x5cc55b(0x22b)];if(_0x20f16d[_0x5cc55b(0x196)]==_0x5cc55b(0x1a0)&&_0x3a98e6==!![])_0x96a765=-_0x20f16d[_0x5cc55b(0x22b)]*_0x20f16d[_0x5cc55b(0x24b)];if(_0x20f16d['side']==_0x5cc55b(0x18c)&&_0x3a98e6==![])_0x96a765=-_0x20f16d['amount'];if(_0x20f16d[_0x5cc55b(0x196)]=='sell'&&_0x3a98e6==!![])_0x96a765=_0x20f16d[_0x5cc55b(0x22b)]*_0x20f16d[_0x5cc55b(0x24b)];_0x5dfc8f[_0x5cc55b(0x20b)]({'timestamp':_0x5d78de,'date':_0x12739b,'coin':_0x55b6ee['coin'],'symbol':_0x55b6ee[_0x5cc55b(0x1dc)],'type':_0x20f16d[_0x5cc55b(0x260)],'side':_0x20f16d['side'],'reverse':_0x3a98e6,'amount':formatResult(_0x20f16d[_0x5cc55b(0x1db)],0x8),'filled':formatResult(_0x20f16d[_0x5cc55b(0x1db)],0x8),'coinamount':formatResult(_0x96a765,0x8),'price':formatResult(_0x20f16d[_0x5cc55b(0x24b)],0x8)});let _0x2b8135;if(_0x20f16d[_0x5cc55b(0x196)]==_0x5cc55b(0x1a0)&&_0x3a98e6==![])_0x2b8135=-_0x20f16d[_0x5cc55b(0x22b)]*_0x20f16d[_0x5cc55b(0x24b)];if(_0x20f16d['side']==_0x5cc55b(0x1a0)&&_0x3a98e6==!![])_0x2b8135=_0x20f16d[_0x5cc55b(0x22b)];if(_0x20f16d[_0x5cc55b(0x196)]==_0x5cc55b(0x18c)&&_0x3a98e6==![])_0x2b8135=_0x20f16d[_0x5cc55b(0x22b)]*_0x20f16d[_0x5cc55b(0x24b)];if(_0x20f16d['side']==_0x5cc55b(0x18c)&&_0x3a98e6==!![])_0x2b8135=-_0x20f16d[_0x5cc55b(0x22b)];_0x5dfc8f['push']({'date':_0x12739b,'coin':config[_0x5cc55b(0x1a3)],'coinamount':formatResult(_0x2b8135,0x8)});});}_0x5dfc8f[_0x253926(0x1f1)]((_0x3ab0b1,_0x176f8f)=>_0x3ab0b1['timestamp']>_0x176f8f[_0x253926(0x1f4)]?0x1:_0x176f8f[_0x253926(0x1f4)]>_0x3ab0b1['timestamp']?-0x1:0x0),dbLogs[_0x253926(0x1b5)](_0x253926(0x273))[_0x253926(0x206)]()['write'](),_0x5dfc8f[_0x253926(0x21b)](_0x1e5ced=>{const _0x95b0bd=_0x253926;let _0x56469c;_0x1e5ced[_0x95b0bd(0x233)]!=config[_0x95b0bd(0x1a3)]&&(_0x56469c={'time':_0x1e5ced[_0x95b0bd(0x1f4)],'type':_0x95b0bd(0x1fb),'event':_0x95b0bd(0x234)+_0x1e5ced[_0x95b0bd(0x1dc)]+'\x20'+_0x1e5ced[_0x95b0bd(0x196)]+'\x20#'+_0x1e5ced[_0x95b0bd(0x22b)]+'\x20@'+_0x1e5ced['price']},dbLogs[_0x95b0bd(0x1b5)](_0x95b0bd(0x273))[_0x95b0bd(0x20b)](_0x56469c)[_0x95b0bd(0x210)]());});const _0x4885bd=fns['eachDayOfInterval']({'start':new Date(_0x569e45['startdate']),'end':new Date()})['map'](_0x5829d5=>fns[_0x253926(0x242)](_0x5829d5,_0x253926(0x168)));let _0x2cdb95=[];_0x569e45[_0x253926(0x1a1)][_0x253926(0x21b)](_0x26715d=>{const _0x35139f=_0x253926;if(!_0x26715d['excluded']){_0x2cdb95[_0x26715d[_0x35139f(0x233)]]=[];let _0x133a18=_0x26715d[_0x35139f(0x18f)];_0x4885bd[_0x35139f(0x21b)]((_0x405d41,_0x51ef10)=>{const _0x2a623f=_0x35139f;let _0x58036d=_0x5dfc8f[_0x2a623f(0x25f)](_0x10fcf8=>_0x10fcf8[_0x2a623f(0x233)]==_0x26715d[_0x2a623f(0x233)]&&_0x10fcf8[_0x2a623f(0x1a2)]==_0x405d41);if(_0x58036d['length']!=0x0){let _0x4901da=_0x58036d[_0x2a623f(0x194)]((_0x2f6476,_0x4f3f78)=>{const _0x1139cf=_0x2a623f;return _0x2f6476+=_0x4f3f78[_0x1139cf(0x197)],_0x2f6476;},0x0);_0x133a18+=_0x4901da;}_0x2cdb95[_0x26715d[_0x2a623f(0x233)]][_0x405d41]=_0x133a18;});}});const _0x5aa741=[..._0x341d69];_0x5aa741[_0x253926(0x20b)]({'coin':stablecoins[_0x253926(0x259)][_0x253926(0x233)],'symbol':stablecoins['eur']['symbol']}),_0x5aa741[_0x253926(0x20b)]({'coin':stablecoins[_0x253926(0x1a4)][_0x253926(0x233)],'symbol':stablecoins[_0x253926(0x1a4)][_0x253926(0x1dc)]});let _0x5af4c1=[];for(const _0x2df3c9 of _0x5aa741){_0x5af4c1[_0x2df3c9[_0x253926(0x233)]]=await getCloses(_0x2df3c9[_0x253926(0x1dc)],new Date(_0x569e45[_0x253926(0x231)]));}dbPerformance[_0x253926(0x1b5)]('data')[_0x253926(0x206)]()[_0x253926(0x210)](),_0x4885bd[_0x253926(0x21b)]((_0x5f4f05,_0xf7d941)=>{const _0x5d3677=_0x253926;let _0x2ee12f,_0xe3253e=[];_0xf7d941==0x0?(_0x569e45[_0x5d3677(0x1a1)][_0x5d3677(0x21b)](_0x327591=>{const _0x5b33ca=_0x5d3677;!_0x327591[_0x5b33ca(0x1f6)]&&_0xe3253e[_0x5b33ca(0x20b)]({'coin':_0x327591[_0x5b33ca(0x233)],'number':_0x327591[_0x5b33ca(0x18f)],'price':_0x327591['startprice']});}),_0x2ee12f={'date':_0x5f4f05,'eur':_0x5af4c1[stablecoins['eur'][_0x5d3677(0x233)]][_0xf7d941],'usd':_0x5af4c1[stablecoins['usd'][_0x5d3677(0x233)]][_0xf7d941],'coins':_0xe3253e}):(_0x569e45[_0x5d3677(0x1a1)][_0x5d3677(0x21b)](_0x2565cf=>{const _0x40df01=_0x5d3677;!_0x2565cf[_0x40df01(0x1f6)]&&_0xe3253e[_0x40df01(0x20b)]({'coin':_0x2565cf[_0x40df01(0x233)],'number':_0x2cdb95[_0x2565cf[_0x40df01(0x233)]][_0x5f4f05],'price':_0x2565cf[_0x40df01(0x233)]==config['basecoin']?0x1:_0x5af4c1[_0x2565cf[_0x40df01(0x233)]][_0xf7d941]});}),_0x2ee12f={'date':_0x5f4f05,'eur':_0x5af4c1[stablecoins[_0x5d3677(0x259)][_0x5d3677(0x233)]][_0xf7d941],'usd':_0x5af4c1[stablecoins[_0x5d3677(0x1a4)]['coin']][_0xf7d941],'coins':_0xe3253e}),dbPerformance[_0x5d3677(0x1b5)]('data')[_0x5d3677(0x20b)](_0x2ee12f)[_0x5d3677(0x210)]();}),emitPerformance(),await resetCoinResults();for(let _0x1298d4 of _0x5dfc8f){_0x1298d4[_0x253926(0x233)]!=config[_0x253926(0x1a3)]&&await updateCoinResults(_0x1298d4);}logHistory('success',_0x253926(0x1ef));}catch(_0x2028a1){await handleError(_0x2028a1,'recreateHistory()');}}async function getCloses(_0x4323c0,_0x114823,_0x40e489=undefined){const _0x13373e=_0x3b5833,_0x116d44='1d';let _0x1a6c86,_0x5e36bf;const _0xec19a3=fns[_0x13373e(0x23c)](new Date(),_0x114823)+0x1;try{const _0x33c28b=exchange[_0x13373e(0x1bd)]()-_0xec19a3*0x18*0xe10*0x3e8;_0x1a6c86=await exchange[_0x13373e(0x216)](_0x4323c0,_0x116d44,_0x33c28b,_0x40e489),_0x5e36bf=await exchange[_0x13373e(0x1e2)](_0x4323c0);}catch(_0x447d2f){await handleError(_0x447d2f,_0x13373e(0x251));}let _0x19dd5d=ohlcvToCloses(_0x1a6c86);return _0x19dd5d[_0x13373e(0x20b)](_0x5e36bf[_0x4323c0][_0x13373e(0x1ec)]),_0x19dd5d;}function ohlcvToCloses(_0x568645){let _0x509204=[];return _0x568645['forEach'](function(_0x39effd){const _0x369ede=_0xd5ac;_0x509204[_0x369ede(0x20b)](_0x39effd[0x4]);}),_0x509204;}function getConfiguration(_0xf5f3ab){const _0x2d242f=_0x3b5833;let _0x1c6971=dbConfig[_0x2d242f(0x1b5)](_0x2d242f(0x1e7))[_0x2d242f(0x199)]({'botID':_0xf5f3ab})[_0x2d242f(0x1c6)]();if(_0x1c6971){let _0xe2e595=![];!_0x1c6971[_0x2d242f(0x1e6)]&&(_0x1c6971={..._0x1c6971,'exchange':_0x2d242f(0x25d)},_0xe2e595=!![]),!_0x1c6971[_0x2d242f(0x1a3)]&&(_0x1c6971={..._0x1c6971,'basecoin':_0x2d242f(0x1fe)},_0xe2e595=!![]),!_0x1c6971[_0x2d242f(0x20f)]&&(_0x1c6971={..._0x1c6971,'ordertype':_0x2d242f(0x269)},_0xe2e595=!![]),!_0x1c6971['timeout']&&(_0x1c6971={..._0x1c6971,'timeout':0x14},_0xe2e595=!![]),!_0x1c6971[_0x2d242f(0x250)]&&(_0x1c6971={..._0x1c6971,'emojibuy':''},_0xe2e595=!![]),!_0x1c6971[_0x2d242f(0x165)]&&(_0x1c6971={..._0x1c6971,'emojisell':''},_0xe2e595=!![]),!_0x1c6971['showname']&&(_0x1c6971={..._0x1c6971,'showname':![]},_0xe2e595=!![]),_0xe2e595&&(_0x1c6971={'botID':_0x1c6971[_0x2d242f(0x195)],'exchange':_0x1c6971[_0x2d242f(0x1e6)],'apiKey':_0x1c6971['apiKey'],'apiSecret':_0x1c6971[_0x2d242f(0x1d1)],'basecoin':_0x1c6971[_0x2d242f(0x1a3)],'botname':_0x1c6971[_0x2d242f(0x208)],'showname':_0x1c6971[_0x2d242f(0x202)],'threshold':_0x1c6971[_0x2d242f(0x160)],'ordertype':_0x1c6971['ordertype'],'timeout':_0x1c6971[_0x2d242f(0x1fc)],'startdate':_0x1c6971['startdate'],'recreate':_0x1c6971['recreate'],'timeshift':_0x1c6971[_0x2d242f(0x1ed)],'headless':_0x1c6971[_0x2d242f(0x163)],'cooldown':_0x1c6971[_0x2d242f(0x188)],'emojibuy':_0x1c6971[_0x2d242f(0x250)],'emojisell':_0x1c6971[_0x2d242f(0x165)],'portfolio':_0x1c6971[_0x2d242f(0x1a1)]},dbConfig[_0x2d242f(0x1b5)]('bot')[_0x2d242f(0x206)]()[_0x2d242f(0x210)](),dbConfig[_0x2d242f(0x1b5)](_0x2d242f(0x1e7))[_0x2d242f(0x20b)](_0x1c6971)[_0x2d242f(0x210)]());}else _0x1c6971={'botID':_0xf5f3ab,'exchange':_0x2d242f(0x25d),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x2d242f(0x1c5)+_0xf5f3ab,'showname':![],'threshold':'3','ordertype':_0x2d242f(0x269),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2d242f(0x1ed)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1c6971;}function emittedConfiguration(){const _0x40f3e6=_0x3b5833;let _0x13d84d;return config['apiKey']==''?_0x13d84d=config:_0x13d84d={...config,'apiKey':_0x40f3e6(0x18e),'apiSecret':'************'},_0x13d84d;}function getSettings(){const _0x31aabc=_0x3b5833;return dbSettings[_0x31aabc(0x1b5)](_0x31aabc(0x1eb))[_0x31aabc(0x1c6)]();}function getSecure(){const _0x461f3b=_0x3b5833;return dbSecure[_0x461f3b(0x1b5)](_0x461f3b(0x24c))[_0x461f3b(0x1c6)]()||{};}function updateTimeshift(_0x1e20a6){const _0x24b45f=_0x3b5833;let _0x31a5db=dbConfig['get'](_0x24b45f(0x1e7))[_0x24b45f(0x199)]({'botID':botID})[_0x24b45f(0x1c6)]();_0x31a5db&&dbConfig[_0x24b45f(0x1b5)](_0x24b45f(0x1e7))[_0x24b45f(0x199)]({'botID':botID})[_0x24b45f(0x1ae)]({'timeshift':_0x1e20a6})[_0x24b45f(0x210)](),config[_0x24b45f(0x1ed)]=_0x1e20a6,proxyEmit(_0x24b45f(0x27a),emittedConfiguration());}async function storeConfiguration(_0x4bd11e){const _0x41ba28=_0x3b5833;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3436ca=dbConfig[_0x41ba28(0x1b5)](_0x41ba28(0x1e7))[_0x41ba28(0x199)]({'botID':botID})[_0x41ba28(0x1c6)]();_0x4bd11e={..._0x4bd11e,'apiKey':crypt[_0x41ba28(0x18a)](secure[_0x41ba28(0x213)],_0x4bd11e[_0x41ba28(0x228)])[_0x41ba28(0x239)],'apiSecret':crypt[_0x41ba28(0x18a)](secure['privateKey'],_0x4bd11e['apiSecret'])[_0x41ba28(0x239)]};if(_0x3436ca){if(_0x4bd11e['apiKey']==_0x41ba28(0x18e))_0x4bd11e[_0x41ba28(0x228)]=config[_0x41ba28(0x228)];if(_0x4bd11e['apiSecret']==_0x41ba28(0x18e))_0x4bd11e[_0x41ba28(0x1d1)]=config[_0x41ba28(0x1d1)];dbConfig[_0x41ba28(0x1b5)]('bot')[_0x41ba28(0x199)]({'botID':botID})[_0x41ba28(0x1ae)](_0x4bd11e)['write']();}else dbConfig['get'](_0x41ba28(0x1e7))[_0x41ba28(0x20b)](_0x4bd11e)[_0x41ba28(0x210)](),process[_0x41ba28(0x224)]({'status':_0x41ba28(0x225),'live':_0x41ba28(0x21e)},_0x40d692=>{});config={..._0x4bd11e};if(config[_0x41ba28(0x236)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x4bd11e[_0x41ba28(0x208)]},_0x46fbba=>{}),proxyEmit(_0x41ba28(0x227)),reset();}async function storeHeadless(_0x322bb6){const _0xb87527=_0x3b5833,_0x47ccac={...config,'headless':_0x322bb6['headless']};let _0x501e1e=dbConfig['get'](_0xb87527(0x1e7))[_0xb87527(0x199)]({'botID':botID})[_0xb87527(0x1c6)]();_0x501e1e&&dbConfig[_0xb87527(0x1b5)](_0xb87527(0x1e7))[_0xb87527(0x199)]({'botID':botID})[_0xb87527(0x1ae)](_0x47ccac)[_0xb87527(0x210)](),config={..._0x47ccac},proxyEmit('configuration',emittedConfiguration());}function noslash(_0xf17e96){const _0x3990b9=_0x3b5833;return _0xf17e96[_0x3990b9(0x1b9)]('/','');}function updateNumberCoins(_0x406331){const _0x14bd70=_0x3b5833;_0x406331[_0x14bd70(0x209)]&&_0x406331[_0x14bd70(0x209)]==_0x14bd70(0x23f)&&_0x406331[_0x14bd70(0x19b)][_0x14bd70(0x21b)](_0x5c4041=>{const _0x214e40=_0x14bd70;let _0x5f5dfd=currentCoins['find'](_0x57df1b=>_0x57df1b[_0x214e40(0x233)]==_0x5c4041['asset']),_0x4018bc=config[_0x214e40(0x1a1)]['find'](_0x270ce2=>_0x270ce2['coin']==_0x5c4041['asset']);if(_0x5f5dfd&&_0x4018bc)_0x5f5dfd[_0x214e40(0x17f)]=Math[_0x214e40(0x1d4)](Number(_0x5c4041[_0x214e40(0x1ad)])+(_0x4018bc[_0x214e40(0x1b1)]||0x0),0x0);});if(_0x406331[_0x14bd70(0x209)]&&_0x406331[_0x14bd70(0x209)]==_0x14bd70(0x262)){if(_0x406331['orderType']==_0x14bd70(0x174)&&_0x406331['orderStatus']==_0x14bd70(0x16d)){if(lastOrders)lastOrders[_0x14bd70(0x21b)](_0x5094b8=>{const _0x5e3dce=_0x14bd70;if(_0x5094b8[_0x5e3dce(0x229)]==_0x406331[_0x5e3dce(0x229)]){if(_0x5094b8[_0x5e3dce(0x200)])_0x5094b8[_0x5e3dce(0x1db)]=_0x406331[_0x5e3dce(0x23b)]*_0x5094b8['price'];else _0x5094b8[_0x5e3dce(0x1db)]=_0x406331['accumulatedQuantity'];}});}}}async function getCoins(_0x122f2c=!![],_0x2b5b94=config[_0x3b5833(0x1a3)]){const _0x43aab0=_0x3b5833;let _0x4486b7,_0x478ec9=[],_0x4172e7=[],_0x226ff6=[];try{_0x4486b7=await exchange[_0x43aab0(0x1a9)](),mybalances=_0x4486b7['total'];if(!_0x122f2c)for(const [_0x3ddf2e,_0x2d0263]of Object['entries'](mybalances)){_0x226ff6[_0x43aab0(0x20b)](_0x3ddf2e);}else config['portfolio']['forEach'](_0x48e5f0=>{const _0x5d11e0=_0x43aab0;if(!_0x48e5f0[_0x5d11e0(0x1f6)])_0x226ff6['push'](_0x48e5f0[_0x5d11e0(0x233)]);});if(_0x2b5b94=='')for(const [_0x203b33,_0x20bfad]of Object[_0x43aab0(0x219)](mybalances)){_0x20bfad[_0x43aab0(0x1c4)]()!=0x0&&_0x4172e7[_0x43aab0(0x20b)]({'coin':_0x203b33});}else for(const [_0x2b1e56,_0x2112b1]of Object[_0x43aab0(0x219)](mybalances)){if(_0x226ff6[_0x43aab0(0x25b)](_0x2b1e56)){const _0x267283=config[_0x43aab0(0x1a1)][_0x43aab0(0x199)](_0x17b0ea=>_0x17b0ea[_0x43aab0(0x233)]==_0x2b1e56);if((_0x2112b1[_0x43aab0(0x1c4)]()!=0x0||_0x267283)&&(allSymbols[_0x43aab0(0x25b)](_0x2b1e56+'/'+_0x2b5b94)||_0x2b1e56==_0x2b5b94))_0x4172e7[_0x43aab0(0x20b)]({'coin':_0x2b1e56,'symbol':_0x2b1e56+'/'+_0x2b5b94,'reverse':![],'number':Math[_0x43aab0(0x1d4)](_0x2112b1+(_0x267283&&_0x267283[_0x43aab0(0x1b1)]||0x0),0x0)}),_0x2b1e56!=_0x2b5b94&&_0x478ec9['push'](_0x2b1e56+'/'+_0x2b5b94);else(_0x2112b1['toString']()!=0x0||_0x267283)&&allSymbols['includes'](_0x2b5b94+'/'+_0x2b1e56)&&(_0x4172e7[_0x43aab0(0x20b)]({'coin':_0x2b1e56,'symbol':_0x2b5b94+'/'+_0x2b1e56,'reverse':!![],'number':Math['max'](_0x2112b1+(_0x267283&&_0x267283[_0x43aab0(0x1b1)]||0x0),0x0)}),_0x2b1e56!=_0x2b5b94&&_0x478ec9[_0x43aab0(0x20b)](_0x2b5b94+'/'+_0x2b1e56));}}}catch(_0x1c4f59){if(!_0x122f2c){if(_0x1c4f59[_0x43aab0(0x1c4)]()[_0x43aab0(0x25b)](_0x43aab0(0x270)))return logHistory('error',_0x43aab0(0x16f)),![];else{if(_0x1c4f59[_0x43aab0(0x1c4)]()[_0x43aab0(0x25b)](_0x43aab0(0x244)))return logHistory(_0x43aab0(0x1a7),_0x43aab0(0x20c)),![];else{if(_0x1c4f59[_0x43aab0(0x1c4)]()[_0x43aab0(0x25b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',_0x43aab0(0x1d9)),![];else await handleError(_0x1c4f59,'getCoins()');}}}else await handleError(_0x1c4f59,'getCoins()');}return _0x4172e7;}async function getPortfolio(_0x28a2ce){const _0x1f2e43=_0x3b5833;let _0x282501=[],_0x2f99ca=[],_0xce8357,_0x3ab596=[],_0x298f2d,_0x211825;_0x28a2ce[_0x1f2e43(0x228)]==='************'||_0x28a2ce[_0x1f2e43(0x1d1)]==='************'?(_0x298f2d=config[_0x1f2e43(0x228)],_0x211825=config['apiSecret']):(_0x298f2d=_0x28a2ce[_0x1f2e43(0x228)],_0x211825=_0x28a2ce[_0x1f2e43(0x1d1)]);await initExchange(_0x298f2d,_0x211825);let _0x27c7ae=await loadSymbols();if(_0x27c7ae){_0x3ab596=await getCoins(![],_0x28a2ce[_0x1f2e43(0x1a3)]);if(_0x3ab596===![])proxyEmit(_0x1f2e43(0x1a1),![]);else{if(_0x28a2ce['basecoin']=='')proxyEmit(_0x1f2e43(0x1a1),_0x3ab596);else{_0x3ab596[_0x1f2e43(0x21b)](_0x12ef13=>{const _0x579a26=_0x1f2e43;_0x282501['push'](_0x12ef13[_0x579a26(0x1dc)]);});try{_0x2f99ca=await exchange[_0x1f2e43(0x1e2)](_0x282501);}catch(_0x4ee2f3){await handleError(_0x4ee2f3,_0x1f2e43(0x1ab));}_0x3ab596['forEach'](_0x4d037a=>{const _0x1e007b=_0x1f2e43;_0x4d037a[_0x1e007b(0x233)]!=_0x28a2ce[_0x1e007b(0x1a3)]?_0xce8357=_0x4d037a[_0x1e007b(0x200)]?0x1/_0x2f99ca[_0x4d037a[_0x1e007b(0x1dc)]][_0x1e007b(0x1ec)]:_0x2f99ca[_0x4d037a[_0x1e007b(0x1dc)]][_0x1e007b(0x1ec)]:_0xce8357=0x1,_0x4d037a['price']=formatResult(_0xce8357,0x8);}),proxyEmit(_0x1f2e43(0x1a1),_0x3ab596);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x2f6aeb){const _0x476155=_0x3b5833;let _0x4e4ac6=!![];const _0x2be593=!_0x2f6aeb[_0x476155(0x200)]?markets[_0x2f6aeb[_0x476155(0x1dc)]][_0x476155(0x218)]['amount'][_0x476155(0x166)]:markets[_0x2f6aeb[_0x476155(0x1dc)]][_0x476155(0x218)][_0x476155(0x277)][_0x476155(0x166)],_0x470ac8=!_0x2f6aeb['reverse']?markets[_0x2f6aeb[_0x476155(0x1dc)]]['limits']['cost'][_0x476155(0x166)]:markets[_0x2f6aeb[_0x476155(0x1dc)]][_0x476155(0x218)][_0x476155(0x22b)][_0x476155(0x166)];if(Math[_0x476155(0x1e0)](_0x2f6aeb[_0x476155(0x180)])<_0x2be593)_0x4e4ac6=![];if(Math[_0x476155(0x1e0)](_0x2f6aeb[_0x476155(0x180)])*_0x2f6aeb[_0x476155(0x1ec)]<_0x470ac8)_0x4e4ac6=![];let _0x5544d3=config[_0x476155(0x1a1)][_0x476155(0x199)](_0x2a6644=>_0x2a6644['coin']==_0x2f6aeb[_0x476155(0x233)]);if(Math[_0x476155(0x1e0)](_0x2f6aeb[_0x476155(0x180)])>_0x2f6aeb[_0x476155(0x17f)]-_0x5544d3[_0x476155(0x1b1)])_0x4e4ac6=![];return _0x4e4ac6;}async function getBalances(){const _0x1389f2=_0x3b5833;let _0x2d5f91=0x0,_0x4ca37a;const _0x152970=config[_0x1389f2(0x160)];currentCoins[_0x1389f2(0x21b)](_0x22195d=>{const _0x4b2fce=_0x1389f2;if(_0x22195d[_0x4b2fce(0x233)]!=config['basecoin']){let _0xcda0ab=global[_0x4b2fce(0x1e8)][noslash(_0x22195d[_0x4b2fce(0x1dc)])];_0x4ca37a=_0x22195d[_0x4b2fce(0x200)]?0x1/_0xcda0ab:_0xcda0ab;}else _0x4ca37a=0x1;let _0x194d39=_0x22195d[_0x4b2fce(0x17f)]*_0x4ca37a;_0x2d5f91+=_0x194d39,_0x22195d[_0x4b2fce(0x1ec)]=formatResult(Number(_0x4ca37a),0x8),_0x22195d[_0x4b2fce(0x1c6)]=_0x194d39;}),currentCoins[_0x1389f2(0x21b)](_0x588961=>{const _0x94ef9f=_0x1389f2;let _0x1dc168=config[_0x94ef9f(0x1a1)][_0x94ef9f(0x199)](_0x17abc2=>_0x17abc2['coin']==_0x588961[_0x94ef9f(0x233)]),_0x29fb86=Number(_0x1dc168[_0x94ef9f(0x275)]),_0x426c9c=_0x588961[_0x94ef9f(0x1c6)]/_0x2d5f91*0x64,_0x2685b8=_0x29fb86*_0x2d5f91/0x64/_0x588961['last']-_0x588961[_0x94ef9f(0x17f)];_0x588961[_0x94ef9f(0x275)]=formatResult(_0x426c9c,0x3),_0x588961[_0x94ef9f(0x1f8)]=formatResult(_0x29fb86,0x3),_0x588961[_0x94ef9f(0x180)]=formatResult(_0x2685b8,0x8),_0x588961[_0x94ef9f(0x196)]='',_0x588961[_0x94ef9f(0x258)]='';if(_0x588961['coin']!=config[_0x94ef9f(0x1a3)]){if(_0x588961[_0x94ef9f(0x275)]>_0x29fb86)_0x588961[_0x94ef9f(0x196)]=_0x94ef9f(0x18c),_0x588961[_0x94ef9f(0x258)]=checkMinimums(_0x588961);else _0x588961['distribution']<_0x29fb86&&(_0x588961[_0x94ef9f(0x196)]=_0x94ef9f(0x1a0),_0x588961['valid']=checkMinimums(_0x588961));}_0x588961[_0x94ef9f(0x1df)]=_0x588961[_0x94ef9f(0x275)]/_0x588961[_0x94ef9f(0x1f8)]-0x1;}),currentCoins[_0x1389f2(0x1f1)]((_0x3058e0,_0x2cfec9)=>_0x3058e0[_0x1389f2(0x1df)]<_0x2cfec9[_0x1389f2(0x1df)]?0x1:_0x2cfec9[_0x1389f2(0x1df)]<_0x3058e0[_0x1389f2(0x1df)]?-0x1:0x0);const _0x5816ec=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5816ec[_0x1389f2(0x259)],'usd':_0x5816ec[_0x1389f2(0x1a4)],'portfolio':JSON[_0x1389f2(0x15e)](currentCoins),'threshold':_0x152970},proxyEmit(_0x1389f2(0x19b),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1389f2(0x163)])headlessMode({'portfolio':currentCoins,'threshold':_0x152970});else notifyBalance({'portfolio':currentCoins,'threshold':_0x152970});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xe3dca8=_0x3b5833;if(!lastBalances)return;let _0x524ab6=await getStartingBalances(![]),_0xedae87=[],_0x29b080;JSON[_0xe3dca8(0x235)](lastBalances[_0xe3dca8(0x1a1)])['forEach'](_0x1372d3=>{const _0x18977a=_0xe3dca8;let _0x1d42e0={'coin':_0x1372d3[_0x18977a(0x233)],'number':_0x1372d3[_0x18977a(0x17f)],'price':_0x1372d3['last']};_0xedae87[_0x18977a(0x20b)](_0x1d42e0);});const _0x371c94=await getFiat();_0x29b080={'date':lastBalances[_0xe3dca8(0x1cd)][_0xe3dca8(0x167)]('\x20')[0x0],'eur':_0x371c94[_0xe3dca8(0x259)],'usd':_0x371c94[_0xe3dca8(0x1a4)],'coins':_0xedae87};let _0x36fc05=dbPerformance[_0xe3dca8(0x1b5)](_0xe3dca8(0x1c9))['find']({'date':_0x29b080[_0xe3dca8(0x1a2)]})[_0xe3dca8(0x1c6)]();_0x36fc05?dbPerformance[_0xe3dca8(0x1b5)]('data')[_0xe3dca8(0x199)]({'date':_0x29b080[_0xe3dca8(0x1a2)]})[_0xe3dca8(0x1ae)](_0x29b080)[_0xe3dca8(0x210)]():dbPerformance[_0xe3dca8(0x1b5)](_0xe3dca8(0x1c9))['push'](_0x29b080)[_0xe3dca8(0x210)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x55d8d7=_0x3b5833;if(dbPerformance[_0x55d8d7(0x25a)](_0x55d8d7(0x1c9))[_0x55d8d7(0x1c6)]()){let _0x1ac81a=dbPerformance['get'](_0x55d8d7(0x1c9))['sortBy'](_0x55d8d7(0x1a2))[_0x55d8d7(0x1c6)]();proxyEmit(_0x55d8d7(0x264),_0x1ac81a),lastPerformanceEmitted=getDate();}else proxyEmit(_0x55d8d7(0x264),[]);}async function getStartingBalances(_0x399aed=!![]){const _0x36a5ef=_0x3b5833;let _0x40f490=dbPerformance[_0x36a5ef(0x1b5)](_0x36a5ef(0x1c9))[_0x36a5ef(0x199)]({'date':config['startdate']})[_0x36a5ef(0x1c6)]();config[_0x36a5ef(0x228)]!=''&&!_0x40f490&&(await setStartDatePerformance(config),_0x40f490=dbPerformance[_0x36a5ef(0x1b5)](_0x36a5ef(0x1c9))[_0x36a5ef(0x199)]({'date':config[_0x36a5ef(0x231)]})[_0x36a5ef(0x1c6)]());if(config[_0x36a5ef(0x228)]==''||!_0x40f490)return{};let _0x33c0eb=0x0,_0x1f46ae=0x0,_0x3aa9fd=0x0,_0x38255a=[],_0x33951f=0x0;config[_0x36a5ef(0x1a1)][_0x36a5ef(0x21b)](_0x6a5aab=>{const _0x4c2da6=_0x36a5ef;if(!_0x6a5aab['excluded']){_0x38255a[_0x33951f]={'coin':_0x6a5aab['coin'],'symbol':_0x6a5aab[_0x4c2da6(0x1dc)],'number':_0x6a5aab[_0x4c2da6(0x18f)],'price':_0x6a5aab[_0x4c2da6(0x186)]},_0x33c0eb+=_0x6a5aab['startprice']*_0x6a5aab[_0x4c2da6(0x18f)];if(config['basecoin']==_0x4c2da6(0x1fe))_0x1f46ae+=_0x6a5aab[_0x4c2da6(0x186)]*_0x6a5aab[_0x4c2da6(0x18f)]*_0x40f490['eur'],_0x3aa9fd+=_0x6a5aab[_0x4c2da6(0x186)]*_0x6a5aab[_0x4c2da6(0x18f)]*_0x40f490[_0x4c2da6(0x1a4)];else{if(config[_0x4c2da6(0x1a3)]==_0x4c2da6(0x27b)||config[_0x4c2da6(0x1a3)]==_0x4c2da6(0x1c8)||config[_0x4c2da6(0x1a3)]==_0x4c2da6(0x1bb))_0x1f46ae+=_0x6a5aab['startprice']*_0x6a5aab[_0x4c2da6(0x18f)]*_0x40f490[_0x4c2da6(0x259)]/_0x40f490[_0x4c2da6(0x1a4)],_0x3aa9fd+=_0x6a5aab['startprice']*_0x6a5aab['startnumber'];else config['basecoin']==_0x4c2da6(0x266)&&(_0x1f46ae+=_0x6a5aab[_0x4c2da6(0x186)]*_0x6a5aab[_0x4c2da6(0x18f)],_0x3aa9fd+=_0x6a5aab[_0x4c2da6(0x186)]*_0x6a5aab['startnumber']*_0x40f490[_0x4c2da6(0x1a4)]/_0x40f490[_0x4c2da6(0x259)]);}_0x33951f++;}});let _0x5524e5={'basecoin':_0x33c0eb,'eur':_0x1f46ae,'usd':_0x3aa9fd,'coins':_0x38255a};if(_0x399aed)proxyEmit('starting-balances',_0x5524e5);return _0x5524e5;}function headlessMode(_0x43f3c5){const _0x43a1e1=_0x3b5833;let _0x157361=_0x43f3c5['portfolio'],_0x5e782d=_0x43f3c5['threshold'],_0x1f9978=[];for(let _0x40c4a3 of _0x157361){if(_0x40c4a3['coin']!=config['basecoin']){if(_0x40c4a3[_0x43a1e1(0x275)]/_0x40c4a3[_0x43a1e1(0x1f8)]-0x1>=_0x5e782d/0x64){if(_0x40c4a3[_0x43a1e1(0x258)])_0x1f9978[_0x43a1e1(0x20b)](_0x40c4a3);}else{if(_0x40c4a3[_0x43a1e1(0x275)]/_0x40c4a3[_0x43a1e1(0x1f8)]-0x1<=-_0x5e782d/0x64){if(_0x40c4a3['valid'])_0x1f9978[_0x43a1e1(0x20b)](_0x40c4a3);}}}}_0x1f9978['length']>0x0&&placeOrder(_0x1f9978);}function notifyBalance(_0x11af51){const _0x24c5eb=_0x3b5833;let _0x5ab7f0=_0x11af51['portfolio'],_0x1ac477=_0x11af51[_0x24c5eb(0x160)],_0x38e801=[];for(let _0x3eb5a5 of _0x5ab7f0){if(_0x3eb5a5['coin']!=config['basecoin']){if(_0x3eb5a5['distribution']/_0x3eb5a5[_0x24c5eb(0x1f8)]-0x1>=_0x1ac477/0x64){if(_0x3eb5a5[_0x24c5eb(0x258)])_0x38e801[_0x24c5eb(0x20b)](_0x3eb5a5);}else{if(_0x3eb5a5[_0x24c5eb(0x275)]/_0x3eb5a5[_0x24c5eb(0x1f8)]-0x1<=-_0x1ac477/0x64){if(_0x3eb5a5[_0x24c5eb(0x258)])_0x38e801[_0x24c5eb(0x20b)](_0x3eb5a5);}}}}if(_0x38e801['length']>0x0){let _0xefb935=_0x38e801[_0x24c5eb(0x252)](_0x35568c=>_0x35568c[_0x24c5eb(0x233)]);_0xefb935[_0x24c5eb(0x1f1)]((_0x3ab9e4,_0x332691)=>_0x3ab9e4['coin']<_0x332691[_0x24c5eb(0x233)]?0x1:_0x332691['coin']<_0x3ab9e4[_0x24c5eb(0x233)]?-0x1:0x0);let _0xbd2eb7=_0xefb935[_0x24c5eb(0x24a)](',\x20');if(lastCoinsToBalance!==_0xbd2eb7)logHistory(_0x24c5eb(0x1fb),_0x24c5eb(0x184)+_0xbd2eb7);lastCoinsToBalance=_0xbd2eb7;}}function _0xd5ac(_0x3181a6,_0x22f9e1){const _0x4cd613=_0x351f();return _0xd5ac=function(_0x4a81fd,_0x46d001){_0x4a81fd=_0x4a81fd-0x15d;let _0x351fcc=_0x4cd613[_0x4a81fd];return _0x351fcc;},_0xd5ac(_0x3181a6,_0x22f9e1);}function _0x351f(){const _0x4cb8cb=['fetchOHLCV','\x20|\x20Error\x20details:\x20','limits','entries','apply','forEach','Error:\x20Invalid\x20argument\x20','breakeven','running','Market','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','cancel','getMinutes','cancelOrder()','send','enabled','ExchangeNotAvailable','configuration-stored','apiKey','orderId','InvalidNonce','amount','event-history','kill','hybrid-crypto-js','restart','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','startdate','userData','coin','Order:\x20','parse','recreate','test','BTCBUSD','message','add','accumulatedQuantity','differenceInCalendarDays','WebSockets(','BTCUSDT','outboundAccountPosition','binanceus','success','format','bot-','AuthenticationError','722238bWzuei','fees',')\x20|\x20Error\x20details:\x20','subscribeSpotKline','padStart','join','price','secure','page','getDate','toLowerCase','emojibuy','getCloses()','map','BTCEUR','keys','existsSync','defaults','splice','valid','eur','has','includes','lowdb/adapters/FileSync','binance','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','filter','type','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','executionReport','limit','performance','cancelOrder','EUR','symbols','bb-secure.json','market','BNB','progress','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','length','23787SKVVVK','\x20orders\x20in\x20less\x20than\x20','API-key\x20format\x20invalid','115086mkEHeN','coin-loading-progress','logs','yyyy-MM-dd\x27T\x27HH:mm:ss','distribution','bb-settings.json','cost','sha256','shift','configuration','BUSD','Order\x20amount\x20is\x20invalid:\x20','stringify','spot','threshold','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','2481248JbtsuV','headless','cancelLoading','emojisell','min','split','yyyy/MM/dd','loadMarkets','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','currency','\x20>\x20','FILLED','DAI/','Binance\x20API\x20key\x20is\x20invalid','differenceInSeconds','\x20hour','5Clsxmx','BTC/USDT','LIMIT','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Executed\x20','Order(s)\x20filled\x20-\x20balancing\x20resumed','close','\x20order:\x20','OrderNotFound','Limit\x20(high-margin)',',\x20must\x20be\x20a\x203\x20digit\x20number','wss://stream.binance.us:9443','version','number','trade','toFixed','\x20minutes\x20-\x20balancing\x20resumed','-events.json','Manually\x20balance:\x20','initclient','startprice','HOT/BTC','cooldown','Order(s)\x20not\x20validated\x20after\x20','decrypt','fee','sell','sortBy','************','startnumber','slice','253781IePaRV','wsMarket','960PRdiMW','reduce','botID','side','coinamount','3030344sLXHvI','find','realized','balances','exit','formattedMessage','loadSymbols()','yyyy/MM/dd\x20HH:mm:ss','buy','portfolio','date','basecoin','usd','getTime','getFullYear','error',':\x20Bot\x20','fetchBalance','DDoSProtection','getPortfolio()','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','availableBalance','assign','storeHeadless','./version.json','offset','wss://stream.binance.com:9443','getHours','remainingSymbols','get','indexOf','mkdirSync','Limit\x20(low-margin)','replace','91WYJkZn','USDC','getStartingBalances','milliseconds','-config.json','parseISO','constructor','argv','placeOrder()','getSeconds','toString','Bot\x20','value','args','USDT','data','-results.json','ccxt','fromCodePoint','time','HOT/EUR','log','Invalid\x20quantity','apiSecret','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','MIN_NOTIONAL','max','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getPortfolio','(((.+)+)+)+$','kline','Binance\x20API\x20secret\x20is\x20invalid','Order\x20filled:\x20','filled','symbol','limit-high','closeWs','delta','abs','./config/','fetchTickers','wsKey','1670gnlqbe','001','exchange','bot','ticker','42dxRSRP','lowdb','settings','last','timeshift','search','Performance\x20recreation\x20completed\x20successfully','datetime','sort','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','RSA-OAEP','timestamp','round','excluded','date-fns','target','Crypt','createOrder','order','timeout','coins','BTC','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','reverse','event','showname','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Unfilled\x20order(s)\x20canceled\x20after\x20','isArray','remove','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','botname','eventType','getMonth','push','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','348378dPbvDP','ask','ordertype','write','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','function','privateKey',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','\x20|\x20Unknown\x20error\x20occured'];_0x351f=function(){return _0x4cb8cb;};return _0x351f();}function symbolToCoin(_0x19db45){const _0x2bde3a=_0x3b5833;let _0xf33989;if(_0x19db45[_0x2bde3a(0x25b)]('/'+config['basecoin']))_0xf33989=_0x19db45[_0x2bde3a(0x1b9)]('/'+config[_0x2bde3a(0x1a3)],'');if(_0x19db45[_0x2bde3a(0x25b)](config[_0x2bde3a(0x1a3)]+'/'))_0xf33989=_0x19db45['replace'](config[_0x2bde3a(0x1a3)]+'/','');return _0xf33989;}async function validateOrders(_0x9119ad=0x0){const _0xb88a99=_0x3b5833;let _0x4b92d3=[],_0x953255=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xb88a99(0x1fc)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xb88a99(0x21b)](_0x454b44=>{const _0x98304b=_0xb88a99;let _0x9f9db7=previousCoins[_0x98304b(0x199)](_0x4e9e66=>_0x4e9e66[_0x98304b(0x233)]==symbolToCoin(_0x454b44[_0x98304b(0x1dc)])),_0x52f163=currentCoins[_0x98304b(0x199)](_0x452087=>_0x452087['coin']==symbolToCoin(_0x454b44[_0x98304b(0x1dc)])),_0x4107ae,_0x239d73;_0x454b44[_0x98304b(0x196)]=='buy'&&!_0x454b44[_0x98304b(0x200)]||_0x454b44[_0x98304b(0x196)]=='sell'&&_0x454b44[_0x98304b(0x200)]?(_0x4107ae=_0x9f9db7[_0x98304b(0x17f)]+0.9*_0x454b44[_0x98304b(0x1db)],_0x239d73=_0x9f9db7['number']+1.1*_0x454b44['filled']):(_0x4107ae=_0x9f9db7['number']-1.1*_0x454b44['filled'],_0x239d73=_0x9f9db7[_0x98304b(0x17f)]-0.9*_0x454b44[_0x98304b(0x1db)]);const _0x9c1fa3=_0x454b44[_0x98304b(0x1db)]!=0x0&&_0x52f163['number']>=_0x4107ae&&_0x52f163[_0x98304b(0x17f)]<=_0x239d73;_0x4b92d3[_0x98304b(0x20b)](_0x9c1fa3);if(_0x9c1fa3&&config[_0x98304b(0x20f)]!=_0x98304b(0x269)){if(_0x454b44['reverse'])logHistory('order',_0x98304b(0x1da)+_0x454b44[_0x98304b(0x1dc)]+'\x20'+_0x454b44[_0x98304b(0x196)]+'\x20#'+formatResult(_0x454b44[_0x98304b(0x1db)]/_0x454b44[_0x98304b(0x24b)],0x8)+'\x20@'+formatResult(_0x454b44[_0x98304b(0x24b)],0x8));else logHistory(_0x98304b(0x1fb),_0x98304b(0x1da)+_0x454b44[_0x98304b(0x1dc)]+'\x20'+_0x454b44['side']+'\x20#'+formatResult(_0x454b44[_0x98304b(0x1db)],0x8)+'\x20@'+formatResult(_0x454b44[_0x98304b(0x24b)],0x8));}}),_0x4b92d3[_0xb88a99(0x21b)]((_0x49ddfa,_0x32d56e)=>{const _0x508c9d=_0xb88a99;if(_0x49ddfa)lastOrders[_0x508c9d(0x257)](_0x32d56e,0x1);});if(_0x9119ad<_0x953255&&_0x4b92d3['includes'](![])){if(_0x9119ad==0x0){config[_0xb88a99(0x20f)]==_0xb88a99(0x269)?logHistory(_0xb88a99(0x1a7),_0xb88a99(0x25e)):logHistory(_0xb88a99(0x1a7),_0xb88a99(0x203));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x9119ad);},0xa*0x3e8);}else{(_0x9119ad==0x1||_0x9119ad==Math[_0xb88a99(0x1f5)](_0x953255/0x2)||_0x9119ad==_0x953255-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x9119ad);},validateOrderInterval);}}else{lockOrders=![];if(_0x9119ad>0x0&&!_0x4b92d3[_0xb88a99(0x25b)](![]))config[_0xb88a99(0x20f)]=='market'?logHistory(_0xb88a99(0x241),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0xb88a99(0x241),_0xb88a99(0x177));else _0x9119ad>0x0&&_0x4b92d3[_0xb88a99(0x25b)](![])&&(config[_0xb88a99(0x20f)]==_0xb88a99(0x269)?logHistory('success',_0xb88a99(0x189)+Math['round'](_0x953255*validateOrderInterval/0xea60)+_0xb88a99(0x182)):(lastOrders[_0xb88a99(0x21b)](async _0x2807eb=>{const _0x51aa6b=_0xb88a99;try{const _0x1852cf=await exchange[_0x51aa6b(0x265)](_0x2807eb['orderId'],_0x2807eb['symbol']);}catch(_0x25353b){if(_0x25353b[_0x51aa6b(0x1c4)]()[_0x51aa6b(0x25b)](_0x51aa6b(0x17a))){}else await handleError(_0x25353b,_0x51aa6b(0x223));}}),logHistory(_0xb88a99(0x241),_0xb88a99(0x204)+Math[_0xb88a99(0x1f5)](_0x953255*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x4134eb=_0x3b5833;dbCoinResults[_0x4134eb(0x1b5)]('coins')['remove']()[_0x4134eb(0x210)]();let _0x34a20c=await getStartingBalances(![]);_0x34a20c[_0x4134eb(0x1fd)][_0x4134eb(0x21b)](_0x323b4d=>{const _0x4bcb14=_0x4134eb,_0x307084=_0x323b4d[_0x4bcb14(0x1dc)]['includes'](config[_0x4bcb14(0x1a3)]+'/');if(_0x323b4d[_0x4bcb14(0x233)]!=config['basecoin']){let _0x55a903={'coin':_0x323b4d[_0x4bcb14(0x233)],'number':_0x323b4d[_0x4bcb14(0x17f)],'breakeven':_0x323b4d[_0x4bcb14(0x24b)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4bcb14(0x1b5)](_0x4bcb14(0x1fd))['push'](_0x55a903)['write']();}});}async function updateCoinResults(_0xb2833f){const _0x1ae022=_0x3b5833;let _0x19d53b,_0x51eebe,_0x3e29da,_0x3b6954,_0x228bdd,_0x3f5f97,_0xa21342=dbCoinResults[_0x1ae022(0x1b5)]('coins')['find']({'coin':_0xb2833f['coin']})[_0x1ae022(0x1c6)]();if(!_0xa21342)return;if(_0xb2833f['fee']&&_0xb2833f['fee'][_0x1ae022(0x16b)]==config[_0x1ae022(0x1a3)])_0x19d53b=_0xb2833f[_0x1ae022(0x18b)]['cost'];else{if(_0xb2833f['fee']&&_0xb2833f[_0x1ae022(0x18b)]['currency']==_0x1ae022(0x26a))_0x19d53b=_0xb2833f['fee'][_0x1ae022(0x277)]*global['ticker'][_0x1ae022(0x26a)+config['basecoin']];else _0x19d53b=0.001*_0xb2833f[_0x1ae022(0x1db)];}const _0x23944a=_0xb2833f[_0x1ae022(0x1dc)][_0x1ae022(0x25b)](config[_0x1ae022(0x1a3)]+'/');_0x23944a&&(_0x3f5f97={'coin':_0xb2833f['coin'],'symbol':_0xb2833f[_0x1ae022(0x1dc)],'filled':_0xb2833f[_0x1ae022(0x1db)]*_0xb2833f[_0x1ae022(0x24b)],'side':_0xb2833f[_0x1ae022(0x196)]=='sell'?_0x1ae022(0x1a0):_0x1ae022(0x18c),'price':0x1/_0xb2833f[_0x1ae022(0x24b)]},_0xb2833f={..._0x3f5f97});_0xb2833f[_0x1ae022(0x196)]=='buy'?_0x3e29da=(_0xa21342['breakeven']*_0xa21342[_0x1ae022(0x17f)]+_0xb2833f[_0x1ae022(0x24b)]*_0xb2833f[_0x1ae022(0x1db)])/(_0xa21342['number']+_0xb2833f['filled']):_0x3e29da=(_0xa21342[_0x1ae022(0x21d)]*_0xa21342[_0x1ae022(0x17f)]-_0xb2833f[_0x1ae022(0x24b)]*_0xb2833f[_0x1ae022(0x1db)])/(_0xa21342[_0x1ae022(0x17f)]-_0xb2833f[_0x1ae022(0x1db)]);_0xb2833f[_0x1ae022(0x196)]==_0x1ae022(0x1a0)?_0x3b6954=_0xa21342[_0x1ae022(0x19a)]:_0x3b6954=_0xa21342[_0x1ae022(0x19a)]+(_0xb2833f[_0x1ae022(0x24b)]-_0xa21342['breakeven'])*_0xb2833f['filled'];_0x51eebe=_0xb2833f[_0x1ae022(0x196)]==_0x1ae022(0x18c)?_0xa21342[_0x1ae022(0x17f)]-_0xb2833f['filled']:_0xa21342[_0x1ae022(0x17f)]+_0xb2833f['filled'],_0x228bdd=(_0xb2833f[_0x1ae022(0x24b)]-_0x3e29da)*_0x51eebe;let _0x265a4a={'coin':_0xb2833f['coin'],'number':_0x51eebe,'breakeven':formatResult(_0x3e29da,0x8),'realized':formatResult(_0x3b6954,0x8),'unrealized':formatResult(_0x228bdd,0x8),'fees':formatResult(_0xa21342[_0x1ae022(0x246)]+_0x19d53b,0x8),'sells':_0xb2833f[_0x1ae022(0x196)]==_0x1ae022(0x18c)?_0xa21342['sells']+0x1:_0xa21342['sells'],'buys':_0xb2833f[_0x1ae022(0x196)]==_0x1ae022(0x1a0)?_0xa21342['buys']+0x1:_0xa21342['buys']};dbCoinResults[_0x1ae022(0x1b5)](_0x1ae022(0x1fd))[_0x1ae022(0x199)]({'coin':_0xb2833f['coin']})['assign'](_0x265a4a)['write']();}async function placeOrder(_0x4a60fe){const _0x5a8b0d=_0x3b5833,_0x520ed5=config[_0x5a8b0d(0x20f)]==_0x5a8b0d(0x269)?_0x5a8b0d(0x269):_0x5a8b0d(0x263);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x5a8b0d(0x15e)](currentCoins));for(const _0x209114 of _0x4a60fe){let _0x231328,_0xad9875,_0xb61360,_0x27225d,_0xaf273e,_0x3639dd=_0x209114[_0x5a8b0d(0x1dc)];try{const _0x59607e=await exchange[_0x5a8b0d(0x1e2)](_0x3639dd),_0x35c646=_0x59607e[_0x3639dd];_0x231328=_0x35c646['last'],_0xad9875=_0x35c646['bid'],_0xb61360=_0x35c646[_0x5a8b0d(0x20e)];_0x209114['reverse']?(_0x27225d=_0x209114['side']==_0x5a8b0d(0x1a0)?_0x5a8b0d(0x18c):_0x5a8b0d(0x1a0),_0xaf273e=Math[_0x5a8b0d(0x1e0)](_0x209114['trade'])/_0x231328):(_0x27225d=_0x209114[_0x5a8b0d(0x196)],_0xaf273e=Math['abs'](_0x209114['trade']));_0x520ed5==_0x5a8b0d(0x263)&&(config[_0x5a8b0d(0x20f)]==_0x5a8b0d(0x1dd)&&(_0x231328=_0x27225d==_0x5a8b0d(0x1a0)?_0xad9875:_0xb61360),config[_0x5a8b0d(0x20f)]=='limit-low'&&(_0x231328=_0x27225d==_0x5a8b0d(0x1a0)?_0xb61360:_0xad9875));_0xaf273e=formatResult(_0xaf273e,0x8),_0x231328=formatResult(_0x231328,0x8);const _0x363201=await exchange[_0x5a8b0d(0x1fa)](_0x3639dd,_0x520ed5,_0x27225d,_0xaf273e,_0x231328);lastOrders[_0x5a8b0d(0x20b)]({'orderId':_0x363201['id'],'symbol':_0x3639dd,'side':_0x27225d,'reverse':_0x209114[_0x5a8b0d(0x200)],'amount':_0x209114[_0x5a8b0d(0x200)]?_0x363201[_0x5a8b0d(0x22b)]*_0x363201[_0x5a8b0d(0x24b)]:_0x363201['amount'],'filled':_0x209114['reverse']?_0x363201['filled']*_0x363201[_0x5a8b0d(0x24b)]:_0x363201[_0x5a8b0d(0x1db)],'price':_0x363201[_0x5a8b0d(0x24b)]});const _0x161cd4=_0x27225d==_0x5a8b0d(0x18c)?config[_0x5a8b0d(0x165)]?String[_0x5a8b0d(0x1cc)]('0x'+config[_0x5a8b0d(0x165)])+'\x20':'':config[_0x5a8b0d(0x250)]?String['fromCodePoint']('0x'+config[_0x5a8b0d(0x250)])+'\x20':'',_0x5b6198=_0x520ed5=='market'?_0x5a8b0d(0x21f):config[_0x5a8b0d(0x20f)]==_0x5a8b0d(0x1dd)?_0x5a8b0d(0x17b):_0x5a8b0d(0x1b8);if(_0x520ed5=='market')logHistory(_0x5a8b0d(0x1fb),''+_0x161cd4+_0x5b6198+_0x5a8b0d(0x179)+_0x3639dd+'\x20'+_0x27225d+'\x20#'+formatResult(_0x363201[_0x5a8b0d(0x1db)],0x8)+'\x20@'+formatResult(_0x363201['price'],0x8));else logHistory(_0x5a8b0d(0x1fb),''+_0x161cd4+_0x5b6198+_0x5a8b0d(0x179)+_0x3639dd+'\x20'+_0x27225d+'\x20#'+formatResult(_0x363201[_0x5a8b0d(0x22b)],0x8)+'\x20@'+formatResult(_0x363201[_0x5a8b0d(0x24b)],0x8));_0x363201[_0x5a8b0d(0x233)]=_0x209114[_0x5a8b0d(0x233)],await updateCoinResults(_0x363201);if(config[_0x5a8b0d(0x188)]!=0x0){let _0x1b95c8=null;if(cooldownTracker[_0x5a8b0d(0x26d)]==config[_0x5a8b0d(0x188)]-0x1)_0x1b95c8=cooldownTracker[_0x5a8b0d(0x279)]();const _0x1cdb75=getTimeStamp();cooldownTracker[_0x5a8b0d(0x20b)](_0x1cdb75);if(_0x1b95c8){const _0x41f16b=fns[_0x5a8b0d(0x170)](new Date(_0x1cdb75),new Date(_0x1b95c8));_0x41f16b<cooldownInterval&&(logHistory(_0x5a8b0d(0x1a7),_0x5a8b0d(0x176)+config['cooldown']+_0x5a8b0d(0x26f)+cooldownInterval/0x3c+_0x5a8b0d(0x16a)+cooldownPeriod/(0xe10*0x3e8)+_0x5a8b0d(0x171)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x9f03df){if(_0x9f03df[_0x5a8b0d(0x1c4)]()[_0x5a8b0d(0x25b)](_0x5a8b0d(0x1d3)))logHistory('error',_0x5a8b0d(0x1ac)+_0x3639dd);else{if(_0x9f03df['toString']()['includes'](_0x5a8b0d(0x1d0)))logHistory(_0x5a8b0d(0x1a7),_0x5a8b0d(0x15d)+_0x3639dd);else await handleError(_0x9f03df,_0x5a8b0d(0x1c2));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5a8b0d(0x163)]&&(config['ordertype']==_0x5a8b0d(0x269)?logHistory('error',_0x5a8b0d(0x261)):logHistory(_0x5a8b0d(0x1a7),_0x5a8b0d(0x161)));else coolingDown&&(!config[_0x5a8b0d(0x163)]&&logHistory(_0x5a8b0d(0x1a7),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x4563d1,_0x4d0ffa,_0x2724a9=''){const _0x4a0906=_0x3b5833;let _0x526e0b={'time':getTimeStamp(),'type':_0x4563d1,'event':_0x4d0ffa,'botname':config[_0x4a0906(0x208)],'showname':config[_0x4a0906(0x202)]};dbLogs[_0x4a0906(0x1b5)]('logs')[_0x4a0906(0x20b)](_0x526e0b)['write']();if(_0x2724a9=='')_0x2724a9=_0x4d0ffa;proxyEmit('event',{'log':_0x526e0b,'summary':_0x2724a9}),process[_0x4a0906(0x224)]({'telegram':_0x526e0b},_0x2a9c6a=>{}),logging(''+_0x526e0b[_0x4a0906(0x201)]);}function emitHistory(_0x36e423={}){const _0x5f0f5c=_0x3b5833;Object[_0x5f0f5c(0x254)](_0x36e423)['length']==0x0&&(_0x36e423={'type':['order','event'],'event':'','page':0x1});if(_0x36e423['type']['includes']('event'))_0x36e423[_0x5f0f5c(0x260)][_0x5f0f5c(0x257)](_0x36e423[_0x5f0f5c(0x260)][_0x5f0f5c(0x1b6)]('event'),0x1,'error',_0x5f0f5c(0x241));if(dbLogs[_0x5f0f5c(0x25a)](_0x5f0f5c(0x273))[_0x5f0f5c(0x1c6)]()){let _0x59ce45=dbLogs['get'](_0x5f0f5c(0x273))[_0x5f0f5c(0x25f)](_0x3aa19c=>{const _0x3c4701=_0x5f0f5c;if(_0x36e423[_0x3c4701(0x260)]['length']==0x0)return![];else return _0x36e423[_0x3c4701(0x260)]['includes'](_0x3aa19c[_0x3c4701(0x260)]);})[_0x5f0f5c(0x25f)](_0x5f25f4=>{const _0x304fdd=_0x5f0f5c;if(_0x36e423['event']=='')return!![];else return _0x5f25f4['event'][_0x304fdd(0x24f)]()[_0x304fdd(0x25b)](_0x36e423[_0x304fdd(0x201)][_0x304fdd(0x24f)]());})[_0x5f0f5c(0x18d)](_0x5f0f5c(0x1cd)),_0x1e5a3d=_0x59ce45[_0x5f0f5c(0x1c6)]()['length'];_0x59ce45=_0x59ce45[_0x5f0f5c(0x200)]()[_0x5f0f5c(0x190)]((_0x36e423['page']-0x1)*logPageSize,_0x36e423[_0x5f0f5c(0x24d)]*logPageSize-0x1)['reverse']()[_0x5f0f5c(0x1c6)](),proxyEmit(_0x5f0f5c(0x22c),{'logs':_0x59ce45,'total':_0x1e5a3d});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x3c7f7a){const _0x333b76=_0x3b5833,_0x57161f=new Date()[_0x333b76(0x1a5)]();if(!lastBotPause)lastBotPause=new Date()[_0x333b76(0x1a5)](),consecutivePauses=0x1;else{if(_0x57161f-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x333b76(0x224)]({'stop':_0x333b76(0x22f)},_0x352a06=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x333b76(0x1a5)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x333b76(0x1a7),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x3c7f7a),botPaused=![],reset();}}async function handleError(_0x195454,_0x36ad47,_0x26f056=''){const _0x4adce1=_0x3b5833;if(_0x195454[_0x4adce1(0x1c4)]()[_0x4adce1(0x25b)](_0x4adce1(0x1aa)))logHistory(_0x4adce1(0x1a7),_0x36ad47+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x195454['toString']()['includes'](_0x4adce1(0x226)))logHistory('error',_0x36ad47+_0x4adce1(0x175)),await pauseBot(pauseBotInterval);else{if(_0x195454[_0x4adce1(0x1c4)]()[_0x4adce1(0x25b)]('RequestTimeout'))logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x26c)),await pauseBot(pauseBotInterval);else{if(_0x195454[_0x4adce1(0x1c4)]()['includes'](_0x4adce1(0x270)))logHistory(_0x4adce1(0x1a7),_0x36ad47+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x4adce1(0x1a7),_0x4adce1(0x1f2)),process['send']({'stop':_0x4adce1(0x22d)},_0x585f8d=>{});else{if(_0x195454['toString']()[_0x4adce1(0x25b)](_0x4adce1(0x244)))logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x1d5)),logHistory(_0x4adce1(0x1a7),_0x4adce1(0x1f2)),process[_0x4adce1(0x224)]({'stop':'kill'},_0x1c2b3a=>{});else{if(_0x195454[_0x4adce1(0x1c4)]()[_0x4adce1(0x25b)](_0x4adce1(0x220)))logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x1d2)),logHistory(_0x4adce1(0x1a7),_0x4adce1(0x1f2)),process[_0x4adce1(0x224)]({'stop':_0x4adce1(0x22d)},_0x12f5fc=>{});else{if(_0x195454[_0x4adce1(0x1c4)]()['includes'](_0x4adce1(0x230)))logHistory(_0x4adce1(0x1a7),_0x36ad47+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x4adce1(0x1a7),_0x4adce1(0x1f2)),process[_0x4adce1(0x224)]({'stop':_0x4adce1(0x22d)},_0x195442=>{});else{if(_0x195454[_0x4adce1(0x1c4)]()['includes'](_0x4adce1(0x22a)))logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x211)),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'},_0x119044=>{});else _0x195454[_0x4adce1(0x1c4)]()[_0x4adce1(0x25b)]('InsufficientFunds')?logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x207)):(logHistory(_0x4adce1(0x1a7),_0x36ad47+_0x4adce1(0x215)),logging(_0x36ad47+_0x4adce1(0x217),_0x195454),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xb1a7a1,_0x3fad1b){const _0x321dc3=_0x3b5833;return parseFloat(_0xb1a7a1[_0x321dc3(0x181)](_0x3fad1b));}function logging(_0x328ce5,_0xd690e0=''){const _0x5d4f8b=_0x3b5833;if(config['showname'])console[_0x5d4f8b(0x1cf)](getTimeStamp()+':\x20'+config[_0x5d4f8b(0x208)]+_0x5d4f8b(0x16c)+_0x328ce5,_0xd690e0);else console['log'](getTimeStamp()+_0x5d4f8b(0x1a8)+botID+_0x5d4f8b(0x16c)+_0x328ce5,_0xd690e0);}function getServerTime(){const _0x604d93=_0x3b5833,_0x17b821=new Date();return _0x17b821[_0x604d93(0x1a6)]()+'/'+(_0x17b821['getMonth']()+0x1)['toString']()[_0x604d93(0x249)](0x2,'0')+'/'+_0x17b821[_0x604d93(0x24e)]()['toString']()[_0x604d93(0x249)](0x2,'0')+'\x20'+_0x17b821[_0x604d93(0x1b3)]()[_0x604d93(0x1c4)]()[_0x604d93(0x249)](0x2,'0')+':'+_0x17b821[_0x604d93(0x222)]()[_0x604d93(0x1c4)]()[_0x604d93(0x249)](0x2,'0')+':'+_0x17b821[_0x604d93(0x1c3)]()[_0x604d93(0x1c4)]()[_0x604d93(0x249)](0x2,'0');}function getTimeStamp(){const _0x204236=_0x3b5833,_0x5ec3cb=shiftedTime();return _0x5ec3cb[_0x204236(0x1a6)]()+'/'+(_0x5ec3cb[_0x204236(0x20a)]()+0x1)[_0x204236(0x1c4)]()['padStart'](0x2,'0')+'/'+_0x5ec3cb['getDate']()[_0x204236(0x1c4)]()[_0x204236(0x249)](0x2,'0')+'\x20'+_0x5ec3cb['getHours']()[_0x204236(0x1c4)]()['padStart'](0x2,'0')+':'+_0x5ec3cb[_0x204236(0x222)]()[_0x204236(0x1c4)]()[_0x204236(0x249)](0x2,'0')+':'+_0x5ec3cb['getSeconds']()[_0x204236(0x1c4)]()[_0x204236(0x249)](0x2,'0');}function getDate(){const _0x3b5fd3=_0x3b5833,_0x4dd1d7=shiftedTime();return _0x4dd1d7['getFullYear']()+'/'+(_0x4dd1d7[_0x3b5fd3(0x20a)]()+0x1)[_0x3b5fd3(0x1c4)]()[_0x3b5fd3(0x249)](0x2,'0')+'/'+_0x4dd1d7['getDate']()[_0x3b5fd3(0x1c4)]()[_0x3b5fd3(0x249)](0x2,'0');}function getHour(){const _0x166ac4=_0x3b5833,_0x16fd5d=shiftedTime();return _0x16fd5d[_0x166ac4(0x1b3)]()[_0x166ac4(0x1c4)]()[_0x166ac4(0x249)](0x2,'0');}function sleep(_0x17dd3f){return new Promise(_0x1160e2=>setTimeout(_0x1160e2,_0x17dd3f));}function shiftedTime(){const _0x24c3d9=_0x3b5833,_0xd30794=new Date();let _0x27b0ae=_0xd30794;if(config&&config[_0x24c3d9(0x1ed)]!==0x0)_0x27b0ae=fns[_0x24c3d9(0x23a)](_0xd30794,{'hours':config['timeshift']});return _0x27b0ae;}