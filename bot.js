const _0x2c8b62=_0x1a81;(function(_0x38c7f7,_0x14bb77){const _0x162290=_0x1a81,_0x28fc9b=_0x38c7f7();while(!![]){try{const _0x321ef4=-parseInt(_0x162290(0x25f))/0x1+parseInt(_0x162290(0x308))/0x2+-parseInt(_0x162290(0x2d3))/0x3*(parseInt(_0x162290(0x277))/0x4)+parseInt(_0x162290(0x228))/0x5+-parseInt(_0x162290(0x233))/0x6*(parseInt(_0x162290(0x313))/0x7)+-parseInt(_0x162290(0x32f))/0x8+-parseInt(_0x162290(0x319))/0x9*(-parseInt(_0x162290(0x22b))/0xa);if(_0x321ef4===_0x14bb77)break;else _0x28fc9b['push'](_0x28fc9b['shift']());}catch(_0xd2ee99){_0x28fc9b['push'](_0x28fc9b['shift']());}}}(_0x1921,0xccb9e));const _0x295140=function(){let _0x2f03d2=!![];return function(_0x32f2b2,_0x35dd9e){const _0x370ba9=_0x2f03d2?function(){const _0x4a8d3a=_0x1a81;if(_0x35dd9e){const _0x4d6c10=_0x35dd9e[_0x4a8d3a(0x1ef)](_0x32f2b2,arguments);return _0x35dd9e=null,_0x4d6c10;}}:function(){};return _0x2f03d2=![],_0x370ba9;};}(),_0x1b9b13=_0x295140(this,function(){const _0x343929=_0x1a81;return _0x1b9b13[_0x343929(0x323)]()[_0x343929(0x30b)](_0x343929(0x285))[_0x343929(0x323)]()[_0x343929(0x315)](_0x1b9b13)['search']('(((.+)+)+)+$');});_0x1b9b13();'use strict';const ccxt=require(_0x2c8b62(0x22a))['pro'],low=require(_0x2c8b62(0x1f5)),FileSync=require(_0x2c8b62(0x2cd)),fs=require('fs'),fns=require(_0x2c8b62(0x1d4)),Crypt=require('hybrid-crypto-js')[_0x2c8b62(0x282)],util=require(_0x2c8b62(0x329)),argv=require('yargs/yargs')(process['argv']['slice'](0x2))[_0x2c8b62(0x245)],path=require('path');let exchange;global[_0x2c8b62(0x296)]={},global[_0x2c8b62(0x2d7)]={};const exceptions={'binance':[_0x2c8b62(0x1f6),_0x2c8b62(0x1e0),_0x2c8b62(0x22e),_0x2c8b62(0x244),_0x2c8b62(0x2f1)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2c8b62(0x2e6)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2c8b62(0x2df)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2c8b62(0x2fb))[_0x2c8b62(0x264)],botID=process[_0x2c8b62(0x245)][0x2]||_0x2c8b62(0x2f0),pattern=/^[0-9]{3}$/;!pattern[_0x2c8b62(0x2b4)](botID)&&(console[_0x2c8b62(0x2d4)](_0x2c8b62(0x1cc)+botID+_0x2c8b62(0x2e0)),killBot());const userID=process[_0x2c8b62(0x245)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x2c8b62(0x212)+userID+'/':_0x2c8b62(0x212),loggerfile=fs[_0x2c8b62(0x30e)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x2c8b62(0x20c)](configpath)&&fs[_0x2c8b62(0x30c)](configpath);!fs[_0x2c8b62(0x20c)](logspath)&&fs[_0x2c8b62(0x30c)](logspath);const configfile=configpath+_0x2c8b62(0x309)+botID+'-config.json',logfile=configpath+_0x2c8b62(0x309)+botID+_0x2c8b62(0x243),performancefile=configpath+_0x2c8b62(0x309)+botID+_0x2c8b62(0x202),coinresultsfile=configpath+'bot-'+botID+_0x2c8b62(0x275),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x2c8b62(0x283),configbackuppath=configpath+_0x2c8b62(0x26d),adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x1921(){const _0x175f1c=['Balance\x20Bot\x20does\x20not\x20support\x20the\x20','/USD','simple','No\x20more\x20open\x20orders\x20-\x20','onepagemode','timestamp','InvalidNonce','balancing\x20resumed','./version.json','date','round','Avoiding\x20continuous\x20order\x20attempts','Bot\x20','limit-low','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20metrics:</b>\x20\x0a\x0a','limits','leftTxt','additional\x20symbols\x20','market','warning','1379990EWTtvs','bot-','sortBy','search','mkdirSync','logs','createWriteStream','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','event','headless','3228106EOLbnJ','\x20>\x20[DEBUG]\x20','constructor','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','sell','\x20|\x20highest:\x20','9ylzMZp','fiat','set','showname','loadMarkets','rightTxt','liquidity','fetchClosedOrders',':\x20Bot\x20','side','toString','loadSymbols()','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','sells','startdate','decrypt','util',':\x20timer\x20>','privateKey','apiKey','enabled','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','11540360WnAyNU','amount','exchange\x20not\x20reloaded','substring','2\x20-\x20Handled\x20open\x20orders','apiSecret','ORDERS.LOCKED','length','map','string','net-basecoin','padEnd','Unknown\x20error\x20occured','getCoins()','getSeconds','max','configuration-stored','\x20value','exchanges','\x20:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','currency','coin','toLowerCase','ongoing','highest','price','running','join','Error:\x20Invalid\x20argument\x20','eur','change24h','min','RSA-OAEP','assign','getPortfolio','cancel','date-fns','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20|\x20Error\x20details:\x20','%\x20(','recreate','apiPassword','2.5.0','Pausing\x20for\x20','Manual\x20balancing\x20required','API-key\x20format\x20invalid','delta','1\x20-\x20Unlock\x20orders','HOT/BTC','filled','event-history','remove','bots','timeout','ask','reverse','number','DDoSProtection','getTime','buy','Invalid\x20API\x20key\x20or\x20secret\x20entered','value','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','apply','showConfig','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','last','Limit\x20(low-margin)','final','lowdb','DAI/','getMonth','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','.json','Reset\x20|\x20','cancelOrder','breakeven','changes','fetchTickers','no\x20additional\x20symbols','recovery','secure','-performance.json','\x20has\x20a\x2024h\x20drop\x20of\x20','starting-balances','toUpperCase','clientOrderId','realized','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','limit','InsufficientFunds','forEach','existsSync','restart','getHours','\x20minutes','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','status','./logs/','balances','Order\x20amount\x20is\x20invalid:\x20','timeshift','</pre>','USDT','fetchBalance','watchTrades','Executing\x20exchange\x20reload','page','Portfolio\x20change\x20detected:\x20','openOrders','success','botname','replace','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','emojisell','\x20minutes\x20-\x20','cooldown','performance','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','2\x20-\x20FILLED\x20known\x20order:\x20','4321015vJwHZU','loading-canceled','ccxt','25930480hCyWoG','watchTransactions','\x20|\x20lock\x20orders:\x20','XEM/BUSD','MIN_NOTIONAL','getPortfolio(0)','1\x20-\x20Validate\x20orders:\x20','has','6Jottrt','includes','orderstatus','storeFiat','\x20exchange','1\x20-\x20Handle\x20open\x20orders','\x20not\x20responding','AuthenticationError','kill','emitHistory','args','configuration','\x20order:\x20','split','BUSD','distribution','-events.json','NANO/','argv','close','USD','differenceInSeconds','stringify','sha256','sort','recreateCoinResults()','keys','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','symbol','none','parse','exchange\x20reloaded','<pre>','portfolio','recent20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','placeOrder()','remainingSymbols','symbols','startprice','\x20closed\x20the\x20connection','cancelLoading','2.3.5','startnumber','1026239nXdUcq','isEqual','push','Cooldown\x20ended\x20-\x20balancing\x20resumed','order','version','getFullYear','Fee\x20discount\x20refund\x20detected:\x20','password','bid','padStart','abs','fetchOpenOrders','must\x20be\x20greater\x20than\x20minimum\x20amount','/backup/','\x20not\x20available','filter','writeFile','1\x20-\x20FILLED:\x20','BNB/','Error\x20while\x20deleting\x20files:\x20','2.6.0','-results.json','\x20portfolio:</b>\x20\x0a\x0a','79736gqmHFY','defaults','2\x20-\x20FILLED\x20unknown\x20order:\x20','limit-high','message','BTC','fetchTicker','<b>','unlinkSync','getMinutes','fees','Crypt','bb-secure.json','full','(((.+)+)+)+$','excluded','placeOrder','\x20|\x20','************','sendMetricsTelegram','\x20API\x20secret\x20is\x20invalid','\x20change','indexOf','Invalid\x20quantity','getDate','total','entries','progress','function','2\x20-\x20Validate\x20orders:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ticker','Net\x20effect','find','canceled','ordertype','no\x20open\x20orders','yyyy/MM/dd','get','getPortfolio(1)','ETH','createOrder','amountToPrecision','Order(s)\x20not\x20validated\x20after\x20','valid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','error','netoffset','basecoin','cost','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20hour','initial','LOCKED','Exchange','write','threshold','cloneDeep','ORDERS.UNLOCKED','send','parseISO','test','format','trade','starting-balance-','BNB','fromCodePoint','target','\x20>\x20','bot','UNLOCKING','orderId','net-fiat','datetime','debug','toFixed','type','fee','Market','/EUR','emojibuy','splice','removed','resetHistory','coins','2\x20-\x20Orders\x20unlocked','lowdb/adapters/FileSync','data','customId','exchange','Resetting\x20bot\x20history','\x20orders\x20in\x20less\x20than\x20','57wCoRnJ','log','getPortfolio(2)','slice','change','buys','ORDERS.UNLOCKING','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','0\x20-\x20EXECUTION:\x20','added','offset','findIndex','UNLOCKED',',\x20must\x20be\x20a\x203\x20digit\x20number','Initiating\x20exchange\x20reload','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','getStartingBalances','time','watchOrders','freeze','***','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','storeConfiguration','open','<b>Bot\x20','Order\x20filled:\x20','usd','storeHeadless','EUR','001','YOYOW/','startsWith'];_0x1921=function(){return _0x175f1c;};return _0x1921();}dbLogs['defaults']({'logs':[],'version':serverversion})[_0x2c8b62(0x2ae)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2c8b62(0x278)]({'data':[],'version':serverversion})[_0x2c8b62(0x2ae)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2c8b62(0x278)]({'bot':[],'version':serverversion})[_0x2c8b62(0x2ae)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2c8b62(0x278)]({'coins':[],'version':serverversion})[_0x2c8b62(0x2ae)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2c8b62(0x24a),'rsaStandard':_0x2c8b62(0x1d0)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2c5eb8=>{const _0xebdbf4=_0x2c8b62;console[_0xebdbf4(0x2d4)](_0x2c5eb8);},'simple':_0x38e315=>{const _0x59680b=_0x2c8b62;console['log'](_0x38e315),loggerfile[_0x59680b(0x2ae)](util['format'](_0x38e315)+'\x0a');},'full':async(_0x18996b,_0x4538bc='')=>{const _0x1aa8fd=_0x2c8b62;let _0x2b5dbf;if(config[_0x1aa8fd(0x31c)])_0x2b5dbf=getTimeStamp()+':\x20'+config['botname']+_0x1aa8fd(0x2bb)+_0x18996b;else _0x2b5dbf=getTimeStamp()+':\x20Bot\x20'+botID+_0x1aa8fd(0x2bb)+_0x18996b;console[_0x1aa8fd(0x2d4)](_0x2b5dbf),loggerfile[_0x1aa8fd(0x2ae)](util['format'](_0x2b5dbf)+'\x0a'),_0x4538bc&&(console['log'](_0x4538bc),loggerfile[_0x1aa8fd(0x2ae)](util['format'](_0x4538bc)+'\x0a'));},'debug':async(_0x3334ec,_0x26a3a9='')=>{const _0xd2eea9=_0x2c8b62;let _0x264693;if(config[_0xd2eea9(0x31c)])_0x264693=getTimeStamp()+':\x20'+config[_0xd2eea9(0x21f)]+_0xd2eea9(0x314)+_0x3334ec;else _0x264693=getTimeStamp()+_0xd2eea9(0x321)+botID+_0xd2eea9(0x314)+_0x3334ec;if(debugging)console[_0xd2eea9(0x2d4)](_0x264693);loggerfile[_0xd2eea9(0x2ae)](util[_0xd2eea9(0x2b5)](_0x264693)+'\x0a');if(_0x26a3a9){if(debugging)console[_0xd2eea9(0x2d4)](_0x26a3a9);loggerfile[_0xd2eea9(0x2ae)](util[_0xd2eea9(0x2b5)](_0x26a3a9)+'\x0a');}}};process['on']('uncaughtException',function(_0x4ef622){const _0x5e8c7a=_0x2c8b62;logger[_0x5e8c7a(0x2f5)](_0x4ef622);});settings[_0x2c8b62(0x215)]!=config[_0x2c8b62(0x215)]&&updateTimeshift(settings[_0x2c8b62(0x215)]);settings['onepagemode']!=config[_0x2c8b62(0x2f7)]&&updateOnepagemode(settings[_0x2c8b62(0x2f7)]);process[_0x2c8b62(0x2b2)]({'started':_0x2c8b62(0x1ca)},_0x3054c9=>{}),initializeProcessListeners();function proxyEmit(_0x2774e1,_0x5b565c=null){const _0x5ba55c=_0x2c8b62;process[_0x5ba55c(0x2b2)]({'function':_0x2774e1,'args':_0x5b565c},_0x29998d=>{});}function initializeProcessListeners(){const _0x19d48d=_0x2c8b62;process['on'](_0x19d48d(0x27b),_0x5a3e67=>{const _0x50642a=_0x19d48d;switch(Object['keys'](_0x5a3e67)[0x0]){case _0x50642a(0x215):_0x5a3e67[_0x50642a(0x215)]!=undefined&&(settings[_0x50642a(0x215)]=_0x5a3e67[_0x50642a(0x215)],updateTimeshift(settings[_0x50642a(0x215)]));break;case _0x50642a(0x2f7):_0x5a3e67[_0x50642a(0x2f7)]!=undefined&&(settings[_0x50642a(0x2f7)]=_0x5a3e67[_0x50642a(0x2f7)],updateOnepagemode(settings['onepagemode']));break;case _0x50642a(0x1e4):_0x5a3e67[_0x50642a(0x1e4)]!=undefined&&(bots=JSON[_0x50642a(0x251)](_0x5a3e67['bots']),proxyEmit('bots',bots));break;case _0x50642a(0x293):switch(_0x5a3e67[_0x50642a(0x293)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x50642a(0x23c):emitHistory(_0x5a3e67[_0x50642a(0x23d)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x5a3e67[_0x50642a(0x23d)]);break;case _0x50642a(0x1d2):getPortfolio(_0x5a3e67[_0x50642a(0x23d)]);break;case _0x50642a(0x2e9):storeConfiguration(_0x5a3e67[_0x50642a(0x23d)]);break;case _0x50642a(0x2ee):storeHeadless(_0x5a3e67['args']);break;case _0x50642a(0x236):storeFiat(_0x5a3e67['args']);break;case _0x50642a(0x2ca):resetHistory();break;case _0x50642a(0x2e3):getStartingBalances(getNormalizedPerformance());break;case _0x50642a(0x287):placeOrder(_0x5a3e67[_0x50642a(0x23d)]);break;case _0x50642a(0x25c):cancelLoading();break;case _0x50642a(0x1f0):showConfig();break;case _0x50642a(0x28a):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x484d15=null,_0x47b211=![]){const _0x4e46f9=_0x2c8b62;logger['debug'](_0x4e46f9(0x1fa)+(_0x484d15&&_0x484d15[_0x4e46f9(0x336)]>0x0?_0x4e46f9(0x305)+_0x484d15[_0x4e46f9(0x1cb)](','):_0x4e46f9(0x1ff))+'\x20|\x20'+(_0x47b211?_0x4e46f9(0x252):_0x4e46f9(0x331)));if(pidBalances)clearTimeout(pidBalances);if(!_0x47b211)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x4e46f9(0x32c)]!=_0x4e46f9(0x2e7)){if(_0x47b211){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2def57){handleErrorNoStop(_0x2def57,_0x4e46f9(0x324));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x484d15);const _0xb06c23=await getCoins();[currentCoins,currentCoinsAll]=_0xb06c23,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4e46f9(0x336)]==0x0&&allOpenOrders[_0x4e46f9(0x336)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x540d9d=_0x2c8b62;exchangeStopped=!![],await exchange[_0x540d9d(0x246)]();}async function reloadExchange(){const _0x507cb4=_0x2c8b62;logger[_0x507cb4(0x2c1)](_0x507cb4(0x2e1));while(lockOrders!=ORDERS[_0x507cb4(0x2df)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x507cb4(0x2c1)](_0x507cb4(0x21a)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x3fbe00=config[_0x2c8b62(0x2d0)],_0x13cfef=config[_0x2c8b62(0x32c)],_0x52eb67=config['apiSecret'],_0xadfce7=config[_0x2c8b62(0x1d9)]){const _0x17c908=_0x2c8b62;exchange&&await stopExchange();!supportedExchanges()[_0x17c908(0x234)](_0x3fbe00)&&(logHistory(_0x17c908(0x2a5),_0x17c908(0x2f3)+_0x3fbe00+_0x17c908(0x237)),killBot());const _0x19a8aa=ccxt[_0x3fbe00[_0x17c908(0x1c6)]()];exchange=new _0x19a8aa({'apiKey':_0x13cfef,'secret':_0x52eb67,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0xadfce7)exchange[_0x17c908(0x267)]=_0xadfce7;}function setStableCoins(){const _0x3678db=_0x2c8b62;let _0x1d93d0=config['basecoin']=='ETH'?_0x3678db(0x29f):_0x3678db(0x27c),_0x4bdb6b=!allSymbols[_0x3678db(0x234)](_0x1d93d0+_0x3678db(0x2f4))?_0x3678db(0x217):'USD',_0x1b1413=!allSymbols[_0x3678db(0x234)](_0x1d93d0+_0x3678db(0x2c6))?_0x4bdb6b:_0x3678db(0x2ef);stablecoins={'eur':{'coin':''+_0x1d93d0+_0x1b1413,'symbol':_0x1d93d0+'/'+_0x1b1413},'usd':{'coin':''+_0x1d93d0+_0x4bdb6b,'symbol':_0x1d93d0+'/'+_0x4bdb6b}};}async function initwsCcxt(_0x489243){const _0x31807f=_0x2c8b62;_0x489243==null&&(_0x489243=[],config[_0x31807f(0x254)][_0x31807f(0x20b)](_0x266e26=>{const _0x27db5a=_0x31807f;if(!_0x266e26[_0x27db5a(0x286)]&&_0x266e26[_0x27db5a(0x1c5)]!=config[_0x27db5a(0x2a7)])_0x489243[_0x27db5a(0x261)](_0x266e26[_0x27db5a(0x24f)]);}));if(!_0x489243[_0x31807f(0x234)](stablecoins[_0x31807f(0x1cd)][_0x31807f(0x24f)]))_0x489243['push'](stablecoins[_0x31807f(0x1cd)][_0x31807f(0x24f)]);if(!_0x489243['includes'](stablecoins[_0x31807f(0x2ed)]['symbol']))_0x489243[_0x31807f(0x261)](stablecoins[_0x31807f(0x2ed)][_0x31807f(0x24f)]);if(config['exchange'][_0x31807f(0x2f2)]('Binance')){if(!_0x489243['includes'](_0x31807f(0x272)+config['basecoin']))_0x489243[_0x31807f(0x261)](_0x31807f(0x272)+config[_0x31807f(0x2a7)]);}loadCoins(_0x489243);const _0x230664=async _0x520e30=>{const _0xb717f7=_0x31807f,_0x17beef=await exchange[_0xb717f7(0x27d)](_0x520e30);global[_0xb717f7(0x296)][noslash(_0x17beef[_0xb717f7(0x24f)])]=_0x17beef[_0xb717f7(0x1f2)];while(!![]){if(!botPaused)try{const _0x43cb23=await exchange[_0xb717f7(0x219)](_0x520e30);global[_0xb717f7(0x296)][noslash(_0x43cb23[0x0]['symbol'])]=_0x43cb23[0x0][_0xb717f7(0x1c9)],await sleep(0x3e8);}catch(_0x4392bc){if(!exchangeStopped)await handleError(_0x4392bc,_0xb717f7(0x219),_0x520e30);}else await sleep(0x64);}},_0x246e64=async _0x35b128=>{const _0x179dee=_0x31807f;while(!![]){if(!botPaused)try{const _0x56fcf7=await exchange[_0x179dee(0x27d)](_0x35b128);global['change'][_0x56fcf7[_0x179dee(0x24f)]]=_0x56fcf7['percentage'],await sleep(0x3c*0x3e8);}catch(_0x55ca44){if(!exchangeStopped)await handleError(_0x55ca44,'fetchTickers',_0x35b128);}else await sleep(0x64);}},_0xd3a40d=async()=>{const _0x35eaa5=_0x31807f;while(!![]){if(!botPaused)try{const _0x4f1914=await exchange['watchOrders']();_0x4f1914[_0x35eaa5(0x20b)](_0x53520e=>{updateNumberCoinsCcxt(_0x53520e);});}catch(_0x1c3d1d){if(!exchangeStopped)await handleError(_0x1c3d1d,_0x35eaa5(0x2e5));}else await sleep(0x64);}};_0x489243[_0x31807f(0x20b)](async _0x448b43=>{_0x230664(_0x448b43),_0x246e64(_0x448b43);}),!wsEventsSet&&(wsEventsSet=!![],_0xd3a40d(),watchTransactions());}async function watchTransactions(){const _0x357c82=_0x2c8b62;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2d6312=await getCoins(),[_0x5eb3d4,_0x2b4d19]=_0x2d6312;let _0x1da3aa=[];currentCoins[_0x357c82(0x20b)](_0xbf11cb=>{const _0x4f0e77=_0x357c82,_0x35a055=_0x5eb3d4[_0x4f0e77(0x298)](_0x1b5873=>_0x1b5873[_0x4f0e77(0x1c5)]==_0xbf11cb['coin']);_0x35a055&&(_0xbf11cb[_0x4f0e77(0x1e8)]!=_0x35a055['number']&&_0x1da3aa[_0x4f0e77(0x261)]({'coin':_0xbf11cb[_0x4f0e77(0x1c5)],'symbol':_0xbf11cb['symbol'],'number':Number(formatResult(_0x35a055['number']-_0xbf11cb['number'],0x8))}));});if(_0x1da3aa['length']==0x1&&!blockTransactionDetection){logger[_0x357c82(0x2c1)]('Fees\x20|\x20currency:\x20'+lastFees[_0x357c82(0x1c4)]+_0x357c82(0x318)+lastFees[_0x357c82(0x1c8)]);if(!lastFees[_0x357c82(0x1c4)]||_0x1da3aa[0x0]['coin']!=lastFees['currency']||_0x1da3aa[0x0][_0x357c82(0x1e8)]>lastFees[_0x357c82(0x1c8)]){let _0x33f24e;if(_0x1da3aa[0x0][_0x357c82(0x1c5)]!=config[_0x357c82(0x2a7)]){let _0x1e4fe1=global[_0x357c82(0x296)][noslash(_0x1da3aa[0x0][_0x357c82(0x24f)])];_0x33f24e=_0x1da3aa[0x0][_0x357c82(0x1e7)]?0x1/_0x1e4fe1:_0x1e4fe1;}else _0x33f24e=0x1;_0x1da3aa[0x0]['price']=_0x33f24e,delete _0x1da3aa[0x0][_0x357c82(0x24f)];let _0x195d79=[],_0x317ffd=[...config[_0x357c82(0x31f)]]||[],_0x596550=config['liquidity'];_0x317ffd[_0x357c82(0x24b)]((_0x48423e,_0x4bcf67)=>_0x48423e[_0x357c82(0x2fc)]>_0x4bcf67[_0x357c82(0x2fc)]?-0x1:_0x4bcf67[_0x357c82(0x2fc)]>_0x48423e[_0x357c82(0x2fc)]?0x1:0x0);const _0x3c7e72=getDate();if(_0x317ffd[0x0]){const _0x4116ff=fns['parse'](_0x317ffd[0x0]['date'],'yyyy/MM/dd',new Date()),_0x2a752b=fns[_0x357c82(0x251)](_0x3c7e72,_0x357c82(0x29c),new Date());if(fns['isEqual'](_0x4116ff,_0x2a752b)){_0x195d79=_0x317ffd[0x0]['changes'];const _0x2c7624=_0x195d79[_0x357c82(0x298)](_0x1dbac3=>_0x1dbac3[_0x357c82(0x1c5)]==_0x1da3aa[0x0][_0x357c82(0x1c5)]);_0x2c7624?(_0x2c7624[_0x357c82(0x1e8)]+=_0x1da3aa[0x0][_0x357c82(0x1e8)],_0x2c7624[_0x357c82(0x1e8)]==0x0&&(_0x195d79=_0x195d79[_0x357c82(0x26f)](_0x24227f=>{const _0x3803cd=_0x357c82;return _0x24227f[_0x3803cd(0x1c5)]!=_0x1da3aa[0x0][_0x3803cd(0x1c5)];}))):_0x195d79[_0x357c82(0x261)](_0x1da3aa[0x0]);const _0x2f3a59=_0x596550[_0x357c82(0x298)](_0x2d4aa9=>_0x2d4aa9['date']==_0x3c7e72);_0x2f3a59[_0x357c82(0x1fd)]=_0x195d79;}else _0x596550[_0x357c82(0x261)]({'date':_0x3c7e72,'changes':[_0x1da3aa[0x0]]});}const _0x39d622=_0x596550[_0x357c82(0x298)](_0x40902d=>_0x40902d[_0x357c82(0x2fc)]==_0x3c7e72);if(_0x39d622){let _0x5bd080=!![];_0x39d622[_0x357c82(0x1fd)][_0x357c82(0x20b)](_0x2c85a6=>{const _0x29d2ea=_0x357c82;if(_0x2c85a6[_0x29d2ea(0x1e8)]!=0x0)_0x5bd080=![];}),_0x5bd080&&(_0x596550=_0x596550[_0x357c82(0x26f)](_0x5dd1f7=>{return _0x5dd1f7['date']!=_0x3c7e72;}));}let _0x54ef2e=dbConfig['get']('bot')['find']({'botID':botID})[_0x357c82(0x1ed)]();_0x54ef2e&&(dbConfig['get'](_0x357c82(0x2bc))[_0x357c82(0x298)]({'botID':botID})['assign']({'liquidity':_0x596550})[_0x357c82(0x2ae)](),config[_0x357c82(0x31f)]=_0x596550),logHistory(_0x357c82(0x21e),_0x357c82(0x21c)+Math['abs'](_0x1da3aa[0x0][_0x357c82(0x1e8)])+'\x20'+_0x1da3aa[0x0][_0x357c82(0x1c5)]+'\x20'+(_0x1da3aa[0x0]['number']>0x0?_0x357c82(0x2dc):_0x357c82(0x2c9))+_0x357c82(0x208)),proxyEmit(_0x357c82(0x23e),emittedConfiguration());}else logger[_0x357c82(0x2c1)](_0x357c82(0x266)+Math[_0x357c82(0x26a)](_0x1da3aa[0x0]['number'])+'\x20'+_0x1da3aa[0x0][_0x357c82(0x1c5)]+'\x20'+(_0x1da3aa[0x0][_0x357c82(0x1e8)]>0x0?'added':_0x357c82(0x2c9)));transactionDetected=!![],currentCoins=_0x5eb3d4,currentCoinsAll=_0x2b4d19;}await sleep(watchTransactionsInterval);}catch(_0x4ee212){if(!exchangeStopped)await handleError(_0x4ee212,_0x357c82(0x22c));}else await sleep(0x64);}}async function loadSymbols(_0x4590d9=config[_0x2c8b62(0x2d0)],_0x32a77e=![]){const _0x45b453=_0x2c8b62;if(allSymbols&&!_0x32a77e)return;try{markets=await exchange[_0x45b453(0x31d)](),allSymbols=exchange[_0x45b453(0x259)][_0x45b453(0x26f)](_0xf1ac0a=>{const _0x1f75fa=_0x45b453;let _0x26662d=![];const _0x313f42=exceptions[_0x4590d9['toLowerCase']()]||[];return _0x313f42[_0x1f75fa(0x20b)](_0xb990f1=>{const _0x3c3d18=_0x1f75fa;if(_0xf1ac0a[_0x3c3d18(0x234)](_0xb990f1))_0x26662d=!![];}),!_0x26662d;});}catch(_0x2b63ab){throw _0x2b63ab;}}async function initclient(){const _0xe0cc84=_0x2c8b62;emitLoadingProgress(),proxyEmit(_0xe0cc84(0x23e),emittedConfiguration()),proxyEmit(_0xe0cc84(0x1c1),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xe0cc84(0x213),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x518aaa=getNormalizedPerformance();emitPerformance(_0x518aaa),getStartingBalances(_0x518aaa);}async function toggleBotMode(){const _0x347f8d=_0x2c8b62;let _0x18bd09=dbConfig[_0x347f8d(0x29d)](_0x347f8d(0x2bc))[_0x347f8d(0x298)]({'botID':botID})['value']();if(_0x18bd09){const _0x455e4e=!_0x18bd09['headless'];dbConfig['get'](_0x347f8d(0x2bc))[_0x347f8d(0x298)]({'botID':botID})[_0x347f8d(0x1d1)]({'headless':_0x455e4e})[_0x347f8d(0x2ae)](),config[_0x347f8d(0x312)]=_0x455e4e,proxyEmit(_0x347f8d(0x23e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x173565=_0x2c8b62;process[_0x173565(0x2b2)]({'updatebotmanager':!![]},_0x3a506c=>{});}async function loadCoins(_0x42b22f){const _0x8a68e4=_0x2c8b62;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x578447,_0x3b3c2d=0x0,_0x5f0715=0x0;_0x42b22f[_0x8a68e4(0x20b)](_0x1d8e89=>{const _0x335c9c=_0x8a68e4;loading[_0x335c9c(0x258)][_0x335c9c(0x261)](_0x1d8e89);}),loadingCanceled=![];let _0x50c7e7=![];while(_0x578447!=_0x42b22f[_0x8a68e4(0x336)]){_0x578447=0x0,_0x42b22f[_0x8a68e4(0x20b)](_0x1e7a3b=>{const _0x1bc057=_0x8a68e4;if(global[_0x1bc057(0x296)][noslash(_0x1e7a3b)]){loading[_0x1bc057(0x258)]=loading[_0x1bc057(0x258)][_0x1bc057(0x26f)](_0x5edf42=>_0x5edf42!=_0x1e7a3b);if(!watchedSymbols[_0x1bc057(0x234)](_0x1e7a3b))watchedSymbols[_0x1bc057(0x261)](_0x1e7a3b);_0x578447++;}}),loading[_0x8a68e4(0x292)]=Math[_0x8a68e4(0x2fd)](_0x578447/_0x42b22f[_0x8a68e4(0x336)]*0x64);loading[_0x8a68e4(0x292)]!=0x64&&(_0x5f0715>0x1e*0x5&&(loading[_0x8a68e4(0x1e5)]=!![],emitLoadingProgress()),_0x5f0715>0x78*0x5&&!_0x50c7e7&&(loading['cancel']=!![],emitLoadingProgress(),_0x50c7e7=!![],logHistory(_0x8a68e4(0x2a5),_0x8a68e4(0x301)+loading['remainingSymbols'][_0x8a68e4(0x1cb)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x8a68e4(0x1db)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x1c6222=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x8a68e4(0x1d3)]=!![],emitLoadingProgress();break;}else _0x578447!=_0x3b3c2d&&(_0x3b3c2d=_0x578447,emitLoadingProgress()),_0x5f0715++,await sleep(0xc8);}_0x578447==_0x42b22f['length']&&(coinsLoaded=!![],process[_0x8a68e4(0x2b2)]({'status':_0x8a68e4(0x32d),'live':_0x8a68e4(0x1ca)},_0x3d8138=>{}),_0x50c7e7&&logHistory(_0x8a68e4(0x21e),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x14f739=_0x2c8b62;proxyEmit(_0x14f739(0x23e),{...emittedConfiguration(),'configstate':_0x14f739(0x229)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x168149=_0x2c8b62;let _0x505dc9=global[_0x168149(0x296)][stablecoins[_0x168149(0x1cd)][_0x168149(0x1c5)]],_0x3f136e=global[_0x168149(0x296)][stablecoins['usd'][_0x168149(0x1c5)]];return{'eur':Number(_0x505dc9),'usd':Number(_0x3f136e)};}function capitalize(_0x1617fd){const _0x747052=_0x2c8b62;return _0x1617fd[_0x747052(0x332)](0x0,0x1)[_0x747052(0x205)]()+_0x1617fd['substring'](0x1);}function supportedExchanges(){const _0x2f2345=_0x2c8b62,_0x13e895=['ws','fetchTickers',_0x2f2345(0x27d),_0x2f2345(0x219),'watchOrders',_0x2f2345(0x1fb),_0x2f2345(0x2a0),'fetchOpenOrders',_0x2f2345(0x320),_0x2f2345(0x218)];let _0x32a228=[],_0xf68e20=[],_0x55da38=ccxt['exchanges'];_0x55da38[_0x2f2345(0x20b)](_0x4ecaa8=>{const _0x38fa44=_0x2f2345;try{const _0xe0a4fb=new ccxt[_0x4ecaa8]();if(_0xe0a4fb[_0x38fa44(0x232)]['ws'])_0xf68e20['push'](_0xe0a4fb);}catch(_0x323185){}}),_0xf68e20[_0x2f2345(0x20b)](_0x3e5fd8=>{const _0x2c4b7f=_0x2f2345;let _0x127d37=0x0;_0x13e895[_0x2c4b7f(0x20b)](_0x5e635c=>{const _0x5dba35=_0x2c4b7f;_0x5e635c in _0x3e5fd8[_0x5dba35(0x232)]&&_0x3e5fd8[_0x5dba35(0x232)][_0x5e635c]&&_0x127d37++;}),_0x127d37==_0x13e895['length']&&_0x32a228[_0x2c4b7f(0x261)](capitalize(_0x3e5fd8['id']));});let _0x4c981b=[];return _0x55da38[_0x2f2345(0x20b)](_0x2006b=>{const _0x3fc1ce=_0x2f2345;_0x2006b=capitalize(_0x2006b);if(!_0x32a228[_0x3fc1ce(0x234)](_0x2006b))_0x4c981b[_0x3fc1ce(0x261)](_0x2006b);}),_0x32a228;}function setStartDatePerformance(){const _0x3765c4=_0x2c8b62;if(config&&config['liquidity'][0x0][_0x3765c4(0x1fd)][_0x3765c4(0x336)]!=0x0){const _0x42e428=config[_0x3765c4(0x31f)][0x0][_0x3765c4(0x1fd)];dbPerformance[_0x3765c4(0x29d)]('data')[_0x3765c4(0x298)]({'date':config[_0x3765c4(0x327)]})[_0x3765c4(0x1d1)]({'coins':_0x42e428})[_0x3765c4(0x2ae)]();}}async function recreateCoinResults(){const _0x5e69b4=_0x2c8b62;let _0x2bf34a,_0x394234=[];try{const _0x59bf64=fns[_0x5e69b4(0x2b5)](fns[_0x5e69b4(0x2b3)](config[_0x5e69b4(0x327)][_0x5e69b4(0x220)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5ea01c of currentCoins){if(_0x5ea01c[_0x5e69b4(0x1c5)]!=config[_0x5e69b4(0x2a7)]){let _0x35e3e2=0x0,_0x5e052a,_0x5c1688;_0x2bf34a=await getAllEventOrders(_0x5ea01c[_0x5e69b4(0x24f)]);if(_0x2bf34a[_0x5e69b4(0x336)]>0x0)_0x2bf34a['forEach'](_0x4d6036=>{const _0x1c62bc=_0x5e69b4,_0x1026da=_0x5ea01c[_0x1c62bc(0x24f)][_0x1c62bc(0x234)](config['basecoin']+'/');_0x394234[_0x1c62bc(0x261)]({'datetime':_0x4d6036[_0x1c62bc(0x2c0)],'coin':_0x5ea01c[_0x1c62bc(0x1c5)],'symbol':_0x5ea01c[_0x1c62bc(0x24f)],'side':_0x4d6036[_0x1c62bc(0x322)],'reverse':_0x1026da,'amount':formatResult(_0x4d6036[_0x1c62bc(0x1e1)],0x8),'filled':formatResult(_0x4d6036[_0x1c62bc(0x1e1)],0x8),'price':formatResult(_0x4d6036[_0x1c62bc(0x1c9)],0x8)}),_0x35e3e2=_0x4d6036['side']==_0x1c62bc(0x1eb)?_0x35e3e2+_0x4d6036[_0x1c62bc(0x1e1)]:_0x35e3e2-_0x4d6036[_0x1c62bc(0x1e1)];if(!_0x5c1688)_0x5c1688=_0x4d6036[_0x1c62bc(0x1c9)];});_0x5e052a=_0x5ea01c['number']-_0x35e3e2;let _0x190082;config[_0x5e69b4(0x31f)]['forEach'](_0x5827b9=>{const _0x37ad88=_0x5e69b4;!_0x190082&&(_0x190082=_0x5827b9['changes'][_0x37ad88(0x298)](_0x45291c=>_0x45291c['coin']==_0x5ea01c[_0x37ad88(0x1c5)]),_0x190082&&(_0x5e052a=_0x190082['number'],_0x5c1688=_0x190082['price']));});let _0x354e2d=dbCoinResults[_0x5e69b4(0x29d)](_0x5e69b4(0x2cb))['find']({'coin':_0x5ea01c[_0x5e69b4(0x1c5)]})[_0x5e69b4(0x1ed)]();_0x354e2d={'coin':_0x5ea01c['coin'],'number':_0x5e052a,'breakeven':_0x5c1688,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x5e69b4(0x2cb))[_0x5e69b4(0x298)]({'coin':_0x5ea01c[_0x5e69b4(0x1c5)]})[_0x5e69b4(0x1d1)](_0x354e2d)[_0x5e69b4(0x2ae)]();}}_0x394234[_0x5e69b4(0x24b)]((_0x29120f,_0x547148)=>_0x29120f[_0x5e69b4(0x2c0)]>_0x547148[_0x5e69b4(0x2c0)]?0x1:_0x547148[_0x5e69b4(0x2c0)]>_0x29120f['datetime']?-0x1:0x0);let _0x54e67f=0x0;for(let _0x3bf151 of _0x394234){await updateCoinResults(_0x3bf151,!![]);}}catch(_0x76b27c){await handleError(_0x76b27c,_0x5e69b4(0x24c));}}async function getAllEventOrders(_0x1f249c){const _0x12c8be=_0x2c8b62;let _0x3bbd23=[],_0x300cf4=dbLogs['get'](_0x12c8be(0x30d))[_0x12c8be(0x26f)](_0x2ee2f0=>{const _0x1bdc71=_0x12c8be,_0x9a892=_0x2ee2f0[_0x1bdc71(0x311)][_0x1bdc71(0x1c6)]();return _0x9a892['includes'](_0x1f249c['toLowerCase']())&&(_0x9a892[_0x1bdc71(0x234)](_0x1bdc71(0x306))&&_0x9a892[_0x1bdc71(0x234)](_0x1bdc71(0x263))||_0x9a892[_0x1bdc71(0x234)](_0x1bdc71(0x1e1))&&_0x9a892[_0x1bdc71(0x234)](_0x1bdc71(0x263)));})[_0x12c8be(0x30a)](_0x12c8be(0x2e4))[_0x12c8be(0x1ed)]();return _0x300cf4['forEach'](_0x4e5ca4=>{const _0x109aae=_0x12c8be,_0x588634=_0x4e5ca4[_0x109aae(0x311)][_0x109aae(0x234)]('sell')?'sell':_0x109aae(0x1eb),_0x58f713=/#([0-9]|\.)+\s/i,_0x15c4fb=Number(_0x58f713['exec'](_0x4e5ca4[_0x109aae(0x311)])[0x0][_0x109aae(0x2d6)](0x1)),_0x4fe5eb=/@([0-9]|\.)+$/i,_0x28d7f9=Number(_0x4fe5eb['exec'](_0x4e5ca4[_0x109aae(0x311)])[0x0]['slice'](0x1));_0x3bbd23[_0x109aae(0x261)]({'datetime':_0x4e5ca4[_0x109aae(0x2e4)],'coin':symbolToCoin(_0x1f249c),'symbol':_0x1f249c,'side':_0x588634,'amount':_0x15c4fb,'filled':_0x15c4fb,'price':_0x28d7f9});}),_0x3bbd23;}async function getAllOrders(_0x5183ce,_0xa87111){const _0xd36bbe=_0x2c8b62;let _0x3bf746=[];while(_0xa87111<exchange['milliseconds']()){const _0x12e3cf=0x1f4,_0x2dd071=await exchange[_0xd36bbe(0x320)](_0x5183ce,_0xa87111,_0x12e3cf);if(_0x2dd071['length'])_0xa87111=_0x2dd071[_0x2dd071[_0xd36bbe(0x336)]-0x1][_0xd36bbe(0x2f8)]+0x1,_0x3bf746=_0x3bf746['concat'](_0x2dd071);else break;}return _0x3bf746;}async function validate24hChanges(){const _0x16fd99=_0x2c8b62;for(const _0x1466a0 of currentCoins){if(_0x1466a0[_0x16fd99(0x1c5)]!=config[_0x16fd99(0x2a7)]){let _0x25cc4f;_0x1466a0[_0x16fd99(0x1e7)]?_0x25cc4f=formatResult((0x1/(global['change'][noslash(_0x1466a0[_0x16fd99(0x24f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x25cc4f=global[_0x16fd99(0x2d7)][noslash(_0x1466a0[_0x16fd99(0x24f)])],_0x25cc4f<config['change24h']&&(logHistory('error',_0x1466a0[_0x16fd99(0x1c5)]+_0x16fd99(0x203)+_0x25cc4f+'%'),logHistory('error',_0x16fd99(0x30f)),logHistory(_0x16fd99(0x2a5),_0x16fd99(0x2e2)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x291214,_0x4ddea5){const _0x27faeb=_0x2c8b62;if(!_0x291214)return!![];const _0x46f373=_0x4ddea5[_0x27faeb(0x240)]('.'),_0x22aa59=_0x291214[_0x27faeb(0x240)]('.');for(var _0x267879=0x0;_0x267879<_0x22aa59['length'];_0x267879++){const _0x123c6c=~~_0x22aa59[_0x267879],_0x16ddbb=~~_0x46f373[_0x267879];if(_0x123c6c<_0x16ddbb)return!![];if(_0x123c6c>_0x16ddbb)return![];}return![];}async function oneTimeMigration(){const _0x332b8c=_0x2c8b62;let _0x529b1f=dbLogs[_0x332b8c(0x29d)](_0x332b8c(0x264))[_0x332b8c(0x1ed)]();if(isOlderVersion(_0x529b1f,_0x332b8c(0x25d))){let _0x46c97c=[];const _0x412552=dbLogs[_0x332b8c(0x29d)]('logs')[_0x332b8c(0x1ed)]();_0x412552[_0x332b8c(0x20b)](_0x5edc57=>{const _0x37e01a=_0x332b8c;_0x46c97c[_0x37e01a(0x261)]({'time':_0x5edc57['time'],'type':_0x5edc57[_0x37e01a(0x2c3)],'event':_0x5edc57[_0x37e01a(0x311)]});}),dbLogs[_0x332b8c(0x29d)]('logs')[_0x332b8c(0x1d1)](_0x46c97c)[_0x332b8c(0x2ae)]();}let _0x12d4aa=dbConfig['get'](_0x332b8c(0x264))[_0x332b8c(0x1ed)]();if(isOlderVersion(_0x12d4aa,_0x332b8c(0x25d))){let _0x246d81=dbConfig[_0x332b8c(0x29d)](_0x332b8c(0x2bc))[_0x332b8c(0x298)]({'botID':botID})[_0x332b8c(0x1ed)]();if(_0x246d81){let _0x1dfdf4=[];_0x246d81[_0x332b8c(0x254)][_0x332b8c(0x20b)](_0x1133b2=>{const _0x42ea6=_0x332b8c;_0x1dfdf4[_0x42ea6(0x261)]({'coin':_0x1133b2[_0x42ea6(0x1c5)],'number':_0x1133b2[_0x42ea6(0x25e)],'price':_0x1133b2[_0x42ea6(0x25a)]}),delete _0x1133b2[_0x42ea6(0x25e)],delete _0x1133b2[_0x42ea6(0x25a)];});if(_0x1dfdf4[_0x332b8c(0x336)]!==0x0)fs[_0x332b8c(0x270)](configbackuppath+(_0x332b8c(0x2b7)+botID+_0x332b8c(0x1f9)),JSON[_0x332b8c(0x249)](_0x1dfdf4,null,0x4),function(_0x29810d){if(_0x29810d){}});const _0x2273a3=(_0x2ea94a,_0x1332bc)=>{const _0x3a3904=_0x332b8c;let _0x22a2c1=[];_0x1332bc[_0x3a3904(0x20b)](_0x4120a0=>{const _0xcc4c14=_0x3a3904,_0x2b99e3=_0x2ea94a[_0xcc4c14(0x298)](_0x39fe73=>_0x39fe73[_0xcc4c14(0x1c5)]==_0x4120a0[_0xcc4c14(0x1c5)]);if(!_0x2b99e3)_0x22a2c1['push'](_0x4120a0);});let _0x52e77c=[];return _0x2ea94a[_0x3a3904(0x20b)](_0x282a68=>{const _0xb2825d=_0x3a3904,_0x2c1b95=_0x1332bc['find'](_0x3c02eb=>_0x3c02eb[_0xb2825d(0x1c5)]==_0x282a68['coin']);if(!_0x2c1b95||_0x2c1b95[_0xb2825d(0x1e8)]==0x0&&_0x282a68['number']!=0x0)_0x52e77c[_0xb2825d(0x261)](_0x282a68);}),{'missingDay1':_0x22a2c1,'notInDay2':_0x52e77c};},_0x41f4d4=dbPerformance['get'](_0x332b8c(0x2ce))['cloneDeep']()[_0x332b8c(0x1ed)]();if(_0x41f4d4['length']>0x1){const {missingDay1:_0x19c1e9,notInDay2:_0x44618b}=_0x2273a3(_0x1dfdf4,_0x41f4d4[0x1][_0x332b8c(0x2cb)]);_0x1dfdf4=[..._0x1dfdf4,..._0x19c1e9],_0x44618b[_0x332b8c(0x20b)](_0x635517=>{const _0x5c339f=_0x332b8c;let _0x3cdceb=_0x1dfdf4[_0x5c339f(0x2de)](_0x474962=>_0x474962[_0x5c339f(0x1c5)]==_0x635517[_0x5c339f(0x1c5)]);_0x3cdceb!=-0x1&&_0x1dfdf4[_0x5c339f(0x2c8)](_0x3cdceb,0x1);});}_0x1dfdf4['sort']((_0x35e1a3,_0x45e34a)=>_0x35e1a3[_0x332b8c(0x1c5)]>_0x45e34a[_0x332b8c(0x1c5)]?0x1:_0x45e34a['coin']>_0x35e1a3[_0x332b8c(0x1c5)]?-0x1:0x0);let _0x5dd050=[{'date':_0x246d81[_0x332b8c(0x327)],'changes':_0x1dfdf4}];_0x41f4d4[_0x332b8c(0x336)]>0x2&&_0x41f4d4[_0x332b8c(0x20b)]((_0x36d5e4,_0x351703)=>{const _0x49a236=_0x332b8c;if(_0x351703>0x0&&_0x351703<_0x41f4d4[_0x49a236(0x336)]-0x1){const {missingDay1:_0x36c04a,notInDay2:_0x46e8ca}=_0x2273a3(_0x41f4d4[_0x351703][_0x49a236(0x2cb)],_0x41f4d4[_0x351703+0x1]['coins']);_0x1dfdf4=[],(_0x36c04a[_0x49a236(0x336)]!=0x0||_0x46e8ca['length']!=0x0)&&(_0x36c04a[_0x49a236(0x336)]!=0x0&&_0x1dfdf4[_0x49a236(0x261)](..._0x36c04a),_0x46e8ca[_0x49a236(0x336)]!=0x0&&(_0x46e8ca[_0x49a236(0x20b)](_0x3e182b=>{const _0x110ee2=_0x49a236;_0x3e182b[_0x110ee2(0x1e8)]=-_0x3e182b[_0x110ee2(0x1e8)];}),_0x1dfdf4['push'](..._0x46e8ca)),_0x1dfdf4['sort']((_0x9e1779,_0x733ad4)=>_0x9e1779[_0x49a236(0x1c5)]>_0x733ad4[_0x49a236(0x1c5)]?0x1:_0x733ad4['coin']>_0x9e1779['coin']?-0x1:0x0),_0x5dd050[_0x49a236(0x261)]({'date':_0x41f4d4[_0x351703+0x1]['date'],'changes':_0x1dfdf4}));}}),dbConfig[_0x332b8c(0x29d)](_0x332b8c(0x2bc))['find']({'botID':botID})[_0x332b8c(0x1d1)]({..._0x246d81,'liquidity':_0x5dd050})[_0x332b8c(0x2ae)]();}}if(isOlderVersion(_0x12d4aa,_0x332b8c(0x274))){let _0x1787f6=dbConfig[_0x332b8c(0x29d)](_0x332b8c(0x2bc))[_0x332b8c(0x298)]({'botID':botID})['value']();if(_0x1787f6){const _0x4502c9=_0x1787f6[_0x332b8c(0x2d0)],_0x1a5883=_0x4502c9?capitalize(_0x4502c9):'Binance';dbConfig['get'](_0x332b8c(0x2bc))[_0x332b8c(0x298)]({'botID':botID})[_0x332b8c(0x1d1)]({'exchange':_0x1a5883})[_0x332b8c(0x2ae)]();}}let _0x6f46f8=dbPerformance[_0x332b8c(0x29d)](_0x332b8c(0x264))['value']();isOlderVersion(_0x6f46f8,_0x332b8c(0x25d))&&setStartDatePerformance();let _0x5d898e=dbCoinResults[_0x332b8c(0x29d)]('version')[_0x332b8c(0x1ed)]();if(isOlderVersion(_0x5d898e,_0x332b8c(0x1da))){let _0x3512b5=dbCoinResults[_0x332b8c(0x29d)](_0x332b8c(0x2cb))[_0x332b8c(0x1ed)]();if(_0x3512b5[_0x332b8c(0x336)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4d3513=_0x2c8b62;dbConfig[_0x4d3513(0x31b)](_0x4d3513(0x264),serverversion)[_0x4d3513(0x2ae)](),dbPerformance[_0x4d3513(0x31b)](_0x4d3513(0x264),serverversion)[_0x4d3513(0x2ae)](),dbLogs[_0x4d3513(0x31b)](_0x4d3513(0x264),serverversion)[_0x4d3513(0x2ae)](),dbCoinResults[_0x4d3513(0x31b)](_0x4d3513(0x264),serverversion)['write']();}function getConfiguration(_0x39cc00){const _0x22b79f=_0x2c8b62;let _0x2790e1=dbConfig[_0x22b79f(0x29d)](_0x22b79f(0x2bc))[_0x22b79f(0x298)]({'botID':_0x39cc00})[_0x22b79f(0x1ed)]();if(_0x2790e1){let _0x3fedfe=![];typeof _0x2790e1[_0x22b79f(0x2af)]==_0x22b79f(0x338)&&(_0x2790e1={..._0x2790e1,'threshold':Number(_0x2790e1[_0x22b79f(0x2af)])},_0x3fedfe=!![]),_0x2790e1[_0x22b79f(0x1ce)]==null&&(_0x2790e1={..._0x2790e1,'change24h':-0x14},_0x3fedfe=!![]),!_0x2790e1['fiat']&&(_0x2790e1={..._0x2790e1,'fiat':_0x22b79f(0x247)},_0x3fedfe=!![]),!_0x2790e1[_0x22b79f(0x2f7)]&&(_0x2790e1={..._0x2790e1,'onepagemode':settings['onepagemode']},_0x3fedfe=!![]),_0x3fedfe&&(_0x2790e1={'botID':_0x2790e1['botID'],'exchange':_0x2790e1[_0x22b79f(0x2d0)],'apiKey':_0x2790e1[_0x22b79f(0x32c)],'apiSecret':_0x2790e1[_0x22b79f(0x334)],'apiPassword':_0x2790e1[_0x22b79f(0x1d9)],'basecoin':_0x2790e1[_0x22b79f(0x2a7)],'botname':_0x2790e1['botname'],'showname':_0x2790e1[_0x22b79f(0x31c)],'threshold':_0x2790e1[_0x22b79f(0x2af)],'ordertype':_0x2790e1[_0x22b79f(0x29a)],'timeout':_0x2790e1[_0x22b79f(0x1e5)],'fiat':_0x2790e1['fiat'],'startdate':_0x2790e1[_0x22b79f(0x327)],'recreate':_0x2790e1[_0x22b79f(0x1d8)],'timeshift':_0x2790e1[_0x22b79f(0x215)],'onepagemode':_0x2790e1['onepagemode'],'headless':_0x2790e1[_0x22b79f(0x312)],'cooldown':_0x2790e1[_0x22b79f(0x224)],'change24h':_0x2790e1[_0x22b79f(0x1ce)],'emojibuy':_0x2790e1[_0x22b79f(0x2c7)],'emojisell':_0x2790e1[_0x22b79f(0x222)],'portfolio':_0x2790e1[_0x22b79f(0x254)],'liquidity':_0x2790e1[_0x22b79f(0x31f)],'openOrders':_0x2790e1['openOrders']},dbConfig[_0x22b79f(0x29d)](_0x22b79f(0x2bc))[_0x22b79f(0x1e3)]()[_0x22b79f(0x2ae)](),dbConfig[_0x22b79f(0x29d)](_0x22b79f(0x2bc))[_0x22b79f(0x261)](_0x2790e1)[_0x22b79f(0x2ae)]());}else _0x2790e1={'botID':_0x39cc00,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x22b79f(0x2ff)+_0x39cc00,'showname':![],'threshold':0x3,'ordertype':_0x22b79f(0x306),'timeout':0x14,'fiat':_0x22b79f(0x247),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x22b79f(0x215)],'onepagemode':settings[_0x22b79f(0x2f7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2790e1;}function emittedConfiguration(){const _0x36da74=_0x2c8b62;let _0x493a28;if(config[_0x36da74(0x32c)]=='')_0x493a28={...config,'configstate':_0x36da74(0x2ab)};else config['apiKey']==_0x36da74(0x2e7)?_0x493a28={...config,'configstate':_0x36da74(0x200)}:(_0x493a28={...config,'apiKey':'************','apiSecret':'************'},config[_0x36da74(0x1d9)]&&(_0x493a28['apiPassword']=_0x36da74(0x289)));return _0x493a28;}function getSettings(){const _0x588eb2=_0x2c8b62;return dbSettings[_0x588eb2(0x29d)]('settings')[_0x588eb2(0x1ed)]();}function getSecure(){const _0x5353ae=_0x2c8b62;return dbSecure['get'](_0x5353ae(0x201))[_0x5353ae(0x1ed)]()||{};}function updateTimeshift(_0x1c7ab3){const _0x1ba5d1=_0x2c8b62;let _0x7cc5eb=dbConfig[_0x1ba5d1(0x29d)](_0x1ba5d1(0x2bc))[_0x1ba5d1(0x298)]({'botID':botID})[_0x1ba5d1(0x1ed)]();_0x7cc5eb&&dbConfig[_0x1ba5d1(0x29d)](_0x1ba5d1(0x2bc))[_0x1ba5d1(0x298)]({'botID':botID})[_0x1ba5d1(0x1d1)]({'timeshift':_0x1c7ab3})['write'](),config[_0x1ba5d1(0x215)]=_0x1c7ab3,proxyEmit(_0x1ba5d1(0x23e),emittedConfiguration());}function updateOnepagemode(_0x245a7d){const _0x555e86=_0x2c8b62;let _0xabe6a1=dbConfig[_0x555e86(0x29d)]('bot')[_0x555e86(0x298)]({'botID':botID})[_0x555e86(0x1ed)]();_0xabe6a1&&dbConfig['get'](_0x555e86(0x2bc))['find']({'botID':botID})[_0x555e86(0x1d1)]({'onepagemode':_0x245a7d})[_0x555e86(0x2ae)](),config[_0x555e86(0x2f7)]=_0x245a7d,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x86d875){const _0x5de63f=_0x2c8b62;logger[_0x5de63f(0x2c1)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x18ff8b=[],_0x168009=![],_0x2f7218=[];_0x86d875[_0x5de63f(0x254)][_0x5de63f(0x20b)](_0xc81291=>{const _0x33ee2d=_0x5de63f;if(!_0xc81291[_0x33ee2d(0x286)]&&_0xc81291[_0x33ee2d(0x1c5)]!=_0x86d875['basecoin'])_0x2f7218['push'](_0xc81291[_0x33ee2d(0x24f)]);}),_0x2f7218['forEach'](_0x83c9cc=>{const _0x11d37e=watchedSymbols['includes'](_0x83c9cc);!_0x11d37e&&_0x18ff8b['push'](_0x83c9cc);});_0x18ff8b['length']>0x0?_0x168009=!![]:currentCoins[_0x5de63f(0x20b)](_0x3e7097=>{const _0x5fe6a=_0x5de63f;if(_0x3e7097[_0x5fe6a(0x1c5)]!=config[_0x5fe6a(0x2a7)]){const _0x33ab99=_0x2f7218['find'](_0x532263=>_0x532263==_0x3e7097['symbol']);!_0x33ab99&&(_0x168009=!![]);}});let _0x515a2d=dbConfig[_0x5de63f(0x29d)](_0x5de63f(0x2bc))[_0x5de63f(0x298)]({'botID':botID})['value']();_0x86d875={..._0x86d875,'apiKey':crypt[_0x5de63f(0x328)](secure['privateKey'],_0x86d875[_0x5de63f(0x32c)])[_0x5de63f(0x27b)],'apiSecret':crypt[_0x5de63f(0x328)](secure[_0x5de63f(0x32b)],_0x86d875[_0x5de63f(0x334)])[_0x5de63f(0x27b)]};_0x86d875['apiPassword']&&(_0x86d875['apiPassword']=crypt[_0x5de63f(0x328)](secure['privateKey'],_0x86d875[_0x5de63f(0x1d9)])[_0x5de63f(0x27b)]);let _0x5c4bc9=![];if(_0x515a2d){_0x86d875['apiKey']==_0x5de63f(0x289)?_0x86d875['apiKey']=config['apiKey']:_0x5c4bc9=!![];_0x86d875[_0x5de63f(0x334)]==_0x5de63f(0x289)?_0x86d875['apiSecret']=config['apiSecret']:_0x5c4bc9=!![];if(_0x86d875[_0x5de63f(0x1d9)]=='************')_0x86d875[_0x5de63f(0x1d9)]=config[_0x5de63f(0x1d9)];else{if(_0x86d875['apiPassword'])_0x5c4bc9=!![];}dbConfig[_0x5de63f(0x29d)]('bot')['find']({'botID':botID})[_0x5de63f(0x1d1)](_0x86d875)[_0x5de63f(0x2ae)]();}else dbConfig[_0x5de63f(0x29d)](_0x5de63f(0x2bc))[_0x5de63f(0x261)](_0x86d875)[_0x5de63f(0x2ae)](),_0x5c4bc9=!![],process[_0x5de63f(0x2b2)]({'status':_0x5de63f(0x32d),'live':'running'},_0x2ae9f7=>{});process[_0x5de63f(0x2b2)]({'botname':_0x86d875[_0x5de63f(0x21f)]},_0x26eaac=>{}),updateBotManager(),config={..._0x86d875},proxyEmit(_0x5de63f(0x1bf)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5c4bc9)await reset(_0x18ff8b,!![]);else _0x168009?await reset(_0x18ff8b,![]):getBalances();blockTransactionDetection=![],logger[_0x5de63f(0x2c1)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x493197){const _0x380409=_0x2c8b62,_0x40a12a={...config,'headless':_0x493197[_0x380409(0x312)]};let _0x119672=dbConfig[_0x380409(0x29d)](_0x380409(0x2bc))[_0x380409(0x298)]({'botID':botID})['value']();_0x119672&&dbConfig[_0x380409(0x29d)](_0x380409(0x2bc))[_0x380409(0x298)]({'botID':botID})['assign'](_0x40a12a)[_0x380409(0x2ae)](),config={..._0x40a12a},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x9f379e){const _0x3610df=_0x2c8b62,_0x1e8d44={...config,'fiat':_0x9f379e};let _0x1261f2=dbConfig[_0x3610df(0x29d)]('bot')[_0x3610df(0x298)]({'botID':botID})[_0x3610df(0x1ed)]();_0x1261f2&&dbConfig[_0x3610df(0x29d)](_0x3610df(0x2bc))[_0x3610df(0x298)]({'botID':botID})['assign'](_0x1e8d44)[_0x3610df(0x2ae)](),config={..._0x1e8d44},proxyEmit(_0x3610df(0x23e),emittedConfiguration());}function resetHistory(){const _0x35601e=_0x2c8b62;logger['full'](_0x35601e(0x2d1));try{if(fs['existsSync'](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+'-events.json')))fs['unlinkSync'](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+'-events.json'));if(fs['existsSync'](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+_0x35601e(0x202))))fs[_0x35601e(0x27f)](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+'-performance.json'));if(fs[_0x35601e(0x20c)](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+_0x35601e(0x275))))fs[_0x35601e(0x27f)](path[_0x35601e(0x1cb)](configpath,_0x35601e(0x309)+botID+_0x35601e(0x275)));}catch(_0x1b6344){if(_0x1b6344)logger[_0x35601e(0x284)](_0x35601e(0x273),_0x1b6344);}const _0x180be7=getDate();let _0x2b165e=[];currentCoins['forEach'](_0x2c3494=>{const _0x57f319=_0x35601e;_0x2b165e[_0x57f319(0x261)]({'coin':_0x2c3494['coin'],'number':_0x2c3494['number'],'price':_0x2c3494[_0x57f319(0x1f2)]});});let _0x5c153c=dbConfig['get'](_0x35601e(0x2bc))[_0x35601e(0x298)]({'botID':botID})[_0x35601e(0x1ed)]();_0x5c153c&&(dbConfig[_0x35601e(0x29d)](_0x35601e(0x2bc))[_0x35601e(0x298)]({'botID':botID})[_0x35601e(0x1d1)]({'liquidity':[{'date':_0x180be7,'changes':_0x2b165e}]})[_0x35601e(0x2ae)](),config[_0x35601e(0x31f)]=[]),process['send']({'stop':_0x35601e(0x20d)},_0x2e6dc9=>{});}function noslash(_0x4fe282){const _0xbf0e2=_0x2c8b62;return _0x4fe282[_0xbf0e2(0x220)]('/','');}function updateHighestFee(_0x15253f,_0x26862a){const _0x572322=_0x2c8b62;lastFees[_0x572322(0x1c4)]=_0x15253f,lastFees['recent20'][_0x572322(0x336)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x572322(0x255)][_0x572322(0x261)](_0x26862a),lastFees[_0x572322(0x1c8)]=Math[_0x572322(0x1be)](...lastFees[_0x572322(0x255)]);}async function updateNumberCoinsCcxt(_0x2abcf6){const _0x50ca78=_0x2c8b62;logger[_0x50ca78(0x2c1)](_0x50ca78(0x2db)+_0x2abcf6[_0x50ca78(0x24f)]+_0x50ca78(0x288)+_0x2abcf6[_0x50ca78(0x211)]+_0x50ca78(0x288)+_0x2abcf6['id']+_0x50ca78(0x288)+_0x2abcf6[_0x50ca78(0x206)]);let _0x19f1b4=_0x2abcf6[_0x50ca78(0x211)],_0x38704a=![];currentCoins[_0x50ca78(0x20b)](_0x138cf4=>{const _0x444ced=_0x50ca78;_0x138cf4['symbol']==_0x2abcf6[_0x444ced(0x24f)]&&(_0x38704a=!![]);});if(!_0x38704a)return;const _0x12c2e2=currentCoins[_0x50ca78(0x298)](_0x4c9dcd=>_0x4c9dcd[_0x50ca78(0x24f)]==_0x2abcf6[_0x50ca78(0x24f)]),_0x4956ac=_0x289cd5=>{const _0x2fe227=_0x50ca78;if(_0x12c2e2)_0x12c2e2[_0x2fe227(0x235)]=_0x289cd5;};if(_0x19f1b4=='open')_0x4956ac(_0x50ca78(0x2ea));else{if(_0x19f1b4==_0x50ca78(0x299)){_0x4956ac(_0x50ca78(0x299));const _0x66de9e=await getCoins();[currentCoins,currentCoinsAll]=_0x66de9e,await getOpenOrders(),handleOpenOrders();}else{if(_0x19f1b4=='closed'){logger[_0x50ca78(0x2c1)](_0x50ca78(0x271)+_0x2abcf6['symbol']+_0x50ca78(0x288)+_0x2abcf6[_0x50ca78(0x1e1)]+'\x20|\x20'+_0x2abcf6['id']+'\x20|\x20'+_0x2abcf6['clientOrderId']);let _0x2af714=![];if(lastOrders)lastOrders[_0x50ca78(0x20b)](async _0x22aa96=>{const _0x4a0c69=_0x50ca78;if(_0x22aa96['customId']==_0x2abcf6[_0x4a0c69(0x206)]){logger[_0x4a0c69(0x2c1)](_0x4a0c69(0x227)+_0x2abcf6[_0x4a0c69(0x206)]),_0x2af714=!![];if(_0x22aa96['filled']==0x0){logger[_0x4a0c69(0x2c1)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x2abcf6[_0x4a0c69(0x206)]);_0x2abcf6['average']?_0x22aa96['price']=_0x2abcf6['average']:_0x22aa96[_0x4a0c69(0x1c9)]=_0x2abcf6['price'];_0x22aa96['filled']=_0x2abcf6[_0x4a0c69(0x1e1)],_0x22aa96[_0x4a0c69(0x2c4)]={'currency':_0x2abcf6[_0x4a0c69(0x2c4)]?_0x2abcf6[_0x4a0c69(0x2c4)][_0x4a0c69(0x1c4)]:null,'cost':_0x2abcf6['fee']?_0x2abcf6[_0x4a0c69(0x2c4)][_0x4a0c69(0x2a8)]:0x0},updateHighestFee(_0x22aa96[_0x4a0c69(0x2c4)][_0x4a0c69(0x1c4)],_0x22aa96[_0x4a0c69(0x2c4)][_0x4a0c69(0x2a8)]),_0x4956ac(_0x4a0c69(0x1e1)),await validateOrders();if(lockOrders==ORDERS[_0x4a0c69(0x2ac)]){const _0x4b2d9f=await getCoins();[currentCoins,currentCoinsAll]=_0x4b2d9f;}await updateCoinResults(_0x22aa96);}}});if(!_0x2af714){logger[_0x50ca78(0x2c1)](_0x50ca78(0x279)+_0x2abcf6['id']),_0x4956ac(_0x50ca78(0x1e1));const _0x1edf19=await getCoins();[currentCoins,currentCoinsAll]=_0x1edf19,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x53472c=JSON['parse'](lastBalances[_0x50ca78(0x254)]);const _0x5b0591=_0x53472c[_0x50ca78(0x298)](_0x18960f=>_0x18960f[_0x50ca78(0x24f)]==_0x2abcf6['symbol']);if(_0x5b0591){if(_0x19f1b4==_0x50ca78(0x2ea))_0x5b0591[_0x50ca78(0x235)]=_0x5b0591['orderstatus']==_0x50ca78(0x1e1)?_0x50ca78(0x1e1):_0x50ca78(0x2ea);else{if(_0x19f1b4==_0x50ca78(0x299))_0x5b0591[_0x50ca78(0x235)]=_0x5b0591[_0x50ca78(0x235)]==_0x50ca78(0x1e1)?_0x50ca78(0x1e1):'canceled';else _0x19f1b4=='closed'&&(_0x5b0591['orderstatus']=_0x50ca78(0x1e1));}}lastBalances={...lastBalances,'portfolio':JSON[_0x50ca78(0x249)](_0x53472c)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3c1656=_0x2c8b62;await getOpenOrders();let _0x18368f=![];currentCoins[_0x3c1656(0x20b)](_0x1abc2c=>{const _0x48cbba=_0x3c1656;_0x18368f=allOpenOrders[_0x48cbba(0x298)](_0x2decd3=>_0x2decd3['symbol']==_0x1abc2c[_0x48cbba(0x24f)]),_0x1abc2c[_0x48cbba(0x235)]=_0x18368f?_0x48cbba(0x2ea):'none';});}async function getCoins(_0x1f82a4=!![],_0x576832=config[_0x2c8b62(0x2a7)]){const _0x1e13ad=_0x2c8b62;let _0x5dc9b8,_0x5cd3a4=[],_0x99ca66=[],_0x30416e=[],_0x46c467=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5dc9b8=await exchange['fetchBalance'](),mybalances=_0x5dc9b8[_0x1e13ad(0x290)];for(const [_0x3eed2b,_0x1a0911]of Object['entries'](mybalances)){_0x46c467[_0x1e13ad(0x261)](_0x3eed2b);}if(_0x576832=='')for(const [_0x4bf662,_0x3d08de]of Object[_0x1e13ad(0x291)](mybalances)){_0x3d08de[_0x1e13ad(0x323)]()!=0x0&&_0x99ca66[_0x1e13ad(0x261)]({'coin':_0x4bf662});}else{let _0x4948d7=![];for(const [_0x39a34a,_0xd8b648]of Object[_0x1e13ad(0x291)](mybalances)){if(_0x46c467[_0x1e13ad(0x234)](_0x39a34a)){const _0x48a914=config[_0x1e13ad(0x254)][_0x1e13ad(0x298)](_0x2b9a6b=>_0x2b9a6b[_0x1e13ad(0x1c5)]==_0x39a34a),_0x58cd48=_0x39a34a+'/'+_0x576832,_0x37b2fd=_0x576832+'/'+_0x39a34a,_0x4e13f4=currentCoins[_0x1e13ad(0x298)](_0x520615=>_0x520615[_0x1e13ad(0x1c5)]==_0x39a34a);_0x4948d7=![];if((_0xd8b648[_0x1e13ad(0x323)]()!=0x0||_0x48a914)&&(allSymbols[_0x1e13ad(0x234)](_0x58cd48)||_0x39a34a==_0x576832))_0x39a34a!=_0x576832&&_0x5cd3a4['push'](_0x58cd48),_0x99ca66['push']({'coin':_0x39a34a,'symbol':_0x58cd48,'reverse':![],'number':Math[_0x1e13ad(0x1be)](_0xd8b648+(_0x48a914&&_0x48a914[_0x1e13ad(0x2dd)]||0x0),0x0),'orderstatus':_0x4e13f4?_0x4e13f4['orderstatus']:_0x1e13ad(0x250)});else(_0xd8b648[_0x1e13ad(0x323)]()!=0x0||_0x48a914)&&allSymbols['includes'](_0x37b2fd)&&(_0x39a34a!=_0x576832&&_0x5cd3a4[_0x1e13ad(0x261)](_0x37b2fd),_0x99ca66[_0x1e13ad(0x261)]({'coin':_0x39a34a,'symbol':_0x37b2fd,'reverse':!![],'number':Math[_0x1e13ad(0x1be)](_0xd8b648+(_0x48a914&&_0x48a914[_0x1e13ad(0x2dd)]||0x0),0x0),'orderstatus':_0x4e13f4?_0x4e13f4[_0x1e13ad(0x235)]:_0x1e13ad(0x250)}));}}}}catch(_0x2cc8ee){if(!_0x1f82a4)handleErrorNoStop(_0x2cc8ee,_0x1e13ad(0x33c));else await handleError(_0x2cc8ee,_0x1e13ad(0x33c));}return _0x30416e=cloneDeep(_0x99ca66),_0x99ca66=_0x99ca66['filter'](_0x207d61=>{const _0x123ce2=_0x1e13ad,_0x2a550f=config[_0x123ce2(0x254)][_0x123ce2(0x298)](_0x21a5e5=>_0x21a5e5[_0x123ce2(0x1c5)]==_0x207d61['coin']);return _0x2a550f&&!_0x2a550f[_0x123ce2(0x286)];}),[_0x99ca66,_0x30416e];}async function getCoinNumber(_0x90b142){const _0x2ab84f=_0x2c8b62;let _0x5400ab;try{const _0x2749f5=await exchange[_0x2ab84f(0x218)]();_0x5400ab=_0x2749f5['total'][_0x90b142];}catch(_0x1ae8cb){await handleError(_0x1ae8cb,'getCoinNumber()');}return _0x5400ab;}async function getOpenOrders(){const _0x245778=_0x2c8b62;let _0x269218;allOpenOrders=[];try{for(const _0x1f1daf of config['portfolio']){!_0x1f1daf['excluded']&&_0x1f1daf['coin']!=config[_0x245778(0x2a7)]&&(_0x269218=await exchange[_0x245778(0x26b)](_0x1f1daf['symbol']),_0x269218[_0x245778(0x336)]>0x0&&allOpenOrders[_0x245778(0x261)](_0x269218[0x0]));}}catch(_0x5c3784){await handleError(_0x5c3784,'getOpenOrders()');}}async function handleOpenOrders(_0x3cf173=0x0){const _0x51e98f=_0x2c8b62;allOpenOrders[_0x51e98f(0x336)]==0x0&&lockOrders==ORDERS[_0x51e98f(0x2ac)]&&allOrdersPlaced&&(_0x3cf173==0x0?(logger[_0x51e98f(0x2c1)](_0x51e98f(0x238)),_0x3cf173++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x51e98f(0x2c1)](_0x51e98f(0x333)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0xc78ecd){const _0x461c48=_0x2c8b62,_0x5c7568=ccxt[_0xc78ecd['exchange'][_0x461c48(0x1c6)]()],_0xc98795=new _0x5c7568({'apiKey':_0xc78ecd[_0x461c48(0x32c)],'secret':_0xc78ecd[_0x461c48(0x334)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0xc78ecd['apiPassword'])_0xc98795[_0x461c48(0x267)]=_0xc78ecd[_0x461c48(0x1d9)];try{await _0xc98795[_0x461c48(0x31d)]();}catch(_0x346892){throw _0x346892;}}function cloneDeep(_0x22a6ce){const _0x79f1fb=_0x2c8b62;return JSON[_0x79f1fb(0x251)](JSON[_0x79f1fb(0x249)](_0x22a6ce));}async function getPortfolio(_0x7ff5c0){const _0x4f1c38=_0x2c8b62;let _0x365d59=[],_0x4b60b7=[],_0x143892=[],_0x550aba;if(_0x7ff5c0[_0x4f1c38(0x32c)]!==_0x4f1c38(0x289)||_0x7ff5c0[_0x4f1c38(0x334)]!==_0x4f1c38(0x289)||_0x7ff5c0['apiPassword']&&_0x7ff5c0[_0x4f1c38(0x1d9)]!=='************'){if(config[_0x4f1c38(0x2d0)]){if(_0x7ff5c0[_0x4f1c38(0x32c)]==_0x4f1c38(0x289))_0x7ff5c0[_0x4f1c38(0x32c)]=config['apiKey'];if(_0x7ff5c0['apiSecret']=='************')_0x7ff5c0[_0x4f1c38(0x334)]=config[_0x4f1c38(0x334)];if(_0x7ff5c0['apiPassword']==_0x4f1c38(0x289))_0x7ff5c0[_0x4f1c38(0x1d9)]=config['apiPassword'];try{await testAPI(_0x7ff5c0);}catch(_0x5067b5){if(_0x5067b5[_0x4f1c38(0x323)]()['includes'](_0x4f1c38(0x23a))){logger[_0x4f1c38(0x2c1)](_0x4f1c38(0x1ec)),proxyEmit(_0x4f1c38(0x254),![]);return;}else{handleError(_0x5067b5,_0x4f1c38(0x230));return;}}}await initExchange(_0x7ff5c0[_0x4f1c38(0x2d0)],_0x7ff5c0['apiKey'],_0x7ff5c0['apiSecret'],_0x7ff5c0[_0x4f1c38(0x1d9)]);try{await loadSymbols(_0x7ff5c0['exchange'],!![]);}catch(_0x10fb97){if(_0x10fb97[_0x4f1c38(0x323)]()['includes']('AuthenticationError')){proxyEmit(_0x4f1c38(0x254),![]);return;}else{handleError(_0x10fb97,_0x4f1c38(0x29e));return;}}const _0x5c2d3c=await getCoins(![],_0x7ff5c0[_0x4f1c38(0x2a7)]);_0x143892=cloneDeep(_0x5c2d3c[0x1]);}else _0x143892=cloneDeep(currentCoinsAll);if(_0x7ff5c0[_0x4f1c38(0x2a7)]=='')proxyEmit(_0x4f1c38(0x254),_0x143892);else{_0x143892['forEach'](_0x4f4b92=>{const _0x32b7e7=_0x4f1c38;if(_0x4f4b92['coin']!=_0x7ff5c0['basecoin'])_0x365d59[_0x32b7e7(0x261)](_0x4f4b92[_0x32b7e7(0x24f)]);});try{_0x4b60b7=await exchange[_0x4f1c38(0x1fe)](_0x365d59);}catch(_0x5d1f08){if(_0x5d1f08[_0x4f1c38(0x323)]()[_0x4f1c38(0x234)](_0x4f1c38(0x23a))){proxyEmit(_0x4f1c38(0x254),![]);return;}else{handleError(_0x5d1f08,_0x4f1c38(0x2d5));return;}}_0x143892[_0x4f1c38(0x20b)](_0x19fcb7=>{const _0x289eab=_0x4f1c38;_0x19fcb7[_0x289eab(0x1c5)]!=_0x7ff5c0[_0x289eab(0x2a7)]?_0x550aba=_0x19fcb7['reverse']?0x1/_0x4b60b7[_0x19fcb7['symbol']]['last']:_0x4b60b7[_0x19fcb7[_0x289eab(0x24f)]][_0x289eab(0x1f2)]:_0x550aba=0x1,_0x19fcb7[_0x289eab(0x1c9)]=formatResult(_0x550aba,0x8);}),proxyEmit(_0x4f1c38(0x254),_0x143892);}}function truncateTradeAmount(_0x4d37e4,_0xd58598){const _0x584a10=_0x2c8b62;let _0x326db7=0x0;try{_0x326db7=exchange[_0x584a10(0x2a1)](_0x4d37e4,_0xd58598);}catch(_0xbd98cd){}return _0x326db7;}function checkMinimums(_0xa8b866){const _0x4f2961=_0x2c8b62;let _0x4ebfc7=!![];const _0x5b9e7=!_0xa8b866[_0x4f2961(0x1e7)]?markets[_0xa8b866[_0x4f2961(0x24f)]][_0x4f2961(0x303)][_0x4f2961(0x330)][_0x4f2961(0x1cf)]:markets[_0xa8b866[_0x4f2961(0x24f)]][_0x4f2961(0x303)][_0x4f2961(0x2a8)]['min'],_0x3602a8=!_0xa8b866['reverse']?markets[_0xa8b866['symbol']]['limits'][_0x4f2961(0x2a8)][_0x4f2961(0x1cf)]:markets[_0xa8b866['symbol']][_0x4f2961(0x303)][_0x4f2961(0x330)][_0x4f2961(0x1cf)],_0x4b90fb=truncateTradeAmount(_0xa8b866[_0x4f2961(0x24f)],_0xa8b866[_0x4f2961(0x2b6)]);_0xa8b866[_0x4f2961(0x2b6)]=_0x4b90fb;if(Math[_0x4f2961(0x26a)](_0x4b90fb)<_0x5b9e7)_0x4ebfc7=![];if(Math[_0x4f2961(0x26a)](_0x4b90fb)*_0xa8b866[_0x4f2961(0x1f2)]<_0x3602a8)_0x4ebfc7=![];if(_0xa8b866[_0x4f2961(0x322)]=='sell'){let _0x528fa9=config[_0x4f2961(0x254)][_0x4f2961(0x298)](_0x4a6f05=>_0x4a6f05[_0x4f2961(0x1c5)]==_0xa8b866['coin']);if(_0x528fa9[_0x4f2961(0x2dd)]>0x0){if(Math['abs'](_0x4b90fb)>_0xa8b866[_0x4f2961(0x1e8)]-_0x528fa9['offset'])_0x4ebfc7=![];}else{if(Math[_0x4f2961(0x26a)](_0x4b90fb)>_0xa8b866[_0x4f2961(0x1e8)])_0x4ebfc7=![];}}if(_0xa8b866['side']==_0x4f2961(0x1eb)){let _0x8bf3f0=config['portfolio'][_0x4f2961(0x298)](_0xcdb7d3=>_0xcdb7d3[_0x4f2961(0x1c5)]==config[_0x4f2961(0x2a7)]),_0x5e4473=currentCoins['find'](_0x177fdf=>_0x177fdf[_0x4f2961(0x1c5)]==config[_0x4f2961(0x2a7)]);if(_0x8bf3f0[_0x4f2961(0x2dd)]>0x0){if(Math[_0x4f2961(0x26a)](_0x4b90fb)*_0xa8b866['last']>_0x5e4473[_0x4f2961(0x1e8)]-_0x8bf3f0[_0x4f2961(0x2dd)])_0x4ebfc7=![];}else{if(Math['abs'](_0x4b90fb)*_0xa8b866[_0x4f2961(0x1f2)]>_0x5e4473['number'])_0x4ebfc7=![];}}return _0x4ebfc7;}async function getBalances(_0x527c60=!![]){const _0x4983e5=_0x2c8b62;let _0x45fdf9=0x0,_0x3fe8df;const _0x43e36b=config[_0x4983e5(0x2af)];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x5e5385=>{const _0x21f1fe=_0x4983e5;if(_0x5e5385['coin']!=config['basecoin']){let _0x2b8685=global[_0x21f1fe(0x296)][noslash(_0x5e5385['symbol'])];_0x3fe8df=_0x5e5385[_0x21f1fe(0x1e7)]?0x1/_0x2b8685:_0x2b8685;}else _0x3fe8df=0x1;let _0x296a4e=_0x5e5385['number']*_0x3fe8df;_0x45fdf9+=_0x296a4e,_0x5e5385[_0x21f1fe(0x1f2)]=formatResult(Number(_0x3fe8df),0x8),_0x5e5385[_0x21f1fe(0x1ed)]=_0x296a4e;}),currentCoins[_0x4983e5(0x20b)](_0x134201=>{const _0x1b4069=_0x4983e5;let _0x1d3a35=config[_0x1b4069(0x254)]['find'](_0x4541b8=>_0x4541b8['coin']==_0x134201['coin']),_0x21c078=Number(_0x1d3a35[_0x1b4069(0x242)]),_0x2561a8=_0x134201[_0x1b4069(0x1ed)]/_0x45fdf9*0x64,_0x3cb4b7=_0x21c078*_0x45fdf9/0x64/_0x134201[_0x1b4069(0x1f2)]-_0x134201[_0x1b4069(0x1e8)];_0x134201[_0x1b4069(0x242)]=formatResult(_0x2561a8,0x3),_0x134201['target']=formatResult(_0x21c078,0x3),_0x134201[_0x1b4069(0x2b6)]=formatResult(_0x3cb4b7,0x8),_0x134201['side']='',_0x134201[_0x1b4069(0x2a3)]=![];if(_0x134201[_0x1b4069(0x1c5)]!=config[_0x1b4069(0x2a7)]){if(_0x134201[_0x1b4069(0x242)]>_0x21c078)_0x134201['side']=_0x1b4069(0x317),_0x134201[_0x1b4069(0x2a3)]=checkMinimums(_0x134201);else _0x134201[_0x1b4069(0x242)]<_0x21c078&&(_0x134201['side']=_0x1b4069(0x1eb),_0x134201[_0x1b4069(0x2a3)]=checkMinimums(_0x134201));}_0x134201[_0x1b4069(0x1de)]=_0x134201[_0x1b4069(0x242)]/_0x134201[_0x1b4069(0x2ba)]-0x1;if(_0x134201['orderstatus']=='filled'||_0x134201[_0x1b4069(0x235)]==_0x1b4069(0x299))_0x134201[_0x1b4069(0x235)]='none';}),currentCoins[_0x4983e5(0x24b)]((_0x3f752c,_0x29c2cd)=>_0x3f752c['delta']<_0x29c2cd['delta']?0x1:_0x29c2cd[_0x4983e5(0x1de)]<_0x3f752c[_0x4983e5(0x1de)]?-0x1:0x0);const _0x1d7a95=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1d7a95['eur'],'usd':_0x1d7a95[_0x4983e5(0x2ed)],'portfolio':JSON[_0x4983e5(0x249)](currentCoins),'threshold':_0x43e36b},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x527c60){if(config[_0x4983e5(0x312)])headlessMode({'portfolio':currentCoins,'threshold':_0x43e36b});else{if(lockOrders==ORDERS[_0x4983e5(0x2df)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x43e36b});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x34d908=getNormalizedPerformance();getStartingBalances(_0x34d908),emitPerformance(_0x34d908);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5d2d84=getNormalizedPerformance();emitPerformance(_0x5d2d84),getStartingBalances(_0x5d2d84),logger[_0x4983e5(0x2c1)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x22ca71=_0x2c8b62;if(!lastBalances)return;let _0x2fc50f=[],_0x5b40fd,_0x54186d=JSON[_0x22ca71(0x251)](lastBalances[_0x22ca71(0x254)]);_0x54186d[_0x22ca71(0x24b)]((_0x5e0ea6,_0x499456)=>_0x5e0ea6[_0x22ca71(0x1c5)]>_0x499456[_0x22ca71(0x1c5)]?0x1:_0x499456[_0x22ca71(0x1c5)]>_0x5e0ea6[_0x22ca71(0x1c5)]?-0x1:0x0),_0x54186d[_0x22ca71(0x20b)](_0x40ae18=>{const _0x2fbf8a=_0x22ca71;let _0x19e5d2={'coin':_0x40ae18[_0x2fbf8a(0x1c5)],'number':_0x40ae18[_0x2fbf8a(0x1e8)],'price':_0x40ae18[_0x2fbf8a(0x1f2)]};_0x2fc50f[_0x2fbf8a(0x261)](_0x19e5d2);});const _0x412782=await getFiat();_0x5b40fd={'date':lastBalances[_0x22ca71(0x2e4)][_0x22ca71(0x240)]('\x20')[0x0],'eur':_0x412782[_0x22ca71(0x1cd)],'usd':_0x412782[_0x22ca71(0x2ed)],'coins':_0x2fc50f};let _0x3babfb=dbPerformance[_0x22ca71(0x29d)](_0x22ca71(0x2ce))[_0x22ca71(0x298)]({'date':_0x5b40fd[_0x22ca71(0x2fc)]})[_0x22ca71(0x1ed)]();_0x3babfb?_0x5b40fd[_0x22ca71(0x2fc)]!=config[_0x22ca71(0x327)]&&dbPerformance[_0x22ca71(0x29d)]('data')[_0x22ca71(0x298)]({'date':_0x5b40fd['date']})[_0x22ca71(0x1d1)](_0x5b40fd)[_0x22ca71(0x2ae)]():dbPerformance[_0x22ca71(0x29d)]('data')[_0x22ca71(0x261)](_0x5b40fd)[_0x22ca71(0x2ae)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x57268a=_0x2c8b62;let _0x201a7d=[];if(dbPerformance['has'](_0x57268a(0x2ce))[_0x57268a(0x1ed)]()){let _0x2b4a2a=dbPerformance['get']('data')[_0x57268a(0x2b0)]()[_0x57268a(0x30a)](_0x57268a(0x2fc))[_0x57268a(0x1ed)](),_0x598c11=[...config['liquidity']];_0x598c11[_0x57268a(0x24b)]((_0x27991d,_0xba5a1c)=>_0x27991d['date']>_0xba5a1c[_0x57268a(0x2fc)]?-0x1:_0xba5a1c[_0x57268a(0x2fc)]>_0x27991d[_0x57268a(0x2fc)]?0x1:0x0);let _0x1be628=0x1,_0xf2c6c4=[],_0x24167c=0x0;_0x2b4a2a[_0x57268a(0x2d6)]()[_0x57268a(0x1e7)]()[_0x57268a(0x20b)]((_0xf321b5,_0x256c67)=>{const _0x4667c4=_0x57268a;if(_0x598c11[_0x24167c]){if(_0x2b4a2a[_0x2b4a2a[_0x4667c4(0x336)]-_0x256c67]&&_0x598c11[_0x24167c]['date']==_0x2b4a2a[_0x2b4a2a['length']-_0x256c67]['date']){if(_0x256c67<_0x2b4a2a['length']){let _0x315f5f=0x0,_0x5d36da=0x0;_0x2b4a2a[_0x2b4a2a[_0x4667c4(0x336)]-_0x256c67]['coins'][_0x4667c4(0x20b)](_0x14b031=>{_0x5d36da+=_0x14b031['number']*_0x14b031['price'];}),_0x598c11[_0x24167c][_0x4667c4(0x1fd)][_0x4667c4(0x20b)](_0xd8ac80=>{const _0x36de99=_0x4667c4;_0x315f5f+=_0xd8ac80[_0x36de99(0x1e8)]*_0xd8ac80[_0x36de99(0x1c9)];}),_0x1be628*=_0x315f5f/(_0x5d36da-_0x315f5f)+0x1;}_0x24167c++;}}let _0xf6a8c5=0x0;_0xf321b5[_0x4667c4(0x2cb)][_0x4667c4(0x20b)](_0x5db351=>{const _0x3e9fc2=_0x4667c4;_0xf6a8c5+=_0x5db351[_0x3e9fc2(0x1e8)]*_0x5db351['price'];}),_0xf2c6c4[_0x2b4a2a['length']-_0x256c67-0x1]=_0xf6a8c5*(_0x1be628-0x1);});let _0x167597=[];_0x598c11=[...config[_0x57268a(0x31f)]]||[];let _0x4fc955=0x0;_0x24167c=0x0,_0x2b4a2a[_0x57268a(0x20b)]((_0x2f930a,_0x50ea36)=>{const _0x16f321=_0x57268a;if(_0x598c11[_0x24167c]){const _0x458474=fns['parse'](_0x598c11[_0x24167c][_0x16f321(0x2fc)],'yyyy/MM/dd',new Date()),_0x341409=fns[_0x16f321(0x251)](_0x2f930a['date'],_0x16f321(0x29c),new Date());if(fns[_0x16f321(0x260)](_0x458474,_0x341409)){let _0x49d61b=0x0;_0x598c11[_0x24167c][_0x16f321(0x1fd)][_0x16f321(0x20b)](_0x4a4cbf=>{const _0xb5987b=_0x16f321;!_0x167597[_0x4a4cbf[_0xb5987b(0x1c5)]]?_0x167597[_0x4a4cbf[_0xb5987b(0x1c5)]]=_0x4a4cbf[_0xb5987b(0x1e8)]:(_0x49d61b=_0x167597[_0x4a4cbf[_0xb5987b(0x1c5)]],_0x167597[_0x4a4cbf['coin']]+=_0x4a4cbf['number']);const _0x377ab9=_0x2f930a[_0xb5987b(0x2cb)]['find'](_0x488e7d=>_0x488e7d[_0xb5987b(0x1c5)]==_0x4a4cbf[_0xb5987b(0x1c5)]);(!_0x377ab9||_0x377ab9[_0xb5987b(0x1e8)]==0x0)&&(_0x4fc955+=(-_0x4a4cbf[_0xb5987b(0x1e8)]-_0x49d61b)*_0x4a4cbf[_0xb5987b(0x1c9)]);}),_0x24167c++;}}_0x2f930a[_0x16f321(0x2cb)]['forEach']((_0x288cd1,_0x5a8e1e)=>{const _0x4b7511=_0x16f321;_0x167597[_0x288cd1['coin']]&&(_0x288cd1[_0x4b7511(0x2ab)]=_0x167597[_0x288cd1[_0x4b7511(0x1c5)]]);}),_0x201a7d['push']({'date':_0x2f930a[_0x16f321(0x2fc)],'eur':_0x2f930a['eur'],'usd':_0x2f930a[_0x16f321(0x2ed)],'offset':_0xf2c6c4[_0x50ea36],'netoffset':_0x4fc955,'coins':_0x2f930a[_0x16f321(0x2cb)]});});}return _0x201a7d;}function emitPerformance(_0x3ae605){const _0x317a9c=_0x2c8b62;_0x3ae605[_0x317a9c(0x336)]!==0x0?(proxyEmit('performance',_0x3ae605),lastPerformanceEmitted=getDate()):proxyEmit(_0x317a9c(0x225),[]);}function getPerf(_0x2652eb,_0x3ef52b){const _0x331b72=_0x2c8b62;let _0x55023a=0x0,_0x5b16dc=0x0,_0x3007b3=0x0;_0x2652eb['coins'][_0x331b72(0x20b)](_0x2fb332=>{const _0x290554=_0x331b72;_0x55023a+=_0x2fb332['number']*_0x2fb332[_0x290554(0x1c9)];});_0x3ef52b&&(_0x55023a+=_0x2652eb[_0x331b72(0x2dd)]);if(config[_0x331b72(0x2a7)]===_0x331b72(0x27c)||config[_0x331b72(0x2a7)]===_0x331b72(0x29f))_0x5b16dc=_0x55023a*_0x2652eb[_0x331b72(0x1cd)],_0x3007b3=_0x55023a*_0x2652eb[_0x331b72(0x2ed)];else{if(config[_0x331b72(0x2a7)]==='BUSD'||config[_0x331b72(0x2a7)]==='USDT'||config['basecoin']==='USD')_0x5b16dc=_0x55023a*_0x2652eb[_0x331b72(0x1cd)]/_0x2652eb[_0x331b72(0x2ed)],_0x3007b3=_0x55023a;else config[_0x331b72(0x2a7)]==='EUR'&&(_0x5b16dc=_0x55023a,_0x3007b3=_0x55023a*_0x2652eb[_0x331b72(0x2ed)]/_0x2652eb['eur']);}return[_0x55023a,_0x5b16dc,_0x3007b3];}function getKPIs(_0x1df64d,_0x4a24be=_0x2c8b62(0x2ef)){const _0x1447d3=_0x2c8b62,_0x5b5883=config[_0x1447d3(0x2a7)],_0x32570b=lastBalances,_0xda3fd3=currentCoins,_0x3f1ae2=getNormalizedPerformance(),_0x5654ff=_0x1df64d===_0x1447d3(0x2a7)?_0x5b5883:_0x1df64d===_0x1447d3(0x31a)||_0x1df64d===_0x1447d3(0x2bf)?_0x4a24be:'Net\x20'+_0x5b5883,_0x46031f=_0x1df64d===_0x1447d3(0x339)?_0x1447d3(0x297):_0x1df64d===_0x1447d3(0x2bf)?_0x1447d3(0x297):_0x5654ff+_0x1447d3(0x1c0),_0x4af01b=_0x1df64d==='net-basecoin'||_0x1df64d===_0x1447d3(0x2bf)?_0x1447d3(0x297):_0x5654ff+_0x1447d3(0x28c);let _0x504e0b=0x0;_0xda3fd3[_0x1447d3(0x20b)](_0x4668da=>{const _0x1b7db0=_0x1447d3;_0x504e0b+=_0x4668da['number']*_0x4668da[_0x1b7db0(0x1f2)];});if(_0x1df64d===_0x1447d3(0x31a)||_0x1df64d===_0x1447d3(0x2bf)){if(_0x5b5883===_0x1447d3(0x27c)||_0x5b5883==='ETH')_0x504e0b=_0x504e0b*(_0x4a24be==='EUR'?_0x32570b[_0x1447d3(0x1cd)]:_0x32570b[_0x1447d3(0x2ed)]);else{if(_0x5b5883===_0x1447d3(0x241)||_0x5b5883==='USDT'||_0x5b5883===_0x1447d3(0x247))_0x504e0b=_0x504e0b*(_0x4a24be===_0x1447d3(0x2ef)?_0x32570b[_0x1447d3(0x1cd)]/_0x32570b['usd']:0x1);else _0x5b5883===_0x1447d3(0x2ef)&&(_0x504e0b=_0x504e0b*(_0x4a24be===_0x1447d3(0x2ef)?0x1:_0x32570b['usd']/_0x32570b[_0x1447d3(0x1cd)]));}}let _0x720263;if(_0x504e0b!==0x0){if(_0x1df64d==='basecoin')_0x720263=(_0x504e0b/startingBalances[_0x1447d3(0x2a7)]-0x1)*0x64;else{if(_0x4a24be===_0x1447d3(0x2ef))_0x720263=(_0x504e0b/startingBalances[_0x1447d3(0x1cd)]-0x1)*0x64;else _0x720263=(_0x504e0b/startingBalances[_0x1447d3(0x2ed)]-0x1)*0x64;}let _0x4f4169=0x0;if(startingBalances['coins'])_0xda3fd3[_0x1447d3(0x20b)](_0x5d9bc2=>{const _0x431930=_0x1447d3;let _0x497d2c=startingBalances[_0x431930(0x2cb)][_0x431930(0x298)](_0x2bb0b3=>_0x2bb0b3['coin']===_0x5d9bc2[_0x431930(0x1c5)]);if(_0x497d2c&&_0x497d2c[_0x431930(0x1c5)]&&_0x5d9bc2['number']!==0x0)_0x4f4169+=_0x497d2c['number']*_0x5d9bc2['last'];});let _0x124d17=0x0;if(_0x3f1ae2[_0x1447d3(0x336)]!==0x0){let _0x1d0a09=_0x3f1ae2[_0x3f1ae2[_0x1447d3(0x336)]-0x1];_0x124d17=_0x1d0a09[_0x1447d3(0x2a6)];}_0x4f4169-=_0x124d17;_0x1df64d===_0x1447d3(0x339)&&(_0x720263=(_0x504e0b-_0x4f4169)/startingBalances['basecoin']*0x64,_0x504e0b=_0x504e0b-_0x4f4169);if(_0x1df64d==='net-fiat'){let _0x1df5c1=_0x4a24be==='EUR'?startingBalances[_0x1447d3(0x1cd)]:startingBalances[_0x1447d3(0x2ed)];if(_0x5b5883==='BTC'||_0x5b5883===_0x1447d3(0x29f))_0x4f4169=_0x4a24be===_0x1447d3(0x2ef)?_0x4f4169*_0x32570b[_0x1447d3(0x1cd)]:_0x4f4169*_0x32570b[_0x1447d3(0x2ed)];else{if(_0x5b5883==='BUSD'||_0x5b5883===_0x1447d3(0x217)||_0x5b5883==='USD')_0x4f4169=_0x4a24be===_0x1447d3(0x2ef)?_0x4f4169*_0x32570b[_0x1447d3(0x1cd)]/_0x32570b['usd']:_0x4f4169;else _0x5b5883===_0x1447d3(0x2ef)&&(_0x4f4169=_0x4a24be===_0x1447d3(0x2ef)?_0x4f4169:_0x4f4169*_0x32570b[_0x1447d3(0x2ed)]/_0x32570b[_0x1447d3(0x1cd)]);}_0x720263=(_0x504e0b-_0x4f4169)/_0x1df5c1*0x64,_0x504e0b=_0x504e0b-_0x4f4169;}if(_0x720263){if(_0x720263<0x64)_0x720263=_0x720263[_0x1447d3(0x2c2)](0x2);else{if(_0x720263<0x3e8)_0x720263=_0x720263[_0x1447d3(0x2c2)](0x1);else _0x720263=_0x720263[_0x1447d3(0x2c2)](0x0);}}else _0x720263=Number('0')['toFixed'](0x2);if(_0x504e0b){if(Math[_0x1447d3(0x26a)](_0x504e0b)<0.000001)_0x504e0b=_0x504e0b['toFixed'](0x2);else{if(Math['abs'](_0x504e0b)<0.1)_0x504e0b=_0x504e0b[_0x1447d3(0x2c2)](0x6);else{if(Math[_0x1447d3(0x26a)](_0x504e0b)<0x1)_0x504e0b=_0x504e0b[_0x1447d3(0x2c2)](0x5);else{if(Math[_0x1447d3(0x26a)](_0x504e0b)<0xa)_0x504e0b=_0x504e0b[_0x1447d3(0x2c2)](0x4);else{if(Math[_0x1447d3(0x26a)](_0x504e0b)<0x64)_0x504e0b=_0x504e0b[_0x1447d3(0x2c2)](0x3);else{if(Math[_0x1447d3(0x26a)](_0x504e0b)<0x3e8)_0x504e0b=_0x504e0b['toFixed'](0x2);else _0x504e0b=_0x504e0b[_0x1447d3(0x2c2)](0x2);}}}}}}else _0x504e0b=Number('0')[_0x1447d3(0x2c2)](0x2);}else _0x720263=Number('0')['toFixed'](0x2);return{'value':_0x504e0b,'change':_0x720263,'leftTxt':_0x46031f,'rightTxt':_0x4af01b};}async function getStartingBalances(_0x455a3c,_0x3768ed=!![]){const _0x481fc4=_0x2c8b62;if(_0x455a3c[_0x481fc4(0x336)]!==0x0){const [_0x59e344,_0x5b8597,_0x5f0435]=getPerf(_0x455a3c[0x0],!![]);let _0x377db6=[];config[_0x481fc4(0x254)][_0x481fc4(0x20b)](_0x13f4ad=>{const _0x23a943=_0x481fc4;let _0x5c7d39=0x0,_0xdc4e67;config[_0x23a943(0x31f)][_0x23a943(0x20b)](_0x385e0f=>{const _0x518dee=_0x23a943;let _0x52d742=_0x385e0f['changes'][_0x518dee(0x298)](_0x3887d4=>_0x3887d4['coin']==_0x13f4ad[_0x518dee(0x1c5)]);if(_0x52d742){_0x5c7d39+=_0x52d742['number'];if(!_0xdc4e67)_0xdc4e67=_0x52d742[_0x518dee(0x1c9)];}}),_0x377db6[_0x23a943(0x261)]({'coin':_0x13f4ad[_0x23a943(0x1c5)],'number':_0x5c7d39,'initialprice':_0xdc4e67});});const _0x24039b={'basecoin':_0x59e344,'eur':_0x5b8597,'usd':_0x5f0435,'coins':_0x377db6};if(_0x3768ed)proxyEmit(_0x481fc4(0x204),_0x24039b);startingBalances=_0x24039b;}}function headlessMode(_0x166cf9){const _0x1438ad=_0x2c8b62;let _0x24e4b9=_0x166cf9[_0x1438ad(0x254)],_0x14b73f=_0x166cf9[_0x1438ad(0x2af)],_0x1b62fe=[];for(let _0x7bfb0a of _0x24e4b9){if(_0x7bfb0a[_0x1438ad(0x1c5)]!=config[_0x1438ad(0x2a7)]){if(_0x7bfb0a[_0x1438ad(0x1de)]>=_0x14b73f/0x64){if(_0x7bfb0a['valid'])_0x1b62fe[_0x1438ad(0x261)](_0x7bfb0a);}else{if(_0x7bfb0a[_0x1438ad(0x1de)]<=-_0x14b73f/0x64){if(_0x7bfb0a[_0x1438ad(0x2a3)])_0x1b62fe[_0x1438ad(0x261)](_0x7bfb0a);}}}}_0x1b62fe[_0x1438ad(0x336)]>0x0&&placeOrder(_0x1b62fe);}function notifyBalance(_0x38a513){const _0x59432b=_0x2c8b62;let _0x4b0fc0=_0x38a513[_0x59432b(0x254)],_0x36d888=_0x38a513[_0x59432b(0x2af)],_0x2e6c3e=[];for(let _0x31c942 of _0x4b0fc0){if(_0x31c942[_0x59432b(0x1c5)]!=config[_0x59432b(0x2a7)]){if(_0x31c942[_0x59432b(0x1de)]>=_0x36d888/0x64){if(_0x31c942['valid'])_0x2e6c3e[_0x59432b(0x261)](_0x31c942);}else{if(_0x31c942[_0x59432b(0x1de)]<=-_0x36d888/0x64){if(_0x31c942[_0x59432b(0x2a3)])_0x2e6c3e['push'](_0x31c942);}}}}if(_0x2e6c3e['length']>0x0){let _0x390882=_0x2e6c3e[_0x59432b(0x337)](_0x1955e9=>_0x1955e9[_0x59432b(0x1c5)]);_0x390882['sort']();let _0x98b077=_0x390882[_0x59432b(0x1cb)](',\x20');if(!lastCoinsToBalance)logHistory(_0x59432b(0x307),_0x59432b(0x1dc));lastCoinsToBalance=_0x98b077;}}function symbolToCoin(_0x4443d1){const _0x15b12d=_0x2c8b62;let _0x1be406;if(_0x4443d1[_0x15b12d(0x234)]('/'+config[_0x15b12d(0x2a7)]))_0x1be406=_0x4443d1[_0x15b12d(0x220)]('/'+config[_0x15b12d(0x2a7)],'');if(_0x4443d1[_0x15b12d(0x234)](config[_0x15b12d(0x2a7)]+'/'))_0x1be406=_0x4443d1[_0x15b12d(0x220)](config[_0x15b12d(0x2a7)]+'/','');return _0x1be406;}async function unlockOrders(){const _0xb1a42=_0x2c8b62;if(allOrdersPlaced&&lockOrders==ORDERS[_0xb1a42(0x2ac)]){logger['debug'](_0xb1a42(0x1df)),lockOrders=ORDERS[_0xb1a42(0x2bd)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x7a08ac=await getCoins();[currentCoins,currentCoinsAll]=_0x7a08ac,validateOrdersState=_0xb1a42(0x2ab),persistOpenOrders([]),lockOrders=ORDERS[_0xb1a42(0x2df)],logger[_0xb1a42(0x2c1)](_0xb1a42(0x2cc));}}async function validateOrders(_0x34a0d2){const _0xf6f2e6=_0x2c8b62;if(_0x34a0d2)validateOrdersState=_0x34a0d2;logger[_0xf6f2e6(0x2c1)](_0xf6f2e6(0x231)+validateOrdersState+_0xf6f2e6(0x22d)+(lockOrders==0x1?_0xf6f2e6(0x335):lockOrders==0x2?_0xf6f2e6(0x2d9):_0xf6f2e6(0x2b1)));let _0x41820b=[],_0x934cd5=config[_0xf6f2e6(0x29a)]==_0xf6f2e6(0x306)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xf6f2e6(0x1e5)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xf6f2e6(0x2ac)])return;logger[_0xf6f2e6(0x2c1)](_0xf6f2e6(0x294)+validateOrdersState),lastOrders[_0xf6f2e6(0x20b)](_0x35f6b2=>{const _0x421390=_0xf6f2e6;let _0x1e3f86=![];_0x35f6b2[_0x421390(0x1e1)]>0x0&&(_0x1e3f86=!![]),_0x41820b[_0x421390(0x261)](_0x1e3f86),_0x1e3f86&&config[_0x421390(0x29a)]!='market'&&logHistory(_0x421390(0x263),_0x421390(0x2ec)+_0x35f6b2[_0x421390(0x24f)]+'\x20'+_0x35f6b2[_0x421390(0x322)]+'\x20#'+formatResult(_0x35f6b2[_0x421390(0x1e1)],0x8)+'\x20@'+formatResult(_0x35f6b2[_0x421390(0x1c9)],0x8));}),_0x41820b['forEach']((_0x1a68df,_0xd3a968)=>{const _0x34a1d9=_0xf6f2e6;if(_0x1a68df)lastOrders[_0x34a1d9(0x2c8)](_0xd3a968,0x1);}),persistOpenOrders(lastOrders);const _0x99cd66=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0xf6f2e6(0x2fa);if(validateOrdersState==_0xf6f2e6(0x2ab)){validateOrdersState=_0xf6f2e6(0x1c7);if(_0x41820b[_0xf6f2e6(0x234)](![])){if(config[_0xf6f2e6(0x29a)]==_0xf6f2e6(0x306)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0xf6f2e6(0x1c7)){if(_0x41820b[_0xf6f2e6(0x234)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0xf6f2e6(0x306)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0xf6f2e6(0x1f4))_0x41820b[_0xf6f2e6(0x234)](![])&&(config['ordertype']=='market'?logHistory(_0xf6f2e6(0x21e),_0xf6f2e6(0x2a2)+Math[_0xf6f2e6(0x2fd)](_0x934cd5*validateOrderInterval/0xea60)+_0xf6f2e6(0x223)+_0x99cd66):(await cancelOrders(),logHistory(_0xf6f2e6(0x21e),_0xf6f2e6(0x1c3)+Math[_0xf6f2e6(0x2fd)](_0x934cd5*validateOrderInterval/0xea60)+_0xf6f2e6(0x223)+_0x99cd66))),await unlockOrders();else{if(validateOrdersState==_0xf6f2e6(0x29b)){if(config['ordertype']!=_0xf6f2e6(0x306))logHistory(_0xf6f2e6(0x21e),_0xf6f2e6(0x2f6)+_0x99cd66);await unlockOrders();}}}}}async function cancelOrders(){const _0xff133f=_0x2c8b62;lastOrders[_0xff133f(0x20b)](async _0x44fa96=>{const _0x3c1ec2=_0xff133f;try{const _0x3c0ef1=await exchange['cancelOrder'](_0x44fa96[_0x3c1ec2(0x2be)],_0x44fa96[_0x3c1ec2(0x24f)]);}catch(_0x561335){if(_0x561335[_0x3c1ec2(0x323)]()['includes']('OrderNotFound')){}else await handleError(_0x561335,'cancelOrders()');}});}async function initCoinResults(){const _0x4e1d64=_0x2c8b62;let _0x4d5829=[];config[_0x4e1d64(0x254)]['forEach'](_0x56c736=>{const _0x4ac5a5=_0x4e1d64;if(!_0x56c736['excluded']&&_0x56c736[_0x4ac5a5(0x1c5)]!=config[_0x4ac5a5(0x2a7)]){let _0x37089b=dbCoinResults[_0x4ac5a5(0x29d)](_0x4ac5a5(0x2cb))['find']({'coin':_0x56c736['coin']})[_0x4ac5a5(0x1ed)]();if(!_0x37089b){const _0xfc4b45=currentCoins[_0x4ac5a5(0x298)](_0x465400=>_0x465400[_0x4ac5a5(0x1c5)]==_0x56c736[_0x4ac5a5(0x1c5)]),_0x5cb134=global[_0x4ac5a5(0x296)][noslash(_0x56c736[_0x4ac5a5(0x24f)])];let _0x12e54e=_0xfc4b45?_0xfc4b45[_0x4ac5a5(0x1e8)]:null,_0x537083=_0x56c736[_0x4ac5a5(0x1e7)]?0x1/_0x5cb134:_0x5cb134,_0x2d0fc0;config['liquidity'][_0x4ac5a5(0x20b)](_0x36b454=>{const _0x45a7a7=_0x4ac5a5;!_0x2d0fc0&&(_0x2d0fc0=_0x36b454[_0x45a7a7(0x1fd)][_0x45a7a7(0x298)](_0x5eef42=>_0x5eef42[_0x45a7a7(0x1c5)]==_0x56c736['coin']),_0x2d0fc0&&(_0x12e54e=_0x2d0fc0[_0x45a7a7(0x1e8)],_0x537083=_0x2d0fc0['price']));}),_0x4d5829[_0x4ac5a5(0x261)]({'coin':_0x56c736['coin'],'number':_0x12e54e,'price':_0x537083});}}}),_0x4d5829['forEach'](_0x5b3541=>{const _0x14d792=_0x4e1d64,_0x4d22ff={'coin':_0x5b3541[_0x14d792(0x1c5)],'number':_0x5b3541['number'],'breakeven':_0x5b3541[_0x14d792(0x1c9)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x14d792(0x29d)](_0x14d792(0x2cb))[_0x14d792(0x261)](_0x4d22ff)[_0x14d792(0x2ae)]();});}async function updateCoinResults(_0x288b20,_0x5d095d=![]){const _0x171827=_0x2c8b62;let _0x53e566,_0x4a5525,_0x19b9ef,_0x5b7d96,_0x2b8ab1,_0x50379d,_0x50b900=dbCoinResults['get'](_0x171827(0x2cb))[_0x171827(0x298)]({'coin':_0x288b20['coin']})[_0x171827(0x1ed)]();!_0x50b900&&await initCoinResults();_0x288b20[_0x171827(0x1e7)]&&(_0x50379d={'filled':_0x288b20[_0x171827(0x1e1)]*_0x288b20[_0x171827(0x1c9)],'amount':_0x288b20[_0x171827(0x1e1)]*_0x288b20[_0x171827(0x1c9)],'side':_0x288b20[_0x171827(0x322)]==_0x171827(0x317)?_0x171827(0x1eb):'sell','price':0x1/_0x288b20[_0x171827(0x1c9)]},_0x288b20={..._0x288b20,..._0x50379d});_0x5d095d?_0x4a5525=_0x288b20[_0x171827(0x322)]==_0x171827(0x1eb)?_0x50b900[_0x171827(0x1e8)]+_0x288b20[_0x171827(0x1e1)]:_0x50b900[_0x171827(0x1e8)]-_0x288b20['filled']:_0x4a5525=await getCoinNumber(_0x288b20[_0x171827(0x1c5)]);if(_0x288b20[_0x171827(0x2c4)]&&_0x288b20[_0x171827(0x2c4)][_0x171827(0x1c4)]==config['basecoin'])_0x53e566=_0x288b20[_0x171827(0x2c4)][_0x171827(0x2a8)];else{if(_0x288b20[_0x171827(0x2c4)]&&_0x288b20[_0x171827(0x2c4)]['currency']==_0x171827(0x2b8)&&!_0x5d095d)_0x53e566=_0x288b20['fee']['cost']*global[_0x171827(0x296)][_0x171827(0x2b8)+config[_0x171827(0x2a7)]];else _0x53e566=defaultFee*_0x288b20[_0x171827(0x1e1)]*_0x288b20[_0x171827(0x1c9)];}_0x288b20[_0x171827(0x322)]=='buy'?(_0x19b9ef=_0x4a5525!=0x0?(_0x50b900[_0x171827(0x1fc)]*_0x50b900[_0x171827(0x1e8)]+_0x288b20['price']*(_0x4a5525-_0x50b900[_0x171827(0x1e8)])+_0x53e566)/_0x4a5525:0x0,_0x5b7d96=_0x50b900[_0x171827(0x207)]):(_0x19b9ef=_0x4a5525!=0x0?(_0x50b900[_0x171827(0x1fc)]*_0x50b900['number']-_0x288b20[_0x171827(0x1c9)]*(_0x50b900[_0x171827(0x1e8)]-_0x4a5525)+_0x53e566)/_0x4a5525:0x0,_0x5b7d96=_0x50b900[_0x171827(0x207)]+(_0x288b20[_0x171827(0x1c9)]-_0x50b900['breakeven'])*_0x288b20['filled']);_0x2b8ab1=(_0x288b20['price']-_0x19b9ef-_0x53e566/_0x288b20[_0x171827(0x1e1)])*_0x4a5525;let _0x2a1f88={'coin':_0x288b20[_0x171827(0x1c5)],'number':_0x4a5525,'breakeven':formatResult(_0x19b9ef,0x8),'realized':formatResult(_0x5b7d96,0x8),'unrealized':formatResult(_0x2b8ab1,0x8),'fees':formatResult(_0x50b900[_0x171827(0x281)]+_0x53e566,0x8),'sells':_0x288b20[_0x171827(0x322)]==_0x171827(0x317)?_0x50b900[_0x171827(0x326)]+0x1:_0x50b900[_0x171827(0x326)],'buys':_0x288b20[_0x171827(0x322)]==_0x171827(0x1eb)?_0x50b900[_0x171827(0x2d8)]+0x1:_0x50b900[_0x171827(0x2d8)]};dbCoinResults[_0x171827(0x29d)](_0x171827(0x2cb))[_0x171827(0x298)]({'coin':_0x288b20[_0x171827(0x1c5)]})[_0x171827(0x1d1)](_0x2a1f88)[_0x171827(0x2ae)]();if(!_0x5d095d){if(_0x288b20['fee']&&_0x288b20[_0x171827(0x2c4)][_0x171827(0x1c4)]==_0x171827(0x2b8)){const _0x4a8617=currentCoins[_0x171827(0x298)](_0x4d6cab=>_0x4d6cab['coin']=='BNB');if(_0x4a8617){let _0x15131e=dbCoinResults[_0x171827(0x29d)](_0x171827(0x2cb))[_0x171827(0x298)]({'coin':'BNB'})[_0x171827(0x1ed)]();_0x2a1f88={..._0x15131e,'number':_0x4a8617[_0x171827(0x1e8)]},dbCoinResults[_0x171827(0x29d)](_0x171827(0x2cb))[_0x171827(0x298)]({'coin':_0x171827(0x2b8)})[_0x171827(0x1d1)](_0x2a1f88)[_0x171827(0x2ae)]();}}}}async function placeOrder(_0x535825){const _0x125121=_0x2c8b62,_0x23ac66=config[_0x125121(0x29a)]==_0x125121(0x306)?_0x125121(0x306):'limit';if(lockOrders==ORDERS[_0x125121(0x2df)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x125121(0x2ac)],allOrdersPlaced=![],validateOrdersState=_0x125121(0x2ab);let _0x146a8d=![];lastOrders=[];for(const _0x137988 of _0x535825){let _0x36c9a8,_0x536172,_0x367485,_0x5da27b,_0x1fc6c7,_0x14c500=_0x137988[_0x125121(0x24f)];try{const _0xf5bc10=await exchange[_0x125121(0x27d)](_0x14c500);_0x36c9a8=_0x137988[_0x125121(0x1e7)]?0x1/_0x137988[_0x125121(0x1f2)]:_0x137988[_0x125121(0x1f2)],_0x536172=_0xf5bc10[_0x125121(0x268)],_0x367485=_0xf5bc10[_0x125121(0x1e6)];_0x137988[_0x125121(0x1e7)]?(_0x5da27b=_0x137988[_0x125121(0x322)]==_0x125121(0x1eb)?'sell':_0x125121(0x1eb),_0x1fc6c7=Math[_0x125121(0x26a)](_0x137988[_0x125121(0x2b6)])/_0x36c9a8):(_0x5da27b=_0x137988[_0x125121(0x322)],_0x1fc6c7=Math[_0x125121(0x26a)](_0x137988[_0x125121(0x2b6)]));_0x23ac66==_0x125121(0x209)&&(config[_0x125121(0x29a)]=='limit-high'&&(_0x36c9a8=_0x5da27b==_0x125121(0x1eb)?_0x536172:_0x367485),config['ordertype']==_0x125121(0x300)&&(_0x36c9a8=_0x5da27b==_0x125121(0x1eb)?_0x367485:_0x536172));_0x1fc6c7=formatResult(_0x1fc6c7,0x8),_0x36c9a8=formatResult(_0x36c9a8,0x8);const _0x31247c=_0x5da27b==_0x125121(0x317)?config[_0x125121(0x222)]?String[_0x125121(0x2b9)]('0x'+config[_0x125121(0x222)])+'\x20':'':config['emojibuy']?String[_0x125121(0x2b9)]('0x'+config['emojibuy'])+'\x20':'',_0x435e2c=_0x23ac66=='market'?_0x125121(0x2c5):config[_0x125121(0x29a)]==_0x125121(0x27a)?'Limit\x20(high-margin)':_0x125121(0x1f3),_0x1c3673=new Date()[_0x125121(0x1ea)]()['toString']()['slice'](-0x6)+'-'+Math['random']()['toString']()[_0x125121(0x2d6)](-0x6);lastOrders['push']({'customId':_0x1c3673,'symbol':_0x14c500,'coin':_0x137988[_0x125121(0x1c5)],'side':_0x5da27b,'reverse':_0x137988['reverse'],'filled':0x0});if(_0x23ac66==_0x125121(0x306))logHistory(_0x125121(0x263),''+_0x31247c+_0x435e2c+_0x125121(0x23f)+_0x14c500+'\x20'+_0x5da27b+'\x20#'+formatResult(_0x1fc6c7,0x8)+'\x20@'+formatResult(_0x36c9a8,0x8));else logHistory('order',''+_0x31247c+_0x435e2c+_0x125121(0x23f)+_0x14c500+'\x20'+_0x5da27b+'\x20#'+formatResult(_0x1fc6c7,0x8)+'\x20@'+formatResult(_0x36c9a8,0x8));const _0x705477=await exchange[_0x125121(0x2a0)](_0x14c500,_0x23ac66,_0x5da27b,_0x1fc6c7,_0x36c9a8,{'clientOrderId':_0x1c3673}),_0xb61b91=lastOrders[_0x125121(0x336)]-0x1;_0xb61b91>=0x0&&lastOrders[_0xb61b91][_0x125121(0x2cf)]==_0x1c3673&&(lastOrders[_0xb61b91]={...lastOrders[_0xb61b91],'orderId':_0x705477['id'],'amount':_0x705477[_0x125121(0x330)],'price':_0x705477[_0x125121(0x1c9)],'fee':_0x705477[_0x125121(0x2c4)]});if(config[_0x125121(0x224)]!=0x0){let _0x3c91b9=null;if(cooldownTracker[_0x125121(0x336)]==config[_0x125121(0x224)]-0x1)_0x3c91b9=cooldownTracker['shift']();const _0x46002f=getTimeStamp();cooldownTracker[_0x125121(0x261)](_0x46002f);if(_0x3c91b9){const _0x24c802=fns[_0x125121(0x248)](new Date(_0x46002f),new Date(_0x3c91b9));if(_0x24c802<cooldownInterval){logHistory(_0x125121(0x2a5),'Executed\x20'+config['cooldown']+_0x125121(0x2d2)+cooldownInterval/0x3c+_0x125121(0x310)+cooldownPeriod/(0xe10*0x3e8)+_0x125121(0x2aa)),coolingDown=!![];break;}}}}catch(_0x2b78f4){if(_0x2b78f4['toString']()[_0x125121(0x234)](_0x125121(0x22f)))lastOrders=lastOrders[_0x125121(0x26f)](_0x1cc07f=>_0x1cc07f[_0x125121(0x24f)]!=_0x14c500),logHistory(_0x125121(0x2a5),_0x125121(0x2a9)+_0x14c500),_0x146a8d=!![];else{if(_0x2b78f4[_0x125121(0x323)]()[_0x125121(0x234)](_0x125121(0x28e)))lastOrders=lastOrders[_0x125121(0x26f)](_0xd1f24=>_0xd1f24[_0x125121(0x24f)]!=_0x14c500),logHistory('error',_0x125121(0x214)+_0x14c500),_0x146a8d=!![];else _0x2b78f4['toString']()['includes'](_0x125121(0x26c))?(lastOrders=lastOrders[_0x125121(0x26f)](_0x333249=>_0x333249[_0x125121(0x24f)]!=_0x14c500),logHistory(_0x125121(0x2a5),_0x125121(0x2a9)+_0x14c500),_0x146a8d=!![]):(lastOrders=lastOrders[_0x125121(0x26f)](_0x71dc01=>_0x71dc01[_0x125121(0x24f)]!=_0x14c500),await handleError(_0x2b78f4,_0x125121(0x257),_0x14c500));}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x125121(0x336)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x28546c=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x125121(0x1e5)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2decaf=_0x125121;validateOrders(_0x2decaf(0x1f4));},_0x28546c);}else unlockOrders();_0x146a8d&&config[_0x125121(0x312)]&&await pauseBot(_0x125121(0x2fe)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x125121(0x262)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x125121(0x2e8));else lockOrders!=ORDERS[_0x125121(0x2df)]&&(!config['headless']&&(config[_0x125121(0x29a)]==_0x125121(0x306)?logHistory(_0x125121(0x2a5),_0x125121(0x2a4)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x97b35b){const _0x239fe4=_0x2c8b62,_0xd2e733={...config,'openOrders':_0x97b35b};let _0x5b55f9=dbConfig[_0x239fe4(0x29d)](_0x239fe4(0x2bc))[_0x239fe4(0x298)]({'botID':botID})['value']();_0x5b55f9&&dbConfig['get'](_0x239fe4(0x2bc))[_0x239fe4(0x298)]({'botID':botID})[_0x239fe4(0x1d1)](_0xd2e733)['write']();}function restoreOrders(){const _0x27a2be=_0x2c8b62;let _0x22aa48;config[_0x27a2be(0x21d)]&&allOpenOrders[_0x27a2be(0x20b)](_0x349deb=>{const _0x60f9a7=_0x27a2be,_0x340693=config[_0x60f9a7(0x21d)][_0x60f9a7(0x298)](_0x547fea=>_0x547fea[_0x60f9a7(0x2be)]==_0x349deb['id']);_0x340693&&(lastOrders[_0x60f9a7(0x261)](_0x340693),_0x22aa48=_0x349deb[_0x60f9a7(0x2f8)]);});if(lastOrders[_0x27a2be(0x336)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x27a2be(0x1c7),allOrdersPlaced=!![];const _0x4c0be5=new Date()[_0x27a2be(0x1ea)](),_0x8fe33=config[_0x27a2be(0x29a)]==_0x27a2be(0x306)?validateOrderTimeout*0x3c*0x3e8:config[_0x27a2be(0x1e5)]*0x3c*0x3e8;if(_0x22aa48+_0x8fe33>_0x4c0be5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x50213b=_0x27a2be;validateOrders(_0x50213b(0x1f4));},_0x22aa48+_0x8fe33-_0x4c0be5);}else validateOrders(_0x27a2be(0x1f4));}}async function sendMetricsTelegram(){const _0x6f5dbb=_0x2c8b62;if(!coinsLoaded){process['send']({'telegrammsg':_0x6f5dbb(0x221)},_0x47497a=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1e6fbc='';if(config[_0x6f5dbb(0x31c)])_0x1e6fbc=_0x6f5dbb(0x27e)+config[_0x6f5dbb(0x21f)]+_0x6f5dbb(0x302);else _0x1e6fbc=_0x6f5dbb(0x2eb)+botID+_0x6f5dbb(0x302);const _0x3e3270=getKPIs(_0x6f5dbb(0x2a7)),_0xe72026=getKPIs('fiat',config['fiat']),_0x2bd023=getKPIs('net-basecoin'),_0x99fdbc=getKPIs(_0x6f5dbb(0x2bf),config[_0x6f5dbb(0x31a)]);_0x1e6fbc+=_0x6f5dbb(0x253),_0x1e6fbc+=_0x3e3270[_0x6f5dbb(0x304)]+_0x6f5dbb(0x1c2)+_0x3e3270[_0x6f5dbb(0x1ed)]+'\x0a',_0x1e6fbc+=_0x3e3270[_0x6f5dbb(0x31e)]+':\x20'+_0x3e3270[_0x6f5dbb(0x2d7)]+'%\x0a',_0x1e6fbc+=_0xe72026['leftTxt']+_0x6f5dbb(0x1c2)+_0xe72026[_0x6f5dbb(0x1ed)]+'\x0a',_0x1e6fbc+=_0xe72026[_0x6f5dbb(0x31e)]+':\x20'+_0xe72026[_0x6f5dbb(0x2d7)]+'%\x0a',_0x1e6fbc+=_0x2bd023['leftTxt']+':\x20'+_0x2bd023[_0x6f5dbb(0x1ed)]+'\x20('+config['basecoin']+')\x0a',_0x1e6fbc+=_0x2bd023[_0x6f5dbb(0x31e)]+':\x20'+_0x2bd023[_0x6f5dbb(0x2d7)]+_0x6f5dbb(0x1d7)+config[_0x6f5dbb(0x2a7)]+')\x0a',_0x1e6fbc+=_0x99fdbc[_0x6f5dbb(0x304)]+':\x20'+_0x99fdbc[_0x6f5dbb(0x1ed)]+'\x20('+config[_0x6f5dbb(0x31a)]+')\x0a',_0x1e6fbc+=_0x99fdbc[_0x6f5dbb(0x31e)]+':\x20'+_0x99fdbc['change']+_0x6f5dbb(0x1d7)+config['fiat']+')\x0a',_0x1e6fbc+=_0x6f5dbb(0x216),process[_0x6f5dbb(0x2b2)]({'telegrammsg':_0x1e6fbc},_0x1eac56=>{});}async function sendPortfolioTelegram(){const _0x129fc0=_0x2c8b62;if(!coinsLoaded){process[_0x129fc0(0x2b2)]({'telegrammsg':_0x129fc0(0x221)},_0x557f1c=>{});return;}let _0x38a911='';if(config[_0x129fc0(0x31c)])_0x38a911=_0x129fc0(0x27e)+config[_0x129fc0(0x21f)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x38a911=_0x129fc0(0x2eb)+botID+_0x129fc0(0x276);_0x38a911+=_0x129fc0(0x253),_0x38a911+='-------------------------------\x0a',_0x38a911+=_0x129fc0(0x325),_0x38a911+='-------------------------------\x0a',currentCoins[_0x129fc0(0x20b)](_0x12d4dc=>{const _0x28fe3c=_0x129fc0;_0x38a911+=_0x12d4dc['coin'][_0x28fe3c(0x33a)](0x7)+'|\x20'+formatPad(_0x12d4dc[_0x28fe3c(0x242)],0x2,0x6)+'|\x20'+formatPad(_0x12d4dc[_0x28fe3c(0x2ba)],0x2,0x6)+'|\x20'+formatPad(_0x12d4dc[_0x28fe3c(0x1de)]*0x64,0x2,0x6)+'\x0a';}),_0x38a911+=_0x129fc0(0x216),process[_0x129fc0(0x2b2)]({'telegrammsg':_0x38a911},_0x180f3a=>{});}function _0x1a81(_0x3a7f4a,_0x4c404b){const _0x410ccd=_0x1921();return _0x1a81=function(_0x1b9b13,_0x295140){_0x1b9b13=_0x1b9b13-0x1bd;let _0x192107=_0x410ccd[_0x1b9b13];return _0x192107;},_0x1a81(_0x3a7f4a,_0x4c404b);}function formatPad(_0x4dfdf5,_0x6a874,_0x445663){const _0x5d60cd=_0x2c8b62,_0x4001f3=formatResultString(_0x4dfdf5,_0x6a874);return _0x4001f3?_0x4001f3[_0x5d60cd(0x269)](_0x445663):''['padStart'](_0x445663);}function logHistory(_0x3b8fa7,_0x3f0d30,_0x4bf781=''){const _0x52bafa=_0x2c8b62;let _0x534781={'time':getTimeStamp(),'type':_0x3b8fa7,'event':_0x3f0d30};dbLogs[_0x52bafa(0x29d)](_0x52bafa(0x30d))['push'](_0x534781)[_0x52bafa(0x2ae)]();if(_0x4bf781=='')_0x4bf781=_0x3f0d30;proxyEmit('event',{'log':_0x534781,'summary':_0x4bf781}),process[_0x52bafa(0x2b2)]({'telegram':{..._0x534781,'botname':config[_0x52bafa(0x21f)],'showname':config[_0x52bafa(0x31c)]}},_0x53bed4=>{}),logger[_0x52bafa(0x284)](''+_0x534781[_0x52bafa(0x311)]);}function emitHistory(_0x2d8ffe={}){const _0x442ba1=_0x2c8b62;Object[_0x442ba1(0x24d)](_0x2d8ffe)['length']==0x0&&(_0x2d8ffe={'type':['order','event'],'event':'','page':0x1});if(_0x2d8ffe[_0x442ba1(0x2c3)][_0x442ba1(0x234)]('event'))_0x2d8ffe[_0x442ba1(0x2c3)]['splice'](_0x2d8ffe[_0x442ba1(0x2c3)]['indexOf'](_0x442ba1(0x311)),0x1,_0x442ba1(0x2a5),_0x442ba1(0x307),_0x442ba1(0x21e));if(dbLogs[_0x442ba1(0x232)](_0x442ba1(0x30d))[_0x442ba1(0x1ed)]()){let _0x1b6448=dbLogs[_0x442ba1(0x29d)](_0x442ba1(0x30d))[_0x442ba1(0x26f)](_0x1e1617=>{const _0x75a1ac=_0x442ba1;if(_0x2d8ffe['type'][_0x75a1ac(0x336)]==0x0)return![];else return _0x2d8ffe['type'][_0x75a1ac(0x234)](_0x1e1617[_0x75a1ac(0x2c3)]);})[_0x442ba1(0x26f)](_0x7674d1=>{const _0x439bee=_0x442ba1;if(_0x2d8ffe[_0x439bee(0x311)]=='')return!![];else return _0x7674d1[_0x439bee(0x311)][_0x439bee(0x1c6)]()[_0x439bee(0x234)](_0x2d8ffe[_0x439bee(0x311)][_0x439bee(0x1c6)]());})[_0x442ba1(0x30a)]('time'),_0xf39a1c=_0x1b6448['value']()[_0x442ba1(0x336)];_0x1b6448=_0x1b6448['reverse']()[_0x442ba1(0x2d6)]((_0x2d8ffe[_0x442ba1(0x21b)]-0x1)*logPageSize,_0x2d8ffe[_0x442ba1(0x21b)]*logPageSize-0x1)['reverse']()[_0x442ba1(0x1ed)](),proxyEmit(_0x442ba1(0x1e2),{'logs':_0x1b6448,'total':_0xf39a1c});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x10fb69){const _0x16f19e=_0x2c8b62;if(dbLogs[_0x16f19e(0x232)]('logs')[_0x16f19e(0x1ed)]()){const _0x21da8d=dbLogs[_0x16f19e(0x29d)](_0x16f19e(0x30d))[_0x16f19e(0x30a)]('time')[_0x16f19e(0x26f)](_0x50a40e=>{const _0x484118=_0x16f19e;return _0x50a40e[_0x484118(0x2c3)]==_0x484118(0x263);})['value']();dbLogs['get'](_0x16f19e(0x30d))[_0x16f19e(0x1e3)]()['write'](),dbLogs[_0x16f19e(0x29d)](_0x16f19e(0x30d))[_0x16f19e(0x1d1)](_0x21da8d)[_0x16f19e(0x2ae)](),emitHistory(_0x10fb69);}}async function pauseBot(_0x35cc00=''){const _0x5082b=_0x2c8b62,_0x593a44=new Date()[_0x5082b(0x1ea)]();if(!lastErrorShown||_0x593a44-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x593a44;!lastBotPause?(lastBotPause=_0x593a44,consecutivePauses=0x1):(_0x593a44-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x5082b(0x2b2)]({'stop':_0x5082b(0x20d)},_0x2eb94c=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x5082b(0x1ea)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x35cc00)_0x35cc00+=_0x5082b(0x288);logHistory(_0x5082b(0x2a5),_0x35cc00+_0x5082b(0x1db)+pauseBotInterval/0xea60+_0x5082b(0x20f)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5be13c=_0x2c8b62;process['send']({'stop':_0x5be13c(0x23b)},_0x2d2f59=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2570a5,_0x186b1c){const _0x4040b6=_0x2c8b62;if(_0x2570a5['toString']()[_0x4040b6(0x234)](_0x4040b6(0x1dd)))return logHistory(_0x4040b6(0x2a5),config['exchange']+_0x4040b6(0x1ee)),![];else{if(_0x2570a5[_0x4040b6(0x323)]()[_0x4040b6(0x234)](_0x4040b6(0x1d5)))return logHistory(_0x4040b6(0x2a5),config['exchange']+_0x4040b6(0x256)),![];else{if(_0x2570a5[_0x4040b6(0x323)]()[_0x4040b6(0x234)](_0x4040b6(0x23a)))return logHistory(_0x4040b6(0x2a5),config[_0x4040b6(0x2d0)]+_0x4040b6(0x32e)),logHistory(_0x4040b6(0x2a5),_0x4040b6(0x226)),![];else await handleError(_0x2570a5,_0x186b1c);}}}async function handleError(_0x10ded4,_0x280306,_0x2a2e39=''){const _0x54dbfb=_0x2c8b62,_0x3e4fdf=config['exchange']||_0x54dbfb(0x2ad);if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x1e9)))await pauseBot(config['exchange']+_0x54dbfb(0x1f1));else{if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)]('ExchangeNotAvailable'))await pauseBot(config[_0x54dbfb(0x2d0)]+_0x54dbfb(0x26e));else{if(_0x10ded4[_0x54dbfb(0x323)]()['includes']('RequestTimeout'))await pauseBot(config[_0x54dbfb(0x2d0)]+_0x54dbfb(0x239));else{if(_0x10ded4[_0x54dbfb(0x323)]()['includes'](_0x54dbfb(0x24e)))await pauseBot(config[_0x54dbfb(0x2d0)]+_0x54dbfb(0x25b));else{if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x1f8)))logHistory(_0x54dbfb(0x2a5),_0x280306+_0x54dbfb(0x2da)),logHistory(_0x54dbfb(0x2a5),_0x54dbfb(0x316)),await killBot();else{if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x2f9)))logHistory(_0x54dbfb(0x2a5),_0x280306+_0x54dbfb(0x210)),logHistory('error',_0x54dbfb(0x316)),await killBot();else{if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x1dd)))logHistory(_0x54dbfb(0x2a5),_0x280306+_0x54dbfb(0x288)+config['exchange']+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x54dbfb(0x2a5),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x10ded4['toString']()['includes'](_0x54dbfb(0x1d5)))logHistory(_0x54dbfb(0x2a5),_0x280306+_0x54dbfb(0x288)+config['exchange']+_0x54dbfb(0x28b)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x23a)))logHistory(_0x54dbfb(0x2a5),_0x280306+_0x54dbfb(0x288)+config[_0x54dbfb(0x2d0)]+_0x54dbfb(0x295)),logHistory('error',_0x54dbfb(0x316)),await killBot();else _0x10ded4[_0x54dbfb(0x323)]()[_0x54dbfb(0x234)](_0x54dbfb(0x20a))?logHistory(_0x54dbfb(0x2a5),_0x280306+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2a2e39):(logger['full'](_0x280306+_0x54dbfb(0x1d6),_0x10ded4),await pauseBot(_0x54dbfb(0x33b)));}}}}}}}}}function formatResult(_0x1c5766,_0x5895cd){const _0x3d71a8=_0x2c8b62;return parseFloat(_0x1c5766[_0x3d71a8(0x2c2)](_0x5895cd));}function formatResultTruncate(_0x55878b,_0x16ca3f){const _0x5ef9e7=_0x2c8b62;let _0x246730=formatResultString(_0x55878b,0xa),_0xb53938=_0x246730[_0x5ef9e7(0x28d)]('.');return _0xb53938!=-0x1&&(_0x246730=_0x246730[_0x5ef9e7(0x2d6)](0x0,_0xb53938+_0x16ca3f+0x1)),Number(_0x246730);}function formatResultString(_0x2d9b82,_0x2dfc71){const _0x583c23=_0x2c8b62;let _0x598158;if(!(''+_0x2d9b82)['includes']('e'))_0x598158=+(Math['round'](_0x2d9b82+'e+'+_0x2dfc71)+'e-'+_0x2dfc71);else{let _0x3e3a10=(''+_0x2d9b82)[_0x583c23(0x240)]('e'),_0x1cef03='';+_0x3e3a10[0x1]+_0x2dfc71>0x0&&(_0x1cef03='+'),_0x598158=+(Math[_0x583c23(0x2fd)](+_0x3e3a10[0x0]+'e'+_0x1cef03+(+_0x3e3a10[0x1]+_0x2dfc71))+'e-'+_0x2dfc71);}return Number(_0x598158)[_0x583c23(0x2c2)](_0x2dfc71);}function getServerTime(){const _0x1c5239=_0x2c8b62,_0x5b4cd4=new Date();return _0x5b4cd4[_0x1c5239(0x265)]()+'/'+(_0x5b4cd4[_0x1c5239(0x1f7)]()+0x1)[_0x1c5239(0x323)]()[_0x1c5239(0x269)](0x2,'0')+'/'+_0x5b4cd4['getDate']()[_0x1c5239(0x323)]()[_0x1c5239(0x269)](0x2,'0')+'\x20'+_0x5b4cd4[_0x1c5239(0x20e)]()['toString']()[_0x1c5239(0x269)](0x2,'0')+':'+_0x5b4cd4[_0x1c5239(0x280)]()[_0x1c5239(0x323)]()[_0x1c5239(0x269)](0x2,'0')+':'+_0x5b4cd4[_0x1c5239(0x1bd)]()[_0x1c5239(0x323)]()[_0x1c5239(0x269)](0x2,'0');}function getTimeStamp(){const _0x57d035=_0x2c8b62,_0x2c13ee=shiftedTime();return _0x2c13ee['getFullYear']()+'/'+(_0x2c13ee[_0x57d035(0x1f7)]()+0x1)[_0x57d035(0x323)]()[_0x57d035(0x269)](0x2,'0')+'/'+_0x2c13ee['getDate']()[_0x57d035(0x323)]()[_0x57d035(0x269)](0x2,'0')+'\x20'+_0x2c13ee[_0x57d035(0x20e)]()[_0x57d035(0x323)]()[_0x57d035(0x269)](0x2,'0')+':'+_0x2c13ee['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x2c13ee[_0x57d035(0x1bd)]()['toString']()[_0x57d035(0x269)](0x2,'0');}function getDate(){const _0x352e1d=_0x2c8b62,_0x587b85=shiftedTime();return _0x587b85[_0x352e1d(0x265)]()+'/'+(_0x587b85[_0x352e1d(0x1f7)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x587b85[_0x352e1d(0x28f)]()[_0x352e1d(0x323)]()[_0x352e1d(0x269)](0x2,'0');}function getHour(){const _0x3f96c4=_0x2c8b62,_0x5ac72d=shiftedTime();return _0x5ac72d[_0x3f96c4(0x20e)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x40b4f7){return new Promise(_0xc79cca=>setTimeout(_0xc79cca,_0x40b4f7));}function shiftedTime(){const _0x3073c4=_0x2c8b62,_0x2defe8=new Date();let _0x1fc167=_0x2defe8;if(config&&config['timeshift']!==0x0)_0x1fc167=fns['add'](_0x2defe8,{'hours':config[_0x3073c4(0x215)]});return _0x1fc167;}function timer(_0x101a19){const _0x1ee63f=_0x2c8b62,_0x203cc9=new Date();!lasttime?console[_0x1ee63f(0x2d4)](getTimeStamp()+_0x1ee63f(0x32a),_0x101a19,_0x203cc9):console[_0x1ee63f(0x2d4)](getTimeStamp()+':\x20timer\x20>',_0x101a19,(_0x203cc9-lasttime)/0x3e8),lasttime=_0x203cc9;}