const _0x12cff9=_0x3b31;(function(_0x1f9959,_0x3c4bd3){const _0x40b13b=_0x3b31,_0x46b9b1=_0x1f9959();while(!![]){try{const _0xf5334f=parseInt(_0x40b13b(0x1c4))/0x1*(parseInt(_0x40b13b(0x1a4))/0x2)+parseInt(_0x40b13b(0x1a6))/0x3*(parseInt(_0x40b13b(0x124))/0x4)+parseInt(_0x40b13b(0x1e5))/0x5+-parseInt(_0x40b13b(0x1e1))/0x6*(-parseInt(_0x40b13b(0x131))/0x7)+parseInt(_0x40b13b(0x1b7))/0x8*(-parseInt(_0x40b13b(0x217))/0x9)+parseInt(_0x40b13b(0x1bb))/0xa*(parseInt(_0x40b13b(0x214))/0xb)+-parseInt(_0x40b13b(0x133))/0xc;if(_0xf5334f===_0x3c4bd3)break;else _0x46b9b1['push'](_0x46b9b1['shift']());}catch(_0x1579af){_0x46b9b1['push'](_0x46b9b1['shift']());}}}(_0x3a8b,0x19540));const _0x252332=function(){let _0x3bdd60=!![];return function(_0xe02ba2,_0x5b67b9){const _0x50fe0f=_0x3bdd60?function(){const _0x1a7ed6=_0x3b31;if(_0x5b67b9){const _0x5f20f8=_0x5b67b9[_0x1a7ed6(0x1de)](_0xe02ba2,arguments);return _0x5b67b9=null,_0x5f20f8;}}:function(){};return _0x3bdd60=![],_0x50fe0f;};}(),_0x367d7d=_0x252332(this,function(){const _0x377405=_0x3b31;return _0x367d7d[_0x377405(0x148)]()['search'](_0x377405(0x20a))[_0x377405(0x148)]()['constructor'](_0x367d7d)[_0x377405(0x207)](_0x377405(0x20a));});_0x367d7d();'use strict';const ccxt=require(_0x12cff9(0x1f2)),low=require(_0x12cff9(0x18e)),FileSync=require(_0x12cff9(0x20e)),fs=require('fs'),fns=require(_0x12cff9(0x1a7)),{WebsocketClient,DefaultLogger}=require(_0x12cff9(0x1dd)),Crypt=require(_0x12cff9(0x215))[_0x12cff9(0x136)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderChecks=0x3c*0x3c*0x3e8/validateOrderInterval;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x12cff9(0x211))[_0x12cff9(0x165)],botID=process['argv'][0x2]||_0x12cff9(0x125),pattern=/^[0-9]{3}$/;if(!pattern[_0x12cff9(0x1b2)](botID))return console[_0x12cff9(0x1cb)](_0x12cff9(0x1a5)+botID+_0x12cff9(0x15f)),process[_0x12cff9(0x153)](0x1);const configpath=_0x12cff9(0x161);!fs[_0x12cff9(0x1fd)](configpath)&&fs[_0x12cff9(0x181)](configpath);const configfile=configpath+_0x12cff9(0x13b)+botID+_0x12cff9(0x17b),logfile=configpath+_0x12cff9(0x13b)+botID+'-events.json',performancefile=configpath+_0x12cff9(0x13b)+botID+'-performance.json',coinresultsfile=configpath+_0x12cff9(0x13b)+botID+_0x12cff9(0x141),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x12cff9(0x1db)]({'logs':[]})[_0x12cff9(0x1fc)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x12cff9(0x1db)]({'data':[]})[_0x12cff9(0x1fc)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x12cff9(0x1db)]({'bot':[]})[_0x12cff9(0x1fc)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x12cff9(0x1db)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x12cff9(0x19c),'symbol':_0x12cff9(0x196)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x228fe2)=>{},'debug':(..._0x171892)=>{},'notice':(..._0x13de36)=>{},'info':(..._0x152d33)=>{},'warning':(..._0x18447b)=>{},'error':async function(..._0xcafb35){const _0x2e342e=_0x12cff9,_0x49983d=new Date()[_0x2e342e(0x1d3)]();(!lastErrorShown||_0x49983d-lastErrorShown>=pauseBotInterval)&&(lastErrorShown=new Date()['getTime'](),logHistory(_0x2e342e(0x152),_0x2e342e(0x17e)),logging('WebSockets()\x20|\x20Error\x20details:\x20',_0xcafb35[0x0]+':\x20'+_0xcafb35[0x1]['error']['message']),await pauseBot(pauseBotInterval));}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x12cff9(0x1c7)]&&updateTimeshift(settings[_0x12cff9(0x1c7)]);process[_0x12cff9(0x1ec)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x58505b,_0x49a4ab=null){const _0x3a7297=_0x12cff9;process[_0x3a7297(0x1ec)]({'function':_0x58505b,'args':_0x49a4ab});}function initializeProcessListeners(){const _0x5c906e=_0x12cff9;process['on'](_0x5c906e(0x1ce),_0x489925=>{const _0x1d3ee7=_0x5c906e;switch(Object[_0x1d3ee7(0x139)](_0x489925)[0x0]){case _0x1d3ee7(0x1c7):_0x489925['timeshift']!=undefined&&(settings['timeshift']=_0x489925[_0x1d3ee7(0x1c7)],updateTimeshift(settings[_0x1d3ee7(0x1c7)]));break;case _0x1d3ee7(0x11e):switch(_0x489925[_0x1d3ee7(0x11e)]){case _0x1d3ee7(0x1d5):initclient();break;case'emitHistory':emitHistory(_0x489925[_0x1d3ee7(0x146)]);break;case _0x1d3ee7(0x151):getPortfolio(_0x489925['args']);break;case _0x1d3ee7(0x184):storeConfiguration(_0x489925[_0x1d3ee7(0x146)]);break;case'storeHeadless':storeHeadless(_0x489925[_0x1d3ee7(0x146)]);break;case _0x1d3ee7(0x158):getStartingBalances();break;case'placeOrder':placeOrder(_0x489925['args']);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xdbc651=_0x12cff9;if(pidBalances)clearTimeout(pidBalances);if(config[_0xdbc651(0x183)]!=''){await initExchange(config[_0xdbc651(0x183)],config[_0xdbc651(0x204)]);let _0x38e76b=await loadSymbols();_0x38e76b&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4f4c12,_0x2da144){const _0x5a7e01=_0x12cff9,_0x32f273=ccxt[config['exchange']];let _0x502bf8;switch(config[_0x5a7e01(0x197)]){case _0x5a7e01(0x1dd):_0x502bf8=_0x5a7e01(0x16e);break;case _0x5a7e01(0x1d2):_0x502bf8=_0x5a7e01(0x18f);break;default:_0x502bf8=_0x5a7e01(0x16e);}exchange=new _0x32f273({'apiKey':_0x4f4c12,'secret':_0x2da144,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4f4c12,'api_secret':_0x2da144,'beautify':!![],'wsUrl':_0x502bf8},logger),config[_0x5a7e01(0x197)]==_0x5a7e01(0x1d2)&&(stablecoins={'eur':{'coin':_0x5a7e01(0x202),'symbol':_0x5a7e01(0x1c3)},'usd':{'coin':'BTCUSDT','symbol':_0x5a7e01(0x180)}});}async function loadSymbols(){const _0x376e4e=_0x12cff9;let _0xde6afe;try{markets=await exchange[_0x376e4e(0x12c)](),allSymbols=exchange[_0x376e4e(0x1f7)][_0x376e4e(0x1d0)](_0x52ce49=>{const _0x11d1c4=_0x376e4e;return _0x52ce49[_0x11d1c4(0x156)]('BTC')&&!_0x52ce49[_0x11d1c4(0x156)](_0x11d1c4(0x178));}),_0xde6afe=!![];}catch(_0x3c0503){await handleError(_0x3c0503,_0x376e4e(0x19d)),_0xde6afe=![];}return _0xde6afe;}async function initbot(){const _0x2461bd=_0x12cff9;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x5e54f0=dbCoinResults[_0x2461bd(0x1a2)](_0x2461bd(0x1f9))[_0x2461bd(0x1a1)]();if(_0x5e54f0[_0x2461bd(0x174)]==0x0)await resetCoinResults();}async function initclient(){const _0x2655be=_0x12cff9;proxyEmit(_0x2655be(0x1f0),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x361c4e=_0x12cff9;wsinitialized=![];ws1&&(ws1[_0x361c4e(0x1ee)](_0x3c2992=>{const _0x440102=_0x361c4e;try{wsClient[_0x440102(0x1fb)](_0x3c2992);}catch(_0x4c2973){}}),ws1=[]);if(ws2){try{wsClient[_0x361c4e(0x1fb)](ws2);}catch(_0x2cce8c){}ws2=null;}}async function initws(){const _0x4819c5=_0x12cff9;cleanws();let _0x527cf4=[];currentCoins['forEach'](_0xe4f753=>{const _0x5886ba=_0x3b31;if(_0xe4f753[_0x5886ba(0x145)]!='BTC')_0x527cf4[_0x5886ba(0x13f)](noslash(_0xe4f753[_0x5886ba(0x15d)]));});if(!_0x527cf4[_0x4819c5(0x156)](stablecoins[_0x4819c5(0x1b4)][_0x4819c5(0x145)]))_0x527cf4[_0x4819c5(0x13f)](stablecoins[_0x4819c5(0x1b4)][_0x4819c5(0x145)]);if(!_0x527cf4[_0x4819c5(0x156)](stablecoins[_0x4819c5(0x20c)][_0x4819c5(0x145)]))_0x527cf4[_0x4819c5(0x13f)](stablecoins['usd'][_0x4819c5(0x145)]);if(!_0x527cf4['includes']('BNBBTC'))_0x527cf4[_0x4819c5(0x13f)](_0x4819c5(0x212));try{_0x527cf4[_0x4819c5(0x1ee)]((_0x392f1a,_0x2332be)=>{const _0x2f04fe=_0x4819c5;ws1[_0x2332be]=wsClient[_0x2f04fe(0x1ba)](_0x392f1a,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x4819c5(0x1df),_0x33f348=>{const _0x208e59=_0x4819c5;if(!Array[_0x208e59(0x192)](_0x33f348)&&!_0x33f348[_0x208e59(0x154)][_0x208e59(0x156)]('userData')){if(_0x33f348[_0x208e59(0x1ad)]===_0x208e59(0x1a8)){global[_0x208e59(0x1d9)][_0x33f348['kline'][_0x208e59(0x15d)]]=_0x33f348[_0x208e59(0x1a8)][_0x208e59(0x116)];return;}}else{if(!Array['isArray'](_0x33f348)&&_0x33f348[_0x208e59(0x154)][_0x208e59(0x156)](_0x208e59(0x159))){if(_0x33f348[_0x208e59(0x1dc)][_0x208e59(0x156)](_0x208e59(0x167))){updateNumberCoins(_0x33f348);return;}}}}),wsClient['on'](_0x4819c5(0x1b8),async _0x1dcc0c=>{currentCoins=await getCoins();});}catch(_0x160ad6){await handleError(_0x160ad6,_0x4819c5(0x1b1));}let _0x187b66;while(_0x187b66!=currentCoins[_0x4819c5(0x174)]-0x1){_0x187b66=0x0,currentCoins[_0x4819c5(0x1ee)](_0x1bd89b=>{const _0x10a384=_0x4819c5;if(_0x1bd89b[_0x10a384(0x145)]!=_0x10a384(0x144)&&global[_0x10a384(0x1d9)][noslash(_0x1bd89b['symbol'])])_0x187b66++;});let _0x41806e=Math[_0x4819c5(0x13e)](_0x187b66/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x4819c5(0x1bf),_0x41806e),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x32d752=_0x12cff9;let _0x4628c7=0x0,_0x3a9090=0x0;try{_0x4628c7=global[_0x32d752(0x1d9)][stablecoins[_0x32d752(0x1b4)]['coin']],_0x3a9090=global[_0x32d752(0x1d9)][stablecoins[_0x32d752(0x20c)]['coin']];}catch(_0x595203){await handleError(_0x595203,_0x32d752(0x17c));}return{'eur':Number(_0x4628c7),'usd':Number(_0x3a9090)};}async function setStartDatePerformance(_0x5cfcdd){const _0x9e55c2=_0x12cff9,_0x24e20b=fns[_0x9e55c2(0x1a3)](new Date(_0x5cfcdd[_0x9e55c2(0x121)]),'yyyy/MM/dd');let _0x135860=[];_0x135860[stablecoins[_0x9e55c2(0x1b4)][_0x9e55c2(0x145)]]=await getCloses(stablecoins['eur'][_0x9e55c2(0x15d)],new Date(_0x5cfcdd[_0x9e55c2(0x121)]),0x1),_0x135860[stablecoins[_0x9e55c2(0x20c)]['coin']]=await getCloses(stablecoins[_0x9e55c2(0x20c)][_0x9e55c2(0x15d)],new Date(_0x5cfcdd[_0x9e55c2(0x121)]),0x1);let _0x431944,_0x55ae20=[];_0x5cfcdd[_0x9e55c2(0x1b6)][_0x9e55c2(0x1ee)](_0x4132d2=>{const _0x2ee100=_0x9e55c2;!_0x4132d2[_0x2ee100(0x203)]&&_0x55ae20['push']({'coin':_0x4132d2['coin'],'number':_0x4132d2[_0x2ee100(0x1c5)],'price':_0x4132d2[_0x2ee100(0x1c0)]});}),_0x431944={'date':_0x24e20b,'eur':_0x135860[stablecoins['eur'][_0x9e55c2(0x145)]][0x0],'usd':_0x135860[stablecoins[_0x9e55c2(0x20c)]['coin']][0x0],'coins':_0x55ae20};let _0x169eb0=dbPerformance[_0x9e55c2(0x1a2)](_0x9e55c2(0x1e3))[_0x9e55c2(0x17a)]({'date':_0x24e20b})[_0x9e55c2(0x1a1)]();_0x169eb0?dbPerformance['get'](_0x9e55c2(0x1e3))['find']({'date':_0x24e20b})[_0x9e55c2(0x1e0)](_0x431944)[_0x9e55c2(0x1fc)]():dbPerformance['get'](_0x9e55c2(0x1e3))[_0x9e55c2(0x13f)](_0x431944)[_0x9e55c2(0x1fc)](),_0x169eb0=dbPerformance[_0x9e55c2(0x1a2)]('data')[_0x9e55c2(0x205)](_0x9e55c2(0x16d))[_0x9e55c2(0x1a1)](),_0x169eb0[_0x9e55c2(0x1ee)](_0x39139a=>{const _0x491e86=_0x9e55c2;_0x39139a['date']<_0x24e20b&&dbPerformance[_0x491e86(0x1a2)](_0x491e86(0x1e3))[_0x491e86(0x162)]({'date':_0x39139a[_0x491e86(0x16d)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x6e62b7){const _0x5cada2=_0x12cff9;let _0x545d22,_0x5080a6=[];logHistory('success',_0x5cada2(0x15e)),_0x6e62b7[_0x5cada2(0x1b6)][_0x5cada2(0x1ee)](_0x2efd76=>{const _0x2f84e6=_0x5cada2;if(_0x2efd76['coin']!=_0x2f84e6(0x144)&&!_0x2efd76[_0x2f84e6(0x203)])_0x5080a6[_0x2f84e6(0x13f)]({'coin':_0x2efd76['coin'],'symbol':_0x2efd76[_0x2f84e6(0x15d)]});});let _0xe244d1=[];try{const _0x3324d0=fns[_0x5cada2(0x1a3)](fns[_0x5cada2(0x1e6)](_0x6e62b7[_0x5cada2(0x121)][_0x5cada2(0x1bd)](/\//g,'-')),_0x5cada2(0x1d1));for(const _0x3c4b2f of _0x5080a6){if(_0x3c4b2f[_0x5cada2(0x145)]!='BTC')_0x545d22=await exchange[_0x5cada2(0x1b0)](_0x3c4b2f['symbol'],Date['parse'](_0x3324d0));_0x545d22[_0x5cada2(0x1ee)](_0x430ce9=>{const _0x566921=_0x5cada2,_0x488e99=_0x3c4b2f[_0x566921(0x15d)][_0x566921(0x156)]('BTC/'),_0xdc67cb=fns['format'](fns[_0x566921(0x1e6)](_0x430ce9[_0x566921(0x1ac)]),_0x566921(0x20b)),_0x33cbe9=fns[_0x566921(0x1a3)](fns[_0x566921(0x1e6)](_0x430ce9[_0x566921(0x1ac)]),_0x566921(0x200));let _0x5c3bbc;if(_0x430ce9['side']==_0x566921(0x15a)&&_0x488e99==![])_0x5c3bbc=_0x430ce9[_0x566921(0x134)];if(_0x430ce9[_0x566921(0x208)]==_0x566921(0x15a)&&_0x488e99==!![])_0x5c3bbc=-_0x430ce9['amount']*_0x430ce9[_0x566921(0x1cf)];if(_0x430ce9[_0x566921(0x208)]==_0x566921(0x129)&&_0x488e99==![])_0x5c3bbc=-_0x430ce9['amount'];if(_0x430ce9[_0x566921(0x208)]==_0x566921(0x129)&&_0x488e99==!![])_0x5c3bbc=_0x430ce9[_0x566921(0x134)]*_0x430ce9[_0x566921(0x1cf)];_0xe244d1['push']({'timestamp':_0xdc67cb,'date':_0x33cbe9,'coin':_0x3c4b2f[_0x566921(0x145)],'symbol':_0x3c4b2f[_0x566921(0x15d)],'type':_0x430ce9[_0x566921(0x216)],'side':_0x430ce9[_0x566921(0x208)],'reverse':_0x488e99,'amount':formatResult(_0x430ce9['filled'],0x8),'filled':formatResult(_0x430ce9['filled'],0x8),'coinamount':formatResult(_0x5c3bbc,0x8),'price':formatResult(_0x430ce9[_0x566921(0x1cf)],0x8)});let _0x536520;if(_0x430ce9[_0x566921(0x208)]=='buy'&&_0x488e99==![])_0x536520=-_0x430ce9[_0x566921(0x134)]*_0x430ce9[_0x566921(0x1cf)];if(_0x430ce9[_0x566921(0x208)]==_0x566921(0x15a)&&_0x488e99==!![])_0x536520=_0x430ce9[_0x566921(0x134)];if(_0x430ce9[_0x566921(0x208)]=='sell'&&_0x488e99==![])_0x536520=_0x430ce9[_0x566921(0x134)]*_0x430ce9[_0x566921(0x1cf)];if(_0x430ce9[_0x566921(0x208)]==_0x566921(0x129)&&_0x488e99==!![])_0x536520=-_0x430ce9[_0x566921(0x134)];_0xe244d1['push']({'date':_0x33cbe9,'coin':_0x566921(0x144),'coinamount':formatResult(_0x536520,0x8)});});}_0xe244d1[_0x5cada2(0x1f8)]((_0x3f2b95,_0x266e19)=>_0x3f2b95[_0x5cada2(0x16c)]>_0x266e19['timestamp']?0x1:_0x266e19[_0x5cada2(0x16c)]>_0x3f2b95[_0x5cada2(0x16c)]?-0x1:0x0),dbLogs[_0x5cada2(0x1a2)]('logs')['remove']()[_0x5cada2(0x1fc)](),_0xe244d1[_0x5cada2(0x1ee)](_0xa0fd65=>{const _0x480203=_0x5cada2;let _0x9087fe;_0xa0fd65[_0x480203(0x145)]!=_0x480203(0x144)&&(_0x9087fe={'time':_0xa0fd65[_0x480203(0x16c)],'type':_0x480203(0x1c8),'event':_0x480203(0x1ca)+_0xa0fd65[_0x480203(0x15d)]+'\x20'+_0xa0fd65['side']+'\x20#'+_0xa0fd65[_0x480203(0x134)]+'\x20@'+_0xa0fd65[_0x480203(0x1cf)]},dbLogs[_0x480203(0x1a2)](_0x480203(0x1cc))[_0x480203(0x13f)](_0x9087fe)[_0x480203(0x1fc)]());});const _0x485a6e=fns[_0x5cada2(0x19b)]({'start':new Date(_0x6e62b7[_0x5cada2(0x121)]),'end':new Date()})[_0x5cada2(0x1b9)](_0x41c29d=>fns['format'](_0x41c29d,'yyyy/MM/dd'));let _0x1dfc19=[];_0x6e62b7['portfolio'][_0x5cada2(0x1ee)](_0x53ff8c=>{const _0x263e08=_0x5cada2;if(!_0x53ff8c[_0x263e08(0x203)]){_0x1dfc19[_0x53ff8c[_0x263e08(0x145)]]=[];let _0x59d0f6=_0x53ff8c[_0x263e08(0x1c5)];_0x485a6e[_0x263e08(0x1ee)]((_0x5acdbc,_0x360d53)=>{const _0x427ce6=_0x263e08;let _0xdd6838=_0xe244d1[_0x427ce6(0x1d0)](_0x2e948f=>_0x2e948f[_0x427ce6(0x145)]==_0x53ff8c[_0x427ce6(0x145)]&&_0x2e948f['date']==_0x5acdbc);if(_0xdd6838[_0x427ce6(0x174)]!=0x0){let _0x32420d=_0xdd6838[_0x427ce6(0x1e2)]((_0x3ff244,_0xf8ef19)=>{const _0x11eb60=_0x427ce6;return _0x3ff244+=_0xf8ef19[_0x11eb60(0x20d)],_0x3ff244;},0x0);_0x59d0f6+=_0x32420d;}_0x1dfc19[_0x53ff8c[_0x427ce6(0x145)]][_0x5acdbc]=_0x59d0f6;});}});const _0x3b367a=[..._0x5080a6];_0x3b367a[_0x5cada2(0x13f)]({'coin':stablecoins[_0x5cada2(0x1b4)][_0x5cada2(0x145)],'symbol':stablecoins[_0x5cada2(0x1b4)][_0x5cada2(0x15d)]}),_0x3b367a[_0x5cada2(0x13f)]({'coin':stablecoins[_0x5cada2(0x20c)]['coin'],'symbol':stablecoins[_0x5cada2(0x20c)]['symbol']});let _0x4c44c6=[];for(const _0x36f226 of _0x3b367a){_0x4c44c6[_0x36f226[_0x5cada2(0x145)]]=await getCloses(_0x36f226[_0x5cada2(0x15d)],new Date(_0x6e62b7[_0x5cada2(0x121)]));}dbPerformance[_0x5cada2(0x1a2)](_0x5cada2(0x1e3))[_0x5cada2(0x162)]()[_0x5cada2(0x1fc)](),_0x485a6e[_0x5cada2(0x1ee)]((_0x44f710,_0x12a585)=>{const _0x1619b0=_0x5cada2;let _0x196187,_0x1c6bc5=[];_0x12a585==0x0?(_0x6e62b7[_0x1619b0(0x1b6)][_0x1619b0(0x1ee)](_0x2d73de=>{const _0x277f2a=_0x1619b0;!_0x2d73de[_0x277f2a(0x203)]&&_0x1c6bc5['push']({'coin':_0x2d73de[_0x277f2a(0x145)],'number':_0x2d73de[_0x277f2a(0x1c5)],'price':_0x2d73de[_0x277f2a(0x1c0)]});}),_0x196187={'date':_0x44f710,'eur':_0x4c44c6[stablecoins['eur'][_0x1619b0(0x145)]][_0x12a585],'usd':_0x4c44c6[stablecoins['usd']['coin']][_0x12a585],'coins':_0x1c6bc5}):(_0x6e62b7[_0x1619b0(0x1b6)][_0x1619b0(0x1ee)](_0x1e8513=>{const _0x59c2f4=_0x1619b0;!_0x1e8513[_0x59c2f4(0x203)]&&_0x1c6bc5[_0x59c2f4(0x13f)]({'coin':_0x1e8513[_0x59c2f4(0x145)],'number':_0x1dfc19[_0x1e8513[_0x59c2f4(0x145)]][_0x44f710],'price':_0x1e8513[_0x59c2f4(0x145)]==_0x59c2f4(0x144)?0x1:_0x4c44c6[_0x1e8513[_0x59c2f4(0x145)]][_0x12a585]});}),_0x196187={'date':_0x44f710,'eur':_0x4c44c6[stablecoins[_0x1619b0(0x1b4)][_0x1619b0(0x145)]][_0x12a585],'usd':_0x4c44c6[stablecoins[_0x1619b0(0x20c)]['coin']][_0x12a585],'coins':_0x1c6bc5}),dbPerformance[_0x1619b0(0x1a2)](_0x1619b0(0x1e3))[_0x1619b0(0x13f)](_0x196187)[_0x1619b0(0x1fc)]();}),emitPerformance(),await resetCoinResults();for(let _0x2c6cdc of _0xe244d1){_0x2c6cdc[_0x5cada2(0x145)]!='BTC'&&await updateCoinResults(_0x2c6cdc);}logHistory(_0x5cada2(0x140),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x410b49){await handleError(_0x410b49,_0x5cada2(0x210));}}async function getCloses(_0x333927,_0x554bf1,_0x402066=undefined){const _0x443caa=_0x12cff9,_0x13445c='1d';let _0x59ab1b,_0x574110;const _0x178c41=fns[_0x443caa(0x1e9)](new Date(),_0x554bf1)+0x1;try{const _0x45ffa6=exchange[_0x443caa(0x1ea)]()-_0x178c41*0x18*0xe10*0x3e8;_0x59ab1b=await exchange[_0x443caa(0x164)](_0x333927,_0x13445c,_0x45ffa6,_0x402066),_0x574110=await exchange['fetchTickers'](_0x333927);}catch(_0x54defa){await handleError(_0x54defa,_0x443caa(0x1b3));}let _0x4dc738=ohlcvToCloses(_0x59ab1b);return _0x4dc738[_0x443caa(0x13f)](_0x574110[_0x333927][_0x443caa(0x12b)]),_0x4dc738;}function ohlcvToCloses(_0x3f66ab){let _0xa5cbdc=[];return _0x3f66ab['forEach'](function(_0x4c4ea2){const _0x1a49f6=_0x3b31;_0xa5cbdc[_0x1a49f6(0x13f)](_0x4c4ea2[0x4]);}),_0xa5cbdc;}function getConfiguration(_0x29d055){const _0x498510=_0x12cff9;let _0x3a7717=dbConfig[_0x498510(0x1a2)](_0x498510(0x135))[_0x498510(0x17a)]({'botID':_0x29d055})[_0x498510(0x1a1)]();if(_0x3a7717){let _0x477903=![];!_0x3a7717[_0x498510(0x197)]&&(_0x3a7717={..._0x3a7717,'exchange':_0x498510(0x1dd)},_0x477903=!![]),!_0x3a7717[_0x498510(0x209)]&&(_0x3a7717={..._0x3a7717,'ordertype':_0x498510(0x149)},_0x477903=!![]),_0x477903&&(_0x3a7717={'botID':_0x3a7717[_0x498510(0x132)],'exchange':_0x3a7717[_0x498510(0x197)],'apiKey':_0x3a7717[_0x498510(0x183)],'apiSecret':_0x3a7717[_0x498510(0x204)],'botname':_0x3a7717['botname'],'threshold':_0x3a7717[_0x498510(0x12a)],'ordertype':_0x3a7717[_0x498510(0x209)],'startdate':_0x3a7717['startdate'],'recreate':_0x3a7717['recreate'],'timeshift':_0x3a7717[_0x498510(0x1c7)],'headless':_0x3a7717[_0x498510(0x170)],'cooldown':_0x3a7717[_0x498510(0x177)],'portfolio':_0x3a7717[_0x498510(0x1b6)]},dbConfig['get']('bot')[_0x498510(0x162)]()[_0x498510(0x1fc)](),dbConfig['get'](_0x498510(0x135))[_0x498510(0x13f)](_0x3a7717)[_0x498510(0x1fc)]());}else _0x3a7717={'botID':_0x29d055,'exchange':_0x498510(0x1dd),'apiKey':'','apiSecret':'','botname':'Bot\x20'+_0x29d055,'threshold':'3','ordertype':'market','startdate':getDate(),'recreate':![],'timeshift':settings[_0x498510(0x1c7)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x3a7717;}function emittedConfiguration(){const _0xf58d8e=_0x12cff9;let _0x2dca6c;return config[_0xf58d8e(0x183)]==''?_0x2dca6c=config:_0x2dca6c={...config,'apiKey':'************','apiSecret':_0xf58d8e(0x120)},_0x2dca6c;}function getSettings(){const _0x3af741=_0x12cff9;return dbSettings[_0x3af741(0x1a2)]('settings')[_0x3af741(0x1a1)]();}function getSecure(){const _0xcaaa96=_0x12cff9;return dbSecure[_0xcaaa96(0x1a2)](_0xcaaa96(0x14b))[_0xcaaa96(0x1a1)]()||{};}function updateTimeshift(_0x146c48){const _0x452551=_0x12cff9;let _0x5d2fe6=dbConfig[_0x452551(0x1a2)](_0x452551(0x135))[_0x452551(0x17a)]({'botID':botID})['value']();_0x5d2fe6&&dbConfig[_0x452551(0x1a2)]('bot')[_0x452551(0x17a)]({'botID':botID})[_0x452551(0x1e0)]({'timeshift':_0x146c48})[_0x452551(0x1fc)](),config[_0x452551(0x1c7)]=_0x146c48,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4fc719){const _0x211211=_0x12cff9;let _0x24ae36=dbConfig[_0x211211(0x1a2)](_0x211211(0x135))[_0x211211(0x17a)]({'botID':botID})[_0x211211(0x1a1)]();_0x4fc719={..._0x4fc719,'apiKey':crypt[_0x211211(0x1e7)](secure[_0x211211(0x127)],_0x4fc719[_0x211211(0x183)])[_0x211211(0x1ce)],'apiSecret':crypt['decrypt'](secure[_0x211211(0x127)],_0x4fc719[_0x211211(0x204)])['message']};if(_0x24ae36){if(_0x4fc719[_0x211211(0x183)]==_0x211211(0x120))_0x4fc719[_0x211211(0x183)]=config['apiKey'];if(_0x4fc719[_0x211211(0x204)]==_0x211211(0x120))_0x4fc719[_0x211211(0x204)]=config['apiSecret'];dbConfig[_0x211211(0x1a2)](_0x211211(0x135))[_0x211211(0x17a)]({'botID':botID})[_0x211211(0x1e0)](_0x4fc719)['write']();}else dbConfig[_0x211211(0x1a2)](_0x211211(0x135))['push'](_0x4fc719)['write'](),process[_0x211211(0x1ec)]({'status':_0x211211(0x1da),'live':'running'});config={..._0x4fc719};if(config[_0x211211(0x176)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x211211(0x1ec)]({'botname':_0x4fc719['botname']}),proxyEmit(_0x211211(0x12e)),reset();}async function storeHeadless(_0x42abc8){const _0x5f00b9=_0x12cff9,_0x12f24f={...config,'headless':_0x42abc8['headless']};let _0x4f1463=dbConfig['get'](_0x5f00b9(0x135))[_0x5f00b9(0x17a)]({'botID':botID})[_0x5f00b9(0x1a1)]();_0x4f1463&&dbConfig[_0x5f00b9(0x1a2)](_0x5f00b9(0x135))['find']({'botID':botID})[_0x5f00b9(0x1e0)](_0x12f24f)['write'](),config={..._0x12f24f},proxyEmit(_0x5f00b9(0x1f0),emittedConfiguration());}function noslash(_0x3e5ce2){const _0xfbacb6=_0x12cff9;return _0x3e5ce2[_0xfbacb6(0x1bd)]('/','');}function updateNumberCoins(_0x2f48d4){const _0x33a583=_0x12cff9;_0x2f48d4['eventType']&&_0x2f48d4[_0x33a583(0x1ad)]=='outboundAccountPosition'&&_0x2f48d4[_0x33a583(0x17f)]['forEach'](_0x480622=>{const _0x4e39dd=_0x33a583;let _0x51d474=currentCoins[_0x4e39dd(0x17a)](_0x9ff3de=>_0x9ff3de[_0x4e39dd(0x145)]==_0x480622[_0x4e39dd(0x1bc)]);if(_0x51d474)_0x51d474[_0x4e39dd(0x138)]=Number(_0x480622['availableBalance']);}),_0x2f48d4[_0x33a583(0x1ad)]&&_0x2f48d4['eventType']==_0x33a583(0x119)&&(_0x2f48d4['orderType']==_0x33a583(0x150)&&_0x2f48d4[_0x33a583(0x168)]==_0x33a583(0x193)&&lastOrders['forEach'](_0x5e7c74=>{const _0x452eb2=_0x33a583;if(_0x5e7c74[_0x452eb2(0x14f)]==_0x2f48d4[_0x452eb2(0x14f)]){if(_0x5e7c74[_0x452eb2(0x191)])_0x5e7c74['filled']=_0x2f48d4[_0x452eb2(0x14c)]*_0x5e7c74[_0x452eb2(0x1cf)];else _0x5e7c74['filled']=_0x2f48d4['accumulatedQuantity'];}}));}async function getCoins(_0x59d60e=!![]){const _0x74f365=_0x12cff9;let _0x43cc15,_0x5752cb=[],_0x140d83=[],_0x5821ea=[];try{_0x43cc15=await exchange[_0x74f365(0x1e4)](),mybalances=_0x43cc15[_0x74f365(0x128)];if(!_0x59d60e)for(const [_0x394046,_0x50ae8d]of Object[_0x74f365(0x13d)](mybalances)){_0x5821ea[_0x74f365(0x13f)](_0x394046);}else config[_0x74f365(0x1b6)]['forEach'](_0x3d2fbc=>{const _0x31df39=_0x74f365;if(!_0x3d2fbc[_0x31df39(0x203)])_0x5821ea[_0x31df39(0x13f)](_0x3d2fbc[_0x31df39(0x145)]);});for(const [_0x204dbd,_0x5b5dc4]of Object['entries'](mybalances)){if(_0x5821ea['includes'](_0x204dbd)){if((_0x5b5dc4[_0x74f365(0x148)]()!=0x0||config[_0x74f365(0x1b6)][_0x74f365(0x17a)](_0x557fbc=>_0x557fbc[_0x74f365(0x145)]==_0x204dbd))&&(allSymbols['includes'](_0x204dbd+'/BTC')||_0x204dbd==_0x74f365(0x144)))_0x140d83['push']({'coin':_0x204dbd,'symbol':_0x204dbd+_0x74f365(0x15c),'reverse':![],'number':_0x5b5dc4}),_0x204dbd!=_0x74f365(0x144)&&_0x5752cb[_0x74f365(0x13f)](_0x204dbd+_0x74f365(0x15c));else(_0x5b5dc4[_0x74f365(0x148)]()!=0x0||config[_0x74f365(0x1b6)][_0x74f365(0x17a)](_0x35cf1f=>_0x35cf1f[_0x74f365(0x145)]==_0x204dbd))&&allSymbols[_0x74f365(0x156)](_0x74f365(0x1ed)+_0x204dbd)&&(_0x140d83[_0x74f365(0x13f)]({'coin':_0x204dbd,'symbol':_0x74f365(0x1ed)+_0x204dbd,'reverse':!![],'number':_0x5b5dc4}),_0x204dbd!=_0x74f365(0x144)&&_0x5752cb[_0x74f365(0x13f)]('BTC/'+_0x204dbd));}}}catch(_0x4efbd8){if(!_0x59d60e){if(_0x4efbd8[_0x74f365(0x148)]()[_0x74f365(0x156)](_0x74f365(0x16b)))return logHistory('error',_0x74f365(0x1b5)),![];else{if(_0x4efbd8['toString']()['includes'](_0x74f365(0x122)))return logHistory(_0x74f365(0x152),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x4efbd8['toString']()[_0x74f365(0x156)](_0x74f365(0x137)))return logHistory(_0x74f365(0x152),_0x74f365(0x14e)),![];else await handleError(_0x4efbd8,_0x74f365(0x199));}}}else await handleError(_0x4efbd8,_0x74f365(0x199));}return _0x140d83;}async function getPortfolio(_0x3f77c2){const _0x29b5e9=_0x12cff9;let _0x2bf846=[],_0x37daa0=[],_0xbbcd3c,_0xcc8fbe=[],_0x11931a,_0x18600c;_0x3f77c2[_0x29b5e9(0x183)]===_0x29b5e9(0x120)||_0x3f77c2[_0x29b5e9(0x204)]==='************'?(_0x11931a=config[_0x29b5e9(0x183)],_0x18600c=config[_0x29b5e9(0x204)]):(_0x11931a=_0x3f77c2[_0x29b5e9(0x183)],_0x18600c=_0x3f77c2['apiSecret']);await initExchange(_0x11931a,_0x18600c);let _0x25b717=await loadSymbols();if(_0x25b717){_0xcc8fbe=await getCoins(![]);if(_0xcc8fbe===![])proxyEmit(_0x29b5e9(0x1b6),![]);else{_0xcc8fbe[_0x29b5e9(0x1ee)](_0x51fa40=>{const _0x1910a2=_0x29b5e9;_0x2bf846[_0x1910a2(0x13f)](_0x51fa40['symbol']);});try{_0x37daa0=await exchange['fetchTickers'](_0x2bf846);}catch(_0x26c825){await handleError(_0x26c825,_0x29b5e9(0x195));}_0xcc8fbe[_0x29b5e9(0x1ee)](_0x57a15e=>{const _0x5b7720=_0x29b5e9;_0x57a15e[_0x5b7720(0x145)]!='BTC'?_0xbbcd3c=_0x57a15e[_0x5b7720(0x191)]?0x1/_0x37daa0[_0x57a15e[_0x5b7720(0x15d)]][_0x5b7720(0x12b)]:_0x37daa0[_0x57a15e[_0x5b7720(0x15d)]][_0x5b7720(0x12b)]:_0xbbcd3c=0x1,_0x57a15e[_0x5b7720(0x1cf)]=formatResult(_0xbbcd3c,0x8);}),proxyEmit(_0x29b5e9(0x1b6),_0xcc8fbe);}}else proxyEmit(_0x29b5e9(0x1b6),![]);}function checkMinimums(_0x197b12){const _0x28d242=_0x12cff9;let _0x19257e=!![];const _0x3cbe66=!_0x197b12[_0x28d242(0x191)]?markets[_0x197b12[_0x28d242(0x15d)]]['limits'][_0x28d242(0x134)][_0x28d242(0x11a)]:markets[_0x197b12['symbol']][_0x28d242(0x11b)][_0x28d242(0x1ef)][_0x28d242(0x11a)],_0x20d4d6=!_0x197b12[_0x28d242(0x191)]?markets[_0x197b12['symbol']]['limits'][_0x28d242(0x1ef)]['min']:markets[_0x197b12[_0x28d242(0x15d)]]['limits'][_0x28d242(0x134)]['min'];if(Math[_0x28d242(0x117)](_0x197b12[_0x28d242(0x190)])<_0x3cbe66)_0x19257e=![];if(Math[_0x28d242(0x117)](_0x197b12[_0x28d242(0x190)])*_0x197b12[_0x28d242(0x12b)]<_0x20d4d6)_0x19257e=![];return _0x19257e;}async function getBalances(){const _0x154c65=_0x12cff9;let _0x1d25a0=0x0,_0x3810ea;const _0x3ecc9e=config['threshold'];currentCoins[_0x154c65(0x1ee)](_0x2b4cec=>{const _0x10b446=_0x154c65;if(_0x2b4cec['coin']!=_0x10b446(0x144)){let _0x4993bc=global['ticker'][noslash(_0x2b4cec[_0x10b446(0x15d)])];_0x3810ea=_0x2b4cec[_0x10b446(0x191)]?0x1/_0x4993bc:_0x4993bc;}else _0x3810ea=0x1;let _0x510d6a=_0x2b4cec[_0x10b446(0x138)]*_0x3810ea;_0x1d25a0+=_0x510d6a,_0x2b4cec[_0x10b446(0x12b)]=formatResult(Number(_0x3810ea),0x8),_0x2b4cec[_0x10b446(0x1a1)]=_0x510d6a;}),currentCoins[_0x154c65(0x1ee)](_0x6eebf4=>{const _0x451b1c=_0x154c65;let _0x16c29f=config[_0x451b1c(0x1b6)][_0x451b1c(0x17a)](_0x26dfd4=>_0x26dfd4[_0x451b1c(0x145)]==_0x6eebf4[_0x451b1c(0x145)]),_0xed6f14=Number(_0x16c29f[_0x451b1c(0x126)]),_0x3ec61f=_0x6eebf4[_0x451b1c(0x1a1)]/_0x1d25a0*0x64,_0x458f05=_0xed6f14*_0x1d25a0/0x64/_0x6eebf4['last']-_0x6eebf4['number'];_0x6eebf4[_0x451b1c(0x126)]=formatResult(_0x3ec61f,0x3),_0x6eebf4[_0x451b1c(0x1c2)]=formatResult(_0xed6f14,0x3),_0x6eebf4['trade']=formatResult(_0x458f05,0x8),_0x6eebf4[_0x451b1c(0x208)]='',_0x6eebf4[_0x451b1c(0x118)]='';if(_0x6eebf4[_0x451b1c(0x145)]!=_0x451b1c(0x144)){if(_0x6eebf4[_0x451b1c(0x126)]>_0xed6f14)_0x6eebf4['side']=_0x451b1c(0x129),_0x6eebf4['valid']=checkMinimums(_0x6eebf4);else _0x6eebf4[_0x451b1c(0x126)]<_0xed6f14&&(_0x6eebf4['side']=_0x451b1c(0x15a),_0x6eebf4[_0x451b1c(0x118)]=checkMinimums(_0x6eebf4));}_0x6eebf4[_0x451b1c(0x18b)]=_0x6eebf4[_0x451b1c(0x126)]/_0x6eebf4['target']-0x1;}),currentCoins['sort']((_0x343a78,_0x495bc6)=>_0x343a78[_0x154c65(0x18b)]<_0x495bc6[_0x154c65(0x18b)]?0x1:_0x495bc6['delta']<_0x343a78[_0x154c65(0x18b)]?-0x1:0x0);const _0x33a648=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x33a648[_0x154c65(0x1b4)],'usd':_0x33a648['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x3ecc9e},proxyEmit(_0x154c65(0x17f),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x154c65(0x170)])headlessMode({'portfolio':currentCoins,'threshold':_0x3ecc9e});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x499604=_0x12cff9;if(!lastBalances)return;let _0x4d5c7f=await getStartingBalances(![]),_0x5a84ec=[],_0xd4a29f=[],_0x2972e6;JSON[_0x499604(0x20f)](lastBalances[_0x499604(0x1b6)])[_0x499604(0x1ee)](_0x1f184e=>{const _0x532716=_0x499604;let _0x1655e2={'coin':_0x1f184e['coin'],'number':_0x1f184e[_0x532716(0x138)],'price':_0x1f184e[_0x532716(0x12b)]};_0x5a84ec[_0x532716(0x13f)](_0x1655e2);if(!_0x4d5c7f[_0x532716(0x1f9)]||!_0x4d5c7f[_0x532716(0x1f9)][_0x532716(0x17a)](_0x16ab23=>_0x16ab23[_0x532716(0x145)]==_0x1f184e[_0x532716(0x145)]&&_0x16ab23[_0x532716(0x138)]!=0x0))_0xd4a29f[_0x532716(0x13f)](_0x1655e2);});const _0x1f6093=await getFiat();_0x2972e6={'date':lastBalances[_0x499604(0x11c)][_0x499604(0x1aa)]('\x20')[0x0],'eur':_0x1f6093[_0x499604(0x1b4)],'usd':_0x1f6093[_0x499604(0x20c)],'coins':_0x5a84ec};let _0x345c18=dbPerformance[_0x499604(0x1a2)](_0x499604(0x1e3))['find']({'date':_0x2972e6[_0x499604(0x16d)]})[_0x499604(0x1a1)]();_0x345c18?dbPerformance[_0x499604(0x1a2)](_0x499604(0x1e3))['find']({'date':_0x2972e6['date']})[_0x499604(0x1e0)](_0x2972e6)[_0x499604(0x1fc)]():dbPerformance[_0x499604(0x1a2)](_0x499604(0x1e3))['push'](_0x2972e6)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x23da2d=_0x12cff9;if(dbPerformance[_0x23da2d(0x194)](_0x23da2d(0x1e3))['value']()){let _0x19139a=dbPerformance[_0x23da2d(0x1a2)]('data')[_0x23da2d(0x205)](_0x23da2d(0x16d))[_0x23da2d(0x1a1)]();proxyEmit(_0x23da2d(0x1e8),_0x19139a),lastPerformanceEmitted=getDate();}else proxyEmit(_0x23da2d(0x1e8),[]);}function _0x3a8b(){const _0x24042d=['reverse','isArray','FILLED','has','getPortfolio()','BTC/EUR','exchange','stringify','getCoins()','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','eachDayOfInterval','BTCEUR','loadSymbols()','\x20hour','add','Invalid\x20quantity','value','get','format','74pHDLva','Error:\x20Invalid\x20argument\x20','105AxeAzr','date-fns','kline','Order(s)\x20filled\x20-\x20balancing\x20resumed','split','getFullYear','datetime','eventType','buys','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchOrders','initws()','test','getCloses()','eur','Binance\x20API\x20key\x20is\x20invalid','portfolio','64inMOiA','reconnected','map','subscribeSpotKline','3130XrCaxR','asset','replace','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','coin-loading-progress','startprice','\x20order:\x20','target','BTC/BUSD','2762qiuKGZ','startnumber','bid','timeshift','order','toFixed','Order:\x20','log','logs','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','message','price','filter','yyyy-MM-dd\x27T\x27HH:mm:ss','binanceus','getTime','limit-high','initclient','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','\x20minutes\x20-\x20balancing\x20resumed','fee','ticker','enabled','defaults','wsMarket','binance','apply','formattedMessage','assign','12hapIGB','reduce','data','fetchBalance','819050Xehhvt','parseISO','decrypt','performance','differenceInCalendarDays','milliseconds','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','send','BTC/','forEach','cost','configuration','cancelOrder','ccxt','getMinutes','getHours','breakeven','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','symbols','sort','coins','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','closeWs','write','existsSync','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','event-history','yyyy/MM/dd','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','BTCBUSD','excluded','apiSecret','sortBy','\x20|\x20Error\x20details:\x20','search','side','ordertype','(((.+)+)+)+$','yyyy/MM/dd\x20HH:mm:ss','usd','coinamount','lowdb/adapters/FileSync','parse','recreateHistory()','./version.json','BNBBTC','Order(s)\x20not\x20validated\x20after\x20','7227rXeJal','hybrid-crypto-js','type','37404TuOmhM','shift','close','abs','valid','executionReport','min','limits','time','sells','function','BNB','************','startdate','AuthenticationError','padStart','796EqwyPq','001','distribution','privateKey','total','sell','threshold','last','loadMarkets','getDate','configuration-stored','OrderNotFound','Market','333718XHiKHw','botID','5243592WvivUz','amount','bot','Crypt','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','number','keys','fetchTickers','bot-','InsufficientFunds','entries','round','push','success','-results.json','createOrder','Executed\x20','BTC','coin','args','slice','toString','market','Order(s)\x20validated\x20-\x20balancing\x20resumed','secure','accumulatedQuantity','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','Binance\x20API\x20secret\x20is\x20invalid','orderId','LIMIT','getPortfolio','error','exit','wsKey','cancelOrder()','includes','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getStartingBalances','userData','buy','indexOf','/BTC','symbol','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','./config/','remove','ExchangeNotAvailable','fetchOHLCV','version','toLowerCase','spot','orderStatus','placeOrder()','limit-low','API-key\x20format\x20invalid','timestamp','date','wss://stream.binance.com:9443','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','headless','event','realized','fees','length','currency','recreate','cooldown','DAI/','getSeconds','find','-config.json','getFiat()','filled','WebSockets()\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','balances','BTC/USDT','mkdirSync','InvalidNonce','apiKey','storeConfiguration','\x20orders\x20in\x20less\x20than\x20','getMonth','Order\x20amount\x20is\x20invalid:\x20','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','page','RequestTimeout','delta','Order\x20filled:\x20','\x20>\x20','lowdb','wss://stream.binance.us:9443','trade'];_0x3a8b=function(){return _0x24042d;};return _0x3a8b();}async function getStartingBalances(_0x5c2d9b=!![]){const _0x170c29=_0x12cff9;let _0x3909df=dbPerformance['get'](_0x170c29(0x1e3))[_0x170c29(0x17a)]({'date':config[_0x170c29(0x121)]})['value']();config['apiKey']!=''&&!_0x3909df&&(await setStartDatePerformance(config),_0x3909df=dbPerformance[_0x170c29(0x1a2)](_0x170c29(0x1e3))['find']({'date':config[_0x170c29(0x121)]})[_0x170c29(0x1a1)]());if(config[_0x170c29(0x183)]==''||!_0x3909df)return{};let _0x5a46ba=0x0,_0xe22386=0x0,_0xe2bdc6=0x0,_0x1d59de=[],_0x4e9f52=0x0;config[_0x170c29(0x1b6)][_0x170c29(0x1ee)](_0x3971c0=>{const _0x1875ac=_0x170c29;!_0x3971c0[_0x1875ac(0x203)]&&(_0x1d59de[_0x4e9f52]={'coin':_0x3971c0['coin'],'symbol':_0x3971c0[_0x1875ac(0x15d)],'number':_0x3971c0[_0x1875ac(0x1c5)],'price':_0x3971c0[_0x1875ac(0x1c0)]},_0x5a46ba+=_0x3971c0[_0x1875ac(0x1c0)]*_0x3971c0[_0x1875ac(0x1c5)],_0xe22386+=_0x3971c0[_0x1875ac(0x1c0)]*_0x3971c0[_0x1875ac(0x1c5)]*_0x3909df[_0x1875ac(0x1b4)],_0xe2bdc6+=_0x3971c0[_0x1875ac(0x1c0)]*_0x3971c0[_0x1875ac(0x1c5)]*_0x3909df[_0x1875ac(0x20c)],_0x4e9f52++);});let _0x157fd9={'btc':_0x5a46ba,'eur':_0xe22386,'usd':_0xe2bdc6,'coins':_0x1d59de};if(_0x5c2d9b)proxyEmit('starting-balances',_0x157fd9);return _0x157fd9;}function headlessMode(_0x2092f1){const _0x5825d3=_0x12cff9;let _0xc3f23f=_0x2092f1[_0x5825d3(0x1b6)],_0x7aa374=_0x2092f1[_0x5825d3(0x12a)],_0x2c38ed=[];for(let _0x5334e4 of _0xc3f23f){if(_0x5334e4[_0x5825d3(0x145)]!='BTC'){if(_0x5334e4[_0x5825d3(0x126)]/_0x5334e4[_0x5825d3(0x1c2)]-0x1>=_0x7aa374/0x64){if(_0x5334e4[_0x5825d3(0x118)])_0x2c38ed['push'](_0x5334e4);}else{if(_0x5334e4[_0x5825d3(0x126)]/_0x5334e4[_0x5825d3(0x1c2)]-0x1<=-_0x7aa374/0x64){if(_0x5334e4['valid'])_0x2c38ed[_0x5825d3(0x13f)](_0x5334e4);}}}}_0x2c38ed[_0x5825d3(0x174)]>0x0&&placeOrder(_0x2c38ed);}function symbolToCoin(_0x3cca19){const _0x15b00d=_0x12cff9;let _0x57cf23;if(_0x3cca19[_0x15b00d(0x156)](_0x15b00d(0x15c)))_0x57cf23=_0x3cca19['replace'](_0x15b00d(0x15c),'');if(_0x3cca19[_0x15b00d(0x156)](_0x15b00d(0x1ed)))_0x57cf23=_0x3cca19[_0x15b00d(0x1bd)](_0x15b00d(0x1ed),'');return _0x57cf23;}async function validateOrders(_0x8cad3=0x0){const _0x15504b=_0x12cff9;let _0x20d8b=[];lastOrders['forEach'](_0x2bd4e2=>{const _0x9443bb=_0x3b31;let _0x3dfadd=previousCoins['find'](_0x52fd89=>_0x52fd89['coin']==symbolToCoin(_0x2bd4e2[_0x9443bb(0x15d)])),_0x4d21c8=currentCoins[_0x9443bb(0x17a)](_0x50bd95=>_0x50bd95['coin']==symbolToCoin(_0x2bd4e2[_0x9443bb(0x15d)])),_0x247df2,_0x19ee73;_0x2bd4e2[_0x9443bb(0x208)]==_0x9443bb(0x15a)&&!_0x2bd4e2[_0x9443bb(0x191)]||_0x2bd4e2[_0x9443bb(0x208)]==_0x9443bb(0x129)&&_0x2bd4e2[_0x9443bb(0x191)]?(_0x247df2=_0x3dfadd[_0x9443bb(0x138)]+0.9*_0x2bd4e2[_0x9443bb(0x17d)],_0x19ee73=_0x3dfadd['number']+1.1*_0x2bd4e2['filled']):(_0x247df2=_0x3dfadd['number']-1.1*_0x2bd4e2[_0x9443bb(0x17d)],_0x19ee73=_0x3dfadd['number']-0.9*_0x2bd4e2['filled']);const _0x2b6442=_0x2bd4e2['filled']!=0x0&&_0x4d21c8[_0x9443bb(0x138)]>=_0x247df2&&_0x4d21c8[_0x9443bb(0x138)]<=_0x19ee73;_0x20d8b[_0x9443bb(0x13f)](_0x2b6442);if(_0x2b6442&&config[_0x9443bb(0x209)]!='market'){if(_0x2bd4e2[_0x9443bb(0x191)])logHistory(_0x9443bb(0x140),_0x9443bb(0x18c)+_0x2bd4e2[_0x9443bb(0x15d)]+'\x20'+_0x2bd4e2[_0x9443bb(0x208)]+'\x20#'+formatResult(_0x2bd4e2[_0x9443bb(0x17d)]/_0x2bd4e2[_0x9443bb(0x1cf)],0x8)+'\x20@'+formatResult(_0x2bd4e2[_0x9443bb(0x1cf)],0x8));else logHistory(_0x9443bb(0x140),_0x9443bb(0x18c)+_0x2bd4e2[_0x9443bb(0x15d)]+'\x20'+_0x2bd4e2['side']+'\x20#'+formatResult(_0x2bd4e2[_0x9443bb(0x17d)],0x8)+'\x20@'+formatResult(_0x2bd4e2[_0x9443bb(0x1cf)],0x8));}}),_0x20d8b[_0x15504b(0x1ee)]((_0x1afd27,_0x113eb0)=>{if(_0x1afd27)lastOrders['splice'](_0x113eb0,0x1);});if(_0x8cad3<validateOrderChecks&&_0x20d8b[_0x15504b(0x156)](![])){if(_0x8cad3==0x0){config[_0x15504b(0x209)]==_0x15504b(0x149)?logHistory(_0x15504b(0x152),_0x15504b(0x1f6)):logHistory(_0x15504b(0x152),_0x15504b(0x19a));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x8cad3);},0xa*0x3e8);}else{(_0x8cad3==0x1||_0x8cad3==Math['round'](validateOrderChecks/0x2)||_0x8cad3==validateOrderChecks-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x8cad3);},validateOrderInterval);}}else{lockOrders=![];if(_0x8cad3>0x0&&!_0x20d8b[_0x15504b(0x156)](![]))config[_0x15504b(0x209)]=='market'?logHistory(_0x15504b(0x140),_0x15504b(0x14a)):logHistory('success',_0x15504b(0x1a9));else _0x8cad3>0x0&&_0x20d8b[_0x15504b(0x156)](![])&&(config[_0x15504b(0x209)]==_0x15504b(0x149)?logHistory(_0x15504b(0x140),_0x15504b(0x213)+Math[_0x15504b(0x13e)](validateOrderChecks*validateOrderInterval/0xea60)+_0x15504b(0x1d7)):(lastOrders[_0x15504b(0x1ee)](async _0x22dfcb=>{const _0x46a889=_0x15504b;try{const _0x49ab43=await exchange[_0x46a889(0x1f1)](_0x22dfcb[_0x46a889(0x14f)],_0x22dfcb[_0x46a889(0x15d)]);}catch(_0x39e63a){if(_0x39e63a[_0x46a889(0x148)]()['includes'](_0x46a889(0x12f))){}else await handleError(_0x39e63a,_0x46a889(0x155));}}),logHistory('success','Order(s)\x20not\x20filled\x20after\x20'+Math[_0x15504b(0x13e)](validateOrderChecks*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20order(s)\x20canceled\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x50d700=_0x12cff9;dbCoinResults[_0x50d700(0x1a2)](_0x50d700(0x1f9))[_0x50d700(0x162)]()[_0x50d700(0x1fc)]();let _0x4dbc70=await getStartingBalances(![]);_0x4dbc70[_0x50d700(0x1f9)][_0x50d700(0x1ee)](_0x51b5fb=>{const _0x52f5f3=_0x50d700,_0x1247b2=_0x51b5fb['symbol'][_0x52f5f3(0x156)](_0x52f5f3(0x1ed));if(_0x51b5fb[_0x52f5f3(0x145)]!=_0x52f5f3(0x144)){let _0x35bce2={'coin':_0x51b5fb[_0x52f5f3(0x145)],'number':_0x51b5fb[_0x52f5f3(0x138)],'breakeven':_0x51b5fb['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x52f5f3(0x1a2)](_0x52f5f3(0x1f9))[_0x52f5f3(0x13f)](_0x35bce2)['write']();}});}async function updateCoinResults(_0x27207a){const _0x1b601c=_0x12cff9;let _0x46090b,_0x3bc62d,_0x2135bd,_0xdaceb2,_0x4ab202,_0x53503a,_0x3ea094=dbCoinResults[_0x1b601c(0x1a2)](_0x1b601c(0x1f9))[_0x1b601c(0x17a)]({'coin':_0x27207a[_0x1b601c(0x145)]})['value']();if(!_0x3ea094)return;if(_0x27207a['fee']&&_0x27207a[_0x1b601c(0x1d8)][_0x1b601c(0x175)]=='BTC')_0x46090b=_0x27207a[_0x1b601c(0x1d8)]['cost'];else{if(_0x27207a[_0x1b601c(0x1d8)]&&_0x27207a[_0x1b601c(0x1d8)][_0x1b601c(0x175)]==_0x1b601c(0x11f))_0x46090b=_0x27207a[_0x1b601c(0x1d8)]['cost']*global[_0x1b601c(0x1d9)][_0x1b601c(0x212)];else _0x46090b=0.001*_0x27207a['filled'];}const _0x2d288b=_0x27207a[_0x1b601c(0x15d)][_0x1b601c(0x156)](_0x1b601c(0x1ed));_0x2d288b&&(_0x53503a={'coin':_0x27207a['coin'],'symbol':_0x27207a[_0x1b601c(0x15d)],'filled':_0x27207a['filled']*_0x27207a['price'],'side':_0x27207a[_0x1b601c(0x208)]==_0x1b601c(0x129)?_0x1b601c(0x15a):_0x1b601c(0x129),'price':0x1/_0x27207a['price']},_0x27207a={..._0x53503a});_0x27207a['side']==_0x1b601c(0x15a)?_0x2135bd=(_0x3ea094[_0x1b601c(0x1f5)]*_0x3ea094[_0x1b601c(0x138)]+_0x27207a[_0x1b601c(0x1cf)]*_0x27207a[_0x1b601c(0x17d)])/(_0x3ea094['number']+_0x27207a[_0x1b601c(0x17d)]):_0x2135bd=(_0x3ea094[_0x1b601c(0x1f5)]*_0x3ea094[_0x1b601c(0x138)]-_0x27207a[_0x1b601c(0x1cf)]*_0x27207a[_0x1b601c(0x17d)])/(_0x3ea094[_0x1b601c(0x138)]-_0x27207a['filled']);_0x27207a[_0x1b601c(0x208)]==_0x1b601c(0x15a)?_0xdaceb2=_0x3ea094['realized']:_0xdaceb2=_0x3ea094[_0x1b601c(0x172)]+(_0x27207a[_0x1b601c(0x1cf)]-_0x3ea094[_0x1b601c(0x1f5)])*_0x27207a[_0x1b601c(0x17d)];_0x3bc62d=_0x27207a['side']==_0x1b601c(0x129)?_0x3ea094[_0x1b601c(0x138)]-_0x27207a[_0x1b601c(0x17d)]:_0x3ea094[_0x1b601c(0x138)]+_0x27207a['filled'],_0x4ab202=(_0x27207a[_0x1b601c(0x1cf)]-_0x2135bd)*_0x3bc62d;let _0x256971={'coin':_0x27207a[_0x1b601c(0x145)],'number':_0x3bc62d,'breakeven':formatResult(_0x2135bd,0x8),'realized':formatResult(_0xdaceb2,0x8),'unrealized':formatResult(_0x4ab202,0x8),'fees':formatResult(_0x3ea094[_0x1b601c(0x173)]+_0x46090b,0x8),'sells':_0x27207a[_0x1b601c(0x208)]==_0x1b601c(0x129)?_0x3ea094['sells']+0x1:_0x3ea094[_0x1b601c(0x11d)],'buys':_0x27207a[_0x1b601c(0x208)]=='buy'?_0x3ea094['buys']+0x1:_0x3ea094[_0x1b601c(0x1ae)]};dbCoinResults[_0x1b601c(0x1a2)](_0x1b601c(0x1f9))[_0x1b601c(0x17a)]({'coin':_0x27207a[_0x1b601c(0x145)]})[_0x1b601c(0x1e0)](_0x256971)['write']();}async function placeOrder(_0xc6066a){const _0x59991c=_0x12cff9,_0x3f76c8=config['ordertype']==_0x59991c(0x149)?_0x59991c(0x149):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x59991c(0x20f)](JSON[_0x59991c(0x198)](currentCoins));for(const _0x185b74 of _0xc6066a){let _0x53ede2,_0x152095,_0x3b09ad,_0x5292e3,_0x161bb9,_0x5c5abf=_0x185b74[_0x59991c(0x15d)];try{const _0x318177=await exchange[_0x59991c(0x13a)](_0x5c5abf),_0x50b78c=_0x318177[_0x5c5abf];_0x53ede2=_0x50b78c[_0x59991c(0x12b)],_0x152095=_0x50b78c[_0x59991c(0x1c6)],_0x3b09ad=_0x50b78c['ask'];_0x185b74[_0x59991c(0x191)]?(_0x5292e3=_0x185b74[_0x59991c(0x208)]==_0x59991c(0x15a)?_0x59991c(0x129):_0x59991c(0x15a),_0x161bb9=Math[_0x59991c(0x117)](_0x185b74[_0x59991c(0x190)])/_0x53ede2):(_0x5292e3=_0x185b74[_0x59991c(0x208)],_0x161bb9=Math[_0x59991c(0x117)](_0x185b74['trade']));_0x3f76c8=='limit'&&(config[_0x59991c(0x209)]==_0x59991c(0x1d4)&&(_0x53ede2=_0x5292e3==_0x59991c(0x15a)?_0x152095:_0x3b09ad),config[_0x59991c(0x209)]==_0x59991c(0x16a)&&(_0x53ede2=_0x5292e3==_0x59991c(0x15a)?_0x3b09ad:_0x152095));_0x161bb9=formatResult(_0x161bb9,0x8),_0x53ede2=formatResult(_0x53ede2,0x8);const _0x40a894=await exchange[_0x59991c(0x142)](_0x5c5abf,_0x3f76c8,_0x5292e3,_0x161bb9,_0x53ede2);lastOrders[_0x59991c(0x13f)]({'orderId':_0x40a894['id'],'symbol':_0x5c5abf,'side':_0x5292e3,'reverse':_0x185b74[_0x59991c(0x191)],'amount':_0x185b74[_0x59991c(0x191)]?_0x40a894[_0x59991c(0x134)]*_0x40a894['price']:_0x40a894[_0x59991c(0x134)],'filled':_0x185b74['reverse']?_0x40a894['filled']*_0x40a894[_0x59991c(0x1cf)]:_0x40a894[_0x59991c(0x17d)],'price':_0x40a894[_0x59991c(0x1cf)]});const _0x252021=_0x3f76c8==_0x59991c(0x149)?_0x59991c(0x130):config[_0x59991c(0x209)]==_0x59991c(0x1d4)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x3f76c8==_0x59991c(0x149))logHistory(_0x59991c(0x1c8),_0x252021+_0x59991c(0x1c1)+_0x5c5abf+'\x20'+_0x5292e3+'\x20#'+formatResult(_0x40a894[_0x59991c(0x17d)],0x8)+'\x20@'+formatResult(_0x40a894['price'],0x8));else logHistory(_0x59991c(0x1c8),_0x252021+_0x59991c(0x1c1)+_0x5c5abf+'\x20'+_0x5292e3+'\x20#'+formatResult(_0x40a894[_0x59991c(0x134)],0x8)+'\x20@'+formatResult(_0x40a894[_0x59991c(0x1cf)],0x8));_0x40a894[_0x59991c(0x145)]=_0x185b74[_0x59991c(0x145)],await updateCoinResults(_0x40a894);if(config[_0x59991c(0x177)]!=0x0){let _0x12e6ae=null;if(cooldownTracker[_0x59991c(0x174)]==config[_0x59991c(0x177)]-0x1)_0x12e6ae=cooldownTracker[_0x59991c(0x115)]();const _0x164b13=getTimeStamp();cooldownTracker[_0x59991c(0x13f)](_0x164b13);if(_0x12e6ae){const _0x6c59af=fns['differenceInSeconds'](new Date(_0x164b13),new Date(_0x12e6ae));_0x6c59af<cooldownInterval&&(logHistory(_0x59991c(0x152),_0x59991c(0x143)+config[_0x59991c(0x177)]+_0x59991c(0x185)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x59991c(0x19e)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xdb4887){if(_0xdb4887[_0x59991c(0x148)]()['includes']('MIN_NOTIONAL'))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5c5abf);else{if(_0xdb4887['toString']()[_0x59991c(0x156)](_0x59991c(0x1a0)))logHistory(_0x59991c(0x152),_0x59991c(0x187)+_0x5c5abf);else await handleError(_0xdb4887,_0x59991c(0x169));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x59991c(0x170)]&&(config[_0x59991c(0x209)]==_0x59991c(0x149)?logHistory(_0x59991c(0x152),_0x59991c(0x1fe)):logHistory(_0x59991c(0x152),_0x59991c(0x1af)));else coolingDown&&(!config['headless']&&logHistory(_0x59991c(0x152),_0x59991c(0x1eb)));}}function logHistory(_0x505d77,_0x4e823b,_0x365505=''){const _0x32f804=_0x12cff9;let _0x3f2720={'time':getTimeStamp(),'type':_0x505d77,'event':_0x4e823b};dbLogs[_0x32f804(0x1a2)](_0x32f804(0x1cc))[_0x32f804(0x13f)](_0x3f2720)[_0x32f804(0x1fc)]();if(_0x365505=='')_0x365505=_0x4e823b;proxyEmit(_0x32f804(0x171),{'log':_0x3f2720,'summary':_0x365505}),process[_0x32f804(0x1ec)]({'telegram':_0x3f2720}),logging(''+_0x3f2720['event']);}function emitHistory(_0x36d4a1={}){const _0x5e5067=_0x12cff9;Object['keys'](_0x36d4a1)[_0x5e5067(0x174)]==0x0&&(_0x36d4a1={'type':[_0x5e5067(0x1c8),_0x5e5067(0x171)],'event':'','page':0x1});if(_0x36d4a1[_0x5e5067(0x216)]['includes']('event'))_0x36d4a1[_0x5e5067(0x216)]['splice'](_0x36d4a1[_0x5e5067(0x216)][_0x5e5067(0x15b)](_0x5e5067(0x171)),0x1,_0x5e5067(0x152),_0x5e5067(0x140));if(dbLogs[_0x5e5067(0x194)]('logs')['value']()){let _0x4c6af4=dbLogs['get']('logs')[_0x5e5067(0x1d0)](_0x4c50bd=>{const _0x3bdbfe=_0x5e5067;if(_0x36d4a1[_0x3bdbfe(0x216)][_0x3bdbfe(0x174)]==0x0)return![];else return _0x36d4a1[_0x3bdbfe(0x216)][_0x3bdbfe(0x156)](_0x4c50bd['type']);})[_0x5e5067(0x1d0)](_0x66baa8=>{const _0xa4301a=_0x5e5067;if(_0x36d4a1[_0xa4301a(0x171)]=='')return!![];else return _0x66baa8['event'][_0xa4301a(0x166)]()['includes'](_0x36d4a1[_0xa4301a(0x171)][_0xa4301a(0x166)]());})['sortBy'](_0x5e5067(0x11c)),_0x1bb906=_0x4c6af4[_0x5e5067(0x1a1)]()[_0x5e5067(0x174)];_0x4c6af4=_0x4c6af4[_0x5e5067(0x191)]()[_0x5e5067(0x147)]((_0x36d4a1[_0x5e5067(0x189)]-0x1)*logPageSize,_0x36d4a1[_0x5e5067(0x189)]*logPageSize-0x1)[_0x5e5067(0x191)]()['value'](),proxyEmit(_0x5e5067(0x1ff),{'logs':_0x4c6af4,'total':_0x1bb906});}else proxyEmit(_0x5e5067(0x1ff),{'logs':[],'total':0x0});}async function pauseBot(_0x1b8076){const _0x14ee9a=_0x12cff9,_0x35b894=new Date()[_0x14ee9a(0x1d3)]();if(!lastBotPause)lastBotPause=new Date()[_0x14ee9a(0x1d3)]();else{if(_0x35b894-lastBotPause-pauseBotInterval<0x1388){consecutivePauses++;if(consecutivePauses>0x5)process[_0x14ee9a(0x153)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x14ee9a(0x1d3)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x1b8076),botPaused=![],reset();}}async function handleError(_0x569ce3,_0xca7766,_0x3a4b78=''){const _0x4c3c6e=_0x12cff9;if(_0x569ce3[_0x4c3c6e(0x148)]()[_0x4c3c6e(0x156)]('DDoSProtection'))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x1d6)),await pauseBot(pauseBotInterval);else{if(_0x569ce3[_0x4c3c6e(0x148)]()[_0x4c3c6e(0x156)](_0x4c3c6e(0x163)))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x160)),await pauseBot(pauseBotInterval);else{if(_0x569ce3[_0x4c3c6e(0x148)]()['includes'](_0x4c3c6e(0x18a)))logHistory('error',_0xca7766+_0x4c3c6e(0x14d)),await pauseBot(pauseBotInterval);else{if(_0x569ce3[_0x4c3c6e(0x148)]()[_0x4c3c6e(0x156)](_0x4c3c6e(0x16b)))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x201)),logHistory(_0x4c3c6e(0x152),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['exit'](0x4d);else{if(_0x569ce3[_0x4c3c6e(0x148)]()[_0x4c3c6e(0x156)](_0x4c3c6e(0x122)))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x1fa)),logHistory(_0x4c3c6e(0x152),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4c3c6e(0x153)](0x4d);else{if(_0x569ce3[_0x4c3c6e(0x148)]()[_0x4c3c6e(0x156)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x188)),logHistory(_0x4c3c6e(0x152),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['exit'](0x4d);else{if(_0x569ce3[_0x4c3c6e(0x148)]()['includes'](_0x4c3c6e(0x1be)))logHistory('error',_0xca7766+_0x4c3c6e(0x157)),logHistory('error',_0x4c3c6e(0x16f)),process[_0x4c3c6e(0x153)](0x4d);else{if(_0x569ce3[_0x4c3c6e(0x148)]()['includes'](_0x4c3c6e(0x182)))logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x157)),logHistory(_0x4c3c6e(0x152),_0x4c3c6e(0x16f)),process[_0x4c3c6e(0x153)](0x4d);else _0x569ce3['toString']()[_0x4c3c6e(0x156)](_0x4c3c6e(0x13c))?logHistory(_0x4c3c6e(0x152),_0xca7766+_0x4c3c6e(0x1cd)):(logHistory(_0x4c3c6e(0x152),_0xca7766+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0xca7766+_0x4c3c6e(0x206),_0x569ce3),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x120db3,_0x5138b6){const _0x239460=_0x12cff9;return parseFloat(_0x120db3[_0x239460(0x1c9)](_0x5138b6));}function logging(_0x46527a,_0x907b8=''){const _0x444718=_0x12cff9;console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x444718(0x18d)+_0x46527a,_0x907b8);}function getServerTime(){const _0x443126=_0x12cff9,_0x2a6358=new Date();return _0x2a6358[_0x443126(0x1ab)]()+'/'+(_0x2a6358[_0x443126(0x186)]()+0x1)[_0x443126(0x148)]()[_0x443126(0x123)](0x2,'0')+'/'+_0x2a6358[_0x443126(0x12d)]()[_0x443126(0x148)]()[_0x443126(0x123)](0x2,'0')+'\x20'+_0x2a6358[_0x443126(0x1f4)]()[_0x443126(0x148)]()[_0x443126(0x123)](0x2,'0')+':'+_0x2a6358[_0x443126(0x1f3)]()['toString']()['padStart'](0x2,'0')+':'+_0x2a6358[_0x443126(0x179)]()['toString']()['padStart'](0x2,'0');}function _0x3b31(_0xb71bf1,_0x90ac54){const _0x5aff22=_0x3a8b();return _0x3b31=function(_0x367d7d,_0x252332){_0x367d7d=_0x367d7d-0x115;let _0x3a8b24=_0x5aff22[_0x367d7d];return _0x3a8b24;},_0x3b31(_0xb71bf1,_0x90ac54);}function getTimeStamp(){const _0xfdb17d=_0x12cff9,_0x39feff=shiftedTime();return _0x39feff[_0xfdb17d(0x1ab)]()+'/'+(_0x39feff['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x39feff[_0xfdb17d(0x12d)]()[_0xfdb17d(0x148)]()[_0xfdb17d(0x123)](0x2,'0')+'\x20'+_0x39feff['getHours']()[_0xfdb17d(0x148)]()['padStart'](0x2,'0')+':'+_0x39feff[_0xfdb17d(0x1f3)]()[_0xfdb17d(0x148)]()[_0xfdb17d(0x123)](0x2,'0')+':'+_0x39feff['getSeconds']()['toString']()[_0xfdb17d(0x123)](0x2,'0');}function getDate(){const _0x32c2e1=_0x12cff9,_0x303f5f=shiftedTime();return _0x303f5f['getFullYear']()+'/'+(_0x303f5f[_0x32c2e1(0x186)]()+0x1)[_0x32c2e1(0x148)]()['padStart'](0x2,'0')+'/'+_0x303f5f[_0x32c2e1(0x12d)]()['toString']()[_0x32c2e1(0x123)](0x2,'0');}function getHour(){const _0x56398d=_0x12cff9,_0x3b3b27=shiftedTime();return _0x3b3b27[_0x56398d(0x1f4)]()[_0x56398d(0x148)]()['padStart'](0x2,'0');}function sleep(_0x335267){return new Promise(_0x16d53f=>setTimeout(_0x16d53f,_0x335267));}function shiftedTime(){const _0x4c343a=_0x12cff9,_0x136e42=new Date();let _0x2811db=_0x136e42;if(config&&config[_0x4c343a(0x1c7)]!==0x0)_0x2811db=fns[_0x4c343a(0x19f)](_0x136e42,{'hours':config[_0x4c343a(0x1c7)]});return _0x2811db;}