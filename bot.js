const _0x50ecf5=_0x41f4;(function(_0x55012c,_0x3c8ce9){const _0xcf9f6b=_0x41f4,_0x234f27=_0x55012c();while(!![]){try{const _0x4014da=parseInt(_0xcf9f6b(0x2d2))/0x1*(parseInt(_0xcf9f6b(0x283))/0x2)+-parseInt(_0xcf9f6b(0x204))/0x3+parseInt(_0xcf9f6b(0x233))/0x4*(parseInt(_0xcf9f6b(0x1eb))/0x5)+-parseInt(_0xcf9f6b(0x1f6))/0x6*(-parseInt(_0xcf9f6b(0x2c2))/0x7)+parseInt(_0xcf9f6b(0x1ca))/0x8*(-parseInt(_0xcf9f6b(0x171))/0x9)+parseInt(_0xcf9f6b(0x213))/0xa+-parseInt(_0xcf9f6b(0x205))/0xb;if(_0x4014da===_0x3c8ce9)break;else _0x234f27['push'](_0x234f27['shift']());}catch(_0x2ac493){_0x234f27['push'](_0x234f27['shift']());}}}(_0xe30b,0x2ec78));const _0x3e358e=function(){let _0x390206=!![];return function(_0x1fbdc3,_0x28d74d){const _0x5c8c1a=_0x390206?function(){const _0x4014ce=_0x41f4;if(_0x28d74d){const _0x3067af=_0x28d74d[_0x4014ce(0x294)](_0x1fbdc3,arguments);return _0x28d74d=null,_0x3067af;}}:function(){};return _0x390206=![],_0x5c8c1a;};}(),_0x12f7c9=_0x3e358e(this,function(){const _0x39300a=_0x41f4;return _0x12f7c9['toString']()[_0x39300a(0x212)](_0x39300a(0x211))[_0x39300a(0x26e)]()[_0x39300a(0x1ea)](_0x12f7c9)[_0x39300a(0x212)](_0x39300a(0x211));});_0x12f7c9();'use strict';const ccxt=require(_0x50ecf5(0x231)),low=require(_0x50ecf5(0x227)),FileSync=require(_0x50ecf5(0x2d5)),fs=require('fs'),fns=require(_0x50ecf5(0x1f7)),Crypt=require(_0x50ecf5(0x21b))['Crypt'],util=require(_0x50ecf5(0x1e0)),argv=require(_0x50ecf5(0x1e5))(process[_0x50ecf5(0x274)]['slice'](0x2))[_0x50ecf5(0x274)],path=require(_0x50ecf5(0x22c));let exchange;global[_0x50ecf5(0x20a)]={},global[_0x50ecf5(0x234)]={};function _0xe30b(){const _0x17c681=['\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Portfolio\x20change\x20detected:\x20','\x20portfolio:</b>\x20\x0a\x0a','getPortfolio(2)','UNLOCKED','\x20-\x20pausing\x20bot\x20for\x20','31264iQMaFb','error','-------------------------------\x0a','threshold','USDP','Pausing\x20for\x20','autoliquidity','recreateCoinResults()','no\x20open\x20orders','coin','\x20|\x20highest\x20fee:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','isEqual','number','find','added','\x20minutes','apply','push','limit-low','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Avoiding\x20continuous\x20order\x20attempts','1\x20-\x20Handle\x20open\x20orders','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Net\x20effect','fiat','exchanges','random','reverse','0\x20-\x20EXECUTION:\x20','logs','showname','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','1\x20-\x20FILLED:\x20','toUpperCase','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','join','target','getStartingBalances','2.3.5','\x20has\x20a\x2024h\x20drop\x20of\x20','price','-results.json','basecoin','changes','emitHistory','defaults','\x20orders\x20in\x20less\x20than\x20','value','getMonth','\x20:\x20','replace','spot','balances','sha256','netoffset','sortBy','watchOrders',':\x20timer\x20>','limit-high','remainingSymbols','amountToPrecision','1\x20-\x20Unlock\x20orders','2422847lRzPFP','Invalid\x20quantity','\x20hour','pro','\x20closed\x20the\x20connection','LOCKED','001','Initiating\x20exchange\x20reload','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Error\x20details:','createOrder','\x20-\x20bot\x20not\x20started','Resetting\x20coin\x20results:\x20','ExchangeError','yyyy/MM/dd','16hQFSTx','headless','balancing\x20resumes\x20when\x20cooldown\x20ends','lowdb/adapters/FileSync','startdate','currency','net-basecoin','decrypt','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','restart','red_yellow_blue','exchange','\x20change','datetime','timeout','freeze','padStart','\x20not\x20responding','existsSync','apiSecret','filter','amount','initTickers()','liquidity','sendPortfolioTelegram','fetchTickers','data','customId','enabled','Uncaught\x20Exception:','max','cancel','Binance','cancelLoading','usd','includes','add','string','unlinkSync','\x20network\x20error','test','DDoSProtection','offset','Error\x20while\x20deleting\x20files:\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','event','ask','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','%\x20(','bot-','log','filled','9UphCSf','buys','Resetting\x20bot\x20history',':\x20Bot\x20','colorscheme','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','distribution','fromCodePoint','mkdirSync','leftTxt','shift','none','apiPassword','time','message','warning','BNB','toLowerCase','\x20metrics:</b>\x20\x0a\x0a','configuration','fetchTickers()','./config/','storeFiat','min','</pre>','ordertype','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getPortfolio','bots','slice','send','portfolio','password','has','percentage','getHours','running','\x20>\x20','eur','/output-000.log','status','ORDERS.LOCKED','forEach','AuthenticationError','Market','date','RSA-OAEP','page','Failed\x20to\x20load\x20coin\x20data\x20for\x20','API-key\x20format\x20invalid','ExchangeNotAvailable','/USD','Net\x20','-events.json','cancelOrder','RateLimitExceeded','getPortfolio(1)','startprice','getOpenOrders()','InvalidOrder','Limit\x20(high-margin)','botID','order','coins','full','cooldown','length','entries','openOrders','InvalidNonce','concat','Order\x20filled:\x20','closed','change24h','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','USDC','watchTrades()','Exception\x20thrown\x20in\x20','buy','orderstatus','trade','net-fiat','assign','set','ORDERS.UNLOCKING','getCoins()','initclient','sell','MIN_NOTIONAL','1797560BwomWH','***','get','\x20>\x20[DEBUG]\x20','2.5.0','limit','open','\x20API\x20key\x20is\x20invalid','createWriteStream','stringify','breakeven','getDate','orderId','\x20|\x20','ongoing','format','fee','debug','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','parse','Error:\x20Invalid\x20argument\x20','basecoinvalue','util','ID:\x20','function','NetworkError','excluded','yargs/yargs','BTC','ETH','<b>','getFullYear','constructor','12250PLeKVv','kill','average','fetchOpenOrders','Insufficient\x20funds\x20to\x20execute\x20order:\x20','-performance.json','Executing\x20exchange\x20reload','Unknown\x20error\x20occured','fetchBalance','Saving\x20configuration','startnumber','6HKkzaS','date-fns','toFixed','onepagemode','2\x20-\x20FILLED\x20known\x20order:\x20','symbol','-config.json','realized','getSeconds','bot','storeHeadless','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','apiKey','getMinutes','1099332awVuHu','3804405sPyTFh','\x20not\x20available','split','findIndex','InsufficientFunds','ticker','storeConfiguration','ORDERS.UNLOCKED','round','UNLOCKING','type','differenceInSeconds','(((.+)+)+)+$','search','2604190xJeQFk','canceled','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','total','Loading\x20completed','getPortfolio(0)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Manual\x20balancing\x20required','hybrid-crypto-js','rightTxt','padEnd','RequestTimeout','Cex','startsWith','starting-balances','Order\x20amount\x20is\x20invalid:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','highest','toggleBotMode','market','lowdb','bid','USDT','EUR','Transaction\x20detection\x20unblocked','path','BNB/','privateKey','secure','sort','ccxt','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','444ZitpTa','change','\x20exchange','Bot\x20','remove','Transaction\x20detection\x20blocked','loadSymbols()','************','write','floor','Order\x20is\x20invalid:\x20','\x20minutes\x20-\x20','placeOrder()','emojisell','delta','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','/EUR','\x20API\x20secret\x20is\x20invalid','substring','stopExchange()','event-history','resetHistory','active','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Unfilled\x20order(s)\x20canceled\x20after\x20','<pre>','configuration-stored','timeshift','recovery','success','Initializing\x20coin\x20results','exec','side','version','3\x20-\x20handling\x20FILLED\x20order:\x20','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','final','fetchTicker','Fee\x20discount\x20refund\x20detected:\x20','valid','\x20order:\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','getTime','\x20value','abs','TUSD','args','progress','fetchClosedOrders','Order(s)\x20not\x20validated\x20after\x20','botname','splice','recent20','watchTrades','uncaughtException','initial','USD','\x20|\x20lock\x20orders:\x20','./logs/','toString','\x20|\x20exchange:\x20','placeOrder','\x20|\x20Custom\x20ID:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','Cooldown\x20ended\x20-\x20balancing\x20resumed','argv','getCoinNumber()','deleteHistoryAlerts','limits','loadMarkets','last','sells','cost','emojibuy'];_0xe30b=function(){return _0x17c681;};return _0xe30b();}const usdBasecoins=[_0x50ecf5(0x26b),'BUSD',_0x50ecf5(0x260),_0x50ecf5(0x229),_0x50ecf5(0x1bc),_0x50ecf5(0x287)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x50ecf5(0x2e1)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x50ecf5(0x281)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x50ecf5(0x282)+pauseBotInterval/0xea60+_0x50ecf5(0x293),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const serverversion=require('./version.json')[_0x50ecf5(0x254)],botID=process[_0x50ecf5(0x274)][0x2]||_0x50ecf5(0x2c8),pattern=/^[0-9]{3}$/;!pattern[_0x50ecf5(0x165)](botID)&&(console[_0x50ecf5(0x16f)](_0x50ecf5(0x1de)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x50ecf5(0x186)+userID+'/':'./config/',logspath=userID?_0x50ecf5(0x26d)+userID+'/':_0x50ecf5(0x26d),loggerfile=fs[_0x50ecf5(0x1d2)](logspath+_0x50ecf5(0x198),{'flags':'a'});!fs[_0x50ecf5(0x2e4)](configpath)&&fs[_0x50ecf5(0x179)](configpath);!fs[_0x50ecf5(0x2e4)](logspath)&&fs[_0x50ecf5(0x179)](logspath);const configfile=configpath+_0x50ecf5(0x16e)+botID+_0x50ecf5(0x1fc),logfile=configpath+_0x50ecf5(0x16e)+botID+_0x50ecf5(0x1a6),performancefile=configpath+'bot-'+botID+_0x50ecf5(0x1f0),coinresultsfile=configpath+_0x50ecf5(0x16e)+botID+_0x50ecf5(0x2ad),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x41f4(_0x59830b,_0x52cb08){const _0x3e07a2=_0xe30b();return _0x41f4=function(_0x12f7c9,_0x3e358e){_0x12f7c9=_0x12f7c9-0x162;let _0xe30b4f=_0x3e07a2[_0x12f7c9];return _0xe30b4f;},_0x41f4(_0x59830b,_0x52cb08);}dbLogs['defaults']({'logs':[],'version':serverversion})[_0x50ecf5(0x23b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x50ecf5(0x2b1)]({'bot':[],'version':serverversion})[_0x50ecf5(0x23b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x50ecf5(0x23b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x50ecf5(0x2b9),'rsaStandard':_0x50ecf5(0x19f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x569259=>{const _0x2597b5=_0x50ecf5;console[_0x2597b5(0x16f)](_0x569259);},'simple':_0x15a2e8=>{const _0x53e9f9=_0x50ecf5;console[_0x53e9f9(0x16f)](_0x15a2e8),loggerfile[_0x53e9f9(0x23b)](util[_0x53e9f9(0x1d9)](_0x15a2e8)+'\x0a');},'full':async(_0x5c7d09,_0x40e14c='')=>{const _0x2d0719=_0x50ecf5;let _0x1389a6;if(config[_0x2d0719(0x2a2)])_0x1389a6=getTimeStamp()+':\x20'+config[_0x2d0719(0x265)]+_0x2d0719(0x196)+_0x5c7d09;else _0x1389a6=getTimeStamp()+_0x2d0719(0x174)+botID+_0x2d0719(0x196)+_0x5c7d09;console['log'](_0x1389a6),loggerfile[_0x2d0719(0x23b)](util[_0x2d0719(0x1d9)](_0x1389a6)+'\x0a'),_0x40e14c&&(console[_0x2d0719(0x16f)](_0x40e14c),loggerfile[_0x2d0719(0x23b)](util['format'](_0x40e14c)+'\x0a'));},'debug':async(_0x27032d,_0x3eb5a7='')=>{const _0x54b64e=_0x50ecf5;let _0x13020a;if(config[_0x54b64e(0x2a2)])_0x13020a=getTimeStamp()+':\x20'+config['botname']+_0x54b64e(0x1cd)+_0x27032d;else _0x13020a=getTimeStamp()+_0x54b64e(0x174)+botID+_0x54b64e(0x1cd)+_0x27032d;if(debugging)console[_0x54b64e(0x16f)](_0x13020a);loggerfile['write'](util['format'](_0x13020a)+'\x0a');if(_0x3eb5a7){if(debugging)console[_0x54b64e(0x16f)](_0x3eb5a7);loggerfile['write'](util['format'](_0x3eb5a7)+'\x0a');}}};process['on'](_0x50ecf5(0x269),function(_0x1e2155){const _0x2fec8e=_0x50ecf5;logHistory(_0x2fec8e(0x284),_0x2fec8e(0x169)),logger[_0x2fec8e(0x1db)](_0x2fec8e(0x2ef),_0x1e2155);});settings[_0x50ecf5(0x24e)]!=config['timeshift']&&updateTimeshift(settings[_0x50ecf5(0x24e)]);settings['onepagemode']!=config[_0x50ecf5(0x1f9)]&&updateOnepagemode(settings[_0x50ecf5(0x1f9)]);process['send']({'started':_0x50ecf5(0x195)},_0x1f602c=>{}),initializeProcessListeners();function proxyEmit(_0x3e5e6b,_0x9f5bb5=null){const _0xb7961f=_0x50ecf5;process[_0xb7961f(0x18f)]({'function':_0x3e5e6b,'args':_0x9f5bb5},_0xf48471=>{});}function initializeProcessListeners(){const _0x445a4e=_0x50ecf5;process['on'](_0x445a4e(0x17f),_0x3272a3=>{const _0x168f6e=_0x445a4e;switch(Object['keys'](_0x3272a3)[0x0]){case _0x168f6e(0x24e):_0x3272a3[_0x168f6e(0x24e)]!=undefined&&(settings['timeshift']=_0x3272a3[_0x168f6e(0x24e)],updateTimeshift(settings[_0x168f6e(0x24e)]));break;case _0x168f6e(0x1f9):_0x3272a3[_0x168f6e(0x1f9)]!=undefined&&(settings['onepagemode']=_0x3272a3[_0x168f6e(0x1f9)],updateOnepagemode(settings[_0x168f6e(0x1f9)]));break;case _0x168f6e(0x18d):_0x3272a3[_0x168f6e(0x18d)]!=undefined&&(bots=JSON[_0x168f6e(0x1dd)](_0x3272a3[_0x168f6e(0x18d)]),proxyEmit(_0x168f6e(0x18d),bots));break;case _0x168f6e(0x1e2):switch(_0x3272a3[_0x168f6e(0x1e2)]){case _0x168f6e(0x1c7):initclient();break;case _0x168f6e(0x225):toggleBotMode();break;case _0x168f6e(0x2b0):emitHistory(_0x3272a3['args']);break;case _0x168f6e(0x276):deleteHistoryAlerts(_0x3272a3[_0x168f6e(0x261)]);break;case _0x168f6e(0x18c):getPortfolio(_0x3272a3[_0x168f6e(0x261)]);break;case _0x168f6e(0x20b):storeConfiguration(_0x3272a3['args']);break;case _0x168f6e(0x200):storeHeadless(_0x3272a3[_0x168f6e(0x261)]);break;case _0x168f6e(0x187):storeFiat(_0x3272a3['args']);break;case _0x168f6e(0x248):resetHistory();break;case _0x168f6e(0x2a9):getStartingBalances(getNormalizedPerformance());break;case _0x168f6e(0x270):placeOrder(_0x3272a3['args']);break;case _0x168f6e(0x2f3):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x168f6e(0x2ea):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x4ea893=![]){const _0x250b7e=_0x50ecf5;logger[_0x250b7e(0x1db)]('Reset\x20|\x20'+(_0x4ea893?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x250b7e(0x26f)+config[_0x250b7e(0x2dd)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4ea893)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x250b7e(0x202)]!=''&&config[_0x250b7e(0x202)]!=_0x250b7e(0x1cb)){loadingProgress=0x0;if(_0x4ea893){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4ab939){handleErrorNoStop(_0x4ab939,_0x250b7e(0x239));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4f5116=await getCoins();[currentCoins,currentCoinsAll]=_0x4f5116,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x250b7e(0x1db)](_0x250b7e(0x217)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x250b7e(0x1b3)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x35b3a1=_0x50ecf5;exchangeStopped=!![];try{await exchange['close']();}catch(_0x5e2ce2){await handleError(_0x5e2ce2,_0x35b3a1(0x246));}}async function reloadExchange(){const _0x2f41f8=_0x50ecf5;logger[_0x2f41f8(0x1db)](_0x2f41f8(0x2c9));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2f41f8(0x1db)](_0x2f41f8(0x1f1)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0xd7593f=config['exchange'],_0x4c53da=config[_0x50ecf5(0x202)],_0x2cca86=config[_0x50ecf5(0x2e5)],_0x262839=config['apiPassword']){const _0x290d1b=_0x50ecf5;exchange&&await stopExchange();!supportedExchanges()['includes'](_0xd7593f)&&(logHistory(_0x290d1b(0x284),_0x290d1b(0x201)+_0xd7593f+_0x290d1b(0x235)),killBot());const _0x546df2=ccxt[_0x290d1b(0x2c5)][_0xd7593f[_0x290d1b(0x182)]()];exchange=new _0x546df2({'apiKey':_0x4c53da,'secret':_0x2cca86,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x290d1b(0x2b7)}});if(_0x262839)exchange['password']=_0x262839;}function setStableCoins(){const _0x4bf36b=_0x50ecf5;let _0x543acb=config[_0x4bf36b(0x2ae)]=='ETH'?_0x4bf36b(0x1e7):_0x4bf36b(0x1e6),_0x53bbc2=!allSymbols['includes'](_0x543acb+_0x4bf36b(0x1a4))?_0x4bf36b(0x229):_0x4bf36b(0x26b),_0x2d8984=!allSymbols[_0x4bf36b(0x2f5)](_0x543acb+_0x4bf36b(0x243))?_0x53bbc2:'EUR';stablecoins={'eur':{'coin':''+_0x543acb+_0x2d8984,'symbol':_0x543acb+'/'+_0x2d8984},'usd':{'coin':''+_0x543acb+_0x53bbc2,'symbol':_0x543acb+'/'+_0x53bbc2}};}async function initwsCcxt(){const _0x113c26=_0x50ecf5;initCycle++;const _0x5bb270=initCycle;let _0x2a6b8d=[];config[_0x113c26(0x190)]['forEach'](_0x1b373d=>{const _0x2a3ae2=_0x113c26;if(!_0x1b373d[_0x2a3ae2(0x1e4)]&&_0x1b373d[_0x2a3ae2(0x28c)]!=config[_0x2a3ae2(0x2ae)])_0x2a6b8d[_0x2a3ae2(0x295)](_0x1b373d['symbol']);});if(!_0x2a6b8d['includes'](stablecoins[_0x113c26(0x197)][_0x113c26(0x1fb)]))_0x2a6b8d[_0x113c26(0x295)](stablecoins['eur']['symbol']);if(!_0x2a6b8d[_0x113c26(0x2f5)](stablecoins[_0x113c26(0x2f4)][_0x113c26(0x1fb)]))_0x2a6b8d['push'](stablecoins[_0x113c26(0x2f4)][_0x113c26(0x1fb)]);if(config['exchange'][_0x113c26(0x220)](_0x113c26(0x2f2))){if(!_0x2a6b8d[_0x113c26(0x2f5)](_0x113c26(0x22d)+config[_0x113c26(0x2ae)]))_0x2a6b8d['push'](_0x113c26(0x22d)+config[_0x113c26(0x2ae)]);}loadCoins(_0x2a6b8d),_0x2a6b8d=validateSymbols(_0x2a6b8d);const _0x55e5b3=async _0x374bd5=>{const _0x462c30=_0x113c26;let _0x427415;try{const _0x18bd49=await exchange[_0x462c30(0x2eb)](_0x374bd5);Object[_0x462c30(0x1b4)](_0x18bd49)[_0x462c30(0x19b)](_0xa1aea=>{const _0x65d5ec=_0x462c30;_0x427415=_0xa1aea[0x1]['symbol'],global[_0x65d5ec(0x20a)][noslash(_0x427415)]=_0xa1aea[0x1]['last'],global['change'][_0x427415]=_0xa1aea[0x1][_0x65d5ec(0x193)];});}catch(_0x25944d){await handleError(_0x25944d,_0x462c30(0x2e8),_0x427415);}},_0x21d6f9=async _0x243a0f=>{const _0x458c5e=_0x113c26;while(initCycle==_0x5bb270){if(!botPaused)try{const _0x58b1b2=await exchange['watchTrades'](_0x243a0f);global['ticker'][noslash(_0x58b1b2[0x0][_0x458c5e(0x1fb)])]=_0x58b1b2[0x0][_0x458c5e(0x2ac)],await sleep(0x3e8);}catch(_0x2e4c08){if(!exchangeStopped)await handleError(_0x2e4c08,_0x458c5e(0x1bd),_0x243a0f);}else await sleep(0x64);}},_0x5140a9=async _0x3322b7=>{const _0x434648=_0x113c26;await sleep(0x3c*0x3e8);while(initCycle==_0x5bb270){if(!botPaused){let _0x3b2364;try{const _0x2e3a6c=await exchange[_0x434648(0x2eb)](_0x3322b7);Object[_0x434648(0x1b4)](_0x2e3a6c)['forEach'](_0x5bf9a9=>{const _0x33a3b2=_0x434648;_0x3b2364=_0x5bf9a9[0x1][_0x33a3b2(0x1fb)],global[_0x33a3b2(0x234)][_0x3b2364]=_0x5bf9a9[0x1][_0x33a3b2(0x193)];}),await sleep(0x3c*0x3e8);}catch(_0x25237){if(!exchangeStopped)await handleError(_0x25237,_0x434648(0x185),_0x3b2364);}}else await sleep(0x64);}},_0x406a58=async _0x3f2afa=>{const _0x4a436d=_0x113c26;while(initCycle==_0x5bb270){if(!botPaused)try{const _0x4657e0=await exchange[_0x4a436d(0x2bc)](_0x3f2afa);initCycle==_0x5bb270&&_0x4657e0[_0x4a436d(0x19b)](_0x1ebe3c=>{updateNumberCoinsCcxt(_0x1ebe3c);});}catch(_0x3d7a75){if(!exchangeStopped)await handleError(_0x3d7a75,'watchOrders()');}else await sleep(0x64);}};_0x55e5b3(_0x2a6b8d),_0x5140a9(_0x2a6b8d),_0x2a6b8d['forEach'](_0x12fbd6=>{_0x21d6f9(_0x12fbd6),_0x406a58(_0x12fbd6);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x68bb14=_0x50ecf5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x53c9ef=await getCoins(),[_0x493ad6,_0x38f678]=_0x53c9ef;let _0x11999a=[];currentCoins[_0x68bb14(0x19b)](_0xb72cbd=>{const _0x1641c4=_0x68bb14,_0x566b54=_0x493ad6[_0x1641c4(0x291)](_0x22855a=>_0x22855a[_0x1641c4(0x28c)]==_0xb72cbd[_0x1641c4(0x28c)]);if(_0x566b54){if(_0xb72cbd[_0x1641c4(0x290)]!=_0x566b54[_0x1641c4(0x290)]){let _0x5690a3;if(_0xb72cbd[_0x1641c4(0x28c)]!=config[_0x1641c4(0x2ae)]){const _0x252fd1=global[_0x1641c4(0x20a)][noslash(_0xb72cbd[_0x1641c4(0x1fb)])];_0x5690a3=_0xb72cbd['reverse']?0x1/_0x252fd1:_0x252fd1;}else _0x5690a3=0x1;_0x11999a[_0x1641c4(0x295)]({'coin':_0xb72cbd[_0x1641c4(0x28c)],'symbol':_0xb72cbd[_0x1641c4(0x1fb)],'price':_0x5690a3,'number':Number(formatResult(_0x566b54[_0x1641c4(0x290)]-_0xb72cbd[_0x1641c4(0x290)],0x8)),'basecoinvalue':_0x5690a3*(_0x566b54[_0x1641c4(0x290)]-_0xb72cbd['number'])});}}});if(_0x11999a[_0x68bb14(0x1b3)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x68bb14(0x1db)](_0x68bb14(0x219)+_0x11999a[0x0]['basecoinvalue']+_0x68bb14(0x28d)+lastFees[_0x68bb14(0x224)]);if(lastFees[_0x68bb14(0x224)]==0x0||Math['abs'](_0x11999a[0x0][_0x68bb14(0x1df)])>lastFees[_0x68bb14(0x224)]){delete _0x11999a[0x0][_0x68bb14(0x1fb)],delete _0x11999a[0x0]['basecoinvalue'];let _0x163d37=[],_0x597291=[...config[_0x68bb14(0x2e9)]]||[],_0x28ad7a=config[_0x68bb14(0x2e9)];_0x597291[_0x68bb14(0x230)]((_0x5a442a,_0x1203e8)=>_0x5a442a[_0x68bb14(0x19e)]>_0x1203e8[_0x68bb14(0x19e)]?-0x1:_0x1203e8[_0x68bb14(0x19e)]>_0x5a442a[_0x68bb14(0x19e)]?0x1:0x0);const _0x437af5=getDate();if(_0x597291[0x0]){const _0x441cfb=fns[_0x68bb14(0x1dd)](_0x597291[0x0]['date'],'yyyy/MM/dd',new Date()),_0xa7a8c5=fns[_0x68bb14(0x1dd)](_0x437af5,'yyyy/MM/dd',new Date());if(fns[_0x68bb14(0x28f)](_0x441cfb,_0xa7a8c5)){_0x163d37=_0x597291[0x0]['changes'];const _0x302973=_0x163d37[_0x68bb14(0x291)](_0x4a97cb=>_0x4a97cb['coin']==_0x11999a[0x0]['coin']);_0x302973?(_0x302973[_0x68bb14(0x290)]+=_0x11999a[0x0][_0x68bb14(0x290)],_0x302973[_0x68bb14(0x290)]==0x0&&(_0x163d37=_0x163d37[_0x68bb14(0x2e6)](_0x186e32=>{const _0x3a6b88=_0x68bb14;return _0x186e32['coin']!=_0x11999a[0x0][_0x3a6b88(0x28c)];}))):_0x163d37[_0x68bb14(0x295)](_0x11999a[0x0]);const _0x29b5d2=_0x28ad7a[_0x68bb14(0x291)](_0x2402c3=>_0x2402c3[_0x68bb14(0x19e)]==_0x437af5);_0x29b5d2['changes']=_0x163d37;}else _0x28ad7a['push']({'date':_0x437af5,'changes':[_0x11999a[0x0]]});}const _0x38bf41=_0x28ad7a['find'](_0x4502c3=>_0x4502c3['date']==_0x437af5);if(_0x38bf41){let _0x1f1f78=!![];_0x38bf41['changes'][_0x68bb14(0x19b)](_0x151e92=>{const _0x1bec33=_0x68bb14;if(_0x151e92[_0x1bec33(0x290)]!=0x0)_0x1f1f78=![];}),_0x1f1f78&&(_0x28ad7a=_0x28ad7a[_0x68bb14(0x2e6)](_0x425a16=>{const _0x2feab0=_0x68bb14;return _0x425a16[_0x2feab0(0x19e)]!=_0x437af5;}));}let _0x117fae=dbConfig[_0x68bb14(0x1cc)](_0x68bb14(0x1ff))[_0x68bb14(0x291)]({'botID':botID})['value']();_0x117fae&&(dbConfig['get'](_0x68bb14(0x1ff))[_0x68bb14(0x291)]({'botID':botID})[_0x68bb14(0x1c3)]({'liquidity':_0x28ad7a})[_0x68bb14(0x23b)](),config['liquidity']=_0x28ad7a),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x11999a[0x0][_0x68bb14(0x290)])+'\x20'+_0x11999a[0x0][_0x68bb14(0x28c)]+'\x20'+(_0x11999a[0x0][_0x68bb14(0x290)]>0x0?'added':'removed')+_0x68bb14(0x29a)),proxyEmit(_0x68bb14(0x184),emittedConfiguration());}else logger['debug'](_0x68bb14(0x259)+Math[_0x68bb14(0x25f)](_0x11999a[0x0][_0x68bb14(0x290)])+'\x20'+_0x11999a[0x0]['coin']+'\x20'+(_0x11999a[0x0][_0x68bb14(0x290)]>0x0?_0x68bb14(0x292):'removed'));transactionDetected=!![],currentCoins=_0x493ad6,currentCoinsAll=_0x38f678;}else logger[_0x68bb14(0x1db)](_0x68bb14(0x27e)+Math[_0x68bb14(0x25f)](_0x11999a[0x0]['number'])+'\x20'+_0x11999a[0x0][_0x68bb14(0x28c)]+'\x20'+(_0x11999a[0x0]['number']>0x0?_0x68bb14(0x292):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x493ad6,currentCoinsAll=_0x38f678;}await sleep(watchTransactionsInterval);}catch(_0x1e55e4){if(!exchangeStopped)await handleError(_0x1e55e4,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x2676c0=_0x50ecf5;try{markets=await exchange[_0x2676c0(0x278)](),allSymbols=[],Object[_0x2676c0(0x1b4)](markets)['forEach'](_0x47bd0c=>{const _0x393de9=_0x2676c0;_0x47bd0c[0x1][_0x393de9(0x249)]&&_0x47bd0c[0x1]['spot']&&allSymbols[_0x393de9(0x295)](_0x47bd0c[0x0]);});}catch(_0x3586d2){throw _0x3586d2;}}function validateSymbols(_0x5c2a21){const _0x1fe058=_0x50ecf5;let _0x1edece=[];return _0x5c2a21[_0x1fe058(0x19b)](_0x547069=>{const _0x29deaf=_0x1fe058;!allSymbols[_0x29deaf(0x2f5)](_0x547069)?logHistory('error','Invalid\x20symbol:\x20'+_0x547069+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x1edece['push'](_0x547069);}),_0x1edece;}async function initclient(){const _0x317aad=_0x50ecf5;proxyEmit(_0x317aad(0x184),emittedConfiguration()),proxyEmit(_0x317aad(0x29d),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x317aad(0x2b8),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x24bdbf=getNormalizedPerformance();emitPerformance(_0x24bdbf),getStartingBalances(_0x24bdbf);}async function toggleBotMode(){const _0x5cd043=_0x50ecf5;let _0xa3cb9a=dbConfig[_0x5cd043(0x1cc)](_0x5cd043(0x1ff))[_0x5cd043(0x291)]({'botID':botID})[_0x5cd043(0x2b3)]();if(_0xa3cb9a){const _0x1d592a=!_0xa3cb9a[_0x5cd043(0x2d3)];dbConfig[_0x5cd043(0x1cc)](_0x5cd043(0x1ff))[_0x5cd043(0x291)]({'botID':botID})[_0x5cd043(0x1c3)]({'headless':_0x1d592a})['write'](),config[_0x5cd043(0x2d3)]=_0x1d592a,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xaf042e=_0x50ecf5;process[_0xaf042e(0x18f)]({'updatebotmanager':!![]},_0x326c31=>{});}async function loadCoins(_0xd18d4c){const _0x5fba98=_0x50ecf5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4c8eb0,_0x4a4ddc=0x0,_0x1be8b2=0x0;_0xd18d4c[_0x5fba98(0x19b)](_0x2ffe3d=>{const _0x1cd5d8=_0x5fba98;loading['remainingSymbols'][_0x1cd5d8(0x295)](_0x2ffe3d);}),loadingCanceled=![];let _0x3e3a9f=![];while(_0x4c8eb0!=_0xd18d4c[_0x5fba98(0x1b3)]+maxLoadingProgress){_0x4c8eb0=loadingProgress,_0xd18d4c['forEach'](_0x3d346c=>{const _0x495f6f=_0x5fba98;if(global[_0x495f6f(0x20a)][noslash(_0x3d346c)]){loading[_0x495f6f(0x2bf)]=loading[_0x495f6f(0x2bf)][_0x495f6f(0x2e6)](_0xe5e86c=>_0xe5e86c!=_0x3d346c);if(!watchedSymbols[_0x495f6f(0x2f5)](_0x3d346c))watchedSymbols[_0x495f6f(0x295)](_0x3d346c);_0x4c8eb0++;}}),loading[_0x5fba98(0x262)]=Math['round'](_0x4c8eb0/(_0xd18d4c[_0x5fba98(0x1b3)]+maxLoadingProgress)*0x64);loading[_0x5fba98(0x262)]!=0x64&&(_0x1be8b2>0x1e*0x5&&(loading[_0x5fba98(0x2e0)]=!![],emitLoadingProgress()),_0x1be8b2>0x78*0x5&&!_0x3e3a9f&&(loading[_0x5fba98(0x2f1)]=!![],emitLoadingProgress(),_0x3e3a9f=!![],logHistory(_0x5fba98(0x284),_0x5fba98(0x1a1)+loading[_0x5fba98(0x2bf)][_0x5fba98(0x2a7)](',\x20')+_0x5fba98(0x2ce)),logHistory(_0x5fba98(0x284),_0x5fba98(0x288)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x20cb8f=_0x5fba98;process[_0x20cb8f(0x18f)]({'stop':_0x20cb8f(0x2db)},_0xfda729=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4a4ddc!=loading[_0x5fba98(0x262)]&&(_0x4a4ddc=loading[_0x5fba98(0x262)],emitLoadingProgress()),_0x1be8b2++,await sleep(0xc8);}_0x4c8eb0==_0xd18d4c[_0x5fba98(0x1b3)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x5fba98(0x18f)]({'status':_0x5fba98(0x2ee),'live':_0x5fba98(0x195)},_0x5ee1da=>{}),_0x3e3a9f&&logHistory(_0x5fba98(0x250),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x281690=_0x50ecf5;proxyEmit(_0x281690(0x184),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x13a72=_0x50ecf5;let _0x573bef=global[_0x13a72(0x20a)][stablecoins[_0x13a72(0x197)][_0x13a72(0x28c)]],_0x53bd23=global['ticker'][stablecoins[_0x13a72(0x2f4)][_0x13a72(0x28c)]];return{'eur':Number(_0x573bef),'usd':Number(_0x53bd23)};}function capitalize(_0x90b771){const _0xef5c1b=_0x50ecf5;return _0x90b771[_0xef5c1b(0x245)](0x0,0x1)[_0xef5c1b(0x2a5)]()+_0x90b771[_0xef5c1b(0x245)](0x1);}function supportedExchanges(){const _0x25f9e1=_0x50ecf5,_0x2a728c=['ws','fetchTickers',_0x25f9e1(0x258),_0x25f9e1(0x268),_0x25f9e1(0x2bc),_0x25f9e1(0x1a7),_0x25f9e1(0x2cd),'fetchOpenOrders',_0x25f9e1(0x263),'fetchBalance'];let _0x119278=[],_0x433cb3=[],_0x37879e=ccxt[_0x25f9e1(0x2c5)][_0x25f9e1(0x29d)];_0x37879e[_0x25f9e1(0x19b)](_0x623f8a=>{const _0x34200e=_0x25f9e1;try{const _0x162bd3=new ccxt[(_0x34200e(0x2c5))][_0x623f8a]();_0x433cb3[_0x34200e(0x295)](_0x162bd3);}catch(_0x35e1c8){}}),_0x433cb3['forEach'](_0x29f4e1=>{const _0x4178ed=_0x25f9e1;let _0x1ea031=0x0;_0x2a728c[_0x4178ed(0x19b)](_0x47e6e2=>{const _0x18fcd5=_0x4178ed;_0x47e6e2 in _0x29f4e1['has']&&_0x29f4e1[_0x18fcd5(0x192)][_0x47e6e2]&&_0x1ea031++;}),_0x1ea031==_0x2a728c[_0x4178ed(0x1b3)]&&_0x119278[_0x4178ed(0x295)](capitalize(_0x29f4e1['id']));});let _0x4cab31=[];return _0x37879e[_0x25f9e1(0x19b)](_0x4590ba=>{const _0x37e652=_0x25f9e1;_0x4590ba=capitalize(_0x4590ba);if(!_0x119278[_0x37e652(0x2f5)](_0x4590ba))_0x4cab31[_0x37e652(0x295)](_0x4590ba);}),_0x119278;}function setStartDatePerformance(){const _0xc83068=_0x50ecf5;if(config&&config[_0xc83068(0x2e9)][0x0][_0xc83068(0x2af)]['length']!=0x0){const _0x718b41=config[_0xc83068(0x2e9)][0x0]['changes'];dbPerformance[_0xc83068(0x1cc)](_0xc83068(0x2ec))[_0xc83068(0x291)]({'date':config['startdate']})[_0xc83068(0x1c3)]({'coins':_0x718b41})['write']();}}async function recreateCoinResults(){const _0x50b27b=_0x50ecf5;let _0x21201e,_0x306286=[];try{const _0x37b6c1=fns['format'](fns['parseISO'](config['startdate']['replace'](/\//g,'-')),_0x50b27b(0x272));for(const _0x17c843 of currentCoins){if(_0x17c843['coin']!=config[_0x50b27b(0x2ae)]){let _0x4f564f=0x0,_0x199ae1,_0x54b7c4;_0x21201e=await getAllEventOrders(_0x17c843[_0x50b27b(0x1fb)]);if(_0x21201e[_0x50b27b(0x1b3)]>0x0)_0x21201e['forEach'](_0xfd7aec=>{const _0x8e94=_0x50b27b,_0xe6f3ab=_0x17c843['symbol'][_0x8e94(0x2f5)](config['basecoin']+'/');_0x306286['push']({'datetime':_0xfd7aec[_0x8e94(0x2df)],'coin':_0x17c843['coin'],'symbol':_0x17c843['symbol'],'side':_0xfd7aec[_0x8e94(0x253)],'reverse':_0xe6f3ab,'amount':formatResult(_0xfd7aec[_0x8e94(0x170)],0x8),'filled':formatResult(_0xfd7aec[_0x8e94(0x170)],0x8),'price':formatResult(_0xfd7aec[_0x8e94(0x2ac)],0x8)}),_0x4f564f=_0xfd7aec['side']==_0x8e94(0x1bf)?_0x4f564f+_0xfd7aec[_0x8e94(0x170)]:_0x4f564f-_0xfd7aec['filled'];if(!_0x54b7c4)_0x54b7c4=_0xfd7aec[_0x8e94(0x2ac)];});_0x199ae1=_0x17c843[_0x50b27b(0x290)]-_0x4f564f;let _0x45331d;config[_0x50b27b(0x2e9)]['forEach'](_0xbd3528=>{const _0x2f57b3=_0x50b27b;!_0x45331d&&(_0x45331d=_0xbd3528[_0x2f57b3(0x2af)][_0x2f57b3(0x291)](_0x376099=>_0x376099[_0x2f57b3(0x28c)]==_0x17c843[_0x2f57b3(0x28c)]),_0x45331d&&(_0x199ae1=_0x45331d['number'],_0x54b7c4=_0x45331d[_0x2f57b3(0x2ac)]));});let _0x28fd4b=dbCoinResults['get'](_0x50b27b(0x1b0))['find']({'coin':_0x17c843[_0x50b27b(0x28c)]})[_0x50b27b(0x2b3)]();_0x28fd4b={'coin':_0x17c843[_0x50b27b(0x28c)],'number':_0x199ae1,'breakeven':_0x54b7c4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x50b27b(0x1cc)](_0x50b27b(0x1b0))['find']({'coin':_0x17c843[_0x50b27b(0x28c)]})['assign'](_0x28fd4b)[_0x50b27b(0x23b)]();}}_0x306286['sort']((_0x535161,_0x2f0d28)=>_0x535161[_0x50b27b(0x2df)]>_0x2f0d28['datetime']?0x1:_0x2f0d28[_0x50b27b(0x2df)]>_0x535161[_0x50b27b(0x2df)]?-0x1:0x0);let _0x7ab4d5=0x0;for(let _0x5ddde7 of _0x306286){await updateCoinResults(_0x5ddde7,!![]);}}catch(_0xdcddee){await handleError(_0xdcddee,_0x50b27b(0x28a));}}async function getAllEventOrders(_0x4d8563){const _0x446145=_0x50ecf5;let _0x1f43ca=[],_0x3d51fd=dbLogs[_0x446145(0x1cc)](_0x446145(0x2a1))[_0x446145(0x2e6)](_0x4e5cca=>{const _0x54da7d=_0x446145,_0x1b760f=_0x4e5cca[_0x54da7d(0x16a)][_0x54da7d(0x182)]();return _0x1b760f[_0x54da7d(0x2f5)](_0x4d8563[_0x54da7d(0x182)]())&&(_0x1b760f[_0x54da7d(0x2f5)]('market')&&_0x1b760f[_0x54da7d(0x2f5)](_0x54da7d(0x1af))||_0x1b760f[_0x54da7d(0x2f5)](_0x54da7d(0x170))&&_0x1b760f[_0x54da7d(0x2f5)](_0x54da7d(0x1af)));})[_0x446145(0x2bb)]('time')['value']();return _0x3d51fd['forEach'](_0x382169=>{const _0x5d9d39=_0x446145,_0x4de0d6=_0x382169['event'][_0x5d9d39(0x2f5)](_0x5d9d39(0x1c8))?_0x5d9d39(0x1c8):_0x5d9d39(0x1bf),_0x80e237=/#([0-9]|\.)+\s/i,_0x41a352=Number(_0x80e237['exec'](_0x382169[_0x5d9d39(0x16a)])[0x0]['slice'](0x1)),_0x230db7=/@([0-9]|\.)+$/i,_0x19745c=Number(_0x230db7[_0x5d9d39(0x252)](_0x382169['event'])[0x0]['slice'](0x1));_0x1f43ca[_0x5d9d39(0x295)]({'datetime':_0x382169[_0x5d9d39(0x17e)],'coin':symbolToCoin(_0x4d8563),'symbol':_0x4d8563,'side':_0x4de0d6,'amount':_0x41a352,'filled':_0x41a352,'price':_0x19745c});}),_0x1f43ca;}async function getAllOrders(_0x4a2dc1,_0x20cd55){const _0x48ff59=_0x50ecf5;let _0x31de42=[];while(_0x20cd55<exchange['milliseconds']()){const _0x15564=0x1f4;try{const _0x4da325=await exchange[_0x48ff59(0x263)](_0x4a2dc1,_0x20cd55,_0x15564);if(_0x4da325[_0x48ff59(0x1b3)])_0x20cd55=_0x4da325[_0x4da325[_0x48ff59(0x1b3)]-0x1]['timestamp']+0x1,_0x31de42=_0x31de42[_0x48ff59(0x1b7)](_0x4da325);else break;}catch(_0x59b882){await handleError(_0x59b882,'getAllOrders()',_0x4a2dc1);}}return _0x31de42;}async function validate24hChanges(){const _0x36ab38=_0x50ecf5;for(const _0x5d26f8 of currentCoins){if(_0x5d26f8[_0x36ab38(0x28c)]!=config[_0x36ab38(0x2ae)]){let _0x128f9e;_0x5d26f8[_0x36ab38(0x29f)]?_0x128f9e=formatResult((0x1/(global['change'][noslash(_0x5d26f8[_0x36ab38(0x1fb)])]/0x64+0x1)-0x1)*0x64,0x3):_0x128f9e=global['change'][noslash(_0x5d26f8['symbol'])],_0x128f9e<config[_0x36ab38(0x1ba)]&&(logHistory(_0x36ab38(0x284),_0x5d26f8[_0x36ab38(0x28c)]+_0x36ab38(0x2ab)+_0x128f9e+'%'),logHistory(_0x36ab38(0x284),_0x36ab38(0x1bb)),logHistory(_0x36ab38(0x284),_0x36ab38(0x297)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x548629,_0x3e437c){const _0x7075f5=_0x50ecf5;if(!_0x548629)return!![];const _0x32daaa=_0x3e437c[_0x7075f5(0x207)]('.'),_0x3fbbaa=_0x548629[_0x7075f5(0x207)]('.');for(var _0x5d049a=0x0;_0x5d049a<_0x3fbbaa[_0x7075f5(0x1b3)];_0x5d049a++){const _0x4b3042=~~_0x3fbbaa[_0x5d049a],_0x413db6=~~_0x32daaa[_0x5d049a];if(_0x4b3042<_0x413db6)return!![];if(_0x4b3042>_0x413db6)return![];}return![];}async function oneTimeMigration(){const _0x66258e=_0x50ecf5;let _0x168d9b=dbLogs[_0x66258e(0x1cc)](_0x66258e(0x254))[_0x66258e(0x2b3)]();if(isOlderVersion(_0x168d9b,_0x66258e(0x2aa))){let _0x319629=[];const _0x247f5d=dbLogs[_0x66258e(0x1cc)](_0x66258e(0x2a1))[_0x66258e(0x2b3)]();_0x247f5d[_0x66258e(0x19b)](_0x874fef=>{const _0x36d6fc=_0x66258e;_0x319629[_0x36d6fc(0x295)]({'time':_0x874fef[_0x36d6fc(0x17e)],'type':_0x874fef['type'],'event':_0x874fef[_0x36d6fc(0x16a)]});}),dbLogs[_0x66258e(0x1cc)](_0x66258e(0x2a1))[_0x66258e(0x1c3)](_0x319629)[_0x66258e(0x23b)]();}let _0x392a32=dbConfig[_0x66258e(0x1cc)]('version')[_0x66258e(0x2b3)]();if(isOlderVersion(_0x392a32,'2.3.5')){let _0x2d4890=dbConfig[_0x66258e(0x1cc)]('bot')[_0x66258e(0x291)]({'botID':botID})[_0x66258e(0x2b3)]();if(_0x2d4890){let _0x51731a=[];_0x2d4890[_0x66258e(0x190)]['forEach'](_0xc9919e=>{const _0x105fcc=_0x66258e;_0x51731a[_0x105fcc(0x295)]({'coin':_0xc9919e[_0x105fcc(0x28c)],'number':_0xc9919e[_0x105fcc(0x1f5)],'price':_0xc9919e[_0x105fcc(0x1aa)]}),delete _0xc9919e[_0x105fcc(0x1f5)],delete _0xc9919e[_0x105fcc(0x1aa)];});if(_0x51731a[_0x66258e(0x1b3)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x66258e(0x1d3)](_0x51731a,null,0x4),function(_0x274b31){if(_0x274b31){}});const _0x48f0e1=(_0x184d07,_0x1296ba)=>{const _0x235f43=_0x66258e;let _0x2f0cc0=[];_0x1296ba[_0x235f43(0x19b)](_0x58dee0=>{const _0xc2e177=_0x235f43,_0x194df2=_0x184d07[_0xc2e177(0x291)](_0x4baca7=>_0x4baca7[_0xc2e177(0x28c)]==_0x58dee0[_0xc2e177(0x28c)]);if(!_0x194df2)_0x2f0cc0[_0xc2e177(0x295)](_0x58dee0);});let _0x59953e=[];return _0x184d07[_0x235f43(0x19b)](_0x1669b9=>{const _0x13348d=_0x235f43,_0xb86c24=_0x1296ba[_0x13348d(0x291)](_0x4d7fb6=>_0x4d7fb6[_0x13348d(0x28c)]==_0x1669b9[_0x13348d(0x28c)]);if(!_0xb86c24||_0xb86c24['number']==0x0&&_0x1669b9[_0x13348d(0x290)]!=0x0)_0x59953e['push'](_0x1669b9);}),{'missingDay1':_0x2f0cc0,'notInDay2':_0x59953e};},_0x57aec2=dbPerformance[_0x66258e(0x1cc)]('data')['cloneDeep']()[_0x66258e(0x2b3)]();if(_0x57aec2[_0x66258e(0x1b3)]>0x1){const {missingDay1:_0x1fe8f7,notInDay2:_0x344296}=_0x48f0e1(_0x51731a,_0x57aec2[0x1][_0x66258e(0x1b0)]);_0x51731a=[..._0x51731a,..._0x1fe8f7],_0x344296[_0x66258e(0x19b)](_0x25096a=>{const _0x405d5e=_0x66258e;let _0xcfa39f=_0x51731a[_0x405d5e(0x208)](_0x37d8ff=>_0x37d8ff['coin']==_0x25096a[_0x405d5e(0x28c)]);_0xcfa39f!=-0x1&&_0x51731a['splice'](_0xcfa39f,0x1);});}_0x51731a[_0x66258e(0x230)]((_0x3e7133,_0x3d9467)=>_0x3e7133[_0x66258e(0x28c)]>_0x3d9467[_0x66258e(0x28c)]?0x1:_0x3d9467['coin']>_0x3e7133['coin']?-0x1:0x0);let _0x3e5e70=[{'date':_0x2d4890[_0x66258e(0x2d6)],'changes':_0x51731a}];_0x57aec2[_0x66258e(0x1b3)]>0x2&&_0x57aec2['forEach']((_0x1a2a9b,_0x1c587c)=>{const _0x1e18e6=_0x66258e;if(_0x1c587c>0x0&&_0x1c587c<_0x57aec2['length']-0x1){const {missingDay1:_0x57fa8c,notInDay2:_0x29513f}=_0x48f0e1(_0x57aec2[_0x1c587c][_0x1e18e6(0x1b0)],_0x57aec2[_0x1c587c+0x1][_0x1e18e6(0x1b0)]);_0x51731a=[],(_0x57fa8c[_0x1e18e6(0x1b3)]!=0x0||_0x29513f['length']!=0x0)&&(_0x57fa8c[_0x1e18e6(0x1b3)]!=0x0&&_0x51731a[_0x1e18e6(0x295)](..._0x57fa8c),_0x29513f[_0x1e18e6(0x1b3)]!=0x0&&(_0x29513f[_0x1e18e6(0x19b)](_0x9c7eb8=>{const _0x44e331=_0x1e18e6;_0x9c7eb8[_0x44e331(0x290)]=-_0x9c7eb8[_0x44e331(0x290)];}),_0x51731a[_0x1e18e6(0x295)](..._0x29513f)),_0x51731a['sort']((_0x5b3b70,_0x47533c)=>_0x5b3b70[_0x1e18e6(0x28c)]>_0x47533c[_0x1e18e6(0x28c)]?0x1:_0x47533c['coin']>_0x5b3b70[_0x1e18e6(0x28c)]?-0x1:0x0),_0x3e5e70[_0x1e18e6(0x295)]({'date':_0x57aec2[_0x1c587c+0x1][_0x1e18e6(0x19e)],'changes':_0x51731a}));}}),dbConfig[_0x66258e(0x1cc)](_0x66258e(0x1ff))[_0x66258e(0x291)]({'botID':botID})[_0x66258e(0x1c3)]({..._0x2d4890,'liquidity':_0x3e5e70})[_0x66258e(0x23b)]();}}if(isOlderVersion(_0x392a32,'2.6.0')){let _0x315fb8=dbConfig[_0x66258e(0x1cc)](_0x66258e(0x1ff))[_0x66258e(0x291)]({'botID':botID})[_0x66258e(0x2b3)]();if(_0x315fb8){const _0x5d7c53=_0x315fb8[_0x66258e(0x2dd)],_0xda6a8f=_0x5d7c53?capitalize(_0x5d7c53):'Binance';dbConfig[_0x66258e(0x1cc)](_0x66258e(0x1ff))[_0x66258e(0x291)]({'botID':botID})[_0x66258e(0x1c3)]({'exchange':_0xda6a8f})['write']();}}let _0x1ee936=dbPerformance[_0x66258e(0x1cc)]('version')[_0x66258e(0x2b3)]();isOlderVersion(_0x1ee936,_0x66258e(0x2aa))&&setStartDatePerformance();let _0x29aafc=dbCoinResults[_0x66258e(0x1cc)](_0x66258e(0x254))[_0x66258e(0x2b3)]();if(isOlderVersion(_0x29aafc,_0x66258e(0x1ce))){let _0x1b0869=dbCoinResults[_0x66258e(0x1cc)](_0x66258e(0x1b0))[_0x66258e(0x2b3)]();if(_0x1b0869[_0x66258e(0x1b3)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1d29d3=_0x50ecf5;dbConfig['set'](_0x1d29d3(0x254),serverversion)[_0x1d29d3(0x23b)](),dbPerformance[_0x1d29d3(0x1c4)](_0x1d29d3(0x254),serverversion)[_0x1d29d3(0x23b)](),dbLogs[_0x1d29d3(0x1c4)](_0x1d29d3(0x254),serverversion)[_0x1d29d3(0x23b)](),dbCoinResults[_0x1d29d3(0x1c4)](_0x1d29d3(0x254),serverversion)[_0x1d29d3(0x23b)]();}function getConfiguration(_0x1fbd74){const _0x347632=_0x50ecf5;let _0x3b87b7=dbConfig[_0x347632(0x1cc)]('bot')[_0x347632(0x291)]({'botID':_0x1fbd74})[_0x347632(0x2b3)]();if(_0x3b87b7){let _0x12bcb9=![];typeof _0x3b87b7[_0x347632(0x286)]==_0x347632(0x162)&&(_0x3b87b7={..._0x3b87b7,'threshold':Number(_0x3b87b7['threshold'])},_0x12bcb9=!![]),_0x3b87b7['change24h']==undefined&&(_0x3b87b7={..._0x3b87b7,'change24h':-0x14},_0x12bcb9=!![]),_0x3b87b7[_0x347632(0x29c)]==undefined&&(_0x3b87b7={..._0x3b87b7,'fiat':_0x347632(0x26b)},_0x12bcb9=!![]),_0x3b87b7[_0x347632(0x1f9)]==undefined&&(_0x3b87b7={..._0x3b87b7,'onepagemode':settings[_0x347632(0x1f9)]},_0x12bcb9=!![]),_0x3b87b7[_0x347632(0x175)]==undefined&&(_0x3b87b7={..._0x3b87b7,'colorscheme':_0x347632(0x2dc)},_0x12bcb9=!![]),_0x3b87b7[_0x347632(0x289)]==undefined&&(_0x3b87b7={..._0x3b87b7,'autoliquidity':!![]},_0x12bcb9=!![]),_0x12bcb9&&(_0x3b87b7={'botID':_0x3b87b7[_0x347632(0x1ae)],'exchange':_0x3b87b7[_0x347632(0x2dd)],'apiKey':_0x3b87b7[_0x347632(0x202)],'apiSecret':_0x3b87b7[_0x347632(0x2e5)],'apiPassword':_0x3b87b7[_0x347632(0x17d)],'basecoin':_0x3b87b7['basecoin'],'botname':_0x3b87b7[_0x347632(0x265)],'showname':_0x3b87b7[_0x347632(0x2a2)],'threshold':_0x3b87b7[_0x347632(0x286)],'ordertype':_0x3b87b7[_0x347632(0x18a)],'timeout':_0x3b87b7[_0x347632(0x2e0)],'fiat':_0x3b87b7[_0x347632(0x29c)],'startdate':_0x3b87b7['startdate'],'recreate':_0x3b87b7['recreate'],'timeshift':_0x3b87b7[_0x347632(0x24e)],'onepagemode':_0x3b87b7[_0x347632(0x1f9)],'headless':_0x3b87b7[_0x347632(0x2d3)],'cooldown':_0x3b87b7['cooldown'],'change24h':_0x3b87b7['change24h'],'emojibuy':_0x3b87b7[_0x347632(0x27c)],'emojisell':_0x3b87b7['emojisell'],'colorscheme':_0x3b87b7[_0x347632(0x175)],'portfolio':_0x3b87b7[_0x347632(0x190)],'autoliquidity':_0x3b87b7['autoliquidity'],'liquidity':_0x3b87b7[_0x347632(0x2e9)],'openOrders':_0x3b87b7[_0x347632(0x1b5)]},dbConfig['get']('bot')[_0x347632(0x237)]()[_0x347632(0x23b)](),dbConfig['get'](_0x347632(0x1ff))[_0x347632(0x295)](_0x3b87b7)[_0x347632(0x23b)]());}else _0x3b87b7={'botID':_0x1fbd74,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x347632(0x236)+_0x1fbd74,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x347632(0x1f9)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x347632(0x2dc),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3b87b7;}function emittedConfiguration(){const _0x5ea042=_0x50ecf5;let _0x327819;if(config[_0x5ea042(0x202)]=='')_0x327819={...config,'configstate':'initial'};else config[_0x5ea042(0x202)]==_0x5ea042(0x1cb)?_0x327819={...config,'configstate':_0x5ea042(0x24f)}:(_0x327819={...config,'apiKey':'************','apiSecret':_0x5ea042(0x23a)},config[_0x5ea042(0x17d)]&&(_0x327819[_0x5ea042(0x17d)]=_0x5ea042(0x23a)));return _0x327819;}function getSettings(){const _0xe571c2=_0x50ecf5;return dbSettings[_0xe571c2(0x1cc)]('settings')[_0xe571c2(0x2b3)]();}function getSecure(){const _0x2e9d35=_0x50ecf5;return dbSecure[_0x2e9d35(0x1cc)](_0x2e9d35(0x22f))[_0x2e9d35(0x2b3)]()||{};}function updateTimeshift(_0x4d336d){const _0x322aff=_0x50ecf5;let _0x125741=dbConfig['get'](_0x322aff(0x1ff))[_0x322aff(0x291)]({'botID':botID})[_0x322aff(0x2b3)]();_0x125741&&dbConfig[_0x322aff(0x1cc)](_0x322aff(0x1ff))[_0x322aff(0x291)]({'botID':botID})[_0x322aff(0x1c3)]({'timeshift':_0x4d336d})['write'](),config[_0x322aff(0x24e)]=_0x4d336d,proxyEmit(_0x322aff(0x184),emittedConfiguration());}function updateOnepagemode(_0x562c8e){const _0x385fd0=_0x50ecf5;let _0x3f887d=dbConfig[_0x385fd0(0x1cc)](_0x385fd0(0x1ff))[_0x385fd0(0x291)]({'botID':botID})['value']();_0x3f887d&&dbConfig[_0x385fd0(0x1cc)]('bot')[_0x385fd0(0x291)]({'botID':botID})[_0x385fd0(0x1c3)]({'onepagemode':_0x562c8e})[_0x385fd0(0x23b)](),config['onepagemode']=_0x562c8e,proxyEmit(_0x385fd0(0x184),emittedConfiguration());}async function storeConfiguration(_0x40cfdf){const _0x5b08d6=_0x50ecf5;logger[_0x5b08d6(0x1db)](_0x5b08d6(0x1f4));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5b08d6(0x1db)](_0x5b08d6(0x238));let _0x2a25d4=![],_0x25a37c=![],_0x26d367=[];_0x40cfdf[_0x5b08d6(0x190)]['forEach'](_0x3e7134=>{const _0x4b36dd=_0x5b08d6;if(!_0x3e7134[_0x4b36dd(0x1e4)]&&_0x3e7134[_0x4b36dd(0x28c)]!=_0x40cfdf[_0x4b36dd(0x2ae)])_0x26d367[_0x4b36dd(0x295)](_0x3e7134[_0x4b36dd(0x1fb)]);}),_0x26d367['forEach'](_0x96954d=>{const _0x5ee88f=_0x5b08d6,_0x3b2d13=currentCoins[_0x5ee88f(0x291)](_0x536115=>_0x536115[_0x5ee88f(0x1fb)]==_0x96954d);!_0x3b2d13&&(_0x2a25d4=!![]);}),currentCoins[_0x5b08d6(0x19b)](_0x2d7b61=>{const _0x3d3e0c=_0x5b08d6;if(_0x2d7b61[_0x3d3e0c(0x28c)]!=config[_0x3d3e0c(0x2ae)]){const _0x8f8e71=_0x26d367['find'](_0x1f1b6d=>_0x1f1b6d==_0x2d7b61['symbol']);!_0x8f8e71&&(_0x2a25d4=!![]);}}),_0x40cfdf['portfolio'][_0x5b08d6(0x19b)](_0x3d5605=>{const _0x44e994=_0x5b08d6,_0x1303e6=config[_0x44e994(0x190)][_0x44e994(0x291)](_0x314543=>_0x314543[_0x44e994(0x28c)]==_0x3d5605[_0x44e994(0x28c)]);if(_0x1303e6&&_0x3d5605[_0x44e994(0x167)]!=_0x1303e6['offset'])_0x25a37c=!![];});let _0x53ebea=dbConfig[_0x5b08d6(0x1cc)]('bot')[_0x5b08d6(0x291)]({'botID':botID})['value']();_0x40cfdf={..._0x40cfdf,'apiKey':crypt[_0x5b08d6(0x2d9)](secure['privateKey'],_0x40cfdf[_0x5b08d6(0x202)])[_0x5b08d6(0x17f)],'apiSecret':crypt[_0x5b08d6(0x2d9)](secure[_0x5b08d6(0x22e)],_0x40cfdf[_0x5b08d6(0x2e5)])['message']};_0x40cfdf[_0x5b08d6(0x17d)]&&(_0x40cfdf[_0x5b08d6(0x17d)]=crypt[_0x5b08d6(0x2d9)](secure[_0x5b08d6(0x22e)],_0x40cfdf['apiPassword'])[_0x5b08d6(0x17f)]);let _0x28ddfa=![];if(_0x53ebea){_0x40cfdf[_0x5b08d6(0x202)]=='************'?_0x40cfdf['apiKey']=config[_0x5b08d6(0x202)]:_0x28ddfa=!![];_0x40cfdf[_0x5b08d6(0x2e5)]==_0x5b08d6(0x23a)?_0x40cfdf[_0x5b08d6(0x2e5)]=config['apiSecret']:_0x28ddfa=!![];if(_0x40cfdf[_0x5b08d6(0x17d)]==_0x5b08d6(0x23a))_0x40cfdf['apiPassword']=config[_0x5b08d6(0x17d)];else{if(_0x40cfdf[_0x5b08d6(0x17d)])_0x28ddfa=!![];}dbConfig[_0x5b08d6(0x1cc)](_0x5b08d6(0x1ff))[_0x5b08d6(0x291)]({'botID':botID})[_0x5b08d6(0x1c3)](_0x40cfdf)['write']();}else dbConfig[_0x5b08d6(0x1cc)](_0x5b08d6(0x1ff))[_0x5b08d6(0x295)](_0x40cfdf)['write'](),_0x28ddfa=!![],process[_0x5b08d6(0x18f)]({'status':'enabled','live':_0x5b08d6(0x195)},_0x33b2e7=>{});process[_0x5b08d6(0x18f)]({'botname':_0x40cfdf[_0x5b08d6(0x265)]},_0xe607f5=>{}),updateBotManager(),config={..._0x40cfdf},proxyEmit(_0x5b08d6(0x24d)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x28ddfa)await reset(!![]);else _0x2a25d4||_0x25a37c?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x5b08d6(0x22b));}async function storeHeadless(_0x33bca5){const _0x581126=_0x50ecf5,_0x18df1e={...config,'headless':_0x33bca5['headless']};let _0x53fded=dbConfig[_0x581126(0x1cc)](_0x581126(0x1ff))[_0x581126(0x291)]({'botID':botID})[_0x581126(0x2b3)]();_0x53fded&&dbConfig[_0x581126(0x1cc)](_0x581126(0x1ff))['find']({'botID':botID})['assign'](_0x18df1e)[_0x581126(0x23b)](),config={..._0x18df1e},updateBotManager(),proxyEmit(_0x581126(0x184),emittedConfiguration());}async function storeFiat(_0x14bdd9){const _0xd72d66=_0x50ecf5,_0x899d98={...config,'fiat':_0x14bdd9};let _0x13f7b3=dbConfig['get']('bot')['find']({'botID':botID})[_0xd72d66(0x2b3)]();_0x13f7b3&&dbConfig[_0xd72d66(0x1cc)](_0xd72d66(0x1ff))[_0xd72d66(0x291)]({'botID':botID})['assign'](_0x899d98)[_0xd72d66(0x23b)](),config={..._0x899d98},proxyEmit(_0xd72d66(0x184),emittedConfiguration());}function resetHistory(){const _0x123601=_0x50ecf5;logger['full'](_0x123601(0x173));try{if(fs[_0x123601(0x2e4)](path[_0x123601(0x2a7)](configpath,_0x123601(0x16e)+botID+_0x123601(0x1a6))))fs['unlinkSync'](path[_0x123601(0x2a7)](configpath,_0x123601(0x16e)+botID+_0x123601(0x1a6)));if(fs[_0x123601(0x2e4)](path[_0x123601(0x2a7)](configpath,_0x123601(0x16e)+botID+_0x123601(0x1f0))))fs[_0x123601(0x163)](path[_0x123601(0x2a7)](configpath,_0x123601(0x16e)+botID+_0x123601(0x1f0)));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-results.json')))fs[_0x123601(0x163)](path[_0x123601(0x2a7)](configpath,'bot-'+botID+_0x123601(0x2ad)));}catch(_0x365d64){if(_0x365d64)logger[_0x123601(0x1b1)](_0x123601(0x168),_0x365d64);}const _0x358d12=getDate();let _0x1e97ca=[];currentCoins['forEach'](_0x2d5805=>{const _0x41ea90=_0x123601;_0x1e97ca['push']({'coin':_0x2d5805[_0x41ea90(0x28c)],'number':_0x2d5805[_0x41ea90(0x290)],'price':_0x2d5805[_0x41ea90(0x279)]});});let _0x41b81f=dbConfig[_0x123601(0x1cc)](_0x123601(0x1ff))[_0x123601(0x291)]({'botID':botID})[_0x123601(0x2b3)]();_0x41b81f&&(dbConfig[_0x123601(0x1cc)]('bot')[_0x123601(0x291)]({'botID':botID})[_0x123601(0x1c3)]({'liquidity':[{'date':_0x358d12,'changes':_0x1e97ca}]})[_0x123601(0x23b)](),config['liquidity']=[]),process[_0x123601(0x18f)]({'stop':'restart'},_0x20087c=>{});}function noslash(_0x44ddf1){const _0x201170=_0x50ecf5;return _0x44ddf1[_0x201170(0x2b6)]('/','');}function updateHighestFee(_0x532367){const _0x441661=_0x50ecf5;if(_0x532367[_0x441661(0x29f)]){let _0x355e1d={'filled':_0x532367[_0x441661(0x170)]*_0x532367[_0x441661(0x2ac)],'amount':_0x532367[_0x441661(0x170)]*_0x532367[_0x441661(0x2ac)],'side':_0x532367[_0x441661(0x253)]==_0x441661(0x1c8)?_0x441661(0x1bf):_0x441661(0x1c8),'price':0x1/_0x532367[_0x441661(0x2ac)]};_0x532367={..._0x532367,..._0x355e1d};}const _0x1f2213=defaultFee*_0x532367[_0x441661(0x170)]*_0x532367['price'];lastFees[_0x441661(0x267)][_0x441661(0x1b3)]===0x14&&lastFees[_0x441661(0x267)][_0x441661(0x17b)](),lastFees['recent20'][_0x441661(0x295)](_0x1f2213),lastFees[_0x441661(0x224)]=Math[_0x441661(0x2f0)](...lastFees[_0x441661(0x267)]);}async function updateNumberCoinsCcxt(_0x5142f0){const _0x588577=_0x50ecf5;logger[_0x588577(0x1db)](_0x588577(0x2a0)+_0x5142f0['symbol']+_0x588577(0x1d7)+_0x5142f0['status']+_0x588577(0x1d7)+_0x5142f0['id']);let _0x12070e=_0x5142f0[_0x588577(0x199)],_0x10d64b=![];currentCoins['forEach'](_0x596b24=>{const _0x5ef977=_0x588577;_0x596b24[_0x5ef977(0x1fb)]==_0x5142f0[_0x5ef977(0x1fb)]&&(_0x10d64b=!![]);});if(!_0x10d64b)return;const _0x1de571=currentCoins[_0x588577(0x291)](_0x2bada5=>_0x2bada5['symbol']==_0x5142f0[_0x588577(0x1fb)]),_0x3ac0c6=_0x44ffda=>{const _0x3a7b46=_0x588577;if(_0x1de571)_0x1de571[_0x3a7b46(0x1c0)]=_0x44ffda;};if(_0x12070e==_0x588577(0x1d0))_0x3ac0c6(_0x588577(0x1d0));else{if(_0x12070e==_0x588577(0x214)){_0x3ac0c6(_0x588577(0x214));const _0x171df2=await getCoins();[currentCoins,currentCoinsAll]=_0x171df2,await getOpenOrders(),handleOpenOrders();}else{if(_0x12070e==_0x588577(0x1b9)){logger[_0x588577(0x1db)](_0x588577(0x2a4)+_0x5142f0[_0x588577(0x1fb)]+_0x588577(0x1d7)+_0x5142f0[_0x588577(0x170)]+_0x588577(0x1d7)+_0x5142f0['id']);let _0x3f148f=![];if(lastOrders)for(const _0x56ca3f of lastOrders){const _0x16719e=0xc8,_0x3ced41=0x1388;let _0x4131db=0x0;while(!_0x56ca3f[_0x588577(0x1d6)]&&_0x4131db*_0x16719e<_0x3ced41){_0x4131db++,await sleep(_0x16719e);}if(_0x4131db>0x0)logger[_0x588577(0x1db)]('Waited\x20'+_0x4131db*_0x16719e/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x56ca3f[_0x588577(0x1d6)]==_0x5142f0['id']){logger[_0x588577(0x1db)](_0x588577(0x1fa)+_0x5142f0['id']),_0x3f148f=!![];if(_0x56ca3f[_0x588577(0x170)]==0x0){logger[_0x588577(0x1db)](_0x588577(0x255)+_0x5142f0['id']);if(_0x5142f0[_0x588577(0x1ed)])_0x56ca3f['price']=_0x5142f0[_0x588577(0x1ed)];else{if(_0x5142f0[_0x588577(0x2ac)])_0x56ca3f[_0x588577(0x2ac)]=_0x5142f0['price'];else{}}_0x56ca3f[_0x588577(0x170)]=_0x5142f0[_0x588577(0x170)],updateHighestFee(_0x56ca3f),_0x3ac0c6(_0x588577(0x170)),await validateOrders();if(lockOrders==ORDERS[_0x588577(0x2c7)]){const _0xb6bdfb=await getCoins();[currentCoins,currentCoinsAll]=_0xb6bdfb;}_0x56ca3f['fee']={'currency':_0x5142f0[_0x588577(0x1da)]?_0x5142f0[_0x588577(0x1da)][_0x588577(0x2d7)]:null,'cost':_0x5142f0[_0x588577(0x1da)]?_0x5142f0['fee']['cost']:0x0},await updateCoinResults(_0x56ca3f);}}}if(!_0x3f148f){logger[_0x588577(0x1db)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x5142f0['id']),_0x3ac0c6(_0x588577(0x170));const _0x3e4036=await getCoins();[currentCoins,currentCoinsAll]=_0x3e4036,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xe18c41=JSON[_0x588577(0x1dd)](lastBalances['portfolio']);const _0x396a2a=_0xe18c41[_0x588577(0x291)](_0x3753c8=>_0x3753c8[_0x588577(0x1fb)]==_0x5142f0['symbol']);if(_0x396a2a){if(_0x12070e=='open')_0x396a2a[_0x588577(0x1c0)]=_0x396a2a[_0x588577(0x1c0)]==_0x588577(0x170)?'filled':_0x588577(0x1d0);else{if(_0x12070e==_0x588577(0x214))_0x396a2a['orderstatus']=_0x396a2a[_0x588577(0x1c0)]=='filled'?'filled':_0x588577(0x214);else _0x12070e=='closed'&&(_0x396a2a[_0x588577(0x1c0)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x588577(0x1d3)](_0xe18c41)},proxyEmit(_0x588577(0x2b8),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x2bd372=![];currentCoins['forEach'](_0x1af1c8=>{const _0x20f3dc=_0x41f4;_0x2bd372=allOpenOrders[_0x20f3dc(0x291)](_0x2a45c5=>_0x2a45c5[_0x20f3dc(0x1fb)]==_0x1af1c8['symbol']),_0x1af1c8[_0x20f3dc(0x1c0)]=_0x2bd372?_0x20f3dc(0x1d0):_0x20f3dc(0x17c);});}async function getCoins(_0x34567c=!![],_0x43ca06=config['basecoin']){const _0x3b9994=_0x50ecf5;let _0x584fde,_0x2b7c2b=[],_0x4cc058=[],_0x115d27=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x584fde=await exchange[_0x3b9994(0x1f3)](),mybalances=_0x584fde[_0x3b9994(0x216)];for(const [_0x14f204,_0x230f32]of Object[_0x3b9994(0x1b4)](mybalances)){_0x115d27[_0x3b9994(0x295)](_0x14f204);}config[_0x3b9994(0x190)][_0x3b9994(0x19b)](_0x13ef2c=>{const _0x57643e=_0x3b9994;!_0x115d27[_0x57643e(0x2f5)](_0x13ef2c['coin'])&&(mybalances[_0x13ef2c[_0x57643e(0x28c)]]=0x0);});if(_0x43ca06=='')for(const [_0x588586,_0x54bbd3]of Object['entries'](mybalances)){_0x54bbd3!=0x0&&_0x2b7c2b[_0x3b9994(0x295)]({'coin':_0x588586});}else{let _0x426768=![];for(const [_0x72eac,_0x26e921]of Object[_0x3b9994(0x1b4)](mybalances)){const _0x1b8f45=config[_0x3b9994(0x190)][_0x3b9994(0x291)](_0x205469=>_0x205469['coin']==_0x72eac),_0x1eaa17=_0x72eac+'/'+_0x43ca06,_0x14b953=_0x43ca06+'/'+_0x72eac,_0x1a3b11=currentCoins[_0x3b9994(0x291)](_0x49ccf2=>_0x49ccf2[_0x3b9994(0x28c)]==_0x72eac);_0x426768=![];if((_0x26e921!=0x0||_0x1b8f45)&&(allSymbols[_0x3b9994(0x2f5)](_0x1eaa17)||_0x72eac==_0x43ca06))_0x2b7c2b['push']({'coin':_0x72eac,'symbol':_0x1eaa17,'reverse':![],'number':Math[_0x3b9994(0x2f0)](_0x26e921+(_0x1b8f45&&_0x1b8f45[_0x3b9994(0x167)]||0x0),0x0),'orderstatus':_0x1a3b11?_0x1a3b11['orderstatus']:_0x3b9994(0x17c)});else{if((_0x26e921!=0x0||_0x1b8f45)&&allSymbols[_0x3b9994(0x2f5)](_0x14b953))_0x2b7c2b[_0x3b9994(0x295)]({'coin':_0x72eac,'symbol':_0x14b953,'reverse':!![],'number':Math[_0x3b9994(0x2f0)](_0x26e921+(_0x1b8f45&&_0x1b8f45[_0x3b9994(0x167)]||0x0),0x0),'orderstatus':_0x1a3b11?_0x1a3b11[_0x3b9994(0x1c0)]:'none'});else _0x1b8f45&&_0x2b7c2b['push']({'coin':_0x1b8f45[_0x3b9994(0x28c)],'symbol':_0x1b8f45[_0x3b9994(0x1fb)],'reverse':_0x1b8f45[_0x3b9994(0x29f)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x4a7d24){if(!_0x34567c)handleErrorNoStop(_0x4a7d24,_0x3b9994(0x1c6));else await handleError(_0x4a7d24,'getCoins()');}return _0x4cc058=cloneDeep(_0x2b7c2b),_0x2b7c2b=_0x2b7c2b['filter'](_0x4e5c04=>{const _0x56fb5d=_0x3b9994,_0x4099c8=config[_0x56fb5d(0x190)][_0x56fb5d(0x291)](_0x16bb2d=>_0x16bb2d[_0x56fb5d(0x28c)]==_0x4e5c04[_0x56fb5d(0x28c)]);return _0x4099c8&&!_0x4099c8[_0x56fb5d(0x1e4)];}),[_0x2b7c2b,_0x4cc058];}async function getCoinNumber(_0x2980e7){const _0x5b07f5=_0x50ecf5;let _0x269359;try{const _0x4bfcf8=await exchange[_0x5b07f5(0x1f3)]();_0x269359=_0x4bfcf8['total'][_0x2980e7];}catch(_0x355adf){await handleError(_0x355adf,_0x5b07f5(0x275));}return _0x269359;}async function getOpenOrders(){const _0x83d6c=_0x50ecf5;let _0x313409;allOpenOrders=[];try{for(const _0x1f25ad of config['portfolio']){!_0x1f25ad[_0x83d6c(0x1e4)]&&_0x1f25ad[_0x83d6c(0x28c)]!=config[_0x83d6c(0x2ae)]&&(_0x313409=await exchange[_0x83d6c(0x1ee)](_0x1f25ad[_0x83d6c(0x1fb)]),_0x313409[_0x83d6c(0x1b3)]>0x0&&allOpenOrders['push'](_0x313409[0x0]));}}catch(_0x126581){await handleError(_0x126581,_0x83d6c(0x1ab));}}async function handleOpenOrders(_0x518a3f=0x0){const _0x4c4134=_0x50ecf5;allOpenOrders[_0x4c4134(0x1b3)]==0x0&&lockOrders==ORDERS[_0x4c4134(0x2c7)]&&allOrdersPlaced&&(_0x518a3f==0x0?(logger[_0x4c4134(0x1db)](_0x4c4134(0x299)),_0x518a3f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x502af3){const _0x156309=_0x50ecf5,_0x57b4d2=ccxt['pro'][_0x502af3[_0x156309(0x2dd)]['toLowerCase']()],_0x5bf99d=new _0x57b4d2({'apiKey':_0x502af3['apiKey'],'secret':_0x502af3[_0x156309(0x2e5)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x502af3['apiPassword'])_0x5bf99d[_0x156309(0x191)]=_0x502af3[_0x156309(0x17d)];try{await _0x5bf99d[_0x156309(0x278)]();}catch(_0x19b227){throw _0x19b227;}}function cloneDeep(_0x3d9525){const _0x2948dc=_0x50ecf5;return JSON[_0x2948dc(0x1dd)](JSON[_0x2948dc(0x1d3)](_0x3d9525));}async function getPortfolio(_0x344c41){const _0x2da840=_0x50ecf5;let _0x17605e=[],_0xd3b321=[],_0x103c33=[],_0x582498;if(_0x344c41['apiKey']!==_0x2da840(0x23a)||_0x344c41[_0x2da840(0x2e5)]!==_0x2da840(0x23a)||_0x344c41[_0x2da840(0x17d)]&&_0x344c41[_0x2da840(0x17d)]!=='************'){if(config[_0x2da840(0x2dd)]){if(_0x344c41['apiKey']==_0x2da840(0x23a))_0x344c41[_0x2da840(0x202)]=config[_0x2da840(0x202)];if(_0x344c41['apiSecret']=='************')_0x344c41[_0x2da840(0x2e5)]=config[_0x2da840(0x2e5)];if(_0x344c41[_0x2da840(0x17d)]==_0x2da840(0x23a))_0x344c41['apiPassword']=config[_0x2da840(0x17d)];try{await testAPI(_0x344c41);}catch(_0x2f0e15){if(_0x2f0e15['toString']()[_0x2da840(0x2f5)](_0x2da840(0x19c))){logger[_0x2da840(0x1db)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x2da840(0x190),![]);return;}else{handleError(_0x2f0e15,_0x2da840(0x218));return;}}}await initExchange(_0x344c41['exchange'],_0x344c41['apiKey'],_0x344c41['apiSecret'],_0x344c41['apiPassword']);try{await loadSymbols();}catch(_0x437d4a){if(_0x437d4a['toString']()[_0x2da840(0x2f5)](_0x2da840(0x19c))){proxyEmit(_0x2da840(0x190),![]);return;}else{handleError(_0x437d4a,_0x2da840(0x1a9));return;}}const _0x524e10=await getCoins(![],_0x344c41[_0x2da840(0x2ae)]);_0x103c33=cloneDeep(_0x524e10[0x1]);}else _0x103c33=cloneDeep(currentCoinsAll);if(_0x344c41[_0x2da840(0x2ae)]=='')proxyEmit('portfolio',_0x103c33);else{_0x103c33['forEach'](_0x33436d=>{const _0xf1bb00=_0x2da840;if(_0x33436d[_0xf1bb00(0x28c)]!=_0x344c41['basecoin']&&allSymbols[_0xf1bb00(0x2f5)](_0x33436d[_0xf1bb00(0x1fb)]))_0x17605e[_0xf1bb00(0x295)](_0x33436d[_0xf1bb00(0x1fb)]);});if(_0x17605e['length']==0x0)logHistory('error',_0x2da840(0x2a6));else{try{_0xd3b321=await exchange[_0x2da840(0x2eb)](_0x17605e);}catch(_0x1bd9a9){if(_0x1bd9a9[_0x2da840(0x26e)]()['includes']('AuthenticationError')){proxyEmit(_0x2da840(0x190),![]);return;}else handleError(_0x1bd9a9,_0x2da840(0x280));}_0x103c33['forEach'](_0x2077d6=>{const _0x3f8afc=_0x2da840;_0x2077d6[_0x3f8afc(0x28c)]!=_0x344c41[_0x3f8afc(0x2ae)]?_0xd3b321[_0x2077d6[_0x3f8afc(0x1fb)]]?_0x582498=_0x2077d6['reverse']?0x1/_0xd3b321[_0x2077d6[_0x3f8afc(0x1fb)]][_0x3f8afc(0x279)]:_0xd3b321[_0x2077d6[_0x3f8afc(0x1fb)]][_0x3f8afc(0x279)]:_0x582498=0x0:_0x582498=0x1,_0x2077d6[_0x3f8afc(0x2ac)]=formatResult(_0x582498,0x8);}),proxyEmit('portfolio',_0x103c33);}}}function truncateTradeAmount(_0x400059,_0x10dc0d){const _0x2c1e45=_0x50ecf5;let _0x1932ea=0x0;try{_0x1932ea=exchange[_0x2c1e45(0x2c0)](_0x400059,_0x10dc0d);}catch(_0x1f34fc){}return _0x1932ea;}function checkMinimums(_0x4e06ae){const _0x34ae00=_0x50ecf5;let _0x968cc7=!![];const _0x474ca1=!_0x4e06ae[_0x34ae00(0x29f)]?markets[_0x4e06ae[_0x34ae00(0x1fb)]][_0x34ae00(0x277)]['amount'][_0x34ae00(0x188)]:markets[_0x4e06ae['symbol']][_0x34ae00(0x277)][_0x34ae00(0x27b)][_0x34ae00(0x188)],_0x2af533=!_0x4e06ae[_0x34ae00(0x29f)]?markets[_0x4e06ae[_0x34ae00(0x1fb)]][_0x34ae00(0x277)][_0x34ae00(0x27b)][_0x34ae00(0x188)]:markets[_0x4e06ae[_0x34ae00(0x1fb)]][_0x34ae00(0x277)][_0x34ae00(0x2e7)][_0x34ae00(0x188)],_0xe3baab=truncateTradeAmount(_0x4e06ae[_0x34ae00(0x1fb)],_0x4e06ae[_0x34ae00(0x1c1)]);_0x4e06ae[_0x34ae00(0x1c1)]=_0xe3baab;if(Math[_0x34ae00(0x25f)](_0xe3baab)<_0x474ca1)_0x968cc7=![];if(Math[_0x34ae00(0x25f)](_0xe3baab)*_0x4e06ae[_0x34ae00(0x279)]<_0x2af533)_0x968cc7=![];if(_0x4e06ae[_0x34ae00(0x253)]==_0x34ae00(0x1c8)){let _0x466e3c=config[_0x34ae00(0x190)][_0x34ae00(0x291)](_0xa0e472=>_0xa0e472[_0x34ae00(0x28c)]==_0x4e06ae[_0x34ae00(0x28c)]);if(_0x466e3c[_0x34ae00(0x167)]>0x0){if(Math['abs'](_0xe3baab)>_0x4e06ae[_0x34ae00(0x290)]-_0x466e3c[_0x34ae00(0x167)])_0x968cc7=![];}else{if(Math[_0x34ae00(0x25f)](_0xe3baab)>_0x4e06ae['number'])_0x968cc7=![];}}if(_0x4e06ae['side']==_0x34ae00(0x1bf)){let _0xd4549e=config[_0x34ae00(0x190)]['find'](_0x1ee2b9=>_0x1ee2b9[_0x34ae00(0x28c)]==config[_0x34ae00(0x2ae)]),_0x530ad5=currentCoins[_0x34ae00(0x291)](_0x5803b6=>_0x5803b6['coin']==config[_0x34ae00(0x2ae)]);if(_0xd4549e['offset']>0x0){if(Math['abs'](_0xe3baab)*_0x4e06ae[_0x34ae00(0x279)]>_0x530ad5[_0x34ae00(0x290)]-_0xd4549e[_0x34ae00(0x167)])_0x968cc7=![];}else{if(Math[_0x34ae00(0x25f)](_0xe3baab)*_0x4e06ae['last']>_0x530ad5['number'])_0x968cc7=![];}}return _0x968cc7;}async function getBalances(_0x5288a1=!![]){const _0x352a77=_0x50ecf5;let _0x1ee359=0x0,_0x3762cf;const _0x1a658f=config[_0x352a77(0x286)];if(config[_0x352a77(0x2d3)]&&config[_0x352a77(0x1ba)]<0x0)await validate24hChanges();currentCoins[_0x352a77(0x19b)](_0x21a3db=>{const _0x20d4da=_0x352a77;if(_0x21a3db[_0x20d4da(0x28c)]!=config[_0x20d4da(0x2ae)]){let _0x10cae2=global[_0x20d4da(0x20a)][noslash(_0x21a3db[_0x20d4da(0x1fb)])];_0x3762cf=_0x21a3db[_0x20d4da(0x29f)]?0x1/_0x10cae2:_0x10cae2;}else _0x3762cf=0x1;let _0x108ccb=_0x21a3db[_0x20d4da(0x290)]*_0x3762cf;_0x1ee359+=_0x108ccb,_0x21a3db[_0x20d4da(0x279)]=formatResult(Number(_0x3762cf),0x8),_0x21a3db[_0x20d4da(0x2b3)]=_0x108ccb;}),currentCoins[_0x352a77(0x19b)](_0x292287=>{const _0x356448=_0x352a77;let _0x3890a7=config['portfolio'][_0x356448(0x291)](_0xf4a456=>_0xf4a456['coin']==_0x292287[_0x356448(0x28c)]),_0x2d782e=Number(_0x3890a7['distribution']),_0x15ae87=_0x292287[_0x356448(0x2b3)]/_0x1ee359*0x64,_0x24f016=_0x2d782e*_0x1ee359/0x64/_0x292287[_0x356448(0x279)]-_0x292287[_0x356448(0x290)];_0x292287[_0x356448(0x177)]=formatResult(_0x15ae87,0x3),_0x292287[_0x356448(0x2a8)]=formatResult(_0x2d782e,0x3),_0x292287[_0x356448(0x1c1)]=formatResult(_0x24f016,0x8),_0x292287[_0x356448(0x253)]='',_0x292287[_0x356448(0x25a)]=![];if(_0x292287[_0x356448(0x28c)]!=config[_0x356448(0x2ae)]){if(_0x292287[_0x356448(0x177)]>_0x2d782e)_0x292287[_0x356448(0x253)]=_0x356448(0x1c8),_0x292287[_0x356448(0x25a)]=checkMinimums(_0x292287);else _0x292287[_0x356448(0x177)]<_0x2d782e&&(_0x292287['side']=_0x356448(0x1bf),_0x292287[_0x356448(0x25a)]=checkMinimums(_0x292287));}_0x292287[_0x356448(0x241)]=_0x292287['distribution']/_0x292287[_0x356448(0x2a8)]-0x1;if(_0x292287['orderstatus']==_0x356448(0x170)||_0x292287[_0x356448(0x1c0)]=='canceled')_0x292287['orderstatus']=_0x356448(0x17c);}),currentCoins['sort']((_0x270c32,_0x2dd821)=>_0x270c32[_0x352a77(0x241)]<_0x2dd821['delta']?0x1:_0x2dd821[_0x352a77(0x241)]<_0x270c32[_0x352a77(0x241)]?-0x1:0x0);const _0xaf9626=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xaf9626['eur'],'usd':_0xaf9626[_0x352a77(0x2f4)],'portfolio':JSON[_0x352a77(0x1d3)](currentCoins),'threshold':_0x1a658f},proxyEmit(_0x352a77(0x2b8),{'serverversion':serverversion,'balances':lastBalances});if(_0x5288a1){if(config[_0x352a77(0x2d3)])headlessMode({'portfolio':currentCoins,'threshold':_0x1a658f});else{if(lockOrders==ORDERS[_0x352a77(0x281)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1a658f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x50800d=getNormalizedPerformance();getStartingBalances(_0x50800d),emitPerformance(_0x50800d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1aae24=getNormalizedPerformance();emitPerformance(_0x1aae24),getStartingBalances(_0x1aae24),logger['debug'](_0x352a77(0x223));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x19b726=_0x50ecf5;if(!lastBalances)return;let _0x2e56a1=[],_0x29ff4a,_0x4bbf95=JSON[_0x19b726(0x1dd)](lastBalances[_0x19b726(0x190)]);_0x4bbf95['sort']((_0x54e2c6,_0x160f3e)=>_0x54e2c6[_0x19b726(0x28c)]>_0x160f3e[_0x19b726(0x28c)]?0x1:_0x160f3e[_0x19b726(0x28c)]>_0x54e2c6['coin']?-0x1:0x0),_0x4bbf95[_0x19b726(0x19b)](_0x2049fc=>{const _0x26abdf=_0x19b726;let _0x19f21a={'coin':_0x2049fc[_0x26abdf(0x28c)],'number':_0x2049fc[_0x26abdf(0x290)],'price':_0x2049fc[_0x26abdf(0x279)]};_0x2e56a1[_0x26abdf(0x295)](_0x19f21a);});const _0x3ebcd4=await getFiat();_0x29ff4a={'date':lastBalances[_0x19b726(0x17e)][_0x19b726(0x207)]('\x20')[0x0],'eur':_0x3ebcd4[_0x19b726(0x197)],'usd':_0x3ebcd4[_0x19b726(0x2f4)],'coins':_0x2e56a1};let _0x477d39=dbPerformance['get'](_0x19b726(0x2ec))[_0x19b726(0x291)]({'date':_0x29ff4a['date']})[_0x19b726(0x2b3)]();_0x477d39?_0x29ff4a[_0x19b726(0x19e)]!=config[_0x19b726(0x2d6)]&&dbPerformance[_0x19b726(0x1cc)]('data')[_0x19b726(0x291)]({'date':_0x29ff4a[_0x19b726(0x19e)]})[_0x19b726(0x1c3)](_0x29ff4a)[_0x19b726(0x23b)]():dbPerformance['get'](_0x19b726(0x2ec))['push'](_0x29ff4a)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x310012=_0x50ecf5;let _0x10e0fa=[];if(dbPerformance[_0x310012(0x192)](_0x310012(0x2ec))['value']()){let _0x6c80bd=dbPerformance[_0x310012(0x1cc)](_0x310012(0x2ec))['cloneDeep']()['filter'](_0x30c180=>{const _0x261916=_0x310012;if(_0x30c180[_0x261916(0x1b0)][_0x261916(0x1b3)]==0x0)return![];else return!![];})[_0x310012(0x2bb)](_0x310012(0x19e))[_0x310012(0x2b3)](),_0x184131=[...config['liquidity']];_0x184131['sort']((_0x4fc1f9,_0x37e41a)=>_0x4fc1f9[_0x310012(0x19e)]>_0x37e41a[_0x310012(0x19e)]?-0x1:_0x37e41a[_0x310012(0x19e)]>_0x4fc1f9[_0x310012(0x19e)]?0x1:0x0);let _0x2f7532=0x1,_0x2eeec6=[],_0x1c0d07=0x0;_0x6c80bd[_0x310012(0x18e)]()['reverse']()['forEach']((_0x21a3d9,_0x49c97a)=>{const _0x36d40c=_0x310012;if(_0x184131[_0x1c0d07]){if(_0x6c80bd[_0x6c80bd[_0x36d40c(0x1b3)]-_0x49c97a]&&_0x184131[_0x1c0d07][_0x36d40c(0x19e)]==_0x6c80bd[_0x6c80bd[_0x36d40c(0x1b3)]-_0x49c97a][_0x36d40c(0x19e)]){if(_0x49c97a<_0x6c80bd[_0x36d40c(0x1b3)]){let _0x3c354a=0x0,_0x257a89=0x0;_0x6c80bd[_0x6c80bd[_0x36d40c(0x1b3)]-_0x49c97a]['coins'][_0x36d40c(0x19b)](_0x9a726b=>{const _0x4e064a=_0x36d40c;_0x257a89+=_0x9a726b[_0x4e064a(0x290)]*_0x9a726b[_0x4e064a(0x2ac)];}),_0x184131[_0x1c0d07][_0x36d40c(0x2af)]['forEach'](_0x2fd69c=>{const _0xcb78f7=_0x36d40c;_0x3c354a+=_0x2fd69c[_0xcb78f7(0x290)]*_0x2fd69c[_0xcb78f7(0x2ac)];}),_0x2f7532*=_0x3c354a/(_0x257a89-_0x3c354a)+0x1;}_0x1c0d07++;}}let _0x2f1bea=0x0;_0x21a3d9[_0x36d40c(0x1b0)][_0x36d40c(0x19b)](_0xe1800=>{const _0x2a5847=_0x36d40c;_0x2f1bea+=_0xe1800[_0x2a5847(0x290)]*_0xe1800[_0x2a5847(0x2ac)];}),_0x2eeec6[_0x6c80bd[_0x36d40c(0x1b3)]-_0x49c97a-0x1]=_0x2f1bea*(_0x2f7532-0x1);});let _0x4ffabd=[];_0x184131=[...config[_0x310012(0x2e9)]]||[];let _0x2c14a4=0x0;_0x1c0d07=0x0,_0x6c80bd[_0x310012(0x19b)]((_0x2c357c,_0x77f691)=>{const _0x426fa4=_0x310012;if(_0x184131[_0x1c0d07]){const _0x1d066f=fns[_0x426fa4(0x1dd)](_0x184131[_0x1c0d07][_0x426fa4(0x19e)],_0x426fa4(0x2d1),new Date()),_0x269a11=fns[_0x426fa4(0x1dd)](_0x2c357c[_0x426fa4(0x19e)],'yyyy/MM/dd',new Date());if(fns[_0x426fa4(0x28f)](_0x1d066f,_0x269a11)){let _0x11aa7e=0x0;_0x184131[_0x1c0d07][_0x426fa4(0x2af)][_0x426fa4(0x19b)](_0x2a7e8f=>{const _0x1311d5=_0x426fa4;!_0x4ffabd[_0x2a7e8f[_0x1311d5(0x28c)]]?_0x4ffabd[_0x2a7e8f['coin']]=_0x2a7e8f[_0x1311d5(0x290)]:(_0x11aa7e=_0x4ffabd[_0x2a7e8f['coin']],_0x4ffabd[_0x2a7e8f[_0x1311d5(0x28c)]]+=_0x2a7e8f['number']);const _0x1837c6=_0x2c357c[_0x1311d5(0x1b0)][_0x1311d5(0x291)](_0xfc473e=>_0xfc473e[_0x1311d5(0x28c)]==_0x2a7e8f[_0x1311d5(0x28c)]);(!_0x1837c6||_0x1837c6[_0x1311d5(0x290)]==0x0)&&(_0x2c14a4+=(-_0x2a7e8f['number']-_0x11aa7e)*_0x2a7e8f[_0x1311d5(0x2ac)]);}),_0x1c0d07++;}}_0x2c357c[_0x426fa4(0x1b0)]['forEach']((_0x3c5c3b,_0x440ff4)=>{const _0x6baa3e=_0x426fa4;_0x4ffabd[_0x3c5c3b[_0x6baa3e(0x28c)]]&&(_0x3c5c3b['initial']=_0x4ffabd[_0x3c5c3b['coin']]);}),_0x10e0fa[_0x426fa4(0x295)]({'date':_0x2c357c['date'],'eur':_0x2c357c[_0x426fa4(0x197)],'usd':_0x2c357c[_0x426fa4(0x2f4)],'offset':_0x2eeec6[_0x77f691],'netoffset':_0x2c14a4,'coins':_0x2c357c[_0x426fa4(0x1b0)]});});}return _0x10e0fa;}function emitPerformance(_0x486995){const _0x31582b=_0x50ecf5;_0x486995[_0x31582b(0x1b3)]!==0x0?(proxyEmit('performance',_0x486995),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x29cda5,_0x4d83ef){const _0x3844e5=_0x50ecf5;let _0x1a9f6f=0x0,_0x3caf78=0x0,_0x1a8781=0x0;_0x29cda5[_0x3844e5(0x1b0)][_0x3844e5(0x19b)](_0x32ac10=>{const _0x53d7be=_0x3844e5;_0x1a9f6f+=_0x32ac10['number']*_0x32ac10[_0x53d7be(0x2ac)];});_0x4d83ef&&(_0x1a9f6f+=_0x29cda5[_0x3844e5(0x167)]);if(config[_0x3844e5(0x2ae)]===_0x3844e5(0x1e6)||config[_0x3844e5(0x2ae)]===_0x3844e5(0x1e7))_0x3caf78=_0x1a9f6f*_0x29cda5['eur'],_0x1a8781=_0x1a9f6f*_0x29cda5[_0x3844e5(0x2f4)];else{if(usdBasecoins['includes'](config[_0x3844e5(0x2ae)]))_0x3caf78=_0x1a9f6f*_0x29cda5['eur']/_0x29cda5[_0x3844e5(0x2f4)],_0x1a8781=_0x1a9f6f;else config[_0x3844e5(0x2ae)]===_0x3844e5(0x22a)&&(_0x3caf78=_0x1a9f6f,_0x1a8781=_0x1a9f6f*_0x29cda5[_0x3844e5(0x2f4)]/_0x29cda5['eur']);}return[_0x1a9f6f,_0x3caf78,_0x1a8781];}function getKPIs(_0x536a3a,_0x4837f3=_0x50ecf5(0x22a)){const _0x12aef7=_0x50ecf5,_0x5ad1d9=config[_0x12aef7(0x2ae)],_0x1e53bc=lastBalances,_0x3a3932=currentCoins,_0x558433=getNormalizedPerformance(),_0x3ee594=_0x536a3a===_0x12aef7(0x2ae)?_0x5ad1d9:_0x536a3a==='fiat'||_0x536a3a===_0x12aef7(0x1c2)?_0x4837f3:_0x12aef7(0x1a5)+_0x5ad1d9,_0x1b682e=_0x536a3a===_0x12aef7(0x2d8)?_0x12aef7(0x29b):_0x536a3a===_0x12aef7(0x1c2)?'Net\x20effect':_0x3ee594+_0x12aef7(0x25e),_0x46c68b=_0x536a3a===_0x12aef7(0x2d8)||_0x536a3a===_0x12aef7(0x1c2)?_0x12aef7(0x29b):_0x3ee594+_0x12aef7(0x2de);let _0x5eea11=0x0;_0x3a3932[_0x12aef7(0x19b)](_0x348b5f=>{const _0x59371e=_0x12aef7;_0x5eea11+=_0x348b5f[_0x59371e(0x290)]*_0x348b5f[_0x59371e(0x279)];});if(_0x536a3a===_0x12aef7(0x29c)||_0x536a3a==='net-fiat'){if(_0x5ad1d9==='BTC'||_0x5ad1d9===_0x12aef7(0x1e7))_0x5eea11=_0x5eea11*(_0x4837f3===_0x12aef7(0x22a)?_0x1e53bc[_0x12aef7(0x197)]:_0x1e53bc[_0x12aef7(0x2f4)]);else{if(usdBasecoins['includes'](_0x5ad1d9))_0x5eea11=_0x5eea11*(_0x4837f3===_0x12aef7(0x22a)?_0x1e53bc[_0x12aef7(0x197)]/_0x1e53bc[_0x12aef7(0x2f4)]:0x1);else _0x5ad1d9==='EUR'&&(_0x5eea11=_0x5eea11*(_0x4837f3===_0x12aef7(0x22a)?0x1:_0x1e53bc['usd']/_0x1e53bc['eur']));}}let _0x3b5f2c;if(_0x5eea11!==0x0){if(_0x536a3a===_0x12aef7(0x2ae))_0x3b5f2c=(_0x5eea11/startingBalances[_0x12aef7(0x2ae)]-0x1)*0x64;else{if(_0x4837f3===_0x12aef7(0x22a))_0x3b5f2c=(_0x5eea11/startingBalances[_0x12aef7(0x197)]-0x1)*0x64;else _0x3b5f2c=(_0x5eea11/startingBalances[_0x12aef7(0x2f4)]-0x1)*0x64;}let _0x28e974=0x0;if(startingBalances[_0x12aef7(0x1b0)])_0x3a3932[_0x12aef7(0x19b)](_0x57119b=>{const _0x315cf0=_0x12aef7;let _0xc872f2=startingBalances[_0x315cf0(0x1b0)][_0x315cf0(0x291)](_0x5c4095=>_0x5c4095[_0x315cf0(0x28c)]===_0x57119b['coin']);if(_0xc872f2&&_0xc872f2[_0x315cf0(0x28c)]&&_0x57119b[_0x315cf0(0x290)]!==0x0)_0x28e974+=_0xc872f2[_0x315cf0(0x290)]*_0x57119b['last'];});let _0x4c82a2=0x0;if(_0x558433[_0x12aef7(0x1b3)]!==0x0){let _0x2b8805=_0x558433[_0x558433[_0x12aef7(0x1b3)]-0x1];_0x4c82a2=_0x2b8805[_0x12aef7(0x2ba)];}_0x28e974-=_0x4c82a2;_0x536a3a==='net-basecoin'&&(_0x3b5f2c=(_0x5eea11-_0x28e974)/startingBalances[_0x12aef7(0x2ae)]*0x64,_0x5eea11=_0x5eea11-_0x28e974);if(_0x536a3a===_0x12aef7(0x1c2)){let _0x1cebb4=_0x4837f3===_0x12aef7(0x22a)?startingBalances[_0x12aef7(0x197)]:startingBalances['usd'];if(_0x5ad1d9==='BTC'||_0x5ad1d9===_0x12aef7(0x1e7))_0x28e974=_0x4837f3==='EUR'?_0x28e974*_0x1e53bc['eur']:_0x28e974*_0x1e53bc[_0x12aef7(0x2f4)];else{if(usdBasecoins[_0x12aef7(0x2f5)](_0x5ad1d9))_0x28e974=_0x4837f3==='EUR'?_0x28e974*_0x1e53bc[_0x12aef7(0x197)]/_0x1e53bc[_0x12aef7(0x2f4)]:_0x28e974;else _0x5ad1d9===_0x12aef7(0x22a)&&(_0x28e974=_0x4837f3===_0x12aef7(0x22a)?_0x28e974:_0x28e974*_0x1e53bc[_0x12aef7(0x2f4)]/_0x1e53bc[_0x12aef7(0x197)]);}_0x3b5f2c=(_0x5eea11-_0x28e974)/_0x1cebb4*0x64,_0x5eea11=_0x5eea11-_0x28e974;}if(_0x3b5f2c){if(_0x3b5f2c<0x64)_0x3b5f2c=_0x3b5f2c[_0x12aef7(0x1f8)](0x2);else{if(_0x3b5f2c<0x3e8)_0x3b5f2c=_0x3b5f2c[_0x12aef7(0x1f8)](0x1);else _0x3b5f2c=_0x3b5f2c[_0x12aef7(0x1f8)](0x0);}}else _0x3b5f2c=Number('0')[_0x12aef7(0x1f8)](0x2);if(_0x5eea11){if(Math[_0x12aef7(0x25f)](_0x5eea11)<0.000001)_0x5eea11=_0x5eea11['toFixed'](0x2);else{if(Math[_0x12aef7(0x25f)](_0x5eea11)<0.1)_0x5eea11=_0x5eea11['toFixed'](0x6);else{if(Math[_0x12aef7(0x25f)](_0x5eea11)<0x1)_0x5eea11=_0x5eea11[_0x12aef7(0x1f8)](0x5);else{if(Math[_0x12aef7(0x25f)](_0x5eea11)<0xa)_0x5eea11=_0x5eea11[_0x12aef7(0x1f8)](0x4);else{if(Math[_0x12aef7(0x25f)](_0x5eea11)<0x64)_0x5eea11=_0x5eea11[_0x12aef7(0x1f8)](0x3);else{if(Math[_0x12aef7(0x25f)](_0x5eea11)<0x3e8)_0x5eea11=_0x5eea11[_0x12aef7(0x1f8)](0x2);else _0x5eea11=_0x5eea11[_0x12aef7(0x1f8)](0x2);}}}}}}else _0x5eea11=Number('0')[_0x12aef7(0x1f8)](0x2);}else _0x3b5f2c=Number('0')[_0x12aef7(0x1f8)](0x2);return{'value':_0x5eea11,'change':_0x3b5f2c,'leftTxt':_0x1b682e,'rightTxt':_0x46c68b};}async function getStartingBalances(_0x38cb1a,_0x123b97=!![]){const _0x21887b=_0x50ecf5;if(_0x38cb1a[_0x21887b(0x1b3)]!==0x0){const [_0x2539c9,_0x4101f8,_0x57cb07]=getPerf(_0x38cb1a[0x0],!![]);let _0x12b852=[];config[_0x21887b(0x190)]['forEach'](_0x4d0465=>{const _0x5110e2=_0x21887b;let _0x9855d3=0x0,_0x57c894;config[_0x5110e2(0x2e9)][_0x5110e2(0x19b)](_0x3490c2=>{const _0x1157b3=_0x5110e2;let _0x14914a=_0x3490c2[_0x1157b3(0x2af)][_0x1157b3(0x291)](_0x4de5f7=>_0x4de5f7[_0x1157b3(0x28c)]==_0x4d0465[_0x1157b3(0x28c)]);if(_0x14914a){_0x9855d3+=_0x14914a[_0x1157b3(0x290)];if(!_0x57c894)_0x57c894=_0x14914a[_0x1157b3(0x2ac)];}}),_0x12b852[_0x5110e2(0x295)]({'coin':_0x4d0465['coin'],'number':_0x9855d3,'initialprice':_0x57c894});});const _0x25410a={'basecoin':_0x2539c9,'eur':_0x4101f8,'usd':_0x57cb07,'coins':_0x12b852};if(_0x123b97)proxyEmit(_0x21887b(0x221),_0x25410a);startingBalances=_0x25410a;}}function headlessMode(_0x18eea9){const _0x168b60=_0x50ecf5;let _0x14268d=_0x18eea9[_0x168b60(0x190)],_0x2ef817=_0x18eea9[_0x168b60(0x286)],_0x38f967=[];for(let _0x25c473 of _0x14268d){if(_0x25c473[_0x168b60(0x28c)]!=config['basecoin']){if(_0x25c473[_0x168b60(0x241)]>=_0x2ef817/0x64){if(_0x25c473[_0x168b60(0x25a)])_0x38f967[_0x168b60(0x295)](_0x25c473);}else{if(_0x25c473['delta']<=-_0x2ef817/0x64){if(_0x25c473['valid'])_0x38f967[_0x168b60(0x295)](_0x25c473);}}}}_0x38f967[_0x168b60(0x1b3)]>0x0&&placeOrder(_0x38f967);}function notifyBalance(_0x48df08){const _0x11c3ed=_0x50ecf5;let _0x55fa6f=_0x48df08['portfolio'],_0xec171e=_0x48df08['threshold'],_0x253e5c=[];for(let _0x39be1e of _0x55fa6f){if(_0x39be1e[_0x11c3ed(0x28c)]!=config['basecoin']){if(_0x39be1e[_0x11c3ed(0x241)]>=_0xec171e/0x64){if(_0x39be1e[_0x11c3ed(0x25a)])_0x253e5c['push'](_0x39be1e);}else{if(_0x39be1e[_0x11c3ed(0x241)]<=-_0xec171e/0x64){if(_0x39be1e[_0x11c3ed(0x25a)])_0x253e5c[_0x11c3ed(0x295)](_0x39be1e);}}}}if(_0x253e5c[_0x11c3ed(0x1b3)]>0x0){let _0xfa63c5=_0x253e5c['map'](_0x441bd6=>_0x441bd6[_0x11c3ed(0x28c)]);_0xfa63c5[_0x11c3ed(0x230)]();let _0x5a2bbc=_0xfa63c5[_0x11c3ed(0x2a7)](',\x20');if(!lastCoinsToBalance)logHistory(_0x11c3ed(0x180),_0x11c3ed(0x21a));lastCoinsToBalance=_0x5a2bbc;}}function symbolToCoin(_0x16061e){const _0xcdca9b=_0x50ecf5;let _0x2e10d9;if(_0x16061e[_0xcdca9b(0x2f5)]('/'+config[_0xcdca9b(0x2ae)]))_0x2e10d9=_0x16061e[_0xcdca9b(0x2b6)]('/'+config[_0xcdca9b(0x2ae)],'');if(_0x16061e[_0xcdca9b(0x2f5)](config[_0xcdca9b(0x2ae)]+'/'))_0x2e10d9=_0x16061e[_0xcdca9b(0x2b6)](config['basecoin']+'/','');return _0x2e10d9;}async function unlockOrders(){const _0x3e66a6=_0x50ecf5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3e66a6(0x2c7)]){logger[_0x3e66a6(0x1db)](_0x3e66a6(0x2c1)),lockOrders=ORDERS[_0x3e66a6(0x20e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3d75a1=await getCoins();[currentCoins,currentCoinsAll]=_0x3d75a1,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x3e66a6(0x281)],logger[_0x3e66a6(0x1db)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x4184f9){const _0x28b9b1=_0x50ecf5;if(_0x4184f9)validateOrdersState=_0x4184f9;logger[_0x28b9b1(0x1db)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x28b9b1(0x26c)+(lockOrders==0x1?_0x28b9b1(0x19a):lockOrders==0x2?_0x28b9b1(0x1c5):_0x28b9b1(0x20c)));let _0x39a560=[],_0x191a90=config[_0x28b9b1(0x18a)]==_0x28b9b1(0x226)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x28b9b1(0x2e0)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x28b9b1(0x2c7)])return;logger[_0x28b9b1(0x1db)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x28b9b1(0x19b)](_0x59449e=>{const _0x19f1d3=_0x28b9b1;let _0x5a1e9a=![];_0x59449e[_0x19f1d3(0x170)]>0x0&&(_0x5a1e9a=!![]),_0x39a560[_0x19f1d3(0x295)](_0x5a1e9a),_0x5a1e9a&&config[_0x19f1d3(0x18a)]!=_0x19f1d3(0x226)&&logHistory(_0x19f1d3(0x1af),_0x19f1d3(0x1b8)+_0x59449e[_0x19f1d3(0x1fb)]+'\x20'+_0x59449e[_0x19f1d3(0x253)]+'\x20#'+formatResult(_0x59449e[_0x19f1d3(0x170)],0x8)+'\x20@'+formatResult(_0x59449e['price'],0x8));}),_0x39a560[_0x28b9b1(0x19b)]((_0xae8f42,_0x5b531c)=>{const _0x91d1b8=_0x28b9b1;if(_0xae8f42)lastOrders[_0x91d1b8(0x266)](_0x5b531c,0x1);}),persistOpenOrders(lastOrders);const _0x3bf226=coolingDown?_0x28b9b1(0x2d4):'balancing\x20resumed';if(validateOrdersState==_0x28b9b1(0x26a)){validateOrdersState='ongoing';if(_0x39a560[_0x28b9b1(0x2f5)](![])){if(config[_0x28b9b1(0x18a)]==_0x28b9b1(0x226)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x28b9b1(0x1d8)){if(_0x39a560[_0x28b9b1(0x2f5)](![])){}else{if(allOrdersPlaced){if(config[_0x28b9b1(0x18a)]==_0x28b9b1(0x226)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x28b9b1(0x257))_0x39a560[_0x28b9b1(0x2f5)](![])&&(config[_0x28b9b1(0x18a)]==_0x28b9b1(0x226)?logHistory(_0x28b9b1(0x250),_0x28b9b1(0x264)+Math[_0x28b9b1(0x20d)](_0x191a90*validateOrderInterval/0xea60)+_0x28b9b1(0x23e)+_0x3bf226):(await cancelOrders(),logHistory(_0x28b9b1(0x250),_0x28b9b1(0x24b)+Math[_0x28b9b1(0x20d)](_0x191a90*validateOrderInterval/0xea60)+_0x28b9b1(0x23e)+_0x3bf226))),await unlockOrders();else{if(validateOrdersState==_0x28b9b1(0x28b)){if(config['ordertype']!=_0x28b9b1(0x226))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x3bf226);await unlockOrders();}}}}}async function cancelOrders(){const _0x42e813=_0x50ecf5;lastOrders[_0x42e813(0x19b)](async _0x2b8d81=>{const _0x54c072=_0x42e813;try{const _0x2b91c4=await exchange[_0x54c072(0x1a7)](_0x2b8d81[_0x54c072(0x1d6)],_0x2b8d81[_0x54c072(0x1fb)]);}catch(_0x24aba5){if(_0x24aba5[_0x54c072(0x26e)]()[_0x54c072(0x2f5)]('OrderNotFound')){}else await handleError(_0x24aba5,'cancelOrders()');}});}async function initCoinResults(_0xa08297){const _0x4c0650=_0x50ecf5;_0xa08297?logger[_0x4c0650(0x1db)](_0x4c0650(0x2cf)+_0xa08297):logger['debug'](_0x4c0650(0x251)),config[_0x4c0650(0x190)][_0x4c0650(0x19b)](_0x2a2598=>{const _0x422e75=_0x4c0650;if(!_0x2a2598[_0x422e75(0x1e4)]&&_0x2a2598['coin']!=config['basecoin']){const _0x5a6a19=currentCoins[_0x422e75(0x291)](_0x290478=>_0x290478[_0x422e75(0x28c)]==_0x2a2598[_0x422e75(0x28c)]),_0x245476=global[_0x422e75(0x20a)][noslash(_0x2a2598[_0x422e75(0x1fb)])];let _0x4e981a=_0x5a6a19?_0x5a6a19[_0x422e75(0x290)]:null,_0x369a4e=_0x2a2598[_0x422e75(0x29f)]?0x1/_0x245476:_0x245476,_0x21a3fa;config[_0x422e75(0x2e9)]['forEach'](_0x2d8da7=>{const _0x340a1a=_0x422e75;!_0x21a3fa&&(_0x21a3fa=_0x2d8da7[_0x340a1a(0x2af)][_0x340a1a(0x291)](_0x549a69=>_0x549a69['coin']==_0x2a2598['coin']),_0x21a3fa&&(_0x4e981a=_0x21a3fa['number'],_0x369a4e=_0x21a3fa[_0x340a1a(0x2ac)]));});let _0x3e2d5c=dbCoinResults[_0x422e75(0x1cc)]('coins')['find']({'coin':_0x2a2598[_0x422e75(0x28c)]})['value']();if(!_0x3e2d5c){const _0x5c97d5={'coin':_0x2a2598[_0x422e75(0x28c)],'number':_0x4e981a,'breakeven':_0x369a4e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x422e75(0x1cc)](_0x422e75(0x1b0))[_0x422e75(0x295)](_0x5c97d5)[_0x422e75(0x23b)]();}else{if(_0xa08297&&_0x2a2598[_0x422e75(0x28c)]==_0xa08297){const _0x5a242a={'coin':_0x2a2598[_0x422e75(0x28c)],'number':_0x4e981a,'breakeven':_0x369a4e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x422e75(0x1cc)]('coins')['find']({'coin':_0x2a2598['coin']})['assign'](_0x5a242a)[_0x422e75(0x23b)]();}}}});}async function updateCoinResults(_0x349712,_0x2fb45c=![]){const _0x267787=_0x50ecf5;let _0x831f99,_0x423c41,_0x48d7d9,_0x116c1b,_0x2b0eff,_0x2bbb2c,_0xf5e29=dbCoinResults[_0x267787(0x1cc)](_0x267787(0x1b0))[_0x267787(0x291)]({'coin':_0x349712[_0x267787(0x28c)]})[_0x267787(0x2b3)](),_0xfaa557=![];_0xf5e29&&Object['entries'](_0xf5e29)[_0x267787(0x19b)](([_0x3d75ff,_0x28e479])=>{if(_0x28e479==null)_0xfaa557=!![];});(!_0xf5e29||_0xfaa557)&&(await initCoinResults(_0x349712[_0x267787(0x28c)]),_0xf5e29=dbCoinResults[_0x267787(0x1cc)](_0x267787(0x1b0))[_0x267787(0x291)]({'coin':_0x349712[_0x267787(0x28c)]})[_0x267787(0x2b3)]());_0x349712[_0x267787(0x29f)]&&(_0x2bbb2c={'filled':_0x349712[_0x267787(0x170)]*_0x349712[_0x267787(0x2ac)],'amount':_0x349712[_0x267787(0x170)]*_0x349712['price'],'side':_0x349712[_0x267787(0x253)]=='sell'?'buy':_0x267787(0x1c8),'price':0x1/_0x349712['price']},_0x349712={..._0x349712,..._0x2bbb2c});_0x2fb45c?_0x423c41=_0x349712[_0x267787(0x253)]==_0x267787(0x1bf)?_0xf5e29[_0x267787(0x290)]+_0x349712[_0x267787(0x170)]:_0xf5e29[_0x267787(0x290)]-_0x349712['filled']:_0x423c41=await getCoinNumber(_0x349712[_0x267787(0x28c)]);if(_0x349712[_0x267787(0x1da)]&&_0x349712[_0x267787(0x1da)][_0x267787(0x2d7)]==config['basecoin'])_0x831f99=_0x349712[_0x267787(0x1da)][_0x267787(0x27b)];else{if(_0x349712[_0x267787(0x1da)]&&_0x349712[_0x267787(0x1da)]['currency']=='BNB'&&!_0x2fb45c)_0x831f99=_0x349712[_0x267787(0x1da)][_0x267787(0x27b)]*global[_0x267787(0x20a)][_0x267787(0x181)+config[_0x267787(0x2ae)]];else _0x831f99=defaultFee*_0x349712['filled']*_0x349712[_0x267787(0x2ac)];}_0x349712[_0x267787(0x253)]==_0x267787(0x1bf)?(_0x48d7d9=_0x423c41!=0x0?(_0xf5e29[_0x267787(0x1d4)]*_0xf5e29[_0x267787(0x290)]+_0x349712['price']*(_0x423c41-_0xf5e29['number'])+_0x831f99)/_0x423c41:0x0,_0x116c1b=_0xf5e29[_0x267787(0x1fd)]):(_0x48d7d9=_0x423c41!=0x0?(_0xf5e29[_0x267787(0x1d4)]*_0xf5e29[_0x267787(0x290)]-_0x349712[_0x267787(0x2ac)]*(_0xf5e29[_0x267787(0x290)]-_0x423c41)+_0x831f99)/_0x423c41:0x0,_0x116c1b=_0xf5e29['realized']+(_0x349712['price']-_0xf5e29['breakeven'])*_0x349712[_0x267787(0x170)]);_0x2b0eff=(_0x349712['price']-_0x48d7d9-_0x831f99/_0x349712['filled'])*_0x423c41;let _0x5a8b34={'coin':_0x349712[_0x267787(0x28c)],'number':_0x423c41,'breakeven':formatResult(_0x48d7d9,0x8),'realized':formatResult(_0x116c1b,0x8),'unrealized':formatResult(_0x2b0eff,0x8),'fees':formatResult(_0xf5e29['fees']+_0x831f99,0x8),'sells':_0x349712[_0x267787(0x253)]==_0x267787(0x1c8)?_0xf5e29[_0x267787(0x27a)]+0x1:_0xf5e29[_0x267787(0x27a)],'buys':_0x349712[_0x267787(0x253)]==_0x267787(0x1bf)?_0xf5e29['buys']+0x1:_0xf5e29[_0x267787(0x172)]};dbCoinResults['get']('coins')[_0x267787(0x291)]({'coin':_0x349712['coin']})[_0x267787(0x1c3)](_0x5a8b34)['write']();if(!_0x2fb45c){if(_0x349712[_0x267787(0x1da)]&&_0x349712[_0x267787(0x1da)][_0x267787(0x2d7)]=='BNB'){const _0x42d266=currentCoins[_0x267787(0x291)](_0xf412d6=>_0xf412d6[_0x267787(0x28c)]==_0x267787(0x181));if(_0x42d266){let _0x1d67c6=dbCoinResults[_0x267787(0x1cc)]('coins')[_0x267787(0x291)]({'coin':'BNB'})['value']();_0x5a8b34={..._0x1d67c6,'number':_0x42d266['number']},dbCoinResults[_0x267787(0x1cc)]('coins')[_0x267787(0x291)]({'coin':'BNB'})['assign'](_0x5a8b34)['write']();}}}}async function placeOrder(_0x4483f9){const _0x2abcd1=_0x50ecf5,_0x3223c2=config[_0x2abcd1(0x18a)]==_0x2abcd1(0x226)?_0x2abcd1(0x226):'limit';if(lockOrders==ORDERS[_0x2abcd1(0x281)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x2abcd1(0x26a);let _0x3bd927=![];lastOrders=[];for(const _0x252060 of _0x4483f9){let _0x39cd54,_0x549ba7,_0x21fd5e,_0x3eeda8,_0x10d31f,_0x2ae8fd=_0x252060[_0x2abcd1(0x1fb)];try{const _0x4d9071=await exchange[_0x2abcd1(0x258)](_0x2ae8fd);_0x39cd54=_0x252060['reverse']?0x1/_0x252060[_0x2abcd1(0x279)]:_0x252060['last'],_0x549ba7=_0x4d9071[_0x2abcd1(0x228)],_0x21fd5e=_0x4d9071[_0x2abcd1(0x16b)];_0x252060['reverse']?(_0x3eeda8=_0x252060[_0x2abcd1(0x253)]=='buy'?_0x2abcd1(0x1c8):_0x2abcd1(0x1bf),_0x10d31f=Math['abs'](_0x252060['trade'])/_0x39cd54):(_0x3eeda8=_0x252060[_0x2abcd1(0x253)],_0x10d31f=Math['abs'](_0x252060[_0x2abcd1(0x1c1)]));_0x3223c2==_0x2abcd1(0x1cf)&&(config[_0x2abcd1(0x18a)]==_0x2abcd1(0x2be)&&(_0x39cd54=_0x3eeda8==_0x2abcd1(0x1bf)?_0x549ba7:_0x21fd5e),config[_0x2abcd1(0x18a)]==_0x2abcd1(0x296)&&(_0x39cd54=_0x3eeda8=='buy'?_0x21fd5e:_0x549ba7));_0x10d31f=formatResult(_0x10d31f,0x8),_0x39cd54=formatResult(_0x39cd54,0x8);const _0x153979=_0x3eeda8==_0x2abcd1(0x1c8)?config[_0x2abcd1(0x240)]?String[_0x2abcd1(0x178)]('0x'+config[_0x2abcd1(0x240)])+'\x20':'':config[_0x2abcd1(0x27c)]?String[_0x2abcd1(0x178)]('0x'+config[_0x2abcd1(0x27c)])+'\x20':'',_0x19aad8=_0x3223c2==_0x2abcd1(0x226)?_0x2abcd1(0x19d):config['ordertype']==_0x2abcd1(0x2be)?_0x2abcd1(0x1ad):'Limit\x20(low-margin)',_0x40094e=(Math[_0x2abcd1(0x23c)](Math[_0x2abcd1(0x29e)]()*0x35a4e900)+0x5f5e100)[_0x2abcd1(0x26e)]();lastOrders['push']({'customId':_0x40094e,'symbol':_0x2ae8fd,'coin':_0x252060['coin'],'amount':_0x10d31f,'price':_0x39cd54,'side':_0x3eeda8,'reverse':_0x252060['reverse'],'filled':0x0});if(_0x3223c2==_0x2abcd1(0x226))logHistory(_0x2abcd1(0x1af),''+_0x153979+_0x19aad8+_0x2abcd1(0x25b)+_0x2ae8fd+'\x20'+_0x3eeda8+'\x20#'+formatResult(_0x10d31f,0x8)+'\x20@'+formatResult(_0x39cd54,0x8));else logHistory('order',''+_0x153979+_0x19aad8+_0x2abcd1(0x25b)+_0x2ae8fd+'\x20'+_0x3eeda8+'\x20#'+formatResult(_0x10d31f,0x8)+'\x20@'+formatResult(_0x39cd54,0x8));let _0x1439e9;_0x3223c2==_0x2abcd1(0x226)?_0x3eeda8==_0x2abcd1(0x1bf)&&['Bybit','Bitget',_0x2abcd1(0x21f),'Huobi','Huobipro'][_0x2abcd1(0x2f5)](config[_0x2abcd1(0x2dd)])?_0x1439e9=await exchange[_0x2abcd1(0x2cd)](_0x2ae8fd,_0x3223c2,_0x3eeda8,_0x10d31f,_0x39cd54):_0x1439e9=await exchange[_0x2abcd1(0x2cd)](_0x2ae8fd,_0x3223c2,_0x3eeda8,_0x10d31f,undefined):_0x1439e9=await exchange[_0x2abcd1(0x2cd)](_0x2ae8fd,_0x3223c2,_0x3eeda8,_0x10d31f,_0x39cd54);logger['debug'](_0x2abcd1(0x1e1)+_0x1439e9['id']+_0x2abcd1(0x271)+_0x40094e);const _0x265586=lastOrders[_0x2abcd1(0x1b3)]-0x1;if(_0x265586>=0x0&&lastOrders[_0x265586][_0x2abcd1(0x2ed)]==_0x40094e){lastOrders[_0x265586][_0x2abcd1(0x1d6)]=_0x1439e9['id'];if(_0x1439e9['amount'])lastOrders[_0x265586][_0x2abcd1(0x2e7)]=_0x1439e9[_0x2abcd1(0x2e7)];if(_0x1439e9[_0x2abcd1(0x2ac)])lastOrders[_0x265586][_0x2abcd1(0x2ac)]=_0x1439e9['price'];lastOrders[_0x265586]['fee']=_0x1439e9['fee'];}if(config[_0x2abcd1(0x1b2)]!=0x0){let _0x252897=null;if(cooldownTracker[_0x2abcd1(0x1b3)]==config[_0x2abcd1(0x1b2)]-0x1)_0x252897=cooldownTracker[_0x2abcd1(0x17b)]();const _0x29403e=getTimeStamp();cooldownTracker[_0x2abcd1(0x295)](_0x29403e);if(_0x252897){const _0x3b7b5c=fns[_0x2abcd1(0x210)](new Date(_0x29403e),new Date(_0x252897));if(_0x3b7b5c<cooldownInterval){logHistory(_0x2abcd1(0x284),'Executed\x20'+config[_0x2abcd1(0x1b2)]+_0x2abcd1(0x2b2)+cooldownInterval/0x3c+_0x2abcd1(0x2cb)+cooldownPeriod/(0xe10*0x3e8)+_0x2abcd1(0x2c4)),coolingDown=!![];break;}}}}catch(_0x4af6e1){if(_0x4af6e1[_0x2abcd1(0x26e)]()[_0x2abcd1(0x2f5)](_0x2abcd1(0x1c9)))lastOrders=lastOrders['filter'](_0x279574=>_0x279574[_0x2abcd1(0x1fb)]!=_0x2ae8fd),logHistory(_0x2abcd1(0x284),_0x2abcd1(0x2a3)+_0x2ae8fd),_0x3bd927=!![];else{if(_0x4af6e1[_0x2abcd1(0x26e)]()[_0x2abcd1(0x2f5)](_0x2abcd1(0x2c3)))lastOrders=lastOrders[_0x2abcd1(0x2e6)](_0x5d60a9=>_0x5d60a9['symbol']!=_0x2ae8fd),logHistory(_0x2abcd1(0x284),_0x2abcd1(0x222)+_0x2ae8fd),_0x3bd927=!![];else{if(_0x4af6e1[_0x2abcd1(0x26e)]()[_0x2abcd1(0x2f5)](_0x2abcd1(0x1ac)))lastOrders=lastOrders[_0x2abcd1(0x2e6)](_0x4ca688=>_0x4ca688['symbol']!=_0x2ae8fd),logHistory(_0x2abcd1(0x284),_0x2abcd1(0x23d)+_0x2ae8fd),logger['debug'](_0x4af6e1),_0x3bd927=!![];else _0x4af6e1[_0x2abcd1(0x26e)]()[_0x2abcd1(0x2f5)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x2abcd1(0x2e6)](_0x5b8a03=>_0x5b8a03[_0x2abcd1(0x1fb)]!=_0x2ae8fd),logHistory('error',_0x2abcd1(0x2a3)+_0x2ae8fd),_0x3bd927=!![]):(lastOrders=lastOrders[_0x2abcd1(0x2e6)](_0x18a4f4=>_0x18a4f4[_0x2abcd1(0x1fb)]!=_0x2ae8fd),await handleError(_0x4af6e1,_0x2abcd1(0x23f),_0x2ae8fd));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2abcd1(0x1b3)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3ea4d0=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2abcd1(0x2e0)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3ea4d0);}else unlockOrders();_0x3bd927&&config[_0x2abcd1(0x2d3)]&&(logHistory(_0x2abcd1(0x284),_0x2abcd1(0x298)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2abcd1(0x250),_0x2abcd1(0x273)));}else{if(coolingDown)!config[_0x2abcd1(0x2d3)]&&logHistory(_0x2abcd1(0x284),_0x2abcd1(0x16c));else lockOrders!=ORDERS[_0x2abcd1(0x281)]&&(!config['headless']&&(config['ordertype']==_0x2abcd1(0x226)?logHistory(_0x2abcd1(0x284),_0x2abcd1(0x24a)):logHistory(_0x2abcd1(0x284),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1fc875){const _0x599b2c=_0x50ecf5,_0x2f64a3={...config,'openOrders':_0x1fc875};let _0x2d1b65=dbConfig['get']('bot')[_0x599b2c(0x291)]({'botID':botID})[_0x599b2c(0x2b3)]();_0x2d1b65&&dbConfig[_0x599b2c(0x1cc)](_0x599b2c(0x1ff))[_0x599b2c(0x291)]({'botID':botID})[_0x599b2c(0x1c3)](_0x2f64a3)['write']();}function restoreOrders(){const _0x46c122=_0x50ecf5;let _0x2f88a8;config[_0x46c122(0x1b5)]&&allOpenOrders[_0x46c122(0x19b)](_0x2653c2=>{const _0x2a9287=_0x46c122,_0x2b4821=config[_0x2a9287(0x1b5)][_0x2a9287(0x291)](_0x582c32=>_0x582c32[_0x2a9287(0x1d6)]==_0x2653c2['id']);_0x2b4821&&(lastOrders['push'](_0x2b4821),_0x2f88a8=_0x2653c2['timestamp']);});if(lastOrders[_0x46c122(0x1b3)]>0x0){lockOrders=ORDERS[_0x46c122(0x2c7)],validateOrdersState=_0x46c122(0x1d8),allOrdersPlaced=!![];const _0x46a1ed=new Date()[_0x46c122(0x25d)](),_0x313dd2=config[_0x46c122(0x18a)]==_0x46c122(0x226)?validateOrderTimeout*0x3c*0x3e8:config[_0x46c122(0x2e0)]*0x3c*0x3e8;if(_0x2f88a8+_0x313dd2>_0x46a1ed){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x10d387=_0x46c122;validateOrders(_0x10d387(0x257));},_0x2f88a8+_0x313dd2-_0x46a1ed);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4e5df2=_0x50ecf5;if(!coinsLoaded){process['send']({'telegrammsg':_0x4e5df2(0x2da)},_0x29092e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x225390='';if(config['showname'])_0x225390='<b>'+config[_0x4e5df2(0x265)]+_0x4e5df2(0x183);else _0x225390='<b>Bot\x20'+botID+_0x4e5df2(0x183);const _0x148b7a=getKPIs(_0x4e5df2(0x2ae)),_0x1b6f2a=getKPIs(_0x4e5df2(0x29c),config['fiat']),_0x7e3f99=getKPIs('net-basecoin'),_0x17a676=getKPIs('net-fiat',config[_0x4e5df2(0x29c)]);_0x225390+=_0x4e5df2(0x24c),_0x225390+=_0x148b7a[_0x4e5df2(0x17a)]+_0x4e5df2(0x2b5)+_0x148b7a[_0x4e5df2(0x2b3)]+'\x0a',_0x225390+=_0x148b7a[_0x4e5df2(0x21c)]+':\x20'+_0x148b7a[_0x4e5df2(0x234)]+'%\x0a',_0x225390+=_0x1b6f2a[_0x4e5df2(0x17a)]+_0x4e5df2(0x2b5)+_0x1b6f2a[_0x4e5df2(0x2b3)]+'\x0a',_0x225390+=_0x1b6f2a[_0x4e5df2(0x21c)]+':\x20'+_0x1b6f2a[_0x4e5df2(0x234)]+'%\x0a',_0x225390+=_0x7e3f99[_0x4e5df2(0x17a)]+':\x20'+_0x7e3f99[_0x4e5df2(0x2b3)]+'\x20('+config['basecoin']+')\x0a',_0x225390+=_0x7e3f99[_0x4e5df2(0x21c)]+':\x20'+_0x7e3f99[_0x4e5df2(0x234)]+_0x4e5df2(0x16d)+config['basecoin']+')\x0a',_0x225390+=_0x17a676[_0x4e5df2(0x17a)]+':\x20'+_0x17a676['value']+'\x20('+config[_0x4e5df2(0x29c)]+')\x0a',_0x225390+=_0x17a676[_0x4e5df2(0x21c)]+':\x20'+_0x17a676[_0x4e5df2(0x234)]+_0x4e5df2(0x16d)+config['fiat']+')\x0a',_0x225390+=_0x4e5df2(0x189),process[_0x4e5df2(0x18f)]({'telegrammsg':_0x225390},_0x16a4b4=>{});}async function sendPortfolioTelegram(){const _0x46017b=_0x50ecf5;if(!coinsLoaded){process[_0x46017b(0x18f)]({'telegrammsg':_0x46017b(0x2da)},_0x1ae89f=>{});return;}let _0x1f5245='';if(config[_0x46017b(0x2a2)])_0x1f5245=_0x46017b(0x1e8)+config[_0x46017b(0x265)]+_0x46017b(0x27f);else _0x1f5245='<b>Bot\x20'+botID+_0x46017b(0x27f);_0x1f5245+=_0x46017b(0x24c),_0x1f5245+='-------------------------------\x0a',_0x1f5245+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1f5245+=_0x46017b(0x285),currentCoins[_0x46017b(0x19b)](_0x38d79e=>{const _0x5120e5=_0x46017b;_0x1f5245+=_0x38d79e[_0x5120e5(0x28c)][_0x5120e5(0x21d)](0x7)+'|\x20'+formatPad(_0x38d79e[_0x5120e5(0x177)],0x2,0x6)+'|\x20'+formatPad(_0x38d79e[_0x5120e5(0x2a8)],0x2,0x6)+'|\x20'+formatPad(_0x38d79e[_0x5120e5(0x241)]*0x64,0x2,0x6)+'\x0a';}),_0x1f5245+=_0x46017b(0x189),process[_0x46017b(0x18f)]({'telegrammsg':_0x1f5245},_0x4f780d=>{});}function formatPad(_0x39b7c5,_0x3fc83f,_0x1d89be){const _0x57929d=_0x50ecf5,_0x16a203=formatResultString(_0x39b7c5,_0x3fc83f);return _0x16a203?_0x16a203[_0x57929d(0x2e2)](_0x1d89be):''[_0x57929d(0x2e2)](_0x1d89be);}function logHistory(_0x1a75c8,_0x384ff8,_0x4ff02f=''){const _0xd45726=_0x50ecf5;logger[_0xd45726(0x1b1)](''+_0x384ff8);let _0x23f410={'time':getTimeStamp(),'type':_0x1a75c8,'event':_0x384ff8};dbLogs[_0xd45726(0x1cc)](_0xd45726(0x2a1))[_0xd45726(0x295)](_0x23f410)[_0xd45726(0x23b)]();if(_0x4ff02f=='')_0x4ff02f=_0x384ff8;proxyEmit(_0xd45726(0x16a),{'log':_0x23f410,'summary':_0x4ff02f}),process[_0xd45726(0x18f)]({'telegram':{..._0x23f410,'botname':config[_0xd45726(0x265)],'showname':config[_0xd45726(0x2a2)]}},_0x2a39a5=>{});}function emitHistory(_0x14b678={}){const _0x1dbca4=_0x50ecf5;Object['keys'](_0x14b678)['length']==0x0&&(_0x14b678={'type':[_0x1dbca4(0x1af),_0x1dbca4(0x16a)],'event':'','page':0x1});if(_0x14b678[_0x1dbca4(0x20f)][_0x1dbca4(0x2f5)](_0x1dbca4(0x16a)))_0x14b678[_0x1dbca4(0x20f)][_0x1dbca4(0x266)](_0x14b678['type']['indexOf'](_0x1dbca4(0x16a)),0x1,_0x1dbca4(0x284),_0x1dbca4(0x180),'success');if(dbLogs[_0x1dbca4(0x192)](_0x1dbca4(0x2a1))[_0x1dbca4(0x2b3)]()){let _0x577620=dbLogs[_0x1dbca4(0x1cc)](_0x1dbca4(0x2a1))[_0x1dbca4(0x2e6)](_0x118f4a=>{const _0xea1f64=_0x1dbca4;if(_0x14b678[_0xea1f64(0x20f)][_0xea1f64(0x1b3)]==0x0)return![];else return _0x14b678[_0xea1f64(0x20f)][_0xea1f64(0x2f5)](_0x118f4a[_0xea1f64(0x20f)]);})[_0x1dbca4(0x2e6)](_0x58be2c=>{const _0x2de898=_0x1dbca4;if(_0x14b678['event']=='')return!![];else return _0x58be2c[_0x2de898(0x16a)]['toLowerCase']()['includes'](_0x14b678[_0x2de898(0x16a)][_0x2de898(0x182)]());})[_0x1dbca4(0x2bb)](_0x1dbca4(0x17e)),_0x3a3a7a=_0x577620[_0x1dbca4(0x2b3)]()[_0x1dbca4(0x1b3)];_0x577620=_0x577620[_0x1dbca4(0x29f)]()['slice']((_0x14b678[_0x1dbca4(0x1a0)]-0x1)*logPageSize,_0x14b678[_0x1dbca4(0x1a0)]*logPageSize-0x1)[_0x1dbca4(0x29f)]()['value'](),proxyEmit(_0x1dbca4(0x247),{'logs':_0x577620,'total':_0x3a3a7a});}else proxyEmit(_0x1dbca4(0x247),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1fdfad){const _0x38593f=_0x50ecf5;if(dbLogs[_0x38593f(0x192)](_0x38593f(0x2a1))['value']()){const _0x23aa53=dbLogs[_0x38593f(0x1cc)](_0x38593f(0x2a1))[_0x38593f(0x2bb)](_0x38593f(0x17e))[_0x38593f(0x2e6)](_0x1eda33=>{const _0x14ee10=_0x38593f;return _0x1eda33[_0x14ee10(0x20f)]==_0x14ee10(0x1af);})[_0x38593f(0x2b3)]();dbLogs[_0x38593f(0x1cc)]('logs')[_0x38593f(0x237)]()[_0x38593f(0x23b)](),dbLogs[_0x38593f(0x1cc)](_0x38593f(0x2a1))[_0x38593f(0x1c3)](_0x23aa53)[_0x38593f(0x23b)](),emitHistory(_0x1fdfad);}}async function pauseBot(){const _0xfcd79d=_0x50ecf5,_0xfc22d8=new Date()['getTime']();if(!lastErrorShown||_0xfc22d8-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xfc22d8;!lastBotPause?(lastBotPause=_0xfc22d8,consecutivePauses=0x1):(_0xfc22d8-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xfcd79d(0x18f)]({'stop':_0xfcd79d(0x2db)},_0x247d29=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xfcd79d(0x25d)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0xab10e2=_0x50ecf5;botPaused=!![],await sleep(0x3e8),process[_0xab10e2(0x18f)]({'stop':_0xab10e2(0x1ec)},_0xf27b17=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x18334a,_0x18bc0b){const _0x53fc18=_0x50ecf5;if(botPaused)return;const _0x127a30=config[_0x53fc18(0x2dd)]||'Exchange';if(_0x18bc0b)logger['debug'](_0x53fc18(0x1be)+_0x18bc0b);if(_0x18334a[_0x53fc18(0x26e)]()['includes'](_0x53fc18(0x1a2)))logHistory('error',_0x127a30+_0x53fc18(0x27d));else{if(_0x18334a[_0x53fc18(0x26e)]()[_0x53fc18(0x2f5)](_0x53fc18(0x242)))logHistory(_0x53fc18(0x284),_0x127a30+_0x53fc18(0x176));else _0x18334a[_0x53fc18(0x26e)]()[_0x53fc18(0x2f5)](_0x53fc18(0x19c))?(logHistory(_0x53fc18(0x284),_0x127a30+_0x53fc18(0x1dc)),logHistory('error',_0x53fc18(0x18b))):await handleError(_0x18334a,null);}}async function handleError(_0x3da7d9,_0x560ae6,_0x7befcb=''){const _0x2cc867=_0x50ecf5;if(botPaused)return;const _0x293d6a=config[_0x2cc867(0x2dd)]||'Exchange';if(_0x560ae6)logger[_0x2cc867(0x1db)](_0x2cc867(0x1be)+_0x560ae6);if(_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x166))||_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x1a8)))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x215)+pauseBotMsg),await pauseBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x1a3))||_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)]('OnMaintenance'))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x206)+pauseBotMsg),await pauseBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()['includes'](_0x2cc867(0x21e)))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x2e3)+pauseBotMsg),await pauseBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x2c6)+pauseBotMsg),await pauseBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x25c)))logHistory(_0x2cc867(0x284),_0x2cc867(0x256)),logHistory(_0x2cc867(0x284),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x1b6)))logHistory('error',_0x2cc867(0x232)),logHistory(_0x2cc867(0x284),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3da7d9 instanceof ccxt[_0x2cc867(0x1e3)])logHistory('error',_0x293d6a+_0x2cc867(0x164)+pauseBotMsg),logger[_0x2cc867(0x1db)](_0x2cc867(0x2cc),_0x3da7d9),await pauseBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x1d1)),logHistory(_0x2cc867(0x284),_0x2cc867(0x2ca)),await killBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()[_0x2cc867(0x2f5)](_0x2cc867(0x242)))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x244)),logHistory(_0x2cc867(0x284),_0x2cc867(0x2ca)),await killBot();else{if(_0x3da7d9[_0x2cc867(0x26e)]()['includes']('AuthenticationError'))logHistory(_0x2cc867(0x284),_0x293d6a+_0x2cc867(0x28e)),logHistory(_0x2cc867(0x284),_0x2cc867(0x2ca)),await killBot();else{if(_0x3da7d9['toString']()[_0x2cc867(0x2f5)](_0x2cc867(0x209)))logHistory(_0x2cc867(0x284),_0x2cc867(0x1ef)+_0x7befcb);else _0x3da7d9 instanceof ccxt[_0x2cc867(0x2d0)]?(logHistory(_0x2cc867(0x284),_0x293d6a+'\x20exchange\x20error'),logger[_0x2cc867(0x1db)](_0x2cc867(0x2cc),_0x3da7d9)):(logHistory(_0x2cc867(0x284),_0x2cc867(0x1f2)+pauseBotMsg),logger[_0x2cc867(0x1db)](_0x2cc867(0x2cc),_0x3da7d9),await pauseBot());}}}}}}}}}}}function formatResult(_0x476021,_0x12ceee){const _0x2854c3=_0x50ecf5;return parseFloat(_0x476021[_0x2854c3(0x1f8)](_0x12ceee));}function formatResultTruncate(_0x1183b0,_0x3896b7){const _0xce8e23=_0x50ecf5;let _0x4ff931=formatResultString(_0x1183b0,0xa),_0x1640a6=_0x4ff931['indexOf']('.');return _0x1640a6!=-0x1&&(_0x4ff931=_0x4ff931[_0xce8e23(0x18e)](0x0,_0x1640a6+_0x3896b7+0x1)),Number(_0x4ff931);}function formatResultString(_0x1638db,_0x5cb687){const _0x154513=_0x50ecf5;let _0x5b3fd2;if(!(''+_0x1638db)['includes']('e'))_0x5b3fd2=+(Math[_0x154513(0x20d)](_0x1638db+'e+'+_0x5cb687)+'e-'+_0x5cb687);else{let _0x5025bf=(''+_0x1638db)[_0x154513(0x207)]('e'),_0x395ab1='';+_0x5025bf[0x1]+_0x5cb687>0x0&&(_0x395ab1='+'),_0x5b3fd2=+(Math[_0x154513(0x20d)](+_0x5025bf[0x0]+'e'+_0x395ab1+(+_0x5025bf[0x1]+_0x5cb687))+'e-'+_0x5cb687);}return Number(_0x5b3fd2)[_0x154513(0x1f8)](_0x5cb687);}function getServerTime(){const _0x463063=_0x50ecf5,_0x4bc033=new Date();return _0x4bc033['getFullYear']()+'/'+(_0x4bc033[_0x463063(0x2b4)]()+0x1)[_0x463063(0x26e)]()[_0x463063(0x2e2)](0x2,'0')+'/'+_0x4bc033[_0x463063(0x1d5)]()[_0x463063(0x26e)]()[_0x463063(0x2e2)](0x2,'0')+'\x20'+_0x4bc033[_0x463063(0x194)]()['toString']()[_0x463063(0x2e2)](0x2,'0')+':'+_0x4bc033[_0x463063(0x203)]()[_0x463063(0x26e)]()[_0x463063(0x2e2)](0x2,'0')+':'+_0x4bc033[_0x463063(0x1fe)]()['toString']()[_0x463063(0x2e2)](0x2,'0');}function getTimeStamp(){const _0xee4240=_0x50ecf5,_0x29cbd9=shiftedTime();return _0x29cbd9[_0xee4240(0x1e9)]()+'/'+(_0x29cbd9['getMonth']()+0x1)[_0xee4240(0x26e)]()[_0xee4240(0x2e2)](0x2,'0')+'/'+_0x29cbd9[_0xee4240(0x1d5)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x29cbd9[_0xee4240(0x194)]()['toString']()['padStart'](0x2,'0')+':'+_0x29cbd9['getMinutes']()[_0xee4240(0x26e)]()[_0xee4240(0x2e2)](0x2,'0')+':'+_0x29cbd9[_0xee4240(0x1fe)]()[_0xee4240(0x26e)]()[_0xee4240(0x2e2)](0x2,'0');}function getDate(){const _0x35c899=_0x50ecf5,_0x18a872=shiftedTime();return _0x18a872[_0x35c899(0x1e9)]()+'/'+(_0x18a872[_0x35c899(0x2b4)]()+0x1)[_0x35c899(0x26e)]()[_0x35c899(0x2e2)](0x2,'0')+'/'+_0x18a872[_0x35c899(0x1d5)]()[_0x35c899(0x26e)]()['padStart'](0x2,'0');}function getHour(){const _0xffc192=_0x50ecf5,_0x24577e=shiftedTime();return _0x24577e[_0xffc192(0x194)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x5469e2){return new Promise(_0x5d5405=>setTimeout(_0x5d5405,_0x5469e2));}function shiftedTime(){const _0xc2146b=_0x50ecf5,_0xf28fc1=new Date();let _0x4ffb4f=_0xf28fc1;if(config&&config['timeshift']!==0x0)_0x4ffb4f=fns[_0xc2146b(0x2f6)](_0xf28fc1,{'hours':config[_0xc2146b(0x24e)]});return _0x4ffb4f;}function timer(_0x2956ef){const _0x464006=_0x50ecf5,_0x32878c=new Date();!lasttime?console[_0x464006(0x16f)](getTimeStamp()+':\x20timer\x20>',_0x2956ef,_0x32878c):console[_0x464006(0x16f)](getTimeStamp()+_0x464006(0x2bd),_0x2956ef,(_0x32878c-lasttime)/0x3e8),lasttime=_0x32878c;}