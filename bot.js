const _0x1fb94e=_0x161d;(function(_0x3ba341,_0x52feb4){const _0x2dc1c2=_0x161d,_0x3072a5=_0x3ba341();while(!![]){try{const _0x2e9a76=-parseInt(_0x2dc1c2(0x200))/0x1*(-parseInt(_0x2dc1c2(0x1b5))/0x2)+-parseInt(_0x2dc1c2(0x1af))/0x3*(-parseInt(_0x2dc1c2(0x28b))/0x4)+parseInt(_0x2dc1c2(0x269))/0x5*(-parseInt(_0x2dc1c2(0x1df))/0x6)+-parseInt(_0x2dc1c2(0x24c))/0x7+parseInt(_0x2dc1c2(0x220))/0x8*(parseInt(_0x2dc1c2(0x1b1))/0x9)+parseInt(_0x2dc1c2(0x230))/0xa+-parseInt(_0x2dc1c2(0x227))/0xb;if(_0x2e9a76===_0x52feb4)break;else _0x3072a5['push'](_0x3072a5['shift']());}catch(_0x3f3065){_0x3072a5['push'](_0x3072a5['shift']());}}}(_0x4ed8,0xd91f7));const _0x1dafe6=function(){let _0x3d8f75=!![];return function(_0x4e4750,_0x32a4f2){const _0x235fe5=_0x3d8f75?function(){if(_0x32a4f2){const _0xc18380=_0x32a4f2['apply'](_0x4e4750,arguments);return _0x32a4f2=null,_0xc18380;}}:function(){};return _0x3d8f75=![],_0x235fe5;};}(),_0x27ff04=_0x1dafe6(this,function(){const _0x5ee9fe=_0x161d;return _0x27ff04['toString']()[_0x5ee9fe(0x20a)](_0x5ee9fe(0x26e))['toString']()[_0x5ee9fe(0x246)](_0x27ff04)['search'](_0x5ee9fe(0x26e));});_0x27ff04();'use strict';const ccxt=require(_0x1fb94e(0x1d1)),low=require(_0x1fb94e(0x215)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x1fb94e(0x19c))[_0x1fb94e(0x279)];let exchange,wsClient;global[_0x1fb94e(0x231)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1fb94e(0x252))[_0x1fb94e(0x1fe)],botID=process['argv'][0x2]||_0x1fb94e(0x189),pattern=/^[0-9]{3}$/;if(!pattern[_0x1fb94e(0x1a1)](botID))return console['log'](_0x1fb94e(0x285)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x1fb94e(0x1f1)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x1fb94e(0x219)+userID+'/':'./config/';!fs[_0x1fb94e(0x183)](configpath)&&fs[_0x1fb94e(0x256)](configpath);const configfile=configpath+'bot-'+botID+_0x1fb94e(0x1da),logfile=configpath+_0x1fb94e(0x243)+botID+_0x1fb94e(0x289),performancefile=configpath+_0x1fb94e(0x243)+botID+_0x1fb94e(0x226),coinresultsfile=configpath+'bot-'+botID+_0x1fb94e(0x26d),settingsfile=configpath+_0x1fb94e(0x27b),securefile=configpath+_0x1fb94e(0x19b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1fb94e(0x20b)]({'logs':[]})[_0x1fb94e(0x1a7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x1fb94e(0x1a7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1fb94e(0x20b)]({'bot':[]})[_0x1fb94e(0x1a7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1fb94e(0x20b)]({'coins':[]})[_0x1fb94e(0x1a7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1fb94e(0x250),'symbol':_0x1fb94e(0x1a8)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x53e79f)=>{},'debug':(..._0x5dcf0e)=>{},'notice':(..._0x11146f)=>{},'info':(..._0x2cc639)=>{},'warning':(..._0x20711c)=>{},'error':async function(..._0x1679cd){const _0x18c2f4=_0x1fb94e,_0x1507ef=new Date()['getTime']();if(!lastErrorShown||_0x1507ef-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x18c2f4(0x25d)](),logHistory('error','WebSockets('+consecutivePauses+_0x18c2f4(0x22a));let _0x81bf80='';if(_0x1679cd[0x0])_0x81bf80+=_0x1679cd[0x0];if(_0x1679cd[0x1]&&_0x1679cd[0x1][_0x18c2f4(0x273)]&&_0x1679cd[0x1][_0x18c2f4(0x273)]['message'])_0x81bf80+=_0x18c2f4(0x18c)+_0x1679cd[0x1][_0x18c2f4(0x273)][_0x18c2f4(0x214)];logging(_0x18c2f4(0x272)+consecutivePauses+_0x18c2f4(0x237),''+_0x81bf80),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1fb94e(0x1ef),'rsaStandard':_0x1fb94e(0x17d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1fb94e(0x1b8)]!=config['timeshift']&&updateTimeshift(settings[_0x1fb94e(0x1b8)]);process[_0x1fb94e(0x277)]({'started':_0x1fb94e(0x1e7)}),initializeProcessListeners();function proxyEmit(_0x2ce152,_0x3f8601=null){const _0x1d27bd=_0x1fb94e;process[_0x1d27bd(0x277)]({'function':_0x2ce152,'args':_0x3f8601});}function initializeProcessListeners(){const _0x12e887=_0x1fb94e;process['on'](_0x12e887(0x214),_0x5a49bd=>{const _0x40d045=_0x12e887;switch(Object[_0x40d045(0x28d)](_0x5a49bd)[0x0]){case'timeshift':_0x5a49bd[_0x40d045(0x1b8)]!=undefined&&(settings[_0x40d045(0x1b8)]=_0x5a49bd[_0x40d045(0x1b8)],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x5a49bd[_0x40d045(0x1e8)]){case _0x40d045(0x255):initclient();break;case _0x40d045(0x1c2):emitHistory(_0x5a49bd[_0x40d045(0x24e)]);break;case'getPortfolio':getPortfolio(_0x5a49bd[_0x40d045(0x24e)]);break;case _0x40d045(0x280):storeConfiguration(_0x5a49bd[_0x40d045(0x24e)]);break;case _0x40d045(0x221):storeHeadless(_0x5a49bd[_0x40d045(0x24e)]);break;case _0x40d045(0x17c):getStartingBalances();break;case _0x40d045(0x228):placeOrder(_0x5a49bd['args']);break;case _0x40d045(0x1f4):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1b33f5=_0x1fb94e;if(pidBalances)clearTimeout(pidBalances);if(config[_0x1b33f5(0x1b9)]!=''){await initExchange(config[_0x1b33f5(0x1b9)],config[_0x1b33f5(0x23d)]);let _0x162b7b=await loadSymbols();_0x162b7b&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3bbbe7,_0x1f1096){const _0x37858c=_0x1fb94e,_0x2f8cc3=ccxt[config[_0x37858c(0x19e)]];let _0x3a050a;switch(config[_0x37858c(0x19e)]){case'binance':_0x3a050a=_0x37858c(0x28a);break;case _0x37858c(0x23f):_0x3a050a=_0x37858c(0x21e);break;default:_0x3a050a='wss://stream.binance.com:9443';}exchange=new _0x2f8cc3({'apiKey':_0x3bbbe7,'secret':_0x1f1096,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3bbbe7,'api_secret':_0x1f1096,'beautify':!![],'wsUrl':_0x3a050a},logger),config['exchange']==_0x37858c(0x23f)&&(stablecoins={'eur':{'coin':_0x37858c(0x27e),'symbol':_0x37858c(0x27d)},'usd':{'coin':_0x37858c(0x265),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x3fcea4=_0x1fb94e;let _0x6d54d6;try{markets=await exchange[_0x3fcea4(0x204)]();const _0x3be34c=[_0x3fcea4(0x241),_0x3fcea4(0x222),_0x3fcea4(0x1c7)];allSymbols=exchange[_0x3fcea4(0x254)][_0x3fcea4(0x201)](_0x2d347f=>{const _0x7a3ac0=_0x3fcea4;let _0x1b5e62=![];return _0x3be34c[_0x7a3ac0(0x271)](_0x1fa386=>{if(_0x2d347f['includes'](_0x1fa386))_0x1b5e62=!![];}),!_0x1b5e62;}),_0x6d54d6=!![];}catch(_0x1dd830){await handleError(_0x1dd830,_0x3fcea4(0x1a5)),_0x6d54d6=![];}return _0x6d54d6;}async function initbot(){const _0x386892=_0x1fb94e;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x24101f=dbCoinResults['get'](_0x386892(0x25c))[_0x386892(0x18f)]();if(_0x24101f[_0x386892(0x242)]==0x0)await resetCoinResults();}async function initclient(){const _0x43647f=_0x1fb94e;proxyEmit(_0x43647f(0x25f),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x43647f(0x207),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x67416d=_0x1fb94e;wsinitialized=![];ws1&&(ws1[_0x67416d(0x271)](_0x1222c6=>{const _0x110fc0=_0x67416d;try{wsClient[_0x110fc0(0x1a9)](_0x1222c6);}catch(_0x551b78){}}),ws1=[]);if(ws2){try{wsClient[_0x67416d(0x1a9)](ws2);}catch(_0x122cbc){}ws2=null;}}async function initws(){const _0x380843=_0x1fb94e;cleanws();let _0x14c802=[];currentCoins[_0x380843(0x271)](_0x5267aa=>{const _0x3769d9=_0x380843;if(_0x5267aa['coin']!=config[_0x3769d9(0x26a)])_0x14c802['push'](noslash(_0x5267aa[_0x3769d9(0x27a)]));});if(!_0x14c802[_0x380843(0x1ce)](stablecoins['eur']['coin']))_0x14c802[_0x380843(0x1e2)](stablecoins[_0x380843(0x282)][_0x380843(0x28f)]);if(!_0x14c802[_0x380843(0x1ce)](stablecoins[_0x380843(0x1c1)][_0x380843(0x28f)]))_0x14c802['push'](stablecoins[_0x380843(0x1c1)][_0x380843(0x28f)]);if(!_0x14c802[_0x380843(0x1ce)](_0x380843(0x1d7)+config['basecoin']))_0x14c802['push']('BNB'+config['basecoin']);try{_0x14c802[_0x380843(0x271)]((_0x5c5f46,_0x23eee5)=>{const _0x38651f=_0x380843;ws1[_0x23eee5]=wsClient[_0x38651f(0x197)](_0x5c5f46,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x380843(0x22d),_0x4dc8e8=>{const _0x10bb6b=_0x380843;if(!Array['isArray'](_0x4dc8e8)&&!_0x4dc8e8[_0x10bb6b(0x27f)][_0x10bb6b(0x1ce)](_0x10bb6b(0x26b))){if(_0x4dc8e8[_0x10bb6b(0x184)]===_0x10bb6b(0x25e)){global['ticker'][_0x4dc8e8[_0x10bb6b(0x25e)]['symbol']]=_0x4dc8e8['kline'][_0x10bb6b(0x199)];return;}}else{if(!Array['isArray'](_0x4dc8e8)&&_0x4dc8e8[_0x10bb6b(0x27f)]['includes'](_0x10bb6b(0x26b))){if(_0x4dc8e8['wsMarket'][_0x10bb6b(0x1ce)](_0x10bb6b(0x1ee))){updateNumberCoins(_0x4dc8e8);return;}}}}),wsClient['on'](_0x380843(0x264),async _0x3f8eff=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1f4b79){await handleError(_0x1f4b79,_0x380843(0x253));}let _0x372cd8,_0x4bf5dc=0x0;loading[_0x380843(0x209)]=[];let _0x2d6414=0x0;currentCoins[_0x380843(0x271)](_0x416482=>{const _0x394697=_0x380843;if(_0x416482[_0x394697(0x28f)]!=config[_0x394697(0x26a)])loading[_0x394697(0x209)][_0x394697(0x1e2)](_0x416482[_0x394697(0x27a)]);}),loadingCanceled=![];while(_0x372cd8!=currentCoins[_0x380843(0x242)]-0x1){_0x372cd8=0x0,currentCoins[_0x380843(0x271)](_0x1b420a=>{const _0x10aa04=_0x380843;_0x1b420a['coin']!=config[_0x10aa04(0x26a)]&&global[_0x10aa04(0x231)][noslash(_0x1b420a[_0x10aa04(0x27a)])]&&(loading[_0x10aa04(0x209)]=loading['remainingSymbols'][_0x10aa04(0x201)](_0x2bb598=>_0x2bb598!=_0x1b420a['symbol']),_0x372cd8++);}),loading[_0x380843(0x211)]=Math[_0x380843(0x223)](_0x372cd8/(currentCoins[_0x380843(0x242)]-0x1)*0x64);_0x2d6414>0x1e*0x5&&(loading[_0x380843(0x210)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x380843(0x202)]=!![],emitLoadingProgress();break;}else _0x372cd8!=_0x4bf5dc&&(_0x4bf5dc=_0x372cd8,emitLoadingProgress()),_0x2d6414++,await sleep(0xc8);}if(_0x372cd8==currentCoins[_0x380843(0x242)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0xa91d24=_0x1fb94e;proxyEmit(_0xa91d24(0x1a3),loading);}async function getFiat(){const _0x52caa6=_0x1fb94e;let _0x1dc734=0x0,_0x56ed1d=0x0;try{_0x1dc734=global['ticker'][stablecoins[_0x52caa6(0x282)]['coin']],_0x56ed1d=global[_0x52caa6(0x231)][stablecoins[_0x52caa6(0x1c1)][_0x52caa6(0x28f)]];}catch(_0x5c4f64){await handleError(_0x5c4f64,_0x52caa6(0x287));}return{'eur':Number(_0x1dc734),'usd':Number(_0x56ed1d)};}async function setStartDatePerformance(_0x573d60){const _0x43554a=_0x1fb94e,_0x265445=fns['format'](new Date(_0x573d60['startdate']),_0x43554a(0x1e5));let _0x6061dc=[];_0x6061dc[stablecoins[_0x43554a(0x282)][_0x43554a(0x28f)]]=await getCloses(stablecoins[_0x43554a(0x282)][_0x43554a(0x27a)],new Date(_0x573d60['startdate']),0x1),_0x6061dc[stablecoins[_0x43554a(0x1c1)][_0x43554a(0x28f)]]=await getCloses(stablecoins[_0x43554a(0x1c1)]['symbol'],new Date(_0x573d60[_0x43554a(0x203)]),0x1);let _0x2e6046,_0x5a9d66=[];_0x573d60[_0x43554a(0x182)][_0x43554a(0x271)](_0x1da2a7=>{const _0x19528c=_0x43554a;!_0x1da2a7[_0x19528c(0x192)]&&_0x5a9d66['push']({'coin':_0x1da2a7['coin'],'number':_0x1da2a7['startnumber'],'price':_0x1da2a7[_0x19528c(0x1de)]});}),_0x2e6046={'date':_0x265445,'eur':_0x6061dc[stablecoins['eur'][_0x43554a(0x28f)]][0x0],'usd':_0x6061dc[stablecoins[_0x43554a(0x1c1)][_0x43554a(0x28f)]][0x0],'coins':_0x5a9d66};let _0x39baac=dbPerformance[_0x43554a(0x245)](_0x43554a(0x1e3))[_0x43554a(0x1bf)]({'date':_0x265445})[_0x43554a(0x18f)]();_0x39baac?dbPerformance[_0x43554a(0x245)](_0x43554a(0x1e3))[_0x43554a(0x1bf)]({'date':_0x265445})['assign'](_0x2e6046)[_0x43554a(0x1a7)]():dbPerformance[_0x43554a(0x245)](_0x43554a(0x1e3))[_0x43554a(0x1e2)](_0x2e6046)['write'](),_0x39baac=dbPerformance[_0x43554a(0x245)]('data')[_0x43554a(0x259)](_0x43554a(0x213))['value'](),_0x39baac['forEach'](_0x39c40b=>{const _0x4491cf=_0x43554a;_0x39c40b['date']<_0x265445&&dbPerformance[_0x4491cf(0x245)](_0x4491cf(0x1e3))['remove']({'date':_0x39c40b['date']})[_0x4491cf(0x1a7)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x41bb2e){const _0xefd4ce=_0x1fb94e;let _0x4c0bb7,_0x5af851=[];logHistory(_0xefd4ce(0x21a),_0xefd4ce(0x1ea)),_0x41bb2e['portfolio'][_0xefd4ce(0x271)](_0xe8b5b8=>{const _0x155d7a=_0xefd4ce;if(_0xe8b5b8['coin']!=config[_0x155d7a(0x26a)]&&!_0xe8b5b8[_0x155d7a(0x192)])_0x5af851[_0x155d7a(0x1e2)]({'coin':_0xe8b5b8[_0x155d7a(0x28f)],'symbol':_0xe8b5b8[_0x155d7a(0x27a)]});});let _0x2612fb=[];try{const _0x177c07=fns[_0xefd4ce(0x217)](fns[_0xefd4ce(0x1d2)](_0x41bb2e[_0xefd4ce(0x203)][_0xefd4ce(0x1a6)](/\//g,'-')),_0xefd4ce(0x1c6));for(const _0x1bb6b9 of _0x5af851){if(_0x1bb6b9['coin']!=config[_0xefd4ce(0x26a)])_0x4c0bb7=await exchange[_0xefd4ce(0x1c5)](_0x1bb6b9[_0xefd4ce(0x27a)],Date[_0xefd4ce(0x205)](_0x177c07));_0x4c0bb7[_0xefd4ce(0x271)](_0x183d4c=>{const _0x3c1607=_0xefd4ce,_0x4e1aa4=_0x1bb6b9[_0x3c1607(0x27a)]['includes'](config[_0x3c1607(0x26a)]+'/'),_0x30a389=fns['format'](fns[_0x3c1607(0x1d2)](_0x183d4c[_0x3c1607(0x1bb)]),_0x3c1607(0x268)),_0x1d9d9e=fns[_0x3c1607(0x217)](fns[_0x3c1607(0x1d2)](_0x183d4c['datetime']),'yyyy/MM/dd');let _0x24eb90;if(_0x183d4c[_0x3c1607(0x281)]=='buy'&&_0x4e1aa4==![])_0x24eb90=_0x183d4c[_0x3c1607(0x1bd)];if(_0x183d4c['side']==_0x3c1607(0x19f)&&_0x4e1aa4==!![])_0x24eb90=-_0x183d4c[_0x3c1607(0x1bd)]*_0x183d4c[_0x3c1607(0x21d)];if(_0x183d4c['side']=='sell'&&_0x4e1aa4==![])_0x24eb90=-_0x183d4c[_0x3c1607(0x1bd)];if(_0x183d4c[_0x3c1607(0x281)]==_0x3c1607(0x1f8)&&_0x4e1aa4==!![])_0x24eb90=_0x183d4c[_0x3c1607(0x1bd)]*_0x183d4c[_0x3c1607(0x21d)];_0x2612fb[_0x3c1607(0x1e2)]({'timestamp':_0x30a389,'date':_0x1d9d9e,'coin':_0x1bb6b9[_0x3c1607(0x28f)],'symbol':_0x1bb6b9[_0x3c1607(0x27a)],'type':_0x183d4c[_0x3c1607(0x22f)],'side':_0x183d4c[_0x3c1607(0x281)],'reverse':_0x4e1aa4,'amount':formatResult(_0x183d4c[_0x3c1607(0x1ca)],0x8),'filled':formatResult(_0x183d4c[_0x3c1607(0x1ca)],0x8),'coinamount':formatResult(_0x24eb90,0x8),'price':formatResult(_0x183d4c[_0x3c1607(0x21d)],0x8)});let _0x4bba12;if(_0x183d4c[_0x3c1607(0x281)]==_0x3c1607(0x19f)&&_0x4e1aa4==![])_0x4bba12=-_0x183d4c[_0x3c1607(0x1bd)]*_0x183d4c[_0x3c1607(0x21d)];if(_0x183d4c[_0x3c1607(0x281)]==_0x3c1607(0x19f)&&_0x4e1aa4==!![])_0x4bba12=_0x183d4c['amount'];if(_0x183d4c[_0x3c1607(0x281)]==_0x3c1607(0x1f8)&&_0x4e1aa4==![])_0x4bba12=_0x183d4c[_0x3c1607(0x1bd)]*_0x183d4c[_0x3c1607(0x21d)];if(_0x183d4c[_0x3c1607(0x281)]=='sell'&&_0x4e1aa4==!![])_0x4bba12=-_0x183d4c[_0x3c1607(0x1bd)];_0x2612fb[_0x3c1607(0x1e2)]({'date':_0x1d9d9e,'coin':config[_0x3c1607(0x26a)],'coinamount':formatResult(_0x4bba12,0x8)});});}_0x2612fb['sort']((_0x39c172,_0x33cb2d)=>_0x39c172['timestamp']>_0x33cb2d[_0xefd4ce(0x1e9)]?0x1:_0x33cb2d[_0xefd4ce(0x1e9)]>_0x39c172['timestamp']?-0x1:0x0),dbLogs[_0xefd4ce(0x245)](_0xefd4ce(0x260))['remove']()[_0xefd4ce(0x1a7)](),_0x2612fb[_0xefd4ce(0x271)](_0x351516=>{const _0x562316=_0xefd4ce;let _0x3b7d6f;_0x351516['coin']!=config[_0x562316(0x26a)]&&(_0x3b7d6f={'time':_0x351516[_0x562316(0x1e9)],'type':_0x562316(0x1fa),'event':_0x562316(0x191)+_0x351516['symbol']+'\x20'+_0x351516[_0x562316(0x281)]+'\x20#'+_0x351516[_0x562316(0x1bd)]+'\x20@'+_0x351516['price']},dbLogs['get'](_0x562316(0x260))['push'](_0x3b7d6f)[_0x562316(0x1a7)]());});const _0x5ce9ed=fns['eachDayOfInterval']({'start':new Date(_0x41bb2e[_0xefd4ce(0x203)]),'end':new Date()})[_0xefd4ce(0x248)](_0x1cb3d2=>fns[_0xefd4ce(0x217)](_0x1cb3d2,_0xefd4ce(0x1e5)));let _0x4214cb=[];_0x41bb2e[_0xefd4ce(0x182)][_0xefd4ce(0x271)](_0x1ec39a=>{const _0x45e8a6=_0xefd4ce;if(!_0x1ec39a['excluded']){_0x4214cb[_0x1ec39a[_0x45e8a6(0x28f)]]=[];let _0xd865fe=_0x1ec39a[_0x45e8a6(0x1f3)];_0x5ce9ed['forEach']((_0x56faf9,_0x339fcf)=>{const _0x549842=_0x45e8a6;let _0x314854=_0x2612fb[_0x549842(0x201)](_0xc028d4=>_0xc028d4[_0x549842(0x28f)]==_0x1ec39a[_0x549842(0x28f)]&&_0xc028d4[_0x549842(0x213)]==_0x56faf9);if(_0x314854['length']!=0x0){let _0x7359ac=_0x314854[_0x549842(0x1e0)]((_0x23bf16,_0x740a91)=>{const _0x923e7a=_0x549842;return _0x23bf16+=_0x740a91[_0x923e7a(0x1d4)],_0x23bf16;},0x0);_0xd865fe+=_0x7359ac;}_0x4214cb[_0x1ec39a[_0x549842(0x28f)]][_0x56faf9]=_0xd865fe;});}});const _0x4d1c71=[..._0x5af851];_0x4d1c71[_0xefd4ce(0x1e2)]({'coin':stablecoins[_0xefd4ce(0x282)][_0xefd4ce(0x28f)],'symbol':stablecoins['eur']['symbol']}),_0x4d1c71[_0xefd4ce(0x1e2)]({'coin':stablecoins[_0xefd4ce(0x1c1)][_0xefd4ce(0x28f)],'symbol':stablecoins['usd'][_0xefd4ce(0x27a)]});let _0x181408=[];for(const _0x14057e of _0x4d1c71){_0x181408[_0x14057e[_0xefd4ce(0x28f)]]=await getCloses(_0x14057e['symbol'],new Date(_0x41bb2e[_0xefd4ce(0x203)]));}dbPerformance[_0xefd4ce(0x245)](_0xefd4ce(0x1e3))[_0xefd4ce(0x1ab)]()['write'](),_0x5ce9ed[_0xefd4ce(0x271)]((_0x1fec44,_0x4555ab)=>{const _0xb10258=_0xefd4ce;let _0x357a4d,_0x32f356=[];_0x4555ab==0x0?(_0x41bb2e[_0xb10258(0x182)][_0xb10258(0x271)](_0x5c8048=>{const _0x276a59=_0xb10258;!_0x5c8048[_0x276a59(0x192)]&&_0x32f356[_0x276a59(0x1e2)]({'coin':_0x5c8048[_0x276a59(0x28f)],'number':_0x5c8048[_0x276a59(0x1f3)],'price':_0x5c8048[_0x276a59(0x1de)]});}),_0x357a4d={'date':_0x1fec44,'eur':_0x181408[stablecoins[_0xb10258(0x282)]['coin']][_0x4555ab],'usd':_0x181408[stablecoins[_0xb10258(0x1c1)][_0xb10258(0x28f)]][_0x4555ab],'coins':_0x32f356}):(_0x41bb2e[_0xb10258(0x182)]['forEach'](_0x29a39d=>{const _0x59c9cb=_0xb10258;!_0x29a39d['excluded']&&_0x32f356[_0x59c9cb(0x1e2)]({'coin':_0x29a39d[_0x59c9cb(0x28f)],'number':_0x4214cb[_0x29a39d[_0x59c9cb(0x28f)]][_0x1fec44],'price':_0x29a39d[_0x59c9cb(0x28f)]==config[_0x59c9cb(0x26a)]?0x1:_0x181408[_0x29a39d[_0x59c9cb(0x28f)]][_0x4555ab]});}),_0x357a4d={'date':_0x1fec44,'eur':_0x181408[stablecoins[_0xb10258(0x282)][_0xb10258(0x28f)]][_0x4555ab],'usd':_0x181408[stablecoins[_0xb10258(0x1c1)][_0xb10258(0x28f)]][_0x4555ab],'coins':_0x32f356}),dbPerformance[_0xb10258(0x245)](_0xb10258(0x1e3))['push'](_0x357a4d)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x368424 of _0x2612fb){_0x368424[_0xefd4ce(0x28f)]!=config[_0xefd4ce(0x26a)]&&await updateCoinResults(_0x368424);}logHistory('success',_0xefd4ce(0x1b2));}catch(_0x142c63){await handleError(_0x142c63,_0xefd4ce(0x208));}}async function getCloses(_0x54f892,_0x222985,_0x4f14c9=undefined){const _0x508b60=_0x1fb94e,_0x406606='1d';let _0x34e5af,_0x214230;const _0x2b43f0=fns['differenceInCalendarDays'](new Date(),_0x222985)+0x1;try{const _0x20ef9a=exchange['milliseconds']()-_0x2b43f0*0x18*0xe10*0x3e8;_0x34e5af=await exchange['fetchOHLCV'](_0x54f892,_0x406606,_0x20ef9a,_0x4f14c9),_0x214230=await exchange[_0x508b60(0x1b3)](_0x54f892);}catch(_0x4c228a){await handleError(_0x4c228a,_0x508b60(0x19a));}let _0x300617=ohlcvToCloses(_0x34e5af);return _0x300617['push'](_0x214230[_0x54f892][_0x508b60(0x1c9)]),_0x300617;}function ohlcvToCloses(_0x45f913){const _0x102394=_0x1fb94e;let _0x5a38ea=[];return _0x45f913[_0x102394(0x271)](function(_0x3d31b1){const _0x21fea1=_0x102394;_0x5a38ea[_0x21fea1(0x1e2)](_0x3d31b1[0x4]);}),_0x5a38ea;}function getConfiguration(_0x767501){const _0x4f6b0b=_0x1fb94e;let _0x46b214=dbConfig[_0x4f6b0b(0x245)](_0x4f6b0b(0x1f7))[_0x4f6b0b(0x1bf)]({'botID':_0x767501})[_0x4f6b0b(0x18f)]();if(_0x46b214){let _0x339032=![];!_0x46b214[_0x4f6b0b(0x19e)]&&(_0x46b214={..._0x46b214,'exchange':_0x4f6b0b(0x1cb)},_0x339032=!![]),!_0x46b214[_0x4f6b0b(0x26a)]&&(_0x46b214={..._0x46b214,'basecoin':'BTC'},_0x339032=!![]),!_0x46b214[_0x4f6b0b(0x1d3)]&&(_0x46b214={..._0x46b214,'ordertype':_0x4f6b0b(0x23e)},_0x339032=!![]),!_0x46b214[_0x4f6b0b(0x210)]&&(_0x46b214={..._0x46b214,'timeout':0x14},_0x339032=!![]),!_0x46b214['emojibuy']&&(_0x46b214={..._0x46b214,'emojibuy':''},_0x339032=!![]),!_0x46b214[_0x4f6b0b(0x1d8)]&&(_0x46b214={..._0x46b214,'emojisell':''},_0x339032=!![]),!_0x46b214[_0x4f6b0b(0x249)]&&(_0x46b214={..._0x46b214,'showname':![]},_0x339032=!![]),_0x339032&&(_0x46b214={'botID':_0x46b214[_0x4f6b0b(0x1db)],'exchange':_0x46b214[_0x4f6b0b(0x19e)],'apiKey':_0x46b214['apiKey'],'apiSecret':_0x46b214[_0x4f6b0b(0x23d)],'basecoin':_0x46b214[_0x4f6b0b(0x26a)],'botname':_0x46b214[_0x4f6b0b(0x19d)],'showname':_0x46b214[_0x4f6b0b(0x249)],'threshold':_0x46b214[_0x4f6b0b(0x1be)],'ordertype':_0x46b214[_0x4f6b0b(0x1d3)],'timeout':_0x46b214[_0x4f6b0b(0x210)],'startdate':_0x46b214[_0x4f6b0b(0x203)],'recreate':_0x46b214[_0x4f6b0b(0x216)],'timeshift':_0x46b214[_0x4f6b0b(0x1b8)],'headless':_0x46b214[_0x4f6b0b(0x286)],'cooldown':_0x46b214[_0x4f6b0b(0x236)],'emojibuy':_0x46b214[_0x4f6b0b(0x18b)],'emojisell':_0x46b214[_0x4f6b0b(0x1d8)],'portfolio':_0x46b214[_0x4f6b0b(0x182)]},dbConfig['get'](_0x4f6b0b(0x1f7))[_0x4f6b0b(0x1ab)]()['write'](),dbConfig[_0x4f6b0b(0x245)](_0x4f6b0b(0x1f7))[_0x4f6b0b(0x1e2)](_0x46b214)[_0x4f6b0b(0x1a7)]());}else _0x46b214={'botID':_0x767501,'exchange':_0x4f6b0b(0x1cb),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x4f6b0b(0x1ed)+_0x767501,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x46b214;}function emittedConfiguration(){const _0x5d4aa2=_0x1fb94e;let _0x4446e1;return config[_0x5d4aa2(0x1b9)]==''?_0x4446e1=config:_0x4446e1={...config,'apiKey':_0x5d4aa2(0x239),'apiSecret':_0x5d4aa2(0x239)},_0x4446e1;}function getSettings(){const _0x46e81c=_0x1fb94e;return dbSettings[_0x46e81c(0x245)](_0x46e81c(0x244))['value']();}function getSecure(){const _0x563134=_0x1fb94e;return dbSecure[_0x563134(0x245)](_0x563134(0x22e))[_0x563134(0x18f)]()||{};}function updateTimeshift(_0x35b61e){const _0x1677a6=_0x1fb94e;let _0x497f9c=dbConfig[_0x1677a6(0x245)](_0x1677a6(0x1f7))[_0x1677a6(0x1bf)]({'botID':botID})[_0x1677a6(0x18f)]();_0x497f9c&&dbConfig['get']('bot')[_0x1677a6(0x1bf)]({'botID':botID})[_0x1677a6(0x17f)]({'timeshift':_0x35b61e})[_0x1677a6(0x1a7)](),config[_0x1677a6(0x1b8)]=_0x35b61e,proxyEmit(_0x1677a6(0x25f),emittedConfiguration());}async function storeConfiguration(_0x3d4a8f){const _0x356777=_0x1fb94e;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0xa15098=dbConfig[_0x356777(0x245)](_0x356777(0x1f7))['find']({'botID':botID})['value']();_0x3d4a8f={..._0x3d4a8f,'apiKey':crypt[_0x356777(0x218)](secure[_0x356777(0x188)],_0x3d4a8f[_0x356777(0x1b9)])[_0x356777(0x214)],'apiSecret':crypt[_0x356777(0x218)](secure[_0x356777(0x188)],_0x3d4a8f[_0x356777(0x23d)])[_0x356777(0x214)]};if(_0xa15098){if(_0x3d4a8f[_0x356777(0x1b9)]=='************')_0x3d4a8f[_0x356777(0x1b9)]=config[_0x356777(0x1b9)];if(_0x3d4a8f[_0x356777(0x23d)]==_0x356777(0x239))_0x3d4a8f[_0x356777(0x23d)]=config[_0x356777(0x23d)];dbConfig[_0x356777(0x245)]('bot')[_0x356777(0x1bf)]({'botID':botID})[_0x356777(0x17f)](_0x3d4a8f)[_0x356777(0x1a7)]();}else dbConfig[_0x356777(0x245)](_0x356777(0x1f7))[_0x356777(0x1e2)](_0x3d4a8f)['write'](),process[_0x356777(0x277)]({'status':'enabled','live':_0x356777(0x1e7)});config={..._0x3d4a8f};if(config[_0x356777(0x216)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x356777(0x277)]({'botname':_0x3d4a8f[_0x356777(0x19d)]}),proxyEmit(_0x356777(0x258)),reset();}async function storeHeadless(_0x5637f1){const _0x71bfd6=_0x1fb94e,_0x4a735f={...config,'headless':_0x5637f1[_0x71bfd6(0x286)]};let _0x444b36=dbConfig[_0x71bfd6(0x245)](_0x71bfd6(0x1f7))[_0x71bfd6(0x1bf)]({'botID':botID})['value']();_0x444b36&&dbConfig['get'](_0x71bfd6(0x1f7))['find']({'botID':botID})[_0x71bfd6(0x17f)](_0x4a735f)[_0x71bfd6(0x1a7)](),config={..._0x4a735f},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x3fe76d){const _0x905395=_0x1fb94e;return _0x3fe76d[_0x905395(0x1a6)]('/','');}function updateNumberCoins(_0x2097dd){const _0x208fa4=_0x1fb94e;_0x2097dd[_0x208fa4(0x184)]&&_0x2097dd[_0x208fa4(0x184)]==_0x208fa4(0x1fb)&&_0x2097dd[_0x208fa4(0x207)][_0x208fa4(0x271)](_0x189638=>{const _0x524a14=_0x208fa4;let _0x5d6c9d=currentCoins[_0x524a14(0x1bf)](_0x322fcc=>_0x322fcc[_0x524a14(0x28f)]==_0x189638[_0x524a14(0x1dc)]);if(_0x5d6c9d)_0x5d6c9d[_0x524a14(0x1d9)]=Number(_0x189638['availableBalance']);});if(_0x2097dd[_0x208fa4(0x184)]&&_0x2097dd[_0x208fa4(0x184)]==_0x208fa4(0x1ff)){if(_0x2097dd[_0x208fa4(0x1fc)]==_0x208fa4(0x1e4)&&_0x2097dd[_0x208fa4(0x288)]==_0x208fa4(0x20f)){if(lastOrders)lastOrders[_0x208fa4(0x271)](_0x29d8b0=>{const _0x2e7669=_0x208fa4;if(_0x29d8b0[_0x2e7669(0x1c3)]==_0x2097dd[_0x2e7669(0x1c3)]){if(_0x29d8b0[_0x2e7669(0x274)])_0x29d8b0[_0x2e7669(0x1ca)]=_0x2097dd[_0x2e7669(0x20c)]*_0x29d8b0[_0x2e7669(0x21d)];else _0x29d8b0[_0x2e7669(0x1ca)]=_0x2097dd['accumulatedQuantity'];}});}}}async function getCoins(_0x302759=!![],_0x5e19d5=config[_0x1fb94e(0x26a)]){const _0x45340a=_0x1fb94e;let _0x3c77fd,_0x581938=[],_0x22074d=[],_0x35645c=[];try{_0x3c77fd=await exchange[_0x45340a(0x25a)](),mybalances=_0x3c77fd[_0x45340a(0x1bc)];if(!_0x302759)for(const [_0x402305,_0x3d2266]of Object[_0x45340a(0x1cd)](mybalances)){_0x35645c[_0x45340a(0x1e2)](_0x402305);}else config[_0x45340a(0x182)][_0x45340a(0x271)](_0x4e5f98=>{const _0x504536=_0x45340a;if(!_0x4e5f98[_0x504536(0x192)])_0x35645c[_0x504536(0x1e2)](_0x4e5f98[_0x504536(0x28f)]);});if(_0x5e19d5=='')for(const [_0x5b50e3,_0xf0650e]of Object[_0x45340a(0x1cd)](mybalances)){_0xf0650e[_0x45340a(0x21f)]()!=0x0&&_0x22074d[_0x45340a(0x1e2)]({'coin':_0x5b50e3});}else for(const [_0x5d94f6,_0x57891e]of Object['entries'](mybalances)){if(_0x35645c['includes'](_0x5d94f6)){if((_0x57891e[_0x45340a(0x21f)]()!=0x0||config[_0x45340a(0x182)]['find'](_0x114239=>_0x114239[_0x45340a(0x28f)]==_0x5d94f6))&&(allSymbols[_0x45340a(0x1ce)](_0x5d94f6+'/'+_0x5e19d5)||_0x5d94f6==_0x5e19d5))_0x22074d[_0x45340a(0x1e2)]({'coin':_0x5d94f6,'symbol':_0x5d94f6+'/'+_0x5e19d5,'reverse':![],'number':_0x57891e}),_0x5d94f6!=_0x5e19d5&&_0x581938[_0x45340a(0x1e2)](_0x5d94f6+'/'+_0x5e19d5);else(_0x57891e[_0x45340a(0x21f)]()!=0x0||config[_0x45340a(0x182)][_0x45340a(0x1bf)](_0x401fe6=>_0x401fe6[_0x45340a(0x28f)]==_0x5d94f6))&&allSymbols[_0x45340a(0x1ce)](_0x5e19d5+'/'+_0x5d94f6)&&(_0x22074d[_0x45340a(0x1e2)]({'coin':_0x5d94f6,'symbol':_0x5e19d5+'/'+_0x5d94f6,'reverse':!![],'number':_0x57891e}),_0x5d94f6!=_0x5e19d5&&_0x581938[_0x45340a(0x1e2)](_0x5e19d5+'/'+_0x5d94f6));}}}catch(_0x4972d0){if(!_0x302759){if(_0x4972d0['toString']()[_0x45340a(0x1ce)](_0x45340a(0x28c)))return logHistory(_0x45340a(0x273),_0x45340a(0x1cf)),![];else{if(_0x4972d0[_0x45340a(0x21f)]()[_0x45340a(0x1ce)](_0x45340a(0x196)))return logHistory(_0x45340a(0x273),_0x45340a(0x23c)),![];else{if(_0x4972d0[_0x45340a(0x21f)]()['includes'](_0x45340a(0x1dd)))return logHistory(_0x45340a(0x273),_0x45340a(0x1b7)),![];else await handleError(_0x4972d0,'getCoins()');}}}else await handleError(_0x4972d0,_0x45340a(0x186));}return _0x22074d;}async function getPortfolio(_0x21cc8d){const _0x30efe3=_0x1fb94e;let _0x556675=[],_0xb4606a=[],_0x1eab82,_0x333610=[],_0x53a844,_0x198289;_0x21cc8d[_0x30efe3(0x1b9)]===_0x30efe3(0x239)||_0x21cc8d['apiSecret']===_0x30efe3(0x239)?(_0x53a844=config[_0x30efe3(0x1b9)],_0x198289=config[_0x30efe3(0x23d)]):(_0x53a844=_0x21cc8d[_0x30efe3(0x1b9)],_0x198289=_0x21cc8d['apiSecret']);await initExchange(_0x53a844,_0x198289);let _0x492e5b=await loadSymbols();if(_0x492e5b){_0x333610=await getCoins(![],_0x21cc8d['basecoin']);if(_0x333610===![])proxyEmit(_0x30efe3(0x182),![]);else{if(_0x21cc8d['basecoin']=='')proxyEmit('portfolio',_0x333610);else{_0x333610['forEach'](_0x14b032=>{const _0x5f8e0c=_0x30efe3;_0x556675['push'](_0x14b032[_0x5f8e0c(0x27a)]);});try{_0xb4606a=await exchange['fetchTickers'](_0x556675);}catch(_0x475e09){await handleError(_0x475e09,_0x30efe3(0x22b));}_0x333610[_0x30efe3(0x271)](_0x3a8d65=>{const _0x2120e5=_0x30efe3;_0x3a8d65[_0x2120e5(0x28f)]!=_0x21cc8d['basecoin']?_0x1eab82=_0x3a8d65[_0x2120e5(0x274)]?0x1/_0xb4606a[_0x3a8d65[_0x2120e5(0x27a)]][_0x2120e5(0x1c9)]:_0xb4606a[_0x3a8d65['symbol']][_0x2120e5(0x1c9)]:_0x1eab82=0x1,_0x3a8d65[_0x2120e5(0x21d)]=formatResult(_0x1eab82,0x8);}),proxyEmit(_0x30efe3(0x182),_0x333610);}}}else proxyEmit(_0x30efe3(0x182),![]);}function checkMinimums(_0x1b00ec){const _0x1b327e=_0x1fb94e;let _0x5bd5ce=!![];const _0x2b1640=!_0x1b00ec[_0x1b327e(0x274)]?markets[_0x1b00ec[_0x1b327e(0x27a)]][_0x1b327e(0x262)]['amount']['min']:markets[_0x1b00ec[_0x1b327e(0x27a)]]['limits'][_0x1b327e(0x1f6)][_0x1b327e(0x198)],_0x2c92a3=!_0x1b00ec[_0x1b327e(0x274)]?markets[_0x1b00ec[_0x1b327e(0x27a)]][_0x1b327e(0x262)][_0x1b327e(0x1f6)][_0x1b327e(0x198)]:markets[_0x1b00ec['symbol']][_0x1b327e(0x262)][_0x1b327e(0x1bd)][_0x1b327e(0x198)];if(Math[_0x1b327e(0x185)](_0x1b00ec[_0x1b327e(0x1c0)])<_0x2b1640)_0x5bd5ce=![];if(Math[_0x1b327e(0x185)](_0x1b00ec['trade'])*_0x1b00ec[_0x1b327e(0x1c9)]<_0x2c92a3)_0x5bd5ce=![];return _0x5bd5ce;}async function getBalances(){const _0x12605d=_0x1fb94e;let _0x52e053=0x0,_0x2cd676;const _0x501071=config[_0x12605d(0x1be)];currentCoins[_0x12605d(0x271)](_0x43be39=>{const _0x47ee1c=_0x12605d;if(_0x43be39[_0x47ee1c(0x28f)]!=config['basecoin']){let _0x1a4db6=global[_0x47ee1c(0x231)][noslash(_0x43be39[_0x47ee1c(0x27a)])];_0x2cd676=_0x43be39[_0x47ee1c(0x274)]?0x1/_0x1a4db6:_0x1a4db6;}else _0x2cd676=0x1;let _0x401416=_0x43be39['number']*_0x2cd676;_0x52e053+=_0x401416,_0x43be39[_0x47ee1c(0x1c9)]=formatResult(Number(_0x2cd676),0x8),_0x43be39['value']=_0x401416;}),currentCoins[_0x12605d(0x271)](_0x4a3f6d=>{const _0x1c0be0=_0x12605d;let _0x5a497b=config[_0x1c0be0(0x182)][_0x1c0be0(0x1bf)](_0x40df13=>_0x40df13['coin']==_0x4a3f6d['coin']),_0x4f0711=Number(_0x5a497b[_0x1c0be0(0x284)]),_0x2c2fa6=_0x4a3f6d[_0x1c0be0(0x18f)]/_0x52e053*0x64,_0x56ea42=_0x4f0711*_0x52e053/0x64/_0x4a3f6d[_0x1c0be0(0x1c9)]-_0x4a3f6d['number'];_0x4a3f6d['distribution']=formatResult(_0x2c2fa6,0x3),_0x4a3f6d['target']=formatResult(_0x4f0711,0x3),_0x4a3f6d[_0x1c0be0(0x1c0)]=formatResult(_0x56ea42,0x8),_0x4a3f6d[_0x1c0be0(0x281)]='',_0x4a3f6d[_0x1c0be0(0x24d)]='';if(_0x4a3f6d[_0x1c0be0(0x28f)]!=config[_0x1c0be0(0x26a)]){if(_0x4a3f6d[_0x1c0be0(0x284)]>_0x4f0711)_0x4a3f6d[_0x1c0be0(0x281)]=_0x1c0be0(0x1f8),_0x4a3f6d['valid']=checkMinimums(_0x4a3f6d);else _0x4a3f6d[_0x1c0be0(0x284)]<_0x4f0711&&(_0x4a3f6d[_0x1c0be0(0x281)]=_0x1c0be0(0x19f),_0x4a3f6d['valid']=checkMinimums(_0x4a3f6d));}_0x4a3f6d[_0x1c0be0(0x28e)]=_0x4a3f6d[_0x1c0be0(0x284)]/_0x4a3f6d[_0x1c0be0(0x24b)]-0x1;}),currentCoins[_0x12605d(0x1d6)]((_0x437e14,_0x1cae52)=>_0x437e14['delta']<_0x1cae52['delta']?0x1:_0x1cae52[_0x12605d(0x28e)]<_0x437e14[_0x12605d(0x28e)]?-0x1:0x0);const _0x27c0d2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x27c0d2['eur'],'usd':_0x27c0d2[_0x12605d(0x1c1)],'portfolio':JSON[_0x12605d(0x278)](currentCoins),'threshold':_0x501071},proxyEmit(_0x12605d(0x207),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x12605d(0x286)])headlessMode({'portfolio':currentCoins,'threshold':_0x501071});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x47eea5=_0x1fb94e;if(!lastBalances)return;let _0x27bda2=await getStartingBalances(![]),_0x4b4739=[],_0xca1126=[],_0xc6de90;JSON[_0x47eea5(0x205)](lastBalances['portfolio'])[_0x47eea5(0x271)](_0x24857c=>{const _0x5807d3=_0x47eea5;let _0x249cb1={'coin':_0x24857c[_0x5807d3(0x28f)],'number':_0x24857c[_0x5807d3(0x1d9)],'price':_0x24857c['last']};_0x4b4739[_0x5807d3(0x1e2)](_0x249cb1);if(!_0x27bda2[_0x5807d3(0x25c)]||!_0x27bda2[_0x5807d3(0x25c)][_0x5807d3(0x1bf)](_0x56f1bf=>_0x56f1bf['coin']==_0x24857c['coin']&&_0x56f1bf[_0x5807d3(0x1d9)]!=0x0))_0xca1126['push'](_0x249cb1);});const _0x56ac0c=await getFiat();_0xc6de90={'date':lastBalances[_0x47eea5(0x21c)][_0x47eea5(0x17e)]('\x20')[0x0],'eur':_0x56ac0c[_0x47eea5(0x282)],'usd':_0x56ac0c['usd'],'coins':_0x4b4739};let _0x16bb62=dbPerformance[_0x47eea5(0x245)]('data')['find']({'date':_0xc6de90[_0x47eea5(0x213)]})[_0x47eea5(0x18f)]();_0x16bb62?dbPerformance[_0x47eea5(0x245)](_0x47eea5(0x1e3))[_0x47eea5(0x1bf)]({'date':_0xc6de90[_0x47eea5(0x213)]})[_0x47eea5(0x17f)](_0xc6de90)[_0x47eea5(0x1a7)]():dbPerformance[_0x47eea5(0x245)]('data')[_0x47eea5(0x1e2)](_0xc6de90)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5b766d=_0x1fb94e;if(dbPerformance[_0x5b766d(0x27c)]('data')[_0x5b766d(0x18f)]()){let _0x4a76b0=dbPerformance['get'](_0x5b766d(0x1e3))[_0x5b766d(0x259)](_0x5b766d(0x213))[_0x5b766d(0x18f)]();proxyEmit(_0x5b766d(0x206),_0x4a76b0),lastPerformanceEmitted=getDate();}else proxyEmit(_0x5b766d(0x206),[]);}async function getStartingBalances(_0x284f18=!![]){const _0x79a6f8=_0x1fb94e;let _0x4fa7ad=dbPerformance['get'](_0x79a6f8(0x1e3))[_0x79a6f8(0x1bf)]({'date':config[_0x79a6f8(0x203)]})[_0x79a6f8(0x18f)]();config[_0x79a6f8(0x1b9)]!=''&&!_0x4fa7ad&&(await setStartDatePerformance(config),_0x4fa7ad=dbPerformance['get'](_0x79a6f8(0x1e3))[_0x79a6f8(0x1bf)]({'date':config[_0x79a6f8(0x203)]})[_0x79a6f8(0x18f)]());if(config['apiKey']==''||!_0x4fa7ad)return{};let _0x544ec3=0x0,_0x1cb886=0x0,_0x2c233e=0x0,_0x1d41e6=[],_0x4668fe=0x0;config['portfolio'][_0x79a6f8(0x271)](_0x31110b=>{const _0x53d254=_0x79a6f8;if(!_0x31110b[_0x53d254(0x192)]){_0x1d41e6[_0x4668fe]={'coin':_0x31110b['coin'],'symbol':_0x31110b[_0x53d254(0x27a)],'number':_0x31110b[_0x53d254(0x1f3)],'price':_0x31110b['startprice']},_0x544ec3+=_0x31110b[_0x53d254(0x1de)]*_0x31110b['startnumber'];if(config['basecoin']=='BTC')_0x1cb886+=_0x31110b[_0x53d254(0x1de)]*_0x31110b[_0x53d254(0x1f3)]*_0x4fa7ad[_0x53d254(0x282)],_0x2c233e+=_0x31110b[_0x53d254(0x1de)]*_0x31110b[_0x53d254(0x1f3)]*_0x4fa7ad['usd'];else{if(config['basecoin']=='BUSD'||config['basecoin']=='USDT'||config[_0x53d254(0x26a)]=='USDC')_0x1cb886+=_0x31110b[_0x53d254(0x1de)]*_0x31110b[_0x53d254(0x1f3)]*_0x4fa7ad[_0x53d254(0x282)]/_0x4fa7ad['usd'],_0x2c233e+=_0x31110b[_0x53d254(0x1de)]*_0x31110b[_0x53d254(0x1f3)];else config[_0x53d254(0x26a)]==_0x53d254(0x235)&&(_0x1cb886+=_0x31110b[_0x53d254(0x1de)]*_0x31110b[_0x53d254(0x1f3)],_0x2c233e+=_0x31110b[_0x53d254(0x1de)]*_0x31110b['startnumber']*_0x4fa7ad[_0x53d254(0x1c1)]/_0x4fa7ad[_0x53d254(0x282)]);}_0x4668fe++;}});let _0x1a9c78={'basecoin':_0x544ec3,'eur':_0x1cb886,'usd':_0x2c233e,'coins':_0x1d41e6};if(_0x284f18)proxyEmit(_0x79a6f8(0x238),_0x1a9c78);return _0x1a9c78;}function headlessMode(_0x2f153a){const _0x3010ea=_0x1fb94e;let _0x3fefbc=_0x2f153a[_0x3010ea(0x182)],_0x2a10c6=_0x2f153a['threshold'],_0xde2c65=[];for(let _0x419bd4 of _0x3fefbc){if(_0x419bd4[_0x3010ea(0x28f)]!=config['basecoin']){if(_0x419bd4[_0x3010ea(0x284)]/_0x419bd4[_0x3010ea(0x24b)]-0x1>=_0x2a10c6/0x64){if(_0x419bd4[_0x3010ea(0x24d)])_0xde2c65['push'](_0x419bd4);}else{if(_0x419bd4[_0x3010ea(0x284)]/_0x419bd4[_0x3010ea(0x24b)]-0x1<=-_0x2a10c6/0x64){if(_0x419bd4[_0x3010ea(0x24d)])_0xde2c65['push'](_0x419bd4);}}}}_0xde2c65['length']>0x0&&placeOrder(_0xde2c65);}function symbolToCoin(_0x2fbefc){const _0xdda7af=_0x1fb94e;let _0x1aefa1;if(_0x2fbefc[_0xdda7af(0x1ce)]('/'+config[_0xdda7af(0x26a)]))_0x1aefa1=_0x2fbefc[_0xdda7af(0x1a6)]('/'+config[_0xdda7af(0x26a)],'');if(_0x2fbefc[_0xdda7af(0x1ce)](config[_0xdda7af(0x26a)]+'/'))_0x1aefa1=_0x2fbefc[_0xdda7af(0x1a6)](config[_0xdda7af(0x26a)]+'/','');return _0x1aefa1;}function _0x4ed8(){const _0x409e3a=['\x20|\x20Error\x20details:\x20','last','filled','binance','limit-low','entries','includes','Binance\x20API\x20key\x20is\x20invalid','RequestTimeout','ccxt','parseISO','ordertype','coinamount','differenceInSeconds','sort','BNB','emojisell','number','-config.json','botID','asset','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','startprice','684798ovDaFl','reduce','breakeven','push','data','LIMIT','yyyy/MM/dd','log','running','function','timestamp','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','currency','Bot\x20','spot','sha256','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','exit','\x20minutes\x20-\x20balancing\x20resumed','startnumber','cancelLoading','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','cost','bot','sell','limit-high','order','outboundAccountPosition','orderType','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','version','executionReport','1pacnUk','filter','cancel','startdate','loadMarkets','parse','performance','balances','recreateHistory()','remainingSymbols','search','defaults','accumulatedQuantity','getHours','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','FILLED','timeout','progress','fromCodePoint','date','message','lowdb','recreate','format','decrypt','./config/','success','getMonth','time','price','wss://stream.binance.us:9443','toString','5844584bhTNhS','storeHeadless','HOT/BTC','round','Pausing\x20bot\x20for\x205\x20minutes\x20(','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','-performance.json','17547992qxoXQu','placeOrder','cancelOrder()',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','getPortfolio()','createOrder','formattedMessage','secure','type','2977850rAjsKc','ticker','Order\x20amount\x20is\x20invalid:\x20','MIN_NOTIONAL','ExchangeNotAvailable','EUR','cooldown',')\x20|\x20Error\x20details:\x20','starting-balances','************','Order(s)\x20validated\x20-\x20balancing\x20resumed','event-history','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apiSecret','market','binanceus','\x20>\x20','DAI/','length','bot-','settings','get','constructor','getSeconds','map','showname','Order(s)\x20not\x20validated\x20after\x20','target','9124353jkoHLs','valid','args','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','BTCEUR','toFixed','./version.json','initws()','symbols','initclient','mkdirSync','Order\x20filled:\x20','configuration-stored','sortBy','fetchBalance','event','coins','getTime','kline','configuration','logs','limit','limits','placeOrder()','reconnected','BTCUSDT','splice','kill','yyyy/MM/dd\x20HH:mm:ss','10YlHnvR','basecoin','userData','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','-results.json','(((.+)+)+)+$','Market','cancelOrder','forEach','WebSockets(','error','reverse','shift','fee','send','stringify','Crypt','symbol','bb-settings.json','has','BTC/BUSD','BTCBUSD','wsKey','storeConfiguration','side','eur','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','distribution','Error:\x20Invalid\x20argument\x20','headless','getFiat()','orderStatus','-events.json','wss://stream.binance.com:9443','316IjLrna','API-key\x20format\x20invalid','keys','delta','coin','sells','getStartingBalances','RSA-OAEP','split','assign','getDate','Executed\x20','portfolio','existsSync','eventType','abs','getCoins()','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','privateKey','001','bid','emojibuy','\x20-\x20',':\x20Bot\x20','padStart','value','\x20hour','Order:\x20','excluded','InvalidNonce','realized','fees','AuthenticationError','subscribeSpotKline','min','close','getCloses()','bb-secure.json','hybrid-crypto-js','botname','exchange','buy','restart','test','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','coin-loading-progress','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','loadSymbols()','replace','write','BTC/EUR','closeWs','\x20|\x20Unknown\x20error\x20occured','remove','getFullYear','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','40494aNadKa','\x20order:\x20','18XXkDUJ','Performance\x20recreation\x20completed\x20successfully','fetchTickers','toLowerCase','2382158HdwVMh','getMinutes','Binance\x20API\x20secret\x20is\x20invalid','timeshift','apiKey','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','datetime','total','amount','threshold','find','trade','usd','emitHistory','orderId','buys','fetchOrders','yyyy-MM-dd\x27T\x27HH:mm:ss','HOT/EUR'];_0x4ed8=function(){return _0x409e3a;};return _0x4ed8();}async function validateOrders(_0x11e327=0x0){const _0x2f8289=_0x1fb94e;let _0x55b7e2=[],_0x58477c=config[_0x2f8289(0x1d3)]==_0x2f8289(0x23e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2f8289(0x210)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x2a3118=>{const _0x3f79a8=_0x2f8289;let _0x3ff7bf=previousCoins['find'](_0x3651f5=>_0x3651f5[_0x3f79a8(0x28f)]==symbolToCoin(_0x2a3118['symbol'])),_0x53d67b=currentCoins[_0x3f79a8(0x1bf)](_0x20e77d=>_0x20e77d[_0x3f79a8(0x28f)]==symbolToCoin(_0x2a3118[_0x3f79a8(0x27a)])),_0x13769e,_0x27a419;_0x2a3118['side']==_0x3f79a8(0x19f)&&!_0x2a3118[_0x3f79a8(0x274)]||_0x2a3118[_0x3f79a8(0x281)]==_0x3f79a8(0x1f8)&&_0x2a3118[_0x3f79a8(0x274)]?(_0x13769e=_0x3ff7bf[_0x3f79a8(0x1d9)]+0.9*_0x2a3118[_0x3f79a8(0x1ca)],_0x27a419=_0x3ff7bf[_0x3f79a8(0x1d9)]+1.1*_0x2a3118[_0x3f79a8(0x1ca)]):(_0x13769e=_0x3ff7bf[_0x3f79a8(0x1d9)]-1.1*_0x2a3118[_0x3f79a8(0x1ca)],_0x27a419=_0x3ff7bf[_0x3f79a8(0x1d9)]-0.9*_0x2a3118[_0x3f79a8(0x1ca)]);const _0x555999=_0x2a3118[_0x3f79a8(0x1ca)]!=0x0&&_0x53d67b[_0x3f79a8(0x1d9)]>=_0x13769e&&_0x53d67b[_0x3f79a8(0x1d9)]<=_0x27a419;_0x55b7e2[_0x3f79a8(0x1e2)](_0x555999);if(_0x555999&&config['ordertype']!=_0x3f79a8(0x23e)){if(_0x2a3118['reverse'])logHistory(_0x3f79a8(0x1fa),_0x3f79a8(0x257)+_0x2a3118[_0x3f79a8(0x27a)]+'\x20'+_0x2a3118[_0x3f79a8(0x281)]+'\x20#'+formatResult(_0x2a3118['filled']/_0x2a3118['price'],0x8)+'\x20@'+formatResult(_0x2a3118[_0x3f79a8(0x21d)],0x8));else logHistory(_0x3f79a8(0x1fa),_0x3f79a8(0x257)+_0x2a3118[_0x3f79a8(0x27a)]+'\x20'+_0x2a3118[_0x3f79a8(0x281)]+'\x20#'+formatResult(_0x2a3118[_0x3f79a8(0x1ca)],0x8)+'\x20@'+formatResult(_0x2a3118['price'],0x8));}}),_0x55b7e2[_0x2f8289(0x271)]((_0x5e508a,_0x259201)=>{const _0x53d818=_0x2f8289;if(_0x5e508a)lastOrders[_0x53d818(0x266)](_0x259201,0x1);});if(_0x11e327<_0x58477c&&_0x55b7e2[_0x2f8289(0x1ce)](![])){if(_0x11e327==0x0){config['ordertype']==_0x2f8289(0x23e)?logHistory(_0x2f8289(0x273),_0x2f8289(0x225)):logHistory(_0x2f8289(0x273),_0x2f8289(0x1ad));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11e327);},0xa*0x3e8);}else{(_0x11e327==0x1||_0x11e327==Math[_0x2f8289(0x223)](_0x58477c/0x2)||_0x11e327==_0x58477c-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11e327);},validateOrderInterval);}}else{lockOrders=![];if(_0x11e327>0x0&&!_0x55b7e2['includes'](![]))config[_0x2f8289(0x1d3)]==_0x2f8289(0x23e)?logHistory('success',_0x2f8289(0x23a)):logHistory(_0x2f8289(0x21a),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x11e327>0x0&&_0x55b7e2[_0x2f8289(0x1ce)](![])&&(config[_0x2f8289(0x1d3)]==_0x2f8289(0x23e)?logHistory(_0x2f8289(0x21a),_0x2f8289(0x24a)+Math[_0x2f8289(0x223)](_0x58477c*validateOrderInterval/0xea60)+_0x2f8289(0x1f2)):(lastOrders[_0x2f8289(0x271)](async _0x20f6bf=>{const _0x5f50a9=_0x2f8289;try{const _0x2d441e=await exchange[_0x5f50a9(0x270)](_0x20f6bf[_0x5f50a9(0x1c3)],_0x20f6bf[_0x5f50a9(0x27a)]);}catch(_0x59f7f1){if(_0x59f7f1['toString']()[_0x5f50a9(0x1ce)]('OrderNotFound')){}else await handleError(_0x59f7f1,_0x5f50a9(0x229));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x58477c*validateOrderInterval/0xea60)+_0x2f8289(0x1f2))));}}async function resetCoinResults(){const _0x4470f4=_0x1fb94e;dbCoinResults[_0x4470f4(0x245)](_0x4470f4(0x25c))[_0x4470f4(0x1ab)]()[_0x4470f4(0x1a7)]();let _0x58c4dc=await getStartingBalances(![]);_0x58c4dc['coins']['forEach'](_0x290a24=>{const _0x58f05c=_0x4470f4,_0x50614f=_0x290a24[_0x58f05c(0x27a)][_0x58f05c(0x1ce)](config[_0x58f05c(0x26a)]+'/');if(_0x290a24['coin']!=config[_0x58f05c(0x26a)]){let _0x26f35a={'coin':_0x290a24[_0x58f05c(0x28f)],'number':_0x290a24['number'],'breakeven':_0x290a24['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x58f05c(0x245)](_0x58f05c(0x25c))[_0x58f05c(0x1e2)](_0x26f35a)[_0x58f05c(0x1a7)]();}});}function _0x161d(_0x1a0108,_0x2b0a27){const _0x5f1622=_0x4ed8();return _0x161d=function(_0x27ff04,_0x1dafe6){_0x27ff04=_0x27ff04-0x17c;let _0x4ed83b=_0x5f1622[_0x27ff04];return _0x4ed83b;},_0x161d(_0x1a0108,_0x2b0a27);}async function updateCoinResults(_0x7dbc98){const _0x44e068=_0x1fb94e;let _0x26a40f,_0x445fae,_0x30e466,_0x372e95,_0xb42cf,_0x5151aa,_0x5cbc44=dbCoinResults[_0x44e068(0x245)](_0x44e068(0x25c))['find']({'coin':_0x7dbc98[_0x44e068(0x28f)]})[_0x44e068(0x18f)]();if(!_0x5cbc44)return;if(_0x7dbc98[_0x44e068(0x276)]&&_0x7dbc98['fee'][_0x44e068(0x1ec)]==config[_0x44e068(0x26a)])_0x26a40f=_0x7dbc98['fee'][_0x44e068(0x1f6)];else{if(_0x7dbc98[_0x44e068(0x276)]&&_0x7dbc98['fee'][_0x44e068(0x1ec)]==_0x44e068(0x1d7))_0x26a40f=_0x7dbc98['fee'][_0x44e068(0x1f6)]*global['ticker'][_0x44e068(0x1d7)+config[_0x44e068(0x26a)]];else _0x26a40f=0.001*_0x7dbc98['filled'];}const _0x1afd19=_0x7dbc98[_0x44e068(0x27a)][_0x44e068(0x1ce)](config['basecoin']+'/');_0x1afd19&&(_0x5151aa={'coin':_0x7dbc98[_0x44e068(0x28f)],'symbol':_0x7dbc98['symbol'],'filled':_0x7dbc98['filled']*_0x7dbc98['price'],'side':_0x7dbc98[_0x44e068(0x281)]==_0x44e068(0x1f8)?_0x44e068(0x19f):_0x44e068(0x1f8),'price':0x1/_0x7dbc98['price']},_0x7dbc98={..._0x5151aa});_0x7dbc98[_0x44e068(0x281)]==_0x44e068(0x19f)?_0x30e466=(_0x5cbc44[_0x44e068(0x1e1)]*_0x5cbc44[_0x44e068(0x1d9)]+_0x7dbc98[_0x44e068(0x21d)]*_0x7dbc98[_0x44e068(0x1ca)])/(_0x5cbc44['number']+_0x7dbc98[_0x44e068(0x1ca)]):_0x30e466=(_0x5cbc44['breakeven']*_0x5cbc44[_0x44e068(0x1d9)]-_0x7dbc98['price']*_0x7dbc98[_0x44e068(0x1ca)])/(_0x5cbc44[_0x44e068(0x1d9)]-_0x7dbc98['filled']);_0x7dbc98[_0x44e068(0x281)]==_0x44e068(0x19f)?_0x372e95=_0x5cbc44[_0x44e068(0x194)]:_0x372e95=_0x5cbc44['realized']+(_0x7dbc98['price']-_0x5cbc44['breakeven'])*_0x7dbc98[_0x44e068(0x1ca)];_0x445fae=_0x7dbc98[_0x44e068(0x281)]==_0x44e068(0x1f8)?_0x5cbc44['number']-_0x7dbc98[_0x44e068(0x1ca)]:_0x5cbc44['number']+_0x7dbc98[_0x44e068(0x1ca)],_0xb42cf=(_0x7dbc98[_0x44e068(0x21d)]-_0x30e466)*_0x445fae;let _0x579d77={'coin':_0x7dbc98[_0x44e068(0x28f)],'number':_0x445fae,'breakeven':formatResult(_0x30e466,0x8),'realized':formatResult(_0x372e95,0x8),'unrealized':formatResult(_0xb42cf,0x8),'fees':formatResult(_0x5cbc44[_0x44e068(0x195)]+_0x26a40f,0x8),'sells':_0x7dbc98['side']==_0x44e068(0x1f8)?_0x5cbc44['sells']+0x1:_0x5cbc44[_0x44e068(0x290)],'buys':_0x7dbc98[_0x44e068(0x281)]==_0x44e068(0x19f)?_0x5cbc44[_0x44e068(0x1c4)]+0x1:_0x5cbc44[_0x44e068(0x1c4)]};dbCoinResults['get'](_0x44e068(0x25c))[_0x44e068(0x1bf)]({'coin':_0x7dbc98[_0x44e068(0x28f)]})[_0x44e068(0x17f)](_0x579d77)['write']();}async function placeOrder(_0x5f3dd5){const _0x368dad=_0x1fb94e,_0x394536=config[_0x368dad(0x1d3)]==_0x368dad(0x23e)?'market':_0x368dad(0x261);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x368dad(0x205)](JSON[_0x368dad(0x278)](currentCoins));for(const _0x5639b9 of _0x5f3dd5){let _0x21ae04,_0x391647,_0x59ee14,_0x5d49ed,_0x3ceccf,_0x4ebef3=_0x5639b9[_0x368dad(0x27a)];try{const _0x13d214=await exchange[_0x368dad(0x1b3)](_0x4ebef3),_0x3142ce=_0x13d214[_0x4ebef3];_0x21ae04=_0x3142ce[_0x368dad(0x1c9)],_0x391647=_0x3142ce[_0x368dad(0x18a)],_0x59ee14=_0x3142ce['ask'];_0x5639b9[_0x368dad(0x274)]?(_0x5d49ed=_0x5639b9[_0x368dad(0x281)]==_0x368dad(0x19f)?_0x368dad(0x1f8):'buy',_0x3ceccf=Math[_0x368dad(0x185)](_0x5639b9[_0x368dad(0x1c0)])/_0x21ae04):(_0x5d49ed=_0x5639b9[_0x368dad(0x281)],_0x3ceccf=Math[_0x368dad(0x185)](_0x5639b9[_0x368dad(0x1c0)]));_0x394536=='limit'&&(config['ordertype']==_0x368dad(0x1f9)&&(_0x21ae04=_0x5d49ed==_0x368dad(0x19f)?_0x391647:_0x59ee14),config[_0x368dad(0x1d3)]==_0x368dad(0x1cc)&&(_0x21ae04=_0x5d49ed==_0x368dad(0x19f)?_0x59ee14:_0x391647));_0x3ceccf=formatResult(_0x3ceccf,0x8),_0x21ae04=formatResult(_0x21ae04,0x8);const _0x49f0ea=await exchange[_0x368dad(0x22c)](_0x4ebef3,_0x394536,_0x5d49ed,_0x3ceccf,_0x21ae04);lastOrders[_0x368dad(0x1e2)]({'orderId':_0x49f0ea['id'],'symbol':_0x4ebef3,'side':_0x5d49ed,'reverse':_0x5639b9[_0x368dad(0x274)],'amount':_0x5639b9[_0x368dad(0x274)]?_0x49f0ea[_0x368dad(0x1bd)]*_0x49f0ea[_0x368dad(0x21d)]:_0x49f0ea[_0x368dad(0x1bd)],'filled':_0x5639b9[_0x368dad(0x274)]?_0x49f0ea[_0x368dad(0x1ca)]*_0x49f0ea['price']:_0x49f0ea[_0x368dad(0x1ca)],'price':_0x49f0ea[_0x368dad(0x21d)]});const _0x246402=_0x5d49ed==_0x368dad(0x1f8)?config[_0x368dad(0x1d8)]?String[_0x368dad(0x212)]('0x'+config[_0x368dad(0x1d8)])+'\x20':'':config[_0x368dad(0x18b)]?String[_0x368dad(0x212)]('0x'+config[_0x368dad(0x18b)])+'\x20':'',_0x5131d3=_0x394536==_0x368dad(0x23e)?_0x368dad(0x26f):config['ordertype']==_0x368dad(0x1f9)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x394536==_0x368dad(0x23e))logHistory('order',''+_0x246402+_0x5131d3+'\x20order:\x20'+_0x4ebef3+'\x20'+_0x5d49ed+'\x20#'+formatResult(_0x49f0ea['filled'],0x8)+'\x20@'+formatResult(_0x49f0ea[_0x368dad(0x21d)],0x8));else logHistory(_0x368dad(0x1fa),''+_0x246402+_0x5131d3+_0x368dad(0x1b0)+_0x4ebef3+'\x20'+_0x5d49ed+'\x20#'+formatResult(_0x49f0ea[_0x368dad(0x1bd)],0x8)+'\x20@'+formatResult(_0x49f0ea[_0x368dad(0x21d)],0x8));_0x49f0ea[_0x368dad(0x28f)]=_0x5639b9[_0x368dad(0x28f)],await updateCoinResults(_0x49f0ea);if(config[_0x368dad(0x236)]!=0x0){let _0x5cbee2=null;if(cooldownTracker[_0x368dad(0x242)]==config[_0x368dad(0x236)]-0x1)_0x5cbee2=cooldownTracker[_0x368dad(0x275)]();const _0x4ba5e0=getTimeStamp();cooldownTracker[_0x368dad(0x1e2)](_0x4ba5e0);if(_0x5cbee2){const _0x29f13e=fns[_0x368dad(0x1d5)](new Date(_0x4ba5e0),new Date(_0x5cbee2));_0x29f13e<cooldownInterval&&(logHistory(_0x368dad(0x273),_0x368dad(0x181)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x368dad(0x1eb)+cooldownPeriod/(0xe10*0x3e8)+_0x368dad(0x190)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x577f99){if(_0x577f99['toString']()['includes'](_0x368dad(0x233)))logHistory(_0x368dad(0x273),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4ebef3);else{if(_0x577f99[_0x368dad(0x21f)]()[_0x368dad(0x1ce)]('Invalid\x20quantity'))logHistory(_0x368dad(0x273),_0x368dad(0x232)+_0x4ebef3);else await handleError(_0x577f99,_0x368dad(0x263));}}}if(lastOrders[_0x368dad(0x242)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x368dad(0x1d3)]==_0x368dad(0x23e)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x368dad(0x273),_0x368dad(0x20e)));else coolingDown&&(!config[_0x368dad(0x286)]&&logHistory(_0x368dad(0x273),_0x368dad(0x1a4)));}}function logHistory(_0x589f34,_0x1e3c35,_0x1424c8=''){const _0x7a93a2=_0x1fb94e;let _0x32a7e4={'time':getTimeStamp(),'type':_0x589f34,'event':_0x1e3c35,'botname':config[_0x7a93a2(0x19d)],'showname':config['showname']};dbLogs[_0x7a93a2(0x245)](_0x7a93a2(0x260))['push'](_0x32a7e4)[_0x7a93a2(0x1a7)]();if(_0x1424c8=='')_0x1424c8=_0x1e3c35;proxyEmit(_0x7a93a2(0x25b),{'log':_0x32a7e4,'summary':_0x1424c8}),process[_0x7a93a2(0x277)]({'telegram':_0x32a7e4}),logging(''+_0x32a7e4[_0x7a93a2(0x25b)]);}function emitHistory(_0x275e99={}){const _0x307996=_0x1fb94e;Object[_0x307996(0x28d)](_0x275e99)[_0x307996(0x242)]==0x0&&(_0x275e99={'type':[_0x307996(0x1fa),_0x307996(0x25b)],'event':'','page':0x1});if(_0x275e99[_0x307996(0x22f)][_0x307996(0x1ce)](_0x307996(0x25b)))_0x275e99[_0x307996(0x22f)]['splice'](_0x275e99['type']['indexOf'](_0x307996(0x25b)),0x1,_0x307996(0x273),_0x307996(0x21a));if(dbLogs[_0x307996(0x27c)]('logs')['value']()){let _0x3f8eca=dbLogs[_0x307996(0x245)](_0x307996(0x260))[_0x307996(0x201)](_0x2b428e=>{const _0x2930d3=_0x307996;if(_0x275e99[_0x2930d3(0x22f)][_0x2930d3(0x242)]==0x0)return![];else return _0x275e99[_0x2930d3(0x22f)][_0x2930d3(0x1ce)](_0x2b428e[_0x2930d3(0x22f)]);})[_0x307996(0x201)](_0x2ddc66=>{const _0x2db488=_0x307996;if(_0x275e99[_0x2db488(0x25b)]=='')return!![];else return _0x2ddc66[_0x2db488(0x25b)][_0x2db488(0x1b4)]()[_0x2db488(0x1ce)](_0x275e99[_0x2db488(0x25b)][_0x2db488(0x1b4)]());})[_0x307996(0x259)](_0x307996(0x21c)),_0x417113=_0x3f8eca[_0x307996(0x18f)]()[_0x307996(0x242)];_0x3f8eca=_0x3f8eca[_0x307996(0x274)]()['slice']((_0x275e99['page']-0x1)*logPageSize,_0x275e99['page']*logPageSize-0x1)[_0x307996(0x274)]()[_0x307996(0x18f)](),proxyEmit('event-history',{'logs':_0x3f8eca,'total':_0x417113});}else proxyEmit(_0x307996(0x23b),{'logs':[],'total':0x0});}async function pauseBot(_0x557f5b){const _0x33384b=_0x1fb94e,_0x1c488c=new Date()[_0x33384b(0x25d)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x1c488c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x33384b(0x277)]({'stop':_0x33384b(0x1a0)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x33384b(0x25d)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x33384b(0x273),_0x33384b(0x224)+consecutivePauses+')'),await sleep(_0x557f5b),botPaused=![],reset();}}async function handleError(_0x385081,_0x2eee29,_0x3fe5e8=''){const _0x54afa4=_0x1fb94e;if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)]('DDoSProtection'))logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x187)),await pauseBot(pauseBotInterval);else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)](_0x54afa4(0x234)))logHistory('error',_0x2eee29+_0x54afa4(0x24f)),await pauseBot(pauseBotInterval);else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)](_0x54afa4(0x1d0)))logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x1ba)),await pauseBot(pauseBotInterval);else{if(_0x385081['toString']()[_0x54afa4(0x1ce)](_0x54afa4(0x28c)))logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x283)),logHistory(_0x54afa4(0x273),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x54afa4(0x277)]({'stop':_0x54afa4(0x267)});else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)](_0x54afa4(0x196)))logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x1f0)),logHistory(_0x54afa4(0x273),_0x54afa4(0x1a2)),process[_0x54afa4(0x277)]({'stop':'kill'});else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x54afa4(0x273),_0x2eee29+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x54afa4(0x273),_0x54afa4(0x1a2)),process['send']({'stop':_0x54afa4(0x267)});else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)](_0x54afa4(0x26c)))logHistory('error',_0x2eee29+_0x54afa4(0x1fd)),logHistory(_0x54afa4(0x273),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x54afa4(0x277)]({'stop':_0x54afa4(0x267)});else{if(_0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)](_0x54afa4(0x193)))logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x1f5)),await pauseBot(pauseBotInterval),process[_0x54afa4(0x277)]({'stop':_0x54afa4(0x1a0)});else _0x385081[_0x54afa4(0x21f)]()[_0x54afa4(0x1ce)]('InsufficientFunds')?logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x1ae)):(logHistory(_0x54afa4(0x273),_0x2eee29+_0x54afa4(0x1aa)),logging(_0x2eee29+_0x54afa4(0x1c8),_0x385081),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x10a3c4,_0xff787b){const _0x194d16=_0x1fb94e;return parseFloat(_0x10a3c4[_0x194d16(0x251)](_0xff787b));}function logging(_0x316bfd,_0x512cd8=''){const _0x28a8c5=_0x1fb94e;if(config['showname'])console[_0x28a8c5(0x1e6)](getTimeStamp()+':\x20'+config[_0x28a8c5(0x19d)]+'\x20>\x20'+_0x316bfd,_0x512cd8);else console['log'](getTimeStamp()+_0x28a8c5(0x18d)+botID+_0x28a8c5(0x240)+_0x316bfd,_0x512cd8);}function getServerTime(){const _0xb239c1=_0x1fb94e,_0x5573b9=new Date();return _0x5573b9['getFullYear']()+'/'+(_0x5573b9[_0xb239c1(0x21b)]()+0x1)[_0xb239c1(0x21f)]()['padStart'](0x2,'0')+'/'+_0x5573b9[_0xb239c1(0x180)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5573b9[_0xb239c1(0x20d)]()[_0xb239c1(0x21f)]()['padStart'](0x2,'0')+':'+_0x5573b9[_0xb239c1(0x1b6)]()[_0xb239c1(0x21f)]()['padStart'](0x2,'0')+':'+_0x5573b9[_0xb239c1(0x247)]()[_0xb239c1(0x21f)]()[_0xb239c1(0x18e)](0x2,'0');}function getTimeStamp(){const _0x3572e2=_0x1fb94e,_0x44ca1f=shiftedTime();return _0x44ca1f[_0x3572e2(0x1ac)]()+'/'+(_0x44ca1f[_0x3572e2(0x21b)]()+0x1)[_0x3572e2(0x21f)]()[_0x3572e2(0x18e)](0x2,'0')+'/'+_0x44ca1f[_0x3572e2(0x180)]()[_0x3572e2(0x21f)]()['padStart'](0x2,'0')+'\x20'+_0x44ca1f[_0x3572e2(0x20d)]()['toString']()[_0x3572e2(0x18e)](0x2,'0')+':'+_0x44ca1f[_0x3572e2(0x1b6)]()[_0x3572e2(0x21f)]()[_0x3572e2(0x18e)](0x2,'0')+':'+_0x44ca1f[_0x3572e2(0x247)]()[_0x3572e2(0x21f)]()[_0x3572e2(0x18e)](0x2,'0');}function getDate(){const _0x4b4282=_0x1fb94e,_0x2a0715=shiftedTime();return _0x2a0715[_0x4b4282(0x1ac)]()+'/'+(_0x2a0715[_0x4b4282(0x21b)]()+0x1)[_0x4b4282(0x21f)]()[_0x4b4282(0x18e)](0x2,'0')+'/'+_0x2a0715[_0x4b4282(0x180)]()[_0x4b4282(0x21f)]()['padStart'](0x2,'0');}function getHour(){const _0x369a1d=_0x1fb94e,_0x5ab79b=shiftedTime();return _0x5ab79b[_0x369a1d(0x20d)]()[_0x369a1d(0x21f)]()['padStart'](0x2,'0');}function sleep(_0x39815e){return new Promise(_0x1c0d57=>setTimeout(_0x1c0d57,_0x39815e));}function shiftedTime(){const _0x261156=_0x1fb94e,_0x6560c7=new Date();let _0x555a09=_0x6560c7;if(config&&config[_0x261156(0x1b8)]!==0x0)_0x555a09=fns['add'](_0x6560c7,{'hours':config[_0x261156(0x1b8)]});return _0x555a09;}