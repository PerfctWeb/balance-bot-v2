const _0x5bb9af=_0x5db6;(function(_0x3b97df,_0x42e747){const _0x5c493b=_0x5db6,_0x130509=_0x3b97df();while(!![]){try{const _0x574d2b=-parseInt(_0x5c493b(0x17e))/0x1*(-parseInt(_0x5c493b(0x126))/0x2)+parseInt(_0x5c493b(0x13b))/0x3+-parseInt(_0x5c493b(0x150))/0x4+parseInt(_0x5c493b(0x18c))/0x5*(-parseInt(_0x5c493b(0xac))/0x6)+parseInt(_0x5c493b(0xc5))/0x7+-parseInt(_0x5c493b(0xd9))/0x8*(parseInt(_0x5c493b(0xdf))/0x9)+-parseInt(_0x5c493b(0xde))/0xa*(parseInt(_0x5c493b(0x135))/0xb);if(_0x574d2b===_0x42e747)break;else _0x130509['push'](_0x130509['shift']());}catch(_0xcd2675){_0x130509['push'](_0x130509['shift']());}}}(_0x38bf,0xa5cf8));const _0x22b0f0=function(){let _0x3a85bc=!![];return function(_0x16aff8,_0x151fb8){const _0x672632=_0x3a85bc?function(){const _0x1683ad=_0x5db6;if(_0x151fb8){const _0x3e4a2c=_0x151fb8[_0x1683ad(0xf3)](_0x16aff8,arguments);return _0x151fb8=null,_0x3e4a2c;}}:function(){};return _0x3a85bc=![],_0x672632;};}(),_0x46f4aa=_0x22b0f0(this,function(){const _0x267ebf=_0x5db6;return _0x46f4aa[_0x267ebf(0xbe)]()[_0x267ebf(0x16e)]('(((.+)+)+)+$')[_0x267ebf(0xbe)]()[_0x267ebf(0xa7)](_0x46f4aa)[_0x267ebf(0x16e)](_0x267ebf(0xb8));});_0x46f4aa();function _0x5db6(_0xfec9dd,_0x267250){const _0x58ad80=_0x38bf();return _0x5db6=function(_0x46f4aa,_0x22b0f0){_0x46f4aa=_0x46f4aa-0x84;let _0x38bfa9=_0x58ad80[_0x46f4aa];return _0x38bfa9;},_0x5db6(_0xfec9dd,_0x267250);}'use strict';const ccxt=require('ccxt'),low=require(_0x5bb9af(0x176)),FileSync=require(_0x5bb9af(0x179)),fs=require('fs'),fns=require(_0x5bb9af(0xba)),{WebsocketClient,DefaultLogger}=require(_0x5bb9af(0x14c)),Crypt=require(_0x5bb9af(0x98))[_0x5bb9af(0x139)];let exchange,wsClient;global[_0x5bb9af(0xe8)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x5bb9af(0xbf))['version'],botID=process[_0x5bb9af(0x17d)][0x2]||_0x5bb9af(0xb4),pattern=/^[0-9]{3}$/;if(!pattern[_0x5bb9af(0x15a)](botID))return console[_0x5bb9af(0x9e)](_0x5bb9af(0xec)+botID+_0x5bb9af(0xc8)),process['exit'](0x1);const configpath=_0x5bb9af(0x96);!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+'bot-'+botID+_0x5bb9af(0x144),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x5bb9af(0xf0),coinresultsfile=configpath+'bot-'+botID+_0x5bb9af(0x90),settingsfile=configpath+_0x5bb9af(0xd4),securefile=configpath+_0x5bb9af(0xdd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);function _0x38bf(){const _0x548301=['\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','outboundAccountPosition','send','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','delta','initws()','bb-settings.json','last','indexOf','getSeconds','recreateHistory()','40WQLeOs','apiSecret','sortBy','ExchangeNotAvailable','bb-secure.json','81850JnHnBH','2258559tCOAHE','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','apiKey','DDoSProtection','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','BTCUSDT','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','wsKey','fee','ticker','LIMIT','API-key\x20format\x20invalid','eventType','Error:\x20Invalid\x20argument\x20','market','getDate','Delta\x20:\x20','-performance.json','cost','portfolio','apply','storeHeadless','limit-high','configuration-stored','subscribeSpotKline','eachDayOfInterval','performance','defaults','accumulatedQuantity','kline','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','threshold','order','map','getTime','differenceInCalendarDays','botID','message','orderType','getMonth','orderId','wsMarket','includes','Market','formattedMessage','startnumber','AuthenticationError','yyyy/MM/dd','sell','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','assign','placeOrder','getCoins()','exchange','RequestTimeout','\x20order:\x20','write','min','valid','yyyy/MM/dd\x20HH:mm:ss','reverse','Order\x20amount\x20is\x20invalid:\x20','BTC','\x20>\x20','binanceus','Binance\x20API\x20secret\x20is\x20invalid','\x20minutes\x20-\x20balancing\x20resumed','Order(s)\x20validated\x20-\x20balancing\x20resumed','trade','round','getMinutes','538454hriWiW','InvalidNonce','entries','botname','date','excluded','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','has','replace','filled','limit','timeout','secure','Order\x20filled:\x20','/BTC','1254vERDsf','createOrder','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','configuration','Crypt','stringify','4014708mvqwzO','orderStatus','WebSockets(','remove','fetchTickers','settings','data','parseISO','startdate','-config.json','\x20-\x20','loadMarkets','abs','padStart','buy','time','page','binance','BNBBTC','Bot\x20','fetchBalance','794680ZUhYaW','availableBalance','headless','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','coinamount','target','type','slice','privateKey','get','test','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','filter','startprice','getPortfolio()','Executed\x20','OrderNotFound','ordertype','realized','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','subscribeSpotUserDataStream','bid','cancelOrder()','RSA-OAEP','breakeven','Order:\x20','distribution','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','limits','closeWs','search','Performance\x20recreation\x20completed\x20successfully','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','balances','cancelOrder','asset','BTC/USDT','Invalid\x20quantity','lowdb','coins','BTCBUSD','lowdb/adapters/FileSync','\x20hour','fees','differenceInSeconds','argv','2HzAFNW','getFullYear','decrypt','reduce','wss://stream.binance.us:9443','InsufficientFunds','getHours','isArray','args','getPortfolio','push',')\x20|\x20Error\x20details:\x20','cooldown','function','5OMkyuY','\x20orders\x20in\x20less\x20than\x20','sells','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','keys','bot','side','************','error','amount','logs','number','exit','emitHistory','-results.json','success','reconnected','enabled','executionReport','event-history','./config/','value','hybrid-crypto-js','currency','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','parse','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','coin','log','recreate','BTC/EUR','FILLED','timeshift','spot','MIN_NOTIONAL','toFixed','split','constructor','datetime','find','getStartingBalances','forEach','364584hiNHzx','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','BTCEUR','format','toLowerCase','usd','Limit\x20(low-margin)','milliseconds','001','symbols','wss://stream.binance.com:9443','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','(((.+)+)+)+$','userData','date-fns','running','eur','BTC/BUSD','toString','./version.json','length','placeOrder()','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','coin-loading-progress','buys','8748243AgBMkO','add','timestamp',',\x20must\x20be\x20a\x203\x20digit\x20number','event','symbol','price','\x20|\x20Error\x20details:\x20','BTC/'];_0x38bf=function(){return _0x548301;};return _0x38bf();}dbPerformance[_0x5bb9af(0xfa)]({'data':[]})[_0x5bb9af(0x117)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5bb9af(0xfa)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x5bb9af(0x117)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x5bb9af(0xae),'symbol':_0x5bb9af(0xa0)},'usd':{'coin':_0x5bb9af(0xe4),'symbol':_0x5bb9af(0x174)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x11c3b3)=>{},'debug':(..._0xea4a)=>{},'notice':(..._0x13894e)=>{},'info':(..._0x36fb8f)=>{},'warning':(..._0x225067)=>{},'error':async function(..._0x1213fc){const _0x3183df=_0x5bb9af,_0x594cb7=new Date()[_0x3183df(0x101)]();if(!lastErrorShown||_0x594cb7-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3183df(0x101)](),logHistory(_0x3183df(0x8a),_0x3183df(0x13d)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes');let _0x1268ec='';if(_0x1213fc[0x0])_0x1268ec+=_0x1213fc[0x0];if(_0x1213fc[0x1]?.[_0x3183df(0x8a)]?.[_0x3183df(0x104)])_0x1268ec+=_0x3183df(0x145)+_0x1213fc[0x1][_0x3183df(0x8a)][_0x3183df(0x104)];logging(_0x3183df(0x13d)+consecutivePauses+_0x3183df(0x189),''+_0x1268ec),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x5bb9af(0x167)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x5bb9af(0xa2)]!=config['timeshift']&&updateTimeshift(settings[_0x5bb9af(0xa2)]);process[_0x5bb9af(0xd0)]({'started':_0x5bb9af(0xbb)}),initializeProcessListeners();function proxyEmit(_0xc5b5b3,_0x1089ce=null){const _0x504193=_0x5bb9af;process[_0x504193(0xd0)]({'function':_0xc5b5b3,'args':_0x1089ce});}function initializeProcessListeners(){const _0x567db7=_0x5bb9af;process['on'](_0x567db7(0x104),_0x13b6a6=>{const _0x2d84ad=_0x567db7;switch(Object['keys'](_0x13b6a6)[0x0]){case _0x2d84ad(0xa2):_0x13b6a6['timeshift']!=undefined&&(settings[_0x2d84ad(0xa2)]=_0x13b6a6[_0x2d84ad(0xa2)],updateTimeshift(settings[_0x2d84ad(0xa2)]));break;case _0x2d84ad(0x18b):switch(_0x13b6a6['function']){case'initclient':initclient();break;case _0x2d84ad(0x8f):emitHistory(_0x13b6a6['args']);break;case _0x2d84ad(0x187):getPortfolio(_0x13b6a6[_0x2d84ad(0x186)]);break;case'storeConfiguration':storeConfiguration(_0x13b6a6[_0x2d84ad(0x186)]);break;case _0x2d84ad(0xf4):storeHeadless(_0x13b6a6[_0x2d84ad(0x186)]);break;case _0x2d84ad(0xaa):getStartingBalances();break;case _0x2d84ad(0x112):placeOrder(_0x13b6a6[_0x2d84ad(0x186)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2ee197=_0x5bb9af;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2ee197(0xe1)],config[_0x2ee197(0xda)]);let _0x5c8ed3=await loadSymbols();_0x5c8ed3&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4ab3c7,_0x145f4d){const _0x4cb7c2=_0x5bb9af,_0x5afa6b=ccxt[config[_0x4cb7c2(0x114)]];let _0x44e693;switch(config[_0x4cb7c2(0x114)]){case _0x4cb7c2(0x14c):_0x44e693='wss://stream.binance.com:9443';break;case'binanceus':_0x44e693=_0x4cb7c2(0x182);break;default:_0x44e693=_0x4cb7c2(0xb6);}exchange=new _0x5afa6b({'apiKey':_0x4ab3c7,'secret':_0x145f4d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4ab3c7,'api_secret':_0x145f4d,'beautify':!![],'wsUrl':_0x44e693},logger),config[_0x4cb7c2(0x114)]==_0x4cb7c2(0x11f)&&(stablecoins={'eur':{'coin':_0x4cb7c2(0x178),'symbol':_0x4cb7c2(0xbd)},'usd':{'coin':_0x4cb7c2(0xe4),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x3be910=_0x5bb9af;let _0x1e6f44;try{markets=await exchange[_0x3be910(0x146)](),allSymbols=exchange[_0x3be910(0xb5)][_0x3be910(0x15c)](_0x3eb235=>{const _0x156090=_0x3be910;return _0x3eb235['includes'](_0x156090(0x11d))&&!_0x3eb235['includes']('DAI/');}),_0x1e6f44=!![];}catch(_0x37bd15){await handleError(_0x37bd15,'loadSymbols()'),_0x1e6f44=![];}return _0x1e6f44;}async function initbot(){const _0xfd7d63=_0x5bb9af;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1bf58a=dbCoinResults['get'](_0xfd7d63(0x177))[_0xfd7d63(0x97)]();if(_0x1bf58a[_0xfd7d63(0xc0)]==0x0)await resetCoinResults();}async function initclient(){const _0xb17309=_0x5bb9af;proxyEmit(_0xb17309(0x138),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xb17309(0x171),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4517c3=_0x5bb9af;wsinitialized=![];ws1&&(ws1[_0x4517c3(0xab)](_0x3377f3=>{const _0x3de4f9=_0x4517c3;try{wsClient[_0x3de4f9(0x16d)](_0x3377f3);}catch(_0x5d903e){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x58bc57){}ws2=null;}}async function initws(){const _0x5e0664=_0x5bb9af;cleanws();let _0x44cb57=[];currentCoins[_0x5e0664(0xab)](_0x34def9=>{const _0xc7e6c8=_0x5e0664;if(_0x34def9[_0xc7e6c8(0x9d)]!=_0xc7e6c8(0x11d))_0x44cb57[_0xc7e6c8(0x188)](noslash(_0x34def9[_0xc7e6c8(0xca)]));});if(!_0x44cb57[_0x5e0664(0x109)](stablecoins[_0x5e0664(0xbc)][_0x5e0664(0x9d)]))_0x44cb57['push'](stablecoins[_0x5e0664(0xbc)]['coin']);if(!_0x44cb57[_0x5e0664(0x109)](stablecoins['usd'][_0x5e0664(0x9d)]))_0x44cb57['push'](stablecoins[_0x5e0664(0xb1)]['coin']);if(!_0x44cb57[_0x5e0664(0x109)](_0x5e0664(0x14d)))_0x44cb57[_0x5e0664(0x188)](_0x5e0664(0x14d));try{_0x44cb57[_0x5e0664(0xab)]((_0x2639ad,_0x214208)=>{const _0x2fafa3=_0x5e0664;ws1[_0x214208]=wsClient[_0x2fafa3(0xf7)](_0x2639ad,'1m');}),ws2=wsClient[_0x5e0664(0x164)](),wsClient['on'](_0x5e0664(0x10b),_0x39af26=>{const _0xeb077=_0x5e0664;if(!Array['isArray'](_0x39af26)&&!_0x39af26['wsKey'][_0xeb077(0x109)](_0xeb077(0xb9))){if(_0x39af26[_0xeb077(0xeb)]===_0xeb077(0xfc)){global[_0xeb077(0xe8)][_0x39af26[_0xeb077(0xfc)][_0xeb077(0xca)]]=_0x39af26[_0xeb077(0xfc)]['close'];return;}}else{if(!Array[_0xeb077(0x185)](_0x39af26)&&_0x39af26[_0xeb077(0xe6)][_0xeb077(0x109)](_0xeb077(0xb9))){if(_0x39af26[_0xeb077(0x108)][_0xeb077(0x109)](_0xeb077(0xa3))){updateNumberCoins(_0x39af26);return;}}}}),wsClient['on'](_0x5e0664(0x92),async _0x6a4af2=>{currentCoins=await getCoins();});}catch(_0xb409a0){await handleError(_0xb409a0,_0x5e0664(0xd3));}let _0x5ce654;while(_0x5ce654!=currentCoins['length']-0x1){_0x5ce654=0x0,currentCoins[_0x5e0664(0xab)](_0x22b825=>{const _0x3181a4=_0x5e0664;if(_0x22b825['coin']!=_0x3181a4(0x11d)&&global[_0x3181a4(0xe8)][noslash(_0x22b825[_0x3181a4(0xca)])])_0x5ce654++;});let _0xd00735=Math['round'](_0x5ce654/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x5e0664(0xc3),_0xd00735),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x308afd=_0x5bb9af;let _0x54864b=0x0,_0x38cbbc=0x0;try{_0x54864b=global[_0x308afd(0xe8)][stablecoins[_0x308afd(0xbc)][_0x308afd(0x9d)]],_0x38cbbc=global['ticker'][stablecoins[_0x308afd(0xb1)]['coin']];}catch(_0x14e6f3){await handleError(_0x14e6f3,'getFiat()');}return{'eur':Number(_0x54864b),'usd':Number(_0x38cbbc)};}async function setStartDatePerformance(_0x3d7e4c){const _0x581c6b=_0x5bb9af,_0x4b66cf=fns[_0x581c6b(0xaf)](new Date(_0x3d7e4c[_0x581c6b(0x143)]),_0x581c6b(0x10e));let _0xd3150a=[];_0xd3150a[stablecoins[_0x581c6b(0xbc)][_0x581c6b(0x9d)]]=await getCloses(stablecoins[_0x581c6b(0xbc)][_0x581c6b(0xca)],new Date(_0x3d7e4c[_0x581c6b(0x143)]),0x1),_0xd3150a[stablecoins[_0x581c6b(0xb1)][_0x581c6b(0x9d)]]=await getCloses(stablecoins[_0x581c6b(0xb1)][_0x581c6b(0xca)],new Date(_0x3d7e4c[_0x581c6b(0x143)]),0x1);let _0x2415f7,_0x3e531a=[];_0x3d7e4c['portfolio'][_0x581c6b(0xab)](_0x523263=>{const _0x4687f6=_0x581c6b;!_0x523263[_0x4687f6(0x12b)]&&_0x3e531a[_0x4687f6(0x188)]({'coin':_0x523263[_0x4687f6(0x9d)],'number':_0x523263[_0x4687f6(0x10c)],'price':_0x523263[_0x4687f6(0x15d)]});}),_0x2415f7={'date':_0x4b66cf,'eur':_0xd3150a[stablecoins[_0x581c6b(0xbc)]['coin']][0x0],'usd':_0xd3150a[stablecoins[_0x581c6b(0xb1)][_0x581c6b(0x9d)]][0x0],'coins':_0x3e531a};let _0x1b5bc8=dbPerformance[_0x581c6b(0x159)](_0x581c6b(0x141))[_0x581c6b(0xa9)]({'date':_0x4b66cf})[_0x581c6b(0x97)]();_0x1b5bc8?dbPerformance[_0x581c6b(0x159)](_0x581c6b(0x141))[_0x581c6b(0xa9)]({'date':_0x4b66cf})[_0x581c6b(0x111)](_0x2415f7)[_0x581c6b(0x117)]():dbPerformance[_0x581c6b(0x159)]('data')[_0x581c6b(0x188)](_0x2415f7)['write'](),_0x1b5bc8=dbPerformance['get'](_0x581c6b(0x141))[_0x581c6b(0xdb)](_0x581c6b(0x12a))[_0x581c6b(0x97)](),_0x1b5bc8['forEach'](_0x428dde=>{const _0x2369e0=_0x581c6b;_0x428dde[_0x2369e0(0x12a)]<_0x4b66cf&&dbPerformance[_0x2369e0(0x159)]('data')[_0x2369e0(0x13e)]({'date':_0x428dde['date']})[_0x2369e0(0x117)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x25a5ab){const _0x4dd3f7=_0x5bb9af;let _0x2ef440,_0x540e59=[];logHistory('success',_0x4dd3f7(0x170)),_0x25a5ab[_0x4dd3f7(0xf2)][_0x4dd3f7(0xab)](_0x34b6e6=>{const _0x32128b=_0x4dd3f7;if(_0x34b6e6[_0x32128b(0x9d)]!=_0x32128b(0x11d)&&!_0x34b6e6['excluded'])_0x540e59[_0x32128b(0x188)]({'coin':_0x34b6e6[_0x32128b(0x9d)],'symbol':_0x34b6e6[_0x32128b(0xca)]});});let _0x58b80a=[];try{const _0x1f4903=fns[_0x4dd3f7(0xaf)](fns[_0x4dd3f7(0x142)](_0x25a5ab[_0x4dd3f7(0x143)][_0x4dd3f7(0x12e)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x1d5d8f of _0x540e59){if(_0x1d5d8f[_0x4dd3f7(0x9d)]!=_0x4dd3f7(0x11d))_0x2ef440=await exchange['fetchOrders'](_0x1d5d8f[_0x4dd3f7(0xca)],Date[_0x4dd3f7(0x9b)](_0x1f4903));_0x2ef440[_0x4dd3f7(0xab)](_0x3d1eb0=>{const _0x191db2=_0x4dd3f7,_0x121313=_0x1d5d8f[_0x191db2(0xca)][_0x191db2(0x109)]('BTC/'),_0x5e691a=fns[_0x191db2(0xaf)](fns['parseISO'](_0x3d1eb0[_0x191db2(0xa8)]),_0x191db2(0x11a)),_0x802cf5=fns[_0x191db2(0xaf)](fns[_0x191db2(0x142)](_0x3d1eb0[_0x191db2(0xa8)]),_0x191db2(0x10e));let _0x4504c0;if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x149)&&_0x121313==![])_0x4504c0=_0x3d1eb0[_0x191db2(0x8b)];if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x149)&&_0x121313==!![])_0x4504c0=-_0x3d1eb0[_0x191db2(0x8b)]*_0x3d1eb0['price'];if(_0x3d1eb0[_0x191db2(0x88)]=='sell'&&_0x121313==![])_0x4504c0=-_0x3d1eb0[_0x191db2(0x8b)];if(_0x3d1eb0[_0x191db2(0x88)]=='sell'&&_0x121313==!![])_0x4504c0=_0x3d1eb0[_0x191db2(0x8b)]*_0x3d1eb0[_0x191db2(0xcb)];_0x58b80a['push']({'timestamp':_0x5e691a,'date':_0x802cf5,'coin':_0x1d5d8f['coin'],'symbol':_0x1d5d8f[_0x191db2(0xca)],'type':_0x3d1eb0['type'],'side':_0x3d1eb0['side'],'reverse':_0x121313,'amount':formatResult(_0x3d1eb0[_0x191db2(0x12f)],0x8),'filled':formatResult(_0x3d1eb0[_0x191db2(0x12f)],0x8),'coinamount':formatResult(_0x4504c0,0x8),'price':formatResult(_0x3d1eb0['price'],0x8)});let _0x1ca63d;if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x149)&&_0x121313==![])_0x1ca63d=-_0x3d1eb0[_0x191db2(0x8b)]*_0x3d1eb0['price'];if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x149)&&_0x121313==!![])_0x1ca63d=_0x3d1eb0['amount'];if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x10f)&&_0x121313==![])_0x1ca63d=_0x3d1eb0[_0x191db2(0x8b)]*_0x3d1eb0[_0x191db2(0xcb)];if(_0x3d1eb0[_0x191db2(0x88)]==_0x191db2(0x10f)&&_0x121313==!![])_0x1ca63d=-_0x3d1eb0[_0x191db2(0x8b)];_0x58b80a['push']({'date':_0x802cf5,'coin':_0x191db2(0x11d),'coinamount':formatResult(_0x1ca63d,0x8)});});}_0x58b80a['sort']((_0x1b73d4,_0x57ec38)=>_0x1b73d4[_0x4dd3f7(0xc7)]>_0x57ec38[_0x4dd3f7(0xc7)]?0x1:_0x57ec38[_0x4dd3f7(0xc7)]>_0x1b73d4[_0x4dd3f7(0xc7)]?-0x1:0x0),dbLogs['get'](_0x4dd3f7(0x8c))[_0x4dd3f7(0x13e)]()[_0x4dd3f7(0x117)](),_0x58b80a[_0x4dd3f7(0xab)](_0x5ad862=>{const _0x157f3c=_0x4dd3f7;let _0x1198d7;_0x5ad862[_0x157f3c(0x9d)]!=_0x157f3c(0x11d)&&(_0x1198d7={'time':_0x5ad862[_0x157f3c(0xc7)],'type':_0x157f3c(0xff),'event':_0x157f3c(0x169)+_0x5ad862['symbol']+'\x20'+_0x5ad862[_0x157f3c(0x88)]+'\x20#'+_0x5ad862[_0x157f3c(0x8b)]+'\x20@'+_0x5ad862[_0x157f3c(0xcb)]},dbLogs[_0x157f3c(0x159)]('logs')[_0x157f3c(0x188)](_0x1198d7)['write']());});const _0x4b583f=fns[_0x4dd3f7(0xf8)]({'start':new Date(_0x25a5ab[_0x4dd3f7(0x143)]),'end':new Date()})[_0x4dd3f7(0x100)](_0x203059=>fns[_0x4dd3f7(0xaf)](_0x203059,_0x4dd3f7(0x10e)));let _0x3bb660=[];_0x25a5ab['portfolio'][_0x4dd3f7(0xab)](_0x43282f=>{const _0x1da253=_0x4dd3f7;if(!_0x43282f['excluded']){_0x3bb660[_0x43282f[_0x1da253(0x9d)]]=[];let _0x1f6f99=_0x43282f[_0x1da253(0x10c)];_0x4b583f[_0x1da253(0xab)]((_0x3cc4bf,_0x295f7e)=>{const _0x9ddac8=_0x1da253;let _0x9e3fb8=_0x58b80a[_0x9ddac8(0x15c)](_0xfe9e32=>_0xfe9e32['coin']==_0x43282f[_0x9ddac8(0x9d)]&&_0xfe9e32['date']==_0x3cc4bf);if(_0x9e3fb8[_0x9ddac8(0xc0)]!=0x0){let _0x4d4456=_0x9e3fb8[_0x9ddac8(0x181)]((_0x49f372,_0x4a61a7)=>{const _0x1ba4a6=_0x9ddac8;return _0x49f372+=_0x4a61a7[_0x1ba4a6(0x154)],_0x49f372;},0x0);_0x1f6f99+=_0x4d4456;}_0x3bb660[_0x43282f['coin']][_0x3cc4bf]=_0x1f6f99;});}});const _0x4fd811=[..._0x540e59];_0x4fd811['push']({'coin':stablecoins[_0x4dd3f7(0xbc)][_0x4dd3f7(0x9d)],'symbol':stablecoins['eur'][_0x4dd3f7(0xca)]}),_0x4fd811[_0x4dd3f7(0x188)]({'coin':stablecoins[_0x4dd3f7(0xb1)][_0x4dd3f7(0x9d)],'symbol':stablecoins[_0x4dd3f7(0xb1)][_0x4dd3f7(0xca)]});let _0x257468=[];for(const _0x5e3449 of _0x4fd811){_0x257468[_0x5e3449['coin']]=await getCloses(_0x5e3449[_0x4dd3f7(0xca)],new Date(_0x25a5ab[_0x4dd3f7(0x143)]));}dbPerformance[_0x4dd3f7(0x159)](_0x4dd3f7(0x141))[_0x4dd3f7(0x13e)]()['write'](),_0x4b583f[_0x4dd3f7(0xab)]((_0x174052,_0x266ca3)=>{const _0x42ab71=_0x4dd3f7;let _0x36d22c,_0x194e5d=[];_0x266ca3==0x0?(_0x25a5ab['portfolio'][_0x42ab71(0xab)](_0x52656b=>{const _0x483201=_0x42ab71;!_0x52656b['excluded']&&_0x194e5d[_0x483201(0x188)]({'coin':_0x52656b[_0x483201(0x9d)],'number':_0x52656b[_0x483201(0x10c)],'price':_0x52656b[_0x483201(0x15d)]});}),_0x36d22c={'date':_0x174052,'eur':_0x257468[stablecoins['eur'][_0x42ab71(0x9d)]][_0x266ca3],'usd':_0x257468[stablecoins[_0x42ab71(0xb1)][_0x42ab71(0x9d)]][_0x266ca3],'coins':_0x194e5d}):(_0x25a5ab[_0x42ab71(0xf2)][_0x42ab71(0xab)](_0x4a695f=>{const _0x16079e=_0x42ab71;!_0x4a695f[_0x16079e(0x12b)]&&_0x194e5d[_0x16079e(0x188)]({'coin':_0x4a695f[_0x16079e(0x9d)],'number':_0x3bb660[_0x4a695f[_0x16079e(0x9d)]][_0x174052],'price':_0x4a695f[_0x16079e(0x9d)]==_0x16079e(0x11d)?0x1:_0x257468[_0x4a695f['coin']][_0x266ca3]});}),_0x36d22c={'date':_0x174052,'eur':_0x257468[stablecoins[_0x42ab71(0xbc)][_0x42ab71(0x9d)]][_0x266ca3],'usd':_0x257468[stablecoins['usd']['coin']][_0x266ca3],'coins':_0x194e5d}),dbPerformance['get'](_0x42ab71(0x141))[_0x42ab71(0x188)](_0x36d22c)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x1fc3d1 of _0x58b80a){_0x1fc3d1[_0x4dd3f7(0x9d)]!=_0x4dd3f7(0x11d)&&await updateCoinResults(_0x1fc3d1);}logHistory(_0x4dd3f7(0x91),_0x4dd3f7(0x16f));}catch(_0x31c21c){await handleError(_0x31c21c,_0x4dd3f7(0xd8));}}async function getCloses(_0x25be36,_0x40c465,_0xd1e42e=undefined){const _0x2b2176=_0x5bb9af,_0x3383a2='1d';let _0x27ff85,_0x163784;const _0x3b3294=fns[_0x2b2176(0x102)](new Date(),_0x40c465)+0x1;try{const _0x497026=exchange[_0x2b2176(0xb3)]()-_0x3b3294*0x18*0xe10*0x3e8;_0x27ff85=await exchange['fetchOHLCV'](_0x25be36,_0x3383a2,_0x497026,_0xd1e42e),_0x163784=await exchange[_0x2b2176(0x13f)](_0x25be36);}catch(_0x492762){await handleError(_0x492762,'getCloses()');}let _0x3dff8e=ohlcvToCloses(_0x27ff85);return _0x3dff8e['push'](_0x163784[_0x25be36][_0x2b2176(0xd5)]),_0x3dff8e;}function ohlcvToCloses(_0xb112a0){const _0xb0539b=_0x5bb9af;let _0x340350=[];return _0xb112a0[_0xb0539b(0xab)](function(_0x5814d8){const _0x363e5b=_0xb0539b;_0x340350[_0x363e5b(0x188)](_0x5814d8[0x4]);}),_0x340350;}function getConfiguration(_0x321d97){const _0x3ab657=_0x5bb9af;let _0x2f78bc=dbConfig[_0x3ab657(0x159)]('bot')['find']({'botID':_0x321d97})['value']();if(_0x2f78bc){let _0x1c2b26=![];!_0x2f78bc['exchange']&&(_0x2f78bc={..._0x2f78bc,'exchange':_0x3ab657(0x14c)},_0x1c2b26=!![]),!_0x2f78bc[_0x3ab657(0x161)]&&(_0x2f78bc={..._0x2f78bc,'ordertype':_0x3ab657(0xed)},_0x1c2b26=!![]),!_0x2f78bc[_0x3ab657(0x131)]&&(_0x2f78bc={..._0x2f78bc,'timeout':0x14},_0x1c2b26=!![]),_0x1c2b26&&(_0x2f78bc={'botID':_0x2f78bc[_0x3ab657(0x103)],'exchange':_0x2f78bc[_0x3ab657(0x114)],'apiKey':_0x2f78bc[_0x3ab657(0xe1)],'apiSecret':_0x2f78bc[_0x3ab657(0xda)],'botname':_0x2f78bc['botname'],'threshold':_0x2f78bc['threshold'],'ordertype':_0x2f78bc['ordertype'],'timeout':_0x2f78bc[_0x3ab657(0x131)],'startdate':_0x2f78bc['startdate'],'recreate':_0x2f78bc[_0x3ab657(0x9f)],'timeshift':_0x2f78bc[_0x3ab657(0xa2)],'headless':_0x2f78bc['headless'],'cooldown':_0x2f78bc['cooldown'],'portfolio':_0x2f78bc[_0x3ab657(0xf2)]},dbConfig['get']('bot')[_0x3ab657(0x13e)]()[_0x3ab657(0x117)](),dbConfig[_0x3ab657(0x159)](_0x3ab657(0x87))[_0x3ab657(0x188)](_0x2f78bc)['write']());}else _0x2f78bc={'botID':_0x321d97,'exchange':_0x3ab657(0x14c),'apiKey':'','apiSecret':'','botname':_0x3ab657(0x14e)+_0x321d97,'threshold':'3','ordertype':_0x3ab657(0xed),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3ab657(0xa2)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x2f78bc;}function emittedConfiguration(){const _0x44a61c=_0x5bb9af;let _0x42d556;return config[_0x44a61c(0xe1)]==''?_0x42d556=config:_0x42d556={...config,'apiKey':_0x44a61c(0x89),'apiSecret':_0x44a61c(0x89)},_0x42d556;}function getSettings(){const _0x575068=_0x5bb9af;return dbSettings[_0x575068(0x159)](_0x575068(0x140))[_0x575068(0x97)]();}function getSecure(){const _0x149ee6=_0x5bb9af;return dbSecure[_0x149ee6(0x159)](_0x149ee6(0x132))['value']()||{};}function updateTimeshift(_0x2731c8){const _0xf71897=_0x5bb9af;let _0x579fc4=dbConfig[_0xf71897(0x159)](_0xf71897(0x87))['find']({'botID':botID})['value']();_0x579fc4&&dbConfig[_0xf71897(0x159)](_0xf71897(0x87))[_0xf71897(0xa9)]({'botID':botID})[_0xf71897(0x111)]({'timeshift':_0x2731c8})[_0xf71897(0x117)](),config['timeshift']=_0x2731c8,proxyEmit(_0xf71897(0x138),emittedConfiguration());}async function storeConfiguration(_0x1baf0c){const _0x520f61=_0x5bb9af;let _0x2491c2=dbConfig['get'](_0x520f61(0x87))[_0x520f61(0xa9)]({'botID':botID})[_0x520f61(0x97)]();_0x1baf0c={..._0x1baf0c,'apiKey':crypt[_0x520f61(0x180)](secure[_0x520f61(0x158)],_0x1baf0c[_0x520f61(0xe1)])[_0x520f61(0x104)],'apiSecret':crypt['decrypt'](secure[_0x520f61(0x158)],_0x1baf0c[_0x520f61(0xda)])[_0x520f61(0x104)]};if(_0x2491c2){if(_0x1baf0c[_0x520f61(0xe1)]==_0x520f61(0x89))_0x1baf0c[_0x520f61(0xe1)]=config['apiKey'];if(_0x1baf0c[_0x520f61(0xda)]==_0x520f61(0x89))_0x1baf0c[_0x520f61(0xda)]=config['apiSecret'];dbConfig['get'](_0x520f61(0x87))[_0x520f61(0xa9)]({'botID':botID})[_0x520f61(0x111)](_0x1baf0c)[_0x520f61(0x117)]();}else dbConfig[_0x520f61(0x159)](_0x520f61(0x87))['push'](_0x1baf0c)[_0x520f61(0x117)](),process[_0x520f61(0xd0)]({'status':_0x520f61(0x93),'live':_0x520f61(0xbb)});config={..._0x1baf0c};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x1baf0c[_0x520f61(0x129)]}),proxyEmit(_0x520f61(0xf6)),reset();}async function storeHeadless(_0x3451af){const _0x2ece6c=_0x5bb9af,_0x30fff9={...config,'headless':_0x3451af['headless']};let _0x1693e5=dbConfig[_0x2ece6c(0x159)](_0x2ece6c(0x87))[_0x2ece6c(0xa9)]({'botID':botID})[_0x2ece6c(0x97)]();_0x1693e5&&dbConfig[_0x2ece6c(0x159)](_0x2ece6c(0x87))[_0x2ece6c(0xa9)]({'botID':botID})['assign'](_0x30fff9)['write'](),config={..._0x30fff9},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x4e3d57){const _0x2ad6a4=_0x5bb9af;return _0x4e3d57[_0x2ad6a4(0x12e)]('/','');}function updateNumberCoins(_0x1017e6){const _0x1c1626=_0x5bb9af;_0x1017e6[_0x1c1626(0xeb)]&&_0x1017e6[_0x1c1626(0xeb)]==_0x1c1626(0xcf)&&_0x1017e6[_0x1c1626(0x171)][_0x1c1626(0xab)](_0x1e1702=>{const _0x4145db=_0x1c1626;let _0x4a9312=currentCoins[_0x4145db(0xa9)](_0x5238cc=>_0x5238cc['coin']==_0x1e1702[_0x4145db(0x173)]);if(_0x4a9312)_0x4a9312[_0x4145db(0x8d)]=Number(_0x1e1702[_0x4145db(0x151)]);}),_0x1017e6[_0x1c1626(0xeb)]&&_0x1017e6[_0x1c1626(0xeb)]==_0x1c1626(0x94)&&(_0x1017e6[_0x1c1626(0x105)]==_0x1c1626(0xe9)&&_0x1017e6[_0x1c1626(0x13c)]==_0x1c1626(0xa1)&&lastOrders[_0x1c1626(0xab)](_0x1d0f79=>{const _0x4fb10c=_0x1c1626;if(_0x1d0f79[_0x4fb10c(0x107)]==_0x1017e6[_0x4fb10c(0x107)]){if(_0x1d0f79[_0x4fb10c(0x11b)])_0x1d0f79['filled']=_0x1017e6[_0x4fb10c(0xfb)]*_0x1d0f79[_0x4fb10c(0xcb)];else _0x1d0f79[_0x4fb10c(0x12f)]=_0x1017e6[_0x4fb10c(0xfb)];}}));}async function getCoins(_0x333e98=!![]){const _0xf8060f=_0x5bb9af;let _0x342a8e,_0x14abdb=[],_0x3590f4=[],_0x43cd78=[];try{_0x342a8e=await exchange[_0xf8060f(0x14f)](),mybalances=_0x342a8e['total'];if(!_0x333e98)for(const [_0x3795bc,_0x31a42c]of Object['entries'](mybalances)){_0x43cd78[_0xf8060f(0x188)](_0x3795bc);}else config[_0xf8060f(0xf2)][_0xf8060f(0xab)](_0x601980=>{const _0x53bec4=_0xf8060f;if(!_0x601980[_0x53bec4(0x12b)])_0x43cd78[_0x53bec4(0x188)](_0x601980[_0x53bec4(0x9d)]);});for(const [_0x663dfd,_0x17dae4]of Object[_0xf8060f(0x128)](mybalances)){if(_0x43cd78[_0xf8060f(0x109)](_0x663dfd)){if((_0x17dae4['toString']()!=0x0||config[_0xf8060f(0xf2)][_0xf8060f(0xa9)](_0x588bc1=>_0x588bc1[_0xf8060f(0x9d)]==_0x663dfd))&&(allSymbols[_0xf8060f(0x109)](_0x663dfd+_0xf8060f(0x134))||_0x663dfd==_0xf8060f(0x11d)))_0x3590f4[_0xf8060f(0x188)]({'coin':_0x663dfd,'symbol':_0x663dfd+'/BTC','reverse':![],'number':_0x17dae4}),_0x663dfd!=_0xf8060f(0x11d)&&_0x14abdb[_0xf8060f(0x188)](_0x663dfd+_0xf8060f(0x134));else(_0x17dae4[_0xf8060f(0xbe)]()!=0x0||config[_0xf8060f(0xf2)][_0xf8060f(0xa9)](_0x35bc80=>_0x35bc80[_0xf8060f(0x9d)]==_0x663dfd))&&allSymbols[_0xf8060f(0x109)](_0xf8060f(0xcd)+_0x663dfd)&&(_0x3590f4[_0xf8060f(0x188)]({'coin':_0x663dfd,'symbol':'BTC/'+_0x663dfd,'reverse':!![],'number':_0x17dae4}),_0x663dfd!=_0xf8060f(0x11d)&&_0x14abdb[_0xf8060f(0x188)](_0xf8060f(0xcd)+_0x663dfd));}}}catch(_0x546e80){if(!_0x333e98){if(_0x546e80[_0xf8060f(0xbe)]()[_0xf8060f(0x109)](_0xf8060f(0xea)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x546e80[_0xf8060f(0xbe)]()[_0xf8060f(0x109)](_0xf8060f(0x10d)))return logHistory(_0xf8060f(0x8a),_0xf8060f(0x9a)),![];else{if(_0x546e80[_0xf8060f(0xbe)]()[_0xf8060f(0x109)](_0xf8060f(0x9c)))return logHistory(_0xf8060f(0x8a),_0xf8060f(0x120)),![];else await handleError(_0x546e80,_0xf8060f(0x113));}}}else await handleError(_0x546e80,_0xf8060f(0x113));}return _0x3590f4;}async function getPortfolio(_0x1e42bd){const _0x765056=_0x5bb9af;let _0x672351=[],_0x427a4d=[],_0x2ebabe,_0x34ad42=[],_0x4121d9,_0x4c6df6;_0x1e42bd[_0x765056(0xe1)]===_0x765056(0x89)||_0x1e42bd['apiSecret']===_0x765056(0x89)?(_0x4121d9=config[_0x765056(0xe1)],_0x4c6df6=config[_0x765056(0xda)]):(_0x4121d9=_0x1e42bd[_0x765056(0xe1)],_0x4c6df6=_0x1e42bd[_0x765056(0xda)]);await initExchange(_0x4121d9,_0x4c6df6);let _0x148a9e=await loadSymbols();if(_0x148a9e){_0x34ad42=await getCoins(![]);if(_0x34ad42===![])proxyEmit(_0x765056(0xf2),![]);else{_0x34ad42[_0x765056(0xab)](_0x140a6a=>{const _0x2a88c1=_0x765056;_0x672351[_0x2a88c1(0x188)](_0x140a6a[_0x2a88c1(0xca)]);});try{_0x427a4d=await exchange[_0x765056(0x13f)](_0x672351);}catch(_0xd2fb60){await handleError(_0xd2fb60,_0x765056(0x15e));}_0x34ad42['forEach'](_0x327bc0=>{const _0x1c26a8=_0x765056;_0x327bc0[_0x1c26a8(0x9d)]!=_0x1c26a8(0x11d)?_0x2ebabe=_0x327bc0[_0x1c26a8(0x11b)]?0x1/_0x427a4d[_0x327bc0['symbol']][_0x1c26a8(0xd5)]:_0x427a4d[_0x327bc0[_0x1c26a8(0xca)]][_0x1c26a8(0xd5)]:_0x2ebabe=0x1,_0x327bc0['price']=formatResult(_0x2ebabe,0x8);}),proxyEmit(_0x765056(0xf2),_0x34ad42);}}else proxyEmit(_0x765056(0xf2),![]);}function checkMinimums(_0x51eb13){const _0x4758ea=_0x5bb9af;let _0x285aa2=!![];const _0x285cd2=!_0x51eb13[_0x4758ea(0x11b)]?markets[_0x51eb13['symbol']][_0x4758ea(0x16c)][_0x4758ea(0x8b)][_0x4758ea(0x118)]:markets[_0x51eb13[_0x4758ea(0xca)]][_0x4758ea(0x16c)][_0x4758ea(0xf1)][_0x4758ea(0x118)],_0xff1dd8=!_0x51eb13[_0x4758ea(0x11b)]?markets[_0x51eb13[_0x4758ea(0xca)]][_0x4758ea(0x16c)]['cost']['min']:markets[_0x51eb13['symbol']][_0x4758ea(0x16c)][_0x4758ea(0x8b)][_0x4758ea(0x118)];if(Math[_0x4758ea(0x147)](_0x51eb13[_0x4758ea(0x123)])<_0x285cd2)_0x285aa2=![];if(Math[_0x4758ea(0x147)](_0x51eb13[_0x4758ea(0x123)])*_0x51eb13[_0x4758ea(0xd5)]<_0xff1dd8)_0x285aa2=![];return _0x285aa2;}async function getBalances(){const _0x4cccc0=_0x5bb9af;let _0x403582=0x0,_0x44639a;const _0x44c1cb=config[_0x4cccc0(0xfe)];currentCoins[_0x4cccc0(0xab)](_0x4880c9=>{const _0x2193a3=_0x4cccc0;if(_0x4880c9[_0x2193a3(0x9d)]!=_0x2193a3(0x11d)){let _0x72c595=global['ticker'][noslash(_0x4880c9[_0x2193a3(0xca)])];_0x44639a=_0x4880c9[_0x2193a3(0x11b)]?0x1/_0x72c595:_0x72c595;}else _0x44639a=0x1;let _0x336533=_0x4880c9[_0x2193a3(0x8d)]*_0x44639a;_0x403582+=_0x336533,_0x4880c9['last']=formatResult(Number(_0x44639a),0x8),_0x4880c9['value']=_0x336533;}),currentCoins['forEach'](_0x200942=>{const _0x4e2be3=_0x4cccc0;let _0x23d61f=config['portfolio'][_0x4e2be3(0xa9)](_0x35b427=>_0x35b427['coin']==_0x200942[_0x4e2be3(0x9d)]),_0x39b5bb=Number(_0x23d61f['distribution']),_0x236aa9=_0x200942[_0x4e2be3(0x97)]/_0x403582*0x64,_0x52e434=_0x39b5bb*_0x403582/0x64/_0x200942[_0x4e2be3(0xd5)]-_0x200942[_0x4e2be3(0x8d)];_0x200942[_0x4e2be3(0x16a)]=formatResult(_0x236aa9,0x3),_0x200942[_0x4e2be3(0x155)]=formatResult(_0x39b5bb,0x3),_0x200942[_0x4e2be3(0x123)]=formatResult(_0x52e434,0x8),_0x200942[_0x4e2be3(0x88)]='',_0x200942[_0x4e2be3(0x119)]='';if(_0x200942['coin']!=_0x4e2be3(0x11d)){if(_0x200942[_0x4e2be3(0x16a)]>_0x39b5bb)_0x200942[_0x4e2be3(0x88)]=_0x4e2be3(0x10f),_0x200942[_0x4e2be3(0x119)]=checkMinimums(_0x200942);else _0x200942['distribution']<_0x39b5bb&&(_0x200942[_0x4e2be3(0x88)]=_0x4e2be3(0x149),_0x200942['valid']=checkMinimums(_0x200942));}_0x200942[_0x4e2be3(0xd2)]=_0x200942['distribution']/_0x200942['target']-0x1;}),currentCoins['sort']((_0x5d04d3,_0x5f5b6f)=>_0x5d04d3[_0x4cccc0(0xd2)]<_0x5f5b6f[_0x4cccc0(0xd2)]?0x1:_0x5f5b6f[_0x4cccc0(0xd2)]<_0x5d04d3[_0x4cccc0(0xd2)]?-0x1:0x0);const _0xba7fb7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xba7fb7[_0x4cccc0(0xbc)],'usd':_0xba7fb7[_0x4cccc0(0xb1)],'portfolio':JSON[_0x4cccc0(0x13a)](currentCoins),'threshold':_0x44c1cb},proxyEmit(_0x4cccc0(0x171),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4cccc0(0x152)])headlessMode({'portfolio':currentCoins,'threshold':_0x44c1cb});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x401e17=_0x5bb9af;if(!lastBalances)return;let _0x3c417d=await getStartingBalances(![]),_0x132c67=[],_0x3a5600=[],_0x193f6a;JSON['parse'](lastBalances['portfolio'])['forEach'](_0x5052a5=>{const _0x1cb8e2=_0x5db6;let _0x114660={'coin':_0x5052a5[_0x1cb8e2(0x9d)],'number':_0x5052a5[_0x1cb8e2(0x8d)],'price':_0x5052a5[_0x1cb8e2(0xd5)]};_0x132c67[_0x1cb8e2(0x188)](_0x114660);if(!_0x3c417d[_0x1cb8e2(0x177)]||!_0x3c417d[_0x1cb8e2(0x177)][_0x1cb8e2(0xa9)](_0x555b25=>_0x555b25[_0x1cb8e2(0x9d)]==_0x5052a5['coin']&&_0x555b25[_0x1cb8e2(0x8d)]!=0x0))_0x3a5600[_0x1cb8e2(0x188)](_0x114660);});const _0x1914ef=await getFiat();_0x193f6a={'date':lastBalances[_0x401e17(0x14a)][_0x401e17(0xa6)]('\x20')[0x0],'eur':_0x1914ef[_0x401e17(0xbc)],'usd':_0x1914ef[_0x401e17(0xb1)],'coins':_0x132c67};let _0x27a601=dbPerformance[_0x401e17(0x159)](_0x401e17(0x141))[_0x401e17(0xa9)]({'date':_0x193f6a[_0x401e17(0x12a)]})[_0x401e17(0x97)]();_0x27a601?dbPerformance[_0x401e17(0x159)]('data')['find']({'date':_0x193f6a[_0x401e17(0x12a)]})['assign'](_0x193f6a)['write']():dbPerformance[_0x401e17(0x159)](_0x401e17(0x141))[_0x401e17(0x188)](_0x193f6a)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x42f994=_0x5bb9af;if(dbPerformance[_0x42f994(0x12d)](_0x42f994(0x141))['value']()){let _0x140973=dbPerformance[_0x42f994(0x159)](_0x42f994(0x141))[_0x42f994(0xdb)](_0x42f994(0x12a))['value']();proxyEmit(_0x42f994(0xf9),_0x140973),lastPerformanceEmitted=getDate();}else proxyEmit(_0x42f994(0xf9),[]);}async function getStartingBalances(_0x3ca3bc=!![]){const _0x990637=_0x5bb9af;let _0x3da635=dbPerformance[_0x990637(0x159)](_0x990637(0x141))[_0x990637(0xa9)]({'date':config[_0x990637(0x143)]})[_0x990637(0x97)]();config[_0x990637(0xe1)]!=''&&!_0x3da635&&(await setStartDatePerformance(config),_0x3da635=dbPerformance[_0x990637(0x159)]('data')[_0x990637(0xa9)]({'date':config[_0x990637(0x143)]})['value']());if(config[_0x990637(0xe1)]==''||!_0x3da635)return{};let _0x4b6bec=0x0,_0x19e2e7=0x0,_0xda9931=0x0,_0x8e6444=[],_0x240476=0x0;config[_0x990637(0xf2)][_0x990637(0xab)](_0x5b209d=>{const _0x24eaba=_0x990637;!_0x5b209d['excluded']&&(_0x8e6444[_0x240476]={'coin':_0x5b209d[_0x24eaba(0x9d)],'symbol':_0x5b209d[_0x24eaba(0xca)],'number':_0x5b209d[_0x24eaba(0x10c)],'price':_0x5b209d[_0x24eaba(0x15d)]},_0x4b6bec+=_0x5b209d[_0x24eaba(0x15d)]*_0x5b209d[_0x24eaba(0x10c)],_0x19e2e7+=_0x5b209d[_0x24eaba(0x15d)]*_0x5b209d[_0x24eaba(0x10c)]*_0x3da635[_0x24eaba(0xbc)],_0xda9931+=_0x5b209d[_0x24eaba(0x15d)]*_0x5b209d['startnumber']*_0x3da635['usd'],_0x240476++);});let _0x2b75cb={'btc':_0x4b6bec,'eur':_0x19e2e7,'usd':_0xda9931,'coins':_0x8e6444};if(_0x3ca3bc)proxyEmit('starting-balances',_0x2b75cb);return _0x2b75cb;}function headlessMode(_0x33bf8e){const _0x186f50=_0x5bb9af;let _0x1909b9=_0x33bf8e[_0x186f50(0xf2)],_0xe97da2=_0x33bf8e['threshold'],_0xff4f9=[];for(let _0x1c6446 of _0x1909b9){if(_0x1c6446[_0x186f50(0x9d)]!=_0x186f50(0x11d)){if(_0x1c6446[_0x186f50(0x16a)]/_0x1c6446['target']-0x1>=_0xe97da2/0x64){if(_0x1c6446['valid'])_0xff4f9[_0x186f50(0x188)](_0x1c6446);}else{if(_0x1c6446[_0x186f50(0x16a)]/_0x1c6446['target']-0x1<=-_0xe97da2/0x64){if(_0x1c6446['valid'])_0xff4f9[_0x186f50(0x188)](_0x1c6446);}}}}_0xff4f9['length']>0x0&&placeOrder(_0xff4f9);}function symbolToCoin(_0x1119be){const _0x6cb6c8=_0x5bb9af;let _0x17f8bd;if(_0x1119be[_0x6cb6c8(0x109)](_0x6cb6c8(0x134)))_0x17f8bd=_0x1119be[_0x6cb6c8(0x12e)]('/BTC','');if(_0x1119be[_0x6cb6c8(0x109)](_0x6cb6c8(0xcd)))_0x17f8bd=_0x1119be[_0x6cb6c8(0x12e)](_0x6cb6c8(0xcd),'');return _0x17f8bd;}async function validateOrders(_0x56953a=0x0){const _0x295f85=_0x5bb9af;let _0x5b1d14=[],_0x58964c=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x295f85(0x131)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x2e0c74=>{const _0x2a2409=_0x295f85;let _0x3fb060=previousCoins[_0x2a2409(0xa9)](_0x30aaee=>_0x30aaee[_0x2a2409(0x9d)]==symbolToCoin(_0x2e0c74[_0x2a2409(0xca)])),_0x5c9ff8=currentCoins[_0x2a2409(0xa9)](_0x2982b3=>_0x2982b3[_0x2a2409(0x9d)]==symbolToCoin(_0x2e0c74[_0x2a2409(0xca)])),_0x1128b4,_0x403fdd;_0x2e0c74[_0x2a2409(0x88)]==_0x2a2409(0x149)&&!_0x2e0c74['reverse']||_0x2e0c74['side']==_0x2a2409(0x10f)&&_0x2e0c74['reverse']?(_0x1128b4=_0x3fb060['number']+0.9*_0x2e0c74[_0x2a2409(0x12f)],_0x403fdd=_0x3fb060[_0x2a2409(0x8d)]+1.1*_0x2e0c74[_0x2a2409(0x12f)]):(_0x1128b4=_0x3fb060[_0x2a2409(0x8d)]-1.1*_0x2e0c74['filled'],_0x403fdd=_0x3fb060[_0x2a2409(0x8d)]-0.9*_0x2e0c74[_0x2a2409(0x12f)]);const _0x37f55e=_0x2e0c74['filled']!=0x0&&_0x5c9ff8[_0x2a2409(0x8d)]>=_0x1128b4&&_0x5c9ff8[_0x2a2409(0x8d)]<=_0x403fdd;_0x5b1d14[_0x2a2409(0x188)](_0x37f55e);if(_0x37f55e&&config[_0x2a2409(0x161)]!=_0x2a2409(0xed)){if(_0x2e0c74[_0x2a2409(0x11b)])logHistory(_0x2a2409(0xff),_0x2a2409(0x133)+_0x2e0c74[_0x2a2409(0xca)]+'\x20'+_0x2e0c74['side']+'\x20#'+formatResult(_0x2e0c74['filled']/_0x2e0c74[_0x2a2409(0xcb)],0x8)+'\x20@'+formatResult(_0x2e0c74[_0x2a2409(0xcb)],0x8));else logHistory(_0x2a2409(0xff),'Order\x20filled:\x20'+_0x2e0c74[_0x2a2409(0xca)]+'\x20'+_0x2e0c74[_0x2a2409(0x88)]+'\x20#'+formatResult(_0x2e0c74['filled'],0x8)+'\x20@'+formatResult(_0x2e0c74[_0x2a2409(0xcb)],0x8));}}),_0x5b1d14[_0x295f85(0xab)]((_0x3bf77a,_0x385920)=>{if(_0x3bf77a)lastOrders['splice'](_0x385920,0x1);});if(_0x56953a<_0x58964c&&_0x5b1d14['includes'](![])){if(_0x56953a==0x0){config[_0x295f85(0x161)]==_0x295f85(0xed)?logHistory('error',_0x295f85(0x12c)):logHistory('error',_0x295f85(0xe5));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x56953a);},0xa*0x3e8);}else{(_0x56953a==0x1||_0x56953a==Math['round'](_0x58964c/0x2)||_0x56953a==_0x58964c-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x56953a);},validateOrderInterval);}}else{lockOrders=![];if(_0x56953a>0x0&&!_0x5b1d14[_0x295f85(0x109)](![]))config[_0x295f85(0x161)]==_0x295f85(0xed)?logHistory('success',_0x295f85(0x122)):logHistory(_0x295f85(0x91),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x56953a>0x0&&_0x5b1d14[_0x295f85(0x109)](![])&&(config['ordertype']=='market'?logHistory(_0x295f85(0x91),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x295f85(0x124)](_0x58964c*validateOrderInterval/0xea60)+_0x295f85(0x121)):(lastOrders[_0x295f85(0xab)](async _0x1fa0f4=>{const _0x20d9c7=_0x295f85;try{const _0x22d8c6=await exchange[_0x20d9c7(0x172)](_0x1fa0f4[_0x20d9c7(0x107)],_0x1fa0f4[_0x20d9c7(0xca)]);}catch(_0x24cc2c){if(_0x24cc2c['toString']()[_0x20d9c7(0x109)](_0x20d9c7(0x160))){}else await handleError(_0x24cc2c,_0x20d9c7(0x166));}}),logHistory(_0x295f85(0x91),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x58964c*validateOrderInterval/0xea60)+_0x295f85(0x121))));}}async function resetCoinResults(){const _0xc8c917=_0x5bb9af;dbCoinResults[_0xc8c917(0x159)](_0xc8c917(0x177))[_0xc8c917(0x13e)]()['write']();let _0x47e2ce=await getStartingBalances(![]);_0x47e2ce[_0xc8c917(0x177)][_0xc8c917(0xab)](_0x17815c=>{const _0x12bf73=_0xc8c917,_0x14daa7=_0x17815c['symbol']['includes'](_0x12bf73(0xcd));if(_0x17815c[_0x12bf73(0x9d)]!=_0x12bf73(0x11d)){let _0x543cb1={'coin':_0x17815c[_0x12bf73(0x9d)],'number':_0x17815c['number'],'breakeven':_0x17815c[_0x12bf73(0xcb)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x12bf73(0x177))['push'](_0x543cb1)[_0x12bf73(0x117)]();}});}async function updateCoinResults(_0x89a88b){const _0x38fcd3=_0x5bb9af;let _0x25782d,_0x35b6b3,_0x3ab6a3,_0x18738e,_0xd14ae1,_0x3fd2f7,_0x1c2e6d=dbCoinResults['get'](_0x38fcd3(0x177))['find']({'coin':_0x89a88b[_0x38fcd3(0x9d)]})[_0x38fcd3(0x97)]();if(!_0x1c2e6d)return;if(_0x89a88b[_0x38fcd3(0xe7)]&&_0x89a88b[_0x38fcd3(0xe7)][_0x38fcd3(0x99)]==_0x38fcd3(0x11d))_0x25782d=_0x89a88b['fee']['cost'];else{if(_0x89a88b[_0x38fcd3(0xe7)]&&_0x89a88b[_0x38fcd3(0xe7)][_0x38fcd3(0x99)]=='BNB')_0x25782d=_0x89a88b[_0x38fcd3(0xe7)][_0x38fcd3(0xf1)]*global[_0x38fcd3(0xe8)][_0x38fcd3(0x14d)];else _0x25782d=0.001*_0x89a88b[_0x38fcd3(0x12f)];}const _0x45613d=_0x89a88b[_0x38fcd3(0xca)][_0x38fcd3(0x109)](_0x38fcd3(0xcd));_0x45613d&&(_0x3fd2f7={'coin':_0x89a88b[_0x38fcd3(0x9d)],'symbol':_0x89a88b[_0x38fcd3(0xca)],'filled':_0x89a88b['filled']*_0x89a88b[_0x38fcd3(0xcb)],'side':_0x89a88b['side']==_0x38fcd3(0x10f)?_0x38fcd3(0x149):'sell','price':0x1/_0x89a88b[_0x38fcd3(0xcb)]},_0x89a88b={..._0x3fd2f7});_0x89a88b[_0x38fcd3(0x88)]==_0x38fcd3(0x149)?_0x3ab6a3=(_0x1c2e6d[_0x38fcd3(0x168)]*_0x1c2e6d[_0x38fcd3(0x8d)]+_0x89a88b[_0x38fcd3(0xcb)]*_0x89a88b[_0x38fcd3(0x12f)])/(_0x1c2e6d['number']+_0x89a88b[_0x38fcd3(0x12f)]):_0x3ab6a3=(_0x1c2e6d[_0x38fcd3(0x168)]*_0x1c2e6d[_0x38fcd3(0x8d)]-_0x89a88b['price']*_0x89a88b[_0x38fcd3(0x12f)])/(_0x1c2e6d[_0x38fcd3(0x8d)]-_0x89a88b[_0x38fcd3(0x12f)]);_0x89a88b['side']==_0x38fcd3(0x149)?_0x18738e=_0x1c2e6d['realized']:_0x18738e=_0x1c2e6d[_0x38fcd3(0x162)]+(_0x89a88b[_0x38fcd3(0xcb)]-_0x1c2e6d[_0x38fcd3(0x168)])*_0x89a88b[_0x38fcd3(0x12f)];_0x35b6b3=_0x89a88b[_0x38fcd3(0x88)]==_0x38fcd3(0x10f)?_0x1c2e6d[_0x38fcd3(0x8d)]-_0x89a88b[_0x38fcd3(0x12f)]:_0x1c2e6d[_0x38fcd3(0x8d)]+_0x89a88b[_0x38fcd3(0x12f)],_0xd14ae1=(_0x89a88b[_0x38fcd3(0xcb)]-_0x3ab6a3)*_0x35b6b3;let _0x2604b1={'coin':_0x89a88b[_0x38fcd3(0x9d)],'number':_0x35b6b3,'breakeven':formatResult(_0x3ab6a3,0x8),'realized':formatResult(_0x18738e,0x8),'unrealized':formatResult(_0xd14ae1,0x8),'fees':formatResult(_0x1c2e6d[_0x38fcd3(0x17b)]+_0x25782d,0x8),'sells':_0x89a88b[_0x38fcd3(0x88)]==_0x38fcd3(0x10f)?_0x1c2e6d[_0x38fcd3(0x84)]+0x1:_0x1c2e6d[_0x38fcd3(0x84)],'buys':_0x89a88b[_0x38fcd3(0x88)]==_0x38fcd3(0x149)?_0x1c2e6d[_0x38fcd3(0xc4)]+0x1:_0x1c2e6d[_0x38fcd3(0xc4)]};dbCoinResults[_0x38fcd3(0x159)](_0x38fcd3(0x177))[_0x38fcd3(0xa9)]({'coin':_0x89a88b[_0x38fcd3(0x9d)]})['assign'](_0x2604b1)[_0x38fcd3(0x117)]();}async function placeOrder(_0x543c77){const _0x17a9b3=_0x5bb9af,_0x987de1=config[_0x17a9b3(0x161)]==_0x17a9b3(0xed)?_0x17a9b3(0xed):_0x17a9b3(0x130);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x17a9b3(0x9b)](JSON[_0x17a9b3(0x13a)](currentCoins));for(const _0xdb8416 of _0x543c77){let _0x37d5e5,_0x15479c,_0x424267,_0x46e78b,_0xec798b,_0x162df9=_0xdb8416[_0x17a9b3(0xca)];try{const _0x4cd7de=await exchange[_0x17a9b3(0x13f)](_0x162df9),_0x3f322b=_0x4cd7de[_0x162df9];_0x37d5e5=_0x3f322b['last'],_0x15479c=_0x3f322b[_0x17a9b3(0x165)],_0x424267=_0x3f322b['ask'];_0xdb8416[_0x17a9b3(0x11b)]?(_0x46e78b=_0xdb8416[_0x17a9b3(0x88)]==_0x17a9b3(0x149)?_0x17a9b3(0x10f):'buy',_0xec798b=Math[_0x17a9b3(0x147)](_0xdb8416[_0x17a9b3(0x123)])/_0x37d5e5):(_0x46e78b=_0xdb8416[_0x17a9b3(0x88)],_0xec798b=Math[_0x17a9b3(0x147)](_0xdb8416[_0x17a9b3(0x123)]));_0x987de1==_0x17a9b3(0x130)&&(config[_0x17a9b3(0x161)]==_0x17a9b3(0xf5)&&(_0x37d5e5=_0x46e78b=='buy'?_0x15479c:_0x424267),config['ordertype']=='limit-low'&&(_0x37d5e5=_0x46e78b==_0x17a9b3(0x149)?_0x424267:_0x15479c));_0xec798b=formatResult(_0xec798b,0x8),_0x37d5e5=formatResult(_0x37d5e5,0x8);const _0xc2a2d4=await exchange[_0x17a9b3(0x136)](_0x162df9,_0x987de1,_0x46e78b,_0xec798b,_0x37d5e5);lastOrders[_0x17a9b3(0x188)]({'orderId':_0xc2a2d4['id'],'symbol':_0x162df9,'side':_0x46e78b,'reverse':_0xdb8416[_0x17a9b3(0x11b)],'amount':_0xdb8416[_0x17a9b3(0x11b)]?_0xc2a2d4[_0x17a9b3(0x8b)]*_0xc2a2d4['price']:_0xc2a2d4['amount'],'filled':_0xdb8416['reverse']?_0xc2a2d4['filled']*_0xc2a2d4[_0x17a9b3(0xcb)]:_0xc2a2d4[_0x17a9b3(0x12f)],'price':_0xc2a2d4[_0x17a9b3(0xcb)]});const _0x4905a3=_0x987de1==_0x17a9b3(0xed)?_0x17a9b3(0x10a):config[_0x17a9b3(0x161)]=='limit-high'?'Limit\x20(high-margin)':_0x17a9b3(0xb2);if(_0x987de1=='market')logHistory(_0x17a9b3(0xff),_0x4905a3+'\x20order:\x20'+_0x162df9+'\x20'+_0x46e78b+'\x20#'+formatResult(_0xc2a2d4[_0x17a9b3(0x12f)],0x8)+'\x20@'+formatResult(_0xc2a2d4[_0x17a9b3(0xcb)],0x8));else logHistory(_0x17a9b3(0xff),_0x4905a3+_0x17a9b3(0x116)+_0x162df9+'\x20'+_0x46e78b+'\x20#'+formatResult(_0xc2a2d4[_0x17a9b3(0x8b)],0x8)+'\x20@'+formatResult(_0xc2a2d4[_0x17a9b3(0xcb)],0x8));_0xc2a2d4['coin']=_0xdb8416[_0x17a9b3(0x9d)],await updateCoinResults(_0xc2a2d4);if(config[_0x17a9b3(0x18a)]!=0x0){let _0x2cd616=null;if(cooldownTracker['length']==config[_0x17a9b3(0x18a)]-0x1)_0x2cd616=cooldownTracker['shift']();const _0x51b947=getTimeStamp();cooldownTracker[_0x17a9b3(0x188)](_0x51b947);if(_0x2cd616){const _0x6c025d=fns[_0x17a9b3(0x17c)](new Date(_0x51b947),new Date(_0x2cd616));_0x6c025d<cooldownInterval&&(logHistory(_0x17a9b3(0x8a),_0x17a9b3(0x15f)+config[_0x17a9b3(0x18a)]+_0x17a9b3(0x18d)+cooldownInterval/0x3c+_0x17a9b3(0xe3)+cooldownPeriod/(0xe10*0x3e8)+_0x17a9b3(0x17a)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4edd44){if(_0x4edd44['toString']()[_0x17a9b3(0x109)](_0x17a9b3(0xa4)))logHistory(_0x17a9b3(0x8a),_0x17a9b3(0x137)+_0x162df9);else{if(_0x4edd44['toString']()[_0x17a9b3(0x109)](_0x17a9b3(0x175)))logHistory(_0x17a9b3(0x8a),_0x17a9b3(0x11c)+_0x162df9);else await handleError(_0x4edd44,_0x17a9b3(0xc1));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x17a9b3(0x152)]&&(config[_0x17a9b3(0x161)]==_0x17a9b3(0xed)?logHistory('error',_0x17a9b3(0x15b)):logHistory(_0x17a9b3(0x8a),_0x17a9b3(0xb7)));else coolingDown&&(!config[_0x17a9b3(0x152)]&&logHistory(_0x17a9b3(0x8a),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x16a57e,_0x65f3e1,_0xbea311=''){const _0x7e2f73=_0x5bb9af;let _0x313965={'time':getTimeStamp(),'type':_0x16a57e,'event':_0x65f3e1};dbLogs[_0x7e2f73(0x159)](_0x7e2f73(0x8c))[_0x7e2f73(0x188)](_0x313965)[_0x7e2f73(0x117)]();if(_0xbea311=='')_0xbea311=_0x65f3e1;proxyEmit('event',{'log':_0x313965,'summary':_0xbea311}),process[_0x7e2f73(0xd0)]({'telegram':_0x313965}),logging(''+_0x313965[_0x7e2f73(0xc9)]);}function emitHistory(_0x15e255={}){const _0x1b8ed9=_0x5bb9af;Object[_0x1b8ed9(0x86)](_0x15e255)[_0x1b8ed9(0xc0)]==0x0&&(_0x15e255={'type':['order',_0x1b8ed9(0xc9)],'event':'','page':0x1});if(_0x15e255[_0x1b8ed9(0x156)][_0x1b8ed9(0x109)](_0x1b8ed9(0xc9)))_0x15e255[_0x1b8ed9(0x156)]['splice'](_0x15e255['type'][_0x1b8ed9(0xd6)](_0x1b8ed9(0xc9)),0x1,_0x1b8ed9(0x8a),_0x1b8ed9(0x91));if(dbLogs[_0x1b8ed9(0x12d)](_0x1b8ed9(0x8c))[_0x1b8ed9(0x97)]()){let _0x236c4d=dbLogs[_0x1b8ed9(0x159)]('logs')['filter'](_0x9583f1=>{const _0x5134b4=_0x1b8ed9;if(_0x15e255['type'][_0x5134b4(0xc0)]==0x0)return![];else return _0x15e255[_0x5134b4(0x156)]['includes'](_0x9583f1['type']);})['filter'](_0x3413a9=>{const _0x189559=_0x1b8ed9;if(_0x15e255['event']=='')return!![];else return _0x3413a9[_0x189559(0xc9)][_0x189559(0xb0)]()[_0x189559(0x109)](_0x15e255['event'][_0x189559(0xb0)]());})[_0x1b8ed9(0xdb)](_0x1b8ed9(0x14a)),_0x54fbc6=_0x236c4d[_0x1b8ed9(0x97)]()[_0x1b8ed9(0xc0)];_0x236c4d=_0x236c4d[_0x1b8ed9(0x11b)]()[_0x1b8ed9(0x157)]((_0x15e255[_0x1b8ed9(0x14b)]-0x1)*logPageSize,_0x15e255[_0x1b8ed9(0x14b)]*logPageSize-0x1)[_0x1b8ed9(0x11b)]()[_0x1b8ed9(0x97)](),proxyEmit(_0x1b8ed9(0x95),{'logs':_0x236c4d,'total':_0x54fbc6});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x41e138){const _0x39c66e=_0x5bb9af,_0x482d21=new Date()[_0x39c66e(0x101)]();console[_0x39c66e(0x9e)]('Now\x20\x20\x20:\x20',_0x482d21),console[_0x39c66e(0x9e)](_0x39c66e(0xef),_0x482d21-lastBotPause),console['log']('Pauses:\x20',consecutivePauses);if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x482d21-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['exit'](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x39c66e(0x101)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x41e138),botPaused=![],reset();}}async function handleError(_0x2f358b,_0x1f4f49,_0x149b88=''){const _0x312440=_0x5bb9af;if(_0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0xe2)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0x153)),await pauseBot(pauseBotInterval);else{if(_0x2f358b[_0x312440(0xbe)]()['includes'](_0x312440(0xdc)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0xd1)),await pauseBot(pauseBotInterval);else{if(_0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0x115)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0xc2)),await pauseBot(pauseBotInterval);else{if(_0x2f358b[_0x312440(0xbe)]()['includes'](_0x312440(0xea)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0xe0)),logHistory(_0x312440(0x8a),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x312440(0x8e)](0x4d);else{if(_0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0x10d)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0xad)),logHistory(_0x312440(0x8a),_0x312440(0x16b)),process[_0x312440(0x8e)](0x4d);else{if(_0x2f358b[_0x312440(0xbe)]()['includes'](_0x312440(0x9c)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0x163)),logHistory('error',_0x312440(0x16b)),process[_0x312440(0x8e)](0x4d);else{if(_0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0xfd)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0x110)),logHistory(_0x312440(0x8a),_0x312440(0x16b)),process['exit'](0x4d);else{if(_0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0x127)))logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0x110)),logHistory('error','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x312440(0x8e)](0x4d);else _0x2f358b[_0x312440(0xbe)]()[_0x312440(0x109)](_0x312440(0x183))?logHistory(_0x312440(0x8a),_0x1f4f49+_0x312440(0x85)):(logHistory('error',_0x1f4f49+_0x312440(0xce)),logging(_0x1f4f49+_0x312440(0xcc),_0x2f358b),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3a8a3e,_0x5efb97){const _0x5695b2=_0x5bb9af;return parseFloat(_0x3a8a3e[_0x5695b2(0xa5)](_0x5efb97));}function logging(_0x619578,_0x1e271f=''){const _0x3a2386=_0x5bb9af;console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x3a2386(0x11e)+_0x619578,_0x1e271f);}function getServerTime(){const _0x472fb6=_0x5bb9af,_0x480461=new Date();return _0x480461['getFullYear']()+'/'+(_0x480461[_0x472fb6(0x106)]()+0x1)['toString']()[_0x472fb6(0x148)](0x2,'0')+'/'+_0x480461[_0x472fb6(0xee)]()['toString']()[_0x472fb6(0x148)](0x2,'0')+'\x20'+_0x480461[_0x472fb6(0x184)]()[_0x472fb6(0xbe)]()[_0x472fb6(0x148)](0x2,'0')+':'+_0x480461[_0x472fb6(0x125)]()[_0x472fb6(0xbe)]()['padStart'](0x2,'0')+':'+_0x480461[_0x472fb6(0xd7)]()[_0x472fb6(0xbe)]()[_0x472fb6(0x148)](0x2,'0');}function getTimeStamp(){const _0x5565a3=_0x5bb9af,_0x1321a0=shiftedTime();return _0x1321a0[_0x5565a3(0x17f)]()+'/'+(_0x1321a0[_0x5565a3(0x106)]()+0x1)[_0x5565a3(0xbe)]()['padStart'](0x2,'0')+'/'+_0x1321a0[_0x5565a3(0xee)]()[_0x5565a3(0xbe)]()[_0x5565a3(0x148)](0x2,'0')+'\x20'+_0x1321a0['getHours']()[_0x5565a3(0xbe)]()[_0x5565a3(0x148)](0x2,'0')+':'+_0x1321a0[_0x5565a3(0x125)]()['toString']()['padStart'](0x2,'0')+':'+_0x1321a0['getSeconds']()[_0x5565a3(0xbe)]()['padStart'](0x2,'0');}function getDate(){const _0x2ee300=_0x5bb9af,_0x2a6a52=shiftedTime();return _0x2a6a52['getFullYear']()+'/'+(_0x2a6a52['getMonth']()+0x1)['toString']()[_0x2ee300(0x148)](0x2,'0')+'/'+_0x2a6a52[_0x2ee300(0xee)]()['toString']()[_0x2ee300(0x148)](0x2,'0');}function getHour(){const _0x8fc6a1=_0x5bb9af,_0x182162=shiftedTime();return _0x182162[_0x8fc6a1(0x184)]()[_0x8fc6a1(0xbe)]()[_0x8fc6a1(0x148)](0x2,'0');}function sleep(_0x527672){return new Promise(_0x26bf68=>setTimeout(_0x26bf68,_0x527672));}function shiftedTime(){const _0x50fd67=_0x5bb9af,_0x55b450=new Date();let _0x1c4086=_0x55b450;if(config&&config[_0x50fd67(0xa2)]!==0x0)_0x1c4086=fns[_0x50fd67(0xc6)](_0x55b450,{'hours':config[_0x50fd67(0xa2)]});return _0x1c4086;}