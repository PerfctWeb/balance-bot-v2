const _0x1a675f=_0x4050;(function(_0x4f6e7b,_0xc978ab){const _0x226a75=_0x4050,_0x5c5edb=_0x4f6e7b();while(!![]){try{const _0x34c12f=-parseInt(_0x226a75(0x1de))/0x1+-parseInt(_0x226a75(0x226))/0x2*(-parseInt(_0x226a75(0x227))/0x3)+parseInt(_0x226a75(0x19c))/0x4*(parseInt(_0x226a75(0xc6))/0x5)+parseInt(_0x226a75(0xbe))/0x6*(parseInt(_0x226a75(0x17e))/0x7)+parseInt(_0x226a75(0x119))/0x8*(-parseInt(_0x226a75(0x11f))/0x9)+-parseInt(_0x226a75(0xde))/0xa+parseInt(_0x226a75(0x14b))/0xb*(parseInt(_0x226a75(0x1f9))/0xc);if(_0x34c12f===_0xc978ab)break;else _0x5c5edb['push'](_0x5c5edb['shift']());}catch(_0x2e8d53){_0x5c5edb['push'](_0x5c5edb['shift']());}}}(_0x4054,0x21615));const _0x473d78=function(){let _0x53d176=!![];return function(_0x12733a,_0x539092){const _0x29609f=_0x53d176?function(){const _0x59f914=_0x4050;if(_0x539092){const _0x1a74cf=_0x539092[_0x59f914(0xcb)](_0x12733a,arguments);return _0x539092=null,_0x1a74cf;}}:function(){};return _0x53d176=![],_0x29609f;};}(),_0x5d4105=_0x473d78(this,function(){const _0x58d265=_0x4050;return _0x5d4105[_0x58d265(0x10a)]()[_0x58d265(0x1f2)](_0x58d265(0x12f))[_0x58d265(0x10a)]()['constructor'](_0x5d4105)['search'](_0x58d265(0x12f));});_0x5d4105();'use strict';const ccxt=require('ccxt')[_0x1a675f(0x17a)],low=require(_0x1a675f(0xd0)),FileSync=require(_0x1a675f(0x22b)),fs=require('fs'),fns=require(_0x1a675f(0x232)),Crypt=require('hybrid-crypto-js')[_0x1a675f(0x130)],util=require(_0x1a675f(0x18f)),argv=require(_0x1a675f(0x1a6))(process['argv']['slice'](0x2))[_0x1a675f(0x12d)],path=require('path');function _0x4050(_0x4eb2e4,_0x430e61){const _0x4a6886=_0x4054();return _0x4050=function(_0x5d4105,_0x473d78){_0x5d4105=_0x5d4105-0xb2;let _0x405481=_0x4a6886[_0x5d4105];return _0x405481;},_0x4050(_0x4eb2e4,_0x430e61);}let exchange;global[_0x1a675f(0x1b6)]={},global[_0x1a675f(0xe2)]={};const exceptions={'binance':[_0x1a675f(0x150),_0x1a675f(0xf7),'XEM/BUSD',_0x1a675f(0xf8),_0x1a675f(0x1a7)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1a675f(0x18e)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1a675f(0x22e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0x4054(){const _0x1fbab0=['substring','222335PuAszJ','Avoiding\x20continuous\x20order\x20attempts','none','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','portfolio','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','restart','added','balancing\x20resumed','storeConfiguration','Bybit','./config/','getCoinNumber()','\x20closed\x20the\x20connection','bb-secure.json','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','offset','getStartingBalances','stringify','ordertype','search','DDoSProtection','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','slice','watchTrades','\x20|\x20lock\x20orders:\x20','getHours','1764dMVLpR','-results.json','\x20API\x20secret\x20is\x20invalid','Exchange','\x20|\x20Exchange:\x20','ORDERS.UNLOCKING','has','error','Portfolio\x20change\x20detected:\x20','type','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fetchClosedOrders','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Error:\x20Invalid\x20argument\x20','basecoin','round','Initializing\x20coin\x20results','showConfig','trade',':\x20Bot\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','toLowerCase','BTC','2\x20-\x20Orders\x20unlocked','bb-settings.json','exchanges','market','must\x20be\x20greater\x20than\x20minimum\x20amount','timestamp','Fees\x20|\x20currency:\x20','2\x20-\x20FILLED\x20known\x20order:\x20','Error\x20while\x20deleting\x20files:\x20','findIndex','\x20-\x20bot\x20not\x20started','Fee\x20discount\x20refund\x20detected:\x20','splice','toUpperCase','2.3.5','\x20not\x20responding','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','fees','max','push','\x20not\x20available','2\x20-\x20FILLED\x20unknown\x20order:\x20','86550SdfLZu','3QURmdA','cost','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','Resetting\x20coin\x20results:\x20','lowdb/adapters/FileSync',':\x20timer\x20>','cloneDeep','UNLOCKED','format','headless','spot','date-fns','net-fiat','yyyy-MM-dd\x27T\x27HH:mm:ss','excluded','length','coin-loading-progress','3\x20-\x20handling\x20FILLED\x20order:\x20','No\x20more\x20open\x20orders\x20-\x20','limit-high','EUR','timeshift','ask','includes','colorscheme','warning','Limit\x20(low-margin)','placeOrder','changes','\x20hour','getMonth','recreate','highest','cancelOrder','isEqual','API-key\x20format\x20invalid','Binance','abs','startdate','/backup/','usd','-performance.json','amount','coin','rightTxt','decrypt','storeHeadless','initclient','netoffset','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','1214502LMPsvI','\x20change','defaults','number','exchange','replace','watchTransactions','final','124090nSdHkS','bot','botname','</pre>','balances','apply','ExchangeNotAvailable','BUSD','privateKey','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','lowdb','\x20has\x20a\x2024h\x20drop\x20of\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','bot-','Executing\x20exchange\x20reload','UNLOCKING','Order\x20amount\x20is\x20invalid:\x20','limits','getMinutes','sha256','\x20metrics:</b>\x20\x0a\x0a','limit-low','Order\x20filled:\x20','yyyy/MM/dd','1934670aShXSZ','Unknown\x20error\x20occured','\x20minutes\x20-\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','change','cancel','limit','min','USD','existsSync','cancelLoading','filter','startsWith','ID:\x20','\x20API\x20key\x20is\x20invalid','net-basecoin','breakeven','1\x20-\x20Unlock\x20orders','date','leftTxt','emojibuy','mkdirSync','price','unlinkSync','customId','HOT/BTC','NANO/','percentage','toggleBotMode','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sendMetricsTelegram','reverse','write','loadMarkets','2\x20-\x20Validate\x20orders:\x20','Reset\x20|\x20','no\x20additional\x20symbols','fetchTicker','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','valid','starting-balances','padStart','open','toString','createOrder','recovery','debug','liquidity','removed','\x20exchange','function','milliseconds','ORDERS.LOCKED','remainingSymbols','floor','showname','\x20orders\x20in\x20less\x20than\x20','1\x20-\x20FILLED:\x20','69808NiXBCz','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','success','writeFile','eur','deleteHistoryAlerts','108cimnuQ','settings','starting-balance-','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20|\x20Custom\x20ID:\x20','/USD','no\x20open\x20orders','************','canceled','createWriteStream','full','<pre>','delta','<b>Bot\x20','argv','fetchBalance','(((.+)+)+)+$','Crypt','ETH','watchOrders','001','Invalid\x20API\x20key\x20or\x20secret\x20entered','2.6.0','getDate','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Limit\x20(high-margin)','close','status','toFixed','openOrders','InvalidOrder','indexOf','args','MIN_NOTIONAL','/output-000.log','/EUR','1\x20-\x20Handle\x20open\x20orders','\x20minutes','Uncaught\x20Exception:','average','event-history','Pausing\x20for\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Manual\x20balancing\x20required','15939NhyhSd','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','split','Cooldown\x20ended\x20-\x20balancing\x20resumed','DAI/','getOpenOrders()','initial','value','performance','sells','configuration-stored','send','filled','Saving\x20configuration','data','fromCodePoint','Failed\x20to\x20load\x20coin\x20data\x20for\x20','symbol','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','order','emojisell','log','buy','find','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getPortfolio(2)','BNB/','fetchOpenOrders','currency','change24h','page','string','coins','Waited\x20','%\x20(','version','ongoing','-------------------------------\x0a','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','sell','USDT','event','Net\x20effect','timeout','distribution','2.5.0','pro','random','total','AuthenticationError','7BWXZqH','fetchTickers','startprice','add','\x20portfolio:</b>\x20\x0a\x0a','exec','getPortfolio','entries','enabled','\x20>\x20[DEBUG]\x20','autoliquidity','sort','emitHistory','side','./version.json','apiSecret','freeze','util','orderId','differenceInSeconds','getPortfolio(0)','Initiating\x20exchange\x20reload','join','onepagemode','BNB','apiKey','threshold','keys','\x20value','uncaughtException','32PbAImA','recent20','cancelOrders()','\x20|\x20Error\x20details:\x20','sortBy','buys','LOCKED','<b>','\x20order:\x20','startnumber','yargs/yargs','YOYOW/','parse','InvalidNonce','Order\x20is\x20invalid:\x20','Transaction\x20detection\x20blocked','assign','2\x20-\x20Handled\x20open\x20orders','target','***','recreateCoinResults()','cooldown','red_yellow_blue','last','logs','getFullYear','ticker','amountToPrecision','\x20|\x20highest:\x20','loading-canceled','remove','fee','shift','\x20|\x20','realized','fiat','\x20>\x20','InsufficientFunds','parseISO','Invalid\x20quantity','botID','storeFiat','orderstatus','apiPassword','options','getTime','password','bots','closed','symbols','time','get','progress','datetime','set','configuration','forEach','message','-events.json','./logs/','loadSymbols()','running',',\x20must\x20be\x20a\x203\x20digit\x20number','placeOrder()','kill'];_0x4054=function(){return _0x1fbab0;};return _0x4054();}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x1a675f(0x18c))[_0x1a675f(0x16f)],botID=process[_0x1a675f(0x12d)][0x2]||_0x1a675f(0x133),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x1a675f(0x161)](_0x1a675f(0x206)+botID+_0x1a675f(0x1da)),killBot());const userID=process[_0x1a675f(0x12d)][0x3]||'',configpath=userID?_0x1a675f(0x1e9)+userID+'/':_0x1a675f(0x1e9),logspath=userID?_0x1a675f(0x1d7)+userID+'/':'./logs/',loggerfile=fs[_0x1a675f(0x128)](logspath+_0x1a675f(0x141),{'flags':'a'});!fs[_0x1a675f(0xe7)](configpath)&&fs[_0x1a675f(0xf3)](configpath);!fs[_0x1a675f(0xe7)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x1a675f(0xd3)+botID+'-config.json',logfile=configpath+_0x1a675f(0xd3)+botID+_0x1a675f(0x1d6),performancefile=configpath+_0x1a675f(0xd3)+botID+'-performance.json',coinresultsfile=configpath+_0x1a675f(0xd3)+botID+'-results.json',settingsfile=configpath+_0x1a675f(0x211),securefile=configpath+_0x1a675f(0x1ec),configbackuppath=configpath+_0x1a675f(0xb3),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1a675f(0xc0)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1a675f(0xc0)]({'data':[],'version':serverversion})[_0x1a675f(0xfe)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1a675f(0xc0)]({'bot':[],'version':serverversion})[_0x1a675f(0xfe)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1a675f(0xc0)]({'coins':[],'version':serverversion})[_0x1a675f(0xfe)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1a675f(0xd9),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xc6c1c3=>{const _0x284d43=_0x1a675f;console[_0x284d43(0x161)](_0xc6c1c3);},'simple':_0x47c188=>{const _0x24f085=_0x1a675f;console[_0x24f085(0x161)](_0x47c188),loggerfile[_0x24f085(0xfe)](util[_0x24f085(0x22f)](_0x47c188)+'\x0a');},'full':async(_0x5c5ee4,_0x182912='')=>{const _0x25fed9=_0x1a675f;let _0x4ed115;if(config[_0x25fed9(0x116)])_0x4ed115=getTimeStamp()+':\x20'+config[_0x25fed9(0xc8)]+_0x25fed9(0x1c0)+_0x5c5ee4;else _0x4ed115=getTimeStamp()+':\x20Bot\x20'+botID+_0x25fed9(0x1c0)+_0x5c5ee4;console[_0x25fed9(0x161)](_0x4ed115),loggerfile[_0x25fed9(0xfe)](util[_0x25fed9(0x22f)](_0x4ed115)+'\x0a'),_0x182912&&(console[_0x25fed9(0x161)](_0x182912),loggerfile[_0x25fed9(0xfe)](util[_0x25fed9(0x22f)](_0x182912)+'\x0a'));},'debug':async(_0x1fa95,_0x398643='')=>{const _0x42bcac=_0x1a675f;let _0x59e01c;if(config[_0x42bcac(0x116)])_0x59e01c=getTimeStamp()+':\x20'+config[_0x42bcac(0xc8)]+_0x42bcac(0x187)+_0x1fa95;else _0x59e01c=getTimeStamp()+_0x42bcac(0x20c)+botID+'\x20>\x20[DEBUG]\x20'+_0x1fa95;if(debugging)console['log'](_0x59e01c);loggerfile[_0x42bcac(0xfe)](util['format'](_0x59e01c)+'\x0a');if(_0x398643){if(debugging)console[_0x42bcac(0x161)](_0x398643);loggerfile[_0x42bcac(0xfe)](util['format'](_0x398643)+'\x0a');}}};process['on'](_0x1a675f(0x19b),function(_0x1fa965){const _0x4a7558=_0x1a675f;logger['debug'](_0x4a7558(0x145),_0x1fa965);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x1a675f(0x23c)]);settings[_0x1a675f(0x195)]!=config['onepagemode']&&updateOnepagemode(settings[_0x1a675f(0x195)]);process[_0x1a675f(0x157)]({'started':'running'},_0x3901cc=>{}),initializeProcessListeners();function proxyEmit(_0x4cc765,_0x44dcbd=null){process['send']({'function':_0x4cc765,'args':_0x44dcbd},_0x525f71=>{});}function initializeProcessListeners(){const _0x2b1839=_0x1a675f;process['on'](_0x2b1839(0x1d5),_0x30ac2f=>{const _0x3e5c74=_0x2b1839;switch(Object[_0x3e5c74(0x199)](_0x30ac2f)[0x0]){case _0x3e5c74(0x23c):_0x30ac2f[_0x3e5c74(0x23c)]!=undefined&&(settings[_0x3e5c74(0x23c)]=_0x30ac2f[_0x3e5c74(0x23c)],updateTimeshift(settings[_0x3e5c74(0x23c)]));break;case'onepagemode':_0x30ac2f[_0x3e5c74(0x195)]!=undefined&&(settings[_0x3e5c74(0x195)]=_0x30ac2f[_0x3e5c74(0x195)],updateOnepagemode(settings[_0x3e5c74(0x195)]));break;case _0x3e5c74(0x1cb):_0x30ac2f[_0x3e5c74(0x1cb)]!=undefined&&(bots=JSON['parse'](_0x30ac2f[_0x3e5c74(0x1cb)]),proxyEmit('bots',bots));break;case _0x3e5c74(0x111):switch(_0x30ac2f[_0x3e5c74(0x111)]){case _0x3e5c74(0xbb):initclient();break;case _0x3e5c74(0xfa):toggleBotMode();break;case _0x3e5c74(0x18a):emitHistory(_0x30ac2f['args']);break;case _0x3e5c74(0x11e):deleteHistoryAlerts(_0x30ac2f[_0x3e5c74(0x13f)]);break;case _0x3e5c74(0x184):getPortfolio(_0x30ac2f[_0x3e5c74(0x13f)]);break;case _0x3e5c74(0x1e7):storeConfiguration(_0x30ac2f['args']);break;case _0x3e5c74(0xba):storeHeadless(_0x30ac2f['args']);break;case _0x3e5c74(0x1c5):storeFiat(_0x30ac2f[_0x3e5c74(0x13f)]);break;case'resetHistory':resetHistory();break;case _0x3e5c74(0x1ef):getStartingBalances(getNormalizedPerformance());break;case _0x3e5c74(0x242):placeOrder(_0x30ac2f[_0x3e5c74(0x13f)]);break;case _0x3e5c74(0xe8):cancelLoading();break;case _0x3e5c74(0x20a):showConfig();break;case _0x3e5c74(0xfc):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x1bda72=null,_0x3f820a=![]){const _0x12fdf2=_0x1a675f;logger[_0x12fdf2(0x10d)](_0x12fdf2(0x101)+(_0x1bda72&&_0x1bda72[_0x12fdf2(0x236)]>0x0?'additional\x20symbols\x20'+_0x1bda72['join'](','):_0x12fdf2(0x102))+'\x20|\x20'+(_0x3f820a?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x12fdf2(0x1fd)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x3f820a)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x12fdf2(0x197)]!=''&&config[_0x12fdf2(0x197)]!=_0x12fdf2(0x1af)){if(_0x3f820a){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1ae244){handleErrorNoStop(_0x1ae244,_0x12fdf2(0x1d8));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1bda72);const _0x47a4dd=await getCoins();[currentCoins,currentCoinsAll]=_0x47a4dd,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x12fdf2(0x236)]==0x0&&allOpenOrders[_0x12fdf2(0x236)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x52ada9=_0x1a675f;exchangeStopped=!![],await exchange[_0x52ada9(0x139)]();}async function reloadExchange(){const _0xbeae7=_0x1a675f;logger[_0xbeae7(0x10d)](_0xbeae7(0x193));while(lockOrders!=ORDERS[_0xbeae7(0x22e)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0xbeae7(0x10d)](_0xbeae7(0xd4)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4f40a8=config['exchange'],_0x329108=config['apiKey'],_0x209090=config[_0x1a675f(0x18d)],_0x26cddd=config[_0x1a675f(0x1c7)]){const _0x1fea6a=_0x1a675f;exchange&&await stopExchange();!supportedExchanges()[_0x1fea6a(0x23e)](_0x4f40a8)&&(logHistory(_0x1fea6a(0x200),_0x1fea6a(0x220)+_0x4f40a8+_0x1fea6a(0x110)),killBot());const _0x20130a=ccxt[_0x4f40a8[_0x1fea6a(0x20e)]()];exchange=new _0x20130a({'apiKey':_0x329108,'secret':_0x209090,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x4f40a8==_0x1fea6a(0x1e8)&&(exchange['options']={'defaultType':_0x1fea6a(0x231),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x26cddd)exchange[_0x1fea6a(0x1ca)]=_0x26cddd;}function setStableCoins(){const _0x51879f=_0x1a675f;let _0x2f307f=config[_0x51879f(0x207)]==_0x51879f(0x131)?'ETH':'BTC',_0x2ddf09=!allSymbols['includes'](_0x2f307f+_0x51879f(0x124))?'USDT':_0x51879f(0xe6),_0x4c0932=!allSymbols[_0x51879f(0x23e)](_0x2f307f+_0x51879f(0x142))?_0x2ddf09:_0x51879f(0x23b);stablecoins={'eur':{'coin':''+_0x2f307f+_0x4c0932,'symbol':_0x2f307f+'/'+_0x4c0932},'usd':{'coin':''+_0x2f307f+_0x2ddf09,'symbol':_0x2f307f+'/'+_0x2ddf09}};}async function initwsCcxt(_0x5bf0d7){const _0x3a1c71=_0x1a675f;_0x5bf0d7==null&&(_0x5bf0d7=[],config[_0x3a1c71(0x1e2)][_0x3a1c71(0x1d4)](_0x21d9f5=>{const _0x14f793=_0x3a1c71;if(!_0x21d9f5[_0x14f793(0x235)]&&_0x21d9f5[_0x14f793(0xb7)]!=config[_0x14f793(0x207)])_0x5bf0d7[_0x14f793(0x223)](_0x21d9f5['symbol']);}));if(!_0x5bf0d7['includes'](stablecoins[_0x3a1c71(0x11d)][_0x3a1c71(0x15d)]))_0x5bf0d7['push'](stablecoins[_0x3a1c71(0x11d)][_0x3a1c71(0x15d)]);if(!_0x5bf0d7[_0x3a1c71(0x23e)](stablecoins[_0x3a1c71(0xb4)][_0x3a1c71(0x15d)]))_0x5bf0d7[_0x3a1c71(0x223)](stablecoins['usd'][_0x3a1c71(0x15d)]);if(config[_0x3a1c71(0xc2)][_0x3a1c71(0xea)](_0x3a1c71(0x24b))){if(!_0x5bf0d7['includes'](_0x3a1c71(0x166)+config[_0x3a1c71(0x207)]))_0x5bf0d7[_0x3a1c71(0x223)](_0x3a1c71(0x166)+config[_0x3a1c71(0x207)]);}loadCoins(_0x5bf0d7);const _0x26ecc4=async _0x3a5f92=>{const _0xeafa18=_0x3a1c71,_0x3d27ad=await exchange['fetchTicker'](_0x3a5f92);global[_0xeafa18(0x1b6)][noslash(_0x3d27ad['symbol'])]=_0x3d27ad[_0xeafa18(0x1b3)];while(!![]){if(!botPaused)try{const _0x236afb=await exchange[_0xeafa18(0x1f6)](_0x3a5f92);global['ticker'][noslash(_0x236afb[0x0][_0xeafa18(0x15d)])]=_0x236afb[0x0][_0xeafa18(0xf4)],await sleep(0x3e8);}catch(_0x4d30e0){if(!exchangeStopped)await handleError(_0x4d30e0,_0xeafa18(0x1f6),_0x3a5f92);}else await sleep(0x64);}},_0xff5034=async _0x157a9c=>{const _0x199761=_0x3a1c71;while(!![]){if(!botPaused)try{const _0x15ae08=await exchange[_0x199761(0x103)](_0x157a9c);global['change'][_0x15ae08[_0x199761(0x15d)]]=_0x15ae08[_0x199761(0xf9)],await sleep(0x3c*0x3e8);}catch(_0x32eb5a){if(!exchangeStopped)await handleError(_0x32eb5a,'fetchTickers',_0x157a9c);}else await sleep(0x64);}},_0x1a92cc=async()=>{const _0x346c74=_0x3a1c71;while(!![]){if(!botPaused)try{const _0x55fa5b=await exchange['watchOrders']();_0x55fa5b[_0x346c74(0x1d4)](_0x2ee228=>{updateNumberCoinsCcxt(_0x2ee228);});}catch(_0x24dcc7){if(!exchangeStopped)await handleError(_0x24dcc7,_0x346c74(0x132));}else await sleep(0x64);}};_0x5bf0d7['forEach'](_0x231595=>{_0x26ecc4(_0x231595),_0xff5034(_0x231595);}),!wsEventsSet&&(wsEventsSet=!![],_0x1a92cc(),watchTransactions());}async function watchTransactions(){const _0x26e4cd=_0x1a675f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x40255f=await getCoins(),[_0x57e99e,_0xb55506]=_0x40255f;let _0x1bab42=[];currentCoins[_0x26e4cd(0x1d4)](_0x63bcd4=>{const _0x470a00=_0x26e4cd,_0x3f5531=_0x57e99e[_0x470a00(0x163)](_0x5bd504=>_0x5bd504[_0x470a00(0xb7)]==_0x63bcd4[_0x470a00(0xb7)]);_0x3f5531&&(_0x63bcd4[_0x470a00(0xc1)]!=_0x3f5531[_0x470a00(0xc1)]&&_0x1bab42[_0x470a00(0x223)]({'coin':_0x63bcd4[_0x470a00(0xb7)],'symbol':_0x63bcd4[_0x470a00(0x15d)],'number':Number(formatResult(_0x3f5531[_0x470a00(0xc1)]-_0x63bcd4['number'],0x8))}));});if(_0x1bab42[_0x26e4cd(0x236)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x26e4cd(0x216)+lastFees['currency']+_0x26e4cd(0x1b8)+lastFees[_0x26e4cd(0x247)]);if(!lastFees['currency']||_0x1bab42[0x0][_0x26e4cd(0xb7)]!=lastFees['currency']||_0x1bab42[0x0][_0x26e4cd(0xc1)]>lastFees[_0x26e4cd(0x247)]){let _0x54da38;if(_0x1bab42[0x0][_0x26e4cd(0xb7)]!=config[_0x26e4cd(0x207)]){let _0x26776d=global[_0x26e4cd(0x1b6)][noslash(_0x1bab42[0x0][_0x26e4cd(0x15d)])];_0x54da38=_0x1bab42[0x0][_0x26e4cd(0xfd)]?0x1/_0x26776d:_0x26776d;}else _0x54da38=0x1;_0x1bab42[0x0][_0x26e4cd(0xf4)]=_0x54da38,delete _0x1bab42[0x0][_0x26e4cd(0x15d)];let _0xc0994f=[],_0x23e424=[...config[_0x26e4cd(0x10e)]]||[],_0x62c5a3=config[_0x26e4cd(0x10e)];_0x23e424[_0x26e4cd(0x189)]((_0x103c6b,_0x5a4bf3)=>_0x103c6b['date']>_0x5a4bf3['date']?-0x1:_0x5a4bf3[_0x26e4cd(0xf0)]>_0x103c6b[_0x26e4cd(0xf0)]?0x1:0x0);const _0x4a7e77=getDate();if(_0x23e424[0x0]){const _0x1be0b1=fns['parse'](_0x23e424[0x0][_0x26e4cd(0xf0)],_0x26e4cd(0xdd),new Date()),_0x4994f4=fns['parse'](_0x4a7e77,'yyyy/MM/dd',new Date());if(fns[_0x26e4cd(0x249)](_0x1be0b1,_0x4994f4)){_0xc0994f=_0x23e424[0x0]['changes'];const _0x3b3f4d=_0xc0994f[_0x26e4cd(0x163)](_0x553888=>_0x553888[_0x26e4cd(0xb7)]==_0x1bab42[0x0][_0x26e4cd(0xb7)]);_0x3b3f4d?(_0x3b3f4d[_0x26e4cd(0xc1)]+=_0x1bab42[0x0][_0x26e4cd(0xc1)],_0x3b3f4d['number']==0x0&&(_0xc0994f=_0xc0994f[_0x26e4cd(0xe9)](_0x1fb5b8=>{const _0x1e3e68=_0x26e4cd;return _0x1fb5b8[_0x1e3e68(0xb7)]!=_0x1bab42[0x0]['coin'];}))):_0xc0994f[_0x26e4cd(0x223)](_0x1bab42[0x0]);const _0xd05c28=_0x62c5a3[_0x26e4cd(0x163)](_0x287f9f=>_0x287f9f['date']==_0x4a7e77);_0xd05c28[_0x26e4cd(0x243)]=_0xc0994f;}else _0x62c5a3[_0x26e4cd(0x223)]({'date':_0x4a7e77,'changes':[_0x1bab42[0x0]]});}const _0x792b1d=_0x62c5a3[_0x26e4cd(0x163)](_0x460b66=>_0x460b66[_0x26e4cd(0xf0)]==_0x4a7e77);if(_0x792b1d){let _0x11b3cf=!![];_0x792b1d[_0x26e4cd(0x243)][_0x26e4cd(0x1d4)](_0x172402=>{const _0x19f8d1=_0x26e4cd;if(_0x172402[_0x19f8d1(0xc1)]!=0x0)_0x11b3cf=![];}),_0x11b3cf&&(_0x62c5a3=_0x62c5a3[_0x26e4cd(0xe9)](_0x19f23c=>{return _0x19f23c['date']!=_0x4a7e77;}));}let _0x427f86=dbConfig[_0x26e4cd(0x1cf)](_0x26e4cd(0xc7))['find']({'botID':botID})[_0x26e4cd(0x153)]();_0x427f86&&(dbConfig[_0x26e4cd(0x1cf)]('bot')[_0x26e4cd(0x163)]({'botID':botID})['assign']({'liquidity':_0x62c5a3})[_0x26e4cd(0xfe)](),config['liquidity']=_0x62c5a3),logHistory(_0x26e4cd(0x11b),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x1bab42[0x0][_0x26e4cd(0xc1)])+'\x20'+_0x1bab42[0x0][_0x26e4cd(0xb7)]+'\x20'+(_0x1bab42[0x0][_0x26e4cd(0xc1)]>0x0?_0x26e4cd(0x1e5):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x26e4cd(0x10d)](_0x26e4cd(0x21b)+Math[_0x26e4cd(0x24c)](_0x1bab42[0x0][_0x26e4cd(0xc1)])+'\x20'+_0x1bab42[0x0][_0x26e4cd(0xb7)]+'\x20'+(_0x1bab42[0x0][_0x26e4cd(0xc1)]>0x0?_0x26e4cd(0x1e5):'removed'));transactionDetected=!![],currentCoins=_0x57e99e,currentCoinsAll=_0xb55506;}else logger[_0x26e4cd(0x10d)](_0x26e4cd(0x201)+Math[_0x26e4cd(0x24c)](_0x1bab42[0x0]['number'])+'\x20'+_0x1bab42[0x0][_0x26e4cd(0xb7)]+'\x20'+(_0x1bab42[0x0][_0x26e4cd(0xc1)]>0x0?'added':_0x26e4cd(0x10f))+_0x26e4cd(0xbd)),currentCoins=_0x57e99e,currentCoinsAll=_0xb55506;}await sleep(watchTransactionsInterval);}catch(_0x315041){if(!exchangeStopped)await handleError(_0x315041,_0x26e4cd(0xc4));}else await sleep(0x64);}}async function loadSymbols(_0x4dad3d=config[_0x1a675f(0xc2)],_0x13b740=![]){const _0x39fd2a=_0x1a675f;if(allSymbols&&!_0x13b740)return;try{markets=await exchange[_0x39fd2a(0xff)](),allSymbols=exchange[_0x39fd2a(0x1cd)][_0x39fd2a(0xe9)](_0x2315a1=>{const _0x57ee62=_0x39fd2a;let _0x3ba006=![];const _0x27a49f=exceptions[_0x4dad3d[_0x57ee62(0x20e)]()]||[];return _0x27a49f['forEach'](_0x1cbd97=>{const _0xd0ab47=_0x57ee62;if(_0x2315a1[_0xd0ab47(0x23e)](_0x1cbd97))_0x3ba006=!![];}),!_0x3ba006;});}catch(_0x324162){throw _0x324162;}}async function initclient(){const _0x2cac58=_0x1a675f;emitLoadingProgress(),proxyEmit(_0x2cac58(0x1d3),emittedConfiguration()),proxyEmit(_0x2cac58(0x212),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2cac58(0xca),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x330cca=getNormalizedPerformance();emitPerformance(_0x330cca),getStartingBalances(_0x330cca);}async function toggleBotMode(){const _0x3a2d35=_0x1a675f;let _0x3c543d=dbConfig[_0x3a2d35(0x1cf)](_0x3a2d35(0xc7))['find']({'botID':botID})[_0x3a2d35(0x153)]();if(_0x3c543d){const _0x16e5ee=!_0x3c543d[_0x3a2d35(0x230)];dbConfig[_0x3a2d35(0x1cf)](_0x3a2d35(0xc7))[_0x3a2d35(0x163)]({'botID':botID})[_0x3a2d35(0x1ac)]({'headless':_0x16e5ee})[_0x3a2d35(0xfe)](),config[_0x3a2d35(0x230)]=_0x16e5ee,proxyEmit(_0x3a2d35(0x1d3),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x37a5b6=_0x1a675f;process[_0x37a5b6(0x157)]({'updatebotmanager':!![]},_0x22cd00=>{});}async function loadCoins(_0x22fe81){const _0xa357cb=_0x1a675f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3482ee,_0x3d430c=0x0,_0x5dbe3a=0x0;_0x22fe81['forEach'](_0x225e8c=>{const _0x91c89=_0x4050;loading[_0x91c89(0x114)][_0x91c89(0x223)](_0x225e8c);}),loadingCanceled=![];let _0x2e9c5e=![];while(_0x3482ee!=_0x22fe81[_0xa357cb(0x236)]){_0x3482ee=0x0,_0x22fe81[_0xa357cb(0x1d4)](_0x34659f=>{const _0xba2f4b=_0xa357cb;if(global['ticker'][noslash(_0x34659f)]){loading[_0xba2f4b(0x114)]=loading[_0xba2f4b(0x114)]['filter'](_0x2ee143=>_0x2ee143!=_0x34659f);if(!watchedSymbols[_0xba2f4b(0x23e)](_0x34659f))watchedSymbols[_0xba2f4b(0x223)](_0x34659f);_0x3482ee++;}}),loading[_0xa357cb(0x1d0)]=Math['round'](_0x3482ee/_0x22fe81[_0xa357cb(0x236)]*0x64);loading[_0xa357cb(0x1d0)]!=0x64&&(_0x5dbe3a>0x1e*0x5&&(loading[_0xa357cb(0x177)]=!![],emitLoadingProgress()),_0x5dbe3a>0x78*0x5&&!_0x2e9c5e&&(loading['cancel']=!![],emitLoadingProgress(),_0x2e9c5e=!![],logHistory('error',_0xa357cb(0x15c)+loading[_0xa357cb(0x114)][_0xa357cb(0x194)](',\x20')+_0xa357cb(0x21a)),logHistory(_0xa357cb(0x200),_0xa357cb(0x148)+loadCoinsRetryInterval/0xea60+_0xa357cb(0x11a)),pidCoinReloading=setTimeout(()=>{const _0x4111=_0xa357cb;process[_0x4111(0x157)]({'stop':'restart'},_0x59c284=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0xa357cb(0xe3)]=!![],emitLoadingProgress();break;}else _0x3482ee!=_0x3d430c&&(_0x3d430c=_0x3482ee,emitLoadingProgress()),_0x5dbe3a++,await sleep(0xc8);}_0x3482ee==_0x22fe81['length']&&(coinsLoaded=!![],process['send']({'status':_0xa357cb(0x186),'live':_0xa357cb(0x1d9)},_0xeeaeea=>{}),_0x2e9c5e&&logHistory(_0xa357cb(0x11b),_0xa357cb(0xd2)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x487728=_0x1a675f;proxyEmit(_0x487728(0x1d3),{...emittedConfiguration(),'configstate':_0x487728(0x1b9)});}function emitLoadingProgress(){const _0x2ebaeb=_0x1a675f;proxyEmit(_0x2ebaeb(0x237),loading);}async function getFiat(){const _0x3603d5=_0x1a675f;let _0x487006=global[_0x3603d5(0x1b6)][stablecoins[_0x3603d5(0x11d)][_0x3603d5(0xb7)]],_0x39e237=global[_0x3603d5(0x1b6)][stablecoins[_0x3603d5(0xb4)][_0x3603d5(0xb7)]];return{'eur':Number(_0x487006),'usd':Number(_0x39e237)};}function capitalize(_0x8f48b6){const _0x153602=_0x1a675f;return _0x8f48b6[_0x153602(0x1dd)](0x0,0x1)[_0x153602(0x21d)]()+_0x8f48b6['substring'](0x1);}function supportedExchanges(){const _0x2ff41d=_0x1a675f,_0x3958cc=['ws',_0x2ff41d(0x17f),'fetchTicker',_0x2ff41d(0x1f6),_0x2ff41d(0x132),_0x2ff41d(0x248),_0x2ff41d(0x10b),_0x2ff41d(0x167),_0x2ff41d(0x204),_0x2ff41d(0x12e)];let _0x2e3c5b=[],_0x64fc2e=[],_0xda3577=ccxt['exchanges'];_0xda3577[_0x2ff41d(0x1d4)](_0x2bb32a=>{const _0x1c271b=_0x2ff41d;try{const _0x57eb1c=new ccxt[_0x2bb32a]();if(_0x57eb1c[_0x1c271b(0x1ff)]['ws'])_0x64fc2e[_0x1c271b(0x223)](_0x57eb1c);}catch(_0x7934c8){}}),_0x64fc2e[_0x2ff41d(0x1d4)](_0x28e015=>{const _0x2d13b0=_0x2ff41d;let _0x19df9d=0x0;_0x3958cc[_0x2d13b0(0x1d4)](_0x4dded6=>{const _0x236ff3=_0x2d13b0;_0x4dded6 in _0x28e015['has']&&_0x28e015[_0x236ff3(0x1ff)][_0x4dded6]&&_0x19df9d++;}),_0x19df9d==_0x3958cc[_0x2d13b0(0x236)]&&_0x2e3c5b[_0x2d13b0(0x223)](capitalize(_0x28e015['id']));});let _0x392087=[];return _0xda3577[_0x2ff41d(0x1d4)](_0x552b39=>{_0x552b39=capitalize(_0x552b39);if(!_0x2e3c5b['includes'](_0x552b39))_0x392087['push'](_0x552b39);}),_0x2e3c5b;}function setStartDatePerformance(){const _0x142df0=_0x1a675f;if(config&&config['liquidity'][0x0][_0x142df0(0x243)][_0x142df0(0x236)]!=0x0){const _0x38a377=config['liquidity'][0x0][_0x142df0(0x243)];dbPerformance[_0x142df0(0x1cf)](_0x142df0(0x15a))['find']({'date':config[_0x142df0(0xb2)]})[_0x142df0(0x1ac)]({'coins':_0x38a377})[_0x142df0(0xfe)]();}}async function recreateCoinResults(){const _0x24d9b4=_0x1a675f;let _0x24158e,_0x476865=[];try{const _0x419eb7=fns['format'](fns[_0x24d9b4(0x1c2)](config[_0x24d9b4(0xb2)][_0x24d9b4(0xc3)](/\//g,'-')),_0x24d9b4(0x234));for(const _0x2f2023 of currentCoins){if(_0x2f2023[_0x24d9b4(0xb7)]!=config[_0x24d9b4(0x207)]){let _0x41b16b=0x0,_0x475e24,_0x3a0aca;_0x24158e=await getAllEventOrders(_0x2f2023[_0x24d9b4(0x15d)]);if(_0x24158e[_0x24d9b4(0x236)]>0x0)_0x24158e[_0x24d9b4(0x1d4)](_0x29d411=>{const _0x31a631=_0x24d9b4,_0x5a2f76=_0x2f2023[_0x31a631(0x15d)]['includes'](config[_0x31a631(0x207)]+'/');_0x476865[_0x31a631(0x223)]({'datetime':_0x29d411[_0x31a631(0x1d1)],'coin':_0x2f2023['coin'],'symbol':_0x2f2023['symbol'],'side':_0x29d411['side'],'reverse':_0x5a2f76,'amount':formatResult(_0x29d411[_0x31a631(0x158)],0x8),'filled':formatResult(_0x29d411[_0x31a631(0x158)],0x8),'price':formatResult(_0x29d411[_0x31a631(0xf4)],0x8)}),_0x41b16b=_0x29d411[_0x31a631(0x18b)]==_0x31a631(0x162)?_0x41b16b+_0x29d411[_0x31a631(0x158)]:_0x41b16b-_0x29d411[_0x31a631(0x158)];if(!_0x3a0aca)_0x3a0aca=_0x29d411[_0x31a631(0xf4)];});_0x475e24=_0x2f2023[_0x24d9b4(0xc1)]-_0x41b16b;let _0x3b93eb;config[_0x24d9b4(0x10e)][_0x24d9b4(0x1d4)](_0x1d1775=>{const _0x49a736=_0x24d9b4;!_0x3b93eb&&(_0x3b93eb=_0x1d1775['changes']['find'](_0x2e1812=>_0x2e1812[_0x49a736(0xb7)]==_0x2f2023[_0x49a736(0xb7)]),_0x3b93eb&&(_0x475e24=_0x3b93eb['number'],_0x3a0aca=_0x3b93eb[_0x49a736(0xf4)]));});let _0x11b034=dbCoinResults[_0x24d9b4(0x1cf)]('coins')['find']({'coin':_0x2f2023['coin']})['value']();_0x11b034={'coin':_0x2f2023['coin'],'number':_0x475e24,'breakeven':_0x3a0aca,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x24d9b4(0x1cf)](_0x24d9b4(0x16c))['find']({'coin':_0x2f2023[_0x24d9b4(0xb7)]})[_0x24d9b4(0x1ac)](_0x11b034)[_0x24d9b4(0xfe)]();}}_0x476865['sort']((_0x34b098,_0x1b06f2)=>_0x34b098[_0x24d9b4(0x1d1)]>_0x1b06f2[_0x24d9b4(0x1d1)]?0x1:_0x1b06f2[_0x24d9b4(0x1d1)]>_0x34b098[_0x24d9b4(0x1d1)]?-0x1:0x0);let _0x594458=0x0;for(let _0x3e68e7 of _0x476865){await updateCoinResults(_0x3e68e7,!![]);}}catch(_0x194369){await handleError(_0x194369,_0x24d9b4(0x1b0));}}async function getAllEventOrders(_0x2387c4){const _0x78d01=_0x1a675f;let _0x4cfc93=[],_0x28c3b6=dbLogs[_0x78d01(0x1cf)](_0x78d01(0x1b4))[_0x78d01(0xe9)](_0x29590e=>{const _0x262e41=_0x78d01,_0x426485=_0x29590e[_0x262e41(0x175)][_0x262e41(0x20e)]();return _0x426485['includes'](_0x2387c4[_0x262e41(0x20e)]())&&(_0x426485[_0x262e41(0x23e)](_0x262e41(0x213))&&_0x426485[_0x262e41(0x23e)](_0x262e41(0x15f))||_0x426485['includes'](_0x262e41(0x158))&&_0x426485['includes']('order'));})['sortBy'](_0x78d01(0x1ce))[_0x78d01(0x153)]();return _0x28c3b6[_0x78d01(0x1d4)](_0x228024=>{const _0xa83ab8=_0x78d01,_0x45a38a=_0x228024['event']['includes']('sell')?'sell':_0xa83ab8(0x162),_0x3fa461=/#([0-9]|\.)+\s/i,_0x41e777=Number(_0x3fa461[_0xa83ab8(0x183)](_0x228024[_0xa83ab8(0x175)])[0x0][_0xa83ab8(0x1f5)](0x1)),_0x5abe63=/@([0-9]|\.)+$/i,_0x17bab1=Number(_0x5abe63['exec'](_0x228024[_0xa83ab8(0x175)])[0x0][_0xa83ab8(0x1f5)](0x1));_0x4cfc93[_0xa83ab8(0x223)]({'datetime':_0x228024['time'],'coin':symbolToCoin(_0x2387c4),'symbol':_0x2387c4,'side':_0x45a38a,'amount':_0x41e777,'filled':_0x41e777,'price':_0x17bab1});}),_0x4cfc93;}async function getAllOrders(_0x2ef33c,_0x27fece){const _0x3a5a29=_0x1a675f;let _0x2d5750=[];while(_0x27fece<exchange[_0x3a5a29(0x112)]()){const _0x5ab398=0x1f4,_0xbe2cef=await exchange['fetchClosedOrders'](_0x2ef33c,_0x27fece,_0x5ab398);if(_0xbe2cef['length'])_0x27fece=_0xbe2cef[_0xbe2cef[_0x3a5a29(0x236)]-0x1][_0x3a5a29(0x215)]+0x1,_0x2d5750=_0x2d5750['concat'](_0xbe2cef);else break;}return _0x2d5750;}async function validate24hChanges(){const _0x44e46e=_0x1a675f;for(const _0x522983 of currentCoins){if(_0x522983[_0x44e46e(0xb7)]!=config[_0x44e46e(0x207)]){let _0x37126e;_0x522983['reverse']?_0x37126e=formatResult((0x1/(global[_0x44e46e(0xe2)][noslash(_0x522983[_0x44e46e(0x15d)])]/0x64+0x1)-0x1)*0x64,0x3):_0x37126e=global[_0x44e46e(0xe2)][noslash(_0x522983[_0x44e46e(0x15d)])],_0x37126e<config[_0x44e46e(0x169)]&&(logHistory(_0x44e46e(0x200),_0x522983['coin']+_0x44e46e(0xd1)+_0x37126e+'%'),logHistory(_0x44e46e(0x200),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x44e46e(0x200),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4fbac7,_0x22ed26){const _0x3cf753=_0x1a675f;if(!_0x4fbac7)return!![];const _0x248b4b=_0x22ed26['split']('.'),_0x28cacb=_0x4fbac7[_0x3cf753(0x14e)]('.');for(var _0x2201b7=0x0;_0x2201b7<_0x28cacb[_0x3cf753(0x236)];_0x2201b7++){const _0x422491=~~_0x28cacb[_0x2201b7],_0x2a6a65=~~_0x248b4b[_0x2201b7];if(_0x422491<_0x2a6a65)return!![];if(_0x422491>_0x2a6a65)return![];}return![];}async function oneTimeMigration(){const _0x700f73=_0x1a675f;let _0x5b6e8c=dbLogs[_0x700f73(0x1cf)]('version')['value']();if(isOlderVersion(_0x5b6e8c,'2.3.5')){let _0x100348=[];const _0x2bdb36=dbLogs[_0x700f73(0x1cf)](_0x700f73(0x1b4))[_0x700f73(0x153)]();_0x2bdb36['forEach'](_0x237d6f=>{const _0x296fb9=_0x700f73;_0x100348[_0x296fb9(0x223)]({'time':_0x237d6f['time'],'type':_0x237d6f['type'],'event':_0x237d6f[_0x296fb9(0x175)]});}),dbLogs['get'](_0x700f73(0x1b4))['assign'](_0x100348)[_0x700f73(0xfe)]();}let _0x39c9c6=dbConfig[_0x700f73(0x1cf)]('version')[_0x700f73(0x153)]();if(isOlderVersion(_0x39c9c6,_0x700f73(0x21e))){let _0xe517a8=dbConfig[_0x700f73(0x1cf)](_0x700f73(0xc7))[_0x700f73(0x163)]({'botID':botID})[_0x700f73(0x153)]();if(_0xe517a8){let _0x905649=[];_0xe517a8[_0x700f73(0x1e2)][_0x700f73(0x1d4)](_0x251c95=>{const _0x44cb98=_0x700f73;_0x905649[_0x44cb98(0x223)]({'coin':_0x251c95[_0x44cb98(0xb7)],'number':_0x251c95[_0x44cb98(0x1a5)],'price':_0x251c95[_0x44cb98(0x180)]}),delete _0x251c95['startnumber'],delete _0x251c95[_0x44cb98(0x180)];});if(_0x905649[_0x700f73(0x236)]!==0x0)fs[_0x700f73(0x11c)](configbackuppath+(_0x700f73(0x121)+botID+'.json'),JSON[_0x700f73(0x1f0)](_0x905649,null,0x4),function(_0x5e642a){if(_0x5e642a){}});const _0x2f80bd=(_0xc6ff57,_0xf2c3da)=>{const _0x1e3d9b=_0x700f73;let _0x1f02ff=[];_0xf2c3da[_0x1e3d9b(0x1d4)](_0x5ed2ef=>{const _0x2884c6=_0x1e3d9b,_0x250c07=_0xc6ff57[_0x2884c6(0x163)](_0x1f64dd=>_0x1f64dd['coin']==_0x5ed2ef[_0x2884c6(0xb7)]);if(!_0x250c07)_0x1f02ff[_0x2884c6(0x223)](_0x5ed2ef);});let _0x3021a9=[];return _0xc6ff57[_0x1e3d9b(0x1d4)](_0x319d5d=>{const _0x5c7af3=_0x1e3d9b,_0x258fa0=_0xf2c3da[_0x5c7af3(0x163)](_0x89b50c=>_0x89b50c[_0x5c7af3(0xb7)]==_0x319d5d['coin']);if(!_0x258fa0||_0x258fa0[_0x5c7af3(0xc1)]==0x0&&_0x319d5d[_0x5c7af3(0xc1)]!=0x0)_0x3021a9[_0x5c7af3(0x223)](_0x319d5d);}),{'missingDay1':_0x1f02ff,'notInDay2':_0x3021a9};},_0x17a10f=dbPerformance['get']('data')[_0x700f73(0x22d)]()[_0x700f73(0x153)]();if(_0x17a10f['length']>0x1){const {missingDay1:_0x2d2668,notInDay2:_0x4d801a}=_0x2f80bd(_0x905649,_0x17a10f[0x1]['coins']);_0x905649=[..._0x905649,..._0x2d2668],_0x4d801a[_0x700f73(0x1d4)](_0x23fdcd=>{const _0x58e107=_0x700f73;let _0x1c788f=_0x905649[_0x58e107(0x219)](_0xd1303a=>_0xd1303a[_0x58e107(0xb7)]==_0x23fdcd[_0x58e107(0xb7)]);_0x1c788f!=-0x1&&_0x905649['splice'](_0x1c788f,0x1);});}_0x905649[_0x700f73(0x189)]((_0x169fd7,_0x290c2c)=>_0x169fd7[_0x700f73(0xb7)]>_0x290c2c[_0x700f73(0xb7)]?0x1:_0x290c2c[_0x700f73(0xb7)]>_0x169fd7['coin']?-0x1:0x0);let _0x3e7ba2=[{'date':_0xe517a8[_0x700f73(0xb2)],'changes':_0x905649}];_0x17a10f[_0x700f73(0x236)]>0x2&&_0x17a10f[_0x700f73(0x1d4)]((_0x357b70,_0xed2760)=>{const _0x593589=_0x700f73;if(_0xed2760>0x0&&_0xed2760<_0x17a10f[_0x593589(0x236)]-0x1){const {missingDay1:_0x3a07df,notInDay2:_0x50bfee}=_0x2f80bd(_0x17a10f[_0xed2760][_0x593589(0x16c)],_0x17a10f[_0xed2760+0x1][_0x593589(0x16c)]);_0x905649=[],(_0x3a07df['length']!=0x0||_0x50bfee[_0x593589(0x236)]!=0x0)&&(_0x3a07df[_0x593589(0x236)]!=0x0&&_0x905649[_0x593589(0x223)](..._0x3a07df),_0x50bfee[_0x593589(0x236)]!=0x0&&(_0x50bfee[_0x593589(0x1d4)](_0x9ae0b1=>{const _0x41d5a2=_0x593589;_0x9ae0b1[_0x41d5a2(0xc1)]=-_0x9ae0b1[_0x41d5a2(0xc1)];}),_0x905649[_0x593589(0x223)](..._0x50bfee)),_0x905649[_0x593589(0x189)]((_0x789f03,_0x373cc6)=>_0x789f03[_0x593589(0xb7)]>_0x373cc6['coin']?0x1:_0x373cc6[_0x593589(0xb7)]>_0x789f03[_0x593589(0xb7)]?-0x1:0x0),_0x3e7ba2['push']({'date':_0x17a10f[_0xed2760+0x1][_0x593589(0xf0)],'changes':_0x905649}));}}),dbConfig[_0x700f73(0x1cf)](_0x700f73(0xc7))[_0x700f73(0x163)]({'botID':botID})[_0x700f73(0x1ac)]({..._0xe517a8,'liquidity':_0x3e7ba2})['write']();}}if(isOlderVersion(_0x39c9c6,_0x700f73(0x135))){let _0x1b377c=dbConfig[_0x700f73(0x1cf)]('bot')[_0x700f73(0x163)]({'botID':botID})['value']();if(_0x1b377c){const _0x4f276e=_0x1b377c[_0x700f73(0xc2)],_0x2f5219=_0x4f276e?capitalize(_0x4f276e):_0x700f73(0x24b);dbConfig[_0x700f73(0x1cf)](_0x700f73(0xc7))['find']({'botID':botID})[_0x700f73(0x1ac)]({'exchange':_0x2f5219})['write']();}}let _0x41fc80=dbPerformance['get'](_0x700f73(0x16f))[_0x700f73(0x153)]();isOlderVersion(_0x41fc80,_0x700f73(0x21e))&&setStartDatePerformance();let _0x75ae0e=dbCoinResults[_0x700f73(0x1cf)]('version')[_0x700f73(0x153)]();if(isOlderVersion(_0x75ae0e,_0x700f73(0x179))){let _0x51d3ba=dbCoinResults['get'](_0x700f73(0x16c))[_0x700f73(0x153)]();if(_0x51d3ba[_0x700f73(0x236)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x35cf4=_0x1a675f;dbConfig[_0x35cf4(0x1d2)](_0x35cf4(0x16f),serverversion)[_0x35cf4(0xfe)](),dbPerformance['set'](_0x35cf4(0x16f),serverversion)['write'](),dbLogs['set'](_0x35cf4(0x16f),serverversion)[_0x35cf4(0xfe)](),dbCoinResults[_0x35cf4(0x1d2)](_0x35cf4(0x16f),serverversion)[_0x35cf4(0xfe)]();}function getConfiguration(_0x15b53f){const _0xd1f33b=_0x1a675f;let _0x5aebe6=dbConfig[_0xd1f33b(0x1cf)]('bot')[_0xd1f33b(0x163)]({'botID':_0x15b53f})[_0xd1f33b(0x153)]();if(_0x5aebe6){let _0x3d6811=![];typeof _0x5aebe6[_0xd1f33b(0x198)]==_0xd1f33b(0x16b)&&(_0x5aebe6={..._0x5aebe6,'threshold':Number(_0x5aebe6[_0xd1f33b(0x198)])},_0x3d6811=!![]),_0x5aebe6['change24h']==null&&(_0x5aebe6={..._0x5aebe6,'change24h':-0x14},_0x3d6811=!![]),!_0x5aebe6[_0xd1f33b(0x1bf)]&&(_0x5aebe6={..._0x5aebe6,'fiat':_0xd1f33b(0xe6)},_0x3d6811=!![]),!_0x5aebe6[_0xd1f33b(0x195)]&&(_0x5aebe6={..._0x5aebe6,'onepagemode':settings[_0xd1f33b(0x195)]},_0x3d6811=!![]),!_0x5aebe6[_0xd1f33b(0x23f)]&&(_0x5aebe6={..._0x5aebe6,'colorscheme':_0xd1f33b(0x1b2)},_0x3d6811=!![]),!_0x5aebe6[_0xd1f33b(0x188)]&&(_0x5aebe6={..._0x5aebe6,'autoliquidity':!![]},_0x3d6811=!![]),_0x3d6811&&(_0x5aebe6={'botID':_0x5aebe6[_0xd1f33b(0x1c4)],'exchange':_0x5aebe6['exchange'],'apiKey':_0x5aebe6['apiKey'],'apiSecret':_0x5aebe6[_0xd1f33b(0x18d)],'apiPassword':_0x5aebe6[_0xd1f33b(0x1c7)],'basecoin':_0x5aebe6[_0xd1f33b(0x207)],'botname':_0x5aebe6[_0xd1f33b(0xc8)],'showname':_0x5aebe6[_0xd1f33b(0x116)],'threshold':_0x5aebe6[_0xd1f33b(0x198)],'ordertype':_0x5aebe6[_0xd1f33b(0x1f1)],'timeout':_0x5aebe6[_0xd1f33b(0x177)],'fiat':_0x5aebe6[_0xd1f33b(0x1bf)],'startdate':_0x5aebe6[_0xd1f33b(0xb2)],'recreate':_0x5aebe6[_0xd1f33b(0x246)],'timeshift':_0x5aebe6[_0xd1f33b(0x23c)],'onepagemode':_0x5aebe6[_0xd1f33b(0x195)],'headless':_0x5aebe6[_0xd1f33b(0x230)],'cooldown':_0x5aebe6['cooldown'],'change24h':_0x5aebe6[_0xd1f33b(0x169)],'emojibuy':_0x5aebe6[_0xd1f33b(0xf2)],'emojisell':_0x5aebe6[_0xd1f33b(0x160)],'colorscheme':_0x5aebe6[_0xd1f33b(0x23f)],'portfolio':_0x5aebe6['portfolio'],'autoliquidity':_0x5aebe6[_0xd1f33b(0x188)],'liquidity':_0x5aebe6[_0xd1f33b(0x10e)],'openOrders':_0x5aebe6['openOrders']},dbConfig[_0xd1f33b(0x1cf)](_0xd1f33b(0xc7))[_0xd1f33b(0x1ba)]()[_0xd1f33b(0xfe)](),dbConfig['get'](_0xd1f33b(0xc7))[_0xd1f33b(0x223)](_0x5aebe6)[_0xd1f33b(0xfe)]());}else _0x5aebe6={'botID':_0x15b53f,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x15b53f,'showname':![],'threshold':0x3,'ordertype':_0xd1f33b(0x213),'timeout':0x14,'fiat':_0xd1f33b(0xe6),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xd1f33b(0x23c)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xd1f33b(0x1b2),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5aebe6;}function emittedConfiguration(){const _0x60e3f6=_0x1a675f;let _0x449ed7;if(config[_0x60e3f6(0x197)]=='')_0x449ed7={...config,'configstate':_0x60e3f6(0x152)};else config[_0x60e3f6(0x197)]=='***'?_0x449ed7={...config,'configstate':_0x60e3f6(0x10c)}:(_0x449ed7={...config,'apiKey':_0x60e3f6(0x126),'apiSecret':'************'},config[_0x60e3f6(0x1c7)]&&(_0x449ed7[_0x60e3f6(0x1c7)]='************'));return _0x449ed7;}function getSettings(){const _0xd23dc4=_0x1a675f;return dbSettings['get'](_0xd23dc4(0x120))[_0xd23dc4(0x153)]();}function getSecure(){const _0x14efbe=_0x1a675f;return dbSecure['get']('secure')[_0x14efbe(0x153)]()||{};}function updateTimeshift(_0x9ecbbd){const _0x2504a8=_0x1a675f;let _0x4f530a=dbConfig[_0x2504a8(0x1cf)](_0x2504a8(0xc7))['find']({'botID':botID})[_0x2504a8(0x153)]();_0x4f530a&&dbConfig[_0x2504a8(0x1cf)]('bot')[_0x2504a8(0x163)]({'botID':botID})[_0x2504a8(0x1ac)]({'timeshift':_0x9ecbbd})[_0x2504a8(0xfe)](),config[_0x2504a8(0x23c)]=_0x9ecbbd,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x251539){const _0x45e979=_0x1a675f;let _0x45e161=dbConfig[_0x45e979(0x1cf)](_0x45e979(0xc7))[_0x45e979(0x163)]({'botID':botID})['value']();_0x45e161&&dbConfig[_0x45e979(0x1cf)](_0x45e979(0xc7))[_0x45e979(0x163)]({'botID':botID})[_0x45e979(0x1ac)]({'onepagemode':_0x251539})['write'](),config[_0x45e979(0x195)]=_0x251539,proxyEmit(_0x45e979(0x1d3),emittedConfiguration());}async function storeConfiguration(_0x433d8e){const _0x524195=_0x1a675f;logger[_0x524195(0x10d)](_0x524195(0x159));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x524195(0x10d)](_0x524195(0x1ab));let _0x321e2e=[],_0x14d468=![],_0x1ef575=![],_0x3505be=[];_0x433d8e['portfolio'][_0x524195(0x1d4)](_0x59eb0f=>{const _0x4d7041=_0x524195;if(!_0x59eb0f[_0x4d7041(0x235)]&&_0x59eb0f[_0x4d7041(0xb7)]!=_0x433d8e[_0x4d7041(0x207)])_0x3505be[_0x4d7041(0x223)](_0x59eb0f[_0x4d7041(0x15d)]);}),_0x3505be[_0x524195(0x1d4)](_0x1577f8=>{const _0x34b352=_0x524195,_0x333dbc=watchedSymbols[_0x34b352(0x23e)](_0x1577f8);!_0x333dbc&&_0x321e2e['push'](_0x1577f8);}),_0x3505be[_0x524195(0x1d4)](_0x2726b6=>{const _0x11779a=_0x524195,_0x22e784=currentCoins[_0x11779a(0x163)](_0x496ff6=>_0x496ff6['symbol']==_0x2726b6);!_0x22e784&&(_0x14d468=!![]);}),currentCoins[_0x524195(0x1d4)](_0x346149=>{const _0x5d876c=_0x524195;if(_0x346149[_0x5d876c(0xb7)]!=config[_0x5d876c(0x207)]){const _0x4c1c72=_0x3505be[_0x5d876c(0x163)](_0x734e2e=>_0x734e2e==_0x346149[_0x5d876c(0x15d)]);!_0x4c1c72&&(_0x14d468=!![]);}}),_0x433d8e[_0x524195(0x1e2)]['forEach'](_0x1945bb=>{const _0x197744=_0x524195,_0x5327b6=config['portfolio']['find'](_0x1bbb57=>_0x1bbb57['coin']==_0x1945bb[_0x197744(0xb7)]);if(_0x5327b6&&_0x1945bb[_0x197744(0x1ee)]!=_0x5327b6['offset'])_0x1ef575=!![];});let _0x295b52=dbConfig[_0x524195(0x1cf)](_0x524195(0xc7))[_0x524195(0x163)]({'botID':botID})[_0x524195(0x153)]();_0x433d8e={..._0x433d8e,'apiKey':crypt[_0x524195(0xb9)](secure[_0x524195(0xce)],_0x433d8e[_0x524195(0x197)])['message'],'apiSecret':crypt['decrypt'](secure[_0x524195(0xce)],_0x433d8e[_0x524195(0x18d)])[_0x524195(0x1d5)]};_0x433d8e[_0x524195(0x1c7)]&&(_0x433d8e[_0x524195(0x1c7)]=crypt[_0x524195(0xb9)](secure[_0x524195(0xce)],_0x433d8e[_0x524195(0x1c7)])[_0x524195(0x1d5)]);let _0x25308c=![];if(_0x295b52){_0x433d8e['apiKey']==_0x524195(0x126)?_0x433d8e['apiKey']=config[_0x524195(0x197)]:_0x25308c=!![];_0x433d8e[_0x524195(0x18d)]==_0x524195(0x126)?_0x433d8e[_0x524195(0x18d)]=config[_0x524195(0x18d)]:_0x25308c=!![];if(_0x433d8e[_0x524195(0x1c7)]==_0x524195(0x126))_0x433d8e[_0x524195(0x1c7)]=config['apiPassword'];else{if(_0x433d8e[_0x524195(0x1c7)])_0x25308c=!![];}dbConfig[_0x524195(0x1cf)](_0x524195(0xc7))[_0x524195(0x163)]({'botID':botID})[_0x524195(0x1ac)](_0x433d8e)['write']();}else dbConfig[_0x524195(0x1cf)](_0x524195(0xc7))[_0x524195(0x223)](_0x433d8e)['write'](),_0x25308c=!![],process['send']({'status':_0x524195(0x186),'live':_0x524195(0x1d9)},_0x543c41=>{});process[_0x524195(0x157)]({'botname':_0x433d8e['botname']},_0x1f6eae=>{}),updateBotManager(),config={..._0x433d8e},proxyEmit(_0x524195(0x156)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x25308c)await reset(_0x321e2e,!![]);else _0x14d468||_0x1ef575?await reset(_0x321e2e,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x49bd63){const _0x16bdfe=_0x1a675f,_0x1600af={...config,'headless':_0x49bd63['headless']};let _0x34c35c=dbConfig['get'](_0x16bdfe(0xc7))[_0x16bdfe(0x163)]({'botID':botID})[_0x16bdfe(0x153)]();_0x34c35c&&dbConfig[_0x16bdfe(0x1cf)](_0x16bdfe(0xc7))[_0x16bdfe(0x163)]({'botID':botID})['assign'](_0x1600af)[_0x16bdfe(0xfe)](),config={..._0x1600af},updateBotManager(),proxyEmit(_0x16bdfe(0x1d3),emittedConfiguration());}async function storeFiat(_0x1ff957){const _0x509bb0=_0x1a675f,_0x50a710={...config,'fiat':_0x1ff957};let _0x1dad75=dbConfig[_0x509bb0(0x1cf)](_0x509bb0(0xc7))[_0x509bb0(0x163)]({'botID':botID})[_0x509bb0(0x153)]();_0x1dad75&&dbConfig['get'](_0x509bb0(0xc7))[_0x509bb0(0x163)]({'botID':botID})[_0x509bb0(0x1ac)](_0x50a710)['write'](),config={..._0x50a710},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1bccd5=_0x1a675f;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x1bccd5(0xe7)](path[_0x1bccd5(0x194)](configpath,_0x1bccd5(0xd3)+botID+_0x1bccd5(0x1d6))))fs[_0x1bccd5(0xf5)](path[_0x1bccd5(0x194)](configpath,'bot-'+botID+_0x1bccd5(0x1d6)));if(fs[_0x1bccd5(0xe7)](path[_0x1bccd5(0x194)](configpath,_0x1bccd5(0xd3)+botID+_0x1bccd5(0xb5))))fs[_0x1bccd5(0xf5)](path['join'](configpath,'bot-'+botID+_0x1bccd5(0xb5)));if(fs[_0x1bccd5(0xe7)](path['join'](configpath,_0x1bccd5(0xd3)+botID+_0x1bccd5(0x1fa))))fs[_0x1bccd5(0xf5)](path[_0x1bccd5(0x194)](configpath,'bot-'+botID+_0x1bccd5(0x1fa)));}catch(_0x15ed54){if(_0x15ed54)logger[_0x1bccd5(0x129)](_0x1bccd5(0x218),_0x15ed54);}const _0x33c7e0=getDate();let _0x1fdb90=[];currentCoins[_0x1bccd5(0x1d4)](_0x477ac2=>{const _0xbae461=_0x1bccd5;_0x1fdb90[_0xbae461(0x223)]({'coin':_0x477ac2[_0xbae461(0xb7)],'number':_0x477ac2[_0xbae461(0xc1)],'price':_0x477ac2['last']});});let _0x411178=dbConfig[_0x1bccd5(0x1cf)](_0x1bccd5(0xc7))[_0x1bccd5(0x163)]({'botID':botID})['value']();_0x411178&&(dbConfig[_0x1bccd5(0x1cf)](_0x1bccd5(0xc7))[_0x1bccd5(0x163)]({'botID':botID})['assign']({'liquidity':[{'date':_0x33c7e0,'changes':_0x1fdb90}]})[_0x1bccd5(0xfe)](),config[_0x1bccd5(0x10e)]=[]),process['send']({'stop':_0x1bccd5(0x1e4)},_0x29d2af=>{});}function noslash(_0x3b0b89){return _0x3b0b89['replace']('/','');}function updateHighestFee(_0x29988e,_0x1e3fd6){const _0x3c0a23=_0x1a675f;lastFees[_0x3c0a23(0x168)]=_0x29988e,lastFees['recent20'][_0x3c0a23(0x236)]===0x14&&lastFees[_0x3c0a23(0x19d)][_0x3c0a23(0x1bc)](),lastFees[_0x3c0a23(0x19d)]['push'](_0x1e3fd6),lastFees[_0x3c0a23(0x247)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x3480eb){const _0x53ba2d=_0x1a675f;logger[_0x53ba2d(0x10d)]('0\x20-\x20EXECUTION:\x20'+_0x3480eb[_0x53ba2d(0x15d)]+_0x53ba2d(0x1bd)+_0x3480eb[_0x53ba2d(0x13a)]+_0x53ba2d(0x1bd)+_0x3480eb['id']);let _0x2e0789=_0x3480eb[_0x53ba2d(0x13a)],_0x17f6e0=![];currentCoins[_0x53ba2d(0x1d4)](_0x33c263=>{const _0x491688=_0x53ba2d;_0x33c263[_0x491688(0x15d)]==_0x3480eb['symbol']&&(_0x17f6e0=!![]);});if(!_0x17f6e0)return;const _0x14116b=currentCoins['find'](_0x2a1095=>_0x2a1095[_0x53ba2d(0x15d)]==_0x3480eb['symbol']),_0x4b8e9c=_0x595b2d=>{if(_0x14116b)_0x14116b['orderstatus']=_0x595b2d;};if(_0x2e0789=='open')_0x4b8e9c(_0x53ba2d(0x109));else{if(_0x2e0789=='canceled'){_0x4b8e9c(_0x53ba2d(0x127));const _0x42ab8d=await getCoins();[currentCoins,currentCoinsAll]=_0x42ab8d,await getOpenOrders(),handleOpenOrders();}else{if(_0x2e0789==_0x53ba2d(0x1cc)){logger['debug'](_0x53ba2d(0x118)+_0x3480eb[_0x53ba2d(0x15d)]+'\x20|\x20'+_0x3480eb[_0x53ba2d(0x158)]+'\x20|\x20'+_0x3480eb['id']);let _0xca0bbd=![];if(lastOrders)for(const _0xc831c6 of lastOrders){const _0x378d73=0xc8,_0x5be118=0x1388;let _0x1adcf7=0x0;while(!_0xc831c6[_0x53ba2d(0x190)]&&_0x1adcf7*_0x378d73<_0x5be118){_0x1adcf7++,await sleep(_0x378d73);}if(_0x1adcf7>0x0)logger[_0x53ba2d(0x10d)](_0x53ba2d(0x16d)+_0x1adcf7*_0x378d73/0x3e8+_0x53ba2d(0x20d));if(_0xc831c6[_0x53ba2d(0x190)]==_0x3480eb['id']){logger[_0x53ba2d(0x10d)](_0x53ba2d(0x217)+_0x3480eb['id']),_0xca0bbd=!![];if(_0xc831c6[_0x53ba2d(0x158)]==0x0){logger[_0x53ba2d(0x10d)](_0x53ba2d(0x238)+_0x3480eb['id']);if(_0x3480eb[_0x53ba2d(0x146)])_0xc831c6[_0x53ba2d(0xf4)]=_0x3480eb[_0x53ba2d(0x146)];else{if(_0x3480eb[_0x53ba2d(0xf4)])_0xc831c6[_0x53ba2d(0xf4)]=_0x3480eb[_0x53ba2d(0xf4)];else{}}_0xc831c6[_0x53ba2d(0x158)]=_0x3480eb[_0x53ba2d(0x158)],_0xc831c6[_0x53ba2d(0x1bb)]={'currency':_0x3480eb[_0x53ba2d(0x1bb)]?_0x3480eb['fee'][_0x53ba2d(0x168)]:null,'cost':_0x3480eb[_0x53ba2d(0x1bb)]?_0x3480eb['fee'][_0x53ba2d(0x228)]:0x0},updateHighestFee(_0xc831c6[_0x53ba2d(0x1bb)][_0x53ba2d(0x168)],_0xc831c6[_0x53ba2d(0x1bb)][_0x53ba2d(0x228)]),_0x4b8e9c(_0x53ba2d(0x158)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x37bd5f=await getCoins();[currentCoins,currentCoinsAll]=_0x37bd5f;}await updateCoinResults(_0xc831c6);}}}if(!_0xca0bbd){logger[_0x53ba2d(0x10d)](_0x53ba2d(0x225)+_0x3480eb['id']),_0x4b8e9c(_0x53ba2d(0x158));const _0x21202b=await getCoins();[currentCoins,currentCoinsAll]=_0x21202b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x55e3ba=JSON[_0x53ba2d(0x1a8)](lastBalances[_0x53ba2d(0x1e2)]);const _0x312c15=_0x55e3ba[_0x53ba2d(0x163)](_0x27a32e=>_0x27a32e['symbol']==_0x3480eb['symbol']);if(_0x312c15){if(_0x2e0789==_0x53ba2d(0x109))_0x312c15[_0x53ba2d(0x1c6)]=_0x312c15[_0x53ba2d(0x1c6)]==_0x53ba2d(0x158)?'filled':_0x53ba2d(0x109);else{if(_0x2e0789==_0x53ba2d(0x127))_0x312c15[_0x53ba2d(0x1c6)]=_0x312c15['orderstatus']==_0x53ba2d(0x158)?_0x53ba2d(0x158):'canceled';else _0x2e0789=='closed'&&(_0x312c15[_0x53ba2d(0x1c6)]=_0x53ba2d(0x158));}}lastBalances={...lastBalances,'portfolio':JSON[_0x53ba2d(0x1f0)](_0x55e3ba)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x153779=_0x1a675f;await getOpenOrders();let _0x4cb11b=![];currentCoins[_0x153779(0x1d4)](_0x3ebce1=>{const _0x3d2798=_0x153779;_0x4cb11b=allOpenOrders[_0x3d2798(0x163)](_0x262f2f=>_0x262f2f[_0x3d2798(0x15d)]==_0x3ebce1[_0x3d2798(0x15d)]),_0x3ebce1[_0x3d2798(0x1c6)]=_0x4cb11b?_0x3d2798(0x109):_0x3d2798(0x1e0);});}async function getCoins(_0x492cda=!![],_0x2fdcc6=config[_0x1a675f(0x207)]){const _0x445ce8=_0x1a675f;let _0x1c5378,_0x36a4f7=[],_0x3da7f4=[],_0x51604a=[],_0x3268ff=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1c5378=await exchange[_0x445ce8(0x12e)](),mybalances=_0x1c5378[_0x445ce8(0x17c)];for(const [_0x567f65,_0x1b0adb]of Object[_0x445ce8(0x185)](mybalances)){_0x3268ff[_0x445ce8(0x223)](_0x567f65);}if(_0x2fdcc6=='')for(const [_0x19f6d1,_0x4248a7]of Object[_0x445ce8(0x185)](mybalances)){_0x4248a7[_0x445ce8(0x10a)]()!=0x0&&_0x3da7f4[_0x445ce8(0x223)]({'coin':_0x19f6d1});}else{let _0x2e273e=![];for(const [_0x24640c,_0x44fb23]of Object[_0x445ce8(0x185)](mybalances)){if(_0x3268ff[_0x445ce8(0x23e)](_0x24640c)){const _0x52c7e9=config[_0x445ce8(0x1e2)][_0x445ce8(0x163)](_0x3a60f3=>_0x3a60f3[_0x445ce8(0xb7)]==_0x24640c),_0x543527=_0x24640c+'/'+_0x2fdcc6,_0x5427ac=_0x2fdcc6+'/'+_0x24640c,_0x2b48ae=currentCoins[_0x445ce8(0x163)](_0xd8a490=>_0xd8a490['coin']==_0x24640c);_0x2e273e=![];if((_0x44fb23[_0x445ce8(0x10a)]()!=0x0||_0x52c7e9)&&(allSymbols[_0x445ce8(0x23e)](_0x543527)||_0x24640c==_0x2fdcc6))_0x24640c!=_0x2fdcc6&&_0x36a4f7[_0x445ce8(0x223)](_0x543527),_0x3da7f4[_0x445ce8(0x223)]({'coin':_0x24640c,'symbol':_0x543527,'reverse':![],'number':Math[_0x445ce8(0x222)](_0x44fb23+(_0x52c7e9&&_0x52c7e9[_0x445ce8(0x1ee)]||0x0),0x0),'orderstatus':_0x2b48ae?_0x2b48ae[_0x445ce8(0x1c6)]:_0x445ce8(0x1e0)});else(_0x44fb23[_0x445ce8(0x10a)]()!=0x0||_0x52c7e9)&&allSymbols[_0x445ce8(0x23e)](_0x5427ac)&&(_0x24640c!=_0x2fdcc6&&_0x36a4f7['push'](_0x5427ac),_0x3da7f4['push']({'coin':_0x24640c,'symbol':_0x5427ac,'reverse':!![],'number':Math[_0x445ce8(0x222)](_0x44fb23+(_0x52c7e9&&_0x52c7e9['offset']||0x0),0x0),'orderstatus':_0x2b48ae?_0x2b48ae[_0x445ce8(0x1c6)]:'none'}));}}}}catch(_0x521c7c){if(!_0x492cda)handleErrorNoStop(_0x521c7c,'getCoins()');else await handleError(_0x521c7c,'getCoins()');}return _0x51604a=cloneDeep(_0x3da7f4),_0x3da7f4=_0x3da7f4[_0x445ce8(0xe9)](_0x5db574=>{const _0x4ab706=_0x445ce8,_0x138018=config[_0x4ab706(0x1e2)][_0x4ab706(0x163)](_0x56ec20=>_0x56ec20['coin']==_0x5db574[_0x4ab706(0xb7)]);return _0x138018&&!_0x138018['excluded'];}),[_0x3da7f4,_0x51604a];}async function getCoinNumber(_0x52603b){const _0x3d9ca2=_0x1a675f;let _0x2eeae6;try{const _0x3e6607=await exchange[_0x3d9ca2(0x12e)]();_0x2eeae6=_0x3e6607[_0x3d9ca2(0x17c)][_0x52603b];}catch(_0x17af5c){await handleError(_0x17af5c,_0x3d9ca2(0x1ea));}return _0x2eeae6;}async function getOpenOrders(){const _0xac3565=_0x1a675f;let _0x1666b0;allOpenOrders=[];try{for(const _0x5dfb87 of config[_0xac3565(0x1e2)]){!_0x5dfb87[_0xac3565(0x235)]&&_0x5dfb87[_0xac3565(0xb7)]!=config['basecoin']&&(_0x1666b0=await exchange[_0xac3565(0x167)](_0x5dfb87[_0xac3565(0x15d)]),_0x1666b0[_0xac3565(0x236)]>0x0&&allOpenOrders[_0xac3565(0x223)](_0x1666b0[0x0]));}}catch(_0x4afe77){await handleError(_0x4afe77,_0xac3565(0x151));}}async function handleOpenOrders(_0xf5b98c=0x0){const _0x1828bd=_0x1a675f;allOpenOrders[_0x1828bd(0x236)]==0x0&&lockOrders==ORDERS[_0x1828bd(0x1a2)]&&allOrdersPlaced&&(_0xf5b98c==0x0?(logger[_0x1828bd(0x10d)](_0x1828bd(0x143)),_0xf5b98c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1828bd(0x10d)](_0x1828bd(0x1ad)),validateOrders(_0x1828bd(0x125))));}async function testAPI(_0x43a6e6){const _0x58b53e=_0x1a675f,_0x37999d=ccxt[_0x43a6e6['exchange'][_0x58b53e(0x20e)]()],_0x48462c=new _0x37999d({'apiKey':_0x43a6e6[_0x58b53e(0x197)],'secret':_0x43a6e6['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x43a6e6[_0x58b53e(0xc2)]==_0x58b53e(0x1e8)&&(_0x48462c[_0x58b53e(0x1c8)]={'defaultType':'spot','adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x43a6e6[_0x58b53e(0x1c7)])_0x48462c[_0x58b53e(0x1ca)]=_0x43a6e6[_0x58b53e(0x1c7)];try{await _0x48462c['loadMarkets']();}catch(_0x3c39e0){throw _0x3c39e0;}}function cloneDeep(_0x3b9d79){const _0x2a188c=_0x1a675f;return JSON[_0x2a188c(0x1a8)](JSON['stringify'](_0x3b9d79));}async function getPortfolio(_0x1d3b78){const _0x464127=_0x1a675f;let _0x18f19c=[],_0x546bc9=[],_0x1e33d3=[],_0x1db11e;if(_0x1d3b78[_0x464127(0x197)]!==_0x464127(0x126)||_0x1d3b78[_0x464127(0x18d)]!==_0x464127(0x126)||_0x1d3b78['apiPassword']&&_0x1d3b78[_0x464127(0x1c7)]!==_0x464127(0x126)){if(config[_0x464127(0xc2)]){if(_0x1d3b78[_0x464127(0x197)]==_0x464127(0x126))_0x1d3b78[_0x464127(0x197)]=config['apiKey'];if(_0x1d3b78['apiSecret']==_0x464127(0x126))_0x1d3b78[_0x464127(0x18d)]=config[_0x464127(0x18d)];if(_0x1d3b78[_0x464127(0x1c7)]=='************')_0x1d3b78[_0x464127(0x1c7)]=config[_0x464127(0x1c7)];try{await testAPI(_0x1d3b78);}catch(_0x544abe){if(_0x544abe['toString']()[_0x464127(0x23e)](_0x464127(0x17d))){logger[_0x464127(0x10d)](_0x464127(0x134)),proxyEmit(_0x464127(0x1e2),![]);return;}else{handleError(_0x544abe,_0x464127(0x192));return;}}}await initExchange(_0x1d3b78[_0x464127(0xc2)],_0x1d3b78[_0x464127(0x197)],_0x1d3b78[_0x464127(0x18d)],_0x1d3b78[_0x464127(0x1c7)]);try{await loadSymbols(_0x1d3b78[_0x464127(0xc2)],!![]);}catch(_0x2b510){if(_0x2b510[_0x464127(0x10a)]()[_0x464127(0x23e)](_0x464127(0x17d))){proxyEmit(_0x464127(0x1e2),![]);return;}else{handleError(_0x2b510,'getPortfolio(1)');return;}}const _0x1e2617=await getCoins(![],_0x1d3b78['basecoin']);_0x1e33d3=cloneDeep(_0x1e2617[0x1]);}else _0x1e33d3=cloneDeep(currentCoinsAll);if(_0x1d3b78[_0x464127(0x207)]=='')proxyEmit(_0x464127(0x1e2),_0x1e33d3);else{_0x1e33d3[_0x464127(0x1d4)](_0x1b849d=>{const _0x2e8814=_0x464127;if(_0x1b849d[_0x2e8814(0xb7)]!=_0x1d3b78[_0x2e8814(0x207)])_0x18f19c[_0x2e8814(0x223)](_0x1b849d[_0x2e8814(0x15d)]);});try{_0x546bc9=await exchange[_0x464127(0x17f)](_0x18f19c);}catch(_0x3aa31a){if(_0x3aa31a[_0x464127(0x10a)]()[_0x464127(0x23e)]('AuthenticationError')){proxyEmit(_0x464127(0x1e2),![]);return;}else{handleError(_0x3aa31a,_0x464127(0x165));return;}}_0x1e33d3[_0x464127(0x1d4)](_0x1103d6=>{const _0x2beadb=_0x464127;_0x1103d6[_0x2beadb(0xb7)]!=_0x1d3b78[_0x2beadb(0x207)]?_0x1db11e=_0x1103d6[_0x2beadb(0xfd)]?0x1/_0x546bc9[_0x1103d6['symbol']][_0x2beadb(0x1b3)]:_0x546bc9[_0x1103d6[_0x2beadb(0x15d)]][_0x2beadb(0x1b3)]:_0x1db11e=0x1,_0x1103d6[_0x2beadb(0xf4)]=formatResult(_0x1db11e,0x8);}),proxyEmit(_0x464127(0x1e2),_0x1e33d3);}}function truncateTradeAmount(_0x198625,_0x4d86c2){const _0x1a6552=_0x1a675f;let _0x39c45b=0x0;try{_0x39c45b=exchange[_0x1a6552(0x1b7)](_0x198625,_0x4d86c2);}catch(_0x21634f){}return _0x39c45b;}function checkMinimums(_0xa2db38){const _0x3b55de=_0x1a675f;let _0x532e45=!![];const _0x3841da=!_0xa2db38['reverse']?markets[_0xa2db38[_0x3b55de(0x15d)]][_0x3b55de(0xd7)][_0x3b55de(0xb6)][_0x3b55de(0xe5)]:markets[_0xa2db38['symbol']][_0x3b55de(0xd7)][_0x3b55de(0x228)][_0x3b55de(0xe5)],_0x10db41=!_0xa2db38['reverse']?markets[_0xa2db38[_0x3b55de(0x15d)]]['limits'][_0x3b55de(0x228)][_0x3b55de(0xe5)]:markets[_0xa2db38[_0x3b55de(0x15d)]][_0x3b55de(0xd7)][_0x3b55de(0xb6)]['min'],_0x14a7ed=truncateTradeAmount(_0xa2db38[_0x3b55de(0x15d)],_0xa2db38[_0x3b55de(0x20b)]);_0xa2db38[_0x3b55de(0x20b)]=_0x14a7ed;if(Math[_0x3b55de(0x24c)](_0x14a7ed)<_0x3841da)_0x532e45=![];if(Math[_0x3b55de(0x24c)](_0x14a7ed)*_0xa2db38[_0x3b55de(0x1b3)]<_0x10db41)_0x532e45=![];if(_0xa2db38[_0x3b55de(0x18b)]==_0x3b55de(0x173)){let _0x59e63c=config['portfolio'][_0x3b55de(0x163)](_0xb1ee6d=>_0xb1ee6d[_0x3b55de(0xb7)]==_0xa2db38[_0x3b55de(0xb7)]);if(_0x59e63c['offset']>0x0){if(Math[_0x3b55de(0x24c)](_0x14a7ed)>_0xa2db38[_0x3b55de(0xc1)]-_0x59e63c['offset'])_0x532e45=![];}else{if(Math[_0x3b55de(0x24c)](_0x14a7ed)>_0xa2db38['number'])_0x532e45=![];}}if(_0xa2db38[_0x3b55de(0x18b)]==_0x3b55de(0x162)){let _0x279bcb=config[_0x3b55de(0x1e2)][_0x3b55de(0x163)](_0x418100=>_0x418100[_0x3b55de(0xb7)]==config[_0x3b55de(0x207)]),_0xd1d284=currentCoins[_0x3b55de(0x163)](_0x2f3175=>_0x2f3175[_0x3b55de(0xb7)]==config[_0x3b55de(0x207)]);if(_0x279bcb['offset']>0x0){if(Math[_0x3b55de(0x24c)](_0x14a7ed)*_0xa2db38[_0x3b55de(0x1b3)]>_0xd1d284[_0x3b55de(0xc1)]-_0x279bcb['offset'])_0x532e45=![];}else{if(Math[_0x3b55de(0x24c)](_0x14a7ed)*_0xa2db38[_0x3b55de(0x1b3)]>_0xd1d284[_0x3b55de(0xc1)])_0x532e45=![];}}return _0x532e45;}async function getBalances(_0x3955ba=!![]){const _0x50241d=_0x1a675f;let _0x114e99=0x0,_0x7bde7;const _0xcd6d71=config['threshold'];if(config[_0x50241d(0x230)]&&config[_0x50241d(0x169)]<0x0)await validate24hChanges();currentCoins[_0x50241d(0x1d4)](_0x413058=>{const _0x4c63d1=_0x50241d;if(_0x413058[_0x4c63d1(0xb7)]!=config[_0x4c63d1(0x207)]){let _0x5eb66c=global[_0x4c63d1(0x1b6)][noslash(_0x413058[_0x4c63d1(0x15d)])];_0x7bde7=_0x413058['reverse']?0x1/_0x5eb66c:_0x5eb66c;}else _0x7bde7=0x1;let _0x30286e=_0x413058[_0x4c63d1(0xc1)]*_0x7bde7;_0x114e99+=_0x30286e,_0x413058[_0x4c63d1(0x1b3)]=formatResult(Number(_0x7bde7),0x8),_0x413058['value']=_0x30286e;}),currentCoins[_0x50241d(0x1d4)](_0x16ffb8=>{const _0x3f6896=_0x50241d;let _0x451454=config[_0x3f6896(0x1e2)][_0x3f6896(0x163)](_0xfb31ee=>_0xfb31ee[_0x3f6896(0xb7)]==_0x16ffb8[_0x3f6896(0xb7)]),_0x20aec8=Number(_0x451454[_0x3f6896(0x178)]),_0x463852=_0x16ffb8[_0x3f6896(0x153)]/_0x114e99*0x64,_0x4217e4=_0x20aec8*_0x114e99/0x64/_0x16ffb8[_0x3f6896(0x1b3)]-_0x16ffb8[_0x3f6896(0xc1)];_0x16ffb8[_0x3f6896(0x178)]=formatResult(_0x463852,0x3),_0x16ffb8[_0x3f6896(0x1ae)]=formatResult(_0x20aec8,0x3),_0x16ffb8[_0x3f6896(0x20b)]=formatResult(_0x4217e4,0x8),_0x16ffb8[_0x3f6896(0x18b)]='',_0x16ffb8[_0x3f6896(0x106)]=![];if(_0x16ffb8['coin']!=config[_0x3f6896(0x207)]){if(_0x16ffb8[_0x3f6896(0x178)]>_0x20aec8)_0x16ffb8[_0x3f6896(0x18b)]=_0x3f6896(0x173),_0x16ffb8['valid']=checkMinimums(_0x16ffb8);else _0x16ffb8[_0x3f6896(0x178)]<_0x20aec8&&(_0x16ffb8[_0x3f6896(0x18b)]=_0x3f6896(0x162),_0x16ffb8[_0x3f6896(0x106)]=checkMinimums(_0x16ffb8));}_0x16ffb8[_0x3f6896(0x12b)]=_0x16ffb8[_0x3f6896(0x178)]/_0x16ffb8[_0x3f6896(0x1ae)]-0x1;if(_0x16ffb8[_0x3f6896(0x1c6)]==_0x3f6896(0x158)||_0x16ffb8[_0x3f6896(0x1c6)]==_0x3f6896(0x127))_0x16ffb8[_0x3f6896(0x1c6)]=_0x3f6896(0x1e0);}),currentCoins[_0x50241d(0x189)]((_0xe83d30,_0x3d4201)=>_0xe83d30['delta']<_0x3d4201[_0x50241d(0x12b)]?0x1:_0x3d4201[_0x50241d(0x12b)]<_0xe83d30['delta']?-0x1:0x0);const _0x3acaf7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3acaf7[_0x50241d(0x11d)],'usd':_0x3acaf7[_0x50241d(0xb4)],'portfolio':JSON[_0x50241d(0x1f0)](currentCoins),'threshold':_0xcd6d71},proxyEmit(_0x50241d(0xca),{'serverversion':serverversion,'balances':lastBalances});if(_0x3955ba){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xcd6d71});else{if(lockOrders==ORDERS[_0x50241d(0x22e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xcd6d71});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x49028d=getNormalizedPerformance();getStartingBalances(_0x49028d),emitPerformance(_0x49028d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4b303b=getNormalizedPerformance();emitPerformance(_0x4b303b),getStartingBalances(_0x4b303b),logger[_0x50241d(0x10d)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1353fd=_0x1a675f;if(!lastBalances)return;let _0x132016=[],_0x26bc5b,_0xb441d7=JSON[_0x1353fd(0x1a8)](lastBalances[_0x1353fd(0x1e2)]);_0xb441d7['sort']((_0x5a83a7,_0x33c00e)=>_0x5a83a7[_0x1353fd(0xb7)]>_0x33c00e[_0x1353fd(0xb7)]?0x1:_0x33c00e[_0x1353fd(0xb7)]>_0x5a83a7[_0x1353fd(0xb7)]?-0x1:0x0),_0xb441d7[_0x1353fd(0x1d4)](_0x3ada85=>{const _0x6cd175=_0x1353fd;let _0x3cd47a={'coin':_0x3ada85[_0x6cd175(0xb7)],'number':_0x3ada85[_0x6cd175(0xc1)],'price':_0x3ada85[_0x6cd175(0x1b3)]};_0x132016['push'](_0x3cd47a);});const _0x36982d=await getFiat();_0x26bc5b={'date':lastBalances[_0x1353fd(0x1ce)]['split']('\x20')[0x0],'eur':_0x36982d['eur'],'usd':_0x36982d[_0x1353fd(0xb4)],'coins':_0x132016};let _0x1d3267=dbPerformance[_0x1353fd(0x1cf)](_0x1353fd(0x15a))[_0x1353fd(0x163)]({'date':_0x26bc5b[_0x1353fd(0xf0)]})['value']();_0x1d3267?_0x26bc5b[_0x1353fd(0xf0)]!=config['startdate']&&dbPerformance[_0x1353fd(0x1cf)]('data')[_0x1353fd(0x163)]({'date':_0x26bc5b[_0x1353fd(0xf0)]})[_0x1353fd(0x1ac)](_0x26bc5b)[_0x1353fd(0xfe)]():dbPerformance['get'](_0x1353fd(0x15a))[_0x1353fd(0x223)](_0x26bc5b)[_0x1353fd(0xfe)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x587161=_0x1a675f;let _0x5c908f=[];if(dbPerformance['has'](_0x587161(0x15a))['value']()){let _0x17ab48=dbPerformance['get'](_0x587161(0x15a))[_0x587161(0x22d)]()[_0x587161(0xe9)](_0x111fb0=>{const _0x4c2f6a=_0x587161;if(_0x111fb0['coins'][_0x4c2f6a(0x236)]==0x0)return![];else return!![];})[_0x587161(0x1a0)](_0x587161(0xf0))[_0x587161(0x153)](),_0x186e73=[...config[_0x587161(0x10e)]];_0x186e73['sort']((_0x56f3bd,_0x4c63f5)=>_0x56f3bd[_0x587161(0xf0)]>_0x4c63f5[_0x587161(0xf0)]?-0x1:_0x4c63f5[_0x587161(0xf0)]>_0x56f3bd[_0x587161(0xf0)]?0x1:0x0);let _0x4fbe0a=0x1,_0x42e16b=[],_0x57574f=0x0;_0x17ab48['slice']()['reverse']()['forEach']((_0x56a3d7,_0x35589f)=>{const _0x483abf=_0x587161;if(_0x186e73[_0x57574f]){if(_0x17ab48[_0x17ab48[_0x483abf(0x236)]-_0x35589f]&&_0x186e73[_0x57574f][_0x483abf(0xf0)]==_0x17ab48[_0x17ab48[_0x483abf(0x236)]-_0x35589f]['date']){if(_0x35589f<_0x17ab48[_0x483abf(0x236)]){let _0x31bc64=0x0,_0x303cd2=0x0;_0x17ab48[_0x17ab48['length']-_0x35589f][_0x483abf(0x16c)]['forEach'](_0x5808dd=>{const _0x437e52=_0x483abf;_0x303cd2+=_0x5808dd[_0x437e52(0xc1)]*_0x5808dd[_0x437e52(0xf4)];}),_0x186e73[_0x57574f]['changes'][_0x483abf(0x1d4)](_0x6f1ed5=>{const _0x566112=_0x483abf;_0x31bc64+=_0x6f1ed5[_0x566112(0xc1)]*_0x6f1ed5['price'];}),_0x4fbe0a*=_0x31bc64/(_0x303cd2-_0x31bc64)+0x1;}_0x57574f++;}}let _0x9e7615=0x0;_0x56a3d7[_0x483abf(0x16c)][_0x483abf(0x1d4)](_0x2b5c7c=>{const _0x515da3=_0x483abf;_0x9e7615+=_0x2b5c7c[_0x515da3(0xc1)]*_0x2b5c7c[_0x515da3(0xf4)];}),_0x42e16b[_0x17ab48[_0x483abf(0x236)]-_0x35589f-0x1]=_0x9e7615*(_0x4fbe0a-0x1);});let _0x8a04bc=[];_0x186e73=[...config[_0x587161(0x10e)]]||[];let _0x20704b=0x0;_0x57574f=0x0,_0x17ab48[_0x587161(0x1d4)]((_0x44e52c,_0x1cbfd4)=>{const _0x1f0896=_0x587161;if(_0x186e73[_0x57574f]){const _0x34bd89=fns['parse'](_0x186e73[_0x57574f]['date'],_0x1f0896(0xdd),new Date()),_0x2b353b=fns[_0x1f0896(0x1a8)](_0x44e52c[_0x1f0896(0xf0)],_0x1f0896(0xdd),new Date());if(fns[_0x1f0896(0x249)](_0x34bd89,_0x2b353b)){let _0x1534fb=0x0;_0x186e73[_0x57574f][_0x1f0896(0x243)][_0x1f0896(0x1d4)](_0x8507f1=>{const _0xbad94a=_0x1f0896;!_0x8a04bc[_0x8507f1[_0xbad94a(0xb7)]]?_0x8a04bc[_0x8507f1[_0xbad94a(0xb7)]]=_0x8507f1[_0xbad94a(0xc1)]:(_0x1534fb=_0x8a04bc[_0x8507f1[_0xbad94a(0xb7)]],_0x8a04bc[_0x8507f1[_0xbad94a(0xb7)]]+=_0x8507f1[_0xbad94a(0xc1)]);const _0x59b9a5=_0x44e52c[_0xbad94a(0x16c)][_0xbad94a(0x163)](_0x24fb09=>_0x24fb09[_0xbad94a(0xb7)]==_0x8507f1[_0xbad94a(0xb7)]);(!_0x59b9a5||_0x59b9a5['number']==0x0)&&(_0x20704b+=(-_0x8507f1[_0xbad94a(0xc1)]-_0x1534fb)*_0x8507f1[_0xbad94a(0xf4)]);}),_0x57574f++;}}_0x44e52c[_0x1f0896(0x16c)]['forEach']((_0x189491,_0x3526b3)=>{const _0xf8e855=_0x1f0896;_0x8a04bc[_0x189491[_0xf8e855(0xb7)]]&&(_0x189491['initial']=_0x8a04bc[_0x189491[_0xf8e855(0xb7)]]);}),_0x5c908f[_0x1f0896(0x223)]({'date':_0x44e52c[_0x1f0896(0xf0)],'eur':_0x44e52c[_0x1f0896(0x11d)],'usd':_0x44e52c[_0x1f0896(0xb4)],'offset':_0x42e16b[_0x1cbfd4],'netoffset':_0x20704b,'coins':_0x44e52c[_0x1f0896(0x16c)]});});}return _0x5c908f;}function emitPerformance(_0x538ddd){const _0x222ac2=_0x1a675f;_0x538ddd[_0x222ac2(0x236)]!==0x0?(proxyEmit(_0x222ac2(0x154),_0x538ddd),lastPerformanceEmitted=getDate()):proxyEmit(_0x222ac2(0x154),[]);}function getPerf(_0x3f1e8c,_0x2d2eff){const _0x1edcc6=_0x1a675f;let _0x296c8d=0x0,_0x17641e=0x0,_0x443d25=0x0;_0x3f1e8c['coins'][_0x1edcc6(0x1d4)](_0x26b7c0=>{const _0x3871b9=_0x1edcc6;_0x296c8d+=_0x26b7c0[_0x3871b9(0xc1)]*_0x26b7c0[_0x3871b9(0xf4)];});_0x2d2eff&&(_0x296c8d+=_0x3f1e8c[_0x1edcc6(0x1ee)]);if(config['basecoin']===_0x1edcc6(0x20f)||config[_0x1edcc6(0x207)]==='ETH')_0x17641e=_0x296c8d*_0x3f1e8c[_0x1edcc6(0x11d)],_0x443d25=_0x296c8d*_0x3f1e8c['usd'];else{if(config[_0x1edcc6(0x207)]==='BUSD'||config['basecoin']==='USDT'||config[_0x1edcc6(0x207)]==='USD')_0x17641e=_0x296c8d*_0x3f1e8c[_0x1edcc6(0x11d)]/_0x3f1e8c[_0x1edcc6(0xb4)],_0x443d25=_0x296c8d;else config[_0x1edcc6(0x207)]==='EUR'&&(_0x17641e=_0x296c8d,_0x443d25=_0x296c8d*_0x3f1e8c['usd']/_0x3f1e8c[_0x1edcc6(0x11d)]);}return[_0x296c8d,_0x17641e,_0x443d25];}function getKPIs(_0x1c266c,_0x45d45f=_0x1a675f(0x23b)){const _0x804b04=_0x1a675f,_0x12c2a1=config['basecoin'],_0x4484d3=lastBalances,_0x480c89=currentCoins,_0x40068c=getNormalizedPerformance(),_0x5213ae=_0x1c266c==='basecoin'?_0x12c2a1:_0x1c266c===_0x804b04(0x1bf)||_0x1c266c===_0x804b04(0x233)?_0x45d45f:'Net\x20'+_0x12c2a1,_0x173926=_0x1c266c==='net-basecoin'?_0x804b04(0x176):_0x1c266c==='net-fiat'?_0x804b04(0x176):_0x5213ae+_0x804b04(0x19a),_0x56c9a6=_0x1c266c===_0x804b04(0xed)||_0x1c266c==='net-fiat'?_0x804b04(0x176):_0x5213ae+_0x804b04(0xbf);let _0x548c96=0x0;_0x480c89['forEach'](_0x2aebcd=>{const _0x41dd68=_0x804b04;_0x548c96+=_0x2aebcd['number']*_0x2aebcd[_0x41dd68(0x1b3)];});if(_0x1c266c==='fiat'||_0x1c266c===_0x804b04(0x233)){if(_0x12c2a1===_0x804b04(0x20f)||_0x12c2a1===_0x804b04(0x131))_0x548c96=_0x548c96*(_0x45d45f===_0x804b04(0x23b)?_0x4484d3[_0x804b04(0x11d)]:_0x4484d3[_0x804b04(0xb4)]);else{if(_0x12c2a1===_0x804b04(0xcd)||_0x12c2a1==='USDT'||_0x12c2a1==='USD')_0x548c96=_0x548c96*(_0x45d45f==='EUR'?_0x4484d3[_0x804b04(0x11d)]/_0x4484d3[_0x804b04(0xb4)]:0x1);else _0x12c2a1===_0x804b04(0x23b)&&(_0x548c96=_0x548c96*(_0x45d45f==='EUR'?0x1:_0x4484d3[_0x804b04(0xb4)]/_0x4484d3[_0x804b04(0x11d)]));}}let _0x3e4cb9;if(_0x548c96!==0x0){if(_0x1c266c==='basecoin')_0x3e4cb9=(_0x548c96/startingBalances[_0x804b04(0x207)]-0x1)*0x64;else{if(_0x45d45f==='EUR')_0x3e4cb9=(_0x548c96/startingBalances['eur']-0x1)*0x64;else _0x3e4cb9=(_0x548c96/startingBalances[_0x804b04(0xb4)]-0x1)*0x64;}let _0x175db6=0x0;if(startingBalances[_0x804b04(0x16c)])_0x480c89[_0x804b04(0x1d4)](_0x17f14d=>{const _0x2f1f17=_0x804b04;let _0x4e830f=startingBalances[_0x2f1f17(0x16c)]['find'](_0x4ccfd6=>_0x4ccfd6[_0x2f1f17(0xb7)]===_0x17f14d[_0x2f1f17(0xb7)]);if(_0x4e830f&&_0x4e830f[_0x2f1f17(0xb7)]&&_0x17f14d[_0x2f1f17(0xc1)]!==0x0)_0x175db6+=_0x4e830f[_0x2f1f17(0xc1)]*_0x17f14d[_0x2f1f17(0x1b3)];});let _0x6c3915=0x0;if(_0x40068c[_0x804b04(0x236)]!==0x0){let _0x52530d=_0x40068c[_0x40068c['length']-0x1];_0x6c3915=_0x52530d[_0x804b04(0xbc)];}_0x175db6-=_0x6c3915;_0x1c266c===_0x804b04(0xed)&&(_0x3e4cb9=(_0x548c96-_0x175db6)/startingBalances['basecoin']*0x64,_0x548c96=_0x548c96-_0x175db6);if(_0x1c266c===_0x804b04(0x233)){let _0x1a327d=_0x45d45f===_0x804b04(0x23b)?startingBalances['eur']:startingBalances[_0x804b04(0xb4)];if(_0x12c2a1===_0x804b04(0x20f)||_0x12c2a1===_0x804b04(0x131))_0x175db6=_0x45d45f===_0x804b04(0x23b)?_0x175db6*_0x4484d3[_0x804b04(0x11d)]:_0x175db6*_0x4484d3['usd'];else{if(_0x12c2a1===_0x804b04(0xcd)||_0x12c2a1===_0x804b04(0x174)||_0x12c2a1===_0x804b04(0xe6))_0x175db6=_0x45d45f==='EUR'?_0x175db6*_0x4484d3[_0x804b04(0x11d)]/_0x4484d3[_0x804b04(0xb4)]:_0x175db6;else _0x12c2a1===_0x804b04(0x23b)&&(_0x175db6=_0x45d45f==='EUR'?_0x175db6:_0x175db6*_0x4484d3[_0x804b04(0xb4)]/_0x4484d3[_0x804b04(0x11d)]);}_0x3e4cb9=(_0x548c96-_0x175db6)/_0x1a327d*0x64,_0x548c96=_0x548c96-_0x175db6;}if(_0x3e4cb9){if(_0x3e4cb9<0x64)_0x3e4cb9=_0x3e4cb9[_0x804b04(0x13b)](0x2);else{if(_0x3e4cb9<0x3e8)_0x3e4cb9=_0x3e4cb9[_0x804b04(0x13b)](0x1);else _0x3e4cb9=_0x3e4cb9['toFixed'](0x0);}}else _0x3e4cb9=Number('0')['toFixed'](0x2);if(_0x548c96){if(Math[_0x804b04(0x24c)](_0x548c96)<0.000001)_0x548c96=_0x548c96[_0x804b04(0x13b)](0x2);else{if(Math[_0x804b04(0x24c)](_0x548c96)<0.1)_0x548c96=_0x548c96[_0x804b04(0x13b)](0x6);else{if(Math[_0x804b04(0x24c)](_0x548c96)<0x1)_0x548c96=_0x548c96['toFixed'](0x5);else{if(Math[_0x804b04(0x24c)](_0x548c96)<0xa)_0x548c96=_0x548c96[_0x804b04(0x13b)](0x4);else{if(Math['abs'](_0x548c96)<0x64)_0x548c96=_0x548c96[_0x804b04(0x13b)](0x3);else{if(Math[_0x804b04(0x24c)](_0x548c96)<0x3e8)_0x548c96=_0x548c96['toFixed'](0x2);else _0x548c96=_0x548c96[_0x804b04(0x13b)](0x2);}}}}}}else _0x548c96=Number('0')[_0x804b04(0x13b)](0x2);}else _0x3e4cb9=Number('0')['toFixed'](0x2);return{'value':_0x548c96,'change':_0x3e4cb9,'leftTxt':_0x173926,'rightTxt':_0x56c9a6};}async function getStartingBalances(_0x25492e,_0x51960e=!![]){const _0x57b5de=_0x1a675f;if(_0x25492e[_0x57b5de(0x236)]!==0x0){const [_0x2728fb,_0x4553c1,_0x7e42fc]=getPerf(_0x25492e[0x0],!![]);let _0x14bbc1=[];config['portfolio']['forEach'](_0x4ea120=>{const _0xf43bed=_0x57b5de;let _0x6bd9db=0x0,_0x392747;config[_0xf43bed(0x10e)][_0xf43bed(0x1d4)](_0x33687=>{const _0x527c37=_0xf43bed;let _0x30329d=_0x33687[_0x527c37(0x243)]['find'](_0x1d1865=>_0x1d1865[_0x527c37(0xb7)]==_0x4ea120[_0x527c37(0xb7)]);if(_0x30329d){_0x6bd9db+=_0x30329d[_0x527c37(0xc1)];if(!_0x392747)_0x392747=_0x30329d[_0x527c37(0xf4)];}}),_0x14bbc1['push']({'coin':_0x4ea120[_0xf43bed(0xb7)],'number':_0x6bd9db,'initialprice':_0x392747});});const _0x4f589d={'basecoin':_0x2728fb,'eur':_0x4553c1,'usd':_0x7e42fc,'coins':_0x14bbc1};if(_0x51960e)proxyEmit(_0x57b5de(0x107),_0x4f589d);startingBalances=_0x4f589d;}}function headlessMode(_0x3c2673){const _0xa77da8=_0x1a675f;let _0x432374=_0x3c2673[_0xa77da8(0x1e2)],_0x4456ad=_0x3c2673['threshold'],_0x1e727f=[];for(let _0x20dc94 of _0x432374){if(_0x20dc94[_0xa77da8(0xb7)]!=config['basecoin']){if(_0x20dc94[_0xa77da8(0x12b)]>=_0x4456ad/0x64){if(_0x20dc94[_0xa77da8(0x106)])_0x1e727f[_0xa77da8(0x223)](_0x20dc94);}else{if(_0x20dc94[_0xa77da8(0x12b)]<=-_0x4456ad/0x64){if(_0x20dc94[_0xa77da8(0x106)])_0x1e727f[_0xa77da8(0x223)](_0x20dc94);}}}}_0x1e727f['length']>0x0&&placeOrder(_0x1e727f);}function notifyBalance(_0x4ec74d){const _0x21197a=_0x1a675f;let _0x125e31=_0x4ec74d['portfolio'],_0x36d412=_0x4ec74d['threshold'],_0x2e1357=[];for(let _0x2fa74c of _0x125e31){if(_0x2fa74c[_0x21197a(0xb7)]!=config[_0x21197a(0x207)]){if(_0x2fa74c[_0x21197a(0x12b)]>=_0x36d412/0x64){if(_0x2fa74c['valid'])_0x2e1357[_0x21197a(0x223)](_0x2fa74c);}else{if(_0x2fa74c[_0x21197a(0x12b)]<=-_0x36d412/0x64){if(_0x2fa74c[_0x21197a(0x106)])_0x2e1357[_0x21197a(0x223)](_0x2fa74c);}}}}if(_0x2e1357[_0x21197a(0x236)]>0x0){let _0x474390=_0x2e1357['map'](_0x391ce8=>_0x391ce8[_0x21197a(0xb7)]);_0x474390['sort']();let _0x557c5a=_0x474390[_0x21197a(0x194)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x21197a(0x14a));lastCoinsToBalance=_0x557c5a;}}function symbolToCoin(_0x18f8a9){const _0x5a5bf2=_0x1a675f;let _0x24360c;if(_0x18f8a9[_0x5a5bf2(0x23e)]('/'+config[_0x5a5bf2(0x207)]))_0x24360c=_0x18f8a9[_0x5a5bf2(0xc3)]('/'+config['basecoin'],'');if(_0x18f8a9['includes'](config[_0x5a5bf2(0x207)]+'/'))_0x24360c=_0x18f8a9['replace'](config[_0x5a5bf2(0x207)]+'/','');return _0x24360c;}async function unlockOrders(){const _0x3184c1=_0x1a675f;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x3184c1(0x10d)](_0x3184c1(0xef)),lockOrders=ORDERS[_0x3184c1(0xd5)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x13682b=await getCoins();[currentCoins,currentCoinsAll]=_0x13682b,validateOrdersState=_0x3184c1(0x152),persistOpenOrders([]),lockOrders=ORDERS[_0x3184c1(0x22e)],logger[_0x3184c1(0x10d)](_0x3184c1(0x210));}}async function validateOrders(_0x1a0e54){const _0x270f0d=_0x1a675f;if(_0x1a0e54)validateOrdersState=_0x1a0e54;logger[_0x270f0d(0x10d)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x270f0d(0x1f7)+(lockOrders==0x1?_0x270f0d(0x113):lockOrders==0x2?_0x270f0d(0x1fe):'ORDERS.UNLOCKED'));let _0x38956a=[],_0x3ae23f=config['ordertype']==_0x270f0d(0x213)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x270f0d(0x177)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x270f0d(0x1a2)])return;logger[_0x270f0d(0x10d)](_0x270f0d(0x100)+validateOrdersState),lastOrders[_0x270f0d(0x1d4)](_0x57e582=>{const _0x5eb65e=_0x270f0d;let _0x5d30a4=![];_0x57e582[_0x5eb65e(0x158)]>0x0&&(_0x5d30a4=!![]),_0x38956a[_0x5eb65e(0x223)](_0x5d30a4),_0x5d30a4&&config['ordertype']!=_0x5eb65e(0x213)&&logHistory(_0x5eb65e(0x15f),_0x5eb65e(0xdc)+_0x57e582[_0x5eb65e(0x15d)]+'\x20'+_0x57e582['side']+'\x20#'+formatResult(_0x57e582['filled'],0x8)+'\x20@'+formatResult(_0x57e582[_0x5eb65e(0xf4)],0x8));}),_0x38956a[_0x270f0d(0x1d4)]((_0x494b2d,_0x1a3890)=>{const _0x5d5146=_0x270f0d;if(_0x494b2d)lastOrders[_0x5d5146(0x21c)](_0x1a3890,0x1);}),persistOpenOrders(lastOrders);const _0x139440=coolingDown?_0x270f0d(0xe1):_0x270f0d(0x1e6);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x38956a[_0x270f0d(0x23e)](![])){if(config[_0x270f0d(0x1f1)]==_0x270f0d(0x213)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x270f0d(0x170)){if(_0x38956a[_0x270f0d(0x23e)](![])){}else{if(allOrdersPlaced){if(config['ordertype']=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x270f0d(0xc5))_0x38956a['includes'](![])&&(config['ordertype']==_0x270f0d(0x213)?logHistory(_0x270f0d(0x11b),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x270f0d(0x208)](_0x3ae23f*validateOrderInterval/0xea60)+_0x270f0d(0xe0)+_0x139440):(await cancelOrders(),logHistory(_0x270f0d(0x11b),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x270f0d(0x208)](_0x3ae23f*validateOrderInterval/0xea60)+_0x270f0d(0xe0)+_0x139440))),await unlockOrders();else{if(validateOrdersState==_0x270f0d(0x125)){if(config['ordertype']!=_0x270f0d(0x213))logHistory(_0x270f0d(0x11b),_0x270f0d(0x239)+_0x139440);await unlockOrders();}}}}}async function cancelOrders(){const _0x5ca262=_0x1a675f;lastOrders[_0x5ca262(0x1d4)](async _0x231fa5=>{const _0xfc97a6=_0x5ca262;try{const _0x1d48b4=await exchange[_0xfc97a6(0x248)](_0x231fa5[_0xfc97a6(0x190)],_0x231fa5[_0xfc97a6(0x15d)]);}catch(_0x442914){if(_0x442914[_0xfc97a6(0x10a)]()[_0xfc97a6(0x23e)]('OrderNotFound')){}else await handleError(_0x442914,_0xfc97a6(0x19e));}});}async function initCoinResults(_0x2ed33e){const _0x4d2720=_0x1a675f;_0x2ed33e?logger[_0x4d2720(0x10d)](_0x4d2720(0x22a)+_0x2ed33e):logger[_0x4d2720(0x10d)](_0x4d2720(0x209)),config[_0x4d2720(0x1e2)][_0x4d2720(0x1d4)](_0x3e0718=>{const _0x2fdb39=_0x4d2720;if(!_0x3e0718[_0x2fdb39(0x235)]&&_0x3e0718['coin']!=config['basecoin']){const _0xc54e24=currentCoins[_0x2fdb39(0x163)](_0x3fb964=>_0x3fb964[_0x2fdb39(0xb7)]==_0x3e0718[_0x2fdb39(0xb7)]),_0xa12f94=global[_0x2fdb39(0x1b6)][noslash(_0x3e0718[_0x2fdb39(0x15d)])];let _0x42f6a7=_0xc54e24?_0xc54e24['number']:null,_0x316980=_0x3e0718[_0x2fdb39(0xfd)]?0x1/_0xa12f94:_0xa12f94,_0x1df16c;config[_0x2fdb39(0x10e)]['forEach'](_0x56ceec=>{const _0x31db71=_0x2fdb39;!_0x1df16c&&(_0x1df16c=_0x56ceec[_0x31db71(0x243)][_0x31db71(0x163)](_0x2245c3=>_0x2245c3[_0x31db71(0xb7)]==_0x3e0718[_0x31db71(0xb7)]),_0x1df16c&&(_0x42f6a7=_0x1df16c[_0x31db71(0xc1)],_0x316980=_0x1df16c[_0x31db71(0xf4)]));});let _0x54bb11=dbCoinResults[_0x2fdb39(0x1cf)](_0x2fdb39(0x16c))[_0x2fdb39(0x163)]({'coin':_0x3e0718[_0x2fdb39(0xb7)]})[_0x2fdb39(0x153)]();if(!_0x54bb11){const _0x4ba9c6={'coin':_0x3e0718[_0x2fdb39(0xb7)],'number':_0x42f6a7,'breakeven':_0x316980,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['push'](_0x4ba9c6)[_0x2fdb39(0xfe)]();}else{if(_0x2ed33e&&_0x3e0718[_0x2fdb39(0xb7)]==_0x2ed33e){const _0x58e2cc={'coin':_0x3e0718[_0x2fdb39(0xb7)],'number':_0x42f6a7,'breakeven':_0x316980,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2fdb39(0x1cf)](_0x2fdb39(0x16c))['find']({'coin':_0x3e0718[_0x2fdb39(0xb7)]})[_0x2fdb39(0x1ac)](_0x58e2cc)['write']();}}}});}async function updateCoinResults(_0x41056e,_0x4c2312=![]){const _0x4e890a=_0x1a675f;let _0x144c2f,_0x3c811e,_0x4d44aa,_0x388aa2,_0x53124f,_0x20cd61,_0x2ab3dd=dbCoinResults[_0x4e890a(0x1cf)](_0x4e890a(0x16c))[_0x4e890a(0x163)]({'coin':_0x41056e[_0x4e890a(0xb7)]})['value'](),_0xf24a23=![];Object[_0x4e890a(0x185)](_0x2ab3dd)['forEach'](([_0x3bf9c9,_0x2505b2])=>{if(_0x2505b2==null)_0xf24a23=!![];});(!_0x2ab3dd||_0xf24a23)&&(await initCoinResults(_0x41056e[_0x4e890a(0xb7)]),_0x2ab3dd=dbCoinResults[_0x4e890a(0x1cf)](_0x4e890a(0x16c))[_0x4e890a(0x163)]({'coin':_0x41056e[_0x4e890a(0xb7)]})['value']());_0x41056e['reverse']&&(_0x20cd61={'filled':_0x41056e[_0x4e890a(0x158)]*_0x41056e[_0x4e890a(0xf4)],'amount':_0x41056e[_0x4e890a(0x158)]*_0x41056e[_0x4e890a(0xf4)],'side':_0x41056e[_0x4e890a(0x18b)]==_0x4e890a(0x173)?_0x4e890a(0x162):'sell','price':0x1/_0x41056e['price']},_0x41056e={..._0x41056e,..._0x20cd61});_0x4c2312?_0x3c811e=_0x41056e[_0x4e890a(0x18b)]==_0x4e890a(0x162)?_0x2ab3dd[_0x4e890a(0xc1)]+_0x41056e[_0x4e890a(0x158)]:_0x2ab3dd[_0x4e890a(0xc1)]-_0x41056e[_0x4e890a(0x158)]:_0x3c811e=await getCoinNumber(_0x41056e[_0x4e890a(0xb7)]);if(_0x41056e[_0x4e890a(0x1bb)]&&_0x41056e[_0x4e890a(0x1bb)]['currency']==config[_0x4e890a(0x207)])_0x144c2f=_0x41056e[_0x4e890a(0x1bb)][_0x4e890a(0x228)];else{if(_0x41056e['fee']&&_0x41056e['fee']['currency']==_0x4e890a(0x196)&&!_0x4c2312)_0x144c2f=_0x41056e[_0x4e890a(0x1bb)][_0x4e890a(0x228)]*global[_0x4e890a(0x1b6)][_0x4e890a(0x196)+config['basecoin']];else _0x144c2f=defaultFee*_0x41056e[_0x4e890a(0x158)]*_0x41056e[_0x4e890a(0xf4)];}_0x41056e[_0x4e890a(0x18b)]=='buy'?(_0x4d44aa=_0x3c811e!=0x0?(_0x2ab3dd[_0x4e890a(0xee)]*_0x2ab3dd[_0x4e890a(0xc1)]+_0x41056e[_0x4e890a(0xf4)]*(_0x3c811e-_0x2ab3dd[_0x4e890a(0xc1)])+_0x144c2f)/_0x3c811e:0x0,_0x388aa2=_0x2ab3dd[_0x4e890a(0x1be)]):(_0x4d44aa=_0x3c811e!=0x0?(_0x2ab3dd[_0x4e890a(0xee)]*_0x2ab3dd[_0x4e890a(0xc1)]-_0x41056e[_0x4e890a(0xf4)]*(_0x2ab3dd['number']-_0x3c811e)+_0x144c2f)/_0x3c811e:0x0,_0x388aa2=_0x2ab3dd[_0x4e890a(0x1be)]+(_0x41056e['price']-_0x2ab3dd[_0x4e890a(0xee)])*_0x41056e[_0x4e890a(0x158)]);_0x53124f=(_0x41056e['price']-_0x4d44aa-_0x144c2f/_0x41056e['filled'])*_0x3c811e;let _0x176b7b={'coin':_0x41056e[_0x4e890a(0xb7)],'number':_0x3c811e,'breakeven':formatResult(_0x4d44aa,0x8),'realized':formatResult(_0x388aa2,0x8),'unrealized':formatResult(_0x53124f,0x8),'fees':formatResult(_0x2ab3dd[_0x4e890a(0x221)]+_0x144c2f,0x8),'sells':_0x41056e[_0x4e890a(0x18b)]==_0x4e890a(0x173)?_0x2ab3dd[_0x4e890a(0x155)]+0x1:_0x2ab3dd['sells'],'buys':_0x41056e[_0x4e890a(0x18b)]==_0x4e890a(0x162)?_0x2ab3dd[_0x4e890a(0x1a1)]+0x1:_0x2ab3dd[_0x4e890a(0x1a1)]};dbCoinResults['get']('coins')[_0x4e890a(0x163)]({'coin':_0x41056e['coin']})[_0x4e890a(0x1ac)](_0x176b7b)['write']();if(!_0x4c2312){if(_0x41056e['fee']&&_0x41056e['fee'][_0x4e890a(0x168)]==_0x4e890a(0x196)){const _0x2cad95=currentCoins['find'](_0xcea34a=>_0xcea34a[_0x4e890a(0xb7)]==_0x4e890a(0x196));if(_0x2cad95){let _0x1106fd=dbCoinResults[_0x4e890a(0x1cf)]('coins')['find']({'coin':'BNB'})[_0x4e890a(0x153)]();_0x176b7b={..._0x1106fd,'number':_0x2cad95['number']},dbCoinResults['get'](_0x4e890a(0x16c))[_0x4e890a(0x163)]({'coin':_0x4e890a(0x196)})['assign'](_0x176b7b)[_0x4e890a(0xfe)]();}}}}async function placeOrder(_0x38cc38){const _0x25cfda=_0x1a675f,_0x48b492=config[_0x25cfda(0x1f1)]=='market'?'market':_0x25cfda(0xe4);if(lockOrders==ORDERS[_0x25cfda(0x22e)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x25cfda(0x152);let _0x5d141d=![];lastOrders=[];for(const _0x5da1b3 of _0x38cc38){let _0x548ed7,_0x4c0379,_0x323b79,_0x393aff,_0x385b4e,_0x2241a4=_0x5da1b3[_0x25cfda(0x15d)];try{const _0xf27f89=await exchange[_0x25cfda(0x103)](_0x2241a4);_0x548ed7=_0x5da1b3['reverse']?0x1/_0x5da1b3[_0x25cfda(0x1b3)]:_0x5da1b3[_0x25cfda(0x1b3)],_0x4c0379=_0xf27f89['bid'],_0x323b79=_0xf27f89[_0x25cfda(0x23d)];_0x5da1b3[_0x25cfda(0xfd)]?(_0x393aff=_0x5da1b3[_0x25cfda(0x18b)]=='buy'?_0x25cfda(0x173):'buy',_0x385b4e=Math['abs'](_0x5da1b3[_0x25cfda(0x20b)])/_0x548ed7):(_0x393aff=_0x5da1b3[_0x25cfda(0x18b)],_0x385b4e=Math[_0x25cfda(0x24c)](_0x5da1b3[_0x25cfda(0x20b)]));_0x48b492==_0x25cfda(0xe4)&&(config[_0x25cfda(0x1f1)]=='limit-high'&&(_0x548ed7=_0x393aff=='buy'?_0x4c0379:_0x323b79),config[_0x25cfda(0x1f1)]==_0x25cfda(0xdb)&&(_0x548ed7=_0x393aff==_0x25cfda(0x162)?_0x323b79:_0x4c0379));_0x385b4e=formatResult(_0x385b4e,0x8),_0x548ed7=formatResult(_0x548ed7,0x8);const _0x411c2c=_0x393aff==_0x25cfda(0x173)?config['emojisell']?String[_0x25cfda(0x15b)]('0x'+config[_0x25cfda(0x160)])+'\x20':'':config['emojibuy']?String[_0x25cfda(0x15b)]('0x'+config[_0x25cfda(0xf2)])+'\x20':'',_0x3f6198=_0x48b492==_0x25cfda(0x213)?'Market':config[_0x25cfda(0x1f1)]==_0x25cfda(0x23a)?_0x25cfda(0x138):_0x25cfda(0x241),_0x1e7725=(Math[_0x25cfda(0x115)](Math[_0x25cfda(0x17b)]()*0x35a4e900)+0x5f5e100)[_0x25cfda(0x10a)]();lastOrders[_0x25cfda(0x223)]({'customId':_0x1e7725,'symbol':_0x2241a4,'coin':_0x5da1b3[_0x25cfda(0xb7)],'amount':_0x385b4e,'price':_0x548ed7,'side':_0x393aff,'reverse':_0x5da1b3[_0x25cfda(0xfd)],'filled':0x0});if(_0x48b492==_0x25cfda(0x213))logHistory(_0x25cfda(0x15f),''+_0x411c2c+_0x3f6198+_0x25cfda(0x1a4)+_0x2241a4+'\x20'+_0x393aff+'\x20#'+formatResult(_0x385b4e,0x8)+'\x20@'+formatResult(_0x548ed7,0x8));else logHistory(_0x25cfda(0x15f),''+_0x411c2c+_0x3f6198+_0x25cfda(0x1a4)+_0x2241a4+'\x20'+_0x393aff+'\x20#'+formatResult(_0x385b4e,0x8)+'\x20@'+formatResult(_0x548ed7,0x8));const _0x5e6926=await exchange[_0x25cfda(0x10b)](_0x2241a4,_0x48b492,_0x393aff,_0x385b4e,_0x548ed7);logger['debug'](_0x25cfda(0xeb)+_0x5e6926['id']+_0x25cfda(0x123)+_0x1e7725);const _0x32397b=lastOrders[_0x25cfda(0x236)]-0x1;if(_0x32397b>=0x0&&lastOrders[_0x32397b][_0x25cfda(0xf6)]==_0x1e7725){lastOrders[_0x32397b][_0x25cfda(0x190)]=_0x5e6926['id'];if(_0x5e6926[_0x25cfda(0xb6)])lastOrders[_0x32397b][_0x25cfda(0xb6)]=_0x5e6926[_0x25cfda(0xb6)];if(_0x5e6926[_0x25cfda(0xf4)])lastOrders[_0x32397b][_0x25cfda(0xf4)]=_0x5e6926['price'];lastOrders[_0x32397b][_0x25cfda(0x1bb)]=_0x5e6926['fee'];}if(config[_0x25cfda(0x1b1)]!=0x0){let _0x2fb14f=null;if(cooldownTracker[_0x25cfda(0x236)]==config[_0x25cfda(0x1b1)]-0x1)_0x2fb14f=cooldownTracker[_0x25cfda(0x1bc)]();const _0x568072=getTimeStamp();cooldownTracker[_0x25cfda(0x223)](_0x568072);if(_0x2fb14f){const _0x1f4eaa=fns[_0x25cfda(0x191)](new Date(_0x568072),new Date(_0x2fb14f));if(_0x1f4eaa<cooldownInterval){logHistory('error','Executed\x20'+config[_0x25cfda(0x1b1)]+_0x25cfda(0x117)+cooldownInterval/0x3c+_0x25cfda(0x1ed)+cooldownPeriod/(0xe10*0x3e8)+_0x25cfda(0x244)),coolingDown=!![];break;}}}}catch(_0x4ff4f3){if(_0x4ff4f3['toString']()[_0x25cfda(0x23e)](_0x25cfda(0x140)))lastOrders=lastOrders[_0x25cfda(0xe9)](_0x4322a0=>_0x4322a0['symbol']!=_0x2241a4),logHistory(_0x25cfda(0x200),_0x25cfda(0x14c)+_0x2241a4),_0x5d141d=!![];else{if(_0x4ff4f3[_0x25cfda(0x10a)]()[_0x25cfda(0x23e)](_0x25cfda(0x1c3)))lastOrders=lastOrders[_0x25cfda(0xe9)](_0xb94f06=>_0xb94f06['symbol']!=_0x2241a4),logHistory(_0x25cfda(0x200),_0x25cfda(0xd6)+_0x2241a4),_0x5d141d=!![];else{if(_0x4ff4f3['toString']()['includes'](_0x25cfda(0x13d)))lastOrders=lastOrders[_0x25cfda(0xe9)](_0x36d3fd=>_0x36d3fd[_0x25cfda(0x15d)]!=_0x2241a4),logHistory(_0x25cfda(0x200),_0x25cfda(0x1aa)+_0x2241a4),_0x5d141d=!![];else _0x4ff4f3[_0x25cfda(0x10a)]()[_0x25cfda(0x23e)](_0x25cfda(0x214))?(lastOrders=lastOrders[_0x25cfda(0xe9)](_0x37e46b=>_0x37e46b[_0x25cfda(0x15d)]!=_0x2241a4),logHistory('error',_0x25cfda(0x14c)+_0x2241a4),_0x5d141d=!![]):(lastOrders=lastOrders[_0x25cfda(0xe9)](_0x552d5e=>_0x552d5e[_0x25cfda(0x15d)]!=_0x2241a4),await handleError(_0x4ff4f3,_0x25cfda(0x1db),_0x2241a4));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x25cfda(0x236)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5c2674=config[_0x25cfda(0x1f1)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x25cfda(0x177)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4a9879=_0x25cfda;validateOrders(_0x4a9879(0xc5));},_0x5c2674);}else unlockOrders();_0x5d141d&&config[_0x25cfda(0x230)]&&await pauseBot(_0x25cfda(0x1df)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x25cfda(0x11b),_0x25cfda(0x14f)));}else{if(coolingDown)!config[_0x25cfda(0x230)]&&logHistory(_0x25cfda(0x200),_0x25cfda(0x203));else lockOrders!=ORDERS[_0x25cfda(0x22e)]&&(!config[_0x25cfda(0x230)]&&(config[_0x25cfda(0x1f1)]==_0x25cfda(0x213)?logHistory(_0x25cfda(0x200),_0x25cfda(0x137)):logHistory(_0x25cfda(0x200),_0x25cfda(0x149))));}}function persistOpenOrders(_0x1a8080){const _0x20ba9b=_0x1a675f,_0x1f5eec={...config,'openOrders':_0x1a8080};let _0x31b321=dbConfig[_0x20ba9b(0x1cf)](_0x20ba9b(0xc7))[_0x20ba9b(0x163)]({'botID':botID})[_0x20ba9b(0x153)]();_0x31b321&&dbConfig[_0x20ba9b(0x1cf)](_0x20ba9b(0xc7))[_0x20ba9b(0x163)]({'botID':botID})['assign'](_0x1f5eec)[_0x20ba9b(0xfe)]();}function restoreOrders(){const _0x5ecae1=_0x1a675f;let _0x2803e7;config['openOrders']&&allOpenOrders['forEach'](_0x3e003f=>{const _0x3ca3f6=_0x4050,_0x3420ce=config[_0x3ca3f6(0x13c)][_0x3ca3f6(0x163)](_0x49993e=>_0x49993e[_0x3ca3f6(0x190)]==_0x3e003f['id']);_0x3420ce&&(lastOrders[_0x3ca3f6(0x223)](_0x3420ce),_0x2803e7=_0x3e003f[_0x3ca3f6(0x215)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x5ecae1(0x1a2)],validateOrdersState=_0x5ecae1(0x170),allOrdersPlaced=!![];const _0xa3fccd=new Date()[_0x5ecae1(0x1c9)](),_0x153477=config[_0x5ecae1(0x1f1)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x5ecae1(0x177)]*0x3c*0x3e8;if(_0x2803e7+_0x153477>_0xa3fccd){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x10768b=_0x5ecae1;validateOrders(_0x10768b(0xc5));},_0x2803e7+_0x153477-_0xa3fccd);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x54cc43=_0x1a675f;if(!coinsLoaded){process[_0x54cc43(0x157)]({'telegrammsg':_0x54cc43(0x172)},_0xfc5984=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x40ea59='';if(config[_0x54cc43(0x116)])_0x40ea59='<b>'+config[_0x54cc43(0xc8)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x40ea59=_0x54cc43(0x12c)+botID+_0x54cc43(0xda);const _0x110f01=getKPIs(_0x54cc43(0x207)),_0x738e89=getKPIs(_0x54cc43(0x1bf),config[_0x54cc43(0x1bf)]),_0x43f051=getKPIs(_0x54cc43(0xed)),_0x3b14b4=getKPIs(_0x54cc43(0x233),config[_0x54cc43(0x1bf)]);_0x40ea59+=_0x54cc43(0x12a),_0x40ea59+=_0x110f01[_0x54cc43(0xf1)]+'\x20:\x20'+_0x110f01[_0x54cc43(0x153)]+'\x0a',_0x40ea59+=_0x110f01[_0x54cc43(0xb8)]+':\x20'+_0x110f01['change']+'%\x0a',_0x40ea59+=_0x738e89[_0x54cc43(0xf1)]+'\x20:\x20'+_0x738e89['value']+'\x0a',_0x40ea59+=_0x738e89[_0x54cc43(0xb8)]+':\x20'+_0x738e89[_0x54cc43(0xe2)]+'%\x0a',_0x40ea59+=_0x43f051[_0x54cc43(0xf1)]+':\x20'+_0x43f051[_0x54cc43(0x153)]+'\x20('+config[_0x54cc43(0x207)]+')\x0a',_0x40ea59+=_0x43f051['rightTxt']+':\x20'+_0x43f051[_0x54cc43(0xe2)]+_0x54cc43(0x16e)+config[_0x54cc43(0x207)]+')\x0a',_0x40ea59+=_0x3b14b4[_0x54cc43(0xf1)]+':\x20'+_0x3b14b4[_0x54cc43(0x153)]+'\x20('+config[_0x54cc43(0x1bf)]+')\x0a',_0x40ea59+=_0x3b14b4['rightTxt']+':\x20'+_0x3b14b4[_0x54cc43(0xe2)]+'%\x20('+config[_0x54cc43(0x1bf)]+')\x0a',_0x40ea59+=_0x54cc43(0xc9),process[_0x54cc43(0x157)]({'telegrammsg':_0x40ea59},_0x1bcd97=>{});}async function sendPortfolioTelegram(){const _0x559eab=_0x1a675f;if(!coinsLoaded){process[_0x559eab(0x157)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x931cff=>{});return;}let _0x5e3807='';if(config[_0x559eab(0x116)])_0x5e3807=_0x559eab(0x1a3)+config[_0x559eab(0xc8)]+_0x559eab(0x182);else _0x5e3807=_0x559eab(0x12c)+botID+_0x559eab(0x182);_0x5e3807+=_0x559eab(0x12a),_0x5e3807+=_0x559eab(0x171),_0x5e3807+=_0x559eab(0x205),_0x5e3807+=_0x559eab(0x171),currentCoins[_0x559eab(0x1d4)](_0x2b490d=>{const _0x41d957=_0x559eab;_0x5e3807+=_0x2b490d[_0x41d957(0xb7)]['padEnd'](0x7)+'|\x20'+formatPad(_0x2b490d[_0x41d957(0x178)],0x2,0x6)+'|\x20'+formatPad(_0x2b490d[_0x41d957(0x1ae)],0x2,0x6)+'|\x20'+formatPad(_0x2b490d['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5e3807+=_0x559eab(0xc9),process[_0x559eab(0x157)]({'telegrammsg':_0x5e3807},_0x279ae1=>{});}function formatPad(_0x907817,_0x1d8f08,_0x2e596b){const _0x12a961=_0x1a675f,_0x4cf5da=formatResultString(_0x907817,_0x1d8f08);return _0x4cf5da?_0x4cf5da[_0x12a961(0x108)](_0x2e596b):''[_0x12a961(0x108)](_0x2e596b);}function logHistory(_0x324992,_0x2aca73,_0xd234e0=''){const _0x38314e=_0x1a675f;let _0x51bf8d={'time':getTimeStamp(),'type':_0x324992,'event':_0x2aca73};dbLogs[_0x38314e(0x1cf)](_0x38314e(0x1b4))['push'](_0x51bf8d)[_0x38314e(0xfe)]();if(_0xd234e0=='')_0xd234e0=_0x2aca73;proxyEmit(_0x38314e(0x175),{'log':_0x51bf8d,'summary':_0xd234e0}),process[_0x38314e(0x157)]({'telegram':{..._0x51bf8d,'botname':config['botname'],'showname':config['showname']}},_0x55fbc7=>{}),logger['full'](''+_0x51bf8d[_0x38314e(0x175)]);}function emitHistory(_0x4a301e={}){const _0x4c8e57=_0x1a675f;Object[_0x4c8e57(0x199)](_0x4a301e)[_0x4c8e57(0x236)]==0x0&&(_0x4a301e={'type':[_0x4c8e57(0x15f),_0x4c8e57(0x175)],'event':'','page':0x1});if(_0x4a301e[_0x4c8e57(0x202)][_0x4c8e57(0x23e)](_0x4c8e57(0x175)))_0x4a301e[_0x4c8e57(0x202)][_0x4c8e57(0x21c)](_0x4a301e[_0x4c8e57(0x202)][_0x4c8e57(0x13e)](_0x4c8e57(0x175)),0x1,'error',_0x4c8e57(0x240),'success');if(dbLogs[_0x4c8e57(0x1ff)](_0x4c8e57(0x1b4))[_0x4c8e57(0x153)]()){let _0xc2b471=dbLogs['get'](_0x4c8e57(0x1b4))[_0x4c8e57(0xe9)](_0x2cad62=>{const _0x55142f=_0x4c8e57;if(_0x4a301e[_0x55142f(0x202)]['length']==0x0)return![];else return _0x4a301e[_0x55142f(0x202)][_0x55142f(0x23e)](_0x2cad62[_0x55142f(0x202)]);})['filter'](_0x422278=>{const _0x3dec14=_0x4c8e57;if(_0x4a301e['event']=='')return!![];else return _0x422278['event'][_0x3dec14(0x20e)]()[_0x3dec14(0x23e)](_0x4a301e[_0x3dec14(0x175)][_0x3dec14(0x20e)]());})['sortBy'](_0x4c8e57(0x1ce)),_0x1bfe6e=_0xc2b471[_0x4c8e57(0x153)]()['length'];_0xc2b471=_0xc2b471[_0x4c8e57(0xfd)]()['slice']((_0x4a301e[_0x4c8e57(0x16a)]-0x1)*logPageSize,_0x4a301e[_0x4c8e57(0x16a)]*logPageSize-0x1)[_0x4c8e57(0xfd)]()['value'](),proxyEmit(_0x4c8e57(0x147),{'logs':_0xc2b471,'total':_0x1bfe6e});}else proxyEmit(_0x4c8e57(0x147),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4020bf){const _0x1f5467=_0x1a675f;if(dbLogs[_0x1f5467(0x1ff)](_0x1f5467(0x1b4))['value']()){const _0x3c439f=dbLogs[_0x1f5467(0x1cf)](_0x1f5467(0x1b4))[_0x1f5467(0x1a0)]('time')['filter'](_0x4d43db=>{const _0x3cfc20=_0x1f5467;return _0x4d43db['type']==_0x3cfc20(0x15f);})['value']();dbLogs[_0x1f5467(0x1cf)](_0x1f5467(0x1b4))[_0x1f5467(0x1ba)]()[_0x1f5467(0xfe)](),dbLogs[_0x1f5467(0x1cf)](_0x1f5467(0x1b4))[_0x1f5467(0x1ac)](_0x3c439f)['write'](),emitHistory(_0x4020bf);}}async function pauseBot(_0x4a6372=''){const _0x2a6124=_0x1a675f,_0x53d107=new Date()['getTime']();if(!lastErrorShown||_0x53d107-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x53d107;!lastBotPause?(lastBotPause=_0x53d107,consecutivePauses=0x1):(_0x53d107-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2a6124(0x157)]({'stop':_0x2a6124(0x1e4)},_0x3ef39b=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2a6124(0x1c9)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x4a6372)_0x4a6372+=_0x2a6124(0x1bd);logHistory('error',_0x4a6372+_0x2a6124(0x148)+pauseBotInterval/0xea60+_0x2a6124(0x144)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5dac65=_0x1a675f;process[_0x5dac65(0x157)]({'stop':_0x5dac65(0x1dc)},_0x55ea99=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x36cf5e,_0x43316d){const _0x8496fd=_0x1a675f;if(_0x36cf5e[_0x8496fd(0x10a)]()[_0x8496fd(0x23e)](_0x8496fd(0x24a)))return logHistory(_0x8496fd(0x200),config['exchange']+_0x8496fd(0x1f4)),![];else{if(_0x36cf5e[_0x8496fd(0x10a)]()[_0x8496fd(0x23e)](_0x8496fd(0x122)))return logHistory(_0x8496fd(0x200),config[_0x8496fd(0xc2)]+_0x8496fd(0x15e)),![];else{if(_0x36cf5e[_0x8496fd(0x10a)]()[_0x8496fd(0x23e)](_0x8496fd(0x17d)))return logHistory('error',config[_0x8496fd(0xc2)]+_0x8496fd(0x1e3)),logHistory(_0x8496fd(0x200),_0x8496fd(0x164)),![];else await handleError(_0x36cf5e,_0x43316d);}}}async function handleError(_0x385d2f,_0x12e3fb,_0x4abec6=''){const _0x5a332d=_0x1a675f,_0x2ae8b9=config[_0x5a332d(0xc2)]||_0x5a332d(0x1fc);if(_0x385d2f['toString']()[_0x5a332d(0x23e)](_0x5a332d(0x1f3)))await pauseBot(config[_0x5a332d(0xc2)]+_0x5a332d(0x1e1));else{if(_0x385d2f[_0x5a332d(0x10a)]()['includes'](_0x5a332d(0xcc)))await pauseBot(config['exchange']+_0x5a332d(0x224));else{if(_0x385d2f['toString']()[_0x5a332d(0x23e)]('RequestTimeout'))await pauseBot(config[_0x5a332d(0xc2)]+_0x5a332d(0x21f));else{if(_0x385d2f[_0x5a332d(0x10a)]()[_0x5a332d(0x23e)](_0x5a332d(0x105)))await pauseBot(config['exchange']+_0x5a332d(0x1eb));else{if(_0x385d2f[_0x5a332d(0x10a)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x5a332d(0x200),_0x12e3fb+_0x5a332d(0x104)),logHistory(_0x5a332d(0x200),_0x5a332d(0x14d)),await killBot();else{if(_0x385d2f[_0x5a332d(0x10a)]()[_0x5a332d(0x23e)](_0x5a332d(0x1a9)))logHistory(_0x5a332d(0x200),_0x12e3fb+_0x5a332d(0xfb)),logHistory(_0x5a332d(0x200),_0x5a332d(0x14d)),await killBot();else{if(_0x385d2f['toString']()[_0x5a332d(0x23e)](_0x5a332d(0x24a)))logHistory(_0x5a332d(0x200),_0x12e3fb+_0x5a332d(0x1bd)+config[_0x5a332d(0xc2)]+_0x5a332d(0xec)),logHistory(_0x5a332d(0x200),_0x5a332d(0x14d)),await killBot();else{if(_0x385d2f['toString']()[_0x5a332d(0x23e)](_0x5a332d(0x122)))logHistory(_0x5a332d(0x200),_0x12e3fb+'\x20|\x20'+config[_0x5a332d(0xc2)]+_0x5a332d(0x1fb)),logHistory(_0x5a332d(0x200),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x385d2f[_0x5a332d(0x10a)]()[_0x5a332d(0x23e)](_0x5a332d(0x17d)))logHistory(_0x5a332d(0x200),_0x12e3fb+_0x5a332d(0x1bd)+config[_0x5a332d(0xc2)]+_0x5a332d(0xcf)),logHistory(_0x5a332d(0x200),_0x5a332d(0x14d)),await killBot();else _0x385d2f[_0x5a332d(0x10a)]()['includes'](_0x5a332d(0x1c1))?logHistory(_0x5a332d(0x200),_0x12e3fb+_0x5a332d(0x229)+_0x4abec6):(logger[_0x5a332d(0x129)](_0x12e3fb+_0x5a332d(0x19f),_0x385d2f),await pauseBot(_0x5a332d(0xdf)));}}}}}}}}}function formatResult(_0x1e372b,_0x5ec5c9){return parseFloat(_0x1e372b['toFixed'](_0x5ec5c9));}function formatResultTruncate(_0x1bbbb0,_0xcf28d5){const _0x349a2b=_0x1a675f;let _0x4b6e9a=formatResultString(_0x1bbbb0,0xa),_0x149279=_0x4b6e9a[_0x349a2b(0x13e)]('.');return _0x149279!=-0x1&&(_0x4b6e9a=_0x4b6e9a['slice'](0x0,_0x149279+_0xcf28d5+0x1)),Number(_0x4b6e9a);}function formatResultString(_0x5e083e,_0x4217be){const _0x4baab7=_0x1a675f;let _0x57c4f2;if(!(''+_0x5e083e)['includes']('e'))_0x57c4f2=+(Math[_0x4baab7(0x208)](_0x5e083e+'e+'+_0x4217be)+'e-'+_0x4217be);else{let _0x49f442=(''+_0x5e083e)[_0x4baab7(0x14e)]('e'),_0x143dc6='';+_0x49f442[0x1]+_0x4217be>0x0&&(_0x143dc6='+'),_0x57c4f2=+(Math[_0x4baab7(0x208)](+_0x49f442[0x0]+'e'+_0x143dc6+(+_0x49f442[0x1]+_0x4217be))+'e-'+_0x4217be);}return Number(_0x57c4f2)[_0x4baab7(0x13b)](_0x4217be);}function getServerTime(){const _0x53f7f0=_0x1a675f,_0x100846=new Date();return _0x100846[_0x53f7f0(0x1b5)]()+'/'+(_0x100846[_0x53f7f0(0x245)]()+0x1)[_0x53f7f0(0x10a)]()[_0x53f7f0(0x108)](0x2,'0')+'/'+_0x100846['getDate']()[_0x53f7f0(0x10a)]()[_0x53f7f0(0x108)](0x2,'0')+'\x20'+_0x100846[_0x53f7f0(0x1f8)]()[_0x53f7f0(0x10a)]()[_0x53f7f0(0x108)](0x2,'0')+':'+_0x100846[_0x53f7f0(0xd8)]()[_0x53f7f0(0x10a)]()[_0x53f7f0(0x108)](0x2,'0')+':'+_0x100846['getSeconds']()[_0x53f7f0(0x10a)]()[_0x53f7f0(0x108)](0x2,'0');}function getTimeStamp(){const _0x2d4c6f=_0x1a675f,_0x1aa0ae=shiftedTime();return _0x1aa0ae[_0x2d4c6f(0x1b5)]()+'/'+(_0x1aa0ae[_0x2d4c6f(0x245)]()+0x1)[_0x2d4c6f(0x10a)]()[_0x2d4c6f(0x108)](0x2,'0')+'/'+_0x1aa0ae[_0x2d4c6f(0x136)]()[_0x2d4c6f(0x10a)]()['padStart'](0x2,'0')+'\x20'+_0x1aa0ae[_0x2d4c6f(0x1f8)]()[_0x2d4c6f(0x10a)]()['padStart'](0x2,'0')+':'+_0x1aa0ae[_0x2d4c6f(0xd8)]()['toString']()['padStart'](0x2,'0')+':'+_0x1aa0ae['getSeconds']()[_0x2d4c6f(0x10a)]()[_0x2d4c6f(0x108)](0x2,'0');}function getDate(){const _0x2f214f=_0x1a675f,_0x113865=shiftedTime();return _0x113865[_0x2f214f(0x1b5)]()+'/'+(_0x113865['getMonth']()+0x1)[_0x2f214f(0x10a)]()[_0x2f214f(0x108)](0x2,'0')+'/'+_0x113865[_0x2f214f(0x136)]()[_0x2f214f(0x10a)]()[_0x2f214f(0x108)](0x2,'0');}function getHour(){const _0x30a0d9=_0x1a675f,_0x46a791=shiftedTime();return _0x46a791[_0x30a0d9(0x1f8)]()[_0x30a0d9(0x10a)]()[_0x30a0d9(0x108)](0x2,'0');}function sleep(_0x59704e){return new Promise(_0x45344a=>setTimeout(_0x45344a,_0x59704e));}function shiftedTime(){const _0x4330f1=_0x1a675f,_0x51b4e4=new Date();let _0x454b08=_0x51b4e4;if(config&&config[_0x4330f1(0x23c)]!==0x0)_0x454b08=fns[_0x4330f1(0x181)](_0x51b4e4,{'hours':config[_0x4330f1(0x23c)]});return _0x454b08;}function timer(_0x1444db){const _0x288c8b=_0x1a675f,_0x5abd8a=new Date();!lasttime?console[_0x288c8b(0x161)](getTimeStamp()+':\x20timer\x20>',_0x1444db,_0x5abd8a):console[_0x288c8b(0x161)](getTimeStamp()+_0x288c8b(0x22c),_0x1444db,(_0x5abd8a-lasttime)/0x3e8),lasttime=_0x5abd8a;}