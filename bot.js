const _0x3859de=_0x147e;(function(_0xf78a8e,_0x2baea7){const _0x18dc46=_0x147e,_0x7ed371=_0xf78a8e();while(!![]){try{const _0x255408=-parseInt(_0x18dc46(0x99))/0x1+-parseInt(_0x18dc46(0x101))/0x2*(parseInt(_0x18dc46(0x16f))/0x3)+parseInt(_0x18dc46(0x10e))/0x4+-parseInt(_0x18dc46(0x12e))/0x5+parseInt(_0x18dc46(0xc2))/0x6*(-parseInt(_0x18dc46(0x100))/0x7)+-parseInt(_0x18dc46(0x102))/0x8+parseInt(_0x18dc46(0x16b))/0x9;if(_0x255408===_0x2baea7)break;else _0x7ed371['push'](_0x7ed371['shift']());}catch(_0x32d25d){_0x7ed371['push'](_0x7ed371['shift']());}}}(_0x7539,0x5951e));const _0x17268e=function(){let _0x1843df=!![];return function(_0x24fd96,_0x4ef3e7){const _0x5cbb54=_0x1843df?function(){if(_0x4ef3e7){const _0x478cc4=_0x4ef3e7['apply'](_0x24fd96,arguments);return _0x4ef3e7=null,_0x478cc4;}}:function(){};return _0x1843df=![],_0x5cbb54;};}(),_0x24879a=_0x17268e(this,function(){const _0x4666f0=_0x147e;return _0x24879a[_0x4666f0(0x173)]()[_0x4666f0(0xc1)](_0x4666f0(0xbc))[_0x4666f0(0x173)]()[_0x4666f0(0xcc)](_0x24879a)[_0x4666f0(0xc1)](_0x4666f0(0xbc));});_0x24879a();'use strict';const ccxt=require('ccxt'),low=require(_0x3859de(0x172)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3859de(0x16a)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x3859de(0x13e))[_0x3859de(0x11c)];let exchange,wsClient;global[_0x3859de(0x118)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3859de(0x15e))[_0x3859de(0xa2)],botID=process[_0x3859de(0x174)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x3859de(0xae)](botID))return console[_0x3859de(0x8a)](_0x3859de(0x17d)+botID+_0x3859de(0x120)),process['exit'](0x1);const userID=process[_0x3859de(0x174)][0x3]||'',configpath=userID?_0x3859de(0xda)+userID+'/':_0x3859de(0xda);function _0x7539(){const _0x15beb2=['performance','currency','BNB','showname','balances','263510ucKvbc','configuration','startnumber','ask','fromCodePoint','AuthenticationError','wsKey','coins','RSA-OAEP','version','botname','-results.json','event-history','orderType','WebSockets(','recreateHistory()','sells','sell','usd','OrderNotFound','wss://stream.binance.us:9443','test','starting-balances','Invalid\x20quantity','abs','botID','parseISO','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','MIN_NOTIONAL','Order:\x20','getTime','initws()','basecoin','getFiat()','placeOrder','(((.+)+)+)+$','send','BTCBUSD','getStartingBalances','EUR','search','159126KAHccc','timestamp','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','-performance.json','configuration-stored','write','************','running','emojisell','args','constructor','shift','getCloses()','BUSD','excluded','HOT/BTC','distribution','outboundAccountPosition','eur','remove','cancelOrder()','yyyy/MM/dd\x20HH:mm:ss','slice','Binance\x20API\x20key\x20is\x20invalid','./config/','startprice','Executed\x20','loadMarkets',':\x20Bot\x20','closeWs','\x20>\x20','indexOf','binance','getMonth','emojibuy','progress','format','Order\x20filled:\x20','replace','price','bot-','yyyy-MM-dd\x27T\x27HH:mm:ss','padStart','cost','toLowerCase','split','symbols','BTCUSDT','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','data','FILLED','bb-settings.json','cancelOrder','eventType','reduce','orderId','side','last','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','fetchBalance','Binance\x20API\x20secret\x20is\x20invalid','remainingSymbols','112wIozjL','2xqNoeD','4055000byfnjW','getMinutes','asset','market','-events.json','Order(s)\x20filled\x20-\x20balancing\x20resumed','breakeven','success','getFullYear','RequestTimeout',')\x20|\x20Error\x20details:\x20','apiKey','2627616PuPjsN','type','Market','storeHeadless','find','headless','function','BTC/USDT','loadSymbols()','number','ticker','emitHistory','fetchOrders','parse','Crypt','DDoSProtection','forEach','assign',',\x20must\x20be\x20a\x203\x20digit\x20number','storeConfiguration','buy','filled','eachDayOfInterval','InsufficientFunds','buys','\x20minutes\x20-\x20balancing\x20resumed','fees','Bot\x20','kill','keys','logs','apiSecret','1793940KeZSOk','map','datetime','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','BTC','target','Unfilled\x20order(s)\x20canceled\x20after\x20','valid','message','DAI/','privateKey','fetchOHLCV','date','amount','filter','hybrid-crypto-js','executionReport','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','realized','defaults','add','settings','exchange','yyyy/MM/dd','startdate','getSeconds','reverse','time','bot','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','reconnected','isArray','limit-low','entries','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','availableBalance','splice','wss://stream.binance.com:9443','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','length','value','kline','subscribeSpotKline','wsMarket','error','./version.json','Pausing\x20bot\x20for\x205\x20minutes\x20(','coin','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','decrypt','round','userData','sort','sortBy','\x20order:\x20','sha256','cooldown','date-fns','16654194Ktjbkt','push','order','fee','1764021tPvlQI','restart','bb-secure.json','lowdb','toString','argv','page','symbol','Performance\x20recreation\x20completed\x20successfully','stringify','timeshift','initclient','differenceInSeconds','min','Error:\x20Invalid\x20argument\x20','coin-loading-progress','limit-high','portfolio','ordertype','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','cancelLoading','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','trade','binanceus','USDT','BTC/EUR','bid','Limit\x20(low-margin)','event','recreate','API-key\x20format\x20invalid','delta','getHours','limit','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fetchTickers','getPortfolio()','has','log','includes','get','InvalidNonce','Order\x20amount\x20is\x20invalid:\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','timeout','limits','Order(s)\x20validated\x20-\x20balancing\x20resumed','threshold'];_0x7539=function(){return _0x15beb2;};return _0x7539();}!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x3859de(0xea)+botID+'-config.json',logfile=configpath+_0x3859de(0xea)+botID+_0x3859de(0x106),performancefile=configpath+'bot-'+botID+_0x3859de(0xc5),coinresultsfile=configpath+_0x3859de(0xea)+botID+_0x3859de(0xa4),settingsfile=configpath+_0x3859de(0xf5),securefile=configpath+_0x3859de(0x171),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3859de(0x143)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3859de(0x143)]({'data':[]})[_0x3859de(0xc7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x3859de(0xc7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3859de(0x143)]({'coins':[]})[_0x3859de(0xc7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x3859de(0x188)},'usd':{'coin':_0x3859de(0xf1),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x17a5a7)=>{},'debug':(..._0x2e917d)=>{},'notice':(..._0x335d14)=>{},'info':(..._0x555ef1)=>{},'warning':(..._0x2abdc0)=>{},'error':async function(..._0x1f6979){const _0x1005ea=_0x3859de,_0x2fbd1d=new Date()[_0x1005ea(0xb7)]();if(!lastErrorShown||_0x2fbd1d-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1005ea(0xb7)](),logHistory(_0x1005ea(0x15d),_0x1005ea(0xa7)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x3f5f6a='';if(_0x1f6979[0x0])_0x3f5f6a+=_0x1f6979[0x0];if(_0x1f6979[0x1]&&_0x1f6979[0x1][_0x1005ea(0x15d)]&&_0x1f6979[0x1][_0x1005ea(0x15d)][_0x1005ea(0x137)])_0x3f5f6a+='\x20-\x20'+_0x1f6979[0x1][_0x1005ea(0x15d)]['message'];logging(_0x1005ea(0xa7)+consecutivePauses+_0x1005ea(0x10c),''+_0x3f5f6a),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x3859de(0x168),'rsaStandard':_0x3859de(0xa1)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x3859de(0x179)]&&updateTimeshift(settings[_0x3859de(0x179)]);process['send']({'started':_0x3859de(0xc9)}),initializeProcessListeners();function proxyEmit(_0x4d2fd7,_0x3a1bcd=null){const _0x23a284=_0x3859de;process[_0x23a284(0xbd)]({'function':_0x4d2fd7,'args':_0x3a1bcd});}function initializeProcessListeners(){const _0x408ee3=_0x3859de;process['on'](_0x408ee3(0x137),_0xd5eba1=>{const _0x1bdca5=_0x408ee3;switch(Object[_0x1bdca5(0x12b)](_0xd5eba1)[0x0]){case'timeshift':_0xd5eba1[_0x1bdca5(0x179)]!=undefined&&(settings[_0x1bdca5(0x179)]=_0xd5eba1[_0x1bdca5(0x179)],updateTimeshift(settings[_0x1bdca5(0x179)]));break;case _0x1bdca5(0x114):switch(_0xd5eba1[_0x1bdca5(0x114)]){case _0x1bdca5(0x17a):initclient();break;case _0x1bdca5(0x119):emitHistory(_0xd5eba1[_0x1bdca5(0xcb)]);break;case'getPortfolio':getPortfolio(_0xd5eba1[_0x1bdca5(0xcb)]);break;case _0x1bdca5(0x121):storeConfiguration(_0xd5eba1[_0x1bdca5(0xcb)]);break;case _0x1bdca5(0x111):storeHeadless(_0xd5eba1[_0x1bdca5(0xcb)]);break;case _0x1bdca5(0xbf):getStartingBalances();break;case _0x1bdca5(0xbb):placeOrder(_0xd5eba1['args']);break;case _0x1bdca5(0x183):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x42425d=_0x3859de;if(pidBalances)clearTimeout(pidBalances);if(config[_0x42425d(0x10d)]!=''){await initExchange(config[_0x42425d(0x10d)],config[_0x42425d(0x12d)]);let _0x13cfe7=await loadSymbols();_0x13cfe7&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x5b9603,_0xa3c24e){const _0x419985=_0x3859de,_0x4989c4=ccxt[config[_0x419985(0x146)]];let _0xc4b700;switch(config['exchange']){case _0x419985(0xe2):_0xc4b700=_0x419985(0x155);break;case _0x419985(0x186):_0xc4b700=_0x419985(0xad);break;default:_0xc4b700='wss://stream.binance.com:9443';}exchange=new _0x4989c4({'apiKey':_0x5b9603,'secret':_0xa3c24e,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5b9603,'api_secret':_0xa3c24e,'beautify':!![],'wsUrl':_0xc4b700},logger),config[_0x419985(0x146)]==_0x419985(0x186)&&(stablecoins={'eur':{'coin':_0x419985(0xbe),'symbol':'BTC/BUSD'},'usd':{'coin':'BTCUSDT','symbol':_0x419985(0x115)}});}async function loadSymbols(){const _0xb243b0=_0x3859de;let _0x3e529b;try{markets=await exchange[_0xb243b0(0xdd)]();const _0x52adc7=[_0xb243b0(0x138),_0xb243b0(0xd1),'HOT/EUR'];allSymbols=exchange[_0xb243b0(0xf0)][_0xb243b0(0x13d)](_0x297daf=>{const _0x4f69b5=_0xb243b0;let _0x584387=![];return _0x52adc7[_0x4f69b5(0x11e)](_0x142c3e=>{const _0x1ba401=_0x4f69b5;if(_0x297daf[_0x1ba401(0x8b)](_0x142c3e))_0x584387=!![];}),!_0x584387;}),_0x3e529b=!![];}catch(_0x368eb7){await handleError(_0x368eb7,_0xb243b0(0x116)),_0x3e529b=![];}return _0x3e529b;}async function initbot(){const _0x1f1543=_0x3859de;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0xac3a57=dbCoinResults[_0x1f1543(0x8c)](_0x1f1543(0xa0))[_0x1f1543(0x159)]();if(_0xac3a57[_0x1f1543(0x158)]==0x0)await resetCoinResults();}async function initclient(){const _0xe6c1c3=_0x3859de;proxyEmit(_0xe6c1c3(0x9a),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4bfaba=_0x3859de;wsinitialized=![];ws1&&(ws1[_0x4bfaba(0x11e)](_0x3ea7ac=>{const _0x1be473=_0x4bfaba;try{wsClient[_0x1be473(0xdf)](_0x3ea7ac);}catch(_0x30bbe8){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x528e10){}ws2=null;}}async function initws(){const _0xe1b5d3=_0x3859de;cleanws();let _0x48d83e=[];currentCoins[_0xe1b5d3(0x11e)](_0x14f54f=>{const _0x3dbebd=_0xe1b5d3;if(_0x14f54f[_0x3dbebd(0x160)]!=config['basecoin'])_0x48d83e[_0x3dbebd(0x16c)](noslash(_0x14f54f[_0x3dbebd(0x176)]));});if(!_0x48d83e[_0xe1b5d3(0x8b)](stablecoins[_0xe1b5d3(0xd4)]['coin']))_0x48d83e[_0xe1b5d3(0x16c)](stablecoins[_0xe1b5d3(0xd4)][_0xe1b5d3(0x160)]);if(!_0x48d83e[_0xe1b5d3(0x8b)](stablecoins['usd'][_0xe1b5d3(0x160)]))_0x48d83e[_0xe1b5d3(0x16c)](stablecoins[_0xe1b5d3(0xab)][_0xe1b5d3(0x160)]);if(!_0x48d83e[_0xe1b5d3(0x8b)](_0xe1b5d3(0x96)+config[_0xe1b5d3(0xb9)]))_0x48d83e[_0xe1b5d3(0x16c)](_0xe1b5d3(0x96)+config[_0xe1b5d3(0xb9)]);try{_0x48d83e[_0xe1b5d3(0x11e)]((_0x5e45eb,_0x454e93)=>{const _0x509da6=_0xe1b5d3;ws1[_0x454e93]=wsClient[_0x509da6(0x15b)](_0x5e45eb,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0x37989a=>{const _0x5276bd=_0xe1b5d3;if(!Array[_0x5276bd(0x14f)](_0x37989a)&&!_0x37989a[_0x5276bd(0x9f)][_0x5276bd(0x8b)](_0x5276bd(0x164))){if(_0x37989a[_0x5276bd(0xf7)]===_0x5276bd(0x15a)){global[_0x5276bd(0x118)][_0x37989a['kline']['symbol']]=_0x37989a[_0x5276bd(0x15a)]['close'];return;}}else{if(!Array[_0x5276bd(0x14f)](_0x37989a)&&_0x37989a['wsKey'][_0x5276bd(0x8b)]('userData')){if(_0x37989a[_0x5276bd(0x15c)][_0x5276bd(0x8b)]('spot')){updateNumberCoins(_0x37989a);return;}}}}),wsClient['on'](_0xe1b5d3(0x14e),async _0x49805c=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x22657d){await handleError(_0x22657d,_0xe1b5d3(0xb8));}let _0x37bf5f,_0x2e4d4b=0x0;loading['remainingSymbols']=[];let _0x13f1bc=0x0;currentCoins['forEach'](_0x5771a2=>{const _0x5d36fb=_0xe1b5d3;if(_0x5771a2['coin']!=config[_0x5d36fb(0xb9)])loading['remainingSymbols'][_0x5d36fb(0x16c)](_0x5771a2[_0x5d36fb(0x176)]);}),loadingCanceled=![];while(_0x37bf5f!=currentCoins['length']-0x1){_0x37bf5f=0x0,currentCoins[_0xe1b5d3(0x11e)](_0x433e2d=>{const _0x3f2ab6=_0xe1b5d3;_0x433e2d[_0x3f2ab6(0x160)]!=config[_0x3f2ab6(0xb9)]&&global[_0x3f2ab6(0x118)][noslash(_0x433e2d[_0x3f2ab6(0x176)])]&&(loading[_0x3f2ab6(0xff)]=loading['remainingSymbols']['filter'](_0xc20436=>_0xc20436!=_0x433e2d[_0x3f2ab6(0x176)]),_0x37bf5f++);}),loading[_0xe1b5d3(0xe5)]=Math[_0xe1b5d3(0x163)](_0x37bf5f/(currentCoins['length']-0x1)*0x64);_0x13f1bc>0x1e*0x5&&(loading[_0xe1b5d3(0x90)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x37bf5f!=_0x2e4d4b&&(_0x2e4d4b=_0x37bf5f,emitLoadingProgress()),_0x13f1bc++,await sleep(0xc8);}if(_0x37bf5f==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x1e498d=_0x3859de;proxyEmit(_0x1e498d(0x17e),loading);}async function getFiat(){const _0x518da8=_0x3859de;let _0x517c09=0x0,_0x4b18ed=0x0;try{_0x517c09=global['ticker'][stablecoins[_0x518da8(0xd4)][_0x518da8(0x160)]],_0x4b18ed=global[_0x518da8(0x118)][stablecoins['usd']['coin']];}catch(_0x550690){await handleError(_0x550690,_0x518da8(0xba));}return{'eur':Number(_0x517c09),'usd':Number(_0x4b18ed)};}async function setStartDatePerformance(_0x20c063){const _0x420ca4=_0x3859de,_0x676e17=fns[_0x420ca4(0xe6)](new Date(_0x20c063[_0x420ca4(0x148)]),_0x420ca4(0x147));let _0x37e8a9=[];_0x37e8a9[stablecoins[_0x420ca4(0xd4)][_0x420ca4(0x160)]]=await getCloses(stablecoins[_0x420ca4(0xd4)][_0x420ca4(0x176)],new Date(_0x20c063[_0x420ca4(0x148)]),0x1),_0x37e8a9[stablecoins[_0x420ca4(0xab)][_0x420ca4(0x160)]]=await getCloses(stablecoins[_0x420ca4(0xab)][_0x420ca4(0x176)],new Date(_0x20c063['startdate']),0x1);let _0x4f8289,_0x4cfca5=[];_0x20c063[_0x420ca4(0x180)]['forEach'](_0x449dec=>{const _0x3d2b45=_0x420ca4;!_0x449dec[_0x3d2b45(0xd0)]&&_0x4cfca5['push']({'coin':_0x449dec['coin'],'number':_0x449dec['startnumber'],'price':_0x449dec[_0x3d2b45(0xdb)]});}),_0x4f8289={'date':_0x676e17,'eur':_0x37e8a9[stablecoins[_0x420ca4(0xd4)]['coin']][0x0],'usd':_0x37e8a9[stablecoins[_0x420ca4(0xab)][_0x420ca4(0x160)]][0x0],'coins':_0x4cfca5};let _0x4e348b=dbPerformance[_0x420ca4(0x8c)]('data')[_0x420ca4(0x112)]({'date':_0x676e17})['value']();_0x4e348b?dbPerformance['get'](_0x420ca4(0xf3))[_0x420ca4(0x112)]({'date':_0x676e17})[_0x420ca4(0x11f)](_0x4f8289)['write']():dbPerformance[_0x420ca4(0x8c)]('data')[_0x420ca4(0x16c)](_0x4f8289)[_0x420ca4(0xc7)](),_0x4e348b=dbPerformance[_0x420ca4(0x8c)](_0x420ca4(0xf3))[_0x420ca4(0x166)](_0x420ca4(0x13b))[_0x420ca4(0x159)](),_0x4e348b[_0x420ca4(0x11e)](_0x4f7503=>{const _0x1167df=_0x420ca4;_0x4f7503[_0x1167df(0x13b)]<_0x676e17&&dbPerformance['get'](_0x1167df(0xf3))[_0x1167df(0xd5)]({'date':_0x4f7503[_0x1167df(0x13b)]})[_0x1167df(0xc7)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1c91a5){const _0x27a7e1=_0x3859de;let _0x1d8bd8,_0x30fe22=[];logHistory(_0x27a7e1(0x109),_0x27a7e1(0xf2)),_0x1c91a5[_0x27a7e1(0x180)][_0x27a7e1(0x11e)](_0x17eb92=>{const _0x307dad=_0x27a7e1;if(_0x17eb92[_0x307dad(0x160)]!=config[_0x307dad(0xb9)]&&!_0x17eb92[_0x307dad(0xd0)])_0x30fe22[_0x307dad(0x16c)]({'coin':_0x17eb92[_0x307dad(0x160)],'symbol':_0x17eb92['symbol']});});let _0x42f29a=[];try{const _0x5b479c=fns[_0x27a7e1(0xe6)](fns[_0x27a7e1(0xb3)](_0x1c91a5[_0x27a7e1(0x148)][_0x27a7e1(0xe8)](/\//g,'-')),_0x27a7e1(0xeb));for(const _0x52d1e2 of _0x30fe22){if(_0x52d1e2[_0x27a7e1(0x160)]!=config[_0x27a7e1(0xb9)])_0x1d8bd8=await exchange[_0x27a7e1(0x11a)](_0x52d1e2[_0x27a7e1(0x176)],Date[_0x27a7e1(0x11b)](_0x5b479c));_0x1d8bd8[_0x27a7e1(0x11e)](_0x18d023=>{const _0x437fef=_0x27a7e1,_0x55d2ba=_0x52d1e2[_0x437fef(0x176)][_0x437fef(0x8b)](config[_0x437fef(0xb9)]+'/'),_0x28c8c3=fns[_0x437fef(0xe6)](fns[_0x437fef(0xb3)](_0x18d023[_0x437fef(0x130)]),_0x437fef(0xd7)),_0x5a82bc=fns['format'](fns['parseISO'](_0x18d023[_0x437fef(0x130)]),_0x437fef(0x147));let _0x3fb2b1;if(_0x18d023[_0x437fef(0xfa)]=='buy'&&_0x55d2ba==![])_0x3fb2b1=_0x18d023[_0x437fef(0x13c)];if(_0x18d023['side']=='buy'&&_0x55d2ba==!![])_0x3fb2b1=-_0x18d023['amount']*_0x18d023['price'];if(_0x18d023[_0x437fef(0xfa)]==_0x437fef(0xaa)&&_0x55d2ba==![])_0x3fb2b1=-_0x18d023['amount'];if(_0x18d023[_0x437fef(0xfa)]==_0x437fef(0xaa)&&_0x55d2ba==!![])_0x3fb2b1=_0x18d023['amount']*_0x18d023['price'];_0x42f29a[_0x437fef(0x16c)]({'timestamp':_0x28c8c3,'date':_0x5a82bc,'coin':_0x52d1e2[_0x437fef(0x160)],'symbol':_0x52d1e2['symbol'],'type':_0x18d023[_0x437fef(0x10f)],'side':_0x18d023[_0x437fef(0xfa)],'reverse':_0x55d2ba,'amount':formatResult(_0x18d023[_0x437fef(0x123)],0x8),'filled':formatResult(_0x18d023[_0x437fef(0x123)],0x8),'coinamount':formatResult(_0x3fb2b1,0x8),'price':formatResult(_0x18d023[_0x437fef(0xe9)],0x8)});let _0x53e144;if(_0x18d023[_0x437fef(0xfa)]=='buy'&&_0x55d2ba==![])_0x53e144=-_0x18d023[_0x437fef(0x13c)]*_0x18d023[_0x437fef(0xe9)];if(_0x18d023['side']==_0x437fef(0x122)&&_0x55d2ba==!![])_0x53e144=_0x18d023[_0x437fef(0x13c)];if(_0x18d023[_0x437fef(0xfa)]==_0x437fef(0xaa)&&_0x55d2ba==![])_0x53e144=_0x18d023[_0x437fef(0x13c)]*_0x18d023[_0x437fef(0xe9)];if(_0x18d023[_0x437fef(0xfa)]=='sell'&&_0x55d2ba==!![])_0x53e144=-_0x18d023[_0x437fef(0x13c)];_0x42f29a[_0x437fef(0x16c)]({'date':_0x5a82bc,'coin':config[_0x437fef(0xb9)],'coinamount':formatResult(_0x53e144,0x8)});});}_0x42f29a[_0x27a7e1(0x165)]((_0x2f83c9,_0x2fb7b7)=>_0x2f83c9[_0x27a7e1(0xc3)]>_0x2fb7b7[_0x27a7e1(0xc3)]?0x1:_0x2fb7b7['timestamp']>_0x2f83c9['timestamp']?-0x1:0x0),dbLogs[_0x27a7e1(0x8c)](_0x27a7e1(0x12c))['remove']()[_0x27a7e1(0xc7)](),_0x42f29a[_0x27a7e1(0x11e)](_0x16939c=>{const _0x300d93=_0x27a7e1;let _0x1de23e;_0x16939c['coin']!=config[_0x300d93(0xb9)]&&(_0x1de23e={'time':_0x16939c[_0x300d93(0xc3)],'type':_0x300d93(0x16d),'event':_0x300d93(0xb6)+_0x16939c['symbol']+'\x20'+_0x16939c['side']+'\x20#'+_0x16939c['amount']+'\x20@'+_0x16939c[_0x300d93(0xe9)]},dbLogs[_0x300d93(0x8c)](_0x300d93(0x12c))[_0x300d93(0x16c)](_0x1de23e)[_0x300d93(0xc7)]());});const _0x47dc14=fns[_0x27a7e1(0x124)]({'start':new Date(_0x1c91a5[_0x27a7e1(0x148)]),'end':new Date()})[_0x27a7e1(0x12f)](_0x4e07a7=>fns[_0x27a7e1(0xe6)](_0x4e07a7,_0x27a7e1(0x147)));let _0x35d6ef=[];_0x1c91a5[_0x27a7e1(0x180)]['forEach'](_0x200345=>{const _0x358752=_0x27a7e1;if(!_0x200345['excluded']){_0x35d6ef[_0x200345[_0x358752(0x160)]]=[];let _0x28635b=_0x200345[_0x358752(0x9b)];_0x47dc14[_0x358752(0x11e)]((_0x2a3030,_0x53b1e7)=>{const _0x58c4bd=_0x358752;let _0x52648f=_0x42f29a[_0x58c4bd(0x13d)](_0x34655e=>_0x34655e[_0x58c4bd(0x160)]==_0x200345[_0x58c4bd(0x160)]&&_0x34655e['date']==_0x2a3030);if(_0x52648f['length']!=0x0){let _0x22af87=_0x52648f[_0x58c4bd(0xf8)]((_0x241220,_0x56bbf1)=>{return _0x241220+=_0x56bbf1['coinamount'],_0x241220;},0x0);_0x28635b+=_0x22af87;}_0x35d6ef[_0x200345[_0x58c4bd(0x160)]][_0x2a3030]=_0x28635b;});}});const _0x385128=[..._0x30fe22];_0x385128[_0x27a7e1(0x16c)]({'coin':stablecoins['eur'][_0x27a7e1(0x160)],'symbol':stablecoins[_0x27a7e1(0xd4)]['symbol']}),_0x385128[_0x27a7e1(0x16c)]({'coin':stablecoins[_0x27a7e1(0xab)][_0x27a7e1(0x160)],'symbol':stablecoins[_0x27a7e1(0xab)][_0x27a7e1(0x176)]});let _0x5b5050=[];for(const _0x19b826 of _0x385128){_0x5b5050[_0x19b826[_0x27a7e1(0x160)]]=await getCloses(_0x19b826[_0x27a7e1(0x176)],new Date(_0x1c91a5[_0x27a7e1(0x148)]));}dbPerformance['get'](_0x27a7e1(0xf3))['remove']()[_0x27a7e1(0xc7)](),_0x47dc14[_0x27a7e1(0x11e)]((_0x5638ec,_0x5a751c)=>{const _0x1fefb5=_0x27a7e1;let _0x416939,_0x46a7b5=[];_0x5a751c==0x0?(_0x1c91a5[_0x1fefb5(0x180)]['forEach'](_0x384983=>{const _0x46cc72=_0x1fefb5;!_0x384983[_0x46cc72(0xd0)]&&_0x46a7b5[_0x46cc72(0x16c)]({'coin':_0x384983[_0x46cc72(0x160)],'number':_0x384983[_0x46cc72(0x9b)],'price':_0x384983[_0x46cc72(0xdb)]});}),_0x416939={'date':_0x5638ec,'eur':_0x5b5050[stablecoins[_0x1fefb5(0xd4)][_0x1fefb5(0x160)]][_0x5a751c],'usd':_0x5b5050[stablecoins['usd'][_0x1fefb5(0x160)]][_0x5a751c],'coins':_0x46a7b5}):(_0x1c91a5[_0x1fefb5(0x180)][_0x1fefb5(0x11e)](_0x559040=>{const _0x324ef0=_0x1fefb5;!_0x559040[_0x324ef0(0xd0)]&&_0x46a7b5['push']({'coin':_0x559040['coin'],'number':_0x35d6ef[_0x559040['coin']][_0x5638ec],'price':_0x559040[_0x324ef0(0x160)]==config['basecoin']?0x1:_0x5b5050[_0x559040[_0x324ef0(0x160)]][_0x5a751c]});}),_0x416939={'date':_0x5638ec,'eur':_0x5b5050[stablecoins['eur']['coin']][_0x5a751c],'usd':_0x5b5050[stablecoins[_0x1fefb5(0xab)][_0x1fefb5(0x160)]][_0x5a751c],'coins':_0x46a7b5}),dbPerformance['get'](_0x1fefb5(0xf3))[_0x1fefb5(0x16c)](_0x416939)[_0x1fefb5(0xc7)]();}),emitPerformance(),await resetCoinResults();for(let _0xfc7d5 of _0x42f29a){_0xfc7d5[_0x27a7e1(0x160)]!=config[_0x27a7e1(0xb9)]&&await updateCoinResults(_0xfc7d5);}logHistory(_0x27a7e1(0x109),_0x27a7e1(0x177));}catch(_0x25aaec){await handleError(_0x25aaec,_0x27a7e1(0xa8));}}async function getCloses(_0x390cc6,_0x289fb5,_0x79fe30=undefined){const _0x19802b=_0x3859de,_0x507391='1d';let _0x3031ac,_0x2ab049;const _0x360302=fns['differenceInCalendarDays'](new Date(),_0x289fb5)+0x1;try{const _0x3d5bda=exchange['milliseconds']()-_0x360302*0x18*0xe10*0x3e8;_0x3031ac=await exchange[_0x19802b(0x13a)](_0x390cc6,_0x507391,_0x3d5bda,_0x79fe30),_0x2ab049=await exchange[_0x19802b(0x87)](_0x390cc6);}catch(_0x393376){await handleError(_0x393376,_0x19802b(0xce));}let _0x24b6bf=ohlcvToCloses(_0x3031ac);return _0x24b6bf['push'](_0x2ab049[_0x390cc6][_0x19802b(0xfb)]),_0x24b6bf;}function ohlcvToCloses(_0x341d2c){const _0x1b5f6a=_0x3859de;let _0x2720b4=[];return _0x341d2c[_0x1b5f6a(0x11e)](function(_0x4e6499){const _0x300a74=_0x1b5f6a;_0x2720b4[_0x300a74(0x16c)](_0x4e6499[0x4]);}),_0x2720b4;}function getConfiguration(_0x42be90){const _0x7f8299=_0x3859de;let _0x1b25df=dbConfig[_0x7f8299(0x8c)](_0x7f8299(0x14c))[_0x7f8299(0x112)]({'botID':_0x42be90})[_0x7f8299(0x159)]();if(_0x1b25df){let _0x2c3aa0=![];!_0x1b25df[_0x7f8299(0x146)]&&(_0x1b25df={..._0x1b25df,'exchange':_0x7f8299(0xe2)},_0x2c3aa0=!![]),!_0x1b25df[_0x7f8299(0xb9)]&&(_0x1b25df={..._0x1b25df,'basecoin':_0x7f8299(0x133)},_0x2c3aa0=!![]),!_0x1b25df[_0x7f8299(0x181)]&&(_0x1b25df={..._0x1b25df,'ordertype':_0x7f8299(0x105)},_0x2c3aa0=!![]),!_0x1b25df[_0x7f8299(0x90)]&&(_0x1b25df={..._0x1b25df,'timeout':0x14},_0x2c3aa0=!![]),!_0x1b25df[_0x7f8299(0xe4)]&&(_0x1b25df={..._0x1b25df,'emojibuy':''},_0x2c3aa0=!![]),!_0x1b25df['emojisell']&&(_0x1b25df={..._0x1b25df,'emojisell':''},_0x2c3aa0=!![]),!_0x1b25df['showname']&&(_0x1b25df={..._0x1b25df,'showname':![]},_0x2c3aa0=!![]),_0x2c3aa0&&(_0x1b25df={'botID':_0x1b25df[_0x7f8299(0xb2)],'exchange':_0x1b25df[_0x7f8299(0x146)],'apiKey':_0x1b25df[_0x7f8299(0x10d)],'apiSecret':_0x1b25df[_0x7f8299(0x12d)],'basecoin':_0x1b25df[_0x7f8299(0xb9)],'botname':_0x1b25df['botname'],'showname':_0x1b25df[_0x7f8299(0x97)],'threshold':_0x1b25df[_0x7f8299(0x93)],'ordertype':_0x1b25df['ordertype'],'timeout':_0x1b25df['timeout'],'startdate':_0x1b25df[_0x7f8299(0x148)],'recreate':_0x1b25df[_0x7f8299(0x81)],'timeshift':_0x1b25df[_0x7f8299(0x179)],'headless':_0x1b25df[_0x7f8299(0x113)],'cooldown':_0x1b25df[_0x7f8299(0x169)],'emojibuy':_0x1b25df[_0x7f8299(0xe4)],'emojisell':_0x1b25df[_0x7f8299(0xca)],'portfolio':_0x1b25df[_0x7f8299(0x180)]},dbConfig[_0x7f8299(0x8c)](_0x7f8299(0x14c))[_0x7f8299(0xd5)]()[_0x7f8299(0xc7)](),dbConfig['get']('bot')[_0x7f8299(0x16c)](_0x1b25df)['write']());}else _0x1b25df={'botID':_0x42be90,'exchange':_0x7f8299(0xe2),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x7f8299(0x129)+_0x42be90,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x7f8299(0x179)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1b25df;}function _0x147e(_0x325a5c,_0x44693f){const _0x31f3d0=_0x7539();return _0x147e=function(_0x24879a,_0x17268e){_0x24879a=_0x24879a-0x80;let _0x7539bc=_0x31f3d0[_0x24879a];return _0x7539bc;},_0x147e(_0x325a5c,_0x44693f);}function emittedConfiguration(){const _0x466c40=_0x3859de;let _0x418f5f;return config[_0x466c40(0x10d)]==''?_0x418f5f=config:_0x418f5f={...config,'apiKey':_0x466c40(0xc8),'apiSecret':_0x466c40(0xc8)},_0x418f5f;}function getSettings(){const _0x3915a2=_0x3859de;return dbSettings['get'](_0x3915a2(0x145))[_0x3915a2(0x159)]();}function getSecure(){const _0x35ff27=_0x3859de;return dbSecure[_0x35ff27(0x8c)]('secure')[_0x35ff27(0x159)]()||{};}function updateTimeshift(_0x74b41a){const _0xbd3874=_0x3859de;let _0x402bb2=dbConfig['get'](_0xbd3874(0x14c))[_0xbd3874(0x112)]({'botID':botID})[_0xbd3874(0x159)]();_0x402bb2&&dbConfig['get'](_0xbd3874(0x14c))[_0xbd3874(0x112)]({'botID':botID})[_0xbd3874(0x11f)]({'timeshift':_0x74b41a})[_0xbd3874(0xc7)](),config['timeshift']=_0x74b41a,proxyEmit(_0xbd3874(0x9a),emittedConfiguration());}async function storeConfiguration(_0x4a1594){const _0x3c0b48=_0x3859de;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x37a24c=dbConfig[_0x3c0b48(0x8c)](_0x3c0b48(0x14c))[_0x3c0b48(0x112)]({'botID':botID})[_0x3c0b48(0x159)]();_0x4a1594={..._0x4a1594,'apiKey':crypt[_0x3c0b48(0x162)](secure[_0x3c0b48(0x139)],_0x4a1594[_0x3c0b48(0x10d)])['message'],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x4a1594[_0x3c0b48(0x12d)])[_0x3c0b48(0x137)]};if(_0x37a24c){if(_0x4a1594[_0x3c0b48(0x10d)]=='************')_0x4a1594[_0x3c0b48(0x10d)]=config[_0x3c0b48(0x10d)];if(_0x4a1594[_0x3c0b48(0x12d)]==_0x3c0b48(0xc8))_0x4a1594[_0x3c0b48(0x12d)]=config[_0x3c0b48(0x12d)];dbConfig[_0x3c0b48(0x8c)](_0x3c0b48(0x14c))['find']({'botID':botID})['assign'](_0x4a1594)['write']();}else dbConfig['get']('bot')[_0x3c0b48(0x16c)](_0x4a1594)[_0x3c0b48(0xc7)](),process[_0x3c0b48(0xbd)]({'status':'enabled','live':_0x3c0b48(0xc9)});config={..._0x4a1594};if(config[_0x3c0b48(0x81)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x3c0b48(0xbd)]({'botname':_0x4a1594['botname']}),proxyEmit(_0x3c0b48(0xc6)),reset();}async function storeHeadless(_0x47a2a2){const _0x5bf2e4=_0x3859de,_0x1b16f7={...config,'headless':_0x47a2a2[_0x5bf2e4(0x113)]};let _0x1e24dc=dbConfig['get'](_0x5bf2e4(0x14c))[_0x5bf2e4(0x112)]({'botID':botID})['value']();_0x1e24dc&&dbConfig[_0x5bf2e4(0x8c)](_0x5bf2e4(0x14c))[_0x5bf2e4(0x112)]({'botID':botID})['assign'](_0x1b16f7)[_0x5bf2e4(0xc7)](),config={..._0x1b16f7},proxyEmit(_0x5bf2e4(0x9a),emittedConfiguration());}function noslash(_0x404ebd){const _0xdebd5d=_0x3859de;return _0x404ebd[_0xdebd5d(0xe8)]('/','');}function updateNumberCoins(_0xb50e27){const _0x2e269a=_0x3859de;_0xb50e27[_0x2e269a(0xf7)]&&_0xb50e27[_0x2e269a(0xf7)]==_0x2e269a(0xd3)&&_0xb50e27['balances'][_0x2e269a(0x11e)](_0x3a594b=>{const _0x263545=_0x2e269a;let _0x50911f=currentCoins[_0x263545(0x112)](_0x3e5a54=>_0x3e5a54['coin']==_0x3a594b[_0x263545(0x104)]);if(_0x50911f)_0x50911f[_0x263545(0x117)]=Number(_0x3a594b[_0x263545(0x153)]);});if(_0xb50e27[_0x2e269a(0xf7)]&&_0xb50e27[_0x2e269a(0xf7)]==_0x2e269a(0x13f)){if(_0xb50e27[_0x2e269a(0xa6)]=='LIMIT'&&_0xb50e27['orderStatus']==_0x2e269a(0xf4)){if(lastOrders)lastOrders['forEach'](_0x16b5ff=>{const _0x387855=_0x2e269a;if(_0x16b5ff[_0x387855(0xf9)]==_0xb50e27[_0x387855(0xf9)]){if(_0x16b5ff[_0x387855(0x14a)])_0x16b5ff[_0x387855(0x123)]=_0xb50e27['accumulatedQuantity']*_0x16b5ff[_0x387855(0xe9)];else _0x16b5ff[_0x387855(0x123)]=_0xb50e27['accumulatedQuantity'];}});}}}async function getCoins(_0x28c9cb=!![],_0x374c80=config[_0x3859de(0xb9)]){const _0xfb2738=_0x3859de;let _0x224141,_0x578842=[],_0x561143=[],_0x2599c1=[];try{_0x224141=await exchange[_0xfb2738(0xfd)](),mybalances=_0x224141['total'];if(!_0x28c9cb)for(const [_0x396d23,_0x39bb6f]of Object['entries'](mybalances)){_0x2599c1[_0xfb2738(0x16c)](_0x396d23);}else config[_0xfb2738(0x180)][_0xfb2738(0x11e)](_0x4286f5=>{const _0x5b4405=_0xfb2738;if(!_0x4286f5[_0x5b4405(0xd0)])_0x2599c1[_0x5b4405(0x16c)](_0x4286f5[_0x5b4405(0x160)]);});if(_0x374c80=='')for(const [_0x3aff6b,_0x2b03bc]of Object[_0xfb2738(0x151)](mybalances)){_0x2b03bc[_0xfb2738(0x173)]()!=0x0&&_0x561143[_0xfb2738(0x16c)]({'coin':_0x3aff6b});}else for(const [_0x4a1886,_0x4cc506]of Object[_0xfb2738(0x151)](mybalances)){if(_0x2599c1[_0xfb2738(0x8b)](_0x4a1886)){if((_0x4cc506[_0xfb2738(0x173)]()!=0x0||config['portfolio'][_0xfb2738(0x112)](_0x1773bb=>_0x1773bb[_0xfb2738(0x160)]==_0x4a1886))&&(allSymbols[_0xfb2738(0x8b)](_0x4a1886+'/'+_0x374c80)||_0x4a1886==_0x374c80))_0x561143[_0xfb2738(0x16c)]({'coin':_0x4a1886,'symbol':_0x4a1886+'/'+_0x374c80,'reverse':![],'number':_0x4cc506}),_0x4a1886!=_0x374c80&&_0x578842[_0xfb2738(0x16c)](_0x4a1886+'/'+_0x374c80);else(_0x4cc506[_0xfb2738(0x173)]()!=0x0||config[_0xfb2738(0x180)][_0xfb2738(0x112)](_0x9e8a66=>_0x9e8a66[_0xfb2738(0x160)]==_0x4a1886))&&allSymbols[_0xfb2738(0x8b)](_0x374c80+'/'+_0x4a1886)&&(_0x561143[_0xfb2738(0x16c)]({'coin':_0x4a1886,'symbol':_0x374c80+'/'+_0x4a1886,'reverse':!![],'number':_0x4cc506}),_0x4a1886!=_0x374c80&&_0x578842['push'](_0x374c80+'/'+_0x4a1886));}}}catch(_0x1ce1a5){if(!_0x28c9cb){if(_0x1ce1a5[_0xfb2738(0x173)]()['includes'](_0xfb2738(0x82)))return logHistory(_0xfb2738(0x15d),_0xfb2738(0xd9)),![];else{if(_0x1ce1a5[_0xfb2738(0x173)]()[_0xfb2738(0x8b)](_0xfb2738(0x9e)))return logHistory(_0xfb2738(0x15d),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x1ce1a5[_0xfb2738(0x173)]()[_0xfb2738(0x8b)](_0xfb2738(0x132)))return logHistory(_0xfb2738(0x15d),_0xfb2738(0xfe)),![];else await handleError(_0x1ce1a5,'getCoins()');}}}else await handleError(_0x1ce1a5,'getCoins()');}return _0x561143;}async function getPortfolio(_0x263974){const _0x1ba06a=_0x3859de;let _0x50863a=[],_0x23a896=[],_0x17cc2a,_0x45b4ca=[],_0x4584a1,_0x3252f5;_0x263974[_0x1ba06a(0x10d)]===_0x1ba06a(0xc8)||_0x263974[_0x1ba06a(0x12d)]==='************'?(_0x4584a1=config[_0x1ba06a(0x10d)],_0x3252f5=config[_0x1ba06a(0x12d)]):(_0x4584a1=_0x263974[_0x1ba06a(0x10d)],_0x3252f5=_0x263974[_0x1ba06a(0x12d)]);await initExchange(_0x4584a1,_0x3252f5);let _0x3253d0=await loadSymbols();if(_0x3253d0){_0x45b4ca=await getCoins(![],_0x263974[_0x1ba06a(0xb9)]);if(_0x45b4ca===![])proxyEmit(_0x1ba06a(0x180),![]);else{if(_0x263974[_0x1ba06a(0xb9)]=='')proxyEmit(_0x1ba06a(0x180),_0x45b4ca);else{_0x45b4ca[_0x1ba06a(0x11e)](_0x2d78c2=>{const _0x2ba197=_0x1ba06a;_0x50863a['push'](_0x2d78c2[_0x2ba197(0x176)]);});try{_0x23a896=await exchange[_0x1ba06a(0x87)](_0x50863a);}catch(_0x1f945f){await handleError(_0x1f945f,_0x1ba06a(0x88));}_0x45b4ca[_0x1ba06a(0x11e)](_0x4a29fd=>{const _0x18ebe4=_0x1ba06a;_0x4a29fd[_0x18ebe4(0x160)]!=_0x263974[_0x18ebe4(0xb9)]?_0x17cc2a=_0x4a29fd[_0x18ebe4(0x14a)]?0x1/_0x23a896[_0x4a29fd[_0x18ebe4(0x176)]][_0x18ebe4(0xfb)]:_0x23a896[_0x4a29fd['symbol']][_0x18ebe4(0xfb)]:_0x17cc2a=0x1,_0x4a29fd[_0x18ebe4(0xe9)]=formatResult(_0x17cc2a,0x8);}),proxyEmit('portfolio',_0x45b4ca);}}}else proxyEmit(_0x1ba06a(0x180),![]);}function checkMinimums(_0x53a4f4){const _0x4fefcb=_0x3859de;let _0x2c4894=!![];const _0x1153dd=!_0x53a4f4[_0x4fefcb(0x14a)]?markets[_0x53a4f4[_0x4fefcb(0x176)]]['limits'][_0x4fefcb(0x13c)]['min']:markets[_0x53a4f4['symbol']][_0x4fefcb(0x91)][_0x4fefcb(0xed)][_0x4fefcb(0x17c)],_0x24f870=!_0x53a4f4[_0x4fefcb(0x14a)]?markets[_0x53a4f4[_0x4fefcb(0x176)]][_0x4fefcb(0x91)][_0x4fefcb(0xed)][_0x4fefcb(0x17c)]:markets[_0x53a4f4[_0x4fefcb(0x176)]]['limits'][_0x4fefcb(0x13c)][_0x4fefcb(0x17c)];if(Math[_0x4fefcb(0xb1)](_0x53a4f4[_0x4fefcb(0x185)])<_0x1153dd)_0x2c4894=![];if(Math[_0x4fefcb(0xb1)](_0x53a4f4[_0x4fefcb(0x185)])*_0x53a4f4['last']<_0x24f870)_0x2c4894=![];return _0x2c4894;}async function getBalances(){const _0x4566d3=_0x3859de;let _0x16cb38=0x0,_0x34d407;const _0x5b34c0=config[_0x4566d3(0x93)];currentCoins[_0x4566d3(0x11e)](_0x34f2f4=>{const _0x14509b=_0x4566d3;if(_0x34f2f4[_0x14509b(0x160)]!=config[_0x14509b(0xb9)]){let _0x4400d2=global['ticker'][noslash(_0x34f2f4[_0x14509b(0x176)])];_0x34d407=_0x34f2f4[_0x14509b(0x14a)]?0x1/_0x4400d2:_0x4400d2;}else _0x34d407=0x1;let _0xce9d50=_0x34f2f4[_0x14509b(0x117)]*_0x34d407;_0x16cb38+=_0xce9d50,_0x34f2f4[_0x14509b(0xfb)]=formatResult(Number(_0x34d407),0x8),_0x34f2f4['value']=_0xce9d50;}),currentCoins[_0x4566d3(0x11e)](_0x5dcf16=>{const _0x4600ba=_0x4566d3;let _0x80969=config[_0x4600ba(0x180)][_0x4600ba(0x112)](_0x13263b=>_0x13263b['coin']==_0x5dcf16['coin']),_0x53bf8a=Number(_0x80969[_0x4600ba(0xd2)]),_0xa08cce=_0x5dcf16[_0x4600ba(0x159)]/_0x16cb38*0x64,_0x4b81f5=_0x53bf8a*_0x16cb38/0x64/_0x5dcf16['last']-_0x5dcf16[_0x4600ba(0x117)];_0x5dcf16[_0x4600ba(0xd2)]=formatResult(_0xa08cce,0x3),_0x5dcf16[_0x4600ba(0x134)]=formatResult(_0x53bf8a,0x3),_0x5dcf16[_0x4600ba(0x185)]=formatResult(_0x4b81f5,0x8),_0x5dcf16[_0x4600ba(0xfa)]='',_0x5dcf16['valid']='';if(_0x5dcf16[_0x4600ba(0x160)]!=config[_0x4600ba(0xb9)]){if(_0x5dcf16[_0x4600ba(0xd2)]>_0x53bf8a)_0x5dcf16[_0x4600ba(0xfa)]=_0x4600ba(0xaa),_0x5dcf16[_0x4600ba(0x136)]=checkMinimums(_0x5dcf16);else _0x5dcf16[_0x4600ba(0xd2)]<_0x53bf8a&&(_0x5dcf16[_0x4600ba(0xfa)]=_0x4600ba(0x122),_0x5dcf16[_0x4600ba(0x136)]=checkMinimums(_0x5dcf16));}_0x5dcf16[_0x4600ba(0x83)]=_0x5dcf16[_0x4600ba(0xd2)]/_0x5dcf16[_0x4600ba(0x134)]-0x1;}),currentCoins[_0x4566d3(0x165)]((_0x2714d0,_0x5effb4)=>_0x2714d0[_0x4566d3(0x83)]<_0x5effb4[_0x4566d3(0x83)]?0x1:_0x5effb4[_0x4566d3(0x83)]<_0x2714d0[_0x4566d3(0x83)]?-0x1:0x0);const _0x3172bb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3172bb[_0x4566d3(0xd4)],'usd':_0x3172bb[_0x4566d3(0xab)],'portfolio':JSON[_0x4566d3(0x178)](currentCoins),'threshold':_0x5b34c0},proxyEmit(_0x4566d3(0x98),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4566d3(0x113)])headlessMode({'portfolio':currentCoins,'threshold':_0x5b34c0});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x589f68=_0x3859de;if(!lastBalances)return;let _0x2b4b03=await getStartingBalances(![]),_0x41ce32=[],_0x2f10d4=[],_0x4788f3;JSON[_0x589f68(0x11b)](lastBalances[_0x589f68(0x180)])[_0x589f68(0x11e)](_0x5db7e3=>{const _0x521f1e=_0x589f68;let _0xe3215f={'coin':_0x5db7e3[_0x521f1e(0x160)],'number':_0x5db7e3[_0x521f1e(0x117)],'price':_0x5db7e3['last']};_0x41ce32[_0x521f1e(0x16c)](_0xe3215f);if(!_0x2b4b03[_0x521f1e(0xa0)]||!_0x2b4b03[_0x521f1e(0xa0)][_0x521f1e(0x112)](_0x35293a=>_0x35293a[_0x521f1e(0x160)]==_0x5db7e3[_0x521f1e(0x160)]&&_0x35293a['number']!=0x0))_0x2f10d4['push'](_0xe3215f);});const _0xce1c79=await getFiat();_0x4788f3={'date':lastBalances[_0x589f68(0x14b)][_0x589f68(0xef)]('\x20')[0x0],'eur':_0xce1c79['eur'],'usd':_0xce1c79['usd'],'coins':_0x41ce32};let _0x2d1c4e=dbPerformance['get'](_0x589f68(0xf3))[_0x589f68(0x112)]({'date':_0x4788f3['date']})[_0x589f68(0x159)]();_0x2d1c4e?dbPerformance[_0x589f68(0x8c)](_0x589f68(0xf3))[_0x589f68(0x112)]({'date':_0x4788f3['date']})[_0x589f68(0x11f)](_0x4788f3)[_0x589f68(0xc7)]():dbPerformance[_0x589f68(0x8c)](_0x589f68(0xf3))['push'](_0x4788f3)[_0x589f68(0xc7)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x225f32=_0x3859de;if(dbPerformance['has'](_0x225f32(0xf3))[_0x225f32(0x159)]()){let _0x1f9f5e=dbPerformance[_0x225f32(0x8c)](_0x225f32(0xf3))[_0x225f32(0x166)](_0x225f32(0x13b))['value']();proxyEmit('performance',_0x1f9f5e),lastPerformanceEmitted=getDate();}else proxyEmit(_0x225f32(0x94),[]);}async function getStartingBalances(_0x14902c=!![]){const _0x515f45=_0x3859de;let _0x3b7313=dbPerformance[_0x515f45(0x8c)](_0x515f45(0xf3))['find']({'date':config[_0x515f45(0x148)]})[_0x515f45(0x159)]();config[_0x515f45(0x10d)]!=''&&!_0x3b7313&&(await setStartDatePerformance(config),_0x3b7313=dbPerformance[_0x515f45(0x8c)](_0x515f45(0xf3))[_0x515f45(0x112)]({'date':config[_0x515f45(0x148)]})['value']());if(config['apiKey']==''||!_0x3b7313)return{};let _0x164581=0x0,_0x5bfeae=0x0,_0x1abb44=0x0,_0x386891=[],_0x1ed5e5=0x0;config[_0x515f45(0x180)][_0x515f45(0x11e)](_0x334f1e=>{const _0x1a2bc1=_0x515f45;if(!_0x334f1e[_0x1a2bc1(0xd0)]){_0x386891[_0x1ed5e5]={'coin':_0x334f1e['coin'],'symbol':_0x334f1e[_0x1a2bc1(0x176)],'number':_0x334f1e[_0x1a2bc1(0x9b)],'price':_0x334f1e[_0x1a2bc1(0xdb)]},_0x164581+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e['startnumber'];if(config[_0x1a2bc1(0xb9)]==_0x1a2bc1(0x133))_0x5bfeae+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e['startnumber']*_0x3b7313['eur'],_0x1abb44+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e['startnumber']*_0x3b7313[_0x1a2bc1(0xab)];else{if(config['basecoin']==_0x1a2bc1(0xcf)||config[_0x1a2bc1(0xb9)]==_0x1a2bc1(0x187)||config['basecoin']=='USDC')_0x5bfeae+=_0x334f1e['startprice']*_0x334f1e[_0x1a2bc1(0x9b)]*_0x3b7313[_0x1a2bc1(0xd4)]/_0x3b7313[_0x1a2bc1(0xab)],_0x1abb44+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e[_0x1a2bc1(0x9b)];else config[_0x1a2bc1(0xb9)]==_0x1a2bc1(0xc0)&&(_0x5bfeae+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e['startnumber'],_0x1abb44+=_0x334f1e[_0x1a2bc1(0xdb)]*_0x334f1e[_0x1a2bc1(0x9b)]*_0x3b7313[_0x1a2bc1(0xab)]/_0x3b7313[_0x1a2bc1(0xd4)]);}_0x1ed5e5++;}});let _0x3f87a7={'basecoin':_0x164581,'eur':_0x5bfeae,'usd':_0x1abb44,'coins':_0x386891};if(_0x14902c)proxyEmit(_0x515f45(0xaf),_0x3f87a7);return _0x3f87a7;}function headlessMode(_0x3bf50a){const _0x38f5e7=_0x3859de;let _0x20bcba=_0x3bf50a['portfolio'],_0x3b50f4=_0x3bf50a['threshold'],_0x3b0856=[];for(let _0x35e3df of _0x20bcba){if(_0x35e3df[_0x38f5e7(0x160)]!=config[_0x38f5e7(0xb9)]){if(_0x35e3df[_0x38f5e7(0xd2)]/_0x35e3df[_0x38f5e7(0x134)]-0x1>=_0x3b50f4/0x64){if(_0x35e3df[_0x38f5e7(0x136)])_0x3b0856[_0x38f5e7(0x16c)](_0x35e3df);}else{if(_0x35e3df[_0x38f5e7(0xd2)]/_0x35e3df[_0x38f5e7(0x134)]-0x1<=-_0x3b50f4/0x64){if(_0x35e3df['valid'])_0x3b0856[_0x38f5e7(0x16c)](_0x35e3df);}}}}_0x3b0856[_0x38f5e7(0x158)]>0x0&&placeOrder(_0x3b0856);}function symbolToCoin(_0x438809){const _0x57f324=_0x3859de;let _0x58b87a;if(_0x438809[_0x57f324(0x8b)]('/'+config[_0x57f324(0xb9)]))_0x58b87a=_0x438809['replace']('/'+config[_0x57f324(0xb9)],'');if(_0x438809['includes'](config[_0x57f324(0xb9)]+'/'))_0x58b87a=_0x438809[_0x57f324(0xe8)](config[_0x57f324(0xb9)]+'/','');return _0x58b87a;}async function validateOrders(_0x506075=0x0){const _0x599a07=_0x3859de;let _0x578915=[],_0x55ecc9=config['ordertype']==_0x599a07(0x105)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x599a07(0x90)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x5c4b0e=>{const _0x51094b=_0x599a07;let _0x2a446d=previousCoins['find'](_0x295e74=>_0x295e74[_0x51094b(0x160)]==symbolToCoin(_0x5c4b0e[_0x51094b(0x176)])),_0x3e6f31=currentCoins[_0x51094b(0x112)](_0x5bb090=>_0x5bb090[_0x51094b(0x160)]==symbolToCoin(_0x5c4b0e[_0x51094b(0x176)])),_0x25a730,_0x42b86e;_0x5c4b0e[_0x51094b(0xfa)]=='buy'&&!_0x5c4b0e['reverse']||_0x5c4b0e[_0x51094b(0xfa)]==_0x51094b(0xaa)&&_0x5c4b0e[_0x51094b(0x14a)]?(_0x25a730=_0x2a446d['number']+0.9*_0x5c4b0e[_0x51094b(0x123)],_0x42b86e=_0x2a446d[_0x51094b(0x117)]+1.1*_0x5c4b0e['filled']):(_0x25a730=_0x2a446d[_0x51094b(0x117)]-1.1*_0x5c4b0e[_0x51094b(0x123)],_0x42b86e=_0x2a446d[_0x51094b(0x117)]-0.9*_0x5c4b0e[_0x51094b(0x123)]);const _0x32511d=_0x5c4b0e[_0x51094b(0x123)]!=0x0&&_0x3e6f31[_0x51094b(0x117)]>=_0x25a730&&_0x3e6f31[_0x51094b(0x117)]<=_0x42b86e;_0x578915[_0x51094b(0x16c)](_0x32511d);if(_0x32511d&&config[_0x51094b(0x181)]!='market'){if(_0x5c4b0e[_0x51094b(0x14a)])logHistory(_0x51094b(0x16d),_0x51094b(0xe7)+_0x5c4b0e[_0x51094b(0x176)]+'\x20'+_0x5c4b0e[_0x51094b(0xfa)]+'\x20#'+formatResult(_0x5c4b0e[_0x51094b(0x123)]/_0x5c4b0e['price'],0x8)+'\x20@'+formatResult(_0x5c4b0e['price'],0x8));else logHistory(_0x51094b(0x16d),_0x51094b(0xe7)+_0x5c4b0e[_0x51094b(0x176)]+'\x20'+_0x5c4b0e[_0x51094b(0xfa)]+'\x20#'+formatResult(_0x5c4b0e[_0x51094b(0x123)],0x8)+'\x20@'+formatResult(_0x5c4b0e[_0x51094b(0xe9)],0x8));}}),_0x578915[_0x599a07(0x11e)]((_0xcd9e83,_0x2b57b5)=>{const _0x5401d7=_0x599a07;if(_0xcd9e83)lastOrders[_0x5401d7(0x154)](_0x2b57b5,0x1);});if(_0x506075<_0x55ecc9&&_0x578915[_0x599a07(0x8b)](![])){if(_0x506075==0x0){config[_0x599a07(0x181)]==_0x599a07(0x105)?logHistory(_0x599a07(0x15d),_0x599a07(0x141)):logHistory(_0x599a07(0x15d),_0x599a07(0xc4));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x506075);},0xa*0x3e8);}else{(_0x506075==0x1||_0x506075==Math[_0x599a07(0x163)](_0x55ecc9/0x2)||_0x506075==_0x55ecc9-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x506075);},validateOrderInterval);}}else{lockOrders=![];if(_0x506075>0x0&&!_0x578915[_0x599a07(0x8b)](![]))config[_0x599a07(0x181)]==_0x599a07(0x105)?logHistory(_0x599a07(0x109),_0x599a07(0x92)):logHistory(_0x599a07(0x109),_0x599a07(0x107));else _0x506075>0x0&&_0x578915[_0x599a07(0x8b)](![])&&(config[_0x599a07(0x181)]==_0x599a07(0x105)?logHistory(_0x599a07(0x109),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x599a07(0x163)](_0x55ecc9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x599a07(0x11e)](async _0x2c61da=>{const _0x4df174=_0x599a07;try{const _0x1c2158=await exchange[_0x4df174(0xf6)](_0x2c61da[_0x4df174(0xf9)],_0x2c61da[_0x4df174(0x176)]);}catch(_0x12d9e1){if(_0x12d9e1[_0x4df174(0x173)]()[_0x4df174(0x8b)](_0x4df174(0xac))){}else await handleError(_0x12d9e1,_0x4df174(0xd6));}}),logHistory('success',_0x599a07(0x135)+Math[_0x599a07(0x163)](_0x55ecc9*validateOrderInterval/0xea60)+_0x599a07(0x127))));}}async function resetCoinResults(){const _0x2d0758=_0x3859de;dbCoinResults[_0x2d0758(0x8c)](_0x2d0758(0xa0))[_0x2d0758(0xd5)]()[_0x2d0758(0xc7)]();let _0x1208d4=await getStartingBalances(![]);_0x1208d4[_0x2d0758(0xa0)][_0x2d0758(0x11e)](_0x21425b=>{const _0x5f5118=_0x2d0758,_0x6af922=_0x21425b['symbol']['includes'](config[_0x5f5118(0xb9)]+'/');if(_0x21425b[_0x5f5118(0x160)]!=config[_0x5f5118(0xb9)]){let _0x43c0c2={'coin':_0x21425b['coin'],'number':_0x21425b[_0x5f5118(0x117)],'breakeven':_0x21425b[_0x5f5118(0xe9)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5f5118(0x8c)](_0x5f5118(0xa0))[_0x5f5118(0x16c)](_0x43c0c2)[_0x5f5118(0xc7)]();}});}async function updateCoinResults(_0x56fe87){const _0x42994f=_0x3859de;let _0x4461e0,_0x522217,_0x98bee0,_0x1e6778,_0x3c0f36,_0x50b639,_0x130480=dbCoinResults[_0x42994f(0x8c)](_0x42994f(0xa0))['find']({'coin':_0x56fe87[_0x42994f(0x160)]})[_0x42994f(0x159)]();if(!_0x130480)return;if(_0x56fe87[_0x42994f(0x16e)]&&_0x56fe87[_0x42994f(0x16e)]['currency']==config[_0x42994f(0xb9)])_0x4461e0=_0x56fe87[_0x42994f(0x16e)][_0x42994f(0xed)];else{if(_0x56fe87['fee']&&_0x56fe87['fee'][_0x42994f(0x95)]==_0x42994f(0x96))_0x4461e0=_0x56fe87[_0x42994f(0x16e)]['cost']*global[_0x42994f(0x118)][_0x42994f(0x96)+config[_0x42994f(0xb9)]];else _0x4461e0=0.001*_0x56fe87[_0x42994f(0x123)];}const _0x110fd6=_0x56fe87[_0x42994f(0x176)][_0x42994f(0x8b)](config[_0x42994f(0xb9)]+'/');_0x110fd6&&(_0x50b639={'coin':_0x56fe87['coin'],'symbol':_0x56fe87['symbol'],'filled':_0x56fe87[_0x42994f(0x123)]*_0x56fe87[_0x42994f(0xe9)],'side':_0x56fe87[_0x42994f(0xfa)]=='sell'?'buy':'sell','price':0x1/_0x56fe87['price']},_0x56fe87={..._0x50b639});_0x56fe87['side']=='buy'?_0x98bee0=(_0x130480['breakeven']*_0x130480['number']+_0x56fe87[_0x42994f(0xe9)]*_0x56fe87[_0x42994f(0x123)])/(_0x130480[_0x42994f(0x117)]+_0x56fe87[_0x42994f(0x123)]):_0x98bee0=(_0x130480[_0x42994f(0x108)]*_0x130480['number']-_0x56fe87[_0x42994f(0xe9)]*_0x56fe87[_0x42994f(0x123)])/(_0x130480[_0x42994f(0x117)]-_0x56fe87[_0x42994f(0x123)]);_0x56fe87[_0x42994f(0xfa)]=='buy'?_0x1e6778=_0x130480[_0x42994f(0x142)]:_0x1e6778=_0x130480[_0x42994f(0x142)]+(_0x56fe87[_0x42994f(0xe9)]-_0x130480[_0x42994f(0x108)])*_0x56fe87[_0x42994f(0x123)];_0x522217=_0x56fe87[_0x42994f(0xfa)]=='sell'?_0x130480['number']-_0x56fe87[_0x42994f(0x123)]:_0x130480[_0x42994f(0x117)]+_0x56fe87[_0x42994f(0x123)],_0x3c0f36=(_0x56fe87['price']-_0x98bee0)*_0x522217;let _0x3cda3e={'coin':_0x56fe87[_0x42994f(0x160)],'number':_0x522217,'breakeven':formatResult(_0x98bee0,0x8),'realized':formatResult(_0x1e6778,0x8),'unrealized':formatResult(_0x3c0f36,0x8),'fees':formatResult(_0x130480[_0x42994f(0x128)]+_0x4461e0,0x8),'sells':_0x56fe87[_0x42994f(0xfa)]=='sell'?_0x130480[_0x42994f(0xa9)]+0x1:_0x130480[_0x42994f(0xa9)],'buys':_0x56fe87[_0x42994f(0xfa)]==_0x42994f(0x122)?_0x130480['buys']+0x1:_0x130480[_0x42994f(0x126)]};dbCoinResults[_0x42994f(0x8c)]('coins')[_0x42994f(0x112)]({'coin':_0x56fe87[_0x42994f(0x160)]})[_0x42994f(0x11f)](_0x3cda3e)['write']();}async function placeOrder(_0x481578){const _0x47366d=_0x3859de,_0x8e069=config[_0x47366d(0x181)]=='market'?_0x47366d(0x105):_0x47366d(0x85);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x47366d(0x11b)](JSON[_0x47366d(0x178)](currentCoins));for(const _0x81bedf of _0x481578){let _0x4f1d7a,_0x1fdea6,_0x586ed7,_0x43a52a,_0x500701,_0x543aee=_0x81bedf[_0x47366d(0x176)];try{const _0x3f26f8=await exchange[_0x47366d(0x87)](_0x543aee),_0x50104c=_0x3f26f8[_0x543aee];_0x4f1d7a=_0x50104c[_0x47366d(0xfb)],_0x1fdea6=_0x50104c[_0x47366d(0x189)],_0x586ed7=_0x50104c[_0x47366d(0x9c)];_0x81bedf['reverse']?(_0x43a52a=_0x81bedf[_0x47366d(0xfa)]=='buy'?_0x47366d(0xaa):'buy',_0x500701=Math[_0x47366d(0xb1)](_0x81bedf[_0x47366d(0x185)])/_0x4f1d7a):(_0x43a52a=_0x81bedf[_0x47366d(0xfa)],_0x500701=Math[_0x47366d(0xb1)](_0x81bedf[_0x47366d(0x185)]));_0x8e069==_0x47366d(0x85)&&(config[_0x47366d(0x181)]==_0x47366d(0x17f)&&(_0x4f1d7a=_0x43a52a==_0x47366d(0x122)?_0x1fdea6:_0x586ed7),config['ordertype']==_0x47366d(0x150)&&(_0x4f1d7a=_0x43a52a=='buy'?_0x586ed7:_0x1fdea6));_0x500701=formatResult(_0x500701,0x8),_0x4f1d7a=formatResult(_0x4f1d7a,0x8);const _0x41df16=await exchange['createOrder'](_0x543aee,_0x8e069,_0x43a52a,_0x500701,_0x4f1d7a);lastOrders['push']({'orderId':_0x41df16['id'],'symbol':_0x543aee,'side':_0x43a52a,'reverse':_0x81bedf[_0x47366d(0x14a)],'amount':_0x81bedf[_0x47366d(0x14a)]?_0x41df16[_0x47366d(0x13c)]*_0x41df16[_0x47366d(0xe9)]:_0x41df16[_0x47366d(0x13c)],'filled':_0x81bedf[_0x47366d(0x14a)]?_0x41df16[_0x47366d(0x123)]*_0x41df16[_0x47366d(0xe9)]:_0x41df16[_0x47366d(0x123)],'price':_0x41df16[_0x47366d(0xe9)]});const _0x24ab15=_0x43a52a==_0x47366d(0xaa)?config[_0x47366d(0xca)]?String[_0x47366d(0x9d)]('0x'+config[_0x47366d(0xca)])+'\x20':'':config[_0x47366d(0xe4)]?String[_0x47366d(0x9d)]('0x'+config['emojibuy'])+'\x20':'',_0x57f5e8=_0x8e069==_0x47366d(0x105)?_0x47366d(0x110):config[_0x47366d(0x181)]==_0x47366d(0x17f)?'Limit\x20(high-margin)':_0x47366d(0x18a);if(_0x8e069==_0x47366d(0x105))logHistory(_0x47366d(0x16d),''+_0x24ab15+_0x57f5e8+_0x47366d(0x167)+_0x543aee+'\x20'+_0x43a52a+'\x20#'+formatResult(_0x41df16['filled'],0x8)+'\x20@'+formatResult(_0x41df16[_0x47366d(0xe9)],0x8));else logHistory(_0x47366d(0x16d),''+_0x24ab15+_0x57f5e8+_0x47366d(0x167)+_0x543aee+'\x20'+_0x43a52a+'\x20#'+formatResult(_0x41df16[_0x47366d(0x13c)],0x8)+'\x20@'+formatResult(_0x41df16[_0x47366d(0xe9)],0x8));_0x41df16[_0x47366d(0x160)]=_0x81bedf['coin'],await updateCoinResults(_0x41df16);if(config[_0x47366d(0x169)]!=0x0){let _0x11a166=null;if(cooldownTracker[_0x47366d(0x158)]==config[_0x47366d(0x169)]-0x1)_0x11a166=cooldownTracker[_0x47366d(0xcd)]();const _0x34766e=getTimeStamp();cooldownTracker['push'](_0x34766e);if(_0x11a166){const _0x300e6c=fns[_0x47366d(0x17b)](new Date(_0x34766e),new Date(_0x11a166));_0x300e6c<cooldownInterval&&(logHistory(_0x47366d(0x15d),_0x47366d(0xdc)+config[_0x47366d(0x169)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x47366d(0x86)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x343726){if(_0x343726[_0x47366d(0x173)]()[_0x47366d(0x8b)](_0x47366d(0xb5)))logHistory(_0x47366d(0x15d),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x543aee);else{if(_0x343726['toString']()[_0x47366d(0x8b)](_0x47366d(0xb0)))logHistory(_0x47366d(0x15d),_0x47366d(0x8e)+_0x543aee);else await handleError(_0x343726,'placeOrder()');}}}if(lastOrders[_0x47366d(0x158)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x47366d(0x113)]&&(config[_0x47366d(0x181)]==_0x47366d(0x105)?logHistory(_0x47366d(0x15d),_0x47366d(0x161)):logHistory(_0x47366d(0x15d),_0x47366d(0x182)));else coolingDown&&(!config['headless']&&logHistory(_0x47366d(0x15d),_0x47366d(0x184)));}}function logHistory(_0x35aeae,_0x2022e4,_0x45cb0d=''){const _0x464dd5=_0x3859de;let _0x4dfc8e={'time':getTimeStamp(),'type':_0x35aeae,'event':_0x2022e4,'botname':config[_0x464dd5(0xa3)],'showname':config[_0x464dd5(0x97)]};dbLogs[_0x464dd5(0x8c)](_0x464dd5(0x12c))['push'](_0x4dfc8e)[_0x464dd5(0xc7)]();if(_0x45cb0d=='')_0x45cb0d=_0x2022e4;proxyEmit('event',{'log':_0x4dfc8e,'summary':_0x45cb0d}),process[_0x464dd5(0xbd)]({'telegram':_0x4dfc8e}),logging(''+_0x4dfc8e[_0x464dd5(0x80)]);}function emitHistory(_0x51bb14={}){const _0x1d1d9d=_0x3859de;Object['keys'](_0x51bb14)[_0x1d1d9d(0x158)]==0x0&&(_0x51bb14={'type':[_0x1d1d9d(0x16d),_0x1d1d9d(0x80)],'event':'','page':0x1});if(_0x51bb14[_0x1d1d9d(0x10f)][_0x1d1d9d(0x8b)](_0x1d1d9d(0x80)))_0x51bb14[_0x1d1d9d(0x10f)][_0x1d1d9d(0x154)](_0x51bb14[_0x1d1d9d(0x10f)][_0x1d1d9d(0xe1)]('event'),0x1,'error',_0x1d1d9d(0x109));if(dbLogs[_0x1d1d9d(0x89)](_0x1d1d9d(0x12c))[_0x1d1d9d(0x159)]()){let _0x5aa70e=dbLogs['get'](_0x1d1d9d(0x12c))[_0x1d1d9d(0x13d)](_0x546c49=>{const _0x442b69=_0x1d1d9d;if(_0x51bb14[_0x442b69(0x10f)][_0x442b69(0x158)]==0x0)return![];else return _0x51bb14[_0x442b69(0x10f)][_0x442b69(0x8b)](_0x546c49[_0x442b69(0x10f)]);})[_0x1d1d9d(0x13d)](_0x5acc00=>{const _0x2d787d=_0x1d1d9d;if(_0x51bb14[_0x2d787d(0x80)]=='')return!![];else return _0x5acc00[_0x2d787d(0x80)][_0x2d787d(0xee)]()[_0x2d787d(0x8b)](_0x51bb14[_0x2d787d(0x80)][_0x2d787d(0xee)]());})[_0x1d1d9d(0x166)]('time'),_0x161f7f=_0x5aa70e[_0x1d1d9d(0x159)]()[_0x1d1d9d(0x158)];_0x5aa70e=_0x5aa70e[_0x1d1d9d(0x14a)]()[_0x1d1d9d(0xd8)]((_0x51bb14[_0x1d1d9d(0x175)]-0x1)*logPageSize,_0x51bb14[_0x1d1d9d(0x175)]*logPageSize-0x1)[_0x1d1d9d(0x14a)]()['value'](),proxyEmit(_0x1d1d9d(0xa5),{'logs':_0x5aa70e,'total':_0x161f7f});}else proxyEmit(_0x1d1d9d(0xa5),{'logs':[],'total':0x0});}async function pauseBot(_0x497296){const _0x2223c4=_0x3859de,_0x469d48=new Date()[_0x2223c4(0xb7)]();if(!lastBotPause)lastBotPause=new Date()[_0x2223c4(0xb7)](),consecutivePauses=0x1;else{if(_0x469d48-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x2223c4(0xb7)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2223c4(0x15d),_0x2223c4(0x15f)+consecutivePauses+')'),await sleep(_0x497296),botPaused=![],reset();}}async function handleError(_0x52f61b,_0x2eb87c,_0x1d1c45=''){const _0x14c3b3=_0x3859de;if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)](_0x14c3b3(0x11d)))logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0x140)),await pauseBot(pauseBotInterval);else{if(_0x52f61b[_0x14c3b3(0x173)]()['includes']('ExchangeNotAvailable'))logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0x8f)),await pauseBot(pauseBotInterval);else{if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)](_0x14c3b3(0x10b)))logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0x157)),await pauseBot(pauseBotInterval);else{if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)]('API-key\x20format\x20invalid'))logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0xb4)),logHistory('error',_0x14c3b3(0x14d)),process['send']({'stop':_0x14c3b3(0x12a)});else{if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)](_0x14c3b3(0x9e)))logHistory('error',_0x2eb87c+_0x14c3b3(0x152)),logHistory(_0x14c3b3(0x15d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x14c3b3(0xbd)]({'stop':_0x14c3b3(0x12a)});else{if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)](_0x14c3b3(0x132)))logHistory(_0x14c3b3(0x15d),_0x2eb87c+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x14c3b3(0x15d),_0x14c3b3(0x14d)),process[_0x14c3b3(0xbd)]({'stop':'kill'});else{if(_0x52f61b[_0x14c3b3(0x173)]()[_0x14c3b3(0x8b)](_0x14c3b3(0xfc)))logHistory(_0x14c3b3(0x15d),_0x2eb87c+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x14c3b3(0x15d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x14c3b3(0xbd)]({'stop':_0x14c3b3(0x12a)});else{if(_0x52f61b['toString']()[_0x14c3b3(0x8b)](_0x14c3b3(0x8d)))logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0x131)),await pauseBot(pauseBotInterval),process[_0x14c3b3(0xbd)]({'stop':_0x14c3b3(0x170)});else _0x52f61b[_0x14c3b3(0x173)]()['includes'](_0x14c3b3(0x125))?logHistory(_0x14c3b3(0x15d),_0x2eb87c+_0x14c3b3(0x156)):(logHistory(_0x14c3b3(0x15d),_0x2eb87c+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x2eb87c+'\x20|\x20Error\x20details:\x20',_0x52f61b),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xa22716,_0x37a107){return parseFloat(_0xa22716['toFixed'](_0x37a107));}function logging(_0x1c4d0b,_0x4b091a=''){const _0x18039a=_0x3859de;if(config['showname'])console[_0x18039a(0x8a)](getTimeStamp()+':\x20'+config[_0x18039a(0xa3)]+'\x20>\x20'+_0x1c4d0b,_0x4b091a);else console['log'](getTimeStamp()+_0x18039a(0xde)+botID+_0x18039a(0xe0)+_0x1c4d0b,_0x4b091a);}function getServerTime(){const _0x4399f7=_0x3859de,_0x1f5dc6=new Date();return _0x1f5dc6[_0x4399f7(0x10a)]()+'/'+(_0x1f5dc6[_0x4399f7(0xe3)]()+0x1)['toString']()[_0x4399f7(0xec)](0x2,'0')+'/'+_0x1f5dc6['getDate']()[_0x4399f7(0x173)]()[_0x4399f7(0xec)](0x2,'0')+'\x20'+_0x1f5dc6[_0x4399f7(0x84)]()[_0x4399f7(0x173)]()['padStart'](0x2,'0')+':'+_0x1f5dc6[_0x4399f7(0x103)]()['toString']()['padStart'](0x2,'0')+':'+_0x1f5dc6[_0x4399f7(0x149)]()[_0x4399f7(0x173)]()[_0x4399f7(0xec)](0x2,'0');}function getTimeStamp(){const _0x42b49d=_0x3859de,_0x155595=shiftedTime();return _0x155595[_0x42b49d(0x10a)]()+'/'+(_0x155595[_0x42b49d(0xe3)]()+0x1)[_0x42b49d(0x173)]()[_0x42b49d(0xec)](0x2,'0')+'/'+_0x155595['getDate']()[_0x42b49d(0x173)]()[_0x42b49d(0xec)](0x2,'0')+'\x20'+_0x155595['getHours']()['toString']()[_0x42b49d(0xec)](0x2,'0')+':'+_0x155595['getMinutes']()['toString']()[_0x42b49d(0xec)](0x2,'0')+':'+_0x155595[_0x42b49d(0x149)]()[_0x42b49d(0x173)]()[_0x42b49d(0xec)](0x2,'0');}function getDate(){const _0xf959d3=_0x3859de,_0x441bff=shiftedTime();return _0x441bff[_0xf959d3(0x10a)]()+'/'+(_0x441bff[_0xf959d3(0xe3)]()+0x1)[_0xf959d3(0x173)]()[_0xf959d3(0xec)](0x2,'0')+'/'+_0x441bff['getDate']()[_0xf959d3(0x173)]()[_0xf959d3(0xec)](0x2,'0');}function getHour(){const _0x2f3b90=_0x3859de,_0x524fa5=shiftedTime();return _0x524fa5['getHours']()[_0x2f3b90(0x173)]()[_0x2f3b90(0xec)](0x2,'0');}function sleep(_0x4c80c8){return new Promise(_0x43663b=>setTimeout(_0x43663b,_0x4c80c8));}function shiftedTime(){const _0x3c20df=_0x3859de,_0x25ffad=new Date();let _0x423641=_0x25ffad;if(config&&config['timeshift']!==0x0)_0x423641=fns[_0x3c20df(0x144)](_0x25ffad,{'hours':config[_0x3c20df(0x179)]});return _0x423641;}