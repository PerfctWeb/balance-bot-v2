const _0x2b23b3=_0x1047;(function(_0x2d04f7,_0x17257a){const _0x4c0bab=_0x1047,_0x18565f=_0x2d04f7();while(!![]){try{const _0x20fc6b=-parseInt(_0x4c0bab(0x1e0))/0x1*(-parseInt(_0x4c0bab(0x2aa))/0x2)+-parseInt(_0x4c0bab(0x18e))/0x3*(parseInt(_0x4c0bab(0x142))/0x4)+-parseInt(_0x4c0bab(0x27b))/0x5*(-parseInt(_0x4c0bab(0x17b))/0x6)+parseInt(_0x4c0bab(0x199))/0x7*(-parseInt(_0x4c0bab(0x1a8))/0x8)+parseInt(_0x4c0bab(0x265))/0x9+parseInt(_0x4c0bab(0x283))/0xa*(parseInt(_0x4c0bab(0x19a))/0xb)+-parseInt(_0x4c0bab(0x146))/0xc*(-parseInt(_0x4c0bab(0x1bf))/0xd);if(_0x20fc6b===_0x17257a)break;else _0x18565f['push'](_0x18565f['shift']());}catch(_0xff7206){_0x18565f['push'](_0x18565f['shift']());}}}(_0x46d5,0x3e662));const _0x409985=function(){let _0x4db75e=!![];return function(_0x30c75f,_0x4c05df){const _0xd6c77b=_0x4db75e?function(){const _0x2708af=_0x1047;if(_0x4c05df){const _0x53ad45=_0x4c05df[_0x2708af(0x2cc)](_0x30c75f,arguments);return _0x4c05df=null,_0x53ad45;}}:function(){};return _0x4db75e=![],_0xd6c77b;};}(),_0x252793=_0x409985(this,function(){const _0x4eca6d=_0x1047;return _0x252793[_0x4eca6d(0x2be)]()[_0x4eca6d(0x23b)]('(((.+)+)+)+$')[_0x4eca6d(0x2be)]()[_0x4eca6d(0x233)](_0x252793)[_0x4eca6d(0x23b)](_0x4eca6d(0x2a4));});_0x252793();'use strict';const ccxt=require(_0x2b23b3(0x184)),low=require('lowdb'),FileSync=require(_0x2b23b3(0x172)),fs=require('fs'),fns=require(_0x2b23b3(0x2d1)),Crypt=require(_0x2b23b3(0x206))[_0x2b23b3(0x13d)],util=require(_0x2b23b3(0x17a)),argv=require('yargs/yargs')(process[_0x2b23b3(0x148)][_0x2b23b3(0x1bd)](0x2))[_0x2b23b3(0x148)],path=require(_0x2b23b3(0x15d));let exchange;global[_0x2b23b3(0x183)]={},global['change']={};const usdBasecoins=[_0x2b23b3(0x296),_0x2b23b3(0x17e),_0x2b23b3(0x228),_0x2b23b3(0x136),'USDC',_0x2b23b3(0x163)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2b23b3(0x1de)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2b23b3(0x2a9)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x46d5(){const _0x529058=['Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','invalid\x20Request-Time','splice','final','MIN_NOTIONAL','BNB','constructor','NetworkError','1\x20-\x20Validate\x20orders:\x20','fetchTicker','remove','0\x20-\x20EXECUTION:\x20','net-basecoin','getMinutes','search','uncaughtException','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','cancelOrder','canceled','AuthenticationError','closed','has','getDate','\x20order:\x20','initclient','usd','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20minutes\x20-\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','bot','running','001','getCoinNumber()','RateLimitExceeded','BNB/','Huobipro','1\x20-\x20Unlock\x20orders','sell','ordertype','toUpperCase','timeout','***','cloneDeep','number','fetchTickers','writeFile','get','floor','changes','enabled','ExchangeError',':\x20timer\x20>','shift','getTime','\x20hour','cooldown','3057120dLHGjp','push','configuration','showname','logs','restart','length','starting-balance-','parse','storeHeadless','<pre>','exchange','filled','./logs/','bots','PAXG','/output-000.log','fees','timeshift','orderstatus','indexOf','split','7045AbjQTg','Failed\x20to\x20load\x20coin\x20data\x20for\x20','progress','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Reset\x20|\x20','watchTrades','exchange\x20reloaded','************','4490cFZBqr','startprice','./version.json','recreate','replace','price','watchOrders()','getPortfolio(1)','limits','OnMaintenance','Invalid\x20symbol:\x20','Mexc3','2.6.0','settings','stopExchange()','Huobi','padStart','isEqual','Kucoin','USD','sendPortfolioTelegram','2\x20-\x20Handled\x20open\x20orders','send','Waited\x20','-events.json','entries','removed','average','\x20not\x20available','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','Invalid\x20quantity','balancing\x20resumed','\x20rejected\x20your\x20API\x20request','(((.+)+)+)+$','exec','-config.json','page','ORDERS.UNLOCKED','\x20-\x20pausing\x20bot\x20for\x20','322GdvcQI',',\x20must\x20be\x20a\x203\x20digit\x20number','fetchOpenOrders','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','toFixed','remainingSymbols','mkdirSync','value','Transaction\x20detection\x20blocked','watchOrders','Bot\x20','sha256','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','privateKey','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','decrypt','Portfolio\x20change\x20detected:\x20','toggleBotMode','eur','version','toString','keys','args','emojibuy','delta','KC-API-TIMESTAMP\x20Invalid','success','Error\x20details:','Order\x20filled:\x20','\x20API\x20secret\x20is\x20invalid','Executed\x20','botname','getAllOrders()','fetchBalance','apply','Pausing\x20for\x20','startnumber','createOrder','message','date-fns','min','defaults','Avoiding\x20continuous\x20order\x20attempts','showConfig','ID:\x20','findIndex','1\x20-\x20Handle\x20open\x20orders','USDT','Unknown\x20error\x20occured','LOCKED','/USD','getCoins()','Limit\x20(high-margin)','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Crypt','storeConfiguration','Initializing\x20coin\x20results','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20closed\x20the\x20connection','73928zRdlZk','existsSync','milliseconds','Unfilled\x20order(s)\x20canceled\x20after\x20','23364pJHqbG','/EUR','argv','BTC','onepagemode','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','getPortfolio','Exception\x20thrown\x20in\x20','percentage','sort','timestamp','\x20metrics:</b>\x20\x0a\x0a','reverse','RequestTimeout','Insufficient\x20funds\x20to\x20execute\x20order:\x20','UNLOCKED','market','performance','.json','event','placeOrder','Binance','getOpenOrders()','path','debug','full','\x20|\x20exchange:\x20','random','Order\x20amount\x20is\x20invalid:\x20','USDP','Invalid\x20ACCESS_TIMESTAMP','join','Exchange','Bybit','Net\x20','breakeven','recreateCoinResults()','pro','-results.json','placeOrder()','forEach','close','assign','fiat','lowdb/adapters/FileSync','coin','coins','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limit-high','Order(s)\x20not\x20validated\x20after\x20','Net\x20effect','write','util','582WPNLnV','warning','bot-','BUSD','leftTxt','net-fiat','request-time','loadMarkets','ticker','ccxt','startdate','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','added','event-history','side','date','ExchangeNotAvailable','%\x20(','2.3.5','78EGaeZK','symbol','includes','buy','Bitget','datetime','initial','-performance.json','\x20/\x20','liquidity','valid','21QvUNuf','12430NARVnV','yyyy/MM/dd','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','toLowerCase','\x20>\x20[DEBUG]\x20','Market','excluded','order','fee','EUR','round','createWriteStream','apiPassword','test','1342072STkoTB','fromCodePoint','bb-settings.json','yyyy-MM-dd\x27T\x27HH:mm:ss','map','headless','-------------------------------\x0a','distribution','realized','set','ask','\x20orders\x20in\x20less\x20than\x20','DDoSProtection','Binanceus','ongoing','function','Transaction\x20detection\x20unblocked','emojisell','filter','getFullYear','time','slice','getPortfolio(2)','143NXGzDl','Manual\x20balancing\x20required','<b>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','cost','padEnd','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','botID','openOrders','orderId','/backup/','deleteHistoryAlerts','change24h','threshold','stringify','sells','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','last','\x20has\x20a\x2024h\x20drop\x20of\x20','colorscheme','Error\x20while\x20deleting\x20files:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','change','\x20change','PermissionDenied','password','portfolio','1\x20-\x20FILLED\x20known\x20order:\x20','Resetting\x20coin\x20results:\x20','error','\x20portfolio:</b>\x20\x0a\x0a','freeze','ETH','1455xytQLb','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','exchanges','log','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','abs','\x20exchange','./config/','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','sendMetricsTelegram','total','loading-canceled','\x20not\x20responding','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','Error:\x20Invalid\x20argument\x20','basecoin','unlinkSync','fetchClosedOrders','data','currency','Fee\x20discount\x20refund\x20detected:\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','cancelOrders()','find','Trigger:\x20','red_yellow_blue','offset','rightTxt','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','status','autoliquidity','max','balances',':\x20Bot\x20','apiKey','amount','getHours','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','hybrid-crypto-js','InvalidOrder','trade','netoffset','\x20:\x20','customId','recent20','open','\x20|\x20','none','<b>Bot\x20','highest','API-key\x20format\x20invalid','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20exchange\x20error','format','watchTransactions()','target','limit-low','basecoinvalue','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','apiSecret','exchange\x20not\x20reloaded','spot','type','sortBy','\x20>\x20','\x20-\x20bot\x20not\x20started','limit','no\x20open\x20orders','\x20|\x20highest\x20fee:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','initTickers()','TUSD','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','must\x20be\x20greater\x20than\x20minimum\x20amount','getMonth','RSA-OAEP'];_0x46d5=function(){return _0x529058;};return _0x46d5();}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x2b23b3(0x285))[_0x2b23b3(0x2bd)],botID=process[_0x2b23b3(0x148)][0x2]||_0x2b23b3(0x24c),pattern=/^[0-9]{3}$/;!pattern[_0x2b23b3(0x1a7)](botID)&&(console['log'](_0x2b23b3(0x1ee)+botID+_0x2b23b3(0x2ab)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x2b23b3(0x1e7)+userID+'/':'./config/',logspath=userID?_0x2b23b3(0x272)+userID+'/':_0x2b23b3(0x272),loggerfile=fs[_0x2b23b3(0x1a5)](logspath+_0x2b23b3(0x275),{'flags':'a'});!fs[_0x2b23b3(0x143)](configpath)&&fs[_0x2b23b3(0x2b0)](configpath);!fs[_0x2b23b3(0x143)](logspath)&&fs[_0x2b23b3(0x2b0)](logspath);const configfile=configpath+_0x2b23b3(0x17d)+botID+_0x2b23b3(0x2a6),logfile=configpath+_0x2b23b3(0x17d)+botID+_0x2b23b3(0x29b),performancefile=configpath+'bot-'+botID+_0x2b23b3(0x195),coinresultsfile=configpath+_0x2b23b3(0x17d)+botID+_0x2b23b3(0x16c),settingsfile=configpath+_0x2b23b3(0x1aa),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2b23b3(0x1c9),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2b23b3(0x2d3)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2b23b3(0x2d3)]({'data':[],'version':serverversion})[_0x2b23b3(0x179)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x2b23b3(0x179)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2b23b3(0x2d3)]({'coins':[],'version':serverversion})[_0x2b23b3(0x179)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2b23b3(0x2b5),'rsaStandard':_0x2b23b3(0x22c)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1b450c=>{console['log'](_0x1b450c);},'simple':_0x3e3953=>{const _0x28e9e7=_0x2b23b3;console['log'](_0x3e3953),loggerfile[_0x28e9e7(0x179)](util[_0x28e9e7(0x215)](_0x3e3953)+'\x0a');},'full':async(_0x4703ec,_0x2284f0='')=>{const _0x4cf4b6=_0x2b23b3;let _0x51f20d;if(config[_0x4cf4b6(0x268)])_0x51f20d=getTimeStamp()+':\x20'+config['botname']+_0x4cf4b6(0x221)+_0x4703ec;else _0x51f20d=getTimeStamp()+_0x4cf4b6(0x201)+botID+_0x4cf4b6(0x221)+_0x4703ec;console['log'](_0x51f20d),loggerfile[_0x4cf4b6(0x179)](util['format'](_0x51f20d)+'\x0a'),_0x2284f0&&(console[_0x4cf4b6(0x1e3)](_0x2284f0),loggerfile['write'](util[_0x4cf4b6(0x215)](_0x2284f0)+'\x0a'));},'debug':async(_0x29ba69,_0x9bbbfd='')=>{const _0x4f9317=_0x2b23b3;let _0x1157f1;if(config['showname'])_0x1157f1=getTimeStamp()+':\x20'+config[_0x4f9317(0x2c9)]+_0x4f9317(0x19e)+_0x29ba69;else _0x1157f1=getTimeStamp()+_0x4f9317(0x201)+botID+_0x4f9317(0x19e)+_0x29ba69;if(debugging)console['log'](_0x1157f1);loggerfile[_0x4f9317(0x179)](util['format'](_0x1157f1)+'\x0a');if(_0x9bbbfd){if(debugging)console['log'](_0x9bbbfd);loggerfile[_0x4f9317(0x179)](util[_0x4f9317(0x215)](_0x9bbbfd)+'\x0a');}}};process['on'](_0x2b23b3(0x23c),function(_0x2e6250){const _0x4f0652=_0x2b23b3;handleError(_0x2e6250,_0x4f0652(0x23c));});settings[_0x2b23b3(0x277)]!=config['timeshift']&&updateTimeshift(settings[_0x2b23b3(0x277)]);settings['onepagemode']!=config[_0x2b23b3(0x14a)]&&updateOnepagemode(settings['onepagemode']);process[_0x2b23b3(0x299)]({'started':_0x2b23b3(0x24b)},_0x5cf284=>{}),initializeProcessListeners();function proxyEmit(_0x3597ba,_0x55263c=null){const _0x57aab1=_0x2b23b3;process[_0x57aab1(0x299)]({'function':_0x3597ba,'args':_0x55263c},_0x270be1=>{});}function initializeProcessListeners(){const _0x43233b=_0x2b23b3;process['on'](_0x43233b(0x2d0),_0x4ac8da=>{const _0x2f75a0=_0x43233b;switch(Object[_0x2f75a0(0x2bf)](_0x4ac8da)[0x0]){case _0x2f75a0(0x277):_0x4ac8da[_0x2f75a0(0x277)]!=undefined&&(settings[_0x2f75a0(0x277)]=_0x4ac8da[_0x2f75a0(0x277)],updateTimeshift(settings[_0x2f75a0(0x277)]));break;case _0x2f75a0(0x14a):_0x4ac8da[_0x2f75a0(0x14a)]!=undefined&&(settings[_0x2f75a0(0x14a)]=_0x4ac8da[_0x2f75a0(0x14a)],updateOnepagemode(settings['onepagemode']));break;case _0x2f75a0(0x273):_0x4ac8da['bots']!=undefined&&(bots=JSON[_0x2f75a0(0x26d)](_0x4ac8da[_0x2f75a0(0x273)]),proxyEmit(_0x2f75a0(0x273),bots));break;case'function':switch(_0x4ac8da[_0x2f75a0(0x1b7)]){case _0x2f75a0(0x245):initclient();break;case _0x2f75a0(0x2bb):toggleBotMode();break;case'emitHistory':emitHistory(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case _0x2f75a0(0x1ca):deleteHistoryAlerts(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case _0x2f75a0(0x14c):getPortfolio(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case _0x2f75a0(0x13e):storeConfiguration(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case _0x2f75a0(0x26e):storeHeadless(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case'storeFiat':storeFiat(_0x4ac8da['args']);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x2f75a0(0x15a):placeOrder(_0x4ac8da[_0x2f75a0(0x2c0)]);break;case'cancelLoading':cancelLoading();break;case _0x2f75a0(0x2d5):showConfig();break;case _0x2f75a0(0x1e9):sendMetricsTelegram();break;case _0x2f75a0(0x297):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x12dfdf=![]){const _0x5e723c=_0x2b23b3;logger[_0x5e723c(0x15e)](_0x5e723c(0x27f)+(_0x12dfdf?_0x5e723c(0x281):_0x5e723c(0x21d))+_0x5e723c(0x160)+config[_0x5e723c(0x270)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x12dfdf)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5e723c(0x202)]!=''&&config[_0x5e723c(0x202)]!=_0x5e723c(0x256)){loadingProgress=0x0;if(_0x12dfdf){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x542f00){handleErrorNoStop(_0x542f00,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x5e339c=await getCoins();[currentCoins,currentCoinsAll]=_0x5e339c,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x5e723c(0x15e)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5e723c(0x26b)]==0x0&&allOpenOrders[_0x5e723c(0x26b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x425cf4=_0x2b23b3;exchangeStopped=!![];try{await exchange[_0x425cf4(0x16f)]();}catch(_0x6f67e3){await handleError(_0x6f67e3,_0x425cf4(0x291));}}async function reloadExchange(){while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x120a21=config[_0x2b23b3(0x270)],_0x38c585=config[_0x2b23b3(0x202)],_0x398d17=config[_0x2b23b3(0x21c)],_0x4c2e43=config[_0x2b23b3(0x1a6)]){const _0x1e7125=_0x2b23b3;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x120a21)&&(logHistory(_0x1e7125(0x1dc),_0x1e7125(0x27e)+_0x120a21+_0x1e7125(0x1e6)),killBot());const _0x3a6729=ccxt[_0x1e7125(0x16b)][_0x120a21[_0x1e7125(0x19d)]()];exchange=new _0x3a6729({'apiKey':_0x38c585,'secret':_0x398d17,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x4c2e43)exchange[_0x1e7125(0x1d8)]=_0x4c2e43;}function setStableCoins(){const _0x37c0f5=_0x2b23b3;let _0x14f281=config['basecoin']=='ETH'?_0x37c0f5(0x1df):config[_0x37c0f5(0x1ef)]=='PAXG'?_0x37c0f5(0x274):_0x37c0f5(0x149),_0x122551=!allSymbols[_0x37c0f5(0x190)](_0x14f281+_0x37c0f5(0x139))?_0x37c0f5(0x136):'USD',_0x4e8e2e=!allSymbols[_0x37c0f5(0x190)](_0x14f281+_0x37c0f5(0x147))?_0x122551:_0x37c0f5(0x1a3);stablecoins={'eur':{'coin':''+_0x14f281+_0x4e8e2e,'symbol':_0x14f281+'/'+_0x4e8e2e},'usd':{'coin':''+_0x14f281+_0x122551,'symbol':_0x14f281+'/'+_0x122551}};}async function initwsCcxt(){const _0x5e6355=_0x2b23b3;initCycle++;const _0x4223c0=initCycle;let _0xa0a940=[];config[_0x5e6355(0x1d9)]['forEach'](_0x11ad78=>{const _0x1badb3=_0x5e6355;if(!_0x11ad78[_0x1badb3(0x1a0)]&&_0x11ad78[_0x1badb3(0x173)]!=config[_0x1badb3(0x1ef)])_0xa0a940[_0x1badb3(0x266)](_0x11ad78[_0x1badb3(0x18f)]);});if(!_0xa0a940['includes'](stablecoins[_0x5e6355(0x2bc)]['symbol']))_0xa0a940['push'](stablecoins[_0x5e6355(0x2bc)][_0x5e6355(0x18f)]);if(!_0xa0a940[_0x5e6355(0x190)](stablecoins[_0x5e6355(0x246)][_0x5e6355(0x18f)]))_0xa0a940[_0x5e6355(0x266)](stablecoins[_0x5e6355(0x246)][_0x5e6355(0x18f)]);if(config['exchange']['startsWith'](_0x5e6355(0x15b))&&config[_0x5e6355(0x1ef)]!=_0x5e6355(0x274)){if(!_0xa0a940[_0x5e6355(0x190)]('BNB/'+config[_0x5e6355(0x1ef)]))_0xa0a940[_0x5e6355(0x266)](_0x5e6355(0x24f)+config['basecoin']);}loadCoins(_0xa0a940),_0xa0a940=validateSymbols(_0xa0a940);const _0x38ecfa=async _0x35011d=>{const _0x69b66=_0x5e6355;let _0x5e8d5d;try{const _0x113a67=await getTickers(_0x35011d);Object[_0x69b66(0x29c)](_0x113a67)[_0x69b66(0x16e)](_0x21ef98=>{const _0x376129=_0x69b66;_0x5e8d5d=_0x21ef98[0x1][_0x376129(0x18f)],global[_0x376129(0x183)][noslash(_0x5e8d5d)]=_0x21ef98[0x1][_0x376129(0x1d0)],global[_0x376129(0x1d5)][_0x5e8d5d]=_0x21ef98[0x1][_0x376129(0x14e)];});}catch(_0x139de3){await handleError(_0x139de3,_0x69b66(0x227),_0x5e8d5d);}},_0x11232e=async _0xd98aad=>{const _0x1c8aa3=_0x5e6355;while(initCycle==_0x4223c0){if(!botPaused)try{const _0x1f720b=await exchange[_0x1c8aa3(0x280)](_0xd98aad);global[_0x1c8aa3(0x183)][noslash(_0x1f720b[0x0][_0x1c8aa3(0x18f)])]=_0x1f720b[0x0][_0x1c8aa3(0x288)],await sleep(0x3e8);}catch(_0x5937e1){if(!exchangeStopped)await handleError(_0x5937e1,'watchTrades()',_0xd98aad);}else await sleep(0x64);}},_0x34089a=async _0x6f1717=>{const _0x2e0b4c=_0x5e6355;while(initCycle==_0x4223c0){if(!botPaused){let _0x47c176;try{await sleep(0x3c*0x3e8);const _0x31ba22=await getTickers(_0x6f1717);Object[_0x2e0b4c(0x29c)](_0x31ba22)['forEach'](_0x439ee8=>{const _0x430360=_0x2e0b4c;_0x47c176=_0x439ee8[0x1][_0x430360(0x18f)],global[_0x430360(0x1d5)][_0x47c176]=_0x439ee8[0x1]['percentage'];});}catch(_0x8f23e4){if(!exchangeStopped)await handleError(_0x8f23e4,'fetchTickers()',_0x47c176);}}else await sleep(0x64);}},_0x47b203=async _0x94c1e1=>{const _0x10c0d3=_0x5e6355;while(initCycle==_0x4223c0){if(!botPaused)try{const _0x2be822=await exchange[_0x10c0d3(0x2b3)](_0x94c1e1);initCycle==_0x4223c0&&_0x2be822[_0x10c0d3(0x16e)](_0x36152e=>{updateNumberCoinsCcxt(_0x36152e);});}catch(_0x34275c){if(!exchangeStopped)await handleError(_0x34275c,_0x10c0d3(0x289));}else await sleep(0x64);}};_0x38ecfa(_0xa0a940),_0x34089a(_0xa0a940),_0xa0a940[_0x5e6355(0x16e)](_0x484019=>{_0x11232e(_0x484019),_0x47b203(_0x484019);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4c61dd){const _0x3bb5ac=_0x2b23b3;let _0x34d047={};try{if(config[_0x3bb5ac(0x270)]!='Cryptocom')_0x34d047=await exchange[_0x3bb5ac(0x259)](_0x4c61dd);else for(const _0x405a92 of _0x4c61dd){const _0x135388=await exchange[_0x3bb5ac(0x236)](_0x405a92);_0x34d047[_0x405a92]=_0x135388;}return _0x34d047;}catch(_0x47a784){throw _0x47a784;}}async function watchTransactions(){const _0x2623be=_0x2b23b3;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x48e655=await getCoins(),[_0x2bf5c6,_0x2d247d]=_0x48e655;let _0xe421ab=[];currentCoins['forEach'](_0x1e718c=>{const _0x191e24=_0x1047,_0xce067e=_0x2bf5c6[_0x191e24(0x1f7)](_0x40defa=>_0x40defa[_0x191e24(0x173)]==_0x1e718c['coin']);if(_0xce067e){if(_0x1e718c[_0x191e24(0x258)]!=_0xce067e[_0x191e24(0x258)]){let _0x3bb1a0;if(_0x1e718c[_0x191e24(0x173)]!=config['basecoin']){const _0x190d4d=global[_0x191e24(0x183)][noslash(_0x1e718c[_0x191e24(0x18f)])];_0x3bb1a0=_0x1e718c['reverse']?0x1/_0x190d4d:_0x190d4d;}else _0x3bb1a0=0x1;_0xe421ab[_0x191e24(0x266)]({'coin':_0x1e718c[_0x191e24(0x173)],'symbol':_0x1e718c['symbol'],'price':_0x3bb1a0,'number':Number(formatResult(_0xce067e[_0x191e24(0x258)]-_0x1e718c[_0x191e24(0x258)],0x8)),'basecoinvalue':_0x3bb1a0*(_0xce067e[_0x191e24(0x258)]-_0x1e718c[_0x191e24(0x258)])});}}});if(_0xe421ab['length']==0x1&&!blockTransactionDetection){if(config[_0x2623be(0x1fe)]){logger[_0x2623be(0x15e)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0xe421ab[0x0]['basecoinvalue']+_0x2623be(0x225)+lastFees[_0x2623be(0x211)]);if(lastFees[_0x2623be(0x211)]==0x0||Math['abs'](_0xe421ab[0x0][_0x2623be(0x219)])>lastFees[_0x2623be(0x211)]){delete _0xe421ab[0x0][_0x2623be(0x18f)],delete _0xe421ab[0x0][_0x2623be(0x219)];let _0x83fa90=[],_0x562892=[...config[_0x2623be(0x197)]]||[],_0x326e6c=config[_0x2623be(0x197)];_0x562892[_0x2623be(0x14f)]((_0x321af4,_0x443b78)=>_0x321af4[_0x2623be(0x18a)]>_0x443b78[_0x2623be(0x18a)]?-0x1:_0x443b78[_0x2623be(0x18a)]>_0x321af4[_0x2623be(0x18a)]?0x1:0x0);const _0x5ade9c=getDate();if(_0x562892[0x0]){const _0x545750=fns['parse'](_0x562892[0x0]['date'],_0x2623be(0x19b),new Date()),_0x1422f2=fns[_0x2623be(0x26d)](_0x5ade9c,_0x2623be(0x19b),new Date());if(fns['isEqual'](_0x545750,_0x1422f2)){_0x83fa90=_0x562892[0x0][_0x2623be(0x25d)];const _0x15863a=_0x83fa90[_0x2623be(0x1f7)](_0x2dc656=>_0x2dc656[_0x2623be(0x173)]==_0xe421ab[0x0][_0x2623be(0x173)]);_0x15863a?(_0x15863a['number']+=_0xe421ab[0x0][_0x2623be(0x258)],_0x15863a[_0x2623be(0x258)]==0x0&&(_0x83fa90=_0x83fa90['filter'](_0x281007=>{const _0x32d251=_0x2623be;return _0x281007[_0x32d251(0x173)]!=_0xe421ab[0x0][_0x32d251(0x173)];}))):_0x83fa90[_0x2623be(0x266)](_0xe421ab[0x0]);const _0x58ae6d=_0x326e6c['find'](_0x49e591=>_0x49e591['date']==_0x5ade9c);_0x58ae6d[_0x2623be(0x25d)]=_0x83fa90;}else _0x326e6c[_0x2623be(0x266)]({'date':_0x5ade9c,'changes':[_0xe421ab[0x0]]});}const _0x2f2941=_0x326e6c[_0x2623be(0x1f7)](_0x504ae9=>_0x504ae9[_0x2623be(0x18a)]==_0x5ade9c);if(_0x2f2941){let _0x35293f=!![];_0x2f2941[_0x2623be(0x25d)][_0x2623be(0x16e)](_0x40208c=>{const _0x2ce0f3=_0x2623be;if(_0x40208c[_0x2ce0f3(0x258)]!=0x0)_0x35293f=![];}),_0x35293f&&(_0x326e6c=_0x326e6c['filter'](_0x487929=>{const _0x5492c3=_0x2623be;return _0x487929[_0x5492c3(0x18a)]!=_0x5ade9c;}));}let _0x4a9538=dbConfig[_0x2623be(0x25b)](_0x2623be(0x24a))[_0x2623be(0x1f7)]({'botID':botID})[_0x2623be(0x2b1)]();_0x4a9538&&(dbConfig[_0x2623be(0x25b)](_0x2623be(0x24a))[_0x2623be(0x1f7)]({'botID':botID})[_0x2623be(0x170)]({'liquidity':_0x326e6c})[_0x2623be(0x179)](),config[_0x2623be(0x197)]=_0x326e6c),logHistory(_0x2623be(0x2c4),_0x2623be(0x2ba)+Math[_0x2623be(0x1e5)](_0xe421ab[0x0][_0x2623be(0x258)])+'\x20'+_0xe421ab[0x0]['coin']+'\x20'+(_0xe421ab[0x0]['number']>0x0?_0x2623be(0x187):'removed')+_0x2623be(0x2b8)),proxyEmit(_0x2623be(0x267),emittedConfiguration());}else logger[_0x2623be(0x15e)](_0x2623be(0x1f4)+Math['abs'](_0xe421ab[0x0][_0x2623be(0x258)])+'\x20'+_0xe421ab[0x0][_0x2623be(0x173)]+'\x20'+(_0xe421ab[0x0]['number']>0x0?'added':_0x2623be(0x29d)));transactionDetected=!![];}else logger[_0x2623be(0x15e)](_0x2623be(0x2ba)+Math[_0x2623be(0x1e5)](_0xe421ab[0x0][_0x2623be(0x258)])+'\x20'+_0xe421ab[0x0][_0x2623be(0x173)]+'\x20'+(_0xe421ab[0x0][_0x2623be(0x258)]>0x0?_0x2623be(0x187):_0x2623be(0x29d))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x2bf5c6,currentCoinsAll=_0x2d247d,await sleep(watchTransactionsInterval);}catch(_0x3947e4){if(!exchangeStopped)await handleError(_0x3947e4,_0x2623be(0x216));}else await sleep(0x64);}}async function loadSymbols(){const _0x506c4d=_0x2b23b3;try{markets=await exchange[_0x506c4d(0x182)](),allSymbols=[],Object[_0x506c4d(0x29c)](markets)['forEach'](_0x5aa448=>{const _0x39f715=_0x506c4d;_0x5aa448[0x1]['active']&&_0x5aa448[0x1][_0x39f715(0x21e)]&&allSymbols[_0x39f715(0x266)](_0x5aa448[0x0]);});}catch(_0x1ad408){throw _0x1ad408;}}function validateSymbols(_0x4359ce){const _0xd55a4b=_0x2b23b3;let _0x8cd353=[];return _0x4359ce[_0xd55a4b(0x16e)](_0x53e67a=>{const _0x1de5e4=_0xd55a4b;!allSymbols[_0x1de5e4(0x190)](_0x53e67a)?logHistory(_0x1de5e4(0x1dc),_0x1de5e4(0x28d)+_0x53e67a+_0x1de5e4(0x21b)):_0x8cd353[_0x1de5e4(0x266)](_0x53e67a);}),_0x8cd353;}async function initclient(){const _0x1ea357=_0x2b23b3;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1ea357(0x200),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3bc2cb=getNormalizedPerformance();emitPerformance(_0x3bc2cb),getStartingBalances(_0x3bc2cb);}async function toggleBotMode(){const _0x347fec=_0x2b23b3;let _0x2b40e1=dbConfig['get']('bot')[_0x347fec(0x1f7)]({'botID':botID})[_0x347fec(0x2b1)]();if(_0x2b40e1){const _0x1b9b3b=!_0x2b40e1[_0x347fec(0x1ad)];dbConfig[_0x347fec(0x25b)](_0x347fec(0x24a))[_0x347fec(0x1f7)]({'botID':botID})[_0x347fec(0x170)]({'headless':_0x1b9b3b})[_0x347fec(0x179)](),config[_0x347fec(0x1ad)]=_0x1b9b3b,proxyEmit(_0x347fec(0x267),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2c293a=_0x2b23b3;process[_0x2c293a(0x299)]({'updatebotmanager':!![]},_0x14a945=>{}),logger['debug']('Headless:\x20'+config[_0x2c293a(0x1ad)]);}async function loadCoins(_0x41a55e){const _0x5e6bc8=_0x2b23b3;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x564a34,_0x1f1f36=0x0,_0x268f5f=0x0;_0x41a55e[_0x5e6bc8(0x16e)](_0x3aa7b2=>{const _0x3099bb=_0x5e6bc8;loading[_0x3099bb(0x2af)][_0x3099bb(0x266)](_0x3aa7b2);}),loadingCanceled=![];let _0x2e590f=![];while(_0x564a34!=_0x41a55e[_0x5e6bc8(0x26b)]+maxLoadingProgress){_0x564a34=loadingProgress,_0x41a55e[_0x5e6bc8(0x16e)](_0x190572=>{const _0x897d52=_0x5e6bc8;if(global['ticker'][noslash(_0x190572)]){loading['remainingSymbols']=loading['remainingSymbols'][_0x897d52(0x1ba)](_0x2e4138=>_0x2e4138!=_0x190572);if(!watchedSymbols[_0x897d52(0x190)](_0x190572))watchedSymbols['push'](_0x190572);_0x564a34++;}}),loading[_0x5e6bc8(0x27d)]=Math['round'](_0x564a34/(_0x41a55e[_0x5e6bc8(0x26b)]+maxLoadingProgress)*0x64);loading[_0x5e6bc8(0x27d)]!=0x64&&(_0x268f5f>0x1e*0x5&&(loading[_0x5e6bc8(0x255)]=!![],emitLoadingProgress()),_0x268f5f>0x78*0x5&&!_0x2e590f&&(_0x2e590f=!![],logHistory(_0x5e6bc8(0x1dc),_0x5e6bc8(0x27c)+loading['remainingSymbols']['join'](',\x20')+_0x5e6bc8(0x222)),logHistory('error',_0x5e6bc8(0x2cd)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x3f50f2=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1f1f36!=loading[_0x5e6bc8(0x27d)]&&(_0x1f1f36=loading[_0x5e6bc8(0x27d)],emitLoadingProgress()),_0x268f5f++,await sleep(0xc8);}_0x564a34==_0x41a55e[_0x5e6bc8(0x26b)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x5e6bc8(0x299)]({'status':_0x5e6bc8(0x25e),'live':_0x5e6bc8(0x24b)},_0x25edd9=>{}),_0x2e590f&&logHistory(_0x5e6bc8(0x2c4),_0x5e6bc8(0x14b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x52451d=_0x2b23b3;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x52451d(0x1eb)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x481697=_0x2b23b3;let _0x12e7c3=global[_0x481697(0x183)][stablecoins['eur'][_0x481697(0x173)]],_0x4b7c32=global[_0x481697(0x183)][stablecoins[_0x481697(0x246)][_0x481697(0x173)]];return{'eur':Number(_0x12e7c3),'usd':Number(_0x4b7c32)};}function capitalize(_0x4717eb){const _0x4ffeae=_0x2b23b3;return _0x4717eb['substring'](0x0,0x1)[_0x4ffeae(0x254)]()+_0x4717eb['substring'](0x1);}function supportedExchanges(){const _0x432958=_0x2b23b3,_0x429987=['ws','fetchTickers',_0x432958(0x236),_0x432958(0x280),_0x432958(0x2b3),_0x432958(0x23e),_0x432958(0x2cf),_0x432958(0x2ac),_0x432958(0x1f1),_0x432958(0x2cb)];let _0x60f857=[],_0x58cb72=[],_0x449690=ccxt[_0x432958(0x16b)][_0x432958(0x1e2)];_0x449690[_0x432958(0x16e)](_0x1762c6=>{const _0x5789a0=_0x432958;try{const _0x60f6fd=new ccxt[(_0x5789a0(0x16b))][_0x1762c6]();_0x58cb72['push'](_0x60f6fd);}catch(_0x5b11a9){}}),_0x58cb72[_0x432958(0x16e)](_0x2c8d0c=>{const _0x255d7b=_0x432958;let _0x3d7f90=0x0;_0x429987[_0x255d7b(0x16e)](_0x12fe57=>{const _0x1c77d6=_0x255d7b;_0x12fe57 in _0x2c8d0c[_0x1c77d6(0x242)]&&_0x2c8d0c[_0x1c77d6(0x242)][_0x12fe57]&&_0x3d7f90++;}),_0x3d7f90==_0x429987[_0x255d7b(0x26b)]&&_0x60f857[_0x255d7b(0x266)](capitalize(_0x2c8d0c['id']));});let _0x3fdc2f=[];return _0x449690[_0x432958(0x16e)](_0x33ff98=>{const _0x3ceb1d=_0x432958;_0x33ff98=capitalize(_0x33ff98);if(!_0x60f857['includes'](_0x33ff98))_0x3fdc2f[_0x3ceb1d(0x266)](_0x33ff98);}),_0x60f857;}function setStartDatePerformance(){const _0x25972b=_0x2b23b3;if(config&&config[_0x25972b(0x197)][0x0][_0x25972b(0x25d)]['length']!=0x0){const _0x3e040f=config[_0x25972b(0x197)][0x0]['changes'];dbPerformance[_0x25972b(0x25b)](_0x25972b(0x1f2))['find']({'date':config[_0x25972b(0x185)]})['assign']({'coins':_0x3e040f})[_0x25972b(0x179)]();}}async function recreateCoinResults(){const _0x1678d5=_0x2b23b3;let _0x5d59b8,_0x15496d=[];try{const _0x457851=fns[_0x1678d5(0x215)](fns['parseISO'](config[_0x1678d5(0x185)]['replace'](/\//g,'-')),_0x1678d5(0x1ab));for(const _0x23ae67 of currentCoins){if(_0x23ae67['coin']!=config[_0x1678d5(0x1ef)]){let _0x447da7=0x0,_0x2d6897,_0x3e97e5;_0x5d59b8=await getAllEventOrders(_0x23ae67[_0x1678d5(0x18f)]);if(_0x5d59b8['length']>0x0)_0x5d59b8[_0x1678d5(0x16e)](_0xf8df60=>{const _0x51db44=_0x1678d5,_0x1beae4=_0x23ae67[_0x51db44(0x18f)]['includes'](config[_0x51db44(0x1ef)]+'/');_0x15496d['push']({'datetime':_0xf8df60[_0x51db44(0x193)],'coin':_0x23ae67['coin'],'symbol':_0x23ae67[_0x51db44(0x18f)],'side':_0xf8df60['side'],'reverse':_0x1beae4,'amount':formatResult(_0xf8df60['filled'],0x8),'filled':formatResult(_0xf8df60['filled'],0x8),'price':formatResult(_0xf8df60[_0x51db44(0x288)],0x8)}),_0x447da7=_0xf8df60[_0x51db44(0x189)]==_0x51db44(0x191)?_0x447da7+_0xf8df60[_0x51db44(0x271)]:_0x447da7-_0xf8df60['filled'];if(!_0x3e97e5)_0x3e97e5=_0xf8df60[_0x51db44(0x288)];});_0x2d6897=_0x23ae67[_0x1678d5(0x258)]-_0x447da7;let _0x212c63;config[_0x1678d5(0x197)][_0x1678d5(0x16e)](_0x356253=>{const _0x2bfe52=_0x1678d5;!_0x212c63&&(_0x212c63=_0x356253['changes'][_0x2bfe52(0x1f7)](_0x495807=>_0x495807[_0x2bfe52(0x173)]==_0x23ae67['coin']),_0x212c63&&(_0x2d6897=_0x212c63[_0x2bfe52(0x258)],_0x3e97e5=_0x212c63['price']));});let _0x4f95df=dbCoinResults['get']('coins')[_0x1678d5(0x1f7)]({'coin':_0x23ae67[_0x1678d5(0x173)]})[_0x1678d5(0x2b1)]();_0x4f95df={'coin':_0x23ae67[_0x1678d5(0x173)],'number':_0x2d6897,'breakeven':_0x3e97e5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1678d5(0x25b)](_0x1678d5(0x174))[_0x1678d5(0x1f7)]({'coin':_0x23ae67[_0x1678d5(0x173)]})['assign'](_0x4f95df)[_0x1678d5(0x179)]();}}_0x15496d[_0x1678d5(0x14f)]((_0xb0fa19,_0x3bf646)=>_0xb0fa19['datetime']>_0x3bf646[_0x1678d5(0x193)]?0x1:_0x3bf646[_0x1678d5(0x193)]>_0xb0fa19['datetime']?-0x1:0x0);let _0x348d39=0x0;for(let _0x55ae4f of _0x15496d){await updateCoinResults(_0x55ae4f,!![]);}}catch(_0x4428ea){await handleError(_0x4428ea,_0x1678d5(0x16a));}}async function getAllEventOrders(_0x3be9ea){const _0x184474=_0x2b23b3;let _0xec65ee=[],_0x262f9a=dbLogs[_0x184474(0x25b)](_0x184474(0x269))[_0x184474(0x1ba)](_0x6e87b0=>{const _0xe89da2=_0x184474,_0x5167f4=_0x6e87b0[_0xe89da2(0x159)][_0xe89da2(0x19d)]();return _0x5167f4[_0xe89da2(0x190)](_0x3be9ea[_0xe89da2(0x19d)]())&&(_0x5167f4['includes'](_0xe89da2(0x156))&&_0x5167f4[_0xe89da2(0x190)]('order')||_0x5167f4['includes'](_0xe89da2(0x271))&&_0x5167f4[_0xe89da2(0x190)](_0xe89da2(0x1a1)));})[_0x184474(0x220)](_0x184474(0x1bc))[_0x184474(0x2b1)]();return _0x262f9a[_0x184474(0x16e)](_0x2ed471=>{const _0x48501e=_0x184474,_0x2845c7=_0x2ed471[_0x48501e(0x159)][_0x48501e(0x190)]('sell')?_0x48501e(0x252):_0x48501e(0x191),_0x1104fb=/#([0-9]|\.)+\s/i,_0x13fe27=Number(_0x1104fb[_0x48501e(0x2a5)](_0x2ed471[_0x48501e(0x159)])[0x0][_0x48501e(0x1bd)](0x1)),_0x4c3bf0=/@([0-9]|\.)+$/i,_0x3b8083=Number(_0x4c3bf0[_0x48501e(0x2a5)](_0x2ed471[_0x48501e(0x159)])[0x0][_0x48501e(0x1bd)](0x1));_0xec65ee[_0x48501e(0x266)]({'datetime':_0x2ed471[_0x48501e(0x1bc)],'coin':symbolToCoin(_0x3be9ea),'symbol':_0x3be9ea,'side':_0x2845c7,'amount':_0x13fe27,'filled':_0x13fe27,'price':_0x3b8083});}),_0xec65ee;}async function getAllOrders(_0x48a3b2,_0x569f33){const _0x5bcc57=_0x2b23b3;let _0x1b8c5e=[];while(_0x569f33<exchange[_0x5bcc57(0x144)]()){const _0xc56abb=0x1f4;try{const _0x558c08=await exchange[_0x5bcc57(0x1f1)](_0x48a3b2,_0x569f33,_0xc56abb);if(_0x558c08[_0x5bcc57(0x26b)])_0x569f33=_0x558c08[_0x558c08[_0x5bcc57(0x26b)]-0x1][_0x5bcc57(0x150)]+0x1,_0x1b8c5e=_0x1b8c5e['concat'](_0x558c08);else break;}catch(_0x2e8201){await handleError(_0x2e8201,_0x5bcc57(0x2ca),_0x48a3b2);}}return _0x1b8c5e;}async function validate24hChanges(){const _0x50a1f6=_0x2b23b3;for(const _0x10c678 of currentCoins){if(_0x10c678[_0x50a1f6(0x173)]!=config['basecoin']){let _0x5571a9;_0x10c678['reverse']?_0x5571a9=formatResult((0x1/(global[_0x50a1f6(0x1d5)][noslash(_0x10c678[_0x50a1f6(0x18f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5571a9=global['change'][noslash(_0x10c678[_0x50a1f6(0x18f)])],_0x5571a9<config[_0x50a1f6(0x1cb)]&&(logHistory(_0x50a1f6(0x1dc),_0x10c678[_0x50a1f6(0x173)]+_0x50a1f6(0x1d1)+_0x5571a9+'%'),logHistory(_0x50a1f6(0x1dc),_0x50a1f6(0x186)),logHistory('error',_0x50a1f6(0x249)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2e1853,_0x12e06e){const _0x10d0ff=_0x2b23b3;if(!_0x2e1853)return!![];const _0x33cc56=_0x12e06e[_0x10d0ff(0x27a)]('.'),_0x483ee6=_0x2e1853[_0x10d0ff(0x27a)]('.');for(var _0x47035c=0x0;_0x47035c<_0x483ee6[_0x10d0ff(0x26b)];_0x47035c++){const _0x2f5ba9=~~_0x483ee6[_0x47035c],_0x5211b4=~~_0x33cc56[_0x47035c];if(_0x2f5ba9<_0x5211b4)return!![];if(_0x2f5ba9>_0x5211b4)return![];}return![];}function _0x1047(_0x41a7d1,_0x413bcf){const _0x1edd83=_0x46d5();return _0x1047=function(_0x252793,_0x409985){_0x252793=_0x252793-0x136;let _0x46d542=_0x1edd83[_0x252793];return _0x46d542;},_0x1047(_0x41a7d1,_0x413bcf);}async function oneTimeMigration(){const _0x1172ff=_0x2b23b3;let _0x29c75f=dbLogs[_0x1172ff(0x25b)](_0x1172ff(0x2bd))[_0x1172ff(0x2b1)]();if(isOlderVersion(_0x29c75f,_0x1172ff(0x18d))){let _0xe0d9d9=[];const _0x393328=dbLogs[_0x1172ff(0x25b)](_0x1172ff(0x269))[_0x1172ff(0x2b1)]();_0x393328[_0x1172ff(0x16e)](_0x2b83c0=>{const _0x43518d=_0x1172ff;_0xe0d9d9[_0x43518d(0x266)]({'time':_0x2b83c0[_0x43518d(0x1bc)],'type':_0x2b83c0[_0x43518d(0x21f)],'event':_0x2b83c0[_0x43518d(0x159)]});}),dbLogs[_0x1172ff(0x25b)]('logs')['assign'](_0xe0d9d9)[_0x1172ff(0x179)]();}let _0x2129bb=dbConfig[_0x1172ff(0x25b)](_0x1172ff(0x2bd))[_0x1172ff(0x2b1)]();if(isOlderVersion(_0x2129bb,_0x1172ff(0x18d))){let _0xceda10=dbConfig['get']('bot')[_0x1172ff(0x1f7)]({'botID':botID})[_0x1172ff(0x2b1)]();if(_0xceda10){let _0x544c96=[];_0xceda10['portfolio']['forEach'](_0x2d3b2b=>{const _0x4cf397=_0x1172ff;_0x544c96[_0x4cf397(0x266)]({'coin':_0x2d3b2b[_0x4cf397(0x173)],'number':_0x2d3b2b['startnumber'],'price':_0x2d3b2b['startprice']}),delete _0x2d3b2b[_0x4cf397(0x2ce)],delete _0x2d3b2b[_0x4cf397(0x284)];});if(_0x544c96[_0x1172ff(0x26b)]!==0x0)fs[_0x1172ff(0x25a)](configbackuppath+(_0x1172ff(0x26c)+botID+_0x1172ff(0x158)),JSON['stringify'](_0x544c96,null,0x4),function(_0x3ac2bd){if(_0x3ac2bd){}});const _0x71798c=(_0x4af53b,_0x45a4ba)=>{const _0x54d101=_0x1172ff;let _0x4c4f7f=[];_0x45a4ba['forEach'](_0x3459e5=>{const _0x44bcb4=_0x1047,_0x99cac6=_0x4af53b[_0x44bcb4(0x1f7)](_0x3483a3=>_0x3483a3['coin']==_0x3459e5[_0x44bcb4(0x173)]);if(!_0x99cac6)_0x4c4f7f[_0x44bcb4(0x266)](_0x3459e5);});let _0x4f5210=[];return _0x4af53b[_0x54d101(0x16e)](_0x3afc0f=>{const _0x22ad7f=_0x54d101,_0x1cd4be=_0x45a4ba[_0x22ad7f(0x1f7)](_0x5dcc89=>_0x5dcc89[_0x22ad7f(0x173)]==_0x3afc0f['coin']);if(!_0x1cd4be||_0x1cd4be['number']==0x0&&_0x3afc0f['number']!=0x0)_0x4f5210[_0x22ad7f(0x266)](_0x3afc0f);}),{'missingDay1':_0x4c4f7f,'notInDay2':_0x4f5210};},_0xc83f37=dbPerformance[_0x1172ff(0x25b)](_0x1172ff(0x1f2))['cloneDeep']()[_0x1172ff(0x2b1)]();if(_0xc83f37[_0x1172ff(0x26b)]>0x1){const {missingDay1:_0x185ede,notInDay2:_0x51be6a}=_0x71798c(_0x544c96,_0xc83f37[0x1][_0x1172ff(0x174)]);_0x544c96=[..._0x544c96,..._0x185ede],_0x51be6a[_0x1172ff(0x16e)](_0x2d4d6c=>{const _0x575e72=_0x1172ff;let _0x468166=_0x544c96[_0x575e72(0x2d7)](_0x3860c4=>_0x3860c4['coin']==_0x2d4d6c['coin']);_0x468166!=-0x1&&_0x544c96[_0x575e72(0x22f)](_0x468166,0x1);});}_0x544c96['sort']((_0x546876,_0x428733)=>_0x546876[_0x1172ff(0x173)]>_0x428733['coin']?0x1:_0x428733['coin']>_0x546876[_0x1172ff(0x173)]?-0x1:0x0);let _0x5b47b4=[{'date':_0xceda10['startdate'],'changes':_0x544c96}];_0xc83f37[_0x1172ff(0x26b)]>0x2&&_0xc83f37[_0x1172ff(0x16e)]((_0x2040cd,_0x328e21)=>{const _0xffd1c6=_0x1172ff;if(_0x328e21>0x0&&_0x328e21<_0xc83f37[_0xffd1c6(0x26b)]-0x1){const {missingDay1:_0x16c876,notInDay2:_0x1f1f3f}=_0x71798c(_0xc83f37[_0x328e21][_0xffd1c6(0x174)],_0xc83f37[_0x328e21+0x1][_0xffd1c6(0x174)]);_0x544c96=[],(_0x16c876[_0xffd1c6(0x26b)]!=0x0||_0x1f1f3f[_0xffd1c6(0x26b)]!=0x0)&&(_0x16c876[_0xffd1c6(0x26b)]!=0x0&&_0x544c96['push'](..._0x16c876),_0x1f1f3f[_0xffd1c6(0x26b)]!=0x0&&(_0x1f1f3f[_0xffd1c6(0x16e)](_0x983865=>{const _0x168126=_0xffd1c6;_0x983865[_0x168126(0x258)]=-_0x983865[_0x168126(0x258)];}),_0x544c96['push'](..._0x1f1f3f)),_0x544c96['sort']((_0x17b621,_0x3ac224)=>_0x17b621[_0xffd1c6(0x173)]>_0x3ac224[_0xffd1c6(0x173)]?0x1:_0x3ac224[_0xffd1c6(0x173)]>_0x17b621[_0xffd1c6(0x173)]?-0x1:0x0),_0x5b47b4['push']({'date':_0xc83f37[_0x328e21+0x1][_0xffd1c6(0x18a)],'changes':_0x544c96}));}}),dbConfig[_0x1172ff(0x25b)](_0x1172ff(0x24a))[_0x1172ff(0x1f7)]({'botID':botID})['assign']({..._0xceda10,'liquidity':_0x5b47b4})[_0x1172ff(0x179)]();}}if(isOlderVersion(_0x2129bb,_0x1172ff(0x28f))){let _0x10c93f=dbConfig[_0x1172ff(0x25b)](_0x1172ff(0x24a))[_0x1172ff(0x1f7)]({'botID':botID})['value']();if(_0x10c93f){const _0x5dd7f3=_0x10c93f[_0x1172ff(0x270)],_0x98cf55=_0x5dd7f3?capitalize(_0x5dd7f3):_0x1172ff(0x15b);dbConfig[_0x1172ff(0x25b)](_0x1172ff(0x24a))[_0x1172ff(0x1f7)]({'botID':botID})[_0x1172ff(0x170)]({'exchange':_0x98cf55})[_0x1172ff(0x179)]();}}let _0x2c1e90=dbPerformance[_0x1172ff(0x25b)]('version')[_0x1172ff(0x2b1)]();isOlderVersion(_0x2c1e90,_0x1172ff(0x18d))&&setStartDatePerformance();let _0x17b5d3=dbCoinResults['get'](_0x1172ff(0x2bd))['value']();if(isOlderVersion(_0x17b5d3,'2.5.0')){let _0x453e78=dbCoinResults[_0x1172ff(0x25b)](_0x1172ff(0x174))[_0x1172ff(0x2b1)]();if(_0x453e78[_0x1172ff(0x26b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5f4a21=_0x2b23b3;dbConfig[_0x5f4a21(0x1b1)]('version',serverversion)[_0x5f4a21(0x179)](),dbPerformance[_0x5f4a21(0x1b1)]('version',serverversion)['write'](),dbLogs[_0x5f4a21(0x1b1)]('version',serverversion)[_0x5f4a21(0x179)](),dbCoinResults[_0x5f4a21(0x1b1)](_0x5f4a21(0x2bd),serverversion)[_0x5f4a21(0x179)]();}function getConfiguration(_0x3622cd){const _0x3fb92a=_0x2b23b3;let _0x43ff75=dbConfig[_0x3fb92a(0x25b)]('bot')[_0x3fb92a(0x1f7)]({'botID':_0x3622cd})[_0x3fb92a(0x2b1)]();if(_0x43ff75){let _0x6ee4f3=![];typeof _0x43ff75['threshold']=='string'&&(_0x43ff75={..._0x43ff75,'threshold':Number(_0x43ff75[_0x3fb92a(0x1cc)])},_0x6ee4f3=!![]),_0x43ff75[_0x3fb92a(0x1cb)]==undefined&&(_0x43ff75={..._0x43ff75,'change24h':-0x14},_0x6ee4f3=!![]),_0x43ff75[_0x3fb92a(0x171)]==undefined&&(_0x43ff75={..._0x43ff75,'fiat':'USD'},_0x6ee4f3=!![]),_0x43ff75[_0x3fb92a(0x14a)]==undefined&&(_0x43ff75={..._0x43ff75,'onepagemode':settings[_0x3fb92a(0x14a)]},_0x6ee4f3=!![]),_0x43ff75[_0x3fb92a(0x1d2)]==undefined&&(_0x43ff75={..._0x43ff75,'colorscheme':_0x3fb92a(0x1f9)},_0x6ee4f3=!![]),_0x43ff75[_0x3fb92a(0x1fe)]==undefined&&(_0x43ff75={..._0x43ff75,'autoliquidity':!![]},_0x6ee4f3=!![]),_0x6ee4f3&&(_0x43ff75={'botID':_0x43ff75[_0x3fb92a(0x1c6)],'exchange':_0x43ff75['exchange'],'apiKey':_0x43ff75[_0x3fb92a(0x202)],'apiSecret':_0x43ff75[_0x3fb92a(0x21c)],'apiPassword':_0x43ff75[_0x3fb92a(0x1a6)],'basecoin':_0x43ff75['basecoin'],'botname':_0x43ff75[_0x3fb92a(0x2c9)],'showname':_0x43ff75['showname'],'threshold':_0x43ff75[_0x3fb92a(0x1cc)],'ordertype':_0x43ff75[_0x3fb92a(0x253)],'timeout':_0x43ff75[_0x3fb92a(0x255)],'fiat':_0x43ff75[_0x3fb92a(0x171)],'startdate':_0x43ff75[_0x3fb92a(0x185)],'recreate':_0x43ff75[_0x3fb92a(0x286)],'timeshift':_0x43ff75[_0x3fb92a(0x277)],'onepagemode':_0x43ff75[_0x3fb92a(0x14a)],'headless':_0x43ff75['headless'],'cooldown':_0x43ff75['cooldown'],'change24h':_0x43ff75[_0x3fb92a(0x1cb)],'emojibuy':_0x43ff75[_0x3fb92a(0x2c1)],'emojisell':_0x43ff75[_0x3fb92a(0x1b9)],'colorscheme':_0x43ff75[_0x3fb92a(0x1d2)],'portfolio':_0x43ff75[_0x3fb92a(0x1d9)],'autoliquidity':_0x43ff75[_0x3fb92a(0x1fe)],'liquidity':_0x43ff75['liquidity'],'openOrders':_0x43ff75['openOrders']},dbConfig[_0x3fb92a(0x25b)](_0x3fb92a(0x24a))[_0x3fb92a(0x237)]()[_0x3fb92a(0x179)](),dbConfig[_0x3fb92a(0x25b)](_0x3fb92a(0x24a))[_0x3fb92a(0x266)](_0x43ff75)['write']());}else _0x43ff75={'botID':_0x3622cd,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3fb92a(0x2b4)+_0x3622cd,'showname':![],'threshold':0x3,'ordertype':_0x3fb92a(0x156),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x3fb92a(0x14a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3fb92a(0x1f9),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x43ff75;}function emittedConfiguration(){const _0x134ff0=_0x2b23b3;let _0x218c6c;if(config[_0x134ff0(0x202)]=='')_0x218c6c={...config,'configstate':_0x134ff0(0x194)};else config['apiKey']==_0x134ff0(0x256)?_0x218c6c={...config,'configstate':'recovery'}:(_0x218c6c={...config,'apiKey':_0x134ff0(0x282),'apiSecret':'************'},config['apiPassword']&&(_0x218c6c['apiPassword']=_0x134ff0(0x282)));return _0x218c6c;}function getSettings(){const _0x1c83b0=_0x2b23b3;return dbSettings[_0x1c83b0(0x25b)](_0x1c83b0(0x290))[_0x1c83b0(0x2b1)]();}function getSecure(){const _0x1bdb33=_0x2b23b3;return dbSecure[_0x1bdb33(0x25b)]('secure')[_0x1bdb33(0x2b1)]()||{};}function updateTimeshift(_0x7a6f50){const _0x5f5aa4=_0x2b23b3;let _0x351732=dbConfig['get'](_0x5f5aa4(0x24a))['find']({'botID':botID})[_0x5f5aa4(0x2b1)]();_0x351732&&dbConfig[_0x5f5aa4(0x25b)](_0x5f5aa4(0x24a))[_0x5f5aa4(0x1f7)]({'botID':botID})[_0x5f5aa4(0x170)]({'timeshift':_0x7a6f50})[_0x5f5aa4(0x179)](),config[_0x5f5aa4(0x277)]=_0x7a6f50,proxyEmit(_0x5f5aa4(0x267),emittedConfiguration());}function updateOnepagemode(_0x1d113d){const _0x55f2dd=_0x2b23b3;let _0x49f7a2=dbConfig['get']('bot')[_0x55f2dd(0x1f7)]({'botID':botID})['value']();_0x49f7a2&&dbConfig[_0x55f2dd(0x25b)]('bot')[_0x55f2dd(0x1f7)]({'botID':botID})[_0x55f2dd(0x170)]({'onepagemode':_0x1d113d})[_0x55f2dd(0x179)](),config[_0x55f2dd(0x14a)]=_0x1d113d,proxyEmit(_0x55f2dd(0x267),emittedConfiguration());}async function storeConfiguration(_0x5eb415){const _0x1ea0ca=_0x2b23b3;logger[_0x1ea0ca(0x15e)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x1ea0ca(0x2b2));let _0x4efbcd=![],_0x5a7124=![],_0x3d779e=[];_0x5eb415[_0x1ea0ca(0x1d9)][_0x1ea0ca(0x16e)](_0x4bfc56=>{const _0x2d2802=_0x1ea0ca;if(!_0x4bfc56[_0x2d2802(0x1a0)]&&_0x4bfc56['coin']!=_0x5eb415[_0x2d2802(0x1ef)])_0x3d779e[_0x2d2802(0x266)](_0x4bfc56['symbol']);}),_0x3d779e[_0x1ea0ca(0x16e)](_0x3f7360=>{const _0x52e6ed=_0x1ea0ca,_0x331f74=currentCoins[_0x52e6ed(0x1f7)](_0xda2cd4=>_0xda2cd4['symbol']==_0x3f7360);!_0x331f74&&(_0x4efbcd=!![]);}),currentCoins[_0x1ea0ca(0x16e)](_0xb0bed7=>{const _0x2d3637=_0x1ea0ca;if(_0xb0bed7[_0x2d3637(0x173)]!=config[_0x2d3637(0x1ef)]){const _0xbbdc80=_0x3d779e[_0x2d3637(0x1f7)](_0x278383=>_0x278383==_0xb0bed7[_0x2d3637(0x18f)]);!_0xbbdc80&&(_0x4efbcd=!![]);}}),_0x5eb415[_0x1ea0ca(0x1d9)][_0x1ea0ca(0x16e)](_0x412370=>{const _0x15b428=_0x1ea0ca,_0x46f002=config[_0x15b428(0x1d9)][_0x15b428(0x1f7)](_0xa25c84=>_0xa25c84[_0x15b428(0x173)]==_0x412370[_0x15b428(0x173)]);if(_0x46f002&&_0x412370[_0x15b428(0x1fa)]!=_0x46f002[_0x15b428(0x1fa)])_0x5a7124=!![];});let _0x5da08e=dbConfig[_0x1ea0ca(0x25b)](_0x1ea0ca(0x24a))['find']({'botID':botID})[_0x1ea0ca(0x2b1)]();_0x5eb415={..._0x5eb415,'apiKey':crypt[_0x1ea0ca(0x2b9)](secure[_0x1ea0ca(0x2b7)],_0x5eb415[_0x1ea0ca(0x202)])[_0x1ea0ca(0x2d0)],'apiSecret':crypt[_0x1ea0ca(0x2b9)](secure[_0x1ea0ca(0x2b7)],_0x5eb415['apiSecret'])[_0x1ea0ca(0x2d0)]};_0x5eb415[_0x1ea0ca(0x1a6)]&&(_0x5eb415[_0x1ea0ca(0x1a6)]=crypt['decrypt'](secure['privateKey'],_0x5eb415['apiPassword'])[_0x1ea0ca(0x2d0)]);let _0x41ddd6=![];if(_0x5da08e){_0x5eb415[_0x1ea0ca(0x202)]==_0x1ea0ca(0x282)?_0x5eb415[_0x1ea0ca(0x202)]=config[_0x1ea0ca(0x202)]:_0x41ddd6=!![];_0x5eb415[_0x1ea0ca(0x21c)]==_0x1ea0ca(0x282)?_0x5eb415[_0x1ea0ca(0x21c)]=config['apiSecret']:_0x41ddd6=!![];if(_0x5eb415[_0x1ea0ca(0x1a6)]==_0x1ea0ca(0x282))_0x5eb415[_0x1ea0ca(0x1a6)]=config[_0x1ea0ca(0x1a6)];else{if(_0x5eb415[_0x1ea0ca(0x1a6)])_0x41ddd6=!![];}dbConfig[_0x1ea0ca(0x25b)](_0x1ea0ca(0x24a))[_0x1ea0ca(0x1f7)]({'botID':botID})[_0x1ea0ca(0x170)](_0x5eb415)['write']();}else dbConfig[_0x1ea0ca(0x25b)](_0x1ea0ca(0x24a))[_0x1ea0ca(0x266)](_0x5eb415)[_0x1ea0ca(0x179)](),_0x41ddd6=!![],process['send']({'status':_0x1ea0ca(0x25e),'live':_0x1ea0ca(0x24b)},_0x2de75d=>{});process[_0x1ea0ca(0x299)]({'botname':_0x5eb415[_0x1ea0ca(0x2c9)]},_0x491f65=>{}),config={..._0x5eb415},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x41ddd6)await reset(!![]);else _0x4efbcd||_0x5a7124?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x1ea0ca(0x1b8));}async function storeHeadless(_0x25779d){const _0x22f0e0=_0x2b23b3,_0x1f73ad={...config,'headless':_0x25779d[_0x22f0e0(0x1ad)]};let _0x2c4ba2=dbConfig[_0x22f0e0(0x25b)](_0x22f0e0(0x24a))[_0x22f0e0(0x1f7)]({'botID':botID})['value']();_0x2c4ba2&&dbConfig[_0x22f0e0(0x25b)](_0x22f0e0(0x24a))['find']({'botID':botID})[_0x22f0e0(0x170)](_0x1f73ad)[_0x22f0e0(0x179)](),config={..._0x1f73ad},updateBotManager(),proxyEmit(_0x22f0e0(0x267),emittedConfiguration());}async function storeFiat(_0x4ee562){const _0x4bda18=_0x2b23b3,_0x113857={...config,'fiat':_0x4ee562};let _0x3711f1=dbConfig[_0x4bda18(0x25b)](_0x4bda18(0x24a))['find']({'botID':botID})[_0x4bda18(0x2b1)]();_0x3711f1&&dbConfig[_0x4bda18(0x25b)](_0x4bda18(0x24a))[_0x4bda18(0x1f7)]({'botID':botID})[_0x4bda18(0x170)](_0x113857)['write'](),config={..._0x113857},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x155860=_0x2b23b3;logger[_0x155860(0x15f)]('Resetting\x20bot\x20history');try{if(fs[_0x155860(0x143)](path[_0x155860(0x165)](configpath,_0x155860(0x17d)+botID+'-events.json')))fs['unlinkSync'](path[_0x155860(0x165)](configpath,_0x155860(0x17d)+botID+'-events.json'));if(fs[_0x155860(0x143)](path[_0x155860(0x165)](configpath,_0x155860(0x17d)+botID+_0x155860(0x195))))fs[_0x155860(0x1f0)](path['join'](configpath,'bot-'+botID+_0x155860(0x195)));if(fs[_0x155860(0x143)](path[_0x155860(0x165)](configpath,'bot-'+botID+'-results.json')))fs[_0x155860(0x1f0)](path[_0x155860(0x165)](configpath,_0x155860(0x17d)+botID+_0x155860(0x16c)));}catch(_0x2fa6f1){if(_0x2fa6f1)logger[_0x155860(0x15f)](_0x155860(0x1d3),_0x2fa6f1);}const _0x310882=getDate();let _0x421bb0=[];currentCoins[_0x155860(0x16e)](_0x50a1a6=>{const _0x3671ed=_0x155860;_0x421bb0[_0x3671ed(0x266)]({'coin':_0x50a1a6['coin'],'number':_0x50a1a6[_0x3671ed(0x258)],'price':_0x50a1a6['last']});});let _0x41007a=dbConfig[_0x155860(0x25b)](_0x155860(0x24a))['find']({'botID':botID})[_0x155860(0x2b1)]();_0x41007a&&(dbConfig['get'](_0x155860(0x24a))[_0x155860(0x1f7)]({'botID':botID})[_0x155860(0x170)]({'liquidity':[{'date':_0x310882,'changes':_0x421bb0}]})['write'](),config[_0x155860(0x197)]=[]),process[_0x155860(0x299)]({'stop':'restart'},_0x993ebd=>{});}function noslash(_0x520448){return _0x520448['replace']('/','');}function updateHighestFee(_0x1d9faf){const _0x18d748=_0x2b23b3;if(_0x1d9faf[_0x18d748(0x152)]){let _0x52eaf8={'filled':_0x1d9faf[_0x18d748(0x271)]*_0x1d9faf[_0x18d748(0x288)],'amount':_0x1d9faf[_0x18d748(0x271)]*_0x1d9faf['price'],'side':_0x1d9faf['side']==_0x18d748(0x252)?'buy':_0x18d748(0x252),'price':0x1/_0x1d9faf['price']};_0x1d9faf={..._0x1d9faf,..._0x52eaf8};}const _0x4d5bb6=defaultFee*_0x1d9faf[_0x18d748(0x271)]*_0x1d9faf[_0x18d748(0x288)];lastFees[_0x18d748(0x20c)][_0x18d748(0x26b)]===0x14&&lastFees[_0x18d748(0x20c)][_0x18d748(0x261)](),lastFees[_0x18d748(0x20c)]['push'](_0x4d5bb6),lastFees[_0x18d748(0x211)]=Math[_0x18d748(0x1ff)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1a3144){const _0x5ee36d=_0x2b23b3;logger[_0x5ee36d(0x15e)](_0x5ee36d(0x238)+_0x1a3144['symbol']+_0x5ee36d(0x20e)+_0x1a3144['status']+_0x5ee36d(0x20e)+_0x1a3144[_0x5ee36d(0x271)]+_0x5ee36d(0x196)+_0x1a3144[_0x5ee36d(0x203)]+_0x5ee36d(0x20e)+_0x1a3144['id']);let _0x500235=_0x1a3144[_0x5ee36d(0x1fd)],_0x5eb841=![];currentCoins['forEach'](_0x3100d4=>{const _0x4d9acf=_0x5ee36d;_0x3100d4[_0x4d9acf(0x18f)]==_0x1a3144[_0x4d9acf(0x18f)]&&(_0x5eb841=!![]);});if(!_0x5eb841)return;const _0x1c1e21=currentCoins[_0x5ee36d(0x1f7)](_0x422922=>_0x422922['symbol']==_0x1a3144[_0x5ee36d(0x18f)]),_0xbb59a=_0x5a15dc=>{const _0x5bbef4=_0x5ee36d;if(_0x1c1e21)_0x1c1e21[_0x5bbef4(0x278)]=_0x5a15dc;};if(_0x500235==_0x5ee36d(0x20d))_0xbb59a(_0x5ee36d(0x20d));else{if(_0x500235==_0x5ee36d(0x23f)){_0xbb59a('canceled');const _0x3e6304=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3e6304,await getOpenOrders(),handleOpenOrders();}else{if(_0x500235==_0x5ee36d(0x241)){let _0x40fb8e=![];if(lastOrders)for(const _0x4c64fe of lastOrders){const _0x362e12=0xc8,_0x259ffc=0x1388;let _0xf11696=0x0;while(!_0x4c64fe[_0x5ee36d(0x1c8)]&&_0xf11696*_0x362e12<_0x259ffc){_0xf11696++,await sleep(_0x362e12);}if(_0xf11696>0x0)logger['debug'](_0x5ee36d(0x29a)+_0xf11696*_0x362e12/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x4c64fe[_0x5ee36d(0x1c8)]==_0x1a3144['id']){logger['debug'](_0x5ee36d(0x1da)+_0x1a3144['id']),_0x40fb8e=!![];if(_0x4c64fe[_0x5ee36d(0x271)]==0x0){logger['debug'](_0x5ee36d(0x226)+_0x1a3144['id']);if(_0x1a3144['average'])_0x4c64fe[_0x5ee36d(0x288)]=_0x1a3144[_0x5ee36d(0x29e)];else{if(_0x1a3144['price'])_0x4c64fe[_0x5ee36d(0x288)]=_0x1a3144['price'];else{}}_0x4c64fe[_0x5ee36d(0x271)]=_0x1a3144[_0x5ee36d(0x271)],updateHighestFee(_0x4c64fe),_0xbb59a(_0x5ee36d(0x271)),await validateOrders();if(lockOrders==ORDERS[_0x5ee36d(0x138)]){const _0x3bca14=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3bca14;}_0x4c64fe['fee']={'currency':_0x1a3144[_0x5ee36d(0x1a2)]?_0x1a3144['fee'][_0x5ee36d(0x1f3)]:null,'cost':_0x1a3144[_0x5ee36d(0x1a2)]?_0x1a3144[_0x5ee36d(0x1a2)][_0x5ee36d(0x1c3)]:0x0},await updateCoinResults(_0x4c64fe);}}}if(!_0x40fb8e){logger[_0x5ee36d(0x15e)](_0x5ee36d(0x21a)+_0x1a3144['id']),_0xbb59a(_0x5ee36d(0x271));const _0x3b0377=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b0377,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xdee5c0=JSON[_0x5ee36d(0x26d)](lastBalances[_0x5ee36d(0x1d9)]);const _0x41c77b=_0xdee5c0[_0x5ee36d(0x1f7)](_0x1c259e=>_0x1c259e[_0x5ee36d(0x18f)]==_0x1a3144['symbol']);if(_0x41c77b){if(_0x500235==_0x5ee36d(0x20d))_0x41c77b[_0x5ee36d(0x278)]=_0x41c77b['orderstatus']=='filled'?_0x5ee36d(0x271):_0x5ee36d(0x20d);else{if(_0x500235==_0x5ee36d(0x23f))_0x41c77b['orderstatus']=_0x41c77b[_0x5ee36d(0x278)]==_0x5ee36d(0x271)?'filled':_0x5ee36d(0x23f);else _0x500235==_0x5ee36d(0x241)&&(_0x41c77b[_0x5ee36d(0x278)]=_0x5ee36d(0x271));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xdee5c0)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x449e91=_0x2b23b3;await getOpenOrders();let _0x4abef4=![];currentCoins[_0x449e91(0x16e)](_0x2637f2=>{const _0x508cd2=_0x449e91;_0x4abef4=allOpenOrders[_0x508cd2(0x1f7)](_0x516bf6=>_0x516bf6[_0x508cd2(0x18f)]==_0x2637f2[_0x508cd2(0x18f)]),_0x2637f2[_0x508cd2(0x278)]=_0x4abef4?_0x508cd2(0x20d):_0x508cd2(0x20f);});}async function getCoins(_0x473e94=0x0,_0x23ec4d=!![],_0x5a8dec=config[_0x2b23b3(0x1ef)]){const _0x547a98=_0x2b23b3;let _0x4e5169,_0x2c6468=[],_0x2b7259=[],_0x53c0a1=[];if(_0x473e94)await sleep(_0x473e94);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4e5169=await exchange[_0x547a98(0x2cb)](),mybalances=_0x4e5169[_0x547a98(0x1ea)];for(const [_0x29f9eb,_0x2b8ab5]of Object[_0x547a98(0x29c)](mybalances)){_0x53c0a1[_0x547a98(0x266)](_0x29f9eb);}config[_0x547a98(0x1d9)][_0x547a98(0x16e)](_0x2064a6=>{const _0xba281a=_0x547a98;!_0x53c0a1[_0xba281a(0x190)](_0x2064a6[_0xba281a(0x173)])&&(mybalances[_0x2064a6[_0xba281a(0x173)]]=0x0);});if(_0x5a8dec=='')for(const [_0x1ec56d,_0xd568f3]of Object[_0x547a98(0x29c)](mybalances)){_0xd568f3!=0x0&&_0x2c6468['push']({'coin':_0x1ec56d});}else{let _0x52c54f=![];for(const [_0x3a8b6f,_0x2bb6e7]of Object['entries'](mybalances)){const _0x146291=config[_0x547a98(0x1d9)][_0x547a98(0x1f7)](_0x41a709=>_0x41a709[_0x547a98(0x173)]==_0x3a8b6f),_0x405482=_0x3a8b6f+'/'+_0x5a8dec,_0x36f2ff=_0x5a8dec+'/'+_0x3a8b6f,_0x51e4df=currentCoins[_0x547a98(0x1f7)](_0x55a714=>_0x55a714['coin']==_0x3a8b6f);_0x52c54f=![];if((_0x2bb6e7!=0x0||_0x146291)&&(allSymbols[_0x547a98(0x190)](_0x405482)||_0x3a8b6f==_0x5a8dec))_0x2c6468[_0x547a98(0x266)]({'coin':_0x3a8b6f,'symbol':_0x405482,'reverse':![],'number':Math[_0x547a98(0x1ff)](_0x2bb6e7+(_0x146291&&_0x146291[_0x547a98(0x1fa)]||0x0),0x0),'orderstatus':_0x51e4df?_0x51e4df[_0x547a98(0x278)]:_0x547a98(0x20f)});else{if((_0x2bb6e7!=0x0||_0x146291)&&allSymbols['includes'](_0x36f2ff))_0x2c6468[_0x547a98(0x266)]({'coin':_0x3a8b6f,'symbol':_0x36f2ff,'reverse':!![],'number':Math['max'](_0x2bb6e7+(_0x146291&&_0x146291['offset']||0x0),0x0),'orderstatus':_0x51e4df?_0x51e4df['orderstatus']:_0x547a98(0x20f)});else _0x146291&&_0x2c6468[_0x547a98(0x266)]({'coin':_0x146291[_0x547a98(0x173)],'symbol':_0x146291['symbol'],'reverse':_0x146291[_0x547a98(0x152)],'number':0x0,'orderstatus':_0x547a98(0x20f)});}}}}catch(_0x1d5dbd){if(!_0x23ec4d)handleErrorNoStop(_0x1d5dbd,_0x547a98(0x13a));else await handleError(_0x1d5dbd,_0x547a98(0x13a));}return _0x2b7259=cloneDeep(_0x2c6468),_0x2c6468=_0x2c6468[_0x547a98(0x1ba)](_0x5732d6=>{const _0x475745=_0x547a98,_0x39f72a=config['portfolio'][_0x475745(0x1f7)](_0x38bae7=>_0x38bae7[_0x475745(0x173)]==_0x5732d6['coin']);return _0x39f72a&&!_0x39f72a[_0x475745(0x1a0)];}),[_0x2c6468,_0x2b7259];}async function getCoinNumber(_0x173f0a){const _0x11b57c=_0x2b23b3;let _0x52ca84;try{const _0xc62b83=await exchange[_0x11b57c(0x2cb)]();_0x52ca84=_0xc62b83['total'][_0x173f0a];}catch(_0x669416){await handleError(_0x669416,_0x11b57c(0x24d));}return _0x52ca84;}async function getOpenOrders(){const _0x4bbcf1=_0x2b23b3;let _0x557fc2;allOpenOrders=[];try{for(const _0x59fd6d of config[_0x4bbcf1(0x1d9)]){!_0x59fd6d[_0x4bbcf1(0x1a0)]&&_0x59fd6d[_0x4bbcf1(0x173)]!=config['basecoin']&&(_0x557fc2=await exchange[_0x4bbcf1(0x2ac)](_0x59fd6d[_0x4bbcf1(0x18f)]),_0x557fc2['length']>0x0&&allOpenOrders[_0x4bbcf1(0x266)](_0x557fc2[0x0]));}}catch(_0x3b3bb0){await handleError(_0x3b3bb0,_0x4bbcf1(0x15c));}}async function handleOpenOrders(_0x49c702=0x0){const _0x2ebf8c=_0x2b23b3;allOpenOrders[_0x2ebf8c(0x26b)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x49c702==0x0?(logger[_0x2ebf8c(0x15e)](_0x2ebf8c(0x2d8)),_0x49c702++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2ebf8c(0x15e)](_0x2ebf8c(0x298)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x45c3f1){const _0x16ee0d=_0x2b23b3,_0x26313d=ccxt['pro'][_0x45c3f1['exchange'][_0x16ee0d(0x19d)]()],_0x35fa8a=new _0x26313d({'apiKey':_0x45c3f1['apiKey'],'secret':_0x45c3f1['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x45c3f1[_0x16ee0d(0x1a6)])_0x35fa8a[_0x16ee0d(0x1d8)]=_0x45c3f1[_0x16ee0d(0x1a6)];try{await _0x35fa8a[_0x16ee0d(0x182)]();}catch(_0x221d66){throw _0x221d66;}}function cloneDeep(_0x1aace1){const _0x2e78de=_0x2b23b3;return JSON[_0x2e78de(0x26d)](JSON[_0x2e78de(0x1cd)](_0x1aace1));}async function getPortfolio(_0x149942){const _0xc5dcfa=_0x2b23b3;let _0x39d01e=[],_0x519228=[],_0x268d02=[],_0x1932a0;if(_0x149942['apiKey']!==_0xc5dcfa(0x282)||_0x149942[_0xc5dcfa(0x21c)]!==_0xc5dcfa(0x282)||_0x149942['apiPassword']&&_0x149942[_0xc5dcfa(0x1a6)]!==_0xc5dcfa(0x282)){if(config[_0xc5dcfa(0x270)]){if(_0x149942[_0xc5dcfa(0x202)]==_0xc5dcfa(0x282))_0x149942[_0xc5dcfa(0x202)]=config['apiKey'];if(_0x149942[_0xc5dcfa(0x21c)]==_0xc5dcfa(0x282))_0x149942['apiSecret']=config[_0xc5dcfa(0x21c)];if(_0x149942[_0xc5dcfa(0x1a6)]=='************')_0x149942[_0xc5dcfa(0x1a6)]=config[_0xc5dcfa(0x1a6)];try{await testAPI(_0x149942);}catch(_0x4fc0ad){if(_0x4fc0ad[_0xc5dcfa(0x2be)]()[_0xc5dcfa(0x190)]('AuthenticationError')){logger[_0xc5dcfa(0x15e)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0xc5dcfa(0x1d9),![]);return;}else{handleError(_0x4fc0ad,'getPortfolio(0)');return;}}}await initExchange(_0x149942[_0xc5dcfa(0x270)],_0x149942[_0xc5dcfa(0x202)],_0x149942['apiSecret'],_0x149942[_0xc5dcfa(0x1a6)]);try{await loadSymbols();}catch(_0x234c33){if(_0x234c33[_0xc5dcfa(0x2be)]()[_0xc5dcfa(0x190)](_0xc5dcfa(0x240))){proxyEmit(_0xc5dcfa(0x1d9),![]);return;}else{handleError(_0x234c33,_0xc5dcfa(0x28a));return;}}const _0x2f9a28=await getCoins(0x0,![],_0x149942[_0xc5dcfa(0x1ef)]);_0x268d02=cloneDeep(_0x2f9a28[0x1]);}else{const _0x2b72c3=await getCoins();_0x268d02=cloneDeep(_0x2b72c3[0x1]);}if(_0x149942[_0xc5dcfa(0x1ef)]=='')proxyEmit(_0xc5dcfa(0x1d9),_0x268d02);else{_0x268d02[_0xc5dcfa(0x16e)](_0x22a4aa=>{const _0xce2770=_0xc5dcfa;if(_0x22a4aa['coin']!=_0x149942[_0xce2770(0x1ef)]&&allSymbols[_0xce2770(0x190)](_0x22a4aa[_0xce2770(0x18f)]))_0x39d01e[_0xce2770(0x266)](_0x22a4aa[_0xce2770(0x18f)]);});if(_0x39d01e[_0xc5dcfa(0x26b)]==0x0)logHistory(_0xc5dcfa(0x1dc),_0xc5dcfa(0x175));else{try{_0x519228=await getTickers(_0x39d01e);}catch(_0x6ba4f0){if(_0x6ba4f0[_0xc5dcfa(0x2be)]()[_0xc5dcfa(0x190)](_0xc5dcfa(0x240))){proxyEmit(_0xc5dcfa(0x1d9),![]);return;}else handleError(_0x6ba4f0,_0xc5dcfa(0x1be));}_0x268d02[_0xc5dcfa(0x16e)](_0x25cb6c=>{const _0x47f837=_0xc5dcfa;_0x25cb6c['coin']!=_0x149942[_0x47f837(0x1ef)]?_0x519228[_0x25cb6c[_0x47f837(0x18f)]]?_0x1932a0=_0x25cb6c[_0x47f837(0x152)]?0x1/_0x519228[_0x25cb6c[_0x47f837(0x18f)]][_0x47f837(0x1d0)]:_0x519228[_0x25cb6c[_0x47f837(0x18f)]][_0x47f837(0x1d0)]:_0x1932a0=0x0:_0x1932a0=0x1,_0x25cb6c[_0x47f837(0x288)]=formatResult(_0x1932a0,0x8);}),proxyEmit(_0xc5dcfa(0x1d9),_0x268d02);}}}function truncateTradeAmount(_0x482bd9,_0x6e8022){let _0xc74a02=0x0;try{_0xc74a02=exchange['amountToPrecision'](_0x482bd9,_0x6e8022);}catch(_0x36dc37){}return _0xc74a02;}function checkMinimums(_0x24f7a8){const _0x337680=_0x2b23b3;let _0x19fb39=!![];const _0x5ef378=!_0x24f7a8[_0x337680(0x152)]?markets[_0x24f7a8[_0x337680(0x18f)]]['limits'][_0x337680(0x203)][_0x337680(0x2d2)]:markets[_0x24f7a8[_0x337680(0x18f)]][_0x337680(0x28b)][_0x337680(0x1c3)][_0x337680(0x2d2)],_0x4d6716=!_0x24f7a8[_0x337680(0x152)]?markets[_0x24f7a8[_0x337680(0x18f)]][_0x337680(0x28b)][_0x337680(0x1c3)][_0x337680(0x2d2)]:markets[_0x24f7a8[_0x337680(0x18f)]][_0x337680(0x28b)]['amount']['min'],_0x5705f1=truncateTradeAmount(_0x24f7a8[_0x337680(0x18f)],_0x24f7a8[_0x337680(0x208)]);_0x24f7a8[_0x337680(0x208)]=_0x5705f1;if(Math['abs'](_0x5705f1)<_0x5ef378)_0x19fb39=![];if(Math['abs'](_0x5705f1)*_0x24f7a8[_0x337680(0x1d0)]<_0x4d6716)_0x19fb39=![];if(_0x24f7a8[_0x337680(0x189)]==_0x337680(0x252)){let _0x496f99=config[_0x337680(0x1d9)][_0x337680(0x1f7)](_0x45aaf9=>_0x45aaf9['coin']==_0x24f7a8[_0x337680(0x173)]);if(_0x496f99[_0x337680(0x1fa)]>0x0){if(Math[_0x337680(0x1e5)](_0x5705f1)>_0x24f7a8[_0x337680(0x258)]-_0x496f99[_0x337680(0x1fa)])_0x19fb39=![];}else{if(Math[_0x337680(0x1e5)](_0x5705f1)>_0x24f7a8[_0x337680(0x258)])_0x19fb39=![];}}if(_0x24f7a8[_0x337680(0x189)]==_0x337680(0x191)){let _0x50814d=config['portfolio'][_0x337680(0x1f7)](_0x55162d=>_0x55162d[_0x337680(0x173)]==config[_0x337680(0x1ef)]),_0x544e71=currentCoins[_0x337680(0x1f7)](_0x12fb5d=>_0x12fb5d[_0x337680(0x173)]==config[_0x337680(0x1ef)]);if(_0x50814d[_0x337680(0x1fa)]>0x0){if(Math[_0x337680(0x1e5)](_0x5705f1)*_0x24f7a8['last']>_0x544e71[_0x337680(0x258)]-_0x50814d[_0x337680(0x1fa)])_0x19fb39=![];}else{if(Math[_0x337680(0x1e5)](_0x5705f1)*_0x24f7a8[_0x337680(0x1d0)]>_0x544e71[_0x337680(0x258)])_0x19fb39=![];}}return _0x19fb39;}async function getBalances(_0x4fcc7b=!![]){const _0x586bcd=_0x2b23b3;let _0x51e239=0x0,_0x2062de;const _0x4edb50=config[_0x586bcd(0x1cc)];if(config[_0x586bcd(0x1ad)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x586bcd(0x16e)](_0x56b08e=>{const _0x3797c2=_0x586bcd;if(_0x56b08e[_0x3797c2(0x173)]!=config[_0x3797c2(0x1ef)]){let _0x3e26b9=global[_0x3797c2(0x183)][noslash(_0x56b08e[_0x3797c2(0x18f)])];_0x2062de=_0x56b08e[_0x3797c2(0x152)]?0x1/_0x3e26b9:_0x3e26b9;}else _0x2062de=0x1;let _0x933492=_0x56b08e[_0x3797c2(0x258)]*_0x2062de;_0x51e239+=_0x933492,_0x56b08e[_0x3797c2(0x1d0)]=formatResult(Number(_0x2062de),0x8),_0x56b08e[_0x3797c2(0x2b1)]=_0x933492;}),currentCoins[_0x586bcd(0x16e)](_0x1f7710=>{const _0x1477d8=_0x586bcd;let _0x351042=config[_0x1477d8(0x1d9)][_0x1477d8(0x1f7)](_0x334cbd=>_0x334cbd['coin']==_0x1f7710['coin']),_0x1e6b1d=Number(_0x351042[_0x1477d8(0x1af)]),_0x4017ee=_0x1f7710[_0x1477d8(0x2b1)]/_0x51e239*0x64,_0x4e1ed1=_0x1e6b1d*_0x51e239/0x64/_0x1f7710[_0x1477d8(0x1d0)]-_0x1f7710[_0x1477d8(0x258)];_0x1f7710[_0x1477d8(0x1af)]=formatResult(_0x4017ee,0x3),_0x1f7710[_0x1477d8(0x217)]=formatResult(_0x1e6b1d,0x3),_0x1f7710[_0x1477d8(0x208)]=formatResult(_0x4e1ed1,0x8),_0x1f7710[_0x1477d8(0x189)]='',_0x1f7710[_0x1477d8(0x198)]=![];if(_0x1f7710['coin']!=config[_0x1477d8(0x1ef)]){if(_0x1f7710[_0x1477d8(0x1af)]>_0x1e6b1d)_0x1f7710[_0x1477d8(0x189)]='sell',_0x1f7710[_0x1477d8(0x198)]=checkMinimums(_0x1f7710);else _0x1f7710[_0x1477d8(0x1af)]<_0x1e6b1d&&(_0x1f7710['side']='buy',_0x1f7710[_0x1477d8(0x198)]=checkMinimums(_0x1f7710));}_0x1f7710[_0x1477d8(0x2c2)]=_0x1f7710[_0x1477d8(0x1af)]/_0x1f7710[_0x1477d8(0x217)]-0x1;if(_0x1f7710[_0x1477d8(0x278)]==_0x1477d8(0x271)||_0x1f7710[_0x1477d8(0x278)]==_0x1477d8(0x23f))_0x1f7710[_0x1477d8(0x278)]='none';}),currentCoins['sort']((_0x5847fa,_0x117812)=>_0x5847fa[_0x586bcd(0x2c2)]<_0x117812[_0x586bcd(0x2c2)]?0x1:_0x117812[_0x586bcd(0x2c2)]<_0x5847fa[_0x586bcd(0x2c2)]?-0x1:0x0);const _0x55926d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x55926d[_0x586bcd(0x2bc)],'usd':_0x55926d[_0x586bcd(0x246)],'portfolio':JSON[_0x586bcd(0x1cd)](currentCoins),'threshold':_0x4edb50},proxyEmit(_0x586bcd(0x200),{'serverversion':serverversion,'balances':lastBalances});if(_0x4fcc7b){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4edb50});else{if(lockOrders==ORDERS[_0x586bcd(0x155)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4edb50});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x161dcf=getNormalizedPerformance();getStartingBalances(_0x161dcf),emitPerformance(_0x161dcf);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2499f5=getNormalizedPerformance();emitPerformance(_0x2499f5),getStartingBalances(_0x2499f5),logger[_0x586bcd(0x15e)](_0x586bcd(0x229));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x96fb67=_0x2b23b3;if(!lastBalances)return;let _0x3f8aed=[],_0x2df936,_0x1c71be=JSON[_0x96fb67(0x26d)](lastBalances['portfolio']);_0x1c71be['sort']((_0x3b23d6,_0x4f53ed)=>_0x3b23d6['coin']>_0x4f53ed[_0x96fb67(0x173)]?0x1:_0x4f53ed['coin']>_0x3b23d6[_0x96fb67(0x173)]?-0x1:0x0),_0x1c71be[_0x96fb67(0x16e)](_0x18a011=>{const _0x55bf45=_0x96fb67;let _0x373755={'coin':_0x18a011[_0x55bf45(0x173)],'number':_0x18a011[_0x55bf45(0x258)],'price':_0x18a011['last']};_0x3f8aed[_0x55bf45(0x266)](_0x373755);});const _0x462044=await getFiat();_0x2df936={'date':lastBalances[_0x96fb67(0x1bc)][_0x96fb67(0x27a)]('\x20')[0x0],'eur':_0x462044[_0x96fb67(0x2bc)],'usd':_0x462044[_0x96fb67(0x246)],'coins':_0x3f8aed};let _0x507b6b=dbPerformance[_0x96fb67(0x25b)]('data')['find']({'date':_0x2df936[_0x96fb67(0x18a)]})[_0x96fb67(0x2b1)]();_0x507b6b?_0x2df936[_0x96fb67(0x18a)]!=config[_0x96fb67(0x185)]&&dbPerformance['get'](_0x96fb67(0x1f2))[_0x96fb67(0x1f7)]({'date':_0x2df936[_0x96fb67(0x18a)]})[_0x96fb67(0x170)](_0x2df936)['write']():dbPerformance[_0x96fb67(0x25b)](_0x96fb67(0x1f2))[_0x96fb67(0x266)](_0x2df936)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3328ce=_0x2b23b3;let _0x4da4a5=[];if(dbPerformance[_0x3328ce(0x242)](_0x3328ce(0x1f2))[_0x3328ce(0x2b1)]()){let _0x2fe91a=dbPerformance[_0x3328ce(0x25b)](_0x3328ce(0x1f2))[_0x3328ce(0x257)]()[_0x3328ce(0x1ba)](_0xf1eaf1=>{const _0x52cb87=_0x3328ce;if(_0xf1eaf1[_0x52cb87(0x174)][_0x52cb87(0x26b)]==0x0)return![];else return!![];})[_0x3328ce(0x220)](_0x3328ce(0x18a))[_0x3328ce(0x2b1)](),_0x3692aa=[...config[_0x3328ce(0x197)]];_0x3692aa[_0x3328ce(0x14f)]((_0x597645,_0x6ba6c8)=>_0x597645[_0x3328ce(0x18a)]>_0x6ba6c8[_0x3328ce(0x18a)]?-0x1:_0x6ba6c8['date']>_0x597645[_0x3328ce(0x18a)]?0x1:0x0);let _0x532ebc=0x1,_0x10c8fb=[],_0x2d01c1=0x0;_0x2fe91a[_0x3328ce(0x1bd)]()[_0x3328ce(0x152)]()[_0x3328ce(0x16e)]((_0x493404,_0x276064)=>{const _0x2dbf76=_0x3328ce;if(_0x3692aa[_0x2d01c1]){if(_0x2fe91a[_0x2fe91a['length']-_0x276064]&&_0x3692aa[_0x2d01c1][_0x2dbf76(0x18a)]==_0x2fe91a[_0x2fe91a[_0x2dbf76(0x26b)]-_0x276064]['date']){if(_0x276064<_0x2fe91a['length']){let _0x497fa9=0x0,_0x530b23=0x0;_0x2fe91a[_0x2fe91a[_0x2dbf76(0x26b)]-_0x276064][_0x2dbf76(0x174)][_0x2dbf76(0x16e)](_0x7235f6=>{_0x530b23+=_0x7235f6['number']*_0x7235f6['price'];}),_0x3692aa[_0x2d01c1]['changes'][_0x2dbf76(0x16e)](_0x3690cf=>{const _0x22653c=_0x2dbf76;_0x497fa9+=_0x3690cf[_0x22653c(0x258)]*_0x3690cf[_0x22653c(0x288)];}),_0x532ebc*=_0x497fa9/(_0x530b23-_0x497fa9)+0x1;}_0x2d01c1++;}}let _0x1c7456=0x0;_0x493404['coins']['forEach'](_0x447f0d=>{const _0x13625e=_0x2dbf76;_0x1c7456+=_0x447f0d[_0x13625e(0x258)]*_0x447f0d[_0x13625e(0x288)];}),_0x10c8fb[_0x2fe91a[_0x2dbf76(0x26b)]-_0x276064-0x1]=_0x1c7456*(_0x532ebc-0x1);});let _0xff949f=[];_0x3692aa=[...config[_0x3328ce(0x197)]]||[];let _0x43992c=0x0;_0x2d01c1=0x0,_0x2fe91a[_0x3328ce(0x16e)]((_0x26753e,_0x170c43)=>{const _0x20674f=_0x3328ce;if(_0x3692aa[_0x2d01c1]){const _0x175d8b=fns[_0x20674f(0x26d)](_0x3692aa[_0x2d01c1][_0x20674f(0x18a)],_0x20674f(0x19b),new Date()),_0x3f57c9=fns[_0x20674f(0x26d)](_0x26753e[_0x20674f(0x18a)],_0x20674f(0x19b),new Date());if(fns[_0x20674f(0x294)](_0x175d8b,_0x3f57c9)){let _0x14f658=0x0;_0x3692aa[_0x2d01c1]['changes'][_0x20674f(0x16e)](_0x4b2b64=>{const _0x2287e5=_0x20674f;!_0xff949f[_0x4b2b64[_0x2287e5(0x173)]]?_0xff949f[_0x4b2b64[_0x2287e5(0x173)]]=_0x4b2b64[_0x2287e5(0x258)]:(_0x14f658=_0xff949f[_0x4b2b64[_0x2287e5(0x173)]],_0xff949f[_0x4b2b64['coin']]+=_0x4b2b64[_0x2287e5(0x258)]);const _0x1a0297=_0x26753e[_0x2287e5(0x174)]['find'](_0x2eb8e2=>_0x2eb8e2[_0x2287e5(0x173)]==_0x4b2b64[_0x2287e5(0x173)]);(!_0x1a0297||_0x1a0297['number']==0x0)&&(_0x43992c+=(-_0x4b2b64[_0x2287e5(0x258)]-_0x14f658)*_0x4b2b64[_0x2287e5(0x288)]);}),_0x2d01c1++;}}_0x26753e['coins'][_0x20674f(0x16e)]((_0x46abf5,_0x225b5f)=>{const _0x1827ff=_0x20674f;_0xff949f[_0x46abf5[_0x1827ff(0x173)]]&&(_0x46abf5[_0x1827ff(0x194)]=_0xff949f[_0x46abf5[_0x1827ff(0x173)]]);}),_0x4da4a5[_0x20674f(0x266)]({'date':_0x26753e[_0x20674f(0x18a)],'eur':_0x26753e['eur'],'usd':_0x26753e[_0x20674f(0x246)],'offset':_0x10c8fb[_0x170c43],'netoffset':_0x43992c,'coins':_0x26753e[_0x20674f(0x174)]});});}return _0x4da4a5;}function emitPerformance(_0x2ef137){const _0x2a2dba=_0x2b23b3;_0x2ef137[_0x2a2dba(0x26b)]!==0x0?(proxyEmit(_0x2a2dba(0x157),_0x2ef137),lastPerformanceEmitted=getDate()):proxyEmit(_0x2a2dba(0x157),[]);}function getPerf(_0xde50c2,_0x378ac0){const _0x13e6e5=_0x2b23b3;let _0x388d21=0x0,_0x209ef3=0x0,_0x582c10=0x0;_0xde50c2[_0x13e6e5(0x174)][_0x13e6e5(0x16e)](_0x4bb648=>{const _0x4416e2=_0x13e6e5;_0x388d21+=_0x4bb648[_0x4416e2(0x258)]*_0x4bb648[_0x4416e2(0x288)];});_0x378ac0&&(_0x388d21+=_0xde50c2[_0x13e6e5(0x1fa)]);if(config[_0x13e6e5(0x1ef)]===_0x13e6e5(0x149)||config[_0x13e6e5(0x1ef)]===_0x13e6e5(0x1df)||config[_0x13e6e5(0x1ef)]==='PAXG')_0x209ef3=_0x388d21*_0xde50c2[_0x13e6e5(0x2bc)],_0x582c10=_0x388d21*_0xde50c2[_0x13e6e5(0x246)];else{if(usdBasecoins['includes'](config[_0x13e6e5(0x1ef)]))_0x209ef3=_0x388d21*_0xde50c2[_0x13e6e5(0x2bc)]/_0xde50c2[_0x13e6e5(0x246)],_0x582c10=_0x388d21;else config[_0x13e6e5(0x1ef)]==='EUR'&&(_0x209ef3=_0x388d21,_0x582c10=_0x388d21*_0xde50c2[_0x13e6e5(0x246)]/_0xde50c2[_0x13e6e5(0x2bc)]);}return[_0x388d21,_0x209ef3,_0x582c10];}function getKPIs(_0x286322,_0x72e14=_0x2b23b3(0x1a3)){const _0xa5a891=_0x2b23b3,_0x1bc740=config['basecoin'],_0x616ca9=lastBalances,_0x556d79=currentCoins,_0x3388aa=getNormalizedPerformance(),_0x17d23f=_0x286322===_0xa5a891(0x1ef)?_0x1bc740:_0x286322===_0xa5a891(0x171)||_0x286322==='net-fiat'?_0x72e14:_0xa5a891(0x168)+_0x1bc740,_0x417ab5=_0x286322===_0xa5a891(0x239)?'Net\x20effect':_0x286322===_0xa5a891(0x180)?_0xa5a891(0x178):_0x17d23f+'\x20value',_0x5cebd9=_0x286322===_0xa5a891(0x239)||_0x286322===_0xa5a891(0x180)?_0xa5a891(0x178):_0x17d23f+_0xa5a891(0x1d6);let _0x1926c9=0x0;_0x556d79['forEach'](_0x311c42=>{const _0x5c1e47=_0xa5a891;_0x1926c9+=_0x311c42[_0x5c1e47(0x258)]*_0x311c42[_0x5c1e47(0x1d0)];});if(_0x286322===_0xa5a891(0x171)||_0x286322==='net-fiat'){if(_0x1bc740===_0xa5a891(0x149)||_0x1bc740===_0xa5a891(0x1df)||_0x1bc740==='PAXG')_0x1926c9=_0x1926c9*(_0x72e14===_0xa5a891(0x1a3)?_0x616ca9[_0xa5a891(0x2bc)]:_0x616ca9[_0xa5a891(0x246)]);else{if(usdBasecoins[_0xa5a891(0x190)](_0x1bc740))_0x1926c9=_0x1926c9*(_0x72e14===_0xa5a891(0x1a3)?_0x616ca9[_0xa5a891(0x2bc)]/_0x616ca9[_0xa5a891(0x246)]:0x1);else _0x1bc740===_0xa5a891(0x1a3)&&(_0x1926c9=_0x1926c9*(_0x72e14===_0xa5a891(0x1a3)?0x1:_0x616ca9[_0xa5a891(0x246)]/_0x616ca9[_0xa5a891(0x2bc)]));}}let _0x3aebc6;if(_0x1926c9!==0x0){if(_0x286322==='basecoin')_0x3aebc6=(_0x1926c9/startingBalances[_0xa5a891(0x1ef)]-0x1)*0x64;else{if(_0x72e14==='EUR')_0x3aebc6=(_0x1926c9/startingBalances['eur']-0x1)*0x64;else _0x3aebc6=(_0x1926c9/startingBalances['usd']-0x1)*0x64;}let _0x425735=0x0;if(startingBalances['coins'])_0x556d79[_0xa5a891(0x16e)](_0x114b17=>{const _0x4f12e6=_0xa5a891;let _0x4c2719=startingBalances[_0x4f12e6(0x174)]['find'](_0x4591e6=>_0x4591e6[_0x4f12e6(0x173)]===_0x114b17[_0x4f12e6(0x173)]);if(_0x4c2719&&_0x4c2719['coin']&&_0x114b17[_0x4f12e6(0x258)]!==0x0)_0x425735+=_0x4c2719[_0x4f12e6(0x258)]*_0x114b17[_0x4f12e6(0x1d0)];});let _0x52aad3=0x0;if(_0x3388aa[_0xa5a891(0x26b)]!==0x0){let _0x1ee342=_0x3388aa[_0x3388aa[_0xa5a891(0x26b)]-0x1];_0x52aad3=_0x1ee342[_0xa5a891(0x209)];}_0x425735-=_0x52aad3;_0x286322===_0xa5a891(0x239)&&(_0x3aebc6=(_0x1926c9-_0x425735)/startingBalances[_0xa5a891(0x1ef)]*0x64,_0x1926c9=_0x1926c9-_0x425735);if(_0x286322===_0xa5a891(0x180)){let _0x282dc0=_0x72e14==='EUR'?startingBalances[_0xa5a891(0x2bc)]:startingBalances[_0xa5a891(0x246)];if(_0x1bc740===_0xa5a891(0x149)||_0x1bc740===_0xa5a891(0x1df)||_0x1bc740===_0xa5a891(0x274))_0x425735=_0x72e14===_0xa5a891(0x1a3)?_0x425735*_0x616ca9[_0xa5a891(0x2bc)]:_0x425735*_0x616ca9[_0xa5a891(0x246)];else{if(usdBasecoins[_0xa5a891(0x190)](_0x1bc740))_0x425735=_0x72e14===_0xa5a891(0x1a3)?_0x425735*_0x616ca9[_0xa5a891(0x2bc)]/_0x616ca9[_0xa5a891(0x246)]:_0x425735;else _0x1bc740===_0xa5a891(0x1a3)&&(_0x425735=_0x72e14===_0xa5a891(0x1a3)?_0x425735:_0x425735*_0x616ca9[_0xa5a891(0x246)]/_0x616ca9[_0xa5a891(0x2bc)]);}_0x3aebc6=(_0x1926c9-_0x425735)/_0x282dc0*0x64,_0x1926c9=_0x1926c9-_0x425735;}if(_0x3aebc6){if(_0x3aebc6<0x64)_0x3aebc6=_0x3aebc6[_0xa5a891(0x2ae)](0x2);else{if(_0x3aebc6<0x3e8)_0x3aebc6=_0x3aebc6['toFixed'](0x1);else _0x3aebc6=_0x3aebc6[_0xa5a891(0x2ae)](0x0);}}else _0x3aebc6=Number('0')[_0xa5a891(0x2ae)](0x2);if(_0x1926c9){if(Math[_0xa5a891(0x1e5)](_0x1926c9)<0.000001)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x2);else{if(Math[_0xa5a891(0x1e5)](_0x1926c9)<0.1)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x6);else{if(Math[_0xa5a891(0x1e5)](_0x1926c9)<0x1)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x5);else{if(Math['abs'](_0x1926c9)<0xa)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x4);else{if(Math[_0xa5a891(0x1e5)](_0x1926c9)<0x64)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x3);else{if(Math[_0xa5a891(0x1e5)](_0x1926c9)<0x3e8)_0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x2);else _0x1926c9=_0x1926c9[_0xa5a891(0x2ae)](0x2);}}}}}}else _0x1926c9=Number('0')[_0xa5a891(0x2ae)](0x2);}else _0x3aebc6=Number('0')[_0xa5a891(0x2ae)](0x2);return{'value':_0x1926c9,'change':_0x3aebc6,'leftTxt':_0x417ab5,'rightTxt':_0x5cebd9};}async function getStartingBalances(_0x1fcd8d,_0x2e1548=!![]){const _0x4f5694=_0x2b23b3;if(_0x1fcd8d[_0x4f5694(0x26b)]!==0x0){const [_0x2c4f2c,_0x48f8b2,_0x35f3e9]=getPerf(_0x1fcd8d[0x0],!![]);let _0x5e2b52=[];config[_0x4f5694(0x1d9)][_0x4f5694(0x16e)](_0x1321b7=>{const _0x347f89=_0x4f5694;let _0xd55bdf=0x0,_0x28718e;config['liquidity'][_0x347f89(0x16e)](_0x27983b=>{const _0x469ce4=_0x347f89;let _0x1a7afd=_0x27983b['changes'][_0x469ce4(0x1f7)](_0x238af7=>_0x238af7['coin']==_0x1321b7[_0x469ce4(0x173)]);if(_0x1a7afd){_0xd55bdf+=_0x1a7afd[_0x469ce4(0x258)];if(!_0x28718e)_0x28718e=_0x1a7afd[_0x469ce4(0x288)];}}),_0x5e2b52[_0x347f89(0x266)]({'coin':_0x1321b7['coin'],'number':_0xd55bdf,'initialprice':_0x28718e});});const _0x490933={'basecoin':_0x2c4f2c,'eur':_0x48f8b2,'usd':_0x35f3e9,'coins':_0x5e2b52};if(_0x2e1548)proxyEmit('starting-balances',_0x490933);startingBalances=_0x490933;}}function headlessMode(_0x33952b){const _0x491d07=_0x2b23b3;let _0x2c345a=_0x33952b[_0x491d07(0x1d9)],_0x2ac54c=_0x33952b[_0x491d07(0x1cc)],_0x55788d=[];for(let _0x2180a2 of _0x2c345a){if(_0x2180a2[_0x491d07(0x173)]!=config['basecoin']){if(_0x2180a2['delta']>=_0x2ac54c/0x64){if(_0x2180a2[_0x491d07(0x198)])_0x55788d[_0x491d07(0x266)](_0x2180a2);}else{if(_0x2180a2[_0x491d07(0x2c2)]<=-_0x2ac54c/0x64){if(_0x2180a2['valid'])_0x55788d[_0x491d07(0x266)](_0x2180a2);}}}}_0x55788d['length']>0x0&&(lockOrders==ORDERS[_0x491d07(0x155)]&&!coolingDown&&_0x55788d[_0x491d07(0x16e)](_0x55823a=>{const _0xcadc52=_0x491d07;logger['debug'](_0xcadc52(0x1f8)+_0x55823a[_0xcadc52(0x173)]+'\x20'+_0x55823a[_0xcadc52(0x258)]+'\x20'+_0x55823a[_0xcadc52(0x1d0)]+'\x20'+_0x55823a[_0xcadc52(0x1af)]+'%\x20'+_0x55823a['target']+'%\x20'+(0x64*_0x55823a[_0xcadc52(0x2c2)])[_0xcadc52(0x2ae)](0x2)+_0xcadc52(0x18c)+_0x2ac54c['toFixed'](0x2)+'%)');}),placeOrder(_0x55788d));}function notifyBalance(_0x5a750d){const _0x4c2962=_0x2b23b3;let _0x321ce8=_0x5a750d['portfolio'],_0x16be54=_0x5a750d['threshold'],_0x21527b=[];for(let _0x11dd01 of _0x321ce8){if(_0x11dd01[_0x4c2962(0x173)]!=config[_0x4c2962(0x1ef)]){if(_0x11dd01['delta']>=_0x16be54/0x64){if(_0x11dd01['valid'])_0x21527b[_0x4c2962(0x266)](_0x11dd01);}else{if(_0x11dd01[_0x4c2962(0x2c2)]<=-_0x16be54/0x64){if(_0x11dd01['valid'])_0x21527b['push'](_0x11dd01);}}}}if(_0x21527b[_0x4c2962(0x26b)]>0x0){let _0x31818e=_0x21527b[_0x4c2962(0x1ac)](_0x51aa64=>_0x51aa64['coin']);_0x31818e[_0x4c2962(0x14f)]();let _0x363e19=_0x31818e[_0x4c2962(0x165)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4c2962(0x17c),_0x4c2962(0x1c0));lastCoinsToBalance=_0x363e19;}}function symbolToCoin(_0x47af0a){const _0x125eb6=_0x2b23b3;let _0xa22fe1;if(_0x47af0a['includes']('/'+config[_0x125eb6(0x1ef)]))_0xa22fe1=_0x47af0a[_0x125eb6(0x287)]('/'+config[_0x125eb6(0x1ef)],'');if(_0x47af0a[_0x125eb6(0x190)](config[_0x125eb6(0x1ef)]+'/'))_0xa22fe1=_0x47af0a[_0x125eb6(0x287)](config[_0x125eb6(0x1ef)]+'/','');return _0xa22fe1;}async function unlockOrders(){const _0x86762f=_0x2b23b3;if(allOrdersPlaced&&lockOrders==ORDERS[_0x86762f(0x138)]){logger[_0x86762f(0x15e)](_0x86762f(0x251)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xa9d6cb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xa9d6cb,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x86762f(0x155)],logger[_0x86762f(0x15e)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x49fb42){const _0x594629=_0x2b23b3;if(_0x49fb42)validateOrdersState=_0x49fb42;logger['debug'](_0x594629(0x235)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x594629(0x2a8)));let _0x3d0374=[],_0x3caf72=config[_0x594629(0x253)]==_0x594629(0x156)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x594629(0x255)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x594629(0x15e)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x594629(0x16e)](_0x126dd4=>{const _0x161437=_0x594629;let _0x1ea5ce=![];_0x126dd4[_0x161437(0x271)]>0x0&&(_0x1ea5ce=!![]),_0x3d0374[_0x161437(0x266)](_0x1ea5ce),_0x1ea5ce&&config[_0x161437(0x253)]!='market'&&logHistory('order',_0x161437(0x2c6)+_0x126dd4[_0x161437(0x18f)]+'\x20'+_0x126dd4[_0x161437(0x189)]+'\x20#'+formatResult(_0x126dd4[_0x161437(0x271)],0x8)+'\x20@'+formatResult(_0x126dd4[_0x161437(0x288)],0x8));}),_0x3d0374['forEach']((_0x52943b,_0x194306)=>{const _0x1fe5ff=_0x594629;if(_0x52943b)lastOrders[_0x1fe5ff(0x22f)](_0x194306,0x1);}),persistOpenOrders(lastOrders);const _0x5e8dda=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x594629(0x2a2);if(validateOrdersState=='initial'){validateOrdersState=_0x594629(0x1b6);if(_0x3d0374['includes'](![])){if(config[_0x594629(0x253)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x594629(0x1b6)){if(_0x3d0374['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x594629(0x253)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x594629(0x230))_0x3d0374[_0x594629(0x190)](![])&&(config[_0x594629(0x253)]=='market'?logHistory(_0x594629(0x2c4),_0x594629(0x177)+Math[_0x594629(0x1a4)](_0x3caf72*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5e8dda):(await cancelOrders(),logHistory(_0x594629(0x2c4),_0x594629(0x145)+Math[_0x594629(0x1a4)](_0x3caf72*validateOrderInterval/0xea60)+_0x594629(0x248)+_0x5e8dda))),await unlockOrders();else{if(validateOrdersState==_0x594629(0x224)){if(config[_0x594629(0x253)]!='market')logHistory(_0x594629(0x2c4),'No\x20more\x20open\x20orders\x20-\x20'+_0x5e8dda);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x4516a4=>{const _0xf7c135=_0x1047;try{const _0x43514b=await exchange[_0xf7c135(0x23e)](_0x4516a4[_0xf7c135(0x1c8)],_0x4516a4['symbol']);}catch(_0x4199a1){if(_0x4199a1[_0xf7c135(0x2be)]()[_0xf7c135(0x190)]('OrderNotFound')){}else await handleError(_0x4199a1,_0xf7c135(0x1f6));}});}async function initCoinResults(_0x294c4e){const _0x237179=_0x2b23b3;_0x294c4e?logger[_0x237179(0x15e)](_0x237179(0x1db)+_0x294c4e):logger[_0x237179(0x15e)](_0x237179(0x13f)),config['portfolio'][_0x237179(0x16e)](_0x5e8c07=>{const _0x47e82a=_0x237179;if(!_0x5e8c07[_0x47e82a(0x1a0)]&&_0x5e8c07[_0x47e82a(0x173)]!=config[_0x47e82a(0x1ef)]){const _0x20ddad=currentCoins['find'](_0x373cd2=>_0x373cd2[_0x47e82a(0x173)]==_0x5e8c07[_0x47e82a(0x173)]),_0x680889=global['ticker'][noslash(_0x5e8c07[_0x47e82a(0x18f)])];let _0x9b9e8c=_0x20ddad?_0x20ddad[_0x47e82a(0x258)]:null,_0xa18450=_0x5e8c07[_0x47e82a(0x152)]?0x1/_0x680889:_0x680889,_0x5a0204;config[_0x47e82a(0x197)][_0x47e82a(0x16e)](_0x51dd44=>{const _0x5be57e=_0x47e82a;!_0x5a0204&&(_0x5a0204=_0x51dd44['changes'][_0x5be57e(0x1f7)](_0x5093f0=>_0x5093f0[_0x5be57e(0x173)]==_0x5e8c07['coin']),_0x5a0204&&(_0x9b9e8c=_0x5a0204['number'],_0xa18450=_0x5a0204[_0x5be57e(0x288)]));});let _0x3a9c45=dbCoinResults['get'](_0x47e82a(0x174))[_0x47e82a(0x1f7)]({'coin':_0x5e8c07[_0x47e82a(0x173)]})[_0x47e82a(0x2b1)]();if(!_0x3a9c45){const _0x37d7d8={'coin':_0x5e8c07[_0x47e82a(0x173)],'number':_0x9b9e8c,'breakeven':_0xa18450,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x47e82a(0x266)](_0x37d7d8)[_0x47e82a(0x179)]();}else{if(_0x294c4e&&_0x5e8c07[_0x47e82a(0x173)]==_0x294c4e){const _0x2066a7={'coin':_0x5e8c07['coin'],'number':_0x9b9e8c,'breakeven':_0xa18450,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x47e82a(0x25b)](_0x47e82a(0x174))[_0x47e82a(0x1f7)]({'coin':_0x5e8c07[_0x47e82a(0x173)]})[_0x47e82a(0x170)](_0x2066a7)[_0x47e82a(0x179)]();}}}});}async function updateCoinResults(_0x850261,_0x1b588e=![]){const _0x2116cd=_0x2b23b3;let _0x281cb9,_0x380ab6,_0x3ef3a4,_0x46fe34,_0x40169a,_0x1626b3,_0x3f490d=dbCoinResults['get'](_0x2116cd(0x174))['find']({'coin':_0x850261[_0x2116cd(0x173)]})[_0x2116cd(0x2b1)](),_0x48e626=![];_0x3f490d&&Object['entries'](_0x3f490d)[_0x2116cd(0x16e)](([_0x5ae26a,_0x20ae22])=>{if(_0x20ae22==null)_0x48e626=!![];});(!_0x3f490d||_0x48e626)&&(await initCoinResults(_0x850261[_0x2116cd(0x173)]),_0x3f490d=dbCoinResults[_0x2116cd(0x25b)](_0x2116cd(0x174))[_0x2116cd(0x1f7)]({'coin':_0x850261['coin']})[_0x2116cd(0x2b1)]());_0x850261[_0x2116cd(0x152)]&&(_0x1626b3={'filled':_0x850261[_0x2116cd(0x271)]*_0x850261['price'],'amount':_0x850261[_0x2116cd(0x271)]*_0x850261['price'],'side':_0x850261[_0x2116cd(0x189)]==_0x2116cd(0x252)?_0x2116cd(0x191):_0x2116cd(0x252),'price':0x1/_0x850261[_0x2116cd(0x288)]},_0x850261={..._0x850261,..._0x1626b3});_0x1b588e?_0x380ab6=_0x850261[_0x2116cd(0x189)]==_0x2116cd(0x191)?_0x3f490d[_0x2116cd(0x258)]+_0x850261[_0x2116cd(0x271)]:_0x3f490d[_0x2116cd(0x258)]-_0x850261[_0x2116cd(0x271)]:_0x380ab6=await getCoinNumber(_0x850261[_0x2116cd(0x173)]);if(_0x850261[_0x2116cd(0x1a2)]&&_0x850261[_0x2116cd(0x1a2)][_0x2116cd(0x1f3)]==config[_0x2116cd(0x1ef)])_0x281cb9=_0x850261[_0x2116cd(0x1a2)]['cost'];else{if(_0x850261[_0x2116cd(0x1a2)]&&_0x850261[_0x2116cd(0x1a2)]['currency']==_0x2116cd(0x232)&&!_0x1b588e&&config[_0x2116cd(0x1ef)]!=_0x2116cd(0x274))_0x281cb9=_0x850261[_0x2116cd(0x1a2)][_0x2116cd(0x1c3)]*global['ticker'][_0x2116cd(0x232)+config['basecoin']];else _0x281cb9=defaultFee*_0x850261[_0x2116cd(0x271)]*_0x850261['price'];}_0x850261[_0x2116cd(0x189)]==_0x2116cd(0x191)?(_0x3ef3a4=_0x380ab6!=0x0?(_0x3f490d[_0x2116cd(0x169)]*_0x3f490d['number']+_0x850261[_0x2116cd(0x288)]*(_0x380ab6-_0x3f490d[_0x2116cd(0x258)])+_0x281cb9)/_0x380ab6:0x0,_0x46fe34=_0x3f490d[_0x2116cd(0x1b0)]):(_0x3ef3a4=_0x380ab6!=0x0?(_0x3f490d[_0x2116cd(0x169)]*_0x3f490d['number']-_0x850261['price']*(_0x3f490d[_0x2116cd(0x258)]-_0x380ab6)+_0x281cb9)/_0x380ab6:0x0,_0x46fe34=_0x3f490d['realized']+(_0x850261[_0x2116cd(0x288)]-_0x3f490d[_0x2116cd(0x169)])*_0x850261[_0x2116cd(0x271)]);_0x40169a=(_0x850261['price']-_0x3ef3a4-_0x281cb9/_0x850261[_0x2116cd(0x271)])*_0x380ab6;let _0x567005={'coin':_0x850261['coin'],'number':_0x380ab6,'breakeven':formatResult(_0x3ef3a4,0x8),'realized':formatResult(_0x46fe34,0x8),'unrealized':formatResult(_0x40169a,0x8),'fees':formatResult(_0x3f490d[_0x2116cd(0x276)]+_0x281cb9,0x8),'sells':_0x850261['side']==_0x2116cd(0x252)?_0x3f490d[_0x2116cd(0x1ce)]+0x1:_0x3f490d[_0x2116cd(0x1ce)],'buys':_0x850261['side']==_0x2116cd(0x191)?_0x3f490d['buys']+0x1:_0x3f490d['buys']};dbCoinResults[_0x2116cd(0x25b)](_0x2116cd(0x174))['find']({'coin':_0x850261['coin']})[_0x2116cd(0x170)](_0x567005)['write']();if(!_0x1b588e){if(_0x850261[_0x2116cd(0x1a2)]&&_0x850261['fee'][_0x2116cd(0x1f3)]=='BNB'){const _0x508d27=currentCoins[_0x2116cd(0x1f7)](_0xd599bf=>_0xd599bf[_0x2116cd(0x173)]==_0x2116cd(0x232));if(_0x508d27){let _0x15be6b=dbCoinResults[_0x2116cd(0x25b)](_0x2116cd(0x174))[_0x2116cd(0x1f7)]({'coin':'BNB'})[_0x2116cd(0x2b1)]();_0x567005={..._0x15be6b,'number':_0x508d27[_0x2116cd(0x258)]},dbCoinResults[_0x2116cd(0x25b)](_0x2116cd(0x174))[_0x2116cd(0x1f7)]({'coin':'BNB'})[_0x2116cd(0x170)](_0x567005)['write']();}}}}async function placeOrder(_0x1431ec){const _0x99e4d3=_0x2b23b3,_0x4ce3e0=config[_0x99e4d3(0x253)]==_0x99e4d3(0x156)?'market':_0x99e4d3(0x223);if(lockOrders==ORDERS[_0x99e4d3(0x155)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x99e4d3(0x138)],allOrdersPlaced=![],validateOrdersState=_0x99e4d3(0x194);let _0x30e9e9=![];lastOrders=[];for(const _0x5c04d0 of _0x1431ec){let _0x57d83f,_0x349dd4,_0x227986,_0x12ae95,_0x4bbd90,_0x414c99=_0x5c04d0[_0x99e4d3(0x18f)];try{const _0x377850=await exchange[_0x99e4d3(0x236)](_0x414c99);_0x57d83f=_0x5c04d0[_0x99e4d3(0x152)]?0x1/_0x5c04d0[_0x99e4d3(0x1d0)]:_0x5c04d0[_0x99e4d3(0x1d0)],_0x349dd4=_0x377850['bid'],_0x227986=_0x377850[_0x99e4d3(0x1b2)];_0x5c04d0[_0x99e4d3(0x152)]?(_0x12ae95=_0x5c04d0[_0x99e4d3(0x189)]=='buy'?_0x99e4d3(0x252):_0x99e4d3(0x191),_0x4bbd90=Math[_0x99e4d3(0x1e5)](_0x5c04d0[_0x99e4d3(0x208)])/_0x57d83f):(_0x12ae95=_0x5c04d0['side'],_0x4bbd90=Math[_0x99e4d3(0x1e5)](_0x5c04d0['trade']));_0x4ce3e0==_0x99e4d3(0x223)&&(config[_0x99e4d3(0x253)]=='limit-high'&&(_0x57d83f=_0x12ae95==_0x99e4d3(0x191)?_0x349dd4:_0x227986),config[_0x99e4d3(0x253)]==_0x99e4d3(0x218)&&(_0x57d83f=_0x12ae95==_0x99e4d3(0x191)?_0x227986:_0x349dd4));_0x4bbd90=formatResult(_0x4bbd90,0x8),_0x57d83f=formatResult(_0x57d83f,0x8);const _0x1bfff6=_0x12ae95==_0x99e4d3(0x252)?config[_0x99e4d3(0x1b9)]?String[_0x99e4d3(0x1a9)]('0x'+config[_0x99e4d3(0x1b9)])+'\x20':'':config[_0x99e4d3(0x2c1)]?String[_0x99e4d3(0x1a9)]('0x'+config[_0x99e4d3(0x2c1)])+'\x20':'',_0x39b6b0=_0x4ce3e0==_0x99e4d3(0x156)?_0x99e4d3(0x19f):config[_0x99e4d3(0x253)]==_0x99e4d3(0x176)?_0x99e4d3(0x13b):'Limit\x20(low-margin)',_0x1d54d5=(Math[_0x99e4d3(0x25c)](Math[_0x99e4d3(0x161)]()*0x35a4e900)+0x5f5e100)[_0x99e4d3(0x2be)]();lastOrders['push']({'customId':_0x1d54d5,'symbol':_0x414c99,'coin':_0x5c04d0[_0x99e4d3(0x173)],'amount':_0x4bbd90,'price':_0x57d83f,'side':_0x12ae95,'reverse':_0x5c04d0[_0x99e4d3(0x152)],'filled':0x0});if(_0x4ce3e0==_0x99e4d3(0x156))logHistory(_0x99e4d3(0x1a1),''+_0x1bfff6+_0x39b6b0+_0x99e4d3(0x244)+_0x414c99+'\x20'+_0x12ae95+'\x20#'+formatResult(_0x4bbd90,0x8)+'\x20@'+formatResult(_0x57d83f,0x8));else logHistory(_0x99e4d3(0x1a1),''+_0x1bfff6+_0x39b6b0+'\x20order:\x20'+_0x414c99+'\x20'+_0x12ae95+'\x20#'+formatResult(_0x4bbd90,0x8)+'\x20@'+formatResult(_0x57d83f,0x8));let _0x9f50eb;_0x4ce3e0==_0x99e4d3(0x156)?_0x12ae95=='buy'&&[_0x99e4d3(0x167),'Bitget','Cex',_0x99e4d3(0x292),_0x99e4d3(0x250)][_0x99e4d3(0x190)](config['exchange'])?_0x9f50eb=await exchange['createOrder'](_0x414c99,_0x4ce3e0,_0x12ae95,_0x4bbd90,_0x57d83f):_0x9f50eb=await exchange[_0x99e4d3(0x2cf)](_0x414c99,_0x4ce3e0,_0x12ae95,_0x4bbd90,undefined):_0x9f50eb=await exchange[_0x99e4d3(0x2cf)](_0x414c99,_0x4ce3e0,_0x12ae95,_0x4bbd90,_0x57d83f);logger[_0x99e4d3(0x15e)](_0x99e4d3(0x2d6)+_0x9f50eb['id']+'\x20|\x20Custom\x20ID:\x20'+_0x1d54d5);const _0x3c8d4f=lastOrders[_0x99e4d3(0x26b)]-0x1;if(_0x3c8d4f>=0x0&&lastOrders[_0x3c8d4f][_0x99e4d3(0x20b)]==_0x1d54d5){lastOrders[_0x3c8d4f][_0x99e4d3(0x1c8)]=_0x9f50eb['id'];if(_0x9f50eb[_0x99e4d3(0x203)])lastOrders[_0x3c8d4f]['amount']=_0x9f50eb[_0x99e4d3(0x203)];if(_0x9f50eb[_0x99e4d3(0x288)])lastOrders[_0x3c8d4f][_0x99e4d3(0x288)]=_0x9f50eb[_0x99e4d3(0x288)];lastOrders[_0x3c8d4f][_0x99e4d3(0x1a2)]=_0x9f50eb[_0x99e4d3(0x1a2)];}if(config[_0x99e4d3(0x264)]!=0x0){let _0xb68da=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0xb68da=cooldownTracker['shift']();const _0x566b43=getTimeStamp();cooldownTracker['push'](_0x566b43);if(_0xb68da){const _0x24caf5=fns['differenceInSeconds'](new Date(_0x566b43),new Date(_0xb68da));if(_0x24caf5<cooldownInterval){logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x2c8)+config[_0x99e4d3(0x264)]+_0x99e4d3(0x1b3)+cooldownInterval/0x3c+_0x99e4d3(0x1fc)+cooldownPeriod/(0xe10*0x3e8)+_0x99e4d3(0x263)),coolingDown=!![];break;}}}}catch(_0x18ef5d){if(_0x18ef5d[_0x99e4d3(0x2be)]()[_0x99e4d3(0x190)](_0x99e4d3(0x231)))lastOrders=lastOrders['filter'](_0x55493a=>_0x55493a[_0x99e4d3(0x18f)]!=_0x414c99),logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x140)+_0x414c99),_0x30e9e9=!![];else{if(_0x18ef5d[_0x99e4d3(0x2be)]()[_0x99e4d3(0x190)](_0x99e4d3(0x2a1)))lastOrders=lastOrders[_0x99e4d3(0x1ba)](_0xf66d18=>_0xf66d18[_0x99e4d3(0x18f)]!=_0x414c99),logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x162)+_0x414c99),_0x30e9e9=!![];else{if(_0x18ef5d[_0x99e4d3(0x2be)]()[_0x99e4d3(0x190)](_0x99e4d3(0x207)))lastOrders=lastOrders[_0x99e4d3(0x1ba)](_0x3e5c95=>_0x3e5c95[_0x99e4d3(0x18f)]!=_0x414c99),logHistory(_0x99e4d3(0x1dc),'Order\x20is\x20invalid:\x20'+_0x414c99),logger[_0x99e4d3(0x15e)](_0x18ef5d),_0x30e9e9=!![];else _0x18ef5d[_0x99e4d3(0x2be)]()['includes'](_0x99e4d3(0x22a))?(lastOrders=lastOrders[_0x99e4d3(0x1ba)](_0x406667=>_0x406667[_0x99e4d3(0x18f)]!=_0x414c99),logHistory('error',_0x99e4d3(0x140)+_0x414c99),_0x30e9e9=!![]):(lastOrders=lastOrders[_0x99e4d3(0x1ba)](_0x207630=>_0x207630[_0x99e4d3(0x18f)]!=_0x414c99),await handleError(_0x18ef5d,_0x99e4d3(0x16d),_0x414c99));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xc5c662=config[_0x99e4d3(0x253)]==_0x99e4d3(0x156)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x58b417=_0x99e4d3;validateOrders(_0x58b417(0x230));},_0xc5c662);}else unlockOrders();_0x30e9e9&&config['headless']&&(logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x2d4)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x99e4d3(0x2c4),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x99e4d3(0x1ad)]&&logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x23d));else lockOrders!=ORDERS[_0x99e4d3(0x155)]&&(!config[_0x99e4d3(0x1ad)]&&(config[_0x99e4d3(0x253)]==_0x99e4d3(0x156)?logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x1cf)):logHistory(_0x99e4d3(0x1dc),_0x99e4d3(0x1c2))));}}function persistOpenOrders(_0x3b1de4){const _0x4bc0a9=_0x2b23b3,_0x7a774c={...config,'openOrders':_0x3b1de4};let _0x587959=dbConfig[_0x4bc0a9(0x25b)](_0x4bc0a9(0x24a))[_0x4bc0a9(0x1f7)]({'botID':botID})[_0x4bc0a9(0x2b1)]();_0x587959&&dbConfig[_0x4bc0a9(0x25b)]('bot')['find']({'botID':botID})['assign'](_0x7a774c)[_0x4bc0a9(0x179)]();}function restoreOrders(){const _0x4569d5=_0x2b23b3;let _0xac2725;config[_0x4569d5(0x1c7)]&&allOpenOrders[_0x4569d5(0x16e)](_0xd65892=>{const _0x5346ee=_0x4569d5,_0x2968d9=config[_0x5346ee(0x1c7)][_0x5346ee(0x1f7)](_0x23bbe2=>_0x23bbe2['orderId']==_0xd65892['id']);_0x2968d9&&(lastOrders[_0x5346ee(0x266)](_0x2968d9),_0xac2725=_0xd65892['timestamp']);});if(lastOrders[_0x4569d5(0x26b)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x4569d5(0x1b6),allOrdersPlaced=!![];const _0x4a6f5d=new Date()[_0x4569d5(0x262)](),_0x11fbd3=config[_0x4569d5(0x253)]==_0x4569d5(0x156)?validateOrderTimeout*0x3c*0x3e8:config[_0x4569d5(0x255)]*0x3c*0x3e8;if(_0xac2725+_0x11fbd3>_0x4a6f5d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0xac2725+_0x11fbd3-_0x4a6f5d);}else validateOrders(_0x4569d5(0x230));}}async function sendMetricsTelegram(){const _0x4ec272=_0x2b23b3;if(!coinsLoaded){process['send']({'telegrammsg':_0x4ec272(0x22d)},_0x48b547=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x136df3='';if(config[_0x4ec272(0x268)])_0x136df3=_0x4ec272(0x1c1)+config[_0x4ec272(0x2c9)]+_0x4ec272(0x151);else _0x136df3=_0x4ec272(0x210)+botID+_0x4ec272(0x151);const _0x426a3f=getKPIs(_0x4ec272(0x1ef)),_0x2dc676=getKPIs(_0x4ec272(0x171),config[_0x4ec272(0x171)]),_0x138199=getKPIs(_0x4ec272(0x239)),_0x155d76=getKPIs(_0x4ec272(0x180),config[_0x4ec272(0x171)]);_0x136df3+=_0x4ec272(0x26f),_0x136df3+=_0x426a3f[_0x4ec272(0x17f)]+_0x4ec272(0x20a)+_0x426a3f[_0x4ec272(0x2b1)]+'\x0a',_0x136df3+=_0x426a3f['rightTxt']+':\x20'+_0x426a3f[_0x4ec272(0x1d5)]+'%\x0a',_0x136df3+=_0x2dc676[_0x4ec272(0x17f)]+_0x4ec272(0x20a)+_0x2dc676[_0x4ec272(0x2b1)]+'\x0a',_0x136df3+=_0x2dc676[_0x4ec272(0x1fb)]+':\x20'+_0x2dc676['change']+'%\x0a',_0x136df3+=_0x138199['leftTxt']+':\x20'+_0x138199['value']+'\x20('+config[_0x4ec272(0x1ef)]+')\x0a',_0x136df3+=_0x138199['rightTxt']+':\x20'+_0x138199[_0x4ec272(0x1d5)]+_0x4ec272(0x18c)+config[_0x4ec272(0x1ef)]+')\x0a',_0x136df3+=_0x155d76[_0x4ec272(0x17f)]+':\x20'+_0x155d76['value']+'\x20('+config[_0x4ec272(0x171)]+')\x0a',_0x136df3+=_0x155d76[_0x4ec272(0x1fb)]+':\x20'+_0x155d76['change']+_0x4ec272(0x18c)+config[_0x4ec272(0x171)]+')\x0a',_0x136df3+='</pre>',process[_0x4ec272(0x299)]({'telegrammsg':_0x136df3},_0x48f841=>{});}async function sendPortfolioTelegram(){const _0x457d72=_0x2b23b3;if(!coinsLoaded){process[_0x457d72(0x299)]({'telegrammsg':_0x457d72(0x22d)},_0x13258d=>{});return;}let _0x32cfb0='';if(config['showname'])_0x32cfb0='<b>'+config[_0x457d72(0x2c9)]+_0x457d72(0x1dd);else _0x32cfb0='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x32cfb0+='<pre>',_0x32cfb0+=_0x457d72(0x1ae),_0x32cfb0+=_0x457d72(0x2b6),_0x32cfb0+=_0x457d72(0x1ae),currentCoins[_0x457d72(0x16e)](_0x3d85dc=>{const _0x378d33=_0x457d72;_0x32cfb0+=_0x3d85dc['coin'][_0x378d33(0x1c4)](0x7)+'|\x20'+formatPad(_0x3d85dc['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x3d85dc[_0x378d33(0x217)],0x2,0x6)+'|\x20'+formatPad(_0x3d85dc[_0x378d33(0x2c2)]*0x64,0x2,0x6)+'\x0a';}),_0x32cfb0+='</pre>',process[_0x457d72(0x299)]({'telegrammsg':_0x32cfb0},_0x5b5e0f=>{});}function formatPad(_0x28197f,_0x45f7a4,_0xc3ac23){const _0x55fe7e=_0x2b23b3,_0x2db8fc=formatResultString(_0x28197f,_0x45f7a4);return _0x2db8fc?_0x2db8fc[_0x55fe7e(0x293)](_0xc3ac23):''[_0x55fe7e(0x293)](_0xc3ac23);}function logHistory(_0x127ad3,_0x2ee709,_0x3b7286=''){const _0x4a3515=_0x2b23b3;logger[_0x4a3515(0x15f)](''+_0x2ee709);let _0x3f3977={'time':getTimeStamp(),'type':_0x127ad3,'event':_0x2ee709};dbLogs['get'](_0x4a3515(0x269))['push'](_0x3f3977)[_0x4a3515(0x179)]();if(_0x3b7286=='')_0x3b7286=_0x2ee709;proxyEmit(_0x4a3515(0x159),{'log':_0x3f3977,'summary':_0x3b7286}),process[_0x4a3515(0x299)]({'telegram':{..._0x3f3977,'botname':config['botname'],'showname':config['showname']}},_0x14e00b=>{});}function emitHistory(_0x3f7048={}){const _0x137d08=_0x2b23b3;Object[_0x137d08(0x2bf)](_0x3f7048)[_0x137d08(0x26b)]==0x0&&(_0x3f7048={'type':[_0x137d08(0x1a1),_0x137d08(0x159)],'event':'','page':0x1});if(_0x3f7048[_0x137d08(0x21f)][_0x137d08(0x190)]('event'))_0x3f7048[_0x137d08(0x21f)]['splice'](_0x3f7048['type'][_0x137d08(0x279)](_0x137d08(0x159)),0x1,_0x137d08(0x1dc),'warning',_0x137d08(0x2c4));if(dbLogs[_0x137d08(0x242)]('logs')[_0x137d08(0x2b1)]()){let _0x1e3793=dbLogs[_0x137d08(0x25b)](_0x137d08(0x269))[_0x137d08(0x1ba)](_0x47f2fa=>{const _0x40f464=_0x137d08;if(_0x3f7048[_0x40f464(0x21f)][_0x40f464(0x26b)]==0x0)return![];else return _0x3f7048['type'][_0x40f464(0x190)](_0x47f2fa[_0x40f464(0x21f)]);})[_0x137d08(0x1ba)](_0x592f04=>{const _0x482bfb=_0x137d08;if(_0x3f7048[_0x482bfb(0x159)]=='')return!![];else return _0x592f04[_0x482bfb(0x159)][_0x482bfb(0x19d)]()[_0x482bfb(0x190)](_0x3f7048['event'][_0x482bfb(0x19d)]());})[_0x137d08(0x220)](_0x137d08(0x1bc)),_0x4a6ddf=_0x1e3793[_0x137d08(0x2b1)]()[_0x137d08(0x26b)];_0x1e3793=_0x1e3793['reverse']()[_0x137d08(0x1bd)]((_0x3f7048[_0x137d08(0x2a7)]-0x1)*logPageSize,_0x3f7048[_0x137d08(0x2a7)]*logPageSize-0x1)[_0x137d08(0x152)]()['value'](),proxyEmit(_0x137d08(0x188),{'logs':_0x1e3793,'total':_0x4a6ddf});}else proxyEmit(_0x137d08(0x188),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1df139){const _0x5e8bea=_0x2b23b3;if(dbLogs[_0x5e8bea(0x242)](_0x5e8bea(0x269))[_0x5e8bea(0x2b1)]()){const _0x35254c=dbLogs[_0x5e8bea(0x25b)](_0x5e8bea(0x269))[_0x5e8bea(0x220)](_0x5e8bea(0x1bc))[_0x5e8bea(0x1ba)](_0x5ceef0=>{const _0x176fac=_0x5e8bea;return _0x5ceef0[_0x176fac(0x21f)]==_0x176fac(0x1a1);})[_0x5e8bea(0x2b1)]();dbLogs[_0x5e8bea(0x25b)](_0x5e8bea(0x269))[_0x5e8bea(0x237)]()['write'](),dbLogs[_0x5e8bea(0x25b)](_0x5e8bea(0x269))[_0x5e8bea(0x170)](_0x35254c)[_0x5e8bea(0x179)](),emitHistory(_0x1df139);}}async function pauseBot(_0x58e752=pauseBotInterval){const _0xe2b8fd=_0x2b23b3,_0x56522c=new Date()[_0xe2b8fd(0x262)]();if(!lastErrorShown||_0x56522c-lastErrorShown>=_0x58e752){lastErrorShown=_0x56522c;!lastBotPause?(lastBotPause=_0x56522c,consecutivePauses=0x1):(_0x56522c-lastBotPause-_0x58e752<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xe2b8fd(0x299)]({'stop':_0xe2b8fd(0x26a)},_0x7f1667=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xe2b8fd(0x262)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x58e752),botPaused=![],reset(!![]);}}}async function killBot(){const _0x529b86=_0x2b23b3;botPaused=!![],await sleep(0x3e8),process[_0x529b86(0x299)]({'stop':'kill'},_0x4d9b44=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x508e35,_0x589ebb){const _0x4c87e9=_0x2b23b3;if(botPaused)return;const _0x8779f3=config[_0x4c87e9(0x270)]||'Exchange';if(_0x589ebb)logger[_0x4c87e9(0x15e)](_0x4c87e9(0x14d)+_0x589ebb);const _0x5460a4=()=>{const _0x196d09=_0x4c87e9;loading[_0x196d09(0x1dc)]=!![],emitLoadingProgress();};if(_0x508e35[_0x4c87e9(0x2be)]()[_0x4c87e9(0x190)]('API-key\x20format\x20invalid'))logHistory('error',_0x8779f3+_0x4c87e9(0x205)),_0x5460a4();else{if(_0x508e35[_0x4c87e9(0x2be)]()[_0x4c87e9(0x190)](_0x4c87e9(0x13c)))logHistory(_0x4c87e9(0x1dc),_0x8779f3+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x5460a4();else _0x508e35[_0x4c87e9(0x2be)]()[_0x4c87e9(0x190)](_0x4c87e9(0x240))?(logHistory(_0x4c87e9(0x1dc),_0x8779f3+_0x4c87e9(0x1e4)),logHistory(_0x4c87e9(0x1dc),_0x4c87e9(0x247)),_0x5460a4()):await handleError(_0x508e35,null);}}async function handleError(_0x61760,_0x595303,_0xe85572=''){const _0x1fbe26=_0x2b23b3;if(botPaused)return;const _0x2bfaf5=config['exchange']||_0x1fbe26(0x166);if(_0x595303)logger['debug'](_0x1fbe26(0x14d)+_0x595303);if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x1b4)))logHistory('error',_0x2bfaf5+_0x1fbe26(0x1e1)+pauseBotMsg),logger['debug'](_0x1fbe26(0x2c5),_0x61760),await pauseBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x24e)))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x19c)+pauseBotMsg),logger[_0x1fbe26(0x15e)](_0x1fbe26(0x2c5),_0x61760),await pauseBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x18b))||_0x61760[_0x1fbe26(0x2be)]()['includes'](_0x1fbe26(0x28c)))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x29f)+pauseBotMsg),await pauseBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x153)))logHistory('error',_0x2bfaf5+_0x1fbe26(0x1ec)+pauseBotMsg),await pauseBot();else{if(_0x61760[_0x1fbe26(0x2be)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x141)+pauseBotMsg),await pauseBot();else{if(_0x61760['toString']()[_0x1fbe26(0x19d)]()[_0x1fbe26(0x190)](_0x1fbe26(0x150))||_0x61760[_0x1fbe26(0x2be)]()['toLowerCase']()[_0x1fbe26(0x190)](_0x1fbe26(0x181))){const _0x48f4ed=_0x61760['toString']()[_0x1fbe26(0x19d)]();let _0x1d89e9=![];if((config[_0x1fbe26(0x270)]==_0x1fbe26(0x15b)||config['exchange']==_0x1fbe26(0x1b5))&&(_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x1ed)[_0x1fbe26(0x19d)]())||_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x1e8)[_0x1fbe26(0x19d)]())))_0x1d89e9=!![];if(config['exchange']==_0x1fbe26(0x295)&&_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x2c3)[_0x1fbe26(0x19d)]()))_0x1d89e9=!![];if(config['exchange']==_0x1fbe26(0x167)&&_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x2a0)[_0x1fbe26(0x19d)]()))_0x1d89e9=!![];if(config[_0x1fbe26(0x270)]==_0x1fbe26(0x192)&&_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x164)[_0x1fbe26(0x19d)]()))_0x1d89e9=!![];if((config[_0x1fbe26(0x270)]=='Mexc'||config[_0x1fbe26(0x270)]==_0x1fbe26(0x28e))&&_0x48f4ed[_0x1fbe26(0x190)](_0x1fbe26(0x22e)[_0x1fbe26(0x19d)]()))_0x1d89e9=!![];_0x1d89e9?logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x2ad)+pauseBotMsg):logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x1f5)+pauseBotMsg),logger['debug'](_0x1fbe26(0x2c5),_0x61760[_0x1fbe26(0x2be)]()),await pauseBot();}else{if(_0x61760[_0x1fbe26(0x2be)]()['includes']('InvalidNonce'))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x2a3)+pauseBotMsg),logger[_0x1fbe26(0x15e)](_0x1fbe26(0x2c5),_0x61760),await pauseBot();else{if(_0x61760 instanceof ccxt[_0x1fbe26(0x234)])logHistory('error',_0x2bfaf5+'\x20network\x20error'+pauseBotMsg),logger[_0x1fbe26(0x15e)](_0x1fbe26(0x2c5),_0x61760),await pauseBot();else{if(_0x61760['toString']()[_0x1fbe26(0x190)](_0x1fbe26(0x212)))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x1d4)),await killBot();else{if(_0x61760['toString']()[_0x1fbe26(0x190)](_0x1fbe26(0x13c)))logHistory('error',_0x2bfaf5+_0x1fbe26(0x2c7)),logHistory(_0x1fbe26(0x1dc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x240)))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x213)),logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x1d4)),await killBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)](_0x1fbe26(0x1d7)))logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x1c5)),logHistory(_0x1fbe26(0x1dc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x61760[_0x1fbe26(0x2be)]()[_0x1fbe26(0x190)]('InsufficientFunds'))logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x154)+_0xe85572);else _0x61760 instanceof ccxt[_0x1fbe26(0x25f)]?(logHistory(_0x1fbe26(0x1dc),_0x2bfaf5+_0x1fbe26(0x214)),logger[_0x1fbe26(0x15e)](_0x1fbe26(0x2c5),_0x61760)):(logHistory(_0x1fbe26(0x1dc),_0x1fbe26(0x137)+pauseBotMsg),logger[_0x1fbe26(0x15e)](_0x1fbe26(0x2c5),_0x61760),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x4f9881,_0x477742){const _0x167fbf=_0x2b23b3;return parseFloat(_0x4f9881[_0x167fbf(0x2ae)](_0x477742));}function formatResultTruncate(_0x57d8f3,_0x510bc6){const _0x643510=_0x2b23b3;let _0x2eb55a=formatResultString(_0x57d8f3,0xa),_0x5e7bfd=_0x2eb55a[_0x643510(0x279)]('.');return _0x5e7bfd!=-0x1&&(_0x2eb55a=_0x2eb55a[_0x643510(0x1bd)](0x0,_0x5e7bfd+_0x510bc6+0x1)),Number(_0x2eb55a);}function formatResultString(_0x4854c6,_0x4cc52e){const _0x4774c9=_0x2b23b3;let _0x2cfc24;if(!(''+_0x4854c6)['includes']('e'))_0x2cfc24=+(Math[_0x4774c9(0x1a4)](_0x4854c6+'e+'+_0x4cc52e)+'e-'+_0x4cc52e);else{let _0x57ca74=(''+_0x4854c6)[_0x4774c9(0x27a)]('e'),_0x2a04b3='';+_0x57ca74[0x1]+_0x4cc52e>0x0&&(_0x2a04b3='+'),_0x2cfc24=+(Math[_0x4774c9(0x1a4)](+_0x57ca74[0x0]+'e'+_0x2a04b3+(+_0x57ca74[0x1]+_0x4cc52e))+'e-'+_0x4cc52e);}return Number(_0x2cfc24)[_0x4774c9(0x2ae)](_0x4cc52e);}function getServerTime(){const _0x573776=_0x2b23b3,_0x1589ef=new Date();return _0x1589ef[_0x573776(0x1bb)]()+'/'+(_0x1589ef[_0x573776(0x22b)]()+0x1)[_0x573776(0x2be)]()['padStart'](0x2,'0')+'/'+_0x1589ef[_0x573776(0x243)]()[_0x573776(0x2be)]()[_0x573776(0x293)](0x2,'0')+'\x20'+_0x1589ef[_0x573776(0x204)]()[_0x573776(0x2be)]()['padStart'](0x2,'0')+':'+_0x1589ef['getMinutes']()[_0x573776(0x2be)]()[_0x573776(0x293)](0x2,'0')+':'+_0x1589ef['getSeconds']()[_0x573776(0x2be)]()[_0x573776(0x293)](0x2,'0');}function getTimeStamp(){const _0x1bbc32=_0x2b23b3,_0x29b96f=shiftedTime();return _0x29b96f['getFullYear']()+'/'+(_0x29b96f[_0x1bbc32(0x22b)]()+0x1)[_0x1bbc32(0x2be)]()['padStart'](0x2,'0')+'/'+_0x29b96f['getDate']()[_0x1bbc32(0x2be)]()[_0x1bbc32(0x293)](0x2,'0')+'\x20'+_0x29b96f[_0x1bbc32(0x204)]()[_0x1bbc32(0x2be)]()[_0x1bbc32(0x293)](0x2,'0')+':'+_0x29b96f[_0x1bbc32(0x23a)]()['toString']()[_0x1bbc32(0x293)](0x2,'0')+':'+_0x29b96f['getSeconds']()[_0x1bbc32(0x2be)]()['padStart'](0x2,'0');}function getDate(){const _0x1673d1=_0x2b23b3,_0x45b840=shiftedTime();return _0x45b840[_0x1673d1(0x1bb)]()+'/'+(_0x45b840[_0x1673d1(0x22b)]()+0x1)[_0x1673d1(0x2be)]()[_0x1673d1(0x293)](0x2,'0')+'/'+_0x45b840[_0x1673d1(0x243)]()['toString']()[_0x1673d1(0x293)](0x2,'0');}function getHour(){const _0x1e1739=_0x2b23b3,_0x39e870=shiftedTime();return _0x39e870['getHours']()['toString']()[_0x1e1739(0x293)](0x2,'0');}function sleep(_0xf46cbd){return new Promise(_0x119d9a=>setTimeout(_0x119d9a,_0xf46cbd));}function shiftedTime(){const _0x40cc23=_0x2b23b3,_0x495612=new Date();let _0x5878bf=_0x495612;if(config&&config[_0x40cc23(0x277)]!==0x0)_0x5878bf=fns['add'](_0x495612,{'hours':config['timeshift']});return _0x5878bf;}function timer(_0xc141aa){const _0x3e5fea=_0x2b23b3,_0x4b4bcb=new Date();!lasttime?console[_0x3e5fea(0x1e3)](getTimeStamp()+_0x3e5fea(0x260),_0xc141aa,_0x4b4bcb):console[_0x3e5fea(0x1e3)](getTimeStamp()+_0x3e5fea(0x260),_0xc141aa,(_0x4b4bcb-lasttime)/0x3e8),lasttime=_0x4b4bcb;}