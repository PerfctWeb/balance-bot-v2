const _0x17f3a0=_0x3ec5;(function(_0x4c0e7d,_0x19c1b6){const _0x11669e=_0x3ec5,_0x4fd9f0=_0x4c0e7d();while(!![]){try{const _0x1abc97=-parseInt(_0x11669e(0x124))/0x1+-parseInt(_0x11669e(0xd9))/0x2*(-parseInt(_0x11669e(0x1a5))/0x3)+parseInt(_0x11669e(0xb5))/0x4*(-parseInt(_0x11669e(0x1d6))/0x5)+parseInt(_0x11669e(0x1c9))/0x6+-parseInt(_0x11669e(0x1b7))/0x7*(parseInt(_0x11669e(0x19f))/0x8)+-parseInt(_0x11669e(0x1fa))/0x9*(parseInt(_0x11669e(0x157))/0xa)+-parseInt(_0x11669e(0x1e5))/0xb*(-parseInt(_0x11669e(0x175))/0xc);if(_0x1abc97===_0x19c1b6)break;else _0x4fd9f0['push'](_0x4fd9f0['shift']());}catch(_0x2aff91){_0x4fd9f0['push'](_0x4fd9f0['shift']());}}}(_0x19ae,0x65ff8));const _0x4a8273=function(){let _0x1a79da=!![];return function(_0xb5ad26,_0x1a7a97){const _0x10a9ce=_0x1a79da?function(){const _0x271b71=_0x3ec5;if(_0x1a7a97){const _0x40fd94=_0x1a7a97[_0x271b71(0x1d2)](_0xb5ad26,arguments);return _0x1a7a97=null,_0x40fd94;}}:function(){};return _0x1a79da=![],_0x10a9ce;};}(),_0x461261=_0x4a8273(this,function(){const _0x4945a5=_0x3ec5;return _0x461261['toString']()[_0x4945a5(0x131)](_0x4945a5(0x100))[_0x4945a5(0x1a6)]()[_0x4945a5(0x8d)](_0x461261)['search'](_0x4945a5(0x100));});_0x461261();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x17f3a0(0x1e7)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x17f3a0(0x206))[_0x17f3a0(0xa1)],util=require(_0x17f3a0(0x171)),argv=require(_0x17f3a0(0x138))(process[_0x17f3a0(0x156)]['slice'](0x2))['argv'],path=require('path');let exchange;global[_0x17f3a0(0x12e)]={},global[_0x17f3a0(0x10f)]={};const usdBasecoins=[_0x17f3a0(0xfc),_0x17f3a0(0x1f7),'TUSD','USDT',_0x17f3a0(0x149),_0x17f3a0(0xe2)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x17f3a0(0x1ca)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x17f3a0(0xb9)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0x3ec5(_0x4f47a7,_0x54714a){const _0x30cef3=_0x19ae();return _0x3ec5=function(_0x461261,_0x4a8273){_0x461261=_0x461261-0x79;let _0x19aed5=_0x30cef3[_0x461261];return _0x19aed5;},_0x3ec5(_0x4f47a7,_0x54714a);}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x17f3a0(0x111)+pauseBotInterval/0xea60+_0x17f3a0(0x16d),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x17f3a0(0x89))['version'],botID=process[_0x17f3a0(0x156)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x17f3a0(0xad)](_0x17f3a0(0x112)+botID+_0x17f3a0(0x122)),killBot());const userID=process[_0x17f3a0(0x156)][0x3]||'',configpath=userID?_0x17f3a0(0x140)+userID+'/':_0x17f3a0(0x140),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x17f3a0(0xa6)](logspath+_0x17f3a0(0xc6),{'flags':'a'});!fs[_0x17f3a0(0x1b6)](configpath)&&fs[_0x17f3a0(0x1fc)](configpath);!fs['existsSync'](logspath)&&fs[_0x17f3a0(0x1fc)](logspath);const configfile=configpath+_0x17f3a0(0xf9)+botID+'-config.json',logfile=configpath+_0x17f3a0(0xf9)+botID+_0x17f3a0(0xe9),performancefile=configpath+_0x17f3a0(0xf9)+botID+_0x17f3a0(0x86),coinresultsfile=configpath+_0x17f3a0(0xf9)+botID+_0x17f3a0(0x144),settingsfile=configpath+_0x17f3a0(0x1d4),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x17f3a0(0x215),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x17f3a0(0x15c)]({'logs':[],'version':serverversion})[_0x17f3a0(0xe3)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x17f3a0(0xe3)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x17f3a0(0x15c)]({'bot':[],'version':serverversion})[_0x17f3a0(0xe3)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x17f3a0(0x15c)]({'coins':[],'version':serverversion})[_0x17f3a0(0xe3)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x17f3a0(0x1ea),'rsaStandard':_0x17f3a0(0x195)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x330329=>{const _0x13f114=_0x17f3a0;console[_0x13f114(0xad)](_0x330329);},'simple':_0x571781=>{const _0x1fb255=_0x17f3a0;console['log'](_0x571781),loggerfile[_0x1fb255(0xe3)](util[_0x1fb255(0x1c2)](_0x571781)+'\x0a');},'full':async(_0x59e257,_0x15c6b5='')=>{const _0x45af68=_0x17f3a0;let _0x250cb8;if(config[_0x45af68(0x135)])_0x250cb8=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x59e257;else _0x250cb8=getTimeStamp()+_0x45af68(0x13a)+botID+_0x45af68(0xdb)+_0x59e257;console['log'](_0x250cb8),loggerfile['write'](util[_0x45af68(0x1c2)](_0x250cb8)+'\x0a'),_0x15c6b5&&(console['log'](_0x15c6b5),loggerfile[_0x45af68(0xe3)](util[_0x45af68(0x1c2)](_0x15c6b5)+'\x0a'));},'debug':async(_0x27c7da,_0x5f31d8='')=>{const _0x3cb294=_0x17f3a0;let _0x5330f1;if(config[_0x3cb294(0x135)])_0x5330f1=getTimeStamp()+':\x20'+config[_0x3cb294(0x120)]+_0x3cb294(0x169)+_0x27c7da;else _0x5330f1=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x27c7da;if(debugging)console[_0x3cb294(0xad)](_0x5330f1);loggerfile[_0x3cb294(0xe3)](util[_0x3cb294(0x1c2)](_0x5330f1)+'\x0a');if(_0x5f31d8){if(debugging)console[_0x3cb294(0xad)](_0x5f31d8);loggerfile['write'](util[_0x3cb294(0x1c2)](_0x5f31d8)+'\x0a');}}};process['on']('uncaughtException',function(_0x1e8ed0){const _0x1362e8=_0x17f3a0;handleError(_0x1e8ed0,_0x1362e8(0xf8));});settings[_0x17f3a0(0x13b)]!=config[_0x17f3a0(0x13b)]&&updateTimeshift(settings[_0x17f3a0(0x13b)]);settings['onepagemode']!=config[_0x17f3a0(0x146)]&&updateOnepagemode(settings[_0x17f3a0(0x146)]);process[_0x17f3a0(0x10c)]({'started':_0x17f3a0(0x18e)},_0x1a7320=>{}),initializeProcessListeners();function proxyEmit(_0x37e70f,_0x17c33a=null){const _0x4f4611=_0x17f3a0;process[_0x4f4611(0x10c)]({'function':_0x37e70f,'args':_0x17c33a},_0xc80ddd=>{});}function initializeProcessListeners(){const _0x1c8c32=_0x17f3a0;process['on'](_0x1c8c32(0xc4),_0x1e5edd=>{const _0x3ac641=_0x1c8c32;switch(Object['keys'](_0x1e5edd)[0x0]){case _0x3ac641(0x13b):_0x1e5edd[_0x3ac641(0x13b)]!=undefined&&(settings[_0x3ac641(0x13b)]=_0x1e5edd[_0x3ac641(0x13b)],updateTimeshift(settings[_0x3ac641(0x13b)]));break;case _0x3ac641(0x146):_0x1e5edd[_0x3ac641(0x146)]!=undefined&&(settings[_0x3ac641(0x146)]=_0x1e5edd['onepagemode'],updateOnepagemode(settings[_0x3ac641(0x146)]));break;case _0x3ac641(0x133):_0x1e5edd['bots']!=undefined&&(bots=JSON[_0x3ac641(0x1e6)](_0x1e5edd['bots']),proxyEmit(_0x3ac641(0x133),bots));break;case _0x3ac641(0x1f3):switch(_0x1e5edd[_0x3ac641(0x1f3)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x1e5edd[_0x3ac641(0x213)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x1e5edd[_0x3ac641(0x213)]);break;case _0x3ac641(0x172):getPortfolio(_0x1e5edd[_0x3ac641(0x213)]);break;case _0x3ac641(0x208):storeConfiguration(_0x1e5edd[_0x3ac641(0x213)]);break;case'storeHeadless':storeHeadless(_0x1e5edd[_0x3ac641(0x213)]);break;case'storeFiat':storeFiat(_0x1e5edd[_0x3ac641(0x213)]);break;case'resetHistory':resetHistory();break;case _0x3ac641(0xef):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1e5edd['args']);break;case _0x3ac641(0x17b):cancelLoading();break;case'showConfig':showConfig();break;case _0x3ac641(0xf3):sendMetricsTelegram();break;case _0x3ac641(0x1a4):sendPortfolioTelegram();break;}}});}function _0x19ae(){const _0x2bfda4=['BUSD','basecoinvalue','date','9UEtknf','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','mkdirSync','buys','\x20has\x20a\x2024h\x20drop\x20of\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','emojibuy','recreate','Trigger:\x20','string','removed','%\x20(','hybrid-crypto-js','ORDERS.UNLOCKING','storeConfiguration','API-key\x20format\x20invalid','\x20|\x20Custom\x20ID:\x20','cost','watchTransactions()','portfolio','limits','\x20metrics:</b>\x20\x0a\x0a','slice','privateKey','\x20order:\x20','args','sell','/backup/','getAllOrders()','\x20exchange','exchange\x20not\x20reloaded','cancelOrder','version','timestamp','rightTxt','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','find','milliseconds','type','trade','eur','0\x20-\x20EXECUTION:\x20','fromCodePoint','Net\x20effect','-performance.json','getHours','excluded','./version.json','recent20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Unfilled\x20order(s)\x20canceled\x20after\x20','constructor','\x20orders\x20in\x20less\x20than\x20','colorscheme','fetchClosedOrders','unlinkSync','exec','Bitget','starting-balance-','order','getPortfolio(2)','logs','MIN_NOTIONAL','decrypt','AuthenticationError','error','\x20minutes\x20-\x20','Invalid\x20symbol:\x20','padStart','basecoin','NetworkError','Crypt','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','bot','1\x20-\x20Handle\x20open\x20orders','\x20change','createWriteStream','getPortfolio(0)','splice','watchTrades','realized','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fiat','log','limit-low','2\x20-\x20handling\x20FILLED\x20order:\x20','length','fee','1\x20-\x20FILLED\x20unknown\x20order:\x20','warning','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','8iuGAZe','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','loadMarkets','valid','UNLOCKED','concat','progress','settings','threshold','side','************','BNB/','autoliquidity','amountToPrecision','close','message','InsufficientFunds','/output-000.log','yyyy-MM-dd\x27T\x27HH:mm:ss','push','map','\x20-\x20bot\x20not\x20started','openOrders','net-fiat','getSeconds','assign','createOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','orderId','highest','PAXG','apiKey','Huobipro','Portfolio\x20change\x20detected:\x20','breakeven','53114uJMUwa','BNB','\x20>\x20','coins','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','sortBy','no\x20open\x20orders','No\x20more\x20open\x20orders\x20-\x20','startsWith','USDP','write','ORDERS.LOCKED','exchange','fetchTicker','balances','restart','-events.json','2.3.5','USDT','stringify','max','Transaction\x20detection\x20blocked','getStartingBalances','watchTrades()','ORDERS.UNLOCKED','change24h','sendMetricsTelegram','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','leftTxt','abs','event-history','uncaughtException','bot-','get','DDoSProtection','USD','getTime','remove','/USD','(((.+)+)+)+$','apiPassword','Fee\x20discount\x20refund\x20detected:\x20','Binance','indexOf','Initializing\x20coin\x20results','replace','getCoins()','BTC','average','Reset\x20|\x20','ongoing','send','coin-loading-progress','getPortfolio(1)','change','open','\x20-\x20pausing\x20bot\x20for\x20','Error:\x20Invalid\x20argument\x20','bid','watchOrders','page','none','Order\x20amount\x20is\x20invalid:\x20','invalid\x20Request-Time','Avoiding\x20continuous\x20order\x20attempts','netoffset','secure','fetchBalance','initial','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','botname','Invalid\x20API\x20key\x20or\x20secret\x20entered',',\x20must\x20be\x20a\x203\x20digit\x20number','differenceInSeconds','389181hMfnfB','KC-API-TIMESTAMP\x20Invalid','Order\x20is\x20invalid:\x20','buy','filter','PermissionDenied','Unknown\x20error\x20occured','headless','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','startnumber','ticker','1\x20-\x20Validate\x20orders:\x20','sells','search','ask','bots','coin','showname','final','UNLOCKING','yargs/yargs','Net\x20',':\x20Bot\x20','timeshift','keys','\x20|\x20','time','password','./config/','limit','has','1\x20-\x20Unlock\x20orders','-results.json','getFullYear','onepagemode','cooldown','offset','USDC','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','<pre>','<b>','startprice','Exception\x20thrown\x20in\x20','getMinutes','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','recreateCoinResults()','loading-canceled','recovery','data','reverse','argv','3418850PXTjen','full','fetchTickers()','ETH','event','defaults','target','success','ordertype','\x20closed\x20the\x20connection','Pausing\x20for\x20','.json','kill','EUR','OnMaintenance','starting-balances','total','net-basecoin','\x20>\x20[DEBUG]\x20','loadSymbols()','cancelOrders()','number','\x20minutes','\x20|\x20lock\x20orders:\x20','debug','getDate','util','getPortfolio','ExchangeNotAvailable','exchanges','72PyoqTS','\x20/\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20portfolio:</b>\x20\x0a\x0a','getMonth','canceled','cancelLoading','delta','\x20exchange\x20error','symbol','remainingSymbols','\x20not\x20responding','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','2.5.0','liquidity','toLowerCase','2.6.0','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','<b>Bot\x20','floor','fetchTickers','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','usd','price','enabled','running','substring','amount','filled','LOCKED','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','isEqual','RSA-OAEP','changes','market','includes','round','shift','last','placeOrder()','InvalidOrder','entries','472YxbCyx','cloneDeep','cancel','getOpenOrders()','Bot\x20','sendPortfolioTelegram','33CRGMwy','toString','emojisell','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Order\x20filled:\x20','forEach','request-time','\x20not\x20available','join','Exchange','Resetting\x20coin\x20results:\x20','Invalid\x20ACCESS_TIMESTAMP','toUpperCase','\x20value','red_yellow_blue','</pre>','random','existsSync','62426rfIqZZ','apiSecret','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','startdate','Saving\x20configuration','min','padEnd','\x20network\x20error','datetime','set','Waited\x20','format','performance','Mexc','timeout','balancing\x20resumed','/EUR','pro','2577774uaILQw','freeze','exchange\x20reloaded',':\x20timer\x20>','\x20:\x20','configuration','Bybit','watchOrders()','\x20|\x20highest\x20fee:\x20','apply','spot','bb-settings.json','Cooldown\x20ended\x20-\x20balancing\x20resumed','8940zbindG','toFixed','ID:\x20','yyyy/MM/dd','configuration-stored','value','balancing\x20resumes\x20when\x20cooldown\x20ends','must\x20be\x20greater\x20than\x20minimum\x20amount','Huobi','sort','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','currency','limit-high','Error\x20details:','\x20|\x20exchange:\x20','1754192yavIYO','parse','lowdb/adapters/FileSync','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','fetchOpenOrders','sha256','Invalid\x20quantity','status','add','distribution','\x20hour','orderstatus','Mexc3','2\x20-\x20Handled\x20open\x20orders','function','RateLimitExceeded','Executing\x20exchange\x20reload','split'];_0x19ae=function(){return _0x2bfda4;};return _0x19ae();}reset(!![]);async function reset(_0x1e4ad5=![]){const _0x27993a=_0x17f3a0;logger['debug'](_0x27993a(0x10a)+(_0x1e4ad5?_0x27993a(0x1cb):_0x27993a(0x218))+_0x27993a(0x1e4)+config[_0x27993a(0xe5)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1e4ad5)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x27993a(0xd5)]!=''&&config[_0x27993a(0xd5)]!='***'){loadingProgress=0x0;if(_0x1e4ad5){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x55b098){handleErrorNoStop(_0x55b098,_0x27993a(0x16a));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x5c0990=await getCoins();[currentCoins,currentCoinsAll]=_0x5c0990,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x27993a(0x16f)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x27993a(0xb0)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x42263d=_0x17f3a0;exchangeStopped=!![];try{await exchange[_0x42263d(0xc3)]();}catch(_0xf9175c){await handleError(_0xf9175c,'stopExchange()');}}async function reloadExchange(){const _0x54479c=_0x17f3a0;while(lockOrders!=ORDERS[_0x54479c(0xb9)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x54479c(0x16f)](_0x54479c(0x1f5)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3a0592=config[_0x17f3a0(0xe5)],_0x703cbe=config['apiKey'],_0x32756d=config[_0x17f3a0(0x1b8)],_0x54bc05=config[_0x17f3a0(0x101)]){const _0x2b5534=_0x17f3a0;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x3a0592)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x3a0592+_0x2b5534(0x217)),killBot());const _0x2eac35=ccxt[_0x2b5534(0x1c8)][_0x3a0592['toLowerCase']()];exchange=new _0x2eac35({'apiKey':_0x703cbe,'secret':_0x32756d,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2b5534(0x1d3)}});if(_0x54bc05)exchange[_0x2b5534(0x13f)]=_0x54bc05;}function setStableCoins(){const _0x398dbf=_0x17f3a0;let _0x534203=config[_0x398dbf(0x9f)]==_0x398dbf(0x15a)?_0x398dbf(0x15a):config['basecoin']==_0x398dbf(0xd4)?_0x398dbf(0xd4):_0x398dbf(0x108),_0x530b6f=!allSymbols['includes'](_0x534203+_0x398dbf(0xff))?_0x398dbf(0xeb):'USD',_0x2d59a6=!allSymbols['includes'](_0x534203+_0x398dbf(0x1c7))?_0x530b6f:_0x398dbf(0x164);stablecoins={'eur':{'coin':''+_0x534203+_0x2d59a6,'symbol':_0x534203+'/'+_0x2d59a6},'usd':{'coin':''+_0x534203+_0x530b6f,'symbol':_0x534203+'/'+_0x530b6f}};}async function initwsCcxt(){const _0x4af3fe=_0x17f3a0;initCycle++;const _0x554801=initCycle;let _0x55b390=[];config[_0x4af3fe(0x20d)][_0x4af3fe(0x1aa)](_0x11f0ed=>{const _0x3fd489=_0x4af3fe;if(!_0x11f0ed[_0x3fd489(0x88)]&&_0x11f0ed[_0x3fd489(0x134)]!=config[_0x3fd489(0x9f)])_0x55b390[_0x3fd489(0xc8)](_0x11f0ed[_0x3fd489(0x17e)]);});if(!_0x55b390[_0x4af3fe(0x198)](stablecoins[_0x4af3fe(0x82)][_0x4af3fe(0x17e)]))_0x55b390[_0x4af3fe(0xc8)](stablecoins[_0x4af3fe(0x82)][_0x4af3fe(0x17e)]);if(!_0x55b390[_0x4af3fe(0x198)](stablecoins[_0x4af3fe(0x18b)][_0x4af3fe(0x17e)]))_0x55b390[_0x4af3fe(0xc8)](stablecoins[_0x4af3fe(0x18b)][_0x4af3fe(0x17e)]);if(config[_0x4af3fe(0xe5)][_0x4af3fe(0xe1)](_0x4af3fe(0x103))&&config[_0x4af3fe(0x9f)]!='PAXG'){if(!_0x55b390[_0x4af3fe(0x198)]('BNB/'+config[_0x4af3fe(0x9f)]))_0x55b390[_0x4af3fe(0xc8)](_0x4af3fe(0xc0)+config[_0x4af3fe(0x9f)]);}loadCoins(_0x55b390),_0x55b390=validateSymbols(_0x55b390);const _0x5cccfb=async _0x2a86ed=>{const _0x5ebdb9=_0x4af3fe;let _0x35ae44;try{const _0x312425=await getTickers(_0x2a86ed);Object[_0x5ebdb9(0x19e)](_0x312425)[_0x5ebdb9(0x1aa)](_0xe0aedf=>{const _0x4e0063=_0x5ebdb9;_0x35ae44=_0xe0aedf[0x1][_0x4e0063(0x17e)],global['ticker'][noslash(_0x35ae44)]=_0xe0aedf[0x1]['last'],global[_0x4e0063(0x10f)][_0x35ae44]=_0xe0aedf[0x1]['percentage'];});}catch(_0x20b343){await handleError(_0x20b343,'initTickers()',_0x35ae44);}},_0x462c5c=async _0x23d105=>{const _0x3e4406=_0x4af3fe;while(initCycle==_0x554801){if(!botPaused)try{const _0x50fd21=await exchange['watchTrades'](_0x23d105);global[_0x3e4406(0x12e)][noslash(_0x50fd21[0x0][_0x3e4406(0x17e)])]=_0x50fd21[0x0]['price'],await sleep(0x3e8);}catch(_0x5ef76a){if(!exchangeStopped)await handleError(_0x5ef76a,_0x3e4406(0xf0),_0x23d105);}else await sleep(0x64);}},_0x14639f=async _0x152fa6=>{const _0x59d98a=_0x4af3fe;while(initCycle==_0x554801){if(!botPaused){let _0x2c13fd;try{await sleep(0x3c*0x3e8);const _0x18ba3b=await getTickers(_0x152fa6);Object['entries'](_0x18ba3b)[_0x59d98a(0x1aa)](_0x5eec0d=>{const _0x18bd6f=_0x59d98a;_0x2c13fd=_0x5eec0d[0x1]['symbol'],global[_0x18bd6f(0x10f)][_0x2c13fd]=_0x5eec0d[0x1]['percentage'];});}catch(_0x4f6e18){if(!exchangeStopped)await handleError(_0x4f6e18,_0x59d98a(0x159),_0x2c13fd);}}else await sleep(0x64);}},_0x2706d5=async _0x3f62d8=>{const _0x5d578d=_0x4af3fe;while(initCycle==_0x554801){if(!botPaused)try{const _0x2b0eab=await exchange[_0x5d578d(0x114)](_0x3f62d8);initCycle==_0x554801&&_0x2b0eab['forEach'](_0x4fad3a=>{updateNumberCoinsCcxt(_0x4fad3a);});}catch(_0x2fdc2b){if(!exchangeStopped)await handleError(_0x2fdc2b,_0x5d578d(0x1d0));}else await sleep(0x64);}};_0x5cccfb(_0x55b390),_0x14639f(_0x55b390),_0x55b390[_0x4af3fe(0x1aa)](_0x3a3f9a=>{_0x462c5c(_0x3a3f9a),_0x2706d5(_0x3a3f9a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x30f7af){const _0x437ee1=_0x17f3a0;let _0x4468dc={};try{if(config['exchange']!='Cryptocom')_0x4468dc=await exchange[_0x437ee1(0x189)](_0x30f7af);else for(const _0x1aa239 of _0x30f7af){const _0x2f3d89=await exchange[_0x437ee1(0xe6)](_0x1aa239);_0x4468dc[_0x1aa239]=_0x2f3d89;}return _0x4468dc;}catch(_0x162ada){throw _0x162ada;}}async function watchTransactions(){const _0x240c45=_0x17f3a0;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x420779=await getCoins(),[_0x4d4ce7,_0x21a0b9]=_0x420779;let _0x54378c=[];currentCoins['forEach'](_0xf29107=>{const _0x2a9fb4=_0x3ec5,_0x22d377=_0x4d4ce7[_0x2a9fb4(0x7e)](_0x24e902=>_0x24e902['coin']==_0xf29107[_0x2a9fb4(0x134)]);if(_0x22d377){if(_0xf29107[_0x2a9fb4(0x16c)]!=_0x22d377[_0x2a9fb4(0x16c)]){let _0x4802bc;if(_0xf29107['coin']!=config[_0x2a9fb4(0x9f)]){const _0x1a4655=global[_0x2a9fb4(0x12e)][noslash(_0xf29107[_0x2a9fb4(0x17e)])];_0x4802bc=_0xf29107[_0x2a9fb4(0x155)]?0x1/_0x1a4655:_0x1a4655;}else _0x4802bc=0x1;_0x54378c[_0x2a9fb4(0xc8)]({'coin':_0xf29107[_0x2a9fb4(0x134)],'symbol':_0xf29107[_0x2a9fb4(0x17e)],'price':_0x4802bc,'number':Number(formatResult(_0x22d377[_0x2a9fb4(0x16c)]-_0xf29107[_0x2a9fb4(0x16c)],0x8)),'basecoinvalue':_0x4802bc*(_0x22d377[_0x2a9fb4(0x16c)]-_0xf29107[_0x2a9fb4(0x16c)])});}}});if(_0x54378c[_0x240c45(0xb0)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x240c45(0x16f)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x54378c[0x0]['basecoinvalue']+_0x240c45(0x1d1)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x240c45(0xf6)](_0x54378c[0x0][_0x240c45(0x1f8)])>lastFees[_0x240c45(0xd3)]){delete _0x54378c[0x0][_0x240c45(0x17e)],delete _0x54378c[0x0][_0x240c45(0x1f8)];let _0x50d9ed=[],_0x334b45=[...config[_0x240c45(0x183)]]||[],_0x5f2b06=config[_0x240c45(0x183)];_0x334b45[_0x240c45(0x1df)]((_0x3a26ac,_0x29488d)=>_0x3a26ac[_0x240c45(0x1f9)]>_0x29488d[_0x240c45(0x1f9)]?-0x1:_0x29488d[_0x240c45(0x1f9)]>_0x3a26ac[_0x240c45(0x1f9)]?0x1:0x0);const _0x1a7253=getDate();if(_0x334b45[0x0]){const _0x14f8dc=fns[_0x240c45(0x1e6)](_0x334b45[0x0][_0x240c45(0x1f9)],_0x240c45(0x1d9),new Date()),_0x37502b=fns[_0x240c45(0x1e6)](_0x1a7253,_0x240c45(0x1d9),new Date());if(fns[_0x240c45(0x194)](_0x14f8dc,_0x37502b)){_0x50d9ed=_0x334b45[0x0]['changes'];const _0x5e0fbe=_0x50d9ed[_0x240c45(0x7e)](_0x12ffa3=>_0x12ffa3[_0x240c45(0x134)]==_0x54378c[0x0][_0x240c45(0x134)]);_0x5e0fbe?(_0x5e0fbe[_0x240c45(0x16c)]+=_0x54378c[0x0][_0x240c45(0x16c)],_0x5e0fbe['number']==0x0&&(_0x50d9ed=_0x50d9ed['filter'](_0x33d6c0=>{return _0x33d6c0['coin']!=_0x54378c[0x0]['coin'];}))):_0x50d9ed[_0x240c45(0xc8)](_0x54378c[0x0]);const _0x139db0=_0x5f2b06[_0x240c45(0x7e)](_0x309a01=>_0x309a01[_0x240c45(0x1f9)]==_0x1a7253);_0x139db0[_0x240c45(0x196)]=_0x50d9ed;}else _0x5f2b06[_0x240c45(0xc8)]({'date':_0x1a7253,'changes':[_0x54378c[0x0]]});}const _0x4f96d2=_0x5f2b06[_0x240c45(0x7e)](_0x39e251=>_0x39e251[_0x240c45(0x1f9)]==_0x1a7253);if(_0x4f96d2){let _0x2ca0bb=!![];_0x4f96d2['changes'][_0x240c45(0x1aa)](_0x2eb828=>{const _0x4abf97=_0x240c45;if(_0x2eb828[_0x4abf97(0x16c)]!=0x0)_0x2ca0bb=![];}),_0x2ca0bb&&(_0x5f2b06=_0x5f2b06[_0x240c45(0x128)](_0x382fe2=>{const _0x42a4bf=_0x240c45;return _0x382fe2[_0x42a4bf(0x1f9)]!=_0x1a7253;}));}let _0x4be0fe=dbConfig[_0x240c45(0xfa)](_0x240c45(0xa3))[_0x240c45(0x7e)]({'botID':botID})[_0x240c45(0x1db)]();_0x4be0fe&&(dbConfig[_0x240c45(0xfa)](_0x240c45(0xa3))[_0x240c45(0x7e)]({'botID':botID})[_0x240c45(0xce)]({'liquidity':_0x5f2b06})['write'](),config[_0x240c45(0x183)]=_0x5f2b06),logHistory(_0x240c45(0x15e),_0x240c45(0xd7)+Math[_0x240c45(0xf6)](_0x54378c[0x0]['number'])+'\x20'+_0x54378c[0x0][_0x240c45(0x134)]+'\x20'+(_0x54378c[0x0][_0x240c45(0x16c)]>0x0?'added':'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x240c45(0x1ce),emittedConfiguration());}else logger[_0x240c45(0x16f)](_0x240c45(0x102)+Math[_0x240c45(0xf6)](_0x54378c[0x0][_0x240c45(0x16c)])+'\x20'+_0x54378c[0x0][_0x240c45(0x134)]+'\x20'+(_0x54378c[0x0]['number']>0x0?'added':'removed'));transactionDetected=!![];}else logger[_0x240c45(0x16f)](_0x240c45(0xd7)+Math['abs'](_0x54378c[0x0][_0x240c45(0x16c)])+'\x20'+_0x54378c[0x0][_0x240c45(0x134)]+'\x20'+(_0x54378c[0x0][_0x240c45(0x16c)]>0x0?'added':_0x240c45(0x204))+_0x240c45(0x181));}currentCoins=_0x4d4ce7,currentCoinsAll=_0x21a0b9,await sleep(watchTransactionsInterval);}catch(_0x1696b6){if(!exchangeStopped)await handleError(_0x1696b6,_0x240c45(0x20c));}else await sleep(0x64);}}async function loadSymbols(){const _0x5a7c6d=_0x17f3a0;try{markets=await exchange[_0x5a7c6d(0xb7)](),allSymbols=[],Object[_0x5a7c6d(0x19e)](markets)[_0x5a7c6d(0x1aa)](_0x7274d3=>{const _0x96b595=_0x5a7c6d;_0x7274d3[0x1]['active']&&_0x7274d3[0x1][_0x96b595(0x1d3)]&&allSymbols[_0x96b595(0xc8)](_0x7274d3[0x0]);});}catch(_0x5cfaee){throw _0x5cfaee;}}function validateSymbols(_0x436152){const _0x35085f=_0x17f3a0;let _0x5529a8=[];return _0x436152[_0x35085f(0x1aa)](_0x259cc5=>{const _0x130ba7=_0x35085f;!allSymbols['includes'](_0x259cc5)?logHistory('error',_0x130ba7(0x9d)+_0x259cc5+_0x130ba7(0x1fb)):_0x5529a8['push'](_0x259cc5);}),_0x5529a8;}async function initclient(){const _0x569524=_0x17f3a0;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x569524(0x174),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x569524(0xe7),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4ba61b=getNormalizedPerformance();emitPerformance(_0x4ba61b),getStartingBalances(_0x4ba61b);}async function toggleBotMode(){const _0x131d90=_0x17f3a0;let _0x3cc665=dbConfig[_0x131d90(0xfa)](_0x131d90(0xa3))[_0x131d90(0x7e)]({'botID':botID})[_0x131d90(0x1db)]();if(_0x3cc665){const _0x3f4e3f=!_0x3cc665[_0x131d90(0x12b)];dbConfig['get'](_0x131d90(0xa3))[_0x131d90(0x7e)]({'botID':botID})['assign']({'headless':_0x3f4e3f})['write'](),config[_0x131d90(0x12b)]=_0x3f4e3f,proxyEmit(_0x131d90(0x1ce),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4ef0be=_0x17f3a0;process['send']({'updatebotmanager':!![]},_0x5644ee=>{}),logger[_0x4ef0be(0x16f)]('Headless:\x20'+config[_0x4ef0be(0x12b)]);}async function loadCoins(_0x19ebd3){const _0x56364c=_0x17f3a0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x83f9ee,_0x433a70=0x0,_0x12e95d=0x0;_0x19ebd3['forEach'](_0x33e6c9=>{const _0x2b4485=_0x3ec5;loading[_0x2b4485(0x17f)]['push'](_0x33e6c9);}),loadingCanceled=![];let _0x443c92=![];while(_0x83f9ee!=_0x19ebd3[_0x56364c(0xb0)]+maxLoadingProgress){_0x83f9ee=loadingProgress,_0x19ebd3[_0x56364c(0x1aa)](_0x3203a8=>{const _0x2c82fb=_0x56364c;if(global[_0x2c82fb(0x12e)][noslash(_0x3203a8)]){loading['remainingSymbols']=loading[_0x2c82fb(0x17f)][_0x2c82fb(0x128)](_0x39ba27=>_0x39ba27!=_0x3203a8);if(!watchedSymbols[_0x2c82fb(0x198)](_0x3203a8))watchedSymbols[_0x2c82fb(0xc8)](_0x3203a8);_0x83f9ee++;}}),loading[_0x56364c(0xbb)]=Math[_0x56364c(0x199)](_0x83f9ee/(_0x19ebd3[_0x56364c(0xb0)]+maxLoadingProgress)*0x64);loading[_0x56364c(0xbb)]!=0x64&&(_0x12e95d>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x12e95d>0x78*0x5&&!_0x443c92&&(_0x443c92=!![],logHistory(_0x56364c(0x9b),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x56364c(0x17f)][_0x56364c(0x1ad)](',\x20')+_0x56364c(0xca)),logHistory(_0x56364c(0x9b),_0x56364c(0x161)+loadCoinsRetryInterval/0xea60+_0x56364c(0x11f)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x4dceff=_0x56364c;process[_0x4dceff(0x10c)]({'stop':_0x4dceff(0xe8)},_0x5edc67=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x56364c(0x1a1)]=!![],emitLoadingProgress();break;}else _0x433a70!=loading[_0x56364c(0xbb)]&&(_0x433a70=loading['progress'],emitLoadingProgress()),_0x12e95d++,await sleep(0xc8);}_0x83f9ee==_0x19ebd3[_0x56364c(0xb0)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x56364c(0x18d),'live':_0x56364c(0x18e)},_0x332800=>{}),_0x443c92&&logHistory('success',_0x56364c(0x8b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xe9c2a5=_0x17f3a0;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0xe9c2a5(0x152)});}function emitLoadingProgress(){const _0x400da7=_0x17f3a0;proxyEmit(_0x400da7(0x10d),loading);}async function getFiat(){const _0x1d39e4=_0x17f3a0;let _0x14485d=global['ticker'][stablecoins[_0x1d39e4(0x82)][_0x1d39e4(0x134)]],_0x5a5d73=global[_0x1d39e4(0x12e)][stablecoins[_0x1d39e4(0x18b)][_0x1d39e4(0x134)]];return{'eur':Number(_0x14485d),'usd':Number(_0x5a5d73)};}function capitalize(_0x5e3370){const _0x525a34=_0x17f3a0;return _0x5e3370[_0x525a34(0x18f)](0x0,0x1)[_0x525a34(0x1b1)]()+_0x5e3370[_0x525a34(0x18f)](0x1);}function supportedExchanges(){const _0x9c6b75=_0x17f3a0,_0x245e82=['ws','fetchTickers','fetchTicker',_0x9c6b75(0xa9),_0x9c6b75(0x114),'cancelOrder',_0x9c6b75(0xcf),_0x9c6b75(0x1e9),_0x9c6b75(0x90),_0x9c6b75(0x11c)];let _0x2ef441=[],_0x266c47=[],_0xb5ea9f=ccxt[_0x9c6b75(0x1c8)]['exchanges'];_0xb5ea9f[_0x9c6b75(0x1aa)](_0x53b5a1=>{const _0x125f57=_0x9c6b75;try{const _0x804e0a=new ccxt[(_0x125f57(0x1c8))][_0x53b5a1]();_0x266c47['push'](_0x804e0a);}catch(_0x494bec){}}),_0x266c47['forEach'](_0xc6ad5c=>{const _0x3a65b3=_0x9c6b75;let _0x22f65b=0x0;_0x245e82[_0x3a65b3(0x1aa)](_0x2dfe2c=>{const _0x3e9d96=_0x3a65b3;_0x2dfe2c in _0xc6ad5c[_0x3e9d96(0x142)]&&_0xc6ad5c[_0x3e9d96(0x142)][_0x2dfe2c]&&_0x22f65b++;}),_0x22f65b==_0x245e82[_0x3a65b3(0xb0)]&&_0x2ef441[_0x3a65b3(0xc8)](capitalize(_0xc6ad5c['id']));});let _0x110fe7=[];return _0xb5ea9f['forEach'](_0x5c62e5=>{const _0x39aeb2=_0x9c6b75;_0x5c62e5=capitalize(_0x5c62e5);if(!_0x2ef441['includes'](_0x5c62e5))_0x110fe7[_0x39aeb2(0xc8)](_0x5c62e5);}),_0x2ef441;}function setStartDatePerformance(){const _0x210e8b=_0x17f3a0;if(config&&config['liquidity'][0x0]['changes'][_0x210e8b(0xb0)]!=0x0){const _0x1aaf2b=config[_0x210e8b(0x183)][0x0]['changes'];dbPerformance[_0x210e8b(0xfa)](_0x210e8b(0x154))[_0x210e8b(0x7e)]({'date':config[_0x210e8b(0x1ba)]})[_0x210e8b(0xce)]({'coins':_0x1aaf2b})[_0x210e8b(0xe3)]();}}async function recreateCoinResults(){const _0x2562de=_0x17f3a0;let _0x228ad9,_0x5e6aca=[];try{const _0xb25e49=fns[_0x2562de(0x1c2)](fns['parseISO'](config[_0x2562de(0x1ba)][_0x2562de(0x106)](/\//g,'-')),_0x2562de(0xc7));for(const _0x5098c5 of currentCoins){if(_0x5098c5[_0x2562de(0x134)]!=config[_0x2562de(0x9f)]){let _0x1ead97=0x0,_0x326c5e,_0x9fb993;_0x228ad9=await getAllEventOrders(_0x5098c5[_0x2562de(0x17e)]);if(_0x228ad9['length']>0x0)_0x228ad9['forEach'](_0xf8fde1=>{const _0x1b47fc=_0x2562de,_0x4e0ec8=_0x5098c5['symbol'][_0x1b47fc(0x198)](config[_0x1b47fc(0x9f)]+'/');_0x5e6aca[_0x1b47fc(0xc8)]({'datetime':_0xf8fde1[_0x1b47fc(0x1bf)],'coin':_0x5098c5[_0x1b47fc(0x134)],'symbol':_0x5098c5[_0x1b47fc(0x17e)],'side':_0xf8fde1[_0x1b47fc(0xbe)],'reverse':_0x4e0ec8,'amount':formatResult(_0xf8fde1['filled'],0x8),'filled':formatResult(_0xf8fde1[_0x1b47fc(0x191)],0x8),'price':formatResult(_0xf8fde1[_0x1b47fc(0x18c)],0x8)}),_0x1ead97=_0xf8fde1[_0x1b47fc(0xbe)]==_0x1b47fc(0x127)?_0x1ead97+_0xf8fde1[_0x1b47fc(0x191)]:_0x1ead97-_0xf8fde1['filled'];if(!_0x9fb993)_0x9fb993=_0xf8fde1[_0x1b47fc(0x18c)];});_0x326c5e=_0x5098c5[_0x2562de(0x16c)]-_0x1ead97;let _0x242b58;config[_0x2562de(0x183)][_0x2562de(0x1aa)](_0x58168c=>{const _0x4bde20=_0x2562de;!_0x242b58&&(_0x242b58=_0x58168c[_0x4bde20(0x196)]['find'](_0x42325e=>_0x42325e[_0x4bde20(0x134)]==_0x5098c5[_0x4bde20(0x134)]),_0x242b58&&(_0x326c5e=_0x242b58[_0x4bde20(0x16c)],_0x9fb993=_0x242b58[_0x4bde20(0x18c)]));});let _0x50b5de=dbCoinResults['get'](_0x2562de(0xdc))[_0x2562de(0x7e)]({'coin':_0x5098c5[_0x2562de(0x134)]})[_0x2562de(0x1db)]();_0x50b5de={'coin':_0x5098c5[_0x2562de(0x134)],'number':_0x326c5e,'breakeven':_0x9fb993,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2562de(0xfa)](_0x2562de(0xdc))[_0x2562de(0x7e)]({'coin':_0x5098c5[_0x2562de(0x134)]})[_0x2562de(0xce)](_0x50b5de)[_0x2562de(0xe3)]();}}_0x5e6aca[_0x2562de(0x1df)]((_0x4384ca,_0x1e84a0)=>_0x4384ca[_0x2562de(0x1bf)]>_0x1e84a0[_0x2562de(0x1bf)]?0x1:_0x1e84a0[_0x2562de(0x1bf)]>_0x4384ca['datetime']?-0x1:0x0);let _0x26961b=0x0;for(let _0x54604c of _0x5e6aca){await updateCoinResults(_0x54604c,!![]);}}catch(_0x1cdcc8){await handleError(_0x1cdcc8,_0x2562de(0x151));}}async function getAllEventOrders(_0x39be90){const _0x33d19c=_0x17f3a0;let _0x444d6c=[],_0x5639c7=dbLogs[_0x33d19c(0xfa)](_0x33d19c(0x97))['filter'](_0x2c8b4c=>{const _0x5ad2d9=_0x33d19c,_0x24470c=_0x2c8b4c['event'][_0x5ad2d9(0x184)]();return _0x24470c[_0x5ad2d9(0x198)](_0x39be90[_0x5ad2d9(0x184)]())&&(_0x24470c['includes'](_0x5ad2d9(0x197))&&_0x24470c[_0x5ad2d9(0x198)](_0x5ad2d9(0x95))||_0x24470c[_0x5ad2d9(0x198)](_0x5ad2d9(0x191))&&_0x24470c['includes'](_0x5ad2d9(0x95)));})['sortBy'](_0x33d19c(0x13e))['value']();return _0x5639c7[_0x33d19c(0x1aa)](_0x1c540b=>{const _0x21bdfa=_0x33d19c,_0x257970=_0x1c540b[_0x21bdfa(0x15b)]['includes'](_0x21bdfa(0x214))?_0x21bdfa(0x214):_0x21bdfa(0x127),_0xbf8461=/#([0-9]|\.)+\s/i,_0x446f71=Number(_0xbf8461['exec'](_0x1c540b[_0x21bdfa(0x15b)])[0x0][_0x21bdfa(0x210)](0x1)),_0x1eb08b=/@([0-9]|\.)+$/i,_0x4fc031=Number(_0x1eb08b[_0x21bdfa(0x92)](_0x1c540b[_0x21bdfa(0x15b)])[0x0][_0x21bdfa(0x210)](0x1));_0x444d6c[_0x21bdfa(0xc8)]({'datetime':_0x1c540b['time'],'coin':symbolToCoin(_0x39be90),'symbol':_0x39be90,'side':_0x257970,'amount':_0x446f71,'filled':_0x446f71,'price':_0x4fc031});}),_0x444d6c;}async function getAllOrders(_0x2c3b3f,_0x2a4cc7){const _0x1e5cee=_0x17f3a0;let _0x511c28=[];while(_0x2a4cc7<exchange[_0x1e5cee(0x7f)]()){const _0x3e027e=0x1f4;try{const _0x4af126=await exchange[_0x1e5cee(0x90)](_0x2c3b3f,_0x2a4cc7,_0x3e027e);if(_0x4af126[_0x1e5cee(0xb0)])_0x2a4cc7=_0x4af126[_0x4af126[_0x1e5cee(0xb0)]-0x1][_0x1e5cee(0x7b)]+0x1,_0x511c28=_0x511c28[_0x1e5cee(0xba)](_0x4af126);else break;}catch(_0x4f8041){await handleError(_0x4f8041,_0x1e5cee(0x216),_0x2c3b3f);}}return _0x511c28;}async function validate24hChanges(){const _0x273262=_0x17f3a0;for(const _0x1cfc5f of currentCoins){if(_0x1cfc5f[_0x273262(0x134)]!=config[_0x273262(0x9f)]){let _0x32a872;_0x1cfc5f[_0x273262(0x155)]?_0x32a872=formatResult((0x1/(global[_0x273262(0x10f)][noslash(_0x1cfc5f['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x32a872=global[_0x273262(0x10f)][noslash(_0x1cfc5f[_0x273262(0x17e)])],_0x32a872<config['change24h']&&(logHistory(_0x273262(0x9b),_0x1cfc5f[_0x273262(0x134)]+_0x273262(0x1fe)+_0x32a872+'%'),logHistory(_0x273262(0x9b),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x273262(0x7d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x74d33b,_0x19fd12){const _0x2ffad6=_0x17f3a0;if(!_0x74d33b)return!![];const _0x1c9a85=_0x19fd12['split']('.'),_0x2a3ee3=_0x74d33b['split']('.');for(var _0xad126=0x0;_0xad126<_0x2a3ee3[_0x2ffad6(0xb0)];_0xad126++){const _0x4a7c2c=~~_0x2a3ee3[_0xad126],_0x32ae5d=~~_0x1c9a85[_0xad126];if(_0x4a7c2c<_0x32ae5d)return!![];if(_0x4a7c2c>_0x32ae5d)return![];}return![];}async function oneTimeMigration(){const _0xfa240=_0x17f3a0;let _0x1744ff=dbLogs[_0xfa240(0xfa)]('version')[_0xfa240(0x1db)]();if(isOlderVersion(_0x1744ff,_0xfa240(0xea))){let _0x31d2a2=[];const _0x23b66d=dbLogs['get'](_0xfa240(0x97))[_0xfa240(0x1db)]();_0x23b66d[_0xfa240(0x1aa)](_0x3691e7=>{const _0x505633=_0xfa240;_0x31d2a2['push']({'time':_0x3691e7[_0x505633(0x13e)],'type':_0x3691e7[_0x505633(0x80)],'event':_0x3691e7['event']});}),dbLogs[_0xfa240(0xfa)](_0xfa240(0x97))[_0xfa240(0xce)](_0x31d2a2)[_0xfa240(0xe3)]();}let _0x7ddeb7=dbConfig[_0xfa240(0xfa)](_0xfa240(0x7a))['value']();if(isOlderVersion(_0x7ddeb7,_0xfa240(0xea))){let _0x520f88=dbConfig['get'](_0xfa240(0xa3))[_0xfa240(0x7e)]({'botID':botID})['value']();if(_0x520f88){let _0x30b3d6=[];_0x520f88[_0xfa240(0x20d)][_0xfa240(0x1aa)](_0x40492c=>{const _0x3ccb47=_0xfa240;_0x30b3d6['push']({'coin':_0x40492c['coin'],'number':_0x40492c['startnumber'],'price':_0x40492c['startprice']}),delete _0x40492c[_0x3ccb47(0x12d)],delete _0x40492c[_0x3ccb47(0x14d)];});if(_0x30b3d6['length']!==0x0)fs['writeFile'](configbackuppath+(_0xfa240(0x94)+botID+_0xfa240(0x162)),JSON[_0xfa240(0xec)](_0x30b3d6,null,0x4),function(_0x4c76f3){if(_0x4c76f3){}});const _0x1a8aba=(_0x58c6ed,_0x412fe2)=>{const _0x1b6abe=_0xfa240;let _0x5b9140=[];_0x412fe2['forEach'](_0xdabd3b=>{const _0x3c5eec=_0x3ec5,_0x4c6fd8=_0x58c6ed['find'](_0x522545=>_0x522545['coin']==_0xdabd3b[_0x3c5eec(0x134)]);if(!_0x4c6fd8)_0x5b9140['push'](_0xdabd3b);});let _0x15d087=[];return _0x58c6ed[_0x1b6abe(0x1aa)](_0x4e59da=>{const _0x18d919=_0x1b6abe,_0x5432ef=_0x412fe2[_0x18d919(0x7e)](_0x30c315=>_0x30c315[_0x18d919(0x134)]==_0x4e59da[_0x18d919(0x134)]);if(!_0x5432ef||_0x5432ef[_0x18d919(0x16c)]==0x0&&_0x4e59da[_0x18d919(0x16c)]!=0x0)_0x15d087['push'](_0x4e59da);}),{'missingDay1':_0x5b9140,'notInDay2':_0x15d087};},_0x276dde=dbPerformance['get'](_0xfa240(0x154))['cloneDeep']()['value']();if(_0x276dde[_0xfa240(0xb0)]>0x1){const {missingDay1:_0x555093,notInDay2:_0xb3406}=_0x1a8aba(_0x30b3d6,_0x276dde[0x1]['coins']);_0x30b3d6=[..._0x30b3d6,..._0x555093],_0xb3406[_0xfa240(0x1aa)](_0x229417=>{const _0xda4f83=_0xfa240;let _0x1f02dc=_0x30b3d6['findIndex'](_0x52ed26=>_0x52ed26[_0xda4f83(0x134)]==_0x229417['coin']);_0x1f02dc!=-0x1&&_0x30b3d6[_0xda4f83(0xa8)](_0x1f02dc,0x1);});}_0x30b3d6[_0xfa240(0x1df)]((_0x3865a0,_0x1ad80a)=>_0x3865a0['coin']>_0x1ad80a[_0xfa240(0x134)]?0x1:_0x1ad80a['coin']>_0x3865a0[_0xfa240(0x134)]?-0x1:0x0);let _0x2eb50c=[{'date':_0x520f88[_0xfa240(0x1ba)],'changes':_0x30b3d6}];_0x276dde[_0xfa240(0xb0)]>0x2&&_0x276dde[_0xfa240(0x1aa)]((_0x3af2f0,_0x490454)=>{const _0x26db86=_0xfa240;if(_0x490454>0x0&&_0x490454<_0x276dde[_0x26db86(0xb0)]-0x1){const {missingDay1:_0x317554,notInDay2:_0x384afb}=_0x1a8aba(_0x276dde[_0x490454]['coins'],_0x276dde[_0x490454+0x1][_0x26db86(0xdc)]);_0x30b3d6=[],(_0x317554[_0x26db86(0xb0)]!=0x0||_0x384afb[_0x26db86(0xb0)]!=0x0)&&(_0x317554[_0x26db86(0xb0)]!=0x0&&_0x30b3d6[_0x26db86(0xc8)](..._0x317554),_0x384afb[_0x26db86(0xb0)]!=0x0&&(_0x384afb['forEach'](_0x134f27=>{const _0x374bf6=_0x26db86;_0x134f27[_0x374bf6(0x16c)]=-_0x134f27['number'];}),_0x30b3d6[_0x26db86(0xc8)](..._0x384afb)),_0x30b3d6[_0x26db86(0x1df)]((_0x489af5,_0x4a7b59)=>_0x489af5['coin']>_0x4a7b59[_0x26db86(0x134)]?0x1:_0x4a7b59[_0x26db86(0x134)]>_0x489af5[_0x26db86(0x134)]?-0x1:0x0),_0x2eb50c[_0x26db86(0xc8)]({'date':_0x276dde[_0x490454+0x1]['date'],'changes':_0x30b3d6}));}}),dbConfig[_0xfa240(0xfa)](_0xfa240(0xa3))[_0xfa240(0x7e)]({'botID':botID})[_0xfa240(0xce)]({..._0x520f88,'liquidity':_0x2eb50c})[_0xfa240(0xe3)]();}}if(isOlderVersion(_0x7ddeb7,_0xfa240(0x185))){let _0x3c5033=dbConfig['get'](_0xfa240(0xa3))[_0xfa240(0x7e)]({'botID':botID})[_0xfa240(0x1db)]();if(_0x3c5033){const _0x25a910=_0x3c5033[_0xfa240(0xe5)],_0xfa243b=_0x25a910?capitalize(_0x25a910):_0xfa240(0x103);dbConfig['get'](_0xfa240(0xa3))[_0xfa240(0x7e)]({'botID':botID})['assign']({'exchange':_0xfa243b})['write']();}}let _0x24f708=dbPerformance[_0xfa240(0xfa)](_0xfa240(0x7a))['value']();isOlderVersion(_0x24f708,_0xfa240(0xea))&&setStartDatePerformance();let _0x254f26=dbCoinResults[_0xfa240(0xfa)](_0xfa240(0x7a))[_0xfa240(0x1db)]();if(isOlderVersion(_0x254f26,_0xfa240(0x182))){let _0x16522b=dbCoinResults[_0xfa240(0xfa)](_0xfa240(0xdc))[_0xfa240(0x1db)]();if(_0x16522b['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x19e632=_0x17f3a0;dbConfig[_0x19e632(0x1c0)](_0x19e632(0x7a),serverversion)[_0x19e632(0xe3)](),dbPerformance[_0x19e632(0x1c0)]('version',serverversion)[_0x19e632(0xe3)](),dbLogs[_0x19e632(0x1c0)](_0x19e632(0x7a),serverversion)[_0x19e632(0xe3)](),dbCoinResults['set'](_0x19e632(0x7a),serverversion)['write']();}function getConfiguration(_0x7a1c46){const _0x4ae2c6=_0x17f3a0;let _0x211467=dbConfig[_0x4ae2c6(0xfa)](_0x4ae2c6(0xa3))[_0x4ae2c6(0x7e)]({'botID':_0x7a1c46})[_0x4ae2c6(0x1db)]();if(_0x211467){let _0x466863=![];typeof _0x211467['threshold']==_0x4ae2c6(0x203)&&(_0x211467={..._0x211467,'threshold':Number(_0x211467[_0x4ae2c6(0xbd)])},_0x466863=!![]),_0x211467[_0x4ae2c6(0xf2)]==undefined&&(_0x211467={..._0x211467,'change24h':-0x14},_0x466863=!![]),_0x211467[_0x4ae2c6(0xac)]==undefined&&(_0x211467={..._0x211467,'fiat':_0x4ae2c6(0xfc)},_0x466863=!![]),_0x211467[_0x4ae2c6(0x146)]==undefined&&(_0x211467={..._0x211467,'onepagemode':settings[_0x4ae2c6(0x146)]},_0x466863=!![]),_0x211467['colorscheme']==undefined&&(_0x211467={..._0x211467,'colorscheme':_0x4ae2c6(0x1b3)},_0x466863=!![]),_0x211467[_0x4ae2c6(0xc1)]==undefined&&(_0x211467={..._0x211467,'autoliquidity':!![]},_0x466863=!![]),_0x466863&&(_0x211467={'botID':_0x211467['botID'],'exchange':_0x211467['exchange'],'apiKey':_0x211467[_0x4ae2c6(0xd5)],'apiSecret':_0x211467[_0x4ae2c6(0x1b8)],'apiPassword':_0x211467[_0x4ae2c6(0x101)],'basecoin':_0x211467[_0x4ae2c6(0x9f)],'botname':_0x211467[_0x4ae2c6(0x120)],'showname':_0x211467[_0x4ae2c6(0x135)],'threshold':_0x211467[_0x4ae2c6(0xbd)],'ordertype':_0x211467[_0x4ae2c6(0x15f)],'timeout':_0x211467[_0x4ae2c6(0x1c5)],'fiat':_0x211467['fiat'],'startdate':_0x211467[_0x4ae2c6(0x1ba)],'recreate':_0x211467[_0x4ae2c6(0x201)],'timeshift':_0x211467[_0x4ae2c6(0x13b)],'onepagemode':_0x211467[_0x4ae2c6(0x146)],'headless':_0x211467[_0x4ae2c6(0x12b)],'cooldown':_0x211467['cooldown'],'change24h':_0x211467[_0x4ae2c6(0xf2)],'emojibuy':_0x211467['emojibuy'],'emojisell':_0x211467[_0x4ae2c6(0x1a7)],'colorscheme':_0x211467[_0x4ae2c6(0x8f)],'portfolio':_0x211467[_0x4ae2c6(0x20d)],'autoliquidity':_0x211467[_0x4ae2c6(0xc1)],'liquidity':_0x211467[_0x4ae2c6(0x183)],'openOrders':_0x211467[_0x4ae2c6(0xcb)]},dbConfig['get'](_0x4ae2c6(0xa3))['remove']()['write'](),dbConfig[_0x4ae2c6(0xfa)](_0x4ae2c6(0xa3))[_0x4ae2c6(0xc8)](_0x211467)[_0x4ae2c6(0xe3)]());}else _0x211467={'botID':_0x7a1c46,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4ae2c6(0x1a3)+_0x7a1c46,'showname':![],'threshold':0x3,'ordertype':_0x4ae2c6(0x197),'timeout':0x14,'fiat':_0x4ae2c6(0xfc),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4ae2c6(0x13b)],'onepagemode':settings[_0x4ae2c6(0x146)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4ae2c6(0x1b3),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x211467;}function emittedConfiguration(){const _0x29d438=_0x17f3a0;let _0x19838c;if(config[_0x29d438(0xd5)]=='')_0x19838c={...config,'configstate':_0x29d438(0x11d)};else config['apiKey']=='***'?_0x19838c={...config,'configstate':_0x29d438(0x153)}:(_0x19838c={...config,'apiKey':'************','apiSecret':_0x29d438(0xbf)},config['apiPassword']&&(_0x19838c[_0x29d438(0x101)]=_0x29d438(0xbf)));return _0x19838c;}function getSettings(){const _0x31b6a6=_0x17f3a0;return dbSettings[_0x31b6a6(0xfa)](_0x31b6a6(0xbc))['value']();}function getSecure(){const _0x433a17=_0x17f3a0;return dbSecure['get'](_0x433a17(0x11b))[_0x433a17(0x1db)]()||{};}function updateTimeshift(_0xa72879){const _0x991482=_0x17f3a0;let _0x5d7b40=dbConfig['get']('bot')[_0x991482(0x7e)]({'botID':botID})[_0x991482(0x1db)]();_0x5d7b40&&dbConfig[_0x991482(0xfa)](_0x991482(0xa3))['find']({'botID':botID})[_0x991482(0xce)]({'timeshift':_0xa72879})[_0x991482(0xe3)](),config['timeshift']=_0xa72879,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x2d306b){const _0x22420b=_0x17f3a0;let _0x56237c=dbConfig['get']('bot')[_0x22420b(0x7e)]({'botID':botID})[_0x22420b(0x1db)]();_0x56237c&&dbConfig[_0x22420b(0xfa)](_0x22420b(0xa3))['find']({'botID':botID})[_0x22420b(0xce)]({'onepagemode':_0x2d306b})[_0x22420b(0xe3)](),config[_0x22420b(0x146)]=_0x2d306b,proxyEmit(_0x22420b(0x1ce),emittedConfiguration());}async function storeConfiguration(_0x297d3f){const _0x13f96d=_0x17f3a0;logger[_0x13f96d(0x16f)](_0x13f96d(0x1bb));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x13f96d(0xee));let _0xbefa29=![],_0x2ce519=![],_0x36b04e=[];_0x297d3f[_0x13f96d(0x20d)][_0x13f96d(0x1aa)](_0x42b65f=>{const _0x4396d0=_0x13f96d;if(!_0x42b65f['excluded']&&_0x42b65f[_0x4396d0(0x134)]!=_0x297d3f[_0x4396d0(0x9f)])_0x36b04e[_0x4396d0(0xc8)](_0x42b65f['symbol']);}),_0x36b04e['forEach'](_0xf322f1=>{const _0x206274=_0x13f96d,_0x222386=currentCoins['find'](_0x4f486b=>_0x4f486b[_0x206274(0x17e)]==_0xf322f1);!_0x222386&&(_0xbefa29=!![]);}),currentCoins[_0x13f96d(0x1aa)](_0x3ead31=>{const _0x45ae44=_0x13f96d;if(_0x3ead31[_0x45ae44(0x134)]!=config[_0x45ae44(0x9f)]){const _0x2ab888=_0x36b04e['find'](_0x14e590=>_0x14e590==_0x3ead31['symbol']);!_0x2ab888&&(_0xbefa29=!![]);}}),_0x297d3f['portfolio'][_0x13f96d(0x1aa)](_0x5a0dbf=>{const _0xf16f4d=_0x13f96d,_0x3ee877=config[_0xf16f4d(0x20d)][_0xf16f4d(0x7e)](_0x526d86=>_0x526d86[_0xf16f4d(0x134)]==_0x5a0dbf[_0xf16f4d(0x134)]);if(_0x3ee877&&_0x5a0dbf[_0xf16f4d(0x148)]!=_0x3ee877[_0xf16f4d(0x148)])_0x2ce519=!![];});let _0x389215=dbConfig['get'](_0x13f96d(0xa3))[_0x13f96d(0x7e)]({'botID':botID})[_0x13f96d(0x1db)]();_0x297d3f={..._0x297d3f,'apiKey':crypt[_0x13f96d(0x99)](secure[_0x13f96d(0x211)],_0x297d3f[_0x13f96d(0xd5)])[_0x13f96d(0xc4)],'apiSecret':crypt[_0x13f96d(0x99)](secure['privateKey'],_0x297d3f[_0x13f96d(0x1b8)])[_0x13f96d(0xc4)]};_0x297d3f[_0x13f96d(0x101)]&&(_0x297d3f[_0x13f96d(0x101)]=crypt['decrypt'](secure[_0x13f96d(0x211)],_0x297d3f['apiPassword'])[_0x13f96d(0xc4)]);let _0x5beb4b=![];if(_0x389215){_0x297d3f['apiKey']==_0x13f96d(0xbf)?_0x297d3f[_0x13f96d(0xd5)]=config[_0x13f96d(0xd5)]:_0x5beb4b=!![];_0x297d3f[_0x13f96d(0x1b8)]=='************'?_0x297d3f[_0x13f96d(0x1b8)]=config['apiSecret']:_0x5beb4b=!![];if(_0x297d3f[_0x13f96d(0x101)]==_0x13f96d(0xbf))_0x297d3f['apiPassword']=config[_0x13f96d(0x101)];else{if(_0x297d3f[_0x13f96d(0x101)])_0x5beb4b=!![];}dbConfig[_0x13f96d(0xfa)](_0x13f96d(0xa3))[_0x13f96d(0x7e)]({'botID':botID})['assign'](_0x297d3f)[_0x13f96d(0xe3)]();}else dbConfig[_0x13f96d(0xfa)](_0x13f96d(0xa3))['push'](_0x297d3f)['write'](),_0x5beb4b=!![],process['send']({'status':_0x13f96d(0x18d),'live':_0x13f96d(0x18e)},_0x498640=>{});process[_0x13f96d(0x10c)]({'botname':_0x297d3f[_0x13f96d(0x120)]},_0xa99f7b=>{}),config={..._0x297d3f},updateBotManager(),proxyEmit(_0x13f96d(0x1da)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5beb4b)await reset(!![]);else _0xbefa29||_0x2ce519?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x13f96d(0x16f)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x35a44e){const _0x735764=_0x17f3a0,_0x4933db={...config,'headless':_0x35a44e['headless']};let _0x250562=dbConfig[_0x735764(0xfa)](_0x735764(0xa3))[_0x735764(0x7e)]({'botID':botID})[_0x735764(0x1db)]();_0x250562&&dbConfig['get'](_0x735764(0xa3))[_0x735764(0x7e)]({'botID':botID})[_0x735764(0xce)](_0x4933db)[_0x735764(0xe3)](),config={..._0x4933db},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5a8fd3){const _0x2f911d=_0x17f3a0,_0x36b39d={...config,'fiat':_0x5a8fd3};let _0x186e8a=dbConfig[_0x2f911d(0xfa)](_0x2f911d(0xa3))[_0x2f911d(0x7e)]({'botID':botID})[_0x2f911d(0x1db)]();_0x186e8a&&dbConfig['get']('bot')[_0x2f911d(0x7e)]({'botID':botID})[_0x2f911d(0xce)](_0x36b39d)[_0x2f911d(0xe3)](),config={..._0x36b39d},proxyEmit(_0x2f911d(0x1ce),emittedConfiguration());}function resetHistory(){const _0x5cb7c7=_0x17f3a0;logger[_0x5cb7c7(0x158)]('Resetting\x20bot\x20history');try{if(fs[_0x5cb7c7(0x1b6)](path[_0x5cb7c7(0x1ad)](configpath,_0x5cb7c7(0xf9)+botID+_0x5cb7c7(0xe9))))fs['unlinkSync'](path['join'](configpath,_0x5cb7c7(0xf9)+botID+_0x5cb7c7(0xe9)));if(fs[_0x5cb7c7(0x1b6)](path['join'](configpath,'bot-'+botID+_0x5cb7c7(0x86))))fs[_0x5cb7c7(0x91)](path[_0x5cb7c7(0x1ad)](configpath,_0x5cb7c7(0xf9)+botID+_0x5cb7c7(0x86)));if(fs['existsSync'](path[_0x5cb7c7(0x1ad)](configpath,_0x5cb7c7(0xf9)+botID+_0x5cb7c7(0x144))))fs[_0x5cb7c7(0x91)](path[_0x5cb7c7(0x1ad)](configpath,_0x5cb7c7(0xf9)+botID+_0x5cb7c7(0x144)));}catch(_0x897a00){if(_0x897a00)logger[_0x5cb7c7(0x158)]('Error\x20while\x20deleting\x20files:\x20',_0x897a00);}const _0x10f3b5=getDate();let _0xea87c9=[];currentCoins[_0x5cb7c7(0x1aa)](_0x390370=>{const _0x3a2441=_0x5cb7c7;_0xea87c9[_0x3a2441(0xc8)]({'coin':_0x390370[_0x3a2441(0x134)],'number':_0x390370[_0x3a2441(0x16c)],'price':_0x390370[_0x3a2441(0x19b)]});});let _0x1fa550=dbConfig[_0x5cb7c7(0xfa)](_0x5cb7c7(0xa3))[_0x5cb7c7(0x7e)]({'botID':botID})[_0x5cb7c7(0x1db)]();_0x1fa550&&(dbConfig['get']('bot')[_0x5cb7c7(0x7e)]({'botID':botID})[_0x5cb7c7(0xce)]({'liquidity':[{'date':_0x10f3b5,'changes':_0xea87c9}]})[_0x5cb7c7(0xe3)](),config[_0x5cb7c7(0x183)]=[]),process[_0x5cb7c7(0x10c)]({'stop':_0x5cb7c7(0xe8)},_0x146c2a=>{});}function noslash(_0x1a7463){const _0x35e79c=_0x17f3a0;return _0x1a7463[_0x35e79c(0x106)]('/','');}function updateHighestFee(_0x892cfc){const _0x3731dc=_0x17f3a0;if(_0x892cfc[_0x3731dc(0x155)]){let _0x237fe6={'filled':_0x892cfc[_0x3731dc(0x191)]*_0x892cfc['price'],'amount':_0x892cfc[_0x3731dc(0x191)]*_0x892cfc[_0x3731dc(0x18c)],'side':_0x892cfc['side']==_0x3731dc(0x214)?_0x3731dc(0x127):_0x3731dc(0x214),'price':0x1/_0x892cfc[_0x3731dc(0x18c)]};_0x892cfc={..._0x892cfc,..._0x237fe6};}const _0xaa916f=defaultFee*_0x892cfc['filled']*_0x892cfc['price'];lastFees[_0x3731dc(0x8a)][_0x3731dc(0xb0)]===0x14&&lastFees[_0x3731dc(0x8a)][_0x3731dc(0x19a)](),lastFees[_0x3731dc(0x8a)]['push'](_0xaa916f),lastFees['highest']=Math[_0x3731dc(0xed)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1eef79){const _0x5d783b=_0x17f3a0;logger[_0x5d783b(0x16f)](_0x5d783b(0x83)+_0x1eef79['symbol']+_0x5d783b(0x13d)+_0x1eef79[_0x5d783b(0x1ec)]+_0x5d783b(0x13d)+_0x1eef79[_0x5d783b(0x191)]+_0x5d783b(0x176)+_0x1eef79[_0x5d783b(0x190)]+_0x5d783b(0x13d)+_0x1eef79['id']);let _0x15ba3b=_0x1eef79['status'],_0x33271c=![];currentCoins[_0x5d783b(0x1aa)](_0x3c6c28=>{const _0x3d903f=_0x5d783b;_0x3c6c28[_0x3d903f(0x17e)]==_0x1eef79[_0x3d903f(0x17e)]&&(_0x33271c=!![]);});if(!_0x33271c)return;const _0x26dfbf=currentCoins[_0x5d783b(0x7e)](_0x1a54c9=>_0x1a54c9[_0x5d783b(0x17e)]==_0x1eef79['symbol']),_0xdae08c=_0x728603=>{if(_0x26dfbf)_0x26dfbf['orderstatus']=_0x728603;};if(_0x15ba3b==_0x5d783b(0x110))_0xdae08c(_0x5d783b(0x110));else{if(_0x15ba3b==_0x5d783b(0x17a)){_0xdae08c(_0x5d783b(0x17a));const _0x569367=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x569367,await getOpenOrders(),handleOpenOrders();}else{if(_0x15ba3b=='closed'){let _0x508311=![];if(lastOrders)for(const _0x3e2c0d of lastOrders){const _0x206fbf=0xc8,_0x39b84d=0x1388;let _0x3cab42=0x0;while(!_0x3e2c0d[_0x5d783b(0xd2)]&&_0x3cab42*_0x206fbf<_0x39b84d){_0x3cab42++,await sleep(_0x206fbf);}if(_0x3cab42>0x0)logger[_0x5d783b(0x16f)](_0x5d783b(0x1c1)+_0x3cab42*_0x206fbf/0x3e8+_0x5d783b(0x186));if(_0x3e2c0d[_0x5d783b(0xd2)]==_0x1eef79['id']){logger[_0x5d783b(0x16f)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x1eef79['id']),_0x508311=!![];if(_0x3e2c0d[_0x5d783b(0x191)]==0x0){logger['debug'](_0x5d783b(0xaf)+_0x1eef79['id']);if(_0x1eef79[_0x5d783b(0x109)])_0x3e2c0d[_0x5d783b(0x18c)]=_0x1eef79[_0x5d783b(0x109)];else{if(_0x1eef79[_0x5d783b(0x18c)])_0x3e2c0d[_0x5d783b(0x18c)]=_0x1eef79[_0x5d783b(0x18c)];else{}}_0x3e2c0d[_0x5d783b(0x191)]=_0x1eef79[_0x5d783b(0x191)],updateHighestFee(_0x3e2c0d),_0xdae08c('filled'),await validateOrders();if(lockOrders==ORDERS[_0x5d783b(0x192)]){const _0x1982ef=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1982ef;}_0x3e2c0d[_0x5d783b(0xb1)]={'currency':_0x1eef79[_0x5d783b(0xb1)]?_0x1eef79[_0x5d783b(0xb1)][_0x5d783b(0x1e1)]:null,'cost':_0x1eef79[_0x5d783b(0xb1)]?_0x1eef79[_0x5d783b(0xb1)][_0x5d783b(0x20b)]:0x0},await updateCoinResults(_0x3e2c0d);}}}if(!_0x508311){logger[_0x5d783b(0x16f)](_0x5d783b(0xb2)+_0x1eef79['id']),_0xdae08c('filled');const _0x2c22ba=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2c22ba,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x37f87f=JSON['parse'](lastBalances['portfolio']);const _0x22863f=_0x37f87f[_0x5d783b(0x7e)](_0x5c2ba5=>_0x5c2ba5['symbol']==_0x1eef79[_0x5d783b(0x17e)]);if(_0x22863f){if(_0x15ba3b=='open')_0x22863f['orderstatus']=_0x22863f['orderstatus']=='filled'?_0x5d783b(0x191):_0x5d783b(0x110);else{if(_0x15ba3b==_0x5d783b(0x17a))_0x22863f[_0x5d783b(0x1f0)]=_0x22863f[_0x5d783b(0x1f0)]=='filled'?'filled':'canceled';else _0x15ba3b=='closed'&&(_0x22863f[_0x5d783b(0x1f0)]=_0x5d783b(0x191));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5d783b(0xec)](_0x37f87f)},proxyEmit(_0x5d783b(0xe7),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x117c5d=_0x17f3a0;await getOpenOrders();let _0x16ad74=![];currentCoins[_0x117c5d(0x1aa)](_0x3cfda8=>{const _0x5d412d=_0x117c5d;_0x16ad74=allOpenOrders['find'](_0x18ab41=>_0x18ab41['symbol']==_0x3cfda8[_0x5d412d(0x17e)]),_0x3cfda8[_0x5d412d(0x1f0)]=_0x16ad74?_0x5d412d(0x110):'none';});}async function getCoins(_0x33b91e=0x0,_0x577d20=!![],_0x27c0ff=config['basecoin']){const _0x2e145e=_0x17f3a0;let _0x55b99b,_0x46c9a0=[],_0x40bba0=[],_0x2a1229=[];if(_0x33b91e)await sleep(_0x33b91e);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x55b99b=await exchange[_0x2e145e(0x11c)](),mybalances=_0x55b99b[_0x2e145e(0x167)];for(const [_0x597117,_0x45a1c9]of Object[_0x2e145e(0x19e)](mybalances)){_0x2a1229[_0x2e145e(0xc8)](_0x597117);}config[_0x2e145e(0x20d)]['forEach'](_0x38d3c2=>{const _0xba491d=_0x2e145e;!_0x2a1229[_0xba491d(0x198)](_0x38d3c2['coin'])&&(mybalances[_0x38d3c2[_0xba491d(0x134)]]=0x0);});if(_0x27c0ff=='')for(const [_0x450adc,_0x495e18]of Object['entries'](mybalances)){_0x495e18!=0x0&&_0x46c9a0[_0x2e145e(0xc8)]({'coin':_0x450adc});}else{let _0x2a0fd9=![];for(const [_0x2911b7,_0x30c701]of Object[_0x2e145e(0x19e)](mybalances)){const _0x1124fa=config['portfolio'][_0x2e145e(0x7e)](_0x44c364=>_0x44c364[_0x2e145e(0x134)]==_0x2911b7),_0x2b69d1=_0x2911b7+'/'+_0x27c0ff,_0x595602=_0x27c0ff+'/'+_0x2911b7,_0x5f02d0=currentCoins[_0x2e145e(0x7e)](_0x27c59b=>_0x27c59b[_0x2e145e(0x134)]==_0x2911b7);_0x2a0fd9=![];if((_0x30c701!=0x0||_0x1124fa)&&(allSymbols[_0x2e145e(0x198)](_0x2b69d1)||_0x2911b7==_0x27c0ff))_0x46c9a0[_0x2e145e(0xc8)]({'coin':_0x2911b7,'symbol':_0x2b69d1,'reverse':![],'number':Math['max'](_0x30c701+(_0x1124fa&&_0x1124fa[_0x2e145e(0x148)]||0x0),0x0),'orderstatus':_0x5f02d0?_0x5f02d0[_0x2e145e(0x1f0)]:'none'});else{if((_0x30c701!=0x0||_0x1124fa)&&allSymbols[_0x2e145e(0x198)](_0x595602))_0x46c9a0[_0x2e145e(0xc8)]({'coin':_0x2911b7,'symbol':_0x595602,'reverse':!![],'number':Math[_0x2e145e(0xed)](_0x30c701+(_0x1124fa&&_0x1124fa['offset']||0x0),0x0),'orderstatus':_0x5f02d0?_0x5f02d0[_0x2e145e(0x1f0)]:'none'});else _0x1124fa&&_0x46c9a0['push']({'coin':_0x1124fa['coin'],'symbol':_0x1124fa['symbol'],'reverse':_0x1124fa[_0x2e145e(0x155)],'number':0x0,'orderstatus':_0x2e145e(0x116)});}}}}catch(_0x2f3903){if(!_0x577d20)handleErrorNoStop(_0x2f3903,_0x2e145e(0x107));else await handleError(_0x2f3903,_0x2e145e(0x107));}return _0x40bba0=cloneDeep(_0x46c9a0),_0x46c9a0=_0x46c9a0[_0x2e145e(0x128)](_0x1b13f9=>{const _0x481d55=_0x2e145e,_0x20d094=config[_0x481d55(0x20d)][_0x481d55(0x7e)](_0xc86536=>_0xc86536[_0x481d55(0x134)]==_0x1b13f9[_0x481d55(0x134)]);return _0x20d094&&!_0x20d094[_0x481d55(0x88)];}),[_0x46c9a0,_0x40bba0];}async function getCoinNumber(_0x4cb94e){const _0x15ea8e=_0x17f3a0;let _0x3967ed;try{const _0x3eba47=await exchange[_0x15ea8e(0x11c)]();_0x3967ed=_0x3eba47['total'][_0x4cb94e];}catch(_0x6b9fe9){await handleError(_0x6b9fe9,'getCoinNumber()');}return _0x3967ed;}async function getOpenOrders(){const _0x2f00fb=_0x17f3a0;let _0x496eab;allOpenOrders=[];try{for(const _0x488d00 of config['portfolio']){!_0x488d00[_0x2f00fb(0x88)]&&_0x488d00[_0x2f00fb(0x134)]!=config['basecoin']&&(_0x496eab=await exchange[_0x2f00fb(0x1e9)](_0x488d00[_0x2f00fb(0x17e)]),_0x496eab['length']>0x0&&allOpenOrders['push'](_0x496eab[0x0]));}}catch(_0x3fd260){await handleError(_0x3fd260,_0x2f00fb(0x1a2));}}async function handleOpenOrders(_0x57a796=0x0){const _0x664a7a=_0x17f3a0;allOpenOrders[_0x664a7a(0xb0)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x57a796==0x0?(logger[_0x664a7a(0x16f)](_0x664a7a(0xa4)),_0x57a796++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x664a7a(0x16f)](_0x664a7a(0x1f2)),validateOrders(_0x664a7a(0xdf))));}async function testAPI(_0x53ec1b){const _0x54f0b0=_0x17f3a0,_0x403cd2=ccxt[_0x54f0b0(0x1c8)][_0x53ec1b[_0x54f0b0(0xe5)][_0x54f0b0(0x184)]()],_0x5bfe5c=new _0x403cd2({'apiKey':_0x53ec1b[_0x54f0b0(0xd5)],'secret':_0x53ec1b[_0x54f0b0(0x1b8)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x54f0b0(0x1d3)}});if(_0x53ec1b[_0x54f0b0(0x101)])_0x5bfe5c[_0x54f0b0(0x13f)]=_0x53ec1b[_0x54f0b0(0x101)];try{await _0x5bfe5c['loadMarkets']();}catch(_0x1ac311){throw _0x1ac311;}}function cloneDeep(_0x4c3c44){const _0x37f57e=_0x17f3a0;return JSON[_0x37f57e(0x1e6)](JSON['stringify'](_0x4c3c44));}async function getPortfolio(_0x381175){const _0x3427d2=_0x17f3a0;let _0x20c91b=[],_0x23ae0d=[],_0x51273b=[],_0x4d7f5e;if(_0x381175['apiKey']!==_0x3427d2(0xbf)||_0x381175[_0x3427d2(0x1b8)]!==_0x3427d2(0xbf)||_0x381175['apiPassword']&&_0x381175[_0x3427d2(0x101)]!==_0x3427d2(0xbf)){if(config[_0x3427d2(0xe5)]){if(_0x381175['apiKey']==_0x3427d2(0xbf))_0x381175['apiKey']=config[_0x3427d2(0xd5)];if(_0x381175[_0x3427d2(0x1b8)]==_0x3427d2(0xbf))_0x381175['apiSecret']=config[_0x3427d2(0x1b8)];if(_0x381175['apiPassword']==_0x3427d2(0xbf))_0x381175['apiPassword']=config[_0x3427d2(0x101)];try{await testAPI(_0x381175);}catch(_0x33f734){if(_0x33f734[_0x3427d2(0x1a6)]()[_0x3427d2(0x198)](_0x3427d2(0x9a))){logger[_0x3427d2(0x16f)](_0x3427d2(0x121)),proxyEmit('portfolio',![]);return;}else{handleError(_0x33f734,_0x3427d2(0xa7));return;}}}await initExchange(_0x381175[_0x3427d2(0xe5)],_0x381175[_0x3427d2(0xd5)],_0x381175[_0x3427d2(0x1b8)],_0x381175[_0x3427d2(0x101)]);try{await loadSymbols();}catch(_0x90b641){if(_0x90b641[_0x3427d2(0x1a6)]()['includes'](_0x3427d2(0x9a))){proxyEmit('portfolio',![]);return;}else{handleError(_0x90b641,_0x3427d2(0x10e));return;}}const _0x1a4bbf=await getCoins(0x0,![],_0x381175[_0x3427d2(0x9f)]);_0x51273b=cloneDeep(_0x1a4bbf[0x1]);}else{const _0x113b76=await getCoins();_0x51273b=cloneDeep(_0x113b76[0x1]);}if(_0x381175[_0x3427d2(0x9f)]=='')proxyEmit(_0x3427d2(0x20d),_0x51273b);else{_0x51273b[_0x3427d2(0x1aa)](_0x49def6=>{const _0x2d99b7=_0x3427d2;if(_0x49def6[_0x2d99b7(0x134)]!=_0x381175[_0x2d99b7(0x9f)]&&allSymbols['includes'](_0x49def6[_0x2d99b7(0x17e)]))_0x20c91b[_0x2d99b7(0xc8)](_0x49def6[_0x2d99b7(0x17e)]);});if(_0x20c91b['length']==0x0)logHistory(_0x3427d2(0x9b),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x23ae0d=await getTickers(_0x20c91b);}catch(_0x2a8b18){if(_0x2a8b18['toString']()[_0x3427d2(0x198)](_0x3427d2(0x9a))){proxyEmit(_0x3427d2(0x20d),![]);return;}else handleError(_0x2a8b18,_0x3427d2(0x96));}_0x51273b['forEach'](_0x374cbe=>{const _0x3fd902=_0x3427d2;_0x374cbe[_0x3fd902(0x134)]!=_0x381175[_0x3fd902(0x9f)]?_0x23ae0d[_0x374cbe['symbol']]?_0x4d7f5e=_0x374cbe[_0x3fd902(0x155)]?0x1/_0x23ae0d[_0x374cbe[_0x3fd902(0x17e)]]['last']:_0x23ae0d[_0x374cbe[_0x3fd902(0x17e)]][_0x3fd902(0x19b)]:_0x4d7f5e=0x0:_0x4d7f5e=0x1,_0x374cbe[_0x3fd902(0x18c)]=formatResult(_0x4d7f5e,0x8);}),proxyEmit(_0x3427d2(0x20d),_0x51273b);}}}function truncateTradeAmount(_0xff38e8,_0x102c3e){const _0x2ebf5f=_0x17f3a0;let _0x35ab26=0x0;try{_0x35ab26=exchange[_0x2ebf5f(0xc2)](_0xff38e8,_0x102c3e);}catch(_0x44b206){}return _0x35ab26;}function checkMinimums(_0x5e20e3){const _0x1aebac=_0x17f3a0;let _0x1ac318=!![];const _0x2ad0be=!_0x5e20e3[_0x1aebac(0x155)]?markets[_0x5e20e3['symbol']][_0x1aebac(0x20e)][_0x1aebac(0x190)][_0x1aebac(0x1bc)]:markets[_0x5e20e3[_0x1aebac(0x17e)]][_0x1aebac(0x20e)][_0x1aebac(0x20b)][_0x1aebac(0x1bc)],_0x19270f=!_0x5e20e3[_0x1aebac(0x155)]?markets[_0x5e20e3['symbol']][_0x1aebac(0x20e)][_0x1aebac(0x20b)][_0x1aebac(0x1bc)]:markets[_0x5e20e3[_0x1aebac(0x17e)]]['limits'][_0x1aebac(0x190)][_0x1aebac(0x1bc)],_0x48b7ab=truncateTradeAmount(_0x5e20e3['symbol'],_0x5e20e3[_0x1aebac(0x81)]);_0x5e20e3[_0x1aebac(0x81)]=_0x48b7ab;if(Math[_0x1aebac(0xf6)](_0x48b7ab)<_0x2ad0be)_0x1ac318=![];if(Math[_0x1aebac(0xf6)](_0x48b7ab)*_0x5e20e3['last']<_0x19270f)_0x1ac318=![];if(_0x5e20e3['side']==_0x1aebac(0x214)){let _0x5b720c=config[_0x1aebac(0x20d)][_0x1aebac(0x7e)](_0x49c638=>_0x49c638[_0x1aebac(0x134)]==_0x5e20e3['coin']);if(_0x5b720c[_0x1aebac(0x148)]>0x0){if(Math[_0x1aebac(0xf6)](_0x48b7ab)>_0x5e20e3['number']-_0x5b720c[_0x1aebac(0x148)])_0x1ac318=![];}else{if(Math['abs'](_0x48b7ab)>_0x5e20e3[_0x1aebac(0x16c)])_0x1ac318=![];}}if(_0x5e20e3[_0x1aebac(0xbe)]==_0x1aebac(0x127)){let _0x4bd13e=config[_0x1aebac(0x20d)][_0x1aebac(0x7e)](_0xdfd1ef=>_0xdfd1ef['coin']==config['basecoin']),_0x375f0b=currentCoins[_0x1aebac(0x7e)](_0x5ee156=>_0x5ee156[_0x1aebac(0x134)]==config[_0x1aebac(0x9f)]);if(_0x4bd13e[_0x1aebac(0x148)]>0x0){if(Math[_0x1aebac(0xf6)](_0x48b7ab)*_0x5e20e3['last']>_0x375f0b[_0x1aebac(0x16c)]-_0x4bd13e[_0x1aebac(0x148)])_0x1ac318=![];}else{if(Math['abs'](_0x48b7ab)*_0x5e20e3[_0x1aebac(0x19b)]>_0x375f0b[_0x1aebac(0x16c)])_0x1ac318=![];}}return _0x1ac318;}async function getBalances(_0xc06e15=!![]){const _0x26f606=_0x17f3a0;let _0x365a8a=0x0,_0x145272;const _0x434242=config[_0x26f606(0xbd)];if(config[_0x26f606(0x12b)]&&config[_0x26f606(0xf2)]<0x0)await validate24hChanges();currentCoins[_0x26f606(0x1aa)](_0x3b4880=>{const _0xa99ab8=_0x26f606;if(_0x3b4880[_0xa99ab8(0x134)]!=config['basecoin']){let _0x43e637=global[_0xa99ab8(0x12e)][noslash(_0x3b4880['symbol'])];_0x145272=_0x3b4880[_0xa99ab8(0x155)]?0x1/_0x43e637:_0x43e637;}else _0x145272=0x1;let _0x1c3cc4=_0x3b4880['number']*_0x145272;_0x365a8a+=_0x1c3cc4,_0x3b4880[_0xa99ab8(0x19b)]=formatResult(Number(_0x145272),0x8),_0x3b4880['value']=_0x1c3cc4;}),currentCoins[_0x26f606(0x1aa)](_0x4e6302=>{const _0x56bd5c=_0x26f606;let _0x4f75c8=config[_0x56bd5c(0x20d)][_0x56bd5c(0x7e)](_0x5325d5=>_0x5325d5[_0x56bd5c(0x134)]==_0x4e6302['coin']),_0x548196=Number(_0x4f75c8[_0x56bd5c(0x1ee)]),_0x2b8435=_0x4e6302[_0x56bd5c(0x1db)]/_0x365a8a*0x64,_0x2740a7=_0x548196*_0x365a8a/0x64/_0x4e6302[_0x56bd5c(0x19b)]-_0x4e6302[_0x56bd5c(0x16c)];_0x4e6302[_0x56bd5c(0x1ee)]=formatResult(_0x2b8435,0x3),_0x4e6302[_0x56bd5c(0x15d)]=formatResult(_0x548196,0x3),_0x4e6302[_0x56bd5c(0x81)]=formatResult(_0x2740a7,0x8),_0x4e6302[_0x56bd5c(0xbe)]='',_0x4e6302[_0x56bd5c(0xb8)]=![];if(_0x4e6302[_0x56bd5c(0x134)]!=config[_0x56bd5c(0x9f)]){if(_0x4e6302[_0x56bd5c(0x1ee)]>_0x548196)_0x4e6302[_0x56bd5c(0xbe)]=_0x56bd5c(0x214),_0x4e6302[_0x56bd5c(0xb8)]=checkMinimums(_0x4e6302);else _0x4e6302[_0x56bd5c(0x1ee)]<_0x548196&&(_0x4e6302[_0x56bd5c(0xbe)]='buy',_0x4e6302[_0x56bd5c(0xb8)]=checkMinimums(_0x4e6302));}_0x4e6302[_0x56bd5c(0x17c)]=_0x4e6302[_0x56bd5c(0x1ee)]/_0x4e6302[_0x56bd5c(0x15d)]-0x1;if(_0x4e6302['orderstatus']==_0x56bd5c(0x191)||_0x4e6302[_0x56bd5c(0x1f0)]==_0x56bd5c(0x17a))_0x4e6302[_0x56bd5c(0x1f0)]=_0x56bd5c(0x116);}),currentCoins[_0x26f606(0x1df)]((_0x5923d7,_0x3fd4d0)=>_0x5923d7[_0x26f606(0x17c)]<_0x3fd4d0['delta']?0x1:_0x3fd4d0[_0x26f606(0x17c)]<_0x5923d7['delta']?-0x1:0x0);const _0x3a1e3f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a1e3f[_0x26f606(0x82)],'usd':_0x3a1e3f['usd'],'portfolio':JSON[_0x26f606(0xec)](currentCoins),'threshold':_0x434242},proxyEmit(_0x26f606(0xe7),{'serverversion':serverversion,'balances':lastBalances});if(_0xc06e15){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x434242});else{if(lockOrders==ORDERS[_0x26f606(0xb9)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x434242});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5655ff=getNormalizedPerformance();getStartingBalances(_0x5655ff),emitPerformance(_0x5655ff);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4ad6c8=getNormalizedPerformance();emitPerformance(_0x4ad6c8),getStartingBalances(_0x4ad6c8),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1cb042=_0x17f3a0;if(!lastBalances)return;let _0x569847=[],_0x58de6a,_0x3baeb0=JSON['parse'](lastBalances[_0x1cb042(0x20d)]);_0x3baeb0[_0x1cb042(0x1df)]((_0x31423b,_0x4a47f3)=>_0x31423b[_0x1cb042(0x134)]>_0x4a47f3[_0x1cb042(0x134)]?0x1:_0x4a47f3[_0x1cb042(0x134)]>_0x31423b['coin']?-0x1:0x0),_0x3baeb0[_0x1cb042(0x1aa)](_0x54ef00=>{const _0x1c048c=_0x1cb042;let _0x501bc2={'coin':_0x54ef00[_0x1c048c(0x134)],'number':_0x54ef00[_0x1c048c(0x16c)],'price':_0x54ef00[_0x1c048c(0x19b)]};_0x569847[_0x1c048c(0xc8)](_0x501bc2);});const _0x44e589=await getFiat();_0x58de6a={'date':lastBalances[_0x1cb042(0x13e)][_0x1cb042(0x1f6)]('\x20')[0x0],'eur':_0x44e589['eur'],'usd':_0x44e589[_0x1cb042(0x18b)],'coins':_0x569847};let _0x1359f8=dbPerformance['get']('data')[_0x1cb042(0x7e)]({'date':_0x58de6a['date']})['value']();_0x1359f8?_0x58de6a['date']!=config[_0x1cb042(0x1ba)]&&dbPerformance[_0x1cb042(0xfa)]('data')[_0x1cb042(0x7e)]({'date':_0x58de6a[_0x1cb042(0x1f9)]})[_0x1cb042(0xce)](_0x58de6a)[_0x1cb042(0xe3)]():dbPerformance[_0x1cb042(0xfa)](_0x1cb042(0x154))[_0x1cb042(0xc8)](_0x58de6a)[_0x1cb042(0xe3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x284d0f=_0x17f3a0;let _0x570a96=[];if(dbPerformance[_0x284d0f(0x142)](_0x284d0f(0x154))['value']()){let _0x250d4e=dbPerformance['get']('data')[_0x284d0f(0x1a0)]()[_0x284d0f(0x128)](_0x557cd7=>{const _0xba30a4=_0x284d0f;if(_0x557cd7['coins'][_0xba30a4(0xb0)]==0x0)return![];else return!![];})[_0x284d0f(0xde)](_0x284d0f(0x1f9))['value'](),_0x23d3da=[...config[_0x284d0f(0x183)]];_0x23d3da[_0x284d0f(0x1df)]((_0x4e3dff,_0x42a2ff)=>_0x4e3dff[_0x284d0f(0x1f9)]>_0x42a2ff[_0x284d0f(0x1f9)]?-0x1:_0x42a2ff[_0x284d0f(0x1f9)]>_0x4e3dff[_0x284d0f(0x1f9)]?0x1:0x0);let _0x5e8cf9=0x1,_0x44df8c=[],_0x26714f=0x0;_0x250d4e['slice']()[_0x284d0f(0x155)]()[_0x284d0f(0x1aa)]((_0x480dbf,_0x5485ef)=>{const _0x57f081=_0x284d0f;if(_0x23d3da[_0x26714f]){if(_0x250d4e[_0x250d4e[_0x57f081(0xb0)]-_0x5485ef]&&_0x23d3da[_0x26714f][_0x57f081(0x1f9)]==_0x250d4e[_0x250d4e[_0x57f081(0xb0)]-_0x5485ef][_0x57f081(0x1f9)]){if(_0x5485ef<_0x250d4e[_0x57f081(0xb0)]){let _0x4d044a=0x0,_0x110752=0x0;_0x250d4e[_0x250d4e['length']-_0x5485ef][_0x57f081(0xdc)]['forEach'](_0x5ef527=>{const _0x48f069=_0x57f081;_0x110752+=_0x5ef527[_0x48f069(0x16c)]*_0x5ef527['price'];}),_0x23d3da[_0x26714f][_0x57f081(0x196)][_0x57f081(0x1aa)](_0x48777d=>{const _0x238a40=_0x57f081;_0x4d044a+=_0x48777d[_0x238a40(0x16c)]*_0x48777d[_0x238a40(0x18c)];}),_0x5e8cf9*=_0x4d044a/(_0x110752-_0x4d044a)+0x1;}_0x26714f++;}}let _0x50951e=0x0;_0x480dbf[_0x57f081(0xdc)][_0x57f081(0x1aa)](_0xdf82e1=>{const _0x42e7ec=_0x57f081;_0x50951e+=_0xdf82e1[_0x42e7ec(0x16c)]*_0xdf82e1[_0x42e7ec(0x18c)];}),_0x44df8c[_0x250d4e[_0x57f081(0xb0)]-_0x5485ef-0x1]=_0x50951e*(_0x5e8cf9-0x1);});let _0x1b70a0=[];_0x23d3da=[...config['liquidity']]||[];let _0x2ed6d2=0x0;_0x26714f=0x0,_0x250d4e[_0x284d0f(0x1aa)]((_0x7d5afe,_0x4aa5ef)=>{const _0x45f597=_0x284d0f;if(_0x23d3da[_0x26714f]){const _0x485352=fns[_0x45f597(0x1e6)](_0x23d3da[_0x26714f]['date'],_0x45f597(0x1d9),new Date()),_0x45a4e3=fns[_0x45f597(0x1e6)](_0x7d5afe[_0x45f597(0x1f9)],_0x45f597(0x1d9),new Date());if(fns[_0x45f597(0x194)](_0x485352,_0x45a4e3)){let _0x3a3be1=0x0;_0x23d3da[_0x26714f]['changes'][_0x45f597(0x1aa)](_0x426592=>{const _0x256fdc=_0x45f597;!_0x1b70a0[_0x426592[_0x256fdc(0x134)]]?_0x1b70a0[_0x426592[_0x256fdc(0x134)]]=_0x426592[_0x256fdc(0x16c)]:(_0x3a3be1=_0x1b70a0[_0x426592[_0x256fdc(0x134)]],_0x1b70a0[_0x426592[_0x256fdc(0x134)]]+=_0x426592[_0x256fdc(0x16c)]);const _0x2c2a8c=_0x7d5afe[_0x256fdc(0xdc)][_0x256fdc(0x7e)](_0x15c7c3=>_0x15c7c3[_0x256fdc(0x134)]==_0x426592[_0x256fdc(0x134)]);(!_0x2c2a8c||_0x2c2a8c[_0x256fdc(0x16c)]==0x0)&&(_0x2ed6d2+=(-_0x426592[_0x256fdc(0x16c)]-_0x3a3be1)*_0x426592[_0x256fdc(0x18c)]);}),_0x26714f++;}}_0x7d5afe[_0x45f597(0xdc)]['forEach']((_0x3510e3,_0x125729)=>{const _0x6fbc85=_0x45f597;_0x1b70a0[_0x3510e3[_0x6fbc85(0x134)]]&&(_0x3510e3[_0x6fbc85(0x11d)]=_0x1b70a0[_0x3510e3[_0x6fbc85(0x134)]]);}),_0x570a96[_0x45f597(0xc8)]({'date':_0x7d5afe['date'],'eur':_0x7d5afe['eur'],'usd':_0x7d5afe[_0x45f597(0x18b)],'offset':_0x44df8c[_0x4aa5ef],'netoffset':_0x2ed6d2,'coins':_0x7d5afe[_0x45f597(0xdc)]});});}return _0x570a96;}function emitPerformance(_0xfba810){const _0x4f4e32=_0x17f3a0;_0xfba810[_0x4f4e32(0xb0)]!==0x0?(proxyEmit(_0x4f4e32(0x1c3),_0xfba810),lastPerformanceEmitted=getDate()):proxyEmit(_0x4f4e32(0x1c3),[]);}function getPerf(_0x4b086b,_0x49171b){const _0x1aa5cf=_0x17f3a0;let _0x1e4822=0x0,_0xbf56a=0x0,_0x2bbfa8=0x0;_0x4b086b[_0x1aa5cf(0xdc)][_0x1aa5cf(0x1aa)](_0x592d83=>{const _0x52905f=_0x1aa5cf;_0x1e4822+=_0x592d83[_0x52905f(0x16c)]*_0x592d83[_0x52905f(0x18c)];});_0x49171b&&(_0x1e4822+=_0x4b086b[_0x1aa5cf(0x148)]);if(config[_0x1aa5cf(0x9f)]===_0x1aa5cf(0x108)||config['basecoin']==='ETH'||config['basecoin']===_0x1aa5cf(0xd4))_0xbf56a=_0x1e4822*_0x4b086b[_0x1aa5cf(0x82)],_0x2bbfa8=_0x1e4822*_0x4b086b[_0x1aa5cf(0x18b)];else{if(usdBasecoins[_0x1aa5cf(0x198)](config[_0x1aa5cf(0x9f)]))_0xbf56a=_0x1e4822*_0x4b086b['eur']/_0x4b086b[_0x1aa5cf(0x18b)],_0x2bbfa8=_0x1e4822;else config['basecoin']===_0x1aa5cf(0x164)&&(_0xbf56a=_0x1e4822,_0x2bbfa8=_0x1e4822*_0x4b086b[_0x1aa5cf(0x18b)]/_0x4b086b[_0x1aa5cf(0x82)]);}return[_0x1e4822,_0xbf56a,_0x2bbfa8];}function getKPIs(_0x4220f1,_0x4f7ba2=_0x17f3a0(0x164)){const _0x5b39a1=_0x17f3a0,_0x22c6d6=config[_0x5b39a1(0x9f)],_0x399018=lastBalances,_0x2a96ec=currentCoins,_0x4f0275=getNormalizedPerformance(),_0xe4bb2f=_0x4220f1===_0x5b39a1(0x9f)?_0x22c6d6:_0x4220f1==='fiat'||_0x4220f1===_0x5b39a1(0xcc)?_0x4f7ba2:_0x5b39a1(0x139)+_0x22c6d6,_0xcaff45=_0x4220f1==='net-basecoin'?_0x5b39a1(0x85):_0x4220f1===_0x5b39a1(0xcc)?_0x5b39a1(0x85):_0xe4bb2f+_0x5b39a1(0x1b2),_0x198104=_0x4220f1==='net-basecoin'||_0x4220f1==='net-fiat'?_0x5b39a1(0x85):_0xe4bb2f+_0x5b39a1(0xa5);let _0x47770f=0x0;_0x2a96ec[_0x5b39a1(0x1aa)](_0x155054=>{const _0x19b58c=_0x5b39a1;_0x47770f+=_0x155054[_0x19b58c(0x16c)]*_0x155054['last'];});if(_0x4220f1===_0x5b39a1(0xac)||_0x4220f1===_0x5b39a1(0xcc)){if(_0x22c6d6===_0x5b39a1(0x108)||_0x22c6d6===_0x5b39a1(0x15a)||_0x22c6d6==='PAXG')_0x47770f=_0x47770f*(_0x4f7ba2===_0x5b39a1(0x164)?_0x399018[_0x5b39a1(0x82)]:_0x399018['usd']);else{if(usdBasecoins['includes'](_0x22c6d6))_0x47770f=_0x47770f*(_0x4f7ba2===_0x5b39a1(0x164)?_0x399018[_0x5b39a1(0x82)]/_0x399018[_0x5b39a1(0x18b)]:0x1);else _0x22c6d6==='EUR'&&(_0x47770f=_0x47770f*(_0x4f7ba2===_0x5b39a1(0x164)?0x1:_0x399018[_0x5b39a1(0x18b)]/_0x399018[_0x5b39a1(0x82)]));}}let _0x2f6d6c;if(_0x47770f!==0x0){if(_0x4220f1===_0x5b39a1(0x9f))_0x2f6d6c=(_0x47770f/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4f7ba2==='EUR')_0x2f6d6c=(_0x47770f/startingBalances[_0x5b39a1(0x82)]-0x1)*0x64;else _0x2f6d6c=(_0x47770f/startingBalances[_0x5b39a1(0x18b)]-0x1)*0x64;}let _0x5cfd2e=0x0;if(startingBalances[_0x5b39a1(0xdc)])_0x2a96ec[_0x5b39a1(0x1aa)](_0xc92a5b=>{const _0x92c20c=_0x5b39a1;let _0x57ce55=startingBalances[_0x92c20c(0xdc)][_0x92c20c(0x7e)](_0x23d888=>_0x23d888['coin']===_0xc92a5b[_0x92c20c(0x134)]);if(_0x57ce55&&_0x57ce55[_0x92c20c(0x134)]&&_0xc92a5b[_0x92c20c(0x16c)]!==0x0)_0x5cfd2e+=_0x57ce55['number']*_0xc92a5b[_0x92c20c(0x19b)];});let _0xeb5ed4=0x0;if(_0x4f0275[_0x5b39a1(0xb0)]!==0x0){let _0x135b55=_0x4f0275[_0x4f0275[_0x5b39a1(0xb0)]-0x1];_0xeb5ed4=_0x135b55[_0x5b39a1(0x11a)];}_0x5cfd2e-=_0xeb5ed4;_0x4220f1===_0x5b39a1(0x168)&&(_0x2f6d6c=(_0x47770f-_0x5cfd2e)/startingBalances[_0x5b39a1(0x9f)]*0x64,_0x47770f=_0x47770f-_0x5cfd2e);if(_0x4220f1==='net-fiat'){let _0x387a5a=_0x4f7ba2===_0x5b39a1(0x164)?startingBalances[_0x5b39a1(0x82)]:startingBalances[_0x5b39a1(0x18b)];if(_0x22c6d6==='BTC'||_0x22c6d6===_0x5b39a1(0x15a)||_0x22c6d6===_0x5b39a1(0xd4))_0x5cfd2e=_0x4f7ba2===_0x5b39a1(0x164)?_0x5cfd2e*_0x399018[_0x5b39a1(0x82)]:_0x5cfd2e*_0x399018[_0x5b39a1(0x18b)];else{if(usdBasecoins[_0x5b39a1(0x198)](_0x22c6d6))_0x5cfd2e=_0x4f7ba2==='EUR'?_0x5cfd2e*_0x399018[_0x5b39a1(0x82)]/_0x399018[_0x5b39a1(0x18b)]:_0x5cfd2e;else _0x22c6d6===_0x5b39a1(0x164)&&(_0x5cfd2e=_0x4f7ba2===_0x5b39a1(0x164)?_0x5cfd2e:_0x5cfd2e*_0x399018[_0x5b39a1(0x18b)]/_0x399018['eur']);}_0x2f6d6c=(_0x47770f-_0x5cfd2e)/_0x387a5a*0x64,_0x47770f=_0x47770f-_0x5cfd2e;}if(_0x2f6d6c){if(_0x2f6d6c<0x64)_0x2f6d6c=_0x2f6d6c['toFixed'](0x2);else{if(_0x2f6d6c<0x3e8)_0x2f6d6c=_0x2f6d6c[_0x5b39a1(0x1d7)](0x1);else _0x2f6d6c=_0x2f6d6c['toFixed'](0x0);}}else _0x2f6d6c=Number('0')[_0x5b39a1(0x1d7)](0x2);if(_0x47770f){if(Math[_0x5b39a1(0xf6)](_0x47770f)<0.000001)_0x47770f=_0x47770f['toFixed'](0x2);else{if(Math['abs'](_0x47770f)<0.1)_0x47770f=_0x47770f[_0x5b39a1(0x1d7)](0x6);else{if(Math[_0x5b39a1(0xf6)](_0x47770f)<0x1)_0x47770f=_0x47770f[_0x5b39a1(0x1d7)](0x5);else{if(Math[_0x5b39a1(0xf6)](_0x47770f)<0xa)_0x47770f=_0x47770f['toFixed'](0x4);else{if(Math[_0x5b39a1(0xf6)](_0x47770f)<0x64)_0x47770f=_0x47770f[_0x5b39a1(0x1d7)](0x3);else{if(Math[_0x5b39a1(0xf6)](_0x47770f)<0x3e8)_0x47770f=_0x47770f['toFixed'](0x2);else _0x47770f=_0x47770f['toFixed'](0x2);}}}}}}else _0x47770f=Number('0')[_0x5b39a1(0x1d7)](0x2);}else _0x2f6d6c=Number('0')[_0x5b39a1(0x1d7)](0x2);return{'value':_0x47770f,'change':_0x2f6d6c,'leftTxt':_0xcaff45,'rightTxt':_0x198104};}async function getStartingBalances(_0x1c15d5,_0x33d0c8=!![]){const _0x14c58c=_0x17f3a0;if(_0x1c15d5['length']!==0x0){const [_0x34e395,_0x4fb4cb,_0xf7c33d]=getPerf(_0x1c15d5[0x0],!![]);let _0x2213d9=[];config[_0x14c58c(0x20d)][_0x14c58c(0x1aa)](_0x2f90cb=>{const _0x4543fb=_0x14c58c;let _0xdb311d=0x0,_0x56847f;config[_0x4543fb(0x183)][_0x4543fb(0x1aa)](_0x5b054a=>{const _0x56db30=_0x4543fb;let _0x5630e3=_0x5b054a[_0x56db30(0x196)][_0x56db30(0x7e)](_0x2048ba=>_0x2048ba['coin']==_0x2f90cb[_0x56db30(0x134)]);if(_0x5630e3){_0xdb311d+=_0x5630e3[_0x56db30(0x16c)];if(!_0x56847f)_0x56847f=_0x5630e3[_0x56db30(0x18c)];}}),_0x2213d9[_0x4543fb(0xc8)]({'coin':_0x2f90cb[_0x4543fb(0x134)],'number':_0xdb311d,'initialprice':_0x56847f});});const _0x4fa653={'basecoin':_0x34e395,'eur':_0x4fb4cb,'usd':_0xf7c33d,'coins':_0x2213d9};if(_0x33d0c8)proxyEmit(_0x14c58c(0x166),_0x4fa653);startingBalances=_0x4fa653;}}function headlessMode(_0xd9d0a8){const _0x110ff2=_0x17f3a0;let _0x2a307e=_0xd9d0a8[_0x110ff2(0x20d)],_0x6a46b2=_0xd9d0a8[_0x110ff2(0xbd)],_0x302c19=[];for(let _0x5baf12 of _0x2a307e){if(_0x5baf12['coin']!=config['basecoin']){if(_0x5baf12[_0x110ff2(0x17c)]>=_0x6a46b2/0x64){if(_0x5baf12[_0x110ff2(0xb8)])_0x302c19[_0x110ff2(0xc8)](_0x5baf12);}else{if(_0x5baf12[_0x110ff2(0x17c)]<=-_0x6a46b2/0x64){if(_0x5baf12[_0x110ff2(0xb8)])_0x302c19[_0x110ff2(0xc8)](_0x5baf12);}}}}_0x302c19[_0x110ff2(0xb0)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x302c19[_0x110ff2(0x1aa)](_0x55e7b7=>{const _0x248756=_0x110ff2;logger[_0x248756(0x16f)](_0x248756(0x202)+_0x55e7b7[_0x248756(0x134)]+'\x20'+_0x55e7b7[_0x248756(0x16c)]+'\x20'+_0x55e7b7[_0x248756(0x19b)]+'\x20'+_0x55e7b7[_0x248756(0x1ee)]+'%\x20'+_0x55e7b7['target']+'%\x20'+(0x64*_0x55e7b7['delta'])[_0x248756(0x1d7)](0x2)+'%\x20('+_0x6a46b2[_0x248756(0x1d7)](0x2)+'%)');}),placeOrder(_0x302c19));}function notifyBalance(_0x21b33f){const _0x2bf382=_0x17f3a0;let _0x5335b9=_0x21b33f[_0x2bf382(0x20d)],_0x3f678f=_0x21b33f[_0x2bf382(0xbd)],_0x2ac651=[];for(let _0x4186a3 of _0x5335b9){if(_0x4186a3[_0x2bf382(0x134)]!=config['basecoin']){if(_0x4186a3[_0x2bf382(0x17c)]>=_0x3f678f/0x64){if(_0x4186a3[_0x2bf382(0xb8)])_0x2ac651[_0x2bf382(0xc8)](_0x4186a3);}else{if(_0x4186a3[_0x2bf382(0x17c)]<=-_0x3f678f/0x64){if(_0x4186a3[_0x2bf382(0xb8)])_0x2ac651['push'](_0x4186a3);}}}}if(_0x2ac651[_0x2bf382(0xb0)]>0x0){let _0x105251=_0x2ac651[_0x2bf382(0xc9)](_0x173840=>_0x173840[_0x2bf382(0x134)]);_0x105251['sort']();let _0x3f61a6=_0x105251[_0x2bf382(0x1ad)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2bf382(0xb3),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x3f61a6;}}function symbolToCoin(_0x125a48){const _0x531704=_0x17f3a0;let _0x5a758c;if(_0x125a48[_0x531704(0x198)]('/'+config[_0x531704(0x9f)]))_0x5a758c=_0x125a48[_0x531704(0x106)]('/'+config[_0x531704(0x9f)],'');if(_0x125a48[_0x531704(0x198)](config[_0x531704(0x9f)]+'/'))_0x5a758c=_0x125a48['replace'](config[_0x531704(0x9f)]+'/','');return _0x5a758c;}async function unlockOrders(){const _0x884238=_0x17f3a0;if(allOrdersPlaced&&lockOrders==ORDERS[_0x884238(0x192)]){logger[_0x884238(0x16f)](_0x884238(0x143)),lockOrders=ORDERS[_0x884238(0x137)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4a2c62=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4a2c62,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x884238(0xb9)],logger[_0x884238(0x16f)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x3e2610){const _0x390764=_0x17f3a0;if(_0x3e2610)validateOrdersState=_0x3e2610;logger['debug'](_0x390764(0x12f)+validateOrdersState+_0x390764(0x16e)+(lockOrders==0x1?_0x390764(0xe4):lockOrders==0x2?_0x390764(0x207):_0x390764(0xf1)));let _0x2c15bf=[],_0x175662=config[_0x390764(0x15f)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x390764(0x1c5)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x390764(0x1aa)](_0x4214d3=>{const _0x327eeb=_0x390764;let _0x3b1fc2=![];_0x4214d3[_0x327eeb(0x191)]>0x0&&(_0x3b1fc2=!![]),_0x2c15bf[_0x327eeb(0xc8)](_0x3b1fc2),_0x3b1fc2&&config['ordertype']!=_0x327eeb(0x197)&&logHistory('order',_0x327eeb(0x1a9)+_0x4214d3[_0x327eeb(0x17e)]+'\x20'+_0x4214d3[_0x327eeb(0xbe)]+'\x20#'+formatResult(_0x4214d3[_0x327eeb(0x191)],0x8)+'\x20@'+formatResult(_0x4214d3[_0x327eeb(0x18c)],0x8));}),_0x2c15bf[_0x390764(0x1aa)]((_0x291669,_0x907379)=>{if(_0x291669)lastOrders['splice'](_0x907379,0x1);}),persistOpenOrders(lastOrders);const _0x1cd4be=coolingDown?_0x390764(0x1dc):_0x390764(0x1c6);if(validateOrdersState==_0x390764(0x11d)){validateOrdersState=_0x390764(0x10b);if(_0x2c15bf[_0x390764(0x198)](![])){if(config['ordertype']==_0x390764(0x197)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x390764(0x10b)){if(_0x2c15bf[_0x390764(0x198)](![])){}else{if(allOrdersPlaced){if(config[_0x390764(0x15f)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x390764(0x136))_0x2c15bf[_0x390764(0x198)](![])&&(config[_0x390764(0x15f)]=='market'?logHistory(_0x390764(0x15e),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x390764(0x199)](_0x175662*validateOrderInterval/0xea60)+_0x390764(0x9c)+_0x1cd4be):(await cancelOrders(),logHistory(_0x390764(0x15e),_0x390764(0x8c)+Math[_0x390764(0x199)](_0x175662*validateOrderInterval/0xea60)+_0x390764(0x9c)+_0x1cd4be))),await unlockOrders();else{if(validateOrdersState==_0x390764(0xdf)){if(config[_0x390764(0x15f)]!=_0x390764(0x197))logHistory(_0x390764(0x15e),_0x390764(0xe0)+_0x1cd4be);await unlockOrders();}}}}}async function cancelOrders(){const _0x4d5b9d=_0x17f3a0;lastOrders[_0x4d5b9d(0x1aa)](async _0x4b0518=>{const _0x40e8ff=_0x4d5b9d;try{const _0x46d74c=await exchange[_0x40e8ff(0x79)](_0x4b0518[_0x40e8ff(0xd2)],_0x4b0518['symbol']);}catch(_0x5de04a){if(_0x5de04a[_0x40e8ff(0x1a6)]()[_0x40e8ff(0x198)]('OrderNotFound')){}else await handleError(_0x5de04a,_0x40e8ff(0x16b));}});}async function initCoinResults(_0x52fd93){const _0xb6c3ac=_0x17f3a0;_0x52fd93?logger[_0xb6c3ac(0x16f)](_0xb6c3ac(0x1af)+_0x52fd93):logger[_0xb6c3ac(0x16f)](_0xb6c3ac(0x105)),config[_0xb6c3ac(0x20d)][_0xb6c3ac(0x1aa)](_0x3000a8=>{const _0x174bc2=_0xb6c3ac;if(!_0x3000a8['excluded']&&_0x3000a8['coin']!=config[_0x174bc2(0x9f)]){const _0x59f1ce=currentCoins[_0x174bc2(0x7e)](_0x2662bb=>_0x2662bb['coin']==_0x3000a8[_0x174bc2(0x134)]),_0x3bed45=global[_0x174bc2(0x12e)][noslash(_0x3000a8[_0x174bc2(0x17e)])];let _0x56c078=_0x59f1ce?_0x59f1ce[_0x174bc2(0x16c)]:null,_0x5dfd03=_0x3000a8[_0x174bc2(0x155)]?0x1/_0x3bed45:_0x3bed45,_0x5f3a79;config[_0x174bc2(0x183)][_0x174bc2(0x1aa)](_0x3dcb47=>{const _0x41c323=_0x174bc2;!_0x5f3a79&&(_0x5f3a79=_0x3dcb47[_0x41c323(0x196)][_0x41c323(0x7e)](_0x3b7756=>_0x3b7756[_0x41c323(0x134)]==_0x3000a8[_0x41c323(0x134)]),_0x5f3a79&&(_0x56c078=_0x5f3a79[_0x41c323(0x16c)],_0x5dfd03=_0x5f3a79[_0x41c323(0x18c)]));});let _0x232246=dbCoinResults[_0x174bc2(0xfa)](_0x174bc2(0xdc))[_0x174bc2(0x7e)]({'coin':_0x3000a8[_0x174bc2(0x134)]})['value']();if(!_0x232246){const _0x2c3b7c={'coin':_0x3000a8[_0x174bc2(0x134)],'number':_0x56c078,'breakeven':_0x5dfd03,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x174bc2(0xfa)](_0x174bc2(0xdc))['push'](_0x2c3b7c)[_0x174bc2(0xe3)]();}else{if(_0x52fd93&&_0x3000a8[_0x174bc2(0x134)]==_0x52fd93){const _0x4c2b44={'coin':_0x3000a8['coin'],'number':_0x56c078,'breakeven':_0x5dfd03,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x174bc2(0xfa)](_0x174bc2(0xdc))[_0x174bc2(0x7e)]({'coin':_0x3000a8[_0x174bc2(0x134)]})[_0x174bc2(0xce)](_0x4c2b44)['write']();}}}});}async function updateCoinResults(_0x42e370,_0x189581=![]){const _0xc1af32=_0x17f3a0;let _0x2cbd55,_0x58cae0,_0x564d32,_0x5873f6,_0x233d38,_0x549c0e,_0x2bc1bf=dbCoinResults['get'](_0xc1af32(0xdc))[_0xc1af32(0x7e)]({'coin':_0x42e370[_0xc1af32(0x134)]})[_0xc1af32(0x1db)](),_0x1e1dc6=![];_0x2bc1bf&&Object[_0xc1af32(0x19e)](_0x2bc1bf)['forEach'](([_0x1f595b,_0x449f59])=>{if(_0x449f59==null)_0x1e1dc6=!![];});(!_0x2bc1bf||_0x1e1dc6)&&(await initCoinResults(_0x42e370[_0xc1af32(0x134)]),_0x2bc1bf=dbCoinResults['get']('coins')[_0xc1af32(0x7e)]({'coin':_0x42e370['coin']})[_0xc1af32(0x1db)]());_0x42e370[_0xc1af32(0x155)]&&(_0x549c0e={'filled':_0x42e370[_0xc1af32(0x191)]*_0x42e370[_0xc1af32(0x18c)],'amount':_0x42e370[_0xc1af32(0x191)]*_0x42e370[_0xc1af32(0x18c)],'side':_0x42e370[_0xc1af32(0xbe)]==_0xc1af32(0x214)?_0xc1af32(0x127):_0xc1af32(0x214),'price':0x1/_0x42e370['price']},_0x42e370={..._0x42e370,..._0x549c0e});_0x189581?_0x58cae0=_0x42e370[_0xc1af32(0xbe)]==_0xc1af32(0x127)?_0x2bc1bf['number']+_0x42e370['filled']:_0x2bc1bf[_0xc1af32(0x16c)]-_0x42e370[_0xc1af32(0x191)]:_0x58cae0=await getCoinNumber(_0x42e370[_0xc1af32(0x134)]);if(_0x42e370['fee']&&_0x42e370[_0xc1af32(0xb1)]['currency']==config[_0xc1af32(0x9f)])_0x2cbd55=_0x42e370['fee'][_0xc1af32(0x20b)];else{if(_0x42e370['fee']&&_0x42e370[_0xc1af32(0xb1)]['currency']==_0xc1af32(0xda)&&!_0x189581&&config[_0xc1af32(0x9f)]!=_0xc1af32(0xd4))_0x2cbd55=_0x42e370[_0xc1af32(0xb1)][_0xc1af32(0x20b)]*global['ticker'][_0xc1af32(0xda)+config['basecoin']];else _0x2cbd55=defaultFee*_0x42e370[_0xc1af32(0x191)]*_0x42e370[_0xc1af32(0x18c)];}_0x42e370[_0xc1af32(0xbe)]==_0xc1af32(0x127)?(_0x564d32=_0x58cae0!=0x0?(_0x2bc1bf[_0xc1af32(0xd8)]*_0x2bc1bf[_0xc1af32(0x16c)]+_0x42e370['price']*(_0x58cae0-_0x2bc1bf['number'])+_0x2cbd55)/_0x58cae0:0x0,_0x5873f6=_0x2bc1bf[_0xc1af32(0xaa)]):(_0x564d32=_0x58cae0!=0x0?(_0x2bc1bf['breakeven']*_0x2bc1bf[_0xc1af32(0x16c)]-_0x42e370['price']*(_0x2bc1bf[_0xc1af32(0x16c)]-_0x58cae0)+_0x2cbd55)/_0x58cae0:0x0,_0x5873f6=_0x2bc1bf[_0xc1af32(0xaa)]+(_0x42e370[_0xc1af32(0x18c)]-_0x2bc1bf[_0xc1af32(0xd8)])*_0x42e370['filled']);_0x233d38=(_0x42e370[_0xc1af32(0x18c)]-_0x564d32-_0x2cbd55/_0x42e370[_0xc1af32(0x191)])*_0x58cae0;let _0xdad638={'coin':_0x42e370[_0xc1af32(0x134)],'number':_0x58cae0,'breakeven':formatResult(_0x564d32,0x8),'realized':formatResult(_0x5873f6,0x8),'unrealized':formatResult(_0x233d38,0x8),'fees':formatResult(_0x2bc1bf['fees']+_0x2cbd55,0x8),'sells':_0x42e370['side']==_0xc1af32(0x214)?_0x2bc1bf[_0xc1af32(0x130)]+0x1:_0x2bc1bf[_0xc1af32(0x130)],'buys':_0x42e370['side']==_0xc1af32(0x127)?_0x2bc1bf[_0xc1af32(0x1fd)]+0x1:_0x2bc1bf[_0xc1af32(0x1fd)]};dbCoinResults[_0xc1af32(0xfa)](_0xc1af32(0xdc))[_0xc1af32(0x7e)]({'coin':_0x42e370[_0xc1af32(0x134)]})[_0xc1af32(0xce)](_0xdad638)[_0xc1af32(0xe3)]();if(!_0x189581){if(_0x42e370[_0xc1af32(0xb1)]&&_0x42e370[_0xc1af32(0xb1)]['currency']==_0xc1af32(0xda)){const _0x3c66b5=currentCoins['find'](_0xb58027=>_0xb58027['coin']==_0xc1af32(0xda));if(_0x3c66b5){let _0x54b4ae=dbCoinResults[_0xc1af32(0xfa)]('coins')['find']({'coin':'BNB'})['value']();_0xdad638={..._0x54b4ae,'number':_0x3c66b5[_0xc1af32(0x16c)]},dbCoinResults['get']('coins')[_0xc1af32(0x7e)]({'coin':_0xc1af32(0xda)})[_0xc1af32(0xce)](_0xdad638)['write']();}}}}async function placeOrder(_0x62ffd2){const _0x15b4f8=_0x17f3a0,_0x822415=config[_0x15b4f8(0x15f)]==_0x15b4f8(0x197)?_0x15b4f8(0x197):'limit';if(lockOrders==ORDERS[_0x15b4f8(0xb9)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x15b4f8(0x192)],allOrdersPlaced=![],validateOrdersState=_0x15b4f8(0x11d);let _0x2a8ca1=![];lastOrders=[];for(const _0x155e41 of _0x62ffd2){let _0x555e8c,_0x2f8575,_0x521086,_0x5ca447,_0x3ff145,_0xe4cc6b=_0x155e41[_0x15b4f8(0x17e)];try{const _0x35b741=await exchange[_0x15b4f8(0xe6)](_0xe4cc6b);_0x555e8c=_0x155e41[_0x15b4f8(0x155)]?0x1/_0x155e41[_0x15b4f8(0x19b)]:_0x155e41[_0x15b4f8(0x19b)],_0x2f8575=_0x35b741[_0x15b4f8(0x113)],_0x521086=_0x35b741[_0x15b4f8(0x132)];_0x155e41[_0x15b4f8(0x155)]?(_0x5ca447=_0x155e41[_0x15b4f8(0xbe)]==_0x15b4f8(0x127)?_0x15b4f8(0x214):'buy',_0x3ff145=Math[_0x15b4f8(0xf6)](_0x155e41[_0x15b4f8(0x81)])/_0x555e8c):(_0x5ca447=_0x155e41[_0x15b4f8(0xbe)],_0x3ff145=Math[_0x15b4f8(0xf6)](_0x155e41['trade']));_0x822415==_0x15b4f8(0x141)&&(config[_0x15b4f8(0x15f)]==_0x15b4f8(0x1e2)&&(_0x555e8c=_0x5ca447==_0x15b4f8(0x127)?_0x2f8575:_0x521086),config[_0x15b4f8(0x15f)]==_0x15b4f8(0xae)&&(_0x555e8c=_0x5ca447==_0x15b4f8(0x127)?_0x521086:_0x2f8575));_0x3ff145=formatResult(_0x3ff145,0x8),_0x555e8c=formatResult(_0x555e8c,0x8);const _0x7ddf2b=_0x5ca447==_0x15b4f8(0x214)?config['emojisell']?String[_0x15b4f8(0x84)]('0x'+config[_0x15b4f8(0x1a7)])+'\x20':'':config[_0x15b4f8(0x200)]?String[_0x15b4f8(0x84)]('0x'+config['emojibuy'])+'\x20':'',_0x590d1a=_0x822415==_0x15b4f8(0x197)?'Market':config[_0x15b4f8(0x15f)]==_0x15b4f8(0x1e2)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x4516ff=(Math[_0x15b4f8(0x188)](Math[_0x15b4f8(0x1b5)]()*0x35a4e900)+0x5f5e100)[_0x15b4f8(0x1a6)]();lastOrders['push']({'customId':_0x4516ff,'symbol':_0xe4cc6b,'coin':_0x155e41[_0x15b4f8(0x134)],'amount':_0x3ff145,'price':_0x555e8c,'side':_0x5ca447,'reverse':_0x155e41[_0x15b4f8(0x155)],'filled':0x0});if(_0x822415==_0x15b4f8(0x197))logHistory(_0x15b4f8(0x95),''+_0x7ddf2b+_0x590d1a+_0x15b4f8(0x212)+_0xe4cc6b+'\x20'+_0x5ca447+'\x20#'+formatResult(_0x3ff145,0x8)+'\x20@'+formatResult(_0x555e8c,0x8));else logHistory(_0x15b4f8(0x95),''+_0x7ddf2b+_0x590d1a+_0x15b4f8(0x212)+_0xe4cc6b+'\x20'+_0x5ca447+'\x20#'+formatResult(_0x3ff145,0x8)+'\x20@'+formatResult(_0x555e8c,0x8));let _0x48eb2c;_0x822415==_0x15b4f8(0x197)?_0x5ca447==_0x15b4f8(0x127)&&[_0x15b4f8(0x1cf),'Bitget','Cex',_0x15b4f8(0x1de),_0x15b4f8(0xd6)]['includes'](config['exchange'])?_0x48eb2c=await exchange[_0x15b4f8(0xcf)](_0xe4cc6b,_0x822415,_0x5ca447,_0x3ff145,_0x555e8c):_0x48eb2c=await exchange[_0x15b4f8(0xcf)](_0xe4cc6b,_0x822415,_0x5ca447,_0x3ff145,undefined):_0x48eb2c=await exchange[_0x15b4f8(0xcf)](_0xe4cc6b,_0x822415,_0x5ca447,_0x3ff145,_0x555e8c);logger['debug'](_0x15b4f8(0x1d8)+_0x48eb2c['id']+_0x15b4f8(0x20a)+_0x4516ff);const _0x3e4808=lastOrders[_0x15b4f8(0xb0)]-0x1;if(_0x3e4808>=0x0&&lastOrders[_0x3e4808]['customId']==_0x4516ff){lastOrders[_0x3e4808][_0x15b4f8(0xd2)]=_0x48eb2c['id'];if(_0x48eb2c['amount'])lastOrders[_0x3e4808]['amount']=_0x48eb2c['amount'];if(_0x48eb2c[_0x15b4f8(0x18c)])lastOrders[_0x3e4808][_0x15b4f8(0x18c)]=_0x48eb2c[_0x15b4f8(0x18c)];lastOrders[_0x3e4808]['fee']=_0x48eb2c[_0x15b4f8(0xb1)];}if(config['cooldown']!=0x0){let _0x33d198=null;if(cooldownTracker[_0x15b4f8(0xb0)]==config[_0x15b4f8(0x147)]-0x1)_0x33d198=cooldownTracker[_0x15b4f8(0x19a)]();const _0xfbe030=getTimeStamp();cooldownTracker[_0x15b4f8(0xc8)](_0xfbe030);if(_0x33d198){const _0x1ec066=fns[_0x15b4f8(0x123)](new Date(_0xfbe030),new Date(_0x33d198));if(_0x1ec066<cooldownInterval){logHistory(_0x15b4f8(0x9b),'Executed\x20'+config[_0x15b4f8(0x147)]+_0x15b4f8(0x8e)+cooldownInterval/0x3c+_0x15b4f8(0xab)+cooldownPeriod/(0xe10*0x3e8)+_0x15b4f8(0x1ef)),coolingDown=!![];break;}}}}catch(_0xa18d6f){if(_0xa18d6f[_0x15b4f8(0x1a6)]()['includes'](_0x15b4f8(0x98)))lastOrders=lastOrders[_0x15b4f8(0x128)](_0x1a44dd=>_0x1a44dd[_0x15b4f8(0x17e)]!=_0xe4cc6b),logHistory(_0x15b4f8(0x9b),_0x15b4f8(0xa2)+_0xe4cc6b),_0x2a8ca1=!![];else{if(_0xa18d6f[_0x15b4f8(0x1a6)]()['includes'](_0x15b4f8(0x1eb)))lastOrders=lastOrders[_0x15b4f8(0x128)](_0x9e0d39=>_0x9e0d39['symbol']!=_0xe4cc6b),logHistory(_0x15b4f8(0x9b),_0x15b4f8(0x117)+_0xe4cc6b),_0x2a8ca1=!![];else{if(_0xa18d6f[_0x15b4f8(0x1a6)]()['includes'](_0x15b4f8(0x19d)))lastOrders=lastOrders[_0x15b4f8(0x128)](_0x587e52=>_0x587e52[_0x15b4f8(0x17e)]!=_0xe4cc6b),logHistory(_0x15b4f8(0x9b),_0x15b4f8(0x126)+_0xe4cc6b),logger[_0x15b4f8(0x16f)](_0xa18d6f),_0x2a8ca1=!![];else _0xa18d6f['toString']()['includes'](_0x15b4f8(0x1dd))?(lastOrders=lastOrders['filter'](_0x5bcc8d=>_0x5bcc8d[_0x15b4f8(0x17e)]!=_0xe4cc6b),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0xe4cc6b),_0x2a8ca1=!![]):(lastOrders=lastOrders['filter'](_0x6f2d99=>_0x6f2d99['symbol']!=_0xe4cc6b),await handleError(_0xa18d6f,_0x15b4f8(0x19c),_0xe4cc6b));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x15b4f8(0xb0)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3becf7=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x15b4f8(0x1c5)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3becf7);}else unlockOrders();_0x2a8ca1&&config[_0x15b4f8(0x12b)]&&(logHistory(_0x15b4f8(0x9b),_0x15b4f8(0x119)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x15b4f8(0x15e),_0x15b4f8(0x1d5)));}else{if(coolingDown)!config['headless']&&logHistory(_0x15b4f8(0x9b),_0x15b4f8(0x1e0));else lockOrders!=ORDERS[_0x15b4f8(0xb9)]&&(!config[_0x15b4f8(0x12b)]&&(config[_0x15b4f8(0x15f)]=='market'?logHistory(_0x15b4f8(0x9b),_0x15b4f8(0xd0)):logHistory(_0x15b4f8(0x9b),_0x15b4f8(0xf4))));}}function persistOpenOrders(_0xe47420){const _0x188c98=_0x17f3a0,_0x463ba9={...config,'openOrders':_0xe47420};let _0x33ba36=dbConfig[_0x188c98(0xfa)](_0x188c98(0xa3))['find']({'botID':botID})[_0x188c98(0x1db)]();_0x33ba36&&dbConfig[_0x188c98(0xfa)](_0x188c98(0xa3))[_0x188c98(0x7e)]({'botID':botID})[_0x188c98(0xce)](_0x463ba9)['write']();}function restoreOrders(){const _0x4a349a=_0x17f3a0;let _0x295f1d;config[_0x4a349a(0xcb)]&&allOpenOrders[_0x4a349a(0x1aa)](_0x2bf9c4=>{const _0x576520=_0x4a349a,_0x53bbe9=config[_0x576520(0xcb)][_0x576520(0x7e)](_0x347aab=>_0x347aab[_0x576520(0xd2)]==_0x2bf9c4['id']);_0x53bbe9&&(lastOrders[_0x576520(0xc8)](_0x53bbe9),_0x295f1d=_0x2bf9c4[_0x576520(0x7b)]);});if(lastOrders[_0x4a349a(0xb0)]>0x0){lockOrders=ORDERS[_0x4a349a(0x192)],validateOrdersState=_0x4a349a(0x10b),allOrdersPlaced=!![];const _0x1da1eb=new Date()['getTime'](),_0x39e825=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4a349a(0x1c5)]*0x3c*0x3e8;if(_0x295f1d+_0x39e825>_0x1da1eb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x100053=_0x4a349a;validateOrders(_0x100053(0x136));},_0x295f1d+_0x39e825-_0x1da1eb);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x53cb08=_0x17f3a0;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3ca018=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x276465='';if(config[_0x53cb08(0x135)])_0x276465=_0x53cb08(0x14c)+config[_0x53cb08(0x120)]+_0x53cb08(0x20f);else _0x276465=_0x53cb08(0x187)+botID+_0x53cb08(0x20f);const _0x24aa00=getKPIs(_0x53cb08(0x9f)),_0x3c6456=getKPIs(_0x53cb08(0xac),config[_0x53cb08(0xac)]),_0x21bf66=getKPIs(_0x53cb08(0x168)),_0x3b86ba=getKPIs(_0x53cb08(0xcc),config[_0x53cb08(0xac)]);_0x276465+=_0x53cb08(0x14b),_0x276465+=_0x24aa00[_0x53cb08(0xf5)]+_0x53cb08(0x1cd)+_0x24aa00[_0x53cb08(0x1db)]+'\x0a',_0x276465+=_0x24aa00[_0x53cb08(0x7c)]+':\x20'+_0x24aa00[_0x53cb08(0x10f)]+'%\x0a',_0x276465+=_0x3c6456[_0x53cb08(0xf5)]+_0x53cb08(0x1cd)+_0x3c6456[_0x53cb08(0x1db)]+'\x0a',_0x276465+=_0x3c6456['rightTxt']+':\x20'+_0x3c6456['change']+'%\x0a',_0x276465+=_0x21bf66['leftTxt']+':\x20'+_0x21bf66[_0x53cb08(0x1db)]+'\x20('+config[_0x53cb08(0x9f)]+')\x0a',_0x276465+=_0x21bf66[_0x53cb08(0x7c)]+':\x20'+_0x21bf66[_0x53cb08(0x10f)]+_0x53cb08(0x205)+config[_0x53cb08(0x9f)]+')\x0a',_0x276465+=_0x3b86ba[_0x53cb08(0xf5)]+':\x20'+_0x3b86ba[_0x53cb08(0x1db)]+'\x20('+config[_0x53cb08(0xac)]+')\x0a',_0x276465+=_0x3b86ba[_0x53cb08(0x7c)]+':\x20'+_0x3b86ba[_0x53cb08(0x10f)]+_0x53cb08(0x205)+config[_0x53cb08(0xac)]+')\x0a',_0x276465+='</pre>',process[_0x53cb08(0x10c)]({'telegrammsg':_0x276465},_0x2954a1=>{});}async function sendPortfolioTelegram(){const _0x35210f=_0x17f3a0;if(!coinsLoaded){process['send']({'telegrammsg':_0x35210f(0x18a)},_0x393823=>{});return;}let _0x4e1a60='';if(config[_0x35210f(0x135)])_0x4e1a60='<b>'+config[_0x35210f(0x120)]+_0x35210f(0x178);else _0x4e1a60='<b>Bot\x20'+botID+_0x35210f(0x178);_0x4e1a60+=_0x35210f(0x14b),_0x4e1a60+='-------------------------------\x0a',_0x4e1a60+=_0x35210f(0x1e8),_0x4e1a60+='-------------------------------\x0a',currentCoins['forEach'](_0x4ade66=>{const _0x2c667f=_0x35210f;_0x4e1a60+=_0x4ade66[_0x2c667f(0x134)][_0x2c667f(0x1bd)](0x7)+'|\x20'+formatPad(_0x4ade66[_0x2c667f(0x1ee)],0x2,0x6)+'|\x20'+formatPad(_0x4ade66[_0x2c667f(0x15d)],0x2,0x6)+'|\x20'+formatPad(_0x4ade66['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4e1a60+=_0x35210f(0x1b4),process[_0x35210f(0x10c)]({'telegrammsg':_0x4e1a60},_0x12521c=>{});}function formatPad(_0x52c034,_0x4d6213,_0x3ea5d5){const _0xc0038d=_0x17f3a0,_0x350b76=formatResultString(_0x52c034,_0x4d6213);return _0x350b76?_0x350b76[_0xc0038d(0x9e)](_0x3ea5d5):''[_0xc0038d(0x9e)](_0x3ea5d5);}function logHistory(_0x5e5ec3,_0x2b46b8,_0x21cdc0=''){const _0x1d227c=_0x17f3a0;logger[_0x1d227c(0x158)](''+_0x2b46b8);let _0x6ebd3e={'time':getTimeStamp(),'type':_0x5e5ec3,'event':_0x2b46b8};dbLogs[_0x1d227c(0xfa)](_0x1d227c(0x97))['push'](_0x6ebd3e)[_0x1d227c(0xe3)]();if(_0x21cdc0=='')_0x21cdc0=_0x2b46b8;proxyEmit('event',{'log':_0x6ebd3e,'summary':_0x21cdc0}),process[_0x1d227c(0x10c)]({'telegram':{..._0x6ebd3e,'botname':config[_0x1d227c(0x120)],'showname':config[_0x1d227c(0x135)]}},_0x5736c9=>{});}function emitHistory(_0x3d4f2e={}){const _0x284513=_0x17f3a0;Object[_0x284513(0x13c)](_0x3d4f2e)[_0x284513(0xb0)]==0x0&&(_0x3d4f2e={'type':['order',_0x284513(0x15b)],'event':'','page':0x1});if(_0x3d4f2e['type'][_0x284513(0x198)](_0x284513(0x15b)))_0x3d4f2e['type']['splice'](_0x3d4f2e[_0x284513(0x80)][_0x284513(0x104)](_0x284513(0x15b)),0x1,'error',_0x284513(0xb3),_0x284513(0x15e));if(dbLogs[_0x284513(0x142)](_0x284513(0x97))[_0x284513(0x1db)]()){let _0x48518f=dbLogs[_0x284513(0xfa)](_0x284513(0x97))[_0x284513(0x128)](_0x1fbb6a=>{const _0x5cabc7=_0x284513;if(_0x3d4f2e['type'][_0x5cabc7(0xb0)]==0x0)return![];else return _0x3d4f2e[_0x5cabc7(0x80)][_0x5cabc7(0x198)](_0x1fbb6a['type']);})[_0x284513(0x128)](_0x107027=>{const _0x2f1ca4=_0x284513;if(_0x3d4f2e[_0x2f1ca4(0x15b)]=='')return!![];else return _0x107027[_0x2f1ca4(0x15b)]['toLowerCase']()[_0x2f1ca4(0x198)](_0x3d4f2e['event'][_0x2f1ca4(0x184)]());})[_0x284513(0xde)](_0x284513(0x13e)),_0x59567b=_0x48518f[_0x284513(0x1db)]()[_0x284513(0xb0)];_0x48518f=_0x48518f[_0x284513(0x155)]()['slice']((_0x3d4f2e[_0x284513(0x115)]-0x1)*logPageSize,_0x3d4f2e['page']*logPageSize-0x1)[_0x284513(0x155)]()['value'](),proxyEmit(_0x284513(0xf7),{'logs':_0x48518f,'total':_0x59567b});}else proxyEmit(_0x284513(0xf7),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x23ef9b){const _0x272524=_0x17f3a0;if(dbLogs[_0x272524(0x142)]('logs')[_0x272524(0x1db)]()){const _0x455359=dbLogs['get'](_0x272524(0x97))[_0x272524(0xde)](_0x272524(0x13e))['filter'](_0x1b3c4b=>{const _0x5d4925=_0x272524;return _0x1b3c4b[_0x5d4925(0x80)]=='order';})[_0x272524(0x1db)]();dbLogs['get'](_0x272524(0x97))[_0x272524(0xfe)]()[_0x272524(0xe3)](),dbLogs[_0x272524(0xfa)]('logs')[_0x272524(0xce)](_0x455359)[_0x272524(0xe3)](),emitHistory(_0x23ef9b);}}async function pauseBot(_0x42d46d=pauseBotInterval){const _0x36c191=_0x17f3a0,_0x307d8a=new Date()[_0x36c191(0xfd)]();if(!lastErrorShown||_0x307d8a-lastErrorShown>=_0x42d46d){lastErrorShown=_0x307d8a;!lastBotPause?(lastBotPause=_0x307d8a,consecutivePauses=0x1):(_0x307d8a-lastBotPause-_0x42d46d<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x36c191(0x10c)]({'stop':_0x36c191(0xe8)},_0x7f7795=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x36c191(0xfd)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x42d46d),botPaused=![],reset(!![]);}}}async function killBot(){const _0x73d9ee=_0x17f3a0;botPaused=!![],await sleep(0x3e8),process[_0x73d9ee(0x10c)]({'stop':_0x73d9ee(0x163)},_0x2ffca3=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x39b212,_0x55e53b){const _0x4439ab=_0x17f3a0;if(botPaused)return;const _0x3fd0be=config[_0x4439ab(0xe5)]||_0x4439ab(0x1ae);if(_0x55e53b)logger[_0x4439ab(0x16f)](_0x4439ab(0x14e)+_0x55e53b);const _0x4d980d=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x39b212['toString']()[_0x4439ab(0x198)](_0x4439ab(0x209)))logHistory(_0x4439ab(0x9b),_0x3fd0be+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x4d980d();else{if(_0x39b212[_0x4439ab(0x1a6)]()[_0x4439ab(0x198)](_0x4439ab(0x1ff)))logHistory(_0x4439ab(0x9b),_0x3fd0be+_0x4439ab(0xb4)),_0x4d980d();else _0x39b212[_0x4439ab(0x1a6)]()[_0x4439ab(0x198)](_0x4439ab(0x9a))?(logHistory(_0x4439ab(0x9b),_0x3fd0be+_0x4439ab(0x1a8)),logHistory(_0x4439ab(0x9b),_0x4439ab(0x193)),_0x4d980d()):await handleError(_0x39b212,null);}}async function handleError(_0x43942a,_0x4b168d,_0x44f856=''){const _0x391a6a=_0x17f3a0;if(botPaused)return;const _0x36659c=config[_0x391a6a(0xe5)]||'Exchange';if(_0x4b168d)logger[_0x391a6a(0x16f)](_0x391a6a(0x14e)+_0x4b168d);if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)](_0x391a6a(0xfb)))logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x1b9)+pauseBotMsg),logger[_0x391a6a(0x16f)](_0x391a6a(0x1e3),_0x43942a),await pauseBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()['includes'](_0x391a6a(0x1f4)))logHistory(_0x391a6a(0x9b),_0x36659c+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x391a6a(0x16f)](_0x391a6a(0x1e3),_0x43942a),await pauseBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()['includes'](_0x391a6a(0x173))||_0x43942a[_0x391a6a(0x1a6)]()['includes'](_0x391a6a(0x165)))logHistory('error',_0x36659c+_0x391a6a(0x1ac)+pauseBotMsg),await pauseBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)]('RequestTimeout'))logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x180)+pauseBotMsg),await pauseBot();else{if(_0x43942a['toString']()[_0x391a6a(0x198)](_0x391a6a(0xb6)))logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x160)+pauseBotMsg),await pauseBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x184)]()['includes'](_0x391a6a(0x7b))||_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x184)]()['includes'](_0x391a6a(0x1ab))){const _0x2aed67=_0x43942a[_0x391a6a(0x1a6)]()['toLowerCase']();let _0x50ede6=![];if((config[_0x391a6a(0xe5)]==_0x391a6a(0x103)||config[_0x391a6a(0xe5)]=='Binanceus')&&(_0x2aed67['includes'](_0x391a6a(0x12c)[_0x391a6a(0x184)]())||_0x2aed67[_0x391a6a(0x198)](_0x391a6a(0xdd)[_0x391a6a(0x184)]())))_0x50ede6=!![];if(config[_0x391a6a(0xe5)]=='Kucoin'&&_0x2aed67['includes'](_0x391a6a(0x125)[_0x391a6a(0x184)]()))_0x50ede6=!![];if(config[_0x391a6a(0xe5)]==_0x391a6a(0x1cf)&&_0x2aed67[_0x391a6a(0x198)]('invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param'[_0x391a6a(0x184)]()))_0x50ede6=!![];if(config[_0x391a6a(0xe5)]==_0x391a6a(0x93)&&_0x2aed67[_0x391a6a(0x198)](_0x391a6a(0x1b0)[_0x391a6a(0x184)]()))_0x50ede6=!![];if((config[_0x391a6a(0xe5)]==_0x391a6a(0x1c4)||config[_0x391a6a(0xe5)]==_0x391a6a(0x1f1))&&_0x2aed67[_0x391a6a(0x198)](_0x391a6a(0x118)['toLowerCase']()))_0x50ede6=!![];_0x50ede6?logHistory('error',_0x391a6a(0xd1)+pauseBotMsg):logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains'+pauseBotMsg),logger['debug'](_0x391a6a(0x1e3),_0x43942a[_0x391a6a(0x1a6)]()),await pauseBot();}else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)]('InvalidNonce'))logHistory(_0x391a6a(0x9b),_0x36659c+'\x20rejected\x20your\x20API\x20request'+pauseBotMsg),logger[_0x391a6a(0x16f)](_0x391a6a(0x1e3),_0x43942a),await pauseBot();else{if(_0x43942a instanceof ccxt[_0x391a6a(0xa0)])logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x1be)+pauseBotMsg),logger[_0x391a6a(0x16f)](_0x391a6a(0x1e3),_0x43942a),await pauseBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)](_0x391a6a(0x209)))logHistory(_0x391a6a(0x9b),_0x36659c+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x391a6a(0x9b),_0x391a6a(0x14a)),await killBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x36659c+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x391a6a(0x9b),_0x391a6a(0x14a)),await killBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)]('AuthenticationError'))logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x11e)),logHistory('error',_0x391a6a(0x14a)),await killBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)](_0x391a6a(0x129)))logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x150)),logHistory(_0x391a6a(0x9b),_0x391a6a(0x14a)),await killBot();else{if(_0x43942a[_0x391a6a(0x1a6)]()[_0x391a6a(0x198)](_0x391a6a(0xc5)))logHistory(_0x391a6a(0x9b),_0x391a6a(0x177)+_0x44f856);else _0x43942a instanceof ccxt['ExchangeError']?(logHistory(_0x391a6a(0x9b),_0x36659c+_0x391a6a(0x17d)),logger[_0x391a6a(0x16f)](_0x391a6a(0x1e3),_0x43942a)):(logHistory(_0x391a6a(0x9b),_0x391a6a(0x12a)+pauseBotMsg),logger[_0x391a6a(0x16f)]('Error\x20details:',_0x43942a),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x19c7cb,_0x4123b4){const _0x5c8d0d=_0x17f3a0;return parseFloat(_0x19c7cb[_0x5c8d0d(0x1d7)](_0x4123b4));}function formatResultTruncate(_0xf84530,_0x3ff5d5){const _0x25d545=_0x17f3a0;let _0x534e7d=formatResultString(_0xf84530,0xa),_0x4f6c40=_0x534e7d[_0x25d545(0x104)]('.');return _0x4f6c40!=-0x1&&(_0x534e7d=_0x534e7d[_0x25d545(0x210)](0x0,_0x4f6c40+_0x3ff5d5+0x1)),Number(_0x534e7d);}function formatResultString(_0x1c6331,_0x598a36){const _0x898ca5=_0x17f3a0;let _0x4450b8;if(!(''+_0x1c6331)[_0x898ca5(0x198)]('e'))_0x4450b8=+(Math[_0x898ca5(0x199)](_0x1c6331+'e+'+_0x598a36)+'e-'+_0x598a36);else{let _0x5b439b=(''+_0x1c6331)['split']('e'),_0x175031='';+_0x5b439b[0x1]+_0x598a36>0x0&&(_0x175031='+'),_0x4450b8=+(Math[_0x898ca5(0x199)](+_0x5b439b[0x0]+'e'+_0x175031+(+_0x5b439b[0x1]+_0x598a36))+'e-'+_0x598a36);}return Number(_0x4450b8)['toFixed'](_0x598a36);}function getServerTime(){const _0x37a9e5=_0x17f3a0,_0x25f094=new Date();return _0x25f094[_0x37a9e5(0x145)]()+'/'+(_0x25f094['getMonth']()+0x1)[_0x37a9e5(0x1a6)]()[_0x37a9e5(0x9e)](0x2,'0')+'/'+_0x25f094[_0x37a9e5(0x170)]()[_0x37a9e5(0x1a6)]()[_0x37a9e5(0x9e)](0x2,'0')+'\x20'+_0x25f094['getHours']()[_0x37a9e5(0x1a6)]()[_0x37a9e5(0x9e)](0x2,'0')+':'+_0x25f094[_0x37a9e5(0x14f)]()[_0x37a9e5(0x1a6)]()[_0x37a9e5(0x9e)](0x2,'0')+':'+_0x25f094[_0x37a9e5(0xcd)]()['toString']()[_0x37a9e5(0x9e)](0x2,'0');}function getTimeStamp(){const _0x276cb7=_0x17f3a0,_0x5e0e9a=shiftedTime();return _0x5e0e9a['getFullYear']()+'/'+(_0x5e0e9a[_0x276cb7(0x179)]()+0x1)[_0x276cb7(0x1a6)]()[_0x276cb7(0x9e)](0x2,'0')+'/'+_0x5e0e9a[_0x276cb7(0x170)]()[_0x276cb7(0x1a6)]()[_0x276cb7(0x9e)](0x2,'0')+'\x20'+_0x5e0e9a[_0x276cb7(0x87)]()[_0x276cb7(0x1a6)]()['padStart'](0x2,'0')+':'+_0x5e0e9a['getMinutes']()[_0x276cb7(0x1a6)]()[_0x276cb7(0x9e)](0x2,'0')+':'+_0x5e0e9a['getSeconds']()['toString']()[_0x276cb7(0x9e)](0x2,'0');}function getDate(){const _0x5f1075=_0x17f3a0,_0x264d1c=shiftedTime();return _0x264d1c[_0x5f1075(0x145)]()+'/'+(_0x264d1c[_0x5f1075(0x179)]()+0x1)[_0x5f1075(0x1a6)]()[_0x5f1075(0x9e)](0x2,'0')+'/'+_0x264d1c[_0x5f1075(0x170)]()[_0x5f1075(0x1a6)]()[_0x5f1075(0x9e)](0x2,'0');}function getHour(){const _0x228dc7=_0x17f3a0,_0x5e195c=shiftedTime();return _0x5e195c['getHours']()[_0x228dc7(0x1a6)]()[_0x228dc7(0x9e)](0x2,'0');}function sleep(_0x1e9dbf){return new Promise(_0x2a1d91=>setTimeout(_0x2a1d91,_0x1e9dbf));}function shiftedTime(){const _0x5216f8=_0x17f3a0,_0x2a459f=new Date();let _0x32407f=_0x2a459f;if(config&&config[_0x5216f8(0x13b)]!==0x0)_0x32407f=fns[_0x5216f8(0x1ed)](_0x2a459f,{'hours':config['timeshift']});return _0x32407f;}function timer(_0x27bb8d){const _0x59b56b=_0x17f3a0,_0x254e5e=new Date();!lasttime?console[_0x59b56b(0xad)](getTimeStamp()+_0x59b56b(0x1cc),_0x27bb8d,_0x254e5e):console['log'](getTimeStamp()+_0x59b56b(0x1cc),_0x27bb8d,(_0x254e5e-lasttime)/0x3e8),lasttime=_0x254e5e;}