const _0x41221a=_0x10e6;(function(_0x318219,_0x24dbb2){const _0x422829=_0x10e6,_0x18180b=_0x318219();while(!![]){try{const _0x2c40c1=-parseInt(_0x422829(0x131))/0x1*(-parseInt(_0x422829(0x125))/0x2)+-parseInt(_0x422829(0x1d9))/0x3+-parseInt(_0x422829(0x1ee))/0x4+parseInt(_0x422829(0x224))/0x5*(parseInt(_0x422829(0x28c))/0x6)+-parseInt(_0x422829(0x1f0))/0x7+-parseInt(_0x422829(0x1a8))/0x8*(-parseInt(_0x422829(0x136))/0x9)+-parseInt(_0x422829(0x2a5))/0xa*(-parseInt(_0x422829(0x26e))/0xb);if(_0x2c40c1===_0x24dbb2)break;else _0x18180b['push'](_0x18180b['shift']());}catch(_0x574a98){_0x18180b['push'](_0x18180b['shift']());}}}(_0x1d18,0x1c535));const _0x658bf=function(){let _0xe55f1c=!![];return function(_0x5c65a1,_0x386194){const _0x2d5948=_0xe55f1c?function(){const _0x2e08f4=_0x10e6;if(_0x386194){const _0x5d990e=_0x386194[_0x2e08f4(0x257)](_0x5c65a1,arguments);return _0x386194=null,_0x5d990e;}}:function(){};return _0xe55f1c=![],_0x2d5948;};}(),_0x4104d6=_0x658bf(this,function(){const _0x4f7a89=_0x10e6;return _0x4104d6[_0x4f7a89(0x1f7)]()[_0x4f7a89(0x26b)]('(((.+)+)+)+$')[_0x4f7a89(0x1f7)]()[_0x4f7a89(0x22e)](_0x4104d6)[_0x4f7a89(0x26b)](_0x4f7a89(0x29e));});_0x4104d6();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x41221a(0x1dc)),fs=require('fs'),fns=require(_0x41221a(0x1d4)),Crypt=require(_0x41221a(0x1b1))['Crypt'],util=require(_0x41221a(0x1ba)),argv=require(_0x41221a(0x26d))(process[_0x41221a(0x15c)]['slice'](0x2))['argv'],path=require(_0x41221a(0x227));let exchange;global['ticker']={},global[_0x41221a(0x1cf)]={};const usdBasecoins=[_0x41221a(0x171),_0x41221a(0x299),'TUSD','USDT',_0x41221a(0x17b),_0x41221a(0x26c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x41221a(0x204)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x41221a(0x20f))['version'],botID=process[_0x41221a(0x15c)][0x2]||_0x41221a(0x139),pattern=/^[0-9]{3}$/;!pattern[_0x41221a(0x177)](botID)&&(console[_0x41221a(0x1b9)](_0x41221a(0x253)+botID+_0x41221a(0x244)),killBot());const userID=process[_0x41221a(0x15c)][0x3]||'',configpath=userID?_0x41221a(0x2ac)+userID+'/':_0x41221a(0x2ac),logspath=userID?_0x41221a(0x24b)+userID+'/':_0x41221a(0x24b),loggerfile=fs['createWriteStream'](logspath+_0x41221a(0x279),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x41221a(0x1e7)](configpath);!fs[_0x41221a(0x16a)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x41221a(0x135),logfile=configpath+_0x41221a(0x225)+botID+_0x41221a(0x29d),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x41221a(0x225)+botID+_0x41221a(0x286),settingsfile=configpath+_0x41221a(0x167),securefile=configpath+_0x41221a(0x25e),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x41221a(0x193)]({'logs':[],'version':serverversion})[_0x41221a(0x126)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x41221a(0x193)]({'data':[],'version':serverversion})[_0x41221a(0x126)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x41221a(0x193)]({'bot':[],'version':serverversion})[_0x41221a(0x126)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x41221a(0x193)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;function _0x1d18(){const _0x1b6cfa=['path','\x20not\x20responding','cancelLoading','apiPassword','API-key\x20format\x20invalid','************','\x20closed\x20the\x20connection','constructor','highest','changes','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','watchOrders','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','average','timestamp','OrderNotFound','configuration','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','offset','getPortfolio(1)','final','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','balancing\x20resumed','watchTransactions','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','fee','valid','showname','stringify',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20Custom\x20ID:\x20','exchange','has','entries','startprice','Order\x20is\x20invalid:\x20','./logs/','writeFile','DDoSProtection','set','amountToPrecision','Error\x20while\x20deleting\x20files:\x20','send','splice','Error:\x20Invalid\x20argument\x20','fetchTicker','enabled','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','apply','sortBy','1\x20-\x20Validate\x20orders:\x20','push','apiSecret','event-history','target','bb-secure.json','%\x20(','orderstatus','uncaughtException','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started',':\x20Bot\x20','password','toggleBotMode','loadMarkets','exchanges','number','logs','sha256','search','USDP','yargs/yargs','22naWGtY','cancelOrder','abs','sort','floor','coins','restart','getDate','timeshift','bot','\x20hour','/output-000.log','/USD','datetime','differenceInSeconds','filled','substring','2.3.5','getPortfolio(0)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','2\x20-\x20FILLED\x20known\x20order:\x20','Reset\x20|\x20','trade','limits','-results.json','UNLOCKED','\x20change','event','netoffset','privateKey','24vgVkhH','exchange\x20not\x20reloaded','isEqual','keys','startnumber','LOCKED','BNB/','format','cost','EUR','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Exchange','\x20minutes','BUSD','status','length','limit-high','-events.json','(((.+)+)+)+$','none','watchTrades','getTime','RequestTimeout','initclient','page','2006360JAJMsg','coin-loading-progress','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','InvalidNonce','recreate','Portfolio\x20change\x20detected:\x20','getCoins()','./config/','Invalid\x20quantity','recreateCoinResults()','NetworkError','87742zJVpSI','write','\x20>\x20','remainingSymbols','\x20|\x20','getSeconds','order','time','random','ordertype','padStart','value','1BbHcQZ','liquidity','onepagemode','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','-config.json','787239EdEITf','error','parseISO','001','***','warning','createOrder','autoliquidity','closed','\x20metrics:</b>\x20\x0a\x0a','AuthenticationError','data','forEach','distribution','<pre>','showConfig','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','must\x20be\x20greater\x20than\x20minimum\x20amount','get','placeOrder()','Manual\x20balancing\x20required','resetHistory','debug','Pausing\x20for\x20','symbol','starting-balances','botname','ExchangeError','leftTxt','toFixed','findIndex','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20Error\x20details:\x20','-performance.json','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20|\x20exchange:\x20','0\x20-\x20EXECUTION:\x20','version','argv','milliseconds','ID:\x20','recent20','cloneDeep','timeout','Resetting\x20bot\x20history','unlinkSync','storeConfiguration','InvalidOrder','date','bb-settings.json','added','ORDERS.UNLOCKED','existsSync','starting-balance-','slice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','net-fiat','remove','sendMetricsTelegram','USD','Transaction\x20detection\x20blocked','startsWith','total','pro','openOrders','test','Bot\x20','reverse','recovery','USDC','filter','split','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','breakeven','change24h','\x20network\x20error','red_yellow_blue','apiKey','canceled','max','add','ongoing','UNLOCKING','excluded','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','bots','ticker','performance','\x20|\x20lock\x20orders:\x20','eur','includes','yyyy-MM-dd\x27T\x27HH:mm:ss','defaults','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','emojibuy','</pre>','round','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','-------------------------------\x0a','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','exec','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','full','usd','BNB','Net\x20effect','Cooldown\x20ended\x20-\x20balancing\x20resumed','toLowerCase','1\x20-\x20Unlock\x20orders','loadSymbols()','toUpperCase','ORDERS.LOCKED','open','8lGkgwy','close','balances','fetchBalance','2.6.0','Limit\x20(high-margin)','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','padEnd','active','hybrid-crypto-js','\x20>\x20[DEBUG]\x20','kill','assign','parse','net-basecoin','success','percentage','log','util','Executed\x20','sells','Initializing\x20coin\x20results','startdate','settings','find','type','side','2\x20-\x20Handled\x20open\x20orders','ask','fiat','getMinutes','initial','buys','fetchOpenOrders','function','\x20|\x20highest\x20fee:\x20','2\x20-\x20Validate\x20orders:\x20','Unknown\x20error\x20occured','portfolio','change','Order\x20filled:\x20','OnMaintenance','\x20not\x20available','currency','date-fns','decrypt','coin','basecoinvalue','RateLimitExceeded','295044gmAcIw','\x20API\x20key\x20is\x20invalid','running','lowdb/adapters/FileSync','removed','customId','Resetting\x20coin\x20results:\x20','\x20order:\x20','progress','InsufficientFunds','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','fromCodePoint','min','getHours','mkdirSync','Waited\x20','rightTxt','getStartingBalances','ExchangeNotAvailable','\x20has\x20a\x2024h\x20drop\x20of\x20','colorscheme','812744rPltQe','market','1183161SeIKws','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','getPortfolio','Transaction\x20detection\x20unblocked','indexOf','balancing\x20resumes\x20when\x20cooldown\x20ends','replace','toString','no\x20open\x20orders','message','Limit\x20(low-margin)','No\x20more\x20open\x20orders\x20-\x20','cancelOrders()','yyyy/MM/dd','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','delta','/EUR','cooldown','buy','\x20:\x20','freeze','Net\x20','threshold','amount','headless',':\x20timer\x20>','Market','join','RSA-OAEP','<b>','getMonth','./version.json','ETH','emojisell','shift','orderId','args','cancel','basecoin','fetchTickers','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','last','sell','Binance','fetchClosedOrders','Saving\x20configuration','getFullYear','\x20orders\x20in\x20less\x20than\x20','sendPortfolioTelegram','spot','no\x20additional\x20symbols','67455SDLteO','bot-','BTC'];_0x1d18=function(){return _0x1b6cfa;};return _0x1d18();}const crypt=new Crypt({'md':_0x41221a(0x26a),'rsaStandard':_0x41221a(0x20c)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x480eea=>{console['log'](_0x480eea);},'simple':_0x26cbae=>{const _0x394cc9=_0x41221a;console[_0x394cc9(0x1b9)](_0x26cbae),loggerfile['write'](util['format'](_0x26cbae)+'\x0a');},'full':async(_0x4aa72f,_0x1c8ed9='')=>{const _0x324491=_0x41221a;let _0x1b073e;if(config[_0x324491(0x242)])_0x1b073e=getTimeStamp()+':\x20'+config[_0x324491(0x150)]+_0x324491(0x127)+_0x4aa72f;else _0x1b073e=getTimeStamp()+_0x324491(0x263)+botID+_0x324491(0x127)+_0x4aa72f;console['log'](_0x1b073e),loggerfile['write'](util[_0x324491(0x293)](_0x1b073e)+'\x0a'),_0x1c8ed9&&(console[_0x324491(0x1b9)](_0x1c8ed9),loggerfile[_0x324491(0x126)](util['format'](_0x1c8ed9)+'\x0a'));},'debug':async(_0x5034b1,_0x31ec00='')=>{const _0x32711d=_0x41221a;let _0x5643e2;if(config[_0x32711d(0x242)])_0x5643e2=getTimeStamp()+':\x20'+config[_0x32711d(0x150)]+'\x20>\x20[DEBUG]\x20'+_0x5034b1;else _0x5643e2=getTimeStamp()+_0x32711d(0x263)+botID+_0x32711d(0x1b2)+_0x5034b1;if(debugging)console[_0x32711d(0x1b9)](_0x5643e2);loggerfile[_0x32711d(0x126)](util['format'](_0x5643e2)+'\x0a');if(_0x31ec00){if(debugging)console[_0x32711d(0x1b9)](_0x31ec00);loggerfile[_0x32711d(0x126)](util['format'](_0x31ec00)+'\x0a');}}};process['on'](_0x41221a(0x261),function(_0x418f81){const _0x44aa80=_0x41221a;logHistory(_0x44aa80(0x137),_0x44aa80(0x231)),logger['debug']('Uncaught\x20Exception:',_0x418f81);});settings['timeshift']!=config[_0x41221a(0x276)]&&updateTimeshift(settings[_0x41221a(0x276)]);settings['onepagemode']!=config[_0x41221a(0x133)]&&updateOnepagemode(settings[_0x41221a(0x133)]);process[_0x41221a(0x251)]({'started':_0x41221a(0x1db)},_0x3af6ed=>{}),initializeProcessListeners();function proxyEmit(_0x57eb82,_0x3f73c2=null){const _0x3ab4ae=_0x41221a;process[_0x3ab4ae(0x251)]({'function':_0x57eb82,'args':_0x3f73c2},_0x2af313=>{});}function initializeProcessListeners(){const _0x518c89=_0x41221a;process['on'](_0x518c89(0x1f9),_0x258e29=>{const _0x2bc1fb=_0x518c89;switch(Object[_0x2bc1fb(0x28f)](_0x258e29)[0x0]){case'timeshift':_0x258e29[_0x2bc1fb(0x276)]!=undefined&&(settings[_0x2bc1fb(0x276)]=_0x258e29[_0x2bc1fb(0x276)],updateTimeshift(settings[_0x2bc1fb(0x276)]));break;case _0x2bc1fb(0x133):_0x258e29[_0x2bc1fb(0x133)]!=undefined&&(settings[_0x2bc1fb(0x133)]=_0x258e29[_0x2bc1fb(0x133)],updateOnepagemode(settings[_0x2bc1fb(0x133)]));break;case _0x2bc1fb(0x18c):_0x258e29[_0x2bc1fb(0x18c)]!=undefined&&(bots=JSON['parse'](_0x258e29[_0x2bc1fb(0x18c)]),proxyEmit(_0x2bc1fb(0x18c),bots));break;case'function':switch(_0x258e29[_0x2bc1fb(0x1ca)]){case _0x2bc1fb(0x2a3):initclient();break;case _0x2bc1fb(0x265):toggleBotMode();break;case'emitHistory':emitHistory(_0x258e29[_0x2bc1fb(0x214)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x258e29['args']);break;case _0x2bc1fb(0x1f2):getPortfolio(_0x258e29[_0x2bc1fb(0x214)]);break;case _0x2bc1fb(0x164):storeConfiguration(_0x258e29[_0x2bc1fb(0x214)]);break;case'storeHeadless':storeHeadless(_0x258e29[_0x2bc1fb(0x214)]);break;case'storeFiat':storeFiat(_0x258e29[_0x2bc1fb(0x214)]);break;case _0x2bc1fb(0x14b):resetHistory();break;case _0x2bc1fb(0x1ea):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x258e29['args']);break;case _0x2bc1fb(0x229):cancelLoading();break;case _0x2bc1fb(0x145):showConfig();break;case _0x2bc1fb(0x170):sendMetricsTelegram();break;case _0x2bc1fb(0x221):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x23a837=null,_0x2db8c6=![]){const _0x453127=_0x41221a;logger[_0x453127(0x14c)](_0x453127(0x283)+(_0x23a837&&_0x23a837['length']>0x0?'additional\x20symbols\x20'+_0x23a837[_0x453127(0x20b)](','):_0x453127(0x223))+_0x453127(0x129)+(_0x2db8c6?'exchange\x20reloaded':_0x453127(0x28d))+_0x453127(0x159)+config[_0x453127(0x246)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2db8c6)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x453127(0x183)]!=''&&config[_0x453127(0x183)]!='***'){if(_0x2db8c6){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x33e516){handleErrorNoStop(_0x33e516,_0x453127(0x1a4));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x23a837);const _0x2660d0=await getCoins();[currentCoins,currentCoinsAll]=_0x2660d0,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x453127(0x29b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xf79fa2=_0x41221a;exchangeStopped=!![],await exchange[_0xf79fa2(0x1a9)]();}async function reloadExchange(){const _0x57617d=_0x41221a;logger[_0x57617d(0x14c)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x57617d(0x287)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x57617d(0x14c)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x532829=config[_0x41221a(0x246)],_0x22096c=config[_0x41221a(0x183)],_0x5f3c87=config[_0x41221a(0x25b)],_0x150d23=config[_0x41221a(0x22a)]){const _0x51af0d=_0x41221a;exchange&&await stopExchange();!supportedExchanges()[_0x51af0d(0x191)](_0x532829)&&(logHistory('error',_0x51af0d(0x1ae)+_0x532829+'\x20exchange'),killBot());const _0x163850=ccxt[_0x51af0d(0x175)][_0x532829[_0x51af0d(0x1a2)]()];exchange=new _0x163850({'apiKey':_0x22096c,'secret':_0x5f3c87,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x51af0d(0x222)}});if(_0x150d23)exchange[_0x51af0d(0x264)]=_0x150d23;}function setStableCoins(){const _0x4788dc=_0x41221a;let _0x275d51=config[_0x4788dc(0x216)]==_0x4788dc(0x210)?_0x4788dc(0x210):_0x4788dc(0x226),_0x19e5bb=!allSymbols['includes'](_0x275d51+_0x4788dc(0x27a))?'USDT':_0x4788dc(0x171),_0x17436e=!allSymbols[_0x4788dc(0x191)](_0x275d51+_0x4788dc(0x200))?_0x19e5bb:_0x4788dc(0x295);stablecoins={'eur':{'coin':''+_0x275d51+_0x17436e,'symbol':_0x275d51+'/'+_0x17436e},'usd':{'coin':''+_0x275d51+_0x19e5bb,'symbol':_0x275d51+'/'+_0x19e5bb}};}async function initwsCcxt(_0x26869f){const _0x5222f4=_0x41221a;_0x26869f==null&&(_0x26869f=[],config[_0x5222f4(0x1ce)][_0x5222f4(0x142)](_0xcb0bcd=>{const _0x15eed5=_0x5222f4;if(!_0xcb0bcd[_0x15eed5(0x189)]&&_0xcb0bcd['coin']!=config['basecoin'])_0x26869f[_0x15eed5(0x25a)](_0xcb0bcd[_0x15eed5(0x14e)]);}));if(!_0x26869f[_0x5222f4(0x191)](stablecoins[_0x5222f4(0x190)][_0x5222f4(0x14e)]))_0x26869f['push'](stablecoins[_0x5222f4(0x190)][_0x5222f4(0x14e)]);if(!_0x26869f[_0x5222f4(0x191)](stablecoins['usd'][_0x5222f4(0x14e)]))_0x26869f[_0x5222f4(0x25a)](stablecoins[_0x5222f4(0x19e)]['symbol']);if(config[_0x5222f4(0x246)][_0x5222f4(0x173)](_0x5222f4(0x21c))){if(!_0x26869f[_0x5222f4(0x191)](_0x5222f4(0x292)+config['basecoin']))_0x26869f[_0x5222f4(0x25a)](_0x5222f4(0x292)+config['basecoin']);}loadCoins(_0x26869f);const _0x1cf0f7=async _0x38280f=>{const _0x5fbc87=_0x5222f4,_0x8b0646=await exchange[_0x5fbc87(0x254)](_0x38280f);global[_0x5fbc87(0x18d)][noslash(_0x8b0646[_0x5fbc87(0x14e)])]=_0x8b0646['last'];while(!![]){if(!botPaused)try{const _0x2d36a4=await exchange[_0x5fbc87(0x2a0)](_0x38280f);global[_0x5fbc87(0x18d)][noslash(_0x2d36a4[0x0][_0x5fbc87(0x14e)])]=_0x2d36a4[0x0][_0x5fbc87(0x218)],await sleep(0x3e8);}catch(_0x39d455){if(!exchangeStopped)await handleError(_0x39d455,'watchTrades',_0x38280f);}else await sleep(0x64);}},_0x231802=async _0x7b7ffe=>{const _0x19fd3c=_0x5222f4;while(!![]){if(!botPaused)try{const _0x2be3be=await exchange[_0x19fd3c(0x254)](_0x7b7ffe);global[_0x19fd3c(0x1cf)][_0x2be3be['symbol']]=_0x2be3be[_0x19fd3c(0x1b8)],await sleep(0x3c*0x3e8);}catch(_0x44f83a){if(!exchangeStopped)await handleError(_0x44f83a,_0x19fd3c(0x217),_0x7b7ffe);}else await sleep(0x64);}},_0x50fa93=async()=>{const _0x4c26cf=_0x5222f4;while(!![]){if(!botPaused)try{const _0xcbcda2=await exchange[_0x4c26cf(0x232)]();_0xcbcda2[_0x4c26cf(0x142)](_0x1bab4f=>{updateNumberCoinsCcxt(_0x1bab4f);});}catch(_0x59e63c){if(!exchangeStopped)await handleError(_0x59e63c,_0x4c26cf(0x232));}else await sleep(0x64);}};_0x26869f[_0x5222f4(0x142)](_0x2a6783=>{_0x1cf0f7(_0x2a6783),_0x231802(_0x2a6783);}),!wsEventsSet&&(wsEventsSet=!![],_0x50fa93(),watchTransactions());}async function watchTransactions(){const _0x3181d1=_0x41221a;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x322f73=await getCoins(),[_0x197bcc,_0xbecdae]=_0x322f73;let _0x4b9ee7=[];currentCoins[_0x3181d1(0x142)](_0x4a8b6a=>{const _0x48659c=_0x3181d1,_0x5d92b0=_0x197bcc['find'](_0x48d263=>_0x48d263['coin']==_0x4a8b6a[_0x48659c(0x1d6)]);if(_0x5d92b0){if(_0x4a8b6a[_0x48659c(0x268)]!=_0x5d92b0[_0x48659c(0x268)]){let _0x19bf25;if(_0x4a8b6a[_0x48659c(0x1d6)]!=config[_0x48659c(0x216)]){const _0x2608fa=global[_0x48659c(0x18d)][noslash(_0x4a8b6a[_0x48659c(0x14e)])];_0x19bf25=_0x4a8b6a[_0x48659c(0x179)]?0x1/_0x2608fa:_0x2608fa;}else _0x19bf25=0x1;_0x4b9ee7[_0x48659c(0x25a)]({'coin':_0x4a8b6a[_0x48659c(0x1d6)],'symbol':_0x4a8b6a[_0x48659c(0x14e)],'price':_0x19bf25,'number':Number(formatResult(_0x5d92b0[_0x48659c(0x268)]-_0x4a8b6a[_0x48659c(0x268)],0x8)),'basecoinvalue':_0x19bf25*(_0x5d92b0[_0x48659c(0x268)]-_0x4a8b6a[_0x48659c(0x268)])});}}});if(_0x4b9ee7[_0x3181d1(0x29b)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x3181d1(0x281)+_0x4b9ee7[0x0]['basecoinvalue']+_0x3181d1(0x1cb)+lastFees[_0x3181d1(0x22f)]);if(lastFees['highest']==0x0||Math[_0x3181d1(0x270)](_0x4b9ee7[0x0][_0x3181d1(0x1d7)])>lastFees[_0x3181d1(0x22f)]){delete _0x4b9ee7[0x0]['symbol'],delete _0x4b9ee7[0x0]['basecoinvalue'];let _0x6c83c5=[],_0x467f2a=[...config['liquidity']]||[],_0x2c0837=config['liquidity'];_0x467f2a[_0x3181d1(0x271)]((_0x5556c7,_0x344cc6)=>_0x5556c7[_0x3181d1(0x166)]>_0x344cc6['date']?-0x1:_0x344cc6[_0x3181d1(0x166)]>_0x5556c7[_0x3181d1(0x166)]?0x1:0x0);const _0x37dd57=getDate();if(_0x467f2a[0x0]){const _0x3bc4ff=fns['parse'](_0x467f2a[0x0]['date'],_0x3181d1(0x1fd),new Date()),_0x43907f=fns[_0x3181d1(0x1b5)](_0x37dd57,_0x3181d1(0x1fd),new Date());if(fns[_0x3181d1(0x28e)](_0x3bc4ff,_0x43907f)){_0x6c83c5=_0x467f2a[0x0][_0x3181d1(0x230)];const _0x560196=_0x6c83c5['find'](_0xb0d336=>_0xb0d336['coin']==_0x4b9ee7[0x0][_0x3181d1(0x1d6)]);_0x560196?(_0x560196[_0x3181d1(0x268)]+=_0x4b9ee7[0x0]['number'],_0x560196[_0x3181d1(0x268)]==0x0&&(_0x6c83c5=_0x6c83c5['filter'](_0x2bf9e7=>{const _0x1de095=_0x3181d1;return _0x2bf9e7[_0x1de095(0x1d6)]!=_0x4b9ee7[0x0][_0x1de095(0x1d6)];}))):_0x6c83c5[_0x3181d1(0x25a)](_0x4b9ee7[0x0]);const _0x534717=_0x2c0837[_0x3181d1(0x1c0)](_0x581da2=>_0x581da2[_0x3181d1(0x166)]==_0x37dd57);_0x534717['changes']=_0x6c83c5;}else _0x2c0837[_0x3181d1(0x25a)]({'date':_0x37dd57,'changes':[_0x4b9ee7[0x0]]});}const _0x5ab48f=_0x2c0837[_0x3181d1(0x1c0)](_0x505b9c=>_0x505b9c['date']==_0x37dd57);if(_0x5ab48f){let _0x4e7feb=!![];_0x5ab48f[_0x3181d1(0x230)]['forEach'](_0x2f5ef2=>{const _0x4ccbb3=_0x3181d1;if(_0x2f5ef2[_0x4ccbb3(0x268)]!=0x0)_0x4e7feb=![];}),_0x4e7feb&&(_0x2c0837=_0x2c0837['filter'](_0x7cbcb2=>{return _0x7cbcb2['date']!=_0x37dd57;}));}let _0x587ac0=dbConfig['get'](_0x3181d1(0x277))[_0x3181d1(0x1c0)]({'botID':botID})[_0x3181d1(0x130)]();_0x587ac0&&(dbConfig[_0x3181d1(0x148)](_0x3181d1(0x277))[_0x3181d1(0x1c0)]({'botID':botID})['assign']({'liquidity':_0x2c0837})[_0x3181d1(0x126)](),config[_0x3181d1(0x132)]=_0x2c0837),logHistory(_0x3181d1(0x1b7),'Portfolio\x20change\x20detected:\x20'+Math[_0x3181d1(0x270)](_0x4b9ee7[0x0][_0x3181d1(0x268)])+'\x20'+_0x4b9ee7[0x0][_0x3181d1(0x1d6)]+'\x20'+(_0x4b9ee7[0x0][_0x3181d1(0x268)]>0x0?_0x3181d1(0x168):_0x3181d1(0x1dd))+_0x3181d1(0x158)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x3181d1(0x14c)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x3181d1(0x270)](_0x4b9ee7[0x0]['number'])+'\x20'+_0x4b9ee7[0x0][_0x3181d1(0x1d6)]+'\x20'+(_0x4b9ee7[0x0][_0x3181d1(0x268)]>0x0?_0x3181d1(0x168):_0x3181d1(0x1dd)));transactionDetected=!![],currentCoins=_0x197bcc,currentCoinsAll=_0xbecdae;}else logger[_0x3181d1(0x14c)](_0x3181d1(0x2aa)+Math[_0x3181d1(0x270)](_0x4b9ee7[0x0][_0x3181d1(0x268)])+'\x20'+_0x4b9ee7[0x0][_0x3181d1(0x1d6)]+'\x20'+(_0x4b9ee7[0x0][_0x3181d1(0x268)]>0x0?_0x3181d1(0x168):'removed')+_0x3181d1(0x1fe)),currentCoins=_0x197bcc,currentCoinsAll=_0xbecdae;}await sleep(watchTransactionsInterval);}catch(_0x4aa3db){if(!exchangeStopped)await handleError(_0x4aa3db,_0x3181d1(0x23e));}else await sleep(0x64);}}async function loadSymbols(_0x2cd54c=config[_0x41221a(0x246)],_0x49e16b=![]){const _0x15b5b1=_0x41221a;if(allSymbols&&!_0x49e16b)return;try{markets=await exchange[_0x15b5b1(0x266)](),allSymbols=[],Object[_0x15b5b1(0x248)](markets)[_0x15b5b1(0x142)](_0x9197f6=>{const _0x299502=_0x15b5b1;_0x9197f6[0x1][_0x299502(0x1b0)]&&_0x9197f6[0x1][_0x299502(0x222)]&&allSymbols[_0x299502(0x25a)](_0x9197f6[0x0]);});}catch(_0x450538){throw _0x450538;}}async function initclient(){const _0x2fcfc5=_0x41221a;emitLoadingProgress(),proxyEmit(_0x2fcfc5(0x237),emittedConfiguration()),proxyEmit(_0x2fcfc5(0x267),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2fcfc5(0x1aa),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3d05b4=getNormalizedPerformance();emitPerformance(_0x3d05b4),getStartingBalances(_0x3d05b4);}async function toggleBotMode(){const _0x3be00f=_0x41221a;let _0xea6231=dbConfig[_0x3be00f(0x148)](_0x3be00f(0x277))[_0x3be00f(0x1c0)]({'botID':botID})['value']();if(_0xea6231){const _0x562021=!_0xea6231[_0x3be00f(0x208)];dbConfig['get']('bot')[_0x3be00f(0x1c0)]({'botID':botID})['assign']({'headless':_0x562021})['write'](),config[_0x3be00f(0x208)]=_0x562021,proxyEmit(_0x3be00f(0x237),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5848ca=_0x41221a;process[_0x5848ca(0x251)]({'updatebotmanager':!![]},_0x129838=>{});}async function loadCoins(_0x100be8){const _0x3104cd=_0x41221a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4d4cd6,_0x2e0432=0x0,_0x21baae=0x0;_0x100be8[_0x3104cd(0x142)](_0x5418ad=>{const _0x530219=_0x3104cd;loading[_0x530219(0x128)][_0x530219(0x25a)](_0x5418ad);}),loadingCanceled=![];let _0x1d5010=![];while(_0x4d4cd6!=_0x100be8[_0x3104cd(0x29b)]){_0x4d4cd6=0x0,_0x100be8[_0x3104cd(0x142)](_0x49cf26=>{const _0x1a9312=_0x3104cd;if(global[_0x1a9312(0x18d)][noslash(_0x49cf26)]){loading['remainingSymbols']=loading[_0x1a9312(0x128)][_0x1a9312(0x17c)](_0x3533b5=>_0x3533b5!=_0x49cf26);if(!watchedSymbols[_0x1a9312(0x191)](_0x49cf26))watchedSymbols['push'](_0x49cf26);_0x4d4cd6++;}}),loading[_0x3104cd(0x1e1)]=Math['round'](_0x4d4cd6/_0x100be8[_0x3104cd(0x29b)]*0x64);loading[_0x3104cd(0x1e1)]!=0x64&&(_0x21baae>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x21baae>0x78*0x5&&!_0x1d5010&&(loading[_0x3104cd(0x215)]=!![],emitLoadingProgress(),_0x1d5010=!![],logHistory(_0x3104cd(0x137),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x3104cd(0x128)][_0x3104cd(0x20b)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x3104cd(0x137),_0x3104cd(0x14d)+loadCoinsRetryInterval/0xea60+_0x3104cd(0x1e3)),pidCoinReloading=setTimeout(()=>{const _0x330524=_0x3104cd;process[_0x330524(0x251)]({'stop':_0x330524(0x274)},_0x334db5=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4d4cd6!=_0x2e0432&&(_0x2e0432=_0x4d4cd6,emitLoadingProgress()),_0x21baae++,await sleep(0xc8);}_0x4d4cd6==_0x100be8[_0x3104cd(0x29b)]&&(coinsLoaded=!![],process[_0x3104cd(0x251)]({'status':_0x3104cd(0x255),'live':'running'},_0x1af3c0=>{}),_0x1d5010&&logHistory(_0x3104cd(0x1b7),_0x3104cd(0x262)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3c576a=_0x41221a;proxyEmit(_0x3c576a(0x237),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x589ee5=_0x41221a;proxyEmit(_0x589ee5(0x2a6),loading);}async function getFiat(){const _0x1eedcb=_0x41221a;let _0x405fa8=global[_0x1eedcb(0x18d)][stablecoins[_0x1eedcb(0x190)][_0x1eedcb(0x1d6)]],_0x3acf57=global[_0x1eedcb(0x18d)][stablecoins[_0x1eedcb(0x19e)]['coin']];return{'eur':Number(_0x405fa8),'usd':Number(_0x3acf57)};}function capitalize(_0x43794e){const _0x58df7e=_0x41221a;return _0x43794e[_0x58df7e(0x27e)](0x0,0x1)[_0x58df7e(0x1a5)]()+_0x43794e[_0x58df7e(0x27e)](0x1);}function supportedExchanges(){const _0x443f7e=_0x41221a,_0x1e37d7=['ws',_0x443f7e(0x217),'fetchTicker',_0x443f7e(0x2a0),_0x443f7e(0x232),_0x443f7e(0x26f),_0x443f7e(0x13c),_0x443f7e(0x1c9),_0x443f7e(0x21d),_0x443f7e(0x1ab)];let _0x273ce5=[],_0x404fb8=[],_0x47601e=ccxt[_0x443f7e(0x175)]['exchanges'];_0x47601e[_0x443f7e(0x142)](_0x502123=>{const _0x2d4313=_0x443f7e;try{const _0x29aa99=new ccxt[(_0x2d4313(0x175))][_0x502123]();if(_0x29aa99[_0x2d4313(0x247)]['ws'])_0x404fb8[_0x2d4313(0x25a)](_0x29aa99);}catch(_0x4e4691){}}),_0x404fb8[_0x443f7e(0x142)](_0x15ad81=>{const _0x4c6021=_0x443f7e;let _0x5bce09=0x0;_0x1e37d7['forEach'](_0x404d7e=>{const _0x46c30e=_0x10e6;_0x404d7e in _0x15ad81['has']&&_0x15ad81[_0x46c30e(0x247)][_0x404d7e]&&_0x5bce09++;}),_0x5bce09==_0x1e37d7[_0x4c6021(0x29b)]&&_0x273ce5['push'](capitalize(_0x15ad81['id']));});let _0x467c4f=[];return _0x47601e[_0x443f7e(0x142)](_0x37c83b=>{const _0x12a652=_0x443f7e;_0x37c83b=capitalize(_0x37c83b);if(!_0x273ce5[_0x12a652(0x191)](_0x37c83b))_0x467c4f[_0x12a652(0x25a)](_0x37c83b);}),_0x273ce5;}function setStartDatePerformance(){const _0x367e23=_0x41221a;if(config&&config[_0x367e23(0x132)][0x0]['changes'][_0x367e23(0x29b)]!=0x0){const _0x4809da=config[_0x367e23(0x132)][0x0][_0x367e23(0x230)];dbPerformance[_0x367e23(0x148)](_0x367e23(0x141))[_0x367e23(0x1c0)]({'date':config[_0x367e23(0x1be)]})['assign']({'coins':_0x4809da})[_0x367e23(0x126)]();}}async function recreateCoinResults(){const _0x3e8bf7=_0x41221a;let _0xe0c27e,_0x2a7e0f=[];try{const _0x456ec2=fns['format'](fns[_0x3e8bf7(0x138)](config['startdate'][_0x3e8bf7(0x1f6)](/\//g,'-')),_0x3e8bf7(0x192));for(const _0x22d781 of currentCoins){if(_0x22d781[_0x3e8bf7(0x1d6)]!=config[_0x3e8bf7(0x216)]){let _0x53efd4=0x0,_0x32990e,_0x4ef895;_0xe0c27e=await getAllEventOrders(_0x22d781[_0x3e8bf7(0x14e)]);if(_0xe0c27e[_0x3e8bf7(0x29b)]>0x0)_0xe0c27e[_0x3e8bf7(0x142)](_0x4800d3=>{const _0x2462ad=_0x3e8bf7,_0x32662f=_0x22d781['symbol'][_0x2462ad(0x191)](config['basecoin']+'/');_0x2a7e0f['push']({'datetime':_0x4800d3[_0x2462ad(0x27b)],'coin':_0x22d781[_0x2462ad(0x1d6)],'symbol':_0x22d781[_0x2462ad(0x14e)],'side':_0x4800d3[_0x2462ad(0x1c2)],'reverse':_0x32662f,'amount':formatResult(_0x4800d3[_0x2462ad(0x27d)],0x8),'filled':formatResult(_0x4800d3[_0x2462ad(0x27d)],0x8),'price':formatResult(_0x4800d3[_0x2462ad(0x218)],0x8)}),_0x53efd4=_0x4800d3[_0x2462ad(0x1c2)]==_0x2462ad(0x202)?_0x53efd4+_0x4800d3['filled']:_0x53efd4-_0x4800d3['filled'];if(!_0x4ef895)_0x4ef895=_0x4800d3[_0x2462ad(0x218)];});_0x32990e=_0x22d781[_0x3e8bf7(0x268)]-_0x53efd4;let _0x3db141;config['liquidity'][_0x3e8bf7(0x142)](_0x407548=>{const _0x28cc48=_0x3e8bf7;!_0x3db141&&(_0x3db141=_0x407548[_0x28cc48(0x230)][_0x28cc48(0x1c0)](_0x42ff43=>_0x42ff43[_0x28cc48(0x1d6)]==_0x22d781['coin']),_0x3db141&&(_0x32990e=_0x3db141[_0x28cc48(0x268)],_0x4ef895=_0x3db141[_0x28cc48(0x218)]));});let _0x27b042=dbCoinResults[_0x3e8bf7(0x148)](_0x3e8bf7(0x273))[_0x3e8bf7(0x1c0)]({'coin':_0x22d781[_0x3e8bf7(0x1d6)]})[_0x3e8bf7(0x130)]();_0x27b042={'coin':_0x22d781[_0x3e8bf7(0x1d6)],'number':_0x32990e,'breakeven':_0x4ef895,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3e8bf7(0x148)](_0x3e8bf7(0x273))[_0x3e8bf7(0x1c0)]({'coin':_0x22d781['coin']})['assign'](_0x27b042)[_0x3e8bf7(0x126)]();}}_0x2a7e0f[_0x3e8bf7(0x271)]((_0x1f91f7,_0x46d919)=>_0x1f91f7['datetime']>_0x46d919[_0x3e8bf7(0x27b)]?0x1:_0x46d919['datetime']>_0x1f91f7[_0x3e8bf7(0x27b)]?-0x1:0x0);let _0x15d690=0x0;for(let _0x31ebb3 of _0x2a7e0f){await updateCoinResults(_0x31ebb3,!![]);}}catch(_0x1d9ae6){await handleError(_0x1d9ae6,_0x3e8bf7(0x2ae));}}async function getAllEventOrders(_0x41c518){const _0xf95c96=_0x41221a;let _0x1717f7=[],_0x264b8e=dbLogs['get'](_0xf95c96(0x269))['filter'](_0x159749=>{const _0x58373d=_0xf95c96,_0x2c908b=_0x159749['event'][_0x58373d(0x1a2)]();return _0x2c908b['includes'](_0x41c518[_0x58373d(0x1a2)]())&&(_0x2c908b['includes'](_0x58373d(0x1ef))&&_0x2c908b[_0x58373d(0x191)](_0x58373d(0x12b))||_0x2c908b['includes'](_0x58373d(0x27d))&&_0x2c908b[_0x58373d(0x191)](_0x58373d(0x12b)));})[_0xf95c96(0x258)](_0xf95c96(0x12c))[_0xf95c96(0x130)]();return _0x264b8e['forEach'](_0xe92e28=>{const _0x2dd31f=_0xf95c96,_0x6db84=_0xe92e28[_0x2dd31f(0x289)][_0x2dd31f(0x191)]('sell')?_0x2dd31f(0x21b):_0x2dd31f(0x202),_0x43b61c=/#([0-9]|\.)+\s/i,_0x5f30d9=Number(_0x43b61c[_0x2dd31f(0x19b)](_0xe92e28['event'])[0x0][_0x2dd31f(0x16c)](0x1)),_0x2d9a91=/@([0-9]|\.)+$/i,_0x4d6f37=Number(_0x2d9a91['exec'](_0xe92e28[_0x2dd31f(0x289)])[0x0][_0x2dd31f(0x16c)](0x1));_0x1717f7[_0x2dd31f(0x25a)]({'datetime':_0xe92e28[_0x2dd31f(0x12c)],'coin':symbolToCoin(_0x41c518),'symbol':_0x41c518,'side':_0x6db84,'amount':_0x5f30d9,'filled':_0x5f30d9,'price':_0x4d6f37});}),_0x1717f7;}async function getAllOrders(_0x24a869,_0x50ee38){const _0x58a437=_0x41221a;let _0x31fd94=[];while(_0x50ee38<exchange[_0x58a437(0x15d)]()){const _0x481b5f=0x1f4,_0x426beb=await exchange[_0x58a437(0x21d)](_0x24a869,_0x50ee38,_0x481b5f);if(_0x426beb[_0x58a437(0x29b)])_0x50ee38=_0x426beb[_0x426beb['length']-0x1][_0x58a437(0x235)]+0x1,_0x31fd94=_0x31fd94['concat'](_0x426beb);else break;}return _0x31fd94;}async function validate24hChanges(){const _0x20bdb6=_0x41221a;for(const _0x433756 of currentCoins){if(_0x433756[_0x20bdb6(0x1d6)]!=config[_0x20bdb6(0x216)]){let _0x33bbf3;_0x433756[_0x20bdb6(0x179)]?_0x33bbf3=formatResult((0x1/(global[_0x20bdb6(0x1cf)][noslash(_0x433756[_0x20bdb6(0x14e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x33bbf3=global[_0x20bdb6(0x1cf)][noslash(_0x433756[_0x20bdb6(0x14e)])],_0x33bbf3<config['change24h']&&(logHistory(_0x20bdb6(0x137),_0x433756['coin']+_0x20bdb6(0x1ec)+_0x33bbf3+'%'),logHistory(_0x20bdb6(0x137),_0x20bdb6(0x238)),logHistory(_0x20bdb6(0x137),_0x20bdb6(0x198)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3a365d,_0x58bbcd){const _0x16a35b=_0x41221a;if(!_0x3a365d)return!![];const _0x3f41aa=_0x58bbcd[_0x16a35b(0x17d)]('.'),_0x5c8c46=_0x3a365d[_0x16a35b(0x17d)]('.');for(var _0x4fe81b=0x0;_0x4fe81b<_0x5c8c46[_0x16a35b(0x29b)];_0x4fe81b++){const _0x38830d=~~_0x5c8c46[_0x4fe81b],_0x3bdb59=~~_0x3f41aa[_0x4fe81b];if(_0x38830d<_0x3bdb59)return!![];if(_0x38830d>_0x3bdb59)return![];}return![];}async function oneTimeMigration(){const _0x55e11d=_0x41221a;let _0x4ddcfe=dbLogs['get'](_0x55e11d(0x15b))['value']();if(isOlderVersion(_0x4ddcfe,_0x55e11d(0x27f))){let _0x3af339=[];const _0x4ca1b3=dbLogs[_0x55e11d(0x148)](_0x55e11d(0x269))[_0x55e11d(0x130)]();_0x4ca1b3[_0x55e11d(0x142)](_0x4c5e5e=>{const _0x4b538f=_0x55e11d;_0x3af339['push']({'time':_0x4c5e5e[_0x4b538f(0x12c)],'type':_0x4c5e5e[_0x4b538f(0x1c1)],'event':_0x4c5e5e[_0x4b538f(0x289)]});}),dbLogs[_0x55e11d(0x148)](_0x55e11d(0x269))[_0x55e11d(0x1b4)](_0x3af339)[_0x55e11d(0x126)]();}let _0x2f3409=dbConfig[_0x55e11d(0x148)](_0x55e11d(0x15b))[_0x55e11d(0x130)]();if(isOlderVersion(_0x2f3409,_0x55e11d(0x27f))){let _0x5b5b8a=dbConfig['get'](_0x55e11d(0x277))['find']({'botID':botID})['value']();if(_0x5b5b8a){let _0x13ba9c=[];_0x5b5b8a[_0x55e11d(0x1ce)][_0x55e11d(0x142)](_0x254433=>{const _0xf83e31=_0x55e11d;_0x13ba9c[_0xf83e31(0x25a)]({'coin':_0x254433[_0xf83e31(0x1d6)],'number':_0x254433[_0xf83e31(0x290)],'price':_0x254433[_0xf83e31(0x249)]}),delete _0x254433[_0xf83e31(0x290)],delete _0x254433[_0xf83e31(0x249)];});if(_0x13ba9c[_0x55e11d(0x29b)]!==0x0)fs[_0x55e11d(0x24c)](configbackuppath+(_0x55e11d(0x16b)+botID+'.json'),JSON['stringify'](_0x13ba9c,null,0x4),function(_0x3caa86){if(_0x3caa86){}});const _0x298c32=(_0x1aae04,_0x1b2efc)=>{const _0x55dde9=_0x55e11d;let _0x481c00=[];_0x1b2efc[_0x55dde9(0x142)](_0x35bfbe=>{const _0x7e75e9=_0x55dde9,_0x162aee=_0x1aae04['find'](_0x1df2b8=>_0x1df2b8[_0x7e75e9(0x1d6)]==_0x35bfbe[_0x7e75e9(0x1d6)]);if(!_0x162aee)_0x481c00[_0x7e75e9(0x25a)](_0x35bfbe);});let _0x26181e=[];return _0x1aae04['forEach'](_0x4099bf=>{const _0x462a85=_0x55dde9,_0x9fb25f=_0x1b2efc[_0x462a85(0x1c0)](_0xe2444c=>_0xe2444c[_0x462a85(0x1d6)]==_0x4099bf[_0x462a85(0x1d6)]);if(!_0x9fb25f||_0x9fb25f[_0x462a85(0x268)]==0x0&&_0x4099bf[_0x462a85(0x268)]!=0x0)_0x26181e['push'](_0x4099bf);}),{'missingDay1':_0x481c00,'notInDay2':_0x26181e};},_0x5ee5bb=dbPerformance[_0x55e11d(0x148)](_0x55e11d(0x141))[_0x55e11d(0x160)]()['value']();if(_0x5ee5bb[_0x55e11d(0x29b)]>0x1){const {missingDay1:_0x244b49,notInDay2:_0x3daf56}=_0x298c32(_0x13ba9c,_0x5ee5bb[0x1][_0x55e11d(0x273)]);_0x13ba9c=[..._0x13ba9c,..._0x244b49],_0x3daf56['forEach'](_0x31fb6a=>{const _0x1eba86=_0x55e11d;let _0x5777a9=_0x13ba9c[_0x1eba86(0x154)](_0x3b01d8=>_0x3b01d8[_0x1eba86(0x1d6)]==_0x31fb6a[_0x1eba86(0x1d6)]);_0x5777a9!=-0x1&&_0x13ba9c[_0x1eba86(0x252)](_0x5777a9,0x1);});}_0x13ba9c[_0x55e11d(0x271)]((_0x53db56,_0x2690d3)=>_0x53db56[_0x55e11d(0x1d6)]>_0x2690d3[_0x55e11d(0x1d6)]?0x1:_0x2690d3['coin']>_0x53db56['coin']?-0x1:0x0);let _0x1e4887=[{'date':_0x5b5b8a[_0x55e11d(0x1be)],'changes':_0x13ba9c}];_0x5ee5bb[_0x55e11d(0x29b)]>0x2&&_0x5ee5bb[_0x55e11d(0x142)]((_0x5a79b4,_0x5ed29c)=>{const _0x231157=_0x55e11d;if(_0x5ed29c>0x0&&_0x5ed29c<_0x5ee5bb['length']-0x1){const {missingDay1:_0x433b73,notInDay2:_0x293092}=_0x298c32(_0x5ee5bb[_0x5ed29c]['coins'],_0x5ee5bb[_0x5ed29c+0x1]['coins']);_0x13ba9c=[],(_0x433b73[_0x231157(0x29b)]!=0x0||_0x293092['length']!=0x0)&&(_0x433b73['length']!=0x0&&_0x13ba9c['push'](..._0x433b73),_0x293092[_0x231157(0x29b)]!=0x0&&(_0x293092['forEach'](_0x8e0d2e=>{const _0x20bcab=_0x231157;_0x8e0d2e[_0x20bcab(0x268)]=-_0x8e0d2e[_0x20bcab(0x268)];}),_0x13ba9c[_0x231157(0x25a)](..._0x293092)),_0x13ba9c['sort']((_0x540835,_0x294319)=>_0x540835[_0x231157(0x1d6)]>_0x294319[_0x231157(0x1d6)]?0x1:_0x294319[_0x231157(0x1d6)]>_0x540835['coin']?-0x1:0x0),_0x1e4887[_0x231157(0x25a)]({'date':_0x5ee5bb[_0x5ed29c+0x1][_0x231157(0x166)],'changes':_0x13ba9c}));}}),dbConfig['get'](_0x55e11d(0x277))['find']({'botID':botID})[_0x55e11d(0x1b4)]({..._0x5b5b8a,'liquidity':_0x1e4887})[_0x55e11d(0x126)]();}}if(isOlderVersion(_0x2f3409,_0x55e11d(0x1ac))){let _0x11b6e5=dbConfig[_0x55e11d(0x148)](_0x55e11d(0x277))['find']({'botID':botID})[_0x55e11d(0x130)]();if(_0x11b6e5){const _0x27d43f=_0x11b6e5[_0x55e11d(0x246)],_0x3c3884=_0x27d43f?capitalize(_0x27d43f):_0x55e11d(0x21c);dbConfig['get'](_0x55e11d(0x277))['find']({'botID':botID})[_0x55e11d(0x1b4)]({'exchange':_0x3c3884})['write']();}}let _0x336ed1=dbPerformance['get'](_0x55e11d(0x15b))[_0x55e11d(0x130)]();isOlderVersion(_0x336ed1,_0x55e11d(0x27f))&&setStartDatePerformance();let _0x319f92=dbCoinResults[_0x55e11d(0x148)](_0x55e11d(0x15b))[_0x55e11d(0x130)]();if(isOlderVersion(_0x319f92,'2.5.0')){let _0x2b6f49=dbCoinResults['get']('coins')[_0x55e11d(0x130)]();if(_0x2b6f49[_0x55e11d(0x29b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2b9714=_0x41221a;dbConfig['set']('version',serverversion)[_0x2b9714(0x126)](),dbPerformance[_0x2b9714(0x24e)](_0x2b9714(0x15b),serverversion)[_0x2b9714(0x126)](),dbLogs[_0x2b9714(0x24e)](_0x2b9714(0x15b),serverversion)['write'](),dbCoinResults[_0x2b9714(0x24e)](_0x2b9714(0x15b),serverversion)[_0x2b9714(0x126)]();}function getConfiguration(_0x1603e9){const _0x44812d=_0x41221a;let _0x20f747=dbConfig[_0x44812d(0x148)](_0x44812d(0x277))[_0x44812d(0x1c0)]({'botID':_0x1603e9})[_0x44812d(0x130)]();if(_0x20f747){let _0x5db35d=![];typeof _0x20f747[_0x44812d(0x206)]=='string'&&(_0x20f747={..._0x20f747,'threshold':Number(_0x20f747[_0x44812d(0x206)])},_0x5db35d=!![]),_0x20f747[_0x44812d(0x180)]==null&&(_0x20f747={..._0x20f747,'change24h':-0x14},_0x5db35d=!![]),!_0x20f747['fiat']&&(_0x20f747={..._0x20f747,'fiat':'USD'},_0x5db35d=!![]),!_0x20f747[_0x44812d(0x133)]&&(_0x20f747={..._0x20f747,'onepagemode':settings[_0x44812d(0x133)]},_0x5db35d=!![]),!_0x20f747[_0x44812d(0x1ed)]&&(_0x20f747={..._0x20f747,'colorscheme':'red_yellow_blue'},_0x5db35d=!![]),!_0x20f747['autoliquidity']&&(_0x20f747={..._0x20f747,'autoliquidity':!![]},_0x5db35d=!![]),_0x5db35d&&(_0x20f747={'botID':_0x20f747['botID'],'exchange':_0x20f747[_0x44812d(0x246)],'apiKey':_0x20f747[_0x44812d(0x183)],'apiSecret':_0x20f747[_0x44812d(0x25b)],'apiPassword':_0x20f747[_0x44812d(0x22a)],'basecoin':_0x20f747[_0x44812d(0x216)],'botname':_0x20f747[_0x44812d(0x150)],'showname':_0x20f747[_0x44812d(0x242)],'threshold':_0x20f747[_0x44812d(0x206)],'ordertype':_0x20f747[_0x44812d(0x12e)],'timeout':_0x20f747['timeout'],'fiat':_0x20f747['fiat'],'startdate':_0x20f747['startdate'],'recreate':_0x20f747[_0x44812d(0x2a9)],'timeshift':_0x20f747[_0x44812d(0x276)],'onepagemode':_0x20f747['onepagemode'],'headless':_0x20f747[_0x44812d(0x208)],'cooldown':_0x20f747['cooldown'],'change24h':_0x20f747['change24h'],'emojibuy':_0x20f747[_0x44812d(0x195)],'emojisell':_0x20f747['emojisell'],'colorscheme':_0x20f747[_0x44812d(0x1ed)],'portfolio':_0x20f747['portfolio'],'autoliquidity':_0x20f747[_0x44812d(0x13d)],'liquidity':_0x20f747[_0x44812d(0x132)],'openOrders':_0x20f747[_0x44812d(0x176)]},dbConfig['get'](_0x44812d(0x277))[_0x44812d(0x16f)]()[_0x44812d(0x126)](),dbConfig[_0x44812d(0x148)]('bot')['push'](_0x20f747)[_0x44812d(0x126)]());}else _0x20f747={'botID':_0x1603e9,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x44812d(0x178)+_0x1603e9,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x44812d(0x276)],'onepagemode':settings[_0x44812d(0x133)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x44812d(0x182),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x20f747;}function emittedConfiguration(){const _0x36a6a8=_0x41221a;let _0x1f404d;if(config[_0x36a6a8(0x183)]=='')_0x1f404d={...config,'configstate':'initial'};else config[_0x36a6a8(0x183)]==_0x36a6a8(0x13a)?_0x1f404d={...config,'configstate':_0x36a6a8(0x17a)}:(_0x1f404d={...config,'apiKey':_0x36a6a8(0x22c),'apiSecret':_0x36a6a8(0x22c)},config[_0x36a6a8(0x22a)]&&(_0x1f404d[_0x36a6a8(0x22a)]='************'));return _0x1f404d;}function getSettings(){const _0x3aaa8c=_0x41221a;return dbSettings[_0x3aaa8c(0x148)](_0x3aaa8c(0x1bf))['value']();}function getSecure(){const _0x36a201=_0x41221a;return dbSecure[_0x36a201(0x148)]('secure')['value']()||{};}function updateTimeshift(_0x3dc2d3){const _0x59c67b=_0x41221a;let _0x112cb8=dbConfig[_0x59c67b(0x148)]('bot')[_0x59c67b(0x1c0)]({'botID':botID})[_0x59c67b(0x130)]();_0x112cb8&&dbConfig['get'](_0x59c67b(0x277))['find']({'botID':botID})['assign']({'timeshift':_0x3dc2d3})[_0x59c67b(0x126)](),config[_0x59c67b(0x276)]=_0x3dc2d3,proxyEmit(_0x59c67b(0x237),emittedConfiguration());}function updateOnepagemode(_0x4b3a10){const _0x4cbd83=_0x41221a;let _0x3b5e2c=dbConfig[_0x4cbd83(0x148)](_0x4cbd83(0x277))[_0x4cbd83(0x1c0)]({'botID':botID})[_0x4cbd83(0x130)]();_0x3b5e2c&&dbConfig[_0x4cbd83(0x148)](_0x4cbd83(0x277))[_0x4cbd83(0x1c0)]({'botID':botID})[_0x4cbd83(0x1b4)]({'onepagemode':_0x4b3a10})[_0x4cbd83(0x126)](),config[_0x4cbd83(0x133)]=_0x4b3a10,proxyEmit(_0x4cbd83(0x237),emittedConfiguration());}async function storeConfiguration(_0xf04126){const _0x10e51b=_0x41221a;logger['debug'](_0x10e51b(0x21e));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x10e51b(0x14c)](_0x10e51b(0x172));let _0x5a7d78=[],_0x15c061=![],_0x746cfc=![],_0x17ff3d=[];_0xf04126['portfolio'][_0x10e51b(0x142)](_0x120d11=>{const _0x1a7074=_0x10e51b;if(!_0x120d11[_0x1a7074(0x189)]&&_0x120d11['coin']!=_0xf04126[_0x1a7074(0x216)])_0x17ff3d[_0x1a7074(0x25a)](_0x120d11[_0x1a7074(0x14e)]);}),_0x17ff3d[_0x10e51b(0x142)](_0x29f3b5=>{const _0x4c8bbb=_0x10e51b,_0x42d5f0=watchedSymbols['includes'](_0x29f3b5);!_0x42d5f0&&_0x5a7d78[_0x4c8bbb(0x25a)](_0x29f3b5);}),_0x17ff3d['forEach'](_0x2b5fd9=>{const _0x255881=_0x10e51b,_0x228dac=currentCoins[_0x255881(0x1c0)](_0x1f21d1=>_0x1f21d1[_0x255881(0x14e)]==_0x2b5fd9);!_0x228dac&&(_0x15c061=!![]);}),currentCoins[_0x10e51b(0x142)](_0x978bcb=>{const _0xf8e525=_0x10e51b;if(_0x978bcb['coin']!=config[_0xf8e525(0x216)]){const _0x1eadb3=_0x17ff3d[_0xf8e525(0x1c0)](_0x18629a=>_0x18629a==_0x978bcb['symbol']);!_0x1eadb3&&(_0x15c061=!![]);}}),_0xf04126[_0x10e51b(0x1ce)][_0x10e51b(0x142)](_0x2a7bff=>{const _0x31c965=_0x10e51b,_0x314983=config[_0x31c965(0x1ce)][_0x31c965(0x1c0)](_0x20937f=>_0x20937f[_0x31c965(0x1d6)]==_0x2a7bff[_0x31c965(0x1d6)]);if(_0x314983&&_0x2a7bff[_0x31c965(0x239)]!=_0x314983[_0x31c965(0x239)])_0x746cfc=!![];});let _0x32915d=dbConfig['get']('bot')['find']({'botID':botID})[_0x10e51b(0x130)]();_0xf04126={..._0xf04126,'apiKey':crypt[_0x10e51b(0x1d5)](secure[_0x10e51b(0x28b)],_0xf04126['apiKey'])[_0x10e51b(0x1f9)],'apiSecret':crypt['decrypt'](secure[_0x10e51b(0x28b)],_0xf04126['apiSecret'])[_0x10e51b(0x1f9)]};_0xf04126[_0x10e51b(0x22a)]&&(_0xf04126['apiPassword']=crypt[_0x10e51b(0x1d5)](secure['privateKey'],_0xf04126[_0x10e51b(0x22a)])['message']);let _0x3121cf=![];if(_0x32915d){_0xf04126[_0x10e51b(0x183)]==_0x10e51b(0x22c)?_0xf04126[_0x10e51b(0x183)]=config[_0x10e51b(0x183)]:_0x3121cf=!![];_0xf04126[_0x10e51b(0x25b)]==_0x10e51b(0x22c)?_0xf04126[_0x10e51b(0x25b)]=config['apiSecret']:_0x3121cf=!![];if(_0xf04126[_0x10e51b(0x22a)]==_0x10e51b(0x22c))_0xf04126[_0x10e51b(0x22a)]=config[_0x10e51b(0x22a)];else{if(_0xf04126[_0x10e51b(0x22a)])_0x3121cf=!![];}dbConfig[_0x10e51b(0x148)]('bot')[_0x10e51b(0x1c0)]({'botID':botID})['assign'](_0xf04126)[_0x10e51b(0x126)]();}else dbConfig[_0x10e51b(0x148)](_0x10e51b(0x277))[_0x10e51b(0x25a)](_0xf04126)[_0x10e51b(0x126)](),_0x3121cf=!![],process[_0x10e51b(0x251)]({'status':_0x10e51b(0x255),'live':_0x10e51b(0x1db)},_0x1dddb6=>{});process[_0x10e51b(0x251)]({'botname':_0xf04126[_0x10e51b(0x150)]},_0x4c70ff=>{}),updateBotManager(),config={..._0xf04126},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3121cf)await reset(_0x5a7d78,!![]);else _0x15c061||_0x746cfc?await reset(_0x5a7d78,![]):getBalances();blockTransactionDetection=![],logger[_0x10e51b(0x14c)](_0x10e51b(0x1f3));}async function storeHeadless(_0x3883f5){const _0xad515=_0x41221a,_0x202d69={...config,'headless':_0x3883f5[_0xad515(0x208)]};let _0x25c932=dbConfig[_0xad515(0x148)](_0xad515(0x277))[_0xad515(0x1c0)]({'botID':botID})[_0xad515(0x130)]();_0x25c932&&dbConfig['get']('bot')[_0xad515(0x1c0)]({'botID':botID})[_0xad515(0x1b4)](_0x202d69)['write'](),config={..._0x202d69},updateBotManager(),proxyEmit(_0xad515(0x237),emittedConfiguration());}async function storeFiat(_0x34302f){const _0x46391f=_0x41221a,_0x2b0292={...config,'fiat':_0x34302f};let _0x204f7a=dbConfig[_0x46391f(0x148)]('bot')[_0x46391f(0x1c0)]({'botID':botID})[_0x46391f(0x130)]();_0x204f7a&&dbConfig[_0x46391f(0x148)](_0x46391f(0x277))['find']({'botID':botID})[_0x46391f(0x1b4)](_0x2b0292)[_0x46391f(0x126)](),config={..._0x2b0292},proxyEmit(_0x46391f(0x237),emittedConfiguration());}function resetHistory(){const _0x36f0ec=_0x41221a;logger[_0x36f0ec(0x19d)](_0x36f0ec(0x162));try{if(fs[_0x36f0ec(0x16a)](path['join'](configpath,_0x36f0ec(0x225)+botID+_0x36f0ec(0x29d))))fs[_0x36f0ec(0x163)](path['join'](configpath,'bot-'+botID+'-events.json'));if(fs[_0x36f0ec(0x16a)](path[_0x36f0ec(0x20b)](configpath,'bot-'+botID+_0x36f0ec(0x157))))fs[_0x36f0ec(0x163)](path['join'](configpath,'bot-'+botID+_0x36f0ec(0x157)));if(fs[_0x36f0ec(0x16a)](path[_0x36f0ec(0x20b)](configpath,_0x36f0ec(0x225)+botID+_0x36f0ec(0x286))))fs['unlinkSync'](path['join'](configpath,_0x36f0ec(0x225)+botID+_0x36f0ec(0x286)));}catch(_0x2e6669){if(_0x2e6669)logger[_0x36f0ec(0x19d)](_0x36f0ec(0x250),_0x2e6669);}const _0x3662a5=getDate();let _0xb1ed5d=[];currentCoins[_0x36f0ec(0x142)](_0x5e9b8f=>{const _0x63d5d6=_0x36f0ec;_0xb1ed5d['push']({'coin':_0x5e9b8f['coin'],'number':_0x5e9b8f[_0x63d5d6(0x268)],'price':_0x5e9b8f[_0x63d5d6(0x21a)]});});let _0x2f16d2=dbConfig[_0x36f0ec(0x148)]('bot')[_0x36f0ec(0x1c0)]({'botID':botID})[_0x36f0ec(0x130)]();_0x2f16d2&&(dbConfig[_0x36f0ec(0x148)](_0x36f0ec(0x277))[_0x36f0ec(0x1c0)]({'botID':botID})[_0x36f0ec(0x1b4)]({'liquidity':[{'date':_0x3662a5,'changes':_0xb1ed5d}]})['write'](),config[_0x36f0ec(0x132)]=[]),process['send']({'stop':_0x36f0ec(0x274)},_0x352d7e=>{});}function noslash(_0x48c533){const _0x2fb495=_0x41221a;return _0x48c533[_0x2fb495(0x1f6)]('/','');}function updateHighestFee(_0x302dfd){const _0x21647d=_0x41221a;if(_0x302dfd[_0x21647d(0x179)]){let _0xff2d={'filled':_0x302dfd[_0x21647d(0x27d)]*_0x302dfd[_0x21647d(0x218)],'amount':_0x302dfd[_0x21647d(0x27d)]*_0x302dfd['price'],'side':_0x302dfd[_0x21647d(0x1c2)]==_0x21647d(0x21b)?'buy':_0x21647d(0x21b),'price':0x1/_0x302dfd[_0x21647d(0x218)]};_0x302dfd={..._0x302dfd,..._0xff2d};}const _0x2fe16d=defaultFee*_0x302dfd['filled']*_0x302dfd[_0x21647d(0x218)];lastFees[_0x21647d(0x15f)][_0x21647d(0x29b)]===0x14&&lastFees[_0x21647d(0x15f)][_0x21647d(0x212)](),lastFees['recent20'][_0x21647d(0x25a)](_0x2fe16d),lastFees[_0x21647d(0x22f)]=Math[_0x21647d(0x185)](...lastFees[_0x21647d(0x15f)]);}async function updateNumberCoinsCcxt(_0x242e14){const _0x1a95d6=_0x41221a;logger[_0x1a95d6(0x14c)](_0x1a95d6(0x15a)+_0x242e14[_0x1a95d6(0x14e)]+_0x1a95d6(0x129)+_0x242e14[_0x1a95d6(0x29a)]+'\x20|\x20'+_0x242e14['id']);let _0x2be449=_0x242e14[_0x1a95d6(0x29a)],_0x50db44=![];currentCoins['forEach'](_0x9a1261=>{const _0x132b6b=_0x1a95d6;_0x9a1261[_0x132b6b(0x14e)]==_0x242e14[_0x132b6b(0x14e)]&&(_0x50db44=!![]);});if(!_0x50db44)return;const _0x33d697=currentCoins[_0x1a95d6(0x1c0)](_0x2b670f=>_0x2b670f[_0x1a95d6(0x14e)]==_0x242e14['symbol']),_0x1d0afc=_0x1cfb5e=>{const _0x48afc2=_0x1a95d6;if(_0x33d697)_0x33d697[_0x48afc2(0x260)]=_0x1cfb5e;};if(_0x2be449==_0x1a95d6(0x1a7))_0x1d0afc(_0x1a95d6(0x1a7));else{if(_0x2be449==_0x1a95d6(0x184)){_0x1d0afc('canceled');const _0x3ce713=await getCoins();[currentCoins,currentCoinsAll]=_0x3ce713,await getOpenOrders(),handleOpenOrders();}else{if(_0x2be449==_0x1a95d6(0x13e)){logger[_0x1a95d6(0x14c)]('1\x20-\x20FILLED:\x20'+_0x242e14[_0x1a95d6(0x14e)]+_0x1a95d6(0x129)+_0x242e14[_0x1a95d6(0x27d)]+_0x1a95d6(0x129)+_0x242e14['id']);let _0xcac261=![];if(lastOrders)for(const _0x732453 of lastOrders){const _0x5889d8=0xc8,_0x4e0e83=0x1388;let _0xefcdaa=0x0;while(!_0x732453[_0x1a95d6(0x213)]&&_0xefcdaa*_0x5889d8<_0x4e0e83){_0xefcdaa++,await sleep(_0x5889d8);}if(_0xefcdaa>0x0)logger[_0x1a95d6(0x14c)](_0x1a95d6(0x1e8)+_0xefcdaa*_0x5889d8/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x732453[_0x1a95d6(0x213)]==_0x242e14['id']){logger['debug'](_0x1a95d6(0x282)+_0x242e14['id']),_0xcac261=!![];if(_0x732453['filled']==0x0){logger[_0x1a95d6(0x14c)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x242e14['id']);if(_0x242e14['average'])_0x732453[_0x1a95d6(0x218)]=_0x242e14[_0x1a95d6(0x234)];else{if(_0x242e14['price'])_0x732453[_0x1a95d6(0x218)]=_0x242e14[_0x1a95d6(0x218)];else{}}_0x732453[_0x1a95d6(0x27d)]=_0x242e14[_0x1a95d6(0x27d)],updateHighestFee(_0x732453),_0x1d0afc(_0x1a95d6(0x27d)),await validateOrders();if(lockOrders==ORDERS[_0x1a95d6(0x291)]){const _0x17e5cf=await getCoins();[currentCoins,currentCoinsAll]=_0x17e5cf;}_0x732453['fee']={'currency':_0x242e14['fee']?_0x242e14[_0x1a95d6(0x240)]['currency']:null,'cost':_0x242e14[_0x1a95d6(0x240)]?_0x242e14['fee']['cost']:0x0},await updateCoinResults(_0x732453);}}}if(!_0xcac261){logger[_0x1a95d6(0x14c)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x242e14['id']),_0x1d0afc('filled');const _0x350946=await getCoins();[currentCoins,currentCoinsAll]=_0x350946,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3c7329=JSON[_0x1a95d6(0x1b5)](lastBalances[_0x1a95d6(0x1ce)]);const _0xefdc14=_0x3c7329['find'](_0x5d30f5=>_0x5d30f5[_0x1a95d6(0x14e)]==_0x242e14[_0x1a95d6(0x14e)]);if(_0xefdc14){if(_0x2be449==_0x1a95d6(0x1a7))_0xefdc14['orderstatus']=_0xefdc14['orderstatus']==_0x1a95d6(0x27d)?_0x1a95d6(0x27d):_0x1a95d6(0x1a7);else{if(_0x2be449=='canceled')_0xefdc14[_0x1a95d6(0x260)]=_0xefdc14[_0x1a95d6(0x260)]==_0x1a95d6(0x27d)?'filled':_0x1a95d6(0x184);else _0x2be449==_0x1a95d6(0x13e)&&(_0xefdc14[_0x1a95d6(0x260)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x1a95d6(0x243)](_0x3c7329)},proxyEmit(_0x1a95d6(0x1aa),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2eb900=_0x41221a;await getOpenOrders();let _0x46363a=![];currentCoins[_0x2eb900(0x142)](_0x2e730a=>{const _0x286a08=_0x2eb900;_0x46363a=allOpenOrders[_0x286a08(0x1c0)](_0x35b6e3=>_0x35b6e3['symbol']==_0x2e730a[_0x286a08(0x14e)]),_0x2e730a['orderstatus']=_0x46363a?_0x286a08(0x1a7):'none';});}async function getCoins(_0x370266=!![],_0x5c9ba3=config['basecoin']){const _0x490e96=_0x41221a;let _0x4afc41,_0x378b75=[],_0x4c2330=[],_0x11c81e=[],_0x1efd06=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4afc41=await exchange[_0x490e96(0x1ab)](),mybalances=_0x4afc41[_0x490e96(0x174)];for(const [_0x54ea4b,_0x3cf73b]of Object[_0x490e96(0x248)](mybalances)){_0x1efd06[_0x490e96(0x25a)](_0x54ea4b);}if(_0x5c9ba3=='')for(const [_0x28ff4a,_0xaabc33]of Object['entries'](mybalances)){_0xaabc33!=0x0&&_0x4c2330['push']({'coin':_0x28ff4a});}else{let _0x27532b=![];for(const [_0x3dc62,_0x219637]of Object[_0x490e96(0x248)](mybalances)){if(_0x1efd06[_0x490e96(0x191)](_0x3dc62)){const _0x126878=config[_0x490e96(0x1ce)]['find'](_0x13fd84=>_0x13fd84[_0x490e96(0x1d6)]==_0x3dc62),_0x2c65d0=_0x3dc62+'/'+_0x5c9ba3,_0x5173e5=_0x5c9ba3+'/'+_0x3dc62,_0x5a85cb=currentCoins['find'](_0x1db845=>_0x1db845[_0x490e96(0x1d6)]==_0x3dc62);_0x27532b=![];if((_0x219637!=0x0||_0x126878)&&(allSymbols[_0x490e96(0x191)](_0x2c65d0)||_0x3dc62==_0x5c9ba3))_0x3dc62!=_0x5c9ba3&&_0x378b75[_0x490e96(0x25a)](_0x2c65d0),_0x4c2330[_0x490e96(0x25a)]({'coin':_0x3dc62,'symbol':_0x2c65d0,'reverse':![],'number':Math[_0x490e96(0x185)](_0x219637+(_0x126878&&_0x126878[_0x490e96(0x239)]||0x0),0x0),'orderstatus':_0x5a85cb?_0x5a85cb[_0x490e96(0x260)]:_0x490e96(0x29f)});else(_0x219637!=0x0||_0x126878)&&allSymbols[_0x490e96(0x191)](_0x5173e5)&&(_0x3dc62!=_0x5c9ba3&&_0x378b75[_0x490e96(0x25a)](_0x5173e5),_0x4c2330[_0x490e96(0x25a)]({'coin':_0x3dc62,'symbol':_0x5173e5,'reverse':!![],'number':Math['max'](_0x219637+(_0x126878&&_0x126878[_0x490e96(0x239)]||0x0),0x0),'orderstatus':_0x5a85cb?_0x5a85cb['orderstatus']:_0x490e96(0x29f)}));}}}}catch(_0x362e6e){if(!_0x370266)handleErrorNoStop(_0x362e6e,_0x490e96(0x2ab));else await handleError(_0x362e6e,_0x490e96(0x2ab));}return _0x11c81e=cloneDeep(_0x4c2330),_0x4c2330=_0x4c2330[_0x490e96(0x17c)](_0x4c4c21=>{const _0x5598c6=_0x490e96,_0x502497=config[_0x5598c6(0x1ce)][_0x5598c6(0x1c0)](_0x2a2764=>_0x2a2764[_0x5598c6(0x1d6)]==_0x4c4c21['coin']);return _0x502497&&!_0x502497['excluded'];}),[_0x4c2330,_0x11c81e];}async function getCoinNumber(_0x4ee349){const _0x5894cb=_0x41221a;let _0x322e70;try{const _0x131084=await exchange[_0x5894cb(0x1ab)]();_0x322e70=_0x131084[_0x5894cb(0x174)][_0x4ee349];}catch(_0xc358df){await handleError(_0xc358df,'getCoinNumber()');}return _0x322e70;}async function getOpenOrders(){const _0xa9ade2=_0x41221a;let _0x5f3674;allOpenOrders=[];try{for(const _0x53ea01 of config[_0xa9ade2(0x1ce)]){!_0x53ea01[_0xa9ade2(0x189)]&&_0x53ea01[_0xa9ade2(0x1d6)]!=config['basecoin']&&(_0x5f3674=await exchange[_0xa9ade2(0x1c9)](_0x53ea01[_0xa9ade2(0x14e)]),_0x5f3674[_0xa9ade2(0x29b)]>0x0&&allOpenOrders[_0xa9ade2(0x25a)](_0x5f3674[0x0]));}}catch(_0x29a009){await handleError(_0x29a009,'getOpenOrders()');}}async function handleOpenOrders(_0x186fed=0x0){const _0x3f4c6b=_0x41221a;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x186fed==0x0?(logger[_0x3f4c6b(0x14c)]('1\x20-\x20Handle\x20open\x20orders'),_0x186fed++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x3f4c6b(0x1c3)),validateOrders(_0x3f4c6b(0x1f8))));}async function testAPI(_0x5b0478){const _0x813fd4=_0x41221a,_0xc0ae14=ccxt[_0x813fd4(0x175)][_0x5b0478[_0x813fd4(0x246)][_0x813fd4(0x1a2)]()],_0x2eae94=new _0xc0ae14({'apiKey':_0x5b0478[_0x813fd4(0x183)],'secret':_0x5b0478[_0x813fd4(0x25b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x813fd4(0x222)}});if(_0x5b0478[_0x813fd4(0x22a)])_0x2eae94[_0x813fd4(0x264)]=_0x5b0478[_0x813fd4(0x22a)];try{await _0x2eae94[_0x813fd4(0x266)]();}catch(_0x588339){throw _0x588339;}}function cloneDeep(_0x282e6a){const _0x29037f=_0x41221a;return JSON[_0x29037f(0x1b5)](JSON['stringify'](_0x282e6a));}async function getPortfolio(_0x3e5bcb){const _0x546691=_0x41221a;let _0x500379=[],_0x399dab=[],_0x48c2db=[],_0x5a891d;if(_0x3e5bcb[_0x546691(0x183)]!==_0x546691(0x22c)||_0x3e5bcb['apiSecret']!==_0x546691(0x22c)||_0x3e5bcb[_0x546691(0x22a)]&&_0x3e5bcb[_0x546691(0x22a)]!=='************'){if(config['exchange']){if(_0x3e5bcb[_0x546691(0x183)]==_0x546691(0x22c))_0x3e5bcb['apiKey']=config[_0x546691(0x183)];if(_0x3e5bcb[_0x546691(0x25b)]==_0x546691(0x22c))_0x3e5bcb[_0x546691(0x25b)]=config[_0x546691(0x25b)];if(_0x3e5bcb['apiPassword']==_0x546691(0x22c))_0x3e5bcb[_0x546691(0x22a)]=config[_0x546691(0x22a)];try{await testAPI(_0x3e5bcb);}catch(_0x358de0){if(_0x358de0[_0x546691(0x1f7)]()[_0x546691(0x191)]('AuthenticationError')){logger[_0x546691(0x14c)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x546691(0x1ce),![]);return;}else{handleError(_0x358de0,_0x546691(0x280));return;}}}await initExchange(_0x3e5bcb[_0x546691(0x246)],_0x3e5bcb['apiKey'],_0x3e5bcb[_0x546691(0x25b)],_0x3e5bcb[_0x546691(0x22a)]);try{await loadSymbols(_0x3e5bcb[_0x546691(0x246)],!![]);}catch(_0x5cafc8){if(_0x5cafc8[_0x546691(0x1f7)]()['includes'](_0x546691(0x140))){proxyEmit(_0x546691(0x1ce),![]);return;}else{handleError(_0x5cafc8,_0x546691(0x23a));return;}}const _0x30c117=await getCoins(![],_0x3e5bcb[_0x546691(0x216)]);_0x48c2db=cloneDeep(_0x30c117[0x1]);}else _0x48c2db=cloneDeep(currentCoinsAll);if(_0x3e5bcb[_0x546691(0x216)]=='')proxyEmit(_0x546691(0x1ce),_0x48c2db);else{_0x48c2db['forEach'](_0x172edf=>{const _0x417b68=_0x546691;if(_0x172edf[_0x417b68(0x1d6)]!=_0x3e5bcb[_0x417b68(0x216)])_0x500379[_0x417b68(0x25a)](_0x172edf[_0x417b68(0x14e)]);});try{_0x399dab=await exchange['fetchTickers'](_0x500379);}catch(_0x56e3c1){if(_0x56e3c1[_0x546691(0x1f7)]()[_0x546691(0x191)](_0x546691(0x140))){proxyEmit('portfolio',![]);return;}else{handleError(_0x56e3c1,'getPortfolio(2)');return;}}_0x48c2db[_0x546691(0x142)](_0x40145a=>{const _0x3e1cf0=_0x546691;_0x40145a[_0x3e1cf0(0x1d6)]!=_0x3e5bcb[_0x3e1cf0(0x216)]?_0x5a891d=_0x40145a[_0x3e1cf0(0x179)]?0x1/_0x399dab[_0x40145a[_0x3e1cf0(0x14e)]]['last']:_0x399dab[_0x40145a['symbol']][_0x3e1cf0(0x21a)]:_0x5a891d=0x1,_0x40145a[_0x3e1cf0(0x218)]=formatResult(_0x5a891d,0x8);}),proxyEmit(_0x546691(0x1ce),_0x48c2db);}}function truncateTradeAmount(_0x307ec2,_0x3ec52f){const _0x44ba99=_0x41221a;let _0x4f29b6=0x0;try{_0x4f29b6=exchange[_0x44ba99(0x24f)](_0x307ec2,_0x3ec52f);}catch(_0x58f185){}return _0x4f29b6;}function checkMinimums(_0x3e3f8f){const _0x5810eb=_0x41221a;let _0x2076ba=!![];const _0x504b72=!_0x3e3f8f[_0x5810eb(0x179)]?markets[_0x3e3f8f[_0x5810eb(0x14e)]][_0x5810eb(0x285)][_0x5810eb(0x207)]['min']:markets[_0x3e3f8f[_0x5810eb(0x14e)]]['limits'][_0x5810eb(0x294)]['min'],_0x4f403b=!_0x3e3f8f['reverse']?markets[_0x3e3f8f[_0x5810eb(0x14e)]][_0x5810eb(0x285)][_0x5810eb(0x294)]['min']:markets[_0x3e3f8f[_0x5810eb(0x14e)]]['limits'][_0x5810eb(0x207)][_0x5810eb(0x1e5)],_0x443e18=truncateTradeAmount(_0x3e3f8f[_0x5810eb(0x14e)],_0x3e3f8f['trade']);_0x3e3f8f[_0x5810eb(0x284)]=_0x443e18;if(Math['abs'](_0x443e18)<_0x504b72)_0x2076ba=![];if(Math[_0x5810eb(0x270)](_0x443e18)*_0x3e3f8f[_0x5810eb(0x21a)]<_0x4f403b)_0x2076ba=![];if(_0x3e3f8f[_0x5810eb(0x1c2)]==_0x5810eb(0x21b)){let _0x297abc=config['portfolio'][_0x5810eb(0x1c0)](_0x336596=>_0x336596[_0x5810eb(0x1d6)]==_0x3e3f8f[_0x5810eb(0x1d6)]);if(_0x297abc[_0x5810eb(0x239)]>0x0){if(Math['abs'](_0x443e18)>_0x3e3f8f[_0x5810eb(0x268)]-_0x297abc[_0x5810eb(0x239)])_0x2076ba=![];}else{if(Math['abs'](_0x443e18)>_0x3e3f8f[_0x5810eb(0x268)])_0x2076ba=![];}}if(_0x3e3f8f[_0x5810eb(0x1c2)]==_0x5810eb(0x202)){let _0xbd57e0=config[_0x5810eb(0x1ce)][_0x5810eb(0x1c0)](_0x178e30=>_0x178e30[_0x5810eb(0x1d6)]==config['basecoin']),_0x5535ee=currentCoins[_0x5810eb(0x1c0)](_0x122aeb=>_0x122aeb['coin']==config[_0x5810eb(0x216)]);if(_0xbd57e0['offset']>0x0){if(Math['abs'](_0x443e18)*_0x3e3f8f[_0x5810eb(0x21a)]>_0x5535ee[_0x5810eb(0x268)]-_0xbd57e0[_0x5810eb(0x239)])_0x2076ba=![];}else{if(Math[_0x5810eb(0x270)](_0x443e18)*_0x3e3f8f[_0x5810eb(0x21a)]>_0x5535ee[_0x5810eb(0x268)])_0x2076ba=![];}}return _0x2076ba;}async function getBalances(_0x1b5bbe=!![]){const _0x38f203=_0x41221a;let _0x4f8745=0x0,_0x246fe0;const _0x3ef860=config[_0x38f203(0x206)];if(config[_0x38f203(0x208)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x203b00=>{const _0x12e680=_0x38f203;if(_0x203b00[_0x12e680(0x1d6)]!=config[_0x12e680(0x216)]){let _0x3dd28e=global['ticker'][noslash(_0x203b00[_0x12e680(0x14e)])];_0x246fe0=_0x203b00[_0x12e680(0x179)]?0x1/_0x3dd28e:_0x3dd28e;}else _0x246fe0=0x1;let _0x3ad1f9=_0x203b00[_0x12e680(0x268)]*_0x246fe0;_0x4f8745+=_0x3ad1f9,_0x203b00[_0x12e680(0x21a)]=formatResult(Number(_0x246fe0),0x8),_0x203b00['value']=_0x3ad1f9;}),currentCoins[_0x38f203(0x142)](_0x498d64=>{const _0x38ce61=_0x38f203;let _0x12af4d=config[_0x38ce61(0x1ce)]['find'](_0x43f352=>_0x43f352[_0x38ce61(0x1d6)]==_0x498d64[_0x38ce61(0x1d6)]),_0xd0c54d=Number(_0x12af4d[_0x38ce61(0x143)]),_0x9406a4=_0x498d64[_0x38ce61(0x130)]/_0x4f8745*0x64,_0x2ba672=_0xd0c54d*_0x4f8745/0x64/_0x498d64[_0x38ce61(0x21a)]-_0x498d64['number'];_0x498d64['distribution']=formatResult(_0x9406a4,0x3),_0x498d64['target']=formatResult(_0xd0c54d,0x3),_0x498d64[_0x38ce61(0x284)]=formatResult(_0x2ba672,0x8),_0x498d64[_0x38ce61(0x1c2)]='',_0x498d64[_0x38ce61(0x241)]=![];if(_0x498d64[_0x38ce61(0x1d6)]!=config['basecoin']){if(_0x498d64[_0x38ce61(0x143)]>_0xd0c54d)_0x498d64[_0x38ce61(0x1c2)]=_0x38ce61(0x21b),_0x498d64[_0x38ce61(0x241)]=checkMinimums(_0x498d64);else _0x498d64['distribution']<_0xd0c54d&&(_0x498d64[_0x38ce61(0x1c2)]='buy',_0x498d64[_0x38ce61(0x241)]=checkMinimums(_0x498d64));}_0x498d64[_0x38ce61(0x1ff)]=_0x498d64[_0x38ce61(0x143)]/_0x498d64[_0x38ce61(0x25d)]-0x1;if(_0x498d64[_0x38ce61(0x260)]==_0x38ce61(0x27d)||_0x498d64['orderstatus']==_0x38ce61(0x184))_0x498d64[_0x38ce61(0x260)]='none';}),currentCoins['sort']((_0x33a98c,_0x437ab2)=>_0x33a98c['delta']<_0x437ab2[_0x38f203(0x1ff)]?0x1:_0x437ab2['delta']<_0x33a98c[_0x38f203(0x1ff)]?-0x1:0x0);const _0x56e016=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x56e016[_0x38f203(0x190)],'usd':_0x56e016[_0x38f203(0x19e)],'portfolio':JSON[_0x38f203(0x243)](currentCoins),'threshold':_0x3ef860},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x1b5bbe){if(config[_0x38f203(0x208)])headlessMode({'portfolio':currentCoins,'threshold':_0x3ef860});else{if(lockOrders==ORDERS[_0x38f203(0x287)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3ef860});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1babf3=getNormalizedPerformance();getStartingBalances(_0x1babf3),emitPerformance(_0x1babf3);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2cf0a2=getNormalizedPerformance();emitPerformance(_0x2cf0a2),getStartingBalances(_0x2cf0a2),logger[_0x38f203(0x14c)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x22be0e=_0x41221a;if(!lastBalances)return;let _0x7f2e57=[],_0x368f40,_0x31ee25=JSON[_0x22be0e(0x1b5)](lastBalances[_0x22be0e(0x1ce)]);_0x31ee25['sort']((_0x2ee090,_0x208ed2)=>_0x2ee090[_0x22be0e(0x1d6)]>_0x208ed2['coin']?0x1:_0x208ed2[_0x22be0e(0x1d6)]>_0x2ee090['coin']?-0x1:0x0),_0x31ee25[_0x22be0e(0x142)](_0x26f0d4=>{const _0x3d6ff0=_0x22be0e;let _0x5b3b98={'coin':_0x26f0d4['coin'],'number':_0x26f0d4[_0x3d6ff0(0x268)],'price':_0x26f0d4[_0x3d6ff0(0x21a)]};_0x7f2e57[_0x3d6ff0(0x25a)](_0x5b3b98);});const _0x1bd352=await getFiat();_0x368f40={'date':lastBalances['time'][_0x22be0e(0x17d)]('\x20')[0x0],'eur':_0x1bd352[_0x22be0e(0x190)],'usd':_0x1bd352['usd'],'coins':_0x7f2e57};let _0x40d2d3=dbPerformance[_0x22be0e(0x148)]('data')[_0x22be0e(0x1c0)]({'date':_0x368f40['date']})[_0x22be0e(0x130)]();_0x40d2d3?_0x368f40[_0x22be0e(0x166)]!=config[_0x22be0e(0x1be)]&&dbPerformance[_0x22be0e(0x148)](_0x22be0e(0x141))[_0x22be0e(0x1c0)]({'date':_0x368f40[_0x22be0e(0x166)]})[_0x22be0e(0x1b4)](_0x368f40)[_0x22be0e(0x126)]():dbPerformance[_0x22be0e(0x148)](_0x22be0e(0x141))['push'](_0x368f40)[_0x22be0e(0x126)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4f63d2=_0x41221a;let _0x49b81c=[];if(dbPerformance['has'](_0x4f63d2(0x141))[_0x4f63d2(0x130)]()){let _0x4143db=dbPerformance[_0x4f63d2(0x148)](_0x4f63d2(0x141))[_0x4f63d2(0x160)]()['filter'](_0x1e424c=>{const _0x100713=_0x4f63d2;if(_0x1e424c[_0x100713(0x273)][_0x100713(0x29b)]==0x0)return![];else return!![];})['sortBy'](_0x4f63d2(0x166))[_0x4f63d2(0x130)](),_0x2c0e61=[...config['liquidity']];_0x2c0e61[_0x4f63d2(0x271)]((_0x4d1188,_0x31e8a7)=>_0x4d1188[_0x4f63d2(0x166)]>_0x31e8a7[_0x4f63d2(0x166)]?-0x1:_0x31e8a7['date']>_0x4d1188[_0x4f63d2(0x166)]?0x1:0x0);let _0x297309=0x1,_0x4d2b41=[],_0x5d4332=0x0;_0x4143db['slice']()['reverse']()['forEach']((_0x591e28,_0x44cff4)=>{const _0x4f9582=_0x4f63d2;if(_0x2c0e61[_0x5d4332]){if(_0x4143db[_0x4143db[_0x4f9582(0x29b)]-_0x44cff4]&&_0x2c0e61[_0x5d4332][_0x4f9582(0x166)]==_0x4143db[_0x4143db[_0x4f9582(0x29b)]-_0x44cff4]['date']){if(_0x44cff4<_0x4143db[_0x4f9582(0x29b)]){let _0x38575e=0x0,_0xa40b07=0x0;_0x4143db[_0x4143db['length']-_0x44cff4][_0x4f9582(0x273)]['forEach'](_0xbabcb0=>{const _0xd58535=_0x4f9582;_0xa40b07+=_0xbabcb0[_0xd58535(0x268)]*_0xbabcb0[_0xd58535(0x218)];}),_0x2c0e61[_0x5d4332]['changes'][_0x4f9582(0x142)](_0x267292=>{const _0x241712=_0x4f9582;_0x38575e+=_0x267292[_0x241712(0x268)]*_0x267292['price'];}),_0x297309*=_0x38575e/(_0xa40b07-_0x38575e)+0x1;}_0x5d4332++;}}let _0x124a3c=0x0;_0x591e28[_0x4f9582(0x273)]['forEach'](_0x103a0c=>{const _0x8f33ec=_0x4f9582;_0x124a3c+=_0x103a0c[_0x8f33ec(0x268)]*_0x103a0c[_0x8f33ec(0x218)];}),_0x4d2b41[_0x4143db[_0x4f9582(0x29b)]-_0x44cff4-0x1]=_0x124a3c*(_0x297309-0x1);});let _0x28eebe=[];_0x2c0e61=[...config[_0x4f63d2(0x132)]]||[];let _0x55c7dd=0x0;_0x5d4332=0x0,_0x4143db[_0x4f63d2(0x142)]((_0x9e5723,_0x7441db)=>{const _0xf21d7e=_0x4f63d2;if(_0x2c0e61[_0x5d4332]){const _0x2a8fb5=fns['parse'](_0x2c0e61[_0x5d4332][_0xf21d7e(0x166)],_0xf21d7e(0x1fd),new Date()),_0x2ca775=fns[_0xf21d7e(0x1b5)](_0x9e5723['date'],_0xf21d7e(0x1fd),new Date());if(fns[_0xf21d7e(0x28e)](_0x2a8fb5,_0x2ca775)){let _0x485a1d=0x0;_0x2c0e61[_0x5d4332][_0xf21d7e(0x230)][_0xf21d7e(0x142)](_0x47e57a=>{const _0x5832ea=_0xf21d7e;!_0x28eebe[_0x47e57a[_0x5832ea(0x1d6)]]?_0x28eebe[_0x47e57a['coin']]=_0x47e57a[_0x5832ea(0x268)]:(_0x485a1d=_0x28eebe[_0x47e57a[_0x5832ea(0x1d6)]],_0x28eebe[_0x47e57a['coin']]+=_0x47e57a[_0x5832ea(0x268)]);const _0x158f00=_0x9e5723['coins'][_0x5832ea(0x1c0)](_0xd5e479=>_0xd5e479['coin']==_0x47e57a[_0x5832ea(0x1d6)]);(!_0x158f00||_0x158f00[_0x5832ea(0x268)]==0x0)&&(_0x55c7dd+=(-_0x47e57a['number']-_0x485a1d)*_0x47e57a[_0x5832ea(0x218)]);}),_0x5d4332++;}}_0x9e5723[_0xf21d7e(0x273)][_0xf21d7e(0x142)]((_0x71e91a,_0x24ba6e)=>{const _0x3be1c4=_0xf21d7e;_0x28eebe[_0x71e91a['coin']]&&(_0x71e91a[_0x3be1c4(0x1c7)]=_0x28eebe[_0x71e91a[_0x3be1c4(0x1d6)]]);}),_0x49b81c[_0xf21d7e(0x25a)]({'date':_0x9e5723['date'],'eur':_0x9e5723[_0xf21d7e(0x190)],'usd':_0x9e5723[_0xf21d7e(0x19e)],'offset':_0x4d2b41[_0x7441db],'netoffset':_0x55c7dd,'coins':_0x9e5723[_0xf21d7e(0x273)]});});}return _0x49b81c;}function emitPerformance(_0x26b78a){const _0x1f039b=_0x41221a;_0x26b78a[_0x1f039b(0x29b)]!==0x0?(proxyEmit('performance',_0x26b78a),lastPerformanceEmitted=getDate()):proxyEmit(_0x1f039b(0x18e),[]);}function getPerf(_0x1d1d40,_0x441849){const _0x46c2c1=_0x41221a;let _0x3332e6=0x0,_0x57d14e=0x0,_0x293095=0x0;_0x1d1d40['coins'][_0x46c2c1(0x142)](_0xae27f9=>{const _0x487847=_0x46c2c1;_0x3332e6+=_0xae27f9[_0x487847(0x268)]*_0xae27f9[_0x487847(0x218)];});_0x441849&&(_0x3332e6+=_0x1d1d40[_0x46c2c1(0x239)]);if(config[_0x46c2c1(0x216)]===_0x46c2c1(0x226)||config['basecoin']==='ETH')_0x57d14e=_0x3332e6*_0x1d1d40['eur'],_0x293095=_0x3332e6*_0x1d1d40[_0x46c2c1(0x19e)];else{if(usdBasecoins[_0x46c2c1(0x191)](config[_0x46c2c1(0x216)]))_0x57d14e=_0x3332e6*_0x1d1d40[_0x46c2c1(0x190)]/_0x1d1d40[_0x46c2c1(0x19e)],_0x293095=_0x3332e6;else config['basecoin']===_0x46c2c1(0x295)&&(_0x57d14e=_0x3332e6,_0x293095=_0x3332e6*_0x1d1d40[_0x46c2c1(0x19e)]/_0x1d1d40[_0x46c2c1(0x190)]);}return[_0x3332e6,_0x57d14e,_0x293095];}function getKPIs(_0x954147,_0x2c1b13=_0x41221a(0x295)){const _0x1bbc90=_0x41221a,_0x1c57a9=config[_0x1bbc90(0x216)],_0x5451f7=lastBalances,_0x209dda=currentCoins,_0x346d40=getNormalizedPerformance(),_0x2a9dbf=_0x954147===_0x1bbc90(0x216)?_0x1c57a9:_0x954147===_0x1bbc90(0x1c5)||_0x954147===_0x1bbc90(0x16e)?_0x2c1b13:_0x1bbc90(0x205)+_0x1c57a9,_0x141dd0=_0x954147===_0x1bbc90(0x1b6)?_0x1bbc90(0x1a0):_0x954147==='net-fiat'?'Net\x20effect':_0x2a9dbf+'\x20value',_0xb03747=_0x954147===_0x1bbc90(0x1b6)||_0x954147===_0x1bbc90(0x16e)?_0x1bbc90(0x1a0):_0x2a9dbf+_0x1bbc90(0x288);let _0x220eeb=0x0;_0x209dda[_0x1bbc90(0x142)](_0x118279=>{const _0x432807=_0x1bbc90;_0x220eeb+=_0x118279[_0x432807(0x268)]*_0x118279[_0x432807(0x21a)];});if(_0x954147==='fiat'||_0x954147==='net-fiat'){if(_0x1c57a9===_0x1bbc90(0x226)||_0x1c57a9===_0x1bbc90(0x210))_0x220eeb=_0x220eeb*(_0x2c1b13===_0x1bbc90(0x295)?_0x5451f7[_0x1bbc90(0x190)]:_0x5451f7[_0x1bbc90(0x19e)]);else{if(usdBasecoins['includes'](_0x1c57a9))_0x220eeb=_0x220eeb*(_0x2c1b13===_0x1bbc90(0x295)?_0x5451f7['eur']/_0x5451f7[_0x1bbc90(0x19e)]:0x1);else _0x1c57a9===_0x1bbc90(0x295)&&(_0x220eeb=_0x220eeb*(_0x2c1b13===_0x1bbc90(0x295)?0x1:_0x5451f7[_0x1bbc90(0x19e)]/_0x5451f7['eur']));}}let _0x577eb7;if(_0x220eeb!==0x0){if(_0x954147===_0x1bbc90(0x216))_0x577eb7=(_0x220eeb/startingBalances[_0x1bbc90(0x216)]-0x1)*0x64;else{if(_0x2c1b13===_0x1bbc90(0x295))_0x577eb7=(_0x220eeb/startingBalances['eur']-0x1)*0x64;else _0x577eb7=(_0x220eeb/startingBalances['usd']-0x1)*0x64;}let _0x421a8c=0x0;if(startingBalances['coins'])_0x209dda[_0x1bbc90(0x142)](_0x59a472=>{const _0xce7598=_0x1bbc90;let _0x1405b4=startingBalances[_0xce7598(0x273)][_0xce7598(0x1c0)](_0x2283f3=>_0x2283f3['coin']===_0x59a472[_0xce7598(0x1d6)]);if(_0x1405b4&&_0x1405b4[_0xce7598(0x1d6)]&&_0x59a472['number']!==0x0)_0x421a8c+=_0x1405b4[_0xce7598(0x268)]*_0x59a472[_0xce7598(0x21a)];});let _0x5c10e8=0x0;if(_0x346d40[_0x1bbc90(0x29b)]!==0x0){let _0x5d42b0=_0x346d40[_0x346d40[_0x1bbc90(0x29b)]-0x1];_0x5c10e8=_0x5d42b0[_0x1bbc90(0x28a)];}_0x421a8c-=_0x5c10e8;_0x954147==='net-basecoin'&&(_0x577eb7=(_0x220eeb-_0x421a8c)/startingBalances[_0x1bbc90(0x216)]*0x64,_0x220eeb=_0x220eeb-_0x421a8c);if(_0x954147==='net-fiat'){let _0x243421=_0x2c1b13===_0x1bbc90(0x295)?startingBalances['eur']:startingBalances[_0x1bbc90(0x19e)];if(_0x1c57a9==='BTC'||_0x1c57a9===_0x1bbc90(0x210))_0x421a8c=_0x2c1b13===_0x1bbc90(0x295)?_0x421a8c*_0x5451f7[_0x1bbc90(0x190)]:_0x421a8c*_0x5451f7[_0x1bbc90(0x19e)];else{if(usdBasecoins[_0x1bbc90(0x191)](_0x1c57a9))_0x421a8c=_0x2c1b13===_0x1bbc90(0x295)?_0x421a8c*_0x5451f7['eur']/_0x5451f7[_0x1bbc90(0x19e)]:_0x421a8c;else _0x1c57a9===_0x1bbc90(0x295)&&(_0x421a8c=_0x2c1b13===_0x1bbc90(0x295)?_0x421a8c:_0x421a8c*_0x5451f7[_0x1bbc90(0x19e)]/_0x5451f7[_0x1bbc90(0x190)]);}_0x577eb7=(_0x220eeb-_0x421a8c)/_0x243421*0x64,_0x220eeb=_0x220eeb-_0x421a8c;}if(_0x577eb7){if(_0x577eb7<0x64)_0x577eb7=_0x577eb7['toFixed'](0x2);else{if(_0x577eb7<0x3e8)_0x577eb7=_0x577eb7[_0x1bbc90(0x153)](0x1);else _0x577eb7=_0x577eb7[_0x1bbc90(0x153)](0x0);}}else _0x577eb7=Number('0')[_0x1bbc90(0x153)](0x2);if(_0x220eeb){if(Math[_0x1bbc90(0x270)](_0x220eeb)<0.000001)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x2);else{if(Math[_0x1bbc90(0x270)](_0x220eeb)<0.1)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x6);else{if(Math[_0x1bbc90(0x270)](_0x220eeb)<0x1)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x5);else{if(Math['abs'](_0x220eeb)<0xa)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x4);else{if(Math[_0x1bbc90(0x270)](_0x220eeb)<0x64)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x3);else{if(Math['abs'](_0x220eeb)<0x3e8)_0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x2);else _0x220eeb=_0x220eeb[_0x1bbc90(0x153)](0x2);}}}}}}else _0x220eeb=Number('0')[_0x1bbc90(0x153)](0x2);}else _0x577eb7=Number('0')['toFixed'](0x2);return{'value':_0x220eeb,'change':_0x577eb7,'leftTxt':_0x141dd0,'rightTxt':_0xb03747};}async function getStartingBalances(_0x8cce0e,_0x29bd56=!![]){const _0x5a0f58=_0x41221a;if(_0x8cce0e[_0x5a0f58(0x29b)]!==0x0){const [_0x3a6af8,_0x4e81d8,_0x34e1fa]=getPerf(_0x8cce0e[0x0],!![]);let _0x2277f8=[];config[_0x5a0f58(0x1ce)]['forEach'](_0xb12e2e=>{const _0x407e45=_0x5a0f58;let _0x1a3a44=0x0,_0x2d304f;config[_0x407e45(0x132)][_0x407e45(0x142)](_0x451871=>{const _0x589a4f=_0x407e45;let _0x467a2a=_0x451871[_0x589a4f(0x230)][_0x589a4f(0x1c0)](_0x429b40=>_0x429b40[_0x589a4f(0x1d6)]==_0xb12e2e[_0x589a4f(0x1d6)]);if(_0x467a2a){_0x1a3a44+=_0x467a2a[_0x589a4f(0x268)];if(!_0x2d304f)_0x2d304f=_0x467a2a[_0x589a4f(0x218)];}}),_0x2277f8[_0x407e45(0x25a)]({'coin':_0xb12e2e[_0x407e45(0x1d6)],'number':_0x1a3a44,'initialprice':_0x2d304f});});const _0x5dc6ac={'basecoin':_0x3a6af8,'eur':_0x4e81d8,'usd':_0x34e1fa,'coins':_0x2277f8};if(_0x29bd56)proxyEmit(_0x5a0f58(0x14f),_0x5dc6ac);startingBalances=_0x5dc6ac;}}function headlessMode(_0x22adcb){const _0x6ea7c0=_0x41221a;let _0x2b533c=_0x22adcb[_0x6ea7c0(0x1ce)],_0x4a5ef5=_0x22adcb[_0x6ea7c0(0x206)],_0x387837=[];for(let _0x220184 of _0x2b533c){if(_0x220184[_0x6ea7c0(0x1d6)]!=config[_0x6ea7c0(0x216)]){if(_0x220184[_0x6ea7c0(0x1ff)]>=_0x4a5ef5/0x64){if(_0x220184[_0x6ea7c0(0x241)])_0x387837['push'](_0x220184);}else{if(_0x220184['delta']<=-_0x4a5ef5/0x64){if(_0x220184['valid'])_0x387837[_0x6ea7c0(0x25a)](_0x220184);}}}}_0x387837[_0x6ea7c0(0x29b)]>0x0&&placeOrder(_0x387837);}function notifyBalance(_0x36eaca){const _0x18a074=_0x41221a;let _0x1fb242=_0x36eaca['portfolio'],_0x34fd7d=_0x36eaca['threshold'],_0x507199=[];for(let _0x4a5f04 of _0x1fb242){if(_0x4a5f04[_0x18a074(0x1d6)]!=config[_0x18a074(0x216)]){if(_0x4a5f04['delta']>=_0x34fd7d/0x64){if(_0x4a5f04[_0x18a074(0x241)])_0x507199[_0x18a074(0x25a)](_0x4a5f04);}else{if(_0x4a5f04[_0x18a074(0x1ff)]<=-_0x34fd7d/0x64){if(_0x4a5f04['valid'])_0x507199[_0x18a074(0x25a)](_0x4a5f04);}}}}if(_0x507199[_0x18a074(0x29b)]>0x0){let _0x382bfc=_0x507199['map'](_0x4aa825=>_0x4aa825['coin']);_0x382bfc['sort']();let _0x2a4ed9=_0x382bfc[_0x18a074(0x20b)](',\x20');if(!lastCoinsToBalance)logHistory(_0x18a074(0x13b),_0x18a074(0x14a));lastCoinsToBalance=_0x2a4ed9;}}function symbolToCoin(_0x4b8360){const _0x40873f=_0x41221a;let _0x3d209b;if(_0x4b8360[_0x40873f(0x191)]('/'+config['basecoin']))_0x3d209b=_0x4b8360[_0x40873f(0x1f6)]('/'+config['basecoin'],'');if(_0x4b8360['includes'](config[_0x40873f(0x216)]+'/'))_0x3d209b=_0x4b8360[_0x40873f(0x1f6)](config['basecoin']+'/','');return _0x3d209b;}async function unlockOrders(){const _0x57a3af=_0x41221a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x57a3af(0x291)]){logger[_0x57a3af(0x14c)](_0x57a3af(0x1a3)),lockOrders=ORDERS[_0x57a3af(0x188)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x385230=await getCoins();[currentCoins,currentCoinsAll]=_0x385230,validateOrdersState=_0x57a3af(0x1c7),persistOpenOrders([]),lockOrders=ORDERS[_0x57a3af(0x287)],logger[_0x57a3af(0x14c)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x44a585){const _0x43fafe=_0x41221a;if(_0x44a585)validateOrdersState=_0x44a585;logger[_0x43fafe(0x14c)](_0x43fafe(0x259)+validateOrdersState+_0x43fafe(0x18f)+(lockOrders==0x1?_0x43fafe(0x1a6):lockOrders==0x2?'ORDERS.UNLOCKING':_0x43fafe(0x169)));let _0x314bd6=[],_0x1ab733=config[_0x43fafe(0x12e)]==_0x43fafe(0x1ef)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x43fafe(0x291)])return;logger[_0x43fafe(0x14c)](_0x43fafe(0x1cc)+validateOrdersState),lastOrders[_0x43fafe(0x142)](_0x785573=>{const _0x81ccaa=_0x43fafe;let _0x5984cf=![];_0x785573[_0x81ccaa(0x27d)]>0x0&&(_0x5984cf=!![]),_0x314bd6[_0x81ccaa(0x25a)](_0x5984cf),_0x5984cf&&config[_0x81ccaa(0x12e)]!='market'&&logHistory(_0x81ccaa(0x12b),_0x81ccaa(0x1d0)+_0x785573[_0x81ccaa(0x14e)]+'\x20'+_0x785573['side']+'\x20#'+formatResult(_0x785573['filled'],0x8)+'\x20@'+formatResult(_0x785573[_0x81ccaa(0x218)],0x8));}),_0x314bd6[_0x43fafe(0x142)]((_0x3af31a,_0x3966a3)=>{const _0x3d700c=_0x43fafe;if(_0x3af31a)lastOrders[_0x3d700c(0x252)](_0x3966a3,0x1);}),persistOpenOrders(lastOrders);const _0x1c7c08=coolingDown?_0x43fafe(0x1f5):_0x43fafe(0x23d);if(validateOrdersState=='initial'){validateOrdersState=_0x43fafe(0x187);if(_0x314bd6[_0x43fafe(0x191)](![])){if(config['ordertype']==_0x43fafe(0x1ef)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x43fafe(0x187)){if(_0x314bd6['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x43fafe(0x1ef)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x43fafe(0x23b))_0x314bd6['includes'](![])&&(config[_0x43fafe(0x12e)]==_0x43fafe(0x1ef)?logHistory(_0x43fafe(0x1b7),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x43fafe(0x197)](_0x1ab733*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1c7c08):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x43fafe(0x197)](_0x1ab733*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1c7c08))),await unlockOrders();else{if(validateOrdersState==_0x43fafe(0x1f8)){if(config[_0x43fafe(0x12e)]!=_0x43fafe(0x1ef))logHistory(_0x43fafe(0x1b7),_0x43fafe(0x1fb)+_0x1c7c08);await unlockOrders();}}}}}async function cancelOrders(){const _0xf2f38c=_0x41221a;lastOrders[_0xf2f38c(0x142)](async _0x52717d=>{const _0x519c6f=_0xf2f38c;try{const _0x55efe5=await exchange['cancelOrder'](_0x52717d[_0x519c6f(0x213)],_0x52717d[_0x519c6f(0x14e)]);}catch(_0x28caf5){if(_0x28caf5[_0x519c6f(0x1f7)]()[_0x519c6f(0x191)](_0x519c6f(0x236))){}else await handleError(_0x28caf5,_0x519c6f(0x1fc));}});}async function initCoinResults(_0xc8e717){const _0x1cec31=_0x41221a;_0xc8e717?logger[_0x1cec31(0x14c)](_0x1cec31(0x1df)+_0xc8e717):logger['debug'](_0x1cec31(0x1bd)),config['portfolio']['forEach'](_0x353659=>{const _0x248cef=_0x1cec31;if(!_0x353659[_0x248cef(0x189)]&&_0x353659[_0x248cef(0x1d6)]!=config['basecoin']){const _0x4c9b9b=currentCoins[_0x248cef(0x1c0)](_0x1338f6=>_0x1338f6[_0x248cef(0x1d6)]==_0x353659[_0x248cef(0x1d6)]),_0x1a10dd=global[_0x248cef(0x18d)][noslash(_0x353659[_0x248cef(0x14e)])];let _0x1865f5=_0x4c9b9b?_0x4c9b9b[_0x248cef(0x268)]:null,_0x1ff1b2=_0x353659[_0x248cef(0x179)]?0x1/_0x1a10dd:_0x1a10dd,_0x4d17a8;config[_0x248cef(0x132)][_0x248cef(0x142)](_0x3fd23=>{const _0x75e353=_0x248cef;!_0x4d17a8&&(_0x4d17a8=_0x3fd23[_0x75e353(0x230)]['find'](_0x53f6d2=>_0x53f6d2[_0x75e353(0x1d6)]==_0x353659[_0x75e353(0x1d6)]),_0x4d17a8&&(_0x1865f5=_0x4d17a8[_0x75e353(0x268)],_0x1ff1b2=_0x4d17a8[_0x75e353(0x218)]));});let _0x14b3d6=dbCoinResults[_0x248cef(0x148)](_0x248cef(0x273))[_0x248cef(0x1c0)]({'coin':_0x353659[_0x248cef(0x1d6)]})[_0x248cef(0x130)]();if(!_0x14b3d6){const _0x90fded={'coin':_0x353659[_0x248cef(0x1d6)],'number':_0x1865f5,'breakeven':_0x1ff1b2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x248cef(0x148)]('coins')[_0x248cef(0x25a)](_0x90fded)[_0x248cef(0x126)]();}else{if(_0xc8e717&&_0x353659['coin']==_0xc8e717){const _0x23361d={'coin':_0x353659[_0x248cef(0x1d6)],'number':_0x1865f5,'breakeven':_0x1ff1b2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x248cef(0x148)](_0x248cef(0x273))[_0x248cef(0x1c0)]({'coin':_0x353659[_0x248cef(0x1d6)]})[_0x248cef(0x1b4)](_0x23361d)[_0x248cef(0x126)]();}}}});}async function updateCoinResults(_0x78a7fc,_0x49535e=![]){const _0x2a24f8=_0x41221a;let _0x29d3e3,_0x18362b,_0x50e40e,_0x25f6b4,_0x33ab89,_0x1e8500,_0x4e1b09=dbCoinResults[_0x2a24f8(0x148)](_0x2a24f8(0x273))['find']({'coin':_0x78a7fc[_0x2a24f8(0x1d6)]})['value'](),_0x578758=![];Object[_0x2a24f8(0x248)](_0x4e1b09)[_0x2a24f8(0x142)](([_0x42c228,_0xa7f3e2])=>{if(_0xa7f3e2==null)_0x578758=!![];});(!_0x4e1b09||_0x578758)&&(await initCoinResults(_0x78a7fc[_0x2a24f8(0x1d6)]),_0x4e1b09=dbCoinResults[_0x2a24f8(0x148)](_0x2a24f8(0x273))['find']({'coin':_0x78a7fc[_0x2a24f8(0x1d6)]})[_0x2a24f8(0x130)]());_0x78a7fc[_0x2a24f8(0x179)]&&(_0x1e8500={'filled':_0x78a7fc[_0x2a24f8(0x27d)]*_0x78a7fc[_0x2a24f8(0x218)],'amount':_0x78a7fc[_0x2a24f8(0x27d)]*_0x78a7fc[_0x2a24f8(0x218)],'side':_0x78a7fc[_0x2a24f8(0x1c2)]=='sell'?_0x2a24f8(0x202):_0x2a24f8(0x21b),'price':0x1/_0x78a7fc['price']},_0x78a7fc={..._0x78a7fc,..._0x1e8500});_0x49535e?_0x18362b=_0x78a7fc[_0x2a24f8(0x1c2)]==_0x2a24f8(0x202)?_0x4e1b09[_0x2a24f8(0x268)]+_0x78a7fc[_0x2a24f8(0x27d)]:_0x4e1b09[_0x2a24f8(0x268)]-_0x78a7fc[_0x2a24f8(0x27d)]:_0x18362b=await getCoinNumber(_0x78a7fc['coin']);if(_0x78a7fc[_0x2a24f8(0x240)]&&_0x78a7fc[_0x2a24f8(0x240)][_0x2a24f8(0x1d3)]==config[_0x2a24f8(0x216)])_0x29d3e3=_0x78a7fc[_0x2a24f8(0x240)]['cost'];else{if(_0x78a7fc['fee']&&_0x78a7fc[_0x2a24f8(0x240)]['currency']==_0x2a24f8(0x19f)&&!_0x49535e)_0x29d3e3=_0x78a7fc['fee'][_0x2a24f8(0x294)]*global[_0x2a24f8(0x18d)][_0x2a24f8(0x19f)+config[_0x2a24f8(0x216)]];else _0x29d3e3=defaultFee*_0x78a7fc[_0x2a24f8(0x27d)]*_0x78a7fc[_0x2a24f8(0x218)];}_0x78a7fc[_0x2a24f8(0x1c2)]==_0x2a24f8(0x202)?(_0x50e40e=_0x18362b!=0x0?(_0x4e1b09['breakeven']*_0x4e1b09[_0x2a24f8(0x268)]+_0x78a7fc['price']*(_0x18362b-_0x4e1b09[_0x2a24f8(0x268)])+_0x29d3e3)/_0x18362b:0x0,_0x25f6b4=_0x4e1b09['realized']):(_0x50e40e=_0x18362b!=0x0?(_0x4e1b09[_0x2a24f8(0x17f)]*_0x4e1b09[_0x2a24f8(0x268)]-_0x78a7fc[_0x2a24f8(0x218)]*(_0x4e1b09[_0x2a24f8(0x268)]-_0x18362b)+_0x29d3e3)/_0x18362b:0x0,_0x25f6b4=_0x4e1b09['realized']+(_0x78a7fc[_0x2a24f8(0x218)]-_0x4e1b09[_0x2a24f8(0x17f)])*_0x78a7fc[_0x2a24f8(0x27d)]);_0x33ab89=(_0x78a7fc['price']-_0x50e40e-_0x29d3e3/_0x78a7fc[_0x2a24f8(0x27d)])*_0x18362b;let _0x4d36e3={'coin':_0x78a7fc['coin'],'number':_0x18362b,'breakeven':formatResult(_0x50e40e,0x8),'realized':formatResult(_0x25f6b4,0x8),'unrealized':formatResult(_0x33ab89,0x8),'fees':formatResult(_0x4e1b09['fees']+_0x29d3e3,0x8),'sells':_0x78a7fc['side']==_0x2a24f8(0x21b)?_0x4e1b09['sells']+0x1:_0x4e1b09[_0x2a24f8(0x1bc)],'buys':_0x78a7fc[_0x2a24f8(0x1c2)]=='buy'?_0x4e1b09['buys']+0x1:_0x4e1b09[_0x2a24f8(0x1c8)]};dbCoinResults[_0x2a24f8(0x148)](_0x2a24f8(0x273))[_0x2a24f8(0x1c0)]({'coin':_0x78a7fc[_0x2a24f8(0x1d6)]})[_0x2a24f8(0x1b4)](_0x4d36e3)[_0x2a24f8(0x126)]();if(!_0x49535e){if(_0x78a7fc[_0x2a24f8(0x240)]&&_0x78a7fc[_0x2a24f8(0x240)][_0x2a24f8(0x1d3)]==_0x2a24f8(0x19f)){const _0x51fe67=currentCoins[_0x2a24f8(0x1c0)](_0x6277d9=>_0x6277d9[_0x2a24f8(0x1d6)]==_0x2a24f8(0x19f));if(_0x51fe67){let _0x401039=dbCoinResults[_0x2a24f8(0x148)](_0x2a24f8(0x273))[_0x2a24f8(0x1c0)]({'coin':_0x2a24f8(0x19f)})['value']();_0x4d36e3={..._0x401039,'number':_0x51fe67[_0x2a24f8(0x268)]},dbCoinResults[_0x2a24f8(0x148)](_0x2a24f8(0x273))[_0x2a24f8(0x1c0)]({'coin':_0x2a24f8(0x19f)})['assign'](_0x4d36e3)[_0x2a24f8(0x126)]();}}}}async function placeOrder(_0x496721){const _0x4d59ad=_0x41221a,_0x5da136=config[_0x4d59ad(0x12e)]==_0x4d59ad(0x1ef)?_0x4d59ad(0x1ef):'limit';if(lockOrders==ORDERS[_0x4d59ad(0x287)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4d59ad(0x291)],allOrdersPlaced=![],validateOrdersState='initial';let _0x188b3d=![];lastOrders=[];for(const _0x572cd5 of _0x496721){let _0x538d72,_0xe3a527,_0x2cdded,_0x3be276,_0x4f555c,_0x4efe4e=_0x572cd5[_0x4d59ad(0x14e)];try{const _0xd22bee=await exchange[_0x4d59ad(0x254)](_0x4efe4e);_0x538d72=_0x572cd5['reverse']?0x1/_0x572cd5[_0x4d59ad(0x21a)]:_0x572cd5['last'],_0xe3a527=_0xd22bee['bid'],_0x2cdded=_0xd22bee[_0x4d59ad(0x1c4)];_0x572cd5['reverse']?(_0x3be276=_0x572cd5[_0x4d59ad(0x1c2)]==_0x4d59ad(0x202)?_0x4d59ad(0x21b):'buy',_0x4f555c=Math[_0x4d59ad(0x270)](_0x572cd5['trade'])/_0x538d72):(_0x3be276=_0x572cd5['side'],_0x4f555c=Math[_0x4d59ad(0x270)](_0x572cd5['trade']));_0x5da136=='limit'&&(config['ordertype']==_0x4d59ad(0x29c)&&(_0x538d72=_0x3be276==_0x4d59ad(0x202)?_0xe3a527:_0x2cdded),config['ordertype']=='limit-low'&&(_0x538d72=_0x3be276==_0x4d59ad(0x202)?_0x2cdded:_0xe3a527));_0x4f555c=formatResult(_0x4f555c,0x8),_0x538d72=formatResult(_0x538d72,0x8);const _0x34734b=_0x3be276=='sell'?config[_0x4d59ad(0x211)]?String[_0x4d59ad(0x1e4)]('0x'+config[_0x4d59ad(0x211)])+'\x20':'':config[_0x4d59ad(0x195)]?String['fromCodePoint']('0x'+config[_0x4d59ad(0x195)])+'\x20':'',_0x3cab1d=_0x5da136==_0x4d59ad(0x1ef)?_0x4d59ad(0x20a):config[_0x4d59ad(0x12e)]==_0x4d59ad(0x29c)?_0x4d59ad(0x1ad):_0x4d59ad(0x1fa),_0x119bbc=(Math[_0x4d59ad(0x272)](Math[_0x4d59ad(0x12d)]()*0x35a4e900)+0x5f5e100)[_0x4d59ad(0x1f7)]();lastOrders[_0x4d59ad(0x25a)]({'customId':_0x119bbc,'symbol':_0x4efe4e,'coin':_0x572cd5[_0x4d59ad(0x1d6)],'amount':_0x4f555c,'price':_0x538d72,'side':_0x3be276,'reverse':_0x572cd5['reverse'],'filled':0x0});if(_0x5da136==_0x4d59ad(0x1ef))logHistory(_0x4d59ad(0x12b),''+_0x34734b+_0x3cab1d+_0x4d59ad(0x1e0)+_0x4efe4e+'\x20'+_0x3be276+'\x20#'+formatResult(_0x4f555c,0x8)+'\x20@'+formatResult(_0x538d72,0x8));else logHistory('order',''+_0x34734b+_0x3cab1d+_0x4d59ad(0x1e0)+_0x4efe4e+'\x20'+_0x3be276+'\x20#'+formatResult(_0x4f555c,0x8)+'\x20@'+formatResult(_0x538d72,0x8));const _0x5a7775=await exchange[_0x4d59ad(0x13c)](_0x4efe4e,_0x5da136,_0x3be276,_0x4f555c,_0x538d72);logger[_0x4d59ad(0x14c)](_0x4d59ad(0x15e)+_0x5a7775['id']+_0x4d59ad(0x245)+_0x119bbc);const _0x1cc4d5=lastOrders['length']-0x1;if(_0x1cc4d5>=0x0&&lastOrders[_0x1cc4d5][_0x4d59ad(0x1de)]==_0x119bbc){lastOrders[_0x1cc4d5][_0x4d59ad(0x213)]=_0x5a7775['id'];if(_0x5a7775['amount'])lastOrders[_0x1cc4d5]['amount']=_0x5a7775[_0x4d59ad(0x207)];if(_0x5a7775[_0x4d59ad(0x218)])lastOrders[_0x1cc4d5]['price']=_0x5a7775[_0x4d59ad(0x218)];lastOrders[_0x1cc4d5][_0x4d59ad(0x240)]=_0x5a7775[_0x4d59ad(0x240)];}if(config[_0x4d59ad(0x201)]!=0x0){let _0x26167e=null;if(cooldownTracker[_0x4d59ad(0x29b)]==config['cooldown']-0x1)_0x26167e=cooldownTracker[_0x4d59ad(0x212)]();const _0x208fc9=getTimeStamp();cooldownTracker[_0x4d59ad(0x25a)](_0x208fc9);if(_0x26167e){const _0x43ef5b=fns[_0x4d59ad(0x27c)](new Date(_0x208fc9),new Date(_0x26167e));if(_0x43ef5b<cooldownInterval){logHistory(_0x4d59ad(0x137),_0x4d59ad(0x1bb)+config[_0x4d59ad(0x201)]+_0x4d59ad(0x220)+cooldownInterval/0x3c+_0x4d59ad(0x194)+cooldownPeriod/(0xe10*0x3e8)+_0x4d59ad(0x278)),coolingDown=!![];break;}}}}catch(_0x4da9dd){if(_0x4da9dd['toString']()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4d59ad(0x17c)](_0x2c06e8=>_0x2c06e8[_0x4d59ad(0x14e)]!=_0x4efe4e),logHistory(_0x4d59ad(0x137),_0x4d59ad(0x296)+_0x4efe4e),_0x188b3d=!![];else{if(_0x4da9dd['toString']()['includes'](_0x4d59ad(0x2ad)))lastOrders=lastOrders[_0x4d59ad(0x17c)](_0x101e23=>_0x101e23[_0x4d59ad(0x14e)]!=_0x4efe4e),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x4efe4e),_0x188b3d=!![];else{if(_0x4da9dd['toString']()[_0x4d59ad(0x191)](_0x4d59ad(0x165)))lastOrders=lastOrders[_0x4d59ad(0x17c)](_0x533de3=>_0x533de3[_0x4d59ad(0x14e)]!=_0x4efe4e),logHistory('error',_0x4d59ad(0x24a)+_0x4efe4e),_0x188b3d=!![];else _0x4da9dd[_0x4d59ad(0x1f7)]()['includes'](_0x4d59ad(0x147))?(lastOrders=lastOrders[_0x4d59ad(0x17c)](_0x2aaae2=>_0x2aaae2['symbol']!=_0x4efe4e),logHistory('error',_0x4d59ad(0x296)+_0x4efe4e),_0x188b3d=!![]):(lastOrders=lastOrders[_0x4d59ad(0x17c)](_0x2bf6d4=>_0x2bf6d4[_0x4d59ad(0x14e)]!=_0x4efe4e),await handleError(_0x4da9dd,_0x4d59ad(0x149),_0x4efe4e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4d59ad(0x29b)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x28c8ae=config[_0x4d59ad(0x12e)]==_0x4d59ad(0x1ef)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x293dd7=_0x4d59ad;validateOrders(_0x293dd7(0x23b));},_0x28c8ae);}else unlockOrders();_0x188b3d&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4d59ad(0x1b7),_0x4d59ad(0x1a1)));}else{if(coolingDown)!config[_0x4d59ad(0x208)]&&logHistory(_0x4d59ad(0x137),_0x4d59ad(0x256));else lockOrders!=ORDERS[_0x4d59ad(0x287)]&&(!config[_0x4d59ad(0x208)]&&(config[_0x4d59ad(0x12e)]==_0x4d59ad(0x1ef)?logHistory(_0x4d59ad(0x137),_0x4d59ad(0x23f)):logHistory('error',_0x4d59ad(0x219))));}}function persistOpenOrders(_0x1558c6){const _0x5677cf=_0x41221a,_0x41de81={...config,'openOrders':_0x1558c6};let _0x327a7e=dbConfig[_0x5677cf(0x148)]('bot')[_0x5677cf(0x1c0)]({'botID':botID})[_0x5677cf(0x130)]();_0x327a7e&&dbConfig[_0x5677cf(0x148)]('bot')['find']({'botID':botID})[_0x5677cf(0x1b4)](_0x41de81)[_0x5677cf(0x126)]();}function restoreOrders(){const _0x46f1f2=_0x41221a;let _0x9964d8;config['openOrders']&&allOpenOrders[_0x46f1f2(0x142)](_0x49291d=>{const _0x4888f6=_0x46f1f2,_0x3630fd=config[_0x4888f6(0x176)][_0x4888f6(0x1c0)](_0x5e9e0e=>_0x5e9e0e['orderId']==_0x49291d['id']);_0x3630fd&&(lastOrders[_0x4888f6(0x25a)](_0x3630fd),_0x9964d8=_0x49291d[_0x4888f6(0x235)]);});if(lastOrders[_0x46f1f2(0x29b)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x46f1f2(0x187),allOrdersPlaced=!![];const _0x32d50f=new Date()[_0x46f1f2(0x2a1)](),_0x54a655=config[_0x46f1f2(0x12e)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x46f1f2(0x161)]*0x3c*0x3e8;if(_0x9964d8+_0x54a655>_0x32d50f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5cae3c=_0x46f1f2;validateOrders(_0x5cae3c(0x23b));},_0x9964d8+_0x54a655-_0x32d50f);}else validateOrders(_0x46f1f2(0x23b));}}async function sendMetricsTelegram(){const _0x496239=_0x41221a;if(!coinsLoaded){process[_0x496239(0x251)]({'telegrammsg':_0x496239(0x18a)},_0x360ed4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x560e12='';if(config[_0x496239(0x242)])_0x560e12=_0x496239(0x20d)+config[_0x496239(0x150)]+_0x496239(0x13f);else _0x560e12='<b>Bot\x20'+botID+_0x496239(0x13f);const _0x105f07=getKPIs('basecoin'),_0x484329=getKPIs(_0x496239(0x1c5),config[_0x496239(0x1c5)]),_0x20b6fe=getKPIs(_0x496239(0x1b6)),_0x41c5ec=getKPIs(_0x496239(0x16e),config['fiat']);_0x560e12+=_0x496239(0x144),_0x560e12+=_0x105f07[_0x496239(0x152)]+'\x20:\x20'+_0x105f07['value']+'\x0a',_0x560e12+=_0x105f07[_0x496239(0x1e9)]+':\x20'+_0x105f07['change']+'%\x0a',_0x560e12+=_0x484329[_0x496239(0x152)]+_0x496239(0x203)+_0x484329[_0x496239(0x130)]+'\x0a',_0x560e12+=_0x484329[_0x496239(0x1e9)]+':\x20'+_0x484329['change']+'%\x0a',_0x560e12+=_0x20b6fe[_0x496239(0x152)]+':\x20'+_0x20b6fe['value']+'\x20('+config[_0x496239(0x216)]+')\x0a',_0x560e12+=_0x20b6fe[_0x496239(0x1e9)]+':\x20'+_0x20b6fe[_0x496239(0x1cf)]+_0x496239(0x25f)+config[_0x496239(0x216)]+')\x0a',_0x560e12+=_0x41c5ec[_0x496239(0x152)]+':\x20'+_0x41c5ec['value']+'\x20('+config[_0x496239(0x1c5)]+')\x0a',_0x560e12+=_0x41c5ec[_0x496239(0x1e9)]+':\x20'+_0x41c5ec[_0x496239(0x1cf)]+_0x496239(0x25f)+config[_0x496239(0x1c5)]+')\x0a',_0x560e12+=_0x496239(0x196),process[_0x496239(0x251)]({'telegrammsg':_0x560e12},_0x316103=>{});}async function sendPortfolioTelegram(){const _0x4fafe6=_0x41221a;if(!coinsLoaded){process[_0x4fafe6(0x251)]({'telegrammsg':_0x4fafe6(0x18a)},_0x31c488=>{});return;}let _0x34c85f='';if(config[_0x4fafe6(0x242)])_0x34c85f=_0x4fafe6(0x20d)+config[_0x4fafe6(0x150)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x34c85f='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x34c85f+='<pre>',_0x34c85f+=_0x4fafe6(0x199),_0x34c85f+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x34c85f+=_0x4fafe6(0x199),currentCoins[_0x4fafe6(0x142)](_0x5e3e20=>{const _0x5a274a=_0x4fafe6;_0x34c85f+=_0x5e3e20[_0x5a274a(0x1d6)][_0x5a274a(0x1af)](0x7)+'|\x20'+formatPad(_0x5e3e20[_0x5a274a(0x143)],0x2,0x6)+'|\x20'+formatPad(_0x5e3e20[_0x5a274a(0x25d)],0x2,0x6)+'|\x20'+formatPad(_0x5e3e20[_0x5a274a(0x1ff)]*0x64,0x2,0x6)+'\x0a';}),_0x34c85f+='</pre>',process['send']({'telegrammsg':_0x34c85f},_0x2aa266=>{});}function formatPad(_0x154f70,_0x36d1b9,_0x14a6b5){const _0x11dcaf=_0x41221a,_0x40d9eb=formatResultString(_0x154f70,_0x36d1b9);return _0x40d9eb?_0x40d9eb[_0x11dcaf(0x12f)](_0x14a6b5):''[_0x11dcaf(0x12f)](_0x14a6b5);}function logHistory(_0x18fe36,_0x324759,_0x3b7ebf=''){const _0x2d565f=_0x41221a;let _0x28e81f={'time':getTimeStamp(),'type':_0x18fe36,'event':_0x324759};dbLogs[_0x2d565f(0x148)](_0x2d565f(0x269))[_0x2d565f(0x25a)](_0x28e81f)[_0x2d565f(0x126)]();if(_0x3b7ebf=='')_0x3b7ebf=_0x324759;proxyEmit(_0x2d565f(0x289),{'log':_0x28e81f,'summary':_0x3b7ebf}),process[_0x2d565f(0x251)]({'telegram':{..._0x28e81f,'botname':config[_0x2d565f(0x150)],'showname':config[_0x2d565f(0x242)]}},_0x150a73=>{}),logger['full'](''+_0x28e81f[_0x2d565f(0x289)]);}function _0x10e6(_0x373954,_0x3910a3){const _0x3038d5=_0x1d18();return _0x10e6=function(_0x4104d6,_0x658bf){_0x4104d6=_0x4104d6-0x124;let _0x1d18c7=_0x3038d5[_0x4104d6];return _0x1d18c7;},_0x10e6(_0x373954,_0x3910a3);}function emitHistory(_0xbeeb68={}){const _0x2fd1f4=_0x41221a;Object[_0x2fd1f4(0x28f)](_0xbeeb68)[_0x2fd1f4(0x29b)]==0x0&&(_0xbeeb68={'type':[_0x2fd1f4(0x12b),_0x2fd1f4(0x289)],'event':'','page':0x1});if(_0xbeeb68[_0x2fd1f4(0x1c1)][_0x2fd1f4(0x191)](_0x2fd1f4(0x289)))_0xbeeb68[_0x2fd1f4(0x1c1)][_0x2fd1f4(0x252)](_0xbeeb68['type']['indexOf'](_0x2fd1f4(0x289)),0x1,_0x2fd1f4(0x137),'warning',_0x2fd1f4(0x1b7));if(dbLogs['has'](_0x2fd1f4(0x269))[_0x2fd1f4(0x130)]()){let _0x8aaf18=dbLogs[_0x2fd1f4(0x148)](_0x2fd1f4(0x269))[_0x2fd1f4(0x17c)](_0x39351a=>{const _0x32437d=_0x2fd1f4;if(_0xbeeb68[_0x32437d(0x1c1)]['length']==0x0)return![];else return _0xbeeb68[_0x32437d(0x1c1)][_0x32437d(0x191)](_0x39351a[_0x32437d(0x1c1)]);})[_0x2fd1f4(0x17c)](_0x243572=>{const _0xa93b94=_0x2fd1f4;if(_0xbeeb68['event']=='')return!![];else return _0x243572[_0xa93b94(0x289)][_0xa93b94(0x1a2)]()['includes'](_0xbeeb68[_0xa93b94(0x289)][_0xa93b94(0x1a2)]());})[_0x2fd1f4(0x258)](_0x2fd1f4(0x12c)),_0x3359f1=_0x8aaf18[_0x2fd1f4(0x130)]()[_0x2fd1f4(0x29b)];_0x8aaf18=_0x8aaf18[_0x2fd1f4(0x179)]()[_0x2fd1f4(0x16c)]((_0xbeeb68[_0x2fd1f4(0x2a4)]-0x1)*logPageSize,_0xbeeb68['page']*logPageSize-0x1)[_0x2fd1f4(0x179)]()[_0x2fd1f4(0x130)](),proxyEmit(_0x2fd1f4(0x25c),{'logs':_0x8aaf18,'total':_0x3359f1});}else proxyEmit(_0x2fd1f4(0x25c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4de5e3){const _0x436b63=_0x41221a;if(dbLogs[_0x436b63(0x247)](_0x436b63(0x269))['value']()){const _0x4e5c99=dbLogs[_0x436b63(0x148)]('logs')[_0x436b63(0x258)](_0x436b63(0x12c))['filter'](_0x293531=>{const _0x309e19=_0x436b63;return _0x293531[_0x309e19(0x1c1)]==_0x309e19(0x12b);})[_0x436b63(0x130)]();dbLogs['get'](_0x436b63(0x269))[_0x436b63(0x16f)]()['write'](),dbLogs[_0x436b63(0x148)](_0x436b63(0x269))[_0x436b63(0x1b4)](_0x4e5c99)['write'](),emitHistory(_0x4de5e3);}}async function pauseBot(_0x3ad0e3=''){const _0x836c8a=_0x41221a,_0x105e00=new Date()['getTime']();if(!lastErrorShown||_0x105e00-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x105e00;!lastBotPause?(lastBotPause=_0x105e00,consecutivePauses=0x1):(_0x105e00-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':'restart'},_0xd055db=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x836c8a(0x2a1)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3ad0e3)_0x3ad0e3+=_0x836c8a(0x129);logHistory(_0x836c8a(0x137),_0x3ad0e3+_0x836c8a(0x14d)+pauseBotInterval/0xea60+_0x836c8a(0x298)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4cb19b=_0x41221a;process[_0x4cb19b(0x251)]({'stop':_0x4cb19b(0x1b3)},_0x2eae62=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1aeaaf,_0x5f5d09){const _0x3b34f7=_0x41221a;if(_0x1aeaaf[_0x3b34f7(0x1f7)]()['includes'](_0x3b34f7(0x22b)))return logHistory(_0x3b34f7(0x137),config['exchange']+_0x3b34f7(0x1f1)),![];else{if(_0x1aeaaf['toString']()[_0x3b34f7(0x191)](_0x3b34f7(0x2a7)))return logHistory(_0x3b34f7(0x137),config[_0x3b34f7(0x246)]+_0x3b34f7(0x23c)),![];else{if(_0x1aeaaf['toString']()[_0x3b34f7(0x191)](_0x3b34f7(0x140)))return logHistory(_0x3b34f7(0x137),config[_0x3b34f7(0x246)]+_0x3b34f7(0x146)),logHistory(_0x3b34f7(0x137),_0x3b34f7(0x18b)),![];else await handleError(_0x1aeaaf,_0x5f5d09);}}}async function handleError(_0x49120a,_0x42ec20,_0xedccaf=''){const _0x5ae4d9=_0x41221a,_0x19f198=config['exchange']||_0x5ae4d9(0x297);if(_0x49120a['toString']()['includes'](_0x5ae4d9(0x24d))||_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x1d8)))await pauseBot(config['exchange']+_0x5ae4d9(0x233));else{if(_0x49120a['toString']()[_0x5ae4d9(0x191)](_0x5ae4d9(0x1eb))||_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x1d1)))await pauseBot(config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x1d2));else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x2a2)))await pauseBot(config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x228));else{if(_0x49120a['toString']()[_0x5ae4d9(0x191)](_0x5ae4d9(0x19c)))await pauseBot(config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x22d));else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x17e)))logHistory(_0x5ae4d9(0x137),_0x42ec20+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x5ae4d9(0x137),_0x5ae4d9(0x16d)),await killBot();else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x2a8)))logHistory(_0x5ae4d9(0x137),_0x42ec20+_0x5ae4d9(0x134)),logHistory('error',_0x5ae4d9(0x16d)),await killBot();else{if(_0x49120a instanceof ccxt[_0x5ae4d9(0x124)])logger['debug']('Uncaught\x20NetworkError:',_0x49120a),await pauseBot(config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x181));else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x22b)))logHistory(_0x5ae4d9(0x137),_0x42ec20+_0x5ae4d9(0x129)+config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x1da)),logHistory(_0x5ae4d9(0x137),_0x5ae4d9(0x16d)),await killBot();else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x2a7)))logHistory(_0x5ae4d9(0x137),_0x42ec20+_0x5ae4d9(0x129)+config[_0x5ae4d9(0x246)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x5ae4d9(0x137),_0x5ae4d9(0x16d)),await killBot();else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x140)))logHistory(_0x5ae4d9(0x137),_0x42ec20+_0x5ae4d9(0x129)+config[_0x5ae4d9(0x246)]+_0x5ae4d9(0x155)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x49120a[_0x5ae4d9(0x1f7)]()[_0x5ae4d9(0x191)](_0x5ae4d9(0x1e2)))logHistory(_0x5ae4d9(0x137),_0x42ec20+_0x5ae4d9(0x19a)+_0xedccaf);else _0x49120a instanceof ccxt[_0x5ae4d9(0x151)]?(logger['debug']('Uncaught\x20ExchangeError:',_0x49120a),logHistory(_0x5ae4d9(0x137),_0x42ec20+'\x20|\x20'+config[_0x5ae4d9(0x246)]+'\x20exchange\x20error')):(logger[_0x5ae4d9(0x19d)](_0x42ec20+_0x5ae4d9(0x156),_0x49120a),await pauseBot(_0x5ae4d9(0x1cd)));}}}}}}}}}}}function formatResult(_0x2071a1,_0x258288){return parseFloat(_0x2071a1['toFixed'](_0x258288));}function formatResultTruncate(_0x11e533,_0x5e4bd0){const _0x407ad6=_0x41221a;let _0x4c0a51=formatResultString(_0x11e533,0xa),_0x3f7cee=_0x4c0a51[_0x407ad6(0x1f4)]('.');return _0x3f7cee!=-0x1&&(_0x4c0a51=_0x4c0a51[_0x407ad6(0x16c)](0x0,_0x3f7cee+_0x5e4bd0+0x1)),Number(_0x4c0a51);}function formatResultString(_0x338620,_0x54b4de){const _0x15277a=_0x41221a;let _0x28584d;if(!(''+_0x338620)[_0x15277a(0x191)]('e'))_0x28584d=+(Math[_0x15277a(0x197)](_0x338620+'e+'+_0x54b4de)+'e-'+_0x54b4de);else{let _0x4f595d=(''+_0x338620)[_0x15277a(0x17d)]('e'),_0x1a5422='';+_0x4f595d[0x1]+_0x54b4de>0x0&&(_0x1a5422='+'),_0x28584d=+(Math['round'](+_0x4f595d[0x0]+'e'+_0x1a5422+(+_0x4f595d[0x1]+_0x54b4de))+'e-'+_0x54b4de);}return Number(_0x28584d)[_0x15277a(0x153)](_0x54b4de);}function getServerTime(){const _0x5ccaf3=_0x41221a,_0x5343e1=new Date();return _0x5343e1[_0x5ccaf3(0x21f)]()+'/'+(_0x5343e1['getMonth']()+0x1)[_0x5ccaf3(0x1f7)]()['padStart'](0x2,'0')+'/'+_0x5343e1['getDate']()[_0x5ccaf3(0x1f7)]()[_0x5ccaf3(0x12f)](0x2,'0')+'\x20'+_0x5343e1['getHours']()[_0x5ccaf3(0x1f7)]()[_0x5ccaf3(0x12f)](0x2,'0')+':'+_0x5343e1[_0x5ccaf3(0x1c6)]()[_0x5ccaf3(0x1f7)]()[_0x5ccaf3(0x12f)](0x2,'0')+':'+_0x5343e1[_0x5ccaf3(0x12a)]()[_0x5ccaf3(0x1f7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5d4254=_0x41221a,_0x261ab9=shiftedTime();return _0x261ab9['getFullYear']()+'/'+(_0x261ab9[_0x5d4254(0x20e)]()+0x1)['toString']()[_0x5d4254(0x12f)](0x2,'0')+'/'+_0x261ab9[_0x5d4254(0x275)]()[_0x5d4254(0x1f7)]()[_0x5d4254(0x12f)](0x2,'0')+'\x20'+_0x261ab9[_0x5d4254(0x1e6)]()[_0x5d4254(0x1f7)]()['padStart'](0x2,'0')+':'+_0x261ab9[_0x5d4254(0x1c6)]()[_0x5d4254(0x1f7)]()[_0x5d4254(0x12f)](0x2,'0')+':'+_0x261ab9['getSeconds']()[_0x5d4254(0x1f7)]()[_0x5d4254(0x12f)](0x2,'0');}function getDate(){const _0x47ab64=_0x41221a,_0x2da678=shiftedTime();return _0x2da678['getFullYear']()+'/'+(_0x2da678[_0x47ab64(0x20e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2da678[_0x47ab64(0x275)]()[_0x47ab64(0x1f7)]()['padStart'](0x2,'0');}function getHour(){const _0x530ffa=_0x41221a,_0x1e7953=shiftedTime();return _0x1e7953[_0x530ffa(0x1e6)]()[_0x530ffa(0x1f7)]()[_0x530ffa(0x12f)](0x2,'0');}function sleep(_0x5bc9d3){return new Promise(_0x1c63ed=>setTimeout(_0x1c63ed,_0x5bc9d3));}function shiftedTime(){const _0x4cb951=_0x41221a,_0x39e0b4=new Date();let _0x511878=_0x39e0b4;if(config&&config['timeshift']!==0x0)_0x511878=fns[_0x4cb951(0x186)](_0x39e0b4,{'hours':config[_0x4cb951(0x276)]});return _0x511878;}function timer(_0x4a1d56){const _0x5ea05c=_0x41221a,_0x3a064e=new Date();!lasttime?console[_0x5ea05c(0x1b9)](getTimeStamp()+_0x5ea05c(0x209),_0x4a1d56,_0x3a064e):console[_0x5ea05c(0x1b9)](getTimeStamp()+_0x5ea05c(0x209),_0x4a1d56,(_0x3a064e-lasttime)/0x3e8),lasttime=_0x3a064e;}