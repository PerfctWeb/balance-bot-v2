const _0x35f01f=_0x27bf;(function(_0x2272f1,_0x137558){const _0x404cb3=_0x27bf,_0x144a07=_0x2272f1();while(!![]){try{const _0xffdf93=-parseInt(_0x404cb3(0x1e9))/0x1+parseInt(_0x404cb3(0x18b))/0x2+parseInt(_0x404cb3(0x11a))/0x3*(parseInt(_0x404cb3(0xd7))/0x4)+-parseInt(_0x404cb3(0x136))/0x5+-parseInt(_0x404cb3(0x1b8))/0x6+-parseInt(_0x404cb3(0xf1))/0x7+-parseInt(_0x404cb3(0x1df))/0x8*(-parseInt(_0x404cb3(0x19e))/0x9);if(_0xffdf93===_0x137558)break;else _0x144a07['push'](_0x144a07['shift']());}catch(_0xbfaab8){_0x144a07['push'](_0x144a07['shift']());}}}(_0x3ec3,0x1e9d1));const _0x5c0db9=function(){let _0x4df282=!![];return function(_0x945d30,_0x37cb76){const _0x5de98f=_0x4df282?function(){const _0x2fc748=_0x27bf;if(_0x37cb76){const _0x11be30=_0x37cb76[_0x2fc748(0xc9)](_0x945d30,arguments);return _0x37cb76=null,_0x11be30;}}:function(){};return _0x4df282=![],_0x5de98f;};}(),_0x59d5de=_0x5c0db9(this,function(){const _0x3fd9e5=_0x27bf;return _0x59d5de[_0x3fd9e5(0x16e)]()['search'](_0x3fd9e5(0xec))['toString']()[_0x3fd9e5(0x109)](_0x59d5de)[_0x3fd9e5(0x140)]('(((.+)+)+)+$');});_0x59d5de();'use strict';const ccxt=require(_0x35f01f(0xac))[_0x35f01f(0x143)],low=require(_0x35f01f(0x139)),FileSync=require(_0x35f01f(0x134)),fs=require('fs'),fns=require(_0x35f01f(0xff)),Crypt=require(_0x35f01f(0x18e))[_0x35f01f(0x178)],util=require('util'),argv=require(_0x35f01f(0x15e))(process[_0x35f01f(0xa3)][_0x35f01f(0x101)](0x2))[_0x35f01f(0xa3)],path=require(_0x35f01f(0x1bd));let exchange;global['ticker']={},global[_0x35f01f(0x12d)]={};const usdBasecoins=[_0x35f01f(0x19a),'BUSD',_0x35f01f(0x211),'USDT',_0x35f01f(0x169),_0x35f01f(0x15c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x35f01f(0x10f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x35f01f(0x200)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;function _0x3ec3(){const _0x153d83=['./config/','Executing\x20exchange\x20reload','-config.json','./version.json','running','Initiating\x20exchange\x20reload','cancelOrder','decrypt','uncaughtException','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','2\x20-\x20FILLED\x20unknown\x20order:\x20','RSA-OAEP','close','balancing\x20resumes\x20when\x20cooldown\x20ends','fetchClosedOrders','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','exchange\x20not\x20reloaded','fromCodePoint','data','<b>Bot\x20','cooldown','\x20|\x20exchange:\x20','USDT','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','join','showname','getDate','round','Order(s)\x20not\x20validated\x20after\x20','filled','InvalidNonce','bb-secure.json','secure','8NTKmPd','balancing\x20resumed','replace','padStart','assign','closed','0\x20-\x20EXECUTION:\x20','format','Net\x20effect','Limit\x20(low-margin)','97183WDvLJO','none','eur','Unknown\x20error\x20occured','onepagemode','push','bid','number','random','OnMaintenance','fetchTicker','getFullYear','coin','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','InsufficientFunds','startnumber','BTC','DDoSProtection','privateKey','RateLimitExceeded','2.5.0','recovery','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','UNLOCKED','Fees\x20|\x20basecoin\x20value:\x20','\x20>\x20','balances','getMinutes','date','abs','Executed\x20','trade','getPortfolio','limit-high','getStartingBalances','initial','coins','forEach','ExchangeNotAvailable','red_yellow_blue','TUSD','excluded','\x20portfolio:</b>\x20\x0a\x0a','loadMarkets','distribution','change24h','getCoins()','createOrder','basecoin','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Fee\x20discount\x20refund\x20detected:\x20','ExchangeError','filter','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','event','\x20API\x20key\x20is\x20invalid','status','isEqual','amountToPrecision','watchOrders','\x20|\x20Error\x20details:\x20','-------------------------------\x0a','differenceInSeconds','ticker','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','timeout','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','length','argv','write','2.3.5','limit','BNB/','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Failed\x20to\x20load\x20coin\x20data\x20for\x20','sha256','Order\x20is\x20invalid:\x20','ccxt','emojibuy','mkdirSync','breakeven','function','getPortfolio(0)','order','startprice','\x20change','\x20API\x20secret\x20is\x20invalid','coin-loading-progress','canceled','substring','rightTxt','watchTransactions','ORDERS.UNLOCKING','string','success','initclient','Portfolio\x20change\x20detected:\x20','\x20>\x20[DEBUG]\x20','recreateCoinResults()','keys','%\x20(','1\x20-\x20Handle\x20open\x20orders','realized','portfolio','version','headless','apply','apiSecret','indexOf','cost','OrderNotFound','loading-canceled','type','enabled','full','active','Binance','\x20minutes','remainingSymbols','storeConfiguration','348khHaHW','orderId','getPortfolio(1)','Uncaught\x20NetworkError:','customId','restart','Exchange','NetworkError','\x20value','add','Order\x20filled:\x20','Resetting\x20coin\x20results:\x20','fetchTickers','net-basecoin','getTime','emitHistory','includes','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','2\x20-\x20Validate\x20orders:\x20','log','limits','(((.+)+)+)+$','recreate','defaults','debug','\x20has\x20a\x2024h\x20drop\x20of\x20','1366603EnAjha','-performance.json','map','getCoinNumber()','botID','basecoinvalue','toFixed','removed','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','apiPassword','storeFiat','watchTrades','buy','Market','date-fns','highest','slice','toLowerCase','\x20|\x20lock\x20orders:\x20','***','limit-low','delta','emojisell','\x20exchange\x20error','constructor','parse',':\x20Bot\x20','no\x20open\x20orders','percentage','Error:\x20Invalid\x20argument\x20','freeze','error','sell',':\x20timer\x20>','symbol','valid','\x20exchange','Pausing\x20for\x20','bot-','1\x20-\x20Unlock\x20orders','Invalid\x20quantity','4977yXMzae','average','getPortfolio(2)','orderstatus','padEnd','exchanges','fetchBalance','InvalidOrder','timestamp','apiKey','datetime','colorscheme','\x20order:\x20','floor','BNB','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','sort','added','splice','change','ongoing','timeshift','************','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','MIN_NOTIONAL','\x20|\x20highest:\x20','lowdb/adapters/FileSync','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','883825BwmVBy','stringify','\x20|\x20','lowdb','bot','Saving\x20configuration','getOpenOrders()','liquidity','\x20not\x20responding','ORDERS.LOCKED','search','Transaction\x20detection\x20unblocked','UNLOCKING','pro','get','/output-000.log','showConfig','cloneDeep','EUR','usd','toUpperCase','progress','currency','offset','Reset\x20|\x20','additional\x20symbols\x20','writeFile','password','toggleBotMode','kill','market','args','performance','message','yyyy/MM/dd','set','LOCKED','cancel','USDP','openOrders','yargs/yargs','sells','Error\x20while\x20deleting\x20files:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','final','net-fiat','changes','Order\x20amount\x20is\x20invalid:\x20','./logs/','target','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','USDC','-results.json','autoliquidity','AuthenticationError','3\x20-\x20handling\x20FILLED\x20order:\x20','toString','buys','must\x20be\x20greater\x20than\x20minimum\x20amount','leftTxt','<b>','amount','/USD','threshold','spot','find','Crypt','ETH','total','page','ask','API-key\x20format\x20invalid','exchange\x20reloaded','unlinkSync','startdate','getMonth','2\x20-\x20Handled\x20open\x20orders','remove','Transaction\x20detection\x20blocked','<pre>','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ordertype','fetchOpenOrders','Limit\x20(high-margin)','price','19248JCqAiT','bb-settings.json','fiat','hybrid-crypto-js','botname','open','</pre>','sendMetricsTelegram','warning','\x20|\x20Custom\x20ID:\x20','2\x20-\x20FILLED\x20known\x20order:\x20','configuration','split','send','Bot\x20','USD','\x20metrics:</b>\x20\x0a\x0a','entries','bots','5627169YLJKjn','netoffset','last','side','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','reverse','min','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Net\x20','event-history','recent20','time','-events.json','.json','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','existsSync','createWriteStream','shift','max','has','getSeconds','exchange','\x20minutes\x20-\x20','logs','1107768WXTRZB','value','sortBy','starting-balances','fee','path'];_0x3ec3=function(){return _0x153d83;};return _0x3ec3();}let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x35f01f(0x1c1))[_0x35f01f(0xc7)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x35f01f(0xea)](_0x35f01f(0x10e)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x35f01f(0xa3)][0x3]||'',configpath=userID?_0x35f01f(0x1be)+userID+'/':'./config/',logspath=userID?_0x35f01f(0x166)+userID+'/':_0x35f01f(0x166),loggerfile=fs[_0x35f01f(0x1b0)](logspath+_0x35f01f(0x145),{'flags':'a'});!fs[_0x35f01f(0x1af)](configpath)&&fs[_0x35f01f(0xae)](configpath);!fs[_0x35f01f(0x1af)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x35f01f(0x117)+botID+_0x35f01f(0x1c0),logfile=configpath+_0x35f01f(0x117)+botID+_0x35f01f(0x1ac),performancefile=configpath+_0x35f01f(0x117)+botID+_0x35f01f(0xf2),coinresultsfile=configpath+_0x35f01f(0x117)+botID+_0x35f01f(0x16a),settingsfile=configpath+_0x35f01f(0x18c),securefile=configpath+_0x35f01f(0x1dd),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x35f01f(0xee)]({'logs':[],'version':serverversion})[_0x35f01f(0xa4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x35f01f(0xee)]({'data':[],'version':serverversion})[_0x35f01f(0xa4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x35f01f(0xee)]({'bot':[],'version':serverversion})[_0x35f01f(0xa4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x35f01f(0xee)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x35f01f(0xaa),'rsaStandard':_0x35f01f(0x1c9)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x17fa36=>{const _0x4e22d0=_0x35f01f;console[_0x4e22d0(0xea)](_0x17fa36);},'simple':_0x423da6=>{const _0x551fbb=_0x35f01f;console[_0x551fbb(0xea)](_0x423da6),loggerfile[_0x551fbb(0xa4)](util[_0x551fbb(0x1e6)](_0x423da6)+'\x0a');},'full':async(_0x2cf12b,_0x1163f5='')=>{const _0x3adcb9=_0x35f01f;let _0x4f5f09;if(config[_0x3adcb9(0x1d7)])_0x4f5f09=getTimeStamp()+':\x20'+config[_0x3adcb9(0x18f)]+_0x3adcb9(0x202)+_0x2cf12b;else _0x4f5f09=getTimeStamp()+_0x3adcb9(0x10b)+botID+_0x3adcb9(0x202)+_0x2cf12b;console['log'](_0x4f5f09),loggerfile[_0x3adcb9(0xa4)](util['format'](_0x4f5f09)+'\x0a'),_0x1163f5&&(console[_0x3adcb9(0xea)](_0x1163f5),loggerfile[_0x3adcb9(0xa4)](util['format'](_0x1163f5)+'\x0a'));},'debug':async(_0x201fdd,_0x556203='')=>{const _0x5ebb34=_0x35f01f;let _0x4bcbe1;if(config[_0x5ebb34(0x1d7)])_0x4bcbe1=getTimeStamp()+':\x20'+config[_0x5ebb34(0x18f)]+'\x20>\x20[DEBUG]\x20'+_0x201fdd;else _0x4bcbe1=getTimeStamp()+_0x5ebb34(0x10b)+botID+_0x5ebb34(0xc0)+_0x201fdd;if(debugging)console['log'](_0x4bcbe1);loggerfile[_0x5ebb34(0xa4)](util['format'](_0x4bcbe1)+'\x0a');if(_0x556203){if(debugging)console[_0x5ebb34(0xea)](_0x556203);loggerfile['write'](util['format'](_0x556203)+'\x0a');}}};process['on'](_0x35f01f(0x1c6),function(_0x22f153){const _0x27e626=_0x35f01f;logger[_0x27e626(0xef)]('Uncaught\x20Exception:',_0x22f153);});settings[_0x35f01f(0x12f)]!=config[_0x35f01f(0x12f)]&&updateTimeshift(settings['timeshift']);settings[_0x35f01f(0x1ed)]!=config['onepagemode']&&updateOnepagemode(settings[_0x35f01f(0x1ed)]);process[_0x35f01f(0x198)]({'started':_0x35f01f(0x1c2)},_0x4413ce=>{}),initializeProcessListeners();function proxyEmit(_0x3d9c79,_0x166ea3=null){const _0x1843f6=_0x35f01f;process[_0x1843f6(0x198)]({'function':_0x3d9c79,'args':_0x166ea3},_0x1a9f98=>{});}function initializeProcessListeners(){process['on']('message',_0xe69536=>{const _0x1237f1=_0x27bf;switch(Object[_0x1237f1(0xc2)](_0xe69536)[0x0]){case _0x1237f1(0x12f):_0xe69536['timeshift']!=undefined&&(settings[_0x1237f1(0x12f)]=_0xe69536['timeshift'],updateTimeshift(settings[_0x1237f1(0x12f)]));break;case _0x1237f1(0x1ed):_0xe69536[_0x1237f1(0x1ed)]!=undefined&&(settings['onepagemode']=_0xe69536[_0x1237f1(0x1ed)],updateOnepagemode(settings[_0x1237f1(0x1ed)]));break;case _0x1237f1(0x19d):_0xe69536[_0x1237f1(0x19d)]!=undefined&&(bots=JSON['parse'](_0xe69536[_0x1237f1(0x19d)]),proxyEmit('bots',bots));break;case _0x1237f1(0xb0):switch(_0xe69536[_0x1237f1(0xb0)]){case _0x1237f1(0xbe):initclient();break;case _0x1237f1(0x152):toggleBotMode();break;case _0x1237f1(0xe6):emitHistory(_0xe69536[_0x1237f1(0x155)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0xe69536[_0x1237f1(0x155)]);break;case _0x1237f1(0x209):getPortfolio(_0xe69536[_0x1237f1(0x155)]);break;case _0x1237f1(0xd6):storeConfiguration(_0xe69536[_0x1237f1(0x155)]);break;case'storeHeadless':storeHeadless(_0xe69536[_0x1237f1(0x155)]);break;case _0x1237f1(0xfb):storeFiat(_0xe69536[_0x1237f1(0x155)]);break;case'resetHistory':resetHistory();break;case _0x1237f1(0x20b):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xe69536[_0x1237f1(0x155)]);break;case'cancelLoading':cancelLoading();break;case _0x1237f1(0x146):showConfig();break;case _0x1237f1(0x192):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x1e52c4=null,_0x57c97b=![]){const _0x5bbc9e=_0x35f01f;logger[_0x5bbc9e(0xef)](_0x5bbc9e(0x14e)+(_0x1e52c4&&_0x1e52c4[_0x5bbc9e(0xa2)]>0x0?_0x5bbc9e(0x14f)+_0x1e52c4[_0x5bbc9e(0x1d6)](','):'no\x20additional\x20symbols')+_0x5bbc9e(0x138)+(_0x57c97b?_0x5bbc9e(0x17e):_0x5bbc9e(0x1ce))+_0x5bbc9e(0x1d3)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x57c97b)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x5bbc9e(0x104)){if(_0x57c97b){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x21c2f8){handleErrorNoStop(_0x21c2f8,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1e52c4);const _0x5aacd6=await getCoins();[currentCoins,currentCoinsAll]=_0x5aacd6,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5bbc9e(0xa2)]==0x0&&allOpenOrders[_0x5bbc9e(0xa2)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x5cd218=_0x35f01f;exchangeStopped=!![],await exchange[_0x5cd218(0x1ca)]();}async function reloadExchange(){const _0xe33c17=_0x35f01f;logger[_0xe33c17(0xef)](_0xe33c17(0x1c3));while(lockOrders!=ORDERS[_0xe33c17(0x200)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0xe33c17(0xef)](_0xe33c17(0x1bf)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x1dfd4f=config['exchange'],_0x1222f9=config['apiKey'],_0x1a4ae1=config[_0x35f01f(0xca)],_0x55c89e=config[_0x35f01f(0xfa)]){const _0x574459=_0x35f01f;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x1dfd4f)&&(logHistory(_0x574459(0x110),_0x574459(0xa0)+_0x1dfd4f+_0x574459(0x115)),killBot());const _0x4356b2=ccxt[_0x1dfd4f['toLowerCase']()];exchange=new _0x4356b2({'apiKey':_0x1222f9,'secret':_0x1a4ae1,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x574459(0x176)}});if(_0x55c89e)exchange[_0x574459(0x151)]=_0x55c89e;}function setStableCoins(){const _0x3c6740=_0x35f01f;let _0xe4c2b9=config['basecoin']=='ETH'?'ETH':'BTC',_0x3800fc=!allSymbols[_0x3c6740(0xe7)](_0xe4c2b9+_0x3c6740(0x174))?_0x3c6740(0x1d4):_0x3c6740(0x19a),_0x55469a=!allSymbols[_0x3c6740(0xe7)](_0xe4c2b9+'/EUR')?_0x3800fc:_0x3c6740(0x148);stablecoins={'eur':{'coin':''+_0xe4c2b9+_0x55469a,'symbol':_0xe4c2b9+'/'+_0x55469a},'usd':{'coin':''+_0xe4c2b9+_0x3800fc,'symbol':_0xe4c2b9+'/'+_0x3800fc}};}async function initwsCcxt(_0x369df9){const _0x1e94e0=_0x35f01f;_0x369df9==null&&(_0x369df9=[],config[_0x1e94e0(0xc6)]['forEach'](_0x3321c0=>{const _0xe39e8=_0x1e94e0;if(!_0x3321c0['excluded']&&_0x3321c0['coin']!=config[_0xe39e8(0x219)])_0x369df9['push'](_0x3321c0[_0xe39e8(0x113)]);}));if(!_0x369df9[_0x1e94e0(0xe7)](stablecoins['eur'][_0x1e94e0(0x113)]))_0x369df9[_0x1e94e0(0x1ee)](stablecoins[_0x1e94e0(0x1eb)][_0x1e94e0(0x113)]);if(!_0x369df9[_0x1e94e0(0xe7)](stablecoins[_0x1e94e0(0x149)][_0x1e94e0(0x113)]))_0x369df9[_0x1e94e0(0x1ee)](stablecoins['usd'][_0x1e94e0(0x113)]);if(config[_0x1e94e0(0x1b5)]['startsWith']('Binance')){if(!_0x369df9[_0x1e94e0(0xe7)](_0x1e94e0(0xa7)+config[_0x1e94e0(0x219)]))_0x369df9[_0x1e94e0(0x1ee)](_0x1e94e0(0xa7)+config[_0x1e94e0(0x219)]);}loadCoins(_0x369df9);const _0xa6903d=async _0x2e3742=>{const _0x527830=_0x1e94e0,_0x5a212a=await exchange[_0x527830(0x1f3)](_0x2e3742);global['ticker'][noslash(_0x5a212a[_0x527830(0x113)])]=_0x5a212a['last'];while(!![]){if(!botPaused)try{const _0x4da611=await exchange[_0x527830(0xfc)](_0x2e3742);global[_0x527830(0x9d)][noslash(_0x4da611[0x0][_0x527830(0x113)])]=_0x4da611[0x0][_0x527830(0x18a)],await sleep(0x3e8);}catch(_0x4b8e29){if(!exchangeStopped)await handleError(_0x4b8e29,_0x527830(0xfc),_0x2e3742);}else await sleep(0x64);}},_0x1a59a9=async _0x23a238=>{const _0x1491c8=_0x1e94e0;while(!![]){if(!botPaused)try{const _0x5b7b29=await exchange[_0x1491c8(0x1f3)](_0x23a238);global['change'][_0x5b7b29['symbol']]=_0x5b7b29[_0x1491c8(0x10d)],await sleep(0x3c*0x3e8);}catch(_0x5f53d5){if(!exchangeStopped)await handleError(_0x5f53d5,_0x1491c8(0xe3),_0x23a238);}else await sleep(0x64);}},_0x3e2813=async()=>{const _0x3cfdb0=_0x1e94e0;while(!![]){if(!botPaused)try{const _0x15f0a8=await exchange[_0x3cfdb0(0x224)]();_0x15f0a8[_0x3cfdb0(0x20e)](_0x534ca2=>{updateNumberCoinsCcxt(_0x534ca2);});}catch(_0x4ca5bd){if(!exchangeStopped)await handleError(_0x4ca5bd,_0x3cfdb0(0x224));}else await sleep(0x64);}};_0x369df9[_0x1e94e0(0x20e)](_0x3571c6=>{_0xa6903d(_0x3571c6),_0x1a59a9(_0x3571c6);}),!wsEventsSet&&(wsEventsSet=!![],_0x3e2813(),watchTransactions());}async function watchTransactions(){const _0x1b1a83=_0x35f01f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4f1fa6=await getCoins(),[_0x1c817c,_0x1a5da1]=_0x4f1fa6;let _0x1f671f=[];currentCoins['forEach'](_0x1acca0=>{const _0x38176a=_0x27bf,_0x300396=_0x1c817c[_0x38176a(0x177)](_0xc39cf2=>_0xc39cf2[_0x38176a(0x1f5)]==_0x1acca0[_0x38176a(0x1f5)]);if(_0x300396){if(_0x1acca0[_0x38176a(0x1f0)]!=_0x300396[_0x38176a(0x1f0)]){let _0x577613;if(_0x1acca0['coin']!=config[_0x38176a(0x219)]){const _0x13ea86=global[_0x38176a(0x9d)][noslash(_0x1acca0['symbol'])];_0x577613=_0x1acca0[_0x38176a(0x1a5)]?0x1/_0x13ea86:_0x13ea86;}else _0x577613=0x1;_0x1f671f['push']({'coin':_0x1acca0[_0x38176a(0x1f5)],'symbol':_0x1acca0['symbol'],'price':_0x577613,'number':Number(formatResult(_0x300396['number']-_0x1acca0['number'],0x8)),'basecoinvalue':_0x577613*(_0x300396['number']-_0x1acca0[_0x38176a(0x1f0)])});}}});if(_0x1f671f['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x1b1a83(0xef)](_0x1b1a83(0x201)+_0x1f671f[0x0]['basecoinvalue']+_0x1b1a83(0x133)+lastFees['highest']);if(!lastFees['highest']==0x0||Math[_0x1b1a83(0x206)](_0x1f671f[0x0][_0x1b1a83(0xf6)])>lastFees[_0x1b1a83(0x100)]){delete _0x1f671f[0x0][_0x1b1a83(0x113)],delete _0x1f671f[0x0]['basecoinvalue'];let _0x120c51=[],_0x461f9f=[...config['liquidity']]||[],_0x25c801=config[_0x1b1a83(0x13d)];_0x461f9f['sort']((_0x54a1e6,_0x37e312)=>_0x54a1e6[_0x1b1a83(0x205)]>_0x37e312[_0x1b1a83(0x205)]?-0x1:_0x37e312[_0x1b1a83(0x205)]>_0x54a1e6[_0x1b1a83(0x205)]?0x1:0x0);const _0x4ccf4b=getDate();if(_0x461f9f[0x0]){const _0x3b5841=fns[_0x1b1a83(0x10a)](_0x461f9f[0x0][_0x1b1a83(0x205)],'yyyy/MM/dd',new Date()),_0x28f5d6=fns[_0x1b1a83(0x10a)](_0x4ccf4b,_0x1b1a83(0x158),new Date());if(fns[_0x1b1a83(0x222)](_0x3b5841,_0x28f5d6)){_0x120c51=_0x461f9f[0x0][_0x1b1a83(0x164)];const _0x3b1110=_0x120c51[_0x1b1a83(0x177)](_0x4e98a0=>_0x4e98a0[_0x1b1a83(0x1f5)]==_0x1f671f[0x0][_0x1b1a83(0x1f5)]);_0x3b1110?(_0x3b1110[_0x1b1a83(0x1f0)]+=_0x1f671f[0x0][_0x1b1a83(0x1f0)],_0x3b1110[_0x1b1a83(0x1f0)]==0x0&&(_0x120c51=_0x120c51[_0x1b1a83(0x21d)](_0x4c75c6=>{const _0xb9b03b=_0x1b1a83;return _0x4c75c6[_0xb9b03b(0x1f5)]!=_0x1f671f[0x0][_0xb9b03b(0x1f5)];}))):_0x120c51[_0x1b1a83(0x1ee)](_0x1f671f[0x0]);const _0x55e060=_0x25c801[_0x1b1a83(0x177)](_0x2854fe=>_0x2854fe[_0x1b1a83(0x205)]==_0x4ccf4b);_0x55e060[_0x1b1a83(0x164)]=_0x120c51;}else _0x25c801[_0x1b1a83(0x1ee)]({'date':_0x4ccf4b,'changes':[_0x1f671f[0x0]]});}const _0x36b185=_0x25c801[_0x1b1a83(0x177)](_0x137729=>_0x137729[_0x1b1a83(0x205)]==_0x4ccf4b);if(_0x36b185){let _0xe1f928=!![];_0x36b185[_0x1b1a83(0x164)][_0x1b1a83(0x20e)](_0x221690=>{const _0x32e9e8=_0x1b1a83;if(_0x221690[_0x32e9e8(0x1f0)]!=0x0)_0xe1f928=![];}),_0xe1f928&&(_0x25c801=_0x25c801[_0x1b1a83(0x21d)](_0x361d39=>{return _0x361d39['date']!=_0x4ccf4b;}));}let _0x22e0cc=dbConfig[_0x1b1a83(0x144)](_0x1b1a83(0x13a))[_0x1b1a83(0x177)]({'botID':botID})[_0x1b1a83(0x1b9)]();_0x22e0cc&&(dbConfig[_0x1b1a83(0x144)](_0x1b1a83(0x13a))[_0x1b1a83(0x177)]({'botID':botID})[_0x1b1a83(0x1e3)]({'liquidity':_0x25c801})[_0x1b1a83(0xa4)](),config[_0x1b1a83(0x13d)]=_0x25c801),logHistory(_0x1b1a83(0xbd),'Portfolio\x20change\x20detected:\x20'+Math[_0x1b1a83(0x206)](_0x1f671f[0x0]['number'])+'\x20'+_0x1f671f[0x0][_0x1b1a83(0x1f5)]+'\x20'+(_0x1f671f[0x0][_0x1b1a83(0x1f0)]>0x0?'added':'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x1b1a83(0x196),emittedConfiguration());}else logger[_0x1b1a83(0xef)](_0x1b1a83(0x21b)+Math[_0x1b1a83(0x206)](_0x1f671f[0x0][_0x1b1a83(0x1f0)])+'\x20'+_0x1f671f[0x0][_0x1b1a83(0x1f5)]+'\x20'+(_0x1f671f[0x0]['number']>0x0?_0x1b1a83(0x12b):_0x1b1a83(0xf8)));transactionDetected=!![],currentCoins=_0x1c817c,currentCoinsAll=_0x1a5da1;}else logger[_0x1b1a83(0xef)](_0x1b1a83(0xbf)+Math[_0x1b1a83(0x206)](_0x1f671f[0x0][_0x1b1a83(0x1f0)])+'\x20'+_0x1f671f[0x0][_0x1b1a83(0x1f5)]+'\x20'+(_0x1f671f[0x0][_0x1b1a83(0x1f0)]>0x0?_0x1b1a83(0x12b):_0x1b1a83(0xf8))+_0x1b1a83(0x9e)),currentCoins=_0x1c817c,currentCoinsAll=_0x1a5da1;}await sleep(watchTransactionsInterval);}catch(_0x483fb0){if(!exchangeStopped)await handleError(_0x483fb0,_0x1b1a83(0xba));}else await sleep(0x64);}}async function loadSymbols(_0x4139da=config['exchange'],_0x22ee31=![]){const _0x1a0612=_0x35f01f;if(allSymbols&&!_0x22ee31)return;try{markets=await exchange[_0x1a0612(0x214)](),allSymbols=[],Object[_0x1a0612(0x19c)](markets)['forEach'](_0x1e4641=>{const _0x14487e=_0x1a0612;_0x1e4641[0x1][_0x14487e(0xd2)]&&_0x1e4641[0x1][_0x14487e(0x176)]&&allSymbols[_0x14487e(0x1ee)](_0x1e4641[0x0]);});}catch(_0x1b2a22){throw _0x1b2a22;}}async function initclient(){const _0x542973=_0x35f01f;emitLoadingProgress(),proxyEmit(_0x542973(0x196),emittedConfiguration()),proxyEmit(_0x542973(0x11f),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x542973(0x203),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2857ba=getNormalizedPerformance();emitPerformance(_0x2857ba),getStartingBalances(_0x2857ba);}async function toggleBotMode(){const _0x4107fa=_0x35f01f;let _0x18ad73=dbConfig[_0x4107fa(0x144)](_0x4107fa(0x13a))[_0x4107fa(0x177)]({'botID':botID})['value']();if(_0x18ad73){const _0x300c68=!_0x18ad73[_0x4107fa(0xc8)];dbConfig[_0x4107fa(0x144)](_0x4107fa(0x13a))[_0x4107fa(0x177)]({'botID':botID})[_0x4107fa(0x1e3)]({'headless':_0x300c68})[_0x4107fa(0xa4)](),config['headless']=_0x300c68,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3e64f9=_0x35f01f;process[_0x3e64f9(0x198)]({'updatebotmanager':!![]},_0x217050=>{});}async function loadCoins(_0x3a5e10){const _0x3a4b08=_0x35f01f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3b1161,_0x5ce414=0x0,_0x292f07=0x0;_0x3a5e10[_0x3a4b08(0x20e)](_0x15061a=>{const _0x25aaf9=_0x3a4b08;loading[_0x25aaf9(0xd5)][_0x25aaf9(0x1ee)](_0x15061a);}),loadingCanceled=![];let _0x387ed4=![];while(_0x3b1161!=_0x3a5e10[_0x3a4b08(0xa2)]){_0x3b1161=0x0,_0x3a5e10['forEach'](_0x152119=>{const _0xb6a0cc=_0x3a4b08;if(global[_0xb6a0cc(0x9d)][noslash(_0x152119)]){loading[_0xb6a0cc(0xd5)]=loading[_0xb6a0cc(0xd5)][_0xb6a0cc(0x21d)](_0x27f7b3=>_0x27f7b3!=_0x152119);if(!watchedSymbols['includes'](_0x152119))watchedSymbols[_0xb6a0cc(0x1ee)](_0x152119);_0x3b1161++;}}),loading['progress']=Math[_0x3a4b08(0x1d9)](_0x3b1161/_0x3a5e10[_0x3a4b08(0xa2)]*0x64);loading[_0x3a4b08(0x14b)]!=0x64&&(_0x292f07>0x1e*0x5&&(loading[_0x3a4b08(0x9f)]=!![],emitLoadingProgress()),_0x292f07>0x78*0x5&&!_0x387ed4&&(loading[_0x3a4b08(0x15b)]=!![],emitLoadingProgress(),_0x387ed4=!![],logHistory('error',_0x3a4b08(0xa9)+loading[_0x3a4b08(0xd5)][_0x3a4b08(0x1d6)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x3a4b08(0x116)+loadCoinsRetryInterval/0xea60+_0x3a4b08(0x135)),pidCoinReloading=setTimeout(()=>{const _0x413e5b=_0x3a4b08;process[_0x413e5b(0x198)]({'stop':_0x413e5b(0xdc)},_0x2c5816=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3b1161!=_0x5ce414&&(_0x5ce414=_0x3b1161,emitLoadingProgress()),_0x292f07++,await sleep(0xc8);}_0x3b1161==_0x3a5e10['length']&&(coinsLoaded=!![],process[_0x3a4b08(0x198)]({'status':_0x3a4b08(0xd0),'live':_0x3a4b08(0x1c2)},_0x139d32=>{}),_0x387ed4&&logHistory(_0x3a4b08(0xbd),_0x3a4b08(0xf9)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3de453=_0x35f01f;proxyEmit(_0x3de453(0x196),{...emittedConfiguration(),'configstate':_0x3de453(0xce)});}function emitLoadingProgress(){const _0x526330=_0x35f01f;proxyEmit(_0x526330(0xb6),loading);}async function getFiat(){const _0x1a537d=_0x35f01f;let _0x426323=global['ticker'][stablecoins[_0x1a537d(0x1eb)][_0x1a537d(0x1f5)]],_0x17d748=global[_0x1a537d(0x9d)][stablecoins[_0x1a537d(0x149)][_0x1a537d(0x1f5)]];return{'eur':Number(_0x426323),'usd':Number(_0x17d748)};}function capitalize(_0x28640c){const _0x437c55=_0x35f01f;return _0x28640c[_0x437c55(0xb8)](0x0,0x1)[_0x437c55(0x14a)]()+_0x28640c['substring'](0x1);}function supportedExchanges(){const _0x5690bf=_0x35f01f,_0x3cbee6=['ws',_0x5690bf(0xe3),_0x5690bf(0x1f3),_0x5690bf(0xfc),_0x5690bf(0x224),_0x5690bf(0x1c4),_0x5690bf(0x218),_0x5690bf(0x188),_0x5690bf(0x1cc),_0x5690bf(0x120)];let _0x5af755=[],_0x41e09f=[],_0x59de27=ccxt['exchanges'];_0x59de27[_0x5690bf(0x20e)](_0x1ac90c=>{const _0x1c2902=_0x5690bf;try{const _0x2435f7=new ccxt[_0x1ac90c]();if(_0x2435f7[_0x1c2902(0x1b3)]['ws'])_0x41e09f['push'](_0x2435f7);}catch(_0xd7669){}}),_0x41e09f[_0x5690bf(0x20e)](_0x3a9b6a=>{const _0x557f66=_0x5690bf;let _0x17b7b3=0x0;_0x3cbee6[_0x557f66(0x20e)](_0x3877dc=>{const _0x162b55=_0x557f66;_0x3877dc in _0x3a9b6a[_0x162b55(0x1b3)]&&_0x3a9b6a['has'][_0x3877dc]&&_0x17b7b3++;}),_0x17b7b3==_0x3cbee6[_0x557f66(0xa2)]&&_0x5af755[_0x557f66(0x1ee)](capitalize(_0x3a9b6a['id']));});let _0x506674=[];return _0x59de27[_0x5690bf(0x20e)](_0x504615=>{_0x504615=capitalize(_0x504615);if(!_0x5af755['includes'](_0x504615))_0x506674['push'](_0x504615);}),_0x5af755;}function setStartDatePerformance(){const _0x27fe5a=_0x35f01f;if(config&&config[_0x27fe5a(0x13d)][0x0][_0x27fe5a(0x164)]['length']!=0x0){const _0x2d0f33=config[_0x27fe5a(0x13d)][0x0]['changes'];dbPerformance[_0x27fe5a(0x144)](_0x27fe5a(0x1d0))['find']({'date':config[_0x27fe5a(0x180)]})[_0x27fe5a(0x1e3)]({'coins':_0x2d0f33})[_0x27fe5a(0xa4)]();}}async function recreateCoinResults(){const _0x484472=_0x35f01f;let _0x147d82,_0x5978b6=[];try{const _0x2dfb27=fns['format'](fns['parseISO'](config[_0x484472(0x180)][_0x484472(0x1e1)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4a672c of currentCoins){if(_0x4a672c['coin']!=config[_0x484472(0x219)]){let _0x80864f=0x0,_0x44b142,_0x49afc5;_0x147d82=await getAllEventOrders(_0x4a672c['symbol']);if(_0x147d82[_0x484472(0xa2)]>0x0)_0x147d82[_0x484472(0x20e)](_0x26a1b2=>{const _0x380a41=_0x484472,_0x3ac28a=_0x4a672c[_0x380a41(0x113)][_0x380a41(0xe7)](config[_0x380a41(0x219)]+'/');_0x5978b6[_0x380a41(0x1ee)]({'datetime':_0x26a1b2[_0x380a41(0x124)],'coin':_0x4a672c[_0x380a41(0x1f5)],'symbol':_0x4a672c[_0x380a41(0x113)],'side':_0x26a1b2[_0x380a41(0x1a1)],'reverse':_0x3ac28a,'amount':formatResult(_0x26a1b2[_0x380a41(0x1db)],0x8),'filled':formatResult(_0x26a1b2['filled'],0x8),'price':formatResult(_0x26a1b2[_0x380a41(0x18a)],0x8)}),_0x80864f=_0x26a1b2[_0x380a41(0x1a1)]==_0x380a41(0xfd)?_0x80864f+_0x26a1b2[_0x380a41(0x1db)]:_0x80864f-_0x26a1b2[_0x380a41(0x1db)];if(!_0x49afc5)_0x49afc5=_0x26a1b2[_0x380a41(0x18a)];});_0x44b142=_0x4a672c[_0x484472(0x1f0)]-_0x80864f;let _0x2c912b;config[_0x484472(0x13d)]['forEach'](_0x390329=>{const _0x1d5498=_0x484472;!_0x2c912b&&(_0x2c912b=_0x390329[_0x1d5498(0x164)][_0x1d5498(0x177)](_0x5a8d26=>_0x5a8d26[_0x1d5498(0x1f5)]==_0x4a672c[_0x1d5498(0x1f5)]),_0x2c912b&&(_0x44b142=_0x2c912b['number'],_0x49afc5=_0x2c912b[_0x1d5498(0x18a)]));});let _0x4e049b=dbCoinResults[_0x484472(0x144)]('coins')['find']({'coin':_0x4a672c[_0x484472(0x1f5)]})[_0x484472(0x1b9)]();_0x4e049b={'coin':_0x4a672c[_0x484472(0x1f5)],'number':_0x44b142,'breakeven':_0x49afc5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x484472(0x20d))[_0x484472(0x177)]({'coin':_0x4a672c[_0x484472(0x1f5)]})[_0x484472(0x1e3)](_0x4e049b)[_0x484472(0xa4)]();}}_0x5978b6[_0x484472(0x12a)]((_0x4b7331,_0xc510e1)=>_0x4b7331[_0x484472(0x124)]>_0xc510e1[_0x484472(0x124)]?0x1:_0xc510e1['datetime']>_0x4b7331[_0x484472(0x124)]?-0x1:0x0);let _0x5b0c12=0x0;for(let _0x30043b of _0x5978b6){await updateCoinResults(_0x30043b,!![]);}}catch(_0x15a719){await handleError(_0x15a719,_0x484472(0xc1));}}async function getAllEventOrders(_0x3ed31c){const _0x5b56ce=_0x35f01f;let _0x1c6064=[],_0x9ef4ca=dbLogs[_0x5b56ce(0x144)](_0x5b56ce(0x1b7))[_0x5b56ce(0x21d)](_0x5ed3e0=>{const _0xd676c7=_0x5b56ce,_0x2fb3da=_0x5ed3e0[_0xd676c7(0x21f)][_0xd676c7(0x102)]();return _0x2fb3da[_0xd676c7(0xe7)](_0x3ed31c[_0xd676c7(0x102)]())&&(_0x2fb3da['includes'](_0xd676c7(0x154))&&_0x2fb3da['includes'](_0xd676c7(0xb2))||_0x2fb3da[_0xd676c7(0xe7)](_0xd676c7(0x1db))&&_0x2fb3da[_0xd676c7(0xe7)]('order'));})[_0x5b56ce(0x1ba)](_0x5b56ce(0x1ab))[_0x5b56ce(0x1b9)]();return _0x9ef4ca[_0x5b56ce(0x20e)](_0x3a3cb8=>{const _0xa4a0d6=_0x5b56ce,_0x1fbaf3=_0x3a3cb8[_0xa4a0d6(0x21f)][_0xa4a0d6(0xe7)](_0xa4a0d6(0x111))?_0xa4a0d6(0x111):_0xa4a0d6(0xfd),_0x2d280b=/#([0-9]|\.)+\s/i,_0x525032=Number(_0x2d280b['exec'](_0x3a3cb8[_0xa4a0d6(0x21f)])[0x0]['slice'](0x1)),_0x2bd73e=/@([0-9]|\.)+$/i,_0x380d28=Number(_0x2bd73e['exec'](_0x3a3cb8[_0xa4a0d6(0x21f)])[0x0][_0xa4a0d6(0x101)](0x1));_0x1c6064['push']({'datetime':_0x3a3cb8[_0xa4a0d6(0x1ab)],'coin':symbolToCoin(_0x3ed31c),'symbol':_0x3ed31c,'side':_0x1fbaf3,'amount':_0x525032,'filled':_0x525032,'price':_0x380d28});}),_0x1c6064;}async function getAllOrders(_0x4f1b7c,_0xe3886b){const _0x559750=_0x35f01f;let _0x50ebbd=[];while(_0xe3886b<exchange['milliseconds']()){const _0x4acb20=0x1f4,_0x1dc9e6=await exchange[_0x559750(0x1cc)](_0x4f1b7c,_0xe3886b,_0x4acb20);if(_0x1dc9e6['length'])_0xe3886b=_0x1dc9e6[_0x1dc9e6[_0x559750(0xa2)]-0x1][_0x559750(0x122)]+0x1,_0x50ebbd=_0x50ebbd['concat'](_0x1dc9e6);else break;}return _0x50ebbd;}async function validate24hChanges(){const _0x2f3393=_0x35f01f;for(const _0x1a1ad8 of currentCoins){if(_0x1a1ad8[_0x2f3393(0x1f5)]!=config['basecoin']){let _0x3f4bf6;_0x1a1ad8[_0x2f3393(0x1a5)]?_0x3f4bf6=formatResult((0x1/(global[_0x2f3393(0x12d)][noslash(_0x1a1ad8[_0x2f3393(0x113)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3f4bf6=global['change'][noslash(_0x1a1ad8[_0x2f3393(0x113)])],_0x3f4bf6<config[_0x2f3393(0x216)]&&(logHistory(_0x2f3393(0x110),_0x1a1ad8[_0x2f3393(0x1f5)]+_0x2f3393(0xf0)+_0x3f4bf6+'%'),logHistory(_0x2f3393(0x110),_0x2f3393(0x186)),logHistory(_0x2f3393(0x110),_0x2f3393(0x131)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x60b6a,_0x63a4bc){const _0xc33f89=_0x35f01f;if(!_0x60b6a)return!![];const _0x18ca7c=_0x63a4bc[_0xc33f89(0x197)]('.'),_0x3b8a85=_0x60b6a['split']('.');for(var _0xfc1923=0x0;_0xfc1923<_0x3b8a85[_0xc33f89(0xa2)];_0xfc1923++){const _0x4fe181=~~_0x3b8a85[_0xfc1923],_0x4e6a7e=~~_0x18ca7c[_0xfc1923];if(_0x4fe181<_0x4e6a7e)return!![];if(_0x4fe181>_0x4e6a7e)return![];}return![];}async function oneTimeMigration(){const _0x33e135=_0x35f01f;let _0x14bf32=dbLogs[_0x33e135(0x144)](_0x33e135(0xc7))[_0x33e135(0x1b9)]();if(isOlderVersion(_0x14bf32,'2.3.5')){let _0xc5e8f8=[];const _0x946c88=dbLogs['get'](_0x33e135(0x1b7))[_0x33e135(0x1b9)]();_0x946c88[_0x33e135(0x20e)](_0x42a19c=>{const _0x4b482c=_0x33e135;_0xc5e8f8['push']({'time':_0x42a19c[_0x4b482c(0x1ab)],'type':_0x42a19c[_0x4b482c(0xcf)],'event':_0x42a19c[_0x4b482c(0x21f)]});}),dbLogs[_0x33e135(0x144)](_0x33e135(0x1b7))[_0x33e135(0x1e3)](_0xc5e8f8)[_0x33e135(0xa4)]();}let _0x368cee=dbConfig[_0x33e135(0x144)](_0x33e135(0xc7))[_0x33e135(0x1b9)]();if(isOlderVersion(_0x368cee,_0x33e135(0xa5))){let _0x511cd5=dbConfig['get'](_0x33e135(0x13a))['find']({'botID':botID})[_0x33e135(0x1b9)]();if(_0x511cd5){let _0x312bc6=[];_0x511cd5['portfolio'][_0x33e135(0x20e)](_0x2dda9e=>{const _0x5256f8=_0x33e135;_0x312bc6[_0x5256f8(0x1ee)]({'coin':_0x2dda9e[_0x5256f8(0x1f5)],'number':_0x2dda9e['startnumber'],'price':_0x2dda9e[_0x5256f8(0xb3)]}),delete _0x2dda9e[_0x5256f8(0x1f8)],delete _0x2dda9e[_0x5256f8(0xb3)];});if(_0x312bc6[_0x33e135(0xa2)]!==0x0)fs[_0x33e135(0x150)](configbackuppath+('starting-balance-'+botID+_0x33e135(0x1ad)),JSON['stringify'](_0x312bc6,null,0x4),function(_0x12ca04){if(_0x12ca04){}});const _0xe592f0=(_0x5d18a8,_0x11addb)=>{const _0x56ed57=_0x33e135;let _0x5324b7=[];_0x11addb[_0x56ed57(0x20e)](_0x1f6a0f=>{const _0x19d895=_0x56ed57,_0x159e6d=_0x5d18a8['find'](_0x29b312=>_0x29b312['coin']==_0x1f6a0f['coin']);if(!_0x159e6d)_0x5324b7[_0x19d895(0x1ee)](_0x1f6a0f);});let _0xde8af0=[];return _0x5d18a8[_0x56ed57(0x20e)](_0x185a7b=>{const _0x19dd73=_0x56ed57,_0x19bcec=_0x11addb['find'](_0x16d664=>_0x16d664[_0x19dd73(0x1f5)]==_0x185a7b[_0x19dd73(0x1f5)]);if(!_0x19bcec||_0x19bcec['number']==0x0&&_0x185a7b[_0x19dd73(0x1f0)]!=0x0)_0xde8af0['push'](_0x185a7b);}),{'missingDay1':_0x5324b7,'notInDay2':_0xde8af0};},_0x2231cb=dbPerformance[_0x33e135(0x144)](_0x33e135(0x1d0))['cloneDeep']()['value']();if(_0x2231cb[_0x33e135(0xa2)]>0x1){const {missingDay1:_0x2d06f9,notInDay2:_0x4689f8}=_0xe592f0(_0x312bc6,_0x2231cb[0x1][_0x33e135(0x20d)]);_0x312bc6=[..._0x312bc6,..._0x2d06f9],_0x4689f8[_0x33e135(0x20e)](_0x48115b=>{const _0x2eec35=_0x33e135;let _0x5f4751=_0x312bc6['findIndex'](_0x12712e=>_0x12712e[_0x2eec35(0x1f5)]==_0x48115b[_0x2eec35(0x1f5)]);_0x5f4751!=-0x1&&_0x312bc6['splice'](_0x5f4751,0x1);});}_0x312bc6[_0x33e135(0x12a)]((_0x293920,_0x22e410)=>_0x293920[_0x33e135(0x1f5)]>_0x22e410[_0x33e135(0x1f5)]?0x1:_0x22e410['coin']>_0x293920[_0x33e135(0x1f5)]?-0x1:0x0);let _0x2fc2ed=[{'date':_0x511cd5[_0x33e135(0x180)],'changes':_0x312bc6}];_0x2231cb[_0x33e135(0xa2)]>0x2&&_0x2231cb[_0x33e135(0x20e)]((_0x39bb65,_0x2ccdd9)=>{const _0x154efd=_0x33e135;if(_0x2ccdd9>0x0&&_0x2ccdd9<_0x2231cb[_0x154efd(0xa2)]-0x1){const {missingDay1:_0x4a9be6,notInDay2:_0x5c7e7a}=_0xe592f0(_0x2231cb[_0x2ccdd9]['coins'],_0x2231cb[_0x2ccdd9+0x1][_0x154efd(0x20d)]);_0x312bc6=[],(_0x4a9be6[_0x154efd(0xa2)]!=0x0||_0x5c7e7a[_0x154efd(0xa2)]!=0x0)&&(_0x4a9be6[_0x154efd(0xa2)]!=0x0&&_0x312bc6[_0x154efd(0x1ee)](..._0x4a9be6),_0x5c7e7a['length']!=0x0&&(_0x5c7e7a[_0x154efd(0x20e)](_0x19b7ab=>{const _0x2fbfac=_0x154efd;_0x19b7ab[_0x2fbfac(0x1f0)]=-_0x19b7ab[_0x2fbfac(0x1f0)];}),_0x312bc6[_0x154efd(0x1ee)](..._0x5c7e7a)),_0x312bc6[_0x154efd(0x12a)]((_0xb180d4,_0x2b885a)=>_0xb180d4[_0x154efd(0x1f5)]>_0x2b885a[_0x154efd(0x1f5)]?0x1:_0x2b885a['coin']>_0xb180d4[_0x154efd(0x1f5)]?-0x1:0x0),_0x2fc2ed[_0x154efd(0x1ee)]({'date':_0x2231cb[_0x2ccdd9+0x1][_0x154efd(0x205)],'changes':_0x312bc6}));}}),dbConfig[_0x33e135(0x144)](_0x33e135(0x13a))['find']({'botID':botID})[_0x33e135(0x1e3)]({..._0x511cd5,'liquidity':_0x2fc2ed})[_0x33e135(0xa4)]();}}if(isOlderVersion(_0x368cee,'2.6.0')){let _0x10f1ea=dbConfig[_0x33e135(0x144)]('bot')['find']({'botID':botID})[_0x33e135(0x1b9)]();if(_0x10f1ea){const _0x431b1=_0x10f1ea[_0x33e135(0x1b5)],_0x84227=_0x431b1?capitalize(_0x431b1):_0x33e135(0xd3);dbConfig[_0x33e135(0x144)](_0x33e135(0x13a))[_0x33e135(0x177)]({'botID':botID})['assign']({'exchange':_0x84227})['write']();}}let _0x262970=dbPerformance['get'](_0x33e135(0xc7))[_0x33e135(0x1b9)]();isOlderVersion(_0x262970,_0x33e135(0xa5))&&setStartDatePerformance();let _0x243282=dbCoinResults[_0x33e135(0x144)](_0x33e135(0xc7))[_0x33e135(0x1b9)]();if(isOlderVersion(_0x243282,_0x33e135(0x1fd))){let _0x591f4a=dbCoinResults[_0x33e135(0x144)](_0x33e135(0x20d))[_0x33e135(0x1b9)]();if(_0x591f4a['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x519bcc=_0x35f01f;dbConfig[_0x519bcc(0x159)](_0x519bcc(0xc7),serverversion)[_0x519bcc(0xa4)](),dbPerformance[_0x519bcc(0x159)]('version',serverversion)['write'](),dbLogs[_0x519bcc(0x159)]('version',serverversion)[_0x519bcc(0xa4)](),dbCoinResults[_0x519bcc(0x159)](_0x519bcc(0xc7),serverversion)[_0x519bcc(0xa4)]();}function getConfiguration(_0x35436d){const _0x491e2b=_0x35f01f;let _0x20a87a=dbConfig['get'](_0x491e2b(0x13a))[_0x491e2b(0x177)]({'botID':_0x35436d})[_0x491e2b(0x1b9)]();if(_0x20a87a){let _0x473c8e=![];typeof _0x20a87a['threshold']==_0x491e2b(0xbc)&&(_0x20a87a={..._0x20a87a,'threshold':Number(_0x20a87a[_0x491e2b(0x175)])},_0x473c8e=!![]),_0x20a87a[_0x491e2b(0x216)]==null&&(_0x20a87a={..._0x20a87a,'change24h':-0x14},_0x473c8e=!![]),!_0x20a87a[_0x491e2b(0x18d)]&&(_0x20a87a={..._0x20a87a,'fiat':_0x491e2b(0x19a)},_0x473c8e=!![]),!_0x20a87a[_0x491e2b(0x1ed)]&&(_0x20a87a={..._0x20a87a,'onepagemode':settings['onepagemode']},_0x473c8e=!![]),!_0x20a87a[_0x491e2b(0x125)]&&(_0x20a87a={..._0x20a87a,'colorscheme':_0x491e2b(0x210)},_0x473c8e=!![]),!_0x20a87a[_0x491e2b(0x16b)]&&(_0x20a87a={..._0x20a87a,'autoliquidity':!![]},_0x473c8e=!![]),_0x473c8e&&(_0x20a87a={'botID':_0x20a87a[_0x491e2b(0xf5)],'exchange':_0x20a87a[_0x491e2b(0x1b5)],'apiKey':_0x20a87a[_0x491e2b(0x123)],'apiSecret':_0x20a87a[_0x491e2b(0xca)],'apiPassword':_0x20a87a[_0x491e2b(0xfa)],'basecoin':_0x20a87a[_0x491e2b(0x219)],'botname':_0x20a87a['botname'],'showname':_0x20a87a[_0x491e2b(0x1d7)],'threshold':_0x20a87a[_0x491e2b(0x175)],'ordertype':_0x20a87a[_0x491e2b(0x187)],'timeout':_0x20a87a['timeout'],'fiat':_0x20a87a[_0x491e2b(0x18d)],'startdate':_0x20a87a['startdate'],'recreate':_0x20a87a[_0x491e2b(0xed)],'timeshift':_0x20a87a[_0x491e2b(0x12f)],'onepagemode':_0x20a87a[_0x491e2b(0x1ed)],'headless':_0x20a87a[_0x491e2b(0xc8)],'cooldown':_0x20a87a[_0x491e2b(0x1d2)],'change24h':_0x20a87a[_0x491e2b(0x216)],'emojibuy':_0x20a87a[_0x491e2b(0xad)],'emojisell':_0x20a87a[_0x491e2b(0x107)],'colorscheme':_0x20a87a[_0x491e2b(0x125)],'portfolio':_0x20a87a[_0x491e2b(0xc6)],'autoliquidity':_0x20a87a['autoliquidity'],'liquidity':_0x20a87a[_0x491e2b(0x13d)],'openOrders':_0x20a87a[_0x491e2b(0x15d)]},dbConfig[_0x491e2b(0x144)]('bot')[_0x491e2b(0x183)]()[_0x491e2b(0xa4)](),dbConfig[_0x491e2b(0x144)](_0x491e2b(0x13a))['push'](_0x20a87a)[_0x491e2b(0xa4)]());}else _0x20a87a={'botID':_0x35436d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x491e2b(0x199)+_0x35436d,'showname':![],'threshold':0x3,'ordertype':_0x491e2b(0x154),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x20a87a;}function emittedConfiguration(){const _0x5044d7=_0x35f01f;let _0x25d7b7;if(config['apiKey']=='')_0x25d7b7={...config,'configstate':'initial'};else config['apiKey']==_0x5044d7(0x104)?_0x25d7b7={...config,'configstate':_0x5044d7(0x1fe)}:(_0x25d7b7={...config,'apiKey':_0x5044d7(0x130),'apiSecret':_0x5044d7(0x130)},config['apiPassword']&&(_0x25d7b7[_0x5044d7(0xfa)]='************'));return _0x25d7b7;}function getSettings(){return dbSettings['get']('settings')['value']();}function getSecure(){const _0x3d18aa=_0x35f01f;return dbSecure[_0x3d18aa(0x144)](_0x3d18aa(0x1de))[_0x3d18aa(0x1b9)]()||{};}function updateTimeshift(_0xfe6163){const _0x25e2d5=_0x35f01f;let _0x541421=dbConfig[_0x25e2d5(0x144)](_0x25e2d5(0x13a))[_0x25e2d5(0x177)]({'botID':botID})[_0x25e2d5(0x1b9)]();_0x541421&&dbConfig[_0x25e2d5(0x144)](_0x25e2d5(0x13a))[_0x25e2d5(0x177)]({'botID':botID})['assign']({'timeshift':_0xfe6163})['write'](),config[_0x25e2d5(0x12f)]=_0xfe6163,proxyEmit(_0x25e2d5(0x196),emittedConfiguration());}function updateOnepagemode(_0x43b176){const _0x31bbc5=_0x35f01f;let _0x6778c=dbConfig[_0x31bbc5(0x144)](_0x31bbc5(0x13a))[_0x31bbc5(0x177)]({'botID':botID})[_0x31bbc5(0x1b9)]();_0x6778c&&dbConfig[_0x31bbc5(0x144)](_0x31bbc5(0x13a))['find']({'botID':botID})[_0x31bbc5(0x1e3)]({'onepagemode':_0x43b176})[_0x31bbc5(0xa4)](),config['onepagemode']=_0x43b176,proxyEmit(_0x31bbc5(0x196),emittedConfiguration());}async function storeConfiguration(_0x526145){const _0x23d0bc=_0x35f01f;logger[_0x23d0bc(0xef)](_0x23d0bc(0x13b));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x23d0bc(0xef)](_0x23d0bc(0x184));let _0x28141e=[],_0x5723ee=![],_0x35c4d6=![],_0xee4b05=[];_0x526145[_0x23d0bc(0xc6)]['forEach'](_0x55f299=>{const _0x58e0a5=_0x23d0bc;if(!_0x55f299[_0x58e0a5(0x212)]&&_0x55f299[_0x58e0a5(0x1f5)]!=_0x526145[_0x58e0a5(0x219)])_0xee4b05[_0x58e0a5(0x1ee)](_0x55f299[_0x58e0a5(0x113)]);}),_0xee4b05[_0x23d0bc(0x20e)](_0x46a3e1=>{const _0x450ce9=_0x23d0bc,_0x8646cf=watchedSymbols[_0x450ce9(0xe7)](_0x46a3e1);!_0x8646cf&&_0x28141e[_0x450ce9(0x1ee)](_0x46a3e1);}),_0xee4b05[_0x23d0bc(0x20e)](_0x3ee894=>{const _0x5b368b=_0x23d0bc,_0x1cde63=currentCoins[_0x5b368b(0x177)](_0x1949f4=>_0x1949f4[_0x5b368b(0x113)]==_0x3ee894);!_0x1cde63&&(_0x5723ee=!![]);}),currentCoins[_0x23d0bc(0x20e)](_0x2430c5=>{const _0x4e18c7=_0x23d0bc;if(_0x2430c5[_0x4e18c7(0x1f5)]!=config['basecoin']){const _0x1b9985=_0xee4b05[_0x4e18c7(0x177)](_0x57bdc5=>_0x57bdc5==_0x2430c5[_0x4e18c7(0x113)]);!_0x1b9985&&(_0x5723ee=!![]);}}),_0x526145['portfolio'][_0x23d0bc(0x20e)](_0x1125c6=>{const _0x348f77=_0x23d0bc,_0x5a4331=config['portfolio'][_0x348f77(0x177)](_0x4060c6=>_0x4060c6[_0x348f77(0x1f5)]==_0x1125c6[_0x348f77(0x1f5)]);if(_0x5a4331&&_0x1125c6['offset']!=_0x5a4331[_0x348f77(0x14d)])_0x35c4d6=!![];});let _0x414ba1=dbConfig[_0x23d0bc(0x144)]('bot')[_0x23d0bc(0x177)]({'botID':botID})[_0x23d0bc(0x1b9)]();_0x526145={..._0x526145,'apiKey':crypt[_0x23d0bc(0x1c5)](secure[_0x23d0bc(0x1fb)],_0x526145[_0x23d0bc(0x123)])[_0x23d0bc(0x157)],'apiSecret':crypt[_0x23d0bc(0x1c5)](secure[_0x23d0bc(0x1fb)],_0x526145[_0x23d0bc(0xca)])['message']};_0x526145[_0x23d0bc(0xfa)]&&(_0x526145['apiPassword']=crypt[_0x23d0bc(0x1c5)](secure[_0x23d0bc(0x1fb)],_0x526145[_0x23d0bc(0xfa)])[_0x23d0bc(0x157)]);let _0x5d5fb4=![];if(_0x414ba1){_0x526145[_0x23d0bc(0x123)]==_0x23d0bc(0x130)?_0x526145[_0x23d0bc(0x123)]=config[_0x23d0bc(0x123)]:_0x5d5fb4=!![];_0x526145[_0x23d0bc(0xca)]==_0x23d0bc(0x130)?_0x526145['apiSecret']=config[_0x23d0bc(0xca)]:_0x5d5fb4=!![];if(_0x526145[_0x23d0bc(0xfa)]=='************')_0x526145[_0x23d0bc(0xfa)]=config['apiPassword'];else{if(_0x526145[_0x23d0bc(0xfa)])_0x5d5fb4=!![];}dbConfig['get'](_0x23d0bc(0x13a))[_0x23d0bc(0x177)]({'botID':botID})[_0x23d0bc(0x1e3)](_0x526145)[_0x23d0bc(0xa4)]();}else dbConfig[_0x23d0bc(0x144)](_0x23d0bc(0x13a))['push'](_0x526145)[_0x23d0bc(0xa4)](),_0x5d5fb4=!![],process[_0x23d0bc(0x198)]({'status':_0x23d0bc(0xd0),'live':_0x23d0bc(0x1c2)},_0x42a9ee=>{});process[_0x23d0bc(0x198)]({'botname':_0x526145[_0x23d0bc(0x18f)]},_0x15f1e8=>{}),updateBotManager(),config={..._0x526145},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5d5fb4)await reset(_0x28141e,!![]);else _0x5723ee||_0x35c4d6?await reset(_0x28141e,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x23d0bc(0x141));}async function storeHeadless(_0x5ceb30){const _0x47a46c=_0x35f01f,_0x339715={...config,'headless':_0x5ceb30[_0x47a46c(0xc8)]};let _0x4151b7=dbConfig['get'](_0x47a46c(0x13a))[_0x47a46c(0x177)]({'botID':botID})['value']();_0x4151b7&&dbConfig[_0x47a46c(0x144)](_0x47a46c(0x13a))[_0x47a46c(0x177)]({'botID':botID})[_0x47a46c(0x1e3)](_0x339715)[_0x47a46c(0xa4)](),config={..._0x339715},updateBotManager(),proxyEmit(_0x47a46c(0x196),emittedConfiguration());}async function storeFiat(_0x23a209){const _0x5d9099=_0x35f01f,_0x158209={...config,'fiat':_0x23a209};let _0x56e2c0=dbConfig['get']('bot')[_0x5d9099(0x177)]({'botID':botID})[_0x5d9099(0x1b9)]();_0x56e2c0&&dbConfig[_0x5d9099(0x144)](_0x5d9099(0x13a))['find']({'botID':botID})[_0x5d9099(0x1e3)](_0x158209)[_0x5d9099(0xa4)](),config={..._0x158209},proxyEmit(_0x5d9099(0x196),emittedConfiguration());}function resetHistory(){const _0x423cbf=_0x35f01f;logger[_0x423cbf(0xd1)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x423cbf(0x1d6)](configpath,'bot-'+botID+_0x423cbf(0x1ac))))fs['unlinkSync'](path[_0x423cbf(0x1d6)](configpath,_0x423cbf(0x117)+botID+_0x423cbf(0x1ac)));if(fs[_0x423cbf(0x1af)](path['join'](configpath,_0x423cbf(0x117)+botID+_0x423cbf(0xf2))))fs['unlinkSync'](path[_0x423cbf(0x1d6)](configpath,_0x423cbf(0x117)+botID+_0x423cbf(0xf2)));if(fs[_0x423cbf(0x1af)](path[_0x423cbf(0x1d6)](configpath,_0x423cbf(0x117)+botID+_0x423cbf(0x16a))))fs[_0x423cbf(0x17f)](path[_0x423cbf(0x1d6)](configpath,_0x423cbf(0x117)+botID+_0x423cbf(0x16a)));}catch(_0x24f2ed){if(_0x24f2ed)logger[_0x423cbf(0xd1)](_0x423cbf(0x160),_0x24f2ed);}const _0x430665=getDate();let _0x1a1eb8=[];currentCoins[_0x423cbf(0x20e)](_0x2f1c9a=>{const _0x26061b=_0x423cbf;_0x1a1eb8['push']({'coin':_0x2f1c9a[_0x26061b(0x1f5)],'number':_0x2f1c9a['number'],'price':_0x2f1c9a[_0x26061b(0x1a0)]});});let _0x42e6cb=dbConfig[_0x423cbf(0x144)](_0x423cbf(0x13a))[_0x423cbf(0x177)]({'botID':botID})[_0x423cbf(0x1b9)]();_0x42e6cb&&(dbConfig[_0x423cbf(0x144)](_0x423cbf(0x13a))[_0x423cbf(0x177)]({'botID':botID})[_0x423cbf(0x1e3)]({'liquidity':[{'date':_0x430665,'changes':_0x1a1eb8}]})[_0x423cbf(0xa4)](),config['liquidity']=[]),process[_0x423cbf(0x198)]({'stop':_0x423cbf(0xdc)},_0x2f5a16=>{});}function noslash(_0x55c38f){const _0x413d4a=_0x35f01f;return _0x55c38f[_0x413d4a(0x1e1)]('/','');}function updateHighestFee(_0x193355){const _0x3fa4c7=_0x35f01f;console['log']('1',_0x193355);if(_0x193355[_0x3fa4c7(0x1a5)]){let _0x40f458={'filled':_0x193355[_0x3fa4c7(0x1db)]*_0x193355[_0x3fa4c7(0x18a)],'amount':_0x193355[_0x3fa4c7(0x1db)]*_0x193355[_0x3fa4c7(0x18a)],'side':_0x193355['side']==_0x3fa4c7(0x111)?_0x3fa4c7(0xfd):_0x3fa4c7(0x111),'price':0x1/_0x193355['price']};_0x193355={..._0x193355,..._0x40f458};}console[_0x3fa4c7(0xea)]('2',_0x193355);const _0x4aabe=defaultFee*_0x193355['filled']*_0x193355[_0x3fa4c7(0x18a)];console[_0x3fa4c7(0xea)](_0x4aabe),lastFees[_0x3fa4c7(0x1aa)][_0x3fa4c7(0xa2)]===0x14&&lastFees[_0x3fa4c7(0x1aa)][_0x3fa4c7(0x1b1)](),lastFees['recent20'][_0x3fa4c7(0x1ee)](_0x4aabe),lastFees[_0x3fa4c7(0x100)]=Math[_0x3fa4c7(0x1b2)](...lastFees[_0x3fa4c7(0x1aa)]);}async function updateNumberCoinsCcxt(_0x36dae2){const _0x20f51f=_0x35f01f;logger[_0x20f51f(0xef)](_0x20f51f(0x1e5)+_0x36dae2[_0x20f51f(0x113)]+_0x20f51f(0x138)+_0x36dae2[_0x20f51f(0x221)]+'\x20|\x20'+_0x36dae2['id']);let _0x18d1fa=_0x36dae2['status'],_0x5d7d54=![];currentCoins[_0x20f51f(0x20e)](_0x1b9e33=>{const _0x53a7d5=_0x20f51f;_0x1b9e33[_0x53a7d5(0x113)]==_0x36dae2[_0x53a7d5(0x113)]&&(_0x5d7d54=!![]);});if(!_0x5d7d54)return;const _0x38e904=currentCoins[_0x20f51f(0x177)](_0x2dd8ec=>_0x2dd8ec[_0x20f51f(0x113)]==_0x36dae2[_0x20f51f(0x113)]),_0x3c07ac=_0x194b43=>{const _0x5b54ab=_0x20f51f;if(_0x38e904)_0x38e904[_0x5b54ab(0x11d)]=_0x194b43;};if(_0x18d1fa==_0x20f51f(0x190))_0x3c07ac(_0x20f51f(0x190));else{if(_0x18d1fa=='canceled'){_0x3c07ac('canceled');const _0x375e08=await getCoins();[currentCoins,currentCoinsAll]=_0x375e08,await getOpenOrders(),handleOpenOrders();}else{if(_0x18d1fa==_0x20f51f(0x1e4)){logger[_0x20f51f(0xef)]('1\x20-\x20FILLED:\x20'+_0x36dae2[_0x20f51f(0x113)]+_0x20f51f(0x138)+_0x36dae2[_0x20f51f(0x1db)]+_0x20f51f(0x138)+_0x36dae2['id']);let _0x2fc6e4=![];if(lastOrders)for(const _0x22c7cc of lastOrders){const _0x4c8dc2=0xc8,_0xed90a2=0x1388;let _0x16788c=0x0;while(!_0x22c7cc[_0x20f51f(0xd8)]&&_0x16788c*_0x4c8dc2<_0xed90a2){_0x16788c++,await sleep(_0x4c8dc2);}if(_0x16788c>0x0)logger[_0x20f51f(0xef)]('Waited\x20'+_0x16788c*_0x4c8dc2/0x3e8+_0x20f51f(0x1c7));if(_0x22c7cc[_0x20f51f(0xd8)]==_0x36dae2['id']){logger['debug'](_0x20f51f(0x195)+_0x36dae2['id']),_0x2fc6e4=!![];if(_0x22c7cc['filled']==0x0){logger[_0x20f51f(0xef)](_0x20f51f(0x16d)+_0x36dae2['id']);if(_0x36dae2[_0x20f51f(0x11b)])_0x22c7cc['price']=_0x36dae2[_0x20f51f(0x11b)];else{if(_0x36dae2[_0x20f51f(0x18a)])_0x22c7cc[_0x20f51f(0x18a)]=_0x36dae2[_0x20f51f(0x18a)];else{}}_0x22c7cc[_0x20f51f(0x1db)]=_0x36dae2[_0x20f51f(0x1db)],updateHighestFee(_0x22c7cc),_0x3c07ac('filled'),await validateOrders();if(lockOrders==ORDERS[_0x20f51f(0x15a)]){const _0xba57c8=await getCoins();[currentCoins,currentCoinsAll]=_0xba57c8;}_0x22c7cc[_0x20f51f(0x1bc)]={'currency':_0x36dae2[_0x20f51f(0x1bc)]?_0x36dae2['fee']['currency']:null,'cost':_0x36dae2[_0x20f51f(0x1bc)]?_0x36dae2['fee'][_0x20f51f(0xcc)]:0x0},await updateCoinResults(_0x22c7cc);}}}if(!_0x2fc6e4){logger[_0x20f51f(0xef)](_0x20f51f(0x1c8)+_0x36dae2['id']),_0x3c07ac(_0x20f51f(0x1db));const _0x34c01b=await getCoins();[currentCoins,currentCoinsAll]=_0x34c01b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x16f326=JSON[_0x20f51f(0x10a)](lastBalances[_0x20f51f(0xc6)]);const _0xe7c2a9=_0x16f326[_0x20f51f(0x177)](_0x2549b5=>_0x2549b5['symbol']==_0x36dae2[_0x20f51f(0x113)]);if(_0xe7c2a9){if(_0x18d1fa==_0x20f51f(0x190))_0xe7c2a9['orderstatus']=_0xe7c2a9['orderstatus']=='filled'?_0x20f51f(0x1db):_0x20f51f(0x190);else{if(_0x18d1fa=='canceled')_0xe7c2a9[_0x20f51f(0x11d)]=_0xe7c2a9[_0x20f51f(0x11d)]=='filled'?_0x20f51f(0x1db):_0x20f51f(0xb7);else _0x18d1fa==_0x20f51f(0x1e4)&&(_0xe7c2a9[_0x20f51f(0x11d)]=_0x20f51f(0x1db));}}lastBalances={...lastBalances,'portfolio':JSON[_0x20f51f(0x137)](_0x16f326)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x36f3e1=_0x35f01f;await getOpenOrders();let _0x564cbf=![];currentCoins[_0x36f3e1(0x20e)](_0x233981=>{const _0x487f40=_0x36f3e1;_0x564cbf=allOpenOrders[_0x487f40(0x177)](_0x421b8c=>_0x421b8c[_0x487f40(0x113)]==_0x233981[_0x487f40(0x113)]),_0x233981['orderstatus']=_0x564cbf?_0x487f40(0x190):_0x487f40(0x1ea);});}async function getCoins(_0x5af256=!![],_0x2a6897=config[_0x35f01f(0x219)]){const _0x2f85b1=_0x35f01f;let _0x53668f,_0x498327=[],_0x4dd90e=[],_0x138f7d=[],_0x2ec4b5=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x53668f=await exchange[_0x2f85b1(0x120)](),mybalances=_0x53668f[_0x2f85b1(0x17a)];for(const [_0x42ea11,_0x4dffe5]of Object['entries'](mybalances)){_0x2ec4b5[_0x2f85b1(0x1ee)](_0x42ea11);}if(_0x2a6897=='')for(const [_0x53d354,_0x45f8e7]of Object[_0x2f85b1(0x19c)](mybalances)){_0x45f8e7!=0x0&&_0x4dd90e[_0x2f85b1(0x1ee)]({'coin':_0x53d354});}else{let _0x33b97e=![];for(const [_0x527613,_0x19604c]of Object[_0x2f85b1(0x19c)](mybalances)){if(_0x2ec4b5['includes'](_0x527613)){const _0x1b35d1=config[_0x2f85b1(0xc6)][_0x2f85b1(0x177)](_0x2b0fed=>_0x2b0fed[_0x2f85b1(0x1f5)]==_0x527613),_0x4618e7=_0x527613+'/'+_0x2a6897,_0x46daa8=_0x2a6897+'/'+_0x527613,_0x2f3a30=currentCoins[_0x2f85b1(0x177)](_0x47b297=>_0x47b297[_0x2f85b1(0x1f5)]==_0x527613);_0x33b97e=![];if((_0x19604c!=0x0||_0x1b35d1)&&(allSymbols[_0x2f85b1(0xe7)](_0x4618e7)||_0x527613==_0x2a6897))_0x527613!=_0x2a6897&&_0x498327[_0x2f85b1(0x1ee)](_0x4618e7),_0x4dd90e['push']({'coin':_0x527613,'symbol':_0x4618e7,'reverse':![],'number':Math[_0x2f85b1(0x1b2)](_0x19604c+(_0x1b35d1&&_0x1b35d1['offset']||0x0),0x0),'orderstatus':_0x2f3a30?_0x2f3a30[_0x2f85b1(0x11d)]:'none'});else(_0x19604c!=0x0||_0x1b35d1)&&allSymbols['includes'](_0x46daa8)&&(_0x527613!=_0x2a6897&&_0x498327['push'](_0x46daa8),_0x4dd90e['push']({'coin':_0x527613,'symbol':_0x46daa8,'reverse':!![],'number':Math['max'](_0x19604c+(_0x1b35d1&&_0x1b35d1[_0x2f85b1(0x14d)]||0x0),0x0),'orderstatus':_0x2f3a30?_0x2f3a30[_0x2f85b1(0x11d)]:_0x2f85b1(0x1ea)}));}}}}catch(_0x3568ce){if(!_0x5af256)handleErrorNoStop(_0x3568ce,'getCoins()');else await handleError(_0x3568ce,_0x2f85b1(0x217));}return _0x138f7d=cloneDeep(_0x4dd90e),_0x4dd90e=_0x4dd90e[_0x2f85b1(0x21d)](_0x7b31a=>{const _0x5809d4=_0x2f85b1,_0xbdc430=config[_0x5809d4(0xc6)][_0x5809d4(0x177)](_0xcaa891=>_0xcaa891['coin']==_0x7b31a[_0x5809d4(0x1f5)]);return _0xbdc430&&!_0xbdc430['excluded'];}),[_0x4dd90e,_0x138f7d];}async function getCoinNumber(_0x4a2b66){const _0x51a84e=_0x35f01f;let _0x269074;try{const _0x293003=await exchange['fetchBalance']();_0x269074=_0x293003[_0x51a84e(0x17a)][_0x4a2b66];}catch(_0x5b62c8){await handleError(_0x5b62c8,_0x51a84e(0xf4));}return _0x269074;}async function getOpenOrders(){const _0x5ab7fb=_0x35f01f;let _0x51d355;allOpenOrders=[];try{for(const _0x4790a2 of config['portfolio']){!_0x4790a2[_0x5ab7fb(0x212)]&&_0x4790a2[_0x5ab7fb(0x1f5)]!=config[_0x5ab7fb(0x219)]&&(_0x51d355=await exchange[_0x5ab7fb(0x188)](_0x4790a2[_0x5ab7fb(0x113)]),_0x51d355[_0x5ab7fb(0xa2)]>0x0&&allOpenOrders[_0x5ab7fb(0x1ee)](_0x51d355[0x0]));}}catch(_0x1f2676){await handleError(_0x1f2676,_0x5ab7fb(0x13c));}}async function handleOpenOrders(_0x269ccb=0x0){const _0x36ee1e=_0x35f01f;allOpenOrders[_0x36ee1e(0xa2)]==0x0&&lockOrders==ORDERS[_0x36ee1e(0x15a)]&&allOrdersPlaced&&(_0x269ccb==0x0?(logger['debug'](_0x36ee1e(0xc4)),_0x269ccb++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x36ee1e(0xef)](_0x36ee1e(0x182)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x3bb2fc){const _0x3dcad9=_0x35f01f,_0x1de02f=ccxt[_0x3bb2fc[_0x3dcad9(0x1b5)]['toLowerCase']()],_0x335896=new _0x1de02f({'apiKey':_0x3bb2fc[_0x3dcad9(0x123)],'secret':_0x3bb2fc[_0x3dcad9(0xca)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3dcad9(0x176)}});if(_0x3bb2fc[_0x3dcad9(0xfa)])_0x335896['password']=_0x3bb2fc[_0x3dcad9(0xfa)];try{await _0x335896['loadMarkets']();}catch(_0x2db692){throw _0x2db692;}}function cloneDeep(_0xa61393){const _0x1f89a2=_0x35f01f;return JSON[_0x1f89a2(0x10a)](JSON[_0x1f89a2(0x137)](_0xa61393));}async function getPortfolio(_0x54d497){const _0x18c10a=_0x35f01f;let _0x4589c8=[],_0x50fe4a=[],_0x34d3bb=[],_0x2c3311;if(_0x54d497[_0x18c10a(0x123)]!==_0x18c10a(0x130)||_0x54d497['apiSecret']!==_0x18c10a(0x130)||_0x54d497[_0x18c10a(0xfa)]&&_0x54d497['apiPassword']!==_0x18c10a(0x130)){if(config[_0x18c10a(0x1b5)]){if(_0x54d497['apiKey']==_0x18c10a(0x130))_0x54d497['apiKey']=config[_0x18c10a(0x123)];if(_0x54d497[_0x18c10a(0xca)]==_0x18c10a(0x130))_0x54d497[_0x18c10a(0xca)]=config[_0x18c10a(0xca)];if(_0x54d497['apiPassword']==_0x18c10a(0x130))_0x54d497[_0x18c10a(0xfa)]=config[_0x18c10a(0xfa)];try{await testAPI(_0x54d497);}catch(_0x3c7f57){if(_0x3c7f57[_0x18c10a(0x16e)]()[_0x18c10a(0xe7)]('AuthenticationError')){logger[_0x18c10a(0xef)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x18c10a(0xc6),![]);return;}else{handleError(_0x3c7f57,_0x18c10a(0xb1));return;}}}await initExchange(_0x54d497['exchange'],_0x54d497[_0x18c10a(0x123)],_0x54d497[_0x18c10a(0xca)],_0x54d497['apiPassword']);try{await loadSymbols(_0x54d497['exchange'],!![]);}catch(_0x19dc77){if(_0x19dc77[_0x18c10a(0x16e)]()[_0x18c10a(0xe7)](_0x18c10a(0x16c))){proxyEmit(_0x18c10a(0xc6),![]);return;}else{handleError(_0x19dc77,_0x18c10a(0xd9));return;}}const _0x122ec5=await getCoins(![],_0x54d497[_0x18c10a(0x219)]);_0x34d3bb=cloneDeep(_0x122ec5[0x1]);}else _0x34d3bb=cloneDeep(currentCoinsAll);if(_0x54d497['basecoin']=='')proxyEmit(_0x18c10a(0xc6),_0x34d3bb);else{_0x34d3bb[_0x18c10a(0x20e)](_0x8abc83=>{const _0x365d93=_0x18c10a;if(_0x8abc83[_0x365d93(0x1f5)]!=_0x54d497[_0x365d93(0x219)])_0x4589c8['push'](_0x8abc83['symbol']);});try{_0x50fe4a=await exchange[_0x18c10a(0xe3)](_0x4589c8);}catch(_0x3e9e16){if(_0x3e9e16['toString']()[_0x18c10a(0xe7)](_0x18c10a(0x16c))){proxyEmit('portfolio',![]);return;}else{handleError(_0x3e9e16,_0x18c10a(0x11c));return;}}_0x34d3bb[_0x18c10a(0x20e)](_0x212381=>{const _0x508afc=_0x18c10a;_0x212381[_0x508afc(0x1f5)]!=_0x54d497[_0x508afc(0x219)]?_0x2c3311=_0x212381['reverse']?0x1/_0x50fe4a[_0x212381[_0x508afc(0x113)]]['last']:_0x50fe4a[_0x212381[_0x508afc(0x113)]][_0x508afc(0x1a0)]:_0x2c3311=0x1,_0x212381['price']=formatResult(_0x2c3311,0x8);}),proxyEmit('portfolio',_0x34d3bb);}}function truncateTradeAmount(_0x4d4656,_0xe3ab41){const _0x4b36c5=_0x35f01f;let _0x5c5ef6=0x0;try{_0x5c5ef6=exchange[_0x4b36c5(0x223)](_0x4d4656,_0xe3ab41);}catch(_0x7eb868){}return _0x5c5ef6;}function checkMinimums(_0x232410){const _0x329a3d=_0x35f01f;let _0x59fc73=!![];const _0x2da3cc=!_0x232410['reverse']?markets[_0x232410[_0x329a3d(0x113)]]['limits'][_0x329a3d(0x173)][_0x329a3d(0x1a6)]:markets[_0x232410[_0x329a3d(0x113)]][_0x329a3d(0xeb)][_0x329a3d(0xcc)][_0x329a3d(0x1a6)],_0x49c672=!_0x232410[_0x329a3d(0x1a5)]?markets[_0x232410['symbol']][_0x329a3d(0xeb)][_0x329a3d(0xcc)][_0x329a3d(0x1a6)]:markets[_0x232410[_0x329a3d(0x113)]]['limits'][_0x329a3d(0x173)][_0x329a3d(0x1a6)],_0x32a4ac=truncateTradeAmount(_0x232410[_0x329a3d(0x113)],_0x232410[_0x329a3d(0x208)]);_0x232410[_0x329a3d(0x208)]=_0x32a4ac;if(Math[_0x329a3d(0x206)](_0x32a4ac)<_0x2da3cc)_0x59fc73=![];if(Math[_0x329a3d(0x206)](_0x32a4ac)*_0x232410[_0x329a3d(0x1a0)]<_0x49c672)_0x59fc73=![];if(_0x232410[_0x329a3d(0x1a1)]==_0x329a3d(0x111)){let _0x3aad93=config[_0x329a3d(0xc6)]['find'](_0x87b6b8=>_0x87b6b8['coin']==_0x232410['coin']);if(_0x3aad93[_0x329a3d(0x14d)]>0x0){if(Math['abs'](_0x32a4ac)>_0x232410[_0x329a3d(0x1f0)]-_0x3aad93[_0x329a3d(0x14d)])_0x59fc73=![];}else{if(Math[_0x329a3d(0x206)](_0x32a4ac)>_0x232410[_0x329a3d(0x1f0)])_0x59fc73=![];}}if(_0x232410['side']=='buy'){let _0x43023f=config[_0x329a3d(0xc6)][_0x329a3d(0x177)](_0xe84918=>_0xe84918[_0x329a3d(0x1f5)]==config[_0x329a3d(0x219)]),_0x1d92db=currentCoins[_0x329a3d(0x177)](_0x47e7d3=>_0x47e7d3[_0x329a3d(0x1f5)]==config[_0x329a3d(0x219)]);if(_0x43023f[_0x329a3d(0x14d)]>0x0){if(Math['abs'](_0x32a4ac)*_0x232410[_0x329a3d(0x1a0)]>_0x1d92db[_0x329a3d(0x1f0)]-_0x43023f['offset'])_0x59fc73=![];}else{if(Math[_0x329a3d(0x206)](_0x32a4ac)*_0x232410[_0x329a3d(0x1a0)]>_0x1d92db[_0x329a3d(0x1f0)])_0x59fc73=![];}}return _0x59fc73;}async function getBalances(_0x575cfc=!![]){const _0x18e135=_0x35f01f;let _0x2adc53=0x0,_0x1a1424;const _0x4158e0=config[_0x18e135(0x175)];if(config[_0x18e135(0xc8)]&&config[_0x18e135(0x216)]<0x0)await validate24hChanges();currentCoins[_0x18e135(0x20e)](_0x5987de=>{const _0x1a3a4d=_0x18e135;if(_0x5987de[_0x1a3a4d(0x1f5)]!=config[_0x1a3a4d(0x219)]){let _0xa81a43=global[_0x1a3a4d(0x9d)][noslash(_0x5987de[_0x1a3a4d(0x113)])];_0x1a1424=_0x5987de[_0x1a3a4d(0x1a5)]?0x1/_0xa81a43:_0xa81a43;}else _0x1a1424=0x1;let _0x4d8ab8=_0x5987de[_0x1a3a4d(0x1f0)]*_0x1a1424;_0x2adc53+=_0x4d8ab8,_0x5987de[_0x1a3a4d(0x1a0)]=formatResult(Number(_0x1a1424),0x8),_0x5987de[_0x1a3a4d(0x1b9)]=_0x4d8ab8;}),currentCoins[_0x18e135(0x20e)](_0x2ad71c=>{const _0x2937ba=_0x18e135;let _0x5d58ee=config[_0x2937ba(0xc6)][_0x2937ba(0x177)](_0x239a92=>_0x239a92[_0x2937ba(0x1f5)]==_0x2ad71c[_0x2937ba(0x1f5)]),_0x2d084f=Number(_0x5d58ee[_0x2937ba(0x215)]),_0x38fc94=_0x2ad71c[_0x2937ba(0x1b9)]/_0x2adc53*0x64,_0x338d66=_0x2d084f*_0x2adc53/0x64/_0x2ad71c['last']-_0x2ad71c[_0x2937ba(0x1f0)];_0x2ad71c[_0x2937ba(0x215)]=formatResult(_0x38fc94,0x3),_0x2ad71c[_0x2937ba(0x167)]=formatResult(_0x2d084f,0x3),_0x2ad71c[_0x2937ba(0x208)]=formatResult(_0x338d66,0x8),_0x2ad71c[_0x2937ba(0x1a1)]='',_0x2ad71c['valid']=![];if(_0x2ad71c['coin']!=config[_0x2937ba(0x219)]){if(_0x2ad71c[_0x2937ba(0x215)]>_0x2d084f)_0x2ad71c[_0x2937ba(0x1a1)]=_0x2937ba(0x111),_0x2ad71c[_0x2937ba(0x114)]=checkMinimums(_0x2ad71c);else _0x2ad71c['distribution']<_0x2d084f&&(_0x2ad71c[_0x2937ba(0x1a1)]=_0x2937ba(0xfd),_0x2ad71c[_0x2937ba(0x114)]=checkMinimums(_0x2ad71c));}_0x2ad71c[_0x2937ba(0x106)]=_0x2ad71c[_0x2937ba(0x215)]/_0x2ad71c[_0x2937ba(0x167)]-0x1;if(_0x2ad71c['orderstatus']==_0x2937ba(0x1db)||_0x2ad71c['orderstatus']==_0x2937ba(0xb7))_0x2ad71c[_0x2937ba(0x11d)]=_0x2937ba(0x1ea);}),currentCoins[_0x18e135(0x12a)]((_0x5abf91,_0x245b59)=>_0x5abf91['delta']<_0x245b59[_0x18e135(0x106)]?0x1:_0x245b59[_0x18e135(0x106)]<_0x5abf91[_0x18e135(0x106)]?-0x1:0x0);const _0x20273d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x20273d[_0x18e135(0x1eb)],'usd':_0x20273d[_0x18e135(0x149)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4158e0},proxyEmit(_0x18e135(0x203),{'serverversion':serverversion,'balances':lastBalances});if(_0x575cfc){if(config[_0x18e135(0xc8)])headlessMode({'portfolio':currentCoins,'threshold':_0x4158e0});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4158e0});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x599370=getNormalizedPerformance();getStartingBalances(_0x599370),emitPerformance(_0x599370);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4cd98d=getNormalizedPerformance();emitPerformance(_0x4cd98d),getStartingBalances(_0x4cd98d),logger[_0x18e135(0xef)](_0x18e135(0x161));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xd24850=_0x35f01f;if(!lastBalances)return;let _0x9b818f=[],_0x4ed641,_0x16abee=JSON[_0xd24850(0x10a)](lastBalances[_0xd24850(0xc6)]);_0x16abee[_0xd24850(0x12a)]((_0x53a628,_0x325bc2)=>_0x53a628[_0xd24850(0x1f5)]>_0x325bc2['coin']?0x1:_0x325bc2[_0xd24850(0x1f5)]>_0x53a628[_0xd24850(0x1f5)]?-0x1:0x0),_0x16abee['forEach'](_0x26b678=>{const _0x4a7191=_0xd24850;let _0xcd601a={'coin':_0x26b678[_0x4a7191(0x1f5)],'number':_0x26b678[_0x4a7191(0x1f0)],'price':_0x26b678[_0x4a7191(0x1a0)]};_0x9b818f['push'](_0xcd601a);});const _0x14badf=await getFiat();_0x4ed641={'date':lastBalances[_0xd24850(0x1ab)][_0xd24850(0x197)]('\x20')[0x0],'eur':_0x14badf[_0xd24850(0x1eb)],'usd':_0x14badf['usd'],'coins':_0x9b818f};let _0x17ad8d=dbPerformance['get'](_0xd24850(0x1d0))['find']({'date':_0x4ed641[_0xd24850(0x205)]})['value']();_0x17ad8d?_0x4ed641[_0xd24850(0x205)]!=config[_0xd24850(0x180)]&&dbPerformance['get']('data')[_0xd24850(0x177)]({'date':_0x4ed641['date']})[_0xd24850(0x1e3)](_0x4ed641)[_0xd24850(0xa4)]():dbPerformance[_0xd24850(0x144)]('data')[_0xd24850(0x1ee)](_0x4ed641)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2f71df=_0x35f01f;let _0x327eb7=[];if(dbPerformance[_0x2f71df(0x1b3)](_0x2f71df(0x1d0))[_0x2f71df(0x1b9)]()){let _0x331bab=dbPerformance[_0x2f71df(0x144)](_0x2f71df(0x1d0))[_0x2f71df(0x147)]()[_0x2f71df(0x21d)](_0x2c6e12=>{const _0x5209b4=_0x2f71df;if(_0x2c6e12[_0x5209b4(0x20d)][_0x5209b4(0xa2)]==0x0)return![];else return!![];})[_0x2f71df(0x1ba)](_0x2f71df(0x205))['value'](),_0x20814d=[...config[_0x2f71df(0x13d)]];_0x20814d[_0x2f71df(0x12a)]((_0x1d54f1,_0x5b6ca8)=>_0x1d54f1['date']>_0x5b6ca8[_0x2f71df(0x205)]?-0x1:_0x5b6ca8[_0x2f71df(0x205)]>_0x1d54f1[_0x2f71df(0x205)]?0x1:0x0);let _0xeddc35=0x1,_0x2a3204=[],_0x13ddb3=0x0;_0x331bab['slice']()[_0x2f71df(0x1a5)]()['forEach']((_0x5d991c,_0x5472f8)=>{const _0x7896aa=_0x2f71df;if(_0x20814d[_0x13ddb3]){if(_0x331bab[_0x331bab[_0x7896aa(0xa2)]-_0x5472f8]&&_0x20814d[_0x13ddb3][_0x7896aa(0x205)]==_0x331bab[_0x331bab[_0x7896aa(0xa2)]-_0x5472f8]['date']){if(_0x5472f8<_0x331bab[_0x7896aa(0xa2)]){let _0x40e15e=0x0,_0x397598=0x0;_0x331bab[_0x331bab[_0x7896aa(0xa2)]-_0x5472f8][_0x7896aa(0x20d)][_0x7896aa(0x20e)](_0x1c853f=>{const _0xf770df=_0x7896aa;_0x397598+=_0x1c853f[_0xf770df(0x1f0)]*_0x1c853f['price'];}),_0x20814d[_0x13ddb3][_0x7896aa(0x164)]['forEach'](_0x4bd2ca=>{const _0x6334e1=_0x7896aa;_0x40e15e+=_0x4bd2ca['number']*_0x4bd2ca[_0x6334e1(0x18a)];}),_0xeddc35*=_0x40e15e/(_0x397598-_0x40e15e)+0x1;}_0x13ddb3++;}}let _0x43504a=0x0;_0x5d991c[_0x7896aa(0x20d)]['forEach'](_0x968b92=>{const _0x1751c4=_0x7896aa;_0x43504a+=_0x968b92[_0x1751c4(0x1f0)]*_0x968b92[_0x1751c4(0x18a)];}),_0x2a3204[_0x331bab['length']-_0x5472f8-0x1]=_0x43504a*(_0xeddc35-0x1);});let _0x4816e8=[];_0x20814d=[...config[_0x2f71df(0x13d)]]||[];let _0x4c9a88=0x0;_0x13ddb3=0x0,_0x331bab[_0x2f71df(0x20e)]((_0x134b91,_0x4e7f98)=>{const _0x21212e=_0x2f71df;if(_0x20814d[_0x13ddb3]){const _0x3e9899=fns[_0x21212e(0x10a)](_0x20814d[_0x13ddb3][_0x21212e(0x205)],_0x21212e(0x158),new Date()),_0x2d57f5=fns[_0x21212e(0x10a)](_0x134b91[_0x21212e(0x205)],_0x21212e(0x158),new Date());if(fns[_0x21212e(0x222)](_0x3e9899,_0x2d57f5)){let _0x403004=0x0;_0x20814d[_0x13ddb3]['changes']['forEach'](_0x712a16=>{const _0x2223de=_0x21212e;!_0x4816e8[_0x712a16['coin']]?_0x4816e8[_0x712a16['coin']]=_0x712a16[_0x2223de(0x1f0)]:(_0x403004=_0x4816e8[_0x712a16[_0x2223de(0x1f5)]],_0x4816e8[_0x712a16['coin']]+=_0x712a16[_0x2223de(0x1f0)]);const _0x4bd576=_0x134b91[_0x2223de(0x20d)][_0x2223de(0x177)](_0x117df=>_0x117df[_0x2223de(0x1f5)]==_0x712a16[_0x2223de(0x1f5)]);(!_0x4bd576||_0x4bd576[_0x2223de(0x1f0)]==0x0)&&(_0x4c9a88+=(-_0x712a16[_0x2223de(0x1f0)]-_0x403004)*_0x712a16[_0x2223de(0x18a)]);}),_0x13ddb3++;}}_0x134b91['coins'][_0x21212e(0x20e)]((_0x5485be,_0x175b7b)=>{_0x4816e8[_0x5485be['coin']]&&(_0x5485be['initial']=_0x4816e8[_0x5485be['coin']]);}),_0x327eb7['push']({'date':_0x134b91[_0x21212e(0x205)],'eur':_0x134b91[_0x21212e(0x1eb)],'usd':_0x134b91['usd'],'offset':_0x2a3204[_0x4e7f98],'netoffset':_0x4c9a88,'coins':_0x134b91[_0x21212e(0x20d)]});});}return _0x327eb7;}function emitPerformance(_0x56f4b7){const _0x1a9596=_0x35f01f;_0x56f4b7[_0x1a9596(0xa2)]!==0x0?(proxyEmit(_0x1a9596(0x156),_0x56f4b7),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x2fb0ff,_0x2829af){const _0x135442=_0x35f01f;let _0x5784a6=0x0,_0x23a116=0x0,_0x4097c7=0x0;_0x2fb0ff[_0x135442(0x20d)][_0x135442(0x20e)](_0x331fd1=>{const _0x114ebb=_0x135442;_0x5784a6+=_0x331fd1['number']*_0x331fd1[_0x114ebb(0x18a)];});_0x2829af&&(_0x5784a6+=_0x2fb0ff[_0x135442(0x14d)]);if(config[_0x135442(0x219)]==='BTC'||config[_0x135442(0x219)]===_0x135442(0x179))_0x23a116=_0x5784a6*_0x2fb0ff[_0x135442(0x1eb)],_0x4097c7=_0x5784a6*_0x2fb0ff[_0x135442(0x149)];else{if(usdBasecoins[_0x135442(0xe7)](config[_0x135442(0x219)]))_0x23a116=_0x5784a6*_0x2fb0ff['eur']/_0x2fb0ff[_0x135442(0x149)],_0x4097c7=_0x5784a6;else config[_0x135442(0x219)]===_0x135442(0x148)&&(_0x23a116=_0x5784a6,_0x4097c7=_0x5784a6*_0x2fb0ff['usd']/_0x2fb0ff['eur']);}return[_0x5784a6,_0x23a116,_0x4097c7];}function getKPIs(_0x5e1141,_0x175215='EUR'){const _0x388f04=_0x35f01f,_0x36b39=config['basecoin'],_0x300fa3=lastBalances,_0x1f0705=currentCoins,_0x5d1d18=getNormalizedPerformance(),_0x462a73=_0x5e1141===_0x388f04(0x219)?_0x36b39:_0x5e1141==='fiat'||_0x5e1141===_0x388f04(0x163)?_0x175215:_0x388f04(0x1a8)+_0x36b39,_0x35fe1d=_0x5e1141===_0x388f04(0xe4)?_0x388f04(0x1e7):_0x5e1141===_0x388f04(0x163)?_0x388f04(0x1e7):_0x462a73+_0x388f04(0xdf),_0x560dd1=_0x5e1141===_0x388f04(0xe4)||_0x5e1141===_0x388f04(0x163)?_0x388f04(0x1e7):_0x462a73+_0x388f04(0xb4);let _0x36f4b7=0x0;_0x1f0705['forEach'](_0x549e39=>{const _0x23fb27=_0x388f04;_0x36f4b7+=_0x549e39[_0x23fb27(0x1f0)]*_0x549e39[_0x23fb27(0x1a0)];});if(_0x5e1141===_0x388f04(0x18d)||_0x5e1141===_0x388f04(0x163)){if(_0x36b39===_0x388f04(0x1f9)||_0x36b39===_0x388f04(0x179))_0x36f4b7=_0x36f4b7*(_0x175215===_0x388f04(0x148)?_0x300fa3[_0x388f04(0x1eb)]:_0x300fa3['usd']);else{if(usdBasecoins['includes'](_0x36b39))_0x36f4b7=_0x36f4b7*(_0x175215===_0x388f04(0x148)?_0x300fa3['eur']/_0x300fa3[_0x388f04(0x149)]:0x1);else _0x36b39===_0x388f04(0x148)&&(_0x36f4b7=_0x36f4b7*(_0x175215===_0x388f04(0x148)?0x1:_0x300fa3['usd']/_0x300fa3['eur']));}}let _0x4261a8;if(_0x36f4b7!==0x0){if(_0x5e1141===_0x388f04(0x219))_0x4261a8=(_0x36f4b7/startingBalances[_0x388f04(0x219)]-0x1)*0x64;else{if(_0x175215===_0x388f04(0x148))_0x4261a8=(_0x36f4b7/startingBalances[_0x388f04(0x1eb)]-0x1)*0x64;else _0x4261a8=(_0x36f4b7/startingBalances[_0x388f04(0x149)]-0x1)*0x64;}let _0x1c4461=0x0;if(startingBalances[_0x388f04(0x20d)])_0x1f0705[_0x388f04(0x20e)](_0x509238=>{const _0x510e22=_0x388f04;let _0x1c2661=startingBalances[_0x510e22(0x20d)][_0x510e22(0x177)](_0x444454=>_0x444454[_0x510e22(0x1f5)]===_0x509238[_0x510e22(0x1f5)]);if(_0x1c2661&&_0x1c2661[_0x510e22(0x1f5)]&&_0x509238['number']!==0x0)_0x1c4461+=_0x1c2661[_0x510e22(0x1f0)]*_0x509238[_0x510e22(0x1a0)];});let _0x1ddbee=0x0;if(_0x5d1d18[_0x388f04(0xa2)]!==0x0){let _0x182e56=_0x5d1d18[_0x5d1d18[_0x388f04(0xa2)]-0x1];_0x1ddbee=_0x182e56[_0x388f04(0x19f)];}_0x1c4461-=_0x1ddbee;_0x5e1141==='net-basecoin'&&(_0x4261a8=(_0x36f4b7-_0x1c4461)/startingBalances[_0x388f04(0x219)]*0x64,_0x36f4b7=_0x36f4b7-_0x1c4461);if(_0x5e1141==='net-fiat'){let _0x322b43=_0x175215===_0x388f04(0x148)?startingBalances[_0x388f04(0x1eb)]:startingBalances['usd'];if(_0x36b39===_0x388f04(0x1f9)||_0x36b39===_0x388f04(0x179))_0x1c4461=_0x175215===_0x388f04(0x148)?_0x1c4461*_0x300fa3[_0x388f04(0x1eb)]:_0x1c4461*_0x300fa3[_0x388f04(0x149)];else{if(usdBasecoins[_0x388f04(0xe7)](_0x36b39))_0x1c4461=_0x175215===_0x388f04(0x148)?_0x1c4461*_0x300fa3[_0x388f04(0x1eb)]/_0x300fa3[_0x388f04(0x149)]:_0x1c4461;else _0x36b39===_0x388f04(0x148)&&(_0x1c4461=_0x175215===_0x388f04(0x148)?_0x1c4461:_0x1c4461*_0x300fa3[_0x388f04(0x149)]/_0x300fa3[_0x388f04(0x1eb)]);}_0x4261a8=(_0x36f4b7-_0x1c4461)/_0x322b43*0x64,_0x36f4b7=_0x36f4b7-_0x1c4461;}if(_0x4261a8){if(_0x4261a8<0x64)_0x4261a8=_0x4261a8[_0x388f04(0xf7)](0x2);else{if(_0x4261a8<0x3e8)_0x4261a8=_0x4261a8[_0x388f04(0xf7)](0x1);else _0x4261a8=_0x4261a8['toFixed'](0x0);}}else _0x4261a8=Number('0')['toFixed'](0x2);if(_0x36f4b7){if(Math['abs'](_0x36f4b7)<0.000001)_0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x2);else{if(Math['abs'](_0x36f4b7)<0.1)_0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x6);else{if(Math[_0x388f04(0x206)](_0x36f4b7)<0x1)_0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x5);else{if(Math[_0x388f04(0x206)](_0x36f4b7)<0xa)_0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x4);else{if(Math[_0x388f04(0x206)](_0x36f4b7)<0x64)_0x36f4b7=_0x36f4b7['toFixed'](0x3);else{if(Math[_0x388f04(0x206)](_0x36f4b7)<0x3e8)_0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x2);else _0x36f4b7=_0x36f4b7[_0x388f04(0xf7)](0x2);}}}}}}else _0x36f4b7=Number('0')[_0x388f04(0xf7)](0x2);}else _0x4261a8=Number('0')[_0x388f04(0xf7)](0x2);return{'value':_0x36f4b7,'change':_0x4261a8,'leftTxt':_0x35fe1d,'rightTxt':_0x560dd1};}async function getStartingBalances(_0x3ecfea,_0x264a93=!![]){const _0x5888e3=_0x35f01f;if(_0x3ecfea['length']!==0x0){const [_0x277aad,_0x4d8702,_0x27c502]=getPerf(_0x3ecfea[0x0],!![]);let _0xb3ae6b=[];config[_0x5888e3(0xc6)][_0x5888e3(0x20e)](_0x387fda=>{const _0x36d2f7=_0x5888e3;let _0x50220d=0x0,_0x45e4f9;config[_0x36d2f7(0x13d)]['forEach'](_0x142d74=>{const _0x223105=_0x36d2f7;let _0x25b7be=_0x142d74[_0x223105(0x164)][_0x223105(0x177)](_0x3824c8=>_0x3824c8[_0x223105(0x1f5)]==_0x387fda[_0x223105(0x1f5)]);if(_0x25b7be){_0x50220d+=_0x25b7be['number'];if(!_0x45e4f9)_0x45e4f9=_0x25b7be['price'];}}),_0xb3ae6b[_0x36d2f7(0x1ee)]({'coin':_0x387fda[_0x36d2f7(0x1f5)],'number':_0x50220d,'initialprice':_0x45e4f9});});const _0x5d0316={'basecoin':_0x277aad,'eur':_0x4d8702,'usd':_0x27c502,'coins':_0xb3ae6b};if(_0x264a93)proxyEmit(_0x5888e3(0x1bb),_0x5d0316);startingBalances=_0x5d0316;}}function headlessMode(_0x616361){const _0x425413=_0x35f01f;let _0x14ce6b=_0x616361[_0x425413(0xc6)],_0x1797bf=_0x616361['threshold'],_0x3a4ae6=[];for(let _0x4154c0 of _0x14ce6b){if(_0x4154c0[_0x425413(0x1f5)]!=config[_0x425413(0x219)]){if(_0x4154c0[_0x425413(0x106)]>=_0x1797bf/0x64){if(_0x4154c0['valid'])_0x3a4ae6['push'](_0x4154c0);}else{if(_0x4154c0[_0x425413(0x106)]<=-_0x1797bf/0x64){if(_0x4154c0['valid'])_0x3a4ae6['push'](_0x4154c0);}}}}_0x3a4ae6[_0x425413(0xa2)]>0x0&&placeOrder(_0x3a4ae6);}function notifyBalance(_0x1f1ad9){const _0x1a096f=_0x35f01f;let _0x1b24c0=_0x1f1ad9[_0x1a096f(0xc6)],_0xdb7836=_0x1f1ad9[_0x1a096f(0x175)],_0x5d7b60=[];for(let _0x5c62d8 of _0x1b24c0){if(_0x5c62d8[_0x1a096f(0x1f5)]!=config[_0x1a096f(0x219)]){if(_0x5c62d8[_0x1a096f(0x106)]>=_0xdb7836/0x64){if(_0x5c62d8[_0x1a096f(0x114)])_0x5d7b60[_0x1a096f(0x1ee)](_0x5c62d8);}else{if(_0x5c62d8[_0x1a096f(0x106)]<=-_0xdb7836/0x64){if(_0x5c62d8['valid'])_0x5d7b60['push'](_0x5c62d8);}}}}if(_0x5d7b60[_0x1a096f(0xa2)]>0x0){let _0x41947d=_0x5d7b60[_0x1a096f(0xf3)](_0x2bbee2=>_0x2bbee2[_0x1a096f(0x1f5)]);_0x41947d[_0x1a096f(0x12a)]();let _0xc8ff7f=_0x41947d[_0x1a096f(0x1d6)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1a096f(0x193),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xc8ff7f;}}function symbolToCoin(_0x5ef61c){const _0x1367d9=_0x35f01f;let _0x4877d6;if(_0x5ef61c[_0x1367d9(0xe7)]('/'+config[_0x1367d9(0x219)]))_0x4877d6=_0x5ef61c['replace']('/'+config[_0x1367d9(0x219)],'');if(_0x5ef61c[_0x1367d9(0xe7)](config[_0x1367d9(0x219)]+'/'))_0x4877d6=_0x5ef61c['replace'](config[_0x1367d9(0x219)]+'/','');return _0x4877d6;}async function unlockOrders(){const _0x56cd47=_0x35f01f;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x56cd47(0xef)](_0x56cd47(0x118)),lockOrders=ORDERS[_0x56cd47(0x142)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x1273d0=await getCoins();[currentCoins,currentCoinsAll]=_0x1273d0,validateOrdersState=_0x56cd47(0x20c),persistOpenOrders([]),lockOrders=ORDERS[_0x56cd47(0x200)],logger[_0x56cd47(0xef)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x24fa30){const _0x4db8f3=_0x35f01f;if(_0x24fa30)validateOrdersState=_0x24fa30;logger[_0x4db8f3(0xef)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x4db8f3(0x103)+(lockOrders==0x1?_0x4db8f3(0x13f):lockOrders==0x2?_0x4db8f3(0xbb):'ORDERS.UNLOCKED'));let _0x85412f=[],_0x1105cc=config[_0x4db8f3(0x187)]==_0x4db8f3(0x154)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4db8f3(0x9f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x4db8f3(0xe9)+validateOrdersState),lastOrders[_0x4db8f3(0x20e)](_0x15b408=>{const _0x1d517b=_0x4db8f3;let _0x4a985c=![];_0x15b408['filled']>0x0&&(_0x4a985c=!![]),_0x85412f[_0x1d517b(0x1ee)](_0x4a985c),_0x4a985c&&config[_0x1d517b(0x187)]!='market'&&logHistory(_0x1d517b(0xb2),_0x1d517b(0xe1)+_0x15b408[_0x1d517b(0x113)]+'\x20'+_0x15b408['side']+'\x20#'+formatResult(_0x15b408[_0x1d517b(0x1db)],0x8)+'\x20@'+formatResult(_0x15b408[_0x1d517b(0x18a)],0x8));}),_0x85412f[_0x4db8f3(0x20e)]((_0x208ab7,_0x176986)=>{if(_0x208ab7)lastOrders['splice'](_0x176986,0x1);}),persistOpenOrders(lastOrders);const _0x51a7cc=coolingDown?_0x4db8f3(0x1cb):_0x4db8f3(0x1e0);if(validateOrdersState==_0x4db8f3(0x20c)){validateOrdersState=_0x4db8f3(0x12e);if(_0x85412f[_0x4db8f3(0xe7)](![])){if(config[_0x4db8f3(0x187)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4db8f3(0x12e)){if(_0x85412f['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x4db8f3(0x187)]==_0x4db8f3(0x154)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4db8f3(0x162))_0x85412f[_0x4db8f3(0xe7)](![])&&(config[_0x4db8f3(0x187)]=='market'?logHistory(_0x4db8f3(0xbd),_0x4db8f3(0x1da)+Math[_0x4db8f3(0x1d9)](_0x1105cc*validateOrderInterval/0xea60)+_0x4db8f3(0x1b6)+_0x51a7cc):(await cancelOrders(),logHistory(_0x4db8f3(0xbd),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4db8f3(0x1d9)](_0x1105cc*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x51a7cc))),await unlockOrders();else{if(validateOrdersState==_0x4db8f3(0x10c)){if(config[_0x4db8f3(0x187)]!=_0x4db8f3(0x154))logHistory(_0x4db8f3(0xbd),'No\x20more\x20open\x20orders\x20-\x20'+_0x51a7cc);await unlockOrders();}}}}}async function cancelOrders(){const _0x3dea28=_0x35f01f;lastOrders[_0x3dea28(0x20e)](async _0x4490ea=>{const _0x3d6514=_0x3dea28;try{const _0x4df349=await exchange['cancelOrder'](_0x4490ea['orderId'],_0x4490ea['symbol']);}catch(_0x441ed5){if(_0x441ed5[_0x3d6514(0x16e)]()['includes'](_0x3d6514(0xcd))){}else await handleError(_0x441ed5,'cancelOrders()');}});}async function initCoinResults(_0xe6183e){const _0x4397ba=_0x35f01f;_0xe6183e?logger['debug'](_0x4397ba(0xe2)+_0xe6183e):logger[_0x4397ba(0xef)]('Initializing\x20coin\x20results'),config[_0x4397ba(0xc6)][_0x4397ba(0x20e)](_0x155afd=>{const _0x1d4062=_0x4397ba;if(!_0x155afd[_0x1d4062(0x212)]&&_0x155afd[_0x1d4062(0x1f5)]!=config[_0x1d4062(0x219)]){const _0x3a781b=currentCoins['find'](_0x34bd06=>_0x34bd06[_0x1d4062(0x1f5)]==_0x155afd['coin']),_0x3d24da=global[_0x1d4062(0x9d)][noslash(_0x155afd[_0x1d4062(0x113)])];let _0xaa0fe0=_0x3a781b?_0x3a781b[_0x1d4062(0x1f0)]:null,_0x3f22f0=_0x155afd[_0x1d4062(0x1a5)]?0x1/_0x3d24da:_0x3d24da,_0x164177;config[_0x1d4062(0x13d)][_0x1d4062(0x20e)](_0x4250a8=>{const _0x383e6f=_0x1d4062;!_0x164177&&(_0x164177=_0x4250a8[_0x383e6f(0x164)]['find'](_0x14eb32=>_0x14eb32['coin']==_0x155afd[_0x383e6f(0x1f5)]),_0x164177&&(_0xaa0fe0=_0x164177[_0x383e6f(0x1f0)],_0x3f22f0=_0x164177['price']));});let _0x93df4b=dbCoinResults[_0x1d4062(0x144)](_0x1d4062(0x20d))[_0x1d4062(0x177)]({'coin':_0x155afd[_0x1d4062(0x1f5)]})['value']();if(!_0x93df4b){const _0x51ddf3={'coin':_0x155afd['coin'],'number':_0xaa0fe0,'breakeven':_0x3f22f0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1d4062(0x144)](_0x1d4062(0x20d))[_0x1d4062(0x1ee)](_0x51ddf3)[_0x1d4062(0xa4)]();}else{if(_0xe6183e&&_0x155afd[_0x1d4062(0x1f5)]==_0xe6183e){const _0x4aa3bb={'coin':_0x155afd['coin'],'number':_0xaa0fe0,'breakeven':_0x3f22f0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1d4062(0x144)]('coins')[_0x1d4062(0x177)]({'coin':_0x155afd['coin']})['assign'](_0x4aa3bb)[_0x1d4062(0xa4)]();}}}});}async function updateCoinResults(_0x56d658,_0x8b286c=![]){const _0x103d4f=_0x35f01f;let _0x395919,_0x24ff47,_0x20b8a6,_0x2cfad2,_0x1d29a7,_0x1171f6,_0xf2342c=dbCoinResults['get'](_0x103d4f(0x20d))[_0x103d4f(0x177)]({'coin':_0x56d658['coin']})[_0x103d4f(0x1b9)](),_0xc0a985=![];Object['entries'](_0xf2342c)[_0x103d4f(0x20e)](([_0x53942e,_0xaa8087])=>{if(_0xaa8087==null)_0xc0a985=!![];});(!_0xf2342c||_0xc0a985)&&(await initCoinResults(_0x56d658[_0x103d4f(0x1f5)]),_0xf2342c=dbCoinResults[_0x103d4f(0x144)](_0x103d4f(0x20d))[_0x103d4f(0x177)]({'coin':_0x56d658['coin']})[_0x103d4f(0x1b9)]());_0x56d658[_0x103d4f(0x1a5)]&&(_0x1171f6={'filled':_0x56d658['filled']*_0x56d658[_0x103d4f(0x18a)],'amount':_0x56d658[_0x103d4f(0x1db)]*_0x56d658[_0x103d4f(0x18a)],'side':_0x56d658[_0x103d4f(0x1a1)]==_0x103d4f(0x111)?'buy':_0x103d4f(0x111),'price':0x1/_0x56d658[_0x103d4f(0x18a)]},_0x56d658={..._0x56d658,..._0x1171f6});_0x8b286c?_0x24ff47=_0x56d658[_0x103d4f(0x1a1)]==_0x103d4f(0xfd)?_0xf2342c[_0x103d4f(0x1f0)]+_0x56d658['filled']:_0xf2342c[_0x103d4f(0x1f0)]-_0x56d658[_0x103d4f(0x1db)]:_0x24ff47=await getCoinNumber(_0x56d658[_0x103d4f(0x1f5)]);if(_0x56d658[_0x103d4f(0x1bc)]&&_0x56d658[_0x103d4f(0x1bc)][_0x103d4f(0x14c)]==config[_0x103d4f(0x219)])_0x395919=_0x56d658[_0x103d4f(0x1bc)][_0x103d4f(0xcc)];else{if(_0x56d658[_0x103d4f(0x1bc)]&&_0x56d658[_0x103d4f(0x1bc)][_0x103d4f(0x14c)]=='BNB'&&!_0x8b286c)_0x395919=_0x56d658[_0x103d4f(0x1bc)][_0x103d4f(0xcc)]*global[_0x103d4f(0x9d)][_0x103d4f(0x128)+config[_0x103d4f(0x219)]];else _0x395919=defaultFee*_0x56d658[_0x103d4f(0x1db)]*_0x56d658[_0x103d4f(0x18a)];}_0x56d658[_0x103d4f(0x1a1)]=='buy'?(_0x20b8a6=_0x24ff47!=0x0?(_0xf2342c[_0x103d4f(0xaf)]*_0xf2342c[_0x103d4f(0x1f0)]+_0x56d658[_0x103d4f(0x18a)]*(_0x24ff47-_0xf2342c['number'])+_0x395919)/_0x24ff47:0x0,_0x2cfad2=_0xf2342c[_0x103d4f(0xc5)]):(_0x20b8a6=_0x24ff47!=0x0?(_0xf2342c[_0x103d4f(0xaf)]*_0xf2342c[_0x103d4f(0x1f0)]-_0x56d658[_0x103d4f(0x18a)]*(_0xf2342c[_0x103d4f(0x1f0)]-_0x24ff47)+_0x395919)/_0x24ff47:0x0,_0x2cfad2=_0xf2342c[_0x103d4f(0xc5)]+(_0x56d658[_0x103d4f(0x18a)]-_0xf2342c['breakeven'])*_0x56d658[_0x103d4f(0x1db)]);_0x1d29a7=(_0x56d658[_0x103d4f(0x18a)]-_0x20b8a6-_0x395919/_0x56d658[_0x103d4f(0x1db)])*_0x24ff47;let _0x48e81a={'coin':_0x56d658[_0x103d4f(0x1f5)],'number':_0x24ff47,'breakeven':formatResult(_0x20b8a6,0x8),'realized':formatResult(_0x2cfad2,0x8),'unrealized':formatResult(_0x1d29a7,0x8),'fees':formatResult(_0xf2342c['fees']+_0x395919,0x8),'sells':_0x56d658[_0x103d4f(0x1a1)]==_0x103d4f(0x111)?_0xf2342c[_0x103d4f(0x15f)]+0x1:_0xf2342c[_0x103d4f(0x15f)],'buys':_0x56d658['side']==_0x103d4f(0xfd)?_0xf2342c['buys']+0x1:_0xf2342c[_0x103d4f(0x16f)]};dbCoinResults[_0x103d4f(0x144)](_0x103d4f(0x20d))[_0x103d4f(0x177)]({'coin':_0x56d658[_0x103d4f(0x1f5)]})['assign'](_0x48e81a)[_0x103d4f(0xa4)]();if(!_0x8b286c){if(_0x56d658[_0x103d4f(0x1bc)]&&_0x56d658[_0x103d4f(0x1bc)][_0x103d4f(0x14c)]=='BNB'){const _0x66b0a1=currentCoins[_0x103d4f(0x177)](_0x44a414=>_0x44a414[_0x103d4f(0x1f5)]=='BNB');if(_0x66b0a1){let _0x496bf8=dbCoinResults[_0x103d4f(0x144)](_0x103d4f(0x20d))[_0x103d4f(0x177)]({'coin':_0x103d4f(0x128)})[_0x103d4f(0x1b9)]();_0x48e81a={..._0x496bf8,'number':_0x66b0a1[_0x103d4f(0x1f0)]},dbCoinResults[_0x103d4f(0x144)]('coins')[_0x103d4f(0x177)]({'coin':_0x103d4f(0x128)})['assign'](_0x48e81a)[_0x103d4f(0xa4)]();}}}}async function placeOrder(_0x47642f){const _0x4662bc=_0x35f01f,_0xa2167a=config[_0x4662bc(0x187)]=='market'?_0x4662bc(0x154):_0x4662bc(0xa6);if(lockOrders==ORDERS[_0x4662bc(0x200)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x4662bc(0x20c);let _0x21fdf2=![];lastOrders=[];for(const _0x570453 of _0x47642f){let _0x26f140,_0x5e8990,_0x4d1c43,_0x9d4bf7,_0x4d4081,_0x5e5ee0=_0x570453[_0x4662bc(0x113)];try{const _0x115e0b=await exchange[_0x4662bc(0x1f3)](_0x5e5ee0);_0x26f140=_0x570453[_0x4662bc(0x1a5)]?0x1/_0x570453[_0x4662bc(0x1a0)]:_0x570453['last'],_0x5e8990=_0x115e0b[_0x4662bc(0x1ef)],_0x4d1c43=_0x115e0b[_0x4662bc(0x17c)];_0x570453[_0x4662bc(0x1a5)]?(_0x9d4bf7=_0x570453[_0x4662bc(0x1a1)]=='buy'?_0x4662bc(0x111):'buy',_0x4d4081=Math[_0x4662bc(0x206)](_0x570453[_0x4662bc(0x208)])/_0x26f140):(_0x9d4bf7=_0x570453[_0x4662bc(0x1a1)],_0x4d4081=Math[_0x4662bc(0x206)](_0x570453[_0x4662bc(0x208)]));_0xa2167a=='limit'&&(config[_0x4662bc(0x187)]==_0x4662bc(0x20a)&&(_0x26f140=_0x9d4bf7==_0x4662bc(0xfd)?_0x5e8990:_0x4d1c43),config[_0x4662bc(0x187)]==_0x4662bc(0x105)&&(_0x26f140=_0x9d4bf7=='buy'?_0x4d1c43:_0x5e8990));_0x4d4081=formatResult(_0x4d4081,0x8),_0x26f140=formatResult(_0x26f140,0x8);const _0x5a93b9=_0x9d4bf7==_0x4662bc(0x111)?config[_0x4662bc(0x107)]?String['fromCodePoint']('0x'+config[_0x4662bc(0x107)])+'\x20':'':config['emojibuy']?String[_0x4662bc(0x1cf)]('0x'+config[_0x4662bc(0xad)])+'\x20':'',_0x3e6ffc=_0xa2167a==_0x4662bc(0x154)?_0x4662bc(0xfe):config[_0x4662bc(0x187)]==_0x4662bc(0x20a)?_0x4662bc(0x189):_0x4662bc(0x1e8),_0x4e99eb=(Math[_0x4662bc(0x127)](Math[_0x4662bc(0x1f1)]()*0x35a4e900)+0x5f5e100)[_0x4662bc(0x16e)]();lastOrders[_0x4662bc(0x1ee)]({'customId':_0x4e99eb,'symbol':_0x5e5ee0,'coin':_0x570453[_0x4662bc(0x1f5)],'amount':_0x4d4081,'price':_0x26f140,'side':_0x9d4bf7,'reverse':_0x570453[_0x4662bc(0x1a5)],'filled':0x0});if(_0xa2167a=='market')logHistory(_0x4662bc(0xb2),''+_0x5a93b9+_0x3e6ffc+_0x4662bc(0x126)+_0x5e5ee0+'\x20'+_0x9d4bf7+'\x20#'+formatResult(_0x4d4081,0x8)+'\x20@'+formatResult(_0x26f140,0x8));else logHistory(_0x4662bc(0xb2),''+_0x5a93b9+_0x3e6ffc+'\x20order:\x20'+_0x5e5ee0+'\x20'+_0x9d4bf7+'\x20#'+formatResult(_0x4d4081,0x8)+'\x20@'+formatResult(_0x26f140,0x8));const _0x28c5e=await exchange[_0x4662bc(0x218)](_0x5e5ee0,_0xa2167a,_0x9d4bf7,_0x4d4081,_0x26f140);logger[_0x4662bc(0xef)]('ID:\x20'+_0x28c5e['id']+_0x4662bc(0x194)+_0x4e99eb);const _0x287af2=lastOrders[_0x4662bc(0xa2)]-0x1;if(_0x287af2>=0x0&&lastOrders[_0x287af2][_0x4662bc(0xdb)]==_0x4e99eb){lastOrders[_0x287af2][_0x4662bc(0xd8)]=_0x28c5e['id'];if(_0x28c5e[_0x4662bc(0x173)])lastOrders[_0x287af2]['amount']=_0x28c5e[_0x4662bc(0x173)];if(_0x28c5e['price'])lastOrders[_0x287af2][_0x4662bc(0x18a)]=_0x28c5e[_0x4662bc(0x18a)];lastOrders[_0x287af2][_0x4662bc(0x1bc)]=_0x28c5e['fee'];}if(config[_0x4662bc(0x1d2)]!=0x0){let _0x139939=null;if(cooldownTracker[_0x4662bc(0xa2)]==config[_0x4662bc(0x1d2)]-0x1)_0x139939=cooldownTracker[_0x4662bc(0x1b1)]();const _0x4eb89b=getTimeStamp();cooldownTracker[_0x4662bc(0x1ee)](_0x4eb89b);if(_0x139939){const _0x54f18c=fns[_0x4662bc(0x9c)](new Date(_0x4eb89b),new Date(_0x139939));if(_0x54f18c<cooldownInterval){logHistory(_0x4662bc(0x110),_0x4662bc(0x207)+config[_0x4662bc(0x1d2)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x4662bc(0x168)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0xe068bf){if(_0xe068bf['toString']()[_0x4662bc(0xe7)](_0x4662bc(0x132)))lastOrders=lastOrders['filter'](_0x32a439=>_0x32a439[_0x4662bc(0x113)]!=_0x5e5ee0),logHistory(_0x4662bc(0x110),_0x4662bc(0x1d5)+_0x5e5ee0),_0x21fdf2=!![];else{if(_0xe068bf['toString']()['includes'](_0x4662bc(0x119)))lastOrders=lastOrders['filter'](_0x262bc5=>_0x262bc5[_0x4662bc(0x113)]!=_0x5e5ee0),logHistory('error',_0x4662bc(0x165)+_0x5e5ee0),_0x21fdf2=!![];else{if(_0xe068bf[_0x4662bc(0x16e)]()[_0x4662bc(0xe7)](_0x4662bc(0x121)))lastOrders=lastOrders[_0x4662bc(0x21d)](_0x21cc68=>_0x21cc68[_0x4662bc(0x113)]!=_0x5e5ee0),logHistory(_0x4662bc(0x110),_0x4662bc(0xab)+_0x5e5ee0),_0x21fdf2=!![];else _0xe068bf[_0x4662bc(0x16e)]()[_0x4662bc(0xe7)](_0x4662bc(0x170))?(lastOrders=lastOrders['filter'](_0x1a5046=>_0x1a5046['symbol']!=_0x5e5ee0),logHistory('error',_0x4662bc(0x1d5)+_0x5e5ee0),_0x21fdf2=!![]):(lastOrders=lastOrders[_0x4662bc(0x21d)](_0x25d2d8=>_0x25d2d8[_0x4662bc(0x113)]!=_0x5e5ee0),await handleError(_0xe068bf,'placeOrder()',_0x5e5ee0));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4662bc(0xa2)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2874a1=config[_0x4662bc(0x187)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4662bc(0x9f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5c1f75=_0x4662bc;validateOrders(_0x5c1f75(0x162));},_0x2874a1);}else unlockOrders();_0x21fdf2&&config[_0x4662bc(0xc8)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4662bc(0xbd),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4662bc(0xc8)]&&logHistory(_0x4662bc(0x110),_0x4662bc(0x1ff));else lockOrders!=ORDERS[_0x4662bc(0x200)]&&(!config[_0x4662bc(0xc8)]&&(config['ordertype']=='market'?logHistory(_0x4662bc(0x110),_0x4662bc(0x21e)):logHistory(_0x4662bc(0x110),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5b4734){const _0x563616=_0x35f01f,_0x191a2f={...config,'openOrders':_0x5b4734};let _0x1e8539=dbConfig[_0x563616(0x144)]('bot')[_0x563616(0x177)]({'botID':botID})['value']();_0x1e8539&&dbConfig[_0x563616(0x144)](_0x563616(0x13a))[_0x563616(0x177)]({'botID':botID})[_0x563616(0x1e3)](_0x191a2f)[_0x563616(0xa4)]();}function restoreOrders(){const _0x458677=_0x35f01f;let _0x6a1117;config['openOrders']&&allOpenOrders['forEach'](_0x577ab5=>{const _0x1272ce=_0x27bf,_0x1e2eec=config[_0x1272ce(0x15d)][_0x1272ce(0x177)](_0x17bd6d=>_0x17bd6d['orderId']==_0x577ab5['id']);_0x1e2eec&&(lastOrders[_0x1272ce(0x1ee)](_0x1e2eec),_0x6a1117=_0x577ab5[_0x1272ce(0x122)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x458677(0x15a)],validateOrdersState=_0x458677(0x12e),allOrdersPlaced=!![];const _0x6f4e13=new Date()[_0x458677(0xe5)](),_0x1befd2=config['ordertype']==_0x458677(0x154)?validateOrderTimeout*0x3c*0x3e8:config[_0x458677(0x9f)]*0x3c*0x3e8;if(_0x6a1117+_0x1befd2>_0x6f4e13){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x283ff7=_0x458677;validateOrders(_0x283ff7(0x162));},_0x6a1117+_0x1befd2-_0x6f4e13);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x37b753=_0x35f01f;if(!coinsLoaded){process[_0x37b753(0x198)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3c5c35=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x33c015='';if(config[_0x37b753(0x1d7)])_0x33c015='<b>'+config[_0x37b753(0x18f)]+_0x37b753(0x19b);else _0x33c015='<b>Bot\x20'+botID+_0x37b753(0x19b);const _0x5c4537=getKPIs(_0x37b753(0x219)),_0x43150c=getKPIs('fiat',config[_0x37b753(0x18d)]),_0x4ce47e=getKPIs(_0x37b753(0xe4)),_0x3eb00a=getKPIs(_0x37b753(0x163),config['fiat']);_0x33c015+=_0x37b753(0x185),_0x33c015+=_0x5c4537[_0x37b753(0x171)]+'\x20:\x20'+_0x5c4537[_0x37b753(0x1b9)]+'\x0a',_0x33c015+=_0x5c4537[_0x37b753(0xb9)]+':\x20'+_0x5c4537[_0x37b753(0x12d)]+'%\x0a',_0x33c015+=_0x43150c[_0x37b753(0x171)]+'\x20:\x20'+_0x43150c[_0x37b753(0x1b9)]+'\x0a',_0x33c015+=_0x43150c['rightTxt']+':\x20'+_0x43150c[_0x37b753(0x12d)]+'%\x0a',_0x33c015+=_0x4ce47e['leftTxt']+':\x20'+_0x4ce47e[_0x37b753(0x1b9)]+'\x20('+config['basecoin']+')\x0a',_0x33c015+=_0x4ce47e['rightTxt']+':\x20'+_0x4ce47e[_0x37b753(0x12d)]+'%\x20('+config[_0x37b753(0x219)]+')\x0a',_0x33c015+=_0x3eb00a['leftTxt']+':\x20'+_0x3eb00a[_0x37b753(0x1b9)]+'\x20('+config[_0x37b753(0x18d)]+')\x0a',_0x33c015+=_0x3eb00a[_0x37b753(0xb9)]+':\x20'+_0x3eb00a['change']+_0x37b753(0xc3)+config[_0x37b753(0x18d)]+')\x0a',_0x33c015+=_0x37b753(0x191),process[_0x37b753(0x198)]({'telegrammsg':_0x33c015},_0x3aafa7=>{});}async function sendPortfolioTelegram(){const _0x185062=_0x35f01f;if(!coinsLoaded){process[_0x185062(0x198)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x29a7e7=>{});return;}let _0x32b715='';if(config[_0x185062(0x1d7)])_0x32b715=_0x185062(0x172)+config[_0x185062(0x18f)]+_0x185062(0x213);else _0x32b715=_0x185062(0x1d1)+botID+_0x185062(0x213);_0x32b715+=_0x185062(0x185),_0x32b715+=_0x185062(0x9b),_0x32b715+=_0x185062(0x1ae),_0x32b715+='-------------------------------\x0a',currentCoins[_0x185062(0x20e)](_0x1bb49a=>{const _0x33ceee=_0x185062;_0x32b715+=_0x1bb49a[_0x33ceee(0x1f5)][_0x33ceee(0x11e)](0x7)+'|\x20'+formatPad(_0x1bb49a['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x1bb49a[_0x33ceee(0x167)],0x2,0x6)+'|\x20'+formatPad(_0x1bb49a[_0x33ceee(0x106)]*0x64,0x2,0x6)+'\x0a';}),_0x32b715+=_0x185062(0x191),process['send']({'telegrammsg':_0x32b715},_0x5abf5d=>{});}function formatPad(_0x7fca8a,_0x526994,_0xbfa69c){const _0x34a030=_0x35f01f,_0x11aa57=formatResultString(_0x7fca8a,_0x526994);return _0x11aa57?_0x11aa57[_0x34a030(0x1e2)](_0xbfa69c):''[_0x34a030(0x1e2)](_0xbfa69c);}function logHistory(_0x158a7f,_0x5f2d66,_0x221565=''){const _0x40f3d6=_0x35f01f;let _0x55600f={'time':getTimeStamp(),'type':_0x158a7f,'event':_0x5f2d66};dbLogs[_0x40f3d6(0x144)](_0x40f3d6(0x1b7))['push'](_0x55600f)[_0x40f3d6(0xa4)]();if(_0x221565=='')_0x221565=_0x5f2d66;proxyEmit(_0x40f3d6(0x21f),{'log':_0x55600f,'summary':_0x221565}),process[_0x40f3d6(0x198)]({'telegram':{..._0x55600f,'botname':config['botname'],'showname':config[_0x40f3d6(0x1d7)]}},_0x5124f7=>{}),logger[_0x40f3d6(0xd1)](''+_0x55600f['event']);}function emitHistory(_0x120e20={}){const _0x1947de=_0x35f01f;Object[_0x1947de(0xc2)](_0x120e20)[_0x1947de(0xa2)]==0x0&&(_0x120e20={'type':[_0x1947de(0xb2),'event'],'event':'','page':0x1});if(_0x120e20[_0x1947de(0xcf)][_0x1947de(0xe7)](_0x1947de(0x21f)))_0x120e20[_0x1947de(0xcf)][_0x1947de(0x12c)](_0x120e20[_0x1947de(0xcf)][_0x1947de(0xcb)](_0x1947de(0x21f)),0x1,_0x1947de(0x110),_0x1947de(0x193),_0x1947de(0xbd));if(dbLogs['has'](_0x1947de(0x1b7))['value']()){let _0x19507b=dbLogs[_0x1947de(0x144)](_0x1947de(0x1b7))[_0x1947de(0x21d)](_0x208c3d=>{const _0x277d5c=_0x1947de;if(_0x120e20[_0x277d5c(0xcf)][_0x277d5c(0xa2)]==0x0)return![];else return _0x120e20['type'][_0x277d5c(0xe7)](_0x208c3d[_0x277d5c(0xcf)]);})[_0x1947de(0x21d)](_0xd88bd5=>{const _0x7de859=_0x1947de;if(_0x120e20[_0x7de859(0x21f)]=='')return!![];else return _0xd88bd5['event'][_0x7de859(0x102)]()['includes'](_0x120e20[_0x7de859(0x21f)][_0x7de859(0x102)]());})[_0x1947de(0x1ba)](_0x1947de(0x1ab)),_0x37062e=_0x19507b['value']()[_0x1947de(0xa2)];_0x19507b=_0x19507b[_0x1947de(0x1a5)]()[_0x1947de(0x101)]((_0x120e20[_0x1947de(0x17b)]-0x1)*logPageSize,_0x120e20[_0x1947de(0x17b)]*logPageSize-0x1)['reverse']()[_0x1947de(0x1b9)](),proxyEmit(_0x1947de(0x1a9),{'logs':_0x19507b,'total':_0x37062e});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xc3479d){const _0xbc01ed=_0x35f01f;if(dbLogs[_0xbc01ed(0x1b3)](_0xbc01ed(0x1b7))[_0xbc01ed(0x1b9)]()){const _0x1b7481=dbLogs[_0xbc01ed(0x144)]('logs')[_0xbc01ed(0x1ba)](_0xbc01ed(0x1ab))[_0xbc01ed(0x21d)](_0x336d16=>{const _0x21c2f7=_0xbc01ed;return _0x336d16[_0x21c2f7(0xcf)]==_0x21c2f7(0xb2);})[_0xbc01ed(0x1b9)]();dbLogs['get'](_0xbc01ed(0x1b7))[_0xbc01ed(0x183)]()[_0xbc01ed(0xa4)](),dbLogs[_0xbc01ed(0x144)](_0xbc01ed(0x1b7))[_0xbc01ed(0x1e3)](_0x1b7481)[_0xbc01ed(0xa4)](),emitHistory(_0xc3479d);}}async function pauseBot(_0x2cd99d=''){const _0x3f144b=_0x35f01f,_0x533c26=new Date()[_0x3f144b(0xe5)]();if(!lastErrorShown||_0x533c26-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x533c26;!lastBotPause?(lastBotPause=_0x533c26,consecutivePauses=0x1):(_0x533c26-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3f144b(0x198)]({'stop':_0x3f144b(0xdc)},_0x401394=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x2cd99d)_0x2cd99d+=_0x3f144b(0x138);logHistory(_0x3f144b(0x110),_0x2cd99d+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x3f144b(0xd4)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x54b087=_0x35f01f;process['send']({'stop':_0x54b087(0x153)},_0x553cd1=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2a2cba,_0x5d9b33){const _0x5fd1e=_0x35f01f;if(_0x2a2cba['toString']()['includes']('API-key\x20format\x20invalid'))return logHistory('error',config[_0x5fd1e(0x1b5)]+_0x5fd1e(0x1a2)),![];else{if(_0x2a2cba[_0x5fd1e(0x16e)]()[_0x5fd1e(0xe7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x5fd1e(0x110),config[_0x5fd1e(0x1b5)]+_0x5fd1e(0x129)),![];else{if(_0x2a2cba[_0x5fd1e(0x16e)]()[_0x5fd1e(0xe7)](_0x5fd1e(0x16c)))return logHistory(_0x5fd1e(0x110),config[_0x5fd1e(0x1b5)]+_0x5fd1e(0x1f6)),logHistory(_0x5fd1e(0x110),_0x5fd1e(0xa1)),![];else await handleError(_0x2a2cba,_0x5d9b33);}}}async function handleError(_0x27c1a3,_0x290f7d,_0x2315aa=''){const _0x3cc95d=_0x35f01f,_0x403fd7=config[_0x3cc95d(0x1b5)]||_0x3cc95d(0xdd);if(_0x27c1a3['toString']()[_0x3cc95d(0xe7)](_0x3cc95d(0x1fa))||_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0x1fc)))await pauseBot(config['exchange']+_0x3cc95d(0x1a7));else{if(_0x27c1a3['toString']()[_0x3cc95d(0xe7)](_0x3cc95d(0x20f))||_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0x1f2)))await pauseBot(config[_0x3cc95d(0x1b5)]+'\x20not\x20available');else{if(_0x27c1a3[_0x3cc95d(0x16e)]()['includes']('RequestTimeout'))await pauseBot(config[_0x3cc95d(0x1b5)]+_0x3cc95d(0x13e));else{if(_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0x21a)))await pauseBot(config[_0x3cc95d(0x1b5)]+'\x20closed\x20the\x20connection');else{if(_0x27c1a3 instanceof ccxt[_0x3cc95d(0xde)])logger[_0x3cc95d(0xef)](_0x3cc95d(0xda),_0x27c1a3),await pauseBot(config['exchange']+'\x20network\x20error');else{if(_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0xa8)))logHistory('error',_0x290f7d+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x3cc95d(0x110),_0x3cc95d(0x1a4)),await killBot();else{if(_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0x1dc)))logHistory('error',_0x290f7d+_0x3cc95d(0x1cd)),logHistory(_0x3cc95d(0x110),_0x3cc95d(0x1a4)),await killBot();else{if(_0x27c1a3[_0x3cc95d(0x16e)]()['includes'](_0x3cc95d(0x17d)))logHistory(_0x3cc95d(0x110),_0x290f7d+_0x3cc95d(0x138)+config['exchange']+_0x3cc95d(0x220)),logHistory('error',_0x3cc95d(0x1a4)),await killBot();else{if(_0x27c1a3[_0x3cc95d(0x16e)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3cc95d(0x110),_0x290f7d+_0x3cc95d(0x138)+config['exchange']+_0x3cc95d(0xb5)),logHistory(_0x3cc95d(0x110),_0x3cc95d(0x1a4)),await killBot();else{if(_0x27c1a3[_0x3cc95d(0x16e)]()['includes'](_0x3cc95d(0x16c)))logHistory(_0x3cc95d(0x110),_0x290f7d+_0x3cc95d(0x138)+config[_0x3cc95d(0x1b5)]+_0x3cc95d(0x1a3)),logHistory(_0x3cc95d(0x110),_0x3cc95d(0x1a4)),await killBot();else{if(_0x27c1a3[_0x3cc95d(0x16e)]()[_0x3cc95d(0xe7)](_0x3cc95d(0x1f7)))logHistory('error',_0x290f7d+_0x3cc95d(0xe8)+_0x2315aa);else _0x27c1a3 instanceof ccxt[_0x3cc95d(0x21c)]?(logger[_0x3cc95d(0xef)]('Uncaught\x20ExchangeError:',_0x27c1a3),logHistory('error',_0x290f7d+_0x3cc95d(0x138)+config[_0x3cc95d(0x1b5)]+_0x3cc95d(0x108))):(logger['full'](_0x290f7d+_0x3cc95d(0x225),_0x27c1a3),await pauseBot(_0x3cc95d(0x1ec)));}}}}}}}}}}}function formatResult(_0x3b6f2b,_0x8739c1){const _0x5317a2=_0x35f01f;return parseFloat(_0x3b6f2b[_0x5317a2(0xf7)](_0x8739c1));}function _0x27bf(_0x5339c3,_0x423d11){const _0x280ab1=_0x3ec3();return _0x27bf=function(_0x59d5de,_0x5c0db9){_0x59d5de=_0x59d5de-0x9b;let _0x3ec3e0=_0x280ab1[_0x59d5de];return _0x3ec3e0;},_0x27bf(_0x5339c3,_0x423d11);}function formatResultTruncate(_0x26cc7e,_0x790543){const _0x2432ac=_0x35f01f;let _0x2f19c0=formatResultString(_0x26cc7e,0xa),_0x391fc4=_0x2f19c0[_0x2432ac(0xcb)]('.');return _0x391fc4!=-0x1&&(_0x2f19c0=_0x2f19c0[_0x2432ac(0x101)](0x0,_0x391fc4+_0x790543+0x1)),Number(_0x2f19c0);}function formatResultString(_0x51704f,_0x41e2f8){const _0x2ee4f0=_0x35f01f;let _0x2c54b6;if(!(''+_0x51704f)[_0x2ee4f0(0xe7)]('e'))_0x2c54b6=+(Math[_0x2ee4f0(0x1d9)](_0x51704f+'e+'+_0x41e2f8)+'e-'+_0x41e2f8);else{let _0x1ce8bc=(''+_0x51704f)[_0x2ee4f0(0x197)]('e'),_0x49ddd0='';+_0x1ce8bc[0x1]+_0x41e2f8>0x0&&(_0x49ddd0='+'),_0x2c54b6=+(Math[_0x2ee4f0(0x1d9)](+_0x1ce8bc[0x0]+'e'+_0x49ddd0+(+_0x1ce8bc[0x1]+_0x41e2f8))+'e-'+_0x41e2f8);}return Number(_0x2c54b6)['toFixed'](_0x41e2f8);}function getServerTime(){const _0x544ae4=_0x35f01f,_0x3b0671=new Date();return _0x3b0671[_0x544ae4(0x1f4)]()+'/'+(_0x3b0671[_0x544ae4(0x181)]()+0x1)[_0x544ae4(0x16e)]()[_0x544ae4(0x1e2)](0x2,'0')+'/'+_0x3b0671[_0x544ae4(0x1d8)]()[_0x544ae4(0x16e)]()['padStart'](0x2,'0')+'\x20'+_0x3b0671['getHours']()[_0x544ae4(0x16e)]()[_0x544ae4(0x1e2)](0x2,'0')+':'+_0x3b0671['getMinutes']()[_0x544ae4(0x16e)]()[_0x544ae4(0x1e2)](0x2,'0')+':'+_0x3b0671['getSeconds']()[_0x544ae4(0x16e)]()[_0x544ae4(0x1e2)](0x2,'0');}function getTimeStamp(){const _0x51bcc7=_0x35f01f,_0x5eb2b0=shiftedTime();return _0x5eb2b0[_0x51bcc7(0x1f4)]()+'/'+(_0x5eb2b0[_0x51bcc7(0x181)]()+0x1)[_0x51bcc7(0x16e)]()['padStart'](0x2,'0')+'/'+_0x5eb2b0[_0x51bcc7(0x1d8)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5eb2b0['getHours']()['toString']()[_0x51bcc7(0x1e2)](0x2,'0')+':'+_0x5eb2b0[_0x51bcc7(0x204)]()['toString']()[_0x51bcc7(0x1e2)](0x2,'0')+':'+_0x5eb2b0[_0x51bcc7(0x1b4)]()[_0x51bcc7(0x16e)]()[_0x51bcc7(0x1e2)](0x2,'0');}function getDate(){const _0x42fe7b=_0x35f01f,_0x3c00bb=shiftedTime();return _0x3c00bb['getFullYear']()+'/'+(_0x3c00bb[_0x42fe7b(0x181)]()+0x1)[_0x42fe7b(0x16e)]()[_0x42fe7b(0x1e2)](0x2,'0')+'/'+_0x3c00bb[_0x42fe7b(0x1d8)]()[_0x42fe7b(0x16e)]()[_0x42fe7b(0x1e2)](0x2,'0');}function getHour(){const _0x4784df=_0x35f01f,_0x393b9d=shiftedTime();return _0x393b9d['getHours']()[_0x4784df(0x16e)]()[_0x4784df(0x1e2)](0x2,'0');}function sleep(_0x46bee){return new Promise(_0x399906=>setTimeout(_0x399906,_0x46bee));}function shiftedTime(){const _0x5c2544=_0x35f01f,_0x4a8181=new Date();let _0x6cfab8=_0x4a8181;if(config&&config['timeshift']!==0x0)_0x6cfab8=fns[_0x5c2544(0xe0)](_0x4a8181,{'hours':config[_0x5c2544(0x12f)]});return _0x6cfab8;}function timer(_0x1b21b6){const _0x3da9b6=_0x35f01f,_0x5102d7=new Date();!lasttime?console[_0x3da9b6(0xea)](getTimeStamp()+_0x3da9b6(0x112),_0x1b21b6,_0x5102d7):console[_0x3da9b6(0xea)](getTimeStamp()+_0x3da9b6(0x112),_0x1b21b6,(_0x5102d7-lasttime)/0x3e8),lasttime=_0x5102d7;}