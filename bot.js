const _0x1e290f=_0x5944;(function(_0x49c522,_0x47248d){const _0x2badc2=_0x5944,_0x1d9781=_0x49c522();while(!![]){try{const _0x1e40ce=-parseInt(_0x2badc2(0x1f0))/0x1+-parseInt(_0x2badc2(0xa2))/0x2+parseInt(_0x2badc2(0x1d1))/0x3+parseInt(_0x2badc2(0x1f6))/0x4+-parseInt(_0x2badc2(0x134))/0x5*(parseInt(_0x2badc2(0x143))/0x6)+-parseInt(_0x2badc2(0xb1))/0x7+parseInt(_0x2badc2(0xdd))/0x8;if(_0x1e40ce===_0x47248d)break;else _0x1d9781['push'](_0x1d9781['shift']());}catch(_0x501a98){_0x1d9781['push'](_0x1d9781['shift']());}}}(_0x55bd,0xb263a));const _0x58d7a5=function(){let _0x60ba2b=!![];return function(_0x81241b,_0x3cf4de){const _0x6c6473=_0x60ba2b?function(){const _0x45c9ca=_0x5944;if(_0x3cf4de){const _0x3b8f42=_0x3cf4de[_0x45c9ca(0x211)](_0x81241b,arguments);return _0x3cf4de=null,_0x3b8f42;}}:function(){};return _0x60ba2b=![],_0x6c6473;};}(),_0x4a1db8=_0x58d7a5(this,function(){const _0x486869=_0x5944;return _0x4a1db8[_0x486869(0x204)]()[_0x486869(0x1e7)](_0x486869(0x13d))[_0x486869(0x204)]()[_0x486869(0x17d)](_0x4a1db8)[_0x486869(0x1e7)](_0x486869(0x13d));});_0x4a1db8();'use strict';const ccxt=require(_0x1e290f(0x1bb)),low=require(_0x1e290f(0x9d)),FileSync=require(_0x1e290f(0xf0)),fs=require('fs'),fns=require(_0x1e290f(0x120)),forge=require(_0x1e290f(0xd3)),util=require(_0x1e290f(0x160)),argv=require(_0x1e290f(0x205))(process[_0x1e290f(0x19b)]['slice'](0x2))[_0x1e290f(0x19b)],path=require(_0x1e290f(0x1ec)),axios=require(_0x1e290f(0x124));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1e290f(0x202),'BUSD',_0x1e290f(0x24a),_0x1e290f(0x22f),_0x1e290f(0xcc),_0x1e290f(0x14c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1e290f(0x15b)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1e290f(0xb6)+pauseBotInterval/0xea60+_0x1e290f(0x224),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x4;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require(_0x1e290f(0x20f))[_0x1e290f(0x1a3)]||_0x1e290f(0x209),botID=process[_0x1e290f(0x19b)][0x2]||_0x1e290f(0xa0),pattern=/^[0-9]{3}$/;!pattern[_0x1e290f(0x1df)](botID)&&(console[_0x1e290f(0xe4)]('Error:\x20Invalid\x20argument\x20'+botID+_0x1e290f(0x98)),killBot());const userID=process[_0x1e290f(0x19b)][0x3]||'',configpath=userID?_0x1e290f(0xcf)+userID+'/':_0x1e290f(0xcf),logspath=userID?_0x1e290f(0x115)+userID+'/':'./logs/',loggerfile=fs[_0x1e290f(0x208)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x1e290f(0xf5)](configpath);!fs[_0x1e290f(0x165)](logspath)&&fs[_0x1e290f(0xf5)](logspath);const configfile=configpath+'bot-'+botID+_0x1e290f(0x113),logfile=configpath+_0x1e290f(0x1ad)+botID+_0x1e290f(0x1b1),performancefile=configpath+_0x1e290f(0x1ad)+botID+_0x1e290f(0x13e),coinresultsfile=configpath+_0x1e290f(0x1ad)+botID+'-results.json',settingsfile=configpath+_0x1e290f(0x102),securefile=configpath+_0x1e290f(0x141),configbackuppath=configpath+_0x1e290f(0x11f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1e290f(0xf3)]({'logs':[],'version':serverversion})[_0x1e290f(0x197)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1e290f(0xf3)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1e290f(0xf3)]({'bot':[],'version':serverversion})[_0x1e290f(0x197)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x1e290f(0x197)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2b0e8b=>{const _0x33e4e6=_0x1e290f;console[_0x33e4e6(0xe4)](_0x2b0e8b);},'simple':_0x346b73=>{const _0x2ced5a=_0x1e290f;console[_0x2ced5a(0xe4)](_0x346b73),loggerfile[_0x2ced5a(0x197)](util[_0x2ced5a(0x1d4)](_0x346b73)+'\x0a');},'full':async(_0x14c23c,_0x40fab='')=>{const _0x35c45d=_0x1e290f;let _0x45c312;if(config[_0x35c45d(0x25f)])_0x45c312=getTimeStamp()+':\x20'+config[_0x35c45d(0x18a)]+_0x35c45d(0x1a8)+_0x14c23c;else _0x45c312=getTimeStamp()+_0x35c45d(0x20d)+botID+_0x35c45d(0x1a8)+_0x14c23c;console[_0x35c45d(0xe4)](_0x45c312),loggerfile['write'](util[_0x35c45d(0x1d4)](_0x45c312)+'\x0a'),_0x40fab&&(console[_0x35c45d(0xe4)](_0x40fab),loggerfile['write'](util[_0x35c45d(0x1d4)](_0x40fab)+'\x0a'));},'debug':async(_0x1e2445,_0x50d0b1='')=>{const _0xbcfde2=_0x1e290f;let _0xc3db19;if(config['showname'])_0xc3db19=getTimeStamp()+':\x20'+config[_0xbcfde2(0x18a)]+_0xbcfde2(0x206)+_0x1e2445;else _0xc3db19=getTimeStamp()+_0xbcfde2(0x20d)+botID+_0xbcfde2(0x206)+_0x1e2445;if(debugging)console[_0xbcfde2(0xe4)](_0xc3db19);loggerfile[_0xbcfde2(0x197)](util['format'](_0xc3db19)+'\x0a');if(_0x50d0b1){if(debugging)console['log'](_0x50d0b1);loggerfile['write'](util[_0xbcfde2(0x1d4)](_0x50d0b1)+'\x0a');}}};process['on']('uncaughtException',function(_0xba3305){const _0x4e73cf=_0x1e290f;handleError(_0xba3305,_0x4e73cf(0x22a));});settings[_0x1e290f(0x1d6)]!=config[_0x1e290f(0x1d6)]&&updateTimeshift(settings[_0x1e290f(0x1d6)]);settings[_0x1e290f(0x25d)]!=config[_0x1e290f(0x25d)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x1e290f(0x217)]&&!config['marketcapApi']||!settings[_0x1e290f(0x217)]&&config[_0x1e290f(0x217)])&&updateMarketcapApi(settings[_0x1e290f(0x217)]);process[_0x1e290f(0x255)]({'started':_0x1e290f(0x1d0)},_0xaa9e2=>{}),initializeProcessListeners();function proxyEmit(_0x87a81b,_0x2ea0e4=null){const _0x46646c=_0x1e290f;process[_0x46646c(0x255)]({'function':_0x87a81b,'args':_0x2ea0e4},_0xd23876=>{});}function initializeProcessListeners(){const _0x71648a=_0x1e290f;process['on'](_0x71648a(0x216),_0x1da6b3=>{const _0x3b20fc=_0x71648a;switch(Object[_0x3b20fc(0x159)](_0x1da6b3)[0x0]){case _0x3b20fc(0x1d6):_0x1da6b3[_0x3b20fc(0x1d6)]!=undefined&&(settings[_0x3b20fc(0x1d6)]=_0x1da6b3['timeshift'],updateTimeshift(settings[_0x3b20fc(0x1d6)]));break;case'onepagemode':_0x1da6b3['onepagemode']!=undefined&&(settings[_0x3b20fc(0x25d)]=_0x1da6b3['onepagemode'],updateOnepagemode(settings[_0x3b20fc(0x25d)]));break;case _0x3b20fc(0x217):_0x1da6b3[_0x3b20fc(0x217)]!=undefined&&(settings[_0x3b20fc(0x217)]=_0x1da6b3[_0x3b20fc(0x217)],updateMarketcapApi(settings[_0x3b20fc(0x217)]));break;case _0x3b20fc(0x1f7):_0x1da6b3[_0x3b20fc(0x1f7)]!=undefined&&(bots=JSON['parse'](_0x1da6b3[_0x3b20fc(0x1f7)]),proxyEmit(_0x3b20fc(0x1f7),bots));break;case _0x3b20fc(0x1e6):switch(_0x1da6b3['function']){case _0x3b20fc(0x1ee):initclient();break;case _0x3b20fc(0x170):toggleBotMode();break;case _0x3b20fc(0x116):emitHistory(_0x1da6b3['args']);break;case _0x3b20fc(0x19c):deleteHistoryAlerts(_0x1da6b3[_0x3b20fc(0x253)]);break;case _0x3b20fc(0x257):getPortfolio(_0x1da6b3[_0x3b20fc(0x253)]);break;case _0x3b20fc(0x237):storeConfiguration(_0x1da6b3[_0x3b20fc(0x253)]);break;case _0x3b20fc(0x12e):storeHeadless(_0x1da6b3['args']);break;case _0x3b20fc(0x14d):storeFiat(_0x1da6b3[_0x3b20fc(0x253)]);break;case _0x3b20fc(0x11a):resetHistory();break;case _0x3b20fc(0x1f3):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1da6b3[_0x3b20fc(0x253)]);break;case _0x3b20fc(0xba):cancelLoading();break;case _0x3b20fc(0x16c):showConfig();break;case _0x3b20fc(0xa8):sendMetricsTelegram();break;case _0x3b20fc(0x1af):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x4155ae=![]){const _0x18663b=_0x1e290f;logger[_0x18663b(0x1cc)](_0x18663b(0x232)+(_0x4155ae?_0x18663b(0x161):_0x18663b(0x1e0))+'\x20|\x20exchange:\x20'+config[_0x18663b(0x1c4)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4155ae)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x18663b(0xd7)]!=''&&config['apiKey']!=_0x18663b(0x162)){loadingProgress=0x0;_0x4155ae&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x18663b(0x201),emittedConfiguration()),initialPerformanceStored=![]);const _0x44260e=await getCoins();[currentCoins,currentCoinsAll]=_0x44260e,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x18663b(0x1d8)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x18663b(0x15c)]==0x0&&allOpenOrders[_0x18663b(0x15c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x580392=![]){const _0xd5fb49=_0x1e290f;logger[_0xd5fb49(0x1cc)](_0xd5fb49(0x244)+(_0x580392?_0xd5fb49(0x25c):_0xd5fb49(0x1e2))+_0xd5fb49(0x195)+config[_0xd5fb49(0x1c4)]);if(pidBalances)clearTimeout(pidBalances);if(_0x580392){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!='***'){loadingProgress=0x1;const _0x501134=await getCoins();[currentCoins,currentCoinsAll]=_0x501134,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xd5fb49(0x1cc)](_0xd5fb49(0x1d8)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0xd5fb49(0x15c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x47a7aa){const _0x3df92e=_0x1e290f;let _0x15d4d8=![];if(_0x47a7aa)_0x15d4d8=!![];let _0x36b3ee;_0x15d4d8?_0x36b3ee=_0x47a7aa[_0x3df92e(0x131)](_0x3220e7=>_0x3220e7[_0x3df92e(0x1c6)]):_0x36b3ee=currentCoinsAll[_0x3df92e(0x131)](_0x56e61e=>_0x56e61e['coin']);if(!config[_0x3df92e(0x217)]||!_0x15d4d8&&!config[_0x3df92e(0x146)]||_0x36b3ee['length']==0x0)return;let _0x809f78=null;try{_0x809f78=await axios[_0x3df92e(0x11b)](_0x3df92e(0xd0),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3df92e(0x217)]},'params':{'symbol':_0x36b3ee[_0x3df92e(0x204)]()}});}catch(_0x33ac57){_0x809f78=null,_0x33ac57[_0x3df92e(0x204)]()[_0x3df92e(0x1d7)](_0x3df92e(0x1a0))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x3df92e(0x201),emittedConfiguration()),logHistory(_0x3df92e(0x174),_0x3df92e(0x1c1))):(logHistory(_0x3df92e(0x174),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x3df92e(0x224)),logger[_0x3df92e(0x1cc)](_0x3df92e(0x1b5),_0x33ac57[_0x3df92e(0x204)]()+_0x3df92e(0x207)+_0x33ac57[_0x3df92e(0xa6)]));}if(_0x809f78){let _0xc912b6=0x0;const _0x2dab46=_0x809f78['data'];_0x36b3ee[_0x3df92e(0x20a)](_0x23a35a=>{const _0x180eda=_0x3df92e;if(_0x2dab46[_0x180eda(0x233)][_0x23a35a][0x0])_0xc912b6+=_0x2dab46[_0x180eda(0x233)][_0x23a35a][0x0][_0x180eda(0x1b9)][_0x180eda(0x202)][_0x180eda(0xd1)];}),_0x36b3ee[_0x3df92e(0x20a)](_0x4dc6c0=>{const _0x1a3b74=_0x3df92e,_0x418f4a=_0x2dab46[_0x1a3b74(0x233)][_0x4dc6c0][0x0]?_0x2dab46[_0x1a3b74(0x233)][_0x4dc6c0][0x0][_0x1a3b74(0x1b9)][_0x1a3b74(0x202)][_0x1a3b74(0xd1)]:0x0;if(_0x15d4d8){const _0x5157ca=_0x47a7aa[_0x1a3b74(0xc3)](_0xd5875b=>_0xd5875b[_0x1a3b74(0x1c6)]==_0x4dc6c0);_0x5157ca&&(_0x5157ca['marketcap']=_0x418f4a);}else{const _0x3ef15f=currentCoins[_0x1a3b74(0xc3)](_0x362328=>_0x362328[_0x1a3b74(0x1c6)]==_0x4dc6c0);_0x3ef15f&&(_0x3ef15f['marketcap']=_0x418f4a);const _0x396a80=currentCoinsAll['find'](_0x223216=>_0x223216[_0x1a3b74(0x1c6)]==_0x4dc6c0);_0x396a80&&(_0x396a80['marketcap']=_0x418f4a);}}),!_0x15d4d8&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3f3446=_0x1e290f,_0x3e5049=0x2;let _0xae40d=0x0,_0x45795d=0x0,_0x33f320=0x0,_0x218233=0x0,_0x5d8445=0x0;config[_0x3f3446(0x22d)][_0x3f3446(0x20a)](_0x302765=>{const _0x436cf5=_0x3f3446;if(!_0x302765[_0x436cf5(0x266)]){_0x33f320++,_0xae40d+=_0x302765[_0x436cf5(0x142)];if(_0x302765[_0x436cf5(0x142)]===-0x1){_0xae40d++;const _0x217df8=currentCoinsAll[_0x436cf5(0xc3)](_0x256607=>_0x256607[_0x436cf5(0x1c6)]==_0x302765[_0x436cf5(0x1c6)]);_0x217df8&&(_0x218233+=_0x217df8[_0x436cf5(0x256)],_0x5d8445+=Math[_0x436cf5(0x198)](_0x217df8[_0x436cf5(0x256)]));}if(_0x302765[_0x436cf5(0x142)]!==-0x1)_0x45795d++;}});let _0xabc762;const _0x6b0f41=0x64-_0xae40d,_0x4b71b2=_0x33f320-_0x45795d;_0xabc762=_0x4b71b2===0x0?_0xae40d:Math[_0x3f3446(0x18e)](0x64,_0xae40d),config['portfolio'][_0x3f3446(0x20a)](_0x242a22=>{const _0x4779fc=_0x3f3446,_0x33bd75=currentCoinsAll[_0x4779fc(0xc3)](_0x5d5b7a=>_0x5d5b7a[_0x4779fc(0x1c6)]==_0x242a22[_0x4779fc(0x1c6)]);_0x33bd75&&(_0x242a22[_0x4779fc(0x256)]=_0x33bd75[_0x4779fc(0x256)]);if(!_0x242a22['excluded']){if(_0xabc762<=0x64){if(_0x242a22[_0x4779fc(0x142)]===-0x1){if(_0x218233!==0x0&&config[_0x4779fc(0x146)]){if(_0x33bd75){if(config[_0x4779fc(0x146)]==_0x4779fc(0x256))_0x242a22[_0x4779fc(0x199)]=(_0x6b0f41/(_0x218233/_0x33bd75[_0x4779fc(0x256)]))['toFixed'](_0x3e5049);else config[_0x4779fc(0x146)]==_0x4779fc(0x15a)&&(_0x242a22[_0x4779fc(0x199)]=(_0x6b0f41/(_0x5d8445/Math['sqrt'](_0x33bd75['marketcap'])))['toFixed'](_0x3e5049));}}}}}}),updateConfig();}function updateConfig(){const _0x3d84a7=_0x1e290f;let _0x34f535=dbConfig[_0x3d84a7(0x11b)]('bot')['find']({'botID':botID})['value']();_0x34f535&&dbConfig['get']('bot')[_0x3d84a7(0xc3)]({'botID':botID})['assign'](config)[_0x3d84a7(0x197)]();}function logMemory(){const _0x50e3bb=_0x1e290f;if(environment!=_0x50e3bb(0x1eb))return;const _0x5e53cc=process[_0x50e3bb(0x17b)]()['heapUsed']/0x400/0x400;logger[_0x50e3bb(0x1cc)](_0x50e3bb(0x16d)+process[_0x50e3bb(0xe5)]+_0x50e3bb(0x1ba)+formatResult(_0x5e53cc,0x1)+_0x50e3bb(0x1de));}async function startScheduler(){const _0xf0750=_0x1e290f,_0x48825e=shiftedTime()[_0xf0750(0xae)]();getMarketCap(),_0x48825e==0x1&&logMemory(),(_0x48825e==0x2||_0x48825e==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1c060c=![]){const _0x4a8990=_0x1e290f;logger[_0x4a8990(0x1cc)](_0x4a8990(0xb7));if(!_0x1c060c)while(lockOrders!=ORDERS[_0x4a8990(0xbc)]||coolingDown){await sleep(0x3e8);}process[_0x4a8990(0x255)]({'stop':_0x4a8990(0x251)},_0x502665=>{});}async function initExchange(_0x2504b4=config[_0x1e290f(0x1c4)],_0x275db8=config[_0x1e290f(0xd7)],_0xacba4=config[_0x1e290f(0x118)],_0x2c71b1=config[_0x1e290f(0x12c)]){const _0x38deac=_0x1e290f;if(exchange){logger[_0x38deac(0x1cc)](_0x38deac(0x228));return;}logger[_0x38deac(0x1cc)]('Initializing\x20exchange');!supportedExchanges()[_0x38deac(0x1d7)](_0x2504b4)&&(logHistory(_0x38deac(0x174),_0x38deac(0x1ce)+_0x2504b4+_0x38deac(0x13b)),killBot());const _0x51cc0f=ccxt[_0x38deac(0xdc)][_0x2504b4[_0x38deac(0x19a)]()];exchange=new _0x51cc0f({'apiKey':_0x275db8,'secret':_0xacba4,'options':{'defaultType':'spot'}});if(_0x2c71b1)exchange[_0x38deac(0x108)]=_0x2c71b1;}function _0x55bd(){const _0x4267a5=['usd','initial','initTickers()','push','password','request-time','Invalid\x20balance\x20for\x20','shift','colorscheme','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','PermissionDenied','writeFile','page','MIN_NOTIONAL','must\x20be\x20greater\x20than\x20minimum\x20amount','-config.json','RETRY\x20-\x20Error\x20in\x20','./logs/','emitHistory','buy','apiSecret','exchanges','resetHistory','get','\x20|\x20lock\x20orders:\x20','2\x20-\x20Validate\x20orders:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','/backup/','date-fns','Portfolio\x20change\x20detected:\x20','fees','fetchTickers()','axios','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','InsufficientFunds','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Unknown\x20error\x20-\x20check\x20logs','0\x20-\x20EXECUTION:\x20','Market','Huobi','apiPassword','\x20portfolio:</b>\x20\x0a\x0a','storeHeadless','pki','getTime','map','%\x20(','1\x20-\x20FILLED\x20unknown\x20order:\x20','22520sqhbmy','<b>Bot\x20','token\x20is\x20expired','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','openOrders','2\x20-\x20Orders\x20unlocked','total','\x20exchange','unlinkSync','(((.+)+)+)+$','-performance.json','abs','cost','bb-secure.json','slider','1062iXuxiF','market','trade','marketcapEnabled','warning','\x20change','red_yellow_blue','Trigger:\x20','leftTxt','USDP','storeFiat','netoffset','change','1\x20-\x20Validate\x20orders:\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Initializing\x20coin\x20results','sells','/USDT','Order\x20amount\x20is\x20invalid:\x20','slice','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Limit\x20(low-margin)','keys','marketcapsqrt','freeze','length','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Net\x20effect','util','exchange\x20reload','***','type',':\x20timer\x20>','existsSync','Invalid\x20quantity','Cryptocom','breakeven','Cex','yyyy/MM/dd','cloneDeep','showConfig','process\x20','2.3.5','logs','toggleBotMode','stringify','InvalidOrder','average','error','success','\x20|\x20','orderstatus','BNB/','InvalidNonce','reverse','memoryUsage','Fee\x20discount\x20refund\x20detected:\x20','constructor','botID','has','number','UNLOCKING','\x20has\x20a\x2024h\x20drop\x20of\x20','portfolio1','timestamp','net-basecoin','\x20/\x20','ORDERS.LOCKED','event','added','botname','2\x20-\x20Handled\x20open\x20orders','switch-manual','ExchangeError','max','headless','filter','delta','DDoSProtection','canceled','price',')\x20|\x20exchange:\x20','\x20metrics:</b>\x20\x0a\x0a','write','sqrt','distribution','toLowerCase','argv','deleteHistoryAlerts','\x20|\x20Custom\x20ID:\x20','amount','join','status\x20code\x20401','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','splice','environment','bot','EUR','createOrder','Error\x20details\x20(1):','\x20>\x20','parse','Block\x20transaction\x20detection:\x20','add','performance','bot-','\x20API\x20key\x20is\x20invalid','sendPortfolioTelegram','Error\x20while\x20deleting\x20files:\x20','-events.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','sell','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Error\x20details:','Bot\x20','random','fetchBalance()','quote','\x20uses\x20','ccxt','last','coins','rightTxt','update-liquidity','2.6.22','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','fee','privateKey','exchange','watchTrades','coin','Error\x20in\x20loadSymbols():\x20','coin-loading-progress','startprice','change24h','final','debug','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','remainingSymbols','running','4102653xINGiK','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','bid','format','\x20hour','timeshift','includes','Loading\x20completed','timeout','getMinutes','assign','1\x20-\x20Unlocking\x20orders','value','\x20MB','test','no\x20exchange\x20reloaded','open','complete','ask','\x20API\x20secret\x20is\x20invalid','recent20','function','search','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','Loading\x20symbols','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','staging','path','getDate','initclient','starting-balance-','798783aSDdGz','ETH','Order\x20filled:\x20','getStartingBalances','OnMaintenance','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','942388WqLjtt','bots','portfolio2','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startnumber','toUpperCase','time','privateKeyFromPem','amountToPrecision','getMonth','1\x20-\x20Handle\x20open\x20orders','configuration','USD','autoliquidity','toString','yargs/yargs','\x20>\x20[DEBUG]\x20','\x20-\x20','createWriteStream','production','forEach','.json','\x20:\x20',':\x20Bot\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','./version.json','event-history','apply','emojisell','min','closed','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','message','marketcapApi','customId','Resetting\x20bot\x20history','Unfilled\x20order(s)\x20canceled\x20after\x20','sortBy','Invalid\x20symbol:\x20','sort','cancelOrders()','RateLimitExceeded','net-fiat','isEqual','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','side','\x20minutes','filled','Insufficient\x20funds\x20to\x20execute\x20order:\x20','2.5.0','Initializing\x20exchange:\x20already\x20done','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','uncaughtException','Binance','indexOf','portfolio','Bitget','USDT','substring','percentage','Reset\x20|\x20','data','Waited\x20','decode64','Network\x20error\x20details:','storeConfiguration','basecoinvalue','active','buys','offset','Stopped\x20fetching\x20balance\x20after\x20','\x20order:\x20','date','ExchangeNotAvailable','BNB','OrderNotFound','set','enableFiatToggle','Resuming\x20(','Pausing\x20for\x20','enabled','recreate','full','watchOrders','TUSD','startdate','\x20minutes\x20-\x20','cooldown','<b>','\x20orders\x20in\x20less\x20than\x20','padStart','restart','status','args','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','send','marketcap','getPortfolio','\x20>\x20details:','getCoinNumber()','Exchange','padEnd','quick','onepagemode','emojibuy','showname','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fiat','entries','Valid\x20balance\x20for\x20','watchTrades()','removed','excluded','toFixed','getSeconds','orderId','progress','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Bybit',',\x20must\x20be\x20a\x203\x20digit\x20number','cancelOrder','replace','kill','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','lowdb','pop','LOCKED','001','Executed\x20','1592032kQXPVy','/EUR','AuthenticationError','round','code','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','sendMetricsTelegram','symbol','balances','fetchTicker','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','getHours','order','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','265979RrKWry','sha256','NetworkError','liquidity','remove','\x20>\x20pausing\x20bot\x20for\x20','Initiating\x20bot\x20restart','2.6.0','highest','cancelLoading','\x20network\x20error:\x20','UNLOCKED','Limit\x20(high-margin)','-------------------------------\x0a','configuration-stored','cancel','BTC','currency','find','limits','getFullYear','spot','\x20|\x20highest\x20fee:\x20','RequestTimeout','limit-high','detectLiquidityChange()','fetchOpenOrders','USDC','no\x20open\x20orders','-results.json','./config/','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','market_cap','threshold','node-forge','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','watchTradesForSymbols','Symbol(s):\x20','apiKey','No\x20more\x20open\x20orders\x20-\x20','valid','exec','fetchBalance','pro','12460304LCmpxF','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','target','differenceInSeconds','</pre>','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','limit-low','log','pid','version','PAXG','none','ORDERS.UNLOCKED','eur','create','ordertype','datetime','Error\x20in\x20testAPI():\x20','settings','lowdb/adapters/FileSync','watchTradesForSymbols()','floor','defaults','Headless:\x20','mkdirSync','fromCodePoint','2\x20-\x20handling\x20FILLED\x20order:\x20','changes','************','1\x20-\x20FILLED\x20known\x20order:\x20','split','<pre>','Failed\x20to\x20load\x20coin\x20data\x20for\x20','basecoin','limit','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Order\x20is\x20invalid:\x20','bb-settings.json','realized'];_0x55bd=function(){return _0x4267a5;};return _0x55bd();}function updateExchange(_0x126ae8,_0x5b9725,_0x5d90ff=null){const _0x229a14=_0x1e290f;exchange[_0x229a14(0xd7)]=_0x126ae8,exchange[_0x229a14(0x118)]=_0x5b9725,exchange['apiPassword']=_0x5d90ff,logger['debug'](_0x229a14(0x151));}function setStableCoins(){const _0x26bafa=_0x1e290f;let _0x2d6ed9=config[_0x26bafa(0xfe)]==_0x26bafa(0x1f1)?_0x26bafa(0x1f1):config[_0x26bafa(0xfe)]=='PAXG'?_0x26bafa(0xe7):_0x26bafa(0xc1),_0x23a0fb=allSymbols[_0x26bafa(0x1d7)](_0x2d6ed9+'/USD')?_0x26bafa(0x202):allSymbols['includes'](_0x2d6ed9+_0x26bafa(0x154))?_0x26bafa(0x22f):_0x26bafa(0x1a5),_0x2a8ec2=allSymbols['includes'](_0x2d6ed9+_0x26bafa(0xa3))?_0x26bafa(0x1a5):_0x23a0fb;enableFiatToggle=!![],_0x23a0fb=='EUR'&&(enableFiatToggle=![],storeFiat(_0x26bafa(0x1a5))),_0x2a8ec2!='EUR'&&(enableFiatToggle=![],storeFiat(_0x26bafa(0x202))),stablecoins={'eur':{'coin':''+_0x2d6ed9+_0x2a8ec2,'symbol':_0x2d6ed9+'/'+_0x2a8ec2},'usd':{'coin':''+_0x2d6ed9+_0x23a0fb,'symbol':_0x2d6ed9+'/'+_0x23a0fb}};}async function initwsCcxt(){const _0x171903=_0x1e290f;initCycle++;const _0x1d947f=initCycle;let _0x2be669=[];config[_0x171903(0x22d)][_0x171903(0x20a)](_0x2ac654=>{const _0x50eb2f=_0x171903;if(!_0x2ac654[_0x50eb2f(0x266)]&&_0x2ac654['coin']!=config['basecoin'])_0x2be669[_0x50eb2f(0x107)](_0x2ac654[_0x50eb2f(0xa9)]);});if(!_0x2be669[_0x171903(0x1d7)](stablecoins[_0x171903(0xea)][_0x171903(0xa9)]))_0x2be669[_0x171903(0x107)](stablecoins[_0x171903(0xea)]['symbol']);if(!_0x2be669[_0x171903(0x1d7)](stablecoins[_0x171903(0x104)][_0x171903(0xa9)]))_0x2be669[_0x171903(0x107)](stablecoins[_0x171903(0x104)][_0x171903(0xa9)]);if(config['exchange']['startsWith'](_0x171903(0x22b))&&config[_0x171903(0xfe)]!=_0x171903(0xe7)){if(!_0x2be669[_0x171903(0x1d7)](_0x171903(0x178)+config[_0x171903(0xfe)]))_0x2be669[_0x171903(0x107)](_0x171903(0x178)+config[_0x171903(0xfe)]);}loadCoins(_0x2be669),_0x2be669=validateSymbols(_0x2be669);const _0x4f2732=async _0x13d3df=>{const _0x17a893=_0x171903;let _0x5b2a6a;try{const _0x5cdbef=await getTickers(_0x13d3df);Object[_0x17a893(0x262)](_0x5cdbef)[_0x17a893(0x20a)](_0x470e67=>{const _0x2ce36c=_0x17a893;_0x5b2a6a=_0x470e67[0x1][_0x2ce36c(0xa9)],gTicker[noslash(_0x5b2a6a)]=_0x470e67[0x1][_0x2ce36c(0x1bc)],gChange[_0x5b2a6a]=_0x470e67[0x1][_0x2ce36c(0x231)];});}catch(_0x54567f){await handleError(_0x54567f,_0x17a893(0x106),_0x5b2a6a);}},_0x163ccd=async _0x5b272b=>{const _0x5eb174=_0x171903;while(initCycle==_0x1d947f){if(!botPaused)try{const _0x34feb5=await exchange[_0x5eb174(0x1c5)](_0x5b272b);gTicker[noslash(_0x34feb5[0x0][_0x5eb174(0xa9)])]=_0x34feb5[0x0]['price'];}catch(_0x52cd81){if(!exchangeStopped)await handleError(_0x52cd81,_0x5eb174(0x264),_0x5b272b);}else await sleep(0x64);}},_0xfbef03=async _0x2ec3bb=>{const _0xab6b7a=_0x171903;while(initCycle==_0x1d947f){if(!botPaused)try{const _0x27d338=await exchange[_0xab6b7a(0xd5)](_0x2ec3bb),_0x10ee17=_0x27d338[_0xab6b7a(0x9e)]();gTicker[noslash(_0x10ee17[_0xab6b7a(0xa9)])]=_0x10ee17[_0xab6b7a(0x194)];}catch(_0x496606){if(!exchangeStopped)await handleError(_0x496606,_0xab6b7a(0xf1),_0x2ec3bb[_0xab6b7a(0x204)]());}else await sleep(0x64);}},_0x5b44cc=async _0x2cea2=>{const _0x688c9b=_0x171903;while(initCycle==_0x1d947f){if(!botPaused){let _0x579d84;try{await sleep(0x3c*0x3e8);const _0xc2f69a=await getTickers(_0x2cea2);Object[_0x688c9b(0x262)](_0xc2f69a)[_0x688c9b(0x20a)](_0xc526df=>{const _0x2ede7e=_0x688c9b;_0x579d84=_0xc526df[0x1][_0x2ede7e(0xa9)],gChange[_0x579d84]=_0xc526df[0x1][_0x2ede7e(0x231)];});}catch(_0x3d2c4c){if(!exchangeStopped)await handleError(_0x3d2c4c,_0x688c9b(0x123),_0x579d84);}}else await sleep(0x64);}},_0x12cc6a=async _0x4df730=>{const _0xdb2150=_0x171903;while(initCycle==_0x1d947f){if(!botPaused)try{const _0x567ccd=await exchange[_0xdb2150(0x249)](_0x4df730);initCycle==_0x1d947f&&_0x567ccd[_0xdb2150(0x20a)](_0xb6541=>{updateNumberCoinsCcxt(_0xb6541);});}catch(_0x18954e){if(!exchangeStopped)await handleError(_0x18954e,'watchOrders()');}else await sleep(0x64);}};_0x4f2732(_0x2be669),_0x5b44cc(_0x2be669),exchange[_0x171903(0x17f)][_0x171903(0xd5)]&&!(config[_0x171903(0x1c4)]==_0x171903(0x97)&&_0x2be669[_0x171903(0x15c)]>0xa)?_0xfbef03(_0x2be669):_0x2be669['forEach'](_0x2a5513=>{_0x163ccd(_0x2a5513);}),_0x2be669[_0x171903(0x20a)](_0x4a403a=>{_0x12cc6a(_0x4a403a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x21a789){const _0x36ede8=_0x1e290f;let _0x437e29={};try{if(config['exchange']!=_0x36ede8(0x167))_0x437e29=await exchange['fetchTickers'](_0x21a789);else for(const _0x5e975d of _0x21a789){const _0x13ebb2=await exchange[_0x36ede8(0xab)](_0x5e975d);_0x437e29[_0x5e975d]=_0x13ebb2;}return _0x437e29;}catch(_0x50d391){throw _0x50d391;}}function setBlockTransactionDetection(_0x399fd1){const _0x12019a=_0x1e290f;blockTransactionDetection=_0x399fd1,logger['debug'](_0x12019a(0x1aa)+blockTransactionDetection);}async function detectLiquidityChange(_0x541d33=0x0){const _0x216135=_0x1e290f;transactionDetectionOngoing=!![];try{const _0x100a04=await getCoins(_0x541d33),[_0x23b5af,_0x553316]=_0x100a04;let _0x54f16c=[];currentCoins[_0x216135(0x20a)](_0x1b6d01=>{const _0x1dbf50=_0x216135,_0x3ea407=_0x23b5af[_0x1dbf50(0xc3)](_0xb3ebab=>_0xb3ebab[_0x1dbf50(0x1c6)]==_0x1b6d01[_0x1dbf50(0x1c6)]);if(_0x3ea407){if(_0x1b6d01[_0x1dbf50(0x180)]!=_0x3ea407[_0x1dbf50(0x180)]){let _0x3e65d6;if(_0x1b6d01[_0x1dbf50(0x1c6)]!=config[_0x1dbf50(0xfe)]){const _0x1faf65=gTicker[noslash(_0x1b6d01[_0x1dbf50(0xa9)])];_0x3e65d6=_0x1b6d01[_0x1dbf50(0x17a)]?0x1/_0x1faf65:_0x1faf65;}else _0x3e65d6=0x1;_0x54f16c[_0x1dbf50(0x107)]({'coin':_0x1b6d01[_0x1dbf50(0x1c6)],'symbol':_0x1b6d01[_0x1dbf50(0xa9)],'price':_0x3e65d6,'number':Number(formatResult(_0x3ea407[_0x1dbf50(0x180)]-_0x1b6d01[_0x1dbf50(0x180)],0x8)),'basecoinvalue':_0x3e65d6*(_0x3ea407[_0x1dbf50(0x180)]-_0x1b6d01[_0x1dbf50(0x180)])});}}});if(_0x54f16c[_0x216135(0x15c)]>0x0&&!blockTransactionDetection)for(const _0x5a3877 of _0x54f16c){if(config[_0x216135(0x203)]){logger[_0x216135(0x1cc)](_0x216135(0x1d2)+_0x5a3877[_0x216135(0x238)]+_0x216135(0xc7)+lastFees[_0x216135(0xb9)]);if(lastFees['highest']==0x0||Math[_0x216135(0x13f)](_0x5a3877['basecoinvalue'])>lastFees[_0x216135(0xb9)]*0x3){if(config[_0x216135(0x203)]==_0x216135(0x1bf)){delete _0x5a3877[_0x216135(0xa9)],delete _0x5a3877['basecoinvalue'];let _0x4ae470=[],_0x8f71aa=[...config[_0x216135(0xb4)]]||[],_0x5a738a=config[_0x216135(0xb4)];_0x8f71aa['sort']((_0x32dde0,_0x2c7f7f)=>_0x32dde0['date']>_0x2c7f7f[_0x216135(0x23e)]?-0x1:_0x2c7f7f[_0x216135(0x23e)]>_0x32dde0[_0x216135(0x23e)]?0x1:0x0);const _0x23586a=getDate();if(_0x8f71aa[0x0]){const _0x83e9f=fns[_0x216135(0x1a9)](_0x8f71aa[0x0][_0x216135(0x23e)],_0x216135(0x16a),new Date()),_0x35015c=fns[_0x216135(0x1a9)](_0x23586a,'yyyy/MM/dd',new Date());if(fns[_0x216135(0x221)](_0x83e9f,_0x35015c)){_0x4ae470=_0x8f71aa[0x0][_0x216135(0xf8)];const _0x2a1337=_0x4ae470[_0x216135(0xc3)](_0x38a034=>_0x38a034[_0x216135(0x1c6)]==_0x5a3877[_0x216135(0x1c6)]);_0x2a1337?(_0x2a1337['number']+=_0x5a3877['number'],_0x2a1337[_0x216135(0x180)]==0x0&&(_0x4ae470=_0x4ae470['filter'](_0x1e0319=>{const _0x486b97=_0x216135;return _0x1e0319[_0x486b97(0x1c6)]!=_0x5a3877[_0x486b97(0x1c6)];}))):_0x4ae470[_0x216135(0x107)](_0x5a3877);const _0x118652=_0x5a738a['find'](_0x584590=>_0x584590[_0x216135(0x23e)]==_0x23586a);_0x118652[_0x216135(0xf8)]=_0x4ae470;}else _0x5a738a[_0x216135(0x107)]({'date':_0x23586a,'changes':[_0x5a3877]});}const _0x46852a=_0x5a738a[_0x216135(0xc3)](_0x2ce7b8=>_0x2ce7b8[_0x216135(0x23e)]==_0x23586a);if(_0x46852a){let _0x4e9f32=!![];_0x46852a[_0x216135(0xf8)][_0x216135(0x20a)](_0x15fde7=>{const _0x4cd253=_0x216135;if(_0x15fde7[_0x4cd253(0x180)]!=0x0)_0x4e9f32=![];}),_0x4e9f32&&(_0x5a738a=_0x5a738a[_0x216135(0x190)](_0x2201b9=>{return _0x2201b9['date']!=_0x23586a;}));}let _0xc915eb=dbConfig['get'](_0x216135(0x1a4))[_0x216135(0xc3)]({'botID':botID})[_0x216135(0x1dd)]();_0xc915eb&&(dbConfig[_0x216135(0x11b)](_0x216135(0x1a4))[_0x216135(0xc3)]({'botID':botID})[_0x216135(0x1db)]({'liquidity':_0x5a738a})['write'](),config[_0x216135(0xb4)]=_0x5a738a);logHistory(_0x216135(0x175),'Portfolio\x20change\x20detected:\x20'+Math[_0x216135(0x13f)](_0x5a3877[_0x216135(0x180)])+'\x20'+_0x5a3877[_0x216135(0x1c6)]+'\x20'+(_0x5a3877[_0x216135(0x180)]>0x0?_0x216135(0x189):_0x216135(0x265))+_0x216135(0xd4)),proxyEmit(_0x216135(0x201),emittedConfiguration());const _0x31d400=getNormalizedPerformance();emitPerformance(_0x31d400),getStartingBalances(_0x31d400),logger['debug'](_0x216135(0xde));}else config[_0x216135(0x203)]==_0x216135(0x18c)&&(config[_0x216135(0x18f)]?(await storeHeadless({'headless':![]}),logHistory(_0x216135(0x175),_0x216135(0x121)+Math[_0x216135(0x13f)](_0x5a3877['number'])+'\x20'+_0x5a3877[_0x216135(0x1c6)]+'\x20'+(_0x5a3877[_0x216135(0x180)]>0x0?_0x216135(0x189):_0x216135(0x265))+_0x216135(0x222))):logger[_0x216135(0x1cc)]('Portfolio\x20change\x20detected:\x20'+Math[_0x216135(0x13f)](_0x5a3877[_0x216135(0x180)])+'\x20'+_0x5a3877['coin']+'\x20'+(_0x5a3877[_0x216135(0x180)]>0x0?_0x216135(0x189):'removed')+_0x216135(0x137)));}else logger[_0x216135(0x1cc)](_0x216135(0x17c)+Math[_0x216135(0x13f)](_0x5a3877[_0x216135(0x180)])+'\x20'+_0x5a3877[_0x216135(0x1c6)]+'\x20'+(_0x5a3877[_0x216135(0x180)]>0x0?_0x216135(0x189):_0x216135(0x265)));}else logger[_0x216135(0x1cc)](_0x216135(0x121)+Math[_0x216135(0x13f)](_0x5a3877[_0x216135(0x180)])+'\x20'+_0x5a3877[_0x216135(0x1c6)]+'\x20'+(_0x5a3877['number']>0x0?_0x216135(0x189):_0x216135(0x265))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x23b5af,currentCoinsAll=_0x553316;}catch(_0x5a298a){if(!exchangeStopped)await handleError(_0x5a298a,_0x216135(0xca));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x31af7d=_0x1e290f;logger[_0x31af7d(0x1cc)](_0x31af7d(0x1e9));try{markets=await exchange['loadMarkets']();}catch(_0x5652d0){logger[_0x31af7d(0x1cc)](_0x31af7d(0x1c7)+_0x5652d0[_0x31af7d(0x204)]());if(markets){}else(_0x5652d0[_0x31af7d(0x204)]()[_0x31af7d(0x19a)]()[_0x31af7d(0x1d7)]('timestamp')||_0x5652d0[_0x31af7d(0x204)]()[_0x31af7d(0x19a)]()[_0x31af7d(0x1d7)]('request-time'))&&logHistory(_0x31af7d(0x174),_0x31af7d(0x1f5)),logHistory(_0x31af7d(0x174),_0x31af7d(0x15e)),logHistory(_0x31af7d(0x174),_0x31af7d(0x245)+loadCoinsRetryInterval/0xea60+_0x31af7d(0x125)),logger[_0x31af7d(0x1cc)](_0x31af7d(0x1b5),_0x5652d0),loading[_0x31af7d(0xc0)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x31af7d(0x262)](markets)[_0x31af7d(0x20a)](_0x33eee5=>{const _0x42efcb=_0x31af7d;_0x33eee5[0x1][_0x42efcb(0x239)]&&_0x33eee5[0x1][_0x42efcb(0xc6)]&&allSymbols[_0x42efcb(0x107)](_0x33eee5[0x0]);});}function validateSymbols(_0x34c375){let _0x15fbe3=[];return _0x34c375['forEach'](_0x142762=>{const _0x2bb06a=_0x5944;!allSymbols['includes'](_0x142762)?logHistory(_0x2bb06a(0x174),_0x2bb06a(0x21c)+_0x142762+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x15fbe3[_0x2bb06a(0x107)](_0x142762);}),_0x15fbe3;}async function initclient(){const _0x3b05da=_0x1e290f;proxyEmit(_0x3b05da(0x201),emittedConfiguration()),proxyEmit(_0x3b05da(0x119),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3b05da(0xaa),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x34db82=getNormalizedPerformance();emitPerformance(_0x34db82),getStartingBalances(_0x34db82);}async function toggleBotMode(){const _0x41adbc=_0x1e290f;let _0x5bc6f6=dbConfig[_0x41adbc(0x11b)](_0x41adbc(0x1a4))['find']({'botID':botID})['value']();if(_0x5bc6f6){const _0x213e77=!_0x5bc6f6[_0x41adbc(0x18f)];dbConfig[_0x41adbc(0x11b)]('bot')[_0x41adbc(0xc3)]({'botID':botID})[_0x41adbc(0x1db)]({'headless':_0x213e77})[_0x41adbc(0x197)](),config['headless']=_0x213e77,proxyEmit(_0x41adbc(0x201),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x937ad3=_0x1e290f;process[_0x937ad3(0x255)]({'updatebotmanager':!![]},_0x5e2221=>{}),logger[_0x937ad3(0x1cc)](_0x937ad3(0xf4)+config[_0x937ad3(0x18f)]);}async function loadCoins(_0x10d3de){const _0x532108=_0x1e290f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x31cc96,_0x1d93e1=0x0,_0x37bb7f=0x0;_0x10d3de['forEach'](_0xba32ae=>{const _0x3f51b9=_0x5944;loading[_0x3f51b9(0x1cf)][_0x3f51b9(0x107)](_0xba32ae);}),loadingCanceled=![];let _0x4cc631=![];while(_0x31cc96!=_0x10d3de[_0x532108(0x15c)]+maxLoadingProgress){_0x31cc96=loadingProgress,_0x10d3de[_0x532108(0x20a)](_0x29e5df=>{const _0x58f106=_0x532108;if(gTicker[noslash(_0x29e5df)]){loading[_0x58f106(0x1cf)]=loading[_0x58f106(0x1cf)][_0x58f106(0x190)](_0x2d0b71=>_0x2d0b71!=_0x29e5df);if(!watchedSymbols['includes'](_0x29e5df))watchedSymbols[_0x58f106(0x107)](_0x29e5df);_0x31cc96++;}}),loading[_0x532108(0x26a)]=Math['round'](_0x31cc96/(_0x10d3de[_0x532108(0x15c)]+maxLoadingProgress)*0x64);loading[_0x532108(0x26a)]!=0x64&&(_0x37bb7f>0x1e*0x5&&(loading[_0x532108(0x1d9)]=!![],emitLoadingProgress()),_0x37bb7f>0x78*0x5&&!_0x4cc631&&(_0x4cc631=!![],logHistory('error',_0x532108(0xfd)+loading[_0x532108(0x1cf)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x532108(0x125)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x532108(0xc0)]=!![],emitLoadingProgress();break;}else _0x1d93e1!=loading[_0x532108(0x26a)]&&(_0x1d93e1=loading[_0x532108(0x26a)],emitLoadingProgress()),_0x37bb7f++,await sleep(0xc8);}_0x31cc96==_0x10d3de[_0x532108(0x15c)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x532108(0x246),'live':_0x532108(0x1d0)},_0x23aff8=>{}),_0x4cc631&&logHistory(_0x532108(0x175),_0x532108(0x10d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1425d3=_0x1e290f;proxyEmit(_0x1425d3(0x201),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x26b812=_0x1e290f;proxyEmit(_0x26b812(0x1c8),loading);}async function getFiat(){const _0x40b086=_0x1e290f;let _0x3a60ff=gTicker[stablecoins[_0x40b086(0xea)]['coin']],_0x30d7b2=gTicker[stablecoins['usd'][_0x40b086(0x1c6)]];return{'eur':Number(_0x3a60ff),'usd':Number(_0x30d7b2)};}function capitalize(_0xbc5ad5){const _0xc5982d=_0x1e290f;return _0xbc5ad5[_0xc5982d(0x230)](0x0,0x1)[_0xc5982d(0x1fb)]()+_0xbc5ad5[_0xc5982d(0x230)](0x1);}function supportedExchanges(){const _0x1f516c=_0x1e290f,_0x572f5d=['ws','fetchTickers',_0x1f516c(0xab),'watchTrades',_0x1f516c(0x249),_0x1f516c(0x99),'createOrder',_0x1f516c(0xcb),_0x1f516c(0xdb)];let _0x51f30c=[],_0x412492=[],_0x5b078e=ccxt['pro'][_0x1f516c(0x119)];_0x5b078e[_0x1f516c(0x20a)](_0x14261a=>{const _0x293798=_0x1f516c;try{const _0x1d47f8=new ccxt['pro'][_0x14261a]();_0x412492[_0x293798(0x107)](_0x1d47f8);}catch(_0xb6f595){}}),_0x412492[_0x1f516c(0x20a)](_0x433473=>{const _0x1c7f86=_0x1f516c;let _0x3f2438=0x0;_0x572f5d[_0x1c7f86(0x20a)](_0x53ccde=>{const _0xc42936=_0x1c7f86;_0x53ccde in _0x433473[_0xc42936(0x17f)]&&_0x433473[_0xc42936(0x17f)][_0x53ccde]&&_0x3f2438++;}),_0x3f2438==_0x572f5d[_0x1c7f86(0x15c)]&&_0x51f30c[_0x1c7f86(0x107)](capitalize(_0x433473['id']));});let _0x1e5487=[];return _0x5b078e[_0x1f516c(0x20a)](_0x3b9034=>{const _0xf123e7=_0x1f516c;_0x3b9034=capitalize(_0x3b9034);if(!_0x51f30c['includes'](_0x3b9034))_0x1e5487[_0xf123e7(0x107)](_0x3b9034);}),_0x51f30c;}function setStartDatePerformance(){const _0x51f1dd=_0x1e290f;if(config&&config[_0x51f1dd(0xb4)][0x0][_0x51f1dd(0xf8)][_0x51f1dd(0x15c)]!=0x0){const _0x1bd3d6=config[_0x51f1dd(0xb4)][0x0][_0x51f1dd(0xf8)];dbPerformance['get']('data')[_0x51f1dd(0xc3)]({'date':config['startdate']})[_0x51f1dd(0x1db)]({'coins':_0x1bd3d6})[_0x51f1dd(0x197)]();}}async function recreateCoinResults(){const _0x2a579d=_0x1e290f;recreationNeeded=![];let _0x150326,_0x1a08dd=[];try{for(const _0x2d5902 of currentCoins){if(_0x2d5902['coin']!=config[_0x2a579d(0xfe)]){let _0x27053f=0x0,_0x3b0ebc,_0x76b5c3;_0x150326=await getAllEventOrders(_0x2d5902[_0x2a579d(0xa9)]);if(_0x150326[_0x2a579d(0x15c)]>0x0)_0x150326['forEach'](_0x127c53=>{const _0x7acd35=_0x2a579d,_0x588e94=_0x2d5902[_0x7acd35(0xa9)]['includes'](config['basecoin']+'/');_0x1a08dd['push']({'datetime':_0x127c53[_0x7acd35(0xed)],'coin':_0x2d5902[_0x7acd35(0x1c6)],'symbol':_0x2d5902[_0x7acd35(0xa9)],'side':_0x127c53[_0x7acd35(0x223)],'reverse':_0x588e94,'amount':formatResult(_0x127c53[_0x7acd35(0x225)],0x8),'filled':formatResult(_0x127c53[_0x7acd35(0x225)],0x8),'price':formatResult(_0x127c53[_0x7acd35(0x194)],0x8)}),_0x27053f=_0x127c53[_0x7acd35(0x223)]==_0x7acd35(0x117)?_0x27053f+_0x127c53[_0x7acd35(0x225)]:_0x27053f-_0x127c53[_0x7acd35(0x225)];if(!_0x76b5c3)_0x76b5c3=_0x127c53[_0x7acd35(0x194)];});_0x3b0ebc=_0x2d5902[_0x2a579d(0x180)]-_0x27053f;let _0x2f3aa2;config[_0x2a579d(0xb4)][_0x2a579d(0x20a)](_0x21917f=>{const _0x249f71=_0x2a579d;!_0x2f3aa2&&(_0x2f3aa2=_0x21917f[_0x249f71(0xf8)][_0x249f71(0xc3)](_0x39d3fb=>_0x39d3fb['coin']==_0x2d5902[_0x249f71(0x1c6)]),_0x2f3aa2&&(_0x3b0ebc=_0x2f3aa2['number'],_0x76b5c3=_0x2f3aa2[_0x249f71(0x194)]));});let _0x45bcc1=dbCoinResults[_0x2a579d(0x11b)](_0x2a579d(0x1bd))['find']({'coin':_0x2d5902['coin']})['value']();_0x45bcc1={'coin':_0x2d5902[_0x2a579d(0x1c6)],'number':_0x3b0ebc,'breakeven':_0x76b5c3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2a579d(0x11b)](_0x2a579d(0x1bd))[_0x2a579d(0xc3)]({'coin':_0x2d5902['coin']})[_0x2a579d(0x1db)](_0x45bcc1)[_0x2a579d(0x197)]();}}_0x1a08dd[_0x2a579d(0x21d)]((_0x578d77,_0x484a4d)=>_0x578d77[_0x2a579d(0xed)]>_0x484a4d[_0x2a579d(0xed)]?0x1:_0x484a4d['datetime']>_0x578d77[_0x2a579d(0xed)]?-0x1:0x0);let _0x3341e6=0x0;for(let _0x6c64a0 of _0x1a08dd){await updateCoinResults(_0x6c64a0,!![]);}}catch(_0x5c1145){await handleError(_0x5c1145,'recreateCoinResults()');}}async function getAllEventOrders(_0x41443f){const _0x482e65=_0x1e290f;let _0x4aa5c8=[],_0x1e4b42=dbLogs[_0x482e65(0x11b)](_0x482e65(0x16f))[_0x482e65(0x190)](_0x3986fa=>{const _0x31619b=_0x482e65,_0x1fe4f9=_0x3986fa['event'][_0x31619b(0x19a)]();return _0x1fe4f9[_0x31619b(0x1d7)](_0x41443f[_0x31619b(0x19a)]())&&(_0x1fe4f9[_0x31619b(0x1d7)](_0x31619b(0x144))&&_0x1fe4f9['includes']('order')||_0x1fe4f9['includes'](_0x31619b(0x225))&&_0x1fe4f9['includes'](_0x31619b(0xaf)));})[_0x482e65(0x21b)](_0x482e65(0x1fc))[_0x482e65(0x1dd)]();return _0x1e4b42[_0x482e65(0x20a)](_0x28b6fe=>{const _0x4a5193=_0x482e65,_0x5b1369=_0x28b6fe[_0x4a5193(0x188)][_0x4a5193(0x1d7)](_0x4a5193(0x1b3))?_0x4a5193(0x1b3):_0x4a5193(0x117),_0x3f1d8b=/#([0-9]|\.)+\s/i,_0x612e3d=Number(_0x3f1d8b[_0x4a5193(0xda)](_0x28b6fe[_0x4a5193(0x188)])[0x0][_0x4a5193(0x156)](0x1)),_0x43e796=/@([0-9]|\.)+$/i,_0x42eba5=Number(_0x43e796[_0x4a5193(0xda)](_0x28b6fe[_0x4a5193(0x188)])[0x0]['slice'](0x1));_0x4aa5c8[_0x4a5193(0x107)]({'datetime':_0x28b6fe[_0x4a5193(0x1fc)],'coin':symbolToCoin(_0x41443f),'symbol':_0x41443f,'side':_0x5b1369,'amount':_0x612e3d,'filled':_0x612e3d,'price':_0x42eba5});}),_0x4aa5c8;}async function validate24hChanges(){const _0x42c07d=_0x1e290f;for(const _0x176a80 of currentCoins){if(_0x176a80[_0x42c07d(0x1c6)]!=config[_0x42c07d(0xfe)]){let _0x2dcaaf;_0x176a80[_0x42c07d(0x17a)]?_0x2dcaaf=formatResult((0x1/(gChange[_0x176a80[_0x42c07d(0xa9)]]/0x64+0x1)-0x1)*0x64,0x3):_0x2dcaaf=gChange[_0x176a80[_0x42c07d(0xa9)]],_0x2dcaaf<config[_0x42c07d(0x1ca)]&&(logHistory(_0x42c07d(0x174),_0x176a80[_0x42c07d(0x1c6)]+_0x42c07d(0x182)+_0x2dcaaf+'%'),logHistory('error',_0x42c07d(0x100)),logHistory(_0x42c07d(0x174),_0x42c07d(0x229)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x25a03b,_0x3f371f){const _0x4c8bb0=_0x1e290f;if(!_0x25a03b)return!![];const _0x1651cc=_0x3f371f[_0x4c8bb0(0xfb)]('.'),_0x45a92a=_0x25a03b[_0x4c8bb0(0xfb)]('.');for(var _0x9724b7=0x0;_0x9724b7<_0x45a92a[_0x4c8bb0(0x15c)];_0x9724b7++){const _0x112b11=~~_0x45a92a[_0x9724b7],_0x3216e7=~~_0x1651cc[_0x9724b7];if(_0x112b11<_0x3216e7)return!![];if(_0x112b11>_0x3216e7)return![];}return![];}async function oneTimeMigration(){const _0x225b49=_0x1e290f;let _0x11db5d=dbLogs[_0x225b49(0x11b)](_0x225b49(0xe6))['value']();if(isOlderVersion(_0x11db5d,_0x225b49(0x16e))){let _0x57538c=[];const _0x2aae6c=dbLogs[_0x225b49(0x11b)](_0x225b49(0x16f))[_0x225b49(0x1dd)]();_0x2aae6c['forEach'](_0x1607b5=>{const _0x7ef75c=_0x225b49;_0x57538c[_0x7ef75c(0x107)]({'time':_0x1607b5['time'],'type':_0x1607b5[_0x7ef75c(0x163)],'event':_0x1607b5[_0x7ef75c(0x188)]});}),dbLogs[_0x225b49(0x11b)]('logs')[_0x225b49(0x1db)](_0x57538c)[_0x225b49(0x197)]();}let _0x557713=dbConfig[_0x225b49(0x11b)](_0x225b49(0xe6))['value']();if(isOlderVersion(_0x557713,'2.3.5')){let _0x55584c=dbConfig[_0x225b49(0x11b)]('bot')[_0x225b49(0xc3)]({'botID':botID})[_0x225b49(0x1dd)]();if(_0x55584c){let _0x3d95e7=[];_0x55584c['portfolio'][_0x225b49(0x20a)](_0x3e805b=>{const _0x45e5f7=_0x225b49;_0x3d95e7[_0x45e5f7(0x107)]({'coin':_0x3e805b[_0x45e5f7(0x1c6)],'number':_0x3e805b[_0x45e5f7(0x1fa)],'price':_0x3e805b[_0x45e5f7(0x1c9)]}),delete _0x3e805b[_0x45e5f7(0x1fa)],delete _0x3e805b['startprice'];});if(_0x3d95e7[_0x225b49(0x15c)]!==0x0)fs[_0x225b49(0x10f)](configbackuppath+(_0x225b49(0x1ef)+botID+_0x225b49(0x20b)),JSON[_0x225b49(0x171)](_0x3d95e7,null,0x4),function(_0x31813a){if(_0x31813a){}});const _0x5d3258=(_0x5e6e87,_0x492334)=>{const _0x5b46d2=_0x225b49;let _0x2706a6=[];_0x492334[_0x5b46d2(0x20a)](_0x4d6e57=>{const _0x340359=_0x5b46d2,_0x4ca123=_0x5e6e87[_0x340359(0xc3)](_0x18665e=>_0x18665e[_0x340359(0x1c6)]==_0x4d6e57[_0x340359(0x1c6)]);if(!_0x4ca123)_0x2706a6[_0x340359(0x107)](_0x4d6e57);});let _0x37e9e5=[];return _0x5e6e87[_0x5b46d2(0x20a)](_0x5536b7=>{const _0x173889=_0x5b46d2,_0x30b748=_0x492334[_0x173889(0xc3)](_0x32f1fb=>_0x32f1fb['coin']==_0x5536b7['coin']);if(!_0x30b748||_0x30b748['number']==0x0&&_0x5536b7['number']!=0x0)_0x37e9e5['push'](_0x5536b7);}),{'missingDay1':_0x2706a6,'notInDay2':_0x37e9e5};},_0x58fe9a=dbPerformance[_0x225b49(0x11b)]('data')[_0x225b49(0x16b)]()[_0x225b49(0x1dd)]();if(_0x58fe9a[_0x225b49(0x15c)]>0x1){const {missingDay1:_0x1faada,notInDay2:_0x18c91f}=_0x5d3258(_0x3d95e7,_0x58fe9a[0x1][_0x225b49(0x1bd)]);_0x3d95e7=[..._0x3d95e7,..._0x1faada],_0x18c91f[_0x225b49(0x20a)](_0xdaec1e=>{const _0x3c7010=_0x225b49;let _0x4949f7=_0x3d95e7['findIndex'](_0x9ff38b=>_0x9ff38b[_0x3c7010(0x1c6)]==_0xdaec1e['coin']);_0x4949f7!=-0x1&&_0x3d95e7['splice'](_0x4949f7,0x1);});}_0x3d95e7[_0x225b49(0x21d)]((_0x51765d,_0x4eb29a)=>_0x51765d[_0x225b49(0x1c6)]>_0x4eb29a['coin']?0x1:_0x4eb29a[_0x225b49(0x1c6)]>_0x51765d['coin']?-0x1:0x0);let _0x525d3c=[{'date':_0x55584c['startdate'],'changes':_0x3d95e7}];_0x58fe9a[_0x225b49(0x15c)]>0x2&&_0x58fe9a['forEach']((_0x3086a,_0x5c5173)=>{const _0x3dc40a=_0x225b49;if(_0x5c5173>0x0&&_0x5c5173<_0x58fe9a[_0x3dc40a(0x15c)]-0x1){const {missingDay1:_0x4e0416,notInDay2:_0x15a547}=_0x5d3258(_0x58fe9a[_0x5c5173][_0x3dc40a(0x1bd)],_0x58fe9a[_0x5c5173+0x1][_0x3dc40a(0x1bd)]);_0x3d95e7=[],(_0x4e0416[_0x3dc40a(0x15c)]!=0x0||_0x15a547['length']!=0x0)&&(_0x4e0416[_0x3dc40a(0x15c)]!=0x0&&_0x3d95e7['push'](..._0x4e0416),_0x15a547[_0x3dc40a(0x15c)]!=0x0&&(_0x15a547[_0x3dc40a(0x20a)](_0x3ec20d=>{const _0x2ebd06=_0x3dc40a;_0x3ec20d[_0x2ebd06(0x180)]=-_0x3ec20d[_0x2ebd06(0x180)];}),_0x3d95e7[_0x3dc40a(0x107)](..._0x15a547)),_0x3d95e7[_0x3dc40a(0x21d)]((_0x4656b3,_0x21df65)=>_0x4656b3[_0x3dc40a(0x1c6)]>_0x21df65['coin']?0x1:_0x21df65[_0x3dc40a(0x1c6)]>_0x4656b3[_0x3dc40a(0x1c6)]?-0x1:0x0),_0x525d3c['push']({'date':_0x58fe9a[_0x5c5173+0x1][_0x3dc40a(0x23e)],'changes':_0x3d95e7}));}}),dbConfig['get'](_0x225b49(0x1a4))['find']({'botID':botID})[_0x225b49(0x1db)]({..._0x55584c,'liquidity':_0x525d3c})[_0x225b49(0x197)]();}}if(isOlderVersion(_0x557713,_0x225b49(0xb8))){let _0x2a546c=dbConfig[_0x225b49(0x11b)](_0x225b49(0x1a4))[_0x225b49(0xc3)]({'botID':botID})[_0x225b49(0x1dd)]();if(_0x2a546c){const _0x4e842e=_0x2a546c[_0x225b49(0x1c4)],_0x1199b1=_0x4e842e?capitalize(_0x4e842e):'Binance';dbConfig[_0x225b49(0x11b)](_0x225b49(0x1a4))[_0x225b49(0xc3)]({'botID':botID})[_0x225b49(0x1db)]({'exchange':_0x1199b1})[_0x225b49(0x197)]();}}if(isOlderVersion(_0x557713,_0x225b49(0x1c0))){let _0x4779bc=dbConfig[_0x225b49(0x11b)]('bot')['find']({'botID':botID})[_0x225b49(0x1dd)]();if(_0x4779bc){const _0x6e689d=_0x4779bc[_0x225b49(0x146)],_0x195bb0=_0x6e689d?_0x225b49(0x256):![];dbConfig[_0x225b49(0x11b)](_0x225b49(0x1a4))['find']({'botID':botID})[_0x225b49(0x1db)]({'marketcapEnabled':_0x195bb0})[_0x225b49(0x197)]();}}if(isOlderVersion(_0x557713,'2.6.23')){let _0x4162d1=dbConfig['get'](_0x225b49(0x1a4))[_0x225b49(0xc3)]({'botID':botID})['value']();if(_0x4162d1){const _0x4bb363=_0x4162d1['autoliquidity'],_0xcdc0e4=_0x4bb363?'update-liquidity':![];dbConfig[_0x225b49(0x11b)]('bot')['find']({'botID':botID})[_0x225b49(0x1db)]({'autoliquidity':_0xcdc0e4})[_0x225b49(0x197)]();}}let _0x58cb80=dbPerformance['get']('version')[_0x225b49(0x1dd)]();isOlderVersion(_0x58cb80,'2.3.5')&&setStartDatePerformance();let _0x1d9e7f=dbCoinResults['get'](_0x225b49(0xe6))[_0x225b49(0x1dd)]();if(isOlderVersion(_0x1d9e7f,_0x225b49(0x227))){let _0x2eebe8=dbCoinResults[_0x225b49(0x11b)]('coins')[_0x225b49(0x1dd)]();if(_0x2eebe8['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x20b46e=_0x1e290f;dbConfig[_0x20b46e(0x242)]('version',serverversion)[_0x20b46e(0x197)](),dbPerformance[_0x20b46e(0x242)](_0x20b46e(0xe6),serverversion)[_0x20b46e(0x197)](),dbLogs['set']('version',serverversion)['write'](),dbCoinResults[_0x20b46e(0x242)](_0x20b46e(0xe6),serverversion)[_0x20b46e(0x197)]();}function getConfiguration(_0x331e2d){const _0x58db89=_0x1e290f;let _0x280b27=dbConfig[_0x58db89(0x11b)]('bot')['find']({'botID':_0x331e2d})[_0x58db89(0x1dd)]();if(_0x280b27){let _0x193666=![];typeof _0x280b27['threshold']=='string'&&(_0x280b27={..._0x280b27,'threshold':Number(_0x280b27[_0x58db89(0xd2)])},_0x193666=!![]),_0x280b27[_0x58db89(0x1ca)]==undefined&&(_0x280b27={..._0x280b27,'change24h':-0x14},_0x193666=!![]),_0x280b27[_0x58db89(0x261)]==undefined&&(_0x280b27={..._0x280b27,'fiat':_0x58db89(0x202)},_0x193666=!![]),_0x280b27[_0x58db89(0x25d)]==undefined&&(_0x280b27={..._0x280b27,'onepagemode':settings[_0x58db89(0x25d)]},_0x193666=!![]),_0x280b27[_0x58db89(0x10c)]==undefined&&(_0x280b27={..._0x280b27,'colorscheme':'red_yellow_blue'},_0x193666=!![]),_0x280b27[_0x58db89(0x203)]==undefined&&(_0x280b27={..._0x280b27,'autoliquidity':_0x58db89(0x1bf)},_0x193666=!![]),_0x280b27[_0x58db89(0x217)]==undefined&&(_0x280b27={..._0x280b27,'marketcapApi':settings[_0x58db89(0x217)]?!![]:![]},_0x193666=!![]),_0x280b27[_0x58db89(0x146)]==undefined&&(_0x280b27={..._0x280b27,'marketcapEnabled':![]},_0x193666=!![]),_0x193666&&(_0x280b27={'botID':_0x280b27[_0x58db89(0x17e)],'exchange':_0x280b27['exchange'],'apiKey':_0x280b27[_0x58db89(0xd7)],'apiSecret':_0x280b27[_0x58db89(0x118)],'apiPassword':_0x280b27[_0x58db89(0x12c)],'basecoin':_0x280b27[_0x58db89(0xfe)],'botname':_0x280b27[_0x58db89(0x18a)],'showname':_0x280b27['showname'],'threshold':_0x280b27[_0x58db89(0xd2)],'ordertype':_0x280b27[_0x58db89(0xec)],'timeout':_0x280b27[_0x58db89(0x1d9)],'fiat':_0x280b27[_0x58db89(0x261)],'startdate':_0x280b27[_0x58db89(0x24b)],'recreate':_0x280b27[_0x58db89(0x247)],'timeshift':_0x280b27[_0x58db89(0x1d6)],'onepagemode':_0x280b27[_0x58db89(0x25d)],'headless':_0x280b27['headless'],'cooldown':_0x280b27[_0x58db89(0x24d)],'change24h':_0x280b27[_0x58db89(0x1ca)],'emojibuy':_0x280b27['emojibuy'],'emojisell':_0x280b27[_0x58db89(0x212)],'colorscheme':_0x280b27[_0x58db89(0x10c)],'marketcapApi':_0x280b27['marketcapApi'],'marketcapEnabled':_0x280b27[_0x58db89(0x146)],'portfolio':_0x280b27[_0x58db89(0x22d)],'autoliquidity':_0x280b27[_0x58db89(0x203)],'liquidity':_0x280b27[_0x58db89(0xb4)],'openOrders':_0x280b27[_0x58db89(0x138)]},dbConfig[_0x58db89(0x11b)](_0x58db89(0x1a4))[_0x58db89(0xb5)]()[_0x58db89(0x197)](),dbConfig[_0x58db89(0x11b)]('bot')[_0x58db89(0x107)](_0x280b27)[_0x58db89(0x197)]());}else _0x280b27={'botID':_0x331e2d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x58db89(0x1b6)+_0x331e2d,'showname':![],'threshold':0x3,'ordertype':_0x58db89(0x144),'timeout':0x14,'fiat':_0x58db89(0x202),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x58db89(0x1d6)],'onepagemode':settings[_0x58db89(0x25d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x58db89(0x149),'marketcapApi':settings[_0x58db89(0x217)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x58db89(0x1bf),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x280b27;}function emittedConfiguration(){const _0x2dd389=_0x1e290f;let _0x18464e;if(config[_0x2dd389(0xd7)]=='')_0x18464e={...config,'configstate':_0x2dd389(0x105)};else config['apiKey']==_0x2dd389(0x162)?_0x18464e={...config,'configstate':'recovery'}:(_0x18464e={...config,'apiKey':_0x2dd389(0xf9),'apiSecret':_0x2dd389(0xf9)},config[_0x2dd389(0x12c)]&&(_0x18464e[_0x2dd389(0x12c)]=_0x2dd389(0xf9)));return _0x18464e[_0x2dd389(0x243)]=enableFiatToggle,_0x18464e;}function _0x5944(_0xc0ce83,_0x348bc2){const _0x39036d=_0x55bd();return _0x5944=function(_0x4a1db8,_0x58d7a5){_0x4a1db8=_0x4a1db8-0x96;let _0x55bd0f=_0x39036d[_0x4a1db8];return _0x55bd0f;},_0x5944(_0xc0ce83,_0x348bc2);}function getSettings(){const _0xf3f42b=_0x1e290f;return dbSettings[_0xf3f42b(0x11b)](_0xf3f42b(0xef))[_0xf3f42b(0x1dd)]();}function getSecure(){const _0xf9c545=_0x1e290f;return dbSecure[_0xf9c545(0x11b)]('secure')[_0xf9c545(0x1dd)]()||{};}function updateTimeshift(_0x935e9c){const _0x2d82b4=_0x1e290f;let _0x37f000=dbConfig[_0x2d82b4(0x11b)](_0x2d82b4(0x1a4))[_0x2d82b4(0xc3)]({'botID':botID})[_0x2d82b4(0x1dd)]();_0x37f000&&dbConfig[_0x2d82b4(0x11b)](_0x2d82b4(0x1a4))[_0x2d82b4(0xc3)]({'botID':botID})[_0x2d82b4(0x1db)]({'timeshift':_0x935e9c})['write'](),config[_0x2d82b4(0x1d6)]=_0x935e9c,proxyEmit(_0x2d82b4(0x201),emittedConfiguration());}function updateOnepagemode(_0xcf77bc){const _0x13caaa=_0x1e290f;let _0x3348c7=dbConfig[_0x13caaa(0x11b)]('bot')[_0x13caaa(0xc3)]({'botID':botID})[_0x13caaa(0x1dd)]();_0x3348c7&&dbConfig['get'](_0x13caaa(0x1a4))[_0x13caaa(0xc3)]({'botID':botID})[_0x13caaa(0x1db)]({'onepagemode':_0xcf77bc})[_0x13caaa(0x197)](),config[_0x13caaa(0x25d)]=_0xcf77bc,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x3365c0){const _0x376cf2=_0x1e290f,_0x48a40a=_0x3365c0?!![]:![];let _0x2b3713=dbConfig['get'](_0x376cf2(0x1a4))[_0x376cf2(0xc3)]({'botID':botID})[_0x376cf2(0x1dd)]();_0x2b3713&&dbConfig[_0x376cf2(0x11b)](_0x376cf2(0x1a4))['find']({'botID':botID})[_0x376cf2(0x1db)]({'marketcapApi':_0x48a40a})[_0x376cf2(0x197)](),config[_0x376cf2(0x217)]=_0x48a40a,getMarketCap(),proxyEmit(_0x376cf2(0x201),emittedConfiguration());}async function storeConfiguration(_0x5b936f){const _0x51d6c0=_0x1e290f;logger[_0x51d6c0(0x1cc)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x2666be=![],_0x4aadbd=![],_0x42876d=[];_0x5b936f['portfolio'][_0x51d6c0(0x20a)](_0x300726=>{const _0x4c2243=_0x51d6c0;if(!_0x300726[_0x4c2243(0x266)]&&_0x300726[_0x4c2243(0x1c6)]!=_0x5b936f[_0x4c2243(0xfe)])_0x42876d[_0x4c2243(0x107)](_0x300726[_0x4c2243(0xa9)]);}),_0x42876d[_0x51d6c0(0x20a)](_0x5281d7=>{const _0x124c07=_0x51d6c0,_0x1d6a10=currentCoins['find'](_0x450f23=>_0x450f23[_0x124c07(0xa9)]==_0x5281d7);!_0x1d6a10&&(_0x2666be=!![]);}),currentCoins[_0x51d6c0(0x20a)](_0x5d94e3=>{const _0x153810=_0x51d6c0;if(_0x5d94e3[_0x153810(0x1c6)]!=config[_0x153810(0xfe)]){const _0x1483be=_0x42876d[_0x153810(0xc3)](_0x36d161=>_0x36d161==_0x5d94e3[_0x153810(0xa9)]);!_0x1483be&&(_0x2666be=!![]);}}),_0x5b936f['portfolio'][_0x51d6c0(0x20a)](_0xaa2ce6=>{const _0x18b6c9=_0x51d6c0,_0x4c2418=config[_0x18b6c9(0x22d)][_0x18b6c9(0xc3)](_0x282061=>_0x282061[_0x18b6c9(0x1c6)]==_0xaa2ce6[_0x18b6c9(0x1c6)]);if(_0x4c2418&&_0xaa2ce6['offset']!=_0x4c2418[_0x18b6c9(0x23b)])_0x4aadbd=!![];});let _0x3d311e=dbConfig[_0x51d6c0(0x11b)]('bot')[_0x51d6c0(0xc3)]({'botID':botID})[_0x51d6c0(0x1dd)]();_0x5b936f={..._0x5b936f,'apiKey':decryptRSA(secure['privateKey'],_0x5b936f[_0x51d6c0(0xd7)]),'apiSecret':decryptRSA(secure['privateKey'],_0x5b936f[_0x51d6c0(0x118)])};_0x5b936f[_0x51d6c0(0x12c)]&&(_0x5b936f[_0x51d6c0(0x12c)]=decryptRSA(secure['privateKey'],_0x5b936f[_0x51d6c0(0x12c)]));let _0x18154d=![];if(_0x3d311e){_0x5b936f['apiKey']=='************'?_0x5b936f[_0x51d6c0(0xd7)]=config[_0x51d6c0(0xd7)]:_0x18154d=!![];_0x5b936f['apiSecret']=='************'?_0x5b936f['apiSecret']=config['apiSecret']:_0x18154d=!![];if(_0x5b936f['apiPassword']==_0x51d6c0(0xf9))_0x5b936f[_0x51d6c0(0x12c)]=config[_0x51d6c0(0x12c)];else{if(_0x5b936f[_0x51d6c0(0x12c)])_0x18154d=!![];}dbConfig['get'](_0x51d6c0(0x1a4))['find']({'botID':botID})[_0x51d6c0(0x1db)](_0x5b936f)[_0x51d6c0(0x197)]();}else dbConfig['get'](_0x51d6c0(0x1a4))[_0x51d6c0(0x107)](_0x5b936f)[_0x51d6c0(0x197)](),_0x18154d=!![],process[_0x51d6c0(0x255)]({'status':_0x51d6c0(0x246),'live':'running'},_0x5e8765=>{});process[_0x51d6c0(0x255)]({'botname':_0x5b936f[_0x51d6c0(0x18a)]},_0x311705=>{}),config={..._0x5b936f},updateBotManager(),proxyEmit(_0x51d6c0(0xbf)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x18154d)!_0x3d311e?await reset(!![]):getBalances();else _0x2666be||_0x4aadbd?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0xe146ee){const _0x1ee974=_0x1e290f,_0x3351bb={...config,'headless':_0xe146ee['headless']};let _0x20788d=dbConfig[_0x1ee974(0x11b)](_0x1ee974(0x1a4))[_0x1ee974(0xc3)]({'botID':botID})['value']();_0x20788d&&dbConfig[_0x1ee974(0x11b)](_0x1ee974(0x1a4))['find']({'botID':botID})[_0x1ee974(0x1db)](_0x3351bb)['write'](),config={..._0x3351bb},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x2408af){const _0x261fe1=_0x1e290f,_0x56ac40={...config,'fiat':_0x2408af};let _0x188db7=dbConfig['get'](_0x261fe1(0x1a4))[_0x261fe1(0xc3)]({'botID':botID})[_0x261fe1(0x1dd)]();_0x188db7&&dbConfig[_0x261fe1(0x11b)](_0x261fe1(0x1a4))[_0x261fe1(0xc3)]({'botID':botID})['assign'](_0x56ac40)['write'](),config={..._0x56ac40},proxyEmit(_0x261fe1(0x201),emittedConfiguration());}function resetHistory(){const _0x38ab00=_0x1e290f;logger[_0x38ab00(0x248)](_0x38ab00(0x219));try{if(fs[_0x38ab00(0x165)](path[_0x38ab00(0x19f)](configpath,_0x38ab00(0x1ad)+botID+_0x38ab00(0x1b1))))fs[_0x38ab00(0x13c)](path[_0x38ab00(0x19f)](configpath,'bot-'+botID+_0x38ab00(0x1b1)));if(fs[_0x38ab00(0x165)](path['join'](configpath,'bot-'+botID+_0x38ab00(0x13e))))fs['unlinkSync'](path['join'](configpath,_0x38ab00(0x1ad)+botID+_0x38ab00(0x13e)));if(fs['existsSync'](path[_0x38ab00(0x19f)](configpath,'bot-'+botID+_0x38ab00(0xce))))fs['unlinkSync'](path[_0x38ab00(0x19f)](configpath,_0x38ab00(0x1ad)+botID+_0x38ab00(0xce)));}catch(_0x3566b0){if(_0x3566b0)logger['full'](_0x38ab00(0x1b0),_0x3566b0);}const _0xc59491=getDate();let _0x34911d=[];currentCoins[_0x38ab00(0x20a)](_0x226250=>{const _0xe77dc8=_0x38ab00;_0x34911d[_0xe77dc8(0x107)]({'coin':_0x226250[_0xe77dc8(0x1c6)],'number':_0x226250[_0xe77dc8(0x180)],'price':_0x226250[_0xe77dc8(0x1bc)]});});let _0x303721=dbConfig[_0x38ab00(0x11b)](_0x38ab00(0x1a4))[_0x38ab00(0xc3)]({'botID':botID})['value']();_0x303721&&(dbConfig[_0x38ab00(0x11b)](_0x38ab00(0x1a4))[_0x38ab00(0xc3)]({'botID':botID})['assign']({'liquidity':[{'date':_0xc59491,'changes':_0x34911d}]})['write'](),config[_0x38ab00(0xb4)]=[]),restartBot(!![]);}function noslash(_0x15d01d){const _0x1c4d84=_0x1e290f;return _0x15d01d[_0x1c4d84(0x9a)]('/','');}function updateHighestFee(_0x3fc00a){const _0x225d9=_0x1e290f;if(_0x3fc00a[_0x225d9(0x17a)]){let _0x5ce424={'filled':_0x3fc00a['filled']*_0x3fc00a[_0x225d9(0x194)],'amount':_0x3fc00a[_0x225d9(0x225)]*_0x3fc00a['price'],'side':_0x3fc00a[_0x225d9(0x223)]=='sell'?_0x225d9(0x117):'sell','price':0x1/_0x3fc00a['price']};_0x3fc00a={..._0x3fc00a,..._0x5ce424};}const _0x552be5=defaultFee*_0x3fc00a[_0x225d9(0x225)]*_0x3fc00a[_0x225d9(0x194)];lastFees[_0x225d9(0x1e5)][_0x225d9(0x15c)]===0x14&&lastFees[_0x225d9(0x1e5)][_0x225d9(0x10b)](),lastFees[_0x225d9(0x1e5)][_0x225d9(0x107)](_0x552be5),lastFees[_0x225d9(0xb9)]=Math['max'](...lastFees[_0x225d9(0x1e5)]);}async function updateNumberCoinsCcxt(_0x56d6a4){const _0x181f2b=_0x1e290f;logger[_0x181f2b(0x1cc)](_0x181f2b(0x129)+_0x56d6a4[_0x181f2b(0xa9)]+_0x181f2b(0x176)+_0x56d6a4[_0x181f2b(0x252)]+_0x181f2b(0x176)+_0x56d6a4[_0x181f2b(0x225)]+_0x181f2b(0x186)+_0x56d6a4[_0x181f2b(0x19e)]+_0x181f2b(0x176)+_0x56d6a4['id']);let _0x53ae98=_0x56d6a4['status'],_0x184839=![];currentCoins[_0x181f2b(0x20a)](_0x4a7116=>{const _0x3ae53e=_0x181f2b;_0x4a7116[_0x3ae53e(0xa9)]==_0x56d6a4[_0x3ae53e(0xa9)]&&(_0x184839=!![]);});if(!_0x184839)return;const _0xd95875=currentCoins[_0x181f2b(0xc3)](_0x13637e=>_0x13637e[_0x181f2b(0xa9)]==_0x56d6a4[_0x181f2b(0xa9)]),_0x5d16eb=_0x20a468=>{const _0x127f4e=_0x181f2b;if(_0xd95875)_0xd95875[_0x127f4e(0x177)]=_0x20a468;};let _0x57d3f3=![];for(const _0x2881cc of lastOrders){const _0x3edaa3=0x64,_0xaa080=0x1388;let _0x1437f5=0x0;while(!_0x2881cc['orderId']&&_0x1437f5*_0x3edaa3<_0xaa080){_0x1437f5++,await sleep(_0x3edaa3);}if(_0x1437f5>0x0)logger[_0x181f2b(0x1cc)](_0x181f2b(0x234)+_0x1437f5*_0x3edaa3/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x2881cc[_0x181f2b(0x269)]==_0x56d6a4['id']&&(_0x57d3f3=!![]);}if(_0x53ae98==_0x181f2b(0x1e1)){_0x5d16eb('open');if(_0x56d6a4['filled']>0x0){if(_0x57d3f3){setBlockTransactionDetection(!![]),logger[_0x181f2b(0x1cc)]('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x56d6a4['id']);const _0x1339a2=await getCoins(balanceUpdateDelay,undefined,undefined,_0xd95875);[currentCoins,currentCoinsAll]=_0x1339a2,setBlockTransactionDetection(![]);}else logger['debug']('1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20'+_0x56d6a4['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x53ae98==_0x181f2b(0x193)){_0x5d16eb(_0x181f2b(0x193));const _0x3d47a9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3d47a9,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x53ae98==_0x181f2b(0x214)){if(lastOrders)for(const _0x5ba288 of lastOrders){if(_0x5ba288['orderId']==_0x56d6a4['id']){logger[_0x181f2b(0x1cc)](_0x181f2b(0xfa)+_0x56d6a4['id']),_0x57d3f3=!![];if(_0x5ba288[_0x181f2b(0x225)]==0x0){setBlockTransactionDetection(!![]),logger[_0x181f2b(0x1cc)](_0x181f2b(0xf7)+_0x56d6a4['id']);if(_0x56d6a4['average'])_0x5ba288[_0x181f2b(0x194)]=_0x56d6a4[_0x181f2b(0x173)];else{if(_0x56d6a4[_0x181f2b(0x194)])_0x5ba288['price']=_0x56d6a4[_0x181f2b(0x194)];else{}}_0x5ba288[_0x181f2b(0x225)]=_0x56d6a4['filled'],updateHighestFee(_0x5ba288);const _0x449c3a=await getCoins(balanceUpdateDelay,undefined,undefined,_0xd95875);[currentCoins,currentCoinsAll]=_0x449c3a,setBlockTransactionDetection(![]),await validateOrders(),_0x5d16eb(_0x181f2b(0x225)),_0x5ba288[_0x181f2b(0x1c2)]={'currency':_0x56d6a4[_0x181f2b(0x1c2)]?_0x56d6a4[_0x181f2b(0x1c2)][_0x181f2b(0xc2)]:null,'cost':_0x56d6a4['fee']?_0x56d6a4[_0x181f2b(0x1c2)]['cost']:0x0},await updateCoinResults(_0x5ba288);}}}!_0x57d3f3&&(logger[_0x181f2b(0x1cc)](_0x181f2b(0x133)+_0x56d6a4['id']),_0x5d16eb('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4383e6=JSON[_0x181f2b(0x1a9)](lastBalances[_0x181f2b(0x22d)]);const _0x169b8e=_0x4383e6[_0x181f2b(0xc3)](_0x17d370=>_0x17d370[_0x181f2b(0xa9)]==_0x56d6a4[_0x181f2b(0xa9)]);if(_0x169b8e){if(_0x53ae98==_0x181f2b(0x1e1))_0x169b8e['orderstatus']=_0x169b8e['orderstatus']==_0x181f2b(0x225)?_0x181f2b(0x225):'open';else{if(_0x53ae98=='canceled')_0x169b8e['orderstatus']=_0x169b8e[_0x181f2b(0x177)]=='filled'?_0x181f2b(0x225):_0x181f2b(0x193);else _0x53ae98==_0x181f2b(0x214)&&(_0x169b8e[_0x181f2b(0x177)]=_0x181f2b(0x225));}}lastBalances={...lastBalances,'portfolio':JSON[_0x181f2b(0x171)](_0x4383e6)},proxyEmit(_0x181f2b(0xaa),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x213e11=![];currentCoins['forEach'](_0x13aeca=>{const _0x5ea290=_0x5944;_0x213e11=allOpenOrders['find'](_0x1a494f=>_0x1a494f[_0x5ea290(0xa9)]==_0x13aeca[_0x5ea290(0xa9)]),_0x13aeca['orderstatus']=_0x213e11?_0x5ea290(0x1e1):_0x5ea290(0xe8);});}async function fetchBalance(_0x4bfbf9=!![]){const _0x48b0a5=_0x1e290f;let _0x1fbbd9;try{return _0x1fbbd9=await exchange[_0x48b0a5(0xdb)](),mybalances=_0x1fbbd9[_0x48b0a5(0x13a)],!![];}catch(_0x5ed16f){return!_0x4bfbf9?handleErrorNoStop(_0x5ed16f,'fetchBalance()'):await handleError(_0x5ed16f,_0x48b0a5(0x1b8)),![];}}async function getCoins(_0x8c1c21=0x0,_0x558881=!![],_0x3819df=config['basecoin'],_0x35e473){const _0x510dd9=_0x1e290f;let _0x39e3a4=[],_0x944b5d=[],_0x45f1f4=[];if(_0x8c1c21)await sleep(_0x8c1c21);if(botPaused)return[currentCoins,currentCoinsAll];let _0x5f5780=![],_0x3a3bf3=0x0,_0x479b52,_0xb1cc02;_0x35e473&&(_0x479b52=currentCoins[_0x510dd9(0xc3)](_0x513ad5=>_0x513ad5['coin']==_0x35e473[_0x510dd9(0x1c6)]),_0xb1cc02=_0x479b52[_0x510dd9(0x180)]);while(!_0x5f5780){const _0x29d674=await fetchBalance(_0x558881);if(_0x29d674){if(_0x35e473){if(mybalances[_0x35e473[_0x510dd9(0x1c6)]]!=_0xb1cc02)logger[_0x510dd9(0x1cc)](_0x510dd9(0x263)+_0x35e473[_0x510dd9(0x1c6)]+':\x20'+mybalances[_0x35e473[_0x510dd9(0x1c6)]]+'\x20('+_0xb1cc02+')'),_0x5f5780=!![];else{logger[_0x510dd9(0x1cc)](_0x510dd9(0x10a)+_0x35e473[_0x510dd9(0x1c6)]+':\x20'+mybalances[_0x35e473[_0x510dd9(0x1c6)]]+'\x20('+_0xb1cc02+')'),_0x3a3bf3++;if(_0x3a3bf3<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x510dd9(0x1cc)](_0x510dd9(0x23c)+_0x3a3bf3+'\x20attempts');break;}}}else break;}}for(const [_0x2e3082,_0x9fdbf1]of Object[_0x510dd9(0x262)](mybalances)){_0x45f1f4[_0x510dd9(0x107)](_0x2e3082);}config['portfolio'][_0x510dd9(0x20a)](_0x1967df=>{const _0x5bed7c=_0x510dd9;!_0x45f1f4['includes'](_0x1967df[_0x5bed7c(0x1c6)])&&(mybalances[_0x1967df[_0x5bed7c(0x1c6)]]=0x0);});if(_0x3819df=='')for(const [_0x10ca3,_0x57055c]of Object[_0x510dd9(0x262)](mybalances)){_0x57055c!=0x0&&_0x39e3a4[_0x510dd9(0x107)]({'coin':_0x10ca3});}else for(const [_0x57fdc6,_0x2c5c5d]of Object[_0x510dd9(0x262)](mybalances)){const _0x50cb22=config[_0x510dd9(0x22d)]['find'](_0x480904=>_0x480904[_0x510dd9(0x1c6)]==_0x57fdc6),_0x4053a7=_0x57fdc6+'/'+_0x3819df,_0x272851=_0x3819df+'/'+_0x57fdc6,_0x20e8f8=currentCoins[_0x510dd9(0xc3)](_0x4a8fdd=>_0x4a8fdd[_0x510dd9(0x1c6)]==_0x57fdc6);if((_0x2c5c5d!=0x0||_0x50cb22)&&(allSymbols[_0x510dd9(0x1d7)](_0x4053a7)||_0x57fdc6==_0x3819df))_0x20e8f8?_0x39e3a4[_0x510dd9(0x107)]({..._0x20e8f8,'number':Math[_0x510dd9(0x18e)](_0x2c5c5d+(_0x50cb22&&_0x50cb22[_0x510dd9(0x23b)]||0x0),0x0)}):_0x39e3a4[_0x510dd9(0x107)]({'coin':_0x57fdc6,'symbol':_0x4053a7,'reverse':![],'number':Math[_0x510dd9(0x18e)](_0x2c5c5d+(_0x50cb22&&_0x50cb22[_0x510dd9(0x23b)]||0x0),0x0),'orderstatus':'none'});else{if((_0x2c5c5d!=0x0||_0x50cb22)&&allSymbols[_0x510dd9(0x1d7)](_0x272851))_0x20e8f8?_0x39e3a4[_0x510dd9(0x107)]({..._0x20e8f8,'number':Math[_0x510dd9(0x18e)](_0x2c5c5d+(_0x50cb22&&_0x50cb22[_0x510dd9(0x23b)]||0x0),0x0)}):_0x39e3a4['push']({'coin':_0x57fdc6,'symbol':_0x272851,'reverse':!![],'number':Math[_0x510dd9(0x18e)](_0x2c5c5d+(_0x50cb22&&_0x50cb22[_0x510dd9(0x23b)]||0x0),0x0),'orderstatus':_0x510dd9(0xe8)});else _0x50cb22&&_0x39e3a4[_0x510dd9(0x107)]({'coin':_0x50cb22[_0x510dd9(0x1c6)],'symbol':_0x50cb22['symbol'],'reverse':_0x50cb22[_0x510dd9(0x17a)],'number':0x0,'orderstatus':_0x510dd9(0xe8)});}}return _0x39e3a4[_0x510dd9(0x21d)]((_0x5691b6,_0x33abb5)=>_0x5691b6['delta']<_0x33abb5[_0x510dd9(0x191)]?0x1:_0x33abb5[_0x510dd9(0x191)]<_0x5691b6[_0x510dd9(0x191)]?-0x1:0x0),_0x944b5d=cloneDeep(_0x39e3a4),_0x39e3a4=_0x39e3a4[_0x510dd9(0x190)](_0x1cbb92=>{const _0x3dc924=_0x510dd9,_0x3f863a=config[_0x3dc924(0x22d)][_0x3dc924(0xc3)](_0x4a2e3c=>_0x4a2e3c[_0x3dc924(0x1c6)]==_0x1cbb92[_0x3dc924(0x1c6)]);return _0x3f863a&&!_0x3f863a['excluded'];}),[_0x39e3a4,_0x944b5d];}async function getCoinNumber(_0x100ca2){const _0x42adfc=_0x1e290f;let _0x3ab63b;try{const _0x462e11=await exchange['fetchBalance']();_0x3ab63b=_0x462e11[_0x42adfc(0x13a)][_0x100ca2];}catch(_0x34f893){await handleError(_0x34f893,_0x42adfc(0x259));}return _0x3ab63b;}async function getOpenOrders(){const _0x254d1f=_0x1e290f;let _0x23f280;allOpenOrders=[];try{for(const _0x2e3835 of config[_0x254d1f(0x22d)]){!_0x2e3835[_0x254d1f(0x266)]&&_0x2e3835[_0x254d1f(0x1c6)]!=config[_0x254d1f(0xfe)]&&(_0x23f280=await exchange[_0x254d1f(0xcb)](_0x2e3835['symbol']),_0x23f280['length']>0x0&&allOpenOrders['push'](_0x23f280[0x0]));}}catch(_0x51702c){await handleError(_0x51702c,'getOpenOrders()');}}async function handleOpenOrders(_0x3a0bc4=0x0){const _0x2a8476=_0x1e290f;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x3a0bc4==0x0?(logger[_0x2a8476(0x1cc)](_0x2a8476(0x200)),_0x3a0bc4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2a8476(0x1cc)](_0x2a8476(0x18b)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x4673d2){const _0xc26843=_0x1e290f,_0x47de17=ccxt[_0xc26843(0xdc)][_0x4673d2['exchange'][_0xc26843(0x19a)]()],_0x10855e=new _0x47de17({'apiKey':_0x4673d2[_0xc26843(0xd7)],'secret':_0x4673d2[_0xc26843(0x118)],'options':{'defaultType':_0xc26843(0xc6)}});if(_0x4673d2[_0xc26843(0x12c)])_0x10855e[_0xc26843(0x108)]=_0x4673d2[_0xc26843(0x12c)];try{await _0x10855e[_0xc26843(0xdb)]();}catch(_0x383a70){logger[_0xc26843(0x1cc)](_0xc26843(0xee)+_0x383a70['toString']());throw _0x383a70;}}function cloneDeep(_0x2d35ad){return JSON['parse'](JSON['stringify'](_0x2d35ad));}async function getPortfolio(_0x16157b){const _0x1b282a=_0x1e290f;let _0x467ef4=[],_0x5b579e=[],_0x205c5d=[],_0x2fb15c;_0x16157b[_0x1b282a(0xd7)]=decryptRSA(secure[_0x1b282a(0x1c3)],_0x16157b[_0x1b282a(0xd7)]),_0x16157b[_0x1b282a(0x118)]=decryptRSA(secure[_0x1b282a(0x1c3)],_0x16157b[_0x1b282a(0x118)]);if(_0x16157b[_0x1b282a(0x12c)])_0x16157b['apiPassword']=decryptRSA(secure[_0x1b282a(0x1c3)],_0x16157b[_0x1b282a(0x12c)]);if(_0x16157b[_0x1b282a(0xd7)]!==_0x1b282a(0xf9)||_0x16157b[_0x1b282a(0x118)]!==_0x1b282a(0xf9)||_0x16157b[_0x1b282a(0x12c)]&&_0x16157b[_0x1b282a(0x12c)]!==_0x1b282a(0xf9)){if(config[_0x1b282a(0x1c4)]){if(_0x16157b[_0x1b282a(0xd7)]==_0x1b282a(0xf9))_0x16157b['apiKey']=config[_0x1b282a(0xd7)];if(_0x16157b[_0x1b282a(0x118)]=='************')_0x16157b[_0x1b282a(0x118)]=config[_0x1b282a(0x118)];if(_0x16157b[_0x1b282a(0x12c)]==_0x1b282a(0xf9))_0x16157b[_0x1b282a(0x12c)]=config[_0x1b282a(0x12c)];}try{await testAPI(_0x16157b);}catch(_0x4ae530){if(_0x4ae530[_0x1b282a(0x204)]()[_0x1b282a(0x1d7)](_0x1b282a(0xa4))){logHistory('error',_0x1b282a(0x1ea)),proxyEmit(_0x1b282a(0x183),![]);return;}else{logHistory('error',_0x1b282a(0x128)),logger['debug']('Error\x20details\x20(0):',_0x4ae530),proxyEmit(_0x1b282a(0x183),![]);return;}}exchange?updateExchange(_0x16157b[_0x1b282a(0xd7)],_0x16157b['apiSecret'],_0x16157b[_0x1b282a(0x12c)]):await initExchange(_0x16157b['exchange'],_0x16157b['apiKey'],_0x16157b[_0x1b282a(0x118)],_0x16157b[_0x1b282a(0x12c)]);await loadSymbols();const _0x25a31a=await getCoins(0x0,![],_0x16157b[_0x1b282a(0xfe)]);_0x205c5d=cloneDeep(_0x25a31a[0x1]);}else{const _0x48922f=await getCoins();_0x205c5d=cloneDeep(_0x48922f[0x1]);}if(_0x16157b[_0x1b282a(0xfe)]=='')proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x205c5d);else{_0x205c5d[_0x1b282a(0x20a)](_0x44c2e3=>{const _0x1fd293=_0x1b282a;if(_0x44c2e3['coin']!=_0x16157b[_0x1fd293(0xfe)]&&allSymbols['includes'](_0x44c2e3[_0x1fd293(0xa9)]))_0x467ef4['push'](_0x44c2e3[_0x1fd293(0xa9)]);});if(_0x467ef4[_0x1b282a(0x15c)]==0x0)logHistory(_0x1b282a(0x174),_0x1b282a(0xa7));else{try{_0x5b579e=await getTickers(_0x467ef4);}catch(_0x5c70d4){logHistory(_0x1b282a(0x174),_0x1b282a(0x128)),logger[_0x1b282a(0x1cc)](_0x1b282a(0x1a7),_0x5c70d4),proxyEmit(_0x1b282a(0x183),![]);return;}_0x205c5d['forEach'](_0x4efd3=>{const _0x1dc0ea=_0x1b282a;_0x4efd3[_0x1dc0ea(0x1c6)]!=_0x16157b[_0x1dc0ea(0xfe)]?_0x5b579e[_0x4efd3[_0x1dc0ea(0xa9)]]?_0x2fb15c=_0x4efd3[_0x1dc0ea(0x17a)]?0x1/_0x5b579e[_0x4efd3[_0x1dc0ea(0xa9)]][_0x1dc0ea(0x1bc)]:_0x5b579e[_0x4efd3[_0x1dc0ea(0xa9)]][_0x1dc0ea(0x1bc)]:_0x2fb15c=0x0:_0x2fb15c=0x1,_0x4efd3[_0x1dc0ea(0x194)]=formatResult(_0x2fb15c,0x8);}),await getMarketCap(_0x205c5d),proxyEmit(_0x1b282a(0x183),!![]),proxyEmit(_0x1b282a(0x1f8),_0x205c5d);}}}function truncateTradeAmount(_0x3f3f63,_0x2c1d34){const _0x994c54=_0x1e290f;let _0x2f5466=0x0;try{_0x2f5466=exchange[_0x994c54(0x1fe)](_0x3f3f63,_0x2c1d34);}catch(_0x8b5fe2){}return _0x2f5466;}function checkMinimums(_0x2f65d6){const _0x59e09f=_0x1e290f;let _0x92e47a=!![];const _0x1e1e22=!_0x2f65d6[_0x59e09f(0x17a)]?markets[_0x2f65d6[_0x59e09f(0xa9)]]['limits'][_0x59e09f(0x19e)]['min']:markets[_0x2f65d6[_0x59e09f(0xa9)]][_0x59e09f(0xc4)][_0x59e09f(0x140)]['min'],_0x58c9c0=!_0x2f65d6[_0x59e09f(0x17a)]?markets[_0x2f65d6[_0x59e09f(0xa9)]][_0x59e09f(0xc4)][_0x59e09f(0x140)][_0x59e09f(0x213)]:markets[_0x2f65d6[_0x59e09f(0xa9)]][_0x59e09f(0xc4)][_0x59e09f(0x19e)][_0x59e09f(0x213)],_0x2f7e34=truncateTradeAmount(_0x2f65d6[_0x59e09f(0xa9)],_0x2f65d6[_0x59e09f(0x145)]);_0x2f65d6[_0x59e09f(0x145)]=_0x2f7e34;if(Math['abs'](_0x2f7e34)<_0x1e1e22)_0x92e47a=![];if(Math['abs'](_0x2f7e34)*_0x2f65d6['last']<_0x58c9c0)_0x92e47a=![];if(_0x2f65d6[_0x59e09f(0x223)]==_0x59e09f(0x1b3)){let _0x1c25d3=config[_0x59e09f(0x22d)]['find'](_0x2dc598=>_0x2dc598['coin']==_0x2f65d6['coin']);if(_0x1c25d3[_0x59e09f(0x23b)]>0x0){if(Math[_0x59e09f(0x13f)](_0x2f7e34)>_0x2f65d6['number']-_0x1c25d3[_0x59e09f(0x23b)])_0x92e47a=![];}else{if(Math[_0x59e09f(0x13f)](_0x2f7e34)>_0x2f65d6[_0x59e09f(0x180)])_0x92e47a=![];}}if(_0x2f65d6['side']==_0x59e09f(0x117)){let _0x4129d1=config['portfolio'][_0x59e09f(0xc3)](_0x567d35=>_0x567d35['coin']==config[_0x59e09f(0xfe)]),_0x2c96a4=currentCoins['find'](_0xe35719=>_0xe35719[_0x59e09f(0x1c6)]==config[_0x59e09f(0xfe)]);if(_0x4129d1[_0x59e09f(0x23b)]>0x0){if(Math[_0x59e09f(0x13f)](_0x2f7e34)*_0x2f65d6[_0x59e09f(0x1bc)]>_0x2c96a4[_0x59e09f(0x180)]-_0x4129d1['offset'])_0x92e47a=![];}else{if(Math[_0x59e09f(0x13f)](_0x2f7e34)*_0x2f65d6[_0x59e09f(0x1bc)]>_0x2c96a4[_0x59e09f(0x180)])_0x92e47a=![];}}return _0x92e47a;}async function getBalances(_0x3d5964=!![]){const _0x2d58b5=_0x1e290f;let _0x2c0a71=0x0,_0x5c3a3a;const _0x5447a9=config[_0x2d58b5(0xd2)];if(config[_0x2d58b5(0x18f)]&&config[_0x2d58b5(0x1ca)]<0x0)await validate24hChanges();currentCoins[_0x2d58b5(0x20a)](_0x3fd21f=>{const _0x17fee8=_0x2d58b5;if(_0x3fd21f[_0x17fee8(0x1c6)]!=config[_0x17fee8(0xfe)]){let _0x3e97b5=gTicker[noslash(_0x3fd21f['symbol'])];_0x5c3a3a=_0x3fd21f[_0x17fee8(0x17a)]?0x1/_0x3e97b5:_0x3e97b5;}else _0x5c3a3a=0x1;let _0x501eab=_0x3fd21f[_0x17fee8(0x180)]*_0x5c3a3a;_0x2c0a71+=_0x501eab,_0x3fd21f['last']=formatResult(Number(_0x5c3a3a),0x8),_0x3fd21f[_0x17fee8(0x1dd)]=_0x501eab;}),currentCoins['forEach'](_0x30d563=>{const _0x5d71cb=_0x2d58b5;let _0x354111=config[_0x5d71cb(0x22d)]['find'](_0x3b417a=>_0x3b417a[_0x5d71cb(0x1c6)]==_0x30d563[_0x5d71cb(0x1c6)]),_0x25fd4e=Number(_0x354111[_0x5d71cb(0x199)]),_0x139491=_0x30d563['value']/_0x2c0a71*0x64,_0x21a029=_0x25fd4e*_0x2c0a71/0x64/_0x30d563[_0x5d71cb(0x1bc)]-_0x30d563['number'];_0x30d563['distribution']=formatResult(_0x139491,0x3),_0x30d563['target']=formatResult(_0x25fd4e,0x3),_0x30d563[_0x5d71cb(0x145)]=formatResult(_0x21a029,0x8),_0x30d563[_0x5d71cb(0x223)]='',_0x30d563[_0x5d71cb(0xd9)]=![];if(_0x30d563[_0x5d71cb(0x1c6)]!=config['basecoin']){if(_0x30d563[_0x5d71cb(0x199)]>_0x25fd4e)_0x30d563['side']=_0x5d71cb(0x1b3),_0x30d563[_0x5d71cb(0xd9)]=checkMinimums(_0x30d563);else _0x30d563[_0x5d71cb(0x199)]<_0x25fd4e&&(_0x30d563['side']=_0x5d71cb(0x117),_0x30d563[_0x5d71cb(0xd9)]=checkMinimums(_0x30d563));}_0x30d563[_0x5d71cb(0x191)]=_0x30d563[_0x5d71cb(0x199)]/_0x30d563[_0x5d71cb(0xdf)]-0x1;if(_0x30d563[_0x5d71cb(0x177)]=='filled'||_0x30d563['orderstatus']==_0x5d71cb(0x193))_0x30d563[_0x5d71cb(0x177)]=_0x5d71cb(0xe8);}),currentCoins[_0x2d58b5(0x21d)]((_0x24e2b8,_0x10045e)=>_0x24e2b8[_0x2d58b5(0x191)]<_0x10045e[_0x2d58b5(0x191)]?0x1:_0x10045e['delta']<_0x24e2b8['delta']?-0x1:0x0);const _0x1370ac=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1370ac['eur'],'usd':_0x1370ac[_0x2d58b5(0x104)],'portfolio':JSON[_0x2d58b5(0x171)](currentCoins),'threshold':_0x5447a9},proxyEmit(_0x2d58b5(0xaa),{'serverversion':serverversion,'balances':lastBalances});if(_0x3d5964){if(config[_0x2d58b5(0x18f)])headlessMode({'portfolio':currentCoins,'threshold':_0x5447a9});else{if(lockOrders==ORDERS[_0x2d58b5(0xbc)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5447a9});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2ee2ec=getNormalizedPerformance();getStartingBalances(_0x2ee2ec),emitPerformance(_0x2ee2ec);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5d34e8=_0x1e290f;if(!lastBalances)return;let _0x3c1142=[],_0x162748,_0x5da879=JSON[_0x5d34e8(0x1a9)](lastBalances[_0x5d34e8(0x22d)]);_0x5da879[_0x5d34e8(0x21d)]((_0x219cb5,_0x3bd7e9)=>_0x219cb5[_0x5d34e8(0x1c6)]>_0x3bd7e9[_0x5d34e8(0x1c6)]?0x1:_0x3bd7e9[_0x5d34e8(0x1c6)]>_0x219cb5['coin']?-0x1:0x0),_0x5da879[_0x5d34e8(0x20a)](_0x6ca056=>{const _0x4bb0e9=_0x5d34e8;let _0x3b5d5a={'coin':_0x6ca056[_0x4bb0e9(0x1c6)],'number':_0x6ca056[_0x4bb0e9(0x180)],'price':_0x6ca056['last']};_0x3c1142[_0x4bb0e9(0x107)](_0x3b5d5a);});const _0x3ce9c2=await getFiat();_0x162748={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x3ce9c2[_0x5d34e8(0xea)],'usd':_0x3ce9c2[_0x5d34e8(0x104)],'coins':_0x3c1142};let _0x56c8b8=dbPerformance['get'](_0x5d34e8(0x233))[_0x5d34e8(0xc3)]({'date':_0x162748[_0x5d34e8(0x23e)]})[_0x5d34e8(0x1dd)]();_0x56c8b8?_0x162748[_0x5d34e8(0x23e)]!=config[_0x5d34e8(0x24b)]&&dbPerformance[_0x5d34e8(0x11b)]('data')['find']({'date':_0x162748['date']})[_0x5d34e8(0x1db)](_0x162748)[_0x5d34e8(0x197)]():dbPerformance[_0x5d34e8(0x11b)](_0x5d34e8(0x233))['push'](_0x162748)[_0x5d34e8(0x197)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2bb486=_0x1e290f;let _0x30beb7=[];if(dbPerformance['has'](_0x2bb486(0x233))[_0x2bb486(0x1dd)]()){let _0x337e49=dbPerformance[_0x2bb486(0x11b)](_0x2bb486(0x233))['cloneDeep']()[_0x2bb486(0x190)](_0x598ce7=>{const _0x111d08=_0x2bb486;if(_0x598ce7[_0x111d08(0x1bd)][_0x111d08(0x15c)]==0x0)return![];else return!![];})[_0x2bb486(0x21b)](_0x2bb486(0x23e))['value'](),_0x53609b=[...config['liquidity']];_0x53609b[_0x2bb486(0x21d)]((_0x13b76f,_0x508d7c)=>_0x13b76f[_0x2bb486(0x23e)]>_0x508d7c[_0x2bb486(0x23e)]?-0x1:_0x508d7c[_0x2bb486(0x23e)]>_0x13b76f[_0x2bb486(0x23e)]?0x1:0x0);let _0x11c8aa=0x1,_0x207a43=[],_0x58c7a7=0x0;_0x337e49[_0x2bb486(0x156)]()['reverse']()[_0x2bb486(0x20a)]((_0x5d8c4b,_0x1995cc)=>{const _0x173794=_0x2bb486;if(_0x53609b[_0x58c7a7]){if(_0x337e49[_0x337e49[_0x173794(0x15c)]-_0x1995cc]&&_0x53609b[_0x58c7a7]['date']==_0x337e49[_0x337e49[_0x173794(0x15c)]-_0x1995cc][_0x173794(0x23e)]){if(_0x1995cc<_0x337e49[_0x173794(0x15c)]){let _0x4d8ebb=0x0,_0x522bc1=0x0;_0x337e49[_0x337e49[_0x173794(0x15c)]-_0x1995cc]['coins'][_0x173794(0x20a)](_0x2adea7=>{const _0x1bac92=_0x173794;_0x522bc1+=_0x2adea7[_0x1bac92(0x180)]*_0x2adea7['price'];}),_0x53609b[_0x58c7a7][_0x173794(0xf8)][_0x173794(0x20a)](_0x18a552=>{const _0x15b810=_0x173794;_0x4d8ebb+=_0x18a552[_0x15b810(0x180)]*_0x18a552['price'];}),_0x11c8aa*=_0x4d8ebb/(_0x522bc1-_0x4d8ebb)+0x1;}_0x58c7a7++;}}let _0xaf38f=0x0;_0x5d8c4b[_0x173794(0x1bd)][_0x173794(0x20a)](_0xe026c7=>{const _0x8958d5=_0x173794;_0xaf38f+=_0xe026c7[_0x8958d5(0x180)]*_0xe026c7[_0x8958d5(0x194)];}),_0x207a43[_0x337e49[_0x173794(0x15c)]-_0x1995cc-0x1]=_0xaf38f*(_0x11c8aa-0x1);});let _0x21c948=[];_0x53609b=[...config['liquidity']]||[];let _0x58e30c=0x0;_0x58c7a7=0x0,_0x337e49[_0x2bb486(0x20a)]((_0x1caece,_0x4edfb0)=>{const _0x576b70=_0x2bb486;if(_0x53609b[_0x58c7a7]){const _0x31f624=fns[_0x576b70(0x1a9)](_0x53609b[_0x58c7a7][_0x576b70(0x23e)],'yyyy/MM/dd',new Date()),_0x14dbdb=fns[_0x576b70(0x1a9)](_0x1caece[_0x576b70(0x23e)],'yyyy/MM/dd',new Date());if(fns[_0x576b70(0x221)](_0x31f624,_0x14dbdb)){let _0x2313e1=0x0;_0x53609b[_0x58c7a7][_0x576b70(0xf8)][_0x576b70(0x20a)](_0x4915a7=>{const _0x5cc921=_0x576b70;!_0x21c948[_0x4915a7[_0x5cc921(0x1c6)]]?_0x21c948[_0x4915a7[_0x5cc921(0x1c6)]]=_0x4915a7[_0x5cc921(0x180)]:(_0x2313e1=_0x21c948[_0x4915a7[_0x5cc921(0x1c6)]],_0x21c948[_0x4915a7[_0x5cc921(0x1c6)]]+=_0x4915a7[_0x5cc921(0x180)]);const _0x311b71=_0x1caece[_0x5cc921(0x1bd)][_0x5cc921(0xc3)](_0x489579=>_0x489579[_0x5cc921(0x1c6)]==_0x4915a7[_0x5cc921(0x1c6)]);(!_0x311b71||_0x311b71['number']==0x0)&&(_0x58e30c+=(-_0x4915a7[_0x5cc921(0x180)]-_0x2313e1)*_0x4915a7[_0x5cc921(0x194)]);}),_0x58c7a7++;}}_0x1caece['coins'][_0x576b70(0x20a)]((_0x53be41,_0x105e06)=>{const _0x57bb9c=_0x576b70;_0x21c948[_0x53be41['coin']]&&(_0x53be41[_0x57bb9c(0x105)]=_0x21c948[_0x53be41[_0x57bb9c(0x1c6)]]);}),_0x30beb7[_0x576b70(0x107)]({'date':_0x1caece[_0x576b70(0x23e)],'eur':_0x1caece[_0x576b70(0xea)],'usd':_0x1caece[_0x576b70(0x104)],'offset':_0x207a43[_0x4edfb0],'netoffset':_0x58e30c,'coins':_0x1caece['coins']});});}return _0x30beb7;}function emitPerformance(_0x22ec65){const _0x43fd82=_0x1e290f;_0x22ec65['length']!==0x0?(proxyEmit('performance',_0x22ec65),lastPerformanceEmitted=getDate()):proxyEmit(_0x43fd82(0x1ac),[]);}function getPerf(_0x70c756,_0x50bfe2){const _0x1def87=_0x1e290f;let _0x32c17c=0x0,_0x107d1a=0x0,_0x3e0c78=0x0;_0x70c756[_0x1def87(0x1bd)][_0x1def87(0x20a)](_0x3fe665=>{const _0x40e235=_0x1def87;_0x32c17c+=_0x3fe665['number']*_0x3fe665[_0x40e235(0x194)];});_0x50bfe2&&(_0x32c17c+=_0x70c756['offset']);if(config[_0x1def87(0xfe)]==='BTC'||config['basecoin']===_0x1def87(0x1f1)||config[_0x1def87(0xfe)]==='PAXG')_0x107d1a=_0x32c17c*_0x70c756['eur'],_0x3e0c78=_0x32c17c*_0x70c756['usd'];else{if(usdBasecoins[_0x1def87(0x1d7)](config[_0x1def87(0xfe)]))_0x107d1a=_0x32c17c*_0x70c756[_0x1def87(0xea)]/_0x70c756[_0x1def87(0x104)],_0x3e0c78=_0x32c17c;else config[_0x1def87(0xfe)]===_0x1def87(0x1a5)&&(_0x107d1a=_0x32c17c,_0x3e0c78=_0x32c17c*_0x70c756[_0x1def87(0x104)]/_0x70c756[_0x1def87(0xea)]);}return[_0x32c17c,_0x107d1a,_0x3e0c78];}function getKPIs(_0x587aaa,_0x523558='EUR'){const _0x2c1929=_0x1e290f,_0x39a42c=config['basecoin'],_0x470c78=lastBalances,_0x10a0f7=currentCoins,_0x18bbc7=getNormalizedPerformance(),_0x359df7=_0x587aaa==='basecoin'?_0x39a42c:_0x587aaa===_0x2c1929(0x261)||_0x587aaa===_0x2c1929(0x220)?_0x523558:'Net\x20'+_0x39a42c,_0x12fc72=_0x587aaa==='net-basecoin'?_0x2c1929(0x15f):_0x587aaa===_0x2c1929(0x220)?_0x2c1929(0x15f):_0x359df7+'\x20value',_0x1eb07f=_0x587aaa==='net-basecoin'||_0x587aaa===_0x2c1929(0x220)?_0x2c1929(0x15f):_0x359df7+_0x2c1929(0x148);let _0x31a221=0x0;_0x10a0f7[_0x2c1929(0x20a)](_0x3cfddc=>{const _0x5782a0=_0x2c1929;_0x31a221+=_0x3cfddc[_0x5782a0(0x180)]*_0x3cfddc[_0x5782a0(0x1bc)];});if(_0x587aaa==='fiat'||_0x587aaa===_0x2c1929(0x220)){if(_0x39a42c===_0x2c1929(0xc1)||_0x39a42c===_0x2c1929(0x1f1)||_0x39a42c==='PAXG')_0x31a221=_0x31a221*(_0x523558===_0x2c1929(0x1a5)?_0x470c78[_0x2c1929(0xea)]:_0x470c78[_0x2c1929(0x104)]);else{if(usdBasecoins[_0x2c1929(0x1d7)](_0x39a42c))_0x31a221=_0x31a221*(_0x523558==='EUR'?_0x470c78['eur']/_0x470c78['usd']:0x1);else _0x39a42c===_0x2c1929(0x1a5)&&(_0x31a221=_0x31a221*(_0x523558===_0x2c1929(0x1a5)?0x1:_0x470c78['usd']/_0x470c78['eur']));}}let _0x3a9318;if(_0x31a221!==0x0){if(_0x587aaa===_0x2c1929(0xfe))_0x3a9318=(_0x31a221/startingBalances[_0x2c1929(0xfe)]-0x1)*0x64;else{if(_0x523558==='EUR')_0x3a9318=(_0x31a221/startingBalances[_0x2c1929(0xea)]-0x1)*0x64;else _0x3a9318=(_0x31a221/startingBalances[_0x2c1929(0x104)]-0x1)*0x64;}let _0x21d0ec=0x0;if(startingBalances[_0x2c1929(0x1bd)])_0x10a0f7['forEach'](_0x13e8a5=>{const _0x17e916=_0x2c1929;let _0x427150=startingBalances[_0x17e916(0x1bd)]['find'](_0x2c3362=>_0x2c3362[_0x17e916(0x1c6)]===_0x13e8a5[_0x17e916(0x1c6)]);if(_0x427150&&_0x427150[_0x17e916(0x1c6)]&&_0x13e8a5[_0x17e916(0x180)]!==0x0)_0x21d0ec+=_0x427150[_0x17e916(0x180)]*_0x13e8a5[_0x17e916(0x1bc)];});let _0x39cc5c=0x0;if(_0x18bbc7[_0x2c1929(0x15c)]!==0x0){let _0x437bd5=_0x18bbc7[_0x18bbc7['length']-0x1];_0x39cc5c=_0x437bd5[_0x2c1929(0x14e)];}_0x21d0ec-=_0x39cc5c;_0x587aaa===_0x2c1929(0x185)&&(_0x3a9318=(_0x31a221-_0x21d0ec)/startingBalances[_0x2c1929(0xfe)]*0x64,_0x31a221=_0x31a221-_0x21d0ec);if(_0x587aaa===_0x2c1929(0x220)){let _0x15daab=_0x523558===_0x2c1929(0x1a5)?startingBalances[_0x2c1929(0xea)]:startingBalances[_0x2c1929(0x104)];if(_0x39a42c===_0x2c1929(0xc1)||_0x39a42c===_0x2c1929(0x1f1)||_0x39a42c===_0x2c1929(0xe7))_0x21d0ec=_0x523558===_0x2c1929(0x1a5)?_0x21d0ec*_0x470c78['eur']:_0x21d0ec*_0x470c78['usd'];else{if(usdBasecoins[_0x2c1929(0x1d7)](_0x39a42c))_0x21d0ec=_0x523558===_0x2c1929(0x1a5)?_0x21d0ec*_0x470c78[_0x2c1929(0xea)]/_0x470c78[_0x2c1929(0x104)]:_0x21d0ec;else _0x39a42c==='EUR'&&(_0x21d0ec=_0x523558===_0x2c1929(0x1a5)?_0x21d0ec:_0x21d0ec*_0x470c78[_0x2c1929(0x104)]/_0x470c78[_0x2c1929(0xea)]);}_0x3a9318=(_0x31a221-_0x21d0ec)/_0x15daab*0x64,_0x31a221=_0x31a221-_0x21d0ec;}if(_0x3a9318){if(_0x3a9318<0x64)_0x3a9318=_0x3a9318[_0x2c1929(0x267)](0x2);else{if(_0x3a9318<0x3e8)_0x3a9318=_0x3a9318[_0x2c1929(0x267)](0x1);else _0x3a9318=_0x3a9318[_0x2c1929(0x267)](0x0);}}else _0x3a9318=Number('0')[_0x2c1929(0x267)](0x2);if(_0x31a221){if(Math[_0x2c1929(0x13f)](_0x31a221)<0.000001)_0x31a221=_0x31a221[_0x2c1929(0x267)](0x2);else{if(Math[_0x2c1929(0x13f)](_0x31a221)<0.1)_0x31a221=_0x31a221[_0x2c1929(0x267)](0x6);else{if(Math['abs'](_0x31a221)<0x1)_0x31a221=_0x31a221[_0x2c1929(0x267)](0x5);else{if(Math['abs'](_0x31a221)<0xa)_0x31a221=_0x31a221['toFixed'](0x4);else{if(Math[_0x2c1929(0x13f)](_0x31a221)<0x64)_0x31a221=_0x31a221['toFixed'](0x3);else{if(Math['abs'](_0x31a221)<0x3e8)_0x31a221=_0x31a221[_0x2c1929(0x267)](0x2);else _0x31a221=_0x31a221[_0x2c1929(0x267)](0x2);}}}}}}else _0x31a221=Number('0')[_0x2c1929(0x267)](0x2);}else _0x3a9318=Number('0')[_0x2c1929(0x267)](0x2);return{'value':_0x31a221,'change':_0x3a9318,'leftTxt':_0x12fc72,'rightTxt':_0x1eb07f};}async function getStartingBalances(_0x6b8a5d,_0x4e5233=!![]){const _0x728df0=_0x1e290f;if(_0x6b8a5d[_0x728df0(0x15c)]!==0x0){const [_0x17c2c4,_0x5c2744,_0x5ee3f4]=getPerf(_0x6b8a5d[0x0],!![]);let _0x5a70e1=[];config[_0x728df0(0x22d)][_0x728df0(0x20a)](_0x4186c2=>{const _0x2f15a1=_0x728df0;let _0x540061=0x0,_0x2b1e31;config['liquidity'][_0x2f15a1(0x20a)](_0x33d3ff=>{const _0x4eecc1=_0x2f15a1;let _0x2d8af7=_0x33d3ff[_0x4eecc1(0xf8)][_0x4eecc1(0xc3)](_0x524cec=>_0x524cec[_0x4eecc1(0x1c6)]==_0x4186c2[_0x4eecc1(0x1c6)]);if(_0x2d8af7){_0x540061+=_0x2d8af7[_0x4eecc1(0x180)];if(!_0x2b1e31)_0x2b1e31=_0x2d8af7[_0x4eecc1(0x194)];}}),_0x5a70e1['push']({'coin':_0x4186c2[_0x2f15a1(0x1c6)],'number':_0x540061,'initialprice':_0x2b1e31});});const _0xca4d87={'basecoin':_0x17c2c4,'eur':_0x5c2744,'usd':_0x5ee3f4,'coins':_0x5a70e1};if(_0x4e5233)proxyEmit('starting-balances',_0xca4d87);startingBalances=_0xca4d87;}}function headlessMode(_0x5c681d){const _0x5c4010=_0x1e290f;let _0x12a40c=_0x5c681d['portfolio'],_0x3b911e=_0x5c681d[_0x5c4010(0xd2)],_0x147a9e=[];for(let _0x4b78de of _0x12a40c){if(_0x4b78de[_0x5c4010(0x1c6)]!=config[_0x5c4010(0xfe)]){if(_0x4b78de[_0x5c4010(0x191)]>=_0x3b911e/0x64){if(_0x4b78de[_0x5c4010(0xd9)])_0x147a9e[_0x5c4010(0x107)](_0x4b78de);}else{if(_0x4b78de['delta']<=-_0x3b911e/0x64){if(_0x4b78de[_0x5c4010(0xd9)])_0x147a9e[_0x5c4010(0x107)](_0x4b78de);}}}}_0x147a9e[_0x5c4010(0x15c)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x147a9e[_0x5c4010(0x20a)](_0x38727a=>{const _0x3b5405=_0x5c4010;logger['debug'](_0x3b5405(0x14a)+_0x38727a['coin']+'\x20'+_0x38727a[_0x3b5405(0x180)]+'\x20'+_0x38727a['last']+'\x20'+_0x38727a[_0x3b5405(0x199)]+'%\x20'+_0x38727a['target']+'%\x20'+(0x64*_0x38727a[_0x3b5405(0x191)])['toFixed'](0x2)+_0x3b5405(0x132)+_0x3b911e[_0x3b5405(0x267)](0x2)+'%)');}),placeOrder(_0x147a9e));}function notifyBalance(_0x4933f2){const _0x43fb94=_0x1e290f;let _0x3e39e5=_0x4933f2[_0x43fb94(0x22d)],_0x2d7155=_0x4933f2[_0x43fb94(0xd2)],_0x24f81e=[];for(let _0x2691c1 of _0x3e39e5){if(_0x2691c1[_0x43fb94(0x1c6)]!=config[_0x43fb94(0xfe)]){if(_0x2691c1['delta']>=_0x2d7155/0x64){if(_0x2691c1['valid'])_0x24f81e[_0x43fb94(0x107)](_0x2691c1);}else{if(_0x2691c1['delta']<=-_0x2d7155/0x64){if(_0x2691c1[_0x43fb94(0xd9)])_0x24f81e[_0x43fb94(0x107)](_0x2691c1);}}}}if(_0x24f81e[_0x43fb94(0x15c)]>0x0){let _0x31fdec=_0x24f81e['map'](_0x3da682=>_0x3da682[_0x43fb94(0x1c6)]);_0x31fdec[_0x43fb94(0x21d)]();let _0x4fc488=_0x31fdec[_0x43fb94(0x19f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x43fb94(0x147),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x4fc488;}}function symbolToCoin(_0x55ba3f){const _0x33084a=_0x1e290f;let _0x25e3c4;if(_0x55ba3f[_0x33084a(0x1d7)]('/'+config[_0x33084a(0xfe)]))_0x25e3c4=_0x55ba3f[_0x33084a(0x9a)]('/'+config['basecoin'],'');if(_0x55ba3f[_0x33084a(0x1d7)](config[_0x33084a(0xfe)]+'/'))_0x25e3c4=_0x55ba3f[_0x33084a(0x9a)](config['basecoin']+'/','');return _0x25e3c4;}async function unlockOrders(_0x29ec81=![]){const _0xb1e17e=_0x1e290f;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0xb1e17e(0x1cc)](_0xb1e17e(0x1dc)),lockOrders=ORDERS[_0xb1e17e(0x181)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x29ec81){const _0x578098=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x578098,setBlockTransactionDetection(![]);}validateOrdersState=_0xb1e17e(0x105),persistOpenOrders([]),lockOrders=ORDERS[_0xb1e17e(0xbc)],logger[_0xb1e17e(0x1cc)](_0xb1e17e(0x139));}}async function validateOrders(_0x4dbc0e){const _0x37a81d=_0x1e290f;if(_0x4dbc0e)validateOrdersState=_0x4dbc0e;logger['debug'](_0x37a81d(0x150)+validateOrdersState+_0x37a81d(0x11c)+(lockOrders==0x1?_0x37a81d(0x187):lockOrders==0x2?'ORDERS.UNLOCKING':_0x37a81d(0xe9)));let _0x136b76=[],_0x29354d=config[_0x37a81d(0xec)]==_0x37a81d(0x144)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x37a81d(0x1d9)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x37a81d(0x9f)])return;logger[_0x37a81d(0x1cc)](_0x37a81d(0x11d)+validateOrdersState),lastOrders[_0x37a81d(0x20a)](_0x4b33cf=>{const _0x44bdb2=_0x37a81d;let _0x1578e5=![];_0x4b33cf[_0x44bdb2(0x225)]>0x0&&(_0x1578e5=!![]),_0x136b76[_0x44bdb2(0x107)](_0x1578e5),_0x1578e5&&config[_0x44bdb2(0xec)]!=_0x44bdb2(0x144)&&logHistory('order',_0x44bdb2(0x1f2)+_0x4b33cf[_0x44bdb2(0xa9)]+'\x20'+_0x4b33cf[_0x44bdb2(0x223)]+'\x20#'+formatResult(_0x4b33cf['filled'],0x8)+'\x20@'+formatResult(_0x4b33cf[_0x44bdb2(0x194)],0x8));}),_0x136b76[_0x37a81d(0x20a)]((_0x5d286b,_0x2b6b59)=>{const _0x1b3ea4=_0x37a81d;if(_0x5d286b)lastOrders[_0x1b3ea4(0x1a2)](_0x2b6b59,0x1);}),persistOpenOrders(lastOrders);const _0x19bb52=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x37a81d(0x105)){validateOrdersState='ongoing';if(_0x136b76[_0x37a81d(0x1d7)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x136b76['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x37a81d(0x1cb))_0x136b76[_0x37a81d(0x1d7)](![])&&(config['ordertype']=='market'?logHistory(_0x37a81d(0x175),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x37a81d(0xa5)](_0x29354d*validateOrderInterval/0xea60)+_0x37a81d(0x24c)+_0x19bb52):(await cancelOrders(),logHistory(_0x37a81d(0x175),_0x37a81d(0x21a)+Math[_0x37a81d(0xa5)](_0x29354d*validateOrderInterval/0xea60)+_0x37a81d(0x24c)+_0x19bb52))),await unlockOrders(!![]);else{if(validateOrdersState==_0x37a81d(0xcd)){if(config[_0x37a81d(0xec)]!=_0x37a81d(0x144))logHistory(_0x37a81d(0x175),_0x37a81d(0xd8)+_0x19bb52);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x5792ef=_0x1e290f;lastOrders[_0x5792ef(0x20a)](async _0xb3730c=>{const _0x1ea1fb=_0x5792ef;try{const _0xe01ff6=await exchange[_0x1ea1fb(0x99)](_0xb3730c[_0x1ea1fb(0x269)],_0xb3730c[_0x1ea1fb(0xa9)]);}catch(_0x40b3ad){if(_0x40b3ad[_0x1ea1fb(0x204)]()['includes'](_0x1ea1fb(0x241))){}else await handleError(_0x40b3ad,_0x1ea1fb(0x21e));}});}async function initCoinResults(_0x471521){const _0x242e99=_0x1e290f;_0x471521?logger[_0x242e99(0x1cc)]('Resetting\x20coin\x20results:\x20'+_0x471521):logger['debug'](_0x242e99(0x152)),config['portfolio'][_0x242e99(0x20a)](_0x586f55=>{const _0x32f177=_0x242e99;if(!_0x586f55[_0x32f177(0x266)]&&_0x586f55[_0x32f177(0x1c6)]!=config['basecoin']){const _0x3c3210=currentCoins[_0x32f177(0xc3)](_0x4eb3bf=>_0x4eb3bf[_0x32f177(0x1c6)]==_0x586f55['coin']),_0x129f05=gTicker[noslash(_0x586f55[_0x32f177(0xa9)])];let _0x41c997=_0x3c3210?_0x3c3210[_0x32f177(0x180)]:null,_0x34493a=_0x586f55[_0x32f177(0x17a)]?0x1/_0x129f05:_0x129f05,_0x3025d9;config[_0x32f177(0xb4)][_0x32f177(0x20a)](_0x3edc1c=>{const _0x34098f=_0x32f177;!_0x3025d9&&(_0x3025d9=_0x3edc1c[_0x34098f(0xf8)][_0x34098f(0xc3)](_0x3e8bda=>_0x3e8bda[_0x34098f(0x1c6)]==_0x586f55[_0x34098f(0x1c6)]),_0x3025d9&&(_0x41c997=_0x3025d9[_0x34098f(0x180)],_0x34493a=_0x3025d9['price']));});let _0x1e7d9b=dbCoinResults[_0x32f177(0x11b)](_0x32f177(0x1bd))['find']({'coin':_0x586f55[_0x32f177(0x1c6)]})['value']();if(!_0x1e7d9b){const _0x1d0a70={'coin':_0x586f55[_0x32f177(0x1c6)],'number':_0x41c997,'breakeven':_0x34493a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x32f177(0x1bd))[_0x32f177(0x107)](_0x1d0a70)[_0x32f177(0x197)]();}else{if(_0x471521&&_0x586f55['coin']==_0x471521){const _0x1aeb6d={'coin':_0x586f55[_0x32f177(0x1c6)],'number':_0x41c997,'breakeven':_0x34493a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x32f177(0x11b)](_0x32f177(0x1bd))[_0x32f177(0xc3)]({'coin':_0x586f55[_0x32f177(0x1c6)]})[_0x32f177(0x1db)](_0x1aeb6d)[_0x32f177(0x197)]();}}}});}async function updateCoinResults(_0x59fe46,_0x4dcce3=![]){const _0x568cb0=_0x1e290f;let _0x314954,_0xf215,_0x1551cb,_0x3bcd2a,_0x26aae0,_0x4c2154,_0x290893=dbCoinResults['get'](_0x568cb0(0x1bd))[_0x568cb0(0xc3)]({'coin':_0x59fe46[_0x568cb0(0x1c6)]})[_0x568cb0(0x1dd)](),_0x586a74=![];_0x290893&&Object['entries'](_0x290893)[_0x568cb0(0x20a)](([_0x3dec9f,_0x1f886a])=>{if(_0x1f886a==null)_0x586a74=!![];});(!_0x290893||_0x586a74)&&(await initCoinResults(_0x59fe46[_0x568cb0(0x1c6)]),_0x290893=dbCoinResults[_0x568cb0(0x11b)](_0x568cb0(0x1bd))[_0x568cb0(0xc3)]({'coin':_0x59fe46[_0x568cb0(0x1c6)]})['value']());_0x59fe46['reverse']&&(_0x4c2154={'filled':_0x59fe46[_0x568cb0(0x225)]*_0x59fe46[_0x568cb0(0x194)],'amount':_0x59fe46['filled']*_0x59fe46[_0x568cb0(0x194)],'side':_0x59fe46['side']==_0x568cb0(0x1b3)?_0x568cb0(0x117):'sell','price':0x1/_0x59fe46[_0x568cb0(0x194)]},_0x59fe46={..._0x59fe46,..._0x4c2154});_0x4dcce3?_0xf215=_0x59fe46[_0x568cb0(0x223)]==_0x568cb0(0x117)?_0x290893['number']+_0x59fe46[_0x568cb0(0x225)]:_0x290893[_0x568cb0(0x180)]-_0x59fe46[_0x568cb0(0x225)]:_0xf215=await getCoinNumber(_0x59fe46[_0x568cb0(0x1c6)]);if(_0x59fe46[_0x568cb0(0x1c2)]&&_0x59fe46[_0x568cb0(0x1c2)]['currency']==config['basecoin'])_0x314954=Number(_0x59fe46[_0x568cb0(0x1c2)][_0x568cb0(0x140)]);else{if(_0x59fe46['fee']&&_0x59fe46[_0x568cb0(0x1c2)][_0x568cb0(0xc2)]==_0x568cb0(0x240)&&!_0x4dcce3&&config[_0x568cb0(0xfe)]!='PAXG')_0x314954=Number(_0x59fe46['fee'][_0x568cb0(0x140)])*gTicker[_0x568cb0(0x240)+config[_0x568cb0(0xfe)]];else _0x314954=defaultFee*_0x59fe46[_0x568cb0(0x225)]*_0x59fe46[_0x568cb0(0x194)];}_0x59fe46['side']==_0x568cb0(0x117)?(_0x1551cb=_0xf215!=0x0?(_0x290893[_0x568cb0(0x168)]*_0x290893[_0x568cb0(0x180)]+_0x59fe46[_0x568cb0(0x194)]*(_0xf215-_0x290893[_0x568cb0(0x180)])+_0x314954)/_0xf215:0x0,_0x3bcd2a=_0x290893['realized']):(_0x1551cb=_0xf215!=0x0?(_0x290893[_0x568cb0(0x168)]*_0x290893[_0x568cb0(0x180)]-_0x59fe46[_0x568cb0(0x194)]*(_0x290893[_0x568cb0(0x180)]-_0xf215)+_0x314954)/_0xf215:0x0,_0x3bcd2a=_0x290893[_0x568cb0(0x103)]+(_0x59fe46['price']-_0x290893[_0x568cb0(0x168)])*_0x59fe46[_0x568cb0(0x225)]);_0x26aae0=(_0x59fe46[_0x568cb0(0x194)]-_0x1551cb-_0x314954/_0x59fe46[_0x568cb0(0x225)])*_0xf215;let _0x188786={'coin':_0x59fe46[_0x568cb0(0x1c6)],'number':_0xf215,'breakeven':formatResult(_0x1551cb,0x8),'realized':formatResult(_0x3bcd2a,0x8),'unrealized':formatResult(_0x26aae0,0x8),'fees':formatResult(_0x290893[_0x568cb0(0x122)]+_0x314954,0x8),'sells':_0x59fe46['side']==_0x568cb0(0x1b3)?_0x290893['sells']+0x1:_0x290893[_0x568cb0(0x153)],'buys':_0x59fe46[_0x568cb0(0x223)]==_0x568cb0(0x117)?_0x290893[_0x568cb0(0x23a)]+0x1:_0x290893[_0x568cb0(0x23a)]};dbCoinResults['get'](_0x568cb0(0x1bd))[_0x568cb0(0xc3)]({'coin':_0x59fe46[_0x568cb0(0x1c6)]})[_0x568cb0(0x1db)](_0x188786)[_0x568cb0(0x197)]();if(!_0x4dcce3){if(_0x59fe46[_0x568cb0(0x1c2)]&&_0x59fe46[_0x568cb0(0x1c2)][_0x568cb0(0xc2)]==_0x568cb0(0x240)){const _0x49246b=currentCoins[_0x568cb0(0xc3)](_0x10f9a8=>_0x10f9a8[_0x568cb0(0x1c6)]==_0x568cb0(0x240));if(_0x49246b){let _0x3d391b=dbCoinResults[_0x568cb0(0x11b)]('coins')[_0x568cb0(0xc3)]({'coin':_0x568cb0(0x240)})['value']();_0x188786={..._0x3d391b,'number':_0x49246b[_0x568cb0(0x180)]},dbCoinResults['get']('coins')[_0x568cb0(0xc3)]({'coin':'BNB'})[_0x568cb0(0x1db)](_0x188786)['write']();}}}}async function placeOrder(_0xb789b7){const _0x39dd80=_0x1e290f,_0x5b0f03=config[_0x39dd80(0xec)]==_0x39dd80(0x144)?_0x39dd80(0x144):_0x39dd80(0xff);if(lockOrders==ORDERS[_0x39dd80(0xbc)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x39dd80(0x9f)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x39dd80(0x105);let _0x54405e=![];lastOrders=[];for(const _0x3a1ef7 of _0xb789b7){let _0x56f4b7,_0x34eb14,_0x4d3315,_0x42c9c3,_0x551e93,_0x337c02=_0x3a1ef7[_0x39dd80(0xa9)];try{const _0x2d1f63=await exchange['fetchTicker'](_0x337c02);_0x56f4b7=_0x3a1ef7['reverse']?0x1/_0x3a1ef7[_0x39dd80(0x1bc)]:_0x3a1ef7[_0x39dd80(0x1bc)],_0x34eb14=_0x2d1f63[_0x39dd80(0x1d3)],_0x4d3315=_0x2d1f63[_0x39dd80(0x1e3)];_0x3a1ef7[_0x39dd80(0x17a)]?(_0x42c9c3=_0x3a1ef7[_0x39dd80(0x223)]==_0x39dd80(0x117)?_0x39dd80(0x1b3):_0x39dd80(0x117),_0x551e93=Math[_0x39dd80(0x13f)](_0x3a1ef7[_0x39dd80(0x145)])/_0x56f4b7):(_0x42c9c3=_0x3a1ef7[_0x39dd80(0x223)],_0x551e93=Math[_0x39dd80(0x13f)](_0x3a1ef7[_0x39dd80(0x145)]));_0x5b0f03=='limit'&&(config['ordertype']=='limit-high'&&(_0x56f4b7=_0x42c9c3==_0x39dd80(0x117)?_0x34eb14:_0x4d3315),config['ordertype']==_0x39dd80(0xe3)&&(_0x56f4b7=_0x42c9c3=='buy'?_0x4d3315:_0x34eb14));_0x551e93=formatResult(_0x551e93,0x8),_0x56f4b7=formatResult(_0x56f4b7,0x8);const _0x55010b=_0x42c9c3==_0x39dd80(0x1b3)?config[_0x39dd80(0x212)]?String[_0x39dd80(0xf6)]('0x'+config['emojisell'])+'\x20':'':config[_0x39dd80(0x25e)]?String[_0x39dd80(0xf6)]('0x'+config[_0x39dd80(0x25e)])+'\x20':'',_0x14d11f=_0x5b0f03==_0x39dd80(0x144)?_0x39dd80(0x12a):config[_0x39dd80(0xec)]==_0x39dd80(0xc9)?_0x39dd80(0xbd):_0x39dd80(0x158),_0x4f8677=(Math[_0x39dd80(0xf2)](Math[_0x39dd80(0x1b7)]()*0x35a4e900)+0x5f5e100)[_0x39dd80(0x204)]();lastOrders[_0x39dd80(0x107)]({'customId':_0x4f8677,'symbol':_0x337c02,'coin':_0x3a1ef7['coin'],'amount':_0x551e93,'price':_0x56f4b7,'side':_0x42c9c3,'reverse':_0x3a1ef7[_0x39dd80(0x17a)],'filled':0x0});if(_0x5b0f03==_0x39dd80(0x144))logHistory(_0x39dd80(0xaf),''+_0x55010b+_0x14d11f+_0x39dd80(0x23d)+_0x337c02+'\x20'+_0x42c9c3+'\x20#'+formatResult(_0x551e93,0x8)+'\x20@'+formatResult(_0x56f4b7,0x8));else logHistory(_0x39dd80(0xaf),''+_0x55010b+_0x14d11f+'\x20order:\x20'+_0x337c02+'\x20'+_0x42c9c3+'\x20#'+formatResult(_0x551e93,0x8)+'\x20@'+formatResult(_0x56f4b7,0x8));let _0x5114d1;_0x5b0f03=='market'?_0x42c9c3==_0x39dd80(0x117)&&['Bybit',_0x39dd80(0x22e),_0x39dd80(0x169),_0x39dd80(0x12b),'Huobipro'][_0x39dd80(0x1d7)](config['exchange'])?_0x5114d1=await exchange['createOrder'](_0x337c02,_0x5b0f03,_0x42c9c3,_0x551e93,_0x56f4b7):_0x5114d1=await exchange[_0x39dd80(0x1a6)](_0x337c02,_0x5b0f03,_0x42c9c3,_0x551e93,undefined):_0x5114d1=await exchange[_0x39dd80(0x1a6)](_0x337c02,_0x5b0f03,_0x42c9c3,_0x551e93,_0x56f4b7);logger[_0x39dd80(0x1cc)]('ID:\x20'+_0x5114d1['id']+_0x39dd80(0x19d)+_0x4f8677);const _0x5c0002=lastOrders[_0x39dd80(0x15c)]-0x1;if(_0x5c0002>=0x0&&lastOrders[_0x5c0002][_0x39dd80(0x218)]==_0x4f8677){lastOrders[_0x5c0002][_0x39dd80(0x269)]=_0x5114d1['id'];if(_0x5114d1['amount'])lastOrders[_0x5c0002][_0x39dd80(0x19e)]=_0x5114d1['amount'];if(_0x5114d1['price'])lastOrders[_0x5c0002]['price']=_0x5114d1[_0x39dd80(0x194)];lastOrders[_0x5c0002][_0x39dd80(0x1c2)]=_0x5114d1[_0x39dd80(0x1c2)];}if(config[_0x39dd80(0x24d)]!=0x0){let _0x37313b=null;if(cooldownTracker[_0x39dd80(0x15c)]==config[_0x39dd80(0x24d)]-0x1)_0x37313b=cooldownTracker['shift']();const _0xaea8a3=getTimeStamp();cooldownTracker[_0x39dd80(0x107)](_0xaea8a3);if(_0x37313b){const _0xa00e7a=fns[_0x39dd80(0xe0)](new Date(_0xaea8a3),new Date(_0x37313b));if(_0xa00e7a<cooldownInterval){logHistory('error',_0x39dd80(0xa1)+config[_0x39dd80(0x24d)]+_0x39dd80(0x24f)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x39dd80(0x1d5)),coolingDown=!![];break;}}}}catch(_0x1e82c3){if(_0x1e82c3[_0x39dd80(0x204)]()['includes'](_0x39dd80(0x111)))lastOrders=lastOrders['filter'](_0x250b0b=>_0x250b0b[_0x39dd80(0xa9)]!=_0x337c02),logHistory(_0x39dd80(0x174),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x337c02),_0x54405e=!![];else{if(_0x1e82c3[_0x39dd80(0x204)]()[_0x39dd80(0x1d7)](_0x39dd80(0x166)))lastOrders=lastOrders[_0x39dd80(0x190)](_0xe3d014=>_0xe3d014['symbol']!=_0x337c02),logHistory(_0x39dd80(0x174),_0x39dd80(0x155)+_0x337c02),_0x54405e=!![];else{if(_0x1e82c3['toString']()[_0x39dd80(0x1d7)](_0x39dd80(0x172)))lastOrders=lastOrders[_0x39dd80(0x190)](_0x40c86a=>_0x40c86a[_0x39dd80(0xa9)]!=_0x337c02),logHistory(_0x39dd80(0x174),_0x39dd80(0x101)+_0x337c02),logger[_0x39dd80(0x1cc)](_0x1e82c3),_0x54405e=!![];else _0x1e82c3['toString']()['includes'](_0x39dd80(0x112))?(lastOrders=lastOrders[_0x39dd80(0x190)](_0x3a6231=>_0x3a6231[_0x39dd80(0xa9)]!=_0x337c02),logHistory(_0x39dd80(0x174),_0x39dd80(0xb0)+_0x337c02),_0x54405e=!![]):(lastOrders=lastOrders[_0x39dd80(0x190)](_0x17f1fb=>_0x17f1fb['symbol']!=_0x337c02),await handleError(_0x1e82c3,'placeOrder()',_0x337c02));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x39dd80(0x15c)]>0x0){const _0x3dc57e=config[_0x39dd80(0xec)]==_0x39dd80(0x144)?validateOrderTimeout*0x3c*0x3e8:config[_0x39dd80(0x1d9)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3dc57e);}else unlockOrders();_0x54405e&&config[_0x39dd80(0x18f)]&&(logHistory(_0x39dd80(0x174),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x39dd80(0x175),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x39dd80(0x18f)]&&logHistory(_0x39dd80(0x174),_0x39dd80(0x260));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x39dd80(0x18f)]&&(config['ordertype']==_0x39dd80(0x144)?logHistory(_0x39dd80(0x174),_0x39dd80(0xad)):logHistory(_0x39dd80(0x174),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x2c0d04){const _0x3ddf42=_0x1e290f,_0x1b31e4={...config,'openOrders':_0x2c0d04};let _0x1a586a=dbConfig[_0x3ddf42(0x11b)](_0x3ddf42(0x1a4))[_0x3ddf42(0xc3)]({'botID':botID})[_0x3ddf42(0x1dd)]();_0x1a586a&&dbConfig[_0x3ddf42(0x11b)](_0x3ddf42(0x1a4))[_0x3ddf42(0xc3)]({'botID':botID})['assign'](_0x1b31e4)['write']();}function restoreOrders(){const _0x5b991e=_0x1e290f;let _0xc349a9;config[_0x5b991e(0x138)]&&allOpenOrders[_0x5b991e(0x20a)](_0x3d0194=>{const _0x3e6e37=_0x5b991e,_0x62965=config[_0x3e6e37(0x138)][_0x3e6e37(0xc3)](_0x48fef2=>_0x48fef2[_0x3e6e37(0x269)]==_0x3d0194['id']);_0x62965&&(lastOrders[_0x3e6e37(0x107)](_0x62965),_0xc349a9=_0x3d0194['timestamp']);});if(lastOrders[_0x5b991e(0x15c)]>0x0){lockOrders=ORDERS[_0x5b991e(0x9f)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x54d592=new Date()[_0x5b991e(0x130)](),_0x2a085b=config[_0x5b991e(0xec)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x5b991e(0x1d9)]*0x3c*0x3e8;if(_0xc349a9+_0x2a085b>_0x54d592){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x34e9a6=_0x5b991e;validateOrders(_0x34e9a6(0x1cb));},_0xc349a9+_0x2a085b-_0x54d592);}else validateOrders(_0x5b991e(0x1cb));}}async function sendMetricsTelegram(){const _0x34a2a9=_0x1e290f;if(!coinsLoaded){process[_0x34a2a9(0x255)]({'telegrammsg':_0x34a2a9(0xac)},_0x5d8bb3=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x27f31b='';if(config[_0x34a2a9(0x25f)])_0x27f31b=_0x34a2a9(0x24e)+config[_0x34a2a9(0x18a)]+_0x34a2a9(0x196);else _0x27f31b=_0x34a2a9(0x135)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x5ad79d=getKPIs('basecoin'),_0x18a72e=getKPIs(_0x34a2a9(0x261),config[_0x34a2a9(0x261)]),_0xb0f4f6=getKPIs('net-basecoin'),_0x1ba59d=getKPIs('net-fiat',config[_0x34a2a9(0x261)]);_0x27f31b+=_0x34a2a9(0xfc),_0x27f31b+=_0x5ad79d[_0x34a2a9(0x14b)]+_0x34a2a9(0x20c)+_0x5ad79d['value']+'\x0a',_0x27f31b+=_0x5ad79d['rightTxt']+':\x20'+_0x5ad79d[_0x34a2a9(0x14f)]+'%\x0a',_0x27f31b+=_0x18a72e['leftTxt']+_0x34a2a9(0x20c)+_0x18a72e[_0x34a2a9(0x1dd)]+'\x0a',_0x27f31b+=_0x18a72e[_0x34a2a9(0x1be)]+':\x20'+_0x18a72e[_0x34a2a9(0x14f)]+'%\x0a',_0x27f31b+=_0xb0f4f6[_0x34a2a9(0x14b)]+':\x20'+_0xb0f4f6[_0x34a2a9(0x1dd)]+'\x20('+config['basecoin']+')\x0a',_0x27f31b+=_0xb0f4f6[_0x34a2a9(0x1be)]+':\x20'+_0xb0f4f6[_0x34a2a9(0x14f)]+_0x34a2a9(0x132)+config[_0x34a2a9(0xfe)]+')\x0a',_0x27f31b+=_0x1ba59d[_0x34a2a9(0x14b)]+':\x20'+_0x1ba59d[_0x34a2a9(0x1dd)]+'\x20('+config['fiat']+')\x0a',_0x27f31b+=_0x1ba59d[_0x34a2a9(0x1be)]+':\x20'+_0x1ba59d[_0x34a2a9(0x14f)]+'%\x20('+config[_0x34a2a9(0x261)]+')\x0a',_0x27f31b+=_0x34a2a9(0xe1),process[_0x34a2a9(0x255)]({'telegrammsg':_0x27f31b},_0x490880=>{});}async function sendPortfolioTelegram(){const _0x5cd680=_0x1e290f;if(!coinsLoaded||!currentCoins[0x0][_0x5cd680(0x199)]){process[_0x5cd680(0x255)]({'telegrammsg':_0x5cd680(0xac)},_0x237891=>{});return;}let _0x579305='';if(config['showname'])_0x579305=_0x5cd680(0x24e)+config[_0x5cd680(0x18a)]+_0x5cd680(0x12d);else _0x579305=_0x5cd680(0x135)+botID+_0x5cd680(0x12d);_0x579305+=_0x5cd680(0xfc),_0x579305+=_0x5cd680(0xbe),_0x579305+=_0x5cd680(0x20e),_0x579305+=_0x5cd680(0xbe),currentCoins[_0x5cd680(0x20a)](_0x2dc126=>{const _0x543b82=_0x5cd680;_0x579305+=_0x2dc126[_0x543b82(0x1c6)][_0x543b82(0x25b)](0x7)+'|\x20'+formatPad(_0x2dc126['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2dc126[_0x543b82(0xdf)],0x2,0x6)+'|\x20'+formatPad(_0x2dc126[_0x543b82(0x191)]*0x64,0x2,0x6)+'\x0a';}),_0x579305+='</pre>',process['send']({'telegrammsg':_0x579305},_0x161b5c=>{});}function formatPad(_0x1250f7,_0x5f2539,_0x9c30db){const _0x674cdb=_0x1e290f,_0x17fdc3=formatResultString(_0x1250f7,_0x5f2539);return _0x17fdc3?_0x17fdc3[_0x674cdb(0x250)](_0x9c30db):''[_0x674cdb(0x250)](_0x9c30db);}function logHistory(_0x49357d,_0x29a584,_0x24b786=''){const _0x2fc867=_0x1e290f;logger[_0x2fc867(0x248)](''+_0x29a584);let _0x337279={'time':getTimeStamp(),'type':_0x49357d,'event':_0x29a584};dbLogs['get'](_0x2fc867(0x16f))[_0x2fc867(0x107)](_0x337279)[_0x2fc867(0x197)]();if(_0x24b786=='')_0x24b786=_0x29a584;proxyEmit('event',{'log':_0x337279,'summary':_0x24b786}),process[_0x2fc867(0x255)]({'telegram':{..._0x337279,'botname':config[_0x2fc867(0x18a)],'showname':config['showname']}},_0x20f879=>{});}function emitHistory(_0x3f9f86={}){const _0x444a40=_0x1e290f;Object[_0x444a40(0x159)](_0x3f9f86)['length']==0x0&&(_0x3f9f86={'type':[_0x444a40(0xaf),_0x444a40(0x188)],'event':'','page':0x1});if(_0x3f9f86['type'][_0x444a40(0x1d7)](_0x444a40(0x188)))_0x3f9f86['type']['splice'](_0x3f9f86[_0x444a40(0x163)][_0x444a40(0x22c)]('event'),0x1,'error',_0x444a40(0x147),_0x444a40(0x175));if(dbLogs[_0x444a40(0x17f)](_0x444a40(0x16f))['value']()){let _0x152c9c=dbLogs[_0x444a40(0x11b)](_0x444a40(0x16f))[_0x444a40(0x190)](_0x109e72=>{const _0x283620=_0x444a40;if(_0x3f9f86['type'][_0x283620(0x15c)]==0x0)return![];else return _0x3f9f86[_0x283620(0x163)][_0x283620(0x1d7)](_0x109e72['type']);})[_0x444a40(0x190)](_0x44b1ab=>{const _0x533c11=_0x444a40;if(_0x3f9f86[_0x533c11(0x188)]=='')return!![];else return _0x44b1ab['event'][_0x533c11(0x19a)]()[_0x533c11(0x1d7)](_0x3f9f86[_0x533c11(0x188)][_0x533c11(0x19a)]());})['sortBy']('time'),_0x26ee77=_0x152c9c[_0x444a40(0x1dd)]()[_0x444a40(0x15c)];_0x152c9c=_0x152c9c[_0x444a40(0x17a)]()[_0x444a40(0x156)]((_0x3f9f86[_0x444a40(0x110)]-0x1)*logPageSize,_0x3f9f86[_0x444a40(0x110)]*logPageSize-0x1)[_0x444a40(0x17a)]()['value'](),proxyEmit(_0x444a40(0x210),{'logs':_0x152c9c,'total':_0x26ee77});}else proxyEmit(_0x444a40(0x210),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x335031){const _0x59eee7=_0x1e290f;if(dbLogs[_0x59eee7(0x17f)](_0x59eee7(0x16f))[_0x59eee7(0x1dd)]()){const _0x5914de=dbLogs[_0x59eee7(0x11b)](_0x59eee7(0x16f))[_0x59eee7(0x21b)](_0x59eee7(0x1fc))[_0x59eee7(0x190)](_0x3b0729=>{const _0xe9912f=_0x59eee7;return _0x3b0729['type']==_0xe9912f(0xaf);})[_0x59eee7(0x1dd)]();dbLogs[_0x59eee7(0x11b)]('logs')[_0x59eee7(0xb5)]()[_0x59eee7(0x197)](),dbLogs['get'](_0x59eee7(0x16f))[_0x59eee7(0x1db)](_0x5914de)[_0x59eee7(0x197)](),emitHistory(_0x335031);}}async function pauseBot(_0x3f49c4=pauseBotIntervalShort,_0x53479e,_0x378e6e,_0x41e324=![]){const _0x3bf265=_0x1e290f,_0x4ae3ef=new Date()[_0x3bf265(0x130)]();if(!lastErrorShown||_0x4ae3ef-lastErrorShown>=_0x3f49c4){lastErrorShown=_0x4ae3ef;if(!lastBotPause)lastBotPause=_0x4ae3ef,consecutivePauses=0x1;else{if(_0x4ae3ef-lastBotPause-_0x3f49c4<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x41e324){logHistory(_0x3bf265(0x174),_0x53479e+_0x3bf265(0xe2)),await killBot();return;}else logHistory('error',_0x53479e+pauseBotMsg),_0x3f49c4=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4ae3ef;}_0x378e6e?logger['debug']('('+consecutivePauses+')\x20'+_0x53479e+_0x3bf265(0x258),_0x378e6e):logger[_0x3bf265(0x1cc)]('('+consecutivePauses+')\x20'+_0x53479e);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3f49c4),botPaused=![],_0x3f49c4==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4d4493=_0x1e290f;botPaused=!![],await sleep(0x3e8),process[_0x4d4493(0x255)]({'stop':_0x4d4493(0x9b)},_0x2c2ff7=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x409ce7,_0x1d5c3b){const _0x501eac=_0x1e290f;if(botPaused)return;const _0x448de2=config[_0x501eac(0x1c4)]||_0x501eac(0x25a);if(_0x1d5c3b)logger[_0x501eac(0x1cc)]('Exception\x20thrown\x20in\x20'+_0x1d5c3b);const _0x2b7e2e=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x409ce7[_0x501eac(0x204)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x501eac(0x174),_0x448de2+_0x501eac(0x11e)),_0x2b7e2e();else{if(_0x409ce7[_0x501eac(0x204)]()['includes'](_0x501eac(0x9c)))logHistory(_0x501eac(0x174),_0x448de2+_0x501eac(0x157)),_0x2b7e2e();else _0x409ce7['toString']()[_0x501eac(0x1d7)](_0x501eac(0xa4))?(logHistory(_0x501eac(0x174),_0x448de2+_0x501eac(0x215)),logHistory(_0x501eac(0x174),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2b7e2e()):await handleError(_0x409ce7,null);}}async function handleError(_0x43f11a,_0x65237d,_0x18217e=''){const _0x1409f6=_0x1e290f;if(botPaused)return;let _0x15afb2;const _0x41157f=config[_0x1409f6(0x1c4)]||_0x1409f6(0x25a);if(_0x65237d)logger[_0x1409f6(0x1cc)]('Exception\x20thrown\x20in\x20'+_0x65237d);if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x192)))_0x15afb2=_0x41157f+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x15afb2,_0x43f11a);else{if(_0x43f11a['toString']()[_0x1409f6(0x1d7)](_0x1409f6(0x21f)))_0x15afb2=_0x41157f+_0x1409f6(0x96),await pauseBot(undefined,_0x15afb2,_0x43f11a);else{if(_0x43f11a[_0x1409f6(0x204)]()['includes'](_0x1409f6(0x23f))||_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x1f4)))_0x15afb2=_0x41157f+_0x1409f6(0x1e8),await pauseBot(undefined,_0x15afb2,_0x43f11a[_0x1409f6(0x204)]());else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0xc8)))_0x15afb2=_0x41157f+_0x1409f6(0x15d),await pauseBot(undefined,_0x15afb2,_0x43f11a[_0x1409f6(0x204)]());else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x127)))_0x15afb2=_0x41157f+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x15afb2,_0x43f11a[_0x1409f6(0x204)]());else{if(_0x43f11a['toString']()[_0x1409f6(0x19a)]()['includes'](_0x1409f6(0x184))||_0x43f11a['toString']()[_0x1409f6(0x19a)]()['includes'](_0x1409f6(0x109)))_0x15afb2='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x15afb2,_0x43f11a[_0x1409f6(0x204)]());else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x179)))_0x15afb2=_0x41157f+_0x1409f6(0x254),await pauseBot(undefined,_0x15afb2,_0x43f11a['toString']());else{if(_0x43f11a instanceof ccxt[_0x1409f6(0xb3)])_0x15afb2=_0x41157f+_0x1409f6(0xbb)+_0x43f11a[_0x1409f6(0x204)](),logger[_0x1409f6(0x1cc)](_0x1409f6(0x236),_0x43f11a),await pauseBot(undefined,_0x15afb2,_0x43f11a);else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)]('API-key\x20format\x20invalid'))logHistory(_0x1409f6(0x174),_0x41157f+_0x1409f6(0x1ae)),logHistory(_0x1409f6(0x174),_0x1409f6(0x1b2)),await killBot();else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x9c)))logHistory(_0x1409f6(0x174),_0x41157f+_0x1409f6(0x1e4)),logHistory(_0x1409f6(0x174),_0x1409f6(0x1b2)),await killBot();else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0xa4))&&_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x136)))_0x15afb2=_0x41157f+_0x1409f6(0x1b4),await pauseBot(undefined,_0x15afb2,_0x43f11a,!![]);else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0xa4)))config[_0x1409f6(0x12c)]?_0x15afb2=_0x41157f+_0x1409f6(0x1f9):_0x15afb2=_0x41157f+_0x1409f6(0x1cd),logHistory(_0x1409f6(0x174),_0x15afb2),logHistory(_0x1409f6(0x174),_0x1409f6(0x1b2)),await killBot();else{if(_0x43f11a['toString']()['includes'](_0x1409f6(0x10e)))logHistory(_0x1409f6(0x174),_0x41157f+_0x1409f6(0x1a1)),logHistory(_0x1409f6(0x174),_0x1409f6(0x1b2)),await killBot();else{if(_0x43f11a[_0x1409f6(0x204)]()[_0x1409f6(0x1d7)](_0x1409f6(0x126)))logHistory(_0x1409f6(0x174),_0x1409f6(0x226)+_0x18217e);else{if(_0x43f11a instanceof ccxt[_0x1409f6(0x18d)]){_0x15afb2=_0x41157f+'\x20exchange\x20error:\x20'+_0x43f11a[_0x1409f6(0x204)](),logHistory(_0x1409f6(0x174),_0x15afb2),logger[_0x1409f6(0x1cc)]('Exchange\x20error\x20details:',_0x43f11a);if(_0x18217e)logger[_0x1409f6(0x1cc)]('Symbol(s):\x20'+_0x18217e);await pauseBot(undefined,_0x15afb2,_0x43f11a);}else{_0x15afb2='Unknown\x20error:\x20'+_0x43f11a[_0x1409f6(0x204)](),logHistory(_0x1409f6(0x174),_0x15afb2),logger['debug'](_0x15afb2+_0x1409f6(0x258),_0x43f11a);if(_0x18217e)logger[_0x1409f6(0x1cc)](_0x1409f6(0xd6)+_0x18217e);await pauseBot(undefined,_0x15afb2);}}}}}}}}}}}}}}}}function decryptRSA(_0x2249ae,_0x73167d){const _0x115550=_0x1e290f,_0x631d29=forge[_0x115550(0x12f)][_0x115550(0x1fd)](_0x2249ae),_0x27ddff=_0x631d29['decrypt'](forge[_0x115550(0x160)][_0x115550(0x235)](_0x73167d),'RSA-OAEP',{'md':forge['md'][_0x115550(0xb2)][_0x115550(0xeb)](),'mgf1':{'md':forge['md'][_0x115550(0xb2)][_0x115550(0xeb)]()}});return _0x27ddff;}async function withRetry(_0x2c34e1,_0xc897d5){const _0x3b0317=_0x1e290f;let _0x5311a7=![],_0x41ad01=0x0,_0x20a63a,_0x138ed7;while(_0x41ad01<maxRetries){try{_0x20a63a=await _0xc897d5();break;}catch(_0x4f7c0e){_0x138ed7=_0x4f7c0e,!_0x5311a7?(_0x5311a7=!![],logger[_0x3b0317(0x1cc)](_0x3b0317(0x114)+_0x2c34e1+':',_0x4f7c0e[_0x3b0317(0x204)]())):await sleep(retryInterval);}_0x41ad01++;}if(_0x41ad01==0x0)return _0x20a63a;if(_0x41ad01>=maxRetries)throw _0x138ed7;else return logger[_0x3b0317(0x1cc)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x41ad01+'\x20attempts'),_0x20a63a;}function formatResult(_0x88759,_0x215443){const _0x228771=_0x1e290f;return parseFloat(_0x88759[_0x228771(0x267)](_0x215443));}function formatResultTruncate(_0x399967,_0x38a137){const _0x5c99a1=_0x1e290f;let _0x58e306=formatResultString(_0x399967,0xa),_0x534d6f=_0x58e306[_0x5c99a1(0x22c)]('.');return _0x534d6f!=-0x1&&(_0x58e306=_0x58e306['slice'](0x0,_0x534d6f+_0x38a137+0x1)),Number(_0x58e306);}function formatResultString(_0x252c0e,_0x5941d8){const _0x365198=_0x1e290f;let _0xca05f9;if(!(''+_0x252c0e)['includes']('e'))_0xca05f9=+(Math[_0x365198(0xa5)](_0x252c0e+'e+'+_0x5941d8)+'e-'+_0x5941d8);else{let _0x5c3ae6=(''+_0x252c0e)[_0x365198(0xfb)]('e'),_0x25d56f='';+_0x5c3ae6[0x1]+_0x5941d8>0x0&&(_0x25d56f='+'),_0xca05f9=+(Math[_0x365198(0xa5)](+_0x5c3ae6[0x0]+'e'+_0x25d56f+(+_0x5c3ae6[0x1]+_0x5941d8))+'e-'+_0x5941d8);}return Number(_0xca05f9)[_0x365198(0x267)](_0x5941d8);}function getServerTime(){const _0x6dad7e=_0x1e290f,_0x5037cc=new Date();return _0x5037cc[_0x6dad7e(0xc5)]()+'/'+(_0x5037cc[_0x6dad7e(0x1ff)]()+0x1)[_0x6dad7e(0x204)]()[_0x6dad7e(0x250)](0x2,'0')+'/'+_0x5037cc[_0x6dad7e(0x1ed)]()[_0x6dad7e(0x204)]()[_0x6dad7e(0x250)](0x2,'0')+'\x20'+_0x5037cc['getHours']()[_0x6dad7e(0x204)]()['padStart'](0x2,'0')+':'+_0x5037cc[_0x6dad7e(0x1da)]()['toString']()['padStart'](0x2,'0')+':'+_0x5037cc[_0x6dad7e(0x268)]()[_0x6dad7e(0x204)]()[_0x6dad7e(0x250)](0x2,'0');}function getTimeStamp(){const _0x53ef26=_0x1e290f,_0x27b1f5=shiftedTime();return _0x27b1f5[_0x53ef26(0xc5)]()+'/'+(_0x27b1f5[_0x53ef26(0x1ff)]()+0x1)[_0x53ef26(0x204)]()[_0x53ef26(0x250)](0x2,'0')+'/'+_0x27b1f5[_0x53ef26(0x1ed)]()[_0x53ef26(0x204)]()[_0x53ef26(0x250)](0x2,'0')+'\x20'+_0x27b1f5[_0x53ef26(0xae)]()[_0x53ef26(0x204)]()[_0x53ef26(0x250)](0x2,'0')+':'+_0x27b1f5[_0x53ef26(0x1da)]()[_0x53ef26(0x204)]()[_0x53ef26(0x250)](0x2,'0')+':'+_0x27b1f5[_0x53ef26(0x268)]()['toString']()[_0x53ef26(0x250)](0x2,'0');}function getDate(){const _0x5b59a3=_0x1e290f,_0x4466c7=shiftedTime();return _0x4466c7[_0x5b59a3(0xc5)]()+'/'+(_0x4466c7[_0x5b59a3(0x1ff)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4466c7[_0x5b59a3(0x1ed)]()[_0x5b59a3(0x204)]()[_0x5b59a3(0x250)](0x2,'0');}function getHour(){const _0xe50800=_0x1e290f,_0xb22702=shiftedTime();return _0xb22702['getHours']()[_0xe50800(0x204)]()[_0xe50800(0x250)](0x2,'0');}function sleep(_0x367198){return new Promise(_0x319184=>setTimeout(_0x319184,_0x367198));}function shiftedTime(){const _0x1d4a3d=_0x1e290f,_0x163d4b=new Date();let _0x2017ec=_0x163d4b;if(config&&config[_0x1d4a3d(0x1d6)]!==0x0)_0x2017ec=fns[_0x1d4a3d(0x1ab)](_0x163d4b,{'hours':config[_0x1d4a3d(0x1d6)]});return _0x2017ec;}function timer(_0x37660e){const _0x5a1049=_0x1e290f,_0x42f1dc=new Date();!lasttime?console[_0x5a1049(0xe4)](getTimeStamp()+':\x20timer\x20>',_0x37660e,_0x42f1dc):console[_0x5a1049(0xe4)](getTimeStamp()+_0x5a1049(0x164),_0x37660e,(_0x42f1dc-lasttime)/0x3e8),lasttime=_0x42f1dc;}