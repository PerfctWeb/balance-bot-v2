const _0x1f1fc5=_0x3189;(function(_0x20a318,_0x193d5b){const _0x2fd9c4=_0x3189,_0x1569e2=_0x20a318();while(!![]){try{const _0x3f6df5=parseInt(_0x2fd9c4(0x28b))/0x1*(parseInt(_0x2fd9c4(0x28d))/0x2)+-parseInt(_0x2fd9c4(0x23c))/0x3+-parseInt(_0x2fd9c4(0x271))/0x4*(-parseInt(_0x2fd9c4(0x1cd))/0x5)+parseInt(_0x2fd9c4(0x269))/0x6*(parseInt(_0x2fd9c4(0x17e))/0x7)+-parseInt(_0x2fd9c4(0x173))/0x8+-parseInt(_0x2fd9c4(0x194))/0x9*(-parseInt(_0x2fd9c4(0x189))/0xa)+parseInt(_0x2fd9c4(0x1f1))/0xb;if(_0x3f6df5===_0x193d5b)break;else _0x1569e2['push'](_0x1569e2['shift']());}catch(_0x348f95){_0x1569e2['push'](_0x1569e2['shift']());}}}(_0x549f,0x74479));const _0xed4024=function(){let _0x3c9434=!![];return function(_0x4b35b6,_0x2dab67){const _0x51796c=_0x3c9434?function(){const _0x3db6e7=_0x3189;if(_0x2dab67){const _0x276d77=_0x2dab67[_0x3db6e7(0x19c)](_0x4b35b6,arguments);return _0x2dab67=null,_0x276d77;}}:function(){};return _0x3c9434=![],_0x51796c;};}(),_0x43d292=_0xed4024(this,function(){const _0x2354c8=_0x3189;return _0x43d292[_0x2354c8(0x26d)]()[_0x2354c8(0x28c)]('(((.+)+)+)+$')[_0x2354c8(0x26d)]()['constructor'](_0x43d292)[_0x2354c8(0x28c)](_0x2354c8(0x11e));});_0x43d292();'use strict';const ccxt=require(_0x1f1fc5(0x152)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1f1fc5(0x182)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require('util'),argv=require(_0x1f1fc5(0x124))(process[_0x1f1fc5(0x28e)]['slice'](0x2))[_0x1f1fc5(0x28e)],path=require(_0x1f1fc5(0x230));let exchange;global['ticker']={},global[_0x1f1fc5(0x145)]={};const usdBasecoins=[_0x1f1fc5(0x1f2),'BUSD',_0x1f1fc5(0x1cb),_0x1f1fc5(0x163),_0x1f1fc5(0x130),_0x1f1fc5(0x185)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1f1fc5(0x137)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1f1fc5(0x26e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x1f1fc5(0x18f))[_0x1f1fc5(0x218)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x1f1fc5(0x244)](botID)&&(console[_0x1f1fc5(0x1b6)](_0x1f1fc5(0x1a5)+botID+_0x1f1fc5(0x1fa)),killBot());const userID=process[_0x1f1fc5(0x28e)][0x3]||'',configpath=userID?_0x1f1fc5(0x1de)+userID+'/':_0x1f1fc5(0x1de),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x1f1fc5(0x26f)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x1f1fc5(0x1ad)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1f1fc5(0x1ad)](logspath)&&fs[_0x1f1fc5(0x240)](logspath);const configfile=configpath+_0x1f1fc5(0x128)+botID+_0x1f1fc5(0x268),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x1f1fc5(0x128)+botID+_0x1f1fc5(0x1dd),coinresultsfile=configpath+_0x1f1fc5(0x128)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x1f1fc5(0x13a),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1f1fc5(0x279)]({'logs':[],'version':serverversion})['write']();function _0x549f(){const _0x5002e1=['2.5.0','exchange\x20reloaded','highest','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','full','breakeven','function','must\x20be\x20greater\x20than\x20minimum\x20amount','-config.json','663774kVsHPp','/EUR','length','timeout','toString','UNLOCKED','createWriteStream','ask','5024HcmUOY','args','bot','valid','fetchOpenOrders','replace','0\x20-\x20EXECUTION:\x20','exchange\x20not\x20reloaded','defaults','Cooldown\x20ended\x20-\x20balancing\x20resumed','portfolio','recent20','datetime','remove','OnMaintenance',':\x20Bot\x20','indexOf','\x20API\x20key\x20is\x20invalid','\x20|\x20lock\x20orders:\x20','2.3.5','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getFullYear','2\x20-\x20FILLED\x20known\x20order:\x20','BNB','amountToPrecision','cost','15PRESPw','search','83042sBdHQw','argv','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20|\x20Error\x20details:\x20','apiSecret','sendPortfolioTelegram','Executed\x20','decrypt','exec','ongoing','getDate','(((.+)+)+)+$','starting-balances','target','excluded','filled','fee','yargs/yargs','initclient','side','value','bot-','running','performance','Initiating\x20exchange\x20reload','InvalidOrder','page','buy','yyyy-MM-dd\x27T\x27HH:mm:ss','USDC','cancelLoading','storeFiat','fetchBalance','headless','No\x20more\x20open\x20orders\x20-\x20','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','freeze','coin','splice','bb-secure.json','status','slice','recreateCoinResults()','max','cancel','API-key\x20format\x20invalid','net-basecoin','warning','Unknown\x20error\x20occured','Net\x20effect','change','storeConfiguration','changes','time','coins','usd','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','close','\x20not\x20available','getHours','offset','2\x20-\x20Orders\x20unlocked','order','ccxt','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','last','startdate','limit','type','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20:\x20','differenceInSeconds','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','-------------------------------\x0a','getMinutes','botID','deleteHistoryAlerts','<pre>','get','USDT','ID:\x20','fetchClosedOrders','toUpperCase','milliseconds','Saving\x20configuration','getPortfolio(2)','emitHistory','balancing\x20resumes\x20when\x20cooldown\x20ends','distribution','none','RateLimitExceeded','entries','ordertype','Waited\x20','date','5060256jPRVQx','set','change24h','shift','BTC','enabled','\x20closed\x20the\x20connection','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','buys','progress','autoliquidity','21RQngjp','trade','timestamp','red_yellow_blue','date-fns','includes','getPortfolio','USDP','spot','event','net-fiat','101810Zbsczo','createOrder','sortBy','\x20>\x20[DEBUG]\x20','split','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','./version.json','number','getPortfolio(0)','send','onepagemode','9Qmcuhn','isEqual','RSA-OAEP','Manual\x20balancing\x20required','startnumber','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','basecoin','\x20metrics:</b>\x20\x0a\x0a','apply','total','\x20portfolio:</b>\x20\x0a\x0a','abs','openOrders','assign','ORDERS.LOCKED',':\x20timer\x20>','message','Error:\x20Invalid\x20argument\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','yyyy/MM/dd','substring','\x20>\x20','Market','fetchTickers','balances','existsSync','Avoiding\x20continuous\x20order\x20attempts','\x20minutes\x20-\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','pro','botname','fetchTicker','LOCKED','2\x20-\x20Validate\x20orders:\x20','log','event-history','-events.json','threshold','bid','realized','Uncaught\x20Exception:','password','ORDERS.UNLOCKED','canceled','NetworkError','kill','restart','removed','\x20network\x20error','placeOrder()','getOpenOrders()','starting-balance-','filter','open','2\x20-\x20FILLED\x20unknown\x20order:\x20','TUSD','sha256','1185owdiKp','\x20not\x20responding','string','getSeconds','push','toLowerCase','************','Uncaught\x20ExchangeError:','ETH','Invalid\x20API\x20key\x20or\x20secret\x20entered','price','active','remainingSymbols','format','showname','Portfolio\x20change\x20detected:\x20','-performance.json','./config/','fees','Limit\x20(high-margin)','\x20|\x20Custom\x20ID:\x20','\x20hour','Net\x20','rightTxt','delta','-results.json','</pre>','bots','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','customId','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Initializing\x20coin\x20results','stringify','toggleBotMode','getCoinNumber()','cancelOrder','7790244DPTczA','USD','no\x20additional\x20symbols','<b>Bot\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','market','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','round','eur',',\x20must\x20be\x20a\x203\x20digit\x20number','Resetting\x20bot\x20history','debug','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','watchTrades','reverse','getCoins()','sort','startprice','placeOrder','basecoinvalue','data','Pausing\x20for\x20','error','sell','floor','limits','exchange','toFixed','apiKey','write','amount','\x20exchange\x20error','limit-high','findIndex','liquidity','netoffset','timeshift','has','EUR','version','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','1\x20-\x20Validate\x20orders:\x20','Error\x20while\x20deleting\x20files:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','final','colorscheme','privateKey','***','1\x20-\x20FILLED:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Limit\x20(low-margin)','emojibuy','fiat','currency','\x20order:\x20','loadSymbols()','symbol','orderId','limit-low','Executing\x20exchange\x20reload','cooldown','getMonth','getTime','path','forEach','join','apiPassword','unlinkSync','closed','\x20|\x20','average','loading-canceled','2\x20-\x20Handled\x20open\x20orders','success','leftTxt','2585838xlvPvc','orderstatus','additional\x20symbols\x20','InsufficientFunds','mkdirSync','keys','recreate','watchOrders','test','no\x20open\x20orders','getStartingBalances','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','random','ExchangeNotAvailable','added','min','parse','%\x20(','logs','DDoSProtection','\x20value','<b>','exchanges','RequestTimeout','find','cancelOrders()','padStart','AuthenticationError','\x20|\x20exchange:\x20','configuration','ticker','emojisell','padEnd','initial','coin-loading-progress','cloneDeep'];_0x549f=function(){return _0x5002e1;};return _0x549f();}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x1f1fc5(0x20e)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1f1fc5(0x279)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x1f1fc5(0x20e)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1f1fc5(0x1cc),'rsaStandard':_0x1f1fc5(0x196)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3dc711=>{console['log'](_0x3dc711);},'simple':_0xd65e00=>{const _0x3c2ccc=_0x1f1fc5;console['log'](_0xd65e00),loggerfile[_0x3c2ccc(0x20e)](util['format'](_0xd65e00)+'\x0a');},'full':async(_0x3d9db1,_0x247bd0='')=>{const _0x37ed4f=_0x1f1fc5;let _0x47d795;if(config[_0x37ed4f(0x1db)])_0x47d795=getTimeStamp()+':\x20'+config[_0x37ed4f(0x1b2)]+_0x37ed4f(0x1a9)+_0x3d9db1;else _0x47d795=getTimeStamp()+_0x37ed4f(0x280)+botID+_0x37ed4f(0x1a9)+_0x3d9db1;console['log'](_0x47d795),loggerfile['write'](util[_0x37ed4f(0x1da)](_0x47d795)+'\x0a'),_0x247bd0&&(console['log'](_0x247bd0),loggerfile[_0x37ed4f(0x20e)](util[_0x37ed4f(0x1da)](_0x247bd0)+'\x0a'));},'debug':async(_0xc042f8,_0x420b1c='')=>{const _0x592ea0=_0x1f1fc5;let _0x134df2;if(config[_0x592ea0(0x1db)])_0x134df2=getTimeStamp()+':\x20'+config[_0x592ea0(0x1b2)]+_0x592ea0(0x18c)+_0xc042f8;else _0x134df2=getTimeStamp()+_0x592ea0(0x280)+botID+_0x592ea0(0x18c)+_0xc042f8;if(debugging)console[_0x592ea0(0x1b6)](_0x134df2);loggerfile['write'](util[_0x592ea0(0x1da)](_0x134df2)+'\x0a');if(_0x420b1c){if(debugging)console[_0x592ea0(0x1b6)](_0x420b1c);loggerfile[_0x592ea0(0x20e)](util[_0x592ea0(0x1da)](_0x420b1c)+'\x0a');}}};process['on']('uncaughtException',function(_0x458c48){const _0x33a3c5=_0x1f1fc5;logHistory('error','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x33a3c5(0x1fc)](_0x33a3c5(0x1bc),_0x458c48);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x1f1fc5(0x215)]);settings[_0x1f1fc5(0x193)]!=config[_0x1f1fc5(0x193)]&&updateOnepagemode(settings[_0x1f1fc5(0x193)]);process['send']({'started':_0x1f1fc5(0x129)},_0x44065c=>{}),initializeProcessListeners();function proxyEmit(_0x493dc8,_0x116eef=null){process['send']({'function':_0x493dc8,'args':_0x116eef},_0x45ba63=>{});}function initializeProcessListeners(){process['on']('message',_0x1195cb=>{const _0x77fc0f=_0x3189;switch(Object[_0x77fc0f(0x241)](_0x1195cb)[0x0]){case _0x77fc0f(0x215):_0x1195cb[_0x77fc0f(0x215)]!=undefined&&(settings[_0x77fc0f(0x215)]=_0x1195cb[_0x77fc0f(0x215)],updateTimeshift(settings[_0x77fc0f(0x215)]));break;case _0x77fc0f(0x193):_0x1195cb[_0x77fc0f(0x193)]!=undefined&&(settings['onepagemode']=_0x1195cb[_0x77fc0f(0x193)],updateOnepagemode(settings[_0x77fc0f(0x193)]));break;case _0x77fc0f(0x1e8):_0x1195cb[_0x77fc0f(0x1e8)]!=undefined&&(bots=JSON['parse'](_0x1195cb['bots']),proxyEmit('bots',bots));break;case _0x77fc0f(0x266):switch(_0x1195cb[_0x77fc0f(0x266)]){case _0x77fc0f(0x125):initclient();break;case _0x77fc0f(0x1ee):toggleBotMode();break;case _0x77fc0f(0x16a):emitHistory(_0x1195cb[_0x77fc0f(0x272)]);break;case _0x77fc0f(0x160):deleteHistoryAlerts(_0x1195cb[_0x77fc0f(0x272)]);break;case _0x77fc0f(0x184):getPortfolio(_0x1195cb[_0x77fc0f(0x272)]);break;case _0x77fc0f(0x146):storeConfiguration(_0x1195cb[_0x77fc0f(0x272)]);break;case'storeHeadless':storeHeadless(_0x1195cb[_0x77fc0f(0x272)]);break;case _0x77fc0f(0x132):storeFiat(_0x1195cb[_0x77fc0f(0x272)]);break;case'resetHistory':resetHistory();break;case _0x77fc0f(0x246):getStartingBalances(getNormalizedPerformance());break;case _0x77fc0f(0x203):placeOrder(_0x1195cb['args']);break;case _0x77fc0f(0x131):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x77fc0f(0x118):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3d756c=null,_0x5adf8a=![]){const _0x108b21=_0x1f1fc5;logger[_0x108b21(0x1fc)]('Reset\x20|\x20'+(_0x3d756c&&_0x3d756c['length']>0x0?_0x108b21(0x23e)+_0x3d756c[_0x108b21(0x232)](','):_0x108b21(0x1f3))+'\x20|\x20'+(_0x5adf8a?_0x108b21(0x261):_0x108b21(0x278))+_0x108b21(0x258)+config[_0x108b21(0x20b)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5adf8a)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x108b21(0x20d)]!=''&&config[_0x108b21(0x20d)]!=_0x108b21(0x220)){if(_0x5adf8a){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3fb921){handleErrorNoStop(_0x3fb921,_0x108b21(0x228));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3d756c);const _0x2504f2=await getCoins();[currentCoins,currentCoinsAll]=_0x2504f2,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x108b21(0x26b)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x31d6df=_0x1f1fc5;exchangeStopped=!![],await exchange[_0x31d6df(0x14c)]();}async function reloadExchange(){const _0x50ca04=_0x1f1fc5;logger[_0x50ca04(0x1fc)](_0x50ca04(0x12b));while(lockOrders!=ORDERS[_0x50ca04(0x26e)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x50ca04(0x1fc)](_0x50ca04(0x22c)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x463665=config[_0x1f1fc5(0x20b)],_0x24fe3c=config['apiKey'],_0x110bc3=config[_0x1f1fc5(0x117)],_0x1ab5aa=config[_0x1f1fc5(0x233)]){const _0x2b8ef1=_0x1f1fc5;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x463665)&&(logHistory(_0x2b8ef1(0x207),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x463665+'\x20exchange'),killBot());const _0xb0a4cb=ccxt[_0x2b8ef1(0x1b1)][_0x463665[_0x2b8ef1(0x1d2)]()];exchange=new _0xb0a4cb({'apiKey':_0x24fe3c,'secret':_0x110bc3,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2b8ef1(0x186)}});if(_0x1ab5aa)exchange[_0x2b8ef1(0x1bd)]=_0x1ab5aa;}function setStableCoins(){const _0x162add=_0x1f1fc5;let _0x44f9df=config['basecoin']=='ETH'?'ETH':_0x162add(0x177),_0x3ecb16=!allSymbols[_0x162add(0x183)](_0x44f9df+'/USD')?'USDT':_0x162add(0x1f2),_0x353d09=!allSymbols['includes'](_0x44f9df+_0x162add(0x26a))?_0x3ecb16:'EUR';stablecoins={'eur':{'coin':''+_0x44f9df+_0x353d09,'symbol':_0x44f9df+'/'+_0x353d09},'usd':{'coin':''+_0x44f9df+_0x3ecb16,'symbol':_0x44f9df+'/'+_0x3ecb16}};}async function initwsCcxt(_0x3d460e){const _0x56c3d5=_0x1f1fc5;_0x3d460e==null&&(_0x3d460e=[],config[_0x56c3d5(0x27b)]['forEach'](_0x5d3d15=>{const _0x5b4167=_0x56c3d5;if(!_0x5d3d15['excluded']&&_0x5d3d15['coin']!=config['basecoin'])_0x3d460e[_0x5b4167(0x1d1)](_0x5d3d15[_0x5b4167(0x229)]);}));if(!_0x3d460e[_0x56c3d5(0x183)](stablecoins['eur'][_0x56c3d5(0x229)]))_0x3d460e[_0x56c3d5(0x1d1)](stablecoins[_0x56c3d5(0x1f9)][_0x56c3d5(0x229)]);if(!_0x3d460e[_0x56c3d5(0x183)](stablecoins[_0x56c3d5(0x14a)]['symbol']))_0x3d460e[_0x56c3d5(0x1d1)](stablecoins[_0x56c3d5(0x14a)]['symbol']);if(config['exchange']['startsWith']('Binance')){if(!_0x3d460e[_0x56c3d5(0x183)]('BNB/'+config['basecoin']))_0x3d460e['push']('BNB/'+config[_0x56c3d5(0x19a)]);}loadCoins(_0x3d460e);const _0x326e7c=async _0x511b2e=>{const _0x2e06da=_0x56c3d5,_0x570d1b=await exchange[_0x2e06da(0x1b3)](_0x511b2e);global[_0x2e06da(0x25a)][noslash(_0x570d1b['symbol'])]=_0x570d1b[_0x2e06da(0x154)];while(!![]){if(!botPaused)try{const _0x240672=await exchange[_0x2e06da(0x1fe)](_0x511b2e);global[_0x2e06da(0x25a)][noslash(_0x240672[0x0][_0x2e06da(0x229)])]=_0x240672[0x0][_0x2e06da(0x1d7)],await sleep(0x3e8);}catch(_0x4d2af8){if(!exchangeStopped)await handleError(_0x4d2af8,_0x2e06da(0x1fe),_0x511b2e);}else await sleep(0x64);}},_0x1e5631=async _0x6a30db=>{const _0x2d391a=_0x56c3d5;while(!![]){if(!botPaused)try{const _0x5ce5a2=await exchange['fetchTicker'](_0x6a30db);global[_0x2d391a(0x145)][_0x5ce5a2[_0x2d391a(0x229)]]=_0x5ce5a2['percentage'],await sleep(0x3c*0x3e8);}catch(_0x393f49){if(!exchangeStopped)await handleError(_0x393f49,_0x2d391a(0x1ab),_0x6a30db);}else await sleep(0x64);}},_0x1aaee9=async()=>{const _0x263688=_0x56c3d5;while(!![]){if(!botPaused)try{const _0x57d1a9=await exchange[_0x263688(0x243)]();_0x57d1a9[_0x263688(0x231)](_0x2b1456=>{updateNumberCoinsCcxt(_0x2b1456);});}catch(_0x584ee6){if(!exchangeStopped)await handleError(_0x584ee6,_0x263688(0x243));}else await sleep(0x64);}};_0x3d460e[_0x56c3d5(0x231)](_0x3dc266=>{_0x326e7c(_0x3dc266),_0x1e5631(_0x3dc266);}),!wsEventsSet&&(wsEventsSet=!![],_0x1aaee9(),watchTransactions());}async function watchTransactions(){const _0x223160=_0x1f1fc5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x133a60=await getCoins(),[_0x4ed2fc,_0x320bec]=_0x133a60;let _0x5827e2=[];currentCoins['forEach'](_0x33e7b4=>{const _0x4e8955=_0x3189,_0x4d44cc=_0x4ed2fc[_0x4e8955(0x254)](_0x2bc269=>_0x2bc269['coin']==_0x33e7b4['coin']);if(_0x4d44cc){if(_0x33e7b4[_0x4e8955(0x190)]!=_0x4d44cc[_0x4e8955(0x190)]){let _0x3d81ef;if(_0x33e7b4[_0x4e8955(0x138)]!=config['basecoin']){const _0x1dc357=global['ticker'][noslash(_0x33e7b4[_0x4e8955(0x229)])];_0x3d81ef=_0x33e7b4[_0x4e8955(0x1ff)]?0x1/_0x1dc357:_0x1dc357;}else _0x3d81ef=0x1;_0x5827e2['push']({'coin':_0x33e7b4['coin'],'symbol':_0x33e7b4['symbol'],'price':_0x3d81ef,'number':Number(formatResult(_0x4d44cc[_0x4e8955(0x190)]-_0x33e7b4[_0x4e8955(0x190)],0x8)),'basecoinvalue':_0x3d81ef*(_0x4d44cc[_0x4e8955(0x190)]-_0x33e7b4[_0x4e8955(0x190)])});}}});if(_0x5827e2[_0x223160(0x26b)]==0x1&&!blockTransactionDetection){if(config[_0x223160(0x17d)]){logger['debug'](_0x223160(0x263)+_0x5827e2[0x0][_0x223160(0x204)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x223160(0x262)]);if(lastFees[_0x223160(0x262)]==0x0||Math[_0x223160(0x19f)](_0x5827e2[0x0][_0x223160(0x204)])>lastFees['highest']){delete _0x5827e2[0x0]['symbol'],delete _0x5827e2[0x0][_0x223160(0x204)];let _0x16bd3a=[],_0x4d4080=[...config[_0x223160(0x213)]]||[],_0x33e4ed=config[_0x223160(0x213)];_0x4d4080[_0x223160(0x201)]((_0x451088,_0x23893d)=>_0x451088[_0x223160(0x172)]>_0x23893d[_0x223160(0x172)]?-0x1:_0x23893d[_0x223160(0x172)]>_0x451088[_0x223160(0x172)]?0x1:0x0);const _0x18bbc7=getDate();if(_0x4d4080[0x0]){const _0x230093=fns[_0x223160(0x24c)](_0x4d4080[0x0]['date'],_0x223160(0x1a7),new Date()),_0x26f633=fns['parse'](_0x18bbc7,_0x223160(0x1a7),new Date());if(fns[_0x223160(0x195)](_0x230093,_0x26f633)){_0x16bd3a=_0x4d4080[0x0][_0x223160(0x147)];const _0x17cd6c=_0x16bd3a[_0x223160(0x254)](_0x2ec2c4=>_0x2ec2c4[_0x223160(0x138)]==_0x5827e2[0x0][_0x223160(0x138)]);_0x17cd6c?(_0x17cd6c['number']+=_0x5827e2[0x0][_0x223160(0x190)],_0x17cd6c['number']==0x0&&(_0x16bd3a=_0x16bd3a['filter'](_0x527e32=>{const _0x3f718f=_0x223160;return _0x527e32[_0x3f718f(0x138)]!=_0x5827e2[0x0][_0x3f718f(0x138)];}))):_0x16bd3a[_0x223160(0x1d1)](_0x5827e2[0x0]);const _0x270b6f=_0x33e4ed[_0x223160(0x254)](_0x278745=>_0x278745[_0x223160(0x172)]==_0x18bbc7);_0x270b6f[_0x223160(0x147)]=_0x16bd3a;}else _0x33e4ed['push']({'date':_0x18bbc7,'changes':[_0x5827e2[0x0]]});}const _0x3120e9=_0x33e4ed[_0x223160(0x254)](_0x1624a8=>_0x1624a8['date']==_0x18bbc7);if(_0x3120e9){let _0x2bef79=!![];_0x3120e9[_0x223160(0x147)][_0x223160(0x231)](_0x32d2cb=>{const _0xb2845=_0x223160;if(_0x32d2cb[_0xb2845(0x190)]!=0x0)_0x2bef79=![];}),_0x2bef79&&(_0x33e4ed=_0x33e4ed[_0x223160(0x1c8)](_0x5e457c=>{const _0x9841b2=_0x223160;return _0x5e457c[_0x9841b2(0x172)]!=_0x18bbc7;}));}let _0x27a598=dbConfig[_0x223160(0x162)](_0x223160(0x273))[_0x223160(0x254)]({'botID':botID})['value']();_0x27a598&&(dbConfig[_0x223160(0x162)](_0x223160(0x273))[_0x223160(0x254)]({'botID':botID})[_0x223160(0x1a1)]({'liquidity':_0x33e4ed})['write'](),config['liquidity']=_0x33e4ed),logHistory(_0x223160(0x23a),_0x223160(0x1dc)+Math['abs'](_0x5827e2[0x0][_0x223160(0x190)])+'\x20'+_0x5827e2[0x0]['coin']+'\x20'+(_0x5827e2[0x0][_0x223160(0x190)]>0x0?_0x223160(0x24a):_0x223160(0x1c3))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x223160(0x1fc)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x5827e2[0x0][_0x223160(0x190)])+'\x20'+_0x5827e2[0x0][_0x223160(0x138)]+'\x20'+(_0x5827e2[0x0][_0x223160(0x190)]>0x0?_0x223160(0x24a):_0x223160(0x1c3)));transactionDetected=!![],currentCoins=_0x4ed2fc,currentCoinsAll=_0x320bec;}else logger[_0x223160(0x1fc)](_0x223160(0x1dc)+Math[_0x223160(0x19f)](_0x5827e2[0x0]['number'])+'\x20'+_0x5827e2[0x0]['coin']+'\x20'+(_0x5827e2[0x0][_0x223160(0x190)]>0x0?_0x223160(0x24a):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x4ed2fc,currentCoinsAll=_0x320bec;}await sleep(watchTransactionsInterval);}catch(_0x5f4baf){if(!exchangeStopped)await handleError(_0x5f4baf,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x4edec3=config[_0x1f1fc5(0x20b)],_0x5723e2=![]){const _0x579f90=_0x1f1fc5;if(allSymbols&&!_0x5723e2)return;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x579f90(0x16f)](markets)['forEach'](_0x1b7e2c=>{const _0x2f5ccc=_0x579f90;_0x1b7e2c[0x1][_0x2f5ccc(0x1d8)]&&_0x1b7e2c[0x1]['spot']&&allSymbols[_0x2f5ccc(0x1d1)](_0x1b7e2c[0x0]);});}catch(_0x53f22a){throw _0x53f22a;}}async function initclient(){const _0x3cd1e1=_0x1f1fc5;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x3cd1e1(0x252),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3cd1e1(0x1ac),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1c8995=getNormalizedPerformance();emitPerformance(_0x1c8995),getStartingBalances(_0x1c8995);}async function toggleBotMode(){const _0x3b57b0=_0x1f1fc5;let _0x5a83ad=dbConfig[_0x3b57b0(0x162)](_0x3b57b0(0x273))[_0x3b57b0(0x254)]({'botID':botID})[_0x3b57b0(0x127)]();if(_0x5a83ad){const _0x335295=!_0x5a83ad['headless'];dbConfig[_0x3b57b0(0x162)](_0x3b57b0(0x273))[_0x3b57b0(0x254)]({'botID':botID})['assign']({'headless':_0x335295})[_0x3b57b0(0x20e)](),config[_0x3b57b0(0x134)]=_0x335295,proxyEmit(_0x3b57b0(0x259),emittedConfiguration()),updateBotManager();}}function _0x3189(_0xbdf30b,_0x4410f5){const _0x32f246=_0x549f();return _0x3189=function(_0x43d292,_0xed4024){_0x43d292=_0x43d292-0x116;let _0x549fca=_0x32f246[_0x43d292];return _0x549fca;},_0x3189(_0xbdf30b,_0x4410f5);}function updateBotManager(){const _0x183644=_0x1f1fc5;process[_0x183644(0x192)]({'updatebotmanager':!![]},_0x509f8e=>{});}async function loadCoins(_0x1b9e2e){const _0x5d2c5b=_0x1f1fc5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x13f283,_0x44ed03=0x0,_0x15a5f5=0x0;_0x1b9e2e[_0x5d2c5b(0x231)](_0x2d62fd=>{const _0x349b3f=_0x5d2c5b;loading[_0x349b3f(0x1d9)][_0x349b3f(0x1d1)](_0x2d62fd);}),loadingCanceled=![];let _0x22fa42=![];while(_0x13f283!=_0x1b9e2e[_0x5d2c5b(0x26b)]){_0x13f283=0x0,_0x1b9e2e[_0x5d2c5b(0x231)](_0x312c02=>{const _0x49f79f=_0x5d2c5b;if(global['ticker'][noslash(_0x312c02)]){loading[_0x49f79f(0x1d9)]=loading['remainingSymbols'][_0x49f79f(0x1c8)](_0x1071d4=>_0x1071d4!=_0x312c02);if(!watchedSymbols[_0x49f79f(0x183)](_0x312c02))watchedSymbols['push'](_0x312c02);_0x13f283++;}}),loading[_0x5d2c5b(0x17c)]=Math['round'](_0x13f283/_0x1b9e2e['length']*0x64);loading[_0x5d2c5b(0x17c)]!=0x64&&(_0x15a5f5>0x1e*0x5&&(loading[_0x5d2c5b(0x26c)]=!![],emitLoadingProgress()),_0x15a5f5>0x78*0x5&&!_0x22fa42&&(loading[_0x5d2c5b(0x13f)]=!![],emitLoadingProgress(),_0x22fa42=!![],logHistory(_0x5d2c5b(0x207),_0x5d2c5b(0x158)+loading[_0x5d2c5b(0x1d9)][_0x5d2c5b(0x232)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x5d2c5b(0x206)+loadCoinsRetryInterval/0xea60+_0x5d2c5b(0x153)),pidCoinReloading=setTimeout(()=>{const _0x9d1a11=_0x5d2c5b;process['send']({'stop':_0x9d1a11(0x1c2)},_0x2ff853=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5d2c5b(0x13f)]=!![],emitLoadingProgress();break;}else _0x13f283!=_0x44ed03&&(_0x44ed03=_0x13f283,emitLoadingProgress()),_0x15a5f5++,await sleep(0xc8);}_0x13f283==_0x1b9e2e[_0x5d2c5b(0x26b)]&&(coinsLoaded=!![],process['send']({'status':_0x5d2c5b(0x178),'live':'running'},_0x54a439=>{}),_0x22fa42&&logHistory(_0x5d2c5b(0x23a),_0x5d2c5b(0x14b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x44224c=_0x1f1fc5;proxyEmit(_0x44224c(0x259),{...emittedConfiguration(),'configstate':_0x44224c(0x238)});}function emitLoadingProgress(){const _0x3e1fec=_0x1f1fc5;proxyEmit(_0x3e1fec(0x25e),loading);}async function getFiat(){const _0x3a72b6=_0x1f1fc5;let _0x3f4b5b=global[_0x3a72b6(0x25a)][stablecoins[_0x3a72b6(0x1f9)]['coin']],_0x1933fa=global[_0x3a72b6(0x25a)][stablecoins[_0x3a72b6(0x14a)][_0x3a72b6(0x138)]];return{'eur':Number(_0x3f4b5b),'usd':Number(_0x1933fa)};}function capitalize(_0x1cea7a){const _0x38c45d=_0x1f1fc5;return _0x1cea7a[_0x38c45d(0x1a8)](0x0,0x1)[_0x38c45d(0x166)]()+_0x1cea7a['substring'](0x1);}function supportedExchanges(){const _0x2f2fc5=_0x1f1fc5,_0x4b556b=['ws',_0x2f2fc5(0x1ab),_0x2f2fc5(0x1b3),_0x2f2fc5(0x1fe),_0x2f2fc5(0x243),_0x2f2fc5(0x1f0),'createOrder',_0x2f2fc5(0x275),_0x2f2fc5(0x165),'fetchBalance'];let _0xa36e73=[],_0x2a4300=[],_0x2f24fa=ccxt['pro'][_0x2f2fc5(0x252)];_0x2f24fa[_0x2f2fc5(0x231)](_0x23f3d7=>{const _0x116182=_0x2f2fc5;try{const _0x48f255=new ccxt[(_0x116182(0x1b1))][_0x23f3d7]();_0x2a4300['push'](_0x48f255);}catch(_0x4fa1c1){}}),_0x2a4300[_0x2f2fc5(0x231)](_0x40ea5a=>{const _0x94438c=_0x2f2fc5;let _0x1b1ced=0x0;_0x4b556b[_0x94438c(0x231)](_0x4b9acd=>{const _0xb0beed=_0x94438c;_0x4b9acd in _0x40ea5a['has']&&_0x40ea5a[_0xb0beed(0x216)][_0x4b9acd]&&_0x1b1ced++;}),_0x1b1ced==_0x4b556b['length']&&_0xa36e73[_0x94438c(0x1d1)](capitalize(_0x40ea5a['id']));});let _0x5ac55b=[];return _0x2f24fa['forEach'](_0x135e79=>{const _0x3a4b4f=_0x2f2fc5;_0x135e79=capitalize(_0x135e79);if(!_0xa36e73[_0x3a4b4f(0x183)](_0x135e79))_0x5ac55b[_0x3a4b4f(0x1d1)](_0x135e79);}),_0xa36e73;}function setStartDatePerformance(){const _0x40725e=_0x1f1fc5;if(config&&config[_0x40725e(0x213)][0x0][_0x40725e(0x147)][_0x40725e(0x26b)]!=0x0){const _0x4d81f7=config[_0x40725e(0x213)][0x0][_0x40725e(0x147)];dbPerformance['get'](_0x40725e(0x205))[_0x40725e(0x254)]({'date':config[_0x40725e(0x155)]})[_0x40725e(0x1a1)]({'coins':_0x4d81f7})[_0x40725e(0x20e)]();}}async function recreateCoinResults(){const _0x208cc6=_0x1f1fc5;let _0x3dd143,_0x2f7be3=[];try{const _0x8ca3da=fns[_0x208cc6(0x1da)](fns['parseISO'](config[_0x208cc6(0x155)][_0x208cc6(0x276)](/\//g,'-')),_0x208cc6(0x12f));for(const _0x532969 of currentCoins){if(_0x532969[_0x208cc6(0x138)]!=config[_0x208cc6(0x19a)]){let _0x4189a4=0x0,_0x3f19bf,_0x3ac8ec;_0x3dd143=await getAllEventOrders(_0x532969[_0x208cc6(0x229)]);if(_0x3dd143[_0x208cc6(0x26b)]>0x0)_0x3dd143[_0x208cc6(0x231)](_0x57e87d=>{const _0xa06426=_0x208cc6,_0x501ac9=_0x532969[_0xa06426(0x229)]['includes'](config[_0xa06426(0x19a)]+'/');_0x2f7be3[_0xa06426(0x1d1)]({'datetime':_0x57e87d[_0xa06426(0x27d)],'coin':_0x532969[_0xa06426(0x138)],'symbol':_0x532969[_0xa06426(0x229)],'side':_0x57e87d['side'],'reverse':_0x501ac9,'amount':formatResult(_0x57e87d['filled'],0x8),'filled':formatResult(_0x57e87d[_0xa06426(0x122)],0x8),'price':formatResult(_0x57e87d['price'],0x8)}),_0x4189a4=_0x57e87d[_0xa06426(0x126)]==_0xa06426(0x12e)?_0x4189a4+_0x57e87d[_0xa06426(0x122)]:_0x4189a4-_0x57e87d['filled'];if(!_0x3ac8ec)_0x3ac8ec=_0x57e87d['price'];});_0x3f19bf=_0x532969[_0x208cc6(0x190)]-_0x4189a4;let _0x344193;config[_0x208cc6(0x213)][_0x208cc6(0x231)](_0x397168=>{const _0x2a1ebd=_0x208cc6;!_0x344193&&(_0x344193=_0x397168[_0x2a1ebd(0x147)]['find'](_0x137937=>_0x137937[_0x2a1ebd(0x138)]==_0x532969['coin']),_0x344193&&(_0x3f19bf=_0x344193[_0x2a1ebd(0x190)],_0x3ac8ec=_0x344193[_0x2a1ebd(0x1d7)]));});let _0x334a8d=dbCoinResults[_0x208cc6(0x162)](_0x208cc6(0x149))[_0x208cc6(0x254)]({'coin':_0x532969[_0x208cc6(0x138)]})[_0x208cc6(0x127)]();_0x334a8d={'coin':_0x532969[_0x208cc6(0x138)],'number':_0x3f19bf,'breakeven':_0x3ac8ec,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x208cc6(0x162)](_0x208cc6(0x149))[_0x208cc6(0x254)]({'coin':_0x532969[_0x208cc6(0x138)]})['assign'](_0x334a8d)[_0x208cc6(0x20e)]();}}_0x2f7be3[_0x208cc6(0x201)]((_0x8ba0ae,_0xad64ce)=>_0x8ba0ae[_0x208cc6(0x27d)]>_0xad64ce[_0x208cc6(0x27d)]?0x1:_0xad64ce[_0x208cc6(0x27d)]>_0x8ba0ae['datetime']?-0x1:0x0);let _0x5a269f=0x0;for(let _0xe4316e of _0x2f7be3){await updateCoinResults(_0xe4316e,!![]);}}catch(_0x19c0a9){await handleError(_0x19c0a9,_0x208cc6(0x13d));}}async function getAllEventOrders(_0x57d0a1){const _0x292d35=_0x1f1fc5;let _0x24c485=[],_0x44eee2=dbLogs[_0x292d35(0x162)](_0x292d35(0x24e))[_0x292d35(0x1c8)](_0x4aee5d=>{const _0x5796b4=_0x292d35,_0x3c47bb=_0x4aee5d[_0x5796b4(0x187)][_0x5796b4(0x1d2)]();return _0x3c47bb[_0x5796b4(0x183)](_0x57d0a1[_0x5796b4(0x1d2)]())&&(_0x3c47bb['includes']('market')&&_0x3c47bb[_0x5796b4(0x183)](_0x5796b4(0x151))||_0x3c47bb[_0x5796b4(0x183)](_0x5796b4(0x122))&&_0x3c47bb[_0x5796b4(0x183)](_0x5796b4(0x151)));})['sortBy'](_0x292d35(0x148))[_0x292d35(0x127)]();return _0x44eee2[_0x292d35(0x231)](_0xf989a8=>{const _0x3c9aba=_0x292d35,_0x9b2f00=_0xf989a8[_0x3c9aba(0x187)][_0x3c9aba(0x183)]('sell')?_0x3c9aba(0x208):'buy',_0x6c01df=/#([0-9]|\.)+\s/i,_0x4faafb=Number(_0x6c01df[_0x3c9aba(0x11b)](_0xf989a8[_0x3c9aba(0x187)])[0x0][_0x3c9aba(0x13c)](0x1)),_0x5fbeda=/@([0-9]|\.)+$/i,_0xa3974d=Number(_0x5fbeda[_0x3c9aba(0x11b)](_0xf989a8[_0x3c9aba(0x187)])[0x0]['slice'](0x1));_0x24c485[_0x3c9aba(0x1d1)]({'datetime':_0xf989a8[_0x3c9aba(0x148)],'coin':symbolToCoin(_0x57d0a1),'symbol':_0x57d0a1,'side':_0x9b2f00,'amount':_0x4faafb,'filled':_0x4faafb,'price':_0xa3974d});}),_0x24c485;}async function getAllOrders(_0x54b970,_0x35bbac){const _0x4fbed7=_0x1f1fc5;let _0x17837e=[];while(_0x35bbac<exchange[_0x4fbed7(0x167)]()){const _0x39c28a=0x1f4,_0x4e65f3=await exchange['fetchClosedOrders'](_0x54b970,_0x35bbac,_0x39c28a);if(_0x4e65f3[_0x4fbed7(0x26b)])_0x35bbac=_0x4e65f3[_0x4e65f3[_0x4fbed7(0x26b)]-0x1][_0x4fbed7(0x180)]+0x1,_0x17837e=_0x17837e['concat'](_0x4e65f3);else break;}return _0x17837e;}async function validate24hChanges(){const _0xaaf26d=_0x1f1fc5;for(const _0x2c5674 of currentCoins){if(_0x2c5674[_0xaaf26d(0x138)]!=config[_0xaaf26d(0x19a)]){let _0x9ab362;_0x2c5674[_0xaaf26d(0x1ff)]?_0x9ab362=formatResult((0x1/(global[_0xaaf26d(0x145)][noslash(_0x2c5674[_0xaaf26d(0x229)])]/0x64+0x1)-0x1)*0x64,0x3):_0x9ab362=global[_0xaaf26d(0x145)][noslash(_0x2c5674[_0xaaf26d(0x229)])],_0x9ab362<config[_0xaaf26d(0x175)]&&(logHistory(_0xaaf26d(0x207),_0x2c5674[_0xaaf26d(0x138)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x9ab362+'%'),logHistory(_0xaaf26d(0x207),_0xaaf26d(0x199)),logHistory(_0xaaf26d(0x207),_0xaaf26d(0x1f7)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4e83fc,_0x49c5ac){const _0x30c044=_0x1f1fc5;if(!_0x4e83fc)return!![];const _0x44d786=_0x49c5ac[_0x30c044(0x18d)]('.'),_0x5df318=_0x4e83fc[_0x30c044(0x18d)]('.');for(var _0x46cde5=0x0;_0x46cde5<_0x5df318[_0x30c044(0x26b)];_0x46cde5++){const _0x2a966c=~~_0x5df318[_0x46cde5],_0x3abf1d=~~_0x44d786[_0x46cde5];if(_0x2a966c<_0x3abf1d)return!![];if(_0x2a966c>_0x3abf1d)return![];}return![];}async function oneTimeMigration(){const _0x3cfdff=_0x1f1fc5;let _0x2e0faf=dbLogs[_0x3cfdff(0x162)]('version')[_0x3cfdff(0x127)]();if(isOlderVersion(_0x2e0faf,_0x3cfdff(0x284))){let _0x4b1817=[];const _0x422e96=dbLogs['get'](_0x3cfdff(0x24e))[_0x3cfdff(0x127)]();_0x422e96[_0x3cfdff(0x231)](_0x18a834=>{const _0x5b83ad=_0x3cfdff;_0x4b1817['push']({'time':_0x18a834[_0x5b83ad(0x148)],'type':_0x18a834[_0x5b83ad(0x157)],'event':_0x18a834['event']});}),dbLogs[_0x3cfdff(0x162)](_0x3cfdff(0x24e))['assign'](_0x4b1817)['write']();}let _0x32bfba=dbConfig['get'](_0x3cfdff(0x218))[_0x3cfdff(0x127)]();if(isOlderVersion(_0x32bfba,'2.3.5')){let _0xb89fa3=dbConfig[_0x3cfdff(0x162)]('bot')[_0x3cfdff(0x254)]({'botID':botID})[_0x3cfdff(0x127)]();if(_0xb89fa3){let _0x15dfab=[];_0xb89fa3['portfolio'][_0x3cfdff(0x231)](_0x5b7f71=>{const _0x534914=_0x3cfdff;_0x15dfab[_0x534914(0x1d1)]({'coin':_0x5b7f71[_0x534914(0x138)],'number':_0x5b7f71[_0x534914(0x198)],'price':_0x5b7f71[_0x534914(0x202)]}),delete _0x5b7f71[_0x534914(0x198)],delete _0x5b7f71[_0x534914(0x202)];});if(_0x15dfab['length']!==0x0)fs['writeFile'](configbackuppath+(_0x3cfdff(0x1c7)+botID+'.json'),JSON[_0x3cfdff(0x1ed)](_0x15dfab,null,0x4),function(_0x26810d){if(_0x26810d){}});const _0x1f187b=(_0x300025,_0x107189)=>{const _0x4d897b=_0x3cfdff;let _0x22bd85=[];_0x107189[_0x4d897b(0x231)](_0x583d0c=>{const _0x3ff9c6=_0x4d897b,_0x183006=_0x300025[_0x3ff9c6(0x254)](_0x2468e2=>_0x2468e2[_0x3ff9c6(0x138)]==_0x583d0c[_0x3ff9c6(0x138)]);if(!_0x183006)_0x22bd85[_0x3ff9c6(0x1d1)](_0x583d0c);});let _0x20d625=[];return _0x300025[_0x4d897b(0x231)](_0x578820=>{const _0x353c41=_0x4d897b,_0x121ba2=_0x107189[_0x353c41(0x254)](_0x1cafc2=>_0x1cafc2[_0x353c41(0x138)]==_0x578820[_0x353c41(0x138)]);if(!_0x121ba2||_0x121ba2[_0x353c41(0x190)]==0x0&&_0x578820[_0x353c41(0x190)]!=0x0)_0x20d625[_0x353c41(0x1d1)](_0x578820);}),{'missingDay1':_0x22bd85,'notInDay2':_0x20d625};},_0x501843=dbPerformance['get'](_0x3cfdff(0x205))[_0x3cfdff(0x25f)]()['value']();if(_0x501843[_0x3cfdff(0x26b)]>0x1){const {missingDay1:_0x4495bc,notInDay2:_0x5d53f3}=_0x1f187b(_0x15dfab,_0x501843[0x1][_0x3cfdff(0x149)]);_0x15dfab=[..._0x15dfab,..._0x4495bc],_0x5d53f3[_0x3cfdff(0x231)](_0x2638ff=>{const _0x27198a=_0x3cfdff;let _0x2d5016=_0x15dfab[_0x27198a(0x212)](_0x5e77d9=>_0x5e77d9['coin']==_0x2638ff[_0x27198a(0x138)]);_0x2d5016!=-0x1&&_0x15dfab[_0x27198a(0x139)](_0x2d5016,0x1);});}_0x15dfab[_0x3cfdff(0x201)]((_0x388533,_0x4ee9b3)=>_0x388533['coin']>_0x4ee9b3[_0x3cfdff(0x138)]?0x1:_0x4ee9b3[_0x3cfdff(0x138)]>_0x388533[_0x3cfdff(0x138)]?-0x1:0x0);let _0xb9c2bb=[{'date':_0xb89fa3[_0x3cfdff(0x155)],'changes':_0x15dfab}];_0x501843['length']>0x2&&_0x501843['forEach']((_0x44a80c,_0x11679a)=>{const _0x506d56=_0x3cfdff;if(_0x11679a>0x0&&_0x11679a<_0x501843['length']-0x1){const {missingDay1:_0x3c6565,notInDay2:_0x2923f4}=_0x1f187b(_0x501843[_0x11679a]['coins'],_0x501843[_0x11679a+0x1][_0x506d56(0x149)]);_0x15dfab=[],(_0x3c6565[_0x506d56(0x26b)]!=0x0||_0x2923f4[_0x506d56(0x26b)]!=0x0)&&(_0x3c6565[_0x506d56(0x26b)]!=0x0&&_0x15dfab[_0x506d56(0x1d1)](..._0x3c6565),_0x2923f4[_0x506d56(0x26b)]!=0x0&&(_0x2923f4[_0x506d56(0x231)](_0x50810d=>{const _0xf9945=_0x506d56;_0x50810d[_0xf9945(0x190)]=-_0x50810d[_0xf9945(0x190)];}),_0x15dfab[_0x506d56(0x1d1)](..._0x2923f4)),_0x15dfab[_0x506d56(0x201)]((_0x13b7e0,_0x147cbf)=>_0x13b7e0['coin']>_0x147cbf[_0x506d56(0x138)]?0x1:_0x147cbf['coin']>_0x13b7e0[_0x506d56(0x138)]?-0x1:0x0),_0xb9c2bb['push']({'date':_0x501843[_0x11679a+0x1][_0x506d56(0x172)],'changes':_0x15dfab}));}}),dbConfig[_0x3cfdff(0x162)](_0x3cfdff(0x273))[_0x3cfdff(0x254)]({'botID':botID})['assign']({..._0xb89fa3,'liquidity':_0xb9c2bb})['write']();}}if(isOlderVersion(_0x32bfba,'2.6.0')){let _0x3d18d3=dbConfig[_0x3cfdff(0x162)](_0x3cfdff(0x273))['find']({'botID':botID})[_0x3cfdff(0x127)]();if(_0x3d18d3){const _0x3f9723=_0x3d18d3[_0x3cfdff(0x20b)],_0x477749=_0x3f9723?capitalize(_0x3f9723):'Binance';dbConfig[_0x3cfdff(0x162)]('bot')[_0x3cfdff(0x254)]({'botID':botID})[_0x3cfdff(0x1a1)]({'exchange':_0x477749})[_0x3cfdff(0x20e)]();}}let _0x346311=dbPerformance[_0x3cfdff(0x162)](_0x3cfdff(0x218))[_0x3cfdff(0x127)]();isOlderVersion(_0x346311,'2.3.5')&&setStartDatePerformance();let _0x5c2658=dbCoinResults[_0x3cfdff(0x162)](_0x3cfdff(0x218))[_0x3cfdff(0x127)]();if(isOlderVersion(_0x5c2658,_0x3cfdff(0x260))){let _0x21adb3=dbCoinResults[_0x3cfdff(0x162)](_0x3cfdff(0x149))[_0x3cfdff(0x127)]();if(_0x21adb3[_0x3cfdff(0x26b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x465ab6=_0x1f1fc5;dbConfig[_0x465ab6(0x174)]('version',serverversion)[_0x465ab6(0x20e)](),dbPerformance[_0x465ab6(0x174)](_0x465ab6(0x218),serverversion)[_0x465ab6(0x20e)](),dbLogs[_0x465ab6(0x174)](_0x465ab6(0x218),serverversion)[_0x465ab6(0x20e)](),dbCoinResults[_0x465ab6(0x174)](_0x465ab6(0x218),serverversion)[_0x465ab6(0x20e)]();}function getConfiguration(_0x2f5788){const _0x32d8be=_0x1f1fc5;let _0x5bb928=dbConfig[_0x32d8be(0x162)](_0x32d8be(0x273))[_0x32d8be(0x254)]({'botID':_0x2f5788})[_0x32d8be(0x127)]();if(_0x5bb928){let _0x1c3b11=![];typeof _0x5bb928[_0x32d8be(0x1b9)]==_0x32d8be(0x1cf)&&(_0x5bb928={..._0x5bb928,'threshold':Number(_0x5bb928[_0x32d8be(0x1b9)])},_0x1c3b11=!![]),_0x5bb928[_0x32d8be(0x175)]==null&&(_0x5bb928={..._0x5bb928,'change24h':-0x14},_0x1c3b11=!![]),!_0x5bb928[_0x32d8be(0x225)]&&(_0x5bb928={..._0x5bb928,'fiat':_0x32d8be(0x1f2)},_0x1c3b11=!![]),!_0x5bb928[_0x32d8be(0x193)]&&(_0x5bb928={..._0x5bb928,'onepagemode':settings[_0x32d8be(0x193)]},_0x1c3b11=!![]),!_0x5bb928[_0x32d8be(0x21e)]&&(_0x5bb928={..._0x5bb928,'colorscheme':_0x32d8be(0x181)},_0x1c3b11=!![]),!_0x5bb928[_0x32d8be(0x17d)]&&(_0x5bb928={..._0x5bb928,'autoliquidity':!![]},_0x1c3b11=!![]),_0x1c3b11&&(_0x5bb928={'botID':_0x5bb928[_0x32d8be(0x15f)],'exchange':_0x5bb928[_0x32d8be(0x20b)],'apiKey':_0x5bb928[_0x32d8be(0x20d)],'apiSecret':_0x5bb928[_0x32d8be(0x117)],'apiPassword':_0x5bb928[_0x32d8be(0x233)],'basecoin':_0x5bb928[_0x32d8be(0x19a)],'botname':_0x5bb928[_0x32d8be(0x1b2)],'showname':_0x5bb928[_0x32d8be(0x1db)],'threshold':_0x5bb928[_0x32d8be(0x1b9)],'ordertype':_0x5bb928[_0x32d8be(0x170)],'timeout':_0x5bb928[_0x32d8be(0x26c)],'fiat':_0x5bb928[_0x32d8be(0x225)],'startdate':_0x5bb928[_0x32d8be(0x155)],'recreate':_0x5bb928[_0x32d8be(0x242)],'timeshift':_0x5bb928[_0x32d8be(0x215)],'onepagemode':_0x5bb928['onepagemode'],'headless':_0x5bb928[_0x32d8be(0x134)],'cooldown':_0x5bb928[_0x32d8be(0x22d)],'change24h':_0x5bb928[_0x32d8be(0x175)],'emojibuy':_0x5bb928[_0x32d8be(0x224)],'emojisell':_0x5bb928[_0x32d8be(0x25b)],'colorscheme':_0x5bb928[_0x32d8be(0x21e)],'portfolio':_0x5bb928[_0x32d8be(0x27b)],'autoliquidity':_0x5bb928['autoliquidity'],'liquidity':_0x5bb928[_0x32d8be(0x213)],'openOrders':_0x5bb928[_0x32d8be(0x1a0)]},dbConfig[_0x32d8be(0x162)](_0x32d8be(0x273))[_0x32d8be(0x27e)]()[_0x32d8be(0x20e)](),dbConfig[_0x32d8be(0x162)](_0x32d8be(0x273))[_0x32d8be(0x1d1)](_0x5bb928)[_0x32d8be(0x20e)]());}else _0x5bb928={'botID':_0x2f5788,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x2f5788,'showname':![],'threshold':0x3,'ordertype':_0x32d8be(0x1f6),'timeout':0x14,'fiat':_0x32d8be(0x1f2),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x32d8be(0x215)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x32d8be(0x181),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5bb928;}function emittedConfiguration(){const _0x10cdfa=_0x1f1fc5;let _0x370c46;if(config[_0x10cdfa(0x20d)]=='')_0x370c46={...config,'configstate':_0x10cdfa(0x25d)};else config[_0x10cdfa(0x20d)]==_0x10cdfa(0x220)?_0x370c46={...config,'configstate':'recovery'}:(_0x370c46={...config,'apiKey':'************','apiSecret':_0x10cdfa(0x1d3)},config['apiPassword']&&(_0x370c46[_0x10cdfa(0x233)]=_0x10cdfa(0x1d3)));return _0x370c46;}function getSettings(){const _0x4bdbfc=_0x1f1fc5;return dbSettings[_0x4bdbfc(0x162)]('settings')[_0x4bdbfc(0x127)]();}function getSecure(){const _0x207b70=_0x1f1fc5;return dbSecure[_0x207b70(0x162)]('secure')['value']()||{};}function updateTimeshift(_0xbe6ef9){const _0x428215=_0x1f1fc5;let _0x4353a8=dbConfig['get'](_0x428215(0x273))['find']({'botID':botID})['value']();_0x4353a8&&dbConfig['get'](_0x428215(0x273))[_0x428215(0x254)]({'botID':botID})[_0x428215(0x1a1)]({'timeshift':_0xbe6ef9})['write'](),config[_0x428215(0x215)]=_0xbe6ef9,proxyEmit(_0x428215(0x259),emittedConfiguration());}function updateOnepagemode(_0x240b9c){const _0x20b12d=_0x1f1fc5;let _0x32333f=dbConfig[_0x20b12d(0x162)]('bot')['find']({'botID':botID})[_0x20b12d(0x127)]();_0x32333f&&dbConfig[_0x20b12d(0x162)](_0x20b12d(0x273))[_0x20b12d(0x254)]({'botID':botID})[_0x20b12d(0x1a1)]({'onepagemode':_0x240b9c})['write'](),config[_0x20b12d(0x193)]=_0x240b9c,proxyEmit(_0x20b12d(0x259),emittedConfiguration());}async function storeConfiguration(_0x5550fb){const _0x5593f9=_0x1f1fc5;logger[_0x5593f9(0x1fc)](_0x5593f9(0x168));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5593f9(0x1fc)]('Transaction\x20detection\x20blocked');let _0x5051f8=[],_0x929dff=![],_0x49c954=![],_0x16230c=[];_0x5550fb[_0x5593f9(0x27b)]['forEach'](_0x3960ed=>{const _0x4d72da=_0x5593f9;if(!_0x3960ed[_0x4d72da(0x121)]&&_0x3960ed[_0x4d72da(0x138)]!=_0x5550fb['basecoin'])_0x16230c[_0x4d72da(0x1d1)](_0x3960ed[_0x4d72da(0x229)]);}),_0x16230c[_0x5593f9(0x231)](_0x397c1b=>{const _0x3133ec=_0x5593f9,_0x4f850f=watchedSymbols['includes'](_0x397c1b);!_0x4f850f&&_0x5051f8[_0x3133ec(0x1d1)](_0x397c1b);}),_0x16230c[_0x5593f9(0x231)](_0x4146ac=>{const _0x5c0aa8=_0x5593f9,_0x56ba07=currentCoins[_0x5c0aa8(0x254)](_0x45f052=>_0x45f052[_0x5c0aa8(0x229)]==_0x4146ac);!_0x56ba07&&(_0x929dff=!![]);}),currentCoins[_0x5593f9(0x231)](_0x59411b=>{const _0x5a3dec=_0x5593f9;if(_0x59411b[_0x5a3dec(0x138)]!=config[_0x5a3dec(0x19a)]){const _0x1c99ba=_0x16230c[_0x5a3dec(0x254)](_0x43951c=>_0x43951c==_0x59411b[_0x5a3dec(0x229)]);!_0x1c99ba&&(_0x929dff=!![]);}}),_0x5550fb[_0x5593f9(0x27b)][_0x5593f9(0x231)](_0x419881=>{const _0x170621=_0x5593f9,_0x1c8124=config['portfolio'][_0x170621(0x254)](_0x454ca5=>_0x454ca5[_0x170621(0x138)]==_0x419881[_0x170621(0x138)]);if(_0x1c8124&&_0x419881['offset']!=_0x1c8124[_0x170621(0x14f)])_0x49c954=!![];});let _0x26b14e=dbConfig['get'](_0x5593f9(0x273))[_0x5593f9(0x254)]({'botID':botID})[_0x5593f9(0x127)]();_0x5550fb={..._0x5550fb,'apiKey':crypt[_0x5593f9(0x11a)](secure[_0x5593f9(0x21f)],_0x5550fb[_0x5593f9(0x20d)])[_0x5593f9(0x1a4)],'apiSecret':crypt[_0x5593f9(0x11a)](secure[_0x5593f9(0x21f)],_0x5550fb[_0x5593f9(0x117)])[_0x5593f9(0x1a4)]};_0x5550fb[_0x5593f9(0x233)]&&(_0x5550fb[_0x5593f9(0x233)]=crypt[_0x5593f9(0x11a)](secure[_0x5593f9(0x21f)],_0x5550fb[_0x5593f9(0x233)])[_0x5593f9(0x1a4)]);let _0x12060f=![];if(_0x26b14e){_0x5550fb[_0x5593f9(0x20d)]==_0x5593f9(0x1d3)?_0x5550fb[_0x5593f9(0x20d)]=config['apiKey']:_0x12060f=!![];_0x5550fb[_0x5593f9(0x117)]=='************'?_0x5550fb['apiSecret']=config[_0x5593f9(0x117)]:_0x12060f=!![];if(_0x5550fb[_0x5593f9(0x233)]==_0x5593f9(0x1d3))_0x5550fb['apiPassword']=config[_0x5593f9(0x233)];else{if(_0x5550fb['apiPassword'])_0x12060f=!![];}dbConfig['get'](_0x5593f9(0x273))[_0x5593f9(0x254)]({'botID':botID})[_0x5593f9(0x1a1)](_0x5550fb)['write']();}else dbConfig[_0x5593f9(0x162)]('bot')[_0x5593f9(0x1d1)](_0x5550fb)[_0x5593f9(0x20e)](),_0x12060f=!![],process[_0x5593f9(0x192)]({'status':_0x5593f9(0x178),'live':_0x5593f9(0x129)},_0x1fdea9=>{});process['send']({'botname':_0x5550fb['botname']},_0x20b0c3=>{}),updateBotManager(),config={..._0x5550fb},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x12060f)await reset(_0x5051f8,!![]);else _0x929dff||_0x49c954?await reset(_0x5051f8,![]):getBalances();blockTransactionDetection=![],logger[_0x5593f9(0x1fc)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0xbac607){const _0x4921c7=_0x1f1fc5,_0x35923c={...config,'headless':_0xbac607[_0x4921c7(0x134)]};let _0x44120d=dbConfig['get']('bot')[_0x4921c7(0x254)]({'botID':botID})[_0x4921c7(0x127)]();_0x44120d&&dbConfig[_0x4921c7(0x162)]('bot')[_0x4921c7(0x254)]({'botID':botID})['assign'](_0x35923c)[_0x4921c7(0x20e)](),config={..._0x35923c},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x1d3d1e){const _0x1c0bdf=_0x1f1fc5,_0x4cf268={...config,'fiat':_0x1d3d1e};let _0x4f51b5=dbConfig[_0x1c0bdf(0x162)]('bot')[_0x1c0bdf(0x254)]({'botID':botID})['value']();_0x4f51b5&&dbConfig[_0x1c0bdf(0x162)](_0x1c0bdf(0x273))[_0x1c0bdf(0x254)]({'botID':botID})['assign'](_0x4cf268)[_0x1c0bdf(0x20e)](),config={..._0x4cf268},proxyEmit(_0x1c0bdf(0x259),emittedConfiguration());}function resetHistory(){const _0x1d8b5c=_0x1f1fc5;logger[_0x1d8b5c(0x264)](_0x1d8b5c(0x1fb));try{if(fs[_0x1d8b5c(0x1ad)](path[_0x1d8b5c(0x232)](configpath,'bot-'+botID+_0x1d8b5c(0x1b8))))fs[_0x1d8b5c(0x234)](path[_0x1d8b5c(0x232)](configpath,_0x1d8b5c(0x128)+botID+_0x1d8b5c(0x1b8)));if(fs[_0x1d8b5c(0x1ad)](path['join'](configpath,_0x1d8b5c(0x128)+botID+_0x1d8b5c(0x1dd))))fs[_0x1d8b5c(0x234)](path[_0x1d8b5c(0x232)](configpath,_0x1d8b5c(0x128)+botID+'-performance.json'));if(fs[_0x1d8b5c(0x1ad)](path['join'](configpath,_0x1d8b5c(0x128)+botID+_0x1d8b5c(0x1e6))))fs[_0x1d8b5c(0x234)](path['join'](configpath,_0x1d8b5c(0x128)+botID+_0x1d8b5c(0x1e6)));}catch(_0x5cb4da){if(_0x5cb4da)logger[_0x1d8b5c(0x264)](_0x1d8b5c(0x21b),_0x5cb4da);}const _0x36e496=getDate();let _0x2a4116=[];currentCoins[_0x1d8b5c(0x231)](_0x5e0313=>{const _0x537e2d=_0x1d8b5c;_0x2a4116[_0x537e2d(0x1d1)]({'coin':_0x5e0313[_0x537e2d(0x138)],'number':_0x5e0313['number'],'price':_0x5e0313['last']});});let _0x204c89=dbConfig[_0x1d8b5c(0x162)](_0x1d8b5c(0x273))[_0x1d8b5c(0x254)]({'botID':botID})[_0x1d8b5c(0x127)]();_0x204c89&&(dbConfig['get']('bot')[_0x1d8b5c(0x254)]({'botID':botID})['assign']({'liquidity':[{'date':_0x36e496,'changes':_0x2a4116}]})[_0x1d8b5c(0x20e)](),config[_0x1d8b5c(0x213)]=[]),process[_0x1d8b5c(0x192)]({'stop':_0x1d8b5c(0x1c2)},_0x49a381=>{});}function noslash(_0x49091c){const _0x5d400e=_0x1f1fc5;return _0x49091c[_0x5d400e(0x276)]('/','');}function updateHighestFee(_0x57c1d9){const _0x10b479=_0x1f1fc5;if(_0x57c1d9['reverse']){let _0x35fa50={'filled':_0x57c1d9[_0x10b479(0x122)]*_0x57c1d9[_0x10b479(0x1d7)],'amount':_0x57c1d9[_0x10b479(0x122)]*_0x57c1d9[_0x10b479(0x1d7)],'side':_0x57c1d9['side']==_0x10b479(0x208)?_0x10b479(0x12e):'sell','price':0x1/_0x57c1d9[_0x10b479(0x1d7)]};_0x57c1d9={..._0x57c1d9,..._0x35fa50};}const _0x3eee7e=defaultFee*_0x57c1d9[_0x10b479(0x122)]*_0x57c1d9['price'];lastFees[_0x10b479(0x27c)][_0x10b479(0x26b)]===0x14&&lastFees[_0x10b479(0x27c)][_0x10b479(0x176)](),lastFees[_0x10b479(0x27c)][_0x10b479(0x1d1)](_0x3eee7e),lastFees['highest']=Math[_0x10b479(0x13e)](...lastFees[_0x10b479(0x27c)]);}async function updateNumberCoinsCcxt(_0x3661ab){const _0x4fbbdf=_0x1f1fc5;logger[_0x4fbbdf(0x1fc)](_0x4fbbdf(0x277)+_0x3661ab[_0x4fbbdf(0x229)]+_0x4fbbdf(0x236)+_0x3661ab[_0x4fbbdf(0x13b)]+_0x4fbbdf(0x236)+_0x3661ab['id']);let _0x1c9d6a=_0x3661ab[_0x4fbbdf(0x13b)],_0x1507bf=![];currentCoins[_0x4fbbdf(0x231)](_0x12cc70=>{const _0x4fc8c7=_0x4fbbdf;_0x12cc70[_0x4fc8c7(0x229)]==_0x3661ab['symbol']&&(_0x1507bf=!![]);});if(!_0x1507bf)return;const _0x36334a=currentCoins[_0x4fbbdf(0x254)](_0x4150f3=>_0x4150f3[_0x4fbbdf(0x229)]==_0x3661ab[_0x4fbbdf(0x229)]),_0x474fe8=_0x2897a4=>{const _0x1355aa=_0x4fbbdf;if(_0x36334a)_0x36334a[_0x1355aa(0x23d)]=_0x2897a4;};if(_0x1c9d6a==_0x4fbbdf(0x1c9))_0x474fe8('open');else{if(_0x1c9d6a=='canceled'){_0x474fe8('canceled');const _0x4a5b8a=await getCoins();[currentCoins,currentCoinsAll]=_0x4a5b8a,await getOpenOrders(),handleOpenOrders();}else{if(_0x1c9d6a==_0x4fbbdf(0x235)){logger[_0x4fbbdf(0x1fc)](_0x4fbbdf(0x221)+_0x3661ab[_0x4fbbdf(0x229)]+_0x4fbbdf(0x236)+_0x3661ab[_0x4fbbdf(0x122)]+_0x4fbbdf(0x236)+_0x3661ab['id']);let _0x56efc6=![];if(lastOrders)for(const _0x563b5d of lastOrders){const _0x13a866=0xc8,_0x51c3da=0x1388;let _0x3af386=0x0;while(!_0x563b5d[_0x4fbbdf(0x22a)]&&_0x3af386*_0x13a866<_0x51c3da){_0x3af386++,await sleep(_0x13a866);}if(_0x3af386>0x0)logger['debug'](_0x4fbbdf(0x171)+_0x3af386*_0x13a866/0x3e8+_0x4fbbdf(0x1eb));if(_0x563b5d[_0x4fbbdf(0x22a)]==_0x3661ab['id']){logger[_0x4fbbdf(0x1fc)](_0x4fbbdf(0x287)+_0x3661ab['id']),_0x56efc6=!![];if(_0x563b5d[_0x4fbbdf(0x122)]==0x0){logger['debug']('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3661ab['id']);if(_0x3661ab[_0x4fbbdf(0x237)])_0x563b5d['price']=_0x3661ab[_0x4fbbdf(0x237)];else{if(_0x3661ab[_0x4fbbdf(0x1d7)])_0x563b5d[_0x4fbbdf(0x1d7)]=_0x3661ab[_0x4fbbdf(0x1d7)];else{}}_0x563b5d[_0x4fbbdf(0x122)]=_0x3661ab[_0x4fbbdf(0x122)],updateHighestFee(_0x563b5d),_0x474fe8(_0x4fbbdf(0x122)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x1dcec5=await getCoins();[currentCoins,currentCoinsAll]=_0x1dcec5;}_0x563b5d['fee']={'currency':_0x3661ab[_0x4fbbdf(0x123)]?_0x3661ab['fee'][_0x4fbbdf(0x226)]:null,'cost':_0x3661ab[_0x4fbbdf(0x123)]?_0x3661ab[_0x4fbbdf(0x123)][_0x4fbbdf(0x28a)]:0x0},await updateCoinResults(_0x563b5d);}}}if(!_0x56efc6){logger[_0x4fbbdf(0x1fc)](_0x4fbbdf(0x1ca)+_0x3661ab['id']),_0x474fe8(_0x4fbbdf(0x122));const _0x65b787=await getCoins();[currentCoins,currentCoinsAll]=_0x65b787,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x57d141=JSON[_0x4fbbdf(0x24c)](lastBalances['portfolio']);const _0x1c9972=_0x57d141[_0x4fbbdf(0x254)](_0x104f47=>_0x104f47[_0x4fbbdf(0x229)]==_0x3661ab[_0x4fbbdf(0x229)]);if(_0x1c9972){if(_0x1c9d6a==_0x4fbbdf(0x1c9))_0x1c9972[_0x4fbbdf(0x23d)]=_0x1c9972[_0x4fbbdf(0x23d)]=='filled'?_0x4fbbdf(0x122):_0x4fbbdf(0x1c9);else{if(_0x1c9d6a=='canceled')_0x1c9972['orderstatus']=_0x1c9972[_0x4fbbdf(0x23d)]==_0x4fbbdf(0x122)?_0x4fbbdf(0x122):_0x4fbbdf(0x1bf);else _0x1c9d6a==_0x4fbbdf(0x235)&&(_0x1c9972[_0x4fbbdf(0x23d)]=_0x4fbbdf(0x122));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4fbbdf(0x1ed)](_0x57d141)},proxyEmit(_0x4fbbdf(0x1ac),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xa0d4de=_0x1f1fc5;await getOpenOrders();let _0x470d63=![];currentCoins[_0xa0d4de(0x231)](_0x36a590=>{const _0xd67879=_0xa0d4de;_0x470d63=allOpenOrders[_0xd67879(0x254)](_0x1b3804=>_0x1b3804[_0xd67879(0x229)]==_0x36a590[_0xd67879(0x229)]),_0x36a590['orderstatus']=_0x470d63?_0xd67879(0x1c9):_0xd67879(0x16d);});}async function getCoins(_0x1e7756=!![],_0x3733b3=config[_0x1f1fc5(0x19a)]){const _0x1adca7=_0x1f1fc5;let _0x5c9641,_0x32e770=[],_0x1688ea=[],_0x59d7ff=[],_0xac60f6=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5c9641=await exchange['fetchBalance'](),mybalances=_0x5c9641[_0x1adca7(0x19d)];for(const [_0x33d38b,_0x4728a8]of Object[_0x1adca7(0x16f)](mybalances)){_0xac60f6[_0x1adca7(0x1d1)](_0x33d38b);}if(_0x3733b3=='')for(const [_0x1bfe3e,_0x274464]of Object[_0x1adca7(0x16f)](mybalances)){_0x274464!=0x0&&_0x1688ea[_0x1adca7(0x1d1)]({'coin':_0x1bfe3e});}else{let _0x325a27=![];for(const [_0x3784d2,_0xe2bfe0]of Object[_0x1adca7(0x16f)](mybalances)){if(_0xac60f6[_0x1adca7(0x183)](_0x3784d2)){const _0x44ce06=config[_0x1adca7(0x27b)]['find'](_0x8002cf=>_0x8002cf['coin']==_0x3784d2),_0x1e890a=_0x3784d2+'/'+_0x3733b3,_0x193775=_0x3733b3+'/'+_0x3784d2,_0x11c918=currentCoins[_0x1adca7(0x254)](_0x70cb13=>_0x70cb13[_0x1adca7(0x138)]==_0x3784d2);_0x325a27=![];if((_0xe2bfe0!=0x0||_0x44ce06)&&(allSymbols['includes'](_0x1e890a)||_0x3784d2==_0x3733b3))_0x3784d2!=_0x3733b3&&_0x32e770[_0x1adca7(0x1d1)](_0x1e890a),_0x1688ea[_0x1adca7(0x1d1)]({'coin':_0x3784d2,'symbol':_0x1e890a,'reverse':![],'number':Math[_0x1adca7(0x13e)](_0xe2bfe0+(_0x44ce06&&_0x44ce06[_0x1adca7(0x14f)]||0x0),0x0),'orderstatus':_0x11c918?_0x11c918[_0x1adca7(0x23d)]:_0x1adca7(0x16d)});else(_0xe2bfe0!=0x0||_0x44ce06)&&allSymbols['includes'](_0x193775)&&(_0x3784d2!=_0x3733b3&&_0x32e770[_0x1adca7(0x1d1)](_0x193775),_0x1688ea[_0x1adca7(0x1d1)]({'coin':_0x3784d2,'symbol':_0x193775,'reverse':!![],'number':Math[_0x1adca7(0x13e)](_0xe2bfe0+(_0x44ce06&&_0x44ce06[_0x1adca7(0x14f)]||0x0),0x0),'orderstatus':_0x11c918?_0x11c918['orderstatus']:'none'}));}}}}catch(_0xb39cdd){if(!_0x1e7756)handleErrorNoStop(_0xb39cdd,_0x1adca7(0x200));else await handleError(_0xb39cdd,_0x1adca7(0x200));}return _0x59d7ff=cloneDeep(_0x1688ea),_0x1688ea=_0x1688ea[_0x1adca7(0x1c8)](_0x1815cd=>{const _0x27c93d=_0x1adca7,_0x32bb43=config[_0x27c93d(0x27b)]['find'](_0x4e4074=>_0x4e4074[_0x27c93d(0x138)]==_0x1815cd[_0x27c93d(0x138)]);return _0x32bb43&&!_0x32bb43[_0x27c93d(0x121)];}),[_0x1688ea,_0x59d7ff];}async function getCoinNumber(_0x5cdc8d){const _0x3928b4=_0x1f1fc5;let _0x212ba5;try{const _0x5a39a8=await exchange[_0x3928b4(0x133)]();_0x212ba5=_0x5a39a8['total'][_0x5cdc8d];}catch(_0x22adc1){await handleError(_0x22adc1,_0x3928b4(0x1ef));}return _0x212ba5;}async function getOpenOrders(){const _0x327e57=_0x1f1fc5;let _0x5ee809;allOpenOrders=[];try{for(const _0x8eecf8 of config['portfolio']){!_0x8eecf8[_0x327e57(0x121)]&&_0x8eecf8[_0x327e57(0x138)]!=config[_0x327e57(0x19a)]&&(_0x5ee809=await exchange[_0x327e57(0x275)](_0x8eecf8[_0x327e57(0x229)]),_0x5ee809[_0x327e57(0x26b)]>0x0&&allOpenOrders[_0x327e57(0x1d1)](_0x5ee809[0x0]));}}catch(_0x2be5df){await handleError(_0x2be5df,_0x327e57(0x1c6));}}async function handleOpenOrders(_0x2b33ad=0x0){const _0x4b59c0=_0x1f1fc5;allOpenOrders[_0x4b59c0(0x26b)]==0x0&&lockOrders==ORDERS[_0x4b59c0(0x1b4)]&&allOrdersPlaced&&(_0x2b33ad==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x2b33ad++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4b59c0(0x1fc)](_0x4b59c0(0x239)),validateOrders(_0x4b59c0(0x245))));}async function testAPI(_0x38f5b5){const _0x142df2=_0x1f1fc5,_0xbfcf45=ccxt[_0x142df2(0x1b1)][_0x38f5b5[_0x142df2(0x20b)][_0x142df2(0x1d2)]()],_0x35ca3e=new _0xbfcf45({'apiKey':_0x38f5b5[_0x142df2(0x20d)],'secret':_0x38f5b5[_0x142df2(0x117)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x142df2(0x186)}});if(_0x38f5b5[_0x142df2(0x233)])_0x35ca3e[_0x142df2(0x1bd)]=_0x38f5b5[_0x142df2(0x233)];try{await _0x35ca3e['loadMarkets']();}catch(_0x1ecbdb){throw _0x1ecbdb;}}function cloneDeep(_0x2125a8){const _0x25bec4=_0x1f1fc5;return JSON[_0x25bec4(0x24c)](JSON[_0x25bec4(0x1ed)](_0x2125a8));}async function getPortfolio(_0x315e30){const _0x419e17=_0x1f1fc5;let _0x2015b6=[],_0x3da358=[],_0x5aa199=[],_0x2f3414;if(_0x315e30[_0x419e17(0x20d)]!=='************'||_0x315e30[_0x419e17(0x117)]!==_0x419e17(0x1d3)||_0x315e30['apiPassword']&&_0x315e30[_0x419e17(0x233)]!==_0x419e17(0x1d3)){if(config[_0x419e17(0x20b)]){if(_0x315e30['apiKey']==_0x419e17(0x1d3))_0x315e30[_0x419e17(0x20d)]=config[_0x419e17(0x20d)];if(_0x315e30['apiSecret']==_0x419e17(0x1d3))_0x315e30[_0x419e17(0x117)]=config[_0x419e17(0x117)];if(_0x315e30[_0x419e17(0x233)]==_0x419e17(0x1d3))_0x315e30[_0x419e17(0x233)]=config['apiPassword'];try{await testAPI(_0x315e30);}catch(_0x5d2f9a){if(_0x5d2f9a[_0x419e17(0x26d)]()[_0x419e17(0x183)](_0x419e17(0x257))){logger['debug'](_0x419e17(0x1d6)),proxyEmit(_0x419e17(0x27b),![]);return;}else{handleError(_0x5d2f9a,_0x419e17(0x191));return;}}}await initExchange(_0x315e30['exchange'],_0x315e30[_0x419e17(0x20d)],_0x315e30[_0x419e17(0x117)],_0x315e30[_0x419e17(0x233)]);try{await loadSymbols(_0x315e30['exchange'],!![]);}catch(_0x483439){if(_0x483439[_0x419e17(0x26d)]()['includes'](_0x419e17(0x257))){proxyEmit(_0x419e17(0x27b),![]);return;}else{handleError(_0x483439,'getPortfolio(1)');return;}}const _0x2b831d=await getCoins(![],_0x315e30['basecoin']);_0x5aa199=cloneDeep(_0x2b831d[0x1]);}else _0x5aa199=cloneDeep(currentCoinsAll);if(_0x315e30[_0x419e17(0x19a)]=='')proxyEmit('portfolio',_0x5aa199);else{_0x5aa199[_0x419e17(0x231)](_0x22689a=>{const _0x462476=_0x419e17;if(_0x22689a['coin']!=_0x315e30['basecoin'])_0x2015b6[_0x462476(0x1d1)](_0x22689a[_0x462476(0x229)]);});try{_0x3da358=await exchange[_0x419e17(0x1ab)](_0x2015b6);}catch(_0x14b935){if(_0x14b935['toString']()[_0x419e17(0x183)]('AuthenticationError')){proxyEmit(_0x419e17(0x27b),![]);return;}else{handleError(_0x14b935,_0x419e17(0x169));return;}}_0x5aa199[_0x419e17(0x231)](_0x1605f1=>{const _0x3f23d3=_0x419e17;_0x1605f1['coin']!=_0x315e30[_0x3f23d3(0x19a)]?_0x2f3414=_0x1605f1[_0x3f23d3(0x1ff)]?0x1/_0x3da358[_0x1605f1[_0x3f23d3(0x229)]][_0x3f23d3(0x154)]:_0x3da358[_0x1605f1[_0x3f23d3(0x229)]][_0x3f23d3(0x154)]:_0x2f3414=0x1,_0x1605f1[_0x3f23d3(0x1d7)]=formatResult(_0x2f3414,0x8);}),proxyEmit(_0x419e17(0x27b),_0x5aa199);}}function truncateTradeAmount(_0x1f7eab,_0x5a8f0e){const _0x25d160=_0x1f1fc5;let _0x3f1d38=0x0;try{_0x3f1d38=exchange[_0x25d160(0x289)](_0x1f7eab,_0x5a8f0e);}catch(_0x4466bc){}return _0x3f1d38;}function checkMinimums(_0x67e2){const _0x5ed6b6=_0x1f1fc5;let _0x3a878b=!![];const _0x10a266=!_0x67e2['reverse']?markets[_0x67e2[_0x5ed6b6(0x229)]][_0x5ed6b6(0x20a)][_0x5ed6b6(0x20f)]['min']:markets[_0x67e2[_0x5ed6b6(0x229)]]['limits']['cost'][_0x5ed6b6(0x24b)],_0x3ab08b=!_0x67e2[_0x5ed6b6(0x1ff)]?markets[_0x67e2['symbol']][_0x5ed6b6(0x20a)][_0x5ed6b6(0x28a)]['min']:markets[_0x67e2[_0x5ed6b6(0x229)]][_0x5ed6b6(0x20a)][_0x5ed6b6(0x20f)][_0x5ed6b6(0x24b)],_0x264006=truncateTradeAmount(_0x67e2[_0x5ed6b6(0x229)],_0x67e2[_0x5ed6b6(0x17f)]);_0x67e2[_0x5ed6b6(0x17f)]=_0x264006;if(Math['abs'](_0x264006)<_0x10a266)_0x3a878b=![];if(Math[_0x5ed6b6(0x19f)](_0x264006)*_0x67e2[_0x5ed6b6(0x154)]<_0x3ab08b)_0x3a878b=![];if(_0x67e2[_0x5ed6b6(0x126)]==_0x5ed6b6(0x208)){let _0x553a1d=config['portfolio'][_0x5ed6b6(0x254)](_0x2ed43c=>_0x2ed43c['coin']==_0x67e2[_0x5ed6b6(0x138)]);if(_0x553a1d[_0x5ed6b6(0x14f)]>0x0){if(Math[_0x5ed6b6(0x19f)](_0x264006)>_0x67e2[_0x5ed6b6(0x190)]-_0x553a1d[_0x5ed6b6(0x14f)])_0x3a878b=![];}else{if(Math['abs'](_0x264006)>_0x67e2[_0x5ed6b6(0x190)])_0x3a878b=![];}}if(_0x67e2[_0x5ed6b6(0x126)]==_0x5ed6b6(0x12e)){let _0x12c7b1=config['portfolio'][_0x5ed6b6(0x254)](_0x17b60a=>_0x17b60a[_0x5ed6b6(0x138)]==config[_0x5ed6b6(0x19a)]),_0x1b01fe=currentCoins['find'](_0x28d482=>_0x28d482[_0x5ed6b6(0x138)]==config[_0x5ed6b6(0x19a)]);if(_0x12c7b1[_0x5ed6b6(0x14f)]>0x0){if(Math['abs'](_0x264006)*_0x67e2[_0x5ed6b6(0x154)]>_0x1b01fe[_0x5ed6b6(0x190)]-_0x12c7b1[_0x5ed6b6(0x14f)])_0x3a878b=![];}else{if(Math[_0x5ed6b6(0x19f)](_0x264006)*_0x67e2['last']>_0x1b01fe[_0x5ed6b6(0x190)])_0x3a878b=![];}}return _0x3a878b;}async function getBalances(_0xb08787=!![]){const _0x46a92e=_0x1f1fc5;let _0xc0f0f1=0x0,_0x57b3af;const _0x35a0cc=config['threshold'];if(config[_0x46a92e(0x134)]&&config[_0x46a92e(0x175)]<0x0)await validate24hChanges();currentCoins[_0x46a92e(0x231)](_0x417051=>{const _0x5cef31=_0x46a92e;if(_0x417051[_0x5cef31(0x138)]!=config['basecoin']){let _0x4863da=global['ticker'][noslash(_0x417051[_0x5cef31(0x229)])];_0x57b3af=_0x417051[_0x5cef31(0x1ff)]?0x1/_0x4863da:_0x4863da;}else _0x57b3af=0x1;let _0x5cd863=_0x417051[_0x5cef31(0x190)]*_0x57b3af;_0xc0f0f1+=_0x5cd863,_0x417051[_0x5cef31(0x154)]=formatResult(Number(_0x57b3af),0x8),_0x417051[_0x5cef31(0x127)]=_0x5cd863;}),currentCoins[_0x46a92e(0x231)](_0x11c472=>{const _0x3f3718=_0x46a92e;let _0x5e4321=config['portfolio'][_0x3f3718(0x254)](_0x3000f8=>_0x3000f8[_0x3f3718(0x138)]==_0x11c472['coin']),_0x1f13dd=Number(_0x5e4321[_0x3f3718(0x16c)]),_0x1639bb=_0x11c472[_0x3f3718(0x127)]/_0xc0f0f1*0x64,_0x1999e3=_0x1f13dd*_0xc0f0f1/0x64/_0x11c472[_0x3f3718(0x154)]-_0x11c472[_0x3f3718(0x190)];_0x11c472['distribution']=formatResult(_0x1639bb,0x3),_0x11c472[_0x3f3718(0x120)]=formatResult(_0x1f13dd,0x3),_0x11c472['trade']=formatResult(_0x1999e3,0x8),_0x11c472[_0x3f3718(0x126)]='',_0x11c472[_0x3f3718(0x274)]=![];if(_0x11c472['coin']!=config[_0x3f3718(0x19a)]){if(_0x11c472[_0x3f3718(0x16c)]>_0x1f13dd)_0x11c472[_0x3f3718(0x126)]=_0x3f3718(0x208),_0x11c472['valid']=checkMinimums(_0x11c472);else _0x11c472[_0x3f3718(0x16c)]<_0x1f13dd&&(_0x11c472[_0x3f3718(0x126)]=_0x3f3718(0x12e),_0x11c472[_0x3f3718(0x274)]=checkMinimums(_0x11c472));}_0x11c472[_0x3f3718(0x1e5)]=_0x11c472[_0x3f3718(0x16c)]/_0x11c472[_0x3f3718(0x120)]-0x1;if(_0x11c472[_0x3f3718(0x23d)]==_0x3f3718(0x122)||_0x11c472[_0x3f3718(0x23d)]==_0x3f3718(0x1bf))_0x11c472['orderstatus']=_0x3f3718(0x16d);}),currentCoins[_0x46a92e(0x201)]((_0x5049e7,_0x2e9284)=>_0x5049e7[_0x46a92e(0x1e5)]<_0x2e9284[_0x46a92e(0x1e5)]?0x1:_0x2e9284[_0x46a92e(0x1e5)]<_0x5049e7[_0x46a92e(0x1e5)]?-0x1:0x0);const _0x58b0a8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x58b0a8[_0x46a92e(0x1f9)],'usd':_0x58b0a8[_0x46a92e(0x14a)],'portfolio':JSON[_0x46a92e(0x1ed)](currentCoins),'threshold':_0x35a0cc},proxyEmit(_0x46a92e(0x1ac),{'serverversion':serverversion,'balances':lastBalances});if(_0xb08787){if(config[_0x46a92e(0x134)])headlessMode({'portfolio':currentCoins,'threshold':_0x35a0cc});else{if(lockOrders==ORDERS[_0x46a92e(0x26e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x35a0cc});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x16c520=getNormalizedPerformance();getStartingBalances(_0x16c520),emitPerformance(_0x16c520);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2fad14=getNormalizedPerformance();emitPerformance(_0x2fad14),getStartingBalances(_0x2fad14),logger[_0x46a92e(0x1fc)](_0x46a92e(0x219));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x25dfb1=_0x1f1fc5;if(!lastBalances)return;let _0x16b782=[],_0x4315f8,_0x298978=JSON[_0x25dfb1(0x24c)](lastBalances[_0x25dfb1(0x27b)]);_0x298978[_0x25dfb1(0x201)]((_0x32dc62,_0x472693)=>_0x32dc62[_0x25dfb1(0x138)]>_0x472693[_0x25dfb1(0x138)]?0x1:_0x472693[_0x25dfb1(0x138)]>_0x32dc62[_0x25dfb1(0x138)]?-0x1:0x0),_0x298978[_0x25dfb1(0x231)](_0x32c090=>{const _0x84c4d1=_0x25dfb1;let _0x1403a0={'coin':_0x32c090[_0x84c4d1(0x138)],'number':_0x32c090['number'],'price':_0x32c090[_0x84c4d1(0x154)]};_0x16b782[_0x84c4d1(0x1d1)](_0x1403a0);});const _0x3ae400=await getFiat();_0x4315f8={'date':lastBalances['time'][_0x25dfb1(0x18d)]('\x20')[0x0],'eur':_0x3ae400[_0x25dfb1(0x1f9)],'usd':_0x3ae400['usd'],'coins':_0x16b782};let _0x29e6d5=dbPerformance[_0x25dfb1(0x162)](_0x25dfb1(0x205))[_0x25dfb1(0x254)]({'date':_0x4315f8[_0x25dfb1(0x172)]})['value']();_0x29e6d5?_0x4315f8[_0x25dfb1(0x172)]!=config[_0x25dfb1(0x155)]&&dbPerformance[_0x25dfb1(0x162)](_0x25dfb1(0x205))[_0x25dfb1(0x254)]({'date':_0x4315f8[_0x25dfb1(0x172)]})[_0x25dfb1(0x1a1)](_0x4315f8)['write']():dbPerformance[_0x25dfb1(0x162)](_0x25dfb1(0x205))[_0x25dfb1(0x1d1)](_0x4315f8)[_0x25dfb1(0x20e)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x184bd1=_0x1f1fc5;let _0x146d32=[];if(dbPerformance[_0x184bd1(0x216)](_0x184bd1(0x205))[_0x184bd1(0x127)]()){let _0x38db8b=dbPerformance[_0x184bd1(0x162)](_0x184bd1(0x205))[_0x184bd1(0x25f)]()[_0x184bd1(0x1c8)](_0x5203dc=>{if(_0x5203dc['coins']['length']==0x0)return![];else return!![];})[_0x184bd1(0x18b)]('date')['value'](),_0x3b3c58=[...config[_0x184bd1(0x213)]];_0x3b3c58['sort']((_0x4b5a5a,_0x5aee21)=>_0x4b5a5a[_0x184bd1(0x172)]>_0x5aee21[_0x184bd1(0x172)]?-0x1:_0x5aee21[_0x184bd1(0x172)]>_0x4b5a5a[_0x184bd1(0x172)]?0x1:0x0);let _0x1a6036=0x1,_0x2b2fcc=[],_0x14ad6b=0x0;_0x38db8b[_0x184bd1(0x13c)]()[_0x184bd1(0x1ff)]()[_0x184bd1(0x231)]((_0x3afb80,_0x3e8d1a)=>{const _0x333052=_0x184bd1;if(_0x3b3c58[_0x14ad6b]){if(_0x38db8b[_0x38db8b[_0x333052(0x26b)]-_0x3e8d1a]&&_0x3b3c58[_0x14ad6b]['date']==_0x38db8b[_0x38db8b[_0x333052(0x26b)]-_0x3e8d1a]['date']){if(_0x3e8d1a<_0x38db8b['length']){let _0x5d6abc=0x0,_0x69afbb=0x0;_0x38db8b[_0x38db8b[_0x333052(0x26b)]-_0x3e8d1a][_0x333052(0x149)][_0x333052(0x231)](_0x3e3ce6=>{const _0x5c8b01=_0x333052;_0x69afbb+=_0x3e3ce6[_0x5c8b01(0x190)]*_0x3e3ce6[_0x5c8b01(0x1d7)];}),_0x3b3c58[_0x14ad6b]['changes'][_0x333052(0x231)](_0x25b477=>{const _0x17d75a=_0x333052;_0x5d6abc+=_0x25b477[_0x17d75a(0x190)]*_0x25b477[_0x17d75a(0x1d7)];}),_0x1a6036*=_0x5d6abc/(_0x69afbb-_0x5d6abc)+0x1;}_0x14ad6b++;}}let _0xa8bd15=0x0;_0x3afb80[_0x333052(0x149)][_0x333052(0x231)](_0x5b5613=>{const _0x177154=_0x333052;_0xa8bd15+=_0x5b5613['number']*_0x5b5613[_0x177154(0x1d7)];}),_0x2b2fcc[_0x38db8b[_0x333052(0x26b)]-_0x3e8d1a-0x1]=_0xa8bd15*(_0x1a6036-0x1);});let _0x2f683d=[];_0x3b3c58=[...config[_0x184bd1(0x213)]]||[];let _0x965d80=0x0;_0x14ad6b=0x0,_0x38db8b[_0x184bd1(0x231)]((_0x2ce3f8,_0x28c670)=>{const _0x2ff3dc=_0x184bd1;if(_0x3b3c58[_0x14ad6b]){const _0x418c5e=fns[_0x2ff3dc(0x24c)](_0x3b3c58[_0x14ad6b][_0x2ff3dc(0x172)],'yyyy/MM/dd',new Date()),_0x50e89e=fns[_0x2ff3dc(0x24c)](_0x2ce3f8[_0x2ff3dc(0x172)],_0x2ff3dc(0x1a7),new Date());if(fns[_0x2ff3dc(0x195)](_0x418c5e,_0x50e89e)){let _0x4ce72b=0x0;_0x3b3c58[_0x14ad6b][_0x2ff3dc(0x147)][_0x2ff3dc(0x231)](_0x475f9f=>{const _0x5da987=_0x2ff3dc;!_0x2f683d[_0x475f9f[_0x5da987(0x138)]]?_0x2f683d[_0x475f9f[_0x5da987(0x138)]]=_0x475f9f[_0x5da987(0x190)]:(_0x4ce72b=_0x2f683d[_0x475f9f[_0x5da987(0x138)]],_0x2f683d[_0x475f9f[_0x5da987(0x138)]]+=_0x475f9f[_0x5da987(0x190)]);const _0x22421f=_0x2ce3f8[_0x5da987(0x149)][_0x5da987(0x254)](_0x45b3e3=>_0x45b3e3[_0x5da987(0x138)]==_0x475f9f['coin']);(!_0x22421f||_0x22421f['number']==0x0)&&(_0x965d80+=(-_0x475f9f[_0x5da987(0x190)]-_0x4ce72b)*_0x475f9f[_0x5da987(0x1d7)]);}),_0x14ad6b++;}}_0x2ce3f8[_0x2ff3dc(0x149)][_0x2ff3dc(0x231)]((_0x885b3e,_0x43eb5b)=>{const _0x3d45a4=_0x2ff3dc;_0x2f683d[_0x885b3e[_0x3d45a4(0x138)]]&&(_0x885b3e['initial']=_0x2f683d[_0x885b3e['coin']]);}),_0x146d32[_0x2ff3dc(0x1d1)]({'date':_0x2ce3f8[_0x2ff3dc(0x172)],'eur':_0x2ce3f8['eur'],'usd':_0x2ce3f8[_0x2ff3dc(0x14a)],'offset':_0x2b2fcc[_0x28c670],'netoffset':_0x965d80,'coins':_0x2ce3f8[_0x2ff3dc(0x149)]});});}return _0x146d32;}function emitPerformance(_0xca61aa){const _0x1b116f=_0x1f1fc5;_0xca61aa['length']!==0x0?(proxyEmit(_0x1b116f(0x12a),_0xca61aa),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5e97c1,_0x1a3eba){const _0x5c66c8=_0x1f1fc5;let _0x2fcb9e=0x0,_0x3687a9=0x0,_0x4ce936=0x0;_0x5e97c1[_0x5c66c8(0x149)][_0x5c66c8(0x231)](_0x4bcab7=>{const _0x5415c6=_0x5c66c8;_0x2fcb9e+=_0x4bcab7[_0x5415c6(0x190)]*_0x4bcab7[_0x5415c6(0x1d7)];});_0x1a3eba&&(_0x2fcb9e+=_0x5e97c1[_0x5c66c8(0x14f)]);if(config[_0x5c66c8(0x19a)]===_0x5c66c8(0x177)||config['basecoin']===_0x5c66c8(0x1d5))_0x3687a9=_0x2fcb9e*_0x5e97c1[_0x5c66c8(0x1f9)],_0x4ce936=_0x2fcb9e*_0x5e97c1['usd'];else{if(usdBasecoins[_0x5c66c8(0x183)](config['basecoin']))_0x3687a9=_0x2fcb9e*_0x5e97c1[_0x5c66c8(0x1f9)]/_0x5e97c1[_0x5c66c8(0x14a)],_0x4ce936=_0x2fcb9e;else config[_0x5c66c8(0x19a)]==='EUR'&&(_0x3687a9=_0x2fcb9e,_0x4ce936=_0x2fcb9e*_0x5e97c1[_0x5c66c8(0x14a)]/_0x5e97c1[_0x5c66c8(0x1f9)]);}return[_0x2fcb9e,_0x3687a9,_0x4ce936];}function getKPIs(_0x122181,_0x152d8f='EUR'){const _0x57e2ba=_0x1f1fc5,_0x46fc5b=config[_0x57e2ba(0x19a)],_0x4bbb93=lastBalances,_0x363786=currentCoins,_0x100228=getNormalizedPerformance(),_0x12b6c7=_0x122181===_0x57e2ba(0x19a)?_0x46fc5b:_0x122181===_0x57e2ba(0x225)||_0x122181===_0x57e2ba(0x188)?_0x152d8f:_0x57e2ba(0x1e3)+_0x46fc5b,_0x19c0de=_0x122181===_0x57e2ba(0x141)?_0x57e2ba(0x144):_0x122181===_0x57e2ba(0x188)?'Net\x20effect':_0x12b6c7+_0x57e2ba(0x250),_0x43b176=_0x122181===_0x57e2ba(0x141)||_0x122181==='net-fiat'?'Net\x20effect':_0x12b6c7+'\x20change';let _0xcd625b=0x0;_0x363786[_0x57e2ba(0x231)](_0x4edfab=>{const _0x329949=_0x57e2ba;_0xcd625b+=_0x4edfab[_0x329949(0x190)]*_0x4edfab['last'];});if(_0x122181===_0x57e2ba(0x225)||_0x122181===_0x57e2ba(0x188)){if(_0x46fc5b===_0x57e2ba(0x177)||_0x46fc5b===_0x57e2ba(0x1d5))_0xcd625b=_0xcd625b*(_0x152d8f===_0x57e2ba(0x217)?_0x4bbb93[_0x57e2ba(0x1f9)]:_0x4bbb93[_0x57e2ba(0x14a)]);else{if(usdBasecoins['includes'](_0x46fc5b))_0xcd625b=_0xcd625b*(_0x152d8f===_0x57e2ba(0x217)?_0x4bbb93[_0x57e2ba(0x1f9)]/_0x4bbb93[_0x57e2ba(0x14a)]:0x1);else _0x46fc5b===_0x57e2ba(0x217)&&(_0xcd625b=_0xcd625b*(_0x152d8f===_0x57e2ba(0x217)?0x1:_0x4bbb93['usd']/_0x4bbb93['eur']));}}let _0x2a5e8b;if(_0xcd625b!==0x0){if(_0x122181==='basecoin')_0x2a5e8b=(_0xcd625b/startingBalances[_0x57e2ba(0x19a)]-0x1)*0x64;else{if(_0x152d8f===_0x57e2ba(0x217))_0x2a5e8b=(_0xcd625b/startingBalances['eur']-0x1)*0x64;else _0x2a5e8b=(_0xcd625b/startingBalances[_0x57e2ba(0x14a)]-0x1)*0x64;}let _0xc38189=0x0;if(startingBalances['coins'])_0x363786['forEach'](_0x5d0aec=>{const _0x478d97=_0x57e2ba;let _0x3469cc=startingBalances['coins'][_0x478d97(0x254)](_0x463090=>_0x463090[_0x478d97(0x138)]===_0x5d0aec[_0x478d97(0x138)]);if(_0x3469cc&&_0x3469cc[_0x478d97(0x138)]&&_0x5d0aec[_0x478d97(0x190)]!==0x0)_0xc38189+=_0x3469cc['number']*_0x5d0aec[_0x478d97(0x154)];});let _0xa1144b=0x0;if(_0x100228[_0x57e2ba(0x26b)]!==0x0){let _0x4d7058=_0x100228[_0x100228['length']-0x1];_0xa1144b=_0x4d7058[_0x57e2ba(0x214)];}_0xc38189-=_0xa1144b;_0x122181==='net-basecoin'&&(_0x2a5e8b=(_0xcd625b-_0xc38189)/startingBalances['basecoin']*0x64,_0xcd625b=_0xcd625b-_0xc38189);if(_0x122181===_0x57e2ba(0x188)){let _0x4deebf=_0x152d8f===_0x57e2ba(0x217)?startingBalances[_0x57e2ba(0x1f9)]:startingBalances['usd'];if(_0x46fc5b===_0x57e2ba(0x177)||_0x46fc5b===_0x57e2ba(0x1d5))_0xc38189=_0x152d8f===_0x57e2ba(0x217)?_0xc38189*_0x4bbb93[_0x57e2ba(0x1f9)]:_0xc38189*_0x4bbb93[_0x57e2ba(0x14a)];else{if(usdBasecoins[_0x57e2ba(0x183)](_0x46fc5b))_0xc38189=_0x152d8f===_0x57e2ba(0x217)?_0xc38189*_0x4bbb93[_0x57e2ba(0x1f9)]/_0x4bbb93[_0x57e2ba(0x14a)]:_0xc38189;else _0x46fc5b==='EUR'&&(_0xc38189=_0x152d8f===_0x57e2ba(0x217)?_0xc38189:_0xc38189*_0x4bbb93['usd']/_0x4bbb93['eur']);}_0x2a5e8b=(_0xcd625b-_0xc38189)/_0x4deebf*0x64,_0xcd625b=_0xcd625b-_0xc38189;}if(_0x2a5e8b){if(_0x2a5e8b<0x64)_0x2a5e8b=_0x2a5e8b[_0x57e2ba(0x20c)](0x2);else{if(_0x2a5e8b<0x3e8)_0x2a5e8b=_0x2a5e8b[_0x57e2ba(0x20c)](0x1);else _0x2a5e8b=_0x2a5e8b['toFixed'](0x0);}}else _0x2a5e8b=Number('0')['toFixed'](0x2);if(_0xcd625b){if(Math[_0x57e2ba(0x19f)](_0xcd625b)<0.000001)_0xcd625b=_0xcd625b[_0x57e2ba(0x20c)](0x2);else{if(Math[_0x57e2ba(0x19f)](_0xcd625b)<0.1)_0xcd625b=_0xcd625b[_0x57e2ba(0x20c)](0x6);else{if(Math['abs'](_0xcd625b)<0x1)_0xcd625b=_0xcd625b['toFixed'](0x5);else{if(Math[_0x57e2ba(0x19f)](_0xcd625b)<0xa)_0xcd625b=_0xcd625b[_0x57e2ba(0x20c)](0x4);else{if(Math[_0x57e2ba(0x19f)](_0xcd625b)<0x64)_0xcd625b=_0xcd625b[_0x57e2ba(0x20c)](0x3);else{if(Math[_0x57e2ba(0x19f)](_0xcd625b)<0x3e8)_0xcd625b=_0xcd625b[_0x57e2ba(0x20c)](0x2);else _0xcd625b=_0xcd625b['toFixed'](0x2);}}}}}}else _0xcd625b=Number('0')[_0x57e2ba(0x20c)](0x2);}else _0x2a5e8b=Number('0')[_0x57e2ba(0x20c)](0x2);return{'value':_0xcd625b,'change':_0x2a5e8b,'leftTxt':_0x19c0de,'rightTxt':_0x43b176};}async function getStartingBalances(_0x313021,_0x4d6c75=!![]){const _0x33ebde=_0x1f1fc5;if(_0x313021[_0x33ebde(0x26b)]!==0x0){const [_0x254080,_0x443929,_0x236b7d]=getPerf(_0x313021[0x0],!![]);let _0x319d50=[];config[_0x33ebde(0x27b)]['forEach'](_0x4079e7=>{const _0x2ae28e=_0x33ebde;let _0x56d467=0x0,_0x53e930;config[_0x2ae28e(0x213)]['forEach'](_0x3bed61=>{const _0x47aaf2=_0x2ae28e;let _0x2c8116=_0x3bed61['changes'][_0x47aaf2(0x254)](_0x34ef98=>_0x34ef98['coin']==_0x4079e7[_0x47aaf2(0x138)]);if(_0x2c8116){_0x56d467+=_0x2c8116[_0x47aaf2(0x190)];if(!_0x53e930)_0x53e930=_0x2c8116[_0x47aaf2(0x1d7)];}}),_0x319d50['push']({'coin':_0x4079e7[_0x2ae28e(0x138)],'number':_0x56d467,'initialprice':_0x53e930});});const _0x1956dc={'basecoin':_0x254080,'eur':_0x443929,'usd':_0x236b7d,'coins':_0x319d50};if(_0x4d6c75)proxyEmit(_0x33ebde(0x11f),_0x1956dc);startingBalances=_0x1956dc;}}function headlessMode(_0x1d3405){const _0x193b87=_0x1f1fc5;let _0x217dd7=_0x1d3405['portfolio'],_0x4496bf=_0x1d3405[_0x193b87(0x1b9)],_0x42ca0a=[];for(let _0x514819 of _0x217dd7){if(_0x514819['coin']!=config[_0x193b87(0x19a)]){if(_0x514819[_0x193b87(0x1e5)]>=_0x4496bf/0x64){if(_0x514819[_0x193b87(0x274)])_0x42ca0a[_0x193b87(0x1d1)](_0x514819);}else{if(_0x514819[_0x193b87(0x1e5)]<=-_0x4496bf/0x64){if(_0x514819[_0x193b87(0x274)])_0x42ca0a[_0x193b87(0x1d1)](_0x514819);}}}}_0x42ca0a['length']>0x0&&placeOrder(_0x42ca0a);}function notifyBalance(_0x7be8c2){const _0x30b197=_0x1f1fc5;let _0x38b7f3=_0x7be8c2['portfolio'],_0x37b00f=_0x7be8c2[_0x30b197(0x1b9)],_0x276cc4=[];for(let _0x3c0763 of _0x38b7f3){if(_0x3c0763[_0x30b197(0x138)]!=config[_0x30b197(0x19a)]){if(_0x3c0763[_0x30b197(0x1e5)]>=_0x37b00f/0x64){if(_0x3c0763[_0x30b197(0x274)])_0x276cc4[_0x30b197(0x1d1)](_0x3c0763);}else{if(_0x3c0763[_0x30b197(0x1e5)]<=-_0x37b00f/0x64){if(_0x3c0763[_0x30b197(0x274)])_0x276cc4[_0x30b197(0x1d1)](_0x3c0763);}}}}if(_0x276cc4[_0x30b197(0x26b)]>0x0){let _0x4f7180=_0x276cc4['map'](_0x24c111=>_0x24c111[_0x30b197(0x138)]);_0x4f7180[_0x30b197(0x201)]();let _0x163ba7=_0x4f7180[_0x30b197(0x232)](',\x20');if(!lastCoinsToBalance)logHistory(_0x30b197(0x142),_0x30b197(0x197));lastCoinsToBalance=_0x163ba7;}}function symbolToCoin(_0x47af0e){const _0x3b4fc4=_0x1f1fc5;let _0x38b094;if(_0x47af0e['includes']('/'+config['basecoin']))_0x38b094=_0x47af0e[_0x3b4fc4(0x276)]('/'+config[_0x3b4fc4(0x19a)],'');if(_0x47af0e[_0x3b4fc4(0x183)](config[_0x3b4fc4(0x19a)]+'/'))_0x38b094=_0x47af0e[_0x3b4fc4(0x276)](config['basecoin']+'/','');return _0x38b094;}async function unlockOrders(){const _0x326f74=_0x1f1fc5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x326f74(0x1b4)]){logger[_0x326f74(0x1fc)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x31d4d9=await getCoins();[currentCoins,currentCoinsAll]=_0x31d4d9,validateOrdersState=_0x326f74(0x25d),persistOpenOrders([]),lockOrders=ORDERS[_0x326f74(0x26e)],logger[_0x326f74(0x1fc)](_0x326f74(0x150));}}async function validateOrders(_0x3361dc){const _0x467c4e=_0x1f1fc5;if(_0x3361dc)validateOrdersState=_0x3361dc;logger[_0x467c4e(0x1fc)](_0x467c4e(0x21a)+validateOrdersState+_0x467c4e(0x283)+(lockOrders==0x1?_0x467c4e(0x1a2):lockOrders==0x2?'ORDERS.UNLOCKING':_0x467c4e(0x1be)));let _0x512023=[],_0x220d40=config['ordertype']==_0x467c4e(0x1f6)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x467c4e(0x26c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x467c4e(0x1b4)])return;logger[_0x467c4e(0x1fc)](_0x467c4e(0x1b5)+validateOrdersState),lastOrders[_0x467c4e(0x231)](_0x1a8365=>{const _0x1f6a9e=_0x467c4e;let _0x3aca30=![];_0x1a8365[_0x1f6a9e(0x122)]>0x0&&(_0x3aca30=!![]),_0x512023[_0x1f6a9e(0x1d1)](_0x3aca30),_0x3aca30&&config[_0x1f6a9e(0x170)]!='market'&&logHistory(_0x1f6a9e(0x151),'Order\x20filled:\x20'+_0x1a8365[_0x1f6a9e(0x229)]+'\x20'+_0x1a8365[_0x1f6a9e(0x126)]+'\x20#'+formatResult(_0x1a8365['filled'],0x8)+'\x20@'+formatResult(_0x1a8365[_0x1f6a9e(0x1d7)],0x8));}),_0x512023[_0x467c4e(0x231)]((_0x4318a9,_0x15a111)=>{const _0x23f847=_0x467c4e;if(_0x4318a9)lastOrders[_0x23f847(0x139)](_0x15a111,0x1);}),persistOpenOrders(lastOrders);const _0x1bf6da=coolingDown?_0x467c4e(0x16b):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x512023['includes'](![])){if(config[_0x467c4e(0x170)]==_0x467c4e(0x1f6)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x467c4e(0x11c)){if(_0x512023[_0x467c4e(0x183)](![])){}else{if(allOrdersPlaced){if(config[_0x467c4e(0x170)]==_0x467c4e(0x1f6)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x467c4e(0x21d))_0x512023[_0x467c4e(0x183)](![])&&(config[_0x467c4e(0x170)]==_0x467c4e(0x1f6)?logHistory(_0x467c4e(0x23a),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x467c4e(0x1f8)](_0x220d40*validateOrderInterval/0xea60)+_0x467c4e(0x1af)+_0x1bf6da):(await cancelOrders(),logHistory(_0x467c4e(0x23a),_0x467c4e(0x1b0)+Math[_0x467c4e(0x1f8)](_0x220d40*validateOrderInterval/0xea60)+_0x467c4e(0x1af)+_0x1bf6da))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x467c4e(0x170)]!=_0x467c4e(0x1f6))logHistory(_0x467c4e(0x23a),_0x467c4e(0x135)+_0x1bf6da);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x4cb08c=>{const _0xbb0fa3=_0x3189;try{const _0x3a6e99=await exchange[_0xbb0fa3(0x1f0)](_0x4cb08c['orderId'],_0x4cb08c[_0xbb0fa3(0x229)]);}catch(_0x1eb755){if(_0x1eb755[_0xbb0fa3(0x26d)]()[_0xbb0fa3(0x183)]('OrderNotFound')){}else await handleError(_0x1eb755,_0xbb0fa3(0x255));}});}async function initCoinResults(_0x82ce5f){const _0xc3786d=_0x1f1fc5;_0x82ce5f?logger[_0xc3786d(0x1fc)]('Resetting\x20coin\x20results:\x20'+_0x82ce5f):logger[_0xc3786d(0x1fc)](_0xc3786d(0x1ec)),config[_0xc3786d(0x27b)]['forEach'](_0x46670d=>{const _0xfb5c84=_0xc3786d;if(!_0x46670d[_0xfb5c84(0x121)]&&_0x46670d[_0xfb5c84(0x138)]!=config[_0xfb5c84(0x19a)]){const _0x57a2d7=currentCoins[_0xfb5c84(0x254)](_0x253048=>_0x253048[_0xfb5c84(0x138)]==_0x46670d[_0xfb5c84(0x138)]),_0x43e5ff=global[_0xfb5c84(0x25a)][noslash(_0x46670d['symbol'])];let _0x331e3b=_0x57a2d7?_0x57a2d7['number']:null,_0x4ffe9f=_0x46670d[_0xfb5c84(0x1ff)]?0x1/_0x43e5ff:_0x43e5ff,_0x4d0bdc;config[_0xfb5c84(0x213)][_0xfb5c84(0x231)](_0x2c3468=>{const _0x4581ba=_0xfb5c84;!_0x4d0bdc&&(_0x4d0bdc=_0x2c3468[_0x4581ba(0x147)][_0x4581ba(0x254)](_0x37c045=>_0x37c045['coin']==_0x46670d[_0x4581ba(0x138)]),_0x4d0bdc&&(_0x331e3b=_0x4d0bdc[_0x4581ba(0x190)],_0x4ffe9f=_0x4d0bdc['price']));});let _0x3c7f87=dbCoinResults[_0xfb5c84(0x162)](_0xfb5c84(0x149))[_0xfb5c84(0x254)]({'coin':_0x46670d[_0xfb5c84(0x138)]})['value']();if(!_0x3c7f87){const _0x92e603={'coin':_0x46670d[_0xfb5c84(0x138)],'number':_0x331e3b,'breakeven':_0x4ffe9f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0xfb5c84(0x149))[_0xfb5c84(0x1d1)](_0x92e603)[_0xfb5c84(0x20e)]();}else{if(_0x82ce5f&&_0x46670d['coin']==_0x82ce5f){const _0x4df90a={'coin':_0x46670d[_0xfb5c84(0x138)],'number':_0x331e3b,'breakeven':_0x4ffe9f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['find']({'coin':_0x46670d[_0xfb5c84(0x138)]})['assign'](_0x4df90a)[_0xfb5c84(0x20e)]();}}}});}async function updateCoinResults(_0x165c52,_0x2465cc=![]){const _0x2fa027=_0x1f1fc5;let _0x2132e9,_0x330bf0,_0x4057c9,_0xf50cac,_0x41a0fb,_0x5839a4,_0x4e07a2=dbCoinResults['get']('coins')[_0x2fa027(0x254)]({'coin':_0x165c52[_0x2fa027(0x138)]})[_0x2fa027(0x127)](),_0x162ffc=![];Object[_0x2fa027(0x16f)](_0x4e07a2)['forEach'](([_0x4338ba,_0xb4a919])=>{if(_0xb4a919==null)_0x162ffc=!![];});(!_0x4e07a2||_0x162ffc)&&(await initCoinResults(_0x165c52[_0x2fa027(0x138)]),_0x4e07a2=dbCoinResults[_0x2fa027(0x162)](_0x2fa027(0x149))[_0x2fa027(0x254)]({'coin':_0x165c52[_0x2fa027(0x138)]})[_0x2fa027(0x127)]());_0x165c52[_0x2fa027(0x1ff)]&&(_0x5839a4={'filled':_0x165c52[_0x2fa027(0x122)]*_0x165c52['price'],'amount':_0x165c52['filled']*_0x165c52[_0x2fa027(0x1d7)],'side':_0x165c52[_0x2fa027(0x126)]==_0x2fa027(0x208)?_0x2fa027(0x12e):'sell','price':0x1/_0x165c52['price']},_0x165c52={..._0x165c52,..._0x5839a4});_0x2465cc?_0x330bf0=_0x165c52['side']==_0x2fa027(0x12e)?_0x4e07a2[_0x2fa027(0x190)]+_0x165c52[_0x2fa027(0x122)]:_0x4e07a2[_0x2fa027(0x190)]-_0x165c52['filled']:_0x330bf0=await getCoinNumber(_0x165c52[_0x2fa027(0x138)]);if(_0x165c52[_0x2fa027(0x123)]&&_0x165c52[_0x2fa027(0x123)]['currency']==config['basecoin'])_0x2132e9=_0x165c52[_0x2fa027(0x123)][_0x2fa027(0x28a)];else{if(_0x165c52[_0x2fa027(0x123)]&&_0x165c52[_0x2fa027(0x123)]['currency']==_0x2fa027(0x288)&&!_0x2465cc)_0x2132e9=_0x165c52[_0x2fa027(0x123)]['cost']*global[_0x2fa027(0x25a)][_0x2fa027(0x288)+config[_0x2fa027(0x19a)]];else _0x2132e9=defaultFee*_0x165c52['filled']*_0x165c52[_0x2fa027(0x1d7)];}_0x165c52[_0x2fa027(0x126)]==_0x2fa027(0x12e)?(_0x4057c9=_0x330bf0!=0x0?(_0x4e07a2['breakeven']*_0x4e07a2['number']+_0x165c52[_0x2fa027(0x1d7)]*(_0x330bf0-_0x4e07a2[_0x2fa027(0x190)])+_0x2132e9)/_0x330bf0:0x0,_0xf50cac=_0x4e07a2[_0x2fa027(0x1bb)]):(_0x4057c9=_0x330bf0!=0x0?(_0x4e07a2[_0x2fa027(0x265)]*_0x4e07a2['number']-_0x165c52[_0x2fa027(0x1d7)]*(_0x4e07a2['number']-_0x330bf0)+_0x2132e9)/_0x330bf0:0x0,_0xf50cac=_0x4e07a2['realized']+(_0x165c52[_0x2fa027(0x1d7)]-_0x4e07a2[_0x2fa027(0x265)])*_0x165c52[_0x2fa027(0x122)]);_0x41a0fb=(_0x165c52['price']-_0x4057c9-_0x2132e9/_0x165c52[_0x2fa027(0x122)])*_0x330bf0;let _0x6bd529={'coin':_0x165c52[_0x2fa027(0x138)],'number':_0x330bf0,'breakeven':formatResult(_0x4057c9,0x8),'realized':formatResult(_0xf50cac,0x8),'unrealized':formatResult(_0x41a0fb,0x8),'fees':formatResult(_0x4e07a2[_0x2fa027(0x1df)]+_0x2132e9,0x8),'sells':_0x165c52[_0x2fa027(0x126)]==_0x2fa027(0x208)?_0x4e07a2['sells']+0x1:_0x4e07a2['sells'],'buys':_0x165c52[_0x2fa027(0x126)]=='buy'?_0x4e07a2[_0x2fa027(0x17b)]+0x1:_0x4e07a2[_0x2fa027(0x17b)]};dbCoinResults['get'](_0x2fa027(0x149))['find']({'coin':_0x165c52[_0x2fa027(0x138)]})[_0x2fa027(0x1a1)](_0x6bd529)[_0x2fa027(0x20e)]();if(!_0x2465cc){if(_0x165c52[_0x2fa027(0x123)]&&_0x165c52[_0x2fa027(0x123)]['currency']==_0x2fa027(0x288)){const _0xea3e58=currentCoins[_0x2fa027(0x254)](_0x276184=>_0x276184[_0x2fa027(0x138)]==_0x2fa027(0x288));if(_0xea3e58){let _0x4ef414=dbCoinResults[_0x2fa027(0x162)](_0x2fa027(0x149))[_0x2fa027(0x254)]({'coin':_0x2fa027(0x288)})[_0x2fa027(0x127)]();_0x6bd529={..._0x4ef414,'number':_0xea3e58[_0x2fa027(0x190)]},dbCoinResults['get'](_0x2fa027(0x149))[_0x2fa027(0x254)]({'coin':'BNB'})[_0x2fa027(0x1a1)](_0x6bd529)['write']();}}}}async function placeOrder(_0x27131e){const _0x385a69=_0x1f1fc5,_0x28986b=config[_0x385a69(0x170)]==_0x385a69(0x1f6)?_0x385a69(0x1f6):'limit';if(lockOrders==ORDERS[_0x385a69(0x26e)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x385a69(0x1b4)],allOrdersPlaced=![],validateOrdersState='initial';let _0x449b2e=![];lastOrders=[];for(const _0x1a0ccf of _0x27131e){let _0x5374a0,_0x22cc65,_0x451b5d,_0x45a0e2,_0x86d5e3,_0x1b17b1=_0x1a0ccf[_0x385a69(0x229)];try{const _0x100596=await exchange[_0x385a69(0x1b3)](_0x1b17b1);_0x5374a0=_0x1a0ccf[_0x385a69(0x1ff)]?0x1/_0x1a0ccf[_0x385a69(0x154)]:_0x1a0ccf[_0x385a69(0x154)],_0x22cc65=_0x100596[_0x385a69(0x1ba)],_0x451b5d=_0x100596[_0x385a69(0x270)];_0x1a0ccf['reverse']?(_0x45a0e2=_0x1a0ccf['side']==_0x385a69(0x12e)?'sell':_0x385a69(0x12e),_0x86d5e3=Math['abs'](_0x1a0ccf[_0x385a69(0x17f)])/_0x5374a0):(_0x45a0e2=_0x1a0ccf[_0x385a69(0x126)],_0x86d5e3=Math[_0x385a69(0x19f)](_0x1a0ccf[_0x385a69(0x17f)]));_0x28986b==_0x385a69(0x156)&&(config[_0x385a69(0x170)]==_0x385a69(0x211)&&(_0x5374a0=_0x45a0e2==_0x385a69(0x12e)?_0x22cc65:_0x451b5d),config[_0x385a69(0x170)]==_0x385a69(0x22b)&&(_0x5374a0=_0x45a0e2==_0x385a69(0x12e)?_0x451b5d:_0x22cc65));_0x86d5e3=formatResult(_0x86d5e3,0x8),_0x5374a0=formatResult(_0x5374a0,0x8);const _0x43c549=_0x45a0e2==_0x385a69(0x208)?config[_0x385a69(0x25b)]?String['fromCodePoint']('0x'+config[_0x385a69(0x25b)])+'\x20':'':config[_0x385a69(0x224)]?String['fromCodePoint']('0x'+config[_0x385a69(0x224)])+'\x20':'',_0x99ef60=_0x28986b=='market'?_0x385a69(0x1aa):config[_0x385a69(0x170)]==_0x385a69(0x211)?_0x385a69(0x1e0):_0x385a69(0x223),_0x57d023=(Math[_0x385a69(0x209)](Math[_0x385a69(0x248)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x385a69(0x1d1)]({'customId':_0x57d023,'symbol':_0x1b17b1,'coin':_0x1a0ccf[_0x385a69(0x138)],'amount':_0x86d5e3,'price':_0x5374a0,'side':_0x45a0e2,'reverse':_0x1a0ccf[_0x385a69(0x1ff)],'filled':0x0});if(_0x28986b==_0x385a69(0x1f6))logHistory(_0x385a69(0x151),''+_0x43c549+_0x99ef60+_0x385a69(0x227)+_0x1b17b1+'\x20'+_0x45a0e2+'\x20#'+formatResult(_0x86d5e3,0x8)+'\x20@'+formatResult(_0x5374a0,0x8));else logHistory(_0x385a69(0x151),''+_0x43c549+_0x99ef60+_0x385a69(0x227)+_0x1b17b1+'\x20'+_0x45a0e2+'\x20#'+formatResult(_0x86d5e3,0x8)+'\x20@'+formatResult(_0x5374a0,0x8));const _0x14b8be=await exchange[_0x385a69(0x18a)](_0x1b17b1,_0x28986b,_0x45a0e2,_0x86d5e3,_0x5374a0);logger[_0x385a69(0x1fc)](_0x385a69(0x164)+_0x14b8be['id']+_0x385a69(0x1e1)+_0x57d023);const _0x970004=lastOrders['length']-0x1;if(_0x970004>=0x0&&lastOrders[_0x970004][_0x385a69(0x1ea)]==_0x57d023){lastOrders[_0x970004][_0x385a69(0x22a)]=_0x14b8be['id'];if(_0x14b8be[_0x385a69(0x20f)])lastOrders[_0x970004][_0x385a69(0x20f)]=_0x14b8be[_0x385a69(0x20f)];if(_0x14b8be[_0x385a69(0x1d7)])lastOrders[_0x970004]['price']=_0x14b8be[_0x385a69(0x1d7)];lastOrders[_0x970004][_0x385a69(0x123)]=_0x14b8be[_0x385a69(0x123)];}if(config[_0x385a69(0x22d)]!=0x0){let _0x37ee7c=null;if(cooldownTracker['length']==config[_0x385a69(0x22d)]-0x1)_0x37ee7c=cooldownTracker[_0x385a69(0x176)]();const _0x51c874=getTimeStamp();cooldownTracker[_0x385a69(0x1d1)](_0x51c874);if(_0x37ee7c){const _0x54c01b=fns[_0x385a69(0x15a)](new Date(_0x51c874),new Date(_0x37ee7c));if(_0x54c01b<cooldownInterval){logHistory('error',_0x385a69(0x119)+config[_0x385a69(0x22d)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x385a69(0x285)+cooldownPeriod/(0xe10*0x3e8)+_0x385a69(0x1e2)),coolingDown=!![];break;}}}}catch(_0x16b3ff){if(_0x16b3ff[_0x385a69(0x26d)]()[_0x385a69(0x183)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x385a69(0x1c8)](_0xf94bc0=>_0xf94bc0[_0x385a69(0x229)]!=_0x1b17b1),logHistory(_0x385a69(0x207),_0x385a69(0x222)+_0x1b17b1),_0x449b2e=!![];else{if(_0x16b3ff['toString']()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x385a69(0x1c8)](_0x4f69cf=>_0x4f69cf[_0x385a69(0x229)]!=_0x1b17b1),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1b17b1),_0x449b2e=!![];else{if(_0x16b3ff[_0x385a69(0x26d)]()[_0x385a69(0x183)](_0x385a69(0x12c)))lastOrders=lastOrders[_0x385a69(0x1c8)](_0x5b9ccd=>_0x5b9ccd[_0x385a69(0x229)]!=_0x1b17b1),logHistory(_0x385a69(0x207),'Order\x20is\x20invalid:\x20'+_0x1b17b1),_0x449b2e=!![];else _0x16b3ff['toString']()[_0x385a69(0x183)](_0x385a69(0x267))?(lastOrders=lastOrders[_0x385a69(0x1c8)](_0x491a50=>_0x491a50['symbol']!=_0x1b17b1),logHistory(_0x385a69(0x207),_0x385a69(0x222)+_0x1b17b1),_0x449b2e=!![]):(lastOrders=lastOrders[_0x385a69(0x1c8)](_0x5856cc=>_0x5856cc[_0x385a69(0x229)]!=_0x1b17b1),await handleError(_0x16b3ff,_0x385a69(0x1c5),_0x1b17b1));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x385a69(0x26b)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5f5771=config[_0x385a69(0x170)]==_0x385a69(0x1f6)?validateOrderTimeout*0x3c*0x3e8:config[_0x385a69(0x26c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5f5771);}else unlockOrders();_0x449b2e&&config[_0x385a69(0x134)]&&await pauseBot(_0x385a69(0x1ae)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x385a69(0x23a),_0x385a69(0x27a)));}else{if(coolingDown)!config[_0x385a69(0x134)]&&logHistory(_0x385a69(0x207),_0x385a69(0x1e9));else lockOrders!=ORDERS[_0x385a69(0x26e)]&&(!config[_0x385a69(0x134)]&&(config[_0x385a69(0x170)]==_0x385a69(0x1f6)?logHistory(_0x385a69(0x207),_0x385a69(0x1a6)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1e4ae6){const _0x284a66=_0x1f1fc5,_0x51c17e={...config,'openOrders':_0x1e4ae6};let _0x4cf685=dbConfig[_0x284a66(0x162)](_0x284a66(0x273))[_0x284a66(0x254)]({'botID':botID})['value']();_0x4cf685&&dbConfig[_0x284a66(0x162)]('bot')['find']({'botID':botID})[_0x284a66(0x1a1)](_0x51c17e)['write']();}function restoreOrders(){const _0x8455cd=_0x1f1fc5;let _0x2b53d7;config[_0x8455cd(0x1a0)]&&allOpenOrders['forEach'](_0x11a15d=>{const _0x20ff20=_0x8455cd,_0x412044=config[_0x20ff20(0x1a0)]['find'](_0x7419a6=>_0x7419a6[_0x20ff20(0x22a)]==_0x11a15d['id']);_0x412044&&(lastOrders[_0x20ff20(0x1d1)](_0x412044),_0x2b53d7=_0x11a15d[_0x20ff20(0x180)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x8455cd(0x11c),allOrdersPlaced=!![];const _0x35e472=new Date()['getTime'](),_0x4a379f=config[_0x8455cd(0x170)]==_0x8455cd(0x1f6)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x2b53d7+_0x4a379f>_0x35e472){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x405115=_0x8455cd;validateOrders(_0x405115(0x21d));},_0x2b53d7+_0x4a379f-_0x35e472);}else validateOrders(_0x8455cd(0x21d));}}async function sendMetricsTelegram(){const _0xcf4da6=_0x1f1fc5;if(!coinsLoaded){process['send']({'telegrammsg':_0xcf4da6(0x247)},_0x313d25=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x20f6b9='';if(config[_0xcf4da6(0x1db)])_0x20f6b9=_0xcf4da6(0x251)+config[_0xcf4da6(0x1b2)]+_0xcf4da6(0x19b);else _0x20f6b9=_0xcf4da6(0x1f4)+botID+_0xcf4da6(0x19b);const _0x26715a=getKPIs(_0xcf4da6(0x19a)),_0x46a4ae=getKPIs(_0xcf4da6(0x225),config[_0xcf4da6(0x225)]),_0x1e2595=getKPIs(_0xcf4da6(0x141)),_0x22e17e=getKPIs(_0xcf4da6(0x188),config[_0xcf4da6(0x225)]);_0x20f6b9+='<pre>',_0x20f6b9+=_0x26715a[_0xcf4da6(0x23b)]+_0xcf4da6(0x159)+_0x26715a['value']+'\x0a',_0x20f6b9+=_0x26715a['rightTxt']+':\x20'+_0x26715a[_0xcf4da6(0x145)]+'%\x0a',_0x20f6b9+=_0x46a4ae[_0xcf4da6(0x23b)]+_0xcf4da6(0x159)+_0x46a4ae['value']+'\x0a',_0x20f6b9+=_0x46a4ae[_0xcf4da6(0x1e4)]+':\x20'+_0x46a4ae['change']+'%\x0a',_0x20f6b9+=_0x1e2595['leftTxt']+':\x20'+_0x1e2595[_0xcf4da6(0x127)]+'\x20('+config[_0xcf4da6(0x19a)]+')\x0a',_0x20f6b9+=_0x1e2595[_0xcf4da6(0x1e4)]+':\x20'+_0x1e2595['change']+_0xcf4da6(0x24d)+config[_0xcf4da6(0x19a)]+')\x0a',_0x20f6b9+=_0x22e17e[_0xcf4da6(0x23b)]+':\x20'+_0x22e17e[_0xcf4da6(0x127)]+'\x20('+config[_0xcf4da6(0x225)]+')\x0a',_0x20f6b9+=_0x22e17e[_0xcf4da6(0x1e4)]+':\x20'+_0x22e17e['change']+'%\x20('+config[_0xcf4da6(0x225)]+')\x0a',_0x20f6b9+='</pre>',process[_0xcf4da6(0x192)]({'telegrammsg':_0x20f6b9},_0x155544=>{});}async function sendPortfolioTelegram(){const _0xdc1472=_0x1f1fc5;if(!coinsLoaded){process['send']({'telegrammsg':_0xdc1472(0x247)},_0x16146a=>{});return;}let _0x562ce7='';if(config[_0xdc1472(0x1db)])_0x562ce7=_0xdc1472(0x251)+config[_0xdc1472(0x1b2)]+_0xdc1472(0x19e);else _0x562ce7=_0xdc1472(0x1f4)+botID+_0xdc1472(0x19e);_0x562ce7+=_0xdc1472(0x161),_0x562ce7+=_0xdc1472(0x15d),_0x562ce7+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x562ce7+=_0xdc1472(0x15d),currentCoins[_0xdc1472(0x231)](_0x1845ca=>{const _0x106b24=_0xdc1472;_0x562ce7+=_0x1845ca[_0x106b24(0x138)][_0x106b24(0x25c)](0x7)+'|\x20'+formatPad(_0x1845ca['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x1845ca[_0x106b24(0x120)],0x2,0x6)+'|\x20'+formatPad(_0x1845ca[_0x106b24(0x1e5)]*0x64,0x2,0x6)+'\x0a';}),_0x562ce7+=_0xdc1472(0x1e7),process['send']({'telegrammsg':_0x562ce7},_0x2cf3eb=>{});}function formatPad(_0x4b1d4d,_0x39afba,_0x55e33e){const _0x2742e2=_0x1f1fc5,_0x2477b3=formatResultString(_0x4b1d4d,_0x39afba);return _0x2477b3?_0x2477b3[_0x2742e2(0x256)](_0x55e33e):''['padStart'](_0x55e33e);}function logHistory(_0x41e69a,_0xc4036b,_0x3695a7=''){const _0x2d1faf=_0x1f1fc5;let _0x493a7e={'time':getTimeStamp(),'type':_0x41e69a,'event':_0xc4036b};dbLogs[_0x2d1faf(0x162)]('logs')['push'](_0x493a7e)['write']();if(_0x3695a7=='')_0x3695a7=_0xc4036b;proxyEmit(_0x2d1faf(0x187),{'log':_0x493a7e,'summary':_0x3695a7}),process['send']({'telegram':{..._0x493a7e,'botname':config[_0x2d1faf(0x1b2)],'showname':config[_0x2d1faf(0x1db)]}},_0x3e8bba=>{}),logger[_0x2d1faf(0x264)](''+_0x493a7e[_0x2d1faf(0x187)]);}function emitHistory(_0x451a68={}){const _0x2c7acc=_0x1f1fc5;Object['keys'](_0x451a68)[_0x2c7acc(0x26b)]==0x0&&(_0x451a68={'type':[_0x2c7acc(0x151),_0x2c7acc(0x187)],'event':'','page':0x1});if(_0x451a68[_0x2c7acc(0x157)][_0x2c7acc(0x183)](_0x2c7acc(0x187)))_0x451a68[_0x2c7acc(0x157)][_0x2c7acc(0x139)](_0x451a68[_0x2c7acc(0x157)][_0x2c7acc(0x281)](_0x2c7acc(0x187)),0x1,_0x2c7acc(0x207),'warning',_0x2c7acc(0x23a));if(dbLogs[_0x2c7acc(0x216)]('logs')[_0x2c7acc(0x127)]()){let _0x4b453c=dbLogs[_0x2c7acc(0x162)]('logs')[_0x2c7acc(0x1c8)](_0x5b725b=>{const _0x8526a6=_0x2c7acc;if(_0x451a68[_0x8526a6(0x157)][_0x8526a6(0x26b)]==0x0)return![];else return _0x451a68[_0x8526a6(0x157)]['includes'](_0x5b725b[_0x8526a6(0x157)]);})['filter'](_0x18a170=>{const _0x2c8ade=_0x2c7acc;if(_0x451a68[_0x2c8ade(0x187)]=='')return!![];else return _0x18a170[_0x2c8ade(0x187)][_0x2c8ade(0x1d2)]()[_0x2c8ade(0x183)](_0x451a68[_0x2c8ade(0x187)][_0x2c8ade(0x1d2)]());})[_0x2c7acc(0x18b)](_0x2c7acc(0x148)),_0x237b5b=_0x4b453c['value']()['length'];_0x4b453c=_0x4b453c['reverse']()['slice']((_0x451a68[_0x2c7acc(0x12d)]-0x1)*logPageSize,_0x451a68[_0x2c7acc(0x12d)]*logPageSize-0x1)[_0x2c7acc(0x1ff)]()[_0x2c7acc(0x127)](),proxyEmit(_0x2c7acc(0x1b7),{'logs':_0x4b453c,'total':_0x237b5b});}else proxyEmit(_0x2c7acc(0x1b7),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x35433f){const _0x1f941d=_0x1f1fc5;if(dbLogs['has']('logs')['value']()){const _0x5cded1=dbLogs[_0x1f941d(0x162)](_0x1f941d(0x24e))['sortBy']('time')[_0x1f941d(0x1c8)](_0x170e29=>{const _0xb0cb82=_0x1f941d;return _0x170e29[_0xb0cb82(0x157)]==_0xb0cb82(0x151);})['value']();dbLogs[_0x1f941d(0x162)](_0x1f941d(0x24e))[_0x1f941d(0x27e)]()[_0x1f941d(0x20e)](),dbLogs['get'](_0x1f941d(0x24e))[_0x1f941d(0x1a1)](_0x5cded1)['write'](),emitHistory(_0x35433f);}}async function pauseBot(_0xad9f61=''){const _0x51ea91=_0x1f1fc5,_0x394eb0=new Date()[_0x51ea91(0x22f)]();if(!lastErrorShown||_0x394eb0-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x394eb0;!lastBotPause?(lastBotPause=_0x394eb0,consecutivePauses=0x1):(_0x394eb0-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x51ea91(0x1c2)},_0x2784e3=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x51ea91(0x22f)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xad9f61)_0xad9f61+=_0x51ea91(0x236);logHistory(_0x51ea91(0x207),_0xad9f61+_0x51ea91(0x206)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5cd71d=_0x1f1fc5;process[_0x5cd71d(0x192)]({'stop':_0x5cd71d(0x1c1)},_0xcdb615=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x8b21ef,_0x126c56){const _0x46c3df=_0x1f1fc5;if(_0x8b21ef['toString']()['includes'](_0x46c3df(0x140)))return logHistory('error',config['exchange']+_0x46c3df(0x21c)),![];else{if(_0x8b21ef[_0x46c3df(0x26d)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x46c3df(0x207),config[_0x46c3df(0x20b)]+_0x46c3df(0x15b)),![];else{if(_0x8b21ef[_0x46c3df(0x26d)]()['includes'](_0x46c3df(0x257)))return logHistory('error',config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x46c3df(0x207),_0x46c3df(0x1fd)),![];else await handleError(_0x8b21ef,_0x126c56);}}}async function handleError(_0x56eec0,_0x93127e,_0x19d3cb=''){const _0x860480=_0x1f1fc5,_0x3482fa=config['exchange']||'Exchange';if(_0x56eec0[_0x860480(0x26d)]()[_0x860480(0x183)](_0x860480(0x24f))||_0x56eec0[_0x860480(0x26d)]()['includes'](_0x860480(0x16e)))await pauseBot(config[_0x860480(0x20b)]+_0x860480(0x136));else{if(_0x56eec0[_0x860480(0x26d)]()[_0x860480(0x183)](_0x860480(0x249))||_0x56eec0[_0x860480(0x26d)]()['includes'](_0x860480(0x27f)))await pauseBot(config[_0x860480(0x20b)]+_0x860480(0x14d));else{if(_0x56eec0[_0x860480(0x26d)]()['includes'](_0x860480(0x253)))await pauseBot(config[_0x860480(0x20b)]+_0x860480(0x1ce));else{if(_0x56eec0[_0x860480(0x26d)]()[_0x860480(0x183)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x860480(0x20b)]+_0x860480(0x179));else{if(_0x56eec0[_0x860480(0x26d)]()[_0x860480(0x183)](_0x860480(0x28f)))logHistory(_0x860480(0x207),_0x93127e+_0x860480(0x17a)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x56eec0['toString']()[_0x860480(0x183)]('InvalidNonce'))logHistory(_0x860480(0x207),_0x93127e+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x860480(0x207),_0x860480(0x18e)),await killBot();else{if(_0x56eec0 instanceof ccxt[_0x860480(0x1c0)])logger[_0x860480(0x1fc)]('Uncaught\x20NetworkError:',_0x56eec0),await pauseBot(config[_0x860480(0x20b)]+_0x860480(0x1c4));else{if(_0x56eec0['toString']()[_0x860480(0x183)](_0x860480(0x140)))logHistory(_0x860480(0x207),_0x93127e+_0x860480(0x236)+config[_0x860480(0x20b)]+_0x860480(0x282)),logHistory(_0x860480(0x207),_0x860480(0x18e)),await killBot();else{if(_0x56eec0[_0x860480(0x26d)]()[_0x860480(0x183)](_0x860480(0x15c)))logHistory(_0x860480(0x207),_0x93127e+_0x860480(0x236)+config['exchange']+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x860480(0x207),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x56eec0[_0x860480(0x26d)]()['includes'](_0x860480(0x257)))logHistory(_0x860480(0x207),_0x93127e+_0x860480(0x236)+config[_0x860480(0x20b)]+_0x860480(0x1f5)),logHistory(_0x860480(0x207),_0x860480(0x18e)),await killBot();else{if(_0x56eec0['toString']()[_0x860480(0x183)](_0x860480(0x23f)))logHistory('error',_0x93127e+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x19d3cb);else _0x56eec0 instanceof ccxt['ExchangeError']?(logger['debug'](_0x860480(0x1d4),_0x56eec0),logHistory('error',_0x93127e+_0x860480(0x236)+config[_0x860480(0x20b)]+_0x860480(0x210))):(logger['full'](_0x93127e+_0x860480(0x116),_0x56eec0),await pauseBot(_0x860480(0x143)));}}}}}}}}}}}function formatResult(_0x305506,_0x3a9ffa){const _0x1de701=_0x1f1fc5;return parseFloat(_0x305506[_0x1de701(0x20c)](_0x3a9ffa));}function formatResultTruncate(_0xc5b5a8,_0x549eea){const _0x233475=_0x1f1fc5;let _0x42eb53=formatResultString(_0xc5b5a8,0xa),_0x3eb4bf=_0x42eb53[_0x233475(0x281)]('.');return _0x3eb4bf!=-0x1&&(_0x42eb53=_0x42eb53[_0x233475(0x13c)](0x0,_0x3eb4bf+_0x549eea+0x1)),Number(_0x42eb53);}function formatResultString(_0x36ed67,_0x40bd82){const _0x3ba95f=_0x1f1fc5;let _0xbf35ed;if(!(''+_0x36ed67)['includes']('e'))_0xbf35ed=+(Math['round'](_0x36ed67+'e+'+_0x40bd82)+'e-'+_0x40bd82);else{let _0x250eb9=(''+_0x36ed67)['split']('e'),_0x5153a2='';+_0x250eb9[0x1]+_0x40bd82>0x0&&(_0x5153a2='+'),_0xbf35ed=+(Math['round'](+_0x250eb9[0x0]+'e'+_0x5153a2+(+_0x250eb9[0x1]+_0x40bd82))+'e-'+_0x40bd82);}return Number(_0xbf35ed)[_0x3ba95f(0x20c)](_0x40bd82);}function getServerTime(){const _0x3d7e80=_0x1f1fc5,_0xf83a6=new Date();return _0xf83a6[_0x3d7e80(0x286)]()+'/'+(_0xf83a6[_0x3d7e80(0x22e)]()+0x1)[_0x3d7e80(0x26d)]()[_0x3d7e80(0x256)](0x2,'0')+'/'+_0xf83a6[_0x3d7e80(0x11d)]()[_0x3d7e80(0x26d)]()[_0x3d7e80(0x256)](0x2,'0')+'\x20'+_0xf83a6[_0x3d7e80(0x14e)]()[_0x3d7e80(0x26d)]()[_0x3d7e80(0x256)](0x2,'0')+':'+_0xf83a6[_0x3d7e80(0x15e)]()[_0x3d7e80(0x26d)]()[_0x3d7e80(0x256)](0x2,'0')+':'+_0xf83a6[_0x3d7e80(0x1d0)]()[_0x3d7e80(0x26d)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1f8adf=_0x1f1fc5,_0x80d54c=shiftedTime();return _0x80d54c[_0x1f8adf(0x286)]()+'/'+(_0x80d54c[_0x1f8adf(0x22e)]()+0x1)[_0x1f8adf(0x26d)]()[_0x1f8adf(0x256)](0x2,'0')+'/'+_0x80d54c[_0x1f8adf(0x11d)]()[_0x1f8adf(0x26d)]()[_0x1f8adf(0x256)](0x2,'0')+'\x20'+_0x80d54c[_0x1f8adf(0x14e)]()['toString']()[_0x1f8adf(0x256)](0x2,'0')+':'+_0x80d54c[_0x1f8adf(0x15e)]()[_0x1f8adf(0x26d)]()[_0x1f8adf(0x256)](0x2,'0')+':'+_0x80d54c['getSeconds']()[_0x1f8adf(0x26d)]()['padStart'](0x2,'0');}function getDate(){const _0x30f6f0=_0x1f1fc5,_0x44473f=shiftedTime();return _0x44473f[_0x30f6f0(0x286)]()+'/'+(_0x44473f[_0x30f6f0(0x22e)]()+0x1)[_0x30f6f0(0x26d)]()[_0x30f6f0(0x256)](0x2,'0')+'/'+_0x44473f[_0x30f6f0(0x11d)]()[_0x30f6f0(0x26d)]()[_0x30f6f0(0x256)](0x2,'0');}function getHour(){const _0x466f8f=_0x1f1fc5,_0x3dec53=shiftedTime();return _0x3dec53[_0x466f8f(0x14e)]()[_0x466f8f(0x26d)]()['padStart'](0x2,'0');}function sleep(_0x185fda){return new Promise(_0x5d3d01=>setTimeout(_0x5d3d01,_0x185fda));}function shiftedTime(){const _0xd6e0bb=_0x1f1fc5,_0x222b27=new Date();let _0x45c775=_0x222b27;if(config&&config[_0xd6e0bb(0x215)]!==0x0)_0x45c775=fns['add'](_0x222b27,{'hours':config['timeshift']});return _0x45c775;}function timer(_0x28c275){const _0x527e08=_0x1f1fc5,_0x14137a=new Date();!lasttime?console[_0x527e08(0x1b6)](getTimeStamp()+_0x527e08(0x1a3),_0x28c275,_0x14137a):console[_0x527e08(0x1b6)](getTimeStamp()+_0x527e08(0x1a3),_0x28c275,(_0x14137a-lasttime)/0x3e8),lasttime=_0x14137a;}