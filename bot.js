const _0x339bda=_0x1fe6;(function(_0x35b14f,_0x3e15b4){const _0x1192d6=_0x1fe6,_0x2223f5=_0x35b14f();while(!![]){try{const _0x14704f=-parseInt(_0x1192d6(0x234))/0x1+parseInt(_0x1192d6(0x29f))/0x2+parseInt(_0x1192d6(0x246))/0x3*(parseInt(_0x1192d6(0x20a))/0x4)+-parseInt(_0x1192d6(0x27c))/0x5*(-parseInt(_0x1192d6(0x2aa))/0x6)+-parseInt(_0x1192d6(0x25c))/0x7*(-parseInt(_0x1192d6(0x216))/0x8)+parseInt(_0x1192d6(0x211))/0x9+-parseInt(_0x1192d6(0x256))/0xa;if(_0x14704f===_0x3e15b4)break;else _0x2223f5['push'](_0x2223f5['shift']());}catch(_0x7b265c){_0x2223f5['push'](_0x2223f5['shift']());}}}(_0xc289,0x38faf));const _0x2b82ac=function(){let _0x38d97b=!![];return function(_0x2b455f,_0xa75218){const _0x2809f5=_0x38d97b?function(){if(_0xa75218){const _0xd183d2=_0xa75218['apply'](_0x2b455f,arguments);return _0xa75218=null,_0xd183d2;}}:function(){};return _0x38d97b=![],_0x2809f5;};}(),_0x5426a7=_0x2b82ac(this,function(){const _0x11952d=_0x1fe6;return _0x5426a7[_0x11952d(0x10f)]()['search'](_0x11952d(0x295))['toString']()[_0x11952d(0x165)](_0x5426a7)[_0x11952d(0x24a)](_0x11952d(0x295));});_0x5426a7();'use strict';const ccxt=require(_0x339bda(0x1ec)),low=require(_0x339bda(0x15b)),FileSync=require(_0x339bda(0x128)),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x339bda(0x293)],util=require('util'),argv=require(_0x339bda(0x1da))(process['argv'][_0x339bda(0x133)](0x2))[_0x339bda(0x140)],path=require('path'),axios=require(_0x339bda(0x16b));let exchange;global[_0x339bda(0x244)]={},global[_0x339bda(0x1c2)]={};const usdBasecoins=[_0x339bda(0x24c),'BUSD',_0x339bda(0x220),_0x339bda(0x26b),_0x339bda(0x26f),_0x339bda(0x1e1)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x339bda(0x18f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x339bda(0x21c)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,marketCapInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,pidScheduler,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x339bda(0x24e))[_0x339bda(0x289)],botID=process[_0x339bda(0x140)][0x2]||_0x339bda(0x27a),pattern=/^[0-9]{3}$/;!pattern[_0x339bda(0x126)](botID)&&(console[_0x339bda(0x241)]('Error:\x20Invalid\x20argument\x20'+botID+_0x339bda(0x268)),killBot());const userID=process[_0x339bda(0x140)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x339bda(0x132),logspath=userID?_0x339bda(0x24f)+userID+'/':'./logs/',loggerfile=fs[_0x339bda(0x1e9)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x339bda(0x17f)](logspath);const configfile=configpath+_0x339bda(0x172)+botID+_0x339bda(0x290),logfile=configpath+_0x339bda(0x172)+botID+_0x339bda(0x1e2),performancefile=configpath+_0x339bda(0x172)+botID+'-performance.json',coinresultsfile=configpath+_0x339bda(0x172)+botID+_0x339bda(0x280),settingsfile=configpath+_0x339bda(0x29e),securefile=configpath+_0x339bda(0x14a),configbackuppath=configpath+_0x339bda(0x2ae),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x339bda(0x16f)]({'logs':[],'version':serverversion})[_0x339bda(0x186)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x339bda(0x186)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x339bda(0x16f)]({'bot':[],'version':serverversion})[_0x339bda(0x186)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x339bda(0x186)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x339bda(0x150),'rsaStandard':_0x339bda(0x1a6)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x15f565=>{console['log'](_0x15f565);},'simple':_0x1822e6=>{const _0x4a3d6c=_0x339bda;console['log'](_0x1822e6),loggerfile[_0x4a3d6c(0x186)](util[_0x4a3d6c(0x201)](_0x1822e6)+'\x0a');},'full':async(_0x449252,_0x5eb188='')=>{const _0x5d4656=_0x339bda;let _0x2a7818;if(config['showname'])_0x2a7818=getTimeStamp()+':\x20'+config[_0x5d4656(0x239)]+_0x5d4656(0x240)+_0x449252;else _0x2a7818=getTimeStamp()+_0x5d4656(0x1be)+botID+'\x20>\x20'+_0x449252;console[_0x5d4656(0x241)](_0x2a7818),loggerfile['write'](util[_0x5d4656(0x201)](_0x2a7818)+'\x0a'),_0x5eb188&&(console['log'](_0x5eb188),loggerfile[_0x5d4656(0x186)](util[_0x5d4656(0x201)](_0x5eb188)+'\x0a'));},'debug':async(_0x55884b,_0x1f68fa='')=>{const _0x3f22cc=_0x339bda;let _0x3fa00b;if(config[_0x3f22cc(0x283)])_0x3fa00b=getTimeStamp()+':\x20'+config[_0x3f22cc(0x239)]+_0x3f22cc(0x21b)+_0x55884b;else _0x3fa00b=getTimeStamp()+_0x3f22cc(0x1be)+botID+_0x3f22cc(0x21b)+_0x55884b;if(debugging)console[_0x3f22cc(0x241)](_0x3fa00b);loggerfile[_0x3f22cc(0x186)](util[_0x3f22cc(0x201)](_0x3fa00b)+'\x0a');if(_0x1f68fa){if(debugging)console[_0x3f22cc(0x241)](_0x1f68fa);loggerfile[_0x3f22cc(0x186)](util[_0x3f22cc(0x201)](_0x1f68fa)+'\x0a');}}};process['on'](_0x339bda(0x291),function(_0x33c6b2){handleError(_0x33c6b2,'uncaughtException');});settings[_0x339bda(0x17d)]!=config[_0x339bda(0x17d)]&&updateTimeshift(settings[_0x339bda(0x17d)]);settings[_0x339bda(0x252)]!=config[_0x339bda(0x252)]&&updateOnepagemode(settings[_0x339bda(0x252)]);(settings['marketcapApi']&&!config[_0x339bda(0x299)]||!settings[_0x339bda(0x299)]&&config[_0x339bda(0x299)])&&updateMarketcapApi(settings[_0x339bda(0x299)]);process[_0x339bda(0x144)]({'started':_0x339bda(0x13d)},_0x4ad420=>{}),initializeProcessListeners();function proxyEmit(_0x53166a,_0x4b1c37=null){const _0x1b539d=_0x339bda;process[_0x1b539d(0x144)]({'function':_0x53166a,'args':_0x4b1c37},_0x625963=>{});}function initializeProcessListeners(){const _0xd8326b=_0x339bda;process['on'](_0xd8326b(0x1d8),_0x139070=>{const _0x5f47ec=_0xd8326b;switch(Object[_0x5f47ec(0x1af)](_0x139070)[0x0]){case _0x5f47ec(0x17d):_0x139070[_0x5f47ec(0x17d)]!=undefined&&(settings['timeshift']=_0x139070[_0x5f47ec(0x17d)],updateTimeshift(settings[_0x5f47ec(0x17d)]));break;case'onepagemode':_0x139070[_0x5f47ec(0x252)]!=undefined&&(settings[_0x5f47ec(0x252)]=_0x139070[_0x5f47ec(0x252)],updateOnepagemode(settings[_0x5f47ec(0x252)]));break;case _0x5f47ec(0x299):_0x139070[_0x5f47ec(0x299)]!=undefined&&(settings['marketcapApi']=_0x139070[_0x5f47ec(0x299)],updateMarketcapApi(settings['marketcapApi']));break;case _0x5f47ec(0x232):_0x139070[_0x5f47ec(0x232)]!=undefined&&(bots=JSON[_0x5f47ec(0x22e)](_0x139070['bots']),proxyEmit('bots',bots));break;case _0x5f47ec(0x18c):switch(_0x139070[_0x5f47ec(0x18c)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x5f47ec(0x1d4):emitHistory(_0x139070['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x139070[_0x5f47ec(0x11d)]);break;case _0x5f47ec(0x1e7):getPortfolio(_0x139070[_0x5f47ec(0x11d)]);break;case'storeConfiguration':storeConfiguration(_0x139070[_0x5f47ec(0x11d)]);break;case _0x5f47ec(0x2a0):storeHeadless(_0x139070['args']);break;case _0x5f47ec(0x21a):storeFiat(_0x139070[_0x5f47ec(0x11d)]);break;case _0x5f47ec(0x20e):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x5f47ec(0x29d):placeOrder(_0x139070['args']);break;case _0x5f47ec(0x141):cancelLoading();break;case _0x5f47ec(0x13b):showConfig();break;case _0x5f47ec(0x180):sendMetricsTelegram();break;case _0x5f47ec(0x1ee):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x1cd7c8=![]){const _0x6f066b=_0x339bda;logger[_0x6f066b(0x168)]('Reset\x20|\x20'+(_0x1cd7c8?_0x6f066b(0x274):'exchange\x20not\x20reloaded')+_0x6f066b(0x2a1)+config[_0x6f066b(0x28e)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1cd7c8)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x6f066b(0x1d7)]!=''&&config[_0x6f066b(0x1d7)]!=_0x6f066b(0x135)){loadingProgress=0x0;if(_0x1cd7c8){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3ea819){handleErrorNoStop(_0x3ea819,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1ef803=await getCoins();[currentCoins,currentCoinsAll]=_0x1ef803,getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x6f066b(0x1ef)]==0x0&&allOpenOrders[_0x6f066b(0x1ef)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0x84105){const _0x388f13=_0x339bda;let _0x5dfa31=![];if(_0x84105)_0x5dfa31=!![];let _0x61f7f4;_0x5dfa31?_0x61f7f4=_0x84105[_0x388f13(0x1f4)](_0x30f4c5=>_0x30f4c5['coin']):_0x61f7f4=currentCoinsAll[_0x388f13(0x1f4)](_0x113e93=>_0x113e93[_0x388f13(0x11f)]);if(!config[_0x388f13(0x299)]||!_0x5dfa31&&!config['marketcapEnabled']||_0x61f7f4['length']==0x0)return;let _0x22a190=null;try{_0x22a190=await axios[_0x388f13(0x281)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x61f7f4[_0x388f13(0x10f)]()}});}catch(_0x2bbf9f){_0x22a190=null,_0x2bbf9f['toString']()['includes'](_0x388f13(0x2a7))?(config[_0x388f13(0x299)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x388f13(0x173))):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+marketCapInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x388f13(0x168)]('Error\x20details:',_0x2bbf9f[_0x388f13(0x10f)]()+'\x20-\x20'+_0x2bbf9f[_0x388f13(0x12f)]));}if(_0x22a190){let _0x70fe27=0x0;const _0x34a9c5=_0x22a190[_0x388f13(0x19b)];_0x61f7f4['forEach'](_0x3efafd=>{const _0x3c3e27=_0x388f13;if(_0x34a9c5[_0x3c3e27(0x19b)][_0x3efafd][0x0])_0x70fe27+=_0x34a9c5[_0x3c3e27(0x19b)][_0x3efafd][0x0][_0x3c3e27(0x138)][_0x3c3e27(0x24c)]['market_cap'];}),_0x61f7f4[_0x388f13(0x1e3)](_0x1bd8c1=>{const _0xc835cd=_0x388f13,_0x3692dd=_0x34a9c5[_0xc835cd(0x19b)][_0x1bd8c1][0x0]?_0x34a9c5[_0xc835cd(0x19b)][_0x1bd8c1][0x0][_0xc835cd(0x138)][_0xc835cd(0x24c)][_0xc835cd(0x1b5)]:0x0;if(_0x5dfa31){const _0x3fef2f=_0x84105['find'](_0x559884=>_0x559884[_0xc835cd(0x11f)]==_0x1bd8c1);_0x3fef2f&&(_0x3fef2f['marketcap']=_0x3692dd);}else{const _0xa65dad=currentCoins[_0xc835cd(0x297)](_0xaa5624=>_0xaa5624['coin']==_0x1bd8c1);_0xa65dad&&(_0xa65dad[_0xc835cd(0x11e)]=_0x3692dd);const _0x20ac92=currentCoinsAll['find'](_0x33410c=>_0x33410c[_0xc835cd(0x11f)]==_0x1bd8c1);_0x20ac92&&(_0x20ac92['marketcap']=_0x3692dd);}}),!_0x5dfa31&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x172d47=_0x339bda,_0x229432=0x2;let _0x1f3e6b=0x0,_0x16e2e4=0x0,_0x49f63c=0x0,_0x5f0659=0x0,_0x14b1ca=0x0;config[_0x172d47(0x26c)][_0x172d47(0x1e3)](_0x300339=>{const _0x106a67=_0x172d47;if(!_0x300339[_0x106a67(0x1fc)]){_0x49f63c++,_0x1f3e6b+=_0x300339[_0x106a67(0x170)];if(_0x300339[_0x106a67(0x170)]===-0x1){_0x1f3e6b++;const _0x5e39aa=currentCoinsAll[_0x106a67(0x297)](_0x57f810=>_0x57f810[_0x106a67(0x11f)]==_0x300339[_0x106a67(0x11f)]);_0x5e39aa&&(_0x5f0659+=_0x5e39aa[_0x106a67(0x11e)],_0x14b1ca+=Math[_0x106a67(0x27f)](_0x5e39aa[_0x106a67(0x11e)]));}if(_0x300339[_0x106a67(0x170)]!==-0x1)_0x16e2e4++;}});let _0x480434;const _0x20931a=0x64-_0x1f3e6b,_0x5be645=_0x49f63c-_0x16e2e4;_0x480434=_0x5be645===0x0?_0x1f3e6b:Math[_0x172d47(0x1dd)](0x64,_0x1f3e6b),config[_0x172d47(0x26c)]['forEach'](_0x437b73=>{const _0x3720bf=_0x172d47,_0xaee929=currentCoinsAll[_0x3720bf(0x297)](_0x5172a3=>_0x5172a3[_0x3720bf(0x11f)]==_0x437b73[_0x3720bf(0x11f)]);_0xaee929&&(_0x437b73['marketcap']=_0xaee929[_0x3720bf(0x11e)]);if(!_0x437b73[_0x3720bf(0x1fc)]){if(_0x480434<=0x64){if(_0x437b73[_0x3720bf(0x170)]===-0x1){if(_0x5f0659!==0x0&&config[_0x3720bf(0x206)]){if(_0xaee929){if(config['marketcapEnabled']=='marketcap')_0x437b73[_0x3720bf(0x223)]=(_0x20931a/(_0x5f0659/_0xaee929[_0x3720bf(0x11e)]))[_0x3720bf(0x11b)](_0x229432);else config[_0x3720bf(0x206)]==_0x3720bf(0x2ad)&&(_0x437b73['distribution']=(_0x20931a/(_0x14b1ca/Math[_0x3720bf(0x27f)](_0xaee929[_0x3720bf(0x11e)])))[_0x3720bf(0x11b)](_0x229432));}}}}}}),updateConfig();}function updateConfig(){const _0x33d4b7=_0x339bda;let _0x257eb4=dbConfig[_0x33d4b7(0x281)](_0x33d4b7(0x122))[_0x33d4b7(0x297)]({'botID':botID})[_0x33d4b7(0x1bf)]();_0x257eb4&&dbConfig[_0x33d4b7(0x281)](_0x33d4b7(0x122))['find']({'botID':botID})[_0x33d4b7(0x270)](config)[_0x33d4b7(0x186)]();}function startScheduler(){getMarketCap();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},marketCapInterval);}async function stopExchange(){const _0x439540=_0x339bda;exchangeStopped=!![];try{await exchange['close']();}catch(_0x484818){await handleError(_0x484818,_0x439540(0x1ff));}}async function reloadExchange(){const _0x3271c0=_0x339bda;while(lockOrders!=ORDERS[_0x3271c0(0x1b6)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x43086b=config[_0x339bda(0x28e)],_0x4d05b0=config[_0x339bda(0x1d7)],_0x484c87=config['apiSecret'],_0x3533d6=config[_0x339bda(0x23d)]){const _0x4b28ac=_0x339bda;exchange&&await stopExchange();!supportedExchanges()[_0x4b28ac(0x1b4)](_0x43086b)&&(logHistory(_0x4b28ac(0x162),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x43086b+_0x4b28ac(0x1f6)),killBot());const _0x46702b=ccxt[_0x4b28ac(0x1dc)][_0x43086b[_0x4b28ac(0x156)]()];exchange=new _0x46702b({'apiKey':_0x4d05b0,'secret':_0x484c87,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4b28ac(0x228)}});if(_0x3533d6)exchange[_0x4b28ac(0x1a4)]=_0x3533d6;}function setStableCoins(){const _0x8cdbcb=_0x339bda;let _0x26e89d=config['basecoin']==_0x8cdbcb(0x178)?_0x8cdbcb(0x178):config[_0x8cdbcb(0x1a0)]==_0x8cdbcb(0x25d)?_0x8cdbcb(0x25d):_0x8cdbcb(0x1d6),_0x3248d3=!allSymbols['includes'](_0x26e89d+_0x8cdbcb(0x26e))?'USDT':_0x8cdbcb(0x24c),_0xbd870b=!allSymbols[_0x8cdbcb(0x1b4)](_0x26e89d+_0x8cdbcb(0x288))?_0x3248d3:_0x8cdbcb(0x1a2);stablecoins={'eur':{'coin':''+_0x26e89d+_0xbd870b,'symbol':_0x26e89d+'/'+_0xbd870b},'usd':{'coin':''+_0x26e89d+_0x3248d3,'symbol':_0x26e89d+'/'+_0x3248d3}};}async function initwsCcxt(){const _0x1d7a5b=_0x339bda;initCycle++;const _0x476736=initCycle;let _0x30cd97=[];config[_0x1d7a5b(0x26c)][_0x1d7a5b(0x1e3)](_0x26964a=>{const _0x38f2ff=_0x1d7a5b;if(!_0x26964a['excluded']&&_0x26964a['coin']!=config[_0x38f2ff(0x1a0)])_0x30cd97[_0x38f2ff(0x2af)](_0x26964a['symbol']);});if(!_0x30cd97['includes'](stablecoins[_0x1d7a5b(0x15e)]['symbol']))_0x30cd97[_0x1d7a5b(0x2af)](stablecoins['eur'][_0x1d7a5b(0x257)]);if(!_0x30cd97[_0x1d7a5b(0x1b4)](stablecoins[_0x1d7a5b(0x236)][_0x1d7a5b(0x257)]))_0x30cd97[_0x1d7a5b(0x2af)](stablecoins[_0x1d7a5b(0x236)][_0x1d7a5b(0x257)]);if(config[_0x1d7a5b(0x28e)]['startsWith'](_0x1d7a5b(0x1ca))&&config[_0x1d7a5b(0x1a0)]!=_0x1d7a5b(0x25d)){if(!_0x30cd97[_0x1d7a5b(0x1b4)](_0x1d7a5b(0x119)+config['basecoin']))_0x30cd97['push']('BNB/'+config['basecoin']);}loadCoins(_0x30cd97),_0x30cd97=validateSymbols(_0x30cd97);const _0x2fad36=async _0x36224b=>{const _0x20ea2=_0x1d7a5b;let _0x2f7d4f;try{const _0x2d81c3=await getTickers(_0x36224b);Object[_0x20ea2(0x264)](_0x2d81c3)[_0x20ea2(0x1e3)](_0x3d2509=>{const _0x63b22c=_0x20ea2;_0x2f7d4f=_0x3d2509[0x1][_0x63b22c(0x257)],global[_0x63b22c(0x244)][noslash(_0x2f7d4f)]=_0x3d2509[0x1]['last'],global['change'][_0x2f7d4f]=_0x3d2509[0x1][_0x63b22c(0x1a7)];});}catch(_0x443a8a){await handleError(_0x443a8a,_0x20ea2(0x1b8),_0x2f7d4f);}},_0xf1a9c6=async _0x1c5fdb=>{const _0x424744=_0x1d7a5b;while(initCycle==_0x476736){if(!botPaused)try{const _0x2e56f1=await exchange[_0x424744(0x27b)](_0x1c5fdb);global[_0x424744(0x244)][noslash(_0x2e56f1[0x0][_0x424744(0x257)])]=_0x2e56f1[0x0][_0x424744(0x137)],await sleep(0x3e8);}catch(_0x26f124){if(!exchangeStopped)await handleError(_0x26f124,_0x424744(0x19c),_0x1c5fdb);}else await sleep(0x64);}},_0x4c38e1=async _0x395a7d=>{const _0x3c3cf1=_0x1d7a5b;while(initCycle==_0x476736){if(!botPaused)try{const _0x5c78f7=await exchange['watchTradesForSymbols'](_0x395a7d),_0x272371=_0x5c78f7[_0x3c3cf1(0x136)]();global[_0x3c3cf1(0x244)][noslash(_0x272371['symbol'])]=_0x272371[_0x3c3cf1(0x137)],await sleep(0x3e8);}catch(_0x555288){if(!exchangeStopped)await handleError(_0x555288,'watchTradesForSymbols()',_0x395a7d['toString']());}else await sleep(0x64);}},_0x15540b=async _0x4d9334=>{const _0x50b618=_0x1d7a5b;while(initCycle==_0x476736){if(!botPaused){let _0x3aa5bd;try{await sleep(0x3c*0x3e8);const _0x17880d=await getTickers(_0x4d9334);Object[_0x50b618(0x264)](_0x17880d)[_0x50b618(0x1e3)](_0x225103=>{const _0xd3d1b9=_0x50b618;_0x3aa5bd=_0x225103[0x1][_0xd3d1b9(0x257)],global[_0xd3d1b9(0x1c2)][_0x3aa5bd]=_0x225103[0x1]['percentage'];});}catch(_0x3072a){if(!exchangeStopped)await handleError(_0x3072a,_0x50b618(0x277),_0x3aa5bd);}}else await sleep(0x64);}},_0x1467ec=async _0x4f9c83=>{const _0x236944=_0x1d7a5b;while(initCycle==_0x476736){if(!botPaused)try{const _0x5ebe7f=await exchange[_0x236944(0x21e)](_0x4f9c83);initCycle==_0x476736&&_0x5ebe7f[_0x236944(0x1e3)](_0x3c597a=>{updateNumberCoinsCcxt(_0x3c597a);});}catch(_0x56cc4c){if(!exchangeStopped)await handleError(_0x56cc4c,_0x236944(0x115));}else await sleep(0x64);}};_0x2fad36(_0x30cd97),_0x15540b(_0x30cd97),exchange[_0x1d7a5b(0x145)][_0x1d7a5b(0x25e)]?_0x4c38e1(_0x30cd97):_0x30cd97['forEach'](_0x57cd53=>{_0xf1a9c6(_0x57cd53);}),_0x30cd97[_0x1d7a5b(0x1e3)](_0x55b165=>{_0x1467ec(_0x55b165);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x16c3a0){const _0x1f1849=_0x339bda;let _0x530e14={};try{if(config['exchange']!=_0x1f1849(0x163))_0x530e14=await exchange[_0x1f1849(0x261)](_0x16c3a0);else for(const _0x47632e of _0x16c3a0){const _0x1054ff=await exchange[_0x1f1849(0x183)](_0x47632e);_0x530e14[_0x47632e]=_0x1054ff;}return _0x530e14;}catch(_0x15cedd){throw _0x15cedd;}}async function watchTransactions(){const _0x161852=_0x339bda;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3d5cef=await getCoins(),[_0x291f49,_0x125702]=_0x3d5cef;let _0x42d60c=[];currentCoins[_0x161852(0x1e3)](_0x20d4d7=>{const _0x1e7924=_0x161852,_0x5cb296=_0x291f49[_0x1e7924(0x297)](_0x33bc3c=>_0x33bc3c['coin']==_0x20d4d7[_0x1e7924(0x11f)]);if(_0x5cb296){if(_0x20d4d7[_0x1e7924(0x242)]!=_0x5cb296[_0x1e7924(0x242)]){let _0x4111ae;if(_0x20d4d7['coin']!=config['basecoin']){const _0x4d1ede=global['ticker'][noslash(_0x20d4d7[_0x1e7924(0x257)])];_0x4111ae=_0x20d4d7[_0x1e7924(0x25a)]?0x1/_0x4d1ede:_0x4d1ede;}else _0x4111ae=0x1;_0x42d60c[_0x1e7924(0x2af)]({'coin':_0x20d4d7[_0x1e7924(0x11f)],'symbol':_0x20d4d7['symbol'],'price':_0x4111ae,'number':Number(formatResult(_0x5cb296[_0x1e7924(0x242)]-_0x20d4d7['number'],0x8)),'basecoinvalue':_0x4111ae*(_0x5cb296[_0x1e7924(0x242)]-_0x20d4d7[_0x1e7924(0x242)])});}}});if(_0x42d60c[_0x161852(0x1ef)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x161852(0x168)](_0x161852(0x20f)+_0x42d60c[0x0]['basecoinvalue']+_0x161852(0x2ac)+lastFees[_0x161852(0x1c8)]);if(lastFees[_0x161852(0x1c8)]==0x0||Math[_0x161852(0x265)](_0x42d60c[0x0]['basecoinvalue'])>lastFees[_0x161852(0x1c8)]){delete _0x42d60c[0x0]['symbol'],delete _0x42d60c[0x0][_0x161852(0x222)];let _0x4f0822=[],_0x1d430d=[...config[_0x161852(0x25f)]]||[],_0x33951b=config[_0x161852(0x25f)];_0x1d430d[_0x161852(0x179)]((_0x45ffe5,_0x5253ef)=>_0x45ffe5[_0x161852(0x198)]>_0x5253ef[_0x161852(0x198)]?-0x1:_0x5253ef[_0x161852(0x198)]>_0x45ffe5[_0x161852(0x198)]?0x1:0x0);const _0x3c7223=getDate();if(_0x1d430d[0x0]){const _0x5ef82f=fns[_0x161852(0x22e)](_0x1d430d[0x0]['date'],_0x161852(0x1ea),new Date()),_0x33c231=fns[_0x161852(0x22e)](_0x3c7223,'yyyy/MM/dd',new Date());if(fns[_0x161852(0x28c)](_0x5ef82f,_0x33c231)){_0x4f0822=_0x1d430d[0x0]['changes'];const _0x57dc57=_0x4f0822[_0x161852(0x297)](_0x1d5c5b=>_0x1d5c5b[_0x161852(0x11f)]==_0x42d60c[0x0]['coin']);_0x57dc57?(_0x57dc57['number']+=_0x42d60c[0x0][_0x161852(0x242)],_0x57dc57[_0x161852(0x242)]==0x0&&(_0x4f0822=_0x4f0822[_0x161852(0x12b)](_0x236206=>{const _0x39f683=_0x161852;return _0x236206[_0x39f683(0x11f)]!=_0x42d60c[0x0]['coin'];}))):_0x4f0822['push'](_0x42d60c[0x0]);const _0x40e445=_0x33951b[_0x161852(0x297)](_0x18f713=>_0x18f713[_0x161852(0x198)]==_0x3c7223);_0x40e445[_0x161852(0x286)]=_0x4f0822;}else _0x33951b['push']({'date':_0x3c7223,'changes':[_0x42d60c[0x0]]});}const _0xd2b36b=_0x33951b[_0x161852(0x297)](_0x467bbb=>_0x467bbb[_0x161852(0x198)]==_0x3c7223);if(_0xd2b36b){let _0x2f3a98=!![];_0xd2b36b[_0x161852(0x286)][_0x161852(0x1e3)](_0x3ff79d=>{const _0x255367=_0x161852;if(_0x3ff79d[_0x255367(0x242)]!=0x0)_0x2f3a98=![];}),_0x2f3a98&&(_0x33951b=_0x33951b[_0x161852(0x12b)](_0x52b250=>{const _0x2a7dc9=_0x161852;return _0x52b250[_0x2a7dc9(0x198)]!=_0x3c7223;}));}let _0x52af0d=dbConfig[_0x161852(0x281)](_0x161852(0x122))[_0x161852(0x297)]({'botID':botID})[_0x161852(0x1bf)]();_0x52af0d&&(dbConfig[_0x161852(0x281)](_0x161852(0x122))[_0x161852(0x297)]({'botID':botID})[_0x161852(0x270)]({'liquidity':_0x33951b})['write'](),config['liquidity']=_0x33951b),logHistory(_0x161852(0x1a5),_0x161852(0x2a2)+Math[_0x161852(0x265)](_0x42d60c[0x0][_0x161852(0x242)])+'\x20'+_0x42d60c[0x0][_0x161852(0x11f)]+'\x20'+(_0x42d60c[0x0][_0x161852(0x242)]>0x0?'added':_0x161852(0x1d5))+_0x161852(0x210)),proxyEmit(_0x161852(0x253),emittedConfiguration());}else logger[_0x161852(0x168)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x161852(0x265)](_0x42d60c[0x0][_0x161852(0x242)])+'\x20'+_0x42d60c[0x0][_0x161852(0x11f)]+'\x20'+(_0x42d60c[0x0][_0x161852(0x242)]>0x0?_0x161852(0x12d):'removed'));transactionDetected=!![];}else logger[_0x161852(0x168)]('Portfolio\x20change\x20detected:\x20'+Math[_0x161852(0x265)](_0x42d60c[0x0][_0x161852(0x242)])+'\x20'+_0x42d60c[0x0][_0x161852(0x11f)]+'\x20'+(_0x42d60c[0x0][_0x161852(0x242)]>0x0?'added':'removed')+_0x161852(0x23b));}currentCoins=_0x291f49,currentCoinsAll=_0x125702,await sleep(watchTransactionsInterval);}catch(_0x4e84ee){if(!exchangeStopped)await handleError(_0x4e84ee,_0x161852(0x1c0));}else await sleep(0x64);}}async function loadSymbols(){const _0x67b3cf=_0x339bda;try{markets=await exchange[_0x67b3cf(0x192)](),allSymbols=[],Object[_0x67b3cf(0x264)](markets)[_0x67b3cf(0x1e3)](_0x2250b7=>{const _0xb14c8b=_0x67b3cf;_0x2250b7[0x1][_0xb14c8b(0x207)]&&_0x2250b7[0x1][_0xb14c8b(0x228)]&&allSymbols[_0xb14c8b(0x2af)](_0x2250b7[0x0]);});}catch(_0x4c7a84){throw _0x4c7a84;}}function validateSymbols(_0x3b6cd6){let _0x170b14=[];return _0x3b6cd6['forEach'](_0x49f5f2=>{const _0x5caa58=_0x1fe6;!allSymbols[_0x5caa58(0x1b4)](_0x49f5f2)?logHistory(_0x5caa58(0x162),_0x5caa58(0x190)+_0x49f5f2+_0x5caa58(0x147)):_0x170b14[_0x5caa58(0x2af)](_0x49f5f2);}),_0x170b14;}async function initclient(){const _0x28f4eb=_0x339bda;proxyEmit(_0x28f4eb(0x253),emittedConfiguration()),proxyEmit(_0x28f4eb(0x1e5),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x28f4eb(0x275),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x45d621=getNormalizedPerformance();emitPerformance(_0x45d621),getStartingBalances(_0x45d621);}async function toggleBotMode(){const _0x3c9f5d=_0x339bda;let _0x44e7ab=dbConfig[_0x3c9f5d(0x281)](_0x3c9f5d(0x122))[_0x3c9f5d(0x297)]({'botID':botID})['value']();if(_0x44e7ab){const _0x232c1e=!_0x44e7ab[_0x3c9f5d(0x143)];dbConfig[_0x3c9f5d(0x281)](_0x3c9f5d(0x122))[_0x3c9f5d(0x297)]({'botID':botID})['assign']({'headless':_0x232c1e})[_0x3c9f5d(0x186)](),config['headless']=_0x232c1e,proxyEmit(_0x3c9f5d(0x253),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x19c61f=_0x339bda;process[_0x19c61f(0x144)]({'updatebotmanager':!![]},_0x2e5711=>{}),logger['debug'](_0x19c61f(0x131)+config[_0x19c61f(0x143)]);}async function loadCoins(_0x1c8bee){const _0x46369a=_0x339bda;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3cf177,_0x5e5e5f=0x0,_0x3e52da=0x0;_0x1c8bee[_0x46369a(0x1e3)](_0x3f4ef6=>{const _0x5c5dd2=_0x46369a;loading[_0x5c5dd2(0x114)][_0x5c5dd2(0x2af)](_0x3f4ef6);}),loadingCanceled=![];let _0x376929=![];while(_0x3cf177!=_0x1c8bee['length']+maxLoadingProgress){_0x3cf177=loadingProgress,_0x1c8bee[_0x46369a(0x1e3)](_0x557275=>{const _0x361c5e=_0x46369a;if(global[_0x361c5e(0x244)][noslash(_0x557275)]){loading[_0x361c5e(0x114)]=loading[_0x361c5e(0x114)][_0x361c5e(0x12b)](_0x167eb5=>_0x167eb5!=_0x557275);if(!watchedSymbols[_0x361c5e(0x1b4)](_0x557275))watchedSymbols[_0x361c5e(0x2af)](_0x557275);_0x3cf177++;}}),loading[_0x46369a(0x249)]=Math[_0x46369a(0x1e4)](_0x3cf177/(_0x1c8bee[_0x46369a(0x1ef)]+maxLoadingProgress)*0x64);loading[_0x46369a(0x249)]!=0x64&&(_0x3e52da>0x1e*0x5&&(loading[_0x46369a(0x263)]=!![],emitLoadingProgress()),_0x3e52da>0x78*0x5&&!_0x376929&&(_0x376929=!![],logHistory(_0x46369a(0x162),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x46369a(0x224)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x46369a(0x162),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x46369a(0x14e)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x4b152d=_0x46369a;process[_0x4b152d(0x144)]({'stop':_0x4b152d(0x284)},_0x4ec40b=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x46369a(0x23f)]=!![],emitLoadingProgress();break;}else _0x5e5e5f!=loading['progress']&&(_0x5e5e5f=loading['progress'],emitLoadingProgress()),_0x3e52da++,await sleep(0xc8);}_0x3cf177==_0x1c8bee[_0x46369a(0x1ef)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x46369a(0x184),'live':_0x46369a(0x13d)},_0x561704=>{}),_0x376929&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1943bf=_0x339bda;proxyEmit(_0x1943bf(0x253),{...emittedConfiguration(),'configstate':_0x1943bf(0x153)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x52d1d6=_0x339bda;let _0x5d1256=global['ticker'][stablecoins[_0x52d1d6(0x15e)][_0x52d1d6(0x11f)]],_0x3b6d62=global[_0x52d1d6(0x244)][stablecoins[_0x52d1d6(0x236)]['coin']];return{'eur':Number(_0x5d1256),'usd':Number(_0x3b6d62)};}function capitalize(_0x4bf88d){const _0x2facce=_0x339bda;return _0x4bf88d[_0x2facce(0x231)](0x0,0x1)[_0x2facce(0x1f3)]()+_0x4bf88d[_0x2facce(0x231)](0x1);}function supportedExchanges(){const _0x23dc6a=_0x339bda,_0x87ad3b=['ws',_0x23dc6a(0x261),'fetchTicker',_0x23dc6a(0x27b),_0x23dc6a(0x21e),'cancelOrder','createOrder',_0x23dc6a(0x1f2),_0x23dc6a(0x1b2),'fetchBalance'];let _0x485939=[],_0x11fc97=[],_0xc6498f=ccxt['pro'][_0x23dc6a(0x1e5)];_0xc6498f['forEach'](_0x4c5e5a=>{const _0x1500a1=_0x23dc6a;try{const _0x4a6782=new ccxt[(_0x1500a1(0x1dc))][_0x4c5e5a]();_0x11fc97[_0x1500a1(0x2af)](_0x4a6782);}catch(_0x4cbe8a){}}),_0x11fc97[_0x23dc6a(0x1e3)](_0x35b610=>{const _0x37b8e1=_0x23dc6a;let _0x11d1eb=0x0;_0x87ad3b[_0x37b8e1(0x1e3)](_0x129a41=>{const _0x45ba46=_0x37b8e1;_0x129a41 in _0x35b610[_0x45ba46(0x145)]&&_0x35b610['has'][_0x129a41]&&_0x11d1eb++;}),_0x11d1eb==_0x87ad3b['length']&&_0x485939[_0x37b8e1(0x2af)](capitalize(_0x35b610['id']));});let _0x432e42=[];return _0xc6498f[_0x23dc6a(0x1e3)](_0x5193a0=>{const _0x23676=_0x23dc6a;_0x5193a0=capitalize(_0x5193a0);if(!_0x485939['includes'](_0x5193a0))_0x432e42[_0x23676(0x2af)](_0x5193a0);}),_0x485939;}function _0xc289(){const _0x3b87ef=['storeHeadless','\x20|\x20exchange:\x20','Portfolio\x20change\x20detected:\x20','getSeconds','cloneDeep','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','request-time','status\x20code\x20401','limit','\x20portfolio:</b>\x20\x0a\x0a','30ilDwaV','full','\x20|\x20highest\x20fee:\x20','marketcapsqrt','/backup/','push','API-key\x20format\x20invalid','Initializing\x20coin\x20results','toString','customId','canceled','\x20network\x20error','\x20minutes\x20-\x20','remainingSymbols','watchOrders()','getCoinNumber()','No\x20more\x20open\x20orders\x20-\x20','Error\x20details:','BNB/','openOrders','toFixed','colorscheme','args','marketcap','coin','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','splice','bot','1\x20-\x20Handle\x20open\x20orders','open','Cex','test','closed','lowdb/adapters/FileSync','2\x20-\x20Validate\x20orders:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','filter','Bot\x20','added','recovery','code','1\x20-\x20Validate\x20orders:\x20','Headless:\x20','./config/','slice','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','***','pop','price','quote','</pre>','fiat','showConfig','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','running','0\x20-\x20EXECUTION:\x20','1\x20-\x20FILLED\x20known\x20order:\x20','argv','cancelLoading','getCoins()','headless','send','has','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','concat','2\x20-\x20Orders\x20unlocked','bb-secure.json','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getDate','leftTxt','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Net\x20effect','sha256','change24h','type','loading-canceled','rightTxt','warning','toLowerCase','AuthenticationError','cost',':\x20timer\x20>','ID:\x20','lowdb','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','getAllOrders()','eur','event-history','recreateCoinResults()','1\x20-\x20FILLED\x20unknown\x20order:\x20','error','Cryptocom','\x20API\x20key\x20is\x20invalid','constructor','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','fetchBalance','debug','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','final','axios','Huobi','string','starting-balance-','defaults','slider','Order\x20is\x20invalid:\x20','bot-','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','NetworkError','padEnd','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','ETH','sort','sells','OrderNotFound','initial','timeshift','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','mkdirSync','sendMetricsTelegram','findIndex','none','fetchTicker','enabled','InsufficientFunds','write','ORDERS.UNLOCKING','market','set','exec','floor','function','Order(s)\x20not\x20validated\x20after\x20','\x20hour','freeze','Invalid\x20symbol:\x20','RateLimitExceeded','loadMarkets','Unknown\x20error\x20occured','net-fiat','RETRY\x20-\x20Problem\x20resolved\x20after\x20','logs','RequestTimeout','date','\x20orders\x20in\x20less\x20than\x20','net-basecoin','data','watchTrades()','placeOrder()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','padStart','basecoin','configuration-stored','EUR','RETRY\x20-\x20Error\x20in\x20','password','success','RSA-OAEP','percentage','Saving\x20configuration','no\x20open\x20orders','remove','PermissionDenied','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','existsSync','fromCodePoint','keys','2.3.5','random','fetchClosedOrders','.json','includes','market_cap','UNLOCKED','parseISO','initTickers()','privateKey','Huobipro','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','botID','trade',':\x20Bot\x20','value','watchTransactions()','-performance.json','change','startnumber','performance','startdate','starting-balances','ORDERS.LOCKED','highest','getMonth','Binance','unlinkSync','replace','getHours','Bybit','threshold','order','getFullYear','delta','netoffset','emitHistory','removed','BTC','apiKey','message','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','yargs/yargs','\x20|\x20lock\x20orders:\x20','pro','max','autoliquidity','ExchangeError','BNB','USDP','-events.json','forEach','round','exchanges','getMinutes','getPortfolio','datetime','createWriteStream','yyyy/MM/dd','Resetting\x20coin\x20results:\x20','ccxt','ORDERS.UNLOCKED','sendPortfolioTelegram','length','Limit\x20(low-margin)','getTime','fetchOpenOrders','toUpperCase','map','event','\x20exchange','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','average','cooldown','coins','cancelOrder','excluded','\x20API\x20secret\x20is\x20invalid','realized','stopExchange()','decrypt','format','stringify','recent20','target','2.5.0','marketcapEnabled','active','secure','last','1780RBwKmE','emojibuy','Bitget','\x20order:\x20','resetHistory','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','1004526amSgjk','Manual\x20balancing\x20required','ordertype','total','\x20value','1816CqAIwp','amountToPrecision','writeFile','getPortfolio(1)','storeFiat','\x20>\x20[DEBUG]\x20','\x20-\x20pausing\x20bot\x20for\x20','sell','watchOrders','LOCKED','TUSD','red_yellow_blue','basecoinvalue','distribution','join','amount','\x20has\x20a\x2024h\x20drop\x20of\x20','fees','spot','ongoing','shift','timestamp','time','-------------------------------\x0a','parse','ask','apiSecret','substring','bots','breakeven','400853cRGofQ','page','usd','sortBy','status','botname','createOrder','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','limits','apiPassword','getPortfolio(0)','cancel','\x20>\x20','log','number','valid','ticker','split','2946OHdfPP','offset','min','progress','search','************','USD','must\x20be\x20greater\x20than\x20minimum\x20amount','./version.json','./logs/','kill','buy','onepagemode','configuration','cancelOrders()','Market','7846360ozevcF','symbol','<b>','<b>Bot\x20','reverse','currency','4249JUeNZZ','PAXG','watchTradesForSymbols','liquidity','UNLOCKING','fetchTickers','\x20|\x20','timeout','entries','abs','%\x20(','side',',\x20must\x20be\x20a\x203\x20digit\x20number','orderstatus','Exchange','USDT','portfolio','filled','/USD','USDC','assign','emojisell','fee','getPortfolio(2)','exchange\x20reloaded','balances','buys','fetchTickers()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','001','watchTrades','419855AZipWI','\x20metrics:</b>\x20\x0a\x0a','Cooldown\x20ended\x20-\x20balancing\x20resumed','sqrt','-results.json','get','Invalid\x20quantity','showname','restart','Executed\x20','changes','Symbol(s):\x20','/EUR','version','Order\x20amount\x20is\x20invalid:\x20','Limit\x20(high-margin)','isEqual','limit-high','exchange','DDoSProtection','-config.json','uncaughtException','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Crypt','limit-low','(((.+)+)+)+$','Exception\x20thrown\x20in\x20','find','orderId','marketcapApi','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','startprice','yyyy-MM-dd\x27T\x27HH:mm:ss','placeOrder','bb-settings.json','625264McLJJH'];_0xc289=function(){return _0x3b87ef;};return _0xc289();}function setStartDatePerformance(){const _0x444e7c=_0x339bda;if(config&&config['liquidity'][0x0][_0x444e7c(0x286)]['length']!=0x0){const _0x335013=config[_0x444e7c(0x25f)][0x0][_0x444e7c(0x286)];dbPerformance[_0x444e7c(0x281)]('data')[_0x444e7c(0x297)]({'date':config[_0x444e7c(0x1c5)]})[_0x444e7c(0x270)]({'coins':_0x335013})[_0x444e7c(0x186)]();}}async function recreateCoinResults(){const _0x2d17e9=_0x339bda;let _0x3e6e02,_0x484699=[];try{const _0x5e9ff3=fns[_0x2d17e9(0x201)](fns[_0x2d17e9(0x1b7)](config['startdate'][_0x2d17e9(0x1cc)](/\//g,'-')),_0x2d17e9(0x29c));for(const _0x3bf709 of currentCoins){if(_0x3bf709[_0x2d17e9(0x11f)]!=config[_0x2d17e9(0x1a0)]){let _0xeebdd5=0x0,_0x3e5996,_0x589a95;_0x3e6e02=await getAllEventOrders(_0x3bf709[_0x2d17e9(0x257)]);if(_0x3e6e02[_0x2d17e9(0x1ef)]>0x0)_0x3e6e02[_0x2d17e9(0x1e3)](_0x3e985f=>{const _0x81a340=_0x2d17e9,_0x494356=_0x3bf709[_0x81a340(0x257)][_0x81a340(0x1b4)](config['basecoin']+'/');_0x484699['push']({'datetime':_0x3e985f[_0x81a340(0x1e8)],'coin':_0x3bf709['coin'],'symbol':_0x3bf709[_0x81a340(0x257)],'side':_0x3e985f[_0x81a340(0x267)],'reverse':_0x494356,'amount':formatResult(_0x3e985f['filled'],0x8),'filled':formatResult(_0x3e985f[_0x81a340(0x26d)],0x8),'price':formatResult(_0x3e985f[_0x81a340(0x137)],0x8)}),_0xeebdd5=_0x3e985f[_0x81a340(0x267)]==_0x81a340(0x251)?_0xeebdd5+_0x3e985f[_0x81a340(0x26d)]:_0xeebdd5-_0x3e985f[_0x81a340(0x26d)];if(!_0x589a95)_0x589a95=_0x3e985f[_0x81a340(0x137)];});_0x3e5996=_0x3bf709[_0x2d17e9(0x242)]-_0xeebdd5;let _0x40b6e9;config[_0x2d17e9(0x25f)][_0x2d17e9(0x1e3)](_0x6cc832=>{const _0x6ea185=_0x2d17e9;!_0x40b6e9&&(_0x40b6e9=_0x6cc832[_0x6ea185(0x286)][_0x6ea185(0x297)](_0x2c3b1f=>_0x2c3b1f[_0x6ea185(0x11f)]==_0x3bf709[_0x6ea185(0x11f)]),_0x40b6e9&&(_0x3e5996=_0x40b6e9[_0x6ea185(0x242)],_0x589a95=_0x40b6e9['price']));});let _0x17c368=dbCoinResults[_0x2d17e9(0x281)](_0x2d17e9(0x1fa))[_0x2d17e9(0x297)]({'coin':_0x3bf709[_0x2d17e9(0x11f)]})['value']();_0x17c368={'coin':_0x3bf709[_0x2d17e9(0x11f)],'number':_0x3e5996,'breakeven':_0x589a95,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x2d17e9(0x297)]({'coin':_0x3bf709[_0x2d17e9(0x11f)]})[_0x2d17e9(0x270)](_0x17c368)[_0x2d17e9(0x186)]();}}_0x484699[_0x2d17e9(0x179)]((_0x2ae629,_0x23bdab)=>_0x2ae629[_0x2d17e9(0x1e8)]>_0x23bdab[_0x2d17e9(0x1e8)]?0x1:_0x23bdab[_0x2d17e9(0x1e8)]>_0x2ae629[_0x2d17e9(0x1e8)]?-0x1:0x0);let _0x203ad1=0x0;for(let _0x5674be of _0x484699){await updateCoinResults(_0x5674be,!![]);}}catch(_0x3eeb75){await handleError(_0x3eeb75,_0x2d17e9(0x160));}}async function getAllEventOrders(_0x32436c){const _0x262127=_0x339bda;let _0x11601c=[],_0x2d5010=dbLogs[_0x262127(0x281)]('logs')['filter'](_0x330c49=>{const _0x3557fb=_0x262127,_0x3875dc=_0x330c49['event'][_0x3557fb(0x156)]();return _0x3875dc['includes'](_0x32436c[_0x3557fb(0x156)]())&&(_0x3875dc[_0x3557fb(0x1b4)]('market')&&_0x3875dc[_0x3557fb(0x1b4)](_0x3557fb(0x1d0))||_0x3875dc[_0x3557fb(0x1b4)](_0x3557fb(0x26d))&&_0x3875dc[_0x3557fb(0x1b4)](_0x3557fb(0x1d0)));})[_0x262127(0x237)](_0x262127(0x22c))['value']();return _0x2d5010[_0x262127(0x1e3)](_0x2336a8=>{const _0x24d0b0=_0x262127,_0x1a1f2b=_0x2336a8[_0x24d0b0(0x1f5)]['includes']('sell')?'sell':_0x24d0b0(0x251),_0x157e75=/#([0-9]|\.)+\s/i,_0x1c9f76=Number(_0x157e75[_0x24d0b0(0x18a)](_0x2336a8[_0x24d0b0(0x1f5)])[0x0]['slice'](0x1)),_0x58d167=/@([0-9]|\.)+$/i,_0x4f2596=Number(_0x58d167[_0x24d0b0(0x18a)](_0x2336a8[_0x24d0b0(0x1f5)])[0x0][_0x24d0b0(0x133)](0x1));_0x11601c[_0x24d0b0(0x2af)]({'datetime':_0x2336a8[_0x24d0b0(0x22c)],'coin':symbolToCoin(_0x32436c),'symbol':_0x32436c,'side':_0x1a1f2b,'amount':_0x1c9f76,'filled':_0x1c9f76,'price':_0x4f2596});}),_0x11601c;}async function getAllOrders(_0x3a9f87,_0x41e9c6){const _0x1a1201=_0x339bda;let _0x43746b=[];while(_0x41e9c6<exchange['milliseconds']()){const _0xfa9041=0x1f4;try{const _0x2ddbf3=await exchange['fetchClosedOrders'](_0x3a9f87,_0x41e9c6,_0xfa9041);if(_0x2ddbf3[_0x1a1201(0x1ef)])_0x41e9c6=_0x2ddbf3[_0x2ddbf3[_0x1a1201(0x1ef)]-0x1][_0x1a1201(0x22b)]+0x1,_0x43746b=_0x43746b[_0x1a1201(0x148)](_0x2ddbf3);else break;}catch(_0x171d3a){await handleError(_0x171d3a,_0x1a1201(0x15d),_0x3a9f87);}}return _0x43746b;}async function validate24hChanges(){const _0x45f076=_0x339bda;for(const _0xb0cde1 of currentCoins){if(_0xb0cde1['coin']!=config['basecoin']){let _0x2c75c1;_0xb0cde1['reverse']?_0x2c75c1=formatResult((0x1/(global[_0x45f076(0x1c2)][_0xb0cde1[_0x45f076(0x257)]]/0x64+0x1)-0x1)*0x64,0x3):_0x2c75c1=global[_0x45f076(0x1c2)][_0xb0cde1[_0x45f076(0x257)]],_0x2c75c1<config[_0x45f076(0x151)]&&(logHistory('error',_0xb0cde1['coin']+_0x45f076(0x226)+_0x2c75c1+'%'),logHistory(_0x45f076(0x162),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x45f076(0x162),_0x45f076(0x15c)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4e73ba,_0x2824f3){const _0x41ba39=_0x339bda;if(!_0x4e73ba)return!![];const _0x446d55=_0x2824f3['split']('.'),_0x824a22=_0x4e73ba[_0x41ba39(0x245)]('.');for(var _0x5cdba8=0x0;_0x5cdba8<_0x824a22[_0x41ba39(0x1ef)];_0x5cdba8++){const _0x46941b=~~_0x824a22[_0x5cdba8],_0x1d732f=~~_0x446d55[_0x5cdba8];if(_0x46941b<_0x1d732f)return!![];if(_0x46941b>_0x1d732f)return![];}return![];}async function oneTimeMigration(){const _0x53293d=_0x339bda;let _0x2db784=dbLogs['get'](_0x53293d(0x289))[_0x53293d(0x1bf)]();if(isOlderVersion(_0x2db784,_0x53293d(0x1b0))){let _0xcdaa2e=[];const _0x50b53f=dbLogs[_0x53293d(0x281)](_0x53293d(0x196))[_0x53293d(0x1bf)]();_0x50b53f[_0x53293d(0x1e3)](_0x33211c=>{const _0x297520=_0x53293d;_0xcdaa2e[_0x297520(0x2af)]({'time':_0x33211c['time'],'type':_0x33211c[_0x297520(0x152)],'event':_0x33211c['event']});}),dbLogs[_0x53293d(0x281)](_0x53293d(0x196))[_0x53293d(0x270)](_0xcdaa2e)[_0x53293d(0x186)]();}let _0x5efa5c=dbConfig[_0x53293d(0x281)](_0x53293d(0x289))[_0x53293d(0x1bf)]();if(isOlderVersion(_0x5efa5c,'2.3.5')){let _0x319534=dbConfig['get']('bot')[_0x53293d(0x297)]({'botID':botID})[_0x53293d(0x1bf)]();if(_0x319534){let _0x5a5b71=[];_0x319534['portfolio']['forEach'](_0x9305db=>{const _0x2a53b6=_0x53293d;_0x5a5b71[_0x2a53b6(0x2af)]({'coin':_0x9305db[_0x2a53b6(0x11f)],'number':_0x9305db[_0x2a53b6(0x1c3)],'price':_0x9305db[_0x2a53b6(0x29b)]}),delete _0x9305db['startnumber'],delete _0x9305db['startprice'];});if(_0x5a5b71[_0x53293d(0x1ef)]!==0x0)fs[_0x53293d(0x218)](configbackuppath+(_0x53293d(0x16e)+botID+_0x53293d(0x1b3)),JSON[_0x53293d(0x202)](_0x5a5b71,null,0x4),function(_0x4f953f){if(_0x4f953f){}});const _0x3ed110=(_0x2ab8c5,_0x4b9446)=>{const _0x3d79ca=_0x53293d;let _0x6d3f93=[];_0x4b9446[_0x3d79ca(0x1e3)](_0xf26d87=>{const _0xb3cc0e=_0x3d79ca,_0x4fff1f=_0x2ab8c5[_0xb3cc0e(0x297)](_0x4e2f24=>_0x4e2f24[_0xb3cc0e(0x11f)]==_0xf26d87['coin']);if(!_0x4fff1f)_0x6d3f93['push'](_0xf26d87);});let _0xe7bee9=[];return _0x2ab8c5[_0x3d79ca(0x1e3)](_0x428a73=>{const _0x567853=_0x3d79ca,_0x49d600=_0x4b9446[_0x567853(0x297)](_0x551e3f=>_0x551e3f[_0x567853(0x11f)]==_0x428a73[_0x567853(0x11f)]);if(!_0x49d600||_0x49d600['number']==0x0&&_0x428a73[_0x567853(0x242)]!=0x0)_0xe7bee9[_0x567853(0x2af)](_0x428a73);}),{'missingDay1':_0x6d3f93,'notInDay2':_0xe7bee9};},_0x2c7c1c=dbPerformance['get'](_0x53293d(0x19b))[_0x53293d(0x2a4)]()['value']();if(_0x2c7c1c[_0x53293d(0x1ef)]>0x1){const {missingDay1:_0x5e66a5,notInDay2:_0x2cebb9}=_0x3ed110(_0x5a5b71,_0x2c7c1c[0x1][_0x53293d(0x1fa)]);_0x5a5b71=[..._0x5a5b71,..._0x5e66a5],_0x2cebb9['forEach'](_0x77bf7b=>{const _0x283dff=_0x53293d;let _0x49e40b=_0x5a5b71[_0x283dff(0x181)](_0xd5af0=>_0xd5af0[_0x283dff(0x11f)]==_0x77bf7b[_0x283dff(0x11f)]);_0x49e40b!=-0x1&&_0x5a5b71['splice'](_0x49e40b,0x1);});}_0x5a5b71[_0x53293d(0x179)]((_0x975889,_0x57df5b)=>_0x975889[_0x53293d(0x11f)]>_0x57df5b[_0x53293d(0x11f)]?0x1:_0x57df5b['coin']>_0x975889[_0x53293d(0x11f)]?-0x1:0x0);let _0x3ea0e4=[{'date':_0x319534[_0x53293d(0x1c5)],'changes':_0x5a5b71}];_0x2c7c1c[_0x53293d(0x1ef)]>0x2&&_0x2c7c1c['forEach']((_0x1618b5,_0x18716d)=>{const _0x3ca247=_0x53293d;if(_0x18716d>0x0&&_0x18716d<_0x2c7c1c[_0x3ca247(0x1ef)]-0x1){const {missingDay1:_0x3ece9f,notInDay2:_0xce9a2c}=_0x3ed110(_0x2c7c1c[_0x18716d][_0x3ca247(0x1fa)],_0x2c7c1c[_0x18716d+0x1][_0x3ca247(0x1fa)]);_0x5a5b71=[],(_0x3ece9f[_0x3ca247(0x1ef)]!=0x0||_0xce9a2c[_0x3ca247(0x1ef)]!=0x0)&&(_0x3ece9f['length']!=0x0&&_0x5a5b71[_0x3ca247(0x2af)](..._0x3ece9f),_0xce9a2c[_0x3ca247(0x1ef)]!=0x0&&(_0xce9a2c[_0x3ca247(0x1e3)](_0x3dcb8e=>{const _0x16c805=_0x3ca247;_0x3dcb8e['number']=-_0x3dcb8e[_0x16c805(0x242)];}),_0x5a5b71['push'](..._0xce9a2c)),_0x5a5b71[_0x3ca247(0x179)]((_0x3d4914,_0x19adf7)=>_0x3d4914['coin']>_0x19adf7['coin']?0x1:_0x19adf7[_0x3ca247(0x11f)]>_0x3d4914[_0x3ca247(0x11f)]?-0x1:0x0),_0x3ea0e4[_0x3ca247(0x2af)]({'date':_0x2c7c1c[_0x18716d+0x1][_0x3ca247(0x198)],'changes':_0x5a5b71}));}}),dbConfig[_0x53293d(0x281)](_0x53293d(0x122))[_0x53293d(0x297)]({'botID':botID})[_0x53293d(0x270)]({..._0x319534,'liquidity':_0x3ea0e4})[_0x53293d(0x186)]();}}if(isOlderVersion(_0x5efa5c,'2.6.0')){let _0x24bccd=dbConfig[_0x53293d(0x281)](_0x53293d(0x122))[_0x53293d(0x297)]({'botID':botID})['value']();if(_0x24bccd){const _0x5793c7=_0x24bccd[_0x53293d(0x28e)],_0x5b8141=_0x5793c7?capitalize(_0x5793c7):_0x53293d(0x1ca);dbConfig[_0x53293d(0x281)](_0x53293d(0x122))[_0x53293d(0x297)]({'botID':botID})[_0x53293d(0x270)]({'exchange':_0x5b8141})[_0x53293d(0x186)]();}}let _0x37c1ee=dbPerformance[_0x53293d(0x281)](_0x53293d(0x289))['value']();isOlderVersion(_0x37c1ee,_0x53293d(0x1b0))&&setStartDatePerformance();let _0x5d5635=dbCoinResults[_0x53293d(0x281)](_0x53293d(0x289))[_0x53293d(0x1bf)]();if(isOlderVersion(_0x5d5635,_0x53293d(0x205))){let _0x5f3702=dbCoinResults[_0x53293d(0x281)]('coins')[_0x53293d(0x1bf)]();if(_0x5f3702[_0x53293d(0x1ef)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x56b984=_0x339bda;dbConfig[_0x56b984(0x189)]('version',serverversion)[_0x56b984(0x186)](),dbPerformance[_0x56b984(0x189)](_0x56b984(0x289),serverversion)[_0x56b984(0x186)](),dbLogs[_0x56b984(0x189)](_0x56b984(0x289),serverversion)[_0x56b984(0x186)](),dbCoinResults[_0x56b984(0x189)](_0x56b984(0x289),serverversion)[_0x56b984(0x186)]();}function getConfiguration(_0x49bf13){const _0x3eea56=_0x339bda;let _0xc69c5f=dbConfig[_0x3eea56(0x281)]('bot')[_0x3eea56(0x297)]({'botID':_0x49bf13})[_0x3eea56(0x1bf)]();if(_0xc69c5f){let _0x41b1a4=![];typeof _0xc69c5f[_0x3eea56(0x1cf)]==_0x3eea56(0x16d)&&(_0xc69c5f={..._0xc69c5f,'threshold':Number(_0xc69c5f['threshold'])},_0x41b1a4=!![]),_0xc69c5f['change24h']==undefined&&(_0xc69c5f={..._0xc69c5f,'change24h':-0x14},_0x41b1a4=!![]),_0xc69c5f[_0x3eea56(0x13a)]==undefined&&(_0xc69c5f={..._0xc69c5f,'fiat':'USD'},_0x41b1a4=!![]),_0xc69c5f[_0x3eea56(0x252)]==undefined&&(_0xc69c5f={..._0xc69c5f,'onepagemode':settings[_0x3eea56(0x252)]},_0x41b1a4=!![]),_0xc69c5f[_0x3eea56(0x11c)]==undefined&&(_0xc69c5f={..._0xc69c5f,'colorscheme':'red_yellow_blue'},_0x41b1a4=!![]),_0xc69c5f['autoliquidity']==undefined&&(_0xc69c5f={..._0xc69c5f,'autoliquidity':!![]},_0x41b1a4=!![]),_0xc69c5f[_0x3eea56(0x299)]==undefined&&(_0xc69c5f={..._0xc69c5f,'marketcapApi':settings[_0x3eea56(0x299)]?!![]:![]},_0x41b1a4=!![]),_0xc69c5f[_0x3eea56(0x206)]==undefined&&(_0xc69c5f={..._0xc69c5f,'marketcapEnabled':![]},_0x41b1a4=!![]),_0x41b1a4&&(_0xc69c5f={'botID':_0xc69c5f[_0x3eea56(0x1bc)],'exchange':_0xc69c5f[_0x3eea56(0x28e)],'apiKey':_0xc69c5f[_0x3eea56(0x1d7)],'apiSecret':_0xc69c5f[_0x3eea56(0x230)],'apiPassword':_0xc69c5f[_0x3eea56(0x23d)],'basecoin':_0xc69c5f[_0x3eea56(0x1a0)],'botname':_0xc69c5f[_0x3eea56(0x239)],'showname':_0xc69c5f[_0x3eea56(0x283)],'threshold':_0xc69c5f['threshold'],'ordertype':_0xc69c5f[_0x3eea56(0x213)],'timeout':_0xc69c5f['timeout'],'fiat':_0xc69c5f[_0x3eea56(0x13a)],'startdate':_0xc69c5f[_0x3eea56(0x1c5)],'recreate':_0xc69c5f['recreate'],'timeshift':_0xc69c5f[_0x3eea56(0x17d)],'onepagemode':_0xc69c5f['onepagemode'],'headless':_0xc69c5f[_0x3eea56(0x143)],'cooldown':_0xc69c5f[_0x3eea56(0x1f9)],'change24h':_0xc69c5f[_0x3eea56(0x151)],'emojibuy':_0xc69c5f['emojibuy'],'emojisell':_0xc69c5f[_0x3eea56(0x271)],'colorscheme':_0xc69c5f['colorscheme'],'marketcapApi':_0xc69c5f[_0x3eea56(0x299)],'marketcapEnabled':_0xc69c5f[_0x3eea56(0x206)],'portfolio':_0xc69c5f[_0x3eea56(0x26c)],'autoliquidity':_0xc69c5f[_0x3eea56(0x1de)],'liquidity':_0xc69c5f[_0x3eea56(0x25f)],'openOrders':_0xc69c5f[_0x3eea56(0x11a)]},dbConfig['get'](_0x3eea56(0x122))['remove']()[_0x3eea56(0x186)](),dbConfig[_0x3eea56(0x281)](_0x3eea56(0x122))[_0x3eea56(0x2af)](_0xc69c5f)[_0x3eea56(0x186)]());}else _0xc69c5f={'botID':_0x49bf13,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3eea56(0x12c)+_0x49bf13,'showname':![],'threshold':0x3,'ordertype':_0x3eea56(0x188),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x3eea56(0x17d)],'onepagemode':settings[_0x3eea56(0x252)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3eea56(0x221),'marketcapApi':settings[_0x3eea56(0x299)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xc69c5f;}function emittedConfiguration(){const _0x47af2b=_0x339bda;let _0x5d0068;if(config[_0x47af2b(0x1d7)]=='')_0x5d0068={...config,'configstate':_0x47af2b(0x17c)};else config['apiKey']==_0x47af2b(0x135)?_0x5d0068={...config,'configstate':_0x47af2b(0x12e)}:(_0x5d0068={...config,'apiKey':_0x47af2b(0x24b),'apiSecret':_0x47af2b(0x24b)},config[_0x47af2b(0x23d)]&&(_0x5d0068[_0x47af2b(0x23d)]='************'));return _0x5d0068;}function getSettings(){const _0x323fe8=_0x339bda;return dbSettings[_0x323fe8(0x281)]('settings')[_0x323fe8(0x1bf)]();}function getSecure(){const _0x537bed=_0x339bda;return dbSecure[_0x537bed(0x281)](_0x537bed(0x208))[_0x537bed(0x1bf)]()||{};}function updateTimeshift(_0x1ac5d7){const _0x41241d=_0x339bda;let _0x5cdf9f=dbConfig[_0x41241d(0x281)](_0x41241d(0x122))[_0x41241d(0x297)]({'botID':botID})[_0x41241d(0x1bf)]();_0x5cdf9f&&dbConfig[_0x41241d(0x281)](_0x41241d(0x122))[_0x41241d(0x297)]({'botID':botID})[_0x41241d(0x270)]({'timeshift':_0x1ac5d7})[_0x41241d(0x186)](),config[_0x41241d(0x17d)]=_0x1ac5d7,proxyEmit(_0x41241d(0x253),emittedConfiguration());}function updateOnepagemode(_0x5177d5){const _0x4c6138=_0x339bda;let _0x264d6c=dbConfig[_0x4c6138(0x281)](_0x4c6138(0x122))[_0x4c6138(0x297)]({'botID':botID})[_0x4c6138(0x1bf)]();_0x264d6c&&dbConfig[_0x4c6138(0x281)]('bot')[_0x4c6138(0x297)]({'botID':botID})[_0x4c6138(0x270)]({'onepagemode':_0x5177d5})[_0x4c6138(0x186)](),config['onepagemode']=_0x5177d5,proxyEmit(_0x4c6138(0x253),emittedConfiguration());}function updateMarketcapApi(_0x482dd5){const _0x222785=_0x339bda,_0x2e91a3=_0x482dd5?!![]:![];let _0x5e20cf=dbConfig['get'](_0x222785(0x122))[_0x222785(0x297)]({'botID':botID})[_0x222785(0x1bf)]();_0x5e20cf&&dbConfig[_0x222785(0x281)](_0x222785(0x122))[_0x222785(0x297)]({'botID':botID})['assign']({'marketcapApi':_0x2e91a3})[_0x222785(0x186)](),config[_0x222785(0x299)]=_0x2e91a3,getMarketCap(),proxyEmit(_0x222785(0x253),emittedConfiguration());}async function storeConfiguration(_0x3439b7){const _0x410a1d=_0x339bda;logger['debug'](_0x410a1d(0x1a8));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x59f2fb=![],_0x50eaf8=![],_0x25b2f6=[];_0x3439b7[_0x410a1d(0x26c)]['forEach'](_0x1ed8b6=>{const _0x5d3f8d=_0x410a1d;if(!_0x1ed8b6[_0x5d3f8d(0x1fc)]&&_0x1ed8b6[_0x5d3f8d(0x11f)]!=_0x3439b7[_0x5d3f8d(0x1a0)])_0x25b2f6[_0x5d3f8d(0x2af)](_0x1ed8b6['symbol']);}),_0x25b2f6[_0x410a1d(0x1e3)](_0x21525e=>{const _0x4caa80=_0x410a1d,_0x3c080f=currentCoins[_0x4caa80(0x297)](_0x1f8645=>_0x1f8645[_0x4caa80(0x257)]==_0x21525e);!_0x3c080f&&(_0x59f2fb=!![]);}),currentCoins[_0x410a1d(0x1e3)](_0x310468=>{const _0x300d38=_0x410a1d;if(_0x310468[_0x300d38(0x11f)]!=config[_0x300d38(0x1a0)]){const _0x14008a=_0x25b2f6[_0x300d38(0x297)](_0x188969=>_0x188969==_0x310468['symbol']);!_0x14008a&&(_0x59f2fb=!![]);}}),_0x3439b7[_0x410a1d(0x26c)]['forEach'](_0x1a290a=>{const _0x463d2f=_0x410a1d,_0x6a2ac5=config[_0x463d2f(0x26c)]['find'](_0x1ae8d2=>_0x1ae8d2[_0x463d2f(0x11f)]==_0x1a290a[_0x463d2f(0x11f)]);if(_0x6a2ac5&&_0x1a290a['offset']!=_0x6a2ac5[_0x463d2f(0x247)])_0x50eaf8=!![];});let _0x48a807=dbConfig[_0x410a1d(0x281)]('bot')['find']({'botID':botID})['value']();_0x3439b7={..._0x3439b7,'apiKey':crypt[_0x410a1d(0x200)](secure[_0x410a1d(0x1b9)],_0x3439b7[_0x410a1d(0x1d7)])[_0x410a1d(0x1d8)],'apiSecret':crypt['decrypt'](secure[_0x410a1d(0x1b9)],_0x3439b7[_0x410a1d(0x230)])[_0x410a1d(0x1d8)]};_0x3439b7[_0x410a1d(0x23d)]&&(_0x3439b7[_0x410a1d(0x23d)]=crypt['decrypt'](secure[_0x410a1d(0x1b9)],_0x3439b7['apiPassword'])[_0x410a1d(0x1d8)]);let _0xec155=![];if(_0x48a807){_0x3439b7['apiKey']==_0x410a1d(0x24b)?_0x3439b7['apiKey']=config[_0x410a1d(0x1d7)]:_0xec155=!![];_0x3439b7[_0x410a1d(0x230)]==_0x410a1d(0x24b)?_0x3439b7[_0x410a1d(0x230)]=config[_0x410a1d(0x230)]:_0xec155=!![];if(_0x3439b7[_0x410a1d(0x23d)]==_0x410a1d(0x24b))_0x3439b7[_0x410a1d(0x23d)]=config[_0x410a1d(0x23d)];else{if(_0x3439b7['apiPassword'])_0xec155=!![];}dbConfig['get']('bot')[_0x410a1d(0x297)]({'botID':botID})['assign'](_0x3439b7)['write']();}else dbConfig[_0x410a1d(0x281)](_0x410a1d(0x122))['push'](_0x3439b7)[_0x410a1d(0x186)](),_0xec155=!![],process[_0x410a1d(0x144)]({'status':_0x410a1d(0x184),'live':_0x410a1d(0x13d)},_0xc3b29c=>{});process[_0x410a1d(0x144)]({'botname':_0x3439b7[_0x410a1d(0x239)]},_0xb1391e=>{}),config={..._0x3439b7},updateBotManager(),proxyEmit(_0x410a1d(0x1a1)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xec155)await reset(!![]);else _0x59f2fb||_0x50eaf8?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x410a1d(0x168)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x5e018a){const _0x23739f=_0x339bda,_0x1d21e9={...config,'headless':_0x5e018a[_0x23739f(0x143)]};let _0x317237=dbConfig[_0x23739f(0x281)](_0x23739f(0x122))[_0x23739f(0x297)]({'botID':botID})['value']();_0x317237&&dbConfig[_0x23739f(0x281)](_0x23739f(0x122))[_0x23739f(0x297)]({'botID':botID})[_0x23739f(0x270)](_0x1d21e9)['write'](),config={..._0x1d21e9},updateBotManager(),proxyEmit(_0x23739f(0x253),emittedConfiguration());}async function storeFiat(_0x1a65a8){const _0x184b1a=_0x339bda,_0x14b65a={...config,'fiat':_0x1a65a8};let _0x425eaf=dbConfig[_0x184b1a(0x281)](_0x184b1a(0x122))[_0x184b1a(0x297)]({'botID':botID})[_0x184b1a(0x1bf)]();_0x425eaf&&dbConfig[_0x184b1a(0x281)](_0x184b1a(0x122))[_0x184b1a(0x297)]({'botID':botID})[_0x184b1a(0x270)](_0x14b65a)['write'](),config={..._0x14b65a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x263c56=_0x339bda;logger[_0x263c56(0x2ab)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x263c56(0x224)](configpath,_0x263c56(0x172)+botID+'-events.json')))fs[_0x263c56(0x1cb)](path[_0x263c56(0x224)](configpath,_0x263c56(0x172)+botID+_0x263c56(0x1e2)));if(fs[_0x263c56(0x1ad)](path[_0x263c56(0x224)](configpath,_0x263c56(0x172)+botID+_0x263c56(0x1c1))))fs[_0x263c56(0x1cb)](path[_0x263c56(0x224)](configpath,_0x263c56(0x172)+botID+_0x263c56(0x1c1)));if(fs[_0x263c56(0x1ad)](path[_0x263c56(0x224)](configpath,_0x263c56(0x172)+botID+_0x263c56(0x280))))fs[_0x263c56(0x1cb)](path[_0x263c56(0x224)](configpath,'bot-'+botID+_0x263c56(0x280)));}catch(_0xf8c274){if(_0xf8c274)logger[_0x263c56(0x2ab)]('Error\x20while\x20deleting\x20files:\x20',_0xf8c274);}const _0x5aab21=getDate();let _0x59f682=[];currentCoins[_0x263c56(0x1e3)](_0x1876a7=>{const _0x1de059=_0x263c56;_0x59f682['push']({'coin':_0x1876a7['coin'],'number':_0x1876a7[_0x1de059(0x242)],'price':_0x1876a7[_0x1de059(0x209)]});});let _0x4262c5=dbConfig[_0x263c56(0x281)](_0x263c56(0x122))['find']({'botID':botID})[_0x263c56(0x1bf)]();_0x4262c5&&(dbConfig[_0x263c56(0x281)](_0x263c56(0x122))['find']({'botID':botID})[_0x263c56(0x270)]({'liquidity':[{'date':_0x5aab21,'changes':_0x59f682}]})[_0x263c56(0x186)](),config[_0x263c56(0x25f)]=[]),process[_0x263c56(0x144)]({'stop':_0x263c56(0x284)},_0x206176=>{});}function noslash(_0x3cd2db){const _0x2e3478=_0x339bda;return _0x3cd2db[_0x2e3478(0x1cc)]('/','');}function updateHighestFee(_0x19ffd0){const _0x45e037=_0x339bda;if(_0x19ffd0['reverse']){let _0x27c1d1={'filled':_0x19ffd0[_0x45e037(0x26d)]*_0x19ffd0[_0x45e037(0x137)],'amount':_0x19ffd0[_0x45e037(0x26d)]*_0x19ffd0['price'],'side':_0x19ffd0[_0x45e037(0x267)]==_0x45e037(0x21d)?_0x45e037(0x251):_0x45e037(0x21d),'price':0x1/_0x19ffd0[_0x45e037(0x137)]};_0x19ffd0={..._0x19ffd0,..._0x27c1d1};}const _0x49fbbe=defaultFee*_0x19ffd0['filled']*_0x19ffd0[_0x45e037(0x137)];lastFees[_0x45e037(0x203)][_0x45e037(0x1ef)]===0x14&&lastFees[_0x45e037(0x203)][_0x45e037(0x22a)](),lastFees[_0x45e037(0x203)][_0x45e037(0x2af)](_0x49fbbe),lastFees[_0x45e037(0x1c8)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x2bf08c){const _0x180754=_0x339bda;logger['debug'](_0x180754(0x13e)+_0x2bf08c[_0x180754(0x257)]+_0x180754(0x262)+_0x2bf08c[_0x180754(0x238)]+'\x20|\x20'+_0x2bf08c['filled']+'\x20/\x20'+_0x2bf08c['amount']+_0x180754(0x262)+_0x2bf08c['id']);let _0x1d4903=_0x2bf08c[_0x180754(0x238)],_0xf592a2=![];currentCoins[_0x180754(0x1e3)](_0x21d6ef=>{const _0x252fdc=_0x180754;_0x21d6ef[_0x252fdc(0x257)]==_0x2bf08c[_0x252fdc(0x257)]&&(_0xf592a2=!![]);});if(!_0xf592a2)return;const _0x38a0e9=currentCoins[_0x180754(0x297)](_0x58ac48=>_0x58ac48[_0x180754(0x257)]==_0x2bf08c[_0x180754(0x257)]),_0x276755=_0x1a3585=>{const _0x16285a=_0x180754;if(_0x38a0e9)_0x38a0e9[_0x16285a(0x269)]=_0x1a3585;};if(_0x1d4903==_0x180754(0x124))_0x276755(_0x180754(0x124));else{if(_0x1d4903==_0x180754(0x111)){_0x276755('canceled');const _0x1b7987=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1b7987,await getOpenOrders(),handleOpenOrders();}else{if(_0x1d4903==_0x180754(0x127)){let _0x3bc36d=![];if(lastOrders)for(const _0x1947a2 of lastOrders){const _0x5005a3=0xc8,_0x230551=0x1388;let _0x44a6af=0x0;while(!_0x1947a2[_0x180754(0x298)]&&_0x44a6af*_0x5005a3<_0x230551){_0x44a6af++,await sleep(_0x5005a3);}if(_0x44a6af>0x0)logger['debug']('Waited\x20'+_0x44a6af*_0x5005a3/0x3e8+_0x180754(0x2a5));if(_0x1947a2[_0x180754(0x298)]==_0x2bf08c['id']){logger[_0x180754(0x168)](_0x180754(0x13f)+_0x2bf08c['id']),_0x3bc36d=!![];if(_0x1947a2['filled']==0x0){logger[_0x180754(0x168)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x2bf08c['id']);if(_0x2bf08c[_0x180754(0x1f8)])_0x1947a2[_0x180754(0x137)]=_0x2bf08c[_0x180754(0x1f8)];else{if(_0x2bf08c[_0x180754(0x137)])_0x1947a2[_0x180754(0x137)]=_0x2bf08c[_0x180754(0x137)];else{}}_0x1947a2[_0x180754(0x26d)]=_0x2bf08c['filled'],updateHighestFee(_0x1947a2),_0x276755(_0x180754(0x26d)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x3000e6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3000e6;}_0x1947a2[_0x180754(0x272)]={'currency':_0x2bf08c[_0x180754(0x272)]?_0x2bf08c['fee'][_0x180754(0x25b)]:null,'cost':_0x2bf08c[_0x180754(0x272)]?_0x2bf08c[_0x180754(0x272)]['cost']:0x0},await updateCoinResults(_0x1947a2);}}}if(!_0x3bc36d){logger['debug'](_0x180754(0x161)+_0x2bf08c['id']),_0x276755('filled');const _0x350794=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x350794,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x5e4ff4=JSON[_0x180754(0x22e)](lastBalances[_0x180754(0x26c)]);const _0x136940=_0x5e4ff4[_0x180754(0x297)](_0x364090=>_0x364090['symbol']==_0x2bf08c[_0x180754(0x257)]);if(_0x136940){if(_0x1d4903==_0x180754(0x124))_0x136940['orderstatus']=_0x136940[_0x180754(0x269)]==_0x180754(0x26d)?'filled':_0x180754(0x124);else{if(_0x1d4903==_0x180754(0x111))_0x136940['orderstatus']=_0x136940['orderstatus']==_0x180754(0x26d)?_0x180754(0x26d):'canceled';else _0x1d4903==_0x180754(0x127)&&(_0x136940['orderstatus']=_0x180754(0x26d));}}lastBalances={...lastBalances,'portfolio':JSON[_0x180754(0x202)](_0x5e4ff4)},proxyEmit(_0x180754(0x275),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3e7c15=_0x339bda;await getOpenOrders();let _0x2eaec2=![];currentCoins[_0x3e7c15(0x1e3)](_0x805159=>{const _0xbfce5e=_0x3e7c15;_0x2eaec2=allOpenOrders[_0xbfce5e(0x297)](_0x2ecd02=>_0x2ecd02[_0xbfce5e(0x257)]==_0x805159['symbol']),_0x805159[_0xbfce5e(0x269)]=_0x2eaec2?'open':_0xbfce5e(0x182);});}async function getCoins(_0x21d99f=0x0,_0x4dea10=!![],_0x2165ce=config['basecoin']){const _0x50d166=_0x339bda;let _0x343dd6,_0x4707d6=[],_0x2aa1c1=[],_0x2de1f7=[];if(_0x21d99f)await sleep(_0x21d99f);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x343dd6=await exchange[_0x50d166(0x167)](),mybalances=_0x343dd6[_0x50d166(0x214)];for(const [_0x24f6f6,_0x59c100]of Object[_0x50d166(0x264)](mybalances)){_0x2de1f7[_0x50d166(0x2af)](_0x24f6f6);}config['portfolio']['forEach'](_0x4418bd=>{const _0x5c78f0=_0x50d166;!_0x2de1f7[_0x5c78f0(0x1b4)](_0x4418bd[_0x5c78f0(0x11f)])&&(mybalances[_0x4418bd['coin']]=0x0);});if(_0x2165ce=='')for(const [_0x11a345,_0x4e25d6]of Object['entries'](mybalances)){_0x4e25d6!=0x0&&_0x4707d6[_0x50d166(0x2af)]({'coin':_0x11a345});}else for(const [_0x315d9e,_0x280a8f]of Object['entries'](mybalances)){const _0x31000d=config[_0x50d166(0x26c)]['find'](_0x125a8a=>_0x125a8a['coin']==_0x315d9e),_0x2b5352=_0x315d9e+'/'+_0x2165ce,_0x32eb93=_0x2165ce+'/'+_0x315d9e,_0x100af6=currentCoins['find'](_0x1387c=>_0x1387c[_0x50d166(0x11f)]==_0x315d9e);if((_0x280a8f!=0x0||_0x31000d)&&(allSymbols[_0x50d166(0x1b4)](_0x2b5352)||_0x315d9e==_0x2165ce))_0x100af6?_0x4707d6[_0x50d166(0x2af)]({..._0x100af6,'number':Math[_0x50d166(0x1dd)](_0x280a8f+(_0x31000d&&_0x31000d['offset']||0x0),0x0)}):_0x4707d6[_0x50d166(0x2af)]({'coin':_0x315d9e,'symbol':_0x2b5352,'reverse':![],'number':Math[_0x50d166(0x1dd)](_0x280a8f+(_0x31000d&&_0x31000d[_0x50d166(0x247)]||0x0),0x0),'orderstatus':_0x50d166(0x182)});else{if((_0x280a8f!=0x0||_0x31000d)&&allSymbols['includes'](_0x32eb93))_0x100af6?_0x4707d6[_0x50d166(0x2af)]({..._0x100af6,'number':Math[_0x50d166(0x1dd)](_0x280a8f+(_0x31000d&&_0x31000d[_0x50d166(0x247)]||0x0),0x0)}):_0x4707d6[_0x50d166(0x2af)]({'coin':_0x315d9e,'symbol':_0x32eb93,'reverse':!![],'number':Math[_0x50d166(0x1dd)](_0x280a8f+(_0x31000d&&_0x31000d[_0x50d166(0x247)]||0x0),0x0),'orderstatus':'none'});else _0x31000d&&_0x4707d6[_0x50d166(0x2af)]({'coin':_0x31000d[_0x50d166(0x11f)],'symbol':_0x31000d[_0x50d166(0x257)],'reverse':_0x31000d[_0x50d166(0x25a)],'number':0x0,'orderstatus':'none'});}}}catch(_0x571383){if(!_0x4dea10)handleErrorNoStop(_0x571383,_0x50d166(0x142));else await handleError(_0x571383,_0x50d166(0x142));}return _0x4707d6[_0x50d166(0x179)]((_0x2100ec,_0x2e7c99)=>_0x2100ec[_0x50d166(0x1d2)]<_0x2e7c99[_0x50d166(0x1d2)]?0x1:_0x2e7c99[_0x50d166(0x1d2)]<_0x2100ec['delta']?-0x1:0x0),_0x2aa1c1=cloneDeep(_0x4707d6),_0x4707d6=_0x4707d6['filter'](_0xcd0bb9=>{const _0x239612=_0x50d166,_0x16c705=config[_0x239612(0x26c)][_0x239612(0x297)](_0x3596cb=>_0x3596cb[_0x239612(0x11f)]==_0xcd0bb9[_0x239612(0x11f)]);return _0x16c705&&!_0x16c705[_0x239612(0x1fc)];}),[_0x4707d6,_0x2aa1c1];}async function getCoinNumber(_0x540700){const _0x29124c=_0x339bda;let _0x160397;try{const _0x2ef4cd=await exchange[_0x29124c(0x167)]();_0x160397=_0x2ef4cd[_0x29124c(0x214)][_0x540700];}catch(_0x1eb969){await handleError(_0x1eb969,_0x29124c(0x116));}return _0x160397;}async function getOpenOrders(){const _0x3c0a4f=_0x339bda;let _0x2c3c5a;allOpenOrders=[];try{for(const _0x2cd777 of config['portfolio']){!_0x2cd777['excluded']&&_0x2cd777[_0x3c0a4f(0x11f)]!=config[_0x3c0a4f(0x1a0)]&&(_0x2c3c5a=await exchange[_0x3c0a4f(0x1f2)](_0x2cd777[_0x3c0a4f(0x257)]),_0x2c3c5a[_0x3c0a4f(0x1ef)]>0x0&&allOpenOrders[_0x3c0a4f(0x2af)](_0x2c3c5a[0x0]));}}catch(_0xfcfcc3){await handleError(_0xfcfcc3,'getOpenOrders()');}}async function handleOpenOrders(_0x6785cd=0x0){const _0x42bedf=_0x339bda;allOpenOrders[_0x42bedf(0x1ef)]==0x0&&lockOrders==ORDERS[_0x42bedf(0x21f)]&&allOrdersPlaced&&(_0x6785cd==0x0?(logger['debug'](_0x42bedf(0x123)),_0x6785cd++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1582da){const _0x3476ef=_0x339bda,_0x456a35=ccxt['pro'][_0x1582da['exchange'][_0x3476ef(0x156)]()],_0x9a1626=new _0x456a35({'apiKey':_0x1582da[_0x3476ef(0x1d7)],'secret':_0x1582da[_0x3476ef(0x230)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1582da[_0x3476ef(0x23d)])_0x9a1626[_0x3476ef(0x1a4)]=_0x1582da[_0x3476ef(0x23d)];try{await _0x9a1626[_0x3476ef(0x192)]();}catch(_0x19b135){throw _0x19b135;}}function cloneDeep(_0x4c4a36){const _0x1d9853=_0x339bda;return JSON['parse'](JSON[_0x1d9853(0x202)](_0x4c4a36));}async function getPortfolio(_0x27fc99){const _0x250aac=_0x339bda;let _0x7d3bf=[],_0x3fe76e=[],_0x179836=[],_0x4a42e;if(_0x27fc99[_0x250aac(0x1d7)]!=='************'||_0x27fc99[_0x250aac(0x230)]!=='************'||_0x27fc99[_0x250aac(0x23d)]&&_0x27fc99['apiPassword']!==_0x250aac(0x24b)){if(config['exchange']){if(_0x27fc99['apiKey']=='************')_0x27fc99['apiKey']=config['apiKey'];if(_0x27fc99[_0x250aac(0x230)]==_0x250aac(0x24b))_0x27fc99[_0x250aac(0x230)]=config['apiSecret'];if(_0x27fc99['apiPassword']=='************')_0x27fc99['apiPassword']=config[_0x250aac(0x23d)];try{await testAPI(_0x27fc99);}catch(_0x5b6421){if(_0x5b6421['toString']()['includes'](_0x250aac(0x157))){logger[_0x250aac(0x168)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x250aac(0x26c),![]);return;}else{handleError(_0x5b6421,_0x250aac(0x23e));return;}}}await initExchange(_0x27fc99[_0x250aac(0x28e)],_0x27fc99[_0x250aac(0x1d7)],_0x27fc99['apiSecret'],_0x27fc99[_0x250aac(0x23d)]);try{await loadSymbols();}catch(_0x56979f){if(_0x56979f[_0x250aac(0x10f)]()[_0x250aac(0x1b4)](_0x250aac(0x157))){proxyEmit(_0x250aac(0x26c),![]);return;}else{handleError(_0x56979f,_0x250aac(0x219));return;}}const _0x571590=await getCoins(0x0,![],_0x27fc99[_0x250aac(0x1a0)]);_0x179836=cloneDeep(_0x571590[0x1]);}else{const _0x5468bc=await getCoins();_0x179836=cloneDeep(_0x5468bc[0x1]);}if(_0x27fc99['basecoin']=='')proxyEmit(_0x250aac(0x26c),_0x179836);else{_0x179836[_0x250aac(0x1e3)](_0x4c614e=>{const _0x25d949=_0x250aac;if(_0x4c614e['coin']!=_0x27fc99[_0x25d949(0x1a0)]&&allSymbols['includes'](_0x4c614e[_0x25d949(0x257)]))_0x7d3bf[_0x25d949(0x2af)](_0x4c614e[_0x25d949(0x257)]);});if(_0x7d3bf['length']==0x0)logHistory(_0x250aac(0x162),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x3fe76e=await getTickers(_0x7d3bf);}catch(_0x3c0c8b){if(_0x3c0c8b[_0x250aac(0x10f)]()[_0x250aac(0x1b4)](_0x250aac(0x157))){proxyEmit(_0x250aac(0x26c),![]);return;}else handleError(_0x3c0c8b,_0x250aac(0x273));}_0x179836[_0x250aac(0x1e3)](_0x27fe02=>{const _0x4a45b8=_0x250aac;_0x27fe02[_0x4a45b8(0x11f)]!=_0x27fc99[_0x4a45b8(0x1a0)]?_0x3fe76e[_0x27fe02[_0x4a45b8(0x257)]]?_0x4a42e=_0x27fe02[_0x4a45b8(0x25a)]?0x1/_0x3fe76e[_0x27fe02['symbol']][_0x4a45b8(0x209)]:_0x3fe76e[_0x27fe02[_0x4a45b8(0x257)]]['last']:_0x4a42e=0x0:_0x4a42e=0x1,_0x27fe02[_0x4a45b8(0x137)]=formatResult(_0x4a42e,0x8);}),await getMarketCap(_0x179836),proxyEmit('portfolio',_0x179836);}}}function truncateTradeAmount(_0x2b02b1,_0x1bc398){const _0x23650b=_0x339bda;let _0x38fdfb=0x0;try{_0x38fdfb=exchange[_0x23650b(0x217)](_0x2b02b1,_0x1bc398);}catch(_0x1a4742){}return _0x38fdfb;}function checkMinimums(_0x36e8a0){const _0x1c8c4f=_0x339bda;let _0x2ac6f9=!![];const _0x45ba37=!_0x36e8a0[_0x1c8c4f(0x25a)]?markets[_0x36e8a0[_0x1c8c4f(0x257)]]['limits'][_0x1c8c4f(0x225)][_0x1c8c4f(0x248)]:markets[_0x36e8a0['symbol']][_0x1c8c4f(0x23c)][_0x1c8c4f(0x158)][_0x1c8c4f(0x248)],_0x3bde91=!_0x36e8a0['reverse']?markets[_0x36e8a0['symbol']]['limits']['cost'][_0x1c8c4f(0x248)]:markets[_0x36e8a0[_0x1c8c4f(0x257)]][_0x1c8c4f(0x23c)]['amount'][_0x1c8c4f(0x248)],_0x431840=truncateTradeAmount(_0x36e8a0[_0x1c8c4f(0x257)],_0x36e8a0[_0x1c8c4f(0x1bd)]);_0x36e8a0[_0x1c8c4f(0x1bd)]=_0x431840;if(Math[_0x1c8c4f(0x265)](_0x431840)<_0x45ba37)_0x2ac6f9=![];if(Math[_0x1c8c4f(0x265)](_0x431840)*_0x36e8a0[_0x1c8c4f(0x209)]<_0x3bde91)_0x2ac6f9=![];if(_0x36e8a0[_0x1c8c4f(0x267)]==_0x1c8c4f(0x21d)){let _0xa07439=config['portfolio'][_0x1c8c4f(0x297)](_0x3b6081=>_0x3b6081[_0x1c8c4f(0x11f)]==_0x36e8a0['coin']);if(_0xa07439[_0x1c8c4f(0x247)]>0x0){if(Math[_0x1c8c4f(0x265)](_0x431840)>_0x36e8a0[_0x1c8c4f(0x242)]-_0xa07439[_0x1c8c4f(0x247)])_0x2ac6f9=![];}else{if(Math['abs'](_0x431840)>_0x36e8a0['number'])_0x2ac6f9=![];}}if(_0x36e8a0[_0x1c8c4f(0x267)]==_0x1c8c4f(0x251)){let _0x30fb74=config[_0x1c8c4f(0x26c)]['find'](_0x5c1c22=>_0x5c1c22['coin']==config[_0x1c8c4f(0x1a0)]),_0xe744c3=currentCoins[_0x1c8c4f(0x297)](_0x5beaed=>_0x5beaed[_0x1c8c4f(0x11f)]==config[_0x1c8c4f(0x1a0)]);if(_0x30fb74[_0x1c8c4f(0x247)]>0x0){if(Math[_0x1c8c4f(0x265)](_0x431840)*_0x36e8a0[_0x1c8c4f(0x209)]>_0xe744c3['number']-_0x30fb74['offset'])_0x2ac6f9=![];}else{if(Math[_0x1c8c4f(0x265)](_0x431840)*_0x36e8a0[_0x1c8c4f(0x209)]>_0xe744c3[_0x1c8c4f(0x242)])_0x2ac6f9=![];}}return _0x2ac6f9;}async function getBalances(_0x25a2ac=!![]){const _0x575887=_0x339bda;let _0x4eb717=0x0,_0x3020ef;const _0x2146bc=config[_0x575887(0x1cf)];if(config[_0x575887(0x143)]&&config[_0x575887(0x151)]<0x0)await validate24hChanges();currentCoins[_0x575887(0x1e3)](_0x4ba460=>{const _0x45b2d4=_0x575887;if(_0x4ba460['coin']!=config[_0x45b2d4(0x1a0)]){let _0x378048=global[_0x45b2d4(0x244)][noslash(_0x4ba460['symbol'])];_0x3020ef=_0x4ba460[_0x45b2d4(0x25a)]?0x1/_0x378048:_0x378048;}else _0x3020ef=0x1;let _0x5e85d1=_0x4ba460[_0x45b2d4(0x242)]*_0x3020ef;_0x4eb717+=_0x5e85d1,_0x4ba460[_0x45b2d4(0x209)]=formatResult(Number(_0x3020ef),0x8),_0x4ba460[_0x45b2d4(0x1bf)]=_0x5e85d1;}),currentCoins['forEach'](_0x4609bf=>{const _0x35c049=_0x575887;let _0x1c9569=config[_0x35c049(0x26c)][_0x35c049(0x297)](_0x2c536a=>_0x2c536a[_0x35c049(0x11f)]==_0x4609bf[_0x35c049(0x11f)]),_0x36c599=Number(_0x1c9569['distribution']),_0x6398d1=_0x4609bf[_0x35c049(0x1bf)]/_0x4eb717*0x64,_0x114a89=_0x36c599*_0x4eb717/0x64/_0x4609bf[_0x35c049(0x209)]-_0x4609bf[_0x35c049(0x242)];_0x4609bf[_0x35c049(0x223)]=formatResult(_0x6398d1,0x3),_0x4609bf[_0x35c049(0x204)]=formatResult(_0x36c599,0x3),_0x4609bf[_0x35c049(0x1bd)]=formatResult(_0x114a89,0x8),_0x4609bf[_0x35c049(0x267)]='',_0x4609bf['valid']=![];if(_0x4609bf[_0x35c049(0x11f)]!=config[_0x35c049(0x1a0)]){if(_0x4609bf['distribution']>_0x36c599)_0x4609bf['side']='sell',_0x4609bf['valid']=checkMinimums(_0x4609bf);else _0x4609bf[_0x35c049(0x223)]<_0x36c599&&(_0x4609bf[_0x35c049(0x267)]='buy',_0x4609bf[_0x35c049(0x243)]=checkMinimums(_0x4609bf));}_0x4609bf[_0x35c049(0x1d2)]=_0x4609bf[_0x35c049(0x223)]/_0x4609bf['target']-0x1;if(_0x4609bf[_0x35c049(0x269)]==_0x35c049(0x26d)||_0x4609bf[_0x35c049(0x269)]==_0x35c049(0x111))_0x4609bf[_0x35c049(0x269)]=_0x35c049(0x182);}),currentCoins[_0x575887(0x179)]((_0x42128c,_0x4b7192)=>_0x42128c[_0x575887(0x1d2)]<_0x4b7192[_0x575887(0x1d2)]?0x1:_0x4b7192[_0x575887(0x1d2)]<_0x42128c[_0x575887(0x1d2)]?-0x1:0x0);const _0x553817=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x553817[_0x575887(0x15e)],'usd':_0x553817[_0x575887(0x236)],'portfolio':JSON[_0x575887(0x202)](currentCoins),'threshold':_0x2146bc},proxyEmit(_0x575887(0x275),{'serverversion':serverversion,'balances':lastBalances});if(_0x25a2ac){if(config[_0x575887(0x143)])headlessMode({'portfolio':currentCoins,'threshold':_0x2146bc});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2146bc});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x39c8c7=getNormalizedPerformance();getStartingBalances(_0x39c8c7),emitPerformance(_0x39c8c7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x288dcf=getNormalizedPerformance();emitPerformance(_0x288dcf),getStartingBalances(_0x288dcf),logger[_0x575887(0x168)](_0x575887(0x1d9));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x206a91=_0x339bda;if(!lastBalances)return;let _0x5df7f9=[],_0x27ecd1,_0x335473=JSON[_0x206a91(0x22e)](lastBalances['portfolio']);_0x335473[_0x206a91(0x179)]((_0x257aa4,_0x970b38)=>_0x257aa4[_0x206a91(0x11f)]>_0x970b38[_0x206a91(0x11f)]?0x1:_0x970b38[_0x206a91(0x11f)]>_0x257aa4['coin']?-0x1:0x0),_0x335473['forEach'](_0xd301b9=>{const _0x1afae9=_0x206a91;let _0x363378={'coin':_0xd301b9['coin'],'number':_0xd301b9['number'],'price':_0xd301b9['last']};_0x5df7f9[_0x1afae9(0x2af)](_0x363378);});const _0x20c2cf=await getFiat();_0x27ecd1={'date':lastBalances[_0x206a91(0x22c)]['split']('\x20')[0x0],'eur':_0x20c2cf[_0x206a91(0x15e)],'usd':_0x20c2cf['usd'],'coins':_0x5df7f9};let _0x32df98=dbPerformance['get'](_0x206a91(0x19b))[_0x206a91(0x297)]({'date':_0x27ecd1[_0x206a91(0x198)]})['value']();_0x32df98?_0x27ecd1[_0x206a91(0x198)]!=config[_0x206a91(0x1c5)]&&dbPerformance['get'](_0x206a91(0x19b))['find']({'date':_0x27ecd1['date']})[_0x206a91(0x270)](_0x27ecd1)[_0x206a91(0x186)]():dbPerformance[_0x206a91(0x281)]('data')[_0x206a91(0x2af)](_0x27ecd1)[_0x206a91(0x186)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x37c5b8=_0x339bda;let _0x335550=[];if(dbPerformance['has'](_0x37c5b8(0x19b))[_0x37c5b8(0x1bf)]()){let _0x358ea0=dbPerformance[_0x37c5b8(0x281)](_0x37c5b8(0x19b))[_0x37c5b8(0x2a4)]()['filter'](_0x17b163=>{const _0x14bdf7=_0x37c5b8;if(_0x17b163[_0x14bdf7(0x1fa)]['length']==0x0)return![];else return!![];})[_0x37c5b8(0x237)](_0x37c5b8(0x198))['value'](),_0x490aa7=[...config[_0x37c5b8(0x25f)]];_0x490aa7[_0x37c5b8(0x179)]((_0x325b80,_0xbb8c82)=>_0x325b80[_0x37c5b8(0x198)]>_0xbb8c82[_0x37c5b8(0x198)]?-0x1:_0xbb8c82[_0x37c5b8(0x198)]>_0x325b80['date']?0x1:0x0);let _0x31553b=0x1,_0x557495=[],_0x17748d=0x0;_0x358ea0[_0x37c5b8(0x133)]()[_0x37c5b8(0x25a)]()['forEach']((_0x261584,_0x45fdfb)=>{const _0x434156=_0x37c5b8;if(_0x490aa7[_0x17748d]){if(_0x358ea0[_0x358ea0[_0x434156(0x1ef)]-_0x45fdfb]&&_0x490aa7[_0x17748d]['date']==_0x358ea0[_0x358ea0['length']-_0x45fdfb][_0x434156(0x198)]){if(_0x45fdfb<_0x358ea0[_0x434156(0x1ef)]){let _0x5c822f=0x0,_0x3af70c=0x0;_0x358ea0[_0x358ea0[_0x434156(0x1ef)]-_0x45fdfb][_0x434156(0x1fa)]['forEach'](_0x47844e=>{const _0x3e0ce4=_0x434156;_0x3af70c+=_0x47844e[_0x3e0ce4(0x242)]*_0x47844e[_0x3e0ce4(0x137)];}),_0x490aa7[_0x17748d][_0x434156(0x286)][_0x434156(0x1e3)](_0x3ee922=>{const _0x144e4d=_0x434156;_0x5c822f+=_0x3ee922['number']*_0x3ee922[_0x144e4d(0x137)];}),_0x31553b*=_0x5c822f/(_0x3af70c-_0x5c822f)+0x1;}_0x17748d++;}}let _0x37753c=0x0;_0x261584[_0x434156(0x1fa)][_0x434156(0x1e3)](_0x266471=>{const _0x4897d7=_0x434156;_0x37753c+=_0x266471[_0x4897d7(0x242)]*_0x266471[_0x4897d7(0x137)];}),_0x557495[_0x358ea0[_0x434156(0x1ef)]-_0x45fdfb-0x1]=_0x37753c*(_0x31553b-0x1);});let _0x4ce4f8=[];_0x490aa7=[...config[_0x37c5b8(0x25f)]]||[];let _0x2c1ead=0x0;_0x17748d=0x0,_0x358ea0['forEach']((_0xabdad2,_0x407cdf)=>{const _0x1bd135=_0x37c5b8;if(_0x490aa7[_0x17748d]){const _0x44e78b=fns[_0x1bd135(0x22e)](_0x490aa7[_0x17748d][_0x1bd135(0x198)],_0x1bd135(0x1ea),new Date()),_0x25e3b0=fns[_0x1bd135(0x22e)](_0xabdad2[_0x1bd135(0x198)],_0x1bd135(0x1ea),new Date());if(fns[_0x1bd135(0x28c)](_0x44e78b,_0x25e3b0)){let _0x5eb1c7=0x0;_0x490aa7[_0x17748d][_0x1bd135(0x286)][_0x1bd135(0x1e3)](_0x395565=>{const _0x32c97d=_0x1bd135;!_0x4ce4f8[_0x395565[_0x32c97d(0x11f)]]?_0x4ce4f8[_0x395565[_0x32c97d(0x11f)]]=_0x395565['number']:(_0x5eb1c7=_0x4ce4f8[_0x395565[_0x32c97d(0x11f)]],_0x4ce4f8[_0x395565['coin']]+=_0x395565[_0x32c97d(0x242)]);const _0x39295c=_0xabdad2[_0x32c97d(0x1fa)][_0x32c97d(0x297)](_0x2af4af=>_0x2af4af[_0x32c97d(0x11f)]==_0x395565[_0x32c97d(0x11f)]);(!_0x39295c||_0x39295c['number']==0x0)&&(_0x2c1ead+=(-_0x395565[_0x32c97d(0x242)]-_0x5eb1c7)*_0x395565[_0x32c97d(0x137)]);}),_0x17748d++;}}_0xabdad2[_0x1bd135(0x1fa)][_0x1bd135(0x1e3)]((_0xcb8bf6,_0x2b1303)=>{const _0x22a144=_0x1bd135;_0x4ce4f8[_0xcb8bf6[_0x22a144(0x11f)]]&&(_0xcb8bf6[_0x22a144(0x17c)]=_0x4ce4f8[_0xcb8bf6[_0x22a144(0x11f)]]);}),_0x335550[_0x1bd135(0x2af)]({'date':_0xabdad2[_0x1bd135(0x198)],'eur':_0xabdad2['eur'],'usd':_0xabdad2['usd'],'offset':_0x557495[_0x407cdf],'netoffset':_0x2c1ead,'coins':_0xabdad2['coins']});});}return _0x335550;}function emitPerformance(_0x5d160){const _0x154500=_0x339bda;_0x5d160[_0x154500(0x1ef)]!==0x0?(proxyEmit(_0x154500(0x1c4),_0x5d160),lastPerformanceEmitted=getDate()):proxyEmit(_0x154500(0x1c4),[]);}function getPerf(_0x5e62b2,_0x41f182){const _0x1189dc=_0x339bda;let _0x95bbc6=0x0,_0x43ff5f=0x0,_0x387539=0x0;_0x5e62b2[_0x1189dc(0x1fa)][_0x1189dc(0x1e3)](_0x81cc89=>{const _0x2d8335=_0x1189dc;_0x95bbc6+=_0x81cc89[_0x2d8335(0x242)]*_0x81cc89[_0x2d8335(0x137)];});_0x41f182&&(_0x95bbc6+=_0x5e62b2[_0x1189dc(0x247)]);if(config[_0x1189dc(0x1a0)]==='BTC'||config[_0x1189dc(0x1a0)]==='ETH'||config['basecoin']===_0x1189dc(0x25d))_0x43ff5f=_0x95bbc6*_0x5e62b2[_0x1189dc(0x15e)],_0x387539=_0x95bbc6*_0x5e62b2['usd'];else{if(usdBasecoins[_0x1189dc(0x1b4)](config[_0x1189dc(0x1a0)]))_0x43ff5f=_0x95bbc6*_0x5e62b2[_0x1189dc(0x15e)]/_0x5e62b2['usd'],_0x387539=_0x95bbc6;else config['basecoin']===_0x1189dc(0x1a2)&&(_0x43ff5f=_0x95bbc6,_0x387539=_0x95bbc6*_0x5e62b2[_0x1189dc(0x236)]/_0x5e62b2[_0x1189dc(0x15e)]);}return[_0x95bbc6,_0x43ff5f,_0x387539];}function getKPIs(_0x3f6ca5,_0x3bb974=_0x339bda(0x1a2)){const _0xce76e3=_0x339bda,_0x9d30f4=config[_0xce76e3(0x1a0)],_0x4a5646=lastBalances,_0x293c07=currentCoins,_0x589651=getNormalizedPerformance(),_0x5528a1=_0x3f6ca5===_0xce76e3(0x1a0)?_0x9d30f4:_0x3f6ca5===_0xce76e3(0x13a)||_0x3f6ca5===_0xce76e3(0x194)?_0x3bb974:'Net\x20'+_0x9d30f4,_0x2f8a46=_0x3f6ca5===_0xce76e3(0x19a)?_0xce76e3(0x14f):_0x3f6ca5===_0xce76e3(0x194)?_0xce76e3(0x14f):_0x5528a1+_0xce76e3(0x215),_0x40ebed=_0x3f6ca5===_0xce76e3(0x19a)||_0x3f6ca5===_0xce76e3(0x194)?_0xce76e3(0x14f):_0x5528a1+'\x20change';let _0x1251de=0x0;_0x293c07[_0xce76e3(0x1e3)](_0x190e16=>{const _0x5c2348=_0xce76e3;_0x1251de+=_0x190e16[_0x5c2348(0x242)]*_0x190e16[_0x5c2348(0x209)];});if(_0x3f6ca5===_0xce76e3(0x13a)||_0x3f6ca5===_0xce76e3(0x194)){if(_0x9d30f4===_0xce76e3(0x1d6)||_0x9d30f4==='ETH'||_0x9d30f4==='PAXG')_0x1251de=_0x1251de*(_0x3bb974===_0xce76e3(0x1a2)?_0x4a5646[_0xce76e3(0x15e)]:_0x4a5646[_0xce76e3(0x236)]);else{if(usdBasecoins[_0xce76e3(0x1b4)](_0x9d30f4))_0x1251de=_0x1251de*(_0x3bb974===_0xce76e3(0x1a2)?_0x4a5646[_0xce76e3(0x15e)]/_0x4a5646[_0xce76e3(0x236)]:0x1);else _0x9d30f4===_0xce76e3(0x1a2)&&(_0x1251de=_0x1251de*(_0x3bb974===_0xce76e3(0x1a2)?0x1:_0x4a5646[_0xce76e3(0x236)]/_0x4a5646[_0xce76e3(0x15e)]));}}let _0x49a1ad;if(_0x1251de!==0x0){if(_0x3f6ca5===_0xce76e3(0x1a0))_0x49a1ad=(_0x1251de/startingBalances[_0xce76e3(0x1a0)]-0x1)*0x64;else{if(_0x3bb974===_0xce76e3(0x1a2))_0x49a1ad=(_0x1251de/startingBalances[_0xce76e3(0x15e)]-0x1)*0x64;else _0x49a1ad=(_0x1251de/startingBalances[_0xce76e3(0x236)]-0x1)*0x64;}let _0x3e177c=0x0;if(startingBalances[_0xce76e3(0x1fa)])_0x293c07[_0xce76e3(0x1e3)](_0x297db5=>{const _0x25de54=_0xce76e3;let _0x197704=startingBalances[_0x25de54(0x1fa)][_0x25de54(0x297)](_0x456b8d=>_0x456b8d[_0x25de54(0x11f)]===_0x297db5[_0x25de54(0x11f)]);if(_0x197704&&_0x197704[_0x25de54(0x11f)]&&_0x297db5[_0x25de54(0x242)]!==0x0)_0x3e177c+=_0x197704[_0x25de54(0x242)]*_0x297db5[_0x25de54(0x209)];});let _0x421b69=0x0;if(_0x589651[_0xce76e3(0x1ef)]!==0x0){let _0x2fded0=_0x589651[_0x589651[_0xce76e3(0x1ef)]-0x1];_0x421b69=_0x2fded0[_0xce76e3(0x1d3)];}_0x3e177c-=_0x421b69;_0x3f6ca5===_0xce76e3(0x19a)&&(_0x49a1ad=(_0x1251de-_0x3e177c)/startingBalances['basecoin']*0x64,_0x1251de=_0x1251de-_0x3e177c);if(_0x3f6ca5==='net-fiat'){let _0x187475=_0x3bb974===_0xce76e3(0x1a2)?startingBalances['eur']:startingBalances[_0xce76e3(0x236)];if(_0x9d30f4===_0xce76e3(0x1d6)||_0x9d30f4===_0xce76e3(0x178)||_0x9d30f4===_0xce76e3(0x25d))_0x3e177c=_0x3bb974==='EUR'?_0x3e177c*_0x4a5646[_0xce76e3(0x15e)]:_0x3e177c*_0x4a5646[_0xce76e3(0x236)];else{if(usdBasecoins[_0xce76e3(0x1b4)](_0x9d30f4))_0x3e177c=_0x3bb974===_0xce76e3(0x1a2)?_0x3e177c*_0x4a5646[_0xce76e3(0x15e)]/_0x4a5646[_0xce76e3(0x236)]:_0x3e177c;else _0x9d30f4==='EUR'&&(_0x3e177c=_0x3bb974===_0xce76e3(0x1a2)?_0x3e177c:_0x3e177c*_0x4a5646[_0xce76e3(0x236)]/_0x4a5646[_0xce76e3(0x15e)]);}_0x49a1ad=(_0x1251de-_0x3e177c)/_0x187475*0x64,_0x1251de=_0x1251de-_0x3e177c;}if(_0x49a1ad){if(_0x49a1ad<0x64)_0x49a1ad=_0x49a1ad['toFixed'](0x2);else{if(_0x49a1ad<0x3e8)_0x49a1ad=_0x49a1ad['toFixed'](0x1);else _0x49a1ad=_0x49a1ad[_0xce76e3(0x11b)](0x0);}}else _0x49a1ad=Number('0')['toFixed'](0x2);if(_0x1251de){if(Math[_0xce76e3(0x265)](_0x1251de)<0.000001)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x2);else{if(Math[_0xce76e3(0x265)](_0x1251de)<0.1)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x6);else{if(Math[_0xce76e3(0x265)](_0x1251de)<0x1)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x5);else{if(Math[_0xce76e3(0x265)](_0x1251de)<0xa)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x4);else{if(Math['abs'](_0x1251de)<0x64)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x3);else{if(Math[_0xce76e3(0x265)](_0x1251de)<0x3e8)_0x1251de=_0x1251de[_0xce76e3(0x11b)](0x2);else _0x1251de=_0x1251de['toFixed'](0x2);}}}}}}else _0x1251de=Number('0')[_0xce76e3(0x11b)](0x2);}else _0x49a1ad=Number('0')[_0xce76e3(0x11b)](0x2);return{'value':_0x1251de,'change':_0x49a1ad,'leftTxt':_0x2f8a46,'rightTxt':_0x40ebed};}async function getStartingBalances(_0x124d89,_0x194d53=!![]){const _0x442f48=_0x339bda;if(_0x124d89[_0x442f48(0x1ef)]!==0x0){const [_0x3a245a,_0x4d726c,_0x1fd9d5]=getPerf(_0x124d89[0x0],!![]);let _0x37c266=[];config[_0x442f48(0x26c)][_0x442f48(0x1e3)](_0x48e99f=>{const _0x3dbdf2=_0x442f48;let _0x159806=0x0,_0x2de61b;config['liquidity'][_0x3dbdf2(0x1e3)](_0xb1c7f9=>{const _0x4f5ad6=_0x3dbdf2;let _0x3374fb=_0xb1c7f9[_0x4f5ad6(0x286)]['find'](_0x32a31d=>_0x32a31d[_0x4f5ad6(0x11f)]==_0x48e99f[_0x4f5ad6(0x11f)]);if(_0x3374fb){_0x159806+=_0x3374fb[_0x4f5ad6(0x242)];if(!_0x2de61b)_0x2de61b=_0x3374fb[_0x4f5ad6(0x137)];}}),_0x37c266[_0x3dbdf2(0x2af)]({'coin':_0x48e99f['coin'],'number':_0x159806,'initialprice':_0x2de61b});});const _0x206c9e={'basecoin':_0x3a245a,'eur':_0x4d726c,'usd':_0x1fd9d5,'coins':_0x37c266};if(_0x194d53)proxyEmit(_0x442f48(0x1c6),_0x206c9e);startingBalances=_0x206c9e;}}function headlessMode(_0x22d663){const _0x7ae8f6=_0x339bda;let _0x5a514f=_0x22d663['portfolio'],_0x2f5e95=_0x22d663['threshold'],_0x5b5875=[];for(let _0x3f9227 of _0x5a514f){if(_0x3f9227['coin']!=config[_0x7ae8f6(0x1a0)]){if(_0x3f9227['delta']>=_0x2f5e95/0x64){if(_0x3f9227[_0x7ae8f6(0x243)])_0x5b5875['push'](_0x3f9227);}else{if(_0x3f9227['delta']<=-_0x2f5e95/0x64){if(_0x3f9227[_0x7ae8f6(0x243)])_0x5b5875[_0x7ae8f6(0x2af)](_0x3f9227);}}}}_0x5b5875[_0x7ae8f6(0x1ef)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x5b5875[_0x7ae8f6(0x1e3)](_0x153815=>{const _0x599769=_0x7ae8f6;logger[_0x599769(0x168)]('Trigger:\x20'+_0x153815['coin']+'\x20'+_0x153815[_0x599769(0x242)]+'\x20'+_0x153815[_0x599769(0x209)]+'\x20'+_0x153815[_0x599769(0x223)]+'%\x20'+_0x153815['target']+'%\x20'+(0x64*_0x153815['delta'])['toFixed'](0x2)+'%\x20('+_0x2f5e95[_0x599769(0x11b)](0x2)+'%)');}),placeOrder(_0x5b5875));}function notifyBalance(_0x3164ee){const _0x41d7c2=_0x339bda;let _0x2db44c=_0x3164ee['portfolio'],_0x512be6=_0x3164ee[_0x41d7c2(0x1cf)],_0x1159fc=[];for(let _0x1752db of _0x2db44c){if(_0x1752db[_0x41d7c2(0x11f)]!=config['basecoin']){if(_0x1752db[_0x41d7c2(0x1d2)]>=_0x512be6/0x64){if(_0x1752db[_0x41d7c2(0x243)])_0x1159fc[_0x41d7c2(0x2af)](_0x1752db);}else{if(_0x1752db[_0x41d7c2(0x1d2)]<=-_0x512be6/0x64){if(_0x1752db[_0x41d7c2(0x243)])_0x1159fc[_0x41d7c2(0x2af)](_0x1752db);}}}}if(_0x1159fc['length']>0x0){let _0x52b883=_0x1159fc[_0x41d7c2(0x1f4)](_0x7a61ed=>_0x7a61ed[_0x41d7c2(0x11f)]);_0x52b883[_0x41d7c2(0x179)]();let _0x5b438f=_0x52b883[_0x41d7c2(0x224)](',\x20');if(!lastCoinsToBalance)logHistory(_0x41d7c2(0x155),_0x41d7c2(0x212));lastCoinsToBalance=_0x5b438f;}}function symbolToCoin(_0x184055){const _0x30d514=_0x339bda;let _0x5a9bc9;if(_0x184055[_0x30d514(0x1b4)]('/'+config[_0x30d514(0x1a0)]))_0x5a9bc9=_0x184055[_0x30d514(0x1cc)]('/'+config[_0x30d514(0x1a0)],'');if(_0x184055[_0x30d514(0x1b4)](config['basecoin']+'/'))_0x5a9bc9=_0x184055[_0x30d514(0x1cc)](config[_0x30d514(0x1a0)]+'/','');return _0x5a9bc9;}async function unlockOrders(){const _0xd3b571=_0x339bda;if(allOrdersPlaced&&lockOrders==ORDERS[_0xd3b571(0x21f)]){logger[_0xd3b571(0x168)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0xd3b571(0x260)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2856ce=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2856ce,validateOrdersState=_0xd3b571(0x17c),persistOpenOrders([]),lockOrders=ORDERS[_0xd3b571(0x1b6)],logger['debug'](_0xd3b571(0x149));}}async function validateOrders(_0x440f03){const _0x3f6978=_0x339bda;if(_0x440f03)validateOrdersState=_0x440f03;logger[_0x3f6978(0x168)](_0x3f6978(0x130)+validateOrdersState+_0x3f6978(0x1db)+(lockOrders==0x1?_0x3f6978(0x1c7):lockOrders==0x2?_0x3f6978(0x187):_0x3f6978(0x1ed)));let _0x3bb17d=[],_0x151ab9=config['ordertype']==_0x3f6978(0x188)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3f6978(0x263)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3f6978(0x21f)])return;logger[_0x3f6978(0x168)](_0x3f6978(0x129)+validateOrdersState),lastOrders['forEach'](_0x556c5c=>{const _0x2ab9f3=_0x3f6978;let _0x5d2df6=![];_0x556c5c[_0x2ab9f3(0x26d)]>0x0&&(_0x5d2df6=!![]),_0x3bb17d[_0x2ab9f3(0x2af)](_0x5d2df6),_0x5d2df6&&config[_0x2ab9f3(0x213)]!=_0x2ab9f3(0x188)&&logHistory(_0x2ab9f3(0x1d0),'Order\x20filled:\x20'+_0x556c5c[_0x2ab9f3(0x257)]+'\x20'+_0x556c5c[_0x2ab9f3(0x267)]+'\x20#'+formatResult(_0x556c5c[_0x2ab9f3(0x26d)],0x8)+'\x20@'+formatResult(_0x556c5c[_0x2ab9f3(0x137)],0x8));}),_0x3bb17d[_0x3f6978(0x1e3)]((_0x42ccfd,_0x5d0046)=>{const _0x2a9ab9=_0x3f6978;if(_0x42ccfd)lastOrders[_0x2a9ab9(0x121)](_0x5d0046,0x1);}),persistOpenOrders(lastOrders);const _0x2224df=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x3f6978(0x17c)){validateOrdersState=_0x3f6978(0x229);if(_0x3bb17d['includes'](![])){if(config['ordertype']==_0x3f6978(0x188)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3f6978(0x229)){if(_0x3bb17d[_0x3f6978(0x1b4)](![])){}else{if(allOrdersPlaced){if(config[_0x3f6978(0x213)]==_0x3f6978(0x188)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x3bb17d[_0x3f6978(0x1b4)](![])&&(config[_0x3f6978(0x213)]==_0x3f6978(0x188)?logHistory('success',_0x3f6978(0x18d)+Math[_0x3f6978(0x1e4)](_0x151ab9*validateOrderInterval/0xea60)+_0x3f6978(0x113)+_0x2224df):(await cancelOrders(),logHistory(_0x3f6978(0x1a5),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x3f6978(0x1e4)](_0x151ab9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2224df))),await unlockOrders();else{if(validateOrdersState==_0x3f6978(0x1a9)){if(config[_0x3f6978(0x213)]!=_0x3f6978(0x188))logHistory(_0x3f6978(0x1a5),_0x3f6978(0x117)+_0x2224df);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x519682=>{const _0x43d83a=_0x1fe6;try{const _0x25de5a=await exchange[_0x43d83a(0x1fb)](_0x519682[_0x43d83a(0x298)],_0x519682[_0x43d83a(0x257)]);}catch(_0x2890d8){if(_0x2890d8['toString']()[_0x43d83a(0x1b4)](_0x43d83a(0x17b))){}else await handleError(_0x2890d8,_0x43d83a(0x254));}});}async function initCoinResults(_0xbab2e){const _0x40a655=_0x339bda;_0xbab2e?logger[_0x40a655(0x168)](_0x40a655(0x1eb)+_0xbab2e):logger[_0x40a655(0x168)](_0x40a655(0x2b1)),config[_0x40a655(0x26c)]['forEach'](_0x3454a4=>{const _0x54d228=_0x40a655;if(!_0x3454a4['excluded']&&_0x3454a4[_0x54d228(0x11f)]!=config[_0x54d228(0x1a0)]){const _0x38a6ca=currentCoins[_0x54d228(0x297)](_0x5aae8=>_0x5aae8[_0x54d228(0x11f)]==_0x3454a4['coin']),_0x4ca373=global[_0x54d228(0x244)][noslash(_0x3454a4[_0x54d228(0x257)])];let _0x14e23f=_0x38a6ca?_0x38a6ca[_0x54d228(0x242)]:null,_0xa58154=_0x3454a4[_0x54d228(0x25a)]?0x1/_0x4ca373:_0x4ca373,_0x4a97a2;config[_0x54d228(0x25f)][_0x54d228(0x1e3)](_0x548708=>{const _0x5cb058=_0x54d228;!_0x4a97a2&&(_0x4a97a2=_0x548708['changes'][_0x5cb058(0x297)](_0x3d747f=>_0x3d747f[_0x5cb058(0x11f)]==_0x3454a4['coin']),_0x4a97a2&&(_0x14e23f=_0x4a97a2[_0x5cb058(0x242)],_0xa58154=_0x4a97a2[_0x5cb058(0x137)]));});let _0x4042a0=dbCoinResults[_0x54d228(0x281)]('coins')[_0x54d228(0x297)]({'coin':_0x3454a4[_0x54d228(0x11f)]})[_0x54d228(0x1bf)]();if(!_0x4042a0){const _0x42e2d2={'coin':_0x3454a4[_0x54d228(0x11f)],'number':_0x14e23f,'breakeven':_0xa58154,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x54d228(0x281)]('coins')['push'](_0x42e2d2)[_0x54d228(0x186)]();}else{if(_0xbab2e&&_0x3454a4[_0x54d228(0x11f)]==_0xbab2e){const _0x41d0d2={'coin':_0x3454a4[_0x54d228(0x11f)],'number':_0x14e23f,'breakeven':_0xa58154,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x54d228(0x281)]('coins')[_0x54d228(0x297)]({'coin':_0x3454a4[_0x54d228(0x11f)]})['assign'](_0x41d0d2)[_0x54d228(0x186)]();}}}});}async function updateCoinResults(_0x1df95d,_0x527ecf=![]){const _0x5e0b99=_0x339bda;let _0x1d9db4,_0x42b2c4,_0x3f2412,_0xa177cf,_0x1a3173,_0x5cef8c,_0x197f0f=dbCoinResults[_0x5e0b99(0x281)]('coins')[_0x5e0b99(0x297)]({'coin':_0x1df95d[_0x5e0b99(0x11f)]})['value'](),_0x4383d2=![];_0x197f0f&&Object[_0x5e0b99(0x264)](_0x197f0f)[_0x5e0b99(0x1e3)](([_0x1d4f12,_0x16ded7])=>{if(_0x16ded7==null)_0x4383d2=!![];});(!_0x197f0f||_0x4383d2)&&(await initCoinResults(_0x1df95d[_0x5e0b99(0x11f)]),_0x197f0f=dbCoinResults[_0x5e0b99(0x281)](_0x5e0b99(0x1fa))[_0x5e0b99(0x297)]({'coin':_0x1df95d[_0x5e0b99(0x11f)]})[_0x5e0b99(0x1bf)]());_0x1df95d[_0x5e0b99(0x25a)]&&(_0x5cef8c={'filled':_0x1df95d['filled']*_0x1df95d[_0x5e0b99(0x137)],'amount':_0x1df95d[_0x5e0b99(0x26d)]*_0x1df95d[_0x5e0b99(0x137)],'side':_0x1df95d[_0x5e0b99(0x267)]=='sell'?_0x5e0b99(0x251):_0x5e0b99(0x21d),'price':0x1/_0x1df95d[_0x5e0b99(0x137)]},_0x1df95d={..._0x1df95d,..._0x5cef8c});_0x527ecf?_0x42b2c4=_0x1df95d[_0x5e0b99(0x267)]=='buy'?_0x197f0f[_0x5e0b99(0x242)]+_0x1df95d[_0x5e0b99(0x26d)]:_0x197f0f['number']-_0x1df95d['filled']:_0x42b2c4=await getCoinNumber(_0x1df95d[_0x5e0b99(0x11f)]);if(_0x1df95d[_0x5e0b99(0x272)]&&_0x1df95d[_0x5e0b99(0x272)][_0x5e0b99(0x25b)]==config['basecoin'])_0x1d9db4=Number(_0x1df95d[_0x5e0b99(0x272)][_0x5e0b99(0x158)]);else{if(_0x1df95d[_0x5e0b99(0x272)]&&_0x1df95d[_0x5e0b99(0x272)]['currency']=='BNB'&&!_0x527ecf&&config[_0x5e0b99(0x1a0)]!=_0x5e0b99(0x25d))_0x1d9db4=Number(_0x1df95d[_0x5e0b99(0x272)][_0x5e0b99(0x158)])*global[_0x5e0b99(0x244)][_0x5e0b99(0x1e0)+config[_0x5e0b99(0x1a0)]];else _0x1d9db4=defaultFee*_0x1df95d[_0x5e0b99(0x26d)]*_0x1df95d[_0x5e0b99(0x137)];}_0x1df95d[_0x5e0b99(0x267)]==_0x5e0b99(0x251)?(_0x3f2412=_0x42b2c4!=0x0?(_0x197f0f['breakeven']*_0x197f0f[_0x5e0b99(0x242)]+_0x1df95d[_0x5e0b99(0x137)]*(_0x42b2c4-_0x197f0f[_0x5e0b99(0x242)])+_0x1d9db4)/_0x42b2c4:0x0,_0xa177cf=_0x197f0f[_0x5e0b99(0x1fe)]):(_0x3f2412=_0x42b2c4!=0x0?(_0x197f0f[_0x5e0b99(0x233)]*_0x197f0f[_0x5e0b99(0x242)]-_0x1df95d[_0x5e0b99(0x137)]*(_0x197f0f[_0x5e0b99(0x242)]-_0x42b2c4)+_0x1d9db4)/_0x42b2c4:0x0,_0xa177cf=_0x197f0f[_0x5e0b99(0x1fe)]+(_0x1df95d[_0x5e0b99(0x137)]-_0x197f0f[_0x5e0b99(0x233)])*_0x1df95d[_0x5e0b99(0x26d)]);_0x1a3173=(_0x1df95d[_0x5e0b99(0x137)]-_0x3f2412-_0x1d9db4/_0x1df95d[_0x5e0b99(0x26d)])*_0x42b2c4;let _0x498b2c={'coin':_0x1df95d[_0x5e0b99(0x11f)],'number':_0x42b2c4,'breakeven':formatResult(_0x3f2412,0x8),'realized':formatResult(_0xa177cf,0x8),'unrealized':formatResult(_0x1a3173,0x8),'fees':formatResult(_0x197f0f[_0x5e0b99(0x227)]+_0x1d9db4,0x8),'sells':_0x1df95d[_0x5e0b99(0x267)]==_0x5e0b99(0x21d)?_0x197f0f[_0x5e0b99(0x17a)]+0x1:_0x197f0f[_0x5e0b99(0x17a)],'buys':_0x1df95d[_0x5e0b99(0x267)]==_0x5e0b99(0x251)?_0x197f0f[_0x5e0b99(0x276)]+0x1:_0x197f0f['buys']};dbCoinResults[_0x5e0b99(0x281)](_0x5e0b99(0x1fa))['find']({'coin':_0x1df95d[_0x5e0b99(0x11f)]})[_0x5e0b99(0x270)](_0x498b2c)[_0x5e0b99(0x186)]();if(!_0x527ecf){if(_0x1df95d[_0x5e0b99(0x272)]&&_0x1df95d[_0x5e0b99(0x272)][_0x5e0b99(0x25b)]=='BNB'){const _0x1fe85b=currentCoins[_0x5e0b99(0x297)](_0x1edefd=>_0x1edefd[_0x5e0b99(0x11f)]==_0x5e0b99(0x1e0));if(_0x1fe85b){let _0x232caa=dbCoinResults['get'](_0x5e0b99(0x1fa))[_0x5e0b99(0x297)]({'coin':'BNB'})[_0x5e0b99(0x1bf)]();_0x498b2c={..._0x232caa,'number':_0x1fe85b[_0x5e0b99(0x242)]},dbCoinResults[_0x5e0b99(0x281)](_0x5e0b99(0x1fa))[_0x5e0b99(0x297)]({'coin':_0x5e0b99(0x1e0)})['assign'](_0x498b2c)[_0x5e0b99(0x186)]();}}}}async function placeOrder(_0x3be724){const _0x2587ad=_0x339bda,_0x46bf92=config[_0x2587ad(0x213)]==_0x2587ad(0x188)?_0x2587ad(0x188):_0x2587ad(0x2a8);if(lockOrders==ORDERS[_0x2587ad(0x1b6)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2587ad(0x21f)],allOrdersPlaced=![],validateOrdersState='initial';let _0x5bc471=![];lastOrders=[];for(const _0x4e99c2 of _0x3be724){let _0x3a8eb8,_0x4cbb1a,_0x371d01,_0x1c84d5,_0x556948,_0x2e1f54=_0x4e99c2['symbol'];try{const _0x2f32b7=await exchange['fetchTicker'](_0x2e1f54);_0x3a8eb8=_0x4e99c2[_0x2587ad(0x25a)]?0x1/_0x4e99c2['last']:_0x4e99c2['last'],_0x4cbb1a=_0x2f32b7['bid'],_0x371d01=_0x2f32b7[_0x2587ad(0x22f)];_0x4e99c2[_0x2587ad(0x25a)]?(_0x1c84d5=_0x4e99c2[_0x2587ad(0x267)]==_0x2587ad(0x251)?'sell':_0x2587ad(0x251),_0x556948=Math[_0x2587ad(0x265)](_0x4e99c2[_0x2587ad(0x1bd)])/_0x3a8eb8):(_0x1c84d5=_0x4e99c2[_0x2587ad(0x267)],_0x556948=Math[_0x2587ad(0x265)](_0x4e99c2[_0x2587ad(0x1bd)]));_0x46bf92==_0x2587ad(0x2a8)&&(config[_0x2587ad(0x213)]=='limit-high'&&(_0x3a8eb8=_0x1c84d5==_0x2587ad(0x251)?_0x4cbb1a:_0x371d01),config[_0x2587ad(0x213)]==_0x2587ad(0x294)&&(_0x3a8eb8=_0x1c84d5==_0x2587ad(0x251)?_0x371d01:_0x4cbb1a));_0x556948=formatResult(_0x556948,0x8),_0x3a8eb8=formatResult(_0x3a8eb8,0x8);const _0x1aaee6=_0x1c84d5==_0x2587ad(0x21d)?config['emojisell']?String[_0x2587ad(0x1ae)]('0x'+config[_0x2587ad(0x271)])+'\x20':'':config['emojibuy']?String[_0x2587ad(0x1ae)]('0x'+config[_0x2587ad(0x20b)])+'\x20':'',_0x3466a3=_0x46bf92=='market'?_0x2587ad(0x255):config[_0x2587ad(0x213)]==_0x2587ad(0x28d)?_0x2587ad(0x28b):_0x2587ad(0x1f0),_0x4bc772=(Math[_0x2587ad(0x18b)](Math[_0x2587ad(0x1b1)]()*0x35a4e900)+0x5f5e100)[_0x2587ad(0x10f)]();lastOrders[_0x2587ad(0x2af)]({'customId':_0x4bc772,'symbol':_0x2e1f54,'coin':_0x4e99c2[_0x2587ad(0x11f)],'amount':_0x556948,'price':_0x3a8eb8,'side':_0x1c84d5,'reverse':_0x4e99c2[_0x2587ad(0x25a)],'filled':0x0});if(_0x46bf92==_0x2587ad(0x188))logHistory(_0x2587ad(0x1d0),''+_0x1aaee6+_0x3466a3+_0x2587ad(0x20d)+_0x2e1f54+'\x20'+_0x1c84d5+'\x20#'+formatResult(_0x556948,0x8)+'\x20@'+formatResult(_0x3a8eb8,0x8));else logHistory(_0x2587ad(0x1d0),''+_0x1aaee6+_0x3466a3+_0x2587ad(0x20d)+_0x2e1f54+'\x20'+_0x1c84d5+'\x20#'+formatResult(_0x556948,0x8)+'\x20@'+formatResult(_0x3a8eb8,0x8));let _0x1c5992;_0x46bf92==_0x2587ad(0x188)?_0x1c84d5==_0x2587ad(0x251)&&[_0x2587ad(0x1ce),_0x2587ad(0x20c),_0x2587ad(0x125),_0x2587ad(0x16c),_0x2587ad(0x1ba)][_0x2587ad(0x1b4)](config[_0x2587ad(0x28e)])?_0x1c5992=await exchange[_0x2587ad(0x23a)](_0x2e1f54,_0x46bf92,_0x1c84d5,_0x556948,_0x3a8eb8):_0x1c5992=await exchange[_0x2587ad(0x23a)](_0x2e1f54,_0x46bf92,_0x1c84d5,_0x556948,undefined):_0x1c5992=await exchange[_0x2587ad(0x23a)](_0x2e1f54,_0x46bf92,_0x1c84d5,_0x556948,_0x3a8eb8);logger[_0x2587ad(0x168)](_0x2587ad(0x15a)+_0x1c5992['id']+'\x20|\x20Custom\x20ID:\x20'+_0x4bc772);const _0x28f853=lastOrders[_0x2587ad(0x1ef)]-0x1;if(_0x28f853>=0x0&&lastOrders[_0x28f853][_0x2587ad(0x110)]==_0x4bc772){lastOrders[_0x28f853][_0x2587ad(0x298)]=_0x1c5992['id'];if(_0x1c5992[_0x2587ad(0x225)])lastOrders[_0x28f853][_0x2587ad(0x225)]=_0x1c5992[_0x2587ad(0x225)];if(_0x1c5992[_0x2587ad(0x137)])lastOrders[_0x28f853]['price']=_0x1c5992[_0x2587ad(0x137)];lastOrders[_0x28f853][_0x2587ad(0x272)]=_0x1c5992[_0x2587ad(0x272)];}if(config[_0x2587ad(0x1f9)]!=0x0){let _0x54ad2e=null;if(cooldownTracker[_0x2587ad(0x1ef)]==config[_0x2587ad(0x1f9)]-0x1)_0x54ad2e=cooldownTracker['shift']();const _0x29f09b=getTimeStamp();cooldownTracker[_0x2587ad(0x2af)](_0x29f09b);if(_0x54ad2e){const _0x2f47e2=fns['differenceInSeconds'](new Date(_0x29f09b),new Date(_0x54ad2e));if(_0x2f47e2<cooldownInterval){logHistory(_0x2587ad(0x162),_0x2587ad(0x285)+config[_0x2587ad(0x1f9)]+_0x2587ad(0x199)+cooldownInterval/0x3c+_0x2587ad(0x1bb)+cooldownPeriod/(0xe10*0x3e8)+_0x2587ad(0x18e)),coolingDown=!![];break;}}}}catch(_0x497ae1){if(_0x497ae1[_0x2587ad(0x10f)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x2587ad(0x12b)](_0x5d543b=>_0x5d543b[_0x2587ad(0x257)]!=_0x2e1f54),logHistory(_0x2587ad(0x162),_0x2587ad(0x12a)+_0x2e1f54),_0x5bc471=!![];else{if(_0x497ae1[_0x2587ad(0x10f)]()[_0x2587ad(0x1b4)](_0x2587ad(0x282)))lastOrders=lastOrders[_0x2587ad(0x12b)](_0x43b775=>_0x43b775[_0x2587ad(0x257)]!=_0x2e1f54),logHistory(_0x2587ad(0x162),_0x2587ad(0x28a)+_0x2e1f54),_0x5bc471=!![];else{if(_0x497ae1[_0x2587ad(0x10f)]()[_0x2587ad(0x1b4)]('InvalidOrder'))lastOrders=lastOrders[_0x2587ad(0x12b)](_0x25fcbc=>_0x25fcbc[_0x2587ad(0x257)]!=_0x2e1f54),logHistory(_0x2587ad(0x162),_0x2587ad(0x171)+_0x2e1f54),logger[_0x2587ad(0x168)](_0x497ae1),_0x5bc471=!![];else _0x497ae1['toString']()[_0x2587ad(0x1b4)](_0x2587ad(0x24d))?(lastOrders=lastOrders[_0x2587ad(0x12b)](_0x43f191=>_0x43f191['symbol']!=_0x2e1f54),logHistory(_0x2587ad(0x162),_0x2587ad(0x12a)+_0x2e1f54),_0x5bc471=!![]):(lastOrders=lastOrders['filter'](_0x202291=>_0x202291[_0x2587ad(0x257)]!=_0x2e1f54),await handleError(_0x497ae1,_0x2587ad(0x19d),_0x2e1f54));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x237041=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2587ad(0x263)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4a5fec=_0x2587ad;validateOrders(_0x4a5fec(0x16a));},_0x237041);}else unlockOrders();_0x5bc471&&config[_0x2587ad(0x143)]&&(logHistory(_0x2587ad(0x162),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x2587ad(0x27e)));}else{if(coolingDown)!config[_0x2587ad(0x143)]&&logHistory(_0x2587ad(0x162),_0x2587ad(0x14b));else lockOrders!=ORDERS[_0x2587ad(0x1b6)]&&(!config[_0x2587ad(0x143)]&&(config[_0x2587ad(0x213)]=='market'?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x2587ad(0x162),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x32abc8){const _0x55aae0=_0x339bda,_0x5518f4={...config,'openOrders':_0x32abc8};let _0x52228d=dbConfig[_0x55aae0(0x281)]('bot')[_0x55aae0(0x297)]({'botID':botID})['value']();_0x52228d&&dbConfig[_0x55aae0(0x281)]('bot')[_0x55aae0(0x297)]({'botID':botID})['assign'](_0x5518f4)[_0x55aae0(0x186)]();}function restoreOrders(){const _0x46b52d=_0x339bda;let _0x10bf09;config[_0x46b52d(0x11a)]&&allOpenOrders[_0x46b52d(0x1e3)](_0x2f297a=>{const _0x321f18=_0x46b52d,_0x1e0795=config['openOrders'][_0x321f18(0x297)](_0x48208a=>_0x48208a['orderId']==_0x2f297a['id']);_0x1e0795&&(lastOrders[_0x321f18(0x2af)](_0x1e0795),_0x10bf09=_0x2f297a[_0x321f18(0x22b)]);});if(lastOrders[_0x46b52d(0x1ef)]>0x0){lockOrders=ORDERS[_0x46b52d(0x21f)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1ece39=new Date()['getTime'](),_0x247f26=config[_0x46b52d(0x213)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x46b52d(0x263)]*0x3c*0x3e8;if(_0x10bf09+_0x247f26>_0x1ece39){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x371dde=_0x46b52d;validateOrders(_0x371dde(0x16a));},_0x10bf09+_0x247f26-_0x1ece39);}else validateOrders(_0x46b52d(0x16a));}}async function sendMetricsTelegram(){const _0x33ed41=_0x339bda;if(!coinsLoaded){process[_0x33ed41(0x144)]({'telegrammsg':_0x33ed41(0x279)},_0x13d5f7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3f252e='';if(config[_0x33ed41(0x283)])_0x3f252e='<b>'+config['botname']+_0x33ed41(0x27d);else _0x3f252e='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4407e0=getKPIs(_0x33ed41(0x1a0)),_0x5aaa31=getKPIs(_0x33ed41(0x13a),config[_0x33ed41(0x13a)]),_0x5d169d=getKPIs(_0x33ed41(0x19a)),_0x41042c=getKPIs(_0x33ed41(0x194),config[_0x33ed41(0x13a)]);_0x3f252e+='<pre>',_0x3f252e+=_0x4407e0['leftTxt']+'\x20:\x20'+_0x4407e0['value']+'\x0a',_0x3f252e+=_0x4407e0[_0x33ed41(0x154)]+':\x20'+_0x4407e0[_0x33ed41(0x1c2)]+'%\x0a',_0x3f252e+=_0x5aaa31[_0x33ed41(0x14d)]+'\x20:\x20'+_0x5aaa31[_0x33ed41(0x1bf)]+'\x0a',_0x3f252e+=_0x5aaa31['rightTxt']+':\x20'+_0x5aaa31[_0x33ed41(0x1c2)]+'%\x0a',_0x3f252e+=_0x5d169d[_0x33ed41(0x14d)]+':\x20'+_0x5d169d['value']+'\x20('+config[_0x33ed41(0x1a0)]+')\x0a',_0x3f252e+=_0x5d169d[_0x33ed41(0x154)]+':\x20'+_0x5d169d['change']+'%\x20('+config[_0x33ed41(0x1a0)]+')\x0a',_0x3f252e+=_0x41042c[_0x33ed41(0x14d)]+':\x20'+_0x41042c[_0x33ed41(0x1bf)]+'\x20('+config[_0x33ed41(0x13a)]+')\x0a',_0x3f252e+=_0x41042c[_0x33ed41(0x154)]+':\x20'+_0x41042c[_0x33ed41(0x1c2)]+_0x33ed41(0x266)+config[_0x33ed41(0x13a)]+')\x0a',_0x3f252e+='</pre>',process[_0x33ed41(0x144)]({'telegrammsg':_0x3f252e},_0x246b0e=>{});}async function sendPortfolioTelegram(){const _0x41c687=_0x339bda;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x41c687(0x144)]({'telegrammsg':_0x41c687(0x279)},_0x25d016=>{});return;}let _0xb885da='';if(config[_0x41c687(0x283)])_0xb885da=_0x41c687(0x258)+config[_0x41c687(0x239)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0xb885da=_0x41c687(0x259)+botID+_0x41c687(0x2a9);_0xb885da+='<pre>',_0xb885da+=_0x41c687(0x22d),_0xb885da+=_0x41c687(0x120),_0xb885da+=_0x41c687(0x22d),currentCoins[_0x41c687(0x1e3)](_0x521f68=>{const _0x17f82e=_0x41c687;_0xb885da+=_0x521f68['coin'][_0x17f82e(0x176)](0x7)+'|\x20'+formatPad(_0x521f68[_0x17f82e(0x223)],0x2,0x6)+'|\x20'+formatPad(_0x521f68[_0x17f82e(0x204)],0x2,0x6)+'|\x20'+formatPad(_0x521f68[_0x17f82e(0x1d2)]*0x64,0x2,0x6)+'\x0a';}),_0xb885da+=_0x41c687(0x139),process[_0x41c687(0x144)]({'telegrammsg':_0xb885da},_0x1c7daf=>{});}function formatPad(_0x1bb10c,_0x26d183,_0x4185ed){const _0x1c47ba=_0x339bda,_0xf2516e=formatResultString(_0x1bb10c,_0x26d183);return _0xf2516e?_0xf2516e['padStart'](_0x4185ed):''[_0x1c47ba(0x19f)](_0x4185ed);}function logHistory(_0x56a4a9,_0x4846b0,_0x2d986d=''){const _0x5f5579=_0x339bda;logger[_0x5f5579(0x2ab)](''+_0x4846b0);let _0x51841b={'time':getTimeStamp(),'type':_0x56a4a9,'event':_0x4846b0};dbLogs[_0x5f5579(0x281)]('logs')[_0x5f5579(0x2af)](_0x51841b)['write']();if(_0x2d986d=='')_0x2d986d=_0x4846b0;proxyEmit(_0x5f5579(0x1f5),{'log':_0x51841b,'summary':_0x2d986d}),process['send']({'telegram':{..._0x51841b,'botname':config[_0x5f5579(0x239)],'showname':config['showname']}},_0x6b174b=>{});}function emitHistory(_0x267c32={}){const _0x422b68=_0x339bda;Object[_0x422b68(0x1af)](_0x267c32)[_0x422b68(0x1ef)]==0x0&&(_0x267c32={'type':[_0x422b68(0x1d0),_0x422b68(0x1f5)],'event':'','page':0x1});if(_0x267c32[_0x422b68(0x152)]['includes']('event'))_0x267c32['type']['splice'](_0x267c32[_0x422b68(0x152)]['indexOf']('event'),0x1,'error',_0x422b68(0x155),_0x422b68(0x1a5));if(dbLogs[_0x422b68(0x145)](_0x422b68(0x196))['value']()){let _0x2bd62e=dbLogs[_0x422b68(0x281)](_0x422b68(0x196))[_0x422b68(0x12b)](_0x386125=>{const _0x505ff9=_0x422b68;if(_0x267c32[_0x505ff9(0x152)][_0x505ff9(0x1ef)]==0x0)return![];else return _0x267c32['type'][_0x505ff9(0x1b4)](_0x386125['type']);})[_0x422b68(0x12b)](_0x3cb2ac=>{const _0x4c813b=_0x422b68;if(_0x267c32[_0x4c813b(0x1f5)]=='')return!![];else return _0x3cb2ac[_0x4c813b(0x1f5)][_0x4c813b(0x156)]()[_0x4c813b(0x1b4)](_0x267c32[_0x4c813b(0x1f5)]['toLowerCase']());})['sortBy'](_0x422b68(0x22c)),_0x568758=_0x2bd62e[_0x422b68(0x1bf)]()['length'];_0x2bd62e=_0x2bd62e[_0x422b68(0x25a)]()[_0x422b68(0x133)]((_0x267c32[_0x422b68(0x235)]-0x1)*logPageSize,_0x267c32['page']*logPageSize-0x1)[_0x422b68(0x25a)]()[_0x422b68(0x1bf)](),proxyEmit('event-history',{'logs':_0x2bd62e,'total':_0x568758});}else proxyEmit(_0x422b68(0x15f),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x33a272){const _0x2ff73e=_0x339bda;if(dbLogs[_0x2ff73e(0x145)](_0x2ff73e(0x196))[_0x2ff73e(0x1bf)]()){const _0x409ab7=dbLogs[_0x2ff73e(0x281)](_0x2ff73e(0x196))[_0x2ff73e(0x237)](_0x2ff73e(0x22c))[_0x2ff73e(0x12b)](_0x1a0892=>{const _0x41b7dd=_0x2ff73e;return _0x1a0892[_0x41b7dd(0x152)]==_0x41b7dd(0x1d0);})[_0x2ff73e(0x1bf)]();dbLogs['get'](_0x2ff73e(0x196))[_0x2ff73e(0x1aa)]()[_0x2ff73e(0x186)](),dbLogs[_0x2ff73e(0x281)](_0x2ff73e(0x196))[_0x2ff73e(0x270)](_0x409ab7)[_0x2ff73e(0x186)](),emitHistory(_0x33a272);}}async function pauseBot(_0x94d880=pauseBotInterval){const _0xcfa2de=_0x339bda,_0x545183=new Date()[_0xcfa2de(0x1f1)]();if(!lastErrorShown||_0x545183-lastErrorShown>=_0x94d880){lastErrorShown=_0x545183;!lastBotPause?(lastBotPause=_0x545183,consecutivePauses=0x1):(_0x545183-lastBotPause-_0x94d880<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xcfa2de(0x144)]({'stop':_0xcfa2de(0x284)},_0x2161a4=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xcfa2de(0x1f1)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x94d880),botPaused=![],reset(!![]);}}}async function killBot(){const _0x5ca36f=_0x339bda;botPaused=!![],await sleep(0x3e8),process[_0x5ca36f(0x144)]({'stop':_0x5ca36f(0x250)},_0x47f736=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x220ab6,_0x3cb18c){const _0x215e43=_0x339bda;if(botPaused)return;const _0x181718=config[_0x215e43(0x28e)]||_0x215e43(0x26a);if(_0x3cb18c)logger[_0x215e43(0x168)](_0x215e43(0x296)+_0x3cb18c);const _0x4c18fa=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x220ab6['toString']()[_0x215e43(0x1b4)]('API-key\x20format\x20invalid'))logHistory(_0x215e43(0x162),_0x181718+_0x215e43(0x13c)),_0x4c18fa();else{if(_0x220ab6[_0x215e43(0x10f)]()[_0x215e43(0x1b4)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x215e43(0x162),_0x181718+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x4c18fa();else _0x220ab6[_0x215e43(0x10f)]()[_0x215e43(0x1b4)](_0x215e43(0x157))?(logHistory(_0x215e43(0x162),_0x181718+_0x215e43(0x169)),logHistory(_0x215e43(0x162),_0x215e43(0x278)),_0x4c18fa()):await handleError(_0x220ab6,null);}}async function handleError(_0x377bbe,_0x59969d,_0x30a619=''){const _0x1b4237=_0x339bda;if(botPaused)return;const _0x7c43a2=config[_0x1b4237(0x28e)]||'Exchange';if(_0x59969d)logger['debug']('Exception\x20thrown\x20in\x20'+_0x59969d);if(_0x377bbe[_0x1b4237(0x10f)]()['includes'](_0x1b4237(0x28f)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x17e)+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe),await pauseBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x1b4)](_0x1b4237(0x191)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x292)+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe),await pauseBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x1b4)]('ExchangeNotAvailable')||_0x377bbe['toString']()[_0x1b4237(0x1b4)]('OnMaintenance'))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x177)+pauseBotMsg),await pauseBot();else{if(_0x377bbe['toString']()['includes'](_0x1b4237(0x197)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x174)+pauseBotMsg),logger['debug'](_0x1b4237(0x118),_0x377bbe),await pauseBot();else{if(_0x377bbe['toString']()['includes'](_0x1b4237(0x166)))logHistory(_0x1b4237(0x162),_0x7c43a2+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)'+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe),await pauseBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x156)]()[_0x1b4237(0x1b4)](_0x1b4237(0x22b))||_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x156)]()[_0x1b4237(0x1b4)](_0x1b4237(0x2a6)))logHistory(_0x1b4237(0x162),_0x1b4237(0x1f7)+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe['toString']()),await pauseBot();else{if(_0x377bbe['toString']()['includes']('InvalidNonce'))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x146)+pauseBotMsg),logger[_0x1b4237(0x168)]('Error\x20details:',_0x377bbe),await pauseBot();else{if(_0x377bbe instanceof ccxt[_0x1b4237(0x175)])logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x112)+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe),await pauseBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x1b4)](_0x1b4237(0x2b0)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x164)),logHistory(_0x1b4237(0x162),_0x1b4237(0x1ac)),await killBot();else{if(_0x377bbe['toString']()[_0x1b4237(0x1b4)](_0x1b4237(0x134)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x1fd)),logHistory(_0x1b4237(0x162),_0x1b4237(0x1ac)),await killBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()['includes'](_0x1b4237(0x157)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x19e)),logHistory(_0x1b4237(0x162),_0x1b4237(0x1ac)),await killBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x1b4)](_0x1b4237(0x1ab)))logHistory(_0x1b4237(0x162),_0x7c43a2+_0x1b4237(0x29a)),logHistory(_0x1b4237(0x162),_0x1b4237(0x1ac)),await killBot();else{if(_0x377bbe[_0x1b4237(0x10f)]()[_0x1b4237(0x1b4)](_0x1b4237(0x185)))logHistory(_0x1b4237(0x162),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x30a619);else{if(_0x377bbe instanceof ccxt[_0x1b4237(0x1df)]){logHistory(_0x1b4237(0x162),_0x7c43a2+'\x20exchange\x20error'),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe);if(_0x30a619)logger[_0x1b4237(0x168)](_0x1b4237(0x287)+_0x30a619);}else{logHistory(_0x1b4237(0x162),_0x1b4237(0x193)+pauseBotMsg),logger[_0x1b4237(0x168)](_0x1b4237(0x118),_0x377bbe);if(_0x30a619)logger['debug'](_0x1b4237(0x287)+_0x30a619);await pauseBot();}}}}}}}}}}}}}}}async function withRetry(_0x34c922,_0x1e3189){const _0x37a243=_0x339bda;let _0x21a7b7=![],_0x3e7fca=0x0,_0xc09377,_0x529620;while(_0x3e7fca<maxRetries){try{_0xc09377=await _0x1e3189();break;}catch(_0xb6dcfd){_0x529620=_0xb6dcfd,!_0x21a7b7?(_0x21a7b7=!![],logger['debug'](_0x37a243(0x1a3)+_0x34c922+':',_0xb6dcfd['toString']())):await sleep(retryInterval);}_0x3e7fca++;}if(_0x3e7fca==0x0)return _0xc09377;if(_0x3e7fca>=maxRetries)throw _0x529620;else return logger['debug'](_0x37a243(0x195)+_0x3e7fca+'\x20attempts'),_0xc09377;}function formatResult(_0x27b646,_0x5b0f2b){const _0x3754e5=_0x339bda;return parseFloat(_0x27b646[_0x3754e5(0x11b)](_0x5b0f2b));}function formatResultTruncate(_0x4ee91e,_0x3515fc){const _0x51793a=_0x339bda;let _0x58720a=formatResultString(_0x4ee91e,0xa),_0x1b6b5b=_0x58720a['indexOf']('.');return _0x1b6b5b!=-0x1&&(_0x58720a=_0x58720a[_0x51793a(0x133)](0x0,_0x1b6b5b+_0x3515fc+0x1)),Number(_0x58720a);}function formatResultString(_0x4ee8c8,_0x42257c){const _0x5b6254=_0x339bda;let _0x3d624f;if(!(''+_0x4ee8c8)['includes']('e'))_0x3d624f=+(Math[_0x5b6254(0x1e4)](_0x4ee8c8+'e+'+_0x42257c)+'e-'+_0x42257c);else{let _0x313aea=(''+_0x4ee8c8)[_0x5b6254(0x245)]('e'),_0x17b34d='';+_0x313aea[0x1]+_0x42257c>0x0&&(_0x17b34d='+'),_0x3d624f=+(Math['round'](+_0x313aea[0x0]+'e'+_0x17b34d+(+_0x313aea[0x1]+_0x42257c))+'e-'+_0x42257c);}return Number(_0x3d624f)[_0x5b6254(0x11b)](_0x42257c);}function getServerTime(){const _0x3728d2=_0x339bda,_0x4f0236=new Date();return _0x4f0236[_0x3728d2(0x1d1)]()+'/'+(_0x4f0236[_0x3728d2(0x1c9)]()+0x1)['toString']()[_0x3728d2(0x19f)](0x2,'0')+'/'+_0x4f0236[_0x3728d2(0x14c)]()[_0x3728d2(0x10f)]()[_0x3728d2(0x19f)](0x2,'0')+'\x20'+_0x4f0236[_0x3728d2(0x1cd)]()[_0x3728d2(0x10f)]()[_0x3728d2(0x19f)](0x2,'0')+':'+_0x4f0236[_0x3728d2(0x1e6)]()[_0x3728d2(0x10f)]()['padStart'](0x2,'0')+':'+_0x4f0236[_0x3728d2(0x2a3)]()[_0x3728d2(0x10f)]()[_0x3728d2(0x19f)](0x2,'0');}function getTimeStamp(){const _0x42a2ff=_0x339bda,_0x4f8abc=shiftedTime();return _0x4f8abc[_0x42a2ff(0x1d1)]()+'/'+(_0x4f8abc[_0x42a2ff(0x1c9)]()+0x1)[_0x42a2ff(0x10f)]()[_0x42a2ff(0x19f)](0x2,'0')+'/'+_0x4f8abc[_0x42a2ff(0x14c)]()[_0x42a2ff(0x10f)]()[_0x42a2ff(0x19f)](0x2,'0')+'\x20'+_0x4f8abc['getHours']()['toString']()[_0x42a2ff(0x19f)](0x2,'0')+':'+_0x4f8abc[_0x42a2ff(0x1e6)]()[_0x42a2ff(0x10f)]()[_0x42a2ff(0x19f)](0x2,'0')+':'+_0x4f8abc['getSeconds']()[_0x42a2ff(0x10f)]()[_0x42a2ff(0x19f)](0x2,'0');}function _0x1fe6(_0x519f24,_0x399aea){const _0x5b74d8=_0xc289();return _0x1fe6=function(_0x5426a7,_0x2b82ac){_0x5426a7=_0x5426a7-0x10f;let _0x1fe6f0=_0x5b74d8[_0x5426a7];return _0x1fe6f0;},_0x1fe6(_0x519f24,_0x399aea);}function getDate(){const _0x4f3fc2=_0x339bda,_0x19b543=shiftedTime();return _0x19b543[_0x4f3fc2(0x1d1)]()+'/'+(_0x19b543['getMonth']()+0x1)['toString']()[_0x4f3fc2(0x19f)](0x2,'0')+'/'+_0x19b543[_0x4f3fc2(0x14c)]()[_0x4f3fc2(0x10f)]()[_0x4f3fc2(0x19f)](0x2,'0');}function getHour(){const _0x595860=_0x339bda,_0x5b68c3=shiftedTime();return _0x5b68c3['getHours']()[_0x595860(0x10f)]()[_0x595860(0x19f)](0x2,'0');}function sleep(_0xea7303){return new Promise(_0x16bce3=>setTimeout(_0x16bce3,_0xea7303));}function shiftedTime(){const _0x5eaa06=_0x339bda,_0x335023=new Date();let _0x5c3693=_0x335023;if(config&&config[_0x5eaa06(0x17d)]!==0x0)_0x5c3693=fns['add'](_0x335023,{'hours':config[_0x5eaa06(0x17d)]});return _0x5c3693;}function timer(_0x3d40fa){const _0x425586=_0x339bda,_0x381e1d=new Date();!lasttime?console[_0x425586(0x241)](getTimeStamp()+_0x425586(0x159),_0x3d40fa,_0x381e1d):console[_0x425586(0x241)](getTimeStamp()+':\x20timer\x20>',_0x3d40fa,(_0x381e1d-lasttime)/0x3e8),lasttime=_0x381e1d;}