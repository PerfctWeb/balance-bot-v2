const _0x80a6bd=_0x3300;(function(_0x244d23,_0x58c420){const _0x4f669e=_0x3300,_0x539c12=_0x244d23();while(!![]){try{const _0xa1f2f6=-parseInt(_0x4f669e(0xa6))/0x1*(parseInt(_0x4f669e(0x89))/0x2)+parseInt(_0x4f669e(0xda))/0x3+-parseInt(_0x4f669e(0x16c))/0x4+parseInt(_0x4f669e(0x80))/0x5*(parseInt(_0x4f669e(0x82))/0x6)+-parseInt(_0x4f669e(0xc9))/0x7*(parseInt(_0x4f669e(0xeb))/0x8)+-parseInt(_0x4f669e(0xa1))/0x9*(parseInt(_0x4f669e(0x141))/0xa)+parseInt(_0x4f669e(0x118))/0xb;if(_0xa1f2f6===_0x58c420)break;else _0x539c12['push'](_0x539c12['shift']());}catch(_0x3c1c3a){_0x539c12['push'](_0x539c12['shift']());}}}(_0x35b5,0xa7908));const _0x287ac4=function(){let _0x586916=!![];return function(_0x50794f,_0x2c2db5){const _0x1134b6=_0x586916?function(){const _0x453fc9=_0x3300;if(_0x2c2db5){const _0x511d19=_0x2c2db5[_0x453fc9(0xf3)](_0x50794f,arguments);return _0x2c2db5=null,_0x511d19;}}:function(){};return _0x586916=![],_0x1134b6;};}(),_0x10d298=_0x287ac4(this,function(){const _0x1d6e66=_0x3300;return _0x10d298['toString']()[_0x1d6e66(0xd6)]('(((.+)+)+)+$')[_0x1d6e66(0x129)]()[_0x1d6e66(0x172)](_0x10d298)['search'](_0x1d6e66(0x86));});_0x10d298();'use strict';const ccxt=require('ccxt'),low=require(_0x80a6bd(0x88)),FileSync=require(_0x80a6bd(0xae)),fs=require('fs'),fns=require(_0x80a6bd(0x13f)),{WebsocketClient,DefaultLogger}=require(_0x80a6bd(0x10d)),Crypt=require(_0x80a6bd(0xf7))[_0x80a6bd(0x162)];let exchange,wsClient;global[_0x80a6bd(0x159)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x80a6bd(0x14c))[_0x80a6bd(0xac)],botID=process[_0x80a6bd(0x96)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x80a6bd(0x78)](botID))return console[_0x80a6bd(0x153)](_0x80a6bd(0x179)+botID+_0x80a6bd(0x101)),process[_0x80a6bd(0x136)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x80a6bd(0x189)+userID+'/':_0x80a6bd(0x189);!fs['existsSync'](configpath)&&fs[_0x80a6bd(0x110)](configpath);const configfile=configpath+'bot-'+botID+_0x80a6bd(0x9c),logfile=configpath+_0x80a6bd(0x102)+botID+_0x80a6bd(0x113),performancefile=configpath+_0x80a6bd(0x102)+botID+_0x80a6bd(0x14b),coinresultsfile=configpath+_0x80a6bd(0x102)+botID+_0x80a6bd(0xa7),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x80a6bd(0x16b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x80a6bd(0x16a)]({'data':[]})[_0x80a6bd(0x16b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x80a6bd(0x16a)]({'bot':[]})[_0x80a6bd(0x16b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x80a6bd(0x16a)]({'coins':[]})[_0x80a6bd(0x16b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x80a6bd(0x132)},'usd':{'coin':_0x80a6bd(0x155),'symbol':_0x80a6bd(0x8b)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x7c940e)=>{},'debug':(..._0x52d0f1)=>{},'notice':(..._0x325059)=>{},'info':(..._0x2252f2)=>{},'warning':(..._0x2690a7)=>{},'error':async function(..._0x2004a5){const _0x776b16=_0x80a6bd,_0x4b2998=new Date()[_0x776b16(0xd8)]();if(!lastErrorShown||_0x4b2998-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x776b16(0xd8)](),logHistory(_0x776b16(0xfe),_0x776b16(0xf8)+consecutivePauses+_0x776b16(0xe3));let _0xea150a='';if(_0x2004a5[0x0])_0xea150a+=_0x2004a5[0x0];if(_0x2004a5[0x1]&&_0x2004a5[0x1][_0x776b16(0xfe)]&&_0x2004a5[0x1][_0x776b16(0xfe)]['message'])_0xea150a+='\x20-\x20'+_0x2004a5[0x1]['error'][_0x776b16(0x11e)];logging('WebSockets('+consecutivePauses+_0x776b16(0x145),''+_0xea150a),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x80a6bd(0xf1),'rsaStandard':_0x80a6bd(0x17e)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x80a6bd(0xc3)]&&updateTimeshift(settings[_0x80a6bd(0xc3)]);process[_0x80a6bd(0x13c)]({'started':_0x80a6bd(0xbc)},_0x4ba492=>{}),initializeProcessListeners();function proxyEmit(_0x440c63,_0x21b28a=null){const _0x3f8126=_0x80a6bd;process[_0x3f8126(0x13c)]({'function':_0x440c63,'args':_0x21b28a},_0x3469b5=>{});}function initializeProcessListeners(){process['on']('message',_0x56294e=>{const _0x450c85=_0x3300;switch(Object[_0x450c85(0xff)](_0x56294e)[0x0]){case _0x450c85(0xc3):_0x56294e[_0x450c85(0xc3)]!=undefined&&(settings[_0x450c85(0xc3)]=_0x56294e[_0x450c85(0xc3)],updateTimeshift(settings[_0x450c85(0xc3)]));break;case _0x450c85(0xa3):switch(_0x56294e[_0x450c85(0xa3)]){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x56294e[_0x450c85(0x182)]);break;case'getPortfolio':getPortfolio(_0x56294e['args']);break;case _0x450c85(0x152):storeConfiguration(_0x56294e[_0x450c85(0x182)]);break;case _0x450c85(0x94):storeHeadless(_0x56294e[_0x450c85(0x182)]);break;case _0x450c85(0x151):getStartingBalances();break;case _0x450c85(0x117):placeOrder(_0x56294e[_0x450c85(0x182)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x535eb3=_0x80a6bd;if(pidBalances)clearTimeout(pidBalances);if(config[_0x535eb3(0x143)]!=''){await initExchange(config['apiKey'],config['apiSecret']);let _0xa5d66c=await loadSymbols();_0xa5d66c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x45b4ca,_0x38d8d8){const _0x535405=_0x80a6bd,_0x34b9df=ccxt[config[_0x535405(0x11a)]];let _0x5893f0;switch(config[_0x535405(0x11a)]){case _0x535405(0x10d):_0x5893f0=_0x535405(0x169);break;case _0x535405(0x14a):_0x5893f0=_0x535405(0x12f);break;default:_0x5893f0=_0x535405(0x169);}exchange=new _0x34b9df({'apiKey':_0x45b4ca,'secret':_0x38d8d8,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x45b4ca,'api_secret':_0x38d8d8,'beautify':!![],'wsUrl':_0x5893f0},logger),config['exchange']==_0x535405(0x14a)&&(stablecoins={'eur':{'coin':_0x535405(0xca),'symbol':_0x535405(0x146)},'usd':{'coin':_0x535405(0x155),'symbol':_0x535405(0x8b)}});}async function loadSymbols(){const _0x1850a1=_0x80a6bd;let _0x29c5a1;try{markets=await exchange[_0x1850a1(0x93)]();const _0x124134=[_0x1850a1(0x105),_0x1850a1(0xa5),_0x1850a1(0x139)];allSymbols=exchange[_0x1850a1(0xce)][_0x1850a1(0x122)](_0x237983=>{const _0x572188=_0x1850a1;let _0x311930=![];return _0x124134[_0x572188(0xd0)](_0x106da5=>{const _0x260053=_0x572188;if(_0x237983[_0x260053(0xa8)](_0x106da5))_0x311930=!![];}),!_0x311930;}),_0x29c5a1=!![];}catch(_0x5254a5){await handleError(_0x5254a5,_0x1850a1(0x95)),_0x29c5a1=![];}return _0x29c5a1;}async function initbot(){const _0x5564c1=_0x80a6bd;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2c7a7f=dbCoinResults[_0x5564c1(0x11d)](_0x5564c1(0x164))[_0x5564c1(0x98)]();if(_0x2c7a7f[_0x5564c1(0x125)]==0x0)await resetCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x57edff=_0x80a6bd;wsinitialized=![];ws1&&(ws1[_0x57edff(0xd0)](_0x582a33=>{try{wsClient['closeWs'](_0x582a33);}catch(_0x31b620){}}),ws1=[]);if(ws2){try{wsClient[_0x57edff(0xb0)](ws2);}catch(_0x18426c){}ws2=null;}}async function initws(){const _0x586514=_0x80a6bd;cleanws();let _0x569fdf=[];currentCoins[_0x586514(0xd0)](_0x296ddc=>{const _0x323e5c=_0x586514;if(_0x296ddc[_0x323e5c(0xea)]!=config[_0x323e5c(0x17f)])_0x569fdf[_0x323e5c(0xf2)](noslash(_0x296ddc[_0x323e5c(0x15f)]));});if(!_0x569fdf[_0x586514(0xa8)](stablecoins[_0x586514(0x16d)][_0x586514(0xea)]))_0x569fdf[_0x586514(0xf2)](stablecoins[_0x586514(0x16d)]['coin']);if(!_0x569fdf[_0x586514(0xa8)](stablecoins[_0x586514(0xc7)][_0x586514(0xea)]))_0x569fdf['push'](stablecoins[_0x586514(0xc7)][_0x586514(0xea)]);if(!_0x569fdf[_0x586514(0xa8)]('BNB'+config['basecoin']))_0x569fdf[_0x586514(0xf2)]('BNB'+config['basecoin']);try{_0x569fdf[_0x586514(0xd0)]((_0x4f0e5b,_0x3298b1)=>{const _0x4e6a7b=_0x586514;ws1[_0x3298b1]=wsClient[_0x4e6a7b(0x180)](_0x4f0e5b,'1m');}),ws2=wsClient[_0x586514(0x175)](),wsClient['on'](_0x586514(0x131),_0x39b4a0=>{const _0x1fad64=_0x586514;if(!Array[_0x1fad64(0x12c)](_0x39b4a0)&&!_0x39b4a0[_0x1fad64(0x188)][_0x1fad64(0xa8)]('userData')){if(_0x39b4a0[_0x1fad64(0xc1)]===_0x1fad64(0x15b)){global[_0x1fad64(0x159)][_0x39b4a0[_0x1fad64(0x15b)][_0x1fad64(0x15f)]]=_0x39b4a0[_0x1fad64(0x15b)]['close'];return;}}else{if(!Array['isArray'](_0x39b4a0)&&_0x39b4a0['wsKey'][_0x1fad64(0xa8)]('userData')){if(_0x39b4a0['wsMarket'][_0x1fad64(0xa8)](_0x1fad64(0x184))){updateNumberCoins(_0x39b4a0);return;}}}}),wsClient['on'](_0x586514(0x7b),async _0x4e2d43=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x4da2a4){await handleError(_0x4da2a4,_0x586514(0x127));}let _0x2abc19,_0x3ea700=0x0;loading[_0x586514(0x12d)]=[];let _0x1c84e0=0x0;currentCoins[_0x586514(0xd0)](_0x38c326=>{const _0x90f915=_0x586514;if(_0x38c326[_0x90f915(0xea)]!=config[_0x90f915(0x17f)])loading[_0x90f915(0x12d)][_0x90f915(0xf2)](_0x38c326[_0x90f915(0x15f)]);}),loadingCanceled=![];while(_0x2abc19!=currentCoins['length']-0x1){_0x2abc19=0x0,currentCoins[_0x586514(0xd0)](_0x2c38fd=>{const _0x5e4cb4=_0x586514;_0x2c38fd[_0x5e4cb4(0xea)]!=config['basecoin']&&global[_0x5e4cb4(0x159)][noslash(_0x2c38fd[_0x5e4cb4(0x15f)])]&&(loading['remainingSymbols']=loading[_0x5e4cb4(0x12d)][_0x5e4cb4(0x122)](_0x535c8f=>_0x535c8f!=_0x2c38fd[_0x5e4cb4(0x15f)]),_0x2abc19++);}),loading['progress']=Math[_0x586514(0x128)](_0x2abc19/(currentCoins[_0x586514(0x125)]-0x1)*0x64);_0x1c84e0>0x1e*0x5&&(loading[_0x586514(0x17c)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x586514(0xb1)]=!![],emitLoadingProgress();break;}else _0x2abc19!=_0x3ea700&&(_0x3ea700=_0x2abc19,emitLoadingProgress()),_0x1c84e0++,await sleep(0xc8);}if(_0x2abc19==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x3d3df2=_0x80a6bd;proxyEmit(_0x3d3df2(0x7c),loading);}async function getFiat(){const _0x5623ad=_0x80a6bd;let _0x34731b=0x0,_0x345227=0x0;try{_0x34731b=global['ticker'][stablecoins['eur']['coin']],_0x345227=global[_0x5623ad(0x159)][stablecoins['usd'][_0x5623ad(0xea)]];}catch(_0x15cac2){await handleError(_0x15cac2,_0x5623ad(0x10b));}return{'eur':Number(_0x34731b),'usd':Number(_0x345227)};}async function setStartDatePerformance(_0x343d30){const _0x5752ab=_0x80a6bd,_0x50739f=fns[_0x5752ab(0xb2)](new Date(_0x343d30[_0x5752ab(0xf9)]),_0x5752ab(0xc0));let _0x44ec4f=[];_0x44ec4f[stablecoins['eur']['coin']]=await getCloses(stablecoins[_0x5752ab(0x16d)][_0x5752ab(0x15f)],new Date(_0x343d30[_0x5752ab(0xf9)]),0x1),_0x44ec4f[stablecoins['usd'][_0x5752ab(0xea)]]=await getCloses(stablecoins[_0x5752ab(0xc7)]['symbol'],new Date(_0x343d30[_0x5752ab(0xf9)]),0x1);let _0x54cdb2,_0x1043d3=[];_0x343d30[_0x5752ab(0x81)][_0x5752ab(0xd0)](_0x37eefb=>{const _0x4d870f=_0x5752ab;!_0x37eefb[_0x4d870f(0xab)]&&_0x1043d3[_0x4d870f(0xf2)]({'coin':_0x37eefb[_0x4d870f(0xea)],'number':_0x37eefb[_0x4d870f(0x167)],'price':_0x37eefb['startprice']});}),_0x54cdb2={'date':_0x50739f,'eur':_0x44ec4f[stablecoins[_0x5752ab(0x16d)]['coin']][0x0],'usd':_0x44ec4f[stablecoins[_0x5752ab(0xc7)][_0x5752ab(0xea)]][0x0],'coins':_0x1043d3};let _0x1dfed8=dbPerformance[_0x5752ab(0x11d)](_0x5752ab(0xde))[_0x5752ab(0x18a)]({'date':_0x50739f})[_0x5752ab(0x98)]();_0x1dfed8?dbPerformance[_0x5752ab(0x11d)](_0x5752ab(0xde))[_0x5752ab(0x18a)]({'date':_0x50739f})['assign'](_0x54cdb2)['write']():dbPerformance['get']('data')[_0x5752ab(0xf2)](_0x54cdb2)[_0x5752ab(0x16b)](),_0x1dfed8=dbPerformance[_0x5752ab(0x11d)](_0x5752ab(0xde))['sortBy'](_0x5752ab(0x168))[_0x5752ab(0x98)](),_0x1dfed8[_0x5752ab(0xd0)](_0x518f31=>{const _0x7c8fc2=_0x5752ab;_0x518f31[_0x7c8fc2(0x168)]<_0x50739f&&dbPerformance[_0x7c8fc2(0x11d)](_0x7c8fc2(0xde))[_0x7c8fc2(0x176)]({'date':_0x518f31[_0x7c8fc2(0x168)]})[_0x7c8fc2(0x16b)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x2c0a38){const _0x3f75a6=_0x80a6bd;let _0x2b7c47,_0x39ad69=[];logHistory(_0x3f75a6(0x79),_0x3f75a6(0xe0)),_0x2c0a38[_0x3f75a6(0x81)][_0x3f75a6(0xd0)](_0x1fc8a2=>{const _0x5c086e=_0x3f75a6;if(_0x1fc8a2[_0x5c086e(0xea)]!=config['basecoin']&&!_0x1fc8a2[_0x5c086e(0xab)])_0x39ad69[_0x5c086e(0xf2)]({'coin':_0x1fc8a2[_0x5c086e(0xea)],'symbol':_0x1fc8a2[_0x5c086e(0x15f)]});});let _0x1f348c=[];try{const _0x2f8c43=fns[_0x3f75a6(0xb2)](fns['parseISO'](_0x2c0a38['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x190127 of _0x39ad69){if(_0x190127[_0x3f75a6(0xea)]!=config['basecoin'])_0x2b7c47=await exchange[_0x3f75a6(0x14e)](_0x190127[_0x3f75a6(0x15f)],Date[_0x3f75a6(0x177)](_0x2f8c43));_0x2b7c47[_0x3f75a6(0xd0)](_0x3f4b69=>{const _0x2d6c89=_0x3f75a6,_0x523bee=_0x190127[_0x2d6c89(0x15f)][_0x2d6c89(0xa8)](config[_0x2d6c89(0x17f)]+'/'),_0x35d057=fns[_0x2d6c89(0xb2)](fns[_0x2d6c89(0xf4)](_0x3f4b69[_0x2d6c89(0xa9)]),_0x2d6c89(0x173)),_0xd7f2eb=fns[_0x2d6c89(0xb2)](fns[_0x2d6c89(0xf4)](_0x3f4b69[_0x2d6c89(0xa9)]),_0x2d6c89(0xc0));let _0xb2dc1b;if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0x9d)&&_0x523bee==![])_0xb2dc1b=_0x3f4b69[_0x2d6c89(0xee)];if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0x9d)&&_0x523bee==!![])_0xb2dc1b=-_0x3f4b69[_0x2d6c89(0xee)]*_0x3f4b69['price'];if(_0x3f4b69['side']==_0x2d6c89(0xe9)&&_0x523bee==![])_0xb2dc1b=-_0x3f4b69[_0x2d6c89(0xee)];if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0xe9)&&_0x523bee==!![])_0xb2dc1b=_0x3f4b69['amount']*_0x3f4b69['price'];_0x1f348c[_0x2d6c89(0xf2)]({'timestamp':_0x35d057,'date':_0xd7f2eb,'coin':_0x190127[_0x2d6c89(0xea)],'symbol':_0x190127[_0x2d6c89(0x15f)],'type':_0x3f4b69[_0x2d6c89(0x158)],'side':_0x3f4b69[_0x2d6c89(0x187)],'reverse':_0x523bee,'amount':formatResult(_0x3f4b69[_0x2d6c89(0xfa)],0x8),'filled':formatResult(_0x3f4b69[_0x2d6c89(0xfa)],0x8),'coinamount':formatResult(_0xb2dc1b,0x8),'price':formatResult(_0x3f4b69['price'],0x8)});let _0x1d1cc0;if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0x9d)&&_0x523bee==![])_0x1d1cc0=-_0x3f4b69[_0x2d6c89(0xee)]*_0x3f4b69[_0x2d6c89(0x165)];if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0x9d)&&_0x523bee==!![])_0x1d1cc0=_0x3f4b69['amount'];if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0xe9)&&_0x523bee==![])_0x1d1cc0=_0x3f4b69[_0x2d6c89(0xee)]*_0x3f4b69[_0x2d6c89(0x165)];if(_0x3f4b69[_0x2d6c89(0x187)]==_0x2d6c89(0xe9)&&_0x523bee==!![])_0x1d1cc0=-_0x3f4b69[_0x2d6c89(0xee)];_0x1f348c['push']({'date':_0xd7f2eb,'coin':config[_0x2d6c89(0x17f)],'coinamount':formatResult(_0x1d1cc0,0x8)});});}_0x1f348c['sort']((_0x26e024,_0x4b7e9a)=>_0x26e024[_0x3f75a6(0x138)]>_0x4b7e9a[_0x3f75a6(0x138)]?0x1:_0x4b7e9a[_0x3f75a6(0x138)]>_0x26e024['timestamp']?-0x1:0x0),dbLogs['get'](_0x3f75a6(0x130))[_0x3f75a6(0x176)]()[_0x3f75a6(0x16b)](),_0x1f348c[_0x3f75a6(0xd0)](_0x4a5be0=>{const _0x3ddeaa=_0x3f75a6;let _0x2b03d5;_0x4a5be0[_0x3ddeaa(0xea)]!=config[_0x3ddeaa(0x17f)]&&(_0x2b03d5={'time':_0x4a5be0[_0x3ddeaa(0x138)],'type':_0x3ddeaa(0xd9),'event':_0x3ddeaa(0x7f)+_0x4a5be0[_0x3ddeaa(0x15f)]+'\x20'+_0x4a5be0[_0x3ddeaa(0x187)]+'\x20#'+_0x4a5be0[_0x3ddeaa(0xee)]+'\x20@'+_0x4a5be0[_0x3ddeaa(0x165)]},dbLogs[_0x3ddeaa(0x11d)](_0x3ddeaa(0x130))[_0x3ddeaa(0xf2)](_0x2b03d5)[_0x3ddeaa(0x16b)]());});const _0x387010=fns[_0x3f75a6(0x11c)]({'start':new Date(_0x2c0a38[_0x3f75a6(0xf9)]),'end':new Date()})[_0x3f75a6(0x100)](_0x43c47d=>fns['format'](_0x43c47d,_0x3f75a6(0xc0)));let _0x1bc715=[];_0x2c0a38[_0x3f75a6(0x81)][_0x3f75a6(0xd0)](_0x3190b4=>{const _0x1052b9=_0x3f75a6;if(!_0x3190b4[_0x1052b9(0xab)]){_0x1bc715[_0x3190b4[_0x1052b9(0xea)]]=[];let _0x328722=_0x3190b4[_0x1052b9(0x167)];_0x387010['forEach']((_0x1e7b23,_0x1ea40e)=>{const _0x10ece8=_0x1052b9;let _0x9579d4=_0x1f348c['filter'](_0xeddec7=>_0xeddec7[_0x10ece8(0xea)]==_0x3190b4[_0x10ece8(0xea)]&&_0xeddec7[_0x10ece8(0x168)]==_0x1e7b23);if(_0x9579d4[_0x10ece8(0x125)]!=0x0){let _0x12cde0=_0x9579d4[_0x10ece8(0x15e)]((_0x1525f3,_0x4d52f8)=>{const _0x24404f=_0x10ece8;return _0x1525f3+=_0x4d52f8[_0x24404f(0x174)],_0x1525f3;},0x0);_0x328722+=_0x12cde0;}_0x1bc715[_0x3190b4[_0x10ece8(0xea)]][_0x1e7b23]=_0x328722;});}});const _0x5cf503=[..._0x39ad69];_0x5cf503[_0x3f75a6(0xf2)]({'coin':stablecoins[_0x3f75a6(0x16d)]['coin'],'symbol':stablecoins[_0x3f75a6(0x16d)]['symbol']}),_0x5cf503[_0x3f75a6(0xf2)]({'coin':stablecoins[_0x3f75a6(0xc7)]['coin'],'symbol':stablecoins[_0x3f75a6(0xc7)]['symbol']});let _0x313604=[];for(const _0x2e5a2c of _0x5cf503){_0x313604[_0x2e5a2c[_0x3f75a6(0xea)]]=await getCloses(_0x2e5a2c[_0x3f75a6(0x15f)],new Date(_0x2c0a38[_0x3f75a6(0xf9)]));}dbPerformance[_0x3f75a6(0x11d)]('data')[_0x3f75a6(0x176)]()[_0x3f75a6(0x16b)](),_0x387010['forEach']((_0x327137,_0x41475f)=>{const _0x57ac82=_0x3f75a6;let _0xfe9003,_0x5463ab=[];_0x41475f==0x0?(_0x2c0a38[_0x57ac82(0x81)][_0x57ac82(0xd0)](_0xc60fb5=>{const _0x399d58=_0x57ac82;!_0xc60fb5['excluded']&&_0x5463ab[_0x399d58(0xf2)]({'coin':_0xc60fb5[_0x399d58(0xea)],'number':_0xc60fb5[_0x399d58(0x167)],'price':_0xc60fb5['startprice']});}),_0xfe9003={'date':_0x327137,'eur':_0x313604[stablecoins['eur']['coin']][_0x41475f],'usd':_0x313604[stablecoins[_0x57ac82(0xc7)][_0x57ac82(0xea)]][_0x41475f],'coins':_0x5463ab}):(_0x2c0a38[_0x57ac82(0x81)]['forEach'](_0x2f7491=>{const _0x15b089=_0x57ac82;!_0x2f7491[_0x15b089(0xab)]&&_0x5463ab['push']({'coin':_0x2f7491[_0x15b089(0xea)],'number':_0x1bc715[_0x2f7491[_0x15b089(0xea)]][_0x327137],'price':_0x2f7491[_0x15b089(0xea)]==config[_0x15b089(0x17f)]?0x1:_0x313604[_0x2f7491[_0x15b089(0xea)]][_0x41475f]});}),_0xfe9003={'date':_0x327137,'eur':_0x313604[stablecoins[_0x57ac82(0x16d)][_0x57ac82(0xea)]][_0x41475f],'usd':_0x313604[stablecoins[_0x57ac82(0xc7)]['coin']][_0x41475f],'coins':_0x5463ab}),dbPerformance[_0x57ac82(0x11d)](_0x57ac82(0xde))[_0x57ac82(0xf2)](_0xfe9003)[_0x57ac82(0x16b)]();}),emitPerformance(),await resetCoinResults();for(let _0x373014 of _0x1f348c){_0x373014[_0x3f75a6(0xea)]!=config['basecoin']&&await updateCoinResults(_0x373014);}logHistory(_0x3f75a6(0x79),_0x3f75a6(0x121));}catch(_0xac198d){await handleError(_0xac198d,_0x3f75a6(0x15d));}}async function getCloses(_0x3aea1c,_0x4601b0,_0x5d74ae=undefined){const _0x57873f=_0x80a6bd,_0x22fd67='1d';let _0x28db8a,_0x55807a;const _0x35fe14=fns[_0x57873f(0x13b)](new Date(),_0x4601b0)+0x1;try{const _0x27a904=exchange[_0x57873f(0xd1)]()-_0x35fe14*0x18*0xe10*0x3e8;_0x28db8a=await exchange[_0x57873f(0xf6)](_0x3aea1c,_0x22fd67,_0x27a904,_0x5d74ae),_0x55807a=await exchange[_0x57873f(0x181)](_0x3aea1c);}catch(_0x2dc3c4){await handleError(_0x2dc3c4,_0x57873f(0xc2));}let _0x493230=ohlcvToCloses(_0x28db8a);return _0x493230[_0x57873f(0xf2)](_0x55807a[_0x3aea1c][_0x57873f(0xed)]),_0x493230;}function ohlcvToCloses(_0x576604){const _0x3d8ca8=_0x80a6bd;let _0x3e22be=[];return _0x576604[_0x3d8ca8(0xd0)](function(_0x37bcfa){const _0x8791d6=_0x3d8ca8;_0x3e22be[_0x8791d6(0xf2)](_0x37bcfa[0x4]);}),_0x3e22be;}function getConfiguration(_0x3488ed){const _0x1688b0=_0x80a6bd;let _0x3fef73=dbConfig['get']('bot')[_0x1688b0(0x18a)]({'botID':_0x3488ed})[_0x1688b0(0x98)]();if(_0x3fef73){let _0x5c795=![];!_0x3fef73['exchange']&&(_0x3fef73={..._0x3fef73,'exchange':_0x1688b0(0x10d)},_0x5c795=!![]),!_0x3fef73[_0x1688b0(0x17f)]&&(_0x3fef73={..._0x3fef73,'basecoin':'BTC'},_0x5c795=!![]),!_0x3fef73['ordertype']&&(_0x3fef73={..._0x3fef73,'ordertype':_0x1688b0(0x120)},_0x5c795=!![]),!_0x3fef73[_0x1688b0(0x17c)]&&(_0x3fef73={..._0x3fef73,'timeout':0x14},_0x5c795=!![]),!_0x3fef73['emojibuy']&&(_0x3fef73={..._0x3fef73,'emojibuy':''},_0x5c795=!![]),!_0x3fef73[_0x1688b0(0x171)]&&(_0x3fef73={..._0x3fef73,'emojisell':''},_0x5c795=!![]),!_0x3fef73[_0x1688b0(0x12e)]&&(_0x3fef73={..._0x3fef73,'showname':![]},_0x5c795=!![]),_0x5c795&&(_0x3fef73={'botID':_0x3fef73[_0x1688b0(0x133)],'exchange':_0x3fef73[_0x1688b0(0x11a)],'apiKey':_0x3fef73[_0x1688b0(0x143)],'apiSecret':_0x3fef73[_0x1688b0(0x10e)],'basecoin':_0x3fef73['basecoin'],'botname':_0x3fef73[_0x1688b0(0x90)],'showname':_0x3fef73['showname'],'threshold':_0x3fef73[_0x1688b0(0x106)],'ordertype':_0x3fef73[_0x1688b0(0x91)],'timeout':_0x3fef73[_0x1688b0(0x17c)],'startdate':_0x3fef73['startdate'],'recreate':_0x3fef73[_0x1688b0(0xb8)],'timeshift':_0x3fef73[_0x1688b0(0xc3)],'headless':_0x3fef73[_0x1688b0(0xbb)],'cooldown':_0x3fef73[_0x1688b0(0x109)],'emojibuy':_0x3fef73[_0x1688b0(0x150)],'emojisell':_0x3fef73['emojisell'],'portfolio':_0x3fef73[_0x1688b0(0x81)]},dbConfig['get'](_0x1688b0(0x7e))[_0x1688b0(0x176)]()['write'](),dbConfig['get'](_0x1688b0(0x7e))['push'](_0x3fef73)[_0x1688b0(0x16b)]());}else _0x3fef73={'botID':_0x3488ed,'exchange':_0x1688b0(0x10d),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1688b0(0x7d)+_0x3488ed,'showname':![],'threshold':'3','ordertype':_0x1688b0(0x120),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1688b0(0xc3)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x3fef73;}function emittedConfiguration(){const _0x417ae9=_0x80a6bd;let _0x1e7da2;return config[_0x417ae9(0x143)]==''?_0x1e7da2=config:_0x1e7da2={...config,'apiKey':_0x417ae9(0xf5),'apiSecret':_0x417ae9(0xf5)},_0x1e7da2;}function getSettings(){const _0x3f14e2=_0x80a6bd;return dbSettings[_0x3f14e2(0x11d)](_0x3f14e2(0x134))[_0x3f14e2(0x98)]();}function getSecure(){const _0x2063c7=_0x80a6bd;return dbSecure[_0x2063c7(0x11d)](_0x2063c7(0x185))[_0x2063c7(0x98)]()||{};}function updateTimeshift(_0x1e753a){const _0x58fced=_0x80a6bd;let _0x1b2ed2=dbConfig[_0x58fced(0x11d)](_0x58fced(0x7e))['find']({'botID':botID})[_0x58fced(0x98)]();_0x1b2ed2&&dbConfig[_0x58fced(0x11d)]('bot')['find']({'botID':botID})['assign']({'timeshift':_0x1e753a})['write'](),config['timeshift']=_0x1e753a,proxyEmit(_0x58fced(0xba),emittedConfiguration());}async function storeConfiguration(_0x3103ea){const _0x23c6b8=_0x80a6bd;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x15bcac=dbConfig[_0x23c6b8(0x11d)]('bot')[_0x23c6b8(0x18a)]({'botID':botID})[_0x23c6b8(0x98)]();_0x3103ea={..._0x3103ea,'apiKey':crypt['decrypt'](secure['privateKey'],_0x3103ea[_0x23c6b8(0x143)])[_0x23c6b8(0x11e)],'apiSecret':crypt[_0x23c6b8(0xdb)](secure['privateKey'],_0x3103ea[_0x23c6b8(0x10e)])['message']};if(_0x15bcac){if(_0x3103ea[_0x23c6b8(0x143)]==_0x23c6b8(0xf5))_0x3103ea['apiKey']=config[_0x23c6b8(0x143)];if(_0x3103ea[_0x23c6b8(0x10e)]==_0x23c6b8(0xf5))_0x3103ea[_0x23c6b8(0x10e)]=config[_0x23c6b8(0x10e)];dbConfig[_0x23c6b8(0x11d)](_0x23c6b8(0x7e))[_0x23c6b8(0x18a)]({'botID':botID})[_0x23c6b8(0x144)](_0x3103ea)[_0x23c6b8(0x16b)]();}else dbConfig[_0x23c6b8(0x11d)](_0x23c6b8(0x7e))['push'](_0x3103ea)['write'](),process[_0x23c6b8(0x13c)]({'status':'enabled','live':_0x23c6b8(0xbc)},_0x4c1551=>{});config={..._0x3103ea};if(config[_0x23c6b8(0xb8)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x23c6b8(0x13c)]({'botname':_0x3103ea['botname']},_0x1e4ee2=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x49ee0c){const _0xf1a272=_0x80a6bd,_0x3dbcc0={...config,'headless':_0x49ee0c['headless']};let _0x61ca94=dbConfig['get'](_0xf1a272(0x7e))[_0xf1a272(0x18a)]({'botID':botID})[_0xf1a272(0x98)]();_0x61ca94&&dbConfig[_0xf1a272(0x11d)]('bot')[_0xf1a272(0x18a)]({'botID':botID})[_0xf1a272(0x144)](_0x3dbcc0)[_0xf1a272(0x16b)](),config={..._0x3dbcc0},proxyEmit(_0xf1a272(0xba),emittedConfiguration());}function noslash(_0x491ee6){const _0x375c70=_0x80a6bd;return _0x491ee6[_0x375c70(0x99)]('/','');}function updateNumberCoins(_0x1bdac6){const _0x9cbbad=_0x80a6bd;_0x1bdac6['eventType']&&_0x1bdac6['eventType']==_0x9cbbad(0xe7)&&_0x1bdac6['balances'][_0x9cbbad(0xd0)](_0x17c52f=>{const _0x9fc78e=_0x9cbbad;let _0x4ec4d4=currentCoins['find'](_0x34f912=>_0x34f912[_0x9fc78e(0xea)]==_0x17c52f[_0x9fc78e(0xc8)]),_0x2d53ac=config[_0x9fc78e(0x81)][_0x9fc78e(0x18a)](_0x5e0091=>_0x5e0091[_0x9fc78e(0xea)]==_0x17c52f[_0x9fc78e(0xc8)]);if(_0x4ec4d4&&_0x2d53ac)_0x4ec4d4['number']=Math[_0x9fc78e(0xbf)](Number(_0x17c52f[_0x9fc78e(0xd5)])+(_0x2d53ac[_0x9fc78e(0x9e)]||0x0),0x0);});if(_0x1bdac6[_0x9cbbad(0xc1)]&&_0x1bdac6['eventType']==_0x9cbbad(0x17a)){if(_0x1bdac6[_0x9cbbad(0xaa)]==_0x9cbbad(0xaf)&&_0x1bdac6[_0x9cbbad(0xfd)]==_0x9cbbad(0x7a)){if(lastOrders)lastOrders[_0x9cbbad(0xd0)](_0xa79ebb=>{const _0x4a7c64=_0x9cbbad;if(_0xa79ebb[_0x4a7c64(0x161)]==_0x1bdac6['orderId']){if(_0xa79ebb[_0x4a7c64(0x8e)])_0xa79ebb['filled']=_0x1bdac6[_0x4a7c64(0xe1)]*_0xa79ebb['price'];else _0xa79ebb[_0x4a7c64(0xfa)]=_0x1bdac6['accumulatedQuantity'];}});}}}function _0x35b5(){const _0x43d2ef=['slice','cooldown','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','getFiat()','Pausing\x20bot\x20for\x205\x20minutes\x20(','binance','apiSecret','event','mkdirSync','OrderNotFound','cancelOrder','-events.json','buys','BNB','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','placeOrder','29216121rEfGbk','createOrder','exchange','\x20>\x20','eachDayOfInterval','get','message','kill','market','Performance\x20recreation\x20completed\x20successfully','filter','limit','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','length','padStart','initws()','round','toString','page','MIN_NOTIONAL','isArray','remainingSymbols','showname','wss://stream.binance.us:9443','logs','formattedMessage','BTC/EUR','botID','settings','cancelOrder()','exit','Order(s)\x20filled\x20-\x20balancing\x20resumed','timestamp','HOT/EUR','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','differenceInCalendarDays','send','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','fee','date-fns','bid','10FEiKkj','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','apiKey','assign',')\x20|\x20Error\x20details:\x20','BTC/BUSD','trade','getSeconds','distribution','binanceus','-performance.json','./version.json','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fetchOrders','getHours','emojibuy','getStartingBalances','storeConfiguration','log','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','BTCUSDT','Order\x20filled:\x20','cost','type','ticker','\x20orders\x20in\x20less\x20than\x20','kline','performance','recreateHistory()','reduce','symbol','sortBy','orderId','Crypt','USDT','coins','price','Binance\x20API\x20key\x20is\x20invalid','startnumber','date','wss://stream.binance.com:9443','defaults','write','4613572wViSom','eur','getMinutes','fromCodePoint','event-history','emojisell','constructor','yyyy/MM/dd\x20HH:mm:ss','coinamount','subscribeSpotUserDataStream','remove','parse','getMonth','Error:\x20Invalid\x20argument\x20','executionReport','delta','timeout','realized','RSA-OAEP','basecoin','subscribeSpotKline','fetchTickers','args','limit-high','spot','secure','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','side','wsKey','./config/','find','test','success','FILLED','reconnected','coin-loading-progress','Bot\x20','bot','Order:\x20','5vyiAWV','portfolio','5488188rJVUsi','ExchangeNotAvailable','split','sells','(((.+)+)+)+$','indexOf','lowdb','20oSankG','splice','BTC/USDT','differenceInSeconds','entries','reverse','startprice','botname','ordertype','currency','loadMarkets','storeHeadless','loadSymbols()','argv','fetchBalance','value','replace','Invalid\x20quantity','fees','-config.json','buy','offset','starting-balances','Market','2744172IqiptQ','getCoins()','function','breakeven','HOT/BTC','52571khmaZK','-results.json','includes','datetime','orderType','excluded','version','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','lowdb/adapters/FileSync','LIMIT','closeWs','cancel','format','getDate','limits','Binance\x20API\x20secret\x20is\x20invalid','number','\x20hour','recreate','\x20|\x20Error\x20details:\x20','configuration','headless','running','Executed\x20','placeOrder()','max','yyyy/MM/dd','eventType','getCloses()','timeshift','InsufficientFunds','Limit\x20(high-margin)','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','usd','asset','2684346wmvvnf','BTCBUSD','BTC','sort','abs','symbols','Limit\x20(low-margin)','forEach','milliseconds','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','target','Order(s)\x20not\x20validated\x20after\x20','availableBalance','search','valid','getTime','order','750240OJmcZg','decrypt','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance',':\x20Bot\x20','data','getFullYear','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','accumulatedQuantity','has',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','AuthenticationError','time','outboundAccountPosition','balances','sell','coin','24VEGzAa','stringify','last','amount','API-key\x20format\x20invalid','Order(s)\x20validated\x20-\x20balancing\x20resumed','sha256','push','apply','parseISO','************','fetchOHLCV','hybrid-crypto-js','WebSockets(','startdate','filled','toLowerCase','min','orderStatus','error','keys','map',',\x20must\x20be\x20a\x203\x20digit\x20number','bot-','EUR','\x20order:\x20','DAI/','threshold','Order\x20amount\x20is\x20invalid:\x20'];_0x35b5=function(){return _0x43d2ef;};return _0x35b5();}async function getCoins(_0x2753f6=!![],_0x3b5f37=config[_0x80a6bd(0x17f)]){const _0x1f8d5d=_0x80a6bd;let _0x2edaea,_0x4094a3=[],_0x5c5cf6=[],_0x440ae3=[];try{_0x2edaea=await exchange[_0x1f8d5d(0x97)](),mybalances=_0x2edaea['total'];if(!_0x2753f6)for(const [_0x137e9b,_0x2ba081]of Object[_0x1f8d5d(0x8d)](mybalances)){_0x440ae3[_0x1f8d5d(0xf2)](_0x137e9b);}else config[_0x1f8d5d(0x81)]['forEach'](_0x234360=>{const _0x14ae3d=_0x1f8d5d;if(!_0x234360[_0x14ae3d(0xab)])_0x440ae3[_0x14ae3d(0xf2)](_0x234360['coin']);});if(_0x3b5f37=='')for(const [_0x1774ac,_0x554541]of Object['entries'](mybalances)){_0x554541['toString']()!=0x0&&_0x5c5cf6[_0x1f8d5d(0xf2)]({'coin':_0x1774ac});}else for(const [_0x126163,_0x1ae31a]of Object[_0x1f8d5d(0x8d)](mybalances)){if(_0x440ae3[_0x1f8d5d(0xa8)](_0x126163)){const _0x1d6aeb=config[_0x1f8d5d(0x81)]['find'](_0x4d2ec8=>_0x4d2ec8['coin']==_0x126163);if((_0x1ae31a['toString']()!=0x0||_0x1d6aeb)&&(allSymbols['includes'](_0x126163+'/'+_0x3b5f37)||_0x126163==_0x3b5f37))_0x5c5cf6[_0x1f8d5d(0xf2)]({'coin':_0x126163,'symbol':_0x126163+'/'+_0x3b5f37,'reverse':![],'number':Math['max'](_0x1ae31a+(_0x1d6aeb&&_0x1d6aeb[_0x1f8d5d(0x9e)]||0x0),0x0)}),_0x126163!=_0x3b5f37&&_0x4094a3[_0x1f8d5d(0xf2)](_0x126163+'/'+_0x3b5f37);else(_0x1ae31a[_0x1f8d5d(0x129)]()!=0x0||_0x1d6aeb)&&allSymbols[_0x1f8d5d(0xa8)](_0x3b5f37+'/'+_0x126163)&&(_0x5c5cf6[_0x1f8d5d(0xf2)]({'coin':_0x126163,'symbol':_0x3b5f37+'/'+_0x126163,'reverse':!![],'number':Math[_0x1f8d5d(0xbf)](_0x1ae31a+(_0x1d6aeb&&_0x1d6aeb[_0x1f8d5d(0x9e)]||0x0),0x0)}),_0x126163!=_0x3b5f37&&_0x4094a3['push'](_0x3b5f37+'/'+_0x126163));}}}catch(_0x40be45){if(!_0x2753f6){if(_0x40be45[_0x1f8d5d(0x129)]()[_0x1f8d5d(0xa8)](_0x1f8d5d(0xef)))return logHistory(_0x1f8d5d(0xfe),_0x1f8d5d(0x166)),![];else{if(_0x40be45[_0x1f8d5d(0x129)]()[_0x1f8d5d(0xa8)]('AuthenticationError'))return logHistory(_0x1f8d5d(0xfe),_0x1f8d5d(0xdc)),![];else{if(_0x40be45['toString']()[_0x1f8d5d(0xa8)](_0x1f8d5d(0x14d)))return logHistory(_0x1f8d5d(0xfe),_0x1f8d5d(0xb5)),![];else await handleError(_0x40be45,_0x1f8d5d(0xa2));}}}else await handleError(_0x40be45,_0x1f8d5d(0xa2));}return _0x5c5cf6;}async function getPortfolio(_0x1de4f3){const _0x2d005e=_0x80a6bd;let _0x3eb97d=[],_0x7f6c18=[],_0xfd8a3c,_0x527b54=[],_0x51a014,_0x2257ae;_0x1de4f3[_0x2d005e(0x143)]===_0x2d005e(0xf5)||_0x1de4f3[_0x2d005e(0x10e)]===_0x2d005e(0xf5)?(_0x51a014=config[_0x2d005e(0x143)],_0x2257ae=config[_0x2d005e(0x10e)]):(_0x51a014=_0x1de4f3[_0x2d005e(0x143)],_0x2257ae=_0x1de4f3[_0x2d005e(0x10e)]);await initExchange(_0x51a014,_0x2257ae);let _0x62e643=await loadSymbols();if(_0x62e643){_0x527b54=await getCoins(![],_0x1de4f3[_0x2d005e(0x17f)]);if(_0x527b54===![])proxyEmit(_0x2d005e(0x81),![]);else{if(_0x1de4f3[_0x2d005e(0x17f)]=='')proxyEmit('portfolio',_0x527b54);else{_0x527b54[_0x2d005e(0xd0)](_0x5a38b0=>{const _0x36f38d=_0x2d005e;_0x3eb97d['push'](_0x5a38b0[_0x36f38d(0x15f)]);});try{_0x7f6c18=await exchange[_0x2d005e(0x181)](_0x3eb97d);}catch(_0x45435e){await handleError(_0x45435e,'getPortfolio()');}_0x527b54[_0x2d005e(0xd0)](_0x5d76f1=>{const _0x33a4f6=_0x2d005e;_0x5d76f1['coin']!=_0x1de4f3[_0x33a4f6(0x17f)]?_0xfd8a3c=_0x5d76f1[_0x33a4f6(0x8e)]?0x1/_0x7f6c18[_0x5d76f1[_0x33a4f6(0x15f)]][_0x33a4f6(0xed)]:_0x7f6c18[_0x5d76f1['symbol']][_0x33a4f6(0xed)]:_0xfd8a3c=0x1,_0x5d76f1['price']=formatResult(_0xfd8a3c,0x8);}),proxyEmit(_0x2d005e(0x81),_0x527b54);}}}else proxyEmit(_0x2d005e(0x81),![]);}function checkMinimums(_0x129d20){const _0x17ad10=_0x80a6bd;let _0x368318=!![];const _0x5edff3=!_0x129d20[_0x17ad10(0x8e)]?markets[_0x129d20[_0x17ad10(0x15f)]]['limits']['amount']['min']:markets[_0x129d20['symbol']][_0x17ad10(0xb4)]['cost']['min'],_0x471364=!_0x129d20[_0x17ad10(0x8e)]?markets[_0x129d20[_0x17ad10(0x15f)]][_0x17ad10(0xb4)][_0x17ad10(0x157)][_0x17ad10(0xfc)]:markets[_0x129d20['symbol']]['limits'][_0x17ad10(0xee)]['min'];if(Math[_0x17ad10(0xcd)](_0x129d20[_0x17ad10(0x147)])<_0x5edff3)_0x368318=![];if(Math[_0x17ad10(0xcd)](_0x129d20[_0x17ad10(0x147)])*_0x129d20[_0x17ad10(0xed)]<_0x471364)_0x368318=![];return _0x368318;}async function getBalances(){const _0x4a6058=_0x80a6bd;let _0x4c6733=0x0,_0x86cd32;const _0x3a266b=config[_0x4a6058(0x106)];currentCoins[_0x4a6058(0xd0)](_0x3b89c0=>{const _0x71d521=_0x4a6058;if(_0x3b89c0[_0x71d521(0xea)]!=config[_0x71d521(0x17f)]){let _0x7da22d=global[_0x71d521(0x159)][noslash(_0x3b89c0[_0x71d521(0x15f)])];_0x86cd32=_0x3b89c0['reverse']?0x1/_0x7da22d:_0x7da22d;}else _0x86cd32=0x1;let _0x3602a9=_0x3b89c0[_0x71d521(0xb6)]*_0x86cd32;_0x4c6733+=_0x3602a9,_0x3b89c0['last']=formatResult(Number(_0x86cd32),0x8),_0x3b89c0[_0x71d521(0x98)]=_0x3602a9;}),currentCoins['forEach'](_0x30841e=>{const _0x2099ea=_0x4a6058;let _0x201dbe=config[_0x2099ea(0x81)]['find'](_0x502600=>_0x502600['coin']==_0x30841e[_0x2099ea(0xea)]),_0x5e0f91=Number(_0x201dbe[_0x2099ea(0x149)]),_0x3c3d=_0x30841e['value']/_0x4c6733*0x64,_0x453a33=_0x5e0f91*_0x4c6733/0x64/_0x30841e[_0x2099ea(0xed)]-_0x30841e[_0x2099ea(0xb6)];_0x30841e[_0x2099ea(0x149)]=formatResult(_0x3c3d,0x3),_0x30841e['target']=formatResult(_0x5e0f91,0x3),_0x30841e[_0x2099ea(0x147)]=formatResult(_0x453a33,0x8),_0x30841e['side']='',_0x30841e[_0x2099ea(0xd7)]='';if(_0x30841e[_0x2099ea(0xea)]!=config[_0x2099ea(0x17f)]){if(_0x30841e[_0x2099ea(0x149)]>_0x5e0f91)_0x30841e[_0x2099ea(0x187)]=_0x2099ea(0xe9),_0x30841e[_0x2099ea(0xd7)]=checkMinimums(_0x30841e);else _0x30841e[_0x2099ea(0x149)]<_0x5e0f91&&(_0x30841e[_0x2099ea(0x187)]='buy',_0x30841e[_0x2099ea(0xd7)]=checkMinimums(_0x30841e));}_0x30841e['delta']=_0x30841e[_0x2099ea(0x149)]/_0x30841e['target']-0x1;}),currentCoins[_0x4a6058(0xcc)]((_0x489fe2,_0x296e9b)=>_0x489fe2['delta']<_0x296e9b[_0x4a6058(0x17b)]?0x1:_0x296e9b[_0x4a6058(0x17b)]<_0x489fe2[_0x4a6058(0x17b)]?-0x1:0x0);const _0x5e2542=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5e2542[_0x4a6058(0x16d)],'usd':_0x5e2542[_0x4a6058(0xc7)],'portfolio':JSON[_0x4a6058(0xec)](currentCoins),'threshold':_0x3a266b},proxyEmit(_0x4a6058(0xe8),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4a6058(0xbb)])headlessMode({'portfolio':currentCoins,'threshold':_0x3a266b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x195f7e=_0x80a6bd;if(!lastBalances)return;let _0xd5f1f3=await getStartingBalances(![]),_0x5f296c=[],_0x51d2b6;JSON[_0x195f7e(0x177)](lastBalances[_0x195f7e(0x81)])[_0x195f7e(0xd0)](_0x23a1f7=>{const _0xdd3a44=_0x195f7e;let _0x302272={'coin':_0x23a1f7[_0xdd3a44(0xea)],'number':_0x23a1f7[_0xdd3a44(0xb6)],'price':_0x23a1f7[_0xdd3a44(0xed)]};_0x5f296c[_0xdd3a44(0xf2)](_0x302272);});const _0x4b5ec0=await getFiat();_0x51d2b6={'date':lastBalances['time'][_0x195f7e(0x84)]('\x20')[0x0],'eur':_0x4b5ec0[_0x195f7e(0x16d)],'usd':_0x4b5ec0[_0x195f7e(0xc7)],'coins':_0x5f296c};let _0x39828a=dbPerformance[_0x195f7e(0x11d)]('data')['find']({'date':_0x51d2b6[_0x195f7e(0x168)]})[_0x195f7e(0x98)]();_0x39828a?dbPerformance[_0x195f7e(0x11d)](_0x195f7e(0xde))[_0x195f7e(0x18a)]({'date':_0x51d2b6[_0x195f7e(0x168)]})[_0x195f7e(0x144)](_0x51d2b6)[_0x195f7e(0x16b)]():dbPerformance[_0x195f7e(0x11d)](_0x195f7e(0xde))[_0x195f7e(0xf2)](_0x51d2b6)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x4fef9b=_0x80a6bd;if(dbPerformance['has'](_0x4fef9b(0xde))[_0x4fef9b(0x98)]()){let _0x1a1b63=dbPerformance['get']('data')[_0x4fef9b(0x160)](_0x4fef9b(0x168))[_0x4fef9b(0x98)]();proxyEmit(_0x4fef9b(0x15c),_0x1a1b63),lastPerformanceEmitted=getDate();}else proxyEmit(_0x4fef9b(0x15c),[]);}async function getStartingBalances(_0x54b760=!![]){const _0x4d146a=_0x80a6bd;let _0x5affcf=dbPerformance[_0x4d146a(0x11d)](_0x4d146a(0xde))['find']({'date':config[_0x4d146a(0xf9)]})['value']();config['apiKey']!=''&&!_0x5affcf&&(await setStartDatePerformance(config),_0x5affcf=dbPerformance[_0x4d146a(0x11d)]('data')['find']({'date':config[_0x4d146a(0xf9)]})[_0x4d146a(0x98)]());if(config[_0x4d146a(0x143)]==''||!_0x5affcf)return{};let _0x3402b0=0x0,_0x2ec7b9=0x0,_0x3a548b=0x0,_0x4544a3=[],_0x2663d4=0x0;config[_0x4d146a(0x81)][_0x4d146a(0xd0)](_0x429787=>{const _0x5daf1d=_0x4d146a;if(!_0x429787[_0x5daf1d(0xab)]){_0x4544a3[_0x2663d4]={'coin':_0x429787[_0x5daf1d(0xea)],'symbol':_0x429787[_0x5daf1d(0x15f)],'number':_0x429787['startnumber'],'price':_0x429787['startprice']},_0x3402b0+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)];if(config['basecoin']==_0x5daf1d(0xcb))_0x2ec7b9+=_0x429787[_0x5daf1d(0x8f)]*_0x429787['startnumber']*_0x5affcf[_0x5daf1d(0x16d)],_0x3a548b+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)]*_0x5affcf[_0x5daf1d(0xc7)];else{if(config[_0x5daf1d(0x17f)]=='BUSD'||config[_0x5daf1d(0x17f)]==_0x5daf1d(0x163)||config[_0x5daf1d(0x17f)]=='USDC')_0x2ec7b9+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)]*_0x5affcf[_0x5daf1d(0x16d)]/_0x5affcf['usd'],_0x3a548b+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)];else config[_0x5daf1d(0x17f)]==_0x5daf1d(0x103)&&(_0x2ec7b9+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)],_0x3a548b+=_0x429787[_0x5daf1d(0x8f)]*_0x429787[_0x5daf1d(0x167)]*_0x5affcf[_0x5daf1d(0xc7)]/_0x5affcf[_0x5daf1d(0x16d)]);}_0x2663d4++;}});let _0x17c4b1={'basecoin':_0x3402b0,'eur':_0x2ec7b9,'usd':_0x3a548b,'coins':_0x4544a3};if(_0x54b760)proxyEmit(_0x4d146a(0x9f),_0x17c4b1);return _0x17c4b1;}function headlessMode(_0x27a57d){const _0x24aa38=_0x80a6bd;let _0xf6ca56=_0x27a57d[_0x24aa38(0x81)],_0x301dfb=_0x27a57d[_0x24aa38(0x106)],_0x48df82=[];for(let _0x584675 of _0xf6ca56){if(_0x584675[_0x24aa38(0xea)]!=config[_0x24aa38(0x17f)]){if(_0x584675[_0x24aa38(0x149)]/_0x584675[_0x24aa38(0xd3)]-0x1>=_0x301dfb/0x64){if(_0x584675[_0x24aa38(0xd7)])_0x48df82[_0x24aa38(0xf2)](_0x584675);}else{if(_0x584675[_0x24aa38(0x149)]/_0x584675['target']-0x1<=-_0x301dfb/0x64){if(_0x584675[_0x24aa38(0xd7)])_0x48df82['push'](_0x584675);}}}}_0x48df82[_0x24aa38(0x125)]>0x0&&placeOrder(_0x48df82);}function symbolToCoin(_0x35a9f0){const _0x4b43ac=_0x80a6bd;let _0xff168d;if(_0x35a9f0[_0x4b43ac(0xa8)]('/'+config[_0x4b43ac(0x17f)]))_0xff168d=_0x35a9f0['replace']('/'+config[_0x4b43ac(0x17f)],'');if(_0x35a9f0['includes'](config['basecoin']+'/'))_0xff168d=_0x35a9f0[_0x4b43ac(0x99)](config[_0x4b43ac(0x17f)]+'/','');return _0xff168d;}async function validateOrders(_0x345632=0x0){const _0x14921f=_0x80a6bd;let _0x1730b1=[],_0x35f9aa=config[_0x14921f(0x91)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x14921f(0x17c)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x14921f(0xd0)](_0x43bfb0=>{const _0x5836f8=_0x14921f;let _0x72e277=previousCoins[_0x5836f8(0x18a)](_0x1819dd=>_0x1819dd[_0x5836f8(0xea)]==symbolToCoin(_0x43bfb0[_0x5836f8(0x15f)])),_0x118991=currentCoins[_0x5836f8(0x18a)](_0x1b38fb=>_0x1b38fb[_0x5836f8(0xea)]==symbolToCoin(_0x43bfb0['symbol'])),_0x582d36,_0x299993;_0x43bfb0['side']==_0x5836f8(0x9d)&&!_0x43bfb0[_0x5836f8(0x8e)]||_0x43bfb0['side']==_0x5836f8(0xe9)&&_0x43bfb0['reverse']?(_0x582d36=_0x72e277['number']+0.9*_0x43bfb0[_0x5836f8(0xfa)],_0x299993=_0x72e277['number']+1.1*_0x43bfb0[_0x5836f8(0xfa)]):(_0x582d36=_0x72e277[_0x5836f8(0xb6)]-1.1*_0x43bfb0['filled'],_0x299993=_0x72e277[_0x5836f8(0xb6)]-0.9*_0x43bfb0[_0x5836f8(0xfa)]);const _0x297783=_0x43bfb0['filled']!=0x0&&_0x118991[_0x5836f8(0xb6)]>=_0x582d36&&_0x118991[_0x5836f8(0xb6)]<=_0x299993;_0x1730b1[_0x5836f8(0xf2)](_0x297783);if(_0x297783&&config[_0x5836f8(0x91)]!='market'){if(_0x43bfb0[_0x5836f8(0x8e)])logHistory(_0x5836f8(0xd9),_0x5836f8(0x156)+_0x43bfb0[_0x5836f8(0x15f)]+'\x20'+_0x43bfb0[_0x5836f8(0x187)]+'\x20#'+formatResult(_0x43bfb0[_0x5836f8(0xfa)]/_0x43bfb0[_0x5836f8(0x165)],0x8)+'\x20@'+formatResult(_0x43bfb0[_0x5836f8(0x165)],0x8));else logHistory(_0x5836f8(0xd9),'Order\x20filled:\x20'+_0x43bfb0[_0x5836f8(0x15f)]+'\x20'+_0x43bfb0[_0x5836f8(0x187)]+'\x20#'+formatResult(_0x43bfb0['filled'],0x8)+'\x20@'+formatResult(_0x43bfb0['price'],0x8));}}),_0x1730b1['forEach']((_0x233f8d,_0xc1f3fd)=>{const _0x4a0f64=_0x14921f;if(_0x233f8d)lastOrders[_0x4a0f64(0x8a)](_0xc1f3fd,0x1);});if(_0x345632<_0x35f9aa&&_0x1730b1['includes'](![])){if(_0x345632==0x0){config[_0x14921f(0x91)]==_0x14921f(0x120)?logHistory('error',_0x14921f(0x13a)):logHistory(_0x14921f(0xfe),_0x14921f(0xe4));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x345632);},0xa*0x3e8);}else{(_0x345632==0x1||_0x345632==Math[_0x14921f(0x128)](_0x35f9aa/0x2)||_0x345632==_0x35f9aa-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x345632);},validateOrderInterval);}}else{lockOrders=![];if(_0x345632>0x0&&!_0x1730b1['includes'](![]))config[_0x14921f(0x91)]==_0x14921f(0x120)?logHistory(_0x14921f(0x79),_0x14921f(0xf0)):logHistory('success',_0x14921f(0x137));else _0x345632>0x0&&_0x1730b1[_0x14921f(0xa8)](![])&&(config[_0x14921f(0x91)]==_0x14921f(0x120)?logHistory(_0x14921f(0x79),_0x14921f(0xd4)+Math['round'](_0x35f9aa*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x14921f(0xd0)](async _0x2353ef=>{const _0x33348e=_0x14921f;try{const _0x2fb734=await exchange[_0x33348e(0x112)](_0x2353ef[_0x33348e(0x161)],_0x2353ef[_0x33348e(0x15f)]);}catch(_0x4804ca){if(_0x4804ca[_0x33348e(0x129)]()[_0x33348e(0xa8)](_0x33348e(0x111))){}else await handleError(_0x4804ca,_0x33348e(0x135));}}),logHistory(_0x14921f(0x79),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x14921f(0x128)](_0x35f9aa*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x5ae9f4=_0x80a6bd;dbCoinResults[_0x5ae9f4(0x11d)](_0x5ae9f4(0x164))['remove']()[_0x5ae9f4(0x16b)]();let _0x9c7830=await getStartingBalances(![]);_0x9c7830[_0x5ae9f4(0x164)]['forEach'](_0x21ddc2=>{const _0x34815c=_0x5ae9f4,_0xdbda36=_0x21ddc2['symbol'][_0x34815c(0xa8)](config[_0x34815c(0x17f)]+'/');if(_0x21ddc2['coin']!=config[_0x34815c(0x17f)]){let _0x210e77={'coin':_0x21ddc2['coin'],'number':_0x21ddc2['number'],'breakeven':_0x21ddc2[_0x34815c(0x165)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x34815c(0x11d)](_0x34815c(0x164))[_0x34815c(0xf2)](_0x210e77)[_0x34815c(0x16b)]();}});}async function updateCoinResults(_0x3a5d16){const _0x26c4f0=_0x80a6bd;let _0x456d23,_0x24fea4,_0xa05d53,_0x519f81,_0x2d2cbf,_0x288f65,_0xcc887d=dbCoinResults['get'](_0x26c4f0(0x164))[_0x26c4f0(0x18a)]({'coin':_0x3a5d16[_0x26c4f0(0xea)]})['value']();if(!_0xcc887d)return;if(_0x3a5d16[_0x26c4f0(0x13e)]&&_0x3a5d16[_0x26c4f0(0x13e)][_0x26c4f0(0x92)]==config[_0x26c4f0(0x17f)])_0x456d23=_0x3a5d16[_0x26c4f0(0x13e)]['cost'];else{if(_0x3a5d16[_0x26c4f0(0x13e)]&&_0x3a5d16['fee']['currency']==_0x26c4f0(0x115))_0x456d23=_0x3a5d16[_0x26c4f0(0x13e)][_0x26c4f0(0x157)]*global['ticker']['BNB'+config[_0x26c4f0(0x17f)]];else _0x456d23=0.001*_0x3a5d16[_0x26c4f0(0xfa)];}const _0xa9e3ab=_0x3a5d16['symbol'][_0x26c4f0(0xa8)](config['basecoin']+'/');_0xa9e3ab&&(_0x288f65={'coin':_0x3a5d16[_0x26c4f0(0xea)],'symbol':_0x3a5d16['symbol'],'filled':_0x3a5d16[_0x26c4f0(0xfa)]*_0x3a5d16[_0x26c4f0(0x165)],'side':_0x3a5d16['side']==_0x26c4f0(0xe9)?'buy':'sell','price':0x1/_0x3a5d16['price']},_0x3a5d16={..._0x288f65});_0x3a5d16[_0x26c4f0(0x187)]==_0x26c4f0(0x9d)?_0xa05d53=(_0xcc887d[_0x26c4f0(0xa4)]*_0xcc887d['number']+_0x3a5d16[_0x26c4f0(0x165)]*_0x3a5d16[_0x26c4f0(0xfa)])/(_0xcc887d['number']+_0x3a5d16['filled']):_0xa05d53=(_0xcc887d[_0x26c4f0(0xa4)]*_0xcc887d['number']-_0x3a5d16[_0x26c4f0(0x165)]*_0x3a5d16[_0x26c4f0(0xfa)])/(_0xcc887d[_0x26c4f0(0xb6)]-_0x3a5d16[_0x26c4f0(0xfa)]);_0x3a5d16['side']==_0x26c4f0(0x9d)?_0x519f81=_0xcc887d[_0x26c4f0(0x17d)]:_0x519f81=_0xcc887d[_0x26c4f0(0x17d)]+(_0x3a5d16[_0x26c4f0(0x165)]-_0xcc887d[_0x26c4f0(0xa4)])*_0x3a5d16['filled'];_0x24fea4=_0x3a5d16[_0x26c4f0(0x187)]==_0x26c4f0(0xe9)?_0xcc887d['number']-_0x3a5d16[_0x26c4f0(0xfa)]:_0xcc887d[_0x26c4f0(0xb6)]+_0x3a5d16['filled'],_0x2d2cbf=(_0x3a5d16['price']-_0xa05d53)*_0x24fea4;let _0x21d7ce={'coin':_0x3a5d16['coin'],'number':_0x24fea4,'breakeven':formatResult(_0xa05d53,0x8),'realized':formatResult(_0x519f81,0x8),'unrealized':formatResult(_0x2d2cbf,0x8),'fees':formatResult(_0xcc887d[_0x26c4f0(0x9b)]+_0x456d23,0x8),'sells':_0x3a5d16['side']==_0x26c4f0(0xe9)?_0xcc887d[_0x26c4f0(0x85)]+0x1:_0xcc887d[_0x26c4f0(0x85)],'buys':_0x3a5d16['side']==_0x26c4f0(0x9d)?_0xcc887d['buys']+0x1:_0xcc887d[_0x26c4f0(0x114)]};dbCoinResults[_0x26c4f0(0x11d)](_0x26c4f0(0x164))['find']({'coin':_0x3a5d16[_0x26c4f0(0xea)]})[_0x26c4f0(0x144)](_0x21d7ce)[_0x26c4f0(0x16b)]();}async function placeOrder(_0x474b96){const _0x5ee40d=_0x80a6bd,_0xf33872=config['ordertype']==_0x5ee40d(0x120)?_0x5ee40d(0x120):_0x5ee40d(0x123);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5ee40d(0x177)](JSON[_0x5ee40d(0xec)](currentCoins));for(const _0x414602 of _0x474b96){let _0x4de243,_0xb5093f,_0x1ff0ee,_0x57042f,_0x2df27a,_0x3a9714=_0x414602['symbol'];try{const _0x12df2b=await exchange[_0x5ee40d(0x181)](_0x3a9714),_0x51d627=_0x12df2b[_0x3a9714];_0x4de243=_0x51d627[_0x5ee40d(0xed)],_0xb5093f=_0x51d627[_0x5ee40d(0x140)],_0x1ff0ee=_0x51d627['ask'];_0x414602[_0x5ee40d(0x8e)]?(_0x57042f=_0x414602[_0x5ee40d(0x187)]==_0x5ee40d(0x9d)?_0x5ee40d(0xe9):_0x5ee40d(0x9d),_0x2df27a=Math[_0x5ee40d(0xcd)](_0x414602[_0x5ee40d(0x147)])/_0x4de243):(_0x57042f=_0x414602[_0x5ee40d(0x187)],_0x2df27a=Math[_0x5ee40d(0xcd)](_0x414602[_0x5ee40d(0x147)]));_0xf33872==_0x5ee40d(0x123)&&(config[_0x5ee40d(0x91)]==_0x5ee40d(0x183)&&(_0x4de243=_0x57042f==_0x5ee40d(0x9d)?_0xb5093f:_0x1ff0ee),config[_0x5ee40d(0x91)]=='limit-low'&&(_0x4de243=_0x57042f==_0x5ee40d(0x9d)?_0x1ff0ee:_0xb5093f));_0x2df27a=formatResult(_0x2df27a,0x8),_0x4de243=formatResult(_0x4de243,0x8);const _0x5a6a63=await exchange[_0x5ee40d(0x119)](_0x3a9714,_0xf33872,_0x57042f,_0x2df27a,_0x4de243);lastOrders['push']({'orderId':_0x5a6a63['id'],'symbol':_0x3a9714,'side':_0x57042f,'reverse':_0x414602[_0x5ee40d(0x8e)],'amount':_0x414602[_0x5ee40d(0x8e)]?_0x5a6a63[_0x5ee40d(0xee)]*_0x5a6a63[_0x5ee40d(0x165)]:_0x5a6a63[_0x5ee40d(0xee)],'filled':_0x414602[_0x5ee40d(0x8e)]?_0x5a6a63[_0x5ee40d(0xfa)]*_0x5a6a63['price']:_0x5a6a63[_0x5ee40d(0xfa)],'price':_0x5a6a63[_0x5ee40d(0x165)]});const _0x31567e=_0x57042f=='sell'?config[_0x5ee40d(0x171)]?String[_0x5ee40d(0x16f)]('0x'+config[_0x5ee40d(0x171)])+'\x20':'':config[_0x5ee40d(0x150)]?String[_0x5ee40d(0x16f)]('0x'+config[_0x5ee40d(0x150)])+'\x20':'',_0x199423=_0xf33872==_0x5ee40d(0x120)?_0x5ee40d(0xa0):config['ordertype']==_0x5ee40d(0x183)?_0x5ee40d(0xc5):_0x5ee40d(0xcf);if(_0xf33872=='market')logHistory(_0x5ee40d(0xd9),''+_0x31567e+_0x199423+'\x20order:\x20'+_0x3a9714+'\x20'+_0x57042f+'\x20#'+formatResult(_0x5a6a63[_0x5ee40d(0xfa)],0x8)+'\x20@'+formatResult(_0x5a6a63[_0x5ee40d(0x165)],0x8));else logHistory('order',''+_0x31567e+_0x199423+_0x5ee40d(0x104)+_0x3a9714+'\x20'+_0x57042f+'\x20#'+formatResult(_0x5a6a63['amount'],0x8)+'\x20@'+formatResult(_0x5a6a63[_0x5ee40d(0x165)],0x8));_0x5a6a63[_0x5ee40d(0xea)]=_0x414602[_0x5ee40d(0xea)],await updateCoinResults(_0x5a6a63);if(config['cooldown']!=0x0){let _0x47ba9a=null;if(cooldownTracker[_0x5ee40d(0x125)]==config[_0x5ee40d(0x109)]-0x1)_0x47ba9a=cooldownTracker['shift']();const _0x51054e=getTimeStamp();cooldownTracker[_0x5ee40d(0xf2)](_0x51054e);if(_0x47ba9a){const _0x4b7e68=fns[_0x5ee40d(0x8c)](new Date(_0x51054e),new Date(_0x47ba9a));_0x4b7e68<cooldownInterval&&(logHistory(_0x5ee40d(0xfe),_0x5ee40d(0xbd)+config['cooldown']+_0x5ee40d(0x15a)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5ee40d(0xb7)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x48033d){if(_0x48033d['toString']()['includes'](_0x5ee40d(0x12b)))logHistory(_0x5ee40d(0xfe),_0x5ee40d(0xad)+_0x3a9714);else{if(_0x48033d['toString']()[_0x5ee40d(0xa8)](_0x5ee40d(0x9a)))logHistory(_0x5ee40d(0xfe),_0x5ee40d(0x107)+_0x3a9714);else await handleError(_0x48033d,_0x5ee40d(0xbe));}}}if(lastOrders[_0x5ee40d(0x125)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5ee40d(0xbb)]&&(config['ordertype']==_0x5ee40d(0x120)?logHistory('error',_0x5ee40d(0x10a)):logHistory(_0x5ee40d(0xfe),_0x5ee40d(0x186)));else coolingDown&&(!config[_0x5ee40d(0xbb)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x5c927f,_0x2e358c,_0x1aef15=''){const _0x479ea2=_0x80a6bd;let _0x2e629d={'time':getTimeStamp(),'type':_0x5c927f,'event':_0x2e358c,'botname':config[_0x479ea2(0x90)],'showname':config[_0x479ea2(0x12e)]};dbLogs[_0x479ea2(0x11d)](_0x479ea2(0x130))[_0x479ea2(0xf2)](_0x2e629d)[_0x479ea2(0x16b)]();if(_0x1aef15=='')_0x1aef15=_0x2e358c;proxyEmit('event',{'log':_0x2e629d,'summary':_0x1aef15}),process['send']({'telegram':_0x2e629d},_0x29bc49=>{}),logging(''+_0x2e629d[_0x479ea2(0x10f)]);}function emitHistory(_0x3479b5={}){const _0x2b5759=_0x80a6bd;Object[_0x2b5759(0xff)](_0x3479b5)['length']==0x0&&(_0x3479b5={'type':[_0x2b5759(0xd9),'event'],'event':'','page':0x1});if(_0x3479b5[_0x2b5759(0x158)][_0x2b5759(0xa8)](_0x2b5759(0x10f)))_0x3479b5[_0x2b5759(0x158)][_0x2b5759(0x8a)](_0x3479b5[_0x2b5759(0x158)][_0x2b5759(0x87)]('event'),0x1,_0x2b5759(0xfe),_0x2b5759(0x79));if(dbLogs[_0x2b5759(0xe2)](_0x2b5759(0x130))['value']()){let _0x428222=dbLogs['get']('logs')[_0x2b5759(0x122)](_0x23dbcb=>{const _0x3e4f2f=_0x2b5759;if(_0x3479b5[_0x3e4f2f(0x158)][_0x3e4f2f(0x125)]==0x0)return![];else return _0x3479b5['type'][_0x3e4f2f(0xa8)](_0x23dbcb[_0x3e4f2f(0x158)]);})[_0x2b5759(0x122)](_0x5f36c0=>{const _0x39e432=_0x2b5759;if(_0x3479b5['event']=='')return!![];else return _0x5f36c0[_0x39e432(0x10f)][_0x39e432(0xfb)]()['includes'](_0x3479b5[_0x39e432(0x10f)][_0x39e432(0xfb)]());})[_0x2b5759(0x160)](_0x2b5759(0xe6)),_0x276e90=_0x428222[_0x2b5759(0x98)]()[_0x2b5759(0x125)];_0x428222=_0x428222['reverse']()[_0x2b5759(0x108)]((_0x3479b5[_0x2b5759(0x12a)]-0x1)*logPageSize,_0x3479b5[_0x2b5759(0x12a)]*logPageSize-0x1)[_0x2b5759(0x8e)]()[_0x2b5759(0x98)](),proxyEmit(_0x2b5759(0x170),{'logs':_0x428222,'total':_0x276e90});}else proxyEmit(_0x2b5759(0x170),{'logs':[],'total':0x0});}async function pauseBot(_0x4139bb){const _0x428a0e=_0x80a6bd,_0x1a8285=new Date()[_0x428a0e(0xd8)]();if(!lastBotPause)lastBotPause=new Date()[_0x428a0e(0xd8)](),consecutivePauses=0x1;else{if(_0x1a8285-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x428a0e(0x13c)]({'stop':'restart'},_0x5bd71b=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x428a0e(0xd8)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x428a0e(0xfe),_0x428a0e(0x10c)+consecutivePauses+')'),await sleep(_0x4139bb),botPaused=![],reset();}}async function handleError(_0x2bd6c0,_0x46baa2,_0xd39836=''){const _0xf4010=_0x80a6bd;if(_0x2bd6c0['toString']()[_0xf4010(0xa8)]('DDoSProtection'))logHistory('error',_0x46baa2+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x2bd6c0[_0xf4010(0x129)]()[_0xf4010(0xa8)](_0xf4010(0x83)))logHistory(_0xf4010(0xfe),_0x46baa2+_0xf4010(0x116)),await pauseBot(pauseBotInterval);else{if(_0x2bd6c0['toString']()[_0xf4010(0xa8)]('RequestTimeout'))logHistory('error',_0x46baa2+_0xf4010(0x124)),await pauseBot(pauseBotInterval);else{if(_0x2bd6c0[_0xf4010(0x129)]()[_0xf4010(0xa8)](_0xf4010(0xef)))logHistory(_0xf4010(0xfe),_0x46baa2+_0xf4010(0xd2)),logHistory('error',_0xf4010(0xc6)),process[_0xf4010(0x13c)]({'stop':'kill'},_0x5625ec=>{});else{if(_0x2bd6c0[_0xf4010(0x129)]()[_0xf4010(0xa8)](_0xf4010(0xe5)))logHistory('error',_0x46baa2+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0xf4010(0xfe),_0xf4010(0xc6)),process[_0xf4010(0x13c)]({'stop':_0xf4010(0x11f)},_0x6f756f=>{});else{if(_0x2bd6c0['toString']()[_0xf4010(0xa8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xf4010(0xfe),_0x46baa2+_0xf4010(0x13d)),logHistory(_0xf4010(0xfe),_0xf4010(0xc6)),process[_0xf4010(0x13c)]({'stop':_0xf4010(0x11f)},_0x30ba71=>{});else{if(_0x2bd6c0[_0xf4010(0x129)]()[_0xf4010(0xa8)](_0xf4010(0x142)))logHistory(_0xf4010(0xfe),_0x46baa2+_0xf4010(0x154)),logHistory(_0xf4010(0xfe),_0xf4010(0xc6)),process[_0xf4010(0x13c)]({'stop':_0xf4010(0x11f)},_0x5a2fd6=>{});else{if(_0x2bd6c0[_0xf4010(0x129)]()[_0xf4010(0xa8)]('InvalidNonce'))logHistory(_0xf4010(0xfe),_0x46baa2+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'},_0x319f27=>{});else _0x2bd6c0['toString']()['includes'](_0xf4010(0xc4))?logHistory(_0xf4010(0xfe),_0x46baa2+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0xf4010(0xfe),_0x46baa2+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x46baa2+_0xf4010(0xb9),_0x2bd6c0),await pauseBot(pauseBotInterval));}}}}}}}}function _0x3300(_0x42e88a,_0x3a3866){const _0x1050af=_0x35b5();return _0x3300=function(_0x10d298,_0x287ac4){_0x10d298=_0x10d298-0x78;let _0x35b552=_0x1050af[_0x10d298];return _0x35b552;},_0x3300(_0x42e88a,_0x3a3866);}function formatResult(_0x5f392e,_0x246d76){return parseFloat(_0x5f392e['toFixed'](_0x246d76));}function logging(_0x337718,_0x180d05=''){const _0x30c41d=_0x80a6bd;if(config['showname'])console[_0x30c41d(0x153)](getTimeStamp()+':\x20'+config[_0x30c41d(0x90)]+_0x30c41d(0x11b)+_0x337718,_0x180d05);else console[_0x30c41d(0x153)](getTimeStamp()+_0x30c41d(0xdd)+botID+_0x30c41d(0x11b)+_0x337718,_0x180d05);}function getServerTime(){const _0x2ae5dd=_0x80a6bd,_0x411d28=new Date();return _0x411d28['getFullYear']()+'/'+(_0x411d28[_0x2ae5dd(0x178)]()+0x1)[_0x2ae5dd(0x129)]()[_0x2ae5dd(0x126)](0x2,'0')+'/'+_0x411d28[_0x2ae5dd(0xb3)]()[_0x2ae5dd(0x129)]()[_0x2ae5dd(0x126)](0x2,'0')+'\x20'+_0x411d28[_0x2ae5dd(0x14f)]()[_0x2ae5dd(0x129)]()[_0x2ae5dd(0x126)](0x2,'0')+':'+_0x411d28[_0x2ae5dd(0x16e)]()[_0x2ae5dd(0x129)]()[_0x2ae5dd(0x126)](0x2,'0')+':'+_0x411d28['getSeconds']()['toString']()[_0x2ae5dd(0x126)](0x2,'0');}function getTimeStamp(){const _0x34679e=_0x80a6bd,_0x128281=shiftedTime();return _0x128281['getFullYear']()+'/'+(_0x128281[_0x34679e(0x178)]()+0x1)[_0x34679e(0x129)]()[_0x34679e(0x126)](0x2,'0')+'/'+_0x128281[_0x34679e(0xb3)]()[_0x34679e(0x129)]()[_0x34679e(0x126)](0x2,'0')+'\x20'+_0x128281[_0x34679e(0x14f)]()[_0x34679e(0x129)]()[_0x34679e(0x126)](0x2,'0')+':'+_0x128281['getMinutes']()['toString']()[_0x34679e(0x126)](0x2,'0')+':'+_0x128281[_0x34679e(0x148)]()[_0x34679e(0x129)]()[_0x34679e(0x126)](0x2,'0');}function getDate(){const _0x133f74=_0x80a6bd,_0x51a711=shiftedTime();return _0x51a711[_0x133f74(0xdf)]()+'/'+(_0x51a711[_0x133f74(0x178)]()+0x1)[_0x133f74(0x129)]()['padStart'](0x2,'0')+'/'+_0x51a711[_0x133f74(0xb3)]()[_0x133f74(0x129)]()[_0x133f74(0x126)](0x2,'0');}function getHour(){const _0x2598de=_0x80a6bd,_0x221f7b=shiftedTime();return _0x221f7b[_0x2598de(0x14f)]()[_0x2598de(0x129)]()['padStart'](0x2,'0');}function sleep(_0x592915){return new Promise(_0x31597e=>setTimeout(_0x31597e,_0x592915));}function shiftedTime(){const _0x944c83=_0x80a6bd,_0x1be59a=new Date();let _0x14ad76=_0x1be59a;if(config&&config['timeshift']!==0x0)_0x14ad76=fns['add'](_0x1be59a,{'hours':config[_0x944c83(0xc3)]});return _0x14ad76;}