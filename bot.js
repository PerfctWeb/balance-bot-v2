const _0xb6b6c8=_0x3bc6;(function(_0x5c1e87,_0x1b7dd0){const _0x4680a5=_0x3bc6,_0x454f18=_0x5c1e87();while(!![]){try{const _0xfe4a61=parseInt(_0x4680a5(0x28e))/0x1*(parseInt(_0x4680a5(0x2dc))/0x2)+-parseInt(_0x4680a5(0x208))/0x3+parseInt(_0x4680a5(0x27e))/0x4*(parseInt(_0x4680a5(0x204))/0x5)+parseInt(_0x4680a5(0x25b))/0x6+-parseInt(_0x4680a5(0x207))/0x7*(-parseInt(_0x4680a5(0x2e2))/0x8)+parseInt(_0x4680a5(0x2a7))/0x9+parseInt(_0x4680a5(0x1f7))/0xa*(-parseInt(_0x4680a5(0x21f))/0xb);if(_0xfe4a61===_0x1b7dd0)break;else _0x454f18['push'](_0x454f18['shift']());}catch(_0x30cffd){_0x454f18['push'](_0x454f18['shift']());}}}(_0x7d88,0xe4bd0));const _0x18dc2c=function(){let _0x47a779=!![];return function(_0x18f81c,_0xa9a4c4){const _0x2bb590=_0x47a779?function(){const _0x19f56f=_0x3bc6;if(_0xa9a4c4){const _0x5902ca=_0xa9a4c4[_0x19f56f(0x25a)](_0x18f81c,arguments);return _0xa9a4c4=null,_0x5902ca;}}:function(){};return _0x47a779=![],_0x2bb590;};}(),_0x59f2ce=_0x18dc2c(this,function(){const _0x1edaa6=_0x3bc6;return _0x59f2ce[_0x1edaa6(0x29c)]()['search']('(((.+)+)+)+$')[_0x1edaa6(0x29c)]()['constructor'](_0x59f2ce)[_0x1edaa6(0x231)](_0x1edaa6(0x2c7));});_0x59f2ce();'use strict';const ccxt=require(_0xb6b6c8(0x28c)),low=require(_0xb6b6c8(0x2da)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0xb6b6c8(0x28b)),Crypt=require(_0xb6b6c8(0x2b2))[_0xb6b6c8(0x23b)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0xb6b6c8(0x22c))[_0xb6b6c8(0x2ba)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0xb6b6c8(0x251)](botID))return console[_0xb6b6c8(0x1f4)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0xb6b6c8(0x219)](0x1);const userID=process[_0xb6b6c8(0x2e5)][0x3]||'',configpath=userID?_0xb6b6c8(0x286)+userID+'/':_0xb6b6c8(0x286);!fs[_0xb6b6c8(0x298)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0xb6b6c8(0x2cb)+botID+_0xb6b6c8(0x238),logfile=configpath+_0xb6b6c8(0x2cb)+botID+_0xb6b6c8(0x2ed),performancefile=configpath+_0xb6b6c8(0x2cb)+botID+_0xb6b6c8(0x29d),coinresultsfile=configpath+_0xb6b6c8(0x2cb)+botID+_0xb6b6c8(0x2f9),settingsfile=configpath+_0xb6b6c8(0x27c),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xb6b6c8(0x233)]({'logs':[]})[_0xb6b6c8(0x2d7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0xb6b6c8(0x2d7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xb6b6c8(0x233)]({'bot':[]})[_0xb6b6c8(0x2d7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xb6b6c8(0x233)]({'coins':[]})[_0xb6b6c8(0x2d7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0xb6b6c8(0x2d1),'symbol':_0xb6b6c8(0x23c)},'usd':{'coin':_0xb6b6c8(0x26a),'symbol':_0xb6b6c8(0x257)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x44fbb9)=>{},'debug':(..._0x33cd02)=>{},'notice':(..._0x5d61ed)=>{},'info':(..._0x15add4)=>{},'warning':(..._0x5a51d3)=>{},'error':async function(..._0x1731e3){const _0x3a1921=_0xb6b6c8,_0x16b7da=new Date()[_0x3a1921(0x29f)]();if(!lastErrorShown||_0x16b7da-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3a1921(0x29f)](),logHistory(_0x3a1921(0x235),_0x3a1921(0x2ab)+consecutivePauses+_0x3a1921(0x2b9));let _0x1313fa='';if(_0x1731e3[0x0])_0x1313fa+=_0x1731e3[0x0];if(_0x1731e3[0x1]&&_0x1731e3[0x1][_0x3a1921(0x235)]&&_0x1731e3[0x1][_0x3a1921(0x235)]['message'])_0x1313fa+=_0x3a1921(0x256)+_0x1731e3[0x1][_0x3a1921(0x235)][_0x3a1921(0x206)];logging('WebSockets('+consecutivePauses+_0x3a1921(0x2af),''+_0x1313fa),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xb6b6c8(0x200),'rsaStandard':_0xb6b6c8(0x279)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0xb6b6c8(0x215)]!=config[_0xb6b6c8(0x215)]&&updateTimeshift(settings[_0xb6b6c8(0x215)]);process[_0xb6b6c8(0x2d2)]({'started':_0xb6b6c8(0x1f6)},_0x111a8f=>{}),initializeProcessListeners();function proxyEmit(_0x55fd42,_0xafcb46=null){const _0x36f59e=_0xb6b6c8;process[_0x36f59e(0x2d2)]({'function':_0x55fd42,'args':_0xafcb46},_0x45c6e6=>{});}function initializeProcessListeners(){process['on']('message',_0x166a9c=>{const _0x48a83d=_0x3bc6;switch(Object[_0x48a83d(0x2fe)](_0x166a9c)[0x0]){case _0x48a83d(0x215):_0x166a9c['timeshift']!=undefined&&(settings[_0x48a83d(0x215)]=_0x166a9c[_0x48a83d(0x215)],updateTimeshift(settings[_0x48a83d(0x215)]));break;case'function':switch(_0x166a9c['function']){case _0x48a83d(0x2e3):initclient();break;case _0x48a83d(0x285):emitHistory(_0x166a9c['args']);break;case _0x48a83d(0x1ff):getPortfolio(_0x166a9c[_0x48a83d(0x27b)]);break;case _0x48a83d(0x22e):storeConfiguration(_0x166a9c[_0x48a83d(0x27b)]);break;case'storeHeadless':storeHeadless(_0x166a9c[_0x48a83d(0x27b)]);break;case _0x48a83d(0x24c):getStartingBalances();break;case _0x48a83d(0x2f6):placeOrder(_0x166a9c[_0x48a83d(0x27b)]);break;case _0x48a83d(0x299):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xe258f3=_0xb6b6c8;if(pidBalances)clearTimeout(pidBalances);if(config[_0xe258f3(0x2a4)]!=''){await initExchange(config[_0xe258f3(0x2a4)],config[_0xe258f3(0x269)]);let _0x1cf965=await loadSymbols();_0x1cf965&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x30cc86,_0x2513e4){const _0x7437ef=_0xb6b6c8,_0x20f493=ccxt[config[_0x7437ef(0x2f3)]];let _0x4faaf7;switch(config[_0x7437ef(0x2f3)]){case _0x7437ef(0x28b):_0x4faaf7=_0x7437ef(0x2b3);break;case'binanceus':_0x4faaf7=_0x7437ef(0x1f3);break;default:_0x4faaf7='wss://stream.binance.com:9443';}exchange=new _0x20f493({'apiKey':_0x30cc86,'secret':_0x2513e4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x30cc86,'api_secret':_0x2513e4,'beautify':!![],'wsUrl':_0x4faaf7},logger),config['exchange']==_0x7437ef(0x26d)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x7437ef(0x237)},'usd':{'coin':_0x7437ef(0x26a),'symbol':_0x7437ef(0x257)}});}async function loadSymbols(){const _0x5d047c=_0xb6b6c8;let _0x19884c;try{markets=await exchange[_0x5d047c(0x2ea)]();const _0x39dbe5=[_0x5d047c(0x2d6),'HOT/BTC',_0x5d047c(0x26e)];allSymbols=exchange[_0x5d047c(0x23f)][_0x5d047c(0x2b6)](_0x197f3a=>{const _0x4b821f=_0x5d047c;let _0x414833=![];return _0x39dbe5[_0x4b821f(0x2f7)](_0x5063ca=>{const _0x1a8d79=_0x4b821f;if(_0x197f3a[_0x1a8d79(0x2c5)](_0x5063ca))_0x414833=!![];}),!_0x414833;}),_0x19884c=!![];}catch(_0x3cbca3){await handleError(_0x3cbca3,_0x5d047c(0x20c)),_0x19884c=![];}return _0x19884c;}async function initbot(){const _0x841561=_0xb6b6c8;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0xdccb57=dbCoinResults[_0x841561(0x239)](_0x841561(0x2b0))['value']();if(_0xdccb57['length']==0x0)await resetCoinResults();}async function initclient(){const _0x4e4845=_0xb6b6c8;proxyEmit(_0x4e4845(0x240),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5efd03=_0xb6b6c8;wsinitialized=![];ws1&&(ws1['forEach'](_0x597038=>{const _0x5bffcd=_0x3bc6;try{wsClient[_0x5bffcd(0x255)](_0x597038);}catch(_0x44d815){}}),ws1=[]);if(ws2){try{wsClient[_0x5efd03(0x255)](ws2);}catch(_0x526a37){}ws2=null;}}async function initws(){const _0x381fb7=_0xb6b6c8;cleanws();let _0x2b61e6=[];currentCoins[_0x381fb7(0x2f7)](_0xdc88e=>{const _0x4155df=_0x381fb7;if(_0xdc88e[_0x4155df(0x254)]!=config[_0x4155df(0x296)])_0x2b61e6[_0x4155df(0x28a)](noslash(_0xdc88e[_0x4155df(0x24f)]));});if(!_0x2b61e6[_0x381fb7(0x2c5)](stablecoins[_0x381fb7(0x2bc)]['coin']))_0x2b61e6[_0x381fb7(0x28a)](stablecoins[_0x381fb7(0x2bc)][_0x381fb7(0x254)]);if(!_0x2b61e6[_0x381fb7(0x2c5)](stablecoins[_0x381fb7(0x2df)][_0x381fb7(0x254)]))_0x2b61e6[_0x381fb7(0x28a)](stablecoins['usd'][_0x381fb7(0x254)]);if(!_0x2b61e6['includes']('BNB'+config[_0x381fb7(0x296)]))_0x2b61e6['push']('BNB'+config[_0x381fb7(0x296)]);try{_0x2b61e6[_0x381fb7(0x2f7)]((_0x24c649,_0x4c9b7e)=>{const _0x466e18=_0x381fb7;ws1[_0x4c9b7e]=wsClient[_0x466e18(0x2fd)](_0x24c649,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x381fb7(0x21a),_0x2eb25c=>{const _0x3b4744=_0x381fb7;if(!Array[_0x3b4744(0x276)](_0x2eb25c)&&!_0x2eb25c[_0x3b4744(0x272)]['includes']('userData')){if(_0x2eb25c['eventType']==='kline'){global[_0x3b4744(0x2b1)][_0x2eb25c['kline'][_0x3b4744(0x24f)]]=_0x2eb25c['kline'][_0x3b4744(0x220)];return;}}else{if(!Array['isArray'](_0x2eb25c)&&_0x2eb25c[_0x3b4744(0x272)]['includes'](_0x3b4744(0x2ca))){if(_0x2eb25c[_0x3b4744(0x262)][_0x3b4744(0x2c5)](_0x3b4744(0x259))){updateNumberCoins(_0x2eb25c);return;}}}}),wsClient['on'](_0x381fb7(0x290),async _0x2a36f1=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x5ec0df){await handleError(_0x5ec0df,'initws()');}let _0x2fb157,_0x5c335f=0x0;loading[_0x381fb7(0x213)]=[];let _0x288d95=0x0;currentCoins['forEach'](_0x3c0680=>{const _0x35d797=_0x381fb7;if(_0x3c0680[_0x35d797(0x254)]!=config[_0x35d797(0x296)])loading['remainingSymbols'][_0x35d797(0x28a)](_0x3c0680[_0x35d797(0x24f)]);}),loadingCanceled=![];while(_0x2fb157!=currentCoins[_0x381fb7(0x2bd)]-0x1){_0x2fb157=0x0,currentCoins[_0x381fb7(0x2f7)](_0x403be0=>{const _0x2a5f03=_0x381fb7;_0x403be0[_0x2a5f03(0x254)]!=config[_0x2a5f03(0x296)]&&global[_0x2a5f03(0x2b1)][noslash(_0x403be0[_0x2a5f03(0x24f)])]&&(loading[_0x2a5f03(0x213)]=loading['remainingSymbols'][_0x2a5f03(0x2b6)](_0x18a947=>_0x18a947!=_0x403be0[_0x2a5f03(0x24f)]),_0x2fb157++);}),loading[_0x381fb7(0x27f)]=Math[_0x381fb7(0x217)](_0x2fb157/(currentCoins['length']-0x1)*0x64);_0x288d95>0x1e*0x5&&(loading[_0x381fb7(0x2d0)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x381fb7(0x2aa)]=!![],emitLoadingProgress();break;}else _0x2fb157!=_0x5c335f&&(_0x5c335f=_0x2fb157,emitLoadingProgress()),_0x288d95++,await sleep(0xc8);}if(_0x2fb157==currentCoins[_0x381fb7(0x2bd)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x56a22c=_0xb6b6c8;let _0x32e0f9=0x0,_0x38d2cd=0x0;try{_0x32e0f9=global[_0x56a22c(0x2b1)][stablecoins[_0x56a22c(0x2bc)]['coin']],_0x38d2cd=global[_0x56a22c(0x2b1)][stablecoins[_0x56a22c(0x2df)][_0x56a22c(0x254)]];}catch(_0x22266d){await handleError(_0x22266d,'getFiat()');}return{'eur':Number(_0x32e0f9),'usd':Number(_0x38d2cd)};}async function setStartDatePerformance(_0x4e89b5){const _0x5ae342=_0xb6b6c8,_0x3d9e88=fns['format'](new Date(_0x4e89b5['startdate']),'yyyy/MM/dd');let _0x5a6591=[];_0x5a6591[stablecoins['eur'][_0x5ae342(0x254)]]=await getCloses(stablecoins[_0x5ae342(0x2bc)][_0x5ae342(0x24f)],new Date(_0x4e89b5['startdate']),0x1),_0x5a6591[stablecoins[_0x5ae342(0x2df)]['coin']]=await getCloses(stablecoins[_0x5ae342(0x2df)][_0x5ae342(0x24f)],new Date(_0x4e89b5[_0x5ae342(0x23d)]),0x1);let _0x6d16c4,_0x3d8283=[];_0x4e89b5[_0x5ae342(0x2f1)][_0x5ae342(0x2f7)](_0x73ccfe=>{const _0x5ea94b=_0x5ae342;!_0x73ccfe['excluded']&&_0x3d8283[_0x5ea94b(0x28a)]({'coin':_0x73ccfe['coin'],'number':_0x73ccfe[_0x5ea94b(0x2fb)],'price':_0x73ccfe[_0x5ea94b(0x22d)]});}),_0x6d16c4={'date':_0x3d9e88,'eur':_0x5a6591[stablecoins['eur'][_0x5ae342(0x254)]][0x0],'usd':_0x5a6591[stablecoins[_0x5ae342(0x2df)]['coin']][0x0],'coins':_0x3d8283};let _0xd2abf4=dbPerformance[_0x5ae342(0x239)](_0x5ae342(0x214))[_0x5ae342(0x25f)]({'date':_0x3d9e88})['value']();_0xd2abf4?dbPerformance[_0x5ae342(0x239)]('data')[_0x5ae342(0x25f)]({'date':_0x3d9e88})['assign'](_0x6d16c4)[_0x5ae342(0x2d7)]():dbPerformance[_0x5ae342(0x239)](_0x5ae342(0x214))['push'](_0x6d16c4)['write'](),_0xd2abf4=dbPerformance[_0x5ae342(0x239)](_0x5ae342(0x214))[_0x5ae342(0x21e)](_0x5ae342(0x22a))[_0x5ae342(0x253)](),_0xd2abf4[_0x5ae342(0x2f7)](_0x3f626c=>{const _0x4ecdbd=_0x5ae342;_0x3f626c[_0x4ecdbd(0x22a)]<_0x3d9e88&&dbPerformance['get'](_0x4ecdbd(0x214))[_0x4ecdbd(0x283)]({'date':_0x3f626c[_0x4ecdbd(0x22a)]})[_0x4ecdbd(0x2d7)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x36837c){const _0x3459d0=_0xb6b6c8;let _0x4c1355,_0x541994=[];logHistory(_0x3459d0(0x1fe),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x36837c[_0x3459d0(0x2f1)][_0x3459d0(0x2f7)](_0x48b9fc=>{const _0x49cf5d=_0x3459d0;if(_0x48b9fc['coin']!=config['basecoin']&&!_0x48b9fc[_0x49cf5d(0x2b7)])_0x541994[_0x49cf5d(0x28a)]({'coin':_0x48b9fc[_0x49cf5d(0x254)],'symbol':_0x48b9fc['symbol']});});let _0x5bf50e=[];try{const _0x33d3ad=fns[_0x3459d0(0x2c0)](fns[_0x3459d0(0x2a8)](_0x36837c[_0x3459d0(0x23d)][_0x3459d0(0x2cc)](/\//g,'-')),_0x3459d0(0x2fc));for(const _0x905b90 of _0x541994){if(_0x905b90['coin']!=config[_0x3459d0(0x296)])_0x4c1355=await exchange['fetchOrders'](_0x905b90['symbol'],Date['parse'](_0x33d3ad));_0x4c1355['forEach'](_0x56d2bf=>{const _0x191a8b=_0x3459d0,_0x30c104=_0x905b90[_0x191a8b(0x24f)]['includes'](config[_0x191a8b(0x296)]+'/'),_0x4529fc=fns[_0x191a8b(0x2c0)](fns['parseISO'](_0x56d2bf[_0x191a8b(0x2b4)]),_0x191a8b(0x22f)),_0x15886a=fns[_0x191a8b(0x2c0)](fns[_0x191a8b(0x2a8)](_0x56d2bf[_0x191a8b(0x2b4)]),_0x191a8b(0x2de));let _0x52c754;if(_0x56d2bf[_0x191a8b(0x23a)]==_0x191a8b(0x271)&&_0x30c104==![])_0x52c754=_0x56d2bf[_0x191a8b(0x203)];if(_0x56d2bf['side']==_0x191a8b(0x271)&&_0x30c104==!![])_0x52c754=-_0x56d2bf[_0x191a8b(0x203)]*_0x56d2bf[_0x191a8b(0x29e)];if(_0x56d2bf[_0x191a8b(0x23a)]==_0x191a8b(0x241)&&_0x30c104==![])_0x52c754=-_0x56d2bf[_0x191a8b(0x203)];if(_0x56d2bf[_0x191a8b(0x23a)]==_0x191a8b(0x241)&&_0x30c104==!![])_0x52c754=_0x56d2bf[_0x191a8b(0x203)]*_0x56d2bf[_0x191a8b(0x29e)];_0x5bf50e[_0x191a8b(0x28a)]({'timestamp':_0x4529fc,'date':_0x15886a,'coin':_0x905b90[_0x191a8b(0x254)],'symbol':_0x905b90['symbol'],'type':_0x56d2bf[_0x191a8b(0x21c)],'side':_0x56d2bf[_0x191a8b(0x23a)],'reverse':_0x30c104,'amount':formatResult(_0x56d2bf[_0x191a8b(0x25c)],0x8),'filled':formatResult(_0x56d2bf[_0x191a8b(0x25c)],0x8),'coinamount':formatResult(_0x52c754,0x8),'price':formatResult(_0x56d2bf['price'],0x8)});let _0x4b7f2c;if(_0x56d2bf[_0x191a8b(0x23a)]=='buy'&&_0x30c104==![])_0x4b7f2c=-_0x56d2bf['amount']*_0x56d2bf[_0x191a8b(0x29e)];if(_0x56d2bf[_0x191a8b(0x23a)]==_0x191a8b(0x271)&&_0x30c104==!![])_0x4b7f2c=_0x56d2bf[_0x191a8b(0x203)];if(_0x56d2bf['side']==_0x191a8b(0x241)&&_0x30c104==![])_0x4b7f2c=_0x56d2bf[_0x191a8b(0x203)]*_0x56d2bf['price'];if(_0x56d2bf['side']==_0x191a8b(0x241)&&_0x30c104==!![])_0x4b7f2c=-_0x56d2bf[_0x191a8b(0x203)];_0x5bf50e[_0x191a8b(0x28a)]({'date':_0x15886a,'coin':config[_0x191a8b(0x296)],'coinamount':formatResult(_0x4b7f2c,0x8)});});}_0x5bf50e['sort']((_0x258968,_0x3303b4)=>_0x258968[_0x3459d0(0x277)]>_0x3303b4['timestamp']?0x1:_0x3303b4[_0x3459d0(0x277)]>_0x258968[_0x3459d0(0x277)]?-0x1:0x0),dbLogs[_0x3459d0(0x239)](_0x3459d0(0x1f8))[_0x3459d0(0x283)]()[_0x3459d0(0x2d7)](),_0x5bf50e[_0x3459d0(0x2f7)](_0x3dc00c=>{const _0x4dad0a=_0x3459d0;let _0xb9998f;_0x3dc00c[_0x4dad0a(0x254)]!=config['basecoin']&&(_0xb9998f={'time':_0x3dc00c['timestamp'],'type':'order','event':_0x4dad0a(0x252)+_0x3dc00c[_0x4dad0a(0x24f)]+'\x20'+_0x3dc00c['side']+'\x20#'+_0x3dc00c[_0x4dad0a(0x203)]+'\x20@'+_0x3dc00c['price']},dbLogs[_0x4dad0a(0x239)](_0x4dad0a(0x1f8))[_0x4dad0a(0x28a)](_0xb9998f)[_0x4dad0a(0x2d7)]());});const _0x28097f=fns['eachDayOfInterval']({'start':new Date(_0x36837c[_0x3459d0(0x23d)]),'end':new Date()})['map'](_0xd31bec=>fns['format'](_0xd31bec,_0x3459d0(0x2de)));let _0x51f11b=[];_0x36837c['portfolio']['forEach'](_0x17fb0c=>{const _0x3f041e=_0x3459d0;if(!_0x17fb0c['excluded']){_0x51f11b[_0x17fb0c['coin']]=[];let _0x1b0b78=_0x17fb0c[_0x3f041e(0x2fb)];_0x28097f[_0x3f041e(0x2f7)]((_0x33810a,_0x186341)=>{const _0x248e7a=_0x3f041e;let _0x510a3d=_0x5bf50e[_0x248e7a(0x2b6)](_0x45471a=>_0x45471a[_0x248e7a(0x254)]==_0x17fb0c['coin']&&_0x45471a[_0x248e7a(0x22a)]==_0x33810a);if(_0x510a3d[_0x248e7a(0x2bd)]!=0x0){let _0xd454ff=_0x510a3d['reduce']((_0x305a0e,_0x2104e7)=>{return _0x305a0e+=_0x2104e7['coinamount'],_0x305a0e;},0x0);_0x1b0b78+=_0xd454ff;}_0x51f11b[_0x17fb0c[_0x248e7a(0x254)]][_0x33810a]=_0x1b0b78;});}});const _0x572589=[..._0x541994];_0x572589[_0x3459d0(0x28a)]({'coin':stablecoins[_0x3459d0(0x2bc)][_0x3459d0(0x254)],'symbol':stablecoins['eur']['symbol']}),_0x572589['push']({'coin':stablecoins['usd'][_0x3459d0(0x254)],'symbol':stablecoins[_0x3459d0(0x2df)][_0x3459d0(0x24f)]});let _0x59a03a=[];for(const _0x3af6a9 of _0x572589){_0x59a03a[_0x3af6a9['coin']]=await getCloses(_0x3af6a9['symbol'],new Date(_0x36837c[_0x3459d0(0x23d)]));}dbPerformance[_0x3459d0(0x239)](_0x3459d0(0x214))[_0x3459d0(0x283)]()[_0x3459d0(0x2d7)](),_0x28097f['forEach']((_0x1cdd10,_0x4594d2)=>{const _0x54615a=_0x3459d0;let _0xdfbd1,_0x42953f=[];_0x4594d2==0x0?(_0x36837c[_0x54615a(0x2f1)]['forEach'](_0x3741a3=>{const _0x136698=_0x54615a;!_0x3741a3[_0x136698(0x2b7)]&&_0x42953f[_0x136698(0x28a)]({'coin':_0x3741a3[_0x136698(0x254)],'number':_0x3741a3['startnumber'],'price':_0x3741a3[_0x136698(0x22d)]});}),_0xdfbd1={'date':_0x1cdd10,'eur':_0x59a03a[stablecoins['eur'][_0x54615a(0x254)]][_0x4594d2],'usd':_0x59a03a[stablecoins[_0x54615a(0x2df)][_0x54615a(0x254)]][_0x4594d2],'coins':_0x42953f}):(_0x36837c[_0x54615a(0x2f1)]['forEach'](_0xf24824=>{const _0x8c78e2=_0x54615a;!_0xf24824[_0x8c78e2(0x2b7)]&&_0x42953f[_0x8c78e2(0x28a)]({'coin':_0xf24824[_0x8c78e2(0x254)],'number':_0x51f11b[_0xf24824['coin']][_0x1cdd10],'price':_0xf24824['coin']==config[_0x8c78e2(0x296)]?0x1:_0x59a03a[_0xf24824[_0x8c78e2(0x254)]][_0x4594d2]});}),_0xdfbd1={'date':_0x1cdd10,'eur':_0x59a03a[stablecoins[_0x54615a(0x2bc)][_0x54615a(0x254)]][_0x4594d2],'usd':_0x59a03a[stablecoins[_0x54615a(0x2df)][_0x54615a(0x254)]][_0x4594d2],'coins':_0x42953f}),dbPerformance[_0x54615a(0x239)](_0x54615a(0x214))[_0x54615a(0x28a)](_0xdfbd1)[_0x54615a(0x2d7)]();}),emitPerformance(),await resetCoinResults();for(let _0x4ba379 of _0x5bf50e){_0x4ba379[_0x3459d0(0x254)]!=config[_0x3459d0(0x296)]&&await updateCoinResults(_0x4ba379);}logHistory(_0x3459d0(0x1fe),_0x3459d0(0x282));}catch(_0x5e719a){await handleError(_0x5e719a,_0x3459d0(0x2ac));}}function _0x7d88(){const _0x117608=['\x20|\x20Unknown\x20error\x20occured','trade','orderType','target','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fetchBalance','Order\x20filled:\x20','date','ask','./version.json','startprice','storeConfiguration','yyyy/MM/dd\x20HH:mm:ss','BUSD','search','limit','defaults','fromCodePoint','error','Executed\x20','BTC/BUSD','-config.json','get','side','Crypt','BTC/EUR','startdate','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','symbols','configuration','sell','starting-balances','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','availableBalance','Binance\x20API\x20secret\x20is\x20invalid','toFixed','currency','DDoSProtection','threshold','InsufficientFunds','number','getStartingBalances','asset','getMonth','symbol','slice','test','Order:\x20','value','coin','closeWs','\x20-\x20','BTC/USDT','reverse','spot','apply','2461722kERtjO','filled','padStart','\x20order:\x20','find','USDC','bid','wsMarket','enabled','distribution','ordertype','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getDate','last','apiSecret','BTCUSDT','differenceInSeconds','max','binanceus','HOT/EUR','eventType','abs','buy','wsKey','getHours','showname','headless','isArray','timestamp','cooldown','RSA-OAEP','accumulatedQuantity','args','bb-settings.json','getCoins()','1086236fIkEBq','progress','buys','valid','Performance\x20recreation\x20completed\x20successfully','remove','orderId','emitHistory','./config/','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','has','performance','push','binance','ccxt','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','233yMoMSQ','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','reconnected','LIMIT','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','MIN_NOTIONAL','getFullYear','decrypt','basecoin','************','existsSync','cancelLoading','\x20hour','realized','toString','-performance.json','price','getTime','getCloses()','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','milliseconds','Binance\x20API\x20key\x20is\x20invalid','apiKey',':\x20Bot\x20','secure','4904199qLtfgL','parseISO','InvalidNonce','cancel','WebSockets(','recreateHistory()','bot','differenceInCalendarDays',')\x20|\x20Error\x20details:\x20','coins','ticker','hybrid-crypto-js','wss://stream.binance.com:9443','datetime','emojisell','filter','excluded','emojibuy',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','version','botID','eur','length','Order(s)\x20not\x20validated\x20after\x20','entries','format','assign','limit-high','min','splice','includes','Limit\x20(high-margin)','(((.+)+)+)+$','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','add','userData','bot-','replace','restart','getPortfolio()','getMinutes','timeout','BTCEUR','send','parse','page','delta','DAI/','write','fees','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','lowdb','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','9342xOSiry','BTC','yyyy/MM/dd','usd','RequestTimeout','privateKey','248tzYONa','initclient','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','argv','cost','toLowerCase','BNB','event','loadMarkets','\x20minutes\x20-\x20balancing\x20resumed','Order(s)\x20validated\x20-\x20balancing\x20resumed','-events.json','Bot\x20','Order\x20amount\x20is\x20invalid:\x20','AuthenticationError','portfolio','sells','exchange','balances','ExchangeNotAvailable','placeOrder','forEach','order','-results.json','time','startnumber','yyyy-MM-dd\x27T\x27HH:mm:ss','subscribeSpotKline','keys','wss://stream.binance.us:9443','log','settings','running','2074010BjKGqR','logs','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','EUR','breakeven','fee','kill','success','getPortfolio','sha256','fetchOHLCV','Order(s)\x20filled\x20-\x20balancing\x20resumed','amount','10UQjqIF','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','message','51716JHJdOv','5014122KeQmaI','market','\x20>\x20','indexOf','loadSymbols()','limits','getSeconds','offset','placeOrder()','event-history','Invalid\x20quantity','remainingSymbols','data','timeshift','split','round','Market','exit','formattedMessage','Limit\x20(low-margin)','type','fetchTickers','sortBy','11ftZVKu','close','stringify','botname'];_0x7d88=function(){return _0x117608;};return _0x7d88();}async function getCloses(_0x461515,_0x41e45f,_0x4b53cc=undefined){const _0xb00d1a=_0xb6b6c8,_0xacee0='1d';let _0x5f3201,_0x58bb71;const _0x500dd3=fns[_0xb00d1a(0x2ae)](new Date(),_0x41e45f)+0x1;try{const _0x38f4e0=exchange[_0xb00d1a(0x2a2)]()-_0x500dd3*0x18*0xe10*0x3e8;_0x5f3201=await exchange[_0xb00d1a(0x201)](_0x461515,_0xacee0,_0x38f4e0,_0x4b53cc),_0x58bb71=await exchange[_0xb00d1a(0x21d)](_0x461515);}catch(_0x5e656d){await handleError(_0x5e656d,_0xb00d1a(0x2a0));}let _0x9a4477=ohlcvToCloses(_0x5f3201);return _0x9a4477[_0xb00d1a(0x28a)](_0x58bb71[_0x461515][_0xb00d1a(0x268)]),_0x9a4477;}function _0x3bc6(_0x1af59d,_0x1163a8){const _0x381586=_0x7d88();return _0x3bc6=function(_0x59f2ce,_0x18dc2c){_0x59f2ce=_0x59f2ce-0x1f3;let _0x7d8878=_0x381586[_0x59f2ce];return _0x7d8878;},_0x3bc6(_0x1af59d,_0x1163a8);}function ohlcvToCloses(_0x15fef2){let _0x26b7b3=[];return _0x15fef2['forEach'](function(_0x299b4a){const _0x23fca8=_0x3bc6;_0x26b7b3[_0x23fca8(0x28a)](_0x299b4a[0x4]);}),_0x26b7b3;}function getConfiguration(_0x271c44){const _0x402764=_0xb6b6c8;let _0x3e5d47=dbConfig['get'](_0x402764(0x2ad))[_0x402764(0x25f)]({'botID':_0x271c44})['value']();if(_0x3e5d47){let _0x4dc3ae=![];!_0x3e5d47[_0x402764(0x2f3)]&&(_0x3e5d47={..._0x3e5d47,'exchange':_0x402764(0x28b)},_0x4dc3ae=!![]),!_0x3e5d47['basecoin']&&(_0x3e5d47={..._0x3e5d47,'basecoin':_0x402764(0x2dd)},_0x4dc3ae=!![]),!_0x3e5d47[_0x402764(0x265)]&&(_0x3e5d47={..._0x3e5d47,'ordertype':_0x402764(0x209)},_0x4dc3ae=!![]),!_0x3e5d47[_0x402764(0x2d0)]&&(_0x3e5d47={..._0x3e5d47,'timeout':0x14},_0x4dc3ae=!![]),!_0x3e5d47[_0x402764(0x2b8)]&&(_0x3e5d47={..._0x3e5d47,'emojibuy':''},_0x4dc3ae=!![]),!_0x3e5d47[_0x402764(0x2b5)]&&(_0x3e5d47={..._0x3e5d47,'emojisell':''},_0x4dc3ae=!![]),!_0x3e5d47['showname']&&(_0x3e5d47={..._0x3e5d47,'showname':![]},_0x4dc3ae=!![]),_0x4dc3ae&&(_0x3e5d47={'botID':_0x3e5d47[_0x402764(0x2bb)],'exchange':_0x3e5d47[_0x402764(0x2f3)],'apiKey':_0x3e5d47[_0x402764(0x2a4)],'apiSecret':_0x3e5d47[_0x402764(0x269)],'basecoin':_0x3e5d47['basecoin'],'botname':_0x3e5d47['botname'],'showname':_0x3e5d47['showname'],'threshold':_0x3e5d47[_0x402764(0x249)],'ordertype':_0x3e5d47[_0x402764(0x265)],'timeout':_0x3e5d47['timeout'],'startdate':_0x3e5d47['startdate'],'recreate':_0x3e5d47['recreate'],'timeshift':_0x3e5d47['timeshift'],'headless':_0x3e5d47[_0x402764(0x275)],'cooldown':_0x3e5d47[_0x402764(0x278)],'emojibuy':_0x3e5d47[_0x402764(0x2b8)],'emojisell':_0x3e5d47[_0x402764(0x2b5)],'portfolio':_0x3e5d47[_0x402764(0x2f1)]},dbConfig[_0x402764(0x239)](_0x402764(0x2ad))['remove']()['write'](),dbConfig[_0x402764(0x239)](_0x402764(0x2ad))['push'](_0x3e5d47)[_0x402764(0x2d7)]());}else _0x3e5d47={'botID':_0x271c44,'exchange':_0x402764(0x28b),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x402764(0x2ee)+_0x271c44,'showname':![],'threshold':'3','ordertype':_0x402764(0x209),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x402764(0x215)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x3e5d47;}function emittedConfiguration(){const _0x1bfb7b=_0xb6b6c8;let _0x529a3e;return config[_0x1bfb7b(0x2a4)]==''?_0x529a3e=config:_0x529a3e={...config,'apiKey':_0x1bfb7b(0x297),'apiSecret':'************'},_0x529a3e;}function getSettings(){const _0x13fe18=_0xb6b6c8;return dbSettings[_0x13fe18(0x239)](_0x13fe18(0x1f5))[_0x13fe18(0x253)]();}function getSecure(){const _0x2a9870=_0xb6b6c8;return dbSecure[_0x2a9870(0x239)](_0x2a9870(0x2a6))['value']()||{};}function updateTimeshift(_0xb7ebb6){const _0x2ad658=_0xb6b6c8;let _0x26e890=dbConfig['get'](_0x2ad658(0x2ad))['find']({'botID':botID})[_0x2ad658(0x253)]();_0x26e890&&dbConfig[_0x2ad658(0x239)](_0x2ad658(0x2ad))['find']({'botID':botID})['assign']({'timeshift':_0xb7ebb6})[_0x2ad658(0x2d7)](),config[_0x2ad658(0x215)]=_0xb7ebb6,proxyEmit(_0x2ad658(0x240),emittedConfiguration());}async function storeConfiguration(_0xb4f0e){const _0x48d233=_0xb6b6c8;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x197bfe=dbConfig['get'](_0x48d233(0x2ad))[_0x48d233(0x25f)]({'botID':botID})['value']();_0xb4f0e={..._0xb4f0e,'apiKey':crypt[_0x48d233(0x295)](secure[_0x48d233(0x2e1)],_0xb4f0e[_0x48d233(0x2a4)])[_0x48d233(0x206)],'apiSecret':crypt[_0x48d233(0x295)](secure[_0x48d233(0x2e1)],_0xb4f0e[_0x48d233(0x269)])[_0x48d233(0x206)]};if(_0x197bfe){if(_0xb4f0e[_0x48d233(0x2a4)]==_0x48d233(0x297))_0xb4f0e['apiKey']=config[_0x48d233(0x2a4)];if(_0xb4f0e[_0x48d233(0x269)]=='************')_0xb4f0e[_0x48d233(0x269)]=config['apiSecret'];dbConfig[_0x48d233(0x239)]('bot')['find']({'botID':botID})['assign'](_0xb4f0e)['write']();}else dbConfig[_0x48d233(0x239)]('bot')[_0x48d233(0x28a)](_0xb4f0e)[_0x48d233(0x2d7)](),process[_0x48d233(0x2d2)]({'status':_0x48d233(0x263),'live':'running'},_0x2cf09b=>{});config={..._0xb4f0e};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x48d233(0x2d2)]({'botname':_0xb4f0e[_0x48d233(0x222)]},_0x57979a=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x3ca9db){const _0x371518=_0xb6b6c8,_0x1880e5={...config,'headless':_0x3ca9db['headless']};let _0x26f8a5=dbConfig[_0x371518(0x239)](_0x371518(0x2ad))[_0x371518(0x25f)]({'botID':botID})[_0x371518(0x253)]();_0x26f8a5&&dbConfig[_0x371518(0x239)](_0x371518(0x2ad))[_0x371518(0x25f)]({'botID':botID})[_0x371518(0x2c1)](_0x1880e5)['write'](),config={..._0x1880e5},proxyEmit(_0x371518(0x240),emittedConfiguration());}function noslash(_0x4084f5){const _0x546649=_0xb6b6c8;return _0x4084f5[_0x546649(0x2cc)]('/','');}function updateNumberCoins(_0x2b78b5){const _0x4e2b7c=_0xb6b6c8;_0x2b78b5[_0x4e2b7c(0x26f)]&&_0x2b78b5[_0x4e2b7c(0x26f)]=='outboundAccountPosition'&&_0x2b78b5['balances'][_0x4e2b7c(0x2f7)](_0x39f315=>{const _0x550af4=_0x4e2b7c;let _0x328c5c=currentCoins['find'](_0x2067ea=>_0x2067ea[_0x550af4(0x254)]==_0x39f315[_0x550af4(0x24d)]),_0x53fc49=config[_0x550af4(0x2f1)][_0x550af4(0x25f)](_0x3d2dfd=>_0x3d2dfd['coin']==_0x39f315[_0x550af4(0x24d)]);if(_0x328c5c&&_0x53fc49)_0x328c5c[_0x550af4(0x24b)]=Math['max'](Number(_0x39f315[_0x550af4(0x244)])+(_0x53fc49[_0x550af4(0x20f)]||0x0),0x0);});if(_0x2b78b5[_0x4e2b7c(0x26f)]&&_0x2b78b5['eventType']=='executionReport'){if(_0x2b78b5[_0x4e2b7c(0x225)]==_0x4e2b7c(0x291)&&_0x2b78b5['orderStatus']=='FILLED'){if(lastOrders)lastOrders[_0x4e2b7c(0x2f7)](_0x3ed236=>{const _0x9d7ed4=_0x4e2b7c;if(_0x3ed236[_0x9d7ed4(0x284)]==_0x2b78b5[_0x9d7ed4(0x284)]){if(_0x3ed236[_0x9d7ed4(0x258)])_0x3ed236[_0x9d7ed4(0x25c)]=_0x2b78b5[_0x9d7ed4(0x27a)]*_0x3ed236[_0x9d7ed4(0x29e)];else _0x3ed236[_0x9d7ed4(0x25c)]=_0x2b78b5[_0x9d7ed4(0x27a)];}});}}}async function getCoins(_0x7c5f7c=!![],_0x17ce86=config[_0xb6b6c8(0x296)]){const _0x2cc97e=_0xb6b6c8;let _0x50079e,_0x2355ad=[],_0xd54c7d=[],_0x53ec4d=[];try{_0x50079e=await exchange[_0x2cc97e(0x228)](),mybalances=_0x50079e['total'];if(!_0x7c5f7c)for(const [_0x408079,_0x139615]of Object['entries'](mybalances)){_0x53ec4d['push'](_0x408079);}else config[_0x2cc97e(0x2f1)]['forEach'](_0x47e831=>{const _0x5969ce=_0x2cc97e;if(!_0x47e831[_0x5969ce(0x2b7)])_0x53ec4d['push'](_0x47e831[_0x5969ce(0x254)]);});if(_0x17ce86=='')for(const [_0x2d003b,_0x37c57f]of Object[_0x2cc97e(0x2bf)](mybalances)){_0x37c57f[_0x2cc97e(0x29c)]()!=0x0&&_0xd54c7d[_0x2cc97e(0x28a)]({'coin':_0x2d003b});}else for(const [_0x2964d6,_0x48ab18]of Object[_0x2cc97e(0x2bf)](mybalances)){if(_0x53ec4d['includes'](_0x2964d6)){const _0x59b348=config['portfolio']['find'](_0x2c2397=>_0x2c2397[_0x2cc97e(0x254)]==_0x2964d6);if((_0x48ab18['toString']()!=0x0||_0x59b348)&&(allSymbols[_0x2cc97e(0x2c5)](_0x2964d6+'/'+_0x17ce86)||_0x2964d6==_0x17ce86))_0xd54c7d[_0x2cc97e(0x28a)]({'coin':_0x2964d6,'symbol':_0x2964d6+'/'+_0x17ce86,'reverse':![],'number':Math['max'](_0x48ab18+(_0x59b348&&_0x59b348[_0x2cc97e(0x20f)]||0x0),0x0)}),_0x2964d6!=_0x17ce86&&_0x2355ad[_0x2cc97e(0x28a)](_0x2964d6+'/'+_0x17ce86);else(_0x48ab18[_0x2cc97e(0x29c)]()!=0x0||_0x59b348)&&allSymbols['includes'](_0x17ce86+'/'+_0x2964d6)&&(_0xd54c7d['push']({'coin':_0x2964d6,'symbol':_0x17ce86+'/'+_0x2964d6,'reverse':!![],'number':Math[_0x2cc97e(0x26c)](_0x48ab18+(_0x59b348&&_0x59b348[_0x2cc97e(0x20f)]||0x0),0x0)}),_0x2964d6!=_0x17ce86&&_0x2355ad[_0x2cc97e(0x28a)](_0x17ce86+'/'+_0x2964d6));}}}catch(_0x4990b5){if(!_0x7c5f7c){if(_0x4990b5['toString']()['includes']('API-key\x20format\x20invalid'))return logHistory(_0x2cc97e(0x235),_0x2cc97e(0x2a3)),![];else{if(_0x4990b5[_0x2cc97e(0x29c)]()['includes'](_0x2cc97e(0x2f0)))return logHistory(_0x2cc97e(0x235),_0x2cc97e(0x243)),![];else{if(_0x4990b5[_0x2cc97e(0x29c)]()[_0x2cc97e(0x2c5)](_0x2cc97e(0x2e4)))return logHistory('error',_0x2cc97e(0x245)),![];else await handleError(_0x4990b5,'getCoins()');}}}else await handleError(_0x4990b5,_0x2cc97e(0x27d));}return _0xd54c7d;}async function getPortfolio(_0x21a5f0){const _0x3c5cf5=_0xb6b6c8;let _0x12e436=[],_0x27a736=[],_0x3eae16,_0x3da6df=[],_0x22d20c,_0x360c85;_0x21a5f0[_0x3c5cf5(0x2a4)]===_0x3c5cf5(0x297)||_0x21a5f0[_0x3c5cf5(0x269)]===_0x3c5cf5(0x297)?(_0x22d20c=config['apiKey'],_0x360c85=config[_0x3c5cf5(0x269)]):(_0x22d20c=_0x21a5f0[_0x3c5cf5(0x2a4)],_0x360c85=_0x21a5f0[_0x3c5cf5(0x269)]);await initExchange(_0x22d20c,_0x360c85);let _0x572854=await loadSymbols();if(_0x572854){_0x3da6df=await getCoins(![],_0x21a5f0['basecoin']);if(_0x3da6df===![])proxyEmit(_0x3c5cf5(0x2f1),![]);else{if(_0x21a5f0['basecoin']=='')proxyEmit(_0x3c5cf5(0x2f1),_0x3da6df);else{_0x3da6df[_0x3c5cf5(0x2f7)](_0x4b352e=>{const _0x185f53=_0x3c5cf5;_0x12e436[_0x185f53(0x28a)](_0x4b352e[_0x185f53(0x24f)]);});try{_0x27a736=await exchange[_0x3c5cf5(0x21d)](_0x12e436);}catch(_0x4479e8){await handleError(_0x4479e8,_0x3c5cf5(0x2ce));}_0x3da6df[_0x3c5cf5(0x2f7)](_0x2fc30b=>{const _0x30aec4=_0x3c5cf5;_0x2fc30b[_0x30aec4(0x254)]!=_0x21a5f0['basecoin']?_0x3eae16=_0x2fc30b[_0x30aec4(0x258)]?0x1/_0x27a736[_0x2fc30b[_0x30aec4(0x24f)]][_0x30aec4(0x268)]:_0x27a736[_0x2fc30b['symbol']][_0x30aec4(0x268)]:_0x3eae16=0x1,_0x2fc30b[_0x30aec4(0x29e)]=formatResult(_0x3eae16,0x8);}),proxyEmit(_0x3c5cf5(0x2f1),_0x3da6df);}}}else proxyEmit(_0x3c5cf5(0x2f1),![]);}function checkMinimums(_0x2d4e4b){const _0x280a4e=_0xb6b6c8;let _0x243745=!![];const _0x2b7ed6=!_0x2d4e4b['reverse']?markets[_0x2d4e4b[_0x280a4e(0x24f)]][_0x280a4e(0x20d)]['amount'][_0x280a4e(0x2c3)]:markets[_0x2d4e4b[_0x280a4e(0x24f)]][_0x280a4e(0x20d)][_0x280a4e(0x2e6)][_0x280a4e(0x2c3)],_0x2b0701=!_0x2d4e4b[_0x280a4e(0x258)]?markets[_0x2d4e4b['symbol']][_0x280a4e(0x20d)][_0x280a4e(0x2e6)][_0x280a4e(0x2c3)]:markets[_0x2d4e4b[_0x280a4e(0x24f)]][_0x280a4e(0x20d)][_0x280a4e(0x203)][_0x280a4e(0x2c3)];if(Math[_0x280a4e(0x270)](_0x2d4e4b[_0x280a4e(0x224)])<_0x2b7ed6)_0x243745=![];if(Math['abs'](_0x2d4e4b['trade'])*_0x2d4e4b[_0x280a4e(0x268)]<_0x2b0701)_0x243745=![];return _0x243745;}async function getBalances(){const _0x41ef1a=_0xb6b6c8;let _0xc9d382=0x0,_0x1f6418;const _0x3b28b2=config[_0x41ef1a(0x249)];currentCoins['forEach'](_0x4e1f24=>{const _0x3838ac=_0x41ef1a;if(_0x4e1f24[_0x3838ac(0x254)]!=config[_0x3838ac(0x296)]){let _0x2548a6=global['ticker'][noslash(_0x4e1f24[_0x3838ac(0x24f)])];_0x1f6418=_0x4e1f24['reverse']?0x1/_0x2548a6:_0x2548a6;}else _0x1f6418=0x1;let _0x5b5c5a=_0x4e1f24['number']*_0x1f6418;_0xc9d382+=_0x5b5c5a,_0x4e1f24[_0x3838ac(0x268)]=formatResult(Number(_0x1f6418),0x8),_0x4e1f24[_0x3838ac(0x253)]=_0x5b5c5a;}),currentCoins[_0x41ef1a(0x2f7)](_0x73b9fc=>{const _0x1c2a9b=_0x41ef1a;let _0x3eb317=config[_0x1c2a9b(0x2f1)][_0x1c2a9b(0x25f)](_0x304b21=>_0x304b21['coin']==_0x73b9fc[_0x1c2a9b(0x254)]),_0x3de0b6=Number(_0x3eb317[_0x1c2a9b(0x264)]),_0x22cb15=_0x73b9fc['value']/_0xc9d382*0x64,_0x1e95bb=_0x3de0b6*_0xc9d382/0x64/_0x73b9fc[_0x1c2a9b(0x268)]-_0x73b9fc[_0x1c2a9b(0x24b)];_0x73b9fc['distribution']=formatResult(_0x22cb15,0x3),_0x73b9fc[_0x1c2a9b(0x226)]=formatResult(_0x3de0b6,0x3),_0x73b9fc['trade']=formatResult(_0x1e95bb,0x8),_0x73b9fc['side']='',_0x73b9fc[_0x1c2a9b(0x281)]='';if(_0x73b9fc[_0x1c2a9b(0x254)]!=config['basecoin']){if(_0x73b9fc['distribution']>_0x3de0b6)_0x73b9fc[_0x1c2a9b(0x23a)]=_0x1c2a9b(0x241),_0x73b9fc[_0x1c2a9b(0x281)]=checkMinimums(_0x73b9fc);else _0x73b9fc[_0x1c2a9b(0x264)]<_0x3de0b6&&(_0x73b9fc[_0x1c2a9b(0x23a)]='buy',_0x73b9fc[_0x1c2a9b(0x281)]=checkMinimums(_0x73b9fc));}_0x73b9fc[_0x1c2a9b(0x2d5)]=_0x73b9fc[_0x1c2a9b(0x264)]/_0x73b9fc[_0x1c2a9b(0x226)]-0x1;}),currentCoins['sort']((_0x2f9efb,_0x3c4865)=>_0x2f9efb['delta']<_0x3c4865[_0x41ef1a(0x2d5)]?0x1:_0x3c4865[_0x41ef1a(0x2d5)]<_0x2f9efb[_0x41ef1a(0x2d5)]?-0x1:0x0);const _0x70880d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x70880d[_0x41ef1a(0x2bc)],'usd':_0x70880d[_0x41ef1a(0x2df)],'portfolio':JSON[_0x41ef1a(0x221)](currentCoins),'threshold':_0x3b28b2},proxyEmit(_0x41ef1a(0x2f4),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x41ef1a(0x275)])headlessMode({'portfolio':currentCoins,'threshold':_0x3b28b2});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x52bbc3=_0xb6b6c8;if(!lastBalances)return;let _0x471c1b=await getStartingBalances(![]),_0xc6b9e8=[],_0x59ea80;JSON[_0x52bbc3(0x2d3)](lastBalances[_0x52bbc3(0x2f1)])[_0x52bbc3(0x2f7)](_0x280c8b=>{const _0x16e090=_0x52bbc3;let _0x27e60={'coin':_0x280c8b['coin'],'number':_0x280c8b[_0x16e090(0x24b)],'price':_0x280c8b[_0x16e090(0x268)]};_0xc6b9e8[_0x16e090(0x28a)](_0x27e60);});const _0x4b4e3d=await getFiat();_0x59ea80={'date':lastBalances[_0x52bbc3(0x2fa)][_0x52bbc3(0x216)]('\x20')[0x0],'eur':_0x4b4e3d[_0x52bbc3(0x2bc)],'usd':_0x4b4e3d[_0x52bbc3(0x2df)],'coins':_0xc6b9e8};let _0x352129=dbPerformance[_0x52bbc3(0x239)](_0x52bbc3(0x214))[_0x52bbc3(0x25f)]({'date':_0x59ea80[_0x52bbc3(0x22a)]})['value']();_0x352129?dbPerformance['get'](_0x52bbc3(0x214))[_0x52bbc3(0x25f)]({'date':_0x59ea80[_0x52bbc3(0x22a)]})[_0x52bbc3(0x2c1)](_0x59ea80)[_0x52bbc3(0x2d7)]():dbPerformance[_0x52bbc3(0x239)](_0x52bbc3(0x214))['push'](_0x59ea80)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x58819c=_0xb6b6c8;if(dbPerformance[_0x58819c(0x288)]('data')[_0x58819c(0x253)]()){let _0x55f735=dbPerformance[_0x58819c(0x239)](_0x58819c(0x214))[_0x58819c(0x21e)](_0x58819c(0x22a))[_0x58819c(0x253)]();proxyEmit(_0x58819c(0x289),_0x55f735),lastPerformanceEmitted=getDate();}else proxyEmit(_0x58819c(0x289),[]);}async function getStartingBalances(_0x444b95=!![]){const _0x297c27=_0xb6b6c8;let _0xbcb1be=dbPerformance[_0x297c27(0x239)](_0x297c27(0x214))[_0x297c27(0x25f)]({'date':config[_0x297c27(0x23d)]})[_0x297c27(0x253)]();config[_0x297c27(0x2a4)]!=''&&!_0xbcb1be&&(await setStartDatePerformance(config),_0xbcb1be=dbPerformance[_0x297c27(0x239)](_0x297c27(0x214))['find']({'date':config[_0x297c27(0x23d)]})[_0x297c27(0x253)]());if(config[_0x297c27(0x2a4)]==''||!_0xbcb1be)return{};let _0x4b5e2f=0x0,_0x386b3b=0x0,_0xaa9ccb=0x0,_0x40af47=[],_0xf546d=0x0;config[_0x297c27(0x2f1)][_0x297c27(0x2f7)](_0xfdc67=>{const _0x1a8529=_0x297c27;if(!_0xfdc67[_0x1a8529(0x2b7)]){_0x40af47[_0xf546d]={'coin':_0xfdc67[_0x1a8529(0x254)],'symbol':_0xfdc67['symbol'],'number':_0xfdc67[_0x1a8529(0x2fb)],'price':_0xfdc67[_0x1a8529(0x22d)]},_0x4b5e2f+=_0xfdc67[_0x1a8529(0x22d)]*_0xfdc67[_0x1a8529(0x2fb)];if(config[_0x1a8529(0x296)]==_0x1a8529(0x2dd))_0x386b3b+=_0xfdc67[_0x1a8529(0x22d)]*_0xfdc67['startnumber']*_0xbcb1be[_0x1a8529(0x2bc)],_0xaa9ccb+=_0xfdc67['startprice']*_0xfdc67['startnumber']*_0xbcb1be[_0x1a8529(0x2df)];else{if(config[_0x1a8529(0x296)]==_0x1a8529(0x230)||config[_0x1a8529(0x296)]=='USDT'||config[_0x1a8529(0x296)]==_0x1a8529(0x260))_0x386b3b+=_0xfdc67['startprice']*_0xfdc67['startnumber']*_0xbcb1be['eur']/_0xbcb1be['usd'],_0xaa9ccb+=_0xfdc67[_0x1a8529(0x22d)]*_0xfdc67[_0x1a8529(0x2fb)];else config[_0x1a8529(0x296)]==_0x1a8529(0x1fa)&&(_0x386b3b+=_0xfdc67[_0x1a8529(0x22d)]*_0xfdc67[_0x1a8529(0x2fb)],_0xaa9ccb+=_0xfdc67[_0x1a8529(0x22d)]*_0xfdc67[_0x1a8529(0x2fb)]*_0xbcb1be[_0x1a8529(0x2df)]/_0xbcb1be[_0x1a8529(0x2bc)]);}_0xf546d++;}});let _0x569438={'basecoin':_0x4b5e2f,'eur':_0x386b3b,'usd':_0xaa9ccb,'coins':_0x40af47};if(_0x444b95)proxyEmit(_0x297c27(0x242),_0x569438);return _0x569438;}function headlessMode(_0x4cdda3){const _0x44e546=_0xb6b6c8;let _0x10232f=_0x4cdda3[_0x44e546(0x2f1)],_0x7d786e=_0x4cdda3[_0x44e546(0x249)],_0x581326=[];for(let _0x1c7bb1 of _0x10232f){if(_0x1c7bb1[_0x44e546(0x254)]!=config['basecoin']){if(_0x1c7bb1['distribution']/_0x1c7bb1[_0x44e546(0x226)]-0x1>=_0x7d786e/0x64){if(_0x1c7bb1['valid'])_0x581326['push'](_0x1c7bb1);}else{if(_0x1c7bb1['distribution']/_0x1c7bb1[_0x44e546(0x226)]-0x1<=-_0x7d786e/0x64){if(_0x1c7bb1[_0x44e546(0x281)])_0x581326['push'](_0x1c7bb1);}}}}_0x581326[_0x44e546(0x2bd)]>0x0&&placeOrder(_0x581326);}function symbolToCoin(_0xcb79b9){const _0x1e2055=_0xb6b6c8;let _0x5a883b;if(_0xcb79b9['includes']('/'+config[_0x1e2055(0x296)]))_0x5a883b=_0xcb79b9['replace']('/'+config['basecoin'],'');if(_0xcb79b9[_0x1e2055(0x2c5)](config[_0x1e2055(0x296)]+'/'))_0x5a883b=_0xcb79b9['replace'](config[_0x1e2055(0x296)]+'/','');return _0x5a883b;}async function validateOrders(_0x3fc8f9=0x0){const _0x5b79b4=_0xb6b6c8;let _0x5afd7d=[],_0x3e8b74=config[_0x5b79b4(0x265)]==_0x5b79b4(0x209)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5b79b4(0x2d0)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x5b79b4(0x2f7)](_0x3cf637=>{const _0xe3a55d=_0x5b79b4;let _0x3a19e3=previousCoins[_0xe3a55d(0x25f)](_0x2c0adb=>_0x2c0adb[_0xe3a55d(0x254)]==symbolToCoin(_0x3cf637['symbol'])),_0x170cf1=currentCoins[_0xe3a55d(0x25f)](_0x25fe95=>_0x25fe95[_0xe3a55d(0x254)]==symbolToCoin(_0x3cf637['symbol'])),_0xfe914f,_0x4ae712;_0x3cf637[_0xe3a55d(0x23a)]==_0xe3a55d(0x271)&&!_0x3cf637[_0xe3a55d(0x258)]||_0x3cf637['side']==_0xe3a55d(0x241)&&_0x3cf637[_0xe3a55d(0x258)]?(_0xfe914f=_0x3a19e3['number']+0.9*_0x3cf637['filled'],_0x4ae712=_0x3a19e3['number']+1.1*_0x3cf637[_0xe3a55d(0x25c)]):(_0xfe914f=_0x3a19e3[_0xe3a55d(0x24b)]-1.1*_0x3cf637[_0xe3a55d(0x25c)],_0x4ae712=_0x3a19e3[_0xe3a55d(0x24b)]-0.9*_0x3cf637[_0xe3a55d(0x25c)]);const _0x4702b0=_0x3cf637[_0xe3a55d(0x25c)]!=0x0&&_0x170cf1['number']>=_0xfe914f&&_0x170cf1['number']<=_0x4ae712;_0x5afd7d[_0xe3a55d(0x28a)](_0x4702b0);if(_0x4702b0&&config[_0xe3a55d(0x265)]!='market'){if(_0x3cf637[_0xe3a55d(0x258)])logHistory(_0xe3a55d(0x2f8),_0xe3a55d(0x229)+_0x3cf637['symbol']+'\x20'+_0x3cf637[_0xe3a55d(0x23a)]+'\x20#'+formatResult(_0x3cf637[_0xe3a55d(0x25c)]/_0x3cf637[_0xe3a55d(0x29e)],0x8)+'\x20@'+formatResult(_0x3cf637[_0xe3a55d(0x29e)],0x8));else logHistory(_0xe3a55d(0x2f8),_0xe3a55d(0x229)+_0x3cf637[_0xe3a55d(0x24f)]+'\x20'+_0x3cf637[_0xe3a55d(0x23a)]+'\x20#'+formatResult(_0x3cf637[_0xe3a55d(0x25c)],0x8)+'\x20@'+formatResult(_0x3cf637[_0xe3a55d(0x29e)],0x8));}}),_0x5afd7d[_0x5b79b4(0x2f7)]((_0x1000d0,_0x190f5c)=>{const _0x361a43=_0x5b79b4;if(_0x1000d0)lastOrders[_0x361a43(0x2c4)](_0x190f5c,0x1);});if(_0x3fc8f9<_0x3e8b74&&_0x5afd7d[_0x5b79b4(0x2c5)](![])){if(_0x3fc8f9==0x0){config['ordertype']==_0x5b79b4(0x209)?logHistory(_0x5b79b4(0x235),_0x5b79b4(0x23e)):logHistory(_0x5b79b4(0x235),_0x5b79b4(0x2db));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3fc8f9);},0xa*0x3e8);}else{(_0x3fc8f9==0x1||_0x3fc8f9==Math['round'](_0x3e8b74/0x2)||_0x3fc8f9==_0x3e8b74-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3fc8f9);},validateOrderInterval);}}else{lockOrders=![];if(_0x3fc8f9>0x0&&!_0x5afd7d['includes'](![]))config[_0x5b79b4(0x265)]==_0x5b79b4(0x209)?logHistory('success',_0x5b79b4(0x2ec)):logHistory(_0x5b79b4(0x1fe),_0x5b79b4(0x202));else _0x3fc8f9>0x0&&_0x5afd7d[_0x5b79b4(0x2c5)](![])&&(config[_0x5b79b4(0x265)]==_0x5b79b4(0x209)?logHistory(_0x5b79b4(0x1fe),_0x5b79b4(0x2be)+Math[_0x5b79b4(0x217)](_0x3e8b74*validateOrderInterval/0xea60)+_0x5b79b4(0x2eb)):(lastOrders['forEach'](async _0xb469e6=>{const _0x5a19c2=_0x5b79b4;try{const _0x576dd7=await exchange['cancelOrder'](_0xb469e6[_0x5a19c2(0x284)],_0xb469e6[_0x5a19c2(0x24f)]);}catch(_0x1168a0){if(_0x1168a0[_0x5a19c2(0x29c)]()[_0x5a19c2(0x2c5)]('OrderNotFound')){}else await handleError(_0x1168a0,'cancelOrder()');}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5b79b4(0x217)](_0x3e8b74*validateOrderInterval/0xea60)+_0x5b79b4(0x2eb))));}}async function resetCoinResults(){const _0x21246a=_0xb6b6c8;dbCoinResults[_0x21246a(0x239)](_0x21246a(0x2b0))['remove']()[_0x21246a(0x2d7)]();let _0x30e9b2=await getStartingBalances(![]);_0x30e9b2[_0x21246a(0x2b0)][_0x21246a(0x2f7)](_0x5eb494=>{const _0x31c436=_0x21246a,_0x349719=_0x5eb494['symbol'][_0x31c436(0x2c5)](config[_0x31c436(0x296)]+'/');if(_0x5eb494[_0x31c436(0x254)]!=config[_0x31c436(0x296)]){let _0x376c90={'coin':_0x5eb494['coin'],'number':_0x5eb494[_0x31c436(0x24b)],'breakeven':_0x5eb494[_0x31c436(0x29e)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x31c436(0x2b0))['push'](_0x376c90)[_0x31c436(0x2d7)]();}});}async function updateCoinResults(_0x1bf22e){const _0x588ea0=_0xb6b6c8;let _0xa4b34a,_0x17482a,_0xcde2d7,_0x5c9fd4,_0x200e26,_0xc4c386,_0x554f8f=dbCoinResults[_0x588ea0(0x239)](_0x588ea0(0x2b0))[_0x588ea0(0x25f)]({'coin':_0x1bf22e[_0x588ea0(0x254)]})[_0x588ea0(0x253)]();if(!_0x554f8f)return;if(_0x1bf22e[_0x588ea0(0x1fc)]&&_0x1bf22e[_0x588ea0(0x1fc)][_0x588ea0(0x247)]==config[_0x588ea0(0x296)])_0xa4b34a=_0x1bf22e[_0x588ea0(0x1fc)][_0x588ea0(0x2e6)];else{if(_0x1bf22e[_0x588ea0(0x1fc)]&&_0x1bf22e['fee'][_0x588ea0(0x247)]==_0x588ea0(0x2e8))_0xa4b34a=_0x1bf22e[_0x588ea0(0x1fc)][_0x588ea0(0x2e6)]*global[_0x588ea0(0x2b1)][_0x588ea0(0x2e8)+config[_0x588ea0(0x296)]];else _0xa4b34a=0.001*_0x1bf22e[_0x588ea0(0x25c)];}const _0x4ff838=_0x1bf22e['symbol'][_0x588ea0(0x2c5)](config[_0x588ea0(0x296)]+'/');_0x4ff838&&(_0xc4c386={'coin':_0x1bf22e['coin'],'symbol':_0x1bf22e[_0x588ea0(0x24f)],'filled':_0x1bf22e[_0x588ea0(0x25c)]*_0x1bf22e[_0x588ea0(0x29e)],'side':_0x1bf22e[_0x588ea0(0x23a)]==_0x588ea0(0x241)?'buy':_0x588ea0(0x241),'price':0x1/_0x1bf22e[_0x588ea0(0x29e)]},_0x1bf22e={..._0xc4c386});_0x1bf22e['side']==_0x588ea0(0x271)?_0xcde2d7=(_0x554f8f['breakeven']*_0x554f8f[_0x588ea0(0x24b)]+_0x1bf22e['price']*_0x1bf22e[_0x588ea0(0x25c)])/(_0x554f8f[_0x588ea0(0x24b)]+_0x1bf22e[_0x588ea0(0x25c)]):_0xcde2d7=(_0x554f8f[_0x588ea0(0x1fb)]*_0x554f8f[_0x588ea0(0x24b)]-_0x1bf22e[_0x588ea0(0x29e)]*_0x1bf22e[_0x588ea0(0x25c)])/(_0x554f8f[_0x588ea0(0x24b)]-_0x1bf22e[_0x588ea0(0x25c)]);_0x1bf22e['side']==_0x588ea0(0x271)?_0x5c9fd4=_0x554f8f[_0x588ea0(0x29b)]:_0x5c9fd4=_0x554f8f[_0x588ea0(0x29b)]+(_0x1bf22e[_0x588ea0(0x29e)]-_0x554f8f[_0x588ea0(0x1fb)])*_0x1bf22e['filled'];_0x17482a=_0x1bf22e[_0x588ea0(0x23a)]=='sell'?_0x554f8f['number']-_0x1bf22e['filled']:_0x554f8f[_0x588ea0(0x24b)]+_0x1bf22e['filled'],_0x200e26=(_0x1bf22e['price']-_0xcde2d7)*_0x17482a;let _0x5cc789={'coin':_0x1bf22e['coin'],'number':_0x17482a,'breakeven':formatResult(_0xcde2d7,0x8),'realized':formatResult(_0x5c9fd4,0x8),'unrealized':formatResult(_0x200e26,0x8),'fees':formatResult(_0x554f8f[_0x588ea0(0x2d8)]+_0xa4b34a,0x8),'sells':_0x1bf22e['side']==_0x588ea0(0x241)?_0x554f8f[_0x588ea0(0x2f2)]+0x1:_0x554f8f['sells'],'buys':_0x1bf22e[_0x588ea0(0x23a)]==_0x588ea0(0x271)?_0x554f8f[_0x588ea0(0x280)]+0x1:_0x554f8f[_0x588ea0(0x280)]};dbCoinResults['get'](_0x588ea0(0x2b0))[_0x588ea0(0x25f)]({'coin':_0x1bf22e[_0x588ea0(0x254)]})[_0x588ea0(0x2c1)](_0x5cc789)[_0x588ea0(0x2d7)]();}async function placeOrder(_0x333d41){const _0x5a8f45=_0xb6b6c8,_0x2f968f=config['ordertype']==_0x5a8f45(0x209)?_0x5a8f45(0x209):_0x5a8f45(0x232);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5a8f45(0x2d3)](JSON['stringify'](currentCoins));for(const _0x467966 of _0x333d41){let _0x21e34a,_0x63c9c8,_0xc4fc41,_0x3f3aa3,_0x188f9e,_0x33328c=_0x467966[_0x5a8f45(0x24f)];try{const _0x28636f=await exchange[_0x5a8f45(0x21d)](_0x33328c),_0x570ea9=_0x28636f[_0x33328c];_0x21e34a=_0x570ea9[_0x5a8f45(0x268)],_0x63c9c8=_0x570ea9[_0x5a8f45(0x261)],_0xc4fc41=_0x570ea9[_0x5a8f45(0x22b)];_0x467966[_0x5a8f45(0x258)]?(_0x3f3aa3=_0x467966[_0x5a8f45(0x23a)]==_0x5a8f45(0x271)?_0x5a8f45(0x241):_0x5a8f45(0x271),_0x188f9e=Math[_0x5a8f45(0x270)](_0x467966['trade'])/_0x21e34a):(_0x3f3aa3=_0x467966['side'],_0x188f9e=Math[_0x5a8f45(0x270)](_0x467966[_0x5a8f45(0x224)]));_0x2f968f=='limit'&&(config[_0x5a8f45(0x265)]=='limit-high'&&(_0x21e34a=_0x3f3aa3=='buy'?_0x63c9c8:_0xc4fc41),config[_0x5a8f45(0x265)]=='limit-low'&&(_0x21e34a=_0x3f3aa3==_0x5a8f45(0x271)?_0xc4fc41:_0x63c9c8));_0x188f9e=formatResult(_0x188f9e,0x8),_0x21e34a=formatResult(_0x21e34a,0x8);const _0x2eb167=await exchange['createOrder'](_0x33328c,_0x2f968f,_0x3f3aa3,_0x188f9e,_0x21e34a);lastOrders[_0x5a8f45(0x28a)]({'orderId':_0x2eb167['id'],'symbol':_0x33328c,'side':_0x3f3aa3,'reverse':_0x467966[_0x5a8f45(0x258)],'amount':_0x467966[_0x5a8f45(0x258)]?_0x2eb167[_0x5a8f45(0x203)]*_0x2eb167[_0x5a8f45(0x29e)]:_0x2eb167[_0x5a8f45(0x203)],'filled':_0x467966[_0x5a8f45(0x258)]?_0x2eb167[_0x5a8f45(0x25c)]*_0x2eb167[_0x5a8f45(0x29e)]:_0x2eb167[_0x5a8f45(0x25c)],'price':_0x2eb167['price']});const _0x518033=_0x3f3aa3==_0x5a8f45(0x241)?config[_0x5a8f45(0x2b5)]?String[_0x5a8f45(0x234)]('0x'+config['emojisell'])+'\x20':'':config[_0x5a8f45(0x2b8)]?String[_0x5a8f45(0x234)]('0x'+config['emojibuy'])+'\x20':'',_0x28e28a=_0x2f968f==_0x5a8f45(0x209)?_0x5a8f45(0x218):config[_0x5a8f45(0x265)]==_0x5a8f45(0x2c2)?_0x5a8f45(0x2c6):_0x5a8f45(0x21b);if(_0x2f968f=='market')logHistory(_0x5a8f45(0x2f8),''+_0x518033+_0x28e28a+'\x20order:\x20'+_0x33328c+'\x20'+_0x3f3aa3+'\x20#'+formatResult(_0x2eb167['filled'],0x8)+'\x20@'+formatResult(_0x2eb167[_0x5a8f45(0x29e)],0x8));else logHistory(_0x5a8f45(0x2f8),''+_0x518033+_0x28e28a+_0x5a8f45(0x25e)+_0x33328c+'\x20'+_0x3f3aa3+'\x20#'+formatResult(_0x2eb167[_0x5a8f45(0x203)],0x8)+'\x20@'+formatResult(_0x2eb167['price'],0x8));_0x2eb167['coin']=_0x467966['coin'],await updateCoinResults(_0x2eb167);if(config[_0x5a8f45(0x278)]!=0x0){let _0x215e16=null;if(cooldownTracker['length']==config[_0x5a8f45(0x278)]-0x1)_0x215e16=cooldownTracker['shift']();const _0x3420cd=getTimeStamp();cooldownTracker[_0x5a8f45(0x28a)](_0x3420cd);if(_0x215e16){const _0x1c7409=fns[_0x5a8f45(0x26b)](new Date(_0x3420cd),new Date(_0x215e16));_0x1c7409<cooldownInterval&&(logHistory('error',_0x5a8f45(0x236)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5a8f45(0x29a)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x2c6adf){if(_0x2c6adf[_0x5a8f45(0x29c)]()[_0x5a8f45(0x2c5)](_0x5a8f45(0x293)))logHistory(_0x5a8f45(0x235),_0x5a8f45(0x227)+_0x33328c);else{if(_0x2c6adf[_0x5a8f45(0x29c)]()[_0x5a8f45(0x2c5)](_0x5a8f45(0x212)))logHistory(_0x5a8f45(0x235),_0x5a8f45(0x2ef)+_0x33328c);else await handleError(_0x2c6adf,_0x5a8f45(0x210));}}}if(lastOrders[_0x5a8f45(0x2bd)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5a8f45(0x275)]&&(config[_0x5a8f45(0x265)]=='market'?logHistory(_0x5a8f45(0x235),_0x5a8f45(0x292)):logHistory('error',_0x5a8f45(0x28f)));else coolingDown&&(!config[_0x5a8f45(0x275)]&&logHistory(_0x5a8f45(0x235),_0x5a8f45(0x266)));}}function logHistory(_0xa01f7e,_0x2c18f5,_0x173c91=''){const _0x3d4923=_0xb6b6c8;let _0x48a7e9={'time':getTimeStamp(),'type':_0xa01f7e,'event':_0x2c18f5,'botname':config[_0x3d4923(0x222)],'showname':config[_0x3d4923(0x274)]};dbLogs[_0x3d4923(0x239)](_0x3d4923(0x1f8))['push'](_0x48a7e9)[_0x3d4923(0x2d7)]();if(_0x173c91=='')_0x173c91=_0x2c18f5;proxyEmit('event',{'log':_0x48a7e9,'summary':_0x173c91}),process['send']({'telegram':_0x48a7e9},_0x150f14=>{}),logging(''+_0x48a7e9[_0x3d4923(0x2e9)]);}function emitHistory(_0x215a92={}){const _0x4fedb1=_0xb6b6c8;Object[_0x4fedb1(0x2fe)](_0x215a92)[_0x4fedb1(0x2bd)]==0x0&&(_0x215a92={'type':[_0x4fedb1(0x2f8),'event'],'event':'','page':0x1});if(_0x215a92[_0x4fedb1(0x21c)]['includes'](_0x4fedb1(0x2e9)))_0x215a92['type'][_0x4fedb1(0x2c4)](_0x215a92[_0x4fedb1(0x21c)][_0x4fedb1(0x20b)](_0x4fedb1(0x2e9)),0x1,_0x4fedb1(0x235),_0x4fedb1(0x1fe));if(dbLogs['has']('logs')['value']()){let _0x3db7fc=dbLogs[_0x4fedb1(0x239)]('logs')[_0x4fedb1(0x2b6)](_0x345e94=>{const _0x40c595=_0x4fedb1;if(_0x215a92[_0x40c595(0x21c)][_0x40c595(0x2bd)]==0x0)return![];else return _0x215a92[_0x40c595(0x21c)][_0x40c595(0x2c5)](_0x345e94['type']);})[_0x4fedb1(0x2b6)](_0x516b43=>{const _0x174947=_0x4fedb1;if(_0x215a92[_0x174947(0x2e9)]=='')return!![];else return _0x516b43[_0x174947(0x2e9)][_0x174947(0x2e7)]()[_0x174947(0x2c5)](_0x215a92[_0x174947(0x2e9)][_0x174947(0x2e7)]());})[_0x4fedb1(0x21e)](_0x4fedb1(0x2fa)),_0x5caaff=_0x3db7fc['value']()[_0x4fedb1(0x2bd)];_0x3db7fc=_0x3db7fc['reverse']()[_0x4fedb1(0x250)]((_0x215a92[_0x4fedb1(0x2d4)]-0x1)*logPageSize,_0x215a92[_0x4fedb1(0x2d4)]*logPageSize-0x1)[_0x4fedb1(0x258)]()['value'](),proxyEmit('event-history',{'logs':_0x3db7fc,'total':_0x5caaff});}else proxyEmit(_0x4fedb1(0x211),{'logs':[],'total':0x0});}async function pauseBot(_0x1132f5){const _0x4bfdea=_0xb6b6c8,_0x156220=new Date()[_0x4bfdea(0x29f)]();if(!lastBotPause)lastBotPause=new Date()[_0x4bfdea(0x29f)](),consecutivePauses=0x1;else{if(_0x156220-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x4bfdea(0x2d2)]({'stop':'restart'},_0x122b52=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x4bfdea(0x29f)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x4bfdea(0x235),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x1132f5),botPaused=![],reset();}}async function handleError(_0xd5b26e,_0x41410f,_0x470047=''){const _0x3e6e30=_0xb6b6c8;if(_0xd5b26e[_0x3e6e30(0x29c)]()['includes'](_0x3e6e30(0x248)))logHistory(_0x3e6e30(0x235),_0x41410f+_0x3e6e30(0x2d9)),await pauseBot(pauseBotInterval);else{if(_0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)](_0x3e6e30(0x2f5)))logHistory('error',_0x41410f+_0x3e6e30(0x1f9)),await pauseBot(pauseBotInterval);else{if(_0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)](_0x3e6e30(0x2e0)))logHistory(_0x3e6e30(0x235),_0x41410f+_0x3e6e30(0x2a1)),await pauseBot(pauseBotInterval);else{if(_0xd5b26e[_0x3e6e30(0x29c)]()['includes']('API-key\x20format\x20invalid'))logHistory('error',_0x41410f+_0x3e6e30(0x2c8)),logHistory(_0x3e6e30(0x235),_0x3e6e30(0x28d)),process[_0x3e6e30(0x2d2)]({'stop':_0x3e6e30(0x1fd)},_0x43aff7=>{});else{if(_0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)](_0x3e6e30(0x2f0)))logHistory(_0x3e6e30(0x235),_0x41410f+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3e6e30(0x2d2)]({'stop':'kill'},_0x700d91=>{});else{if(_0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)](_0x3e6e30(0x2e4)))logHistory(_0x3e6e30(0x235),_0x41410f+_0x3e6e30(0x205)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3e6e30(0x2d2)]({'stop':_0x3e6e30(0x1fd)},_0x44b719=>{});else{if(_0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3e6e30(0x235),_0x41410f+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x3e6e30(0x235),_0x3e6e30(0x28d)),process[_0x3e6e30(0x2d2)]({'stop':'kill'},_0x28ecc6=>{});else{if(_0xd5b26e['toString']()[_0x3e6e30(0x2c5)](_0x3e6e30(0x2a9)))logHistory(_0x3e6e30(0x235),_0x41410f+_0x3e6e30(0x287)),await pauseBot(pauseBotInterval),process[_0x3e6e30(0x2d2)]({'stop':_0x3e6e30(0x2cd)},_0x408812=>{});else _0xd5b26e[_0x3e6e30(0x29c)]()[_0x3e6e30(0x2c5)](_0x3e6e30(0x24a))?logHistory(_0x3e6e30(0x235),_0x41410f+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x3e6e30(0x235),_0x41410f+_0x3e6e30(0x223)),logging(_0x41410f+'\x20|\x20Error\x20details:\x20',_0xd5b26e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x25732d,_0x29c4e3){const _0x23326a=_0xb6b6c8;return parseFloat(_0x25732d[_0x23326a(0x246)](_0x29c4e3));}function logging(_0x1c67bd,_0x1136fb=''){const _0x112272=_0xb6b6c8;if(config[_0x112272(0x274)])console[_0x112272(0x1f4)](getTimeStamp()+':\x20'+config[_0x112272(0x222)]+_0x112272(0x20a)+_0x1c67bd,_0x1136fb);else console[_0x112272(0x1f4)](getTimeStamp()+_0x112272(0x2a5)+botID+_0x112272(0x20a)+_0x1c67bd,_0x1136fb);}function getServerTime(){const _0x350245=_0xb6b6c8,_0x584959=new Date();return _0x584959[_0x350245(0x294)]()+'/'+(_0x584959[_0x350245(0x24e)]()+0x1)['toString']()[_0x350245(0x25d)](0x2,'0')+'/'+_0x584959[_0x350245(0x267)]()[_0x350245(0x29c)]()[_0x350245(0x25d)](0x2,'0')+'\x20'+_0x584959[_0x350245(0x273)]()[_0x350245(0x29c)]()['padStart'](0x2,'0')+':'+_0x584959[_0x350245(0x2cf)]()[_0x350245(0x29c)]()[_0x350245(0x25d)](0x2,'0')+':'+_0x584959[_0x350245(0x20e)]()[_0x350245(0x29c)]()[_0x350245(0x25d)](0x2,'0');}function getTimeStamp(){const _0x8eb506=_0xb6b6c8,_0x459173=shiftedTime();return _0x459173[_0x8eb506(0x294)]()+'/'+(_0x459173[_0x8eb506(0x24e)]()+0x1)[_0x8eb506(0x29c)]()['padStart'](0x2,'0')+'/'+_0x459173[_0x8eb506(0x267)]()[_0x8eb506(0x29c)]()[_0x8eb506(0x25d)](0x2,'0')+'\x20'+_0x459173[_0x8eb506(0x273)]()['toString']()[_0x8eb506(0x25d)](0x2,'0')+':'+_0x459173[_0x8eb506(0x2cf)]()['toString']()[_0x8eb506(0x25d)](0x2,'0')+':'+_0x459173[_0x8eb506(0x20e)]()[_0x8eb506(0x29c)]()[_0x8eb506(0x25d)](0x2,'0');}function getDate(){const _0x49fc8a=_0xb6b6c8,_0x47f18a=shiftedTime();return _0x47f18a[_0x49fc8a(0x294)]()+'/'+(_0x47f18a[_0x49fc8a(0x24e)]()+0x1)[_0x49fc8a(0x29c)]()[_0x49fc8a(0x25d)](0x2,'0')+'/'+_0x47f18a[_0x49fc8a(0x267)]()[_0x49fc8a(0x29c)]()[_0x49fc8a(0x25d)](0x2,'0');}function getHour(){const _0x37683e=_0xb6b6c8,_0x44a092=shiftedTime();return _0x44a092[_0x37683e(0x273)]()['toString']()[_0x37683e(0x25d)](0x2,'0');}function sleep(_0x2c33eb){return new Promise(_0x8cf2b0=>setTimeout(_0x8cf2b0,_0x2c33eb));}function shiftedTime(){const _0x2c6c57=_0xb6b6c8,_0x4fb454=new Date();let _0x106a71=_0x4fb454;if(config&&config[_0x2c6c57(0x215)]!==0x0)_0x106a71=fns[_0x2c6c57(0x2c9)](_0x4fb454,{'hours':config[_0x2c6c57(0x215)]});return _0x106a71;}