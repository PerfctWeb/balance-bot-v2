const _0x4af43a=_0x41fe;(function(_0x597cde,_0x389146){const _0x535fcb=_0x41fe,_0x4eeefe=_0x597cde();while(!![]){try{const _0x41c45f=parseInt(_0x535fcb(0x220))/0x1*(parseInt(_0x535fcb(0x31b))/0x2)+-parseInt(_0x535fcb(0x219))/0x3*(parseInt(_0x535fcb(0x384))/0x4)+parseInt(_0x535fcb(0x2b8))/0x5*(-parseInt(_0x535fcb(0x1ef))/0x6)+parseInt(_0x535fcb(0x204))/0x7+-parseInt(_0x535fcb(0x2a1))/0x8+-parseInt(_0x535fcb(0x2e8))/0x9+-parseInt(_0x535fcb(0x3ad))/0xa*(-parseInt(_0x535fcb(0x28d))/0xb);if(_0x41c45f===_0x389146)break;else _0x4eeefe['push'](_0x4eeefe['shift']());}catch(_0x380157){_0x4eeefe['push'](_0x4eeefe['shift']());}}}(_0xa712,0xa85aa));const _0x39ccdc=function(){let _0x5e242c=!![];return function(_0x74514c,_0x1e7c59){const _0x4e8c6f=_0x5e242c?function(){const _0x51feb0=_0x41fe;if(_0x1e7c59){const _0x3b1265=_0x1e7c59[_0x51feb0(0x2b0)](_0x74514c,arguments);return _0x1e7c59=null,_0x3b1265;}}:function(){};return _0x5e242c=![],_0x4e8c6f;};}(),_0xb88d30=_0x39ccdc(this,function(){const _0x514081=_0x41fe;return _0xb88d30[_0x514081(0x383)]()[_0x514081(0x2cc)](_0x514081(0x1e6))[_0x514081(0x383)]()[_0x514081(0x2ac)](_0xb88d30)['search'](_0x514081(0x1e6));});_0xb88d30();'use strict';const ccxt=require(_0x4af43a(0x203)),low=require(_0x4af43a(0x2f5)),FileSync=require(_0x4af43a(0x2bb)),fs=require('fs'),fns=require(_0x4af43a(0x32f)),Crypt=require(_0x4af43a(0x227))[_0x4af43a(0x353)],util=require(_0x4af43a(0x1ff)),argv=require(_0x4af43a(0x254))(process[_0x4af43a(0x24e)][_0x4af43a(0x205)](0x2))[_0x4af43a(0x24e)],path=require(_0x4af43a(0x32a)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x4af43a(0x207),_0x4af43a(0x2d0),'TUSD',_0x4af43a(0x262),'USDC',_0x4af43a(0x2fb)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4af43a(0x2a8)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x4af43a(0x289)+pauseBotInterval/0xea60+_0x4af43a(0x377),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x4af43a(0x36e))[_0x4af43a(0x212)],botID=process[_0x4af43a(0x24e)][0x2]||_0x4af43a(0x202),pattern=/^[0-9]{3}$/;!pattern[_0x4af43a(0x3a4)](botID)&&(console[_0x4af43a(0x2e7)](_0x4af43a(0x318)+botID+_0x4af43a(0x241)),killBot());const userID=process[_0x4af43a(0x24e)][0x3]||'',configpath=userID?_0x4af43a(0x330)+userID+'/':_0x4af43a(0x330),logspath=userID?'./logs/'+userID+'/':_0x4af43a(0x382),loggerfile=fs[_0x4af43a(0x2bc)](logspath+_0x4af43a(0x34e),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x4af43a(0x1f5)](configpath);!fs[_0x4af43a(0x269)](logspath)&&fs[_0x4af43a(0x1f5)](logspath);const configfile=configpath+_0x4af43a(0x2c0)+botID+'-config.json',logfile=configpath+_0x4af43a(0x2c0)+botID+_0x4af43a(0x270),performancefile=configpath+_0x4af43a(0x2c0)+botID+_0x4af43a(0x2c9),coinresultsfile=configpath+_0x4af43a(0x2c0)+botID+'-results.json',settingsfile=configpath+_0x4af43a(0x294),securefile=configpath+_0x4af43a(0x3ac),configbackuppath=configpath+_0x4af43a(0x2a5),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4af43a(0x2d3)]({'data':[],'version':serverversion})[_0x4af43a(0x312)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4af43a(0x2d3)]({'bot':[],'version':serverversion})[_0x4af43a(0x312)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4af43a(0x2d3)]({'coins':[],'version':serverversion})[_0x4af43a(0x312)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4af43a(0x296),'rsaStandard':_0x4af43a(0x30d)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x47c0f5=>{const _0xb260d=_0x4af43a;console[_0xb260d(0x2e7)](_0x47c0f5);},'simple':_0x29a93e=>{const _0x116344=_0x4af43a;console['log'](_0x29a93e),loggerfile[_0x116344(0x312)](util['format'](_0x29a93e)+'\x0a');},'full':async(_0x206b6d,_0x16beb4='')=>{const _0x113e61=_0x4af43a;let _0x4bf0ea;if(config['showname'])_0x4bf0ea=getTimeStamp()+':\x20'+config['botname']+_0x113e61(0x349)+_0x206b6d;else _0x4bf0ea=getTimeStamp()+_0x113e61(0x22e)+botID+_0x113e61(0x349)+_0x206b6d;console[_0x113e61(0x2e7)](_0x4bf0ea),loggerfile['write'](util['format'](_0x4bf0ea)+'\x0a'),_0x16beb4&&(console[_0x113e61(0x2e7)](_0x16beb4),loggerfile[_0x113e61(0x312)](util[_0x113e61(0x209)](_0x16beb4)+'\x0a'));},'debug':async(_0x31a7ac,_0x407617='')=>{const _0x10681c=_0x4af43a;let _0x17064c;if(config[_0x10681c(0x282)])_0x17064c=getTimeStamp()+':\x20'+config[_0x10681c(0x373)]+_0x10681c(0x36a)+_0x31a7ac;else _0x17064c=getTimeStamp()+_0x10681c(0x22e)+botID+'\x20>\x20[DEBUG]\x20'+_0x31a7ac;if(debugging)console[_0x10681c(0x2e7)](_0x17064c);loggerfile[_0x10681c(0x312)](util['format'](_0x17064c)+'\x0a');if(_0x407617){if(debugging)console[_0x10681c(0x2e7)](_0x407617);loggerfile[_0x10681c(0x312)](util['format'](_0x407617)+'\x0a');}}};process['on'](_0x4af43a(0x240),function(_0x32a759){const _0xa077c5=_0x4af43a;handleError(_0x32a759,_0xa077c5(0x240));});settings['timeshift']!=config[_0x4af43a(0x30a)]&&updateTimeshift(settings[_0x4af43a(0x30a)]);settings[_0x4af43a(0x381)]!=config[_0x4af43a(0x381)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x4af43a(0x25f)]&&!config[_0x4af43a(0x25f)]||!settings[_0x4af43a(0x25f)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x4af43a(0x25f)]);process['send']({'started':_0x4af43a(0x243)},_0x384f51=>{}),initializeProcessListeners();function proxyEmit(_0x9bdc7e,_0x5025f7=null){const _0x13dcb7=_0x4af43a;process[_0x13dcb7(0x293)]({'function':_0x9bdc7e,'args':_0x5025f7},_0x5d08b1=>{});}function initializeProcessListeners(){process['on']('message',_0x18b7c8=>{const _0x28ab97=_0x41fe;switch(Object['keys'](_0x18b7c8)[0x0]){case _0x28ab97(0x30a):_0x18b7c8[_0x28ab97(0x30a)]!=undefined&&(settings[_0x28ab97(0x30a)]=_0x18b7c8[_0x28ab97(0x30a)],updateTimeshift(settings[_0x28ab97(0x30a)]));break;case'onepagemode':_0x18b7c8[_0x28ab97(0x381)]!=undefined&&(settings[_0x28ab97(0x381)]=_0x18b7c8[_0x28ab97(0x381)],updateOnepagemode(settings['onepagemode']));break;case'marketcapApi':_0x18b7c8[_0x28ab97(0x25f)]!=undefined&&(settings['marketcapApi']=_0x18b7c8['marketcapApi'],updateMarketcapApi(settings[_0x28ab97(0x25f)]));break;case _0x28ab97(0x256):_0x18b7c8[_0x28ab97(0x256)]!=undefined&&(bots=JSON[_0x28ab97(0x37a)](_0x18b7c8[_0x28ab97(0x256)]),proxyEmit(_0x28ab97(0x256),bots));break;case _0x28ab97(0x34d):switch(_0x18b7c8[_0x28ab97(0x34d)]){case _0x28ab97(0x375):initclient();break;case _0x28ab97(0x2af):toggleBotMode();break;case _0x28ab97(0x211):silentRestart();break;case _0x28ab97(0x394):emitHistory(_0x18b7c8['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x18b7c8[_0x28ab97(0x359)]);break;case _0x28ab97(0x26c):getPortfolio(_0x18b7c8[_0x28ab97(0x359)]);break;case _0x28ab97(0x251):storeConfiguration(_0x18b7c8[_0x28ab97(0x359)]);break;case _0x28ab97(0x1f7):storeHeadless(_0x18b7c8['args']);break;case _0x28ab97(0x367):storeFiat(_0x18b7c8[_0x28ab97(0x359)]);break;case _0x28ab97(0x22b):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x28ab97(0x235):placeOrder(_0x18b7c8[_0x28ab97(0x359)]);break;case _0x28ab97(0x2d7):cancelLoading();break;case _0x28ab97(0x2a3):showConfig();break;case _0x28ab97(0x2be):sendMetricsTelegram();break;case _0x28ab97(0x218):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x3b95a7=![]){const _0x1acf49=_0x4af43a;logger[_0x1acf49(0x35d)]('Reset\x20|\x20'+(_0x3b95a7?_0x1acf49(0x201):_0x1acf49(0x280))+_0x1acf49(0x3ab)+config[_0x1acf49(0x305)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3b95a7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1acf49(0x32d)]!=''&&config[_0x1acf49(0x32d)]!=_0x1acf49(0x2de)){loadingProgress=0x0;if(_0x3b95a7){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x44a8b4){handleErrorNoStop(_0x44a8b4,_0x1acf49(0x27f));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x2628be=await getCoins();[currentCoins,currentCoinsAll]=_0x2628be,blockTransactionDetection=![],getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1acf49(0x35d)](_0x1acf49(0x37d)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x1acf49(0x313)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0x11b899){const _0x4f82c3=_0x4af43a;let _0x52fa3d=![];if(_0x11b899)_0x52fa3d=!![];let _0x1b806f;_0x52fa3d?_0x1b806f=_0x11b899[_0x4f82c3(0x357)](_0x5d3f09=>_0x5d3f09[_0x4f82c3(0x2b7)]):_0x1b806f=currentCoinsAll[_0x4f82c3(0x357)](_0x29f65a=>_0x29f65a['coin']);if(!config[_0x4f82c3(0x25f)]||!_0x52fa3d&&!config[_0x4f82c3(0x361)]||_0x1b806f[_0x4f82c3(0x313)]==0x0)return;let _0x31d005=null;try{_0x31d005=await axios[_0x4f82c3(0x283)](_0x4f82c3(0x38a),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4f82c3(0x25f)]},'params':{'symbol':_0x1b806f[_0x4f82c3(0x383)]()}});}catch(_0x1c8eb1){_0x31d005=null,_0x1c8eb1[_0x4f82c3(0x383)]()[_0x4f82c3(0x374)](_0x4f82c3(0x379))?(config[_0x4f82c3(0x25f)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x4f82c3(0x233),_0x4f82c3(0x2fd))):(logHistory(_0x4f82c3(0x233),_0x4f82c3(0x31e)+schedulerInterval/(0x3c*0x3e8)+_0x4f82c3(0x377)),logger[_0x4f82c3(0x35d)](_0x4f82c3(0x2f8),_0x1c8eb1['toString']()+'\x20-\x20'+_0x1c8eb1[_0x4f82c3(0x2a4)]));}if(_0x31d005){let _0x596ee0=0x0;const _0x58af87=_0x31d005[_0x4f82c3(0x315)];_0x1b806f[_0x4f82c3(0x249)](_0x5f1c3b=>{const _0x53d969=_0x4f82c3;if(_0x58af87[_0x53d969(0x315)][_0x5f1c3b][0x0])_0x596ee0+=_0x58af87[_0x53d969(0x315)][_0x5f1c3b][0x0]['quote'][_0x53d969(0x207)][_0x53d969(0x2ae)];}),_0x1b806f[_0x4f82c3(0x249)](_0x51a13b=>{const _0x38ebf7=_0x4f82c3,_0x1d4931=_0x58af87[_0x38ebf7(0x315)][_0x51a13b][0x0]?_0x58af87[_0x38ebf7(0x315)][_0x51a13b][0x0][_0x38ebf7(0x380)]['USD']['market_cap']:0x0;if(_0x52fa3d){const _0x581b4a=_0x11b899[_0x38ebf7(0x33a)](_0x81f22b=>_0x81f22b['coin']==_0x51a13b);_0x581b4a&&(_0x581b4a[_0x38ebf7(0x31a)]=_0x1d4931);}else{const _0x273d47=currentCoins[_0x38ebf7(0x33a)](_0x38c77d=>_0x38c77d[_0x38ebf7(0x2b7)]==_0x51a13b);_0x273d47&&(_0x273d47[_0x38ebf7(0x31a)]=_0x1d4931);const _0x1e6697=currentCoinsAll['find'](_0x34b301=>_0x34b301[_0x38ebf7(0x2b7)]==_0x51a13b);_0x1e6697&&(_0x1e6697[_0x38ebf7(0x31a)]=_0x1d4931);}}),!_0x52fa3d&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2bce34=_0x4af43a,_0x23b56a=0x2;let _0x502a2f=0x0,_0x54583e=0x0,_0xa28fd9=0x0,_0x3262c8=0x0,_0x2aa470=0x0;config[_0x2bce34(0x2f6)][_0x2bce34(0x249)](_0x51a5ad=>{const _0x3f7fcd=_0x2bce34;if(!_0x51a5ad['excluded']){_0xa28fd9++,_0x502a2f+=_0x51a5ad['slider'];if(_0x51a5ad[_0x3f7fcd(0x264)]===-0x1){_0x502a2f++;const _0x2f8a23=currentCoinsAll[_0x3f7fcd(0x33a)](_0x37f295=>_0x37f295[_0x3f7fcd(0x2b7)]==_0x51a5ad[_0x3f7fcd(0x2b7)]);_0x2f8a23&&(_0x3262c8+=_0x2f8a23[_0x3f7fcd(0x31a)],_0x2aa470+=Math[_0x3f7fcd(0x23d)](_0x2f8a23[_0x3f7fcd(0x31a)]));}if(_0x51a5ad['slider']!==-0x1)_0x54583e++;}});let _0x40fc00;const _0x126d79=0x64-_0x502a2f,_0x35d636=_0xa28fd9-_0x54583e;_0x40fc00=_0x35d636===0x0?_0x502a2f:Math[_0x2bce34(0x337)](0x64,_0x502a2f),config[_0x2bce34(0x2f6)]['forEach'](_0x47c758=>{const _0x412e0a=_0x2bce34,_0x1d973b=currentCoinsAll['find'](_0x1a7e05=>_0x1a7e05[_0x412e0a(0x2b7)]==_0x47c758['coin']);_0x1d973b&&(_0x47c758[_0x412e0a(0x31a)]=_0x1d973b['marketcap']);if(!_0x47c758[_0x412e0a(0x27d)]){if(_0x40fc00<=0x64){if(_0x47c758[_0x412e0a(0x264)]===-0x1){if(_0x3262c8!==0x0&&config[_0x412e0a(0x361)]){if(_0x1d973b){if(config[_0x412e0a(0x361)]==_0x412e0a(0x31a))_0x47c758[_0x412e0a(0x287)]=(_0x126d79/(_0x3262c8/_0x1d973b[_0x412e0a(0x31a)]))[_0x412e0a(0x257)](_0x23b56a);else config[_0x412e0a(0x361)]==_0x412e0a(0x2df)&&(_0x47c758[_0x412e0a(0x287)]=(_0x126d79/(_0x2aa470/Math['sqrt'](_0x1d973b['marketcap'])))[_0x412e0a(0x257)](_0x23b56a));}}}}}}),updateConfig();}function updateConfig(){const _0x4cebac=_0x4af43a;let _0x3561ba=dbConfig[_0x4cebac(0x283)]('bot')[_0x4cebac(0x33a)]({'botID':botID})[_0x4cebac(0x281)]();_0x3561ba&&dbConfig[_0x4cebac(0x283)]('bot')[_0x4cebac(0x33a)]({'botID':botID})[_0x4cebac(0x1fd)](config)['write']();}async function startScheduler(){const _0x51a756=_0x4af43a,_0x4108bb=shiftedTime()[_0x51a756(0x38e)](),_0xfd8173=process[_0x51a756(0x210)]()['heapUsed']/0x400/0x400;logger[_0x51a756(0x35d)](_0x51a756(0x1f8)+process[_0x51a756(0x239)]+'\x20uses\x20'+_0xfd8173+'\x20MB'),getMarketCap(),await sleep(schedulerInterval),startScheduler();}async function silentRestart(){const _0xba0d6=_0x4af43a;while(lockOrders!=ORDERS[_0xba0d6(0x2a8)]||coolingDown){await sleep(0xa*0x3e8);}process[_0xba0d6(0x206)](0x4d);}async function restartBot(_0x202413=![]){const _0x501626=_0x4af43a;logger['debug'](_0x501626(0x226));if(!_0x202413)while(lockOrders!=ORDERS[_0x501626(0x2a8)]||coolingDown){await sleep(0xa*0x3e8);}process['send']({'stop':_0x501626(0x32c)},_0x4a66e1=>{});}async function stopExchange(){const _0x105150=_0x4af43a;if(!exchange)return;exchangeStopped=!![];try{await exchange[_0x105150(0x2c5)]();}catch(_0x1df443){await handleError(_0x1df443,_0x105150(0x34b));}}async function reloadExchange(){const _0x496844=_0x4af43a;logger[_0x496844(0x35d)](_0x496844(0x2f4));while(lockOrders!=ORDERS[_0x496844(0x2a8)]||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange(),reset(!![]);}async function initExchange(_0x261c34=config['exchange'],_0x4bd660=config[_0x4af43a(0x32d)],_0x11a830=config[_0x4af43a(0x273)],_0x2d1171=config[_0x4af43a(0x2ef)]){const _0x386c02=_0x4af43a;!supportedExchanges()[_0x386c02(0x374)](_0x261c34)&&(logHistory('error',_0x386c02(0x372)+_0x261c34+'\x20exchange'),killBot());const _0x34197b=ccxt[_0x386c02(0x25c)][_0x261c34[_0x386c02(0x27c)]()];exchange=new _0x34197b({'apiKey':_0x4bd660,'secret':_0x11a830,'options':{'defaultType':_0x386c02(0x319)}});if(_0x2d1171)exchange['password']=_0x2d1171;}function setStableCoins(){const _0x579925=_0x4af43a;let _0x34643a=config[_0x579925(0x1f1)]=='ETH'?_0x579925(0x333):config['basecoin']=='PAXG'?'PAXG':'BTC',_0x20fb35=!allSymbols['includes'](_0x34643a+_0x579925(0x28b))?_0x579925(0x262):'USD',_0x300177=!allSymbols[_0x579925(0x374)](_0x34643a+_0x579925(0x309))?_0x20fb35:_0x579925(0x35b);stablecoins={'eur':{'coin':''+_0x34643a+_0x300177,'symbol':_0x34643a+'/'+_0x300177},'usd':{'coin':''+_0x34643a+_0x20fb35,'symbol':_0x34643a+'/'+_0x20fb35}};}async function initwsCcxt(){const _0x2b8b83=_0x4af43a;initCycle++;const _0x348443=initCycle;let _0x1689f3=[];config['portfolio'][_0x2b8b83(0x249)](_0xda542e=>{const _0x24e392=_0x2b8b83;if(!_0xda542e['excluded']&&_0xda542e[_0x24e392(0x2b7)]!=config['basecoin'])_0x1689f3[_0x24e392(0x21b)](_0xda542e[_0x24e392(0x29c)]);});if(!_0x1689f3[_0x2b8b83(0x374)](stablecoins['eur'][_0x2b8b83(0x29c)]))_0x1689f3[_0x2b8b83(0x21b)](stablecoins['eur'][_0x2b8b83(0x29c)]);if(!_0x1689f3[_0x2b8b83(0x374)](stablecoins[_0x2b8b83(0x2a6)][_0x2b8b83(0x29c)]))_0x1689f3[_0x2b8b83(0x21b)](stablecoins[_0x2b8b83(0x2a6)]['symbol']);if(config[_0x2b8b83(0x305)][_0x2b8b83(0x26a)](_0x2b8b83(0x274))&&config[_0x2b8b83(0x1f1)]!='PAXG'){if(!_0x1689f3[_0x2b8b83(0x374)]('BNB/'+config[_0x2b8b83(0x1f1)]))_0x1689f3['push'](_0x2b8b83(0x2c3)+config[_0x2b8b83(0x1f1)]);}loadCoins(_0x1689f3),_0x1689f3=validateSymbols(_0x1689f3);const _0x7636e=async _0x49337a=>{let _0x2a6155;try{const _0x2b0c6d=await getTickers(_0x49337a);Object['entries'](_0x2b0c6d)['forEach'](_0x522910=>{const _0x48be31=_0x41fe;_0x2a6155=_0x522910[0x1][_0x48be31(0x29c)],gTicker[noslash(_0x2a6155)]=_0x522910[0x1]['last'],gChange[_0x2a6155]=_0x522910[0x1][_0x48be31(0x3ae)];});}catch(_0x18ee29){await handleError(_0x18ee29,'initTickers()',_0x2a6155);}},_0x319aee=async _0xa2d5cb=>{const _0x977c86=_0x2b8b83;while(initCycle==_0x348443){if(!botPaused)try{const _0x406559=await exchange[_0x977c86(0x1fe)](_0xa2d5cb);gTicker[noslash(_0x406559[0x0][_0x977c86(0x29c)])]=_0x406559[0x0][_0x977c86(0x371)];}catch(_0x11edf8){if(!exchangeStopped)await handleError(_0x11edf8,_0x977c86(0x37b),_0xa2d5cb);}else await sleep(0x64);}},_0x4e2b26=async _0x56b254=>{const _0x247b0d=_0x2b8b83;while(initCycle==_0x348443){if(!botPaused)try{const _0x2d5756=await exchange[_0x247b0d(0x22d)](_0x56b254),_0x4366d0=_0x2d5756[_0x247b0d(0x255)]();gTicker[noslash(_0x4366d0['symbol'])]=_0x4366d0[_0x247b0d(0x371)];}catch(_0x2630ee){if(!exchangeStopped)await handleError(_0x2630ee,'watchTradesForSymbols()',_0x56b254[_0x247b0d(0x383)]());}else await sleep(0x64);}},_0x5e5602=async _0x1fde7f=>{const _0x314f49=_0x2b8b83;while(initCycle==_0x348443){if(!botPaused){let _0x2df635;try{await sleep(0x3c*0x3e8);const _0x25fb30=await getTickers(_0x1fde7f);Object['entries'](_0x25fb30)[_0x314f49(0x249)](_0x1f9504=>{const _0x318541=_0x314f49;_0x2df635=_0x1f9504[0x1][_0x318541(0x29c)],gChange[_0x2df635]=_0x1f9504[0x1][_0x318541(0x3ae)];});}catch(_0x539f35){if(!exchangeStopped)await handleError(_0x539f35,_0x314f49(0x2b4),_0x2df635);}}else await sleep(0x64);}},_0x185ffc=async _0x38534e=>{const _0x343878=_0x2b8b83;while(initCycle==_0x348443){if(!botPaused)try{const _0x198106=await exchange[_0x343878(0x248)](_0x38534e);initCycle==_0x348443&&_0x198106[_0x343878(0x249)](_0x5e32c2=>{updateNumberCoinsCcxt(_0x5e32c2);});}catch(_0x265a69){if(!exchangeStopped)await handleError(_0x265a69,_0x343878(0x232));}else await sleep(0x64);}};_0x7636e(_0x1689f3),_0x5e5602(_0x1689f3),exchange[_0x2b8b83(0x342)][_0x2b8b83(0x22d)]?_0x4e2b26(_0x1689f3):_0x1689f3[_0x2b8b83(0x249)](_0x4b5ffa=>{_0x319aee(_0x4b5ffa);}),_0x1689f3[_0x2b8b83(0x249)](_0x2da3d5=>{_0x185ffc(_0x2da3d5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x53a05d){const _0x4217c6=_0x4af43a;let _0x124c11={};try{if(config['exchange']!=_0x4217c6(0x29e))_0x124c11=await exchange[_0x4217c6(0x26b)](_0x53a05d);else for(const _0x419830 of _0x53a05d){const _0x25f8de=await exchange[_0x4217c6(0x2e4)](_0x419830);_0x124c11[_0x419830]=_0x25f8de;}return _0x124c11;}catch(_0x383ad2){throw _0x383ad2;}}async function detectLiquidityChange(_0x38553f=0x0){const _0x5968d8=_0x4af43a;transactionDetectionOngoing=!![];try{const _0x244a71=await getCoins(_0x38553f),[_0x50c666,_0x4e1561]=_0x244a71;let _0x7bc041=[];currentCoins[_0x5968d8(0x249)](_0x1424d8=>{const _0x3d0a9c=_0x5968d8,_0x329a7d=_0x50c666['find'](_0xe5cf2f=>_0xe5cf2f[_0x3d0a9c(0x2b7)]==_0x1424d8['coin']);if(_0x329a7d){if(_0x1424d8[_0x3d0a9c(0x217)]!=_0x329a7d['number']){let _0x6601d6;if(_0x1424d8[_0x3d0a9c(0x2b7)]!=config[_0x3d0a9c(0x1f1)]){const _0x5e9d21=gTicker[noslash(_0x1424d8[_0x3d0a9c(0x29c)])];_0x6601d6=_0x1424d8[_0x3d0a9c(0x28e)]?0x1/_0x5e9d21:_0x5e9d21;}else _0x6601d6=0x1;_0x7bc041[_0x3d0a9c(0x21b)]({'coin':_0x1424d8[_0x3d0a9c(0x2b7)],'symbol':_0x1424d8[_0x3d0a9c(0x29c)],'price':_0x6601d6,'number':Number(formatResult(_0x329a7d[_0x3d0a9c(0x217)]-_0x1424d8[_0x3d0a9c(0x217)],0x8)),'basecoinvalue':_0x6601d6*(_0x329a7d[_0x3d0a9c(0x217)]-_0x1424d8[_0x3d0a9c(0x217)])});}}});if(_0x7bc041[_0x5968d8(0x313)]>0x0&&!blockTransactionDetection)for(const _0x94e23d of _0x7bc041){if(config[_0x5968d8(0x3a2)]){logger[_0x5968d8(0x35d)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x94e23d[_0x5968d8(0x1ee)]+_0x5968d8(0x338)+lastFees['highest']);if(lastFees['highest']==0x0||Math['abs'](_0x94e23d[_0x5968d8(0x1ee)])>lastFees[_0x5968d8(0x297)]*1.2){if(config[_0x5968d8(0x3a2)]==_0x5968d8(0x347)){delete _0x94e23d[_0x5968d8(0x29c)],delete _0x94e23d[_0x5968d8(0x1ee)];let _0x10e903=[],_0x194fcf=[...config['liquidity']]||[],_0x2a8f47=config[_0x5968d8(0x28f)];_0x194fcf[_0x5968d8(0x310)]((_0x2157d6,_0x5c300e)=>_0x2157d6['date']>_0x5c300e[_0x5968d8(0x2ee)]?-0x1:_0x5c300e[_0x5968d8(0x2ee)]>_0x2157d6['date']?0x1:0x0);const _0x5e47e6=getDate();if(_0x194fcf[0x0]){const _0x2723d8=fns[_0x5968d8(0x37a)](_0x194fcf[0x0]['date'],_0x5968d8(0x295),new Date()),_0x39836a=fns[_0x5968d8(0x37a)](_0x5e47e6,'yyyy/MM/dd',new Date());if(fns[_0x5968d8(0x27e)](_0x2723d8,_0x39836a)){_0x10e903=_0x194fcf[0x0][_0x5968d8(0x299)];const _0x4e5206=_0x10e903[_0x5968d8(0x33a)](_0x509445=>_0x509445[_0x5968d8(0x2b7)]==_0x94e23d['coin']);_0x4e5206?(_0x4e5206[_0x5968d8(0x217)]+=_0x94e23d[_0x5968d8(0x217)],_0x4e5206[_0x5968d8(0x217)]==0x0&&(_0x10e903=_0x10e903[_0x5968d8(0x222)](_0x4ac039=>{const _0x56da81=_0x5968d8;return _0x4ac039[_0x56da81(0x2b7)]!=_0x94e23d[_0x56da81(0x2b7)];}))):_0x10e903[_0x5968d8(0x21b)](_0x94e23d);const _0x5c3c08=_0x2a8f47['find'](_0x209b33=>_0x209b33[_0x5968d8(0x2ee)]==_0x5e47e6);_0x5c3c08[_0x5968d8(0x299)]=_0x10e903;}else _0x2a8f47[_0x5968d8(0x21b)]({'date':_0x5e47e6,'changes':[_0x94e23d]});}const _0x19dbe2=_0x2a8f47[_0x5968d8(0x33a)](_0x34285e=>_0x34285e[_0x5968d8(0x2ee)]==_0x5e47e6);if(_0x19dbe2){let _0x45eaf5=!![];_0x19dbe2[_0x5968d8(0x299)][_0x5968d8(0x249)](_0x2dc8b1=>{const _0x2ae704=_0x5968d8;if(_0x2dc8b1[_0x2ae704(0x217)]!=0x0)_0x45eaf5=![];}),_0x45eaf5&&(_0x2a8f47=_0x2a8f47[_0x5968d8(0x222)](_0x2c9c02=>{const _0x4dc4a8=_0x5968d8;return _0x2c9c02[_0x4dc4a8(0x2ee)]!=_0x5e47e6;}));}let _0xf0fac2=dbConfig[_0x5968d8(0x283)](_0x5968d8(0x325))[_0x5968d8(0x33a)]({'botID':botID})['value']();_0xf0fac2&&(dbConfig[_0x5968d8(0x283)](_0x5968d8(0x325))[_0x5968d8(0x33a)]({'botID':botID})['assign']({'liquidity':_0x2a8f47})[_0x5968d8(0x312)](),config['liquidity']=_0x2a8f47);logHistory(_0x5968d8(0x355),_0x5968d8(0x2f9)+Math[_0x5968d8(0x200)](_0x94e23d[_0x5968d8(0x217)])+'\x20'+_0x94e23d[_0x5968d8(0x2b7)]+'\x20'+(_0x94e23d['number']>0x0?_0x5968d8(0x29b):_0x5968d8(0x307))+_0x5968d8(0x3a8)),proxyEmit(_0x5968d8(0x2bd),emittedConfiguration());const _0x350ef9=getNormalizedPerformance();emitPerformance(_0x350ef9),getStartingBalances(_0x350ef9),logger[_0x5968d8(0x35d)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x5968d8(0x3a2)]==_0x5968d8(0x2ea)&&(config[_0x5968d8(0x370)]?(await storeHeadless({'headless':![]}),logHistory(_0x5968d8(0x355),_0x5968d8(0x362)),logger[_0x5968d8(0x35d)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x94e23d[_0x5968d8(0x217)])+'\x20'+_0x94e23d[_0x5968d8(0x2b7)]+'\x20'+(_0x94e23d[_0x5968d8(0x217)]>0x0?_0x5968d8(0x29b):_0x5968d8(0x307))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x5968d8(0x35d)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5968d8(0x200)](_0x94e23d[_0x5968d8(0x217)])+'\x20'+_0x94e23d[_0x5968d8(0x2b7)]+'\x20'+(_0x94e23d['number']>0x0?_0x5968d8(0x29b):_0x5968d8(0x307))+_0x5968d8(0x2aa)));}else logger[_0x5968d8(0x35d)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x5968d8(0x200)](_0x94e23d[_0x5968d8(0x217)])+'\x20'+_0x94e23d[_0x5968d8(0x2b7)]+'\x20'+(_0x94e23d[_0x5968d8(0x217)]>0x0?_0x5968d8(0x29b):_0x5968d8(0x307)));}else logger[_0x5968d8(0x35d)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5968d8(0x200)](_0x94e23d[_0x5968d8(0x217)])+'\x20'+_0x94e23d[_0x5968d8(0x2b7)]+'\x20'+(_0x94e23d[_0x5968d8(0x217)]>0x0?_0x5968d8(0x29b):_0x5968d8(0x307))+_0x5968d8(0x388));}currentCoins=_0x50c666,currentCoinsAll=_0x4e1561;}catch(_0x316a9a){if(!exchangeStopped)await handleError(_0x316a9a,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x51e37e=_0x4af43a;try{markets=await exchange[_0x51e37e(0x22c)](),allSymbols=[],Object[_0x51e37e(0x1ea)](markets)['forEach'](_0x3e0667=>{const _0x319159=_0x51e37e;_0x3e0667[0x1][_0x319159(0x263)]&&_0x3e0667[0x1][_0x319159(0x319)]&&allSymbols[_0x319159(0x21b)](_0x3e0667[0x0]);});}catch(_0x79dae5){throw _0x79dae5;}}function validateSymbols(_0x37eb8f){const _0x429f37=_0x4af43a;let _0x3ac580=[];return _0x37eb8f[_0x429f37(0x249)](_0x83218d=>{const _0x309be9=_0x429f37;!allSymbols['includes'](_0x83218d)?logHistory(_0x309be9(0x233),_0x309be9(0x29f)+_0x83218d+_0x309be9(0x32e)):_0x3ac580[_0x309be9(0x21b)](_0x83218d);}),_0x3ac580;}async function initclient(){const _0x5ede46=_0x4af43a;proxyEmit(_0x5ede46(0x2bd),emittedConfiguration()),proxyEmit(_0x5ede46(0x1e8),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5ede46(0x24f),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x23aca8=getNormalizedPerformance();emitPerformance(_0x23aca8),getStartingBalances(_0x23aca8);}async function toggleBotMode(){const _0x270e95=_0x4af43a;let _0x2c4a7c=dbConfig[_0x270e95(0x283)](_0x270e95(0x325))[_0x270e95(0x33a)]({'botID':botID})[_0x270e95(0x281)]();if(_0x2c4a7c){const _0x2b61ac=!_0x2c4a7c['headless'];dbConfig['get']('bot')[_0x270e95(0x33a)]({'botID':botID})['assign']({'headless':_0x2b61ac})[_0x270e95(0x312)](),config[_0x270e95(0x370)]=_0x2b61ac,proxyEmit(_0x270e95(0x2bd),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x18b70f=_0x4af43a;process[_0x18b70f(0x293)]({'updatebotmanager':!![]},_0x55c447=>{}),logger['debug']('Headless:\x20'+config[_0x18b70f(0x370)]);}async function loadCoins(_0x433c6c){const _0x189643=_0x4af43a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2a8d17,_0x1d8d1d=0x0,_0x2a57a9=0x0;_0x433c6c[_0x189643(0x249)](_0x20ee36=>{const _0xa3ac2f=_0x189643;loading[_0xa3ac2f(0x33e)][_0xa3ac2f(0x21b)](_0x20ee36);}),loadingCanceled=![];let _0x44c549=![];while(_0x2a8d17!=_0x433c6c[_0x189643(0x313)]+maxLoadingProgress){_0x2a8d17=loadingProgress,_0x433c6c[_0x189643(0x249)](_0x226198=>{const _0x41b8b1=_0x189643;if(gTicker[noslash(_0x226198)]){loading[_0x41b8b1(0x33e)]=loading[_0x41b8b1(0x33e)][_0x41b8b1(0x222)](_0x3209cf=>_0x3209cf!=_0x226198);if(!watchedSymbols[_0x41b8b1(0x374)](_0x226198))watchedSymbols['push'](_0x226198);_0x2a8d17++;}}),loading['progress']=Math[_0x189643(0x2a0)](_0x2a8d17/(_0x433c6c['length']+maxLoadingProgress)*0x64);loading[_0x189643(0x2d1)]!=0x64&&(_0x2a57a9>0x1e*0x5&&(loading[_0x189643(0x354)]=!![],emitLoadingProgress()),_0x2a57a9>0x78*0x5&&!_0x44c549&&(_0x44c549=!![],logHistory(_0x189643(0x233),_0x189643(0x291)+loading[_0x189643(0x33e)][_0x189643(0x23c)](',\x20')+_0x189643(0x2e2)),logHistory(_0x189643(0x233),_0x189643(0x35e)+loadCoinsRetryInterval/0xea60+_0x189643(0x387)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x189643(0x31d)]=!![],emitLoadingProgress();break;}else _0x1d8d1d!=loading['progress']&&(_0x1d8d1d=loading[_0x189643(0x2d1)],emitLoadingProgress()),_0x2a57a9++,await sleep(0xc8);}_0x2a8d17==_0x433c6c[_0x189643(0x313)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x189643(0x293)]({'status':_0x189643(0x2cf),'live':_0x189643(0x243)},_0x3947b7=>{}),_0x44c549&&logHistory(_0x189643(0x355),_0x189643(0x3a5)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x51a70e=_0x4af43a;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x51a70e(0x28a)});}function emitLoadingProgress(){const _0x470462=_0x4af43a;proxyEmit(_0x470462(0x316),loading);}async function getFiat(){const _0x250c34=_0x4af43a;let _0x123b82=gTicker[stablecoins['eur'][_0x250c34(0x2b7)]],_0x222920=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x123b82),'usd':Number(_0x222920)};}function capitalize(_0x34d29f){const _0x4e1c92=_0x4af43a;return _0x34d29f[_0x4e1c92(0x286)](0x0,0x1)[_0x4e1c92(0x1fa)]()+_0x34d29f[_0x4e1c92(0x286)](0x1);}function supportedExchanges(){const _0x21e696=_0x4af43a,_0x48ae23=['ws','fetchTickers',_0x21e696(0x2e4),'watchTrades',_0x21e696(0x248),_0x21e696(0x339),_0x21e696(0x311),_0x21e696(0x275),_0x21e696(0x2da),_0x21e696(0x277)];let _0xb00a35=[],_0x6e1e98=[],_0x7e8bfc=ccxt[_0x21e696(0x25c)]['exchanges'];_0x7e8bfc[_0x21e696(0x249)](_0x5252a7=>{const _0x42bb0e=_0x21e696;try{const _0x1be922=new ccxt[(_0x42bb0e(0x25c))][_0x5252a7]();_0x6e1e98[_0x42bb0e(0x21b)](_0x1be922);}catch(_0xc66a0f){}}),_0x6e1e98[_0x21e696(0x249)](_0x91fdff=>{const _0x7730dd=_0x21e696;let _0x42c007=0x0;_0x48ae23[_0x7730dd(0x249)](_0x117fe0=>{const _0x112a4b=_0x7730dd;_0x117fe0 in _0x91fdff[_0x112a4b(0x342)]&&_0x91fdff[_0x112a4b(0x342)][_0x117fe0]&&_0x42c007++;}),_0x42c007==_0x48ae23[_0x7730dd(0x313)]&&_0xb00a35[_0x7730dd(0x21b)](capitalize(_0x91fdff['id']));});let _0x1e5a2d=[];return _0x7e8bfc[_0x21e696(0x249)](_0x493726=>{const _0x967b50=_0x21e696;_0x493726=capitalize(_0x493726);if(!_0xb00a35['includes'](_0x493726))_0x1e5a2d[_0x967b50(0x21b)](_0x493726);}),_0xb00a35;}function setStartDatePerformance(){const _0x436fb3=_0x4af43a;if(config&&config[_0x436fb3(0x28f)][0x0][_0x436fb3(0x299)]['length']!=0x0){const _0x20ffb9=config[_0x436fb3(0x28f)][0x0][_0x436fb3(0x299)];dbPerformance[_0x436fb3(0x283)](_0x436fb3(0x315))[_0x436fb3(0x33a)]({'date':config[_0x436fb3(0x38b)]})['assign']({'coins':_0x20ffb9})[_0x436fb3(0x312)]();}}async function recreateCoinResults(){const _0x399ae6=_0x4af43a;let _0x5941e6,_0x59c93e=[];try{const _0x412e3c=fns[_0x399ae6(0x209)](fns[_0x399ae6(0x2f0)](config[_0x399ae6(0x38b)][_0x399ae6(0x1e9)](/\//g,'-')),_0x399ae6(0x391));for(const _0x3a9d4e of currentCoins){if(_0x3a9d4e['coin']!=config[_0x399ae6(0x1f1)]){let _0x5f4617=0x0,_0x4ed770,_0x1e7dee;_0x5941e6=await getAllEventOrders(_0x3a9d4e[_0x399ae6(0x29c)]);if(_0x5941e6['length']>0x0)_0x5941e6[_0x399ae6(0x249)](_0x4994c2=>{const _0x2eb852=_0x399ae6,_0x43ef58=_0x3a9d4e['symbol'][_0x2eb852(0x374)](config[_0x2eb852(0x1f1)]+'/');_0x59c93e[_0x2eb852(0x21b)]({'datetime':_0x4994c2[_0x2eb852(0x329)],'coin':_0x3a9d4e[_0x2eb852(0x2b7)],'symbol':_0x3a9d4e[_0x2eb852(0x29c)],'side':_0x4994c2[_0x2eb852(0x2dc)],'reverse':_0x43ef58,'amount':formatResult(_0x4994c2['filled'],0x8),'filled':formatResult(_0x4994c2['filled'],0x8),'price':formatResult(_0x4994c2[_0x2eb852(0x371)],0x8)}),_0x5f4617=_0x4994c2[_0x2eb852(0x2dc)]==_0x2eb852(0x35f)?_0x5f4617+_0x4994c2[_0x2eb852(0x389)]:_0x5f4617-_0x4994c2[_0x2eb852(0x389)];if(!_0x1e7dee)_0x1e7dee=_0x4994c2['price'];});_0x4ed770=_0x3a9d4e[_0x399ae6(0x217)]-_0x5f4617;let _0x382c64;config['liquidity'][_0x399ae6(0x249)](_0x29c5c2=>{const _0x50079c=_0x399ae6;!_0x382c64&&(_0x382c64=_0x29c5c2[_0x50079c(0x299)][_0x50079c(0x33a)](_0x486ccd=>_0x486ccd[_0x50079c(0x2b7)]==_0x3a9d4e[_0x50079c(0x2b7)]),_0x382c64&&(_0x4ed770=_0x382c64['number'],_0x1e7dee=_0x382c64[_0x50079c(0x371)]));});let _0x3b2887=dbCoinResults[_0x399ae6(0x283)](_0x399ae6(0x364))[_0x399ae6(0x33a)]({'coin':_0x3a9d4e['coin']})[_0x399ae6(0x281)]();_0x3b2887={'coin':_0x3a9d4e[_0x399ae6(0x2b7)],'number':_0x4ed770,'breakeven':_0x1e7dee,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x399ae6(0x283)]('coins')[_0x399ae6(0x33a)]({'coin':_0x3a9d4e['coin']})[_0x399ae6(0x1fd)](_0x3b2887)[_0x399ae6(0x312)]();}}_0x59c93e[_0x399ae6(0x310)]((_0x2d2ff5,_0x12bd20)=>_0x2d2ff5[_0x399ae6(0x329)]>_0x12bd20['datetime']?0x1:_0x12bd20[_0x399ae6(0x329)]>_0x2d2ff5[_0x399ae6(0x329)]?-0x1:0x0);let _0x2c3b55=0x0;for(let _0x20f7c1 of _0x59c93e){await updateCoinResults(_0x20f7c1,!![]);}}catch(_0x2ac870){await handleError(_0x2ac870,_0x399ae6(0x265));}}async function getAllEventOrders(_0x376c69){const _0x4d7218=_0x4af43a;let _0x946a38=[],_0x496b18=dbLogs[_0x4d7218(0x283)]('logs')[_0x4d7218(0x222)](_0x12f698=>{const _0x24aebc=_0x4d7218,_0x417837=_0x12f698[_0x24aebc(0x335)]['toLowerCase']();return _0x417837[_0x24aebc(0x374)](_0x376c69[_0x24aebc(0x27c)]())&&(_0x417837[_0x24aebc(0x374)](_0x24aebc(0x29a))&&_0x417837[_0x24aebc(0x374)](_0x24aebc(0x242))||_0x417837[_0x24aebc(0x374)]('filled')&&_0x417837[_0x24aebc(0x374)](_0x24aebc(0x242)));})[_0x4d7218(0x292)](_0x4d7218(0x1ec))['value']();return _0x496b18[_0x4d7218(0x249)](_0x59952d=>{const _0x584244=_0x4d7218,_0xab72a5=_0x59952d['event'][_0x584244(0x374)]('sell')?'sell':_0x584244(0x35f),_0x41f447=/#([0-9]|\.)+\s/i,_0x343a5f=Number(_0x41f447[_0x584244(0x399)](_0x59952d['event'])[0x0][_0x584244(0x205)](0x1)),_0x34a23d=/@([0-9]|\.)+$/i,_0x3f6824=Number(_0x34a23d[_0x584244(0x399)](_0x59952d[_0x584244(0x335)])[0x0]['slice'](0x1));_0x946a38['push']({'datetime':_0x59952d['time'],'coin':symbolToCoin(_0x376c69),'symbol':_0x376c69,'side':_0xab72a5,'amount':_0x343a5f,'filled':_0x343a5f,'price':_0x3f6824});}),_0x946a38;}async function getAllOrders(_0x27c228,_0xb22ee3){const _0x330c4d=_0x4af43a;let _0x2b4211=[];while(_0xb22ee3<exchange[_0x330c4d(0x208)]()){const _0x30756b=0x1f4;try{const _0x43aa8b=await exchange['fetchClosedOrders'](_0x27c228,_0xb22ee3,_0x30756b);if(_0x43aa8b[_0x330c4d(0x313)])_0xb22ee3=_0x43aa8b[_0x43aa8b[_0x330c4d(0x313)]-0x1][_0x330c4d(0x271)]+0x1,_0x2b4211=_0x2b4211['concat'](_0x43aa8b);else break;}catch(_0x55f4a0){await handleError(_0x55f4a0,_0x330c4d(0x2e6),_0x27c228);}}return _0x2b4211;}async function validate24hChanges(){const _0x1ef808=_0x4af43a;for(const _0x29c7ed of currentCoins){if(_0x29c7ed['coin']!=config[_0x1ef808(0x1f1)]){let _0x33aec7;_0x29c7ed[_0x1ef808(0x28e)]?_0x33aec7=formatResult((0x1/(gChange[_0x29c7ed['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x33aec7=gChange[_0x29c7ed[_0x1ef808(0x29c)]],_0x33aec7<config[_0x1ef808(0x332)]&&(logHistory('error',_0x29c7ed[_0x1ef808(0x2b7)]+_0x1ef808(0x34c)+_0x33aec7+'%'),logHistory(_0x1ef808(0x233),_0x1ef808(0x267)),logHistory('error',_0x1ef808(0x363)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x34728a,_0xfbcbb4){const _0x2efede=_0x4af43a;if(!_0x34728a)return!![];const _0x1851c9=_0xfbcbb4['split']('.'),_0x58f061=_0x34728a[_0x2efede(0x28c)]('.');for(var _0x30bbff=0x0;_0x30bbff<_0x58f061[_0x2efede(0x313)];_0x30bbff++){const _0x1e4f25=~~_0x58f061[_0x30bbff],_0xad5665=~~_0x1851c9[_0x30bbff];if(_0x1e4f25<_0xad5665)return!![];if(_0x1e4f25>_0xad5665)return![];}return![];}function _0x41fe(_0x827209,_0x5018f2){const _0x3747b8=_0xa712();return _0x41fe=function(_0xb88d30,_0x39ccdc){_0xb88d30=_0xb88d30-0x1e5;let _0xa71278=_0x3747b8[_0xb88d30];return _0xa71278;},_0x41fe(_0x827209,_0x5018f2);}async function oneTimeMigration(){const _0x3ef231=_0x4af43a;let _0x5d7fc3=dbLogs['get'](_0x3ef231(0x212))[_0x3ef231(0x281)]();if(isOlderVersion(_0x5d7fc3,_0x3ef231(0x1eb))){let _0x38860f=[];const _0x1a63ce=dbLogs[_0x3ef231(0x283)](_0x3ef231(0x39b))[_0x3ef231(0x281)]();_0x1a63ce['forEach'](_0x5b8299=>{const _0x4c9840=_0x3ef231;_0x38860f[_0x4c9840(0x21b)]({'time':_0x5b8299[_0x4c9840(0x1ec)],'type':_0x5b8299[_0x4c9840(0x259)],'event':_0x5b8299['event']});}),dbLogs['get'](_0x3ef231(0x39b))['assign'](_0x38860f)[_0x3ef231(0x312)]();}let _0x45ba42=dbConfig['get'](_0x3ef231(0x212))[_0x3ef231(0x281)]();if(isOlderVersion(_0x45ba42,_0x3ef231(0x1eb))){let _0x199c24=dbConfig[_0x3ef231(0x283)]('bot')[_0x3ef231(0x33a)]({'botID':botID})['value']();if(_0x199c24){let _0x1a0e20=[];_0x199c24['portfolio'][_0x3ef231(0x249)](_0x4fda96=>{const _0x193b1d=_0x3ef231;_0x1a0e20[_0x193b1d(0x21b)]({'coin':_0x4fda96['coin'],'number':_0x4fda96['startnumber'],'price':_0x4fda96[_0x193b1d(0x33d)]}),delete _0x4fda96[_0x193b1d(0x396)],delete _0x4fda96['startprice'];});if(_0x1a0e20['length']!==0x0)fs[_0x3ef231(0x234)](configbackuppath+(_0x3ef231(0x244)+botID+_0x3ef231(0x385)),JSON[_0x3ef231(0x224)](_0x1a0e20,null,0x4),function(_0x4c8d6f){if(_0x4c8d6f){}});const _0x4b4c77=(_0x16efe,_0x222f2b)=>{let _0x3d3ad3=[];_0x222f2b['forEach'](_0xcf72bd=>{const _0x38ec6d=_0x41fe,_0x5b2fa3=_0x16efe['find'](_0x49eaa5=>_0x49eaa5[_0x38ec6d(0x2b7)]==_0xcf72bd['coin']);if(!_0x5b2fa3)_0x3d3ad3[_0x38ec6d(0x21b)](_0xcf72bd);});let _0x6cc3b2=[];return _0x16efe['forEach'](_0x5302e6=>{const _0x296826=_0x41fe,_0x4c1250=_0x222f2b['find'](_0x1fcc50=>_0x1fcc50[_0x296826(0x2b7)]==_0x5302e6[_0x296826(0x2b7)]);if(!_0x4c1250||_0x4c1250[_0x296826(0x217)]==0x0&&_0x5302e6[_0x296826(0x217)]!=0x0)_0x6cc3b2[_0x296826(0x21b)](_0x5302e6);}),{'missingDay1':_0x3d3ad3,'notInDay2':_0x6cc3b2};},_0x1bc285=dbPerformance['get']('data')[_0x3ef231(0x36f)]()['value']();if(_0x1bc285[_0x3ef231(0x313)]>0x1){const {missingDay1:_0x19b862,notInDay2:_0x2fb499}=_0x4b4c77(_0x1a0e20,_0x1bc285[0x1][_0x3ef231(0x364)]);_0x1a0e20=[..._0x1a0e20,..._0x19b862],_0x2fb499[_0x3ef231(0x249)](_0xc9fb8a=>{const _0x2de0bc=_0x3ef231;let _0x58095a=_0x1a0e20[_0x2de0bc(0x38f)](_0x5037c2=>_0x5037c2[_0x2de0bc(0x2b7)]==_0xc9fb8a[_0x2de0bc(0x2b7)]);_0x58095a!=-0x1&&_0x1a0e20[_0x2de0bc(0x2d5)](_0x58095a,0x1);});}_0x1a0e20[_0x3ef231(0x310)]((_0x2f5e20,_0x488c78)=>_0x2f5e20[_0x3ef231(0x2b7)]>_0x488c78[_0x3ef231(0x2b7)]?0x1:_0x488c78[_0x3ef231(0x2b7)]>_0x2f5e20[_0x3ef231(0x2b7)]?-0x1:0x0);let _0x3615ae=[{'date':_0x199c24[_0x3ef231(0x38b)],'changes':_0x1a0e20}];_0x1bc285[_0x3ef231(0x313)]>0x2&&_0x1bc285[_0x3ef231(0x249)]((_0x329f3b,_0x15782c)=>{const _0x44c71e=_0x3ef231;if(_0x15782c>0x0&&_0x15782c<_0x1bc285['length']-0x1){const {missingDay1:_0x4f1365,notInDay2:_0xae1d6d}=_0x4b4c77(_0x1bc285[_0x15782c][_0x44c71e(0x364)],_0x1bc285[_0x15782c+0x1][_0x44c71e(0x364)]);_0x1a0e20=[],(_0x4f1365[_0x44c71e(0x313)]!=0x0||_0xae1d6d[_0x44c71e(0x313)]!=0x0)&&(_0x4f1365[_0x44c71e(0x313)]!=0x0&&_0x1a0e20[_0x44c71e(0x21b)](..._0x4f1365),_0xae1d6d[_0x44c71e(0x313)]!=0x0&&(_0xae1d6d[_0x44c71e(0x249)](_0x35b76e=>{const _0x39adcb=_0x44c71e;_0x35b76e[_0x39adcb(0x217)]=-_0x35b76e['number'];}),_0x1a0e20['push'](..._0xae1d6d)),_0x1a0e20[_0x44c71e(0x310)]((_0x3c8ceb,_0x29e179)=>_0x3c8ceb[_0x44c71e(0x2b7)]>_0x29e179['coin']?0x1:_0x29e179[_0x44c71e(0x2b7)]>_0x3c8ceb[_0x44c71e(0x2b7)]?-0x1:0x0),_0x3615ae[_0x44c71e(0x21b)]({'date':_0x1bc285[_0x15782c+0x1][_0x44c71e(0x2ee)],'changes':_0x1a0e20}));}}),dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))['find']({'botID':botID})[_0x3ef231(0x1fd)]({..._0x199c24,'liquidity':_0x3615ae})[_0x3ef231(0x312)]();}}if(isOlderVersion(_0x45ba42,_0x3ef231(0x352))){let _0x5576dc=dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))[_0x3ef231(0x33a)]({'botID':botID})[_0x3ef231(0x281)]();if(_0x5576dc){const _0x2f1786=_0x5576dc[_0x3ef231(0x305)],_0x448190=_0x2f1786?capitalize(_0x2f1786):_0x3ef231(0x274);dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))['find']({'botID':botID})['assign']({'exchange':_0x448190})[_0x3ef231(0x312)]();}}if(isOlderVersion(_0x45ba42,'2.6.22')){let _0x225076=dbConfig['get'](_0x3ef231(0x325))[_0x3ef231(0x33a)]({'botID':botID})['value']();if(_0x225076){const _0x2b179c=_0x225076[_0x3ef231(0x361)],_0x3e9e8d=_0x2b179c?_0x3ef231(0x31a):![];dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))['find']({'botID':botID})[_0x3ef231(0x1fd)]({'marketcapEnabled':_0x3e9e8d})[_0x3ef231(0x312)]();}}if(isOlderVersion(_0x45ba42,'2.6.23')){let _0x3b7cb7=dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))[_0x3ef231(0x33a)]({'botID':botID})[_0x3ef231(0x281)]();if(_0x3b7cb7){const _0x46a3d3=_0x3b7cb7[_0x3ef231(0x3a2)],_0xbf8e63=_0x46a3d3?_0x3ef231(0x347):![];dbConfig[_0x3ef231(0x283)](_0x3ef231(0x325))['find']({'botID':botID})[_0x3ef231(0x1fd)]({'autoliquidity':_0xbf8e63})[_0x3ef231(0x312)]();}}let _0xa9ea64=dbPerformance[_0x3ef231(0x283)](_0x3ef231(0x212))['value']();isOlderVersion(_0xa9ea64,'2.3.5')&&setStartDatePerformance();let _0x2b0f55=dbCoinResults[_0x3ef231(0x283)](_0x3ef231(0x212))['value']();if(isOlderVersion(_0x2b0f55,_0x3ef231(0x2e1))){let _0xaa9ca3=dbCoinResults[_0x3ef231(0x283)]('coins')[_0x3ef231(0x281)]();if(_0xaa9ca3['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5388a2=_0x4af43a;dbConfig[_0x5388a2(0x386)](_0x5388a2(0x212),serverversion)[_0x5388a2(0x312)](),dbPerformance['set']('version',serverversion)[_0x5388a2(0x312)](),dbLogs[_0x5388a2(0x386)](_0x5388a2(0x212),serverversion)['write'](),dbCoinResults['set'](_0x5388a2(0x212),serverversion)[_0x5388a2(0x312)]();}function getConfiguration(_0x31c87f){const _0x3b7421=_0x4af43a;let _0x49e32f=dbConfig[_0x3b7421(0x283)](_0x3b7421(0x325))['find']({'botID':_0x31c87f})['value']();if(_0x49e32f){let _0x17dda4=![];typeof _0x49e32f[_0x3b7421(0x284)]==_0x3b7421(0x324)&&(_0x49e32f={..._0x49e32f,'threshold':Number(_0x49e32f[_0x3b7421(0x284)])},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x332)]==undefined&&(_0x49e32f={..._0x49e32f,'change24h':-0x14},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x2ab)]==undefined&&(_0x49e32f={..._0x49e32f,'fiat':_0x3b7421(0x207)},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x381)]==undefined&&(_0x49e32f={..._0x49e32f,'onepagemode':settings[_0x3b7421(0x381)]},_0x17dda4=!![]),_0x49e32f['colorscheme']==undefined&&(_0x49e32f={..._0x49e32f,'colorscheme':_0x3b7421(0x2a2)},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x3a2)]==undefined&&(_0x49e32f={..._0x49e32f,'autoliquidity':'update-liquidity'},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x25f)]==undefined&&(_0x49e32f={..._0x49e32f,'marketcapApi':settings[_0x3b7421(0x25f)]?!![]:![]},_0x17dda4=!![]),_0x49e32f[_0x3b7421(0x361)]==undefined&&(_0x49e32f={..._0x49e32f,'marketcapEnabled':![]},_0x17dda4=!![]),_0x17dda4&&(_0x49e32f={'botID':_0x49e32f[_0x3b7421(0x279)],'exchange':_0x49e32f[_0x3b7421(0x305)],'apiKey':_0x49e32f[_0x3b7421(0x32d)],'apiSecret':_0x49e32f[_0x3b7421(0x273)],'apiPassword':_0x49e32f[_0x3b7421(0x2ef)],'basecoin':_0x49e32f['basecoin'],'botname':_0x49e32f[_0x3b7421(0x373)],'showname':_0x49e32f[_0x3b7421(0x282)],'threshold':_0x49e32f[_0x3b7421(0x284)],'ordertype':_0x49e32f['ordertype'],'timeout':_0x49e32f[_0x3b7421(0x354)],'fiat':_0x49e32f[_0x3b7421(0x2ab)],'startdate':_0x49e32f[_0x3b7421(0x38b)],'recreate':_0x49e32f[_0x3b7421(0x2ed)],'timeshift':_0x49e32f[_0x3b7421(0x30a)],'onepagemode':_0x49e32f[_0x3b7421(0x381)],'headless':_0x49e32f[_0x3b7421(0x370)],'cooldown':_0x49e32f[_0x3b7421(0x397)],'change24h':_0x49e32f[_0x3b7421(0x332)],'emojibuy':_0x49e32f[_0x3b7421(0x229)],'emojisell':_0x49e32f[_0x3b7421(0x36c)],'colorscheme':_0x49e32f[_0x3b7421(0x308)],'marketcapApi':_0x49e32f[_0x3b7421(0x25f)],'marketcapEnabled':_0x49e32f[_0x3b7421(0x361)],'portfolio':_0x49e32f[_0x3b7421(0x2f6)],'autoliquidity':_0x49e32f[_0x3b7421(0x3a2)],'liquidity':_0x49e32f[_0x3b7421(0x28f)],'openOrders':_0x49e32f[_0x3b7421(0x3aa)]},dbConfig[_0x3b7421(0x283)]('bot')['remove']()[_0x3b7421(0x312)](),dbConfig[_0x3b7421(0x283)]('bot')[_0x3b7421(0x21b)](_0x49e32f)[_0x3b7421(0x312)]());}else _0x49e32f={'botID':_0x31c87f,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3b7421(0x290)+_0x31c87f,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x3b7421(0x207),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3b7421(0x30a)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3b7421(0x2a2),'marketcapApi':settings[_0x3b7421(0x25f)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x3b7421(0x347),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x49e32f;}function emittedConfiguration(){const _0x485c39=_0x4af43a;let _0x42578b;if(config[_0x485c39(0x32d)]=='')_0x42578b={...config,'configstate':'initial'};else config['apiKey']==_0x485c39(0x2de)?_0x42578b={...config,'configstate':_0x485c39(0x366)}:(_0x42578b={...config,'apiKey':_0x485c39(0x2fe),'apiSecret':_0x485c39(0x2fe)},config['apiPassword']&&(_0x42578b['apiPassword']=_0x485c39(0x2fe)));return _0x42578b;}function getSettings(){const _0x35af5d=_0x4af43a;return dbSettings['get'](_0x35af5d(0x2db))[_0x35af5d(0x281)]();}function getSecure(){const _0x2d5cb4=_0x4af43a;return dbSecure[_0x2d5cb4(0x283)](_0x2d5cb4(0x2ad))[_0x2d5cb4(0x281)]()||{};}function updateTimeshift(_0x124e0a){const _0x42f808=_0x4af43a;let _0x5eb29f=dbConfig[_0x42f808(0x283)](_0x42f808(0x325))[_0x42f808(0x33a)]({'botID':botID})[_0x42f808(0x281)]();_0x5eb29f&&dbConfig['get'](_0x42f808(0x325))[_0x42f808(0x33a)]({'botID':botID})['assign']({'timeshift':_0x124e0a})[_0x42f808(0x312)](),config[_0x42f808(0x30a)]=_0x124e0a,proxyEmit(_0x42f808(0x2bd),emittedConfiguration());}function updateOnepagemode(_0x33452c){const _0x383fe4=_0x4af43a;let _0x96dfce=dbConfig[_0x383fe4(0x283)]('bot')['find']({'botID':botID})[_0x383fe4(0x281)]();_0x96dfce&&dbConfig[_0x383fe4(0x283)](_0x383fe4(0x325))[_0x383fe4(0x33a)]({'botID':botID})[_0x383fe4(0x1fd)]({'onepagemode':_0x33452c})[_0x383fe4(0x312)](),config['onepagemode']=_0x33452c,proxyEmit(_0x383fe4(0x2bd),emittedConfiguration());}function updateMarketcapApi(_0x5c849d){const _0x4153a2=_0x4af43a,_0x16026d=_0x5c849d?!![]:![];let _0x8e2fb9=dbConfig[_0x4153a2(0x283)]('bot')[_0x4153a2(0x33a)]({'botID':botID})['value']();_0x8e2fb9&&dbConfig[_0x4153a2(0x283)](_0x4153a2(0x325))[_0x4153a2(0x33a)]({'botID':botID})[_0x4153a2(0x1fd)]({'marketcapApi':_0x16026d})[_0x4153a2(0x312)](),config[_0x4153a2(0x25f)]=_0x16026d,getMarketCap(),proxyEmit(_0x4153a2(0x2bd),emittedConfiguration());}async function storeConfiguration(_0x34df94){const _0x2399c4=_0x4af43a;logger[_0x2399c4(0x35d)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2399c4(0x35d)](_0x2399c4(0x20b));let _0x5fd724=![],_0x114a13=![],_0x32094a=[];_0x34df94[_0x2399c4(0x2f6)][_0x2399c4(0x249)](_0x3f812e=>{const _0x2f9884=_0x2399c4;if(!_0x3f812e['excluded']&&_0x3f812e[_0x2f9884(0x2b7)]!=_0x34df94['basecoin'])_0x32094a[_0x2f9884(0x21b)](_0x3f812e['symbol']);}),_0x32094a[_0x2399c4(0x249)](_0xaf152c=>{const _0x146c4c=_0x2399c4,_0x490428=currentCoins[_0x146c4c(0x33a)](_0x2fe6b3=>_0x2fe6b3[_0x146c4c(0x29c)]==_0xaf152c);!_0x490428&&(_0x5fd724=!![]);}),currentCoins[_0x2399c4(0x249)](_0x551c90=>{const _0x144b9b=_0x2399c4;if(_0x551c90[_0x144b9b(0x2b7)]!=config[_0x144b9b(0x1f1)]){const _0x4e9384=_0x32094a['find'](_0x49994e=>_0x49994e==_0x551c90['symbol']);!_0x4e9384&&(_0x5fd724=!![]);}}),_0x34df94[_0x2399c4(0x2f6)][_0x2399c4(0x249)](_0x443664=>{const _0x127a24=_0x2399c4,_0x555c8d=config[_0x127a24(0x2f6)]['find'](_0x6e95b5=>_0x6e95b5[_0x127a24(0x2b7)]==_0x443664[_0x127a24(0x2b7)]);if(_0x555c8d&&_0x443664[_0x127a24(0x2b2)]!=_0x555c8d[_0x127a24(0x2b2)])_0x114a13=!![];});let _0xc3fe40=dbConfig[_0x2399c4(0x283)](_0x2399c4(0x325))[_0x2399c4(0x33a)]({'botID':botID})[_0x2399c4(0x281)]();_0x34df94={..._0x34df94,'apiKey':crypt[_0x2399c4(0x2c4)](secure['privateKey'],_0x34df94[_0x2399c4(0x32d)])['message'],'apiSecret':crypt[_0x2399c4(0x2c4)](secure[_0x2399c4(0x301)],_0x34df94[_0x2399c4(0x273)])[_0x2399c4(0x2d2)]};_0x34df94[_0x2399c4(0x2ef)]&&(_0x34df94[_0x2399c4(0x2ef)]=crypt[_0x2399c4(0x2c4)](secure[_0x2399c4(0x301)],_0x34df94[_0x2399c4(0x2ef)])[_0x2399c4(0x2d2)]);let _0x5fa87c=![];if(_0xc3fe40){_0x34df94['apiKey']==_0x2399c4(0x2fe)?_0x34df94[_0x2399c4(0x32d)]=config['apiKey']:_0x5fa87c=!![];_0x34df94[_0x2399c4(0x273)]==_0x2399c4(0x2fe)?_0x34df94[_0x2399c4(0x273)]=config[_0x2399c4(0x273)]:_0x5fa87c=!![];if(_0x34df94[_0x2399c4(0x2ef)]==_0x2399c4(0x2fe))_0x34df94[_0x2399c4(0x2ef)]=config['apiPassword'];else{if(_0x34df94[_0x2399c4(0x2ef)])_0x5fa87c=!![];}dbConfig[_0x2399c4(0x283)](_0x2399c4(0x325))[_0x2399c4(0x33a)]({'botID':botID})[_0x2399c4(0x1fd)](_0x34df94)[_0x2399c4(0x312)]();}else dbConfig[_0x2399c4(0x283)](_0x2399c4(0x325))[_0x2399c4(0x21b)](_0x34df94)[_0x2399c4(0x312)](),_0x5fa87c=!![],process[_0x2399c4(0x293)]({'status':_0x2399c4(0x2cf),'live':_0x2399c4(0x243)},_0xc4cff6=>{});process['send']({'botname':_0x34df94['botname']},_0xbf4319=>{}),config={..._0x34df94},updateBotManager(),proxyEmit(_0x2399c4(0x376)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5fa87c)await reset(!![]);else _0x5fd724||_0x114a13?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x2399c4(0x261));}async function storeHeadless(_0x579623){const _0x3f94e1=_0x4af43a,_0x53a306={...config,'headless':_0x579623[_0x3f94e1(0x370)]};let _0x5976cf=dbConfig[_0x3f94e1(0x283)](_0x3f94e1(0x325))[_0x3f94e1(0x33a)]({'botID':botID})[_0x3f94e1(0x281)]();_0x5976cf&&dbConfig['get'](_0x3f94e1(0x325))[_0x3f94e1(0x33a)]({'botID':botID})[_0x3f94e1(0x1fd)](_0x53a306)[_0x3f94e1(0x312)](),config={..._0x53a306},updateBotManager(),proxyEmit(_0x3f94e1(0x2bd),emittedConfiguration());}async function storeFiat(_0x194a07){const _0xf9a63d=_0x4af43a,_0x21e933={...config,'fiat':_0x194a07};let _0x215e31=dbConfig['get']('bot')[_0xf9a63d(0x33a)]({'botID':botID})[_0xf9a63d(0x281)]();_0x215e31&&dbConfig[_0xf9a63d(0x283)](_0xf9a63d(0x325))['find']({'botID':botID})[_0xf9a63d(0x1fd)](_0x21e933)[_0xf9a63d(0x312)](),config={..._0x21e933},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x23166a=_0x4af43a;logger[_0x23166a(0x38d)](_0x23166a(0x39c));try{if(fs['existsSync'](path['join'](configpath,_0x23166a(0x2c0)+botID+_0x23166a(0x270))))fs['unlinkSync'](path[_0x23166a(0x23c)](configpath,_0x23166a(0x2c0)+botID+_0x23166a(0x270)));if(fs[_0x23166a(0x269)](path[_0x23166a(0x23c)](configpath,'bot-'+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0x23166a(0x2c0)+botID+_0x23166a(0x2c9)));if(fs[_0x23166a(0x269)](path['join'](configpath,'bot-'+botID+_0x23166a(0x25b))))fs[_0x23166a(0x306)](path[_0x23166a(0x23c)](configpath,_0x23166a(0x2c0)+botID+_0x23166a(0x25b)));}catch(_0x461f10){if(_0x461f10)logger[_0x23166a(0x38d)](_0x23166a(0x21c),_0x461f10);}const _0x6fc4ce=getDate();let _0xe88fc0=[];currentCoins['forEach'](_0x574063=>{const _0x4573c8=_0x23166a;_0xe88fc0[_0x4573c8(0x21b)]({'coin':_0x574063[_0x4573c8(0x2b7)],'number':_0x574063[_0x4573c8(0x217)],'price':_0x574063[_0x4573c8(0x1ed)]});});let _0x45a859=dbConfig['get'](_0x23166a(0x325))[_0x23166a(0x33a)]({'botID':botID})[_0x23166a(0x281)]();_0x45a859&&(dbConfig[_0x23166a(0x283)](_0x23166a(0x325))[_0x23166a(0x33a)]({'botID':botID})[_0x23166a(0x1fd)]({'liquidity':[{'date':_0x6fc4ce,'changes':_0xe88fc0}]})[_0x23166a(0x312)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x552b41){return _0x552b41['replace']('/','');}function updateHighestFee(_0x5d5713){const _0xd1bc95=_0x4af43a;if(_0x5d5713[_0xd1bc95(0x28e)]){let _0x8a1fa={'filled':_0x5d5713[_0xd1bc95(0x389)]*_0x5d5713[_0xd1bc95(0x371)],'amount':_0x5d5713['filled']*_0x5d5713[_0xd1bc95(0x371)],'side':_0x5d5713[_0xd1bc95(0x2dc)]==_0xd1bc95(0x231)?'buy':_0xd1bc95(0x231),'price':0x1/_0x5d5713[_0xd1bc95(0x371)]};_0x5d5713={..._0x5d5713,..._0x8a1fa};}const _0x4d8f84=defaultFee*_0x5d5713[_0xd1bc95(0x389)]*_0x5d5713[_0xd1bc95(0x371)];lastFees['recent20'][_0xd1bc95(0x313)]===0x14&&lastFees[_0xd1bc95(0x252)][_0xd1bc95(0x348)](),lastFees[_0xd1bc95(0x252)][_0xd1bc95(0x21b)](_0x4d8f84),lastFees[_0xd1bc95(0x297)]=Math[_0xd1bc95(0x337)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x49dd0f){const _0x1c52c4=_0x4af43a;logger[_0x1c52c4(0x35d)](_0x1c52c4(0x21d)+_0x49dd0f[_0x1c52c4(0x29c)]+'\x20|\x20'+_0x49dd0f[_0x1c52c4(0x31c)]+_0x1c52c4(0x328)+_0x49dd0f[_0x1c52c4(0x389)]+'\x20/\x20'+_0x49dd0f[_0x1c52c4(0x228)]+'\x20|\x20'+_0x49dd0f['id']);_0x49dd0f[_0x1c52c4(0x389)]>0x0&&(blockTransactionDetection=!![]);let _0x6bd081=_0x49dd0f[_0x1c52c4(0x31c)],_0x30d43a=![];currentCoins['forEach'](_0x3647ad=>{const _0x21dfaa=_0x1c52c4;_0x3647ad[_0x21dfaa(0x29c)]==_0x49dd0f[_0x21dfaa(0x29c)]&&(_0x30d43a=!![]);});if(!_0x30d43a)return;const _0x3dd32f=currentCoins[_0x1c52c4(0x33a)](_0x25f566=>_0x25f566[_0x1c52c4(0x29c)]==_0x49dd0f['symbol']),_0x65a46e=_0x4a801a=>{const _0x4f719e=_0x1c52c4;if(_0x3dd32f)_0x3dd32f[_0x4f719e(0x30e)]=_0x4a801a;};if(_0x6bd081==_0x1c52c4(0x336))_0x65a46e(_0x1c52c4(0x336));else{if(_0x6bd081==_0x1c52c4(0x302)){_0x65a46e('canceled');const _0x4ff5f4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4ff5f4,blockTransactionDetection=![],await getOpenOrders(),handleOpenOrders();}else{if(_0x6bd081==_0x1c52c4(0x20a)){let _0x5856bc=![];if(lastOrders)for(const _0x5c12ec of lastOrders){const _0x1cace0=0xc8,_0x365f39=0x1388;let _0x3e763a=0x0;while(!_0x5c12ec[_0x1c52c4(0x26e)]&&_0x3e763a*_0x1cace0<_0x365f39){_0x3e763a++,await sleep(_0x1cace0);}if(_0x3e763a>0x0)logger['debug'](_0x1c52c4(0x29d)+_0x3e763a*_0x1cace0/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x5c12ec[_0x1c52c4(0x26e)]==_0x49dd0f['id']){logger['debug'](_0x1c52c4(0x1fb)+_0x49dd0f['id']),_0x5856bc=!![];if(_0x5c12ec[_0x1c52c4(0x389)]==0x0){logger[_0x1c52c4(0x35d)](_0x1c52c4(0x20f)+_0x49dd0f['id']);if(_0x49dd0f[_0x1c52c4(0x1e5)])_0x5c12ec[_0x1c52c4(0x371)]=_0x49dd0f['average'];else{if(_0x49dd0f['price'])_0x5c12ec[_0x1c52c4(0x371)]=_0x49dd0f[_0x1c52c4(0x371)];else{}}_0x5c12ec[_0x1c52c4(0x389)]=_0x49dd0f['filled'],updateHighestFee(_0x5c12ec),_0x65a46e('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x4fcec9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4fcec9,blockTransactionDetection=![];}_0x5c12ec[_0x1c52c4(0x34a)]={'currency':_0x49dd0f[_0x1c52c4(0x34a)]?_0x49dd0f['fee'][_0x1c52c4(0x25a)]:null,'cost':_0x49dd0f[_0x1c52c4(0x34a)]?_0x49dd0f[_0x1c52c4(0x34a)][_0x1c52c4(0x2e5)]:0x0},await updateCoinResults(_0x5c12ec);}}}!_0x5856bc&&(logger[_0x1c52c4(0x35d)](_0x1c52c4(0x2b9)+_0x49dd0f['id']),_0x65a46e('filled'),blockTransactionDetection=![],await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1e39ee=JSON[_0x1c52c4(0x37a)](lastBalances[_0x1c52c4(0x2f6)]);const _0x487431=_0x1e39ee[_0x1c52c4(0x33a)](_0x4d2fb1=>_0x4d2fb1[_0x1c52c4(0x29c)]==_0x49dd0f['symbol']);if(_0x487431){if(_0x6bd081=='open')_0x487431[_0x1c52c4(0x30e)]=_0x487431[_0x1c52c4(0x30e)]=='filled'?'filled':_0x1c52c4(0x336);else{if(_0x6bd081==_0x1c52c4(0x302))_0x487431[_0x1c52c4(0x30e)]=_0x487431[_0x1c52c4(0x30e)]=='filled'?_0x1c52c4(0x389):'canceled';else _0x6bd081=='closed'&&(_0x487431['orderstatus']=_0x1c52c4(0x389));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1c52c4(0x224)](_0x1e39ee)},proxyEmit(_0x1c52c4(0x24f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2523fd=_0x4af43a;await getOpenOrders();let _0x30fc4e=![];currentCoins[_0x2523fd(0x249)](_0x48cad8=>{const _0x523f7b=_0x2523fd;_0x30fc4e=allOpenOrders['find'](_0x16c8ab=>_0x16c8ab[_0x523f7b(0x29c)]==_0x48cad8[_0x523f7b(0x29c)]),_0x48cad8[_0x523f7b(0x30e)]=_0x30fc4e?_0x523f7b(0x336):_0x523f7b(0x378);});}function _0xa712(){const _0x4ac173=['1\x20-\x20Handle\x20open\x20orders','Error\x20details:','Portfolio\x20change\x20detected:\x20','\x20attempts','USDP','<b>','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','************','bid','fees','privateKey','canceled','Bitget','Unfilled\x20order(s)\x20canceled\x20after\x20','exchange','unlinkSync','removed','colorscheme','/EUR','timeshift','Limit\x20(low-margin)','ID:\x20','RSA-OAEP','orderstatus','%\x20(','sort','createOrder','write','length','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','data','coin-loading-progress','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Error:\x20Invalid\x20argument\x20','spot','marketcap','62114QwXWzy','status','cancel','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','PAXG','ORDERS.UNLOCKED','ask','getCoinNumber()','string','bot','NetworkError','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20|\x20','datetime','path','net-fiat','restart','apiKey','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','date-fns','./config/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','change24h','ETH','Manual\x20balancing\x20required','event','open','max','\x20|\x20highest\x20fee:\x20','cancelOrder','find','getMonth','starting-balances','startprice','remainingSymbols','keys','BTC','OnMaintenance','has','Cex','realized','PermissionDenied','ORDERS.UNLOCKING','update-liquidity','shift','\x20>\x20','fee','stopExchange()','\x20has\x20a\x2024h\x20drop\x20of\x20','function','/output-000.log','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','DDoSProtection','UNLOCKING','2.6.0','Crypt','timeout','success','Limit\x20(high-margin)','map','2\x20-\x20Orders\x20unlocked','args','Exception\x20thrown\x20in\x20','EUR','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','debug','Pausing\x20for\x20','buy','\x20exchange\x20error','marketcapEnabled','Portfolio\x20change\x20detected\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','coins','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','recovery','storeFiat','indexOf','getOpenOrders()','\x20>\x20[DEBUG]\x20','OrderNotFound','emojisell','limit','./version.json','cloneDeep','headless','price','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','botname','includes','initclient','configuration-stored','\x20minutes','none','status\x20code\x20401','parse','watchTrades()','RETRY\x20-\x20Error\x20in\x20','Loading\x20completed','API-key\x20format\x20invalid','getDate','quote','onepagemode','./logs/','toString','4iGBrRH','.json','set','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','filled','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','startdate','delta','full','getHours','findIndex','placeOrder()','yyyy-MM-dd\x27T\x27HH:mm:ss','customId','performance','emitHistory','getPortfolio(0)','startnumber','cooldown',':\x20timer\x20>','exec','InvalidOrder','logs','Resetting\x20bot\x20history','Symbol(s):\x20','breakeven','\x20hour','RateLimitExceeded','\x20orders\x20in\x20less\x20than\x20','autoliquidity','min','test','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20portfolio:</b>\x20\x0a\x0a','Bybit','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','kill','openOrders','\x20|\x20exchange:\x20','bb-secure.json','7820utjPzX','percentage','average','(((.+)+)+)+$','Executed\x20','exchanges','replace','entries','2.3.5','time','last','basecoinvalue','10026AuDQhk','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','basecoin','Net\x20effect','limit-low','page','mkdirSync','trade','storeHeadless','process\x20','eur','toUpperCase','1\x20-\x20FILLED\x20known\x20order:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','assign','watchTrades','util','abs','exchange\x20reloaded','001','ccxt','6707540dGKZps','slice','exit','USD','milliseconds','format','closed','Transaction\x20detection\x20blocked','remove','RequestTimeout','add','2\x20-\x20handling\x20FILLED\x20order:\x20','memoryUsage','silentRestart','version','must\x20be\x20greater\x20than\x20minimum\x20amount','Order(s)\x20not\x20validated\x20after\x20','initial','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','number','sendPortfolioTelegram','7179IswnlB','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','push','Error\x20while\x20deleting\x20files:\x20','0\x20-\x20EXECUTION:\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','ORDERS.LOCKED','13ygEsMn','rightTxt','filter','Huobipro','stringify','1\x20-\x20Unlock\x20orders','Initiating\x20bot\x20restart','hybrid-crypto-js','amount','emojibuy','RETRY\x20-\x20Problem\x20resolved\x20after\x20','resetHistory','loadMarkets','watchTradesForSymbols',':\x20Bot\x20','\x20API\x20secret\x20is\x20invalid','net-basecoin','sell','watchOrders()','error','writeFile','placeOrder','differenceInSeconds','getMinutes','limit-high','pid','balancing\x20resumes\x20when\x20cooldown\x20ends','AuthenticationError','join','sqrt','InvalidNonce','total','uncaughtException',',\x20must\x20be\x20a\x203\x20digit\x20number','order','running','starting-balance-','No\x20more\x20open\x20orders\x20-\x20','<pre>','\x20:\x20','watchOrders','forEach','ExchangeNotAvailable','Trigger:\x20','getTime','Resetting\x20coin\x20results:\x20','argv','balances','final','storeConfiguration','recent20','\x20>\x20details:','yargs/yargs','pop','bots','toFixed','-------------------------------\x0a','type','currency','-results.json','pro','request-time','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','marketcapApi','MIN_NOTIONAL','Transaction\x20detection\x20unblocked','USDT','active','slider','recreateCoinResults()','Huobi','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','InsufficientFunds','existsSync','startsWith','fetchTickers','getPortfolio','target','orderId','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','-events.json','timestamp','</pre>','apiSecret','Binance','fetchOpenOrders','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchBalance','Unknown\x20error\x20occured','botID','Order\x20amount\x20is\x20invalid:\x20','\x20metrics:</b>\x20\x0a\x0a','toLowerCase','excluded','isEqual','loadSymbols()','exchange\x20not\x20reloaded','value','showname','get','threshold','warning','substring','distribution','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','\x20-\x20pausing\x20bot\x20for\x20','loading-canceled','/USD','split','25179CBHALg','reverse','liquidity','Bot\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','sortBy','send','bb-settings.json','yyyy/MM/dd','sha256','highest','random','changes','market','added','symbol','Waited\x20','Cryptocom','Invalid\x20symbol:\x20','round','5649344rirKiE','red_yellow_blue','showConfig','code','/backup/','usd','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','UNLOCKED','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','fiat','constructor','secure','market_cap','toggleBotMode','apply','change','offset','valid','fetchTickers()','buys','<b>Bot\x20','coin','3025anQTHD','1\x20-\x20FILLED\x20unknown\x20order:\x20','getSeconds','lowdb/adapters/FileSync','createWriteStream','configuration','sendMetricsTelegram','Invalid\x20quantity','bot-','sells','padStart','BNB/','decrypt','close','fromCodePoint','limits','netoffset','-performance.json','Exchange','no\x20open\x20orders','search','ExchangeError','leftTxt','enabled','BUSD','progress','message','defaults','getPortfolio(1)','splice','ongoing','cancelLoading','getCoins()','getFullYear','fetchClosedOrders','settings','side','Insufficient\x20funds\x20to\x20execute\x20order:\x20','***','marketcapsqrt','event-history','2.5.0','\x20-\x20bot\x20not\x20started','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fetchTicker','cost','getAllOrders()','log','6685785PNqWwt','2\x20-\x20Validate\x20orders:\x20','switch-manual','BNB','LOCKED','recreate','date','apiPassword','parseISO','1\x20-\x20Validate\x20orders:\x20','ordertype','\x20|\x20Custom\x20ID:\x20','Executing\x20exchange\x20reload','lowdb','portfolio'];_0xa712=function(){return _0x4ac173;};return _0xa712();}async function getCoins(_0x98339c=0x0,_0x1b8523=!![],_0x417929=config[_0x4af43a(0x1f1)]){const _0x341df1=_0x4af43a;let _0x46fff6,_0x1540b2=[],_0x394e46=[],_0x366f65=[];if(_0x98339c)await sleep(_0x98339c);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x46fff6=await exchange['fetchBalance'](),mybalances=_0x46fff6[_0x341df1(0x23f)];for(const [_0x13a08b,_0xd37a8f]of Object[_0x341df1(0x1ea)](mybalances)){_0x366f65[_0x341df1(0x21b)](_0x13a08b);}config[_0x341df1(0x2f6)][_0x341df1(0x249)](_0x33cbde=>{const _0x549f6b=_0x341df1;!_0x366f65[_0x549f6b(0x374)](_0x33cbde[_0x549f6b(0x2b7)])&&(mybalances[_0x33cbde[_0x549f6b(0x2b7)]]=0x0);});if(_0x417929=='')for(const [_0x1fe71e,_0x276f8e]of Object['entries'](mybalances)){_0x276f8e!=0x0&&_0x1540b2[_0x341df1(0x21b)]({'coin':_0x1fe71e});}else for(const [_0x37b3df,_0x379355]of Object['entries'](mybalances)){const _0x1dd343=config['portfolio'][_0x341df1(0x33a)](_0x3b19ae=>_0x3b19ae[_0x341df1(0x2b7)]==_0x37b3df),_0x5617d1=_0x37b3df+'/'+_0x417929,_0x4953e8=_0x417929+'/'+_0x37b3df,_0x388eb4=currentCoins[_0x341df1(0x33a)](_0x21d57d=>_0x21d57d[_0x341df1(0x2b7)]==_0x37b3df);if((_0x379355!=0x0||_0x1dd343)&&(allSymbols[_0x341df1(0x374)](_0x5617d1)||_0x37b3df==_0x417929))_0x388eb4?_0x1540b2[_0x341df1(0x21b)]({..._0x388eb4,'number':Math[_0x341df1(0x337)](_0x379355+(_0x1dd343&&_0x1dd343[_0x341df1(0x2b2)]||0x0),0x0)}):_0x1540b2['push']({'coin':_0x37b3df,'symbol':_0x5617d1,'reverse':![],'number':Math[_0x341df1(0x337)](_0x379355+(_0x1dd343&&_0x1dd343['offset']||0x0),0x0),'orderstatus':_0x341df1(0x378)});else{if((_0x379355!=0x0||_0x1dd343)&&allSymbols[_0x341df1(0x374)](_0x4953e8))_0x388eb4?_0x1540b2[_0x341df1(0x21b)]({..._0x388eb4,'number':Math[_0x341df1(0x337)](_0x379355+(_0x1dd343&&_0x1dd343['offset']||0x0),0x0)}):_0x1540b2[_0x341df1(0x21b)]({'coin':_0x37b3df,'symbol':_0x4953e8,'reverse':!![],'number':Math[_0x341df1(0x337)](_0x379355+(_0x1dd343&&_0x1dd343[_0x341df1(0x2b2)]||0x0),0x0),'orderstatus':_0x341df1(0x378)});else _0x1dd343&&_0x1540b2['push']({'coin':_0x1dd343[_0x341df1(0x2b7)],'symbol':_0x1dd343['symbol'],'reverse':_0x1dd343[_0x341df1(0x28e)],'number':0x0,'orderstatus':_0x341df1(0x378)});}}}catch(_0x3bccd7){if(!_0x1b8523)handleErrorNoStop(_0x3bccd7,_0x341df1(0x2d8));else await handleError(_0x3bccd7,'getCoins()');}return _0x1540b2[_0x341df1(0x310)]((_0x37c4e3,_0x283488)=>_0x37c4e3['delta']<_0x283488[_0x341df1(0x38c)]?0x1:_0x283488[_0x341df1(0x38c)]<_0x37c4e3[_0x341df1(0x38c)]?-0x1:0x0),_0x394e46=cloneDeep(_0x1540b2),_0x1540b2=_0x1540b2['filter'](_0xb31ae9=>{const _0x578494=_0x341df1,_0x4bc43a=config['portfolio']['find'](_0x2f1f04=>_0x2f1f04[_0x578494(0x2b7)]==_0xb31ae9[_0x578494(0x2b7)]);return _0x4bc43a&&!_0x4bc43a[_0x578494(0x27d)];}),[_0x1540b2,_0x394e46];}async function getCoinNumber(_0x4d7fcf){const _0x1d2d24=_0x4af43a;let _0x174312;try{const _0x3688c1=await exchange['fetchBalance']();_0x174312=_0x3688c1[_0x1d2d24(0x23f)][_0x4d7fcf];}catch(_0x1f6bd1){await handleError(_0x1f6bd1,_0x1d2d24(0x323));}return _0x174312;}async function getOpenOrders(){const _0x1e7238=_0x4af43a;let _0x6ba68c;allOpenOrders=[];try{for(const _0x42dfb4 of config[_0x1e7238(0x2f6)]){!_0x42dfb4['excluded']&&_0x42dfb4[_0x1e7238(0x2b7)]!=config[_0x1e7238(0x1f1)]&&(_0x6ba68c=await exchange[_0x1e7238(0x275)](_0x42dfb4[_0x1e7238(0x29c)]),_0x6ba68c[_0x1e7238(0x313)]>0x0&&allOpenOrders[_0x1e7238(0x21b)](_0x6ba68c[0x0]));}}catch(_0x3c4ed2){await handleError(_0x3c4ed2,_0x1e7238(0x369));}}async function handleOpenOrders(_0x3f6f73=0x0){const _0x42dd97=_0x4af43a;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x3f6f73==0x0?(logger[_0x42dd97(0x35d)](_0x42dd97(0x2f7)),_0x3f6f73++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x42dd97(0x35d)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x42dd97(0x2cb))));}async function testAPI(_0x3c3032){const _0x4cc62e=_0x4af43a,_0xc7a127=ccxt[_0x4cc62e(0x25c)][_0x3c3032[_0x4cc62e(0x305)][_0x4cc62e(0x27c)]()],_0x538ce7=new _0xc7a127({'apiKey':_0x3c3032[_0x4cc62e(0x32d)],'secret':_0x3c3032[_0x4cc62e(0x273)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4cc62e(0x319)}});if(_0x3c3032[_0x4cc62e(0x2ef)])_0x538ce7['password']=_0x3c3032[_0x4cc62e(0x2ef)];try{await _0x538ce7[_0x4cc62e(0x22c)]();}catch(_0x514809){throw _0x514809;}}function cloneDeep(_0x4529be){const _0x383cc8=_0x4af43a;return JSON[_0x383cc8(0x37a)](JSON['stringify'](_0x4529be));}async function getPortfolio(_0x4b9a7f){const _0x1a67c4=_0x4af43a;let _0x4fa873=[],_0x253750=[],_0x3e79b2=[],_0x1bb53f;if(_0x4b9a7f[_0x1a67c4(0x32d)]!==_0x1a67c4(0x2fe)||_0x4b9a7f[_0x1a67c4(0x273)]!==_0x1a67c4(0x2fe)||_0x4b9a7f[_0x1a67c4(0x2ef)]&&_0x4b9a7f[_0x1a67c4(0x2ef)]!==_0x1a67c4(0x2fe)){if(config['exchange']){if(_0x4b9a7f['apiKey']==_0x1a67c4(0x2fe))_0x4b9a7f['apiKey']=config[_0x1a67c4(0x32d)];if(_0x4b9a7f[_0x1a67c4(0x273)]==_0x1a67c4(0x2fe))_0x4b9a7f['apiSecret']=config[_0x1a67c4(0x273)];if(_0x4b9a7f['apiPassword']=='************')_0x4b9a7f[_0x1a67c4(0x2ef)]=config[_0x1a67c4(0x2ef)];try{await testAPI(_0x4b9a7f);}catch(_0x2e4393){if(_0x2e4393[_0x1a67c4(0x383)]()[_0x1a67c4(0x374)](_0x1a67c4(0x23b))){logger[_0x1a67c4(0x35d)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x1a67c4(0x2f6),![]);return;}else{handleError(_0x2e4393,_0x1a67c4(0x395));return;}}}await initExchange(_0x4b9a7f[_0x1a67c4(0x305)],_0x4b9a7f[_0x1a67c4(0x32d)],_0x4b9a7f['apiSecret'],_0x4b9a7f[_0x1a67c4(0x2ef)]);try{await loadSymbols();}catch(_0x4ba91c){if(_0x4ba91c['toString']()['includes'](_0x1a67c4(0x23b))){proxyEmit(_0x1a67c4(0x2f6),![]);return;}else{handleError(_0x4ba91c,_0x1a67c4(0x2d4));return;}}const _0x97958e=await getCoins(0x0,![],_0x4b9a7f[_0x1a67c4(0x1f1)]);_0x3e79b2=cloneDeep(_0x97958e[0x1]);}else{const _0x585e26=await getCoins();_0x3e79b2=cloneDeep(_0x585e26[0x1]);}if(_0x4b9a7f[_0x1a67c4(0x1f1)]=='')proxyEmit(_0x1a67c4(0x2f6),_0x3e79b2);else{_0x3e79b2['forEach'](_0x5887a9=>{const _0x1a16c4=_0x1a67c4;if(_0x5887a9['coin']!=_0x4b9a7f[_0x1a16c4(0x1f1)]&&allSymbols[_0x1a16c4(0x374)](_0x5887a9[_0x1a16c4(0x29c)]))_0x4fa873[_0x1a16c4(0x21b)](_0x5887a9['symbol']);});if(_0x4fa873[_0x1a67c4(0x313)]==0x0)logHistory(_0x1a67c4(0x233),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x253750=await getTickers(_0x4fa873);}catch(_0x249457){if(_0x249457['toString']()[_0x1a67c4(0x374)]('AuthenticationError')){proxyEmit(_0x1a67c4(0x2f6),![]);return;}else handleError(_0x249457,'getPortfolio(2)');}_0x3e79b2[_0x1a67c4(0x249)](_0x57cd6e=>{const _0x1844c2=_0x1a67c4;_0x57cd6e[_0x1844c2(0x2b7)]!=_0x4b9a7f[_0x1844c2(0x1f1)]?_0x253750[_0x57cd6e[_0x1844c2(0x29c)]]?_0x1bb53f=_0x57cd6e[_0x1844c2(0x28e)]?0x1/_0x253750[_0x57cd6e[_0x1844c2(0x29c)]][_0x1844c2(0x1ed)]:_0x253750[_0x57cd6e[_0x1844c2(0x29c)]][_0x1844c2(0x1ed)]:_0x1bb53f=0x0:_0x1bb53f=0x1,_0x57cd6e[_0x1844c2(0x371)]=formatResult(_0x1bb53f,0x8);}),await getMarketCap(_0x3e79b2),proxyEmit('portfolio',_0x3e79b2);}}}function truncateTradeAmount(_0x401af4,_0x3aa568){let _0x1a086e=0x0;try{_0x1a086e=exchange['amountToPrecision'](_0x401af4,_0x3aa568);}catch(_0x2dff66){}return _0x1a086e;}function checkMinimums(_0x18750c){const _0x4a157e=_0x4af43a;let _0x7cb745=!![];const _0x4f2e6a=!_0x18750c[_0x4a157e(0x28e)]?markets[_0x18750c['symbol']]['limits']['amount'][_0x4a157e(0x3a3)]:markets[_0x18750c[_0x4a157e(0x29c)]][_0x4a157e(0x2c7)][_0x4a157e(0x2e5)][_0x4a157e(0x3a3)],_0x579cc1=!_0x18750c['reverse']?markets[_0x18750c[_0x4a157e(0x29c)]]['limits'][_0x4a157e(0x2e5)][_0x4a157e(0x3a3)]:markets[_0x18750c[_0x4a157e(0x29c)]]['limits'][_0x4a157e(0x228)][_0x4a157e(0x3a3)],_0x4237d2=truncateTradeAmount(_0x18750c[_0x4a157e(0x29c)],_0x18750c[_0x4a157e(0x1f6)]);_0x18750c['trade']=_0x4237d2;if(Math['abs'](_0x4237d2)<_0x4f2e6a)_0x7cb745=![];if(Math[_0x4a157e(0x200)](_0x4237d2)*_0x18750c['last']<_0x579cc1)_0x7cb745=![];if(_0x18750c['side']==_0x4a157e(0x231)){let _0xbce329=config['portfolio'][_0x4a157e(0x33a)](_0x17ac08=>_0x17ac08[_0x4a157e(0x2b7)]==_0x18750c['coin']);if(_0xbce329[_0x4a157e(0x2b2)]>0x0){if(Math['abs'](_0x4237d2)>_0x18750c['number']-_0xbce329[_0x4a157e(0x2b2)])_0x7cb745=![];}else{if(Math[_0x4a157e(0x200)](_0x4237d2)>_0x18750c[_0x4a157e(0x217)])_0x7cb745=![];}}if(_0x18750c['side']==_0x4a157e(0x35f)){let _0x2414eb=config['portfolio'][_0x4a157e(0x33a)](_0x1a8e88=>_0x1a8e88['coin']==config[_0x4a157e(0x1f1)]),_0x291d83=currentCoins[_0x4a157e(0x33a)](_0x849d66=>_0x849d66[_0x4a157e(0x2b7)]==config['basecoin']);if(_0x2414eb['offset']>0x0){if(Math[_0x4a157e(0x200)](_0x4237d2)*_0x18750c[_0x4a157e(0x1ed)]>_0x291d83[_0x4a157e(0x217)]-_0x2414eb['offset'])_0x7cb745=![];}else{if(Math[_0x4a157e(0x200)](_0x4237d2)*_0x18750c[_0x4a157e(0x1ed)]>_0x291d83['number'])_0x7cb745=![];}}return _0x7cb745;}async function getBalances(_0x5a26db=!![]){const _0x5898de=_0x4af43a;let _0x269340=0x0,_0x75ae4e;const _0x4f0a72=config[_0x5898de(0x284)];if(config[_0x5898de(0x370)]&&config[_0x5898de(0x332)]<0x0)await validate24hChanges();currentCoins[_0x5898de(0x249)](_0x354f0f=>{const _0x371d28=_0x5898de;if(_0x354f0f[_0x371d28(0x2b7)]!=config[_0x371d28(0x1f1)]){let _0xcae94b=gTicker[noslash(_0x354f0f[_0x371d28(0x29c)])];_0x75ae4e=_0x354f0f[_0x371d28(0x28e)]?0x1/_0xcae94b:_0xcae94b;}else _0x75ae4e=0x1;let _0x53c693=_0x354f0f['number']*_0x75ae4e;_0x269340+=_0x53c693,_0x354f0f[_0x371d28(0x1ed)]=formatResult(Number(_0x75ae4e),0x8),_0x354f0f[_0x371d28(0x281)]=_0x53c693;}),currentCoins[_0x5898de(0x249)](_0xb2dd10=>{const _0x14b7e8=_0x5898de;let _0x29c93e=config['portfolio']['find'](_0x399ba5=>_0x399ba5[_0x14b7e8(0x2b7)]==_0xb2dd10[_0x14b7e8(0x2b7)]),_0x263b64=Number(_0x29c93e[_0x14b7e8(0x287)]),_0x56b7e1=_0xb2dd10['value']/_0x269340*0x64,_0x3c9f38=_0x263b64*_0x269340/0x64/_0xb2dd10[_0x14b7e8(0x1ed)]-_0xb2dd10[_0x14b7e8(0x217)];_0xb2dd10['distribution']=formatResult(_0x56b7e1,0x3),_0xb2dd10[_0x14b7e8(0x26d)]=formatResult(_0x263b64,0x3),_0xb2dd10[_0x14b7e8(0x1f6)]=formatResult(_0x3c9f38,0x8),_0xb2dd10[_0x14b7e8(0x2dc)]='',_0xb2dd10[_0x14b7e8(0x2b3)]=![];if(_0xb2dd10[_0x14b7e8(0x2b7)]!=config[_0x14b7e8(0x1f1)]){if(_0xb2dd10[_0x14b7e8(0x287)]>_0x263b64)_0xb2dd10[_0x14b7e8(0x2dc)]='sell',_0xb2dd10[_0x14b7e8(0x2b3)]=checkMinimums(_0xb2dd10);else _0xb2dd10[_0x14b7e8(0x287)]<_0x263b64&&(_0xb2dd10[_0x14b7e8(0x2dc)]=_0x14b7e8(0x35f),_0xb2dd10['valid']=checkMinimums(_0xb2dd10));}_0xb2dd10[_0x14b7e8(0x38c)]=_0xb2dd10['distribution']/_0xb2dd10['target']-0x1;if(_0xb2dd10['orderstatus']==_0x14b7e8(0x389)||_0xb2dd10['orderstatus']==_0x14b7e8(0x302))_0xb2dd10[_0x14b7e8(0x30e)]=_0x14b7e8(0x378);}),currentCoins[_0x5898de(0x310)]((_0x320c0d,_0x12bb64)=>_0x320c0d[_0x5898de(0x38c)]<_0x12bb64[_0x5898de(0x38c)]?0x1:_0x12bb64[_0x5898de(0x38c)]<_0x320c0d[_0x5898de(0x38c)]?-0x1:0x0);const _0x35d2c0=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x35d2c0[_0x5898de(0x1f9)],'usd':_0x35d2c0[_0x5898de(0x2a6)],'portfolio':JSON[_0x5898de(0x224)](currentCoins),'threshold':_0x4f0a72},proxyEmit(_0x5898de(0x24f),{'serverversion':serverversion,'balances':lastBalances});if(_0x5a26db){if(config[_0x5898de(0x370)])headlessMode({'portfolio':currentCoins,'threshold':_0x4f0a72});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4f0a72});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xde99aa=getNormalizedPerformance();getStartingBalances(_0xde99aa),emitPerformance(_0xde99aa);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x12330d=_0x4af43a;if(!lastBalances)return;let _0x500bc1=[],_0x1d71ae,_0x239375=JSON['parse'](lastBalances[_0x12330d(0x2f6)]);_0x239375[_0x12330d(0x310)]((_0x1a2650,_0x334cc5)=>_0x1a2650[_0x12330d(0x2b7)]>_0x334cc5[_0x12330d(0x2b7)]?0x1:_0x334cc5[_0x12330d(0x2b7)]>_0x1a2650[_0x12330d(0x2b7)]?-0x1:0x0),_0x239375['forEach'](_0x3eb00f=>{const _0x2d3970=_0x12330d;let _0x4fb4d6={'coin':_0x3eb00f[_0x2d3970(0x2b7)],'number':_0x3eb00f['number'],'price':_0x3eb00f[_0x2d3970(0x1ed)]};_0x500bc1[_0x2d3970(0x21b)](_0x4fb4d6);});const _0x5efed7=await getFiat();_0x1d71ae={'date':lastBalances[_0x12330d(0x1ec)][_0x12330d(0x28c)]('\x20')[0x0],'eur':_0x5efed7['eur'],'usd':_0x5efed7[_0x12330d(0x2a6)],'coins':_0x500bc1};let _0x4661b5=dbPerformance[_0x12330d(0x283)](_0x12330d(0x315))[_0x12330d(0x33a)]({'date':_0x1d71ae['date']})[_0x12330d(0x281)]();_0x4661b5?_0x1d71ae[_0x12330d(0x2ee)]!=config[_0x12330d(0x38b)]&&dbPerformance[_0x12330d(0x283)](_0x12330d(0x315))[_0x12330d(0x33a)]({'date':_0x1d71ae['date']})[_0x12330d(0x1fd)](_0x1d71ae)[_0x12330d(0x312)]():dbPerformance[_0x12330d(0x283)](_0x12330d(0x315))[_0x12330d(0x21b)](_0x1d71ae)[_0x12330d(0x312)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x221252=_0x4af43a;let _0x2e865d=[];if(dbPerformance[_0x221252(0x342)](_0x221252(0x315))[_0x221252(0x281)]()){let _0x59df0a=dbPerformance[_0x221252(0x283)](_0x221252(0x315))[_0x221252(0x36f)]()[_0x221252(0x222)](_0x2c7fbd=>{const _0x6cc759=_0x221252;if(_0x2c7fbd[_0x6cc759(0x364)][_0x6cc759(0x313)]==0x0)return![];else return!![];})[_0x221252(0x292)](_0x221252(0x2ee))['value'](),_0x4b5bc0=[...config[_0x221252(0x28f)]];_0x4b5bc0[_0x221252(0x310)]((_0x2d427e,_0x18a224)=>_0x2d427e['date']>_0x18a224[_0x221252(0x2ee)]?-0x1:_0x18a224[_0x221252(0x2ee)]>_0x2d427e[_0x221252(0x2ee)]?0x1:0x0);let _0x581b5b=0x1,_0x28a952=[],_0x5576d7=0x0;_0x59df0a['slice']()[_0x221252(0x28e)]()['forEach']((_0x2d2432,_0xc2dd15)=>{const _0x1d254b=_0x221252;if(_0x4b5bc0[_0x5576d7]){if(_0x59df0a[_0x59df0a[_0x1d254b(0x313)]-_0xc2dd15]&&_0x4b5bc0[_0x5576d7][_0x1d254b(0x2ee)]==_0x59df0a[_0x59df0a[_0x1d254b(0x313)]-_0xc2dd15][_0x1d254b(0x2ee)]){if(_0xc2dd15<_0x59df0a['length']){let _0x33e524=0x0,_0x552a67=0x0;_0x59df0a[_0x59df0a[_0x1d254b(0x313)]-_0xc2dd15][_0x1d254b(0x364)]['forEach'](_0x230f37=>{const _0x21abdb=_0x1d254b;_0x552a67+=_0x230f37[_0x21abdb(0x217)]*_0x230f37['price'];}),_0x4b5bc0[_0x5576d7]['changes']['forEach'](_0xdc4d71=>{const _0x203fca=_0x1d254b;_0x33e524+=_0xdc4d71[_0x203fca(0x217)]*_0xdc4d71[_0x203fca(0x371)];}),_0x581b5b*=_0x33e524/(_0x552a67-_0x33e524)+0x1;}_0x5576d7++;}}let _0x304eef=0x0;_0x2d2432[_0x1d254b(0x364)][_0x1d254b(0x249)](_0x19230d=>{const _0x3d1dd4=_0x1d254b;_0x304eef+=_0x19230d[_0x3d1dd4(0x217)]*_0x19230d['price'];}),_0x28a952[_0x59df0a[_0x1d254b(0x313)]-_0xc2dd15-0x1]=_0x304eef*(_0x581b5b-0x1);});let _0x4caed2=[];_0x4b5bc0=[...config['liquidity']]||[];let _0xf69897=0x0;_0x5576d7=0x0,_0x59df0a[_0x221252(0x249)]((_0x1be0f1,_0x1bc452)=>{const _0x9b8f04=_0x221252;if(_0x4b5bc0[_0x5576d7]){const _0x16a2f1=fns[_0x9b8f04(0x37a)](_0x4b5bc0[_0x5576d7]['date'],'yyyy/MM/dd',new Date()),_0x12e7a1=fns[_0x9b8f04(0x37a)](_0x1be0f1[_0x9b8f04(0x2ee)],_0x9b8f04(0x295),new Date());if(fns['isEqual'](_0x16a2f1,_0x12e7a1)){let _0x42b2ee=0x0;_0x4b5bc0[_0x5576d7][_0x9b8f04(0x299)][_0x9b8f04(0x249)](_0x5c8773=>{const _0x51cc7d=_0x9b8f04;!_0x4caed2[_0x5c8773['coin']]?_0x4caed2[_0x5c8773[_0x51cc7d(0x2b7)]]=_0x5c8773[_0x51cc7d(0x217)]:(_0x42b2ee=_0x4caed2[_0x5c8773[_0x51cc7d(0x2b7)]],_0x4caed2[_0x5c8773[_0x51cc7d(0x2b7)]]+=_0x5c8773[_0x51cc7d(0x217)]);const _0xa8ea57=_0x1be0f1['coins'][_0x51cc7d(0x33a)](_0x5beaed=>_0x5beaed[_0x51cc7d(0x2b7)]==_0x5c8773[_0x51cc7d(0x2b7)]);(!_0xa8ea57||_0xa8ea57['number']==0x0)&&(_0xf69897+=(-_0x5c8773['number']-_0x42b2ee)*_0x5c8773[_0x51cc7d(0x371)]);}),_0x5576d7++;}}_0x1be0f1['coins']['forEach']((_0x136988,_0x492bfe)=>{const _0x9b647b=_0x9b8f04;_0x4caed2[_0x136988[_0x9b647b(0x2b7)]]&&(_0x136988[_0x9b647b(0x215)]=_0x4caed2[_0x136988['coin']]);}),_0x2e865d[_0x9b8f04(0x21b)]({'date':_0x1be0f1[_0x9b8f04(0x2ee)],'eur':_0x1be0f1[_0x9b8f04(0x1f9)],'usd':_0x1be0f1[_0x9b8f04(0x2a6)],'offset':_0x28a952[_0x1bc452],'netoffset':_0xf69897,'coins':_0x1be0f1[_0x9b8f04(0x364)]});});}return _0x2e865d;}function emitPerformance(_0x1184f0){const _0x2448aa=_0x4af43a;_0x1184f0[_0x2448aa(0x313)]!==0x0?(proxyEmit('performance',_0x1184f0),lastPerformanceEmitted=getDate()):proxyEmit(_0x2448aa(0x393),[]);}function getPerf(_0x2d7831,_0x431e2a){const _0x5c6c42=_0x4af43a;let _0x32e529=0x0,_0xfca37=0x0,_0x6aff5c=0x0;_0x2d7831[_0x5c6c42(0x364)][_0x5c6c42(0x249)](_0x1ab812=>{const _0x375d5b=_0x5c6c42;_0x32e529+=_0x1ab812[_0x375d5b(0x217)]*_0x1ab812[_0x375d5b(0x371)];});_0x431e2a&&(_0x32e529+=_0x2d7831['offset']);if(config['basecoin']===_0x5c6c42(0x340)||config[_0x5c6c42(0x1f1)]==='ETH'||config[_0x5c6c42(0x1f1)]===_0x5c6c42(0x320))_0xfca37=_0x32e529*_0x2d7831[_0x5c6c42(0x1f9)],_0x6aff5c=_0x32e529*_0x2d7831[_0x5c6c42(0x2a6)];else{if(usdBasecoins[_0x5c6c42(0x374)](config[_0x5c6c42(0x1f1)]))_0xfca37=_0x32e529*_0x2d7831['eur']/_0x2d7831[_0x5c6c42(0x2a6)],_0x6aff5c=_0x32e529;else config[_0x5c6c42(0x1f1)]===_0x5c6c42(0x35b)&&(_0xfca37=_0x32e529,_0x6aff5c=_0x32e529*_0x2d7831[_0x5c6c42(0x2a6)]/_0x2d7831[_0x5c6c42(0x1f9)]);}return[_0x32e529,_0xfca37,_0x6aff5c];}function getKPIs(_0x10ae75,_0x402e70='EUR'){const _0x190293=_0x4af43a,_0x192f7e=config[_0x190293(0x1f1)],_0x524e2d=lastBalances,_0x28f35a=currentCoins,_0x6a911e=getNormalizedPerformance(),_0x3532cb=_0x10ae75===_0x190293(0x1f1)?_0x192f7e:_0x10ae75===_0x190293(0x2ab)||_0x10ae75===_0x190293(0x32b)?_0x402e70:'Net\x20'+_0x192f7e,_0x54f72d=_0x10ae75===_0x190293(0x230)?_0x190293(0x1f2):_0x10ae75===_0x190293(0x32b)?_0x190293(0x1f2):_0x3532cb+'\x20value',_0x1840ee=_0x10ae75==='net-basecoin'||_0x10ae75===_0x190293(0x32b)?'Net\x20effect':_0x3532cb+'\x20change';let _0x505857=0x0;_0x28f35a[_0x190293(0x249)](_0x11464f=>{const _0xa727be=_0x190293;_0x505857+=_0x11464f[_0xa727be(0x217)]*_0x11464f['last'];});if(_0x10ae75===_0x190293(0x2ab)||_0x10ae75===_0x190293(0x32b)){if(_0x192f7e===_0x190293(0x340)||_0x192f7e===_0x190293(0x333)||_0x192f7e===_0x190293(0x320))_0x505857=_0x505857*(_0x402e70===_0x190293(0x35b)?_0x524e2d[_0x190293(0x1f9)]:_0x524e2d[_0x190293(0x2a6)]);else{if(usdBasecoins[_0x190293(0x374)](_0x192f7e))_0x505857=_0x505857*(_0x402e70==='EUR'?_0x524e2d['eur']/_0x524e2d[_0x190293(0x2a6)]:0x1);else _0x192f7e===_0x190293(0x35b)&&(_0x505857=_0x505857*(_0x402e70===_0x190293(0x35b)?0x1:_0x524e2d[_0x190293(0x2a6)]/_0x524e2d[_0x190293(0x1f9)]));}}let _0x36ddcd;if(_0x505857!==0x0){if(_0x10ae75===_0x190293(0x1f1))_0x36ddcd=(_0x505857/startingBalances[_0x190293(0x1f1)]-0x1)*0x64;else{if(_0x402e70===_0x190293(0x35b))_0x36ddcd=(_0x505857/startingBalances[_0x190293(0x1f9)]-0x1)*0x64;else _0x36ddcd=(_0x505857/startingBalances[_0x190293(0x2a6)]-0x1)*0x64;}let _0x3178e1=0x0;if(startingBalances[_0x190293(0x364)])_0x28f35a[_0x190293(0x249)](_0x8c7eab=>{const _0x621322=_0x190293;let _0x4262f7=startingBalances[_0x621322(0x364)]['find'](_0xd4fa8=>_0xd4fa8['coin']===_0x8c7eab[_0x621322(0x2b7)]);if(_0x4262f7&&_0x4262f7[_0x621322(0x2b7)]&&_0x8c7eab[_0x621322(0x217)]!==0x0)_0x3178e1+=_0x4262f7['number']*_0x8c7eab['last'];});let _0x277e1b=0x0;if(_0x6a911e[_0x190293(0x313)]!==0x0){let _0x23f373=_0x6a911e[_0x6a911e['length']-0x1];_0x277e1b=_0x23f373[_0x190293(0x2c8)];}_0x3178e1-=_0x277e1b;_0x10ae75===_0x190293(0x230)&&(_0x36ddcd=(_0x505857-_0x3178e1)/startingBalances['basecoin']*0x64,_0x505857=_0x505857-_0x3178e1);if(_0x10ae75===_0x190293(0x32b)){let _0x389b7a=_0x402e70===_0x190293(0x35b)?startingBalances[_0x190293(0x1f9)]:startingBalances[_0x190293(0x2a6)];if(_0x192f7e===_0x190293(0x340)||_0x192f7e===_0x190293(0x333)||_0x192f7e===_0x190293(0x320))_0x3178e1=_0x402e70==='EUR'?_0x3178e1*_0x524e2d['eur']:_0x3178e1*_0x524e2d[_0x190293(0x2a6)];else{if(usdBasecoins['includes'](_0x192f7e))_0x3178e1=_0x402e70===_0x190293(0x35b)?_0x3178e1*_0x524e2d[_0x190293(0x1f9)]/_0x524e2d[_0x190293(0x2a6)]:_0x3178e1;else _0x192f7e===_0x190293(0x35b)&&(_0x3178e1=_0x402e70==='EUR'?_0x3178e1:_0x3178e1*_0x524e2d['usd']/_0x524e2d[_0x190293(0x1f9)]);}_0x36ddcd=(_0x505857-_0x3178e1)/_0x389b7a*0x64,_0x505857=_0x505857-_0x3178e1;}if(_0x36ddcd){if(_0x36ddcd<0x64)_0x36ddcd=_0x36ddcd[_0x190293(0x257)](0x2);else{if(_0x36ddcd<0x3e8)_0x36ddcd=_0x36ddcd['toFixed'](0x1);else _0x36ddcd=_0x36ddcd[_0x190293(0x257)](0x0);}}else _0x36ddcd=Number('0')[_0x190293(0x257)](0x2);if(_0x505857){if(Math[_0x190293(0x200)](_0x505857)<0.000001)_0x505857=_0x505857[_0x190293(0x257)](0x2);else{if(Math[_0x190293(0x200)](_0x505857)<0.1)_0x505857=_0x505857[_0x190293(0x257)](0x6);else{if(Math[_0x190293(0x200)](_0x505857)<0x1)_0x505857=_0x505857[_0x190293(0x257)](0x5);else{if(Math[_0x190293(0x200)](_0x505857)<0xa)_0x505857=_0x505857[_0x190293(0x257)](0x4);else{if(Math[_0x190293(0x200)](_0x505857)<0x64)_0x505857=_0x505857[_0x190293(0x257)](0x3);else{if(Math['abs'](_0x505857)<0x3e8)_0x505857=_0x505857[_0x190293(0x257)](0x2);else _0x505857=_0x505857[_0x190293(0x257)](0x2);}}}}}}else _0x505857=Number('0')[_0x190293(0x257)](0x2);}else _0x36ddcd=Number('0')[_0x190293(0x257)](0x2);return{'value':_0x505857,'change':_0x36ddcd,'leftTxt':_0x54f72d,'rightTxt':_0x1840ee};}async function getStartingBalances(_0x5dde1d,_0x7b525e=!![]){const _0x14d59c=_0x4af43a;if(_0x5dde1d['length']!==0x0){const [_0x23853f,_0x4ed176,_0x2a4d53]=getPerf(_0x5dde1d[0x0],!![]);let _0x28ad54=[];config[_0x14d59c(0x2f6)]['forEach'](_0x23878a=>{const _0x194d50=_0x14d59c;let _0xafdaab=0x0,_0x1e1379;config[_0x194d50(0x28f)][_0x194d50(0x249)](_0x103295=>{const _0x5b9d54=_0x194d50;let _0x37a578=_0x103295[_0x5b9d54(0x299)][_0x5b9d54(0x33a)](_0x273e18=>_0x273e18[_0x5b9d54(0x2b7)]==_0x23878a[_0x5b9d54(0x2b7)]);if(_0x37a578){_0xafdaab+=_0x37a578['number'];if(!_0x1e1379)_0x1e1379=_0x37a578[_0x5b9d54(0x371)];}}),_0x28ad54['push']({'coin':_0x23878a[_0x194d50(0x2b7)],'number':_0xafdaab,'initialprice':_0x1e1379});});const _0x2c249f={'basecoin':_0x23853f,'eur':_0x4ed176,'usd':_0x2a4d53,'coins':_0x28ad54};if(_0x7b525e)proxyEmit(_0x14d59c(0x33c),_0x2c249f);startingBalances=_0x2c249f;}}function headlessMode(_0x43cf1d){const _0x4ec0fa=_0x4af43a;let _0x553bc9=_0x43cf1d[_0x4ec0fa(0x2f6)],_0x4c7b8b=_0x43cf1d[_0x4ec0fa(0x284)],_0x4fae41=[];for(let _0x27f34e of _0x553bc9){if(_0x27f34e[_0x4ec0fa(0x2b7)]!=config[_0x4ec0fa(0x1f1)]){if(_0x27f34e[_0x4ec0fa(0x38c)]>=_0x4c7b8b/0x64){if(_0x27f34e[_0x4ec0fa(0x2b3)])_0x4fae41[_0x4ec0fa(0x21b)](_0x27f34e);}else{if(_0x27f34e[_0x4ec0fa(0x38c)]<=-_0x4c7b8b/0x64){if(_0x27f34e[_0x4ec0fa(0x2b3)])_0x4fae41[_0x4ec0fa(0x21b)](_0x27f34e);}}}}_0x4fae41[_0x4ec0fa(0x313)]>0x0&&(lockOrders==ORDERS[_0x4ec0fa(0x2a8)]&&!coolingDown&&_0x4fae41[_0x4ec0fa(0x249)](_0x5d55c6=>{const _0x1de868=_0x4ec0fa;logger[_0x1de868(0x35d)](_0x1de868(0x24b)+_0x5d55c6[_0x1de868(0x2b7)]+'\x20'+_0x5d55c6[_0x1de868(0x217)]+'\x20'+_0x5d55c6[_0x1de868(0x1ed)]+'\x20'+_0x5d55c6['distribution']+'%\x20'+_0x5d55c6[_0x1de868(0x26d)]+'%\x20'+(0x64*_0x5d55c6[_0x1de868(0x38c)])[_0x1de868(0x257)](0x2)+'%\x20('+_0x4c7b8b[_0x1de868(0x257)](0x2)+'%)');}),placeOrder(_0x4fae41));}function notifyBalance(_0x26d834){const _0x59fe3a=_0x4af43a;let _0x31dbe5=_0x26d834[_0x59fe3a(0x2f6)],_0x2917d2=_0x26d834[_0x59fe3a(0x284)],_0x1d4934=[];for(let _0xc0923c of _0x31dbe5){if(_0xc0923c[_0x59fe3a(0x2b7)]!=config[_0x59fe3a(0x1f1)]){if(_0xc0923c[_0x59fe3a(0x38c)]>=_0x2917d2/0x64){if(_0xc0923c[_0x59fe3a(0x2b3)])_0x1d4934[_0x59fe3a(0x21b)](_0xc0923c);}else{if(_0xc0923c[_0x59fe3a(0x38c)]<=-_0x2917d2/0x64){if(_0xc0923c[_0x59fe3a(0x2b3)])_0x1d4934['push'](_0xc0923c);}}}}if(_0x1d4934[_0x59fe3a(0x313)]>0x0){let _0x24ffe6=_0x1d4934['map'](_0x3154a4=>_0x3154a4[_0x59fe3a(0x2b7)]);_0x24ffe6[_0x59fe3a(0x310)]();let _0x5efd29=_0x24ffe6[_0x59fe3a(0x23c)](',\x20');if(!lastCoinsToBalance)logHistory(_0x59fe3a(0x285),_0x59fe3a(0x334));lastCoinsToBalance=_0x5efd29;}}function symbolToCoin(_0x368d49){const _0x261625=_0x4af43a;let _0x2637a1;if(_0x368d49[_0x261625(0x374)]('/'+config[_0x261625(0x1f1)]))_0x2637a1=_0x368d49[_0x261625(0x1e9)]('/'+config[_0x261625(0x1f1)],'');if(_0x368d49[_0x261625(0x374)](config[_0x261625(0x1f1)]+'/'))_0x2637a1=_0x368d49[_0x261625(0x1e9)](config[_0x261625(0x1f1)]+'/','');return _0x2637a1;}async function unlockOrders(){const _0x288a6b=_0x4af43a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x288a6b(0x2ec)]){logger[_0x288a6b(0x35d)](_0x288a6b(0x225)),lockOrders=ORDERS[_0x288a6b(0x351)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x179a0d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x179a0d,blockTransactionDetection=![],validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x288a6b(0x2a8)],logger[_0x288a6b(0x35d)](_0x288a6b(0x358));}}async function validateOrders(_0x36f0db){const _0x24f389=_0x4af43a;if(_0x36f0db)validateOrdersState=_0x36f0db;logger['debug'](_0x24f389(0x2f1)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x24f389(0x21f):lockOrders==0x2?_0x24f389(0x346):_0x24f389(0x321)));let _0x2bbc1c=[],_0x2107a7=config[_0x24f389(0x2f2)]==_0x24f389(0x29a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x24f389(0x354)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x24f389(0x2e9)+validateOrdersState),lastOrders[_0x24f389(0x249)](_0x4faa32=>{const _0x1fbb0b=_0x24f389;let _0x146d6d=![];_0x4faa32[_0x1fbb0b(0x389)]>0x0&&(_0x146d6d=!![]),_0x2bbc1c[_0x1fbb0b(0x21b)](_0x146d6d),_0x146d6d&&config[_0x1fbb0b(0x2f2)]!='market'&&logHistory(_0x1fbb0b(0x242),'Order\x20filled:\x20'+_0x4faa32['symbol']+'\x20'+_0x4faa32[_0x1fbb0b(0x2dc)]+'\x20#'+formatResult(_0x4faa32[_0x1fbb0b(0x389)],0x8)+'\x20@'+formatResult(_0x4faa32[_0x1fbb0b(0x371)],0x8));}),_0x2bbc1c[_0x24f389(0x249)]((_0x2625df,_0x6ecdc2)=>{const _0x34cb7d=_0x24f389;if(_0x2625df)lastOrders[_0x34cb7d(0x2d5)](_0x6ecdc2,0x1);}),persistOpenOrders(lastOrders);const _0x524d5e=coolingDown?_0x24f389(0x23a):'balancing\x20resumed';if(validateOrdersState==_0x24f389(0x215)){validateOrdersState='ongoing';if(_0x2bbc1c[_0x24f389(0x374)](![])){if(config['ordertype']==_0x24f389(0x29a)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x24f389(0x2d6)){if(_0x2bbc1c[_0x24f389(0x374)](![])){}else{if(allOrdersPlaced){if(config[_0x24f389(0x2f2)]==_0x24f389(0x29a)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x2bbc1c[_0x24f389(0x374)](![])&&(config['ordertype']==_0x24f389(0x29a)?logHistory(_0x24f389(0x355),_0x24f389(0x214)+Math[_0x24f389(0x2a0)](_0x2107a7*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x524d5e):(await cancelOrders(),logHistory(_0x24f389(0x355),_0x24f389(0x304)+Math[_0x24f389(0x2a0)](_0x2107a7*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x524d5e))),await unlockOrders();else{if(validateOrdersState==_0x24f389(0x2cb)){if(config[_0x24f389(0x2f2)]!=_0x24f389(0x29a))logHistory(_0x24f389(0x355),_0x24f389(0x245)+_0x524d5e);await unlockOrders();}}}}}async function cancelOrders(){const _0x4a10a1=_0x4af43a;lastOrders[_0x4a10a1(0x249)](async _0x57ab6c=>{const _0x44853b=_0x4a10a1;try{const _0x4a0b26=await exchange[_0x44853b(0x339)](_0x57ab6c[_0x44853b(0x26e)],_0x57ab6c[_0x44853b(0x29c)]);}catch(_0x2fe5bc){if(_0x2fe5bc['toString']()['includes'](_0x44853b(0x36b))){}else await handleError(_0x2fe5bc,'cancelOrders()');}});}async function initCoinResults(_0x136d72){const _0x5ca6a0=_0x4af43a;_0x136d72?logger[_0x5ca6a0(0x35d)](_0x5ca6a0(0x24d)+_0x136d72):logger[_0x5ca6a0(0x35d)]('Initializing\x20coin\x20results'),config[_0x5ca6a0(0x2f6)]['forEach'](_0x56c881=>{const _0x468d6d=_0x5ca6a0;if(!_0x56c881[_0x468d6d(0x27d)]&&_0x56c881[_0x468d6d(0x2b7)]!=config[_0x468d6d(0x1f1)]){const _0x5271df=currentCoins['find'](_0x353a5a=>_0x353a5a[_0x468d6d(0x2b7)]==_0x56c881['coin']),_0xba0889=gTicker[noslash(_0x56c881['symbol'])];let _0x5bd7ea=_0x5271df?_0x5271df[_0x468d6d(0x217)]:null,_0x5f1253=_0x56c881[_0x468d6d(0x28e)]?0x1/_0xba0889:_0xba0889,_0xf4a7a4;config[_0x468d6d(0x28f)][_0x468d6d(0x249)](_0x5cfe94=>{const _0x5c94fe=_0x468d6d;!_0xf4a7a4&&(_0xf4a7a4=_0x5cfe94[_0x5c94fe(0x299)][_0x5c94fe(0x33a)](_0x4b14b7=>_0x4b14b7[_0x5c94fe(0x2b7)]==_0x56c881[_0x5c94fe(0x2b7)]),_0xf4a7a4&&(_0x5bd7ea=_0xf4a7a4[_0x5c94fe(0x217)],_0x5f1253=_0xf4a7a4[_0x5c94fe(0x371)]));});let _0x2a67e2=dbCoinResults[_0x468d6d(0x283)](_0x468d6d(0x364))['find']({'coin':_0x56c881[_0x468d6d(0x2b7)]})['value']();if(!_0x2a67e2){const _0x142603={'coin':_0x56c881['coin'],'number':_0x5bd7ea,'breakeven':_0x5f1253,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x468d6d(0x283)](_0x468d6d(0x364))[_0x468d6d(0x21b)](_0x142603)['write']();}else{if(_0x136d72&&_0x56c881['coin']==_0x136d72){const _0x5a5de0={'coin':_0x56c881[_0x468d6d(0x2b7)],'number':_0x5bd7ea,'breakeven':_0x5f1253,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x468d6d(0x364))[_0x468d6d(0x33a)]({'coin':_0x56c881[_0x468d6d(0x2b7)]})[_0x468d6d(0x1fd)](_0x5a5de0)[_0x468d6d(0x312)]();}}}});}async function updateCoinResults(_0x8847e5,_0x3d9b3b=![]){const _0x1d338c=_0x4af43a;let _0x345eb6,_0x1d866e,_0x4df7d0,_0x3cc60a,_0x186297,_0x38df80,_0x17cf32=dbCoinResults[_0x1d338c(0x283)](_0x1d338c(0x364))[_0x1d338c(0x33a)]({'coin':_0x8847e5[_0x1d338c(0x2b7)]})[_0x1d338c(0x281)](),_0x228de8=![];_0x17cf32&&Object['entries'](_0x17cf32)[_0x1d338c(0x249)](([_0x20cd94,_0x449f4f])=>{if(_0x449f4f==null)_0x228de8=!![];});(!_0x17cf32||_0x228de8)&&(await initCoinResults(_0x8847e5[_0x1d338c(0x2b7)]),_0x17cf32=dbCoinResults[_0x1d338c(0x283)](_0x1d338c(0x364))[_0x1d338c(0x33a)]({'coin':_0x8847e5[_0x1d338c(0x2b7)]})[_0x1d338c(0x281)]());_0x8847e5[_0x1d338c(0x28e)]&&(_0x38df80={'filled':_0x8847e5[_0x1d338c(0x389)]*_0x8847e5['price'],'amount':_0x8847e5[_0x1d338c(0x389)]*_0x8847e5[_0x1d338c(0x371)],'side':_0x8847e5[_0x1d338c(0x2dc)]==_0x1d338c(0x231)?_0x1d338c(0x35f):'sell','price':0x1/_0x8847e5[_0x1d338c(0x371)]},_0x8847e5={..._0x8847e5,..._0x38df80});_0x3d9b3b?_0x1d866e=_0x8847e5['side']==_0x1d338c(0x35f)?_0x17cf32[_0x1d338c(0x217)]+_0x8847e5[_0x1d338c(0x389)]:_0x17cf32[_0x1d338c(0x217)]-_0x8847e5[_0x1d338c(0x389)]:_0x1d866e=await getCoinNumber(_0x8847e5[_0x1d338c(0x2b7)]);if(_0x8847e5[_0x1d338c(0x34a)]&&_0x8847e5[_0x1d338c(0x34a)]['currency']==config[_0x1d338c(0x1f1)])_0x345eb6=Number(_0x8847e5[_0x1d338c(0x34a)][_0x1d338c(0x2e5)]);else{if(_0x8847e5[_0x1d338c(0x34a)]&&_0x8847e5['fee'][_0x1d338c(0x25a)]==_0x1d338c(0x2eb)&&!_0x3d9b3b&&config[_0x1d338c(0x1f1)]!='PAXG')_0x345eb6=Number(_0x8847e5[_0x1d338c(0x34a)][_0x1d338c(0x2e5)])*gTicker['BNB'+config[_0x1d338c(0x1f1)]];else _0x345eb6=defaultFee*_0x8847e5['filled']*_0x8847e5[_0x1d338c(0x371)];}_0x8847e5[_0x1d338c(0x2dc)]==_0x1d338c(0x35f)?(_0x4df7d0=_0x1d866e!=0x0?(_0x17cf32[_0x1d338c(0x39e)]*_0x17cf32[_0x1d338c(0x217)]+_0x8847e5[_0x1d338c(0x371)]*(_0x1d866e-_0x17cf32[_0x1d338c(0x217)])+_0x345eb6)/_0x1d866e:0x0,_0x3cc60a=_0x17cf32[_0x1d338c(0x344)]):(_0x4df7d0=_0x1d866e!=0x0?(_0x17cf32[_0x1d338c(0x39e)]*_0x17cf32[_0x1d338c(0x217)]-_0x8847e5[_0x1d338c(0x371)]*(_0x17cf32[_0x1d338c(0x217)]-_0x1d866e)+_0x345eb6)/_0x1d866e:0x0,_0x3cc60a=_0x17cf32[_0x1d338c(0x344)]+(_0x8847e5[_0x1d338c(0x371)]-_0x17cf32[_0x1d338c(0x39e)])*_0x8847e5['filled']);_0x186297=(_0x8847e5['price']-_0x4df7d0-_0x345eb6/_0x8847e5[_0x1d338c(0x389)])*_0x1d866e;let _0x172920={'coin':_0x8847e5[_0x1d338c(0x2b7)],'number':_0x1d866e,'breakeven':formatResult(_0x4df7d0,0x8),'realized':formatResult(_0x3cc60a,0x8),'unrealized':formatResult(_0x186297,0x8),'fees':formatResult(_0x17cf32[_0x1d338c(0x300)]+_0x345eb6,0x8),'sells':_0x8847e5[_0x1d338c(0x2dc)]==_0x1d338c(0x231)?_0x17cf32['sells']+0x1:_0x17cf32[_0x1d338c(0x2c1)],'buys':_0x8847e5[_0x1d338c(0x2dc)]==_0x1d338c(0x35f)?_0x17cf32[_0x1d338c(0x2b5)]+0x1:_0x17cf32[_0x1d338c(0x2b5)]};dbCoinResults['get'](_0x1d338c(0x364))[_0x1d338c(0x33a)]({'coin':_0x8847e5[_0x1d338c(0x2b7)]})[_0x1d338c(0x1fd)](_0x172920)[_0x1d338c(0x312)]();if(!_0x3d9b3b){if(_0x8847e5[_0x1d338c(0x34a)]&&_0x8847e5[_0x1d338c(0x34a)][_0x1d338c(0x25a)]==_0x1d338c(0x2eb)){const _0x6cdfa1=currentCoins[_0x1d338c(0x33a)](_0x172c74=>_0x172c74['coin']==_0x1d338c(0x2eb));if(_0x6cdfa1){let _0x40303a=dbCoinResults[_0x1d338c(0x283)](_0x1d338c(0x364))[_0x1d338c(0x33a)]({'coin':_0x1d338c(0x2eb)})[_0x1d338c(0x281)]();_0x172920={..._0x40303a,'number':_0x6cdfa1[_0x1d338c(0x217)]},dbCoinResults[_0x1d338c(0x283)](_0x1d338c(0x364))[_0x1d338c(0x33a)]({'coin':_0x1d338c(0x2eb)})[_0x1d338c(0x1fd)](_0x172920)[_0x1d338c(0x312)]();}}}}async function placeOrder(_0x3ff38d){const _0x311046=_0x4af43a,_0x47809b=config[_0x311046(0x2f2)]=='market'?_0x311046(0x29a):_0x311046(0x36d);if(lockOrders==ORDERS[_0x311046(0x2a8)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x311046(0x2ec)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x311046(0x215);let _0x4d380e=![];lastOrders=[];for(const _0x2951ea of _0x3ff38d){let _0x96ab31,_0x22dd75,_0xc23f5d,_0x4a2f54,_0x43aafc,_0x49b9b5=_0x2951ea[_0x311046(0x29c)];try{const _0x164d9f=await exchange[_0x311046(0x2e4)](_0x49b9b5);_0x96ab31=_0x2951ea['reverse']?0x1/_0x2951ea[_0x311046(0x1ed)]:_0x2951ea[_0x311046(0x1ed)],_0x22dd75=_0x164d9f[_0x311046(0x2ff)],_0xc23f5d=_0x164d9f[_0x311046(0x322)];_0x2951ea[_0x311046(0x28e)]?(_0x4a2f54=_0x2951ea[_0x311046(0x2dc)]==_0x311046(0x35f)?_0x311046(0x231):_0x311046(0x35f),_0x43aafc=Math[_0x311046(0x200)](_0x2951ea[_0x311046(0x1f6)])/_0x96ab31):(_0x4a2f54=_0x2951ea[_0x311046(0x2dc)],_0x43aafc=Math[_0x311046(0x200)](_0x2951ea[_0x311046(0x1f6)]));_0x47809b==_0x311046(0x36d)&&(config[_0x311046(0x2f2)]==_0x311046(0x238)&&(_0x96ab31=_0x4a2f54=='buy'?_0x22dd75:_0xc23f5d),config['ordertype']==_0x311046(0x1f3)&&(_0x96ab31=_0x4a2f54==_0x311046(0x35f)?_0xc23f5d:_0x22dd75));_0x43aafc=formatResult(_0x43aafc,0x8),_0x96ab31=formatResult(_0x96ab31,0x8);const _0x50bbe2=_0x4a2f54==_0x311046(0x231)?config[_0x311046(0x36c)]?String[_0x311046(0x2c6)]('0x'+config[_0x311046(0x36c)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x311046(0x229)])+'\x20':'',_0x10435e=_0x47809b==_0x311046(0x29a)?'Market':config['ordertype']==_0x311046(0x238)?_0x311046(0x356):_0x311046(0x30b),_0x31b4fb=(Math['floor'](Math[_0x311046(0x298)]()*0x35a4e900)+0x5f5e100)[_0x311046(0x383)]();lastOrders[_0x311046(0x21b)]({'customId':_0x31b4fb,'symbol':_0x49b9b5,'coin':_0x2951ea[_0x311046(0x2b7)],'amount':_0x43aafc,'price':_0x96ab31,'side':_0x4a2f54,'reverse':_0x2951ea['reverse'],'filled':0x0});if(_0x47809b==_0x311046(0x29a))logHistory(_0x311046(0x242),''+_0x50bbe2+_0x10435e+'\x20order:\x20'+_0x49b9b5+'\x20'+_0x4a2f54+'\x20#'+formatResult(_0x43aafc,0x8)+'\x20@'+formatResult(_0x96ab31,0x8));else logHistory(_0x311046(0x242),''+_0x50bbe2+_0x10435e+'\x20order:\x20'+_0x49b9b5+'\x20'+_0x4a2f54+'\x20#'+formatResult(_0x43aafc,0x8)+'\x20@'+formatResult(_0x96ab31,0x8));let _0x326a22;_0x47809b==_0x311046(0x29a)?_0x4a2f54==_0x311046(0x35f)&&[_0x311046(0x3a7),_0x311046(0x303),_0x311046(0x343),_0x311046(0x266),_0x311046(0x223)][_0x311046(0x374)](config[_0x311046(0x305)])?_0x326a22=await exchange[_0x311046(0x311)](_0x49b9b5,_0x47809b,_0x4a2f54,_0x43aafc,_0x96ab31):_0x326a22=await exchange[_0x311046(0x311)](_0x49b9b5,_0x47809b,_0x4a2f54,_0x43aafc,undefined):_0x326a22=await exchange[_0x311046(0x311)](_0x49b9b5,_0x47809b,_0x4a2f54,_0x43aafc,_0x96ab31);logger[_0x311046(0x35d)](_0x311046(0x30c)+_0x326a22['id']+_0x311046(0x2f3)+_0x31b4fb);const _0x4bb821=lastOrders['length']-0x1;if(_0x4bb821>=0x0&&lastOrders[_0x4bb821][_0x311046(0x392)]==_0x31b4fb){lastOrders[_0x4bb821][_0x311046(0x26e)]=_0x326a22['id'];if(_0x326a22[_0x311046(0x228)])lastOrders[_0x4bb821][_0x311046(0x228)]=_0x326a22['amount'];if(_0x326a22[_0x311046(0x371)])lastOrders[_0x4bb821][_0x311046(0x371)]=_0x326a22[_0x311046(0x371)];lastOrders[_0x4bb821]['fee']=_0x326a22[_0x311046(0x34a)];}if(config[_0x311046(0x397)]!=0x0){let _0x10c6cb=null;if(cooldownTracker[_0x311046(0x313)]==config[_0x311046(0x397)]-0x1)_0x10c6cb=cooldownTracker[_0x311046(0x348)]();const _0x535e9b=getTimeStamp();cooldownTracker[_0x311046(0x21b)](_0x535e9b);if(_0x10c6cb){const _0x558228=fns[_0x311046(0x236)](new Date(_0x535e9b),new Date(_0x10c6cb));if(_0x558228<cooldownInterval){logHistory('error',_0x311046(0x1e7)+config['cooldown']+_0x311046(0x3a1)+cooldownInterval/0x3c+_0x311046(0x31f)+cooldownPeriod/(0xe10*0x3e8)+_0x311046(0x39f)),coolingDown=!![];break;}}}}catch(_0x38b1f4){if(_0x38b1f4[_0x311046(0x383)]()[_0x311046(0x374)](_0x311046(0x260)))lastOrders=lastOrders['filter'](_0xb7638b=>_0xb7638b[_0x311046(0x29c)]!=_0x49b9b5),logHistory('error',_0x311046(0x2a9)+_0x49b9b5),_0x4d380e=!![];else{if(_0x38b1f4[_0x311046(0x383)]()[_0x311046(0x374)](_0x311046(0x2bf)))lastOrders=lastOrders[_0x311046(0x222)](_0x6f57de=>_0x6f57de['symbol']!=_0x49b9b5),logHistory(_0x311046(0x233),_0x311046(0x27a)+_0x49b9b5),_0x4d380e=!![];else{if(_0x38b1f4[_0x311046(0x383)]()['includes'](_0x311046(0x39a)))lastOrders=lastOrders[_0x311046(0x222)](_0xb3b666=>_0xb3b666[_0x311046(0x29c)]!=_0x49b9b5),logHistory(_0x311046(0x233),'Order\x20is\x20invalid:\x20'+_0x49b9b5),logger[_0x311046(0x35d)](_0x38b1f4),_0x4d380e=!![];else _0x38b1f4[_0x311046(0x383)]()['includes'](_0x311046(0x213))?(lastOrders=lastOrders[_0x311046(0x222)](_0x25452e=>_0x25452e[_0x311046(0x29c)]!=_0x49b9b5),logHistory(_0x311046(0x233),_0x311046(0x2a9)+_0x49b9b5),_0x4d380e=!![]):(lastOrders=lastOrders['filter'](_0x438b70=>_0x438b70[_0x311046(0x29c)]!=_0x49b9b5),await handleError(_0x38b1f4,_0x311046(0x390),_0x49b9b5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x96b078=config[_0x311046(0x2f2)]==_0x311046(0x29a)?validateOrderTimeout*0x3c*0x3e8:config[_0x311046(0x354)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1875c9=_0x311046;validateOrders(_0x1875c9(0x250));},_0x96b078);}else unlockOrders();_0x4d380e&&config['headless']&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x311046(0x355),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x311046(0x370)]&&logHistory(_0x311046(0x233),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0x311046(0x2f2)]==_0x311046(0x29a)?logHistory(_0x311046(0x233),_0x311046(0x331)):logHistory(_0x311046(0x233),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x4b6aff){const _0xbe3315=_0x4af43a,_0xb34209={...config,'openOrders':_0x4b6aff};let _0x29f884=dbConfig[_0xbe3315(0x283)]('bot')[_0xbe3315(0x33a)]({'botID':botID})[_0xbe3315(0x281)]();_0x29f884&&dbConfig[_0xbe3315(0x283)](_0xbe3315(0x325))[_0xbe3315(0x33a)]({'botID':botID})[_0xbe3315(0x1fd)](_0xb34209)[_0xbe3315(0x312)]();}function restoreOrders(){const _0x2935fc=_0x4af43a;let _0x29ca3c;config['openOrders']&&allOpenOrders[_0x2935fc(0x249)](_0x199d57=>{const _0x447cde=_0x2935fc,_0x39b843=config[_0x447cde(0x3aa)][_0x447cde(0x33a)](_0x31c234=>_0x31c234[_0x447cde(0x26e)]==_0x199d57['id']);_0x39b843&&(lastOrders[_0x447cde(0x21b)](_0x39b843),_0x29ca3c=_0x199d57[_0x447cde(0x271)]);});if(lastOrders[_0x2935fc(0x313)]>0x0){lockOrders=ORDERS[_0x2935fc(0x2ec)],validateOrdersState=_0x2935fc(0x2d6),allOrdersPlaced=!![];const _0x23c25b=new Date()[_0x2935fc(0x24c)](),_0x3b5178=config[_0x2935fc(0x2f2)]==_0x2935fc(0x29a)?validateOrderTimeout*0x3c*0x3e8:config[_0x2935fc(0x354)]*0x3c*0x3e8;if(_0x29ca3c+_0x3b5178>_0x23c25b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x495940=_0x2935fc;validateOrders(_0x495940(0x250));},_0x29ca3c+_0x3b5178-_0x23c25b);}else validateOrders(_0x2935fc(0x250));}}async function sendMetricsTelegram(){const _0x168251=_0x4af43a;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x442b3b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x34f5c4='';if(config[_0x168251(0x282)])_0x34f5c4=_0x168251(0x2fc)+config[_0x168251(0x373)]+_0x168251(0x27b);else _0x34f5c4=_0x168251(0x2b6)+botID+_0x168251(0x27b);const _0x1d4666=getKPIs(_0x168251(0x1f1)),_0x20684a=getKPIs(_0x168251(0x2ab),config[_0x168251(0x2ab)]),_0x4ef20b=getKPIs(_0x168251(0x230)),_0x562364=getKPIs(_0x168251(0x32b),config[_0x168251(0x2ab)]);_0x34f5c4+=_0x168251(0x246),_0x34f5c4+=_0x1d4666[_0x168251(0x2ce)]+_0x168251(0x247)+_0x1d4666[_0x168251(0x281)]+'\x0a',_0x34f5c4+=_0x1d4666['rightTxt']+':\x20'+_0x1d4666[_0x168251(0x2b1)]+'%\x0a',_0x34f5c4+=_0x20684a[_0x168251(0x2ce)]+_0x168251(0x247)+_0x20684a['value']+'\x0a',_0x34f5c4+=_0x20684a[_0x168251(0x221)]+':\x20'+_0x20684a['change']+'%\x0a',_0x34f5c4+=_0x4ef20b[_0x168251(0x2ce)]+':\x20'+_0x4ef20b['value']+'\x20('+config[_0x168251(0x1f1)]+')\x0a',_0x34f5c4+=_0x4ef20b[_0x168251(0x221)]+':\x20'+_0x4ef20b[_0x168251(0x2b1)]+_0x168251(0x30f)+config[_0x168251(0x1f1)]+')\x0a',_0x34f5c4+=_0x562364['leftTxt']+':\x20'+_0x562364['value']+'\x20('+config[_0x168251(0x2ab)]+')\x0a',_0x34f5c4+=_0x562364[_0x168251(0x221)]+':\x20'+_0x562364[_0x168251(0x2b1)]+_0x168251(0x30f)+config[_0x168251(0x2ab)]+')\x0a',_0x34f5c4+=_0x168251(0x272),process[_0x168251(0x293)]({'telegrammsg':_0x34f5c4},_0x19d557=>{});}async function sendPortfolioTelegram(){const _0x5175b9=_0x4af43a;if(!coinsLoaded||!currentCoins[0x0][_0x5175b9(0x287)]){process[_0x5175b9(0x293)]({'telegrammsg':_0x5175b9(0x21e)},_0x4e4393=>{});return;}let _0x5f34bf='';if(config[_0x5175b9(0x282)])_0x5f34bf=_0x5175b9(0x2fc)+config['botname']+_0x5175b9(0x3a6);else _0x5f34bf=_0x5175b9(0x2b6)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5f34bf+=_0x5175b9(0x246),_0x5f34bf+=_0x5175b9(0x258),_0x5f34bf+=_0x5175b9(0x1f0),_0x5f34bf+=_0x5175b9(0x258),currentCoins[_0x5175b9(0x249)](_0x27c8d0=>{const _0x4b417f=_0x5175b9;_0x5f34bf+=_0x27c8d0[_0x4b417f(0x2b7)]['padEnd'](0x7)+'|\x20'+formatPad(_0x27c8d0['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x27c8d0[_0x4b417f(0x26d)],0x2,0x6)+'|\x20'+formatPad(_0x27c8d0[_0x4b417f(0x38c)]*0x64,0x2,0x6)+'\x0a';}),_0x5f34bf+='</pre>',process['send']({'telegrammsg':_0x5f34bf},_0xbb1b0a=>{});}function formatPad(_0x436aaa,_0x378515,_0x24d71b){const _0x4ff0bb=_0x4af43a,_0xfc96f1=formatResultString(_0x436aaa,_0x378515);return _0xfc96f1?_0xfc96f1['padStart'](_0x24d71b):''[_0x4ff0bb(0x2c2)](_0x24d71b);}function logHistory(_0x4bf4b8,_0x24b51d,_0x465b41=''){const _0x1ce59d=_0x4af43a;logger[_0x1ce59d(0x38d)](''+_0x24b51d);let _0x202482={'time':getTimeStamp(),'type':_0x4bf4b8,'event':_0x24b51d};dbLogs['get']('logs')['push'](_0x202482)[_0x1ce59d(0x312)]();if(_0x465b41=='')_0x465b41=_0x24b51d;proxyEmit('event',{'log':_0x202482,'summary':_0x465b41}),process[_0x1ce59d(0x293)]({'telegram':{..._0x202482,'botname':config[_0x1ce59d(0x373)],'showname':config['showname']}},_0xcb4b9a=>{});}function emitHistory(_0x46453e={}){const _0x53acf5=_0x4af43a;Object[_0x53acf5(0x33f)](_0x46453e)[_0x53acf5(0x313)]==0x0&&(_0x46453e={'type':[_0x53acf5(0x242),_0x53acf5(0x335)],'event':'','page':0x1});if(_0x46453e[_0x53acf5(0x259)]['includes'](_0x53acf5(0x335)))_0x46453e['type'][_0x53acf5(0x2d5)](_0x46453e[_0x53acf5(0x259)][_0x53acf5(0x368)](_0x53acf5(0x335)),0x1,_0x53acf5(0x233),_0x53acf5(0x285),'success');if(dbLogs[_0x53acf5(0x342)]('logs')[_0x53acf5(0x281)]()){let _0x51e099=dbLogs[_0x53acf5(0x283)](_0x53acf5(0x39b))[_0x53acf5(0x222)](_0x36d01b=>{const _0x520d9c=_0x53acf5;if(_0x46453e['type'][_0x520d9c(0x313)]==0x0)return![];else return _0x46453e[_0x520d9c(0x259)][_0x520d9c(0x374)](_0x36d01b[_0x520d9c(0x259)]);})[_0x53acf5(0x222)](_0x5b3c74=>{const _0x20ec87=_0x53acf5;if(_0x46453e[_0x20ec87(0x335)]=='')return!![];else return _0x5b3c74['event']['toLowerCase']()[_0x20ec87(0x374)](_0x46453e['event'][_0x20ec87(0x27c)]());})[_0x53acf5(0x292)](_0x53acf5(0x1ec)),_0x4ffd91=_0x51e099[_0x53acf5(0x281)]()[_0x53acf5(0x313)];_0x51e099=_0x51e099[_0x53acf5(0x28e)]()[_0x53acf5(0x205)]((_0x46453e['page']-0x1)*logPageSize,_0x46453e[_0x53acf5(0x1f4)]*logPageSize-0x1)[_0x53acf5(0x28e)]()[_0x53acf5(0x281)](),proxyEmit(_0x53acf5(0x2e0),{'logs':_0x51e099,'total':_0x4ffd91});}else proxyEmit(_0x53acf5(0x2e0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x574c00){const _0x27547a=_0x4af43a;if(dbLogs[_0x27547a(0x342)]('logs')['value']()){const _0x9909c3=dbLogs[_0x27547a(0x283)]('logs')[_0x27547a(0x292)](_0x27547a(0x1ec))[_0x27547a(0x222)](_0x551790=>{const _0x38e37e=_0x27547a;return _0x551790[_0x38e37e(0x259)]==_0x38e37e(0x242);})[_0x27547a(0x281)]();dbLogs[_0x27547a(0x283)]('logs')[_0x27547a(0x20c)]()[_0x27547a(0x312)](),dbLogs['get'](_0x27547a(0x39b))[_0x27547a(0x1fd)](_0x9909c3)[_0x27547a(0x312)](),emitHistory(_0x574c00);}}async function pauseBot(_0x323a86=pauseBotIntervalShort,_0x2c8d44){const _0x5eb5d4=_0x4af43a,_0xcacf76=new Date()[_0x5eb5d4(0x24c)]();if(!lastErrorShown||_0xcacf76-lastErrorShown>=_0x323a86){lastErrorShown=_0xcacf76;!lastBotPause?(lastBotPause=_0xcacf76,consecutivePauses=0x1):(_0xcacf76-lastBotPause-_0x323a86<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x5eb5d4(0x233),_0x2c8d44+pauseBotMsg),_0x323a86=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0xcacf76);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await sleep(_0x323a86),botPaused=![],reset(![]);}}}async function killBot(){const _0xde23e1=_0x4af43a;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0xde23e1(0x3a9)},_0x2c7197=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1f8b8c,_0x3a4811){const _0xee2649=_0x4af43a;if(botPaused)return;const _0x4244cd=config[_0xee2649(0x305)]||_0xee2649(0x2ca);if(_0x3a4811)logger['debug'](_0xee2649(0x35a)+_0x3a4811);const _0x56db55=()=>{const _0x50187f=_0xee2649;loading[_0x50187f(0x233)]=!![],emitLoadingProgress();};if(_0x1f8b8c[_0xee2649(0x383)]()[_0xee2649(0x374)](_0xee2649(0x37e)))logHistory(_0xee2649(0x233),_0x4244cd+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x56db55();else{if(_0x1f8b8c[_0xee2649(0x383)]()['includes'](_0xee2649(0x2e3)))logHistory(_0xee2649(0x233),_0x4244cd+_0xee2649(0x1fc)),_0x56db55();else _0x1f8b8c[_0xee2649(0x383)]()['includes'](_0xee2649(0x23b))?(logHistory(_0xee2649(0x233),_0x4244cd+_0xee2649(0x35c)),logHistory(_0xee2649(0x233),_0xee2649(0x314)),_0x56db55()):await handleError(_0x1f8b8c,null);}}async function handleError(_0x780d55,_0x35d46d,_0x36a2e5=''){const _0x2ff4ff=_0x4af43a;if(botPaused)return;let _0x1139d5;const _0x159f63=config[_0x2ff4ff(0x305)]||_0x2ff4ff(0x2ca);if(_0x35d46d)logger[_0x2ff4ff(0x35d)]('Exception\x20thrown\x20in\x20'+_0x35d46d);if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x350)))_0x1139d5=_0x159f63+_0x2ff4ff(0x2a7),logger[_0x2ff4ff(0x35d)](_0x1139d5+_0x2ff4ff(0x253),_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()['includes'](_0x2ff4ff(0x3a0)))_0x1139d5=_0x159f63+_0x2ff4ff(0x25e),logger['debug'](_0x1139d5+_0x2ff4ff(0x253),_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()['includes'](_0x2ff4ff(0x24a))||_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x341)))_0x1139d5=_0x159f63+_0x2ff4ff(0x365),logger[_0x2ff4ff(0x35d)](_0x1139d5+_0x2ff4ff(0x253),_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x20d)))_0x1139d5=_0x159f63+_0x2ff4ff(0x216),logger[_0x2ff4ff(0x35d)](_0x1139d5+_0x2ff4ff(0x253),_0x780d55['toString']()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x317)))_0x1139d5=_0x159f63+_0x2ff4ff(0x34f),logger[_0x2ff4ff(0x35d)](_0x1139d5+'\x20>\x20details:',_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x27c)]()['includes'](_0x2ff4ff(0x271))||_0x780d55['toString']()[_0x2ff4ff(0x27c)]()['includes'](_0x2ff4ff(0x25d)))_0x1139d5=_0x2ff4ff(0x288),logger[_0x2ff4ff(0x35d)](_0x1139d5+'\x20>\x20details:',_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x23e)))_0x1139d5=_0x159f63+_0x2ff4ff(0x327),logger[_0x2ff4ff(0x35d)](_0x1139d5+_0x2ff4ff(0x253),_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55 instanceof ccxt[_0x2ff4ff(0x326)])_0x1139d5=_0x159f63+'\x20network\x20error',logger['debug'](_0x1139d5+'\x20>\x20details:',_0x780d55[_0x2ff4ff(0x383)]()),await pauseBot(undefined,_0x1139d5);else{if(_0x780d55['toString']()[_0x2ff4ff(0x374)](_0x2ff4ff(0x37e)))logHistory(_0x2ff4ff(0x233),_0x159f63+'\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x2e3)))logHistory('error',_0x159f63+_0x2ff4ff(0x22f)),logHistory(_0x2ff4ff(0x233),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x780d55['toString']()['includes'](_0x2ff4ff(0x23b)))logHistory(_0x2ff4ff(0x233),_0x159f63+_0x2ff4ff(0x276)),logHistory(_0x2ff4ff(0x233),_0x2ff4ff(0x26f)),await killBot();else{if(_0x780d55['toString']()[_0x2ff4ff(0x374)](_0x2ff4ff(0x345)))logHistory('error',_0x159f63+_0x2ff4ff(0x21a)),logHistory(_0x2ff4ff(0x233),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x780d55[_0x2ff4ff(0x383)]()[_0x2ff4ff(0x374)](_0x2ff4ff(0x268)))logHistory('error',_0x2ff4ff(0x2dd)+_0x36a2e5);else{if(_0x780d55 instanceof ccxt[_0x2ff4ff(0x2cd)]){logHistory(_0x2ff4ff(0x233),_0x159f63+_0x2ff4ff(0x360)),logger[_0x2ff4ff(0x35d)](_0x2ff4ff(0x2f8),_0x780d55);if(_0x36a2e5)logger[_0x2ff4ff(0x35d)](_0x2ff4ff(0x39d)+_0x36a2e5);}else{_0x1139d5=_0x2ff4ff(0x278),logger['debug'](_0x1139d5+_0x2ff4ff(0x253),_0x780d55);if(_0x36a2e5)logger[_0x2ff4ff(0x35d)](_0x2ff4ff(0x39d)+_0x36a2e5);await pauseBot(undefined,_0x1139d5);}}}}}}}}}}}}}}}async function withRetry(_0x154b22,_0x8745ab){const _0x264d12=_0x4af43a;let _0x5a081b=![],_0x16f263=0x0,_0x410dd8,_0x4825d4;while(_0x16f263<maxRetries){try{_0x410dd8=await _0x8745ab();break;}catch(_0x144bfe){_0x4825d4=_0x144bfe,!_0x5a081b?(_0x5a081b=!![],logger[_0x264d12(0x35d)](_0x264d12(0x37c)+_0x154b22+':',_0x144bfe[_0x264d12(0x383)]())):await sleep(retryInterval);}_0x16f263++;}if(_0x16f263==0x0)return _0x410dd8;if(_0x16f263>=maxRetries)throw _0x4825d4;else return logger[_0x264d12(0x35d)](_0x264d12(0x22a)+_0x16f263+_0x264d12(0x2fa)),_0x410dd8;}function formatResult(_0xb38407,_0x5568f5){const _0x2d90cd=_0x4af43a;return parseFloat(_0xb38407[_0x2d90cd(0x257)](_0x5568f5));}function formatResultTruncate(_0x4dfcdc,_0x4edb9c){const _0x32358b=_0x4af43a;let _0x153830=formatResultString(_0x4dfcdc,0xa),_0x41d1e9=_0x153830[_0x32358b(0x368)]('.');return _0x41d1e9!=-0x1&&(_0x153830=_0x153830[_0x32358b(0x205)](0x0,_0x41d1e9+_0x4edb9c+0x1)),Number(_0x153830);}function formatResultString(_0x153bd3,_0x9abea0){const _0x513339=_0x4af43a;let _0x1e663c;if(!(''+_0x153bd3)[_0x513339(0x374)]('e'))_0x1e663c=+(Math[_0x513339(0x2a0)](_0x153bd3+'e+'+_0x9abea0)+'e-'+_0x9abea0);else{let _0x28c10a=(''+_0x153bd3)[_0x513339(0x28c)]('e'),_0x3474ed='';+_0x28c10a[0x1]+_0x9abea0>0x0&&(_0x3474ed='+'),_0x1e663c=+(Math[_0x513339(0x2a0)](+_0x28c10a[0x0]+'e'+_0x3474ed+(+_0x28c10a[0x1]+_0x9abea0))+'e-'+_0x9abea0);}return Number(_0x1e663c)[_0x513339(0x257)](_0x9abea0);}function getServerTime(){const _0x346423=_0x4af43a,_0x640e55=new Date();return _0x640e55[_0x346423(0x2d9)]()+'/'+(_0x640e55[_0x346423(0x33b)]()+0x1)[_0x346423(0x383)]()[_0x346423(0x2c2)](0x2,'0')+'/'+_0x640e55[_0x346423(0x37f)]()[_0x346423(0x383)]()[_0x346423(0x2c2)](0x2,'0')+'\x20'+_0x640e55[_0x346423(0x38e)]()[_0x346423(0x383)]()['padStart'](0x2,'0')+':'+_0x640e55['getMinutes']()[_0x346423(0x383)]()['padStart'](0x2,'0')+':'+_0x640e55[_0x346423(0x2ba)]()[_0x346423(0x383)]()[_0x346423(0x2c2)](0x2,'0');}function getTimeStamp(){const _0x4d0ca6=_0x4af43a,_0x476b6b=shiftedTime();return _0x476b6b['getFullYear']()+'/'+(_0x476b6b['getMonth']()+0x1)['toString']()[_0x4d0ca6(0x2c2)](0x2,'0')+'/'+_0x476b6b[_0x4d0ca6(0x37f)]()[_0x4d0ca6(0x383)]()[_0x4d0ca6(0x2c2)](0x2,'0')+'\x20'+_0x476b6b['getHours']()[_0x4d0ca6(0x383)]()['padStart'](0x2,'0')+':'+_0x476b6b[_0x4d0ca6(0x237)]()[_0x4d0ca6(0x383)]()['padStart'](0x2,'0')+':'+_0x476b6b[_0x4d0ca6(0x2ba)]()[_0x4d0ca6(0x383)]()[_0x4d0ca6(0x2c2)](0x2,'0');}function getDate(){const _0x109370=_0x4af43a,_0x372419=shiftedTime();return _0x372419[_0x109370(0x2d9)]()+'/'+(_0x372419[_0x109370(0x33b)]()+0x1)[_0x109370(0x383)]()[_0x109370(0x2c2)](0x2,'0')+'/'+_0x372419[_0x109370(0x37f)]()[_0x109370(0x383)]()[_0x109370(0x2c2)](0x2,'0');}function getHour(){const _0x2fabe0=_0x4af43a,_0x5d0536=shiftedTime();return _0x5d0536[_0x2fabe0(0x38e)]()['toString']()[_0x2fabe0(0x2c2)](0x2,'0');}function sleep(_0xc16dce){return new Promise(_0x2f190e=>setTimeout(_0x2f190e,_0xc16dce));}function shiftedTime(){const _0x2d98d8=_0x4af43a,_0x23dc1e=new Date();let _0x3176f2=_0x23dc1e;if(config&&config[_0x2d98d8(0x30a)]!==0x0)_0x3176f2=fns[_0x2d98d8(0x20e)](_0x23dc1e,{'hours':config[_0x2d98d8(0x30a)]});return _0x3176f2;}function timer(_0x4c6638){const _0x1936dd=_0x4af43a,_0xece9fd=new Date();!lasttime?console[_0x1936dd(0x2e7)](getTimeStamp()+_0x1936dd(0x398),_0x4c6638,_0xece9fd):console[_0x1936dd(0x2e7)](getTimeStamp()+_0x1936dd(0x398),_0x4c6638,(_0xece9fd-lasttime)/0x3e8),lasttime=_0xece9fd;}