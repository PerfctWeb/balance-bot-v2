const _0x1f5be6=_0x4367;(function(_0x1c184e,_0x100d5e){const _0x37c062=_0x4367,_0x58d04d=_0x1c184e();while(!![]){try{const _0x5df729=parseInt(_0x37c062(0x378))/0x1+-parseInt(_0x37c062(0x323))/0x2+-parseInt(_0x37c062(0x247))/0x3*(parseInt(_0x37c062(0x1eb))/0x4)+-parseInt(_0x37c062(0x28d))/0x5+parseInt(_0x37c062(0x200))/0x6+-parseInt(_0x37c062(0x227))/0x7+-parseInt(_0x37c062(0x336))/0x8*(-parseInt(_0x37c062(0x35b))/0x9);if(_0x5df729===_0x100d5e)break;else _0x58d04d['push'](_0x58d04d['shift']());}catch(_0x531c9b){_0x58d04d['push'](_0x58d04d['shift']());}}}(_0x3af0,0x552fc));const _0x41526d=function(){let _0x8012a=!![];return function(_0x3611f1,_0x149b41){const _0x1e86b9=_0x8012a?function(){const _0x40d225=_0x4367;if(_0x149b41){const _0x5e8fdc=_0x149b41[_0x40d225(0x215)](_0x3611f1,arguments);return _0x149b41=null,_0x5e8fdc;}}:function(){};return _0x8012a=![],_0x1e86b9;};}(),_0x181837=_0x41526d(this,function(){const _0x16f312=_0x4367;return _0x181837[_0x16f312(0x2bb)]()['search'](_0x16f312(0x37b))[_0x16f312(0x2bb)]()['constructor'](_0x181837)[_0x16f312(0x36e)](_0x16f312(0x37b));});_0x181837();'use strict';const ccxt=require(_0x1f5be6(0x290)),low=require(_0x1f5be6(0x209)),FileSync=require(_0x1f5be6(0x261)),fs=require('fs'),fns=require(_0x1f5be6(0x23d)),Crypt=require(_0x1f5be6(0x32c))[_0x1f5be6(0x26c)],util=require(_0x1f5be6(0x346)),argv=require(_0x1f5be6(0x36d))(process[_0x1f5be6(0x328)][_0x1f5be6(0x35c)](0x2))[_0x1f5be6(0x328)],path=require(_0x1f5be6(0x32a));let exchange;global[_0x1f5be6(0x2e4)]={},global['change']={};const usdBasecoins=[_0x1f5be6(0x2fa),_0x1f5be6(0x1f3),_0x1f5be6(0x2ae),_0x1f5be6(0x28a),_0x1f5be6(0x26b),_0x1f5be6(0x294)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1f5be6(0x353)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1f5be6(0x31f)+pauseBotInterval/0xea60+_0x1f5be6(0x218),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1f5be6(0x34f))[_0x1f5be6(0x1ed)],botID=process['argv'][0x2]||_0x1f5be6(0x29f),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x1f5be6(0x2f2)](_0x1f5be6(0x2e0)+botID+_0x1f5be6(0x2b6)),killBot());const userID=process[_0x1f5be6(0x328)][0x3]||'',configpath=userID?_0x1f5be6(0x269)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x1f5be6(0x2cf)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x1f5be6(0x231)](configpath);!fs[_0x1f5be6(0x270)](logspath)&&fs[_0x1f5be6(0x231)](logspath);const configfile=configpath+_0x1f5be6(0x30f)+botID+_0x1f5be6(0x295),logfile=configpath+_0x1f5be6(0x30f)+botID+_0x1f5be6(0x202),performancefile=configpath+_0x1f5be6(0x30f)+botID+_0x1f5be6(0x32f),coinresultsfile=configpath+_0x1f5be6(0x30f)+botID+'-results.json',settingsfile=configpath+_0x1f5be6(0x333),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1f5be6(0x303),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x1f5be6(0x2ba)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1f5be6(0x311)]({'data':[],'version':serverversion})[_0x1f5be6(0x2ba)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1f5be6(0x311)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1f5be6(0x311)]({'coins':[],'version':serverversion})['write']();function _0x3af0(){const _0x4efd68=['Balance\x20Bot\x20does\x20not\x20support\x20the\x20','hybrid-crypto-js','Initializing\x20coin\x20results','<b>Bot\x20','-performance.json','must\x20be\x20greater\x20than\x20minimum\x20amount','storeConfiguration','final','bb-settings.json','breakeven','BTC','453008sOwnqH','headless','toLowerCase','filter','***','fetchTickers()','\x20|\x20highest\x20fee:\x20','Exchange','/EUR','ORDERS.UNLOCKED','InvalidNonce','autoliquidity','sell','highest','exchange\x20not\x20reloaded','.json','util','\x20metrics:</b>\x20\x0a\x0a','status','args','emojibuy','stringify','padStart','fetchOpenOrders','max','./version.json','unlinkSync','red_yellow_blue','recovery','UNLOCKED','watchTransactions()','has','exchange','settings','getAllOrders()','total','initial','207bmFTYW','slice',':\x20Bot\x20','recreateCoinResults()','limit-low','threshold','************','order','full','2\x20-\x20Orders\x20unlocked','placeOrder()','time','apiSecret','Trigger:\x20','delta','rightTxt','apiPassword','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','yargs/yargs','search','leftTxt','toUpperCase','getMonth','assign','\x20|\x20Custom\x20ID:\x20','placeOrder','event','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Manual\x20balancing\x20required','615119WbaAqW','random','change','(((.+)+)+)+$','coin-loading-progress','Transaction\x20detection\x20unblocked','sendPortfolioTelegram','openOrders',':\x20timer\x20>','cancelLoading','Executed\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','Limit\x20(high-margin)','RateLimitExceeded','85124xbhulK','fromCodePoint','version','eur','ExchangeNotAvailable','fetchClosedOrders','starting-balance-','0\x20-\x20EXECUTION:\x20','BUSD','startprice','Error\x20details:','Unknown\x20error\x20occured','usd','Binance','substring','distribution','market','getPortfolio(0)','\x20orders\x20in\x20less\x20than\x20','API-key\x20format\x20invalid','\x20|\x20exchange:\x20','673350QCOcfj','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','-events.json','target','entries','%\x20(','cancelOrders()','canceled','change24h','lowdb','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','valid','fee','performance','apiKey','timeout','\x20:\x20','fetchTickers','getDate','watchTrades','portfolio','apply','Loading\x20completed','\x20order:\x20','\x20minutes','\x20closed\x20the\x20connection','bots','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Net\x20effect','logs','-------------------------------\x0a','Market','set','watchTrades()','decrypt','sendMetricsTelegram','\x20has\x20a\x2024h\x20drop\x20of\x20','balancing\x20resumed','active','2027648fprSyx','cloneDeep','getHours','error','datetime','watchOrders','getStartingBalances','coin','startsWith','Order\x20is\x20invalid:\x20','mkdirSync','\x20-\x20bot\x20not\x20started','indexOf','bot','timeshift','InvalidOrder','sort','recent20','colorscheme','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','cost','percentage','date-fns','\x20|\x20','2\x20-\x20Validate\x20orders:\x20','find','netoffset','storeFiat','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','added','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','2.3.5','6SUeqEx','Reset\x20|\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','basecoinvalue','<b>','map','secure','1\x20-\x20FILLED\x20known\x20order:\x20','initTickers()','offset','exec','Waited\x20','differenceInSeconds','cooldown','get','getCoins()','shift','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','restart','Cex','getPortfolio(2)','format','Invalid\x20quantity','function','sortBy','BNB','lowdb/adapters/FileSync','Net\x20','number','keys','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','reverse','replace','side','./config/','2.5.0','USDC','Crypt','sells','realized','Limit\x20(low-margin)','existsSync','currency','parseISO','\x20API\x20secret\x20is\x20invalid','event-history','EUR','Transaction\x20detection\x20blocked','loadMarkets','send','none','date','showConfig','enabled','orderId','last','configuration','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20>\x20','round','cancelOrder','uncaughtException','emitHistory','\x20exchange\x20error','fetchTicker','exchanges','findIndex','USDT','OrderNotFound','\x20hour','3486045cDSgVA','Huobi','\x20|\x20lock\x20orders:\x20','ccxt','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','changes','BNB/','USDP','-config.json','warning','createOrder','LOCKED','min','trade','Invalid\x20symbol:\x20','fiat','fetchBalance','\x20minutes\x20-\x20','001','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','startdate','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','milliseconds','Portfolio\x20change\x20detected:\x20','amount','net-basecoin','basecoin','parse','excluded','no\x20open\x20orders','startnumber','Pausing\x20for\x20','getFullYear','TUSD','join','\x20>\x20[DEBUG]\x20','starting-balances','bid','ORDERS.LOCKED','botname','\x20exchange',',\x20must\x20be\x20a\x203\x20digit\x20number','toggleBotMode','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Order\x20amount\x20is\x20invalid:\x20','write','toString','success','sha256','buys','limit-high','watchOrders()','ongoing','value','toFixed','getMinutes','Failed\x20to\x20load\x20coin\x20data\x20for\x20','length','2.6.0','RSA-OAEP','message','Invalid\x20API\x20key\x20or\x20secret\x20entered','AuthenticationError','includes','writeFile','\x20portfolio:</b>\x20\x0a\x0a','createWriteStream','coins','recreate','Error\x20while\x20deleting\x20files:\x20','\x20value','\x20network\x20error','/USD','Bybit','closed','timestamp','botID','open','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','1\x20-\x20FILLED\x20unknown\x20order:\x20','ordertype','ask','\x20change','Error:\x20Invalid\x20argument\x20','progress','MIN_NOTIONAL','Cooldown\x20ended\x20-\x20balancing\x20resumed','ticker','split','filled','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','privateKey','storeHeadless','amountToPrecision','\x20not\x20available','\x20/\x20','<pre>','buy','running','abs','1\x20-\x20Unlock\x20orders','log','kill','limits','balancing\x20resumes\x20when\x20cooldown\x20ends','data','showname','removed','splice','USD','symbol','Headless:\x20','</pre>','Exception\x20thrown\x20in\x20','average','-results.json','push','UNLOCKING','/backup/','remove','forEach','yyyy/MM/dd','deleteHistoryAlerts','RequestTimeout','debug','pro','getPortfolio','price','PAXG','page','bot-','ORDERS.UNLOCKING','defaults','liquidity','limit','getTime','Order\x20filled:\x20','emojisell','Insufficient\x20funds\x20to\x20execute\x20order:\x20','net-fiat','DDoSProtection','ETH','remainingSymbols','password','type','1\x20-\x20Validate\x20orders:\x20','\x20-\x20pausing\x20bot\x20for\x20','spot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','orderstatus','1302766XTRQye','getSeconds','string','onepagemode','customId','argv','balances','path'];_0x3af0=function(){return _0x4efd68;};return _0x3af0();}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1f5be6(0x2bd),'rsaStandard':_0x1f5be6(0x2c8)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x263b5f=>{console['log'](_0x263b5f);},'simple':_0x120e2b=>{const _0x37dd8f=_0x1f5be6;console[_0x37dd8f(0x2f2)](_0x120e2b),loggerfile[_0x37dd8f(0x2ba)](util[_0x37dd8f(0x25c)](_0x120e2b)+'\x0a');},'full':async(_0xf997ed,_0x4f2f0c='')=>{const _0x32be23=_0x1f5be6;let _0x1d89f1;if(config[_0x32be23(0x2f7)])_0x1d89f1=getTimeStamp()+':\x20'+config['botname']+_0x32be23(0x281)+_0xf997ed;else _0x1d89f1=getTimeStamp()+_0x32be23(0x35d)+botID+'\x20>\x20'+_0xf997ed;console[_0x32be23(0x2f2)](_0x1d89f1),loggerfile[_0x32be23(0x2ba)](util[_0x32be23(0x25c)](_0x1d89f1)+'\x0a'),_0x4f2f0c&&(console['log'](_0x4f2f0c),loggerfile[_0x32be23(0x2ba)](util[_0x32be23(0x25c)](_0x4f2f0c)+'\x0a'));},'debug':async(_0xcaad8f,_0x209776='')=>{const _0x3ca2ed=_0x1f5be6;let _0x30864d;if(config[_0x3ca2ed(0x2f7)])_0x30864d=getTimeStamp()+':\x20'+config[_0x3ca2ed(0x2b4)]+'\x20>\x20[DEBUG]\x20'+_0xcaad8f;else _0x30864d=getTimeStamp()+_0x3ca2ed(0x35d)+botID+_0x3ca2ed(0x2b0)+_0xcaad8f;if(debugging)console[_0x3ca2ed(0x2f2)](_0x30864d);loggerfile['write'](util['format'](_0x30864d)+'\x0a');if(_0x209776){if(debugging)console[_0x3ca2ed(0x2f2)](_0x209776);loggerfile[_0x3ca2ed(0x2ba)](util[_0x3ca2ed(0x25c)](_0x209776)+'\x0a');}}};process['on'](_0x1f5be6(0x284),function(_0x1746cb){handleError(_0x1746cb,'uncaughtException');});settings['timeshift']!=config[_0x1f5be6(0x235)]&&updateTimeshift(settings[_0x1f5be6(0x235)]);settings[_0x1f5be6(0x326)]!=config['onepagemode']&&updateOnepagemode(settings[_0x1f5be6(0x326)]);process[_0x1f5be6(0x278)]({'started':_0x1f5be6(0x2ef)},_0x452436=>{}),initializeProcessListeners();function proxyEmit(_0x41fa5f,_0xe16932=null){process['send']({'function':_0x41fa5f,'args':_0xe16932},_0x2bb6ff=>{});}function initializeProcessListeners(){const _0x3620f6=_0x1f5be6;process['on'](_0x3620f6(0x2c9),_0x4778f4=>{const _0x25659c=_0x3620f6;switch(Object[_0x25659c(0x264)](_0x4778f4)[0x0]){case _0x25659c(0x235):_0x4778f4[_0x25659c(0x235)]!=undefined&&(settings[_0x25659c(0x235)]=_0x4778f4[_0x25659c(0x235)],updateTimeshift(settings['timeshift']));break;case _0x25659c(0x326):_0x4778f4[_0x25659c(0x326)]!=undefined&&(settings['onepagemode']=_0x4778f4[_0x25659c(0x326)],updateOnepagemode(settings[_0x25659c(0x326)]));break;case _0x25659c(0x21a):_0x4778f4[_0x25659c(0x21a)]!=undefined&&(bots=JSON[_0x25659c(0x2a8)](_0x4778f4['bots']),proxyEmit(_0x25659c(0x21a),bots));break;case _0x25659c(0x25e):switch(_0x4778f4[_0x25659c(0x25e)]){case'initclient':initclient();break;case _0x25659c(0x2b7):toggleBotMode();break;case _0x25659c(0x285):emitHistory(_0x4778f4[_0x25659c(0x349)]);break;case _0x25659c(0x307):deleteHistoryAlerts(_0x4778f4[_0x25659c(0x349)]);break;case _0x25659c(0x30b):getPortfolio(_0x4778f4[_0x25659c(0x349)]);break;case _0x25659c(0x331):storeConfiguration(_0x4778f4[_0x25659c(0x349)]);break;case _0x25659c(0x2e9):storeHeadless(_0x4778f4[_0x25659c(0x349)]);break;case _0x25659c(0x242):storeFiat(_0x4778f4[_0x25659c(0x349)]);break;case'resetHistory':resetHistory();break;case _0x25659c(0x22d):getStartingBalances(getNormalizedPerformance());break;case _0x25659c(0x374):placeOrder(_0x4778f4['args']);break;case _0x25659c(0x381):cancelLoading();break;case _0x25659c(0x27b):showConfig();break;case _0x25659c(0x223):sendMetricsTelegram();break;case _0x25659c(0x37e):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x544e2d=![]){const _0x2e4395=_0x1f5be6;logger['debug'](_0x2e4395(0x248)+(_0x544e2d?'exchange\x20reloaded':_0x2e4395(0x344))+_0x2e4395(0x1ff)+config[_0x2e4395(0x356)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x544e2d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2e4395(0x20e)]!=''&&config[_0x2e4395(0x20e)]!='***'){loadingProgress=0x0;if(_0x544e2d){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x57248f){handleErrorNoStop(_0x57248f,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x54c783=await getCoins();[currentCoins,currentCoinsAll]=_0x54c783,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2e4395(0x309)](_0x2e4395(0x216)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2e4395(0x2c6)]==0x0&&allOpenOrders[_0x2e4395(0x2c6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x5bfb9e){await handleError(_0x5bfb9e,'stopExchange()');}}async function reloadExchange(){const _0x3be5f1=_0x1f5be6;while(lockOrders!=ORDERS[_0x3be5f1(0x353)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3be5f1(0x309)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x34978b=config[_0x1f5be6(0x356)],_0x2265b6=config[_0x1f5be6(0x20e)],_0x5b2967=config[_0x1f5be6(0x367)],_0x4ac323=config[_0x1f5be6(0x36b)]){const _0x4eb04c=_0x1f5be6;exchange&&await stopExchange();!supportedExchanges()[_0x4eb04c(0x2cc)](_0x34978b)&&(logHistory(_0x4eb04c(0x22a),_0x4eb04c(0x32b)+_0x34978b+_0x4eb04c(0x2b5)),killBot());const _0x6a31bf=ccxt[_0x4eb04c(0x30a)][_0x34978b[_0x4eb04c(0x338)]()];exchange=new _0x6a31bf({'apiKey':_0x2265b6,'secret':_0x5b2967,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4eb04c(0x320)}});if(_0x4ac323)exchange[_0x4eb04c(0x31c)]=_0x4ac323;}function setStableCoins(){const _0x1b9724=_0x1f5be6;let _0x264faf=config[_0x1b9724(0x2a7)]==_0x1b9724(0x31a)?_0x1b9724(0x31a):config['basecoin']=='PAXG'?_0x1b9724(0x30d):'BTC',_0x365de3=!allSymbols[_0x1b9724(0x2cc)](_0x264faf+_0x1b9724(0x2d5))?_0x1b9724(0x28a):_0x1b9724(0x2fa),_0x54f774=!allSymbols[_0x1b9724(0x2cc)](_0x264faf+_0x1b9724(0x33e))?_0x365de3:_0x1b9724(0x275);stablecoins={'eur':{'coin':''+_0x264faf+_0x54f774,'symbol':_0x264faf+'/'+_0x54f774},'usd':{'coin':''+_0x264faf+_0x365de3,'symbol':_0x264faf+'/'+_0x365de3}};}async function initwsCcxt(){const _0x2154e1=_0x1f5be6;initCycle++;const _0x5b76bb=initCycle;let _0xee86c9=[];config[_0x2154e1(0x214)][_0x2154e1(0x305)](_0x1ef2d3=>{const _0x246546=_0x2154e1;if(!_0x1ef2d3[_0x246546(0x2a9)]&&_0x1ef2d3[_0x246546(0x22e)]!=config[_0x246546(0x2a7)])_0xee86c9[_0x246546(0x301)](_0x1ef2d3[_0x246546(0x2fb)]);});if(!_0xee86c9[_0x2154e1(0x2cc)](stablecoins[_0x2154e1(0x1ee)][_0x2154e1(0x2fb)]))_0xee86c9[_0x2154e1(0x301)](stablecoins[_0x2154e1(0x1ee)][_0x2154e1(0x2fb)]);if(!_0xee86c9[_0x2154e1(0x2cc)](stablecoins['usd']['symbol']))_0xee86c9[_0x2154e1(0x301)](stablecoins['usd'][_0x2154e1(0x2fb)]);if(config[_0x2154e1(0x356)][_0x2154e1(0x22f)](_0x2154e1(0x1f8))&&config[_0x2154e1(0x2a7)]!='PAXG'){if(!_0xee86c9[_0x2154e1(0x2cc)](_0x2154e1(0x293)+config['basecoin']))_0xee86c9['push'](_0x2154e1(0x293)+config[_0x2154e1(0x2a7)]);}loadCoins(_0xee86c9),_0xee86c9=validateSymbols(_0xee86c9);const _0x1277fe=async _0x1b1f29=>{const _0x502dc3=_0x2154e1;let _0x558413;try{const _0x3b524b=await getTickers(_0x1b1f29);Object[_0x502dc3(0x204)](_0x3b524b)[_0x502dc3(0x305)](_0x5dd9f5=>{const _0x57887d=_0x502dc3;_0x558413=_0x5dd9f5[0x1][_0x57887d(0x2fb)],global[_0x57887d(0x2e4)][noslash(_0x558413)]=_0x5dd9f5[0x1]['last'],global[_0x57887d(0x37a)][_0x558413]=_0x5dd9f5[0x1][_0x57887d(0x23c)];});}catch(_0x1060c3){await handleError(_0x1060c3,_0x502dc3(0x24f),_0x558413);}},_0x4041a8=async _0x56c5ae=>{const _0x86fe92=_0x2154e1;while(initCycle==_0x5b76bb){if(!botPaused)try{const _0x3cd77a=await exchange[_0x86fe92(0x213)](_0x56c5ae);global[_0x86fe92(0x2e4)][noslash(_0x3cd77a[0x0][_0x86fe92(0x2fb)])]=_0x3cd77a[0x0]['price'],await sleep(0x3e8);}catch(_0x43fe5a){if(!exchangeStopped)await handleError(_0x43fe5a,_0x86fe92(0x221),_0x56c5ae);}else await sleep(0x64);}},_0x36765b=async _0x5acd35=>{const _0x2c8d27=_0x2154e1;while(initCycle==_0x5b76bb){if(!botPaused){let _0x44c1ba;try{await sleep(0x3c*0x3e8);const _0x44d550=await getTickers(_0x5acd35);Object[_0x2c8d27(0x204)](_0x44d550)[_0x2c8d27(0x305)](_0x11ccf6=>{const _0x26b86d=_0x2c8d27;_0x44c1ba=_0x11ccf6[0x1][_0x26b86d(0x2fb)],global[_0x26b86d(0x37a)][_0x44c1ba]=_0x11ccf6[0x1][_0x26b86d(0x23c)];});}catch(_0x5c124d){if(!exchangeStopped)await handleError(_0x5c124d,_0x2c8d27(0x33b),_0x44c1ba);}}else await sleep(0x64);}},_0x343293=async _0x3cf0a6=>{const _0x56f115=_0x2154e1;while(initCycle==_0x5b76bb){if(!botPaused)try{const _0x565e83=await exchange[_0x56f115(0x22c)](_0x3cf0a6);initCycle==_0x5b76bb&&_0x565e83[_0x56f115(0x305)](_0x332f45=>{updateNumberCoinsCcxt(_0x332f45);});}catch(_0x46f1d2){if(!exchangeStopped)await handleError(_0x46f1d2,_0x56f115(0x2c0));}else await sleep(0x64);}};_0x1277fe(_0xee86c9),_0x36765b(_0xee86c9),_0xee86c9[_0x2154e1(0x305)](_0x359560=>{_0x4041a8(_0x359560),_0x343293(_0x359560);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1719a3){const _0x15b989=_0x1f5be6;let _0x200ee6={};try{if(config['exchange']!='Cryptocom')_0x200ee6=await exchange[_0x15b989(0x211)](_0x1719a3);else for(const _0x4e8e32 of _0x1719a3){const _0x1ca11b=await exchange[_0x15b989(0x287)](_0x4e8e32);_0x200ee6[_0x4e8e32]=_0x1ca11b;}return _0x200ee6;}catch(_0x3c3c81){throw _0x3c3c81;}}async function watchTransactions(){const _0x139abd=_0x1f5be6;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xc0c44e=await getCoins(),[_0x1f3e12,_0x30d24a]=_0xc0c44e;let _0x480ea9=[];currentCoins[_0x139abd(0x305)](_0x3efa02=>{const _0xff4aa=_0x139abd,_0x20aca0=_0x1f3e12[_0xff4aa(0x240)](_0x402d41=>_0x402d41[_0xff4aa(0x22e)]==_0x3efa02['coin']);if(_0x20aca0){if(_0x3efa02[_0xff4aa(0x263)]!=_0x20aca0[_0xff4aa(0x263)]){let _0x175e19;if(_0x3efa02['coin']!=config['basecoin']){const _0x3880af=global[_0xff4aa(0x2e4)][noslash(_0x3efa02['symbol'])];_0x175e19=_0x3efa02[_0xff4aa(0x266)]?0x1/_0x3880af:_0x3880af;}else _0x175e19=0x1;_0x480ea9[_0xff4aa(0x301)]({'coin':_0x3efa02[_0xff4aa(0x22e)],'symbol':_0x3efa02['symbol'],'price':_0x175e19,'number':Number(formatResult(_0x20aca0[_0xff4aa(0x263)]-_0x3efa02[_0xff4aa(0x263)],0x8)),'basecoinvalue':_0x175e19*(_0x20aca0[_0xff4aa(0x263)]-_0x3efa02[_0xff4aa(0x263)])});}}});if(_0x480ea9[_0x139abd(0x2c6)]==0x1&&!blockTransactionDetection){if(config[_0x139abd(0x341)]){logger[_0x139abd(0x309)](_0x139abd(0x245)+_0x480ea9[0x0][_0x139abd(0x24a)]+_0x139abd(0x33c)+lastFees['highest']);if(lastFees[_0x139abd(0x343)]==0x0||Math[_0x139abd(0x2f0)](_0x480ea9[0x0][_0x139abd(0x24a)])>lastFees[_0x139abd(0x343)]){delete _0x480ea9[0x0][_0x139abd(0x2fb)],delete _0x480ea9[0x0][_0x139abd(0x24a)];let _0x4adda4=[],_0x6c6764=[...config['liquidity']]||[],_0x5d2ba4=config[_0x139abd(0x312)];_0x6c6764[_0x139abd(0x237)]((_0x273313,_0x36e38e)=>_0x273313[_0x139abd(0x27a)]>_0x36e38e['date']?-0x1:_0x36e38e[_0x139abd(0x27a)]>_0x273313[_0x139abd(0x27a)]?0x1:0x0);const _0x3ca85d=getDate();if(_0x6c6764[0x0]){const _0x469aec=fns[_0x139abd(0x2a8)](_0x6c6764[0x0]['date'],'yyyy/MM/dd',new Date()),_0x18cace=fns[_0x139abd(0x2a8)](_0x3ca85d,_0x139abd(0x306),new Date());if(fns['isEqual'](_0x469aec,_0x18cace)){_0x4adda4=_0x6c6764[0x0][_0x139abd(0x292)];const _0x36d41c=_0x4adda4['find'](_0x348306=>_0x348306[_0x139abd(0x22e)]==_0x480ea9[0x0]['coin']);_0x36d41c?(_0x36d41c[_0x139abd(0x263)]+=_0x480ea9[0x0]['number'],_0x36d41c[_0x139abd(0x263)]==0x0&&(_0x4adda4=_0x4adda4[_0x139abd(0x339)](_0x47b9cd=>{const _0x3e326d=_0x139abd;return _0x47b9cd[_0x3e326d(0x22e)]!=_0x480ea9[0x0]['coin'];}))):_0x4adda4[_0x139abd(0x301)](_0x480ea9[0x0]);const _0x1191a6=_0x5d2ba4[_0x139abd(0x240)](_0x2bc3e4=>_0x2bc3e4[_0x139abd(0x27a)]==_0x3ca85d);_0x1191a6[_0x139abd(0x292)]=_0x4adda4;}else _0x5d2ba4[_0x139abd(0x301)]({'date':_0x3ca85d,'changes':[_0x480ea9[0x0]]});}const _0x33dadf=_0x5d2ba4['find'](_0x3085dd=>_0x3085dd['date']==_0x3ca85d);if(_0x33dadf){let _0x42f227=!![];_0x33dadf[_0x139abd(0x292)]['forEach'](_0x55c4b6=>{const _0x326760=_0x139abd;if(_0x55c4b6[_0x326760(0x263)]!=0x0)_0x42f227=![];}),_0x42f227&&(_0x5d2ba4=_0x5d2ba4[_0x139abd(0x339)](_0x4695e3=>{const _0x50ba7b=_0x139abd;return _0x4695e3[_0x50ba7b(0x27a)]!=_0x3ca85d;}));}let _0x4cac0f=dbConfig[_0x139abd(0x255)]('bot')['find']({'botID':botID})['value']();_0x4cac0f&&(dbConfig[_0x139abd(0x255)](_0x139abd(0x234))[_0x139abd(0x240)]({'botID':botID})[_0x139abd(0x372)]({'liquidity':_0x5d2ba4})[_0x139abd(0x2ba)](),config[_0x139abd(0x312)]=_0x5d2ba4),logHistory(_0x139abd(0x2bc),_0x139abd(0x2a4)+Math['abs'](_0x480ea9[0x0]['number'])+'\x20'+_0x480ea9[0x0][_0x139abd(0x22e)]+'\x20'+(_0x480ea9[0x0][_0x139abd(0x263)]>0x0?_0x139abd(0x244):_0x139abd(0x2f8))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x139abd(0x27f),emittedConfiguration());}else logger[_0x139abd(0x309)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x139abd(0x2f0)](_0x480ea9[0x0][_0x139abd(0x263)])+'\x20'+_0x480ea9[0x0][_0x139abd(0x22e)]+'\x20'+(_0x480ea9[0x0][_0x139abd(0x263)]>0x0?_0x139abd(0x244):_0x139abd(0x2f8)));transactionDetected=!![];}else logger[_0x139abd(0x309)](_0x139abd(0x2a4)+Math[_0x139abd(0x2f0)](_0x480ea9[0x0][_0x139abd(0x263)])+'\x20'+_0x480ea9[0x0]['coin']+'\x20'+(_0x480ea9[0x0][_0x139abd(0x263)]>0x0?'added':_0x139abd(0x2f8))+_0x139abd(0x201));}currentCoins=_0x1f3e12,currentCoinsAll=_0x30d24a,await sleep(watchTransactionsInterval);}catch(_0xbe31ee){if(!exchangeStopped)await handleError(_0xbe31ee,_0x139abd(0x354));}else await sleep(0x64);}}async function loadSymbols(){const _0x486cb2=_0x1f5be6;try{markets=await exchange[_0x486cb2(0x277)](),allSymbols=[],Object[_0x486cb2(0x204)](markets)[_0x486cb2(0x305)](_0x4d6627=>{const _0x4e47d9=_0x486cb2;_0x4d6627[0x1][_0x4e47d9(0x226)]&&_0x4d6627[0x1][_0x4e47d9(0x320)]&&allSymbols[_0x4e47d9(0x301)](_0x4d6627[0x0]);});}catch(_0x4ed364){throw _0x4ed364;}}function validateSymbols(_0x5c3eab){let _0x49e037=[];return _0x5c3eab['forEach'](_0x20abd1=>{const _0x569a23=_0x4367;!allSymbols['includes'](_0x20abd1)?logHistory(_0x569a23(0x22a),_0x569a23(0x29b)+_0x20abd1+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x49e037[_0x569a23(0x301)](_0x20abd1);}),_0x49e037;}async function initclient(){const _0x12d70c=_0x1f5be6;proxyEmit(_0x12d70c(0x27f),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x12d70c(0x329),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x517c6a=getNormalizedPerformance();emitPerformance(_0x517c6a),getStartingBalances(_0x517c6a);}async function toggleBotMode(){const _0x56214e=_0x1f5be6;let _0x5ef09e=dbConfig[_0x56214e(0x255)](_0x56214e(0x234))[_0x56214e(0x240)]({'botID':botID})[_0x56214e(0x2c2)]();if(_0x5ef09e){const _0x4c9028=!_0x5ef09e['headless'];dbConfig[_0x56214e(0x255)](_0x56214e(0x234))[_0x56214e(0x240)]({'botID':botID})[_0x56214e(0x372)]({'headless':_0x4c9028})[_0x56214e(0x2ba)](),config[_0x56214e(0x337)]=_0x4c9028,proxyEmit(_0x56214e(0x27f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x229cd4=_0x1f5be6;process[_0x229cd4(0x278)]({'updatebotmanager':!![]},_0x57d341=>{}),logger['debug'](_0x229cd4(0x2fc)+config['headless']);}async function loadCoins(_0xdeb27e){const _0x2edafc=_0x1f5be6;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x66d09e,_0x44d923=0x0,_0x43a22a=0x0;_0xdeb27e['forEach'](_0x4847c0=>{const _0x39ca07=_0x4367;loading['remainingSymbols'][_0x39ca07(0x301)](_0x4847c0);}),loadingCanceled=![];let _0x288be5=![];while(_0x66d09e!=_0xdeb27e['length']+maxLoadingProgress){_0x66d09e=loadingProgress,_0xdeb27e[_0x2edafc(0x305)](_0x2e6425=>{const _0x47bb55=_0x2edafc;if(global[_0x47bb55(0x2e4)][noslash(_0x2e6425)]){loading['remainingSymbols']=loading[_0x47bb55(0x31b)][_0x47bb55(0x339)](_0x4c8232=>_0x4c8232!=_0x2e6425);if(!watchedSymbols['includes'](_0x2e6425))watchedSymbols['push'](_0x2e6425);_0x66d09e++;}}),loading[_0x2edafc(0x2e1)]=Math[_0x2edafc(0x282)](_0x66d09e/(_0xdeb27e[_0x2edafc(0x2c6)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x43a22a>0x1e*0x5&&(loading[_0x2edafc(0x20f)]=!![],emitLoadingProgress()),_0x43a22a>0x78*0x5&&!_0x288be5&&(_0x288be5=!![],logHistory(_0x2edafc(0x22a),_0x2edafc(0x2c5)+loading['remainingSymbols'][_0x2edafc(0x2af)](',\x20')+_0x2edafc(0x232)),logHistory(_0x2edafc(0x22a),_0x2edafc(0x2ac)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x28b093=_0x2edafc;process[_0x28b093(0x278)]({'stop':'restart'},_0x3dd262=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x44d923!=loading['progress']&&(_0x44d923=loading[_0x2edafc(0x2e1)],emitLoadingProgress()),_0x43a22a++,await sleep(0xc8);}_0x66d09e==_0xdeb27e[_0x2edafc(0x2c6)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x2edafc(0x27c),'live':_0x2edafc(0x2ef)},_0x4a7543=>{}),_0x288be5&&logHistory(_0x2edafc(0x2bc),_0x2edafc(0x20a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x170f75=_0x1f5be6;proxyEmit(_0x170f75(0x27f),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x3f6901=_0x1f5be6;proxyEmit(_0x3f6901(0x37c),loading);}async function getFiat(){const _0xd088bc=_0x1f5be6;let _0x4405b5=global[_0xd088bc(0x2e4)][stablecoins[_0xd088bc(0x1ee)][_0xd088bc(0x22e)]],_0x25d1fb=global[_0xd088bc(0x2e4)][stablecoins[_0xd088bc(0x1f7)][_0xd088bc(0x22e)]];return{'eur':Number(_0x4405b5),'usd':Number(_0x25d1fb)};}function capitalize(_0x1fb40c){const _0x48abcb=_0x1f5be6;return _0x1fb40c[_0x48abcb(0x1f9)](0x0,0x1)[_0x48abcb(0x370)]()+_0x1fb40c[_0x48abcb(0x1f9)](0x1);}function supportedExchanges(){const _0x29906a=_0x1f5be6,_0x522243=['ws','fetchTickers',_0x29906a(0x287),_0x29906a(0x213),_0x29906a(0x22c),_0x29906a(0x283),_0x29906a(0x297),_0x29906a(0x34d),_0x29906a(0x1f0),'fetchBalance'];let _0x4ea2e1=[],_0x3103bb=[],_0x444fd2=ccxt[_0x29906a(0x30a)][_0x29906a(0x288)];_0x444fd2[_0x29906a(0x305)](_0x4bacd2=>{const _0x1ca6d4=_0x29906a;try{const _0x38bf1f=new ccxt[(_0x1ca6d4(0x30a))][_0x4bacd2]();_0x3103bb[_0x1ca6d4(0x301)](_0x38bf1f);}catch(_0x4d86c3){}}),_0x3103bb[_0x29906a(0x305)](_0x1299e1=>{const _0x472296=_0x29906a;let _0x405362=0x0;_0x522243[_0x472296(0x305)](_0x4ec635=>{const _0x3e2f2e=_0x472296;_0x4ec635 in _0x1299e1[_0x3e2f2e(0x355)]&&_0x1299e1[_0x3e2f2e(0x355)][_0x4ec635]&&_0x405362++;}),_0x405362==_0x522243[_0x472296(0x2c6)]&&_0x4ea2e1[_0x472296(0x301)](capitalize(_0x1299e1['id']));});let _0x2fd768=[];return _0x444fd2[_0x29906a(0x305)](_0x333cf4=>{const _0xa22bb4=_0x29906a;_0x333cf4=capitalize(_0x333cf4);if(!_0x4ea2e1[_0xa22bb4(0x2cc)](_0x333cf4))_0x2fd768[_0xa22bb4(0x301)](_0x333cf4);}),_0x4ea2e1;}function setStartDatePerformance(){const _0x795503=_0x1f5be6;if(config&&config[_0x795503(0x312)][0x0]['changes'][_0x795503(0x2c6)]!=0x0){const _0x1887ee=config['liquidity'][0x0][_0x795503(0x292)];dbPerformance['get']('data')[_0x795503(0x240)]({'date':config[_0x795503(0x2a1)]})[_0x795503(0x372)]({'coins':_0x1887ee})[_0x795503(0x2ba)]();}}async function recreateCoinResults(){const _0x8cb73e=_0x1f5be6;let _0x2d683a,_0x1ac3cc=[];try{const _0x1d1bf1=fns[_0x8cb73e(0x25c)](fns[_0x8cb73e(0x272)](config['startdate'][_0x8cb73e(0x267)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x53738d of currentCoins){if(_0x53738d[_0x8cb73e(0x22e)]!=config[_0x8cb73e(0x2a7)]){let _0x24664d=0x0,_0x26859d,_0x37e5f7;_0x2d683a=await getAllEventOrders(_0x53738d['symbol']);if(_0x2d683a[_0x8cb73e(0x2c6)]>0x0)_0x2d683a['forEach'](_0x300407=>{const _0x3c412e=_0x8cb73e,_0x4268ed=_0x53738d[_0x3c412e(0x2fb)]['includes'](config[_0x3c412e(0x2a7)]+'/');_0x1ac3cc[_0x3c412e(0x301)]({'datetime':_0x300407['datetime'],'coin':_0x53738d[_0x3c412e(0x22e)],'symbol':_0x53738d['symbol'],'side':_0x300407['side'],'reverse':_0x4268ed,'amount':formatResult(_0x300407[_0x3c412e(0x2e6)],0x8),'filled':formatResult(_0x300407['filled'],0x8),'price':formatResult(_0x300407[_0x3c412e(0x30c)],0x8)}),_0x24664d=_0x300407[_0x3c412e(0x268)]==_0x3c412e(0x2ee)?_0x24664d+_0x300407[_0x3c412e(0x2e6)]:_0x24664d-_0x300407[_0x3c412e(0x2e6)];if(!_0x37e5f7)_0x37e5f7=_0x300407[_0x3c412e(0x30c)];});_0x26859d=_0x53738d[_0x8cb73e(0x263)]-_0x24664d;let _0x2f1a0e;config[_0x8cb73e(0x312)]['forEach'](_0xa20e05=>{const _0x25a7b6=_0x8cb73e;!_0x2f1a0e&&(_0x2f1a0e=_0xa20e05[_0x25a7b6(0x292)][_0x25a7b6(0x240)](_0x114b5f=>_0x114b5f['coin']==_0x53738d['coin']),_0x2f1a0e&&(_0x26859d=_0x2f1a0e[_0x25a7b6(0x263)],_0x37e5f7=_0x2f1a0e[_0x25a7b6(0x30c)]));});let _0x5b537b=dbCoinResults[_0x8cb73e(0x255)]('coins')[_0x8cb73e(0x240)]({'coin':_0x53738d[_0x8cb73e(0x22e)]})['value']();_0x5b537b={'coin':_0x53738d[_0x8cb73e(0x22e)],'number':_0x26859d,'breakeven':_0x37e5f7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x8cb73e(0x255)](_0x8cb73e(0x2d0))['find']({'coin':_0x53738d['coin']})[_0x8cb73e(0x372)](_0x5b537b)[_0x8cb73e(0x2ba)]();}}_0x1ac3cc[_0x8cb73e(0x237)]((_0x2e35a3,_0x12599b)=>_0x2e35a3[_0x8cb73e(0x22b)]>_0x12599b[_0x8cb73e(0x22b)]?0x1:_0x12599b[_0x8cb73e(0x22b)]>_0x2e35a3[_0x8cb73e(0x22b)]?-0x1:0x0);let _0x497922=0x0;for(let _0x214753 of _0x1ac3cc){await updateCoinResults(_0x214753,!![]);}}catch(_0x4499ec){await handleError(_0x4499ec,_0x8cb73e(0x35e));}}async function getAllEventOrders(_0x2e398f){const _0x10549e=_0x1f5be6;let _0x34396f=[],_0x2989ee=dbLogs[_0x10549e(0x255)](_0x10549e(0x21d))[_0x10549e(0x339)](_0x280c83=>{const _0x2f319d=_0x10549e,_0x323142=_0x280c83[_0x2f319d(0x375)][_0x2f319d(0x338)]();return _0x323142['includes'](_0x2e398f[_0x2f319d(0x338)]())&&(_0x323142['includes'](_0x2f319d(0x1fb))&&_0x323142[_0x2f319d(0x2cc)](_0x2f319d(0x362))||_0x323142[_0x2f319d(0x2cc)](_0x2f319d(0x2e6))&&_0x323142[_0x2f319d(0x2cc)]('order'));})[_0x10549e(0x25f)](_0x10549e(0x366))[_0x10549e(0x2c2)]();return _0x2989ee[_0x10549e(0x305)](_0x486b36=>{const _0xb9c0a9=_0x10549e,_0x335c63=_0x486b36[_0xb9c0a9(0x375)][_0xb9c0a9(0x2cc)](_0xb9c0a9(0x342))?_0xb9c0a9(0x342):_0xb9c0a9(0x2ee),_0x32c225=/#([0-9]|\.)+\s/i,_0x205fbe=Number(_0x32c225[_0xb9c0a9(0x251)](_0x486b36[_0xb9c0a9(0x375)])[0x0][_0xb9c0a9(0x35c)](0x1)),_0x320129=/@([0-9]|\.)+$/i,_0x4fa8df=Number(_0x320129['exec'](_0x486b36[_0xb9c0a9(0x375)])[0x0][_0xb9c0a9(0x35c)](0x1));_0x34396f[_0xb9c0a9(0x301)]({'datetime':_0x486b36['time'],'coin':symbolToCoin(_0x2e398f),'symbol':_0x2e398f,'side':_0x335c63,'amount':_0x205fbe,'filled':_0x205fbe,'price':_0x4fa8df});}),_0x34396f;}async function getAllOrders(_0x3025e9,_0x3e05a0){const _0x5b43e6=_0x1f5be6;let _0x20548f=[];while(_0x3e05a0<exchange[_0x5b43e6(0x2a3)]()){const _0x582e98=0x1f4;try{const _0x577f1c=await exchange[_0x5b43e6(0x1f0)](_0x3025e9,_0x3e05a0,_0x582e98);if(_0x577f1c[_0x5b43e6(0x2c6)])_0x3e05a0=_0x577f1c[_0x577f1c['length']-0x1][_0x5b43e6(0x2d8)]+0x1,_0x20548f=_0x20548f['concat'](_0x577f1c);else break;}catch(_0x1ff568){await handleError(_0x1ff568,_0x5b43e6(0x358),_0x3025e9);}}return _0x20548f;}async function validate24hChanges(){const _0x2021cf=_0x1f5be6;for(const _0x24f4c4 of currentCoins){if(_0x24f4c4[_0x2021cf(0x22e)]!=config[_0x2021cf(0x2a7)]){let _0x3145cf;_0x24f4c4['reverse']?_0x3145cf=formatResult((0x1/(global[_0x2021cf(0x37a)][noslash(_0x24f4c4['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x3145cf=global[_0x2021cf(0x37a)][noslash(_0x24f4c4['symbol'])],_0x3145cf<config['change24h']&&(logHistory(_0x2021cf(0x22a),_0x24f4c4[_0x2021cf(0x22e)]+_0x2021cf(0x224)+_0x3145cf+'%'),logHistory(_0x2021cf(0x22a),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x2021cf(0x22a),_0x2021cf(0x243)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x54b8f8,_0x5e2ddd){const _0xd853cf=_0x1f5be6;if(!_0x54b8f8)return!![];const _0x3042ca=_0x5e2ddd[_0xd853cf(0x2e5)]('.'),_0x2e9004=_0x54b8f8[_0xd853cf(0x2e5)]('.');for(var _0xaf33f0=0x0;_0xaf33f0<_0x2e9004[_0xd853cf(0x2c6)];_0xaf33f0++){const _0x133a60=~~_0x2e9004[_0xaf33f0],_0x3417ff=~~_0x3042ca[_0xaf33f0];if(_0x133a60<_0x3417ff)return!![];if(_0x133a60>_0x3417ff)return![];}return![];}async function oneTimeMigration(){const _0x9557f8=_0x1f5be6;let _0x386a12=dbLogs[_0x9557f8(0x255)](_0x9557f8(0x1ed))[_0x9557f8(0x2c2)]();if(isOlderVersion(_0x386a12,_0x9557f8(0x246))){let _0x56c796=[];const _0x4fa1fd=dbLogs[_0x9557f8(0x255)]('logs')['value']();_0x4fa1fd[_0x9557f8(0x305)](_0x1d913e=>{const _0x2120f7=_0x9557f8;_0x56c796[_0x2120f7(0x301)]({'time':_0x1d913e[_0x2120f7(0x366)],'type':_0x1d913e['type'],'event':_0x1d913e[_0x2120f7(0x375)]});}),dbLogs[_0x9557f8(0x255)]('logs')[_0x9557f8(0x372)](_0x56c796)[_0x9557f8(0x2ba)]();}let _0x53a658=dbConfig[_0x9557f8(0x255)](_0x9557f8(0x1ed))[_0x9557f8(0x2c2)]();if(isOlderVersion(_0x53a658,_0x9557f8(0x246))){let _0x6f996f=dbConfig[_0x9557f8(0x255)](_0x9557f8(0x234))[_0x9557f8(0x240)]({'botID':botID})[_0x9557f8(0x2c2)]();if(_0x6f996f){let _0x60eb63=[];_0x6f996f[_0x9557f8(0x214)]['forEach'](_0x133f74=>{const _0x1c8ed2=_0x9557f8;_0x60eb63['push']({'coin':_0x133f74[_0x1c8ed2(0x22e)],'number':_0x133f74['startnumber'],'price':_0x133f74[_0x1c8ed2(0x1f4)]}),delete _0x133f74[_0x1c8ed2(0x2ab)],delete _0x133f74[_0x1c8ed2(0x1f4)];});if(_0x60eb63[_0x9557f8(0x2c6)]!==0x0)fs[_0x9557f8(0x2cd)](configbackuppath+(_0x9557f8(0x1f1)+botID+_0x9557f8(0x345)),JSON[_0x9557f8(0x34b)](_0x60eb63,null,0x4),function(_0x49517b){if(_0x49517b){}});const _0x47853c=(_0x341b3e,_0x409c6a)=>{const _0x4bfeff=_0x9557f8;let _0xbe6595=[];_0x409c6a[_0x4bfeff(0x305)](_0x138ba8=>{const _0x3e2325=_0x4bfeff,_0x8a9134=_0x341b3e[_0x3e2325(0x240)](_0xf9af8d=>_0xf9af8d[_0x3e2325(0x22e)]==_0x138ba8[_0x3e2325(0x22e)]);if(!_0x8a9134)_0xbe6595['push'](_0x138ba8);});let _0x178579=[];return _0x341b3e[_0x4bfeff(0x305)](_0x5d11be=>{const _0x189916=_0x4bfeff,_0x425404=_0x409c6a[_0x189916(0x240)](_0x554f5c=>_0x554f5c[_0x189916(0x22e)]==_0x5d11be[_0x189916(0x22e)]);if(!_0x425404||_0x425404['number']==0x0&&_0x5d11be['number']!=0x0)_0x178579[_0x189916(0x301)](_0x5d11be);}),{'missingDay1':_0xbe6595,'notInDay2':_0x178579};},_0x544e4b=dbPerformance[_0x9557f8(0x255)](_0x9557f8(0x2f6))[_0x9557f8(0x228)]()[_0x9557f8(0x2c2)]();if(_0x544e4b['length']>0x1){const {missingDay1:_0x30fe3c,notInDay2:_0x53b5b3}=_0x47853c(_0x60eb63,_0x544e4b[0x1][_0x9557f8(0x2d0)]);_0x60eb63=[..._0x60eb63,..._0x30fe3c],_0x53b5b3[_0x9557f8(0x305)](_0x2343da=>{const _0x136b70=_0x9557f8;let _0x36f4d7=_0x60eb63[_0x136b70(0x289)](_0x4b69c2=>_0x4b69c2['coin']==_0x2343da['coin']);_0x36f4d7!=-0x1&&_0x60eb63[_0x136b70(0x2f9)](_0x36f4d7,0x1);});}_0x60eb63[_0x9557f8(0x237)]((_0x3a39f1,_0x32d44d)=>_0x3a39f1[_0x9557f8(0x22e)]>_0x32d44d[_0x9557f8(0x22e)]?0x1:_0x32d44d[_0x9557f8(0x22e)]>_0x3a39f1[_0x9557f8(0x22e)]?-0x1:0x0);let _0x4439ee=[{'date':_0x6f996f[_0x9557f8(0x2a1)],'changes':_0x60eb63}];_0x544e4b['length']>0x2&&_0x544e4b[_0x9557f8(0x305)]((_0x27c1fd,_0x37f38c)=>{const _0x519699=_0x9557f8;if(_0x37f38c>0x0&&_0x37f38c<_0x544e4b[_0x519699(0x2c6)]-0x1){const {missingDay1:_0x8dc6be,notInDay2:_0x3a4de3}=_0x47853c(_0x544e4b[_0x37f38c][_0x519699(0x2d0)],_0x544e4b[_0x37f38c+0x1][_0x519699(0x2d0)]);_0x60eb63=[],(_0x8dc6be['length']!=0x0||_0x3a4de3[_0x519699(0x2c6)]!=0x0)&&(_0x8dc6be['length']!=0x0&&_0x60eb63[_0x519699(0x301)](..._0x8dc6be),_0x3a4de3[_0x519699(0x2c6)]!=0x0&&(_0x3a4de3[_0x519699(0x305)](_0x1adce2=>{const _0x55aebe=_0x519699;_0x1adce2[_0x55aebe(0x263)]=-_0x1adce2['number'];}),_0x60eb63['push'](..._0x3a4de3)),_0x60eb63[_0x519699(0x237)]((_0x24f03b,_0x5f5373)=>_0x24f03b['coin']>_0x5f5373[_0x519699(0x22e)]?0x1:_0x5f5373[_0x519699(0x22e)]>_0x24f03b[_0x519699(0x22e)]?-0x1:0x0),_0x4439ee[_0x519699(0x301)]({'date':_0x544e4b[_0x37f38c+0x1][_0x519699(0x27a)],'changes':_0x60eb63}));}}),dbConfig[_0x9557f8(0x255)](_0x9557f8(0x234))[_0x9557f8(0x240)]({'botID':botID})['assign']({..._0x6f996f,'liquidity':_0x4439ee})[_0x9557f8(0x2ba)]();}}if(isOlderVersion(_0x53a658,_0x9557f8(0x2c7))){let _0x34c9ac=dbConfig['get'](_0x9557f8(0x234))['find']({'botID':botID})[_0x9557f8(0x2c2)]();if(_0x34c9ac){const _0x149888=_0x34c9ac[_0x9557f8(0x356)],_0x573a1d=_0x149888?capitalize(_0x149888):_0x9557f8(0x1f8);dbConfig[_0x9557f8(0x255)]('bot')[_0x9557f8(0x240)]({'botID':botID})['assign']({'exchange':_0x573a1d})[_0x9557f8(0x2ba)]();}}let _0x539bd5=dbPerformance[_0x9557f8(0x255)](_0x9557f8(0x1ed))[_0x9557f8(0x2c2)]();isOlderVersion(_0x539bd5,_0x9557f8(0x246))&&setStartDatePerformance();let _0x5e6087=dbCoinResults[_0x9557f8(0x255)](_0x9557f8(0x1ed))[_0x9557f8(0x2c2)]();if(isOlderVersion(_0x5e6087,_0x9557f8(0x26a))){let _0x3a38bf=dbCoinResults[_0x9557f8(0x255)](_0x9557f8(0x2d0))[_0x9557f8(0x2c2)]();if(_0x3a38bf[_0x9557f8(0x2c6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3b55cc=_0x1f5be6;dbConfig[_0x3b55cc(0x220)](_0x3b55cc(0x1ed),serverversion)[_0x3b55cc(0x2ba)](),dbPerformance[_0x3b55cc(0x220)](_0x3b55cc(0x1ed),serverversion)[_0x3b55cc(0x2ba)](),dbLogs['set'](_0x3b55cc(0x1ed),serverversion)['write'](),dbCoinResults[_0x3b55cc(0x220)](_0x3b55cc(0x1ed),serverversion)['write']();}function getConfiguration(_0x2e142d){const _0x213546=_0x1f5be6;let _0x5ee56d=dbConfig[_0x213546(0x255)]('bot')[_0x213546(0x240)]({'botID':_0x2e142d})[_0x213546(0x2c2)]();if(_0x5ee56d){let _0x34d2c2=![];typeof _0x5ee56d['threshold']==_0x213546(0x325)&&(_0x5ee56d={..._0x5ee56d,'threshold':Number(_0x5ee56d[_0x213546(0x360)])},_0x34d2c2=!![]),_0x5ee56d[_0x213546(0x208)]==undefined&&(_0x5ee56d={..._0x5ee56d,'change24h':-0x14},_0x34d2c2=!![]),_0x5ee56d['fiat']==undefined&&(_0x5ee56d={..._0x5ee56d,'fiat':'USD'},_0x34d2c2=!![]),_0x5ee56d['onepagemode']==undefined&&(_0x5ee56d={..._0x5ee56d,'onepagemode':settings[_0x213546(0x326)]},_0x34d2c2=!![]),_0x5ee56d['colorscheme']==undefined&&(_0x5ee56d={..._0x5ee56d,'colorscheme':_0x213546(0x351)},_0x34d2c2=!![]),_0x5ee56d[_0x213546(0x341)]==undefined&&(_0x5ee56d={..._0x5ee56d,'autoliquidity':!![]},_0x34d2c2=!![]),_0x34d2c2&&(_0x5ee56d={'botID':_0x5ee56d[_0x213546(0x2d9)],'exchange':_0x5ee56d['exchange'],'apiKey':_0x5ee56d[_0x213546(0x20e)],'apiSecret':_0x5ee56d[_0x213546(0x367)],'apiPassword':_0x5ee56d[_0x213546(0x36b)],'basecoin':_0x5ee56d[_0x213546(0x2a7)],'botname':_0x5ee56d[_0x213546(0x2b4)],'showname':_0x5ee56d['showname'],'threshold':_0x5ee56d[_0x213546(0x360)],'ordertype':_0x5ee56d[_0x213546(0x2dd)],'timeout':_0x5ee56d['timeout'],'fiat':_0x5ee56d['fiat'],'startdate':_0x5ee56d['startdate'],'recreate':_0x5ee56d[_0x213546(0x2d1)],'timeshift':_0x5ee56d[_0x213546(0x235)],'onepagemode':_0x5ee56d[_0x213546(0x326)],'headless':_0x5ee56d['headless'],'cooldown':_0x5ee56d['cooldown'],'change24h':_0x5ee56d[_0x213546(0x208)],'emojibuy':_0x5ee56d[_0x213546(0x34a)],'emojisell':_0x5ee56d[_0x213546(0x316)],'colorscheme':_0x5ee56d[_0x213546(0x239)],'portfolio':_0x5ee56d['portfolio'],'autoliquidity':_0x5ee56d[_0x213546(0x341)],'liquidity':_0x5ee56d[_0x213546(0x312)],'openOrders':_0x5ee56d[_0x213546(0x37f)]},dbConfig[_0x213546(0x255)](_0x213546(0x234))[_0x213546(0x304)]()[_0x213546(0x2ba)](),dbConfig[_0x213546(0x255)](_0x213546(0x234))['push'](_0x5ee56d)[_0x213546(0x2ba)]());}else _0x5ee56d={'botID':_0x2e142d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x2e142d,'showname':![],'threshold':0x3,'ordertype':_0x213546(0x1fb),'timeout':0x14,'fiat':_0x213546(0x2fa),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x213546(0x235)],'onepagemode':settings[_0x213546(0x326)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5ee56d;}function emittedConfiguration(){const _0x114093=_0x1f5be6;let _0x42e857;if(config['apiKey']=='')_0x42e857={...config,'configstate':_0x114093(0x35a)};else config['apiKey']==_0x114093(0x33a)?_0x42e857={...config,'configstate':_0x114093(0x352)}:(_0x42e857={...config,'apiKey':_0x114093(0x361),'apiSecret':_0x114093(0x361)},config[_0x114093(0x36b)]&&(_0x42e857[_0x114093(0x36b)]=_0x114093(0x361)));return _0x42e857;}function getSettings(){const _0x955c8=_0x1f5be6;return dbSettings[_0x955c8(0x255)](_0x955c8(0x357))[_0x955c8(0x2c2)]();}function getSecure(){const _0x1173ea=_0x1f5be6;return dbSecure['get'](_0x1173ea(0x24d))[_0x1173ea(0x2c2)]()||{};}function updateTimeshift(_0x4cd5d1){const _0x47d3fe=_0x1f5be6;let _0x5ee81c=dbConfig[_0x47d3fe(0x255)](_0x47d3fe(0x234))['find']({'botID':botID})[_0x47d3fe(0x2c2)]();_0x5ee81c&&dbConfig[_0x47d3fe(0x255)]('bot')[_0x47d3fe(0x240)]({'botID':botID})[_0x47d3fe(0x372)]({'timeshift':_0x4cd5d1})['write'](),config[_0x47d3fe(0x235)]=_0x4cd5d1,proxyEmit(_0x47d3fe(0x27f),emittedConfiguration());}function updateOnepagemode(_0x1cbbcd){const _0x118f92=_0x1f5be6;let _0x3cf58a=dbConfig[_0x118f92(0x255)]('bot')['find']({'botID':botID})[_0x118f92(0x2c2)]();_0x3cf58a&&dbConfig[_0x118f92(0x255)](_0x118f92(0x234))[_0x118f92(0x240)]({'botID':botID})[_0x118f92(0x372)]({'onepagemode':_0x1cbbcd})[_0x118f92(0x2ba)](),config['onepagemode']=_0x1cbbcd,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x18db83){const _0x34e64d=_0x1f5be6;logger['debug']('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x34e64d(0x309)](_0x34e64d(0x276));let _0x1e5391=![],_0x17374b=![],_0x426626=[];_0x18db83[_0x34e64d(0x214)][_0x34e64d(0x305)](_0x3bb329=>{const _0x14db80=_0x34e64d;if(!_0x3bb329['excluded']&&_0x3bb329['coin']!=_0x18db83[_0x14db80(0x2a7)])_0x426626[_0x14db80(0x301)](_0x3bb329['symbol']);}),_0x426626[_0x34e64d(0x305)](_0x4f6969=>{const _0x18db33=_0x34e64d,_0x2c2573=currentCoins[_0x18db33(0x240)](_0xf1683f=>_0xf1683f['symbol']==_0x4f6969);!_0x2c2573&&(_0x1e5391=!![]);}),currentCoins[_0x34e64d(0x305)](_0x10243e=>{const _0x25c573=_0x34e64d;if(_0x10243e[_0x25c573(0x22e)]!=config['basecoin']){const _0x269f98=_0x426626[_0x25c573(0x240)](_0x503803=>_0x503803==_0x10243e[_0x25c573(0x2fb)]);!_0x269f98&&(_0x1e5391=!![]);}}),_0x18db83[_0x34e64d(0x214)][_0x34e64d(0x305)](_0x533997=>{const _0xc340c7=_0x34e64d,_0x42e87c=config[_0xc340c7(0x214)][_0xc340c7(0x240)](_0x5f482f=>_0x5f482f[_0xc340c7(0x22e)]==_0x533997[_0xc340c7(0x22e)]);if(_0x42e87c&&_0x533997[_0xc340c7(0x250)]!=_0x42e87c['offset'])_0x17374b=!![];});let _0x36cc59=dbConfig[_0x34e64d(0x255)](_0x34e64d(0x234))[_0x34e64d(0x240)]({'botID':botID})['value']();_0x18db83={..._0x18db83,'apiKey':crypt[_0x34e64d(0x222)](secure[_0x34e64d(0x2e8)],_0x18db83[_0x34e64d(0x20e)])['message'],'apiSecret':crypt[_0x34e64d(0x222)](secure[_0x34e64d(0x2e8)],_0x18db83[_0x34e64d(0x367)])[_0x34e64d(0x2c9)]};_0x18db83[_0x34e64d(0x36b)]&&(_0x18db83['apiPassword']=crypt[_0x34e64d(0x222)](secure[_0x34e64d(0x2e8)],_0x18db83[_0x34e64d(0x36b)])[_0x34e64d(0x2c9)]);let _0x221a4b=![];if(_0x36cc59){_0x18db83[_0x34e64d(0x20e)]==_0x34e64d(0x361)?_0x18db83[_0x34e64d(0x20e)]=config[_0x34e64d(0x20e)]:_0x221a4b=!![];_0x18db83[_0x34e64d(0x367)]==_0x34e64d(0x361)?_0x18db83[_0x34e64d(0x367)]=config['apiSecret']:_0x221a4b=!![];if(_0x18db83[_0x34e64d(0x36b)]==_0x34e64d(0x361))_0x18db83[_0x34e64d(0x36b)]=config[_0x34e64d(0x36b)];else{if(_0x18db83[_0x34e64d(0x36b)])_0x221a4b=!![];}dbConfig[_0x34e64d(0x255)]('bot')[_0x34e64d(0x240)]({'botID':botID})[_0x34e64d(0x372)](_0x18db83)[_0x34e64d(0x2ba)]();}else dbConfig[_0x34e64d(0x255)](_0x34e64d(0x234))[_0x34e64d(0x301)](_0x18db83)[_0x34e64d(0x2ba)](),_0x221a4b=!![],process['send']({'status':_0x34e64d(0x27c),'live':_0x34e64d(0x2ef)},_0x442bd7=>{});process[_0x34e64d(0x278)]({'botname':_0x18db83['botname']},_0x36305a=>{}),config={..._0x18db83},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x221a4b)await reset(!![]);else _0x1e5391||_0x17374b?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x34e64d(0x37d));}async function storeHeadless(_0x86f82e){const _0x5a9bbc=_0x1f5be6,_0x17650d={...config,'headless':_0x86f82e[_0x5a9bbc(0x337)]};let _0x12435b=dbConfig[_0x5a9bbc(0x255)](_0x5a9bbc(0x234))[_0x5a9bbc(0x240)]({'botID':botID})[_0x5a9bbc(0x2c2)]();_0x12435b&&dbConfig['get'](_0x5a9bbc(0x234))[_0x5a9bbc(0x240)]({'botID':botID})[_0x5a9bbc(0x372)](_0x17650d)[_0x5a9bbc(0x2ba)](),config={..._0x17650d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4f369e){const _0x237683=_0x1f5be6,_0x3c2454={...config,'fiat':_0x4f369e};let _0x53b09c=dbConfig[_0x237683(0x255)](_0x237683(0x234))[_0x237683(0x240)]({'botID':botID})[_0x237683(0x2c2)]();_0x53b09c&&dbConfig[_0x237683(0x255)](_0x237683(0x234))[_0x237683(0x240)]({'botID':botID})[_0x237683(0x372)](_0x3c2454)['write'](),config={..._0x3c2454},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x6cd140=_0x1f5be6;logger[_0x6cd140(0x363)]('Resetting\x20bot\x20history');try{if(fs[_0x6cd140(0x270)](path[_0x6cd140(0x2af)](configpath,'bot-'+botID+'-events.json')))fs[_0x6cd140(0x350)](path[_0x6cd140(0x2af)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x6cd140(0x270)](path[_0x6cd140(0x2af)](configpath,_0x6cd140(0x30f)+botID+_0x6cd140(0x32f))))fs[_0x6cd140(0x350)](path[_0x6cd140(0x2af)](configpath,'bot-'+botID+_0x6cd140(0x32f)));if(fs['existsSync'](path['join'](configpath,_0x6cd140(0x30f)+botID+'-results.json')))fs[_0x6cd140(0x350)](path[_0x6cd140(0x2af)](configpath,_0x6cd140(0x30f)+botID+_0x6cd140(0x300)));}catch(_0x9e218f){if(_0x9e218f)logger[_0x6cd140(0x363)](_0x6cd140(0x2d2),_0x9e218f);}const _0x51bb9a=getDate();let _0x296522=[];currentCoins[_0x6cd140(0x305)](_0x650eda=>{const _0x2d9827=_0x6cd140;_0x296522[_0x2d9827(0x301)]({'coin':_0x650eda['coin'],'number':_0x650eda[_0x2d9827(0x263)],'price':_0x650eda['last']});});let _0x1ef1ce=dbConfig[_0x6cd140(0x255)](_0x6cd140(0x234))[_0x6cd140(0x240)]({'botID':botID})[_0x6cd140(0x2c2)]();_0x1ef1ce&&(dbConfig[_0x6cd140(0x255)]('bot')['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x51bb9a,'changes':_0x296522}]})[_0x6cd140(0x2ba)](),config[_0x6cd140(0x312)]=[]),process[_0x6cd140(0x278)]({'stop':_0x6cd140(0x259)},_0x8a0386=>{});}function noslash(_0x1232ae){const _0x435d36=_0x1f5be6;return _0x1232ae[_0x435d36(0x267)]('/','');}function updateHighestFee(_0x3024d9){const _0xf5039c=_0x1f5be6;if(_0x3024d9[_0xf5039c(0x266)]){let _0x1d2119={'filled':_0x3024d9['filled']*_0x3024d9[_0xf5039c(0x30c)],'amount':_0x3024d9[_0xf5039c(0x2e6)]*_0x3024d9['price'],'side':_0x3024d9[_0xf5039c(0x268)]==_0xf5039c(0x342)?_0xf5039c(0x2ee):'sell','price':0x1/_0x3024d9[_0xf5039c(0x30c)]};_0x3024d9={..._0x3024d9,..._0x1d2119};}const _0x53a46b=defaultFee*_0x3024d9[_0xf5039c(0x2e6)]*_0x3024d9[_0xf5039c(0x30c)];lastFees[_0xf5039c(0x238)]['length']===0x14&&lastFees[_0xf5039c(0x238)][_0xf5039c(0x257)](),lastFees['recent20'][_0xf5039c(0x301)](_0x53a46b),lastFees['highest']=Math['max'](...lastFees[_0xf5039c(0x238)]);}async function updateNumberCoinsCcxt(_0x368ec4){const _0x5c7ae8=_0x1f5be6;logger[_0x5c7ae8(0x309)](_0x5c7ae8(0x1f2)+_0x368ec4[_0x5c7ae8(0x2fb)]+_0x5c7ae8(0x23e)+_0x368ec4['status']+'\x20|\x20'+_0x368ec4[_0x5c7ae8(0x2e6)]+_0x5c7ae8(0x2ec)+_0x368ec4[_0x5c7ae8(0x2a5)]+'\x20|\x20'+_0x368ec4['id']);let _0x174e97=_0x368ec4[_0x5c7ae8(0x348)],_0x3c9334=![];currentCoins['forEach'](_0x5a8407=>{const _0x13dd8e=_0x5c7ae8;_0x5a8407[_0x13dd8e(0x2fb)]==_0x368ec4[_0x13dd8e(0x2fb)]&&(_0x3c9334=!![]);});if(!_0x3c9334)return;const _0x5b50cf=currentCoins['find'](_0xe8b5e2=>_0xe8b5e2[_0x5c7ae8(0x2fb)]==_0x368ec4[_0x5c7ae8(0x2fb)]),_0x113474=_0x10ec61=>{if(_0x5b50cf)_0x5b50cf['orderstatus']=_0x10ec61;};if(_0x174e97==_0x5c7ae8(0x2da))_0x113474(_0x5c7ae8(0x2da));else{if(_0x174e97==_0x5c7ae8(0x207)){_0x113474(_0x5c7ae8(0x207));const _0x20840d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x20840d,await getOpenOrders(),handleOpenOrders();}else{if(_0x174e97=='closed'){let _0x5bb4b6=![];if(lastOrders)for(const _0x27a690 of lastOrders){const _0x6882c3=0xc8,_0x2d2e14=0x1388;let _0x5927d5=0x0;while(!_0x27a690['orderId']&&_0x5927d5*_0x6882c3<_0x2d2e14){_0x5927d5++,await sleep(_0x6882c3);}if(_0x5927d5>0x0)logger['debug'](_0x5c7ae8(0x252)+_0x5927d5*_0x6882c3/0x3e8+_0x5c7ae8(0x2a2));if(_0x27a690[_0x5c7ae8(0x27d)]==_0x368ec4['id']){logger[_0x5c7ae8(0x309)](_0x5c7ae8(0x24e)+_0x368ec4['id']),_0x5bb4b6=!![];if(_0x27a690['filled']==0x0){logger[_0x5c7ae8(0x309)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x368ec4['id']);if(_0x368ec4[_0x5c7ae8(0x2ff)])_0x27a690[_0x5c7ae8(0x30c)]=_0x368ec4[_0x5c7ae8(0x2ff)];else{if(_0x368ec4[_0x5c7ae8(0x30c)])_0x27a690[_0x5c7ae8(0x30c)]=_0x368ec4[_0x5c7ae8(0x30c)];else{}}_0x27a690[_0x5c7ae8(0x2e6)]=_0x368ec4[_0x5c7ae8(0x2e6)],updateHighestFee(_0x27a690),_0x113474(_0x5c7ae8(0x2e6)),await validateOrders();if(lockOrders==ORDERS[_0x5c7ae8(0x298)]){const _0x4bed0d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4bed0d;}_0x27a690[_0x5c7ae8(0x20c)]={'currency':_0x368ec4[_0x5c7ae8(0x20c)]?_0x368ec4[_0x5c7ae8(0x20c)]['currency']:null,'cost':_0x368ec4[_0x5c7ae8(0x20c)]?_0x368ec4[_0x5c7ae8(0x20c)][_0x5c7ae8(0x23b)]:0x0},await updateCoinResults(_0x27a690);}}}if(!_0x5bb4b6){logger[_0x5c7ae8(0x309)](_0x5c7ae8(0x2dc)+_0x368ec4['id']),_0x113474(_0x5c7ae8(0x2e6));const _0x4a91b8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4a91b8,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1bf8f9=JSON['parse'](lastBalances[_0x5c7ae8(0x214)]);const _0x117eff=_0x1bf8f9['find'](_0x4c5100=>_0x4c5100[_0x5c7ae8(0x2fb)]==_0x368ec4[_0x5c7ae8(0x2fb)]);if(_0x117eff){if(_0x174e97=='open')_0x117eff[_0x5c7ae8(0x322)]=_0x117eff[_0x5c7ae8(0x322)]==_0x5c7ae8(0x2e6)?'filled':_0x5c7ae8(0x2da);else{if(_0x174e97==_0x5c7ae8(0x207))_0x117eff[_0x5c7ae8(0x322)]=_0x117eff[_0x5c7ae8(0x322)]==_0x5c7ae8(0x2e6)?_0x5c7ae8(0x2e6):'canceled';else _0x174e97==_0x5c7ae8(0x2d7)&&(_0x117eff[_0x5c7ae8(0x322)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x1bf8f9)},proxyEmit(_0x5c7ae8(0x329),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5ecd1c=_0x1f5be6;await getOpenOrders();let _0x41a766=![];currentCoins[_0x5ecd1c(0x305)](_0x938e77=>{const _0x40352f=_0x5ecd1c;_0x41a766=allOpenOrders['find'](_0x3188e4=>_0x3188e4[_0x40352f(0x2fb)]==_0x938e77[_0x40352f(0x2fb)]),_0x938e77[_0x40352f(0x322)]=_0x41a766?'open':_0x40352f(0x279);});}async function getCoins(_0x4564c0=0x0,_0x2cbc2f=!![],_0x344a53=config[_0x1f5be6(0x2a7)]){const _0x8adc15=_0x1f5be6;let _0x1ee445,_0x27a1b2=[],_0x5c9ba5=[],_0x3974a0=[];if(_0x4564c0)await sleep(_0x4564c0);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1ee445=await exchange['fetchBalance'](),mybalances=_0x1ee445[_0x8adc15(0x359)];for(const [_0x3c6c3a,_0x32a64f]of Object[_0x8adc15(0x204)](mybalances)){_0x3974a0['push'](_0x3c6c3a);}config[_0x8adc15(0x214)][_0x8adc15(0x305)](_0x1b01ef=>{const _0x1c7d4e=_0x8adc15;!_0x3974a0[_0x1c7d4e(0x2cc)](_0x1b01ef[_0x1c7d4e(0x22e)])&&(mybalances[_0x1b01ef[_0x1c7d4e(0x22e)]]=0x0);});if(_0x344a53=='')for(const [_0x2645de,_0x724d86]of Object[_0x8adc15(0x204)](mybalances)){_0x724d86!=0x0&&_0x27a1b2[_0x8adc15(0x301)]({'coin':_0x2645de});}else{let _0x5cf617=![];for(const [_0x49643f,_0x2481aa]of Object[_0x8adc15(0x204)](mybalances)){const _0x5574d7=config[_0x8adc15(0x214)][_0x8adc15(0x240)](_0x11d681=>_0x11d681[_0x8adc15(0x22e)]==_0x49643f),_0x15b66a=_0x49643f+'/'+_0x344a53,_0x3b321e=_0x344a53+'/'+_0x49643f,_0x52de66=currentCoins[_0x8adc15(0x240)](_0x2e28f4=>_0x2e28f4[_0x8adc15(0x22e)]==_0x49643f);_0x5cf617=![];if((_0x2481aa!=0x0||_0x5574d7)&&(allSymbols[_0x8adc15(0x2cc)](_0x15b66a)||_0x49643f==_0x344a53))_0x27a1b2[_0x8adc15(0x301)]({'coin':_0x49643f,'symbol':_0x15b66a,'reverse':![],'number':Math[_0x8adc15(0x34e)](_0x2481aa+(_0x5574d7&&_0x5574d7['offset']||0x0),0x0),'orderstatus':_0x52de66?_0x52de66['orderstatus']:_0x8adc15(0x279)});else{if((_0x2481aa!=0x0||_0x5574d7)&&allSymbols[_0x8adc15(0x2cc)](_0x3b321e))_0x27a1b2['push']({'coin':_0x49643f,'symbol':_0x3b321e,'reverse':!![],'number':Math[_0x8adc15(0x34e)](_0x2481aa+(_0x5574d7&&_0x5574d7[_0x8adc15(0x250)]||0x0),0x0),'orderstatus':_0x52de66?_0x52de66[_0x8adc15(0x322)]:'none'});else _0x5574d7&&_0x27a1b2['push']({'coin':_0x5574d7[_0x8adc15(0x22e)],'symbol':_0x5574d7['symbol'],'reverse':_0x5574d7['reverse'],'number':0x0,'orderstatus':_0x8adc15(0x279)});}}}}catch(_0x42e053){if(!_0x2cbc2f)handleErrorNoStop(_0x42e053,'getCoins()');else await handleError(_0x42e053,_0x8adc15(0x256));}return _0x5c9ba5=cloneDeep(_0x27a1b2),_0x27a1b2=_0x27a1b2[_0x8adc15(0x339)](_0x27a7d3=>{const _0x585caf=_0x8adc15,_0xfedb17=config[_0x585caf(0x214)]['find'](_0x15494c=>_0x15494c[_0x585caf(0x22e)]==_0x27a7d3[_0x585caf(0x22e)]);return _0xfedb17&&!_0xfedb17[_0x585caf(0x2a9)];}),[_0x27a1b2,_0x5c9ba5];}async function getCoinNumber(_0x430d53){const _0x93d516=_0x1f5be6;let _0x2589d5;try{const _0x256398=await exchange[_0x93d516(0x29d)]();_0x2589d5=_0x256398[_0x93d516(0x359)][_0x430d53];}catch(_0xb9d8e7){await handleError(_0xb9d8e7,'getCoinNumber()');}return _0x2589d5;}async function getOpenOrders(){const _0x1ad923=_0x1f5be6;let _0x472f01;allOpenOrders=[];try{for(const _0x1e3292 of config[_0x1ad923(0x214)]){!_0x1e3292['excluded']&&_0x1e3292[_0x1ad923(0x22e)]!=config[_0x1ad923(0x2a7)]&&(_0x472f01=await exchange[_0x1ad923(0x34d)](_0x1e3292[_0x1ad923(0x2fb)]),_0x472f01['length']>0x0&&allOpenOrders[_0x1ad923(0x301)](_0x472f01[0x0]));}}catch(_0x43603f){await handleError(_0x43603f,'getOpenOrders()');}}async function handleOpenOrders(_0x586b3=0x0){const _0xbc37b3=_0x1f5be6;allOpenOrders[_0xbc37b3(0x2c6)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x586b3==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x586b3++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xbc37b3(0x309)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0xbc37b3(0x2aa))));}async function testAPI(_0x2a507c){const _0x5a8189=_0x1f5be6,_0x211afa=ccxt[_0x5a8189(0x30a)][_0x2a507c[_0x5a8189(0x356)][_0x5a8189(0x338)]()],_0x1e6ade=new _0x211afa({'apiKey':_0x2a507c[_0x5a8189(0x20e)],'secret':_0x2a507c[_0x5a8189(0x367)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5a8189(0x320)}});if(_0x2a507c['apiPassword'])_0x1e6ade[_0x5a8189(0x31c)]=_0x2a507c[_0x5a8189(0x36b)];try{await _0x1e6ade[_0x5a8189(0x277)]();}catch(_0x2132d6){throw _0x2132d6;}}function cloneDeep(_0x14977d){const _0x15d2e3=_0x1f5be6;return JSON[_0x15d2e3(0x2a8)](JSON[_0x15d2e3(0x34b)](_0x14977d));}async function getPortfolio(_0x4dc681){const _0x41735e=_0x1f5be6;let _0x52e6b4=[],_0xb0b470=[],_0x12a8b5=[],_0xd04dd;if(_0x4dc681[_0x41735e(0x20e)]!=='************'||_0x4dc681[_0x41735e(0x367)]!=='************'||_0x4dc681[_0x41735e(0x36b)]&&_0x4dc681[_0x41735e(0x36b)]!==_0x41735e(0x361)){if(config[_0x41735e(0x356)]){if(_0x4dc681[_0x41735e(0x20e)]=='************')_0x4dc681[_0x41735e(0x20e)]=config[_0x41735e(0x20e)];if(_0x4dc681['apiSecret']=='************')_0x4dc681[_0x41735e(0x367)]=config[_0x41735e(0x367)];if(_0x4dc681['apiPassword']=='************')_0x4dc681['apiPassword']=config['apiPassword'];try{await testAPI(_0x4dc681);}catch(_0x47fd9c){if(_0x47fd9c['toString']()[_0x41735e(0x2cc)](_0x41735e(0x2cb))){logger[_0x41735e(0x309)](_0x41735e(0x2ca)),proxyEmit('portfolio',![]);return;}else{handleError(_0x47fd9c,_0x41735e(0x1fc));return;}}}await initExchange(_0x4dc681['exchange'],_0x4dc681[_0x41735e(0x20e)],_0x4dc681['apiSecret'],_0x4dc681[_0x41735e(0x36b)]);try{await loadSymbols();}catch(_0x288d00){if(_0x288d00[_0x41735e(0x2bb)]()[_0x41735e(0x2cc)](_0x41735e(0x2cb))){proxyEmit(_0x41735e(0x214),![]);return;}else{handleError(_0x288d00,'getPortfolio(1)');return;}}const _0x23180e=await getCoins(0x0,![],_0x4dc681['basecoin']);_0x12a8b5=cloneDeep(_0x23180e[0x1]);}else{const _0x370a7a=await getCoins();_0x12a8b5=cloneDeep(_0x370a7a[0x1]);}if(_0x4dc681[_0x41735e(0x2a7)]=='')proxyEmit(_0x41735e(0x214),_0x12a8b5);else{_0x12a8b5['forEach'](_0x308db1=>{const _0x38a153=_0x41735e;if(_0x308db1[_0x38a153(0x22e)]!=_0x4dc681[_0x38a153(0x2a7)]&&allSymbols['includes'](_0x308db1['symbol']))_0x52e6b4['push'](_0x308db1[_0x38a153(0x2fb)]);});if(_0x52e6b4[_0x41735e(0x2c6)]==0x0)logHistory('error',_0x41735e(0x2a0));else{try{_0xb0b470=await getTickers(_0x52e6b4);}catch(_0x27d311){if(_0x27d311[_0x41735e(0x2bb)]()[_0x41735e(0x2cc)](_0x41735e(0x2cb))){proxyEmit(_0x41735e(0x214),![]);return;}else handleError(_0x27d311,_0x41735e(0x25b));}_0x12a8b5['forEach'](_0x452d02=>{const _0xf8727f=_0x41735e;_0x452d02['coin']!=_0x4dc681[_0xf8727f(0x2a7)]?_0xb0b470[_0x452d02[_0xf8727f(0x2fb)]]?_0xd04dd=_0x452d02[_0xf8727f(0x266)]?0x1/_0xb0b470[_0x452d02['symbol']][_0xf8727f(0x27e)]:_0xb0b470[_0x452d02[_0xf8727f(0x2fb)]][_0xf8727f(0x27e)]:_0xd04dd=0x0:_0xd04dd=0x1,_0x452d02[_0xf8727f(0x30c)]=formatResult(_0xd04dd,0x8);}),proxyEmit(_0x41735e(0x214),_0x12a8b5);}}}function truncateTradeAmount(_0x40ca58,_0x4c038e){const _0x1041c6=_0x1f5be6;let _0x31b5ff=0x0;try{_0x31b5ff=exchange[_0x1041c6(0x2ea)](_0x40ca58,_0x4c038e);}catch(_0x355ad1){}return _0x31b5ff;}function checkMinimums(_0x698fa5){const _0x2bfc27=_0x1f5be6;let _0x3d292e=!![];const _0x2d78fe=!_0x698fa5[_0x2bfc27(0x266)]?markets[_0x698fa5[_0x2bfc27(0x2fb)]][_0x2bfc27(0x2f4)][_0x2bfc27(0x2a5)][_0x2bfc27(0x299)]:markets[_0x698fa5[_0x2bfc27(0x2fb)]]['limits'][_0x2bfc27(0x23b)][_0x2bfc27(0x299)],_0x1094f6=!_0x698fa5[_0x2bfc27(0x266)]?markets[_0x698fa5[_0x2bfc27(0x2fb)]][_0x2bfc27(0x2f4)]['cost'][_0x2bfc27(0x299)]:markets[_0x698fa5[_0x2bfc27(0x2fb)]][_0x2bfc27(0x2f4)][_0x2bfc27(0x2a5)][_0x2bfc27(0x299)],_0x399ba5=truncateTradeAmount(_0x698fa5[_0x2bfc27(0x2fb)],_0x698fa5[_0x2bfc27(0x29a)]);_0x698fa5[_0x2bfc27(0x29a)]=_0x399ba5;if(Math[_0x2bfc27(0x2f0)](_0x399ba5)<_0x2d78fe)_0x3d292e=![];if(Math[_0x2bfc27(0x2f0)](_0x399ba5)*_0x698fa5['last']<_0x1094f6)_0x3d292e=![];if(_0x698fa5[_0x2bfc27(0x268)]==_0x2bfc27(0x342)){let _0x34033a=config['portfolio']['find'](_0x299018=>_0x299018[_0x2bfc27(0x22e)]==_0x698fa5[_0x2bfc27(0x22e)]);if(_0x34033a[_0x2bfc27(0x250)]>0x0){if(Math[_0x2bfc27(0x2f0)](_0x399ba5)>_0x698fa5['number']-_0x34033a[_0x2bfc27(0x250)])_0x3d292e=![];}else{if(Math[_0x2bfc27(0x2f0)](_0x399ba5)>_0x698fa5[_0x2bfc27(0x263)])_0x3d292e=![];}}if(_0x698fa5[_0x2bfc27(0x268)]==_0x2bfc27(0x2ee)){let _0x3e0fbe=config[_0x2bfc27(0x214)][_0x2bfc27(0x240)](_0x187798=>_0x187798[_0x2bfc27(0x22e)]==config[_0x2bfc27(0x2a7)]),_0x2b4902=currentCoins[_0x2bfc27(0x240)](_0x391dbb=>_0x391dbb['coin']==config[_0x2bfc27(0x2a7)]);if(_0x3e0fbe[_0x2bfc27(0x250)]>0x0){if(Math[_0x2bfc27(0x2f0)](_0x399ba5)*_0x698fa5[_0x2bfc27(0x27e)]>_0x2b4902['number']-_0x3e0fbe[_0x2bfc27(0x250)])_0x3d292e=![];}else{if(Math[_0x2bfc27(0x2f0)](_0x399ba5)*_0x698fa5[_0x2bfc27(0x27e)]>_0x2b4902['number'])_0x3d292e=![];}}return _0x3d292e;}async function getBalances(_0x4b7c3a=!![]){const _0x31102c=_0x1f5be6;let _0x49207a=0x0,_0x32723e;const _0xb3cf1b=config[_0x31102c(0x360)];if(config[_0x31102c(0x337)]&&config[_0x31102c(0x208)]<0x0)await validate24hChanges();currentCoins[_0x31102c(0x305)](_0x19235c=>{const _0x280c54=_0x31102c;if(_0x19235c[_0x280c54(0x22e)]!=config[_0x280c54(0x2a7)]){let _0x49f43d=global[_0x280c54(0x2e4)][noslash(_0x19235c[_0x280c54(0x2fb)])];_0x32723e=_0x19235c[_0x280c54(0x266)]?0x1/_0x49f43d:_0x49f43d;}else _0x32723e=0x1;let _0x5e8799=_0x19235c[_0x280c54(0x263)]*_0x32723e;_0x49207a+=_0x5e8799,_0x19235c[_0x280c54(0x27e)]=formatResult(Number(_0x32723e),0x8),_0x19235c[_0x280c54(0x2c2)]=_0x5e8799;}),currentCoins[_0x31102c(0x305)](_0x283f93=>{const _0x3a923d=_0x31102c;let _0x305e86=config[_0x3a923d(0x214)][_0x3a923d(0x240)](_0x511c90=>_0x511c90[_0x3a923d(0x22e)]==_0x283f93[_0x3a923d(0x22e)]),_0x248405=Number(_0x305e86[_0x3a923d(0x1fa)]),_0x5ccbe3=_0x283f93[_0x3a923d(0x2c2)]/_0x49207a*0x64,_0x54910d=_0x248405*_0x49207a/0x64/_0x283f93[_0x3a923d(0x27e)]-_0x283f93['number'];_0x283f93[_0x3a923d(0x1fa)]=formatResult(_0x5ccbe3,0x3),_0x283f93['target']=formatResult(_0x248405,0x3),_0x283f93[_0x3a923d(0x29a)]=formatResult(_0x54910d,0x8),_0x283f93[_0x3a923d(0x268)]='',_0x283f93['valid']=![];if(_0x283f93[_0x3a923d(0x22e)]!=config[_0x3a923d(0x2a7)]){if(_0x283f93[_0x3a923d(0x1fa)]>_0x248405)_0x283f93[_0x3a923d(0x268)]=_0x3a923d(0x342),_0x283f93['valid']=checkMinimums(_0x283f93);else _0x283f93[_0x3a923d(0x1fa)]<_0x248405&&(_0x283f93[_0x3a923d(0x268)]=_0x3a923d(0x2ee),_0x283f93[_0x3a923d(0x20b)]=checkMinimums(_0x283f93));}_0x283f93['delta']=_0x283f93[_0x3a923d(0x1fa)]/_0x283f93[_0x3a923d(0x203)]-0x1;if(_0x283f93[_0x3a923d(0x322)]==_0x3a923d(0x2e6)||_0x283f93['orderstatus']==_0x3a923d(0x207))_0x283f93[_0x3a923d(0x322)]=_0x3a923d(0x279);}),currentCoins['sort']((_0x499553,_0xe1a846)=>_0x499553['delta']<_0xe1a846[_0x31102c(0x369)]?0x1:_0xe1a846[_0x31102c(0x369)]<_0x499553['delta']?-0x1:0x0);const _0x1413fe=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1413fe['eur'],'usd':_0x1413fe['usd'],'portfolio':JSON[_0x31102c(0x34b)](currentCoins),'threshold':_0xb3cf1b},proxyEmit(_0x31102c(0x329),{'serverversion':serverversion,'balances':lastBalances});if(_0x4b7c3a){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xb3cf1b});else{if(lockOrders==ORDERS[_0x31102c(0x353)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xb3cf1b});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x259307=getNormalizedPerformance();getStartingBalances(_0x259307),emitPerformance(_0x259307);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x382737=getNormalizedPerformance();emitPerformance(_0x382737),getStartingBalances(_0x382737),logger[_0x31102c(0x309)](_0x31102c(0x36c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x460efa=_0x1f5be6;if(!lastBalances)return;let _0x2029da=[],_0x2008d2,_0x4905bf=JSON[_0x460efa(0x2a8)](lastBalances[_0x460efa(0x214)]);_0x4905bf['sort']((_0x5efd2e,_0x27ebd8)=>_0x5efd2e['coin']>_0x27ebd8['coin']?0x1:_0x27ebd8[_0x460efa(0x22e)]>_0x5efd2e['coin']?-0x1:0x0),_0x4905bf[_0x460efa(0x305)](_0x571fa9=>{const _0x4583f8=_0x460efa;let _0x36ab49={'coin':_0x571fa9['coin'],'number':_0x571fa9['number'],'price':_0x571fa9[_0x4583f8(0x27e)]};_0x2029da[_0x4583f8(0x301)](_0x36ab49);});const _0x1f0d82=await getFiat();_0x2008d2={'date':lastBalances[_0x460efa(0x366)][_0x460efa(0x2e5)]('\x20')[0x0],'eur':_0x1f0d82['eur'],'usd':_0x1f0d82[_0x460efa(0x1f7)],'coins':_0x2029da};let _0x1a4afe=dbPerformance[_0x460efa(0x255)](_0x460efa(0x2f6))['find']({'date':_0x2008d2[_0x460efa(0x27a)]})[_0x460efa(0x2c2)]();_0x1a4afe?_0x2008d2['date']!=config['startdate']&&dbPerformance[_0x460efa(0x255)](_0x460efa(0x2f6))['find']({'date':_0x2008d2[_0x460efa(0x27a)]})[_0x460efa(0x372)](_0x2008d2)['write']():dbPerformance[_0x460efa(0x255)]('data')['push'](_0x2008d2)[_0x460efa(0x2ba)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xdd4696=_0x1f5be6;let _0x26b97b=[];if(dbPerformance['has']('data')[_0xdd4696(0x2c2)]()){let _0x16b492=dbPerformance['get'](_0xdd4696(0x2f6))['cloneDeep']()[_0xdd4696(0x339)](_0x274aa7=>{const _0x1036db=_0xdd4696;if(_0x274aa7[_0x1036db(0x2d0)][_0x1036db(0x2c6)]==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x5823da=[...config[_0xdd4696(0x312)]];_0x5823da[_0xdd4696(0x237)]((_0x2bc76d,_0x494e60)=>_0x2bc76d[_0xdd4696(0x27a)]>_0x494e60[_0xdd4696(0x27a)]?-0x1:_0x494e60['date']>_0x2bc76d[_0xdd4696(0x27a)]?0x1:0x0);let _0x44ef7b=0x1,_0x37cfaa=[],_0x2e7e09=0x0;_0x16b492[_0xdd4696(0x35c)]()[_0xdd4696(0x266)]()[_0xdd4696(0x305)]((_0x239ed0,_0x29dea8)=>{const _0x343dc5=_0xdd4696;if(_0x5823da[_0x2e7e09]){if(_0x16b492[_0x16b492[_0x343dc5(0x2c6)]-_0x29dea8]&&_0x5823da[_0x2e7e09][_0x343dc5(0x27a)]==_0x16b492[_0x16b492[_0x343dc5(0x2c6)]-_0x29dea8]['date']){if(_0x29dea8<_0x16b492[_0x343dc5(0x2c6)]){let _0x3a603f=0x0,_0xd03e9d=0x0;_0x16b492[_0x16b492[_0x343dc5(0x2c6)]-_0x29dea8][_0x343dc5(0x2d0)][_0x343dc5(0x305)](_0x14cf1f=>{const _0x30aac0=_0x343dc5;_0xd03e9d+=_0x14cf1f[_0x30aac0(0x263)]*_0x14cf1f[_0x30aac0(0x30c)];}),_0x5823da[_0x2e7e09][_0x343dc5(0x292)][_0x343dc5(0x305)](_0x2921b9=>{const _0x102c1c=_0x343dc5;_0x3a603f+=_0x2921b9[_0x102c1c(0x263)]*_0x2921b9[_0x102c1c(0x30c)];}),_0x44ef7b*=_0x3a603f/(_0xd03e9d-_0x3a603f)+0x1;}_0x2e7e09++;}}let _0x21aada=0x0;_0x239ed0['coins'][_0x343dc5(0x305)](_0x563905=>{const _0xad20a8=_0x343dc5;_0x21aada+=_0x563905[_0xad20a8(0x263)]*_0x563905[_0xad20a8(0x30c)];}),_0x37cfaa[_0x16b492[_0x343dc5(0x2c6)]-_0x29dea8-0x1]=_0x21aada*(_0x44ef7b-0x1);});let _0x2d2fc4=[];_0x5823da=[...config[_0xdd4696(0x312)]]||[];let _0x10fae6=0x0;_0x2e7e09=0x0,_0x16b492['forEach']((_0x2f6f68,_0x133ef7)=>{const _0x55ab49=_0xdd4696;if(_0x5823da[_0x2e7e09]){const _0x865510=fns[_0x55ab49(0x2a8)](_0x5823da[_0x2e7e09][_0x55ab49(0x27a)],_0x55ab49(0x306),new Date()),_0x29aef5=fns[_0x55ab49(0x2a8)](_0x2f6f68['date'],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x865510,_0x29aef5)){let _0x4a7eb1=0x0;_0x5823da[_0x2e7e09][_0x55ab49(0x292)][_0x55ab49(0x305)](_0xeb8a7a=>{const _0x12842e=_0x55ab49;!_0x2d2fc4[_0xeb8a7a['coin']]?_0x2d2fc4[_0xeb8a7a[_0x12842e(0x22e)]]=_0xeb8a7a[_0x12842e(0x263)]:(_0x4a7eb1=_0x2d2fc4[_0xeb8a7a[_0x12842e(0x22e)]],_0x2d2fc4[_0xeb8a7a[_0x12842e(0x22e)]]+=_0xeb8a7a[_0x12842e(0x263)]);const _0x54aab9=_0x2f6f68[_0x12842e(0x2d0)][_0x12842e(0x240)](_0x4af62a=>_0x4af62a['coin']==_0xeb8a7a[_0x12842e(0x22e)]);(!_0x54aab9||_0x54aab9[_0x12842e(0x263)]==0x0)&&(_0x10fae6+=(-_0xeb8a7a[_0x12842e(0x263)]-_0x4a7eb1)*_0xeb8a7a['price']);}),_0x2e7e09++;}}_0x2f6f68['coins'][_0x55ab49(0x305)]((_0x48de42,_0x3d3423)=>{const _0x1d9860=_0x55ab49;_0x2d2fc4[_0x48de42['coin']]&&(_0x48de42[_0x1d9860(0x35a)]=_0x2d2fc4[_0x48de42[_0x1d9860(0x22e)]]);}),_0x26b97b[_0x55ab49(0x301)]({'date':_0x2f6f68[_0x55ab49(0x27a)],'eur':_0x2f6f68['eur'],'usd':_0x2f6f68[_0x55ab49(0x1f7)],'offset':_0x37cfaa[_0x133ef7],'netoffset':_0x10fae6,'coins':_0x2f6f68[_0x55ab49(0x2d0)]});});}return _0x26b97b;}function emitPerformance(_0x4cc16d){const _0x28e3b5=_0x1f5be6;_0x4cc16d['length']!==0x0?(proxyEmit(_0x28e3b5(0x20d),_0x4cc16d),lastPerformanceEmitted=getDate()):proxyEmit(_0x28e3b5(0x20d),[]);}function getPerf(_0xd4c5f9,_0x17725e){const _0x3abb27=_0x1f5be6;let _0x25e5ce=0x0,_0x5e514d=0x0,_0x666291=0x0;_0xd4c5f9[_0x3abb27(0x2d0)][_0x3abb27(0x305)](_0x3f48ed=>{const _0x505eac=_0x3abb27;_0x25e5ce+=_0x3f48ed[_0x505eac(0x263)]*_0x3f48ed[_0x505eac(0x30c)];});_0x17725e&&(_0x25e5ce+=_0xd4c5f9[_0x3abb27(0x250)]);if(config[_0x3abb27(0x2a7)]===_0x3abb27(0x335)||config[_0x3abb27(0x2a7)]===_0x3abb27(0x31a)||config['basecoin']==='PAXG')_0x5e514d=_0x25e5ce*_0xd4c5f9[_0x3abb27(0x1ee)],_0x666291=_0x25e5ce*_0xd4c5f9[_0x3abb27(0x1f7)];else{if(usdBasecoins['includes'](config['basecoin']))_0x5e514d=_0x25e5ce*_0xd4c5f9['eur']/_0xd4c5f9['usd'],_0x666291=_0x25e5ce;else config['basecoin']===_0x3abb27(0x275)&&(_0x5e514d=_0x25e5ce,_0x666291=_0x25e5ce*_0xd4c5f9[_0x3abb27(0x1f7)]/_0xd4c5f9['eur']);}return[_0x25e5ce,_0x5e514d,_0x666291];}function getKPIs(_0x18f7c2,_0x3c7693=_0x1f5be6(0x275)){const _0x24dec4=_0x1f5be6,_0x20b242=config[_0x24dec4(0x2a7)],_0x172e09=lastBalances,_0x1e4238=currentCoins,_0x10ff10=getNormalizedPerformance(),_0x1ad764=_0x18f7c2===_0x24dec4(0x2a7)?_0x20b242:_0x18f7c2===_0x24dec4(0x29c)||_0x18f7c2==='net-fiat'?_0x3c7693:_0x24dec4(0x262)+_0x20b242,_0x555d5c=_0x18f7c2===_0x24dec4(0x2a6)?_0x24dec4(0x21c):_0x18f7c2==='net-fiat'?_0x24dec4(0x21c):_0x1ad764+_0x24dec4(0x2d3),_0x2027ea=_0x18f7c2===_0x24dec4(0x2a6)||_0x18f7c2===_0x24dec4(0x318)?_0x24dec4(0x21c):_0x1ad764+_0x24dec4(0x2df);let _0x39f549=0x0;_0x1e4238[_0x24dec4(0x305)](_0x3df6dd=>{const _0x78dc1b=_0x24dec4;_0x39f549+=_0x3df6dd[_0x78dc1b(0x263)]*_0x3df6dd[_0x78dc1b(0x27e)];});if(_0x18f7c2===_0x24dec4(0x29c)||_0x18f7c2==='net-fiat'){if(_0x20b242===_0x24dec4(0x335)||_0x20b242===_0x24dec4(0x31a)||_0x20b242==='PAXG')_0x39f549=_0x39f549*(_0x3c7693===_0x24dec4(0x275)?_0x172e09[_0x24dec4(0x1ee)]:_0x172e09[_0x24dec4(0x1f7)]);else{if(usdBasecoins['includes'](_0x20b242))_0x39f549=_0x39f549*(_0x3c7693===_0x24dec4(0x275)?_0x172e09[_0x24dec4(0x1ee)]/_0x172e09[_0x24dec4(0x1f7)]:0x1);else _0x20b242===_0x24dec4(0x275)&&(_0x39f549=_0x39f549*(_0x3c7693===_0x24dec4(0x275)?0x1:_0x172e09[_0x24dec4(0x1f7)]/_0x172e09[_0x24dec4(0x1ee)]));}}let _0x5f1f69;if(_0x39f549!==0x0){if(_0x18f7c2===_0x24dec4(0x2a7))_0x5f1f69=(_0x39f549/startingBalances['basecoin']-0x1)*0x64;else{if(_0x3c7693==='EUR')_0x5f1f69=(_0x39f549/startingBalances[_0x24dec4(0x1ee)]-0x1)*0x64;else _0x5f1f69=(_0x39f549/startingBalances[_0x24dec4(0x1f7)]-0x1)*0x64;}let _0x22395e=0x0;if(startingBalances[_0x24dec4(0x2d0)])_0x1e4238[_0x24dec4(0x305)](_0x25b06b=>{const _0x560fa9=_0x24dec4;let _0x4b1124=startingBalances[_0x560fa9(0x2d0)][_0x560fa9(0x240)](_0x22206f=>_0x22206f[_0x560fa9(0x22e)]===_0x25b06b[_0x560fa9(0x22e)]);if(_0x4b1124&&_0x4b1124[_0x560fa9(0x22e)]&&_0x25b06b[_0x560fa9(0x263)]!==0x0)_0x22395e+=_0x4b1124[_0x560fa9(0x263)]*_0x25b06b[_0x560fa9(0x27e)];});let _0x2a9fec=0x0;if(_0x10ff10['length']!==0x0){let _0xd7176=_0x10ff10[_0x10ff10[_0x24dec4(0x2c6)]-0x1];_0x2a9fec=_0xd7176[_0x24dec4(0x241)];}_0x22395e-=_0x2a9fec;_0x18f7c2==='net-basecoin'&&(_0x5f1f69=(_0x39f549-_0x22395e)/startingBalances['basecoin']*0x64,_0x39f549=_0x39f549-_0x22395e);if(_0x18f7c2==='net-fiat'){let _0x213d72=_0x3c7693===_0x24dec4(0x275)?startingBalances['eur']:startingBalances[_0x24dec4(0x1f7)];if(_0x20b242===_0x24dec4(0x335)||_0x20b242==='ETH'||_0x20b242==='PAXG')_0x22395e=_0x3c7693===_0x24dec4(0x275)?_0x22395e*_0x172e09[_0x24dec4(0x1ee)]:_0x22395e*_0x172e09[_0x24dec4(0x1f7)];else{if(usdBasecoins[_0x24dec4(0x2cc)](_0x20b242))_0x22395e=_0x3c7693==='EUR'?_0x22395e*_0x172e09[_0x24dec4(0x1ee)]/_0x172e09[_0x24dec4(0x1f7)]:_0x22395e;else _0x20b242===_0x24dec4(0x275)&&(_0x22395e=_0x3c7693===_0x24dec4(0x275)?_0x22395e:_0x22395e*_0x172e09[_0x24dec4(0x1f7)]/_0x172e09['eur']);}_0x5f1f69=(_0x39f549-_0x22395e)/_0x213d72*0x64,_0x39f549=_0x39f549-_0x22395e;}if(_0x5f1f69){if(_0x5f1f69<0x64)_0x5f1f69=_0x5f1f69['toFixed'](0x2);else{if(_0x5f1f69<0x3e8)_0x5f1f69=_0x5f1f69[_0x24dec4(0x2c3)](0x1);else _0x5f1f69=_0x5f1f69[_0x24dec4(0x2c3)](0x0);}}else _0x5f1f69=Number('0')[_0x24dec4(0x2c3)](0x2);if(_0x39f549){if(Math[_0x24dec4(0x2f0)](_0x39f549)<0.000001)_0x39f549=_0x39f549['toFixed'](0x2);else{if(Math['abs'](_0x39f549)<0.1)_0x39f549=_0x39f549[_0x24dec4(0x2c3)](0x6);else{if(Math[_0x24dec4(0x2f0)](_0x39f549)<0x1)_0x39f549=_0x39f549['toFixed'](0x5);else{if(Math['abs'](_0x39f549)<0xa)_0x39f549=_0x39f549[_0x24dec4(0x2c3)](0x4);else{if(Math['abs'](_0x39f549)<0x64)_0x39f549=_0x39f549[_0x24dec4(0x2c3)](0x3);else{if(Math['abs'](_0x39f549)<0x3e8)_0x39f549=_0x39f549['toFixed'](0x2);else _0x39f549=_0x39f549[_0x24dec4(0x2c3)](0x2);}}}}}}else _0x39f549=Number('0')['toFixed'](0x2);}else _0x5f1f69=Number('0')[_0x24dec4(0x2c3)](0x2);return{'value':_0x39f549,'change':_0x5f1f69,'leftTxt':_0x555d5c,'rightTxt':_0x2027ea};}async function getStartingBalances(_0x93219f,_0x24374a=!![]){const _0x244370=_0x1f5be6;if(_0x93219f[_0x244370(0x2c6)]!==0x0){const [_0x494fa1,_0x34b063,_0xff3c8d]=getPerf(_0x93219f[0x0],!![]);let _0x5a1f32=[];config[_0x244370(0x214)][_0x244370(0x305)](_0x3c4106=>{const _0x211069=_0x244370;let _0x438a37=0x0,_0x4f086c;config[_0x211069(0x312)][_0x211069(0x305)](_0x220abb=>{const _0x4d654e=_0x211069;let _0x38b345=_0x220abb[_0x4d654e(0x292)][_0x4d654e(0x240)](_0xb9dc57=>_0xb9dc57[_0x4d654e(0x22e)]==_0x3c4106['coin']);if(_0x38b345){_0x438a37+=_0x38b345[_0x4d654e(0x263)];if(!_0x4f086c)_0x4f086c=_0x38b345[_0x4d654e(0x30c)];}}),_0x5a1f32[_0x211069(0x301)]({'coin':_0x3c4106[_0x211069(0x22e)],'number':_0x438a37,'initialprice':_0x4f086c});});const _0xd48db={'basecoin':_0x494fa1,'eur':_0x34b063,'usd':_0xff3c8d,'coins':_0x5a1f32};if(_0x24374a)proxyEmit(_0x244370(0x2b1),_0xd48db);startingBalances=_0xd48db;}}function headlessMode(_0x13a055){const _0x565796=_0x1f5be6;let _0x1acf57=_0x13a055['portfolio'],_0x19ba3e=_0x13a055['threshold'],_0x597d70=[];for(let _0x3b04c0 of _0x1acf57){if(_0x3b04c0[_0x565796(0x22e)]!=config[_0x565796(0x2a7)]){if(_0x3b04c0[_0x565796(0x369)]>=_0x19ba3e/0x64){if(_0x3b04c0[_0x565796(0x20b)])_0x597d70[_0x565796(0x301)](_0x3b04c0);}else{if(_0x3b04c0[_0x565796(0x369)]<=-_0x19ba3e/0x64){if(_0x3b04c0[_0x565796(0x20b)])_0x597d70[_0x565796(0x301)](_0x3b04c0);}}}}_0x597d70[_0x565796(0x2c6)]>0x0&&(lockOrders==ORDERS[_0x565796(0x353)]&&!coolingDown&&_0x597d70[_0x565796(0x305)](_0x1a6c09=>{const _0x975921=_0x565796;logger[_0x975921(0x309)](_0x975921(0x368)+_0x1a6c09['coin']+'\x20'+_0x1a6c09[_0x975921(0x263)]+'\x20'+_0x1a6c09[_0x975921(0x27e)]+'\x20'+_0x1a6c09[_0x975921(0x1fa)]+'%\x20'+_0x1a6c09[_0x975921(0x203)]+'%\x20'+(0x64*_0x1a6c09[_0x975921(0x369)])['toFixed'](0x2)+_0x975921(0x205)+_0x19ba3e[_0x975921(0x2c3)](0x2)+'%)');}),placeOrder(_0x597d70));}function notifyBalance(_0x4e849f){const _0x241a7c=_0x1f5be6;let _0x5c1406=_0x4e849f[_0x241a7c(0x214)],_0x40888a=_0x4e849f[_0x241a7c(0x360)],_0x505596=[];for(let _0x207f85 of _0x5c1406){if(_0x207f85[_0x241a7c(0x22e)]!=config[_0x241a7c(0x2a7)]){if(_0x207f85[_0x241a7c(0x369)]>=_0x40888a/0x64){if(_0x207f85[_0x241a7c(0x20b)])_0x505596[_0x241a7c(0x301)](_0x207f85);}else{if(_0x207f85[_0x241a7c(0x369)]<=-_0x40888a/0x64){if(_0x207f85[_0x241a7c(0x20b)])_0x505596[_0x241a7c(0x301)](_0x207f85);}}}}if(_0x505596[_0x241a7c(0x2c6)]>0x0){let _0x28614a=_0x505596[_0x241a7c(0x24c)](_0x27c08d=>_0x27c08d[_0x241a7c(0x22e)]);_0x28614a['sort']();let _0x4944b5=_0x28614a[_0x241a7c(0x2af)](',\x20');if(!lastCoinsToBalance)logHistory(_0x241a7c(0x296),_0x241a7c(0x377));lastCoinsToBalance=_0x4944b5;}}function symbolToCoin(_0x55813c){const _0x443009=_0x1f5be6;let _0x21aa47;if(_0x55813c[_0x443009(0x2cc)]('/'+config['basecoin']))_0x21aa47=_0x55813c['replace']('/'+config[_0x443009(0x2a7)],'');if(_0x55813c[_0x443009(0x2cc)](config[_0x443009(0x2a7)]+'/'))_0x21aa47=_0x55813c[_0x443009(0x267)](config['basecoin']+'/','');return _0x21aa47;}async function unlockOrders(){const _0x32dbde=_0x1f5be6;if(allOrdersPlaced&&lockOrders==ORDERS[_0x32dbde(0x298)]){logger[_0x32dbde(0x309)](_0x32dbde(0x2f1)),lockOrders=ORDERS[_0x32dbde(0x302)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4ee4e2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4ee4e2,validateOrdersState=_0x32dbde(0x35a),persistOpenOrders([]),lockOrders=ORDERS[_0x32dbde(0x353)],logger['debug'](_0x32dbde(0x364));}}async function validateOrders(_0xbe67aa){const _0x14d0e1=_0x1f5be6;if(_0xbe67aa)validateOrdersState=_0xbe67aa;logger[_0x14d0e1(0x309)](_0x14d0e1(0x31e)+validateOrdersState+_0x14d0e1(0x28f)+(lockOrders==0x1?_0x14d0e1(0x2b3):lockOrders==0x2?_0x14d0e1(0x310):_0x14d0e1(0x33f)));let _0x66e9ae=[],_0x49bd2d=config[_0x14d0e1(0x2dd)]==_0x14d0e1(0x1fb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x14d0e1(0x20f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x14d0e1(0x298)])return;logger[_0x14d0e1(0x309)](_0x14d0e1(0x23f)+validateOrdersState),lastOrders[_0x14d0e1(0x305)](_0x3f664e=>{const _0x47e58f=_0x14d0e1;let _0x24c8d9=![];_0x3f664e[_0x47e58f(0x2e6)]>0x0&&(_0x24c8d9=!![]),_0x66e9ae['push'](_0x24c8d9),_0x24c8d9&&config[_0x47e58f(0x2dd)]!=_0x47e58f(0x1fb)&&logHistory('order',_0x47e58f(0x315)+_0x3f664e[_0x47e58f(0x2fb)]+'\x20'+_0x3f664e['side']+'\x20#'+formatResult(_0x3f664e['filled'],0x8)+'\x20@'+formatResult(_0x3f664e[_0x47e58f(0x30c)],0x8));}),_0x66e9ae[_0x14d0e1(0x305)]((_0xc5fd80,_0x3f58ff)=>{if(_0xc5fd80)lastOrders['splice'](_0x3f58ff,0x1);}),persistOpenOrders(lastOrders);const _0x8a416c=coolingDown?_0x14d0e1(0x2f5):_0x14d0e1(0x225);if(validateOrdersState=='initial'){validateOrdersState=_0x14d0e1(0x2c1);if(_0x66e9ae[_0x14d0e1(0x2cc)](![])){if(config['ordertype']==_0x14d0e1(0x1fb)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x14d0e1(0x2c1)){if(_0x66e9ae[_0x14d0e1(0x2cc)](![])){}else{if(allOrdersPlaced){if(config[_0x14d0e1(0x2dd)]==_0x14d0e1(0x1fb)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x14d0e1(0x332))_0x66e9ae['includes'](![])&&(config[_0x14d0e1(0x2dd)]==_0x14d0e1(0x1fb)?logHistory(_0x14d0e1(0x2bc),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x14d0e1(0x282)](_0x49bd2d*validateOrderInterval/0xea60)+_0x14d0e1(0x29e)+_0x8a416c):(await cancelOrders(),logHistory(_0x14d0e1(0x2bc),_0x14d0e1(0x1e8)+Math[_0x14d0e1(0x282)](_0x49bd2d*validateOrderInterval/0xea60)+_0x14d0e1(0x29e)+_0x8a416c))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x14d0e1(0x2dd)]!=_0x14d0e1(0x1fb))logHistory(_0x14d0e1(0x2bc),'No\x20more\x20open\x20orders\x20-\x20'+_0x8a416c);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x1a9010=>{const _0x494069=_0x4367;try{const _0x4acce5=await exchange[_0x494069(0x283)](_0x1a9010['orderId'],_0x1a9010[_0x494069(0x2fb)]);}catch(_0x3262f1){if(_0x3262f1[_0x494069(0x2bb)]()[_0x494069(0x2cc)](_0x494069(0x28b))){}else await handleError(_0x3262f1,_0x494069(0x206));}});}async function initCoinResults(_0x6badff){const _0xcf3234=_0x1f5be6;_0x6badff?logger[_0xcf3234(0x309)]('Resetting\x20coin\x20results:\x20'+_0x6badff):logger['debug'](_0xcf3234(0x32d)),config['portfolio'][_0xcf3234(0x305)](_0x526d6d=>{const _0x3a63de=_0xcf3234;if(!_0x526d6d[_0x3a63de(0x2a9)]&&_0x526d6d[_0x3a63de(0x22e)]!=config['basecoin']){const _0x211dd8=currentCoins[_0x3a63de(0x240)](_0x7ce10e=>_0x7ce10e['coin']==_0x526d6d['coin']),_0x293e2f=global[_0x3a63de(0x2e4)][noslash(_0x526d6d[_0x3a63de(0x2fb)])];let _0x4cdb8f=_0x211dd8?_0x211dd8[_0x3a63de(0x263)]:null,_0x17880c=_0x526d6d[_0x3a63de(0x266)]?0x1/_0x293e2f:_0x293e2f,_0x120df5;config[_0x3a63de(0x312)][_0x3a63de(0x305)](_0x293b3a=>{const _0x21dd09=_0x3a63de;!_0x120df5&&(_0x120df5=_0x293b3a[_0x21dd09(0x292)]['find'](_0x2f668c=>_0x2f668c[_0x21dd09(0x22e)]==_0x526d6d['coin']),_0x120df5&&(_0x4cdb8f=_0x120df5[_0x21dd09(0x263)],_0x17880c=_0x120df5[_0x21dd09(0x30c)]));});let _0x4fa0c2=dbCoinResults['get'](_0x3a63de(0x2d0))['find']({'coin':_0x526d6d['coin']})[_0x3a63de(0x2c2)]();if(!_0x4fa0c2){const _0x534068={'coin':_0x526d6d['coin'],'number':_0x4cdb8f,'breakeven':_0x17880c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3a63de(0x255)](_0x3a63de(0x2d0))['push'](_0x534068)['write']();}else{if(_0x6badff&&_0x526d6d[_0x3a63de(0x22e)]==_0x6badff){const _0x505f10={'coin':_0x526d6d[_0x3a63de(0x22e)],'number':_0x4cdb8f,'breakeven':_0x17880c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3a63de(0x255)]('coins')[_0x3a63de(0x240)]({'coin':_0x526d6d[_0x3a63de(0x22e)]})[_0x3a63de(0x372)](_0x505f10)[_0x3a63de(0x2ba)]();}}}});}async function updateCoinResults(_0x45b8f1,_0x237df0=![]){const _0x541c2d=_0x1f5be6;let _0x4314ce,_0x59402f,_0x1bab66,_0xeb5e8b,_0x25def8,_0x35b8c7,_0x46eb0a=dbCoinResults[_0x541c2d(0x255)](_0x541c2d(0x2d0))['find']({'coin':_0x45b8f1[_0x541c2d(0x22e)]})['value'](),_0x6e4c95=![];_0x46eb0a&&Object[_0x541c2d(0x204)](_0x46eb0a)[_0x541c2d(0x305)](([_0x20e72c,_0x202757])=>{if(_0x202757==null)_0x6e4c95=!![];});(!_0x46eb0a||_0x6e4c95)&&(await initCoinResults(_0x45b8f1[_0x541c2d(0x22e)]),_0x46eb0a=dbCoinResults[_0x541c2d(0x255)](_0x541c2d(0x2d0))[_0x541c2d(0x240)]({'coin':_0x45b8f1[_0x541c2d(0x22e)]})[_0x541c2d(0x2c2)]());_0x45b8f1[_0x541c2d(0x266)]&&(_0x35b8c7={'filled':_0x45b8f1[_0x541c2d(0x2e6)]*_0x45b8f1[_0x541c2d(0x30c)],'amount':_0x45b8f1[_0x541c2d(0x2e6)]*_0x45b8f1[_0x541c2d(0x30c)],'side':_0x45b8f1[_0x541c2d(0x268)]=='sell'?'buy':_0x541c2d(0x342),'price':0x1/_0x45b8f1['price']},_0x45b8f1={..._0x45b8f1,..._0x35b8c7});_0x237df0?_0x59402f=_0x45b8f1[_0x541c2d(0x268)]=='buy'?_0x46eb0a[_0x541c2d(0x263)]+_0x45b8f1[_0x541c2d(0x2e6)]:_0x46eb0a['number']-_0x45b8f1[_0x541c2d(0x2e6)]:_0x59402f=await getCoinNumber(_0x45b8f1['coin']);if(_0x45b8f1['fee']&&_0x45b8f1[_0x541c2d(0x20c)][_0x541c2d(0x271)]==config[_0x541c2d(0x2a7)])_0x4314ce=_0x45b8f1[_0x541c2d(0x20c)][_0x541c2d(0x23b)];else{if(_0x45b8f1[_0x541c2d(0x20c)]&&_0x45b8f1[_0x541c2d(0x20c)]['currency']==_0x541c2d(0x260)&&!_0x237df0&&config[_0x541c2d(0x2a7)]!=_0x541c2d(0x30d))_0x4314ce=_0x45b8f1[_0x541c2d(0x20c)][_0x541c2d(0x23b)]*global[_0x541c2d(0x2e4)][_0x541c2d(0x260)+config[_0x541c2d(0x2a7)]];else _0x4314ce=defaultFee*_0x45b8f1['filled']*_0x45b8f1['price'];}_0x45b8f1[_0x541c2d(0x268)]==_0x541c2d(0x2ee)?(_0x1bab66=_0x59402f!=0x0?(_0x46eb0a['breakeven']*_0x46eb0a['number']+_0x45b8f1['price']*(_0x59402f-_0x46eb0a[_0x541c2d(0x263)])+_0x4314ce)/_0x59402f:0x0,_0xeb5e8b=_0x46eb0a[_0x541c2d(0x26e)]):(_0x1bab66=_0x59402f!=0x0?(_0x46eb0a[_0x541c2d(0x334)]*_0x46eb0a[_0x541c2d(0x263)]-_0x45b8f1[_0x541c2d(0x30c)]*(_0x46eb0a[_0x541c2d(0x263)]-_0x59402f)+_0x4314ce)/_0x59402f:0x0,_0xeb5e8b=_0x46eb0a[_0x541c2d(0x26e)]+(_0x45b8f1[_0x541c2d(0x30c)]-_0x46eb0a[_0x541c2d(0x334)])*_0x45b8f1[_0x541c2d(0x2e6)]);_0x25def8=(_0x45b8f1['price']-_0x1bab66-_0x4314ce/_0x45b8f1[_0x541c2d(0x2e6)])*_0x59402f;let _0x168a19={'coin':_0x45b8f1[_0x541c2d(0x22e)],'number':_0x59402f,'breakeven':formatResult(_0x1bab66,0x8),'realized':formatResult(_0xeb5e8b,0x8),'unrealized':formatResult(_0x25def8,0x8),'fees':formatResult(_0x46eb0a['fees']+_0x4314ce,0x8),'sells':_0x45b8f1[_0x541c2d(0x268)]=='sell'?_0x46eb0a[_0x541c2d(0x26d)]+0x1:_0x46eb0a[_0x541c2d(0x26d)],'buys':_0x45b8f1[_0x541c2d(0x268)]==_0x541c2d(0x2ee)?_0x46eb0a['buys']+0x1:_0x46eb0a[_0x541c2d(0x2be)]};dbCoinResults[_0x541c2d(0x255)](_0x541c2d(0x2d0))[_0x541c2d(0x240)]({'coin':_0x45b8f1[_0x541c2d(0x22e)]})['assign'](_0x168a19)[_0x541c2d(0x2ba)]();if(!_0x237df0){if(_0x45b8f1[_0x541c2d(0x20c)]&&_0x45b8f1[_0x541c2d(0x20c)][_0x541c2d(0x271)]==_0x541c2d(0x260)){const _0x458c9b=currentCoins[_0x541c2d(0x240)](_0x39e469=>_0x39e469[_0x541c2d(0x22e)]==_0x541c2d(0x260));if(_0x458c9b){let _0x441f8c=dbCoinResults[_0x541c2d(0x255)](_0x541c2d(0x2d0))[_0x541c2d(0x240)]({'coin':_0x541c2d(0x260)})[_0x541c2d(0x2c2)]();_0x168a19={..._0x441f8c,'number':_0x458c9b[_0x541c2d(0x263)]},dbCoinResults[_0x541c2d(0x255)]('coins')[_0x541c2d(0x240)]({'coin':_0x541c2d(0x260)})[_0x541c2d(0x372)](_0x168a19)['write']();}}}}async function placeOrder(_0x47e436){const _0x4fbcf8=_0x1f5be6,_0x45e100=config['ordertype']==_0x4fbcf8(0x1fb)?_0x4fbcf8(0x1fb):_0x4fbcf8(0x313);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4fbcf8(0x298)],allOrdersPlaced=![],validateOrdersState=_0x4fbcf8(0x35a);let _0x2af73f=![];lastOrders=[];for(const _0xa61fd7 of _0x47e436){let _0x468033,_0x574f3b,_0x42a674,_0x465687,_0x6ecbaf,_0x166348=_0xa61fd7[_0x4fbcf8(0x2fb)];try{const _0x14fd7a=await exchange['fetchTicker'](_0x166348);_0x468033=_0xa61fd7['reverse']?0x1/_0xa61fd7[_0x4fbcf8(0x27e)]:_0xa61fd7[_0x4fbcf8(0x27e)],_0x574f3b=_0x14fd7a[_0x4fbcf8(0x2b2)],_0x42a674=_0x14fd7a[_0x4fbcf8(0x2de)];_0xa61fd7['reverse']?(_0x465687=_0xa61fd7[_0x4fbcf8(0x268)]==_0x4fbcf8(0x2ee)?_0x4fbcf8(0x342):_0x4fbcf8(0x2ee),_0x6ecbaf=Math[_0x4fbcf8(0x2f0)](_0xa61fd7[_0x4fbcf8(0x29a)])/_0x468033):(_0x465687=_0xa61fd7['side'],_0x6ecbaf=Math['abs'](_0xa61fd7[_0x4fbcf8(0x29a)]));_0x45e100=='limit'&&(config[_0x4fbcf8(0x2dd)]==_0x4fbcf8(0x2bf)&&(_0x468033=_0x465687=='buy'?_0x574f3b:_0x42a674),config[_0x4fbcf8(0x2dd)]==_0x4fbcf8(0x35f)&&(_0x468033=_0x465687==_0x4fbcf8(0x2ee)?_0x42a674:_0x574f3b));_0x6ecbaf=formatResult(_0x6ecbaf,0x8),_0x468033=formatResult(_0x468033,0x8);const _0x2b8b66=_0x465687==_0x4fbcf8(0x342)?config[_0x4fbcf8(0x316)]?String['fromCodePoint']('0x'+config[_0x4fbcf8(0x316)])+'\x20':'':config[_0x4fbcf8(0x34a)]?String[_0x4fbcf8(0x1ec)]('0x'+config[_0x4fbcf8(0x34a)])+'\x20':'',_0x546a79=_0x45e100=='market'?_0x4fbcf8(0x21f):config[_0x4fbcf8(0x2dd)]==_0x4fbcf8(0x2bf)?_0x4fbcf8(0x1e9):_0x4fbcf8(0x26f),_0x1c691d=(Math['floor'](Math[_0x4fbcf8(0x379)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x4fbcf8(0x301)]({'customId':_0x1c691d,'symbol':_0x166348,'coin':_0xa61fd7[_0x4fbcf8(0x22e)],'amount':_0x6ecbaf,'price':_0x468033,'side':_0x465687,'reverse':_0xa61fd7[_0x4fbcf8(0x266)],'filled':0x0});if(_0x45e100==_0x4fbcf8(0x1fb))logHistory('order',''+_0x2b8b66+_0x546a79+'\x20order:\x20'+_0x166348+'\x20'+_0x465687+'\x20#'+formatResult(_0x6ecbaf,0x8)+'\x20@'+formatResult(_0x468033,0x8));else logHistory(_0x4fbcf8(0x362),''+_0x2b8b66+_0x546a79+_0x4fbcf8(0x217)+_0x166348+'\x20'+_0x465687+'\x20#'+formatResult(_0x6ecbaf,0x8)+'\x20@'+formatResult(_0x468033,0x8));let _0x19f6c5;_0x45e100==_0x4fbcf8(0x1fb)?_0x465687==_0x4fbcf8(0x2ee)&&[_0x4fbcf8(0x2d6),'Bitget',_0x4fbcf8(0x25a),_0x4fbcf8(0x28e),'Huobipro'][_0x4fbcf8(0x2cc)](config[_0x4fbcf8(0x356)])?_0x19f6c5=await exchange[_0x4fbcf8(0x297)](_0x166348,_0x45e100,_0x465687,_0x6ecbaf,_0x468033):_0x19f6c5=await exchange['createOrder'](_0x166348,_0x45e100,_0x465687,_0x6ecbaf,undefined):_0x19f6c5=await exchange[_0x4fbcf8(0x297)](_0x166348,_0x45e100,_0x465687,_0x6ecbaf,_0x468033);logger[_0x4fbcf8(0x309)]('ID:\x20'+_0x19f6c5['id']+_0x4fbcf8(0x373)+_0x1c691d);const _0x2b24cf=lastOrders[_0x4fbcf8(0x2c6)]-0x1;if(_0x2b24cf>=0x0&&lastOrders[_0x2b24cf][_0x4fbcf8(0x327)]==_0x1c691d){lastOrders[_0x2b24cf][_0x4fbcf8(0x27d)]=_0x19f6c5['id'];if(_0x19f6c5[_0x4fbcf8(0x2a5)])lastOrders[_0x2b24cf]['amount']=_0x19f6c5[_0x4fbcf8(0x2a5)];if(_0x19f6c5[_0x4fbcf8(0x30c)])lastOrders[_0x2b24cf][_0x4fbcf8(0x30c)]=_0x19f6c5[_0x4fbcf8(0x30c)];lastOrders[_0x2b24cf][_0x4fbcf8(0x20c)]=_0x19f6c5[_0x4fbcf8(0x20c)];}if(config['cooldown']!=0x0){let _0x325a53=null;if(cooldownTracker[_0x4fbcf8(0x2c6)]==config[_0x4fbcf8(0x254)]-0x1)_0x325a53=cooldownTracker[_0x4fbcf8(0x257)]();const _0x179ffa=getTimeStamp();cooldownTracker['push'](_0x179ffa);if(_0x325a53){const _0xaa72ba=fns[_0x4fbcf8(0x253)](new Date(_0x179ffa),new Date(_0x325a53));if(_0xaa72ba<cooldownInterval){logHistory(_0x4fbcf8(0x22a),_0x4fbcf8(0x1e7)+config[_0x4fbcf8(0x254)]+_0x4fbcf8(0x1fd)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4fbcf8(0x28c)),coolingDown=!![];break;}}}}catch(_0x34319e){if(_0x34319e[_0x4fbcf8(0x2bb)]()['includes'](_0x4fbcf8(0x2e2)))lastOrders=lastOrders[_0x4fbcf8(0x339)](_0x5887cc=>_0x5887cc[_0x4fbcf8(0x2fb)]!=_0x166348),logHistory(_0x4fbcf8(0x22a),_0x4fbcf8(0x2b8)+_0x166348),_0x2af73f=!![];else{if(_0x34319e[_0x4fbcf8(0x2bb)]()[_0x4fbcf8(0x2cc)](_0x4fbcf8(0x25d)))lastOrders=lastOrders[_0x4fbcf8(0x339)](_0x5c732b=>_0x5c732b['symbol']!=_0x166348),logHistory('error',_0x4fbcf8(0x2b9)+_0x166348),_0x2af73f=!![];else{if(_0x34319e['toString']()[_0x4fbcf8(0x2cc)](_0x4fbcf8(0x236)))lastOrders=lastOrders[_0x4fbcf8(0x339)](_0x19c3df=>_0x19c3df[_0x4fbcf8(0x2fb)]!=_0x166348),logHistory('error',_0x4fbcf8(0x230)+_0x166348),logger[_0x4fbcf8(0x309)](_0x34319e),_0x2af73f=!![];else _0x34319e['toString']()['includes'](_0x4fbcf8(0x330))?(lastOrders=lastOrders[_0x4fbcf8(0x339)](_0x1faeb5=>_0x1faeb5[_0x4fbcf8(0x2fb)]!=_0x166348),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x166348),_0x2af73f=!![]):(lastOrders=lastOrders['filter'](_0x39282a=>_0x39282a['symbol']!=_0x166348),await handleError(_0x34319e,_0x4fbcf8(0x365),_0x166348));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x28a207=config['ordertype']==_0x4fbcf8(0x1fb)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x28a207);}else unlockOrders();_0x2af73f&&config[_0x4fbcf8(0x337)]&&(logHistory(_0x4fbcf8(0x22a),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4fbcf8(0x2bc),_0x4fbcf8(0x2e3)));}else{if(coolingDown)!config['headless']&&logHistory(_0x4fbcf8(0x22a),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x4fbcf8(0x353)]&&(!config[_0x4fbcf8(0x337)]&&(config[_0x4fbcf8(0x2dd)]==_0x4fbcf8(0x1fb)?logHistory(_0x4fbcf8(0x22a),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x4fbcf8(0x22a),_0x4fbcf8(0x321))));}}function persistOpenOrders(_0x373bb9){const _0x78aac3=_0x1f5be6,_0x144bd0={...config,'openOrders':_0x373bb9};let _0x3c1c4f=dbConfig[_0x78aac3(0x255)](_0x78aac3(0x234))[_0x78aac3(0x240)]({'botID':botID})[_0x78aac3(0x2c2)]();_0x3c1c4f&&dbConfig['get'](_0x78aac3(0x234))[_0x78aac3(0x240)]({'botID':botID})[_0x78aac3(0x372)](_0x144bd0)[_0x78aac3(0x2ba)]();}function restoreOrders(){const _0x44383f=_0x1f5be6;let _0x132a6b;config[_0x44383f(0x37f)]&&allOpenOrders[_0x44383f(0x305)](_0xd86040=>{const _0x49e589=_0x44383f,_0x489c0b=config[_0x49e589(0x37f)][_0x49e589(0x240)](_0x4f03b7=>_0x4f03b7['orderId']==_0xd86040['id']);_0x489c0b&&(lastOrders[_0x49e589(0x301)](_0x489c0b),_0x132a6b=_0xd86040[_0x49e589(0x2d8)]);});if(lastOrders[_0x44383f(0x2c6)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x44383f(0x2c1),allOrdersPlaced=!![];const _0xde712a=new Date()['getTime'](),_0x4eefbb=config[_0x44383f(0x2dd)]==_0x44383f(0x1fb)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x132a6b+_0x4eefbb>_0xde712a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x132a6b+_0x4eefbb-_0xde712a);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x97e714=_0x1f5be6;if(!coinsLoaded){process[_0x97e714(0x278)]({'telegrammsg':_0x97e714(0x2db)},_0x244ee4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5b9fc4='';if(config['showname'])_0x5b9fc4='<b>'+config['botname']+_0x97e714(0x347);else _0x5b9fc4=_0x97e714(0x32e)+botID+_0x97e714(0x347);const _0x22e4f3=getKPIs('basecoin'),_0xb269ea=getKPIs(_0x97e714(0x29c),config[_0x97e714(0x29c)]),_0x3fe52a=getKPIs(_0x97e714(0x2a6)),_0x492fea=getKPIs('net-fiat',config[_0x97e714(0x29c)]);_0x5b9fc4+=_0x97e714(0x2ed),_0x5b9fc4+=_0x22e4f3[_0x97e714(0x36f)]+'\x20:\x20'+_0x22e4f3['value']+'\x0a',_0x5b9fc4+=_0x22e4f3[_0x97e714(0x36a)]+':\x20'+_0x22e4f3[_0x97e714(0x37a)]+'%\x0a',_0x5b9fc4+=_0xb269ea[_0x97e714(0x36f)]+_0x97e714(0x210)+_0xb269ea[_0x97e714(0x2c2)]+'\x0a',_0x5b9fc4+=_0xb269ea[_0x97e714(0x36a)]+':\x20'+_0xb269ea['change']+'%\x0a',_0x5b9fc4+=_0x3fe52a[_0x97e714(0x36f)]+':\x20'+_0x3fe52a[_0x97e714(0x2c2)]+'\x20('+config['basecoin']+')\x0a',_0x5b9fc4+=_0x3fe52a[_0x97e714(0x36a)]+':\x20'+_0x3fe52a[_0x97e714(0x37a)]+_0x97e714(0x205)+config[_0x97e714(0x2a7)]+')\x0a',_0x5b9fc4+=_0x492fea[_0x97e714(0x36f)]+':\x20'+_0x492fea[_0x97e714(0x2c2)]+'\x20('+config[_0x97e714(0x29c)]+')\x0a',_0x5b9fc4+=_0x492fea['rightTxt']+':\x20'+_0x492fea[_0x97e714(0x37a)]+_0x97e714(0x205)+config['fiat']+')\x0a',_0x5b9fc4+=_0x97e714(0x2fd),process[_0x97e714(0x278)]({'telegrammsg':_0x5b9fc4},_0x16e5f5=>{});}async function sendPortfolioTelegram(){const _0x6d7d5f=_0x1f5be6;if(!coinsLoaded){process[_0x6d7d5f(0x278)]({'telegrammsg':_0x6d7d5f(0x2db)},_0x3b9f24=>{});return;}let _0x4714c1='';if(config[_0x6d7d5f(0x2f7)])_0x4714c1=_0x6d7d5f(0x24b)+config['botname']+_0x6d7d5f(0x2ce);else _0x4714c1=_0x6d7d5f(0x32e)+botID+_0x6d7d5f(0x2ce);_0x4714c1+=_0x6d7d5f(0x2ed),_0x4714c1+=_0x6d7d5f(0x21e),_0x4714c1+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4714c1+='-------------------------------\x0a',currentCoins[_0x6d7d5f(0x305)](_0x356971=>{const _0x230706=_0x6d7d5f;_0x4714c1+=_0x356971[_0x230706(0x22e)]['padEnd'](0x7)+'|\x20'+formatPad(_0x356971['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x356971[_0x230706(0x203)],0x2,0x6)+'|\x20'+formatPad(_0x356971['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4714c1+=_0x6d7d5f(0x2fd),process[_0x6d7d5f(0x278)]({'telegrammsg':_0x4714c1},_0x348df1=>{});}function formatPad(_0x3121ba,_0x16a01a,_0xf8a147){const _0x50056d=_0x1f5be6,_0xaf334d=formatResultString(_0x3121ba,_0x16a01a);return _0xaf334d?_0xaf334d[_0x50056d(0x34c)](_0xf8a147):''[_0x50056d(0x34c)](_0xf8a147);}function logHistory(_0x2c1270,_0x5d8f81,_0x29c11d=''){const _0x5aac6a=_0x1f5be6;logger['full'](''+_0x5d8f81);let _0x428292={'time':getTimeStamp(),'type':_0x2c1270,'event':_0x5d8f81};dbLogs[_0x5aac6a(0x255)]('logs')[_0x5aac6a(0x301)](_0x428292)[_0x5aac6a(0x2ba)]();if(_0x29c11d=='')_0x29c11d=_0x5d8f81;proxyEmit(_0x5aac6a(0x375),{'log':_0x428292,'summary':_0x29c11d}),process['send']({'telegram':{..._0x428292,'botname':config[_0x5aac6a(0x2b4)],'showname':config[_0x5aac6a(0x2f7)]}},_0x17403f=>{});}function emitHistory(_0x4728aa={}){const _0x39857e=_0x1f5be6;Object[_0x39857e(0x264)](_0x4728aa)[_0x39857e(0x2c6)]==0x0&&(_0x4728aa={'type':['order',_0x39857e(0x375)],'event':'','page':0x1});if(_0x4728aa[_0x39857e(0x31d)][_0x39857e(0x2cc)](_0x39857e(0x375)))_0x4728aa[_0x39857e(0x31d)]['splice'](_0x4728aa[_0x39857e(0x31d)]['indexOf'](_0x39857e(0x375)),0x1,_0x39857e(0x22a),_0x39857e(0x296),_0x39857e(0x2bc));if(dbLogs[_0x39857e(0x355)]('logs')[_0x39857e(0x2c2)]()){let _0x4e22af=dbLogs['get'](_0x39857e(0x21d))[_0x39857e(0x339)](_0x487d55=>{const _0x53aecd=_0x39857e;if(_0x4728aa['type'][_0x53aecd(0x2c6)]==0x0)return![];else return _0x4728aa[_0x53aecd(0x31d)][_0x53aecd(0x2cc)](_0x487d55[_0x53aecd(0x31d)]);})[_0x39857e(0x339)](_0x51997e=>{const _0x3d58a3=_0x39857e;if(_0x4728aa['event']=='')return!![];else return _0x51997e[_0x3d58a3(0x375)]['toLowerCase']()[_0x3d58a3(0x2cc)](_0x4728aa[_0x3d58a3(0x375)][_0x3d58a3(0x338)]());})['sortBy'](_0x39857e(0x366)),_0x4402b5=_0x4e22af[_0x39857e(0x2c2)]()[_0x39857e(0x2c6)];_0x4e22af=_0x4e22af[_0x39857e(0x266)]()[_0x39857e(0x35c)]((_0x4728aa[_0x39857e(0x30e)]-0x1)*logPageSize,_0x4728aa[_0x39857e(0x30e)]*logPageSize-0x1)[_0x39857e(0x266)]()[_0x39857e(0x2c2)](),proxyEmit(_0x39857e(0x274),{'logs':_0x4e22af,'total':_0x4402b5});}else proxyEmit(_0x39857e(0x274),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3b34c6){const _0x1d2548=_0x1f5be6;if(dbLogs['has'](_0x1d2548(0x21d))[_0x1d2548(0x2c2)]()){const _0x50e9f1=dbLogs[_0x1d2548(0x255)](_0x1d2548(0x21d))[_0x1d2548(0x25f)](_0x1d2548(0x366))[_0x1d2548(0x339)](_0x351931=>{const _0x6789de=_0x1d2548;return _0x351931[_0x6789de(0x31d)]=='order';})[_0x1d2548(0x2c2)]();dbLogs[_0x1d2548(0x255)](_0x1d2548(0x21d))['remove']()['write'](),dbLogs[_0x1d2548(0x255)](_0x1d2548(0x21d))[_0x1d2548(0x372)](_0x50e9f1)['write'](),emitHistory(_0x3b34c6);}}async function pauseBot(_0x50d410=pauseBotInterval){const _0x519362=_0x1f5be6,_0x2023fe=new Date()[_0x519362(0x314)]();if(!lastErrorShown||_0x2023fe-lastErrorShown>=_0x50d410){lastErrorShown=_0x2023fe;!lastBotPause?(lastBotPause=_0x2023fe,consecutivePauses=0x1):(_0x2023fe-lastBotPause-_0x50d410<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x519362(0x278)]({'stop':'restart'},_0x4a0a19=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x50d410),botPaused=![],reset(!![]);}}}async function killBot(){const _0x14a5e7=_0x1f5be6;botPaused=!![],await sleep(0x3e8),process[_0x14a5e7(0x278)]({'stop':_0x14a5e7(0x2f3)},_0x371194=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x52344b,_0x293410){const _0x3c64fe=_0x1f5be6;if(botPaused)return;const _0x238d1c=config[_0x3c64fe(0x356)]||'Exchange';if(_0x293410)logger[_0x3c64fe(0x309)]('Exception\x20thrown\x20in\x20'+_0x293410);const _0x56c0a3=()=>{const _0x576966=_0x3c64fe;loading[_0x576966(0x22a)]=!![],emitLoadingProgress();};if(_0x52344b['toString']()['includes'](_0x3c64fe(0x1fe)))logHistory(_0x3c64fe(0x22a),_0x238d1c+_0x3c64fe(0x291)),_0x56c0a3();else{if(_0x52344b[_0x3c64fe(0x2bb)]()['includes'](_0x3c64fe(0x280)))logHistory(_0x3c64fe(0x22a),_0x238d1c+_0x3c64fe(0x258)),_0x56c0a3();else _0x52344b[_0x3c64fe(0x2bb)]()[_0x3c64fe(0x2cc)](_0x3c64fe(0x2cb))?(logHistory(_0x3c64fe(0x22a),_0x238d1c+_0x3c64fe(0x2e7)),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x56c0a3()):await handleError(_0x52344b,null);}}async function handleError(_0x3a3662,_0x43c539,_0x138964=''){const _0x39950f=_0x1f5be6;if(botPaused)return;const _0x45b556=config[_0x39950f(0x356)]||_0x39950f(0x33d);if(_0x43c539)logger[_0x39950f(0x309)](_0x39950f(0x2fe)+_0x43c539);if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x319))||_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x1ea)))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x265)+pauseBotMsg),await pauseBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()['includes'](_0x39950f(0x1ef))||_0x3a3662[_0x39950f(0x2bb)]()['includes']('OnMaintenance'))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x2eb)+pauseBotMsg),await pauseBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x308)))logHistory(_0x39950f(0x22a),_0x45b556+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x3a3662['toString']()[_0x39950f(0x2cc)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x219)+pauseBotMsg),await pauseBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()['toLowerCase']()[_0x39950f(0x2cc)](_0x39950f(0x2d8)))logHistory(_0x39950f(0x22a),_0x39950f(0x23a)),logger[_0x39950f(0x309)](_0x39950f(0x1f5),_0x3a3662),await pauseBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x340)))logHistory(_0x39950f(0x22a),_0x45b556+'\x20rejected\x20your\x20API\x20request'+pauseBotMsg),await pauseBot();else{if(_0x3a3662 instanceof ccxt['NetworkError'])logHistory('error',_0x45b556+_0x39950f(0x2d4)+pauseBotMsg),logger[_0x39950f(0x309)](_0x39950f(0x1f5),_0x3a3662),await pauseBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x1fe)))logHistory('error',_0x45b556+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x39950f(0x22a),_0x39950f(0x249)),await killBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x273)),logHistory(_0x39950f(0x22a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3a3662[_0x39950f(0x2bb)]()[_0x39950f(0x2cc)](_0x39950f(0x2cb)))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x376)),logHistory(_0x39950f(0x22a),_0x39950f(0x249)),await killBot();else{if(_0x3a3662['toString']()[_0x39950f(0x2cc)]('PermissionDenied'))logHistory(_0x39950f(0x22a),_0x45b556+_0x39950f(0x21b)),logHistory(_0x39950f(0x22a),_0x39950f(0x249)),await killBot();else{if(_0x3a3662['toString']()[_0x39950f(0x2cc)]('InsufficientFunds'))logHistory(_0x39950f(0x22a),_0x39950f(0x317)+_0x138964);else _0x3a3662 instanceof ccxt['ExchangeError']?(logHistory('error',_0x45b556+_0x39950f(0x286)),logger[_0x39950f(0x309)](_0x39950f(0x1f5),_0x3a3662)):(logHistory(_0x39950f(0x22a),_0x39950f(0x1f6)+pauseBotMsg),logger[_0x39950f(0x309)]('Error\x20details:',_0x3a3662),await pauseBot());}}}}}}}}}}}}function formatResult(_0x386835,_0x1de145){const _0x4df666=_0x1f5be6;return parseFloat(_0x386835[_0x4df666(0x2c3)](_0x1de145));}function formatResultTruncate(_0x5b7651,_0x4de5ea){const _0x2f5c9d=_0x1f5be6;let _0x18569d=formatResultString(_0x5b7651,0xa),_0x1f8231=_0x18569d[_0x2f5c9d(0x233)]('.');return _0x1f8231!=-0x1&&(_0x18569d=_0x18569d['slice'](0x0,_0x1f8231+_0x4de5ea+0x1)),Number(_0x18569d);}function formatResultString(_0x3aeac1,_0x52460d){const _0xcc92de=_0x1f5be6;let _0xa1c997;if(!(''+_0x3aeac1)[_0xcc92de(0x2cc)]('e'))_0xa1c997=+(Math['round'](_0x3aeac1+'e+'+_0x52460d)+'e-'+_0x52460d);else{let _0x1a09ef=(''+_0x3aeac1)[_0xcc92de(0x2e5)]('e'),_0x555c9a='';+_0x1a09ef[0x1]+_0x52460d>0x0&&(_0x555c9a='+'),_0xa1c997=+(Math[_0xcc92de(0x282)](+_0x1a09ef[0x0]+'e'+_0x555c9a+(+_0x1a09ef[0x1]+_0x52460d))+'e-'+_0x52460d);}return Number(_0xa1c997)[_0xcc92de(0x2c3)](_0x52460d);}function getServerTime(){const _0x5f0972=_0x1f5be6,_0x13a4df=new Date();return _0x13a4df[_0x5f0972(0x2ad)]()+'/'+(_0x13a4df[_0x5f0972(0x371)]()+0x1)[_0x5f0972(0x2bb)]()[_0x5f0972(0x34c)](0x2,'0')+'/'+_0x13a4df[_0x5f0972(0x212)]()[_0x5f0972(0x2bb)]()['padStart'](0x2,'0')+'\x20'+_0x13a4df[_0x5f0972(0x229)]()[_0x5f0972(0x2bb)]()[_0x5f0972(0x34c)](0x2,'0')+':'+_0x13a4df[_0x5f0972(0x2c4)]()['toString']()[_0x5f0972(0x34c)](0x2,'0')+':'+_0x13a4df[_0x5f0972(0x324)]()[_0x5f0972(0x2bb)]()[_0x5f0972(0x34c)](0x2,'0');}function getTimeStamp(){const _0x51c1f2=_0x1f5be6,_0x301b41=shiftedTime();return _0x301b41[_0x51c1f2(0x2ad)]()+'/'+(_0x301b41[_0x51c1f2(0x371)]()+0x1)[_0x51c1f2(0x2bb)]()[_0x51c1f2(0x34c)](0x2,'0')+'/'+_0x301b41[_0x51c1f2(0x212)]()['toString']()[_0x51c1f2(0x34c)](0x2,'0')+'\x20'+_0x301b41[_0x51c1f2(0x229)]()[_0x51c1f2(0x2bb)]()[_0x51c1f2(0x34c)](0x2,'0')+':'+_0x301b41[_0x51c1f2(0x2c4)]()[_0x51c1f2(0x2bb)]()[_0x51c1f2(0x34c)](0x2,'0')+':'+_0x301b41[_0x51c1f2(0x324)]()['toString']()[_0x51c1f2(0x34c)](0x2,'0');}function getDate(){const _0x4b8017=_0x1f5be6,_0x1fea28=shiftedTime();return _0x1fea28[_0x4b8017(0x2ad)]()+'/'+(_0x1fea28['getMonth']()+0x1)[_0x4b8017(0x2bb)]()['padStart'](0x2,'0')+'/'+_0x1fea28[_0x4b8017(0x212)]()[_0x4b8017(0x2bb)]()[_0x4b8017(0x34c)](0x2,'0');}function getHour(){const _0x406bed=_0x1f5be6,_0x3d0895=shiftedTime();return _0x3d0895[_0x406bed(0x229)]()[_0x406bed(0x2bb)]()[_0x406bed(0x34c)](0x2,'0');}function sleep(_0xec6a10){return new Promise(_0x510a1a=>setTimeout(_0x510a1a,_0xec6a10));}function _0x4367(_0x41f7aa,_0x34f09c){const _0x5eb03d=_0x3af0();return _0x4367=function(_0x181837,_0x41526d){_0x181837=_0x181837-0x1e7;let _0x3af0b5=_0x5eb03d[_0x181837];return _0x3af0b5;},_0x4367(_0x41f7aa,_0x34f09c);}function shiftedTime(){const _0x374343=_0x1f5be6,_0x20ad55=new Date();let _0x3510d4=_0x20ad55;if(config&&config['timeshift']!==0x0)_0x3510d4=fns['add'](_0x20ad55,{'hours':config[_0x374343(0x235)]});return _0x3510d4;}function timer(_0x4560a8){const _0x1d2347=_0x1f5be6,_0x3567e0=new Date();!lasttime?console['log'](getTimeStamp()+_0x1d2347(0x380),_0x4560a8,_0x3567e0):console['log'](getTimeStamp()+_0x1d2347(0x380),_0x4560a8,(_0x3567e0-lasttime)/0x3e8),lasttime=_0x3567e0;}