const _0xad2cee=_0x16e0;(function(_0x21b87e,_0x49f696){const _0x29f4c5=_0x16e0,_0x59edf2=_0x21b87e();while(!![]){try{const _0x3041e2=parseInt(_0x29f4c5(0x1ba))/0x1+parseInt(_0x29f4c5(0x11d))/0x2+-parseInt(_0x29f4c5(0x8b))/0x3+parseInt(_0x29f4c5(0x16b))/0x4+parseInt(_0x29f4c5(0xbe))/0x5+parseInt(_0x29f4c5(0x89))/0x6*(-parseInt(_0x29f4c5(0x18d))/0x7)+-parseInt(_0x29f4c5(0x1f3))/0x8*(parseInt(_0x29f4c5(0x17f))/0x9);if(_0x3041e2===_0x49f696)break;else _0x59edf2['push'](_0x59edf2['shift']());}catch(_0x139020){_0x59edf2['push'](_0x59edf2['shift']());}}}(_0x127f,0x337c9));const _0x57b5a0=function(){let _0x5c4f12=!![];return function(_0x25ab43,_0x1f3819){const _0x4348a4=_0x5c4f12?function(){const _0x52f44d=_0x16e0;if(_0x1f3819){const _0x1069aa=_0x1f3819[_0x52f44d(0x1c7)](_0x25ab43,arguments);return _0x1f3819=null,_0x1069aa;}}:function(){};return _0x5c4f12=![],_0x4348a4;};}(),_0x31cbd7=_0x57b5a0(this,function(){const _0x5c0211=_0x16e0;return _0x31cbd7[_0x5c0211(0x194)]()[_0x5c0211(0x150)](_0x5c0211(0x1ad))['toString']()[_0x5c0211(0xfc)](_0x31cbd7)['search'](_0x5c0211(0x1ad));});_0x31cbd7();'use strict';const ccxt=require(_0xad2cee(0x158))[_0xad2cee(0x191)],low=require(_0xad2cee(0x116)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xad2cee(0x154)),Crypt=require(_0xad2cee(0xad))[_0xad2cee(0x1d5)],util=require(_0xad2cee(0x1e2)),argv=require(_0xad2cee(0x1f7))(process['argv'][_0xad2cee(0x1c5)](0x2))[_0xad2cee(0xde)],path=require(_0xad2cee(0x187));let exchange;global['ticker']={},global[_0xad2cee(0xa3)]={};const exceptions={'binance':[_0xad2cee(0xa2),'HOT/BTC','XEM/BUSD',_0xad2cee(0xb9),_0xad2cee(0x110)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xad2cee(0x133)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')['version'],botID=process[_0xad2cee(0xde)][0x2]||_0xad2cee(0x115),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0xad2cee(0x134)](_0xad2cee(0x96)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0xad2cee(0xde)][0x3]||'',configpath=userID?_0xad2cee(0x1f8)+userID+'/':'./config/',logspath=userID?_0xad2cee(0xee)+userID+'/':_0xad2cee(0xee),loggerfile=fs[_0xad2cee(0x1b8)](logspath+_0xad2cee(0x1b9),{'flags':'a'});!fs[_0xad2cee(0x164)](configpath)&&fs[_0xad2cee(0xfe)](configpath);!fs[_0xad2cee(0x164)](logspath)&&fs[_0xad2cee(0xfe)](logspath);const configfile=configpath+_0xad2cee(0x125)+botID+_0xad2cee(0x1af),logfile=configpath+_0xad2cee(0x125)+botID+_0xad2cee(0x17d),performancefile=configpath+_0xad2cee(0x125)+botID+_0xad2cee(0x145),coinresultsfile=configpath+_0xad2cee(0x125)+botID+_0xad2cee(0x1a6),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0xad2cee(0x11e),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xad2cee(0x1db)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xad2cee(0x88)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xad2cee(0x88)]({'bot':[],'version':serverversion})[_0xad2cee(0x1db)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xad2cee(0x88)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xad2cee(0x153),'rsaStandard':_0xad2cee(0xd4)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5ee912=>{const _0x1ea300=_0xad2cee;console[_0x1ea300(0x134)](_0x5ee912);},'simple':_0xc84f5c=>{const _0x40ace1=_0xad2cee;console[_0x40ace1(0x134)](_0xc84f5c),loggerfile[_0x40ace1(0x1db)](util[_0x40ace1(0x16a)](_0xc84f5c)+'\x0a');},'full':async(_0x44be79,_0x4e8d10='')=>{const _0x2d68ac=_0xad2cee;let _0x391f8f;if(config['showname'])_0x391f8f=getTimeStamp()+':\x20'+config[_0x2d68ac(0x9f)]+_0x2d68ac(0x1bb)+_0x44be79;else _0x391f8f=getTimeStamp()+_0x2d68ac(0x146)+botID+'\x20>\x20'+_0x44be79;console[_0x2d68ac(0x134)](_0x391f8f),loggerfile[_0x2d68ac(0x1db)](util[_0x2d68ac(0x16a)](_0x391f8f)+'\x0a'),_0x4e8d10&&(console[_0x2d68ac(0x134)](_0x4e8d10),loggerfile[_0x2d68ac(0x1db)](util[_0x2d68ac(0x16a)](_0x4e8d10)+'\x0a'));},'debug':async(_0x3e241c,_0x31c792='')=>{const _0x12b77c=_0xad2cee;let _0x54baab;if(config[_0x12b77c(0xcc)])_0x54baab=getTimeStamp()+':\x20'+config[_0x12b77c(0x9f)]+'\x20>\x20[DEBUG]\x20'+_0x3e241c;else _0x54baab=getTimeStamp()+_0x12b77c(0x146)+botID+'\x20>\x20[DEBUG]\x20'+_0x3e241c;if(debugging)console[_0x12b77c(0x134)](_0x54baab);loggerfile[_0x12b77c(0x1db)](util[_0x12b77c(0x16a)](_0x54baab)+'\x0a');if(_0x31c792){if(debugging)console[_0x12b77c(0x134)](_0x31c792);loggerfile[_0x12b77c(0x1db)](util[_0x12b77c(0x16a)](_0x31c792)+'\x0a');}}};process['on'](_0xad2cee(0x172),function(_0x5a3d82){logger['simple'](_0x5a3d82);});settings[_0xad2cee(0x152)]!=config[_0xad2cee(0x152)]&&updateTimeshift(settings[_0xad2cee(0x152)]);settings[_0xad2cee(0x130)]!=config['onepagemode']&&updateOnepagemode(settings[_0xad2cee(0x130)]);process['send']({'started':_0xad2cee(0x199)},_0x4080ed=>{}),initializeProcessListeners();function proxyEmit(_0x585437,_0x1f325a=null){const _0x3d8539=_0xad2cee;process[_0x3d8539(0x8f)]({'function':_0x585437,'args':_0x1f325a},_0x1f4fd0=>{});}function initializeProcessListeners(){const _0xd43eb0=_0xad2cee;process['on'](_0xd43eb0(0x93),_0x538004=>{const _0x19df7c=_0xd43eb0;switch(Object[_0x19df7c(0x1d9)](_0x538004)[0x0]){case'timeshift':_0x538004[_0x19df7c(0x152)]!=undefined&&(settings['timeshift']=_0x538004['timeshift'],updateTimeshift(settings[_0x19df7c(0x152)]));break;case _0x19df7c(0x130):_0x538004[_0x19df7c(0x130)]!=undefined&&(settings[_0x19df7c(0x130)]=_0x538004[_0x19df7c(0x130)],updateOnepagemode(settings[_0x19df7c(0x130)]));break;case'bots':_0x538004[_0x19df7c(0x1d4)]!=undefined&&(bots=JSON[_0x19df7c(0xb8)](_0x538004['bots']),proxyEmit('bots',bots));break;case _0x19df7c(0x1f5):switch(_0x538004['function']){case _0x19df7c(0x12f):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x19df7c(0x189):emitHistory(_0x538004[_0x19df7c(0xd5)]);break;case _0x19df7c(0x9a):deleteHistoryAlerts(_0x538004[_0x19df7c(0xd5)]);break;case'getPortfolio':getPortfolio(_0x538004[_0x19df7c(0xd5)]);break;case _0x19df7c(0xda):storeConfiguration(_0x538004['args']);break;case'storeHeadless':storeHeadless(_0x538004[_0x19df7c(0xd5)]);break;case _0x19df7c(0x177):storeFiat(_0x538004[_0x19df7c(0xd5)]);break;case'resetHistory':resetHistory();break;case _0x19df7c(0xd7):getStartingBalances(getNormalizedPerformance());break;case _0x19df7c(0x90):placeOrder(_0x538004[_0x19df7c(0xd5)]);break;case _0x19df7c(0x200):cancelLoading();break;case _0x19df7c(0x9e):showConfig();break;case _0x19df7c(0x13d):sendMetricsTelegram();break;case _0x19df7c(0x13b):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x18c0bf=null,_0x3f3efd=![]){const _0x5a3c46=_0xad2cee;logger['debug']('Reset\x20|\x20'+(_0x18c0bf&&_0x18c0bf[_0x5a3c46(0xc1)]>0x0?_0x5a3c46(0x11a)+_0x18c0bf[_0x5a3c46(0x95)](','):_0x5a3c46(0x13f))+_0x5a3c46(0x18e)+(_0x3f3efd?_0x5a3c46(0x123):_0x5a3c46(0xf5)));if(pidBalances)clearTimeout(pidBalances);if(!_0x3f3efd)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5a3c46(0x1ea)]!=''&&config[_0x5a3c46(0x1ea)]!=_0x5a3c46(0x120)){if(_0x3f3efd){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x115f5f){handleErrorNoStop(_0x115f5f,_0x5a3c46(0xef));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x18c0bf);const _0x2ebda4=await getCoins();[currentCoins,currentCoinsAll]=_0x2ebda4,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5a3c46(0xc1)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x46f3f0=_0xad2cee;exchangeStopped=!![],await exchange[_0x46f3f0(0x97)](),logger[_0x46f3f0(0x1fb)](_0x46f3f0(0x85));}async function reloadExchange(){const _0x1b19a6=_0xad2cee;logger[_0x1b19a6(0x1fb)](_0x1b19a6(0x101));while(lockOrders!=ORDERS[_0x1b19a6(0x133)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1b19a6(0x1fb)](_0x1b19a6(0x148)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x6e4abf=config['exchange'],_0x12218d=config['apiKey'],_0x16a622=config[_0xad2cee(0xc9)],_0x47cd9c=config['apiPassword']){const _0x4830fc=_0xad2cee;exchange&&await stopExchange();logger[_0x4830fc(0x1fb)](_0x4830fc(0xed));!supportedExchanges()[_0x4830fc(0x10f)](_0x6e4abf)&&(logHistory(_0x4830fc(0xc7),_0x4830fc(0x8d)+_0x6e4abf+'\x20exchange'),killBot());const _0x2db666=ccxt[_0x6e4abf[_0x4830fc(0x1a3)]()];exchange=new _0x2db666({'apiKey':_0x12218d,'secret':_0x16a622,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x47cd9c)exchange[_0x4830fc(0xbc)]=_0x47cd9c;}function setStableCoins(){const _0x443de7=_0xad2cee;let _0x167955=config[_0x443de7(0x109)]==_0x443de7(0x12e)?_0x443de7(0x12e):_0x443de7(0x1b3),_0x299b1e=!allSymbols[_0x443de7(0x10f)](_0x167955+_0x443de7(0xe1))?_0x443de7(0x14c):_0x443de7(0xd6),_0x3ec3d8=!allSymbols['includes'](_0x167955+_0x443de7(0xbd))?_0x299b1e:_0x443de7(0xb3);stablecoins={'eur':{'coin':''+_0x167955+_0x3ec3d8,'symbol':_0x167955+'/'+_0x3ec3d8},'usd':{'coin':''+_0x167955+_0x299b1e,'symbol':_0x167955+'/'+_0x299b1e}};}async function initwsCcxt(_0x74bd5e){const _0xbc9198=_0xad2cee;logger[_0xbc9198(0x1fb)]('Initiating\x20watches');_0x74bd5e==null&&(_0x74bd5e=[],config['portfolio'][_0xbc9198(0x1b0)](_0x53e98d=>{const _0x30fe32=_0xbc9198;if(!_0x53e98d[_0x30fe32(0x1ca)]&&_0x53e98d[_0x30fe32(0x91)]!=config[_0x30fe32(0x109)])_0x74bd5e['push'](_0x53e98d[_0x30fe32(0x159)]);}));if(!_0x74bd5e[_0xbc9198(0x10f)](stablecoins['eur'][_0xbc9198(0x159)]))_0x74bd5e[_0xbc9198(0xfa)](stablecoins['eur']['symbol']);if(!_0x74bd5e[_0xbc9198(0x10f)](stablecoins[_0xbc9198(0x183)][_0xbc9198(0x159)]))_0x74bd5e[_0xbc9198(0xfa)](stablecoins[_0xbc9198(0x183)][_0xbc9198(0x159)]);if(config[_0xbc9198(0xa1)][_0xbc9198(0xf1)]('Binance')){if(!_0x74bd5e[_0xbc9198(0x10f)](_0xbc9198(0x14f)+config[_0xbc9198(0x109)]))_0x74bd5e['push'](_0xbc9198(0x14f)+config[_0xbc9198(0x109)]);}loadCoins(_0x74bd5e);const _0x23b65f=async _0x4351ac=>{const _0x2b7a76=_0xbc9198,_0x5dcfc5=await exchange[_0x2b7a76(0xc4)](_0x4351ac);global[_0x2b7a76(0xf0)][noslash(_0x5dcfc5[_0x2b7a76(0x159)])]=_0x5dcfc5[_0x2b7a76(0x92)];while(!![]){if(!botPaused)try{const _0x59f818=await exchange[_0x2b7a76(0x117)](_0x4351ac);global[_0x2b7a76(0xf0)][noslash(_0x59f818[0x0][_0x2b7a76(0x159)])]=_0x59f818[0x0]['price'],await sleep(0x3e8);}catch(_0x277788){if(!exchangeStopped)await handleError(_0x277788,_0x2b7a76(0x117),_0x4351ac);}else await sleep(0x64);}},_0x573896=async _0x2b7918=>{const _0x423764=_0xbc9198;while(!![]){if(!botPaused)try{const _0x4768dc=await exchange['fetchTicker'](_0x2b7918);global[_0x423764(0xa3)][_0x4768dc[_0x423764(0x159)]]=_0x4768dc[_0x423764(0xf4)],await sleep(0x3c*0x3e8);}catch(_0x286d16){if(!exchangeStopped)await handleError(_0x286d16,'fetchTickers',_0x2b7918);}else await sleep(0x64);}},_0x4ff624=async()=>{const _0x34d4ff=_0xbc9198;while(!![]){if(!botPaused)try{timer(_0x34d4ff(0x8e));const _0x30f6a6=await exchange['watchOrders']();_0x30f6a6[_0x34d4ff(0x1b0)](_0x2bc78e=>{updateNumberCoinsCcxt(_0x2bc78e);});}catch(_0x4f1c40){if(!exchangeStopped)await handleError(_0x4f1c40,_0x34d4ff(0x1d7));}else await sleep(0x64);}};_0x74bd5e[_0xbc9198(0x1b0)](async _0x2f166f=>{_0x23b65f(_0x2f166f),_0x573896(_0x2f166f);}),!wsEventsSet&&(wsEventsSet=!![],_0x4ff624(),watchTransactions());}async function watchTransactions(){const _0x308b90=_0xad2cee;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x13bd20=await getCoins(),[_0x4c03d2,_0x491660]=_0x13bd20;let _0x1e36f5=[];currentCoins[_0x308b90(0x1b0)](_0x48eedf=>{const _0x5bac92=_0x308b90,_0x2cec01=_0x4c03d2[_0x5bac92(0x167)](_0x40c39e=>_0x40c39e[_0x5bac92(0x91)]==_0x48eedf[_0x5bac92(0x91)]);_0x2cec01&&(_0x48eedf[_0x5bac92(0x12d)]!=_0x2cec01[_0x5bac92(0x12d)]&&_0x1e36f5[_0x5bac92(0xfa)]({'coin':_0x48eedf[_0x5bac92(0x91)],'symbol':_0x48eedf[_0x5bac92(0x159)],'number':Number(formatResult(_0x2cec01[_0x5bac92(0x12d)]-_0x48eedf['number'],0x8))}));});if(_0x1e36f5['length']==0x1&&!blockTransactionDetection){logger[_0x308b90(0x1fb)](_0x308b90(0x15a)+lastFees[_0x308b90(0xb2)]+_0x308b90(0xc6)+lastFees[_0x308b90(0xb4)]);if(!lastFees[_0x308b90(0xb2)]||_0x1e36f5[0x0]['coin']!=lastFees['currency']||_0x1e36f5[0x0][_0x308b90(0x12d)]>lastFees[_0x308b90(0xb4)]){let _0x5fe81;if(_0x1e36f5[0x0][_0x308b90(0x91)]!=config['basecoin']){let _0x5d511a=global[_0x308b90(0xf0)][noslash(_0x1e36f5[0x0][_0x308b90(0x159)])];_0x5fe81=_0x1e36f5[0x0][_0x308b90(0x104)]?0x1/_0x5d511a:_0x5d511a;}else _0x5fe81=0x1;_0x1e36f5[0x0][_0x308b90(0xf7)]=_0x5fe81,delete _0x1e36f5[0x0][_0x308b90(0x159)];let _0x4545e3=[],_0x2af6a6=[...config[_0x308b90(0x1bf)]]||[],_0x1400e7=config[_0x308b90(0x1bf)];_0x2af6a6['sort']((_0x4fe3f3,_0xe40451)=>_0x4fe3f3[_0x308b90(0x178)]>_0xe40451[_0x308b90(0x178)]?-0x1:_0xe40451[_0x308b90(0x178)]>_0x4fe3f3[_0x308b90(0x178)]?0x1:0x0);const _0xccebf3=getDate();if(_0x2af6a6[0x0]){const _0x14dc6b=fns['parse'](_0x2af6a6[0x0][_0x308b90(0x178)],_0x308b90(0x184),new Date()),_0x1fdeb9=fns[_0x308b90(0xb8)](_0xccebf3,_0x308b90(0x184),new Date());if(fns[_0x308b90(0x9c)](_0x14dc6b,_0x1fdeb9)){_0x4545e3=_0x2af6a6[0x0][_0x308b90(0x19f)];const _0x10ff14=_0x4545e3[_0x308b90(0x167)](_0x2c1f6c=>_0x2c1f6c[_0x308b90(0x91)]==_0x1e36f5[0x0]['coin']);_0x10ff14?(_0x10ff14[_0x308b90(0x12d)]+=_0x1e36f5[0x0][_0x308b90(0x12d)],_0x10ff14[_0x308b90(0x12d)]==0x0&&(_0x4545e3=_0x4545e3[_0x308b90(0x10a)](_0x375707=>{const _0x380de1=_0x308b90;return _0x375707['coin']!=_0x1e36f5[0x0][_0x380de1(0x91)];}))):_0x4545e3[_0x308b90(0xfa)](_0x1e36f5[0x0]);const _0x32aad4=_0x1400e7[_0x308b90(0x167)](_0x5be985=>_0x5be985[_0x308b90(0x178)]==_0xccebf3);_0x32aad4[_0x308b90(0x19f)]=_0x4545e3;}else _0x1400e7[_0x308b90(0xfa)]({'date':_0xccebf3,'changes':[_0x1e36f5[0x0]]});}const _0x3e6620=_0x1400e7[_0x308b90(0x167)](_0x3b183f=>_0x3b183f[_0x308b90(0x178)]==_0xccebf3);if(_0x3e6620){let _0x5f32c3=!![];_0x3e6620[_0x308b90(0x19f)]['forEach'](_0x4fdecf=>{if(_0x4fdecf['number']!=0x0)_0x5f32c3=![];}),_0x5f32c3&&(_0x1400e7=_0x1400e7[_0x308b90(0x10a)](_0x2829c9=>{return _0x2829c9['date']!=_0xccebf3;}));}let _0x485423=dbConfig[_0x308b90(0x1d1)](_0x308b90(0x1e1))['find']({'botID':botID})[_0x308b90(0xec)]();_0x485423&&(dbConfig[_0x308b90(0x1d1)](_0x308b90(0x1e1))['find']({'botID':botID})['assign']({'liquidity':_0x1400e7})[_0x308b90(0x1db)](),config[_0x308b90(0x1bf)]=_0x1400e7),logHistory(_0x308b90(0xba),_0x308b90(0x168)+Math[_0x308b90(0x1fd)](_0x1e36f5[0x0]['number'])+'\x20'+_0x1e36f5[0x0]['coin']+'\x20'+(_0x1e36f5[0x0][_0x308b90(0x12d)]>0x0?_0x308b90(0xd2):_0x308b90(0x19a))+_0x308b90(0x192)),proxyEmit(_0x308b90(0x14e),emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x308b90(0x1fd)](_0x1e36f5[0x0][_0x308b90(0x12d)])+'\x20'+_0x1e36f5[0x0][_0x308b90(0x91)]+'\x20'+(_0x1e36f5[0x0][_0x308b90(0x12d)]>0x0?_0x308b90(0xd2):_0x308b90(0x19a)));transactionDetected=!![],currentCoins=_0x4c03d2,currentCoinsAll=_0x491660;}await sleep(watchTransactionsInterval);}catch(_0x16c5ca){if(!exchangeStopped)await handleError(_0x16c5ca,_0x308b90(0x16c));}else await sleep(0x64);}}async function loadSymbols(_0x3130f2=config[_0xad2cee(0xa1)],_0x144f35=![]){const _0x10e01f=_0xad2cee;if(allSymbols&&!_0x144f35)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x10e01f(0x1f4)][_0x10e01f(0x10a)](_0x19ab0d=>{const _0x267e80=_0x10e01f;let _0x5e39bb=![];const _0x445e53=exceptions[_0x3130f2[_0x267e80(0x1a3)]()]||[];return _0x445e53['forEach'](_0xd05450=>{const _0x3d0b72=_0x267e80;if(_0x19ab0d[_0x3d0b72(0x10f)](_0xd05450))_0x5e39bb=!![];}),!_0x5e39bb;});}catch(_0x5c986b){throw _0x5c986b;}}async function initclient(){const _0x3e9d4f=_0xad2cee;emitLoadingProgress(),proxyEmit(_0x3e9d4f(0x14e),emittedConfiguration()),proxyEmit(_0x3e9d4f(0xc0),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3e9d4f(0xa0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x41914e=getNormalizedPerformance();emitPerformance(_0x41914e),getStartingBalances(_0x41914e);}async function toggleBotMode(){const _0x1a4e0a=_0xad2cee;let _0x9398d8=dbConfig['get']('bot')[_0x1a4e0a(0x167)]({'botID':botID})[_0x1a4e0a(0xec)]();if(_0x9398d8){const _0x4df058=!_0x9398d8[_0x1a4e0a(0x17c)];dbConfig[_0x1a4e0a(0x1d1)](_0x1a4e0a(0x1e1))[_0x1a4e0a(0x167)]({'botID':botID})[_0x1a4e0a(0xea)]({'headless':_0x4df058})['write'](),config[_0x1a4e0a(0x17c)]=_0x4df058,proxyEmit(_0x1a4e0a(0x14e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x218576=_0xad2cee;process[_0x218576(0x8f)]({'updatebotmanager':!![]},_0x22ec17=>{});}async function loadCoins(_0x20292c){const _0x37d4fe=_0xad2cee;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3f083d,_0x250569=0x0,_0x156543=0x0;_0x20292c[_0x37d4fe(0x1b0)](_0x2b23ea=>{const _0x54cf8b=_0x37d4fe;loading[_0x54cf8b(0x1cd)][_0x54cf8b(0xfa)](_0x2b23ea);}),loadingCanceled=![];let _0x333c73=![];while(_0x3f083d!=_0x20292c[_0x37d4fe(0xc1)]){_0x3f083d=0x0,_0x20292c[_0x37d4fe(0x1b0)](_0xeabc09=>{const _0x1df986=_0x37d4fe;if(global[_0x1df986(0xf0)][noslash(_0xeabc09)]){loading[_0x1df986(0x1cd)]=loading[_0x1df986(0x1cd)][_0x1df986(0x10a)](_0x4d5cc2=>_0x4d5cc2!=_0xeabc09);if(!watchedSymbols[_0x1df986(0x10f)](_0xeabc09))watchedSymbols[_0x1df986(0xfa)](_0xeabc09);_0x3f083d++;}}),loading[_0x37d4fe(0xf6)]=Math[_0x37d4fe(0x188)](_0x3f083d/_0x20292c['length']*0x64);loading[_0x37d4fe(0xf6)]!=0x64&&(_0x156543>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x156543>0x78*0x5&&!_0x333c73&&(loading[_0x37d4fe(0x1a0)]=!![],emitLoadingProgress(),_0x333c73=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x37d4fe(0x1cd)][_0x37d4fe(0x95)](',\x20')+_0x37d4fe(0x108)),logHistory('error',_0x37d4fe(0x160)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x2e7f2a=_0x37d4fe;process[_0x2e7f2a(0x8f)]({'stop':_0x2e7f2a(0xf8)},_0x3eac39=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x37d4fe(0x1a0)]=!![],emitLoadingProgress();break;}else _0x3f083d!=_0x250569&&(_0x250569=_0x3f083d,emitLoadingProgress()),_0x156543++,await sleep(0xc8);}_0x3f083d==_0x20292c[_0x37d4fe(0xc1)]&&(coinsLoaded=!![],process[_0x37d4fe(0x8f)]({'status':_0x37d4fe(0x1a9),'live':_0x37d4fe(0x199)},_0x48c41a=>{}),_0x333c73&&logHistory(_0x37d4fe(0xba),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x277edf=_0xad2cee;proxyEmit(_0x277edf(0x14e),{...emittedConfiguration(),'configstate':_0x277edf(0x137)});}function emitLoadingProgress(){const _0x300a69=_0xad2cee;proxyEmit(_0x300a69(0x141),loading);}async function getFiat(){const _0x1fb3c1=_0xad2cee;let _0x3012bc=global[_0x1fb3c1(0xf0)][stablecoins[_0x1fb3c1(0xa8)][_0x1fb3c1(0x91)]],_0x204a7d=global[_0x1fb3c1(0xf0)][stablecoins[_0x1fb3c1(0x183)][_0x1fb3c1(0x91)]];return{'eur':Number(_0x3012bc),'usd':Number(_0x204a7d)};}function capitalize(_0x2f7279){const _0xc2eb07=_0xad2cee;return _0x2f7279[_0xc2eb07(0x16f)](0x0,0x1)[_0xc2eb07(0x1f1)]()+_0x2f7279[_0xc2eb07(0x16f)](0x1);}function supportedExchanges(){const _0x534e5b=_0xad2cee,_0x41c4e8=['ws',_0x534e5b(0x185),_0x534e5b(0xc4),_0x534e5b(0x117),'watchOrders',_0x534e5b(0x1aa),_0x534e5b(0xb6),_0x534e5b(0x1dd),'fetchClosedOrders',_0x534e5b(0x12a)];let _0x196be4=[],_0x3f1ff6=[],_0xf26e8a=ccxt['exchanges'];_0xf26e8a[_0x534e5b(0x1b0)](_0x1fabf4=>{const _0x4044c2=_0x534e5b;try{const _0x22dbb6=new ccxt[_0x1fabf4]();if(_0x22dbb6[_0x4044c2(0x190)]['ws'])_0x3f1ff6[_0x4044c2(0xfa)](_0x22dbb6);}catch(_0x9119b5){}}),_0x3f1ff6['forEach'](_0x507c73=>{const _0x2311bf=_0x534e5b;let _0x1f101a=0x0;_0x41c4e8['forEach'](_0x2dcf4e=>{const _0x48c1b3=_0x16e0;_0x2dcf4e in _0x507c73[_0x48c1b3(0x190)]&&_0x507c73[_0x48c1b3(0x190)][_0x2dcf4e]&&_0x1f101a++;}),_0x1f101a==_0x41c4e8[_0x2311bf(0xc1)]&&_0x196be4[_0x2311bf(0xfa)](capitalize(_0x507c73['id']));});let _0x3f7b2e=[];return _0xf26e8a[_0x534e5b(0x1b0)](_0x3c0817=>{const _0x44cf3e=_0x534e5b;_0x3c0817=capitalize(_0x3c0817);if(!_0x196be4[_0x44cf3e(0x10f)](_0x3c0817))_0x3f7b2e[_0x44cf3e(0xfa)](_0x3c0817);}),_0x196be4;}function setStartDatePerformance(){const _0x3a8116=_0xad2cee;if(config&&config[_0x3a8116(0x1bf)][0x0]['changes'][_0x3a8116(0xc1)]!=0x0){const _0x2747b6=config[_0x3a8116(0x1bf)][0x0]['changes'];dbPerformance[_0x3a8116(0x1d1)](_0x3a8116(0x1fc))['find']({'date':config['startdate']})[_0x3a8116(0xea)]({'coins':_0x2747b6})[_0x3a8116(0x1db)]();}}async function recreateCoinResults(){const _0x4c5b8d=_0xad2cee;let _0x4e040f,_0x29f055=[];try{const _0x57bad4=fns['format'](fns[_0x4c5b8d(0x84)](config['startdate'][_0x4c5b8d(0x15d)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x44d12f of currentCoins){if(_0x44d12f[_0x4c5b8d(0x91)]!=config['basecoin']){let _0x51b168=0x0,_0x4566b5,_0x30f553;_0x4e040f=await getAllEventOrders(_0x44d12f['symbol']);if(_0x4e040f[_0x4c5b8d(0xc1)]>0x0)_0x4e040f[_0x4c5b8d(0x1b0)](_0x450092=>{const _0x466a71=_0x4c5b8d,_0x41c451=_0x44d12f['symbol'][_0x466a71(0x10f)](config['basecoin']+'/');_0x29f055[_0x466a71(0xfa)]({'datetime':_0x450092[_0x466a71(0x1b1)],'coin':_0x44d12f[_0x466a71(0x91)],'symbol':_0x44d12f[_0x466a71(0x159)],'side':_0x450092[_0x466a71(0x13e)],'reverse':_0x41c451,'amount':formatResult(_0x450092['filled'],0x8),'filled':formatResult(_0x450092['filled'],0x8),'price':formatResult(_0x450092[_0x466a71(0xf7)],0x8)}),_0x51b168=_0x450092[_0x466a71(0x13e)]==_0x466a71(0x1a5)?_0x51b168+_0x450092[_0x466a71(0xaf)]:_0x51b168-_0x450092[_0x466a71(0xaf)];if(!_0x30f553)_0x30f553=_0x450092[_0x466a71(0xf7)];});_0x4566b5=_0x44d12f[_0x4c5b8d(0x12d)]-_0x51b168;let _0x567c09;config[_0x4c5b8d(0x1bf)][_0x4c5b8d(0x1b0)](_0x1d3853=>{const _0x2cd211=_0x4c5b8d;!_0x567c09&&(_0x567c09=_0x1d3853['changes']['find'](_0xc48840=>_0xc48840['coin']==_0x44d12f['coin']),_0x567c09&&(_0x4566b5=_0x567c09[_0x2cd211(0x12d)],_0x30f553=_0x567c09['price']));});let _0x4d8b15=dbCoinResults[_0x4c5b8d(0x1d1)](_0x4c5b8d(0x169))[_0x4c5b8d(0x167)]({'coin':_0x44d12f['coin']})[_0x4c5b8d(0xec)]();_0x4d8b15={'coin':_0x44d12f[_0x4c5b8d(0x91)],'number':_0x4566b5,'breakeven':_0x30f553,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4c5b8d(0x1d1)]('coins')[_0x4c5b8d(0x167)]({'coin':_0x44d12f[_0x4c5b8d(0x91)]})['assign'](_0x4d8b15)['write']();}}_0x29f055[_0x4c5b8d(0xd3)]((_0x59524e,_0xe5a5a2)=>_0x59524e['datetime']>_0xe5a5a2[_0x4c5b8d(0x1b1)]?0x1:_0xe5a5a2[_0x4c5b8d(0x1b1)]>_0x59524e[_0x4c5b8d(0x1b1)]?-0x1:0x0);let _0x46a586=0x0;for(let _0x23f17d of _0x29f055){await updateCoinResults(_0x23f17d,!![]);}}catch(_0x1d38aa){await handleError(_0x1d38aa,_0x4c5b8d(0x113));}}async function getAllEventOrders(_0x4371f9){const _0x2ae88=_0xad2cee;let _0x5e377f=[],_0x276b92=dbLogs[_0x2ae88(0x1d1)](_0x2ae88(0x122))[_0x2ae88(0x10a)](_0x7798de=>{const _0x3e5190=_0x2ae88,_0x37381f=_0x7798de[_0x3e5190(0x1cf)][_0x3e5190(0x1a3)]();return _0x37381f[_0x3e5190(0x10f)](_0x4371f9['toLowerCase']())&&(_0x37381f[_0x3e5190(0x10f)]('market')&&_0x37381f[_0x3e5190(0x10f)](_0x3e5190(0x1eb))||_0x37381f['includes'](_0x3e5190(0xaf))&&_0x37381f[_0x3e5190(0x10f)]('order'));})['sortBy'](_0x2ae88(0x180))['value']();return _0x276b92['forEach'](_0x11735e=>{const _0x4d5eb6=_0x2ae88,_0x3a9ed0=_0x11735e[_0x4d5eb6(0x1cf)][_0x4d5eb6(0x10f)](_0x4d5eb6(0xbb))?'sell':_0x4d5eb6(0x1a5),_0xd39280=/#([0-9]|\.)+\s/i,_0x43c5f2=Number(_0xd39280[_0x4d5eb6(0x1bd)](_0x11735e[_0x4d5eb6(0x1cf)])[0x0][_0x4d5eb6(0x1c5)](0x1)),_0x4d7744=/@([0-9]|\.)+$/i,_0xce3fc3=Number(_0x4d7744['exec'](_0x11735e['event'])[0x0][_0x4d5eb6(0x1c5)](0x1));_0x5e377f[_0x4d5eb6(0xfa)]({'datetime':_0x11735e[_0x4d5eb6(0x180)],'coin':symbolToCoin(_0x4371f9),'symbol':_0x4371f9,'side':_0x3a9ed0,'amount':_0x43c5f2,'filled':_0x43c5f2,'price':_0xce3fc3});}),_0x5e377f;}async function getAllOrders(_0x425722,_0x2a1b69){const _0x1df417=_0xad2cee;let _0x3a47cd=[];while(_0x2a1b69<exchange[_0x1df417(0xeb)]()){const _0x4e7136=0x1f4,_0x5e279c=await exchange[_0x1df417(0x1c9)](_0x425722,_0x2a1b69,_0x4e7136);if(_0x5e279c['length'])_0x2a1b69=_0x5e279c[_0x5e279c[_0x1df417(0xc1)]-0x1][_0x1df417(0xf9)]+0x1,_0x3a47cd=_0x3a47cd[_0x1df417(0xc2)](_0x5e279c);else break;}return _0x3a47cd;}async function validate24hChanges(){const _0x4f1151=_0xad2cee;for(const _0x31962a of currentCoins){if(_0x31962a[_0x4f1151(0x91)]!=config[_0x4f1151(0x109)]){let _0x4cc1ae;_0x31962a[_0x4f1151(0x104)]?_0x4cc1ae=formatResult((0x1/(global[_0x4f1151(0xa3)][noslash(_0x31962a['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x4cc1ae=global['change'][noslash(_0x31962a[_0x4f1151(0x159)])],_0x4cc1ae<config['change24h']&&(logHistory('error',_0x31962a[_0x4f1151(0x91)]+_0x4f1151(0x1e7)+_0x4cc1ae+'%'),logHistory('error',_0x4f1151(0x119)),logHistory('error',_0x4f1151(0x102)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5a7e2f,_0x3ecc5c){const _0x594c18=_0xad2cee;if(!_0x5a7e2f)return!![];const _0x24e2b0=_0x3ecc5c[_0x594c18(0xa6)]('.'),_0x5734bb=_0x5a7e2f[_0x594c18(0xa6)]('.');for(var _0xc61df5=0x0;_0xc61df5<_0x5734bb[_0x594c18(0xc1)];_0xc61df5++){const _0x23a87a=~~_0x5734bb[_0xc61df5],_0x2ebae8=~~_0x24e2b0[_0xc61df5];if(_0x23a87a<_0x2ebae8)return!![];if(_0x23a87a>_0x2ebae8)return![];}return![];}async function oneTimeMigration(){const _0x45b34a=_0xad2cee;let _0x368388=dbLogs[_0x45b34a(0x1d1)](_0x45b34a(0x15f))[_0x45b34a(0xec)]();if(isOlderVersion(_0x368388,_0x45b34a(0x129))){let _0x4e52e9=[];const _0x528610=dbLogs[_0x45b34a(0x1d1)](_0x45b34a(0x122))['value']();_0x528610['forEach'](_0x1f6287=>{const _0x361408=_0x45b34a;_0x4e52e9[_0x361408(0xfa)]({'time':_0x1f6287[_0x361408(0x180)],'type':_0x1f6287['type'],'event':_0x1f6287[_0x361408(0x1cf)]});}),dbLogs['get']('logs')[_0x45b34a(0xea)](_0x4e52e9)['write']();}let _0x4f05fe=dbConfig[_0x45b34a(0x1d1)]('version')[_0x45b34a(0xec)]();if(isOlderVersion(_0x4f05fe,_0x45b34a(0x129))){let _0x58cabb=dbConfig[_0x45b34a(0x1d1)](_0x45b34a(0x1e1))[_0x45b34a(0x167)]({'botID':botID})[_0x45b34a(0xec)]();if(_0x58cabb){let _0x526a43=[];_0x58cabb['portfolio'][_0x45b34a(0x1b0)](_0x24214c=>{const _0x4134dc=_0x45b34a;_0x526a43[_0x4134dc(0xfa)]({'coin':_0x24214c[_0x4134dc(0x91)],'number':_0x24214c[_0x4134dc(0xb5)],'price':_0x24214c[_0x4134dc(0x157)]}),delete _0x24214c[_0x4134dc(0xb5)],delete _0x24214c['startprice'];});if(_0x526a43[_0x45b34a(0xc1)]!==0x0)fs['writeFile'](configbackuppath+(_0x45b34a(0x14b)+botID+_0x45b34a(0x1ef)),JSON['stringify'](_0x526a43,null,0x4),function(_0x6a3453){if(_0x6a3453){}});const _0x48971f=(_0x4a32ca,_0x3fe59e)=>{const _0x267b3c=_0x45b34a;let _0x417e6f=[];_0x3fe59e[_0x267b3c(0x1b0)](_0x50ac7c=>{const _0x975387=_0x267b3c,_0x212e78=_0x4a32ca[_0x975387(0x167)](_0x529a57=>_0x529a57[_0x975387(0x91)]==_0x50ac7c[_0x975387(0x91)]);if(!_0x212e78)_0x417e6f[_0x975387(0xfa)](_0x50ac7c);});let _0x1f9943=[];return _0x4a32ca[_0x267b3c(0x1b0)](_0x46159=>{const _0x335e75=_0x267b3c,_0x2a5fa2=_0x3fe59e[_0x335e75(0x167)](_0x4f10a2=>_0x4f10a2[_0x335e75(0x91)]==_0x46159[_0x335e75(0x91)]);if(!_0x2a5fa2||_0x2a5fa2[_0x335e75(0x12d)]==0x0&&_0x46159[_0x335e75(0x12d)]!=0x0)_0x1f9943['push'](_0x46159);}),{'missingDay1':_0x417e6f,'notInDay2':_0x1f9943};},_0x3de0f4=dbPerformance[_0x45b34a(0x1d1)]('data')[_0x45b34a(0x98)]()[_0x45b34a(0xec)]();if(_0x3de0f4[_0x45b34a(0xc1)]>0x1){const {missingDay1:_0x1cf7f8,notInDay2:_0x382ca7}=_0x48971f(_0x526a43,_0x3de0f4[0x1][_0x45b34a(0x169)]);_0x526a43=[..._0x526a43,..._0x1cf7f8],_0x382ca7[_0x45b34a(0x1b0)](_0x2e6fb3=>{const _0x1c47a7=_0x45b34a;let _0x577e57=_0x526a43[_0x1c47a7(0xe9)](_0xf96858=>_0xf96858[_0x1c47a7(0x91)]==_0x2e6fb3['coin']);_0x577e57!=-0x1&&_0x526a43[_0x1c47a7(0xcd)](_0x577e57,0x1);});}_0x526a43[_0x45b34a(0xd3)]((_0xa1f17a,_0x12f87a)=>_0xa1f17a[_0x45b34a(0x91)]>_0x12f87a[_0x45b34a(0x91)]?0x1:_0x12f87a[_0x45b34a(0x91)]>_0xa1f17a['coin']?-0x1:0x0);let _0x59d747=[{'date':_0x58cabb[_0x45b34a(0x197)],'changes':_0x526a43}];_0x3de0f4['length']>0x2&&_0x3de0f4[_0x45b34a(0x1b0)]((_0x5d5ed0,_0xc89ebb)=>{const _0x4faa1b=_0x45b34a;if(_0xc89ebb>0x0&&_0xc89ebb<_0x3de0f4[_0x4faa1b(0xc1)]-0x1){const {missingDay1:_0x4b98af,notInDay2:_0xa21c63}=_0x48971f(_0x3de0f4[_0xc89ebb][_0x4faa1b(0x169)],_0x3de0f4[_0xc89ebb+0x1][_0x4faa1b(0x169)]);_0x526a43=[],(_0x4b98af[_0x4faa1b(0xc1)]!=0x0||_0xa21c63[_0x4faa1b(0xc1)]!=0x0)&&(_0x4b98af[_0x4faa1b(0xc1)]!=0x0&&_0x526a43[_0x4faa1b(0xfa)](..._0x4b98af),_0xa21c63[_0x4faa1b(0xc1)]!=0x0&&(_0xa21c63[_0x4faa1b(0x1b0)](_0x72c387=>{const _0x850ebe=_0x4faa1b;_0x72c387[_0x850ebe(0x12d)]=-_0x72c387[_0x850ebe(0x12d)];}),_0x526a43[_0x4faa1b(0xfa)](..._0xa21c63)),_0x526a43[_0x4faa1b(0xd3)]((_0x1f0bbf,_0x424cc3)=>_0x1f0bbf[_0x4faa1b(0x91)]>_0x424cc3[_0x4faa1b(0x91)]?0x1:_0x424cc3[_0x4faa1b(0x91)]>_0x1f0bbf['coin']?-0x1:0x0),_0x59d747['push']({'date':_0x3de0f4[_0xc89ebb+0x1][_0x4faa1b(0x178)],'changes':_0x526a43}));}}),dbConfig[_0x45b34a(0x1d1)](_0x45b34a(0x1e1))[_0x45b34a(0x167)]({'botID':botID})[_0x45b34a(0xea)]({..._0x58cabb,'liquidity':_0x59d747})[_0x45b34a(0x1db)]();}}if(isOlderVersion(_0x4f05fe,_0x45b34a(0xa7))){let _0x5ca16f=dbConfig['get']('bot')[_0x45b34a(0x167)]({'botID':botID})[_0x45b34a(0xec)]();if(_0x5ca16f){const _0x498710=_0x5ca16f[_0x45b34a(0xa1)],_0x9563a5=_0x498710?capitalize(_0x498710):_0x45b34a(0x1b5);dbConfig[_0x45b34a(0x1d1)](_0x45b34a(0x1e1))[_0x45b34a(0x167)]({'botID':botID})[_0x45b34a(0xea)]({'exchange':_0x9563a5})[_0x45b34a(0x1db)]();}}let _0x470a5f=dbPerformance[_0x45b34a(0x1d1)](_0x45b34a(0x15f))['value']();isOlderVersion(_0x470a5f,_0x45b34a(0x129))&&setStartDatePerformance();let _0x57cf67=dbCoinResults[_0x45b34a(0x1d1)]('version')[_0x45b34a(0xec)]();if(isOlderVersion(_0x57cf67,_0x45b34a(0xe7))){let _0x1e2482=dbCoinResults[_0x45b34a(0x1d1)]('coins')[_0x45b34a(0xec)]();if(_0x1e2482[_0x45b34a(0xc1)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x327883=_0xad2cee;dbConfig[_0x327883(0x1a2)](_0x327883(0x15f),serverversion)['write'](),dbPerformance[_0x327883(0x1a2)](_0x327883(0x15f),serverversion)[_0x327883(0x1db)](),dbLogs[_0x327883(0x1a2)](_0x327883(0x15f),serverversion)['write'](),dbCoinResults[_0x327883(0x1a2)](_0x327883(0x15f),serverversion)[_0x327883(0x1db)]();}function getConfiguration(_0x33b0d3){const _0x5612ca=_0xad2cee;let _0x4e084b=dbConfig[_0x5612ca(0x1d1)]('bot')[_0x5612ca(0x167)]({'botID':_0x33b0d3})[_0x5612ca(0xec)]();if(_0x4e084b){let _0x28f20f=![];typeof _0x4e084b[_0x5612ca(0x16e)]==_0x5612ca(0x14a)&&(_0x4e084b={..._0x4e084b,'threshold':Number(_0x4e084b[_0x5612ca(0x16e)])},_0x28f20f=!![]),_0x4e084b[_0x5612ca(0xe4)]==null&&(_0x4e084b={..._0x4e084b,'change24h':-0x14},_0x28f20f=!![]),!_0x4e084b[_0x5612ca(0x1a7)]&&(_0x4e084b={..._0x4e084b,'fiat':'USD'},_0x28f20f=!![]),!_0x4e084b['onepagemode']&&(_0x4e084b={..._0x4e084b,'onepagemode':settings[_0x5612ca(0x130)]},_0x28f20f=!![]),_0x28f20f&&(_0x4e084b={'botID':_0x4e084b[_0x5612ca(0xc8)],'exchange':_0x4e084b['exchange'],'apiKey':_0x4e084b[_0x5612ca(0x1ea)],'apiSecret':_0x4e084b['apiSecret'],'apiPassword':_0x4e084b['apiPassword'],'basecoin':_0x4e084b['basecoin'],'botname':_0x4e084b[_0x5612ca(0x9f)],'showname':_0x4e084b[_0x5612ca(0xcc)],'threshold':_0x4e084b[_0x5612ca(0x16e)],'ordertype':_0x4e084b[_0x5612ca(0x15c)],'timeout':_0x4e084b[_0x5612ca(0xbf)],'fiat':_0x4e084b['fiat'],'startdate':_0x4e084b[_0x5612ca(0x197)],'recreate':_0x4e084b[_0x5612ca(0x10b)],'timeshift':_0x4e084b['timeshift'],'onepagemode':_0x4e084b[_0x5612ca(0x130)],'headless':_0x4e084b[_0x5612ca(0x17c)],'cooldown':_0x4e084b[_0x5612ca(0x1b7)],'change24h':_0x4e084b[_0x5612ca(0xe4)],'emojibuy':_0x4e084b['emojibuy'],'emojisell':_0x4e084b[_0x5612ca(0x162)],'portfolio':_0x4e084b[_0x5612ca(0x114)],'liquidity':_0x4e084b[_0x5612ca(0x1bf)],'openOrders':_0x4e084b[_0x5612ca(0xfd)]},dbConfig[_0x5612ca(0x1d1)](_0x5612ca(0x1e1))['remove']()['write'](),dbConfig['get']('bot')['push'](_0x4e084b)['write']());}else _0x4e084b={'botID':_0x33b0d3,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5612ca(0x165)+_0x33b0d3,'showname':![],'threshold':0x3,'ordertype':_0x5612ca(0x156),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x5612ca(0x130)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4e084b;}function emittedConfiguration(){const _0xe9baa1=_0xad2cee;let _0x186f85;if(config[_0xe9baa1(0x1ea)]=='')_0x186f85={...config,'configstate':_0xe9baa1(0xac)};else config['apiKey']=='***'?_0x186f85={...config,'configstate':_0xe9baa1(0xf2)}:(_0x186f85={...config,'apiKey':_0xe9baa1(0x151),'apiSecret':_0xe9baa1(0x151)},config['apiPassword']&&(_0x186f85[_0xe9baa1(0x1cb)]=_0xe9baa1(0x151)));return _0x186f85;}function getSettings(){const _0x510e6e=_0xad2cee;return dbSettings[_0x510e6e(0x1d1)](_0x510e6e(0x126))['value']();}function getSecure(){const _0x205fcd=_0xad2cee;return dbSecure[_0x205fcd(0x1d1)]('secure')[_0x205fcd(0xec)]()||{};}function updateTimeshift(_0x50aea4){const _0x371840=_0xad2cee;let _0x3130ef=dbConfig['get'](_0x371840(0x1e1))[_0x371840(0x167)]({'botID':botID})[_0x371840(0xec)]();_0x3130ef&&dbConfig[_0x371840(0x1d1)](_0x371840(0x1e1))['find']({'botID':botID})[_0x371840(0xea)]({'timeshift':_0x50aea4})[_0x371840(0x1db)](),config['timeshift']=_0x50aea4,proxyEmit(_0x371840(0x14e),emittedConfiguration());}function updateOnepagemode(_0x5bbfde){const _0x25cf7a=_0xad2cee;let _0x212b0f=dbConfig[_0x25cf7a(0x1d1)](_0x25cf7a(0x1e1))[_0x25cf7a(0x167)]({'botID':botID})['value']();_0x212b0f&&dbConfig[_0x25cf7a(0x1d1)](_0x25cf7a(0x1e1))['find']({'botID':botID})[_0x25cf7a(0xea)]({'onepagemode':_0x5bbfde})['write'](),config[_0x25cf7a(0x130)]=_0x5bbfde,proxyEmit(_0x25cf7a(0x14e),emittedConfiguration());}async function storeConfiguration(_0xdac0e9){const _0x209db9=_0xad2cee;logger[_0x209db9(0x1fb)](_0x209db9(0x131));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x209db9(0x1fb)]('Transaction\x20detection\x20blocked');let _0x575fe7=[],_0xfcaf8d=![],_0x2b15f9=[];_0xdac0e9[_0x209db9(0x114)][_0x209db9(0x1b0)](_0x56aefd=>{const _0x151d45=_0x209db9;if(!_0x56aefd[_0x151d45(0x1ca)]&&_0x56aefd[_0x151d45(0x91)]!=_0xdac0e9['basecoin'])_0x2b15f9[_0x151d45(0xfa)](_0x56aefd[_0x151d45(0x159)]);}),_0x2b15f9[_0x209db9(0x1b0)](_0xfcb7f3=>{const _0x21a895=_0x209db9,_0x122370=watchedSymbols[_0x21a895(0x10f)](_0xfcb7f3);!_0x122370&&_0x575fe7[_0x21a895(0xfa)](_0xfcb7f3);});_0x575fe7['length']>0x0?_0xfcaf8d=!![]:currentCoins[_0x209db9(0x1b0)](_0x4c27c7=>{const _0x51889c=_0x209db9;if(_0x4c27c7[_0x51889c(0x91)]!=config[_0x51889c(0x109)]){const _0xe0ecb3=_0x2b15f9[_0x51889c(0x167)](_0x550edd=>_0x550edd==_0x4c27c7[_0x51889c(0x159)]);!_0xe0ecb3&&(_0xfcaf8d=!![]);}});let _0x3e9963=dbConfig['get'](_0x209db9(0x1e1))['find']({'botID':botID})[_0x209db9(0xec)]();_0xdac0e9={..._0xdac0e9,'apiKey':crypt[_0x209db9(0x9b)](secure[_0x209db9(0x1e5)],_0xdac0e9['apiKey'])[_0x209db9(0x93)],'apiSecret':crypt['decrypt'](secure[_0x209db9(0x1e5)],_0xdac0e9['apiSecret'])[_0x209db9(0x93)]};_0xdac0e9[_0x209db9(0x1cb)]&&(_0xdac0e9[_0x209db9(0x1cb)]=crypt[_0x209db9(0x9b)](secure[_0x209db9(0x1e5)],_0xdac0e9[_0x209db9(0x1cb)])[_0x209db9(0x93)]);let _0x5a0d05=![];if(_0x3e9963){_0xdac0e9[_0x209db9(0x1ea)]==_0x209db9(0x151)?_0xdac0e9[_0x209db9(0x1ea)]=config['apiKey']:_0x5a0d05=!![];_0xdac0e9[_0x209db9(0xc9)]==_0x209db9(0x151)?_0xdac0e9[_0x209db9(0xc9)]=config['apiSecret']:_0x5a0d05=!![];if(_0xdac0e9['apiPassword']=='************')_0xdac0e9[_0x209db9(0x1cb)]=config[_0x209db9(0x1cb)];else{if(_0xdac0e9['apiPassword'])_0x5a0d05=!![];}dbConfig[_0x209db9(0x1d1)](_0x209db9(0x1e1))['find']({'botID':botID})[_0x209db9(0xea)](_0xdac0e9)[_0x209db9(0x1db)]();}else dbConfig[_0x209db9(0x1d1)](_0x209db9(0x1e1))[_0x209db9(0xfa)](_0xdac0e9)[_0x209db9(0x1db)](),_0x5a0d05=!![],process[_0x209db9(0x8f)]({'status':_0x209db9(0x1a9),'live':'running'},_0x1cce9b=>{});process[_0x209db9(0x8f)]({'botname':_0xdac0e9[_0x209db9(0x9f)]},_0x309411=>{}),updateBotManager(),config={..._0xdac0e9},proxyEmit(_0x209db9(0x86)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5a0d05)await reset(_0x575fe7,!![]);else _0xfcaf8d?await reset(_0x575fe7,![]):getBalances();blockTransactionDetection=![],logger[_0x209db9(0x1fb)](_0x209db9(0xcb));}function _0x16e0(_0x189e47,_0x334e29){const _0x22f645=_0x127f();return _0x16e0=function(_0x31cbd7,_0x57b5a0){_0x31cbd7=_0x31cbd7-0x82;let _0x127f77=_0x22f645[_0x31cbd7];return _0x127f77;},_0x16e0(_0x189e47,_0x334e29);}async function storeHeadless(_0xce55ca){const _0x5d898a=_0xad2cee,_0x3ca1ae={...config,'headless':_0xce55ca['headless']};let _0x29421a=dbConfig[_0x5d898a(0x1d1)](_0x5d898a(0x1e1))[_0x5d898a(0x167)]({'botID':botID})['value']();_0x29421a&&dbConfig[_0x5d898a(0x1d1)]('bot')['find']({'botID':botID})[_0x5d898a(0xea)](_0x3ca1ae)[_0x5d898a(0x1db)](),config={..._0x3ca1ae},updateBotManager(),proxyEmit(_0x5d898a(0x14e),emittedConfiguration());}async function storeFiat(_0x17b232){const _0x291370=_0xad2cee,_0x3f81c5={...config,'fiat':_0x17b232};let _0xca5d7b=dbConfig[_0x291370(0x1d1)](_0x291370(0x1e1))['find']({'botID':botID})[_0x291370(0xec)]();_0xca5d7b&&dbConfig[_0x291370(0x1d1)](_0x291370(0x1e1))[_0x291370(0x167)]({'botID':botID})['assign'](_0x3f81c5)['write'](),config={..._0x3f81c5},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x386d77=_0xad2cee;logger[_0x386d77(0x1ae)]('Resetting\x20bot\x20history');try{if(fs[_0x386d77(0x164)](path[_0x386d77(0x95)](configpath,_0x386d77(0x125)+botID+'-events.json')))fs['unlinkSync'](path[_0x386d77(0x95)](configpath,_0x386d77(0x125)+botID+_0x386d77(0x17d)));if(fs[_0x386d77(0x164)](path[_0x386d77(0x95)](configpath,_0x386d77(0x125)+botID+'-performance.json')))fs[_0x386d77(0x1ab)](path[_0x386d77(0x95)](configpath,'bot-'+botID+'-performance.json'));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-results.json')))fs[_0x386d77(0x1ab)](path[_0x386d77(0x95)](configpath,_0x386d77(0x125)+botID+_0x386d77(0x1a6)));}catch(_0x65406c){if(_0x65406c)logger[_0x386d77(0x1ae)](_0x386d77(0x1c1),_0x65406c);}const _0x183daf=getDate();let _0x385fad=[];currentCoins[_0x386d77(0x1b0)](_0x3f20cc=>{const _0x22ea59=_0x386d77;_0x385fad['push']({'coin':_0x3f20cc[_0x22ea59(0x91)],'number':_0x3f20cc['number'],'price':_0x3f20cc['last']});});let _0x97b09c=dbConfig[_0x386d77(0x1d1)](_0x386d77(0x1e1))[_0x386d77(0x167)]({'botID':botID})[_0x386d77(0xec)]();_0x97b09c&&(dbConfig[_0x386d77(0x1d1)]('bot')[_0x386d77(0x167)]({'botID':botID})[_0x386d77(0xea)]({'liquidity':[{'date':_0x183daf,'changes':_0x385fad}]})['write'](),config[_0x386d77(0x1bf)]=[]),process[_0x386d77(0x8f)]({'stop':_0x386d77(0xf8)},_0xce78dd=>{});}function noslash(_0x4c80b3){const _0x5cf70d=_0xad2cee;return _0x4c80b3[_0x5cf70d(0x15d)]('/','');}function updateHighestFee(_0x2214b4,_0x3b07f1){const _0x349143=_0xad2cee;lastFees[_0x349143(0xb2)]=_0x2214b4,lastFees[_0x349143(0xe8)][_0x349143(0xc1)]===0x14&&lastFees[_0x349143(0xe8)][_0x349143(0x155)](),lastFees['recent20']['push'](_0x3b07f1),lastFees['highest']=Math['max'](...lastFees[_0x349143(0xe8)]);}async function updateNumberCoinsCcxt(_0x2ef719){const _0x4bc162=_0xad2cee;logger[_0x4bc162(0x1fb)](_0x4bc162(0x106)+_0x2ef719[_0x4bc162(0x159)]+_0x4bc162(0x18e)+_0x2ef719[_0x4bc162(0x161)]+_0x4bc162(0x18e)+_0x2ef719['id']+_0x4bc162(0x18e)+_0x2ef719['clientOrderId']);let _0x2d1c97=_0x2ef719[_0x4bc162(0x161)],_0x4093cd=![];currentCoins[_0x4bc162(0x1b0)](_0x1a7168=>{const _0x3d93a2=_0x4bc162;_0x1a7168['symbol']==_0x2ef719[_0x3d93a2(0x159)]&&(_0x4093cd=!![]);});if(!_0x4093cd)return;const _0x1c845f=currentCoins[_0x4bc162(0x167)](_0x217281=>_0x217281[_0x4bc162(0x159)]==_0x2ef719[_0x4bc162(0x159)]),_0x360c30=_0x1fe65e=>{const _0x2e362c=_0x4bc162;if(_0x1c845f)_0x1c845f[_0x2e362c(0xdf)]=_0x1fe65e;};if(_0x2d1c97==_0x4bc162(0x1c4))_0x360c30(_0x4bc162(0x1c4));else{if(_0x2d1c97==_0x4bc162(0x1e8)){_0x360c30(_0x4bc162(0x1e8));const _0xadbd53=await getCoins();[currentCoins,currentCoinsAll]=_0xadbd53,await getOpenOrders(),handleOpenOrders();}else{if(_0x2d1c97==_0x4bc162(0x9d)){logger['debug'](_0x4bc162(0x179)+_0x2ef719['symbol']+_0x4bc162(0x18e)+_0x2ef719[_0x4bc162(0xaf)]+_0x4bc162(0x18e)+_0x2ef719['id']+_0x4bc162(0x18e)+_0x2ef719[_0x4bc162(0x143)]);let _0x46e2f7=![];if(lastOrders)lastOrders[_0x4bc162(0x1b0)](async _0x5ab8ce=>{const _0x4706f5=_0x4bc162;if(_0x5ab8ce['customId']==_0x2ef719[_0x4706f5(0x143)]){logger[_0x4706f5(0x1fb)](_0x4706f5(0x94)+_0x2ef719[_0x4706f5(0x143)]),_0x46e2f7=!![];if(_0x5ab8ce[_0x4706f5(0xaf)]==0x0){logger[_0x4706f5(0x1fb)](_0x4706f5(0xab)+_0x2ef719[_0x4706f5(0x143)]);_0x2ef719[_0x4706f5(0x1b4)]?_0x5ab8ce[_0x4706f5(0xf7)]=_0x2ef719[_0x4706f5(0x1b4)]:_0x5ab8ce['price']=_0x2ef719[_0x4706f5(0xf7)];_0x5ab8ce['filled']=_0x2ef719[_0x4706f5(0xaf)],_0x5ab8ce[_0x4706f5(0x1df)]={'currency':_0x2ef719['fee']?_0x2ef719['fee'][_0x4706f5(0xb2)]:null,'cost':_0x2ef719[_0x4706f5(0x1df)]?_0x2ef719[_0x4706f5(0x1df)][_0x4706f5(0x1e6)]:0x0},updateHighestFee(_0x5ab8ce['fee'][_0x4706f5(0xb2)],_0x5ab8ce['fee'][_0x4706f5(0x1e6)]),_0x360c30(_0x4706f5(0xaf)),await validateOrders();if(lockOrders==ORDERS[_0x4706f5(0x163)]){const _0x2929e3=await getCoins();[currentCoins,currentCoinsAll]=_0x2929e3;}await updateCoinResults(_0x5ab8ce);}}});if(!_0x46e2f7){logger[_0x4bc162(0x1fb)](_0x4bc162(0x1ee)+_0x2ef719['id']),_0x360c30(_0x4bc162(0xaf));const _0x33e4ca=await getCoins();[currentCoins,currentCoinsAll]=_0x33e4ca,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x45fff4=JSON['parse'](lastBalances['portfolio']);const _0x3107ed=_0x45fff4[_0x4bc162(0x167)](_0x55b1d9=>_0x55b1d9[_0x4bc162(0x159)]==_0x2ef719[_0x4bc162(0x159)]);if(_0x3107ed){if(_0x2d1c97==_0x4bc162(0x1c4))_0x3107ed[_0x4bc162(0xdf)]=_0x3107ed[_0x4bc162(0xdf)]=='filled'?_0x4bc162(0xaf):_0x4bc162(0x1c4);else{if(_0x2d1c97==_0x4bc162(0x1e8))_0x3107ed[_0x4bc162(0xdf)]=_0x3107ed[_0x4bc162(0xdf)]==_0x4bc162(0xaf)?'filled':_0x4bc162(0x1e8);else _0x2d1c97==_0x4bc162(0x9d)&&(_0x3107ed[_0x4bc162(0xdf)]=_0x4bc162(0xaf));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x45fff4)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x42a37f=_0xad2cee;await getOpenOrders();let _0x26707e=![];currentCoins[_0x42a37f(0x1b0)](_0x1a18e3=>{const _0x54d874=_0x42a37f;_0x26707e=allOpenOrders[_0x54d874(0x167)](_0x204fd2=>_0x204fd2['symbol']==_0x1a18e3['symbol']),_0x1a18e3[_0x54d874(0xdf)]=_0x26707e?_0x54d874(0x1c4):_0x54d874(0x1cc);});}async function getCoins(_0xc1fbc2=!![],_0x169f92=config[_0xad2cee(0x109)]){const _0x368cc9=_0xad2cee;let _0x1d561d,_0x2231c3=[],_0x5eb05e=[],_0x974a64=[],_0x11b062=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1d561d=await exchange[_0x368cc9(0x12a)](),mybalances=_0x1d561d[_0x368cc9(0x1e0)];for(const [_0x222dcc,_0x3ebcc9]of Object[_0x368cc9(0x181)](mybalances)){_0x11b062[_0x368cc9(0xfa)](_0x222dcc);}if(_0x169f92=='')for(const [_0x20b613,_0x56f333]of Object[_0x368cc9(0x181)](mybalances)){_0x56f333[_0x368cc9(0x194)]()!=0x0&&_0x5eb05e[_0x368cc9(0xfa)]({'coin':_0x20b613});}else{let _0x44b069=![];for(const [_0x563e6e,_0x2f4f25]of Object[_0x368cc9(0x181)](mybalances)){if(_0x11b062[_0x368cc9(0x10f)](_0x563e6e)){const _0x3123b4=config['portfolio'][_0x368cc9(0x167)](_0xbb4d4f=>_0xbb4d4f[_0x368cc9(0x91)]==_0x563e6e),_0x54d582=_0x563e6e+'/'+_0x169f92,_0x2837cf=_0x169f92+'/'+_0x563e6e,_0x5a7d90=currentCoins['find'](_0x3f728d=>_0x3f728d[_0x368cc9(0x91)]==_0x563e6e);_0x44b069=![];if((_0x2f4f25[_0x368cc9(0x194)]()!=0x0||_0x3123b4)&&(allSymbols[_0x368cc9(0x10f)](_0x54d582)||_0x563e6e==_0x169f92))_0x563e6e!=_0x169f92&&_0x2231c3['push'](_0x54d582),_0x5eb05e[_0x368cc9(0xfa)]({'coin':_0x563e6e,'symbol':_0x54d582,'reverse':![],'number':Math[_0x368cc9(0x17a)](_0x2f4f25+(_0x3123b4&&_0x3123b4[_0x368cc9(0x136)]||0x0),0x0),'orderstatus':_0x5a7d90?_0x5a7d90[_0x368cc9(0xdf)]:_0x368cc9(0x1cc)});else(_0x2f4f25[_0x368cc9(0x194)]()!=0x0||_0x3123b4)&&allSymbols[_0x368cc9(0x10f)](_0x2837cf)&&(_0x563e6e!=_0x169f92&&_0x2231c3['push'](_0x2837cf),_0x5eb05e['push']({'coin':_0x563e6e,'symbol':_0x2837cf,'reverse':!![],'number':Math[_0x368cc9(0x17a)](_0x2f4f25+(_0x3123b4&&_0x3123b4[_0x368cc9(0x136)]||0x0),0x0),'orderstatus':_0x5a7d90?_0x5a7d90[_0x368cc9(0xdf)]:_0x368cc9(0x1cc)}));}}}}catch(_0x577354){if(!_0xc1fbc2)handleErrorNoStop(_0x577354,_0x368cc9(0xce));else await handleError(_0x577354,_0x368cc9(0xce));}return _0x974a64=cloneDeep(_0x5eb05e),_0x5eb05e=_0x5eb05e['filter'](_0xef7d90=>{const _0x3a2954=_0x368cc9,_0x1280af=config['portfolio']['find'](_0x2eb3c8=>_0x2eb3c8['coin']==_0xef7d90['coin']);return _0x1280af&&!_0x1280af[_0x3a2954(0x1ca)];}),[_0x5eb05e,_0x974a64];}async function getCoinNumber(_0xd2c545){const _0x5349c5=_0xad2cee;let _0x8bf49f;try{const _0x2cac5a=await exchange['fetchBalance']();_0x8bf49f=_0x2cac5a[_0x5349c5(0x1e0)][_0xd2c545];}catch(_0x44f5fd){await handleError(_0x44f5fd,_0x5349c5(0x11b));}return _0x8bf49f;}async function getOpenOrders(){const _0x6d60bd=_0xad2cee;let _0x4425b2;allOpenOrders=[];try{for(const _0x1bdc35 of config[_0x6d60bd(0x114)]){!_0x1bdc35['excluded']&&_0x1bdc35['coin']!=config[_0x6d60bd(0x109)]&&(_0x4425b2=await exchange[_0x6d60bd(0x1dd)](_0x1bdc35['symbol']),_0x4425b2[_0x6d60bd(0xc1)]>0x0&&allOpenOrders[_0x6d60bd(0xfa)](_0x4425b2[0x0]));}}catch(_0x11e00f){await handleError(_0x11e00f,_0x6d60bd(0x11f));}}function _0x127f(){const _0x1830e2=['value','Initiating\x20exchange','./logs/','loadSymbols()','ticker','startsWith','recovery','starting-balances','percentage','exchange\x20not\x20reloaded','progress','price','restart','timestamp','push','Unknown\x20error\x20occured','constructor','openOrders','mkdirSync','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20portfolio:</b>\x20\x0a\x0a','Initiating\x20exchange\x20reload','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','InvalidNonce','reverse','ExchangeNotAvailable','0\x20-\x20EXECUTION:\x20','limit','\x20-\x20bot\x20not\x20started','basecoin','filter','recreate','1\x20-\x20Handle\x20open\x20orders','getPortfolio(2)','add','includes','YOYOW/','<b>Bot\x20','UNLOCKING','recreateCoinResults()','portfolio','001','lowdb','watchTrades','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','additional\x20symbols\x20','getCoinNumber()','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','526440oxZjCu','bb-secure.json','getOpenOrders()','***','\x20orders\x20in\x20less\x20than\x20','logs','exchange\x20reloaded','customId','bot-','settings','<b>','BNB','2.3.5','fetchBalance','bid','ask','number','ETH','initclient','onepagemode','Saving\x20configuration','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','UNLOCKED','log','-------------------------------\x0a','offset','loading-canceled','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','2\x20-\x20Validate\x20orders:\x20','ORDERS.UNLOCKED','sendPortfolioTelegram','limits','sendMetricsTelegram','side','no\x20additional\x20symbols','\x20change','coin-loading-progress','limit-high','clientOrderId','Invalid\x20quantity','-performance.json',':\x20Bot\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Executing\x20exchange\x20reload','<pre>','string','starting-balance-','USDT','page','configuration','BNB/','search','************','timeshift','sha256','date-fns','shift','market','startprice','ccxt','symbol','Fees\x20|\x20currency:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','ordertype','replace','sortBy','version','Pausing\x20for\x20','status','emojisell','LOCKED','existsSync','Bot\x20','amountToPrecision','find','Portfolio\x20change\x20detected:\x20','coins','format','849072xcOnaw','watchTransactions','ORDERS.UNLOCKING','threshold','substring','stringify','target','uncaughtException','\x20minutes\x20-\x20','fees','2\x20-\x20Handled\x20open\x20orders','Order\x20filled:\x20','storeFiat','date','1\x20-\x20FILLED:\x20','max','getSeconds','headless','-events.json','delta','173187thRFVw','time','entries','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','usd','yyyy/MM/dd','fetchTickers','\x20not\x20responding','path','round','emitHistory','no\x20open\x20orders','type','\x20:\x20','47831KnIBFS','\x20|\x20','API-key\x20format\x20invalid','has','pro','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Avoiding\x20continuous\x20order\x20attempts','toString','Net\x20effect','ongoing','startdate','\x20closed\x20the\x20connection','running','removed','\x20metrics:</b>\x20\x0a\x0a','net-fiat','map','getTime','changes','cancel','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','set','toLowerCase','AuthenticationError','buy','-results.json','fiat','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','enabled','cancelOrder','unlinkSync','Executed\x20','(((.+)+)+)+$','full','-config.json','forEach','datetime','toFixed','BTC','average','Binance','fromCodePoint','cooldown','createWriteStream','/output-000.log','381942DIxUda','\x20>\x20','orderId','exec','breakeven','liquidity','\x20value','Error\x20while\x20deleting\x20files:\x20','\x20hour','trade','open','slice','No\x20more\x20open\x20orders\x20-\x20','apply','kill','fetchClosedOrders','excluded','apiPassword','none','remainingSymbols','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','event','netoffset','get','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','min','bots','Crypt','Limit\x20(high-margin)','watchOrders','padEnd','keys','\x20API\x20secret\x20is\x20invalid','write','buys','fetchOpenOrders','distribution','fee','total','bot','util','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','getDate','privateKey','cost','\x20has\x20a\x2024h\x20drop\x20of\x20','canceled','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','apiKey','order','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','2\x20-\x20FILLED\x20unknown\x20order:\x20','.json','2\x20-\x20Orders\x20unlocked','toUpperCase','getMonth','80KFhvqZ','symbols','function','leftTxt','yargs/yargs','./config/','warning','sells','debug','data','abs','cancelOrders()','rightTxt','cancelLoading',':\x20timer\x20>','net-basecoin','parseISO','Stopped\x20exchange','configuration-stored','getHours','defaults','342JKJFlB','placeOrder()','726159ZGQeJd','realized','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','watch','send','placeOrder','coin','last','message','2\x20-\x20FILLED\x20known\x20order:\x20','join','Error:\x20Invalid\x20argument\x20','close','cloneDeep','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','deleteHistoryAlerts','decrypt','isEqual','closed','showConfig','botname','balances','exchange','DAI/','change','indexOf','emojibuy','split','2.6.0','eur','amount','final','3\x20-\x20handling\x20FILLED\x20order:\x20','initial','hybrid-crypto-js','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','filled','BUSD','getMinutes','currency','EUR','highest','startnumber','createOrder','balancing\x20resumed','parse','NANO/','success','sell','password','/EUR','887115OOZhuL','timeout','exchanges','length','concat','getFullYear','fetchTicker','DDoSProtection','\x20|\x20highest:\x20','error','botID','apiSecret','\x20|\x20lock\x20orders:\x20','Transaction\x20detection\x20unblocked','showname','splice','getCoins()','valid','padStart','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','added','sort','RSA-OAEP','args','USD','getStartingBalances','\x20|\x20Error\x20details:\x20','%\x20(','storeConfiguration','\x20order:\x20','</pre>','Cooldown\x20ended\x20-\x20balancing\x20resumed','argv','orderstatus','MIN_NOTIONAL','/USD','loadMarkets','RequestTimeout','change24h','OrderNotFound','\x20not\x20available','2.5.0','recent20','findIndex','assign','milliseconds'];_0x127f=function(){return _0x1830e2;};return _0x127f();}async function handleOpenOrders(_0x1b3d1c=0x0){const _0x4d4b0b=_0xad2cee;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x4d4b0b(0x163)]&&allOrdersPlaced&&(_0x1b3d1c==0x0?(logger[_0x4d4b0b(0x1fb)](_0x4d4b0b(0x10c)),_0x1b3d1c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x4d4b0b(0x175)),validateOrders(_0x4d4b0b(0x18a))));}async function testAPI(_0x3c1213){const _0x5665b7=_0xad2cee,_0x16a854=ccxt[_0x3c1213['exchange'][_0x5665b7(0x1a3)]()],_0x5067e3=new _0x16a854({'apiKey':_0x3c1213[_0x5665b7(0x1ea)],'secret':_0x3c1213[_0x5665b7(0xc9)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x3c1213[_0x5665b7(0x1cb)])_0x5067e3['password']=_0x3c1213[_0x5665b7(0x1cb)];try{await _0x5067e3[_0x5665b7(0xe2)]();}catch(_0x2af20c){throw _0x2af20c;}}function cloneDeep(_0x459dc5){const _0x2082c0=_0xad2cee;return JSON['parse'](JSON[_0x2082c0(0x170)](_0x459dc5));}async function getPortfolio(_0xd07d8c){const _0x567c67=_0xad2cee;let _0x4c3f90=[],_0x53f47b=[],_0xa985a1=[],_0x5a2a7c;if(_0xd07d8c[_0x567c67(0x1ea)]!==_0x567c67(0x151)||_0xd07d8c['apiSecret']!==_0x567c67(0x151)||_0xd07d8c[_0x567c67(0x1cb)]&&_0xd07d8c[_0x567c67(0x1cb)]!==_0x567c67(0x151)){if(config[_0x567c67(0xa1)]){if(_0xd07d8c['apiKey']==_0x567c67(0x151))_0xd07d8c[_0x567c67(0x1ea)]=config['apiKey'];if(_0xd07d8c[_0x567c67(0xc9)]=='************')_0xd07d8c[_0x567c67(0xc9)]=config[_0x567c67(0xc9)];if(_0xd07d8c[_0x567c67(0x1cb)]=='************')_0xd07d8c[_0x567c67(0x1cb)]=config[_0x567c67(0x1cb)];try{await testAPI(_0xd07d8c);}catch(_0x477692){if(_0x477692[_0x567c67(0x194)]()[_0x567c67(0x10f)]('AuthenticationError')){logger[_0x567c67(0x1fb)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x567c67(0x114),![]);return;}else{handleError(_0x477692,'getPortfolio(0)');return;}}}await initExchange(_0xd07d8c[_0x567c67(0xa1)],_0xd07d8c['apiKey'],_0xd07d8c['apiSecret'],_0xd07d8c[_0x567c67(0x1cb)]);try{await loadSymbols(_0xd07d8c['exchange'],!![]);}catch(_0x57ba3a){if(_0x57ba3a[_0x567c67(0x194)]()[_0x567c67(0x10f)](_0x567c67(0x1a4))){proxyEmit(_0x567c67(0x114),![]);return;}else{handleError(_0x57ba3a,'getPortfolio(1)');return;}}const _0x1844b8=await getCoins(![],_0xd07d8c[_0x567c67(0x109)]);_0xa985a1=cloneDeep(_0x1844b8[0x1]);}else _0xa985a1=cloneDeep(currentCoinsAll);if(_0xd07d8c['basecoin']=='')proxyEmit(_0x567c67(0x114),_0xa985a1);else{_0xa985a1[_0x567c67(0x1b0)](_0x4165bb=>{const _0xbf92ec=_0x567c67;if(_0x4165bb[_0xbf92ec(0x91)]!=_0xd07d8c['basecoin'])_0x4c3f90[_0xbf92ec(0xfa)](_0x4165bb['symbol']);});try{_0x53f47b=await exchange[_0x567c67(0x185)](_0x4c3f90);}catch(_0x1a6f52){if(_0x1a6f52[_0x567c67(0x194)]()[_0x567c67(0x10f)](_0x567c67(0x1a4))){proxyEmit(_0x567c67(0x114),![]);return;}else{handleError(_0x1a6f52,_0x567c67(0x10d));return;}}_0xa985a1[_0x567c67(0x1b0)](_0x356663=>{const _0x46e687=_0x567c67;_0x356663[_0x46e687(0x91)]!=_0xd07d8c[_0x46e687(0x109)]?_0x5a2a7c=_0x356663[_0x46e687(0x104)]?0x1/_0x53f47b[_0x356663[_0x46e687(0x159)]][_0x46e687(0x92)]:_0x53f47b[_0x356663[_0x46e687(0x159)]]['last']:_0x5a2a7c=0x1,_0x356663[_0x46e687(0xf7)]=formatResult(_0x5a2a7c,0x8);}),proxyEmit(_0x567c67(0x114),_0xa985a1);}}function truncateTradeAmount(_0x117a55,_0x542072){const _0x221c14=_0xad2cee;let _0x245b67=0x0;try{_0x245b67=exchange[_0x221c14(0x166)](_0x117a55,_0x542072);}catch(_0x259e91){}return _0x245b67;}function checkMinimums(_0x5955a0){const _0x509c66=_0xad2cee;let _0x472b62=!![];const _0x1fcd08=!_0x5955a0[_0x509c66(0x104)]?markets[_0x5955a0[_0x509c66(0x159)]][_0x509c66(0x13c)][_0x509c66(0xa9)][_0x509c66(0x1d3)]:markets[_0x5955a0[_0x509c66(0x159)]][_0x509c66(0x13c)]['cost'][_0x509c66(0x1d3)],_0x12c032=!_0x5955a0[_0x509c66(0x104)]?markets[_0x5955a0[_0x509c66(0x159)]]['limits'][_0x509c66(0x1e6)][_0x509c66(0x1d3)]:markets[_0x5955a0[_0x509c66(0x159)]][_0x509c66(0x13c)][_0x509c66(0xa9)][_0x509c66(0x1d3)],_0x25f3ec=truncateTradeAmount(_0x5955a0[_0x509c66(0x159)],_0x5955a0['trade']);_0x5955a0['trade']=_0x25f3ec;if(Math[_0x509c66(0x1fd)](_0x25f3ec)<_0x1fcd08)_0x472b62=![];if(Math[_0x509c66(0x1fd)](_0x25f3ec)*_0x5955a0[_0x509c66(0x92)]<_0x12c032)_0x472b62=![];if(_0x5955a0[_0x509c66(0x13e)]=='sell'){let _0x33c7fc=config['portfolio']['find'](_0x262e21=>_0x262e21[_0x509c66(0x91)]==_0x5955a0[_0x509c66(0x91)]);if(_0x33c7fc[_0x509c66(0x136)]>0x0){if(Math[_0x509c66(0x1fd)](_0x25f3ec)>_0x5955a0[_0x509c66(0x12d)]-_0x33c7fc['offset'])_0x472b62=![];}else{if(Math[_0x509c66(0x1fd)](_0x25f3ec)>_0x5955a0['number'])_0x472b62=![];}}if(_0x5955a0[_0x509c66(0x13e)]==_0x509c66(0x1a5)){let _0xbb1ce3=config[_0x509c66(0x114)][_0x509c66(0x167)](_0x391f32=>_0x391f32['coin']==config[_0x509c66(0x109)]),_0x1504b2=currentCoins[_0x509c66(0x167)](_0x1d3742=>_0x1d3742[_0x509c66(0x91)]==config[_0x509c66(0x109)]);if(_0xbb1ce3[_0x509c66(0x136)]>0x0){if(Math['abs'](_0x25f3ec)*_0x5955a0[_0x509c66(0x92)]>_0x1504b2[_0x509c66(0x12d)]-_0xbb1ce3['offset'])_0x472b62=![];}else{if(Math[_0x509c66(0x1fd)](_0x25f3ec)*_0x5955a0[_0x509c66(0x92)]>_0x1504b2[_0x509c66(0x12d)])_0x472b62=![];}}return _0x472b62;}async function getBalances(_0x4b0924=!![]){const _0x14bbba=_0xad2cee;let _0x3d3154=0x0,_0x4bdfc5;const _0x5bf1de=config[_0x14bbba(0x16e)];if(config['headless']&&config[_0x14bbba(0xe4)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x59b5d5=>{const _0x55e001=_0x14bbba;if(_0x59b5d5['coin']!=config['basecoin']){let _0x585e86=global[_0x55e001(0xf0)][noslash(_0x59b5d5[_0x55e001(0x159)])];_0x4bdfc5=_0x59b5d5['reverse']?0x1/_0x585e86:_0x585e86;}else _0x4bdfc5=0x1;let _0x652110=_0x59b5d5[_0x55e001(0x12d)]*_0x4bdfc5;_0x3d3154+=_0x652110,_0x59b5d5[_0x55e001(0x92)]=formatResult(Number(_0x4bdfc5),0x8),_0x59b5d5[_0x55e001(0xec)]=_0x652110;}),currentCoins[_0x14bbba(0x1b0)](_0x6f05e8=>{const _0x2bd2d5=_0x14bbba;let _0x14d6b2=config[_0x2bd2d5(0x114)][_0x2bd2d5(0x167)](_0x40c8a0=>_0x40c8a0[_0x2bd2d5(0x91)]==_0x6f05e8['coin']),_0x1d228b=Number(_0x14d6b2['distribution']),_0x1437e5=_0x6f05e8[_0x2bd2d5(0xec)]/_0x3d3154*0x64,_0x5aa76f=_0x1d228b*_0x3d3154/0x64/_0x6f05e8['last']-_0x6f05e8[_0x2bd2d5(0x12d)];_0x6f05e8[_0x2bd2d5(0x1de)]=formatResult(_0x1437e5,0x3),_0x6f05e8[_0x2bd2d5(0x171)]=formatResult(_0x1d228b,0x3),_0x6f05e8['trade']=formatResult(_0x5aa76f,0x8),_0x6f05e8[_0x2bd2d5(0x13e)]='',_0x6f05e8[_0x2bd2d5(0xcf)]=![];if(_0x6f05e8[_0x2bd2d5(0x91)]!=config[_0x2bd2d5(0x109)]){if(_0x6f05e8[_0x2bd2d5(0x1de)]>_0x1d228b)_0x6f05e8[_0x2bd2d5(0x13e)]=_0x2bd2d5(0xbb),_0x6f05e8['valid']=checkMinimums(_0x6f05e8);else _0x6f05e8[_0x2bd2d5(0x1de)]<_0x1d228b&&(_0x6f05e8[_0x2bd2d5(0x13e)]='buy',_0x6f05e8['valid']=checkMinimums(_0x6f05e8));}_0x6f05e8[_0x2bd2d5(0x17e)]=_0x6f05e8[_0x2bd2d5(0x1de)]/_0x6f05e8['target']-0x1;if(_0x6f05e8[_0x2bd2d5(0xdf)]==_0x2bd2d5(0xaf)||_0x6f05e8[_0x2bd2d5(0xdf)]==_0x2bd2d5(0x1e8))_0x6f05e8['orderstatus']=_0x2bd2d5(0x1cc);}),currentCoins[_0x14bbba(0xd3)]((_0x5e4861,_0x59e8d4)=>_0x5e4861['delta']<_0x59e8d4['delta']?0x1:_0x59e8d4['delta']<_0x5e4861['delta']?-0x1:0x0);const _0x77bb07=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x77bb07['eur'],'usd':_0x77bb07[_0x14bbba(0x183)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5bf1de},proxyEmit(_0x14bbba(0xa0),{'serverversion':serverversion,'balances':lastBalances});if(_0x4b0924){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5bf1de});else{if(lockOrders==ORDERS[_0x14bbba(0x133)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5bf1de});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xcf4cb3=getNormalizedPerformance();getStartingBalances(_0xcf4cb3),emitPerformance(_0xcf4cb3);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x573d91=getNormalizedPerformance();emitPerformance(_0x573d91),getStartingBalances(_0x573d91),logger[_0x14bbba(0x1fb)](_0x14bbba(0x1e3));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x591492=_0xad2cee;if(!lastBalances)return;let _0x1e98c8=[],_0x21cb09,_0x170dd2=JSON[_0x591492(0xb8)](lastBalances[_0x591492(0x114)]);_0x170dd2['sort']((_0x2ee44c,_0x698e23)=>_0x2ee44c[_0x591492(0x91)]>_0x698e23['coin']?0x1:_0x698e23[_0x591492(0x91)]>_0x2ee44c[_0x591492(0x91)]?-0x1:0x0),_0x170dd2[_0x591492(0x1b0)](_0x4c38e7=>{const _0x207c85=_0x591492;let _0x1cfa31={'coin':_0x4c38e7[_0x207c85(0x91)],'number':_0x4c38e7['number'],'price':_0x4c38e7[_0x207c85(0x92)]};_0x1e98c8[_0x207c85(0xfa)](_0x1cfa31);});const _0x341865=await getFiat();_0x21cb09={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x341865[_0x591492(0xa8)],'usd':_0x341865[_0x591492(0x183)],'coins':_0x1e98c8};let _0x4f7065=dbPerformance[_0x591492(0x1d1)](_0x591492(0x1fc))[_0x591492(0x167)]({'date':_0x21cb09[_0x591492(0x178)]})['value']();_0x4f7065?_0x21cb09[_0x591492(0x178)]!=config['startdate']&&dbPerformance['get'](_0x591492(0x1fc))[_0x591492(0x167)]({'date':_0x21cb09[_0x591492(0x178)]})[_0x591492(0xea)](_0x21cb09)[_0x591492(0x1db)]():dbPerformance['get']('data')[_0x591492(0xfa)](_0x21cb09)[_0x591492(0x1db)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x44421d=_0xad2cee;let _0x150029=[];if(dbPerformance['has'](_0x44421d(0x1fc))['value']()){let _0x414067=dbPerformance[_0x44421d(0x1d1)](_0x44421d(0x1fc))[_0x44421d(0x98)]()['sortBy']('date')[_0x44421d(0xec)](),_0x13b8c5=[...config[_0x44421d(0x1bf)]];_0x13b8c5[_0x44421d(0xd3)]((_0x210607,_0x27b28a)=>_0x210607[_0x44421d(0x178)]>_0x27b28a[_0x44421d(0x178)]?-0x1:_0x27b28a[_0x44421d(0x178)]>_0x210607[_0x44421d(0x178)]?0x1:0x0);let _0x348946=0x1,_0x2ca46f=[],_0x2c5e30=0x0;_0x414067[_0x44421d(0x1c5)]()['reverse']()[_0x44421d(0x1b0)]((_0xd383b8,_0x525b6f)=>{const _0x2eb573=_0x44421d;if(_0x13b8c5[_0x2c5e30]){if(_0x414067[_0x414067[_0x2eb573(0xc1)]-_0x525b6f]&&_0x13b8c5[_0x2c5e30][_0x2eb573(0x178)]==_0x414067[_0x414067[_0x2eb573(0xc1)]-_0x525b6f][_0x2eb573(0x178)]){if(_0x525b6f<_0x414067[_0x2eb573(0xc1)]){let _0x372346=0x0,_0x13eb19=0x0;_0x414067[_0x414067[_0x2eb573(0xc1)]-_0x525b6f]['coins'][_0x2eb573(0x1b0)](_0x41f216=>{const _0x5267bb=_0x2eb573;_0x13eb19+=_0x41f216[_0x5267bb(0x12d)]*_0x41f216[_0x5267bb(0xf7)];}),_0x13b8c5[_0x2c5e30][_0x2eb573(0x19f)][_0x2eb573(0x1b0)](_0xaa5821=>{const _0x403b5b=_0x2eb573;_0x372346+=_0xaa5821[_0x403b5b(0x12d)]*_0xaa5821['price'];}),_0x348946*=_0x372346/(_0x13eb19-_0x372346)+0x1;}_0x2c5e30++;}}let _0x25fe19=0x0;_0xd383b8['coins']['forEach'](_0x2ae71a=>{const _0x398e13=_0x2eb573;_0x25fe19+=_0x2ae71a[_0x398e13(0x12d)]*_0x2ae71a[_0x398e13(0xf7)];}),_0x2ca46f[_0x414067[_0x2eb573(0xc1)]-_0x525b6f-0x1]=_0x25fe19*(_0x348946-0x1);});let _0x2f9005=[];_0x13b8c5=[...config[_0x44421d(0x1bf)]]||[];let _0x48bd0e=0x0;_0x2c5e30=0x0,_0x414067[_0x44421d(0x1b0)]((_0x298a26,_0x283589)=>{const _0x347b21=_0x44421d;if(_0x13b8c5[_0x2c5e30]){const _0x4a5fd8=fns[_0x347b21(0xb8)](_0x13b8c5[_0x2c5e30][_0x347b21(0x178)],_0x347b21(0x184),new Date()),_0x5dca4d=fns[_0x347b21(0xb8)](_0x298a26[_0x347b21(0x178)],_0x347b21(0x184),new Date());if(fns['isEqual'](_0x4a5fd8,_0x5dca4d)){let _0x1f0e8e=0x0;_0x13b8c5[_0x2c5e30][_0x347b21(0x19f)][_0x347b21(0x1b0)](_0x39fdaa=>{const _0x16113a=_0x347b21;!_0x2f9005[_0x39fdaa[_0x16113a(0x91)]]?_0x2f9005[_0x39fdaa[_0x16113a(0x91)]]=_0x39fdaa[_0x16113a(0x12d)]:(_0x1f0e8e=_0x2f9005[_0x39fdaa['coin']],_0x2f9005[_0x39fdaa[_0x16113a(0x91)]]+=_0x39fdaa[_0x16113a(0x12d)]);const _0x54091a=_0x298a26['coins'][_0x16113a(0x167)](_0x3f8975=>_0x3f8975[_0x16113a(0x91)]==_0x39fdaa['coin']);(!_0x54091a||_0x54091a[_0x16113a(0x12d)]==0x0)&&(_0x48bd0e+=(-_0x39fdaa['number']-_0x1f0e8e)*_0x39fdaa[_0x16113a(0xf7)]);}),_0x2c5e30++;}}_0x298a26['coins'][_0x347b21(0x1b0)]((_0x23006d,_0x3e7a9a)=>{const _0x1c5d94=_0x347b21;_0x2f9005[_0x23006d[_0x1c5d94(0x91)]]&&(_0x23006d[_0x1c5d94(0xac)]=_0x2f9005[_0x23006d['coin']]);}),_0x150029[_0x347b21(0xfa)]({'date':_0x298a26['date'],'eur':_0x298a26[_0x347b21(0xa8)],'usd':_0x298a26['usd'],'offset':_0x2ca46f[_0x283589],'netoffset':_0x48bd0e,'coins':_0x298a26[_0x347b21(0x169)]});});}return _0x150029;}function emitPerformance(_0x52b7e1){const _0x572d0a=_0xad2cee;_0x52b7e1[_0x572d0a(0xc1)]!==0x0?(proxyEmit('performance',_0x52b7e1),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x2e0679,_0x2dc1a3){const _0x4e728d=_0xad2cee;let _0x964558=0x0,_0x2236d7=0x0,_0x332d8a=0x0;_0x2e0679['coins']['forEach'](_0x100e0b=>{const _0x205fb8=_0x16e0;_0x964558+=_0x100e0b['number']*_0x100e0b[_0x205fb8(0xf7)];});_0x2dc1a3&&(_0x964558+=_0x2e0679[_0x4e728d(0x136)]);if(config[_0x4e728d(0x109)]===_0x4e728d(0x1b3)||config[_0x4e728d(0x109)]===_0x4e728d(0x12e))_0x2236d7=_0x964558*_0x2e0679[_0x4e728d(0xa8)],_0x332d8a=_0x964558*_0x2e0679['usd'];else{if(config['basecoin']===_0x4e728d(0xb0)||config['basecoin']===_0x4e728d(0x14c)||config[_0x4e728d(0x109)]===_0x4e728d(0xd6))_0x2236d7=_0x964558*_0x2e0679[_0x4e728d(0xa8)]/_0x2e0679[_0x4e728d(0x183)],_0x332d8a=_0x964558;else config[_0x4e728d(0x109)]===_0x4e728d(0xb3)&&(_0x2236d7=_0x964558,_0x332d8a=_0x964558*_0x2e0679['usd']/_0x2e0679[_0x4e728d(0xa8)]);}return[_0x964558,_0x2236d7,_0x332d8a];}function getKPIs(_0x44addf,_0x59adb3=_0xad2cee(0xb3)){const _0x304fbe=_0xad2cee,_0x2252d9=config[_0x304fbe(0x109)],_0x2a952d=lastBalances,_0x5d8e87=currentCoins,_0x3015cc=getNormalizedPerformance(),_0x3907b3=_0x44addf===_0x304fbe(0x109)?_0x2252d9:_0x44addf===_0x304fbe(0x1a7)||_0x44addf==='net-fiat'?_0x59adb3:'Net\x20'+_0x2252d9,_0x58f5f2=_0x44addf===_0x304fbe(0x83)?_0x304fbe(0x195):_0x44addf===_0x304fbe(0x19c)?'Net\x20effect':_0x3907b3+_0x304fbe(0x1c0),_0x5e4c90=_0x44addf==='net-basecoin'||_0x44addf==='net-fiat'?'Net\x20effect':_0x3907b3+_0x304fbe(0x140);let _0x490b35=0x0;_0x5d8e87[_0x304fbe(0x1b0)](_0x42d286=>{const _0x383801=_0x304fbe;_0x490b35+=_0x42d286['number']*_0x42d286[_0x383801(0x92)];});if(_0x44addf===_0x304fbe(0x1a7)||_0x44addf==='net-fiat'){if(_0x2252d9===_0x304fbe(0x1b3)||_0x2252d9===_0x304fbe(0x12e))_0x490b35=_0x490b35*(_0x59adb3==='EUR'?_0x2a952d[_0x304fbe(0xa8)]:_0x2a952d[_0x304fbe(0x183)]);else{if(_0x2252d9===_0x304fbe(0xb0)||_0x2252d9===_0x304fbe(0x14c)||_0x2252d9===_0x304fbe(0xd6))_0x490b35=_0x490b35*(_0x59adb3==='EUR'?_0x2a952d[_0x304fbe(0xa8)]/_0x2a952d[_0x304fbe(0x183)]:0x1);else _0x2252d9===_0x304fbe(0xb3)&&(_0x490b35=_0x490b35*(_0x59adb3===_0x304fbe(0xb3)?0x1:_0x2a952d[_0x304fbe(0x183)]/_0x2a952d['eur']));}}let _0x2499f7;if(_0x490b35!==0x0){if(_0x44addf==='basecoin')_0x2499f7=(_0x490b35/startingBalances[_0x304fbe(0x109)]-0x1)*0x64;else{if(_0x59adb3===_0x304fbe(0xb3))_0x2499f7=(_0x490b35/startingBalances[_0x304fbe(0xa8)]-0x1)*0x64;else _0x2499f7=(_0x490b35/startingBalances[_0x304fbe(0x183)]-0x1)*0x64;}let _0x196a1e=0x0;if(startingBalances['coins'])_0x5d8e87[_0x304fbe(0x1b0)](_0x4b1994=>{const _0x1f2116=_0x304fbe;let _0x6bef50=startingBalances['coins'][_0x1f2116(0x167)](_0x207e87=>_0x207e87[_0x1f2116(0x91)]===_0x4b1994[_0x1f2116(0x91)]);if(_0x6bef50&&_0x6bef50[_0x1f2116(0x91)]&&_0x4b1994[_0x1f2116(0x12d)]!==0x0)_0x196a1e+=_0x6bef50['number']*_0x4b1994['last'];});let _0x340a64=0x0;if(_0x3015cc[_0x304fbe(0xc1)]!==0x0){let _0x461bf7=_0x3015cc[_0x3015cc[_0x304fbe(0xc1)]-0x1];_0x340a64=_0x461bf7[_0x304fbe(0x1d0)];}_0x196a1e-=_0x340a64;_0x44addf===_0x304fbe(0x83)&&(_0x2499f7=(_0x490b35-_0x196a1e)/startingBalances['basecoin']*0x64,_0x490b35=_0x490b35-_0x196a1e);if(_0x44addf===_0x304fbe(0x19c)){let _0x2f0141=_0x59adb3==='EUR'?startingBalances[_0x304fbe(0xa8)]:startingBalances[_0x304fbe(0x183)];if(_0x2252d9===_0x304fbe(0x1b3)||_0x2252d9===_0x304fbe(0x12e))_0x196a1e=_0x59adb3==='EUR'?_0x196a1e*_0x2a952d[_0x304fbe(0xa8)]:_0x196a1e*_0x2a952d['usd'];else{if(_0x2252d9===_0x304fbe(0xb0)||_0x2252d9===_0x304fbe(0x14c)||_0x2252d9===_0x304fbe(0xd6))_0x196a1e=_0x59adb3===_0x304fbe(0xb3)?_0x196a1e*_0x2a952d['eur']/_0x2a952d[_0x304fbe(0x183)]:_0x196a1e;else _0x2252d9===_0x304fbe(0xb3)&&(_0x196a1e=_0x59adb3===_0x304fbe(0xb3)?_0x196a1e:_0x196a1e*_0x2a952d[_0x304fbe(0x183)]/_0x2a952d[_0x304fbe(0xa8)]);}_0x2499f7=(_0x490b35-_0x196a1e)/_0x2f0141*0x64,_0x490b35=_0x490b35-_0x196a1e;}if(_0x2499f7){if(_0x2499f7<0x64)_0x2499f7=_0x2499f7[_0x304fbe(0x1b2)](0x2);else{if(_0x2499f7<0x3e8)_0x2499f7=_0x2499f7[_0x304fbe(0x1b2)](0x1);else _0x2499f7=_0x2499f7['toFixed'](0x0);}}else _0x2499f7=Number('0')[_0x304fbe(0x1b2)](0x2);if(_0x490b35){if(Math[_0x304fbe(0x1fd)](_0x490b35)<0.000001)_0x490b35=_0x490b35[_0x304fbe(0x1b2)](0x2);else{if(Math[_0x304fbe(0x1fd)](_0x490b35)<0.1)_0x490b35=_0x490b35['toFixed'](0x6);else{if(Math[_0x304fbe(0x1fd)](_0x490b35)<0x1)_0x490b35=_0x490b35[_0x304fbe(0x1b2)](0x5);else{if(Math['abs'](_0x490b35)<0xa)_0x490b35=_0x490b35['toFixed'](0x4);else{if(Math[_0x304fbe(0x1fd)](_0x490b35)<0x64)_0x490b35=_0x490b35[_0x304fbe(0x1b2)](0x3);else{if(Math[_0x304fbe(0x1fd)](_0x490b35)<0x3e8)_0x490b35=_0x490b35[_0x304fbe(0x1b2)](0x2);else _0x490b35=_0x490b35[_0x304fbe(0x1b2)](0x2);}}}}}}else _0x490b35=Number('0')[_0x304fbe(0x1b2)](0x2);}else _0x2499f7=Number('0')[_0x304fbe(0x1b2)](0x2);return{'value':_0x490b35,'change':_0x2499f7,'leftTxt':_0x58f5f2,'rightTxt':_0x5e4c90};}async function getStartingBalances(_0x39f008,_0x11801f=!![]){const _0x4b2c04=_0xad2cee;if(_0x39f008[_0x4b2c04(0xc1)]!==0x0){const [_0x14c804,_0x168e54,_0x3845c9]=getPerf(_0x39f008[0x0],!![]);let _0x1ccd82=[];config['portfolio'][_0x4b2c04(0x1b0)](_0x1e655a=>{const _0x570d39=_0x4b2c04;let _0xe97cbc=0x0,_0x16505b;config['liquidity'][_0x570d39(0x1b0)](_0x56e325=>{const _0x505468=_0x570d39;let _0x90199d=_0x56e325[_0x505468(0x19f)][_0x505468(0x167)](_0x13d1f5=>_0x13d1f5[_0x505468(0x91)]==_0x1e655a['coin']);if(_0x90199d){_0xe97cbc+=_0x90199d[_0x505468(0x12d)];if(!_0x16505b)_0x16505b=_0x90199d['price'];}}),_0x1ccd82['push']({'coin':_0x1e655a[_0x570d39(0x91)],'number':_0xe97cbc,'initialprice':_0x16505b});});const _0x5c2963={'basecoin':_0x14c804,'eur':_0x168e54,'usd':_0x3845c9,'coins':_0x1ccd82};if(_0x11801f)proxyEmit(_0x4b2c04(0xf3),_0x5c2963);startingBalances=_0x5c2963;}}function headlessMode(_0x5cd00f){const _0x4a0a41=_0xad2cee;let _0x861bfa=_0x5cd00f[_0x4a0a41(0x114)],_0x4410dc=_0x5cd00f[_0x4a0a41(0x16e)],_0x211da9=[];for(let _0x3475ff of _0x861bfa){if(_0x3475ff[_0x4a0a41(0x91)]!=config[_0x4a0a41(0x109)]){if(_0x3475ff[_0x4a0a41(0x17e)]>=_0x4410dc/0x64){if(_0x3475ff[_0x4a0a41(0xcf)])_0x211da9[_0x4a0a41(0xfa)](_0x3475ff);}else{if(_0x3475ff['delta']<=-_0x4410dc/0x64){if(_0x3475ff[_0x4a0a41(0xcf)])_0x211da9[_0x4a0a41(0xfa)](_0x3475ff);}}}}_0x211da9[_0x4a0a41(0xc1)]>0x0&&placeOrder(_0x211da9);}function notifyBalance(_0x3e3491){const _0x5bb214=_0xad2cee;let _0x5c675e=_0x3e3491[_0x5bb214(0x114)],_0x4d1483=_0x3e3491[_0x5bb214(0x16e)],_0x17c6cb=[];for(let _0x2280dc of _0x5c675e){if(_0x2280dc[_0x5bb214(0x91)]!=config[_0x5bb214(0x109)]){if(_0x2280dc[_0x5bb214(0x17e)]>=_0x4d1483/0x64){if(_0x2280dc['valid'])_0x17c6cb[_0x5bb214(0xfa)](_0x2280dc);}else{if(_0x2280dc[_0x5bb214(0x17e)]<=-_0x4d1483/0x64){if(_0x2280dc[_0x5bb214(0xcf)])_0x17c6cb[_0x5bb214(0xfa)](_0x2280dc);}}}}if(_0x17c6cb[_0x5bb214(0xc1)]>0x0){let _0x48d7e8=_0x17c6cb[_0x5bb214(0x19d)](_0x2972d4=>_0x2972d4[_0x5bb214(0x91)]);_0x48d7e8[_0x5bb214(0xd3)]();let _0xd8935f=_0x48d7e8[_0x5bb214(0x95)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5bb214(0x1f9),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xd8935f;}}function symbolToCoin(_0x1142e8){const _0x98d58f=_0xad2cee;let _0x2b2539;if(_0x1142e8[_0x98d58f(0x10f)]('/'+config[_0x98d58f(0x109)]))_0x2b2539=_0x1142e8[_0x98d58f(0x15d)]('/'+config['basecoin'],'');if(_0x1142e8['includes'](config[_0x98d58f(0x109)]+'/'))_0x2b2539=_0x1142e8[_0x98d58f(0x15d)](config[_0x98d58f(0x109)]+'/','');return _0x2b2539;}async function unlockOrders(){const _0x4c89ed=_0xad2cee;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4c89ed(0x163)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x4c89ed(0x112)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x26e74f=await getCoins();[currentCoins,currentCoinsAll]=_0x26e74f,validateOrdersState=_0x4c89ed(0xac),persistOpenOrders([]),lockOrders=ORDERS[_0x4c89ed(0x133)],logger[_0x4c89ed(0x1fb)](_0x4c89ed(0x1f0));}}async function validateOrders(_0x307f42){const _0x53ab39=_0xad2cee;if(_0x307f42)validateOrdersState=_0x307f42;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x53ab39(0xca)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x53ab39(0x16d):_0x53ab39(0x13a)));let _0x3360ed=[],_0x58829d=config[_0x53ab39(0x15c)]==_0x53ab39(0x156)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x53ab39(0xbf)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x53ab39(0x139)+validateOrdersState),lastOrders['forEach'](_0x2bf515=>{const _0x1886fb=_0x53ab39;let _0x304cc7=![];_0x2bf515[_0x1886fb(0xaf)]>0x0&&(_0x304cc7=!![]),_0x3360ed[_0x1886fb(0xfa)](_0x304cc7),_0x304cc7&&config[_0x1886fb(0x15c)]!=_0x1886fb(0x156)&&logHistory(_0x1886fb(0x1eb),_0x1886fb(0x176)+_0x2bf515['symbol']+'\x20'+_0x2bf515[_0x1886fb(0x13e)]+'\x20#'+formatResult(_0x2bf515[_0x1886fb(0xaf)],0x8)+'\x20@'+formatResult(_0x2bf515[_0x1886fb(0xf7)],0x8));}),_0x3360ed[_0x53ab39(0x1b0)]((_0x288611,_0x33f60f)=>{if(_0x288611)lastOrders['splice'](_0x33f60f,0x1);}),persistOpenOrders(lastOrders);const _0x406a08=coolingDown?_0x53ab39(0x15b):_0x53ab39(0xb7);if(validateOrdersState==_0x53ab39(0xac)){validateOrdersState=_0x53ab39(0x196);if(_0x3360ed['includes'](![])){if(config[_0x53ab39(0x15c)]==_0x53ab39(0x156)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x53ab39(0x196)){if(_0x3360ed[_0x53ab39(0x10f)](![])){}else{if(allOrdersPlaced){if(config[_0x53ab39(0x15c)]==_0x53ab39(0x156)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x53ab39(0xaa))_0x3360ed['includes'](![])&&(config[_0x53ab39(0x15c)]=='market'?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x53ab39(0x188)](_0x58829d*validateOrderInterval/0xea60)+_0x53ab39(0x173)+_0x406a08):(await cancelOrders(),logHistory(_0x53ab39(0xba),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x53ab39(0x188)](_0x58829d*validateOrderInterval/0xea60)+_0x53ab39(0x173)+_0x406a08))),await unlockOrders();else{if(validateOrdersState==_0x53ab39(0x18a)){if(config['ordertype']!=_0x53ab39(0x156))logHistory(_0x53ab39(0xba),_0x53ab39(0x1c6)+_0x406a08);await unlockOrders();}}}}}async function cancelOrders(){const _0x3e80d9=_0xad2cee;lastOrders[_0x3e80d9(0x1b0)](async _0xa3fef3=>{const _0x20f449=_0x3e80d9;try{const _0x4554e1=await exchange[_0x20f449(0x1aa)](_0xa3fef3[_0x20f449(0x1bc)],_0xa3fef3[_0x20f449(0x159)]);}catch(_0x49714e){if(_0x49714e['toString']()[_0x20f449(0x10f)](_0x20f449(0xe5))){}else await handleError(_0x49714e,_0x20f449(0x1fe));}});}async function initCoinResults(){const _0x43772e=_0xad2cee;let _0x5b9a72=[];config[_0x43772e(0x114)][_0x43772e(0x1b0)](_0x446a25=>{const _0xfd133f=_0x43772e;if(!_0x446a25['excluded']&&_0x446a25['coin']!=config['basecoin']){let _0x137c3b=dbCoinResults[_0xfd133f(0x1d1)](_0xfd133f(0x169))[_0xfd133f(0x167)]({'coin':_0x446a25[_0xfd133f(0x91)]})[_0xfd133f(0xec)]();if(!_0x137c3b){const _0xbd4421=currentCoins['find'](_0x3ff80e=>_0x3ff80e['coin']==_0x446a25[_0xfd133f(0x91)]),_0x4c21da=global['ticker'][noslash(_0x446a25['symbol'])];let _0x13fc37=_0xbd4421?_0xbd4421[_0xfd133f(0x12d)]:null,_0x5e7bca=_0x446a25[_0xfd133f(0x104)]?0x1/_0x4c21da:_0x4c21da,_0x3e6095;config[_0xfd133f(0x1bf)]['forEach'](_0x24b97f=>{const _0x20c709=_0xfd133f;!_0x3e6095&&(_0x3e6095=_0x24b97f[_0x20c709(0x19f)][_0x20c709(0x167)](_0x3ed41a=>_0x3ed41a[_0x20c709(0x91)]==_0x446a25[_0x20c709(0x91)]),_0x3e6095&&(_0x13fc37=_0x3e6095['number'],_0x5e7bca=_0x3e6095[_0x20c709(0xf7)]));}),_0x5b9a72['push']({'coin':_0x446a25[_0xfd133f(0x91)],'number':_0x13fc37,'price':_0x5e7bca});}}}),_0x5b9a72[_0x43772e(0x1b0)](_0x1e032a=>{const _0x2d108e=_0x43772e,_0x25218d={'coin':_0x1e032a[_0x2d108e(0x91)],'number':_0x1e032a[_0x2d108e(0x12d)],'breakeven':_0x1e032a[_0x2d108e(0xf7)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2d108e(0x1d1)](_0x2d108e(0x169))[_0x2d108e(0xfa)](_0x25218d)[_0x2d108e(0x1db)]();});}async function updateCoinResults(_0x225ec1,_0x4b7064=![]){const _0x6bbbf=_0xad2cee;let _0x2d7dc4,_0x4d10b5,_0x2a9a04,_0x38b851,_0x5b82d4,_0x518a79,_0x207724=dbCoinResults[_0x6bbbf(0x1d1)]('coins')[_0x6bbbf(0x167)]({'coin':_0x225ec1['coin']})[_0x6bbbf(0xec)]();!_0x207724&&await initCoinResults();_0x225ec1['reverse']&&(_0x518a79={'filled':_0x225ec1[_0x6bbbf(0xaf)]*_0x225ec1[_0x6bbbf(0xf7)],'amount':_0x225ec1[_0x6bbbf(0xaf)]*_0x225ec1[_0x6bbbf(0xf7)],'side':_0x225ec1['side']==_0x6bbbf(0xbb)?'buy':'sell','price':0x1/_0x225ec1[_0x6bbbf(0xf7)]},_0x225ec1={..._0x225ec1,..._0x518a79});_0x4b7064?_0x4d10b5=_0x225ec1[_0x6bbbf(0x13e)]==_0x6bbbf(0x1a5)?_0x207724[_0x6bbbf(0x12d)]+_0x225ec1[_0x6bbbf(0xaf)]:_0x207724['number']-_0x225ec1[_0x6bbbf(0xaf)]:_0x4d10b5=await getCoinNumber(_0x225ec1[_0x6bbbf(0x91)]);if(_0x225ec1[_0x6bbbf(0x1df)]&&_0x225ec1[_0x6bbbf(0x1df)][_0x6bbbf(0xb2)]==config[_0x6bbbf(0x109)])_0x2d7dc4=_0x225ec1['fee'][_0x6bbbf(0x1e6)];else{if(_0x225ec1['fee']&&_0x225ec1[_0x6bbbf(0x1df)]['currency']==_0x6bbbf(0x128)&&!_0x4b7064)_0x2d7dc4=_0x225ec1[_0x6bbbf(0x1df)][_0x6bbbf(0x1e6)]*global[_0x6bbbf(0xf0)]['BNB'+config['basecoin']];else _0x2d7dc4=defaultFee*_0x225ec1[_0x6bbbf(0xaf)]*_0x225ec1[_0x6bbbf(0xf7)];}_0x225ec1[_0x6bbbf(0x13e)]==_0x6bbbf(0x1a5)?(_0x2a9a04=_0x4d10b5!=0x0?(_0x207724[_0x6bbbf(0x1be)]*_0x207724['number']+_0x225ec1[_0x6bbbf(0xf7)]*(_0x4d10b5-_0x207724[_0x6bbbf(0x12d)])+_0x2d7dc4)/_0x4d10b5:0x0,_0x38b851=_0x207724[_0x6bbbf(0x8c)]):(_0x2a9a04=_0x4d10b5!=0x0?(_0x207724[_0x6bbbf(0x1be)]*_0x207724[_0x6bbbf(0x12d)]-_0x225ec1[_0x6bbbf(0xf7)]*(_0x207724[_0x6bbbf(0x12d)]-_0x4d10b5)+_0x2d7dc4)/_0x4d10b5:0x0,_0x38b851=_0x207724[_0x6bbbf(0x8c)]+(_0x225ec1[_0x6bbbf(0xf7)]-_0x207724['breakeven'])*_0x225ec1[_0x6bbbf(0xaf)]);_0x5b82d4=(_0x225ec1[_0x6bbbf(0xf7)]-_0x2a9a04-_0x2d7dc4/_0x225ec1[_0x6bbbf(0xaf)])*_0x4d10b5;let _0x1c7975={'coin':_0x225ec1[_0x6bbbf(0x91)],'number':_0x4d10b5,'breakeven':formatResult(_0x2a9a04,0x8),'realized':formatResult(_0x38b851,0x8),'unrealized':formatResult(_0x5b82d4,0x8),'fees':formatResult(_0x207724[_0x6bbbf(0x174)]+_0x2d7dc4,0x8),'sells':_0x225ec1[_0x6bbbf(0x13e)]==_0x6bbbf(0xbb)?_0x207724[_0x6bbbf(0x1fa)]+0x1:_0x207724[_0x6bbbf(0x1fa)],'buys':_0x225ec1[_0x6bbbf(0x13e)]=='buy'?_0x207724['buys']+0x1:_0x207724[_0x6bbbf(0x1dc)]};dbCoinResults[_0x6bbbf(0x1d1)]('coins')[_0x6bbbf(0x167)]({'coin':_0x225ec1['coin']})[_0x6bbbf(0xea)](_0x1c7975)[_0x6bbbf(0x1db)]();if(!_0x4b7064){if(_0x225ec1['fee']&&_0x225ec1[_0x6bbbf(0x1df)][_0x6bbbf(0xb2)]==_0x6bbbf(0x128)){const _0x514266=currentCoins[_0x6bbbf(0x167)](_0x4df21b=>_0x4df21b[_0x6bbbf(0x91)]==_0x6bbbf(0x128));if(_0x514266){let _0x475cfe=dbCoinResults[_0x6bbbf(0x1d1)](_0x6bbbf(0x169))[_0x6bbbf(0x167)]({'coin':_0x6bbbf(0x128)})['value']();_0x1c7975={..._0x475cfe,'number':_0x514266[_0x6bbbf(0x12d)]},dbCoinResults['get'](_0x6bbbf(0x169))[_0x6bbbf(0x167)]({'coin':_0x6bbbf(0x128)})['assign'](_0x1c7975)['write']();}}}}async function placeOrder(_0x3be1ec){const _0x236a5d=_0xad2cee,_0x3a31e7=config[_0x236a5d(0x15c)]==_0x236a5d(0x156)?_0x236a5d(0x156):_0x236a5d(0x107);if(lockOrders==ORDERS[_0x236a5d(0x133)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x236a5d(0x163)],allOrdersPlaced=![],validateOrdersState='initial';let _0x203b5e=![];lastOrders=[];for(const _0x4c0c51 of _0x3be1ec){let _0x26a1cb,_0x2f54a8,_0x208633,_0x4da009,_0x5de218,_0x143a40=_0x4c0c51[_0x236a5d(0x159)];try{const _0x3056dc=await exchange[_0x236a5d(0xc4)](_0x143a40);_0x26a1cb=_0x4c0c51[_0x236a5d(0x104)]?0x1/_0x4c0c51['last']:_0x4c0c51[_0x236a5d(0x92)],_0x2f54a8=_0x3056dc[_0x236a5d(0x12b)],_0x208633=_0x3056dc[_0x236a5d(0x12c)];_0x4c0c51[_0x236a5d(0x104)]?(_0x4da009=_0x4c0c51['side']==_0x236a5d(0x1a5)?_0x236a5d(0xbb):'buy',_0x5de218=Math[_0x236a5d(0x1fd)](_0x4c0c51[_0x236a5d(0x1c3)])/_0x26a1cb):(_0x4da009=_0x4c0c51[_0x236a5d(0x13e)],_0x5de218=Math[_0x236a5d(0x1fd)](_0x4c0c51['trade']));_0x3a31e7==_0x236a5d(0x107)&&(config[_0x236a5d(0x15c)]=='limit-high'&&(_0x26a1cb=_0x4da009==_0x236a5d(0x1a5)?_0x2f54a8:_0x208633),config['ordertype']=='limit-low'&&(_0x26a1cb=_0x4da009==_0x236a5d(0x1a5)?_0x208633:_0x2f54a8));_0x5de218=formatResult(_0x5de218,0x8),_0x26a1cb=formatResult(_0x26a1cb,0x8);const _0x54ab5c=_0x4da009==_0x236a5d(0xbb)?config[_0x236a5d(0x162)]?String['fromCodePoint']('0x'+config[_0x236a5d(0x162)])+'\x20':'':config['emojibuy']?String[_0x236a5d(0x1b6)]('0x'+config[_0x236a5d(0xa5)])+'\x20':'',_0x457f37=_0x3a31e7==_0x236a5d(0x156)?'Market':config['ordertype']==_0x236a5d(0x142)?_0x236a5d(0x1d6):'Limit\x20(low-margin)',_0x55e992=new Date()[_0x236a5d(0x19e)]()[_0x236a5d(0x194)]()[_0x236a5d(0x1c5)](-0x6)+'-'+Math['random']()[_0x236a5d(0x194)]()[_0x236a5d(0x1c5)](-0x6);lastOrders[_0x236a5d(0xfa)]({'customId':_0x55e992,'symbol':_0x143a40,'coin':_0x4c0c51['coin'],'side':_0x4da009,'reverse':_0x4c0c51['reverse'],'filled':0x0});if(_0x3a31e7==_0x236a5d(0x156))logHistory(_0x236a5d(0x1eb),''+_0x54ab5c+_0x457f37+_0x236a5d(0xdb)+_0x143a40+'\x20'+_0x4da009+'\x20#'+formatResult(_0x5de218,0x8)+'\x20@'+formatResult(_0x26a1cb,0x8));else logHistory(_0x236a5d(0x1eb),''+_0x54ab5c+_0x457f37+'\x20order:\x20'+_0x143a40+'\x20'+_0x4da009+'\x20#'+formatResult(_0x5de218,0x8)+'\x20@'+formatResult(_0x26a1cb,0x8));const _0x19bc6f=await exchange['createOrder'](_0x143a40,_0x3a31e7,_0x4da009,_0x5de218,_0x26a1cb,{'clientOrderId':_0x55e992}),_0x18feba=lastOrders[_0x236a5d(0xc1)]-0x1;_0x18feba>=0x0&&lastOrders[_0x18feba][_0x236a5d(0x124)]==_0x55e992&&(lastOrders[_0x18feba]={...lastOrders[_0x18feba],'orderId':_0x19bc6f['id'],'amount':_0x19bc6f['amount'],'price':_0x19bc6f[_0x236a5d(0xf7)],'fee':_0x19bc6f[_0x236a5d(0x1df)]});if(config['cooldown']!=0x0){let _0x48638d=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x48638d=cooldownTracker['shift']();const _0x93daba=getTimeStamp();cooldownTracker[_0x236a5d(0xfa)](_0x93daba);if(_0x48638d){const _0x2b349b=fns['differenceInSeconds'](new Date(_0x93daba),new Date(_0x48638d));if(_0x2b349b<cooldownInterval){logHistory('error',_0x236a5d(0x1ac)+config['cooldown']+_0x236a5d(0x121)+cooldownInterval/0x3c+_0x236a5d(0x147)+cooldownPeriod/(0xe10*0x3e8)+_0x236a5d(0x1c2)),coolingDown=!![];break;}}}}catch(_0x317c6f){if(_0x317c6f['toString']()['includes'](_0x236a5d(0xe0)))lastOrders=lastOrders[_0x236a5d(0x10a)](_0x5c4bce=>_0x5c4bce[_0x236a5d(0x159)]!=_0x143a40),logHistory(_0x236a5d(0xc7),_0x236a5d(0xae)+_0x143a40),_0x203b5e=!![];else{if(_0x317c6f['toString']()['includes'](_0x236a5d(0x144)))lastOrders=lastOrders[_0x236a5d(0x10a)](_0x305c65=>_0x305c65[_0x236a5d(0x159)]!=_0x143a40),logHistory(_0x236a5d(0xc7),'Order\x20amount\x20is\x20invalid:\x20'+_0x143a40),_0x203b5e=!![];else _0x317c6f[_0x236a5d(0x194)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x236a5d(0x10a)](_0x33caa8=>_0x33caa8[_0x236a5d(0x159)]!=_0x143a40),logHistory(_0x236a5d(0xc7),_0x236a5d(0xae)+_0x143a40),_0x203b5e=!![]):(lastOrders=lastOrders[_0x236a5d(0x10a)](_0x196345=>_0x196345[_0x236a5d(0x159)]!=_0x143a40),await handleError(_0x317c6f,_0x236a5d(0x8a),_0x143a40));}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x236a5d(0xc1)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x14ef2c=config[_0x236a5d(0x15c)]==_0x236a5d(0x156)?validateOrderTimeout*0x3c*0x3e8:config[_0x236a5d(0xbf)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x18b759=_0x236a5d;validateOrders(_0x18b759(0xaa));},_0x14ef2c);}else unlockOrders();_0x203b5e&&config[_0x236a5d(0x17c)]&&await pauseBot(_0x236a5d(0x193)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x236a5d(0xdd)));}else{if(coolingDown)!config[_0x236a5d(0x17c)]&&logHistory(_0x236a5d(0xc7),_0x236a5d(0xff));else lockOrders!=ORDERS[_0x236a5d(0x133)]&&(!config[_0x236a5d(0x17c)]&&(config[_0x236a5d(0x15c)]==_0x236a5d(0x156)?logHistory(_0x236a5d(0xc7),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x236a5d(0xc7),_0x236a5d(0x1ce))));}}function persistOpenOrders(_0x5ae5b2){const _0x3fc024=_0xad2cee,_0x3c94f6={...config,'openOrders':_0x5ae5b2};let _0x55ed7b=dbConfig[_0x3fc024(0x1d1)](_0x3fc024(0x1e1))[_0x3fc024(0x167)]({'botID':botID})[_0x3fc024(0xec)]();_0x55ed7b&&dbConfig[_0x3fc024(0x1d1)](_0x3fc024(0x1e1))[_0x3fc024(0x167)]({'botID':botID})['assign'](_0x3c94f6)[_0x3fc024(0x1db)]();}function restoreOrders(){const _0xf7b809=_0xad2cee;let _0x260042;config[_0xf7b809(0xfd)]&&allOpenOrders['forEach'](_0x2b936d=>{const _0x222097=_0xf7b809,_0x5ce364=config[_0x222097(0xfd)][_0x222097(0x167)](_0x350956=>_0x350956[_0x222097(0x1bc)]==_0x2b936d['id']);_0x5ce364&&(lastOrders[_0x222097(0xfa)](_0x5ce364),_0x260042=_0x2b936d['timestamp']);});if(lastOrders[_0xf7b809(0xc1)]>0x0){lockOrders=ORDERS[_0xf7b809(0x163)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5be4ba=new Date()[_0xf7b809(0x19e)](),_0x146ccd=config[_0xf7b809(0x15c)]==_0xf7b809(0x156)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x260042+_0x146ccd>_0x5be4ba){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x260042+_0x146ccd-_0x5be4ba);}else validateOrders(_0xf7b809(0xaa));}}async function sendMetricsTelegram(){const _0x2df9e0=_0xad2cee;if(!coinsLoaded){process[_0x2df9e0(0x8f)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4f8495=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x19652a='';if(config[_0x2df9e0(0xcc)])_0x19652a=_0x2df9e0(0x127)+config['botname']+_0x2df9e0(0x19b);else _0x19652a=_0x2df9e0(0x111)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1b888d=getKPIs(_0x2df9e0(0x109)),_0x584f38=getKPIs('fiat',config[_0x2df9e0(0x1a7)]),_0x30a511=getKPIs(_0x2df9e0(0x83)),_0x368984=getKPIs(_0x2df9e0(0x19c),config['fiat']);_0x19652a+=_0x2df9e0(0x149),_0x19652a+=_0x1b888d[_0x2df9e0(0x1f6)]+'\x20:\x20'+_0x1b888d[_0x2df9e0(0xec)]+'\x0a',_0x19652a+=_0x1b888d[_0x2df9e0(0x1ff)]+':\x20'+_0x1b888d['change']+'%\x0a',_0x19652a+=_0x584f38[_0x2df9e0(0x1f6)]+_0x2df9e0(0x18c)+_0x584f38[_0x2df9e0(0xec)]+'\x0a',_0x19652a+=_0x584f38['rightTxt']+':\x20'+_0x584f38[_0x2df9e0(0xa3)]+'%\x0a',_0x19652a+=_0x30a511[_0x2df9e0(0x1f6)]+':\x20'+_0x30a511[_0x2df9e0(0xec)]+'\x20('+config['basecoin']+')\x0a',_0x19652a+=_0x30a511[_0x2df9e0(0x1ff)]+':\x20'+_0x30a511[_0x2df9e0(0xa3)]+'%\x20('+config[_0x2df9e0(0x109)]+')\x0a',_0x19652a+=_0x368984[_0x2df9e0(0x1f6)]+':\x20'+_0x368984[_0x2df9e0(0xec)]+'\x20('+config[_0x2df9e0(0x1a7)]+')\x0a',_0x19652a+=_0x368984[_0x2df9e0(0x1ff)]+':\x20'+_0x368984[_0x2df9e0(0xa3)]+_0x2df9e0(0xd9)+config[_0x2df9e0(0x1a7)]+')\x0a',_0x19652a+=_0x2df9e0(0xdc),process[_0x2df9e0(0x8f)]({'telegrammsg':_0x19652a},_0x38caab=>{});}async function sendPortfolioTelegram(){const _0x8e6de6=_0xad2cee;if(!coinsLoaded){process[_0x8e6de6(0x8f)]({'telegrammsg':_0x8e6de6(0x138)},_0x55cc69=>{});return;}let _0x5a937d='';if(config[_0x8e6de6(0xcc)])_0x5a937d='<b>'+config[_0x8e6de6(0x9f)]+_0x8e6de6(0x100);else _0x5a937d=_0x8e6de6(0x111)+botID+_0x8e6de6(0x100);_0x5a937d+=_0x8e6de6(0x149),_0x5a937d+=_0x8e6de6(0x135),_0x5a937d+=_0x8e6de6(0x1d2),_0x5a937d+=_0x8e6de6(0x135),currentCoins[_0x8e6de6(0x1b0)](_0x163b56=>{const _0x53061e=_0x8e6de6;_0x5a937d+=_0x163b56['coin'][_0x53061e(0x1d8)](0x7)+'|\x20'+formatPad(_0x163b56['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x163b56[_0x53061e(0x171)],0x2,0x6)+'|\x20'+formatPad(_0x163b56[_0x53061e(0x17e)]*0x64,0x2,0x6)+'\x0a';}),_0x5a937d+=_0x8e6de6(0xdc),process[_0x8e6de6(0x8f)]({'telegrammsg':_0x5a937d},_0x618b6d=>{});}function formatPad(_0x4e774d,_0x41399a,_0x46c7a1){const _0x243873=_0xad2cee,_0x22287a=formatResultString(_0x4e774d,_0x41399a);return _0x22287a?_0x22287a[_0x243873(0xd0)](_0x46c7a1):''['padStart'](_0x46c7a1);}function logHistory(_0x35e9bc,_0x219a8b,_0x4a7f67=''){const _0x3c3a63=_0xad2cee;let _0x257734={'time':getTimeStamp(),'type':_0x35e9bc,'event':_0x219a8b};dbLogs['get'](_0x3c3a63(0x122))[_0x3c3a63(0xfa)](_0x257734)[_0x3c3a63(0x1db)]();if(_0x4a7f67=='')_0x4a7f67=_0x219a8b;proxyEmit(_0x3c3a63(0x1cf),{'log':_0x257734,'summary':_0x4a7f67}),process[_0x3c3a63(0x8f)]({'telegram':{..._0x257734,'botname':config['botname'],'showname':config[_0x3c3a63(0xcc)]}},_0x5f498c=>{}),logger[_0x3c3a63(0x1ae)](''+_0x257734['event']);}function emitHistory(_0x415eab={}){const _0x4512d2=_0xad2cee;Object[_0x4512d2(0x1d9)](_0x415eab)['length']==0x0&&(_0x415eab={'type':[_0x4512d2(0x1eb),_0x4512d2(0x1cf)],'event':'','page':0x1});if(_0x415eab[_0x4512d2(0x18b)]['includes'](_0x4512d2(0x1cf)))_0x415eab[_0x4512d2(0x18b)]['splice'](_0x415eab[_0x4512d2(0x18b)][_0x4512d2(0xa4)]('event'),0x1,'error',_0x4512d2(0x1f9),_0x4512d2(0xba));if(dbLogs[_0x4512d2(0x190)](_0x4512d2(0x122))['value']()){let _0x562ae4=dbLogs[_0x4512d2(0x1d1)](_0x4512d2(0x122))[_0x4512d2(0x10a)](_0x4420ea=>{const _0x2d150f=_0x4512d2;if(_0x415eab['type'][_0x2d150f(0xc1)]==0x0)return![];else return _0x415eab[_0x2d150f(0x18b)]['includes'](_0x4420ea[_0x2d150f(0x18b)]);})[_0x4512d2(0x10a)](_0x15679a=>{const _0x5b00e0=_0x4512d2;if(_0x415eab[_0x5b00e0(0x1cf)]=='')return!![];else return _0x15679a[_0x5b00e0(0x1cf)][_0x5b00e0(0x1a3)]()['includes'](_0x415eab['event'][_0x5b00e0(0x1a3)]());})['sortBy'](_0x4512d2(0x180)),_0x178019=_0x562ae4[_0x4512d2(0xec)]()[_0x4512d2(0xc1)];_0x562ae4=_0x562ae4['reverse']()[_0x4512d2(0x1c5)]((_0x415eab[_0x4512d2(0x14d)]-0x1)*logPageSize,_0x415eab[_0x4512d2(0x14d)]*logPageSize-0x1)[_0x4512d2(0x104)]()[_0x4512d2(0xec)](),proxyEmit('event-history',{'logs':_0x562ae4,'total':_0x178019});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x590d97){const _0x27a1ac=_0xad2cee;if(dbLogs[_0x27a1ac(0x190)]('logs')[_0x27a1ac(0xec)]()){const _0x5832e0=dbLogs[_0x27a1ac(0x1d1)]('logs')[_0x27a1ac(0x15e)](_0x27a1ac(0x180))['filter'](_0x4e4e5f=>{const _0x3480a0=_0x27a1ac;return _0x4e4e5f[_0x3480a0(0x18b)]==_0x3480a0(0x1eb);})['value']();dbLogs[_0x27a1ac(0x1d1)](_0x27a1ac(0x122))['remove']()[_0x27a1ac(0x1db)](),dbLogs[_0x27a1ac(0x1d1)](_0x27a1ac(0x122))[_0x27a1ac(0xea)](_0x5832e0)[_0x27a1ac(0x1db)](),emitHistory(_0x590d97);}}async function pauseBot(_0x4ef219=''){const _0x1eae97=_0xad2cee,_0x3965ea=new Date()[_0x1eae97(0x19e)]();if(!lastErrorShown||_0x3965ea-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3965ea;!lastBotPause?(lastBotPause=_0x3965ea,consecutivePauses=0x1):(_0x3965ea-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1eae97(0x8f)]({'stop':'restart'},_0x48ab78=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x4ef219)_0x4ef219+=_0x1eae97(0x18e);logHistory(_0x1eae97(0xc7),_0x4ef219+'Pausing\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5d992d=_0xad2cee;process[_0x5d992d(0x8f)]({'stop':_0x5d992d(0x1c8)},_0x489656=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x431472,_0x1d8520){const _0x22e712=_0xad2cee;if(_0x431472[_0x22e712(0x194)]()[_0x22e712(0x10f)]('API-key\x20format\x20invalid'))return logHistory(_0x22e712(0xc7),config['exchange']+_0x22e712(0x118)),![];else{if(_0x431472[_0x22e712(0x194)]()[_0x22e712(0x10f)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x22e712(0xc7),config[_0x22e712(0xa1)]+_0x22e712(0x1a1)),![];else{if(_0x431472[_0x22e712(0x194)]()[_0x22e712(0x10f)](_0x22e712(0x1a4)))return logHistory(_0x22e712(0xc7),config[_0x22e712(0xa1)]+_0x22e712(0x1a8)),logHistory(_0x22e712(0xc7),_0x22e712(0x99)),![];else await handleError(_0x431472,_0x1d8520);}}}async function handleError(_0x1aae3c,_0x88289f,_0x5b405f=''){const _0x1b3437=_0xad2cee,_0x3f873d=config['exchange']||'Exchange';if(_0x1aae3c['toString']()['includes'](_0x1b3437(0xc5)))await pauseBot(config[_0x1b3437(0xa1)]+_0x1b3437(0x11c));else{if(_0x1aae3c[_0x1b3437(0x194)]()[_0x1b3437(0x10f)](_0x1b3437(0x105)))await pauseBot(config[_0x1b3437(0xa1)]+_0x1b3437(0xe6));else{if(_0x1aae3c[_0x1b3437(0x194)]()[_0x1b3437(0x10f)](_0x1b3437(0xe3)))await pauseBot(config[_0x1b3437(0xa1)]+_0x1b3437(0x186));else{if(_0x1aae3c[_0x1b3437(0x194)]()[_0x1b3437(0x10f)](_0x1b3437(0x1e9)))await pauseBot(config[_0x1b3437(0xa1)]+_0x1b3437(0x198));else{if(_0x1aae3c['toString']()[_0x1b3437(0x10f)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x1b3437(0xc7),_0x88289f+_0x1b3437(0x182)),logHistory(_0x1b3437(0xc7),_0x1b3437(0xd1)),await killBot();else{if(_0x1aae3c['toString']()[_0x1b3437(0x10f)](_0x1b3437(0x103)))logHistory(_0x1b3437(0xc7),_0x88289f+_0x1b3437(0x1ed)),logHistory(_0x1b3437(0xc7),_0x1b3437(0xd1)),await killBot();else{if(_0x1aae3c[_0x1b3437(0x194)]()['includes'](_0x1b3437(0x18f)))logHistory(_0x1b3437(0xc7),_0x88289f+_0x1b3437(0x18e)+config[_0x1b3437(0xa1)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1b3437(0xc7),_0x1b3437(0xd1)),await killBot();else{if(_0x1aae3c[_0x1b3437(0x194)]()[_0x1b3437(0x10f)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x1b3437(0xc7),_0x88289f+_0x1b3437(0x18e)+config[_0x1b3437(0xa1)]+_0x1b3437(0x1da)),logHistory(_0x1b3437(0xc7),_0x1b3437(0xd1)),await killBot();else{if(_0x1aae3c[_0x1b3437(0x194)]()['includes'](_0x1b3437(0x1a4)))logHistory(_0x1b3437(0xc7),_0x88289f+'\x20|\x20'+config[_0x1b3437(0xa1)]+_0x1b3437(0x132)),logHistory(_0x1b3437(0xc7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x1aae3c['toString']()[_0x1b3437(0x10f)]('InsufficientFunds')?logHistory(_0x1b3437(0xc7),_0x88289f+_0x1b3437(0x1ec)+_0x5b405f):(logger[_0x1b3437(0x1ae)](_0x88289f+_0x1b3437(0xd8),_0x1aae3c),await pauseBot(_0x1b3437(0xfb)));}}}}}}}}}function formatResult(_0x2687c8,_0x2ba220){return parseFloat(_0x2687c8['toFixed'](_0x2ba220));}function formatResultTruncate(_0x14671a,_0x1485f8){const _0x212645=_0xad2cee;let _0x26d7b9=formatResultString(_0x14671a,0xa),_0x24bd15=_0x26d7b9[_0x212645(0xa4)]('.');return _0x24bd15!=-0x1&&(_0x26d7b9=_0x26d7b9[_0x212645(0x1c5)](0x0,_0x24bd15+_0x1485f8+0x1)),Number(_0x26d7b9);}function formatResultString(_0x437270,_0x4a5a54){const _0x506679=_0xad2cee;let _0x39aee7;if(!(''+_0x437270)['includes']('e'))_0x39aee7=+(Math[_0x506679(0x188)](_0x437270+'e+'+_0x4a5a54)+'e-'+_0x4a5a54);else{let _0x451a7b=(''+_0x437270)[_0x506679(0xa6)]('e'),_0x3cd543='';+_0x451a7b[0x1]+_0x4a5a54>0x0&&(_0x3cd543='+'),_0x39aee7=+(Math[_0x506679(0x188)](+_0x451a7b[0x0]+'e'+_0x3cd543+(+_0x451a7b[0x1]+_0x4a5a54))+'e-'+_0x4a5a54);}return Number(_0x39aee7)[_0x506679(0x1b2)](_0x4a5a54);}function getServerTime(){const _0x17a553=_0xad2cee,_0xe1cdf1=new Date();return _0xe1cdf1['getFullYear']()+'/'+(_0xe1cdf1[_0x17a553(0x1f2)]()+0x1)[_0x17a553(0x194)]()[_0x17a553(0xd0)](0x2,'0')+'/'+_0xe1cdf1['getDate']()[_0x17a553(0x194)]()[_0x17a553(0xd0)](0x2,'0')+'\x20'+_0xe1cdf1['getHours']()[_0x17a553(0x194)]()[_0x17a553(0xd0)](0x2,'0')+':'+_0xe1cdf1[_0x17a553(0xb1)]()[_0x17a553(0x194)]()['padStart'](0x2,'0')+':'+_0xe1cdf1['getSeconds']()[_0x17a553(0x194)]()[_0x17a553(0xd0)](0x2,'0');}function getTimeStamp(){const _0x1bf9c2=_0xad2cee,_0x57187f=shiftedTime();return _0x57187f[_0x1bf9c2(0xc3)]()+'/'+(_0x57187f['getMonth']()+0x1)['toString']()[_0x1bf9c2(0xd0)](0x2,'0')+'/'+_0x57187f[_0x1bf9c2(0x1e4)]()[_0x1bf9c2(0x194)]()[_0x1bf9c2(0xd0)](0x2,'0')+'\x20'+_0x57187f[_0x1bf9c2(0x87)]()['toString']()[_0x1bf9c2(0xd0)](0x2,'0')+':'+_0x57187f['getMinutes']()['toString']()[_0x1bf9c2(0xd0)](0x2,'0')+':'+_0x57187f[_0x1bf9c2(0x17b)]()[_0x1bf9c2(0x194)]()[_0x1bf9c2(0xd0)](0x2,'0');}function getDate(){const _0xb9cd7d=_0xad2cee,_0x24d74c=shiftedTime();return _0x24d74c['getFullYear']()+'/'+(_0x24d74c[_0xb9cd7d(0x1f2)]()+0x1)[_0xb9cd7d(0x194)]()[_0xb9cd7d(0xd0)](0x2,'0')+'/'+_0x24d74c[_0xb9cd7d(0x1e4)]()[_0xb9cd7d(0x194)]()['padStart'](0x2,'0');}function getHour(){const _0x3c1ee4=_0xad2cee,_0x56815e=shiftedTime();return _0x56815e['getHours']()[_0x3c1ee4(0x194)]()[_0x3c1ee4(0xd0)](0x2,'0');}function sleep(_0x17b601){return new Promise(_0x292b99=>setTimeout(_0x292b99,_0x17b601));}function shiftedTime(){const _0x4bbff5=_0xad2cee,_0x1e293e=new Date();let _0x4ff58a=_0x1e293e;if(config&&config['timeshift']!==0x0)_0x4ff58a=fns[_0x4bbff5(0x10e)](_0x1e293e,{'hours':config[_0x4bbff5(0x152)]});return _0x4ff58a;}function timer(_0x35db7e){const _0x4eb574=_0xad2cee,_0x269b6c=new Date();!lasttime?console[_0x4eb574(0x134)](getTimeStamp()+_0x4eb574(0x82),_0x35db7e,_0x269b6c):console['log'](getTimeStamp()+_0x4eb574(0x82),_0x35db7e,(_0x269b6c-lasttime)/0x3e8),lasttime=_0x269b6c;}