const _0x598b6f=_0x5977;(function(_0x3487c7,_0x3cf9d1){const _0x147ac7=_0x5977,_0x272b82=_0x3487c7();while(!![]){try{const _0x42091b=-parseInt(_0x147ac7(0x131))/0x1+parseInt(_0x147ac7(0x19a))/0x2*(parseInt(_0x147ac7(0xd3))/0x3)+-parseInt(_0x147ac7(0x144))/0x4+parseInt(_0x147ac7(0xc8))/0x5*(-parseInt(_0x147ac7(0x13e))/0x6)+parseInt(_0x147ac7(0x1df))/0x7*(-parseInt(_0x147ac7(0x1ca))/0x8)+-parseInt(_0x147ac7(0x194))/0x9*(parseInt(_0x147ac7(0x106))/0xa)+-parseInt(_0x147ac7(0xd7))/0xb*(-parseInt(_0x147ac7(0x122))/0xc);if(_0x42091b===_0x3cf9d1)break;else _0x272b82['push'](_0x272b82['shift']());}catch(_0x43616f){_0x272b82['push'](_0x272b82['shift']());}}}(_0x55c0,0xd9218));const _0x1d3f34=function(){let _0x1e987d=!![];return function(_0x4665fe,_0x2ecdfb){const _0x7d61f8=_0x1e987d?function(){if(_0x2ecdfb){const _0x27281a=_0x2ecdfb['apply'](_0x4665fe,arguments);return _0x2ecdfb=null,_0x27281a;}}:function(){};return _0x1e987d=![],_0x7d61f8;};}(),_0x3d0b98=_0x1d3f34(this,function(){const _0x3f0676=_0x5977;return _0x3d0b98[_0x3f0676(0xce)]()[_0x3f0676(0x1ed)](_0x3f0676(0x140))['toString']()[_0x3f0676(0x1eb)](_0x3d0b98)['search'](_0x3f0676(0x140));});_0x3d0b98();'use strict';const ccxt=require('ccxt'),low=require(_0x598b6f(0x1f0)),FileSync=require(_0x598b6f(0x1c7)),fs=require('fs'),fns=require(_0x598b6f(0x12a)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require(_0x598b6f(0x108))['Crypt'];let exchange,wsClient;global[_0x598b6f(0x16e)]={},global['change']={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x598b6f(0x1ae),_0x598b6f(0x132),_0x598b6f(0x151),_0x598b6f(0x176),_0x598b6f(0x148),'YOYOW/'];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x598b6f(0x1a1)],botID=process[_0x598b6f(0xec)][0x2]||_0x598b6f(0x1de),pattern=/^[0-9]{3}$/;!pattern[_0x598b6f(0x197)](botID)&&(console[_0x598b6f(0x10a)](_0x598b6f(0xfd)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x598b6f(0x118)](0x1));const userID=process[_0x598b6f(0xec)][0x3]||'',configpath=userID?_0x598b6f(0x1f9)+userID+'/':_0x598b6f(0x1f9);!fs[_0x598b6f(0x11a)](configpath)&&fs[_0x598b6f(0x12b)](configpath);const configfile=configpath+_0x598b6f(0x18e)+botID+_0x598b6f(0x137),logfile=configpath+'bot-'+botID+_0x598b6f(0x11b),performancefile=configpath+_0x598b6f(0x18e)+botID+_0x598b6f(0x19d),coinresultsfile=configpath+_0x598b6f(0x18e)+botID+_0x598b6f(0x16b),settingsfile=configpath+_0x598b6f(0x10f),securefile=configpath+_0x598b6f(0x182),configbackuppath=configpath+_0x598b6f(0xea),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x598b6f(0x120)]({'logs':[]})[_0x598b6f(0x15f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x598b6f(0x120)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x598b6f(0x120)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x598b6f(0x120)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x5977(_0x586908,_0x4c2cf2){const _0x5ebaad=_0x55c0();return _0x5977=function(_0x3d0b98,_0x1d3f34){_0x3d0b98=_0x3d0b98-0xc7;let _0x55c0e5=_0x5ebaad[_0x3d0b98];return _0x55c0e5;},_0x5977(_0x586908,_0x4c2cf2);}let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x11cf2f)=>{},'debug':(..._0x19d668)=>{},'notice':(..._0x18dfbf)=>{},'info':(..._0x5f2620)=>{},'warning':(..._0x381442)=>{},'error':async function(..._0x1cd823){const _0x540be2=_0x598b6f,_0x274c66=new Date()[_0x540be2(0x1c8)]();if(!lastErrorShown||_0x274c66-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x540be2(0x1c8)]();let _0x2337c6='';if(_0x1cd823[0x0])_0x2337c6+=_0x1cd823[0x0];if(_0x1cd823[0x1]&&_0x1cd823[0x1][_0x540be2(0x162)]&&_0x1cd823[0x1]['error'][_0x540be2(0x17f)])_0x2337c6+='\x20-\x20'+_0x1cd823[0x1][_0x540be2(0x162)][_0x540be2(0x17f)];logging(_0x540be2(0x111)+consecutivePauses+_0x540be2(0xc7),''+_0x2337c6),await pauseBot('Binance\x20not\x20available\x20(1)');}}},crypt=new Crypt({'md':_0x598b6f(0x1e7),'rsaStandard':_0x598b6f(0x17e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x598b6f(0x177)]!=config[_0x598b6f(0x177)]&&updateTimeshift(settings[_0x598b6f(0x177)]);process[_0x598b6f(0x146)]({'started':_0x598b6f(0x15a)},_0x143228=>{}),initializeProcessListeners();function proxyEmit(_0x1b0b7a,_0x141d44=null){process['send']({'function':_0x1b0b7a,'args':_0x141d44},_0x336a71=>{});}function initializeProcessListeners(){const _0x590e7c=_0x598b6f;process['on'](_0x590e7c(0x17f),_0x3af311=>{const _0x14f7f4=_0x590e7c;switch(Object['keys'](_0x3af311)[0x0]){case _0x14f7f4(0x177):_0x3af311[_0x14f7f4(0x177)]!=undefined&&(settings['timeshift']=_0x3af311['timeshift'],updateTimeshift(settings[_0x14f7f4(0x177)]));break;case _0x14f7f4(0x1a7):switch(_0x3af311[_0x14f7f4(0x1a7)]){case _0x14f7f4(0x18a):initclient();break;case _0x14f7f4(0x107):toggleBotMode();break;case _0x14f7f4(0x155):emitHistory(_0x3af311['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x3af311[_0x14f7f4(0x133)]);break;case _0x14f7f4(0x1ce):getPortfolio(_0x3af311['args']);break;case'storeConfiguration':storeConfiguration(_0x3af311['args']);break;case'storeHeadless':storeHeadless(_0x3af311[_0x14f7f4(0x133)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x14f7f4(0xd6):placeOrder(_0x3af311[_0x14f7f4(0x133)]);break;case'cancelLoading':cancelLoading();break;case _0x14f7f4(0xde):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x18627d=_0x598b6f;if(pidBalances)clearTimeout(pidBalances);if(config[_0x18627d(0x1c6)]!=''){await initExchange(config[_0x18627d(0x1c6)],config[_0x18627d(0x1cc)]),await initWsEvents();let _0x4f352e=await loadSymbols();if(_0x4f352e){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x18627d(0x1ac)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0xab34ca,_0x300377){const _0x32f23a=_0x598b6f,_0x2b84fb=ccxt[config[_0x32f23a(0xef)]];let _0x4e8554;switch(config[_0x32f23a(0xef)]){case _0x32f23a(0x180):_0x4e8554=_0x32f23a(0x105);break;case _0x32f23a(0x1c3):_0x4e8554=_0x32f23a(0x10d);break;default:_0x4e8554=_0x32f23a(0x105);}exchange=new _0x2b84fb({'apiKey':_0xab34ca,'secret':_0x300377,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0xab34ca,'api_secret':_0x300377,'beautify':!![],'wsUrl':_0x4e8554},logger);let _0x207627=config[_0x32f23a(0xef)]==_0x32f23a(0x1c3)?_0x32f23a(0xe8):_0x32f23a(0x1a8),_0x57ccaf=config[_0x32f23a(0xf9)]==_0x32f23a(0x183)?_0x32f23a(0x183):_0x32f23a(0x193);stablecoins={'eur':{'coin':''+_0x57ccaf+_0x207627,'symbol':_0x57ccaf+'/'+_0x207627},'usd':{'coin':_0x57ccaf+'USDT','symbol':_0x57ccaf+_0x32f23a(0x129)}};}async function initWsEvents(){!wstriggersset&&(wstriggersset=!![],wsClient['on']('formattedMessage',_0x486c19=>{const _0x429e24=_0x5977;if(isWsFormattedKline(_0x486c19)){global[_0x429e24(0x16e)][_0x486c19[_0x429e24(0x130)]['symbol']]=_0x486c19['kline'][_0x429e24(0xe6)];return;}else{if(isWsFormatted24hrTicker(_0x486c19)){global[_0x429e24(0x11d)][_0x486c19[_0x429e24(0x169)]]=_0x486c19[_0x429e24(0x1f8)];return;}else{if(!Array[_0x429e24(0x1da)](_0x486c19)&&_0x486c19['wsKey'][_0x429e24(0x1ef)](_0x429e24(0x160))){if(_0x486c19[_0x429e24(0x16c)]['includes']('spot')){updateNumberCoins(_0x486c19);return;}}}}}),wsClient['on']('reconnected',async _0x3e556c=>{currentCoins=await getCoins(!![]),handleOpenOrders();}));}async function loadSymbols(){const _0x2f397f=_0x598b6f;let _0x5ca739;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x2f397f(0x167)][_0x2f397f(0x165)](_0x322665=>{const _0x2befb6=_0x2f397f;let _0x31ad59=![];return exceptions[_0x2befb6(0x19c)](_0x1da348=>{const _0x314ae4=_0x2befb6;if(_0x322665[_0x314ae4(0x1ef)](_0x1da348))_0x31ad59=!![];}),!_0x31ad59;}),_0x5ca739=!![];}catch(_0x23a24d){await handleError(_0x23a24d,_0x2f397f(0x1d8)),_0x5ca739=![];}return _0x5ca739;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x311639=_0x598b6f;proxyEmit(_0x311639(0x115),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3526e3=getNormalizedPerformance();emitPerformance(_0x3526e3),await getStartingBalances(_0x3526e3);}async function toggleBotMode(){const _0x4759b0=_0x598b6f;let _0x47f3d4=dbConfig[_0x4759b0(0x1e8)]('bot')[_0x4759b0(0x10e)]({'botID':botID})[_0x4759b0(0x1c4)]();if(_0x47f3d4){const _0x10004a=!_0x47f3d4[_0x4759b0(0x195)];dbConfig[_0x4759b0(0x1e8)](_0x4759b0(0xdc))[_0x4759b0(0x10e)]({'botID':botID})[_0x4759b0(0x13c)]({'headless':_0x10004a})['write'](),config[_0x4759b0(0x195)]=_0x10004a,proxyEmit(_0x4759b0(0x115),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x40712f=_0x598b6f;process[_0x40712f(0x146)]({'updatebotmanager':!![]},_0x445a79=>{});}function cleanws(){const _0x206416=_0x598b6f;wsinitialized=![];ws1&&(ws1[_0x206416(0x19c)](_0x47056c=>{const _0x4b823e=_0x206416;try{wsClient[_0x4b823e(0xe6)](_0x47056c);}catch(_0x320d11){}}),ws1=[]);if(ws2){try{wsClient['close'](ws2);}catch(_0x5a0d39){}ws2=null;}ws3&&(ws3[_0x206416(0x19c)](_0x90515f=>{const _0x1325b9=_0x206416;try{wsClient[_0x1325b9(0xe6)](_0x90515f);}catch(_0x3904dd){}}),ws3=[]);}async function initws(){const _0x25fedb=_0x598b6f;cleanws();let _0x3f7ebb=[];currentCoins['forEach'](_0x4893e9=>{const _0x144863=_0x5977;if(_0x4893e9[_0x144863(0xcb)]!=config[_0x144863(0xf9)])_0x3f7ebb[_0x144863(0x158)](_0x4893e9[_0x144863(0x169)]);});if(!_0x3f7ebb[_0x25fedb(0x1ef)](stablecoins[_0x25fedb(0x1ba)][_0x25fedb(0x169)]))_0x3f7ebb['push'](stablecoins[_0x25fedb(0x1ba)]['symbol']);if(!_0x3f7ebb['includes'](stablecoins[_0x25fedb(0x113)][_0x25fedb(0x169)]))_0x3f7ebb['push'](stablecoins[_0x25fedb(0x113)][_0x25fedb(0x169)]);if(!_0x3f7ebb[_0x25fedb(0x1ef)](_0x25fedb(0x19b)+config[_0x25fedb(0xf9)]))_0x3f7ebb['push']('BNB/'+config[_0x25fedb(0xf9)]);try{_0x3f7ebb[_0x25fedb(0x19c)]((_0x5073b2,_0x13a11e)=>{const _0x2da870=_0x25fedb;ws1[_0x13a11e]=wsClient['subscribeSpotKline'](noslash(_0x5073b2),'1m'),ws3[_0x13a11e]=wsClient[_0x2da870(0x1e9)](noslash(_0x5073b2),'spot');}),ws2=wsClient[_0x25fedb(0x1b2)]();}catch(_0x29da82){await handleError(_0x29da82,_0x25fedb(0xf1));}let _0x4ceb99,_0xb03ca3=0x0;loading[_0x25fedb(0x110)]=[];let _0x5bf7a7=0x0;_0x3f7ebb[_0x25fedb(0x19c)](_0x4357df=>{const _0x278cdb=_0x25fedb;loading[_0x278cdb(0x110)][_0x278cdb(0x158)](_0x4357df);}),loadingCanceled=![];let _0x1f5802=![];while(_0x4ceb99!=_0x3f7ebb[_0x25fedb(0x1ac)]){_0x4ceb99=0x0,_0x3f7ebb['forEach'](_0x30b47c=>{const _0xca7e4e=_0x25fedb;global[_0xca7e4e(0x16e)][noslash(_0x30b47c)]&&(loading['remainingSymbols']=loading[_0xca7e4e(0x110)]['filter'](_0xe74aa6=>_0xe74aa6!=_0x30b47c),_0x4ceb99++);}),loading[_0x25fedb(0xd0)]=Math[_0x25fedb(0x1f5)](_0x4ceb99/_0x3f7ebb['length']*0x64);loading[_0x25fedb(0xd0)]!=0x64&&(_0x5bf7a7>0x1e*0x5&&(loading[_0x25fedb(0xdd)]=!![],emitLoadingProgress()),_0x5bf7a7>0x3c*0x5&&!_0x1f5802&&(_0x1f5802=!![],logHistory(_0x25fedb(0x162),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x25fedb(0x110)][_0x25fedb(0x141)](',\x20')+_0x25fedb(0x145))));if(loadingCanceled){loading[_0x25fedb(0x189)]=!![],emitLoadingProgress();break;}else _0x4ceb99!=_0xb03ca3&&(_0xb03ca3=_0x4ceb99,emitLoadingProgress()),_0x5bf7a7++,await sleep(0xc8);}_0x1f5802&&logHistory(_0x25fedb(0x138),_0x25fedb(0xed));if(_0x4ceb99==_0x3f7ebb[_0x25fedb(0x1ac)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x3823e7=_0x598b6f;proxyEmit(_0x3823e7(0x1cb),loading);}async function getFiat(){const _0x5f27f8=_0x598b6f;let _0x753186=0x0,_0x2a7679=0x0;try{_0x753186=global[_0x5f27f8(0x16e)][stablecoins[_0x5f27f8(0x1ba)][_0x5f27f8(0xcb)]],_0x2a7679=global[_0x5f27f8(0x16e)][stablecoins['usd'][_0x5f27f8(0xcb)]];}catch(_0x45fe89){await handleError(_0x45fe89,_0x5f27f8(0x1e6));}return{'eur':Number(_0x753186),'usd':Number(_0x2a7679)};}function setStartDatePerformance(){const _0x300de9=_0x598b6f;if(config&&config[_0x300de9(0xe2)][0x0][_0x300de9(0x1a6)][_0x300de9(0x1ac)]!=0x0){const _0x7ff93c=config['liquidity'][0x0][_0x300de9(0x1a6)];dbPerformance[_0x300de9(0x1e8)]('data')['find']({'date':config[_0x300de9(0x187)]})[_0x300de9(0x13c)]({'coins':_0x7ff93c})[_0x300de9(0x15f)]();}}async function recreateCoinResults(){const _0x33a20d=_0x598b6f;let _0x520836,_0x69d9f4=[];try{const _0x266e2b=fns[_0x33a20d(0xdb)](fns[_0x33a20d(0x104)](config[_0x33a20d(0x187)][_0x33a20d(0x1d9)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x1c7bd1 of currentCoins){if(_0x1c7bd1[_0x33a20d(0xcb)]!=config[_0x33a20d(0xf9)]){let _0x15fe90=0x0,_0x1dcb77,_0x56a9c6;_0x520836=await getAllEventOrders(_0x1c7bd1[_0x33a20d(0x169)]);if(_0x520836[_0x33a20d(0x1ac)]>0x0)_0x520836[_0x33a20d(0x19c)](_0x12692b=>{const _0xd16656=_0x33a20d,_0x270129=_0x1c7bd1[_0xd16656(0x169)]['includes'](config[_0xd16656(0xf9)]+'/');_0x69d9f4[_0xd16656(0x158)]({'datetime':_0x12692b['datetime'],'coin':_0x1c7bd1[_0xd16656(0xcb)],'symbol':_0x1c7bd1[_0xd16656(0x169)],'side':_0x12692b[_0xd16656(0x1e0)],'reverse':_0x270129,'amount':formatResult(_0x12692b[_0xd16656(0x136)],0x8),'filled':formatResult(_0x12692b[_0xd16656(0x136)],0x8),'price':formatResult(_0x12692b[_0xd16656(0x102)],0x8)}),_0x15fe90=_0x12692b[_0xd16656(0x1e0)]=='buy'?_0x15fe90+_0x12692b[_0xd16656(0x136)]:_0x15fe90-_0x12692b[_0xd16656(0x136)];if(!_0x56a9c6)_0x56a9c6=_0x12692b['price'];});_0x1dcb77=_0x1c7bd1[_0x33a20d(0xd5)]-_0x15fe90;let _0x5c18cb;config[_0x33a20d(0xe2)]['forEach'](_0x423f79=>{const _0x18b0ac=_0x33a20d;!_0x5c18cb&&(_0x5c18cb=_0x423f79['changes']['find'](_0x2063e9=>_0x2063e9['coin']==_0x1c7bd1['coin']),_0x5c18cb&&(_0x1dcb77=_0x5c18cb[_0x18b0ac(0xd5)],_0x56a9c6=_0x5c18cb[_0x18b0ac(0x102)]));});let _0x3387ed=dbCoinResults['get'](_0x33a20d(0x1b4))[_0x33a20d(0x10e)]({'coin':_0x1c7bd1[_0x33a20d(0xcb)]})[_0x33a20d(0x1c4)]();_0x3387ed={'coin':_0x1c7bd1[_0x33a20d(0xcb)],'number':_0x1dcb77,'breakeven':_0x56a9c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x33a20d(0x1b4))[_0x33a20d(0x10e)]({'coin':_0x1c7bd1[_0x33a20d(0xcb)]})[_0x33a20d(0x13c)](_0x3387ed)[_0x33a20d(0x15f)]();}}_0x69d9f4['sort']((_0x1ce80c,_0x4b6abc)=>_0x1ce80c[_0x33a20d(0x11e)]>_0x4b6abc[_0x33a20d(0x11e)]?0x1:_0x4b6abc['datetime']>_0x1ce80c['datetime']?-0x1:0x0);let _0x51b53e=0x0;for(let _0x51db3b of _0x69d9f4){await updateCoinResults(_0x51db3b,!![]);}}catch(_0x52418){await handleError(_0x52418,'recreateCoinResults()');}}async function getAllEventOrders(_0x343dd1){const _0x4de19b=_0x598b6f;let _0x9e6008=[],_0x56c868=dbLogs[_0x4de19b(0x1e8)](_0x4de19b(0x1aa))[_0x4de19b(0x165)](_0x10f827=>{const _0x3a7d5f=_0x4de19b,_0x21a983=_0x10f827[_0x3a7d5f(0x12c)][_0x3a7d5f(0x1e5)]();return _0x21a983[_0x3a7d5f(0x1ef)](_0x343dd1[_0x3a7d5f(0x1e5)]())&&(_0x21a983[_0x3a7d5f(0x1ef)]('market')&&_0x21a983['includes']('order')||_0x21a983['includes'](_0x3a7d5f(0x136))&&_0x21a983[_0x3a7d5f(0x1ef)](_0x3a7d5f(0x1e4)));})[_0x4de19b(0x170)](_0x4de19b(0x1d6))[_0x4de19b(0x1c4)]();return _0x56c868[_0x4de19b(0x19c)](_0x5a9bde=>{const _0x15d8e7=_0x4de19b,_0x511088=_0x5a9bde[_0x15d8e7(0x12c)][_0x15d8e7(0x1ef)]('sell')?_0x15d8e7(0x164):'buy',_0x309782=/#([0-9]|\.)+\s/i,_0x1d1d58=Number(_0x309782['exec'](_0x5a9bde[_0x15d8e7(0x12c)])[0x0][_0x15d8e7(0xf5)](0x1)),_0x3616c4=/@([0-9]|\.)+$/i,_0x30c69b=Number(_0x3616c4['exec'](_0x5a9bde[_0x15d8e7(0x12c)])[0x0][_0x15d8e7(0xf5)](0x1));_0x9e6008[_0x15d8e7(0x158)]({'datetime':_0x5a9bde[_0x15d8e7(0x1d6)],'coin':symbolToCoin(_0x343dd1),'symbol':_0x343dd1,'side':_0x511088,'amount':_0x1d1d58,'filled':_0x1d1d58,'price':_0x30c69b});}),_0x9e6008;}async function getAllOrders(_0x11b1e8,_0x14beb2){const _0x260f43=_0x598b6f;let _0x51ea22=[];while(_0x14beb2<exchange[_0x260f43(0x135)]()){const _0x44e21a=0x1f4,_0x46a3fb=await exchange['fetchClosedOrders'](_0x11b1e8,_0x14beb2,_0x44e21a);if(_0x46a3fb[_0x260f43(0x1ac)])_0x14beb2=_0x46a3fb[_0x46a3fb[_0x260f43(0x1ac)]-0x1][_0x260f43(0x16a)]+0x1,_0x51ea22=_0x51ea22[_0x260f43(0x14d)](_0x46a3fb);else break;}return _0x51ea22;}function _0x55c0(){const _0x5c578b=['padStart','changes','function','EUR','string','logs','Unfilled\x20order(s)\x20canceled\x20after\x20','length','ongoing','DAI/','differenceInSeconds','change24h','writeFile','subscribeSpotUserDataStream','cancelOrder','coins','remove','fromCodePoint','executionReport','currency','secure','eur','FILLED','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','threshold','eventType','commissionAsset','type','</pre>','\x20minutes\x20-\x20','binanceus','value','2.5.0','apiKey','lowdb/adapters/FileSync','getTime','getSeconds','1449136cEBcbx','coin-loading-progress','apiSecret','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getPortfolio','canceled','cooldown','\x20portfolio:\x20\x0a\x0a','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','valid','starting-balances','MIN_NOTIONAL','time','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','loadSymbols()','replace','isArray','abs','buys','limit','001','28gOoGGl','side','************','\x20|\x20Binance\x20API\x20key\x20invalid','NEW','order','toLowerCase','getFiat()','sha256','get','subscribeSymbol24hrTicker','ExchangeNotAvailable','constructor','fees','search','limits','includes','lowdb','Pausing\x20for\x20','orderStatus','startprice','last','round','market','Limit\x20(low-margin)','priceChangePercent','./config/','open',':\x20Bot\x20','min','balancing\x20resumes\x20when\x20cooldown\x20ends','getPortfolio()','total',')\x20|\x20Error\x20details:\x20','7025645tDGbgy','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20minutes','coin','Binance\x20API\x20secret\x20is\x20invalid','decrypt','toString','map','progress','cancelOrders()','API-key\x20format\x20invalid','65724WYzlxd','Binance\x20API\x20blocked','number','placeOrder','5946655glrrae','\x20order:\x20','stringify','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','format','bot','timeout','sendPortfolioTelegram','starting-balance-','getFullYear','getHours','liquidity','execution:','BUSD','Binance\x20not\x20responding','close','stack','USDT','getMinutes','/backup/','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','argv','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','precision','exchange','\x20>\x20getcoins:','initws()','trade','excluded','Manual\x20balancing\x20required:\x20','slice','InsufficientFunds','split','emojibuy','basecoin','validate:','Bot\x20','realized','Error:\x20Invalid\x20argument\x20','2.3.5','delta','sort','data','price','reverse','parseISO','wss://stream.binance.com:9443','10HiwLqA','toggleBotMode','hybrid-crypto-js','fee','log','\x20|\x20','set','wss://stream.binance.us:9443','find','bb-settings.json','remainingSymbols','WebSockets(','\x20|\x20Error\x20details:\x20','usd','add','configuration','final','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','exit','date','existsSync','-events.json','ordertype','change','datetime','Order\x20amount\x20is\x20invalid:\x20','defaults','none','120YoUPty','keys','<pre>','Order(s)\x20filled\x20-\x20','limit-low','AuthenticationError','startnumber','/USDT','date-fns','mkdirSync','event','portfolio','CANCELED','\x20has\x20a\x2024h\x20drop\x20of\x20','kline','1414375jwZJlr','HOT/BTC','args','Binance\x20not\x20available\x20(2)','milliseconds','filled','-config.json','success','configuration-stored','splice','botname','assign','entries','6udZqGG','commission','(((.+)+)+)+$','join','privateKey','getCoinNumber()','3689468OXoirJ','\x20-\x20bot\x20not\x20started','send','max','NANO/','restart','indexOf','performance','padEnd','concat','fetchBalance','emojisell','cost','HOT/EUR','bid','Limit\x20(high-margin)','target','emitHistory','event-history','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','push','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','running','cloneDeep','showname','amount','breakeven','write','userData','isEqual','error','getDate','sell','filter','settings','symbols','orderstatus','symbol','timestamp','-results.json','wsMarket','recreate','ticker','getMonth','sortBy','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','parse','botID','getOpenOrders()','InvalidNonce','XEM/BUSD','timeshift','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','has','sells','distribution','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','shift','RSA-OAEP','message','binance','toFixed','bb-secure.json','ETH','\x20orders\x20in\x20less\x20than\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','balancing\x20resumed','startdate','BNB','cancel','initclient','page','findIndex','no\x20open\x20orders','bot-','-------------------------------\x0a','initial','\x20hour','createOrder','BTC','8930583WsMWwG','headless','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','test','limit-high','.json','86OjtTbo','BNB/','forEach','-performance.json','buy','DDoSProtection','orderId','version','Order\x20filled:\x20','Unknown\x20error\x20occured','offset'];_0x55c0=function(){return _0x5c578b;};return _0x55c0();}async function validate24hChanges(){const _0x2d038b=_0x598b6f;let _0x465b71;for(const _0x43c310 of currentCoins){if(_0x43c310[_0x2d038b(0xcb)]!=config[_0x2d038b(0xf9)]){let _0x327007;_0x43c310[_0x2d038b(0x103)]?_0x327007=formatResult((0x1/(global[_0x2d038b(0x11d)][noslash(_0x43c310['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x327007=global['change'][noslash(_0x43c310['symbol'])],_0x327007<config[_0x2d038b(0x1b0)]&&(logHistory(_0x2d038b(0x162),_0x43c310[_0x2d038b(0xcb)]+_0x2d038b(0x12f)+_0x327007+'%'),logHistory(_0x2d038b(0x162),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x2d038b(0x162),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x5406eb=_0x598b6f;let _0x52ebd3=dbLogs['get']('version')[_0x5406eb(0x1c4)]();if(_0x52ebd3!='2.3.5'){dbLogs[_0x5406eb(0x10c)](_0x5406eb(0x1a1),'2.3.5')['write']();let _0x3015ab=[];const _0x577e69=dbLogs[_0x5406eb(0x1e8)]('logs')['value']();_0x577e69[_0x5406eb(0x19c)](_0x17a4c1=>{const _0x295268=_0x5406eb;_0x3015ab[_0x295268(0x158)]({'time':_0x17a4c1[_0x295268(0x1d6)],'type':_0x17a4c1['type'],'event':_0x17a4c1[_0x295268(0x12c)]});}),dbLogs[_0x5406eb(0x1e8)](_0x5406eb(0x1aa))['assign'](_0x3015ab)['write']();}let _0x19fb12=dbConfig['get'](_0x5406eb(0x1a1))[_0x5406eb(0x1c4)]();if(_0x19fb12!=_0x5406eb(0xfe)){dbConfig[_0x5406eb(0x10c)](_0x5406eb(0x1a1),_0x5406eb(0xfe))[_0x5406eb(0x15f)]();let _0xf957cf=dbConfig[_0x5406eb(0x1e8)](_0x5406eb(0xdc))[_0x5406eb(0x10e)]({'botID':botID})[_0x5406eb(0x1c4)]();if(_0xf957cf){let _0x660fb2=[];_0xf957cf[_0x5406eb(0x12d)]['forEach'](_0x179c64=>{const _0x12f40c=_0x5406eb;_0x660fb2[_0x12f40c(0x158)]({'coin':_0x179c64[_0x12f40c(0xcb)],'number':_0x179c64[_0x12f40c(0x128)],'price':_0x179c64[_0x12f40c(0x1f3)]}),delete _0x179c64[_0x12f40c(0x128)],delete _0x179c64['startprice'];});if(_0x660fb2[_0x5406eb(0x1ac)]!==0x0)fs[_0x5406eb(0x1b1)](configbackuppath+(_0x5406eb(0xdf)+botID+_0x5406eb(0x199)),JSON[_0x5406eb(0xd9)](_0x660fb2,null,0x4),function(_0x27d845){if(_0x27d845){}});const _0x5f30bb=(_0x3c4610,_0x1ce2cd)=>{const _0x451e42=_0x5406eb;let _0x26efd2=[];_0x1ce2cd[_0x451e42(0x19c)](_0x2b514d=>{const _0x397014=_0x451e42,_0x28aeb8=_0x3c4610[_0x397014(0x10e)](_0x28db9b=>_0x28db9b[_0x397014(0xcb)]==_0x2b514d['coin']);if(!_0x28aeb8)_0x26efd2['push'](_0x2b514d);});let _0x5c5dcc=[];return _0x3c4610[_0x451e42(0x19c)](_0x5c5232=>{const _0x5a6ea2=_0x451e42,_0x20a0a7=_0x1ce2cd['find'](_0x1c4618=>_0x1c4618[_0x5a6ea2(0xcb)]==_0x5c5232[_0x5a6ea2(0xcb)]);if(!_0x20a0a7||_0x20a0a7[_0x5a6ea2(0xd5)]==0x0&&_0x5c5232['number']!=0x0)_0x5c5dcc[_0x5a6ea2(0x158)](_0x5c5232);}),{'missingDay1':_0x26efd2,'notInDay2':_0x5c5dcc};},_0x320da2=dbPerformance[_0x5406eb(0x1e8)](_0x5406eb(0x101))[_0x5406eb(0x15b)]()[_0x5406eb(0x1c4)]();if(_0x320da2[_0x5406eb(0x1ac)]>0x1){const {missingDay1:_0xf80848,notInDay2:_0x4bd41f}=_0x5f30bb(_0x660fb2,_0x320da2[0x1][_0x5406eb(0x1b4)]);_0x660fb2=[..._0x660fb2,..._0xf80848],_0x4bd41f['forEach'](_0x4374d9=>{const _0x1393a1=_0x5406eb;let _0x436a70=_0x660fb2[_0x1393a1(0x18c)](_0x51f4b0=>_0x51f4b0[_0x1393a1(0xcb)]==_0x4374d9[_0x1393a1(0xcb)]);_0x436a70!=-0x1&&_0x660fb2[_0x1393a1(0x13a)](_0x436a70,0x1);});}_0x660fb2[_0x5406eb(0x100)]((_0x140175,_0x4bbd88)=>_0x140175[_0x5406eb(0xcb)]>_0x4bbd88['coin']?0x1:_0x4bbd88['coin']>_0x140175['coin']?-0x1:0x0);let _0x3ba85a=[{'date':_0xf957cf[_0x5406eb(0x187)],'changes':_0x660fb2}];_0x320da2[_0x5406eb(0x1ac)]>0x2&&_0x320da2[_0x5406eb(0x19c)]((_0x2bed8e,_0x193ee0)=>{const _0x5543d7=_0x5406eb;if(_0x193ee0>0x0&&_0x193ee0<_0x320da2[_0x5543d7(0x1ac)]-0x1){const {missingDay1:_0x22b0d1,notInDay2:_0x2792a7}=_0x5f30bb(_0x320da2[_0x193ee0][_0x5543d7(0x1b4)],_0x320da2[_0x193ee0+0x1]['coins']);_0x660fb2=[],(_0x22b0d1[_0x5543d7(0x1ac)]!=0x0||_0x2792a7[_0x5543d7(0x1ac)]!=0x0)&&(_0x22b0d1['length']!=0x0&&_0x660fb2[_0x5543d7(0x158)](..._0x22b0d1),_0x2792a7[_0x5543d7(0x1ac)]!=0x0&&(_0x2792a7[_0x5543d7(0x19c)](_0x1bf3bd=>{const _0x43574b=_0x5543d7;_0x1bf3bd[_0x43574b(0xd5)]=-_0x1bf3bd['number'];}),_0x660fb2[_0x5543d7(0x158)](..._0x2792a7)),_0x660fb2[_0x5543d7(0x100)]((_0x39fe05,_0x5b5e26)=>_0x39fe05[_0x5543d7(0xcb)]>_0x5b5e26[_0x5543d7(0xcb)]?0x1:_0x5b5e26[_0x5543d7(0xcb)]>_0x39fe05[_0x5543d7(0xcb)]?-0x1:0x0),_0x3ba85a['push']({'date':_0x320da2[_0x193ee0+0x1][_0x5543d7(0x119)],'changes':_0x660fb2}));}}),dbConfig['get'](_0x5406eb(0xdc))[_0x5406eb(0x10e)]({'botID':botID})['assign']({..._0xf957cf,'liquidity':_0x3ba85a})['write']();}}config=getConfiguration(botID);let _0x596ea2=dbPerformance['get'](_0x5406eb(0x1a1))[_0x5406eb(0x1c4)]();_0x596ea2!='2.3.5'&&(dbPerformance[_0x5406eb(0x10c)](_0x5406eb(0x1a1),_0x5406eb(0xfe))[_0x5406eb(0x15f)](),setStartDatePerformance());let _0x3dc637=dbCoinResults[_0x5406eb(0x1e8)](_0x5406eb(0x1a1))[_0x5406eb(0x1c4)]();if(_0x3dc637!=_0x5406eb(0x1c5)){dbCoinResults['set'](_0x5406eb(0x1a1),_0x5406eb(0x1c5))['write']();let _0x1413b7=dbCoinResults[_0x5406eb(0x1e8)](_0x5406eb(0x1b4))[_0x5406eb(0x1c4)]();if(_0x1413b7[_0x5406eb(0x1ac)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x3bface){const _0x57e379=_0x598b6f;let _0x4f792d=dbConfig[_0x57e379(0x1e8)](_0x57e379(0xdc))[_0x57e379(0x10e)]({'botID':_0x3bface})[_0x57e379(0x1c4)]();if(_0x4f792d){let _0xfc5b70=![];typeof _0x4f792d['threshold']==_0x57e379(0x1a9)&&(_0x4f792d={..._0x4f792d,'threshold':Number(_0x4f792d[_0x57e379(0x1bd)])},_0xfc5b70=!![]),_0x4f792d[_0x57e379(0x1b0)]==null&&(_0x4f792d={..._0x4f792d,'change24h':-0x14},_0xfc5b70=!![]),_0xfc5b70&&(_0x4f792d={'botID':_0x4f792d[_0x57e379(0x173)],'exchange':_0x4f792d['exchange'],'apiKey':_0x4f792d[_0x57e379(0x1c6)],'apiSecret':_0x4f792d['apiSecret'],'basecoin':_0x4f792d[_0x57e379(0xf9)],'botname':_0x4f792d['botname'],'showname':_0x4f792d[_0x57e379(0x15c)],'threshold':_0x4f792d['threshold'],'ordertype':_0x4f792d['ordertype'],'timeout':_0x4f792d[_0x57e379(0xdd)],'startdate':_0x4f792d['startdate'],'recreate':_0x4f792d[_0x57e379(0x16d)],'timeshift':_0x4f792d['timeshift'],'headless':_0x4f792d['headless'],'cooldown':_0x4f792d[_0x57e379(0x1d0)],'change24h':_0x4f792d[_0x57e379(0x1b0)],'emojibuy':_0x4f792d[_0x57e379(0xf8)],'emojisell':_0x4f792d[_0x57e379(0x14f)],'portfolio':_0x4f792d['portfolio'],'liquidity':_0x4f792d['liquidity']},dbConfig[_0x57e379(0x1e8)](_0x57e379(0xdc))[_0x57e379(0x1b5)]()[_0x57e379(0x15f)](),dbConfig[_0x57e379(0x1e8)]('bot')[_0x57e379(0x158)](_0x4f792d)[_0x57e379(0x15f)]());}else _0x4f792d={'botID':_0x3bface,'exchange':_0x57e379(0x180),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x57e379(0xfb)+_0x3bface,'showname':![],'threshold':0x3,'ordertype':_0x57e379(0x1f6),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x57e379(0x177)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x4f792d;}function emittedConfiguration(){let _0x4ffca9;return config['apiKey']==''?_0x4ffca9=config:_0x4ffca9={...config,'apiKey':'************','apiSecret':'************'},_0x4ffca9;}function getSettings(){const _0x46712f=_0x598b6f;return dbSettings['get'](_0x46712f(0x166))[_0x46712f(0x1c4)]();}function getSecure(){const _0x531688=_0x598b6f;return dbSecure[_0x531688(0x1e8)](_0x531688(0x1b9))[_0x531688(0x1c4)]()||{};}function updateTimeshift(_0x44d67a){const _0x1d32e6=_0x598b6f;let _0x19e296=dbConfig[_0x1d32e6(0x1e8)]('bot')['find']({'botID':botID})[_0x1d32e6(0x1c4)]();_0x19e296&&dbConfig[_0x1d32e6(0x1e8)]('bot')['find']({'botID':botID})[_0x1d32e6(0x13c)]({'timeshift':_0x44d67a})['write'](),config[_0x1d32e6(0x177)]=_0x44d67a,proxyEmit(_0x1d32e6(0x115),emittedConfiguration());}async function storeConfiguration(_0x48c35c){const _0x52506a=_0x598b6f;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x4fecf3=dbConfig['get'](_0x52506a(0xdc))[_0x52506a(0x10e)]({'botID':botID})['value']();_0x48c35c={..._0x48c35c,'apiKey':crypt['decrypt'](secure[_0x52506a(0x142)],_0x48c35c[_0x52506a(0x1c6)])[_0x52506a(0x17f)],'apiSecret':crypt[_0x52506a(0xcd)](secure['privateKey'],_0x48c35c[_0x52506a(0x1cc)])[_0x52506a(0x17f)]};if(_0x4fecf3){if(_0x48c35c[_0x52506a(0x1c6)]==_0x52506a(0x1e1))_0x48c35c['apiKey']=config[_0x52506a(0x1c6)];if(_0x48c35c[_0x52506a(0x1cc)]==_0x52506a(0x1e1))_0x48c35c[_0x52506a(0x1cc)]=config[_0x52506a(0x1cc)];dbConfig[_0x52506a(0x1e8)](_0x52506a(0xdc))[_0x52506a(0x10e)]({'botID':botID})[_0x52506a(0x13c)](_0x48c35c)[_0x52506a(0x15f)]();}else dbConfig[_0x52506a(0x1e8)](_0x52506a(0xdc))[_0x52506a(0x158)](_0x48c35c)[_0x52506a(0x15f)](),process['send']({'status':'enabled','live':_0x52506a(0x15a)},_0x25e995=>{});config={..._0x48c35c},setStartDatePerformance(),process[_0x52506a(0x146)]({'botname':_0x48c35c[_0x52506a(0x13b)]},_0x5d9199=>{}),updateBotManager();const _0x1eae55=getNormalizedPerformance();getStartingBalances(_0x1eae55),emitPerformance(_0x1eae55),proxyEmit(_0x52506a(0x139)),await initCoinResults(),reset();}async function storeHeadless(_0x230950){const _0x103836=_0x598b6f,_0x30138c={...config,'headless':_0x230950[_0x103836(0x195)]};let _0x3ed2d8=dbConfig[_0x103836(0x1e8)](_0x103836(0xdc))[_0x103836(0x10e)]({'botID':botID})[_0x103836(0x1c4)]();_0x3ed2d8&&dbConfig[_0x103836(0x1e8)]('bot')[_0x103836(0x10e)]({'botID':botID})[_0x103836(0x13c)](_0x30138c)['write'](),config={..._0x30138c},updateBotManager(),proxyEmit(_0x103836(0x115),emittedConfiguration());}function noslash(_0x2da746){return _0x2da746['replace']('/','');}async function updateNumberCoins(_0x2d39a4){const _0x5ae847=_0x598b6f;if(_0x2d39a4[_0x5ae847(0x1be)]&&_0x2d39a4[_0x5ae847(0x1be)]==_0x5ae847(0x1b7)){logging(_0x5ae847(0xe3),_0x2d39a4);let _0x4dc893=_0x2d39a4[_0x5ae847(0x1f2)],_0x17c86e=![];currentCoins['forEach'](_0x10c5c8=>{const _0x11aac5=_0x5ae847;noslash(_0x10c5c8[_0x11aac5(0x169)])==_0x2d39a4[_0x11aac5(0x169)]&&(_0x17c86e=!![]);});if(!_0x17c86e)return;const _0x315bd9=currentCoins[_0x5ae847(0x10e)](_0x1cce20=>noslash(_0x1cce20[_0x5ae847(0x169)])==_0x2d39a4[_0x5ae847(0x169)]),_0x300e43=_0x35e0dd=>{const _0x56ceb3=_0x5ae847;if(_0x315bd9)_0x315bd9[_0x56ceb3(0x168)]=_0x35e0dd;};if(_0x4dc893==_0x5ae847(0x1e3))_0x300e43(_0x5ae847(0x1fa));else{if(_0x4dc893==_0x5ae847(0x12e))_0x300e43(_0x5ae847(0x1cf)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x4dc893==_0x5ae847(0x1bb)){let _0x1d6c60=![];if(lastOrders)lastOrders[_0x5ae847(0x19c)](async _0x471066=>{const _0x427c0d=_0x5ae847;if(_0x471066['orderId']==_0x2d39a4[_0x427c0d(0x1a0)]){_0x1d6c60=!![],logging(_0x427c0d(0x136));if(_0x471066[_0x427c0d(0x136)]==0x0){_0x471066[_0x427c0d(0x102)]=_0x2d39a4['cumulativeQuoteAssetTransactedQty']/_0x2d39a4['accumulatedQuantity'],_0x471066[_0x427c0d(0x136)]=_0x2d39a4['accumulatedQuantity'],_0x471066['fee']={'cost':_0x2d39a4[_0x427c0d(0x13f)],'currency':_0x2d39a4[_0x427c0d(0x1bf)]},_0x300e43(_0x427c0d(0x136)),await validateOrders();if(lockOrders)currentCoins=await getCoins();await updateCoinResults(_0x471066);}}});!_0x1d6c60&&(_0x300e43(_0x5ae847(0x136)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x3ba786=JSON[_0x5ae847(0x172)](lastBalances[_0x5ae847(0x12d)]);const _0x222458=_0x3ba786[_0x5ae847(0x10e)](_0x22b9fb=>noslash(_0x22b9fb[_0x5ae847(0x169)])==_0x2d39a4[_0x5ae847(0x169)]);if(_0x222458){if(_0x4dc893==_0x5ae847(0x1e3))_0x222458[_0x5ae847(0x168)]=_0x222458[_0x5ae847(0x168)]=='filled'?'filled':_0x5ae847(0x1fa);else{if(_0x4dc893==_0x5ae847(0x12e))_0x222458['orderstatus']=_0x222458['orderstatus']==_0x5ae847(0x136)?'filled':_0x5ae847(0x1cf);else _0x4dc893==_0x5ae847(0x1bb)&&(_0x222458[_0x5ae847(0x168)]=_0x5ae847(0x136));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5ae847(0xd9)](_0x3ba786)},logging(_0x4dc893,_0x3ba786),proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}}async function getCoins(_0x34f604=![],_0x29ec78=!![],_0x6c8163=config[_0x598b6f(0xf9)]){const _0x4b26d4=_0x598b6f;let _0xd297cf,_0xd5f257=[],_0x2aac56=[],_0x3a8c71=[],_0x679885=new Error(),_0x37069d=_0x679885[_0x4b26d4(0xe7)][_0x4b26d4(0xf7)]('\x0a')[0x2],_0x381fc3=_0x37069d[_0x4b26d4(0xf7)](':')[_0x4b26d4(0x103)]()[0x1],_0x520a07=_0x37069d[_0x4b26d4(0xf7)]('\x20')[0x5];logging(_0x520a07+'\x20'+_0x381fc3+_0x4b26d4(0xf0),_0x34f604);try{_0xd297cf=await exchange[_0x4b26d4(0x14e)](),mybalances=_0xd297cf[_0x4b26d4(0x1ff)];if(!_0x29ec78)for(const [_0x8cece7,_0x4bc93e]of Object[_0x4b26d4(0x13d)](mybalances)){_0x3a8c71[_0x4b26d4(0x158)](_0x8cece7);}else config[_0x4b26d4(0x12d)][_0x4b26d4(0x19c)](_0x15f74f=>{const _0x1b2feb=_0x4b26d4;if(!_0x15f74f['excluded'])_0x3a8c71[_0x1b2feb(0x158)](_0x15f74f[_0x1b2feb(0xcb)]);});if(_0x6c8163=='')for(const [_0x4adfda,_0x241eea]of Object['entries'](mybalances)){_0x241eea[_0x4b26d4(0xce)]()!=0x0&&_0x2aac56[_0x4b26d4(0x158)]({'coin':_0x4adfda});}else{if(_0x34f604)await getOpenOrders();let _0x5c9267=![];for(const [_0x37890f,_0xe87725]of Object[_0x4b26d4(0x13d)](mybalances)){if(_0x3a8c71['includes'](_0x37890f)){const _0x3e9821=config[_0x4b26d4(0x12d)]['find'](_0x41f86b=>_0x41f86b['coin']==_0x37890f),_0x45df33=_0x37890f+'/'+_0x6c8163,_0x2c1585=_0x6c8163+'/'+_0x37890f,_0x24556f=currentCoins[_0x4b26d4(0x10e)](_0x438b6f=>_0x438b6f[_0x4b26d4(0xcb)]==_0x37890f);_0x5c9267=![];_0x34f604&&(_0x5c9267=allOpenOrders['find'](_0x3761c5=>_0x3761c5[_0x4b26d4(0x169)]==noslash(_0x3e9821[_0x4b26d4(0x169)])));if((_0xe87725['toString']()!=0x0||_0x3e9821)&&(allSymbols[_0x4b26d4(0x1ef)](_0x45df33)||_0x37890f==_0x6c8163))_0x37890f!=_0x6c8163&&_0xd5f257[_0x4b26d4(0x158)](_0x45df33),_0x2aac56[_0x4b26d4(0x158)]({'coin':_0x37890f,'symbol':_0x45df33,'reverse':![],'number':Math[_0x4b26d4(0x147)](_0xe87725+(_0x3e9821&&_0x3e9821[_0x4b26d4(0x1a4)]||0x0),0x0),'orderstatus':_0x34f604?_0x5c9267?_0x4b26d4(0x1fa):_0x4b26d4(0x121):_0x24556f?_0x24556f[_0x4b26d4(0x168)]:_0x4b26d4(0x121)});else(_0xe87725[_0x4b26d4(0xce)]()!=0x0||_0x3e9821)&&allSymbols[_0x4b26d4(0x1ef)](_0x2c1585)&&(_0x37890f!=_0x6c8163&&_0xd5f257[_0x4b26d4(0x158)](_0x2c1585),_0x2aac56[_0x4b26d4(0x158)]({'coin':_0x37890f,'symbol':_0x2c1585,'reverse':!![],'number':Math[_0x4b26d4(0x147)](_0xe87725+(_0x3e9821&&_0x3e9821[_0x4b26d4(0x1a4)]||0x0),0x0),'orderstatus':_0x34f604?_0x5c9267?_0x4b26d4(0x1fa):_0x4b26d4(0x121):_0x24556f?_0x24556f[_0x4b26d4(0x168)]:_0x4b26d4(0x121)}));}}}}catch(_0x566331){if(!_0x29ec78){if(_0x566331[_0x4b26d4(0xce)]()[_0x4b26d4(0x1ef)](_0x4b26d4(0xd2)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x566331[_0x4b26d4(0xce)]()[_0x4b26d4(0x1ef)](_0x4b26d4(0x127)))return logHistory(_0x4b26d4(0x162),_0x4b26d4(0x157)),![];else{if(_0x566331[_0x4b26d4(0xce)]()[_0x4b26d4(0x1ef)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',_0x4b26d4(0xcc)),![];else await handleError(_0x566331,'getCoins()');}}}else await handleError(_0x566331,'getCoins()');}return _0x2aac56;}async function getCoinNumber(_0x3fa609){const _0x5f33ff=_0x598b6f;let _0x4e42b8;try{const _0x523c68=await exchange['fetchBalance']();_0x4e42b8=_0x523c68['total'][_0x3fa609];}catch(_0x14ec9c){await handleError(_0x14ec9c,_0x5f33ff(0x143));}return _0x4e42b8;}async function getOpenOrders(){const _0x11799b=_0x598b6f;let _0x1a22a0;allOpenOrders=[];try{for(const _0x561a1c of config[_0x11799b(0x12d)]){!_0x561a1c[_0x11799b(0xf3)]&&_0x561a1c[_0x11799b(0xcb)]!=config[_0x11799b(0xf9)]&&(_0x1a22a0=await exchange['fetchOpenOrders'](_0x561a1c[_0x11799b(0x169)]),_0x1a22a0['length']>0x0&&allOpenOrders['push'](_0x1a22a0[0x0]));}}catch(_0x2142a8){await handleError(_0x2142a8,_0x11799b(0x174));}}async function handleOpenOrders(_0x268b36=0x0){const _0x1595a6=_0x598b6f;allOpenOrders[_0x1595a6(0x1ac)]==0x0&&lockOrders&&allOrdersPlaced&&(_0x268b36==0x0?(_0x268b36++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):validateOrders(_0x1595a6(0x18d)));}async function getPortfolio(_0x12ad90){const _0x38c9ea=_0x598b6f;let _0xccdb70=[],_0x1eaaca=[],_0x459c2d,_0x1f8128=[],_0xaf235d,_0x2839cf;_0x12ad90[_0x38c9ea(0x1c6)]==='************'||_0x12ad90['apiSecret']===_0x38c9ea(0x1e1)?(_0xaf235d=config[_0x38c9ea(0x1c6)],_0x2839cf=config[_0x38c9ea(0x1cc)]):(_0xaf235d=_0x12ad90[_0x38c9ea(0x1c6)],_0x2839cf=_0x12ad90[_0x38c9ea(0x1cc)]);await initExchange(_0xaf235d,_0x2839cf);let _0x382959=await loadSymbols();if(_0x382959){_0x1f8128=await getCoins(![],![],_0x12ad90[_0x38c9ea(0xf9)]);if(_0x1f8128===![])proxyEmit(_0x38c9ea(0x12d),![]);else{if(_0x12ad90[_0x38c9ea(0xf9)]=='')proxyEmit(_0x38c9ea(0x12d),_0x1f8128);else{_0x1f8128[_0x38c9ea(0x19c)](_0xcf3c58=>{const _0x5c90d7=_0x38c9ea;if(_0xcf3c58['coin']!=_0x12ad90['basecoin'])_0xccdb70[_0x5c90d7(0x158)](_0xcf3c58[_0x5c90d7(0x169)]);});try{_0x1eaaca=await exchange['fetchTickers'](_0xccdb70);}catch(_0x3b81d0){await handleError(_0x3b81d0,_0x38c9ea(0x1fe));}_0x1f8128[_0x38c9ea(0x19c)](_0x59853a=>{const _0x5bea88=_0x38c9ea;_0x59853a[_0x5bea88(0xcb)]!=_0x12ad90['basecoin']?_0x459c2d=_0x59853a['reverse']?0x1/_0x1eaaca[_0x59853a[_0x5bea88(0x169)]]['last']:_0x1eaaca[_0x59853a['symbol']]['last']:_0x459c2d=0x1,_0x59853a['price']=formatResult(_0x459c2d,0x8);}),proxyEmit(_0x38c9ea(0x12d),_0x1f8128);}}}else proxyEmit(_0x38c9ea(0x12d),![]);}function checkMinimums(_0x4e4892){const _0x3209e0=_0x598b6f;let _0x9fd3ff=!![];const _0x539704=!_0x4e4892[_0x3209e0(0x103)]?markets[_0x4e4892[_0x3209e0(0x169)]][_0x3209e0(0x1ee)][_0x3209e0(0x15d)]['min']:markets[_0x4e4892['symbol']][_0x3209e0(0x1ee)]['cost'][_0x3209e0(0x1fc)],_0x525b0a=!_0x4e4892[_0x3209e0(0x103)]?markets[_0x4e4892[_0x3209e0(0x169)]][_0x3209e0(0x1ee)][_0x3209e0(0x150)]['min']:markets[_0x4e4892['symbol']][_0x3209e0(0x1ee)][_0x3209e0(0x15d)][_0x3209e0(0x1fc)],_0x41953d=markets[_0x4e4892[_0x3209e0(0x169)]][_0x3209e0(0xee)][_0x3209e0(0x15d)];_0x4e4892[_0x3209e0(0xf2)]=formatResultTruncate(_0x4e4892[_0x3209e0(0xf2)],_0x41953d);if(Math[_0x3209e0(0x1db)](_0x4e4892['trade'])<_0x539704)_0x9fd3ff=![];if(Math[_0x3209e0(0x1db)](_0x4e4892[_0x3209e0(0xf2)])*_0x4e4892['last']<_0x525b0a)_0x9fd3ff=![];if(_0x4e4892[_0x3209e0(0x1e0)]=='sell'){let _0xf1a045=config[_0x3209e0(0x12d)][_0x3209e0(0x10e)](_0x1af006=>_0x1af006[_0x3209e0(0xcb)]==_0x4e4892[_0x3209e0(0xcb)]);if(_0xf1a045[_0x3209e0(0x1a4)]>0x0){if(Math[_0x3209e0(0x1db)](_0x4e4892['trade'])>_0x4e4892[_0x3209e0(0xd5)]-_0xf1a045[_0x3209e0(0x1a4)])_0x9fd3ff=![];}else{if(Math[_0x3209e0(0x1db)](_0x4e4892[_0x3209e0(0xf2)])>_0x4e4892[_0x3209e0(0xd5)])_0x9fd3ff=![];}}if(_0x4e4892[_0x3209e0(0x1e0)]=='buy'){let _0x1e8dfb=config['portfolio'][_0x3209e0(0x10e)](_0x535dac=>_0x535dac[_0x3209e0(0xcb)]==config[_0x3209e0(0xf9)]),_0x903eda=currentCoins[_0x3209e0(0x10e)](_0x500bd7=>_0x500bd7[_0x3209e0(0xcb)]==config[_0x3209e0(0xf9)]);if(_0x1e8dfb[_0x3209e0(0x1a4)]>0x0){if(Math[_0x3209e0(0x1db)](_0x4e4892[_0x3209e0(0xf2)])*_0x4e4892['last']>_0x903eda[_0x3209e0(0xd5)]-_0x1e8dfb[_0x3209e0(0x1a4)])_0x9fd3ff=![];}else{if(Math[_0x3209e0(0x1db)](_0x4e4892[_0x3209e0(0xf2)])*_0x4e4892[_0x3209e0(0x1f4)]>_0x903eda[_0x3209e0(0xd5)])_0x9fd3ff=![];}}return _0x9fd3ff;}async function getBalances(){const _0x387509=_0x598b6f;let _0x153c56=0x0,_0x1ae9c1;const _0x3afac1=config['threshold'];if(config['headless']&&config[_0x387509(0x1b0)]<0x0)await validate24hChanges();currentCoins[_0x387509(0x19c)](_0x13ca81=>{const _0x5caf3d=_0x387509;if(_0x13ca81[_0x5caf3d(0xcb)]!=config[_0x5caf3d(0xf9)]){let _0x1a1335=global['ticker'][noslash(_0x13ca81[_0x5caf3d(0x169)])];_0x1ae9c1=_0x13ca81[_0x5caf3d(0x103)]?0x1/_0x1a1335:_0x1a1335;}else _0x1ae9c1=0x1;let _0x21d413=_0x13ca81[_0x5caf3d(0xd5)]*_0x1ae9c1;_0x153c56+=_0x21d413,_0x13ca81[_0x5caf3d(0x1f4)]=formatResult(Number(_0x1ae9c1),0x8),_0x13ca81[_0x5caf3d(0x1c4)]=_0x21d413;}),currentCoins[_0x387509(0x19c)](_0x3d362f=>{const _0xdcbf16=_0x387509;let _0x4e444b=config[_0xdcbf16(0x12d)][_0xdcbf16(0x10e)](_0x2dcd11=>_0x2dcd11[_0xdcbf16(0xcb)]==_0x3d362f[_0xdcbf16(0xcb)]),_0x197f16=Number(_0x4e444b['distribution']),_0x6487f5=_0x3d362f[_0xdcbf16(0x1c4)]/_0x153c56*0x64,_0x5e07b9=_0x197f16*_0x153c56/0x64/_0x3d362f['last']-_0x3d362f[_0xdcbf16(0xd5)];_0x3d362f['distribution']=formatResult(_0x6487f5,0x3),_0x3d362f[_0xdcbf16(0x154)]=formatResult(_0x197f16,0x3),_0x3d362f[_0xdcbf16(0xf2)]=formatResult(_0x5e07b9,0x8),_0x3d362f[_0xdcbf16(0x1e0)]='',_0x3d362f[_0xdcbf16(0x1d3)]=![];if(_0x3d362f['coin']!=config[_0xdcbf16(0xf9)]){if(_0x3d362f[_0xdcbf16(0x17b)]>_0x197f16)_0x3d362f['side']='sell',_0x3d362f[_0xdcbf16(0x1d3)]=checkMinimums(_0x3d362f);else _0x3d362f['distribution']<_0x197f16&&(_0x3d362f[_0xdcbf16(0x1e0)]='buy',_0x3d362f[_0xdcbf16(0x1d3)]=checkMinimums(_0x3d362f));}_0x3d362f[_0xdcbf16(0xff)]=_0x3d362f[_0xdcbf16(0x17b)]/_0x3d362f[_0xdcbf16(0x154)]-0x1;if(_0x3d362f[_0xdcbf16(0x168)]==_0xdcbf16(0x136)||_0x3d362f['orderstatus']=='canceled')_0x3d362f[_0xdcbf16(0x168)]='none';}),currentCoins['sort']((_0x2c0476,_0x16a213)=>_0x2c0476[_0x387509(0xff)]<_0x16a213[_0x387509(0xff)]?0x1:_0x16a213[_0x387509(0xff)]<_0x2c0476[_0x387509(0xff)]?-0x1:0x0);const _0x3ae37a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3ae37a[_0x387509(0x1ba)],'usd':_0x3ae37a[_0x387509(0x113)],'portfolio':JSON[_0x387509(0xd9)](currentCoins),'threshold':_0x3afac1},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3afac1});else{if(!lockOrders&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3afac1});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3ec8c8=_0x598b6f;if(!lastBalances)return;let _0x166595=[],_0x2ad71d,_0x5a913f=JSON[_0x3ec8c8(0x172)](lastBalances[_0x3ec8c8(0x12d)]);_0x5a913f[_0x3ec8c8(0x100)]((_0x53ce5b,_0x36d129)=>_0x53ce5b[_0x3ec8c8(0xcb)]>_0x36d129[_0x3ec8c8(0xcb)]?0x1:_0x36d129[_0x3ec8c8(0xcb)]>_0x53ce5b[_0x3ec8c8(0xcb)]?-0x1:0x0),_0x5a913f[_0x3ec8c8(0x19c)](_0x3cb686=>{const _0x18187e=_0x3ec8c8;let _0x5e5766={'coin':_0x3cb686[_0x18187e(0xcb)],'number':_0x3cb686['number'],'price':_0x3cb686['last']};_0x166595[_0x18187e(0x158)](_0x5e5766);});const _0x32cc97=await getFiat();_0x2ad71d={'date':lastBalances[_0x3ec8c8(0x1d6)][_0x3ec8c8(0xf7)]('\x20')[0x0],'eur':_0x32cc97[_0x3ec8c8(0x1ba)],'usd':_0x32cc97['usd'],'coins':_0x166595};let _0x4065b5=dbPerformance[_0x3ec8c8(0x1e8)](_0x3ec8c8(0x101))['find']({'date':_0x2ad71d[_0x3ec8c8(0x119)]})[_0x3ec8c8(0x1c4)]();_0x4065b5?_0x2ad71d['date']!=config[_0x3ec8c8(0x187)]&&dbPerformance['get'](_0x3ec8c8(0x101))['find']({'date':_0x2ad71d['date']})[_0x3ec8c8(0x13c)](_0x2ad71d)['write']():dbPerformance[_0x3ec8c8(0x1e8)](_0x3ec8c8(0x101))['push'](_0x2ad71d)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x458718=_0x598b6f;let _0x5a9f74=[];if(dbPerformance[_0x458718(0x179)]('data')['value']()){let _0x5b6f65=dbPerformance[_0x458718(0x1e8)](_0x458718(0x101))[_0x458718(0x15b)]()[_0x458718(0x170)]('date')['value'](),_0x42fd59=[...config[_0x458718(0xe2)]];_0x42fd59[_0x458718(0x100)]((_0x27b6e5,_0x5e1dff)=>_0x27b6e5['date']>_0x5e1dff[_0x458718(0x119)]?-0x1:_0x5e1dff[_0x458718(0x119)]>_0x27b6e5[_0x458718(0x119)]?0x1:0x0);let _0x5ec68c=0x1,_0x11ae85=[],_0x444bd3=0x0;_0x5b6f65['slice']()[_0x458718(0x103)]()[_0x458718(0x19c)]((_0x2f915d,_0x3b3162)=>{const _0x5925ec=_0x458718;if(_0x42fd59[_0x444bd3]){if(_0x5b6f65[_0x5b6f65[_0x5925ec(0x1ac)]-_0x3b3162]&&_0x42fd59[_0x444bd3][_0x5925ec(0x119)]==_0x5b6f65[_0x5b6f65[_0x5925ec(0x1ac)]-_0x3b3162][_0x5925ec(0x119)]){if(_0x3b3162<_0x5b6f65[_0x5925ec(0x1ac)]){let _0x5a863b=0x0,_0x44f7c2=0x0;_0x5b6f65[_0x5b6f65['length']-_0x3b3162]['coins'][_0x5925ec(0x19c)](_0x116cf2=>{const _0x2e2341=_0x5925ec;_0x44f7c2+=_0x116cf2[_0x2e2341(0xd5)]*_0x116cf2[_0x2e2341(0x102)];}),_0x42fd59[_0x444bd3]['changes'][_0x5925ec(0x19c)](_0x48ae4e=>{const _0x26421f=_0x5925ec;_0x5a863b+=_0x48ae4e[_0x26421f(0xd5)]*_0x48ae4e[_0x26421f(0x102)];}),_0x5ec68c*=_0x5a863b/(_0x44f7c2-_0x5a863b)+0x1;}_0x444bd3++;}}let _0x164fb4=0x0;_0x2f915d[_0x5925ec(0x1b4)][_0x5925ec(0x19c)](_0x416873=>{const _0x256fdf=_0x5925ec;_0x164fb4+=_0x416873['number']*_0x416873[_0x256fdf(0x102)];}),_0x11ae85[_0x5b6f65[_0x5925ec(0x1ac)]-_0x3b3162-0x1]=_0x164fb4*(_0x5ec68c-0x1);});let _0x4b16cf=[];_0x42fd59=[...config[_0x458718(0xe2)]]||[];let _0x5e77a6=0x0;_0x444bd3=0x0,_0x5b6f65[_0x458718(0x19c)]((_0x496de4,_0x6372bb)=>{const _0x1ce496=_0x458718;if(_0x42fd59[_0x444bd3]){const _0x280996=fns[_0x1ce496(0x172)](_0x42fd59[_0x444bd3][_0x1ce496(0x119)],'yyyy/MM/dd',new Date()),_0x37d993=fns['parse'](_0x496de4[_0x1ce496(0x119)],'yyyy/MM/dd',new Date());if(fns[_0x1ce496(0x161)](_0x280996,_0x37d993)){let _0x882044=0x0;_0x42fd59[_0x444bd3][_0x1ce496(0x1a6)][_0x1ce496(0x19c)](_0x44de39=>{const _0x3756c3=_0x1ce496;!_0x4b16cf[_0x44de39['coin']]?_0x4b16cf[_0x44de39[_0x3756c3(0xcb)]]=_0x44de39['number']:(_0x882044=_0x4b16cf[_0x44de39['coin']],_0x4b16cf[_0x44de39[_0x3756c3(0xcb)]]+=_0x44de39[_0x3756c3(0xd5)]);const _0x13bd41=_0x496de4[_0x3756c3(0x1b4)][_0x3756c3(0x10e)](_0x1118df=>_0x1118df['coin']==_0x44de39[_0x3756c3(0xcb)]);(!_0x13bd41||_0x13bd41[_0x3756c3(0xd5)]==0x0)&&(_0x5e77a6+=(-_0x44de39['number']-_0x882044)*_0x44de39[_0x3756c3(0x102)]);}),_0x444bd3++;}}_0x496de4[_0x1ce496(0x1b4)][_0x1ce496(0x19c)]((_0x1807cd,_0x568b50)=>{const _0x1e2ad1=_0x1ce496;_0x4b16cf[_0x1807cd[_0x1e2ad1(0xcb)]]&&(_0x1807cd={..._0x1807cd,'initial':_0x4b16cf[_0x1807cd[_0x1e2ad1(0xcb)]]}),_0x496de4[_0x1e2ad1(0x1b4)][_0x568b50]=_0x1807cd;}),_0x5a9f74['push']({'date':_0x496de4[_0x1ce496(0x119)],'eur':_0x496de4[_0x1ce496(0x1ba)],'usd':_0x496de4[_0x1ce496(0x113)],'offset':_0x11ae85[_0x6372bb],'netoffset':_0x5e77a6,'coins':_0x496de4['coins']});});}return _0x5a9f74;}function emitPerformance(_0x36ccc1){const _0x286e4e=_0x598b6f;_0x36ccc1[_0x286e4e(0x1ac)]!==0x0?(proxyEmit('performance',_0x36ccc1),lastPerformanceEmitted=getDate()):proxyEmit(_0x286e4e(0x14b),[]);}function getPerf(_0x133940,_0xa0edde){const _0x3f4529=_0x598b6f;let _0x539800=0x0,_0x13c8f6=0x0,_0x42f7fd=0x0;_0x133940[_0x3f4529(0x1b4)][_0x3f4529(0x19c)](_0x1a8a25=>{const _0x57daef=_0x3f4529;_0x539800+=_0x1a8a25[_0x57daef(0xd5)]*_0x1a8a25[_0x57daef(0x102)];});_0xa0edde&&(_0x539800+=_0x133940[_0x3f4529(0x1a4)]);if(config[_0x3f4529(0xf9)]==='BTC'||config[_0x3f4529(0xf9)]===_0x3f4529(0x183))_0x13c8f6=_0x539800*_0x133940[_0x3f4529(0x1ba)],_0x42f7fd=_0x539800*_0x133940['usd'];else{if(config[_0x3f4529(0xf9)]===_0x3f4529(0xe4)||config['basecoin']===_0x3f4529(0xe8))_0x13c8f6=_0x539800*_0x133940['eur']/_0x133940[_0x3f4529(0x113)],_0x42f7fd=_0x539800;else config['basecoin']===_0x3f4529(0x1a8)&&(_0x13c8f6=_0x539800,_0x42f7fd=_0x539800*_0x133940[_0x3f4529(0x113)]/_0x133940[_0x3f4529(0x1ba)]);}return[_0x539800,_0x13c8f6,_0x42f7fd];}async function getStartingBalances(_0x856224,_0x3cd389=!![]){const _0x490a63=_0x598b6f;if(_0x856224[_0x490a63(0x1ac)]!==0x0){const [_0x18a64e,_0x39f6cb,_0x35dc22]=getPerf(_0x856224[0x0],!![]);let _0x2454b2=[];config['portfolio']['forEach'](_0x4c68be=>{const _0x33a88d=_0x490a63;let _0x319f93=0x0,_0x22db2e;config[_0x33a88d(0xe2)][_0x33a88d(0x19c)](_0x3a187=>{const _0x8830ce=_0x33a88d;let _0x26baf2=_0x3a187[_0x8830ce(0x1a6)]['find'](_0x4fb51a=>_0x4fb51a[_0x8830ce(0xcb)]==_0x4c68be[_0x8830ce(0xcb)]);if(_0x26baf2){_0x319f93+=_0x26baf2[_0x8830ce(0xd5)];if(!_0x22db2e)_0x22db2e=_0x26baf2[_0x8830ce(0x102)];}}),_0x2454b2['push']({'coin':_0x4c68be[_0x33a88d(0xcb)],'number':_0x319f93,'initialprice':_0x22db2e});});const _0x4a6d99={'basecoin':_0x18a64e,'eur':_0x39f6cb,'usd':_0x35dc22,'coins':_0x2454b2};if(_0x3cd389)proxyEmit(_0x490a63(0x1d4),_0x4a6d99);return _0x4a6d99;}}function headlessMode(_0x12b076){const _0x48fd32=_0x598b6f;let _0x4d665b=_0x12b076[_0x48fd32(0x12d)],_0x96edda=_0x12b076[_0x48fd32(0x1bd)],_0x271e7b=[];for(let _0x349531 of _0x4d665b){if(_0x349531[_0x48fd32(0xcb)]!=config[_0x48fd32(0xf9)]){if(_0x349531[_0x48fd32(0xff)]>=_0x96edda/0x64){if(_0x349531[_0x48fd32(0x1d3)])_0x271e7b[_0x48fd32(0x158)](_0x349531);}else{if(_0x349531['delta']<=-_0x96edda/0x64){if(_0x349531[_0x48fd32(0x1d3)])_0x271e7b[_0x48fd32(0x158)](_0x349531);}}}}_0x271e7b[_0x48fd32(0x1ac)]>0x0&&placeOrder(_0x271e7b);}function notifyBalance(_0x252a93){const _0x29112e=_0x598b6f;let _0x16ed28=_0x252a93[_0x29112e(0x12d)],_0x1d3f39=_0x252a93[_0x29112e(0x1bd)],_0x1f73ed=[];for(let _0x5de7e2 of _0x16ed28){if(_0x5de7e2[_0x29112e(0xcb)]!=config[_0x29112e(0xf9)]){if(_0x5de7e2[_0x29112e(0xff)]>=_0x1d3f39/0x64){if(_0x5de7e2['valid'])_0x1f73ed[_0x29112e(0x158)](_0x5de7e2);}else{if(_0x5de7e2['delta']<=-_0x1d3f39/0x64){if(_0x5de7e2[_0x29112e(0x1d3)])_0x1f73ed[_0x29112e(0x158)](_0x5de7e2);}}}}if(_0x1f73ed['length']>0x0){let _0x13c8ef=_0x1f73ed[_0x29112e(0xcf)](_0x3abe88=>_0x3abe88['coin']);_0x13c8ef[_0x29112e(0x100)]();let _0x395751=_0x13c8ef[_0x29112e(0x141)](',\x20');if(lastCoinsToBalance!==_0x395751)logHistory('success',_0x29112e(0xf4)+_0x395751);lastCoinsToBalance=_0x395751;}}function symbolToCoin(_0x46e896){const _0x2664ea=_0x598b6f;let _0x4f9683;if(_0x46e896[_0x2664ea(0x1ef)]('/'+config[_0x2664ea(0xf9)]))_0x4f9683=_0x46e896[_0x2664ea(0x1d9)]('/'+config['basecoin'],'');if(_0x46e896[_0x2664ea(0x1ef)](config[_0x2664ea(0xf9)]+'/'))_0x4f9683=_0x46e896['replace'](config[_0x2664ea(0xf9)]+'/','');return _0x4f9683;}async function unlockOrders(){const _0x1f60e4=_0x598b6f;if(allOrdersPlaced){currentCoins=await getCoins(),validateOrdersState=_0x1f60e4(0x190);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}}async function validateOrders(_0x29d8ac){const _0x406d0f=_0x598b6f;if(_0x29d8ac)validateOrdersState=_0x29d8ac;let _0x24554c=[],_0x4dcdc9=config[_0x406d0f(0x11c)]==_0x406d0f(0x1f6)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x406d0f(0xdd)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(_0x406d0f(0xfa),validateOrdersState),lastOrders['forEach'](_0x44d546=>{const _0x1f50a2=_0x406d0f;let _0x1b17d1=![];_0x44d546[_0x1f50a2(0x136)]>0x0&&(_0x1b17d1=!![]),_0x24554c[_0x1f50a2(0x158)](_0x1b17d1),_0x1b17d1&&config[_0x1f50a2(0x11c)]!=_0x1f50a2(0x1f6)&&logHistory(_0x1f50a2(0x1e4),_0x1f50a2(0x1a2)+_0x44d546[_0x1f50a2(0x169)]+'\x20'+_0x44d546['side']+'\x20#'+formatResult(_0x44d546[_0x1f50a2(0x136)],0x8)+'\x20@'+formatResult(_0x44d546[_0x1f50a2(0x102)],0x8));}),_0x24554c[_0x406d0f(0x19c)]((_0x17c723,_0x1296a1)=>{if(_0x17c723)lastOrders['splice'](_0x1296a1,0x1);});const _0x2852cc=coolingDown?_0x406d0f(0x1fd):_0x406d0f(0x186);if(validateOrdersState==_0x406d0f(0x190))validateOrdersState='ongoing',_0x24554c['includes'](![])?config[_0x406d0f(0x11c)]==_0x406d0f(0x1f6)?logHistory('error',_0x406d0f(0x196)):logHistory(_0x406d0f(0x162),_0x406d0f(0x17c)):await unlockOrders();else{if(validateOrdersState==_0x406d0f(0x1ad)){if(_0x24554c[_0x406d0f(0x1ef)](![])){}else allOrdersPlaced&&(config['ordertype']==_0x406d0f(0x1f6)?logHistory(_0x406d0f(0x138),'Order(s)\x20validated\x20-\x20'+_0x2852cc):logHistory(_0x406d0f(0x138),_0x406d0f(0x125)+_0x2852cc),await unlockOrders());}else{if(validateOrdersState==_0x406d0f(0x116))_0x24554c['includes'](![])&&(config[_0x406d0f(0x11c)]==_0x406d0f(0x1f6)?logHistory(_0x406d0f(0x138),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x406d0f(0x1f5)](_0x4dcdc9*validateOrderInterval/0xea60)+_0x406d0f(0x1c2)+_0x2852cc):(await cancelOrders(),logHistory(_0x406d0f(0x138),_0x406d0f(0x1ab)+Math[_0x406d0f(0x1f5)](_0x4dcdc9*validateOrderInterval/0xea60)+_0x406d0f(0x1c2)+_0x2852cc))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x406d0f(0x1f6))logHistory(_0x406d0f(0x138),'No\x20more\x20open\x20orders\x20-\x20'+_0x2852cc);await unlockOrders();}}}}}async function cancelOrders(){const _0x40c9c1=_0x598b6f;lastOrders[_0x40c9c1(0x19c)](async _0xf450b=>{const _0x2c3ed4=_0x40c9c1;try{const _0x5a067a=await exchange[_0x2c3ed4(0x1b3)](_0xf450b['orderId'],_0xf450b[_0x2c3ed4(0x169)]);}catch(_0xb9e462){if(_0xb9e462[_0x2c3ed4(0xce)]()[_0x2c3ed4(0x1ef)]('OrderNotFound')){}else await handleError(_0xb9e462,_0x2c3ed4(0xd1));}});}async function initCoinResults(){const _0x20eea2=_0x598b6f;let _0x21b2c0=[];config[_0x20eea2(0x12d)][_0x20eea2(0x19c)](_0x3721c7=>{const _0x59a60a=_0x20eea2;if(!_0x3721c7[_0x59a60a(0xf3)]&&_0x3721c7[_0x59a60a(0xcb)]!=config[_0x59a60a(0xf9)]){let _0x9893c=dbCoinResults[_0x59a60a(0x1e8)](_0x59a60a(0x1b4))[_0x59a60a(0x10e)]({'coin':_0x3721c7[_0x59a60a(0xcb)]})[_0x59a60a(0x1c4)]();if(!_0x9893c){const _0x29addf=currentCoins[_0x59a60a(0x10e)](_0x379d8b=>_0x379d8b[_0x59a60a(0xcb)]==_0x3721c7[_0x59a60a(0xcb)]),_0x5a281b=global['ticker'][noslash(_0x3721c7[_0x59a60a(0x169)])];let _0x9fda9a=_0x29addf?_0x29addf['number']:null,_0x46f041=_0x3721c7[_0x59a60a(0x103)]?0x1/_0x5a281b:_0x5a281b,_0x4850b5;config[_0x59a60a(0xe2)][_0x59a60a(0x19c)](_0x4c40dc=>{const _0x22ae1a=_0x59a60a;!_0x4850b5&&(_0x4850b5=_0x4c40dc[_0x22ae1a(0x1a6)]['find'](_0xc3310=>_0xc3310[_0x22ae1a(0xcb)]==_0x3721c7[_0x22ae1a(0xcb)]),_0x4850b5&&(_0x9fda9a=_0x4850b5[_0x22ae1a(0xd5)],_0x46f041=_0x4850b5[_0x22ae1a(0x102)]));}),_0x21b2c0[_0x59a60a(0x158)]({'coin':_0x3721c7['coin'],'number':_0x9fda9a,'price':_0x46f041});}}}),_0x21b2c0['forEach'](_0xb188d9=>{const _0x438304=_0x20eea2,_0x56e096={'coin':_0xb188d9[_0x438304(0xcb)],'number':_0xb188d9[_0x438304(0xd5)],'breakeven':_0xb188d9[_0x438304(0x102)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x438304(0x1e8)](_0x438304(0x1b4))[_0x438304(0x158)](_0x56e096)['write']();});}async function updateCoinResults(_0xfaedc8,_0xac8584=![]){const _0x704758=_0x598b6f;let _0x77bc02,_0x101756,_0x526347,_0x472d20,_0x43e124,_0x85b528,_0x457b41=dbCoinResults[_0x704758(0x1e8)](_0x704758(0x1b4))['find']({'coin':_0xfaedc8[_0x704758(0xcb)]})[_0x704758(0x1c4)]();!_0x457b41&&await initCoinResults();_0xfaedc8[_0x704758(0x103)]&&(_0x85b528={'filled':_0xfaedc8[_0x704758(0x136)]*_0xfaedc8['price'],'amount':_0xfaedc8[_0x704758(0x136)]*_0xfaedc8[_0x704758(0x102)],'side':_0xfaedc8[_0x704758(0x1e0)]=='sell'?_0x704758(0x19e):_0x704758(0x164),'price':0x1/_0xfaedc8[_0x704758(0x102)]},_0xfaedc8={..._0xfaedc8,..._0x85b528});_0xac8584?_0x101756=_0xfaedc8['side']==_0x704758(0x19e)?_0x457b41[_0x704758(0xd5)]+_0xfaedc8[_0x704758(0x136)]:_0x457b41[_0x704758(0xd5)]-_0xfaedc8[_0x704758(0x136)]:_0x101756=await getCoinNumber(_0xfaedc8[_0x704758(0xcb)]);if(_0xfaedc8['fee']&&_0xfaedc8['fee'][_0x704758(0x1b8)]==config[_0x704758(0xf9)])_0x77bc02=_0xfaedc8[_0x704758(0x109)][_0x704758(0x150)];else{if(_0xfaedc8[_0x704758(0x109)]&&_0xfaedc8[_0x704758(0x109)][_0x704758(0x1b8)]==_0x704758(0x188)&&!_0xac8584)_0x77bc02=_0xfaedc8[_0x704758(0x109)][_0x704758(0x150)]*global[_0x704758(0x16e)][_0x704758(0x188)+config['basecoin']];else _0x77bc02=defaultFee*_0xfaedc8[_0x704758(0x136)]*_0xfaedc8[_0x704758(0x102)];}_0xfaedc8[_0x704758(0x1e0)]==_0x704758(0x19e)?(_0x526347=_0x101756!=0x0?(_0x457b41['breakeven']*_0x457b41[_0x704758(0xd5)]+_0xfaedc8[_0x704758(0x102)]*(_0x101756-_0x457b41['number'])+_0x77bc02)/_0x101756:0x0,_0x472d20=_0x457b41[_0x704758(0xfc)]):(_0x526347=_0x101756!=0x0?(_0x457b41[_0x704758(0x15e)]*_0x457b41[_0x704758(0xd5)]-_0xfaedc8[_0x704758(0x102)]*(_0x457b41[_0x704758(0xd5)]-_0x101756)+_0x77bc02)/_0x101756:0x0,_0x472d20=_0x457b41[_0x704758(0xfc)]+(_0xfaedc8['price']-_0x457b41[_0x704758(0x15e)])*_0xfaedc8['filled']);_0x43e124=(_0xfaedc8[_0x704758(0x102)]-_0x526347-_0x77bc02/_0xfaedc8[_0x704758(0x136)])*_0x101756;let _0x7c0af9={'coin':_0xfaedc8['coin'],'number':_0x101756,'breakeven':formatResult(_0x526347,0x8),'realized':formatResult(_0x472d20,0x8),'unrealized':formatResult(_0x43e124,0x8),'fees':formatResult(_0x457b41[_0x704758(0x1ec)]+_0x77bc02,0x8),'sells':_0xfaedc8[_0x704758(0x1e0)]==_0x704758(0x164)?_0x457b41['sells']+0x1:_0x457b41[_0x704758(0x17a)],'buys':_0xfaedc8[_0x704758(0x1e0)]==_0x704758(0x19e)?_0x457b41[_0x704758(0x1dc)]+0x1:_0x457b41[_0x704758(0x1dc)]};dbCoinResults[_0x704758(0x1e8)](_0x704758(0x1b4))[_0x704758(0x10e)]({'coin':_0xfaedc8[_0x704758(0xcb)]})['assign'](_0x7c0af9)[_0x704758(0x15f)]();if(!_0xac8584){if(_0xfaedc8[_0x704758(0x109)]&&_0xfaedc8[_0x704758(0x109)]['currency']==_0x704758(0x188)){const _0x1b6f96=currentCoins['find'](_0x385964=>_0x385964[_0x704758(0xcb)]=='BNB');if(_0x1b6f96){let _0x5e96bd=dbCoinResults[_0x704758(0x1e8)](_0x704758(0x1b4))['find']({'coin':'BNB'})['value']();_0x7c0af9={..._0x5e96bd,'number':_0x1b6f96[_0x704758(0xd5)]},dbCoinResults['get'](_0x704758(0x1b4))[_0x704758(0x10e)]({'coin':'BNB'})[_0x704758(0x13c)](_0x7c0af9)[_0x704758(0x15f)]();}}}}async function placeOrder(_0x24ec09){const _0xd14677=_0x598b6f,_0x48a388=config['ordertype']=='market'?_0xd14677(0x1f6):_0xd14677(0x1dd);if(!lockOrders&&!coolingDown){lockOrders=!![],allOrdersPlaced=![],validateOrdersState=_0xd14677(0x190),lastOrders=[];for(const _0xf969fd of _0x24ec09){let _0x4ef514,_0x48148d,_0x3d739d,_0x188431,_0x3a2947,_0x52b968=_0xf969fd[_0xd14677(0x169)];try{const _0x3950cc=await exchange['fetchTickers']([_0x52b968]),_0x13cf1b=_0x3950cc[_0x52b968];_0x4ef514=_0xf969fd[_0xd14677(0x103)]?0x1/_0xf969fd[_0xd14677(0x1f4)]:_0xf969fd['last'],_0x48148d=_0x13cf1b[_0xd14677(0x152)],_0x3d739d=_0x13cf1b['ask'];_0xf969fd[_0xd14677(0x103)]?(_0x188431=_0xf969fd[_0xd14677(0x1e0)]==_0xd14677(0x19e)?_0xd14677(0x164):_0xd14677(0x19e),_0x3a2947=Math[_0xd14677(0x1db)](_0xf969fd[_0xd14677(0xf2)])/_0x4ef514):(_0x188431=_0xf969fd['side'],_0x3a2947=Math[_0xd14677(0x1db)](_0xf969fd['trade']));_0x48a388==_0xd14677(0x1dd)&&(config[_0xd14677(0x11c)]==_0xd14677(0x198)&&(_0x4ef514=_0x188431==_0xd14677(0x19e)?_0x48148d:_0x3d739d),config[_0xd14677(0x11c)]==_0xd14677(0x126)&&(_0x4ef514=_0x188431==_0xd14677(0x19e)?_0x3d739d:_0x48148d));_0x3a2947=formatResult(_0x3a2947,0x8),_0x4ef514=formatResult(_0x4ef514,0x8);const _0x45d2d4=await exchange[_0xd14677(0x192)](_0x52b968,_0x48a388,_0x188431,_0x3a2947,_0x4ef514);lastOrders[_0xd14677(0x158)]({'orderId':_0x45d2d4['id'],'symbol':_0x52b968,'coin':_0xf969fd[_0xd14677(0xcb)],'side':_0x188431,'reverse':_0xf969fd[_0xd14677(0x103)],'amount':_0x45d2d4[_0xd14677(0x15d)],'filled':0x0,'price':_0x45d2d4['price'],'fee':_0x45d2d4['fee']});const _0x12322d=_0x188431==_0xd14677(0x164)?config['emojisell']?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0xd14677(0xf8)]?String[_0xd14677(0x1b6)]('0x'+config[_0xd14677(0xf8)])+'\x20':'',_0x124631=_0x48a388==_0xd14677(0x1f6)?'Market':config[_0xd14677(0x11c)]==_0xd14677(0x198)?_0xd14677(0x153):_0xd14677(0x1f7);if(_0x48a388==_0xd14677(0x1f6))logHistory(_0xd14677(0x1e4),''+_0x12322d+_0x124631+_0xd14677(0xd8)+_0x52b968+'\x20'+_0x188431+'\x20#'+formatResult(_0x45d2d4['filled'],0x8)+'\x20@'+formatResult(_0x45d2d4[_0xd14677(0x102)],0x8));else logHistory(_0xd14677(0x1e4),''+_0x12322d+_0x124631+_0xd14677(0xd8)+_0x52b968+'\x20'+_0x188431+'\x20#'+formatResult(_0x45d2d4[_0xd14677(0x15d)],0x8)+'\x20@'+formatResult(_0x45d2d4[_0xd14677(0x102)],0x8));let _0x9bb02c=currentCoins['find'](_0x523e16=>_0x523e16[_0xd14677(0xcb)]==_0xf969fd[_0xd14677(0xcb)]);_0x9bb02c[_0xd14677(0x168)]=_0xd14677(0x1fa);if(config[_0xd14677(0x1d0)]!=0x0){let _0x2a3d79=null;if(cooldownTracker[_0xd14677(0x1ac)]==config[_0xd14677(0x1d0)]-0x1)_0x2a3d79=cooldownTracker[_0xd14677(0x17d)]();const _0x2c1861=getTimeStamp();cooldownTracker[_0xd14677(0x158)](_0x2c1861);if(_0x2a3d79){const _0x59bfbe=fns[_0xd14677(0x1af)](new Date(_0x2c1861),new Date(_0x2a3d79));if(_0x59bfbe<cooldownInterval){logHistory(_0xd14677(0x162),'Executed\x20'+config[_0xd14677(0x1d0)]+_0xd14677(0x184)+cooldownInterval/0x3c+_0xd14677(0x117)+cooldownPeriod/(0xe10*0x3e8)+_0xd14677(0x191)),coolingDown=!![];break;}}}}catch(_0x2e63f8){if(_0x2e63f8[_0xd14677(0xce)]()['includes'](_0xd14677(0x1d5)))logHistory('error',_0xd14677(0x171)+_0x52b968);else{if(_0x2e63f8[_0xd14677(0xce)]()[_0xd14677(0x1ef)]('Invalid\x20quantity'))logHistory(_0xd14677(0x162),_0xd14677(0x11f)+_0x52b968);else await handleError(_0x2e63f8,'placeOrder()',_0x52b968);}}}allOrdersPlaced=!![],setTimeout(function(){validateOrders();},0x1388);const _0x5c9967=config[_0xd14677(0x11c)]==_0xd14677(0x1f6)?validateOrderTimeout*0x3c*0x3e8:config[_0xd14677(0xdd)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5c9967),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xd14677(0x138),_0xd14677(0xc9)));}else{if(coolingDown)!config[_0xd14677(0x195)]&&logHistory(_0xd14677(0x162),_0xd14677(0xeb));else lockOrders&&(!config[_0xd14677(0x195)]&&(config[_0xd14677(0x11c)]==_0xd14677(0x1f6)?logHistory(_0xd14677(0x162),_0xd14677(0x1d7)):logHistory(_0xd14677(0x162),_0xd14677(0x1cd))));}}function restoreOrders(){const _0x488f87=_0x598b6f;let _0x369ee0;lockOrders=!![],validateOrdersState=_0x488f87(0x1ad),currentCoins[_0x488f87(0x19c)](_0x2789e3=>{const _0x5e296b=_0x488f87,_0x499c99=allOpenOrders['find'](_0x11d8ea=>_0x11d8ea[_0x5e296b(0x169)]==_0x2789e3[_0x5e296b(0x169)]);_0x499c99&&(lastOrders[_0x5e296b(0x158)]({'orderId':_0x499c99['id'],'symbol':_0x2789e3[_0x5e296b(0x169)],'coin':_0x2789e3[_0x5e296b(0xcb)],'side':_0x499c99['side'],'reverse':_0x2789e3['reverse'],'amount':_0x499c99['amount'],'filled':0x0,'price':_0x499c99[_0x5e296b(0x102)],'fee':_0x499c99[_0x5e296b(0x109)]}),_0x2789e3['orderstatus']=_0x5e296b(0x1fa),_0x369ee0=_0x499c99[_0x5e296b(0x16a)]);}),allOrdersPlaced=!![];const _0x10626f=new Date()[_0x488f87(0x1c8)](),_0x30e6d6=config[_0x488f87(0x11c)]==_0x488f87(0x1f6)?validateOrderTimeout*0x3c*0x3e8:config[_0x488f87(0xdd)]*0x3c*0x3e8;if(_0x369ee0+_0x30e6d6>_0x10626f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1dd78e=_0x488f87;validateOrders(_0x1dd78e(0x116));},_0x369ee0+_0x30e6d6-_0x10626f);}else validateOrders(_0x488f87(0x116));}function sendPortfolioTelegram(){const _0xa557b7=_0x598b6f,_0x28373a=[_0xa557b7(0x1a8),_0xa557b7(0xe4),_0xa557b7(0xe8)],_0x4f4450=_0x28373a[_0xa557b7(0x1ef)](config[_0xa557b7(0xf9)])?0x2:0x8;let _0x4fcfc2='';if(config[_0xa557b7(0x15c)])_0x4fcfc2=config[_0xa557b7(0x13b)]+_0xa557b7(0x1d1);else _0x4fcfc2=_0xa557b7(0xfb)+botID+'\x20portfolio:\x20\x0a\x0a';_0x4fcfc2+=_0xa557b7(0x124),_0x4fcfc2+=_0xa557b7(0x185),_0x4fcfc2+=_0xa557b7(0x18f),currentCoins[_0xa557b7(0x19c)](_0x2db627=>{const _0x350e7a=_0xa557b7;_0x4fcfc2+=_0x2db627['coin'][_0x350e7a(0x14c)](0x7)+'|\x20'+formatPad(_0x2db627['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2db627[_0x350e7a(0x154)],0x2,0x6)+'|\x20'+formatPad(_0x2db627[_0x350e7a(0xff)]*0x64,0x2,0x6)+'\x0a';}),_0x4fcfc2+=_0xa557b7(0x1c1),process[_0xa557b7(0x146)]({'telegrammsg':_0x4fcfc2},_0x4582fa=>{});}function formatPad(_0x25a617,_0x48cff8,_0x4becbb){const _0x12e690=_0x598b6f,_0x3f0f35=formatResultString(_0x25a617,_0x48cff8);return _0x3f0f35?_0x3f0f35[_0x12e690(0x1a5)](_0x4becbb):''[_0x12e690(0x1a5)](_0x4becbb);}function logHistory(_0x10c081,_0x5890e0,_0x41641a=''){const _0x2a9f2f=_0x598b6f;let _0x4830a5={'time':getTimeStamp(),'type':_0x10c081,'event':_0x5890e0};dbLogs['get'](_0x2a9f2f(0x1aa))[_0x2a9f2f(0x158)](_0x4830a5)[_0x2a9f2f(0x15f)]();if(_0x41641a=='')_0x41641a=_0x5890e0;proxyEmit(_0x2a9f2f(0x12c),{'log':_0x4830a5,'summary':_0x41641a}),process[_0x2a9f2f(0x146)]({'telegram':{..._0x4830a5,'botname':config[_0x2a9f2f(0x13b)],'showname':config['showname']}},_0x538bbc=>{}),logging(''+_0x4830a5[_0x2a9f2f(0x12c)]);}function emitHistory(_0x6e44fd={}){const _0x581f65=_0x598b6f;Object[_0x581f65(0x123)](_0x6e44fd)[_0x581f65(0x1ac)]==0x0&&(_0x6e44fd={'type':['order',_0x581f65(0x12c)],'event':'','page':0x1});if(_0x6e44fd[_0x581f65(0x1c0)]['includes'](_0x581f65(0x12c)))_0x6e44fd[_0x581f65(0x1c0)][_0x581f65(0x13a)](_0x6e44fd[_0x581f65(0x1c0)][_0x581f65(0x14a)](_0x581f65(0x12c)),0x1,'error','success');if(dbLogs[_0x581f65(0x179)]('logs')[_0x581f65(0x1c4)]()){let _0x479668=dbLogs[_0x581f65(0x1e8)](_0x581f65(0x1aa))[_0x581f65(0x165)](_0x152a99=>{const _0x4b2dff=_0x581f65;if(_0x6e44fd[_0x4b2dff(0x1c0)][_0x4b2dff(0x1ac)]==0x0)return![];else return _0x6e44fd[_0x4b2dff(0x1c0)][_0x4b2dff(0x1ef)](_0x152a99['type']);})[_0x581f65(0x165)](_0x3aaeaf=>{const _0x501f36=_0x581f65;if(_0x6e44fd[_0x501f36(0x12c)]=='')return!![];else return _0x3aaeaf[_0x501f36(0x12c)]['toLowerCase']()[_0x501f36(0x1ef)](_0x6e44fd[_0x501f36(0x12c)][_0x501f36(0x1e5)]());})[_0x581f65(0x170)](_0x581f65(0x1d6)),_0x588bba=_0x479668[_0x581f65(0x1c4)]()['length'];_0x479668=_0x479668[_0x581f65(0x103)]()[_0x581f65(0xf5)]((_0x6e44fd['page']-0x1)*logPageSize,_0x6e44fd[_0x581f65(0x18b)]*logPageSize-0x1)[_0x581f65(0x103)]()['value'](),proxyEmit(_0x581f65(0x156),{'logs':_0x479668,'total':_0x588bba});}else proxyEmit(_0x581f65(0x156),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3bc729){const _0xc04647=_0x598b6f;if(dbLogs['has'](_0xc04647(0x1aa))[_0xc04647(0x1c4)]()){const _0x17e706=dbLogs[_0xc04647(0x1e8)](_0xc04647(0x1aa))['sortBy'](_0xc04647(0x1d6))['filter'](_0x56afba=>{const _0x416abc=_0xc04647;return _0x56afba[_0x416abc(0x1c0)]==_0x416abc(0x1e4);})['value']();dbLogs[_0xc04647(0x1e8)](_0xc04647(0x1aa))['remove']()[_0xc04647(0x15f)](),dbLogs['get'](_0xc04647(0x1aa))[_0xc04647(0x13c)](_0x17e706)[_0xc04647(0x15f)](),emitHistory(_0x3bc729);}}async function pauseBot(_0xc11ac=''){const _0x49b75d=_0x598b6f,_0x136c02=new Date()[_0x49b75d(0x1c8)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x136c02-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x49b75d(0x146)]({'stop':_0x49b75d(0x149)},_0x3ffb1c=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0xc11ac)_0xc11ac+=_0x49b75d(0x10b);logHistory('error',_0xc11ac+_0x49b75d(0x1f1)+pauseBotInterval/0xea60+_0x49b75d(0xca)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){process['send']({'stop':'kill'},_0x1b0bb4=>{}),await sleep(0x7d0);}async function handleError(_0x547882,_0x5dfda7,_0xe300f0=''){const _0x286fa3=_0x598b6f;if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)](_0x286fa3(0x19f)))await pauseBot(_0x286fa3(0xd4));else{if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)](_0x286fa3(0x1ea)))await pauseBot(_0x286fa3(0x134));else{if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)]('RequestTimeout'))await pauseBot(_0x286fa3(0xe5));else{if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)]('API-key\x20format\x20invalid'))logHistory(_0x286fa3(0x162),_0x5dfda7+_0x286fa3(0x1e2)),logHistory(_0x286fa3(0x162),_0x286fa3(0x1d2)),await killBot();else{if(_0x547882['toString']()[_0x286fa3(0x1ef)](_0x286fa3(0x127)))logHistory(_0x286fa3(0x162),_0x5dfda7+_0x286fa3(0x159)),logHistory(_0x286fa3(0x162),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x547882[_0x286fa3(0xce)]()['includes'](_0x286fa3(0x1bc)))logHistory(_0x286fa3(0x162),_0x5dfda7+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory('error',_0x286fa3(0x1d2)),await killBot();else{if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)](_0x286fa3(0x178)))logHistory(_0x286fa3(0x162),_0x5dfda7+'\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x286fa3(0x162),_0x286fa3(0x1d2)),await killBot();else{if(_0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)](_0x286fa3(0x175)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process[_0x286fa3(0x146)]({'stop':_0x286fa3(0x149)},_0x593c02=>{});else _0x547882[_0x286fa3(0xce)]()[_0x286fa3(0x1ef)](_0x286fa3(0xf6))?logHistory(_0x286fa3(0x162),_0x5dfda7+_0x286fa3(0xda)+_0xe300f0):(logging(_0x5dfda7+_0x286fa3(0x112),_0x547882),await pauseBot(_0x286fa3(0x1a3)));}}}}}}}}function formatResult(_0x51a5ef,_0x3ea5d4){const _0x20f765=_0x598b6f;return parseFloat(_0x51a5ef[_0x20f765(0x181)](_0x3ea5d4));}function formatResultTruncate(_0x2f0631,_0x43b658){const _0x46f818=_0x598b6f;let _0x57def9=formatResultString(_0x2f0631,0xa),_0x393d3a=_0x57def9[_0x46f818(0x14a)]('.');return _0x393d3a!=-0x1&&(_0x57def9=_0x57def9[_0x46f818(0xf5)](0x0,_0x393d3a+_0x43b658+0x1)),Number(_0x57def9);}function formatResultString(_0x333414,_0x2c1283){const _0x4d19bd=_0x598b6f;let _0xedf82d;if(!(''+_0x333414)[_0x4d19bd(0x1ef)]('e'))_0xedf82d=+(Math[_0x4d19bd(0x1f5)](_0x333414+'e+'+_0x2c1283)+'e-'+_0x2c1283);else{let _0x3767a5=(''+_0x333414)[_0x4d19bd(0xf7)]('e'),_0x70e02a='';+_0x3767a5[0x1]+_0x2c1283>0x0&&(_0x70e02a='+'),_0xedf82d=+(Math[_0x4d19bd(0x1f5)](+_0x3767a5[0x0]+'e'+_0x70e02a+(+_0x3767a5[0x1]+_0x2c1283))+'e-'+_0x2c1283);}return Number(_0xedf82d)['toFixed'](_0x2c1283);}function logging(_0x577ed2,_0x2c3642=''){const _0x1b79bb=_0x598b6f;if(config['showname'])console[_0x1b79bb(0x10a)](getTimeStamp()+':\x20'+config[_0x1b79bb(0x13b)]+'\x20>\x20'+_0x577ed2,_0x2c3642);else console[_0x1b79bb(0x10a)](getTimeStamp()+_0x1b79bb(0x1fb)+botID+'\x20>\x20'+_0x577ed2,_0x2c3642);}function getServerTime(){const _0x134f43=_0x598b6f,_0x111a45=new Date();return _0x111a45['getFullYear']()+'/'+(_0x111a45[_0x134f43(0x16f)]()+0x1)[_0x134f43(0xce)]()['padStart'](0x2,'0')+'/'+_0x111a45[_0x134f43(0x163)]()[_0x134f43(0xce)]()[_0x134f43(0x1a5)](0x2,'0')+'\x20'+_0x111a45[_0x134f43(0xe1)]()['toString']()['padStart'](0x2,'0')+':'+_0x111a45[_0x134f43(0xe9)]()[_0x134f43(0xce)]()[_0x134f43(0x1a5)](0x2,'0')+':'+_0x111a45['getSeconds']()[_0x134f43(0xce)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x485c27=_0x598b6f,_0x118ebd=shiftedTime();return _0x118ebd[_0x485c27(0xe0)]()+'/'+(_0x118ebd['getMonth']()+0x1)[_0x485c27(0xce)]()['padStart'](0x2,'0')+'/'+_0x118ebd[_0x485c27(0x163)]()['toString']()[_0x485c27(0x1a5)](0x2,'0')+'\x20'+_0x118ebd['getHours']()['toString']()[_0x485c27(0x1a5)](0x2,'0')+':'+_0x118ebd['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x118ebd[_0x485c27(0x1c9)]()['toString']()[_0x485c27(0x1a5)](0x2,'0');}function getDate(){const _0x1b4cc4=_0x598b6f,_0x45bf01=shiftedTime();return _0x45bf01['getFullYear']()+'/'+(_0x45bf01['getMonth']()+0x1)[_0x1b4cc4(0xce)]()[_0x1b4cc4(0x1a5)](0x2,'0')+'/'+_0x45bf01[_0x1b4cc4(0x163)]()['toString']()[_0x1b4cc4(0x1a5)](0x2,'0');}function getHour(){const _0x191c20=_0x598b6f,_0x3017cc=shiftedTime();return _0x3017cc[_0x191c20(0xe1)]()[_0x191c20(0xce)]()[_0x191c20(0x1a5)](0x2,'0');}function sleep(_0x1470c3){return new Promise(_0x57af74=>setTimeout(_0x57af74,_0x1470c3));}function shiftedTime(){const _0x12bebf=_0x598b6f,_0x4f3714=new Date();let _0xbe447=_0x4f3714;if(config&&config['timeshift']!==0x0)_0xbe447=fns[_0x12bebf(0x114)](_0x4f3714,{'hours':config[_0x12bebf(0x177)]});return _0xbe447;}