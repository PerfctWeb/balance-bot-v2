const _0x48ecc3=_0x20ca;(function(_0x49af1a,_0x413874){const _0x338410=_0x20ca,_0x10b9ac=_0x49af1a();while(!![]){try{const _0xc66e39=parseInt(_0x338410(0x277))/0x1+parseInt(_0x338410(0x351))/0x2+parseInt(_0x338410(0x29b))/0x3*(parseInt(_0x338410(0x2f3))/0x4)+parseInt(_0x338410(0x379))/0x5*(parseInt(_0x338410(0x1f9))/0x6)+-parseInt(_0x338410(0x234))/0x7+-parseInt(_0x338410(0x1dc))/0x8+-parseInt(_0x338410(0x341))/0x9;if(_0xc66e39===_0x413874)break;else _0x10b9ac['push'](_0x10b9ac['shift']());}catch(_0x33ee9c){_0x10b9ac['push'](_0x10b9ac['shift']());}}}(_0x5c17,0x9bd49));const _0xdac7ca=function(){let _0x2288a0=!![];return function(_0x255158,_0x481aeb){const _0x4bbd45=_0x2288a0?function(){const _0x3bc3a8=_0x20ca;if(_0x481aeb){const _0x55c4d2=_0x481aeb[_0x3bc3a8(0x1fe)](_0x255158,arguments);return _0x481aeb=null,_0x55c4d2;}}:function(){};return _0x2288a0=![],_0x4bbd45;};}(),_0x1cd22f=_0xdac7ca(this,function(){const _0x1ed8db=_0x20ca;return _0x1cd22f[_0x1ed8db(0x26a)]()['search'](_0x1ed8db(0x2f9))[_0x1ed8db(0x26a)]()[_0x1ed8db(0x22d)](_0x1cd22f)[_0x1ed8db(0x319)]('(((.+)+)+)+$');});_0x1cd22f();'use strict';const ccxt=require(_0x48ecc3(0x296)),low=require('lowdb'),FileSync=require(_0x48ecc3(0x29f)),fs=require('fs'),fns=require(_0x48ecc3(0x2c0)),forge=require('node-forge'),util=require(_0x48ecc3(0x20f)),argv=require(_0x48ecc3(0x26b))(process[_0x48ecc3(0x2a0)][_0x48ecc3(0x240)](0x2))[_0x48ecc3(0x2a0)],path=require('path'),axios=require(_0x48ecc3(0x1f5));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x48ecc3(0x354),_0x48ecc3(0x266),_0x48ecc3(0x20e),_0x48ecc3(0x311),_0x48ecc3(0x2f5),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x48ecc3(0x290)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x48ecc3(0x355)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x48ecc3(0x236)+pauseBotInterval/0xea60+_0x48ecc3(0x2d9),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8;let enableFiatToggle;const serverversion=require(_0x48ecc3(0x1ec))[_0x48ecc3(0x2e8)],environment=require('./version.json')[_0x48ecc3(0x36c)]||'production',botID=process['argv'][0x2]||_0x48ecc3(0x392),pattern=/^[0-9]{3}$/;!pattern[_0x48ecc3(0x2c4)](botID)&&(console[_0x48ecc3(0x384)](_0x48ecc3(0x2ba)+botID+_0x48ecc3(0x206)),killBot());const userID=process[_0x48ecc3(0x2a0)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x48ecc3(0x1e5),logspath=userID?_0x48ecc3(0x37d)+userID+'/':_0x48ecc3(0x37d),loggerfile=fs[_0x48ecc3(0x35f)](logspath+_0x48ecc3(0x302),{'flags':'a'});function _0x20ca(_0x1a92fd,_0x3188d9){const _0x313f62=_0x5c17();return _0x20ca=function(_0x1cd22f,_0xdac7ca){_0x1cd22f=_0x1cd22f-0x1da;let _0x5c17a5=_0x313f62[_0x1cd22f];return _0x5c17a5;},_0x20ca(_0x1a92fd,_0x3188d9);}!fs[_0x48ecc3(0x2ac)](configpath)&&fs[_0x48ecc3(0x396)](configpath);!fs[_0x48ecc3(0x2ac)](logspath)&&fs[_0x48ecc3(0x396)](logspath);const configfile=configpath+_0x48ecc3(0x1f3)+botID+_0x48ecc3(0x242),logfile=configpath+_0x48ecc3(0x1f3)+botID+'-events.json',performancefile=configpath+_0x48ecc3(0x1f3)+botID+'-performance.json',coinresultsfile=configpath+_0x48ecc3(0x1f3)+botID+'-results.json',settingsfile=configpath+_0x48ecc3(0x2bc),securefile=configpath+_0x48ecc3(0x307),configbackuppath=configpath+_0x48ecc3(0x20b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x48ecc3(0x1e3)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x48ecc3(0x1ea)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x48ecc3(0x1ea)]({'bot':[],'version':serverversion})[_0x48ecc3(0x1e3)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x48ecc3(0x1ea)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x431eac=>{const _0xb4c5e4=_0x48ecc3;console[_0xb4c5e4(0x384)](_0x431eac);},'simple':_0x251253=>{const _0x2cc835=_0x48ecc3;console[_0x2cc835(0x384)](_0x251253),loggerfile[_0x2cc835(0x1e3)](util[_0x2cc835(0x338)](_0x251253)+'\x0a');},'full':async(_0x11e30b,_0x2d2861='')=>{const _0x4b0282=_0x48ecc3;let _0x4654a2;if(config[_0x4b0282(0x350)])_0x4654a2=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x11e30b;else _0x4654a2=getTimeStamp()+':\x20Bot\x20'+botID+_0x4b0282(0x21e)+_0x11e30b;console['log'](_0x4654a2),loggerfile[_0x4b0282(0x1e3)](util[_0x4b0282(0x338)](_0x4654a2)+'\x0a'),_0x2d2861&&(console['log'](_0x2d2861),loggerfile[_0x4b0282(0x1e3)](util[_0x4b0282(0x338)](_0x2d2861)+'\x0a'));},'debug':async(_0x4d42dc,_0x5e3684='')=>{const _0x46a616=_0x48ecc3;let _0x53d4ea;if(config[_0x46a616(0x350)])_0x53d4ea=getTimeStamp()+':\x20'+config[_0x46a616(0x20c)]+_0x46a616(0x314)+_0x4d42dc;else _0x53d4ea=getTimeStamp()+_0x46a616(0x22a)+botID+_0x46a616(0x314)+_0x4d42dc;if(debugging)console['log'](_0x53d4ea);loggerfile[_0x46a616(0x1e3)](util[_0x46a616(0x338)](_0x53d4ea)+'\x0a');if(_0x5e3684){if(debugging)console[_0x46a616(0x384)](_0x5e3684);loggerfile[_0x46a616(0x1e3)](util[_0x46a616(0x338)](_0x5e3684)+'\x0a');}}};process['on']('uncaughtException',function(_0x4b2c64){const _0x348819=_0x48ecc3;handleError(_0x4b2c64,_0x348819(0x247));});settings[_0x48ecc3(0x256)]!=config[_0x48ecc3(0x256)]&&updateTimeshift(settings[_0x48ecc3(0x256)]);settings[_0x48ecc3(0x2cb)]!=config[_0x48ecc3(0x2cb)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x48ecc3(0x382)]&&!config['marketcapApi']||!settings[_0x48ecc3(0x382)]&&config[_0x48ecc3(0x382)])&&updateMarketcapApi(settings[_0x48ecc3(0x382)]);process[_0x48ecc3(0x273)]({'started':_0x48ecc3(0x353)},_0x2924ed=>{}),initializeProcessListeners();function proxyEmit(_0x3d75cf,_0x442714=null){process['send']({'function':_0x3d75cf,'args':_0x442714},_0x67a90f=>{});}function initializeProcessListeners(){process['on']('message',_0x9c4903=>{const _0x1461b4=_0x20ca;switch(Object[_0x1461b4(0x2b2)](_0x9c4903)[0x0]){case _0x1461b4(0x256):_0x9c4903[_0x1461b4(0x256)]!=undefined&&(settings[_0x1461b4(0x256)]=_0x9c4903[_0x1461b4(0x256)],updateTimeshift(settings[_0x1461b4(0x256)]));break;case'onepagemode':_0x9c4903['onepagemode']!=undefined&&(settings[_0x1461b4(0x2cb)]=_0x9c4903[_0x1461b4(0x2cb)],updateOnepagemode(settings[_0x1461b4(0x2cb)]));break;case _0x1461b4(0x382):_0x9c4903[_0x1461b4(0x382)]!=undefined&&(settings[_0x1461b4(0x382)]=_0x9c4903[_0x1461b4(0x382)],updateMarketcapApi(settings[_0x1461b4(0x382)]));break;case _0x1461b4(0x32c):_0x9c4903[_0x1461b4(0x32c)]!=undefined&&(bots=JSON[_0x1461b4(0x2a2)](_0x9c4903[_0x1461b4(0x32c)]),proxyEmit(_0x1461b4(0x32c),bots));break;case _0x1461b4(0x2ff):switch(_0x9c4903[_0x1461b4(0x2ff)]){case _0x1461b4(0x2af):initclient();break;case _0x1461b4(0x287):toggleBotMode();break;case _0x1461b4(0x369):emitHistory(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x1e4):deleteHistoryAlerts(_0x9c4903['args']);break;case _0x1461b4(0x2c1):getPortfolio(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x33f):storeConfiguration(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x347):storeHeadless(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x261):storeFiat(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x2e6):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x9c4903[_0x1461b4(0x3a5)]);break;case _0x1461b4(0x385):cancelLoading();break;case'showConfig':showConfig();break;case _0x1461b4(0x2f1):sendMetricsTelegram();break;case _0x1461b4(0x221):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x7cd6a=![]){const _0x406f95=_0x48ecc3;logger[_0x406f95(0x2ee)](_0x406f95(0x33d)+(_0x7cd6a?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0x406f95(0x274)+config[_0x406f95(0x1df)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x7cd6a)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x406f95(0x38d)]!=''&&config['apiKey']!=_0x406f95(0x31a)){loadingProgress=0x0;_0x7cd6a&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x406f95(0x1e8),emittedConfiguration()),initialPerformanceStored=![]);const _0x10006e=await getCoins();[currentCoins,currentCoinsAll]=_0x10006e,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x406f95(0x34b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x406f95(0x2d1)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1a97f2=![]){const _0x244be8=_0x48ecc3;logger[_0x244be8(0x2ee)]('Resuming\x20('+(_0x1a97f2?_0x244be8(0x32b):_0x244be8(0x2d7))+_0x244be8(0x360)+config[_0x244be8(0x1df)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1a97f2){getBalances();return;}coinsLoaded=![];if(config[_0x244be8(0x38d)]!=''&&config[_0x244be8(0x38d)]!=_0x244be8(0x31a)){loadingProgress=0x1;const _0x3a90b2=await getCoins();[currentCoins,currentCoinsAll]=_0x3a90b2,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x244be8(0x2ee)](_0x244be8(0x34b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x244be8(0x2d1)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x77b560){const _0x1ab707=_0x48ecc3;let _0x1c34a2=![];if(_0x77b560)_0x1c34a2=!![];let _0x46c720;_0x1c34a2?_0x46c720=_0x77b560['map'](_0x15fa4f=>_0x15fa4f[_0x1ab707(0x325)]):_0x46c720=currentCoinsAll[_0x1ab707(0x23e)](_0x9a5b2a=>_0x9a5b2a[_0x1ab707(0x325)]);if(!config[_0x1ab707(0x382)]||!_0x1c34a2&&!config[_0x1ab707(0x21b)]||_0x46c720['length']==0x0)return;let _0x429b32=null;try{_0x429b32=await axios[_0x1ab707(0x3a2)](_0x1ab707(0x322),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1ab707(0x382)]},'params':{'symbol':_0x46c720['toString']()}});}catch(_0x5a3b9e){_0x429b32=null,_0x5a3b9e[_0x1ab707(0x26a)]()['includes'](_0x1ab707(0x2aa))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x1ab707(0x1e8),emittedConfiguration()),logHistory(_0x1ab707(0x321),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x1ab707(0x321),_0x1ab707(0x2f2)+schedulerInterval/(0x3c*0x3e8)+_0x1ab707(0x2d9)),logger['debug'](_0x1ab707(0x2a1),_0x5a3b9e[_0x1ab707(0x26a)]()+'\x20-\x20'+_0x5a3b9e['code']));}if(_0x429b32){let _0x5627e7=0x0;const _0x49cc6c=_0x429b32[_0x1ab707(0x2c2)];_0x46c720['forEach'](_0x1eca59=>{const _0x4bc025=_0x1ab707;if(_0x49cc6c[_0x4bc025(0x2c2)][_0x1eca59][0x0])_0x5627e7+=_0x49cc6c[_0x4bc025(0x2c2)][_0x1eca59][0x0][_0x4bc025(0x2fc)]['USD'][_0x4bc025(0x2d0)];}),_0x46c720[_0x1ab707(0x30a)](_0xeb22e9=>{const _0x43380c=_0x1ab707,_0x240483=_0x49cc6c[_0x43380c(0x2c2)][_0xeb22e9][0x0]?_0x49cc6c['data'][_0xeb22e9][0x0][_0x43380c(0x2fc)][_0x43380c(0x354)][_0x43380c(0x2d0)]:0x0;if(_0x1c34a2){const _0x151b43=_0x77b560[_0x43380c(0x21a)](_0x1f750f=>_0x1f750f[_0x43380c(0x325)]==_0xeb22e9);_0x151b43&&(_0x151b43[_0x43380c(0x393)]=_0x240483);}else{const _0x2c1239=currentCoins[_0x43380c(0x21a)](_0x294107=>_0x294107[_0x43380c(0x325)]==_0xeb22e9);_0x2c1239&&(_0x2c1239[_0x43380c(0x393)]=_0x240483);const _0x2a2bfd=currentCoinsAll['find'](_0x3b51c8=>_0x3b51c8[_0x43380c(0x325)]==_0xeb22e9);_0x2a2bfd&&(_0x2a2bfd[_0x43380c(0x393)]=_0x240483);}}),!_0x1c34a2&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x22e37e=_0x48ecc3,_0x1a126a=0x2;let _0x30e683=0x0,_0xa99be3=0x0,_0x2febfa=0x0,_0x12b923=0x0,_0x7d68b9=0x0;config[_0x22e37e(0x258)][_0x22e37e(0x30a)](_0x202654=>{const _0x141997=_0x22e37e;if(!_0x202654[_0x141997(0x376)]){_0x2febfa++,_0x30e683+=_0x202654[_0x141997(0x24f)];if(_0x202654[_0x141997(0x24f)]===-0x1){_0x30e683++;const _0x661624=currentCoinsAll[_0x141997(0x21a)](_0x3d15b9=>_0x3d15b9['coin']==_0x202654[_0x141997(0x325)]);_0x661624&&(_0x12b923+=_0x661624[_0x141997(0x393)],_0x7d68b9+=Math[_0x141997(0x2eb)](_0x661624[_0x141997(0x393)]));}if(_0x202654[_0x141997(0x24f)]!==-0x1)_0xa99be3++;}});let _0x59e67f;const _0x27c1c6=0x64-_0x30e683,_0xaf1b8f=_0x2febfa-_0xa99be3;_0x59e67f=_0xaf1b8f===0x0?_0x30e683:Math[_0x22e37e(0x2b8)](0x64,_0x30e683),config['portfolio'][_0x22e37e(0x30a)](_0x25dc84=>{const _0x5afe0b=_0x22e37e,_0x3bf2f4=currentCoinsAll[_0x5afe0b(0x21a)](_0x2380ab=>_0x2380ab[_0x5afe0b(0x325)]==_0x25dc84[_0x5afe0b(0x325)]);_0x3bf2f4&&(_0x25dc84['marketcap']=_0x3bf2f4[_0x5afe0b(0x393)]);if(!_0x25dc84[_0x5afe0b(0x376)]){if(_0x59e67f<=0x64){if(_0x25dc84[_0x5afe0b(0x24f)]===-0x1){if(_0x12b923!==0x0&&config['marketcapEnabled']){if(_0x3bf2f4){if(config[_0x5afe0b(0x21b)]==_0x5afe0b(0x393))_0x25dc84[_0x5afe0b(0x20a)]=(_0x27c1c6/(_0x12b923/_0x3bf2f4[_0x5afe0b(0x393)]))[_0x5afe0b(0x271)](_0x1a126a);else config[_0x5afe0b(0x21b)]==_0x5afe0b(0x332)&&(_0x25dc84[_0x5afe0b(0x20a)]=(_0x27c1c6/(_0x7d68b9/Math[_0x5afe0b(0x2eb)](_0x3bf2f4[_0x5afe0b(0x393)])))[_0x5afe0b(0x271)](_0x1a126a));}}}}}}),updateConfig();}function updateConfig(){const _0x384eac=_0x48ecc3;let _0x1fce21=dbConfig[_0x384eac(0x3a2)](_0x384eac(0x220))[_0x384eac(0x21a)]({'botID':botID})[_0x384eac(0x237)]();_0x1fce21&&dbConfig[_0x384eac(0x3a2)](_0x384eac(0x220))[_0x384eac(0x21a)]({'botID':botID})[_0x384eac(0x37e)](config)[_0x384eac(0x1e3)]();}function logMemory(){const _0x47f0fd=_0x48ecc3;if(environment!=_0x47f0fd(0x24e))return;const _0x5cdf67=process[_0x47f0fd(0x31c)]()[_0x47f0fd(0x2b0)]/0x400/0x400;logger[_0x47f0fd(0x2ee)](_0x47f0fd(0x208)+process['pid']+_0x47f0fd(0x32e)+formatResult(_0x5cdf67,0x1)+'\x20MB');}function _0x5c17(){const _0x4ca52b=['\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','(((.+)+)+)+$','2.6.0','************','quote','buy','type','function','1\x20-\x20Handle\x20open\x20orders','\x20|\x20','/output-000.log','-events.json','watchTrades()','Pausing\x20for\x20','min','bb-secure.json','active','\x20|\x20lock\x20orders:\x20','forEach','balancing\x20resumed','Avoiding\x20continuous\x20order\x20attempts','Bitget','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startprice','openOrders','USDT','BTC','2\x20-\x20Validate\x20orders:\x20','\x20>\x20[DEBUG]\x20','starting-balances','target','delta','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','search','***','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','memoryUsage','net-basecoin','Initiating\x20bot\x20restart','offset','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','error','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','API-key\x20format\x20invalid','coin','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','currency','added','\x20change','toLowerCase','quick','bots','entries','\x20uses\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','2\x20-\x20Handled\x20open\x20orders','sha256','marketcapsqrt','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','realized','getSeconds','timeout','eur','format','EUR','includes','side','success','Reset\x20|\x20','trade','storeConfiguration','fetchTicker','17821584JdvAot','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','/USDT','reverse','Error\x20while\x20deleting\x20files:\x20','secure','storeHeadless','datetime','1\x20-\x20FILLED\x20known\x20order:\x20','last','Loading\x20completed','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','split','pop','basecoin','showname','1956890otQPdx','fetchTickers()','running','USD','UNLOCKED','Error\x20in\x20loadSymbols():\x20','sort','Bot\x20','\x20|\x20highest\x20fee:\x20','getOpenOrders()','Resetting\x20bot\x20history','amountToPrecision','logs','Resetting\x20coin\x20results:\x20','createWriteStream',')\x20|\x20exchange:\x20','\x20API\x20key\x20is\x20invalid','watchTrades','pro','headless','cooldown','liquidity','-performance.json','fee','emitHistory','NetworkError','date','environment','full','fromCodePoint','Order\x20is\x20invalid:\x20',':\x20timer\x20>','startnumber','\x20>\x20details:','Symbol(s):\x20','Limit\x20(low-margin)','recreate','excluded','getMonth','token\x20is\x20expired','485fUqRNS','UNLOCKING','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','./logs/','assign','.json','remainingSymbols','fetchTickers','marketcapApi','cancelOrders()','log','cancelLoading','\x20exchange','InvalidOrder','RateLimitExceeded','rightTxt','timestamp','AuthenticationError','\x20:\x20','apiKey','\x20API\x20secret\x20is\x20invalid','Fee\x20discount\x20refund\x20detected:\x20','DDoSProtection','orderId','001','marketcap','kill','changes','mkdirSync','request-time','createOrder','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','recreateCoinResults()','stringify','percentage','none','status','buys','balancing\x20resumes\x20when\x20cooldown\x20ends','get','1\x20-\x20FILLED\x20unknown\x20order:\x20','ORDERS.LOCKED','args','yyyy/MM/dd','PermissionDenied','apiSecret','10120mRdyXv','Exception\x20thrown\x20in\x20','Loading\x20symbols','exchange','no\x20open\x20orders','<b>','Cooldown\x20ended\x20-\x20balancing\x20resumed','write','deleteHistoryAlerts','./config/','\x20portfolio:</b>\x20\x0a\x0a','symbol','configuration','RequestTimeout','defaults','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','./version.json','watchTradesForSymbols','cancel','ordertype','closed','privateKey','getMinutes','bot-','InsufficientFunds','axios','amount','<b>Bot\x20','floor','53826ojAKMW','2\x20-\x20handling\x20FILLED\x20order:\x20','time','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Executed\x20','apply','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','limits','sells','bid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','placeOrder()','ask',',\x20must\x20be\x20a\x203\x20digit\x20number','filled','process\x20','Unknown\x20error\x20-\x20check\x20logs','distribution','/backup/','botname','MIN_NOTIONAL','TUSD','util','Manual\x20balancing\x20required','RETRY\x20-\x20Error\x20in\x20','\x20-\x20bot\x20not\x20started','page','valid','Huobipro','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20metrics:</b>\x20\x0a\x0a','market','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','find','marketcapEnabled','Initializing\x20exchange','coins','\x20>\x20','red_yellow_blue','bot','sendPortfolioTelegram','-results.json','threshold','getDate','unlinkSync','2.3.5','add','netoffset','push',':\x20Bot\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Error\x20details\x20(0):','constructor','fiat','Exchange','<pre>','sell','ExchangeError','filter','4133563DhaUlW','getHours','\x20>\x20pausing\x20bot\x20for\x20','value','leftTxt','getTime','Limit\x20(high-margin)','differenceInSeconds','ORDERS.UNLOCKING','order','map','Unknown\x20error:\x20','slice','BNB/','-config.json','RSA-OAEP','1\x20-\x20Unlock\x20orders','change24h','usd','uncaughtException','InvalidNonce','shift','password','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Cryptocom','removed','staging','slider','total','BNB','cancelOrder','customId','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','-------------------------------\x0a','timeshift','event','portfolio','spot','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','create','has','Portfolio\x20change\x20detected:\x20','limit-low','ongoing','remove','storeFiat','\x20attempts','initial','splice','getCoins()','BUSD','Waited\x20','random','canceled','toString','yargs/yargs','padEnd','orderstatus','cloneDeep','limit','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','toFixed','botID','send','\x20|\x20exchange:\x20','autoliquidity','startsWith','183192pdiNkV','sortBy','exchanges','ID:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','event-history','Invalid\x20quantity','LOCKED','2.6.23','set','join','basecoinvalue','isEqual','1\x20-\x20Validate\x20orders:\x20','net-fiat','switch-manual','toggleBotMode','Binance','settings','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20Custom\x20ID:\x20','watchTradesForSymbols()','Bybit','decrypt','must\x20be\x20greater\x20than\x20minimum\x20amount','freeze','fetchOpenOrders','recent20','number','No\x20more\x20open\x20orders\x20-\x20','string','ccxt','portfolio1','%\x20(','emojibuy','replace','59919HyLZYN','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','/EUR','substring','lowdb/adapters/FileSync','argv','Error\x20details:','parse','startdate','ORDERS.UNLOCKED','Initializing\x20exchange:\x20already\x20done','Error\x20in\x20testAPI():\x20','exec','cost','/USD','status\x20code\x20401','round','existsSync','warning','</pre>','initclient','heapUsed','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','keys','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20/\x20','open','Net\x20effect','change','max','initTickers()','Error:\x20Invalid\x20argument\x20','configuration-stored','bb-settings.json','findIndex','loading-canceled','price','date-fns','getPortfolio','data','final','test','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','message','Headless:\x20','Huobi','Block\x20transaction\x20detection:\x20','getFullYear','onepagemode','update-liquidity','loadMarkets','\x20order:\x20','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','market_cap','length','emojisell','progress','highest','Net\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','complete','\x20minutes\x20-\x20','\x20minutes','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','ETH','OnMaintenance','Initializing\x20coin\x20results','portfolio2','balances','performance','PAXG','fetchBalance','indexOf','OrderNotFound','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','resetHistory','Network\x20error\x20details:','version','starting-balance-','recovery','sqrt','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','padStart','debug','apiPassword','abs','sendMetricsTelegram','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','236xgbjnY','RETRY\x20-\x20Problem\x20resolved\x20after\x20','USDC','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','breakeven'];_0x5c17=function(){return _0x4ca52b;};return _0x5c17();}async function startScheduler(){const _0x49d541=shiftedTime()['getHours']();getMarketCap(),_0x49d541==0x1&&logMemory(),(_0x49d541==0x2||_0x49d541==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x43d713=![]){const _0x4b3961=_0x48ecc3;logger[_0x4b3961(0x2ee)](_0x4b3961(0x31e));if(!_0x43d713)while(lockOrders!=ORDERS[_0x4b3961(0x355)]||coolingDown){await sleep(0x3e8);}process[_0x4b3961(0x273)]({'stop':'restart'},_0x30a06f=>{});}async function initExchange(_0x2c089f=config[_0x48ecc3(0x1df)],_0x2fcd24=config['apiKey'],_0x289cdb=config[_0x48ecc3(0x1db)],_0x3acdb5=config[_0x48ecc3(0x2ef)]){const _0x3c5844=_0x48ecc3;if(exchange){logger[_0x3c5844(0x2ee)](_0x3c5844(0x2a5));return;}logger['debug'](_0x3c5844(0x21c));!supportedExchanges()[_0x3c5844(0x33a)](_0x2c089f)&&(logHistory(_0x3c5844(0x321),_0x3c5844(0x2da)+_0x2c089f+_0x3c5844(0x386)),killBot());const _0x5993b0=ccxt[_0x3c5844(0x363)][_0x2c089f[_0x3c5844(0x32a)]()];exchange=new _0x5993b0({'apiKey':_0x2fcd24,'secret':_0x289cdb,'options':{'defaultType':_0x3c5844(0x259)}});if(_0x3acdb5)exchange[_0x3c5844(0x24a)]=_0x3acdb5;}function updateExchange(_0x181379,_0x363d8c,_0x4b0c24=null){const _0x539d52=_0x48ecc3;exchange[_0x539d52(0x38d)]=_0x181379,exchange[_0x539d52(0x1db)]=_0x363d8c,exchange[_0x539d52(0x2ef)]=_0x4b0c24,logger[_0x539d52(0x2ee)](_0x539d52(0x1eb));}function setStableCoins(){const _0x680bfd=_0x48ecc3;let _0x57edbf=config[_0x680bfd(0x34f)]==_0x680bfd(0x2db)?'ETH':config[_0x680bfd(0x34f)]==_0x680bfd(0x2e1)?_0x680bfd(0x2e1):_0x680bfd(0x312),_0x1f917c=allSymbols['includes'](_0x57edbf+_0x680bfd(0x2a9))?'USD':allSymbols[_0x680bfd(0x33a)](_0x57edbf+_0x680bfd(0x343))?_0x680bfd(0x311):_0x680bfd(0x339),_0x43ec84=allSymbols['includes'](_0x57edbf+_0x680bfd(0x29d))?_0x680bfd(0x339):_0x1f917c;enableFiatToggle=!![],_0x1f917c=='EUR'&&(enableFiatToggle=![],storeFiat(_0x680bfd(0x339))),_0x43ec84!=_0x680bfd(0x339)&&(enableFiatToggle=![],storeFiat(_0x680bfd(0x354))),stablecoins={'eur':{'coin':''+_0x57edbf+_0x43ec84,'symbol':_0x57edbf+'/'+_0x43ec84},'usd':{'coin':''+_0x57edbf+_0x1f917c,'symbol':_0x57edbf+'/'+_0x1f917c}};}async function initwsCcxt(){const _0x1ae860=_0x48ecc3;initCycle++;const _0x1428df=initCycle;let _0x94e334=[];config[_0x1ae860(0x258)][_0x1ae860(0x30a)](_0x5e78a7=>{const _0x3e943e=_0x1ae860;if(!_0x5e78a7[_0x3e943e(0x376)]&&_0x5e78a7[_0x3e943e(0x325)]!=config['basecoin'])_0x94e334[_0x3e943e(0x229)](_0x5e78a7[_0x3e943e(0x1e7)]);});if(!_0x94e334[_0x1ae860(0x33a)](stablecoins[_0x1ae860(0x337)][_0x1ae860(0x1e7)]))_0x94e334[_0x1ae860(0x229)](stablecoins[_0x1ae860(0x337)][_0x1ae860(0x1e7)]);if(!_0x94e334[_0x1ae860(0x33a)](stablecoins[_0x1ae860(0x246)][_0x1ae860(0x1e7)]))_0x94e334[_0x1ae860(0x229)](stablecoins[_0x1ae860(0x246)][_0x1ae860(0x1e7)]);if(config[_0x1ae860(0x1df)][_0x1ae860(0x276)](_0x1ae860(0x288))&&config[_0x1ae860(0x34f)]!=_0x1ae860(0x2e1)){if(!_0x94e334[_0x1ae860(0x33a)](_0x1ae860(0x241)+config[_0x1ae860(0x34f)]))_0x94e334[_0x1ae860(0x229)]('BNB/'+config[_0x1ae860(0x34f)]);}loadCoins(_0x94e334),_0x94e334=validateSymbols(_0x94e334);const _0x253c4a=async _0x11bfce=>{const _0x4f4de8=_0x1ae860;let _0x2ef551;try{const _0x1f49ec=await getTickers(_0x11bfce);Object[_0x4f4de8(0x32d)](_0x1f49ec)[_0x4f4de8(0x30a)](_0x41ab1a=>{const _0x585186=_0x4f4de8;_0x2ef551=_0x41ab1a[0x1][_0x585186(0x1e7)],gTicker[noslash(_0x2ef551)]=_0x41ab1a[0x1][_0x585186(0x34a)],gChange[_0x2ef551]=_0x41ab1a[0x1]['percentage'];});}catch(_0xb8bbb2){await handleError(_0xb8bbb2,_0x4f4de8(0x2b9),_0x2ef551);}},_0x5dc361=async _0x13edab=>{const _0x2df881=_0x1ae860;while(initCycle==_0x1428df){if(!botPaused)try{const _0x2eb18c=await exchange[_0x2df881(0x362)](_0x13edab);gTicker[noslash(_0x2eb18c[0x0][_0x2df881(0x1e7)])]=_0x2eb18c[0x0]['price'];}catch(_0x5a8662){if(!exchangeStopped)await handleError(_0x5a8662,_0x2df881(0x304),_0x13edab);}else await sleep(0x64);}},_0x1456eb=async _0x233f93=>{const _0x272980=_0x1ae860;while(initCycle==_0x1428df){if(!botPaused)try{const _0x5c6b28=await exchange[_0x272980(0x1ed)](_0x233f93),_0xca4feb=_0x5c6b28[_0x272980(0x34e)]();gTicker[noslash(_0xca4feb[_0x272980(0x1e7)])]=_0xca4feb[_0x272980(0x2bf)];}catch(_0x192600){if(!exchangeStopped)await handleError(_0x192600,_0x272980(0x28c),_0x233f93[_0x272980(0x26a)]());}else await sleep(0x64);}},_0x6742a6=async _0x581f5e=>{const _0x60dd11=_0x1ae860;while(initCycle==_0x1428df){if(!botPaused){let _0xdab189;try{await sleep(0x3c*0x3e8);const _0x352d19=await getTickers(_0x581f5e);Object['entries'](_0x352d19)[_0x60dd11(0x30a)](_0x65580a=>{const _0x46858a=_0x60dd11;_0xdab189=_0x65580a[0x1][_0x46858a(0x1e7)],gChange[_0xdab189]=_0x65580a[0x1][_0x46858a(0x39d)];});}catch(_0x241e30){if(!exchangeStopped)await handleError(_0x241e30,_0x60dd11(0x352),_0xdab189);}}else await sleep(0x64);}},_0x166374=async _0xe5feae=>{const _0x104a2d=_0x1ae860;while(initCycle==_0x1428df){if(!botPaused)try{const _0x378edc=await exchange['watchOrders'](_0xe5feae);initCycle==_0x1428df&&_0x378edc[_0x104a2d(0x30a)](_0x1b4455=>{updateNumberCoinsCcxt(_0x1b4455);});}catch(_0x1fee74){if(!exchangeStopped)await handleError(_0x1fee74,'watchOrders()');}else await sleep(0x64);}};_0x253c4a(_0x94e334),_0x6742a6(_0x94e334),exchange[_0x1ae860(0x25c)]['watchTradesForSymbols']&&!(config['exchange']==_0x1ae860(0x28d)&&_0x94e334[_0x1ae860(0x2d1)]>0xa)?_0x1456eb(_0x94e334):_0x94e334[_0x1ae860(0x30a)](_0x36c9dc=>{_0x5dc361(_0x36c9dc);}),_0x94e334['forEach'](_0x366224=>{_0x166374(_0x366224);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x304672){const _0x20b060=_0x48ecc3;let _0x19a31f={};try{if(config[_0x20b060(0x1df)]!=_0x20b060(0x24c))_0x19a31f=await exchange[_0x20b060(0x381)](_0x304672);else for(const _0x3a6cfd of _0x304672){const _0x5258c6=await exchange['fetchTicker'](_0x3a6cfd);_0x19a31f[_0x3a6cfd]=_0x5258c6;}return _0x19a31f;}catch(_0x554a35){throw _0x554a35;}}function setBlockTransactionDetection(_0x28c241){const _0x2afb37=_0x48ecc3;blockTransactionDetection=_0x28c241,logger[_0x2afb37(0x2ee)](_0x2afb37(0x2c9)+blockTransactionDetection);}async function detectLiquidityChange(_0x2c32a6=0x0){const _0x375e7c=_0x48ecc3;transactionDetectionOngoing=!![];try{const _0x49a9d4=await getCoins(_0x2c32a6),[_0x4b76a1,_0x1a8bf6]=_0x49a9d4;let _0x392adb=[];currentCoins[_0x375e7c(0x30a)](_0x3dd2a0=>{const _0x4680fa=_0x375e7c,_0x5b0fce=_0x4b76a1[_0x4680fa(0x21a)](_0x11571c=>_0x11571c[_0x4680fa(0x325)]==_0x3dd2a0[_0x4680fa(0x325)]);if(_0x5b0fce){if(_0x3dd2a0[_0x4680fa(0x293)]!=_0x5b0fce[_0x4680fa(0x293)]){let _0xf2d233;if(_0x3dd2a0[_0x4680fa(0x325)]!=config[_0x4680fa(0x34f)]){const _0x307b4a=gTicker[noslash(_0x3dd2a0[_0x4680fa(0x1e7)])];_0xf2d233=_0x3dd2a0['reverse']?0x1/_0x307b4a:_0x307b4a;}else _0xf2d233=0x1;_0x392adb['push']({'coin':_0x3dd2a0[_0x4680fa(0x325)],'symbol':_0x3dd2a0[_0x4680fa(0x1e7)],'price':_0xf2d233,'number':Number(formatResult(_0x5b0fce[_0x4680fa(0x293)]-_0x3dd2a0[_0x4680fa(0x293)],0x8)),'basecoinvalue':_0xf2d233*(_0x5b0fce['number']-_0x3dd2a0['number'])});}}});if(_0x392adb[_0x375e7c(0x2d1)]>0x0&&!blockTransactionDetection)for(const _0x2cf0b4 of _0x392adb){if(config[_0x375e7c(0x275)]){logger['debug'](_0x375e7c(0x2b3)+_0x2cf0b4[_0x375e7c(0x282)]+_0x375e7c(0x359)+lastFees['highest']);if(lastFees[_0x375e7c(0x2d4)]==0x0||Math[_0x375e7c(0x2f0)](_0x2cf0b4['basecoinvalue'])>lastFees[_0x375e7c(0x2d4)]*1.2){if(config['autoliquidity']==_0x375e7c(0x2cc)){delete _0x2cf0b4[_0x375e7c(0x1e7)],delete _0x2cf0b4['basecoinvalue'];let _0x41b46f=[],_0x2a07e6=[...config[_0x375e7c(0x366)]]||[],_0x7e796f=config[_0x375e7c(0x366)];_0x2a07e6[_0x375e7c(0x357)]((_0x1ca232,_0x190a6f)=>_0x1ca232['date']>_0x190a6f['date']?-0x1:_0x190a6f['date']>_0x1ca232['date']?0x1:0x0);const _0x315ad5=getDate();if(_0x2a07e6[0x0]){const _0x3cb209=fns[_0x375e7c(0x2a2)](_0x2a07e6[0x0][_0x375e7c(0x36b)],_0x375e7c(0x3a6),new Date()),_0xdbd286=fns[_0x375e7c(0x2a2)](_0x315ad5,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x3cb209,_0xdbd286)){_0x41b46f=_0x2a07e6[0x0]['changes'];const _0x5ad394=_0x41b46f['find'](_0x3dc7cb=>_0x3dc7cb[_0x375e7c(0x325)]==_0x2cf0b4['coin']);_0x5ad394?(_0x5ad394[_0x375e7c(0x293)]+=_0x2cf0b4[_0x375e7c(0x293)],_0x5ad394[_0x375e7c(0x293)]==0x0&&(_0x41b46f=_0x41b46f[_0x375e7c(0x233)](_0x2ad96f=>{const _0x3c0c63=_0x375e7c;return _0x2ad96f[_0x3c0c63(0x325)]!=_0x2cf0b4[_0x3c0c63(0x325)];}))):_0x41b46f[_0x375e7c(0x229)](_0x2cf0b4);const _0x37fc8f=_0x7e796f['find'](_0x48c748=>_0x48c748['date']==_0x315ad5);_0x37fc8f[_0x375e7c(0x395)]=_0x41b46f;}else _0x7e796f['push']({'date':_0x315ad5,'changes':[_0x2cf0b4]});}const _0x454276=_0x7e796f[_0x375e7c(0x21a)](_0x10e053=>_0x10e053[_0x375e7c(0x36b)]==_0x315ad5);if(_0x454276){let _0x35cfc6=!![];_0x454276[_0x375e7c(0x395)][_0x375e7c(0x30a)](_0x258643=>{const _0x29380f=_0x375e7c;if(_0x258643[_0x29380f(0x293)]!=0x0)_0x35cfc6=![];}),_0x35cfc6&&(_0x7e796f=_0x7e796f['filter'](_0x40b481=>{return _0x40b481['date']!=_0x315ad5;}));}let _0x50302e=dbConfig[_0x375e7c(0x3a2)](_0x375e7c(0x220))['find']({'botID':botID})[_0x375e7c(0x237)]();_0x50302e&&(dbConfig[_0x375e7c(0x3a2)](_0x375e7c(0x220))['find']({'botID':botID})[_0x375e7c(0x37e)]({'liquidity':_0x7e796f})[_0x375e7c(0x1e3)](),config[_0x375e7c(0x366)]=_0x7e796f);logHistory(_0x375e7c(0x33c),_0x375e7c(0x25d)+Math[_0x375e7c(0x2f0)](_0x2cf0b4[_0x375e7c(0x293)])+'\x20'+_0x2cf0b4['coin']+'\x20'+(_0x2cf0b4['number']>0x0?_0x375e7c(0x328):_0x375e7c(0x24d))+_0x375e7c(0x2ec)),proxyEmit(_0x375e7c(0x1e8),emittedConfiguration());const _0x177c47=getNormalizedPerformance();emitPerformance(_0x177c47),getStartingBalances(_0x177c47),logger[_0x375e7c(0x2ee)](_0x375e7c(0x27b));}else config[_0x375e7c(0x275)]==_0x375e7c(0x286)&&(config[_0x375e7c(0x364)]?(await storeHeadless({'headless':![]}),logHistory(_0x375e7c(0x33c),_0x375e7c(0x25d)+Math['abs'](_0x2cf0b4[_0x375e7c(0x293)])+'\x20'+_0x2cf0b4[_0x375e7c(0x325)]+'\x20'+(_0x2cf0b4['number']>0x0?'added':_0x375e7c(0x24d))+_0x375e7c(0x2e5))):logger[_0x375e7c(0x2ee)]('Portfolio\x20change\x20detected:\x20'+Math[_0x375e7c(0x2f0)](_0x2cf0b4[_0x375e7c(0x293)])+'\x20'+_0x2cf0b4[_0x375e7c(0x325)]+'\x20'+(_0x2cf0b4['number']>0x0?'added':_0x375e7c(0x24d))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x375e7c(0x2ee)](_0x375e7c(0x38f)+Math[_0x375e7c(0x2f0)](_0x2cf0b4[_0x375e7c(0x293)])+'\x20'+_0x2cf0b4[_0x375e7c(0x325)]+'\x20'+(_0x2cf0b4['number']>0x0?_0x375e7c(0x328):'removed'));}else logger['debug'](_0x375e7c(0x25d)+Math['abs'](_0x2cf0b4[_0x375e7c(0x293)])+'\x20'+_0x2cf0b4[_0x375e7c(0x325)]+'\x20'+(_0x2cf0b4[_0x375e7c(0x293)]>0x0?_0x375e7c(0x328):_0x375e7c(0x24d))+_0x375e7c(0x399));}currentCoins=_0x4b76a1,currentCoinsAll=_0x1a8bf6;}catch(_0x472744){if(!exchangeStopped)await handleError(_0x472744,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x47dbf3=_0x48ecc3;logger[_0x47dbf3(0x2ee)](_0x47dbf3(0x1de));try{markets=await exchange[_0x47dbf3(0x2cd)]();}catch(_0x865d89){logger['debug'](_0x47dbf3(0x356)+_0x865d89['toString']());if(markets){}else logHistory(_0x47dbf3(0x321),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0x47dbf3(0x305)+loadCoinsRetryInterval/0xea60+_0x47dbf3(0x29c)),logger[_0x47dbf3(0x2ee)](_0x47dbf3(0x2a1),_0x865d89),loading[_0x47dbf3(0x1ee)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object['entries'](markets)[_0x47dbf3(0x30a)](_0x440b56=>{const _0x5cc9a7=_0x47dbf3;_0x440b56[0x1][_0x5cc9a7(0x308)]&&_0x440b56[0x1][_0x5cc9a7(0x259)]&&allSymbols['push'](_0x440b56[0x0]);});}function validateSymbols(_0x5349a8){const _0x5a6dd5=_0x48ecc3;let _0x10fc1e=[];return _0x5349a8[_0x5a6dd5(0x30a)](_0x4863c9=>{const _0x4f56df=_0x5a6dd5;!allSymbols[_0x4f56df(0x33a)](_0x4863c9)?logHistory(_0x4f56df(0x321),'Invalid\x20symbol:\x20'+_0x4863c9+_0x4f56df(0x31b)):_0x10fc1e[_0x4f56df(0x229)](_0x4863c9);}),_0x10fc1e;}async function initclient(){const _0x28e144=_0x48ecc3;proxyEmit(_0x28e144(0x1e8),emittedConfiguration()),proxyEmit(_0x28e144(0x279),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x28e144(0x2df),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x575e85=getNormalizedPerformance();emitPerformance(_0x575e85),getStartingBalances(_0x575e85);}async function toggleBotMode(){const _0x3c4ab9=_0x48ecc3;let _0x56a1d0=dbConfig['get']('bot')[_0x3c4ab9(0x21a)]({'botID':botID})[_0x3c4ab9(0x237)]();if(_0x56a1d0){const _0x1b2963=!_0x56a1d0[_0x3c4ab9(0x364)];dbConfig[_0x3c4ab9(0x3a2)]('bot')[_0x3c4ab9(0x21a)]({'botID':botID})[_0x3c4ab9(0x37e)]({'headless':_0x1b2963})[_0x3c4ab9(0x1e3)](),config['headless']=_0x1b2963,proxyEmit(_0x3c4ab9(0x1e8),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x52a53a=_0x48ecc3;process[_0x52a53a(0x273)]({'updatebotmanager':!![]},_0x5940d2=>{}),logger[_0x52a53a(0x2ee)](_0x52a53a(0x2c7)+config[_0x52a53a(0x364)]);}async function loadCoins(_0x4e409a){const _0x4da13b=_0x48ecc3;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x592998,_0x453d96=0x0,_0x40a586=0x0;_0x4e409a[_0x4da13b(0x30a)](_0x9b534=>{const _0x2c4c22=_0x4da13b;loading[_0x2c4c22(0x380)][_0x2c4c22(0x229)](_0x9b534);}),loadingCanceled=![];let _0x36564d=![];while(_0x592998!=_0x4e409a[_0x4da13b(0x2d1)]+maxLoadingProgress){_0x592998=loadingProgress,_0x4e409a[_0x4da13b(0x30a)](_0x55fc07=>{const _0x3e961e=_0x4da13b;if(gTicker[noslash(_0x55fc07)]){loading[_0x3e961e(0x380)]=loading[_0x3e961e(0x380)]['filter'](_0x5d5fca=>_0x5d5fca!=_0x55fc07);if(!watchedSymbols[_0x3e961e(0x33a)](_0x55fc07))watchedSymbols[_0x3e961e(0x229)](_0x55fc07);_0x592998++;}}),loading['progress']=Math[_0x4da13b(0x2ab)](_0x592998/(_0x4e409a[_0x4da13b(0x2d1)]+maxLoadingProgress)*0x64);loading[_0x4da13b(0x2d3)]!=0x64&&(_0x40a586>0x1e*0x5&&(loading[_0x4da13b(0x336)]=!![],emitLoadingProgress()),_0x40a586>0x78*0x5&&!_0x36564d&&(_0x36564d=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x4da13b(0x281)](',\x20')+_0x4da13b(0x212)),logHistory(_0x4da13b(0x321),_0x4da13b(0x305)+loadCoinsRetryInterval/0xea60+_0x4da13b(0x29c)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x4da13b(0x1ee)]=!![],emitLoadingProgress();break;}else _0x453d96!=loading[_0x4da13b(0x2d3)]&&(_0x453d96=loading['progress'],emitLoadingProgress()),_0x40a586++,await sleep(0xc8);}_0x592998==_0x4e409a[_0x4da13b(0x2d1)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4da13b(0x273)]({'status':'enabled','live':'running'},_0x4c77ee=>{}),_0x36564d&&logHistory(_0x4da13b(0x33c),_0x4da13b(0x39a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x40acd6=_0x48ecc3;proxyEmit(_0x40acd6(0x1e8),{...emittedConfiguration(),'configstate':_0x40acd6(0x2be)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x267ba7=_0x48ecc3;let _0xb74e92=gTicker[stablecoins[_0x267ba7(0x337)][_0x267ba7(0x325)]],_0x5ed61d=gTicker[stablecoins[_0x267ba7(0x246)]['coin']];return{'eur':Number(_0xb74e92),'usd':Number(_0x5ed61d)};}function capitalize(_0x1c70fb){const _0x2e267f=_0x48ecc3;return _0x1c70fb[_0x2e267f(0x29e)](0x0,0x1)['toUpperCase']()+_0x1c70fb[_0x2e267f(0x29e)](0x1);}function supportedExchanges(){const _0x3e3d04=_0x48ecc3,_0x31504a=['ws',_0x3e3d04(0x381),_0x3e3d04(0x340),_0x3e3d04(0x362),'watchOrders',_0x3e3d04(0x252),_0x3e3d04(0x398),_0x3e3d04(0x291),_0x3e3d04(0x2e2)];let _0x35e567=[],_0xb8b395=[],_0x282b82=ccxt[_0x3e3d04(0x363)][_0x3e3d04(0x279)];_0x282b82['forEach'](_0x17e37a=>{const _0x4fbe33=_0x3e3d04;try{const _0x2dea6b=new ccxt[(_0x4fbe33(0x363))][_0x17e37a]();_0xb8b395[_0x4fbe33(0x229)](_0x2dea6b);}catch(_0x3d6b89){}}),_0xb8b395[_0x3e3d04(0x30a)](_0x5daf12=>{const _0x3cd697=_0x3e3d04;let _0x50a00a=0x0;_0x31504a['forEach'](_0x5535bf=>{const _0x20f97e=_0x20ca;_0x5535bf in _0x5daf12['has']&&_0x5daf12[_0x20f97e(0x25c)][_0x5535bf]&&_0x50a00a++;}),_0x50a00a==_0x31504a[_0x3cd697(0x2d1)]&&_0x35e567[_0x3cd697(0x229)](capitalize(_0x5daf12['id']));});let _0x3eddd3=[];return _0x282b82[_0x3e3d04(0x30a)](_0x4e0e38=>{const _0x3f43b7=_0x3e3d04;_0x4e0e38=capitalize(_0x4e0e38);if(!_0x35e567['includes'](_0x4e0e38))_0x3eddd3[_0x3f43b7(0x229)](_0x4e0e38);}),_0x35e567;}function setStartDatePerformance(){const _0x45df82=_0x48ecc3;if(config&&config[_0x45df82(0x366)][0x0][_0x45df82(0x395)][_0x45df82(0x2d1)]!=0x0){const _0x45cf14=config[_0x45df82(0x366)][0x0][_0x45df82(0x395)];dbPerformance['get'](_0x45df82(0x2c2))[_0x45df82(0x21a)]({'date':config[_0x45df82(0x2a3)]})[_0x45df82(0x37e)]({'coins':_0x45cf14})[_0x45df82(0x1e3)]();}}async function recreateCoinResults(){const _0x4dccea=_0x48ecc3;recreationNeeded=![];let _0x42e259,_0x337b28=[];try{for(const _0x46fe56 of currentCoins){if(_0x46fe56['coin']!=config[_0x4dccea(0x34f)]){let _0x461822=0x0,_0x3d215c,_0x56c00b;_0x42e259=await getAllEventOrders(_0x46fe56['symbol']);if(_0x42e259['length']>0x0)_0x42e259[_0x4dccea(0x30a)](_0x36b2c3=>{const _0xf4a6f4=_0x4dccea,_0x36a74c=_0x46fe56[_0xf4a6f4(0x1e7)]['includes'](config[_0xf4a6f4(0x34f)]+'/');_0x337b28[_0xf4a6f4(0x229)]({'datetime':_0x36b2c3[_0xf4a6f4(0x348)],'coin':_0x46fe56[_0xf4a6f4(0x325)],'symbol':_0x46fe56[_0xf4a6f4(0x1e7)],'side':_0x36b2c3[_0xf4a6f4(0x33b)],'reverse':_0x36a74c,'amount':formatResult(_0x36b2c3['filled'],0x8),'filled':formatResult(_0x36b2c3['filled'],0x8),'price':formatResult(_0x36b2c3[_0xf4a6f4(0x2bf)],0x8)}),_0x461822=_0x36b2c3[_0xf4a6f4(0x33b)]=='buy'?_0x461822+_0x36b2c3[_0xf4a6f4(0x207)]:_0x461822-_0x36b2c3['filled'];if(!_0x56c00b)_0x56c00b=_0x36b2c3[_0xf4a6f4(0x2bf)];});_0x3d215c=_0x46fe56['number']-_0x461822;let _0x2b29c0;config[_0x4dccea(0x366)][_0x4dccea(0x30a)](_0x125f61=>{const _0x1645b9=_0x4dccea;!_0x2b29c0&&(_0x2b29c0=_0x125f61[_0x1645b9(0x395)][_0x1645b9(0x21a)](_0x38c7cb=>_0x38c7cb[_0x1645b9(0x325)]==_0x46fe56[_0x1645b9(0x325)]),_0x2b29c0&&(_0x3d215c=_0x2b29c0['number'],_0x56c00b=_0x2b29c0[_0x1645b9(0x2bf)]));});let _0x19ff7b=dbCoinResults[_0x4dccea(0x3a2)](_0x4dccea(0x21d))[_0x4dccea(0x21a)]({'coin':_0x46fe56[_0x4dccea(0x325)]})[_0x4dccea(0x237)]();_0x19ff7b={'coin':_0x46fe56[_0x4dccea(0x325)],'number':_0x3d215c,'breakeven':_0x56c00b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4dccea(0x3a2)](_0x4dccea(0x21d))[_0x4dccea(0x21a)]({'coin':_0x46fe56['coin']})[_0x4dccea(0x37e)](_0x19ff7b)[_0x4dccea(0x1e3)]();}}_0x337b28[_0x4dccea(0x357)]((_0x1aef5f,_0x578e1a)=>_0x1aef5f['datetime']>_0x578e1a[_0x4dccea(0x348)]?0x1:_0x578e1a['datetime']>_0x1aef5f[_0x4dccea(0x348)]?-0x1:0x0);let _0x244037=0x0;for(let _0x21234a of _0x337b28){await updateCoinResults(_0x21234a,!![]);}}catch(_0x505f61){await handleError(_0x505f61,_0x4dccea(0x39b));}}async function getAllEventOrders(_0x350a72){const _0x4bd4c1=_0x48ecc3;let _0xce6fe5=[],_0x56ff0c=dbLogs['get'](_0x4bd4c1(0x35d))[_0x4bd4c1(0x233)](_0x3227b6=>{const _0x2e1452=_0x4bd4c1,_0x36924f=_0x3227b6[_0x2e1452(0x257)][_0x2e1452(0x32a)]();return _0x36924f['includes'](_0x350a72['toLowerCase']())&&(_0x36924f['includes']('market')&&_0x36924f[_0x2e1452(0x33a)](_0x2e1452(0x23d))||_0x36924f[_0x2e1452(0x33a)]('filled')&&_0x36924f['includes'](_0x2e1452(0x23d)));})[_0x4bd4c1(0x278)]('time')[_0x4bd4c1(0x237)]();return _0x56ff0c[_0x4bd4c1(0x30a)](_0x4db759=>{const _0x4cf479=_0x4bd4c1,_0x418a47=_0x4db759['event'][_0x4cf479(0x33a)](_0x4cf479(0x231))?_0x4cf479(0x231):_0x4cf479(0x2fd),_0x35de4a=/#([0-9]|\.)+\s/i,_0x5225d1=Number(_0x35de4a[_0x4cf479(0x2a7)](_0x4db759[_0x4cf479(0x257)])[0x0]['slice'](0x1)),_0x126e71=/@([0-9]|\.)+$/i,_0x421403=Number(_0x126e71['exec'](_0x4db759[_0x4cf479(0x257)])[0x0][_0x4cf479(0x240)](0x1));_0xce6fe5[_0x4cf479(0x229)]({'datetime':_0x4db759[_0x4cf479(0x1fb)],'coin':symbolToCoin(_0x350a72),'symbol':_0x350a72,'side':_0x418a47,'amount':_0x5225d1,'filled':_0x5225d1,'price':_0x421403});}),_0xce6fe5;}async function validate24hChanges(){const _0x1a5285=_0x48ecc3;for(const _0x593e11 of currentCoins){if(_0x593e11[_0x1a5285(0x325)]!=config[_0x1a5285(0x34f)]){let _0x348d5e;_0x593e11[_0x1a5285(0x344)]?_0x348d5e=formatResult((0x1/(gChange[_0x593e11['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x348d5e=gChange[_0x593e11[_0x1a5285(0x1e7)]],_0x348d5e<config[_0x1a5285(0x245)]&&(logHistory(_0x1a5285(0x321),_0x593e11['coin']+_0x1a5285(0x2d6)+_0x348d5e+'%'),logHistory('error',_0x1a5285(0x219)),logHistory(_0x1a5285(0x321),_0x1a5285(0x254)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x24f5ba,_0x283c33){const _0x20ebea=_0x48ecc3;if(!_0x24f5ba)return!![];const _0x1042a9=_0x283c33[_0x20ebea(0x34d)]('.'),_0x55dc02=_0x24f5ba[_0x20ebea(0x34d)]('.');for(var _0x25f352=0x0;_0x25f352<_0x55dc02['length'];_0x25f352++){const _0x2c84c2=~~_0x55dc02[_0x25f352],_0x21b8fc=~~_0x1042a9[_0x25f352];if(_0x2c84c2<_0x21b8fc)return!![];if(_0x2c84c2>_0x21b8fc)return![];}return![];}async function oneTimeMigration(){const _0x4f1d52=_0x48ecc3;let _0x28e9be=dbLogs[_0x4f1d52(0x3a2)](_0x4f1d52(0x2e8))[_0x4f1d52(0x237)]();if(isOlderVersion(_0x28e9be,'2.3.5')){let _0x50a61c=[];const _0x302ce8=dbLogs['get'](_0x4f1d52(0x35d))[_0x4f1d52(0x237)]();_0x302ce8[_0x4f1d52(0x30a)](_0x3e3043=>{const _0x5e1137=_0x4f1d52;_0x50a61c[_0x5e1137(0x229)]({'time':_0x3e3043[_0x5e1137(0x1fb)],'type':_0x3e3043[_0x5e1137(0x2fe)],'event':_0x3e3043['event']});}),dbLogs[_0x4f1d52(0x3a2)](_0x4f1d52(0x35d))[_0x4f1d52(0x37e)](_0x50a61c)[_0x4f1d52(0x1e3)]();}let _0x4d0482=dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x2e8))[_0x4f1d52(0x237)]();if(isOlderVersion(_0x4d0482,_0x4f1d52(0x226))){let _0x27a8cb=dbConfig[_0x4f1d52(0x3a2)]('bot')['find']({'botID':botID})['value']();if(_0x27a8cb){let _0x3bfaea=[];_0x27a8cb[_0x4f1d52(0x258)]['forEach'](_0x23e92d=>{const _0xffed2d=_0x4f1d52;_0x3bfaea[_0xffed2d(0x229)]({'coin':_0x23e92d[_0xffed2d(0x325)],'number':_0x23e92d[_0xffed2d(0x371)],'price':_0x23e92d[_0xffed2d(0x30f)]}),delete _0x23e92d['startnumber'],delete _0x23e92d[_0xffed2d(0x30f)];});if(_0x3bfaea['length']!==0x0)fs['writeFile'](configbackuppath+(_0x4f1d52(0x2e9)+botID+_0x4f1d52(0x37f)),JSON['stringify'](_0x3bfaea,null,0x4),function(_0x2da0b1){if(_0x2da0b1){}});const _0x1c88b2=(_0x4fe1df,_0x4106dd)=>{let _0xc439c=[];_0x4106dd['forEach'](_0x5d9f6a=>{const _0x21772d=_0x20ca,_0x16485b=_0x4fe1df[_0x21772d(0x21a)](_0x3bf447=>_0x3bf447[_0x21772d(0x325)]==_0x5d9f6a[_0x21772d(0x325)]);if(!_0x16485b)_0xc439c[_0x21772d(0x229)](_0x5d9f6a);});let _0x4d9077=[];return _0x4fe1df['forEach'](_0x217855=>{const _0x85da5f=_0x20ca,_0x5b272b=_0x4106dd[_0x85da5f(0x21a)](_0x5103b8=>_0x5103b8[_0x85da5f(0x325)]==_0x217855[_0x85da5f(0x325)]);if(!_0x5b272b||_0x5b272b[_0x85da5f(0x293)]==0x0&&_0x217855[_0x85da5f(0x293)]!=0x0)_0x4d9077[_0x85da5f(0x229)](_0x217855);}),{'missingDay1':_0xc439c,'notInDay2':_0x4d9077};},_0x216d23=dbPerformance[_0x4f1d52(0x3a2)](_0x4f1d52(0x2c2))[_0x4f1d52(0x26e)]()['value']();if(_0x216d23['length']>0x1){const {missingDay1:_0x1f7404,notInDay2:_0x23ffa7}=_0x1c88b2(_0x3bfaea,_0x216d23[0x1][_0x4f1d52(0x21d)]);_0x3bfaea=[..._0x3bfaea,..._0x1f7404],_0x23ffa7[_0x4f1d52(0x30a)](_0x2c4523=>{const _0x230f2e=_0x4f1d52;let _0x4ddb7a=_0x3bfaea[_0x230f2e(0x2bd)](_0x3809a8=>_0x3809a8['coin']==_0x2c4523['coin']);_0x4ddb7a!=-0x1&&_0x3bfaea[_0x230f2e(0x264)](_0x4ddb7a,0x1);});}_0x3bfaea[_0x4f1d52(0x357)]((_0x25a4da,_0x45d88e)=>_0x25a4da[_0x4f1d52(0x325)]>_0x45d88e['coin']?0x1:_0x45d88e[_0x4f1d52(0x325)]>_0x25a4da[_0x4f1d52(0x325)]?-0x1:0x0);let _0x205de5=[{'date':_0x27a8cb[_0x4f1d52(0x2a3)],'changes':_0x3bfaea}];_0x216d23[_0x4f1d52(0x2d1)]>0x2&&_0x216d23[_0x4f1d52(0x30a)]((_0x28ccd5,_0x22aebc)=>{const _0x3e0150=_0x4f1d52;if(_0x22aebc>0x0&&_0x22aebc<_0x216d23['length']-0x1){const {missingDay1:_0x10232a,notInDay2:_0x1080eb}=_0x1c88b2(_0x216d23[_0x22aebc][_0x3e0150(0x21d)],_0x216d23[_0x22aebc+0x1][_0x3e0150(0x21d)]);_0x3bfaea=[],(_0x10232a[_0x3e0150(0x2d1)]!=0x0||_0x1080eb['length']!=0x0)&&(_0x10232a['length']!=0x0&&_0x3bfaea[_0x3e0150(0x229)](..._0x10232a),_0x1080eb['length']!=0x0&&(_0x1080eb[_0x3e0150(0x30a)](_0x473087=>{_0x473087['number']=-_0x473087['number'];}),_0x3bfaea[_0x3e0150(0x229)](..._0x1080eb)),_0x3bfaea[_0x3e0150(0x357)]((_0x3ab548,_0x4246e9)=>_0x3ab548[_0x3e0150(0x325)]>_0x4246e9[_0x3e0150(0x325)]?0x1:_0x4246e9[_0x3e0150(0x325)]>_0x3ab548[_0x3e0150(0x325)]?-0x1:0x0),_0x205de5[_0x3e0150(0x229)]({'date':_0x216d23[_0x22aebc+0x1]['date'],'changes':_0x3bfaea}));}}),dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x220))[_0x4f1d52(0x21a)]({'botID':botID})[_0x4f1d52(0x37e)]({..._0x27a8cb,'liquidity':_0x205de5})[_0x4f1d52(0x1e3)]();}}if(isOlderVersion(_0x4d0482,_0x4f1d52(0x2fa))){let _0x40381e=dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x220))['find']({'botID':botID})['value']();if(_0x40381e){const _0x177d37=_0x40381e['exchange'],_0x18ba5d=_0x177d37?capitalize(_0x177d37):_0x4f1d52(0x288);dbConfig[_0x4f1d52(0x3a2)]('bot')[_0x4f1d52(0x21a)]({'botID':botID})[_0x4f1d52(0x37e)]({'exchange':_0x18ba5d})['write']();}}if(isOlderVersion(_0x4d0482,'2.6.22')){let _0x425bd3=dbConfig['get'](_0x4f1d52(0x220))[_0x4f1d52(0x21a)]({'botID':botID})['value']();if(_0x425bd3){const _0x288680=_0x425bd3['marketcapEnabled'],_0x2e8430=_0x288680?_0x4f1d52(0x393):![];dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x220))[_0x4f1d52(0x21a)]({'botID':botID})[_0x4f1d52(0x37e)]({'marketcapEnabled':_0x2e8430})['write']();}}if(isOlderVersion(_0x4d0482,_0x4f1d52(0x27f))){let _0x47dd2b=dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x220))[_0x4f1d52(0x21a)]({'botID':botID})[_0x4f1d52(0x237)]();if(_0x47dd2b){const _0x3907ce=_0x47dd2b['autoliquidity'],_0x599ae4=_0x3907ce?_0x4f1d52(0x2cc):![];dbConfig[_0x4f1d52(0x3a2)](_0x4f1d52(0x220))[_0x4f1d52(0x21a)]({'botID':botID})[_0x4f1d52(0x37e)]({'autoliquidity':_0x599ae4})['write']();}}let _0x942b16=dbPerformance[_0x4f1d52(0x3a2)](_0x4f1d52(0x2e8))['value']();isOlderVersion(_0x942b16,_0x4f1d52(0x226))&&setStartDatePerformance();let _0x34a3e0=dbCoinResults[_0x4f1d52(0x3a2)](_0x4f1d52(0x2e8))[_0x4f1d52(0x237)]();if(isOlderVersion(_0x34a3e0,'2.5.0')){let _0x1df416=dbCoinResults[_0x4f1d52(0x3a2)](_0x4f1d52(0x21d))[_0x4f1d52(0x237)]();if(_0x1df416[_0x4f1d52(0x2d1)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5f143b=_0x48ecc3;dbConfig['set']('version',serverversion)['write'](),dbPerformance[_0x5f143b(0x280)](_0x5f143b(0x2e8),serverversion)['write'](),dbLogs[_0x5f143b(0x280)](_0x5f143b(0x2e8),serverversion)[_0x5f143b(0x1e3)](),dbCoinResults['set'](_0x5f143b(0x2e8),serverversion)['write']();}function getConfiguration(_0x29ef72){const _0x17fb63=_0x48ecc3;let _0x35bda3=dbConfig[_0x17fb63(0x3a2)](_0x17fb63(0x220))[_0x17fb63(0x21a)]({'botID':_0x29ef72})[_0x17fb63(0x237)]();if(_0x35bda3){let _0x495182=![];typeof _0x35bda3[_0x17fb63(0x223)]==_0x17fb63(0x295)&&(_0x35bda3={..._0x35bda3,'threshold':Number(_0x35bda3[_0x17fb63(0x223)])},_0x495182=!![]),_0x35bda3[_0x17fb63(0x245)]==undefined&&(_0x35bda3={..._0x35bda3,'change24h':-0x14},_0x495182=!![]),_0x35bda3[_0x17fb63(0x22e)]==undefined&&(_0x35bda3={..._0x35bda3,'fiat':_0x17fb63(0x354)},_0x495182=!![]),_0x35bda3[_0x17fb63(0x2cb)]==undefined&&(_0x35bda3={..._0x35bda3,'onepagemode':settings['onepagemode']},_0x495182=!![]),_0x35bda3['colorscheme']==undefined&&(_0x35bda3={..._0x35bda3,'colorscheme':_0x17fb63(0x21f)},_0x495182=!![]),_0x35bda3[_0x17fb63(0x275)]==undefined&&(_0x35bda3={..._0x35bda3,'autoliquidity':_0x17fb63(0x2cc)},_0x495182=!![]),_0x35bda3[_0x17fb63(0x382)]==undefined&&(_0x35bda3={..._0x35bda3,'marketcapApi':settings[_0x17fb63(0x382)]?!![]:![]},_0x495182=!![]),_0x35bda3[_0x17fb63(0x21b)]==undefined&&(_0x35bda3={..._0x35bda3,'marketcapEnabled':![]},_0x495182=!![]),_0x495182&&(_0x35bda3={'botID':_0x35bda3[_0x17fb63(0x272)],'exchange':_0x35bda3[_0x17fb63(0x1df)],'apiKey':_0x35bda3['apiKey'],'apiSecret':_0x35bda3[_0x17fb63(0x1db)],'apiPassword':_0x35bda3['apiPassword'],'basecoin':_0x35bda3[_0x17fb63(0x34f)],'botname':_0x35bda3['botname'],'showname':_0x35bda3['showname'],'threshold':_0x35bda3['threshold'],'ordertype':_0x35bda3[_0x17fb63(0x1ef)],'timeout':_0x35bda3[_0x17fb63(0x336)],'fiat':_0x35bda3[_0x17fb63(0x22e)],'startdate':_0x35bda3[_0x17fb63(0x2a3)],'recreate':_0x35bda3[_0x17fb63(0x375)],'timeshift':_0x35bda3[_0x17fb63(0x256)],'onepagemode':_0x35bda3[_0x17fb63(0x2cb)],'headless':_0x35bda3[_0x17fb63(0x364)],'cooldown':_0x35bda3[_0x17fb63(0x365)],'change24h':_0x35bda3['change24h'],'emojibuy':_0x35bda3['emojibuy'],'emojisell':_0x35bda3[_0x17fb63(0x2d2)],'colorscheme':_0x35bda3['colorscheme'],'marketcapApi':_0x35bda3['marketcapApi'],'marketcapEnabled':_0x35bda3[_0x17fb63(0x21b)],'portfolio':_0x35bda3['portfolio'],'autoliquidity':_0x35bda3['autoliquidity'],'liquidity':_0x35bda3['liquidity'],'openOrders':_0x35bda3[_0x17fb63(0x310)]},dbConfig[_0x17fb63(0x3a2)](_0x17fb63(0x220))[_0x17fb63(0x260)]()[_0x17fb63(0x1e3)](),dbConfig[_0x17fb63(0x3a2)](_0x17fb63(0x220))[_0x17fb63(0x229)](_0x35bda3)[_0x17fb63(0x1e3)]());}else _0x35bda3={'botID':_0x29ef72,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x17fb63(0x358)+_0x29ef72,'showname':![],'threshold':0x3,'ordertype':_0x17fb63(0x218),'timeout':0x14,'fiat':_0x17fb63(0x354),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x17fb63(0x2cb)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x17fb63(0x21f),'marketcapApi':settings[_0x17fb63(0x382)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x17fb63(0x2cc),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x35bda3;}function emittedConfiguration(){const _0x591e40=_0x48ecc3;let _0x42f08b;if(config[_0x591e40(0x38d)]=='')_0x42f08b={...config,'configstate':_0x591e40(0x263)};else config[_0x591e40(0x38d)]==_0x591e40(0x31a)?_0x42f08b={...config,'configstate':_0x591e40(0x2ea)}:(_0x42f08b={...config,'apiKey':_0x591e40(0x2fb),'apiSecret':'************'},config['apiPassword']&&(_0x42f08b[_0x591e40(0x2ef)]=_0x591e40(0x2fb)));return _0x42f08b['enableFiatToggle']=enableFiatToggle,_0x42f08b;}function getSettings(){const _0x3e07c9=_0x48ecc3;return dbSettings[_0x3e07c9(0x3a2)](_0x3e07c9(0x289))['value']();}function getSecure(){const _0xb97da=_0x48ecc3;return dbSecure[_0xb97da(0x3a2)](_0xb97da(0x346))[_0xb97da(0x237)]()||{};}function updateTimeshift(_0x400804){const _0xd118de=_0x48ecc3;let _0x1277db=dbConfig[_0xd118de(0x3a2)](_0xd118de(0x220))[_0xd118de(0x21a)]({'botID':botID})[_0xd118de(0x237)]();_0x1277db&&dbConfig[_0xd118de(0x3a2)]('bot')[_0xd118de(0x21a)]({'botID':botID})[_0xd118de(0x37e)]({'timeshift':_0x400804})[_0xd118de(0x1e3)](),config[_0xd118de(0x256)]=_0x400804,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x30bf79){const _0x1f5733=_0x48ecc3;let _0x2b18bf=dbConfig[_0x1f5733(0x3a2)](_0x1f5733(0x220))['find']({'botID':botID})[_0x1f5733(0x237)]();_0x2b18bf&&dbConfig[_0x1f5733(0x3a2)](_0x1f5733(0x220))[_0x1f5733(0x21a)]({'botID':botID})[_0x1f5733(0x37e)]({'onepagemode':_0x30bf79})[_0x1f5733(0x1e3)](),config[_0x1f5733(0x2cb)]=_0x30bf79,proxyEmit(_0x1f5733(0x1e8),emittedConfiguration());}function updateMarketcapApi(_0x1e3c69){const _0x1a34fb=_0x48ecc3,_0x4294f3=_0x1e3c69?!![]:![];let _0x144571=dbConfig['get'](_0x1a34fb(0x220))[_0x1a34fb(0x21a)]({'botID':botID})[_0x1a34fb(0x237)]();_0x144571&&dbConfig[_0x1a34fb(0x3a2)](_0x1a34fb(0x220))['find']({'botID':botID})[_0x1a34fb(0x37e)]({'marketcapApi':_0x4294f3})[_0x1a34fb(0x1e3)](),config[_0x1a34fb(0x382)]=_0x4294f3,getMarketCap(),proxyEmit(_0x1a34fb(0x1e8),emittedConfiguration());}async function storeConfiguration(_0x39f608){const _0x551305=_0x48ecc3;logger[_0x551305(0x2ee)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0xbcc2a8=![],_0x528d2e=![],_0xfc733d=[];_0x39f608['portfolio'][_0x551305(0x30a)](_0x3a244f=>{const _0x7a87d5=_0x551305;if(!_0x3a244f[_0x7a87d5(0x376)]&&_0x3a244f['coin']!=_0x39f608[_0x7a87d5(0x34f)])_0xfc733d[_0x7a87d5(0x229)](_0x3a244f[_0x7a87d5(0x1e7)]);}),_0xfc733d[_0x551305(0x30a)](_0x523959=>{const _0x52df1f=_0x551305,_0x45e200=currentCoins[_0x52df1f(0x21a)](_0x36cf08=>_0x36cf08['symbol']==_0x523959);!_0x45e200&&(_0xbcc2a8=!![]);}),currentCoins[_0x551305(0x30a)](_0x5b6a33=>{const _0x54d7c7=_0x551305;if(_0x5b6a33['coin']!=config[_0x54d7c7(0x34f)]){const _0xf407ec=_0xfc733d['find'](_0x304ed4=>_0x304ed4==_0x5b6a33[_0x54d7c7(0x1e7)]);!_0xf407ec&&(_0xbcc2a8=!![]);}}),_0x39f608[_0x551305(0x258)][_0x551305(0x30a)](_0x2919e1=>{const _0x54f56f=_0x551305,_0xd01f76=config[_0x54f56f(0x258)][_0x54f56f(0x21a)](_0x477ea3=>_0x477ea3[_0x54f56f(0x325)]==_0x2919e1['coin']);if(_0xd01f76&&_0x2919e1[_0x54f56f(0x31f)]!=_0xd01f76[_0x54f56f(0x31f)])_0x528d2e=!![];});let _0x59ea27=dbConfig[_0x551305(0x3a2)](_0x551305(0x220))[_0x551305(0x21a)]({'botID':botID})[_0x551305(0x237)]();_0x39f608={..._0x39f608,'apiKey':crypt[_0x551305(0x28e)](secure[_0x551305(0x1f1)],_0x39f608[_0x551305(0x38d)])[_0x551305(0x2c6)],'apiSecret':crypt[_0x551305(0x28e)](secure[_0x551305(0x1f1)],_0x39f608[_0x551305(0x1db)])[_0x551305(0x2c6)]};_0x39f608['apiPassword']&&(_0x39f608[_0x551305(0x2ef)]=crypt['decrypt'](secure[_0x551305(0x1f1)],_0x39f608[_0x551305(0x2ef)])[_0x551305(0x2c6)]);let _0x368fbf=![];if(_0x59ea27){_0x39f608[_0x551305(0x38d)]==_0x551305(0x2fb)?_0x39f608[_0x551305(0x38d)]=config[_0x551305(0x38d)]:_0x368fbf=!![];_0x39f608[_0x551305(0x1db)]==_0x551305(0x2fb)?_0x39f608[_0x551305(0x1db)]=config['apiSecret']:_0x368fbf=!![];if(_0x39f608['apiPassword']==_0x551305(0x2fb))_0x39f608[_0x551305(0x2ef)]=config[_0x551305(0x2ef)];else{if(_0x39f608[_0x551305(0x2ef)])_0x368fbf=!![];}dbConfig[_0x551305(0x3a2)](_0x551305(0x220))[_0x551305(0x21a)]({'botID':botID})[_0x551305(0x37e)](_0x39f608)[_0x551305(0x1e3)]();}else dbConfig[_0x551305(0x3a2)]('bot')['push'](_0x39f608)['write'](),_0x368fbf=!![],process[_0x551305(0x273)]({'status':'enabled','live':_0x551305(0x353)},_0x4f2731=>{});process[_0x551305(0x273)]({'botname':_0x39f608[_0x551305(0x20c)]},_0x188cda=>{}),config={..._0x39f608},updateBotManager(),proxyEmit(_0x551305(0x2bb)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x368fbf)!_0x59ea27?await reset(!![]):getBalances();else _0xbcc2a8||_0x528d2e?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x736545){const _0x315f22=_0x48ecc3,_0x2a143c={...config,'headless':_0x736545[_0x315f22(0x364)]};let _0x54b417=dbConfig[_0x315f22(0x3a2)](_0x315f22(0x220))['find']({'botID':botID})['value']();_0x54b417&&dbConfig[_0x315f22(0x3a2)](_0x315f22(0x220))[_0x315f22(0x21a)]({'botID':botID})[_0x315f22(0x37e)](_0x2a143c)[_0x315f22(0x1e3)](),config={..._0x2a143c},updateBotManager(),proxyEmit(_0x315f22(0x1e8),emittedConfiguration());}async function storeFiat(_0xdb0bad){const _0x184258=_0x48ecc3,_0x2ed0f3={...config,'fiat':_0xdb0bad};let _0xe39017=dbConfig[_0x184258(0x3a2)](_0x184258(0x220))[_0x184258(0x21a)]({'botID':botID})['value']();_0xe39017&&dbConfig[_0x184258(0x3a2)]('bot')[_0x184258(0x21a)]({'botID':botID})[_0x184258(0x37e)](_0x2ed0f3)[_0x184258(0x1e3)](),config={..._0x2ed0f3},proxyEmit(_0x184258(0x1e8),emittedConfiguration());}function resetHistory(){const _0x44c316=_0x48ecc3;logger[_0x44c316(0x36d)](_0x44c316(0x35b));try{if(fs[_0x44c316(0x2ac)](path[_0x44c316(0x281)](configpath,_0x44c316(0x1f3)+botID+_0x44c316(0x303))))fs['unlinkSync'](path[_0x44c316(0x281)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x44c316(0x2ac)](path[_0x44c316(0x281)](configpath,_0x44c316(0x1f3)+botID+_0x44c316(0x367))))fs['unlinkSync'](path[_0x44c316(0x281)](configpath,'bot-'+botID+_0x44c316(0x367)));if(fs[_0x44c316(0x2ac)](path[_0x44c316(0x281)](configpath,_0x44c316(0x1f3)+botID+_0x44c316(0x222))))fs[_0x44c316(0x225)](path[_0x44c316(0x281)](configpath,'bot-'+botID+'-results.json'));}catch(_0x45a286){if(_0x45a286)logger['full'](_0x44c316(0x345),_0x45a286);}const _0xed6ebd=getDate();let _0x1c4ebd=[];currentCoins[_0x44c316(0x30a)](_0x408a4e=>{const _0x195950=_0x44c316;_0x1c4ebd[_0x195950(0x229)]({'coin':_0x408a4e[_0x195950(0x325)],'number':_0x408a4e['number'],'price':_0x408a4e[_0x195950(0x34a)]});});let _0x22ee1f=dbConfig['get'](_0x44c316(0x220))['find']({'botID':botID})[_0x44c316(0x237)]();_0x22ee1f&&(dbConfig[_0x44c316(0x3a2)]('bot')[_0x44c316(0x21a)]({'botID':botID})[_0x44c316(0x37e)]({'liquidity':[{'date':_0xed6ebd,'changes':_0x1c4ebd}]})[_0x44c316(0x1e3)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x589ebc){const _0x41d2ab=_0x48ecc3;return _0x589ebc[_0x41d2ab(0x29a)]('/','');}function updateHighestFee(_0x203191){const _0x475a23=_0x48ecc3;if(_0x203191[_0x475a23(0x344)]){let _0x2c6baf={'filled':_0x203191['filled']*_0x203191[_0x475a23(0x2bf)],'amount':_0x203191[_0x475a23(0x207)]*_0x203191[_0x475a23(0x2bf)],'side':_0x203191[_0x475a23(0x33b)]==_0x475a23(0x231)?_0x475a23(0x2fd):_0x475a23(0x231),'price':0x1/_0x203191[_0x475a23(0x2bf)]};_0x203191={..._0x203191,..._0x2c6baf};}const _0x582305=defaultFee*_0x203191[_0x475a23(0x207)]*_0x203191[_0x475a23(0x2bf)];lastFees[_0x475a23(0x292)][_0x475a23(0x2d1)]===0x14&&lastFees['recent20'][_0x475a23(0x249)](),lastFees[_0x475a23(0x292)]['push'](_0x582305),lastFees['highest']=Math[_0x475a23(0x2b8)](...lastFees[_0x475a23(0x292)]);}async function updateNumberCoinsCcxt(_0x551b43){const _0x1abb5e=_0x48ecc3;logger[_0x1abb5e(0x2ee)]('0\x20-\x20EXECUTION:\x20'+_0x551b43[_0x1abb5e(0x1e7)]+_0x1abb5e(0x301)+_0x551b43[_0x1abb5e(0x39f)]+_0x1abb5e(0x301)+_0x551b43[_0x1abb5e(0x207)]+_0x1abb5e(0x2b4)+_0x551b43['amount']+_0x1abb5e(0x301)+_0x551b43['id']);let _0x586f07=_0x551b43[_0x1abb5e(0x39f)],_0x378d66=![];currentCoins[_0x1abb5e(0x30a)](_0x325d70=>{const _0x386c23=_0x1abb5e;_0x325d70[_0x386c23(0x1e7)]==_0x551b43[_0x386c23(0x1e7)]&&(_0x378d66=!![]);});if(!_0x378d66)return;const _0x1c66b4=currentCoins[_0x1abb5e(0x21a)](_0x55131f=>_0x55131f[_0x1abb5e(0x1e7)]==_0x551b43[_0x1abb5e(0x1e7)]),_0x10e452=_0xbf04e2=>{if(_0x1c66b4)_0x1c66b4['orderstatus']=_0xbf04e2;};let _0x321105=![];for(const _0x1933b9 of lastOrders){const _0x1520fc=0x64,_0x219c06=0x1388;let _0x2e54f4=0x0;while(!_0x1933b9[_0x1abb5e(0x391)]&&_0x2e54f4*_0x1520fc<_0x219c06){_0x2e54f4++,await sleep(_0x1520fc);}if(_0x2e54f4>0x0)logger[_0x1abb5e(0x2ee)](_0x1abb5e(0x267)+_0x2e54f4*_0x1520fc/0x3e8+_0x1abb5e(0x37b));_0x1933b9['orderId']==_0x551b43['id']&&(_0x321105=!![]);}if(_0x586f07=='open'){_0x10e452(_0x1abb5e(0x2b5));if(_0x551b43[_0x1abb5e(0x207)]>0x0){if(_0x321105){setBlockTransactionDetection(!![]),logger['debug']('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x551b43['id']);const _0x5aa284=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5aa284,setBlockTransactionDetection(![]);}else logger['debug'](_0x1abb5e(0x2cf)+_0x551b43['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x586f07==_0x1abb5e(0x269)){_0x10e452('canceled');const _0x36bef8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x36bef8,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x586f07==_0x1abb5e(0x1f0)){if(lastOrders)for(const _0x2b6a92 of lastOrders){if(_0x2b6a92[_0x1abb5e(0x391)]==_0x551b43['id']){logger[_0x1abb5e(0x2ee)](_0x1abb5e(0x349)+_0x551b43['id']),_0x321105=!![];if(_0x2b6a92['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x1abb5e(0x2ee)](_0x1abb5e(0x1fa)+_0x551b43['id']);if(_0x551b43['average'])_0x2b6a92[_0x1abb5e(0x2bf)]=_0x551b43['average'];else{if(_0x551b43[_0x1abb5e(0x2bf)])_0x2b6a92[_0x1abb5e(0x2bf)]=_0x551b43[_0x1abb5e(0x2bf)];else{}}_0x2b6a92[_0x1abb5e(0x207)]=_0x551b43['filled'],updateHighestFee(_0x2b6a92),_0x10e452(_0x1abb5e(0x207)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0xc20c06=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xc20c06,setBlockTransactionDetection(![]);}_0x2b6a92['fee']={'currency':_0x551b43[_0x1abb5e(0x368)]?_0x551b43[_0x1abb5e(0x368)][_0x1abb5e(0x327)]:null,'cost':_0x551b43[_0x1abb5e(0x368)]?_0x551b43[_0x1abb5e(0x368)][_0x1abb5e(0x2a8)]:0x0},await updateCoinResults(_0x2b6a92);}}}!_0x321105&&(logger['debug'](_0x1abb5e(0x3a3)+_0x551b43['id']),_0x10e452(_0x1abb5e(0x207)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1b77c8=JSON[_0x1abb5e(0x2a2)](lastBalances[_0x1abb5e(0x258)]);const _0x178523=_0x1b77c8[_0x1abb5e(0x21a)](_0x2449d2=>_0x2449d2[_0x1abb5e(0x1e7)]==_0x551b43['symbol']);if(_0x178523){if(_0x586f07=='open')_0x178523[_0x1abb5e(0x26d)]=_0x178523[_0x1abb5e(0x26d)]==_0x1abb5e(0x207)?_0x1abb5e(0x207):_0x1abb5e(0x2b5);else{if(_0x586f07==_0x1abb5e(0x269))_0x178523[_0x1abb5e(0x26d)]=_0x178523[_0x1abb5e(0x26d)]==_0x1abb5e(0x207)?'filled':_0x1abb5e(0x269);else _0x586f07=='closed'&&(_0x178523[_0x1abb5e(0x26d)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x1abb5e(0x39c)](_0x1b77c8)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x38165a=_0x48ecc3;await getOpenOrders();let _0x58eed1=![];currentCoins[_0x38165a(0x30a)](_0x33776f=>{const _0x3bfce2=_0x38165a;_0x58eed1=allOpenOrders['find'](_0x2a6a1d=>_0x2a6a1d[_0x3bfce2(0x1e7)]==_0x33776f['symbol']),_0x33776f[_0x3bfce2(0x26d)]=_0x58eed1?_0x3bfce2(0x2b5):_0x3bfce2(0x39e);});}async function getCoins(_0x3afe02=0x0,_0x4efbf9=!![],_0x314fbb=config[_0x48ecc3(0x34f)]){const _0x39446d=_0x48ecc3;let _0x4bb691,_0x44d1da=[],_0x22e2ee=[],_0x5ae818=[];if(_0x3afe02)await sleep(_0x3afe02);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4bb691=await exchange[_0x39446d(0x2e2)](),mybalances=_0x4bb691[_0x39446d(0x250)];for(const [_0x58a487,_0x30e8f0]of Object[_0x39446d(0x32d)](mybalances)){_0x5ae818['push'](_0x58a487);}config[_0x39446d(0x258)][_0x39446d(0x30a)](_0x2b9bd2=>{const _0xf661f7=_0x39446d;!_0x5ae818['includes'](_0x2b9bd2[_0xf661f7(0x325)])&&(mybalances[_0x2b9bd2[_0xf661f7(0x325)]]=0x0);});if(_0x314fbb=='')for(const [_0x4a9aa0,_0x3b1905]of Object['entries'](mybalances)){_0x3b1905!=0x0&&_0x44d1da[_0x39446d(0x229)]({'coin':_0x4a9aa0});}else for(const [_0x45a208,_0x1c64a7]of Object[_0x39446d(0x32d)](mybalances)){const _0x2628e6=config[_0x39446d(0x258)]['find'](_0x41e642=>_0x41e642[_0x39446d(0x325)]==_0x45a208),_0x1f7acb=_0x45a208+'/'+_0x314fbb,_0x454e5b=_0x314fbb+'/'+_0x45a208,_0x43b38e=currentCoins[_0x39446d(0x21a)](_0x1f4554=>_0x1f4554['coin']==_0x45a208);if((_0x1c64a7!=0x0||_0x2628e6)&&(allSymbols[_0x39446d(0x33a)](_0x1f7acb)||_0x45a208==_0x314fbb))_0x43b38e?_0x44d1da[_0x39446d(0x229)]({..._0x43b38e,'number':Math[_0x39446d(0x2b8)](_0x1c64a7+(_0x2628e6&&_0x2628e6[_0x39446d(0x31f)]||0x0),0x0)}):_0x44d1da[_0x39446d(0x229)]({'coin':_0x45a208,'symbol':_0x1f7acb,'reverse':![],'number':Math['max'](_0x1c64a7+(_0x2628e6&&_0x2628e6[_0x39446d(0x31f)]||0x0),0x0),'orderstatus':_0x39446d(0x39e)});else{if((_0x1c64a7!=0x0||_0x2628e6)&&allSymbols[_0x39446d(0x33a)](_0x454e5b))_0x43b38e?_0x44d1da[_0x39446d(0x229)]({..._0x43b38e,'number':Math[_0x39446d(0x2b8)](_0x1c64a7+(_0x2628e6&&_0x2628e6[_0x39446d(0x31f)]||0x0),0x0)}):_0x44d1da[_0x39446d(0x229)]({'coin':_0x45a208,'symbol':_0x454e5b,'reverse':!![],'number':Math['max'](_0x1c64a7+(_0x2628e6&&_0x2628e6[_0x39446d(0x31f)]||0x0),0x0),'orderstatus':_0x39446d(0x39e)});else _0x2628e6&&_0x44d1da['push']({'coin':_0x2628e6[_0x39446d(0x325)],'symbol':_0x2628e6[_0x39446d(0x1e7)],'reverse':_0x2628e6[_0x39446d(0x344)],'number':0x0,'orderstatus':_0x39446d(0x39e)});}}}catch(_0x14cbd1){if(!_0x4efbf9)handleErrorNoStop(_0x14cbd1,_0x39446d(0x265));else await handleError(_0x14cbd1,_0x39446d(0x265));}return _0x44d1da['sort']((_0x4ac67d,_0x45bd64)=>_0x4ac67d[_0x39446d(0x317)]<_0x45bd64[_0x39446d(0x317)]?0x1:_0x45bd64['delta']<_0x4ac67d['delta']?-0x1:0x0),_0x22e2ee=cloneDeep(_0x44d1da),_0x44d1da=_0x44d1da[_0x39446d(0x233)](_0x4757f6=>{const _0x381385=_0x39446d,_0x50231c=config['portfolio']['find'](_0x3d2b0d=>_0x3d2b0d[_0x381385(0x325)]==_0x4757f6[_0x381385(0x325)]);return _0x50231c&&!_0x50231c[_0x381385(0x376)];}),[_0x44d1da,_0x22e2ee];}async function getCoinNumber(_0x17a8ef){const _0x58acc2=_0x48ecc3;let _0xcefa0;try{const _0x514f31=await exchange[_0x58acc2(0x2e2)]();_0xcefa0=_0x514f31['total'][_0x17a8ef];}catch(_0x35a8aa){await handleError(_0x35a8aa,'getCoinNumber()');}return _0xcefa0;}async function getOpenOrders(){const _0x48c191=_0x48ecc3;let _0xf54468;allOpenOrders=[];try{for(const _0x2cf51b of config[_0x48c191(0x258)]){!_0x2cf51b['excluded']&&_0x2cf51b[_0x48c191(0x325)]!=config[_0x48c191(0x34f)]&&(_0xf54468=await exchange['fetchOpenOrders'](_0x2cf51b[_0x48c191(0x1e7)]),_0xf54468[_0x48c191(0x2d1)]>0x0&&allOpenOrders[_0x48c191(0x229)](_0xf54468[0x0]));}}catch(_0x21f59){await handleError(_0x21f59,_0x48c191(0x35a));}}async function handleOpenOrders(_0x3777f4=0x0){const _0x182f30=_0x48ecc3;allOpenOrders[_0x182f30(0x2d1)]==0x0&&lockOrders==ORDERS[_0x182f30(0x27e)]&&allOrdersPlaced&&(_0x3777f4==0x0?(logger['debug'](_0x182f30(0x300)),_0x3777f4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x182f30(0x2ee)](_0x182f30(0x330)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1d803f){const _0x3f7e63=_0x48ecc3,_0x1e3443=ccxt[_0x3f7e63(0x363)][_0x1d803f[_0x3f7e63(0x1df)][_0x3f7e63(0x32a)]()],_0x12da9c=new _0x1e3443({'apiKey':_0x1d803f['apiKey'],'secret':_0x1d803f[_0x3f7e63(0x1db)],'options':{'defaultType':_0x3f7e63(0x259)}});if(_0x1d803f[_0x3f7e63(0x2ef)])_0x12da9c[_0x3f7e63(0x24a)]=_0x1d803f[_0x3f7e63(0x2ef)];try{await _0x12da9c[_0x3f7e63(0x2e2)]();}catch(_0x193774){logger['debug'](_0x3f7e63(0x2a6)+_0x193774[_0x3f7e63(0x26a)]());throw _0x193774;}}function cloneDeep(_0x515046){const _0x411a6b=_0x48ecc3;return JSON['parse'](JSON[_0x411a6b(0x39c)](_0x515046));}async function getPortfolio(_0x38fbae){const _0x429a21=_0x48ecc3;let _0x3e9924=[],_0x48173d=[],_0x5193a5=[],_0x1ec83a;_0x38fbae[_0x429a21(0x38d)]=crypt[_0x429a21(0x28e)](secure['privateKey'],_0x38fbae[_0x429a21(0x38d)])[_0x429a21(0x2c6)],_0x38fbae[_0x429a21(0x1db)]=crypt[_0x429a21(0x28e)](secure[_0x429a21(0x1f1)],_0x38fbae['apiSecret'])['message'],_0x38fbae[_0x429a21(0x2ef)]=crypt[_0x429a21(0x28e)](secure[_0x429a21(0x1f1)],_0x38fbae[_0x429a21(0x2ef)])[_0x429a21(0x2c6)];if(_0x38fbae[_0x429a21(0x38d)]!==_0x429a21(0x2fb)||_0x38fbae[_0x429a21(0x1db)]!=='************'||_0x38fbae[_0x429a21(0x2ef)]&&_0x38fbae[_0x429a21(0x2ef)]!=='************'){if(config[_0x429a21(0x1df)]){if(_0x38fbae[_0x429a21(0x38d)]==_0x429a21(0x2fb))_0x38fbae[_0x429a21(0x38d)]=config[_0x429a21(0x38d)];if(_0x38fbae[_0x429a21(0x1db)]=='************')_0x38fbae[_0x429a21(0x1db)]=config['apiSecret'];if(_0x38fbae['apiPassword']==_0x429a21(0x2fb))_0x38fbae[_0x429a21(0x2ef)]=config[_0x429a21(0x2ef)];}try{await testAPI(_0x38fbae);}catch(_0x524e3e){if(_0x524e3e['toString']()[_0x429a21(0x33a)](_0x429a21(0x38b))){logHistory(_0x429a21(0x321),_0x429a21(0x323)),proxyEmit(_0x429a21(0x297),![]);return;}else{logHistory(_0x429a21(0x321),_0x429a21(0x209)),logger[_0x429a21(0x2ee)](_0x429a21(0x22c),_0x524e3e),proxyEmit(_0x429a21(0x297),![]);return;}}exchange?updateExchange(_0x38fbae[_0x429a21(0x38d)],_0x38fbae['apiSecret'],_0x38fbae[_0x429a21(0x2ef)]):await initExchange(_0x38fbae[_0x429a21(0x1df)],_0x38fbae[_0x429a21(0x38d)],_0x38fbae[_0x429a21(0x1db)],_0x38fbae[_0x429a21(0x2ef)]);await loadSymbols();const _0x32c486=await getCoins(0x0,![],_0x38fbae[_0x429a21(0x34f)]);_0x5193a5=cloneDeep(_0x32c486[0x1]);}else{const _0x599411=await getCoins();_0x5193a5=cloneDeep(_0x599411[0x1]);}if(_0x38fbae[_0x429a21(0x34f)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x429a21(0x2de),_0x5193a5);else{_0x5193a5['forEach'](_0x176d64=>{const _0x44f066=_0x429a21;if(_0x176d64[_0x44f066(0x325)]!=_0x38fbae['basecoin']&&allSymbols[_0x44f066(0x33a)](_0x176d64[_0x44f066(0x1e7)]))_0x3e9924[_0x44f066(0x229)](_0x176d64[_0x44f066(0x1e7)]);});if(_0x3e9924[_0x429a21(0x2d1)]==0x0)logHistory(_0x429a21(0x321),_0x429a21(0x318));else{try{_0x48173d=await getTickers(_0x3e9924);}catch(_0x181e38){logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0x429a21(0x2ee)]('Error\x20details\x20(1):',_0x181e38),proxyEmit(_0x429a21(0x297),![]);return;}_0x5193a5[_0x429a21(0x30a)](_0x5e5ed0=>{const _0x8aa882=_0x429a21;_0x5e5ed0[_0x8aa882(0x325)]!=_0x38fbae[_0x8aa882(0x34f)]?_0x48173d[_0x5e5ed0['symbol']]?_0x1ec83a=_0x5e5ed0['reverse']?0x1/_0x48173d[_0x5e5ed0['symbol']][_0x8aa882(0x34a)]:_0x48173d[_0x5e5ed0[_0x8aa882(0x1e7)]][_0x8aa882(0x34a)]:_0x1ec83a=0x0:_0x1ec83a=0x1,_0x5e5ed0[_0x8aa882(0x2bf)]=formatResult(_0x1ec83a,0x8);}),await getMarketCap(_0x5193a5),proxyEmit('portfolio1',!![]),proxyEmit(_0x429a21(0x2de),_0x5193a5);}}}function truncateTradeAmount(_0x52dbd6,_0x1439e3){const _0x29d660=_0x48ecc3;let _0x443a98=0x0;try{_0x443a98=exchange[_0x29d660(0x35c)](_0x52dbd6,_0x1439e3);}catch(_0x505e44){}return _0x443a98;}function checkMinimums(_0x4ccea7){const _0x188858=_0x48ecc3;let _0x3810e2=!![];const _0x1024fe=!_0x4ccea7['reverse']?markets[_0x4ccea7['symbol']][_0x188858(0x200)][_0x188858(0x1f6)][_0x188858(0x306)]:markets[_0x4ccea7[_0x188858(0x1e7)]]['limits']['cost'][_0x188858(0x306)],_0x325d4b=!_0x4ccea7[_0x188858(0x344)]?markets[_0x4ccea7[_0x188858(0x1e7)]]['limits'][_0x188858(0x2a8)]['min']:markets[_0x4ccea7[_0x188858(0x1e7)]][_0x188858(0x200)]['amount']['min'],_0x814859=truncateTradeAmount(_0x4ccea7[_0x188858(0x1e7)],_0x4ccea7['trade']);_0x4ccea7[_0x188858(0x33e)]=_0x814859;if(Math[_0x188858(0x2f0)](_0x814859)<_0x1024fe)_0x3810e2=![];if(Math['abs'](_0x814859)*_0x4ccea7[_0x188858(0x34a)]<_0x325d4b)_0x3810e2=![];if(_0x4ccea7[_0x188858(0x33b)]==_0x188858(0x231)){let _0x22b264=config[_0x188858(0x258)]['find'](_0x15f4a6=>_0x15f4a6[_0x188858(0x325)]==_0x4ccea7[_0x188858(0x325)]);if(_0x22b264[_0x188858(0x31f)]>0x0){if(Math['abs'](_0x814859)>_0x4ccea7['number']-_0x22b264[_0x188858(0x31f)])_0x3810e2=![];}else{if(Math[_0x188858(0x2f0)](_0x814859)>_0x4ccea7[_0x188858(0x293)])_0x3810e2=![];}}if(_0x4ccea7[_0x188858(0x33b)]==_0x188858(0x2fd)){let _0x4018f9=config['portfolio'][_0x188858(0x21a)](_0x5c5641=>_0x5c5641[_0x188858(0x325)]==config[_0x188858(0x34f)]),_0x1a9296=currentCoins[_0x188858(0x21a)](_0x558694=>_0x558694['coin']==config[_0x188858(0x34f)]);if(_0x4018f9[_0x188858(0x31f)]>0x0){if(Math[_0x188858(0x2f0)](_0x814859)*_0x4ccea7[_0x188858(0x34a)]>_0x1a9296[_0x188858(0x293)]-_0x4018f9[_0x188858(0x31f)])_0x3810e2=![];}else{if(Math[_0x188858(0x2f0)](_0x814859)*_0x4ccea7[_0x188858(0x34a)]>_0x1a9296[_0x188858(0x293)])_0x3810e2=![];}}return _0x3810e2;}async function getBalances(_0x1edfec=!![]){const _0x1679dc=_0x48ecc3;let _0x3feda9=0x0,_0xb7bd43;const _0x527e3e=config[_0x1679dc(0x223)];if(config[_0x1679dc(0x364)]&&config[_0x1679dc(0x245)]<0x0)await validate24hChanges();currentCoins[_0x1679dc(0x30a)](_0x2ea6c9=>{const _0x4dc361=_0x1679dc;if(_0x2ea6c9[_0x4dc361(0x325)]!=config[_0x4dc361(0x34f)]){let _0x53a7af=gTicker[noslash(_0x2ea6c9[_0x4dc361(0x1e7)])];_0xb7bd43=_0x2ea6c9[_0x4dc361(0x344)]?0x1/_0x53a7af:_0x53a7af;}else _0xb7bd43=0x1;let _0x2f3b04=_0x2ea6c9[_0x4dc361(0x293)]*_0xb7bd43;_0x3feda9+=_0x2f3b04,_0x2ea6c9[_0x4dc361(0x34a)]=formatResult(Number(_0xb7bd43),0x8),_0x2ea6c9[_0x4dc361(0x237)]=_0x2f3b04;}),currentCoins[_0x1679dc(0x30a)](_0x167e25=>{const _0x53fd45=_0x1679dc;let _0x1b9c39=config[_0x53fd45(0x258)][_0x53fd45(0x21a)](_0x32560a=>_0x32560a[_0x53fd45(0x325)]==_0x167e25['coin']),_0x52bc02=Number(_0x1b9c39['distribution']),_0xb47486=_0x167e25[_0x53fd45(0x237)]/_0x3feda9*0x64,_0x5c5af4=_0x52bc02*_0x3feda9/0x64/_0x167e25[_0x53fd45(0x34a)]-_0x167e25[_0x53fd45(0x293)];_0x167e25[_0x53fd45(0x20a)]=formatResult(_0xb47486,0x3),_0x167e25[_0x53fd45(0x316)]=formatResult(_0x52bc02,0x3),_0x167e25[_0x53fd45(0x33e)]=formatResult(_0x5c5af4,0x8),_0x167e25[_0x53fd45(0x33b)]='',_0x167e25['valid']=![];if(_0x167e25[_0x53fd45(0x325)]!=config['basecoin']){if(_0x167e25[_0x53fd45(0x20a)]>_0x52bc02)_0x167e25[_0x53fd45(0x33b)]=_0x53fd45(0x231),_0x167e25[_0x53fd45(0x214)]=checkMinimums(_0x167e25);else _0x167e25[_0x53fd45(0x20a)]<_0x52bc02&&(_0x167e25['side']=_0x53fd45(0x2fd),_0x167e25[_0x53fd45(0x214)]=checkMinimums(_0x167e25));}_0x167e25[_0x53fd45(0x317)]=_0x167e25[_0x53fd45(0x20a)]/_0x167e25[_0x53fd45(0x316)]-0x1;if(_0x167e25['orderstatus']==_0x53fd45(0x207)||_0x167e25[_0x53fd45(0x26d)]==_0x53fd45(0x269))_0x167e25[_0x53fd45(0x26d)]=_0x53fd45(0x39e);}),currentCoins['sort']((_0xf02da9,_0x2c134b)=>_0xf02da9['delta']<_0x2c134b[_0x1679dc(0x317)]?0x1:_0x2c134b[_0x1679dc(0x317)]<_0xf02da9[_0x1679dc(0x317)]?-0x1:0x0);const _0x4b3e39=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4b3e39[_0x1679dc(0x337)],'usd':_0x4b3e39[_0x1679dc(0x246)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x527e3e},proxyEmit(_0x1679dc(0x2df),{'serverversion':serverversion,'balances':lastBalances});if(_0x1edfec){if(config[_0x1679dc(0x364)])headlessMode({'portfolio':currentCoins,'threshold':_0x527e3e});else{if(lockOrders==ORDERS[_0x1679dc(0x355)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x527e3e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5b1dcc=getNormalizedPerformance();getStartingBalances(_0x5b1dcc),emitPerformance(_0x5b1dcc);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3bcc51=_0x48ecc3;if(!lastBalances)return;let _0x368524=[],_0x313eb7,_0x1a8d33=JSON[_0x3bcc51(0x2a2)](lastBalances['portfolio']);_0x1a8d33[_0x3bcc51(0x357)]((_0x172182,_0x4ab838)=>_0x172182[_0x3bcc51(0x325)]>_0x4ab838[_0x3bcc51(0x325)]?0x1:_0x4ab838[_0x3bcc51(0x325)]>_0x172182['coin']?-0x1:0x0),_0x1a8d33[_0x3bcc51(0x30a)](_0x3d3dff=>{const _0x1f86fe=_0x3bcc51;let _0x4ba4c4={'coin':_0x3d3dff[_0x1f86fe(0x325)],'number':_0x3d3dff[_0x1f86fe(0x293)],'price':_0x3d3dff[_0x1f86fe(0x34a)]};_0x368524[_0x1f86fe(0x229)](_0x4ba4c4);});const _0x38d91d=await getFiat();_0x313eb7={'date':lastBalances[_0x3bcc51(0x1fb)][_0x3bcc51(0x34d)]('\x20')[0x0],'eur':_0x38d91d[_0x3bcc51(0x337)],'usd':_0x38d91d['usd'],'coins':_0x368524};let _0x4f7e48=dbPerformance['get'](_0x3bcc51(0x2c2))['find']({'date':_0x313eb7[_0x3bcc51(0x36b)]})[_0x3bcc51(0x237)]();_0x4f7e48?_0x313eb7[_0x3bcc51(0x36b)]!=config[_0x3bcc51(0x2a3)]&&dbPerformance['get'](_0x3bcc51(0x2c2))[_0x3bcc51(0x21a)]({'date':_0x313eb7[_0x3bcc51(0x36b)]})[_0x3bcc51(0x37e)](_0x313eb7)[_0x3bcc51(0x1e3)]():dbPerformance['get']('data')[_0x3bcc51(0x229)](_0x313eb7)[_0x3bcc51(0x1e3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xa90fd1=_0x48ecc3;let _0x246f45=[];if(dbPerformance[_0xa90fd1(0x25c)](_0xa90fd1(0x2c2))[_0xa90fd1(0x237)]()){let _0x3f0622=dbPerformance[_0xa90fd1(0x3a2)](_0xa90fd1(0x2c2))[_0xa90fd1(0x26e)]()[_0xa90fd1(0x233)](_0x3f4172=>{const _0x19fff5=_0xa90fd1;if(_0x3f4172[_0x19fff5(0x21d)][_0x19fff5(0x2d1)]==0x0)return![];else return!![];})[_0xa90fd1(0x278)](_0xa90fd1(0x36b))[_0xa90fd1(0x237)](),_0x5bef02=[...config[_0xa90fd1(0x366)]];_0x5bef02['sort']((_0x219f17,_0x308b5f)=>_0x219f17[_0xa90fd1(0x36b)]>_0x308b5f[_0xa90fd1(0x36b)]?-0x1:_0x308b5f['date']>_0x219f17[_0xa90fd1(0x36b)]?0x1:0x0);let _0x2651cb=0x1,_0x10f357=[],_0x5a5448=0x0;_0x3f0622[_0xa90fd1(0x240)]()[_0xa90fd1(0x344)]()[_0xa90fd1(0x30a)]((_0x545fa3,_0x24d126)=>{const _0x55c77a=_0xa90fd1;if(_0x5bef02[_0x5a5448]){if(_0x3f0622[_0x3f0622[_0x55c77a(0x2d1)]-_0x24d126]&&_0x5bef02[_0x5a5448][_0x55c77a(0x36b)]==_0x3f0622[_0x3f0622['length']-_0x24d126]['date']){if(_0x24d126<_0x3f0622[_0x55c77a(0x2d1)]){let _0x529cca=0x0,_0x118cd1=0x0;_0x3f0622[_0x3f0622[_0x55c77a(0x2d1)]-_0x24d126]['coins'][_0x55c77a(0x30a)](_0x3f8fca=>{_0x118cd1+=_0x3f8fca['number']*_0x3f8fca['price'];}),_0x5bef02[_0x5a5448]['changes'][_0x55c77a(0x30a)](_0x4795dd=>{const _0x49a569=_0x55c77a;_0x529cca+=_0x4795dd['number']*_0x4795dd[_0x49a569(0x2bf)];}),_0x2651cb*=_0x529cca/(_0x118cd1-_0x529cca)+0x1;}_0x5a5448++;}}let _0x2499b3=0x0;_0x545fa3[_0x55c77a(0x21d)][_0x55c77a(0x30a)](_0xe2846e=>{const _0x23f1bb=_0x55c77a;_0x2499b3+=_0xe2846e[_0x23f1bb(0x293)]*_0xe2846e[_0x23f1bb(0x2bf)];}),_0x10f357[_0x3f0622[_0x55c77a(0x2d1)]-_0x24d126-0x1]=_0x2499b3*(_0x2651cb-0x1);});let _0x5efcb9=[];_0x5bef02=[...config[_0xa90fd1(0x366)]]||[];let _0x2ffd34=0x0;_0x5a5448=0x0,_0x3f0622[_0xa90fd1(0x30a)]((_0xb45921,_0x3b2640)=>{const _0x777389=_0xa90fd1;if(_0x5bef02[_0x5a5448]){const _0x4a050a=fns[_0x777389(0x2a2)](_0x5bef02[_0x5a5448][_0x777389(0x36b)],_0x777389(0x3a6),new Date()),_0x4679f9=fns[_0x777389(0x2a2)](_0xb45921[_0x777389(0x36b)],'yyyy/MM/dd',new Date());if(fns[_0x777389(0x283)](_0x4a050a,_0x4679f9)){let _0x95bbd7=0x0;_0x5bef02[_0x5a5448]['changes'][_0x777389(0x30a)](_0x3ef1cf=>{const _0xdce30d=_0x777389;!_0x5efcb9[_0x3ef1cf[_0xdce30d(0x325)]]?_0x5efcb9[_0x3ef1cf[_0xdce30d(0x325)]]=_0x3ef1cf[_0xdce30d(0x293)]:(_0x95bbd7=_0x5efcb9[_0x3ef1cf[_0xdce30d(0x325)]],_0x5efcb9[_0x3ef1cf[_0xdce30d(0x325)]]+=_0x3ef1cf[_0xdce30d(0x293)]);const _0x186942=_0xb45921[_0xdce30d(0x21d)][_0xdce30d(0x21a)](_0x10cb99=>_0x10cb99[_0xdce30d(0x325)]==_0x3ef1cf[_0xdce30d(0x325)]);(!_0x186942||_0x186942[_0xdce30d(0x293)]==0x0)&&(_0x2ffd34+=(-_0x3ef1cf['number']-_0x95bbd7)*_0x3ef1cf['price']);}),_0x5a5448++;}}_0xb45921['coins'][_0x777389(0x30a)]((_0x5e7445,_0x1d4cf4)=>{const _0x4e4c21=_0x777389;_0x5efcb9[_0x5e7445[_0x4e4c21(0x325)]]&&(_0x5e7445['initial']=_0x5efcb9[_0x5e7445[_0x4e4c21(0x325)]]);}),_0x246f45[_0x777389(0x229)]({'date':_0xb45921[_0x777389(0x36b)],'eur':_0xb45921[_0x777389(0x337)],'usd':_0xb45921[_0x777389(0x246)],'offset':_0x10f357[_0x3b2640],'netoffset':_0x2ffd34,'coins':_0xb45921[_0x777389(0x21d)]});});}return _0x246f45;}function emitPerformance(_0x54e2f1){const _0xdfd91a=_0x48ecc3;_0x54e2f1[_0xdfd91a(0x2d1)]!==0x0?(proxyEmit('performance',_0x54e2f1),lastPerformanceEmitted=getDate()):proxyEmit(_0xdfd91a(0x2e0),[]);}function getPerf(_0x58eb64,_0x2d0a3d){const _0x116f52=_0x48ecc3;let _0x4fcba1=0x0,_0x34f3cc=0x0,_0x4c05fd=0x0;_0x58eb64[_0x116f52(0x21d)]['forEach'](_0x34e555=>{const _0xa4153b=_0x116f52;_0x4fcba1+=_0x34e555[_0xa4153b(0x293)]*_0x34e555['price'];});_0x2d0a3d&&(_0x4fcba1+=_0x58eb64['offset']);if(config[_0x116f52(0x34f)]===_0x116f52(0x312)||config[_0x116f52(0x34f)]==='ETH'||config['basecoin']===_0x116f52(0x2e1))_0x34f3cc=_0x4fcba1*_0x58eb64[_0x116f52(0x337)],_0x4c05fd=_0x4fcba1*_0x58eb64[_0x116f52(0x246)];else{if(usdBasecoins[_0x116f52(0x33a)](config['basecoin']))_0x34f3cc=_0x4fcba1*_0x58eb64[_0x116f52(0x337)]/_0x58eb64[_0x116f52(0x246)],_0x4c05fd=_0x4fcba1;else config[_0x116f52(0x34f)]===_0x116f52(0x339)&&(_0x34f3cc=_0x4fcba1,_0x4c05fd=_0x4fcba1*_0x58eb64[_0x116f52(0x246)]/_0x58eb64[_0x116f52(0x337)]);}return[_0x4fcba1,_0x34f3cc,_0x4c05fd];}function getKPIs(_0x2e9e34,_0x114988=_0x48ecc3(0x339)){const _0xca2c7d=_0x48ecc3,_0x178f3c=config[_0xca2c7d(0x34f)],_0x4f79bf=lastBalances,_0x4ff49e=currentCoins,_0x25ce47=getNormalizedPerformance(),_0x22e544=_0x2e9e34==='basecoin'?_0x178f3c:_0x2e9e34===_0xca2c7d(0x22e)||_0x2e9e34==='net-fiat'?_0x114988:_0xca2c7d(0x2d5)+_0x178f3c,_0x43abd2=_0x2e9e34===_0xca2c7d(0x31d)?_0xca2c7d(0x2b6):_0x2e9e34===_0xca2c7d(0x285)?_0xca2c7d(0x2b6):_0x22e544+'\x20value',_0x4948af=_0x2e9e34===_0xca2c7d(0x31d)||_0x2e9e34===_0xca2c7d(0x285)?_0xca2c7d(0x2b6):_0x22e544+_0xca2c7d(0x329);let _0x1b5945=0x0;_0x4ff49e[_0xca2c7d(0x30a)](_0x90f243=>{const _0xe4fe94=_0xca2c7d;_0x1b5945+=_0x90f243[_0xe4fe94(0x293)]*_0x90f243['last'];});if(_0x2e9e34===_0xca2c7d(0x22e)||_0x2e9e34===_0xca2c7d(0x285)){if(_0x178f3c===_0xca2c7d(0x312)||_0x178f3c==='ETH'||_0x178f3c==='PAXG')_0x1b5945=_0x1b5945*(_0x114988==='EUR'?_0x4f79bf[_0xca2c7d(0x337)]:_0x4f79bf[_0xca2c7d(0x246)]);else{if(usdBasecoins['includes'](_0x178f3c))_0x1b5945=_0x1b5945*(_0x114988===_0xca2c7d(0x339)?_0x4f79bf[_0xca2c7d(0x337)]/_0x4f79bf[_0xca2c7d(0x246)]:0x1);else _0x178f3c===_0xca2c7d(0x339)&&(_0x1b5945=_0x1b5945*(_0x114988===_0xca2c7d(0x339)?0x1:_0x4f79bf[_0xca2c7d(0x246)]/_0x4f79bf['eur']));}}let _0x20a876;if(_0x1b5945!==0x0){if(_0x2e9e34===_0xca2c7d(0x34f))_0x20a876=(_0x1b5945/startingBalances['basecoin']-0x1)*0x64;else{if(_0x114988===_0xca2c7d(0x339))_0x20a876=(_0x1b5945/startingBalances['eur']-0x1)*0x64;else _0x20a876=(_0x1b5945/startingBalances['usd']-0x1)*0x64;}let _0x33abbe=0x0;if(startingBalances[_0xca2c7d(0x21d)])_0x4ff49e[_0xca2c7d(0x30a)](_0x37c61a=>{const _0x599320=_0xca2c7d;let _0x5c4bdc=startingBalances['coins'][_0x599320(0x21a)](_0x73c844=>_0x73c844['coin']===_0x37c61a[_0x599320(0x325)]);if(_0x5c4bdc&&_0x5c4bdc[_0x599320(0x325)]&&_0x37c61a[_0x599320(0x293)]!==0x0)_0x33abbe+=_0x5c4bdc[_0x599320(0x293)]*_0x37c61a[_0x599320(0x34a)];});let _0x37f721=0x0;if(_0x25ce47[_0xca2c7d(0x2d1)]!==0x0){let _0x3a41eb=_0x25ce47[_0x25ce47[_0xca2c7d(0x2d1)]-0x1];_0x37f721=_0x3a41eb[_0xca2c7d(0x228)];}_0x33abbe-=_0x37f721;_0x2e9e34==='net-basecoin'&&(_0x20a876=(_0x1b5945-_0x33abbe)/startingBalances['basecoin']*0x64,_0x1b5945=_0x1b5945-_0x33abbe);if(_0x2e9e34==='net-fiat'){let _0x357053=_0x114988==='EUR'?startingBalances[_0xca2c7d(0x337)]:startingBalances[_0xca2c7d(0x246)];if(_0x178f3c===_0xca2c7d(0x312)||_0x178f3c===_0xca2c7d(0x2db)||_0x178f3c===_0xca2c7d(0x2e1))_0x33abbe=_0x114988===_0xca2c7d(0x339)?_0x33abbe*_0x4f79bf['eur']:_0x33abbe*_0x4f79bf['usd'];else{if(usdBasecoins[_0xca2c7d(0x33a)](_0x178f3c))_0x33abbe=_0x114988===_0xca2c7d(0x339)?_0x33abbe*_0x4f79bf[_0xca2c7d(0x337)]/_0x4f79bf[_0xca2c7d(0x246)]:_0x33abbe;else _0x178f3c===_0xca2c7d(0x339)&&(_0x33abbe=_0x114988===_0xca2c7d(0x339)?_0x33abbe:_0x33abbe*_0x4f79bf[_0xca2c7d(0x246)]/_0x4f79bf[_0xca2c7d(0x337)]);}_0x20a876=(_0x1b5945-_0x33abbe)/_0x357053*0x64,_0x1b5945=_0x1b5945-_0x33abbe;}if(_0x20a876){if(_0x20a876<0x64)_0x20a876=_0x20a876[_0xca2c7d(0x271)](0x2);else{if(_0x20a876<0x3e8)_0x20a876=_0x20a876[_0xca2c7d(0x271)](0x1);else _0x20a876=_0x20a876['toFixed'](0x0);}}else _0x20a876=Number('0')[_0xca2c7d(0x271)](0x2);if(_0x1b5945){if(Math[_0xca2c7d(0x2f0)](_0x1b5945)<0.000001)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x2);else{if(Math[_0xca2c7d(0x2f0)](_0x1b5945)<0.1)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x6);else{if(Math['abs'](_0x1b5945)<0x1)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x5);else{if(Math['abs'](_0x1b5945)<0xa)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x4);else{if(Math[_0xca2c7d(0x2f0)](_0x1b5945)<0x64)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x3);else{if(Math[_0xca2c7d(0x2f0)](_0x1b5945)<0x3e8)_0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x2);else _0x1b5945=_0x1b5945[_0xca2c7d(0x271)](0x2);}}}}}}else _0x1b5945=Number('0')[_0xca2c7d(0x271)](0x2);}else _0x20a876=Number('0')['toFixed'](0x2);return{'value':_0x1b5945,'change':_0x20a876,'leftTxt':_0x43abd2,'rightTxt':_0x4948af};}async function getStartingBalances(_0x30b2ac,_0x55289b=!![]){const _0x3fc294=_0x48ecc3;if(_0x30b2ac['length']!==0x0){const [_0x214cf0,_0x509a8f,_0x576edc]=getPerf(_0x30b2ac[0x0],!![]);let _0x5616d0=[];config[_0x3fc294(0x258)][_0x3fc294(0x30a)](_0x4c4976=>{const _0x2116b7=_0x3fc294;let _0x227f42=0x0,_0xb97e9f;config[_0x2116b7(0x366)][_0x2116b7(0x30a)](_0x27997f=>{const _0x16ef83=_0x2116b7;let _0x4d18fc=_0x27997f[_0x16ef83(0x395)]['find'](_0x5c2b03=>_0x5c2b03[_0x16ef83(0x325)]==_0x4c4976[_0x16ef83(0x325)]);if(_0x4d18fc){_0x227f42+=_0x4d18fc[_0x16ef83(0x293)];if(!_0xb97e9f)_0xb97e9f=_0x4d18fc[_0x16ef83(0x2bf)];}}),_0x5616d0[_0x2116b7(0x229)]({'coin':_0x4c4976[_0x2116b7(0x325)],'number':_0x227f42,'initialprice':_0xb97e9f});});const _0x58a75c={'basecoin':_0x214cf0,'eur':_0x509a8f,'usd':_0x576edc,'coins':_0x5616d0};if(_0x55289b)proxyEmit(_0x3fc294(0x315),_0x58a75c);startingBalances=_0x58a75c;}}function headlessMode(_0x4bad0f){const _0x3d50d8=_0x48ecc3;let _0x3bcb01=_0x4bad0f['portfolio'],_0x465b3e=_0x4bad0f[_0x3d50d8(0x223)],_0x4b20ea=[];for(let _0x49316d of _0x3bcb01){if(_0x49316d[_0x3d50d8(0x325)]!=config[_0x3d50d8(0x34f)]){if(_0x49316d['delta']>=_0x465b3e/0x64){if(_0x49316d[_0x3d50d8(0x214)])_0x4b20ea['push'](_0x49316d);}else{if(_0x49316d[_0x3d50d8(0x317)]<=-_0x465b3e/0x64){if(_0x49316d[_0x3d50d8(0x214)])_0x4b20ea[_0x3d50d8(0x229)](_0x49316d);}}}}_0x4b20ea[_0x3d50d8(0x2d1)]>0x0&&(lockOrders==ORDERS[_0x3d50d8(0x355)]&&!coolingDown&&_0x4b20ea[_0x3d50d8(0x30a)](_0x5d526c=>{const _0xaa0cdb=_0x3d50d8;logger['debug']('Trigger:\x20'+_0x5d526c[_0xaa0cdb(0x325)]+'\x20'+_0x5d526c['number']+'\x20'+_0x5d526c['last']+'\x20'+_0x5d526c[_0xaa0cdb(0x20a)]+'%\x20'+_0x5d526c[_0xaa0cdb(0x316)]+'%\x20'+(0x64*_0x5d526c[_0xaa0cdb(0x317)])[_0xaa0cdb(0x271)](0x2)+_0xaa0cdb(0x298)+_0x465b3e['toFixed'](0x2)+'%)');}),placeOrder(_0x4b20ea));}function notifyBalance(_0x323a93){const _0x2c6464=_0x48ecc3;let _0x12f084=_0x323a93[_0x2c6464(0x258)],_0x113703=_0x323a93[_0x2c6464(0x223)],_0x5bf85b=[];for(let _0x446c24 of _0x12f084){if(_0x446c24['coin']!=config[_0x2c6464(0x34f)]){if(_0x446c24[_0x2c6464(0x317)]>=_0x113703/0x64){if(_0x446c24[_0x2c6464(0x214)])_0x5bf85b[_0x2c6464(0x229)](_0x446c24);}else{if(_0x446c24[_0x2c6464(0x317)]<=-_0x113703/0x64){if(_0x446c24[_0x2c6464(0x214)])_0x5bf85b[_0x2c6464(0x229)](_0x446c24);}}}}if(_0x5bf85b[_0x2c6464(0x2d1)]>0x0){let _0x10ae94=_0x5bf85b[_0x2c6464(0x23e)](_0x3ab560=>_0x3ab560['coin']);_0x10ae94['sort']();let _0x39c125=_0x10ae94[_0x2c6464(0x281)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2c6464(0x2ad),_0x2c6464(0x210));lastCoinsToBalance=_0x39c125;}}function symbolToCoin(_0x5d1aa0){const _0x138f98=_0x48ecc3;let _0x3f406f;if(_0x5d1aa0[_0x138f98(0x33a)]('/'+config[_0x138f98(0x34f)]))_0x3f406f=_0x5d1aa0[_0x138f98(0x29a)]('/'+config[_0x138f98(0x34f)],'');if(_0x5d1aa0[_0x138f98(0x33a)](config[_0x138f98(0x34f)]+'/'))_0x3f406f=_0x5d1aa0[_0x138f98(0x29a)](config[_0x138f98(0x34f)]+'/','');return _0x3f406f;}async function unlockOrders(){const _0x1421b0=_0x48ecc3;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1421b0(0x27e)]){logger[_0x1421b0(0x2ee)](_0x1421b0(0x244)),lockOrders=ORDERS[_0x1421b0(0x37a)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x13be12=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x13be12,setBlockTransactionDetection(![]),validateOrdersState=_0x1421b0(0x263),persistOpenOrders([]),lockOrders=ORDERS[_0x1421b0(0x355)],logger[_0x1421b0(0x2ee)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x15a4a9){const _0x2fcc87=_0x48ecc3;if(_0x15a4a9)validateOrdersState=_0x15a4a9;logger[_0x2fcc87(0x2ee)](_0x2fcc87(0x284)+validateOrdersState+_0x2fcc87(0x309)+(lockOrders==0x1?_0x2fcc87(0x3a4):lockOrders==0x2?_0x2fcc87(0x23c):_0x2fcc87(0x2a4)));let _0x5559f5=[],_0x58985d=config[_0x2fcc87(0x1ef)]==_0x2fcc87(0x218)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2fcc87(0x336)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2fcc87(0x27e)])return;logger[_0x2fcc87(0x2ee)](_0x2fcc87(0x313)+validateOrdersState),lastOrders[_0x2fcc87(0x30a)](_0x2b2408=>{const _0x3b467b=_0x2fcc87;let _0x1aa2a0=![];_0x2b2408['filled']>0x0&&(_0x1aa2a0=!![]),_0x5559f5['push'](_0x1aa2a0),_0x1aa2a0&&config[_0x3b467b(0x1ef)]!=_0x3b467b(0x218)&&logHistory(_0x3b467b(0x23d),'Order\x20filled:\x20'+_0x2b2408[_0x3b467b(0x1e7)]+'\x20'+_0x2b2408['side']+'\x20#'+formatResult(_0x2b2408['filled'],0x8)+'\x20@'+formatResult(_0x2b2408[_0x3b467b(0x2bf)],0x8));}),_0x5559f5[_0x2fcc87(0x30a)]((_0x34d1f6,_0x518c5b)=>{const _0x2f8385=_0x2fcc87;if(_0x34d1f6)lastOrders[_0x2f8385(0x264)](_0x518c5b,0x1);}),persistOpenOrders(lastOrders);const _0x38fc91=coolingDown?_0x2fcc87(0x3a1):_0x2fcc87(0x30b);if(validateOrdersState==_0x2fcc87(0x263)){validateOrdersState=_0x2fcc87(0x25f);if(_0x5559f5[_0x2fcc87(0x33a)](![])){if(config[_0x2fcc87(0x1ef)]==_0x2fcc87(0x218)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x2fcc87(0x25f)){if(_0x5559f5[_0x2fcc87(0x33a)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x2fcc87(0x218)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x2fcc87(0x2c3))_0x5559f5['includes'](![])&&(config[_0x2fcc87(0x1ef)]==_0x2fcc87(0x218)?logHistory(_0x2fcc87(0x33c),_0x2fcc87(0x28a)+Math['round'](_0x58985d*validateOrderInterval/0xea60)+_0x2fcc87(0x2d8)+_0x38fc91):(await cancelOrders(),logHistory(_0x2fcc87(0x33c),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x58985d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x38fc91))),await unlockOrders();else{if(validateOrdersState==_0x2fcc87(0x1e0)){if(config[_0x2fcc87(0x1ef)]!='market')logHistory(_0x2fcc87(0x33c),_0x2fcc87(0x294)+_0x38fc91);await unlockOrders();}}}}}async function cancelOrders(){const _0x5b0b68=_0x48ecc3;lastOrders[_0x5b0b68(0x30a)](async _0x1b85a1=>{const _0x39de2d=_0x5b0b68;try{const _0x220286=await exchange[_0x39de2d(0x252)](_0x1b85a1[_0x39de2d(0x391)],_0x1b85a1[_0x39de2d(0x1e7)]);}catch(_0x3a87b2){if(_0x3a87b2[_0x39de2d(0x26a)]()[_0x39de2d(0x33a)](_0x39de2d(0x2e4))){}else await handleError(_0x3a87b2,_0x39de2d(0x383));}});}async function initCoinResults(_0x10ef4c){const _0x582a02=_0x48ecc3;_0x10ef4c?logger['debug'](_0x582a02(0x35e)+_0x10ef4c):logger[_0x582a02(0x2ee)](_0x582a02(0x2dd)),config[_0x582a02(0x258)][_0x582a02(0x30a)](_0x4e2c65=>{const _0xbd8617=_0x582a02;if(!_0x4e2c65[_0xbd8617(0x376)]&&_0x4e2c65[_0xbd8617(0x325)]!=config[_0xbd8617(0x34f)]){const _0x1e38ce=currentCoins[_0xbd8617(0x21a)](_0x2633ec=>_0x2633ec['coin']==_0x4e2c65[_0xbd8617(0x325)]),_0x5a03e2=gTicker[noslash(_0x4e2c65[_0xbd8617(0x1e7)])];let _0x15c860=_0x1e38ce?_0x1e38ce[_0xbd8617(0x293)]:null,_0x141a20=_0x4e2c65[_0xbd8617(0x344)]?0x1/_0x5a03e2:_0x5a03e2,_0x4d2324;config[_0xbd8617(0x366)][_0xbd8617(0x30a)](_0x4276ec=>{const _0x4779af=_0xbd8617;!_0x4d2324&&(_0x4d2324=_0x4276ec[_0x4779af(0x395)][_0x4779af(0x21a)](_0x472ee5=>_0x472ee5[_0x4779af(0x325)]==_0x4e2c65[_0x4779af(0x325)]),_0x4d2324&&(_0x15c860=_0x4d2324[_0x4779af(0x293)],_0x141a20=_0x4d2324[_0x4779af(0x2bf)]));});let _0x424dba=dbCoinResults['get']('coins')[_0xbd8617(0x21a)]({'coin':_0x4e2c65[_0xbd8617(0x325)]})[_0xbd8617(0x237)]();if(!_0x424dba){const _0x265b3d={'coin':_0x4e2c65['coin'],'number':_0x15c860,'breakeven':_0x141a20,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0xbd8617(0x229)](_0x265b3d)['write']();}else{if(_0x10ef4c&&_0x4e2c65['coin']==_0x10ef4c){const _0x1335de={'coin':_0x4e2c65[_0xbd8617(0x325)],'number':_0x15c860,'breakeven':_0x141a20,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xbd8617(0x3a2)](_0xbd8617(0x21d))[_0xbd8617(0x21a)]({'coin':_0x4e2c65[_0xbd8617(0x325)]})[_0xbd8617(0x37e)](_0x1335de)[_0xbd8617(0x1e3)]();}}}});}async function updateCoinResults(_0x4eddf3,_0x498664=![]){const _0x21502a=_0x48ecc3;let _0x47cc16,_0x220b70,_0x3e87ec,_0x2f34bb,_0x1ff57f,_0x30da3e,_0xd7b9df=dbCoinResults[_0x21502a(0x3a2)](_0x21502a(0x21d))['find']({'coin':_0x4eddf3[_0x21502a(0x325)]})['value'](),_0x14bc40=![];_0xd7b9df&&Object[_0x21502a(0x32d)](_0xd7b9df)[_0x21502a(0x30a)](([_0x3c744e,_0x103f8c])=>{if(_0x103f8c==null)_0x14bc40=!![];});(!_0xd7b9df||_0x14bc40)&&(await initCoinResults(_0x4eddf3[_0x21502a(0x325)]),_0xd7b9df=dbCoinResults['get'](_0x21502a(0x21d))[_0x21502a(0x21a)]({'coin':_0x4eddf3[_0x21502a(0x325)]})['value']());_0x4eddf3[_0x21502a(0x344)]&&(_0x30da3e={'filled':_0x4eddf3[_0x21502a(0x207)]*_0x4eddf3[_0x21502a(0x2bf)],'amount':_0x4eddf3[_0x21502a(0x207)]*_0x4eddf3[_0x21502a(0x2bf)],'side':_0x4eddf3[_0x21502a(0x33b)]==_0x21502a(0x231)?_0x21502a(0x2fd):_0x21502a(0x231),'price':0x1/_0x4eddf3[_0x21502a(0x2bf)]},_0x4eddf3={..._0x4eddf3,..._0x30da3e});_0x498664?_0x220b70=_0x4eddf3[_0x21502a(0x33b)]==_0x21502a(0x2fd)?_0xd7b9df['number']+_0x4eddf3['filled']:_0xd7b9df['number']-_0x4eddf3['filled']:_0x220b70=await getCoinNumber(_0x4eddf3[_0x21502a(0x325)]);if(_0x4eddf3[_0x21502a(0x368)]&&_0x4eddf3[_0x21502a(0x368)][_0x21502a(0x327)]==config[_0x21502a(0x34f)])_0x47cc16=Number(_0x4eddf3[_0x21502a(0x368)][_0x21502a(0x2a8)]);else{if(_0x4eddf3[_0x21502a(0x368)]&&_0x4eddf3['fee'][_0x21502a(0x327)]==_0x21502a(0x251)&&!_0x498664&&config[_0x21502a(0x34f)]!=_0x21502a(0x2e1))_0x47cc16=Number(_0x4eddf3[_0x21502a(0x368)]['cost'])*gTicker[_0x21502a(0x251)+config['basecoin']];else _0x47cc16=defaultFee*_0x4eddf3[_0x21502a(0x207)]*_0x4eddf3[_0x21502a(0x2bf)];}_0x4eddf3[_0x21502a(0x33b)]=='buy'?(_0x3e87ec=_0x220b70!=0x0?(_0xd7b9df[_0x21502a(0x2f7)]*_0xd7b9df['number']+_0x4eddf3[_0x21502a(0x2bf)]*(_0x220b70-_0xd7b9df[_0x21502a(0x293)])+_0x47cc16)/_0x220b70:0x0,_0x2f34bb=_0xd7b9df[_0x21502a(0x334)]):(_0x3e87ec=_0x220b70!=0x0?(_0xd7b9df[_0x21502a(0x2f7)]*_0xd7b9df[_0x21502a(0x293)]-_0x4eddf3[_0x21502a(0x2bf)]*(_0xd7b9df['number']-_0x220b70)+_0x47cc16)/_0x220b70:0x0,_0x2f34bb=_0xd7b9df['realized']+(_0x4eddf3['price']-_0xd7b9df['breakeven'])*_0x4eddf3[_0x21502a(0x207)]);_0x1ff57f=(_0x4eddf3['price']-_0x3e87ec-_0x47cc16/_0x4eddf3[_0x21502a(0x207)])*_0x220b70;let _0x18f041={'coin':_0x4eddf3[_0x21502a(0x325)],'number':_0x220b70,'breakeven':formatResult(_0x3e87ec,0x8),'realized':formatResult(_0x2f34bb,0x8),'unrealized':formatResult(_0x1ff57f,0x8),'fees':formatResult(_0xd7b9df['fees']+_0x47cc16,0x8),'sells':_0x4eddf3[_0x21502a(0x33b)]==_0x21502a(0x231)?_0xd7b9df[_0x21502a(0x201)]+0x1:_0xd7b9df['sells'],'buys':_0x4eddf3[_0x21502a(0x33b)]==_0x21502a(0x2fd)?_0xd7b9df[_0x21502a(0x3a0)]+0x1:_0xd7b9df[_0x21502a(0x3a0)]};dbCoinResults[_0x21502a(0x3a2)](_0x21502a(0x21d))[_0x21502a(0x21a)]({'coin':_0x4eddf3[_0x21502a(0x325)]})[_0x21502a(0x37e)](_0x18f041)[_0x21502a(0x1e3)]();if(!_0x498664){if(_0x4eddf3['fee']&&_0x4eddf3[_0x21502a(0x368)][_0x21502a(0x327)]==_0x21502a(0x251)){const _0x53e3fa=currentCoins[_0x21502a(0x21a)](_0x1f8702=>_0x1f8702[_0x21502a(0x325)]=='BNB');if(_0x53e3fa){let _0x3a6adf=dbCoinResults[_0x21502a(0x3a2)](_0x21502a(0x21d))['find']({'coin':'BNB'})['value']();_0x18f041={..._0x3a6adf,'number':_0x53e3fa[_0x21502a(0x293)]},dbCoinResults[_0x21502a(0x3a2)](_0x21502a(0x21d))[_0x21502a(0x21a)]({'coin':_0x21502a(0x251)})[_0x21502a(0x37e)](_0x18f041)[_0x21502a(0x1e3)]();}}}}async function placeOrder(_0x2f9701){const _0x5490ae=_0x48ecc3,_0x4e0c51=config['ordertype']==_0x5490ae(0x218)?_0x5490ae(0x218):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x5490ae(0x263);let _0x5950e5=![];lastOrders=[];for(const _0x38069f of _0x2f9701){let _0x84078f,_0x106e95,_0x6e7880,_0x4a0a46,_0x243bd2,_0x21699d=_0x38069f[_0x5490ae(0x1e7)];try{const _0x248012=await exchange['fetchTicker'](_0x21699d);_0x84078f=_0x38069f[_0x5490ae(0x344)]?0x1/_0x38069f['last']:_0x38069f[_0x5490ae(0x34a)],_0x106e95=_0x248012[_0x5490ae(0x202)],_0x6e7880=_0x248012[_0x5490ae(0x205)];_0x38069f['reverse']?(_0x4a0a46=_0x38069f['side']=='buy'?_0x5490ae(0x231):'buy',_0x243bd2=Math['abs'](_0x38069f[_0x5490ae(0x33e)])/_0x84078f):(_0x4a0a46=_0x38069f[_0x5490ae(0x33b)],_0x243bd2=Math['abs'](_0x38069f[_0x5490ae(0x33e)]));_0x4e0c51==_0x5490ae(0x26f)&&(config[_0x5490ae(0x1ef)]=='limit-high'&&(_0x84078f=_0x4a0a46==_0x5490ae(0x2fd)?_0x106e95:_0x6e7880),config[_0x5490ae(0x1ef)]==_0x5490ae(0x25e)&&(_0x84078f=_0x4a0a46=='buy'?_0x6e7880:_0x106e95));_0x243bd2=formatResult(_0x243bd2,0x8),_0x84078f=formatResult(_0x84078f,0x8);const _0x11b6a3=_0x4a0a46==_0x5490ae(0x231)?config[_0x5490ae(0x2d2)]?String['fromCodePoint']('0x'+config[_0x5490ae(0x2d2)])+'\x20':'':config[_0x5490ae(0x299)]?String[_0x5490ae(0x36e)]('0x'+config[_0x5490ae(0x299)])+'\x20':'',_0x17f617=_0x4e0c51==_0x5490ae(0x218)?'Market':config[_0x5490ae(0x1ef)]=='limit-high'?_0x5490ae(0x23a):_0x5490ae(0x374),_0x1abb56=(Math[_0x5490ae(0x1f8)](Math[_0x5490ae(0x268)]()*0x35a4e900)+0x5f5e100)[_0x5490ae(0x26a)]();lastOrders[_0x5490ae(0x229)]({'customId':_0x1abb56,'symbol':_0x21699d,'coin':_0x38069f[_0x5490ae(0x325)],'amount':_0x243bd2,'price':_0x84078f,'side':_0x4a0a46,'reverse':_0x38069f[_0x5490ae(0x344)],'filled':0x0});if(_0x4e0c51==_0x5490ae(0x218))logHistory(_0x5490ae(0x23d),''+_0x11b6a3+_0x17f617+_0x5490ae(0x2ce)+_0x21699d+'\x20'+_0x4a0a46+'\x20#'+formatResult(_0x243bd2,0x8)+'\x20@'+formatResult(_0x84078f,0x8));else logHistory(_0x5490ae(0x23d),''+_0x11b6a3+_0x17f617+_0x5490ae(0x2ce)+_0x21699d+'\x20'+_0x4a0a46+'\x20#'+formatResult(_0x243bd2,0x8)+'\x20@'+formatResult(_0x84078f,0x8));let _0x3e09ff;_0x4e0c51==_0x5490ae(0x218)?_0x4a0a46==_0x5490ae(0x2fd)&&[_0x5490ae(0x28d),_0x5490ae(0x30d),'Cex',_0x5490ae(0x2c8),_0x5490ae(0x215)][_0x5490ae(0x33a)](config[_0x5490ae(0x1df)])?_0x3e09ff=await exchange['createOrder'](_0x21699d,_0x4e0c51,_0x4a0a46,_0x243bd2,_0x84078f):_0x3e09ff=await exchange[_0x5490ae(0x398)](_0x21699d,_0x4e0c51,_0x4a0a46,_0x243bd2,undefined):_0x3e09ff=await exchange[_0x5490ae(0x398)](_0x21699d,_0x4e0c51,_0x4a0a46,_0x243bd2,_0x84078f);logger[_0x5490ae(0x2ee)](_0x5490ae(0x27a)+_0x3e09ff['id']+_0x5490ae(0x28b)+_0x1abb56);const _0x2992b3=lastOrders[_0x5490ae(0x2d1)]-0x1;if(_0x2992b3>=0x0&&lastOrders[_0x2992b3][_0x5490ae(0x253)]==_0x1abb56){lastOrders[_0x2992b3][_0x5490ae(0x391)]=_0x3e09ff['id'];if(_0x3e09ff[_0x5490ae(0x1f6)])lastOrders[_0x2992b3][_0x5490ae(0x1f6)]=_0x3e09ff[_0x5490ae(0x1f6)];if(_0x3e09ff[_0x5490ae(0x2bf)])lastOrders[_0x2992b3][_0x5490ae(0x2bf)]=_0x3e09ff[_0x5490ae(0x2bf)];lastOrders[_0x2992b3][_0x5490ae(0x368)]=_0x3e09ff['fee'];}if(config[_0x5490ae(0x365)]!=0x0){let _0x22d8c1=null;if(cooldownTracker[_0x5490ae(0x2d1)]==config[_0x5490ae(0x365)]-0x1)_0x22d8c1=cooldownTracker[_0x5490ae(0x249)]();const _0x57d56d=getTimeStamp();cooldownTracker['push'](_0x57d56d);if(_0x22d8c1){const _0x162ca5=fns[_0x5490ae(0x23b)](new Date(_0x57d56d),new Date(_0x22d8c1));if(_0x162ca5<cooldownInterval){logHistory(_0x5490ae(0x321),_0x5490ae(0x1fd)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x5490ae(0x22b)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x14d0d5){if(_0x14d0d5[_0x5490ae(0x26a)]()[_0x5490ae(0x33a)](_0x5490ae(0x20d)))lastOrders=lastOrders[_0x5490ae(0x233)](_0xdba31a=>_0xdba31a[_0x5490ae(0x1e7)]!=_0x21699d),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x21699d),_0x5950e5=!![];else{if(_0x14d0d5['toString']()[_0x5490ae(0x33a)](_0x5490ae(0x27d)))lastOrders=lastOrders[_0x5490ae(0x233)](_0x730308=>_0x730308[_0x5490ae(0x1e7)]!=_0x21699d),logHistory(_0x5490ae(0x321),'Order\x20amount\x20is\x20invalid:\x20'+_0x21699d),_0x5950e5=!![];else{if(_0x14d0d5['toString']()[_0x5490ae(0x33a)](_0x5490ae(0x387)))lastOrders=lastOrders[_0x5490ae(0x233)](_0x1ffedb=>_0x1ffedb[_0x5490ae(0x1e7)]!=_0x21699d),logHistory(_0x5490ae(0x321),_0x5490ae(0x36f)+_0x21699d),logger[_0x5490ae(0x2ee)](_0x14d0d5),_0x5950e5=!![];else _0x14d0d5[_0x5490ae(0x26a)]()[_0x5490ae(0x33a)](_0x5490ae(0x28f))?(lastOrders=lastOrders['filter'](_0x14e3ad=>_0x14e3ad['symbol']!=_0x21699d),logHistory(_0x5490ae(0x321),_0x5490ae(0x333)+_0x21699d),_0x5950e5=!![]):(lastOrders=lastOrders[_0x5490ae(0x233)](_0x147377=>_0x147377['symbol']!=_0x21699d),await handleError(_0x14d0d5,_0x5490ae(0x204),_0x21699d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x338cba=config[_0x5490ae(0x1ef)]==_0x5490ae(0x218)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x41cd05=_0x5490ae;validateOrders(_0x41cd05(0x2c3));},_0x338cba);}else unlockOrders();_0x5950e5&&config['headless']&&(logHistory(_0x5490ae(0x321),_0x5490ae(0x30c)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5490ae(0x33c),_0x5490ae(0x1e2)));}else{if(coolingDown)!config[_0x5490ae(0x364)]&&logHistory(_0x5490ae(0x321),_0x5490ae(0x326));else lockOrders!=ORDERS[_0x5490ae(0x355)]&&(!config[_0x5490ae(0x364)]&&(config[_0x5490ae(0x1ef)]==_0x5490ae(0x218)?logHistory(_0x5490ae(0x321),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5490ae(0x321),_0x5490ae(0x203))));}}function persistOpenOrders(_0x33df06){const _0x1a6df5=_0x48ecc3,_0x144e17={...config,'openOrders':_0x33df06};let _0x3981ff=dbConfig[_0x1a6df5(0x3a2)]('bot')[_0x1a6df5(0x21a)]({'botID':botID})[_0x1a6df5(0x237)]();_0x3981ff&&dbConfig['get'](_0x1a6df5(0x220))[_0x1a6df5(0x21a)]({'botID':botID})[_0x1a6df5(0x37e)](_0x144e17)[_0x1a6df5(0x1e3)]();}function restoreOrders(){const _0x338733=_0x48ecc3;let _0x190f0c;config[_0x338733(0x310)]&&allOpenOrders[_0x338733(0x30a)](_0x548743=>{const _0x508b18=_0x338733,_0x1c2158=config[_0x508b18(0x310)][_0x508b18(0x21a)](_0x3a43ca=>_0x3a43ca[_0x508b18(0x391)]==_0x548743['id']);_0x1c2158&&(lastOrders[_0x508b18(0x229)](_0x1c2158),_0x190f0c=_0x548743[_0x508b18(0x38a)]);});if(lastOrders[_0x338733(0x2d1)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x338733(0x25f),allOrdersPlaced=!![];const _0x369762=new Date()[_0x338733(0x239)](),_0x2af0fc=config['ordertype']==_0x338733(0x218)?validateOrderTimeout*0x3c*0x3e8:config[_0x338733(0x336)]*0x3c*0x3e8;if(_0x190f0c+_0x2af0fc>_0x369762){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x7f4cd4=_0x338733;validateOrders(_0x7f4cd4(0x2c3));},_0x190f0c+_0x2af0fc-_0x369762);}else validateOrders(_0x338733(0x2c3));}}async function sendMetricsTelegram(){const _0x453895=_0x48ecc3;if(!coinsLoaded){process[_0x453895(0x273)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xc5072c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2b90a1='';if(config[_0x453895(0x350)])_0x2b90a1='<b>'+config[_0x453895(0x20c)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x2b90a1=_0x453895(0x1f7)+botID+_0x453895(0x217);const _0x54726c=getKPIs('basecoin'),_0x4cc829=getKPIs(_0x453895(0x22e),config['fiat']),_0x16ac2e=getKPIs(_0x453895(0x31d)),_0x51a553=getKPIs(_0x453895(0x285),config[_0x453895(0x22e)]);_0x2b90a1+=_0x453895(0x230),_0x2b90a1+=_0x54726c['leftTxt']+_0x453895(0x38c)+_0x54726c[_0x453895(0x237)]+'\x0a',_0x2b90a1+=_0x54726c['rightTxt']+':\x20'+_0x54726c['change']+'%\x0a',_0x2b90a1+=_0x4cc829[_0x453895(0x238)]+'\x20:\x20'+_0x4cc829[_0x453895(0x237)]+'\x0a',_0x2b90a1+=_0x4cc829['rightTxt']+':\x20'+_0x4cc829[_0x453895(0x2b7)]+'%\x0a',_0x2b90a1+=_0x16ac2e['leftTxt']+':\x20'+_0x16ac2e[_0x453895(0x237)]+'\x20('+config['basecoin']+')\x0a',_0x2b90a1+=_0x16ac2e[_0x453895(0x389)]+':\x20'+_0x16ac2e[_0x453895(0x2b7)]+_0x453895(0x298)+config[_0x453895(0x34f)]+')\x0a',_0x2b90a1+=_0x51a553[_0x453895(0x238)]+':\x20'+_0x51a553[_0x453895(0x237)]+'\x20('+config[_0x453895(0x22e)]+')\x0a',_0x2b90a1+=_0x51a553[_0x453895(0x389)]+':\x20'+_0x51a553[_0x453895(0x2b7)]+_0x453895(0x298)+config['fiat']+')\x0a',_0x2b90a1+=_0x453895(0x2ae),process[_0x453895(0x273)]({'telegrammsg':_0x2b90a1},_0x23139b=>{});}async function sendPortfolioTelegram(){const _0x104787=_0x48ecc3;if(!coinsLoaded||!currentCoins[0x0][_0x104787(0x20a)]){process[_0x104787(0x273)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x1b5335=>{});return;}let _0x34a163='';if(config[_0x104787(0x350)])_0x34a163=_0x104787(0x1e1)+config[_0x104787(0x20c)]+_0x104787(0x1e6);else _0x34a163=_0x104787(0x1f7)+botID+_0x104787(0x1e6);_0x34a163+='<pre>',_0x34a163+=_0x104787(0x255),_0x34a163+=_0x104787(0x2f6),_0x34a163+='-------------------------------\x0a',currentCoins[_0x104787(0x30a)](_0x347465=>{const _0x4a85cd=_0x104787;_0x34a163+=_0x347465['coin'][_0x4a85cd(0x26c)](0x7)+'|\x20'+formatPad(_0x347465[_0x4a85cd(0x20a)],0x2,0x6)+'|\x20'+formatPad(_0x347465[_0x4a85cd(0x316)],0x2,0x6)+'|\x20'+formatPad(_0x347465['delta']*0x64,0x2,0x6)+'\x0a';}),_0x34a163+='</pre>',process['send']({'telegrammsg':_0x34a163},_0x6561fc=>{});}function formatPad(_0x333f93,_0x44c532,_0x5703d6){const _0x5bf2ab=_0x48ecc3,_0x575bf3=formatResultString(_0x333f93,_0x44c532);return _0x575bf3?_0x575bf3[_0x5bf2ab(0x2ed)](_0x5703d6):''['padStart'](_0x5703d6);}function logHistory(_0x41d1bd,_0x5c9db5,_0x3e3fab=''){const _0x50eaad=_0x48ecc3;logger[_0x50eaad(0x36d)](''+_0x5c9db5);let _0x5f123d={'time':getTimeStamp(),'type':_0x41d1bd,'event':_0x5c9db5};dbLogs[_0x50eaad(0x3a2)]('logs')['push'](_0x5f123d)[_0x50eaad(0x1e3)]();if(_0x3e3fab=='')_0x3e3fab=_0x5c9db5;proxyEmit(_0x50eaad(0x257),{'log':_0x5f123d,'summary':_0x3e3fab}),process['send']({'telegram':{..._0x5f123d,'botname':config['botname'],'showname':config[_0x50eaad(0x350)]}},_0x3e298d=>{});}function emitHistory(_0x4fd993={}){const _0x279af4=_0x48ecc3;Object['keys'](_0x4fd993)[_0x279af4(0x2d1)]==0x0&&(_0x4fd993={'type':['order','event'],'event':'','page':0x1});if(_0x4fd993[_0x279af4(0x2fe)]['includes'](_0x279af4(0x257)))_0x4fd993['type'][_0x279af4(0x264)](_0x4fd993[_0x279af4(0x2fe)][_0x279af4(0x2e3)](_0x279af4(0x257)),0x1,'error',_0x279af4(0x2ad),'success');if(dbLogs[_0x279af4(0x25c)](_0x279af4(0x35d))[_0x279af4(0x237)]()){let _0x46ad55=dbLogs[_0x279af4(0x3a2)](_0x279af4(0x35d))[_0x279af4(0x233)](_0x35b26b=>{const _0x237e84=_0x279af4;if(_0x4fd993[_0x237e84(0x2fe)][_0x237e84(0x2d1)]==0x0)return![];else return _0x4fd993[_0x237e84(0x2fe)][_0x237e84(0x33a)](_0x35b26b[_0x237e84(0x2fe)]);})['filter'](_0x2be8a8=>{const _0xbe281=_0x279af4;if(_0x4fd993[_0xbe281(0x257)]=='')return!![];else return _0x2be8a8[_0xbe281(0x257)][_0xbe281(0x32a)]()[_0xbe281(0x33a)](_0x4fd993[_0xbe281(0x257)][_0xbe281(0x32a)]());})['sortBy'](_0x279af4(0x1fb)),_0x80edc5=_0x46ad55[_0x279af4(0x237)]()[_0x279af4(0x2d1)];_0x46ad55=_0x46ad55[_0x279af4(0x344)]()[_0x279af4(0x240)]((_0x4fd993['page']-0x1)*logPageSize,_0x4fd993[_0x279af4(0x213)]*logPageSize-0x1)[_0x279af4(0x344)]()[_0x279af4(0x237)](),proxyEmit(_0x279af4(0x27c),{'logs':_0x46ad55,'total':_0x80edc5});}else proxyEmit(_0x279af4(0x27c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x371650){const _0x10dcb2=_0x48ecc3;if(dbLogs[_0x10dcb2(0x25c)](_0x10dcb2(0x35d))['value']()){const _0x295dda=dbLogs['get'](_0x10dcb2(0x35d))['sortBy'](_0x10dcb2(0x1fb))[_0x10dcb2(0x233)](_0x1fbd5b=>{const _0x16a81b=_0x10dcb2;return _0x1fbd5b[_0x16a81b(0x2fe)]==_0x16a81b(0x23d);})[_0x10dcb2(0x237)]();dbLogs[_0x10dcb2(0x3a2)]('logs')[_0x10dcb2(0x260)]()['write'](),dbLogs[_0x10dcb2(0x3a2)]('logs')[_0x10dcb2(0x37e)](_0x295dda)[_0x10dcb2(0x1e3)](),emitHistory(_0x371650);}}async function pauseBot(_0x18cb93=pauseBotIntervalShort,_0x378c8c,_0x427c3c,_0x91920d=![]){const _0x350b58=_0x48ecc3,_0x4854d0=new Date()['getTime']();if(!lastErrorShown||_0x4854d0-lastErrorShown>=_0x18cb93){lastErrorShown=_0x4854d0;if(!lastBotPause)lastBotPause=_0x4854d0,consecutivePauses=0x1;else{if(_0x4854d0-lastBotPause-_0x18cb93<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x91920d){logHistory(_0x350b58(0x321),_0x378c8c+_0x350b58(0x2c5)),await killBot();return;}else logHistory('error',_0x378c8c+pauseBotMsg),_0x18cb93=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4854d0;}_0x427c3c?logger[_0x350b58(0x2ee)]('('+consecutivePauses+')\x20'+_0x378c8c+_0x350b58(0x372),_0x427c3c):logger['debug']('('+consecutivePauses+')\x20'+_0x378c8c);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x18cb93),botPaused=![],_0x18cb93==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x82de59=_0x48ecc3;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x82de59(0x394)},_0x459bb6=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xbd3065,_0xee269e){const _0x5b8d0e=_0x48ecc3;if(botPaused)return;const _0x2a1efa=config[_0x5b8d0e(0x1df)]||_0x5b8d0e(0x22f);if(_0xee269e)logger[_0x5b8d0e(0x2ee)](_0x5b8d0e(0x1dd)+_0xee269e);const _0x480cc0=()=>{const _0x9bc950=_0x5b8d0e;loading[_0x9bc950(0x321)]=!![],emitLoadingProgress();};if(_0xbd3065[_0x5b8d0e(0x26a)]()[_0x5b8d0e(0x33a)](_0x5b8d0e(0x324)))logHistory(_0x5b8d0e(0x321),_0x2a1efa+_0x5b8d0e(0x2b1)),_0x480cc0();else{if(_0xbd3065[_0x5b8d0e(0x26a)]()[_0x5b8d0e(0x33a)](_0x5b8d0e(0x320)))logHistory(_0x5b8d0e(0x321),_0x2a1efa+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x480cc0();else _0xbd3065[_0x5b8d0e(0x26a)]()['includes']('AuthenticationError')?(logHistory(_0x5b8d0e(0x321),_0x2a1efa+_0x5b8d0e(0x342)),logHistory(_0x5b8d0e(0x321),_0x5b8d0e(0x37c)),_0x480cc0()):await handleError(_0xbd3065,null);}}async function handleError(_0x36446a,_0x4eb537,_0x3ab88a=''){const _0x4a5df5=_0x48ecc3;if(botPaused)return;let _0x3bca92;const _0x543c76=config[_0x4a5df5(0x1df)]||_0x4a5df5(0x22f);if(_0x4eb537)logger[_0x4a5df5(0x2ee)](_0x4a5df5(0x1dd)+_0x4eb537);if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x390)))_0x3bca92=_0x543c76+_0x4a5df5(0x24b),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x388)))_0x3bca92=_0x543c76+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)]('ExchangeNotAvailable')||_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x2dc)))_0x3bca92=_0x543c76+_0x4a5df5(0x2f8),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x1e9)))_0x3bca92=_0x543c76+_0x4a5df5(0x34c),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x1ff)))_0x3bca92=_0x543c76+_0x4a5df5(0x270),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x32a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x38a))||_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x32a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x397)))_0x3bca92='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x248)))_0x3bca92=_0x543c76+_0x4a5df5(0x25a),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a instanceof ccxt[_0x4a5df5(0x36a)])_0x3bca92=_0x543c76+'\x20network\x20error:\x20'+_0x36446a[_0x4a5df5(0x26a)](),logger['debug'](_0x4a5df5(0x2e7),_0x36446a),await pauseBot(undefined,_0x3bca92,_0x36446a);else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)]('API-key\x20format\x20invalid'))logHistory(_0x4a5df5(0x321),_0x543c76+_0x4a5df5(0x361)),logHistory(_0x4a5df5(0x321),_0x4a5df5(0x32f)),await killBot();else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4a5df5(0x321),_0x543c76+_0x4a5df5(0x38e)),logHistory('error',_0x4a5df5(0x32f)),await killBot();else{if(_0x36446a[_0x4a5df5(0x26a)]()[_0x4a5df5(0x33a)](_0x4a5df5(0x38b))&&_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x378)))_0x3bca92=_0x543c76+_0x4a5df5(0x216),await pauseBot(undefined,_0x3bca92,_0x36446a,!![]);else{if(_0x36446a[_0x4a5df5(0x26a)]()['includes']('AuthenticationError'))config[_0x4a5df5(0x2ef)]?_0x3bca92=_0x543c76+_0x4a5df5(0x1fc):_0x3bca92=_0x543c76+_0x4a5df5(0x30e),logHistory(_0x4a5df5(0x321),_0x3bca92),logHistory('error',_0x4a5df5(0x32f)),await killBot();else{if(_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x1da)))logHistory(_0x4a5df5(0x321),_0x543c76+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x4a5df5(0x321),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x36446a[_0x4a5df5(0x26a)]()['includes'](_0x4a5df5(0x1f4)))logHistory(_0x4a5df5(0x321),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x3ab88a);else{if(_0x36446a instanceof ccxt[_0x4a5df5(0x232)]){_0x3bca92=_0x543c76+'\x20exchange\x20error:\x20'+_0x36446a[_0x4a5df5(0x26a)](),logHistory(_0x4a5df5(0x321),_0x3bca92),logger[_0x4a5df5(0x2ee)]('Exchange\x20error\x20details:',_0x36446a);if(_0x3ab88a)logger[_0x4a5df5(0x2ee)](_0x4a5df5(0x373)+_0x3ab88a);await pauseBot(undefined,_0x3bca92,_0x36446a);}else{_0x3bca92=_0x4a5df5(0x23f)+_0x36446a[_0x4a5df5(0x26a)](),logHistory(_0x4a5df5(0x321),_0x3bca92),logger[_0x4a5df5(0x2ee)](_0x3bca92+_0x4a5df5(0x372),_0x36446a);if(_0x3ab88a)logger[_0x4a5df5(0x2ee)](_0x4a5df5(0x373)+_0x3ab88a);await pauseBot(undefined,_0x3bca92);}}}}}}}}}}}}}}}}function decryptRSA(_0x5ccc0e,_0x5a6d93){const _0x189d21=_0x48ecc3,_0x38389e=forge['pki']['privateKeyFromPem'](_0x5ccc0e),_0x191a20=_0x38389e[_0x189d21(0x28e)](forge[_0x189d21(0x20f)]['decode64'](_0x5a6d93),_0x189d21(0x243),{'md':forge['md'][_0x189d21(0x331)][_0x189d21(0x25b)](),'mgf1':{'md':forge['md'][_0x189d21(0x331)]['create']()}});return _0x191a20;}async function withRetry(_0x4be77d,_0x53de78){const _0x47568b=_0x48ecc3;let _0x5cc62d=![],_0x587ddf=0x0,_0x144221,_0xff1c8f;while(_0x587ddf<maxRetries){try{_0x144221=await _0x53de78();break;}catch(_0x4b81f6){_0xff1c8f=_0x4b81f6,!_0x5cc62d?(_0x5cc62d=!![],logger['debug'](_0x47568b(0x211)+_0x4be77d+':',_0x4b81f6[_0x47568b(0x26a)]())):await sleep(retryInterval);}_0x587ddf++;}if(_0x587ddf==0x0)return _0x144221;if(_0x587ddf>=maxRetries)throw _0xff1c8f;else return logger[_0x47568b(0x2ee)](_0x47568b(0x2f4)+_0x587ddf+_0x47568b(0x262)),_0x144221;}function formatResult(_0x7ec1fb,_0x11007e){return parseFloat(_0x7ec1fb['toFixed'](_0x11007e));}function formatResultTruncate(_0x38c8e3,_0x3d0b10){const _0x576766=_0x48ecc3;let _0x395b04=formatResultString(_0x38c8e3,0xa),_0x3c005c=_0x395b04[_0x576766(0x2e3)]('.');return _0x3c005c!=-0x1&&(_0x395b04=_0x395b04['slice'](0x0,_0x3c005c+_0x3d0b10+0x1)),Number(_0x395b04);}function formatResultString(_0x1b97b7,_0x25fe74){const _0xa7bfac=_0x48ecc3;let _0x49824b;if(!(''+_0x1b97b7)['includes']('e'))_0x49824b=+(Math[_0xa7bfac(0x2ab)](_0x1b97b7+'e+'+_0x25fe74)+'e-'+_0x25fe74);else{let _0xaeccc6=(''+_0x1b97b7)[_0xa7bfac(0x34d)]('e'),_0x11ff03='';+_0xaeccc6[0x1]+_0x25fe74>0x0&&(_0x11ff03='+'),_0x49824b=+(Math['round'](+_0xaeccc6[0x0]+'e'+_0x11ff03+(+_0xaeccc6[0x1]+_0x25fe74))+'e-'+_0x25fe74);}return Number(_0x49824b)[_0xa7bfac(0x271)](_0x25fe74);}function getServerTime(){const _0x2e6668=_0x48ecc3,_0x1c1926=new Date();return _0x1c1926[_0x2e6668(0x2ca)]()+'/'+(_0x1c1926[_0x2e6668(0x377)]()+0x1)[_0x2e6668(0x26a)]()[_0x2e6668(0x2ed)](0x2,'0')+'/'+_0x1c1926[_0x2e6668(0x224)]()['toString']()[_0x2e6668(0x2ed)](0x2,'0')+'\x20'+_0x1c1926[_0x2e6668(0x235)]()['toString']()[_0x2e6668(0x2ed)](0x2,'0')+':'+_0x1c1926[_0x2e6668(0x1f2)]()['toString']()['padStart'](0x2,'0')+':'+_0x1c1926['getSeconds']()[_0x2e6668(0x26a)]()[_0x2e6668(0x2ed)](0x2,'0');}function getTimeStamp(){const _0x2da45d=_0x48ecc3,_0x4be639=shiftedTime();return _0x4be639[_0x2da45d(0x2ca)]()+'/'+(_0x4be639[_0x2da45d(0x377)]()+0x1)['toString']()[_0x2da45d(0x2ed)](0x2,'0')+'/'+_0x4be639[_0x2da45d(0x224)]()[_0x2da45d(0x26a)]()[_0x2da45d(0x2ed)](0x2,'0')+'\x20'+_0x4be639['getHours']()[_0x2da45d(0x26a)]()[_0x2da45d(0x2ed)](0x2,'0')+':'+_0x4be639[_0x2da45d(0x1f2)]()['toString']()['padStart'](0x2,'0')+':'+_0x4be639[_0x2da45d(0x335)]()[_0x2da45d(0x26a)]()[_0x2da45d(0x2ed)](0x2,'0');}function getDate(){const _0x41e2ba=_0x48ecc3,_0x173de0=shiftedTime();return _0x173de0[_0x41e2ba(0x2ca)]()+'/'+(_0x173de0[_0x41e2ba(0x377)]()+0x1)[_0x41e2ba(0x26a)]()[_0x41e2ba(0x2ed)](0x2,'0')+'/'+_0x173de0[_0x41e2ba(0x224)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x3b0e16=_0x48ecc3,_0x4d552b=shiftedTime();return _0x4d552b[_0x3b0e16(0x235)]()[_0x3b0e16(0x26a)]()['padStart'](0x2,'0');}function sleep(_0x2b723d){return new Promise(_0x39308f=>setTimeout(_0x39308f,_0x2b723d));}function shiftedTime(){const _0x43d741=_0x48ecc3,_0x531d56=new Date();let _0x23fdd1=_0x531d56;if(config&&config[_0x43d741(0x256)]!==0x0)_0x23fdd1=fns[_0x43d741(0x227)](_0x531d56,{'hours':config[_0x43d741(0x256)]});return _0x23fdd1;}function timer(_0x29cade){const _0x46678c=_0x48ecc3,_0x25b866=new Date();!lasttime?console[_0x46678c(0x384)](getTimeStamp()+_0x46678c(0x370),_0x29cade,_0x25b866):console[_0x46678c(0x384)](getTimeStamp()+_0x46678c(0x370),_0x29cade,(_0x25b866-lasttime)/0x3e8),lasttime=_0x25b866;}