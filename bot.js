const _0x251f1d=_0x1eee;(function(_0x2591be,_0x523283){const _0x13c474=_0x1eee,_0x225667=_0x2591be();while(!![]){try{const _0xa24e1b=-parseInt(_0x13c474(0x167))/0x1+parseInt(_0x13c474(0x2c6))/0x2+parseInt(_0x13c474(0x1da))/0x3+-parseInt(_0x13c474(0x153))/0x4+-parseInt(_0x13c474(0x1dc))/0x5+-parseInt(_0x13c474(0x255))/0x6*(parseInt(_0x13c474(0x215))/0x7)+parseInt(_0x13c474(0x259))/0x8;if(_0xa24e1b===_0x523283)break;else _0x225667['push'](_0x225667['shift']());}catch(_0x95228c){_0x225667['push'](_0x225667['shift']());}}}(_0x5648,0xd3e42));const _0x2d0ca8=function(){let _0x4f61e1=!![];return function(_0x16e606,_0x2f071c){const _0x2ee46f=_0x4f61e1?function(){const _0x1452ba=_0x1eee;if(_0x2f071c){const _0x2dcf37=_0x2f071c[_0x1452ba(0x1cf)](_0x16e606,arguments);return _0x2f071c=null,_0x2dcf37;}}:function(){};return _0x4f61e1=![],_0x2ee46f;};}(),_0x3681cd=_0x2d0ca8(this,function(){const _0x42c114=_0x1eee;return _0x3681cd[_0x42c114(0x152)]()[_0x42c114(0x172)](_0x42c114(0x17b))[_0x42c114(0x152)]()[_0x42c114(0x18b)](_0x3681cd)[_0x42c114(0x172)](_0x42c114(0x17b));});_0x3681cd();'use strict';const ccxt=require(_0x251f1d(0x2a4)),low=require(_0x251f1d(0x2b0)),FileSync=require(_0x251f1d(0x1e3)),fs=require('fs'),fns=require(_0x251f1d(0x1ef)),Crypt=require(_0x251f1d(0x14c))[_0x251f1d(0x251)],util=require(_0x251f1d(0x217)),argv=require(_0x251f1d(0x17c))(process[_0x251f1d(0x23a)][_0x251f1d(0x216)](0x2))[_0x251f1d(0x23a)],path=require(_0x251f1d(0x14d));let exchange;global[_0x251f1d(0x23f)]={},global[_0x251f1d(0x1e4)]={};const usdBasecoins=[_0x251f1d(0x2ab),'BUSD',_0x251f1d(0x1b5),_0x251f1d(0x16b),_0x251f1d(0x1ca),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x251f1d(0x277)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x251f1d(0x1e2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x251f1d(0x182))['version'],botID=process[_0x251f1d(0x23a)][0x2]||_0x251f1d(0x2a9),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x251f1d(0x19d)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x251f1d(0x23a)][0x3]||'',configpath=userID?_0x251f1d(0x22a)+userID+'/':_0x251f1d(0x22a),logspath=userID?_0x251f1d(0x1b8)+userID+'/':_0x251f1d(0x1b8),loggerfile=fs[_0x251f1d(0x1bb)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x251f1d(0x1a0)](configpath)&&fs[_0x251f1d(0x2b9)](configpath);!fs['existsSync'](logspath)&&fs[_0x251f1d(0x2b9)](logspath);const configfile=configpath+_0x251f1d(0x20a)+botID+_0x251f1d(0x176),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x251f1d(0x20a)+botID+_0x251f1d(0x24e),coinresultsfile=configpath+_0x251f1d(0x20a)+botID+_0x251f1d(0x25e),settingsfile=configpath+_0x251f1d(0x1e8),securefile=configpath+_0x251f1d(0x20b),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x251f1d(0x175)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x251f1d(0x2a5)]({'data':[],'version':serverversion})[_0x251f1d(0x175)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x5648(){const _0x5165c1=['get','1545460BSzElj','starting-balance-','filled','indexOf','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','rightTxt','ExchangeError','fetchTicker','starting-balances','hybrid-crypto-js','path','remove','send','InvalidOrder','Unfilled\x20order(s)\x20canceled\x20after\x20','toString','731964FKcEOQ','Order(s)\x20not\x20validated\x20after\x20','restart',':\x20Bot\x20','BTC','Huobipro','random','emitHistory','cancelOrder','balancing\x20resumed','time','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','datetime','differenceInSeconds','reverse','2\x20-\x20Validate\x20orders:\x20','Huobi','BNB','Pausing\x20for\x20','findIndex','1074924FCngbK','sells','\x20-\x20bot\x20not\x20started','includes','USDT','split','openOrders','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','showConfig','\x20network\x20error','coins','search','apiSecret','Order\x20filled:\x20','write','-config.json','exec','\x20|\x20Custom\x20ID:\x20','offset','\x20has\x20a\x2024h\x20drop\x20of\x20','(((.+)+)+)+$','yargs/yargs','progress','Fee\x20discount\x20refund\x20detected:\x20','1\x20-\x20FILLED:\x20','\x20|\x20','leftTxt','./version.json','***','password','Binance','buy','cloneDeep','basecoin','excluded','\x20metrics:</b>\x20\x0a\x0a','constructor','configuration','valid','change24h','join','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Resetting\x20bot\x20history','EUR','trade','emojisell','sha256','additional\x20symbols\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','sort','parse','API-key\x20format\x20invalid','delta','\x20not\x20responding','Error:\x20Invalid\x20argument\x20','2.5.0','debug','existsSync','set','padStart','getSeconds','value','type','fetchBalance','watchTrades(2)','limit','resetHistory','Exchange','data','getHours','usd','\x20portfolio:</b>\x20\x0a\x0a','splice','getCoins()','Cex','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','watchOrders','timeshift','TUSD','sendMetricsTelegram','Uncaught\x20ExchangeError:','./logs/','sell','fee','createWriteStream','market','placeOrder','average','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','cooldown','startnumber','args','Limit\x20(low-margin)','\x20|\x20lock\x20orders:\x20','Uncaught\x20Exception:','portfolio','highest','AuthenticationError','entries','USDC','replace','timestamp','running','apiPassword','apply','\x20exchange','Reset\x20|\x20','target','balances','no\x20additional\x20symbols','\x20-\x20liquidity\x20settings\x20updated\x20accordingly',':\x20timer\x20>','Bybit','has','bots','4737465hOIBvq','createOrder','2368870DDuTYL','emojibuy','Transaction\x20detection\x20blocked','version','getMinutes','cancel','UNLOCKED','lowdb/adapters/FileSync','change','customId','add','\x20>\x20[DEBUG]\x20','bb-settings.json','botID','Manual\x20balancing\x20required','order','min','fromCodePoint','liquidity','date-fns','getMonth','Cooldown\x20ended\x20-\x20balancing\x20resumed','pro','yyyy-MM-dd\x27T\x27HH:mm:ss','last','stringify','2\x20-\x20FILLED\x20known\x20order:\x20','net-fiat','Uncaught\x20NetworkError:','watchTrades','floor','autoliquidity','log','Executed\x20','storeFiat','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','colorscheme','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','<b>','exchange\x20reloaded','timeout','Market','fetchClosedOrders','headless','\x20exchange\x20error','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','bot-','bb-secure.json','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','added','exchange','message','RSA-OAEP','privateKey','\x20API\x20key\x20is\x20invalid','threshold','9828546TGQPkX','slice','util','substring','yyyy/MM/dd','Net\x20','coin','currency','getDate','getPortfolio(1)','watchTransactions','push','amount','limit-high','none','Bitget','onepagemode','kill','format','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','price','./config/','showname','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','assign','InvalidNonce','parseISO','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','UNLOCKING','event','red_yellow_blue','ID:\x20','net-basecoin','toUpperCase','initial','getStartingBalances','status','argv','getOpenOrders()','1\x20-\x20Validate\x20orders:\x20','sendPortfolioTelegram','LOCKED','ticker','buys','deleteHistoryAlerts','writeFile','\x20:\x20','number','getPortfolio','\x20>\x20','************','2\x20-\x20Handled\x20open\x20orders','watchTrades(1)','fetchTickers','abs','sortBy','date','-performance.json','recent20','\x20value','Crypt','Initiating\x20exchange\x20reload','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','distribution','6oXWyJk','OrderNotFound','\x20|\x20Error\x20details:\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','13214304jUOdTQ','performance','Waited\x20','0\x20-\x20EXECUTION:\x20','Resetting\x20coin\x20results:\x20','-results.json','%\x20(','netoffset','bot','orderId','ordertype','fiat','success','keys','apiKey','-events.json','breakeven','ongoing','Limit\x20(high-margin)','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Invalid\x20quantity','toLowerCase','open','total','\x20minutes\x20-\x20','remainingSymbols','basecoinvalue','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','startdate','round','freeze','limit-low','removed','decrypt','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','canceled','getTime','secure','NetworkError','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','forEach','\x20order:\x20','unlinkSync','toggleBotMode','must\x20be\x20greater\x20than\x20minimum\x20amount','error','</pre>','spot','limits','botname','isEqual','RequestTimeout','side','ORDERS.UNLOCKING','exchanges','Bot\x20','symbol','event-history','DDoSProtection','max','orderstatus','ETH','InsufficientFunds','active','page','getFullYear','fetchOpenOrders','no\x20open\x20orders','filter','final','initclient','logs','changes','percentage','RateLimitExceeded','ccxt','defaults','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Error\x20while\x20deleting\x20files:\x20','find','001','realized','USD','length','toFixed','Portfolio\x20change\x20detected:\x20','cost','lowdb','getPortfolio(2)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','<b>Bot\x20','recreateCoinResults()','\x20not\x20available','ask','closed','eur','mkdirSync','ORDERS.UNLOCKED','-------------------------------\x0a','Net\x20effect','3\x20-\x20handling\x20FILLED\x20order:\x20','loadMarkets','2.3.5','loadSymbols()','full','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Executing\x20exchange\x20reload','\x20API\x20secret\x20is\x20invalid'];_0x5648=function(){return _0x5165c1;};return _0x5648();}dbConfig[_0x251f1d(0x2a5)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x251f1d(0x2a5)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x251f1d(0x195),'rsaStandard':_0x251f1d(0x211)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3d9ab9=>{console['log'](_0x3d9ab9);},'simple':_0x3d1ed1=>{const _0x39d005=_0x251f1d;console[_0x39d005(0x1fc)](_0x3d1ed1),loggerfile['write'](util[_0x39d005(0x227)](_0x3d1ed1)+'\x0a');},'full':async(_0x5860a7,_0xf3b75b='')=>{const _0x1fac74=_0x251f1d;let _0x274cd0;if(config[_0x1fac74(0x22b)])_0x274cd0=getTimeStamp()+':\x20'+config[_0x1fac74(0x28a)]+_0x1fac74(0x246)+_0x5860a7;else _0x274cd0=getTimeStamp()+':\x20Bot\x20'+botID+_0x1fac74(0x246)+_0x5860a7;console[_0x1fac74(0x1fc)](_0x274cd0),loggerfile['write'](util['format'](_0x274cd0)+'\x0a'),_0xf3b75b&&(console[_0x1fac74(0x1fc)](_0xf3b75b),loggerfile[_0x1fac74(0x175)](util[_0x1fac74(0x227)](_0xf3b75b)+'\x0a'));},'debug':async(_0x33e0a9,_0x165c5c='')=>{const _0x35f251=_0x251f1d;let _0x590520;if(config[_0x35f251(0x22b)])_0x590520=getTimeStamp()+':\x20'+config[_0x35f251(0x28a)]+_0x35f251(0x1e7)+_0x33e0a9;else _0x590520=getTimeStamp()+_0x35f251(0x156)+botID+_0x35f251(0x1e7)+_0x33e0a9;if(debugging)console[_0x35f251(0x1fc)](_0x590520);loggerfile['write'](util[_0x35f251(0x227)](_0x590520)+'\x0a');if(_0x165c5c){if(debugging)console['log'](_0x165c5c);loggerfile['write'](util[_0x35f251(0x227)](_0x165c5c)+'\x0a');}}};process['on']('uncaughtException',function(_0x4862b4){const _0x57cdd6=_0x251f1d;logHistory('error',_0x57cdd6(0x1bf)),logger[_0x57cdd6(0x19f)](_0x57cdd6(0x1c5),_0x4862b4);});settings[_0x251f1d(0x1b4)]!=config['timeshift']&&updateTimeshift(settings[_0x251f1d(0x1b4)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x251f1d(0x225)]);process[_0x251f1d(0x14f)]({'started':_0x251f1d(0x1cd)},_0x3058c2=>{}),initializeProcessListeners();function proxyEmit(_0x107fdd,_0x31faae=null){const _0x35a8a6=_0x251f1d;process[_0x35a8a6(0x14f)]({'function':_0x107fdd,'args':_0x31faae},_0x9f3880=>{});}function initializeProcessListeners(){const _0x58da9a=_0x251f1d;process['on'](_0x58da9a(0x210),_0x57f53a=>{const _0x371dbc=_0x58da9a;switch(Object[_0x371dbc(0x266)](_0x57f53a)[0x0]){case'timeshift':_0x57f53a[_0x371dbc(0x1b4)]!=undefined&&(settings['timeshift']=_0x57f53a[_0x371dbc(0x1b4)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x57f53a[_0x371dbc(0x225)]!=undefined&&(settings[_0x371dbc(0x225)]=_0x57f53a[_0x371dbc(0x225)],updateOnepagemode(settings[_0x371dbc(0x225)]));break;case _0x371dbc(0x1d9):_0x57f53a[_0x371dbc(0x1d9)]!=undefined&&(bots=JSON[_0x371dbc(0x199)](_0x57f53a[_0x371dbc(0x1d9)]),proxyEmit(_0x371dbc(0x1d9),bots));break;case'function':switch(_0x57f53a['function']){case _0x371dbc(0x29f):initclient();break;case _0x371dbc(0x284):toggleBotMode();break;case _0x371dbc(0x15a):emitHistory(_0x57f53a[_0x371dbc(0x1c2)]);break;case _0x371dbc(0x241):deleteHistoryAlerts(_0x57f53a['args']);break;case _0x371dbc(0x245):getPortfolio(_0x57f53a[_0x371dbc(0x1c2)]);break;case'storeConfiguration':storeConfiguration(_0x57f53a['args']);break;case'storeHeadless':storeHeadless(_0x57f53a[_0x371dbc(0x1c2)]);break;case _0x371dbc(0x1fe):storeFiat(_0x57f53a[_0x371dbc(0x1c2)]);break;case _0x371dbc(0x1a9):resetHistory();break;case _0x371dbc(0x238):getStartingBalances(getNormalizedPerformance());break;case _0x371dbc(0x1bd):placeOrder(_0x57f53a['args']);break;case'cancelLoading':cancelLoading();break;case _0x371dbc(0x16f):showConfig();break;case _0x371dbc(0x1b6):sendMetricsTelegram();break;case _0x371dbc(0x23d):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x29ced9=null,_0x3a3a83=![]){const _0x6ece19=_0x251f1d;logger[_0x6ece19(0x19f)](_0x6ece19(0x1d1)+(_0x29ced9&&_0x29ced9[_0x6ece19(0x2ac)]>0x0?_0x6ece19(0x196)+_0x29ced9['join'](','):_0x6ece19(0x1d4))+_0x6ece19(0x180)+(_0x3a3a83?_0x6ece19(0x203):'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x6ece19(0x20f)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3a3a83)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x6ece19(0x267)]!=''&&config[_0x6ece19(0x267)]!='***'){if(_0x3a3a83){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x5959ef){handleErrorNoStop(_0x5959ef,_0x6ece19(0x2c0));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x29ced9);const _0x1d0f9f=await getCoins();[currentCoins,currentCoinsAll]=_0x1d0f9f,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x6ece19(0x2ac)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x50d90d){await handleError(_0x50d90d,'stopExchange()');}}async function reloadExchange(){const _0x320ef6=_0x251f1d;logger[_0x320ef6(0x19f)](_0x320ef6(0x252));while(lockOrders!=ORDERS[_0x320ef6(0x1e2)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x320ef6(0x19f)](_0x320ef6(0x2c3)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5ea807=config[_0x251f1d(0x20f)],_0x4ed602=config[_0x251f1d(0x267)],_0xa1d2fa=config[_0x251f1d(0x173)],_0x29a632=config[_0x251f1d(0x1ce)]){const _0x4d9641=_0x251f1d;exchange&&await stopExchange();!supportedExchanges()[_0x4d9641(0x16a)](_0x5ea807)&&(logHistory('error',_0x4d9641(0x27b)+_0x5ea807+_0x4d9641(0x1d0)),killBot());const _0x134335=ccxt[_0x4d9641(0x1f2)][_0x5ea807[_0x4d9641(0x26e)]()];exchange=new _0x134335({'apiKey':_0x4ed602,'secret':_0xa1d2fa,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4d9641(0x288)}});if(_0x29a632)exchange[_0x4d9641(0x184)]=_0x29a632;}function setStableCoins(){const _0x3b6615=_0x251f1d;let _0x3fc5f2=config['basecoin']=='ETH'?_0x3b6615(0x296):_0x3b6615(0x157),_0x48c5e1=!allSymbols[_0x3b6615(0x16a)](_0x3fc5f2+'/USD')?'USDT':_0x3b6615(0x2ab),_0x4f66b3=!allSymbols['includes'](_0x3fc5f2+'/EUR')?_0x48c5e1:_0x3b6615(0x192);stablecoins={'eur':{'coin':''+_0x3fc5f2+_0x4f66b3,'symbol':_0x3fc5f2+'/'+_0x4f66b3},'usd':{'coin':''+_0x3fc5f2+_0x48c5e1,'symbol':_0x3fc5f2+'/'+_0x48c5e1}};}async function initwsCcxt(_0x144a42){const _0x26b1d2=_0x251f1d;_0x144a42==null&&(_0x144a42=[],config['portfolio'][_0x26b1d2(0x281)](_0x526710=>{const _0x49bc3a=_0x26b1d2;if(!_0x526710[_0x49bc3a(0x189)]&&_0x526710[_0x49bc3a(0x21b)]!=config['basecoin'])_0x144a42['push'](_0x526710[_0x49bc3a(0x291)]);}));if(!_0x144a42[_0x26b1d2(0x16a)](stablecoins[_0x26b1d2(0x2b8)]['symbol']))_0x144a42[_0x26b1d2(0x220)](stablecoins[_0x26b1d2(0x2b8)][_0x26b1d2(0x291)]);if(!_0x144a42[_0x26b1d2(0x16a)](stablecoins[_0x26b1d2(0x1ad)]['symbol']))_0x144a42['push'](stablecoins[_0x26b1d2(0x1ad)][_0x26b1d2(0x291)]);if(config[_0x26b1d2(0x20f)]['startsWith'](_0x26b1d2(0x185))){if(!_0x144a42[_0x26b1d2(0x16a)]('BNB/'+config[_0x26b1d2(0x188)]))_0x144a42[_0x26b1d2(0x220)]('BNB/'+config[_0x26b1d2(0x188)]);}loadCoins(_0x144a42);const _0xc75a30=async _0x5467c2=>{const _0x3cc814=_0x26b1d2;try{const _0x19e94a=await exchange[_0x3cc814(0x14a)](_0x5467c2);global['ticker'][noslash(_0x19e94a[_0x3cc814(0x291)])]=_0x19e94a[_0x3cc814(0x1f4)];}catch(_0x14b356){await handleError(_0x14b356,_0x3cc814(0x249),_0x5467c2);}while(!![]){if(!botPaused)try{const _0x27a341=await exchange['watchTrades'](_0x5467c2);global[_0x3cc814(0x23f)][noslash(_0x27a341[0x0][_0x3cc814(0x291)])]=_0x27a341[0x0][_0x3cc814(0x229)],await sleep(0x3e8);}catch(_0x46396a){if(!exchangeStopped)await handleError(_0x46396a,_0x3cc814(0x1a7),_0x5467c2);}else await sleep(0x64);}},_0x19311e=async _0x230fe1=>{const _0x2fde52=_0x26b1d2;while(!![]){if(!botPaused)try{const _0x4f4a99=await exchange['fetchTicker'](_0x230fe1);global[_0x2fde52(0x1e4)][_0x4f4a99[_0x2fde52(0x291)]]=_0x4f4a99[_0x2fde52(0x2a2)],await sleep(0x3c*0x3e8);}catch(_0x32eabe){if(!exchangeStopped)await handleError(_0x32eabe,_0x2fde52(0x24a),_0x230fe1);}else await sleep(0x64);}},_0x32a518=async _0x3f83e9=>{const _0x4b3c5e=_0x26b1d2;while(!![]){if(!botPaused)try{const _0x2160db=await exchange['watchOrders'](_0x3f83e9);_0x2160db[_0x4b3c5e(0x281)](_0x3d6aac=>{updateNumberCoinsCcxt(_0x3d6aac);});}catch(_0x1ed16d){if(!exchangeStopped)await handleError(_0x1ed16d,_0x4b3c5e(0x1b3));}else await sleep(0x64);}};_0x144a42[_0x26b1d2(0x281)](_0x1b46c6=>{_0xc75a30(_0x1b46c6),_0x19311e(_0x1b46c6),_0x32a518(_0x1b46c6);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x2b41e6=_0x251f1d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1dae3b=await getCoins(),[_0x3e8fb0,_0x7e947a]=_0x1dae3b;let _0x569337=[];currentCoins[_0x2b41e6(0x281)](_0x368bbe=>{const _0x3632a8=_0x2b41e6,_0x43ae48=_0x3e8fb0[_0x3632a8(0x2a8)](_0x22c5ff=>_0x22c5ff[_0x3632a8(0x21b)]==_0x368bbe[_0x3632a8(0x21b)]);if(_0x43ae48){if(_0x368bbe['number']!=_0x43ae48['number']){let _0x2bf482;if(_0x368bbe[_0x3632a8(0x21b)]!=config[_0x3632a8(0x188)]){const _0x142259=global[_0x3632a8(0x23f)][noslash(_0x368bbe[_0x3632a8(0x291)])];_0x2bf482=_0x368bbe[_0x3632a8(0x161)]?0x1/_0x142259:_0x142259;}else _0x2bf482=0x1;_0x569337[_0x3632a8(0x220)]({'coin':_0x368bbe['coin'],'symbol':_0x368bbe[_0x3632a8(0x291)],'price':_0x2bf482,'number':Number(formatResult(_0x43ae48[_0x3632a8(0x244)]-_0x368bbe[_0x3632a8(0x244)],0x8)),'basecoinvalue':_0x2bf482*(_0x43ae48[_0x3632a8(0x244)]-_0x368bbe[_0x3632a8(0x244)])});}}});if(_0x569337['length']==0x1&&!blockTransactionDetection){if(config[_0x2b41e6(0x1fb)]){logger[_0x2b41e6(0x19f)](_0x2b41e6(0x280)+_0x569337[0x0][_0x2b41e6(0x273)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x2b41e6(0x1c7)]==0x0||Math[_0x2b41e6(0x24b)](_0x569337[0x0][_0x2b41e6(0x273)])>lastFees[_0x2b41e6(0x1c7)]){delete _0x569337[0x0][_0x2b41e6(0x291)],delete _0x569337[0x0][_0x2b41e6(0x273)];let _0x1b6fcd=[],_0x5ec90a=[...config['liquidity']]||[],_0x239fc7=config[_0x2b41e6(0x1ee)];_0x5ec90a[_0x2b41e6(0x198)]((_0x5884cb,_0x414e50)=>_0x5884cb[_0x2b41e6(0x24d)]>_0x414e50['date']?-0x1:_0x414e50[_0x2b41e6(0x24d)]>_0x5884cb[_0x2b41e6(0x24d)]?0x1:0x0);const _0x3ff35e=getDate();if(_0x5ec90a[0x0]){const _0x4538de=fns['parse'](_0x5ec90a[0x0][_0x2b41e6(0x24d)],_0x2b41e6(0x219),new Date()),_0x33604a=fns[_0x2b41e6(0x199)](_0x3ff35e,_0x2b41e6(0x219),new Date());if(fns[_0x2b41e6(0x28b)](_0x4538de,_0x33604a)){_0x1b6fcd=_0x5ec90a[0x0][_0x2b41e6(0x2a1)];const _0x3da9d2=_0x1b6fcd[_0x2b41e6(0x2a8)](_0x3c52b5=>_0x3c52b5[_0x2b41e6(0x21b)]==_0x569337[0x0]['coin']);_0x3da9d2?(_0x3da9d2['number']+=_0x569337[0x0]['number'],_0x3da9d2[_0x2b41e6(0x244)]==0x0&&(_0x1b6fcd=_0x1b6fcd[_0x2b41e6(0x29d)](_0x20c01b=>{const _0x36c01e=_0x2b41e6;return _0x20c01b[_0x36c01e(0x21b)]!=_0x569337[0x0]['coin'];}))):_0x1b6fcd[_0x2b41e6(0x220)](_0x569337[0x0]);const _0x2a7aef=_0x239fc7[_0x2b41e6(0x2a8)](_0x1fc6f6=>_0x1fc6f6['date']==_0x3ff35e);_0x2a7aef['changes']=_0x1b6fcd;}else _0x239fc7[_0x2b41e6(0x220)]({'date':_0x3ff35e,'changes':[_0x569337[0x0]]});}const _0x174573=_0x239fc7[_0x2b41e6(0x2a8)](_0x3fed0a=>_0x3fed0a[_0x2b41e6(0x24d)]==_0x3ff35e);if(_0x174573){let _0x1f2414=!![];_0x174573[_0x2b41e6(0x2a1)][_0x2b41e6(0x281)](_0x4c8c21=>{const _0x3cc7ae=_0x2b41e6;if(_0x4c8c21[_0x3cc7ae(0x244)]!=0x0)_0x1f2414=![];}),_0x1f2414&&(_0x239fc7=_0x239fc7[_0x2b41e6(0x29d)](_0x5d0e66=>{const _0x2ae969=_0x2b41e6;return _0x5d0e66[_0x2ae969(0x24d)]!=_0x3ff35e;}));}let _0x10b88c=dbConfig[_0x2b41e6(0x2c5)](_0x2b41e6(0x261))[_0x2b41e6(0x2a8)]({'botID':botID})['value']();_0x10b88c&&(dbConfig[_0x2b41e6(0x2c5)](_0x2b41e6(0x261))[_0x2b41e6(0x2a8)]({'botID':botID})[_0x2b41e6(0x22d)]({'liquidity':_0x239fc7})['write'](),config[_0x2b41e6(0x1ee)]=_0x239fc7),logHistory(_0x2b41e6(0x265),_0x2b41e6(0x2ae)+Math['abs'](_0x569337[0x0][_0x2b41e6(0x244)])+'\x20'+_0x569337[0x0]['coin']+'\x20'+(_0x569337[0x0][_0x2b41e6(0x244)]>0x0?_0x2b41e6(0x20e):'removed')+_0x2b41e6(0x1d5)),proxyEmit(_0x2b41e6(0x18c),emittedConfiguration());}else logger[_0x2b41e6(0x19f)](_0x2b41e6(0x17e)+Math[_0x2b41e6(0x24b)](_0x569337[0x0][_0x2b41e6(0x244)])+'\x20'+_0x569337[0x0]['coin']+'\x20'+(_0x569337[0x0][_0x2b41e6(0x244)]>0x0?_0x2b41e6(0x20e):'removed'));transactionDetected=!![],currentCoins=_0x3e8fb0,currentCoinsAll=_0x7e947a;}else logger[_0x2b41e6(0x19f)]('Portfolio\x20change\x20detected:\x20'+Math[_0x2b41e6(0x24b)](_0x569337[0x0][_0x2b41e6(0x244)])+'\x20'+_0x569337[0x0][_0x2b41e6(0x21b)]+'\x20'+(_0x569337[0x0][_0x2b41e6(0x244)]>0x0?_0x2b41e6(0x20e):_0x2b41e6(0x279))+_0x2b41e6(0x253)),currentCoins=_0x3e8fb0,currentCoinsAll=_0x7e947a;}await sleep(watchTransactionsInterval);}catch(_0x5c6a29){if(!exchangeStopped)await handleError(_0x5c6a29,_0x2b41e6(0x21f));}else await sleep(0x64);}}async function loadSymbols(){const _0x44d0c9=_0x251f1d;try{markets=await exchange[_0x44d0c9(0x2be)](),allSymbols=[],Object['entries'](markets)[_0x44d0c9(0x281)](_0x2aa04f=>{const _0x473228=_0x44d0c9;_0x2aa04f[0x1][_0x473228(0x298)]&&_0x2aa04f[0x1][_0x473228(0x288)]&&allSymbols['push'](_0x2aa04f[0x0]);});}catch(_0x5f56da){throw _0x5f56da;}}async function initclient(){const _0x36ff52=_0x251f1d;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x36ff52(0x28f),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2d4f02=getNormalizedPerformance();emitPerformance(_0x2d4f02),getStartingBalances(_0x2d4f02);}async function toggleBotMode(){const _0x372442=_0x251f1d;let _0x49cf34=dbConfig[_0x372442(0x2c5)]('bot')[_0x372442(0x2a8)]({'botID':botID})[_0x372442(0x1a4)]();if(_0x49cf34){const _0x2e253f=!_0x49cf34[_0x372442(0x207)];dbConfig[_0x372442(0x2c5)](_0x372442(0x261))[_0x372442(0x2a8)]({'botID':botID})['assign']({'headless':_0x2e253f})[_0x372442(0x175)](),config[_0x372442(0x207)]=_0x2e253f,proxyEmit(_0x372442(0x18c),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x45d88e=_0x251f1d;process[_0x45d88e(0x14f)]({'updatebotmanager':!![]},_0x3bfe42=>{});}async function loadCoins(_0x17e146){const _0x5ccdac=_0x251f1d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x375a67,_0xd82c43=0x0,_0x162de8=0x0;_0x17e146[_0x5ccdac(0x281)](_0x5d415b=>{const _0x45dd6a=_0x5ccdac;loading[_0x45dd6a(0x272)][_0x45dd6a(0x220)](_0x5d415b);}),loadingCanceled=![];let _0x40102a=![];while(_0x375a67!=_0x17e146[_0x5ccdac(0x2ac)]){_0x375a67=0x0,_0x17e146[_0x5ccdac(0x281)](_0x423bf=>{const _0x50d61e=_0x5ccdac;if(global[_0x50d61e(0x23f)][noslash(_0x423bf)]){loading[_0x50d61e(0x272)]=loading[_0x50d61e(0x272)][_0x50d61e(0x29d)](_0x321827=>_0x321827!=_0x423bf);if(!watchedSymbols[_0x50d61e(0x16a)](_0x423bf))watchedSymbols[_0x50d61e(0x220)](_0x423bf);_0x375a67++;}}),loading[_0x5ccdac(0x17d)]=Math[_0x5ccdac(0x276)](_0x375a67/_0x17e146[_0x5ccdac(0x2ac)]*0x64);loading['progress']!=0x64&&(_0x162de8>0x1e*0x5&&(loading[_0x5ccdac(0x204)]=!![],emitLoadingProgress()),_0x162de8>0x78*0x5&&!_0x40102a&&(loading[_0x5ccdac(0x1e1)]=!![],emitLoadingProgress(),_0x40102a=!![],logHistory(_0x5ccdac(0x286),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x5ccdac(0x272)][_0x5ccdac(0x18f)](',\x20')+_0x5ccdac(0x169)),logHistory(_0x5ccdac(0x286),_0x5ccdac(0x165)+loadCoinsRetryInterval/0xea60+_0x5ccdac(0x190)),pidCoinReloading=setTimeout(()=>{const _0x56c4c7=_0x5ccdac;process[_0x56c4c7(0x14f)]({'stop':_0x56c4c7(0x155)},_0x32326e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5ccdac(0x1e1)]=!![],emitLoadingProgress();break;}else _0x375a67!=_0xd82c43&&(_0xd82c43=_0x375a67,emitLoadingProgress()),_0x162de8++,await sleep(0xc8);}_0x375a67==_0x17e146[_0x5ccdac(0x2ac)]&&(coinsLoaded=!![],process[_0x5ccdac(0x14f)]({'status':'enabled','live':_0x5ccdac(0x1cd)},_0x384c45=>{}),_0x40102a&&logHistory(_0x5ccdac(0x265),_0x5ccdac(0x201)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x31ef33=_0x251f1d;proxyEmit(_0x31ef33(0x18c),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1aac5e=_0x251f1d;let _0xf01d34=global['ticker'][stablecoins[_0x1aac5e(0x2b8)][_0x1aac5e(0x21b)]],_0x58426a=global[_0x1aac5e(0x23f)][stablecoins[_0x1aac5e(0x1ad)]['coin']];return{'eur':Number(_0xf01d34),'usd':Number(_0x58426a)};}function capitalize(_0x9d3332){const _0x23304b=_0x251f1d;return _0x9d3332[_0x23304b(0x218)](0x0,0x1)[_0x23304b(0x236)]()+_0x9d3332[_0x23304b(0x218)](0x1);}function supportedExchanges(){const _0x12687c=_0x251f1d,_0x4f270f=['ws','fetchTickers','fetchTicker',_0x12687c(0x1f9),_0x12687c(0x1b3),'cancelOrder',_0x12687c(0x1db),_0x12687c(0x29b),_0x12687c(0x206),_0x12687c(0x1a6)];let _0x3eec54=[],_0x2c2eea=[],_0x5afced=ccxt[_0x12687c(0x1f2)][_0x12687c(0x28f)];_0x5afced[_0x12687c(0x281)](_0x2a5276=>{const _0x3958d7=_0x12687c;try{const _0x1e65a9=new ccxt[(_0x3958d7(0x1f2))][_0x2a5276]();_0x2c2eea['push'](_0x1e65a9);}catch(_0x5df740){}}),_0x2c2eea['forEach'](_0x25c9b6=>{const _0x260b78=_0x12687c;let _0x256c7d=0x0;_0x4f270f[_0x260b78(0x281)](_0x20c18f=>{const _0x2d86ef=_0x260b78;_0x20c18f in _0x25c9b6[_0x2d86ef(0x1d8)]&&_0x25c9b6[_0x2d86ef(0x1d8)][_0x20c18f]&&_0x256c7d++;}),_0x256c7d==_0x4f270f[_0x260b78(0x2ac)]&&_0x3eec54[_0x260b78(0x220)](capitalize(_0x25c9b6['id']));});let _0x19544e=[];return _0x5afced[_0x12687c(0x281)](_0x1ac98a=>{const _0x275a99=_0x12687c;_0x1ac98a=capitalize(_0x1ac98a);if(!_0x3eec54[_0x275a99(0x16a)](_0x1ac98a))_0x19544e['push'](_0x1ac98a);}),_0x3eec54;}function setStartDatePerformance(){const _0x1c951a=_0x251f1d;if(config&&config[_0x1c951a(0x1ee)][0x0][_0x1c951a(0x2a1)][_0x1c951a(0x2ac)]!=0x0){const _0x3e8dc8=config[_0x1c951a(0x1ee)][0x0][_0x1c951a(0x2a1)];dbPerformance[_0x1c951a(0x2c5)]('data')[_0x1c951a(0x2a8)]({'date':config['startdate']})[_0x1c951a(0x22d)]({'coins':_0x3e8dc8})[_0x1c951a(0x175)]();}}async function recreateCoinResults(){const _0x7a0684=_0x251f1d;let _0x45f377,_0x123fd8=[];try{const _0x490e11=fns['format'](fns[_0x7a0684(0x22f)](config[_0x7a0684(0x275)][_0x7a0684(0x1cb)](/\//g,'-')),_0x7a0684(0x1f3));for(const _0x1df141 of currentCoins){if(_0x1df141[_0x7a0684(0x21b)]!=config[_0x7a0684(0x188)]){let _0x1a8ce1=0x0,_0xafe118,_0x27e035;_0x45f377=await getAllEventOrders(_0x1df141[_0x7a0684(0x291)]);if(_0x45f377['length']>0x0)_0x45f377['forEach'](_0xf84562=>{const _0x30797a=_0x7a0684,_0x119ad1=_0x1df141[_0x30797a(0x291)]['includes'](config[_0x30797a(0x188)]+'/');_0x123fd8['push']({'datetime':_0xf84562[_0x30797a(0x15f)],'coin':_0x1df141['coin'],'symbol':_0x1df141[_0x30797a(0x291)],'side':_0xf84562[_0x30797a(0x28d)],'reverse':_0x119ad1,'amount':formatResult(_0xf84562['filled'],0x8),'filled':formatResult(_0xf84562[_0x30797a(0x2c8)],0x8),'price':formatResult(_0xf84562[_0x30797a(0x229)],0x8)}),_0x1a8ce1=_0xf84562[_0x30797a(0x28d)]=='buy'?_0x1a8ce1+_0xf84562['filled']:_0x1a8ce1-_0xf84562[_0x30797a(0x2c8)];if(!_0x27e035)_0x27e035=_0xf84562['price'];});_0xafe118=_0x1df141['number']-_0x1a8ce1;let _0x27e3ac;config[_0x7a0684(0x1ee)][_0x7a0684(0x281)](_0x5caaf4=>{const _0x120d50=_0x7a0684;!_0x27e3ac&&(_0x27e3ac=_0x5caaf4[_0x120d50(0x2a1)][_0x120d50(0x2a8)](_0x31135b=>_0x31135b[_0x120d50(0x21b)]==_0x1df141['coin']),_0x27e3ac&&(_0xafe118=_0x27e3ac['number'],_0x27e035=_0x27e3ac[_0x120d50(0x229)]));});let _0x4c80e1=dbCoinResults[_0x7a0684(0x2c5)](_0x7a0684(0x171))[_0x7a0684(0x2a8)]({'coin':_0x1df141[_0x7a0684(0x21b)]})[_0x7a0684(0x1a4)]();_0x4c80e1={'coin':_0x1df141[_0x7a0684(0x21b)],'number':_0xafe118,'breakeven':_0x27e035,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x7a0684(0x2c5)](_0x7a0684(0x171))[_0x7a0684(0x2a8)]({'coin':_0x1df141[_0x7a0684(0x21b)]})['assign'](_0x4c80e1)['write']();}}_0x123fd8[_0x7a0684(0x198)]((_0x5894d5,_0x3d40cb)=>_0x5894d5[_0x7a0684(0x15f)]>_0x3d40cb['datetime']?0x1:_0x3d40cb[_0x7a0684(0x15f)]>_0x5894d5[_0x7a0684(0x15f)]?-0x1:0x0);let _0x30eef2=0x0;for(let _0x3aa4d2 of _0x123fd8){await updateCoinResults(_0x3aa4d2,!![]);}}catch(_0x48c98e){await handleError(_0x48c98e,_0x7a0684(0x2b4));}}async function getAllEventOrders(_0x1a27b7){const _0x23c427=_0x251f1d;let _0x1797ae=[],_0x11263d=dbLogs[_0x23c427(0x2c5)](_0x23c427(0x2a0))['filter'](_0x29477d=>{const _0x5d5d8a=_0x23c427,_0x4369a0=_0x29477d[_0x5d5d8a(0x232)][_0x5d5d8a(0x26e)]();return _0x4369a0[_0x5d5d8a(0x16a)](_0x1a27b7[_0x5d5d8a(0x26e)]())&&(_0x4369a0[_0x5d5d8a(0x16a)](_0x5d5d8a(0x1bc))&&_0x4369a0[_0x5d5d8a(0x16a)]('order')||_0x4369a0[_0x5d5d8a(0x16a)](_0x5d5d8a(0x2c8))&&_0x4369a0['includes'](_0x5d5d8a(0x1eb)));})[_0x23c427(0x24c)](_0x23c427(0x15d))[_0x23c427(0x1a4)]();return _0x11263d['forEach'](_0x3b3bd4=>{const _0x38ddd7=_0x23c427,_0x96994d=_0x3b3bd4[_0x38ddd7(0x232)][_0x38ddd7(0x16a)](_0x38ddd7(0x1b9))?_0x38ddd7(0x1b9):_0x38ddd7(0x186),_0x25b48d=/#([0-9]|\.)+\s/i,_0x3798c=Number(_0x25b48d[_0x38ddd7(0x177)](_0x3b3bd4[_0x38ddd7(0x232)])[0x0]['slice'](0x1)),_0x3ff60c=/@([0-9]|\.)+$/i,_0x4149ad=Number(_0x3ff60c[_0x38ddd7(0x177)](_0x3b3bd4['event'])[0x0]['slice'](0x1));_0x1797ae[_0x38ddd7(0x220)]({'datetime':_0x3b3bd4[_0x38ddd7(0x15d)],'coin':symbolToCoin(_0x1a27b7),'symbol':_0x1a27b7,'side':_0x96994d,'amount':_0x3798c,'filled':_0x3798c,'price':_0x4149ad});}),_0x1797ae;}async function getAllOrders(_0x516aa0,_0x465ca9){const _0x520024=_0x251f1d;let _0x13b9ed=[];while(_0x465ca9<exchange['milliseconds']()){const _0x44b75d=0x1f4;try{const _0x53c279=await exchange[_0x520024(0x206)](_0x516aa0,_0x465ca9,_0x44b75d);if(_0x53c279['length'])_0x465ca9=_0x53c279[_0x53c279[_0x520024(0x2ac)]-0x1][_0x520024(0x1cc)]+0x1,_0x13b9ed=_0x13b9ed['concat'](_0x53c279);else break;}catch(_0x559565){await handleError(_0x559565,'getAllOrders',_0x516aa0);}}return _0x13b9ed;}async function validate24hChanges(){const _0x461e58=_0x251f1d;for(const _0x3019a9 of currentCoins){if(_0x3019a9['coin']!=config[_0x461e58(0x188)]){let _0x3b7a40;_0x3019a9[_0x461e58(0x161)]?_0x3b7a40=formatResult((0x1/(global[_0x461e58(0x1e4)][noslash(_0x3019a9['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x3b7a40=global[_0x461e58(0x1e4)][noslash(_0x3019a9[_0x461e58(0x291)])],_0x3b7a40<config[_0x461e58(0x18e)]&&(logHistory(_0x461e58(0x286),_0x3019a9[_0x461e58(0x21b)]+_0x461e58(0x17a)+_0x3b7a40+'%'),logHistory(_0x461e58(0x286),_0x461e58(0x258)),logHistory(_0x461e58(0x286),_0x461e58(0x20d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x39e533,_0x43f581){const _0x2db9ff=_0x251f1d;if(!_0x39e533)return!![];const _0x262d8f=_0x43f581[_0x2db9ff(0x16c)]('.'),_0x14c1ee=_0x39e533[_0x2db9ff(0x16c)]('.');for(var _0x576152=0x0;_0x576152<_0x14c1ee[_0x2db9ff(0x2ac)];_0x576152++){const _0x550a6c=~~_0x14c1ee[_0x576152],_0x4a2300=~~_0x262d8f[_0x576152];if(_0x550a6c<_0x4a2300)return!![];if(_0x550a6c>_0x4a2300)return![];}return![];}async function oneTimeMigration(){const _0x2f281d=_0x251f1d;let _0x86e015=dbLogs['get']('version')['value']();if(isOlderVersion(_0x86e015,_0x2f281d(0x2bf))){let _0x44cf4a=[];const _0x2df7ac=dbLogs['get'](_0x2f281d(0x2a0))['value']();_0x2df7ac[_0x2f281d(0x281)](_0x5b179e=>{const _0xb9b44b=_0x2f281d;_0x44cf4a[_0xb9b44b(0x220)]({'time':_0x5b179e[_0xb9b44b(0x15d)],'type':_0x5b179e['type'],'event':_0x5b179e[_0xb9b44b(0x232)]});}),dbLogs[_0x2f281d(0x2c5)](_0x2f281d(0x2a0))[_0x2f281d(0x22d)](_0x44cf4a)[_0x2f281d(0x175)]();}let _0x39501f=dbConfig[_0x2f281d(0x2c5)](_0x2f281d(0x1df))[_0x2f281d(0x1a4)]();if(isOlderVersion(_0x39501f,_0x2f281d(0x2bf))){let _0x5da23f=dbConfig[_0x2f281d(0x2c5)](_0x2f281d(0x261))['find']({'botID':botID})['value']();if(_0x5da23f){let _0x3d8887=[];_0x5da23f[_0x2f281d(0x1c6)][_0x2f281d(0x281)](_0x926deb=>{const _0x14bb94=_0x2f281d;_0x3d8887[_0x14bb94(0x220)]({'coin':_0x926deb[_0x14bb94(0x21b)],'number':_0x926deb[_0x14bb94(0x1c1)],'price':_0x926deb['startprice']}),delete _0x926deb['startnumber'],delete _0x926deb['startprice'];});if(_0x3d8887[_0x2f281d(0x2ac)]!==0x0)fs[_0x2f281d(0x242)](configbackuppath+(_0x2f281d(0x2c7)+botID+'.json'),JSON[_0x2f281d(0x1f5)](_0x3d8887,null,0x4),function(_0x387be9){if(_0x387be9){}});const _0x49f1eb=(_0x200083,_0x575d61)=>{const _0x5e2a72=_0x2f281d;let _0x21aca1=[];_0x575d61[_0x5e2a72(0x281)](_0x441694=>{const _0x142b19=_0x5e2a72,_0x27cb37=_0x200083['find'](_0x562ed0=>_0x562ed0[_0x142b19(0x21b)]==_0x441694[_0x142b19(0x21b)]);if(!_0x27cb37)_0x21aca1[_0x142b19(0x220)](_0x441694);});let _0x48ff45=[];return _0x200083['forEach'](_0x175aae=>{const _0x2dc16a=_0x5e2a72,_0x5472ca=_0x575d61[_0x2dc16a(0x2a8)](_0xec4e69=>_0xec4e69[_0x2dc16a(0x21b)]==_0x175aae[_0x2dc16a(0x21b)]);if(!_0x5472ca||_0x5472ca[_0x2dc16a(0x244)]==0x0&&_0x175aae[_0x2dc16a(0x244)]!=0x0)_0x48ff45['push'](_0x175aae);}),{'missingDay1':_0x21aca1,'notInDay2':_0x48ff45};},_0x355a4f=dbPerformance[_0x2f281d(0x2c5)](_0x2f281d(0x1ab))[_0x2f281d(0x187)]()['value']();if(_0x355a4f['length']>0x1){const {missingDay1:_0x43a0af,notInDay2:_0x3ac958}=_0x49f1eb(_0x3d8887,_0x355a4f[0x1]['coins']);_0x3d8887=[..._0x3d8887,..._0x43a0af],_0x3ac958[_0x2f281d(0x281)](_0x5e622e=>{const _0x201f8b=_0x2f281d;let _0x45575a=_0x3d8887[_0x201f8b(0x166)](_0x5b50f5=>_0x5b50f5[_0x201f8b(0x21b)]==_0x5e622e[_0x201f8b(0x21b)]);_0x45575a!=-0x1&&_0x3d8887[_0x201f8b(0x1af)](_0x45575a,0x1);});}_0x3d8887[_0x2f281d(0x198)]((_0x98fd2d,_0x1ee2ab)=>_0x98fd2d[_0x2f281d(0x21b)]>_0x1ee2ab[_0x2f281d(0x21b)]?0x1:_0x1ee2ab['coin']>_0x98fd2d[_0x2f281d(0x21b)]?-0x1:0x0);let _0x2c58e0=[{'date':_0x5da23f[_0x2f281d(0x275)],'changes':_0x3d8887}];_0x355a4f[_0x2f281d(0x2ac)]>0x2&&_0x355a4f[_0x2f281d(0x281)]((_0x260c49,_0xc62d82)=>{const _0x34469d=_0x2f281d;if(_0xc62d82>0x0&&_0xc62d82<_0x355a4f[_0x34469d(0x2ac)]-0x1){const {missingDay1:_0x20508e,notInDay2:_0x5ac69c}=_0x49f1eb(_0x355a4f[_0xc62d82][_0x34469d(0x171)],_0x355a4f[_0xc62d82+0x1][_0x34469d(0x171)]);_0x3d8887=[],(_0x20508e[_0x34469d(0x2ac)]!=0x0||_0x5ac69c['length']!=0x0)&&(_0x20508e[_0x34469d(0x2ac)]!=0x0&&_0x3d8887[_0x34469d(0x220)](..._0x20508e),_0x5ac69c[_0x34469d(0x2ac)]!=0x0&&(_0x5ac69c['forEach'](_0x15a3c1=>{const _0x4c255a=_0x34469d;_0x15a3c1['number']=-_0x15a3c1[_0x4c255a(0x244)];}),_0x3d8887[_0x34469d(0x220)](..._0x5ac69c)),_0x3d8887[_0x34469d(0x198)]((_0x28879f,_0x52f082)=>_0x28879f[_0x34469d(0x21b)]>_0x52f082[_0x34469d(0x21b)]?0x1:_0x52f082[_0x34469d(0x21b)]>_0x28879f['coin']?-0x1:0x0),_0x2c58e0[_0x34469d(0x220)]({'date':_0x355a4f[_0xc62d82+0x1]['date'],'changes':_0x3d8887}));}}),dbConfig[_0x2f281d(0x2c5)]('bot')[_0x2f281d(0x2a8)]({'botID':botID})['assign']({..._0x5da23f,'liquidity':_0x2c58e0})['write']();}}if(isOlderVersion(_0x39501f,'2.6.0')){let _0x372e09=dbConfig['get'](_0x2f281d(0x261))[_0x2f281d(0x2a8)]({'botID':botID})[_0x2f281d(0x1a4)]();if(_0x372e09){const _0x3e1ae3=_0x372e09[_0x2f281d(0x20f)],_0x50b21c=_0x3e1ae3?capitalize(_0x3e1ae3):_0x2f281d(0x185);dbConfig[_0x2f281d(0x2c5)]('bot')['find']({'botID':botID})['assign']({'exchange':_0x50b21c})[_0x2f281d(0x175)]();}}let _0x312d59=dbPerformance['get'](_0x2f281d(0x1df))['value']();isOlderVersion(_0x312d59,_0x2f281d(0x2bf))&&setStartDatePerformance();let _0x18f9d0=dbCoinResults[_0x2f281d(0x2c5)]('version')['value']();if(isOlderVersion(_0x18f9d0,_0x2f281d(0x19e))){let _0x1036fd=dbCoinResults['get'](_0x2f281d(0x171))[_0x2f281d(0x1a4)]();if(_0x1036fd[_0x2f281d(0x2ac)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x33b293=_0x251f1d;dbConfig[_0x33b293(0x1a1)]('version',serverversion)[_0x33b293(0x175)](),dbPerformance[_0x33b293(0x1a1)]('version',serverversion)[_0x33b293(0x175)](),dbLogs[_0x33b293(0x1a1)](_0x33b293(0x1df),serverversion)[_0x33b293(0x175)](),dbCoinResults[_0x33b293(0x1a1)]('version',serverversion)[_0x33b293(0x175)]();}function getConfiguration(_0x27fa5c){const _0x3a8c05=_0x251f1d;let _0x310c90=dbConfig['get'](_0x3a8c05(0x261))['find']({'botID':_0x27fa5c})[_0x3a8c05(0x1a4)]();if(_0x310c90){let _0xc871f2=![];typeof _0x310c90[_0x3a8c05(0x214)]=='string'&&(_0x310c90={..._0x310c90,'threshold':Number(_0x310c90[_0x3a8c05(0x214)])},_0xc871f2=!![]),_0x310c90[_0x3a8c05(0x18e)]==undefined&&(_0x310c90={..._0x310c90,'change24h':-0x14},_0xc871f2=!![]),_0x310c90[_0x3a8c05(0x264)]==undefined&&(_0x310c90={..._0x310c90,'fiat':_0x3a8c05(0x2ab)},_0xc871f2=!![]),_0x310c90[_0x3a8c05(0x225)]==undefined&&(_0x310c90={..._0x310c90,'onepagemode':settings['onepagemode']},_0xc871f2=!![]),_0x310c90[_0x3a8c05(0x200)]==undefined&&(_0x310c90={..._0x310c90,'colorscheme':_0x3a8c05(0x233)},_0xc871f2=!![]),_0x310c90[_0x3a8c05(0x1fb)]==undefined&&(_0x310c90={..._0x310c90,'autoliquidity':!![]},_0xc871f2=!![]),_0xc871f2&&(_0x310c90={'botID':_0x310c90[_0x3a8c05(0x1e9)],'exchange':_0x310c90[_0x3a8c05(0x20f)],'apiKey':_0x310c90[_0x3a8c05(0x267)],'apiSecret':_0x310c90[_0x3a8c05(0x173)],'apiPassword':_0x310c90['apiPassword'],'basecoin':_0x310c90['basecoin'],'botname':_0x310c90[_0x3a8c05(0x28a)],'showname':_0x310c90[_0x3a8c05(0x22b)],'threshold':_0x310c90['threshold'],'ordertype':_0x310c90['ordertype'],'timeout':_0x310c90[_0x3a8c05(0x204)],'fiat':_0x310c90['fiat'],'startdate':_0x310c90[_0x3a8c05(0x275)],'recreate':_0x310c90['recreate'],'timeshift':_0x310c90[_0x3a8c05(0x1b4)],'onepagemode':_0x310c90[_0x3a8c05(0x225)],'headless':_0x310c90[_0x3a8c05(0x207)],'cooldown':_0x310c90[_0x3a8c05(0x1c0)],'change24h':_0x310c90[_0x3a8c05(0x18e)],'emojibuy':_0x310c90[_0x3a8c05(0x1dd)],'emojisell':_0x310c90['emojisell'],'colorscheme':_0x310c90[_0x3a8c05(0x200)],'portfolio':_0x310c90['portfolio'],'autoliquidity':_0x310c90['autoliquidity'],'liquidity':_0x310c90['liquidity'],'openOrders':_0x310c90[_0x3a8c05(0x16d)]},dbConfig[_0x3a8c05(0x2c5)](_0x3a8c05(0x261))[_0x3a8c05(0x14e)]()['write'](),dbConfig[_0x3a8c05(0x2c5)](_0x3a8c05(0x261))['push'](_0x310c90)[_0x3a8c05(0x175)]());}else _0x310c90={'botID':_0x27fa5c,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3a8c05(0x290)+_0x27fa5c,'showname':![],'threshold':0x3,'ordertype':_0x3a8c05(0x1bc),'timeout':0x14,'fiat':_0x3a8c05(0x2ab),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3a8c05(0x1b4)],'onepagemode':settings[_0x3a8c05(0x225)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3a8c05(0x233),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x310c90;}function emittedConfiguration(){const _0x290fc2=_0x251f1d;let _0x485fb0;if(config['apiKey']=='')_0x485fb0={...config,'configstate':_0x290fc2(0x237)};else config[_0x290fc2(0x267)]==_0x290fc2(0x183)?_0x485fb0={...config,'configstate':'recovery'}:(_0x485fb0={...config,'apiKey':'************','apiSecret':_0x290fc2(0x247)},config[_0x290fc2(0x1ce)]&&(_0x485fb0[_0x290fc2(0x1ce)]=_0x290fc2(0x247)));return _0x485fb0;}function getSettings(){const _0x24fc09=_0x251f1d;return dbSettings['get']('settings')[_0x24fc09(0x1a4)]();}function getSecure(){const _0x4ba2ec=_0x251f1d;return dbSecure[_0x4ba2ec(0x2c5)](_0x4ba2ec(0x27e))[_0x4ba2ec(0x1a4)]()||{};}function updateTimeshift(_0xb2bef0){const _0x3993ed=_0x251f1d;let _0x44a587=dbConfig['get'](_0x3993ed(0x261))[_0x3993ed(0x2a8)]({'botID':botID})['value']();_0x44a587&&dbConfig[_0x3993ed(0x2c5)]('bot')['find']({'botID':botID})['assign']({'timeshift':_0xb2bef0})[_0x3993ed(0x175)](),config[_0x3993ed(0x1b4)]=_0xb2bef0,proxyEmit(_0x3993ed(0x18c),emittedConfiguration());}function updateOnepagemode(_0x51d273){const _0x39abee=_0x251f1d;let _0x507601=dbConfig[_0x39abee(0x2c5)](_0x39abee(0x261))['find']({'botID':botID})[_0x39abee(0x1a4)]();_0x507601&&dbConfig[_0x39abee(0x2c5)](_0x39abee(0x261))[_0x39abee(0x2a8)]({'botID':botID})['assign']({'onepagemode':_0x51d273})[_0x39abee(0x175)](),config[_0x39abee(0x225)]=_0x51d273,proxyEmit(_0x39abee(0x18c),emittedConfiguration());}async function storeConfiguration(_0x20e727){const _0x48a126=_0x251f1d;logger[_0x48a126(0x19f)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x48a126(0x19f)](_0x48a126(0x1de));let _0x3a25c9=[],_0x4e54ec=![],_0x5cf8cd=![],_0x31844a=[];_0x20e727[_0x48a126(0x1c6)][_0x48a126(0x281)](_0x2369d7=>{const _0x3f614c=_0x48a126;if(!_0x2369d7[_0x3f614c(0x189)]&&_0x2369d7[_0x3f614c(0x21b)]!=_0x20e727['basecoin'])_0x31844a['push'](_0x2369d7[_0x3f614c(0x291)]);}),_0x31844a[_0x48a126(0x281)](_0x23e7c0=>{const _0x596328=_0x48a126,_0x147db8=watchedSymbols[_0x596328(0x16a)](_0x23e7c0);!_0x147db8&&_0x3a25c9['push'](_0x23e7c0);}),_0x31844a[_0x48a126(0x281)](_0x263534=>{const _0x36913b=currentCoins['find'](_0x3ff49b=>_0x3ff49b['symbol']==_0x263534);!_0x36913b&&(_0x4e54ec=!![]);}),currentCoins['forEach'](_0xa2c488=>{const _0xd0d523=_0x48a126;if(_0xa2c488[_0xd0d523(0x21b)]!=config[_0xd0d523(0x188)]){const _0x186a7b=_0x31844a[_0xd0d523(0x2a8)](_0x2da405=>_0x2da405==_0xa2c488[_0xd0d523(0x291)]);!_0x186a7b&&(_0x4e54ec=!![]);}}),_0x20e727[_0x48a126(0x1c6)][_0x48a126(0x281)](_0x55c310=>{const _0x2467d3=_0x48a126,_0x3a7a79=config[_0x2467d3(0x1c6)][_0x2467d3(0x2a8)](_0x562a6e=>_0x562a6e[_0x2467d3(0x21b)]==_0x55c310[_0x2467d3(0x21b)]);if(_0x3a7a79&&_0x55c310[_0x2467d3(0x179)]!=_0x3a7a79[_0x2467d3(0x179)])_0x5cf8cd=!![];});let _0x5d6254=dbConfig[_0x48a126(0x2c5)](_0x48a126(0x261))[_0x48a126(0x2a8)]({'botID':botID})[_0x48a126(0x1a4)]();_0x20e727={..._0x20e727,'apiKey':crypt[_0x48a126(0x27a)](secure[_0x48a126(0x212)],_0x20e727['apiKey'])[_0x48a126(0x210)],'apiSecret':crypt['decrypt'](secure[_0x48a126(0x212)],_0x20e727[_0x48a126(0x173)])['message']};_0x20e727[_0x48a126(0x1ce)]&&(_0x20e727[_0x48a126(0x1ce)]=crypt['decrypt'](secure[_0x48a126(0x212)],_0x20e727[_0x48a126(0x1ce)])[_0x48a126(0x210)]);let _0x5604f8=![];if(_0x5d6254){_0x20e727['apiKey']==_0x48a126(0x247)?_0x20e727[_0x48a126(0x267)]=config[_0x48a126(0x267)]:_0x5604f8=!![];_0x20e727['apiSecret']=='************'?_0x20e727[_0x48a126(0x173)]=config[_0x48a126(0x173)]:_0x5604f8=!![];if(_0x20e727['apiPassword']==_0x48a126(0x247))_0x20e727[_0x48a126(0x1ce)]=config[_0x48a126(0x1ce)];else{if(_0x20e727['apiPassword'])_0x5604f8=!![];}dbConfig[_0x48a126(0x2c5)](_0x48a126(0x261))[_0x48a126(0x2a8)]({'botID':botID})[_0x48a126(0x22d)](_0x20e727)[_0x48a126(0x175)]();}else dbConfig[_0x48a126(0x2c5)](_0x48a126(0x261))[_0x48a126(0x220)](_0x20e727)[_0x48a126(0x175)](),_0x5604f8=!![],process[_0x48a126(0x14f)]({'status':'enabled','live':_0x48a126(0x1cd)},_0xcbea2f=>{});process[_0x48a126(0x14f)]({'botname':_0x20e727[_0x48a126(0x28a)]},_0x160132=>{}),updateBotManager(),config={..._0x20e727},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5604f8)await reset(_0x3a25c9,!![]);else _0x4e54ec||_0x5cf8cd?await reset(_0x3a25c9,![]):getBalances();blockTransactionDetection=![],logger[_0x48a126(0x19f)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x334170){const _0x5b0ded=_0x251f1d,_0x407851={...config,'headless':_0x334170[_0x5b0ded(0x207)]};let _0x3420eb=dbConfig['get'](_0x5b0ded(0x261))[_0x5b0ded(0x2a8)]({'botID':botID})[_0x5b0ded(0x1a4)]();_0x3420eb&&dbConfig[_0x5b0ded(0x2c5)](_0x5b0ded(0x261))[_0x5b0ded(0x2a8)]({'botID':botID})['assign'](_0x407851)[_0x5b0ded(0x175)](),config={..._0x407851},updateBotManager(),proxyEmit(_0x5b0ded(0x18c),emittedConfiguration());}async function storeFiat(_0x4f5b5e){const _0xee5150=_0x251f1d,_0x303614={...config,'fiat':_0x4f5b5e};let _0x55214b=dbConfig[_0xee5150(0x2c5)](_0xee5150(0x261))[_0xee5150(0x2a8)]({'botID':botID})[_0xee5150(0x1a4)]();_0x55214b&&dbConfig[_0xee5150(0x2c5)](_0xee5150(0x261))[_0xee5150(0x2a8)]({'botID':botID})[_0xee5150(0x22d)](_0x303614)[_0xee5150(0x175)](),config={..._0x303614},proxyEmit(_0xee5150(0x18c),emittedConfiguration());}function resetHistory(){const _0x39b801=_0x251f1d;logger[_0x39b801(0x2c1)](_0x39b801(0x191));try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-events.json')))fs[_0x39b801(0x283)](path['join'](configpath,'bot-'+botID+_0x39b801(0x268)));if(fs[_0x39b801(0x1a0)](path[_0x39b801(0x18f)](configpath,'bot-'+botID+'-performance.json')))fs[_0x39b801(0x283)](path[_0x39b801(0x18f)](configpath,_0x39b801(0x20a)+botID+_0x39b801(0x24e)));if(fs[_0x39b801(0x1a0)](path[_0x39b801(0x18f)](configpath,_0x39b801(0x20a)+botID+_0x39b801(0x25e))))fs[_0x39b801(0x283)](path[_0x39b801(0x18f)](configpath,_0x39b801(0x20a)+botID+'-results.json'));}catch(_0x54effc){if(_0x54effc)logger[_0x39b801(0x2c1)](_0x39b801(0x2a7),_0x54effc);}const _0xe57d57=getDate();let _0x3d376c=[];currentCoins[_0x39b801(0x281)](_0x365a76=>{const _0x1921d3=_0x39b801;_0x3d376c[_0x1921d3(0x220)]({'coin':_0x365a76[_0x1921d3(0x21b)],'number':_0x365a76[_0x1921d3(0x244)],'price':_0x365a76['last']});});let _0x8f917a=dbConfig[_0x39b801(0x2c5)](_0x39b801(0x261))['find']({'botID':botID})[_0x39b801(0x1a4)]();_0x8f917a&&(dbConfig[_0x39b801(0x2c5)]('bot')[_0x39b801(0x2a8)]({'botID':botID})[_0x39b801(0x22d)]({'liquidity':[{'date':_0xe57d57,'changes':_0x3d376c}]})[_0x39b801(0x175)](),config[_0x39b801(0x1ee)]=[]),process[_0x39b801(0x14f)]({'stop':_0x39b801(0x155)},_0x4f3ee8=>{});}function noslash(_0x29bfe0){const _0x1e191d=_0x251f1d;return _0x29bfe0[_0x1e191d(0x1cb)]('/','');}function updateHighestFee(_0x32564d){const _0x1f6e6b=_0x251f1d;if(_0x32564d[_0x1f6e6b(0x161)]){let _0x119e5e={'filled':_0x32564d['filled']*_0x32564d[_0x1f6e6b(0x229)],'amount':_0x32564d[_0x1f6e6b(0x2c8)]*_0x32564d[_0x1f6e6b(0x229)],'side':_0x32564d['side']==_0x1f6e6b(0x1b9)?_0x1f6e6b(0x186):_0x1f6e6b(0x1b9),'price':0x1/_0x32564d[_0x1f6e6b(0x229)]};_0x32564d={..._0x32564d,..._0x119e5e};}const _0x5565df=defaultFee*_0x32564d[_0x1f6e6b(0x2c8)]*_0x32564d[_0x1f6e6b(0x229)];lastFees['recent20'][_0x1f6e6b(0x2ac)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x1f6e6b(0x24f)][_0x1f6e6b(0x220)](_0x5565df),lastFees[_0x1f6e6b(0x1c7)]=Math[_0x1f6e6b(0x294)](...lastFees[_0x1f6e6b(0x24f)]);}async function updateNumberCoinsCcxt(_0x12baa6){const _0x8b84fd=_0x251f1d;logger[_0x8b84fd(0x19f)](_0x8b84fd(0x25c)+_0x12baa6[_0x8b84fd(0x291)]+'\x20|\x20'+_0x12baa6['status']+_0x8b84fd(0x180)+_0x12baa6['id']);let _0x4fa414=_0x12baa6[_0x8b84fd(0x239)],_0x11e5ba=![];currentCoins['forEach'](_0x2e03b5=>{const _0x50e95b=_0x8b84fd;_0x2e03b5[_0x50e95b(0x291)]==_0x12baa6['symbol']&&(_0x11e5ba=!![]);});if(!_0x11e5ba)return;const _0x4bdd51=currentCoins['find'](_0x407175=>_0x407175['symbol']==_0x12baa6[_0x8b84fd(0x291)]),_0x1defd0=_0x3beb33=>{const _0x185099=_0x8b84fd;if(_0x4bdd51)_0x4bdd51[_0x185099(0x295)]=_0x3beb33;};if(_0x4fa414==_0x8b84fd(0x26f))_0x1defd0(_0x8b84fd(0x26f));else{if(_0x4fa414=='canceled'){_0x1defd0('canceled');const _0x4686c0=await getCoins();[currentCoins,currentCoinsAll]=_0x4686c0,await getOpenOrders(),handleOpenOrders();}else{if(_0x4fa414==_0x8b84fd(0x2b7)){logger['debug'](_0x8b84fd(0x17f)+_0x12baa6[_0x8b84fd(0x291)]+_0x8b84fd(0x180)+_0x12baa6[_0x8b84fd(0x2c8)]+_0x8b84fd(0x180)+_0x12baa6['id']);let _0x34cffb=![];if(lastOrders)for(const _0x1a6269 of lastOrders){const _0x1e2851=0xc8,_0xd56a29=0x1388;let _0x5e0b46=0x0;while(!_0x1a6269[_0x8b84fd(0x262)]&&_0x5e0b46*_0x1e2851<_0xd56a29){_0x5e0b46++,await sleep(_0x1e2851);}if(_0x5e0b46>0x0)logger[_0x8b84fd(0x19f)](_0x8b84fd(0x25b)+_0x5e0b46*_0x1e2851/0x3e8+_0x8b84fd(0x20c));if(_0x1a6269[_0x8b84fd(0x262)]==_0x12baa6['id']){logger['debug'](_0x8b84fd(0x1f6)+_0x12baa6['id']),_0x34cffb=!![];if(_0x1a6269[_0x8b84fd(0x2c8)]==0x0){logger['debug'](_0x8b84fd(0x2bd)+_0x12baa6['id']);if(_0x12baa6[_0x8b84fd(0x1be)])_0x1a6269[_0x8b84fd(0x229)]=_0x12baa6[_0x8b84fd(0x1be)];else{if(_0x12baa6[_0x8b84fd(0x229)])_0x1a6269[_0x8b84fd(0x229)]=_0x12baa6[_0x8b84fd(0x229)];else{}}_0x1a6269[_0x8b84fd(0x2c8)]=_0x12baa6[_0x8b84fd(0x2c8)],updateHighestFee(_0x1a6269),_0x1defd0(_0x8b84fd(0x2c8)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x2ad8c4=await getCoins();[currentCoins,currentCoinsAll]=_0x2ad8c4;}_0x1a6269['fee']={'currency':_0x12baa6['fee']?_0x12baa6[_0x8b84fd(0x1ba)][_0x8b84fd(0x21c)]:null,'cost':_0x12baa6[_0x8b84fd(0x1ba)]?_0x12baa6[_0x8b84fd(0x1ba)][_0x8b84fd(0x2af)]:0x0},await updateCoinResults(_0x1a6269);}}}if(!_0x34cffb){logger[_0x8b84fd(0x19f)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x12baa6['id']),_0x1defd0(_0x8b84fd(0x2c8));const _0x11f1b1=await getCoins();[currentCoins,currentCoinsAll]=_0x11f1b1,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3e9b54=JSON['parse'](lastBalances[_0x8b84fd(0x1c6)]);const _0xcd3ee7=_0x3e9b54[_0x8b84fd(0x2a8)](_0x2cf96d=>_0x2cf96d[_0x8b84fd(0x291)]==_0x12baa6[_0x8b84fd(0x291)]);if(_0xcd3ee7){if(_0x4fa414==_0x8b84fd(0x26f))_0xcd3ee7['orderstatus']=_0xcd3ee7[_0x8b84fd(0x295)]==_0x8b84fd(0x2c8)?_0x8b84fd(0x2c8):'open';else{if(_0x4fa414=='canceled')_0xcd3ee7[_0x8b84fd(0x295)]=_0xcd3ee7[_0x8b84fd(0x295)]=='filled'?_0x8b84fd(0x2c8):_0x8b84fd(0x27c);else _0x4fa414==_0x8b84fd(0x2b7)&&(_0xcd3ee7[_0x8b84fd(0x295)]=_0x8b84fd(0x2c8));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3e9b54)},proxyEmit(_0x8b84fd(0x1d3),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xe857a7=_0x251f1d;await getOpenOrders();let _0x253c1d=![];currentCoins[_0xe857a7(0x281)](_0x19ac47=>{const _0x491d68=_0xe857a7;_0x253c1d=allOpenOrders[_0x491d68(0x2a8)](_0x2870ef=>_0x2870ef[_0x491d68(0x291)]==_0x19ac47[_0x491d68(0x291)]),_0x19ac47[_0x491d68(0x295)]=_0x253c1d?'open':_0x491d68(0x223);});}async function getCoins(_0x53a476=!![],_0x2b66bc=config[_0x251f1d(0x188)]){const _0x4f68b0=_0x251f1d;let _0x3bee75,_0x2ca8a4=[],_0x2c2104=[],_0x429372=[],_0x1bee84=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3bee75=await exchange['fetchBalance'](),mybalances=_0x3bee75[_0x4f68b0(0x270)];for(const [_0x26f397,_0x525244]of Object[_0x4f68b0(0x1c9)](mybalances)){_0x1bee84[_0x4f68b0(0x220)](_0x26f397);}if(_0x2b66bc=='')for(const [_0x7c5dad,_0x5ea6bc]of Object[_0x4f68b0(0x1c9)](mybalances)){_0x5ea6bc!=0x0&&_0x2c2104[_0x4f68b0(0x220)]({'coin':_0x7c5dad});}else{let _0xf65ee2=![];for(const [_0xad50b4,_0x431ad8]of Object[_0x4f68b0(0x1c9)](mybalances)){if(_0x1bee84[_0x4f68b0(0x16a)](_0xad50b4)){const _0x16d1cb=config[_0x4f68b0(0x1c6)][_0x4f68b0(0x2a8)](_0x7b6e92=>_0x7b6e92['coin']==_0xad50b4),_0x88d0a4=_0xad50b4+'/'+_0x2b66bc,_0x1f0374=_0x2b66bc+'/'+_0xad50b4,_0x3e88ab=currentCoins[_0x4f68b0(0x2a8)](_0x2d02a3=>_0x2d02a3[_0x4f68b0(0x21b)]==_0xad50b4);_0xf65ee2=![];if((_0x431ad8!=0x0||_0x16d1cb)&&(allSymbols[_0x4f68b0(0x16a)](_0x88d0a4)||_0xad50b4==_0x2b66bc))_0xad50b4!=_0x2b66bc&&_0x2ca8a4['push'](_0x88d0a4),_0x2c2104[_0x4f68b0(0x220)]({'coin':_0xad50b4,'symbol':_0x88d0a4,'reverse':![],'number':Math[_0x4f68b0(0x294)](_0x431ad8+(_0x16d1cb&&_0x16d1cb['offset']||0x0),0x0),'orderstatus':_0x3e88ab?_0x3e88ab[_0x4f68b0(0x295)]:_0x4f68b0(0x223)});else(_0x431ad8!=0x0||_0x16d1cb)&&allSymbols['includes'](_0x1f0374)&&(_0xad50b4!=_0x2b66bc&&_0x2ca8a4[_0x4f68b0(0x220)](_0x1f0374),_0x2c2104[_0x4f68b0(0x220)]({'coin':_0xad50b4,'symbol':_0x1f0374,'reverse':!![],'number':Math[_0x4f68b0(0x294)](_0x431ad8+(_0x16d1cb&&_0x16d1cb['offset']||0x0),0x0),'orderstatus':_0x3e88ab?_0x3e88ab['orderstatus']:_0x4f68b0(0x223)}));}}}}catch(_0x4bb5e5){if(!_0x53a476)handleErrorNoStop(_0x4bb5e5,'getCoins()');else await handleError(_0x4bb5e5,_0x4f68b0(0x1b0));}return _0x429372=cloneDeep(_0x2c2104),_0x2c2104=_0x2c2104[_0x4f68b0(0x29d)](_0x2d260f=>{const _0x14a500=_0x4f68b0,_0x2341d7=config['portfolio']['find'](_0x549202=>_0x549202[_0x14a500(0x21b)]==_0x2d260f[_0x14a500(0x21b)]);return _0x2341d7&&!_0x2341d7[_0x14a500(0x189)];}),[_0x2c2104,_0x429372];}async function getCoinNumber(_0x1585f2){const _0x104d8a=_0x251f1d;let _0x25b0ec;try{const _0x4abc49=await exchange[_0x104d8a(0x1a6)]();_0x25b0ec=_0x4abc49[_0x104d8a(0x270)][_0x1585f2];}catch(_0x521cfe){await handleError(_0x521cfe,'getCoinNumber()');}return _0x25b0ec;}async function getOpenOrders(){const _0x24b0dc=_0x251f1d;let _0x5e3332;allOpenOrders=[];try{for(const _0x3fc10f of config[_0x24b0dc(0x1c6)]){!_0x3fc10f[_0x24b0dc(0x189)]&&_0x3fc10f[_0x24b0dc(0x21b)]!=config[_0x24b0dc(0x188)]&&(_0x5e3332=await exchange['fetchOpenOrders'](_0x3fc10f['symbol']),_0x5e3332[_0x24b0dc(0x2ac)]>0x0&&allOpenOrders[_0x24b0dc(0x220)](_0x5e3332[0x0]));}}catch(_0x64e193){await handleError(_0x64e193,_0x24b0dc(0x23b));}}async function handleOpenOrders(_0x15b11d=0x0){const _0x3b9f4c=_0x251f1d;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x15b11d==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x15b11d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x3b9f4c(0x248)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x203ae4){const _0x8f22a=_0x251f1d,_0x3fe5c0=ccxt[_0x8f22a(0x1f2)][_0x203ae4[_0x8f22a(0x20f)][_0x8f22a(0x26e)]()],_0x2a543d=new _0x3fe5c0({'apiKey':_0x203ae4[_0x8f22a(0x267)],'secret':_0x203ae4[_0x8f22a(0x173)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x203ae4[_0x8f22a(0x1ce)])_0x2a543d[_0x8f22a(0x184)]=_0x203ae4[_0x8f22a(0x1ce)];try{await _0x2a543d['loadMarkets']();}catch(_0xff1b4f){throw _0xff1b4f;}}function cloneDeep(_0x262057){const _0x3fdc1d=_0x251f1d;return JSON[_0x3fdc1d(0x199)](JSON['stringify'](_0x262057));}async function getPortfolio(_0x278653){const _0x48f4e6=_0x251f1d;let _0x52e5c2=[],_0x3969b9=[],_0xfd0aed=[],_0x265f05;if(_0x278653[_0x48f4e6(0x267)]!==_0x48f4e6(0x247)||_0x278653[_0x48f4e6(0x173)]!==_0x48f4e6(0x247)||_0x278653[_0x48f4e6(0x1ce)]&&_0x278653[_0x48f4e6(0x1ce)]!==_0x48f4e6(0x247)){if(config['exchange']){if(_0x278653[_0x48f4e6(0x267)]==_0x48f4e6(0x247))_0x278653[_0x48f4e6(0x267)]=config[_0x48f4e6(0x267)];if(_0x278653[_0x48f4e6(0x173)]==_0x48f4e6(0x247))_0x278653[_0x48f4e6(0x173)]=config['apiSecret'];if(_0x278653['apiPassword']==_0x48f4e6(0x247))_0x278653[_0x48f4e6(0x1ce)]=config[_0x48f4e6(0x1ce)];try{await testAPI(_0x278653);}catch(_0x56bd89){if(_0x56bd89[_0x48f4e6(0x152)]()[_0x48f4e6(0x16a)](_0x48f4e6(0x1c8))){logger[_0x48f4e6(0x19f)](_0x48f4e6(0x197)),proxyEmit(_0x48f4e6(0x1c6),![]);return;}else{handleError(_0x56bd89,'getPortfolio(0)');return;}}}await initExchange(_0x278653[_0x48f4e6(0x20f)],_0x278653['apiKey'],_0x278653[_0x48f4e6(0x173)],_0x278653[_0x48f4e6(0x1ce)]);try{await loadSymbols();}catch(_0x46a954){if(_0x46a954[_0x48f4e6(0x152)]()[_0x48f4e6(0x16a)](_0x48f4e6(0x1c8))){proxyEmit(_0x48f4e6(0x1c6),![]);return;}else{handleError(_0x46a954,_0x48f4e6(0x21e));return;}}const _0x594782=await getCoins(![],_0x278653[_0x48f4e6(0x188)]);_0xfd0aed=cloneDeep(_0x594782[0x1]);}else _0xfd0aed=cloneDeep(currentCoinsAll);if(_0x278653['basecoin']=='')proxyEmit(_0x48f4e6(0x1c6),_0xfd0aed);else{_0xfd0aed['forEach'](_0x5d09e3=>{const _0x14ae76=_0x48f4e6;if(_0x5d09e3[_0x14ae76(0x21b)]!=_0x278653[_0x14ae76(0x188)])_0x52e5c2[_0x14ae76(0x220)](_0x5d09e3['symbol']);});if(_0x52e5c2['length']==0x0)logHistory(_0x48f4e6(0x286),_0x48f4e6(0x2c2));else{try{_0x3969b9=await exchange['fetchTickers'](_0x52e5c2);}catch(_0x4f3c75){if(_0x4f3c75['toString']()[_0x48f4e6(0x16a)](_0x48f4e6(0x1c8))){proxyEmit(_0x48f4e6(0x1c6),![]);return;}else{handleError(_0x4f3c75,_0x48f4e6(0x2b1));return;}}_0xfd0aed[_0x48f4e6(0x281)](_0x93bc10=>{const _0x50c8a2=_0x48f4e6;_0x93bc10[_0x50c8a2(0x21b)]!=_0x278653[_0x50c8a2(0x188)]?_0x265f05=_0x93bc10[_0x50c8a2(0x161)]?0x1/_0x3969b9[_0x93bc10[_0x50c8a2(0x291)]]['last']:_0x3969b9[_0x93bc10[_0x50c8a2(0x291)]][_0x50c8a2(0x1f4)]:_0x265f05=0x1,_0x93bc10[_0x50c8a2(0x229)]=formatResult(_0x265f05,0x8);}),proxyEmit(_0x48f4e6(0x1c6),_0xfd0aed);}}}function truncateTradeAmount(_0x330791,_0x4dfe41){let _0x559f3b=0x0;try{_0x559f3b=exchange['amountToPrecision'](_0x330791,_0x4dfe41);}catch(_0x1e6eea){}return _0x559f3b;}function checkMinimums(_0x38942f){const _0x4580fc=_0x251f1d;let _0x27bb2c=!![];const _0x4bd7f8=!_0x38942f['reverse']?markets[_0x38942f[_0x4580fc(0x291)]][_0x4580fc(0x289)][_0x4580fc(0x221)][_0x4580fc(0x1ec)]:markets[_0x38942f[_0x4580fc(0x291)]][_0x4580fc(0x289)][_0x4580fc(0x2af)][_0x4580fc(0x1ec)],_0x1dcfe4=!_0x38942f[_0x4580fc(0x161)]?markets[_0x38942f[_0x4580fc(0x291)]][_0x4580fc(0x289)][_0x4580fc(0x2af)][_0x4580fc(0x1ec)]:markets[_0x38942f[_0x4580fc(0x291)]]['limits'][_0x4580fc(0x221)]['min'],_0x1f86d2=truncateTradeAmount(_0x38942f[_0x4580fc(0x291)],_0x38942f[_0x4580fc(0x193)]);_0x38942f[_0x4580fc(0x193)]=_0x1f86d2;if(Math[_0x4580fc(0x24b)](_0x1f86d2)<_0x4bd7f8)_0x27bb2c=![];if(Math[_0x4580fc(0x24b)](_0x1f86d2)*_0x38942f[_0x4580fc(0x1f4)]<_0x1dcfe4)_0x27bb2c=![];if(_0x38942f['side']==_0x4580fc(0x1b9)){let _0x1f554b=config[_0x4580fc(0x1c6)][_0x4580fc(0x2a8)](_0x27e811=>_0x27e811['coin']==_0x38942f['coin']);if(_0x1f554b['offset']>0x0){if(Math[_0x4580fc(0x24b)](_0x1f86d2)>_0x38942f[_0x4580fc(0x244)]-_0x1f554b[_0x4580fc(0x179)])_0x27bb2c=![];}else{if(Math[_0x4580fc(0x24b)](_0x1f86d2)>_0x38942f[_0x4580fc(0x244)])_0x27bb2c=![];}}if(_0x38942f[_0x4580fc(0x28d)]==_0x4580fc(0x186)){let _0x140a27=config[_0x4580fc(0x1c6)][_0x4580fc(0x2a8)](_0x1f578d=>_0x1f578d['coin']==config[_0x4580fc(0x188)]),_0x4f8bb8=currentCoins[_0x4580fc(0x2a8)](_0x5a3f99=>_0x5a3f99[_0x4580fc(0x21b)]==config[_0x4580fc(0x188)]);if(_0x140a27[_0x4580fc(0x179)]>0x0){if(Math['abs'](_0x1f86d2)*_0x38942f[_0x4580fc(0x1f4)]>_0x4f8bb8[_0x4580fc(0x244)]-_0x140a27[_0x4580fc(0x179)])_0x27bb2c=![];}else{if(Math[_0x4580fc(0x24b)](_0x1f86d2)*_0x38942f[_0x4580fc(0x1f4)]>_0x4f8bb8[_0x4580fc(0x244)])_0x27bb2c=![];}}return _0x27bb2c;}async function getBalances(_0x536198=!![]){const _0x492a74=_0x251f1d;let _0x31ffca=0x0,_0x5dca69;const _0x52d189=config['threshold'];if(config[_0x492a74(0x207)]&&config[_0x492a74(0x18e)]<0x0)await validate24hChanges();currentCoins[_0x492a74(0x281)](_0x53d9cd=>{const _0x4c4f4b=_0x492a74;if(_0x53d9cd['coin']!=config['basecoin']){let _0x1c606f=global[_0x4c4f4b(0x23f)][noslash(_0x53d9cd[_0x4c4f4b(0x291)])];_0x5dca69=_0x53d9cd[_0x4c4f4b(0x161)]?0x1/_0x1c606f:_0x1c606f;}else _0x5dca69=0x1;let _0x25315b=_0x53d9cd['number']*_0x5dca69;_0x31ffca+=_0x25315b,_0x53d9cd[_0x4c4f4b(0x1f4)]=formatResult(Number(_0x5dca69),0x8),_0x53d9cd[_0x4c4f4b(0x1a4)]=_0x25315b;}),currentCoins[_0x492a74(0x281)](_0x4aff37=>{const _0x52fd50=_0x492a74;let _0x27e398=config[_0x52fd50(0x1c6)][_0x52fd50(0x2a8)](_0xb3b9ce=>_0xb3b9ce[_0x52fd50(0x21b)]==_0x4aff37['coin']),_0x262177=Number(_0x27e398[_0x52fd50(0x254)]),_0x4fd36f=_0x4aff37[_0x52fd50(0x1a4)]/_0x31ffca*0x64,_0x38d97b=_0x262177*_0x31ffca/0x64/_0x4aff37[_0x52fd50(0x1f4)]-_0x4aff37[_0x52fd50(0x244)];_0x4aff37[_0x52fd50(0x254)]=formatResult(_0x4fd36f,0x3),_0x4aff37['target']=formatResult(_0x262177,0x3),_0x4aff37[_0x52fd50(0x193)]=formatResult(_0x38d97b,0x8),_0x4aff37[_0x52fd50(0x28d)]='',_0x4aff37[_0x52fd50(0x18d)]=![];if(_0x4aff37[_0x52fd50(0x21b)]!=config['basecoin']){if(_0x4aff37[_0x52fd50(0x254)]>_0x262177)_0x4aff37[_0x52fd50(0x28d)]=_0x52fd50(0x1b9),_0x4aff37[_0x52fd50(0x18d)]=checkMinimums(_0x4aff37);else _0x4aff37[_0x52fd50(0x254)]<_0x262177&&(_0x4aff37[_0x52fd50(0x28d)]=_0x52fd50(0x186),_0x4aff37[_0x52fd50(0x18d)]=checkMinimums(_0x4aff37));}_0x4aff37['delta']=_0x4aff37[_0x52fd50(0x254)]/_0x4aff37[_0x52fd50(0x1d2)]-0x1;if(_0x4aff37[_0x52fd50(0x295)]=='filled'||_0x4aff37['orderstatus']==_0x52fd50(0x27c))_0x4aff37[_0x52fd50(0x295)]='none';}),currentCoins[_0x492a74(0x198)]((_0x1437b8,_0x26ba20)=>_0x1437b8['delta']<_0x26ba20['delta']?0x1:_0x26ba20[_0x492a74(0x19b)]<_0x1437b8[_0x492a74(0x19b)]?-0x1:0x0);const _0x2e8cc7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2e8cc7['eur'],'usd':_0x2e8cc7[_0x492a74(0x1ad)],'portfolio':JSON[_0x492a74(0x1f5)](currentCoins),'threshold':_0x52d189},proxyEmit(_0x492a74(0x1d3),{'serverversion':serverversion,'balances':lastBalances});if(_0x536198){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x52d189});else{if(lockOrders==ORDERS[_0x492a74(0x1e2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x52d189});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1097ef=getNormalizedPerformance();getStartingBalances(_0x1097ef),emitPerformance(_0x1097ef);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x14f9b7=getNormalizedPerformance();emitPerformance(_0x14f9b7),getStartingBalances(_0x14f9b7),logger[_0x492a74(0x19f)](_0x492a74(0x26c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x52c1c6=_0x251f1d;if(!lastBalances)return;let _0x504f9d=[],_0x5b3726,_0x1f4c16=JSON[_0x52c1c6(0x199)](lastBalances[_0x52c1c6(0x1c6)]);_0x1f4c16[_0x52c1c6(0x198)]((_0x535da5,_0x449cdf)=>_0x535da5[_0x52c1c6(0x21b)]>_0x449cdf[_0x52c1c6(0x21b)]?0x1:_0x449cdf[_0x52c1c6(0x21b)]>_0x535da5['coin']?-0x1:0x0),_0x1f4c16[_0x52c1c6(0x281)](_0x369b4e=>{const _0x2f9296=_0x52c1c6;let _0x10108d={'coin':_0x369b4e['coin'],'number':_0x369b4e[_0x2f9296(0x244)],'price':_0x369b4e[_0x2f9296(0x1f4)]};_0x504f9d[_0x2f9296(0x220)](_0x10108d);});const _0x1d218f=await getFiat();_0x5b3726={'date':lastBalances[_0x52c1c6(0x15d)][_0x52c1c6(0x16c)]('\x20')[0x0],'eur':_0x1d218f['eur'],'usd':_0x1d218f[_0x52c1c6(0x1ad)],'coins':_0x504f9d};let _0x35fbe9=dbPerformance['get'](_0x52c1c6(0x1ab))[_0x52c1c6(0x2a8)]({'date':_0x5b3726['date']})[_0x52c1c6(0x1a4)]();_0x35fbe9?_0x5b3726['date']!=config['startdate']&&dbPerformance[_0x52c1c6(0x2c5)](_0x52c1c6(0x1ab))[_0x52c1c6(0x2a8)]({'date':_0x5b3726[_0x52c1c6(0x24d)]})[_0x52c1c6(0x22d)](_0x5b3726)[_0x52c1c6(0x175)]():dbPerformance[_0x52c1c6(0x2c5)](_0x52c1c6(0x1ab))['push'](_0x5b3726)[_0x52c1c6(0x175)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4d6b76=_0x251f1d;let _0x2b1f4d=[];if(dbPerformance[_0x4d6b76(0x1d8)](_0x4d6b76(0x1ab))['value']()){let _0x529d42=dbPerformance[_0x4d6b76(0x2c5)](_0x4d6b76(0x1ab))[_0x4d6b76(0x187)]()['filter'](_0x21bc7d=>{const _0x47bceb=_0x4d6b76;if(_0x21bc7d[_0x47bceb(0x171)][_0x47bceb(0x2ac)]==0x0)return![];else return!![];})[_0x4d6b76(0x24c)](_0x4d6b76(0x24d))['value'](),_0x4d79ab=[...config['liquidity']];_0x4d79ab[_0x4d6b76(0x198)]((_0x56a146,_0x567dbc)=>_0x56a146[_0x4d6b76(0x24d)]>_0x567dbc[_0x4d6b76(0x24d)]?-0x1:_0x567dbc[_0x4d6b76(0x24d)]>_0x56a146[_0x4d6b76(0x24d)]?0x1:0x0);let _0x227852=0x1,_0x268086=[],_0x27d181=0x0;_0x529d42[_0x4d6b76(0x216)]()['reverse']()['forEach']((_0xd84b58,_0xeec2d6)=>{const _0x4ba0ea=_0x4d6b76;if(_0x4d79ab[_0x27d181]){if(_0x529d42[_0x529d42[_0x4ba0ea(0x2ac)]-_0xeec2d6]&&_0x4d79ab[_0x27d181]['date']==_0x529d42[_0x529d42[_0x4ba0ea(0x2ac)]-_0xeec2d6][_0x4ba0ea(0x24d)]){if(_0xeec2d6<_0x529d42[_0x4ba0ea(0x2ac)]){let _0x36d014=0x0,_0x3be377=0x0;_0x529d42[_0x529d42['length']-_0xeec2d6][_0x4ba0ea(0x171)][_0x4ba0ea(0x281)](_0x37a7c3=>{const _0x193db2=_0x4ba0ea;_0x3be377+=_0x37a7c3[_0x193db2(0x244)]*_0x37a7c3[_0x193db2(0x229)];}),_0x4d79ab[_0x27d181][_0x4ba0ea(0x2a1)][_0x4ba0ea(0x281)](_0x2c6677=>{const _0xd45318=_0x4ba0ea;_0x36d014+=_0x2c6677[_0xd45318(0x244)]*_0x2c6677[_0xd45318(0x229)];}),_0x227852*=_0x36d014/(_0x3be377-_0x36d014)+0x1;}_0x27d181++;}}let _0x3110fa=0x0;_0xd84b58[_0x4ba0ea(0x171)][_0x4ba0ea(0x281)](_0x45b35e=>{const _0x4ed47b=_0x4ba0ea;_0x3110fa+=_0x45b35e[_0x4ed47b(0x244)]*_0x45b35e['price'];}),_0x268086[_0x529d42['length']-_0xeec2d6-0x1]=_0x3110fa*(_0x227852-0x1);});let _0x55ae8a=[];_0x4d79ab=[...config[_0x4d6b76(0x1ee)]]||[];let _0x50b117=0x0;_0x27d181=0x0,_0x529d42[_0x4d6b76(0x281)]((_0x3c1530,_0x5314e0)=>{const _0x566fc4=_0x4d6b76;if(_0x4d79ab[_0x27d181]){const _0x2711c6=fns[_0x566fc4(0x199)](_0x4d79ab[_0x27d181][_0x566fc4(0x24d)],'yyyy/MM/dd',new Date()),_0x32d29a=fns[_0x566fc4(0x199)](_0x3c1530[_0x566fc4(0x24d)],_0x566fc4(0x219),new Date());if(fns[_0x566fc4(0x28b)](_0x2711c6,_0x32d29a)){let _0x255008=0x0;_0x4d79ab[_0x27d181][_0x566fc4(0x2a1)]['forEach'](_0x197a10=>{const _0xaa7231=_0x566fc4;!_0x55ae8a[_0x197a10['coin']]?_0x55ae8a[_0x197a10[_0xaa7231(0x21b)]]=_0x197a10[_0xaa7231(0x244)]:(_0x255008=_0x55ae8a[_0x197a10[_0xaa7231(0x21b)]],_0x55ae8a[_0x197a10['coin']]+=_0x197a10[_0xaa7231(0x244)]);const _0x198504=_0x3c1530[_0xaa7231(0x171)][_0xaa7231(0x2a8)](_0x131b8f=>_0x131b8f[_0xaa7231(0x21b)]==_0x197a10[_0xaa7231(0x21b)]);(!_0x198504||_0x198504[_0xaa7231(0x244)]==0x0)&&(_0x50b117+=(-_0x197a10['number']-_0x255008)*_0x197a10[_0xaa7231(0x229)]);}),_0x27d181++;}}_0x3c1530[_0x566fc4(0x171)][_0x566fc4(0x281)]((_0x53b153,_0x5af540)=>{const _0x2d2bd4=_0x566fc4;_0x55ae8a[_0x53b153['coin']]&&(_0x53b153[_0x2d2bd4(0x237)]=_0x55ae8a[_0x53b153[_0x2d2bd4(0x21b)]]);}),_0x2b1f4d[_0x566fc4(0x220)]({'date':_0x3c1530['date'],'eur':_0x3c1530[_0x566fc4(0x2b8)],'usd':_0x3c1530[_0x566fc4(0x1ad)],'offset':_0x268086[_0x5314e0],'netoffset':_0x50b117,'coins':_0x3c1530[_0x566fc4(0x171)]});});}return _0x2b1f4d;}function emitPerformance(_0x1b7dd1){const _0x423227=_0x251f1d;_0x1b7dd1[_0x423227(0x2ac)]!==0x0?(proxyEmit(_0x423227(0x25a),_0x1b7dd1),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x452ffb,_0x5de1ed){const _0x2f554d=_0x251f1d;let _0x312eee=0x0,_0x267174=0x0,_0x11c474=0x0;_0x452ffb[_0x2f554d(0x171)][_0x2f554d(0x281)](_0xfdc03d=>{const _0x19b49e=_0x2f554d;_0x312eee+=_0xfdc03d['number']*_0xfdc03d[_0x19b49e(0x229)];});_0x5de1ed&&(_0x312eee+=_0x452ffb[_0x2f554d(0x179)]);if(config[_0x2f554d(0x188)]===_0x2f554d(0x157)||config[_0x2f554d(0x188)]===_0x2f554d(0x296))_0x267174=_0x312eee*_0x452ffb[_0x2f554d(0x2b8)],_0x11c474=_0x312eee*_0x452ffb[_0x2f554d(0x1ad)];else{if(usdBasecoins[_0x2f554d(0x16a)](config['basecoin']))_0x267174=_0x312eee*_0x452ffb[_0x2f554d(0x2b8)]/_0x452ffb[_0x2f554d(0x1ad)],_0x11c474=_0x312eee;else config['basecoin']==='EUR'&&(_0x267174=_0x312eee,_0x11c474=_0x312eee*_0x452ffb[_0x2f554d(0x1ad)]/_0x452ffb[_0x2f554d(0x2b8)]);}return[_0x312eee,_0x267174,_0x11c474];}function getKPIs(_0x25cc2d,_0x4351f9='EUR'){const _0x2e385e=_0x251f1d,_0x3442f9=config[_0x2e385e(0x188)],_0x2948ae=lastBalances,_0x1a5f5c=currentCoins,_0x5b46de=getNormalizedPerformance(),_0x459200=_0x25cc2d==='basecoin'?_0x3442f9:_0x25cc2d===_0x2e385e(0x264)||_0x25cc2d===_0x2e385e(0x1f7)?_0x4351f9:_0x2e385e(0x21a)+_0x3442f9,_0x1e71b1=_0x25cc2d===_0x2e385e(0x235)?_0x2e385e(0x2bc):_0x25cc2d===_0x2e385e(0x1f7)?_0x2e385e(0x2bc):_0x459200+_0x2e385e(0x250),_0x37e5b8=_0x25cc2d===_0x2e385e(0x235)||_0x25cc2d==='net-fiat'?_0x2e385e(0x2bc):_0x459200+'\x20change';let _0xaeaeb7=0x0;_0x1a5f5c[_0x2e385e(0x281)](_0x121fcc=>{const _0x12e7e4=_0x2e385e;_0xaeaeb7+=_0x121fcc[_0x12e7e4(0x244)]*_0x121fcc['last'];});if(_0x25cc2d==='fiat'||_0x25cc2d==='net-fiat'){if(_0x3442f9==='BTC'||_0x3442f9===_0x2e385e(0x296))_0xaeaeb7=_0xaeaeb7*(_0x4351f9===_0x2e385e(0x192)?_0x2948ae[_0x2e385e(0x2b8)]:_0x2948ae[_0x2e385e(0x1ad)]);else{if(usdBasecoins[_0x2e385e(0x16a)](_0x3442f9))_0xaeaeb7=_0xaeaeb7*(_0x4351f9==='EUR'?_0x2948ae[_0x2e385e(0x2b8)]/_0x2948ae['usd']:0x1);else _0x3442f9==='EUR'&&(_0xaeaeb7=_0xaeaeb7*(_0x4351f9===_0x2e385e(0x192)?0x1:_0x2948ae[_0x2e385e(0x1ad)]/_0x2948ae[_0x2e385e(0x2b8)]));}}let _0x29b311;if(_0xaeaeb7!==0x0){if(_0x25cc2d===_0x2e385e(0x188))_0x29b311=(_0xaeaeb7/startingBalances[_0x2e385e(0x188)]-0x1)*0x64;else{if(_0x4351f9===_0x2e385e(0x192))_0x29b311=(_0xaeaeb7/startingBalances['eur']-0x1)*0x64;else _0x29b311=(_0xaeaeb7/startingBalances[_0x2e385e(0x1ad)]-0x1)*0x64;}let _0x374ff5=0x0;if(startingBalances[_0x2e385e(0x171)])_0x1a5f5c[_0x2e385e(0x281)](_0x1221d4=>{const _0x462266=_0x2e385e;let _0x4e7070=startingBalances['coins'][_0x462266(0x2a8)](_0xa693eb=>_0xa693eb[_0x462266(0x21b)]===_0x1221d4[_0x462266(0x21b)]);if(_0x4e7070&&_0x4e7070[_0x462266(0x21b)]&&_0x1221d4[_0x462266(0x244)]!==0x0)_0x374ff5+=_0x4e7070[_0x462266(0x244)]*_0x1221d4['last'];});let _0x5597ce=0x0;if(_0x5b46de['length']!==0x0){let _0x56b0df=_0x5b46de[_0x5b46de[_0x2e385e(0x2ac)]-0x1];_0x5597ce=_0x56b0df[_0x2e385e(0x260)];}_0x374ff5-=_0x5597ce;_0x25cc2d===_0x2e385e(0x235)&&(_0x29b311=(_0xaeaeb7-_0x374ff5)/startingBalances[_0x2e385e(0x188)]*0x64,_0xaeaeb7=_0xaeaeb7-_0x374ff5);if(_0x25cc2d===_0x2e385e(0x1f7)){let _0x5aa3a2=_0x4351f9===_0x2e385e(0x192)?startingBalances[_0x2e385e(0x2b8)]:startingBalances[_0x2e385e(0x1ad)];if(_0x3442f9===_0x2e385e(0x157)||_0x3442f9===_0x2e385e(0x296))_0x374ff5=_0x4351f9==='EUR'?_0x374ff5*_0x2948ae['eur']:_0x374ff5*_0x2948ae[_0x2e385e(0x1ad)];else{if(usdBasecoins[_0x2e385e(0x16a)](_0x3442f9))_0x374ff5=_0x4351f9==='EUR'?_0x374ff5*_0x2948ae[_0x2e385e(0x2b8)]/_0x2948ae[_0x2e385e(0x1ad)]:_0x374ff5;else _0x3442f9===_0x2e385e(0x192)&&(_0x374ff5=_0x4351f9===_0x2e385e(0x192)?_0x374ff5:_0x374ff5*_0x2948ae[_0x2e385e(0x1ad)]/_0x2948ae['eur']);}_0x29b311=(_0xaeaeb7-_0x374ff5)/_0x5aa3a2*0x64,_0xaeaeb7=_0xaeaeb7-_0x374ff5;}if(_0x29b311){if(_0x29b311<0x64)_0x29b311=_0x29b311['toFixed'](0x2);else{if(_0x29b311<0x3e8)_0x29b311=_0x29b311[_0x2e385e(0x2ad)](0x1);else _0x29b311=_0x29b311['toFixed'](0x0);}}else _0x29b311=Number('0')[_0x2e385e(0x2ad)](0x2);if(_0xaeaeb7){if(Math[_0x2e385e(0x24b)](_0xaeaeb7)<0.000001)_0xaeaeb7=_0xaeaeb7[_0x2e385e(0x2ad)](0x2);else{if(Math[_0x2e385e(0x24b)](_0xaeaeb7)<0.1)_0xaeaeb7=_0xaeaeb7[_0x2e385e(0x2ad)](0x6);else{if(Math['abs'](_0xaeaeb7)<0x1)_0xaeaeb7=_0xaeaeb7[_0x2e385e(0x2ad)](0x5);else{if(Math[_0x2e385e(0x24b)](_0xaeaeb7)<0xa)_0xaeaeb7=_0xaeaeb7[_0x2e385e(0x2ad)](0x4);else{if(Math[_0x2e385e(0x24b)](_0xaeaeb7)<0x64)_0xaeaeb7=_0xaeaeb7['toFixed'](0x3);else{if(Math[_0x2e385e(0x24b)](_0xaeaeb7)<0x3e8)_0xaeaeb7=_0xaeaeb7[_0x2e385e(0x2ad)](0x2);else _0xaeaeb7=_0xaeaeb7['toFixed'](0x2);}}}}}}else _0xaeaeb7=Number('0')[_0x2e385e(0x2ad)](0x2);}else _0x29b311=Number('0')[_0x2e385e(0x2ad)](0x2);return{'value':_0xaeaeb7,'change':_0x29b311,'leftTxt':_0x1e71b1,'rightTxt':_0x37e5b8};}async function getStartingBalances(_0x2eb989,_0xe088f2=!![]){const _0x510411=_0x251f1d;if(_0x2eb989[_0x510411(0x2ac)]!==0x0){const [_0x83e1cb,_0x55281c,_0x56f699]=getPerf(_0x2eb989[0x0],!![]);let _0x2a0eab=[];config[_0x510411(0x1c6)][_0x510411(0x281)](_0x31638e=>{const _0xfc3de7=_0x510411;let _0x2a6ae3=0x0,_0x5311a7;config[_0xfc3de7(0x1ee)]['forEach'](_0x486faa=>{const _0x5f8bb7=_0xfc3de7;let _0x342c9e=_0x486faa[_0x5f8bb7(0x2a1)]['find'](_0x1b9fdc=>_0x1b9fdc[_0x5f8bb7(0x21b)]==_0x31638e['coin']);if(_0x342c9e){_0x2a6ae3+=_0x342c9e[_0x5f8bb7(0x244)];if(!_0x5311a7)_0x5311a7=_0x342c9e[_0x5f8bb7(0x229)];}}),_0x2a0eab[_0xfc3de7(0x220)]({'coin':_0x31638e[_0xfc3de7(0x21b)],'number':_0x2a6ae3,'initialprice':_0x5311a7});});const _0x2d7f3b={'basecoin':_0x83e1cb,'eur':_0x55281c,'usd':_0x56f699,'coins':_0x2a0eab};if(_0xe088f2)proxyEmit(_0x510411(0x14b),_0x2d7f3b);startingBalances=_0x2d7f3b;}}function headlessMode(_0x366a17){const _0x26bbd6=_0x251f1d;let _0x4025f3=_0x366a17[_0x26bbd6(0x1c6)],_0x50c574=_0x366a17[_0x26bbd6(0x214)],_0x48bd67=[];for(let _0x2029ba of _0x4025f3){if(_0x2029ba[_0x26bbd6(0x21b)]!=config[_0x26bbd6(0x188)]){if(_0x2029ba[_0x26bbd6(0x19b)]>=_0x50c574/0x64){if(_0x2029ba[_0x26bbd6(0x18d)])_0x48bd67[_0x26bbd6(0x220)](_0x2029ba);}else{if(_0x2029ba[_0x26bbd6(0x19b)]<=-_0x50c574/0x64){if(_0x2029ba['valid'])_0x48bd67['push'](_0x2029ba);}}}}_0x48bd67[_0x26bbd6(0x2ac)]>0x0&&placeOrder(_0x48bd67);}function notifyBalance(_0x5a6ef2){const _0x4a5363=_0x251f1d;let _0x413e32=_0x5a6ef2['portfolio'],_0x365984=_0x5a6ef2[_0x4a5363(0x214)],_0x1bc2d7=[];for(let _0x590c66 of _0x413e32){if(_0x590c66['coin']!=config[_0x4a5363(0x188)]){if(_0x590c66[_0x4a5363(0x19b)]>=_0x365984/0x64){if(_0x590c66[_0x4a5363(0x18d)])_0x1bc2d7[_0x4a5363(0x220)](_0x590c66);}else{if(_0x590c66[_0x4a5363(0x19b)]<=-_0x365984/0x64){if(_0x590c66['valid'])_0x1bc2d7[_0x4a5363(0x220)](_0x590c66);}}}}if(_0x1bc2d7['length']>0x0){let _0x786170=_0x1bc2d7['map'](_0x238e3b=>_0x238e3b[_0x4a5363(0x21b)]);_0x786170[_0x4a5363(0x198)]();let _0x304f55=_0x786170[_0x4a5363(0x18f)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x4a5363(0x1ea));lastCoinsToBalance=_0x304f55;}}function symbolToCoin(_0x388d3a){const _0x596113=_0x251f1d;let _0xe06552;if(_0x388d3a[_0x596113(0x16a)]('/'+config[_0x596113(0x188)]))_0xe06552=_0x388d3a['replace']('/'+config[_0x596113(0x188)],'');if(_0x388d3a[_0x596113(0x16a)](config['basecoin']+'/'))_0xe06552=_0x388d3a[_0x596113(0x1cb)](config[_0x596113(0x188)]+'/','');return _0xe06552;}async function unlockOrders(){const _0x455aac=_0x251f1d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x455aac(0x23e)]){logger[_0x455aac(0x19f)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x455aac(0x231)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4767a4=await getCoins();[currentCoins,currentCoinsAll]=_0x4767a4,validateOrdersState=_0x455aac(0x237),persistOpenOrders([]),lockOrders=ORDERS[_0x455aac(0x1e2)],logger[_0x455aac(0x19f)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x20aefc){const _0x3f32e9=_0x251f1d;if(_0x20aefc)validateOrdersState=_0x20aefc;logger[_0x3f32e9(0x19f)](_0x3f32e9(0x23c)+validateOrdersState+_0x3f32e9(0x1c4)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x3f32e9(0x28e):_0x3f32e9(0x2ba)));let _0x5ac079=[],_0x5de354=config['ordertype']==_0x3f32e9(0x1bc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3f32e9(0x204)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3f32e9(0x23e)])return;logger['debug'](_0x3f32e9(0x162)+validateOrdersState),lastOrders[_0x3f32e9(0x281)](_0xe1a05=>{const _0x1f8e46=_0x3f32e9;let _0x22ba11=![];_0xe1a05[_0x1f8e46(0x2c8)]>0x0&&(_0x22ba11=!![]),_0x5ac079[_0x1f8e46(0x220)](_0x22ba11),_0x22ba11&&config[_0x1f8e46(0x263)]!=_0x1f8e46(0x1bc)&&logHistory(_0x1f8e46(0x1eb),_0x1f8e46(0x174)+_0xe1a05['symbol']+'\x20'+_0xe1a05[_0x1f8e46(0x28d)]+'\x20#'+formatResult(_0xe1a05[_0x1f8e46(0x2c8)],0x8)+'\x20@'+formatResult(_0xe1a05[_0x1f8e46(0x229)],0x8));}),_0x5ac079['forEach']((_0xe29ebf,_0x3ca0fd)=>{if(_0xe29ebf)lastOrders['splice'](_0x3ca0fd,0x1);}),persistOpenOrders(lastOrders);const _0x18a22d=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x3f32e9(0x15c);if(validateOrdersState==_0x3f32e9(0x237)){validateOrdersState='ongoing';if(_0x5ac079['includes'](![])){if(config['ordertype']==_0x3f32e9(0x1bc)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3f32e9(0x26a)){if(_0x5ac079[_0x3f32e9(0x16a)](![])){}else{if(allOrdersPlaced){if(config[_0x3f32e9(0x263)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x5ac079[_0x3f32e9(0x16a)](![])&&(config[_0x3f32e9(0x263)]==_0x3f32e9(0x1bc)?logHistory(_0x3f32e9(0x265),_0x3f32e9(0x154)+Math[_0x3f32e9(0x276)](_0x5de354*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x18a22d):(await cancelOrders(),logHistory(_0x3f32e9(0x265),_0x3f32e9(0x151)+Math[_0x3f32e9(0x276)](_0x5de354*validateOrderInterval/0xea60)+_0x3f32e9(0x271)+_0x18a22d))),await unlockOrders();else{if(validateOrdersState==_0x3f32e9(0x29c)){if(config[_0x3f32e9(0x263)]!=_0x3f32e9(0x1bc))logHistory(_0x3f32e9(0x265),'No\x20more\x20open\x20orders\x20-\x20'+_0x18a22d);await unlockOrders();}}}}}async function cancelOrders(){const _0x56d276=_0x251f1d;lastOrders[_0x56d276(0x281)](async _0x524779=>{const _0x35232c=_0x56d276;try{const _0x341363=await exchange[_0x35232c(0x15b)](_0x524779[_0x35232c(0x262)],_0x524779[_0x35232c(0x291)]);}catch(_0x227e0e){if(_0x227e0e[_0x35232c(0x152)]()[_0x35232c(0x16a)](_0x35232c(0x256))){}else await handleError(_0x227e0e,'cancelOrders()');}});}async function initCoinResults(_0x275879){const _0x1b7eaf=_0x251f1d;_0x275879?logger[_0x1b7eaf(0x19f)](_0x1b7eaf(0x25d)+_0x275879):logger[_0x1b7eaf(0x19f)]('Initializing\x20coin\x20results'),config['portfolio'][_0x1b7eaf(0x281)](_0x187886=>{const _0x24e839=_0x1b7eaf;if(!_0x187886[_0x24e839(0x189)]&&_0x187886[_0x24e839(0x21b)]!=config[_0x24e839(0x188)]){const _0x156f28=currentCoins[_0x24e839(0x2a8)](_0x6c7740=>_0x6c7740[_0x24e839(0x21b)]==_0x187886[_0x24e839(0x21b)]),_0x59a0c0=global[_0x24e839(0x23f)][noslash(_0x187886[_0x24e839(0x291)])];let _0x527539=_0x156f28?_0x156f28[_0x24e839(0x244)]:null,_0x19d974=_0x187886[_0x24e839(0x161)]?0x1/_0x59a0c0:_0x59a0c0,_0x5b0f52;config['liquidity'][_0x24e839(0x281)](_0x5546cb=>{const _0x455a84=_0x24e839;!_0x5b0f52&&(_0x5b0f52=_0x5546cb[_0x455a84(0x2a1)][_0x455a84(0x2a8)](_0x1f1686=>_0x1f1686[_0x455a84(0x21b)]==_0x187886[_0x455a84(0x21b)]),_0x5b0f52&&(_0x527539=_0x5b0f52[_0x455a84(0x244)],_0x19d974=_0x5b0f52[_0x455a84(0x229)]));});let _0x17f36a=dbCoinResults[_0x24e839(0x2c5)](_0x24e839(0x171))[_0x24e839(0x2a8)]({'coin':_0x187886[_0x24e839(0x21b)]})[_0x24e839(0x1a4)]();if(!_0x17f36a){const _0xeac8a6={'coin':_0x187886['coin'],'number':_0x527539,'breakeven':_0x19d974,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x24e839(0x2c5)](_0x24e839(0x171))[_0x24e839(0x220)](_0xeac8a6)[_0x24e839(0x175)]();}else{if(_0x275879&&_0x187886[_0x24e839(0x21b)]==_0x275879){const _0xec5c0c={'coin':_0x187886[_0x24e839(0x21b)],'number':_0x527539,'breakeven':_0x19d974,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x24e839(0x2c5)]('coins')[_0x24e839(0x2a8)]({'coin':_0x187886[_0x24e839(0x21b)]})[_0x24e839(0x22d)](_0xec5c0c)[_0x24e839(0x175)]();}}}});}async function updateCoinResults(_0x51ec8c,_0x4d3054=![]){const _0x331763=_0x251f1d;let _0x5cdd3f,_0x17743c,_0x4f1628,_0x31d399,_0x1f1f89,_0x1f7a2b,_0x2d9f26=dbCoinResults[_0x331763(0x2c5)]('coins')[_0x331763(0x2a8)]({'coin':_0x51ec8c['coin']})['value'](),_0x4d7f49=![];_0x2d9f26&&Object[_0x331763(0x1c9)](_0x2d9f26)['forEach'](([_0x21266c,_0x3c4f13])=>{if(_0x3c4f13==null)_0x4d7f49=!![];});(!_0x2d9f26||_0x4d7f49)&&(await initCoinResults(_0x51ec8c[_0x331763(0x21b)]),_0x2d9f26=dbCoinResults['get'](_0x331763(0x171))[_0x331763(0x2a8)]({'coin':_0x51ec8c[_0x331763(0x21b)]})[_0x331763(0x1a4)]());_0x51ec8c['reverse']&&(_0x1f7a2b={'filled':_0x51ec8c[_0x331763(0x2c8)]*_0x51ec8c[_0x331763(0x229)],'amount':_0x51ec8c[_0x331763(0x2c8)]*_0x51ec8c[_0x331763(0x229)],'side':_0x51ec8c[_0x331763(0x28d)]==_0x331763(0x1b9)?'buy':_0x331763(0x1b9),'price':0x1/_0x51ec8c[_0x331763(0x229)]},_0x51ec8c={..._0x51ec8c,..._0x1f7a2b});_0x4d3054?_0x17743c=_0x51ec8c[_0x331763(0x28d)]==_0x331763(0x186)?_0x2d9f26[_0x331763(0x244)]+_0x51ec8c[_0x331763(0x2c8)]:_0x2d9f26[_0x331763(0x244)]-_0x51ec8c[_0x331763(0x2c8)]:_0x17743c=await getCoinNumber(_0x51ec8c[_0x331763(0x21b)]);if(_0x51ec8c['fee']&&_0x51ec8c[_0x331763(0x1ba)][_0x331763(0x21c)]==config['basecoin'])_0x5cdd3f=_0x51ec8c[_0x331763(0x1ba)]['cost'];else{if(_0x51ec8c['fee']&&_0x51ec8c[_0x331763(0x1ba)]['currency']==_0x331763(0x164)&&!_0x4d3054)_0x5cdd3f=_0x51ec8c[_0x331763(0x1ba)][_0x331763(0x2af)]*global[_0x331763(0x23f)][_0x331763(0x164)+config[_0x331763(0x188)]];else _0x5cdd3f=defaultFee*_0x51ec8c[_0x331763(0x2c8)]*_0x51ec8c[_0x331763(0x229)];}_0x51ec8c[_0x331763(0x28d)]==_0x331763(0x186)?(_0x4f1628=_0x17743c!=0x0?(_0x2d9f26[_0x331763(0x269)]*_0x2d9f26[_0x331763(0x244)]+_0x51ec8c[_0x331763(0x229)]*(_0x17743c-_0x2d9f26[_0x331763(0x244)])+_0x5cdd3f)/_0x17743c:0x0,_0x31d399=_0x2d9f26[_0x331763(0x2aa)]):(_0x4f1628=_0x17743c!=0x0?(_0x2d9f26[_0x331763(0x269)]*_0x2d9f26['number']-_0x51ec8c[_0x331763(0x229)]*(_0x2d9f26[_0x331763(0x244)]-_0x17743c)+_0x5cdd3f)/_0x17743c:0x0,_0x31d399=_0x2d9f26[_0x331763(0x2aa)]+(_0x51ec8c[_0x331763(0x229)]-_0x2d9f26['breakeven'])*_0x51ec8c[_0x331763(0x2c8)]);_0x1f1f89=(_0x51ec8c[_0x331763(0x229)]-_0x4f1628-_0x5cdd3f/_0x51ec8c[_0x331763(0x2c8)])*_0x17743c;let _0x10cee4={'coin':_0x51ec8c[_0x331763(0x21b)],'number':_0x17743c,'breakeven':formatResult(_0x4f1628,0x8),'realized':formatResult(_0x31d399,0x8),'unrealized':formatResult(_0x1f1f89,0x8),'fees':formatResult(_0x2d9f26['fees']+_0x5cdd3f,0x8),'sells':_0x51ec8c[_0x331763(0x28d)]==_0x331763(0x1b9)?_0x2d9f26[_0x331763(0x168)]+0x1:_0x2d9f26[_0x331763(0x168)],'buys':_0x51ec8c[_0x331763(0x28d)]==_0x331763(0x186)?_0x2d9f26[_0x331763(0x240)]+0x1:_0x2d9f26['buys']};dbCoinResults[_0x331763(0x2c5)](_0x331763(0x171))['find']({'coin':_0x51ec8c[_0x331763(0x21b)]})['assign'](_0x10cee4)[_0x331763(0x175)]();if(!_0x4d3054){if(_0x51ec8c['fee']&&_0x51ec8c[_0x331763(0x1ba)][_0x331763(0x21c)]=='BNB'){const _0x35ab75=currentCoins[_0x331763(0x2a8)](_0x29bae1=>_0x29bae1[_0x331763(0x21b)]=='BNB');if(_0x35ab75){let _0x4b90f1=dbCoinResults['get'](_0x331763(0x171))[_0x331763(0x2a8)]({'coin':_0x331763(0x164)})['value']();_0x10cee4={..._0x4b90f1,'number':_0x35ab75[_0x331763(0x244)]},dbCoinResults[_0x331763(0x2c5)](_0x331763(0x171))[_0x331763(0x2a8)]({'coin':_0x331763(0x164)})[_0x331763(0x22d)](_0x10cee4)['write']();}}}}async function placeOrder(_0x242ca8){const _0x2af9aa=_0x251f1d,_0x17e21e=config[_0x2af9aa(0x263)]=='market'?_0x2af9aa(0x1bc):_0x2af9aa(0x1a8);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2af9aa(0x23e)],allOrdersPlaced=![],validateOrdersState=_0x2af9aa(0x237);let _0x67066c=![];lastOrders=[];for(const _0x2a9bd1 of _0x242ca8){let _0x40dcc6,_0x5808b5,_0x2015d3,_0x2a6f29,_0x4840e8,_0x30bddb=_0x2a9bd1[_0x2af9aa(0x291)];try{const _0x26903b=await exchange[_0x2af9aa(0x14a)](_0x30bddb);_0x40dcc6=_0x2a9bd1[_0x2af9aa(0x161)]?0x1/_0x2a9bd1['last']:_0x2a9bd1[_0x2af9aa(0x1f4)],_0x5808b5=_0x26903b['bid'],_0x2015d3=_0x26903b[_0x2af9aa(0x2b6)];_0x2a9bd1[_0x2af9aa(0x161)]?(_0x2a6f29=_0x2a9bd1[_0x2af9aa(0x28d)]=='buy'?_0x2af9aa(0x1b9):_0x2af9aa(0x186),_0x4840e8=Math[_0x2af9aa(0x24b)](_0x2a9bd1[_0x2af9aa(0x193)])/_0x40dcc6):(_0x2a6f29=_0x2a9bd1['side'],_0x4840e8=Math[_0x2af9aa(0x24b)](_0x2a9bd1[_0x2af9aa(0x193)]));_0x17e21e==_0x2af9aa(0x1a8)&&(config['ordertype']=='limit-high'&&(_0x40dcc6=_0x2a6f29==_0x2af9aa(0x186)?_0x5808b5:_0x2015d3),config[_0x2af9aa(0x263)]==_0x2af9aa(0x278)&&(_0x40dcc6=_0x2a6f29==_0x2af9aa(0x186)?_0x2015d3:_0x5808b5));_0x4840e8=formatResult(_0x4840e8,0x8),_0x40dcc6=formatResult(_0x40dcc6,0x8);const _0x13dad2=_0x2a6f29==_0x2af9aa(0x1b9)?config['emojisell']?String[_0x2af9aa(0x1ed)]('0x'+config[_0x2af9aa(0x194)])+'\x20':'':config[_0x2af9aa(0x1dd)]?String['fromCodePoint']('0x'+config[_0x2af9aa(0x1dd)])+'\x20':'',_0xc56058=_0x17e21e==_0x2af9aa(0x1bc)?_0x2af9aa(0x205):config[_0x2af9aa(0x263)]==_0x2af9aa(0x222)?_0x2af9aa(0x26b):_0x2af9aa(0x1c3),_0x7583cd=(Math[_0x2af9aa(0x1fa)](Math[_0x2af9aa(0x159)]()*0x35a4e900)+0x5f5e100)[_0x2af9aa(0x152)]();lastOrders['push']({'customId':_0x7583cd,'symbol':_0x30bddb,'coin':_0x2a9bd1[_0x2af9aa(0x21b)],'amount':_0x4840e8,'price':_0x40dcc6,'side':_0x2a6f29,'reverse':_0x2a9bd1[_0x2af9aa(0x161)],'filled':0x0});if(_0x17e21e==_0x2af9aa(0x1bc))logHistory(_0x2af9aa(0x1eb),''+_0x13dad2+_0xc56058+_0x2af9aa(0x282)+_0x30bddb+'\x20'+_0x2a6f29+'\x20#'+formatResult(_0x4840e8,0x8)+'\x20@'+formatResult(_0x40dcc6,0x8));else logHistory(_0x2af9aa(0x1eb),''+_0x13dad2+_0xc56058+'\x20order:\x20'+_0x30bddb+'\x20'+_0x2a6f29+'\x20#'+formatResult(_0x4840e8,0x8)+'\x20@'+formatResult(_0x40dcc6,0x8));let _0x37dca1;_0x17e21e=='market'?_0x2a6f29=='buy'&&[_0x2af9aa(0x1d7),_0x2af9aa(0x224),_0x2af9aa(0x1b1),_0x2af9aa(0x163),_0x2af9aa(0x158)][_0x2af9aa(0x16a)](config['exchange'])?_0x37dca1=await exchange[_0x2af9aa(0x1db)](_0x30bddb,_0x17e21e,_0x2a6f29,_0x4840e8,_0x40dcc6):_0x37dca1=await exchange[_0x2af9aa(0x1db)](_0x30bddb,_0x17e21e,_0x2a6f29,_0x4840e8,undefined):_0x37dca1=await exchange[_0x2af9aa(0x1db)](_0x30bddb,_0x17e21e,_0x2a6f29,_0x4840e8,_0x40dcc6);logger[_0x2af9aa(0x19f)](_0x2af9aa(0x234)+_0x37dca1['id']+_0x2af9aa(0x178)+_0x7583cd);const _0x224317=lastOrders['length']-0x1;if(_0x224317>=0x0&&lastOrders[_0x224317][_0x2af9aa(0x1e5)]==_0x7583cd){lastOrders[_0x224317][_0x2af9aa(0x262)]=_0x37dca1['id'];if(_0x37dca1[_0x2af9aa(0x221)])lastOrders[_0x224317][_0x2af9aa(0x221)]=_0x37dca1['amount'];if(_0x37dca1[_0x2af9aa(0x229)])lastOrders[_0x224317][_0x2af9aa(0x229)]=_0x37dca1[_0x2af9aa(0x229)];lastOrders[_0x224317][_0x2af9aa(0x1ba)]=_0x37dca1['fee'];}if(config[_0x2af9aa(0x1c0)]!=0x0){let _0x41099a=null;if(cooldownTracker[_0x2af9aa(0x2ac)]==config[_0x2af9aa(0x1c0)]-0x1)_0x41099a=cooldownTracker['shift']();const _0x574af0=getTimeStamp();cooldownTracker[_0x2af9aa(0x220)](_0x574af0);if(_0x41099a){const _0x350c5d=fns[_0x2af9aa(0x160)](new Date(_0x574af0),new Date(_0x41099a));if(_0x350c5d<cooldownInterval){logHistory(_0x2af9aa(0x286),_0x2af9aa(0x1fd)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x4aaf65){if(_0x4aaf65[_0x2af9aa(0x152)]()[_0x2af9aa(0x16a)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x36c87f=>_0x36c87f[_0x2af9aa(0x291)]!=_0x30bddb),logHistory(_0x2af9aa(0x286),_0x2af9aa(0x274)+_0x30bddb),_0x67066c=!![];else{if(_0x4aaf65['toString']()[_0x2af9aa(0x16a)](_0x2af9aa(0x26d)))lastOrders=lastOrders[_0x2af9aa(0x29d)](_0x397599=>_0x397599[_0x2af9aa(0x291)]!=_0x30bddb),logHistory(_0x2af9aa(0x286),'Order\x20amount\x20is\x20invalid:\x20'+_0x30bddb),_0x67066c=!![];else{if(_0x4aaf65[_0x2af9aa(0x152)]()['includes'](_0x2af9aa(0x150)))lastOrders=lastOrders[_0x2af9aa(0x29d)](_0x3353d0=>_0x3353d0[_0x2af9aa(0x291)]!=_0x30bddb),logHistory(_0x2af9aa(0x286),'Order\x20is\x20invalid:\x20'+_0x30bddb),logger[_0x2af9aa(0x19f)](_0x4aaf65),_0x67066c=!![];else _0x4aaf65[_0x2af9aa(0x152)]()[_0x2af9aa(0x16a)](_0x2af9aa(0x285))?(lastOrders=lastOrders['filter'](_0x200389=>_0x200389['symbol']!=_0x30bddb),logHistory(_0x2af9aa(0x286),_0x2af9aa(0x274)+_0x30bddb),_0x67066c=!![]):(lastOrders=lastOrders['filter'](_0x661519=>_0x661519[_0x2af9aa(0x291)]!=_0x30bddb),await handleError(_0x4aaf65,'placeOrder()',_0x30bddb));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2af9aa(0x2ac)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2f4217=config[_0x2af9aa(0x263)]==_0x2af9aa(0x1bc)?validateOrderTimeout*0x3c*0x3e8:config[_0x2af9aa(0x204)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xdcfce6=_0x2af9aa;validateOrders(_0xdcfce6(0x29e));},_0x2f4217);}else unlockOrders();_0x67066c&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x2af9aa(0x1f1)));}else{if(coolingDown)!config[_0x2af9aa(0x207)]&&logHistory(_0x2af9aa(0x286),_0x2af9aa(0x16e));else lockOrders!=ORDERS[_0x2af9aa(0x1e2)]&&(!config[_0x2af9aa(0x207)]&&(config['ordertype']=='market'?logHistory('error',_0x2af9aa(0x15e)):logHistory(_0x2af9aa(0x286),_0x2af9aa(0x2b2))));}}function persistOpenOrders(_0xab55ee){const _0x4c73e1=_0x251f1d,_0x421982={...config,'openOrders':_0xab55ee};let _0x59da3b=dbConfig[_0x4c73e1(0x2c5)](_0x4c73e1(0x261))[_0x4c73e1(0x2a8)]({'botID':botID})['value']();_0x59da3b&&dbConfig['get'](_0x4c73e1(0x261))[_0x4c73e1(0x2a8)]({'botID':botID})[_0x4c73e1(0x22d)](_0x421982)[_0x4c73e1(0x175)]();}function restoreOrders(){const _0x26d86f=_0x251f1d;let _0x5a490a;config[_0x26d86f(0x16d)]&&allOpenOrders[_0x26d86f(0x281)](_0xda9a=>{const _0x141d31=_0x26d86f,_0x25b9c0=config[_0x141d31(0x16d)][_0x141d31(0x2a8)](_0x30ad6c=>_0x30ad6c['orderId']==_0xda9a['id']);_0x25b9c0&&(lastOrders[_0x141d31(0x220)](_0x25b9c0),_0x5a490a=_0xda9a[_0x141d31(0x1cc)]);});if(lastOrders[_0x26d86f(0x2ac)]>0x0){lockOrders=ORDERS[_0x26d86f(0x23e)],validateOrdersState=_0x26d86f(0x26a),allOrdersPlaced=!![];const _0x2c59e7=new Date()[_0x26d86f(0x27d)](),_0x4b374=config[_0x26d86f(0x263)]==_0x26d86f(0x1bc)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5a490a+_0x4b374>_0x2c59e7){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x521b42=_0x26d86f;validateOrders(_0x521b42(0x29e));},_0x5a490a+_0x4b374-_0x2c59e7);}else validateOrders(_0x26d86f(0x29e));}}async function sendMetricsTelegram(){const _0x4db565=_0x251f1d;if(!coinsLoaded){process[_0x4db565(0x14f)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3f533e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5e0c1e='';if(config['showname'])_0x5e0c1e=_0x4db565(0x202)+config[_0x4db565(0x28a)]+_0x4db565(0x18a);else _0x5e0c1e=_0x4db565(0x2b3)+botID+_0x4db565(0x18a);const _0x5c3f0b=getKPIs(_0x4db565(0x188)),_0x5c5fa7=getKPIs(_0x4db565(0x264),config[_0x4db565(0x264)]),_0xdec6d1=getKPIs('net-basecoin'),_0x234820=getKPIs(_0x4db565(0x1f7),config[_0x4db565(0x264)]);_0x5e0c1e+='<pre>',_0x5e0c1e+=_0x5c3f0b[_0x4db565(0x181)]+_0x4db565(0x243)+_0x5c3f0b['value']+'\x0a',_0x5e0c1e+=_0x5c3f0b[_0x4db565(0x148)]+':\x20'+_0x5c3f0b[_0x4db565(0x1e4)]+'%\x0a',_0x5e0c1e+=_0x5c5fa7[_0x4db565(0x181)]+_0x4db565(0x243)+_0x5c5fa7[_0x4db565(0x1a4)]+'\x0a',_0x5e0c1e+=_0x5c5fa7['rightTxt']+':\x20'+_0x5c5fa7[_0x4db565(0x1e4)]+'%\x0a',_0x5e0c1e+=_0xdec6d1[_0x4db565(0x181)]+':\x20'+_0xdec6d1[_0x4db565(0x1a4)]+'\x20('+config[_0x4db565(0x188)]+')\x0a',_0x5e0c1e+=_0xdec6d1[_0x4db565(0x148)]+':\x20'+_0xdec6d1['change']+_0x4db565(0x25f)+config['basecoin']+')\x0a',_0x5e0c1e+=_0x234820['leftTxt']+':\x20'+_0x234820[_0x4db565(0x1a4)]+'\x20('+config[_0x4db565(0x264)]+')\x0a',_0x5e0c1e+=_0x234820['rightTxt']+':\x20'+_0x234820[_0x4db565(0x1e4)]+_0x4db565(0x25f)+config[_0x4db565(0x264)]+')\x0a',_0x5e0c1e+='</pre>',process[_0x4db565(0x14f)]({'telegrammsg':_0x5e0c1e},_0x1b591a=>{});}async function sendPortfolioTelegram(){const _0xe73fb4=_0x251f1d;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2221c8=>{});return;}let _0x274f8a='';if(config[_0xe73fb4(0x22b)])_0x274f8a='<b>'+config[_0xe73fb4(0x28a)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x274f8a=_0xe73fb4(0x2b3)+botID+_0xe73fb4(0x1ae);_0x274f8a+='<pre>',_0x274f8a+=_0xe73fb4(0x2bb),_0x274f8a+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x274f8a+=_0xe73fb4(0x2bb),currentCoins[_0xe73fb4(0x281)](_0x75d9f6=>{const _0x461f63=_0xe73fb4;_0x274f8a+=_0x75d9f6[_0x461f63(0x21b)]['padEnd'](0x7)+'|\x20'+formatPad(_0x75d9f6[_0x461f63(0x254)],0x2,0x6)+'|\x20'+formatPad(_0x75d9f6['target'],0x2,0x6)+'|\x20'+formatPad(_0x75d9f6[_0x461f63(0x19b)]*0x64,0x2,0x6)+'\x0a';}),_0x274f8a+=_0xe73fb4(0x287),process[_0xe73fb4(0x14f)]({'telegrammsg':_0x274f8a},_0x554bed=>{});}function formatPad(_0x535f03,_0x189219,_0x21b6c8){const _0x58a751=_0x251f1d,_0x9de505=formatResultString(_0x535f03,_0x189219);return _0x9de505?_0x9de505[_0x58a751(0x1a2)](_0x21b6c8):''[_0x58a751(0x1a2)](_0x21b6c8);}function logHistory(_0x34d539,_0x376dc9,_0xf63b6a=''){const _0x4083e2=_0x251f1d;let _0x4cd95f={'time':getTimeStamp(),'type':_0x34d539,'event':_0x376dc9};dbLogs[_0x4083e2(0x2c5)](_0x4083e2(0x2a0))['push'](_0x4cd95f)[_0x4083e2(0x175)]();if(_0xf63b6a=='')_0xf63b6a=_0x376dc9;proxyEmit(_0x4083e2(0x232),{'log':_0x4cd95f,'summary':_0xf63b6a}),process['send']({'telegram':{..._0x4cd95f,'botname':config[_0x4083e2(0x28a)],'showname':config[_0x4083e2(0x22b)]}},_0xd35a34=>{}),logger[_0x4083e2(0x2c1)](''+_0x4cd95f[_0x4083e2(0x232)]);}function emitHistory(_0x35af3c={}){const _0x50ee62=_0x251f1d;Object[_0x50ee62(0x266)](_0x35af3c)['length']==0x0&&(_0x35af3c={'type':['order',_0x50ee62(0x232)],'event':'','page':0x1});if(_0x35af3c[_0x50ee62(0x1a5)][_0x50ee62(0x16a)](_0x50ee62(0x232)))_0x35af3c['type'][_0x50ee62(0x1af)](_0x35af3c[_0x50ee62(0x1a5)]['indexOf'](_0x50ee62(0x232)),0x1,_0x50ee62(0x286),'warning',_0x50ee62(0x265));if(dbLogs[_0x50ee62(0x1d8)]('logs')[_0x50ee62(0x1a4)]()){let _0xf0e689=dbLogs['get']('logs')[_0x50ee62(0x29d)](_0x103616=>{const _0x5ab9af=_0x50ee62;if(_0x35af3c['type'][_0x5ab9af(0x2ac)]==0x0)return![];else return _0x35af3c[_0x5ab9af(0x1a5)][_0x5ab9af(0x16a)](_0x103616[_0x5ab9af(0x1a5)]);})[_0x50ee62(0x29d)](_0x580ab9=>{const _0x4b717e=_0x50ee62;if(_0x35af3c[_0x4b717e(0x232)]=='')return!![];else return _0x580ab9[_0x4b717e(0x232)][_0x4b717e(0x26e)]()['includes'](_0x35af3c[_0x4b717e(0x232)]['toLowerCase']());})[_0x50ee62(0x24c)]('time'),_0x38567e=_0xf0e689[_0x50ee62(0x1a4)]()[_0x50ee62(0x2ac)];_0xf0e689=_0xf0e689[_0x50ee62(0x161)]()[_0x50ee62(0x216)]((_0x35af3c[_0x50ee62(0x299)]-0x1)*logPageSize,_0x35af3c['page']*logPageSize-0x1)['reverse']()[_0x50ee62(0x1a4)](),proxyEmit(_0x50ee62(0x292),{'logs':_0xf0e689,'total':_0x38567e});}else proxyEmit(_0x50ee62(0x292),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4bc23b){const _0x363c3e=_0x251f1d;if(dbLogs[_0x363c3e(0x1d8)](_0x363c3e(0x2a0))[_0x363c3e(0x1a4)]()){const _0x229ede=dbLogs[_0x363c3e(0x2c5)](_0x363c3e(0x2a0))[_0x363c3e(0x24c)]('time')[_0x363c3e(0x29d)](_0x2349e7=>{const _0xcfb383=_0x363c3e;return _0x2349e7[_0xcfb383(0x1a5)]==_0xcfb383(0x1eb);})['value']();dbLogs[_0x363c3e(0x2c5)]('logs')[_0x363c3e(0x14e)]()[_0x363c3e(0x175)](),dbLogs['get'](_0x363c3e(0x2a0))[_0x363c3e(0x22d)](_0x229ede)[_0x363c3e(0x175)](),emitHistory(_0x4bc23b);}}async function pauseBot(_0x418e81=''){const _0x3766f1=_0x251f1d,_0x24693a=new Date()[_0x3766f1(0x27d)]();if(!lastErrorShown||_0x24693a-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x24693a;!lastBotPause?(lastBotPause=_0x24693a,consecutivePauses=0x1):(_0x24693a-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3766f1(0x14f)]({'stop':_0x3766f1(0x155)},_0x1b4fbe=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3766f1(0x27d)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x418e81)_0x418e81+=_0x3766f1(0x180);logHistory('error',_0x418e81+_0x3766f1(0x165)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4ce3c2=_0x251f1d;process['send']({'stop':_0x4ce3c2(0x226)},_0x451020=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3a254c,_0x3e0075){const _0x215f4f=_0x251f1d;if(_0x3a254c['toString']()[_0x215f4f(0x16a)](_0x215f4f(0x19a)))return logHistory(_0x215f4f(0x286),config[_0x215f4f(0x20f)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x3a254c[_0x215f4f(0x152)]()[_0x215f4f(0x16a)](_0x215f4f(0x230)))return logHistory('error',config[_0x215f4f(0x20f)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x3a254c[_0x215f4f(0x152)]()[_0x215f4f(0x16a)](_0x215f4f(0x1c8)))return logHistory(_0x215f4f(0x286),config[_0x215f4f(0x20f)]+_0x215f4f(0x209)),logHistory(_0x215f4f(0x286),_0x215f4f(0x1ff)),![];else await handleError(_0x3a254c,_0x3e0075);}}}async function handleError(_0x466a60,_0x596c0a,_0x3a7de7=''){const _0x13fa17=_0x251f1d,_0x42fe37=config['exchange']||_0x13fa17(0x1aa);if(_0x466a60[_0x13fa17(0x152)]()['includes'](_0x13fa17(0x293))||_0x466a60['toString']()[_0x13fa17(0x16a)](_0x13fa17(0x2a3)))await pauseBot(config[_0x13fa17(0x20f)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x466a60[_0x13fa17(0x152)]()['includes']('ExchangeNotAvailable')||_0x466a60[_0x13fa17(0x152)]()[_0x13fa17(0x16a)]('OnMaintenance'))await pauseBot(config[_0x13fa17(0x20f)]+_0x13fa17(0x2b5));else{if(_0x466a60[_0x13fa17(0x152)]()['includes'](_0x13fa17(0x28c)))await pauseBot(config['exchange']+_0x13fa17(0x19c));else{if(_0x466a60['toString']()[_0x13fa17(0x16a)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+'\x20closed\x20the\x20connection');else{if(_0x466a60['toString']()[_0x13fa17(0x16a)](_0x13fa17(0x228)))logHistory(_0x13fa17(0x286),_0x596c0a+_0x13fa17(0x22c)),logHistory('error',_0x13fa17(0x147)),await killBot();else{if(_0x466a60[_0x13fa17(0x152)]()[_0x13fa17(0x16a)](_0x13fa17(0x22e)))logHistory(_0x13fa17(0x286),_0x596c0a+_0x13fa17(0x1b2)),logHistory(_0x13fa17(0x286),_0x13fa17(0x147)),await killBot();else{if(_0x466a60 instanceof ccxt[_0x13fa17(0x27f)])logger[_0x13fa17(0x19f)](_0x13fa17(0x1f8),_0x466a60),await pauseBot(config[_0x13fa17(0x20f)]+_0x13fa17(0x170));else{if(_0x466a60['toString']()[_0x13fa17(0x16a)](_0x13fa17(0x19a)))logHistory(_0x13fa17(0x286),_0x596c0a+'\x20|\x20'+config[_0x13fa17(0x20f)]+_0x13fa17(0x213)),logHistory('error',_0x13fa17(0x147)),await killBot();else{if(_0x466a60[_0x13fa17(0x152)]()[_0x13fa17(0x16a)](_0x13fa17(0x230)))logHistory(_0x13fa17(0x286),_0x596c0a+_0x13fa17(0x180)+config[_0x13fa17(0x20f)]+_0x13fa17(0x2c4)),logHistory(_0x13fa17(0x286),_0x13fa17(0x147)),await killBot();else{if(_0x466a60['toString']()[_0x13fa17(0x16a)](_0x13fa17(0x1c8)))logHistory(_0x13fa17(0x286),_0x596c0a+_0x13fa17(0x180)+config['exchange']+_0x13fa17(0x2a6)),logHistory(_0x13fa17(0x286),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x466a60[_0x13fa17(0x152)]()['includes'](_0x13fa17(0x297)))logHistory('error',_0x596c0a+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x3a7de7);else _0x466a60 instanceof ccxt[_0x13fa17(0x149)]?(logger['debug'](_0x13fa17(0x1b7),_0x466a60),logHistory(_0x13fa17(0x286),_0x596c0a+_0x13fa17(0x180)+config[_0x13fa17(0x20f)]+_0x13fa17(0x208))):(logger['full'](_0x596c0a+_0x13fa17(0x257),_0x466a60),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}}}function formatResult(_0x115a2d,_0x121d84){return parseFloat(_0x115a2d['toFixed'](_0x121d84));}function _0x1eee(_0x2a24d1,_0x3e0ca4){const _0x48ba92=_0x5648();return _0x1eee=function(_0x3681cd,_0x2d0ca8){_0x3681cd=_0x3681cd-0x146;let _0x56481a=_0x48ba92[_0x3681cd];return _0x56481a;},_0x1eee(_0x2a24d1,_0x3e0ca4);}function formatResultTruncate(_0x65b5d8,_0x4bec26){const _0x173310=_0x251f1d;let _0x106065=formatResultString(_0x65b5d8,0xa),_0x1bc4a0=_0x106065[_0x173310(0x146)]('.');return _0x1bc4a0!=-0x1&&(_0x106065=_0x106065[_0x173310(0x216)](0x0,_0x1bc4a0+_0x4bec26+0x1)),Number(_0x106065);}function formatResultString(_0x26bf25,_0x15f496){const _0x59f9db=_0x251f1d;let _0x4c467f;if(!(''+_0x26bf25)[_0x59f9db(0x16a)]('e'))_0x4c467f=+(Math[_0x59f9db(0x276)](_0x26bf25+'e+'+_0x15f496)+'e-'+_0x15f496);else{let _0x3d44e2=(''+_0x26bf25)[_0x59f9db(0x16c)]('e'),_0x46c079='';+_0x3d44e2[0x1]+_0x15f496>0x0&&(_0x46c079='+'),_0x4c467f=+(Math[_0x59f9db(0x276)](+_0x3d44e2[0x0]+'e'+_0x46c079+(+_0x3d44e2[0x1]+_0x15f496))+'e-'+_0x15f496);}return Number(_0x4c467f)['toFixed'](_0x15f496);}function getServerTime(){const _0x231ccd=_0x251f1d,_0x5d3708=new Date();return _0x5d3708[_0x231ccd(0x29a)]()+'/'+(_0x5d3708[_0x231ccd(0x1f0)]()+0x1)[_0x231ccd(0x152)]()[_0x231ccd(0x1a2)](0x2,'0')+'/'+_0x5d3708[_0x231ccd(0x21d)]()[_0x231ccd(0x152)]()[_0x231ccd(0x1a2)](0x2,'0')+'\x20'+_0x5d3708[_0x231ccd(0x1ac)]()[_0x231ccd(0x152)]()['padStart'](0x2,'0')+':'+_0x5d3708[_0x231ccd(0x1e0)]()[_0x231ccd(0x152)]()['padStart'](0x2,'0')+':'+_0x5d3708[_0x231ccd(0x1a3)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x54a897=_0x251f1d,_0x30fee9=shiftedTime();return _0x30fee9[_0x54a897(0x29a)]()+'/'+(_0x30fee9[_0x54a897(0x1f0)]()+0x1)[_0x54a897(0x152)]()[_0x54a897(0x1a2)](0x2,'0')+'/'+_0x30fee9['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x30fee9[_0x54a897(0x1ac)]()[_0x54a897(0x152)]()['padStart'](0x2,'0')+':'+_0x30fee9['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x30fee9[_0x54a897(0x1a3)]()[_0x54a897(0x152)]()[_0x54a897(0x1a2)](0x2,'0');}function getDate(){const _0x5bf53c=_0x251f1d,_0x2da584=shiftedTime();return _0x2da584[_0x5bf53c(0x29a)]()+'/'+(_0x2da584[_0x5bf53c(0x1f0)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2da584[_0x5bf53c(0x21d)]()[_0x5bf53c(0x152)]()['padStart'](0x2,'0');}function getHour(){const _0x572a1b=_0x251f1d,_0x49d95f=shiftedTime();return _0x49d95f['getHours']()[_0x572a1b(0x152)]()[_0x572a1b(0x1a2)](0x2,'0');}function sleep(_0x25ff69){return new Promise(_0x1206cb=>setTimeout(_0x1206cb,_0x25ff69));}function shiftedTime(){const _0x2911c0=_0x251f1d,_0x5289be=new Date();let _0x3e4e34=_0x5289be;if(config&&config[_0x2911c0(0x1b4)]!==0x0)_0x3e4e34=fns[_0x2911c0(0x1e6)](_0x5289be,{'hours':config[_0x2911c0(0x1b4)]});return _0x3e4e34;}function timer(_0x5288bb){const _0x284d51=_0x251f1d,_0x254d61=new Date();!lasttime?console[_0x284d51(0x1fc)](getTimeStamp()+':\x20timer\x20>',_0x5288bb,_0x254d61):console[_0x284d51(0x1fc)](getTimeStamp()+_0x284d51(0x1d6),_0x5288bb,(_0x254d61-lasttime)/0x3e8),lasttime=_0x254d61;}