const _0x1f862c=_0x12ec;(function(_0xcd02b9,_0x2ece39){const _0x316c1e=_0x12ec,_0x5ac642=_0xcd02b9();while(!![]){try{const _0xcde1d9=parseInt(_0x316c1e(0x173))/0x1+-parseInt(_0x316c1e(0x157))/0x2*(-parseInt(_0x316c1e(0x1db))/0x3)+parseInt(_0x316c1e(0x1e2))/0x4*(-parseInt(_0x316c1e(0x1ee))/0x5)+-parseInt(_0x316c1e(0xf6))/0x6+-parseInt(_0x316c1e(0x129))/0x7*(-parseInt(_0x316c1e(0x17b))/0x8)+parseInt(_0x316c1e(0x11b))/0x9*(parseInt(_0x316c1e(0x138))/0xa)+-parseInt(_0x316c1e(0x116))/0xb;if(_0xcde1d9===_0x2ece39)break;else _0x5ac642['push'](_0x5ac642['shift']());}catch(_0x29926b){_0x5ac642['push'](_0x5ac642['shift']());}}}(_0x29c3,0x756b5));const _0x19b988=function(){let _0x516d8b=!![];return function(_0x23ee61,_0x44e2cc){const _0x10b83b=_0x516d8b?function(){const _0x449f66=_0x12ec;if(_0x44e2cc){const _0x1de3a5=_0x44e2cc[_0x449f66(0xf4)](_0x23ee61,arguments);return _0x44e2cc=null,_0x1de3a5;}}:function(){};return _0x516d8b=![],_0x10b83b;};}(),_0x517b4b=_0x19b988(this,function(){const _0xd0d438=_0x12ec;return _0x517b4b[_0xd0d438(0x107)]()[_0xd0d438(0x144)](_0xd0d438(0x1ff))[_0xd0d438(0x107)]()[_0xd0d438(0x1ea)](_0x517b4b)[_0xd0d438(0x144)](_0xd0d438(0x1ff));});_0x517b4b();'use strict';const ccxt=require(_0x1f862c(0x1a4)),low=require('lowdb'),FileSync=require(_0x1f862c(0x1f2)),fs=require('fs'),fns=require(_0x1f862c(0x1e6)),{WebsocketClient,DefaultLogger}=require(_0x1f862c(0x1f7)),Crypt=require(_0x1f862c(0x1e7))[_0x1f862c(0x179)];let exchange,wsClient;global[_0x1f862c(0x189)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x1f862c(0x13d)],botID=process[_0x1f862c(0x115)][0x2]||_0x1f862c(0x124),pattern=/^[0-9]{3}$/;if(!pattern[_0x1f862c(0x101)](botID))return console[_0x1f862c(0x15e)](_0x1f862c(0x149)+botID+_0x1f862c(0x15d)),process[_0x1f862c(0x1b5)](0x1);const userID=process[_0x1f862c(0x115)][0x3]||'',configpath=userID?_0x1f862c(0x104)+userID+'/':'./config/';!fs[_0x1f862c(0x1c6)](configpath)&&fs[_0x1f862c(0x1dc)](configpath);const configfile=configpath+_0x1f862c(0x145)+botID+_0x1f862c(0x1b1),logfile=configpath+'bot-'+botID+_0x1f862c(0x1a1),performancefile=configpath+_0x1f862c(0x145)+botID+_0x1f862c(0x164),coinresultsfile=configpath+_0x1f862c(0x145)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x1f862c(0xfd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1f862c(0xf1)]({'logs':[]})[_0x1f862c(0x18b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1f862c(0xf1)]({'data':[]})[_0x1f862c(0x18b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1f862c(0xf1)]({'bot':[]})[_0x1f862c(0x18b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1f862c(0xf1)]({'coins':[]})[_0x1f862c(0x18b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1f862c(0x103),'symbol':_0x1f862c(0x152)},'usd':{'coin':_0x1f862c(0x167),'symbol':_0x1f862c(0x147)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x1dd11e)=>{},'debug':(..._0x152100)=>{},'notice':(..._0x1e50cc)=>{},'info':(..._0x1d1a67)=>{},'warning':(..._0x1ec9e6)=>{},'error':async function(..._0x1c6bc8){const _0x49e6b2=_0x1f862c,_0x18638f=new Date()['getTime']();if(!lastErrorShown||_0x18638f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x49e6b2(0x10e),_0x49e6b2(0x192)+consecutivePauses+_0x49e6b2(0x150));let _0x1a0bfc='';if(_0x1c6bc8[0x0])_0x1a0bfc+=_0x1c6bc8[0x0];if(_0x1c6bc8[0x1]&&_0x1c6bc8[0x1][_0x49e6b2(0x10e)]&&_0x1c6bc8[0x1]['error'][_0x49e6b2(0x1d7)])_0x1a0bfc+=_0x49e6b2(0x1f4)+_0x1c6bc8[0x1][_0x49e6b2(0x10e)][_0x49e6b2(0x1d7)];logging(_0x49e6b2(0x192)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x1a0bfc),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1f862c(0x160),'rsaStandard':_0x1f862c(0x13e)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x1f862c(0x155)]&&updateTimeshift(settings[_0x1f862c(0x155)]);process[_0x1f862c(0x1ec)]({'started':_0x1f862c(0x13f)},_0x122b81=>{}),initializeProcessListeners();function proxyEmit(_0x25d399,_0xeb67b8=null){const _0x4840d5=_0x1f862c;process[_0x4840d5(0x1ec)]({'function':_0x25d399,'args':_0xeb67b8},_0x149c77=>{});}function initializeProcessListeners(){process['on']('message',_0x84472f=>{const _0x500383=_0x12ec;switch(Object[_0x500383(0x135)](_0x84472f)[0x0]){case _0x500383(0x155):_0x84472f['timeshift']!=undefined&&(settings[_0x500383(0x155)]=_0x84472f[_0x500383(0x155)],updateTimeshift(settings[_0x500383(0x155)]));break;case _0x500383(0x1d5):switch(_0x84472f['function']){case _0x500383(0x200):initclient();break;case _0x500383(0x194):emitHistory(_0x84472f[_0x500383(0x15b)]);break;case _0x500383(0x1d0):getPortfolio(_0x84472f['args']);break;case _0x500383(0x17d):storeConfiguration(_0x84472f[_0x500383(0x15b)]);break;case _0x500383(0x125):storeHeadless(_0x84472f[_0x500383(0x15b)]);break;case'getStartingBalances':getStartingBalances();break;case'placeOrder':placeOrder(_0x84472f[_0x500383(0x15b)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}function _0x29c3(){const _0x3137e9=['DDoSProtection','limit-low','search','bot-','replace','BTC/USDT','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Error:\x20Invalid\x20argument\x20','configuration','filled','yyyy/MM/dd','basecoin','fetchBalance','assign',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','decrypt','BTC/EUR','getFullYear','sell','timeshift','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','18kmRzlH','Manually\x20balance:\x20','close','InsufficientFunds','args','slice',',\x20must\x20be\x20a\x203\x20digit\x20number','log','logs','sha256','event','cost','ExchangeNotAvailable','-performance.json','page','reduce','BTCUSDT','enabled','Market','\x20|\x20Unknown\x20error\x20occured','fee','timestamp','spot','getCoins()','botID','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','bid','HOT/BTC','693774PNmMeA','entries','yyyy/MM/dd\x20HH:mm:ss','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','date','side','Crypt','getHours','4397544bXjXvj','offset','storeConfiguration','startdate','differenceInSeconds','limit','closeWs','threshold','ask','reverse','toLowerCase','cooldown','Order(s)\x20not\x20validated\x20after\x20','BTCBUSD','ticker','currency','write','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','apiSecret','loadMarkets','restart','privateKey','format','WebSockets(','has','emitHistory','secure','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','USDT','getFiat()','type','wss://stream.binance.com:9443','add','BTC','API-key\x20format\x20invalid','apiKey','formattedMessage','startnumber','-events.json','success','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','ccxt','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','symbol','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getMonth','sells','AuthenticationError','valid','starting-balances','map','asset','target','fetchOHLCV','-config.json','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','buy','botname','exit','FILLED','toFixed','Unfilled\x20order(s)\x20canceled\x20after\x20','cancelOrder()','eventType','fetchTickers','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','order','Order(s)\x20filled\x20-\x20balancing\x20resumed','round','symbols','headless','************','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','parseISO','coin-loading-progress','existsSync','emojisell','abs','startprice','excluded','balances','coin','BTC/BUSD','time','emojibuy','getPortfolio','usd','sort','eur','showname','function','stringify','message','Limit\x20(high-margin)','differenceInCalendarDays','binanceus','82377THqEzy','mkdirSync','\x20order:\x20','subscribeSpotKline','createOrder','isArray','padStart','8376gFvdko','number','last','\x20minutes\x20-\x20balancing\x20resumed','date-fns','hybrid-crypto-js','limits','kill','constructor','trade','send','portfolio','1245yedaiN','Order\x20filled:\x20','get','max','lowdb/adapters/FileSync','orderId','\x20-\x20','min','remainingSymbols','binance','recreate','yyyy-MM-dd\x27T\x27HH:mm:ss','value','loadSymbols()','data','datetime','remove','(((.+)+)+)+$','initclient','amount','recreateHistory()','userData','HOT/EUR','Binance\x20API\x20key\x20is\x20invalid','breakeven','join','wsKey','defaults','sortBy','initws()','apply','exchange','2007474dYAKfg','filter','accumulatedQuantity','MIN_NOTIONAL','Binance\x20API\x20secret\x20is\x20invalid','BNB','eachDayOfInterval','bb-secure.json','USDC','getTime','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','test','getDate','BTCEUR','./config/','cancel','getMinutes','toString','limit-high','coins','\x20hour','buys','performance','timeout','error','bot','kline','milliseconds','ordertype','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','delta','argv','2935394QEdLLl','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','splice','Pausing\x20bot\x20for\x205\x20minutes\x20(','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','90GXMCzs','realized','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','orderStatus','outboundAccountPosition','price','orderType','placeOrder()','coinamount','001','storeHeadless','length','getSeconds','market','7ZhZibs','getPortfolio()','event-history','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','push','fromCodePoint','InvalidNonce','distribution','parse','Order:\x20','forEach','OrderNotFound','keys','find',':\x20Bot\x20','113190SmFLNz','indexOf','includes','\x20>\x20','EUR','version','RSA-OAEP','running','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','availableBalance'];_0x29c3=function(){return _0x3137e9;};return _0x29c3();}async function reset(){const _0x32ac1d=_0x1f862c;if(pidBalances)clearTimeout(pidBalances);if(config[_0x32ac1d(0x19e)]!=''){await initExchange(config[_0x32ac1d(0x19e)],config[_0x32ac1d(0x18d)]);let _0x24020b=await loadSymbols();_0x24020b&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x5edcd3,_0x5becab){const _0x454d0a=_0x1f862c,_0x367c42=ccxt[config[_0x454d0a(0xf5)]];let _0x394150;switch(config[_0x454d0a(0xf5)]){case _0x454d0a(0x1f7):_0x394150='wss://stream.binance.com:9443';break;case _0x454d0a(0x1da):_0x394150='wss://stream.binance.us:9443';break;default:_0x394150=_0x454d0a(0x19a);}exchange=new _0x367c42({'apiKey':_0x5edcd3,'secret':_0x5becab,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5edcd3,'api_secret':_0x5becab,'beautify':!![],'wsUrl':_0x394150},logger),config[_0x454d0a(0xf5)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x454d0a(0x188),'symbol':_0x454d0a(0x1cd)},'usd':{'coin':_0x454d0a(0x167),'symbol':_0x454d0a(0x147)}});}async function loadSymbols(){const _0x18639e=_0x1f862c;let _0x4efc29;try{markets=await exchange[_0x18639e(0x18e)]();const _0x448d0d=['DAI/',_0x18639e(0x172),_0x18639e(0x204)];allSymbols=exchange[_0x18639e(0x1c0)]['filter'](_0xc7c0e5=>{const _0x14d3e8=_0x18639e;let _0x39e1d1=![];return _0x448d0d[_0x14d3e8(0x133)](_0xb7e87d=>{const _0x15a095=_0x14d3e8;if(_0xc7c0e5[_0x15a095(0x13a)](_0xb7e87d))_0x39e1d1=!![];}),!_0x39e1d1;}),_0x4efc29=!![];}catch(_0x5af3f1){await handleError(_0x5af3f1,_0x18639e(0x1fb)),_0x4efc29=![];}return _0x4efc29;}async function initbot(){const _0x555cef=_0x1f862c;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x51b4df=dbCoinResults[_0x555cef(0x1f0)]('coins')[_0x555cef(0x1fa)]();if(_0x51b4df[_0x555cef(0x126)]==0x0)await resetCoinResults();}async function initclient(){const _0x5802bb=_0x1f862c;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5802bb(0x1cb),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4577c5=_0x1f862c;wsinitialized=![];ws1&&(ws1[_0x4577c5(0x133)](_0x3edcb3=>{const _0x53db05=_0x4577c5;try{wsClient[_0x53db05(0x181)](_0x3edcb3);}catch(_0x84ba5e){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x2e77b4){}ws2=null;}}async function initws(){const _0x30c439=_0x1f862c;cleanws();let _0x3a467d=[];currentCoins[_0x30c439(0x133)](_0x1f2572=>{const _0x24c370=_0x30c439;if(_0x1f2572[_0x24c370(0x1cc)]!=config[_0x24c370(0x14d)])_0x3a467d[_0x24c370(0x12d)](noslash(_0x1f2572[_0x24c370(0x1a6)]));});if(!_0x3a467d[_0x30c439(0x13a)](stablecoins[_0x30c439(0x1d3)][_0x30c439(0x1cc)]))_0x3a467d['push'](stablecoins[_0x30c439(0x1d3)][_0x30c439(0x1cc)]);if(!_0x3a467d['includes'](stablecoins[_0x30c439(0x1d1)][_0x30c439(0x1cc)]))_0x3a467d[_0x30c439(0x12d)](stablecoins[_0x30c439(0x1d1)][_0x30c439(0x1cc)]);if(!_0x3a467d[_0x30c439(0x13a)](_0x30c439(0xfb)+config[_0x30c439(0x14d)]))_0x3a467d['push']('BNB'+config[_0x30c439(0x14d)]);try{_0x3a467d[_0x30c439(0x133)]((_0x41c57c,_0x57956f)=>{const _0x2617b3=_0x30c439;ws1[_0x57956f]=wsClient[_0x2617b3(0x1de)](_0x41c57c,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x30c439(0x19f),_0x2e4e75=>{const _0x56a76d=_0x30c439;if(!Array[_0x56a76d(0x1e0)](_0x2e4e75)&&!_0x2e4e75[_0x56a76d(0xf0)][_0x56a76d(0x13a)](_0x56a76d(0x203))){if(_0x2e4e75[_0x56a76d(0x1ba)]===_0x56a76d(0x110)){global[_0x56a76d(0x189)][_0x2e4e75[_0x56a76d(0x110)][_0x56a76d(0x1a6)]]=_0x2e4e75[_0x56a76d(0x110)][_0x56a76d(0x159)];return;}}else{if(!Array[_0x56a76d(0x1e0)](_0x2e4e75)&&_0x2e4e75[_0x56a76d(0xf0)][_0x56a76d(0x13a)](_0x56a76d(0x203))){if(_0x2e4e75['wsMarket']['includes'](_0x56a76d(0x16d))){updateNumberCoins(_0x2e4e75);return;}}}}),wsClient['on']('reconnected',async _0x3a1c01=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x428932){await handleError(_0x428932,_0x30c439(0xf3));}let _0x27a485,_0xbe0dd2=0x0;loading[_0x30c439(0x1f6)]=[];let _0x1d3b9b=0x0;currentCoins[_0x30c439(0x133)](_0x322825=>{const _0x2f8a0a=_0x30c439;if(_0x322825[_0x2f8a0a(0x1cc)]!=config[_0x2f8a0a(0x14d)])loading[_0x2f8a0a(0x1f6)][_0x2f8a0a(0x12d)](_0x322825['symbol']);}),loadingCanceled=![];while(_0x27a485!=currentCoins[_0x30c439(0x126)]-0x1){_0x27a485=0x0,currentCoins['forEach'](_0x4e7f5e=>{const _0x19f427=_0x30c439;_0x4e7f5e[_0x19f427(0x1cc)]!=config[_0x19f427(0x14d)]&&global[_0x19f427(0x189)][noslash(_0x4e7f5e['symbol'])]&&(loading['remainingSymbols']=loading[_0x19f427(0x1f6)]['filter'](_0x13df44=>_0x13df44!=_0x4e7f5e['symbol']),_0x27a485++);}),loading['progress']=Math[_0x30c439(0x1bf)](_0x27a485/(currentCoins[_0x30c439(0x126)]-0x1)*0x64);_0x1d3b9b>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x30c439(0x105)]=!![],emitLoadingProgress();break;}else _0x27a485!=_0xbe0dd2&&(_0xbe0dd2=_0x27a485,emitLoadingProgress()),_0x1d3b9b++,await sleep(0xc8);}if(_0x27a485==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x670c9d=_0x1f862c;proxyEmit(_0x670c9d(0x1c5),loading);}function _0x12ec(_0x2dddd3,_0x1c5c37){const _0x15915f=_0x29c3();return _0x12ec=function(_0x517b4b,_0x19b988){_0x517b4b=_0x517b4b-0xef;let _0x29c3b5=_0x15915f[_0x517b4b];return _0x29c3b5;},_0x12ec(_0x2dddd3,_0x1c5c37);}async function getFiat(){const _0x361414=_0x1f862c;let _0x3e7df7=0x0,_0x363711=0x0;try{_0x3e7df7=global['ticker'][stablecoins[_0x361414(0x1d3)][_0x361414(0x1cc)]],_0x363711=global['ticker'][stablecoins[_0x361414(0x1d1)][_0x361414(0x1cc)]];}catch(_0x38d601){await handleError(_0x38d601,_0x361414(0x198));}return{'eur':Number(_0x3e7df7),'usd':Number(_0x363711)};}async function setStartDatePerformance(_0x1c40b5){const _0x543842=_0x1f862c,_0x49115b=fns[_0x543842(0x191)](new Date(_0x1c40b5['startdate']),_0x543842(0x14c));let _0x100c09=[];_0x100c09[stablecoins[_0x543842(0x1d3)]['coin']]=await getCloses(stablecoins['eur'][_0x543842(0x1a6)],new Date(_0x1c40b5['startdate']),0x1),_0x100c09[stablecoins[_0x543842(0x1d1)]['coin']]=await getCloses(stablecoins[_0x543842(0x1d1)][_0x543842(0x1a6)],new Date(_0x1c40b5[_0x543842(0x17e)]),0x1);let _0x17b67e,_0x4a05e1=[];_0x1c40b5['portfolio'][_0x543842(0x133)](_0x455f9e=>{const _0x5b948c=_0x543842;!_0x455f9e[_0x5b948c(0x1ca)]&&_0x4a05e1[_0x5b948c(0x12d)]({'coin':_0x455f9e[_0x5b948c(0x1cc)],'number':_0x455f9e[_0x5b948c(0x1a0)],'price':_0x455f9e[_0x5b948c(0x1c9)]});}),_0x17b67e={'date':_0x49115b,'eur':_0x100c09[stablecoins[_0x543842(0x1d3)][_0x543842(0x1cc)]][0x0],'usd':_0x100c09[stablecoins['usd'][_0x543842(0x1cc)]][0x0],'coins':_0x4a05e1};let _0x2942a9=dbPerformance[_0x543842(0x1f0)](_0x543842(0x1fc))[_0x543842(0x136)]({'date':_0x49115b})[_0x543842(0x1fa)]();_0x2942a9?dbPerformance[_0x543842(0x1f0)](_0x543842(0x1fc))['find']({'date':_0x49115b})[_0x543842(0x14f)](_0x17b67e)[_0x543842(0x18b)]():dbPerformance[_0x543842(0x1f0)](_0x543842(0x1fc))[_0x543842(0x12d)](_0x17b67e)[_0x543842(0x18b)](),_0x2942a9=dbPerformance[_0x543842(0x1f0)]('data')[_0x543842(0xf2)]('date')['value'](),_0x2942a9[_0x543842(0x133)](_0x56d522=>{const _0x12abc4=_0x543842;_0x56d522[_0x12abc4(0x177)]<_0x49115b&&dbPerformance[_0x12abc4(0x1f0)](_0x12abc4(0x1fc))['remove']({'date':_0x56d522[_0x12abc4(0x177)]})[_0x12abc4(0x18b)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x303cd1){const _0xe66aef=_0x1f862c;let _0x31cc93,_0xcd7bcc=[];logHistory('success',_0xe66aef(0x100)),_0x303cd1[_0xe66aef(0x1ed)][_0xe66aef(0x133)](_0x4f355b=>{const _0x3717d6=_0xe66aef;if(_0x4f355b[_0x3717d6(0x1cc)]!=config[_0x3717d6(0x14d)]&&!_0x4f355b[_0x3717d6(0x1ca)])_0xcd7bcc[_0x3717d6(0x12d)]({'coin':_0x4f355b[_0x3717d6(0x1cc)],'symbol':_0x4f355b[_0x3717d6(0x1a6)]});});let _0x9f7751=[];try{const _0x42bc68=fns['format'](fns[_0xe66aef(0x1c4)](_0x303cd1[_0xe66aef(0x17e)][_0xe66aef(0x146)](/\//g,'-')),_0xe66aef(0x1f9));for(const _0xd6178 of _0xcd7bcc){if(_0xd6178['coin']!=config['basecoin'])_0x31cc93=await exchange['fetchOrders'](_0xd6178[_0xe66aef(0x1a6)],Date[_0xe66aef(0x131)](_0x42bc68));_0x31cc93[_0xe66aef(0x133)](_0x277018=>{const _0x5aa28d=_0xe66aef,_0x819922=_0xd6178['symbol'][_0x5aa28d(0x13a)](config['basecoin']+'/'),_0xdee4ad=fns[_0x5aa28d(0x191)](fns[_0x5aa28d(0x1c4)](_0x277018[_0x5aa28d(0x1fd)]),_0x5aa28d(0x175)),_0x372501=fns[_0x5aa28d(0x191)](fns[_0x5aa28d(0x1c4)](_0x277018['datetime']),_0x5aa28d(0x14c));let _0xe4492c;if(_0x277018[_0x5aa28d(0x178)]==_0x5aa28d(0x1b3)&&_0x819922==![])_0xe4492c=_0x277018[_0x5aa28d(0x201)];if(_0x277018[_0x5aa28d(0x178)]==_0x5aa28d(0x1b3)&&_0x819922==!![])_0xe4492c=-_0x277018[_0x5aa28d(0x201)]*_0x277018[_0x5aa28d(0x120)];if(_0x277018['side']==_0x5aa28d(0x154)&&_0x819922==![])_0xe4492c=-_0x277018[_0x5aa28d(0x201)];if(_0x277018[_0x5aa28d(0x178)]==_0x5aa28d(0x154)&&_0x819922==!![])_0xe4492c=_0x277018[_0x5aa28d(0x201)]*_0x277018['price'];_0x9f7751[_0x5aa28d(0x12d)]({'timestamp':_0xdee4ad,'date':_0x372501,'coin':_0xd6178[_0x5aa28d(0x1cc)],'symbol':_0xd6178[_0x5aa28d(0x1a6)],'type':_0x277018[_0x5aa28d(0x199)],'side':_0x277018[_0x5aa28d(0x178)],'reverse':_0x819922,'amount':formatResult(_0x277018[_0x5aa28d(0x14b)],0x8),'filled':formatResult(_0x277018[_0x5aa28d(0x14b)],0x8),'coinamount':formatResult(_0xe4492c,0x8),'price':formatResult(_0x277018[_0x5aa28d(0x120)],0x8)});let _0x3d48db;if(_0x277018['side']==_0x5aa28d(0x1b3)&&_0x819922==![])_0x3d48db=-_0x277018[_0x5aa28d(0x201)]*_0x277018[_0x5aa28d(0x120)];if(_0x277018[_0x5aa28d(0x178)]=='buy'&&_0x819922==!![])_0x3d48db=_0x277018[_0x5aa28d(0x201)];if(_0x277018[_0x5aa28d(0x178)]==_0x5aa28d(0x154)&&_0x819922==![])_0x3d48db=_0x277018['amount']*_0x277018[_0x5aa28d(0x120)];if(_0x277018[_0x5aa28d(0x178)]==_0x5aa28d(0x154)&&_0x819922==!![])_0x3d48db=-_0x277018[_0x5aa28d(0x201)];_0x9f7751['push']({'date':_0x372501,'coin':config[_0x5aa28d(0x14d)],'coinamount':formatResult(_0x3d48db,0x8)});});}_0x9f7751[_0xe66aef(0x1d2)]((_0x3f72a0,_0xf594f1)=>_0x3f72a0['timestamp']>_0xf594f1[_0xe66aef(0x16c)]?0x1:_0xf594f1[_0xe66aef(0x16c)]>_0x3f72a0[_0xe66aef(0x16c)]?-0x1:0x0),dbLogs[_0xe66aef(0x1f0)]('logs')[_0xe66aef(0x1fe)]()['write'](),_0x9f7751[_0xe66aef(0x133)](_0x2c6d00=>{const _0x3ce780=_0xe66aef;let _0x22e7e9;_0x2c6d00['coin']!=config[_0x3ce780(0x14d)]&&(_0x22e7e9={'time':_0x2c6d00[_0x3ce780(0x16c)],'type':'order','event':_0x3ce780(0x132)+_0x2c6d00[_0x3ce780(0x1a6)]+'\x20'+_0x2c6d00[_0x3ce780(0x178)]+'\x20#'+_0x2c6d00[_0x3ce780(0x201)]+'\x20@'+_0x2c6d00[_0x3ce780(0x120)]},dbLogs[_0x3ce780(0x1f0)](_0x3ce780(0x15f))[_0x3ce780(0x12d)](_0x22e7e9)[_0x3ce780(0x18b)]());});const _0x58f7d0=fns[_0xe66aef(0xfc)]({'start':new Date(_0x303cd1[_0xe66aef(0x17e)]),'end':new Date()})[_0xe66aef(0x1ad)](_0x4a42f5=>fns['format'](_0x4a42f5,'yyyy/MM/dd'));let _0x51fed5=[];_0x303cd1['portfolio']['forEach'](_0x32568a=>{const _0x3bfb63=_0xe66aef;if(!_0x32568a[_0x3bfb63(0x1ca)]){_0x51fed5[_0x32568a[_0x3bfb63(0x1cc)]]=[];let _0x46cd33=_0x32568a['startnumber'];_0x58f7d0[_0x3bfb63(0x133)]((_0x43a0fd,_0x555c58)=>{const _0x4eeb86=_0x3bfb63;let _0x82a694=_0x9f7751[_0x4eeb86(0xf7)](_0x2f2bec=>_0x2f2bec[_0x4eeb86(0x1cc)]==_0x32568a['coin']&&_0x2f2bec[_0x4eeb86(0x177)]==_0x43a0fd);if(_0x82a694['length']!=0x0){let _0x152387=_0x82a694[_0x4eeb86(0x166)]((_0x507811,_0x2dd7c5)=>{const _0x3f194c=_0x4eeb86;return _0x507811+=_0x2dd7c5[_0x3f194c(0x123)],_0x507811;},0x0);_0x46cd33+=_0x152387;}_0x51fed5[_0x32568a[_0x4eeb86(0x1cc)]][_0x43a0fd]=_0x46cd33;});}});const _0x5069f0=[..._0xcd7bcc];_0x5069f0['push']({'coin':stablecoins[_0xe66aef(0x1d3)]['coin'],'symbol':stablecoins[_0xe66aef(0x1d3)][_0xe66aef(0x1a6)]}),_0x5069f0[_0xe66aef(0x12d)]({'coin':stablecoins[_0xe66aef(0x1d1)][_0xe66aef(0x1cc)],'symbol':stablecoins[_0xe66aef(0x1d1)]['symbol']});let _0x33d27b=[];for(const _0x5647a5 of _0x5069f0){_0x33d27b[_0x5647a5[_0xe66aef(0x1cc)]]=await getCloses(_0x5647a5[_0xe66aef(0x1a6)],new Date(_0x303cd1[_0xe66aef(0x17e)]));}dbPerformance[_0xe66aef(0x1f0)](_0xe66aef(0x1fc))['remove']()[_0xe66aef(0x18b)](),_0x58f7d0['forEach']((_0x56021b,_0x3651f4)=>{const _0x4048e3=_0xe66aef;let _0x3ac918,_0x330d54=[];_0x3651f4==0x0?(_0x303cd1[_0x4048e3(0x1ed)][_0x4048e3(0x133)](_0x39a8df=>{const _0x55bd88=_0x4048e3;!_0x39a8df['excluded']&&_0x330d54[_0x55bd88(0x12d)]({'coin':_0x39a8df[_0x55bd88(0x1cc)],'number':_0x39a8df[_0x55bd88(0x1a0)],'price':_0x39a8df[_0x55bd88(0x1c9)]});}),_0x3ac918={'date':_0x56021b,'eur':_0x33d27b[stablecoins[_0x4048e3(0x1d3)]['coin']][_0x3651f4],'usd':_0x33d27b[stablecoins[_0x4048e3(0x1d1)][_0x4048e3(0x1cc)]][_0x3651f4],'coins':_0x330d54}):(_0x303cd1[_0x4048e3(0x1ed)][_0x4048e3(0x133)](_0x4216f3=>{const _0x2a062d=_0x4048e3;!_0x4216f3[_0x2a062d(0x1ca)]&&_0x330d54[_0x2a062d(0x12d)]({'coin':_0x4216f3[_0x2a062d(0x1cc)],'number':_0x51fed5[_0x4216f3[_0x2a062d(0x1cc)]][_0x56021b],'price':_0x4216f3[_0x2a062d(0x1cc)]==config['basecoin']?0x1:_0x33d27b[_0x4216f3[_0x2a062d(0x1cc)]][_0x3651f4]});}),_0x3ac918={'date':_0x56021b,'eur':_0x33d27b[stablecoins[_0x4048e3(0x1d3)][_0x4048e3(0x1cc)]][_0x3651f4],'usd':_0x33d27b[stablecoins[_0x4048e3(0x1d1)][_0x4048e3(0x1cc)]][_0x3651f4],'coins':_0x330d54}),dbPerformance[_0x4048e3(0x1f0)](_0x4048e3(0x1fc))[_0x4048e3(0x12d)](_0x3ac918)[_0x4048e3(0x18b)]();}),emitPerformance(),await resetCoinResults();for(let _0x40e6fc of _0x9f7751){_0x40e6fc[_0xe66aef(0x1cc)]!=config[_0xe66aef(0x14d)]&&await updateCoinResults(_0x40e6fc);}logHistory(_0xe66aef(0x1a2),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x530cdc){await handleError(_0x530cdc,_0xe66aef(0x202));}}async function getCloses(_0x2d637a,_0x5e64fb,_0x723c10=undefined){const _0x162e53=_0x1f862c,_0x2b378f='1d';let _0x2abf25,_0xfd9a9;const _0x562853=fns[_0x162e53(0x1d9)](new Date(),_0x5e64fb)+0x1;try{const _0x4c3183=exchange[_0x162e53(0x111)]()-_0x562853*0x18*0xe10*0x3e8;_0x2abf25=await exchange[_0x162e53(0x1b0)](_0x2d637a,_0x2b378f,_0x4c3183,_0x723c10),_0xfd9a9=await exchange[_0x162e53(0x1bb)](_0x2d637a);}catch(_0x49a141){await handleError(_0x49a141,'getCloses()');}let _0x17dedf=ohlcvToCloses(_0x2abf25);return _0x17dedf[_0x162e53(0x12d)](_0xfd9a9[_0x2d637a][_0x162e53(0x1e4)]),_0x17dedf;}function ohlcvToCloses(_0x468fed){const _0x17805c=_0x1f862c;let _0xa63620=[];return _0x468fed[_0x17805c(0x133)](function(_0x35efa3){const _0x345568=_0x17805c;_0xa63620[_0x345568(0x12d)](_0x35efa3[0x4]);}),_0xa63620;}function getConfiguration(_0xe47dba){const _0x3744f5=_0x1f862c;let _0x17ad21=dbConfig[_0x3744f5(0x1f0)](_0x3744f5(0x10f))[_0x3744f5(0x136)]({'botID':_0xe47dba})[_0x3744f5(0x1fa)]();if(_0x17ad21){let _0x328b1c=![];!_0x17ad21[_0x3744f5(0xf5)]&&(_0x17ad21={..._0x17ad21,'exchange':_0x3744f5(0x1f7)},_0x328b1c=!![]),!_0x17ad21[_0x3744f5(0x14d)]&&(_0x17ad21={..._0x17ad21,'basecoin':_0x3744f5(0x19c)},_0x328b1c=!![]),!_0x17ad21['ordertype']&&(_0x17ad21={..._0x17ad21,'ordertype':_0x3744f5(0x128)},_0x328b1c=!![]),!_0x17ad21[_0x3744f5(0x10d)]&&(_0x17ad21={..._0x17ad21,'timeout':0x14},_0x328b1c=!![]),!_0x17ad21['emojibuy']&&(_0x17ad21={..._0x17ad21,'emojibuy':''},_0x328b1c=!![]),!_0x17ad21[_0x3744f5(0x1c7)]&&(_0x17ad21={..._0x17ad21,'emojisell':''},_0x328b1c=!![]),!_0x17ad21[_0x3744f5(0x1d4)]&&(_0x17ad21={..._0x17ad21,'showname':![]},_0x328b1c=!![]),_0x328b1c&&(_0x17ad21={'botID':_0x17ad21[_0x3744f5(0x16f)],'exchange':_0x17ad21[_0x3744f5(0xf5)],'apiKey':_0x17ad21[_0x3744f5(0x19e)],'apiSecret':_0x17ad21[_0x3744f5(0x18d)],'basecoin':_0x17ad21[_0x3744f5(0x14d)],'botname':_0x17ad21[_0x3744f5(0x1b4)],'showname':_0x17ad21[_0x3744f5(0x1d4)],'threshold':_0x17ad21[_0x3744f5(0x182)],'ordertype':_0x17ad21[_0x3744f5(0x112)],'timeout':_0x17ad21[_0x3744f5(0x10d)],'startdate':_0x17ad21[_0x3744f5(0x17e)],'recreate':_0x17ad21[_0x3744f5(0x1f8)],'timeshift':_0x17ad21[_0x3744f5(0x155)],'headless':_0x17ad21['headless'],'cooldown':_0x17ad21[_0x3744f5(0x186)],'emojibuy':_0x17ad21[_0x3744f5(0x1cf)],'emojisell':_0x17ad21[_0x3744f5(0x1c7)],'portfolio':_0x17ad21[_0x3744f5(0x1ed)]},dbConfig['get'](_0x3744f5(0x10f))['remove']()['write'](),dbConfig[_0x3744f5(0x1f0)](_0x3744f5(0x10f))[_0x3744f5(0x12d)](_0x17ad21)[_0x3744f5(0x18b)]());}else _0x17ad21={'botID':_0xe47dba,'exchange':_0x3744f5(0x1f7),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0xe47dba,'showname':![],'threshold':'3','ordertype':_0x3744f5(0x128),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3744f5(0x155)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x17ad21;}function emittedConfiguration(){const _0x52cd5b=_0x1f862c;let _0x2c9c5a;return config['apiKey']==''?_0x2c9c5a=config:_0x2c9c5a={...config,'apiKey':_0x52cd5b(0x1c2),'apiSecret':'************'},_0x2c9c5a;}function getSettings(){const _0x11feea=_0x1f862c;return dbSettings['get']('settings')[_0x11feea(0x1fa)]();}function getSecure(){const _0x3f0f65=_0x1f862c;return dbSecure[_0x3f0f65(0x1f0)](_0x3f0f65(0x195))[_0x3f0f65(0x1fa)]()||{};}function updateTimeshift(_0x5d7ba9){const _0x1e2d42=_0x1f862c;let _0x1fb4f6=dbConfig['get'](_0x1e2d42(0x10f))[_0x1e2d42(0x136)]({'botID':botID})[_0x1e2d42(0x1fa)]();_0x1fb4f6&&dbConfig[_0x1e2d42(0x1f0)](_0x1e2d42(0x10f))[_0x1e2d42(0x136)]({'botID':botID})['assign']({'timeshift':_0x5d7ba9})[_0x1e2d42(0x18b)](),config[_0x1e2d42(0x155)]=_0x5d7ba9,proxyEmit(_0x1e2d42(0x14a),emittedConfiguration());}async function storeConfiguration(_0x48a777){const _0x564df6=_0x1f862c;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x99cf56=dbConfig[_0x564df6(0x1f0)](_0x564df6(0x10f))[_0x564df6(0x136)]({'botID':botID})['value']();_0x48a777={..._0x48a777,'apiKey':crypt[_0x564df6(0x151)](secure[_0x564df6(0x190)],_0x48a777[_0x564df6(0x19e)])[_0x564df6(0x1d7)],'apiSecret':crypt['decrypt'](secure[_0x564df6(0x190)],_0x48a777[_0x564df6(0x18d)])[_0x564df6(0x1d7)]};if(_0x99cf56){if(_0x48a777[_0x564df6(0x19e)]==_0x564df6(0x1c2))_0x48a777['apiKey']=config['apiKey'];if(_0x48a777[_0x564df6(0x18d)]=='************')_0x48a777[_0x564df6(0x18d)]=config[_0x564df6(0x18d)];dbConfig[_0x564df6(0x1f0)](_0x564df6(0x10f))['find']({'botID':botID})[_0x564df6(0x14f)](_0x48a777)['write']();}else dbConfig[_0x564df6(0x1f0)](_0x564df6(0x10f))[_0x564df6(0x12d)](_0x48a777)[_0x564df6(0x18b)](),process[_0x564df6(0x1ec)]({'status':_0x564df6(0x168),'live':_0x564df6(0x13f)},_0x309fd6=>{});config={..._0x48a777};if(config[_0x564df6(0x1f8)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x564df6(0x1ec)]({'botname':_0x48a777['botname']},_0x4b4376=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x32fa8a){const _0x8cd7a=_0x1f862c,_0x3e040e={...config,'headless':_0x32fa8a[_0x8cd7a(0x1c1)]};let _0x399b58=dbConfig[_0x8cd7a(0x1f0)](_0x8cd7a(0x10f))['find']({'botID':botID})[_0x8cd7a(0x1fa)]();_0x399b58&&dbConfig[_0x8cd7a(0x1f0)]('bot')['find']({'botID':botID})[_0x8cd7a(0x14f)](_0x3e040e)[_0x8cd7a(0x18b)](),config={..._0x3e040e},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x49d66f){const _0x159f38=_0x1f862c;return _0x49d66f[_0x159f38(0x146)]('/','');}function updateNumberCoins(_0x4a6f16){const _0x2ad862=_0x1f862c;_0x4a6f16['eventType']&&_0x4a6f16[_0x2ad862(0x1ba)]==_0x2ad862(0x11f)&&_0x4a6f16[_0x2ad862(0x1cb)][_0x2ad862(0x133)](_0x3d71f3=>{const _0xc09ea6=_0x2ad862;let _0x4df328=currentCoins[_0xc09ea6(0x136)](_0x8fecbf=>_0x8fecbf['coin']==_0x3d71f3[_0xc09ea6(0x1ae)]),_0x4b3a60=config[_0xc09ea6(0x1ed)][_0xc09ea6(0x136)](_0x177515=>_0x177515[_0xc09ea6(0x1cc)]==_0x3d71f3[_0xc09ea6(0x1ae)]);if(_0x4df328&&_0x4b3a60)_0x4df328[_0xc09ea6(0x1e3)]=Math[_0xc09ea6(0x1f1)](Number(_0x3d71f3[_0xc09ea6(0x141)])+(_0x4b3a60[_0xc09ea6(0x17c)]||0x0),0x0);});if(_0x4a6f16[_0x2ad862(0x1ba)]&&_0x4a6f16[_0x2ad862(0x1ba)]=='executionReport'){if(_0x4a6f16[_0x2ad862(0x121)]=='LIMIT'&&_0x4a6f16[_0x2ad862(0x11e)]==_0x2ad862(0x1b6)){if(lastOrders)lastOrders['forEach'](_0x5cb0bb=>{const _0x430da0=_0x2ad862;if(_0x5cb0bb[_0x430da0(0x1f3)]==_0x4a6f16[_0x430da0(0x1f3)]){if(_0x5cb0bb['reverse'])_0x5cb0bb[_0x430da0(0x14b)]=_0x4a6f16[_0x430da0(0xf8)]*_0x5cb0bb[_0x430da0(0x120)];else _0x5cb0bb['filled']=_0x4a6f16[_0x430da0(0xf8)];}});}}}async function getCoins(_0x18d742=!![],_0x4adf09=config['basecoin']){const _0x1414a5=_0x1f862c;let _0x58751d,_0x9c5abb=[],_0x476641=[],_0x194841=[];try{_0x58751d=await exchange[_0x1414a5(0x14e)](),mybalances=_0x58751d['total'];if(!_0x18d742)for(const [_0x400bd0,_0x4a179b]of Object[_0x1414a5(0x174)](mybalances)){_0x194841[_0x1414a5(0x12d)](_0x400bd0);}else config['portfolio']['forEach'](_0x10a7b8=>{const _0x199751=_0x1414a5;if(!_0x10a7b8[_0x199751(0x1ca)])_0x194841[_0x199751(0x12d)](_0x10a7b8[_0x199751(0x1cc)]);});if(_0x4adf09=='')for(const [_0x51762f,_0x4e09e0]of Object[_0x1414a5(0x174)](mybalances)){_0x4e09e0[_0x1414a5(0x107)]()!=0x0&&_0x476641['push']({'coin':_0x51762f});}else for(const [_0x276d13,_0x56022c]of Object[_0x1414a5(0x174)](mybalances)){if(_0x194841[_0x1414a5(0x13a)](_0x276d13)){const _0x4c01d4=config[_0x1414a5(0x1ed)][_0x1414a5(0x136)](_0x56aea2=>_0x56aea2[_0x1414a5(0x1cc)]==_0x276d13);if((_0x56022c[_0x1414a5(0x107)]()!=0x0||_0x4c01d4)&&(allSymbols['includes'](_0x276d13+'/'+_0x4adf09)||_0x276d13==_0x4adf09))_0x476641[_0x1414a5(0x12d)]({'coin':_0x276d13,'symbol':_0x276d13+'/'+_0x4adf09,'reverse':![],'number':Math[_0x1414a5(0x1f1)](_0x56022c+(_0x4c01d4&&_0x4c01d4[_0x1414a5(0x17c)]||0x0),0x0)}),_0x276d13!=_0x4adf09&&_0x9c5abb[_0x1414a5(0x12d)](_0x276d13+'/'+_0x4adf09);else(_0x56022c[_0x1414a5(0x107)]()!=0x0||_0x4c01d4)&&allSymbols[_0x1414a5(0x13a)](_0x4adf09+'/'+_0x276d13)&&(_0x476641['push']({'coin':_0x276d13,'symbol':_0x4adf09+'/'+_0x276d13,'reverse':!![],'number':Math[_0x1414a5(0x1f1)](_0x56022c+(_0x4c01d4&&_0x4c01d4[_0x1414a5(0x17c)]||0x0),0x0)}),_0x276d13!=_0x4adf09&&_0x9c5abb[_0x1414a5(0x12d)](_0x4adf09+'/'+_0x276d13));}}}catch(_0x5dbc22){if(!_0x18d742){if(_0x5dbc22['toString']()[_0x1414a5(0x13a)](_0x1414a5(0x19d)))return logHistory('error',_0x1414a5(0x205)),![];else{if(_0x5dbc22[_0x1414a5(0x107)]()[_0x1414a5(0x13a)](_0x1414a5(0x1aa)))return logHistory(_0x1414a5(0x10e),_0x1414a5(0x1c3)),![];else{if(_0x5dbc22['toString']()[_0x1414a5(0x13a)](_0x1414a5(0x1a7)))return logHistory('error',_0x1414a5(0xfa)),![];else await handleError(_0x5dbc22,_0x1414a5(0x16e));}}}else await handleError(_0x5dbc22,'getCoins()');}return _0x476641;}async function getPortfolio(_0x354c00){const _0x343df0=_0x1f862c;let _0x266823=[],_0x5f034a=[],_0x43ac21,_0x3122c3=[],_0x338c1f,_0x136d79;_0x354c00[_0x343df0(0x19e)]===_0x343df0(0x1c2)||_0x354c00['apiSecret']===_0x343df0(0x1c2)?(_0x338c1f=config['apiKey'],_0x136d79=config[_0x343df0(0x18d)]):(_0x338c1f=_0x354c00['apiKey'],_0x136d79=_0x354c00[_0x343df0(0x18d)]);await initExchange(_0x338c1f,_0x136d79);let _0x48aa54=await loadSymbols();if(_0x48aa54){_0x3122c3=await getCoins(![],_0x354c00['basecoin']);if(_0x3122c3===![])proxyEmit(_0x343df0(0x1ed),![]);else{if(_0x354c00[_0x343df0(0x14d)]=='')proxyEmit(_0x343df0(0x1ed),_0x3122c3);else{_0x3122c3[_0x343df0(0x133)](_0x4ce421=>{const _0x41dec=_0x343df0;_0x266823[_0x41dec(0x12d)](_0x4ce421[_0x41dec(0x1a6)]);});try{_0x5f034a=await exchange[_0x343df0(0x1bb)](_0x266823);}catch(_0x5f1b17){await handleError(_0x5f1b17,_0x343df0(0x12a));}_0x3122c3[_0x343df0(0x133)](_0x28f740=>{const _0x21877a=_0x343df0;_0x28f740[_0x21877a(0x1cc)]!=_0x354c00[_0x21877a(0x14d)]?_0x43ac21=_0x28f740[_0x21877a(0x184)]?0x1/_0x5f034a[_0x28f740[_0x21877a(0x1a6)]][_0x21877a(0x1e4)]:_0x5f034a[_0x28f740[_0x21877a(0x1a6)]][_0x21877a(0x1e4)]:_0x43ac21=0x1,_0x28f740[_0x21877a(0x120)]=formatResult(_0x43ac21,0x8);}),proxyEmit(_0x343df0(0x1ed),_0x3122c3);}}}else proxyEmit(_0x343df0(0x1ed),![]);}function checkMinimums(_0x1f9d6){const _0x40b2bd=_0x1f862c;let _0x1e64fd=!![];const _0x294fc2=!_0x1f9d6['reverse']?markets[_0x1f9d6['symbol']]['limits'][_0x40b2bd(0x201)][_0x40b2bd(0x1f5)]:markets[_0x1f9d6[_0x40b2bd(0x1a6)]][_0x40b2bd(0x1e8)][_0x40b2bd(0x162)][_0x40b2bd(0x1f5)],_0x9aab83=!_0x1f9d6['reverse']?markets[_0x1f9d6[_0x40b2bd(0x1a6)]]['limits'][_0x40b2bd(0x162)][_0x40b2bd(0x1f5)]:markets[_0x1f9d6[_0x40b2bd(0x1a6)]]['limits']['amount'][_0x40b2bd(0x1f5)];if(Math[_0x40b2bd(0x1c8)](_0x1f9d6[_0x40b2bd(0x1eb)])<_0x294fc2)_0x1e64fd=![];if(Math[_0x40b2bd(0x1c8)](_0x1f9d6[_0x40b2bd(0x1eb)])*_0x1f9d6[_0x40b2bd(0x1e4)]<_0x9aab83)_0x1e64fd=![];let _0xf7ad4f=config[_0x40b2bd(0x1ed)][_0x40b2bd(0x136)](_0x5cc1e8=>_0x5cc1e8[_0x40b2bd(0x1cc)]==_0x1f9d6[_0x40b2bd(0x1cc)]);if(Math[_0x40b2bd(0x1c8)](_0x1f9d6[_0x40b2bd(0x1eb)])>_0x1f9d6[_0x40b2bd(0x1e3)]-_0xf7ad4f[_0x40b2bd(0x17c)])_0x1e64fd=![];return _0x1e64fd;}async function getBalances(){const _0x18b610=_0x1f862c;let _0x5cd9fb=0x0,_0x360192;const _0x507753=config['threshold'];currentCoins[_0x18b610(0x133)](_0x3180bd=>{const _0x336f18=_0x18b610;if(_0x3180bd['coin']!=config['basecoin']){let _0x5b192d=global[_0x336f18(0x189)][noslash(_0x3180bd[_0x336f18(0x1a6)])];_0x360192=_0x3180bd[_0x336f18(0x184)]?0x1/_0x5b192d:_0x5b192d;}else _0x360192=0x1;let _0xb5ce3c=_0x3180bd[_0x336f18(0x1e3)]*_0x360192;_0x5cd9fb+=_0xb5ce3c,_0x3180bd[_0x336f18(0x1e4)]=formatResult(Number(_0x360192),0x8),_0x3180bd[_0x336f18(0x1fa)]=_0xb5ce3c;}),currentCoins[_0x18b610(0x133)](_0x1b7003=>{const _0x4417bb=_0x18b610;let _0xdc2668=config[_0x4417bb(0x1ed)][_0x4417bb(0x136)](_0x585fc0=>_0x585fc0[_0x4417bb(0x1cc)]==_0x1b7003[_0x4417bb(0x1cc)]),_0x916882=Number(_0xdc2668['distribution']),_0x3d166a=_0x1b7003['value']/_0x5cd9fb*0x64,_0x3778ef=_0x916882*_0x5cd9fb/0x64/_0x1b7003[_0x4417bb(0x1e4)]-_0x1b7003[_0x4417bb(0x1e3)];_0x1b7003[_0x4417bb(0x130)]=formatResult(_0x3d166a,0x3),_0x1b7003[_0x4417bb(0x1af)]=formatResult(_0x916882,0x3),_0x1b7003[_0x4417bb(0x1eb)]=formatResult(_0x3778ef,0x8),_0x1b7003['side']='',_0x1b7003[_0x4417bb(0x1ab)]='';if(_0x1b7003[_0x4417bb(0x1cc)]!=config['basecoin']){if(_0x1b7003[_0x4417bb(0x130)]>_0x916882)_0x1b7003[_0x4417bb(0x178)]=_0x4417bb(0x154),_0x1b7003[_0x4417bb(0x1ab)]=checkMinimums(_0x1b7003);else _0x1b7003[_0x4417bb(0x130)]<_0x916882&&(_0x1b7003['side']=_0x4417bb(0x1b3),_0x1b7003[_0x4417bb(0x1ab)]=checkMinimums(_0x1b7003));}_0x1b7003['delta']=_0x1b7003['distribution']/_0x1b7003['target']-0x1;}),currentCoins[_0x18b610(0x1d2)]((_0x17da3a,_0x2a7131)=>_0x17da3a[_0x18b610(0x114)]<_0x2a7131[_0x18b610(0x114)]?0x1:_0x2a7131['delta']<_0x17da3a[_0x18b610(0x114)]?-0x1:0x0);const _0x5e170d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5e170d[_0x18b610(0x1d3)],'usd':_0x5e170d[_0x18b610(0x1d1)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x507753},proxyEmit(_0x18b610(0x1cb),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x18b610(0x1c1)])headlessMode({'portfolio':currentCoins,'threshold':_0x507753});else notifyBalance({'portfolio':currentCoins,'threshold':_0x507753});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x52fc9e=_0x1f862c;if(!lastBalances)return;let _0x2a9a0e=await getStartingBalances(![]),_0x3086e5=[],_0x52b020;JSON[_0x52fc9e(0x131)](lastBalances[_0x52fc9e(0x1ed)])['forEach'](_0xefbfd9=>{const _0x1fcc27=_0x52fc9e;let _0xb70523={'coin':_0xefbfd9[_0x1fcc27(0x1cc)],'number':_0xefbfd9['number'],'price':_0xefbfd9[_0x1fcc27(0x1e4)]};_0x3086e5[_0x1fcc27(0x12d)](_0xb70523);});const _0x3378bb=await getFiat();_0x52b020={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x3378bb[_0x52fc9e(0x1d3)],'usd':_0x3378bb['usd'],'coins':_0x3086e5};let _0x213e7b=dbPerformance[_0x52fc9e(0x1f0)]('data')[_0x52fc9e(0x136)]({'date':_0x52b020[_0x52fc9e(0x177)]})['value']();_0x213e7b?dbPerformance[_0x52fc9e(0x1f0)](_0x52fc9e(0x1fc))[_0x52fc9e(0x136)]({'date':_0x52b020[_0x52fc9e(0x177)]})[_0x52fc9e(0x14f)](_0x52b020)['write']():dbPerformance['get'](_0x52fc9e(0x1fc))['push'](_0x52b020)[_0x52fc9e(0x18b)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x2aa76b=_0x1f862c;if(dbPerformance[_0x2aa76b(0x193)]('data')[_0x2aa76b(0x1fa)]()){let _0x3be485=dbPerformance[_0x2aa76b(0x1f0)](_0x2aa76b(0x1fc))[_0x2aa76b(0xf2)]('date')[_0x2aa76b(0x1fa)]();proxyEmit(_0x2aa76b(0x10c),_0x3be485),lastPerformanceEmitted=getDate();}else proxyEmit(_0x2aa76b(0x10c),[]);}async function getStartingBalances(_0x1ea21b=!![]){const _0x3ec099=_0x1f862c;let _0x526f1e=dbPerformance[_0x3ec099(0x1f0)]('data')[_0x3ec099(0x136)]({'date':config[_0x3ec099(0x17e)]})[_0x3ec099(0x1fa)]();config[_0x3ec099(0x19e)]!=''&&!_0x526f1e&&(await setStartDatePerformance(config),_0x526f1e=dbPerformance[_0x3ec099(0x1f0)](_0x3ec099(0x1fc))[_0x3ec099(0x136)]({'date':config[_0x3ec099(0x17e)]})[_0x3ec099(0x1fa)]());if(config[_0x3ec099(0x19e)]==''||!_0x526f1e)return{};let _0x1016b8=0x0,_0x4e6e70=0x0,_0x394a95=0x0,_0x34ab71=[],_0x5a8e1e=0x0;config[_0x3ec099(0x1ed)]['forEach'](_0x417962=>{const _0x1bae09=_0x3ec099;if(!_0x417962[_0x1bae09(0x1ca)]){_0x34ab71[_0x5a8e1e]={'coin':_0x417962[_0x1bae09(0x1cc)],'symbol':_0x417962[_0x1bae09(0x1a6)],'number':_0x417962[_0x1bae09(0x1a0)],'price':_0x417962[_0x1bae09(0x1c9)]},_0x1016b8+=_0x417962[_0x1bae09(0x1c9)]*_0x417962['startnumber'];if(config[_0x1bae09(0x14d)]=='BTC')_0x4e6e70+=_0x417962[_0x1bae09(0x1c9)]*_0x417962[_0x1bae09(0x1a0)]*_0x526f1e[_0x1bae09(0x1d3)],_0x394a95+=_0x417962[_0x1bae09(0x1c9)]*_0x417962[_0x1bae09(0x1a0)]*_0x526f1e[_0x1bae09(0x1d1)];else{if(config[_0x1bae09(0x14d)]=='BUSD'||config['basecoin']==_0x1bae09(0x197)||config['basecoin']==_0x1bae09(0xfe))_0x4e6e70+=_0x417962[_0x1bae09(0x1c9)]*_0x417962[_0x1bae09(0x1a0)]*_0x526f1e[_0x1bae09(0x1d3)]/_0x526f1e['usd'],_0x394a95+=_0x417962[_0x1bae09(0x1c9)]*_0x417962['startnumber'];else config[_0x1bae09(0x14d)]==_0x1bae09(0x13c)&&(_0x4e6e70+=_0x417962[_0x1bae09(0x1c9)]*_0x417962['startnumber'],_0x394a95+=_0x417962[_0x1bae09(0x1c9)]*_0x417962[_0x1bae09(0x1a0)]*_0x526f1e[_0x1bae09(0x1d1)]/_0x526f1e['eur']);}_0x5a8e1e++;}});let _0x2da301={'basecoin':_0x1016b8,'eur':_0x4e6e70,'usd':_0x394a95,'coins':_0x34ab71};if(_0x1ea21b)proxyEmit(_0x3ec099(0x1ac),_0x2da301);return _0x2da301;}function headlessMode(_0x291c3b){const _0x318b82=_0x1f862c;let _0x1a85a7=_0x291c3b[_0x318b82(0x1ed)],_0x30bda4=_0x291c3b[_0x318b82(0x182)],_0x41c842=[];for(let _0x5ab080 of _0x1a85a7){if(_0x5ab080[_0x318b82(0x1cc)]!=config[_0x318b82(0x14d)]){if(_0x5ab080[_0x318b82(0x130)]/_0x5ab080[_0x318b82(0x1af)]-0x1>=_0x30bda4/0x64){if(_0x5ab080[_0x318b82(0x1ab)])_0x41c842[_0x318b82(0x12d)](_0x5ab080);}else{if(_0x5ab080['distribution']/_0x5ab080[_0x318b82(0x1af)]-0x1<=-_0x30bda4/0x64){if(_0x5ab080[_0x318b82(0x1ab)])_0x41c842[_0x318b82(0x12d)](_0x5ab080);}}}}_0x41c842[_0x318b82(0x126)]>0x0&&placeOrder(_0x41c842);}function notifyBalance(_0x2329cb){const _0x751cac=_0x1f862c;let _0x5c0495=_0x2329cb[_0x751cac(0x1ed)],_0x22f136=_0x2329cb[_0x751cac(0x182)],_0x111f8f=[];for(let _0x5eb67f of _0x5c0495){if(_0x5eb67f[_0x751cac(0x1cc)]!=config[_0x751cac(0x14d)]){if(_0x5eb67f[_0x751cac(0x130)]/_0x5eb67f[_0x751cac(0x1af)]-0x1>=_0x22f136/0x64){if(_0x5eb67f[_0x751cac(0x1ab)])_0x111f8f['push'](_0x5eb67f);}else{if(_0x5eb67f['distribution']/_0x5eb67f[_0x751cac(0x1af)]-0x1<=-_0x22f136/0x64){if(_0x5eb67f[_0x751cac(0x1ab)])_0x111f8f[_0x751cac(0x12d)](_0x5eb67f);}}}}if(_0x111f8f['length']>0x0){let _0x5eaef3=_0x111f8f['map'](_0x200d7b=>_0x200d7b['coin']);_0x5eaef3[_0x751cac(0x1d2)]();let _0x431ea7=_0x5eaef3[_0x751cac(0xef)](',\x20');if(lastCoinsToBalance!==_0x431ea7)logHistory(_0x751cac(0x1bd),_0x751cac(0x158)+_0x431ea7);lastCoinsToBalance=_0x431ea7;}}function symbolToCoin(_0x44d478){const _0x440458=_0x1f862c;let _0x336017;if(_0x44d478[_0x440458(0x13a)]('/'+config[_0x440458(0x14d)]))_0x336017=_0x44d478[_0x440458(0x146)]('/'+config[_0x440458(0x14d)],'');if(_0x44d478[_0x440458(0x13a)](config[_0x440458(0x14d)]+'/'))_0x336017=_0x44d478[_0x440458(0x146)](config['basecoin']+'/','');return _0x336017;}async function validateOrders(_0x47188a=0x0){const _0x5a6aa7=_0x1f862c;let _0xe248ae=[],_0x179379=config['ordertype']==_0x5a6aa7(0x128)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5a6aa7(0x10d)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x5a6aa7(0x133)](_0x2ef45c=>{const _0x3dbf9d=_0x5a6aa7;let _0xbb7006=previousCoins[_0x3dbf9d(0x136)](_0x3883fc=>_0x3883fc[_0x3dbf9d(0x1cc)]==symbolToCoin(_0x2ef45c[_0x3dbf9d(0x1a6)])),_0x4eaee8=currentCoins[_0x3dbf9d(0x136)](_0x47db8b=>_0x47db8b[_0x3dbf9d(0x1cc)]==symbolToCoin(_0x2ef45c[_0x3dbf9d(0x1a6)])),_0x2bc15c,_0xa7d2b;_0x2ef45c[_0x3dbf9d(0x178)]==_0x3dbf9d(0x1b3)&&!_0x2ef45c['reverse']||_0x2ef45c[_0x3dbf9d(0x178)]==_0x3dbf9d(0x154)&&_0x2ef45c[_0x3dbf9d(0x184)]?(_0x2bc15c=_0xbb7006[_0x3dbf9d(0x1e3)]+0.9*_0x2ef45c[_0x3dbf9d(0x14b)],_0xa7d2b=_0xbb7006[_0x3dbf9d(0x1e3)]+1.1*_0x2ef45c['filled']):(_0x2bc15c=_0xbb7006[_0x3dbf9d(0x1e3)]-1.1*_0x2ef45c[_0x3dbf9d(0x14b)],_0xa7d2b=_0xbb7006['number']-0.9*_0x2ef45c[_0x3dbf9d(0x14b)]);const _0x494b2c=_0x2ef45c[_0x3dbf9d(0x14b)]!=0x0&&_0x4eaee8[_0x3dbf9d(0x1e3)]>=_0x2bc15c&&_0x4eaee8[_0x3dbf9d(0x1e3)]<=_0xa7d2b;_0xe248ae[_0x3dbf9d(0x12d)](_0x494b2c);if(_0x494b2c&&config[_0x3dbf9d(0x112)]!=_0x3dbf9d(0x128)){if(_0x2ef45c[_0x3dbf9d(0x184)])logHistory(_0x3dbf9d(0x1bd),_0x3dbf9d(0x1ef)+_0x2ef45c['symbol']+'\x20'+_0x2ef45c[_0x3dbf9d(0x178)]+'\x20#'+formatResult(_0x2ef45c[_0x3dbf9d(0x14b)]/_0x2ef45c[_0x3dbf9d(0x120)],0x8)+'\x20@'+formatResult(_0x2ef45c['price'],0x8));else logHistory(_0x3dbf9d(0x1bd),_0x3dbf9d(0x1ef)+_0x2ef45c[_0x3dbf9d(0x1a6)]+'\x20'+_0x2ef45c[_0x3dbf9d(0x178)]+'\x20#'+formatResult(_0x2ef45c['filled'],0x8)+'\x20@'+formatResult(_0x2ef45c[_0x3dbf9d(0x120)],0x8));}}),_0xe248ae['forEach']((_0x4237f3,_0x3f4902)=>{const _0x3422c0=_0x5a6aa7;if(_0x4237f3)lastOrders[_0x3422c0(0x118)](_0x3f4902,0x1);});if(_0x47188a<_0x179379&&_0xe248ae[_0x5a6aa7(0x13a)](![])){if(_0x47188a==0x0){config[_0x5a6aa7(0x112)]==_0x5a6aa7(0x128)?logHistory('error',_0x5a6aa7(0x196)):logHistory(_0x5a6aa7(0x10e),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x47188a);},0xa*0x3e8);}else{(_0x47188a==0x1||_0x47188a==Math[_0x5a6aa7(0x1bf)](_0x179379/0x2)||_0x47188a==_0x179379-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x47188a);},validateOrderInterval);}}else{lockOrders=![];if(_0x47188a>0x0&&!_0xe248ae[_0x5a6aa7(0x13a)](![]))config[_0x5a6aa7(0x112)]==_0x5a6aa7(0x128)?logHistory(_0x5a6aa7(0x1a2),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory('success',_0x5a6aa7(0x1be));else _0x47188a>0x0&&_0xe248ae['includes'](![])&&(config['ordertype']==_0x5a6aa7(0x128)?logHistory(_0x5a6aa7(0x1a2),_0x5a6aa7(0x187)+Math['round'](_0x179379*validateOrderInterval/0xea60)+_0x5a6aa7(0x1e5)):(lastOrders[_0x5a6aa7(0x133)](async _0x3c0a32=>{const _0x42df96=_0x5a6aa7;try{const _0x4e59a8=await exchange['cancelOrder'](_0x3c0a32[_0x42df96(0x1f3)],_0x3c0a32[_0x42df96(0x1a6)]);}catch(_0x5a4066){if(_0x5a4066[_0x42df96(0x107)]()[_0x42df96(0x13a)](_0x42df96(0x134))){}else await handleError(_0x5a4066,_0x42df96(0x1b9));}}),logHistory('success',_0x5a6aa7(0x1b8)+Math[_0x5a6aa7(0x1bf)](_0x179379*validateOrderInterval/0xea60)+_0x5a6aa7(0x1e5))));}}async function resetCoinResults(){const _0x53b12c=_0x1f862c;dbCoinResults['get'](_0x53b12c(0x109))[_0x53b12c(0x1fe)]()[_0x53b12c(0x18b)]();let _0x1617f2=await getStartingBalances(![]);_0x1617f2[_0x53b12c(0x109)][_0x53b12c(0x133)](_0x1c7a12=>{const _0x4acfec=_0x53b12c,_0x233459=_0x1c7a12[_0x4acfec(0x1a6)]['includes'](config[_0x4acfec(0x14d)]+'/');if(_0x1c7a12[_0x4acfec(0x1cc)]!=config[_0x4acfec(0x14d)]){let _0x89e0d3={'coin':_0x1c7a12[_0x4acfec(0x1cc)],'number':_0x1c7a12[_0x4acfec(0x1e3)],'breakeven':_0x1c7a12[_0x4acfec(0x120)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4acfec(0x1f0)]('coins')[_0x4acfec(0x12d)](_0x89e0d3)['write']();}});}async function updateCoinResults(_0x2bd8ca){const _0xee8f53=_0x1f862c;let _0x58bb8d,_0x46f56c,_0x1d0ad7,_0x286d14,_0x51b2ec,_0x7486f,_0x372e3d=dbCoinResults['get'](_0xee8f53(0x109))[_0xee8f53(0x136)]({'coin':_0x2bd8ca['coin']})['value']();if(!_0x372e3d)return;if(_0x2bd8ca[_0xee8f53(0x16b)]&&_0x2bd8ca['fee'][_0xee8f53(0x18a)]==config[_0xee8f53(0x14d)])_0x58bb8d=_0x2bd8ca['fee']['cost'];else{if(_0x2bd8ca[_0xee8f53(0x16b)]&&_0x2bd8ca[_0xee8f53(0x16b)]['currency']==_0xee8f53(0xfb))_0x58bb8d=_0x2bd8ca[_0xee8f53(0x16b)][_0xee8f53(0x162)]*global[_0xee8f53(0x189)]['BNB'+config[_0xee8f53(0x14d)]];else _0x58bb8d=0.001*_0x2bd8ca[_0xee8f53(0x14b)];}const _0x401bee=_0x2bd8ca[_0xee8f53(0x1a6)]['includes'](config[_0xee8f53(0x14d)]+'/');_0x401bee&&(_0x7486f={'coin':_0x2bd8ca[_0xee8f53(0x1cc)],'symbol':_0x2bd8ca[_0xee8f53(0x1a6)],'filled':_0x2bd8ca[_0xee8f53(0x14b)]*_0x2bd8ca['price'],'side':_0x2bd8ca[_0xee8f53(0x178)]==_0xee8f53(0x154)?_0xee8f53(0x1b3):_0xee8f53(0x154),'price':0x1/_0x2bd8ca[_0xee8f53(0x120)]},_0x2bd8ca={..._0x7486f});_0x2bd8ca[_0xee8f53(0x178)]==_0xee8f53(0x1b3)?_0x1d0ad7=(_0x372e3d[_0xee8f53(0x206)]*_0x372e3d[_0xee8f53(0x1e3)]+_0x2bd8ca[_0xee8f53(0x120)]*_0x2bd8ca[_0xee8f53(0x14b)])/(_0x372e3d[_0xee8f53(0x1e3)]+_0x2bd8ca[_0xee8f53(0x14b)]):_0x1d0ad7=(_0x372e3d[_0xee8f53(0x206)]*_0x372e3d[_0xee8f53(0x1e3)]-_0x2bd8ca[_0xee8f53(0x120)]*_0x2bd8ca[_0xee8f53(0x14b)])/(_0x372e3d[_0xee8f53(0x1e3)]-_0x2bd8ca[_0xee8f53(0x14b)]);_0x2bd8ca['side']==_0xee8f53(0x1b3)?_0x286d14=_0x372e3d[_0xee8f53(0x11c)]:_0x286d14=_0x372e3d['realized']+(_0x2bd8ca[_0xee8f53(0x120)]-_0x372e3d['breakeven'])*_0x2bd8ca[_0xee8f53(0x14b)];_0x46f56c=_0x2bd8ca[_0xee8f53(0x178)]=='sell'?_0x372e3d[_0xee8f53(0x1e3)]-_0x2bd8ca[_0xee8f53(0x14b)]:_0x372e3d[_0xee8f53(0x1e3)]+_0x2bd8ca['filled'],_0x51b2ec=(_0x2bd8ca[_0xee8f53(0x120)]-_0x1d0ad7)*_0x46f56c;let _0x18113c={'coin':_0x2bd8ca[_0xee8f53(0x1cc)],'number':_0x46f56c,'breakeven':formatResult(_0x1d0ad7,0x8),'realized':formatResult(_0x286d14,0x8),'unrealized':formatResult(_0x51b2ec,0x8),'fees':formatResult(_0x372e3d['fees']+_0x58bb8d,0x8),'sells':_0x2bd8ca['side']==_0xee8f53(0x154)?_0x372e3d[_0xee8f53(0x1a9)]+0x1:_0x372e3d[_0xee8f53(0x1a9)],'buys':_0x2bd8ca[_0xee8f53(0x178)]=='buy'?_0x372e3d[_0xee8f53(0x10b)]+0x1:_0x372e3d[_0xee8f53(0x10b)]};dbCoinResults[_0xee8f53(0x1f0)]('coins')[_0xee8f53(0x136)]({'coin':_0x2bd8ca[_0xee8f53(0x1cc)]})[_0xee8f53(0x14f)](_0x18113c)[_0xee8f53(0x18b)]();}async function placeOrder(_0x5b092a){const _0x19e084=_0x1f862c,_0x39ac86=config[_0x19e084(0x112)]=='market'?'market':_0x19e084(0x180);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x19e084(0x131)](JSON[_0x19e084(0x1d6)](currentCoins));for(const _0x2d1801 of _0x5b092a){let _0x257da3,_0x373954,_0x256ee4,_0x998c45,_0x361cd3,_0x3a0282=_0x2d1801[_0x19e084(0x1a6)];try{const _0x17dbe5=await exchange[_0x19e084(0x1bb)](_0x3a0282),_0x3227d7=_0x17dbe5[_0x3a0282];_0x257da3=_0x3227d7[_0x19e084(0x1e4)],_0x373954=_0x3227d7[_0x19e084(0x171)],_0x256ee4=_0x3227d7[_0x19e084(0x183)];_0x2d1801[_0x19e084(0x184)]?(_0x998c45=_0x2d1801['side']==_0x19e084(0x1b3)?_0x19e084(0x154):_0x19e084(0x1b3),_0x361cd3=Math[_0x19e084(0x1c8)](_0x2d1801[_0x19e084(0x1eb)])/_0x257da3):(_0x998c45=_0x2d1801[_0x19e084(0x178)],_0x361cd3=Math['abs'](_0x2d1801[_0x19e084(0x1eb)]));_0x39ac86==_0x19e084(0x180)&&(config[_0x19e084(0x112)]==_0x19e084(0x108)&&(_0x257da3=_0x998c45==_0x19e084(0x1b3)?_0x373954:_0x256ee4),config[_0x19e084(0x112)]==_0x19e084(0x143)&&(_0x257da3=_0x998c45=='buy'?_0x256ee4:_0x373954));_0x361cd3=formatResult(_0x361cd3,0x8),_0x257da3=formatResult(_0x257da3,0x8);const _0x1e29c8=await exchange[_0x19e084(0x1df)](_0x3a0282,_0x39ac86,_0x998c45,_0x361cd3,_0x257da3);lastOrders[_0x19e084(0x12d)]({'orderId':_0x1e29c8['id'],'symbol':_0x3a0282,'side':_0x998c45,'reverse':_0x2d1801['reverse'],'amount':_0x2d1801['reverse']?_0x1e29c8['amount']*_0x1e29c8[_0x19e084(0x120)]:_0x1e29c8[_0x19e084(0x201)],'filled':_0x2d1801[_0x19e084(0x184)]?_0x1e29c8[_0x19e084(0x14b)]*_0x1e29c8['price']:_0x1e29c8[_0x19e084(0x14b)],'price':_0x1e29c8['price']});const _0xfc1a38=_0x998c45==_0x19e084(0x154)?config[_0x19e084(0x1c7)]?String[_0x19e084(0x12e)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x19e084(0x12e)]('0x'+config['emojibuy'])+'\x20':'',_0x2a9ffe=_0x39ac86=='market'?_0x19e084(0x169):config[_0x19e084(0x112)]==_0x19e084(0x108)?_0x19e084(0x1d8):'Limit\x20(low-margin)';if(_0x39ac86==_0x19e084(0x128))logHistory(_0x19e084(0x1bd),''+_0xfc1a38+_0x2a9ffe+_0x19e084(0x1dd)+_0x3a0282+'\x20'+_0x998c45+'\x20#'+formatResult(_0x1e29c8[_0x19e084(0x14b)],0x8)+'\x20@'+formatResult(_0x1e29c8[_0x19e084(0x120)],0x8));else logHistory(_0x19e084(0x1bd),''+_0xfc1a38+_0x2a9ffe+_0x19e084(0x1dd)+_0x3a0282+'\x20'+_0x998c45+'\x20#'+formatResult(_0x1e29c8['amount'],0x8)+'\x20@'+formatResult(_0x1e29c8[_0x19e084(0x120)],0x8));_0x1e29c8['coin']=_0x2d1801[_0x19e084(0x1cc)],await updateCoinResults(_0x1e29c8);if(config[_0x19e084(0x186)]!=0x0){let _0x2a8ed0=null;if(cooldownTracker[_0x19e084(0x126)]==config['cooldown']-0x1)_0x2a8ed0=cooldownTracker['shift']();const _0x408e73=getTimeStamp();cooldownTracker[_0x19e084(0x12d)](_0x408e73);if(_0x2a8ed0){const _0x36455f=fns[_0x19e084(0x17f)](new Date(_0x408e73),new Date(_0x2a8ed0));_0x36455f<cooldownInterval&&(logHistory(_0x19e084(0x10e),'Executed\x20'+config[_0x19e084(0x186)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x19e084(0x12c)+cooldownPeriod/(0xe10*0x3e8)+_0x19e084(0x10a)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x58a5a1){if(_0x58a5a1[_0x19e084(0x107)]()[_0x19e084(0x13a)](_0x19e084(0xf9)))logHistory(_0x19e084(0x10e),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3a0282);else{if(_0x58a5a1['toString']()[_0x19e084(0x13a)]('Invalid\x20quantity'))logHistory(_0x19e084(0x10e),'Order\x20amount\x20is\x20invalid:\x20'+_0x3a0282);else await handleError(_0x58a5a1,_0x19e084(0x122));}}}if(lastOrders[_0x19e084(0x126)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x19e084(0x1c1)]&&(config[_0x19e084(0x112)]==_0x19e084(0x128)?logHistory(_0x19e084(0x10e),_0x19e084(0x140)):logHistory(_0x19e084(0x10e),_0x19e084(0x148)));else coolingDown&&(!config[_0x19e084(0x1c1)]&&logHistory('error',_0x19e084(0x117)));}}function logHistory(_0x1c02f3,_0x28595d,_0x2631c2=''){const _0x13b7b6=_0x1f862c;let _0xf69d06={'time':getTimeStamp(),'type':_0x1c02f3,'event':_0x28595d,'botname':config[_0x13b7b6(0x1b4)],'showname':config['showname']};dbLogs[_0x13b7b6(0x1f0)]('logs')['push'](_0xf69d06)[_0x13b7b6(0x18b)]();if(_0x2631c2=='')_0x2631c2=_0x28595d;proxyEmit('event',{'log':_0xf69d06,'summary':_0x2631c2}),process[_0x13b7b6(0x1ec)]({'telegram':_0xf69d06},_0x2b68b4=>{}),logging(''+_0xf69d06['event']);}function emitHistory(_0x3c7f3b={}){const _0xdc924b=_0x1f862c;Object[_0xdc924b(0x135)](_0x3c7f3b)[_0xdc924b(0x126)]==0x0&&(_0x3c7f3b={'type':[_0xdc924b(0x1bd),'event'],'event':'','page':0x1});if(_0x3c7f3b[_0xdc924b(0x199)][_0xdc924b(0x13a)](_0xdc924b(0x161)))_0x3c7f3b[_0xdc924b(0x199)][_0xdc924b(0x118)](_0x3c7f3b[_0xdc924b(0x199)][_0xdc924b(0x139)](_0xdc924b(0x161)),0x1,'error',_0xdc924b(0x1a2));if(dbLogs[_0xdc924b(0x193)](_0xdc924b(0x15f))[_0xdc924b(0x1fa)]()){let _0x3c3ef6=dbLogs['get'](_0xdc924b(0x15f))[_0xdc924b(0xf7)](_0x567f8b=>{const _0x219a60=_0xdc924b;if(_0x3c7f3b[_0x219a60(0x199)][_0x219a60(0x126)]==0x0)return![];else return _0x3c7f3b[_0x219a60(0x199)]['includes'](_0x567f8b[_0x219a60(0x199)]);})[_0xdc924b(0xf7)](_0x66f01a=>{const _0x163c7b=_0xdc924b;if(_0x3c7f3b[_0x163c7b(0x161)]=='')return!![];else return _0x66f01a[_0x163c7b(0x161)][_0x163c7b(0x185)]()['includes'](_0x3c7f3b[_0x163c7b(0x161)][_0x163c7b(0x185)]());})[_0xdc924b(0xf2)](_0xdc924b(0x1ce)),_0x3204f8=_0x3c3ef6[_0xdc924b(0x1fa)]()[_0xdc924b(0x126)];_0x3c3ef6=_0x3c3ef6[_0xdc924b(0x184)]()[_0xdc924b(0x15c)]((_0x3c7f3b[_0xdc924b(0x165)]-0x1)*logPageSize,_0x3c7f3b[_0xdc924b(0x165)]*logPageSize-0x1)['reverse']()[_0xdc924b(0x1fa)](),proxyEmit(_0xdc924b(0x12b),{'logs':_0x3c3ef6,'total':_0x3204f8});}else proxyEmit(_0xdc924b(0x12b),{'logs':[],'total':0x0});}async function pauseBot(_0xd16f8d){const _0x37e6c9=_0x1f862c,_0x59bf9f=new Date()[_0x37e6c9(0xff)]();if(!lastBotPause)lastBotPause=new Date()[_0x37e6c9(0xff)](),consecutivePauses=0x1;else{if(_0x59bf9f-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x37e6c9(0x18f)},_0x290e4b=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x37e6c9(0x10e),_0x37e6c9(0x119)+consecutivePauses+')'),await sleep(_0xd16f8d),botPaused=![],reset();}}async function handleError(_0x288eb2,_0x101bec,_0x57e49b=''){const _0x44e180=_0x1f862c;if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)](_0x44e180(0x142)))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x1b2)),await pauseBot(pauseBotInterval);else{if(_0x288eb2[_0x44e180(0x107)]()['includes'](_0x44e180(0x163)))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x1a5)),await pauseBot(pauseBotInterval);else{if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)]('RequestTimeout'))logHistory('error',_0x101bec+_0x44e180(0x11a)),await pauseBot(pauseBotInterval);else{if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)](_0x44e180(0x19d)))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x11d)),logHistory('error',_0x44e180(0x18c)),process[_0x44e180(0x1ec)]({'stop':_0x44e180(0x1e9)},_0x25eb24=>{});else{if(_0x288eb2[_0x44e180(0x107)]()['includes'](_0x44e180(0x1aa)))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x113)),logHistory(_0x44e180(0x10e),_0x44e180(0x18c)),process['send']({'stop':_0x44e180(0x1e9)},_0x481348=>{});else{if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x176)),logHistory('error',_0x44e180(0x18c)),process[_0x44e180(0x1ec)]({'stop':_0x44e180(0x1e9)},_0x337dc4=>{});else{if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)](_0x44e180(0x1bc)))logHistory('error',_0x101bec+_0x44e180(0x156)),logHistory('error',_0x44e180(0x18c)),process['send']({'stop':_0x44e180(0x1e9)},_0x5f1385=>{});else{if(_0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)](_0x44e180(0x12f)))logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x1a3)),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'},_0x5ecf75=>{});else _0x288eb2[_0x44e180(0x107)]()[_0x44e180(0x13a)](_0x44e180(0x15a))?logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x170)):(logHistory(_0x44e180(0x10e),_0x101bec+_0x44e180(0x16a)),logging(_0x101bec+'\x20|\x20Error\x20details:\x20',_0x288eb2),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x51da9f,_0x30e770){const _0x4bd194=_0x1f862c;return parseFloat(_0x51da9f[_0x4bd194(0x1b7)](_0x30e770));}function logging(_0x5a16ed,_0x2c3309=''){const _0x40c15d=_0x1f862c;if(config[_0x40c15d(0x1d4)])console[_0x40c15d(0x15e)](getTimeStamp()+':\x20'+config[_0x40c15d(0x1b4)]+_0x40c15d(0x13b)+_0x5a16ed,_0x2c3309);else console[_0x40c15d(0x15e)](getTimeStamp()+_0x40c15d(0x137)+botID+_0x40c15d(0x13b)+_0x5a16ed,_0x2c3309);}function getServerTime(){const _0x1f9234=_0x1f862c,_0x163bca=new Date();return _0x163bca['getFullYear']()+'/'+(_0x163bca[_0x1f9234(0x1a8)]()+0x1)[_0x1f9234(0x107)]()[_0x1f9234(0x1e1)](0x2,'0')+'/'+_0x163bca[_0x1f9234(0x102)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x163bca[_0x1f9234(0x17a)]()[_0x1f9234(0x107)]()[_0x1f9234(0x1e1)](0x2,'0')+':'+_0x163bca[_0x1f9234(0x106)]()['toString']()['padStart'](0x2,'0')+':'+_0x163bca[_0x1f9234(0x127)]()[_0x1f9234(0x107)]()[_0x1f9234(0x1e1)](0x2,'0');}function getTimeStamp(){const _0x13b28e=_0x1f862c,_0x4bbe4f=shiftedTime();return _0x4bbe4f['getFullYear']()+'/'+(_0x4bbe4f[_0x13b28e(0x1a8)]()+0x1)[_0x13b28e(0x107)]()[_0x13b28e(0x1e1)](0x2,'0')+'/'+_0x4bbe4f[_0x13b28e(0x102)]()[_0x13b28e(0x107)]()['padStart'](0x2,'0')+'\x20'+_0x4bbe4f[_0x13b28e(0x17a)]()[_0x13b28e(0x107)]()[_0x13b28e(0x1e1)](0x2,'0')+':'+_0x4bbe4f[_0x13b28e(0x106)]()[_0x13b28e(0x107)]()[_0x13b28e(0x1e1)](0x2,'0')+':'+_0x4bbe4f[_0x13b28e(0x127)]()[_0x13b28e(0x107)]()['padStart'](0x2,'0');}function getDate(){const _0x4d3b25=_0x1f862c,_0x5dd9dd=shiftedTime();return _0x5dd9dd[_0x4d3b25(0x153)]()+'/'+(_0x5dd9dd['getMonth']()+0x1)['toString']()[_0x4d3b25(0x1e1)](0x2,'0')+'/'+_0x5dd9dd['getDate']()[_0x4d3b25(0x107)]()[_0x4d3b25(0x1e1)](0x2,'0');}function getHour(){const _0x3d43f7=_0x1f862c,_0x3a6b2e=shiftedTime();return _0x3a6b2e[_0x3d43f7(0x17a)]()[_0x3d43f7(0x107)]()[_0x3d43f7(0x1e1)](0x2,'0');}function sleep(_0x2d2026){return new Promise(_0x75972e=>setTimeout(_0x75972e,_0x2d2026));}function shiftedTime(){const _0x2d3a61=_0x1f862c,_0x269bc4=new Date();let _0x52b426=_0x269bc4;if(config&&config['timeshift']!==0x0)_0x52b426=fns[_0x2d3a61(0x19b)](_0x269bc4,{'hours':config[_0x2d3a61(0x155)]});return _0x52b426;}