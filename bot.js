const _0x41ba0f=_0x50f6;(function(_0x6a7996,_0x29fcea){const _0x297a5e=_0x50f6,_0x2c30a9=_0x6a7996();while(!![]){try{const _0x24b6bf=-parseInt(_0x297a5e(0x1cb))/0x1+parseInt(_0x297a5e(0x200))/0x2*(parseInt(_0x297a5e(0x287))/0x3)+parseInt(_0x297a5e(0x22d))/0x4*(-parseInt(_0x297a5e(0x229))/0x5)+parseInt(_0x297a5e(0x289))/0x6*(parseInt(_0x297a5e(0x24a))/0x7)+parseInt(_0x297a5e(0x26c))/0x8+-parseInt(_0x297a5e(0x27e))/0x9*(parseInt(_0x297a5e(0x1e3))/0xa)+-parseInt(_0x297a5e(0x279))/0xb*(-parseInt(_0x297a5e(0x163))/0xc);if(_0x24b6bf===_0x29fcea)break;else _0x2c30a9['push'](_0x2c30a9['shift']());}catch(_0x15944b){_0x2c30a9['push'](_0x2c30a9['shift']());}}}(_0x3a82,0x9d41c));const _0x4d2fac=function(){let _0x1d28d6=!![];return function(_0x235a84,_0x30bcc4){const _0x1d6784=_0x1d28d6?function(){const _0x467853=_0x50f6;if(_0x30bcc4){const _0x22935c=_0x30bcc4[_0x467853(0x168)](_0x235a84,arguments);return _0x30bcc4=null,_0x22935c;}}:function(){};return _0x1d28d6=![],_0x1d6784;};}(),_0x2a0b8f=_0x4d2fac(this,function(){const _0x41f3f8=_0x50f6;return _0x2a0b8f['toString']()['search'](_0x41f3f8(0x1c6))[_0x41f3f8(0x187)]()[_0x41f3f8(0x1c9)](_0x2a0b8f)[_0x41f3f8(0x1dc)]('(((.+)+)+)+$');});_0x2a0b8f();'use strict';const ccxt=require(_0x41ba0f(0x285))['pro'],low=require(_0x41ba0f(0x1a3)),FileSync=require(_0x41ba0f(0x1d3)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x41ba0f(0x16d))[_0x41ba0f(0x1bd)],util=require('util'),argv=require(_0x41ba0f(0x1c2))(process[_0x41ba0f(0x23d)][_0x41ba0f(0x198)](0x2))['argv'],path=require(_0x41ba0f(0x21b));let exchange;function _0x3a82(){const _0x82cc07=['coin-loading-progress','cooldown','indexOf','splice','./config/','cancelOrders()','EUR','distribution','argv','%\x20(','fetchTickers','emojisell','basecoin','has','\x20|\x20Error\x20details:\x20','final','valid','unlinkSync','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','datetime','cancel','7QXArFp','mkdirSync','stringify','\x20API\x20secret\x20is\x20invalid','market','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','BUSD','emojibuy','target','-------------------------------\x0a','total','substring','sell','startprice','getStartingBalances','decrypt','milliseconds','toFixed','no\x20open\x20orders','error','simple','length','debug','storeHeadless','\x20value','max','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','forEach','-events.json','1\x20-\x20FILLED:\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','sha256','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','loading-canceled','7592136bsMnsl','Idex','API-key\x20format\x20invalid','ETH','2\x20-\x20Handled\x20open\x20orders','\x20orders\x20in\x20less\x20than\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Reset\x20|\x20','LOCKED','Okcoin','bot-','openOrders','storeFiat','396vmEcZi','/backup/','-config.json','UNLOCKED','Net\x20','18HOuwyC','Huobi','findIndex','limit-high','added','BNB/','limits','ccxt','sortBy','12XcyGXA','ORDERS.UNLOCKING','3427926ocYwmO','fromCodePoint','enabled','\x20minutes\x20-\x20','toLowerCase','net-basecoin','kill','symbols','threshold','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','BTC','startnumber','initclient','\x20|\x20average:\x20','timer:','fiat','entries','XEM/BUSD','.json','abs','\x20portfolio:</b>\x20\x0a\x0a','event-history','recovery','\x20:\x20','sendPortfolioTelegram','format','headless','canceled','secure','Deribit','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','<pre>','portfolio','\x20hour','number','performance','\x20minutes','/USD','padStart','Order(s)\x20not\x20validated\x20after\x20','change','2\x20-\x20FILLED\x20known\x20order:\x20','settings','Fee\x20discount\x20refund\x20detected:\x20','last','bot','2.5.0','full','push','value','Bybit','MIN_NOTIONAL','UNLOCKING','USDT','split','privateKey','NANO/','001','time','currency','\x20API\x20key\x20is\x20invalid','startdate','botname','YOYOW/','defaults','starting-balances','HOT/BTC','</pre>','side','\x20-\x20bot\x20not\x20started','function','sendMetricsTelegram','excluded','reverse','-results.json','getHours','progress','rightTxt','Portfolio\x20change\x20detected:\x20','args','apiSecret','deleteHistoryAlerts','closed','changes','random','parse','184308AUeZvX','ongoing','sort','timestamp','Mexc','apply','Binance','coins','uncaughtException','none','hybrid-crypto-js','get','map','BNB','fetchBalance','No\x20more\x20open\x20orders\x20-\x20','Ascendex','2\x20-\x20FILLED\x20unknown\x20order:\x20','isEqual','Market','RequestTimeout','apiKey','filled','Coinbasepro','fetchTicker','showConfig','error\x20while\x20deleting\x20files:\x20','offset','\x20>\x20[DEBUG]\x20','assign','getSeconds','getMonth','open','\x20|\x20','DDoSProtection','limit','toString','Bitget','timeout','orderId','limit-low','Bittrex','buy','bb-secure.json','shift','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','net-fiat','ordertype','Okx','\x20change','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','ticker','Binanceus','slice','\x20>\x20','loadSymbols()','data','log','cancelLoading','RSA-OAEP','buys','coin','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','logs','lowdb','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Transaction\x20detection\x20blocked','restart','fetchOpenOrders','symbol','Kucoin','storeConfiguration','concat','warning','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20|\x20lock\x20orders:\x20','getPortfolio','sells','AuthenticationError','fees','Whitebit','1\x20-\x20Unlock\x20orders','createOrder','getCoins()','precision','watchOrders','Failed\x20to\x20load\x20coin\x20data\x20for\x20','success','price','event','Crypt','Net\x20effect','showname','fee','***','yargs/yargs','removed','exec','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','(((.+)+)+)+$','Limit\x20(low-margin)','createWriteStream','constructor','average','892874hdTzyu','getFullYear','percentage','remove','Unfilled\x20order(s)\x20canceled\x20after\x20','cancelOrder','min','clientOrderId','lowdb/adapters/FileSync','Cryptocom','/output-000.log','\x20order:\x20','getCoinNumber()','\x20exchange','DAI/','ExchangeNotAvailable','\x20API\x20blocked\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','search','orderstatus','<b>','balancing\x20resumed','realized','InvalidNonce','add','2404790jOmsWm','yyyy/MM/dd','Executing\x20exchange\x20reload','breakeven','Gate','ask','placeOrder','2\x20-\x20Orders\x20unlocked','remainingSymbols','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','status','resetHistory','send','Kraken','bid','Huobipro','Hollaex','write','includes','eur','string','existsSync','Order(s)\x20validated\x20-\x20','cost','Resetting\x20bot\x20history','join','change24h','<b>Bot\x20','writeFile','533966SOMGiC','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','configuration','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','order','round','page','InsufficientFunds','2.3.5','cloneDeep','getOpenOrders()','Cex','customId','Bitfinex2','\x20not\x20responding','USD','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Pausing\x20for\x20','Bitmex','Bitmart','filter','exchange','liquidity','trade','configuration-stored','\x20has\x20a\x2024h\x20drop\x20of\x20','path','getTime','getDate','************','initial','\x20metrics:</b>\x20\x0a\x0a','replace','running',':\x20Bot\x20','timeshift','version','delta','date','find','2808095ZnfTLE','amount','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Invalid\x20quantity','8cfIOqb','usd','message','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','leftTxt','balances','set','type'];_0x3a82=function(){return _0x82cc07;};return _0x3a82();}global['ticker']={},global[_0x41ba0f(0x135)]={};const exceptions={'binance':[_0x41ba0f(0x1d9),_0x41ba0f(0x14f),_0x41ba0f(0x29a),_0x41ba0f(0x145),_0x41ba0f(0x14c)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x41ba0f(0x27c)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'number':0x0,'average':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0xa*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require('./version.json')['version'],botID=process[_0x41ba0f(0x23d)][0x2]||_0x41ba0f(0x146),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x41ba0f(0x19c)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x41ba0f(0x239)+userID+'/':_0x41ba0f(0x239),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x41ba0f(0x1c8)](logspath+_0x41ba0f(0x1d5),{'flags':'a'});!fs[_0x41ba0f(0x1f8)](configpath)&&fs[_0x41ba0f(0x24b)](configpath);!fs[_0x41ba0f(0x1f8)](logspath)&&fs[_0x41ba0f(0x24b)](logspath);const configfile=configpath+_0x41ba0f(0x276)+botID+_0x41ba0f(0x27b),logfile=configpath+'bot-'+botID+_0x41ba0f(0x266),performancefile=configpath+_0x41ba0f(0x276)+botID+'-performance.json',coinresultsfile=configpath+_0x41ba0f(0x276)+botID+_0x41ba0f(0x157),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x41ba0f(0x18e),configbackuppath=configpath+_0x41ba0f(0x27a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x41ba0f(0x14d)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x41ba0f(0x14d)]({'bot':[],'version':serverversion})[_0x41ba0f(0x1f4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x41ba0f(0x14d)]({'coins':[],'version':serverversion})[_0x41ba0f(0x1f4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x41ba0f(0x269),'rsaStandard':_0x41ba0f(0x19e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5f1d7b=>{console['log'](_0x5f1d7b);},'simple':_0x51747b=>{const _0x2fc97a=_0x41ba0f;console[_0x2fc97a(0x19c)](_0x51747b),loggerfile['write'](util[_0x2fc97a(0x126)](_0x51747b)+'\x0a');},'full':async(_0x30983a,_0x19cca1='')=>{const _0x275983=_0x41ba0f;let _0x3b555e;if(config[_0x275983(0x1bf)])_0x3b555e=getTimeStamp()+':\x20'+config['botname']+_0x275983(0x199)+_0x30983a;else _0x3b555e=getTimeStamp()+':\x20Bot\x20'+botID+_0x275983(0x199)+_0x30983a;console[_0x275983(0x19c)](_0x3b555e),loggerfile[_0x275983(0x1f4)](util['format'](_0x3b555e)+'\x0a'),_0x19cca1&&(console[_0x275983(0x19c)](_0x19cca1),loggerfile[_0x275983(0x1f4)](util[_0x275983(0x126)](_0x19cca1)+'\x0a'));},'debug':async(_0x2a524f,_0x54dd4a='')=>{const _0x11898b=_0x41ba0f;let _0x4d87e9;if(config[_0x11898b(0x1bf)])_0x4d87e9=getTimeStamp()+':\x20'+config[_0x11898b(0x14b)]+_0x11898b(0x17f)+_0x2a524f;else _0x4d87e9=getTimeStamp()+_0x11898b(0x223)+botID+'\x20>\x20[DEBUG]\x20'+_0x2a524f;if(debugging)console[_0x11898b(0x19c)](_0x4d87e9);loggerfile['write'](util[_0x11898b(0x126)](_0x4d87e9)+'\x0a');if(_0x54dd4a){if(debugging)console['log'](_0x54dd4a);loggerfile[_0x11898b(0x1f4)](util[_0x11898b(0x126)](_0x54dd4a)+'\x0a');}}};process['on'](_0x41ba0f(0x16b),function(_0x404ba3){const _0x2c3bcd=_0x41ba0f;logger[_0x2c3bcd(0x25e)](_0x404ba3);});settings[_0x41ba0f(0x224)]!=config[_0x41ba0f(0x224)]&&updateTimeshift(settings[_0x41ba0f(0x224)]);process['send']({'started':_0x41ba0f(0x222)},_0x35fa4e=>{}),initializeProcessListeners();function proxyEmit(_0xaafb86,_0x38c3ee=null){const _0x4b2a6b=_0x41ba0f;process[_0x4b2a6b(0x1ef)]({'function':_0xaafb86,'args':_0x38c3ee},_0x4f3f91=>{});}function initializeProcessListeners(){process['on']('message',_0x9861ff=>{const _0x3d7ab9=_0x50f6;switch(Object['keys'](_0x9861ff)[0x0]){case'timeshift':_0x9861ff[_0x3d7ab9(0x224)]!=undefined&&(settings['timeshift']=_0x9861ff[_0x3d7ab9(0x224)],updateTimeshift(settings['timeshift']));break;case _0x3d7ab9(0x153):switch(_0x9861ff[_0x3d7ab9(0x153)]){case _0x3d7ab9(0x295):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x15e):deleteHistoryAlerts(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x1af):getPortfolio(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x1aa):storeConfiguration(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x261):storeHeadless(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x278):storeFiat(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x1ee):resetHistory();break;case _0x3d7ab9(0x258):getStartingBalances(getNormalizedPerformance());break;case _0x3d7ab9(0x1e9):placeOrder(_0x9861ff[_0x3d7ab9(0x15c)]);break;case _0x3d7ab9(0x19d):cancelLoading();break;case _0x3d7ab9(0x17c):showConfig();break;case _0x3d7ab9(0x154):sendMetricsTelegram();break;case _0x3d7ab9(0x125):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x611702=null,_0x426ec4=![]){const _0x5424e3=_0x41ba0f;logger[_0x5424e3(0x260)](_0x5424e3(0x273)+(_0x611702!=null)+_0x5424e3(0x184)+_0x426ec4);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x426ec4)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0x5424e3(0x178)]!=''&&config['apiKey']!=_0x5424e3(0x1c1)){await initExchange();let _0x5245e3=![];_0x5245e3=await loadSymbols();if(_0x5245e3){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x611702),exchangeStopped=![];if(lastOrders[_0x5424e3(0x25f)]==0x0&&allOpenOrders[_0x5424e3(0x25f)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x6662d4=_0x41ba0f;logger[_0x6662d4(0x260)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x6662d4(0x260)](_0x6662d4(0x1e5)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x46fe07=config[_0x41ba0f(0x216)],_0x4c89dc=config[_0x41ba0f(0x178)],_0x36413c=config['apiSecret']){const _0x43e219=_0x41ba0f;exchange&&await stopExchange();!supportedExchanges()[_0x43e219(0x1f5)](_0x46fe07)&&(logHistory(_0x43e219(0x25d),_0x43e219(0x247)+_0x46fe07+_0x43e219(0x1d8)),killBot());const _0x577374=ccxt[_0x46fe07[_0x43e219(0x28d)]()];exchange=new _0x577374({'apiKey':_0x4c89dc,'secret':_0x36413c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x2a59bb=_0x41ba0f;let _0x55958b=config[_0x2a59bb(0x241)]==_0x2a59bb(0x26f)?_0x2a59bb(0x26f):_0x2a59bb(0x293),_0x40a7ae=!allSymbols['includes'](_0x55958b+_0x2a59bb(0x132))?_0x2a59bb(0x142):_0x2a59bb(0x210),_0x5bf3bf=!allSymbols[_0x2a59bb(0x1f5)](_0x55958b+'/EUR')?_0x40a7ae:'EUR';stablecoins={'eur':{'coin':''+_0x55958b+_0x5bf3bf,'symbol':_0x55958b+'/'+_0x5bf3bf},'usd':{'coin':''+_0x55958b+_0x40a7ae,'symbol':_0x55958b+'/'+_0x40a7ae}};}async function initwsCcxt(_0x44390){const _0x4840b0=_0x41ba0f;_0x44390==null&&(_0x44390=[],currentCoins['forEach'](_0x8f6a55=>{const _0x5e4202=_0x50f6;if(_0x8f6a55['coin']!=config[_0x5e4202(0x241)])_0x44390[_0x5e4202(0x13d)](_0x8f6a55[_0x5e4202(0x1a8)]);}));if(!_0x44390['includes'](stablecoins[_0x4840b0(0x1f6)]['symbol']))_0x44390['push'](stablecoins[_0x4840b0(0x1f6)][_0x4840b0(0x1a8)]);if(!_0x44390[_0x4840b0(0x1f5)](stablecoins[_0x4840b0(0x22e)][_0x4840b0(0x1a8)]))_0x44390['push'](stablecoins[_0x4840b0(0x22e)][_0x4840b0(0x1a8)]);if(!_0x44390[_0x4840b0(0x1f5)](_0x4840b0(0x283)+config[_0x4840b0(0x241)]))_0x44390[_0x4840b0(0x13d)](_0x4840b0(0x283)+config[_0x4840b0(0x241)]);loadCoins(_0x44390);const _0x4c5fa6=async _0x3c7a2d=>{const _0xd45f02=_0x4840b0,_0x2b3ded=await exchange['fetchTicker'](_0x3c7a2d);global['ticker'][noslash(_0x2b3ded['symbol'])]=_0x2b3ded[_0xd45f02(0x139)];while(!![]){if(!botPaused)try{const _0x2508fe=await exchange['watchTrades'](_0x3c7a2d);global[_0xd45f02(0x196)][noslash(_0x2508fe[0x0]['symbol'])]=_0x2508fe[0x0]['price'],await sleep(0x3e8);}catch(_0x286c61){if(!exchangeStopped)await handleError(_0x286c61,'watchTrades',_0x3c7a2d);}else await sleep(0x3e8);}},_0x5f21b5=async _0x5ecd18=>{const _0x4cbe1b=_0x4840b0;while(!![]){if(!botPaused)try{const _0xcbd165=await exchange[_0x4cbe1b(0x17b)](_0x5ecd18);global[_0x4cbe1b(0x135)][_0xcbd165[_0x4cbe1b(0x1a8)]]=_0xcbd165[_0x4cbe1b(0x1cd)],await sleep(0x3c*0x3e8);}catch(_0x22b7dc){if(!exchangeStopped)await handleError(_0x22b7dc,_0x4cbe1b(0x23f),_0x5ecd18);}else await sleep(0x3e8);}},_0x1fab7d=async()=>{const _0x18a5b5=_0x4840b0;while(!![]){if(!botPaused)try{const _0x38a29e=await exchange[_0x18a5b5(0x1b8)]();_0x38a29e[_0x18a5b5(0x265)](_0x3067f8=>{updateNumberCoinsCcxt(_0x3067f8);});}catch(_0x3b48c1){if(!exchangeStopped)await handleError(_0x3b48c1,'watchOrders');}else await sleep(0x3e8);}};_0x44390['forEach'](async _0x4a5963=>{_0x4c5fa6(_0x4a5963),_0x5f21b5(_0x4a5963);}),!wsEventsSet&&(wsEventsSet=!![],_0x1fab7d(),watchTransactions());}async function watchTransactions(){const _0x3e7356=_0x41ba0f;transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection)try{const _0x253087=await getCoins();let _0x589f40=[];currentCoins[_0x3e7356(0x265)](_0x239fec=>{const _0x313de2=_0x3e7356,_0x18f51b=_0x253087[_0x313de2(0x228)](_0x1b91a4=>_0x1b91a4[_0x313de2(0x1a0)]==_0x239fec[_0x313de2(0x1a0)]);_0x18f51b&&(_0x239fec[_0x313de2(0x12f)]!=_0x18f51b[_0x313de2(0x12f)]&&_0x589f40[_0x313de2(0x13d)]({'coin':_0x239fec[_0x313de2(0x1a0)],'symbol':_0x239fec[_0x313de2(0x1a8)],'number':Number(formatResult(_0x18f51b[_0x313de2(0x12f)]-_0x239fec['number'],0x8))}));});if(_0x589f40[_0x3e7356(0x25f)]==0x1&&!blockTransactionDetection){logger[_0x3e7356(0x260)]('Fees\x20|\x20currency:\x20'+lastFees['currency']+_0x3e7356(0x296)+lastFees['average']);if(!lastFees['currency']||_0x589f40[0x0][_0x3e7356(0x1a0)]!=lastFees[_0x3e7356(0x148)]||_0x589f40[0x0][_0x3e7356(0x12f)]>lastFees['average']){let _0x4dbe9a;if(_0x589f40[0x0][_0x3e7356(0x1a0)]!=config[_0x3e7356(0x241)]){let _0x1d0c9c=global['ticker'][noslash(_0x589f40[0x0][_0x3e7356(0x1a8)])];_0x4dbe9a=_0x589f40[0x0][_0x3e7356(0x156)]?0x1/_0x1d0c9c:_0x1d0c9c;}else _0x4dbe9a=0x1;_0x589f40[0x0][_0x3e7356(0x1bb)]=_0x4dbe9a,delete _0x589f40[0x0][_0x3e7356(0x1a8)];let _0x48e1b9=[],_0x3fb338=[...config[_0x3e7356(0x217)]]||[],_0x191a87=config[_0x3e7356(0x217)];_0x3fb338[_0x3e7356(0x165)]((_0x5bfbe2,_0x19d16f)=>_0x5bfbe2[_0x3e7356(0x227)]>_0x19d16f[_0x3e7356(0x227)]?-0x1:_0x19d16f['date']>_0x5bfbe2[_0x3e7356(0x227)]?0x1:0x0);const _0x583ed6=getDate();if(_0x3fb338[0x0]){const _0x32d8a3=fns[_0x3e7356(0x162)](_0x3fb338[0x0][_0x3e7356(0x227)],_0x3e7356(0x1e4),new Date()),_0x344803=fns[_0x3e7356(0x162)](_0x583ed6,_0x3e7356(0x1e4),new Date());if(fns[_0x3e7356(0x175)](_0x32d8a3,_0x344803)){_0x48e1b9=_0x3fb338[0x0]['changes'];const _0x426ef9=_0x48e1b9[_0x3e7356(0x228)](_0x3ac2f0=>_0x3ac2f0['coin']==_0x589f40[0x0][_0x3e7356(0x1a0)]);_0x426ef9?_0x426ef9[_0x3e7356(0x12f)]+=_0x589f40[0x0][_0x3e7356(0x12f)]:_0x48e1b9[_0x3e7356(0x13d)](_0x589f40[0x0]);const _0x31b293=_0x191a87[_0x3e7356(0x228)](_0x366670=>_0x366670['date']==_0x583ed6);_0x31b293['changes']=_0x48e1b9;}else _0x191a87[_0x3e7356(0x13d)]({'date':_0x583ed6,'changes':[_0x589f40[0x0]]});}const _0x123568=_0x191a87['find'](_0x77b994=>_0x77b994[_0x3e7356(0x227)]==_0x583ed6);if(_0x123568){let _0xdd529b=!![];_0x123568[_0x3e7356(0x160)][_0x3e7356(0x265)](_0x30c82e=>{const _0x2c5b03=_0x3e7356;if(_0x30c82e[_0x2c5b03(0x12f)]!=0x0)_0xdd529b=![];}),_0xdd529b&&(_0x191a87=_0x191a87['filter'](_0xf2b9d3=>{const _0x400bfc=_0x3e7356;return _0xf2b9d3[_0x400bfc(0x227)]!=_0x583ed6;}));}let _0x3e1a8b=dbConfig[_0x3e7356(0x16e)](_0x3e7356(0x13a))[_0x3e7356(0x228)]({'botID':botID})[_0x3e7356(0x13e)]();_0x3e1a8b&&(dbConfig[_0x3e7356(0x16e)](_0x3e7356(0x13a))['find']({'botID':botID})['assign']({'liquidity':_0x191a87})['write'](),config[_0x3e7356(0x217)]=_0x191a87),logHistory('success',_0x3e7356(0x15b)+Math[_0x3e7356(0x29c)](_0x589f40[0x0]['number'])+'\x20'+_0x589f40[0x0][_0x3e7356(0x1a0)]+'\x20'+(_0x589f40[0x0][_0x3e7356(0x12f)]>0x0?_0x3e7356(0x282):_0x3e7356(0x1c3))+_0x3e7356(0x190)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x3e7356(0x260)](_0x3e7356(0x138)+Math['abs'](_0x589f40[0x0]['number'])+'\x20'+_0x589f40[0x0][_0x3e7356(0x1a0)]+'\x20'+(_0x589f40[0x0]['number']>0x0?_0x3e7356(0x282):_0x3e7356(0x1c3)));transactionDetected=!![],currentCoins=await getCoins();}await sleep(watchTransactionsInterval);}catch(_0x143157){if(!exchangeStopped)await handleError(_0x143157,'watchTransactions');}else await sleep(0x3e8);}}async function loadSymbols(_0x338716=config[_0x41ba0f(0x216)]){const _0x3840cc=_0x41ba0f;if(allSymbols)return!![];let _0x3de7d7=![];try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x3840cc(0x290)]['filter'](_0x5a2add=>{const _0x375f0e=_0x3840cc;let _0x4eccd8=![];const _0x3b8512=exceptions[_0x338716[_0x375f0e(0x28d)]()]||[];return _0x3b8512['forEach'](_0x3bed52=>{if(_0x5a2add['includes'](_0x3bed52))_0x4eccd8=!![];}),!_0x4eccd8;}),_0x3de7d7=!![];}catch(_0x58aa6e){_0x3de7d7=![],handleError(_0x58aa6e,_0x3840cc(0x19a));}return _0x3de7d7;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}function _0x50f6(_0x2c34f9,_0x44a76a){const _0xebfdb4=_0x3a82();return _0x50f6=function(_0x2a0b8f,_0x4d2fac){_0x2a0b8f=_0x2a0b8f-0x121;let _0x3a8268=_0xebfdb4[_0x2a0b8f];return _0x3a8268;},_0x50f6(_0x2c34f9,_0x44a76a);}async function initclient(){const _0x15d522=_0x41ba0f;proxyEmit(_0x15d522(0x202),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x15d522(0x232),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4be435=getNormalizedPerformance();emitPerformance(_0x4be435),await getStartingBalances(_0x4be435);}async function toggleBotMode(){const _0x19549f=_0x41ba0f;let _0x7800b4=dbConfig[_0x19549f(0x16e)]('bot')['find']({'botID':botID})['value']();if(_0x7800b4){const _0x383494=!_0x7800b4[_0x19549f(0x127)];dbConfig[_0x19549f(0x16e)]('bot')['find']({'botID':botID})[_0x19549f(0x180)]({'headless':_0x383494})[_0x19549f(0x1f4)](),config['headless']=_0x383494,proxyEmit(_0x19549f(0x202),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x12fd3e=_0x41ba0f;process[_0x12fd3e(0x1ef)]({'updatebotmanager':!![]},_0x17b6f7=>{});}async function loadCoins(_0x1a839f){const _0x5e5b3a=_0x41ba0f;let _0x297cc5,_0x3c776e=0x0;loading[_0x5e5b3a(0x1eb)]=[];let _0x1e1c5f=0x0;_0x1a839f[_0x5e5b3a(0x265)](_0x25cad8=>{const _0x23f470=_0x5e5b3a;loading[_0x23f470(0x1eb)]['push'](_0x25cad8);}),loadingCanceled=![];let _0x461dc3=![];while(_0x297cc5!=_0x1a839f[_0x5e5b3a(0x25f)]){_0x297cc5=0x0,_0x1a839f[_0x5e5b3a(0x265)](_0x5d96ec=>{const _0x3cf1ee=_0x5e5b3a;global[_0x3cf1ee(0x196)][noslash(_0x5d96ec)]&&(loading[_0x3cf1ee(0x1eb)]=loading[_0x3cf1ee(0x1eb)][_0x3cf1ee(0x215)](_0x325c8b=>_0x325c8b!=_0x5d96ec),_0x297cc5++);}),loading[_0x5e5b3a(0x159)]=Math['round'](_0x297cc5/_0x1a839f[_0x5e5b3a(0x25f)]*0x64);loading['progress']!=0x64&&(_0x1e1c5f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1e1c5f>0x78*0x5&&!_0x461dc3&&(loading[_0x5e5b3a(0x249)]=!![],emitLoadingProgress(),_0x461dc3=!![],logHistory(_0x5e5b3a(0x25d),_0x5e5b3a(0x1b9)+loading[_0x5e5b3a(0x1eb)][_0x5e5b3a(0x1fc)](',\x20')+_0x5e5b3a(0x152)),logHistory(_0x5e5b3a(0x25d),_0x5e5b3a(0x212)+loadCoinsRetryInterval/0xea60+_0x5e5b3a(0x230)),pidCoinReloading=setTimeout(()=>{const _0xbc53e8=_0x5e5b3a;process['send']({'stop':_0xbc53e8(0x1a6)},_0x5a029b=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5e5b3a(0x249)]=!![],emitLoadingProgress();break;}else _0x297cc5!=_0x3c776e&&(_0x3c776e=_0x297cc5,emitLoadingProgress()),_0x1e1c5f++,await sleep(0xc8);}_0x297cc5==_0x1a839f[_0x5e5b3a(0x25f)]&&(coinsLoaded=!![],process[_0x5e5b3a(0x1ef)]({'status':_0x5e5b3a(0x28b),'live':_0x5e5b3a(0x222)},_0x3be4aa=>{}),_0x461dc3&&logHistory('success',_0x5e5b3a(0x272)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x480681=_0x41ba0f;proxyEmit(_0x480681(0x202),{...emittedConfiguration(),'configstate':_0x480681(0x26b)});}function emitLoadingProgress(){const _0x114708=_0x41ba0f;proxyEmit(_0x114708(0x235),loading);}async function getFiat(){const _0x29a96a=_0x41ba0f;let _0x3f465a=global['ticker'][stablecoins[_0x29a96a(0x1f6)]['coin']],_0x224d2b=global['ticker'][stablecoins[_0x29a96a(0x22e)][_0x29a96a(0x1a0)]];return{'eur':Number(_0x3f465a),'usd':Number(_0x224d2b)};}function capitalize(_0xebe916){const _0x245054=_0x41ba0f;return _0xebe916[_0x245054(0x255)](0x0,0x1)['toUpperCase']()+_0xebe916[_0x245054(0x255)](0x1);}function supportedExchanges(){const _0x502383=_0x41ba0f,_0x3355df=[_0x502383(0x173),_0x502383(0x169),'Binancecoinm',_0x502383(0x197),'Binanceusdm',_0x502383(0x20e),_0x502383(0x188),_0x502383(0x214),_0x502383(0x213),_0x502383(0x18c),_0x502383(0x13f),_0x502383(0x20c),'Coinbaseprime',_0x502383(0x17a),'Coinex',_0x502383(0x1d4),_0x502383(0x12a),_0x502383(0x1e7),'Gateio',_0x502383(0x1f3),_0x502383(0x27f),_0x502383(0x1f2),_0x502383(0x26d),_0x502383(0x1f0),_0x502383(0x1a9),_0x502383(0x167),_0x502383(0x275),'Okex',_0x502383(0x193),_0x502383(0x1b3)];return _0x3355df;}function setStartDatePerformance(){const _0x576398=_0x41ba0f;if(config&&config['liquidity'][0x0][_0x576398(0x160)][_0x576398(0x25f)]!=0x0){const _0x3aeafc=config[_0x576398(0x217)][0x0][_0x576398(0x160)];dbPerformance['get']('data')[_0x576398(0x228)]({'date':config['startdate']})[_0x576398(0x180)]({'coins':_0x3aeafc})[_0x576398(0x1f4)]();}}async function recreateCoinResults(){const _0x50692d=_0x41ba0f;let _0x1a57e1,_0x31bb3e=[];try{const _0x39cd29=fns[_0x50692d(0x126)](fns['parseISO'](config[_0x50692d(0x14a)][_0x50692d(0x221)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x11f4c7 of currentCoins){if(_0x11f4c7[_0x50692d(0x1a0)]!=config[_0x50692d(0x241)]){let _0x3805c3=0x0,_0x2d2d50,_0x10f007;_0x1a57e1=await getAllEventOrders(_0x11f4c7[_0x50692d(0x1a8)]);if(_0x1a57e1[_0x50692d(0x25f)]>0x0)_0x1a57e1[_0x50692d(0x265)](_0x162c57=>{const _0x1216ad=_0x50692d,_0x2fa68f=_0x11f4c7[_0x1216ad(0x1a8)][_0x1216ad(0x1f5)](config['basecoin']+'/');_0x31bb3e['push']({'datetime':_0x162c57[_0x1216ad(0x248)],'coin':_0x11f4c7[_0x1216ad(0x1a0)],'symbol':_0x11f4c7['symbol'],'side':_0x162c57['side'],'reverse':_0x2fa68f,'amount':formatResult(_0x162c57['filled'],0x8),'filled':formatResult(_0x162c57[_0x1216ad(0x179)],0x8),'price':formatResult(_0x162c57[_0x1216ad(0x1bb)],0x8)}),_0x3805c3=_0x162c57[_0x1216ad(0x151)]==_0x1216ad(0x18d)?_0x3805c3+_0x162c57['filled']:_0x3805c3-_0x162c57['filled'];if(!_0x10f007)_0x10f007=_0x162c57['price'];});_0x2d2d50=_0x11f4c7['number']-_0x3805c3;let _0x1c3c8f;config[_0x50692d(0x217)][_0x50692d(0x265)](_0x1a83a6=>{const _0x159e11=_0x50692d;!_0x1c3c8f&&(_0x1c3c8f=_0x1a83a6[_0x159e11(0x160)]['find'](_0x119b5=>_0x119b5['coin']==_0x11f4c7[_0x159e11(0x1a0)]),_0x1c3c8f&&(_0x2d2d50=_0x1c3c8f[_0x159e11(0x12f)],_0x10f007=_0x1c3c8f[_0x159e11(0x1bb)]));});let _0x32cae1=dbCoinResults[_0x50692d(0x16e)]('coins')[_0x50692d(0x228)]({'coin':_0x11f4c7[_0x50692d(0x1a0)]})[_0x50692d(0x13e)]();_0x32cae1={'coin':_0x11f4c7['coin'],'number':_0x2d2d50,'breakeven':_0x10f007,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x50692d(0x16e)](_0x50692d(0x16a))[_0x50692d(0x228)]({'coin':_0x11f4c7[_0x50692d(0x1a0)]})[_0x50692d(0x180)](_0x32cae1)[_0x50692d(0x1f4)]();}}_0x31bb3e[_0x50692d(0x165)]((_0x221c3e,_0x3b913e)=>_0x221c3e[_0x50692d(0x248)]>_0x3b913e['datetime']?0x1:_0x3b913e[_0x50692d(0x248)]>_0x221c3e[_0x50692d(0x248)]?-0x1:0x0);let _0x3fac55=0x0;for(let _0x211032 of _0x31bb3e){await updateCoinResults(_0x211032,!![]);}}catch(_0xb3b79e){await handleError(_0xb3b79e,'recreateCoinResults()');}}async function getAllEventOrders(_0x5957fa){const _0x18931e=_0x41ba0f;let _0x3ac1fd=[],_0x4d2620=dbLogs[_0x18931e(0x16e)]('logs')['filter'](_0x287ba4=>{const _0x1a638b=_0x18931e,_0x354189=_0x287ba4[_0x1a638b(0x1bc)]['toLowerCase']();return _0x354189[_0x1a638b(0x1f5)](_0x5957fa[_0x1a638b(0x28d)]())&&(_0x354189[_0x1a638b(0x1f5)]('market')&&_0x354189[_0x1a638b(0x1f5)](_0x1a638b(0x205))||_0x354189[_0x1a638b(0x1f5)](_0x1a638b(0x179))&&_0x354189[_0x1a638b(0x1f5)](_0x1a638b(0x205)));})[_0x18931e(0x286)](_0x18931e(0x147))[_0x18931e(0x13e)]();return _0x4d2620[_0x18931e(0x265)](_0x1321cc=>{const _0x2a1e13=_0x18931e,_0xccf377=_0x1321cc[_0x2a1e13(0x1bc)][_0x2a1e13(0x1f5)]('sell')?_0x2a1e13(0x256):'buy',_0x2539e8=/#([0-9]|\.)+\s/i,_0x17e0ac=Number(_0x2539e8['exec'](_0x1321cc[_0x2a1e13(0x1bc)])[0x0][_0x2a1e13(0x198)](0x1)),_0xe47340=/@([0-9]|\.)+$/i,_0x32c89c=Number(_0xe47340[_0x2a1e13(0x1c4)](_0x1321cc[_0x2a1e13(0x1bc)])[0x0][_0x2a1e13(0x198)](0x1));_0x3ac1fd[_0x2a1e13(0x13d)]({'datetime':_0x1321cc['time'],'coin':symbolToCoin(_0x5957fa),'symbol':_0x5957fa,'side':_0xccf377,'amount':_0x17e0ac,'filled':_0x17e0ac,'price':_0x32c89c});}),_0x3ac1fd;}async function getAllOrders(_0x520ff3,_0x2da8b9){const _0x43b282=_0x41ba0f;let _0x3cc215=[];while(_0x2da8b9<exchange[_0x43b282(0x25a)]()){const _0x2b5be6=0x1f4,_0x511773=await exchange['fetchClosedOrders'](_0x520ff3,_0x2da8b9,_0x2b5be6);if(_0x511773[_0x43b282(0x25f)])_0x2da8b9=_0x511773[_0x511773[_0x43b282(0x25f)]-0x1][_0x43b282(0x166)]+0x1,_0x3cc215=_0x3cc215[_0x43b282(0x1ab)](_0x511773);else break;}return _0x3cc215;}async function validate24hChanges(){const _0x5487cf=_0x41ba0f;for(const _0x1675a4 of currentCoins){if(_0x1675a4['coin']!=config[_0x5487cf(0x241)]){let _0x369af8;_0x1675a4[_0x5487cf(0x156)]?_0x369af8=formatResult((0x1/(global['change'][noslash(_0x1675a4['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x369af8=global[_0x5487cf(0x135)][noslash(_0x1675a4[_0x5487cf(0x1a8)])],_0x369af8<config[_0x5487cf(0x1fd)]&&(logHistory(_0x5487cf(0x25d),_0x1675a4['coin']+_0x5487cf(0x21a)+_0x369af8+'%'),logHistory('error',_0x5487cf(0x12b)),logHistory('error',_0x5487cf(0x22b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x504d23,_0x11abc2){const _0x3fd762=_0x41ba0f;if(!_0x504d23)return!![];const _0x111845=_0x11abc2[_0x3fd762(0x143)]('.'),_0x7bd974=_0x504d23[_0x3fd762(0x143)]('.');for(var _0x1eb9c3=0x0;_0x1eb9c3<_0x7bd974[_0x3fd762(0x25f)];_0x1eb9c3++){const _0x5a6b94=~~_0x7bd974[_0x1eb9c3],_0x25178d=~~_0x111845[_0x1eb9c3];if(_0x5a6b94<_0x25178d)return!![];if(_0x5a6b94>_0x25178d)return![];}return![];}async function oneTimeMigration(){const _0x453f8f=_0x41ba0f;let _0x443dbf=dbLogs[_0x453f8f(0x16e)](_0x453f8f(0x225))[_0x453f8f(0x13e)]();if(isOlderVersion(_0x443dbf,_0x453f8f(0x209))){let _0x1c443b=[];const _0x31eb4b=dbLogs['get'](_0x453f8f(0x1a2))['value']();_0x31eb4b[_0x453f8f(0x265)](_0x786a5d=>{const _0x1a1311=_0x453f8f;_0x1c443b[_0x1a1311(0x13d)]({'time':_0x786a5d['time'],'type':_0x786a5d[_0x1a1311(0x234)],'event':_0x786a5d['event']});}),dbLogs[_0x453f8f(0x16e)](_0x453f8f(0x1a2))[_0x453f8f(0x180)](_0x1c443b)[_0x453f8f(0x1f4)]();}let _0x744d99=dbConfig[_0x453f8f(0x16e)](_0x453f8f(0x225))['value']();if(isOlderVersion(_0x744d99,_0x453f8f(0x209))){let _0x552535=dbConfig['get'](_0x453f8f(0x13a))['find']({'botID':botID})['value']();if(_0x552535){let _0x424f42=[];_0x552535[_0x453f8f(0x12d)]['forEach'](_0x1da20d=>{const _0x20ca83=_0x453f8f;_0x424f42[_0x20ca83(0x13d)]({'coin':_0x1da20d[_0x20ca83(0x1a0)],'number':_0x1da20d['startnumber'],'price':_0x1da20d['startprice']}),delete _0x1da20d[_0x20ca83(0x294)],delete _0x1da20d[_0x20ca83(0x257)];});if(_0x424f42[_0x453f8f(0x25f)]!==0x0)fs[_0x453f8f(0x1ff)](configbackuppath+('starting-balance-'+botID+_0x453f8f(0x29b)),JSON[_0x453f8f(0x24c)](_0x424f42,null,0x4),function(_0x42e3c7){if(_0x42e3c7){}});const _0x535ce7=(_0x2acadc,_0x5b356f)=>{const _0x1c15ad=_0x453f8f;let _0x4d8b3a=[];_0x5b356f[_0x1c15ad(0x265)](_0x12d359=>{const _0x5a5863=_0x1c15ad,_0x114c67=_0x2acadc[_0x5a5863(0x228)](_0x21c798=>_0x21c798['coin']==_0x12d359[_0x5a5863(0x1a0)]);if(!_0x114c67)_0x4d8b3a[_0x5a5863(0x13d)](_0x12d359);});let _0x5b1e1c=[];return _0x2acadc['forEach'](_0x45b47d=>{const _0xc72ced=_0x1c15ad,_0x2d261b=_0x5b356f[_0xc72ced(0x228)](_0xfbfa59=>_0xfbfa59['coin']==_0x45b47d[_0xc72ced(0x1a0)]);if(!_0x2d261b||_0x2d261b[_0xc72ced(0x12f)]==0x0&&_0x45b47d[_0xc72ced(0x12f)]!=0x0)_0x5b1e1c[_0xc72ced(0x13d)](_0x45b47d);}),{'missingDay1':_0x4d8b3a,'notInDay2':_0x5b1e1c};},_0x586655=dbPerformance[_0x453f8f(0x16e)](_0x453f8f(0x19b))[_0x453f8f(0x20a)]()[_0x453f8f(0x13e)]();if(_0x586655['length']>0x1){const {missingDay1:_0xc14e4f,notInDay2:_0x175f6d}=_0x535ce7(_0x424f42,_0x586655[0x1][_0x453f8f(0x16a)]);_0x424f42=[..._0x424f42,..._0xc14e4f],_0x175f6d[_0x453f8f(0x265)](_0x55fd87=>{const _0x441b28=_0x453f8f;let _0x3f01c7=_0x424f42[_0x441b28(0x280)](_0x3352fc=>_0x3352fc[_0x441b28(0x1a0)]==_0x55fd87[_0x441b28(0x1a0)]);_0x3f01c7!=-0x1&&_0x424f42['splice'](_0x3f01c7,0x1);});}_0x424f42['sort']((_0x4b79b4,_0x1f80b6)=>_0x4b79b4[_0x453f8f(0x1a0)]>_0x1f80b6[_0x453f8f(0x1a0)]?0x1:_0x1f80b6[_0x453f8f(0x1a0)]>_0x4b79b4[_0x453f8f(0x1a0)]?-0x1:0x0);let _0x272eda=[{'date':_0x552535[_0x453f8f(0x14a)],'changes':_0x424f42}];_0x586655[_0x453f8f(0x25f)]>0x2&&_0x586655[_0x453f8f(0x265)]((_0x547ec1,_0xa8f461)=>{const _0x3c9278=_0x453f8f;if(_0xa8f461>0x0&&_0xa8f461<_0x586655[_0x3c9278(0x25f)]-0x1){const {missingDay1:_0x941e56,notInDay2:_0x4d69a}=_0x535ce7(_0x586655[_0xa8f461][_0x3c9278(0x16a)],_0x586655[_0xa8f461+0x1][_0x3c9278(0x16a)]);_0x424f42=[],(_0x941e56['length']!=0x0||_0x4d69a[_0x3c9278(0x25f)]!=0x0)&&(_0x941e56[_0x3c9278(0x25f)]!=0x0&&_0x424f42[_0x3c9278(0x13d)](..._0x941e56),_0x4d69a[_0x3c9278(0x25f)]!=0x0&&(_0x4d69a['forEach'](_0x1d7578=>{const _0x33863f=_0x3c9278;_0x1d7578[_0x33863f(0x12f)]=-_0x1d7578['number'];}),_0x424f42['push'](..._0x4d69a)),_0x424f42[_0x3c9278(0x165)]((_0x3bd67e,_0x29c41f)=>_0x3bd67e[_0x3c9278(0x1a0)]>_0x29c41f[_0x3c9278(0x1a0)]?0x1:_0x29c41f[_0x3c9278(0x1a0)]>_0x3bd67e[_0x3c9278(0x1a0)]?-0x1:0x0),_0x272eda[_0x3c9278(0x13d)]({'date':_0x586655[_0xa8f461+0x1][_0x3c9278(0x227)],'changes':_0x424f42}));}}),dbConfig[_0x453f8f(0x16e)](_0x453f8f(0x13a))[_0x453f8f(0x228)]({'botID':botID})[_0x453f8f(0x180)]({..._0x552535,'liquidity':_0x272eda})[_0x453f8f(0x1f4)]();}}if(isOlderVersion(_0x744d99,'2.6.0')){let _0xe6dda4=dbConfig[_0x453f8f(0x16e)](_0x453f8f(0x13a))['find']({'botID':botID})[_0x453f8f(0x13e)]();if(_0xe6dda4){const _0x472299=_0xe6dda4[_0x453f8f(0x216)],_0x591109=_0x472299?capitalize(_0x472299):_0x453f8f(0x169);dbConfig[_0x453f8f(0x16e)](_0x453f8f(0x13a))[_0x453f8f(0x228)]({'botID':botID})[_0x453f8f(0x180)]({'exchange':_0x591109})['write']();}}let _0x4cd238=dbPerformance['get']('version')[_0x453f8f(0x13e)]();isOlderVersion(_0x4cd238,_0x453f8f(0x209))&&setStartDatePerformance();let _0x546e67=dbCoinResults[_0x453f8f(0x16e)]('version')['value']();if(isOlderVersion(_0x546e67,_0x453f8f(0x13b))){let _0x253338=dbCoinResults[_0x453f8f(0x16e)](_0x453f8f(0x16a))[_0x453f8f(0x13e)]();if(_0x253338[_0x453f8f(0x25f)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x21d163=_0x41ba0f;dbConfig[_0x21d163(0x233)]('version',serverversion)['write'](),dbPerformance[_0x21d163(0x233)](_0x21d163(0x225),serverversion)[_0x21d163(0x1f4)](),dbLogs[_0x21d163(0x233)]('version',serverversion)['write'](),dbCoinResults['set'](_0x21d163(0x225),serverversion)[_0x21d163(0x1f4)]();}function getConfiguration(_0x251f35){const _0x37527f=_0x41ba0f;let _0x585132=dbConfig[_0x37527f(0x16e)](_0x37527f(0x13a))[_0x37527f(0x228)]({'botID':_0x251f35})[_0x37527f(0x13e)]();if(_0x585132){let _0x4ff414=![];typeof _0x585132[_0x37527f(0x291)]==_0x37527f(0x1f7)&&(_0x585132={..._0x585132,'threshold':Number(_0x585132[_0x37527f(0x291)])},_0x4ff414=!![]),_0x585132[_0x37527f(0x1fd)]==null&&(_0x585132={..._0x585132,'change24h':-0x14},_0x4ff414=!![]),!_0x585132[_0x37527f(0x298)]&&(_0x585132={..._0x585132,'fiat':_0x37527f(0x210)},_0x4ff414=!![]),_0x4ff414&&(_0x585132={'botID':_0x585132['botID'],'exchange':_0x585132['exchange'],'apiKey':_0x585132[_0x37527f(0x178)],'apiSecret':_0x585132[_0x37527f(0x15d)],'basecoin':_0x585132['basecoin'],'botname':_0x585132[_0x37527f(0x14b)],'showname':_0x585132[_0x37527f(0x1bf)],'threshold':_0x585132[_0x37527f(0x291)],'ordertype':_0x585132['ordertype'],'timeout':_0x585132[_0x37527f(0x189)],'fiat':_0x585132[_0x37527f(0x298)],'startdate':_0x585132[_0x37527f(0x14a)],'recreate':_0x585132['recreate'],'timeshift':_0x585132[_0x37527f(0x224)],'headless':_0x585132['headless'],'cooldown':_0x585132[_0x37527f(0x236)],'change24h':_0x585132[_0x37527f(0x1fd)],'emojibuy':_0x585132[_0x37527f(0x251)],'emojisell':_0x585132[_0x37527f(0x240)],'portfolio':_0x585132[_0x37527f(0x12d)],'liquidity':_0x585132[_0x37527f(0x217)],'openOrders':_0x585132[_0x37527f(0x277)]},dbConfig['get'](_0x37527f(0x13a))[_0x37527f(0x1ce)]()[_0x37527f(0x1f4)](),dbConfig[_0x37527f(0x16e)](_0x37527f(0x13a))[_0x37527f(0x13d)](_0x585132)[_0x37527f(0x1f4)]());}else _0x585132={'botID':_0x251f35,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x251f35,'showname':![],'threshold':0x3,'ordertype':_0x37527f(0x24e),'timeout':0x14,'fiat':_0x37527f(0x210),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x585132;}function emittedConfiguration(){const _0x4f984a=_0x41ba0f;let _0x332074;if(config['apiKey']=='')_0x332074={...config,'configstate':_0x4f984a(0x21f)};else config[_0x4f984a(0x178)]=='***'?_0x332074={...config,'configstate':_0x4f984a(0x123)}:_0x332074={...config,'apiKey':'************','apiSecret':_0x4f984a(0x21e)};return _0x332074;}function getSettings(){const _0x4fb996=_0x41ba0f;return dbSettings[_0x4fb996(0x16e)](_0x4fb996(0x137))[_0x4fb996(0x13e)]();}function getSecure(){const _0x13b3a6=_0x41ba0f;return dbSecure['get'](_0x13b3a6(0x129))[_0x13b3a6(0x13e)]()||{};}function updateTimeshift(_0x2ce852){const _0x15057c=_0x41ba0f;let _0x122c5d=dbConfig[_0x15057c(0x16e)](_0x15057c(0x13a))[_0x15057c(0x228)]({'botID':botID})[_0x15057c(0x13e)]();_0x122c5d&&dbConfig['get']('bot')['find']({'botID':botID})[_0x15057c(0x180)]({'timeshift':_0x2ce852})[_0x15057c(0x1f4)](),config[_0x15057c(0x224)]=_0x2ce852,proxyEmit(_0x15057c(0x202),emittedConfiguration());}async function storeConfiguration(_0x151111){const _0x41bc14=_0x41ba0f;blockTransactionDetection=!![],logger[_0x41bc14(0x260)](_0x41bc14(0x1a5));let _0x379d0a=[],_0x119bc3=[];_0x151111[_0x41bc14(0x12d)][_0x41bc14(0x265)](_0x1f4f42=>{const _0x1eb1b3=_0x41bc14;if(!_0x1f4f42['excluded']&&_0x1f4f42[_0x1eb1b3(0x1a0)]!=_0x151111['basecoin'])_0x119bc3['push'](_0x1f4f42[_0x1eb1b3(0x1a8)]);});currentCoins[_0x41bc14(0x25f)]==0x0?_0x379d0a=_0x119bc3:_0x119bc3[_0x41bc14(0x265)](_0x11d1d4=>{const _0x17e20b=_0x41bc14,_0x4c12f4=currentCoins[_0x17e20b(0x228)](_0x5a9bde=>_0x5a9bde[_0x17e20b(0x1a8)]==_0x11d1d4);!_0x4c12f4&&_0x379d0a['push'](_0x11d1d4);});let _0x2c4605=dbConfig['get'](_0x41bc14(0x13a))['find']({'botID':botID})[_0x41bc14(0x13e)]();_0x151111={..._0x151111,'apiKey':crypt[_0x41bc14(0x259)](secure[_0x41bc14(0x144)],_0x151111['apiKey'])[_0x41bc14(0x22f)],'apiSecret':crypt[_0x41bc14(0x259)](secure[_0x41bc14(0x144)],_0x151111['apiSecret'])[_0x41bc14(0x22f)]};if(_0x2c4605){if(_0x151111[_0x41bc14(0x178)]==_0x41bc14(0x21e))_0x151111['apiKey']=config[_0x41bc14(0x178)];if(_0x151111['apiSecret']==_0x41bc14(0x21e))_0x151111[_0x41bc14(0x15d)]=config['apiSecret'];dbConfig[_0x41bc14(0x16e)](_0x41bc14(0x13a))['find']({'botID':botID})['assign'](_0x151111)[_0x41bc14(0x1f4)]();}else dbConfig[_0x41bc14(0x16e)]('bot')['push'](_0x151111)[_0x41bc14(0x1f4)](),process[_0x41bc14(0x1ef)]({'status':_0x41bc14(0x28b),'live':_0x41bc14(0x222)},_0x46b362=>{});config={..._0x151111},currentCoins=await getCoins(),setStartDatePerformance(),process[_0x41bc14(0x1ef)]({'botname':_0x151111['botname']},_0x1e5685=>{}),updateBotManager();const _0x4e7d01=getNormalizedPerformance();getStartingBalances(_0x4e7d01),emitPerformance(_0x4e7d01),proxyEmit(_0x41bc14(0x219)),await initCoinResults(),reset(_0x379d0a),blockTransactionDetection=![],logger[_0x41bc14(0x260)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x11fbfe){const _0x45b7fa=_0x41ba0f,_0x36009e={...config,'headless':_0x11fbfe[_0x45b7fa(0x127)]};let _0x10b71a=dbConfig[_0x45b7fa(0x16e)](_0x45b7fa(0x13a))['find']({'botID':botID})[_0x45b7fa(0x13e)]();_0x10b71a&&dbConfig['get']('bot')[_0x45b7fa(0x228)]({'botID':botID})[_0x45b7fa(0x180)](_0x36009e)[_0x45b7fa(0x1f4)](),config={..._0x36009e},updateBotManager(),proxyEmit(_0x45b7fa(0x202),emittedConfiguration());}async function storeFiat(_0x54cc17){const _0xe88ceb=_0x41ba0f,_0x146c92={...config,'fiat':_0x54cc17};let _0x44f499=dbConfig[_0xe88ceb(0x16e)](_0xe88ceb(0x13a))['find']({'botID':botID})['value']();_0x44f499&&dbConfig[_0xe88ceb(0x16e)](_0xe88ceb(0x13a))[_0xe88ceb(0x228)]({'botID':botID})[_0xe88ceb(0x180)](_0x146c92)['write'](),config={..._0x146c92},proxyEmit(_0xe88ceb(0x202),emittedConfiguration());}function resetHistory(){const _0x1a75bd=_0x41ba0f;logger[_0x1a75bd(0x13c)](_0x1a75bd(0x1fb));try{if(fs[_0x1a75bd(0x1f8)](path[_0x1a75bd(0x1fc)](configpath,'bot-'+botID+_0x1a75bd(0x266))))fs[_0x1a75bd(0x246)](path['join'](configpath,_0x1a75bd(0x276)+botID+_0x1a75bd(0x266)));if(fs[_0x1a75bd(0x1f8)](path['join'](configpath,'bot-'+botID+'-performance.json')))fs[_0x1a75bd(0x246)](path[_0x1a75bd(0x1fc)](configpath,_0x1a75bd(0x276)+botID+'-performance.json'));if(fs[_0x1a75bd(0x1f8)](path[_0x1a75bd(0x1fc)](configpath,_0x1a75bd(0x276)+botID+_0x1a75bd(0x157))))fs[_0x1a75bd(0x246)](path[_0x1a75bd(0x1fc)](configpath,_0x1a75bd(0x276)+botID+_0x1a75bd(0x157)));}catch(_0x35f6ae){if(_0x35f6ae)logger[_0x1a75bd(0x13c)](_0x1a75bd(0x17d),_0x35f6ae);}const _0xe1cc3a=getDate();let _0x3344a3=[];currentCoins[_0x1a75bd(0x265)](_0x15644a=>{const _0x4321df=_0x1a75bd;_0x3344a3[_0x4321df(0x13d)]({'coin':_0x15644a[_0x4321df(0x1a0)],'number':_0x15644a[_0x4321df(0x12f)],'price':_0x15644a[_0x4321df(0x139)]});});let _0x41a658=dbConfig[_0x1a75bd(0x16e)](_0x1a75bd(0x13a))[_0x1a75bd(0x228)]({'botID':botID})[_0x1a75bd(0x13e)]();_0x41a658&&(dbConfig[_0x1a75bd(0x16e)](_0x1a75bd(0x13a))[_0x1a75bd(0x228)]({'botID':botID})[_0x1a75bd(0x180)]({'liquidity':[{'date':_0xe1cc3a,'changes':_0x3344a3}]})[_0x1a75bd(0x1f4)](),config[_0x1a75bd(0x217)]=[]),process[_0x1a75bd(0x1ef)]({'stop':_0x1a75bd(0x1a6)},_0x38ea50=>{});}function noslash(_0x22b4f0){return _0x22b4f0['replace']('/','');}function updateAverageFees(_0x3b080f,_0x1b8424){const _0x35d9ef=_0x41ba0f;lastFees[_0x35d9ef(0x148)]=_0x3b080f,lastFees['average']=(lastFees[_0x35d9ef(0x1ca)]*lastFees['number']+_0x1b8424)/++lastFees[_0x35d9ef(0x12f)];}async function updateNumberCoinsCcxt(_0x395b9a){const _0x2c44ef=_0x41ba0f;logger[_0x2c44ef(0x260)]('0\x20-\x20EXECUTION:\x20'+_0x395b9a[_0x2c44ef(0x1a8)]+_0x2c44ef(0x184)+_0x395b9a[_0x2c44ef(0x1ed)]+_0x2c44ef(0x184)+_0x395b9a['id']+'\x20|\x20'+_0x395b9a['clientOrderId']);let _0x2b64a6=_0x395b9a[_0x2c44ef(0x1ed)],_0x2b9ff5=![];currentCoins['forEach'](_0x4259af=>{const _0xa1f98e=_0x2c44ef;_0x4259af[_0xa1f98e(0x1a8)]==_0x395b9a[_0xa1f98e(0x1a8)]&&(_0x2b9ff5=!![]);});if(!_0x2b9ff5)return;const _0x48c194=currentCoins[_0x2c44ef(0x228)](_0x3234ec=>_0x3234ec['symbol']==_0x395b9a['symbol']),_0x5da6ef=_0x302865=>{const _0x520af3=_0x2c44ef;if(_0x48c194)_0x48c194[_0x520af3(0x1dd)]=_0x302865;};if(_0x2b64a6==_0x2c44ef(0x183))_0x5da6ef(_0x2c44ef(0x183));else{if(_0x2b64a6=='canceled')_0x5da6ef(_0x2c44ef(0x128)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x2b64a6==_0x2c44ef(0x15f)){logger[_0x2c44ef(0x260)](_0x2c44ef(0x267)+_0x395b9a[_0x2c44ef(0x1a8)]+_0x2c44ef(0x184)+_0x395b9a[_0x2c44ef(0x179)]+_0x2c44ef(0x184)+_0x395b9a['id']+_0x2c44ef(0x184)+_0x395b9a[_0x2c44ef(0x1d2)]);let _0x38b1b1=![];if(lastOrders)lastOrders[_0x2c44ef(0x265)](async _0x2468fd=>{const _0x133f30=_0x2c44ef;if(_0x2468fd['customId']==_0x395b9a[_0x133f30(0x1d2)]){logger[_0x133f30(0x260)](_0x133f30(0x136)+_0x395b9a[_0x133f30(0x1d2)]),_0x38b1b1=!![];if(_0x2468fd[_0x133f30(0x179)]==0x0){logger[_0x133f30(0x260)](_0x133f30(0x268)+_0x395b9a[_0x133f30(0x1d2)]),_0x2468fd[_0x133f30(0x1bb)]=_0x395b9a[_0x133f30(0x1ca)],_0x2468fd['filled']=_0x395b9a[_0x133f30(0x179)],_0x2468fd[_0x133f30(0x1c0)]={'cost':_0x395b9a[_0x133f30(0x1c0)][_0x133f30(0x1fa)],'currency':_0x395b9a[_0x133f30(0x1c0)][_0x133f30(0x148)]},updateAverageFees(_0x395b9a['fee'][_0x133f30(0x148)],_0x395b9a[_0x133f30(0x1c0)][_0x133f30(0x1fa)]),_0x5da6ef(_0x133f30(0x179)),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x2468fd);}}});!_0x38b1b1&&(logger[_0x2c44ef(0x260)](_0x2c44ef(0x174)+_0x395b9a['id']),_0x5da6ef('filled'),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x15c5dc=JSON[_0x2c44ef(0x162)](lastBalances[_0x2c44ef(0x12d)]);const _0x447b73=_0x15c5dc['find'](_0x4c57e9=>_0x4c57e9[_0x2c44ef(0x1a8)]==_0x395b9a['symbol']);if(_0x447b73){if(_0x2b64a6=='open')_0x447b73['orderstatus']=_0x447b73[_0x2c44ef(0x1dd)]=='filled'?_0x2c44ef(0x179):'open';else{if(_0x2b64a6==_0x2c44ef(0x128))_0x447b73[_0x2c44ef(0x1dd)]=_0x447b73[_0x2c44ef(0x1dd)]==_0x2c44ef(0x179)?'filled':'canceled';else _0x2b64a6==_0x2c44ef(0x15f)&&(_0x447b73[_0x2c44ef(0x1dd)]=_0x2c44ef(0x179));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x15c5dc)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x5e3e59=![],_0x500ecc=!![],_0xa9c7a5=config[_0x41ba0f(0x241)]){const _0x3e3f78=_0x41ba0f;let _0x42e9eb,_0x303e6d=[],_0x529680=[],_0x4de246=[];try{_0x42e9eb=await exchange[_0x3e3f78(0x171)](),mybalances=_0x42e9eb['total'];if(!_0x500ecc)for(const [_0x541cbf,_0x439b0f]of Object[_0x3e3f78(0x299)](mybalances)){_0x4de246[_0x3e3f78(0x13d)](_0x541cbf);}else config[_0x3e3f78(0x12d)][_0x3e3f78(0x265)](_0x24d440=>{const _0x59a45c=_0x3e3f78;if(!_0x24d440[_0x59a45c(0x155)])_0x4de246[_0x59a45c(0x13d)](_0x24d440[_0x59a45c(0x1a0)]);});if(_0xa9c7a5=='')for(const [_0x355712,_0x4bfd24]of Object[_0x3e3f78(0x299)](mybalances)){_0x4bfd24[_0x3e3f78(0x187)]()!=0x0&&_0x529680['push']({'coin':_0x355712});}else{if(_0x5e3e59)await getOpenOrders();let _0x384133=![];for(const [_0x27a0ae,_0xeeccc1]of Object[_0x3e3f78(0x299)](mybalances)){if(_0x4de246[_0x3e3f78(0x1f5)](_0x27a0ae)){const _0x1df9e7=config[_0x3e3f78(0x12d)][_0x3e3f78(0x228)](_0x4b05c8=>_0x4b05c8['coin']==_0x27a0ae),_0x35f49b=_0x27a0ae+'/'+_0xa9c7a5,_0x24361e=_0xa9c7a5+'/'+_0x27a0ae,_0x3cea50=currentCoins['find'](_0x14ee13=>_0x14ee13['coin']==_0x27a0ae);_0x384133=![];_0x5e3e59&&(_0x384133=allOpenOrders[_0x3e3f78(0x228)](_0xa25be8=>_0xa25be8[_0x3e3f78(0x1a8)]==_0x1df9e7['symbol']));if((_0xeeccc1['toString']()!=0x0||_0x1df9e7)&&(allSymbols[_0x3e3f78(0x1f5)](_0x35f49b)||_0x27a0ae==_0xa9c7a5))_0x27a0ae!=_0xa9c7a5&&_0x303e6d[_0x3e3f78(0x13d)](_0x35f49b),_0x529680[_0x3e3f78(0x13d)]({'coin':_0x27a0ae,'symbol':_0x35f49b,'reverse':![],'number':Math[_0x3e3f78(0x263)](_0xeeccc1+(_0x1df9e7&&_0x1df9e7['offset']||0x0),0x0),'orderstatus':_0x5e3e59?_0x384133?_0x3e3f78(0x183):_0x3e3f78(0x16c):_0x3cea50?_0x3cea50[_0x3e3f78(0x1dd)]:_0x3e3f78(0x16c)});else(_0xeeccc1['toString']()!=0x0||_0x1df9e7)&&allSymbols[_0x3e3f78(0x1f5)](_0x24361e)&&(_0x27a0ae!=_0xa9c7a5&&_0x303e6d['push'](_0x24361e),_0x529680['push']({'coin':_0x27a0ae,'symbol':_0x24361e,'reverse':!![],'number':Math[_0x3e3f78(0x263)](_0xeeccc1+(_0x1df9e7&&_0x1df9e7[_0x3e3f78(0x17e)]||0x0),0x0),'orderstatus':_0x5e3e59?_0x384133?_0x3e3f78(0x183):_0x3e3f78(0x16c):_0x3cea50?_0x3cea50[_0x3e3f78(0x1dd)]:_0x3e3f78(0x16c)}));}}}}catch(_0x604c42){if(!_0x500ecc)handleErrorNoStop(_0x604c42,_0x3e3f78(0x1b6));else await handleError(_0x604c42,_0x3e3f78(0x1b6));}return _0x529680;}async function getCoinNumber(_0x1b1f7c){const _0x405091=_0x41ba0f;let _0x5de55e;try{const _0x53f065=await exchange['fetchBalance']();_0x5de55e=_0x53f065[_0x405091(0x254)][_0x1b1f7c];}catch(_0x1b24b2){await handleError(_0x1b24b2,_0x405091(0x1d7));}return _0x5de55e;}async function getOpenOrders(){const _0x18d5de=_0x41ba0f;let _0x2347e4;allOpenOrders=[];try{for(const _0x441054 of config[_0x18d5de(0x12d)]){!_0x441054['excluded']&&_0x441054[_0x18d5de(0x1a0)]!=config['basecoin']&&(_0x2347e4=await exchange[_0x18d5de(0x1a7)](_0x441054['symbol']),_0x2347e4[_0x18d5de(0x25f)]>0x0&&allOpenOrders[_0x18d5de(0x13d)](_0x2347e4[0x0]));}}catch(_0x326747){await handleError(_0x326747,_0x18d5de(0x20b));}}async function handleOpenOrders(_0x5e61be=0x0){const _0x239f64=_0x41ba0f;allOpenOrders[_0x239f64(0x25f)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x5e61be==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x5e61be++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x239f64(0x260)](_0x239f64(0x270)),validateOrders(_0x239f64(0x25c))));}async function getPortfolio(_0x2094f6){const _0x4c50bf=_0x41ba0f;let _0x416663=[],_0x56b00b=[],_0x268894,_0x18e596=[],_0x5b3c42=![];if(_0x2094f6['apiKey']===_0x4c50bf(0x21e)||_0x2094f6['apiSecret']===_0x4c50bf(0x21e))_0x5b3c42=!![];else{await initExchange(_0x2094f6[_0x4c50bf(0x216)],_0x2094f6[_0x4c50bf(0x178)],_0x2094f6[_0x4c50bf(0x15d)]);try{_0x5b3c42=await loadSymbols(_0x2094f6[_0x4c50bf(0x216)]);}catch(_0x5ea45a){_0x5b3c42=![],handleErrorNoStop(_0x5ea45a,_0x4c50bf(0x19a));}}if(_0x5b3c42){_0x18e596=await getCoins(![],![],_0x2094f6['basecoin']);if(_0x18e596===![])proxyEmit('portfolio',![]);else{if(_0x2094f6[_0x4c50bf(0x241)]=='')proxyEmit(_0x4c50bf(0x12d),_0x18e596);else{_0x18e596[_0x4c50bf(0x265)](_0x2f2450=>{const _0x93e2cf=_0x4c50bf;if(_0x2f2450[_0x93e2cf(0x1a0)]!=_0x2094f6[_0x93e2cf(0x241)])_0x416663[_0x93e2cf(0x13d)](_0x2f2450[_0x93e2cf(0x1a8)]);});try{_0x56b00b=await exchange[_0x4c50bf(0x23f)](_0x416663);}catch(_0x82abfd){await handleError(_0x82abfd,'getPortfolio()');}_0x18e596[_0x4c50bf(0x265)](_0x808d80=>{const _0x427fe8=_0x4c50bf;_0x808d80['coin']!=_0x2094f6['basecoin']?_0x268894=_0x808d80[_0x427fe8(0x156)]?0x1/_0x56b00b[_0x808d80[_0x427fe8(0x1a8)]][_0x427fe8(0x139)]:_0x56b00b[_0x808d80['symbol']]['last']:_0x268894=0x1,_0x808d80[_0x427fe8(0x1bb)]=formatResult(_0x268894,0x8);}),proxyEmit('portfolio',_0x18e596);}}}else proxyEmit(_0x4c50bf(0x12d),![]);}function checkMinimums(_0x1459eb){const _0x4a496f=_0x41ba0f;let _0x288ce5=!![];const _0x3409a8=!_0x1459eb[_0x4a496f(0x156)]?markets[_0x1459eb[_0x4a496f(0x1a8)]][_0x4a496f(0x284)][_0x4a496f(0x22a)][_0x4a496f(0x1d1)]:markets[_0x1459eb['symbol']][_0x4a496f(0x284)]['cost']['min'],_0x3bee50=!_0x1459eb[_0x4a496f(0x156)]?markets[_0x1459eb[_0x4a496f(0x1a8)]][_0x4a496f(0x284)]['cost'][_0x4a496f(0x1d1)]:markets[_0x1459eb[_0x4a496f(0x1a8)]][_0x4a496f(0x284)][_0x4a496f(0x22a)][_0x4a496f(0x1d1)],_0x3ed4fa=markets[_0x1459eb[_0x4a496f(0x1a8)]][_0x4a496f(0x1b7)][_0x4a496f(0x22a)];_0x1459eb[_0x4a496f(0x218)]=formatResultTruncate(_0x1459eb['trade'],_0x3ed4fa);if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])<_0x3409a8)_0x288ce5=![];if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])*_0x1459eb[_0x4a496f(0x139)]<_0x3bee50)_0x288ce5=![];if(_0x1459eb[_0x4a496f(0x151)]=='sell'){let _0x582d12=config['portfolio']['find'](_0x376431=>_0x376431[_0x4a496f(0x1a0)]==_0x1459eb['coin']);if(_0x582d12['offset']>0x0){if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])>_0x1459eb[_0x4a496f(0x12f)]-_0x582d12['offset'])_0x288ce5=![];}else{if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])>_0x1459eb[_0x4a496f(0x12f)])_0x288ce5=![];}}if(_0x1459eb[_0x4a496f(0x151)]==_0x4a496f(0x18d)){let _0x465fee=config[_0x4a496f(0x12d)][_0x4a496f(0x228)](_0x54b3ef=>_0x54b3ef['coin']==config[_0x4a496f(0x241)]),_0x59e571=currentCoins[_0x4a496f(0x228)](_0x1cd7f1=>_0x1cd7f1['coin']==config[_0x4a496f(0x241)]);if(_0x465fee[_0x4a496f(0x17e)]>0x0){if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])*_0x1459eb[_0x4a496f(0x139)]>_0x59e571[_0x4a496f(0x12f)]-_0x465fee[_0x4a496f(0x17e)])_0x288ce5=![];}else{if(Math[_0x4a496f(0x29c)](_0x1459eb[_0x4a496f(0x218)])*_0x1459eb[_0x4a496f(0x139)]>_0x59e571[_0x4a496f(0x12f)])_0x288ce5=![];}}return _0x288ce5;}async function getBalances(){const _0x39e44f=_0x41ba0f;let _0x11954d=0x0,_0x5f5d0b;const _0x47d2f2=config[_0x39e44f(0x291)];if(config[_0x39e44f(0x127)]&&config[_0x39e44f(0x1fd)]<0x0)await validate24hChanges();currentCoins[_0x39e44f(0x265)](_0x46e790=>{const _0x3024e8=_0x39e44f;if(_0x46e790['coin']!=config[_0x3024e8(0x241)]){let _0x88206=global['ticker'][noslash(_0x46e790[_0x3024e8(0x1a8)])];_0x5f5d0b=_0x46e790[_0x3024e8(0x156)]?0x1/_0x88206:_0x88206;}else _0x5f5d0b=0x1;let _0x36b06a=_0x46e790[_0x3024e8(0x12f)]*_0x5f5d0b;_0x11954d+=_0x36b06a,_0x46e790[_0x3024e8(0x139)]=formatResult(Number(_0x5f5d0b),0x8),_0x46e790[_0x3024e8(0x13e)]=_0x36b06a;}),currentCoins[_0x39e44f(0x265)](_0x586081=>{const _0x3ff016=_0x39e44f;let _0x30cc7a=config[_0x3ff016(0x12d)][_0x3ff016(0x228)](_0x3fecc2=>_0x3fecc2[_0x3ff016(0x1a0)]==_0x586081['coin']),_0xe14352=Number(_0x30cc7a[_0x3ff016(0x23c)]),_0x53ee2d=_0x586081[_0x3ff016(0x13e)]/_0x11954d*0x64,_0x40cca1=_0xe14352*_0x11954d/0x64/_0x586081[_0x3ff016(0x139)]-_0x586081[_0x3ff016(0x12f)];_0x586081[_0x3ff016(0x23c)]=formatResult(_0x53ee2d,0x3),_0x586081[_0x3ff016(0x252)]=formatResult(_0xe14352,0x3),_0x586081[_0x3ff016(0x218)]=formatResult(_0x40cca1,0x8),_0x586081['side']='',_0x586081[_0x3ff016(0x245)]=![];if(_0x586081[_0x3ff016(0x1a0)]!=config[_0x3ff016(0x241)]){if(_0x586081[_0x3ff016(0x23c)]>_0xe14352)_0x586081[_0x3ff016(0x151)]=_0x3ff016(0x256),_0x586081['valid']=checkMinimums(_0x586081);else _0x586081[_0x3ff016(0x23c)]<_0xe14352&&(_0x586081['side']=_0x3ff016(0x18d),_0x586081['valid']=checkMinimums(_0x586081));}_0x586081[_0x3ff016(0x226)]=_0x586081['distribution']/_0x586081[_0x3ff016(0x252)]-0x1;if(_0x586081['orderstatus']==_0x3ff016(0x179)||_0x586081['orderstatus']==_0x3ff016(0x128))_0x586081[_0x3ff016(0x1dd)]=_0x3ff016(0x16c);}),currentCoins['sort']((_0x226f50,_0x2cc3f7)=>_0x226f50[_0x39e44f(0x226)]<_0x2cc3f7['delta']?0x1:_0x2cc3f7[_0x39e44f(0x226)]<_0x226f50[_0x39e44f(0x226)]?-0x1:0x0);const _0x2f2368=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2f2368[_0x39e44f(0x1f6)],'usd':_0x2f2368[_0x39e44f(0x22e)],'portfolio':JSON[_0x39e44f(0x24c)](currentCoins),'threshold':_0x47d2f2},proxyEmit(_0x39e44f(0x232),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x39e44f(0x127)])headlessMode({'portfolio':currentCoins,'threshold':_0x47d2f2});else{if(lockOrders==ORDERS[_0x39e44f(0x27c)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x47d2f2});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x185708=getNormalizedPerformance();emitPerformance(_0x185708),getStartingBalances(_0x185708),logger['debug'](_0x39e44f(0x26a));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x15edb1=_0x41ba0f;if(!lastBalances)return;let _0x6f830d=[],_0x1f6818,_0x270687=JSON[_0x15edb1(0x162)](lastBalances[_0x15edb1(0x12d)]);_0x270687[_0x15edb1(0x165)]((_0x3188f3,_0x2eeca7)=>_0x3188f3[_0x15edb1(0x1a0)]>_0x2eeca7[_0x15edb1(0x1a0)]?0x1:_0x2eeca7[_0x15edb1(0x1a0)]>_0x3188f3['coin']?-0x1:0x0),_0x270687['forEach'](_0x5c4b75=>{const _0x22d22b=_0x15edb1;let _0xa8ca0e={'coin':_0x5c4b75[_0x22d22b(0x1a0)],'number':_0x5c4b75[_0x22d22b(0x12f)],'price':_0x5c4b75[_0x22d22b(0x139)]};_0x6f830d[_0x22d22b(0x13d)](_0xa8ca0e);});const _0x378ec4=await getFiat();_0x1f6818={'date':lastBalances[_0x15edb1(0x147)][_0x15edb1(0x143)]('\x20')[0x0],'eur':_0x378ec4[_0x15edb1(0x1f6)],'usd':_0x378ec4[_0x15edb1(0x22e)],'coins':_0x6f830d};let _0x400d60=dbPerformance[_0x15edb1(0x16e)](_0x15edb1(0x19b))[_0x15edb1(0x228)]({'date':_0x1f6818['date']})[_0x15edb1(0x13e)]();_0x400d60?_0x1f6818[_0x15edb1(0x227)]!=config[_0x15edb1(0x14a)]&&dbPerformance[_0x15edb1(0x16e)](_0x15edb1(0x19b))[_0x15edb1(0x228)]({'date':_0x1f6818['date']})[_0x15edb1(0x180)](_0x1f6818)['write']():dbPerformance['get'](_0x15edb1(0x19b))[_0x15edb1(0x13d)](_0x1f6818)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x375e03=_0x41ba0f;let _0x9599b0=[];if(dbPerformance[_0x375e03(0x242)](_0x375e03(0x19b))['value']()){let _0x316a10=dbPerformance[_0x375e03(0x16e)](_0x375e03(0x19b))['cloneDeep']()[_0x375e03(0x286)](_0x375e03(0x227))[_0x375e03(0x13e)](),_0xfd2b87=[...config[_0x375e03(0x217)]];_0xfd2b87[_0x375e03(0x165)]((_0x1340df,_0x1a77f7)=>_0x1340df[_0x375e03(0x227)]>_0x1a77f7[_0x375e03(0x227)]?-0x1:_0x1a77f7[_0x375e03(0x227)]>_0x1340df[_0x375e03(0x227)]?0x1:0x0);let _0x28e62e=0x1,_0x31e45c=[],_0x16814c=0x0;_0x316a10[_0x375e03(0x198)]()[_0x375e03(0x156)]()[_0x375e03(0x265)]((_0x3e084b,_0x48e9a8)=>{const _0x205799=_0x375e03;if(_0xfd2b87[_0x16814c]){if(_0x316a10[_0x316a10[_0x205799(0x25f)]-_0x48e9a8]&&_0xfd2b87[_0x16814c][_0x205799(0x227)]==_0x316a10[_0x316a10[_0x205799(0x25f)]-_0x48e9a8][_0x205799(0x227)]){if(_0x48e9a8<_0x316a10['length']){let _0x8bea3d=0x0,_0x16986f=0x0;_0x316a10[_0x316a10[_0x205799(0x25f)]-_0x48e9a8]['coins'][_0x205799(0x265)](_0x374e76=>{const _0x14e9a3=_0x205799;_0x16986f+=_0x374e76[_0x14e9a3(0x12f)]*_0x374e76[_0x14e9a3(0x1bb)];}),_0xfd2b87[_0x16814c][_0x205799(0x160)][_0x205799(0x265)](_0xdfb08a=>{const _0x2554d6=_0x205799;_0x8bea3d+=_0xdfb08a[_0x2554d6(0x12f)]*_0xdfb08a[_0x2554d6(0x1bb)];}),_0x28e62e*=_0x8bea3d/(_0x16986f-_0x8bea3d)+0x1;}_0x16814c++;}}let _0x219f54=0x0;_0x3e084b[_0x205799(0x16a)][_0x205799(0x265)](_0x34db13=>{const _0x534f58=_0x205799;_0x219f54+=_0x34db13[_0x534f58(0x12f)]*_0x34db13[_0x534f58(0x1bb)];}),_0x31e45c[_0x316a10[_0x205799(0x25f)]-_0x48e9a8-0x1]=_0x219f54*(_0x28e62e-0x1);});let _0x2077c2=[];_0xfd2b87=[...config[_0x375e03(0x217)]]||[];let _0x4836e8=0x0;_0x16814c=0x0,_0x316a10[_0x375e03(0x265)]((_0xfde03a,_0x178f58)=>{const _0x400a5c=_0x375e03;if(_0xfd2b87[_0x16814c]){const _0x3e769c=fns[_0x400a5c(0x162)](_0xfd2b87[_0x16814c][_0x400a5c(0x227)],_0x400a5c(0x1e4),new Date()),_0x38ae57=fns[_0x400a5c(0x162)](_0xfde03a[_0x400a5c(0x227)],_0x400a5c(0x1e4),new Date());if(fns[_0x400a5c(0x175)](_0x3e769c,_0x38ae57)){let _0x435c26=0x0;_0xfd2b87[_0x16814c]['changes'][_0x400a5c(0x265)](_0x28c029=>{const _0x12ab13=_0x400a5c;!_0x2077c2[_0x28c029[_0x12ab13(0x1a0)]]?_0x2077c2[_0x28c029['coin']]=_0x28c029[_0x12ab13(0x12f)]:(_0x435c26=_0x2077c2[_0x28c029[_0x12ab13(0x1a0)]],_0x2077c2[_0x28c029[_0x12ab13(0x1a0)]]+=_0x28c029[_0x12ab13(0x12f)]);const _0x433afc=_0xfde03a[_0x12ab13(0x16a)][_0x12ab13(0x228)](_0x1ed078=>_0x1ed078[_0x12ab13(0x1a0)]==_0x28c029[_0x12ab13(0x1a0)]);(!_0x433afc||_0x433afc[_0x12ab13(0x12f)]==0x0)&&(_0x4836e8+=(-_0x28c029[_0x12ab13(0x12f)]-_0x435c26)*_0x28c029[_0x12ab13(0x1bb)]);}),_0x16814c++;}}_0xfde03a['coins'][_0x400a5c(0x265)]((_0x1a706b,_0x1e502c)=>{const _0x5f2e1c=_0x400a5c;_0x2077c2[_0x1a706b[_0x5f2e1c(0x1a0)]]&&(_0x1a706b={..._0x1a706b,'initial':_0x2077c2[_0x1a706b[_0x5f2e1c(0x1a0)]]}),_0xfde03a[_0x5f2e1c(0x16a)][_0x1e502c]=_0x1a706b;}),_0x9599b0[_0x400a5c(0x13d)]({'date':_0xfde03a[_0x400a5c(0x227)],'eur':_0xfde03a[_0x400a5c(0x1f6)],'usd':_0xfde03a[_0x400a5c(0x22e)],'offset':_0x31e45c[_0x178f58],'netoffset':_0x4836e8,'coins':_0xfde03a[_0x400a5c(0x16a)]});});}return _0x9599b0;}function emitPerformance(_0x5ee849){const _0x5f5a1d=_0x41ba0f;_0x5ee849[_0x5f5a1d(0x25f)]!==0x0?(proxyEmit('performance',_0x5ee849),lastPerformanceEmitted=getDate()):proxyEmit(_0x5f5a1d(0x130),[]);}function getPerf(_0x31387f,_0x7e7aa5){const _0x39c2af=_0x41ba0f;let _0x5734f4=0x0,_0x5b1eb0=0x0,_0x3319e0=0x0;_0x31387f[_0x39c2af(0x16a)][_0x39c2af(0x265)](_0x51026b=>{const _0x2f8866=_0x39c2af;_0x5734f4+=_0x51026b['number']*_0x51026b[_0x2f8866(0x1bb)];});_0x7e7aa5&&(_0x5734f4+=_0x31387f[_0x39c2af(0x17e)]);if(config[_0x39c2af(0x241)]===_0x39c2af(0x293)||config['basecoin']===_0x39c2af(0x26f))_0x5b1eb0=_0x5734f4*_0x31387f['eur'],_0x3319e0=_0x5734f4*_0x31387f[_0x39c2af(0x22e)];else{if(config['basecoin']===_0x39c2af(0x250)||config[_0x39c2af(0x241)]===_0x39c2af(0x142)||config[_0x39c2af(0x241)]===_0x39c2af(0x210))_0x5b1eb0=_0x5734f4*_0x31387f[_0x39c2af(0x1f6)]/_0x31387f[_0x39c2af(0x22e)],_0x3319e0=_0x5734f4;else config['basecoin']==='EUR'&&(_0x5b1eb0=_0x5734f4,_0x3319e0=_0x5734f4*_0x31387f[_0x39c2af(0x22e)]/_0x31387f['eur']);}return[_0x5734f4,_0x5b1eb0,_0x3319e0];}function getKPIs(_0x421f67,_0x5a0fc7=_0x41ba0f(0x23b)){const _0x57c5c7=_0x41ba0f,_0x2c9695=config[_0x57c5c7(0x241)],_0x30f8b8=lastBalances,_0x1af8e5=currentCoins,_0x5410e1=getNormalizedPerformance(),_0x2bbb10=_0x421f67===_0x57c5c7(0x241)?_0x2c9695:_0x421f67==='fiat'||_0x421f67===_0x57c5c7(0x191)?_0x5a0fc7:_0x57c5c7(0x27d)+_0x2c9695,_0x50ac3f=_0x421f67===_0x57c5c7(0x28e)?_0x57c5c7(0x1be):_0x421f67===_0x57c5c7(0x191)?_0x57c5c7(0x1be):_0x2bbb10+_0x57c5c7(0x262),_0x229ce6=_0x421f67===_0x57c5c7(0x28e)||_0x421f67===_0x57c5c7(0x191)?_0x57c5c7(0x1be):_0x2bbb10+_0x57c5c7(0x194);let _0x18897a=0x0;_0x1af8e5['forEach'](_0x376f01=>{const _0x21cc4a=_0x57c5c7;_0x18897a+=_0x376f01[_0x21cc4a(0x12f)]*_0x376f01['last'];});if(_0x421f67===_0x57c5c7(0x298)||_0x421f67===_0x57c5c7(0x191)){if(_0x2c9695===_0x57c5c7(0x293)||_0x2c9695===_0x57c5c7(0x26f))_0x18897a=_0x18897a*(_0x5a0fc7===_0x57c5c7(0x23b)?_0x30f8b8['eur']:_0x30f8b8[_0x57c5c7(0x22e)]);else{if(_0x2c9695===_0x57c5c7(0x250)||_0x2c9695===_0x57c5c7(0x142)||_0x2c9695===_0x57c5c7(0x210))_0x18897a=_0x18897a*(_0x5a0fc7===_0x57c5c7(0x23b)?_0x30f8b8[_0x57c5c7(0x1f6)]/_0x30f8b8[_0x57c5c7(0x22e)]:0x1);else _0x2c9695==='EUR'&&(_0x18897a=_0x18897a*(_0x5a0fc7===_0x57c5c7(0x23b)?0x1:_0x30f8b8[_0x57c5c7(0x22e)]/_0x30f8b8[_0x57c5c7(0x1f6)]));}}let _0x330ba5;if(_0x18897a!==0x0){if(_0x421f67===_0x57c5c7(0x241))_0x330ba5=(_0x18897a/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5a0fc7===_0x57c5c7(0x23b))_0x330ba5=(_0x18897a/startingBalances[_0x57c5c7(0x1f6)]-0x1)*0x64;else _0x330ba5=(_0x18897a/startingBalances['usd']-0x1)*0x64;}let _0x4ae58f=0x0;if(startingBalances['coins'])_0x1af8e5[_0x57c5c7(0x265)](_0xaa9938=>{const _0x302b=_0x57c5c7;let _0x819c77=startingBalances[_0x302b(0x16a)][_0x302b(0x228)](_0x56c3d0=>_0x56c3d0[_0x302b(0x1a0)]===_0xaa9938['coin']);if(_0x819c77&&_0x819c77['coin']&&_0xaa9938[_0x302b(0x12f)]!==0x0)_0x4ae58f+=_0x819c77[_0x302b(0x12f)]*_0xaa9938[_0x302b(0x139)];});let _0xb734f4=0x0;if(_0x5410e1[_0x57c5c7(0x25f)]!==0x0){let _0x7d3479=_0x5410e1[_0x5410e1[_0x57c5c7(0x25f)]-0x1];_0xb734f4=_0x7d3479['netoffset'];}_0x4ae58f-=_0xb734f4;_0x421f67===_0x57c5c7(0x28e)&&(_0x330ba5=(_0x18897a-_0x4ae58f)/startingBalances[_0x57c5c7(0x241)]*0x64,_0x18897a=_0x18897a-_0x4ae58f);if(_0x421f67===_0x57c5c7(0x191)){let _0x220c48=_0x5a0fc7==='EUR'?startingBalances[_0x57c5c7(0x1f6)]:startingBalances[_0x57c5c7(0x22e)];if(_0x2c9695==='BTC'||_0x2c9695==='ETH')_0x4ae58f=_0x5a0fc7===_0x57c5c7(0x23b)?_0x4ae58f*_0x30f8b8[_0x57c5c7(0x1f6)]:_0x4ae58f*_0x30f8b8[_0x57c5c7(0x22e)];else{if(_0x2c9695===_0x57c5c7(0x250)||_0x2c9695===_0x57c5c7(0x142)||_0x2c9695===_0x57c5c7(0x210))_0x4ae58f=_0x5a0fc7===_0x57c5c7(0x23b)?_0x4ae58f*_0x30f8b8[_0x57c5c7(0x1f6)]/_0x30f8b8[_0x57c5c7(0x22e)]:_0x4ae58f;else _0x2c9695==='EUR'&&(_0x4ae58f=_0x5a0fc7===_0x57c5c7(0x23b)?_0x4ae58f:_0x4ae58f*_0x30f8b8['usd']/_0x30f8b8[_0x57c5c7(0x1f6)]);}_0x330ba5=(_0x18897a-_0x4ae58f)/_0x220c48*0x64,_0x18897a=_0x18897a-_0x4ae58f;}if(_0x330ba5){if(_0x330ba5<0x64)_0x330ba5=_0x330ba5[_0x57c5c7(0x25b)](0x2);else{if(_0x330ba5<0x3e8)_0x330ba5=_0x330ba5[_0x57c5c7(0x25b)](0x1);else _0x330ba5=_0x330ba5[_0x57c5c7(0x25b)](0x0);}}else _0x330ba5=Number('0')[_0x57c5c7(0x25b)](0x2);if(_0x18897a){if(Math[_0x57c5c7(0x29c)](_0x18897a)<0.000001)_0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x2);else{if(Math[_0x57c5c7(0x29c)](_0x18897a)<0.1)_0x18897a=_0x18897a['toFixed'](0x6);else{if(Math['abs'](_0x18897a)<0x1)_0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x5);else{if(Math[_0x57c5c7(0x29c)](_0x18897a)<0xa)_0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x4);else{if(Math['abs'](_0x18897a)<0x64)_0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x3);else{if(Math['abs'](_0x18897a)<0x3e8)_0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x2);else _0x18897a=_0x18897a[_0x57c5c7(0x25b)](0x2);}}}}}}else _0x18897a=Number('0')[_0x57c5c7(0x25b)](0x2);}else _0x330ba5=Number('0')[_0x57c5c7(0x25b)](0x2);return{'value':_0x18897a,'change':_0x330ba5,'leftTxt':_0x50ac3f,'rightTxt':_0x229ce6};}async function getStartingBalances(_0x4836fd,_0xe52345=!![]){const _0x23bec2=_0x41ba0f;if(_0x4836fd[_0x23bec2(0x25f)]!==0x0){const [_0x5806a2,_0x4b6cdb,_0x406c8f]=getPerf(_0x4836fd[0x0],!![]);let _0x56d5d8=[];config[_0x23bec2(0x12d)][_0x23bec2(0x265)](_0x53e97c=>{const _0x55f7cb=_0x23bec2;let _0x460689=0x0,_0x473be9;config[_0x55f7cb(0x217)][_0x55f7cb(0x265)](_0x4242cf=>{const _0x217d07=_0x55f7cb;let _0x457bfd=_0x4242cf['changes'][_0x217d07(0x228)](_0x4596f5=>_0x4596f5[_0x217d07(0x1a0)]==_0x53e97c[_0x217d07(0x1a0)]);if(_0x457bfd){_0x460689+=_0x457bfd[_0x217d07(0x12f)];if(!_0x473be9)_0x473be9=_0x457bfd[_0x217d07(0x1bb)];}}),_0x56d5d8[_0x55f7cb(0x13d)]({'coin':_0x53e97c[_0x55f7cb(0x1a0)],'number':_0x460689,'initialprice':_0x473be9});});const _0x833dfe={'basecoin':_0x5806a2,'eur':_0x4b6cdb,'usd':_0x406c8f,'coins':_0x56d5d8};if(_0xe52345)proxyEmit(_0x23bec2(0x14e),_0x833dfe);startingBalances=_0x833dfe;}}function headlessMode(_0x513848){const _0x5b25f9=_0x41ba0f;let _0xb8b71=_0x513848[_0x5b25f9(0x12d)],_0x97d5b6=_0x513848[_0x5b25f9(0x291)],_0x3c04d5=[];for(let _0x50e9cd of _0xb8b71){if(_0x50e9cd[_0x5b25f9(0x1a0)]!=config['basecoin']){if(_0x50e9cd[_0x5b25f9(0x226)]>=_0x97d5b6/0x64){if(_0x50e9cd[_0x5b25f9(0x245)])_0x3c04d5[_0x5b25f9(0x13d)](_0x50e9cd);}else{if(_0x50e9cd[_0x5b25f9(0x226)]<=-_0x97d5b6/0x64){if(_0x50e9cd['valid'])_0x3c04d5['push'](_0x50e9cd);}}}}_0x3c04d5[_0x5b25f9(0x25f)]>0x0&&placeOrder(_0x3c04d5);}function notifyBalance(_0x2d2214){const _0x53eeb0=_0x41ba0f;let _0x31b042=_0x2d2214[_0x53eeb0(0x12d)],_0x34e7e4=_0x2d2214[_0x53eeb0(0x291)],_0x5735c9=[];for(let _0x29f221 of _0x31b042){if(_0x29f221[_0x53eeb0(0x1a0)]!=config['basecoin']){if(_0x29f221['delta']>=_0x34e7e4/0x64){if(_0x29f221['valid'])_0x5735c9[_0x53eeb0(0x13d)](_0x29f221);}else{if(_0x29f221['delta']<=-_0x34e7e4/0x64){if(_0x29f221[_0x53eeb0(0x245)])_0x5735c9[_0x53eeb0(0x13d)](_0x29f221);}}}}if(_0x5735c9[_0x53eeb0(0x25f)]>0x0){let _0x14696a=_0x5735c9[_0x53eeb0(0x16f)](_0x5985c6=>_0x5985c6['coin']);_0x14696a[_0x53eeb0(0x165)]();let _0x37199d=_0x14696a['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x53eeb0(0x1ac),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x37199d;}}function symbolToCoin(_0x502a75){const _0x12dda0=_0x41ba0f;let _0x16dd5c;if(_0x502a75[_0x12dda0(0x1f5)]('/'+config[_0x12dda0(0x241)]))_0x16dd5c=_0x502a75[_0x12dda0(0x221)]('/'+config['basecoin'],'');if(_0x502a75['includes'](config['basecoin']+'/'))_0x16dd5c=_0x502a75['replace'](config[_0x12dda0(0x241)]+'/','');return _0x16dd5c;}async function unlockOrders(){const _0x292d63=_0x41ba0f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x292d63(0x274)]){logger['debug'](_0x292d63(0x1b4)),lockOrders=ORDERS[_0x292d63(0x141)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x292d63(0x21f),persistOpenOrders([]),lockOrders=ORDERS[_0x292d63(0x27c)],logger['debug'](_0x292d63(0x1ea));}}async function validateOrders(_0x52bd1b){const _0x412e72=_0x41ba0f;if(_0x52bd1b)validateOrdersState=_0x52bd1b;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x412e72(0x1ae)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x412e72(0x288):'ORDERS.UNLOCKED'));let _0xed83d8=[],_0x57b0be=config[_0x412e72(0x192)]==_0x412e72(0x24e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x412e72(0x189)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x412e72(0x274)])return;logger[_0x412e72(0x260)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x412e72(0x265)](_0x450725=>{const _0xc623f5=_0x412e72;let _0x4689cf=![];_0x450725[_0xc623f5(0x179)]>0x0&&(_0x4689cf=!![]),_0xed83d8[_0xc623f5(0x13d)](_0x4689cf),_0x4689cf&&config[_0xc623f5(0x192)]!=_0xc623f5(0x24e)&&logHistory(_0xc623f5(0x205),'Order\x20filled:\x20'+_0x450725[_0xc623f5(0x1a8)]+'\x20'+_0x450725[_0xc623f5(0x151)]+'\x20#'+formatResult(_0x450725[_0xc623f5(0x179)],0x8)+'\x20@'+formatResult(_0x450725[_0xc623f5(0x1bb)],0x8));}),_0xed83d8[_0x412e72(0x265)]((_0x66897a,_0x190d3b)=>{const _0x51056f=_0x412e72;if(_0x66897a)lastOrders[_0x51056f(0x238)](_0x190d3b,0x1);}),persistOpenOrders(lastOrders);const _0x3908da=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x412e72(0x1df);if(validateOrdersState==_0x412e72(0x21f))validateOrdersState=_0x412e72(0x164),_0xed83d8[_0x412e72(0x1f5)](![])?config[_0x412e72(0x192)]==_0x412e72(0x24e)?logHistory(_0x412e72(0x1ac),_0x412e72(0x204)):logHistory(_0x412e72(0x1ac),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x412e72(0x164)){if(_0xed83d8[_0x412e72(0x1f5)](![])){}else allOrdersPlaced&&(config['ordertype']==_0x412e72(0x24e)?logHistory(_0x412e72(0x1ba),_0x412e72(0x1f9)+_0x3908da):logHistory(_0x412e72(0x1ba),'Order(s)\x20filled\x20-\x20'+_0x3908da),await unlockOrders());}else{if(validateOrdersState==_0x412e72(0x244))_0xed83d8[_0x412e72(0x1f5)](![])&&(config['ordertype']==_0x412e72(0x24e)?logHistory(_0x412e72(0x1ba),_0x412e72(0x134)+Math[_0x412e72(0x206)](_0x57b0be*validateOrderInterval/0xea60)+_0x412e72(0x28c)+_0x3908da):(await cancelOrders(),logHistory('success',_0x412e72(0x1cf)+Math[_0x412e72(0x206)](_0x57b0be*validateOrderInterval/0xea60)+_0x412e72(0x28c)+_0x3908da))),await unlockOrders();else{if(validateOrdersState==_0x412e72(0x25c)){if(config['ordertype']!=_0x412e72(0x24e))logHistory(_0x412e72(0x1ba),_0x412e72(0x172)+_0x3908da);await unlockOrders();}}}}}async function cancelOrders(){const _0x30b56b=_0x41ba0f;lastOrders[_0x30b56b(0x265)](async _0xe9514a=>{const _0x5cfe6a=_0x30b56b;try{const _0x5043cc=await exchange[_0x5cfe6a(0x1d0)](_0xe9514a['orderId'],_0xe9514a[_0x5cfe6a(0x1a8)]);}catch(_0xdb8aec){if(_0xdb8aec['toString']()['includes']('OrderNotFound')){}else await handleError(_0xdb8aec,_0x5cfe6a(0x23a));}});}async function initCoinResults(){const _0x42d8b3=_0x41ba0f;let _0x52a2ca=[];config['portfolio'][_0x42d8b3(0x265)](_0x192561=>{const _0x19e3de=_0x42d8b3;if(!_0x192561[_0x19e3de(0x155)]&&_0x192561[_0x19e3de(0x1a0)]!=config['basecoin']){let _0x3ac703=dbCoinResults['get'](_0x19e3de(0x16a))[_0x19e3de(0x228)]({'coin':_0x192561['coin']})[_0x19e3de(0x13e)]();if(!_0x3ac703){const _0x2234cc=currentCoins[_0x19e3de(0x228)](_0x3e497c=>_0x3e497c[_0x19e3de(0x1a0)]==_0x192561[_0x19e3de(0x1a0)]),_0x311985=global[_0x19e3de(0x196)][noslash(_0x192561['symbol'])];let _0x2f863f=_0x2234cc?_0x2234cc[_0x19e3de(0x12f)]:null,_0x488576=_0x192561[_0x19e3de(0x156)]?0x1/_0x311985:_0x311985,_0x4bf5a0;config['liquidity'][_0x19e3de(0x265)](_0x31cd02=>{const _0x3db9d5=_0x19e3de;!_0x4bf5a0&&(_0x4bf5a0=_0x31cd02['changes'][_0x3db9d5(0x228)](_0x14ba6b=>_0x14ba6b[_0x3db9d5(0x1a0)]==_0x192561[_0x3db9d5(0x1a0)]),_0x4bf5a0&&(_0x2f863f=_0x4bf5a0[_0x3db9d5(0x12f)],_0x488576=_0x4bf5a0[_0x3db9d5(0x1bb)]));}),_0x52a2ca[_0x19e3de(0x13d)]({'coin':_0x192561[_0x19e3de(0x1a0)],'number':_0x2f863f,'price':_0x488576});}}}),_0x52a2ca[_0x42d8b3(0x265)](_0x36c033=>{const _0x44fb37=_0x42d8b3,_0x2d9797={'coin':_0x36c033[_0x44fb37(0x1a0)],'number':_0x36c033[_0x44fb37(0x12f)],'breakeven':_0x36c033[_0x44fb37(0x1bb)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x44fb37(0x16e)](_0x44fb37(0x16a))[_0x44fb37(0x13d)](_0x2d9797)[_0x44fb37(0x1f4)]();});}async function updateCoinResults(_0x15b1fd,_0x5b1a3e=![]){const _0x49974a=_0x41ba0f;let _0x1d80a7,_0x139711,_0xe20f7d,_0x4d8cb2,_0x330c57,_0x26b19a,_0x87b1a5=dbCoinResults[_0x49974a(0x16e)](_0x49974a(0x16a))[_0x49974a(0x228)]({'coin':_0x15b1fd[_0x49974a(0x1a0)]})['value']();!_0x87b1a5&&await initCoinResults();_0x15b1fd[_0x49974a(0x156)]&&(_0x26b19a={'filled':_0x15b1fd[_0x49974a(0x179)]*_0x15b1fd[_0x49974a(0x1bb)],'amount':_0x15b1fd[_0x49974a(0x179)]*_0x15b1fd[_0x49974a(0x1bb)],'side':_0x15b1fd[_0x49974a(0x151)]=='sell'?_0x49974a(0x18d):_0x49974a(0x256),'price':0x1/_0x15b1fd[_0x49974a(0x1bb)]},_0x15b1fd={..._0x15b1fd,..._0x26b19a});_0x5b1a3e?_0x139711=_0x15b1fd[_0x49974a(0x151)]==_0x49974a(0x18d)?_0x87b1a5[_0x49974a(0x12f)]+_0x15b1fd['filled']:_0x87b1a5[_0x49974a(0x12f)]-_0x15b1fd[_0x49974a(0x179)]:_0x139711=await getCoinNumber(_0x15b1fd[_0x49974a(0x1a0)]);if(_0x15b1fd['fee']&&_0x15b1fd[_0x49974a(0x1c0)]['currency']==config[_0x49974a(0x241)])_0x1d80a7=_0x15b1fd['fee']['cost'];else{if(_0x15b1fd[_0x49974a(0x1c0)]&&_0x15b1fd[_0x49974a(0x1c0)]['currency']==_0x49974a(0x170)&&!_0x5b1a3e)_0x1d80a7=_0x15b1fd[_0x49974a(0x1c0)][_0x49974a(0x1fa)]*global['ticker']['BNB'+config[_0x49974a(0x241)]];else _0x1d80a7=defaultFee*_0x15b1fd['filled']*_0x15b1fd[_0x49974a(0x1bb)];}_0x15b1fd[_0x49974a(0x151)]==_0x49974a(0x18d)?(_0xe20f7d=_0x139711!=0x0?(_0x87b1a5['breakeven']*_0x87b1a5[_0x49974a(0x12f)]+_0x15b1fd['price']*(_0x139711-_0x87b1a5['number'])+_0x1d80a7)/_0x139711:0x0,_0x4d8cb2=_0x87b1a5['realized']):(_0xe20f7d=_0x139711!=0x0?(_0x87b1a5[_0x49974a(0x1e6)]*_0x87b1a5[_0x49974a(0x12f)]-_0x15b1fd[_0x49974a(0x1bb)]*(_0x87b1a5[_0x49974a(0x12f)]-_0x139711)+_0x1d80a7)/_0x139711:0x0,_0x4d8cb2=_0x87b1a5[_0x49974a(0x1e0)]+(_0x15b1fd[_0x49974a(0x1bb)]-_0x87b1a5[_0x49974a(0x1e6)])*_0x15b1fd[_0x49974a(0x179)]);_0x330c57=(_0x15b1fd[_0x49974a(0x1bb)]-_0xe20f7d-_0x1d80a7/_0x15b1fd[_0x49974a(0x179)])*_0x139711;let _0x2bf3bb={'coin':_0x15b1fd[_0x49974a(0x1a0)],'number':_0x139711,'breakeven':formatResult(_0xe20f7d,0x8),'realized':formatResult(_0x4d8cb2,0x8),'unrealized':formatResult(_0x330c57,0x8),'fees':formatResult(_0x87b1a5[_0x49974a(0x1b2)]+_0x1d80a7,0x8),'sells':_0x15b1fd['side']=='sell'?_0x87b1a5[_0x49974a(0x1b0)]+0x1:_0x87b1a5[_0x49974a(0x1b0)],'buys':_0x15b1fd['side']==_0x49974a(0x18d)?_0x87b1a5[_0x49974a(0x19f)]+0x1:_0x87b1a5['buys']};dbCoinResults['get'](_0x49974a(0x16a))['find']({'coin':_0x15b1fd[_0x49974a(0x1a0)]})[_0x49974a(0x180)](_0x2bf3bb)[_0x49974a(0x1f4)]();if(!_0x5b1a3e){if(_0x15b1fd[_0x49974a(0x1c0)]&&_0x15b1fd['fee'][_0x49974a(0x148)]==_0x49974a(0x170)){const _0xd6b227=currentCoins['find'](_0x34a831=>_0x34a831[_0x49974a(0x1a0)]==_0x49974a(0x170));if(_0xd6b227){let _0x727a28=dbCoinResults[_0x49974a(0x16e)](_0x49974a(0x16a))[_0x49974a(0x228)]({'coin':_0x49974a(0x170)})[_0x49974a(0x13e)]();_0x2bf3bb={..._0x727a28,'number':_0xd6b227[_0x49974a(0x12f)]},dbCoinResults[_0x49974a(0x16e)](_0x49974a(0x16a))[_0x49974a(0x228)]({'coin':_0x49974a(0x170)})[_0x49974a(0x180)](_0x2bf3bb)[_0x49974a(0x1f4)]();}}}}async function placeOrder(_0x38c168){const _0x25273c=_0x41ba0f,_0x4cd3eb=config[_0x25273c(0x192)]=='market'?'market':_0x25273c(0x186);if(lockOrders==ORDERS[_0x25273c(0x27c)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x25273c(0x274)],allOrdersPlaced=![],validateOrdersState=_0x25273c(0x21f),lastOrders=[];for(const _0x2b11bb of _0x38c168){let _0x583a54,_0x423868,_0x1a5fc0,_0xa94293,_0x5d05b0,_0x551fe7=_0x2b11bb[_0x25273c(0x1a8)];try{const _0x5eaa84=await exchange[_0x25273c(0x17b)](_0x551fe7);_0x583a54=_0x2b11bb[_0x25273c(0x156)]?0x1/_0x2b11bb['last']:_0x2b11bb[_0x25273c(0x139)],_0x423868=_0x5eaa84[_0x25273c(0x1f1)],_0x1a5fc0=_0x5eaa84[_0x25273c(0x1e8)];_0x2b11bb[_0x25273c(0x156)]?(_0xa94293=_0x2b11bb[_0x25273c(0x151)]==_0x25273c(0x18d)?_0x25273c(0x256):'buy',_0x5d05b0=Math['abs'](_0x2b11bb[_0x25273c(0x218)])/_0x583a54):(_0xa94293=_0x2b11bb['side'],_0x5d05b0=Math[_0x25273c(0x29c)](_0x2b11bb[_0x25273c(0x218)]));_0x4cd3eb=='limit'&&(config['ordertype']==_0x25273c(0x281)&&(_0x583a54=_0xa94293==_0x25273c(0x18d)?_0x423868:_0x1a5fc0),config[_0x25273c(0x192)]==_0x25273c(0x18b)&&(_0x583a54=_0xa94293=='buy'?_0x1a5fc0:_0x423868));_0x5d05b0=formatResult(_0x5d05b0,0x8),_0x583a54=formatResult(_0x583a54,0x8);const _0x453d94=_0xa94293=='sell'?config[_0x25273c(0x240)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x25273c(0x251)]?String[_0x25273c(0x28a)]('0x'+config[_0x25273c(0x251)])+'\x20':'',_0x4e5a97=_0x4cd3eb=='market'?_0x25273c(0x176):config[_0x25273c(0x192)]=='limit-high'?'Limit\x20(high-margin)':_0x25273c(0x1c7),_0xffdf04=new Date()[_0x25273c(0x21c)]()[_0x25273c(0x187)]()[_0x25273c(0x198)](-0x6)+'-'+Math[_0x25273c(0x161)]()[_0x25273c(0x187)]()[_0x25273c(0x198)](-0x6);lastOrders[_0x25273c(0x13d)]({'customId':_0xffdf04,'symbol':_0x551fe7,'coin':_0x2b11bb['coin'],'side':_0xa94293,'reverse':_0x2b11bb[_0x25273c(0x156)],'filled':0x0});if(_0x4cd3eb==_0x25273c(0x24e))logHistory('order',''+_0x453d94+_0x4e5a97+_0x25273c(0x1d6)+_0x551fe7+'\x20'+_0xa94293+'\x20#'+formatResult(_0x5d05b0,0x8)+'\x20@'+formatResult(_0x583a54,0x8));else logHistory('order',''+_0x453d94+_0x4e5a97+_0x25273c(0x1d6)+_0x551fe7+'\x20'+_0xa94293+'\x20#'+formatResult(_0x5d05b0,0x8)+'\x20@'+formatResult(_0x583a54,0x8));const _0x1c6ebf=await exchange[_0x25273c(0x1b5)](_0x551fe7,_0x4cd3eb,_0xa94293,_0x5d05b0,_0x583a54,{'clientOrderId':_0xffdf04}),_0x2f5e6c=lastOrders['length']-0x1;_0x2f5e6c>=0x0&&lastOrders[_0x2f5e6c][_0x25273c(0x20d)]==_0xffdf04&&(lastOrders[_0x2f5e6c]={...lastOrders[_0x2f5e6c],'orderId':_0x1c6ebf['id'],'amount':_0x1c6ebf[_0x25273c(0x22a)],'price':_0x1c6ebf[_0x25273c(0x1bb)],'fee':_0x1c6ebf[_0x25273c(0x1c0)]});if(config[_0x25273c(0x236)]!=0x0){let _0xab5335=null;if(cooldownTracker[_0x25273c(0x25f)]==config[_0x25273c(0x236)]-0x1)_0xab5335=cooldownTracker[_0x25273c(0x18f)]();const _0x487bc7=getTimeStamp();cooldownTracker[_0x25273c(0x13d)](_0x487bc7);if(_0xab5335){const _0x83917e=fns['differenceInSeconds'](new Date(_0x487bc7),new Date(_0xab5335));if(_0x83917e<cooldownInterval){logHistory(_0x25273c(0x25d),'Executed\x20'+config[_0x25273c(0x236)]+_0x25273c(0x271)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x25273c(0x12e)),coolingDown=!![];break;}}}}catch(_0x33e51e){if(_0x33e51e['toString']()['includes'](_0x25273c(0x140)))lastOrders=lastOrders['filter'](_0x1aff1d=>_0x1aff1d[_0x25273c(0x1a8)]!=_0x551fe7),logHistory(_0x25273c(0x25d),_0x25273c(0x1a4)+_0x551fe7);else _0x33e51e[_0x25273c(0x187)]()['includes'](_0x25273c(0x22c))?(lastOrders=lastOrders[_0x25273c(0x215)](_0x3fc570=>_0x3fc570[_0x25273c(0x1a8)]!=_0x551fe7),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x551fe7)):(lastOrders=lastOrders['filter'](_0x22323c=>_0x22323c[_0x25273c(0x1a8)]!=_0x551fe7),await handleError(_0x33e51e,'placeOrder()',_0x551fe7));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x25273c(0x25f)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x345038=config[_0x25273c(0x192)]==_0x25273c(0x24e)?validateOrderTimeout*0x3c*0x3e8:config[_0x25273c(0x189)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x345038);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x25273c(0x1ba),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x25273c(0x127)]&&logHistory(_0x25273c(0x25d),_0x25273c(0x1a1));else lockOrders!=ORDERS[_0x25273c(0x27c)]&&(!config['headless']&&(config[_0x25273c(0x192)]==_0x25273c(0x24e)?logHistory(_0x25273c(0x25d),_0x25273c(0x1c5)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x2a027a){const _0x4fe1e9=_0x41ba0f,_0xaff83b={...config,'openOrders':_0x2a027a};let _0x1759c8=dbConfig[_0x4fe1e9(0x16e)](_0x4fe1e9(0x13a))[_0x4fe1e9(0x228)]({'botID':botID})[_0x4fe1e9(0x13e)]();_0x1759c8&&dbConfig[_0x4fe1e9(0x16e)](_0x4fe1e9(0x13a))['find']({'botID':botID})['assign'](_0xaff83b)[_0x4fe1e9(0x1f4)]();}function restoreOrders(){const _0x15578b=_0x41ba0f;let _0x235e73;config[_0x15578b(0x277)]&&allOpenOrders[_0x15578b(0x265)](_0x32b594=>{const _0x303606=_0x15578b,_0x31120b=config['openOrders'][_0x303606(0x228)](_0x7a6e2d=>_0x7a6e2d[_0x303606(0x18a)]==_0x32b594['id']);_0x31120b&&(lastOrders[_0x303606(0x13d)](_0x31120b),_0x235e73=_0x32b594['timestamp']);});if(lastOrders[_0x15578b(0x25f)]>0x0){lockOrders=ORDERS[_0x15578b(0x274)],validateOrdersState=_0x15578b(0x164),allOrdersPlaced=!![];const _0x1fa298=new Date()[_0x15578b(0x21c)](),_0x255843=config[_0x15578b(0x192)]==_0x15578b(0x24e)?validateOrderTimeout*0x3c*0x3e8:config[_0x15578b(0x189)]*0x3c*0x3e8;if(_0x235e73+_0x255843>_0x1fa298){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2118cb=_0x15578b;validateOrders(_0x2118cb(0x244));},_0x235e73+_0x255843-_0x1fa298);}else validateOrders(_0x15578b(0x244));}}async function sendMetricsTelegram(){const _0x3a7ff1=_0x41ba0f;if(!coinsLoaded){process['send']({'telegrammsg':_0x3a7ff1(0x264)},_0x3e9672=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x45cc6='';if(config[_0x3a7ff1(0x1bf)])_0x45cc6=_0x3a7ff1(0x1de)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x45cc6=_0x3a7ff1(0x1fe)+botID+_0x3a7ff1(0x220);const _0x43aa60=getKPIs(_0x3a7ff1(0x241)),_0x3fcb8f=getKPIs(_0x3a7ff1(0x298),config[_0x3a7ff1(0x298)]),_0xe81b3=getKPIs(_0x3a7ff1(0x28e)),_0x4f1c75=getKPIs(_0x3a7ff1(0x191),config['fiat']);_0x45cc6+=_0x3a7ff1(0x12c),_0x45cc6+=_0x43aa60['leftTxt']+_0x3a7ff1(0x124)+_0x43aa60[_0x3a7ff1(0x13e)]+'\x0a',_0x45cc6+=_0x43aa60[_0x3a7ff1(0x15a)]+':\x20'+_0x43aa60['change']+'%\x0a',_0x45cc6+=_0x3fcb8f[_0x3a7ff1(0x231)]+_0x3a7ff1(0x124)+_0x3fcb8f['value']+'\x0a',_0x45cc6+=_0x3fcb8f['rightTxt']+':\x20'+_0x3fcb8f[_0x3a7ff1(0x135)]+'%\x0a',_0x45cc6+=_0xe81b3[_0x3a7ff1(0x231)]+':\x20'+_0xe81b3[_0x3a7ff1(0x13e)]+'\x20('+config[_0x3a7ff1(0x241)]+')\x0a',_0x45cc6+=_0xe81b3[_0x3a7ff1(0x15a)]+':\x20'+_0xe81b3[_0x3a7ff1(0x135)]+_0x3a7ff1(0x23e)+config['basecoin']+')\x0a',_0x45cc6+=_0x4f1c75['leftTxt']+':\x20'+_0x4f1c75[_0x3a7ff1(0x13e)]+'\x20('+config['fiat']+')\x0a',_0x45cc6+=_0x4f1c75[_0x3a7ff1(0x15a)]+':\x20'+_0x4f1c75['change']+_0x3a7ff1(0x23e)+config[_0x3a7ff1(0x298)]+')\x0a',_0x45cc6+=_0x3a7ff1(0x150),process['send']({'telegrammsg':_0x45cc6},_0x43d58e=>{});}async function sendPortfolioTelegram(){const _0x21b986=_0x41ba0f;if(!coinsLoaded){process[_0x21b986(0x1ef)]({'telegrammsg':_0x21b986(0x264)},_0x16e34f=>{});return;}let _0x5f135a='';if(config[_0x21b986(0x1bf)])_0x5f135a=_0x21b986(0x1de)+config['botname']+_0x21b986(0x121);else _0x5f135a=_0x21b986(0x1fe)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5f135a+=_0x21b986(0x12c),_0x5f135a+=_0x21b986(0x253),_0x5f135a+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5f135a+='-------------------------------\x0a',currentCoins[_0x21b986(0x265)](_0x26a0cf=>{const _0x300a4c=_0x21b986;_0x5f135a+=_0x26a0cf[_0x300a4c(0x1a0)]['padEnd'](0x7)+'|\x20'+formatPad(_0x26a0cf[_0x300a4c(0x23c)],0x2,0x6)+'|\x20'+formatPad(_0x26a0cf['target'],0x2,0x6)+'|\x20'+formatPad(_0x26a0cf[_0x300a4c(0x226)]*0x64,0x2,0x6)+'\x0a';}),_0x5f135a+=_0x21b986(0x150),process['send']({'telegrammsg':_0x5f135a},_0x2aa5fd=>{});}function formatPad(_0x9473db,_0x2c3784,_0xb25ba8){const _0x18a485=_0x41ba0f,_0x286722=formatResultString(_0x9473db,_0x2c3784);return _0x286722?_0x286722['padStart'](_0xb25ba8):''[_0x18a485(0x133)](_0xb25ba8);}function logHistory(_0x44afca,_0x22a709,_0x49261b=''){const _0x395e58=_0x41ba0f;let _0xe4952f={'time':getTimeStamp(),'type':_0x44afca,'event':_0x22a709};dbLogs[_0x395e58(0x16e)](_0x395e58(0x1a2))['push'](_0xe4952f)[_0x395e58(0x1f4)]();if(_0x49261b=='')_0x49261b=_0x22a709;proxyEmit('event',{'log':_0xe4952f,'summary':_0x49261b}),process[_0x395e58(0x1ef)]({'telegram':{..._0xe4952f,'botname':config['botname'],'showname':config[_0x395e58(0x1bf)]}},_0x1813f4=>{}),logger[_0x395e58(0x13c)](''+_0xe4952f['event']);}function emitHistory(_0x1491ff={}){const _0x28e430=_0x41ba0f;Object['keys'](_0x1491ff)[_0x28e430(0x25f)]==0x0&&(_0x1491ff={'type':[_0x28e430(0x205),_0x28e430(0x1bc)],'event':'','page':0x1});if(_0x1491ff['type'][_0x28e430(0x1f5)]('event'))_0x1491ff[_0x28e430(0x234)][_0x28e430(0x238)](_0x1491ff[_0x28e430(0x234)][_0x28e430(0x237)]('event'),0x1,_0x28e430(0x25d),_0x28e430(0x1ac),_0x28e430(0x1ba));if(dbLogs[_0x28e430(0x242)]('logs')[_0x28e430(0x13e)]()){let _0x55c531=dbLogs['get']('logs')[_0x28e430(0x215)](_0xfb6757=>{const _0x28d9b5=_0x28e430;if(_0x1491ff['type'][_0x28d9b5(0x25f)]==0x0)return![];else return _0x1491ff[_0x28d9b5(0x234)][_0x28d9b5(0x1f5)](_0xfb6757[_0x28d9b5(0x234)]);})['filter'](_0x172e6a=>{const _0xb05d60=_0x28e430;if(_0x1491ff[_0xb05d60(0x1bc)]=='')return!![];else return _0x172e6a['event'][_0xb05d60(0x28d)]()[_0xb05d60(0x1f5)](_0x1491ff[_0xb05d60(0x1bc)][_0xb05d60(0x28d)]());})[_0x28e430(0x286)]('time'),_0x36cc91=_0x55c531[_0x28e430(0x13e)]()['length'];_0x55c531=_0x55c531[_0x28e430(0x156)]()[_0x28e430(0x198)]((_0x1491ff[_0x28e430(0x207)]-0x1)*logPageSize,_0x1491ff[_0x28e430(0x207)]*logPageSize-0x1)[_0x28e430(0x156)]()[_0x28e430(0x13e)](),proxyEmit('event-history',{'logs':_0x55c531,'total':_0x36cc91});}else proxyEmit(_0x28e430(0x122),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x390a71){const _0xba8cca=_0x41ba0f;if(dbLogs[_0xba8cca(0x242)](_0xba8cca(0x1a2))['value']()){const _0x143ea3=dbLogs[_0xba8cca(0x16e)](_0xba8cca(0x1a2))[_0xba8cca(0x286)](_0xba8cca(0x147))['filter'](_0x372960=>{const _0x424d9e=_0xba8cca;return _0x372960[_0x424d9e(0x234)]==_0x424d9e(0x205);})[_0xba8cca(0x13e)]();dbLogs[_0xba8cca(0x16e)](_0xba8cca(0x1a2))[_0xba8cca(0x1ce)]()[_0xba8cca(0x1f4)](),dbLogs['get']('logs')[_0xba8cca(0x180)](_0x143ea3)[_0xba8cca(0x1f4)](),emitHistory(_0x390a71);}}async function pauseBot(_0x57c8d8=''){const _0x3adf8e=_0x41ba0f,_0x3531ab=new Date()['getTime']();if(!lastErrorShown||_0x3531ab-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3531ab;!lastBotPause?(lastBotPause=_0x3531ab,consecutivePauses=0x1):(_0x3531ab-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3adf8e(0x1ef)]({'stop':_0x3adf8e(0x1a6)},_0x6f50fe=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3adf8e(0x21c)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x57c8d8)_0x57c8d8+=_0x3adf8e(0x184);logHistory(_0x3adf8e(0x25d),_0x57c8d8+_0x3adf8e(0x212)+pauseBotInterval/0xea60+_0x3adf8e(0x131)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x30f506=_0x41ba0f;process['send']({'stop':_0x30f506(0x28f)},_0x311295=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1659a7,_0x5790ba){const _0x5bf71b=_0x41ba0f;if(_0x1659a7['toString']()[_0x5bf71b(0x1f5)]('API-key\x20format\x20invalid'))return logHistory(_0x5bf71b(0x25d),config[_0x5bf71b(0x216)]+_0x5bf71b(0x149)),![];else{if(_0x1659a7[_0x5bf71b(0x187)]()[_0x5bf71b(0x1f5)](_0x5bf71b(0x292)))return logHistory('error',config['exchange']+_0x5bf71b(0x24d)),![];else{if(_0x1659a7[_0x5bf71b(0x187)]()[_0x5bf71b(0x1f5)](_0x5bf71b(0x1b1)))return logHistory(_0x5bf71b(0x25d),config[_0x5bf71b(0x216)]+_0x5bf71b(0x1ec)+config[_0x5bf71b(0x216)]),![];else await handleError(_0x1659a7,_0x5790ba);}}}async function handleError(_0x3b56dd,_0x153454,_0x2cdd3c=''){const _0x4310fd=_0x41ba0f;if(_0x3b56dd[_0x4310fd(0x187)]()['includes'](_0x4310fd(0x185)))await pauseBot(config[_0x4310fd(0x216)]+_0x4310fd(0x1db));else{if(_0x3b56dd[_0x4310fd(0x187)]()[_0x4310fd(0x1f5)](_0x4310fd(0x1da)))await pauseBot(config[_0x4310fd(0x216)]+'\x20not\x20available');else{if(_0x3b56dd[_0x4310fd(0x187)]()[_0x4310fd(0x1f5)](_0x4310fd(0x177)))await pauseBot(config['exchange']+_0x4310fd(0x20f));else{if(_0x3b56dd[_0x4310fd(0x187)]()['includes'](_0x4310fd(0x1ad)))logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x211)),logHistory(_0x4310fd(0x25d),_0x4310fd(0x201)),await killBot();else{if(_0x3b56dd[_0x4310fd(0x187)]()['includes'](_0x4310fd(0x1e1)))logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x203)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3b56dd[_0x4310fd(0x187)]()['includes'](_0x4310fd(0x26e)))logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x184)+config['exchange']+_0x4310fd(0x149)),logHistory(_0x4310fd(0x25d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3b56dd[_0x4310fd(0x187)]()['includes'](_0x4310fd(0x292)))logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x184)+config['exchange']+_0x4310fd(0x24d)),logHistory(_0x4310fd(0x25d),_0x4310fd(0x201)),await killBot();else{if(_0x3b56dd[_0x4310fd(0x187)]()[_0x4310fd(0x1f5)](_0x4310fd(0x1b1)))logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x184)+config['exchange']+_0x4310fd(0x195)+config[_0x4310fd(0x216)]),logHistory(_0x4310fd(0x25d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x3b56dd['toString']()[_0x4310fd(0x1f5)](_0x4310fd(0x208))?logHistory(_0x4310fd(0x25d),_0x153454+_0x4310fd(0x24f)+_0x2cdd3c):(logger[_0x4310fd(0x13c)](_0x153454+_0x4310fd(0x243),_0x3b56dd),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x4667c6,_0x2bb224){return parseFloat(_0x4667c6['toFixed'](_0x2bb224));}function formatResultTruncate(_0x7d39d3,_0x5296b1){let _0x4d607b=formatResultString(_0x7d39d3,0xa),_0x47d007=_0x4d607b['indexOf']('.');return _0x47d007!=-0x1&&(_0x4d607b=_0x4d607b['slice'](0x0,_0x47d007+_0x5296b1+0x1)),Number(_0x4d607b);}function formatResultString(_0x3a575e,_0x22a224){const _0x5217d9=_0x41ba0f;let _0x1b4f9a;if(!(''+_0x3a575e)[_0x5217d9(0x1f5)]('e'))_0x1b4f9a=+(Math['round'](_0x3a575e+'e+'+_0x22a224)+'e-'+_0x22a224);else{let _0x2dfecd=(''+_0x3a575e)[_0x5217d9(0x143)]('e'),_0x46b855='';+_0x2dfecd[0x1]+_0x22a224>0x0&&(_0x46b855='+'),_0x1b4f9a=+(Math[_0x5217d9(0x206)](+_0x2dfecd[0x0]+'e'+_0x46b855+(+_0x2dfecd[0x1]+_0x22a224))+'e-'+_0x22a224);}return Number(_0x1b4f9a)['toFixed'](_0x22a224);}function getServerTime(){const _0x29eba0=_0x41ba0f,_0x2430dd=new Date();return _0x2430dd[_0x29eba0(0x1cc)]()+'/'+(_0x2430dd[_0x29eba0(0x182)]()+0x1)[_0x29eba0(0x187)]()['padStart'](0x2,'0')+'/'+_0x2430dd[_0x29eba0(0x21d)]()[_0x29eba0(0x187)]()[_0x29eba0(0x133)](0x2,'0')+'\x20'+_0x2430dd[_0x29eba0(0x158)]()[_0x29eba0(0x187)]()[_0x29eba0(0x133)](0x2,'0')+':'+_0x2430dd['getMinutes']()[_0x29eba0(0x187)]()[_0x29eba0(0x133)](0x2,'0')+':'+_0x2430dd[_0x29eba0(0x181)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5903c8=_0x41ba0f,_0x73ed3e=shiftedTime();return _0x73ed3e['getFullYear']()+'/'+(_0x73ed3e[_0x5903c8(0x182)]()+0x1)[_0x5903c8(0x187)]()[_0x5903c8(0x133)](0x2,'0')+'/'+_0x73ed3e[_0x5903c8(0x21d)]()['toString']()[_0x5903c8(0x133)](0x2,'0')+'\x20'+_0x73ed3e[_0x5903c8(0x158)]()[_0x5903c8(0x187)]()['padStart'](0x2,'0')+':'+_0x73ed3e['getMinutes']()[_0x5903c8(0x187)]()['padStart'](0x2,'0')+':'+_0x73ed3e[_0x5903c8(0x181)]()['toString']()[_0x5903c8(0x133)](0x2,'0');}function getDate(){const _0x26dc53=_0x41ba0f,_0x3b107b=shiftedTime();return _0x3b107b[_0x26dc53(0x1cc)]()+'/'+(_0x3b107b[_0x26dc53(0x182)]()+0x1)[_0x26dc53(0x187)]()[_0x26dc53(0x133)](0x2,'0')+'/'+_0x3b107b['getDate']()[_0x26dc53(0x187)]()['padStart'](0x2,'0');}function getHour(){const _0x36a85d=_0x41ba0f,_0x15e61c=shiftedTime();return _0x15e61c['getHours']()[_0x36a85d(0x187)]()[_0x36a85d(0x133)](0x2,'0');}function sleep(_0x1ab839){return new Promise(_0x314dc7=>setTimeout(_0x314dc7,_0x1ab839));}function shiftedTime(){const _0x11f07e=_0x41ba0f,_0x163fdd=new Date();let _0x22168e=_0x163fdd;if(config&&config[_0x11f07e(0x224)]!==0x0)_0x22168e=fns[_0x11f07e(0x1e2)](_0x163fdd,{'hours':config['timeshift']});return _0x22168e;}function timer(_0x176875){const _0x16aa67=_0x41ba0f,_0x4ac380=new Date();!lasttime?console['log'](_0x16aa67(0x297),_0x176875,_0x4ac380):console['log'](_0x16aa67(0x297),_0x176875,(_0x4ac380-lasttime)/0x3e8),lasttime=_0x4ac380;}