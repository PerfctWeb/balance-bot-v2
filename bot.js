const _0x2aa5c3=_0x44f1;(function(_0x39ccd3,_0x31fcf1){const _0x1b6732=_0x44f1,_0x1fa7e2=_0x39ccd3();while(!![]){try{const _0x6e0f24=-parseInt(_0x1b6732(0x282))/0x1+-parseInt(_0x1b6732(0x27f))/0x2*(parseInt(_0x1b6732(0x1fa))/0x3)+parseInt(_0x1b6732(0x206))/0x4+-parseInt(_0x1b6732(0x2bb))/0x5*(-parseInt(_0x1b6732(0x22c))/0x6)+-parseInt(_0x1b6732(0x259))/0x7+parseInt(_0x1b6732(0x141))/0x8+parseInt(_0x1b6732(0x1b5))/0x9*(-parseInt(_0x1b6732(0x1e1))/0xa);if(_0x6e0f24===_0x31fcf1)break;else _0x1fa7e2['push'](_0x1fa7e2['shift']());}catch(_0x3e913f){_0x1fa7e2['push'](_0x1fa7e2['shift']());}}}(_0x3a07,0xbf81f));const _0x256a16=function(){let _0x1dc470=!![];return function(_0x2a109f,_0x1f07b1){const _0x56f773=_0x1dc470?function(){const _0x2d7176=_0x44f1;if(_0x1f07b1){const _0x37f5c6=_0x1f07b1[_0x2d7176(0x172)](_0x2a109f,arguments);return _0x1f07b1=null,_0x37f5c6;}}:function(){};return _0x1dc470=![],_0x56f773;};}(),_0x22f2f7=_0x256a16(this,function(){const _0x4b807a=_0x44f1;return _0x22f2f7[_0x4b807a(0x1fc)]()[_0x4b807a(0x1b9)](_0x4b807a(0x22e))[_0x4b807a(0x1fc)]()[_0x4b807a(0x144)](_0x22f2f7)['search'](_0x4b807a(0x22e));});_0x22f2f7();'use strict';const ccxt=require(_0x2aa5c3(0x256)),low=require('lowdb'),FileSync=require(_0x2aa5c3(0x26c)),fs=require('fs'),fns=require(_0x2aa5c3(0x142)),Crypt=require('hybrid-crypto-js')[_0x2aa5c3(0x201)],util=require(_0x2aa5c3(0x2b5)),argv=require(_0x2aa5c3(0x173))(process[_0x2aa5c3(0x16d)][_0x2aa5c3(0x291)](0x2))[_0x2aa5c3(0x16d)],path=require(_0x2aa5c3(0x158));let exchange;global[_0x2aa5c3(0x1ea)]={},global[_0x2aa5c3(0x143)]={};const usdBasecoins=[_0x2aa5c3(0x238),'BUSD',_0x2aa5c3(0x250),_0x2aa5c3(0x15c),_0x2aa5c3(0x272),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2aa5c3(0x14a)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2aa5c3(0x24d)+pauseBotInterval/0xea60+_0x2aa5c3(0x293),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const serverversion=require(_0x2aa5c3(0x266))['version'],botID=process[_0x2aa5c3(0x16d)][0x2]||_0x2aa5c3(0x186),pattern=/^[0-9]{3}$/;!pattern[_0x2aa5c3(0x276)](botID)&&(console[_0x2aa5c3(0x242)](_0x2aa5c3(0x19f)+botID+_0x2aa5c3(0x188)),killBot());const userID=process[_0x2aa5c3(0x16d)][0x3]||'',configpath=userID?_0x2aa5c3(0x20c)+userID+'/':'./config/',logspath=userID?_0x2aa5c3(0x145)+userID+'/':_0x2aa5c3(0x145),loggerfile=fs['createWriteStream'](logspath+_0x2aa5c3(0x2b1),{'flags':'a'});!fs[_0x2aa5c3(0x2ae)](configpath)&&fs[_0x2aa5c3(0x278)](configpath);!fs[_0x2aa5c3(0x2ae)](logspath)&&fs[_0x2aa5c3(0x278)](logspath);const configfile=configpath+_0x2aa5c3(0x262)+botID+_0x2aa5c3(0x236),logfile=configpath+'bot-'+botID+_0x2aa5c3(0x296),performancefile=configpath+_0x2aa5c3(0x262)+botID+'-performance.json',coinresultsfile=configpath+_0x2aa5c3(0x262)+botID+_0x2aa5c3(0x239),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x2aa5c3(0x225),configbackuppath=configpath+_0x2aa5c3(0x1d0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2aa5c3(0x149)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2aa5c3(0x149)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x2aa5c3(0x277)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x2aa5c3(0x277)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2aa5c3(0x2a5),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xe3818f=>{console['log'](_0xe3818f);},'simple':_0x131f07=>{const _0x3adc08=_0x2aa5c3;console[_0x3adc08(0x242)](_0x131f07),loggerfile[_0x3adc08(0x277)](util[_0x3adc08(0x297)](_0x131f07)+'\x0a');},'full':async(_0x549777,_0x2bfda3='')=>{const _0x34e853=_0x2aa5c3;let _0x498727;if(config[_0x34e853(0x15f)])_0x498727=getTimeStamp()+':\x20'+config[_0x34e853(0x18c)]+_0x34e853(0x253)+_0x549777;else _0x498727=getTimeStamp()+_0x34e853(0x2c6)+botID+_0x34e853(0x253)+_0x549777;console[_0x34e853(0x242)](_0x498727),loggerfile[_0x34e853(0x277)](util[_0x34e853(0x297)](_0x498727)+'\x0a'),_0x2bfda3&&(console[_0x34e853(0x242)](_0x2bfda3),loggerfile[_0x34e853(0x277)](util['format'](_0x2bfda3)+'\x0a'));},'debug':async(_0xc6f822,_0x1cc63e='')=>{const _0x42af06=_0x2aa5c3;let _0xca740d;if(config[_0x42af06(0x15f)])_0xca740d=getTimeStamp()+':\x20'+config[_0x42af06(0x18c)]+_0x42af06(0x151)+_0xc6f822;else _0xca740d=getTimeStamp()+':\x20Bot\x20'+botID+_0x42af06(0x151)+_0xc6f822;if(debugging)console['log'](_0xca740d);loggerfile[_0x42af06(0x277)](util[_0x42af06(0x297)](_0xca740d)+'\x0a');if(_0x1cc63e){if(debugging)console['log'](_0x1cc63e);loggerfile[_0x42af06(0x277)](util[_0x42af06(0x297)](_0x1cc63e)+'\x0a');}}};process['on'](_0x2aa5c3(0x271),function(_0x4a4dd3){const _0x28e22a=_0x2aa5c3;logHistory(_0x28e22a(0x2be),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x28e22a(0x248)](_0x28e22a(0x192),_0x4a4dd3);});settings[_0x2aa5c3(0x1f3)]!=config[_0x2aa5c3(0x1f3)]&&updateTimeshift(settings[_0x2aa5c3(0x1f3)]);settings[_0x2aa5c3(0x2ba)]!=config[_0x2aa5c3(0x2ba)]&&updateOnepagemode(settings[_0x2aa5c3(0x2ba)]);process[_0x2aa5c3(0x1c1)]({'started':_0x2aa5c3(0x2a2)},_0x431f1e=>{}),initializeProcessListeners();function proxyEmit(_0x133c52,_0x48ef2f=null){process['send']({'function':_0x133c52,'args':_0x48ef2f},_0x3db75b=>{});}function initializeProcessListeners(){const _0x9ec359=_0x2aa5c3;process['on'](_0x9ec359(0x16a),_0x208cf3=>{const _0x28e0fd=_0x9ec359;switch(Object[_0x28e0fd(0x254)](_0x208cf3)[0x0]){case _0x28e0fd(0x1f3):_0x208cf3['timeshift']!=undefined&&(settings['timeshift']=_0x208cf3['timeshift'],updateTimeshift(settings[_0x28e0fd(0x1f3)]));break;case _0x28e0fd(0x2ba):_0x208cf3[_0x28e0fd(0x2ba)]!=undefined&&(settings[_0x28e0fd(0x2ba)]=_0x208cf3[_0x28e0fd(0x2ba)],updateOnepagemode(settings[_0x28e0fd(0x2ba)]));break;case'bots':_0x208cf3[_0x28e0fd(0x191)]!=undefined&&(bots=JSON[_0x28e0fd(0x2b8)](_0x208cf3[_0x28e0fd(0x191)]),proxyEmit(_0x28e0fd(0x191),bots));break;case _0x28e0fd(0x279):switch(_0x208cf3[_0x28e0fd(0x279)]){case _0x28e0fd(0x2d2):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x208cf3['args']);break;case _0x28e0fd(0x187):deleteHistoryAlerts(_0x208cf3[_0x28e0fd(0x220)]);break;case _0x28e0fd(0x18e):getPortfolio(_0x208cf3[_0x28e0fd(0x220)]);break;case _0x28e0fd(0x1d4):storeConfiguration(_0x208cf3['args']);break;case _0x28e0fd(0x1c0):storeHeadless(_0x208cf3['args']);break;case'storeFiat':storeFiat(_0x208cf3[_0x28e0fd(0x220)]);break;case _0x28e0fd(0x215):resetHistory();break;case _0x28e0fd(0x24e):getStartingBalances(getNormalizedPerformance());break;case _0x28e0fd(0x171):placeOrder(_0x208cf3[_0x28e0fd(0x220)]);break;case _0x28e0fd(0x157):cancelLoading();break;case _0x28e0fd(0x1d6):showConfig();break;case _0x28e0fd(0x1e0):sendMetricsTelegram();break;case _0x28e0fd(0x25d):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1014a8=![]){const _0x2c9106=_0x2aa5c3;logger[_0x2c9106(0x248)]('Reset\x20|\x20'+(_0x1014a8?_0x2c9106(0x212):_0x2c9106(0x15e))+_0x2c9106(0x154)+config[_0x2c9106(0x177)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1014a8)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2c9106(0x153)]!=''&&config['apiKey']!=_0x2c9106(0x263)){loadingProgress=0x0;if(_0x1014a8){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xa8d926){handleErrorNoStop(_0xa8d926,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x33cb52=await getCoins();[currentCoins,currentCoinsAll]=_0x33cb52,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2c9106(0x1ab)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x564493=_0x2aa5c3;exchangeStopped=!![];try{await exchange[_0x564493(0x269)]();}catch(_0x50b41c){await handleError(_0x50b41c,_0x564493(0x22f));}}async function reloadExchange(){const _0x181e12=_0x2aa5c3;while(lockOrders!=ORDERS[_0x181e12(0x14a)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x181e12(0x248)](_0x181e12(0x1c6)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x148a5f=config[_0x2aa5c3(0x177)],_0x182690=config[_0x2aa5c3(0x153)],_0x5cebf0=config[_0x2aa5c3(0x1e3)],_0x428e42=config['apiPassword']){const _0x21c2f4=_0x2aa5c3;exchange&&await stopExchange();!supportedExchanges()[_0x21c2f4(0x20f)](_0x148a5f)&&(logHistory(_0x21c2f4(0x2be),_0x21c2f4(0x14e)+_0x148a5f+_0x21c2f4(0x152)),killBot());const _0x30d537=ccxt[_0x21c2f4(0x2c8)][_0x148a5f[_0x21c2f4(0x2ab)]()];exchange=new _0x30d537({'apiKey':_0x182690,'secret':_0x5cebf0,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x21c2f4(0x24f)}});if(_0x428e42)exchange['password']=_0x428e42;}function setStableCoins(){const _0x5a0cbf=_0x2aa5c3;let _0x2fd235=config[_0x5a0cbf(0x169)]=='ETH'?'ETH':_0x5a0cbf(0x21f),_0x51b97c=!allSymbols['includes'](_0x2fd235+_0x5a0cbf(0x2c0))?_0x5a0cbf(0x15c):_0x5a0cbf(0x238),_0x375768=!allSymbols[_0x5a0cbf(0x20f)](_0x2fd235+'/EUR')?_0x51b97c:_0x5a0cbf(0x1bc);stablecoins={'eur':{'coin':''+_0x2fd235+_0x375768,'symbol':_0x2fd235+'/'+_0x375768},'usd':{'coin':''+_0x2fd235+_0x51b97c,'symbol':_0x2fd235+'/'+_0x51b97c}};}async function initwsCcxt(){const _0x151937=_0x2aa5c3;initCycle++;const _0x381b3b=initCycle;let _0x164223=[];config[_0x151937(0x1b3)][_0x151937(0x26a)](_0x2f2c26=>{const _0x900936=_0x151937;if(!_0x2f2c26['excluded']&&_0x2f2c26[_0x900936(0x233)]!=config[_0x900936(0x169)])_0x164223[_0x900936(0x1a9)](_0x2f2c26[_0x900936(0x20e)]);});if(!_0x164223[_0x151937(0x20f)](stablecoins[_0x151937(0x16f)]['symbol']))_0x164223['push'](stablecoins[_0x151937(0x16f)]['symbol']);if(!_0x164223[_0x151937(0x20f)](stablecoins['usd'][_0x151937(0x20e)]))_0x164223[_0x151937(0x1a9)](stablecoins['usd'][_0x151937(0x20e)]);if(config[_0x151937(0x177)][_0x151937(0x166)]('Binance')){if(!_0x164223['includes'](_0x151937(0x283)+config[_0x151937(0x169)]))_0x164223[_0x151937(0x1a9)](_0x151937(0x283)+config[_0x151937(0x169)]);}loadCoins(_0x164223),_0x164223=validateSymbols(_0x164223);const _0x181bd5=async _0x44e140=>{const _0x2b6ee6=_0x151937;let _0x57a337;try{const _0x58bfe4=await exchange['fetchTickers'](_0x44e140);Object[_0x2b6ee6(0x285)](_0x58bfe4)[_0x2b6ee6(0x26a)](_0x36afea=>{const _0x4282e3=_0x2b6ee6;_0x57a337=_0x36afea[0x1][_0x4282e3(0x20e)],global['ticker'][noslash(_0x57a337)]=_0x36afea[0x1]['last'],global[_0x4282e3(0x143)][_0x57a337]=_0x36afea[0x1]['percentage'];});}catch(_0x2a4710){await handleError(_0x2a4710,_0x2b6ee6(0x200),_0x57a337);}},_0x18d636=async _0x445fe2=>{const _0x40341a=_0x151937;while(initCycle==_0x381b3b){if(!botPaused)try{const _0x3b918e=await exchange[_0x40341a(0x1f2)](_0x445fe2);global[_0x40341a(0x1ea)][noslash(_0x3b918e[0x0][_0x40341a(0x20e)])]=_0x3b918e[0x0]['price'],await sleep(0x3e8);}catch(_0x246428){if(!exchangeStopped)await handleError(_0x246428,'watchTrades()',_0x445fe2);}else await sleep(0x64);}},_0x3b55c7=async _0x137c94=>{const _0x7f7f=_0x151937;await sleep(0x3c*0x3e8);while(initCycle==_0x381b3b){if(!botPaused){let _0x549e9d;try{const _0xb3b6e2=await exchange[_0x7f7f(0x2cb)](_0x137c94);Object[_0x7f7f(0x285)](_0xb3b6e2)[_0x7f7f(0x26a)](_0x50b3f7=>{const _0x412c9d=_0x7f7f;_0x549e9d=_0x50b3f7[0x1][_0x412c9d(0x20e)],global[_0x412c9d(0x143)][_0x549e9d]=_0x50b3f7[0x1]['percentage'];}),await sleep(0x3c*0x3e8);}catch(_0x2350bd){if(!exchangeStopped)await handleError(_0x2350bd,_0x7f7f(0x18f),_0x549e9d);}}else await sleep(0x64);}},_0x2d8773=async _0x35628c=>{const _0x360a36=_0x151937;while(initCycle==_0x381b3b){if(!botPaused)try{const _0x41fd0d=await exchange['watchOrders'](_0x35628c);initCycle==_0x381b3b&&_0x41fd0d[_0x360a36(0x26a)](_0x2b14be=>{const _0x2c562c=_0x360a36;updateNumberCoinsCcxt(_0x2b14be),logger[_0x2c562c(0x248)](_0x2c562c(0x1ae)+_0x2b14be['symbol']+'\x20'+_0x2b14be[_0x2c562c(0x265)]+'\x20'+initCycle+'\x20'+_0x381b3b);});}catch(_0x41d382){if(!exchangeStopped)await handleError(_0x41d382,_0x360a36(0x222));}else await sleep(0x64);}};_0x181bd5(_0x164223),_0x3b55c7(_0x164223),_0x164223[_0x151937(0x26a)](_0x334df4=>{_0x18d636(_0x334df4),_0x2d8773(_0x334df4);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x49c44d=_0x2aa5c3;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x528c4e=await getCoins(),[_0x5056a1,_0x13e3e9]=_0x528c4e;let _0x2e6d6a=[];currentCoins[_0x49c44d(0x26a)](_0x1f98e8=>{const _0x289e73=_0x49c44d,_0x16235d=_0x5056a1[_0x289e73(0x217)](_0xf5407e=>_0xf5407e[_0x289e73(0x233)]==_0x1f98e8[_0x289e73(0x233)]);if(_0x16235d){if(_0x1f98e8['number']!=_0x16235d[_0x289e73(0x17f)]){let _0x560d01;if(_0x1f98e8['coin']!=config[_0x289e73(0x169)]){const _0x231c5c=global[_0x289e73(0x1ea)][noslash(_0x1f98e8[_0x289e73(0x20e)])];_0x560d01=_0x1f98e8[_0x289e73(0x19d)]?0x1/_0x231c5c:_0x231c5c;}else _0x560d01=0x1;_0x2e6d6a[_0x289e73(0x1a9)]({'coin':_0x1f98e8[_0x289e73(0x233)],'symbol':_0x1f98e8[_0x289e73(0x20e)],'price':_0x560d01,'number':Number(formatResult(_0x16235d[_0x289e73(0x17f)]-_0x1f98e8[_0x289e73(0x17f)],0x8)),'basecoinvalue':_0x560d01*(_0x16235d['number']-_0x1f98e8[_0x289e73(0x17f)])});}}});if(_0x2e6d6a[_0x49c44d(0x1ab)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x49c44d(0x248)](_0x49c44d(0x2a1)+_0x2e6d6a[0x0][_0x49c44d(0x2c4)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x49c44d(0x23d)](_0x2e6d6a[0x0][_0x49c44d(0x2c4)])>lastFees[_0x49c44d(0x257)]){delete _0x2e6d6a[0x0][_0x49c44d(0x20e)],delete _0x2e6d6a[0x0][_0x49c44d(0x2c4)];let _0x4a7dbb=[],_0x1d81b8=[...config['liquidity']]||[],_0x287a69=config[_0x49c44d(0x1f1)];_0x1d81b8[_0x49c44d(0x175)]((_0x4a48dd,_0x260171)=>_0x4a48dd[_0x49c44d(0x1b6)]>_0x260171[_0x49c44d(0x1b6)]?-0x1:_0x260171[_0x49c44d(0x1b6)]>_0x4a48dd[_0x49c44d(0x1b6)]?0x1:0x0);const _0x3a24f6=getDate();if(_0x1d81b8[0x0]){const _0x264632=fns[_0x49c44d(0x2b8)](_0x1d81b8[0x0]['date'],_0x49c44d(0x1fe),new Date()),_0x2b17e7=fns[_0x49c44d(0x2b8)](_0x3a24f6,_0x49c44d(0x1fe),new Date());if(fns['isEqual'](_0x264632,_0x2b17e7)){_0x4a7dbb=_0x1d81b8[0x0][_0x49c44d(0x287)];const _0x53ea3f=_0x4a7dbb[_0x49c44d(0x217)](_0x32505c=>_0x32505c[_0x49c44d(0x233)]==_0x2e6d6a[0x0]['coin']);_0x53ea3f?(_0x53ea3f[_0x49c44d(0x17f)]+=_0x2e6d6a[0x0][_0x49c44d(0x17f)],_0x53ea3f[_0x49c44d(0x17f)]==0x0&&(_0x4a7dbb=_0x4a7dbb[_0x49c44d(0x183)](_0x44f8a7=>{const _0x2716fe=_0x49c44d;return _0x44f8a7[_0x2716fe(0x233)]!=_0x2e6d6a[0x0]['coin'];}))):_0x4a7dbb[_0x49c44d(0x1a9)](_0x2e6d6a[0x0]);const _0x194df3=_0x287a69[_0x49c44d(0x217)](_0x1ed039=>_0x1ed039[_0x49c44d(0x1b6)]==_0x3a24f6);_0x194df3[_0x49c44d(0x287)]=_0x4a7dbb;}else _0x287a69[_0x49c44d(0x1a9)]({'date':_0x3a24f6,'changes':[_0x2e6d6a[0x0]]});}const _0x44292c=_0x287a69[_0x49c44d(0x217)](_0x5163e7=>_0x5163e7[_0x49c44d(0x1b6)]==_0x3a24f6);if(_0x44292c){let _0x26c16a=!![];_0x44292c['changes'][_0x49c44d(0x26a)](_0x57c746=>{const _0x2751bc=_0x49c44d;if(_0x57c746[_0x2751bc(0x17f)]!=0x0)_0x26c16a=![];}),_0x26c16a&&(_0x287a69=_0x287a69['filter'](_0x46865a=>{const _0x186d4b=_0x49c44d;return _0x46865a[_0x186d4b(0x1b6)]!=_0x3a24f6;}));}let _0x3612cd=dbConfig[_0x49c44d(0x243)]('bot')[_0x49c44d(0x217)]({'botID':botID})[_0x49c44d(0x1b8)]();_0x3612cd&&(dbConfig['get'](_0x49c44d(0x1a1))[_0x49c44d(0x217)]({'botID':botID})[_0x49c44d(0x29f)]({'liquidity':_0x287a69})[_0x49c44d(0x277)](),config[_0x49c44d(0x1f1)]=_0x287a69),logHistory(_0x49c44d(0x195),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x2e6d6a[0x0][_0x49c44d(0x17f)])+'\x20'+_0x2e6d6a[0x0][_0x49c44d(0x233)]+'\x20'+(_0x2e6d6a[0x0][_0x49c44d(0x17f)]>0x0?'added':'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x49c44d(0x227),emittedConfiguration());}else logger[_0x49c44d(0x248)](_0x49c44d(0x1a7)+Math[_0x49c44d(0x23d)](_0x2e6d6a[0x0][_0x49c44d(0x17f)])+'\x20'+_0x2e6d6a[0x0][_0x49c44d(0x233)]+'\x20'+(_0x2e6d6a[0x0][_0x49c44d(0x17f)]>0x0?_0x49c44d(0x240):'removed'));transactionDetected=!![],currentCoins=_0x5056a1,currentCoinsAll=_0x13e3e9;}else logger[_0x49c44d(0x248)](_0x49c44d(0x1b0)+Math[_0x49c44d(0x23d)](_0x2e6d6a[0x0][_0x49c44d(0x17f)])+'\x20'+_0x2e6d6a[0x0]['coin']+'\x20'+(_0x2e6d6a[0x0][_0x49c44d(0x17f)]>0x0?_0x49c44d(0x240):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x5056a1,currentCoinsAll=_0x13e3e9;}await sleep(watchTransactionsInterval);}catch(_0x1b49ad){if(!exchangeStopped)await handleError(_0x1b49ad,_0x49c44d(0x156));}else await sleep(0x64);}}async function loadSymbols(){const _0x2c6bdf=_0x2aa5c3;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x2c6bdf(0x285)](markets)[_0x2c6bdf(0x26a)](_0x421e1d=>{const _0x48837a=_0x2c6bdf;_0x421e1d[0x1]['active']&&_0x421e1d[0x1][_0x48837a(0x24f)]&&allSymbols[_0x48837a(0x1a9)](_0x421e1d[0x0]);});}catch(_0x31ee95){throw _0x31ee95;}}function validateSymbols(_0x154810){const _0x3f560d=_0x2aa5c3;let _0x458bc4=[];return _0x154810[_0x3f560d(0x26a)](_0x3a44dc=>{const _0x305d5d=_0x3f560d;!allSymbols['includes'](_0x3a44dc)?logHistory(_0x305d5d(0x2be),_0x305d5d(0x288)+_0x3a44dc+_0x305d5d(0x1de)):_0x458bc4[_0x305d5d(0x1a9)](_0x3a44dc);}),_0x458bc4;}async function initclient(){const _0x155660=_0x2aa5c3;proxyEmit(_0x155660(0x227),emittedConfiguration()),proxyEmit(_0x155660(0x1e2),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x155660(0x14b),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3219fd=getNormalizedPerformance();emitPerformance(_0x3219fd),getStartingBalances(_0x3219fd);}async function toggleBotMode(){const _0x50aa44=_0x2aa5c3;let _0x527a63=dbConfig['get'](_0x50aa44(0x1a1))[_0x50aa44(0x217)]({'botID':botID})['value']();if(_0x527a63){const _0x3a2f78=!_0x527a63[_0x50aa44(0x2bc)];dbConfig[_0x50aa44(0x243)]('bot')[_0x50aa44(0x217)]({'botID':botID})[_0x50aa44(0x29f)]({'headless':_0x3a2f78})['write'](),config[_0x50aa44(0x2bc)]=_0x3a2f78,proxyEmit(_0x50aa44(0x227),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x394e74=>{});}async function loadCoins(_0x4cc090){const _0x2b70c3=_0x2aa5c3;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x599840,_0x369729=0x0,_0x20d9d6=0x0;_0x4cc090['forEach'](_0x27f5a6=>{const _0x2d1cc8=_0x44f1;loading[_0x2d1cc8(0x25c)][_0x2d1cc8(0x1a9)](_0x27f5a6);}),loadingCanceled=![];let _0x37dcb0=![];while(_0x599840!=_0x4cc090[_0x2b70c3(0x1ab)]+maxLoadingProgress){_0x599840=loadingProgress,_0x4cc090[_0x2b70c3(0x26a)](_0x5046de=>{const _0x4bd506=_0x2b70c3;if(global[_0x4bd506(0x1ea)][noslash(_0x5046de)]){loading[_0x4bd506(0x25c)]=loading['remainingSymbols'][_0x4bd506(0x183)](_0x25a9e1=>_0x25a9e1!=_0x5046de);if(!watchedSymbols[_0x4bd506(0x20f)](_0x5046de))watchedSymbols[_0x4bd506(0x1a9)](_0x5046de);_0x599840++;}}),loading[_0x2b70c3(0x289)]=Math[_0x2b70c3(0x1f6)](_0x599840/(_0x4cc090[_0x2b70c3(0x1ab)]+maxLoadingProgress)*0x64);loading[_0x2b70c3(0x289)]!=0x64&&(_0x20d9d6>0x1e*0x5&&(loading[_0x2b70c3(0x224)]=!![],emitLoadingProgress()),_0x20d9d6>0x78*0x5&&!_0x37dcb0&&(loading['cancel']=!![],emitLoadingProgress(),_0x37dcb0=!![],logHistory('error',_0x2b70c3(0x155)+loading[_0x2b70c3(0x25c)][_0x2b70c3(0x1d7)](',\x20')+_0x2b70c3(0x1b1)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x2b70c3(0x14f)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x4bcb24=_0x2b70c3;process[_0x4bcb24(0x1c1)]({'stop':'restart'},_0x4b3c29=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2b70c3(0x299)]=!![],emitLoadingProgress();break;}else _0x369729!=loading[_0x2b70c3(0x289)]&&(_0x369729=loading[_0x2b70c3(0x289)],emitLoadingProgress()),_0x20d9d6++,await sleep(0xc8);}_0x599840==_0x4cc090[_0x2b70c3(0x1ab)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2b70c3(0x1c1)]({'status':'enabled','live':_0x2b70c3(0x2a2)},_0x3ad340=>{}),_0x37dcb0&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5e630f=_0x2aa5c3;proxyEmit(_0x5e630f(0x227),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0xd063ac=_0x2aa5c3;proxyEmit(_0xd063ac(0x292),loading);}async function getFiat(){const _0x5bcf71=_0x2aa5c3;let _0x9a45a4=global[_0x5bcf71(0x1ea)][stablecoins[_0x5bcf71(0x16f)]['coin']],_0xa3b00=global[_0x5bcf71(0x1ea)][stablecoins[_0x5bcf71(0x2d0)][_0x5bcf71(0x233)]];return{'eur':Number(_0x9a45a4),'usd':Number(_0xa3b00)};}function _0x3a07(){const _0x1c21da=['customId','placeOrder()','success','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','NetworkError','UNLOCKING','decrypt','fees','emojibuy','2\x20-\x20Validate\x20orders:\x20','reverse','findIndex','Error:\x20Invalid\x20argument\x20','starting-balance-','bot','Invalid\x20quantity','floor','2\x20-\x20FILLED\x20known\x20order:\x20','ETH','ORDERS.UNLOCKING','Fee\x20discount\x20refund\x20detected:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','push','fetchOpenOrders','length','coins','time','Order:\x20','ongoing','Portfolio\x20change\x20detected:\x20','\x20-\x20bot\x20not\x20started','RequestTimeout','portfolio','amountToPrecision','90RVhsDF','date','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','value','search','recovery','2\x20-\x20Handled\x20open\x20orders','EUR','concat','Exchange','1\x20-\x20Validate\x20orders:\x20','storeHeadless','send','enabled','delta','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getMinutes','Executing\x20exchange\x20reload','buys','sells','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Order\x20amount\x20is\x20invalid:\x20','Limit\x20(high-margin)','\x20|\x20lock\x20orders:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','order','map','/backup/','splice','startprice','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','storeConfiguration','getFullYear','showConfig','join','\x20|\x20Custom\x20ID:\x20','Exception\x20thrown\x20in\x20','\x20order:\x20','LOCKED','.json','Executed\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','padStart','sendMetricsTelegram','546500elwGDI','exchanges','apiSecret','%\x20(','limit-low','</pre>','Unfilled\x20order(s)\x20canceled\x20after\x20','kill','watchOrders','ticker','last','2.6.0','colorscheme','toFixed','2.5.0','************','liquidity','watchTrades','timeshift','red_yellow_blue','Bot\x20','round','Waited\x20','event-history','DDoSProtection','5649RGuRvM','2\x20-\x20Orders\x20unlocked','toString','warning','yyyy/MM/dd','configuration-stored','initTickers()','Crypt','Invalid\x20API\x20key\x20or\x20secret\x20entered','Error\x20while\x20deleting\x20files:\x20','ID:\x20','realized','5678612Qjsenv','BNB','timestamp','canceled','unlinkSync','indexOf','./config/','AuthenticationError','symbol','includes','ExchangeNotAvailable','restart','exchange\x20reloaded','padEnd','getSeconds','resetHistory','datetime','find','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','yyyy-MM-dd\x27T\x27HH:mm:ss','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20:\x20','leftTxt','getCoinNumber()','ORDERS.UNLOCKED','BTC','args','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','watchOrders()','exec','timeout','bb-secure.json','fee','configuration','sortBy','1\x20-\x20Handle\x20open\x20orders','currency','excluded','6NPDSel','cooldown','(((.+)+)+)+$','stopExchange()','fetchBalance','threshold','breakeven','coin','balancing\x20resumed','recreate','-config.json','final','USD','-results.json','\x20exchange\x20error','amount','-performance.json','abs','InvalidNonce','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','added','startnumber','log','get','ORDERS.LOCKED','Net\x20effect','2\x20-\x20FILLED\x20unknown\x20order:\x20','\x20minutes\x20-\x20','debug','\x20|\x20','\x20portfolio:</b>\x20\x0a\x0a','none','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','\x20-\x20pausing\x20bot\x20for\x20','getStartingBalances','spot','TUSD','initial','open','\x20>\x20','keys','0\x20-\x20EXECUTION:\x20','ccxt','highest','closed','2311015idfOaZ','Bitget','Initializing\x20coin\x20results','remainingSymbols','sendPortfolioTelegram','-------------------------------\x0a','target','trade','password','bot-','***',':\x20timer\x20>','status','./version.json','offset','OrderNotFound','close','forEach','sell','lowdb/adapters/FileSync','change24h','autoliquidity','getHours','Transaction\x20detection\x20blocked','uncaughtException','USDC','has','netoffset','shift','test','write','mkdirSync','function','apiPassword','fiat','full','cloneDeep','parseISO','454mpQIGW','valid','getCoins()','1073703NBIScn','BNB/','openOrders','entries','Manual\x20balancing\x20required','changes','Invalid\x20symbol:\x20','progress','Cex','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20API\x20key\x20is\x20invalid','\x20metrics:</b>\x20\x0a\x0a','fetchTicker','price','getDate','slice','coin-loading-progress','\x20minutes','fromCodePoint','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','-events.json','format','settings','cancel','buy','\x20change','limit-high','stringify','Unknown\x20error\x20occured','assign','Binance','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','running','Net\x20','InvalidOrder','sha256','version','milliseconds','total','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','distribution','toLowerCase','emojisell','type','existsSync','\x20network\x20error','\x20orders\x20in\x20less\x20than\x20','/output-000.log','\x20value','rightTxt','Huobi','util','set','data','parse','1\x20-\x20Unlock\x20orders','onepagemode','5623565KsjpmE','headless','page','error','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','/USD','recent20','Error\x20details:','event','basecoinvalue','getOpenOrders()',':\x20Bot\x20','startdate','pro','Saving\x20configuration','Market','fetchTickers','toUpperCase','Avoiding\x20continuous\x20order\x20attempts','1\x20-\x20FILLED:\x20','ordertype','usd','getPortfolio(2)','initclient','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','split','starting-balances','4942704aEaHgK','date-fns','change','constructor','./logs/','API-key\x20format\x20invalid','privateKey','net-basecoin','defaults','UNLOCKED','balances','logs','market','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Huobipro','\x20>\x20[DEBUG]\x20','\x20exchange','apiKey','\x20|\x20exchange:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','watchTransactions()','cancelLoading','path','cost','No\x20more\x20open\x20orders\x20-\x20','InsufficientFunds','USDT','remove','exchange\x20not\x20reloaded','showname','performance','orderstatus','net-fiat','side','fetchClosedOrders','Limit\x20(low-margin)','startsWith','ask','replace','basecoin','message','limits','\x20API\x20secret\x20is\x20invalid','argv','secure','eur','orderId','placeOrder','apply','yargs/yargs','\x20not\x20responding','sort','bid','exchange','average','getTime','min','<b>','substring','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getPortfolio(1)','number','<pre>','2.3.5','<b>Bot\x20','filter','filled','random','001','deleteHistoryAlerts',',\x20must\x20be\x20a\x203\x20digit\x20number','createOrder','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','limit','botname','string','getPortfolio','fetchTickers()','no\x20open\x20orders','bots','Uncaught\x20Exception:'];_0x3a07=function(){return _0x1c21da;};return _0x3a07();}function capitalize(_0x124d16){const _0x4c2cdf=_0x2aa5c3;return _0x124d16[_0x4c2cdf(0x17c)](0x0,0x1)[_0x4c2cdf(0x2cc)]()+_0x124d16[_0x4c2cdf(0x17c)](0x1);}function supportedExchanges(){const _0x1eeeac=_0x2aa5c3,_0x371949=['ws',_0x1eeeac(0x2cb),_0x1eeeac(0x28e),_0x1eeeac(0x1f2),_0x1eeeac(0x1e9),'cancelOrder',_0x1eeeac(0x189),_0x1eeeac(0x1aa),_0x1eeeac(0x164),'fetchBalance'];let _0xbf0a02=[],_0x13dbb6=[],_0x5cf124=ccxt[_0x1eeeac(0x2c8)][_0x1eeeac(0x1e2)];_0x5cf124[_0x1eeeac(0x26a)](_0x526200=>{const _0xc3859e=_0x1eeeac;try{const _0x21ac70=new ccxt[(_0xc3859e(0x2c8))][_0x526200]();_0x13dbb6['push'](_0x21ac70);}catch(_0x48992e){}}),_0x13dbb6[_0x1eeeac(0x26a)](_0x434ee9=>{const _0x405ac4=_0x1eeeac;let _0x24a10b=0x0;_0x371949[_0x405ac4(0x26a)](_0x1b1283=>{const _0x4c9f5b=_0x405ac4;_0x1b1283 in _0x434ee9[_0x4c9f5b(0x273)]&&_0x434ee9['has'][_0x1b1283]&&_0x24a10b++;}),_0x24a10b==_0x371949[_0x405ac4(0x1ab)]&&_0xbf0a02['push'](capitalize(_0x434ee9['id']));});let _0x44f78c=[];return _0x5cf124[_0x1eeeac(0x26a)](_0x840a37=>{const _0x2c2cd2=_0x1eeeac;_0x840a37=capitalize(_0x840a37);if(!_0xbf0a02['includes'](_0x840a37))_0x44f78c[_0x2c2cd2(0x1a9)](_0x840a37);}),_0xbf0a02;}function setStartDatePerformance(){const _0x55a17a=_0x2aa5c3;if(config&&config[_0x55a17a(0x1f1)][0x0][_0x55a17a(0x287)]['length']!=0x0){const _0x2801e3=config['liquidity'][0x0][_0x55a17a(0x287)];dbPerformance[_0x55a17a(0x243)](_0x55a17a(0x2b7))[_0x55a17a(0x217)]({'date':config['startdate']})[_0x55a17a(0x29f)]({'coins':_0x2801e3})[_0x55a17a(0x277)]();}}async function recreateCoinResults(){const _0x57bf47=_0x2aa5c3;let _0x3cca0f,_0xd4962f=[];try{const _0x24578f=fns[_0x57bf47(0x297)](fns[_0x57bf47(0x27e)](config[_0x57bf47(0x2c7)][_0x57bf47(0x168)](/\//g,'-')),_0x57bf47(0x219));for(const _0x299824 of currentCoins){if(_0x299824[_0x57bf47(0x233)]!=config[_0x57bf47(0x169)]){let _0xa4e2c=0x0,_0x36f1f9,_0x143b82;_0x3cca0f=await getAllEventOrders(_0x299824['symbol']);if(_0x3cca0f[_0x57bf47(0x1ab)]>0x0)_0x3cca0f[_0x57bf47(0x26a)](_0x19e5dc=>{const _0x41c6ef=_0x57bf47,_0x53c631=_0x299824[_0x41c6ef(0x20e)][_0x41c6ef(0x20f)](config['basecoin']+'/');_0xd4962f['push']({'datetime':_0x19e5dc[_0x41c6ef(0x216)],'coin':_0x299824[_0x41c6ef(0x233)],'symbol':_0x299824[_0x41c6ef(0x20e)],'side':_0x19e5dc['side'],'reverse':_0x53c631,'amount':formatResult(_0x19e5dc['filled'],0x8),'filled':formatResult(_0x19e5dc[_0x41c6ef(0x184)],0x8),'price':formatResult(_0x19e5dc[_0x41c6ef(0x28f)],0x8)}),_0xa4e2c=_0x19e5dc[_0x41c6ef(0x163)]==_0x41c6ef(0x29a)?_0xa4e2c+_0x19e5dc['filled']:_0xa4e2c-_0x19e5dc[_0x41c6ef(0x184)];if(!_0x143b82)_0x143b82=_0x19e5dc[_0x41c6ef(0x28f)];});_0x36f1f9=_0x299824[_0x57bf47(0x17f)]-_0xa4e2c;let _0x2cf64c;config['liquidity'][_0x57bf47(0x26a)](_0x23852f=>{const _0x4f57ce=_0x57bf47;!_0x2cf64c&&(_0x2cf64c=_0x23852f[_0x4f57ce(0x287)][_0x4f57ce(0x217)](_0x3c8063=>_0x3c8063[_0x4f57ce(0x233)]==_0x299824[_0x4f57ce(0x233)]),_0x2cf64c&&(_0x36f1f9=_0x2cf64c[_0x4f57ce(0x17f)],_0x143b82=_0x2cf64c[_0x4f57ce(0x28f)]));});let _0xca6c91=dbCoinResults['get'](_0x57bf47(0x1ac))['find']({'coin':_0x299824[_0x57bf47(0x233)]})[_0x57bf47(0x1b8)]();_0xca6c91={'coin':_0x299824[_0x57bf47(0x233)],'number':_0x36f1f9,'breakeven':_0x143b82,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x57bf47(0x217)]({'coin':_0x299824['coin']})[_0x57bf47(0x29f)](_0xca6c91)[_0x57bf47(0x277)]();}}_0xd4962f[_0x57bf47(0x175)]((_0x27992e,_0x2f3ff7)=>_0x27992e[_0x57bf47(0x216)]>_0x2f3ff7[_0x57bf47(0x216)]?0x1:_0x2f3ff7['datetime']>_0x27992e[_0x57bf47(0x216)]?-0x1:0x0);let _0x2b6e61=0x0;for(let _0x99a2b2 of _0xd4962f){await updateCoinResults(_0x99a2b2,!![]);}}catch(_0x62a675){await handleError(_0x62a675,'recreateCoinResults()');}}async function getAllEventOrders(_0x328c86){const _0x499623=_0x2aa5c3;let _0x49170d=[],_0x1c6678=dbLogs[_0x499623(0x243)]('logs')[_0x499623(0x183)](_0x2850ac=>{const _0x269f2b=_0x499623,_0x1d7deb=_0x2850ac[_0x269f2b(0x2c3)][_0x269f2b(0x2ab)]();return _0x1d7deb[_0x269f2b(0x20f)](_0x328c86[_0x269f2b(0x2ab)]())&&(_0x1d7deb[_0x269f2b(0x20f)](_0x269f2b(0x14d))&&_0x1d7deb[_0x269f2b(0x20f)]('order')||_0x1d7deb[_0x269f2b(0x20f)](_0x269f2b(0x184))&&_0x1d7deb[_0x269f2b(0x20f)](_0x269f2b(0x1ce)));})[_0x499623(0x228)]('time')['value']();return _0x1c6678[_0x499623(0x26a)](_0x1eca74=>{const _0x254b87=_0x499623,_0x3e4384=_0x1eca74[_0x254b87(0x2c3)]['includes'](_0x254b87(0x26b))?'sell':_0x254b87(0x29a),_0x532249=/#([0-9]|\.)+\s/i,_0x40c644=Number(_0x532249[_0x254b87(0x223)](_0x1eca74['event'])[0x0][_0x254b87(0x291)](0x1)),_0xa8c896=/@([0-9]|\.)+$/i,_0x43365b=Number(_0xa8c896[_0x254b87(0x223)](_0x1eca74[_0x254b87(0x2c3)])[0x0]['slice'](0x1));_0x49170d[_0x254b87(0x1a9)]({'datetime':_0x1eca74['time'],'coin':symbolToCoin(_0x328c86),'symbol':_0x328c86,'side':_0x3e4384,'amount':_0x40c644,'filled':_0x40c644,'price':_0x43365b});}),_0x49170d;}async function getAllOrders(_0x2edc26,_0xa9bb19){const _0x165a7f=_0x2aa5c3;let _0x26beaf=[];while(_0xa9bb19<exchange[_0x165a7f(0x2a7)]()){const _0x42359a=0x1f4;try{const _0x1ab56a=await exchange[_0x165a7f(0x164)](_0x2edc26,_0xa9bb19,_0x42359a);if(_0x1ab56a['length'])_0xa9bb19=_0x1ab56a[_0x1ab56a[_0x165a7f(0x1ab)]-0x1][_0x165a7f(0x208)]+0x1,_0x26beaf=_0x26beaf[_0x165a7f(0x1bd)](_0x1ab56a);else break;}catch(_0x5f3628){await handleError(_0x5f3628,'getAllOrders()',_0x2edc26);}}return _0x26beaf;}async function validate24hChanges(){const _0x59ffd8=_0x2aa5c3;for(const _0x4de7d6 of currentCoins){if(_0x4de7d6[_0x59ffd8(0x233)]!=config['basecoin']){let _0x5874c5;_0x4de7d6[_0x59ffd8(0x19d)]?_0x5874c5=formatResult((0x1/(global[_0x59ffd8(0x143)][noslash(_0x4de7d6[_0x59ffd8(0x20e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5874c5=global['change'][noslash(_0x4de7d6[_0x59ffd8(0x20e)])],_0x5874c5<config[_0x59ffd8(0x26d)]&&(logHistory(_0x59ffd8(0x2be),_0x4de7d6[_0x59ffd8(0x233)]+_0x59ffd8(0x1a8)+_0x5874c5+'%'),logHistory('error',_0x59ffd8(0x1c9)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4fc723,_0x1d060e){const _0x1a2f1=_0x2aa5c3;if(!_0x4fc723)return!![];const _0x2cdf7c=_0x1d060e[_0x1a2f1(0x13f)]('.'),_0x504ad5=_0x4fc723[_0x1a2f1(0x13f)]('.');for(var _0x34508c=0x0;_0x34508c<_0x504ad5[_0x1a2f1(0x1ab)];_0x34508c++){const _0x2c9923=~~_0x504ad5[_0x34508c],_0x50466f=~~_0x2cdf7c[_0x34508c];if(_0x2c9923<_0x50466f)return!![];if(_0x2c9923>_0x50466f)return![];}return![];}async function oneTimeMigration(){const _0x55c8e1=_0x2aa5c3;let _0x1f3efa=dbLogs[_0x55c8e1(0x243)](_0x55c8e1(0x2a6))[_0x55c8e1(0x1b8)]();if(isOlderVersion(_0x1f3efa,_0x55c8e1(0x181))){let _0xa2f4fc=[];const _0x56accf=dbLogs['get']('logs')['value']();_0x56accf[_0x55c8e1(0x26a)](_0x3b90b1=>{const _0x8f85f2=_0x55c8e1;_0xa2f4fc[_0x8f85f2(0x1a9)]({'time':_0x3b90b1[_0x8f85f2(0x1ad)],'type':_0x3b90b1[_0x8f85f2(0x2ad)],'event':_0x3b90b1[_0x8f85f2(0x2c3)]});}),dbLogs[_0x55c8e1(0x243)]('logs')[_0x55c8e1(0x29f)](_0xa2f4fc)['write']();}let _0x3f2ab2=dbConfig['get']('version')[_0x55c8e1(0x1b8)]();if(isOlderVersion(_0x3f2ab2,'2.3.5')){let _0xe54e2a=dbConfig[_0x55c8e1(0x243)]('bot')['find']({'botID':botID})[_0x55c8e1(0x1b8)]();if(_0xe54e2a){let _0x3fe8b3=[];_0xe54e2a[_0x55c8e1(0x1b3)][_0x55c8e1(0x26a)](_0x458203=>{const _0x2a7c35=_0x55c8e1;_0x3fe8b3[_0x2a7c35(0x1a9)]({'coin':_0x458203[_0x2a7c35(0x233)],'number':_0x458203[_0x2a7c35(0x241)],'price':_0x458203[_0x2a7c35(0x1d2)]}),delete _0x458203[_0x2a7c35(0x241)],delete _0x458203[_0x2a7c35(0x1d2)];});if(_0x3fe8b3[_0x55c8e1(0x1ab)]!==0x0)fs['writeFile'](configbackuppath+(_0x55c8e1(0x1a0)+botID+_0x55c8e1(0x1dc)),JSON['stringify'](_0x3fe8b3,null,0x4),function(_0x18f79e){if(_0x18f79e){}});const _0x6c36e9=(_0x44cb04,_0x5e3c8c)=>{const _0xcacc75=_0x55c8e1;let _0x4469ca=[];_0x5e3c8c['forEach'](_0x5a478c=>{const _0x41adf6=_0x44f1,_0x1fc191=_0x44cb04[_0x41adf6(0x217)](_0x3ad540=>_0x3ad540[_0x41adf6(0x233)]==_0x5a478c[_0x41adf6(0x233)]);if(!_0x1fc191)_0x4469ca[_0x41adf6(0x1a9)](_0x5a478c);});let _0x217093=[];return _0x44cb04[_0xcacc75(0x26a)](_0x14920c=>{const _0xa70841=_0xcacc75,_0x2756a5=_0x5e3c8c[_0xa70841(0x217)](_0x4361cd=>_0x4361cd['coin']==_0x14920c[_0xa70841(0x233)]);if(!_0x2756a5||_0x2756a5[_0xa70841(0x17f)]==0x0&&_0x14920c[_0xa70841(0x17f)]!=0x0)_0x217093[_0xa70841(0x1a9)](_0x14920c);}),{'missingDay1':_0x4469ca,'notInDay2':_0x217093};},_0x27758d=dbPerformance['get'](_0x55c8e1(0x2b7))[_0x55c8e1(0x27d)]()[_0x55c8e1(0x1b8)]();if(_0x27758d[_0x55c8e1(0x1ab)]>0x1){const {missingDay1:_0x1126a0,notInDay2:_0x581e1d}=_0x6c36e9(_0x3fe8b3,_0x27758d[0x1][_0x55c8e1(0x1ac)]);_0x3fe8b3=[..._0x3fe8b3,..._0x1126a0],_0x581e1d['forEach'](_0x338b42=>{const _0x2d301e=_0x55c8e1;let _0x4c7159=_0x3fe8b3[_0x2d301e(0x19e)](_0x1c8247=>_0x1c8247[_0x2d301e(0x233)]==_0x338b42[_0x2d301e(0x233)]);_0x4c7159!=-0x1&&_0x3fe8b3['splice'](_0x4c7159,0x1);});}_0x3fe8b3[_0x55c8e1(0x175)]((_0x3a1e1d,_0x182a65)=>_0x3a1e1d['coin']>_0x182a65[_0x55c8e1(0x233)]?0x1:_0x182a65[_0x55c8e1(0x233)]>_0x3a1e1d[_0x55c8e1(0x233)]?-0x1:0x0);let _0xef28b9=[{'date':_0xe54e2a[_0x55c8e1(0x2c7)],'changes':_0x3fe8b3}];_0x27758d[_0x55c8e1(0x1ab)]>0x2&&_0x27758d[_0x55c8e1(0x26a)]((_0x33f557,_0x5608be)=>{const _0x5c1e8d=_0x55c8e1;if(_0x5608be>0x0&&_0x5608be<_0x27758d[_0x5c1e8d(0x1ab)]-0x1){const {missingDay1:_0xb5f046,notInDay2:_0x4f526f}=_0x6c36e9(_0x27758d[_0x5608be][_0x5c1e8d(0x1ac)],_0x27758d[_0x5608be+0x1][_0x5c1e8d(0x1ac)]);_0x3fe8b3=[],(_0xb5f046[_0x5c1e8d(0x1ab)]!=0x0||_0x4f526f['length']!=0x0)&&(_0xb5f046[_0x5c1e8d(0x1ab)]!=0x0&&_0x3fe8b3[_0x5c1e8d(0x1a9)](..._0xb5f046),_0x4f526f[_0x5c1e8d(0x1ab)]!=0x0&&(_0x4f526f[_0x5c1e8d(0x26a)](_0x2e6849=>{const _0x2be231=_0x5c1e8d;_0x2e6849[_0x2be231(0x17f)]=-_0x2e6849[_0x2be231(0x17f)];}),_0x3fe8b3[_0x5c1e8d(0x1a9)](..._0x4f526f)),_0x3fe8b3['sort']((_0xac416d,_0x2ba173)=>_0xac416d[_0x5c1e8d(0x233)]>_0x2ba173[_0x5c1e8d(0x233)]?0x1:_0x2ba173[_0x5c1e8d(0x233)]>_0xac416d[_0x5c1e8d(0x233)]?-0x1:0x0),_0xef28b9[_0x5c1e8d(0x1a9)]({'date':_0x27758d[_0x5608be+0x1][_0x5c1e8d(0x1b6)],'changes':_0x3fe8b3}));}}),dbConfig[_0x55c8e1(0x243)](_0x55c8e1(0x1a1))[_0x55c8e1(0x217)]({'botID':botID})[_0x55c8e1(0x29f)]({..._0xe54e2a,'liquidity':_0xef28b9})[_0x55c8e1(0x277)]();}}if(isOlderVersion(_0x3f2ab2,_0x55c8e1(0x1ec))){let _0x549daf=dbConfig[_0x55c8e1(0x243)](_0x55c8e1(0x1a1))['find']({'botID':botID})[_0x55c8e1(0x1b8)]();if(_0x549daf){const _0x493c0a=_0x549daf[_0x55c8e1(0x177)],_0x3c9a97=_0x493c0a?capitalize(_0x493c0a):_0x55c8e1(0x2a0);dbConfig[_0x55c8e1(0x243)](_0x55c8e1(0x1a1))['find']({'botID':botID})[_0x55c8e1(0x29f)]({'exchange':_0x3c9a97})[_0x55c8e1(0x277)]();}}let _0x1e1acd=dbPerformance[_0x55c8e1(0x243)](_0x55c8e1(0x2a6))['value']();isOlderVersion(_0x1e1acd,_0x55c8e1(0x181))&&setStartDatePerformance();let _0x13f592=dbCoinResults['get'](_0x55c8e1(0x2a6))[_0x55c8e1(0x1b8)]();if(isOlderVersion(_0x13f592,_0x55c8e1(0x1ef))){let _0x2fa97c=dbCoinResults[_0x55c8e1(0x243)](_0x55c8e1(0x1ac))[_0x55c8e1(0x1b8)]();if(_0x2fa97c[_0x55c8e1(0x1ab)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x52ae5a=_0x2aa5c3;dbConfig[_0x52ae5a(0x2b6)]('version',serverversion)[_0x52ae5a(0x277)](),dbPerformance[_0x52ae5a(0x2b6)](_0x52ae5a(0x2a6),serverversion)[_0x52ae5a(0x277)](),dbLogs['set'](_0x52ae5a(0x2a6),serverversion)['write'](),dbCoinResults[_0x52ae5a(0x2b6)](_0x52ae5a(0x2a6),serverversion)[_0x52ae5a(0x277)]();}function getConfiguration(_0x3f477b){const _0x9df42d=_0x2aa5c3;let _0x239262=dbConfig['get'](_0x9df42d(0x1a1))[_0x9df42d(0x217)]({'botID':_0x3f477b})['value']();if(_0x239262){let _0x1fbee8=![];typeof _0x239262['threshold']==_0x9df42d(0x18d)&&(_0x239262={..._0x239262,'threshold':Number(_0x239262[_0x9df42d(0x231)])},_0x1fbee8=!![]),_0x239262[_0x9df42d(0x26d)]==undefined&&(_0x239262={..._0x239262,'change24h':-0x14},_0x1fbee8=!![]),_0x239262[_0x9df42d(0x27b)]==undefined&&(_0x239262={..._0x239262,'fiat':'USD'},_0x1fbee8=!![]),_0x239262[_0x9df42d(0x2ba)]==undefined&&(_0x239262={..._0x239262,'onepagemode':settings[_0x9df42d(0x2ba)]},_0x1fbee8=!![]),_0x239262['colorscheme']==undefined&&(_0x239262={..._0x239262,'colorscheme':_0x9df42d(0x1f4)},_0x1fbee8=!![]),_0x239262['autoliquidity']==undefined&&(_0x239262={..._0x239262,'autoliquidity':!![]},_0x1fbee8=!![]),_0x1fbee8&&(_0x239262={'botID':_0x239262['botID'],'exchange':_0x239262[_0x9df42d(0x177)],'apiKey':_0x239262[_0x9df42d(0x153)],'apiSecret':_0x239262[_0x9df42d(0x1e3)],'apiPassword':_0x239262[_0x9df42d(0x27a)],'basecoin':_0x239262[_0x9df42d(0x169)],'botname':_0x239262[_0x9df42d(0x18c)],'showname':_0x239262[_0x9df42d(0x15f)],'threshold':_0x239262[_0x9df42d(0x231)],'ordertype':_0x239262[_0x9df42d(0x2cf)],'timeout':_0x239262['timeout'],'fiat':_0x239262[_0x9df42d(0x27b)],'startdate':_0x239262[_0x9df42d(0x2c7)],'recreate':_0x239262[_0x9df42d(0x235)],'timeshift':_0x239262[_0x9df42d(0x1f3)],'onepagemode':_0x239262[_0x9df42d(0x2ba)],'headless':_0x239262[_0x9df42d(0x2bc)],'cooldown':_0x239262[_0x9df42d(0x22d)],'change24h':_0x239262[_0x9df42d(0x26d)],'emojibuy':_0x239262[_0x9df42d(0x19b)],'emojisell':_0x239262['emojisell'],'colorscheme':_0x239262[_0x9df42d(0x1ed)],'portfolio':_0x239262[_0x9df42d(0x1b3)],'autoliquidity':_0x239262[_0x9df42d(0x26e)],'liquidity':_0x239262[_0x9df42d(0x1f1)],'openOrders':_0x239262[_0x9df42d(0x284)]},dbConfig[_0x9df42d(0x243)](_0x9df42d(0x1a1))[_0x9df42d(0x15d)]()[_0x9df42d(0x277)](),dbConfig['get'](_0x9df42d(0x1a1))[_0x9df42d(0x1a9)](_0x239262)['write']());}else _0x239262={'botID':_0x3f477b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x9df42d(0x1f5)+_0x3f477b,'showname':![],'threshold':0x3,'ordertype':_0x9df42d(0x14d),'timeout':0x14,'fiat':_0x9df42d(0x238),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x9df42d(0x1f3)],'onepagemode':settings[_0x9df42d(0x2ba)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x239262;}function emittedConfiguration(){const _0x453e62=_0x2aa5c3;let _0xf5cc96;if(config[_0x453e62(0x153)]=='')_0xf5cc96={...config,'configstate':_0x453e62(0x251)};else config[_0x453e62(0x153)]==_0x453e62(0x263)?_0xf5cc96={...config,'configstate':_0x453e62(0x1ba)}:(_0xf5cc96={...config,'apiKey':_0x453e62(0x1f0),'apiSecret':_0x453e62(0x1f0)},config[_0x453e62(0x27a)]&&(_0xf5cc96['apiPassword']=_0x453e62(0x1f0)));return _0xf5cc96;}function getSettings(){const _0x812012=_0x2aa5c3;return dbSettings[_0x812012(0x243)](_0x812012(0x298))['value']();}function getSecure(){const _0xa7dc4a=_0x2aa5c3;return dbSecure[_0xa7dc4a(0x243)](_0xa7dc4a(0x16e))['value']()||{};}function updateTimeshift(_0x341701){const _0x37aecb=_0x2aa5c3;let _0x294253=dbConfig['get'](_0x37aecb(0x1a1))['find']({'botID':botID})[_0x37aecb(0x1b8)]();_0x294253&&dbConfig[_0x37aecb(0x243)]('bot')['find']({'botID':botID})[_0x37aecb(0x29f)]({'timeshift':_0x341701})[_0x37aecb(0x277)](),config[_0x37aecb(0x1f3)]=_0x341701,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x38f647){const _0x41448a=_0x2aa5c3;let _0x5b5285=dbConfig[_0x41448a(0x243)](_0x41448a(0x1a1))[_0x41448a(0x217)]({'botID':botID})[_0x41448a(0x1b8)]();_0x5b5285&&dbConfig['get'](_0x41448a(0x1a1))['find']({'botID':botID})['assign']({'onepagemode':_0x38f647})[_0x41448a(0x277)](),config[_0x41448a(0x2ba)]=_0x38f647,proxyEmit(_0x41448a(0x227),emittedConfiguration());}async function storeConfiguration(_0x43250d){const _0x168ba9=_0x2aa5c3;logger[_0x168ba9(0x248)](_0x168ba9(0x2c9));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x168ba9(0x248)](_0x168ba9(0x270));let _0x54ec92=![],_0x2c5337=![],_0x4d9dec=[];_0x43250d['portfolio']['forEach'](_0x4e8432=>{const _0x1771d1=_0x168ba9;if(!_0x4e8432[_0x1771d1(0x22b)]&&_0x4e8432['coin']!=_0x43250d[_0x1771d1(0x169)])_0x4d9dec[_0x1771d1(0x1a9)](_0x4e8432['symbol']);}),_0x4d9dec[_0x168ba9(0x26a)](_0x23e70c=>{const _0x5c915c=_0x168ba9,_0x3a6b3d=currentCoins[_0x5c915c(0x217)](_0x2d2236=>_0x2d2236['symbol']==_0x23e70c);!_0x3a6b3d&&(_0x54ec92=!![]);}),currentCoins['forEach'](_0x2d57b3=>{const _0x9b9c77=_0x168ba9;if(_0x2d57b3[_0x9b9c77(0x233)]!=config[_0x9b9c77(0x169)]){const _0x47173b=_0x4d9dec[_0x9b9c77(0x217)](_0x436da2=>_0x436da2==_0x2d57b3[_0x9b9c77(0x20e)]);!_0x47173b&&(_0x54ec92=!![]);}}),_0x43250d[_0x168ba9(0x1b3)]['forEach'](_0xee2c86=>{const _0x2933e5=_0x168ba9,_0x52c415=config[_0x2933e5(0x1b3)][_0x2933e5(0x217)](_0x488dce=>_0x488dce['coin']==_0xee2c86['coin']);if(_0x52c415&&_0xee2c86['offset']!=_0x52c415['offset'])_0x2c5337=!![];});let _0x5995f8=dbConfig[_0x168ba9(0x243)](_0x168ba9(0x1a1))[_0x168ba9(0x217)]({'botID':botID})['value']();_0x43250d={..._0x43250d,'apiKey':crypt[_0x168ba9(0x199)](secure[_0x168ba9(0x147)],_0x43250d[_0x168ba9(0x153)])[_0x168ba9(0x16a)],'apiSecret':crypt['decrypt'](secure[_0x168ba9(0x147)],_0x43250d['apiSecret'])['message']};_0x43250d[_0x168ba9(0x27a)]&&(_0x43250d[_0x168ba9(0x27a)]=crypt[_0x168ba9(0x199)](secure['privateKey'],_0x43250d['apiPassword'])[_0x168ba9(0x16a)]);let _0x26c9c0=![];if(_0x5995f8){_0x43250d[_0x168ba9(0x153)]=='************'?_0x43250d[_0x168ba9(0x153)]=config['apiKey']:_0x26c9c0=!![];_0x43250d['apiSecret']==_0x168ba9(0x1f0)?_0x43250d[_0x168ba9(0x1e3)]=config[_0x168ba9(0x1e3)]:_0x26c9c0=!![];if(_0x43250d[_0x168ba9(0x27a)]=='************')_0x43250d['apiPassword']=config[_0x168ba9(0x27a)];else{if(_0x43250d[_0x168ba9(0x27a)])_0x26c9c0=!![];}dbConfig[_0x168ba9(0x243)]('bot')[_0x168ba9(0x217)]({'botID':botID})[_0x168ba9(0x29f)](_0x43250d)[_0x168ba9(0x277)]();}else dbConfig[_0x168ba9(0x243)](_0x168ba9(0x1a1))[_0x168ba9(0x1a9)](_0x43250d)[_0x168ba9(0x277)](),_0x26c9c0=!![],process['send']({'status':_0x168ba9(0x1c2),'live':_0x168ba9(0x2a2)},_0x4b63b3=>{});process[_0x168ba9(0x1c1)]({'botname':_0x43250d[_0x168ba9(0x18c)]},_0x33bbda=>{}),updateBotManager(),config={..._0x43250d},proxyEmit(_0x168ba9(0x1ff)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x26c9c0)await reset(!![]);else _0x54ec92||_0x2c5337?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x2ec012){const _0x2a41b4=_0x2aa5c3,_0x16a217={...config,'headless':_0x2ec012[_0x2a41b4(0x2bc)]};let _0x5a7969=dbConfig[_0x2a41b4(0x243)]('bot')[_0x2a41b4(0x217)]({'botID':botID})['value']();_0x5a7969&&dbConfig['get'](_0x2a41b4(0x1a1))[_0x2a41b4(0x217)]({'botID':botID})[_0x2a41b4(0x29f)](_0x16a217)[_0x2a41b4(0x277)](),config={..._0x16a217},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x13401a){const _0x311945=_0x2aa5c3,_0x21b9e8={...config,'fiat':_0x13401a};let _0x2910b8=dbConfig[_0x311945(0x243)](_0x311945(0x1a1))['find']({'botID':botID})['value']();_0x2910b8&&dbConfig[_0x311945(0x243)]('bot')[_0x311945(0x217)]({'botID':botID})[_0x311945(0x29f)](_0x21b9e8)[_0x311945(0x277)](),config={..._0x21b9e8},proxyEmit(_0x311945(0x227),emittedConfiguration());}function resetHistory(){const _0x34bfd1=_0x2aa5c3;logger[_0x34bfd1(0x27c)]('Resetting\x20bot\x20history');try{if(fs[_0x34bfd1(0x2ae)](path[_0x34bfd1(0x1d7)](configpath,'bot-'+botID+'-events.json')))fs[_0x34bfd1(0x20a)](path[_0x34bfd1(0x1d7)](configpath,_0x34bfd1(0x262)+botID+_0x34bfd1(0x296)));if(fs[_0x34bfd1(0x2ae)](path[_0x34bfd1(0x1d7)](configpath,_0x34bfd1(0x262)+botID+_0x34bfd1(0x23c))))fs[_0x34bfd1(0x20a)](path[_0x34bfd1(0x1d7)](configpath,_0x34bfd1(0x262)+botID+_0x34bfd1(0x23c)));if(fs[_0x34bfd1(0x2ae)](path[_0x34bfd1(0x1d7)](configpath,'bot-'+botID+_0x34bfd1(0x239))))fs[_0x34bfd1(0x20a)](path[_0x34bfd1(0x1d7)](configpath,_0x34bfd1(0x262)+botID+_0x34bfd1(0x239)));}catch(_0x1d4642){if(_0x1d4642)logger[_0x34bfd1(0x27c)](_0x34bfd1(0x203),_0x1d4642);}const _0x5318d0=getDate();let _0xdfdeb9=[];currentCoins[_0x34bfd1(0x26a)](_0x5d8f5e=>{const _0x6bc76c=_0x34bfd1;_0xdfdeb9[_0x6bc76c(0x1a9)]({'coin':_0x5d8f5e[_0x6bc76c(0x233)],'number':_0x5d8f5e[_0x6bc76c(0x17f)],'price':_0x5d8f5e['last']});});let _0x218b92=dbConfig[_0x34bfd1(0x243)](_0x34bfd1(0x1a1))[_0x34bfd1(0x217)]({'botID':botID})['value']();_0x218b92&&(dbConfig['get'](_0x34bfd1(0x1a1))[_0x34bfd1(0x217)]({'botID':botID})['assign']({'liquidity':[{'date':_0x5318d0,'changes':_0xdfdeb9}]})[_0x34bfd1(0x277)](),config[_0x34bfd1(0x1f1)]=[]),process[_0x34bfd1(0x1c1)]({'stop':_0x34bfd1(0x211)},_0x18841e=>{});}function noslash(_0x382ba7){return _0x382ba7['replace']('/','');}function updateHighestFee(_0x30f4e0){const _0x2f62cb=_0x2aa5c3;if(_0x30f4e0['reverse']){let _0x39a150={'filled':_0x30f4e0[_0x2f62cb(0x184)]*_0x30f4e0[_0x2f62cb(0x28f)],'amount':_0x30f4e0[_0x2f62cb(0x184)]*_0x30f4e0[_0x2f62cb(0x28f)],'side':_0x30f4e0[_0x2f62cb(0x163)]==_0x2f62cb(0x26b)?'buy':_0x2f62cb(0x26b),'price':0x1/_0x30f4e0[_0x2f62cb(0x28f)]};_0x30f4e0={..._0x30f4e0,..._0x39a150};}const _0x57d17c=defaultFee*_0x30f4e0[_0x2f62cb(0x184)]*_0x30f4e0[_0x2f62cb(0x28f)];lastFees[_0x2f62cb(0x2c1)]['length']===0x14&&lastFees['recent20']['shift'](),lastFees[_0x2f62cb(0x2c1)][_0x2f62cb(0x1a9)](_0x57d17c),lastFees[_0x2f62cb(0x257)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x14041d){const _0x41cee4=_0x2aa5c3;logger[_0x41cee4(0x248)](_0x41cee4(0x255)+_0x14041d[_0x41cee4(0x20e)]+_0x41cee4(0x249)+_0x14041d[_0x41cee4(0x265)]+_0x41cee4(0x249)+_0x14041d['id']);let _0x27818a=_0x14041d[_0x41cee4(0x265)],_0x3dbfec=![];currentCoins[_0x41cee4(0x26a)](_0xfdc0a3=>{const _0x5660d2=_0x41cee4;_0xfdc0a3[_0x5660d2(0x20e)]==_0x14041d['symbol']&&(_0x3dbfec=!![]);});if(!_0x3dbfec)return;const _0x4fee37=currentCoins[_0x41cee4(0x217)](_0x373d07=>_0x373d07[_0x41cee4(0x20e)]==_0x14041d[_0x41cee4(0x20e)]),_0x419035=_0x3eca81=>{const _0x331998=_0x41cee4;if(_0x4fee37)_0x4fee37[_0x331998(0x161)]=_0x3eca81;};if(_0x27818a=='open')_0x419035(_0x41cee4(0x252));else{if(_0x27818a=='canceled'){_0x419035(_0x41cee4(0x209));const _0x32a5ec=await getCoins();[currentCoins,currentCoinsAll]=_0x32a5ec,await getOpenOrders(),handleOpenOrders();}else{if(_0x27818a==_0x41cee4(0x258)){logger['debug'](_0x41cee4(0x2ce)+_0x14041d[_0x41cee4(0x20e)]+_0x41cee4(0x249)+_0x14041d[_0x41cee4(0x184)]+'\x20|\x20'+_0x14041d['id']);let _0x18127a=![];if(lastOrders)for(const _0x430be0 of lastOrders){const _0x47c3b5=0xc8,_0x321e3f=0x1388;let _0x3174c4=0x0;while(!_0x430be0[_0x41cee4(0x170)]&&_0x3174c4*_0x47c3b5<_0x321e3f){_0x3174c4++,await sleep(_0x47c3b5);}if(_0x3174c4>0x0)logger[_0x41cee4(0x248)](_0x41cee4(0x1f7)+_0x3174c4*_0x47c3b5/0x3e8+_0x41cee4(0x1d3));if(_0x430be0[_0x41cee4(0x170)]==_0x14041d['id']){logger[_0x41cee4(0x248)](_0x41cee4(0x1a4)+_0x14041d['id']),_0x18127a=!![];if(_0x430be0[_0x41cee4(0x184)]==0x0){logger[_0x41cee4(0x248)](_0x41cee4(0x28b)+_0x14041d['id']);if(_0x14041d[_0x41cee4(0x178)])_0x430be0[_0x41cee4(0x28f)]=_0x14041d[_0x41cee4(0x178)];else{if(_0x14041d[_0x41cee4(0x28f)])_0x430be0[_0x41cee4(0x28f)]=_0x14041d[_0x41cee4(0x28f)];else{}}_0x430be0[_0x41cee4(0x184)]=_0x14041d[_0x41cee4(0x184)],updateHighestFee(_0x430be0),_0x419035(_0x41cee4(0x184)),await validateOrders();if(lockOrders==ORDERS[_0x41cee4(0x1db)]){const _0x502136=await getCoins();[currentCoins,currentCoinsAll]=_0x502136;}_0x430be0['fee']={'currency':_0x14041d['fee']?_0x14041d[_0x41cee4(0x226)][_0x41cee4(0x22a)]:null,'cost':_0x14041d[_0x41cee4(0x226)]?_0x14041d[_0x41cee4(0x226)][_0x41cee4(0x159)]:0x0},await updateCoinResults(_0x430be0);}}}if(!_0x18127a){logger[_0x41cee4(0x248)](_0x41cee4(0x246)+_0x14041d['id']),_0x419035(_0x41cee4(0x184));const _0x52e298=await getCoins();[currentCoins,currentCoinsAll]=_0x52e298,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x50fdcf=JSON[_0x41cee4(0x2b8)](lastBalances[_0x41cee4(0x1b3)]);const _0x270dff=_0x50fdcf['find'](_0xc25ef9=>_0xc25ef9['symbol']==_0x14041d[_0x41cee4(0x20e)]);if(_0x270dff){if(_0x27818a==_0x41cee4(0x252))_0x270dff[_0x41cee4(0x161)]=_0x270dff[_0x41cee4(0x161)]==_0x41cee4(0x184)?_0x41cee4(0x184):_0x41cee4(0x252);else{if(_0x27818a=='canceled')_0x270dff[_0x41cee4(0x161)]=_0x270dff[_0x41cee4(0x161)]==_0x41cee4(0x184)?_0x41cee4(0x184):_0x41cee4(0x209);else _0x27818a==_0x41cee4(0x258)&&(_0x270dff[_0x41cee4(0x161)]=_0x41cee4(0x184));}}lastBalances={...lastBalances,'portfolio':JSON[_0x41cee4(0x29d)](_0x50fdcf)},proxyEmit(_0x41cee4(0x14b),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x569dd7=![];currentCoins['forEach'](_0xf82155=>{const _0x5c95ac=_0x44f1;_0x569dd7=allOpenOrders[_0x5c95ac(0x217)](_0x1c9162=>_0x1c9162[_0x5c95ac(0x20e)]==_0xf82155[_0x5c95ac(0x20e)]),_0xf82155[_0x5c95ac(0x161)]=_0x569dd7?_0x5c95ac(0x252):'none';});}async function getCoins(_0x1c6bea=!![],_0x5ba5c3=config[_0x2aa5c3(0x169)]){const _0x56550e=_0x2aa5c3;let _0x471a71,_0x14b8d9=[],_0x45d603=[],_0x15f732=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x471a71=await exchange[_0x56550e(0x230)](),mybalances=_0x471a71[_0x56550e(0x2a8)];for(const [_0x1c7791,_0x23c9b8]of Object[_0x56550e(0x285)](mybalances)){_0x15f732[_0x56550e(0x1a9)](_0x1c7791);}config[_0x56550e(0x1b3)][_0x56550e(0x26a)](_0x485f3d=>{const _0x3b02bc=_0x56550e;!_0x15f732[_0x3b02bc(0x20f)](_0x485f3d[_0x3b02bc(0x233)])&&(mybalances[_0x485f3d[_0x3b02bc(0x233)]]=0x0);});if(_0x5ba5c3=='')for(const [_0x51ac7d,_0x2f45e4]of Object[_0x56550e(0x285)](mybalances)){_0x2f45e4!=0x0&&_0x14b8d9[_0x56550e(0x1a9)]({'coin':_0x51ac7d});}else{let _0x242a55=![];for(const [_0x290972,_0x1f4fe0]of Object['entries'](mybalances)){const _0x106120=config[_0x56550e(0x1b3)][_0x56550e(0x217)](_0x258782=>_0x258782['coin']==_0x290972),_0x2c05cd=_0x290972+'/'+_0x5ba5c3,_0x4d6498=_0x5ba5c3+'/'+_0x290972,_0x16d459=currentCoins[_0x56550e(0x217)](_0x1cc749=>_0x1cc749[_0x56550e(0x233)]==_0x290972);_0x242a55=![];if((_0x1f4fe0!=0x0||_0x106120)&&(allSymbols['includes'](_0x2c05cd)||_0x290972==_0x5ba5c3))_0x14b8d9[_0x56550e(0x1a9)]({'coin':_0x290972,'symbol':_0x2c05cd,'reverse':![],'number':Math['max'](_0x1f4fe0+(_0x106120&&_0x106120['offset']||0x0),0x0),'orderstatus':_0x16d459?_0x16d459[_0x56550e(0x161)]:_0x56550e(0x24b)});else{if((_0x1f4fe0!=0x0||_0x106120)&&allSymbols[_0x56550e(0x20f)](_0x4d6498))_0x14b8d9[_0x56550e(0x1a9)]({'coin':_0x290972,'symbol':_0x4d6498,'reverse':!![],'number':Math['max'](_0x1f4fe0+(_0x106120&&_0x106120[_0x56550e(0x267)]||0x0),0x0),'orderstatus':_0x16d459?_0x16d459[_0x56550e(0x161)]:_0x56550e(0x24b)});else _0x106120&&_0x14b8d9[_0x56550e(0x1a9)]({'coin':_0x106120[_0x56550e(0x233)],'symbol':_0x106120[_0x56550e(0x20e)],'reverse':_0x106120[_0x56550e(0x19d)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x3c2dff){if(!_0x1c6bea)handleErrorNoStop(_0x3c2dff,_0x56550e(0x281));else await handleError(_0x3c2dff,_0x56550e(0x281));}return _0x45d603=cloneDeep(_0x14b8d9),_0x14b8d9=_0x14b8d9[_0x56550e(0x183)](_0x2fdad5=>{const _0x2ecd36=_0x56550e,_0x5a961c=config[_0x2ecd36(0x1b3)][_0x2ecd36(0x217)](_0x25c7ef=>_0x25c7ef[_0x2ecd36(0x233)]==_0x2fdad5[_0x2ecd36(0x233)]);return _0x5a961c&&!_0x5a961c[_0x2ecd36(0x22b)];}),[_0x14b8d9,_0x45d603];}async function getCoinNumber(_0x5bbe2d){const _0x3209dc=_0x2aa5c3;let _0x20247f;try{const _0x5a1fcf=await exchange[_0x3209dc(0x230)]();_0x20247f=_0x5a1fcf[_0x3209dc(0x2a8)][_0x5bbe2d];}catch(_0x5b7c2f){await handleError(_0x5b7c2f,_0x3209dc(0x21d));}return _0x20247f;}async function getOpenOrders(){const _0x1c4401=_0x2aa5c3;let _0x48a8be;allOpenOrders=[];try{for(const _0x1235c1 of config['portfolio']){!_0x1235c1[_0x1c4401(0x22b)]&&_0x1235c1['coin']!=config[_0x1c4401(0x169)]&&(_0x48a8be=await exchange[_0x1c4401(0x1aa)](_0x1235c1[_0x1c4401(0x20e)]),_0x48a8be[_0x1c4401(0x1ab)]>0x0&&allOpenOrders[_0x1c4401(0x1a9)](_0x48a8be[0x0]));}}catch(_0x4852bf){await handleError(_0x4852bf,_0x1c4401(0x2c5));}}async function handleOpenOrders(_0xb12f36=0x0){const _0x286908=_0x2aa5c3;allOpenOrders[_0x286908(0x1ab)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0xb12f36==0x0?(logger[_0x286908(0x248)](_0x286908(0x229)),_0xb12f36++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x286908(0x248)](_0x286908(0x1bb)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x452059){const _0x245741=_0x2aa5c3,_0x28871c=ccxt[_0x245741(0x2c8)][_0x452059[_0x245741(0x177)][_0x245741(0x2ab)]()],_0x3698d7=new _0x28871c({'apiKey':_0x452059[_0x245741(0x153)],'secret':_0x452059['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x245741(0x24f)}});if(_0x452059[_0x245741(0x27a)])_0x3698d7[_0x245741(0x261)]=_0x452059['apiPassword'];try{await _0x3698d7['loadMarkets']();}catch(_0x35abe3){throw _0x35abe3;}}function cloneDeep(_0x5a8727){const _0x4e5d09=_0x2aa5c3;return JSON[_0x4e5d09(0x2b8)](JSON['stringify'](_0x5a8727));}async function getPortfolio(_0xca68a8){const _0x13417c=_0x2aa5c3;let _0x138352=[],_0x3f38e7=[],_0x359f66=[],_0x35ee43;if(_0xca68a8['apiKey']!==_0x13417c(0x1f0)||_0xca68a8[_0x13417c(0x1e3)]!==_0x13417c(0x1f0)||_0xca68a8[_0x13417c(0x27a)]&&_0xca68a8[_0x13417c(0x27a)]!=='************'){if(config['exchange']){if(_0xca68a8[_0x13417c(0x153)]==_0x13417c(0x1f0))_0xca68a8[_0x13417c(0x153)]=config[_0x13417c(0x153)];if(_0xca68a8[_0x13417c(0x1e3)]==_0x13417c(0x1f0))_0xca68a8[_0x13417c(0x1e3)]=config[_0x13417c(0x1e3)];if(_0xca68a8['apiPassword']==_0x13417c(0x1f0))_0xca68a8[_0x13417c(0x27a)]=config[_0x13417c(0x27a)];try{await testAPI(_0xca68a8);}catch(_0x568653){if(_0x568653[_0x13417c(0x1fc)]()[_0x13417c(0x20f)](_0x13417c(0x20d))){logger['debug'](_0x13417c(0x202)),proxyEmit(_0x13417c(0x1b3),![]);return;}else{handleError(_0x568653,'getPortfolio(0)');return;}}}await initExchange(_0xca68a8[_0x13417c(0x177)],_0xca68a8[_0x13417c(0x153)],_0xca68a8[_0x13417c(0x1e3)],_0xca68a8[_0x13417c(0x27a)]);try{await loadSymbols();}catch(_0x54254f){if(_0x54254f[_0x13417c(0x1fc)]()[_0x13417c(0x20f)](_0x13417c(0x20d))){proxyEmit('portfolio',![]);return;}else{handleError(_0x54254f,_0x13417c(0x17e));return;}}const _0x5b4333=await getCoins(![],_0xca68a8[_0x13417c(0x169)]);_0x359f66=cloneDeep(_0x5b4333[0x1]);}else _0x359f66=cloneDeep(currentCoinsAll);if(_0xca68a8['basecoin']=='')proxyEmit('portfolio',_0x359f66);else{_0x359f66[_0x13417c(0x26a)](_0x361f2d=>{const _0x3d2540=_0x13417c;if(_0x361f2d[_0x3d2540(0x233)]!=_0xca68a8[_0x3d2540(0x169)]&&allSymbols[_0x3d2540(0x20f)](_0x361f2d[_0x3d2540(0x20e)]))_0x138352[_0x3d2540(0x1a9)](_0x361f2d[_0x3d2540(0x20e)]);});if(_0x138352[_0x13417c(0x1ab)]==0x0)logHistory(_0x13417c(0x2be),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x3f38e7=await exchange[_0x13417c(0x2cb)](_0x138352);}catch(_0x4f5900){if(_0x4f5900[_0x13417c(0x1fc)]()[_0x13417c(0x20f)](_0x13417c(0x20d))){proxyEmit(_0x13417c(0x1b3),![]);return;}else handleError(_0x4f5900,_0x13417c(0x2d1));}_0x359f66[_0x13417c(0x26a)](_0x21491b=>{const _0x4baab2=_0x13417c;_0x21491b[_0x4baab2(0x233)]!=_0xca68a8['basecoin']?_0x3f38e7[_0x21491b[_0x4baab2(0x20e)]]?_0x35ee43=_0x21491b[_0x4baab2(0x19d)]?0x1/_0x3f38e7[_0x21491b[_0x4baab2(0x20e)]][_0x4baab2(0x1eb)]:_0x3f38e7[_0x21491b[_0x4baab2(0x20e)]]['last']:_0x35ee43=0x0:_0x35ee43=0x1,_0x21491b[_0x4baab2(0x28f)]=formatResult(_0x35ee43,0x8);}),proxyEmit(_0x13417c(0x1b3),_0x359f66);}}}function truncateTradeAmount(_0x4442fe,_0x3d932e){const _0x42a15a=_0x2aa5c3;let _0x47f0ab=0x0;try{_0x47f0ab=exchange[_0x42a15a(0x1b4)](_0x4442fe,_0x3d932e);}catch(_0x3130d4){}return _0x47f0ab;}function checkMinimums(_0xcdf3c3){const _0x53ceb2=_0x2aa5c3;let _0x38b5eb=!![];const _0x363767=!_0xcdf3c3[_0x53ceb2(0x19d)]?markets[_0xcdf3c3[_0x53ceb2(0x20e)]][_0x53ceb2(0x16b)][_0x53ceb2(0x23b)]['min']:markets[_0xcdf3c3[_0x53ceb2(0x20e)]][_0x53ceb2(0x16b)]['cost']['min'],_0x4843ae=!_0xcdf3c3[_0x53ceb2(0x19d)]?markets[_0xcdf3c3[_0x53ceb2(0x20e)]][_0x53ceb2(0x16b)][_0x53ceb2(0x159)]['min']:markets[_0xcdf3c3[_0x53ceb2(0x20e)]][_0x53ceb2(0x16b)][_0x53ceb2(0x23b)][_0x53ceb2(0x17a)],_0x20fda3=truncateTradeAmount(_0xcdf3c3[_0x53ceb2(0x20e)],_0xcdf3c3[_0x53ceb2(0x260)]);_0xcdf3c3[_0x53ceb2(0x260)]=_0x20fda3;if(Math['abs'](_0x20fda3)<_0x363767)_0x38b5eb=![];if(Math[_0x53ceb2(0x23d)](_0x20fda3)*_0xcdf3c3[_0x53ceb2(0x1eb)]<_0x4843ae)_0x38b5eb=![];if(_0xcdf3c3[_0x53ceb2(0x163)]==_0x53ceb2(0x26b)){let _0xed9da5=config[_0x53ceb2(0x1b3)]['find'](_0x3a67c8=>_0x3a67c8[_0x53ceb2(0x233)]==_0xcdf3c3[_0x53ceb2(0x233)]);if(_0xed9da5[_0x53ceb2(0x267)]>0x0){if(Math[_0x53ceb2(0x23d)](_0x20fda3)>_0xcdf3c3['number']-_0xed9da5['offset'])_0x38b5eb=![];}else{if(Math[_0x53ceb2(0x23d)](_0x20fda3)>_0xcdf3c3[_0x53ceb2(0x17f)])_0x38b5eb=![];}}if(_0xcdf3c3[_0x53ceb2(0x163)]=='buy'){let _0x3e94f4=config['portfolio'][_0x53ceb2(0x217)](_0x3a5645=>_0x3a5645[_0x53ceb2(0x233)]==config[_0x53ceb2(0x169)]),_0x466808=currentCoins[_0x53ceb2(0x217)](_0x7fe595=>_0x7fe595[_0x53ceb2(0x233)]==config[_0x53ceb2(0x169)]);if(_0x3e94f4[_0x53ceb2(0x267)]>0x0){if(Math[_0x53ceb2(0x23d)](_0x20fda3)*_0xcdf3c3[_0x53ceb2(0x1eb)]>_0x466808[_0x53ceb2(0x17f)]-_0x3e94f4['offset'])_0x38b5eb=![];}else{if(Math[_0x53ceb2(0x23d)](_0x20fda3)*_0xcdf3c3[_0x53ceb2(0x1eb)]>_0x466808[_0x53ceb2(0x17f)])_0x38b5eb=![];}}return _0x38b5eb;}async function getBalances(_0x9a0853=!![]){const _0x4c3a33=_0x2aa5c3;let _0x549197=0x0,_0x12df0b;const _0x379d5a=config['threshold'];if(config[_0x4c3a33(0x2bc)]&&config[_0x4c3a33(0x26d)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x281c55=>{const _0x43e6c9=_0x4c3a33;if(_0x281c55[_0x43e6c9(0x233)]!=config['basecoin']){let _0x6d991a=global['ticker'][noslash(_0x281c55[_0x43e6c9(0x20e)])];_0x12df0b=_0x281c55[_0x43e6c9(0x19d)]?0x1/_0x6d991a:_0x6d991a;}else _0x12df0b=0x1;let _0x51bd87=_0x281c55[_0x43e6c9(0x17f)]*_0x12df0b;_0x549197+=_0x51bd87,_0x281c55[_0x43e6c9(0x1eb)]=formatResult(Number(_0x12df0b),0x8),_0x281c55[_0x43e6c9(0x1b8)]=_0x51bd87;}),currentCoins[_0x4c3a33(0x26a)](_0x4b0eec=>{const _0x18d595=_0x4c3a33;let _0xf0a682=config[_0x18d595(0x1b3)][_0x18d595(0x217)](_0x3819cb=>_0x3819cb[_0x18d595(0x233)]==_0x4b0eec[_0x18d595(0x233)]),_0xc7da93=Number(_0xf0a682['distribution']),_0x1e5849=_0x4b0eec[_0x18d595(0x1b8)]/_0x549197*0x64,_0x1669ba=_0xc7da93*_0x549197/0x64/_0x4b0eec[_0x18d595(0x1eb)]-_0x4b0eec[_0x18d595(0x17f)];_0x4b0eec[_0x18d595(0x2aa)]=formatResult(_0x1e5849,0x3),_0x4b0eec[_0x18d595(0x25f)]=formatResult(_0xc7da93,0x3),_0x4b0eec[_0x18d595(0x260)]=formatResult(_0x1669ba,0x8),_0x4b0eec[_0x18d595(0x163)]='',_0x4b0eec[_0x18d595(0x280)]=![];if(_0x4b0eec['coin']!=config[_0x18d595(0x169)]){if(_0x4b0eec[_0x18d595(0x2aa)]>_0xc7da93)_0x4b0eec[_0x18d595(0x163)]='sell',_0x4b0eec[_0x18d595(0x280)]=checkMinimums(_0x4b0eec);else _0x4b0eec[_0x18d595(0x2aa)]<_0xc7da93&&(_0x4b0eec['side']=_0x18d595(0x29a),_0x4b0eec[_0x18d595(0x280)]=checkMinimums(_0x4b0eec));}_0x4b0eec[_0x18d595(0x1c3)]=_0x4b0eec[_0x18d595(0x2aa)]/_0x4b0eec['target']-0x1;if(_0x4b0eec[_0x18d595(0x161)]==_0x18d595(0x184)||_0x4b0eec['orderstatus']==_0x18d595(0x209))_0x4b0eec[_0x18d595(0x161)]=_0x18d595(0x24b);}),currentCoins[_0x4c3a33(0x175)]((_0x2b0ca8,_0x47c016)=>_0x2b0ca8[_0x4c3a33(0x1c3)]<_0x47c016[_0x4c3a33(0x1c3)]?0x1:_0x47c016[_0x4c3a33(0x1c3)]<_0x2b0ca8[_0x4c3a33(0x1c3)]?-0x1:0x0);const _0x473f66=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x473f66[_0x4c3a33(0x16f)],'usd':_0x473f66[_0x4c3a33(0x2d0)],'portfolio':JSON[_0x4c3a33(0x29d)](currentCoins),'threshold':_0x379d5a},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x9a0853){if(config[_0x4c3a33(0x2bc)])headlessMode({'portfolio':currentCoins,'threshold':_0x379d5a});else{if(lockOrders==ORDERS[_0x4c3a33(0x14a)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x379d5a});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5a60c9=getNormalizedPerformance();getStartingBalances(_0x5a60c9),emitPerformance(_0x5a60c9);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x58e973=getNormalizedPerformance();emitPerformance(_0x58e973),getStartingBalances(_0x58e973),logger[_0x4c3a33(0x248)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x56f15a=_0x2aa5c3;if(!lastBalances)return;let _0x3e69c6=[],_0x31864b,_0x448ca0=JSON[_0x56f15a(0x2b8)](lastBalances[_0x56f15a(0x1b3)]);_0x448ca0[_0x56f15a(0x175)]((_0x87d432,_0x24b006)=>_0x87d432[_0x56f15a(0x233)]>_0x24b006['coin']?0x1:_0x24b006[_0x56f15a(0x233)]>_0x87d432[_0x56f15a(0x233)]?-0x1:0x0),_0x448ca0[_0x56f15a(0x26a)](_0x3b00a0=>{const _0x102ba4=_0x56f15a;let _0x47fe1d={'coin':_0x3b00a0[_0x102ba4(0x233)],'number':_0x3b00a0[_0x102ba4(0x17f)],'price':_0x3b00a0[_0x102ba4(0x1eb)]};_0x3e69c6[_0x102ba4(0x1a9)](_0x47fe1d);});const _0x3cbaf0=await getFiat();_0x31864b={'date':lastBalances[_0x56f15a(0x1ad)][_0x56f15a(0x13f)]('\x20')[0x0],'eur':_0x3cbaf0['eur'],'usd':_0x3cbaf0[_0x56f15a(0x2d0)],'coins':_0x3e69c6};let _0x37ec78=dbPerformance[_0x56f15a(0x243)]('data')[_0x56f15a(0x217)]({'date':_0x31864b[_0x56f15a(0x1b6)]})[_0x56f15a(0x1b8)]();_0x37ec78?_0x31864b[_0x56f15a(0x1b6)]!=config[_0x56f15a(0x2c7)]&&dbPerformance['get'](_0x56f15a(0x2b7))[_0x56f15a(0x217)]({'date':_0x31864b['date']})[_0x56f15a(0x29f)](_0x31864b)['write']():dbPerformance[_0x56f15a(0x243)]('data')[_0x56f15a(0x1a9)](_0x31864b)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x427061=_0x2aa5c3;let _0x162323=[];if(dbPerformance[_0x427061(0x273)](_0x427061(0x2b7))[_0x427061(0x1b8)]()){let _0x1e9035=dbPerformance[_0x427061(0x243)](_0x427061(0x2b7))[_0x427061(0x27d)]()[_0x427061(0x183)](_0x480bd=>{const _0x3cf551=_0x427061;if(_0x480bd[_0x3cf551(0x1ac)]['length']==0x0)return![];else return!![];})['sortBy'](_0x427061(0x1b6))['value'](),_0x381f08=[...config[_0x427061(0x1f1)]];_0x381f08[_0x427061(0x175)]((_0x1d89cb,_0x2b13d2)=>_0x1d89cb['date']>_0x2b13d2[_0x427061(0x1b6)]?-0x1:_0x2b13d2['date']>_0x1d89cb[_0x427061(0x1b6)]?0x1:0x0);let _0x17a7da=0x1,_0x28c94e=[],_0x17c72b=0x0;_0x1e9035[_0x427061(0x291)]()['reverse']()[_0x427061(0x26a)]((_0xa11f8a,_0xf0de3d)=>{const _0x4e51e4=_0x427061;if(_0x381f08[_0x17c72b]){if(_0x1e9035[_0x1e9035[_0x4e51e4(0x1ab)]-_0xf0de3d]&&_0x381f08[_0x17c72b][_0x4e51e4(0x1b6)]==_0x1e9035[_0x1e9035[_0x4e51e4(0x1ab)]-_0xf0de3d]['date']){if(_0xf0de3d<_0x1e9035[_0x4e51e4(0x1ab)]){let _0x8b1756=0x0,_0x325c06=0x0;_0x1e9035[_0x1e9035[_0x4e51e4(0x1ab)]-_0xf0de3d]['coins'][_0x4e51e4(0x26a)](_0x5a9cb3=>{const _0x40a966=_0x4e51e4;_0x325c06+=_0x5a9cb3[_0x40a966(0x17f)]*_0x5a9cb3[_0x40a966(0x28f)];}),_0x381f08[_0x17c72b][_0x4e51e4(0x287)][_0x4e51e4(0x26a)](_0x388180=>{const _0x59f1b9=_0x4e51e4;_0x8b1756+=_0x388180[_0x59f1b9(0x17f)]*_0x388180[_0x59f1b9(0x28f)];}),_0x17a7da*=_0x8b1756/(_0x325c06-_0x8b1756)+0x1;}_0x17c72b++;}}let _0x5245fb=0x0;_0xa11f8a[_0x4e51e4(0x1ac)][_0x4e51e4(0x26a)](_0x327b7a=>{const _0x27f3e1=_0x4e51e4;_0x5245fb+=_0x327b7a[_0x27f3e1(0x17f)]*_0x327b7a['price'];}),_0x28c94e[_0x1e9035['length']-_0xf0de3d-0x1]=_0x5245fb*(_0x17a7da-0x1);});let _0x40ea38=[];_0x381f08=[...config[_0x427061(0x1f1)]]||[];let _0x87e6f9=0x0;_0x17c72b=0x0,_0x1e9035[_0x427061(0x26a)]((_0x442d19,_0x6644d1)=>{const _0x5cc44e=_0x427061;if(_0x381f08[_0x17c72b]){const _0x273c66=fns[_0x5cc44e(0x2b8)](_0x381f08[_0x17c72b][_0x5cc44e(0x1b6)],_0x5cc44e(0x1fe),new Date()),_0x547eab=fns[_0x5cc44e(0x2b8)](_0x442d19[_0x5cc44e(0x1b6)],_0x5cc44e(0x1fe),new Date());if(fns['isEqual'](_0x273c66,_0x547eab)){let _0x721e36=0x0;_0x381f08[_0x17c72b][_0x5cc44e(0x287)][_0x5cc44e(0x26a)](_0x5240c3=>{const _0x30bd75=_0x5cc44e;!_0x40ea38[_0x5240c3[_0x30bd75(0x233)]]?_0x40ea38[_0x5240c3[_0x30bd75(0x233)]]=_0x5240c3['number']:(_0x721e36=_0x40ea38[_0x5240c3[_0x30bd75(0x233)]],_0x40ea38[_0x5240c3[_0x30bd75(0x233)]]+=_0x5240c3[_0x30bd75(0x17f)]);const _0x284bdc=_0x442d19[_0x30bd75(0x1ac)]['find'](_0x393fb4=>_0x393fb4['coin']==_0x5240c3['coin']);(!_0x284bdc||_0x284bdc[_0x30bd75(0x17f)]==0x0)&&(_0x87e6f9+=(-_0x5240c3[_0x30bd75(0x17f)]-_0x721e36)*_0x5240c3[_0x30bd75(0x28f)]);}),_0x17c72b++;}}_0x442d19[_0x5cc44e(0x1ac)][_0x5cc44e(0x26a)]((_0x6d0766,_0x350d40)=>{const _0x13ab5a=_0x5cc44e;_0x40ea38[_0x6d0766[_0x13ab5a(0x233)]]&&(_0x6d0766[_0x13ab5a(0x251)]=_0x40ea38[_0x6d0766[_0x13ab5a(0x233)]]);}),_0x162323[_0x5cc44e(0x1a9)]({'date':_0x442d19['date'],'eur':_0x442d19[_0x5cc44e(0x16f)],'usd':_0x442d19[_0x5cc44e(0x2d0)],'offset':_0x28c94e[_0x6644d1],'netoffset':_0x87e6f9,'coins':_0x442d19[_0x5cc44e(0x1ac)]});});}return _0x162323;}function emitPerformance(_0x40fca6){const _0x5ab5eb=_0x2aa5c3;_0x40fca6['length']!==0x0?(proxyEmit(_0x5ab5eb(0x160),_0x40fca6),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x458953,_0x3fc323){const _0x18a86e=_0x2aa5c3;let _0x1b9805=0x0,_0x349c05=0x0,_0x41f13b=0x0;_0x458953['coins'][_0x18a86e(0x26a)](_0x2b83bc=>{const _0x575366=_0x18a86e;_0x1b9805+=_0x2b83bc[_0x575366(0x17f)]*_0x2b83bc[_0x575366(0x28f)];});_0x3fc323&&(_0x1b9805+=_0x458953['offset']);if(config[_0x18a86e(0x169)]===_0x18a86e(0x21f)||config[_0x18a86e(0x169)]==='ETH')_0x349c05=_0x1b9805*_0x458953[_0x18a86e(0x16f)],_0x41f13b=_0x1b9805*_0x458953[_0x18a86e(0x2d0)];else{if(usdBasecoins[_0x18a86e(0x20f)](config[_0x18a86e(0x169)]))_0x349c05=_0x1b9805*_0x458953[_0x18a86e(0x16f)]/_0x458953[_0x18a86e(0x2d0)],_0x41f13b=_0x1b9805;else config[_0x18a86e(0x169)]===_0x18a86e(0x1bc)&&(_0x349c05=_0x1b9805,_0x41f13b=_0x1b9805*_0x458953[_0x18a86e(0x2d0)]/_0x458953[_0x18a86e(0x16f)]);}return[_0x1b9805,_0x349c05,_0x41f13b];}function getKPIs(_0x156128,_0x2f412c=_0x2aa5c3(0x1bc)){const _0x2fc220=_0x2aa5c3,_0x1fc309=config[_0x2fc220(0x169)],_0x8a8909=lastBalances,_0x274cc1=currentCoins,_0x22f955=getNormalizedPerformance(),_0x5e0fe0=_0x156128===_0x2fc220(0x169)?_0x1fc309:_0x156128===_0x2fc220(0x27b)||_0x156128===_0x2fc220(0x162)?_0x2f412c:_0x2fc220(0x2a3)+_0x1fc309,_0x186410=_0x156128==='net-basecoin'?_0x2fc220(0x245):_0x156128==='net-fiat'?'Net\x20effect':_0x5e0fe0+_0x2fc220(0x2b2),_0x2d4008=_0x156128==='net-basecoin'||_0x156128===_0x2fc220(0x162)?_0x2fc220(0x245):_0x5e0fe0+_0x2fc220(0x29b);let _0x134b6f=0x0;_0x274cc1['forEach'](_0x5c00b9=>{const _0x134445=_0x2fc220;_0x134b6f+=_0x5c00b9['number']*_0x5c00b9[_0x134445(0x1eb)];});if(_0x156128===_0x2fc220(0x27b)||_0x156128===_0x2fc220(0x162)){if(_0x1fc309===_0x2fc220(0x21f)||_0x1fc309===_0x2fc220(0x1a5))_0x134b6f=_0x134b6f*(_0x2f412c==='EUR'?_0x8a8909['eur']:_0x8a8909[_0x2fc220(0x2d0)]);else{if(usdBasecoins['includes'](_0x1fc309))_0x134b6f=_0x134b6f*(_0x2f412c==='EUR'?_0x8a8909[_0x2fc220(0x16f)]/_0x8a8909[_0x2fc220(0x2d0)]:0x1);else _0x1fc309===_0x2fc220(0x1bc)&&(_0x134b6f=_0x134b6f*(_0x2f412c===_0x2fc220(0x1bc)?0x1:_0x8a8909[_0x2fc220(0x2d0)]/_0x8a8909['eur']));}}let _0x3fc8dc;if(_0x134b6f!==0x0){if(_0x156128===_0x2fc220(0x169))_0x3fc8dc=(_0x134b6f/startingBalances[_0x2fc220(0x169)]-0x1)*0x64;else{if(_0x2f412c==='EUR')_0x3fc8dc=(_0x134b6f/startingBalances[_0x2fc220(0x16f)]-0x1)*0x64;else _0x3fc8dc=(_0x134b6f/startingBalances[_0x2fc220(0x2d0)]-0x1)*0x64;}let _0x50024e=0x0;if(startingBalances[_0x2fc220(0x1ac)])_0x274cc1[_0x2fc220(0x26a)](_0x30b73f=>{const _0x125515=_0x2fc220;let _0x526a73=startingBalances[_0x125515(0x1ac)]['find'](_0x27caa1=>_0x27caa1[_0x125515(0x233)]===_0x30b73f[_0x125515(0x233)]);if(_0x526a73&&_0x526a73[_0x125515(0x233)]&&_0x30b73f['number']!==0x0)_0x50024e+=_0x526a73[_0x125515(0x17f)]*_0x30b73f[_0x125515(0x1eb)];});let _0x53492d=0x0;if(_0x22f955[_0x2fc220(0x1ab)]!==0x0){let _0x5ae8ca=_0x22f955[_0x22f955['length']-0x1];_0x53492d=_0x5ae8ca[_0x2fc220(0x274)];}_0x50024e-=_0x53492d;_0x156128===_0x2fc220(0x148)&&(_0x3fc8dc=(_0x134b6f-_0x50024e)/startingBalances[_0x2fc220(0x169)]*0x64,_0x134b6f=_0x134b6f-_0x50024e);if(_0x156128===_0x2fc220(0x162)){let _0x4c3138=_0x2f412c===_0x2fc220(0x1bc)?startingBalances['eur']:startingBalances[_0x2fc220(0x2d0)];if(_0x1fc309==='BTC'||_0x1fc309===_0x2fc220(0x1a5))_0x50024e=_0x2f412c===_0x2fc220(0x1bc)?_0x50024e*_0x8a8909['eur']:_0x50024e*_0x8a8909[_0x2fc220(0x2d0)];else{if(usdBasecoins[_0x2fc220(0x20f)](_0x1fc309))_0x50024e=_0x2f412c===_0x2fc220(0x1bc)?_0x50024e*_0x8a8909[_0x2fc220(0x16f)]/_0x8a8909[_0x2fc220(0x2d0)]:_0x50024e;else _0x1fc309===_0x2fc220(0x1bc)&&(_0x50024e=_0x2f412c==='EUR'?_0x50024e:_0x50024e*_0x8a8909['usd']/_0x8a8909[_0x2fc220(0x16f)]);}_0x3fc8dc=(_0x134b6f-_0x50024e)/_0x4c3138*0x64,_0x134b6f=_0x134b6f-_0x50024e;}if(_0x3fc8dc){if(_0x3fc8dc<0x64)_0x3fc8dc=_0x3fc8dc[_0x2fc220(0x1ee)](0x2);else{if(_0x3fc8dc<0x3e8)_0x3fc8dc=_0x3fc8dc[_0x2fc220(0x1ee)](0x1);else _0x3fc8dc=_0x3fc8dc[_0x2fc220(0x1ee)](0x0);}}else _0x3fc8dc=Number('0')['toFixed'](0x2);if(_0x134b6f){if(Math[_0x2fc220(0x23d)](_0x134b6f)<0.000001)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x2);else{if(Math[_0x2fc220(0x23d)](_0x134b6f)<0.1)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x6);else{if(Math['abs'](_0x134b6f)<0x1)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x5);else{if(Math[_0x2fc220(0x23d)](_0x134b6f)<0xa)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x4);else{if(Math['abs'](_0x134b6f)<0x64)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x3);else{if(Math['abs'](_0x134b6f)<0x3e8)_0x134b6f=_0x134b6f[_0x2fc220(0x1ee)](0x2);else _0x134b6f=_0x134b6f['toFixed'](0x2);}}}}}}else _0x134b6f=Number('0')[_0x2fc220(0x1ee)](0x2);}else _0x3fc8dc=Number('0')[_0x2fc220(0x1ee)](0x2);return{'value':_0x134b6f,'change':_0x3fc8dc,'leftTxt':_0x186410,'rightTxt':_0x2d4008};}async function getStartingBalances(_0x4af151,_0xe6c9e8=!![]){const _0x457bc3=_0x2aa5c3;if(_0x4af151[_0x457bc3(0x1ab)]!==0x0){const [_0x9497d2,_0x521163,_0x570a95]=getPerf(_0x4af151[0x0],!![]);let _0x4ef335=[];config[_0x457bc3(0x1b3)][_0x457bc3(0x26a)](_0x2ed6eb=>{const _0x260608=_0x457bc3;let _0x9ccfff=0x0,_0x512289;config[_0x260608(0x1f1)][_0x260608(0x26a)](_0x597f7e=>{const _0x498c1c=_0x260608;let _0x1c67d9=_0x597f7e['changes']['find'](_0x2cba71=>_0x2cba71[_0x498c1c(0x233)]==_0x2ed6eb['coin']);if(_0x1c67d9){_0x9ccfff+=_0x1c67d9[_0x498c1c(0x17f)];if(!_0x512289)_0x512289=_0x1c67d9[_0x498c1c(0x28f)];}}),_0x4ef335['push']({'coin':_0x2ed6eb[_0x260608(0x233)],'number':_0x9ccfff,'initialprice':_0x512289});});const _0x2a4164={'basecoin':_0x9497d2,'eur':_0x521163,'usd':_0x570a95,'coins':_0x4ef335};if(_0xe6c9e8)proxyEmit(_0x457bc3(0x140),_0x2a4164);startingBalances=_0x2a4164;}}function headlessMode(_0x5717db){const _0x459d46=_0x2aa5c3;let _0x5226de=_0x5717db[_0x459d46(0x1b3)],_0x1c3571=_0x5717db['threshold'],_0xe7c43a=[];for(let _0xccec36 of _0x5226de){if(_0xccec36['coin']!=config[_0x459d46(0x169)]){if(_0xccec36['delta']>=_0x1c3571/0x64){if(_0xccec36[_0x459d46(0x280)])_0xe7c43a[_0x459d46(0x1a9)](_0xccec36);}else{if(_0xccec36[_0x459d46(0x1c3)]<=-_0x1c3571/0x64){if(_0xccec36[_0x459d46(0x280)])_0xe7c43a[_0x459d46(0x1a9)](_0xccec36);}}}}_0xe7c43a[_0x459d46(0x1ab)]>0x0&&(_0xe7c43a[_0x459d46(0x26a)](_0x3c3ada=>{const _0x419ac1=_0x459d46;logger['debug'](_0x3c3ada[_0x419ac1(0x233)]+'\x20'+_0x3c3ada[_0x419ac1(0x17f)]+'\x20'+_0x3c3ada['last']+'\x20'+_0x3c3ada[_0x419ac1(0x2aa)]+'%\x20'+_0x3c3ada[_0x419ac1(0x25f)]+'%\x20'+(0x64*_0x3c3ada['delta'])[_0x419ac1(0x1ee)](0x2)+'%');}),placeOrder(_0xe7c43a));}function notifyBalance(_0x4add32){const _0x5adb15=_0x2aa5c3;let _0x12ee18=_0x4add32[_0x5adb15(0x1b3)],_0x15da46=_0x4add32[_0x5adb15(0x231)],_0x904401=[];for(let _0x1ca03c of _0x12ee18){if(_0x1ca03c[_0x5adb15(0x233)]!=config[_0x5adb15(0x169)]){if(_0x1ca03c[_0x5adb15(0x1c3)]>=_0x15da46/0x64){if(_0x1ca03c[_0x5adb15(0x280)])_0x904401[_0x5adb15(0x1a9)](_0x1ca03c);}else{if(_0x1ca03c[_0x5adb15(0x1c3)]<=-_0x15da46/0x64){if(_0x1ca03c[_0x5adb15(0x280)])_0x904401[_0x5adb15(0x1a9)](_0x1ca03c);}}}}if(_0x904401['length']>0x0){let _0x3ec0a5=_0x904401[_0x5adb15(0x1cf)](_0x1f13af=>_0x1f13af[_0x5adb15(0x233)]);_0x3ec0a5[_0x5adb15(0x175)]();let _0x13cc28=_0x3ec0a5['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x5adb15(0x1fd),_0x5adb15(0x286));lastCoinsToBalance=_0x13cc28;}}function symbolToCoin(_0x32bcb2){const _0x1e5567=_0x2aa5c3;let _0xe468e2;if(_0x32bcb2[_0x1e5567(0x20f)]('/'+config[_0x1e5567(0x169)]))_0xe468e2=_0x32bcb2[_0x1e5567(0x168)]('/'+config[_0x1e5567(0x169)],'');if(_0x32bcb2['includes'](config[_0x1e5567(0x169)]+'/'))_0xe468e2=_0x32bcb2[_0x1e5567(0x168)](config[_0x1e5567(0x169)]+'/','');return _0xe468e2;}async function unlockOrders(){const _0x545527=_0x2aa5c3;if(allOrdersPlaced&&lockOrders==ORDERS[_0x545527(0x1db)]){logger[_0x545527(0x248)](_0x545527(0x2b9)),lockOrders=ORDERS[_0x545527(0x198)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3b0321=await getCoins();[currentCoins,currentCoinsAll]=_0x3b0321,validateOrdersState=_0x545527(0x251),persistOpenOrders([]),lockOrders=ORDERS[_0x545527(0x14a)],logger['debug'](_0x545527(0x1fb));}}async function validateOrders(_0x18c365){const _0x50c668=_0x2aa5c3;if(_0x18c365)validateOrdersState=_0x18c365;logger['debug'](_0x50c668(0x1bf)+validateOrdersState+_0x50c668(0x1cc)+(lockOrders==0x1?_0x50c668(0x244):lockOrders==0x2?_0x50c668(0x1a6):_0x50c668(0x21e)));let _0x3357c9=[],_0x542df4=config[_0x50c668(0x2cf)]==_0x50c668(0x14d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x50c668(0x224)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x50c668(0x1db)])return;logger['debug'](_0x50c668(0x19c)+validateOrdersState),lastOrders['forEach'](_0x12215f=>{const _0x15571f=_0x50c668;let _0x32eabb=![];_0x12215f['filled']>0x0&&(_0x32eabb=!![]),_0x3357c9['push'](_0x32eabb),_0x32eabb&&config[_0x15571f(0x2cf)]!='market'&&logHistory(_0x15571f(0x1ce),'Order\x20filled:\x20'+_0x12215f['symbol']+'\x20'+_0x12215f['side']+'\x20#'+formatResult(_0x12215f[_0x15571f(0x184)],0x8)+'\x20@'+formatResult(_0x12215f[_0x15571f(0x28f)],0x8));}),_0x3357c9[_0x50c668(0x26a)]((_0x43de01,_0x431ca1)=>{const _0x2c9efe=_0x50c668;if(_0x43de01)lastOrders[_0x2c9efe(0x1d1)](_0x431ca1,0x1);}),persistOpenOrders(lastOrders);const _0x1e8e4a=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x50c668(0x234);if(validateOrdersState==_0x50c668(0x251)){validateOrdersState=_0x50c668(0x1af);if(_0x3357c9[_0x50c668(0x20f)](![])){if(config['ordertype']==_0x50c668(0x14d)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3357c9[_0x50c668(0x20f)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x50c668(0x14d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x50c668(0x237))_0x3357c9[_0x50c668(0x20f)](![])&&(config[_0x50c668(0x2cf)]=='market'?logHistory(_0x50c668(0x195),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x50c668(0x1f6)](_0x542df4*validateOrderInterval/0xea60)+_0x50c668(0x247)+_0x1e8e4a):(await cancelOrders(),logHistory(_0x50c668(0x195),_0x50c668(0x1e7)+Math[_0x50c668(0x1f6)](_0x542df4*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1e8e4a))),await unlockOrders();else{if(validateOrdersState==_0x50c668(0x190)){if(config[_0x50c668(0x2cf)]!=_0x50c668(0x14d))logHistory(_0x50c668(0x195),_0x50c668(0x15a)+_0x1e8e4a);await unlockOrders();}}}}}async function cancelOrders(){const _0x4a4c41=_0x2aa5c3;lastOrders[_0x4a4c41(0x26a)](async _0x87ac9c=>{const _0x18ee42=_0x4a4c41;try{const _0x3b907e=await exchange['cancelOrder'](_0x87ac9c[_0x18ee42(0x170)],_0x87ac9c[_0x18ee42(0x20e)]);}catch(_0x31d326){if(_0x31d326['toString']()[_0x18ee42(0x20f)](_0x18ee42(0x268))){}else await handleError(_0x31d326,'cancelOrders()');}});}async function initCoinResults(_0x360ce7){const _0x5ccf9e=_0x2aa5c3;_0x360ce7?logger[_0x5ccf9e(0x248)]('Resetting\x20coin\x20results:\x20'+_0x360ce7):logger[_0x5ccf9e(0x248)](_0x5ccf9e(0x25b)),config[_0x5ccf9e(0x1b3)][_0x5ccf9e(0x26a)](_0x357f4d=>{const _0x4bebcf=_0x5ccf9e;if(!_0x357f4d['excluded']&&_0x357f4d['coin']!=config[_0x4bebcf(0x169)]){const _0x41981d=currentCoins[_0x4bebcf(0x217)](_0x1935b4=>_0x1935b4[_0x4bebcf(0x233)]==_0x357f4d[_0x4bebcf(0x233)]),_0x1216bd=global[_0x4bebcf(0x1ea)][noslash(_0x357f4d[_0x4bebcf(0x20e)])];let _0x1176fa=_0x41981d?_0x41981d[_0x4bebcf(0x17f)]:null,_0xc69b13=_0x357f4d[_0x4bebcf(0x19d)]?0x1/_0x1216bd:_0x1216bd,_0x3462e8;config['liquidity'][_0x4bebcf(0x26a)](_0x5a2064=>{const _0x2b5add=_0x4bebcf;!_0x3462e8&&(_0x3462e8=_0x5a2064[_0x2b5add(0x287)][_0x2b5add(0x217)](_0x4e3d21=>_0x4e3d21[_0x2b5add(0x233)]==_0x357f4d['coin']),_0x3462e8&&(_0x1176fa=_0x3462e8[_0x2b5add(0x17f)],_0xc69b13=_0x3462e8[_0x2b5add(0x28f)]));});let _0x18213d=dbCoinResults['get'](_0x4bebcf(0x1ac))['find']({'coin':_0x357f4d[_0x4bebcf(0x233)]})[_0x4bebcf(0x1b8)]();if(!_0x18213d){const _0x579c91={'coin':_0x357f4d[_0x4bebcf(0x233)],'number':_0x1176fa,'breakeven':_0xc69b13,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4bebcf(0x243)](_0x4bebcf(0x1ac))[_0x4bebcf(0x1a9)](_0x579c91)['write']();}else{if(_0x360ce7&&_0x357f4d[_0x4bebcf(0x233)]==_0x360ce7){const _0x30e07c={'coin':_0x357f4d[_0x4bebcf(0x233)],'number':_0x1176fa,'breakeven':_0xc69b13,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4bebcf(0x1ac))[_0x4bebcf(0x217)]({'coin':_0x357f4d['coin']})[_0x4bebcf(0x29f)](_0x30e07c)[_0x4bebcf(0x277)]();}}}});}async function updateCoinResults(_0x413ef8,_0x4368d7=![]){const _0x1c363b=_0x2aa5c3;let _0x325d05,_0x108477,_0x416755,_0x36055a,_0x43b971,_0x3fd712,_0x1b262d=dbCoinResults[_0x1c363b(0x243)](_0x1c363b(0x1ac))[_0x1c363b(0x217)]({'coin':_0x413ef8[_0x1c363b(0x233)]})['value'](),_0x1d65f0=![];_0x1b262d&&Object[_0x1c363b(0x285)](_0x1b262d)[_0x1c363b(0x26a)](([_0x4c5c80,_0x27b627])=>{if(_0x27b627==null)_0x1d65f0=!![];});(!_0x1b262d||_0x1d65f0)&&(await initCoinResults(_0x413ef8[_0x1c363b(0x233)]),_0x1b262d=dbCoinResults['get'](_0x1c363b(0x1ac))[_0x1c363b(0x217)]({'coin':_0x413ef8[_0x1c363b(0x233)]})['value']());_0x413ef8[_0x1c363b(0x19d)]&&(_0x3fd712={'filled':_0x413ef8[_0x1c363b(0x184)]*_0x413ef8[_0x1c363b(0x28f)],'amount':_0x413ef8[_0x1c363b(0x184)]*_0x413ef8[_0x1c363b(0x28f)],'side':_0x413ef8['side']=='sell'?_0x1c363b(0x29a):_0x1c363b(0x26b),'price':0x1/_0x413ef8['price']},_0x413ef8={..._0x413ef8,..._0x3fd712});_0x4368d7?_0x108477=_0x413ef8[_0x1c363b(0x163)]==_0x1c363b(0x29a)?_0x1b262d[_0x1c363b(0x17f)]+_0x413ef8[_0x1c363b(0x184)]:_0x1b262d['number']-_0x413ef8[_0x1c363b(0x184)]:_0x108477=await getCoinNumber(_0x413ef8['coin']);if(_0x413ef8[_0x1c363b(0x226)]&&_0x413ef8['fee'][_0x1c363b(0x22a)]==config['basecoin'])_0x325d05=_0x413ef8[_0x1c363b(0x226)][_0x1c363b(0x159)];else{if(_0x413ef8[_0x1c363b(0x226)]&&_0x413ef8[_0x1c363b(0x226)][_0x1c363b(0x22a)]==_0x1c363b(0x207)&&!_0x4368d7)_0x325d05=_0x413ef8[_0x1c363b(0x226)][_0x1c363b(0x159)]*global['ticker'][_0x1c363b(0x207)+config['basecoin']];else _0x325d05=defaultFee*_0x413ef8[_0x1c363b(0x184)]*_0x413ef8[_0x1c363b(0x28f)];}_0x413ef8[_0x1c363b(0x163)]==_0x1c363b(0x29a)?(_0x416755=_0x108477!=0x0?(_0x1b262d[_0x1c363b(0x232)]*_0x1b262d[_0x1c363b(0x17f)]+_0x413ef8[_0x1c363b(0x28f)]*(_0x108477-_0x1b262d[_0x1c363b(0x17f)])+_0x325d05)/_0x108477:0x0,_0x36055a=_0x1b262d['realized']):(_0x416755=_0x108477!=0x0?(_0x1b262d['breakeven']*_0x1b262d[_0x1c363b(0x17f)]-_0x413ef8['price']*(_0x1b262d[_0x1c363b(0x17f)]-_0x108477)+_0x325d05)/_0x108477:0x0,_0x36055a=_0x1b262d[_0x1c363b(0x205)]+(_0x413ef8['price']-_0x1b262d[_0x1c363b(0x232)])*_0x413ef8[_0x1c363b(0x184)]);_0x43b971=(_0x413ef8[_0x1c363b(0x28f)]-_0x416755-_0x325d05/_0x413ef8[_0x1c363b(0x184)])*_0x108477;let _0x28f235={'coin':_0x413ef8[_0x1c363b(0x233)],'number':_0x108477,'breakeven':formatResult(_0x416755,0x8),'realized':formatResult(_0x36055a,0x8),'unrealized':formatResult(_0x43b971,0x8),'fees':formatResult(_0x1b262d[_0x1c363b(0x19a)]+_0x325d05,0x8),'sells':_0x413ef8['side']==_0x1c363b(0x26b)?_0x1b262d[_0x1c363b(0x1c8)]+0x1:_0x1b262d[_0x1c363b(0x1c8)],'buys':_0x413ef8['side']==_0x1c363b(0x29a)?_0x1b262d[_0x1c363b(0x1c7)]+0x1:_0x1b262d[_0x1c363b(0x1c7)]};dbCoinResults[_0x1c363b(0x243)](_0x1c363b(0x1ac))[_0x1c363b(0x217)]({'coin':_0x413ef8[_0x1c363b(0x233)]})[_0x1c363b(0x29f)](_0x28f235)[_0x1c363b(0x277)]();if(!_0x4368d7){if(_0x413ef8[_0x1c363b(0x226)]&&_0x413ef8['fee'][_0x1c363b(0x22a)]==_0x1c363b(0x207)){const _0x44f108=currentCoins['find'](_0x5d95fd=>_0x5d95fd[_0x1c363b(0x233)]=='BNB');if(_0x44f108){let _0x33da3d=dbCoinResults[_0x1c363b(0x243)]('coins')[_0x1c363b(0x217)]({'coin':'BNB'})['value']();_0x28f235={..._0x33da3d,'number':_0x44f108[_0x1c363b(0x17f)]},dbCoinResults['get'](_0x1c363b(0x1ac))[_0x1c363b(0x217)]({'coin':_0x1c363b(0x207)})[_0x1c363b(0x29f)](_0x28f235)['write']();}}}}async function placeOrder(_0x11334d){const _0x2aa83e=_0x2aa5c3,_0x1f48ac=config[_0x2aa83e(0x2cf)]=='market'?_0x2aa83e(0x14d):'limit';if(lockOrders==ORDERS[_0x2aa83e(0x14a)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2aa83e(0x1db)],allOrdersPlaced=![],validateOrdersState=_0x2aa83e(0x251);let _0x5a695b=![];lastOrders=[];for(const _0x531c3b of _0x11334d){let _0xbeb590,_0x24022c,_0x4ff606,_0x5cb8db,_0x139ec2,_0x55bbcf=_0x531c3b[_0x2aa83e(0x20e)];try{const _0x2b86dc=await exchange['fetchTicker'](_0x55bbcf);_0xbeb590=_0x531c3b[_0x2aa83e(0x19d)]?0x1/_0x531c3b[_0x2aa83e(0x1eb)]:_0x531c3b[_0x2aa83e(0x1eb)],_0x24022c=_0x2b86dc[_0x2aa83e(0x176)],_0x4ff606=_0x2b86dc[_0x2aa83e(0x167)];_0x531c3b[_0x2aa83e(0x19d)]?(_0x5cb8db=_0x531c3b[_0x2aa83e(0x163)]==_0x2aa83e(0x29a)?_0x2aa83e(0x26b):_0x2aa83e(0x29a),_0x139ec2=Math[_0x2aa83e(0x23d)](_0x531c3b[_0x2aa83e(0x260)])/_0xbeb590):(_0x5cb8db=_0x531c3b[_0x2aa83e(0x163)],_0x139ec2=Math[_0x2aa83e(0x23d)](_0x531c3b[_0x2aa83e(0x260)]));_0x1f48ac==_0x2aa83e(0x18b)&&(config[_0x2aa83e(0x2cf)]==_0x2aa83e(0x29c)&&(_0xbeb590=_0x5cb8db==_0x2aa83e(0x29a)?_0x24022c:_0x4ff606),config[_0x2aa83e(0x2cf)]==_0x2aa83e(0x1e5)&&(_0xbeb590=_0x5cb8db==_0x2aa83e(0x29a)?_0x4ff606:_0x24022c));_0x139ec2=formatResult(_0x139ec2,0x8),_0xbeb590=formatResult(_0xbeb590,0x8);const _0x16121c=_0x5cb8db==_0x2aa83e(0x26b)?config[_0x2aa83e(0x2ac)]?String[_0x2aa83e(0x294)]('0x'+config['emojisell'])+'\x20':'':config[_0x2aa83e(0x19b)]?String[_0x2aa83e(0x294)]('0x'+config[_0x2aa83e(0x19b)])+'\x20':'',_0x3d22e5=_0x1f48ac==_0x2aa83e(0x14d)?_0x2aa83e(0x2ca):config[_0x2aa83e(0x2cf)]=='limit-high'?_0x2aa83e(0x1cb):_0x2aa83e(0x165),_0x9d8bd0=(Math[_0x2aa83e(0x1a3)](Math[_0x2aa83e(0x185)]()*0x35a4e900)+0x5f5e100)[_0x2aa83e(0x1fc)]();lastOrders['push']({'customId':_0x9d8bd0,'symbol':_0x55bbcf,'coin':_0x531c3b[_0x2aa83e(0x233)],'amount':_0x139ec2,'price':_0xbeb590,'side':_0x5cb8db,'reverse':_0x531c3b['reverse'],'filled':0x0});if(_0x1f48ac==_0x2aa83e(0x14d))logHistory(_0x2aa83e(0x1ce),''+_0x16121c+_0x3d22e5+'\x20order:\x20'+_0x55bbcf+'\x20'+_0x5cb8db+'\x20#'+formatResult(_0x139ec2,0x8)+'\x20@'+formatResult(_0xbeb590,0x8));else logHistory(_0x2aa83e(0x1ce),''+_0x16121c+_0x3d22e5+_0x2aa83e(0x1da)+_0x55bbcf+'\x20'+_0x5cb8db+'\x20#'+formatResult(_0x139ec2,0x8)+'\x20@'+formatResult(_0xbeb590,0x8));let _0xf797f5;_0x1f48ac==_0x2aa83e(0x14d)?_0x5cb8db==_0x2aa83e(0x29a)&&['Bybit',_0x2aa83e(0x25a),_0x2aa83e(0x28a),_0x2aa83e(0x2b4),_0x2aa83e(0x150)][_0x2aa83e(0x20f)](config[_0x2aa83e(0x177)])?_0xf797f5=await exchange[_0x2aa83e(0x189)](_0x55bbcf,_0x1f48ac,_0x5cb8db,_0x139ec2,_0xbeb590):_0xf797f5=await exchange[_0x2aa83e(0x189)](_0x55bbcf,_0x1f48ac,_0x5cb8db,_0x139ec2,undefined):_0xf797f5=await exchange[_0x2aa83e(0x189)](_0x55bbcf,_0x1f48ac,_0x5cb8db,_0x139ec2,_0xbeb590);logger[_0x2aa83e(0x248)](_0x2aa83e(0x204)+_0xf797f5['id']+_0x2aa83e(0x1d8)+_0x9d8bd0);const _0x1bd6f1=lastOrders[_0x2aa83e(0x1ab)]-0x1;if(_0x1bd6f1>=0x0&&lastOrders[_0x1bd6f1][_0x2aa83e(0x193)]==_0x9d8bd0){lastOrders[_0x1bd6f1][_0x2aa83e(0x170)]=_0xf797f5['id'];if(_0xf797f5['amount'])lastOrders[_0x1bd6f1][_0x2aa83e(0x23b)]=_0xf797f5[_0x2aa83e(0x23b)];if(_0xf797f5[_0x2aa83e(0x28f)])lastOrders[_0x1bd6f1][_0x2aa83e(0x28f)]=_0xf797f5['price'];lastOrders[_0x1bd6f1][_0x2aa83e(0x226)]=_0xf797f5[_0x2aa83e(0x226)];}if(config[_0x2aa83e(0x22d)]!=0x0){let _0x5c02ad=null;if(cooldownTracker[_0x2aa83e(0x1ab)]==config[_0x2aa83e(0x22d)]-0x1)_0x5c02ad=cooldownTracker[_0x2aa83e(0x275)]();const _0x2c6d4a=getTimeStamp();cooldownTracker[_0x2aa83e(0x1a9)](_0x2c6d4a);if(_0x5c02ad){const _0x23271d=fns['differenceInSeconds'](new Date(_0x2c6d4a),new Date(_0x5c02ad));if(_0x23271d<cooldownInterval){logHistory(_0x2aa83e(0x2be),_0x2aa83e(0x1dd)+config[_0x2aa83e(0x22d)]+_0x2aa83e(0x2b0)+cooldownInterval/0x3c+_0x2aa83e(0x196)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x5cfba4){if(_0x5cfba4[_0x2aa83e(0x1fc)]()[_0x2aa83e(0x20f)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x590904=>_0x590904[_0x2aa83e(0x20e)]!=_0x55bbcf),logHistory(_0x2aa83e(0x2be),_0x2aa83e(0x21a)+_0x55bbcf),_0x5a695b=!![];else{if(_0x5cfba4[_0x2aa83e(0x1fc)]()[_0x2aa83e(0x20f)](_0x2aa83e(0x1a2)))lastOrders=lastOrders[_0x2aa83e(0x183)](_0x1c604e=>_0x1c604e[_0x2aa83e(0x20e)]!=_0x55bbcf),logHistory('error',_0x2aa83e(0x1ca)+_0x55bbcf),_0x5a695b=!![];else{if(_0x5cfba4[_0x2aa83e(0x1fc)]()[_0x2aa83e(0x20f)](_0x2aa83e(0x2a4)))lastOrders=lastOrders[_0x2aa83e(0x183)](_0x1d487a=>_0x1d487a[_0x2aa83e(0x20e)]!=_0x55bbcf),logHistory(_0x2aa83e(0x2be),'Order\x20is\x20invalid:\x20'+_0x55bbcf),logger[_0x2aa83e(0x248)](_0x5cfba4),_0x5a695b=!![];else _0x5cfba4[_0x2aa83e(0x1fc)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x2aa83e(0x183)](_0x427bd0=>_0x427bd0[_0x2aa83e(0x20e)]!=_0x55bbcf),logHistory(_0x2aa83e(0x2be),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x55bbcf),_0x5a695b=!![]):(lastOrders=lastOrders['filter'](_0x4e4df2=>_0x4e4df2[_0x2aa83e(0x20e)]!=_0x55bbcf),await handleError(_0x5cfba4,_0x2aa83e(0x194),_0x55bbcf));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2aa83e(0x1ab)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x41e31b=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2aa83e(0x224)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x41e31b);}else unlockOrders();_0x5a695b&&config[_0x2aa83e(0x2bc)]&&(logHistory(_0x2aa83e(0x2be),_0x2aa83e(0x2cd)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x2aa83e(0x2be),_0x2aa83e(0x23f));else lockOrders!=ORDERS[_0x2aa83e(0x14a)]&&(!config[_0x2aa83e(0x2bc)]&&(config['ordertype']==_0x2aa83e(0x14d)?logHistory('error',_0x2aa83e(0x13e)):logHistory(_0x2aa83e(0x2be),_0x2aa83e(0x17d))));}}function _0x44f1(_0x1bf7a6,_0x481443){const _0x2e0495=_0x3a07();return _0x44f1=function(_0x22f2f7,_0x256a16){_0x22f2f7=_0x22f2f7-0x13e;let _0x3a079b=_0x2e0495[_0x22f2f7];return _0x3a079b;},_0x44f1(_0x1bf7a6,_0x481443);}function persistOpenOrders(_0x5918e8){const _0x652dcf=_0x2aa5c3,_0x39dd8f={...config,'openOrders':_0x5918e8};let _0x35cbce=dbConfig['get'](_0x652dcf(0x1a1))['find']({'botID':botID})[_0x652dcf(0x1b8)]();_0x35cbce&&dbConfig[_0x652dcf(0x243)](_0x652dcf(0x1a1))[_0x652dcf(0x217)]({'botID':botID})[_0x652dcf(0x29f)](_0x39dd8f)['write']();}function restoreOrders(){const _0x338ebd=_0x2aa5c3;let _0x30d09a;config['openOrders']&&allOpenOrders[_0x338ebd(0x26a)](_0x381809=>{const _0x598be2=_0x338ebd,_0x1d2a4a=config[_0x598be2(0x284)][_0x598be2(0x217)](_0xabb179=>_0xabb179[_0x598be2(0x170)]==_0x381809['id']);_0x1d2a4a&&(lastOrders[_0x598be2(0x1a9)](_0x1d2a4a),_0x30d09a=_0x381809[_0x598be2(0x208)]);});if(lastOrders[_0x338ebd(0x1ab)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x338ebd(0x1af),allOrdersPlaced=!![];const _0x7374d4=new Date()[_0x338ebd(0x179)](),_0x20b741=config[_0x338ebd(0x2cf)]==_0x338ebd(0x14d)?validateOrderTimeout*0x3c*0x3e8:config[_0x338ebd(0x224)]*0x3c*0x3e8;if(_0x30d09a+_0x20b741>_0x7374d4){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x30d09a+_0x20b741-_0x7374d4);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x5f17e5=_0x2aa5c3;if(!coinsLoaded){process[_0x5f17e5(0x1c1)]({'telegrammsg':_0x5f17e5(0x2bf)},_0x5fa5d6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4f1c95='';if(config['showname'])_0x4f1c95=_0x5f17e5(0x17b)+config[_0x5f17e5(0x18c)]+_0x5f17e5(0x28d);else _0x4f1c95='<b>Bot\x20'+botID+_0x5f17e5(0x28d);const _0x5e28cc=getKPIs(_0x5f17e5(0x169)),_0x11b719=getKPIs(_0x5f17e5(0x27b),config[_0x5f17e5(0x27b)]),_0x1fc4f1=getKPIs(_0x5f17e5(0x148)),_0x3b8234=getKPIs(_0x5f17e5(0x162),config[_0x5f17e5(0x27b)]);_0x4f1c95+=_0x5f17e5(0x180),_0x4f1c95+=_0x5e28cc['leftTxt']+_0x5f17e5(0x21b)+_0x5e28cc[_0x5f17e5(0x1b8)]+'\x0a',_0x4f1c95+=_0x5e28cc['rightTxt']+':\x20'+_0x5e28cc[_0x5f17e5(0x143)]+'%\x0a',_0x4f1c95+=_0x11b719[_0x5f17e5(0x21c)]+_0x5f17e5(0x21b)+_0x11b719[_0x5f17e5(0x1b8)]+'\x0a',_0x4f1c95+=_0x11b719['rightTxt']+':\x20'+_0x11b719[_0x5f17e5(0x143)]+'%\x0a',_0x4f1c95+=_0x1fc4f1[_0x5f17e5(0x21c)]+':\x20'+_0x1fc4f1[_0x5f17e5(0x1b8)]+'\x20('+config['basecoin']+')\x0a',_0x4f1c95+=_0x1fc4f1[_0x5f17e5(0x2b3)]+':\x20'+_0x1fc4f1[_0x5f17e5(0x143)]+'%\x20('+config['basecoin']+')\x0a',_0x4f1c95+=_0x3b8234[_0x5f17e5(0x21c)]+':\x20'+_0x3b8234[_0x5f17e5(0x1b8)]+'\x20('+config['fiat']+')\x0a',_0x4f1c95+=_0x3b8234[_0x5f17e5(0x2b3)]+':\x20'+_0x3b8234[_0x5f17e5(0x143)]+_0x5f17e5(0x1e4)+config[_0x5f17e5(0x27b)]+')\x0a',_0x4f1c95+=_0x5f17e5(0x1e6),process[_0x5f17e5(0x1c1)]({'telegrammsg':_0x4f1c95},_0x251d29=>{});}async function sendPortfolioTelegram(){const _0x5e16a2=_0x2aa5c3;if(!coinsLoaded){process[_0x5e16a2(0x1c1)]({'telegrammsg':_0x5e16a2(0x2bf)},_0x3c6df1=>{});return;}let _0xa731a5='';if(config[_0x5e16a2(0x15f)])_0xa731a5=_0x5e16a2(0x17b)+config[_0x5e16a2(0x18c)]+_0x5e16a2(0x24a);else _0xa731a5=_0x5e16a2(0x182)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xa731a5+=_0x5e16a2(0x180),_0xa731a5+=_0x5e16a2(0x25e),_0xa731a5+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xa731a5+='-------------------------------\x0a',currentCoins['forEach'](_0x38bfc6=>{const _0x154109=_0x5e16a2;_0xa731a5+=_0x38bfc6[_0x154109(0x233)][_0x154109(0x213)](0x7)+'|\x20'+formatPad(_0x38bfc6[_0x154109(0x2aa)],0x2,0x6)+'|\x20'+formatPad(_0x38bfc6['target'],0x2,0x6)+'|\x20'+formatPad(_0x38bfc6[_0x154109(0x1c3)]*0x64,0x2,0x6)+'\x0a';}),_0xa731a5+=_0x5e16a2(0x1e6),process[_0x5e16a2(0x1c1)]({'telegrammsg':_0xa731a5},_0x527718=>{});}function formatPad(_0x30f791,_0x16af50,_0x1a08d5){const _0x3b409d=_0x2aa5c3,_0x451cb4=formatResultString(_0x30f791,_0x16af50);return _0x451cb4?_0x451cb4['padStart'](_0x1a08d5):''[_0x3b409d(0x1df)](_0x1a08d5);}function logHistory(_0x13182c,_0x22df0e,_0x2c83a0=''){const _0x201fba=_0x2aa5c3;logger[_0x201fba(0x27c)](''+_0x22df0e);let _0xa8cfa8={'time':getTimeStamp(),'type':_0x13182c,'event':_0x22df0e};dbLogs['get'](_0x201fba(0x14c))[_0x201fba(0x1a9)](_0xa8cfa8)['write']();if(_0x2c83a0=='')_0x2c83a0=_0x22df0e;proxyEmit(_0x201fba(0x2c3),{'log':_0xa8cfa8,'summary':_0x2c83a0}),process[_0x201fba(0x1c1)]({'telegram':{..._0xa8cfa8,'botname':config[_0x201fba(0x18c)],'showname':config['showname']}},_0x15270f=>{});}function emitHistory(_0xf16ef8={}){const _0x45567d=_0x2aa5c3;Object['keys'](_0xf16ef8)[_0x45567d(0x1ab)]==0x0&&(_0xf16ef8={'type':[_0x45567d(0x1ce),_0x45567d(0x2c3)],'event':'','page':0x1});if(_0xf16ef8[_0x45567d(0x2ad)][_0x45567d(0x20f)](_0x45567d(0x2c3)))_0xf16ef8[_0x45567d(0x2ad)]['splice'](_0xf16ef8[_0x45567d(0x2ad)][_0x45567d(0x20b)](_0x45567d(0x2c3)),0x1,_0x45567d(0x2be),_0x45567d(0x1fd),_0x45567d(0x195));if(dbLogs[_0x45567d(0x273)](_0x45567d(0x14c))[_0x45567d(0x1b8)]()){let _0x3851a6=dbLogs[_0x45567d(0x243)]('logs')[_0x45567d(0x183)](_0x26b756=>{const _0x47adc0=_0x45567d;if(_0xf16ef8[_0x47adc0(0x2ad)][_0x47adc0(0x1ab)]==0x0)return![];else return _0xf16ef8[_0x47adc0(0x2ad)]['includes'](_0x26b756[_0x47adc0(0x2ad)]);})[_0x45567d(0x183)](_0x480b95=>{const _0x268289=_0x45567d;if(_0xf16ef8['event']=='')return!![];else return _0x480b95[_0x268289(0x2c3)][_0x268289(0x2ab)]()['includes'](_0xf16ef8[_0x268289(0x2c3)]['toLowerCase']());})[_0x45567d(0x228)](_0x45567d(0x1ad)),_0x149ae2=_0x3851a6['value']()['length'];_0x3851a6=_0x3851a6[_0x45567d(0x19d)]()[_0x45567d(0x291)]((_0xf16ef8[_0x45567d(0x2bd)]-0x1)*logPageSize,_0xf16ef8[_0x45567d(0x2bd)]*logPageSize-0x1)[_0x45567d(0x19d)]()[_0x45567d(0x1b8)](),proxyEmit('event-history',{'logs':_0x3851a6,'total':_0x149ae2});}else proxyEmit(_0x45567d(0x1f8),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2a727a){const _0x4c4e5e=_0x2aa5c3;if(dbLogs[_0x4c4e5e(0x273)]('logs')[_0x4c4e5e(0x1b8)]()){const _0x17db9a=dbLogs[_0x4c4e5e(0x243)]('logs')[_0x4c4e5e(0x228)]('time')[_0x4c4e5e(0x183)](_0x473b1f=>{const _0x3ab08b=_0x4c4e5e;return _0x473b1f['type']==_0x3ab08b(0x1ce);})[_0x4c4e5e(0x1b8)]();dbLogs['get'](_0x4c4e5e(0x14c))[_0x4c4e5e(0x15d)]()[_0x4c4e5e(0x277)](),dbLogs['get'](_0x4c4e5e(0x14c))[_0x4c4e5e(0x29f)](_0x17db9a)[_0x4c4e5e(0x277)](),emitHistory(_0x2a727a);}}async function pauseBot(){const _0x46b3a5=_0x2aa5c3,_0xa2fbcb=new Date()[_0x46b3a5(0x179)]();if(!lastErrorShown||_0xa2fbcb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xa2fbcb;!lastBotPause?(lastBotPause=_0xa2fbcb,consecutivePauses=0x1):(_0xa2fbcb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x46b3a5(0x1c1)]({'stop':_0x46b3a5(0x211)},_0x5e327e=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x46b3a5(0x179)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1ec310=_0x2aa5c3;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1ec310(0x1e8)},_0x2e67d3=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5c6b7c,_0x1e5661){const _0x1a6be8=_0x2aa5c3;if(botPaused)return;const _0x81d389=config[_0x1a6be8(0x177)]||'Exchange';if(_0x1e5661)logger[_0x1a6be8(0x248)]('Exception\x20thrown\x20in\x20'+_0x1e5661);if(_0x5c6b7c[_0x1a6be8(0x1fc)]()[_0x1a6be8(0x20f)]('API-key\x20format\x20invalid'))logHistory(_0x1a6be8(0x2be),_0x81d389+_0x1a6be8(0x24c));else{if(_0x5c6b7c[_0x1a6be8(0x1fc)]()['includes'](_0x1a6be8(0x1cd)))logHistory(_0x1a6be8(0x2be),_0x81d389+_0x1a6be8(0x2a9));else _0x5c6b7c[_0x1a6be8(0x1fc)]()[_0x1a6be8(0x20f)](_0x1a6be8(0x20d))?(logHistory(_0x1a6be8(0x2be),_0x81d389+_0x1a6be8(0x18a)),logHistory(_0x1a6be8(0x2be),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x5c6b7c,null);}}async function handleError(_0xd019e,_0x42c63a,_0x2cd060=''){const _0x284dd8=_0x2aa5c3;if(botPaused)return;const _0x16b22c=config[_0x284dd8(0x177)]||_0x284dd8(0x1be);if(_0x42c63a)logger[_0x284dd8(0x248)](_0x284dd8(0x1d9)+_0x42c63a);if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)](_0x284dd8(0x1f9))||_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)]('RateLimitExceeded'))logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x1b7)+pauseBotMsg),await pauseBot();else{if(_0xd019e['toString']()['includes'](_0x284dd8(0x210))||_0xd019e['toString']()[_0x284dd8(0x20f)]('OnMaintenance'))logHistory(_0x284dd8(0x2be),_0x16b22c+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0xd019e['toString']()[_0x284dd8(0x20f)](_0x284dd8(0x1b2)))logHistory('error',_0x16b22c+_0x284dd8(0x174)+pauseBotMsg),await pauseBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)](_0x284dd8(0x1c4)))logHistory(_0x284dd8(0x2be),_0x16b22c+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x284dd8(0x2be),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x284dd8(0x218)),await killBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)](_0x284dd8(0x23e)))logHistory(_0x284dd8(0x2be),_0x284dd8(0x221)),logHistory(_0x284dd8(0x2be),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xd019e instanceof ccxt[_0x284dd8(0x197)])logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x2af)+pauseBotMsg),logger[_0x284dd8(0x248)](_0x284dd8(0x2c2),_0xd019e),await pauseBot();else{if(_0xd019e['toString']()['includes'](_0x284dd8(0x146)))logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x28c)),logHistory(_0x284dd8(0x2be),_0x284dd8(0x218)),await killBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()['includes'](_0x284dd8(0x1cd)))logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x16c)),logHistory('error',_0x284dd8(0x218)),await killBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)](_0x284dd8(0x20d)))logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x295)),logHistory(_0x284dd8(0x2be),_0x284dd8(0x218)),await killBot();else{if(_0xd019e[_0x284dd8(0x1fc)]()[_0x284dd8(0x20f)](_0x284dd8(0x15b)))logHistory(_0x284dd8(0x2be),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2cd060);else _0xd019e instanceof ccxt['ExchangeError']?(logHistory(_0x284dd8(0x2be),_0x16b22c+_0x284dd8(0x23a)),logger[_0x284dd8(0x248)](_0x284dd8(0x2c2),_0xd019e)):(logHistory(_0x284dd8(0x2be),_0x284dd8(0x29e)+pauseBotMsg),logger['debug']('Error\x20details:',_0xd019e),await pauseBot());}}}}}}}}}}}function formatResult(_0x13560a,_0x26a9b0){const _0x217165=_0x2aa5c3;return parseFloat(_0x13560a[_0x217165(0x1ee)](_0x26a9b0));}function formatResultTruncate(_0x2283fb,_0x109076){const _0x213286=_0x2aa5c3;let _0x32d702=formatResultString(_0x2283fb,0xa),_0x37a164=_0x32d702['indexOf']('.');return _0x37a164!=-0x1&&(_0x32d702=_0x32d702[_0x213286(0x291)](0x0,_0x37a164+_0x109076+0x1)),Number(_0x32d702);}function formatResultString(_0x2506df,_0x3d61a5){const _0x585ef6=_0x2aa5c3;let _0x2c35b2;if(!(''+_0x2506df)[_0x585ef6(0x20f)]('e'))_0x2c35b2=+(Math[_0x585ef6(0x1f6)](_0x2506df+'e+'+_0x3d61a5)+'e-'+_0x3d61a5);else{let _0x4cc6c2=(''+_0x2506df)[_0x585ef6(0x13f)]('e'),_0x1ecdc7='';+_0x4cc6c2[0x1]+_0x3d61a5>0x0&&(_0x1ecdc7='+'),_0x2c35b2=+(Math['round'](+_0x4cc6c2[0x0]+'e'+_0x1ecdc7+(+_0x4cc6c2[0x1]+_0x3d61a5))+'e-'+_0x3d61a5);}return Number(_0x2c35b2)[_0x585ef6(0x1ee)](_0x3d61a5);}function getServerTime(){const _0x2649e3=_0x2aa5c3,_0x189767=new Date();return _0x189767[_0x2649e3(0x1d5)]()+'/'+(_0x189767['getMonth']()+0x1)[_0x2649e3(0x1fc)]()[_0x2649e3(0x1df)](0x2,'0')+'/'+_0x189767[_0x2649e3(0x290)]()[_0x2649e3(0x1fc)]()[_0x2649e3(0x1df)](0x2,'0')+'\x20'+_0x189767[_0x2649e3(0x26f)]()[_0x2649e3(0x1fc)]()[_0x2649e3(0x1df)](0x2,'0')+':'+_0x189767[_0x2649e3(0x1c5)]()['toString']()[_0x2649e3(0x1df)](0x2,'0')+':'+_0x189767[_0x2649e3(0x214)]()[_0x2649e3(0x1fc)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x450029=_0x2aa5c3,_0x2ce577=shiftedTime();return _0x2ce577[_0x450029(0x1d5)]()+'/'+(_0x2ce577['getMonth']()+0x1)[_0x450029(0x1fc)]()[_0x450029(0x1df)](0x2,'0')+'/'+_0x2ce577[_0x450029(0x290)]()[_0x450029(0x1fc)]()[_0x450029(0x1df)](0x2,'0')+'\x20'+_0x2ce577[_0x450029(0x26f)]()[_0x450029(0x1fc)]()['padStart'](0x2,'0')+':'+_0x2ce577[_0x450029(0x1c5)]()[_0x450029(0x1fc)]()['padStart'](0x2,'0')+':'+_0x2ce577[_0x450029(0x214)]()[_0x450029(0x1fc)]()[_0x450029(0x1df)](0x2,'0');}function getDate(){const _0x248ed1=_0x2aa5c3,_0x4dc365=shiftedTime();return _0x4dc365[_0x248ed1(0x1d5)]()+'/'+(_0x4dc365['getMonth']()+0x1)[_0x248ed1(0x1fc)]()[_0x248ed1(0x1df)](0x2,'0')+'/'+_0x4dc365[_0x248ed1(0x290)]()[_0x248ed1(0x1fc)]()['padStart'](0x2,'0');}function getHour(){const _0x2424d2=_0x2aa5c3,_0x534483=shiftedTime();return _0x534483['getHours']()[_0x2424d2(0x1fc)]()[_0x2424d2(0x1df)](0x2,'0');}function sleep(_0xf84a06){return new Promise(_0xd14fed=>setTimeout(_0xd14fed,_0xf84a06));}function shiftedTime(){const _0x4e242b=_0x2aa5c3,_0xaffd0f=new Date();let _0x6927d0=_0xaffd0f;if(config&&config[_0x4e242b(0x1f3)]!==0x0)_0x6927d0=fns['add'](_0xaffd0f,{'hours':config[_0x4e242b(0x1f3)]});return _0x6927d0;}function timer(_0x4d8c7c){const _0x1a93ba=_0x2aa5c3,_0x5a9a21=new Date();!lasttime?console[_0x1a93ba(0x242)](getTimeStamp()+_0x1a93ba(0x264),_0x4d8c7c,_0x5a9a21):console[_0x1a93ba(0x242)](getTimeStamp()+':\x20timer\x20>',_0x4d8c7c,(_0x5a9a21-lasttime)/0x3e8),lasttime=_0x5a9a21;}