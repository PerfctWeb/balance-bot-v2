const _0xefa3fc=_0x15f8;(function(_0x18a3c6,_0xd427c2){const _0x292308=_0x15f8,_0xc3e701=_0x18a3c6();while(!![]){try{const _0x5eefb5=-parseInt(_0x292308(0x130))/0x1*(-parseInt(_0x292308(0x203))/0x2)+-parseInt(_0x292308(0x114))/0x3*(parseInt(_0x292308(0x7e))/0x4)+parseInt(_0x292308(0x7f))/0x5+parseInt(_0x292308(0x8a))/0x6+-parseInt(_0x292308(0xa3))/0x7*(parseInt(_0x292308(0x1f0))/0x8)+-parseInt(_0x292308(0x78))/0x9*(parseInt(_0x292308(0x1e9))/0xa)+-parseInt(_0x292308(0x218))/0xb*(parseInt(_0x292308(0xf9))/0xc);if(_0x5eefb5===_0xd427c2)break;else _0xc3e701['push'](_0xc3e701['shift']());}catch(_0x50031d){_0xc3e701['push'](_0xc3e701['shift']());}}}(_0x2251,0x25b94));const _0x2bc174=function(){let _0x1ab2eb=!![];return function(_0xb1ff28,_0x53aefb){const _0x3fa539=_0x1ab2eb?function(){const _0x2418a8=_0x15f8;if(_0x53aefb){const _0x57b0f4=_0x53aefb[_0x2418a8(0x192)](_0xb1ff28,arguments);return _0x53aefb=null,_0x57b0f4;}}:function(){};return _0x1ab2eb=![],_0x3fa539;};}(),_0x23d850=_0x2bc174(this,function(){const _0x1266c6=_0x15f8;return _0x23d850[_0x1266c6(0xe6)]()[_0x1266c6(0x134)]('(((.+)+)+)+$')[_0x1266c6(0xe6)]()[_0x1266c6(0x156)](_0x23d850)[_0x1266c6(0x134)](_0x1266c6(0x157));});_0x23d850();'use strict';const ccxt=require('ccxt'),low=require(_0xefa3fc(0x1d3)),FileSync=require(_0xefa3fc(0x22e)),fs=require('fs'),fns=require(_0xefa3fc(0x86)),forge=require(_0xefa3fc(0x14c)),util=require(_0xefa3fc(0x201)),argv=require(_0xefa3fc(0xc9))(process[_0xefa3fc(0xd4)][_0xefa3fc(0x124)](0x2))[_0xefa3fc(0xd4)],path=require(_0xefa3fc(0x123)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0xefa3fc(0x145),_0xefa3fc(0xed),'TUSD',_0xefa3fc(0xe7),'USDC',_0xefa3fc(0x155)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xefa3fc(0x210)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xefa3fc(0x21d)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc;let enableFiatToggle;const serverversion=require(_0xefa3fc(0x20f))['version'],environment=require('./version.json')[_0xefa3fc(0x213)]||_0xefa3fc(0x195),botID=process['argv'][0x2]||_0xefa3fc(0x21a),pattern=/^[0-9]{3}$/;!pattern[_0xefa3fc(0x12c)](botID)&&(console[_0xefa3fc(0xc6)]('Error:\x20Invalid\x20argument\x20'+botID+_0xefa3fc(0xe5)),killBot());const userID=process[_0xefa3fc(0xd4)][0x3]||'',configpath=userID?_0xefa3fc(0x18b)+userID+'/':_0xefa3fc(0x18b),logspath=userID?_0xefa3fc(0x146)+userID+'/':_0xefa3fc(0x146),loggerfile=fs[_0xefa3fc(0xdc)](logspath+_0xefa3fc(0x15b),{'flags':'a'});!fs[_0xefa3fc(0x10e)](configpath)&&fs[_0xefa3fc(0x1b2)](configpath);!fs[_0xefa3fc(0x10e)](logspath)&&fs[_0xefa3fc(0x1b2)](logspath);function _0x15f8(_0x1d03a2,_0x18b974){const _0x3d0a79=_0x2251();return _0x15f8=function(_0x23d850,_0x2bc174){_0x23d850=_0x23d850-0x6a;let _0x22519c=_0x3d0a79[_0x23d850];return _0x22519c;},_0x15f8(_0x1d03a2,_0x18b974);}const configfile=configpath+_0xefa3fc(0x111)+botID+_0xefa3fc(0x1b1),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0xefa3fc(0x1f1),coinresultsfile=configpath+_0xefa3fc(0x111)+botID+_0xefa3fc(0x1a5),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0xefa3fc(0x18e),configbackuppath=configpath+_0xefa3fc(0x1c9),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xefa3fc(0xb0)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xefa3fc(0xb0)]({'data':[],'version':serverversion})[_0xefa3fc(0x221)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xefa3fc(0xb0)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4e21b0=>{const _0x5c6126=_0xefa3fc;console[_0x5c6126(0xc6)](_0x4e21b0);},'simple':_0x3b415c=>{const _0x2ac4cc=_0xefa3fc;console[_0x2ac4cc(0xc6)](_0x3b415c),loggerfile['write'](util['format'](_0x3b415c)+'\x0a');},'full':async(_0x513acc,_0x59afb7='')=>{const _0x548225=_0xefa3fc;let _0x2c861f;if(config['showname'])_0x2c861f=getTimeStamp()+':\x20'+config[_0x548225(0x83)]+'\x20>\x20'+_0x513acc;else _0x2c861f=getTimeStamp()+':\x20Bot\x20'+botID+_0x548225(0x16d)+_0x513acc;console[_0x548225(0xc6)](_0x2c861f),loggerfile[_0x548225(0x221)](util[_0x548225(0x161)](_0x2c861f)+'\x0a'),_0x59afb7&&(console[_0x548225(0xc6)](_0x59afb7),loggerfile['write'](util[_0x548225(0x161)](_0x59afb7)+'\x0a'));},'debug':async(_0x13213f,_0x573311='')=>{const _0x5e4fba=_0xefa3fc;let _0xa6d601;if(config[_0x5e4fba(0x1ac)])_0xa6d601=getTimeStamp()+':\x20'+config[_0x5e4fba(0x83)]+_0x5e4fba(0xca)+_0x13213f;else _0xa6d601=getTimeStamp()+_0x5e4fba(0x113)+botID+'\x20>\x20[DEBUG]\x20'+_0x13213f;if(debugging)console[_0x5e4fba(0xc6)](_0xa6d601);loggerfile[_0x5e4fba(0x221)](util[_0x5e4fba(0x161)](_0xa6d601)+'\x0a');if(_0x573311){if(debugging)console[_0x5e4fba(0xc6)](_0x573311);loggerfile['write'](util[_0x5e4fba(0x161)](_0x573311)+'\x0a');}}};process['on']('uncaughtException',function(_0x12d6de){const _0xb64498=_0xefa3fc;handleError(_0x12d6de,_0xb64498(0xb2));});settings['timeshift']!=config[_0xefa3fc(0xff)]&&updateTimeshift(settings['timeshift']);settings[_0xefa3fc(0x12b)]!=config[_0xefa3fc(0x12b)]&&updateOnepagemode(settings[_0xefa3fc(0x12b)]);(settings[_0xefa3fc(0x6f)]&&!config[_0xefa3fc(0x6f)]||!settings['marketcapApi']&&config[_0xefa3fc(0x6f)])&&updateMarketcapApi(settings[_0xefa3fc(0x6f)]);process[_0xefa3fc(0x12a)]({'started':_0xefa3fc(0xb9)},_0x1a8f97=>{}),initializeProcessListeners();function proxyEmit(_0x2f004a,_0x269d5c=null){process['send']({'function':_0x2f004a,'args':_0x269d5c},_0x28ee1a=>{});}function initializeProcessListeners(){const _0x1ab410=_0xefa3fc;process['on'](_0x1ab410(0x17b),_0x167987=>{const _0x2c3248=_0x1ab410;switch(Object[_0x2c3248(0x196)](_0x167987)[0x0]){case _0x2c3248(0xff):_0x167987[_0x2c3248(0xff)]!=undefined&&(settings[_0x2c3248(0xff)]=_0x167987[_0x2c3248(0xff)],updateTimeshift(settings[_0x2c3248(0xff)]));break;case _0x2c3248(0x12b):_0x167987[_0x2c3248(0x12b)]!=undefined&&(settings[_0x2c3248(0x12b)]=_0x167987[_0x2c3248(0x12b)],updateOnepagemode(settings[_0x2c3248(0x12b)]));break;case'marketcapApi':_0x167987[_0x2c3248(0x6f)]!=undefined&&(settings[_0x2c3248(0x6f)]=_0x167987[_0x2c3248(0x6f)],updateMarketcapApi(settings[_0x2c3248(0x6f)]));break;case _0x2c3248(0x102):_0x167987[_0x2c3248(0x102)]!=undefined&&(bots=JSON[_0x2c3248(0x7a)](_0x167987[_0x2c3248(0x102)]),proxyEmit(_0x2c3248(0x102),bots));break;case _0x2c3248(0xd6):switch(_0x167987[_0x2c3248(0xd6)]){case _0x2c3248(0x13a):initclient();break;case _0x2c3248(0x9b):toggleBotMode();break;case _0x2c3248(0xa2):emitHistory(_0x167987['args']);break;case _0x2c3248(0xae):deleteHistoryAlerts(_0x167987[_0x2c3248(0xe4)]);break;case _0x2c3248(0x10d):getPortfolio(_0x167987[_0x2c3248(0xe4)]);break;case _0x2c3248(0x153):storeConfiguration(_0x167987['args']);break;case'storeHeadless':storeHeadless(_0x167987[_0x2c3248(0xe4)]);break;case _0x2c3248(0x137):storeFiat(_0x167987['args']);break;case _0x2c3248(0x1f3):resetHistory();break;case _0x2c3248(0x104):getStartingBalances(getNormalizedPerformance());break;case _0x2c3248(0x22d):placeOrder(_0x167987[_0x2c3248(0xe4)]);break;case _0x2c3248(0x1c7):cancelLoading();break;case _0x2c3248(0x150):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2c3248(0x15e):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x26c394=![]){const _0x5c3b32=_0xefa3fc;logger[_0x5c3b32(0x15a)](_0x5c3b32(0x1d2)+(_0x26c394?'exchange\x20reload':_0x5c3b32(0x162))+'\x20|\x20exchange:\x20'+config[_0x5c3b32(0xf5)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x26c394)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x5c3b32(0xdf)]!=_0x5c3b32(0x224)){loadingProgress=0x0;_0x26c394&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x2bf74d=await getCoins();[currentCoins,currentCoinsAll]=_0x2bf74d,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x5c3b32(0x15a)](_0x5c3b32(0x178)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5c3b32(0x6d)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x5c5de2=![]){const _0x53d40e=_0xefa3fc;logger['debug'](_0x53d40e(0x1b7)+(_0x5c5de2?_0x53d40e(0x127):_0x53d40e(0x12d))+')\x20|\x20exchange:\x20'+config[_0x53d40e(0xf5)]);if(pidBalances)clearTimeout(pidBalances);if(_0x5c5de2){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x53d40e(0xdf)]!=_0x53d40e(0x224)){loadingProgress=0x1;const _0x19e2fe=await getCoins();[currentCoins,currentCoinsAll]=_0x19e2fe,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x53d40e(0x6d)]==0x0&&allOpenOrders[_0x53d40e(0x6d)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x13f199){const _0x5a7d3e=_0xefa3fc;let _0x56d6b0=![];if(_0x13f199)_0x56d6b0=!![];let _0x1f5083;_0x56d6b0?_0x1f5083=_0x13f199['map'](_0x484712=>_0x484712['coin']):_0x1f5083=currentCoinsAll[_0x5a7d3e(0x20a)](_0x43553c=>_0x43553c['coin']);if(!config[_0x5a7d3e(0x6f)]||!_0x56d6b0&&!config[_0x5a7d3e(0x116)]||_0x1f5083['length']==0x0)return;let _0x3aa6b1=null;try{_0x3aa6b1=await axios[_0x5a7d3e(0x95)](_0x5a7d3e(0xb4),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5a7d3e(0x6f)]},'params':{'symbol':_0x1f5083['toString']()}});}catch(_0x647350){_0x3aa6b1=null,_0x647350['toString']()[_0x5a7d3e(0x18c)](_0x5a7d3e(0x13f))?(config[_0x5a7d3e(0x6f)]=![],updateConfig(),proxyEmit(_0x5a7d3e(0x17c),emittedConfiguration()),logHistory(_0x5a7d3e(0xf7),_0x5a7d3e(0x6b))):(logHistory(_0x5a7d3e(0xf7),_0x5a7d3e(0x206)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x5a7d3e(0x15a)](_0x5a7d3e(0xc7),_0x647350['toString']()+'\x20-\x20'+_0x647350['code']));}if(_0x3aa6b1){let _0x6233df=0x0;const _0x2d13b2=_0x3aa6b1[_0x5a7d3e(0x117)];_0x1f5083[_0x5a7d3e(0x14e)](_0x56246d=>{const _0x119e41=_0x5a7d3e;if(_0x2d13b2['data'][_0x56246d][0x0])_0x6233df+=_0x2d13b2[_0x119e41(0x117)][_0x56246d][0x0][_0x119e41(0x17a)][_0x119e41(0x145)]['market_cap'];}),_0x1f5083[_0x5a7d3e(0x14e)](_0x1f4be5=>{const _0x30d2dd=_0x5a7d3e,_0x31da9b=_0x2d13b2['data'][_0x1f4be5][0x0]?_0x2d13b2['data'][_0x1f4be5][0x0][_0x30d2dd(0x17a)][_0x30d2dd(0x145)][_0x30d2dd(0xb5)]:0x0;if(_0x56d6b0){const _0x48a5f1=_0x13f199[_0x30d2dd(0x75)](_0x47dd91=>_0x47dd91[_0x30d2dd(0x1fa)]==_0x1f4be5);_0x48a5f1&&(_0x48a5f1[_0x30d2dd(0x1df)]=_0x31da9b);}else{const _0xcee653=currentCoins[_0x30d2dd(0x75)](_0x37254b=>_0x37254b[_0x30d2dd(0x1fa)]==_0x1f4be5);_0xcee653&&(_0xcee653[_0x30d2dd(0x1df)]=_0x31da9b);const _0x1bd066=currentCoinsAll['find'](_0x1ca451=>_0x1ca451[_0x30d2dd(0x1fa)]==_0x1f4be5);_0x1bd066&&(_0x1bd066['marketcap']=_0x31da9b);}}),!_0x56d6b0&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x348058=_0xefa3fc,_0x420cfd=0x2;let _0x495401=0x0,_0x3c26d7=0x0,_0x158a38=0x0,_0x48db21=0x0,_0x1b7d05=0x0;config[_0x348058(0x12e)][_0x348058(0x14e)](_0x5d1954=>{const _0x1eb0c1=_0x348058;if(!_0x5d1954[_0x1eb0c1(0x18d)]){_0x158a38++,_0x495401+=_0x5d1954[_0x1eb0c1(0x1ab)];if(_0x5d1954[_0x1eb0c1(0x1ab)]===-0x1){_0x495401++;const _0x4150b3=currentCoinsAll[_0x1eb0c1(0x75)](_0x49a56b=>_0x49a56b[_0x1eb0c1(0x1fa)]==_0x5d1954[_0x1eb0c1(0x1fa)]);_0x4150b3&&(_0x48db21+=_0x4150b3[_0x1eb0c1(0x1df)],_0x1b7d05+=Math[_0x1eb0c1(0x16e)](_0x4150b3[_0x1eb0c1(0x1df)]));}if(_0x5d1954['slider']!==-0x1)_0x3c26d7++;}});let _0x22c7b5;const _0x12a370=0x64-_0x495401,_0x1b7c1b=_0x158a38-_0x3c26d7;_0x22c7b5=_0x1b7c1b===0x0?_0x495401:Math[_0x348058(0xc4)](0x64,_0x495401),config[_0x348058(0x12e)]['forEach'](_0x3c7cf4=>{const _0x250272=_0x348058,_0x354c8d=currentCoinsAll['find'](_0xe91971=>_0xe91971['coin']==_0x3c7cf4[_0x250272(0x1fa)]);_0x354c8d&&(_0x3c7cf4[_0x250272(0x1df)]=_0x354c8d[_0x250272(0x1df)]);if(!_0x3c7cf4[_0x250272(0x18d)]){if(_0x22c7b5<=0x64){if(_0x3c7cf4[_0x250272(0x1ab)]===-0x1){if(_0x48db21!==0x0&&config[_0x250272(0x116)]){if(_0x354c8d){if(config[_0x250272(0x116)]=='marketcap')_0x3c7cf4['distribution']=(_0x12a370/(_0x48db21/_0x354c8d[_0x250272(0x1df)]))[_0x250272(0xd1)](_0x420cfd);else config['marketcapEnabled']==_0x250272(0x211)&&(_0x3c7cf4[_0x250272(0x94)]=(_0x12a370/(_0x1b7d05/Math[_0x250272(0x16e)](_0x354c8d[_0x250272(0x1df)])))['toFixed'](_0x420cfd));}}}}}}),updateConfig();}function updateConfig(){const _0x4c3c48=_0xefa3fc;let _0x104146=dbConfig[_0x4c3c48(0x95)](_0x4c3c48(0x227))[_0x4c3c48(0x75)]({'botID':botID})['value']();_0x104146&&dbConfig['get']('bot')[_0x4c3c48(0x75)]({'botID':botID})[_0x4c3c48(0x208)](config)[_0x4c3c48(0x221)]();}function logMemory(){const _0x406808=_0xefa3fc;if(environment!=_0x406808(0x151))return;const _0x4cf73e=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x406808(0x15a)](_0x406808(0x80)+process[_0x406808(0x129)]+_0x406808(0x139)+formatResult(_0x4cf73e,0x1)+'\x20MB');}async function startScheduler(){const _0x5bd9ce=_0xefa3fc,_0x3b34db=shiftedTime()[_0x5bd9ce(0x7d)]();getMarketCap(),_0x3b34db==0x1&&logMemory(),(_0x3b34db==0x2||_0x3b34db==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1889ab=![]){const _0x49a9a4=_0xefa3fc;logger['debug'](_0x49a9a4(0x1db));if(!_0x1889ab)while(lockOrders!=ORDERS[_0x49a9a4(0x21d)]||coolingDown){await sleep(0x3e8);}process[_0x49a9a4(0x12a)]({'stop':'restart'},_0x21c1d7=>{});}async function initExchange(_0xfe2b0b=config['exchange'],_0x3348d4=config[_0xefa3fc(0xdf)],_0x4f30a7=config[_0xefa3fc(0x21e)],_0x4ed201=config[_0xefa3fc(0x1f2)]){const _0x413606=_0xefa3fc;if(exchange){logger[_0x413606(0x15a)](_0x413606(0x13b));return;}logger[_0x413606(0x15a)](_0x413606(0x107));!supportedExchanges()[_0x413606(0x18c)](_0xfe2b0b)&&(logHistory(_0x413606(0xf7),_0x413606(0xd3)+_0xfe2b0b+_0x413606(0x14f)),killBot());const _0x3da07b=ccxt[_0x413606(0x131)][_0xfe2b0b['toLowerCase']()];exchange=new _0x3da07b({'apiKey':_0x3348d4,'secret':_0x4f30a7,'options':{'defaultType':_0x413606(0xf6)}});if(_0x4ed201)exchange['password']=_0x4ed201;}function updateExchange(_0x1ca474,_0xc2f38a,_0x41c65d=null){const _0x347a1e=_0xefa3fc;exchange[_0x347a1e(0xdf)]=_0x1ca474,exchange['apiSecret']=_0xc2f38a,exchange['apiPassword']=_0x41c65d,logger[_0x347a1e(0x15a)](_0x347a1e(0x1a3));}function setStableCoins(){const _0x10096c=_0xefa3fc;let _0x3b3aa1=config[_0x10096c(0x189)]==_0x10096c(0x100)?_0x10096c(0x100):config['basecoin']==_0x10096c(0x16f)?_0x10096c(0x16f):_0x10096c(0x11d),_0x45675f=allSymbols[_0x10096c(0x18c)](_0x3b3aa1+_0x10096c(0xe8))?_0x10096c(0x145):allSymbols[_0x10096c(0x18c)](_0x3b3aa1+_0x10096c(0x175))?_0x10096c(0xe7):_0x10096c(0xa9),_0x54ee90=allSymbols['includes'](_0x3b3aa1+_0x10096c(0xdd))?_0x10096c(0xa9):_0x45675f;enableFiatToggle=!![],_0x45675f==_0x10096c(0xa9)&&(enableFiatToggle=![],storeFiat(_0x10096c(0xa9))),_0x54ee90!='EUR'&&(enableFiatToggle=![],storeFiat(_0x10096c(0x145))),stablecoins={'eur':{'coin':''+_0x3b3aa1+_0x54ee90,'symbol':_0x3b3aa1+'/'+_0x54ee90},'usd':{'coin':''+_0x3b3aa1+_0x45675f,'symbol':_0x3b3aa1+'/'+_0x45675f}};}async function initwsCcxt(){const _0x5db69c=_0xefa3fc;initCycle++;const _0x1be1c3=initCycle;let _0x1de0ca=[];config['portfolio'][_0x5db69c(0x14e)](_0x1fb35e=>{const _0x1359fc=_0x5db69c;if(!_0x1fb35e['excluded']&&_0x1fb35e[_0x1359fc(0x1fa)]!=config['basecoin'])_0x1de0ca[_0x1359fc(0xde)](_0x1fb35e[_0x1359fc(0xd0)]);});if(!_0x1de0ca[_0x5db69c(0x18c)](stablecoins['eur']['symbol']))_0x1de0ca[_0x5db69c(0xde)](stablecoins['eur'][_0x5db69c(0xd0)]);if(!_0x1de0ca['includes'](stablecoins[_0x5db69c(0x9e)][_0x5db69c(0xd0)]))_0x1de0ca[_0x5db69c(0xde)](stablecoins[_0x5db69c(0x9e)]['symbol']);if(config['exchange'][_0x5db69c(0xbd)]('Binance')&&config[_0x5db69c(0x189)]!=_0x5db69c(0x16f)){if(!_0x1de0ca[_0x5db69c(0x18c)]('BNB/'+config[_0x5db69c(0x189)]))_0x1de0ca['push'](_0x5db69c(0x108)+config[_0x5db69c(0x189)]);}loadCoins(_0x1de0ca),_0x1de0ca=validateSymbols(_0x1de0ca);const _0x18ac13=async _0x48d51d=>{const _0x551684=_0x5db69c;let _0x198fd9;try{const _0x1b866d=await getTickers(_0x48d51d);Object[_0x551684(0x21c)](_0x1b866d)[_0x551684(0x14e)](_0x20e29b=>{const _0x13be80=_0x551684;_0x198fd9=_0x20e29b[0x1][_0x13be80(0xd0)],gTicker[noslash(_0x198fd9)]=_0x20e29b[0x1][_0x13be80(0xd5)],gChange[_0x198fd9]=_0x20e29b[0x1][_0x13be80(0x205)];});}catch(_0x53d732){await handleError(_0x53d732,_0x551684(0x119),_0x198fd9);}},_0x924bbc=async _0x4d5a3c=>{const _0x27c022=_0x5db69c;while(initCycle==_0x1be1c3){if(!botPaused)try{const _0x4d4b09=await exchange['watchTrades'](_0x4d5a3c);gTicker[noslash(_0x4d4b09[0x0][_0x27c022(0xd0)])]=_0x4d4b09[0x0][_0x27c022(0xcb)];}catch(_0x337989){if(!exchangeStopped)await handleError(_0x337989,_0x27c022(0x1b3),_0x4d5a3c);}else await sleep(0x64);}},_0x2b1bad=async _0x3d4e49=>{const _0x2c24aa=_0x5db69c;while(initCycle==_0x1be1c3){if(!botPaused)try{const _0x50d0c6=await exchange[_0x2c24aa(0x20d)](_0x3d4e49),_0x2ab3cf=_0x50d0c6['pop']();gTicker[noslash(_0x2ab3cf[_0x2c24aa(0xd0)])]=_0x2ab3cf['price'];}catch(_0x12a564){if(!exchangeStopped)await handleError(_0x12a564,_0x2c24aa(0x1f9),_0x3d4e49[_0x2c24aa(0xe6)]());}else await sleep(0x64);}},_0x489caa=async _0x53dfb7=>{const _0x15d77c=_0x5db69c;while(initCycle==_0x1be1c3){if(!botPaused){let _0xb26393;try{await sleep(0x3c*0x3e8);const _0x2f0cfd=await getTickers(_0x53dfb7);Object[_0x15d77c(0x21c)](_0x2f0cfd)['forEach'](_0x186fe7=>{_0xb26393=_0x186fe7[0x1]['symbol'],gChange[_0xb26393]=_0x186fe7[0x1]['percentage'];});}catch(_0x500a90){if(!exchangeStopped)await handleError(_0x500a90,'fetchTickers()',_0xb26393);}}else await sleep(0x64);}},_0x10e8a2=async _0x490d94=>{const _0x3a2254=_0x5db69c;while(initCycle==_0x1be1c3){if(!botPaused)try{const _0x355cd8=await exchange[_0x3a2254(0x18f)](_0x490d94);initCycle==_0x1be1c3&&_0x355cd8[_0x3a2254(0x14e)](_0x173698=>{updateNumberCoinsCcxt(_0x173698);});}catch(_0x204233){if(!exchangeStopped)await handleError(_0x204233,_0x3a2254(0x6a));}else await sleep(0x64);}};_0x18ac13(_0x1de0ca),_0x489caa(_0x1de0ca),exchange[_0x5db69c(0x8c)][_0x5db69c(0x20d)]&&!(config[_0x5db69c(0xf5)]==_0x5db69c(0x141)&&_0x1de0ca[_0x5db69c(0x6d)]>0xa)?_0x2b1bad(_0x1de0ca):_0x1de0ca[_0x5db69c(0x14e)](_0x40e34f=>{_0x924bbc(_0x40e34f);}),_0x1de0ca[_0x5db69c(0x14e)](_0x460abd=>{_0x10e8a2(_0x460abd);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x23f3ba){const _0x3d2168=_0xefa3fc;let _0x219bfd={};try{if(config[_0x3d2168(0xf5)]!='Cryptocom')_0x219bfd=await exchange[_0x3d2168(0xe3)](_0x23f3ba);else for(const _0x30a512 of _0x23f3ba){const _0x4ce9cb=await exchange[_0x3d2168(0x194)](_0x30a512);_0x219bfd[_0x30a512]=_0x4ce9cb;}return _0x219bfd;}catch(_0x24d842){throw _0x24d842;}}function setBlockTransactionDetection(_0x115322){const _0x4cf087=_0xefa3fc;blockTransactionDetection=_0x115322,logger[_0x4cf087(0x15a)](_0x4cf087(0x20c)+blockTransactionDetection);}async function detectLiquidityChange(_0x2c9a5a=0x0){const _0xd7ef49=_0xefa3fc;transactionDetectionOngoing=!![];try{const _0x245fe5=await getCoins(_0x2c9a5a),[_0x50979a,_0x5d8d79]=_0x245fe5;let _0x832685=[];currentCoins[_0xd7ef49(0x14e)](_0x19d45f=>{const _0x3d415c=_0xd7ef49,_0x588790=_0x50979a['find'](_0x41c3d8=>_0x41c3d8[_0x3d415c(0x1fa)]==_0x19d45f[_0x3d415c(0x1fa)]);if(_0x588790){if(_0x19d45f['number']!=_0x588790[_0x3d415c(0xd2)]){let _0x37f773;if(_0x19d45f['coin']!=config[_0x3d415c(0x189)]){const _0x144ac3=gTicker[noslash(_0x19d45f[_0x3d415c(0xd0)])];_0x37f773=_0x19d45f[_0x3d415c(0x147)]?0x1/_0x144ac3:_0x144ac3;}else _0x37f773=0x1;_0x832685[_0x3d415c(0xde)]({'coin':_0x19d45f['coin'],'symbol':_0x19d45f[_0x3d415c(0xd0)],'price':_0x37f773,'number':Number(formatResult(_0x588790[_0x3d415c(0xd2)]-_0x19d45f[_0x3d415c(0xd2)],0x8)),'basecoinvalue':_0x37f773*(_0x588790[_0x3d415c(0xd2)]-_0x19d45f[_0x3d415c(0xd2)])});}}});if(_0x832685['length']>0x0&&!blockTransactionDetection)for(const _0x35b55b of _0x832685){if(config[_0xd7ef49(0x16a)]){logger[_0xd7ef49(0x15a)](_0xd7ef49(0x1c5)+_0x35b55b[_0xd7ef49(0x1ce)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0xd7ef49(0x109)]);if(lastFees['highest']==0x0||Math[_0xd7ef49(0x167)](_0x35b55b[_0xd7ef49(0x1ce)])>lastFees[_0xd7ef49(0x109)]*0x3){if(config[_0xd7ef49(0x16a)]==_0xd7ef49(0xdb)){delete _0x35b55b[_0xd7ef49(0xd0)],delete _0x35b55b['basecoinvalue'];let _0x3f5c5d=[],_0x32222b=[...config[_0xd7ef49(0x186)]]||[],_0x2cfb96=config[_0xd7ef49(0x186)];_0x32222b[_0xd7ef49(0x19d)]((_0x17413c,_0x1a2f2f)=>_0x17413c[_0xd7ef49(0x1f5)]>_0x1a2f2f[_0xd7ef49(0x1f5)]?-0x1:_0x1a2f2f[_0xd7ef49(0x1f5)]>_0x17413c['date']?0x1:0x0);const _0x244fdc=getDate();if(_0x32222b[0x0]){const _0x514fda=fns['parse'](_0x32222b[0x0]['date'],_0xd7ef49(0x1e8),new Date()),_0x57a780=fns['parse'](_0x244fdc,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x514fda,_0x57a780)){_0x3f5c5d=_0x32222b[0x0][_0xd7ef49(0xef)];const _0x543305=_0x3f5c5d['find'](_0x4d0d00=>_0x4d0d00[_0xd7ef49(0x1fa)]==_0x35b55b['coin']);_0x543305?(_0x543305[_0xd7ef49(0xd2)]+=_0x35b55b['number'],_0x543305[_0xd7ef49(0xd2)]==0x0&&(_0x3f5c5d=_0x3f5c5d[_0xd7ef49(0x1fe)](_0x2548cc=>{const _0x2df1ae=_0xd7ef49;return _0x2548cc[_0x2df1ae(0x1fa)]!=_0x35b55b[_0x2df1ae(0x1fa)];}))):_0x3f5c5d[_0xd7ef49(0xde)](_0x35b55b);const _0x328aee=_0x2cfb96[_0xd7ef49(0x75)](_0x2fa5b6=>_0x2fa5b6['date']==_0x244fdc);_0x328aee[_0xd7ef49(0xef)]=_0x3f5c5d;}else _0x2cfb96[_0xd7ef49(0xde)]({'date':_0x244fdc,'changes':[_0x35b55b]});}const _0x364199=_0x2cfb96['find'](_0x4ac633=>_0x4ac633[_0xd7ef49(0x1f5)]==_0x244fdc);if(_0x364199){let _0x35b30c=!![];_0x364199[_0xd7ef49(0xef)][_0xd7ef49(0x14e)](_0x3b8f98=>{const _0x1f9d23=_0xd7ef49;if(_0x3b8f98[_0x1f9d23(0xd2)]!=0x0)_0x35b30c=![];}),_0x35b30c&&(_0x2cfb96=_0x2cfb96[_0xd7ef49(0x1fe)](_0x5e71a2=>{const _0x37344c=_0xd7ef49;return _0x5e71a2[_0x37344c(0x1f5)]!=_0x244fdc;}));}let _0x38fd13=dbConfig[_0xd7ef49(0x95)]('bot')['find']({'botID':botID})['value']();_0x38fd13&&(dbConfig[_0xd7ef49(0x95)]('bot')[_0xd7ef49(0x75)]({'botID':botID})[_0xd7ef49(0x208)]({'liquidity':_0x2cfb96})[_0xd7ef49(0x221)](),config['liquidity']=_0x2cfb96);logHistory('success','Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x35b55b[_0xd7ef49(0xd2)])+'\x20'+_0x35b55b['coin']+'\x20'+(_0x35b55b[_0xd7ef49(0xd2)]>0x0?_0xd7ef49(0x187):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0xd7ef49(0x17c),emittedConfiguration());const _0x25bc2a=getNormalizedPerformance();emitPerformance(_0x25bc2a),getStartingBalances(_0x25bc2a),logger[_0xd7ef49(0x15a)](_0xd7ef49(0x8e));}else config[_0xd7ef49(0x16a)]==_0xd7ef49(0x22b)&&(config[_0xd7ef49(0x1aa)]?(await storeHeadless({'headless':![]}),logHistory(_0xd7ef49(0x19a),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x35b55b[_0xd7ef49(0xd2)])+'\x20'+_0x35b55b['coin']+'\x20'+(_0x35b55b['number']>0x0?_0xd7ef49(0x187):_0xd7ef49(0xfa))+_0xd7ef49(0x216))):logger[_0xd7ef49(0x15a)](_0xd7ef49(0x181)+Math[_0xd7ef49(0x167)](_0x35b55b[_0xd7ef49(0xd2)])+'\x20'+_0x35b55b[_0xd7ef49(0x1fa)]+'\x20'+(_0x35b55b[_0xd7ef49(0xd2)]>0x0?_0xd7ef49(0x187):'removed')+_0xd7ef49(0x1b0)));}else logger['debug'](_0xd7ef49(0x10c)+Math['abs'](_0x35b55b['number'])+'\x20'+_0x35b55b[_0xd7ef49(0x1fa)]+'\x20'+(_0x35b55b[_0xd7ef49(0xd2)]>0x0?_0xd7ef49(0x187):_0xd7ef49(0xfa)));}else logger['debug'](_0xd7ef49(0x181)+Math[_0xd7ef49(0x167)](_0x35b55b[_0xd7ef49(0xd2)])+'\x20'+_0x35b55b[_0xd7ef49(0x1fa)]+'\x20'+(_0x35b55b[_0xd7ef49(0xd2)]>0x0?_0xd7ef49(0x187):_0xd7ef49(0xfa))+_0xd7ef49(0xee));}currentCoins=_0x50979a,currentCoinsAll=_0x5d8d79;}catch(_0x264615){if(!exchangeStopped)await handleError(_0x264615,_0xd7ef49(0x1e0));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x556474=_0xefa3fc;logger[_0x556474(0x15a)]('Loading\x20symbols');try{markets=await exchange[_0x556474(0x1ed)]();}catch(_0x1a296c){logger[_0x556474(0x15a)](_0x556474(0x188)+_0x1a296c[_0x556474(0xe6)]());if(markets){}else logHistory(_0x556474(0xf7),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x556474(0xf7),_0x556474(0xe0)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x556474(0x15a)](_0x556474(0xc7),_0x1a296c),loading[_0x556474(0xcf)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x556474(0x21c)](markets)[_0x556474(0x14e)](_0x16896d=>{const _0x309d2d=_0x556474;_0x16896d[0x1]['active']&&_0x16896d[0x1][_0x309d2d(0xf6)]&&allSymbols[_0x309d2d(0xde)](_0x16896d[0x0]);});}function validateSymbols(_0x42af04){const _0x787864=_0xefa3fc;let _0x1c0df4=[];return _0x42af04[_0x787864(0x14e)](_0x3d20da=>{const _0x37c365=_0x787864;!allSymbols[_0x37c365(0x18c)](_0x3d20da)?logHistory(_0x37c365(0xf7),'Invalid\x20symbol:\x20'+_0x3d20da+_0x37c365(0x99)):_0x1c0df4['push'](_0x3d20da);}),_0x1c0df4;}async function initclient(){const _0x5e475b=_0xefa3fc;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5e475b(0x1e5),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5061f9=getNormalizedPerformance();emitPerformance(_0x5061f9),getStartingBalances(_0x5061f9);}async function toggleBotMode(){const _0x3137af=_0xefa3fc;let _0x4e5940=dbConfig[_0x3137af(0x95)]('bot')['find']({'botID':botID})['value']();if(_0x4e5940){const _0x364937=!_0x4e5940[_0x3137af(0x1aa)];dbConfig[_0x3137af(0x95)](_0x3137af(0x227))['find']({'botID':botID})[_0x3137af(0x208)]({'headless':_0x364937})[_0x3137af(0x221)](),config[_0x3137af(0x1aa)]=_0x364937,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5cc138=_0xefa3fc;process[_0x5cc138(0x12a)]({'updatebotmanager':!![]},_0x2c9fb5=>{}),logger[_0x5cc138(0x15a)](_0x5cc138(0x11b)+config[_0x5cc138(0x1aa)]);}async function loadCoins(_0x2c0e51){const _0x30d5d1=_0xefa3fc;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x168714,_0x101c58=0x0,_0x1b8700=0x0;_0x2c0e51[_0x30d5d1(0x14e)](_0x23979a=>{const _0x3ab8a4=_0x30d5d1;loading[_0x3ab8a4(0x16b)][_0x3ab8a4(0xde)](_0x23979a);}),loadingCanceled=![];let _0x1cbad8=![];while(_0x168714!=_0x2c0e51[_0x30d5d1(0x6d)]+maxLoadingProgress){_0x168714=loadingProgress,_0x2c0e51[_0x30d5d1(0x14e)](_0x5ab3dc=>{const _0x32014c=_0x30d5d1;if(gTicker[noslash(_0x5ab3dc)]){loading[_0x32014c(0x16b)]=loading[_0x32014c(0x16b)][_0x32014c(0x1fe)](_0x935d6=>_0x935d6!=_0x5ab3dc);if(!watchedSymbols[_0x32014c(0x18c)](_0x5ab3dc))watchedSymbols['push'](_0x5ab3dc);_0x168714++;}}),loading['progress']=Math[_0x30d5d1(0x120)](_0x168714/(_0x2c0e51[_0x30d5d1(0x6d)]+maxLoadingProgress)*0x64);loading[_0x30d5d1(0x13d)]!=0x64&&(_0x1b8700>0x1e*0x5&&(loading[_0x30d5d1(0xe1)]=!![],emitLoadingProgress()),_0x1b8700>0x78*0x5&&!_0x1cbad8&&(_0x1cbad8=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x30d5d1(0xf0)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x30d5d1(0xf7),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x30d5d1(0xcf)]=!![],emitLoadingProgress();break;}else _0x101c58!=loading['progress']&&(_0x101c58=loading[_0x30d5d1(0x13d)],emitLoadingProgress()),_0x1b8700++,await sleep(0xc8);}_0x168714==_0x2c0e51[_0x30d5d1(0x6d)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x30d5d1(0x12a)]({'status':_0x30d5d1(0x105),'live':_0x30d5d1(0xb9)},_0x46a8eb=>{}),_0x1cbad8&&logHistory(_0x30d5d1(0x19a),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5019bc=_0xefa3fc;proxyEmit(_0x5019bc(0x17c),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1bc4d8=_0xefa3fc;proxyEmit(_0x1bc4d8(0x1dc),loading);}async function getFiat(){const _0x2935a0=_0xefa3fc;let _0x24b043=gTicker[stablecoins[_0x2935a0(0x1ba)][_0x2935a0(0x1fa)]],_0x3145df=gTicker[stablecoins[_0x2935a0(0x9e)]['coin']];return{'eur':Number(_0x24b043),'usd':Number(_0x3145df)};}function capitalize(_0x9dc79f){const _0x1b634f=_0xefa3fc;return _0x9dc79f['substring'](0x0,0x1)[_0x1b634f(0x207)]()+_0x9dc79f[_0x1b634f(0x76)](0x1);}function supportedExchanges(){const _0x8083d5=_0xefa3fc,_0x57a0c5=['ws',_0x8083d5(0xe3),_0x8083d5(0x194),'watchTrades',_0x8083d5(0x18f),_0x8083d5(0x1a6),_0x8083d5(0x20e),'fetchOpenOrders',_0x8083d5(0x170)];let _0x3d1481=[],_0x26c9e7=[],_0x4ad136=ccxt[_0x8083d5(0x131)][_0x8083d5(0xa4)];_0x4ad136[_0x8083d5(0x14e)](_0x1417ad=>{const _0x3bf61d=_0x8083d5;try{const _0xcb7fdf=new ccxt[(_0x3bf61d(0x131))][_0x1417ad]();_0x26c9e7['push'](_0xcb7fdf);}catch(_0x45ed1d){}}),_0x26c9e7['forEach'](_0x2e2d7c=>{const _0x1f0934=_0x8083d5;let _0x552569=0x0;_0x57a0c5[_0x1f0934(0x14e)](_0x84ad20=>{const _0x375c1f=_0x1f0934;_0x84ad20 in _0x2e2d7c[_0x375c1f(0x8c)]&&_0x2e2d7c[_0x375c1f(0x8c)][_0x84ad20]&&_0x552569++;}),_0x552569==_0x57a0c5[_0x1f0934(0x6d)]&&_0x3d1481[_0x1f0934(0xde)](capitalize(_0x2e2d7c['id']));});let _0x5c7123=[];return _0x4ad136[_0x8083d5(0x14e)](_0x2d30da=>{const _0x2823fe=_0x8083d5;_0x2d30da=capitalize(_0x2d30da);if(!_0x3d1481['includes'](_0x2d30da))_0x5c7123[_0x2823fe(0xde)](_0x2d30da);}),_0x3d1481;}function setStartDatePerformance(){const _0x229bf0=_0xefa3fc;if(config&&config['liquidity'][0x0][_0x229bf0(0xef)][_0x229bf0(0x6d)]!=0x0){const _0xbb0d67=config['liquidity'][0x0][_0x229bf0(0xef)];dbPerformance['get'](_0x229bf0(0x117))[_0x229bf0(0x75)]({'date':config[_0x229bf0(0x9a)]})[_0x229bf0(0x208)]({'coins':_0xbb0d67})[_0x229bf0(0x221)]();}}async function recreateCoinResults(){const _0x5c8e57=_0xefa3fc;recreationNeeded=![];let _0x17a6e3,_0x10f909=[];try{for(const _0x1519bb of currentCoins){if(_0x1519bb[_0x5c8e57(0x1fa)]!=config[_0x5c8e57(0x189)]){let _0x555776=0x0,_0x2484cc,_0x296de7;_0x17a6e3=await getAllEventOrders(_0x1519bb[_0x5c8e57(0xd0)]);if(_0x17a6e3[_0x5c8e57(0x6d)]>0x0)_0x17a6e3[_0x5c8e57(0x14e)](_0x2d458f=>{const _0x16569f=_0x5c8e57,_0x152c65=_0x1519bb[_0x16569f(0xd0)][_0x16569f(0x18c)](config[_0x16569f(0x189)]+'/');_0x10f909[_0x16569f(0xde)]({'datetime':_0x2d458f[_0x16569f(0xb7)],'coin':_0x1519bb[_0x16569f(0x1fa)],'symbol':_0x1519bb[_0x16569f(0xd0)],'side':_0x2d458f[_0x16569f(0xc5)],'reverse':_0x152c65,'amount':formatResult(_0x2d458f[_0x16569f(0x191)],0x8),'filled':formatResult(_0x2d458f[_0x16569f(0x191)],0x8),'price':formatResult(_0x2d458f[_0x16569f(0xcb)],0x8)}),_0x555776=_0x2d458f['side']=='buy'?_0x555776+_0x2d458f['filled']:_0x555776-_0x2d458f[_0x16569f(0x191)];if(!_0x296de7)_0x296de7=_0x2d458f[_0x16569f(0xcb)];});_0x2484cc=_0x1519bb[_0x5c8e57(0xd2)]-_0x555776;let _0x57454c;config['liquidity'][_0x5c8e57(0x14e)](_0x436351=>{const _0x23ed0b=_0x5c8e57;!_0x57454c&&(_0x57454c=_0x436351[_0x23ed0b(0xef)]['find'](_0x171f07=>_0x171f07[_0x23ed0b(0x1fa)]==_0x1519bb['coin']),_0x57454c&&(_0x2484cc=_0x57454c['number'],_0x296de7=_0x57454c[_0x23ed0b(0xcb)]));});let _0x370201=dbCoinResults[_0x5c8e57(0x95)]('coins')[_0x5c8e57(0x75)]({'coin':_0x1519bb[_0x5c8e57(0x1fa)]})['value']();_0x370201={'coin':_0x1519bb['coin'],'number':_0x2484cc,'breakeven':_0x296de7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x5c8e57(0x110))[_0x5c8e57(0x75)]({'coin':_0x1519bb['coin']})[_0x5c8e57(0x208)](_0x370201)[_0x5c8e57(0x221)]();}}_0x10f909[_0x5c8e57(0x19d)]((_0x1915ae,_0x2c97f6)=>_0x1915ae[_0x5c8e57(0xb7)]>_0x2c97f6[_0x5c8e57(0xb7)]?0x1:_0x2c97f6[_0x5c8e57(0xb7)]>_0x1915ae[_0x5c8e57(0xb7)]?-0x1:0x0);let _0x4dafcd=0x0;for(let _0x471639 of _0x10f909){await updateCoinResults(_0x471639,!![]);}}catch(_0x117617){await handleError(_0x117617,_0x5c8e57(0xa5));}}async function getAllEventOrders(_0x521a00){const _0x4f93d5=_0xefa3fc;let _0x1cd9b4=[],_0x171c50=dbLogs['get'](_0x4f93d5(0xb8))[_0x4f93d5(0x1fe)](_0x39b0c6=>{const _0x59829b=_0x4f93d5,_0x3c86c4=_0x39b0c6[_0x59829b(0xfd)]['toLowerCase']();return _0x3c86c4[_0x59829b(0x18c)](_0x521a00[_0x59829b(0x1ec)]())&&(_0x3c86c4[_0x59829b(0x18c)](_0x59829b(0x1ae))&&_0x3c86c4[_0x59829b(0x18c)](_0x59829b(0x7c))||_0x3c86c4['includes'](_0x59829b(0x191))&&_0x3c86c4[_0x59829b(0x18c)]('order'));})['sortBy'](_0x4f93d5(0x14a))[_0x4f93d5(0x89)]();return _0x171c50[_0x4f93d5(0x14e)](_0x391010=>{const _0x4e9285=_0x4f93d5,_0x59e355=_0x391010[_0x4e9285(0xfd)][_0x4e9285(0x18c)]('sell')?_0x4e9285(0x182):_0x4e9285(0xea),_0x179db=/#([0-9]|\.)+\s/i,_0x18e6f1=Number(_0x179db['exec'](_0x391010[_0x4e9285(0xfd)])[0x0]['slice'](0x1)),_0x516f5f=/@([0-9]|\.)+$/i,_0x1924eb=Number(_0x516f5f[_0x4e9285(0x1b5)](_0x391010[_0x4e9285(0xfd)])[0x0][_0x4e9285(0x124)](0x1));_0x1cd9b4['push']({'datetime':_0x391010[_0x4e9285(0x14a)],'coin':symbolToCoin(_0x521a00),'symbol':_0x521a00,'side':_0x59e355,'amount':_0x18e6f1,'filled':_0x18e6f1,'price':_0x1924eb});}),_0x1cd9b4;}async function validate24hChanges(){const _0x1c1736=_0xefa3fc;for(const _0x530286 of currentCoins){if(_0x530286[_0x1c1736(0x1fa)]!=config['basecoin']){let _0x204cc6;_0x530286[_0x1c1736(0x147)]?_0x204cc6=formatResult((0x1/(gChange[_0x530286[_0x1c1736(0xd0)]]/0x64+0x1)-0x1)*0x64,0x3):_0x204cc6=gChange[_0x530286[_0x1c1736(0xd0)]],_0x204cc6<config['change24h']&&(logHistory(_0x1c1736(0xf7),_0x530286[_0x1c1736(0x1fa)]+_0x1c1736(0xbe)+_0x204cc6+'%'),logHistory(_0x1c1736(0xf7),_0x1c1736(0x159)),logHistory(_0x1c1736(0xf7),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5e11d8,_0x5cca0b){const _0x41276e=_0xefa3fc;if(!_0x5e11d8)return!![];const _0x382aa8=_0x5cca0b[_0x41276e(0xd9)]('.'),_0x23f959=_0x5e11d8[_0x41276e(0xd9)]('.');for(var _0x5f2915=0x0;_0x5f2915<_0x23f959[_0x41276e(0x6d)];_0x5f2915++){const _0x1ec992=~~_0x23f959[_0x5f2915],_0x2d2040=~~_0x382aa8[_0x5f2915];if(_0x1ec992<_0x2d2040)return!![];if(_0x1ec992>_0x2d2040)return![];}return![];}async function oneTimeMigration(){const _0x316f68=_0xefa3fc;let _0x126f32=dbLogs[_0x316f68(0x95)]('version')[_0x316f68(0x89)]();if(isOlderVersion(_0x126f32,'2.3.5')){let _0xa4d642=[];const _0x1fdde8=dbLogs[_0x316f68(0x95)](_0x316f68(0xb8))[_0x316f68(0x89)]();_0x1fdde8[_0x316f68(0x14e)](_0x4b4fed=>{const _0x13f2a4=_0x316f68;_0xa4d642[_0x13f2a4(0xde)]({'time':_0x4b4fed[_0x13f2a4(0x14a)],'type':_0x4b4fed[_0x13f2a4(0x11e)],'event':_0x4b4fed[_0x13f2a4(0xfd)]});}),dbLogs[_0x316f68(0x95)](_0x316f68(0xb8))['assign'](_0xa4d642)['write']();}let _0x1d46e0=dbConfig[_0x316f68(0x95)](_0x316f68(0x202))['value']();if(isOlderVersion(_0x1d46e0,_0x316f68(0x17e))){let _0xe3ff45=dbConfig[_0x316f68(0x95)](_0x316f68(0x227))[_0x316f68(0x75)]({'botID':botID})['value']();if(_0xe3ff45){let _0x33bff1=[];_0xe3ff45[_0x316f68(0x12e)][_0x316f68(0x14e)](_0x9d61e6=>{const _0x550478=_0x316f68;_0x33bff1[_0x550478(0xde)]({'coin':_0x9d61e6['coin'],'number':_0x9d61e6['startnumber'],'price':_0x9d61e6['startprice']}),delete _0x9d61e6[_0x550478(0x1ee)],delete _0x9d61e6[_0x550478(0x1bb)];});if(_0x33bff1[_0x316f68(0x6d)]!==0x0)fs['writeFile'](configbackuppath+(_0x316f68(0xba)+botID+_0x316f68(0x143)),JSON[_0x316f68(0x1d6)](_0x33bff1,null,0x4),function(_0x8bf6c7){if(_0x8bf6c7){}});const _0x5294f6=(_0x6178e2,_0x5dc120)=>{let _0x1cea7b=[];_0x5dc120['forEach'](_0x3208ea=>{const _0x31ad65=_0x15f8,_0x46f450=_0x6178e2['find'](_0x8c2792=>_0x8c2792[_0x31ad65(0x1fa)]==_0x3208ea[_0x31ad65(0x1fa)]);if(!_0x46f450)_0x1cea7b['push'](_0x3208ea);});let _0x5e5f08=[];return _0x6178e2['forEach'](_0x2df5c2=>{const _0x2ba3ff=_0x15f8,_0x6b6afb=_0x5dc120[_0x2ba3ff(0x75)](_0x5a1d03=>_0x5a1d03[_0x2ba3ff(0x1fa)]==_0x2df5c2[_0x2ba3ff(0x1fa)]);if(!_0x6b6afb||_0x6b6afb['number']==0x0&&_0x2df5c2[_0x2ba3ff(0xd2)]!=0x0)_0x5e5f08[_0x2ba3ff(0xde)](_0x2df5c2);}),{'missingDay1':_0x1cea7b,'notInDay2':_0x5e5f08};},_0x408941=dbPerformance[_0x316f68(0x95)](_0x316f68(0x117))[_0x316f68(0x174)]()[_0x316f68(0x89)]();if(_0x408941[_0x316f68(0x6d)]>0x1){const {missingDay1:_0xedcee4,notInDay2:_0x56a0b0}=_0x5294f6(_0x33bff1,_0x408941[0x1][_0x316f68(0x110)]);_0x33bff1=[..._0x33bff1,..._0xedcee4],_0x56a0b0['forEach'](_0x5d6818=>{const _0x1419de=_0x316f68;let _0x75f5cb=_0x33bff1[_0x1419de(0x1c6)](_0x2fee77=>_0x2fee77[_0x1419de(0x1fa)]==_0x5d6818[_0x1419de(0x1fa)]);_0x75f5cb!=-0x1&&_0x33bff1[_0x1419de(0x193)](_0x75f5cb,0x1);});}_0x33bff1['sort']((_0x3c48e1,_0x424c37)=>_0x3c48e1[_0x316f68(0x1fa)]>_0x424c37['coin']?0x1:_0x424c37[_0x316f68(0x1fa)]>_0x3c48e1['coin']?-0x1:0x0);let _0x5f552b=[{'date':_0xe3ff45[_0x316f68(0x9a)],'changes':_0x33bff1}];_0x408941[_0x316f68(0x6d)]>0x2&&_0x408941[_0x316f68(0x14e)]((_0xebfcca,_0x549453)=>{const _0x958f0d=_0x316f68;if(_0x549453>0x0&&_0x549453<_0x408941[_0x958f0d(0x6d)]-0x1){const {missingDay1:_0xc2361c,notInDay2:_0x512219}=_0x5294f6(_0x408941[_0x549453]['coins'],_0x408941[_0x549453+0x1]['coins']);_0x33bff1=[],(_0xc2361c['length']!=0x0||_0x512219[_0x958f0d(0x6d)]!=0x0)&&(_0xc2361c[_0x958f0d(0x6d)]!=0x0&&_0x33bff1[_0x958f0d(0xde)](..._0xc2361c),_0x512219['length']!=0x0&&(_0x512219[_0x958f0d(0x14e)](_0x147e8b=>{const _0x492331=_0x958f0d;_0x147e8b[_0x492331(0xd2)]=-_0x147e8b[_0x492331(0xd2)];}),_0x33bff1['push'](..._0x512219)),_0x33bff1[_0x958f0d(0x19d)]((_0x5c405a,_0x5e0e38)=>_0x5c405a[_0x958f0d(0x1fa)]>_0x5e0e38[_0x958f0d(0x1fa)]?0x1:_0x5e0e38[_0x958f0d(0x1fa)]>_0x5c405a[_0x958f0d(0x1fa)]?-0x1:0x0),_0x5f552b[_0x958f0d(0xde)]({'date':_0x408941[_0x549453+0x1][_0x958f0d(0x1f5)],'changes':_0x33bff1}));}}),dbConfig[_0x316f68(0x95)](_0x316f68(0x227))[_0x316f68(0x75)]({'botID':botID})[_0x316f68(0x208)]({..._0xe3ff45,'liquidity':_0x5f552b})[_0x316f68(0x221)]();}}if(isOlderVersion(_0x1d46e0,'2.6.0')){let _0x4c6434=dbConfig[_0x316f68(0x95)]('bot')[_0x316f68(0x75)]({'botID':botID})[_0x316f68(0x89)]();if(_0x4c6434){const _0x1d1303=_0x4c6434[_0x316f68(0xf5)],_0x14e0b9=_0x1d1303?capitalize(_0x1d1303):_0x316f68(0x112);dbConfig['get'](_0x316f68(0x227))['find']({'botID':botID})[_0x316f68(0x208)]({'exchange':_0x14e0b9})[_0x316f68(0x221)]();}}if(isOlderVersion(_0x1d46e0,_0x316f68(0x8d))){let _0x3d9d0f=dbConfig[_0x316f68(0x95)]('bot')[_0x316f68(0x75)]({'botID':botID})[_0x316f68(0x89)]();if(_0x3d9d0f){const _0x3e293e=_0x3d9d0f[_0x316f68(0x116)],_0xd1ee40=_0x3e293e?'marketcap':![];dbConfig[_0x316f68(0x95)]('bot')[_0x316f68(0x75)]({'botID':botID})['assign']({'marketcapEnabled':_0xd1ee40})[_0x316f68(0x221)]();}}if(isOlderVersion(_0x1d46e0,_0x316f68(0x19c))){let _0x4735d4=dbConfig[_0x316f68(0x95)](_0x316f68(0x227))[_0x316f68(0x75)]({'botID':botID})['value']();if(_0x4735d4){const _0x33316c=_0x4735d4['autoliquidity'],_0x5d3a82=_0x33316c?_0x316f68(0xdb):![];dbConfig[_0x316f68(0x95)](_0x316f68(0x227))[_0x316f68(0x75)]({'botID':botID})[_0x316f68(0x208)]({'autoliquidity':_0x5d3a82})[_0x316f68(0x221)]();}}let _0x287e3b=dbPerformance[_0x316f68(0x95)](_0x316f68(0x202))[_0x316f68(0x89)]();isOlderVersion(_0x287e3b,_0x316f68(0x17e))&&setStartDatePerformance();let _0x8cc666=dbCoinResults[_0x316f68(0x95)](_0x316f68(0x202))[_0x316f68(0x89)]();if(isOlderVersion(_0x8cc666,_0x316f68(0x197))){let _0x3202e8=dbCoinResults[_0x316f68(0x95)](_0x316f68(0x110))[_0x316f68(0x89)]();if(_0x3202e8[_0x316f68(0x6d)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2db43e=_0xefa3fc;dbConfig[_0x2db43e(0x71)](_0x2db43e(0x202),serverversion)[_0x2db43e(0x221)](),dbPerformance[_0x2db43e(0x71)](_0x2db43e(0x202),serverversion)[_0x2db43e(0x221)](),dbLogs[_0x2db43e(0x71)](_0x2db43e(0x202),serverversion)[_0x2db43e(0x221)](),dbCoinResults[_0x2db43e(0x71)]('version',serverversion)[_0x2db43e(0x221)]();}function getConfiguration(_0x37d9f5){const _0x3943a1=_0xefa3fc;let _0x13db8f=dbConfig['get'](_0x3943a1(0x227))[_0x3943a1(0x75)]({'botID':_0x37d9f5})[_0x3943a1(0x89)]();if(_0x13db8f){let _0x240ca6=![];typeof _0x13db8f[_0x3943a1(0x1b8)]==_0x3943a1(0xf8)&&(_0x13db8f={..._0x13db8f,'threshold':Number(_0x13db8f[_0x3943a1(0x1b8)])},_0x240ca6=!![]),_0x13db8f[_0x3943a1(0xce)]==undefined&&(_0x13db8f={..._0x13db8f,'change24h':-0x14},_0x240ca6=!![]),_0x13db8f[_0x3943a1(0x15c)]==undefined&&(_0x13db8f={..._0x13db8f,'fiat':_0x3943a1(0x145)},_0x240ca6=!![]),_0x13db8f['onepagemode']==undefined&&(_0x13db8f={..._0x13db8f,'onepagemode':settings['onepagemode']},_0x240ca6=!![]),_0x13db8f[_0x3943a1(0xaa)]==undefined&&(_0x13db8f={..._0x13db8f,'colorscheme':'red_yellow_blue'},_0x240ca6=!![]),_0x13db8f['autoliquidity']==undefined&&(_0x13db8f={..._0x13db8f,'autoliquidity':_0x3943a1(0xdb)},_0x240ca6=!![]),_0x13db8f[_0x3943a1(0x6f)]==undefined&&(_0x13db8f={..._0x13db8f,'marketcapApi':settings[_0x3943a1(0x6f)]?!![]:![]},_0x240ca6=!![]),_0x13db8f[_0x3943a1(0x116)]==undefined&&(_0x13db8f={..._0x13db8f,'marketcapEnabled':![]},_0x240ca6=!![]),_0x240ca6&&(_0x13db8f={'botID':_0x13db8f[_0x3943a1(0xbf)],'exchange':_0x13db8f[_0x3943a1(0xf5)],'apiKey':_0x13db8f[_0x3943a1(0xdf)],'apiSecret':_0x13db8f['apiSecret'],'apiPassword':_0x13db8f['apiPassword'],'basecoin':_0x13db8f[_0x3943a1(0x189)],'botname':_0x13db8f[_0x3943a1(0x83)],'showname':_0x13db8f[_0x3943a1(0x1ac)],'threshold':_0x13db8f[_0x3943a1(0x1b8)],'ordertype':_0x13db8f[_0x3943a1(0x228)],'timeout':_0x13db8f[_0x3943a1(0xe1)],'fiat':_0x13db8f[_0x3943a1(0x15c)],'startdate':_0x13db8f[_0x3943a1(0x9a)],'recreate':_0x13db8f[_0x3943a1(0x81)],'timeshift':_0x13db8f[_0x3943a1(0xff)],'onepagemode':_0x13db8f['onepagemode'],'headless':_0x13db8f['headless'],'cooldown':_0x13db8f[_0x3943a1(0x1d5)],'change24h':_0x13db8f['change24h'],'emojibuy':_0x13db8f[_0x3943a1(0x1e7)],'emojisell':_0x13db8f[_0x3943a1(0x1e4)],'colorscheme':_0x13db8f[_0x3943a1(0xaa)],'marketcapApi':_0x13db8f[_0x3943a1(0x6f)],'marketcapEnabled':_0x13db8f[_0x3943a1(0x116)],'portfolio':_0x13db8f['portfolio'],'autoliquidity':_0x13db8f[_0x3943a1(0x16a)],'liquidity':_0x13db8f['liquidity'],'openOrders':_0x13db8f[_0x3943a1(0x1f6)]},dbConfig[_0x3943a1(0x95)](_0x3943a1(0x227))['remove']()[_0x3943a1(0x221)](),dbConfig['get'](_0x3943a1(0x227))['push'](_0x13db8f)['write']());}else _0x13db8f={'botID':_0x37d9f5,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3943a1(0x166)+_0x37d9f5,'showname':![],'threshold':0x3,'ordertype':_0x3943a1(0x1ae),'timeout':0x14,'fiat':_0x3943a1(0x145),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3943a1(0xff)],'onepagemode':settings[_0x3943a1(0x12b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3943a1(0xe9),'marketcapApi':settings[_0x3943a1(0x6f)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x3943a1(0xdb),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x13db8f;}function emittedConfiguration(){const _0x106db2=_0xefa3fc;let _0x4e451c;if(config[_0x106db2(0xdf)]=='')_0x4e451c={...config,'configstate':_0x106db2(0x1e2)};else config[_0x106db2(0xdf)]=='***'?_0x4e451c={...config,'configstate':'recovery'}:(_0x4e451c={...config,'apiKey':'************','apiSecret':_0x106db2(0x1fc)},config['apiPassword']&&(_0x4e451c[_0x106db2(0x1f2)]=_0x106db2(0x1fc)));return _0x4e451c[_0x106db2(0x168)]=enableFiatToggle,_0x4e451c;}function getSettings(){const _0x1bbf88=_0xefa3fc;return dbSettings[_0x1bbf88(0x95)](_0x1bbf88(0x212))['value']();}function getSecure(){const _0x28b48e=_0xefa3fc;return dbSecure[_0x28b48e(0x95)](_0x28b48e(0x1ca))[_0x28b48e(0x89)]()||{};}function updateTimeshift(_0x24840a){const _0xeec667=_0xefa3fc;let _0x361a62=dbConfig['get'](_0xeec667(0x227))[_0xeec667(0x75)]({'botID':botID})[_0xeec667(0x89)]();_0x361a62&&dbConfig['get'](_0xeec667(0x227))[_0xeec667(0x75)]({'botID':botID})['assign']({'timeshift':_0x24840a})[_0xeec667(0x221)](),config[_0xeec667(0xff)]=_0x24840a,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x3d3cf1){const _0x434b50=_0xefa3fc;let _0x2d7f69=dbConfig[_0x434b50(0x95)]('bot')[_0x434b50(0x75)]({'botID':botID})[_0x434b50(0x89)]();_0x2d7f69&&dbConfig['get'](_0x434b50(0x227))[_0x434b50(0x75)]({'botID':botID})[_0x434b50(0x208)]({'onepagemode':_0x3d3cf1})['write'](),config[_0x434b50(0x12b)]=_0x3d3cf1,proxyEmit(_0x434b50(0x17c),emittedConfiguration());}function updateMarketcapApi(_0x573ea3){const _0x4aacc9=_0xefa3fc,_0x17d82c=_0x573ea3?!![]:![];let _0x4b5cd6=dbConfig[_0x4aacc9(0x95)](_0x4aacc9(0x227))[_0x4aacc9(0x75)]({'botID':botID})[_0x4aacc9(0x89)]();_0x4b5cd6&&dbConfig[_0x4aacc9(0x95)](_0x4aacc9(0x227))[_0x4aacc9(0x75)]({'botID':botID})[_0x4aacc9(0x208)]({'marketcapApi':_0x17d82c})[_0x4aacc9(0x221)](),config[_0x4aacc9(0x6f)]=_0x17d82c,getMarketCap(),proxyEmit(_0x4aacc9(0x17c),emittedConfiguration());}async function storeConfiguration(_0x294965){const _0x8a6a6c=_0xefa3fc;logger[_0x8a6a6c(0x15a)](_0x8a6a6c(0x90));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x293378=![],_0xda1a3=![],_0x37ac30=[];_0x294965[_0x8a6a6c(0x12e)][_0x8a6a6c(0x14e)](_0x3269ec=>{const _0x4b4b35=_0x8a6a6c;if(!_0x3269ec[_0x4b4b35(0x18d)]&&_0x3269ec['coin']!=_0x294965[_0x4b4b35(0x189)])_0x37ac30[_0x4b4b35(0xde)](_0x3269ec[_0x4b4b35(0xd0)]);}),_0x37ac30['forEach'](_0x52a93a=>{const _0x1bc6de=_0x8a6a6c,_0x378a21=currentCoins['find'](_0x2e4684=>_0x2e4684[_0x1bc6de(0xd0)]==_0x52a93a);!_0x378a21&&(_0x293378=!![]);}),currentCoins['forEach'](_0x4dc482=>{const _0x1d93c8=_0x8a6a6c;if(_0x4dc482[_0x1d93c8(0x1fa)]!=config[_0x1d93c8(0x189)]){const _0x301b35=_0x37ac30[_0x1d93c8(0x75)](_0x1847bc=>_0x1847bc==_0x4dc482[_0x1d93c8(0xd0)]);!_0x301b35&&(_0x293378=!![]);}}),_0x294965['portfolio'][_0x8a6a6c(0x14e)](_0x940598=>{const _0x40e1d6=_0x8a6a6c,_0x1b366e=config[_0x40e1d6(0x12e)][_0x40e1d6(0x75)](_0x2cdb70=>_0x2cdb70[_0x40e1d6(0x1fa)]==_0x940598['coin']);if(_0x1b366e&&_0x940598[_0x40e1d6(0xac)]!=_0x1b366e[_0x40e1d6(0xac)])_0xda1a3=!![];});let _0x1495dd=dbConfig[_0x8a6a6c(0x95)](_0x8a6a6c(0x227))[_0x8a6a6c(0x75)]({'botID':botID})[_0x8a6a6c(0x89)]();_0x294965={..._0x294965,'apiKey':decryptRSA(secure[_0x8a6a6c(0x198)],_0x294965['apiKey']),'apiSecret':decryptRSA(secure[_0x8a6a6c(0x198)],_0x294965[_0x8a6a6c(0x21e)])};_0x294965[_0x8a6a6c(0x1f2)]&&(_0x294965[_0x8a6a6c(0x1f2)]=decryptRSA(secure['privateKey'],_0x294965[_0x8a6a6c(0x1f2)]));let _0x570b93=![];if(_0x1495dd){_0x294965[_0x8a6a6c(0xdf)]==_0x8a6a6c(0x1fc)?_0x294965[_0x8a6a6c(0xdf)]=config[_0x8a6a6c(0xdf)]:_0x570b93=!![];_0x294965[_0x8a6a6c(0x21e)]==_0x8a6a6c(0x1fc)?_0x294965[_0x8a6a6c(0x21e)]=config[_0x8a6a6c(0x21e)]:_0x570b93=!![];if(_0x294965[_0x8a6a6c(0x1f2)]==_0x8a6a6c(0x1fc))_0x294965[_0x8a6a6c(0x1f2)]=config[_0x8a6a6c(0x1f2)];else{if(_0x294965[_0x8a6a6c(0x1f2)])_0x570b93=!![];}dbConfig[_0x8a6a6c(0x95)](_0x8a6a6c(0x227))[_0x8a6a6c(0x75)]({'botID':botID})[_0x8a6a6c(0x208)](_0x294965)[_0x8a6a6c(0x221)]();}else dbConfig[_0x8a6a6c(0x95)](_0x8a6a6c(0x227))[_0x8a6a6c(0xde)](_0x294965)[_0x8a6a6c(0x221)](),_0x570b93=!![],process[_0x8a6a6c(0x12a)]({'status':_0x8a6a6c(0x105),'live':_0x8a6a6c(0xb9)},_0x425194=>{});process[_0x8a6a6c(0x12a)]({'botname':_0x294965['botname']},_0x38f730=>{}),config={..._0x294965},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x570b93)!_0x1495dd?await reset(!![]):getBalances();else _0x293378||_0xda1a3?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0xc1948e){const _0x1e3b32=_0xefa3fc,_0x295da3={...config,'headless':_0xc1948e[_0x1e3b32(0x1aa)]};let _0x235ac1=dbConfig[_0x1e3b32(0x95)]('bot')[_0x1e3b32(0x75)]({'botID':botID})[_0x1e3b32(0x89)]();_0x235ac1&&dbConfig[_0x1e3b32(0x95)](_0x1e3b32(0x227))[_0x1e3b32(0x75)]({'botID':botID})['assign'](_0x295da3)['write'](),config={..._0x295da3},updateBotManager(),proxyEmit(_0x1e3b32(0x17c),emittedConfiguration());}async function storeFiat(_0xabe471){const _0x1b99b5=_0xefa3fc,_0x475ea3={...config,'fiat':_0xabe471};let _0x3d4101=dbConfig['get'](_0x1b99b5(0x227))[_0x1b99b5(0x75)]({'botID':botID})[_0x1b99b5(0x89)]();_0x3d4101&&dbConfig[_0x1b99b5(0x95)](_0x1b99b5(0x227))[_0x1b99b5(0x75)]({'botID':botID})['assign'](_0x475ea3)[_0x1b99b5(0x221)](),config={..._0x475ea3},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x2e9d06=_0xefa3fc;logger[_0x2e9d06(0x6e)]('Resetting\x20bot\x20history');try{if(fs[_0x2e9d06(0x10e)](path['join'](configpath,'bot-'+botID+_0x2e9d06(0x82))))fs[_0x2e9d06(0x1d1)](path['join'](configpath,_0x2e9d06(0x111)+botID+_0x2e9d06(0x82)));if(fs[_0x2e9d06(0x10e)](path[_0x2e9d06(0xf0)](configpath,_0x2e9d06(0x111)+botID+_0x2e9d06(0x1f1))))fs[_0x2e9d06(0x1d1)](path[_0x2e9d06(0xf0)](configpath,_0x2e9d06(0x111)+botID+_0x2e9d06(0x1f1)));if(fs[_0x2e9d06(0x10e)](path[_0x2e9d06(0xf0)](configpath,'bot-'+botID+_0x2e9d06(0x1a5))))fs[_0x2e9d06(0x1d1)](path[_0x2e9d06(0xf0)](configpath,_0x2e9d06(0x111)+botID+_0x2e9d06(0x1a5)));}catch(_0x32214f){if(_0x32214f)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x32214f);}const _0x4e5e63=getDate();let _0x8f3c74=[];currentCoins['forEach'](_0x3e1231=>{const _0x226327=_0x2e9d06;_0x8f3c74[_0x226327(0xde)]({'coin':_0x3e1231[_0x226327(0x1fa)],'number':_0x3e1231['number'],'price':_0x3e1231[_0x226327(0xd5)]});});let _0x1bc596=dbConfig['get'](_0x2e9d06(0x227))[_0x2e9d06(0x75)]({'botID':botID})[_0x2e9d06(0x89)]();_0x1bc596&&(dbConfig[_0x2e9d06(0x95)](_0x2e9d06(0x227))[_0x2e9d06(0x75)]({'botID':botID})[_0x2e9d06(0x208)]({'liquidity':[{'date':_0x4e5e63,'changes':_0x8f3c74}]})[_0x2e9d06(0x221)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x2d9365){const _0x5956ab=_0xefa3fc;return _0x2d9365[_0x5956ab(0x1c1)]('/','');}function updateHighestFee(_0x3fecae){const _0x2f6423=_0xefa3fc;if(_0x3fecae[_0x2f6423(0x147)]){let _0x5dd31c={'filled':_0x3fecae[_0x2f6423(0x191)]*_0x3fecae[_0x2f6423(0xcb)],'amount':_0x3fecae[_0x2f6423(0x191)]*_0x3fecae[_0x2f6423(0xcb)],'side':_0x3fecae[_0x2f6423(0xc5)]=='sell'?_0x2f6423(0xea):_0x2f6423(0x182),'price':0x1/_0x3fecae[_0x2f6423(0xcb)]};_0x3fecae={..._0x3fecae,..._0x5dd31c};}const _0x4a0d09=defaultFee*_0x3fecae[_0x2f6423(0x191)]*_0x3fecae[_0x2f6423(0xcb)];lastFees[_0x2f6423(0x97)][_0x2f6423(0x6d)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x2f6423(0x97)][_0x2f6423(0xde)](_0x4a0d09),lastFees['highest']=Math[_0x2f6423(0xc4)](...lastFees[_0x2f6423(0x97)]);}async function updateNumberCoinsCcxt(_0x3151f5){const _0x50a9b9=_0xefa3fc;logger[_0x50a9b9(0x15a)](_0x50a9b9(0x103)+_0x3151f5[_0x50a9b9(0xd0)]+_0x50a9b9(0x74)+_0x3151f5[_0x50a9b9(0x8b)]+'\x20|\x20'+_0x3151f5[_0x50a9b9(0x191)]+_0x50a9b9(0x20b)+_0x3151f5[_0x50a9b9(0x1dd)]+'\x20|\x20'+_0x3151f5['id']);let _0x4589c0=_0x3151f5['status'],_0x4ecf8a=![];currentCoins[_0x50a9b9(0x14e)](_0x218198=>{const _0x332664=_0x50a9b9;_0x218198[_0x332664(0xd0)]==_0x3151f5[_0x332664(0xd0)]&&(_0x4ecf8a=!![]);});if(!_0x4ecf8a)return;const _0x43d3bf=currentCoins[_0x50a9b9(0x75)](_0x3f2aae=>_0x3f2aae[_0x50a9b9(0xd0)]==_0x3151f5['symbol']),_0x1340aa=_0x51b3a9=>{const _0x1b4aba=_0x50a9b9;if(_0x43d3bf)_0x43d3bf[_0x1b4aba(0xfb)]=_0x51b3a9;};let _0x6d4cf3=![];for(const _0x27fec9 of lastOrders){const _0x98b741=0x64,_0x51fa4e=0x1388;let _0x2cbebe=0x0;while(!_0x27fec9[_0x50a9b9(0x1a8)]&&_0x2cbebe*_0x98b741<_0x51fa4e){_0x2cbebe++,await sleep(_0x98b741);}if(_0x2cbebe>0x0)logger[_0x50a9b9(0x15a)]('Waited\x20'+_0x2cbebe*_0x98b741/0x3e8+_0x50a9b9(0xc8));_0x27fec9[_0x50a9b9(0x1a8)]==_0x3151f5['id']&&(_0x6d4cf3=!![]);}if(_0x4589c0==_0x50a9b9(0x1bf)){_0x1340aa(_0x50a9b9(0x1bf));if(_0x3151f5['filled']>0x0){if(_0x6d4cf3){setBlockTransactionDetection(!![]),logger['debug'](_0x50a9b9(0x1d8)+_0x3151f5['id']);const _0x48a2f5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x48a2f5,setBlockTransactionDetection(![]);}else logger[_0x50a9b9(0x15a)](_0x50a9b9(0xfe)+_0x3151f5['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x4589c0=='canceled'){_0x1340aa(_0x50a9b9(0x1c2));const _0x38b9f3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x38b9f3,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x4589c0==_0x50a9b9(0x1bc)){if(lastOrders)for(const _0x27165f of lastOrders){if(_0x27165f[_0x50a9b9(0x1a8)]==_0x3151f5['id']){logger['debug'](_0x50a9b9(0x183)+_0x3151f5['id']),_0x6d4cf3=!![];if(_0x27165f[_0x50a9b9(0x191)]==0x0){setBlockTransactionDetection(!![]),logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3151f5['id']);if(_0x3151f5[_0x50a9b9(0xec)])_0x27165f[_0x50a9b9(0xcb)]=_0x3151f5[_0x50a9b9(0xec)];else{if(_0x3151f5[_0x50a9b9(0xcb)])_0x27165f[_0x50a9b9(0xcb)]=_0x3151f5[_0x50a9b9(0xcb)];else{}}_0x27165f['filled']=_0x3151f5[_0x50a9b9(0x191)],updateHighestFee(_0x27165f),_0x1340aa('filled'),await validateOrders();if(lockOrders==ORDERS[_0x50a9b9(0x16c)]){const _0x4ff9bd=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4ff9bd,setBlockTransactionDetection(![]);}_0x27165f[_0x50a9b9(0x1be)]={'currency':_0x3151f5[_0x50a9b9(0x1be)]?_0x3151f5[_0x50a9b9(0x1be)]['currency']:null,'cost':_0x3151f5[_0x50a9b9(0x1be)]?_0x3151f5['fee']['cost']:0x0},await updateCoinResults(_0x27165f);}}}!_0x6d4cf3&&(logger['debug'](_0x50a9b9(0x14b)+_0x3151f5['id']),_0x1340aa('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x3f4fe5=JSON['parse'](lastBalances[_0x50a9b9(0x12e)]);const _0x528c73=_0x3f4fe5['find'](_0x33cbf1=>_0x33cbf1[_0x50a9b9(0xd0)]==_0x3151f5['symbol']);if(_0x528c73){if(_0x4589c0==_0x50a9b9(0x1bf))_0x528c73[_0x50a9b9(0xfb)]=_0x528c73[_0x50a9b9(0xfb)]=='filled'?_0x50a9b9(0x191):_0x50a9b9(0x1bf);else{if(_0x4589c0==_0x50a9b9(0x1c2))_0x528c73[_0x50a9b9(0xfb)]=_0x528c73[_0x50a9b9(0xfb)]==_0x50a9b9(0x191)?_0x50a9b9(0x191):_0x50a9b9(0x1c2);else _0x4589c0==_0x50a9b9(0x1bc)&&(_0x528c73[_0x50a9b9(0xfb)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3f4fe5)},proxyEmit(_0x50a9b9(0x1e5),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x42de6d=_0xefa3fc;await getOpenOrders();let _0x30bf2f=![];currentCoins[_0x42de6d(0x14e)](_0x558d81=>{const _0x151359=_0x42de6d;_0x30bf2f=allOpenOrders[_0x151359(0x75)](_0x843d6e=>_0x843d6e[_0x151359(0xd0)]==_0x558d81['symbol']),_0x558d81[_0x151359(0xfb)]=_0x30bf2f?_0x151359(0x1bf):_0x151359(0xa6);});}async function getCoins(_0x5dc171=0x0,_0x431c61=!![],_0x86427e=config['basecoin']){const _0x1e16a7=_0xefa3fc;let _0x52850a,_0x3c0431=[],_0x287b2a=[],_0x4f3595=[];if(_0x5dc171)await sleep(_0x5dc171);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x52850a=await exchange[_0x1e16a7(0x170)](),mybalances=_0x52850a['total'];for(const [_0x29a560,_0x5bb929]of Object['entries'](mybalances)){_0x4f3595['push'](_0x29a560);}config[_0x1e16a7(0x12e)][_0x1e16a7(0x14e)](_0x1d7fb5=>{const _0x3b71da=_0x1e16a7;!_0x4f3595[_0x3b71da(0x18c)](_0x1d7fb5[_0x3b71da(0x1fa)])&&(mybalances[_0x1d7fb5[_0x3b71da(0x1fa)]]=0x0);});if(_0x86427e=='')for(const [_0x34a20e,_0x2a5227]of Object[_0x1e16a7(0x21c)](mybalances)){_0x2a5227!=0x0&&_0x3c0431['push']({'coin':_0x34a20e});}else for(const [_0x488731,_0x56c5a5]of Object['entries'](mybalances)){const _0xffacc2=config[_0x1e16a7(0x12e)]['find'](_0x4ba52d=>_0x4ba52d[_0x1e16a7(0x1fa)]==_0x488731),_0x4acf69=_0x488731+'/'+_0x86427e,_0x4dc723=_0x86427e+'/'+_0x488731,_0x1c5c20=currentCoins[_0x1e16a7(0x75)](_0x2f9efd=>_0x2f9efd['coin']==_0x488731);if((_0x56c5a5!=0x0||_0xffacc2)&&(allSymbols[_0x1e16a7(0x18c)](_0x4acf69)||_0x488731==_0x86427e))_0x1c5c20?_0x3c0431[_0x1e16a7(0xde)]({..._0x1c5c20,'number':Math['max'](_0x56c5a5+(_0xffacc2&&_0xffacc2['offset']||0x0),0x0)}):_0x3c0431[_0x1e16a7(0xde)]({'coin':_0x488731,'symbol':_0x4acf69,'reverse':![],'number':Math[_0x1e16a7(0xc4)](_0x56c5a5+(_0xffacc2&&_0xffacc2[_0x1e16a7(0xac)]||0x0),0x0),'orderstatus':_0x1e16a7(0xa6)});else{if((_0x56c5a5!=0x0||_0xffacc2)&&allSymbols[_0x1e16a7(0x18c)](_0x4dc723))_0x1c5c20?_0x3c0431[_0x1e16a7(0xde)]({..._0x1c5c20,'number':Math[_0x1e16a7(0xc4)](_0x56c5a5+(_0xffacc2&&_0xffacc2[_0x1e16a7(0xac)]||0x0),0x0)}):_0x3c0431[_0x1e16a7(0xde)]({'coin':_0x488731,'symbol':_0x4dc723,'reverse':!![],'number':Math[_0x1e16a7(0xc4)](_0x56c5a5+(_0xffacc2&&_0xffacc2['offset']||0x0),0x0),'orderstatus':_0x1e16a7(0xa6)});else _0xffacc2&&_0x3c0431[_0x1e16a7(0xde)]({'coin':_0xffacc2[_0x1e16a7(0x1fa)],'symbol':_0xffacc2['symbol'],'reverse':_0xffacc2[_0x1e16a7(0x147)],'number':0x0,'orderstatus':_0x1e16a7(0xa6)});}}}catch(_0x3f5296){if(!_0x431c61)handleErrorNoStop(_0x3f5296,_0x1e16a7(0x1c3));else await handleError(_0x3f5296,_0x1e16a7(0x1c3));}return _0x3c0431[_0x1e16a7(0x19d)]((_0x5d5def,_0x40eac0)=>_0x5d5def['delta']<_0x40eac0[_0x1e16a7(0xf4)]?0x1:_0x40eac0['delta']<_0x5d5def['delta']?-0x1:0x0),_0x287b2a=cloneDeep(_0x3c0431),_0x3c0431=_0x3c0431[_0x1e16a7(0x1fe)](_0x13315b=>{const _0x4e5e2d=_0x1e16a7,_0x2a5bd0=config[_0x4e5e2d(0x12e)][_0x4e5e2d(0x75)](_0x5bf7bf=>_0x5bf7bf['coin']==_0x13315b[_0x4e5e2d(0x1fa)]);return _0x2a5bd0&&!_0x2a5bd0['excluded'];}),[_0x3c0431,_0x287b2a];}async function getCoinNumber(_0x188be5){const _0x71078a=_0xefa3fc;let _0x32262f;try{const _0x878916=await exchange['fetchBalance']();_0x32262f=_0x878916['total'][_0x188be5];}catch(_0x50786e){await handleError(_0x50786e,_0x71078a(0x9c));}return _0x32262f;}async function getOpenOrders(){const _0x253e02=_0xefa3fc;let _0x285815;allOpenOrders=[];try{for(const _0x39b98a of config[_0x253e02(0x12e)]){!_0x39b98a['excluded']&&_0x39b98a[_0x253e02(0x1fa)]!=config['basecoin']&&(_0x285815=await exchange[_0x253e02(0x199)](_0x39b98a['symbol']),_0x285815[_0x253e02(0x6d)]>0x0&&allOpenOrders[_0x253e02(0xde)](_0x285815[0x0]));}}catch(_0x3145db){await handleError(_0x3145db,_0x253e02(0x154));}}async function handleOpenOrders(_0x38df53=0x0){const _0x172950=_0xefa3fc;allOpenOrders[_0x172950(0x6d)]==0x0&&lockOrders==ORDERS[_0x172950(0x16c)]&&allOrdersPlaced&&(_0x38df53==0x0?(logger[_0x172950(0x15a)](_0x172950(0xf2)),_0x38df53++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x172950(0x15a)](_0x172950(0x8f)),validateOrders(_0x172950(0x185))));}async function testAPI(_0x45564a){const _0x61377e=_0xefa3fc,_0x22a84f=ccxt[_0x61377e(0x131)][_0x45564a[_0x61377e(0xf5)]['toLowerCase']()],_0x295869=new _0x22a84f({'apiKey':_0x45564a[_0x61377e(0xdf)],'secret':_0x45564a[_0x61377e(0x21e)],'options':{'defaultType':_0x61377e(0xf6)}});if(_0x45564a[_0x61377e(0x1f2)])_0x295869[_0x61377e(0x91)]=_0x45564a[_0x61377e(0x1f2)];try{await _0x295869[_0x61377e(0x170)]();}catch(_0x4044aa){logger['debug']('Error\x20in\x20testAPI():\x20'+_0x4044aa[_0x61377e(0xe6)]());throw _0x4044aa;}}function cloneDeep(_0x2315f3){const _0x5a275c=_0xefa3fc;return JSON[_0x5a275c(0x7a)](JSON['stringify'](_0x2315f3));}async function getPortfolio(_0x42ab94){const _0x58a286=_0xefa3fc;let _0x29a4b3=[],_0x55e7bd=[],_0x4163b3=[],_0x1618a1;_0x42ab94[_0x58a286(0xdf)]=decryptRSA(secure['privateKey'],_0x42ab94[_0x58a286(0xdf)]),_0x42ab94[_0x58a286(0x21e)]=decryptRSA(secure['privateKey'],_0x42ab94[_0x58a286(0x21e)]);if(_0x42ab94['apiPassword'])_0x42ab94[_0x58a286(0x1f2)]=decryptRSA(secure[_0x58a286(0x198)],_0x42ab94[_0x58a286(0x1f2)]);if(_0x42ab94[_0x58a286(0xdf)]!==_0x58a286(0x1fc)||_0x42ab94[_0x58a286(0x21e)]!==_0x58a286(0x1fc)||_0x42ab94['apiPassword']&&_0x42ab94[_0x58a286(0x1f2)]!=='************'){if(config['exchange']){if(_0x42ab94['apiKey']==_0x58a286(0x1fc))_0x42ab94[_0x58a286(0xdf)]=config[_0x58a286(0xdf)];if(_0x42ab94[_0x58a286(0x21e)]==_0x58a286(0x1fc))_0x42ab94[_0x58a286(0x21e)]=config[_0x58a286(0x21e)];if(_0x42ab94[_0x58a286(0x1f2)]==_0x58a286(0x1fc))_0x42ab94[_0x58a286(0x1f2)]=config[_0x58a286(0x1f2)];}try{await testAPI(_0x42ab94);}catch(_0x2a8d45){if(_0x2a8d45[_0x58a286(0xe6)]()['includes'](_0x58a286(0x171))){logHistory(_0x58a286(0xf7),_0x58a286(0x126)),proxyEmit(_0x58a286(0x17f),![]);return;}else{logHistory('error',_0x58a286(0xe2)),logger[_0x58a286(0x15a)](_0x58a286(0x118),_0x2a8d45),proxyEmit(_0x58a286(0x17f),![]);return;}}exchange?updateExchange(_0x42ab94['apiKey'],_0x42ab94[_0x58a286(0x21e)],_0x42ab94['apiPassword']):await initExchange(_0x42ab94['exchange'],_0x42ab94['apiKey'],_0x42ab94[_0x58a286(0x21e)],_0x42ab94['apiPassword']);await loadSymbols();const _0x1e7e2d=await getCoins(0x0,![],_0x42ab94[_0x58a286(0x189)]);_0x4163b3=cloneDeep(_0x1e7e2d[0x1]);}else{const _0x3c4b58=await getCoins();_0x4163b3=cloneDeep(_0x3c4b58[0x1]);}if(_0x42ab94[_0x58a286(0x189)]=='')proxyEmit(_0x58a286(0x17f),!![]),proxyEmit(_0x58a286(0xc2),_0x4163b3);else{_0x4163b3[_0x58a286(0x14e)](_0x398828=>{const _0x41d02f=_0x58a286;if(_0x398828[_0x41d02f(0x1fa)]!=_0x42ab94[_0x41d02f(0x189)]&&allSymbols['includes'](_0x398828['symbol']))_0x29a4b3[_0x41d02f(0xde)](_0x398828[_0x41d02f(0xd0)]);});if(_0x29a4b3['length']==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x55e7bd=await getTickers(_0x29a4b3);}catch(_0x13ecde){logHistory('error',_0x58a286(0xe2)),logger['debug'](_0x58a286(0x1a0),_0x13ecde),proxyEmit('portfolio1',![]);return;}_0x4163b3[_0x58a286(0x14e)](_0x328b20=>{const _0x286b1e=_0x58a286;_0x328b20[_0x286b1e(0x1fa)]!=_0x42ab94[_0x286b1e(0x189)]?_0x55e7bd[_0x328b20[_0x286b1e(0xd0)]]?_0x1618a1=_0x328b20[_0x286b1e(0x147)]?0x1/_0x55e7bd[_0x328b20['symbol']][_0x286b1e(0xd5)]:_0x55e7bd[_0x328b20[_0x286b1e(0xd0)]]['last']:_0x1618a1=0x0:_0x1618a1=0x1,_0x328b20[_0x286b1e(0xcb)]=formatResult(_0x1618a1,0x8);}),await getMarketCap(_0x4163b3),proxyEmit(_0x58a286(0x17f),!![]),proxyEmit('portfolio2',_0x4163b3);}}}function truncateTradeAmount(_0x1c1a33,_0x3550bf){const _0x1e76f9=_0xefa3fc;let _0x1a297f=0x0;try{_0x1a297f=exchange[_0x1e76f9(0x1ef)](_0x1c1a33,_0x3550bf);}catch(_0x4f12bd){}return _0x1a297f;}function checkMinimums(_0x59498b){const _0x360c9d=_0xefa3fc;let _0x21bdfb=!![];const _0x3667b7=!_0x59498b['reverse']?markets[_0x59498b[_0x360c9d(0xd0)]][_0x360c9d(0x1a2)][_0x360c9d(0x1dd)][_0x360c9d(0x93)]:markets[_0x59498b[_0x360c9d(0xd0)]][_0x360c9d(0x1a2)]['cost'][_0x360c9d(0x93)],_0x46e9cb=!_0x59498b['reverse']?markets[_0x59498b[_0x360c9d(0xd0)]][_0x360c9d(0x1a2)][_0x360c9d(0x11c)][_0x360c9d(0x93)]:markets[_0x59498b[_0x360c9d(0xd0)]][_0x360c9d(0x1a2)][_0x360c9d(0x1dd)]['min'],_0x5e712b=truncateTradeAmount(_0x59498b['symbol'],_0x59498b[_0x360c9d(0x1ff)]);_0x59498b[_0x360c9d(0x1ff)]=_0x5e712b;if(Math['abs'](_0x5e712b)<_0x3667b7)_0x21bdfb=![];if(Math['abs'](_0x5e712b)*_0x59498b[_0x360c9d(0xd5)]<_0x46e9cb)_0x21bdfb=![];if(_0x59498b[_0x360c9d(0xc5)]=='sell'){let _0x5af15d=config[_0x360c9d(0x12e)][_0x360c9d(0x75)](_0x525ef8=>_0x525ef8[_0x360c9d(0x1fa)]==_0x59498b['coin']);if(_0x5af15d[_0x360c9d(0xac)]>0x0){if(Math[_0x360c9d(0x167)](_0x5e712b)>_0x59498b['number']-_0x5af15d[_0x360c9d(0xac)])_0x21bdfb=![];}else{if(Math['abs'](_0x5e712b)>_0x59498b[_0x360c9d(0xd2)])_0x21bdfb=![];}}if(_0x59498b[_0x360c9d(0xc5)]==_0x360c9d(0xea)){let _0x2f70f4=config[_0x360c9d(0x12e)][_0x360c9d(0x75)](_0x55b427=>_0x55b427[_0x360c9d(0x1fa)]==config[_0x360c9d(0x189)]),_0x374f55=currentCoins[_0x360c9d(0x75)](_0x3bd97b=>_0x3bd97b[_0x360c9d(0x1fa)]==config['basecoin']);if(_0x2f70f4['offset']>0x0){if(Math[_0x360c9d(0x167)](_0x5e712b)*_0x59498b['last']>_0x374f55['number']-_0x2f70f4[_0x360c9d(0xac)])_0x21bdfb=![];}else{if(Math[_0x360c9d(0x167)](_0x5e712b)*_0x59498b[_0x360c9d(0xd5)]>_0x374f55[_0x360c9d(0xd2)])_0x21bdfb=![];}}return _0x21bdfb;}async function getBalances(_0x52cc7e=!![]){const _0x19bdef=_0xefa3fc;let _0x590398=0x0,_0x551f9d;const _0x2771af=config[_0x19bdef(0x1b8)];if(config[_0x19bdef(0x1aa)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x19bdef(0x14e)](_0x1cf56e=>{const _0x2e0500=_0x19bdef;if(_0x1cf56e[_0x2e0500(0x1fa)]!=config['basecoin']){let _0x49e120=gTicker[noslash(_0x1cf56e[_0x2e0500(0xd0)])];_0x551f9d=_0x1cf56e['reverse']?0x1/_0x49e120:_0x49e120;}else _0x551f9d=0x1;let _0x254f21=_0x1cf56e['number']*_0x551f9d;_0x590398+=_0x254f21,_0x1cf56e['last']=formatResult(Number(_0x551f9d),0x8),_0x1cf56e['value']=_0x254f21;}),currentCoins[_0x19bdef(0x14e)](_0xcdade3=>{const _0x49a39d=_0x19bdef;let _0xa6a743=config[_0x49a39d(0x12e)][_0x49a39d(0x75)](_0x5c993a=>_0x5c993a[_0x49a39d(0x1fa)]==_0xcdade3[_0x49a39d(0x1fa)]),_0x147669=Number(_0xa6a743[_0x49a39d(0x94)]),_0x478c0e=_0xcdade3['value']/_0x590398*0x64,_0x321d6d=_0x147669*_0x590398/0x64/_0xcdade3[_0x49a39d(0xd5)]-_0xcdade3[_0x49a39d(0xd2)];_0xcdade3['distribution']=formatResult(_0x478c0e,0x3),_0xcdade3[_0x49a39d(0x85)]=formatResult(_0x147669,0x3),_0xcdade3[_0x49a39d(0x1ff)]=formatResult(_0x321d6d,0x8),_0xcdade3['side']='',_0xcdade3[_0x49a39d(0x149)]=![];if(_0xcdade3[_0x49a39d(0x1fa)]!=config[_0x49a39d(0x189)]){if(_0xcdade3[_0x49a39d(0x94)]>_0x147669)_0xcdade3[_0x49a39d(0xc5)]='sell',_0xcdade3['valid']=checkMinimums(_0xcdade3);else _0xcdade3[_0x49a39d(0x94)]<_0x147669&&(_0xcdade3[_0x49a39d(0xc5)]=_0x49a39d(0xea),_0xcdade3[_0x49a39d(0x149)]=checkMinimums(_0xcdade3));}_0xcdade3[_0x49a39d(0xf4)]=_0xcdade3[_0x49a39d(0x94)]/_0xcdade3[_0x49a39d(0x85)]-0x1;if(_0xcdade3[_0x49a39d(0xfb)]==_0x49a39d(0x191)||_0xcdade3[_0x49a39d(0xfb)]==_0x49a39d(0x1c2))_0xcdade3[_0x49a39d(0xfb)]=_0x49a39d(0xa6);}),currentCoins[_0x19bdef(0x19d)]((_0x28f7e5,_0x1952a1)=>_0x28f7e5[_0x19bdef(0xf4)]<_0x1952a1[_0x19bdef(0xf4)]?0x1:_0x1952a1['delta']<_0x28f7e5[_0x19bdef(0xf4)]?-0x1:0x0);const _0x457dc9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x457dc9[_0x19bdef(0x1ba)],'usd':_0x457dc9['usd'],'portfolio':JSON[_0x19bdef(0x1d6)](currentCoins),'threshold':_0x2771af},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x52cc7e){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x2771af});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2771af});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x50cbaa=getNormalizedPerformance();getStartingBalances(_0x50cbaa),emitPerformance(_0x50cbaa);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xabd699=_0xefa3fc;if(!lastBalances)return;let _0x1be295=[],_0x539fed,_0x8d7b69=JSON[_0xabd699(0x7a)](lastBalances[_0xabd699(0x12e)]);_0x8d7b69[_0xabd699(0x19d)]((_0x17819c,_0x3bafbf)=>_0x17819c['coin']>_0x3bafbf[_0xabd699(0x1fa)]?0x1:_0x3bafbf[_0xabd699(0x1fa)]>_0x17819c[_0xabd699(0x1fa)]?-0x1:0x0),_0x8d7b69[_0xabd699(0x14e)](_0x5d7007=>{const _0x16e16b=_0xabd699;let _0x2dfccb={'coin':_0x5d7007[_0x16e16b(0x1fa)],'number':_0x5d7007[_0x16e16b(0xd2)],'price':_0x5d7007[_0x16e16b(0xd5)]};_0x1be295['push'](_0x2dfccb);});const _0x36a6d2=await getFiat();_0x539fed={'date':lastBalances[_0xabd699(0x14a)]['split']('\x20')[0x0],'eur':_0x36a6d2[_0xabd699(0x1ba)],'usd':_0x36a6d2['usd'],'coins':_0x1be295};let _0x4874e9=dbPerformance[_0xabd699(0x95)](_0xabd699(0x117))['find']({'date':_0x539fed['date']})[_0xabd699(0x89)]();_0x4874e9?_0x539fed[_0xabd699(0x1f5)]!=config['startdate']&&dbPerformance[_0xabd699(0x95)](_0xabd699(0x117))['find']({'date':_0x539fed['date']})['assign'](_0x539fed)[_0xabd699(0x221)]():dbPerformance[_0xabd699(0x95)](_0xabd699(0x117))[_0xabd699(0xde)](_0x539fed)[_0xabd699(0x221)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1e0807=_0xefa3fc;let _0x1984ab=[];if(dbPerformance[_0x1e0807(0x8c)](_0x1e0807(0x117))[_0x1e0807(0x89)]()){let _0x4e6360=dbPerformance[_0x1e0807(0x95)](_0x1e0807(0x117))['cloneDeep']()[_0x1e0807(0x1fe)](_0x130356=>{const _0x31434f=_0x1e0807;if(_0x130356['coins'][_0x31434f(0x6d)]==0x0)return![];else return!![];})[_0x1e0807(0x10b)](_0x1e0807(0x1f5))[_0x1e0807(0x89)](),_0x308c00=[...config['liquidity']];_0x308c00[_0x1e0807(0x19d)]((_0x7596a1,_0x157d7e)=>_0x7596a1['date']>_0x157d7e['date']?-0x1:_0x157d7e[_0x1e0807(0x1f5)]>_0x7596a1[_0x1e0807(0x1f5)]?0x1:0x0);let _0x342957=0x1,_0x15c7e3=[],_0xc86c75=0x0;_0x4e6360[_0x1e0807(0x124)]()['reverse']()[_0x1e0807(0x14e)]((_0x3e1701,_0x766e8a)=>{const _0x4fac05=_0x1e0807;if(_0x308c00[_0xc86c75]){if(_0x4e6360[_0x4e6360[_0x4fac05(0x6d)]-_0x766e8a]&&_0x308c00[_0xc86c75]['date']==_0x4e6360[_0x4e6360['length']-_0x766e8a]['date']){if(_0x766e8a<_0x4e6360[_0x4fac05(0x6d)]){let _0x5617c9=0x0,_0x4174ec=0x0;_0x4e6360[_0x4e6360[_0x4fac05(0x6d)]-_0x766e8a]['coins']['forEach'](_0x5a03bc=>{const _0x8ef091=_0x4fac05;_0x4174ec+=_0x5a03bc[_0x8ef091(0xd2)]*_0x5a03bc[_0x8ef091(0xcb)];}),_0x308c00[_0xc86c75][_0x4fac05(0xef)][_0x4fac05(0x14e)](_0x11dcce=>{const _0x1f65d7=_0x4fac05;_0x5617c9+=_0x11dcce[_0x1f65d7(0xd2)]*_0x11dcce[_0x1f65d7(0xcb)];}),_0x342957*=_0x5617c9/(_0x4174ec-_0x5617c9)+0x1;}_0xc86c75++;}}let _0xa79ddc=0x0;_0x3e1701['coins'][_0x4fac05(0x14e)](_0x59f1d7=>{const _0x5e7ff3=_0x4fac05;_0xa79ddc+=_0x59f1d7[_0x5e7ff3(0xd2)]*_0x59f1d7[_0x5e7ff3(0xcb)];}),_0x15c7e3[_0x4e6360[_0x4fac05(0x6d)]-_0x766e8a-0x1]=_0xa79ddc*(_0x342957-0x1);});let _0x270147=[];_0x308c00=[...config[_0x1e0807(0x186)]]||[];let _0x287d1a=0x0;_0xc86c75=0x0,_0x4e6360[_0x1e0807(0x14e)]((_0x304804,_0x5477db)=>{const _0x4825bf=_0x1e0807;if(_0x308c00[_0xc86c75]){const _0x444aea=fns['parse'](_0x308c00[_0xc86c75][_0x4825bf(0x1f5)],'yyyy/MM/dd',new Date()),_0x12e9ba=fns[_0x4825bf(0x7a)](_0x304804['date'],_0x4825bf(0x1e8),new Date());if(fns[_0x4825bf(0xa8)](_0x444aea,_0x12e9ba)){let _0x2b2d6d=0x0;_0x308c00[_0xc86c75][_0x4825bf(0xef)][_0x4825bf(0x14e)](_0x26d626=>{const _0x4a67b6=_0x4825bf;!_0x270147[_0x26d626[_0x4a67b6(0x1fa)]]?_0x270147[_0x26d626[_0x4a67b6(0x1fa)]]=_0x26d626[_0x4a67b6(0xd2)]:(_0x2b2d6d=_0x270147[_0x26d626[_0x4a67b6(0x1fa)]],_0x270147[_0x26d626[_0x4a67b6(0x1fa)]]+=_0x26d626[_0x4a67b6(0xd2)]);const _0x21a4c9=_0x304804[_0x4a67b6(0x110)][_0x4a67b6(0x75)](_0x31a603=>_0x31a603[_0x4a67b6(0x1fa)]==_0x26d626[_0x4a67b6(0x1fa)]);(!_0x21a4c9||_0x21a4c9[_0x4a67b6(0xd2)]==0x0)&&(_0x287d1a+=(-_0x26d626[_0x4a67b6(0xd2)]-_0x2b2d6d)*_0x26d626[_0x4a67b6(0xcb)]);}),_0xc86c75++;}}_0x304804['coins'][_0x4825bf(0x14e)]((_0x464f04,_0x22ec5c)=>{const _0x23c3ca=_0x4825bf;_0x270147[_0x464f04['coin']]&&(_0x464f04[_0x23c3ca(0x1e2)]=_0x270147[_0x464f04[_0x23c3ca(0x1fa)]]);}),_0x1984ab[_0x4825bf(0xde)]({'date':_0x304804[_0x4825bf(0x1f5)],'eur':_0x304804['eur'],'usd':_0x304804[_0x4825bf(0x9e)],'offset':_0x15c7e3[_0x5477db],'netoffset':_0x287d1a,'coins':_0x304804[_0x4825bf(0x110)]});});}return _0x1984ab;}function emitPerformance(_0x1008de){const _0x27ac5a=_0xefa3fc;_0x1008de[_0x27ac5a(0x6d)]!==0x0?(proxyEmit(_0x27ac5a(0x225),_0x1008de),lastPerformanceEmitted=getDate()):proxyEmit(_0x27ac5a(0x225),[]);}function getPerf(_0x4c698b,_0x44fa66){const _0x20a5e1=_0xefa3fc;let _0xc861d6=0x0,_0x4ed5d0=0x0,_0x19fb9f=0x0;_0x4c698b[_0x20a5e1(0x110)][_0x20a5e1(0x14e)](_0x136531=>{const _0x29c365=_0x20a5e1;_0xc861d6+=_0x136531[_0x29c365(0xd2)]*_0x136531[_0x29c365(0xcb)];});_0x44fa66&&(_0xc861d6+=_0x4c698b[_0x20a5e1(0xac)]);if(config[_0x20a5e1(0x189)]===_0x20a5e1(0x11d)||config[_0x20a5e1(0x189)]===_0x20a5e1(0x100)||config[_0x20a5e1(0x189)]==='PAXG')_0x4ed5d0=_0xc861d6*_0x4c698b['eur'],_0x19fb9f=_0xc861d6*_0x4c698b[_0x20a5e1(0x9e)];else{if(usdBasecoins['includes'](config['basecoin']))_0x4ed5d0=_0xc861d6*_0x4c698b[_0x20a5e1(0x1ba)]/_0x4c698b[_0x20a5e1(0x9e)],_0x19fb9f=_0xc861d6;else config['basecoin']==='EUR'&&(_0x4ed5d0=_0xc861d6,_0x19fb9f=_0xc861d6*_0x4c698b[_0x20a5e1(0x9e)]/_0x4c698b[_0x20a5e1(0x1ba)]);}return[_0xc861d6,_0x4ed5d0,_0x19fb9f];}function getKPIs(_0x56d95c,_0x1e603f=_0xefa3fc(0xa9)){const _0xe39cce=_0xefa3fc,_0x14cc5a=config[_0xe39cce(0x189)],_0x276685=lastBalances,_0x15fed0=currentCoins,_0x8a6842=getNormalizedPerformance(),_0x325fec=_0x56d95c==='basecoin'?_0x14cc5a:_0x56d95c===_0xe39cce(0x15c)||_0x56d95c===_0xe39cce(0x106)?_0x1e603f:'Net\x20'+_0x14cc5a,_0x29750a=_0x56d95c===_0xe39cce(0xb3)?'Net\x20effect':_0x56d95c===_0xe39cce(0x106)?_0xe39cce(0x11a):_0x325fec+_0xe39cce(0x177),_0xf55123=_0x56d95c===_0xe39cce(0xb3)||_0x56d95c===_0xe39cce(0x106)?_0xe39cce(0x11a):_0x325fec+_0xe39cce(0x1a1);let _0x42cd0c=0x0;_0x15fed0[_0xe39cce(0x14e)](_0x5ed3d0=>{const _0x4b7ff5=_0xe39cce;_0x42cd0c+=_0x5ed3d0[_0x4b7ff5(0xd2)]*_0x5ed3d0[_0x4b7ff5(0xd5)];});if(_0x56d95c==='fiat'||_0x56d95c==='net-fiat'){if(_0x14cc5a===_0xe39cce(0x11d)||_0x14cc5a===_0xe39cce(0x100)||_0x14cc5a===_0xe39cce(0x16f))_0x42cd0c=_0x42cd0c*(_0x1e603f==='EUR'?_0x276685[_0xe39cce(0x1ba)]:_0x276685[_0xe39cce(0x9e)]);else{if(usdBasecoins['includes'](_0x14cc5a))_0x42cd0c=_0x42cd0c*(_0x1e603f==='EUR'?_0x276685[_0xe39cce(0x1ba)]/_0x276685[_0xe39cce(0x9e)]:0x1);else _0x14cc5a===_0xe39cce(0xa9)&&(_0x42cd0c=_0x42cd0c*(_0x1e603f===_0xe39cce(0xa9)?0x1:_0x276685['usd']/_0x276685[_0xe39cce(0x1ba)]));}}let _0x160378;if(_0x42cd0c!==0x0){if(_0x56d95c===_0xe39cce(0x189))_0x160378=(_0x42cd0c/startingBalances[_0xe39cce(0x189)]-0x1)*0x64;else{if(_0x1e603f===_0xe39cce(0xa9))_0x160378=(_0x42cd0c/startingBalances['eur']-0x1)*0x64;else _0x160378=(_0x42cd0c/startingBalances[_0xe39cce(0x9e)]-0x1)*0x64;}let _0x5eb699=0x0;if(startingBalances[_0xe39cce(0x110)])_0x15fed0[_0xe39cce(0x14e)](_0x2ec9e4=>{const _0x3d66f3=_0xe39cce;let _0x115c5b=startingBalances[_0x3d66f3(0x110)][_0x3d66f3(0x75)](_0x27257d=>_0x27257d[_0x3d66f3(0x1fa)]===_0x2ec9e4[_0x3d66f3(0x1fa)]);if(_0x115c5b&&_0x115c5b['coin']&&_0x2ec9e4['number']!==0x0)_0x5eb699+=_0x115c5b[_0x3d66f3(0xd2)]*_0x2ec9e4[_0x3d66f3(0xd5)];});let _0x369687=0x0;if(_0x8a6842[_0xe39cce(0x6d)]!==0x0){let _0x6b3ebe=_0x8a6842[_0x8a6842[_0xe39cce(0x6d)]-0x1];_0x369687=_0x6b3ebe[_0xe39cce(0xa7)];}_0x5eb699-=_0x369687;_0x56d95c===_0xe39cce(0xb3)&&(_0x160378=(_0x42cd0c-_0x5eb699)/startingBalances[_0xe39cce(0x189)]*0x64,_0x42cd0c=_0x42cd0c-_0x5eb699);if(_0x56d95c===_0xe39cce(0x106)){let _0xd6d252=_0x1e603f===_0xe39cce(0xa9)?startingBalances[_0xe39cce(0x1ba)]:startingBalances[_0xe39cce(0x9e)];if(_0x14cc5a===_0xe39cce(0x11d)||_0x14cc5a===_0xe39cce(0x100)||_0x14cc5a===_0xe39cce(0x16f))_0x5eb699=_0x1e603f===_0xe39cce(0xa9)?_0x5eb699*_0x276685[_0xe39cce(0x1ba)]:_0x5eb699*_0x276685[_0xe39cce(0x9e)];else{if(usdBasecoins['includes'](_0x14cc5a))_0x5eb699=_0x1e603f===_0xe39cce(0xa9)?_0x5eb699*_0x276685[_0xe39cce(0x1ba)]/_0x276685['usd']:_0x5eb699;else _0x14cc5a===_0xe39cce(0xa9)&&(_0x5eb699=_0x1e603f===_0xe39cce(0xa9)?_0x5eb699:_0x5eb699*_0x276685[_0xe39cce(0x9e)]/_0x276685[_0xe39cce(0x1ba)]);}_0x160378=(_0x42cd0c-_0x5eb699)/_0xd6d252*0x64,_0x42cd0c=_0x42cd0c-_0x5eb699;}if(_0x160378){if(_0x160378<0x64)_0x160378=_0x160378[_0xe39cce(0xd1)](0x2);else{if(_0x160378<0x3e8)_0x160378=_0x160378['toFixed'](0x1);else _0x160378=_0x160378['toFixed'](0x0);}}else _0x160378=Number('0')[_0xe39cce(0xd1)](0x2);if(_0x42cd0c){if(Math[_0xe39cce(0x167)](_0x42cd0c)<0.000001)_0x42cd0c=_0x42cd0c[_0xe39cce(0xd1)](0x2);else{if(Math[_0xe39cce(0x167)](_0x42cd0c)<0.1)_0x42cd0c=_0x42cd0c[_0xe39cce(0xd1)](0x6);else{if(Math[_0xe39cce(0x167)](_0x42cd0c)<0x1)_0x42cd0c=_0x42cd0c['toFixed'](0x5);else{if(Math[_0xe39cce(0x167)](_0x42cd0c)<0xa)_0x42cd0c=_0x42cd0c[_0xe39cce(0xd1)](0x4);else{if(Math[_0xe39cce(0x167)](_0x42cd0c)<0x64)_0x42cd0c=_0x42cd0c[_0xe39cce(0xd1)](0x3);else{if(Math[_0xe39cce(0x167)](_0x42cd0c)<0x3e8)_0x42cd0c=_0x42cd0c[_0xe39cce(0xd1)](0x2);else _0x42cd0c=_0x42cd0c['toFixed'](0x2);}}}}}}else _0x42cd0c=Number('0')[_0xe39cce(0xd1)](0x2);}else _0x160378=Number('0')[_0xe39cce(0xd1)](0x2);return{'value':_0x42cd0c,'change':_0x160378,'leftTxt':_0x29750a,'rightTxt':_0xf55123};}async function getStartingBalances(_0x3b9d99,_0x4ec7cf=!![]){const _0x236bc5=_0xefa3fc;if(_0x3b9d99['length']!==0x0){const [_0x77cddf,_0x4443ba,_0x2a96d0]=getPerf(_0x3b9d99[0x0],!![]);let _0xa14695=[];config[_0x236bc5(0x12e)][_0x236bc5(0x14e)](_0x104f4f=>{const _0x255dcd=_0x236bc5;let _0x3b448=0x0,_0x3983f2;config[_0x255dcd(0x186)][_0x255dcd(0x14e)](_0x3bd258=>{const _0x19718c=_0x255dcd;let _0x1d2576=_0x3bd258[_0x19718c(0xef)][_0x19718c(0x75)](_0x5dd62e=>_0x5dd62e['coin']==_0x104f4f[_0x19718c(0x1fa)]);if(_0x1d2576){_0x3b448+=_0x1d2576[_0x19718c(0xd2)];if(!_0x3983f2)_0x3983f2=_0x1d2576['price'];}}),_0xa14695[_0x255dcd(0xde)]({'coin':_0x104f4f[_0x255dcd(0x1fa)],'number':_0x3b448,'initialprice':_0x3983f2});});const _0xb13389={'basecoin':_0x77cddf,'eur':_0x4443ba,'usd':_0x2a96d0,'coins':_0xa14695};if(_0x4ec7cf)proxyEmit(_0x236bc5(0x136),_0xb13389);startingBalances=_0xb13389;}}function _0x2251(){const _0x529b96=['\x20>\x20','sqrt','PAXG','fetchBalance','AuthenticationError','<b>','DDoSProtection','cloneDeep','/USDT','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','\x20value','Loading\x20completed','ID:\x20','quote','message','configuration','\x20network\x20error:\x20','2.3.5','portfolio1','Limit\x20(low-margin)','Portfolio\x20change\x20detected:\x20','sell','1\x20-\x20FILLED\x20known\x20order:\x20','ORDERS.UNLOCKED','no\x20open\x20orders','liquidity','added','Error\x20in\x20loadSymbols():\x20','basecoin','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','./config/','includes','excluded','bb-secure.json','watchOrders','\x20API\x20secret\x20is\x20invalid','filled','apply','splice','fetchTicker','production','keys','2.5.0','privateKey','fetchOpenOrders','success','page','2.6.23','sort','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','ExchangeError','Error\x20details\x20(1):','\x20change','limits','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','2\x20-\x20Orders\x20unlocked','-results.json','cancelOrder','balancing\x20resumed','orderId','Huobi','headless','slider','showname','token\x20is\x20expired','market','RETRY\x20-\x20Problem\x20resolved\x20after\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','-config.json','mkdirSync','watchTrades()','Avoiding\x20continuous\x20order\x20attempts','exec','padEnd','Resuming\x20(','threshold','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','eur','startprice','closed','getTime','fee','open','RateLimitExceeded','replace','canceled','getCoins()','currency','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','findIndex','cancelLoading','Executed\x20','/backup/','secure','getDate','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','event-history','basecoinvalue','Manual\x20balancing\x20required','create','unlinkSync','Reset\x20|\x20','lowdb','InvalidOrder','cooldown','stringify','Network\x20error\x20details:','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','rightTxt','Exchange','Initiating\x20bot\x20restart','coin-loading-progress','amount','Symbol(s):\x20','marketcap','detectLiquidityChange()','MIN_NOTIONAL','initial','limit','emojisell','balances','\x20minutes\x20-\x20','emojibuy','yyyy/MM/dd','310OYZBsR','getFullYear','Order\x20is\x20invalid:\x20','toLowerCase','loadMarkets','startnumber','amountToPrecision','872ntYlFC','-performance.json','apiPassword','resetHistory','privateKeyFromPem','date','openOrders','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','-------------------------------\x0a','watchTradesForSymbols()','coin','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','************','add','filter','trade','getSeconds','util','version','104334LbDQrs','request-time','percentage','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','toUpperCase','assign','customId','map','\x20/\x20','Block\x20transaction\x20detection:\x20','watchTradesForSymbols','createOrder','./version.json','freeze','marketcapsqrt','settings','environment','\x20attempts','Market','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','getMinutes','239019mviajK','Resetting\x20coin\x20results:\x20','001','\x20portfolio:</b>\x20\x0a\x0a','entries','UNLOCKED','apiSecret','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','sha256','write','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','timestamp','***','performance','RETRY\x20-\x20Error\x20in\x20','bot','ordertype','%\x20(','<b>Bot\x20','switch-manual','\x20order:\x20','placeOrder','lowdb/adapters/FileSync','watchOrders()','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','length','full','marketcapApi','Exception\x20thrown\x20in\x20','set','InsufficientFunds','kill','\x20|\x20','find','substring','ExchangeNotAvailable','43812rQtJKm','RSA-OAEP','parse','\x20:\x20','order','getHours','1676VOdSEh','1029765mISTlO','process\x20','recreate','-events.json','botname','Invalid\x20quantity','target','date-fns','OnMaintenance','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','value','1063398RoCVvA','status','has','2.6.22','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','2\x20-\x20Handled\x20open\x20orders','Saving\x20configuration','password','differenceInSeconds','min','distribution','get','<pre>','recent20','InvalidNonce','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','startdate','toggleBotMode','getCoinNumber()','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','usd','Order\x20filled:\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Cex','emitHistory','679gBzTXN','exchanges','recreateCoinResults()','none','netoffset','isEqual','EUR','colorscheme','Order(s)\x20not\x20validated\x20after\x20','offset','floor','deleteHistoryAlerts','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','defaults','warning','uncaughtException','net-basecoin','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','market_cap','sells','datetime','logs','running','starting-balance-','\x20>\x20details:','change','startsWith','\x20has\x20a\x2024h\x20drop\x20of\x20','botID','NetworkError','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','portfolio2','PermissionDenied','max','side','log','Error\x20details:','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','yargs/yargs','\x20>\x20[DEBUG]\x20','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','ongoing','change24h','cancel','symbol','toFixed','number','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','argv','last','function',':\x20timer\x20>','\x20exchange\x20error:\x20','split','Order\x20amount\x20is\x20invalid:\x20','update-liquidity','createWriteStream','/EUR','push','apiKey','Pausing\x20for\x20','timeout','Unknown\x20error\x20-\x20check\x20logs','fetchTickers','args',',\x20must\x20be\x20a\x203\x20digit\x20number','toString','USDT','/USD','red_yellow_blue','buy','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','average','BUSD','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','changes','join','balancing\x20resumes\x20when\x20cooldown\x20ends','1\x20-\x20Handle\x20open\x20orders','BNB','delta','exchange','spot','error','string','12mKtjnq','removed','orderstatus','Insufficient\x20funds\x20to\x20execute\x20order:\x20','event','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','timeshift','ETH','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','bots','0\x20-\x20EXECUTION:\x20','getStartingBalances','enabled','net-fiat','Initializing\x20exchange','BNB/','highest','leftTxt','sortBy','Fee\x20discount\x20refund\x20detected:\x20','getPortfolio','existsSync','1\x20-\x20Unlock\x20orders','coins','bot-','Binance',':\x20Bot\x20','699cBEOjs','ORDERS.LOCKED','marketcapEnabled','data','Error\x20details\x20(0):','initTickers()','Net\x20effect','Headless:\x20','cost','BTC','type','final','round','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','pki','path','slice','Cooldown\x20ended\x20-\x20balancing\x20resumed','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','quick','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','pid','send','onepagemode','test','complete','portfolio','realized','1YrqPaf','pro','API-key\x20format\x20invalid','2\x20-\x20Validate\x20orders:\x20','search','Limit\x20(high-margin)','starting-balances','storeFiat','getMonth','\x20uses\x20','initclient','Initializing\x20exchange:\x20already\x20done','Trigger:\x20','progress','Unknown\x20error:\x20','status\x20code\x20401','remove','Bybit','\x20orders\x20in\x20less\x20than\x20','.json','fees','USD','./logs/','reverse','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','valid','time','1\x20-\x20FILLED\x20unknown\x20order:\x20','node-forge','breakeven','forEach','\x20exchange','showConfig','staging','limit-high','storeConfiguration','getOpenOrders()','USDP','constructor','(((.+)+)+)+$','</pre>','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','debug','/output-000.log','fiat','buys','sendPortfolioTelegram','Huobipro','padStart','format','no\x20exchange\x20reloaded','UNLOCKING','must\x20be\x20greater\x20than\x20minimum\x20amount','random','Bot\x20','abs','enableFiatToggle','Exchange\x20error\x20details:','autoliquidity','remainingSymbols','LOCKED'];_0x2251=function(){return _0x529b96;};return _0x2251();}function headlessMode(_0x52b14e){const _0x27bc7d=_0xefa3fc;let _0x391515=_0x52b14e['portfolio'],_0x2bfb0a=_0x52b14e[_0x27bc7d(0x1b8)],_0x8a2732=[];for(let _0x4a1c20 of _0x391515){if(_0x4a1c20[_0x27bc7d(0x1fa)]!=config['basecoin']){if(_0x4a1c20[_0x27bc7d(0xf4)]>=_0x2bfb0a/0x64){if(_0x4a1c20['valid'])_0x8a2732['push'](_0x4a1c20);}else{if(_0x4a1c20[_0x27bc7d(0xf4)]<=-_0x2bfb0a/0x64){if(_0x4a1c20[_0x27bc7d(0x149)])_0x8a2732[_0x27bc7d(0xde)](_0x4a1c20);}}}}_0x8a2732[_0x27bc7d(0x6d)]>0x0&&(lockOrders==ORDERS[_0x27bc7d(0x21d)]&&!coolingDown&&_0x8a2732[_0x27bc7d(0x14e)](_0x5c4f99=>{const _0x3d5471=_0x27bc7d;logger[_0x3d5471(0x15a)](_0x3d5471(0x13c)+_0x5c4f99['coin']+'\x20'+_0x5c4f99['number']+'\x20'+_0x5c4f99[_0x3d5471(0xd5)]+'\x20'+_0x5c4f99[_0x3d5471(0x94)]+'%\x20'+_0x5c4f99['target']+'%\x20'+(0x64*_0x5c4f99[_0x3d5471(0xf4)])[_0x3d5471(0xd1)](0x2)+'%\x20('+_0x2bfb0a[_0x3d5471(0xd1)](0x2)+'%)');}),placeOrder(_0x8a2732));}function notifyBalance(_0x4f73ac){const _0x959014=_0xefa3fc;let _0x3e697f=_0x4f73ac[_0x959014(0x12e)],_0x252496=_0x4f73ac['threshold'],_0x2ed440=[];for(let _0xb4dc27 of _0x3e697f){if(_0xb4dc27['coin']!=config[_0x959014(0x189)]){if(_0xb4dc27[_0x959014(0xf4)]>=_0x252496/0x64){if(_0xb4dc27[_0x959014(0x149)])_0x2ed440['push'](_0xb4dc27);}else{if(_0xb4dc27[_0x959014(0xf4)]<=-_0x252496/0x64){if(_0xb4dc27[_0x959014(0x149)])_0x2ed440[_0x959014(0xde)](_0xb4dc27);}}}}if(_0x2ed440[_0x959014(0x6d)]>0x0){let _0x4e52c1=_0x2ed440['map'](_0x3980a9=>_0x3980a9[_0x959014(0x1fa)]);_0x4e52c1['sort']();let _0x5ad4ca=_0x4e52c1['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x959014(0xb1),_0x959014(0x1cf));lastCoinsToBalance=_0x5ad4ca;}}function symbolToCoin(_0xca4e48){const _0x431578=_0xefa3fc;let _0x18897f;if(_0xca4e48[_0x431578(0x18c)]('/'+config[_0x431578(0x189)]))_0x18897f=_0xca4e48['replace']('/'+config[_0x431578(0x189)],'');if(_0xca4e48[_0x431578(0x18c)](config[_0x431578(0x189)]+'/'))_0x18897f=_0xca4e48[_0x431578(0x1c1)](config['basecoin']+'/','');return _0x18897f;}async function unlockOrders(){const _0x3bdfc5=_0xefa3fc;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3bdfc5(0x16c)]){logger['debug'](_0x3bdfc5(0x10f)),lockOrders=ORDERS[_0x3bdfc5(0x163)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x23d3cc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x23d3cc,setBlockTransactionDetection(![]),validateOrdersState=_0x3bdfc5(0x1e2),persistOpenOrders([]),lockOrders=ORDERS[_0x3bdfc5(0x21d)],logger['debug'](_0x3bdfc5(0x1a4));}}async function validateOrders(_0x5e7370){const _0x4f2a00=_0xefa3fc;if(_0x5e7370)validateOrdersState=_0x5e7370;logger[_0x4f2a00(0x15a)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x4f2a00(0x115):lockOrders==0x2?'ORDERS.UNLOCKING':_0x4f2a00(0x184)));let _0x598169=[],_0x52c1f4=config[_0x4f2a00(0x228)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4f2a00(0xe1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4f2a00(0x16c)])return;logger['debug'](_0x4f2a00(0x133)+validateOrdersState),lastOrders[_0x4f2a00(0x14e)](_0x1d4d88=>{const _0x1377ee=_0x4f2a00;let _0x542d8e=![];_0x1d4d88[_0x1377ee(0x191)]>0x0&&(_0x542d8e=!![]),_0x598169[_0x1377ee(0xde)](_0x542d8e),_0x542d8e&&config[_0x1377ee(0x228)]!='market'&&logHistory(_0x1377ee(0x7c),_0x1377ee(0x9f)+_0x1d4d88[_0x1377ee(0xd0)]+'\x20'+_0x1d4d88[_0x1377ee(0xc5)]+'\x20#'+formatResult(_0x1d4d88['filled'],0x8)+'\x20@'+formatResult(_0x1d4d88[_0x1377ee(0xcb)],0x8));}),_0x598169['forEach']((_0x327d39,_0x3fb9c5)=>{const _0x4cc437=_0x4f2a00;if(_0x327d39)lastOrders[_0x4cc437(0x193)](_0x3fb9c5,0x1);}),persistOpenOrders(lastOrders);const _0x2daefd=coolingDown?_0x4f2a00(0xf1):_0x4f2a00(0x1a7);if(validateOrdersState==_0x4f2a00(0x1e2)){validateOrdersState=_0x4f2a00(0xcd);if(_0x598169[_0x4f2a00(0x18c)](![])){if(config[_0x4f2a00(0x228)]==_0x4f2a00(0x1ae)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4f2a00(0xcd)){if(_0x598169[_0x4f2a00(0x18c)](![])){}else{if(allOrdersPlaced){if(config[_0x4f2a00(0x228)]==_0x4f2a00(0x1ae)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4f2a00(0x11f))_0x598169[_0x4f2a00(0x18c)](![])&&(config['ordertype']=='market'?logHistory(_0x4f2a00(0x19a),_0x4f2a00(0xab)+Math[_0x4f2a00(0x120)](_0x52c1f4*validateOrderInterval/0xea60)+_0x4f2a00(0x1e6)+_0x2daefd):(await cancelOrders(),logHistory(_0x4f2a00(0x19a),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4f2a00(0x120)](_0x52c1f4*validateOrderInterval/0xea60)+_0x4f2a00(0x1e6)+_0x2daefd))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x4f2a00(0x228)]!='market')logHistory(_0x4f2a00(0x19a),'No\x20more\x20open\x20orders\x20-\x20'+_0x2daefd);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x1c3def=>{const _0x2fcf4b=_0x15f8;try{const _0x3ce226=await exchange[_0x2fcf4b(0x1a6)](_0x1c3def[_0x2fcf4b(0x1a8)],_0x1c3def[_0x2fcf4b(0xd0)]);}catch(_0x2dd1e3){if(_0x2dd1e3['toString']()['includes']('OrderNotFound')){}else await handleError(_0x2dd1e3,'cancelOrders()');}});}async function initCoinResults(_0x22a46b){const _0x173ecd=_0xefa3fc;_0x22a46b?logger[_0x173ecd(0x15a)](_0x173ecd(0x219)+_0x22a46b):logger[_0x173ecd(0x15a)]('Initializing\x20coin\x20results'),config[_0x173ecd(0x12e)][_0x173ecd(0x14e)](_0x4e6ec0=>{const _0x16ff5c=_0x173ecd;if(!_0x4e6ec0[_0x16ff5c(0x18d)]&&_0x4e6ec0['coin']!=config[_0x16ff5c(0x189)]){const _0x26b073=currentCoins[_0x16ff5c(0x75)](_0x2dbb59=>_0x2dbb59['coin']==_0x4e6ec0[_0x16ff5c(0x1fa)]),_0x257bce=gTicker[noslash(_0x4e6ec0[_0x16ff5c(0xd0)])];let _0x3f1bc6=_0x26b073?_0x26b073[_0x16ff5c(0xd2)]:null,_0x44bb30=_0x4e6ec0[_0x16ff5c(0x147)]?0x1/_0x257bce:_0x257bce,_0x234609;config['liquidity'][_0x16ff5c(0x14e)](_0x20a3f9=>{const _0x43f780=_0x16ff5c;!_0x234609&&(_0x234609=_0x20a3f9['changes']['find'](_0x1f7ddf=>_0x1f7ddf[_0x43f780(0x1fa)]==_0x4e6ec0[_0x43f780(0x1fa)]),_0x234609&&(_0x3f1bc6=_0x234609[_0x43f780(0xd2)],_0x44bb30=_0x234609[_0x43f780(0xcb)]));});let _0x3ba58a=dbCoinResults[_0x16ff5c(0x95)](_0x16ff5c(0x110))['find']({'coin':_0x4e6ec0[_0x16ff5c(0x1fa)]})[_0x16ff5c(0x89)]();if(!_0x3ba58a){const _0x5689cb={'coin':_0x4e6ec0['coin'],'number':_0x3f1bc6,'breakeven':_0x44bb30,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x16ff5c(0x95)]('coins')[_0x16ff5c(0xde)](_0x5689cb)['write']();}else{if(_0x22a46b&&_0x4e6ec0['coin']==_0x22a46b){const _0x59aad2={'coin':_0x4e6ec0[_0x16ff5c(0x1fa)],'number':_0x3f1bc6,'breakeven':_0x44bb30,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x16ff5c(0x95)](_0x16ff5c(0x110))['find']({'coin':_0x4e6ec0[_0x16ff5c(0x1fa)]})['assign'](_0x59aad2)['write']();}}}});}async function updateCoinResults(_0x5b15ac,_0xfc5c5c=![]){const _0x10cb4b=_0xefa3fc;let _0x404709,_0x58b391,_0x500ece,_0x1acfdc,_0x1f47d4,_0x5ae24f,_0x3b0a6e=dbCoinResults[_0x10cb4b(0x95)]('coins')[_0x10cb4b(0x75)]({'coin':_0x5b15ac['coin']})[_0x10cb4b(0x89)](),_0x583b89=![];_0x3b0a6e&&Object[_0x10cb4b(0x21c)](_0x3b0a6e)[_0x10cb4b(0x14e)](([_0x145152,_0x27d8dc])=>{if(_0x27d8dc==null)_0x583b89=!![];});(!_0x3b0a6e||_0x583b89)&&(await initCoinResults(_0x5b15ac['coin']),_0x3b0a6e=dbCoinResults[_0x10cb4b(0x95)]('coins')[_0x10cb4b(0x75)]({'coin':_0x5b15ac[_0x10cb4b(0x1fa)]})[_0x10cb4b(0x89)]());_0x5b15ac[_0x10cb4b(0x147)]&&(_0x5ae24f={'filled':_0x5b15ac[_0x10cb4b(0x191)]*_0x5b15ac[_0x10cb4b(0xcb)],'amount':_0x5b15ac['filled']*_0x5b15ac['price'],'side':_0x5b15ac[_0x10cb4b(0xc5)]=='sell'?_0x10cb4b(0xea):_0x10cb4b(0x182),'price':0x1/_0x5b15ac['price']},_0x5b15ac={..._0x5b15ac,..._0x5ae24f});_0xfc5c5c?_0x58b391=_0x5b15ac[_0x10cb4b(0xc5)]==_0x10cb4b(0xea)?_0x3b0a6e[_0x10cb4b(0xd2)]+_0x5b15ac['filled']:_0x3b0a6e[_0x10cb4b(0xd2)]-_0x5b15ac['filled']:_0x58b391=await getCoinNumber(_0x5b15ac['coin']);if(_0x5b15ac['fee']&&_0x5b15ac[_0x10cb4b(0x1be)][_0x10cb4b(0x1c4)]==config['basecoin'])_0x404709=Number(_0x5b15ac['fee'][_0x10cb4b(0x11c)]);else{if(_0x5b15ac[_0x10cb4b(0x1be)]&&_0x5b15ac[_0x10cb4b(0x1be)][_0x10cb4b(0x1c4)]==_0x10cb4b(0xf3)&&!_0xfc5c5c&&config['basecoin']!=_0x10cb4b(0x16f))_0x404709=Number(_0x5b15ac[_0x10cb4b(0x1be)]['cost'])*gTicker[_0x10cb4b(0xf3)+config[_0x10cb4b(0x189)]];else _0x404709=defaultFee*_0x5b15ac['filled']*_0x5b15ac['price'];}_0x5b15ac[_0x10cb4b(0xc5)]==_0x10cb4b(0xea)?(_0x500ece=_0x58b391!=0x0?(_0x3b0a6e[_0x10cb4b(0x14d)]*_0x3b0a6e[_0x10cb4b(0xd2)]+_0x5b15ac[_0x10cb4b(0xcb)]*(_0x58b391-_0x3b0a6e[_0x10cb4b(0xd2)])+_0x404709)/_0x58b391:0x0,_0x1acfdc=_0x3b0a6e[_0x10cb4b(0x12f)]):(_0x500ece=_0x58b391!=0x0?(_0x3b0a6e['breakeven']*_0x3b0a6e[_0x10cb4b(0xd2)]-_0x5b15ac[_0x10cb4b(0xcb)]*(_0x3b0a6e[_0x10cb4b(0xd2)]-_0x58b391)+_0x404709)/_0x58b391:0x0,_0x1acfdc=_0x3b0a6e[_0x10cb4b(0x12f)]+(_0x5b15ac['price']-_0x3b0a6e[_0x10cb4b(0x14d)])*_0x5b15ac[_0x10cb4b(0x191)]);_0x1f47d4=(_0x5b15ac[_0x10cb4b(0xcb)]-_0x500ece-_0x404709/_0x5b15ac[_0x10cb4b(0x191)])*_0x58b391;let _0x5dd014={'coin':_0x5b15ac[_0x10cb4b(0x1fa)],'number':_0x58b391,'breakeven':formatResult(_0x500ece,0x8),'realized':formatResult(_0x1acfdc,0x8),'unrealized':formatResult(_0x1f47d4,0x8),'fees':formatResult(_0x3b0a6e[_0x10cb4b(0x144)]+_0x404709,0x8),'sells':_0x5b15ac['side']==_0x10cb4b(0x182)?_0x3b0a6e[_0x10cb4b(0xb6)]+0x1:_0x3b0a6e[_0x10cb4b(0xb6)],'buys':_0x5b15ac['side']==_0x10cb4b(0xea)?_0x3b0a6e[_0x10cb4b(0x15d)]+0x1:_0x3b0a6e[_0x10cb4b(0x15d)]};dbCoinResults[_0x10cb4b(0x95)](_0x10cb4b(0x110))[_0x10cb4b(0x75)]({'coin':_0x5b15ac[_0x10cb4b(0x1fa)]})[_0x10cb4b(0x208)](_0x5dd014)[_0x10cb4b(0x221)]();if(!_0xfc5c5c){if(_0x5b15ac['fee']&&_0x5b15ac[_0x10cb4b(0x1be)]['currency']==_0x10cb4b(0xf3)){const _0x633dbf=currentCoins[_0x10cb4b(0x75)](_0x1a2bf5=>_0x1a2bf5[_0x10cb4b(0x1fa)]==_0x10cb4b(0xf3));if(_0x633dbf){let _0x5e573c=dbCoinResults['get']('coins')[_0x10cb4b(0x75)]({'coin':_0x10cb4b(0xf3)})[_0x10cb4b(0x89)]();_0x5dd014={..._0x5e573c,'number':_0x633dbf[_0x10cb4b(0xd2)]},dbCoinResults[_0x10cb4b(0x95)](_0x10cb4b(0x110))[_0x10cb4b(0x75)]({'coin':_0x10cb4b(0xf3)})[_0x10cb4b(0x208)](_0x5dd014)['write']();}}}}async function placeOrder(_0x44b3ee){const _0x112b6c=_0xefa3fc,_0xc97bb=config[_0x112b6c(0x228)]=='market'?_0x112b6c(0x1ae):'limit';if(lockOrders==ORDERS[_0x112b6c(0x21d)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x112b6c(0x16c)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x112b6c(0x1e2);let _0x1cca84=![];lastOrders=[];for(const _0xc77d95 of _0x44b3ee){let _0x364a4a,_0xee55af,_0x3b3c8e,_0x20c60a,_0x5ef287,_0x2f7e02=_0xc77d95[_0x112b6c(0xd0)];try{const _0x261772=await exchange[_0x112b6c(0x194)](_0x2f7e02);_0x364a4a=_0xc77d95['reverse']?0x1/_0xc77d95['last']:_0xc77d95['last'],_0xee55af=_0x261772['bid'],_0x3b3c8e=_0x261772['ask'];_0xc77d95['reverse']?(_0x20c60a=_0xc77d95['side']==_0x112b6c(0xea)?_0x112b6c(0x182):'buy',_0x5ef287=Math[_0x112b6c(0x167)](_0xc77d95['trade'])/_0x364a4a):(_0x20c60a=_0xc77d95[_0x112b6c(0xc5)],_0x5ef287=Math[_0x112b6c(0x167)](_0xc77d95[_0x112b6c(0x1ff)]));_0xc97bb==_0x112b6c(0x1e3)&&(config[_0x112b6c(0x228)]==_0x112b6c(0x152)&&(_0x364a4a=_0x20c60a==_0x112b6c(0xea)?_0xee55af:_0x3b3c8e),config[_0x112b6c(0x228)]=='limit-low'&&(_0x364a4a=_0x20c60a==_0x112b6c(0xea)?_0x3b3c8e:_0xee55af));_0x5ef287=formatResult(_0x5ef287,0x8),_0x364a4a=formatResult(_0x364a4a,0x8);const _0xc0a3f9=_0x20c60a==_0x112b6c(0x182)?config[_0x112b6c(0x1e4)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x112b6c(0x1e7)]?String['fromCodePoint']('0x'+config[_0x112b6c(0x1e7)])+'\x20':'',_0x4003d5=_0xc97bb=='market'?_0x112b6c(0x215):config[_0x112b6c(0x228)]=='limit-high'?_0x112b6c(0x135):_0x112b6c(0x180),_0x17005e=(Math[_0x112b6c(0xad)](Math[_0x112b6c(0x165)]()*0x35a4e900)+0x5f5e100)[_0x112b6c(0xe6)]();lastOrders[_0x112b6c(0xde)]({'customId':_0x17005e,'symbol':_0x2f7e02,'coin':_0xc77d95[_0x112b6c(0x1fa)],'amount':_0x5ef287,'price':_0x364a4a,'side':_0x20c60a,'reverse':_0xc77d95[_0x112b6c(0x147)],'filled':0x0});if(_0xc97bb==_0x112b6c(0x1ae))logHistory(_0x112b6c(0x7c),''+_0xc0a3f9+_0x4003d5+'\x20order:\x20'+_0x2f7e02+'\x20'+_0x20c60a+'\x20#'+formatResult(_0x5ef287,0x8)+'\x20@'+formatResult(_0x364a4a,0x8));else logHistory('order',''+_0xc0a3f9+_0x4003d5+_0x112b6c(0x22c)+_0x2f7e02+'\x20'+_0x20c60a+'\x20#'+formatResult(_0x5ef287,0x8)+'\x20@'+formatResult(_0x364a4a,0x8));let _0x4149bf;_0xc97bb==_0x112b6c(0x1ae)?_0x20c60a=='buy'&&[_0x112b6c(0x141),'Bitget',_0x112b6c(0xa1),_0x112b6c(0x1a9),_0x112b6c(0x15f)]['includes'](config[_0x112b6c(0xf5)])?_0x4149bf=await exchange['createOrder'](_0x2f7e02,_0xc97bb,_0x20c60a,_0x5ef287,_0x364a4a):_0x4149bf=await exchange[_0x112b6c(0x20e)](_0x2f7e02,_0xc97bb,_0x20c60a,_0x5ef287,undefined):_0x4149bf=await exchange[_0x112b6c(0x20e)](_0x2f7e02,_0xc97bb,_0x20c60a,_0x5ef287,_0x364a4a);logger['debug'](_0x112b6c(0x179)+_0x4149bf['id']+'\x20|\x20Custom\x20ID:\x20'+_0x17005e);const _0x37caea=lastOrders[_0x112b6c(0x6d)]-0x1;if(_0x37caea>=0x0&&lastOrders[_0x37caea][_0x112b6c(0x209)]==_0x17005e){lastOrders[_0x37caea][_0x112b6c(0x1a8)]=_0x4149bf['id'];if(_0x4149bf[_0x112b6c(0x1dd)])lastOrders[_0x37caea][_0x112b6c(0x1dd)]=_0x4149bf[_0x112b6c(0x1dd)];if(_0x4149bf[_0x112b6c(0xcb)])lastOrders[_0x37caea][_0x112b6c(0xcb)]=_0x4149bf[_0x112b6c(0xcb)];lastOrders[_0x37caea][_0x112b6c(0x1be)]=_0x4149bf[_0x112b6c(0x1be)];}if(config[_0x112b6c(0x1d5)]!=0x0){let _0x559f82=null;if(cooldownTracker[_0x112b6c(0x6d)]==config[_0x112b6c(0x1d5)]-0x1)_0x559f82=cooldownTracker['shift']();const _0xd4d453=getTimeStamp();cooldownTracker[_0x112b6c(0xde)](_0xd4d453);if(_0x559f82){const _0x428c53=fns[_0x112b6c(0x92)](new Date(_0xd4d453),new Date(_0x559f82));if(_0x428c53<cooldownInterval){logHistory(_0x112b6c(0xf7),_0x112b6c(0x1c8)+config[_0x112b6c(0x1d5)]+_0x112b6c(0x142)+cooldownInterval/0x3c+_0x112b6c(0x21f)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x31b273){if(_0x31b273['toString']()[_0x112b6c(0x18c)](_0x112b6c(0x1e1)))lastOrders=lastOrders[_0x112b6c(0x1fe)](_0x5c1671=>_0x5c1671[_0x112b6c(0xd0)]!=_0x2f7e02),logHistory(_0x112b6c(0xf7),_0x112b6c(0x18a)+_0x2f7e02),_0x1cca84=!![];else{if(_0x31b273[_0x112b6c(0xe6)]()[_0x112b6c(0x18c)](_0x112b6c(0x84)))lastOrders=lastOrders[_0x112b6c(0x1fe)](_0x116824=>_0x116824[_0x112b6c(0xd0)]!=_0x2f7e02),logHistory(_0x112b6c(0xf7),_0x112b6c(0xda)+_0x2f7e02),_0x1cca84=!![];else{if(_0x31b273[_0x112b6c(0xe6)]()['includes'](_0x112b6c(0x1d4)))lastOrders=lastOrders['filter'](_0x30ac66=>_0x30ac66[_0x112b6c(0xd0)]!=_0x2f7e02),logHistory(_0x112b6c(0xf7),_0x112b6c(0x1eb)+_0x2f7e02),logger[_0x112b6c(0x15a)](_0x31b273),_0x1cca84=!![];else _0x31b273[_0x112b6c(0xe6)]()['includes'](_0x112b6c(0x164))?(lastOrders=lastOrders[_0x112b6c(0x1fe)](_0x42bb00=>_0x42bb00[_0x112b6c(0xd0)]!=_0x2f7e02),logHistory(_0x112b6c(0xf7),_0x112b6c(0x18a)+_0x2f7e02),_0x1cca84=!![]):(lastOrders=lastOrders[_0x112b6c(0x1fe)](_0x1b2041=>_0x1b2041[_0x112b6c(0xd0)]!=_0x2f7e02),await handleError(_0x31b273,'placeOrder()',_0x2f7e02));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x112b6c(0x6d)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5a032f=config[_0x112b6c(0x228)]==_0x112b6c(0x1ae)?validateOrderTimeout*0x3c*0x3e8:config[_0x112b6c(0xe1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x464ffa=_0x112b6c;validateOrders(_0x464ffa(0x11f));},_0x5a032f);}else unlockOrders();_0x1cca84&&config[_0x112b6c(0x1aa)]&&(logHistory(_0x112b6c(0xf7),_0x112b6c(0x1b4)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x112b6c(0x19a),_0x112b6c(0x125)));}else{if(coolingDown)!config[_0x112b6c(0x1aa)]&&logHistory(_0x112b6c(0xf7),_0x112b6c(0x1cc));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x112b6c(0x1aa)]&&(config['ordertype']==_0x112b6c(0x1ae)?logHistory(_0x112b6c(0xf7),_0x112b6c(0xc1)):logHistory(_0x112b6c(0xf7),_0x112b6c(0xcc))));}}function persistOpenOrders(_0x21e9d){const _0x1a624f=_0xefa3fc,_0x5835ae={...config,'openOrders':_0x21e9d};let _0x52ed24=dbConfig[_0x1a624f(0x95)](_0x1a624f(0x227))[_0x1a624f(0x75)]({'botID':botID})[_0x1a624f(0x89)]();_0x52ed24&&dbConfig[_0x1a624f(0x95)](_0x1a624f(0x227))[_0x1a624f(0x75)]({'botID':botID})[_0x1a624f(0x208)](_0x5835ae)[_0x1a624f(0x221)]();}function restoreOrders(){const _0x211e5e=_0xefa3fc;let _0x272344;config[_0x211e5e(0x1f6)]&&allOpenOrders[_0x211e5e(0x14e)](_0x3de162=>{const _0x8c30e4=_0x211e5e,_0x1304fd=config['openOrders'][_0x8c30e4(0x75)](_0x37b1cd=>_0x37b1cd[_0x8c30e4(0x1a8)]==_0x3de162['id']);_0x1304fd&&(lastOrders[_0x8c30e4(0xde)](_0x1304fd),_0x272344=_0x3de162['timestamp']);});if(lastOrders[_0x211e5e(0x6d)]>0x0){lockOrders=ORDERS[_0x211e5e(0x16c)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x294ec1=new Date()[_0x211e5e(0x1bd)](),_0x2aea9e=config[_0x211e5e(0x228)]==_0x211e5e(0x1ae)?validateOrderTimeout*0x3c*0x3e8:config[_0x211e5e(0xe1)]*0x3c*0x3e8;if(_0x272344+_0x2aea9e>_0x294ec1){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x272344+_0x2aea9e-_0x294ec1);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0xec7389=_0xefa3fc;if(!coinsLoaded){process[_0xec7389(0x12a)]({'telegrammsg':_0xec7389(0x148)},_0x349e91=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4b6dd0='';if(config['showname'])_0x4b6dd0=_0xec7389(0x172)+config[_0xec7389(0x83)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x4b6dd0=_0xec7389(0x22a)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2d9569=getKPIs(_0xec7389(0x189)),_0x559604=getKPIs('fiat',config[_0xec7389(0x15c)]),_0xf121d4=getKPIs(_0xec7389(0xb3)),_0x82dcb8=getKPIs(_0xec7389(0x106),config['fiat']);_0x4b6dd0+=_0xec7389(0x96),_0x4b6dd0+=_0x2d9569[_0xec7389(0x10a)]+_0xec7389(0x7b)+_0x2d9569[_0xec7389(0x89)]+'\x0a',_0x4b6dd0+=_0x2d9569[_0xec7389(0x1d9)]+':\x20'+_0x2d9569['change']+'%\x0a',_0x4b6dd0+=_0x559604[_0xec7389(0x10a)]+_0xec7389(0x7b)+_0x559604['value']+'\x0a',_0x4b6dd0+=_0x559604['rightTxt']+':\x20'+_0x559604['change']+'%\x0a',_0x4b6dd0+=_0xf121d4[_0xec7389(0x10a)]+':\x20'+_0xf121d4[_0xec7389(0x89)]+'\x20('+config['basecoin']+')\x0a',_0x4b6dd0+=_0xf121d4[_0xec7389(0x1d9)]+':\x20'+_0xf121d4[_0xec7389(0xbc)]+_0xec7389(0x229)+config[_0xec7389(0x189)]+')\x0a',_0x4b6dd0+=_0x82dcb8['leftTxt']+':\x20'+_0x82dcb8[_0xec7389(0x89)]+'\x20('+config['fiat']+')\x0a',_0x4b6dd0+=_0x82dcb8['rightTxt']+':\x20'+_0x82dcb8[_0xec7389(0xbc)]+_0xec7389(0x229)+config[_0xec7389(0x15c)]+')\x0a',_0x4b6dd0+='</pre>',process['send']({'telegrammsg':_0x4b6dd0},_0x4f12b9=>{});}async function sendPortfolioTelegram(){const _0x51ab6d=_0xefa3fc;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x51ab6d(0x12a)]({'telegrammsg':_0x51ab6d(0x148)},_0x11841c=>{});return;}let _0x4e09da='';if(config[_0x51ab6d(0x1ac)])_0x4e09da=_0x51ab6d(0x172)+config[_0x51ab6d(0x83)]+_0x51ab6d(0x21b);else _0x4e09da=_0x51ab6d(0x22a)+botID+_0x51ab6d(0x21b);_0x4e09da+=_0x51ab6d(0x96),_0x4e09da+=_0x51ab6d(0x1f8),_0x4e09da+=_0x51ab6d(0x88),_0x4e09da+=_0x51ab6d(0x1f8),currentCoins['forEach'](_0x4491c2=>{const _0x4c8817=_0x51ab6d;_0x4e09da+=_0x4491c2[_0x4c8817(0x1fa)][_0x4c8817(0x1b6)](0x7)+'|\x20'+formatPad(_0x4491c2[_0x4c8817(0x94)],0x2,0x6)+'|\x20'+formatPad(_0x4491c2[_0x4c8817(0x85)],0x2,0x6)+'|\x20'+formatPad(_0x4491c2['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4e09da+=_0x51ab6d(0x158),process[_0x51ab6d(0x12a)]({'telegrammsg':_0x4e09da},_0x29bec4=>{});}function formatPad(_0x8cac32,_0x3e69f0,_0x17e451){const _0x1a7245=_0xefa3fc,_0x2a9a16=formatResultString(_0x8cac32,_0x3e69f0);return _0x2a9a16?_0x2a9a16[_0x1a7245(0x160)](_0x17e451):''[_0x1a7245(0x160)](_0x17e451);}function logHistory(_0x117c7d,_0x3fce4b,_0x3e9b4d=''){const _0x1d2843=_0xefa3fc;logger[_0x1d2843(0x6e)](''+_0x3fce4b);let _0x52f594={'time':getTimeStamp(),'type':_0x117c7d,'event':_0x3fce4b};dbLogs[_0x1d2843(0x95)](_0x1d2843(0xb8))['push'](_0x52f594)[_0x1d2843(0x221)]();if(_0x3e9b4d=='')_0x3e9b4d=_0x3fce4b;proxyEmit(_0x1d2843(0xfd),{'log':_0x52f594,'summary':_0x3e9b4d}),process[_0x1d2843(0x12a)]({'telegram':{..._0x52f594,'botname':config[_0x1d2843(0x83)],'showname':config[_0x1d2843(0x1ac)]}},_0x2de814=>{});}function emitHistory(_0x3d086d={}){const _0x7b6d96=_0xefa3fc;Object['keys'](_0x3d086d)[_0x7b6d96(0x6d)]==0x0&&(_0x3d086d={'type':['order',_0x7b6d96(0xfd)],'event':'','page':0x1});if(_0x3d086d[_0x7b6d96(0x11e)]['includes'](_0x7b6d96(0xfd)))_0x3d086d['type'][_0x7b6d96(0x193)](_0x3d086d[_0x7b6d96(0x11e)]['indexOf'](_0x7b6d96(0xfd)),0x1,_0x7b6d96(0xf7),_0x7b6d96(0xb1),_0x7b6d96(0x19a));if(dbLogs[_0x7b6d96(0x8c)]('logs')[_0x7b6d96(0x89)]()){let _0x33424d=dbLogs['get'](_0x7b6d96(0xb8))[_0x7b6d96(0x1fe)](_0xcb2c7a=>{const _0x12c0c3=_0x7b6d96;if(_0x3d086d[_0x12c0c3(0x11e)][_0x12c0c3(0x6d)]==0x0)return![];else return _0x3d086d[_0x12c0c3(0x11e)][_0x12c0c3(0x18c)](_0xcb2c7a['type']);})[_0x7b6d96(0x1fe)](_0x1666cf=>{const _0x424118=_0x7b6d96;if(_0x3d086d[_0x424118(0xfd)]=='')return!![];else return _0x1666cf[_0x424118(0xfd)][_0x424118(0x1ec)]()[_0x424118(0x18c)](_0x3d086d[_0x424118(0xfd)][_0x424118(0x1ec)]());})[_0x7b6d96(0x10b)](_0x7b6d96(0x14a)),_0x2c9372=_0x33424d[_0x7b6d96(0x89)]()[_0x7b6d96(0x6d)];_0x33424d=_0x33424d['reverse']()['slice']((_0x3d086d[_0x7b6d96(0x19b)]-0x1)*logPageSize,_0x3d086d[_0x7b6d96(0x19b)]*logPageSize-0x1)[_0x7b6d96(0x147)]()[_0x7b6d96(0x89)](),proxyEmit(_0x7b6d96(0x1cd),{'logs':_0x33424d,'total':_0x2c9372});}else proxyEmit(_0x7b6d96(0x1cd),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x27c496){const _0x5db757=_0xefa3fc;if(dbLogs[_0x5db757(0x8c)](_0x5db757(0xb8))[_0x5db757(0x89)]()){const _0x20e808=dbLogs[_0x5db757(0x95)](_0x5db757(0xb8))[_0x5db757(0x10b)]('time')[_0x5db757(0x1fe)](_0x2ee712=>{const _0xde7912=_0x5db757;return _0x2ee712[_0xde7912(0x11e)]==_0xde7912(0x7c);})[_0x5db757(0x89)]();dbLogs[_0x5db757(0x95)](_0x5db757(0xb8))[_0x5db757(0x140)]()[_0x5db757(0x221)](),dbLogs['get'](_0x5db757(0xb8))[_0x5db757(0x208)](_0x20e808)[_0x5db757(0x221)](),emitHistory(_0x27c496);}}async function pauseBot(_0x86ec3b=pauseBotIntervalShort,_0x1b023a,_0x4daffd,_0x2e2f2d=![]){const _0x48037e=_0xefa3fc,_0x57e4e0=new Date()['getTime']();if(!lastErrorShown||_0x57e4e0-lastErrorShown>=_0x86ec3b){lastErrorShown=_0x57e4e0;if(!lastBotPause)lastBotPause=_0x57e4e0,consecutivePauses=0x1;else{if(_0x57e4e0-lastBotPause-_0x86ec3b<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x2e2f2d){logHistory(_0x48037e(0xf7),_0x1b023a+_0x48037e(0x1f7)),await killBot();return;}else logHistory('error',_0x1b023a+pauseBotMsg),_0x86ec3b=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x57e4e0;}_0x4daffd?logger[_0x48037e(0x15a)]('('+consecutivePauses+')\x20'+_0x1b023a+_0x48037e(0xbb),_0x4daffd):logger[_0x48037e(0x15a)]('('+consecutivePauses+')\x20'+_0x1b023a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x86ec3b),botPaused=![],_0x86ec3b==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x79de97=_0xefa3fc;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x79de97(0x73)},_0x57e4ca=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x131b79,_0x252f92){const _0x30e971=_0xefa3fc;if(botPaused)return;const _0x137be9=config[_0x30e971(0xf5)]||'Exchange';if(_0x252f92)logger[_0x30e971(0x15a)](_0x30e971(0x70)+_0x252f92);const _0x2e7a29=()=>{const _0x44eaa1=_0x30e971;loading[_0x44eaa1(0xf7)]=!![],emitLoadingProgress();};if(_0x131b79[_0x30e971(0xe6)]()[_0x30e971(0x18c)](_0x30e971(0x132)))logHistory(_0x30e971(0xf7),_0x137be9+_0x30e971(0x19e)),_0x2e7a29();else{if(_0x131b79[_0x30e971(0xe6)]()[_0x30e971(0x18c)](_0x30e971(0x1b9)))logHistory(_0x30e971(0xf7),_0x137be9+_0x30e971(0xaf)),_0x2e7a29();else _0x131b79[_0x30e971(0xe6)]()['includes']('AuthenticationError')?(logHistory(_0x30e971(0xf7),_0x137be9+_0x30e971(0x128)),logHistory(_0x30e971(0xf7),_0x30e971(0x1fb)),_0x2e7a29()):await handleError(_0x131b79,null);}}async function handleError(_0x5be7c7,_0x4aea9e,_0x4e5ded=''){const _0x400188=_0xefa3fc;if(botPaused)return;let _0x14c6e2;const _0x278668=config[_0x400188(0xf5)]||_0x400188(0x1da);if(_0x4aea9e)logger[_0x400188(0x15a)](_0x400188(0x70)+_0x4aea9e);if(_0x5be7c7['toString']()[_0x400188(0x18c)](_0x400188(0x173)))_0x14c6e2=_0x278668+_0x400188(0xa0),await pauseBot(undefined,_0x14c6e2,_0x5be7c7);else{if(_0x5be7c7[_0x400188(0xe6)]()['includes'](_0x400188(0x1c0)))_0x14c6e2=_0x278668+_0x400188(0x101),await pauseBot(undefined,_0x14c6e2,_0x5be7c7);else{if(_0x5be7c7[_0x400188(0xe6)]()['includes'](_0x400188(0x77))||_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)](_0x400188(0x87)))_0x14c6e2=_0x278668+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x14c6e2,_0x5be7c7[_0x400188(0xe6)]());else{if(_0x5be7c7['toString']()[_0x400188(0x18c)]('RequestTimeout'))_0x14c6e2=_0x278668+_0x400188(0x222),await pauseBot(undefined,_0x14c6e2,_0x5be7c7[_0x400188(0xe6)]());else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x14c6e2=_0x278668+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x14c6e2,_0x5be7c7['toString']());else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x1ec)]()[_0x400188(0x18c)](_0x400188(0x223))||_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x1ec)]()[_0x400188(0x18c)](_0x400188(0x204)))_0x14c6e2=_0x400188(0x9d),await pauseBot(undefined,_0x14c6e2,_0x5be7c7[_0x400188(0xe6)]());else{if(_0x5be7c7['toString']()[_0x400188(0x18c)](_0x400188(0x98)))_0x14c6e2=_0x278668+_0x400188(0x6c),await pauseBot(undefined,_0x14c6e2,_0x5be7c7[_0x400188(0xe6)]());else{if(_0x5be7c7 instanceof ccxt[_0x400188(0xc0)])_0x14c6e2=_0x278668+_0x400188(0x17d)+_0x5be7c7[_0x400188(0xe6)](),logger[_0x400188(0x15a)](_0x400188(0x1d7),_0x5be7c7),await pauseBot(undefined,_0x14c6e2,_0x5be7c7);else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)]('API-key\x20format\x20invalid'))logHistory(_0x400188(0xf7),_0x278668+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x400188(0xf7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)](_0x400188(0x1b9)))logHistory(_0x400188(0xf7),_0x278668+_0x400188(0x190)),logHistory('error',_0x400188(0x121)),await killBot();else{if(_0x5be7c7[_0x400188(0xe6)]()['includes'](_0x400188(0x171))&&_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)](_0x400188(0x1ad)))_0x14c6e2=_0x278668+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x14c6e2,_0x5be7c7,!![]);else{if(_0x5be7c7[_0x400188(0xe6)]()['includes']('AuthenticationError'))config[_0x400188(0x1f2)]?_0x14c6e2=_0x278668+_0x400188(0xeb):_0x14c6e2=_0x278668+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x14c6e2),logHistory(_0x400188(0xf7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)](_0x400188(0xc3)))logHistory(_0x400188(0xf7),_0x278668+_0x400188(0x176)),logHistory('error',_0x400188(0x121)),await killBot();else{if(_0x5be7c7[_0x400188(0xe6)]()[_0x400188(0x18c)](_0x400188(0x72)))logHistory(_0x400188(0xf7),_0x400188(0xfc)+_0x4e5ded);else{if(_0x5be7c7 instanceof ccxt[_0x400188(0x19f)]){_0x14c6e2=_0x278668+_0x400188(0xd8)+_0x5be7c7[_0x400188(0xe6)](),logHistory(_0x400188(0xf7),_0x14c6e2),logger[_0x400188(0x15a)](_0x400188(0x169),_0x5be7c7);if(_0x4e5ded)logger['debug'](_0x400188(0x1de)+_0x4e5ded);await pauseBot(undefined,_0x14c6e2,_0x5be7c7);}else{_0x14c6e2=_0x400188(0x13e)+_0x5be7c7[_0x400188(0xe6)](),logHistory('error',_0x14c6e2),logger[_0x400188(0x15a)](_0x14c6e2+_0x400188(0xbb),_0x5be7c7);if(_0x4e5ded)logger[_0x400188(0x15a)]('Symbol(s):\x20'+_0x4e5ded);await pauseBot(undefined,_0x14c6e2);}}}}}}}}}}}}}}}}function decryptRSA(_0x380ace,_0x4c6a3e){const _0x29a33d=_0xefa3fc,_0x35ea27=forge[_0x29a33d(0x122)][_0x29a33d(0x1f4)](_0x380ace),_0x447fbe=_0x35ea27['decrypt'](forge[_0x29a33d(0x201)]['decode64'](_0x4c6a3e),_0x29a33d(0x79),{'md':forge['md']['sha256'][_0x29a33d(0x1d0)](),'mgf1':{'md':forge['md'][_0x29a33d(0x220)][_0x29a33d(0x1d0)]()}});return _0x447fbe;}async function withRetry(_0xc14706,_0x37038d){const _0x487bac=_0xefa3fc;let _0x93e5ad=![],_0x20307c=0x0,_0x20313b,_0x2d8563;while(_0x20307c<maxRetries){try{_0x20313b=await _0x37038d();break;}catch(_0x5bc927){_0x2d8563=_0x5bc927,!_0x93e5ad?(_0x93e5ad=!![],logger['debug'](_0x487bac(0x226)+_0xc14706+':',_0x5bc927[_0x487bac(0xe6)]())):await sleep(retryInterval);}_0x20307c++;}if(_0x20307c==0x0)return _0x20313b;if(_0x20307c>=maxRetries)throw _0x2d8563;else return logger[_0x487bac(0x15a)](_0x487bac(0x1af)+_0x20307c+_0x487bac(0x214)),_0x20313b;}function formatResult(_0x3d5e96,_0x58197b){const _0x25d78b=_0xefa3fc;return parseFloat(_0x3d5e96[_0x25d78b(0xd1)](_0x58197b));}function formatResultTruncate(_0x7d88fd,_0x3e3a52){const _0x465fdf=_0xefa3fc;let _0x53d654=formatResultString(_0x7d88fd,0xa),_0x434cf8=_0x53d654['indexOf']('.');return _0x434cf8!=-0x1&&(_0x53d654=_0x53d654[_0x465fdf(0x124)](0x0,_0x434cf8+_0x3e3a52+0x1)),Number(_0x53d654);}function formatResultString(_0x3a0ac8,_0x5d5123){const _0x3b3192=_0xefa3fc;let _0x26816b;if(!(''+_0x3a0ac8)['includes']('e'))_0x26816b=+(Math[_0x3b3192(0x120)](_0x3a0ac8+'e+'+_0x5d5123)+'e-'+_0x5d5123);else{let _0x3c3f89=(''+_0x3a0ac8)[_0x3b3192(0xd9)]('e'),_0x5019d5='';+_0x3c3f89[0x1]+_0x5d5123>0x0&&(_0x5019d5='+'),_0x26816b=+(Math[_0x3b3192(0x120)](+_0x3c3f89[0x0]+'e'+_0x5019d5+(+_0x3c3f89[0x1]+_0x5d5123))+'e-'+_0x5d5123);}return Number(_0x26816b)[_0x3b3192(0xd1)](_0x5d5123);}function getServerTime(){const _0x6f1375=_0xefa3fc,_0xd054f8=new Date();return _0xd054f8['getFullYear']()+'/'+(_0xd054f8[_0x6f1375(0x138)]()+0x1)[_0x6f1375(0xe6)]()[_0x6f1375(0x160)](0x2,'0')+'/'+_0xd054f8[_0x6f1375(0x1cb)]()['toString']()[_0x6f1375(0x160)](0x2,'0')+'\x20'+_0xd054f8[_0x6f1375(0x7d)]()['toString']()[_0x6f1375(0x160)](0x2,'0')+':'+_0xd054f8[_0x6f1375(0x217)]()[_0x6f1375(0xe6)]()[_0x6f1375(0x160)](0x2,'0')+':'+_0xd054f8[_0x6f1375(0x200)]()[_0x6f1375(0xe6)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4def2e=_0xefa3fc,_0x33fe87=shiftedTime();return _0x33fe87[_0x4def2e(0x1ea)]()+'/'+(_0x33fe87[_0x4def2e(0x138)]()+0x1)[_0x4def2e(0xe6)]()[_0x4def2e(0x160)](0x2,'0')+'/'+_0x33fe87[_0x4def2e(0x1cb)]()['toString']()[_0x4def2e(0x160)](0x2,'0')+'\x20'+_0x33fe87[_0x4def2e(0x7d)]()[_0x4def2e(0xe6)]()[_0x4def2e(0x160)](0x2,'0')+':'+_0x33fe87[_0x4def2e(0x217)]()[_0x4def2e(0xe6)]()[_0x4def2e(0x160)](0x2,'0')+':'+_0x33fe87['getSeconds']()['toString']()[_0x4def2e(0x160)](0x2,'0');}function getDate(){const _0x4d546e=_0xefa3fc,_0x59e9ce=shiftedTime();return _0x59e9ce[_0x4d546e(0x1ea)]()+'/'+(_0x59e9ce[_0x4d546e(0x138)]()+0x1)[_0x4d546e(0xe6)]()[_0x4d546e(0x160)](0x2,'0')+'/'+_0x59e9ce[_0x4d546e(0x1cb)]()[_0x4d546e(0xe6)]()[_0x4d546e(0x160)](0x2,'0');}function getHour(){const _0x5eac20=_0xefa3fc,_0x809d0a=shiftedTime();return _0x809d0a[_0x5eac20(0x7d)]()[_0x5eac20(0xe6)]()['padStart'](0x2,'0');}function sleep(_0xaa211c){return new Promise(_0x16dc5b=>setTimeout(_0x16dc5b,_0xaa211c));}function shiftedTime(){const _0x2a1be6=_0xefa3fc,_0xfc33b6=new Date();let _0x3983af=_0xfc33b6;if(config&&config['timeshift']!==0x0)_0x3983af=fns[_0x2a1be6(0x1fd)](_0xfc33b6,{'hours':config[_0x2a1be6(0xff)]});return _0x3983af;}function timer(_0x484950){const _0x137552=_0xefa3fc,_0x24c571=new Date();!lasttime?console['log'](getTimeStamp()+_0x137552(0xd7),_0x484950,_0x24c571):console[_0x137552(0xc6)](getTimeStamp()+':\x20timer\x20>',_0x484950,(_0x24c571-lasttime)/0x3e8),lasttime=_0x24c571;}