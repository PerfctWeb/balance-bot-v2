const _0x584733=_0xdc1f;(function(_0x48e886,_0x158be2){const _0x11d99f=_0xdc1f,_0x33b1cf=_0x48e886();while(!![]){try{const _0x54d713=parseInt(_0x11d99f(0x29e))/0x1*(parseInt(_0x11d99f(0x284))/0x2)+parseInt(_0x11d99f(0x28b))/0x3*(-parseInt(_0x11d99f(0x2a2))/0x4)+parseInt(_0x11d99f(0x215))/0x5+-parseInt(_0x11d99f(0x1fd))/0x6+-parseInt(_0x11d99f(0x2b9))/0x7*(parseInt(_0x11d99f(0x21d))/0x8)+-parseInt(_0x11d99f(0x269))/0x9*(-parseInt(_0x11d99f(0x285))/0xa)+parseInt(_0x11d99f(0x21f))/0xb;if(_0x54d713===_0x158be2)break;else _0x33b1cf['push'](_0x33b1cf['shift']());}catch(_0x19146d){_0x33b1cf['push'](_0x33b1cf['shift']());}}}(_0x3f9f,0x20383));const _0x278b9a=function(){let _0x350566=!![];return function(_0x54ef9a,_0x25b4cf){const _0x4576dc=_0x350566?function(){const _0x19fbf1=_0xdc1f;if(_0x25b4cf){const _0x170dc9=_0x25b4cf[_0x19fbf1(0x21e)](_0x54ef9a,arguments);return _0x25b4cf=null,_0x170dc9;}}:function(){};return _0x350566=![],_0x4576dc;};}(),_0x1b13ea=_0x278b9a(this,function(){const _0x1cdf42=_0xdc1f;return _0x1b13ea['toString']()[_0x1cdf42(0x1bc)](_0x1cdf42(0x212))[_0x1cdf42(0x24c)]()[_0x1cdf42(0x248)](_0x1b13ea)['search'](_0x1cdf42(0x212));});_0x1b13ea();'use strict';const ccxt=require(_0x584733(0x203)),low=require('lowdb'),FileSync=require(_0x584733(0x27e)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x584733(0x1d6)),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global[_0x584733(0x22e)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x584733(0x23e)],botID=process[_0x584733(0x2b3)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x584733(0x25f)](botID))return console[_0x584733(0x256)](_0x584733(0x2b0)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x584733(0x1ec)](0x1);const userID=process[_0x584733(0x2b3)][0x3]||'',configpath=userID?_0x584733(0x292)+userID+'/':_0x584733(0x292);!fs[_0x584733(0x21c)](configpath)&&fs[_0x584733(0x295)](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x584733(0x27a)+botID+_0x584733(0x225),performancefile=configpath+_0x584733(0x27a)+botID+_0x584733(0x205),coinresultsfile=configpath+_0x584733(0x27a)+botID+'-results.json',settingsfile=configpath+_0x584733(0x1d5),securefile=configpath+_0x584733(0x1cf),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x584733(0x23d)]({'logs':[]})[_0x584733(0x207)]();function _0xdc1f(_0x4ab8a5,_0x48861b){const _0x23a77a=_0x3f9f();return _0xdc1f=function(_0x1b13ea,_0x278b9a){_0x1b13ea=_0x1b13ea-0x1b7;let _0x3f9f56=_0x23a77a[_0x1b13ea];return _0x3f9f56;},_0xdc1f(_0x4ab8a5,_0x48861b);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x584733(0x23d)]({'data':[]})[_0x584733(0x207)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x584733(0x23d)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x584733(0x207)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x584733(0x28a),'symbol':_0x584733(0x1d4)},'usd':{'coin':_0x584733(0x29c),'symbol':_0x584733(0x20c)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x449c5a)=>{},'debug':(..._0x1cbe24)=>{},'notice':(..._0x5840e2)=>{},'info':(..._0x5b8640)=>{},'warning':(..._0x3f2897)=>{},'error':async function(..._0xef47ff){const _0x1dd444=_0x584733,_0x1c134d=new Date()[_0x1dd444(0x1e6)]();if(!lastErrorShown||_0x1c134d-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1dd444(0x1e6)](),logHistory(_0x1dd444(0x200),_0x1dd444(0x1e8)+consecutivePauses+_0x1dd444(0x26e));let _0x16dd03='';if(_0xef47ff[0x0])_0x16dd03+=_0xef47ff[0x0];if(_0xef47ff[0x1]&&_0xef47ff[0x1][_0x1dd444(0x200)]&&_0xef47ff[0x1]['error']['message'])_0x16dd03+=_0x1dd444(0x1b8)+_0xef47ff[0x1][_0x1dd444(0x200)][_0x1dd444(0x255)];logging('WebSockets('+consecutivePauses+_0x1dd444(0x1fa),''+_0x16dd03),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x584733(0x264)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x584733(0x273)]&&updateTimeshift(settings[_0x584733(0x273)]);process[_0x584733(0x1c6)]({'started':_0x584733(0x29b)}),initializeProcessListeners();function proxyEmit(_0x1cf491,_0x15df92=null){const _0x2d5579=_0x584733;process[_0x2d5579(0x1c6)]({'function':_0x1cf491,'args':_0x15df92});}function initializeProcessListeners(){const _0xd3153a=_0x584733;process['on'](_0xd3153a(0x255),_0x26a978=>{const _0x4dee33=_0xd3153a;switch(Object[_0x4dee33(0x1dc)](_0x26a978)[0x0]){case _0x4dee33(0x273):_0x26a978[_0x4dee33(0x273)]!=undefined&&(settings['timeshift']=_0x26a978[_0x4dee33(0x273)],updateTimeshift(settings[_0x4dee33(0x273)]));break;case'function':switch(_0x26a978[_0x4dee33(0x258)]){case _0x4dee33(0x1f3):initclient();break;case _0x4dee33(0x26c):emitHistory(_0x26a978[_0x4dee33(0x278)]);break;case _0x4dee33(0x1ba):getPortfolio(_0x26a978[_0x4dee33(0x278)]);break;case _0x4dee33(0x236):storeConfiguration(_0x26a978['args']);break;case _0x4dee33(0x22c):storeHeadless(_0x26a978['args']);break;case _0x4dee33(0x259):getStartingBalances();break;case _0x4dee33(0x246):placeOrder(_0x26a978[_0x4dee33(0x278)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x365471=_0x584733;if(pidBalances)clearTimeout(pidBalances);if(config[_0x365471(0x276)]!=''){await initExchange(config[_0x365471(0x276)],config[_0x365471(0x1e1)]);let _0x1d14e0=await loadSymbols();_0x1d14e0&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x223802,_0x45f9a2){const _0x1834db=_0x584733,_0x4b601d=ccxt[config['exchange']];let _0x330e0c;switch(config['exchange']){case _0x1834db(0x1d6):_0x330e0c=_0x1834db(0x287);break;case _0x1834db(0x1e2):_0x330e0c=_0x1834db(0x22b);break;default:_0x330e0c=_0x1834db(0x287);}exchange=new _0x4b601d({'apiKey':_0x223802,'secret':_0x45f9a2,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x223802,'api_secret':_0x45f9a2,'beautify':!![],'wsUrl':_0x330e0c},logger),config[_0x1834db(0x279)]==_0x1834db(0x1e2)&&(stablecoins={'eur':{'coin':_0x1834db(0x2bd),'symbol':_0x1834db(0x2ba)},'usd':{'coin':'BTCUSDT','symbol':_0x1834db(0x20c)}});}function _0x3f9f(){const _0x680f14=['startprice','order','fromCodePoint','apiSecret','binanceus','success','balances','orderType','getTime','entries','WebSockets(','realized','coins','find','exit','data','LIMIT','BNB','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','enabled','headless','initclient','valid','Executed\x20','ordertype','add','limits','ExchangeNotAvailable',')\x20|\x20Error\x20details:\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','event-history','520668JjIgbQ','min','recreate','error','assign','excluded','ccxt','includes','-performance.json','accumulatedQuantity','write','limit-high','differenceInCalendarDays','symbols','loadMarkets','BTC/USDT','target','Order:\x20','initws()','privateKey','split','(((.+)+)+)+$','padStart','API-key\x20format\x20invalid','363900ijXhwy','getCoins()','configuration','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','timeout','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','createOrder','existsSync','29368czhTnw','apply','84942WNSTNg','symbol','cancelOrder','formattedMessage','parseISO','botID','-events.json','sell','slice','\x20>\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','cancel','wss://stream.binance.us:9443','storeHeadless','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','ticker','basecoin','\x20hour','HOT/EUR','Limit\x20(high-margin)','value','orderId','last','storeConfiguration','threshold','RequestTimeout','InsufficientFunds','buy','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','asset','defaults','version','replace','event','parse','Binance\x20API\x20secret\x20is\x20invalid','Order\x20amount\x20is\x20invalid:\x20','length','availableBalance','placeOrder','Order(s)\x20validated\x20-\x20balancing\x20resumed','constructor','executionReport','kline','Performance\x20recreation\x20completed\x20successfully','toString','configuration-stored','eur','getFullYear','getMonth','delta','\x20minutes\x20-\x20balancing\x20resumed','filter','coinamount','message','log','starting-balances','function','getStartingBalances','\x20|\x20Unknown\x20error\x20occured','buys','Market','sells','performance','test','\x20order:\x20','secure','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','price','RSA-OAEP','botname','Order\x20filled:\x20','market','format','1431AglCCX','fee','distribution','emitHistory','Order(s)\x20not\x20validated\x20after\x20',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','showname','has','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','timeshift','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','sort','apiKey','fetchOrders','args','exchange','bot-','************','Unfilled\x20order(s)\x20canceled\x20after\x20','map','lowdb/adapters/FileSync','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','fetchBalance','outboundAccountPosition','eventType','emojisell','478892EpONkB','9380GzCYLT','ask','wss://stream.binance.com:9443','OrderNotFound','fetchOHLCV','BTCEUR','39615rGjouA','getMinutes','time','timestamp','get','BTC','closeWs','./config/','FILLED','toLowerCase','mkdirSync','MIN_NOTIONAL','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','breakeven','BUSD','settings','running','BTCUSDT','date','1oQSHAr','total','datetime','number','8dFUYGN','abs','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','fetchTickers','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','\x20|\x20Error\x20details:\x20','reverse','type','side','userData','USDC','startdate','orderStatus','Invalid\x20quantity','Error:\x20Invalid\x20argument\x20','yyyy/MM/dd','limit-low','argv','sortBy','decrypt','filled','splice','getPortfolio()','427VMGOok','BTC/BUSD','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','DAI/','BTCBUSD','forEach','getDate','cooldown','push','round','\x20-\x20','Bot\x20','getPortfolio','fees','search','coin','loadSymbols()','startnumber','usd','bot','logs','portfolio','AuthenticationError',':\x20Bot\x20','send','page','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','remainingSymbols','limit','remove','restart','wsKey','USDT','bb-secure.json','amount','getFiat()','cost','emojibuy','BTC/EUR','bb-settings.json','binance','milliseconds','kill','reduce','reconnected','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','keys','trade'];_0x3f9f=function(){return _0x680f14;};return _0x3f9f();}async function loadSymbols(){const _0x3f4a19=_0x584733;let _0x59dfce;try{markets=await exchange[_0x3f4a19(0x20b)]();const _0x4fb7da=[_0x3f4a19(0x2bc),'HOT/BTC',_0x3f4a19(0x231)];allSymbols=exchange[_0x3f4a19(0x20a)][_0x3f4a19(0x253)](_0x10b882=>{const _0x277da1=_0x3f4a19;let _0x27e906=![];return _0x4fb7da[_0x277da1(0x2be)](_0x30abc5=>{const _0x1b97d6=_0x277da1;if(_0x10b882[_0x1b97d6(0x204)](_0x30abc5))_0x27e906=!![];}),!_0x27e906;}),_0x59dfce=!![];}catch(_0x2656f3){await handleError(_0x2656f3,_0x3f4a19(0x1be)),_0x59dfce=![];}return _0x59dfce;}async function initbot(){const _0x265a3f=_0x584733;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x182ade=dbCoinResults[_0x265a3f(0x28f)]('coins')[_0x265a3f(0x233)]();if(_0x182ade['length']==0x0)await resetCoinResults();}async function initclient(){const _0x50cefb=_0x584733;proxyEmit(_0x50cefb(0x217),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x2e5079=_0x584733;wsinitialized=![];ws1&&(ws1[_0x2e5079(0x2be)](_0x536386=>{try{wsClient['closeWs'](_0x536386);}catch(_0x1fc390){}}),ws1=[]);if(ws2){try{wsClient[_0x2e5079(0x291)](ws2);}catch(_0x46e678){}ws2=null;}}async function initws(){const _0x118b8a=_0x584733;cleanws();let _0x3714d6=[];currentCoins['forEach'](_0x3a8b92=>{const _0x50dca0=_0xdc1f;if(_0x3a8b92['coin']!=config[_0x50dca0(0x22f)])_0x3714d6[_0x50dca0(0x2c1)](noslash(_0x3a8b92[_0x50dca0(0x220)]));});if(!_0x3714d6[_0x118b8a(0x204)](stablecoins[_0x118b8a(0x24e)][_0x118b8a(0x1bd)]))_0x3714d6[_0x118b8a(0x2c1)](stablecoins[_0x118b8a(0x24e)][_0x118b8a(0x1bd)]);if(!_0x3714d6[_0x118b8a(0x204)](stablecoins[_0x118b8a(0x1c0)][_0x118b8a(0x1bd)]))_0x3714d6['push'](stablecoins['usd'][_0x118b8a(0x1bd)]);if(!_0x3714d6[_0x118b8a(0x204)]('BNB'+config['basecoin']))_0x3714d6[_0x118b8a(0x2c1)](_0x118b8a(0x1ef)+config[_0x118b8a(0x22f)]);try{_0x3714d6[_0x118b8a(0x2be)]((_0x32a631,_0x1085fd)=>{ws1[_0x1085fd]=wsClient['subscribeSpotKline'](_0x32a631,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x118b8a(0x222),_0x256598=>{const _0x2e601b=_0x118b8a;if(!Array['isArray'](_0x256598)&&!_0x256598[_0x2e601b(0x1cd)][_0x2e601b(0x204)](_0x2e601b(0x2ab))){if(_0x256598[_0x2e601b(0x282)]===_0x2e601b(0x24a)){global[_0x2e601b(0x22e)][_0x256598['kline']['symbol']]=_0x256598[_0x2e601b(0x24a)]['close'];return;}}else{if(!Array['isArray'](_0x256598)&&_0x256598[_0x2e601b(0x1cd)]['includes'](_0x2e601b(0x2ab))){if(_0x256598['wsMarket'][_0x2e601b(0x204)]('spot')){updateNumberCoins(_0x256598);return;}}}}),wsClient['on'](_0x118b8a(0x1da),async _0x2edbbe=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x2abc1e){await handleError(_0x2abc1e,_0x118b8a(0x20f));}let _0x523382,_0x31c022=0x0;loading[_0x118b8a(0x1c9)]=[];let _0x15df4f=0x0;currentCoins[_0x118b8a(0x2be)](_0x435739=>{const _0x31d179=_0x118b8a;if(_0x435739[_0x31d179(0x1bd)]!=config[_0x31d179(0x22f)])loading[_0x31d179(0x1c9)][_0x31d179(0x2c1)](_0x435739[_0x31d179(0x220)]);}),loadingCanceled=![];while(_0x523382!=currentCoins['length']-0x1){_0x523382=0x0,currentCoins[_0x118b8a(0x2be)](_0x3d8eb7=>{const _0x472b9e=_0x118b8a;_0x3d8eb7[_0x472b9e(0x1bd)]!=config[_0x472b9e(0x22f)]&&global[_0x472b9e(0x22e)][noslash(_0x3d8eb7[_0x472b9e(0x220)])]&&(loading[_0x472b9e(0x1c9)]=loading['remainingSymbols'][_0x472b9e(0x253)](_0x18ec8c=>_0x18ec8c!=_0x3d8eb7['symbol']),_0x523382++);}),loading['progress']=Math[_0x118b8a(0x1b7)](_0x523382/(currentCoins['length']-0x1)*0x64);_0x15df4f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x118b8a(0x22a)]=!![],emitLoadingProgress();break;}else _0x523382!=_0x31c022&&(_0x31c022=_0x523382,emitLoadingProgress()),_0x15df4f++,await sleep(0xc8);}if(_0x523382==currentCoins[_0x118b8a(0x244)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x53563a=_0x584733;let _0x2cc0bd=0x0,_0x51bd0d=0x0;try{_0x2cc0bd=global[_0x53563a(0x22e)][stablecoins[_0x53563a(0x24e)][_0x53563a(0x1bd)]],_0x51bd0d=global[_0x53563a(0x22e)][stablecoins[_0x53563a(0x1c0)][_0x53563a(0x1bd)]];}catch(_0x32e4a8){await handleError(_0x32e4a8,_0x53563a(0x1d1));}return{'eur':Number(_0x2cc0bd),'usd':Number(_0x51bd0d)};}async function setStartDatePerformance(_0x36fe7b){const _0x25ba17=_0x584733,_0x2026b0=fns[_0x25ba17(0x268)](new Date(_0x36fe7b[_0x25ba17(0x2ad)]),_0x25ba17(0x2b1));let _0x5c0578=[];_0x5c0578[stablecoins[_0x25ba17(0x24e)][_0x25ba17(0x1bd)]]=await getCloses(stablecoins[_0x25ba17(0x24e)]['symbol'],new Date(_0x36fe7b[_0x25ba17(0x2ad)]),0x1),_0x5c0578[stablecoins[_0x25ba17(0x1c0)][_0x25ba17(0x1bd)]]=await getCloses(stablecoins[_0x25ba17(0x1c0)][_0x25ba17(0x220)],new Date(_0x36fe7b[_0x25ba17(0x2ad)]),0x1);let _0x3b68ae,_0x9571da=[];_0x36fe7b[_0x25ba17(0x1c3)][_0x25ba17(0x2be)](_0x5dc2c5=>{const _0x5c82d3=_0x25ba17;!_0x5dc2c5[_0x5c82d3(0x202)]&&_0x9571da[_0x5c82d3(0x2c1)]({'coin':_0x5dc2c5['coin'],'number':_0x5dc2c5[_0x5c82d3(0x1bf)],'price':_0x5dc2c5[_0x5c82d3(0x1de)]});}),_0x3b68ae={'date':_0x2026b0,'eur':_0x5c0578[stablecoins[_0x25ba17(0x24e)][_0x25ba17(0x1bd)]][0x0],'usd':_0x5c0578[stablecoins[_0x25ba17(0x1c0)][_0x25ba17(0x1bd)]][0x0],'coins':_0x9571da};let _0x373831=dbPerformance[_0x25ba17(0x28f)](_0x25ba17(0x1ed))[_0x25ba17(0x1eb)]({'date':_0x2026b0})['value']();_0x373831?dbPerformance[_0x25ba17(0x28f)](_0x25ba17(0x1ed))[_0x25ba17(0x1eb)]({'date':_0x2026b0})['assign'](_0x3b68ae)['write']():dbPerformance['get'](_0x25ba17(0x1ed))[_0x25ba17(0x2c1)](_0x3b68ae)[_0x25ba17(0x207)](),_0x373831=dbPerformance[_0x25ba17(0x28f)](_0x25ba17(0x1ed))[_0x25ba17(0x2b4)](_0x25ba17(0x29d))[_0x25ba17(0x233)](),_0x373831[_0x25ba17(0x2be)](_0x4d9cb6=>{const _0x29cc14=_0x25ba17;_0x4d9cb6[_0x29cc14(0x29d)]<_0x2026b0&&dbPerformance[_0x29cc14(0x28f)](_0x29cc14(0x1ed))[_0x29cc14(0x1cb)]({'date':_0x4d9cb6[_0x29cc14(0x29d)]})[_0x29cc14(0x207)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x436c0f){const _0x2aeb75=_0x584733;let _0x5971ad,_0x1de75b=[];logHistory('success',_0x2aeb75(0x2bb)),_0x436c0f[_0x2aeb75(0x1c3)][_0x2aeb75(0x2be)](_0x55a2c2=>{const _0x3097cd=_0x2aeb75;if(_0x55a2c2[_0x3097cd(0x1bd)]!=config['basecoin']&&!_0x55a2c2[_0x3097cd(0x202)])_0x1de75b[_0x3097cd(0x2c1)]({'coin':_0x55a2c2[_0x3097cd(0x1bd)],'symbol':_0x55a2c2[_0x3097cd(0x220)]});});let _0x8b7991=[];try{const _0x40105a=fns[_0x2aeb75(0x268)](fns[_0x2aeb75(0x223)](_0x436c0f[_0x2aeb75(0x2ad)][_0x2aeb75(0x23f)](/\//g,'-')),_0x2aeb75(0x272));for(const _0x2252bb of _0x1de75b){if(_0x2252bb[_0x2aeb75(0x1bd)]!=config['basecoin'])_0x5971ad=await exchange[_0x2aeb75(0x277)](_0x2252bb['symbol'],Date['parse'](_0x40105a));_0x5971ad[_0x2aeb75(0x2be)](_0x44cc78=>{const _0x1debec=_0x2aeb75,_0x537ec9=_0x2252bb[_0x1debec(0x220)][_0x1debec(0x204)](config[_0x1debec(0x22f)]+'/'),_0x4e46d2=fns[_0x1debec(0x268)](fns[_0x1debec(0x223)](_0x44cc78[_0x1debec(0x2a0)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x44f0cf=fns['format'](fns['parseISO'](_0x44cc78[_0x1debec(0x2a0)]),_0x1debec(0x2b1));let _0x40e1e2;if(_0x44cc78['side']==_0x1debec(0x23a)&&_0x537ec9==![])_0x40e1e2=_0x44cc78[_0x1debec(0x1d0)];if(_0x44cc78[_0x1debec(0x2aa)]==_0x1debec(0x23a)&&_0x537ec9==!![])_0x40e1e2=-_0x44cc78[_0x1debec(0x1d0)]*_0x44cc78[_0x1debec(0x263)];if(_0x44cc78[_0x1debec(0x2aa)]=='sell'&&_0x537ec9==![])_0x40e1e2=-_0x44cc78[_0x1debec(0x1d0)];if(_0x44cc78['side']==_0x1debec(0x226)&&_0x537ec9==!![])_0x40e1e2=_0x44cc78[_0x1debec(0x1d0)]*_0x44cc78['price'];_0x8b7991[_0x1debec(0x2c1)]({'timestamp':_0x4e46d2,'date':_0x44f0cf,'coin':_0x2252bb[_0x1debec(0x1bd)],'symbol':_0x2252bb[_0x1debec(0x220)],'type':_0x44cc78[_0x1debec(0x2a9)],'side':_0x44cc78[_0x1debec(0x2aa)],'reverse':_0x537ec9,'amount':formatResult(_0x44cc78['filled'],0x8),'filled':formatResult(_0x44cc78[_0x1debec(0x2b6)],0x8),'coinamount':formatResult(_0x40e1e2,0x8),'price':formatResult(_0x44cc78['price'],0x8)});let _0x214da5;if(_0x44cc78[_0x1debec(0x2aa)]==_0x1debec(0x23a)&&_0x537ec9==![])_0x214da5=-_0x44cc78[_0x1debec(0x1d0)]*_0x44cc78['price'];if(_0x44cc78[_0x1debec(0x2aa)]==_0x1debec(0x23a)&&_0x537ec9==!![])_0x214da5=_0x44cc78[_0x1debec(0x1d0)];if(_0x44cc78[_0x1debec(0x2aa)]==_0x1debec(0x226)&&_0x537ec9==![])_0x214da5=_0x44cc78['amount']*_0x44cc78[_0x1debec(0x263)];if(_0x44cc78[_0x1debec(0x2aa)]==_0x1debec(0x226)&&_0x537ec9==!![])_0x214da5=-_0x44cc78[_0x1debec(0x1d0)];_0x8b7991[_0x1debec(0x2c1)]({'date':_0x44f0cf,'coin':config[_0x1debec(0x22f)],'coinamount':formatResult(_0x214da5,0x8)});});}_0x8b7991[_0x2aeb75(0x275)]((_0x5351b9,_0x2f9a53)=>_0x5351b9[_0x2aeb75(0x28e)]>_0x2f9a53[_0x2aeb75(0x28e)]?0x1:_0x2f9a53[_0x2aeb75(0x28e)]>_0x5351b9[_0x2aeb75(0x28e)]?-0x1:0x0),dbLogs[_0x2aeb75(0x28f)]('logs')['remove']()[_0x2aeb75(0x207)](),_0x8b7991[_0x2aeb75(0x2be)](_0x3157ff=>{const _0x511fe3=_0x2aeb75;let _0x1c54f3;_0x3157ff[_0x511fe3(0x1bd)]!=config[_0x511fe3(0x22f)]&&(_0x1c54f3={'time':_0x3157ff['timestamp'],'type':_0x511fe3(0x1df),'event':_0x511fe3(0x20e)+_0x3157ff[_0x511fe3(0x220)]+'\x20'+_0x3157ff[_0x511fe3(0x2aa)]+'\x20#'+_0x3157ff[_0x511fe3(0x1d0)]+'\x20@'+_0x3157ff[_0x511fe3(0x263)]},dbLogs[_0x511fe3(0x28f)](_0x511fe3(0x1c2))['push'](_0x1c54f3)['write']());});const _0x500145=fns['eachDayOfInterval']({'start':new Date(_0x436c0f[_0x2aeb75(0x2ad)]),'end':new Date()})[_0x2aeb75(0x27d)](_0x5461af=>fns['format'](_0x5461af,'yyyy/MM/dd'));let _0x47772e=[];_0x436c0f['portfolio'][_0x2aeb75(0x2be)](_0x110552=>{const _0x38af15=_0x2aeb75;if(!_0x110552['excluded']){_0x47772e[_0x110552[_0x38af15(0x1bd)]]=[];let _0x3eb5b8=_0x110552[_0x38af15(0x1bf)];_0x500145['forEach']((_0x939bb6,_0x5e3835)=>{const _0x52f1b6=_0x38af15;let _0x778077=_0x8b7991['filter'](_0x9b21ca=>_0x9b21ca[_0x52f1b6(0x1bd)]==_0x110552[_0x52f1b6(0x1bd)]&&_0x9b21ca[_0x52f1b6(0x29d)]==_0x939bb6);if(_0x778077[_0x52f1b6(0x244)]!=0x0){let _0x298511=_0x778077[_0x52f1b6(0x1d9)]((_0x30bce8,_0x482678)=>{const _0x1e4d9f=_0x52f1b6;return _0x30bce8+=_0x482678[_0x1e4d9f(0x254)],_0x30bce8;},0x0);_0x3eb5b8+=_0x298511;}_0x47772e[_0x110552[_0x52f1b6(0x1bd)]][_0x939bb6]=_0x3eb5b8;});}});const _0x274e2b=[..._0x1de75b];_0x274e2b['push']({'coin':stablecoins[_0x2aeb75(0x24e)][_0x2aeb75(0x1bd)],'symbol':stablecoins[_0x2aeb75(0x24e)]['symbol']}),_0x274e2b['push']({'coin':stablecoins[_0x2aeb75(0x1c0)]['coin'],'symbol':stablecoins[_0x2aeb75(0x1c0)]['symbol']});let _0x236904=[];for(const _0x17345b of _0x274e2b){_0x236904[_0x17345b[_0x2aeb75(0x1bd)]]=await getCloses(_0x17345b[_0x2aeb75(0x220)],new Date(_0x436c0f[_0x2aeb75(0x2ad)]));}dbPerformance[_0x2aeb75(0x28f)](_0x2aeb75(0x1ed))[_0x2aeb75(0x1cb)]()[_0x2aeb75(0x207)](),_0x500145[_0x2aeb75(0x2be)]((_0x3b7df0,_0x197d4a)=>{const _0x1d4855=_0x2aeb75;let _0x5ac1bd,_0x13a28b=[];_0x197d4a==0x0?(_0x436c0f[_0x1d4855(0x1c3)]['forEach'](_0x261c16=>{const _0x594f55=_0x1d4855;!_0x261c16[_0x594f55(0x202)]&&_0x13a28b[_0x594f55(0x2c1)]({'coin':_0x261c16['coin'],'number':_0x261c16[_0x594f55(0x1bf)],'price':_0x261c16[_0x594f55(0x1de)]});}),_0x5ac1bd={'date':_0x3b7df0,'eur':_0x236904[stablecoins[_0x1d4855(0x24e)][_0x1d4855(0x1bd)]][_0x197d4a],'usd':_0x236904[stablecoins[_0x1d4855(0x1c0)][_0x1d4855(0x1bd)]][_0x197d4a],'coins':_0x13a28b}):(_0x436c0f[_0x1d4855(0x1c3)]['forEach'](_0x10fa6f=>{const _0x578253=_0x1d4855;!_0x10fa6f['excluded']&&_0x13a28b[_0x578253(0x2c1)]({'coin':_0x10fa6f[_0x578253(0x1bd)],'number':_0x47772e[_0x10fa6f[_0x578253(0x1bd)]][_0x3b7df0],'price':_0x10fa6f[_0x578253(0x1bd)]==config[_0x578253(0x22f)]?0x1:_0x236904[_0x10fa6f[_0x578253(0x1bd)]][_0x197d4a]});}),_0x5ac1bd={'date':_0x3b7df0,'eur':_0x236904[stablecoins['eur'][_0x1d4855(0x1bd)]][_0x197d4a],'usd':_0x236904[stablecoins[_0x1d4855(0x1c0)][_0x1d4855(0x1bd)]][_0x197d4a],'coins':_0x13a28b}),dbPerformance[_0x1d4855(0x28f)]('data')[_0x1d4855(0x2c1)](_0x5ac1bd)[_0x1d4855(0x207)]();}),emitPerformance(),await resetCoinResults();for(let _0x2ec30b of _0x8b7991){_0x2ec30b['coin']!=config['basecoin']&&await updateCoinResults(_0x2ec30b);}logHistory(_0x2aeb75(0x1e3),_0x2aeb75(0x24b));}catch(_0x1861da){await handleError(_0x1861da,'recreateHistory()');}}async function getCloses(_0x271023,_0x47fc64,_0x14822e=undefined){const _0x46a7e8=_0x584733,_0x4ae32c='1d';let _0x13e7ef,_0x586958;const _0x20bf8f=fns[_0x46a7e8(0x209)](new Date(),_0x47fc64)+0x1;try{const _0x185440=exchange[_0x46a7e8(0x1d7)]()-_0x20bf8f*0x18*0xe10*0x3e8;_0x13e7ef=await exchange[_0x46a7e8(0x289)](_0x271023,_0x4ae32c,_0x185440,_0x14822e),_0x586958=await exchange['fetchTickers'](_0x271023);}catch(_0x38e9f1){await handleError(_0x38e9f1,'getCloses()');}let _0xafa945=ohlcvToCloses(_0x13e7ef);return _0xafa945[_0x46a7e8(0x2c1)](_0x586958[_0x271023]['last']),_0xafa945;}function ohlcvToCloses(_0x264244){const _0x4db2f8=_0x584733;let _0x4fd0fb=[];return _0x264244[_0x4db2f8(0x2be)](function(_0x3851db){const _0x4620ef=_0x4db2f8;_0x4fd0fb[_0x4620ef(0x2c1)](_0x3851db[0x4]);}),_0x4fd0fb;}function getConfiguration(_0x3fc382){const _0x3764d7=_0x584733;let _0xd6f427=dbConfig[_0x3764d7(0x28f)](_0x3764d7(0x1c1))[_0x3764d7(0x1eb)]({'botID':_0x3fc382})['value']();if(_0xd6f427){let _0x509cc2=![];!_0xd6f427[_0x3764d7(0x279)]&&(_0xd6f427={..._0xd6f427,'exchange':'binance'},_0x509cc2=!![]),!_0xd6f427[_0x3764d7(0x22f)]&&(_0xd6f427={..._0xd6f427,'basecoin':_0x3764d7(0x290)},_0x509cc2=!![]),!_0xd6f427[_0x3764d7(0x1f6)]&&(_0xd6f427={..._0xd6f427,'ordertype':_0x3764d7(0x267)},_0x509cc2=!![]),!_0xd6f427['timeout']&&(_0xd6f427={..._0xd6f427,'timeout':0x14},_0x509cc2=!![]),!_0xd6f427[_0x3764d7(0x1d3)]&&(_0xd6f427={..._0xd6f427,'emojibuy':''},_0x509cc2=!![]),!_0xd6f427[_0x3764d7(0x283)]&&(_0xd6f427={..._0xd6f427,'emojisell':''},_0x509cc2=!![]),!_0xd6f427[_0x3764d7(0x26f)]&&(_0xd6f427={..._0xd6f427,'showname':![]},_0x509cc2=!![]),_0x509cc2&&(_0xd6f427={'botID':_0xd6f427[_0x3764d7(0x224)],'exchange':_0xd6f427[_0x3764d7(0x279)],'apiKey':_0xd6f427[_0x3764d7(0x276)],'apiSecret':_0xd6f427[_0x3764d7(0x1e1)],'basecoin':_0xd6f427[_0x3764d7(0x22f)],'botname':_0xd6f427[_0x3764d7(0x265)],'showname':_0xd6f427[_0x3764d7(0x26f)],'threshold':_0xd6f427['threshold'],'ordertype':_0xd6f427[_0x3764d7(0x1f6)],'timeout':_0xd6f427[_0x3764d7(0x219)],'startdate':_0xd6f427[_0x3764d7(0x2ad)],'recreate':_0xd6f427['recreate'],'timeshift':_0xd6f427[_0x3764d7(0x273)],'headless':_0xd6f427['headless'],'cooldown':_0xd6f427[_0x3764d7(0x2c0)],'emojibuy':_0xd6f427['emojibuy'],'emojisell':_0xd6f427[_0x3764d7(0x283)],'portfolio':_0xd6f427['portfolio']},dbConfig[_0x3764d7(0x28f)](_0x3764d7(0x1c1))['remove']()['write'](),dbConfig[_0x3764d7(0x28f)](_0x3764d7(0x1c1))[_0x3764d7(0x2c1)](_0xd6f427)['write']());}else _0xd6f427={'botID':_0x3fc382,'exchange':_0x3764d7(0x1d6),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x3764d7(0x1b9)+_0x3fc382,'showname':![],'threshold':'3','ordertype':_0x3764d7(0x267),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0xd6f427;}function emittedConfiguration(){const _0x38ab38=_0x584733;let _0x411813;return config[_0x38ab38(0x276)]==''?_0x411813=config:_0x411813={...config,'apiKey':_0x38ab38(0x27b),'apiSecret':_0x38ab38(0x27b)},_0x411813;}function getSettings(){const _0x188e38=_0x584733;return dbSettings[_0x188e38(0x28f)](_0x188e38(0x29a))[_0x188e38(0x233)]();}function getSecure(){const _0xae9004=_0x584733;return dbSecure[_0xae9004(0x28f)](_0xae9004(0x261))[_0xae9004(0x233)]()||{};}function updateTimeshift(_0x371922){const _0x347d00=_0x584733;let _0x2ea612=dbConfig[_0x347d00(0x28f)](_0x347d00(0x1c1))[_0x347d00(0x1eb)]({'botID':botID})[_0x347d00(0x233)]();_0x2ea612&&dbConfig[_0x347d00(0x28f)](_0x347d00(0x1c1))['find']({'botID':botID})['assign']({'timeshift':_0x371922})['write'](),config[_0x347d00(0x273)]=_0x371922,proxyEmit(_0x347d00(0x217),emittedConfiguration());}async function storeConfiguration(_0x426e3d){const _0x95b34d=_0x584733;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x279eb9=dbConfig[_0x95b34d(0x28f)]('bot')[_0x95b34d(0x1eb)]({'botID':botID})['value']();_0x426e3d={..._0x426e3d,'apiKey':crypt[_0x95b34d(0x2b5)](secure[_0x95b34d(0x210)],_0x426e3d[_0x95b34d(0x276)])[_0x95b34d(0x255)],'apiSecret':crypt[_0x95b34d(0x2b5)](secure['privateKey'],_0x426e3d['apiSecret'])[_0x95b34d(0x255)]};if(_0x279eb9){if(_0x426e3d['apiKey']==_0x95b34d(0x27b))_0x426e3d['apiKey']=config['apiKey'];if(_0x426e3d[_0x95b34d(0x1e1)]==_0x95b34d(0x27b))_0x426e3d[_0x95b34d(0x1e1)]=config['apiSecret'];dbConfig[_0x95b34d(0x28f)](_0x95b34d(0x1c1))['find']({'botID':botID})[_0x95b34d(0x201)](_0x426e3d)['write']();}else dbConfig[_0x95b34d(0x28f)](_0x95b34d(0x1c1))[_0x95b34d(0x2c1)](_0x426e3d)[_0x95b34d(0x207)](),process[_0x95b34d(0x1c6)]({'status':_0x95b34d(0x1f1),'live':'running'});config={..._0x426e3d};if(config[_0x95b34d(0x1ff)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x95b34d(0x1c6)]({'botname':_0x426e3d[_0x95b34d(0x265)]}),proxyEmit(_0x95b34d(0x24d)),reset();}async function storeHeadless(_0x2f890a){const _0x1cf62b=_0x584733,_0x9bec5f={...config,'headless':_0x2f890a[_0x1cf62b(0x1f2)]};let _0x6d4ccc=dbConfig[_0x1cf62b(0x28f)](_0x1cf62b(0x1c1))[_0x1cf62b(0x1eb)]({'botID':botID})[_0x1cf62b(0x233)]();_0x6d4ccc&&dbConfig[_0x1cf62b(0x28f)](_0x1cf62b(0x1c1))[_0x1cf62b(0x1eb)]({'botID':botID})[_0x1cf62b(0x201)](_0x9bec5f)[_0x1cf62b(0x207)](),config={..._0x9bec5f},proxyEmit(_0x1cf62b(0x217),emittedConfiguration());}function noslash(_0x34341c){return _0x34341c['replace']('/','');}function updateNumberCoins(_0x19584d){const _0x3d7194=_0x584733;_0x19584d['eventType']&&_0x19584d[_0x3d7194(0x282)]==_0x3d7194(0x281)&&_0x19584d[_0x3d7194(0x1e4)][_0x3d7194(0x2be)](_0x3cd41d=>{const _0xe7acad=_0x3d7194;let _0x1cbe3f=currentCoins[_0xe7acad(0x1eb)](_0x5db9fc=>_0x5db9fc[_0xe7acad(0x1bd)]==_0x3cd41d[_0xe7acad(0x23c)]);if(_0x1cbe3f)_0x1cbe3f[_0xe7acad(0x2a1)]=Number(_0x3cd41d[_0xe7acad(0x245)]);});if(_0x19584d[_0x3d7194(0x282)]&&_0x19584d[_0x3d7194(0x282)]==_0x3d7194(0x249)){if(_0x19584d[_0x3d7194(0x1e5)]==_0x3d7194(0x1ee)&&_0x19584d[_0x3d7194(0x2ae)]==_0x3d7194(0x293)){if(lastOrders)lastOrders[_0x3d7194(0x2be)](_0x3c993f=>{const _0x57b831=_0x3d7194;if(_0x3c993f[_0x57b831(0x234)]==_0x19584d['orderId']){if(_0x3c993f['reverse'])_0x3c993f[_0x57b831(0x2b6)]=_0x19584d[_0x57b831(0x206)]*_0x3c993f[_0x57b831(0x263)];else _0x3c993f[_0x57b831(0x2b6)]=_0x19584d['accumulatedQuantity'];}});}}}async function getCoins(_0x46abb3=!![],_0x4651a5=config[_0x584733(0x22f)]){const _0x39e30e=_0x584733;let _0xee32f4,_0x183d01=[],_0x2507de=[],_0x537653=[];try{_0xee32f4=await exchange[_0x39e30e(0x280)](),mybalances=_0xee32f4[_0x39e30e(0x29f)];if(!_0x46abb3)for(const [_0x13691b,_0x2c58c7]of Object[_0x39e30e(0x1e7)](mybalances)){_0x537653[_0x39e30e(0x2c1)](_0x13691b);}else config[_0x39e30e(0x1c3)][_0x39e30e(0x2be)](_0xf86d56=>{const _0x57f7ab=_0x39e30e;if(!_0xf86d56[_0x57f7ab(0x202)])_0x537653[_0x57f7ab(0x2c1)](_0xf86d56['coin']);});if(_0x4651a5=='')for(const [_0x4e1acb,_0x33fd03]of Object['entries'](mybalances)){_0x33fd03[_0x39e30e(0x24c)]()!=0x0&&_0x2507de[_0x39e30e(0x2c1)]({'coin':_0x4e1acb});}else for(const [_0x54fc78,_0x5ec1a5]of Object[_0x39e30e(0x1e7)](mybalances)){if(_0x537653[_0x39e30e(0x204)](_0x54fc78)){if((_0x5ec1a5[_0x39e30e(0x24c)]()!=0x0||config[_0x39e30e(0x1c3)][_0x39e30e(0x1eb)](_0x33efe5=>_0x33efe5['coin']==_0x54fc78))&&(allSymbols[_0x39e30e(0x204)](_0x54fc78+'/'+_0x4651a5)||_0x54fc78==_0x4651a5))_0x2507de['push']({'coin':_0x54fc78,'symbol':_0x54fc78+'/'+_0x4651a5,'reverse':![],'number':_0x5ec1a5}),_0x54fc78!=_0x4651a5&&_0x183d01[_0x39e30e(0x2c1)](_0x54fc78+'/'+_0x4651a5);else(_0x5ec1a5[_0x39e30e(0x24c)]()!=0x0||config[_0x39e30e(0x1c3)][_0x39e30e(0x1eb)](_0x1cd266=>_0x1cd266[_0x39e30e(0x1bd)]==_0x54fc78))&&allSymbols['includes'](_0x4651a5+'/'+_0x54fc78)&&(_0x2507de[_0x39e30e(0x2c1)]({'coin':_0x54fc78,'symbol':_0x4651a5+'/'+_0x54fc78,'reverse':!![],'number':_0x5ec1a5}),_0x54fc78!=_0x4651a5&&_0x183d01[_0x39e30e(0x2c1)](_0x4651a5+'/'+_0x54fc78));}}}catch(_0x4148ee){if(!_0x46abb3){if(_0x4148ee[_0x39e30e(0x24c)]()[_0x39e30e(0x204)](_0x39e30e(0x214)))return logHistory(_0x39e30e(0x200),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x4148ee['toString']()['includes']('AuthenticationError'))return logHistory(_0x39e30e(0x200),_0x39e30e(0x218)),![];else{if(_0x4148ee[_0x39e30e(0x24c)]()[_0x39e30e(0x204)](_0x39e30e(0x297)))return logHistory(_0x39e30e(0x200),_0x39e30e(0x242)),![];else await handleError(_0x4148ee,_0x39e30e(0x216));}}}else await handleError(_0x4148ee,_0x39e30e(0x216));}return _0x2507de;}async function getPortfolio(_0x16cdda){const _0xd14ab2=_0x584733;let _0x1b9dc0=[],_0x1a40f1=[],_0x5343e0,_0x21a92c=[],_0x2a905a,_0xf24915;_0x16cdda[_0xd14ab2(0x276)]===_0xd14ab2(0x27b)||_0x16cdda[_0xd14ab2(0x1e1)]===_0xd14ab2(0x27b)?(_0x2a905a=config[_0xd14ab2(0x276)],_0xf24915=config[_0xd14ab2(0x1e1)]):(_0x2a905a=_0x16cdda[_0xd14ab2(0x276)],_0xf24915=_0x16cdda[_0xd14ab2(0x1e1)]);await initExchange(_0x2a905a,_0xf24915);let _0x534d90=await loadSymbols();if(_0x534d90){_0x21a92c=await getCoins(![],_0x16cdda[_0xd14ab2(0x22f)]);if(_0x21a92c===![])proxyEmit(_0xd14ab2(0x1c3),![]);else{if(_0x16cdda[_0xd14ab2(0x22f)]=='')proxyEmit(_0xd14ab2(0x1c3),_0x21a92c);else{_0x21a92c[_0xd14ab2(0x2be)](_0x553ed2=>{const _0x4f1fad=_0xd14ab2;_0x1b9dc0[_0x4f1fad(0x2c1)](_0x553ed2['symbol']);});try{_0x1a40f1=await exchange[_0xd14ab2(0x2a5)](_0x1b9dc0);}catch(_0x1a6d48){await handleError(_0x1a6d48,_0xd14ab2(0x2b8));}_0x21a92c['forEach'](_0x574249=>{const _0x505546=_0xd14ab2;_0x574249['coin']!=_0x16cdda[_0x505546(0x22f)]?_0x5343e0=_0x574249[_0x505546(0x2a8)]?0x1/_0x1a40f1[_0x574249['symbol']][_0x505546(0x235)]:_0x1a40f1[_0x574249[_0x505546(0x220)]]['last']:_0x5343e0=0x1,_0x574249[_0x505546(0x263)]=formatResult(_0x5343e0,0x8);}),proxyEmit(_0xd14ab2(0x1c3),_0x21a92c);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x460f3d){const _0x2dd596=_0x584733;let _0x1dd198=!![];const _0x3539e2=!_0x460f3d[_0x2dd596(0x2a8)]?markets[_0x460f3d[_0x2dd596(0x220)]][_0x2dd596(0x1f8)][_0x2dd596(0x1d0)][_0x2dd596(0x1fe)]:markets[_0x460f3d['symbol']][_0x2dd596(0x1f8)][_0x2dd596(0x1d2)][_0x2dd596(0x1fe)],_0x17e8af=!_0x460f3d['reverse']?markets[_0x460f3d['symbol']][_0x2dd596(0x1f8)][_0x2dd596(0x1d2)][_0x2dd596(0x1fe)]:markets[_0x460f3d['symbol']][_0x2dd596(0x1f8)][_0x2dd596(0x1d0)]['min'];if(Math['abs'](_0x460f3d[_0x2dd596(0x1dd)])<_0x3539e2)_0x1dd198=![];if(Math[_0x2dd596(0x2a3)](_0x460f3d[_0x2dd596(0x1dd)])*_0x460f3d['last']<_0x17e8af)_0x1dd198=![];return _0x1dd198;}async function getBalances(){const _0x1df70c=_0x584733;let _0x242097=0x0,_0x50ed0a;const _0x2ea679=config['threshold'];currentCoins[_0x1df70c(0x2be)](_0x32a843=>{const _0x22dc90=_0x1df70c;if(_0x32a843['coin']!=config[_0x22dc90(0x22f)]){let _0x2b6e69=global[_0x22dc90(0x22e)][noslash(_0x32a843['symbol'])];_0x50ed0a=_0x32a843[_0x22dc90(0x2a8)]?0x1/_0x2b6e69:_0x2b6e69;}else _0x50ed0a=0x1;let _0x406aff=_0x32a843[_0x22dc90(0x2a1)]*_0x50ed0a;_0x242097+=_0x406aff,_0x32a843[_0x22dc90(0x235)]=formatResult(Number(_0x50ed0a),0x8),_0x32a843[_0x22dc90(0x233)]=_0x406aff;}),currentCoins[_0x1df70c(0x2be)](_0x23a12b=>{const _0x8ef3d5=_0x1df70c;let _0xe6c435=config[_0x8ef3d5(0x1c3)][_0x8ef3d5(0x1eb)](_0x910780=>_0x910780[_0x8ef3d5(0x1bd)]==_0x23a12b['coin']),_0x18f196=Number(_0xe6c435[_0x8ef3d5(0x26b)]),_0x2fa3e7=_0x23a12b[_0x8ef3d5(0x233)]/_0x242097*0x64,_0xa14e15=_0x18f196*_0x242097/0x64/_0x23a12b[_0x8ef3d5(0x235)]-_0x23a12b[_0x8ef3d5(0x2a1)];_0x23a12b[_0x8ef3d5(0x26b)]=formatResult(_0x2fa3e7,0x3),_0x23a12b['target']=formatResult(_0x18f196,0x3),_0x23a12b[_0x8ef3d5(0x1dd)]=formatResult(_0xa14e15,0x8),_0x23a12b[_0x8ef3d5(0x2aa)]='',_0x23a12b[_0x8ef3d5(0x1f4)]='';if(_0x23a12b[_0x8ef3d5(0x1bd)]!=config[_0x8ef3d5(0x22f)]){if(_0x23a12b[_0x8ef3d5(0x26b)]>_0x18f196)_0x23a12b['side']=_0x8ef3d5(0x226),_0x23a12b[_0x8ef3d5(0x1f4)]=checkMinimums(_0x23a12b);else _0x23a12b[_0x8ef3d5(0x26b)]<_0x18f196&&(_0x23a12b[_0x8ef3d5(0x2aa)]='buy',_0x23a12b[_0x8ef3d5(0x1f4)]=checkMinimums(_0x23a12b));}_0x23a12b['delta']=_0x23a12b[_0x8ef3d5(0x26b)]/_0x23a12b[_0x8ef3d5(0x20d)]-0x1;}),currentCoins[_0x1df70c(0x275)]((_0x1cfe0c,_0x5bbdc4)=>_0x1cfe0c['delta']<_0x5bbdc4[_0x1df70c(0x251)]?0x1:_0x5bbdc4[_0x1df70c(0x251)]<_0x1cfe0c['delta']?-0x1:0x0);const _0x2ff3b6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2ff3b6[_0x1df70c(0x24e)],'usd':_0x2ff3b6[_0x1df70c(0x1c0)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x2ea679},proxyEmit(_0x1df70c(0x1e4),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1df70c(0x1f2)])headlessMode({'portfolio':currentCoins,'threshold':_0x2ea679});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x29301a=_0x584733;if(!lastBalances)return;let _0x16b5ee=await getStartingBalances(![]),_0x15832b=[],_0x3a0987=[],_0x11b2e1;JSON[_0x29301a(0x241)](lastBalances[_0x29301a(0x1c3)])[_0x29301a(0x2be)](_0x56c616=>{const _0x101c85=_0x29301a;let _0x406b4e={'coin':_0x56c616['coin'],'number':_0x56c616[_0x101c85(0x2a1)],'price':_0x56c616[_0x101c85(0x235)]};_0x15832b[_0x101c85(0x2c1)](_0x406b4e);if(!_0x16b5ee['coins']||!_0x16b5ee[_0x101c85(0x1ea)][_0x101c85(0x1eb)](_0x552287=>_0x552287['coin']==_0x56c616[_0x101c85(0x1bd)]&&_0x552287['number']!=0x0))_0x3a0987['push'](_0x406b4e);});const _0x386934=await getFiat();_0x11b2e1={'date':lastBalances[_0x29301a(0x28d)][_0x29301a(0x211)]('\x20')[0x0],'eur':_0x386934[_0x29301a(0x24e)],'usd':_0x386934[_0x29301a(0x1c0)],'coins':_0x15832b};let _0x1da251=dbPerformance[_0x29301a(0x28f)]('data')['find']({'date':_0x11b2e1[_0x29301a(0x29d)]})[_0x29301a(0x233)]();_0x1da251?dbPerformance[_0x29301a(0x28f)](_0x29301a(0x1ed))['find']({'date':_0x11b2e1[_0x29301a(0x29d)]})[_0x29301a(0x201)](_0x11b2e1)[_0x29301a(0x207)]():dbPerformance['get'](_0x29301a(0x1ed))[_0x29301a(0x2c1)](_0x11b2e1)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x506ee8=_0x584733;if(dbPerformance[_0x506ee8(0x270)](_0x506ee8(0x1ed))[_0x506ee8(0x233)]()){let _0x257171=dbPerformance[_0x506ee8(0x28f)](_0x506ee8(0x1ed))[_0x506ee8(0x2b4)]('date')[_0x506ee8(0x233)]();proxyEmit(_0x506ee8(0x25e),_0x257171),lastPerformanceEmitted=getDate();}else proxyEmit(_0x506ee8(0x25e),[]);}async function getStartingBalances(_0x12540b=!![]){const _0x228452=_0x584733;let _0x2a7833=dbPerformance['get'](_0x228452(0x1ed))['find']({'date':config[_0x228452(0x2ad)]})[_0x228452(0x233)]();config[_0x228452(0x276)]!=''&&!_0x2a7833&&(await setStartDatePerformance(config),_0x2a7833=dbPerformance[_0x228452(0x28f)](_0x228452(0x1ed))[_0x228452(0x1eb)]({'date':config[_0x228452(0x2ad)]})[_0x228452(0x233)]());if(config[_0x228452(0x276)]==''||!_0x2a7833)return{};let _0x17daa1=0x0,_0x8f0e03=0x0,_0x521269=0x0,_0x1e1e9b=[],_0x30cf9a=0x0;config[_0x228452(0x1c3)]['forEach'](_0x1f7002=>{const _0x2c8656=_0x228452;if(!_0x1f7002[_0x2c8656(0x202)]){_0x1e1e9b[_0x30cf9a]={'coin':_0x1f7002['coin'],'symbol':_0x1f7002['symbol'],'number':_0x1f7002['startnumber'],'price':_0x1f7002['startprice']},_0x17daa1+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002[_0x2c8656(0x1bf)];if(config[_0x2c8656(0x22f)]=='BTC')_0x8f0e03+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002['startnumber']*_0x2a7833[_0x2c8656(0x24e)],_0x521269+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002[_0x2c8656(0x1bf)]*_0x2a7833[_0x2c8656(0x1c0)];else{if(config[_0x2c8656(0x22f)]==_0x2c8656(0x299)||config[_0x2c8656(0x22f)]==_0x2c8656(0x1ce)||config[_0x2c8656(0x22f)]==_0x2c8656(0x2ac))_0x8f0e03+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002['startnumber']*_0x2a7833['eur']/_0x2a7833[_0x2c8656(0x1c0)],_0x521269+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002[_0x2c8656(0x1bf)];else config[_0x2c8656(0x22f)]=='EUR'&&(_0x8f0e03+=_0x1f7002['startprice']*_0x1f7002[_0x2c8656(0x1bf)],_0x521269+=_0x1f7002[_0x2c8656(0x1de)]*_0x1f7002[_0x2c8656(0x1bf)]*_0x2a7833[_0x2c8656(0x1c0)]/_0x2a7833[_0x2c8656(0x24e)]);}_0x30cf9a++;}});let _0x49a87d={'basecoin':_0x17daa1,'eur':_0x8f0e03,'usd':_0x521269,'coins':_0x1e1e9b};if(_0x12540b)proxyEmit(_0x228452(0x257),_0x49a87d);return _0x49a87d;}function headlessMode(_0x586ee3){const _0x19bfaf=_0x584733;let _0x33c995=_0x586ee3[_0x19bfaf(0x1c3)],_0x308803=_0x586ee3[_0x19bfaf(0x237)],_0x3fa19f=[];for(let _0x36bc94 of _0x33c995){if(_0x36bc94[_0x19bfaf(0x1bd)]!=config[_0x19bfaf(0x22f)]){if(_0x36bc94['distribution']/_0x36bc94[_0x19bfaf(0x20d)]-0x1>=_0x308803/0x64){if(_0x36bc94[_0x19bfaf(0x1f4)])_0x3fa19f['push'](_0x36bc94);}else{if(_0x36bc94['distribution']/_0x36bc94['target']-0x1<=-_0x308803/0x64){if(_0x36bc94[_0x19bfaf(0x1f4)])_0x3fa19f[_0x19bfaf(0x2c1)](_0x36bc94);}}}}_0x3fa19f[_0x19bfaf(0x244)]>0x0&&placeOrder(_0x3fa19f);}function symbolToCoin(_0x1ac909){const _0x1c7fdf=_0x584733;let _0x2294ee;if(_0x1ac909[_0x1c7fdf(0x204)]('/'+config[_0x1c7fdf(0x22f)]))_0x2294ee=_0x1ac909[_0x1c7fdf(0x23f)]('/'+config[_0x1c7fdf(0x22f)],'');if(_0x1ac909[_0x1c7fdf(0x204)](config[_0x1c7fdf(0x22f)]+'/'))_0x2294ee=_0x1ac909['replace'](config[_0x1c7fdf(0x22f)]+'/','');return _0x2294ee;}async function validateOrders(_0x20c3b0=0x0){const _0x9e1544=_0x584733;let _0x37c662=[],_0x51071d=config[_0x9e1544(0x1f6)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x9e1544(0x2be)](_0x52e8e3=>{const _0x4e8a47=_0x9e1544;let _0x1e09bf=previousCoins['find'](_0x4cc971=>_0x4cc971[_0x4e8a47(0x1bd)]==symbolToCoin(_0x52e8e3[_0x4e8a47(0x220)])),_0x54530e=currentCoins[_0x4e8a47(0x1eb)](_0x319e74=>_0x319e74[_0x4e8a47(0x1bd)]==symbolToCoin(_0x52e8e3[_0x4e8a47(0x220)])),_0x36f712,_0x230085;_0x52e8e3[_0x4e8a47(0x2aa)]==_0x4e8a47(0x23a)&&!_0x52e8e3[_0x4e8a47(0x2a8)]||_0x52e8e3[_0x4e8a47(0x2aa)]==_0x4e8a47(0x226)&&_0x52e8e3[_0x4e8a47(0x2a8)]?(_0x36f712=_0x1e09bf[_0x4e8a47(0x2a1)]+0.9*_0x52e8e3[_0x4e8a47(0x2b6)],_0x230085=_0x1e09bf[_0x4e8a47(0x2a1)]+1.1*_0x52e8e3[_0x4e8a47(0x2b6)]):(_0x36f712=_0x1e09bf['number']-1.1*_0x52e8e3[_0x4e8a47(0x2b6)],_0x230085=_0x1e09bf[_0x4e8a47(0x2a1)]-0.9*_0x52e8e3[_0x4e8a47(0x2b6)]);const _0x4c86f2=_0x52e8e3[_0x4e8a47(0x2b6)]!=0x0&&_0x54530e[_0x4e8a47(0x2a1)]>=_0x36f712&&_0x54530e[_0x4e8a47(0x2a1)]<=_0x230085;_0x37c662['push'](_0x4c86f2);if(_0x4c86f2&&config[_0x4e8a47(0x1f6)]!=_0x4e8a47(0x267)){if(_0x52e8e3[_0x4e8a47(0x2a8)])logHistory(_0x4e8a47(0x1df),'Order\x20filled:\x20'+_0x52e8e3[_0x4e8a47(0x220)]+'\x20'+_0x52e8e3[_0x4e8a47(0x2aa)]+'\x20#'+formatResult(_0x52e8e3['filled']/_0x52e8e3[_0x4e8a47(0x263)],0x8)+'\x20@'+formatResult(_0x52e8e3['price'],0x8));else logHistory(_0x4e8a47(0x1df),_0x4e8a47(0x266)+_0x52e8e3[_0x4e8a47(0x220)]+'\x20'+_0x52e8e3[_0x4e8a47(0x2aa)]+'\x20#'+formatResult(_0x52e8e3[_0x4e8a47(0x2b6)],0x8)+'\x20@'+formatResult(_0x52e8e3[_0x4e8a47(0x263)],0x8));}}),_0x37c662[_0x9e1544(0x2be)]((_0x554925,_0x1286d4)=>{const _0x23a17b=_0x9e1544;if(_0x554925)lastOrders[_0x23a17b(0x2b7)](_0x1286d4,0x1);});if(_0x20c3b0<_0x51071d&&_0x37c662['includes'](![])){if(_0x20c3b0==0x0){config[_0x9e1544(0x1f6)]==_0x9e1544(0x267)?logHistory('error',_0x9e1544(0x22d)):logHistory(_0x9e1544(0x200),_0x9e1544(0x1f0));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x20c3b0);},0xa*0x3e8);}else{(_0x20c3b0==0x1||_0x20c3b0==Math[_0x9e1544(0x1b7)](_0x51071d/0x2)||_0x20c3b0==_0x51071d-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x20c3b0);},validateOrderInterval);}}else{lockOrders=![];if(_0x20c3b0>0x0&&!_0x37c662[_0x9e1544(0x204)](![]))config[_0x9e1544(0x1f6)]==_0x9e1544(0x267)?logHistory(_0x9e1544(0x1e3),_0x9e1544(0x247)):logHistory(_0x9e1544(0x1e3),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x20c3b0>0x0&&_0x37c662[_0x9e1544(0x204)](![])&&(config[_0x9e1544(0x1f6)]=='market'?logHistory(_0x9e1544(0x1e3),_0x9e1544(0x26d)+Math['round'](_0x51071d*validateOrderInterval/0xea60)+_0x9e1544(0x252)):(lastOrders['forEach'](async _0x491659=>{const _0x5452cd=_0x9e1544;try{const _0x16a9af=await exchange[_0x5452cd(0x221)](_0x491659[_0x5452cd(0x234)],_0x491659['symbol']);}catch(_0x318b7c){if(_0x318b7c[_0x5452cd(0x24c)]()[_0x5452cd(0x204)](_0x5452cd(0x288))){}else await handleError(_0x318b7c,'cancelOrder()');}}),logHistory(_0x9e1544(0x1e3),_0x9e1544(0x27c)+Math[_0x9e1544(0x1b7)](_0x51071d*validateOrderInterval/0xea60)+_0x9e1544(0x252))));}}async function resetCoinResults(){const _0x46d6e2=_0x584733;dbCoinResults['get']('coins')['remove']()[_0x46d6e2(0x207)]();let _0x48a7b8=await getStartingBalances(![]);_0x48a7b8[_0x46d6e2(0x1ea)]['forEach'](_0x4ce0d3=>{const _0x3ac91b=_0x46d6e2,_0x57af07=_0x4ce0d3[_0x3ac91b(0x220)][_0x3ac91b(0x204)](config[_0x3ac91b(0x22f)]+'/');if(_0x4ce0d3[_0x3ac91b(0x1bd)]!=config[_0x3ac91b(0x22f)]){let _0x29fba4={'coin':_0x4ce0d3[_0x3ac91b(0x1bd)],'number':_0x4ce0d3[_0x3ac91b(0x2a1)],'breakeven':_0x4ce0d3[_0x3ac91b(0x263)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3ac91b(0x28f)](_0x3ac91b(0x1ea))[_0x3ac91b(0x2c1)](_0x29fba4)[_0x3ac91b(0x207)]();}});}async function updateCoinResults(_0x556e8a){const _0x364780=_0x584733;let _0x4bed3b,_0x262d26,_0x5ab5b4,_0x404fa1,_0x4cb862,_0x32831,_0x3341c8=dbCoinResults[_0x364780(0x28f)]('coins')[_0x364780(0x1eb)]({'coin':_0x556e8a[_0x364780(0x1bd)]})[_0x364780(0x233)]();if(!_0x3341c8)return;if(_0x556e8a[_0x364780(0x26a)]&&_0x556e8a[_0x364780(0x26a)]['currency']==config[_0x364780(0x22f)])_0x4bed3b=_0x556e8a['fee'][_0x364780(0x1d2)];else{if(_0x556e8a[_0x364780(0x26a)]&&_0x556e8a[_0x364780(0x26a)]['currency']=='BNB')_0x4bed3b=_0x556e8a[_0x364780(0x26a)][_0x364780(0x1d2)]*global[_0x364780(0x22e)]['BNB'+config['basecoin']];else _0x4bed3b=0.001*_0x556e8a[_0x364780(0x2b6)];}const _0x3f1948=_0x556e8a[_0x364780(0x220)][_0x364780(0x204)](config['basecoin']+'/');_0x3f1948&&(_0x32831={'coin':_0x556e8a[_0x364780(0x1bd)],'symbol':_0x556e8a[_0x364780(0x220)],'filled':_0x556e8a[_0x364780(0x2b6)]*_0x556e8a[_0x364780(0x263)],'side':_0x556e8a['side']==_0x364780(0x226)?_0x364780(0x23a):'sell','price':0x1/_0x556e8a[_0x364780(0x263)]},_0x556e8a={..._0x32831});_0x556e8a[_0x364780(0x2aa)]==_0x364780(0x23a)?_0x5ab5b4=(_0x3341c8['breakeven']*_0x3341c8[_0x364780(0x2a1)]+_0x556e8a[_0x364780(0x263)]*_0x556e8a[_0x364780(0x2b6)])/(_0x3341c8[_0x364780(0x2a1)]+_0x556e8a[_0x364780(0x2b6)]):_0x5ab5b4=(_0x3341c8[_0x364780(0x298)]*_0x3341c8['number']-_0x556e8a[_0x364780(0x263)]*_0x556e8a[_0x364780(0x2b6)])/(_0x3341c8[_0x364780(0x2a1)]-_0x556e8a[_0x364780(0x2b6)]);_0x556e8a['side']==_0x364780(0x23a)?_0x404fa1=_0x3341c8[_0x364780(0x1e9)]:_0x404fa1=_0x3341c8[_0x364780(0x1e9)]+(_0x556e8a[_0x364780(0x263)]-_0x3341c8[_0x364780(0x298)])*_0x556e8a['filled'];_0x262d26=_0x556e8a[_0x364780(0x2aa)]=='sell'?_0x3341c8[_0x364780(0x2a1)]-_0x556e8a[_0x364780(0x2b6)]:_0x3341c8[_0x364780(0x2a1)]+_0x556e8a[_0x364780(0x2b6)],_0x4cb862=(_0x556e8a[_0x364780(0x263)]-_0x5ab5b4)*_0x262d26;let _0x159a42={'coin':_0x556e8a[_0x364780(0x1bd)],'number':_0x262d26,'breakeven':formatResult(_0x5ab5b4,0x8),'realized':formatResult(_0x404fa1,0x8),'unrealized':formatResult(_0x4cb862,0x8),'fees':formatResult(_0x3341c8[_0x364780(0x1bb)]+_0x4bed3b,0x8),'sells':_0x556e8a[_0x364780(0x2aa)]==_0x364780(0x226)?_0x3341c8[_0x364780(0x25d)]+0x1:_0x3341c8['sells'],'buys':_0x556e8a['side']==_0x364780(0x23a)?_0x3341c8[_0x364780(0x25b)]+0x1:_0x3341c8[_0x364780(0x25b)]};dbCoinResults[_0x364780(0x28f)](_0x364780(0x1ea))[_0x364780(0x1eb)]({'coin':_0x556e8a[_0x364780(0x1bd)]})[_0x364780(0x201)](_0x159a42)[_0x364780(0x207)]();}async function placeOrder(_0x513c9a){const _0x5ab980=_0x584733,_0x19221b=config[_0x5ab980(0x1f6)]==_0x5ab980(0x267)?_0x5ab980(0x267):_0x5ab980(0x1ca);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5ab980(0x241)](JSON['stringify'](currentCoins));for(const _0x5af8e2 of _0x513c9a){let _0x5883c3,_0x259905,_0x1e1b9a,_0x5001f1,_0x51a2b4,_0x3bd1ed=_0x5af8e2['symbol'];try{const _0x2b2e80=await exchange[_0x5ab980(0x2a5)](_0x3bd1ed),_0x253148=_0x2b2e80[_0x3bd1ed];_0x5883c3=_0x253148[_0x5ab980(0x235)],_0x259905=_0x253148['bid'],_0x1e1b9a=_0x253148[_0x5ab980(0x286)];_0x5af8e2[_0x5ab980(0x2a8)]?(_0x5001f1=_0x5af8e2[_0x5ab980(0x2aa)]==_0x5ab980(0x23a)?'sell':'buy',_0x51a2b4=Math[_0x5ab980(0x2a3)](_0x5af8e2['trade'])/_0x5883c3):(_0x5001f1=_0x5af8e2[_0x5ab980(0x2aa)],_0x51a2b4=Math['abs'](_0x5af8e2[_0x5ab980(0x1dd)]));_0x19221b=='limit'&&(config[_0x5ab980(0x1f6)]==_0x5ab980(0x208)&&(_0x5883c3=_0x5001f1=='buy'?_0x259905:_0x1e1b9a),config['ordertype']==_0x5ab980(0x2b2)&&(_0x5883c3=_0x5001f1==_0x5ab980(0x23a)?_0x1e1b9a:_0x259905));_0x51a2b4=formatResult(_0x51a2b4,0x8),_0x5883c3=formatResult(_0x5883c3,0x8);const _0x5adf1b=await exchange[_0x5ab980(0x21b)](_0x3bd1ed,_0x19221b,_0x5001f1,_0x51a2b4,_0x5883c3);lastOrders[_0x5ab980(0x2c1)]({'orderId':_0x5adf1b['id'],'symbol':_0x3bd1ed,'side':_0x5001f1,'reverse':_0x5af8e2[_0x5ab980(0x2a8)],'amount':_0x5af8e2[_0x5ab980(0x2a8)]?_0x5adf1b[_0x5ab980(0x1d0)]*_0x5adf1b[_0x5ab980(0x263)]:_0x5adf1b[_0x5ab980(0x1d0)],'filled':_0x5af8e2['reverse']?_0x5adf1b['filled']*_0x5adf1b['price']:_0x5adf1b[_0x5ab980(0x2b6)],'price':_0x5adf1b[_0x5ab980(0x263)]});const _0x43ec28=_0x5001f1==_0x5ab980(0x226)?config['emojisell']?String[_0x5ab980(0x1e0)]('0x'+config['emojisell'])+'\x20':'':config[_0x5ab980(0x1d3)]?String[_0x5ab980(0x1e0)]('0x'+config['emojibuy'])+'\x20':'',_0x161505=_0x19221b==_0x5ab980(0x267)?_0x5ab980(0x25c):config[_0x5ab980(0x1f6)]==_0x5ab980(0x208)?_0x5ab980(0x232):'Limit\x20(low-margin)';if(_0x19221b=='market')logHistory(_0x5ab980(0x1df),''+_0x43ec28+_0x161505+_0x5ab980(0x260)+_0x3bd1ed+'\x20'+_0x5001f1+'\x20#'+formatResult(_0x5adf1b['filled'],0x8)+'\x20@'+formatResult(_0x5adf1b['price'],0x8));else logHistory(_0x5ab980(0x1df),''+_0x43ec28+_0x161505+'\x20order:\x20'+_0x3bd1ed+'\x20'+_0x5001f1+'\x20#'+formatResult(_0x5adf1b[_0x5ab980(0x1d0)],0x8)+'\x20@'+formatResult(_0x5adf1b[_0x5ab980(0x263)],0x8));_0x5adf1b[_0x5ab980(0x1bd)]=_0x5af8e2[_0x5ab980(0x1bd)],await updateCoinResults(_0x5adf1b);if(config['cooldown']!=0x0){let _0x16347d=null;if(cooldownTracker[_0x5ab980(0x244)]==config['cooldown']-0x1)_0x16347d=cooldownTracker['shift']();const _0x1ae683=getTimeStamp();cooldownTracker[_0x5ab980(0x2c1)](_0x1ae683);if(_0x16347d){const _0x40f6ee=fns['differenceInSeconds'](new Date(_0x1ae683),new Date(_0x16347d));_0x40f6ee<cooldownInterval&&(logHistory('error',_0x5ab980(0x1f5)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5ab980(0x230)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1d7b53){if(_0x1d7b53[_0x5ab980(0x24c)]()[_0x5ab980(0x204)](_0x5ab980(0x296)))logHistory(_0x5ab980(0x200),_0x5ab980(0x271)+_0x3bd1ed);else{if(_0x1d7b53['toString']()[_0x5ab980(0x204)](_0x5ab980(0x2af)))logHistory(_0x5ab980(0x200),_0x5ab980(0x243)+_0x3bd1ed);else await handleError(_0x1d7b53,'placeOrder()');}}}if(lastOrders[_0x5ab980(0x244)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5ab980(0x1f2)]&&(config[_0x5ab980(0x1f6)]==_0x5ab980(0x267)?logHistory(_0x5ab980(0x200),_0x5ab980(0x1c8)):logHistory(_0x5ab980(0x200),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config['headless']&&logHistory(_0x5ab980(0x200),_0x5ab980(0x262)));}}function logHistory(_0x3848d0,_0x1f646e,_0x454893=''){const _0x6d624f=_0x584733;let _0x577b20={'time':getTimeStamp(),'type':_0x3848d0,'event':_0x1f646e,'botname':config[_0x6d624f(0x265)],'showname':config['showname']};dbLogs[_0x6d624f(0x28f)](_0x6d624f(0x1c2))['push'](_0x577b20)[_0x6d624f(0x207)]();if(_0x454893=='')_0x454893=_0x1f646e;proxyEmit(_0x6d624f(0x240),{'log':_0x577b20,'summary':_0x454893}),process['send']({'telegram':_0x577b20}),logging(''+_0x577b20[_0x6d624f(0x240)]);}function emitHistory(_0x3bb099={}){const _0x1d78f8=_0x584733;Object[_0x1d78f8(0x1dc)](_0x3bb099)[_0x1d78f8(0x244)]==0x0&&(_0x3bb099={'type':[_0x1d78f8(0x1df),'event'],'event':'','page':0x1});if(_0x3bb099[_0x1d78f8(0x2a9)][_0x1d78f8(0x204)](_0x1d78f8(0x240)))_0x3bb099[_0x1d78f8(0x2a9)]['splice'](_0x3bb099[_0x1d78f8(0x2a9)]['indexOf']('event'),0x1,_0x1d78f8(0x200),_0x1d78f8(0x1e3));if(dbLogs['has'](_0x1d78f8(0x1c2))[_0x1d78f8(0x233)]()){let _0x226e58=dbLogs[_0x1d78f8(0x28f)]('logs')['filter'](_0x7c947c=>{const _0x564150=_0x1d78f8;if(_0x3bb099[_0x564150(0x2a9)][_0x564150(0x244)]==0x0)return![];else return _0x3bb099[_0x564150(0x2a9)][_0x564150(0x204)](_0x7c947c[_0x564150(0x2a9)]);})[_0x1d78f8(0x253)](_0x598b5c=>{const _0x130547=_0x1d78f8;if(_0x3bb099['event']=='')return!![];else return _0x598b5c[_0x130547(0x240)]['toLowerCase']()[_0x130547(0x204)](_0x3bb099[_0x130547(0x240)][_0x130547(0x294)]());})[_0x1d78f8(0x2b4)]('time'),_0x29fdf3=_0x226e58[_0x1d78f8(0x233)]()['length'];_0x226e58=_0x226e58[_0x1d78f8(0x2a8)]()[_0x1d78f8(0x227)]((_0x3bb099[_0x1d78f8(0x1c7)]-0x1)*logPageSize,_0x3bb099[_0x1d78f8(0x1c7)]*logPageSize-0x1)[_0x1d78f8(0x2a8)]()['value'](),proxyEmit(_0x1d78f8(0x1fc),{'logs':_0x226e58,'total':_0x29fdf3});}else proxyEmit(_0x1d78f8(0x1fc),{'logs':[],'total':0x0});}async function pauseBot(_0x27e8fa){const _0x12e248=_0x584733,_0x3d4ccc=new Date()[_0x12e248(0x1e6)]();if(!lastBotPause)lastBotPause=new Date()[_0x12e248(0x1e6)](),consecutivePauses=0x1;else{if(_0x3d4ccc-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x12e248(0x1cc)});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x12e248(0x200),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x27e8fa),botPaused=![],reset();}}async function handleError(_0x33368b,_0xa6fa05,_0xb4936b=''){const _0x4e3851=_0x584733;if(_0x33368b[_0x4e3851(0x24c)]()[_0x4e3851(0x204)]('DDoSProtection'))logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x274)),await pauseBot(pauseBotInterval);else{if(_0x33368b['toString']()[_0x4e3851(0x204)](_0x4e3851(0x1f9)))logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x27f)),await pauseBot(pauseBotInterval);else{if(_0x33368b['toString']()['includes'](_0x4e3851(0x238)))logHistory('error',_0xa6fa05+_0x4e3851(0x1fb)),await pauseBot(pauseBotInterval);else{if(_0x33368b[_0x4e3851(0x24c)]()[_0x4e3851(0x204)](_0x4e3851(0x214)))logHistory('error',_0xa6fa05+_0x4e3851(0x23b)),logHistory('error',_0x4e3851(0x229)),process[_0x4e3851(0x1c6)]({'stop':_0x4e3851(0x1d8)});else{if(_0x33368b[_0x4e3851(0x24c)]()[_0x4e3851(0x204)](_0x4e3851(0x1c4)))logHistory('error',_0xa6fa05+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x4e3851(0x200),_0x4e3851(0x229)),process['send']({'stop':_0x4e3851(0x1d8)});else{if(_0x33368b['toString']()[_0x4e3851(0x204)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x21a)),logHistory(_0x4e3851(0x200),_0x4e3851(0x229)),process[_0x4e3851(0x1c6)]({'stop':'kill'});else{if(_0x33368b[_0x4e3851(0x24c)]()[_0x4e3851(0x204)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0xa6fa05+_0x4e3851(0x1db)),logHistory('error',_0x4e3851(0x229)),process[_0x4e3851(0x1c6)]({'stop':_0x4e3851(0x1d8)});else{if(_0x33368b['toString']()[_0x4e3851(0x204)]('InvalidNonce'))logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x2a4)),await pauseBot(pauseBotInterval),process[_0x4e3851(0x1c6)]({'stop':_0x4e3851(0x1cc)});else _0x33368b[_0x4e3851(0x24c)]()[_0x4e3851(0x204)](_0x4e3851(0x239))?logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x2a6)):(logHistory(_0x4e3851(0x200),_0xa6fa05+_0x4e3851(0x25a)),logging(_0xa6fa05+_0x4e3851(0x2a7),_0x33368b),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3ac49a,_0x526772){return parseFloat(_0x3ac49a['toFixed'](_0x526772));}function logging(_0x456bc9,_0x52f0d5=''){const _0x272036=_0x584733;if(config[_0x272036(0x26f)])console[_0x272036(0x256)](getTimeStamp()+':\x20'+config['botname']+_0x272036(0x228)+_0x456bc9,_0x52f0d5);else console['log'](getTimeStamp()+_0x272036(0x1c5)+botID+_0x272036(0x228)+_0x456bc9,_0x52f0d5);}function getServerTime(){const _0x3378ea=_0x584733,_0x2a63e4=new Date();return _0x2a63e4[_0x3378ea(0x24f)]()+'/'+(_0x2a63e4[_0x3378ea(0x250)]()+0x1)[_0x3378ea(0x24c)]()[_0x3378ea(0x213)](0x2,'0')+'/'+_0x2a63e4[_0x3378ea(0x2bf)]()[_0x3378ea(0x24c)]()['padStart'](0x2,'0')+'\x20'+_0x2a63e4['getHours']()[_0x3378ea(0x24c)]()[_0x3378ea(0x213)](0x2,'0')+':'+_0x2a63e4[_0x3378ea(0x28c)]()[_0x3378ea(0x24c)]()[_0x3378ea(0x213)](0x2,'0')+':'+_0x2a63e4['getSeconds']()[_0x3378ea(0x24c)]()[_0x3378ea(0x213)](0x2,'0');}function getTimeStamp(){const _0x42e36a=_0x584733,_0x247633=shiftedTime();return _0x247633[_0x42e36a(0x24f)]()+'/'+(_0x247633[_0x42e36a(0x250)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x247633[_0x42e36a(0x2bf)]()[_0x42e36a(0x24c)]()[_0x42e36a(0x213)](0x2,'0')+'\x20'+_0x247633['getHours']()[_0x42e36a(0x24c)]()[_0x42e36a(0x213)](0x2,'0')+':'+_0x247633[_0x42e36a(0x28c)]()['toString']()[_0x42e36a(0x213)](0x2,'0')+':'+_0x247633['getSeconds']()[_0x42e36a(0x24c)]()[_0x42e36a(0x213)](0x2,'0');}function getDate(){const _0x2b9e4b=_0x584733,_0x204c06=shiftedTime();return _0x204c06[_0x2b9e4b(0x24f)]()+'/'+(_0x204c06[_0x2b9e4b(0x250)]()+0x1)[_0x2b9e4b(0x24c)]()[_0x2b9e4b(0x213)](0x2,'0')+'/'+_0x204c06[_0x2b9e4b(0x2bf)]()[_0x2b9e4b(0x24c)]()[_0x2b9e4b(0x213)](0x2,'0');}function getHour(){const _0x2b01a3=_0x584733,_0x23d3b1=shiftedTime();return _0x23d3b1['getHours']()[_0x2b01a3(0x24c)]()[_0x2b01a3(0x213)](0x2,'0');}function sleep(_0x4b861b){return new Promise(_0x7056b=>setTimeout(_0x7056b,_0x4b861b));}function shiftedTime(){const _0x1d7a24=_0x584733,_0x4a44ab=new Date();let _0xc152d7=_0x4a44ab;if(config&&config[_0x1d7a24(0x273)]!==0x0)_0xc152d7=fns[_0x1d7a24(0x1f7)](_0x4a44ab,{'hours':config[_0x1d7a24(0x273)]});return _0xc152d7;}