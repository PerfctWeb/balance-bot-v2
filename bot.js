const _0x8496ec=_0x33f9;(function(_0x160a0d,_0x32aec3){const _0x2757a3=_0x33f9,_0x4590a1=_0x160a0d();while(!![]){try{const _0x145cd9=-parseInt(_0x2757a3(0x1ef))/0x1*(parseInt(_0x2757a3(0x27b))/0x2)+-parseInt(_0x2757a3(0x299))/0x3*(parseInt(_0x2757a3(0x2ab))/0x4)+parseInt(_0x2757a3(0x1d6))/0x5+-parseInt(_0x2757a3(0x24f))/0x6+-parseInt(_0x2757a3(0x26d))/0x7*(-parseInt(_0x2757a3(0x293))/0x8)+-parseInt(_0x2757a3(0x109))/0x9+-parseInt(_0x2757a3(0x159))/0xa*(-parseInt(_0x2757a3(0x10f))/0xb);if(_0x145cd9===_0x32aec3)break;else _0x4590a1['push'](_0x4590a1['shift']());}catch(_0x2fa230){_0x4590a1['push'](_0x4590a1['shift']());}}}(_0x300b,0xdd49e));const _0x4eec1d=function(){let _0x420e53=!![];return function(_0x16d5b3,_0x4cb848){const _0x32db5c=_0x420e53?function(){const _0x3fb671=_0x33f9;if(_0x4cb848){const _0x2f087e=_0x4cb848[_0x3fb671(0x1e3)](_0x16d5b3,arguments);return _0x4cb848=null,_0x2f087e;}}:function(){};return _0x420e53=![],_0x32db5c;};}(),_0x52e71e=_0x4eec1d(this,function(){const _0x33abb8=_0x33f9;return _0x52e71e[_0x33abb8(0x28a)]()[_0x33abb8(0x1fa)](_0x33abb8(0x2b4))[_0x33abb8(0x28a)]()[_0x33abb8(0x284)](_0x52e71e)[_0x33abb8(0x1fa)](_0x33abb8(0x2b4));});_0x52e71e();'use strict';const ccxt=require('ccxt'),low=require(_0x8496ec(0x193)),FileSync=require(_0x8496ec(0x16c)),fs=require('fs'),fns=require(_0x8496ec(0x231)),forge=require(_0x8496ec(0x10b)),util=require(_0x8496ec(0x112)),argv=require('yargs/yargs')(process[_0x8496ec(0x135)][_0x8496ec(0x1b7)](0x2))[_0x8496ec(0x135)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x8496ec(0x1b1),_0x8496ec(0x21e),_0x8496ec(0x1e2),'USDT',_0x8496ec(0x2be),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x8496ec(0x20e)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x4;let enableFiatToggle;const serverversion=require('./version.json')[_0x8496ec(0x138)],environment=require('./version.json')[_0x8496ec(0x21c)]||_0x8496ec(0x27c),botID=process[_0x8496ec(0x135)][0x2]||_0x8496ec(0x18c),pattern=/^[0-9]{3}$/;!pattern[_0x8496ec(0x211)](botID)&&(console[_0x8496ec(0x280)](_0x8496ec(0x296)+botID+_0x8496ec(0x1f5)),killBot());const userID=process[_0x8496ec(0x135)][0x3]||'',configpath=userID?_0x8496ec(0x14d)+userID+'/':_0x8496ec(0x14d),logspath=userID?'./logs/'+userID+'/':_0x8496ec(0x1dd),loggerfile=fs[_0x8496ec(0x106)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x8496ec(0x153)](configpath)&&fs[_0x8496ec(0x17b)](configpath);!fs[_0x8496ec(0x153)](logspath)&&fs[_0x8496ec(0x17b)](logspath);const configfile=configpath+_0x8496ec(0x178)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x8496ec(0x173),performancefile=configpath+'bot-'+botID+_0x8496ec(0x26e),coinresultsfile=configpath+_0x8496ec(0x178)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x8496ec(0x1b0),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x8496ec(0x223)]({'logs':[],'version':serverversion})[_0x8496ec(0x29e)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x8496ec(0x223)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x8496ec(0x29e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x8496ec(0x29e)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4f1491=>{console['log'](_0x4f1491);},'simple':_0xceade=>{const _0x1a38b7=_0x8496ec;console[_0x1a38b7(0x280)](_0xceade),loggerfile['write'](util[_0x1a38b7(0x1ee)](_0xceade)+'\x0a');},'full':async(_0x28f208,_0x2b69ab='')=>{const _0x26c01e=_0x8496ec;let _0x12f2df;if(config[_0x26c01e(0x242)])_0x12f2df=getTimeStamp()+':\x20'+config[_0x26c01e(0x2c1)]+_0x26c01e(0x295)+_0x28f208;else _0x12f2df=getTimeStamp()+':\x20Bot\x20'+botID+_0x26c01e(0x295)+_0x28f208;console['log'](_0x12f2df),loggerfile[_0x26c01e(0x29e)](util['format'](_0x12f2df)+'\x0a'),_0x2b69ab&&(console[_0x26c01e(0x280)](_0x2b69ab),loggerfile[_0x26c01e(0x29e)](util[_0x26c01e(0x1ee)](_0x2b69ab)+'\x0a'));},'debug':async(_0x37b477,_0x18eac3='')=>{const _0x1e0632=_0x8496ec;let _0x130885;if(config[_0x1e0632(0x242)])_0x130885=getTimeStamp()+':\x20'+config[_0x1e0632(0x2c1)]+_0x1e0632(0x15d)+_0x37b477;else _0x130885=getTimeStamp()+_0x1e0632(0x12f)+botID+_0x1e0632(0x15d)+_0x37b477;if(debugging)console[_0x1e0632(0x280)](_0x130885);loggerfile['write'](util['format'](_0x130885)+'\x0a');if(_0x18eac3){if(debugging)console[_0x1e0632(0x280)](_0x18eac3);loggerfile[_0x1e0632(0x29e)](util[_0x1e0632(0x1ee)](_0x18eac3)+'\x0a');}}};process['on'](_0x8496ec(0x1f0),function(_0x45ff54){const _0x2c42b9=_0x8496ec;handleError(_0x45ff54,_0x2c42b9(0x1f0));});settings[_0x8496ec(0x257)]!=config[_0x8496ec(0x257)]&&updateTimeshift(settings[_0x8496ec(0x257)]);settings[_0x8496ec(0x26c)]!=config[_0x8496ec(0x26c)]&&updateOnepagemode(settings[_0x8496ec(0x26c)]);(settings[_0x8496ec(0x1fd)]&&!config[_0x8496ec(0x1fd)]||!settings['marketcapApi']&&config[_0x8496ec(0x1fd)])&&updateMarketcapApi(settings[_0x8496ec(0x1fd)]);process[_0x8496ec(0x254)]({'started':_0x8496ec(0x1d3)},_0x36311b=>{}),initializeProcessListeners();function proxyEmit(_0x1609bb,_0x23368b=null){const _0x512040=_0x8496ec;process[_0x512040(0x254)]({'function':_0x1609bb,'args':_0x23368b},_0x4df846=>{});}function initializeProcessListeners(){const _0x2ee0dc=_0x8496ec;process['on'](_0x2ee0dc(0x151),_0x2119e1=>{const _0x2df25f=_0x2ee0dc;switch(Object[_0x2df25f(0x290)](_0x2119e1)[0x0]){case _0x2df25f(0x257):_0x2119e1[_0x2df25f(0x257)]!=undefined&&(settings[_0x2df25f(0x257)]=_0x2119e1[_0x2df25f(0x257)],updateTimeshift(settings[_0x2df25f(0x257)]));break;case _0x2df25f(0x26c):_0x2119e1[_0x2df25f(0x26c)]!=undefined&&(settings[_0x2df25f(0x26c)]=_0x2119e1[_0x2df25f(0x26c)],updateOnepagemode(settings['onepagemode']));break;case _0x2df25f(0x1fd):_0x2119e1['marketcapApi']!=undefined&&(settings[_0x2df25f(0x1fd)]=_0x2119e1[_0x2df25f(0x1fd)],updateMarketcapApi(settings['marketcapApi']));break;case _0x2df25f(0x1bc):_0x2119e1[_0x2df25f(0x1bc)]!=undefined&&(bots=JSON[_0x2df25f(0xff)](_0x2119e1[_0x2df25f(0x1bc)]),proxyEmit('bots',bots));break;case _0x2df25f(0x1db):switch(_0x2119e1[_0x2df25f(0x1db)]){case _0x2df25f(0xfd):initclient();break;case _0x2df25f(0x17a):toggleBotMode();break;case _0x2df25f(0x1ba):emitHistory(_0x2119e1['args']);break;case _0x2df25f(0x285):deleteHistoryAlerts(_0x2119e1[_0x2df25f(0x123)]);break;case'getPortfolio':getPortfolio(_0x2119e1[_0x2df25f(0x123)]);break;case _0x2df25f(0x1c3):storeConfiguration(_0x2119e1[_0x2df25f(0x123)]);break;case _0x2df25f(0x281):storeHeadless(_0x2119e1[_0x2df25f(0x123)]);break;case'storeFiat':storeFiat(_0x2119e1[_0x2df25f(0x123)]);break;case _0x2df25f(0x1ce):resetHistory();break;case _0x2df25f(0x161):getStartingBalances(getNormalizedPerformance());break;case _0x2df25f(0x152):placeOrder(_0x2119e1[_0x2df25f(0x123)]);break;case'cancelLoading':cancelLoading();break;case _0x2df25f(0x2a8):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2df25f(0x100):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x276f0f=![]){const _0x4c50b9=_0x8496ec;logger[_0x4c50b9(0x219)](_0x4c50b9(0x274)+(_0x276f0f?_0x4c50b9(0x23b):'no\x20exchange\x20reloaded')+_0x4c50b9(0x17e)+config[_0x4c50b9(0x1cb)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x276f0f)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x4c50b9(0x154)){loadingProgress=0x0;_0x276f0f&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x4c50b9(0x202),emittedConfiguration()),initialPerformanceStored=![]);const _0x2cef04=await getCoins();[currentCoins,currentCoinsAll]=_0x2cef04,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c50b9(0x219)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c50b9(0x19e)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1c5b1d=![]){const _0x32b109=_0x8496ec;logger[_0x32b109(0x219)](_0x32b109(0x187)+(_0x1c5b1d?_0x32b109(0x2a3):'complete')+_0x32b109(0x134)+config[_0x32b109(0x1cb)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1c5b1d){getBalances();return;}coinsLoaded=![];if(config[_0x32b109(0x1aa)]!=''&&config['apiKey']!=_0x32b109(0x154)){loadingProgress=0x1;const _0x3f6b61=await getCoins();[currentCoins,currentCoinsAll]=_0x3f6b61,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x32b109(0x219)](_0x32b109(0x25c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x32b109(0x19e)]==0x0&&allOpenOrders[_0x32b109(0x19e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3d5288){const _0x2e2aba=_0x8496ec;let _0x531dcd=![];if(_0x3d5288)_0x531dcd=!![];let _0x531c4d;_0x531dcd?_0x531c4d=_0x3d5288['map'](_0x2381e6=>_0x2381e6['coin']):_0x531c4d=currentCoinsAll[_0x2e2aba(0x23a)](_0x6d9e22=>_0x6d9e22['coin']);if(!config[_0x2e2aba(0x1fd)]||!_0x531dcd&&!config[_0x2e2aba(0x113)]||_0x531c4d[_0x2e2aba(0x19e)]==0x0)return;let _0x2879a3=null;try{_0x2879a3=await axios[_0x2e2aba(0x1f1)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2e2aba(0x1fd)]},'params':{'symbol':_0x531c4d[_0x2e2aba(0x28a)]()}});}catch(_0x3ef64f){_0x2879a3=null,_0x3ef64f[_0x2e2aba(0x28a)]()[_0x2e2aba(0x2b9)](_0x2e2aba(0x1df))?(config[_0x2e2aba(0x1fd)]=![],updateConfig(),proxyEmit(_0x2e2aba(0x202),emittedConfiguration()),logHistory('error',_0x2e2aba(0x27a))):(logHistory(_0x2e2aba(0x258),_0x2e2aba(0x126)+schedulerInterval/(0x3c*0x3e8)+_0x2e2aba(0x146)),logger[_0x2e2aba(0x219)]('Error\x20details:',_0x3ef64f[_0x2e2aba(0x28a)]()+_0x2e2aba(0x1c7)+_0x3ef64f['code']));}if(_0x2879a3){let _0x155571=0x0;const _0x340744=_0x2879a3[_0x2e2aba(0x188)];_0x531c4d[_0x2e2aba(0x175)](_0x1061df=>{const _0xfb4be7=_0x2e2aba;if(_0x340744[_0xfb4be7(0x188)][_0x1061df][0x0])_0x155571+=_0x340744[_0xfb4be7(0x188)][_0x1061df][0x0][_0xfb4be7(0x196)]['USD'][_0xfb4be7(0x1e4)];}),_0x531c4d[_0x2e2aba(0x175)](_0x51d55d=>{const _0x25f206=_0x2e2aba,_0x4b2274=_0x340744[_0x25f206(0x188)][_0x51d55d][0x0]?_0x340744[_0x25f206(0x188)][_0x51d55d][0x0]['quote'][_0x25f206(0x1b1)][_0x25f206(0x1e4)]:0x0;if(_0x531dcd){const _0x29f8b5=_0x3d5288['find'](_0x1ec131=>_0x1ec131['coin']==_0x51d55d);_0x29f8b5&&(_0x29f8b5[_0x25f206(0x2bf)]=_0x4b2274);}else{const _0xfa696b=currentCoins['find'](_0x155179=>_0x155179[_0x25f206(0x198)]==_0x51d55d);_0xfa696b&&(_0xfa696b[_0x25f206(0x2bf)]=_0x4b2274);const _0x53f97c=currentCoinsAll['find'](_0x46dfac=>_0x46dfac[_0x25f206(0x198)]==_0x51d55d);_0x53f97c&&(_0x53f97c[_0x25f206(0x2bf)]=_0x4b2274);}}),!_0x531dcd&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x564f2d=_0x8496ec,_0x2743e7=0x2;let _0x3aeaf6=0x0,_0x3285b9=0x0,_0x597460=0x0,_0x781711=0x0,_0x450f10=0x0;config['portfolio'][_0x564f2d(0x175)](_0x5d84f5=>{const _0xf66d96=_0x564f2d;if(!_0x5d84f5['excluded']){_0x597460++,_0x3aeaf6+=_0x5d84f5[_0xf66d96(0x1a2)];if(_0x5d84f5['slider']===-0x1){_0x3aeaf6++;const _0x50b0d1=currentCoinsAll[_0xf66d96(0x1b9)](_0x52c981=>_0x52c981[_0xf66d96(0x198)]==_0x5d84f5[_0xf66d96(0x198)]);_0x50b0d1&&(_0x781711+=_0x50b0d1[_0xf66d96(0x2bf)],_0x450f10+=Math[_0xf66d96(0x1c0)](_0x50b0d1[_0xf66d96(0x2bf)]));}if(_0x5d84f5[_0xf66d96(0x1a2)]!==-0x1)_0x3285b9++;}});let _0x1f707c;const _0x4ad04e=0x64-_0x3aeaf6,_0x176850=_0x597460-_0x3285b9;_0x1f707c=_0x176850===0x0?_0x3aeaf6:Math[_0x564f2d(0x29d)](0x64,_0x3aeaf6),config[_0x564f2d(0x1ca)][_0x564f2d(0x175)](_0x2c6b58=>{const _0x18e112=_0x564f2d,_0x43efd5=currentCoinsAll[_0x18e112(0x1b9)](_0x5de45a=>_0x5de45a[_0x18e112(0x198)]==_0x2c6b58[_0x18e112(0x198)]);_0x43efd5&&(_0x2c6b58[_0x18e112(0x2bf)]=_0x43efd5['marketcap']);if(!_0x2c6b58['excluded']){if(_0x1f707c<=0x64){if(_0x2c6b58[_0x18e112(0x1a2)]===-0x1){if(_0x781711!==0x0&&config[_0x18e112(0x113)]){if(_0x43efd5){if(config[_0x18e112(0x113)]==_0x18e112(0x2bf))_0x2c6b58[_0x18e112(0x2c3)]=(_0x4ad04e/(_0x781711/_0x43efd5[_0x18e112(0x2bf)]))['toFixed'](_0x2743e7);else config['marketcapEnabled']==_0x18e112(0x24e)&&(_0x2c6b58['distribution']=(_0x4ad04e/(_0x450f10/Math[_0x18e112(0x1c0)](_0x43efd5[_0x18e112(0x2bf)])))[_0x18e112(0x22a)](_0x2743e7));}}}}}}),updateConfig();}function updateConfig(){const _0x4ee289=_0x8496ec;let _0x37649d=dbConfig['get'](_0x4ee289(0x278))[_0x4ee289(0x1b9)]({'botID':botID})[_0x4ee289(0x20d)]();_0x37649d&&dbConfig['get'](_0x4ee289(0x278))[_0x4ee289(0x1b9)]({'botID':botID})['assign'](config)['write']();}function logMemory(){const _0xd7b6e7=_0x8496ec;if(environment!=_0xd7b6e7(0x298))return;const _0x1c209b=process['memoryUsage']()[_0xd7b6e7(0x260)]/0x400/0x400;logger['debug'](_0xd7b6e7(0x24a)+process[_0xd7b6e7(0x162)]+_0xd7b6e7(0x232)+formatResult(_0x1c209b,0x1)+_0xd7b6e7(0x217));}async function startScheduler(){const _0x1a0271=shiftedTime()['getHours']();getMarketCap(),_0x1a0271==0x1&&logMemory(),(_0x1a0271==0x2||_0x1a0271==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4cc1be=![]){const _0x9c759f=_0x8496ec;logger[_0x9c759f(0x219)]('Initiating\x20bot\x20restart');if(!_0x4cc1be)while(lockOrders!=ORDERS[_0x9c759f(0x179)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x9c759f(0x250)},_0x298522=>{});}async function initExchange(_0x10639e=config[_0x8496ec(0x1cb)],_0x4efcd9=config[_0x8496ec(0x1aa)],_0x30c7e5=config[_0x8496ec(0x2c5)],_0x950ffa=config[_0x8496ec(0x21f)]){const _0x31b327=_0x8496ec;if(exchange){logger[_0x31b327(0x219)](_0x31b327(0x1a0));return;}logger[_0x31b327(0x219)](_0x31b327(0x206));!supportedExchanges()['includes'](_0x10639e)&&(logHistory(_0x31b327(0x258),_0x31b327(0x1f9)+_0x10639e+_0x31b327(0x204)),killBot());const _0x285dbc=ccxt[_0x31b327(0x18b)][_0x10639e[_0x31b327(0x273)]()];exchange=new _0x285dbc({'apiKey':_0x4efcd9,'secret':_0x30c7e5,'options':{'defaultType':_0x31b327(0x136)}});if(_0x950ffa)exchange[_0x31b327(0x174)]=_0x950ffa;}function updateExchange(_0x5d760b,_0x39ff26,_0x55be8d=null){const _0x2434cc=_0x8496ec;exchange[_0x2434cc(0x1aa)]=_0x5d760b,exchange[_0x2434cc(0x2c5)]=_0x39ff26,exchange[_0x2434cc(0x21f)]=_0x55be8d,logger[_0x2434cc(0x219)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x4c278c=_0x8496ec;let _0x34c1d1=config['basecoin']==_0x4c278c(0x2b8)?_0x4c278c(0x2b8):config[_0x4c278c(0x222)]=='PAXG'?'PAXG':_0x4c278c(0x2ad),_0x389788=allSymbols[_0x4c278c(0x2b9)](_0x34c1d1+_0x4c278c(0x167))?_0x4c278c(0x1b1):allSymbols['includes'](_0x34c1d1+_0x4c278c(0x12e))?_0x4c278c(0x1f3):_0x4c278c(0x1b4),_0x9f8f4e=allSymbols[_0x4c278c(0x2b9)](_0x34c1d1+_0x4c278c(0x157))?_0x4c278c(0x1b4):_0x389788;enableFiatToggle=!![],_0x389788==_0x4c278c(0x1b4)&&(enableFiatToggle=![],storeFiat(_0x4c278c(0x1b4))),_0x9f8f4e!=_0x4c278c(0x1b4)&&(enableFiatToggle=![],storeFiat(_0x4c278c(0x1b1))),stablecoins={'eur':{'coin':''+_0x34c1d1+_0x9f8f4e,'symbol':_0x34c1d1+'/'+_0x9f8f4e},'usd':{'coin':''+_0x34c1d1+_0x389788,'symbol':_0x34c1d1+'/'+_0x389788}};}async function initwsCcxt(){const _0x1bf803=_0x8496ec;initCycle++;const _0x46de71=initCycle;let _0x526fce=[];config[_0x1bf803(0x1ca)][_0x1bf803(0x175)](_0x4cf381=>{const _0x472aeb=_0x1bf803;if(!_0x4cf381['excluded']&&_0x4cf381[_0x472aeb(0x198)]!=config[_0x472aeb(0x222)])_0x526fce[_0x472aeb(0x1f8)](_0x4cf381[_0x472aeb(0x130)]);});if(!_0x526fce['includes'](stablecoins[_0x1bf803(0x28d)][_0x1bf803(0x130)]))_0x526fce[_0x1bf803(0x1f8)](stablecoins['eur'][_0x1bf803(0x130)]);if(!_0x526fce[_0x1bf803(0x2b9)](stablecoins[_0x1bf803(0x262)][_0x1bf803(0x130)]))_0x526fce[_0x1bf803(0x1f8)](stablecoins[_0x1bf803(0x262)][_0x1bf803(0x130)]);if(config['exchange']['startsWith'](_0x1bf803(0x13a))&&config[_0x1bf803(0x222)]!=_0x1bf803(0x227)){if(!_0x526fce[_0x1bf803(0x2b9)](_0x1bf803(0x1e1)+config[_0x1bf803(0x222)]))_0x526fce[_0x1bf803(0x1f8)]('BNB/'+config[_0x1bf803(0x222)]);}loadCoins(_0x526fce),_0x526fce=validateSymbols(_0x526fce);const _0x559f4e=async _0x4a6e1a=>{let _0x229ea2;try{const _0xc03b3f=await getTickers(_0x4a6e1a);Object['entries'](_0xc03b3f)['forEach'](_0x3f3111=>{const _0x590c06=_0x33f9;_0x229ea2=_0x3f3111[0x1][_0x590c06(0x130)],gTicker[noslash(_0x229ea2)]=_0x3f3111[0x1][_0x590c06(0x19d)],gChange[_0x229ea2]=_0x3f3111[0x1]['percentage'];});}catch(_0xb6d4e1){await handleError(_0xb6d4e1,'initTickers()',_0x229ea2);}},_0x2fff68=async _0x14af8f=>{const _0x462a3e=_0x1bf803;while(initCycle==_0x46de71){if(!botPaused)try{const _0x2b8c0f=await exchange[_0x462a3e(0x27f)](_0x14af8f);gTicker[noslash(_0x2b8c0f[0x0]['symbol'])]=_0x2b8c0f[0x0]['price'];}catch(_0x263872){if(!exchangeStopped)await handleError(_0x263872,_0x462a3e(0x207),_0x14af8f);}else await sleep(0x64);}},_0x3f8139=async _0x58a605=>{const _0xbaa144=_0x1bf803;while(initCycle==_0x46de71){if(!botPaused)try{const _0xffd51a=await exchange[_0xbaa144(0x137)](_0x58a605),_0x36ce31=_0xffd51a[_0xbaa144(0x28f)]();gTicker[noslash(_0x36ce31[_0xbaa144(0x130)])]=_0x36ce31['price'];}catch(_0x17c83d){if(!exchangeStopped)await handleError(_0x17c83d,_0xbaa144(0x228),_0x58a605[_0xbaa144(0x28a)]());}else await sleep(0x64);}},_0x22c6fa=async _0x371e99=>{const _0x4b8ae8=_0x1bf803;while(initCycle==_0x46de71){if(!botPaused){let _0x5b3611;try{await sleep(0x3c*0x3e8);const _0xf42ac9=await getTickers(_0x371e99);Object[_0x4b8ae8(0x2a9)](_0xf42ac9)['forEach'](_0x51b14=>{const _0x72f3f=_0x4b8ae8;_0x5b3611=_0x51b14[0x1][_0x72f3f(0x130)],gChange[_0x5b3611]=_0x51b14[0x1]['percentage'];});}catch(_0x500f1e){if(!exchangeStopped)await handleError(_0x500f1e,_0x4b8ae8(0x287),_0x5b3611);}}else await sleep(0x64);}},_0x3f9805=async _0x55e2b=>{const _0x511ed8=_0x1bf803;while(initCycle==_0x46de71){if(!botPaused)try{const _0x248286=await exchange[_0x511ed8(0x13d)](_0x55e2b);initCycle==_0x46de71&&_0x248286[_0x511ed8(0x175)](_0x298f01=>{updateNumberCoinsCcxt(_0x298f01);});}catch(_0x797c69){if(!exchangeStopped)await handleError(_0x797c69,_0x511ed8(0x1c9));}else await sleep(0x64);}};_0x559f4e(_0x526fce),_0x22c6fa(_0x526fce),exchange['has'][_0x1bf803(0x137)]&&!(config[_0x1bf803(0x1cb)]=='Bybit'&&_0x526fce[_0x1bf803(0x19e)]>0xa)?_0x3f8139(_0x526fce):_0x526fce[_0x1bf803(0x175)](_0x5148d4=>{_0x2fff68(_0x5148d4);}),_0x526fce[_0x1bf803(0x175)](_0x456827=>{_0x3f9805(_0x456827);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1e8464){const _0xffd18=_0x8496ec;let _0x3c6389={};try{if(config[_0xffd18(0x1cb)]!=_0xffd18(0x251))_0x3c6389=await exchange[_0xffd18(0x1b6)](_0x1e8464);else for(const _0x23e619 of _0x1e8464){const _0x517d54=await exchange[_0xffd18(0x27d)](_0x23e619);_0x3c6389[_0x23e619]=_0x517d54;}return _0x3c6389;}catch(_0x290934){throw _0x290934;}}function setBlockTransactionDetection(_0x2a7676){const _0x4ba41b=_0x8496ec;blockTransactionDetection=_0x2a7676,logger[_0x4ba41b(0x219)](_0x4ba41b(0x2c2)+blockTransactionDetection);}async function detectLiquidityChange(_0x16b286=0x0){const _0x515544=_0x8496ec;transactionDetectionOngoing=!![];try{const _0x33be4b=await getCoins(_0x16b286),[_0x3713bb,_0x37f4c0]=_0x33be4b;let _0x4845db=[];currentCoins[_0x515544(0x175)](_0x5299c2=>{const _0x1fe42f=_0x515544,_0x5b787d=_0x3713bb['find'](_0x3c8ada=>_0x3c8ada[_0x1fe42f(0x198)]==_0x5299c2[_0x1fe42f(0x198)]);if(_0x5b787d){if(_0x5299c2[_0x1fe42f(0x107)]!=_0x5b787d[_0x1fe42f(0x107)]){let _0x587901;if(_0x5299c2[_0x1fe42f(0x198)]!=config[_0x1fe42f(0x222)]){const _0x4f9db0=gTicker[noslash(_0x5299c2[_0x1fe42f(0x130)])];_0x587901=_0x5299c2[_0x1fe42f(0x201)]?0x1/_0x4f9db0:_0x4f9db0;}else _0x587901=0x1;_0x4845db[_0x1fe42f(0x1f8)]({'coin':_0x5299c2[_0x1fe42f(0x198)],'symbol':_0x5299c2['symbol'],'price':_0x587901,'number':Number(formatResult(_0x5b787d['number']-_0x5299c2[_0x1fe42f(0x107)],0x8)),'basecoinvalue':_0x587901*(_0x5b787d[_0x1fe42f(0x107)]-_0x5299c2[_0x1fe42f(0x107)])});}}});if(_0x4845db[_0x515544(0x19e)]>0x0&&!blockTransactionDetection)for(const _0x48a356 of _0x4845db){if(config[_0x515544(0x235)]){logger[_0x515544(0x219)](_0x515544(0x163)+_0x48a356[_0x515544(0x22c)]+_0x515544(0x230)+lastFees[_0x515544(0x184)]);if(lastFees[_0x515544(0x184)]==0x0||Math[_0x515544(0x248)](_0x48a356[_0x515544(0x22c)])>lastFees[_0x515544(0x184)]*0x3){if(config[_0x515544(0x235)]==_0x515544(0x1fc)){delete _0x48a356[_0x515544(0x130)],delete _0x48a356['basecoinvalue'];let _0x32a4b6=[],_0x3d484c=[...config[_0x515544(0x14f)]]||[],_0x2f6d4e=config['liquidity'];_0x3d484c[_0x515544(0x170)]((_0x25673,_0x17f72b)=>_0x25673[_0x515544(0x2bb)]>_0x17f72b[_0x515544(0x2bb)]?-0x1:_0x17f72b[_0x515544(0x2bb)]>_0x25673[_0x515544(0x2bb)]?0x1:0x0);const _0x548b94=getDate();if(_0x3d484c[0x0]){const _0x532aa5=fns[_0x515544(0xff)](_0x3d484c[0x0][_0x515544(0x2bb)],_0x515544(0x23c),new Date()),_0x510f7e=fns[_0x515544(0xff)](_0x548b94,_0x515544(0x23c),new Date());if(fns['isEqual'](_0x532aa5,_0x510f7e)){_0x32a4b6=_0x3d484c[0x0][_0x515544(0x164)];const _0x491df8=_0x32a4b6[_0x515544(0x1b9)](_0x354069=>_0x354069['coin']==_0x48a356['coin']);_0x491df8?(_0x491df8[_0x515544(0x107)]+=_0x48a356['number'],_0x491df8[_0x515544(0x107)]==0x0&&(_0x32a4b6=_0x32a4b6[_0x515544(0x17d)](_0xf94e05=>{const _0x17d7c6=_0x515544;return _0xf94e05['coin']!=_0x48a356[_0x17d7c6(0x198)];}))):_0x32a4b6[_0x515544(0x1f8)](_0x48a356);const _0x3d0916=_0x2f6d4e[_0x515544(0x1b9)](_0x3d3981=>_0x3d3981[_0x515544(0x2bb)]==_0x548b94);_0x3d0916['changes']=_0x32a4b6;}else _0x2f6d4e[_0x515544(0x1f8)]({'date':_0x548b94,'changes':[_0x48a356]});}const _0x37813a=_0x2f6d4e[_0x515544(0x1b9)](_0x4f3018=>_0x4f3018[_0x515544(0x2bb)]==_0x548b94);if(_0x37813a){let _0x470726=!![];_0x37813a[_0x515544(0x164)]['forEach'](_0xfe52c7=>{const _0x5f535e=_0x515544;if(_0xfe52c7[_0x5f535e(0x107)]!=0x0)_0x470726=![];}),_0x470726&&(_0x2f6d4e=_0x2f6d4e[_0x515544(0x17d)](_0x52bb64=>{const _0x39cba4=_0x515544;return _0x52bb64[_0x39cba4(0x2bb)]!=_0x548b94;}));}let _0x46e95b=dbConfig[_0x515544(0x1f1)](_0x515544(0x278))['find']({'botID':botID})[_0x515544(0x20d)]();_0x46e95b&&(dbConfig['get'](_0x515544(0x278))['find']({'botID':botID})[_0x515544(0x1af)]({'liquidity':_0x2f6d4e})[_0x515544(0x29e)](),config[_0x515544(0x14f)]=_0x2f6d4e);logHistory(_0x515544(0x252),_0x515544(0x220)+Math['abs'](_0x48a356[_0x515544(0x107)])+'\x20'+_0x48a356[_0x515544(0x198)]+'\x20'+(_0x48a356[_0x515544(0x107)]>0x0?'added':_0x515544(0x19f))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x515544(0x202),emittedConfiguration());const _0x4fb95=getNormalizedPerformance();emitPerformance(_0x4fb95),getStartingBalances(_0x4fb95),logger[_0x515544(0x219)](_0x515544(0x265));}else config[_0x515544(0x235)]==_0x515544(0x18a)&&(config[_0x515544(0x10e)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x515544(0x220)+Math[_0x515544(0x248)](_0x48a356[_0x515544(0x107)])+'\x20'+_0x48a356[_0x515544(0x198)]+'\x20'+(_0x48a356['number']>0x0?_0x515544(0x203):_0x515544(0x19f))+_0x515544(0x12a))):logger[_0x515544(0x219)]('Portfolio\x20change\x20detected:\x20'+Math[_0x515544(0x248)](_0x48a356[_0x515544(0x107)])+'\x20'+_0x48a356[_0x515544(0x198)]+'\x20'+(_0x48a356[_0x515544(0x107)]>0x0?_0x515544(0x203):_0x515544(0x19f))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x515544(0x219)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x515544(0x248)](_0x48a356[_0x515544(0x107)])+'\x20'+_0x48a356[_0x515544(0x198)]+'\x20'+(_0x48a356['number']>0x0?'added':_0x515544(0x19f)));}else logger[_0x515544(0x219)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x48a356[_0x515544(0x107)])+'\x20'+_0x48a356['coin']+'\x20'+(_0x48a356['number']>0x0?_0x515544(0x203):_0x515544(0x19f))+_0x515544(0x1ed));}currentCoins=_0x3713bb,currentCoinsAll=_0x37f4c0;}catch(_0x3ee03c){if(!exchangeStopped)await handleError(_0x3ee03c,_0x515544(0x28e));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x417615=_0x8496ec;logger[_0x417615(0x219)](_0x417615(0x26a));try{markets=await exchange[_0x417615(0x29c)]();}catch(_0x322bfc){logger[_0x417615(0x219)](_0x417615(0x1d1)+_0x322bfc[_0x417615(0x28a)]());if(markets){}else(_0x322bfc[_0x417615(0x28a)]()['toLowerCase']()[_0x417615(0x2b9)]('timestamp')||_0x322bfc['toString']()[_0x417615(0x273)]()[_0x417615(0x2b9)](_0x417615(0x181)))&&logHistory(_0x417615(0x258),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),logHistory(_0x417615(0x258),_0x417615(0x1c5)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x417615(0x219)](_0x417615(0x256),_0x322bfc),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x417615(0x2a9)](markets)[_0x417615(0x175)](_0x1686cc=>{const _0x6505ce=_0x417615;_0x1686cc[0x1][_0x6505ce(0x2b6)]&&_0x1686cc[0x1][_0x6505ce(0x136)]&&allSymbols[_0x6505ce(0x1f8)](_0x1686cc[0x0]);});}function validateSymbols(_0x392985){const _0x296749=_0x8496ec;let _0x19926d=[];return _0x392985[_0x296749(0x175)](_0x38c27b=>{const _0x4d3ae3=_0x296749;!allSymbols[_0x4d3ae3(0x2b9)](_0x38c27b)?logHistory(_0x4d3ae3(0x258),_0x4d3ae3(0x25d)+_0x38c27b+_0x4d3ae3(0x218)):_0x19926d[_0x4d3ae3(0x1f8)](_0x38c27b);}),_0x19926d;}async function initclient(){const _0x28539a=_0x8496ec;proxyEmit(_0x28539a(0x202),emittedConfiguration()),proxyEmit(_0x28539a(0x216),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x28539a(0x20b),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xf95c0f=getNormalizedPerformance();emitPerformance(_0xf95c0f),getStartingBalances(_0xf95c0f);}async function toggleBotMode(){const _0x4fdbc7=_0x8496ec;let _0x12c148=dbConfig[_0x4fdbc7(0x1f1)]('bot')['find']({'botID':botID})['value']();if(_0x12c148){const _0x5c0d51=!_0x12c148[_0x4fdbc7(0x10e)];dbConfig['get'](_0x4fdbc7(0x278))[_0x4fdbc7(0x1b9)]({'botID':botID})[_0x4fdbc7(0x1af)]({'headless':_0x5c0d51})['write'](),config[_0x4fdbc7(0x10e)]=_0x5c0d51,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1bfcda=_0x8496ec;process[_0x1bfcda(0x254)]({'updatebotmanager':!![]},_0x31fce1=>{}),logger[_0x1bfcda(0x219)](_0x1bfcda(0x127)+config[_0x1bfcda(0x10e)]);}async function loadCoins(_0x209b13){const _0x18a610=_0x8496ec;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4e2acd,_0x173bdf=0x0,_0x567d6f=0x0;_0x209b13[_0x18a610(0x175)](_0x9c69c5=>{const _0x1535cd=_0x18a610;loading[_0x1535cd(0x16b)][_0x1535cd(0x1f8)](_0x9c69c5);}),loadingCanceled=![];let _0x396f89=![];while(_0x4e2acd!=_0x209b13[_0x18a610(0x19e)]+maxLoadingProgress){_0x4e2acd=loadingProgress,_0x209b13['forEach'](_0x353a86=>{const _0x40abe2=_0x18a610;if(gTicker[noslash(_0x353a86)]){loading[_0x40abe2(0x16b)]=loading[_0x40abe2(0x16b)][_0x40abe2(0x17d)](_0x538c37=>_0x538c37!=_0x353a86);if(!watchedSymbols[_0x40abe2(0x2b9)](_0x353a86))watchedSymbols[_0x40abe2(0x1f8)](_0x353a86);_0x4e2acd++;}}),loading[_0x18a610(0x141)]=Math[_0x18a610(0x1d9)](_0x4e2acd/(_0x209b13[_0x18a610(0x19e)]+maxLoadingProgress)*0x64);loading[_0x18a610(0x141)]!=0x64&&(_0x567d6f>0x1e*0x5&&(loading[_0x18a610(0x259)]=!![],emitLoadingProgress()),_0x567d6f>0x78*0x5&&!_0x396f89&&(_0x396f89=!![],logHistory('error',_0x18a610(0x13b)+loading[_0x18a610(0x16b)][_0x18a610(0x1b2)](',\x20')+_0x18a610(0x1a7)),logHistory(_0x18a610(0x258),_0x18a610(0x158)+loadCoinsRetryInterval/0xea60+_0x18a610(0x253)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x173bdf!=loading['progress']&&(_0x173bdf=loading[_0x18a610(0x141)],emitLoadingProgress()),_0x567d6f++,await sleep(0xc8);}_0x4e2acd==_0x209b13['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':'running'},_0x7361c8=>{}),_0x396f89&&logHistory('success',_0x18a610(0x16e)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x202b12=_0x8496ec;proxyEmit(_0x202b12(0x202),{...emittedConfiguration(),'configstate':_0x202b12(0x103)});}function emitLoadingProgress(){const _0x41b4fe=_0x8496ec;proxyEmit(_0x41b4fe(0x116),loading);}async function getFiat(){const _0x423795=_0x8496ec;let _0x423dac=gTicker[stablecoins['eur'][_0x423795(0x198)]],_0x330231=gTicker[stablecoins['usd'][_0x423795(0x198)]];return{'eur':Number(_0x423dac),'usd':Number(_0x330231)};}function capitalize(_0x19174c){const _0x5e0ba3=_0x8496ec;return _0x19174c[_0x5e0ba3(0x132)](0x0,0x1)[_0x5e0ba3(0x140)]()+_0x19174c[_0x5e0ba3(0x132)](0x1);}function supportedExchanges(){const _0x4bdbea=_0x8496ec,_0x314fd2=['ws',_0x4bdbea(0x1b6),_0x4bdbea(0x27d),_0x4bdbea(0x27f),_0x4bdbea(0x13d),_0x4bdbea(0x16d),_0x4bdbea(0x15f),_0x4bdbea(0x19b),_0x4bdbea(0x182)];let _0x11744f=[],_0x183a6e=[],_0x5cb42e=ccxt[_0x4bdbea(0x18b)][_0x4bdbea(0x216)];_0x5cb42e[_0x4bdbea(0x175)](_0x149616=>{const _0x36962e=_0x4bdbea;try{const _0x189bc0=new ccxt['pro'][_0x149616]();_0x183a6e[_0x36962e(0x1f8)](_0x189bc0);}catch(_0x2259a9){}}),_0x183a6e[_0x4bdbea(0x175)](_0x10a0e7=>{const _0x1690b8=_0x4bdbea;let _0x45f059=0x0;_0x314fd2[_0x1690b8(0x175)](_0xe67b3=>{const _0x1fd67d=_0x1690b8;_0xe67b3 in _0x10a0e7[_0x1fd67d(0x129)]&&_0x10a0e7['has'][_0xe67b3]&&_0x45f059++;}),_0x45f059==_0x314fd2[_0x1690b8(0x19e)]&&_0x11744f[_0x1690b8(0x1f8)](capitalize(_0x10a0e7['id']));});let _0x396a1e=[];return _0x5cb42e['forEach'](_0x2ab831=>{const _0x585b3f=_0x4bdbea;_0x2ab831=capitalize(_0x2ab831);if(!_0x11744f[_0x585b3f(0x2b9)](_0x2ab831))_0x396a1e[_0x585b3f(0x1f8)](_0x2ab831);}),_0x11744f;}function setStartDatePerformance(){const _0x3a6e29=_0x8496ec;if(config&&config[_0x3a6e29(0x14f)][0x0][_0x3a6e29(0x164)][_0x3a6e29(0x19e)]!=0x0){const _0x348c82=config['liquidity'][0x0][_0x3a6e29(0x164)];dbPerformance[_0x3a6e29(0x1f1)](_0x3a6e29(0x188))[_0x3a6e29(0x1b9)]({'date':config[_0x3a6e29(0x2a1)]})['assign']({'coins':_0x348c82})[_0x3a6e29(0x29e)]();}}async function recreateCoinResults(){const _0x4bef4b=_0x8496ec;recreationNeeded=![];let _0x469c71,_0x573e9f=[];try{for(const _0x2bf2e3 of currentCoins){if(_0x2bf2e3['coin']!=config[_0x4bef4b(0x222)]){let _0x5d69d2=0x0,_0x7ec42,_0x285a61;_0x469c71=await getAllEventOrders(_0x2bf2e3[_0x4bef4b(0x130)]);if(_0x469c71[_0x4bef4b(0x19e)]>0x0)_0x469c71['forEach'](_0x2ab918=>{const _0x2e2b95=_0x4bef4b,_0x192cab=_0x2bf2e3[_0x2e2b95(0x130)]['includes'](config['basecoin']+'/');_0x573e9f[_0x2e2b95(0x1f8)]({'datetime':_0x2ab918[_0x2e2b95(0x1a4)],'coin':_0x2bf2e3[_0x2e2b95(0x198)],'symbol':_0x2bf2e3[_0x2e2b95(0x130)],'side':_0x2ab918[_0x2e2b95(0x21a)],'reverse':_0x192cab,'amount':formatResult(_0x2ab918[_0x2e2b95(0x1e7)],0x8),'filled':formatResult(_0x2ab918[_0x2e2b95(0x1e7)],0x8),'price':formatResult(_0x2ab918[_0x2e2b95(0x215)],0x8)}),_0x5d69d2=_0x2ab918[_0x2e2b95(0x21a)]==_0x2e2b95(0x200)?_0x5d69d2+_0x2ab918[_0x2e2b95(0x1e7)]:_0x5d69d2-_0x2ab918[_0x2e2b95(0x1e7)];if(!_0x285a61)_0x285a61=_0x2ab918[_0x2e2b95(0x215)];});_0x7ec42=_0x2bf2e3[_0x4bef4b(0x107)]-_0x5d69d2;let _0x1a4451;config[_0x4bef4b(0x14f)][_0x4bef4b(0x175)](_0x13e0b2=>{const _0x16724f=_0x4bef4b;!_0x1a4451&&(_0x1a4451=_0x13e0b2[_0x16724f(0x164)][_0x16724f(0x1b9)](_0x38c009=>_0x38c009['coin']==_0x2bf2e3[_0x16724f(0x198)]),_0x1a4451&&(_0x7ec42=_0x1a4451['number'],_0x285a61=_0x1a4451[_0x16724f(0x215)]));});let _0x3384fb=dbCoinResults['get'](_0x4bef4b(0x2a7))['find']({'coin':_0x2bf2e3['coin']})[_0x4bef4b(0x20d)]();_0x3384fb={'coin':_0x2bf2e3['coin'],'number':_0x7ec42,'breakeven':_0x285a61,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4bef4b(0x1f1)]('coins')[_0x4bef4b(0x1b9)]({'coin':_0x2bf2e3[_0x4bef4b(0x198)]})[_0x4bef4b(0x1af)](_0x3384fb)[_0x4bef4b(0x29e)]();}}_0x573e9f['sort']((_0x1621bc,_0x583704)=>_0x1621bc[_0x4bef4b(0x1a4)]>_0x583704[_0x4bef4b(0x1a4)]?0x1:_0x583704[_0x4bef4b(0x1a4)]>_0x1621bc[_0x4bef4b(0x1a4)]?-0x1:0x0);let _0x27dfb2=0x0;for(let _0x560911 of _0x573e9f){await updateCoinResults(_0x560911,!![]);}}catch(_0x4a31fe){await handleError(_0x4a31fe,_0x4bef4b(0x16a));}}async function getAllEventOrders(_0x547837){const _0x23af7e=_0x8496ec;let _0x460f83=[],_0x730000=dbLogs[_0x23af7e(0x1f1)](_0x23af7e(0x1f4))[_0x23af7e(0x17d)](_0x26d863=>{const _0x2d9479=_0x23af7e,_0x56400e=_0x26d863[_0x2d9479(0x255)][_0x2d9479(0x273)]();return _0x56400e['includes'](_0x547837[_0x2d9479(0x273)]())&&(_0x56400e[_0x2d9479(0x2b9)](_0x2d9479(0x17c))&&_0x56400e[_0x2d9479(0x2b9)](_0x2d9479(0x119))||_0x56400e[_0x2d9479(0x2b9)](_0x2d9479(0x1e7))&&_0x56400e[_0x2d9479(0x2b9)]('order'));})[_0x23af7e(0x22f)](_0x23af7e(0x199))[_0x23af7e(0x20d)]();return _0x730000[_0x23af7e(0x175)](_0x96f7d4=>{const _0x3065a7=_0x23af7e,_0x5eefb0=_0x96f7d4['event']['includes'](_0x3065a7(0x149))?_0x3065a7(0x149):'buy',_0x46c037=/#([0-9]|\.)+\s/i,_0x2b8240=Number(_0x46c037[_0x3065a7(0x264)](_0x96f7d4[_0x3065a7(0x255)])[0x0]['slice'](0x1)),_0x372bf1=/@([0-9]|\.)+$/i,_0x6b2538=Number(_0x372bf1[_0x3065a7(0x264)](_0x96f7d4[_0x3065a7(0x255)])[0x0][_0x3065a7(0x1b7)](0x1));_0x460f83['push']({'datetime':_0x96f7d4['time'],'coin':symbolToCoin(_0x547837),'symbol':_0x547837,'side':_0x5eefb0,'amount':_0x2b8240,'filled':_0x2b8240,'price':_0x6b2538});}),_0x460f83;}async function validate24hChanges(){const _0x42cb0f=_0x8496ec;for(const _0x411c7b of currentCoins){if(_0x411c7b[_0x42cb0f(0x198)]!=config['basecoin']){let _0x2c599f;_0x411c7b[_0x42cb0f(0x201)]?_0x2c599f=formatResult((0x1/(gChange[_0x411c7b['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x2c599f=gChange[_0x411c7b[_0x42cb0f(0x130)]],_0x2c599f<config['change24h']&&(logHistory(_0x42cb0f(0x258),_0x411c7b[_0x42cb0f(0x198)]+_0x42cb0f(0x197)+_0x2c599f+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x42cb0f(0x258),_0x42cb0f(0x17f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4affc0,_0xc04a85){const _0x4a0397=_0x8496ec;if(!_0x4affc0)return!![];const _0x3bffd7=_0xc04a85[_0x4a0397(0x2b2)]('.'),_0x23babd=_0x4affc0[_0x4a0397(0x2b2)]('.');for(var _0x1d243c=0x0;_0x1d243c<_0x23babd[_0x4a0397(0x19e)];_0x1d243c++){const _0x228939=~~_0x23babd[_0x1d243c],_0x2d5f14=~~_0x3bffd7[_0x1d243c];if(_0x228939<_0x2d5f14)return!![];if(_0x228939>_0x2d5f14)return![];}return![];}async function oneTimeMigration(){const _0x3bcb27=_0x8496ec;let _0x186a65=dbLogs[_0x3bcb27(0x1f1)](_0x3bcb27(0x138))[_0x3bcb27(0x20d)]();if(isOlderVersion(_0x186a65,_0x3bcb27(0x2af))){let _0xb97fb0=[];const _0x4a9365=dbLogs[_0x3bcb27(0x1f1)](_0x3bcb27(0x1f4))[_0x3bcb27(0x20d)]();_0x4a9365[_0x3bcb27(0x175)](_0x14bd98=>{const _0x2ce096=_0x3bcb27;_0xb97fb0[_0x2ce096(0x1f8)]({'time':_0x14bd98[_0x2ce096(0x199)],'type':_0x14bd98[_0x2ce096(0x283)],'event':_0x14bd98[_0x2ce096(0x255)]});}),dbLogs[_0x3bcb27(0x1f1)](_0x3bcb27(0x1f4))[_0x3bcb27(0x1af)](_0xb97fb0)[_0x3bcb27(0x29e)]();}let _0x1f7953=dbConfig[_0x3bcb27(0x1f1)]('version')[_0x3bcb27(0x20d)]();if(isOlderVersion(_0x1f7953,_0x3bcb27(0x2af))){let _0x362dfb=dbConfig[_0x3bcb27(0x1f1)]('bot')[_0x3bcb27(0x1b9)]({'botID':botID})['value']();if(_0x362dfb){let _0x30233d=[];_0x362dfb[_0x3bcb27(0x1ca)][_0x3bcb27(0x175)](_0x3a4c93=>{const _0x5d7194=_0x3bcb27;_0x30233d[_0x5d7194(0x1f8)]({'coin':_0x3a4c93[_0x5d7194(0x198)],'number':_0x3a4c93['startnumber'],'price':_0x3a4c93['startprice']}),delete _0x3a4c93[_0x5d7194(0x1cc)],delete _0x3a4c93[_0x5d7194(0x1e9)];});if(_0x30233d['length']!==0x0)fs[_0x3bcb27(0x128)](configbackuppath+('starting-balance-'+botID+_0x3bcb27(0x286)),JSON[_0x3bcb27(0x14a)](_0x30233d,null,0x4),function(_0x31042d){if(_0x31042d){}});const _0x2f39a0=(_0x56480e,_0x676f8d)=>{const _0x5a1f5e=_0x3bcb27;let _0x5c0cfa=[];_0x676f8d[_0x5a1f5e(0x175)](_0x466bda=>{const _0x4a3bb7=_0x5a1f5e,_0x32017a=_0x56480e[_0x4a3bb7(0x1b9)](_0x2c11cd=>_0x2c11cd[_0x4a3bb7(0x198)]==_0x466bda['coin']);if(!_0x32017a)_0x5c0cfa[_0x4a3bb7(0x1f8)](_0x466bda);});let _0x52abcf=[];return _0x56480e[_0x5a1f5e(0x175)](_0x3d2dc9=>{const _0x503b4e=_0x5a1f5e,_0x455325=_0x676f8d[_0x503b4e(0x1b9)](_0x37ffea=>_0x37ffea[_0x503b4e(0x198)]==_0x3d2dc9['coin']);if(!_0x455325||_0x455325['number']==0x0&&_0x3d2dc9['number']!=0x0)_0x52abcf[_0x503b4e(0x1f8)](_0x3d2dc9);}),{'missingDay1':_0x5c0cfa,'notInDay2':_0x52abcf};},_0x2ee9ba=dbPerformance[_0x3bcb27(0x1f1)](_0x3bcb27(0x188))[_0x3bcb27(0x1b3)]()[_0x3bcb27(0x20d)]();if(_0x2ee9ba[_0x3bcb27(0x19e)]>0x1){const {missingDay1:_0x41d55c,notInDay2:_0x38604e}=_0x2f39a0(_0x30233d,_0x2ee9ba[0x1]['coins']);_0x30233d=[..._0x30233d,..._0x41d55c],_0x38604e[_0x3bcb27(0x175)](_0x27feaa=>{const _0x18f19b=_0x3bcb27;let _0x4fe6cc=_0x30233d[_0x18f19b(0x20f)](_0x3ea6f5=>_0x3ea6f5[_0x18f19b(0x198)]==_0x27feaa[_0x18f19b(0x198)]);_0x4fe6cc!=-0x1&&_0x30233d[_0x18f19b(0x105)](_0x4fe6cc,0x1);});}_0x30233d['sort']((_0x437ea8,_0x754e8d)=>_0x437ea8[_0x3bcb27(0x198)]>_0x754e8d[_0x3bcb27(0x198)]?0x1:_0x754e8d[_0x3bcb27(0x198)]>_0x437ea8['coin']?-0x1:0x0);let _0x421bee=[{'date':_0x362dfb[_0x3bcb27(0x2a1)],'changes':_0x30233d}];_0x2ee9ba[_0x3bcb27(0x19e)]>0x2&&_0x2ee9ba['forEach']((_0x5cfbfa,_0x265e13)=>{const _0xf1e1d9=_0x3bcb27;if(_0x265e13>0x0&&_0x265e13<_0x2ee9ba[_0xf1e1d9(0x19e)]-0x1){const {missingDay1:_0x3e1e73,notInDay2:_0x40a496}=_0x2f39a0(_0x2ee9ba[_0x265e13]['coins'],_0x2ee9ba[_0x265e13+0x1][_0xf1e1d9(0x2a7)]);_0x30233d=[],(_0x3e1e73[_0xf1e1d9(0x19e)]!=0x0||_0x40a496[_0xf1e1d9(0x19e)]!=0x0)&&(_0x3e1e73[_0xf1e1d9(0x19e)]!=0x0&&_0x30233d[_0xf1e1d9(0x1f8)](..._0x3e1e73),_0x40a496[_0xf1e1d9(0x19e)]!=0x0&&(_0x40a496[_0xf1e1d9(0x175)](_0x510045=>{const _0x4b1513=_0xf1e1d9;_0x510045[_0x4b1513(0x107)]=-_0x510045[_0x4b1513(0x107)];}),_0x30233d[_0xf1e1d9(0x1f8)](..._0x40a496)),_0x30233d['sort']((_0x9cc682,_0x333fcd)=>_0x9cc682[_0xf1e1d9(0x198)]>_0x333fcd[_0xf1e1d9(0x198)]?0x1:_0x333fcd[_0xf1e1d9(0x198)]>_0x9cc682[_0xf1e1d9(0x198)]?-0x1:0x0),_0x421bee[_0xf1e1d9(0x1f8)]({'date':_0x2ee9ba[_0x265e13+0x1][_0xf1e1d9(0x2bb)],'changes':_0x30233d}));}}),dbConfig[_0x3bcb27(0x1f1)]('bot')[_0x3bcb27(0x1b9)]({'botID':botID})[_0x3bcb27(0x1af)]({..._0x362dfb,'liquidity':_0x421bee})['write']();}}if(isOlderVersion(_0x1f7953,_0x3bcb27(0x26f))){let _0x1f263f=dbConfig['get'](_0x3bcb27(0x278))['find']({'botID':botID})[_0x3bcb27(0x20d)]();if(_0x1f263f){const _0x280809=_0x1f263f[_0x3bcb27(0x1cb)],_0x31ed62=_0x280809?capitalize(_0x280809):_0x3bcb27(0x13a);dbConfig[_0x3bcb27(0x1f1)](_0x3bcb27(0x278))['find']({'botID':botID})[_0x3bcb27(0x1af)]({'exchange':_0x31ed62})[_0x3bcb27(0x29e)]();}}if(isOlderVersion(_0x1f7953,_0x3bcb27(0x2b1))){let _0x2cce25=dbConfig['get']('bot')[_0x3bcb27(0x1b9)]({'botID':botID})[_0x3bcb27(0x20d)]();if(_0x2cce25){const _0x1253e1=_0x2cce25['marketcapEnabled'],_0x384853=_0x1253e1?'marketcap':![];dbConfig[_0x3bcb27(0x1f1)](_0x3bcb27(0x278))['find']({'botID':botID})[_0x3bcb27(0x1af)]({'marketcapEnabled':_0x384853})['write']();}}if(isOlderVersion(_0x1f7953,_0x3bcb27(0x18e))){let _0x19790c=dbConfig[_0x3bcb27(0x1f1)](_0x3bcb27(0x278))[_0x3bcb27(0x1b9)]({'botID':botID})['value']();if(_0x19790c){const _0x3818e8=_0x19790c[_0x3bcb27(0x235)],_0x52805f=_0x3818e8?'update-liquidity':![];dbConfig[_0x3bcb27(0x1f1)]('bot')['find']({'botID':botID})[_0x3bcb27(0x1af)]({'autoliquidity':_0x52805f})[_0x3bcb27(0x29e)]();}}let _0x1c4bbe=dbPerformance['get'](_0x3bcb27(0x138))['value']();isOlderVersion(_0x1c4bbe,_0x3bcb27(0x2af))&&setStartDatePerformance();let _0x36acba=dbCoinResults[_0x3bcb27(0x1f1)]('version')[_0x3bcb27(0x20d)]();if(isOlderVersion(_0x36acba,_0x3bcb27(0x267))){let _0x2493b5=dbCoinResults[_0x3bcb27(0x1f1)](_0x3bcb27(0x2a7))[_0x3bcb27(0x20d)]();if(_0x2493b5[_0x3bcb27(0x19e)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1ba5cb=_0x8496ec;dbConfig['set'](_0x1ba5cb(0x138),serverversion)[_0x1ba5cb(0x29e)](),dbPerformance[_0x1ba5cb(0x110)](_0x1ba5cb(0x138),serverversion)[_0x1ba5cb(0x29e)](),dbLogs[_0x1ba5cb(0x110)](_0x1ba5cb(0x138),serverversion)[_0x1ba5cb(0x29e)](),dbCoinResults[_0x1ba5cb(0x110)]('version',serverversion)[_0x1ba5cb(0x29e)]();}function getConfiguration(_0x382983){const _0x3e0bea=_0x8496ec;let _0xbb93b1=dbConfig[_0x3e0bea(0x1f1)](_0x3e0bea(0x278))[_0x3e0bea(0x1b9)]({'botID':_0x382983})[_0x3e0bea(0x20d)]();if(_0xbb93b1){let _0x24fcae=![];typeof _0xbb93b1['threshold']==_0x3e0bea(0x276)&&(_0xbb93b1={..._0xbb93b1,'threshold':Number(_0xbb93b1[_0x3e0bea(0x1c6)])},_0x24fcae=!![]),_0xbb93b1[_0x3e0bea(0x24b)]==undefined&&(_0xbb93b1={..._0xbb93b1,'change24h':-0x14},_0x24fcae=!![]),_0xbb93b1[_0x3e0bea(0x2a4)]==undefined&&(_0xbb93b1={..._0xbb93b1,'fiat':_0x3e0bea(0x1b1)},_0x24fcae=!![]),_0xbb93b1['onepagemode']==undefined&&(_0xbb93b1={..._0xbb93b1,'onepagemode':settings[_0x3e0bea(0x26c)]},_0x24fcae=!![]),_0xbb93b1[_0x3e0bea(0x186)]==undefined&&(_0xbb93b1={..._0xbb93b1,'colorscheme':'red_yellow_blue'},_0x24fcae=!![]),_0xbb93b1['autoliquidity']==undefined&&(_0xbb93b1={..._0xbb93b1,'autoliquidity':'update-liquidity'},_0x24fcae=!![]),_0xbb93b1[_0x3e0bea(0x1fd)]==undefined&&(_0xbb93b1={..._0xbb93b1,'marketcapApi':settings[_0x3e0bea(0x1fd)]?!![]:![]},_0x24fcae=!![]),_0xbb93b1[_0x3e0bea(0x113)]==undefined&&(_0xbb93b1={..._0xbb93b1,'marketcapEnabled':![]},_0x24fcae=!![]),_0x24fcae&&(_0xbb93b1={'botID':_0xbb93b1[_0x3e0bea(0x139)],'exchange':_0xbb93b1[_0x3e0bea(0x1cb)],'apiKey':_0xbb93b1[_0x3e0bea(0x1aa)],'apiSecret':_0xbb93b1[_0x3e0bea(0x2c5)],'apiPassword':_0xbb93b1[_0x3e0bea(0x21f)],'basecoin':_0xbb93b1['basecoin'],'botname':_0xbb93b1[_0x3e0bea(0x2c1)],'showname':_0xbb93b1[_0x3e0bea(0x242)],'threshold':_0xbb93b1['threshold'],'ordertype':_0xbb93b1[_0x3e0bea(0x247)],'timeout':_0xbb93b1[_0x3e0bea(0x259)],'fiat':_0xbb93b1['fiat'],'startdate':_0xbb93b1['startdate'],'recreate':_0xbb93b1['recreate'],'timeshift':_0xbb93b1['timeshift'],'onepagemode':_0xbb93b1['onepagemode'],'headless':_0xbb93b1[_0x3e0bea(0x10e)],'cooldown':_0xbb93b1['cooldown'],'change24h':_0xbb93b1[_0x3e0bea(0x24b)],'emojibuy':_0xbb93b1['emojibuy'],'emojisell':_0xbb93b1[_0x3e0bea(0x180)],'colorscheme':_0xbb93b1[_0x3e0bea(0x186)],'marketcapApi':_0xbb93b1[_0x3e0bea(0x1fd)],'marketcapEnabled':_0xbb93b1[_0x3e0bea(0x113)],'portfolio':_0xbb93b1[_0x3e0bea(0x1ca)],'autoliquidity':_0xbb93b1[_0x3e0bea(0x235)],'liquidity':_0xbb93b1['liquidity'],'openOrders':_0xbb93b1[_0x3e0bea(0x210)]},dbConfig[_0x3e0bea(0x1f1)](_0x3e0bea(0x278))['remove']()[_0x3e0bea(0x29e)](),dbConfig[_0x3e0bea(0x1f1)](_0x3e0bea(0x278))['push'](_0xbb93b1)[_0x3e0bea(0x29e)]());}else _0xbb93b1={'botID':_0x382983,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3e0bea(0x1c4)+_0x382983,'showname':![],'threshold':0x3,'ordertype':_0x3e0bea(0x17c),'timeout':0x14,'fiat':_0x3e0bea(0x1b1),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3e0bea(0x257)],'onepagemode':settings[_0x3e0bea(0x26c)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3e0bea(0x102),'marketcapApi':settings[_0x3e0bea(0x1fd)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xbb93b1;}function emittedConfiguration(){const _0x2420a9=_0x8496ec;let _0xdb014d;if(config[_0x2420a9(0x1aa)]=='')_0xdb014d={...config,'configstate':_0x2420a9(0x1a1)};else config[_0x2420a9(0x1aa)]==_0x2420a9(0x154)?_0xdb014d={...config,'configstate':_0x2420a9(0x12c)}:(_0xdb014d={...config,'apiKey':_0x2420a9(0x1fb),'apiSecret':_0x2420a9(0x1fb)},config[_0x2420a9(0x21f)]&&(_0xdb014d['apiPassword']=_0x2420a9(0x1fb)));return _0xdb014d['enableFiatToggle']=enableFiatToggle,_0xdb014d;}function getSettings(){const _0x317d2c=_0x8496ec;return dbSettings['get'](_0x317d2c(0x104))[_0x317d2c(0x20d)]();}function getSecure(){const _0x28db3a=_0x8496ec;return dbSecure[_0x28db3a(0x1f1)](_0x28db3a(0x20a))[_0x28db3a(0x20d)]()||{};}function updateTimeshift(_0x3bdf69){const _0x490d82=_0x8496ec;let _0x8d8db9=dbConfig[_0x490d82(0x1f1)]('bot')[_0x490d82(0x1b9)]({'botID':botID})['value']();_0x8d8db9&&dbConfig[_0x490d82(0x1f1)](_0x490d82(0x278))['find']({'botID':botID})[_0x490d82(0x1af)]({'timeshift':_0x3bdf69})[_0x490d82(0x29e)](),config[_0x490d82(0x257)]=_0x3bdf69,proxyEmit(_0x490d82(0x202),emittedConfiguration());}function updateOnepagemode(_0x423d36){const _0x31f5a9=_0x8496ec;let _0x4f0988=dbConfig['get'](_0x31f5a9(0x278))[_0x31f5a9(0x1b9)]({'botID':botID})[_0x31f5a9(0x20d)]();_0x4f0988&&dbConfig[_0x31f5a9(0x1f1)](_0x31f5a9(0x278))[_0x31f5a9(0x1b9)]({'botID':botID})[_0x31f5a9(0x1af)]({'onepagemode':_0x423d36})[_0x31f5a9(0x29e)](),config[_0x31f5a9(0x26c)]=_0x423d36,proxyEmit(_0x31f5a9(0x202),emittedConfiguration());}function updateMarketcapApi(_0x2f13da){const _0x3b734a=_0x8496ec,_0x493b9d=_0x2f13da?!![]:![];let _0x5012e1=dbConfig[_0x3b734a(0x1f1)](_0x3b734a(0x278))[_0x3b734a(0x1b9)]({'botID':botID})[_0x3b734a(0x20d)]();_0x5012e1&&dbConfig[_0x3b734a(0x1f1)](_0x3b734a(0x278))[_0x3b734a(0x1b9)]({'botID':botID})['assign']({'marketcapApi':_0x493b9d})[_0x3b734a(0x29e)](),config['marketcapApi']=_0x493b9d,getMarketCap(),proxyEmit(_0x3b734a(0x202),emittedConfiguration());}async function storeConfiguration(_0x10ff4e){const _0x34acc6=_0x8496ec;logger[_0x34acc6(0x219)](_0x34acc6(0x2b7));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1d5355=![],_0x32b625=![],_0x123f40=[];_0x10ff4e[_0x34acc6(0x1ca)][_0x34acc6(0x175)](_0x55d9db=>{const _0x360ee8=_0x34acc6;if(!_0x55d9db[_0x360ee8(0x29a)]&&_0x55d9db[_0x360ee8(0x198)]!=_0x10ff4e['basecoin'])_0x123f40['push'](_0x55d9db[_0x360ee8(0x130)]);}),_0x123f40['forEach'](_0x387e30=>{const _0x5d1022=_0x34acc6,_0xe85e74=currentCoins[_0x5d1022(0x1b9)](_0x380242=>_0x380242['symbol']==_0x387e30);!_0xe85e74&&(_0x1d5355=!![]);}),currentCoins['forEach'](_0x1a1e1a=>{const _0x96f0f2=_0x34acc6;if(_0x1a1e1a['coin']!=config['basecoin']){const _0x2432d5=_0x123f40[_0x96f0f2(0x1b9)](_0x134ec3=>_0x134ec3==_0x1a1e1a[_0x96f0f2(0x130)]);!_0x2432d5&&(_0x1d5355=!![]);}}),_0x10ff4e[_0x34acc6(0x1ca)][_0x34acc6(0x175)](_0x407d55=>{const _0x346fb5=_0x34acc6,_0x5efdd3=config[_0x346fb5(0x1ca)]['find'](_0x55af38=>_0x55af38[_0x346fb5(0x198)]==_0x407d55[_0x346fb5(0x198)]);if(_0x5efdd3&&_0x407d55[_0x346fb5(0x237)]!=_0x5efdd3['offset'])_0x32b625=!![];});let _0xfa060c=dbConfig['get']('bot')[_0x34acc6(0x1b9)]({'botID':botID})[_0x34acc6(0x20d)]();_0x10ff4e={..._0x10ff4e,'apiKey':decryptRSA(secure[_0x34acc6(0x111)],_0x10ff4e[_0x34acc6(0x1aa)]),'apiSecret':decryptRSA(secure[_0x34acc6(0x111)],_0x10ff4e[_0x34acc6(0x2c5)])};_0x10ff4e[_0x34acc6(0x21f)]&&(_0x10ff4e['apiPassword']=decryptRSA(secure['privateKey'],_0x10ff4e[_0x34acc6(0x21f)]));let _0x15fa5f=![];if(_0xfa060c){_0x10ff4e[_0x34acc6(0x1aa)]==_0x34acc6(0x1fb)?_0x10ff4e[_0x34acc6(0x1aa)]=config[_0x34acc6(0x1aa)]:_0x15fa5f=!![];_0x10ff4e[_0x34acc6(0x2c5)]==_0x34acc6(0x1fb)?_0x10ff4e[_0x34acc6(0x2c5)]=config[_0x34acc6(0x2c5)]:_0x15fa5f=!![];if(_0x10ff4e[_0x34acc6(0x21f)]==_0x34acc6(0x1fb))_0x10ff4e[_0x34acc6(0x21f)]=config[_0x34acc6(0x21f)];else{if(_0x10ff4e[_0x34acc6(0x21f)])_0x15fa5f=!![];}dbConfig[_0x34acc6(0x1f1)](_0x34acc6(0x278))[_0x34acc6(0x1b9)]({'botID':botID})[_0x34acc6(0x1af)](_0x10ff4e)['write']();}else dbConfig['get'](_0x34acc6(0x278))[_0x34acc6(0x1f8)](_0x10ff4e)[_0x34acc6(0x29e)](),_0x15fa5f=!![],process[_0x34acc6(0x254)]({'status':_0x34acc6(0x1e8),'live':_0x34acc6(0x1d3)},_0x5ed328=>{});process[_0x34acc6(0x254)]({'botname':_0x10ff4e['botname']},_0xbf65c5=>{}),config={..._0x10ff4e},updateBotManager(),proxyEmit(_0x34acc6(0x1d2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x15fa5f)!_0xfa060c?await reset(!![]):getBalances();else _0x1d5355||_0x32b625?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x47129a){const _0x52e337=_0x8496ec,_0x531551={...config,'headless':_0x47129a['headless']};let _0x171833=dbConfig[_0x52e337(0x1f1)](_0x52e337(0x278))[_0x52e337(0x1b9)]({'botID':botID})[_0x52e337(0x20d)]();_0x171833&&dbConfig['get'](_0x52e337(0x278))[_0x52e337(0x1b9)]({'botID':botID})['assign'](_0x531551)['write'](),config={..._0x531551},updateBotManager(),proxyEmit(_0x52e337(0x202),emittedConfiguration());}async function storeFiat(_0x1c0d54){const _0x2f90d5=_0x8496ec,_0x11e14e={...config,'fiat':_0x1c0d54};let _0x4d9420=dbConfig['get'](_0x2f90d5(0x278))[_0x2f90d5(0x1b9)]({'botID':botID})['value']();_0x4d9420&&dbConfig[_0x2f90d5(0x1f1)]('bot')[_0x2f90d5(0x1b9)]({'botID':botID})[_0x2f90d5(0x1af)](_0x11e14e)[_0x2f90d5(0x29e)](),config={..._0x11e14e},proxyEmit('configuration',emittedConfiguration());}function _0x33f9(_0x397139,_0x3d8f68){const _0x221168=_0x300b();return _0x33f9=function(_0x52e71e,_0x4eec1d){_0x52e71e=_0x52e71e-0xfd;let _0x300b2c=_0x221168[_0x52e71e];return _0x300b2c;},_0x33f9(_0x397139,_0x3d8f68);}function resetHistory(){const _0x930d35=_0x8496ec;logger[_0x930d35(0x150)](_0x930d35(0x177));try{if(fs[_0x930d35(0x153)](path[_0x930d35(0x1b2)](configpath,_0x930d35(0x178)+botID+_0x930d35(0x173))))fs['unlinkSync'](path[_0x930d35(0x1b2)](configpath,_0x930d35(0x178)+botID+'-events.json'));if(fs[_0x930d35(0x153)](path[_0x930d35(0x1b2)](configpath,_0x930d35(0x178)+botID+_0x930d35(0x26e))))fs[_0x930d35(0x1f6)](path[_0x930d35(0x1b2)](configpath,_0x930d35(0x178)+botID+_0x930d35(0x26e)));if(fs[_0x930d35(0x153)](path[_0x930d35(0x1b2)](configpath,_0x930d35(0x178)+botID+_0x930d35(0x22e))))fs[_0x930d35(0x1f6)](path[_0x930d35(0x1b2)](configpath,'bot-'+botID+_0x930d35(0x22e)));}catch(_0x4e3342){if(_0x4e3342)logger[_0x930d35(0x150)](_0x930d35(0x14e),_0x4e3342);}const _0x4a8490=getDate();let _0x4dd513=[];currentCoins['forEach'](_0x21ad6f=>{const _0x1710ce=_0x930d35;_0x4dd513['push']({'coin':_0x21ad6f['coin'],'number':_0x21ad6f[_0x1710ce(0x107)],'price':_0x21ad6f[_0x1710ce(0x19d)]});});let _0x35209c=dbConfig[_0x930d35(0x1f1)](_0x930d35(0x278))['find']({'botID':botID})['value']();_0x35209c&&(dbConfig[_0x930d35(0x1f1)](_0x930d35(0x278))[_0x930d35(0x1b9)]({'botID':botID})[_0x930d35(0x1af)]({'liquidity':[{'date':_0x4a8490,'changes':_0x4dd513}]})[_0x930d35(0x29e)](),config[_0x930d35(0x14f)]=[]),restartBot(!![]);}function noslash(_0x5a34ce){const _0x292ad9=_0x8496ec;return _0x5a34ce[_0x292ad9(0x1f2)]('/','');}function updateHighestFee(_0x6b3f9e){const _0x2ab4e8=_0x8496ec;if(_0x6b3f9e[_0x2ab4e8(0x201)]){let _0x6828aa={'filled':_0x6b3f9e[_0x2ab4e8(0x1e7)]*_0x6b3f9e[_0x2ab4e8(0x215)],'amount':_0x6b3f9e['filled']*_0x6b3f9e['price'],'side':_0x6b3f9e['side']==_0x2ab4e8(0x149)?_0x2ab4e8(0x200):'sell','price':0x1/_0x6b3f9e['price']};_0x6b3f9e={..._0x6b3f9e,..._0x6828aa};}const _0x4cd8b3=defaultFee*_0x6b3f9e[_0x2ab4e8(0x1e7)]*_0x6b3f9e[_0x2ab4e8(0x215)];lastFees[_0x2ab4e8(0x1a3)]['length']===0x14&&lastFees[_0x2ab4e8(0x1a3)]['shift'](),lastFees['recent20'][_0x2ab4e8(0x1f8)](_0x4cd8b3),lastFees[_0x2ab4e8(0x184)]=Math['max'](...lastFees[_0x2ab4e8(0x1a3)]);}function _0x300b(){const _0x51b272=['full','message','placeOrder','existsSync','***','\x20attempts','buys','/EUR','Pausing\x20for\x20','323290JvPclb','total','delta','balancing\x20resumed','\x20>\x20[DEBUG]\x20','getFullYear','createOrder','\x20API\x20key\x20is\x20invalid','getStartingBalances','pid','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','changes','event-history','Resetting\x20coin\x20results:\x20','/USD','ExchangeNotAvailable',':\x20timer\x20>','recreateCoinResults()','remainingSymbols','lowdb/adapters/FileSync','cancelOrder','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','OrderNotFound','sort','starting-balances','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','-events.json','password','forEach','limits','Resetting\x20bot\x20history','bot-','UNLOCKED','toggleBotMode','mkdirSync','market','filter','\x20|\x20exchange:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','emojisell','request-time','fetchBalance','ORDERS.UNLOCKING','highest','2\x20-\x20Validate\x20orders:\x20','colorscheme','Resuming\x20(','data','getMonth','switch-manual','pro','001','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','2.6.23','\x20order:\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Trigger:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','lowdb','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','-------------------------------\x0a','quote','\x20has\x20a\x2024h\x20drop\x20of\x20','coin','time','cooldown','fetchOpenOrders','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','last','length','removed','Initializing\x20exchange:\x20already\x20done','initial','slider','recent20','datetime','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','Invalid\x20quantity','\x20-\x20bot\x20not\x20started','getSeconds','leftTxt','apiKey','\x20exchange\x20error:\x20','%\x20(','RETRY\x20-\x20Error\x20in\x20','decode64','assign','bb-secure.json','USD','join','cloneDeep','EUR','cost','fetchTickers','slice','amount','find','emitHistory','Market','bots','random','\x20change','Unknown\x20error:\x20','sqrt','breakeven','open','storeConfiguration','Bot\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','threshold','\x20-\x20','1\x20-\x20Validate\x20orders:\x20','watchOrders()','portfolio','exchange','startnumber','\x20minutes\x20-\x20','resetHistory','</pre>','final','Error\x20in\x20loadSymbols():\x20','configuration-stored','running','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','Exchange\x20error\x20details:','7223585WwIYlE','\x20value','1\x20-\x20Handle\x20open\x20orders','round','LOCKED','function','performance','./logs/','average','status\x20code\x20401','getTime','BNB/','TUSD','apply','market_cap','\x20API\x20secret\x20is\x20invalid','target','filled','enabled','startprice','1\x20-\x20Unlocking\x20orders','Waited\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','format','1713421jIpOLz','uncaughtException','get','replace','USDT','logs',',\x20must\x20be\x20a\x203\x20digit\x20number','unlinkSync','RSA-OAEP','push','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','search','************','update-liquidity','marketcapApi','status','<b>','buy','reverse','configuration','added','\x20exchange','Unknown\x20error\x20-\x20check\x20logs','Initializing\x20exchange','watchTrades()','net-basecoin','Order\x20filled:\x20','secure','balances','Huobi','value','freeze','findIndex','openOrders','test','ID:\x20','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','fees','price','exchanges','\x20MB','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','debug','side','OnMaintenance','environment','Error\x20in\x20testAPI():\x20','BUSD','apiPassword','Portfolio\x20change\x20detected:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','basecoin','defaults','sha256','InsufficientFunds','placeOrder()','PAXG','watchTradesForSymbols()','1\x20-\x20FILLED\x20unknown\x20order:\x20','toFixed','canceled','basecoinvalue','<pre>','-results.json','sortBy','\x20|\x20highest\x20fee:\x20','date-fns','\x20uses\x20','BNB','token\x20is\x20expired','autoliquidity','\x20metrics:</b>\x20\x0a\x0a','offset','\x20/\x20','change','map','exchange\x20reload','yyyy/MM/dd','\x20|\x20Custom\x20ID:\x20','rightTxt','portfolio1','1\x20-\x20FILLED\x20known\x20order:\x20','ORDERS.UNLOCKED','showname','UNLOCKING','trade','getDate','no\x20open\x20orders','ordertype','abs','0\x20-\x20EXECUTION:\x20','process\x20','change24h','\x20>\x20details:','Bybit','marketcapsqrt','10234380wGnMbY','restart','Cryptocom','success','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','send','event','Error\x20details:','timeshift','error','timeout','RequestTimeout','timestamp','Loading\x20completed','Invalid\x20symbol:\x20','Valid\x20balance\x20for\x20','sells','heapUsed','AuthenticationError','usd','orderstatus','exec','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','2.5.0','none','kill','Loading\x20symbols','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','onepagemode','21ZtoCAZ','-performance.json','2.6.0','\x20:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','min','toLowerCase','Reset\x20|\x20','Exception\x20thrown\x20in\x20','string','PermissionDenied','bot','limit-high','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','2lZyYLp','production','fetchTicker','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','watchTrades','log','storeHeadless','net-fiat','type','constructor','deleteHistoryAlerts','.json','fetchTickers()','\x20orders\x20in\x20less\x20than\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','toString','fee','indexOf','eur','detectLiquidityChange()','pop','keys','Limit\x20(high-margin)','API-key\x20format\x20invalid','3788808HHkEJs','amountToPrecision','\x20>\x20','Error:\x20Invalid\x20argument\x20','warning','staging','489DFzBst','excluded','limit','loadMarkets','max','write','getOpenOrders()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','startdate','fetchBalance()','quick','fiat','currency','Stopped\x20fetching\x20balance\x20after\x20','coins','showConfig','entries','Net\x20','5332tVtYKt','InvalidOrder','BTC','closed','2.3.5','No\x20more\x20open\x20orders\x20-\x20','2.6.22','split','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','(((.+)+)+)+$','orderId','active','Saving\x20configuration','ETH','includes','customId','date','fromCodePoint','Symbol(s):\x20','USDC','marketcap','getHours','botname','Block\x20transaction\x20detection:\x20','distribution','valid','apiSecret','initclient','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','parse','sendPortfolioTelegram','DDoSProtection','red_yellow_blue','loading-canceled','settings','splice','createWriteStream','number','Invalid\x20balance\x20for\x20','4398615hMRhAp','\x20portfolio:</b>\x20\x0a\x0a','node-forge','realized','remove','headless','737ChAsLD','set','privateKey','util','marketcapEnabled','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','coin-loading-progress','RETRY\x20-\x20Problem\x20resolved\x20after\x20','MIN_NOTIONAL','order','\x20hour','pki','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','getMinutes','InvalidNonce','ExchangeError','<b>Bot\x20','2\x20-\x20Handled\x20open\x20orders','Net\x20effect','args','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Manual\x20balancing\x20required','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Headless:\x20','writeFile','has','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Order\x20amount\x20is\x20invalid:\x20','recovery','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','/USDT',':\x20Bot\x20','symbol','\x20|\x20','substring','shift',')\x20|\x20exchange:\x20','argv','spot','watchTradesForSymbols','version','botID','Binance','Failed\x20to\x20load\x20coin\x20data\x20for\x20','portfolio2','watchOrders','create','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','toUpperCase','progress','emojibuy','NetworkError','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Cex','\x20minutes','padStart','cancelOrders()','sell','stringify','netoffset','ongoing','./config/','Error\x20while\x20deleting\x20files:\x20','liquidity'];_0x300b=function(){return _0x51b272;};return _0x300b();}async function updateNumberCoinsCcxt(_0x4947c9){const _0x148bba=_0x8496ec;logger[_0x148bba(0x219)](_0x148bba(0x249)+_0x4947c9[_0x148bba(0x130)]+_0x148bba(0x131)+_0x4947c9[_0x148bba(0x1fe)]+_0x148bba(0x131)+_0x4947c9[_0x148bba(0x1e7)]+_0x148bba(0x238)+_0x4947c9['amount']+'\x20|\x20'+_0x4947c9['id']);let _0x55c0d2=_0x4947c9['status'],_0x3ecd03=![];currentCoins[_0x148bba(0x175)](_0x54be3d=>{const _0x13e47e=_0x148bba;_0x54be3d[_0x13e47e(0x130)]==_0x4947c9[_0x13e47e(0x130)]&&(_0x3ecd03=!![]);});if(!_0x3ecd03)return;let _0x4ccebe;const _0x1c32e4=_0x22166e=>{const _0x1d8ef8=_0x148bba;_0x4ccebe=currentCoins['find'](_0x33e889=>_0x33e889[_0x1d8ef8(0x130)]==_0x4947c9[_0x1d8ef8(0x130)]);if(_0x4ccebe)_0x4ccebe['orderstatus']=_0x22166e;};let _0x5c0ba8=![];for(const _0x274c45 of lastOrders){const _0xab6d13=0x64,_0x7bceb1=0x1388;let _0x2023af=0x0;while(!_0x274c45[_0x148bba(0x2b5)]&&_0x2023af*_0xab6d13<_0x7bceb1){_0x2023af++,await sleep(_0xab6d13);}if(_0x2023af>0x0)logger[_0x148bba(0x219)](_0x148bba(0x1eb)+_0x2023af*_0xab6d13/0x3e8+_0x148bba(0x266));_0x274c45[_0x148bba(0x2b5)]==_0x4947c9['id']&&(_0x5c0ba8=!![]);}if(_0x55c0d2==_0x148bba(0x1c2)){_0x1c32e4('open');if(_0x4947c9[_0x148bba(0x1e7)]>0x0){if(_0x5c0ba8){setBlockTransactionDetection(!![]),logger['debug'](_0x148bba(0x1d4)+_0x4947c9['id']);const _0x2bb8b2=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4ccebe);[currentCoins,currentCoinsAll]=_0x2bb8b2,setBlockTransactionDetection(![]);}else logger[_0x148bba(0x219)](_0x148bba(0x194)+_0x4947c9['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x55c0d2==_0x148bba(0x22b)){_0x1c32e4('canceled');const _0x472b4b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x472b4b,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x55c0d2=='closed'){if(lastOrders)for(const _0x44033a of lastOrders){if(_0x44033a[_0x148bba(0x2b5)]==_0x4947c9['id']){logger['debug'](_0x148bba(0x240)+_0x4947c9['id']),_0x5c0ba8=!![];if(_0x44033a[_0x148bba(0x1e7)]==0x0){setBlockTransactionDetection(!![]),logger[_0x148bba(0x219)](_0x148bba(0x289)+_0x4947c9['id']);if(_0x4947c9[_0x148bba(0x1de)])_0x44033a['price']=_0x4947c9[_0x148bba(0x1de)];else{if(_0x4947c9['price'])_0x44033a[_0x148bba(0x215)]=_0x4947c9[_0x148bba(0x215)];else{}}_0x44033a['filled']=_0x4947c9[_0x148bba(0x1e7)],updateHighestFee(_0x44033a);const _0x1551c7=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4ccebe);[currentCoins,currentCoinsAll]=_0x1551c7,setBlockTransactionDetection(![]),await validateOrders(),_0x1c32e4(_0x148bba(0x1e7)),_0x44033a['fee']={'currency':_0x4947c9[_0x148bba(0x28b)]?_0x4947c9[_0x148bba(0x28b)]['currency']:null,'cost':_0x4947c9[_0x148bba(0x28b)]?_0x4947c9[_0x148bba(0x28b)][_0x148bba(0x1b5)]:0x0},await updateCoinResults(_0x44033a);}}}!_0x5c0ba8&&(logger[_0x148bba(0x219)](_0x148bba(0x229)+_0x4947c9['id']),_0x1c32e4(_0x148bba(0x1e7)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2b71f8=JSON[_0x148bba(0xff)](lastBalances[_0x148bba(0x1ca)]);const _0x769ef5=_0x2b71f8[_0x148bba(0x1b9)](_0x1d76c3=>_0x1d76c3['symbol']==_0x4947c9['symbol']);if(_0x769ef5){if(_0x55c0d2==_0x148bba(0x1c2))_0x769ef5[_0x148bba(0x263)]=_0x769ef5[_0x148bba(0x263)]=='filled'?_0x148bba(0x1e7):'open';else{if(_0x55c0d2=='canceled')_0x769ef5[_0x148bba(0x263)]=_0x769ef5[_0x148bba(0x263)]=='filled'?_0x148bba(0x1e7):_0x148bba(0x22b);else _0x55c0d2==_0x148bba(0x2ae)&&(_0x769ef5[_0x148bba(0x263)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x148bba(0x14a)](_0x2b71f8)},proxyEmit(_0x148bba(0x20b),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5529a0=_0x8496ec;await getOpenOrders();let _0x16adba=![];currentCoins[_0x5529a0(0x175)](_0x57b0d8=>{const _0x252025=_0x5529a0;_0x16adba=allOpenOrders[_0x252025(0x1b9)](_0x1949c8=>_0x1949c8[_0x252025(0x130)]==_0x57b0d8[_0x252025(0x130)]),_0x57b0d8[_0x252025(0x263)]=_0x16adba?_0x252025(0x1c2):_0x252025(0x268);});}async function fetchBalance(_0x2ef39c=!![]){const _0x40def6=_0x8496ec;let _0xe3ae78;try{return _0xe3ae78=await exchange['fetchBalance'](),mybalances=_0xe3ae78[_0x40def6(0x15a)],!![];}catch(_0x19b4ca){return!_0x2ef39c?handleErrorNoStop(_0x19b4ca,_0x40def6(0x2a2)):await handleError(_0x19b4ca,_0x40def6(0x2a2)),![];}}async function getCoins(_0x456f9c=0x0,_0x2eda71=!![],_0x3d813e=config[_0x8496ec(0x222)],_0x59d045){const _0x1436d2=_0x8496ec;let _0x1fab4b=[],_0x3da52f=[],_0x3b5091=[];if(_0x456f9c)await sleep(_0x456f9c);if(botPaused)return[currentCoins,currentCoinsAll];let _0x13a8fc=![],_0x3c8378=0x0,_0xaf1b5f,_0xbe3433;_0x59d045&&(_0xaf1b5f=currentCoins[_0x1436d2(0x1b9)](_0x1c253c=>_0x1c253c[_0x1436d2(0x198)]==_0x59d045[_0x1436d2(0x198)]),_0xbe3433=_0xaf1b5f[_0x1436d2(0x107)]);while(!_0x13a8fc){const _0x2546ba=await fetchBalance(_0x2eda71);if(_0x2546ba){if(_0x59d045){if(mybalances[_0x59d045[_0x1436d2(0x198)]]!=_0xbe3433)logger[_0x1436d2(0x219)](_0x1436d2(0x25e)+_0x59d045['coin']+':\x20'+mybalances[_0x59d045[_0x1436d2(0x198)]]+'\x20('+_0xbe3433+')'),_0x13a8fc=!![];else{logger[_0x1436d2(0x219)](_0x1436d2(0x108)+_0x59d045[_0x1436d2(0x198)]+':\x20'+mybalances[_0x59d045[_0x1436d2(0x198)]]+'\x20('+_0xbe3433+')'),_0x3c8378++;if(_0x3c8378<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1436d2(0x219)](_0x1436d2(0x2a6)+_0x3c8378+_0x1436d2(0x155));break;}}}else break;}}for(const [_0x28694d,_0x57e900]of Object[_0x1436d2(0x2a9)](mybalances)){_0x3b5091[_0x1436d2(0x1f8)](_0x28694d);}config['portfolio'][_0x1436d2(0x175)](_0x1b967b=>{const _0x2594bb=_0x1436d2;!_0x3b5091[_0x2594bb(0x2b9)](_0x1b967b[_0x2594bb(0x198)])&&(mybalances[_0x1b967b[_0x2594bb(0x198)]]=0x0);});if(_0x3d813e=='')for(const [_0x36c718,_0x4b3c2d]of Object[_0x1436d2(0x2a9)](mybalances)){_0x4b3c2d!=0x0&&_0x1fab4b['push']({'coin':_0x36c718});}else for(const [_0x4b3ae5,_0x2aaef6]of Object[_0x1436d2(0x2a9)](mybalances)){const _0x76f000=config['portfolio'][_0x1436d2(0x1b9)](_0x5a5699=>_0x5a5699[_0x1436d2(0x198)]==_0x4b3ae5),_0x2a94ab=_0x4b3ae5+'/'+_0x3d813e,_0x5952c2=_0x3d813e+'/'+_0x4b3ae5,_0x59fec4=currentCoins[_0x1436d2(0x1b9)](_0x4c2b7a=>_0x4c2b7a[_0x1436d2(0x198)]==_0x4b3ae5);if((_0x2aaef6!=0x0||_0x76f000)&&(allSymbols[_0x1436d2(0x2b9)](_0x2a94ab)||_0x4b3ae5==_0x3d813e))_0x59fec4?_0x1fab4b[_0x1436d2(0x1f8)]({..._0x59fec4,'number':Math[_0x1436d2(0x29d)](_0x2aaef6+(_0x76f000&&_0x76f000['offset']||0x0),0x0)}):_0x1fab4b[_0x1436d2(0x1f8)]({'coin':_0x4b3ae5,'symbol':_0x2a94ab,'reverse':![],'number':Math[_0x1436d2(0x29d)](_0x2aaef6+(_0x76f000&&_0x76f000[_0x1436d2(0x237)]||0x0),0x0),'orderstatus':_0x1436d2(0x268)});else{if((_0x2aaef6!=0x0||_0x76f000)&&allSymbols[_0x1436d2(0x2b9)](_0x5952c2))_0x59fec4?_0x1fab4b[_0x1436d2(0x1f8)]({..._0x59fec4,'number':Math[_0x1436d2(0x29d)](_0x2aaef6+(_0x76f000&&_0x76f000['offset']||0x0),0x0)}):_0x1fab4b[_0x1436d2(0x1f8)]({'coin':_0x4b3ae5,'symbol':_0x5952c2,'reverse':!![],'number':Math[_0x1436d2(0x29d)](_0x2aaef6+(_0x76f000&&_0x76f000['offset']||0x0),0x0),'orderstatus':'none'});else _0x76f000&&_0x1fab4b[_0x1436d2(0x1f8)]({'coin':_0x76f000['coin'],'symbol':_0x76f000[_0x1436d2(0x130)],'reverse':_0x76f000['reverse'],'number':0x0,'orderstatus':_0x1436d2(0x268)});}}return _0x1fab4b[_0x1436d2(0x170)]((_0xff57e9,_0x2d1051)=>_0xff57e9[_0x1436d2(0x15b)]<_0x2d1051[_0x1436d2(0x15b)]?0x1:_0x2d1051[_0x1436d2(0x15b)]<_0xff57e9[_0x1436d2(0x15b)]?-0x1:0x0),_0x3da52f=cloneDeep(_0x1fab4b),_0x1fab4b=_0x1fab4b['filter'](_0x1114a4=>{const _0x2493c9=_0x1436d2,_0x35bb23=config[_0x2493c9(0x1ca)][_0x2493c9(0x1b9)](_0x15af8e=>_0x15af8e['coin']==_0x1114a4[_0x2493c9(0x198)]);return _0x35bb23&&!_0x35bb23['excluded'];}),[_0x1fab4b,_0x3da52f];}async function getCoinNumber(_0x321b09){const _0x3181de=_0x8496ec;let _0x2b8b8b;try{const _0x288b2f=await exchange[_0x3181de(0x182)]();_0x2b8b8b=_0x288b2f['total'][_0x321b09];}catch(_0xb4b0f){await handleError(_0xb4b0f,'getCoinNumber()');}return _0x2b8b8b;}async function getOpenOrders(){const _0x48c22b=_0x8496ec;let _0x4523b8;allOpenOrders=[];try{for(const _0x13ce1e of config[_0x48c22b(0x1ca)]){!_0x13ce1e['excluded']&&_0x13ce1e[_0x48c22b(0x198)]!=config['basecoin']&&(_0x4523b8=await exchange['fetchOpenOrders'](_0x13ce1e['symbol']),_0x4523b8[_0x48c22b(0x19e)]>0x0&&allOpenOrders[_0x48c22b(0x1f8)](_0x4523b8[0x0]));}}catch(_0x2e7155){await handleError(_0x2e7155,_0x48c22b(0x29f));}}async function handleOpenOrders(_0x2f57d1=0x0){const _0x12263b=_0x8496ec;allOpenOrders[_0x12263b(0x19e)]==0x0&&lockOrders==ORDERS[_0x12263b(0x1da)]&&allOrdersPlaced&&(_0x2f57d1==0x0?(logger['debug'](_0x12263b(0x1d8)),_0x2f57d1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x12263b(0x121)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2603de){const _0x18f23f=_0x8496ec,_0x5b5a0d=ccxt[_0x18f23f(0x18b)][_0x2603de[_0x18f23f(0x1cb)][_0x18f23f(0x273)]()],_0x34c11d=new _0x5b5a0d({'apiKey':_0x2603de['apiKey'],'secret':_0x2603de[_0x18f23f(0x2c5)],'options':{'defaultType':_0x18f23f(0x136)}});if(_0x2603de['apiPassword'])_0x34c11d[_0x18f23f(0x174)]=_0x2603de[_0x18f23f(0x21f)];try{await _0x34c11d[_0x18f23f(0x182)]();}catch(_0x2e2325){logger[_0x18f23f(0x219)](_0x18f23f(0x21d)+_0x2e2325[_0x18f23f(0x28a)]());throw _0x2e2325;}}function cloneDeep(_0x4b27d8){const _0x3977fd=_0x8496ec;return JSON[_0x3977fd(0xff)](JSON[_0x3977fd(0x14a)](_0x4b27d8));}async function getPortfolio(_0xf3a97d){const _0x59884d=_0x8496ec;let _0x567d40=[],_0xf4c8e1=[],_0x138504=[],_0x944c2;_0xf3a97d[_0x59884d(0x1aa)]=decryptRSA(secure['privateKey'],_0xf3a97d['apiKey']),_0xf3a97d['apiSecret']=decryptRSA(secure[_0x59884d(0x111)],_0xf3a97d[_0x59884d(0x2c5)]);if(_0xf3a97d[_0x59884d(0x21f)])_0xf3a97d[_0x59884d(0x21f)]=decryptRSA(secure['privateKey'],_0xf3a97d[_0x59884d(0x21f)]);if(_0xf3a97d['apiKey']!=='************'||_0xf3a97d[_0x59884d(0x2c5)]!==_0x59884d(0x1fb)||_0xf3a97d[_0x59884d(0x21f)]&&_0xf3a97d['apiPassword']!==_0x59884d(0x1fb)){if(config['exchange']){if(_0xf3a97d[_0x59884d(0x1aa)]==_0x59884d(0x1fb))_0xf3a97d[_0x59884d(0x1aa)]=config[_0x59884d(0x1aa)];if(_0xf3a97d[_0x59884d(0x2c5)]==_0x59884d(0x1fb))_0xf3a97d[_0x59884d(0x2c5)]=config[_0x59884d(0x2c5)];if(_0xf3a97d['apiPassword']==_0x59884d(0x1fb))_0xf3a97d[_0x59884d(0x21f)]=config[_0x59884d(0x21f)];}try{await testAPI(_0xf3a97d);}catch(_0x2e61f5){if(_0x2e61f5[_0x59884d(0x28a)]()['includes']('AuthenticationError')){logHistory('error','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x59884d(0x205)),logger[_0x59884d(0x219)]('Error\x20details\x20(0):',_0x2e61f5),proxyEmit(_0x59884d(0x23f),![]);return;}}exchange?updateExchange(_0xf3a97d[_0x59884d(0x1aa)],_0xf3a97d[_0x59884d(0x2c5)],_0xf3a97d['apiPassword']):await initExchange(_0xf3a97d[_0x59884d(0x1cb)],_0xf3a97d[_0x59884d(0x1aa)],_0xf3a97d[_0x59884d(0x2c5)],_0xf3a97d[_0x59884d(0x21f)]);await loadSymbols();const _0x48ef6f=await getCoins(0x0,![],_0xf3a97d[_0x59884d(0x222)]);_0x138504=cloneDeep(_0x48ef6f[0x1]);}else{const _0xfab84e=await getCoins();_0x138504=cloneDeep(_0xfab84e[0x1]);}if(_0xf3a97d['basecoin']=='')proxyEmit(_0x59884d(0x23f),!![]),proxyEmit(_0x59884d(0x13c),_0x138504);else{_0x138504[_0x59884d(0x175)](_0x272e2c=>{const _0x994bbd=_0x59884d;if(_0x272e2c[_0x994bbd(0x198)]!=_0xf3a97d['basecoin']&&allSymbols[_0x994bbd(0x2b9)](_0x272e2c[_0x994bbd(0x130)]))_0x567d40['push'](_0x272e2c[_0x994bbd(0x130)]);});if(_0x567d40['length']==0x0)logHistory(_0x59884d(0x258),_0x59884d(0x11c));else{try{_0xf4c8e1=await getTickers(_0x567d40);}catch(_0x2efa21){logHistory(_0x59884d(0x258),_0x59884d(0x205)),logger[_0x59884d(0x219)]('Error\x20details\x20(1):',_0x2efa21),proxyEmit(_0x59884d(0x23f),![]);return;}_0x138504[_0x59884d(0x175)](_0x12e7ad=>{const _0x17e764=_0x59884d;_0x12e7ad[_0x17e764(0x198)]!=_0xf3a97d['basecoin']?_0xf4c8e1[_0x12e7ad[_0x17e764(0x130)]]?_0x944c2=_0x12e7ad['reverse']?0x1/_0xf4c8e1[_0x12e7ad['symbol']]['last']:_0xf4c8e1[_0x12e7ad['symbol']][_0x17e764(0x19d)]:_0x944c2=0x0:_0x944c2=0x1,_0x12e7ad[_0x17e764(0x215)]=formatResult(_0x944c2,0x8);}),await getMarketCap(_0x138504),proxyEmit(_0x59884d(0x23f),!![]),proxyEmit('portfolio2',_0x138504);}}}function truncateTradeAmount(_0x41b65f,_0x2e89af){const _0x180943=_0x8496ec;let _0x28f071=0x0;try{_0x28f071=exchange[_0x180943(0x294)](_0x41b65f,_0x2e89af);}catch(_0x137e2c){}return _0x28f071;}function checkMinimums(_0x26eed2){const _0x523e31=_0x8496ec;let _0x2bdb2f=!![];const _0x1d4dfd=!_0x26eed2['reverse']?markets[_0x26eed2[_0x523e31(0x130)]][_0x523e31(0x176)]['amount'][_0x523e31(0x272)]:markets[_0x26eed2['symbol']][_0x523e31(0x176)]['cost'][_0x523e31(0x272)],_0x4824af=!_0x26eed2[_0x523e31(0x201)]?markets[_0x26eed2['symbol']]['limits'][_0x523e31(0x1b5)][_0x523e31(0x272)]:markets[_0x26eed2[_0x523e31(0x130)]]['limits'][_0x523e31(0x1b8)][_0x523e31(0x272)],_0x15aba4=truncateTradeAmount(_0x26eed2['symbol'],_0x26eed2[_0x523e31(0x244)]);_0x26eed2['trade']=_0x15aba4;if(Math[_0x523e31(0x248)](_0x15aba4)<_0x1d4dfd)_0x2bdb2f=![];if(Math[_0x523e31(0x248)](_0x15aba4)*_0x26eed2[_0x523e31(0x19d)]<_0x4824af)_0x2bdb2f=![];if(_0x26eed2[_0x523e31(0x21a)]=='sell'){let _0x3396ec=config[_0x523e31(0x1ca)][_0x523e31(0x1b9)](_0x122322=>_0x122322[_0x523e31(0x198)]==_0x26eed2['coin']);if(_0x3396ec['offset']>0x0){if(Math[_0x523e31(0x248)](_0x15aba4)>_0x26eed2[_0x523e31(0x107)]-_0x3396ec[_0x523e31(0x237)])_0x2bdb2f=![];}else{if(Math['abs'](_0x15aba4)>_0x26eed2[_0x523e31(0x107)])_0x2bdb2f=![];}}if(_0x26eed2['side']==_0x523e31(0x200)){let _0xa50db3=config[_0x523e31(0x1ca)][_0x523e31(0x1b9)](_0x2ee87d=>_0x2ee87d[_0x523e31(0x198)]==config[_0x523e31(0x222)]),_0x4b586b=currentCoins[_0x523e31(0x1b9)](_0x4c67ea=>_0x4c67ea[_0x523e31(0x198)]==config['basecoin']);if(_0xa50db3[_0x523e31(0x237)]>0x0){if(Math[_0x523e31(0x248)](_0x15aba4)*_0x26eed2[_0x523e31(0x19d)]>_0x4b586b['number']-_0xa50db3[_0x523e31(0x237)])_0x2bdb2f=![];}else{if(Math[_0x523e31(0x248)](_0x15aba4)*_0x26eed2[_0x523e31(0x19d)]>_0x4b586b['number'])_0x2bdb2f=![];}}return _0x2bdb2f;}async function getBalances(_0x7f98af=!![]){const _0x19023d=_0x8496ec;let _0xbe50b5=0x0,_0x15af7f;const _0x442df=config[_0x19023d(0x1c6)];if(config[_0x19023d(0x10e)]&&config[_0x19023d(0x24b)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x22699b=>{const _0x124c39=_0x19023d;if(_0x22699b[_0x124c39(0x198)]!=config[_0x124c39(0x222)]){let _0x2e3707=gTicker[noslash(_0x22699b[_0x124c39(0x130)])];_0x15af7f=_0x22699b['reverse']?0x1/_0x2e3707:_0x2e3707;}else _0x15af7f=0x1;let _0x2c455e=_0x22699b['number']*_0x15af7f;_0xbe50b5+=_0x2c455e,_0x22699b[_0x124c39(0x19d)]=formatResult(Number(_0x15af7f),0x8),_0x22699b['value']=_0x2c455e;}),currentCoins['forEach'](_0x253fbb=>{const _0x38e5ac=_0x19023d;let _0x2223df=config['portfolio']['find'](_0x647cbb=>_0x647cbb[_0x38e5ac(0x198)]==_0x253fbb[_0x38e5ac(0x198)]),_0x58316c=Number(_0x2223df[_0x38e5ac(0x2c3)]),_0x89cf0b=_0x253fbb[_0x38e5ac(0x20d)]/_0xbe50b5*0x64,_0x288f3f=_0x58316c*_0xbe50b5/0x64/_0x253fbb[_0x38e5ac(0x19d)]-_0x253fbb['number'];_0x253fbb[_0x38e5ac(0x2c3)]=formatResult(_0x89cf0b,0x3),_0x253fbb[_0x38e5ac(0x1e6)]=formatResult(_0x58316c,0x3),_0x253fbb[_0x38e5ac(0x244)]=formatResult(_0x288f3f,0x8),_0x253fbb[_0x38e5ac(0x21a)]='',_0x253fbb[_0x38e5ac(0x2c4)]=![];if(_0x253fbb['coin']!=config['basecoin']){if(_0x253fbb['distribution']>_0x58316c)_0x253fbb[_0x38e5ac(0x21a)]=_0x38e5ac(0x149),_0x253fbb['valid']=checkMinimums(_0x253fbb);else _0x253fbb[_0x38e5ac(0x2c3)]<_0x58316c&&(_0x253fbb['side']=_0x38e5ac(0x200),_0x253fbb[_0x38e5ac(0x2c4)]=checkMinimums(_0x253fbb));}_0x253fbb[_0x38e5ac(0x15b)]=_0x253fbb[_0x38e5ac(0x2c3)]/_0x253fbb[_0x38e5ac(0x1e6)]-0x1;if(_0x253fbb[_0x38e5ac(0x263)]==_0x38e5ac(0x1e7)||_0x253fbb[_0x38e5ac(0x263)]==_0x38e5ac(0x22b))_0x253fbb['orderstatus']=_0x38e5ac(0x268);}),currentCoins['sort']((_0x2ebbed,_0x324ee8)=>_0x2ebbed[_0x19023d(0x15b)]<_0x324ee8[_0x19023d(0x15b)]?0x1:_0x324ee8[_0x19023d(0x15b)]<_0x2ebbed[_0x19023d(0x15b)]?-0x1:0x0);const _0x47d27f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47d27f[_0x19023d(0x28d)],'usd':_0x47d27f['usd'],'portfolio':JSON[_0x19023d(0x14a)](currentCoins),'threshold':_0x442df},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x7f98af){if(config[_0x19023d(0x10e)])headlessMode({'portfolio':currentCoins,'threshold':_0x442df});else{if(lockOrders==ORDERS[_0x19023d(0x179)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x442df});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3d4c17=getNormalizedPerformance();getStartingBalances(_0x3d4c17),emitPerformance(_0x3d4c17);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xc9a4b1=_0x8496ec;if(!lastBalances)return;let _0x345a8d=[],_0x3f76fb,_0x460892=JSON[_0xc9a4b1(0xff)](lastBalances[_0xc9a4b1(0x1ca)]);_0x460892[_0xc9a4b1(0x170)]((_0xe676ec,_0x3e16fe)=>_0xe676ec['coin']>_0x3e16fe[_0xc9a4b1(0x198)]?0x1:_0x3e16fe[_0xc9a4b1(0x198)]>_0xe676ec[_0xc9a4b1(0x198)]?-0x1:0x0),_0x460892[_0xc9a4b1(0x175)](_0x2e2c76=>{const _0x273461=_0xc9a4b1;let _0x6b9642={'coin':_0x2e2c76[_0x273461(0x198)],'number':_0x2e2c76[_0x273461(0x107)],'price':_0x2e2c76['last']};_0x345a8d[_0x273461(0x1f8)](_0x6b9642);});const _0x3809=await getFiat();_0x3f76fb={'date':lastBalances[_0xc9a4b1(0x199)][_0xc9a4b1(0x2b2)]('\x20')[0x0],'eur':_0x3809[_0xc9a4b1(0x28d)],'usd':_0x3809[_0xc9a4b1(0x262)],'coins':_0x345a8d};let _0x3bfc78=dbPerformance[_0xc9a4b1(0x1f1)](_0xc9a4b1(0x188))['find']({'date':_0x3f76fb[_0xc9a4b1(0x2bb)]})[_0xc9a4b1(0x20d)]();_0x3bfc78?_0x3f76fb[_0xc9a4b1(0x2bb)]!=config[_0xc9a4b1(0x2a1)]&&dbPerformance['get']('data')[_0xc9a4b1(0x1b9)]({'date':_0x3f76fb[_0xc9a4b1(0x2bb)]})['assign'](_0x3f76fb)[_0xc9a4b1(0x29e)]():dbPerformance[_0xc9a4b1(0x1f1)](_0xc9a4b1(0x188))[_0xc9a4b1(0x1f8)](_0x3f76fb)[_0xc9a4b1(0x29e)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3fbe65=_0x8496ec;let _0xaa82ab=[];if(dbPerformance[_0x3fbe65(0x129)](_0x3fbe65(0x188))['value']()){let _0xf5851f=dbPerformance['get'](_0x3fbe65(0x188))[_0x3fbe65(0x1b3)]()[_0x3fbe65(0x17d)](_0x320e50=>{const _0x2a85dd=_0x3fbe65;if(_0x320e50[_0x2a85dd(0x2a7)][_0x2a85dd(0x19e)]==0x0)return![];else return!![];})['sortBy'](_0x3fbe65(0x2bb))[_0x3fbe65(0x20d)](),_0x40baca=[...config[_0x3fbe65(0x14f)]];_0x40baca[_0x3fbe65(0x170)]((_0x5ce7bc,_0xd187ac)=>_0x5ce7bc['date']>_0xd187ac[_0x3fbe65(0x2bb)]?-0x1:_0xd187ac[_0x3fbe65(0x2bb)]>_0x5ce7bc[_0x3fbe65(0x2bb)]?0x1:0x0);let _0x138c59=0x1,_0x52dd6d=[],_0x187f48=0x0;_0xf5851f[_0x3fbe65(0x1b7)]()[_0x3fbe65(0x201)]()[_0x3fbe65(0x175)]((_0x1316ef,_0x5b4b91)=>{const _0x18ddb7=_0x3fbe65;if(_0x40baca[_0x187f48]){if(_0xf5851f[_0xf5851f[_0x18ddb7(0x19e)]-_0x5b4b91]&&_0x40baca[_0x187f48][_0x18ddb7(0x2bb)]==_0xf5851f[_0xf5851f[_0x18ddb7(0x19e)]-_0x5b4b91][_0x18ddb7(0x2bb)]){if(_0x5b4b91<_0xf5851f[_0x18ddb7(0x19e)]){let _0x7832c3=0x0,_0x1a87c6=0x0;_0xf5851f[_0xf5851f['length']-_0x5b4b91][_0x18ddb7(0x2a7)][_0x18ddb7(0x175)](_0x932f47=>{const _0x2f5d9f=_0x18ddb7;_0x1a87c6+=_0x932f47['number']*_0x932f47[_0x2f5d9f(0x215)];}),_0x40baca[_0x187f48]['changes']['forEach'](_0x305cfa=>{const _0x3df752=_0x18ddb7;_0x7832c3+=_0x305cfa['number']*_0x305cfa[_0x3df752(0x215)];}),_0x138c59*=_0x7832c3/(_0x1a87c6-_0x7832c3)+0x1;}_0x187f48++;}}let _0x15b04d=0x0;_0x1316ef[_0x18ddb7(0x2a7)][_0x18ddb7(0x175)](_0xf71aae=>{const _0xeedd48=_0x18ddb7;_0x15b04d+=_0xf71aae['number']*_0xf71aae[_0xeedd48(0x215)];}),_0x52dd6d[_0xf5851f[_0x18ddb7(0x19e)]-_0x5b4b91-0x1]=_0x15b04d*(_0x138c59-0x1);});let _0x4c8e08=[];_0x40baca=[...config[_0x3fbe65(0x14f)]]||[];let _0x4412dd=0x0;_0x187f48=0x0,_0xf5851f['forEach']((_0x291ffa,_0x5fb961)=>{const _0x45bcae=_0x3fbe65;if(_0x40baca[_0x187f48]){const _0x1d23d7=fns[_0x45bcae(0xff)](_0x40baca[_0x187f48][_0x45bcae(0x2bb)],_0x45bcae(0x23c),new Date()),_0x39c9cf=fns[_0x45bcae(0xff)](_0x291ffa[_0x45bcae(0x2bb)],_0x45bcae(0x23c),new Date());if(fns['isEqual'](_0x1d23d7,_0x39c9cf)){let _0x14a1b3=0x0;_0x40baca[_0x187f48][_0x45bcae(0x164)][_0x45bcae(0x175)](_0x1eb024=>{const _0x3492c7=_0x45bcae;!_0x4c8e08[_0x1eb024[_0x3492c7(0x198)]]?_0x4c8e08[_0x1eb024[_0x3492c7(0x198)]]=_0x1eb024['number']:(_0x14a1b3=_0x4c8e08[_0x1eb024['coin']],_0x4c8e08[_0x1eb024[_0x3492c7(0x198)]]+=_0x1eb024['number']);const _0x416261=_0x291ffa['coins']['find'](_0xab032e=>_0xab032e[_0x3492c7(0x198)]==_0x1eb024['coin']);(!_0x416261||_0x416261[_0x3492c7(0x107)]==0x0)&&(_0x4412dd+=(-_0x1eb024[_0x3492c7(0x107)]-_0x14a1b3)*_0x1eb024[_0x3492c7(0x215)]);}),_0x187f48++;}}_0x291ffa[_0x45bcae(0x2a7)][_0x45bcae(0x175)]((_0x1d53ed,_0x45240a)=>{const _0x4a5664=_0x45bcae;_0x4c8e08[_0x1d53ed['coin']]&&(_0x1d53ed[_0x4a5664(0x1a1)]=_0x4c8e08[_0x1d53ed[_0x4a5664(0x198)]]);}),_0xaa82ab[_0x45bcae(0x1f8)]({'date':_0x291ffa[_0x45bcae(0x2bb)],'eur':_0x291ffa[_0x45bcae(0x28d)],'usd':_0x291ffa[_0x45bcae(0x262)],'offset':_0x52dd6d[_0x5fb961],'netoffset':_0x4412dd,'coins':_0x291ffa[_0x45bcae(0x2a7)]});});}return _0xaa82ab;}function emitPerformance(_0x246fc2){const _0x360269=_0x8496ec;_0x246fc2[_0x360269(0x19e)]!==0x0?(proxyEmit('performance',_0x246fc2),lastPerformanceEmitted=getDate()):proxyEmit(_0x360269(0x1dc),[]);}function getPerf(_0x54f6a9,_0x1051b1){const _0xf2418d=_0x8496ec;let _0xc8555c=0x0,_0x123d5b=0x0,_0xc564a0=0x0;_0x54f6a9[_0xf2418d(0x2a7)][_0xf2418d(0x175)](_0x4fd2e7=>{const _0x50ae52=_0xf2418d;_0xc8555c+=_0x4fd2e7[_0x50ae52(0x107)]*_0x4fd2e7[_0x50ae52(0x215)];});_0x1051b1&&(_0xc8555c+=_0x54f6a9['offset']);if(config[_0xf2418d(0x222)]===_0xf2418d(0x2ad)||config[_0xf2418d(0x222)]===_0xf2418d(0x2b8)||config[_0xf2418d(0x222)]===_0xf2418d(0x227))_0x123d5b=_0xc8555c*_0x54f6a9['eur'],_0xc564a0=_0xc8555c*_0x54f6a9[_0xf2418d(0x262)];else{if(usdBasecoins[_0xf2418d(0x2b9)](config[_0xf2418d(0x222)]))_0x123d5b=_0xc8555c*_0x54f6a9['eur']/_0x54f6a9[_0xf2418d(0x262)],_0xc564a0=_0xc8555c;else config[_0xf2418d(0x222)]===_0xf2418d(0x1b4)&&(_0x123d5b=_0xc8555c,_0xc564a0=_0xc8555c*_0x54f6a9[_0xf2418d(0x262)]/_0x54f6a9[_0xf2418d(0x28d)]);}return[_0xc8555c,_0x123d5b,_0xc564a0];}function getKPIs(_0x4c381f,_0x7a8d7a=_0x8496ec(0x1b4)){const _0x13bc9c=_0x8496ec,_0x27d0a4=config['basecoin'],_0x3b45da=lastBalances,_0x31f563=currentCoins,_0x7a3e84=getNormalizedPerformance(),_0x3d230e=_0x4c381f===_0x13bc9c(0x222)?_0x27d0a4:_0x4c381f==='fiat'||_0x4c381f===_0x13bc9c(0x282)?_0x7a8d7a:_0x13bc9c(0x2aa)+_0x27d0a4,_0x3eb01d=_0x4c381f===_0x13bc9c(0x208)?_0x13bc9c(0x122):_0x4c381f===_0x13bc9c(0x282)?_0x13bc9c(0x122):_0x3d230e+_0x13bc9c(0x1d7),_0xc78e56=_0x4c381f==='net-basecoin'||_0x4c381f===_0x13bc9c(0x282)?'Net\x20effect':_0x3d230e+_0x13bc9c(0x1be);let _0x5e4d43=0x0;_0x31f563['forEach'](_0x44ebfd=>{const _0x12f6d2=_0x13bc9c;_0x5e4d43+=_0x44ebfd[_0x12f6d2(0x107)]*_0x44ebfd['last'];});if(_0x4c381f==='fiat'||_0x4c381f===_0x13bc9c(0x282)){if(_0x27d0a4==='BTC'||_0x27d0a4===_0x13bc9c(0x2b8)||_0x27d0a4===_0x13bc9c(0x227))_0x5e4d43=_0x5e4d43*(_0x7a8d7a==='EUR'?_0x3b45da[_0x13bc9c(0x28d)]:_0x3b45da['usd']);else{if(usdBasecoins[_0x13bc9c(0x2b9)](_0x27d0a4))_0x5e4d43=_0x5e4d43*(_0x7a8d7a==='EUR'?_0x3b45da['eur']/_0x3b45da[_0x13bc9c(0x262)]:0x1);else _0x27d0a4==='EUR'&&(_0x5e4d43=_0x5e4d43*(_0x7a8d7a===_0x13bc9c(0x1b4)?0x1:_0x3b45da['usd']/_0x3b45da[_0x13bc9c(0x28d)]));}}let _0x2c7c1f;if(_0x5e4d43!==0x0){if(_0x4c381f==='basecoin')_0x2c7c1f=(_0x5e4d43/startingBalances['basecoin']-0x1)*0x64;else{if(_0x7a8d7a===_0x13bc9c(0x1b4))_0x2c7c1f=(_0x5e4d43/startingBalances['eur']-0x1)*0x64;else _0x2c7c1f=(_0x5e4d43/startingBalances['usd']-0x1)*0x64;}let _0x4c899f=0x0;if(startingBalances[_0x13bc9c(0x2a7)])_0x31f563[_0x13bc9c(0x175)](_0x423b9c=>{const _0x5de043=_0x13bc9c;let _0x201bf2=startingBalances[_0x5de043(0x2a7)][_0x5de043(0x1b9)](_0x34233d=>_0x34233d[_0x5de043(0x198)]===_0x423b9c[_0x5de043(0x198)]);if(_0x201bf2&&_0x201bf2[_0x5de043(0x198)]&&_0x423b9c[_0x5de043(0x107)]!==0x0)_0x4c899f+=_0x201bf2['number']*_0x423b9c[_0x5de043(0x19d)];});let _0x5bdb76=0x0;if(_0x7a3e84['length']!==0x0){let _0x479c71=_0x7a3e84[_0x7a3e84[_0x13bc9c(0x19e)]-0x1];_0x5bdb76=_0x479c71[_0x13bc9c(0x14b)];}_0x4c899f-=_0x5bdb76;_0x4c381f==='net-basecoin'&&(_0x2c7c1f=(_0x5e4d43-_0x4c899f)/startingBalances['basecoin']*0x64,_0x5e4d43=_0x5e4d43-_0x4c899f);if(_0x4c381f===_0x13bc9c(0x282)){let _0xd860bc=_0x7a8d7a===_0x13bc9c(0x1b4)?startingBalances['eur']:startingBalances[_0x13bc9c(0x262)];if(_0x27d0a4===_0x13bc9c(0x2ad)||_0x27d0a4===_0x13bc9c(0x2b8)||_0x27d0a4===_0x13bc9c(0x227))_0x4c899f=_0x7a8d7a===_0x13bc9c(0x1b4)?_0x4c899f*_0x3b45da['eur']:_0x4c899f*_0x3b45da[_0x13bc9c(0x262)];else{if(usdBasecoins[_0x13bc9c(0x2b9)](_0x27d0a4))_0x4c899f=_0x7a8d7a===_0x13bc9c(0x1b4)?_0x4c899f*_0x3b45da['eur']/_0x3b45da['usd']:_0x4c899f;else _0x27d0a4===_0x13bc9c(0x1b4)&&(_0x4c899f=_0x7a8d7a==='EUR'?_0x4c899f:_0x4c899f*_0x3b45da[_0x13bc9c(0x262)]/_0x3b45da[_0x13bc9c(0x28d)]);}_0x2c7c1f=(_0x5e4d43-_0x4c899f)/_0xd860bc*0x64,_0x5e4d43=_0x5e4d43-_0x4c899f;}if(_0x2c7c1f){if(_0x2c7c1f<0x64)_0x2c7c1f=_0x2c7c1f[_0x13bc9c(0x22a)](0x2);else{if(_0x2c7c1f<0x3e8)_0x2c7c1f=_0x2c7c1f['toFixed'](0x1);else _0x2c7c1f=_0x2c7c1f[_0x13bc9c(0x22a)](0x0);}}else _0x2c7c1f=Number('0')['toFixed'](0x2);if(_0x5e4d43){if(Math[_0x13bc9c(0x248)](_0x5e4d43)<0.000001)_0x5e4d43=_0x5e4d43['toFixed'](0x2);else{if(Math['abs'](_0x5e4d43)<0.1)_0x5e4d43=_0x5e4d43[_0x13bc9c(0x22a)](0x6);else{if(Math[_0x13bc9c(0x248)](_0x5e4d43)<0x1)_0x5e4d43=_0x5e4d43['toFixed'](0x5);else{if(Math[_0x13bc9c(0x248)](_0x5e4d43)<0xa)_0x5e4d43=_0x5e4d43[_0x13bc9c(0x22a)](0x4);else{if(Math[_0x13bc9c(0x248)](_0x5e4d43)<0x64)_0x5e4d43=_0x5e4d43[_0x13bc9c(0x22a)](0x3);else{if(Math[_0x13bc9c(0x248)](_0x5e4d43)<0x3e8)_0x5e4d43=_0x5e4d43[_0x13bc9c(0x22a)](0x2);else _0x5e4d43=_0x5e4d43['toFixed'](0x2);}}}}}}else _0x5e4d43=Number('0')[_0x13bc9c(0x22a)](0x2);}else _0x2c7c1f=Number('0')[_0x13bc9c(0x22a)](0x2);return{'value':_0x5e4d43,'change':_0x2c7c1f,'leftTxt':_0x3eb01d,'rightTxt':_0xc78e56};}async function getStartingBalances(_0x34306a,_0x1ebc38=!![]){const _0x1ce743=_0x8496ec;if(_0x34306a['length']!==0x0){const [_0x51779d,_0x45cc79,_0xd7c7db]=getPerf(_0x34306a[0x0],!![]);let _0x4b4d54=[];config[_0x1ce743(0x1ca)][_0x1ce743(0x175)](_0x31759b=>{const _0x4773d6=_0x1ce743;let _0x20835b=0x0,_0x4ed500;config[_0x4773d6(0x14f)]['forEach'](_0x2c725a=>{const _0x18699d=_0x4773d6;let _0x1157da=_0x2c725a[_0x18699d(0x164)][_0x18699d(0x1b9)](_0x105605=>_0x105605[_0x18699d(0x198)]==_0x31759b[_0x18699d(0x198)]);if(_0x1157da){_0x20835b+=_0x1157da['number'];if(!_0x4ed500)_0x4ed500=_0x1157da[_0x18699d(0x215)];}}),_0x4b4d54['push']({'coin':_0x31759b['coin'],'number':_0x20835b,'initialprice':_0x4ed500});});const _0x17d6b1={'basecoin':_0x51779d,'eur':_0x45cc79,'usd':_0xd7c7db,'coins':_0x4b4d54};if(_0x1ebc38)proxyEmit(_0x1ce743(0x171),_0x17d6b1);startingBalances=_0x17d6b1;}}function headlessMode(_0x104ddf){const _0x356b5a=_0x8496ec;let _0x5981ca=_0x104ddf['portfolio'],_0x3495d4=_0x104ddf['threshold'],_0x51ac15=[];for(let _0x58faa5 of _0x5981ca){if(_0x58faa5[_0x356b5a(0x198)]!=config[_0x356b5a(0x222)]){if(_0x58faa5['delta']>=_0x3495d4/0x64){if(_0x58faa5['valid'])_0x51ac15['push'](_0x58faa5);}else{if(_0x58faa5['delta']<=-_0x3495d4/0x64){if(_0x58faa5['valid'])_0x51ac15['push'](_0x58faa5);}}}}_0x51ac15[_0x356b5a(0x19e)]>0x0&&(lockOrders==ORDERS[_0x356b5a(0x179)]&&!coolingDown&&_0x51ac15[_0x356b5a(0x175)](_0x1dc8ae=>{const _0x50af93=_0x356b5a;logger[_0x50af93(0x219)](_0x50af93(0x191)+_0x1dc8ae['coin']+'\x20'+_0x1dc8ae[_0x50af93(0x107)]+'\x20'+_0x1dc8ae[_0x50af93(0x19d)]+'\x20'+_0x1dc8ae[_0x50af93(0x2c3)]+'%\x20'+_0x1dc8ae[_0x50af93(0x1e6)]+'%\x20'+(0x64*_0x1dc8ae[_0x50af93(0x15b)])[_0x50af93(0x22a)](0x2)+'%\x20('+_0x3495d4['toFixed'](0x2)+'%)');}),placeOrder(_0x51ac15));}function notifyBalance(_0x577afe){const _0x3f247f=_0x8496ec;let _0x29da80=_0x577afe[_0x3f247f(0x1ca)],_0x1f4ad3=_0x577afe[_0x3f247f(0x1c6)],_0x498ca0=[];for(let _0x552813 of _0x29da80){if(_0x552813[_0x3f247f(0x198)]!=config[_0x3f247f(0x222)]){if(_0x552813[_0x3f247f(0x15b)]>=_0x1f4ad3/0x64){if(_0x552813[_0x3f247f(0x2c4)])_0x498ca0[_0x3f247f(0x1f8)](_0x552813);}else{if(_0x552813[_0x3f247f(0x15b)]<=-_0x1f4ad3/0x64){if(_0x552813['valid'])_0x498ca0['push'](_0x552813);}}}}if(_0x498ca0[_0x3f247f(0x19e)]>0x0){let _0x8f72e4=_0x498ca0[_0x3f247f(0x23a)](_0x173f11=>_0x173f11[_0x3f247f(0x198)]);_0x8f72e4[_0x3f247f(0x170)]();let _0x11e1d9=_0x8f72e4[_0x3f247f(0x1b2)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3f247f(0x297),_0x3f247f(0x125));lastCoinsToBalance=_0x11e1d9;}}function symbolToCoin(_0x391531){const _0x436abe=_0x8496ec;let _0xe70c17;if(_0x391531[_0x436abe(0x2b9)]('/'+config['basecoin']))_0xe70c17=_0x391531['replace']('/'+config['basecoin'],'');if(_0x391531[_0x436abe(0x2b9)](config['basecoin']+'/'))_0xe70c17=_0x391531[_0x436abe(0x1f2)](config[_0x436abe(0x222)]+'/','');return _0xe70c17;}async function unlockOrders(_0x79214b=![]){const _0x14bab3=_0x8496ec;if(allOrdersPlaced&&lockOrders==ORDERS[_0x14bab3(0x1da)]){logger[_0x14bab3(0x219)](_0x14bab3(0x1ea)),lockOrders=ORDERS[_0x14bab3(0x243)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x79214b){const _0x3d5a95=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3d5a95,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x14bab3(0x179)],logger[_0x14bab3(0x219)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x538e90){const _0x686502=_0x8496ec;if(_0x538e90)validateOrdersState=_0x538e90;logger[_0x686502(0x219)](_0x686502(0x1c8)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x686502(0x183):_0x686502(0x241)));let _0x1aa0e4=[],_0xa45a0a=config[_0x686502(0x247)]==_0x686502(0x17c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x686502(0x1da)])return;logger[_0x686502(0x219)](_0x686502(0x185)+validateOrdersState),lastOrders[_0x686502(0x175)](_0x5f3eac=>{const _0xe4b3b1=_0x686502;let _0x360c13=![];_0x5f3eac[_0xe4b3b1(0x1e7)]>0x0&&(_0x360c13=!![]),_0x1aa0e4[_0xe4b3b1(0x1f8)](_0x360c13),_0x360c13&&config['ordertype']!=_0xe4b3b1(0x17c)&&logHistory(_0xe4b3b1(0x119),_0xe4b3b1(0x209)+_0x5f3eac[_0xe4b3b1(0x130)]+'\x20'+_0x5f3eac['side']+'\x20#'+formatResult(_0x5f3eac[_0xe4b3b1(0x1e7)],0x8)+'\x20@'+formatResult(_0x5f3eac['price'],0x8));}),_0x1aa0e4[_0x686502(0x175)]((_0x37e231,_0x470b9f)=>{if(_0x37e231)lastOrders['splice'](_0x470b9f,0x1);}),persistOpenOrders(lastOrders);const _0x5631c4=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x686502(0x15c);if(validateOrdersState==_0x686502(0x1a1)){validateOrdersState=_0x686502(0x14c);if(_0x1aa0e4[_0x686502(0x2b9)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1aa0e4[_0x686502(0x2b9)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x686502(0x1d0))_0x1aa0e4[_0x686502(0x2b9)](![])&&(config[_0x686502(0x247)]==_0x686502(0x17c)?logHistory(_0x686502(0x252),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x686502(0x1d9)](_0xa45a0a*validateOrderInterval/0xea60)+_0x686502(0x1cd)+_0x5631c4):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x686502(0x1d9)](_0xa45a0a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5631c4))),await unlockOrders(!![]);else{if(validateOrdersState==_0x686502(0x246)){if(config['ordertype']!='market')logHistory(_0x686502(0x252),_0x686502(0x2b0)+_0x5631c4);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2060ea=>{const _0x542ad7=_0x33f9;try{const _0x467284=await exchange[_0x542ad7(0x16d)](_0x2060ea['orderId'],_0x2060ea[_0x542ad7(0x130)]);}catch(_0x2a5da6){if(_0x2a5da6[_0x542ad7(0x28a)]()[_0x542ad7(0x2b9)](_0x542ad7(0x16f))){}else await handleError(_0x2a5da6,_0x542ad7(0x148));}});}async function initCoinResults(_0x1750ba){const _0x443d4d=_0x8496ec;_0x1750ba?logger[_0x443d4d(0x219)](_0x443d4d(0x166)+_0x1750ba):logger[_0x443d4d(0x219)]('Initializing\x20coin\x20results'),config[_0x443d4d(0x1ca)]['forEach'](_0x2340a4=>{const _0x95c6f3=_0x443d4d;if(!_0x2340a4[_0x95c6f3(0x29a)]&&_0x2340a4[_0x95c6f3(0x198)]!=config[_0x95c6f3(0x222)]){const _0x143ba6=currentCoins[_0x95c6f3(0x1b9)](_0x4cec38=>_0x4cec38[_0x95c6f3(0x198)]==_0x2340a4['coin']),_0x19b593=gTicker[noslash(_0x2340a4['symbol'])];let _0x4f3029=_0x143ba6?_0x143ba6[_0x95c6f3(0x107)]:null,_0x1798ed=_0x2340a4['reverse']?0x1/_0x19b593:_0x19b593,_0x42d8b1;config['liquidity'][_0x95c6f3(0x175)](_0x4ee151=>{const _0x1dfdf6=_0x95c6f3;!_0x42d8b1&&(_0x42d8b1=_0x4ee151[_0x1dfdf6(0x164)][_0x1dfdf6(0x1b9)](_0x201908=>_0x201908[_0x1dfdf6(0x198)]==_0x2340a4['coin']),_0x42d8b1&&(_0x4f3029=_0x42d8b1[_0x1dfdf6(0x107)],_0x1798ed=_0x42d8b1['price']));});let _0x398232=dbCoinResults[_0x95c6f3(0x1f1)](_0x95c6f3(0x2a7))['find']({'coin':_0x2340a4['coin']})[_0x95c6f3(0x20d)]();if(!_0x398232){const _0x284c00={'coin':_0x2340a4[_0x95c6f3(0x198)],'number':_0x4f3029,'breakeven':_0x1798ed,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x95c6f3(0x1f8)](_0x284c00)[_0x95c6f3(0x29e)]();}else{if(_0x1750ba&&_0x2340a4[_0x95c6f3(0x198)]==_0x1750ba){const _0x4c3c0a={'coin':_0x2340a4[_0x95c6f3(0x198)],'number':_0x4f3029,'breakeven':_0x1798ed,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x95c6f3(0x1b9)]({'coin':_0x2340a4['coin']})[_0x95c6f3(0x1af)](_0x4c3c0a)[_0x95c6f3(0x29e)]();}}}});}async function updateCoinResults(_0x2e2362,_0x51b692=![]){const _0x9345d5=_0x8496ec;let _0x424ce1,_0x77179b,_0x1c13b4,_0x428ba5,_0x3c9552,_0x4dc368,_0x392f58=dbCoinResults[_0x9345d5(0x1f1)](_0x9345d5(0x2a7))[_0x9345d5(0x1b9)]({'coin':_0x2e2362[_0x9345d5(0x198)]})['value'](),_0x5e42f9=![];_0x392f58&&Object['entries'](_0x392f58)[_0x9345d5(0x175)](([_0x40e684,_0x513976])=>{if(_0x513976==null)_0x5e42f9=!![];});(!_0x392f58||_0x5e42f9)&&(await initCoinResults(_0x2e2362[_0x9345d5(0x198)]),_0x392f58=dbCoinResults[_0x9345d5(0x1f1)](_0x9345d5(0x2a7))[_0x9345d5(0x1b9)]({'coin':_0x2e2362['coin']})['value']());_0x2e2362['reverse']&&(_0x4dc368={'filled':_0x2e2362['filled']*_0x2e2362[_0x9345d5(0x215)],'amount':_0x2e2362[_0x9345d5(0x1e7)]*_0x2e2362[_0x9345d5(0x215)],'side':_0x2e2362[_0x9345d5(0x21a)]=='sell'?'buy':_0x9345d5(0x149),'price':0x1/_0x2e2362[_0x9345d5(0x215)]},_0x2e2362={..._0x2e2362,..._0x4dc368});_0x51b692?_0x77179b=_0x2e2362['side']==_0x9345d5(0x200)?_0x392f58[_0x9345d5(0x107)]+_0x2e2362[_0x9345d5(0x1e7)]:_0x392f58[_0x9345d5(0x107)]-_0x2e2362[_0x9345d5(0x1e7)]:_0x77179b=await getCoinNumber(_0x2e2362['coin']);if(_0x2e2362[_0x9345d5(0x28b)]&&_0x2e2362['fee'][_0x9345d5(0x2a5)]==config[_0x9345d5(0x222)])_0x424ce1=Number(_0x2e2362[_0x9345d5(0x28b)]['cost']);else{if(_0x2e2362[_0x9345d5(0x28b)]&&_0x2e2362[_0x9345d5(0x28b)]['currency']==_0x9345d5(0x233)&&!_0x51b692&&config[_0x9345d5(0x222)]!=_0x9345d5(0x227))_0x424ce1=Number(_0x2e2362[_0x9345d5(0x28b)][_0x9345d5(0x1b5)])*gTicker['BNB'+config[_0x9345d5(0x222)]];else _0x424ce1=defaultFee*_0x2e2362[_0x9345d5(0x1e7)]*_0x2e2362[_0x9345d5(0x215)];}_0x2e2362['side']==_0x9345d5(0x200)?(_0x1c13b4=_0x77179b!=0x0?(_0x392f58['breakeven']*_0x392f58[_0x9345d5(0x107)]+_0x2e2362[_0x9345d5(0x215)]*(_0x77179b-_0x392f58['number'])+_0x424ce1)/_0x77179b:0x0,_0x428ba5=_0x392f58['realized']):(_0x1c13b4=_0x77179b!=0x0?(_0x392f58[_0x9345d5(0x1c1)]*_0x392f58[_0x9345d5(0x107)]-_0x2e2362['price']*(_0x392f58['number']-_0x77179b)+_0x424ce1)/_0x77179b:0x0,_0x428ba5=_0x392f58[_0x9345d5(0x10c)]+(_0x2e2362[_0x9345d5(0x215)]-_0x392f58['breakeven'])*_0x2e2362[_0x9345d5(0x1e7)]);_0x3c9552=(_0x2e2362[_0x9345d5(0x215)]-_0x1c13b4-_0x424ce1/_0x2e2362[_0x9345d5(0x1e7)])*_0x77179b;let _0x1cbf70={'coin':_0x2e2362[_0x9345d5(0x198)],'number':_0x77179b,'breakeven':formatResult(_0x1c13b4,0x8),'realized':formatResult(_0x428ba5,0x8),'unrealized':formatResult(_0x3c9552,0x8),'fees':formatResult(_0x392f58[_0x9345d5(0x214)]+_0x424ce1,0x8),'sells':_0x2e2362[_0x9345d5(0x21a)]==_0x9345d5(0x149)?_0x392f58[_0x9345d5(0x25f)]+0x1:_0x392f58[_0x9345d5(0x25f)],'buys':_0x2e2362[_0x9345d5(0x21a)]=='buy'?_0x392f58[_0x9345d5(0x156)]+0x1:_0x392f58['buys']};dbCoinResults[_0x9345d5(0x1f1)](_0x9345d5(0x2a7))[_0x9345d5(0x1b9)]({'coin':_0x2e2362[_0x9345d5(0x198)]})[_0x9345d5(0x1af)](_0x1cbf70)[_0x9345d5(0x29e)]();if(!_0x51b692){if(_0x2e2362['fee']&&_0x2e2362['fee'][_0x9345d5(0x2a5)]=='BNB'){const _0x335a4c=currentCoins[_0x9345d5(0x1b9)](_0x1b3d80=>_0x1b3d80['coin']==_0x9345d5(0x233));if(_0x335a4c){let _0x30fbac=dbCoinResults[_0x9345d5(0x1f1)](_0x9345d5(0x2a7))[_0x9345d5(0x1b9)]({'coin':'BNB'})[_0x9345d5(0x20d)]();_0x1cbf70={..._0x30fbac,'number':_0x335a4c['number']},dbCoinResults[_0x9345d5(0x1f1)]('coins')[_0x9345d5(0x1b9)]({'coin':_0x9345d5(0x233)})['assign'](_0x1cbf70)[_0x9345d5(0x29e)]();}}}}async function placeOrder(_0x361d8a){const _0x43ede3=_0x8496ec,_0x3f5dee=config[_0x43ede3(0x247)]==_0x43ede3(0x17c)?_0x43ede3(0x17c):_0x43ede3(0x29b);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x43ede3(0x1da)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x1ac80a=![];lastOrders=[];for(const _0x181798 of _0x361d8a){let _0x33e581,_0x124752,_0x1651b6,_0x42f5df,_0x4abc61,_0x20bb89=_0x181798[_0x43ede3(0x130)];try{const _0x1874a7=await exchange[_0x43ede3(0x27d)](_0x20bb89);_0x33e581=_0x181798[_0x43ede3(0x201)]?0x1/_0x181798[_0x43ede3(0x19d)]:_0x181798[_0x43ede3(0x19d)],_0x124752=_0x1874a7['bid'],_0x1651b6=_0x1874a7['ask'];_0x181798['reverse']?(_0x42f5df=_0x181798['side']==_0x43ede3(0x200)?_0x43ede3(0x149):_0x43ede3(0x200),_0x4abc61=Math['abs'](_0x181798[_0x43ede3(0x244)])/_0x33e581):(_0x42f5df=_0x181798[_0x43ede3(0x21a)],_0x4abc61=Math[_0x43ede3(0x248)](_0x181798[_0x43ede3(0x244)]));_0x3f5dee==_0x43ede3(0x29b)&&(config[_0x43ede3(0x247)]==_0x43ede3(0x279)&&(_0x33e581=_0x42f5df==_0x43ede3(0x200)?_0x124752:_0x1651b6),config[_0x43ede3(0x247)]=='limit-low'&&(_0x33e581=_0x42f5df=='buy'?_0x1651b6:_0x124752));_0x4abc61=formatResult(_0x4abc61,0x8),_0x33e581=formatResult(_0x33e581,0x8);const _0x89b7a5=_0x42f5df==_0x43ede3(0x149)?config[_0x43ede3(0x180)]?String[_0x43ede3(0x2bc)]('0x'+config['emojisell'])+'\x20':'':config[_0x43ede3(0x142)]?String[_0x43ede3(0x2bc)]('0x'+config[_0x43ede3(0x142)])+'\x20':'',_0xfc08e5=_0x3f5dee==_0x43ede3(0x17c)?_0x43ede3(0x1bb):config[_0x43ede3(0x247)]==_0x43ede3(0x279)?_0x43ede3(0x291):'Limit\x20(low-margin)',_0x492f5c=(Math['floor'](Math[_0x43ede3(0x1bd)]()*0x35a4e900)+0x5f5e100)[_0x43ede3(0x28a)]();lastOrders[_0x43ede3(0x1f8)]({'customId':_0x492f5c,'symbol':_0x20bb89,'coin':_0x181798[_0x43ede3(0x198)],'amount':_0x4abc61,'price':_0x33e581,'side':_0x42f5df,'reverse':_0x181798[_0x43ede3(0x201)],'filled':0x0});if(_0x3f5dee==_0x43ede3(0x17c))logHistory(_0x43ede3(0x119),''+_0x89b7a5+_0xfc08e5+_0x43ede3(0x18f)+_0x20bb89+'\x20'+_0x42f5df+'\x20#'+formatResult(_0x4abc61,0x8)+'\x20@'+formatResult(_0x33e581,0x8));else logHistory(_0x43ede3(0x119),''+_0x89b7a5+_0xfc08e5+_0x43ede3(0x18f)+_0x20bb89+'\x20'+_0x42f5df+'\x20#'+formatResult(_0x4abc61,0x8)+'\x20@'+formatResult(_0x33e581,0x8));let _0x5a255f;_0x3f5dee=='market'?_0x42f5df=='buy'&&[_0x43ede3(0x24d),'Bitget',_0x43ede3(0x145),_0x43ede3(0x20c),'Huobipro'][_0x43ede3(0x2b9)](config[_0x43ede3(0x1cb)])?_0x5a255f=await exchange[_0x43ede3(0x15f)](_0x20bb89,_0x3f5dee,_0x42f5df,_0x4abc61,_0x33e581):_0x5a255f=await exchange['createOrder'](_0x20bb89,_0x3f5dee,_0x42f5df,_0x4abc61,undefined):_0x5a255f=await exchange['createOrder'](_0x20bb89,_0x3f5dee,_0x42f5df,_0x4abc61,_0x33e581);logger[_0x43ede3(0x219)](_0x43ede3(0x212)+_0x5a255f['id']+_0x43ede3(0x23d)+_0x492f5c);const _0x23386b=lastOrders[_0x43ede3(0x19e)]-0x1;if(_0x23386b>=0x0&&lastOrders[_0x23386b][_0x43ede3(0x2ba)]==_0x492f5c){lastOrders[_0x23386b][_0x43ede3(0x2b5)]=_0x5a255f['id'];if(_0x5a255f[_0x43ede3(0x1b8)])lastOrders[_0x23386b][_0x43ede3(0x1b8)]=_0x5a255f[_0x43ede3(0x1b8)];if(_0x5a255f['price'])lastOrders[_0x23386b]['price']=_0x5a255f[_0x43ede3(0x215)];lastOrders[_0x23386b]['fee']=_0x5a255f['fee'];}if(config['cooldown']!=0x0){let _0x4d256e=null;if(cooldownTracker[_0x43ede3(0x19e)]==config[_0x43ede3(0x19a)]-0x1)_0x4d256e=cooldownTracker[_0x43ede3(0x133)]();const _0x28d7c2=getTimeStamp();cooldownTracker['push'](_0x28d7c2);if(_0x4d256e){const _0x31c132=fns['differenceInSeconds'](new Date(_0x28d7c2),new Date(_0x4d256e));if(_0x31c132<cooldownInterval){logHistory(_0x43ede3(0x258),'Executed\x20'+config[_0x43ede3(0x19a)]+_0x43ede3(0x288)+cooldownInterval/0x3c+_0x43ede3(0x27e)+cooldownPeriod/(0xe10*0x3e8)+_0x43ede3(0x11a)),coolingDown=!![];break;}}}}catch(_0x4dad9c){if(_0x4dad9c[_0x43ede3(0x28a)]()[_0x43ede3(0x2b9)](_0x43ede3(0x118)))lastOrders=lastOrders['filter'](_0x192609=>_0x192609[_0x43ede3(0x130)]!=_0x20bb89),logHistory(_0x43ede3(0x258),_0x43ede3(0x13f)+_0x20bb89),_0x1ac80a=!![];else{if(_0x4dad9c[_0x43ede3(0x28a)]()['includes'](_0x43ede3(0x1a6)))lastOrders=lastOrders[_0x43ede3(0x17d)](_0xda406f=>_0xda406f[_0x43ede3(0x130)]!=_0x20bb89),logHistory('error',_0x43ede3(0x12b)+_0x20bb89),_0x1ac80a=!![];else{if(_0x4dad9c['toString']()[_0x43ede3(0x2b9)](_0x43ede3(0x2ac)))lastOrders=lastOrders['filter'](_0xa3881d=>_0xa3881d[_0x43ede3(0x130)]!=_0x20bb89),logHistory(_0x43ede3(0x258),'Order\x20is\x20invalid:\x20'+_0x20bb89),logger[_0x43ede3(0x219)](_0x4dad9c),_0x1ac80a=!![];else _0x4dad9c[_0x43ede3(0x28a)]()['includes'](_0x43ede3(0x1ec))?(lastOrders=lastOrders['filter'](_0x59dd97=>_0x59dd97[_0x43ede3(0x130)]!=_0x20bb89),logHistory(_0x43ede3(0x258),_0x43ede3(0x13f)+_0x20bb89),_0x1ac80a=!![]):(lastOrders=lastOrders['filter'](_0x18d49c=>_0x18d49c[_0x43ede3(0x130)]!=_0x20bb89),await handleError(_0x4dad9c,_0x43ede3(0x226),_0x20bb89));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x43ede3(0x19e)]>0x0){const _0x5c295f=config['ordertype']==_0x43ede3(0x17c)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x12c820=_0x43ede3;validateOrders(_0x12c820(0x1d0));},_0x5c295f);}else unlockOrders();_0x1ac80a&&config['headless']&&(logHistory(_0x43ede3(0x258),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43ede3(0x252),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x43ede3(0x258),_0x43ede3(0x2a0));else lockOrders!=ORDERS[_0x43ede3(0x179)]&&(!config[_0x43ede3(0x10e)]&&(config[_0x43ede3(0x247)]=='market'?logHistory(_0x43ede3(0x258),_0x43ede3(0x115)):logHistory(_0x43ede3(0x258),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x44f04b){const _0x470cc7=_0x8496ec,_0x182be8={...config,'openOrders':_0x44f04b};let _0x2bbac8=dbConfig[_0x470cc7(0x1f1)](_0x470cc7(0x278))[_0x470cc7(0x1b9)]({'botID':botID})['value']();_0x2bbac8&&dbConfig[_0x470cc7(0x1f1)](_0x470cc7(0x278))[_0x470cc7(0x1b9)]({'botID':botID})['assign'](_0x182be8)[_0x470cc7(0x29e)]();}function restoreOrders(){const _0x270da2=_0x8496ec;let _0x471a34;config[_0x270da2(0x210)]&&allOpenOrders[_0x270da2(0x175)](_0x47a51d=>{const _0x2291ea=_0x270da2,_0x4b2c20=config[_0x2291ea(0x210)][_0x2291ea(0x1b9)](_0xaff655=>_0xaff655['orderId']==_0x47a51d['id']);_0x4b2c20&&(lastOrders['push'](_0x4b2c20),_0x471a34=_0x47a51d[_0x2291ea(0x25b)]);});if(lastOrders[_0x270da2(0x19e)]>0x0){lockOrders=ORDERS[_0x270da2(0x1da)],validateOrdersState=_0x270da2(0x14c),allOrdersPlaced=!![];const _0x3daad9=new Date()[_0x270da2(0x1e0)](),_0xb09e29=config['ordertype']==_0x270da2(0x17c)?validateOrderTimeout*0x3c*0x3e8:config[_0x270da2(0x259)]*0x3c*0x3e8;if(_0x471a34+_0xb09e29>_0x3daad9){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3d91ea=_0x270da2;validateOrders(_0x3d91ea(0x1d0));},_0x471a34+_0xb09e29-_0x3daad9);}else validateOrders(_0x270da2(0x1d0));}}async function sendMetricsTelegram(){const _0x5221fe=_0x8496ec;if(!coinsLoaded){process[_0x5221fe(0x254)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x13dd2d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x315af8='';if(config[_0x5221fe(0x242)])_0x315af8=_0x5221fe(0x1ff)+config['botname']+_0x5221fe(0x236);else _0x315af8=_0x5221fe(0x120)+botID+_0x5221fe(0x236);const _0x461195=getKPIs(_0x5221fe(0x222)),_0x54cc2c=getKPIs('fiat',config[_0x5221fe(0x2a4)]),_0xa07291=getKPIs(_0x5221fe(0x208)),_0x33f4ff=getKPIs(_0x5221fe(0x282),config['fiat']);_0x315af8+=_0x5221fe(0x22d),_0x315af8+=_0x461195['leftTxt']+'\x20:\x20'+_0x461195['value']+'\x0a',_0x315af8+=_0x461195[_0x5221fe(0x23e)]+':\x20'+_0x461195[_0x5221fe(0x239)]+'%\x0a',_0x315af8+=_0x54cc2c[_0x5221fe(0x1a9)]+_0x5221fe(0x270)+_0x54cc2c['value']+'\x0a',_0x315af8+=_0x54cc2c[_0x5221fe(0x23e)]+':\x20'+_0x54cc2c['change']+'%\x0a',_0x315af8+=_0xa07291[_0x5221fe(0x1a9)]+':\x20'+_0xa07291['value']+'\x20('+config['basecoin']+')\x0a',_0x315af8+=_0xa07291['rightTxt']+':\x20'+_0xa07291[_0x5221fe(0x239)]+_0x5221fe(0x1ac)+config[_0x5221fe(0x222)]+')\x0a',_0x315af8+=_0x33f4ff['leftTxt']+':\x20'+_0x33f4ff[_0x5221fe(0x20d)]+'\x20('+config[_0x5221fe(0x2a4)]+')\x0a',_0x315af8+=_0x33f4ff[_0x5221fe(0x23e)]+':\x20'+_0x33f4ff['change']+_0x5221fe(0x1ac)+config[_0x5221fe(0x2a4)]+')\x0a',_0x315af8+=_0x5221fe(0x1cf),process[_0x5221fe(0x254)]({'telegrammsg':_0x315af8},_0x1348ab=>{});}async function sendPortfolioTelegram(){const _0x3f31bf=_0x8496ec;if(!coinsLoaded||!currentCoins[0x0][_0x3f31bf(0x2c3)]){process[_0x3f31bf(0x254)]({'telegrammsg':_0x3f31bf(0xfe)},_0xa26ef3=>{});return;}let _0x358088='';if(config[_0x3f31bf(0x242)])_0x358088=_0x3f31bf(0x1ff)+config[_0x3f31bf(0x2c1)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x358088='<b>Bot\x20'+botID+_0x3f31bf(0x10a);_0x358088+=_0x3f31bf(0x22d),_0x358088+=_0x3f31bf(0x195),_0x358088+=_0x3f31bf(0x18d),_0x358088+='-------------------------------\x0a',currentCoins[_0x3f31bf(0x175)](_0x50df34=>{const _0x5b6e42=_0x3f31bf;_0x358088+=_0x50df34[_0x5b6e42(0x198)]['padEnd'](0x7)+'|\x20'+formatPad(_0x50df34[_0x5b6e42(0x2c3)],0x2,0x6)+'|\x20'+formatPad(_0x50df34[_0x5b6e42(0x1e6)],0x2,0x6)+'|\x20'+formatPad(_0x50df34[_0x5b6e42(0x15b)]*0x64,0x2,0x6)+'\x0a';}),_0x358088+=_0x3f31bf(0x1cf),process[_0x3f31bf(0x254)]({'telegrammsg':_0x358088},_0x355c15=>{});}function formatPad(_0xf1f0b6,_0x732bc4,_0xfa6f5e){const _0x2cb802=_0x8496ec,_0xae34b4=formatResultString(_0xf1f0b6,_0x732bc4);return _0xae34b4?_0xae34b4[_0x2cb802(0x147)](_0xfa6f5e):''[_0x2cb802(0x147)](_0xfa6f5e);}function logHistory(_0x48d1aa,_0x242813,_0x46eebb=''){const _0x3c5687=_0x8496ec;logger[_0x3c5687(0x150)](''+_0x242813);let _0x1d5e08={'time':getTimeStamp(),'type':_0x48d1aa,'event':_0x242813};dbLogs['get'](_0x3c5687(0x1f4))[_0x3c5687(0x1f8)](_0x1d5e08)['write']();if(_0x46eebb=='')_0x46eebb=_0x242813;proxyEmit(_0x3c5687(0x255),{'log':_0x1d5e08,'summary':_0x46eebb}),process[_0x3c5687(0x254)]({'telegram':{..._0x1d5e08,'botname':config[_0x3c5687(0x2c1)],'showname':config['showname']}},_0x50c86a=>{});}function emitHistory(_0x33c237={}){const _0x5bd2db=_0x8496ec;Object[_0x5bd2db(0x290)](_0x33c237)[_0x5bd2db(0x19e)]==0x0&&(_0x33c237={'type':['order',_0x5bd2db(0x255)],'event':'','page':0x1});if(_0x33c237[_0x5bd2db(0x283)][_0x5bd2db(0x2b9)](_0x5bd2db(0x255)))_0x33c237[_0x5bd2db(0x283)][_0x5bd2db(0x105)](_0x33c237[_0x5bd2db(0x283)][_0x5bd2db(0x28c)](_0x5bd2db(0x255)),0x1,'error','warning',_0x5bd2db(0x252));if(dbLogs[_0x5bd2db(0x129)](_0x5bd2db(0x1f4))[_0x5bd2db(0x20d)]()){let _0x519473=dbLogs[_0x5bd2db(0x1f1)](_0x5bd2db(0x1f4))['filter'](_0x21c6c7=>{const _0x7365e9=_0x5bd2db;if(_0x33c237[_0x7365e9(0x283)][_0x7365e9(0x19e)]==0x0)return![];else return _0x33c237['type'][_0x7365e9(0x2b9)](_0x21c6c7['type']);})[_0x5bd2db(0x17d)](_0xa83b0f=>{const _0x285f02=_0x5bd2db;if(_0x33c237['event']=='')return!![];else return _0xa83b0f[_0x285f02(0x255)][_0x285f02(0x273)]()[_0x285f02(0x2b9)](_0x33c237[_0x285f02(0x255)][_0x285f02(0x273)]());})[_0x5bd2db(0x22f)](_0x5bd2db(0x199)),_0x5cbe8e=_0x519473[_0x5bd2db(0x20d)]()[_0x5bd2db(0x19e)];_0x519473=_0x519473[_0x5bd2db(0x201)]()['slice']((_0x33c237['page']-0x1)*logPageSize,_0x33c237['page']*logPageSize-0x1)[_0x5bd2db(0x201)]()[_0x5bd2db(0x20d)](),proxyEmit(_0x5bd2db(0x165),{'logs':_0x519473,'total':_0x5cbe8e});}else proxyEmit(_0x5bd2db(0x165),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x24fb0c){const _0x4eadda=_0x8496ec;if(dbLogs[_0x4eadda(0x129)]('logs')[_0x4eadda(0x20d)]()){const _0x4c3d36=dbLogs['get'](_0x4eadda(0x1f4))[_0x4eadda(0x22f)](_0x4eadda(0x199))['filter'](_0xb146e5=>{const _0x4ae564=_0x4eadda;return _0xb146e5[_0x4ae564(0x283)]==_0x4ae564(0x119);})[_0x4eadda(0x20d)]();dbLogs[_0x4eadda(0x1f1)](_0x4eadda(0x1f4))[_0x4eadda(0x10d)]()['write'](),dbLogs['get'](_0x4eadda(0x1f4))['assign'](_0x4c3d36)['write'](),emitHistory(_0x24fb0c);}}async function pauseBot(_0x2c4e7b=pauseBotIntervalShort,_0x38e97d,_0x9f785f,_0x2b503c=![]){const _0x1413b8=_0x8496ec,_0x5984f7=new Date()[_0x1413b8(0x1e0)]();if(!lastErrorShown||_0x5984f7-lastErrorShown>=_0x2c4e7b){lastErrorShown=_0x5984f7;if(!lastBotPause)lastBotPause=_0x5984f7,consecutivePauses=0x1;else{if(_0x5984f7-lastBotPause-_0x2c4e7b<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x2b503c){logHistory(_0x1413b8(0x258),_0x38e97d+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x1413b8(0x258),_0x38e97d+pauseBotMsg),_0x2c4e7b=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5984f7;}_0x9f785f?logger[_0x1413b8(0x219)]('('+consecutivePauses+')\x20'+_0x38e97d+_0x1413b8(0x24c),_0x9f785f):logger[_0x1413b8(0x219)]('('+consecutivePauses+')\x20'+_0x38e97d);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2c4e7b),botPaused=![],_0x2c4e7b==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x25c1b5=_0x8496ec;botPaused=!![],await sleep(0x3e8),process[_0x25c1b5(0x254)]({'stop':_0x25c1b5(0x269)},_0x5abf27=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x50cf5d,_0x48507b){const _0x3d3fd2=_0x8496ec;if(botPaused)return;const _0x429921=config[_0x3d3fd2(0x1cb)]||'Exchange';if(_0x48507b)logger[_0x3d3fd2(0x219)](_0x3d3fd2(0x275)+_0x48507b);const _0x234ac3=()=>{const _0x5682fb=_0x3d3fd2;loading[_0x5682fb(0x258)]=!![],emitLoadingProgress();};if(_0x50cf5d[_0x3d3fd2(0x28a)]()[_0x3d3fd2(0x2b9)](_0x3d3fd2(0x292)))logHistory(_0x3d3fd2(0x258),_0x429921+_0x3d3fd2(0x271)),_0x234ac3();else{if(_0x50cf5d['toString']()[_0x3d3fd2(0x2b9)](_0x3d3fd2(0x12d)))logHistory('error',_0x429921+_0x3d3fd2(0x192)),_0x234ac3();else _0x50cf5d[_0x3d3fd2(0x28a)]()[_0x3d3fd2(0x2b9)](_0x3d3fd2(0x261))?(logHistory('error',_0x429921+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory('error',_0x3d3fd2(0x124)),_0x234ac3()):await handleError(_0x50cf5d,null);}}async function handleError(_0x1b98bb,_0x5c481c,_0x341d0b=''){const _0x596cc=_0x8496ec;if(botPaused)return;let _0x2935d2;const _0xb908ac=config[_0x596cc(0x1cb)]||'Exchange';if(_0x5c481c)logger['debug'](_0x596cc(0x275)+_0x5c481c);if(_0x1b98bb[_0x596cc(0x28a)]()['includes'](_0x596cc(0x101)))_0x2935d2=_0xb908ac+_0x596cc(0x2b3),await pauseBot(undefined,_0x2935d2,_0x1b98bb);else{if(_0x1b98bb[_0x596cc(0x28a)]()['includes']('RateLimitExceeded'))_0x2935d2=_0xb908ac+_0x596cc(0x144),await pauseBot(undefined,_0x2935d2,_0x1b98bb);else{if(_0x1b98bb['toString']()[_0x596cc(0x2b9)](_0x596cc(0x168))||_0x1b98bb[_0x596cc(0x28a)]()[_0x596cc(0x2b9)](_0x596cc(0x21b)))_0x2935d2=_0xb908ac+_0x596cc(0x172),await pauseBot(undefined,_0x2935d2,_0x1b98bb[_0x596cc(0x28a)]());else{if(_0x1b98bb[_0x596cc(0x28a)]()[_0x596cc(0x2b9)](_0x596cc(0x25a)))_0x2935d2=_0xb908ac+_0x596cc(0x26b),await pauseBot(undefined,_0x2935d2,_0x1b98bb[_0x596cc(0x28a)]());else{if(_0x1b98bb['toString']()[_0x596cc(0x2b9)](_0x596cc(0x190)))_0x2935d2=_0xb908ac+_0x596cc(0x1a5),await pauseBot(undefined,_0x2935d2,_0x1b98bb[_0x596cc(0x28a)]());else{if(_0x1b98bb['toString']()[_0x596cc(0x273)]()[_0x596cc(0x2b9)]('timestamp')||_0x1b98bb[_0x596cc(0x28a)]()['toLowerCase']()[_0x596cc(0x2b9)](_0x596cc(0x181)))_0x2935d2='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x2935d2,_0x1b98bb[_0x596cc(0x28a)]());else{if(_0x1b98bb[_0x596cc(0x28a)]()['includes'](_0x596cc(0x11e)))_0x2935d2=_0xb908ac+_0x596cc(0x213),await pauseBot(undefined,_0x2935d2,_0x1b98bb[_0x596cc(0x28a)]());else{if(_0x1b98bb instanceof ccxt[_0x596cc(0x143)])_0x2935d2=_0xb908ac+'\x20network\x20error:\x20'+_0x1b98bb[_0x596cc(0x28a)](),logger[_0x596cc(0x219)]('Network\x20error\x20details:',_0x1b98bb),await pauseBot(undefined,_0x2935d2,_0x1b98bb);else{if(_0x1b98bb['toString']()['includes']('API-key\x20format\x20invalid'))logHistory(_0x596cc(0x258),_0xb908ac+_0x596cc(0x160)),logHistory(_0x596cc(0x258),_0x596cc(0x221)),await killBot();else{if(_0x1b98bb['toString']()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x596cc(0x258),_0xb908ac+_0x596cc(0x1e5)),logHistory(_0x596cc(0x258),_0x596cc(0x221)),await killBot();else{if(_0x1b98bb[_0x596cc(0x28a)]()[_0x596cc(0x2b9)](_0x596cc(0x261))&&_0x1b98bb[_0x596cc(0x28a)]()[_0x596cc(0x2b9)](_0x596cc(0x234)))_0x2935d2=_0xb908ac+_0x596cc(0x114),await pauseBot(undefined,_0x2935d2,_0x1b98bb,!![]);else{if(_0x1b98bb['toString']()[_0x596cc(0x2b9)]('AuthenticationError'))config[_0x596cc(0x21f)]?_0x2935d2=_0xb908ac+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x2935d2=_0xb908ac+_0x596cc(0x19c),logHistory('error',_0x2935d2),logHistory('error',_0x596cc(0x221)),await killBot();else{if(_0x1b98bb['toString']()[_0x596cc(0x2b9)](_0x596cc(0x277)))logHistory(_0x596cc(0x258),_0xb908ac+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x596cc(0x258),_0x596cc(0x221)),await killBot();else{if(_0x1b98bb[_0x596cc(0x28a)]()[_0x596cc(0x2b9)](_0x596cc(0x225)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x341d0b);else{if(_0x1b98bb instanceof ccxt[_0x596cc(0x11f)]){_0x2935d2=_0xb908ac+_0x596cc(0x1ab)+_0x1b98bb[_0x596cc(0x28a)](),logHistory('error',_0x2935d2),logger[_0x596cc(0x219)](_0x596cc(0x1d5),_0x1b98bb);if(_0x341d0b)logger['debug']('Symbol(s):\x20'+_0x341d0b);await pauseBot(undefined,_0x2935d2,_0x1b98bb);}else{_0x2935d2=_0x596cc(0x1bf)+_0x1b98bb['toString'](),logHistory(_0x596cc(0x258),_0x2935d2),logger[_0x596cc(0x219)](_0x2935d2+'\x20>\x20details:',_0x1b98bb);if(_0x341d0b)logger[_0x596cc(0x219)](_0x596cc(0x2bd)+_0x341d0b);await pauseBot(undefined,_0x2935d2);}}}}}}}}}}}}}}}}function decryptRSA(_0x5ecb34,_0x9eeb85){const _0x5cc681=_0x8496ec,_0x40b911=forge[_0x5cc681(0x11b)]['privateKeyFromPem'](_0x5ecb34),_0x3efedb=_0x40b911['decrypt'](forge[_0x5cc681(0x112)][_0x5cc681(0x1ae)](_0x9eeb85),_0x5cc681(0x1f7),{'md':forge['md'][_0x5cc681(0x224)]['create'](),'mgf1':{'md':forge['md'][_0x5cc681(0x224)][_0x5cc681(0x13e)]()}});return _0x3efedb;}async function withRetry(_0x4d7709,_0xa3f91e){const _0x5372b2=_0x8496ec;let _0xeffd82=![],_0x18596d=0x0,_0x5ccb92,_0x2467e1;while(_0x18596d<maxRetries){try{_0x5ccb92=await _0xa3f91e();break;}catch(_0x20af20){_0x2467e1=_0x20af20,!_0xeffd82?(_0xeffd82=!![],logger[_0x5372b2(0x219)](_0x5372b2(0x1ad)+_0x4d7709+':',_0x20af20['toString']())):await sleep(retryInterval);}_0x18596d++;}if(_0x18596d==0x0)return _0x5ccb92;if(_0x18596d>=maxRetries)throw _0x2467e1;else return logger[_0x5372b2(0x219)](_0x5372b2(0x117)+_0x18596d+_0x5372b2(0x155)),_0x5ccb92;}function formatResult(_0x4393b7,_0x218895){const _0x332a8e=_0x8496ec;return parseFloat(_0x4393b7[_0x332a8e(0x22a)](_0x218895));}function formatResultTruncate(_0x10e039,_0x36e6dd){const _0x5bbe79=_0x8496ec;let _0x3b5852=formatResultString(_0x10e039,0xa),_0x5058e3=_0x3b5852[_0x5bbe79(0x28c)]('.');return _0x5058e3!=-0x1&&(_0x3b5852=_0x3b5852[_0x5bbe79(0x1b7)](0x0,_0x5058e3+_0x36e6dd+0x1)),Number(_0x3b5852);}function formatResultString(_0x2bc65f,_0x11f529){const _0x9c511e=_0x8496ec;let _0x795140;if(!(''+_0x2bc65f)['includes']('e'))_0x795140=+(Math[_0x9c511e(0x1d9)](_0x2bc65f+'e+'+_0x11f529)+'e-'+_0x11f529);else{let _0x5c3823=(''+_0x2bc65f)[_0x9c511e(0x2b2)]('e'),_0x5938ae='';+_0x5c3823[0x1]+_0x11f529>0x0&&(_0x5938ae='+'),_0x795140=+(Math['round'](+_0x5c3823[0x0]+'e'+_0x5938ae+(+_0x5c3823[0x1]+_0x11f529))+'e-'+_0x11f529);}return Number(_0x795140)[_0x9c511e(0x22a)](_0x11f529);}function getServerTime(){const _0x472e99=_0x8496ec,_0x3aa0d7=new Date();return _0x3aa0d7[_0x472e99(0x15e)]()+'/'+(_0x3aa0d7['getMonth']()+0x1)[_0x472e99(0x28a)]()['padStart'](0x2,'0')+'/'+_0x3aa0d7['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3aa0d7[_0x472e99(0x2c0)]()[_0x472e99(0x28a)]()[_0x472e99(0x147)](0x2,'0')+':'+_0x3aa0d7['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x3aa0d7[_0x472e99(0x1a8)]()[_0x472e99(0x28a)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3f95dd=_0x8496ec,_0x2408c2=shiftedTime();return _0x2408c2[_0x3f95dd(0x15e)]()+'/'+(_0x2408c2[_0x3f95dd(0x189)]()+0x1)[_0x3f95dd(0x28a)]()[_0x3f95dd(0x147)](0x2,'0')+'/'+_0x2408c2[_0x3f95dd(0x245)]()['toString']()[_0x3f95dd(0x147)](0x2,'0')+'\x20'+_0x2408c2['getHours']()[_0x3f95dd(0x28a)]()[_0x3f95dd(0x147)](0x2,'0')+':'+_0x2408c2[_0x3f95dd(0x11d)]()[_0x3f95dd(0x28a)]()[_0x3f95dd(0x147)](0x2,'0')+':'+_0x2408c2[_0x3f95dd(0x1a8)]()[_0x3f95dd(0x28a)]()[_0x3f95dd(0x147)](0x2,'0');}function getDate(){const _0xd84aec=_0x8496ec,_0x38ea46=shiftedTime();return _0x38ea46[_0xd84aec(0x15e)]()+'/'+(_0x38ea46['getMonth']()+0x1)[_0xd84aec(0x28a)]()[_0xd84aec(0x147)](0x2,'0')+'/'+_0x38ea46[_0xd84aec(0x245)]()[_0xd84aec(0x28a)]()[_0xd84aec(0x147)](0x2,'0');}function getHour(){const _0x1689e0=_0x8496ec,_0x1424f9=shiftedTime();return _0x1424f9['getHours']()[_0x1689e0(0x28a)]()[_0x1689e0(0x147)](0x2,'0');}function sleep(_0x55fe4f){return new Promise(_0x196786=>setTimeout(_0x196786,_0x55fe4f));}function shiftedTime(){const _0x44517c=_0x8496ec,_0xcc485c=new Date();let _0x5d97ca=_0xcc485c;if(config&&config['timeshift']!==0x0)_0x5d97ca=fns['add'](_0xcc485c,{'hours':config[_0x44517c(0x257)]});return _0x5d97ca;}function timer(_0x181855){const _0x5001db=_0x8496ec,_0x206b21=new Date();!lasttime?console[_0x5001db(0x280)](getTimeStamp()+_0x5001db(0x169),_0x181855,_0x206b21):console['log'](getTimeStamp()+_0x5001db(0x169),_0x181855,(_0x206b21-lasttime)/0x3e8),lasttime=_0x206b21;}